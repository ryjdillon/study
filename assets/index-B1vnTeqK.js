var Kje=Object.defineProperty;var Xje=(e,t,n)=>t in e?Kje(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Qje=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var hu=(e,t,n)=>(Xje(e,typeof t!="symbol"?t+"":t,n),n);var Jan=Qje((uln,bie)=>{function Jje(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in e)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(e,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var to=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Kl(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Zje(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var i=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return e[r]}})}),n}var yye={exports:{}},tL={},vye={exports:{}},Mn={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ZI=Symbol.for("react.element"),e8e=Symbol.for("react.portal"),t8e=Symbol.for("react.fragment"),n8e=Symbol.for("react.strict_mode"),r8e=Symbol.for("react.profiler"),i8e=Symbol.for("react.provider"),s8e=Symbol.for("react.context"),o8e=Symbol.for("react.forward_ref"),a8e=Symbol.for("react.suspense"),u8e=Symbol.for("react.memo"),l8e=Symbol.for("react.lazy"),Vie=Symbol.iterator;function c8e(e){return e===null||typeof e!="object"?null:(e=Vie&&e[Vie]||e["@@iterator"],typeof e=="function"?e:null)}var bye={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},_ye=Object.assign,wye={};function Hx(e,t,n){this.props=e,this.context=t,this.refs=wye,this.updater=n||bye}Hx.prototype.isReactComponent={};Hx.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Hx.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Eye(){}Eye.prototype=Hx.prototype;function Mq(e,t,n){this.props=e,this.context=t,this.refs=wye,this.updater=n||bye}var Lq=Mq.prototype=new Eye;Lq.constructor=Mq;_ye(Lq,Hx.prototype);Lq.isPureReactComponent=!0;var Hie=Array.isArray,xye=Object.prototype.hasOwnProperty,Fq={current:null},Sye={key:!0,ref:!0,__self:!0,__source:!0};function Tye(e,t,n){var r,i={},s=null,o=null;if(t!=null)for(r in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(s=""+t.key),t)xye.call(t,r)&&!Sye.hasOwnProperty(r)&&(i[r]=t[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var u=Array(a),l=0;l<a;l++)u[l]=arguments[l+2];i.children=u}if(e&&e.defaultProps)for(r in a=e.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:ZI,type:e,key:s,ref:o,props:i,_owner:Fq.current}}function f8e(e,t){return{$$typeof:ZI,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function jq(e){return typeof e=="object"&&e!==null&&e.$$typeof===ZI}function d8e(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var qie=/\/+/g;function Q5(e,t){return typeof e=="object"&&e!==null&&e.key!=null?d8e(""+e.key):t.toString(36)}function KD(e,t,n,r,i){var s=typeof e;(s==="undefined"||s==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case ZI:case e8e:o=!0}}if(o)return o=e,i=i(o),e=r===""?"."+Q5(o,0):r,Hie(i)?(n="",e!=null&&(n=e.replace(qie,"$&/")+"/"),KD(i,t,n,"",function(l){return l})):i!=null&&(jq(i)&&(i=f8e(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(qie,"$&/")+"/")+e)),t.push(i)),1;if(o=0,r=r===""?".":r+":",Hie(e))for(var a=0;a<e.length;a++){s=e[a];var u=r+Q5(s,a);o+=KD(s,t,n,u,i)}else if(u=c8e(e),typeof u=="function")for(e=u.call(e),a=0;!(s=e.next()).done;)s=s.value,u=r+Q5(s,a++),o+=KD(s,t,n,u,i);else if(s==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function oN(e,t,n){if(e==null)return e;var r=[],i=0;return KD(e,r,"","",function(s){return t.call(n,s,i++)}),r}function h8e(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var iu={current:null},XD={transition:null},p8e={ReactCurrentDispatcher:iu,ReactCurrentBatchConfig:XD,ReactCurrentOwner:Fq};function Cye(){throw Error("act(...) is not supported in production builds of React.")}Mn.Children={map:oN,forEach:function(e,t,n){oN(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return oN(e,function(){t++}),t},toArray:function(e){return oN(e,function(t){return t})||[]},only:function(e){if(!jq(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Mn.Component=Hx;Mn.Fragment=t8e;Mn.Profiler=r8e;Mn.PureComponent=Mq;Mn.StrictMode=n8e;Mn.Suspense=a8e;Mn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=p8e;Mn.act=Cye;Mn.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=_ye({},e.props),i=e.key,s=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(s=t.ref,o=Fq.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(u in t)xye.call(t,u)&&!Sye.hasOwnProperty(u)&&(r[u]=t[u]===void 0&&a!==void 0?a[u]:t[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){a=Array(u);for(var l=0;l<u;l++)a[l]=arguments[l+2];r.children=a}return{$$typeof:ZI,type:e.type,key:i,ref:s,props:r,_owner:o}};Mn.createContext=function(e){return e={$$typeof:s8e,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:i8e,_context:e},e.Consumer=e};Mn.createElement=Tye;Mn.createFactory=function(e){var t=Tye.bind(null,e);return t.type=e,t};Mn.createRef=function(){return{current:null}};Mn.forwardRef=function(e){return{$$typeof:o8e,render:e}};Mn.isValidElement=jq;Mn.lazy=function(e){return{$$typeof:l8e,_payload:{_status:-1,_result:e},_init:h8e}};Mn.memo=function(e,t){return{$$typeof:u8e,type:e,compare:t===void 0?null:t}};Mn.startTransition=function(e){var t=XD.transition;XD.transition={};try{e()}finally{XD.transition=t}};Mn.unstable_act=Cye;Mn.useCallback=function(e,t){return iu.current.useCallback(e,t)};Mn.useContext=function(e){return iu.current.useContext(e)};Mn.useDebugValue=function(){};Mn.useDeferredValue=function(e){return iu.current.useDeferredValue(e)};Mn.useEffect=function(e,t){return iu.current.useEffect(e,t)};Mn.useId=function(){return iu.current.useId()};Mn.useImperativeHandle=function(e,t,n){return iu.current.useImperativeHandle(e,t,n)};Mn.useInsertionEffect=function(e,t){return iu.current.useInsertionEffect(e,t)};Mn.useLayoutEffect=function(e,t){return iu.current.useLayoutEffect(e,t)};Mn.useMemo=function(e,t){return iu.current.useMemo(e,t)};Mn.useReducer=function(e,t,n){return iu.current.useReducer(e,t,n)};Mn.useRef=function(e){return iu.current.useRef(e)};Mn.useState=function(e){return iu.current.useState(e)};Mn.useSyncExternalStore=function(e,t,n){return iu.current.useSyncExternalStore(e,t,n)};Mn.useTransition=function(){return iu.current.useTransition()};Mn.version="18.3.1";vye.exports=Mn;var I=vye.exports;const _r=Kl(I),pO=Jje({__proto__:null,default:_r},[I]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var m8e=I,g8e=Symbol.for("react.element"),y8e=Symbol.for("react.fragment"),v8e=Object.prototype.hasOwnProperty,b8e=m8e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,_8e={key:!0,ref:!0,__self:!0,__source:!0};function Aye(e,t,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),t.key!==void 0&&(s=""+t.key),t.ref!==void 0&&(o=t.ref);for(r in t)v8e.call(t,r)&&!_8e.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)i[r]===void 0&&(i[r]=t[r]);return{$$typeof:g8e,type:e,key:s,ref:o,props:i,_owner:b8e.current}}tL.Fragment=y8e;tL.jsx=Aye;tL.jsxs=Aye;yye.exports=tL;var _=yye.exports,YB={},Iye={exports:{}},Xl={},kye={exports:{}},Rye={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(U,H){var D=U.length;U.push(H);e:for(;0<D;){var z=D-1>>>1,W=U[z];if(0<i(W,H))U[z]=H,U[D]=W,D=z;else break e}}function n(U){return U.length===0?null:U[0]}function r(U){if(U.length===0)return null;var H=U[0],D=U.pop();if(D!==H){U[0]=D;e:for(var z=0,W=U.length,j=W>>>1;z<j;){var q=2*(z+1)-1,G=U[q],ne=q+1,ce=U[ne];if(0>i(G,D))ne<W&&0>i(ce,G)?(U[z]=ce,U[ne]=D,z=ne):(U[z]=G,U[q]=D,z=q);else if(ne<W&&0>i(ce,D))U[z]=ce,U[ne]=D,z=ne;else break e}}return H}function i(U,H){var D=U.sortIndex-H.sortIndex;return D!==0?D:U.id-H.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();e.unstable_now=function(){return o.now()-a}}var u=[],l=[],c=1,f=null,d=3,h=!1,p=!1,m=!1,g=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(U){for(var H=n(l);H!==null;){if(H.callback===null)r(l);else if(H.startTime<=U)r(l),H.sortIndex=H.expirationTime,t(u,H);else break;H=n(l)}}function w(U){if(m=!1,b(U),!p)if(n(u)!==null)p=!0,M(E);else{var H=n(l);H!==null&&B(w,H.startTime-U)}}function E(U,H){p=!1,m&&(m=!1,y(C),C=-1),h=!0;var D=d;try{for(b(H),f=n(u);f!==null&&(!(f.expirationTime>H)||U&&!N());){var z=f.callback;if(typeof z=="function"){f.callback=null,d=f.priorityLevel;var W=z(f.expirationTime<=H);H=e.unstable_now(),typeof W=="function"?f.callback=W:f===n(u)&&r(u),b(H)}else r(u);f=n(u)}if(f!==null)var j=!0;else{var q=n(l);q!==null&&B(w,q.startTime-H),j=!1}return j}finally{f=null,d=D,h=!1}}var T=!1,S=null,C=-1,A=5,k=-1;function N(){return!(e.unstable_now()-k<A)}function O(){if(S!==null){var U=e.unstable_now();k=U;var H=!0;try{H=S(!0,U)}finally{H?P():(T=!1,S=null)}}else T=!1}var P;if(typeof v=="function")P=function(){v(O)};else if(typeof MessageChannel<"u"){var $=new MessageChannel,F=$.port2;$.port1.onmessage=O,P=function(){F.postMessage(null)}}else P=function(){g(O,0)};function M(U){S=U,T||(T=!0,P())}function B(U,H){C=g(function(){U(e.unstable_now())},H)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(U){U.callback=null},e.unstable_continueExecution=function(){p||h||(p=!0,M(E))},e.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<U?Math.floor(1e3/U):5},e.unstable_getCurrentPriorityLevel=function(){return d},e.unstable_getFirstCallbackNode=function(){return n(u)},e.unstable_next=function(U){switch(d){case 1:case 2:case 3:var H=3;break;default:H=d}var D=d;d=H;try{return U()}finally{d=D}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(U,H){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var D=d;d=U;try{return H()}finally{d=D}},e.unstable_scheduleCallback=function(U,H,D){var z=e.unstable_now();switch(typeof D=="object"&&D!==null?(D=D.delay,D=typeof D=="number"&&0<D?z+D:z):D=z,U){case 1:var W=-1;break;case 2:W=250;break;case 5:W=1073741823;break;case 4:W=1e4;break;default:W=5e3}return W=D+W,U={id:c++,callback:H,priorityLevel:U,startTime:D,expirationTime:W,sortIndex:-1},D>z?(U.sortIndex=D,t(l,U),n(u)===null&&U===n(l)&&(m?(y(C),C=-1):m=!0,B(w,D-z))):(U.sortIndex=W,t(u,U),p||h||(p=!0,M(E))),U},e.unstable_shouldYield=N,e.unstable_wrapCallback=function(U){var H=d;return function(){var D=d;d=H;try{return U.apply(this,arguments)}finally{d=D}}}})(Rye);kye.exports=Rye;var w8e=kye.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var E8e=I,$l=w8e;function tt(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Nye=new Set,oA={};function Ib(e,t){TE(e,t),TE(e+"Capture",t)}function TE(e,t){for(oA[e]=t,e=0;e<t.length;e++)Nye.add(t[e])}var pm=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),KB=Object.prototype.hasOwnProperty,x8e=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Wie={},Gie={};function S8e(e){return KB.call(Gie,e)?!0:KB.call(Wie,e)?!1:x8e.test(e)?Gie[e]=!0:(Wie[e]=!0,!1)}function T8e(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function C8e(e,t,n,r){if(t===null||typeof t>"u"||T8e(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function su(e,t,n,r,i,s,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var Lo={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Lo[e]=new su(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Lo[t]=new su(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Lo[e]=new su(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Lo[e]=new su(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Lo[e]=new su(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Lo[e]=new su(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Lo[e]=new su(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Lo[e]=new su(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Lo[e]=new su(e,5,!1,e.toLowerCase(),null,!1,!1)});var Bq=/[\-:]([a-z])/g;function Uq(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Bq,Uq);Lo[t]=new su(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Bq,Uq);Lo[t]=new su(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Bq,Uq);Lo[t]=new su(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Lo[e]=new su(e,1,!1,e.toLowerCase(),null,!1,!1)});Lo.xlinkHref=new su("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Lo[e]=new su(e,1,!1,e.toLowerCase(),null,!0,!0)});function zq(e,t,n,r){var i=Lo.hasOwnProperty(t)?Lo[t]:null;(i!==null?i.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(C8e(t,n,i,r)&&(n=null),r||i===null?S8e(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=n===null?i.type===3?!1:"":n:(t=i.attributeName,r=i.attributeNamespace,n===null?e.removeAttribute(t):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var zm=E8e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,aN=Symbol.for("react.element"),hw=Symbol.for("react.portal"),pw=Symbol.for("react.fragment"),Vq=Symbol.for("react.strict_mode"),XB=Symbol.for("react.profiler"),Dye=Symbol.for("react.provider"),Pye=Symbol.for("react.context"),Hq=Symbol.for("react.forward_ref"),QB=Symbol.for("react.suspense"),JB=Symbol.for("react.suspense_list"),qq=Symbol.for("react.memo"),kg=Symbol.for("react.lazy"),Oye=Symbol.for("react.offscreen"),Yie=Symbol.iterator;function dT(e){return e===null||typeof e!="object"?null:(e=Yie&&e[Yie]||e["@@iterator"],typeof e=="function"?e:null)}var Pi=Object.assign,J5;function h2(e){if(J5===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);J5=t&&t[1]||""}return`
`+J5+e}var Z5=!1;function ej(e,t){if(!e||Z5)return"";Z5=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(l){var r=l}Reflect.construct(e,[],t)}else{try{t.call()}catch(l){r=l}e.call(t.prototype)}else{try{throw Error()}catch(l){r=l}e()}}catch(l){if(l&&r&&typeof l.stack=="string"){for(var i=l.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var u=`
`+i[o].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}while(1<=o&&0<=a);break}}}finally{Z5=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?h2(e):""}function A8e(e){switch(e.tag){case 5:return h2(e.type);case 16:return h2("Lazy");case 13:return h2("Suspense");case 19:return h2("SuspenseList");case 0:case 2:case 15:return e=ej(e.type,!1),e;case 11:return e=ej(e.type.render,!1),e;case 1:return e=ej(e.type,!0),e;default:return""}}function ZB(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case pw:return"Fragment";case hw:return"Portal";case XB:return"Profiler";case Vq:return"StrictMode";case QB:return"Suspense";case JB:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Pye:return(e.displayName||"Context")+".Consumer";case Dye:return(e._context.displayName||"Context")+".Provider";case Hq:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case qq:return t=e.displayName||null,t!==null?t:ZB(e.type)||"Memo";case kg:t=e._payload,e=e._init;try{return ZB(e(t))}catch{}}return null}function I8e(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ZB(t);case 8:return t===Vq?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function L0(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function $ye(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function k8e(e){var t=$ye(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function uN(e){e._valueTracker||(e._valueTracker=k8e(e))}function Mye(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=$ye(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function mO(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function eU(e,t){var n=t.checked;return Pi({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function Kie(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=L0(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Lye(e,t){t=t.checked,t!=null&&zq(e,"checked",t,!1)}function tU(e,t){Lye(e,t);var n=L0(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?nU(e,t.type,n):t.hasOwnProperty("defaultValue")&&nU(e,t.type,L0(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Xie(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function nU(e,t,n){(t!=="number"||mO(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var p2=Array.isArray;function jw(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+L0(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,r&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function rU(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(tt(91));return Pi({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Qie(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(tt(92));if(p2(n)){if(1<n.length)throw Error(tt(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:L0(n)}}function Fye(e,t){var n=L0(t.value),r=L0(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function Jie(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function jye(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function iU(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?jye(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var lN,Bye=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(lN=lN||document.createElement("div"),lN.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=lN.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function aA(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var oC={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},R8e=["Webkit","ms","Moz","O"];Object.keys(oC).forEach(function(e){R8e.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),oC[t]=oC[e]})});function Uye(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||oC.hasOwnProperty(e)&&oC[e]?(""+t).trim():t+"px"}function zye(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=Uye(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}var N8e=Pi({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function sU(e,t){if(t){if(N8e[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(tt(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(tt(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(tt(61))}if(t.style!=null&&typeof t.style!="object")throw Error(tt(62))}}function oU(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var aU=null;function Wq(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var uU=null,Bw=null,Uw=null;function Zie(e){if(e=nk(e)){if(typeof uU!="function")throw Error(tt(280));var t=e.stateNode;t&&(t=oL(t),uU(e.stateNode,e.type,t))}}function Vye(e){Bw?Uw?Uw.push(e):Uw=[e]:Bw=e}function Hye(){if(Bw){var e=Bw,t=Uw;if(Uw=Bw=null,Zie(e),t)for(e=0;e<t.length;e++)Zie(t[e])}}function qye(e,t){return e(t)}function Wye(){}var tj=!1;function Gye(e,t,n){if(tj)return e(t,n);tj=!0;try{return qye(e,t,n)}finally{tj=!1,(Bw!==null||Uw!==null)&&(Wye(),Hye())}}function uA(e,t){var n=e.stateNode;if(n===null)return null;var r=oL(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(tt(231,t,typeof n));return n}var lU=!1;if(pm)try{var hT={};Object.defineProperty(hT,"passive",{get:function(){lU=!0}}),window.addEventListener("test",hT,hT),window.removeEventListener("test",hT,hT)}catch{lU=!1}function D8e(e,t,n,r,i,s,o,a,u){var l=Array.prototype.slice.call(arguments,3);try{t.apply(n,l)}catch(c){this.onError(c)}}var aC=!1,gO=null,yO=!1,cU=null,P8e={onError:function(e){aC=!0,gO=e}};function O8e(e,t,n,r,i,s,o,a,u){aC=!1,gO=null,D8e.apply(P8e,arguments)}function $8e(e,t,n,r,i,s,o,a,u){if(O8e.apply(this,arguments),aC){if(aC){var l=gO;aC=!1,gO=null}else throw Error(tt(198));yO||(yO=!0,cU=l)}}function kb(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function Yye(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function ese(e){if(kb(e)!==e)throw Error(tt(188))}function M8e(e){var t=e.alternate;if(!t){if(t=kb(e),t===null)throw Error(tt(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return ese(i),e;if(s===r)return ese(i),t;s=s.sibling}throw Error(tt(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(tt(189))}}if(n.alternate!==r)throw Error(tt(190))}if(n.tag!==3)throw Error(tt(188));return n.stateNode.current===n?e:t}function Kye(e){return e=M8e(e),e!==null?Xye(e):null}function Xye(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Xye(e);if(t!==null)return t;e=e.sibling}return null}var Qye=$l.unstable_scheduleCallback,tse=$l.unstable_cancelCallback,L8e=$l.unstable_shouldYield,F8e=$l.unstable_requestPaint,ss=$l.unstable_now,j8e=$l.unstable_getCurrentPriorityLevel,Gq=$l.unstable_ImmediatePriority,Jye=$l.unstable_UserBlockingPriority,vO=$l.unstable_NormalPriority,B8e=$l.unstable_LowPriority,Zye=$l.unstable_IdlePriority,nL=null,oh=null;function U8e(e){if(oh&&typeof oh.onCommitFiberRoot=="function")try{oh.onCommitFiberRoot(nL,e,void 0,(e.current.flags&128)===128)}catch{}}var Lf=Math.clz32?Math.clz32:H8e,z8e=Math.log,V8e=Math.LN2;function H8e(e){return e>>>=0,e===0?32:31-(z8e(e)/V8e|0)|0}var cN=64,fN=4194304;function m2(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function bO(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,i=e.suspendedLanes,s=e.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=m2(a):(s&=o,s!==0&&(r=m2(s)))}else o=n&~i,o!==0?r=m2(o):s!==0&&(r=m2(s));if(r===0)return 0;if(t!==0&&t!==r&&!(t&i)&&(i=r&-r,s=t&-t,i>=s||i===16&&(s&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-Lf(t),i=1<<n,r|=e[n],t&=~i;return r}function q8e(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function W8e(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var o=31-Lf(s),a=1<<o,u=i[o];u===-1?(!(a&n)||a&r)&&(i[o]=q8e(a,t)):u<=t&&(e.expiredLanes|=a),s&=~a}}function fU(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function eve(){var e=cN;return cN<<=1,!(cN&4194240)&&(cN=64),e}function nj(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function ek(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Lf(t),e[t]=n}function G8e(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-Lf(n),s=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~s}}function Yq(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Lf(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var Or=0;function tve(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var nve,Kq,rve,ive,sve,dU=!1,dN=[],f0=null,d0=null,h0=null,lA=new Map,cA=new Map,jg=[],Y8e="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function nse(e,t){switch(e){case"focusin":case"focusout":f0=null;break;case"dragenter":case"dragleave":d0=null;break;case"mouseover":case"mouseout":h0=null;break;case"pointerover":case"pointerout":lA.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":cA.delete(t.pointerId)}}function pT(e,t,n,r,i,s){return e===null||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},t!==null&&(t=nk(t),t!==null&&Kq(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function K8e(e,t,n,r,i){switch(t){case"focusin":return f0=pT(f0,e,t,n,r,i),!0;case"dragenter":return d0=pT(d0,e,t,n,r,i),!0;case"mouseover":return h0=pT(h0,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return lA.set(s,pT(lA.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,cA.set(s,pT(cA.get(s)||null,e,t,n,r,i)),!0}return!1}function ove(e){var t=Zv(e.target);if(t!==null){var n=kb(t);if(n!==null){if(t=n.tag,t===13){if(t=Yye(n),t!==null){e.blockedOn=t,sve(e.priority,function(){rve(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function QD(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=hU(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);aU=r,n.target.dispatchEvent(r),aU=null}else return t=nk(n),t!==null&&Kq(t),e.blockedOn=n,!1;t.shift()}return!0}function rse(e,t,n){QD(e)&&n.delete(t)}function X8e(){dU=!1,f0!==null&&QD(f0)&&(f0=null),d0!==null&&QD(d0)&&(d0=null),h0!==null&&QD(h0)&&(h0=null),lA.forEach(rse),cA.forEach(rse)}function mT(e,t){e.blockedOn===t&&(e.blockedOn=null,dU||(dU=!0,$l.unstable_scheduleCallback($l.unstable_NormalPriority,X8e)))}function fA(e){function t(i){return mT(i,e)}if(0<dN.length){mT(dN[0],e);for(var n=1;n<dN.length;n++){var r=dN[n];r.blockedOn===e&&(r.blockedOn=null)}}for(f0!==null&&mT(f0,e),d0!==null&&mT(d0,e),h0!==null&&mT(h0,e),lA.forEach(t),cA.forEach(t),n=0;n<jg.length;n++)r=jg[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<jg.length&&(n=jg[0],n.blockedOn===null);)ove(n),n.blockedOn===null&&jg.shift()}var zw=zm.ReactCurrentBatchConfig,_O=!0;function Q8e(e,t,n,r){var i=Or,s=zw.transition;zw.transition=null;try{Or=1,Xq(e,t,n,r)}finally{Or=i,zw.transition=s}}function J8e(e,t,n,r){var i=Or,s=zw.transition;zw.transition=null;try{Or=4,Xq(e,t,n,r)}finally{Or=i,zw.transition=s}}function Xq(e,t,n,r){if(_O){var i=hU(e,t,n,r);if(i===null)dj(e,t,r,wO,n),nse(e,r);else if(K8e(i,e,t,n,r))r.stopPropagation();else if(nse(e,r),t&4&&-1<Y8e.indexOf(e)){for(;i!==null;){var s=nk(i);if(s!==null&&nve(s),s=hU(e,t,n,r),s===null&&dj(e,t,r,wO,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else dj(e,t,r,null,n)}}var wO=null;function hU(e,t,n,r){if(wO=null,e=Wq(r),e=Zv(e),e!==null)if(t=kb(e),t===null)e=null;else if(n=t.tag,n===13){if(e=Yye(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return wO=e,null}function ave(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(j8e()){case Gq:return 1;case Jye:return 4;case vO:case B8e:return 16;case Zye:return 536870912;default:return 16}default:return 16}}var Kg=null,Qq=null,JD=null;function uve(){if(JD)return JD;var e,t=Qq,n=t.length,r,i="value"in Kg?Kg.value:Kg.textContent,s=i.length;for(e=0;e<n&&t[e]===i[e];e++);var o=n-e;for(r=1;r<=o&&t[n-r]===i[s-r];r++);return JD=i.slice(e,1<r?1-r:void 0)}function ZD(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function hN(){return!0}function ise(){return!1}function Ql(e){function t(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(n=e[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?hN:ise,this.isPropagationStopped=ise,this}return Pi(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=hN)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=hN)},persist:function(){},isPersistent:hN}),t}var qx={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Jq=Ql(qx),tk=Pi({},qx,{view:0,detail:0}),Z8e=Ql(tk),rj,ij,gT,rL=Pi({},tk,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Zq,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==gT&&(gT&&e.type==="mousemove"?(rj=e.screenX-gT.screenX,ij=e.screenY-gT.screenY):ij=rj=0,gT=e),rj)},movementY:function(e){return"movementY"in e?e.movementY:ij}}),sse=Ql(rL),e9e=Pi({},rL,{dataTransfer:0}),t9e=Ql(e9e),n9e=Pi({},tk,{relatedTarget:0}),sj=Ql(n9e),r9e=Pi({},qx,{animationName:0,elapsedTime:0,pseudoElement:0}),i9e=Ql(r9e),s9e=Pi({},qx,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),o9e=Ql(s9e),a9e=Pi({},qx,{data:0}),ose=Ql(a9e),u9e={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},l9e={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},c9e={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function f9e(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=c9e[e])?!!t[e]:!1}function Zq(){return f9e}var d9e=Pi({},tk,{key:function(e){if(e.key){var t=u9e[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=ZD(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?l9e[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Zq,charCode:function(e){return e.type==="keypress"?ZD(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?ZD(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),h9e=Ql(d9e),p9e=Pi({},rL,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ase=Ql(p9e),m9e=Pi({},tk,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Zq}),g9e=Ql(m9e),y9e=Pi({},qx,{propertyName:0,elapsedTime:0,pseudoElement:0}),v9e=Ql(y9e),b9e=Pi({},rL,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),_9e=Ql(b9e),w9e=[9,13,27,32],eW=pm&&"CompositionEvent"in window,uC=null;pm&&"documentMode"in document&&(uC=document.documentMode);var E9e=pm&&"TextEvent"in window&&!uC,lve=pm&&(!eW||uC&&8<uC&&11>=uC),use=" ",lse=!1;function cve(e,t){switch(e){case"keyup":return w9e.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function fve(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var mw=!1;function x9e(e,t){switch(e){case"compositionend":return fve(t);case"keypress":return t.which!==32?null:(lse=!0,use);case"textInput":return e=t.data,e===use&&lse?null:e;default:return null}}function S9e(e,t){if(mw)return e==="compositionend"||!eW&&cve(e,t)?(e=uve(),JD=Qq=Kg=null,mw=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return lve&&t.locale!=="ko"?null:t.data;default:return null}}var T9e={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function cse(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!T9e[e.type]:t==="textarea"}function dve(e,t,n,r){Vye(r),t=EO(t,"onChange"),0<t.length&&(n=new Jq("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var lC=null,dA=null;function C9e(e){xve(e,0)}function iL(e){var t=vw(e);if(Mye(t))return e}function A9e(e,t){if(e==="change")return t}var hve=!1;if(pm){var oj;if(pm){var aj="oninput"in document;if(!aj){var fse=document.createElement("div");fse.setAttribute("oninput","return;"),aj=typeof fse.oninput=="function"}oj=aj}else oj=!1;hve=oj&&(!document.documentMode||9<document.documentMode)}function dse(){lC&&(lC.detachEvent("onpropertychange",pve),dA=lC=null)}function pve(e){if(e.propertyName==="value"&&iL(dA)){var t=[];dve(t,dA,e,Wq(e)),Gye(C9e,t)}}function I9e(e,t,n){e==="focusin"?(dse(),lC=t,dA=n,lC.attachEvent("onpropertychange",pve)):e==="focusout"&&dse()}function k9e(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return iL(dA)}function R9e(e,t){if(e==="click")return iL(t)}function N9e(e,t){if(e==="input"||e==="change")return iL(t)}function D9e(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Wf=typeof Object.is=="function"?Object.is:D9e;function hA(e,t){if(Wf(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!KB.call(t,i)||!Wf(e[i],t[i]))return!1}return!0}function hse(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function pse(e,t){var n=hse(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=hse(n)}}function mve(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?mve(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function gve(){for(var e=window,t=mO();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=mO(e.document)}return t}function tW(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function P9e(e){var t=gve(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&mve(n.ownerDocument.documentElement,n)){if(r!==null&&tW(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!e.extend&&s>r&&(i=r,r=s,s=i),i=pse(n,s);var o=pse(n,r);i&&o&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var O9e=pm&&"documentMode"in document&&11>=document.documentMode,gw=null,pU=null,cC=null,mU=!1;function mse(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;mU||gw==null||gw!==mO(r)||(r=gw,"selectionStart"in r&&tW(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),cC&&hA(cC,r)||(cC=r,r=EO(pU,"onSelect"),0<r.length&&(t=new Jq("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=gw)))}function pN(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var yw={animationend:pN("Animation","AnimationEnd"),animationiteration:pN("Animation","AnimationIteration"),animationstart:pN("Animation","AnimationStart"),transitionend:pN("Transition","TransitionEnd")},uj={},yve={};pm&&(yve=document.createElement("div").style,"AnimationEvent"in window||(delete yw.animationend.animation,delete yw.animationiteration.animation,delete yw.animationstart.animation),"TransitionEvent"in window||delete yw.transitionend.transition);function sL(e){if(uj[e])return uj[e];if(!yw[e])return e;var t=yw[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in yve)return uj[e]=t[n];return e}var vve=sL("animationend"),bve=sL("animationiteration"),_ve=sL("animationstart"),wve=sL("transitionend"),Eve=new Map,gse="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Sy(e,t){Eve.set(e,t),Ib(t,[e])}for(var lj=0;lj<gse.length;lj++){var cj=gse[lj],$9e=cj.toLowerCase(),M9e=cj[0].toUpperCase()+cj.slice(1);Sy($9e,"on"+M9e)}Sy(vve,"onAnimationEnd");Sy(bve,"onAnimationIteration");Sy(_ve,"onAnimationStart");Sy("dblclick","onDoubleClick");Sy("focusin","onFocus");Sy("focusout","onBlur");Sy(wve,"onTransitionEnd");TE("onMouseEnter",["mouseout","mouseover"]);TE("onMouseLeave",["mouseout","mouseover"]);TE("onPointerEnter",["pointerout","pointerover"]);TE("onPointerLeave",["pointerout","pointerover"]);Ib("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ib("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ib("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ib("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ib("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ib("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var g2="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),L9e=new Set("cancel close invalid load scroll toggle".split(" ").concat(g2));function yse(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,$8e(r,t,void 0,e),e.currentTarget=null}function xve(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var o=r.length-1;0<=o;o--){var a=r[o],u=a.instance,l=a.currentTarget;if(a=a.listener,u!==s&&i.isPropagationStopped())break e;yse(i,a,l),s=u}else for(o=0;o<r.length;o++){if(a=r[o],u=a.instance,l=a.currentTarget,a=a.listener,u!==s&&i.isPropagationStopped())break e;yse(i,a,l),s=u}}}if(yO)throw e=cU,yO=!1,cU=null,e}function oi(e,t){var n=t[_U];n===void 0&&(n=t[_U]=new Set);var r=e+"__bubble";n.has(r)||(Sve(t,e,2,!1),n.add(r))}function fj(e,t,n){var r=0;t&&(r|=4),Sve(n,e,r,t)}var mN="_reactListening"+Math.random().toString(36).slice(2);function pA(e){if(!e[mN]){e[mN]=!0,Nye.forEach(function(n){n!=="selectionchange"&&(L9e.has(n)||fj(n,!1,e),fj(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[mN]||(t[mN]=!0,fj("selectionchange",!1,t))}}function Sve(e,t,n,r){switch(ave(t)){case 1:var i=Q8e;break;case 4:i=J8e;break;default:i=Xq}n=i.bind(null,t,n,e),i=void 0,!lU||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),r?i!==void 0?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):i!==void 0?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function dj(e,t,n,r,i){var s=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===i||u.nodeType===8&&u.parentNode===i))return;o=o.return}for(;a!==null;){if(o=Zv(a),o===null)return;if(u=o.tag,u===5||u===6){r=s=o;continue e}a=a.parentNode}}r=r.return}Gye(function(){var l=s,c=Wq(n),f=[];e:{var d=Eve.get(e);if(d!==void 0){var h=Jq,p=e;switch(e){case"keypress":if(ZD(n)===0)break e;case"keydown":case"keyup":h=h9e;break;case"focusin":p="focus",h=sj;break;case"focusout":p="blur",h=sj;break;case"beforeblur":case"afterblur":h=sj;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=sse;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=t9e;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=g9e;break;case vve:case bve:case _ve:h=i9e;break;case wve:h=v9e;break;case"scroll":h=Z8e;break;case"wheel":h=_9e;break;case"copy":case"cut":case"paste":h=o9e;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=ase}var m=(t&4)!==0,g=!m&&e==="scroll",y=m?d!==null?d+"Capture":null:d;m=[];for(var v=l,b;v!==null;){b=v;var w=b.stateNode;if(b.tag===5&&w!==null&&(b=w,y!==null&&(w=uA(v,y),w!=null&&m.push(mA(v,w,b)))),g)break;v=v.return}0<m.length&&(d=new h(d,p,null,n,c),f.push({event:d,listeners:m}))}}if(!(t&7)){e:{if(d=e==="mouseover"||e==="pointerover",h=e==="mouseout"||e==="pointerout",d&&n!==aU&&(p=n.relatedTarget||n.fromElement)&&(Zv(p)||p[mm]))break e;if((h||d)&&(d=c.window===c?c:(d=c.ownerDocument)?d.defaultView||d.parentWindow:window,h?(p=n.relatedTarget||n.toElement,h=l,p=p?Zv(p):null,p!==null&&(g=kb(p),p!==g||p.tag!==5&&p.tag!==6)&&(p=null)):(h=null,p=l),h!==p)){if(m=sse,w="onMouseLeave",y="onMouseEnter",v="mouse",(e==="pointerout"||e==="pointerover")&&(m=ase,w="onPointerLeave",y="onPointerEnter",v="pointer"),g=h==null?d:vw(h),b=p==null?d:vw(p),d=new m(w,v+"leave",h,n,c),d.target=g,d.relatedTarget=b,w=null,Zv(c)===l&&(m=new m(y,v+"enter",p,n,c),m.target=b,m.relatedTarget=g,w=m),g=w,h&&p)t:{for(m=h,y=p,v=0,b=m;b;b=x_(b))v++;for(b=0,w=y;w;w=x_(w))b++;for(;0<v-b;)m=x_(m),v--;for(;0<b-v;)y=x_(y),b--;for(;v--;){if(m===y||y!==null&&m===y.alternate)break t;m=x_(m),y=x_(y)}m=null}else m=null;h!==null&&vse(f,d,h,m,!1),p!==null&&g!==null&&vse(f,g,p,m,!0)}}e:{if(d=l?vw(l):window,h=d.nodeName&&d.nodeName.toLowerCase(),h==="select"||h==="input"&&d.type==="file")var E=A9e;else if(cse(d))if(hve)E=N9e;else{E=k9e;var T=I9e}else(h=d.nodeName)&&h.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(E=R9e);if(E&&(E=E(e,l))){dve(f,E,n,c);break e}T&&T(e,d,l),e==="focusout"&&(T=d._wrapperState)&&T.controlled&&d.type==="number"&&nU(d,"number",d.value)}switch(T=l?vw(l):window,e){case"focusin":(cse(T)||T.contentEditable==="true")&&(gw=T,pU=l,cC=null);break;case"focusout":cC=pU=gw=null;break;case"mousedown":mU=!0;break;case"contextmenu":case"mouseup":case"dragend":mU=!1,mse(f,n,c);break;case"selectionchange":if(O9e)break;case"keydown":case"keyup":mse(f,n,c)}var S;if(eW)e:{switch(e){case"compositionstart":var C="onCompositionStart";break e;case"compositionend":C="onCompositionEnd";break e;case"compositionupdate":C="onCompositionUpdate";break e}C=void 0}else mw?cve(e,n)&&(C="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(C="onCompositionStart");C&&(lve&&n.locale!=="ko"&&(mw||C!=="onCompositionStart"?C==="onCompositionEnd"&&mw&&(S=uve()):(Kg=c,Qq="value"in Kg?Kg.value:Kg.textContent,mw=!0)),T=EO(l,C),0<T.length&&(C=new ose(C,e,null,n,c),f.push({event:C,listeners:T}),S?C.data=S:(S=fve(n),S!==null&&(C.data=S)))),(S=E9e?x9e(e,n):S9e(e,n))&&(l=EO(l,"onBeforeInput"),0<l.length&&(c=new ose("onBeforeInput","beforeinput",null,n,c),f.push({event:c,listeners:l}),c.data=S))}xve(f,t)})}function mA(e,t,n){return{instance:e,listener:t,currentTarget:n}}function EO(e,t){for(var n=t+"Capture",r=[];e!==null;){var i=e,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=uA(e,n),s!=null&&r.unshift(mA(e,s,i)),s=uA(e,t),s!=null&&r.push(mA(e,s,i))),e=e.return}return r}function x_(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function vse(e,t,n,r,i){for(var s=t._reactName,o=[];n!==null&&n!==r;){var a=n,u=a.alternate,l=a.stateNode;if(u!==null&&u===r)break;a.tag===5&&l!==null&&(a=l,i?(u=uA(n,s),u!=null&&o.unshift(mA(n,u,a))):i||(u=uA(n,s),u!=null&&o.push(mA(n,u,a)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var F9e=/\r\n?/g,j9e=/\u0000|\uFFFD/g;function bse(e){return(typeof e=="string"?e:""+e).replace(F9e,`
`).replace(j9e,"")}function gN(e,t,n){if(t=bse(t),bse(e)!==t&&n)throw Error(tt(425))}function xO(){}var gU=null,yU=null;function vU(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var bU=typeof setTimeout=="function"?setTimeout:void 0,B9e=typeof clearTimeout=="function"?clearTimeout:void 0,_se=typeof Promise=="function"?Promise:void 0,U9e=typeof queueMicrotask=="function"?queueMicrotask:typeof _se<"u"?function(e){return _se.resolve(null).then(e).catch(z9e)}:bU;function z9e(e){setTimeout(function(){throw e})}function hj(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){e.removeChild(i),fA(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);fA(t)}function p0(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function wse(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Wx=Math.random().toString(36).slice(2),jd="__reactFiber$"+Wx,gA="__reactProps$"+Wx,mm="__reactContainer$"+Wx,_U="__reactEvents$"+Wx,V9e="__reactListeners$"+Wx,H9e="__reactHandles$"+Wx;function Zv(e){var t=e[jd];if(t)return t;for(var n=e.parentNode;n;){if(t=n[mm]||n[jd]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=wse(e);e!==null;){if(n=e[jd])return n;e=wse(e)}return t}e=n,n=e.parentNode}return null}function nk(e){return e=e[jd]||e[mm],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function vw(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(tt(33))}function oL(e){return e[gA]||null}var wU=[],bw=-1;function Ty(e){return{current:e}}function hi(e){0>bw||(e.current=wU[bw],wU[bw]=null,bw--)}function ti(e,t){bw++,wU[bw]=e.current,e.current=t}var F0={},_a=Ty(F0),ju=Ty(!1),M1=F0;function CE(e,t){var n=e.type.contextTypes;if(!n)return F0;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=t[s];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function Bu(e){return e=e.childContextTypes,e!=null}function SO(){hi(ju),hi(_a)}function Ese(e,t,n){if(_a.current!==F0)throw Error(tt(168));ti(_a,t),ti(ju,n)}function Tve(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in t))throw Error(tt(108,I8e(e)||"Unknown",i));return Pi({},n,r)}function TO(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||F0,M1=_a.current,ti(_a,e),ti(ju,ju.current),!0}function xse(e,t,n){var r=e.stateNode;if(!r)throw Error(tt(169));n?(e=Tve(e,t,M1),r.__reactInternalMemoizedMergedChildContext=e,hi(ju),hi(_a),ti(_a,e)):hi(ju),ti(ju,n)}var Dp=null,aL=!1,pj=!1;function Cve(e){Dp===null?Dp=[e]:Dp.push(e)}function q9e(e){aL=!0,Cve(e)}function Cy(){if(!pj&&Dp!==null){pj=!0;var e=0,t=Or;try{var n=Dp;for(Or=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}Dp=null,aL=!1}catch(i){throw Dp!==null&&(Dp=Dp.slice(e+1)),Qye(Gq,Cy),i}finally{Or=t,pj=!1}}return null}var _w=[],ww=0,CO=null,AO=0,hc=[],pc=0,L1=null,Hp=1,qp="";function xv(e,t){_w[ww++]=AO,_w[ww++]=CO,CO=e,AO=t}function Ave(e,t,n){hc[pc++]=Hp,hc[pc++]=qp,hc[pc++]=L1,L1=e;var r=Hp;e=qp;var i=32-Lf(r)-1;r&=~(1<<i),n+=1;var s=32-Lf(t)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Hp=1<<32-Lf(t)+i|n<<i|r,qp=s+e}else Hp=1<<s|n<<i|r,qp=e}function nW(e){e.return!==null&&(xv(e,1),Ave(e,1,0))}function rW(e){for(;e===CO;)CO=_w[--ww],_w[ww]=null,AO=_w[--ww],_w[ww]=null;for(;e===L1;)L1=hc[--pc],hc[pc]=null,qp=hc[--pc],hc[pc]=null,Hp=hc[--pc],hc[pc]=null}var Rl=null,El=null,xi=!1,bf=null;function Ive(e,t){var n=Ec(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Sse(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Rl=e,El=p0(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Rl=e,El=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=L1!==null?{id:Hp,overflow:qp}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Ec(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Rl=e,El=null,!0):!1;default:return!1}}function EU(e){return(e.mode&1)!==0&&(e.flags&128)===0}function xU(e){if(xi){var t=El;if(t){var n=t;if(!Sse(e,t)){if(EU(e))throw Error(tt(418));t=p0(n.nextSibling);var r=Rl;t&&Sse(e,t)?Ive(r,n):(e.flags=e.flags&-4097|2,xi=!1,Rl=e)}}else{if(EU(e))throw Error(tt(418));e.flags=e.flags&-4097|2,xi=!1,Rl=e}}}function Tse(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Rl=e}function yN(e){if(e!==Rl)return!1;if(!xi)return Tse(e),xi=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!vU(e.type,e.memoizedProps)),t&&(t=El)){if(EU(e))throw kve(),Error(tt(418));for(;t;)Ive(e,t),t=p0(t.nextSibling)}if(Tse(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(tt(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){El=p0(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}El=null}}else El=Rl?p0(e.stateNode.nextSibling):null;return!0}function kve(){for(var e=El;e;)e=p0(e.nextSibling)}function AE(){El=Rl=null,xi=!1}function iW(e){bf===null?bf=[e]:bf.push(e)}var W9e=zm.ReactCurrentBatchConfig;function yT(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(tt(309));var r=n.stateNode}if(!r)throw Error(tt(147,e));var i=r,s=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===s?t.ref:(t=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},t._stringRef=s,t)}if(typeof e!="string")throw Error(tt(284));if(!n._owner)throw Error(tt(290,e))}return e}function vN(e,t){throw e=Object.prototype.toString.call(t),Error(tt(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Cse(e){var t=e._init;return t(e._payload)}function Rve(e){function t(y,v){if(e){var b=y.deletions;b===null?(y.deletions=[v],y.flags|=16):b.push(v)}}function n(y,v){if(!e)return null;for(;v!==null;)t(y,v),v=v.sibling;return null}function r(y,v){for(y=new Map;v!==null;)v.key!==null?y.set(v.key,v):y.set(v.index,v),v=v.sibling;return y}function i(y,v){return y=v0(y,v),y.index=0,y.sibling=null,y}function s(y,v,b){return y.index=b,e?(b=y.alternate,b!==null?(b=b.index,b<v?(y.flags|=2,v):b):(y.flags|=2,v)):(y.flags|=1048576,v)}function o(y){return e&&y.alternate===null&&(y.flags|=2),y}function a(y,v,b,w){return v===null||v.tag!==6?(v=wj(b,y.mode,w),v.return=y,v):(v=i(v,b),v.return=y,v)}function u(y,v,b,w){var E=b.type;return E===pw?c(y,v,b.props.children,w,b.key):v!==null&&(v.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===kg&&Cse(E)===v.type)?(w=i(v,b.props),w.ref=yT(y,v,b),w.return=y,w):(w=oP(b.type,b.key,b.props,null,y.mode,w),w.ref=yT(y,v,b),w.return=y,w)}function l(y,v,b,w){return v===null||v.tag!==4||v.stateNode.containerInfo!==b.containerInfo||v.stateNode.implementation!==b.implementation?(v=Ej(b,y.mode,w),v.return=y,v):(v=i(v,b.children||[]),v.return=y,v)}function c(y,v,b,w,E){return v===null||v.tag!==7?(v=w1(b,y.mode,w,E),v.return=y,v):(v=i(v,b),v.return=y,v)}function f(y,v,b){if(typeof v=="string"&&v!==""||typeof v=="number")return v=wj(""+v,y.mode,b),v.return=y,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case aN:return b=oP(v.type,v.key,v.props,null,y.mode,b),b.ref=yT(y,null,v),b.return=y,b;case hw:return v=Ej(v,y.mode,b),v.return=y,v;case kg:var w=v._init;return f(y,w(v._payload),b)}if(p2(v)||dT(v))return v=w1(v,y.mode,b,null),v.return=y,v;vN(y,v)}return null}function d(y,v,b,w){var E=v!==null?v.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return E!==null?null:a(y,v,""+b,w);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case aN:return b.key===E?u(y,v,b,w):null;case hw:return b.key===E?l(y,v,b,w):null;case kg:return E=b._init,d(y,v,E(b._payload),w)}if(p2(b)||dT(b))return E!==null?null:c(y,v,b,w,null);vN(y,b)}return null}function h(y,v,b,w,E){if(typeof w=="string"&&w!==""||typeof w=="number")return y=y.get(b)||null,a(v,y,""+w,E);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case aN:return y=y.get(w.key===null?b:w.key)||null,u(v,y,w,E);case hw:return y=y.get(w.key===null?b:w.key)||null,l(v,y,w,E);case kg:var T=w._init;return h(y,v,b,T(w._payload),E)}if(p2(w)||dT(w))return y=y.get(b)||null,c(v,y,w,E,null);vN(v,w)}return null}function p(y,v,b,w){for(var E=null,T=null,S=v,C=v=0,A=null;S!==null&&C<b.length;C++){S.index>C?(A=S,S=null):A=S.sibling;var k=d(y,S,b[C],w);if(k===null){S===null&&(S=A);break}e&&S&&k.alternate===null&&t(y,S),v=s(k,v,C),T===null?E=k:T.sibling=k,T=k,S=A}if(C===b.length)return n(y,S),xi&&xv(y,C),E;if(S===null){for(;C<b.length;C++)S=f(y,b[C],w),S!==null&&(v=s(S,v,C),T===null?E=S:T.sibling=S,T=S);return xi&&xv(y,C),E}for(S=r(y,S);C<b.length;C++)A=h(S,y,C,b[C],w),A!==null&&(e&&A.alternate!==null&&S.delete(A.key===null?C:A.key),v=s(A,v,C),T===null?E=A:T.sibling=A,T=A);return e&&S.forEach(function(N){return t(y,N)}),xi&&xv(y,C),E}function m(y,v,b,w){var E=dT(b);if(typeof E!="function")throw Error(tt(150));if(b=E.call(b),b==null)throw Error(tt(151));for(var T=E=null,S=v,C=v=0,A=null,k=b.next();S!==null&&!k.done;C++,k=b.next()){S.index>C?(A=S,S=null):A=S.sibling;var N=d(y,S,k.value,w);if(N===null){S===null&&(S=A);break}e&&S&&N.alternate===null&&t(y,S),v=s(N,v,C),T===null?E=N:T.sibling=N,T=N,S=A}if(k.done)return n(y,S),xi&&xv(y,C),E;if(S===null){for(;!k.done;C++,k=b.next())k=f(y,k.value,w),k!==null&&(v=s(k,v,C),T===null?E=k:T.sibling=k,T=k);return xi&&xv(y,C),E}for(S=r(y,S);!k.done;C++,k=b.next())k=h(S,y,C,k.value,w),k!==null&&(e&&k.alternate!==null&&S.delete(k.key===null?C:k.key),v=s(k,v,C),T===null?E=k:T.sibling=k,T=k);return e&&S.forEach(function(O){return t(y,O)}),xi&&xv(y,C),E}function g(y,v,b,w){if(typeof b=="object"&&b!==null&&b.type===pw&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case aN:e:{for(var E=b.key,T=v;T!==null;){if(T.key===E){if(E=b.type,E===pw){if(T.tag===7){n(y,T.sibling),v=i(T,b.props.children),v.return=y,y=v;break e}}else if(T.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===kg&&Cse(E)===T.type){n(y,T.sibling),v=i(T,b.props),v.ref=yT(y,T,b),v.return=y,y=v;break e}n(y,T);break}else t(y,T);T=T.sibling}b.type===pw?(v=w1(b.props.children,y.mode,w,b.key),v.return=y,y=v):(w=oP(b.type,b.key,b.props,null,y.mode,w),w.ref=yT(y,v,b),w.return=y,y=w)}return o(y);case hw:e:{for(T=b.key;v!==null;){if(v.key===T)if(v.tag===4&&v.stateNode.containerInfo===b.containerInfo&&v.stateNode.implementation===b.implementation){n(y,v.sibling),v=i(v,b.children||[]),v.return=y,y=v;break e}else{n(y,v);break}else t(y,v);v=v.sibling}v=Ej(b,y.mode,w),v.return=y,y=v}return o(y);case kg:return T=b._init,g(y,v,T(b._payload),w)}if(p2(b))return p(y,v,b,w);if(dT(b))return m(y,v,b,w);vN(y,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,v!==null&&v.tag===6?(n(y,v.sibling),v=i(v,b),v.return=y,y=v):(n(y,v),v=wj(b,y.mode,w),v.return=y,y=v),o(y)):n(y,v)}return g}var IE=Rve(!0),Nve=Rve(!1),IO=Ty(null),kO=null,Ew=null,sW=null;function oW(){sW=Ew=kO=null}function aW(e){var t=IO.current;hi(IO),e._currentValue=t}function SU(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Vw(e,t){kO=e,sW=Ew=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Pu=!0),e.firstContext=null)}function Rc(e){var t=e._currentValue;if(sW!==e)if(e={context:e,memoizedValue:t,next:null},Ew===null){if(kO===null)throw Error(tt(308));Ew=e,kO.dependencies={lanes:0,firstContext:e}}else Ew=Ew.next=e;return t}var e1=null;function uW(e){e1===null?e1=[e]:e1.push(e)}function Dve(e,t,n,r){var i=t.interleaved;return i===null?(n.next=n,uW(t)):(n.next=i.next,i.next=n),t.interleaved=n,gm(e,r)}function gm(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Rg=!1;function lW(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Pve(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function nm(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function m0(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,ur&2){var i=r.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),r.pending=t,gm(e,n)}return i=r.interleaved,i===null?(t.next=t,uW(r)):(t.next=i.next,i.next=t),r.interleaved=t,gm(e,n)}function eP(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Yq(e,n)}}function Ase(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=t:s=s.next=t}else i=s=t;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function RO(e,t,n,r){var i=e.updateQueue;Rg=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var u=a,l=u.next;u.next=null,o===null?s=l:o.next=l,o=u;var c=e.alternate;c!==null&&(c=c.updateQueue,a=c.lastBaseUpdate,a!==o&&(a===null?c.firstBaseUpdate=l:a.next=l,c.lastBaseUpdate=u))}if(s!==null){var f=i.baseState;o=0,c=l=u=null,a=s;do{var d=a.lane,h=a.eventTime;if((r&d)===d){c!==null&&(c=c.next={eventTime:h,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=e,m=a;switch(d=t,h=n,m.tag){case 1:if(p=m.payload,typeof p=="function"){f=p.call(h,f,d);break e}f=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=m.payload,d=typeof p=="function"?p.call(h,f,d):p,d==null)break e;f=Pi({},f,d);break e;case 2:Rg=!0}}a.callback!==null&&a.lane!==0&&(e.flags|=64,d=i.effects,d===null?i.effects=[a]:d.push(a))}else h={eventTime:h,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},c===null?(l=c=h,u=f):c=c.next=h,o|=d;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;d=a,a=d.next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}while(!0);if(c===null&&(u=f),i.baseState=u,i.firstBaseUpdate=l,i.lastBaseUpdate=c,t=i.shared.interleaved,t!==null){i=t;do o|=i.lane,i=i.next;while(i!==t)}else s===null&&(i.shared.lanes=0);j1|=o,e.lanes=o,e.memoizedState=f}}function Ise(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(tt(191,i));i.call(r)}}}var rk={},ah=Ty(rk),yA=Ty(rk),vA=Ty(rk);function t1(e){if(e===rk)throw Error(tt(174));return e}function cW(e,t){switch(ti(vA,t),ti(yA,e),ti(ah,rk),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:iU(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=iU(t,e)}hi(ah),ti(ah,t)}function kE(){hi(ah),hi(yA),hi(vA)}function Ove(e){t1(vA.current);var t=t1(ah.current),n=iU(t,e.type);t!==n&&(ti(yA,e),ti(ah,n))}function fW(e){yA.current===e&&(hi(ah),hi(yA))}var Ni=Ty(0);function NO(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var mj=[];function dW(){for(var e=0;e<mj.length;e++)mj[e]._workInProgressVersionPrimary=null;mj.length=0}var tP=zm.ReactCurrentDispatcher,gj=zm.ReactCurrentBatchConfig,F1=0,Di=null,Is=null,Xs=null,DO=!1,fC=!1,bA=0,G9e=0;function Yo(){throw Error(tt(321))}function hW(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Wf(e[n],t[n]))return!1;return!0}function pW(e,t,n,r,i,s){if(F1=s,Di=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,tP.current=e===null||e.memoizedState===null?Q9e:J9e,e=n(r,i),fC){s=0;do{if(fC=!1,bA=0,25<=s)throw Error(tt(301));s+=1,Xs=Is=null,t.updateQueue=null,tP.current=Z9e,e=n(r,i)}while(fC)}if(tP.current=PO,t=Is!==null&&Is.next!==null,F1=0,Xs=Is=Di=null,DO=!1,t)throw Error(tt(300));return e}function mW(){var e=bA!==0;return bA=0,e}function kd(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Xs===null?Di.memoizedState=Xs=e:Xs=Xs.next=e,Xs}function Nc(){if(Is===null){var e=Di.alternate;e=e!==null?e.memoizedState:null}else e=Is.next;var t=Xs===null?Di.memoizedState:Xs.next;if(t!==null)Xs=t,Is=e;else{if(e===null)throw Error(tt(310));Is=e,e={memoizedState:Is.memoizedState,baseState:Is.baseState,baseQueue:Is.baseQueue,queue:Is.queue,next:null},Xs===null?Di.memoizedState=Xs=e:Xs=Xs.next=e}return Xs}function _A(e,t){return typeof t=="function"?t(e):t}function yj(e){var t=Nc(),n=t.queue;if(n===null)throw Error(tt(311));n.lastRenderedReducer=e;var r=Is,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,u=null,l=s;do{var c=l.lane;if((F1&c)===c)u!==null&&(u=u.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:e(r,l.action);else{var f={lane:c,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};u===null?(a=u=f,o=r):u=u.next=f,Di.lanes|=c,j1|=c}l=l.next}while(l!==null&&l!==s);u===null?o=r:u.next=a,Wf(r,t.memoizedState)||(Pu=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=u,n.lastRenderedState=r}if(e=n.interleaved,e!==null){i=e;do s=i.lane,Di.lanes|=s,j1|=s,i=i.next;while(i!==e)}else i===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function vj(e){var t=Nc(),n=t.queue;if(n===null)throw Error(tt(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,s=t.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=e(s,o.action),o=o.next;while(o!==i);Wf(s,t.memoizedState)||(Pu=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function $ve(){}function Mve(e,t){var n=Di,r=Nc(),i=t(),s=!Wf(r.memoizedState,i);if(s&&(r.memoizedState=i,Pu=!0),r=r.queue,gW(jve.bind(null,n,r,e),[e]),r.getSnapshot!==t||s||Xs!==null&&Xs.memoizedState.tag&1){if(n.flags|=2048,wA(9,Fve.bind(null,n,r,i,t),void 0,null),ao===null)throw Error(tt(349));F1&30||Lve(n,t,i)}return i}function Lve(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Di.updateQueue,t===null?(t={lastEffect:null,stores:null},Di.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function Fve(e,t,n,r){t.value=n,t.getSnapshot=r,Bve(t)&&Uve(e)}function jve(e,t,n){return n(function(){Bve(t)&&Uve(e)})}function Bve(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Wf(e,n)}catch{return!0}}function Uve(e){var t=gm(e,1);t!==null&&Ff(t,e,1,-1)}function kse(e){var t=kd();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:_A,lastRenderedState:e},t.queue=e,e=e.dispatch=X9e.bind(null,Di,e),[t.memoizedState,e]}function wA(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Di.updateQueue,t===null?(t={lastEffect:null,stores:null},Di.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function zve(){return Nc().memoizedState}function nP(e,t,n,r){var i=kd();Di.flags|=e,i.memoizedState=wA(1|t,n,void 0,r===void 0?null:r)}function uL(e,t,n,r){var i=Nc();r=r===void 0?null:r;var s=void 0;if(Is!==null){var o=Is.memoizedState;if(s=o.destroy,r!==null&&hW(r,o.deps)){i.memoizedState=wA(t,n,s,r);return}}Di.flags|=e,i.memoizedState=wA(1|t,n,s,r)}function Rse(e,t){return nP(8390656,8,e,t)}function gW(e,t){return uL(2048,8,e,t)}function Vve(e,t){return uL(4,2,e,t)}function Hve(e,t){return uL(4,4,e,t)}function qve(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Wve(e,t,n){return n=n!=null?n.concat([e]):null,uL(4,4,qve.bind(null,t,e),n)}function yW(){}function Gve(e,t){var n=Nc();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&hW(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Yve(e,t){var n=Nc();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&hW(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Kve(e,t,n){return F1&21?(Wf(n,t)||(n=eve(),Di.lanes|=n,j1|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Pu=!0),e.memoizedState=n)}function Y9e(e,t){var n=Or;Or=n!==0&&4>n?n:4,e(!0);var r=gj.transition;gj.transition={};try{e(!1),t()}finally{Or=n,gj.transition=r}}function Xve(){return Nc().memoizedState}function K9e(e,t,n){var r=y0(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Qve(e))Jve(t,n);else if(n=Dve(e,t,n,r),n!==null){var i=Ga();Ff(n,e,r,i),Zve(n,t,r)}}function X9e(e,t,n){var r=y0(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Qve(e))Jve(t,i);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var o=t.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,Wf(a,o)){var u=t.interleaved;u===null?(i.next=i,uW(t)):(i.next=u.next,u.next=i),t.interleaved=i;return}}catch{}finally{}n=Dve(e,t,i,r),n!==null&&(i=Ga(),Ff(n,e,r,i),Zve(n,t,r))}}function Qve(e){var t=e.alternate;return e===Di||t!==null&&t===Di}function Jve(e,t){fC=DO=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Zve(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Yq(e,n)}}var PO={readContext:Rc,useCallback:Yo,useContext:Yo,useEffect:Yo,useImperativeHandle:Yo,useInsertionEffect:Yo,useLayoutEffect:Yo,useMemo:Yo,useReducer:Yo,useRef:Yo,useState:Yo,useDebugValue:Yo,useDeferredValue:Yo,useTransition:Yo,useMutableSource:Yo,useSyncExternalStore:Yo,useId:Yo,unstable_isNewReconciler:!1},Q9e={readContext:Rc,useCallback:function(e,t){return kd().memoizedState=[e,t===void 0?null:t],e},useContext:Rc,useEffect:Rse,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,nP(4194308,4,qve.bind(null,t,e),n)},useLayoutEffect:function(e,t){return nP(4194308,4,e,t)},useInsertionEffect:function(e,t){return nP(4,2,e,t)},useMemo:function(e,t){var n=kd();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=kd();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=K9e.bind(null,Di,e),[r.memoizedState,e]},useRef:function(e){var t=kd();return e={current:e},t.memoizedState=e},useState:kse,useDebugValue:yW,useDeferredValue:function(e){return kd().memoizedState=e},useTransition:function(){var e=kse(!1),t=e[0];return e=Y9e.bind(null,e[1]),kd().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Di,i=kd();if(xi){if(n===void 0)throw Error(tt(407));n=n()}else{if(n=t(),ao===null)throw Error(tt(349));F1&30||Lve(r,t,n)}i.memoizedState=n;var s={value:n,getSnapshot:t};return i.queue=s,Rse(jve.bind(null,r,s,e),[e]),r.flags|=2048,wA(9,Fve.bind(null,r,s,n,t),void 0,null),n},useId:function(){var e=kd(),t=ao.identifierPrefix;if(xi){var n=qp,r=Hp;n=(r&~(1<<32-Lf(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=bA++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=G9e++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},J9e={readContext:Rc,useCallback:Gve,useContext:Rc,useEffect:gW,useImperativeHandle:Wve,useInsertionEffect:Vve,useLayoutEffect:Hve,useMemo:Yve,useReducer:yj,useRef:zve,useState:function(){return yj(_A)},useDebugValue:yW,useDeferredValue:function(e){var t=Nc();return Kve(t,Is.memoizedState,e)},useTransition:function(){var e=yj(_A)[0],t=Nc().memoizedState;return[e,t]},useMutableSource:$ve,useSyncExternalStore:Mve,useId:Xve,unstable_isNewReconciler:!1},Z9e={readContext:Rc,useCallback:Gve,useContext:Rc,useEffect:gW,useImperativeHandle:Wve,useInsertionEffect:Vve,useLayoutEffect:Hve,useMemo:Yve,useReducer:vj,useRef:zve,useState:function(){return vj(_A)},useDebugValue:yW,useDeferredValue:function(e){var t=Nc();return Is===null?t.memoizedState=e:Kve(t,Is.memoizedState,e)},useTransition:function(){var e=vj(_A)[0],t=Nc().memoizedState;return[e,t]},useMutableSource:$ve,useSyncExternalStore:Mve,useId:Xve,unstable_isNewReconciler:!1};function hf(e,t){if(e&&e.defaultProps){t=Pi({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function TU(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Pi({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var lL={isMounted:function(e){return(e=e._reactInternals)?kb(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Ga(),i=y0(e),s=nm(r,i);s.payload=t,n!=null&&(s.callback=n),t=m0(e,s,i),t!==null&&(Ff(t,e,i,r),eP(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Ga(),i=y0(e),s=nm(r,i);s.tag=1,s.payload=t,n!=null&&(s.callback=n),t=m0(e,s,i),t!==null&&(Ff(t,e,i,r),eP(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Ga(),r=y0(e),i=nm(n,r);i.tag=2,t!=null&&(i.callback=t),t=m0(e,i,r),t!==null&&(Ff(t,e,r,n),eP(t,e,r))}};function Nse(e,t,n,r,i,s,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,s,o):t.prototype&&t.prototype.isPureReactComponent?!hA(n,r)||!hA(i,s):!0}function e1e(e,t,n){var r=!1,i=F0,s=t.contextType;return typeof s=="object"&&s!==null?s=Rc(s):(i=Bu(t)?M1:_a.current,r=t.contextTypes,s=(r=r!=null)?CE(e,i):F0),t=new t(n,s),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=lL,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function Dse(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&lL.enqueueReplaceState(t,t.state,null)}function CU(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},lW(e);var s=t.contextType;typeof s=="object"&&s!==null?i.context=Rc(s):(s=Bu(t)?M1:_a.current,i.context=CE(e,s)),i.state=e.memoizedState,s=t.getDerivedStateFromProps,typeof s=="function"&&(TU(e,t,s,n),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&lL.enqueueReplaceState(i,i.state,null),RO(e,n,i,r),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function RE(e,t){try{var n="",r=t;do n+=A8e(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:e,source:t,stack:i,digest:null}}function bj(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function AU(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var eBe=typeof WeakMap=="function"?WeakMap:Map;function t1e(e,t,n){n=nm(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){$O||($O=!0,LU=r),AU(e,t)},n}function n1e(e,t,n){n=nm(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){AU(e,t)}}var s=e.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){AU(e,t),typeof r!="function"&&(g0===null?g0=new Set([this]):g0.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),n}function Pse(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new eBe;var i=new Set;r.set(t,i)}else i=r.get(t),i===void 0&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=pBe.bind(null,e,t,n),t.then(e,e))}function Ose(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function $se(e,t,n,r,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=nm(-1,1),t.tag=2,m0(n,t,1))),n.lanes|=1),e)}var tBe=zm.ReactCurrentOwner,Pu=!1;function Ma(e,t,n,r){t.child=e===null?Nve(t,null,n,r):IE(t,e.child,n,r)}function Mse(e,t,n,r,i){n=n.render;var s=t.ref;return Vw(t,i),r=pW(e,t,n,r,s,i),n=mW(),e!==null&&!Pu?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,ym(e,t,i)):(xi&&n&&nW(t),t.flags|=1,Ma(e,t,r,i),t.child)}function Lse(e,t,n,r,i){if(e===null){var s=n.type;return typeof s=="function"&&!TW(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=s,r1e(e,t,s,r,i)):(e=oP(n.type,null,r,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,!(e.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:hA,n(o,r)&&e.ref===t.ref)return ym(e,t,i)}return t.flags|=1,e=v0(s,r),e.ref=t.ref,e.return=t,t.child=e}function r1e(e,t,n,r,i){if(e!==null){var s=e.memoizedProps;if(hA(s,r)&&e.ref===t.ref)if(Pu=!1,t.pendingProps=r=s,(e.lanes&i)!==0)e.flags&131072&&(Pu=!0);else return t.lanes=e.lanes,ym(e,t,i)}return IU(e,t,n,r,i)}function i1e(e,t,n){var r=t.pendingProps,i=r.children,s=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},ti(Sw,ml),ml|=n;else{if(!(n&1073741824))return e=s!==null?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,ti(Sw,ml),ml|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,ti(Sw,ml),ml|=r}else s!==null?(r=s.baseLanes|n,t.memoizedState=null):r=n,ti(Sw,ml),ml|=r;return Ma(e,t,i,n),t.child}function s1e(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function IU(e,t,n,r,i){var s=Bu(n)?M1:_a.current;return s=CE(t,s),Vw(t,i),n=pW(e,t,n,r,s,i),r=mW(),e!==null&&!Pu?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,ym(e,t,i)):(xi&&r&&nW(t),t.flags|=1,Ma(e,t,n,i),t.child)}function Fse(e,t,n,r,i){if(Bu(n)){var s=!0;TO(t)}else s=!1;if(Vw(t,i),t.stateNode===null)rP(e,t),e1e(t,n,r),CU(t,n,r,i),r=!0;else if(e===null){var o=t.stateNode,a=t.memoizedProps;o.props=a;var u=o.context,l=n.contextType;typeof l=="object"&&l!==null?l=Rc(l):(l=Bu(n)?M1:_a.current,l=CE(t,l));var c=n.getDerivedStateFromProps,f=typeof c=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||u!==l)&&Dse(t,o,r,l),Rg=!1;var d=t.memoizedState;o.state=d,RO(t,r,o,i),u=t.memoizedState,a!==r||d!==u||ju.current||Rg?(typeof c=="function"&&(TU(t,n,c,r),u=t.memoizedState),(a=Rg||Nse(t,n,a,r,d,u,l))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=u),o.props=r,o.state=u,o.context=l,r=a):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Pve(e,t),a=t.memoizedProps,l=t.type===t.elementType?a:hf(t.type,a),o.props=l,f=t.pendingProps,d=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=Rc(u):(u=Bu(n)?M1:_a.current,u=CE(t,u));var h=n.getDerivedStateFromProps;(c=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==f||d!==u)&&Dse(t,o,r,u),Rg=!1,d=t.memoizedState,o.state=d,RO(t,r,o,i);var p=t.memoizedState;a!==f||d!==p||ju.current||Rg?(typeof h=="function"&&(TU(t,n,h,r),p=t.memoizedState),(l=Rg||Nse(t,n,l,r,d,p,u)||!1)?(c||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,p,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,p,u)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=u,r=l):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return kU(e,t,n,r,s,i)}function kU(e,t,n,r,i,s){s1e(e,t);var o=(t.flags&128)!==0;if(!r&&!o)return i&&xse(t,n,!1),ym(e,t,s);r=t.stateNode,tBe.current=t;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&o?(t.child=IE(t,e.child,null,s),t.child=IE(t,null,a,s)):Ma(e,t,a,s),t.memoizedState=r.state,i&&xse(t,n,!0),t.child}function o1e(e){var t=e.stateNode;t.pendingContext?Ese(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Ese(e,t.context,!1),cW(e,t.containerInfo)}function jse(e,t,n,r,i){return AE(),iW(i),t.flags|=256,Ma(e,t,n,r),t.child}var RU={dehydrated:null,treeContext:null,retryLane:0};function NU(e){return{baseLanes:e,cachePool:null,transitions:null}}function a1e(e,t,n){var r=t.pendingProps,i=Ni.current,s=!1,o=(t.flags&128)!==0,a;if((a=o)||(a=e!==null&&e.memoizedState===null?!1:(i&2)!==0),a?(s=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),ti(Ni,i&1),e===null)return xU(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=r.children,e=r.fallback,s?(r=t.mode,s=t.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=dL(o,r,0,null),e=w1(e,r,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=NU(n),t.memoizedState=RU,e):vW(t,o));if(i=e.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return nBe(e,t,o,r,a,i,n);if(s){s=r.fallback,o=t.mode,i=e.child,a=i.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&t.child!==i?(r=t.child,r.childLanes=0,r.pendingProps=u,t.deletions=null):(r=v0(i,u),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=v0(a,s):(s=w1(s,o,n,null),s.flags|=2),s.return=t,r.return=t,r.sibling=s,t.child=r,r=s,s=t.child,o=e.child.memoizedState,o=o===null?NU(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=e.childLanes&~n,t.memoizedState=RU,r}return s=e.child,e=s.sibling,r=v0(s,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function vW(e,t){return t=dL({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function bN(e,t,n,r){return r!==null&&iW(r),IE(t,e.child,null,n),e=vW(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function nBe(e,t,n,r,i,s,o){if(n)return t.flags&256?(t.flags&=-257,r=bj(Error(tt(422))),bN(e,t,o,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(s=r.fallback,i=t.mode,r=dL({mode:"visible",children:r.children},i,0,null),s=w1(s,i,o,null),s.flags|=2,r.return=t,s.return=t,r.sibling=s,t.child=r,t.mode&1&&IE(t,e.child,null,o),t.child.memoizedState=NU(o),t.memoizedState=RU,s);if(!(t.mode&1))return bN(e,t,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(tt(419)),r=bj(s,r,void 0),bN(e,t,o,r)}if(a=(o&e.childLanes)!==0,Pu||a){if(r=ao,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,gm(e,i),Ff(r,e,i,-1))}return SW(),r=bj(Error(tt(421))),bN(e,t,o,r)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=mBe.bind(null,e),i._reactRetry=t,null):(e=s.treeContext,El=p0(i.nextSibling),Rl=t,xi=!0,bf=null,e!==null&&(hc[pc++]=Hp,hc[pc++]=qp,hc[pc++]=L1,Hp=e.id,qp=e.overflow,L1=t),t=vW(t,r.children),t.flags|=4096,t)}function Bse(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),SU(e.return,t,n)}function _j(e,t,n,r,i){var s=e.memoizedState;s===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function u1e(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(Ma(e,t,r.children,n),r=Ni.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Bse(e,n,t);else if(e.tag===19)Bse(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(ti(Ni,r),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&NO(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),_j(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&NO(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}_j(t,!0,n,null,s);break;case"together":_j(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function rP(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function ym(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),j1|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(tt(153));if(t.child!==null){for(e=t.child,n=v0(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=v0(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function rBe(e,t,n){switch(t.tag){case 3:o1e(t),AE();break;case 5:Ove(t);break;case 1:Bu(t.type)&&TO(t);break;case 4:cW(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;ti(IO,r._currentValue),r._currentValue=i;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(ti(Ni,Ni.current&1),t.flags|=128,null):n&t.child.childLanes?a1e(e,t,n):(ti(Ni,Ni.current&1),e=ym(e,t,n),e!==null?e.sibling:null);ti(Ni,Ni.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return u1e(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),ti(Ni,Ni.current),r)break;return null;case 22:case 23:return t.lanes=0,i1e(e,t,n)}return ym(e,t,n)}var l1e,DU,c1e,f1e;l1e=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};DU=function(){};c1e=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,t1(ah.current);var s=null;switch(n){case"input":i=eU(e,i),r=eU(e,r),s=[];break;case"select":i=Pi({},i,{value:void 0}),r=Pi({},r,{value:void 0}),s=[];break;case"textarea":i=rU(e,i),r=rU(e,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=xO)}sU(n,r);var o;n=null;for(l in i)if(!r.hasOwnProperty(l)&&i.hasOwnProperty(l)&&i[l]!=null)if(l==="style"){var a=i[l];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else l!=="dangerouslySetInnerHTML"&&l!=="children"&&l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(oA.hasOwnProperty(l)?s||(s=[]):(s=s||[]).push(l,null));for(l in r){var u=r[l];if(a=i!=null?i[l]:void 0,r.hasOwnProperty(l)&&u!==a&&(u!=null||a!=null))if(l==="style")if(a){for(o in a)!a.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&a[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(s||(s=[]),s.push(l,n)),n=u;else l==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,a=a?a.__html:void 0,u!=null&&a!==u&&(s=s||[]).push(l,u)):l==="children"?typeof u!="string"&&typeof u!="number"||(s=s||[]).push(l,""+u):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&(oA.hasOwnProperty(l)?(u!=null&&l==="onScroll"&&oi("scroll",e),s||a===u||(s=[])):(s=s||[]).push(l,u))}n&&(s=s||[]).push("style",n);var l=s;(t.updateQueue=l)&&(t.flags|=4)}};f1e=function(e,t,n,r){n!==r&&(t.flags|=4)};function vT(e,t){if(!xi)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ko(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function iBe(e,t,n){var r=t.pendingProps;switch(rW(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ko(t),null;case 1:return Bu(t.type)&&SO(),Ko(t),null;case 3:return r=t.stateNode,kE(),hi(ju),hi(_a),dW(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(yN(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,bf!==null&&(BU(bf),bf=null))),DU(e,t),Ko(t),null;case 5:fW(t);var i=t1(vA.current);if(n=t.type,e!==null&&t.stateNode!=null)c1e(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(tt(166));return Ko(t),null}if(e=t1(ah.current),yN(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[jd]=t,r[gA]=s,e=(t.mode&1)!==0,n){case"dialog":oi("cancel",r),oi("close",r);break;case"iframe":case"object":case"embed":oi("load",r);break;case"video":case"audio":for(i=0;i<g2.length;i++)oi(g2[i],r);break;case"source":oi("error",r);break;case"img":case"image":case"link":oi("error",r),oi("load",r);break;case"details":oi("toggle",r);break;case"input":Kie(r,s),oi("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},oi("invalid",r);break;case"textarea":Qie(r,s),oi("invalid",r)}sU(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&gN(r.textContent,a,e),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&gN(r.textContent,a,e),i=["children",""+a]):oA.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&oi("scroll",r)}switch(n){case"input":uN(r),Xie(r,s,!0);break;case"textarea":uN(r),Jie(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=xO)}r=i,t.updateQueue=r,r!==null&&(t.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=jye(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=o.createElement(n,{is:r.is}):(e=o.createElement(n),n==="select"&&(o=e,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):e=o.createElementNS(e,n),e[jd]=t,e[gA]=r,l1e(e,t,!1,!1),t.stateNode=e;e:{switch(o=oU(n,r),n){case"dialog":oi("cancel",e),oi("close",e),i=r;break;case"iframe":case"object":case"embed":oi("load",e),i=r;break;case"video":case"audio":for(i=0;i<g2.length;i++)oi(g2[i],e);i=r;break;case"source":oi("error",e),i=r;break;case"img":case"image":case"link":oi("error",e),oi("load",e),i=r;break;case"details":oi("toggle",e),i=r;break;case"input":Kie(e,r),i=eU(e,r),oi("invalid",e);break;case"option":i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=Pi({},r,{value:void 0}),oi("invalid",e);break;case"textarea":Qie(e,r),i=rU(e,r),oi("invalid",e);break;default:i=r}sU(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var u=a[s];s==="style"?zye(e,u):s==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&Bye(e,u)):s==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&aA(e,u):typeof u=="number"&&aA(e,""+u):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(oA.hasOwnProperty(s)?u!=null&&s==="onScroll"&&oi("scroll",e):u!=null&&zq(e,s,u,o))}switch(n){case"input":uN(e),Xie(e,r,!1);break;case"textarea":uN(e),Jie(e);break;case"option":r.value!=null&&e.setAttribute("value",""+L0(r.value));break;case"select":e.multiple=!!r.multiple,s=r.value,s!=null?jw(e,!!r.multiple,s,!1):r.defaultValue!=null&&jw(e,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=xO)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Ko(t),null;case 6:if(e&&t.stateNode!=null)f1e(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(tt(166));if(n=t1(vA.current),t1(ah.current),yN(t)){if(r=t.stateNode,n=t.memoizedProps,r[jd]=t,(s=r.nodeValue!==n)&&(e=Rl,e!==null))switch(e.tag){case 3:gN(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&gN(r.nodeValue,n,(e.mode&1)!==0)}s&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[jd]=t,t.stateNode=r}return Ko(t),null;case 13:if(hi(Ni),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(xi&&El!==null&&t.mode&1&&!(t.flags&128))kve(),AE(),t.flags|=98560,s=!1;else if(s=yN(t),r!==null&&r.dehydrated!==null){if(e===null){if(!s)throw Error(tt(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(tt(317));s[jd]=t}else AE(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Ko(t),s=!1}else bf!==null&&(BU(bf),bf=null),s=!0;if(!s)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||Ni.current&1?Os===0&&(Os=3):SW())),t.updateQueue!==null&&(t.flags|=4),Ko(t),null);case 4:return kE(),DU(e,t),e===null&&pA(t.stateNode.containerInfo),Ko(t),null;case 10:return aW(t.type._context),Ko(t),null;case 17:return Bu(t.type)&&SO(),Ko(t),null;case 19:if(hi(Ni),s=t.memoizedState,s===null)return Ko(t),null;if(r=(t.flags&128)!==0,o=s.rendering,o===null)if(r)vT(s,!1);else{if(Os!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=NO(e),o!==null){for(t.flags|=128,vT(s,!1),r=o.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)s=n,e=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,e=o.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return ti(Ni,Ni.current&1|2),t.child}e=e.sibling}s.tail!==null&&ss()>NE&&(t.flags|=128,r=!0,vT(s,!1),t.lanes=4194304)}else{if(!r)if(e=NO(o),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),vT(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!xi)return Ko(t),null}else 2*ss()-s.renderingStartTime>NE&&n!==1073741824&&(t.flags|=128,r=!0,vT(s,!1),t.lanes=4194304);s.isBackwards?(o.sibling=t.child,t.child=o):(n=s.last,n!==null?n.sibling=o:t.child=o,s.last=o)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=ss(),t.sibling=null,n=Ni.current,ti(Ni,r?n&1|2:n&1),t):(Ko(t),null);case 22:case 23:return xW(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?ml&1073741824&&(Ko(t),t.subtreeFlags&6&&(t.flags|=8192)):Ko(t),null;case 24:return null;case 25:return null}throw Error(tt(156,t.tag))}function sBe(e,t){switch(rW(t),t.tag){case 1:return Bu(t.type)&&SO(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return kE(),hi(ju),hi(_a),dW(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return fW(t),null;case 13:if(hi(Ni),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(tt(340));AE()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return hi(Ni),null;case 4:return kE(),null;case 10:return aW(t.type._context),null;case 22:case 23:return xW(),null;case 24:return null;default:return null}}var _N=!1,ua=!1,oBe=typeof WeakSet=="function"?WeakSet:Set,xt=null;function xw(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){zi(e,t,r)}else n.current=null}function PU(e,t,n){try{n()}catch(r){zi(e,t,r)}}var Use=!1;function aBe(e,t){if(gU=_O,e=gve(),tW(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,u=-1,l=0,c=0,f=e,d=null;t:for(;;){for(var h;f!==n||i!==0&&f.nodeType!==3||(a=o+i),f!==s||r!==0&&f.nodeType!==3||(u=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(h=f.firstChild)!==null;)d=f,f=h;for(;;){if(f===e)break t;if(d===n&&++l===i&&(a=o),d===s&&++c===r&&(u=o),(h=f.nextSibling)!==null)break;f=d,d=f.parentNode}f=h}n=a===-1||u===-1?null:{start:a,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(yU={focusedElem:e,selectionRange:n},_O=!1,xt=t;xt!==null;)if(t=xt,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,xt=e;else for(;xt!==null;){t=xt;try{var p=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var m=p.memoizedProps,g=p.memoizedState,y=t.stateNode,v=y.getSnapshotBeforeUpdate(t.elementType===t.type?m:hf(t.type,m),g);y.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var b=t.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(tt(163))}}catch(w){zi(t,t.return,w)}if(e=t.sibling,e!==null){e.return=t.return,xt=e;break}xt=t.return}return p=Use,Use=!1,p}function dC(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,s!==void 0&&PU(t,n,s)}i=i.next}while(i!==r)}}function cL(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function OU(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function d1e(e){var t=e.alternate;t!==null&&(e.alternate=null,d1e(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[jd],delete t[gA],delete t[_U],delete t[V9e],delete t[H9e])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function h1e(e){return e.tag===5||e.tag===3||e.tag===4}function zse(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||h1e(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function $U(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=xO));else if(r!==4&&(e=e.child,e!==null))for($U(e,t,n),e=e.sibling;e!==null;)$U(e,t,n),e=e.sibling}function MU(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(MU(e,t,n),e=e.sibling;e!==null;)MU(e,t,n),e=e.sibling}var xo=null,mf=!1;function gg(e,t,n){for(n=n.child;n!==null;)p1e(e,t,n),n=n.sibling}function p1e(e,t,n){if(oh&&typeof oh.onCommitFiberUnmount=="function")try{oh.onCommitFiberUnmount(nL,n)}catch{}switch(n.tag){case 5:ua||xw(n,t);case 6:var r=xo,i=mf;xo=null,gg(e,t,n),xo=r,mf=i,xo!==null&&(mf?(e=xo,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):xo.removeChild(n.stateNode));break;case 18:xo!==null&&(mf?(e=xo,n=n.stateNode,e.nodeType===8?hj(e.parentNode,n):e.nodeType===1&&hj(e,n),fA(e)):hj(xo,n.stateNode));break;case 4:r=xo,i=mf,xo=n.stateNode.containerInfo,mf=!0,gg(e,t,n),xo=r,mf=i;break;case 0:case 11:case 14:case 15:if(!ua&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&PU(n,t,o),i=i.next}while(i!==r)}gg(e,t,n);break;case 1:if(!ua&&(xw(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){zi(n,t,a)}gg(e,t,n);break;case 21:gg(e,t,n);break;case 22:n.mode&1?(ua=(r=ua)||n.memoizedState!==null,gg(e,t,n),ua=r):gg(e,t,n);break;default:gg(e,t,n)}}function Vse(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new oBe),t.forEach(function(r){var i=gBe.bind(null,e,r);n.has(r)||(n.add(r),r.then(i,i))})}}function tf(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=e,o=t,a=o;e:for(;a!==null;){switch(a.tag){case 5:xo=a.stateNode,mf=!1;break e;case 3:xo=a.stateNode.containerInfo,mf=!0;break e;case 4:xo=a.stateNode.containerInfo,mf=!0;break e}a=a.return}if(xo===null)throw Error(tt(160));p1e(s,o,i),xo=null,mf=!1;var u=i.alternate;u!==null&&(u.return=null),i.return=null}catch(l){zi(i,t,l)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)m1e(t,e),t=t.sibling}function m1e(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(tf(t,e),Ed(e),r&4){try{dC(3,e,e.return),cL(3,e)}catch(m){zi(e,e.return,m)}try{dC(5,e,e.return)}catch(m){zi(e,e.return,m)}}break;case 1:tf(t,e),Ed(e),r&512&&n!==null&&xw(n,n.return);break;case 5:if(tf(t,e),Ed(e),r&512&&n!==null&&xw(n,n.return),e.flags&32){var i=e.stateNode;try{aA(i,"")}catch(m){zi(e,e.return,m)}}if(r&4&&(i=e.stateNode,i!=null)){var s=e.memoizedProps,o=n!==null?n.memoizedProps:s,a=e.type,u=e.updateQueue;if(e.updateQueue=null,u!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&Lye(i,s),oU(a,o);var l=oU(a,s);for(o=0;o<u.length;o+=2){var c=u[o],f=u[o+1];c==="style"?zye(i,f):c==="dangerouslySetInnerHTML"?Bye(i,f):c==="children"?aA(i,f):zq(i,c,f,l)}switch(a){case"input":tU(i,s);break;case"textarea":Fye(i,s);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var h=s.value;h!=null?jw(i,!!s.multiple,h,!1):d!==!!s.multiple&&(s.defaultValue!=null?jw(i,!!s.multiple,s.defaultValue,!0):jw(i,!!s.multiple,s.multiple?[]:"",!1))}i[gA]=s}catch(m){zi(e,e.return,m)}}break;case 6:if(tf(t,e),Ed(e),r&4){if(e.stateNode===null)throw Error(tt(162));i=e.stateNode,s=e.memoizedProps;try{i.nodeValue=s}catch(m){zi(e,e.return,m)}}break;case 3:if(tf(t,e),Ed(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{fA(t.containerInfo)}catch(m){zi(e,e.return,m)}break;case 4:tf(t,e),Ed(e);break;case 13:tf(t,e),Ed(e),i=e.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(wW=ss())),r&4&&Vse(e);break;case 22:if(c=n!==null&&n.memoizedState!==null,e.mode&1?(ua=(l=ua)||c,tf(t,e),ua=l):tf(t,e),Ed(e),r&8192){if(l=e.memoizedState!==null,(e.stateNode.isHidden=l)&&!c&&e.mode&1)for(xt=e,c=e.child;c!==null;){for(f=xt=c;xt!==null;){switch(d=xt,h=d.child,d.tag){case 0:case 11:case 14:case 15:dC(4,d,d.return);break;case 1:xw(d,d.return);var p=d.stateNode;if(typeof p.componentWillUnmount=="function"){r=d,n=d.return;try{t=r,p.props=t.memoizedProps,p.state=t.memoizedState,p.componentWillUnmount()}catch(m){zi(r,n,m)}}break;case 5:xw(d,d.return);break;case 22:if(d.memoizedState!==null){qse(f);continue}}h!==null?(h.return=d,xt=h):qse(f)}c=c.sibling}e:for(c=null,f=e;;){if(f.tag===5){if(c===null){c=f;try{i=f.stateNode,l?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=f.stateNode,u=f.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,a.style.display=Uye("display",o))}catch(m){zi(e,e.return,m)}}}else if(f.tag===6){if(c===null)try{f.stateNode.nodeValue=l?"":f.memoizedProps}catch(m){zi(e,e.return,m)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;c===f&&(c=null),f=f.return}c===f&&(c=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:tf(t,e),Ed(e),r&4&&Vse(e);break;case 21:break;default:tf(t,e),Ed(e)}}function Ed(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(h1e(n)){var r=n;break e}n=n.return}throw Error(tt(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(aA(i,""),r.flags&=-33);var s=zse(e);MU(e,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=zse(e);$U(e,a,o);break;default:throw Error(tt(161))}}catch(u){zi(e,e.return,u)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function uBe(e,t,n){xt=e,g1e(e)}function g1e(e,t,n){for(var r=(e.mode&1)!==0;xt!==null;){var i=xt,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||_N;if(!o){var a=i.alternate,u=a!==null&&a.memoizedState!==null||ua;a=_N;var l=ua;if(_N=o,(ua=u)&&!l)for(xt=i;xt!==null;)o=xt,u=o.child,o.tag===22&&o.memoizedState!==null?Wse(i):u!==null?(u.return=o,xt=u):Wse(i);for(;s!==null;)xt=s,g1e(s),s=s.sibling;xt=i,_N=a,ua=l}Hse(e)}else i.subtreeFlags&8772&&s!==null?(s.return=i,xt=s):Hse(e)}}function Hse(e){for(;xt!==null;){var t=xt;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:ua||cL(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!ua)if(n===null)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:hf(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;s!==null&&Ise(t,s,r);break;case 3:var o=t.updateQueue;if(o!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Ise(t,o,n)}break;case 5:var a=t.stateNode;if(n===null&&t.flags&4){n=a;var u=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var l=t.alternate;if(l!==null){var c=l.memoizedState;if(c!==null){var f=c.dehydrated;f!==null&&fA(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(tt(163))}ua||t.flags&512&&OU(t)}catch(d){zi(t,t.return,d)}}if(t===e){xt=null;break}if(n=t.sibling,n!==null){n.return=t.return,xt=n;break}xt=t.return}}function qse(e){for(;xt!==null;){var t=xt;if(t===e){xt=null;break}var n=t.sibling;if(n!==null){n.return=t.return,xt=n;break}xt=t.return}}function Wse(e){for(;xt!==null;){var t=xt;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{cL(4,t)}catch(u){zi(t,n,u)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var i=t.return;try{r.componentDidMount()}catch(u){zi(t,i,u)}}var s=t.return;try{OU(t)}catch(u){zi(t,s,u)}break;case 5:var o=t.return;try{OU(t)}catch(u){zi(t,o,u)}}}catch(u){zi(t,t.return,u)}if(t===e){xt=null;break}var a=t.sibling;if(a!==null){a.return=t.return,xt=a;break}xt=t.return}}var lBe=Math.ceil,OO=zm.ReactCurrentDispatcher,bW=zm.ReactCurrentOwner,Ac=zm.ReactCurrentBatchConfig,ur=0,ao=null,ws=null,No=0,ml=0,Sw=Ty(0),Os=0,EA=null,j1=0,fL=0,_W=0,hC=null,Tu=null,wW=0,NE=1/0,Ap=null,$O=!1,LU=null,g0=null,wN=!1,Xg=null,MO=0,pC=0,FU=null,iP=-1,sP=0;function Ga(){return ur&6?ss():iP!==-1?iP:iP=ss()}function y0(e){return e.mode&1?ur&2&&No!==0?No&-No:W9e.transition!==null?(sP===0&&(sP=eve()),sP):(e=Or,e!==0||(e=window.event,e=e===void 0?16:ave(e.type)),e):1}function Ff(e,t,n,r){if(50<pC)throw pC=0,FU=null,Error(tt(185));ek(e,n,r),(!(ur&2)||e!==ao)&&(e===ao&&(!(ur&2)&&(fL|=n),Os===4&&Bg(e,No)),Uu(e,r),n===1&&ur===0&&!(t.mode&1)&&(NE=ss()+500,aL&&Cy()))}function Uu(e,t){var n=e.callbackNode;W8e(e,t);var r=bO(e,e===ao?No:0);if(r===0)n!==null&&tse(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&tse(n),t===1)e.tag===0?q9e(Gse.bind(null,e)):Cve(Gse.bind(null,e)),U9e(function(){!(ur&6)&&Cy()}),n=null;else{switch(tve(r)){case 1:n=Gq;break;case 4:n=Jye;break;case 16:n=vO;break;case 536870912:n=Zye;break;default:n=vO}n=S1e(n,y1e.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function y1e(e,t){if(iP=-1,sP=0,ur&6)throw Error(tt(327));var n=e.callbackNode;if(Hw()&&e.callbackNode!==n)return null;var r=bO(e,e===ao?No:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=LO(e,r);else{t=r;var i=ur;ur|=2;var s=b1e();(ao!==e||No!==t)&&(Ap=null,NE=ss()+500,_1(e,t));do try{dBe();break}catch(a){v1e(e,a)}while(!0);oW(),OO.current=s,ur=i,ws!==null?t=0:(ao=null,No=0,t=Os)}if(t!==0){if(t===2&&(i=fU(e),i!==0&&(r=i,t=jU(e,i))),t===1)throw n=EA,_1(e,0),Bg(e,r),Uu(e,ss()),n;if(t===6)Bg(e,r);else{if(i=e.current.alternate,!(r&30)&&!cBe(i)&&(t=LO(e,r),t===2&&(s=fU(e),s!==0&&(r=s,t=jU(e,s))),t===1))throw n=EA,_1(e,0),Bg(e,r),Uu(e,ss()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(tt(345));case 2:Sv(e,Tu,Ap);break;case 3:if(Bg(e,r),(r&130023424)===r&&(t=wW+500-ss(),10<t)){if(bO(e,0)!==0)break;if(i=e.suspendedLanes,(i&r)!==r){Ga(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=bU(Sv.bind(null,e,Tu,Ap),t);break}Sv(e,Tu,Ap);break;case 4:if(Bg(e,r),(r&4194240)===r)break;for(t=e.eventTimes,i=-1;0<r;){var o=31-Lf(r);s=1<<o,o=t[o],o>i&&(i=o),r&=~s}if(r=i,r=ss()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*lBe(r/1960))-r,10<r){e.timeoutHandle=bU(Sv.bind(null,e,Tu,Ap),r);break}Sv(e,Tu,Ap);break;case 5:Sv(e,Tu,Ap);break;default:throw Error(tt(329))}}}return Uu(e,ss()),e.callbackNode===n?y1e.bind(null,e):null}function jU(e,t){var n=hC;return e.current.memoizedState.isDehydrated&&(_1(e,t).flags|=256),e=LO(e,t),e!==2&&(t=Tu,Tu=n,t!==null&&BU(t)),e}function BU(e){Tu===null?Tu=e:Tu.push.apply(Tu,e)}function cBe(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Wf(s(),i))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Bg(e,t){for(t&=~_W,t&=~fL,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Lf(t),r=1<<n;e[n]=-1,t&=~r}}function Gse(e){if(ur&6)throw Error(tt(327));Hw();var t=bO(e,0);if(!(t&1))return Uu(e,ss()),null;var n=LO(e,t);if(e.tag!==0&&n===2){var r=fU(e);r!==0&&(t=r,n=jU(e,r))}if(n===1)throw n=EA,_1(e,0),Bg(e,t),Uu(e,ss()),n;if(n===6)throw Error(tt(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Sv(e,Tu,Ap),Uu(e,ss()),null}function EW(e,t){var n=ur;ur|=1;try{return e(t)}finally{ur=n,ur===0&&(NE=ss()+500,aL&&Cy())}}function B1(e){Xg!==null&&Xg.tag===0&&!(ur&6)&&Hw();var t=ur;ur|=1;var n=Ac.transition,r=Or;try{if(Ac.transition=null,Or=1,e)return e()}finally{Or=r,Ac.transition=n,ur=t,!(ur&6)&&Cy()}}function xW(){ml=Sw.current,hi(Sw)}function _1(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,B9e(n)),ws!==null)for(n=ws.return;n!==null;){var r=n;switch(rW(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&SO();break;case 3:kE(),hi(ju),hi(_a),dW();break;case 5:fW(r);break;case 4:kE();break;case 13:hi(Ni);break;case 19:hi(Ni);break;case 10:aW(r.type._context);break;case 22:case 23:xW()}n=n.return}if(ao=e,ws=e=v0(e.current,null),No=ml=t,Os=0,EA=null,_W=fL=j1=0,Tu=hC=null,e1!==null){for(t=0;t<e1.length;t++)if(n=e1[t],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}e1=null}return e}function v1e(e,t){do{var n=ws;try{if(oW(),tP.current=PO,DO){for(var r=Di.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}DO=!1}if(F1=0,Xs=Is=Di=null,fC=!1,bA=0,bW.current=null,n===null||n.return===null){Os=1,EA=t,ws=null;break}e:{var s=e,o=n.return,a=n,u=t;if(t=No,a.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var l=u,c=a,f=c.tag;if(!(c.mode&1)&&(f===0||f===11||f===15)){var d=c.alternate;d?(c.updateQueue=d.updateQueue,c.memoizedState=d.memoizedState,c.lanes=d.lanes):(c.updateQueue=null,c.memoizedState=null)}var h=Ose(o);if(h!==null){h.flags&=-257,$se(h,o,a,s,t),h.mode&1&&Pse(s,l,t),t=h,u=l;var p=t.updateQueue;if(p===null){var m=new Set;m.add(u),t.updateQueue=m}else p.add(u);break e}else{if(!(t&1)){Pse(s,l,t),SW();break e}u=Error(tt(426))}}else if(xi&&a.mode&1){var g=Ose(o);if(g!==null){!(g.flags&65536)&&(g.flags|=256),$se(g,o,a,s,t),iW(RE(u,a));break e}}s=u=RE(u,a),Os!==4&&(Os=2),hC===null?hC=[s]:hC.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t;var y=t1e(s,u,t);Ase(s,y);break e;case 1:a=u;var v=s.type,b=s.stateNode;if(!(s.flags&128)&&(typeof v.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(g0===null||!g0.has(b)))){s.flags|=65536,t&=-t,s.lanes|=t;var w=n1e(s,a,t);Ase(s,w);break e}}s=s.return}while(s!==null)}w1e(n)}catch(E){t=E,ws===n&&n!==null&&(ws=n=n.return);continue}break}while(!0)}function b1e(){var e=OO.current;return OO.current=PO,e===null?PO:e}function SW(){(Os===0||Os===3||Os===2)&&(Os=4),ao===null||!(j1&268435455)&&!(fL&268435455)||Bg(ao,No)}function LO(e,t){var n=ur;ur|=2;var r=b1e();(ao!==e||No!==t)&&(Ap=null,_1(e,t));do try{fBe();break}catch(i){v1e(e,i)}while(!0);if(oW(),ur=n,OO.current=r,ws!==null)throw Error(tt(261));return ao=null,No=0,Os}function fBe(){for(;ws!==null;)_1e(ws)}function dBe(){for(;ws!==null&&!L8e();)_1e(ws)}function _1e(e){var t=x1e(e.alternate,e,ml);e.memoizedProps=e.pendingProps,t===null?w1e(e):ws=t,bW.current=null}function w1e(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=sBe(n,t),n!==null){n.flags&=32767,ws=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Os=6,ws=null;return}}else if(n=iBe(n,t,ml),n!==null){ws=n;return}if(t=t.sibling,t!==null){ws=t;return}ws=t=e}while(t!==null);Os===0&&(Os=5)}function Sv(e,t,n){var r=Or,i=Ac.transition;try{Ac.transition=null,Or=1,hBe(e,t,n,r)}finally{Ac.transition=i,Or=r}return null}function hBe(e,t,n,r){do Hw();while(Xg!==null);if(ur&6)throw Error(tt(327));n=e.finishedWork;var i=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(tt(177));e.callbackNode=null,e.callbackPriority=0;var s=n.lanes|n.childLanes;if(G8e(e,s),e===ao&&(ws=ao=null,No=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||wN||(wN=!0,S1e(vO,function(){return Hw(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Ac.transition,Ac.transition=null;var o=Or;Or=1;var a=ur;ur|=4,bW.current=null,aBe(e,n),m1e(n,e),P9e(yU),_O=!!gU,yU=gU=null,e.current=n,uBe(n),F8e(),ur=a,Or=o,Ac.transition=s}else e.current=n;if(wN&&(wN=!1,Xg=e,MO=i),s=e.pendingLanes,s===0&&(g0=null),U8e(n.stateNode),Uu(e,ss()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if($O)throw $O=!1,e=LU,LU=null,e;return MO&1&&e.tag!==0&&Hw(),s=e.pendingLanes,s&1?e===FU?pC++:(pC=0,FU=e):pC=0,Cy(),null}function Hw(){if(Xg!==null){var e=tve(MO),t=Ac.transition,n=Or;try{if(Ac.transition=null,Or=16>e?16:e,Xg===null)var r=!1;else{if(e=Xg,Xg=null,MO=0,ur&6)throw Error(tt(331));var i=ur;for(ur|=4,xt=e.current;xt!==null;){var s=xt,o=s.child;if(xt.flags&16){var a=s.deletions;if(a!==null){for(var u=0;u<a.length;u++){var l=a[u];for(xt=l;xt!==null;){var c=xt;switch(c.tag){case 0:case 11:case 15:dC(8,c,s)}var f=c.child;if(f!==null)f.return=c,xt=f;else for(;xt!==null;){c=xt;var d=c.sibling,h=c.return;if(d1e(c),c===l){xt=null;break}if(d!==null){d.return=h,xt=d;break}xt=h}}}var p=s.alternate;if(p!==null){var m=p.child;if(m!==null){p.child=null;do{var g=m.sibling;m.sibling=null,m=g}while(m!==null)}}xt=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,xt=o;else e:for(;xt!==null;){if(s=xt,s.flags&2048)switch(s.tag){case 0:case 11:case 15:dC(9,s,s.return)}var y=s.sibling;if(y!==null){y.return=s.return,xt=y;break e}xt=s.return}}var v=e.current;for(xt=v;xt!==null;){o=xt;var b=o.child;if(o.subtreeFlags&2064&&b!==null)b.return=o,xt=b;else e:for(o=v;xt!==null;){if(a=xt,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:cL(9,a)}}catch(E){zi(a,a.return,E)}if(a===o){xt=null;break e}var w=a.sibling;if(w!==null){w.return=a.return,xt=w;break e}xt=a.return}}if(ur=i,Cy(),oh&&typeof oh.onPostCommitFiberRoot=="function")try{oh.onPostCommitFiberRoot(nL,e)}catch{}r=!0}return r}finally{Or=n,Ac.transition=t}}return!1}function Yse(e,t,n){t=RE(n,t),t=t1e(e,t,1),e=m0(e,t,1),t=Ga(),e!==null&&(ek(e,1,t),Uu(e,t))}function zi(e,t,n){if(e.tag===3)Yse(e,e,n);else for(;t!==null;){if(t.tag===3){Yse(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(g0===null||!g0.has(r))){e=RE(n,e),e=n1e(t,e,1),t=m0(t,e,1),e=Ga(),t!==null&&(ek(t,1,e),Uu(t,e));break}}t=t.return}}function pBe(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=Ga(),e.pingedLanes|=e.suspendedLanes&n,ao===e&&(No&n)===n&&(Os===4||Os===3&&(No&130023424)===No&&500>ss()-wW?_1(e,0):_W|=n),Uu(e,t)}function E1e(e,t){t===0&&(e.mode&1?(t=fN,fN<<=1,!(fN&130023424)&&(fN=4194304)):t=1);var n=Ga();e=gm(e,t),e!==null&&(ek(e,t,n),Uu(e,n))}function mBe(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),E1e(e,n)}function gBe(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(tt(314))}r!==null&&r.delete(t),E1e(e,n)}var x1e;x1e=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||ju.current)Pu=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Pu=!1,rBe(e,t,n);Pu=!!(e.flags&131072)}else Pu=!1,xi&&t.flags&1048576&&Ave(t,AO,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;rP(e,t),e=t.pendingProps;var i=CE(t,_a.current);Vw(t,n),i=pW(null,t,r,e,i,n);var s=mW();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Bu(r)?(s=!0,TO(t)):s=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,lW(t),i.updater=lL,t.stateNode=i,i._reactInternals=t,CU(t,r,e,n),t=kU(null,t,r,!0,s,n)):(t.tag=0,xi&&s&&nW(t),Ma(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(rP(e,t),e=t.pendingProps,i=r._init,r=i(r._payload),t.type=r,i=t.tag=vBe(r),e=hf(r,e),i){case 0:t=IU(null,t,r,e,n);break e;case 1:t=Fse(null,t,r,e,n);break e;case 11:t=Mse(null,t,r,e,n);break e;case 14:t=Lse(null,t,r,hf(r.type,e),n);break e}throw Error(tt(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:hf(r,i),IU(e,t,r,i,n);case 1:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:hf(r,i),Fse(e,t,r,i,n);case 3:e:{if(o1e(t),e===null)throw Error(tt(387));r=t.pendingProps,s=t.memoizedState,i=s.element,Pve(e,t),RO(t,r,null,n);var o=t.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){i=RE(Error(tt(423)),t),t=jse(e,t,r,n,i);break e}else if(r!==i){i=RE(Error(tt(424)),t),t=jse(e,t,r,n,i);break e}else for(El=p0(t.stateNode.containerInfo.firstChild),Rl=t,xi=!0,bf=null,n=Nve(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(AE(),r===i){t=ym(e,t,n);break e}Ma(e,t,r,n)}t=t.child}return t;case 5:return Ove(t),e===null&&xU(t),r=t.type,i=t.pendingProps,s=e!==null?e.memoizedProps:null,o=i.children,vU(r,i)?o=null:s!==null&&vU(r,s)&&(t.flags|=32),s1e(e,t),Ma(e,t,o,n),t.child;case 6:return e===null&&xU(t),null;case 13:return a1e(e,t,n);case 4:return cW(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=IE(t,null,r,n):Ma(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:hf(r,i),Mse(e,t,r,i,n);case 7:return Ma(e,t,t.pendingProps,n),t.child;case 8:return Ma(e,t,t.pendingProps.children,n),t.child;case 12:return Ma(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,s=t.memoizedProps,o=i.value,ti(IO,r._currentValue),r._currentValue=o,s!==null)if(Wf(s.value,o)){if(s.children===i.children&&!ju.current){t=ym(e,t,n);break e}}else for(s=t.child,s!==null&&(s.return=t);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var u=a.firstContext;u!==null;){if(u.context===r){if(s.tag===1){u=nm(-1,n&-n),u.tag=2;var l=s.updateQueue;if(l!==null){l=l.shared;var c=l.pending;c===null?u.next=u:(u.next=c.next,c.next=u),l.pending=u}}s.lanes|=n,u=s.alternate,u!==null&&(u.lanes|=n),SU(s.return,n,t),a.lanes|=n;break}u=u.next}}else if(s.tag===10)o=s.type===t.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(tt(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),SU(o,n,t),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===t){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Ma(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Vw(t,n),i=Rc(i),r=r(i),t.flags|=1,Ma(e,t,r,n),t.child;case 14:return r=t.type,i=hf(r,t.pendingProps),i=hf(r.type,i),Lse(e,t,r,i,n);case 15:return r1e(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:hf(r,i),rP(e,t),t.tag=1,Bu(r)?(e=!0,TO(t)):e=!1,Vw(t,n),e1e(t,r,i),CU(t,r,i,n),kU(null,t,r,!0,e,n);case 19:return u1e(e,t,n);case 22:return i1e(e,t,n)}throw Error(tt(156,t.tag))};function S1e(e,t){return Qye(e,t)}function yBe(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ec(e,t,n,r){return new yBe(e,t,n,r)}function TW(e){return e=e.prototype,!(!e||!e.isReactComponent)}function vBe(e){if(typeof e=="function")return TW(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Hq)return 11;if(e===qq)return 14}return 2}function v0(e,t){var n=e.alternate;return n===null?(n=Ec(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function oP(e,t,n,r,i,s){var o=2;if(r=e,typeof e=="function")TW(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case pw:return w1(n.children,i,s,t);case Vq:o=8,i|=8;break;case XB:return e=Ec(12,n,t,i|2),e.elementType=XB,e.lanes=s,e;case QB:return e=Ec(13,n,t,i),e.elementType=QB,e.lanes=s,e;case JB:return e=Ec(19,n,t,i),e.elementType=JB,e.lanes=s,e;case Oye:return dL(n,i,s,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Dye:o=10;break e;case Pye:o=9;break e;case Hq:o=11;break e;case qq:o=14;break e;case kg:o=16,r=null;break e}throw Error(tt(130,e==null?e:typeof e,""))}return t=Ec(o,n,t,i),t.elementType=e,t.type=r,t.lanes=s,t}function w1(e,t,n,r){return e=Ec(7,e,r,t),e.lanes=n,e}function dL(e,t,n,r){return e=Ec(22,e,r,t),e.elementType=Oye,e.lanes=n,e.stateNode={isHidden:!1},e}function wj(e,t,n){return e=Ec(6,e,null,t),e.lanes=n,e}function Ej(e,t,n){return t=Ec(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function bBe(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=nj(0),this.expirationTimes=nj(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=nj(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function CW(e,t,n,r,i,s,o,a,u){return e=new bBe(e,t,n,a,u),t===1?(t=1,s===!0&&(t|=8)):t=0,s=Ec(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},lW(s),e}function _Be(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:hw,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function T1e(e){if(!e)return F0;e=e._reactInternals;e:{if(kb(e)!==e||e.tag!==1)throw Error(tt(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Bu(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(tt(171))}if(e.tag===1){var n=e.type;if(Bu(n))return Tve(e,n,t)}return t}function C1e(e,t,n,r,i,s,o,a,u){return e=CW(n,r,!0,e,i,s,o,a,u),e.context=T1e(null),n=e.current,r=Ga(),i=y0(n),s=nm(r,i),s.callback=t??null,m0(n,s,i),e.current.lanes=i,ek(e,i,r),Uu(e,r),e}function hL(e,t,n,r){var i=t.current,s=Ga(),o=y0(i);return n=T1e(n),t.context===null?t.context=n:t.pendingContext=n,t=nm(s,o),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=m0(i,t,o),e!==null&&(Ff(e,i,o,s),eP(e,i,o)),o}function FO(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Kse(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function AW(e,t){Kse(e,t),(e=e.alternate)&&Kse(e,t)}function wBe(){return null}var A1e=typeof reportError=="function"?reportError:function(e){console.error(e)};function IW(e){this._internalRoot=e}pL.prototype.render=IW.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(tt(409));hL(e,t,null,null)};pL.prototype.unmount=IW.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;B1(function(){hL(null,e,null,null)}),t[mm]=null}};function pL(e){this._internalRoot=e}pL.prototype.unstable_scheduleHydration=function(e){if(e){var t=ive();e={blockedOn:null,target:e,priority:t};for(var n=0;n<jg.length&&t!==0&&t<jg[n].priority;n++);jg.splice(n,0,e),n===0&&ove(e)}};function kW(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function mL(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Xse(){}function EBe(e,t,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var l=FO(o);s.call(l)}}var o=C1e(t,r,e,0,null,!1,!1,"",Xse);return e._reactRootContainer=o,e[mm]=o.current,pA(e.nodeType===8?e.parentNode:e),B1(),o}for(;i=e.lastChild;)e.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var l=FO(u);a.call(l)}}var u=CW(e,0,!1,null,null,!1,!1,"",Xse);return e._reactRootContainer=u,e[mm]=u.current,pA(e.nodeType===8?e.parentNode:e),B1(function(){hL(t,u,n,r)}),u}function gL(e,t,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var u=FO(o);a.call(u)}}hL(t,o,e,i)}else o=EBe(n,t,e,i,r);return FO(o)}nve=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=m2(t.pendingLanes);n!==0&&(Yq(t,n|1),Uu(t,ss()),!(ur&6)&&(NE=ss()+500,Cy()))}break;case 13:B1(function(){var r=gm(e,1);if(r!==null){var i=Ga();Ff(r,e,1,i)}}),AW(e,1)}};Kq=function(e){if(e.tag===13){var t=gm(e,134217728);if(t!==null){var n=Ga();Ff(t,e,134217728,n)}AW(e,134217728)}};rve=function(e){if(e.tag===13){var t=y0(e),n=gm(e,t);if(n!==null){var r=Ga();Ff(n,e,t,r)}AW(e,t)}};ive=function(){return Or};sve=function(e,t){var n=Or;try{return Or=e,t()}finally{Or=n}};uU=function(e,t,n){switch(t){case"input":if(tU(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=oL(r);if(!i)throw Error(tt(90));Mye(r),tU(r,i)}}}break;case"textarea":Fye(e,n);break;case"select":t=n.value,t!=null&&jw(e,!!n.multiple,t,!1)}};qye=EW;Wye=B1;var xBe={usingClientEntryPoint:!1,Events:[nk,vw,oL,Vye,Hye,EW]},bT={findFiberByHostInstance:Zv,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},SBe={bundleType:bT.bundleType,version:bT.version,rendererPackageName:bT.rendererPackageName,rendererConfig:bT.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:zm.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Kye(e),e===null?null:e.stateNode},findFiberByHostInstance:bT.findFiberByHostInstance||wBe,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var EN=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!EN.isDisabled&&EN.supportsFiber)try{nL=EN.inject(SBe),oh=EN}catch{}}Xl.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=xBe;Xl.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!kW(t))throw Error(tt(200));return _Be(e,t,null,n)};Xl.createRoot=function(e,t){if(!kW(e))throw Error(tt(299));var n=!1,r="",i=A1e;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=CW(e,1,!1,null,null,n,!1,r,i),e[mm]=t.current,pA(e.nodeType===8?e.parentNode:e),new IW(t)};Xl.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(tt(188)):(e=Object.keys(e).join(","),Error(tt(268,e)));return e=Kye(t),e=e===null?null:e.stateNode,e};Xl.flushSync=function(e){return B1(e)};Xl.hydrate=function(e,t,n){if(!mL(t))throw Error(tt(200));return gL(null,e,t,!0,n)};Xl.hydrateRoot=function(e,t,n){if(!kW(e))throw Error(tt(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=A1e;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),t=C1e(t,null,e,1,n??null,i,!1,s,o),e[mm]=t.current,pA(e),r)for(e=0;e<r.length;e++)n=r[e],i=n._getVersion,i=i(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new pL(t)};Xl.render=function(e,t,n){if(!mL(t))throw Error(tt(200));return gL(null,e,t,!1,n)};Xl.unmountComponentAtNode=function(e){if(!mL(e))throw Error(tt(40));return e._reactRootContainer?(B1(function(){gL(null,null,e,!1,function(){e._reactRootContainer=null,e[mm]=null})}),!0):!1};Xl.unstable_batchedUpdates=EW;Xl.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!mL(n))throw Error(tt(200));if(e==null||e._reactInternals===void 0)throw Error(tt(38));return gL(e,t,n,!1,r)};Xl.version="18.3.1-next-f1338f8080-20240426";function I1e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(I1e)}catch(e){console.error(e)}}I1e(),Iye.exports=Xl;var ik=Iye.exports;const y2=Kl(ik);var Qse=ik;YB.createRoot=Qse.createRoot,YB.hydrateRoot=Qse.hydrateRoot;var Bd=function(){return Bd=Object.assign||function(t){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},Bd.apply(this,arguments)};function sk(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}function Lp(e,t,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(c){try{l(r.next(c))}catch(f){o(f)}}function u(c){try{l(r.throw(c))}catch(f){o(f)}}function l(c){c.done?s(c.value):i(c.value).then(a,u)}l((r=r.apply(e,t||[])).next())})}function Jse(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function TBe(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,s;r<i;r++)(s||!(r in t))&&(s||(s=Array.prototype.slice.call(t,0,r)),s[r]=t[r]);return e.concat(s||Array.prototype.slice.call(t))}function Yn(e){return this instanceof Yn?(this.v=e,this):new Yn(e)}function n1(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(e,t||[]),i,s=[];return i={},a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(h){return function(p){return Promise.resolve(p).then(h,f)}}function a(h,p){r[h]&&(i[h]=function(m){return new Promise(function(g,y){s.push([h,m,g,y])>1||u(h,m)})},p&&(i[h]=p(i[h])))}function u(h,p){try{l(r[h](p))}catch(m){d(s[0][3],m)}}function l(h){h.value instanceof Yn?Promise.resolve(h.value.v).then(c,f):d(s[0][2],h)}function c(h){u("next",h)}function f(h){u("throw",h)}function d(h,p){h(p),s.shift(),s.length&&u(s[0][0],s[0][1])}}function xj(e){var t,n;return t={},r("next"),r("throw",function(i){throw i}),r("return"),t[Symbol.iterator]=function(){return this},t;function r(i,s){t[i]=e[i]?function(o){return(n=!n)?{value:Yn(e[i](o)),done:!1}:s?s(o):o}:s}}function mC(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof Jse=="function"?Jse(e):e[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=e[s]&&function(o){return new Promise(function(a,u){o=e[s](o),i(a,u,o.done,o.value)})}}function i(s,o,a,u){Promise.resolve(u).then(function(l){s({value:l,done:a})},o)}}var aP="right-scroll-bar-position",uP="width-before-scroll-bar",CBe="with-scroll-bars-hidden",ABe="--removed-body-scroll-bar-size";function Sj(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function IBe(e,t){var n=I.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(r){var i=n.value;i!==r&&(n.value=r,n.callback(r,i))}}}})[0];return n.callback=t,n.facade}var kBe=typeof window<"u"?I.useLayoutEffect:I.useEffect,Zse=new WeakMap;function RBe(e,t){var n=IBe(null,function(r){return e.forEach(function(i){return Sj(i,r)})});return kBe(function(){var r=Zse.get(n);if(r){var i=new Set(r),s=new Set(e),o=n.current;i.forEach(function(a){s.has(a)||Sj(a,null)}),s.forEach(function(a){i.has(a)||Sj(a,o)})}Zse.set(n,e)},[e]),n}function NBe(e){return e}function DBe(e,t){t===void 0&&(t=NBe);var n=[],r=!1,i={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(s){var o=t(s,r);return n.push(o),function(){n=n.filter(function(a){return a!==o})}},assignSyncMedium:function(s){for(r=!0;n.length;){var o=n;n=[],o.forEach(s)}n={push:function(a){return s(a)},filter:function(){return n}}},assignMedium:function(s){r=!0;var o=[];if(n.length){var a=n;n=[],a.forEach(s),o=n}var u=function(){var c=o;o=[],c.forEach(s)},l=function(){return Promise.resolve().then(u)};l(),n={push:function(c){o.push(c),l()},filter:function(c){return o=o.filter(c),n}}}};return i}function PBe(e){e===void 0&&(e={});var t=DBe(null);return t.options=Bd({async:!0,ssr:!1},e),t}var k1e=function(e){var t=e.sideCar,n=sk(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=t.read();if(!r)throw new Error("Sidecar medium not found");return I.createElement(r,Bd({},n))};k1e.isSideCarExport=!0;function OBe(e,t){return e.useMedium(t),k1e}var R1e=PBe(),Tj=function(){},yL=I.forwardRef(function(e,t){var n=I.useRef(null),r=I.useState({onScrollCapture:Tj,onWheelCapture:Tj,onTouchMoveCapture:Tj}),i=r[0],s=r[1],o=e.forwardProps,a=e.children,u=e.className,l=e.removeScrollBar,c=e.enabled,f=e.shards,d=e.sideCar,h=e.noIsolation,p=e.inert,m=e.allowPinchZoom,g=e.as,y=g===void 0?"div":g,v=e.gapMode,b=sk(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),w=d,E=RBe([n,t]),T=Bd(Bd({},b),i);return I.createElement(I.Fragment,null,c&&I.createElement(w,{sideCar:R1e,removeScrollBar:l,shards:f,noIsolation:h,inert:p,setCallbacks:s,allowPinchZoom:!!m,lockRef:n,gapMode:v}),o?I.cloneElement(I.Children.only(a),Bd(Bd({},T),{ref:E})):I.createElement(y,Bd({},T,{className:u,ref:E}),a))});yL.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};yL.classNames={fullWidth:uP,zeroRight:aP};var $Be=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function MBe(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=$Be();return t&&e.setAttribute("nonce",t),e}function LBe(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function FBe(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var jBe=function(){var e=0,t=null;return{add:function(n){e==0&&(t=MBe())&&(LBe(t,n),FBe(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},BBe=function(){var e=jBe();return function(t,n){I.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},N1e=function(){var e=BBe(),t=function(n){var r=n.styles,i=n.dynamic;return e(r,i),null};return t},UBe={left:0,top:0,right:0,gap:0},Cj=function(e){return parseInt(e||"",10)||0},zBe=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],r=t[e==="padding"?"paddingTop":"marginTop"],i=t[e==="padding"?"paddingRight":"marginRight"];return[Cj(n),Cj(r),Cj(i)]},VBe=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return UBe;var t=zBe(e),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-n+t[2]-t[0])}},HBe=N1e(),qw="data-scroll-locked",qBe=function(e,t,n,r){var i=e.left,s=e.top,o=e.right,a=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(CBe,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(a,"px ").concat(r,`;
  }
  body[`).concat(qw,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(s,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(a,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(aP,` {
    right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(uP,` {
    margin-right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(aP," .").concat(aP,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(uP," .").concat(uP,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(qw,`] {
    `).concat(ABe,": ").concat(a,`px;
  }
`)},eoe=function(){var e=parseInt(document.body.getAttribute(qw)||"0",10);return isFinite(e)?e:0},WBe=function(){I.useEffect(function(){return document.body.setAttribute(qw,(eoe()+1).toString()),function(){var e=eoe()-1;e<=0?document.body.removeAttribute(qw):document.body.setAttribute(qw,e.toString())}},[])},GBe=function(e){var t=e.noRelative,n=e.noImportant,r=e.gapMode,i=r===void 0?"margin":r;WBe();var s=I.useMemo(function(){return VBe(i)},[i]);return I.createElement(HBe,{styles:qBe(s,!t,i,n?"":"!important")})},UU=!1;if(typeof window<"u")try{var xN=Object.defineProperty({},"passive",{get:function(){return UU=!0,!0}});window.addEventListener("test",xN,xN),window.removeEventListener("test",xN,xN)}catch{UU=!1}var S_=UU?{passive:!1}:!1,YBe=function(e){return e.tagName==="TEXTAREA"},D1e=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!YBe(e)&&n[t]==="visible")},KBe=function(e){return D1e(e,"overflowY")},XBe=function(e){return D1e(e,"overflowX")},toe=function(e,t){var n=t.ownerDocument,r=t;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var i=P1e(e,r);if(i){var s=O1e(e,r),o=s[1],a=s[2];if(o>a)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},QBe=function(e){var t=e.scrollTop,n=e.scrollHeight,r=e.clientHeight;return[t,n,r]},JBe=function(e){var t=e.scrollLeft,n=e.scrollWidth,r=e.clientWidth;return[t,n,r]},P1e=function(e,t){return e==="v"?KBe(t):XBe(t)},O1e=function(e,t){return e==="v"?QBe(t):JBe(t)},ZBe=function(e,t){return e==="h"&&t==="rtl"?-1:1},eUe=function(e,t,n,r,i){var s=ZBe(e,window.getComputedStyle(t).direction),o=s*r,a=n.target,u=t.contains(a),l=!1,c=o>0,f=0,d=0;do{var h=O1e(e,a),p=h[0],m=h[1],g=h[2],y=m-g-s*p;(p||y)&&P1e(e,a)&&(f+=y,d+=p),a instanceof ShadowRoot?a=a.host:a=a.parentNode}while(!u&&a!==document.body||u&&(t.contains(a)||t===a));return(c&&(Math.abs(f)<1||!i)||!c&&(Math.abs(d)<1||!i))&&(l=!0),l},SN=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},noe=function(e){return[e.deltaX,e.deltaY]},roe=function(e){return e&&"current"in e?e.current:e},tUe=function(e,t){return e[0]===t[0]&&e[1]===t[1]},nUe=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},rUe=0,T_=[];function iUe(e){var t=I.useRef([]),n=I.useRef([0,0]),r=I.useRef(),i=I.useState(rUe++)[0],s=I.useState(N1e)[0],o=I.useRef(e);I.useEffect(function(){o.current=e},[e]),I.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(i));var m=TBe([e.lockRef.current],(e.shards||[]).map(roe),!0).filter(Boolean);return m.forEach(function(g){return g.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),m.forEach(function(g){return g.classList.remove("allow-interactivity-".concat(i))})}}},[e.inert,e.lockRef.current,e.shards]);var a=I.useCallback(function(m,g){if("touches"in m&&m.touches.length===2)return!o.current.allowPinchZoom;var y=SN(m),v=n.current,b="deltaX"in m?m.deltaX:v[0]-y[0],w="deltaY"in m?m.deltaY:v[1]-y[1],E,T=m.target,S=Math.abs(b)>Math.abs(w)?"h":"v";if("touches"in m&&S==="h"&&T.type==="range")return!1;var C=toe(S,T);if(!C)return!0;if(C?E=S:(E=S==="v"?"h":"v",C=toe(S,T)),!C)return!1;if(!r.current&&"changedTouches"in m&&(b||w)&&(r.current=E),!E)return!0;var A=r.current||E;return eUe(A,g,m,A==="h"?b:w,!0)},[]),u=I.useCallback(function(m){var g=m;if(!(!T_.length||T_[T_.length-1]!==s)){var y="deltaY"in g?noe(g):SN(g),v=t.current.filter(function(E){return E.name===g.type&&(E.target===g.target||g.target===E.shadowParent)&&tUe(E.delta,y)})[0];if(v&&v.should){g.cancelable&&g.preventDefault();return}if(!v){var b=(o.current.shards||[]).map(roe).filter(Boolean).filter(function(E){return E.contains(g.target)}),w=b.length>0?a(g,b[0]):!o.current.noIsolation;w&&g.cancelable&&g.preventDefault()}}},[]),l=I.useCallback(function(m,g,y,v){var b={name:m,delta:g,target:y,should:v,shadowParent:sUe(y)};t.current.push(b),setTimeout(function(){t.current=t.current.filter(function(w){return w!==b})},1)},[]),c=I.useCallback(function(m){n.current=SN(m),r.current=void 0},[]),f=I.useCallback(function(m){l(m.type,noe(m),m.target,a(m,e.lockRef.current))},[]),d=I.useCallback(function(m){l(m.type,SN(m),m.target,a(m,e.lockRef.current))},[]);I.useEffect(function(){return T_.push(s),e.setCallbacks({onScrollCapture:f,onWheelCapture:f,onTouchMoveCapture:d}),document.addEventListener("wheel",u,S_),document.addEventListener("touchmove",u,S_),document.addEventListener("touchstart",c,S_),function(){T_=T_.filter(function(m){return m!==s}),document.removeEventListener("wheel",u,S_),document.removeEventListener("touchmove",u,S_),document.removeEventListener("touchstart",c,S_)}},[]);var h=e.removeScrollBar,p=e.inert;return I.createElement(I.Fragment,null,p?I.createElement(s,{styles:nUe(i)}):null,h?I.createElement(GBe,{gapMode:e.gapMode}):null)}function sUe(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const oUe=OBe(R1e,iUe);var vL=I.forwardRef(function(e,t){return I.createElement(yL,Bd({},e,{ref:t,sideCar:oUe}))});vL.classNames=yL.classNames;function Xr(e){return Object.keys(e)}function Aj(e){return e&&typeof e=="object"&&!Array.isArray(e)}function RW(e,t){const n={...e},r=t;return Aj(e)&&Aj(t)&&Object.keys(t).forEach(i=>{Aj(r[i])&&i in e?n[i]=RW(n[i],r[i]):n[i]=r[i]}),n}function aUe(e){return e.replace(/[A-Z]/g,t=>`-${t.toLowerCase()}`)}function uUe(e){var t;return typeof e!="string"||!e.includes("var(--mantine-scale)")?e:(t=e.match(/^calc\((.*?)\)$/))==null?void 0:t[1].split("*")[0].trim()}function xA(e){const t=uUe(e);return typeof t=="number"?t:typeof t=="string"?t.includes("calc")||t.includes("var")?t:t.includes("px")?Number(t.replace("px","")):t.includes("rem")?Number(t.replace("rem",""))*16:t.includes("em")?Number(t.replace("em",""))*16:Number(t):NaN}function Ij(e){return e==="0rem"?"0rem":`calc(${e} * var(--mantine-scale))`}function $1e(e,{shouldScale:t=!1}={}){function n(r){if(r===0||r==="0")return`0${e}`;if(typeof r=="number"){const i=`${r/16}${e}`;return t?Ij(i):i}if(typeof r=="string"){if(r===""||r.startsWith("calc(")||r.startsWith("clamp(")||r.includes("rgba("))return r;if(r.includes(","))return r.split(",").map(s=>n(s)).join(",");if(r.includes(" "))return r.split(" ").map(s=>n(s)).join(" ");if(r.includes(e))return t?Ij(r):r;const i=r.replace("px","");if(!Number.isNaN(Number(i))){const s=`${Number(i)/16}${e}`;return t?Ij(s):s}}return r}return n}const Te=$1e("rem",{shouldScale:!0}),jO=$1e("em");function Ay(e){return Object.keys(e).reduce((t,n)=>(e[n]!==void 0&&(t[n]=e[n]),t),{})}function M1e(e){return typeof e=="number"?!0:typeof e=="string"?e.startsWith("calc(")||e.startsWith("var(")||e.includes(" ")&&e.trim()!==""?!0:/[0-9]/.test(e.trim().replace("-","")[0]):!1}function Iy(e){return Array.isArray(e)||e===null?!1:typeof e=="object"?e.type!==I.Fragment:!1}function fo(e){const t=I.createContext(null);return[({children:i,value:s})=>_.jsx(t.Provider,{value:s,children:i}),()=>{const i=I.useContext(t);if(i===null)throw new Error(e);return i}]}function Gx(e=null){const t=I.createContext(e);return[({children:i,value:s})=>_.jsx(t.Provider,{value:s,children:i}),()=>I.useContext(t)]}function BO(e,t){return n=>{if(typeof n!="string"||n.trim().length===0)throw new Error(t);return`${e}-${n}`}}function UO(e,t){let n=e;for(;(n=n.parentElement)&&!n.matches(t););return n}function lUe(e,t,n){for(let r=e-1;r>=0;r-=1)if(!t[r].disabled)return r;if(n){for(let r=t.length-1;r>-1;r-=1)if(!t[r].disabled)return r}return e}function cUe(e,t,n){for(let r=e+1;r<t.length;r+=1)if(!t[r].disabled)return r;if(n){for(let r=0;r<t.length;r+=1)if(!t[r].disabled)return r}return e}function fUe(e,t,n){return UO(e,n)===UO(t,n)}function NW({parentSelector:e,siblingSelector:t,onKeyDown:n,loop:r=!0,activateOnFocus:i=!1,dir:s="rtl",orientation:o}){return a=>{var p;n==null||n(a);const u=Array.from(((p=UO(a.currentTarget,e))==null?void 0:p.querySelectorAll(t))||[]).filter(m=>fUe(a.currentTarget,m,e)),l=u.findIndex(m=>a.currentTarget===m),c=cUe(l,u,r),f=lUe(l,u,r),d=s==="rtl"?f:c,h=s==="rtl"?c:f;switch(a.key){case"ArrowRight":{o==="horizontal"&&(a.stopPropagation(),a.preventDefault(),u[d].focus(),i&&u[d].click());break}case"ArrowLeft":{o==="horizontal"&&(a.stopPropagation(),a.preventDefault(),u[h].focus(),i&&u[h].click());break}case"ArrowUp":{o==="vertical"&&(a.stopPropagation(),a.preventDefault(),u[f].focus(),i&&u[f].click());break}case"ArrowDown":{o==="vertical"&&(a.stopPropagation(),a.preventDefault(),u[c].focus(),i&&u[c].click());break}case"Home":{a.stopPropagation(),a.preventDefault(),!u[0].disabled&&u[0].focus();break}case"End":{a.stopPropagation(),a.preventDefault();const m=u.length-1;!u[m].disabled&&u[m].focus();break}}}}const dUe={app:100,modal:200,popover:300,overlay:400,max:9999};function Jl(e){return dUe[e]}const hUe=()=>{};function pUe(e,t={active:!0}){return typeof e!="function"||!t.active?t.onKeyDown||hUe:n=>{var r;n.key==="Escape"&&(e(n),(r=t.onTrigger)==null||r.call(t))}}function tn(e,t="size",n=!0){if(e!==void 0)return M1e(e)?n?Te(e):e:`var(--${t}-${e})`}function as(e){return tn(e,"mantine-spacing")}function Ur(e){return e===void 0?"var(--mantine-radius-default)":tn(e,"mantine-radius")}function uo(e){return tn(e,"mantine-font-size")}function L1e(e){return tn(e,"mantine-line-height",!1)}function DW(e){if(e)return tn(e,"mantine-shadow",!1)}function Wp(e,t){return n=>{e==null||e(n),t==null||t(n)}}function PW(e,t){return e in t.breakpoints?xA(t.breakpoints[e]):xA(e)}function SA(e,t){const n=e.map(r=>({value:r,px:PW(r,t)}));return n.sort((r,i)=>r.px-i.px),n}function If(e){return typeof e=="object"&&e!==null?"base"in e?e.base:void 0:e}function mUe(e,t,n){var r;return n?Array.from(((r=UO(n,t))==null?void 0:r.querySelectorAll(e))||[]).findIndex(i=>i===n):null}function gUe(){const[e,t]=I.useState(-1);return[e,{setHovered:t,resetHovered:()=>t(-1)}]}function Zd(e,t,n){return t===void 0&&n===void 0?e:t!==void 0&&n===void 0?Math.max(e,t):Math.min(t===void 0&&n!==void 0?e:Math.max(e,t),n)}function Ww(){return`mantine-${Math.random().toString(36).slice(2,11)}`}function jv(e){const t=I.useRef(e);return I.useEffect(()=>{t.current=e}),I.useMemo(()=>(...n)=>{var r;return(r=t.current)==null?void 0:r.call(t,...n)},[])}function bL(e,t){const n=jv(e),r=I.useRef(0);return I.useEffect(()=>()=>window.clearTimeout(r.current),[]),I.useCallback((...i)=>{window.clearTimeout(r.current),r.current=window.setTimeout(()=>n(...i),t)},[n,t])}const ioe=["mousedown","touchstart"];function yUe(e,t,n){const r=I.useRef();return I.useEffect(()=>{const i=s=>{const{target:o}=s??{};if(Array.isArray(n)){const a=(o==null?void 0:o.hasAttribute("data-ignore-outside-clicks"))||!document.body.contains(o)&&o.tagName!=="HTML";n.every(l=>!!l&&!s.composedPath().includes(l))&&!a&&e()}else r.current&&!r.current.contains(o)&&e()};return(t||ioe).forEach(s=>document.addEventListener(s,i)),()=>{(t||ioe).forEach(s=>document.removeEventListener(s,i))}},[r,e,n]),r}function vUe(e,t){try{return e.addEventListener("change",t),()=>e.removeEventListener("change",t)}catch{return e.addListener(t),()=>e.removeListener(t)}}function bUe(e,t){return typeof window<"u"&&"matchMedia"in window?window.matchMedia(e).matches:!1}function _Ue(e,t,{getInitialValueInEffect:n}={getInitialValueInEffect:!0}){const[r,i]=I.useState(n?t:bUe(e)),s=I.useRef();return I.useEffect(()=>{if("matchMedia"in window)return s.current=window.matchMedia(e),i(s.current.matches),vUe(s.current,o=>i(o.matches))},[e]),r}const Rb=typeof document<"u"?I.useLayoutEffect:I.useEffect;function Sh(e,t){const n=I.useRef(!1);I.useEffect(()=>()=>{n.current=!1},[]),I.useEffect(()=>{if(n.current)return e();n.current=!0},t)}function F1e({opened:e,shouldReturnFocus:t=!0}){const n=I.useRef(),r=()=>{var i;n.current&&"focus"in n.current&&typeof n.current.focus=="function"&&((i=n.current)==null||i.focus({preventScroll:!0}))};return Sh(()=>{let i=-1;const s=o=>{o.key==="Tab"&&window.clearTimeout(i)};return document.addEventListener("keydown",s),e?n.current=document.activeElement:t&&(i=window.setTimeout(r,10)),()=>{window.clearTimeout(i),document.removeEventListener("keydown",s)}},[e,t]),r}function wUe(e,t="body > :not(script)"){const n=Ww(),r=Array.from(document.querySelectorAll(t)).map(i=>{var u;if((u=i==null?void 0:i.shadowRoot)!=null&&u.contains(e)||i.contains(e))return;const s=i.getAttribute("aria-hidden"),o=i.getAttribute("data-hidden"),a=i.getAttribute("data-focus-id");return i.setAttribute("data-focus-id",n),s===null||s==="false"?i.setAttribute("aria-hidden","true"):!o&&!a&&i.setAttribute("data-hidden",s),{node:i,ariaHidden:o||null}});return()=>{r.forEach(i=>{!i||n!==i.node.getAttribute("data-focus-id")||(i.ariaHidden===null?i.node.removeAttribute("aria-hidden"):i.node.setAttribute("aria-hidden",i.ariaHidden),i.node.removeAttribute("data-focus-id"),i.node.removeAttribute("data-hidden"))})}}const EUe=/input|select|textarea|button|object/,j1e="a, input, select, textarea, button, object, [tabindex]";function xUe(e){return e.style.display==="none"}function SUe(e){if(e.getAttribute("aria-hidden")||e.getAttribute("hidden")||e.getAttribute("type")==="hidden")return!1;let n=e;for(;n&&!(n===document.body||n.nodeType===11);){if(xUe(n))return!1;n=n.parentNode}return!0}function B1e(e){let t=e.getAttribute("tabindex");return t===null&&(t=void 0),parseInt(t,10)}function zU(e){const t=e.nodeName.toLowerCase(),n=!Number.isNaN(B1e(e));return(EUe.test(t)&&!e.disabled||e instanceof HTMLAnchorElement&&e.href||n)&&SUe(e)}function U1e(e){const t=B1e(e);return(Number.isNaN(t)||t>=0)&&zU(e)}function TUe(e){return Array.from(e.querySelectorAll(j1e)).filter(U1e)}function CUe(e,t){const n=TUe(e);if(!n.length){t.preventDefault();return}const r=n[t.shiftKey?0:n.length-1],i=e.getRootNode();let s=r===i.activeElement||e===i.activeElement;const o=i.activeElement;if(o.tagName==="INPUT"&&o.getAttribute("type")==="radio"&&(s=n.filter(c=>c.getAttribute("type")==="radio"&&c.getAttribute("name")===o.getAttribute("name")).includes(r)),!s)return;t.preventDefault();const u=n[t.shiftKey?n.length-1:0];u&&u.focus()}function AUe(e=!0){const t=I.useRef(),n=I.useRef(null),r=s=>{let o=s.querySelector("[data-autofocus]");if(!o){const a=Array.from(s.querySelectorAll(j1e));o=a.find(U1e)||a.find(zU)||null,!o&&zU(s)&&(o=s)}o&&o.focus({preventScroll:!0})},i=I.useCallback(s=>{if(e){if(s===null){n.current&&(n.current(),n.current=null);return}n.current=wUe(s),t.current!==s&&(s?(setTimeout(()=>{s.getRootNode()&&r(s)}),t.current=s):t.current=null)}},[e]);return I.useEffect(()=>{if(!e)return;t.current&&setTimeout(()=>r(t.current));const s=o=>{o.key==="Tab"&&t.current&&CUe(t.current,o)};return document.addEventListener("keydown",s),()=>{document.removeEventListener("keydown",s),n.current&&n.current()}},[e]),i}const IUe=e=>(e+1)%1e6;function kUe(){const[,e]=I.useReducer(IUe,0);return e}const RUe=_r.useId||(()=>{});function NUe(){const e=RUe();return e?`mantine-${e.replace(/:/g,"")}`:""}function Ta(e){const t=NUe(),[n,r]=I.useState(t);return Rb(()=>{r(Ww())},[]),typeof e=="string"?e:typeof window>"u"?t:n}function z1e(e,t,n){I.useEffect(()=>(window.addEventListener(e,t,n),()=>window.removeEventListener(e,t,n)),[e,t])}function OW(e,t){typeof e=="function"?e(t):typeof e=="object"&&e!==null&&"current"in e&&(e.current=t)}function V1e(...e){return t=>{e.forEach(n=>OW(n,t))}}function hs(...e){return I.useCallback(V1e(...e),e)}function H1e(e,t,n="ltr"){const r=I.useRef(null),i=I.useRef(!1),s=I.useRef(!1),o=I.useRef(0),[a,u]=I.useState(!1);return I.useEffect(()=>{i.current=!0},[]),I.useEffect(()=>{var v,b;const l=({x:w,y:E})=>{cancelAnimationFrame(o.current),o.current=requestAnimationFrame(()=>{if(i.current&&r.current){r.current.style.userSelect="none";const T=r.current.getBoundingClientRect();if(T.width&&T.height){const S=Zd((w-T.left)/T.width,0,1);e({x:n==="ltr"?S:1-S,y:Zd((E-T.top)/T.height,0,1)})}}})},c=()=>{document.addEventListener("mousemove",m),document.addEventListener("mouseup",h),document.addEventListener("touchmove",y),document.addEventListener("touchend",h)},f=()=>{document.removeEventListener("mousemove",m),document.removeEventListener("mouseup",h),document.removeEventListener("touchmove",y),document.removeEventListener("touchend",h)},d=()=>{!s.current&&i.current&&(s.current=!0,typeof(t==null?void 0:t.onScrubStart)=="function"&&t.onScrubStart(),u(!0),c())},h=()=>{s.current&&i.current&&(s.current=!1,u(!1),f(),setTimeout(()=>{typeof(t==null?void 0:t.onScrubEnd)=="function"&&t.onScrubEnd()},0))},p=w=>{d(),w.preventDefault(),m(w)},m=w=>l({x:w.clientX,y:w.clientY}),g=w=>{w.cancelable&&w.preventDefault(),d(),y(w)},y=w=>{w.cancelable&&w.preventDefault(),l({x:w.changedTouches[0].clientX,y:w.changedTouches[0].clientY})};return(v=r.current)==null||v.addEventListener("mousedown",p),(b=r.current)==null||b.addEventListener("touchstart",g,{passive:!1}),()=>{r.current&&(r.current.removeEventListener("mousedown",p),r.current.removeEventListener("touchstart",g))}},[n,e]),{ref:r,active:a}}function Ss({value:e,defaultValue:t,finalValue:n,onChange:r=()=>{}}){const[i,s]=I.useState(t!==void 0?t:n),o=(a,...u)=>{s(a),r==null||r(a,...u)};return e!==void 0?[e,r,!0]:[i,o,!1]}function _L(e,t){return _Ue("(prefers-reduced-motion: reduce)",e,t)}const DUe={x:0,y:0,width:0,height:0,top:0,left:0,bottom:0,right:0};function E1(e){const t=I.useRef(0),n=I.useRef(null),[r,i]=I.useState(DUe),s=I.useMemo(()=>typeof window<"u"?new ResizeObserver(o=>{const a=o[0];a&&(cancelAnimationFrame(t.current),t.current=requestAnimationFrame(()=>{n.current&&i(a.contentRect)}))}):null,[]);return I.useEffect(()=>(n.current&&(s==null||s.observe(n.current,e)),()=>{s==null||s.disconnect(),t.current&&cancelAnimationFrame(t.current)}),[n.current]),[n,r]}function PUe(e){const[t,{width:n,height:r}]=E1(e);return{ref:t,width:n,height:r}}function OUe(e){const t=e.toLowerCase().split("+").map(s=>s.trim()),n={alt:t.includes("alt"),ctrl:t.includes("ctrl"),meta:t.includes("meta"),mod:t.includes("mod"),shift:t.includes("shift")},r=["alt","ctrl","meta","shift","mod"],i=t.find(s=>!r.includes(s));return{...n,key:i}}function $Ue(e,t){const{alt:n,ctrl:r,meta:i,mod:s,shift:o,key:a}=e,{altKey:u,ctrlKey:l,metaKey:c,shiftKey:f,key:d}=t;if(n!==u)return!1;if(s){if(!l&&!c)return!1}else if(r!==l||i!==c)return!1;return o!==f?!1:!!(a&&(d.toLowerCase()===a.toLowerCase()||t.code.replace("Key","").toLowerCase()===a.toLowerCase()))}function MUe(e){return t=>$Ue(OUe(e),t)}function LUe(e){return t=>{const n="nativeEvent"in t?t.nativeEvent:t;e.forEach(([r,i,s={preventDefault:!0}])=>{MUe(r)(n)&&(s.preventDefault&&t.preventDefault(),i(n))})}}function wL(e=!1,t){const{onOpen:n,onClose:r}={},[i,s]=I.useState(e),o=I.useCallback(()=>{s(l=>l||(n==null||n(),!0))},[n]),a=I.useCallback(()=>{s(l=>l&&(r==null||r(),!1))},[r]),u=I.useCallback(()=>{i?a():o()},[a,o,i]);return[i,{open:o,close:a,toggle:u}]}function FUe(e,t,n={autoInvoke:!1}){const r=I.useRef(null),i=I.useCallback((...o)=>{r.current||(r.current=window.setTimeout(()=>{e(o),r.current=null},t))},[t]),s=I.useCallback(()=>{r.current&&(window.clearTimeout(r.current),r.current=null)},[]);return I.useEffect(()=>(n.autoInvoke&&i(),s),[s,i]),{start:i,clear:s}}function jUe(e,t,n){const r=I.useRef(),i=I.useRef(null);return I.useEffect(()=>{const s=typeof n=="function"?n():n;return(s||i.current)&&(r.current=new MutationObserver(e),r.current.observe(s||i.current,t)),()=>{var o;(o=r.current)==null||o.disconnect()}},[e,t]),i}function BUe(){const[e,t]=I.useState(!1);return I.useEffect(()=>t(!0),[]),e}function UUe(e,t){window.dispatchEvent(new CustomEvent(e,{detail:t}))}function zUe(e){function t(r){const i=Object.keys(r).reduce((s,o)=>(s[`${e}:${o}`]=a=>r[o](a.detail),s),{});Rb(()=>(Object.keys(i).forEach(s=>{window.removeEventListener(s,i[s]),window.addEventListener(s,i[s])}),()=>Object.keys(i).forEach(s=>{window.removeEventListener(s,i[s])})),[i])}function n(r){return(...i)=>UUe(`${e}:${String(r)}`,i[0])}return[t,n]}var VUe={};function q1e(){return typeof process<"u"&&VUe?"production":"development"}function W1e(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(n=W1e(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function Xi(){for(var e,t,n=0,r="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=W1e(e))&&(r&&(r+=" "),r+=t);return r}const HUe={};function qUe(e){const t={};return e.forEach(n=>{Object.entries(n).forEach(([r,i])=>{t[r]?t[r]=Xi(t[r],i):t[r]=i})}),t}function EL({theme:e,classNames:t,props:n,stylesCtx:r}){const s=(Array.isArray(t)?t:[t]).map(o=>typeof o=="function"?o(e,n,r):o||HUe);return qUe(s)}function zO({theme:e,styles:t,props:n,stylesCtx:r}){return(Array.isArray(t)?t:[t]).reduce((s,o)=>typeof o=="function"?{...s,...o(e,n,r)}:{...s,...o},{})}const G1e=I.createContext(null);function ky(){const e=I.useContext(G1e);if(!e)throw new Error("[@mantine/core] MantineProvider was not found in tree");return e}function WUe(){return ky().cssVariablesResolver}function GUe(){return ky().classNamesPrefix}function $W(){return ky().getStyleNonce}function YUe(){return ky().withStaticClasses}function KUe(){return ky().headless}function XUe(){var e;return(e=ky().stylesTransform)==null?void 0:e.sx}function QUe(){var e;return(e=ky().stylesTransform)==null?void 0:e.styles}function JUe(e){return/^#?([0-9A-F]{3}){1,2}([0-9A-F]{2})?$/i.test(e)}function ZUe(e){let t=e.replace("#","");if(t.length===3){const o=t.split("");t=[o[0],o[0],o[1],o[1],o[2],o[2]].join("")}if(t.length===8){const o=parseInt(t.slice(6,8),16)/255;return{r:parseInt(t.slice(0,2),16),g:parseInt(t.slice(2,4),16),b:parseInt(t.slice(4,6),16),a:o}}const n=parseInt(t,16),r=n>>16&255,i=n>>8&255,s=n&255;return{r,g:i,b:s,a:1}}function e7e(e){const[t,n,r,i]=e.replace(/[^0-9,./]/g,"").split(/[/,]/).map(Number);return{r:t,g:n,b:r,a:i||1}}function t7e(e){const t=/^hsla?\(\s*(\d+)\s*,\s*(\d+%)\s*,\s*(\d+%)\s*(,\s*(0?\.\d+|\d+(\.\d+)?))?\s*\)$/i,n=e.match(t);if(!n)return{r:0,g:0,b:0,a:1};const r=parseInt(n[1],10),i=parseInt(n[2],10)/100,s=parseInt(n[3],10)/100,o=n[5]?parseFloat(n[5]):void 0,a=(1-Math.abs(2*s-1))*i,u=r/60,l=a*(1-Math.abs(u%2-1)),c=s-a/2;let f,d,h;return u>=0&&u<1?(f=a,d=l,h=0):u>=1&&u<2?(f=l,d=a,h=0):u>=2&&u<3?(f=0,d=a,h=l):u>=3&&u<4?(f=0,d=l,h=a):u>=4&&u<5?(f=l,d=0,h=a):(f=a,d=0,h=l),{r:Math.round((f+c)*255),g:Math.round((d+c)*255),b:Math.round((h+c)*255),a:o||1}}function MW(e){return JUe(e)?ZUe(e):e.startsWith("rgb")?e7e(e):e.startsWith("hsl")?t7e(e):{r:0,g:0,b:0,a:1}}function TN(e,t){if(e.startsWith("var("))return`color-mix(in srgb, ${e}, black ${t*100}%)`;const{r:n,g:r,b:i,a:s}=MW(e),o=1-t,a=u=>Math.round(u*o);return`rgba(${a(n)}, ${a(r)}, ${a(i)}, ${s})`}function TA(e,t){return typeof e.primaryShade=="number"?e.primaryShade:t==="dark"?e.primaryShade.dark:e.primaryShade.light}function kj(e){return e<=.03928?e/12.92:((e+.055)/1.055)**2.4}function n7e(e){const t=e.match(/oklch\((.*?)%\s/);return t?parseFloat(t[1]):null}function r7e(e){if(e.startsWith("oklch("))return(n7e(e)||0)/100;const{r:t,g:n,b:r}=MW(e),i=t/255,s=n/255,o=r/255,a=kj(i),u=kj(s),l=kj(o);return .2126*a+.7152*u+.0722*l}function _T(e,t=.179){return e.startsWith("var(")?!1:r7e(e)>t}function Vh({color:e,theme:t,colorScheme:n}){if(typeof e!="string")throw new Error(`[@mantine/core] Failed to parse color. Expected color to be a string, instead got ${typeof e}`);if(e==="bright")return{color:e,value:n==="dark"?t.white:t.black,shade:void 0,isThemeColor:!1,isLight:_T(n==="dark"?t.white:t.black,t.luminanceThreshold),variable:"--mantine-color-bright"};if(e==="dimmed")return{color:e,value:n==="dark"?t.colors.dark[2]:t.colors.gray[7],shade:void 0,isThemeColor:!1,isLight:_T(n==="dark"?t.colors.dark[2]:t.colors.gray[6],t.luminanceThreshold),variable:"--mantine-color-dimmed"};if(e==="white"||e==="black")return{color:e,value:e==="white"?t.white:t.black,shade:void 0,isThemeColor:!1,isLight:_T(e==="white"?t.white:t.black,t.luminanceThreshold),variable:`--mantine-color-${e}`};const[r,i]=e.split("."),s=i?Number(i):void 0,o=r in t.colors;if(o){const a=s!==void 0?t.colors[r][s]:t.colors[r][TA(t,n||"light")];return{color:r,value:a,shade:s,isThemeColor:o,isLight:_T(a,t.luminanceThreshold),variable:i?`--mantine-color-${r}-${s}`:`--mantine-color-${r}-filled`}}return{color:e,value:e,isThemeColor:o,isLight:_T(e,t.luminanceThreshold),shade:s,variable:void 0}}function $r(e,t){const n=Vh({color:e||t.primaryColor,theme:t});return n.variable?`var(${n.variable})`:e}function VU(e,t){const n={from:(e==null?void 0:e.from)||t.defaultGradient.from,to:(e==null?void 0:e.to)||t.defaultGradient.to,deg:(e==null?void 0:e.deg)||t.defaultGradient.deg||0},r=$r(n.from,t),i=$r(n.to,t);return`linear-gradient(${n.deg}deg, ${r} 0%, ${i} 100%)`}function Rd(e,t){if(typeof e!="string"||t>1||t<0)return"rgba(0, 0, 0, 1)";if(e.startsWith("var(")){const s=(1-t)*100;return`color-mix(in srgb, ${e}, transparent ${s}%)`}if(e.startsWith("oklch"))return e.includes("/")?e.replace(/\/\s*[\d.]+\s*\)/,`/ ${t})`):e.replace(")",` / ${t})`);const{r:n,g:r,b:i}=MW(e);return`rgba(${n}, ${r}, ${i}, ${t})`}const C_=Rd,i7e=({color:e,theme:t,variant:n,gradient:r,autoContrast:i})=>{const s=Vh({color:e,theme:t}),o=typeof i=="boolean"?i:t.autoContrast;if(n==="filled"){const a=o&&s.isLight?"var(--mantine-color-black)":"var(--mantine-color-white)";return s.isThemeColor?s.shade===void 0?{background:`var(--mantine-color-${e}-filled)`,hover:`var(--mantine-color-${e}-filled-hover)`,color:a,border:`${Te(1)} solid transparent`}:{background:`var(--mantine-color-${s.color}-${s.shade})`,hover:`var(--mantine-color-${s.color}-${s.shade===9?8:s.shade+1})`,color:a,border:`${Te(1)} solid transparent`}:{background:e,hover:TN(e,.1),color:a,border:`${Te(1)} solid transparent`}}if(n==="light"){if(s.isThemeColor){if(s.shade===void 0)return{background:`var(--mantine-color-${e}-light)`,hover:`var(--mantine-color-${e}-light-hover)`,color:`var(--mantine-color-${e}-light-color)`,border:`${Te(1)} solid transparent`};const a=t.colors[s.color][s.shade];return{background:Rd(a,.1),hover:Rd(a,.12),color:`var(--mantine-color-${s.color}-${Math.min(s.shade,6)})`,border:`${Te(1)} solid transparent`}}return{background:Rd(e,.1),hover:Rd(e,.12),color:e,border:`${Te(1)} solid transparent`}}if(n==="outline")return s.isThemeColor?s.shade===void 0?{background:"transparent",hover:`var(--mantine-color-${e}-outline-hover)`,color:`var(--mantine-color-${e}-outline)`,border:`${Te(1)} solid var(--mantine-color-${e}-outline)`}:{background:"transparent",hover:Rd(t.colors[s.color][s.shade],.05),color:`var(--mantine-color-${s.color}-${s.shade})`,border:`${Te(1)} solid var(--mantine-color-${s.color}-${s.shade})`}:{background:"transparent",hover:Rd(e,.05),color:e,border:`${Te(1)} solid ${e}`};if(n==="subtle"){if(s.isThemeColor){if(s.shade===void 0)return{background:"transparent",hover:`var(--mantine-color-${e}-light-hover)`,color:`var(--mantine-color-${e}-light-color)`,border:`${Te(1)} solid transparent`};const a=t.colors[s.color][s.shade];return{background:"transparent",hover:Rd(a,.12),color:`var(--mantine-color-${s.color}-${Math.min(s.shade,6)})`,border:`${Te(1)} solid transparent`}}return{background:"transparent",hover:Rd(e,.12),color:e,border:`${Te(1)} solid transparent`}}return n==="transparent"?s.isThemeColor?s.shade===void 0?{background:"transparent",hover:"transparent",color:`var(--mantine-color-${e}-light-color)`,border:`${Te(1)} solid transparent`}:{background:"transparent",hover:"transparent",color:`var(--mantine-color-${s.color}-${Math.min(s.shade,6)})`,border:`${Te(1)} solid transparent`}:{background:"transparent",hover:"transparent",color:e,border:`${Te(1)} solid transparent`}:n==="white"?s.isThemeColor?s.shade===void 0?{background:"var(--mantine-color-white)",hover:TN(t.white,.01),color:`var(--mantine-color-${e}-filled)`,border:`${Te(1)} solid transparent`}:{background:"var(--mantine-color-white)",hover:TN(t.white,.01),color:`var(--mantine-color-${s.color}-${s.shade})`,border:`${Te(1)} solid transparent`}:{background:"var(--mantine-color-white)",hover:TN(t.white,.01),color:e,border:`${Te(1)} solid transparent`}:n==="gradient"?{background:VU(r,t),hover:VU(r,t),color:"var(--mantine-color-white)",border:"none"}:n==="default"?{background:"var(--mantine-color-default)",hover:"var(--mantine-color-default-hover)",color:"var(--mantine-color-default-color)",border:`${Te(1)} solid var(--mantine-color-default-border)`}:{}},s7e={dark:["#C9C9C9","#b8b8b8","#828282","#696969","#424242","#3b3b3b","#2e2e2e","#242424","#1f1f1f","#141414"],gray:["#f8f9fa","#f1f3f5","#e9ecef","#dee2e6","#ced4da","#adb5bd","#868e96","#495057","#343a40","#212529"],red:["#fff5f5","#ffe3e3","#ffc9c9","#ffa8a8","#ff8787","#ff6b6b","#fa5252","#f03e3e","#e03131","#c92a2a"],pink:["#fff0f6","#ffdeeb","#fcc2d7","#faa2c1","#f783ac","#f06595","#e64980","#d6336c","#c2255c","#a61e4d"],grape:["#f8f0fc","#f3d9fa","#eebefa","#e599f7","#da77f2","#cc5de8","#be4bdb","#ae3ec9","#9c36b5","#862e9c"],violet:["#f3f0ff","#e5dbff","#d0bfff","#b197fc","#9775fa","#845ef7","#7950f2","#7048e8","#6741d9","#5f3dc4"],indigo:["#edf2ff","#dbe4ff","#bac8ff","#91a7ff","#748ffc","#5c7cfa","#4c6ef5","#4263eb","#3b5bdb","#364fc7"],blue:["#e7f5ff","#d0ebff","#a5d8ff","#74c0fc","#4dabf7","#339af0","#228be6","#1c7ed6","#1971c2","#1864ab"],cyan:["#e3fafc","#c5f6fa","#99e9f2","#66d9e8","#3bc9db","#22b8cf","#15aabf","#1098ad","#0c8599","#0b7285"],teal:["#e6fcf5","#c3fae8","#96f2d7","#63e6be","#38d9a9","#20c997","#12b886","#0ca678","#099268","#087f5b"],green:["#ebfbee","#d3f9d8","#b2f2bb","#8ce99a","#69db7c","#51cf66","#40c057","#37b24d","#2f9e44","#2b8a3e"],lime:["#f4fce3","#e9fac8","#d8f5a2","#c0eb75","#a9e34b","#94d82d","#82c91e","#74b816","#66a80f","#5c940d"],yellow:["#fff9db","#fff3bf","#ffec99","#ffe066","#ffd43b","#fcc419","#fab005","#f59f00","#f08c00","#e67700"],orange:["#fff4e6","#ffe8cc","#ffd8a8","#ffc078","#ffa94d","#ff922b","#fd7e14","#f76707","#e8590c","#d9480f"]},soe="-apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Helvetica, Arial, sans-serif, Apple Color Emoji, Segoe UI Emoji",LW={scale:1,fontSmoothing:!0,focusRing:"auto",white:"#fff",black:"#000",colors:s7e,primaryShade:{light:6,dark:8},primaryColor:"blue",variantColorResolver:i7e,autoContrast:!1,luminanceThreshold:.3,fontFamily:soe,fontFamilyMonospace:"ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, Liberation Mono, Courier New, monospace",respectReducedMotion:!1,cursorType:"default",defaultGradient:{from:"blue",to:"cyan",deg:45},defaultRadius:"sm",activeClassName:"mantine-active",focusClassName:"",headings:{fontFamily:soe,fontWeight:"700",textWrap:"wrap",sizes:{h1:{fontSize:Te(34),lineHeight:"1.3"},h2:{fontSize:Te(26),lineHeight:"1.35"},h3:{fontSize:Te(22),lineHeight:"1.4"},h4:{fontSize:Te(18),lineHeight:"1.45"},h5:{fontSize:Te(16),lineHeight:"1.5"},h6:{fontSize:Te(14),lineHeight:"1.5"}}},fontSizes:{xs:Te(12),sm:Te(14),md:Te(16),lg:Te(18),xl:Te(20)},lineHeights:{xs:"1.4",sm:"1.45",md:"1.55",lg:"1.6",xl:"1.65"},radius:{xs:Te(2),sm:Te(4),md:Te(8),lg:Te(16),xl:Te(32)},spacing:{xs:Te(10),sm:Te(12),md:Te(16),lg:Te(20),xl:Te(32)},breakpoints:{xs:"36em",sm:"48em",md:"62em",lg:"75em",xl:"88em"},shadows:{xs:`0 ${Te(1)} ${Te(3)} rgba(0, 0, 0, 0.05), 0 ${Te(1)} ${Te(2)} rgba(0, 0, 0, 0.1)`,sm:`0 ${Te(1)} ${Te(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${Te(10)} ${Te(15)} ${Te(-5)}, rgba(0, 0, 0, 0.04) 0 ${Te(7)} ${Te(7)} ${Te(-5)}`,md:`0 ${Te(1)} ${Te(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${Te(20)} ${Te(25)} ${Te(-5)}, rgba(0, 0, 0, 0.04) 0 ${Te(10)} ${Te(10)} ${Te(-5)}`,lg:`0 ${Te(1)} ${Te(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${Te(28)} ${Te(23)} ${Te(-7)}, rgba(0, 0, 0, 0.04) 0 ${Te(12)} ${Te(12)} ${Te(-7)}`,xl:`0 ${Te(1)} ${Te(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${Te(36)} ${Te(28)} ${Te(-7)}, rgba(0, 0, 0, 0.04) 0 ${Te(17)} ${Te(17)} ${Te(-7)}`},other:{},components:{}};function ooe(e){return e==="auto"||e==="dark"||e==="light"}function o7e({key:e="mantine-color-scheme-value"}={}){let t;return{get:n=>{if(typeof window>"u")return n;try{const r=window.localStorage.getItem(e);return ooe(r)?r:n}catch{return n}},set:n=>{try{window.localStorage.setItem(e,n)}catch(r){console.warn("[@mantine/core] Local storage color scheme manager was unable to save color scheme.",r)}},subscribe:n=>{t=r=>{r.storageArea===window.localStorage&&r.key===e&&ooe(r.newValue)&&n(r.newValue)},window.addEventListener("storage",t)},unsubscribe:()=>{window.removeEventListener("storage",t)},clear:()=>{window.localStorage.removeItem(e)}}}const a7e="[@mantine/core] MantineProvider: Invalid theme.primaryColor, it accepts only key of theme.colors, learn more  https://mantine.dev/theming/colors/#primary-color",aoe="[@mantine/core] MantineProvider: Invalid theme.primaryShade, it accepts only 0-9 integers or an object { light: 0-9, dark: 0-9 }";function Rj(e){return e<0||e>9?!1:parseInt(e.toString(),10)===e}function uoe(e){if(!(e.primaryColor in e.colors))throw new Error(a7e);if(typeof e.primaryShade=="object"&&(!Rj(e.primaryShade.dark)||!Rj(e.primaryShade.light)))throw new Error(aoe);if(typeof e.primaryShade=="number"&&!Rj(e.primaryShade))throw new Error(aoe)}function u7e(e,t){var r;if(!t)return uoe(e),e;const n=RW(e,t);return t.fontFamily&&!((r=t.headings)!=null&&r.fontFamily)&&(n.headings.fontFamily=t.fontFamily),uoe(n),n}const FW=I.createContext(null),l7e=()=>I.useContext(FW)||LW;function ps(){const e=I.useContext(FW);if(!e)throw new Error("@mantine/core: MantineProvider was not found in component tree, make sure you have it in your app");return e}function Y1e({theme:e,children:t,inherit:n=!0}){const r=l7e(),i=I.useMemo(()=>u7e(n?r:LW,e),[e,r,n]);return _.jsx(FW.Provider,{value:i,children:t})}Y1e.displayName="@mantine/core/MantineThemeProvider";function c7e(){const e=ps(),t=$W(),n=Xr(e.breakpoints).reduce((r,i)=>{const s=e.breakpoints[i].includes("px"),o=xA(e.breakpoints[i]),a=s?`${o-.1}px`:jO(o-.1),u=s?`${o}px`:jO(o);return`${r}@media (max-width: ${a}) {.mantine-visible-from-${i} {display: none !important;}}@media (min-width: ${u}) {.mantine-hidden-from-${i} {display: none !important;}}`},"");return _.jsx("style",{"data-mantine-styles":"classes",nonce:t==null?void 0:t(),dangerouslySetInnerHTML:{__html:n}})}function Nj(e){return Object.entries(e).map(([t,n])=>`${t}: ${n};`).join("")}function Dj(e,t){return(Array.isArray(e)?e:[e]).reduce((r,i)=>`${i}{${r}}`,t)}function f7e(e,t){const n=Nj(e.variables),r=n?Dj(t,n):"",i=Nj(e.dark),s=i?Dj(`${t}[data-mantine-color-scheme="dark"]`,i):"",o=Nj(e.light),a=o?Dj(`${t}[data-mantine-color-scheme="light"]`,o):"";return`${r}${s}${a}`}function Ry({color:e,theme:t,autoContrast:n}){return(typeof n=="boolean"?n:t.autoContrast)&&Vh({color:e||t.primaryColor,theme:t}).isLight?"var(--mantine-color-black)":"var(--mantine-color-white)"}function loe(e,t){return Ry({color:e.colors[e.primaryColor][TA(e,t)],theme:e,autoContrast:null})}function CN({theme:e,color:t,colorScheme:n,name:r=t,withColorValues:i=!0}){if(!e.colors[t])return{};if(n==="light"){const a=TA(e,"light"),u={[`--mantine-color-${r}-text`]:`var(--mantine-color-${r}-filled)`,[`--mantine-color-${r}-filled`]:`var(--mantine-color-${r}-${a})`,[`--mantine-color-${r}-filled-hover`]:`var(--mantine-color-${r}-${a===9?8:a+1})`,[`--mantine-color-${r}-light`]:C_(e.colors[t][a],.1),[`--mantine-color-${r}-light-hover`]:C_(e.colors[t][a],.12),[`--mantine-color-${r}-light-color`]:`var(--mantine-color-${r}-${a})`,[`--mantine-color-${r}-outline`]:`var(--mantine-color-${r}-${a})`,[`--mantine-color-${r}-outline-hover`]:C_(e.colors[t][a],.05)};return i?{[`--mantine-color-${r}-0`]:e.colors[t][0],[`--mantine-color-${r}-1`]:e.colors[t][1],[`--mantine-color-${r}-2`]:e.colors[t][2],[`--mantine-color-${r}-3`]:e.colors[t][3],[`--mantine-color-${r}-4`]:e.colors[t][4],[`--mantine-color-${r}-5`]:e.colors[t][5],[`--mantine-color-${r}-6`]:e.colors[t][6],[`--mantine-color-${r}-7`]:e.colors[t][7],[`--mantine-color-${r}-8`]:e.colors[t][8],[`--mantine-color-${r}-9`]:e.colors[t][9],...u}:u}const s=TA(e,"dark"),o={[`--mantine-color-${r}-text`]:`var(--mantine-color-${r}-4)`,[`--mantine-color-${r}-filled`]:`var(--mantine-color-${r}-${s})`,[`--mantine-color-${r}-filled-hover`]:`var(--mantine-color-${r}-${s===9?8:s+1})`,[`--mantine-color-${r}-light`]:C_(e.colors[t][Math.max(0,s-2)],.15),[`--mantine-color-${r}-light-hover`]:C_(e.colors[t][Math.max(0,s-2)],.2),[`--mantine-color-${r}-light-color`]:`var(--mantine-color-${r}-${Math.max(s-5,0)})`,[`--mantine-color-${r}-outline`]:`var(--mantine-color-${r}-${Math.max(s-4,0)})`,[`--mantine-color-${r}-outline-hover`]:C_(e.colors[t][Math.max(s-4,0)],.05)};return i?{[`--mantine-color-${r}-0`]:e.colors[t][0],[`--mantine-color-${r}-1`]:e.colors[t][1],[`--mantine-color-${r}-2`]:e.colors[t][2],[`--mantine-color-${r}-3`]:e.colors[t][3],[`--mantine-color-${r}-4`]:e.colors[t][4],[`--mantine-color-${r}-5`]:e.colors[t][5],[`--mantine-color-${r}-6`]:e.colors[t][6],[`--mantine-color-${r}-7`]:e.colors[t][7],[`--mantine-color-${r}-8`]:e.colors[t][8],[`--mantine-color-${r}-9`]:e.colors[t][9],...o}:o}function d7e(e){return Array.isArray(e)?e:Array(10).fill(e)}function h7e(e){return!!e&&typeof e=="object"&&"mantine-virtual-color"in e}function A_(e,t,n){Xr(t).forEach(r=>Object.assign(e,{[`--mantine-${n}-${r}`]:t[r]}))}const K1e=e=>{const t=TA(e,"light"),n=e.defaultRadius in e.radius?e.radius[e.defaultRadius]:Te(e.defaultRadius),r={variables:{"--mantine-scale":e.scale.toString(),"--mantine-cursor-type":e.cursorType,"--mantine-color-scheme":"light dark","--mantine-webkit-font-smoothing":e.fontSmoothing?"antialiased":"unset","--mantine-moz-font-smoothing":e.fontSmoothing?"grayscale":"unset","--mantine-color-white":e.white,"--mantine-color-black":e.black,"--mantine-line-height":e.lineHeights.md,"--mantine-font-family":e.fontFamily,"--mantine-font-family-monospace":e.fontFamilyMonospace,"--mantine-font-family-headings":e.headings.fontFamily,"--mantine-heading-font-weight":e.headings.fontWeight,"--mantine-heading-text-wrap":e.headings.textWrap,"--mantine-radius-default":n,"--mantine-primary-color-filled":`var(--mantine-color-${e.primaryColor}-filled)`,"--mantine-primary-color-filled-hover":`var(--mantine-color-${e.primaryColor}-filled-hover)`,"--mantine-primary-color-light":`var(--mantine-color-${e.primaryColor}-light)`,"--mantine-primary-color-light-hover":`var(--mantine-color-${e.primaryColor}-light-hover)`,"--mantine-primary-color-light-color":`var(--mantine-color-${e.primaryColor}-light-color)`},light:{"--mantine-primary-color-contrast":loe(e,"light"),"--mantine-color-bright":"var(--mantine-color-black)","--mantine-color-text":e.black,"--mantine-color-body":e.white,"--mantine-color-error":"var(--mantine-color-red-6)","--mantine-color-placeholder":"var(--mantine-color-gray-5)","--mantine-color-anchor":`var(--mantine-color-${e.primaryColor}-${t})`,"--mantine-color-default":"var(--mantine-color-white)","--mantine-color-default-hover":"var(--mantine-color-gray-0)","--mantine-color-default-color":"var(--mantine-color-black)","--mantine-color-default-border":"var(--mantine-color-gray-4)","--mantine-color-dimmed":"var(--mantine-color-gray-6)"},dark:{"--mantine-primary-color-contrast":loe(e,"dark"),"--mantine-color-bright":"var(--mantine-color-white)","--mantine-color-text":"var(--mantine-color-dark-0)","--mantine-color-body":"var(--mantine-color-dark-7)","--mantine-color-error":"var(--mantine-color-red-8)","--mantine-color-placeholder":"var(--mantine-color-dark-3)","--mantine-color-anchor":`var(--mantine-color-${e.primaryColor}-4)`,"--mantine-color-default":"var(--mantine-color-dark-6)","--mantine-color-default-hover":"var(--mantine-color-dark-5)","--mantine-color-default-color":"var(--mantine-color-white)","--mantine-color-default-border":"var(--mantine-color-dark-4)","--mantine-color-dimmed":"var(--mantine-color-dark-2)"}};A_(r.variables,e.breakpoints,"breakpoint"),A_(r.variables,e.spacing,"spacing"),A_(r.variables,e.fontSizes,"font-size"),A_(r.variables,e.lineHeights,"line-height"),A_(r.variables,e.shadows,"shadow"),A_(r.variables,e.radius,"radius"),e.colors[e.primaryColor].forEach((s,o)=>{r.variables[`--mantine-primary-color-${o}`]=`var(--mantine-color-${e.primaryColor}-${o})`}),Xr(e.colors).forEach(s=>{const o=e.colors[s];if(h7e(o)){Object.assign(r.light,CN({theme:e,name:o.name,color:o.light,colorScheme:"light",withColorValues:!0})),Object.assign(r.dark,CN({theme:e,name:o.name,color:o.dark,colorScheme:"dark",withColorValues:!0}));return}o.forEach((a,u)=>{r.variables[`--mantine-color-${s}-${u}`]=a}),Object.assign(r.light,CN({theme:e,color:s,colorScheme:"light",withColorValues:!1})),Object.assign(r.dark,CN({theme:e,color:s,colorScheme:"dark",withColorValues:!1}))});const i=e.headings.sizes;return Xr(i).forEach(s=>{r.variables[`--mantine-${s}-font-size`]=i[s].fontSize,r.variables[`--mantine-${s}-line-height`]=i[s].lineHeight,r.variables[`--mantine-${s}-font-weight`]=i[s].fontWeight||e.headings.fontWeight}),r};function p7e({theme:e,generator:t}){const n=K1e(e),r=t==null?void 0:t(e);return r?RW(n,r):n}const Pj=K1e(LW);function m7e(e){const t={variables:{},light:{},dark:{}};return Xr(e.variables).forEach(n=>{Pj.variables[n]!==e.variables[n]&&(t.variables[n]=e.variables[n])}),Xr(e.light).forEach(n=>{Pj.light[n]!==e.light[n]&&(t.light[n]=e.light[n])}),Xr(e.dark).forEach(n=>{Pj.dark[n]!==e.dark[n]&&(t.dark[n]=e.dark[n])}),t}function g7e(e){return`
  ${e}[data-mantine-color-scheme="dark"] { --mantine-color-scheme: dark; }
  ${e}[data-mantine-color-scheme="light"] { --mantine-color-scheme: light; }
`}function X1e({cssVariablesSelector:e,deduplicateCssVariables:t}){const n=ps(),r=$W(),i=WUe(),s=p7e({theme:n,generator:i}),o=e===":root"&&t,a=o?m7e(s):s,u=f7e(a,e);return u?_.jsx("style",{"data-mantine-styles":!0,nonce:r==null?void 0:r(),dangerouslySetInnerHTML:{__html:`${u}${o?"":g7e(e)}`}}):null}X1e.displayName="@mantine/CssVariables";function y7e(){const e=console.error;console.error=(...t)=>{t.length>1&&typeof t[0]=="string"&&t[0].toLowerCase().includes("extra attributes from the server")&&typeof t[1]=="string"&&t[1].toLowerCase().includes("data-mantine-color-scheme")||e(...t)}}function I_(e,t){var r;const n=e!=="auto"?e:window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";(r=t())==null||r.setAttribute("data-mantine-color-scheme",n)}function v7e({manager:e,defaultColorScheme:t,getRootElement:n,forceColorScheme:r}){const i=I.useRef(),[s,o]=I.useState(()=>e.get(t)),a=r||s,u=I.useCallback(c=>{r||(I_(c,n),o(c),e.set(c))},[e.set,a,r]),l=I.useCallback(()=>{o(t),I_(t,n),e.clear()},[e.clear,t]);return I.useEffect(()=>(e.subscribe(u),e.unsubscribe),[e.subscribe,e.unsubscribe]),Rb(()=>{I_(e.get(t),n)},[]),I.useEffect(()=>{var f;if(r)return I_(r,n),()=>{};r===void 0&&I_(s,n),i.current=window.matchMedia("(prefers-color-scheme: dark)");const c=d=>{s==="auto"&&I_(d.matches?"dark":"light",n)};return(f=i.current)==null||f.addEventListener("change",c),()=>{var d;return(d=i.current)==null?void 0:d.removeEventListener("change",c)}},[s,r]),{colorScheme:a,setColorScheme:u,clearColorScheme:l}}function b7e({respectReducedMotion:e,getRootElement:t}){Rb(()=>{var n;e&&((n=t())==null||n.setAttribute("data-respect-reduced-motion","true"))},[e])}y7e();function Q1e({theme:e,children:t,getStyleNonce:n,withStaticClasses:r=!0,withGlobalClasses:i=!0,deduplicateCssVariables:s=!0,withCssVariables:o=!0,cssVariablesSelector:a=":root",classNamesPrefix:u="mantine",colorSchemeManager:l=o7e(),defaultColorScheme:c="light",getRootElement:f=()=>document.documentElement,cssVariablesResolver:d,forceColorScheme:h,stylesTransform:p}){const{colorScheme:m,setColorScheme:g,clearColorScheme:y}=v7e({defaultColorScheme:c,forceColorScheme:h,manager:l,getRootElement:f});return b7e({respectReducedMotion:(e==null?void 0:e.respectReducedMotion)||!1,getRootElement:f}),_.jsx(G1e.Provider,{value:{colorScheme:m,setColorScheme:g,clearColorScheme:y,getRootElement:f,classNamesPrefix:u,getStyleNonce:n,cssVariablesResolver:d,cssVariablesSelector:a,withStaticClasses:r,stylesTransform:p},children:_.jsxs(Y1e,{theme:e,children:[o&&_.jsx(X1e,{cssVariablesSelector:a,deduplicateCssVariables:s}),i&&_.jsx(c7e,{}),t]})})}Q1e.displayName="@mantine/core/MantineProvider";function Vm({classNames:e,styles:t,props:n,stylesCtx:r}){const i=ps();return{resolvedClassNames:EL({theme:i,classNames:e,props:n,stylesCtx:r||void 0}),resolvedStyles:zO({theme:i,styles:t,props:n,stylesCtx:r||void 0})}}const _7e={always:"mantine-focus-always",auto:"mantine-focus-auto",never:"mantine-focus-never"};function w7e({theme:e,options:t,unstyled:n}){return Xi((t==null?void 0:t.focusable)&&!n&&(e.focusClassName||_7e[e.focusRing]),(t==null?void 0:t.active)&&!n&&e.activeClassName)}function E7e({selector:e,stylesCtx:t,options:n,props:r,theme:i}){return EL({theme:i,classNames:n==null?void 0:n.classNames,props:(n==null?void 0:n.props)||r,stylesCtx:t})[e]}function coe({selector:e,stylesCtx:t,theme:n,classNames:r,props:i}){return EL({theme:n,classNames:r,props:i,stylesCtx:t})[e]}function x7e({rootSelector:e,selector:t,className:n}){return e===t?n:void 0}function S7e({selector:e,classes:t,unstyled:n}){return n?void 0:t[e]}function T7e({themeName:e,classNamesPrefix:t,selector:n,withStaticClass:r}){return r===!1?[]:e.map(i=>`${t}-${i}-${n}`)}function C7e({themeName:e,theme:t,selector:n,props:r,stylesCtx:i}){return e.map(s=>{var o,a;return(a=EL({theme:t,classNames:(o=t.components[s])==null?void 0:o.classNames,props:r,stylesCtx:i}))==null?void 0:a[n]})}function A7e({options:e,classes:t,selector:n,unstyled:r}){return e!=null&&e.variant&&!r?t[`${n}--${e.variant}`]:void 0}function I7e({theme:e,options:t,themeName:n,selector:r,classNamesPrefix:i,classNames:s,classes:o,unstyled:a,className:u,rootSelector:l,props:c,stylesCtx:f,withStaticClasses:d,headless:h,transformedStyles:p}){return Xi(w7e({theme:e,options:t,unstyled:a||h}),C7e({theme:e,themeName:n,selector:r,props:c,stylesCtx:f}),A7e({options:t,classes:o,selector:r,unstyled:a}),coe({selector:r,stylesCtx:f,theme:e,classNames:s,props:c}),coe({selector:r,stylesCtx:f,theme:e,classNames:p,props:c}),E7e({selector:r,stylesCtx:f,options:t,props:c,theme:e}),x7e({rootSelector:l,selector:r,className:u}),S7e({selector:r,classes:o,unstyled:a||h}),d&&!h&&T7e({themeName:n,classNamesPrefix:i,selector:r,withStaticClass:t==null?void 0:t.withStaticClass}),t==null?void 0:t.className)}function k7e({theme:e,themeName:t,props:n,stylesCtx:r,selector:i}){return t.map(s=>{var o;return zO({theme:e,styles:(o=e.components[s])==null?void 0:o.styles,props:n,stylesCtx:r})[i]}).reduce((s,o)=>({...s,...o}),{})}function HU({style:e,theme:t}){return Array.isArray(e)?[...e].reduce((n,r)=>({...n,...HU({style:r,theme:t})}),{}):typeof e=="function"?e(t):e??{}}function R7e(e){return e.reduce((t,n)=>(n&&Object.keys(n).forEach(r=>{t[r]={...t[r],...Ay(n[r])}}),t),{})}function N7e({vars:e,varsResolver:t,theme:n,props:r,stylesCtx:i,selector:s,themeName:o,headless:a}){var u;return(u=R7e([a?{}:t==null?void 0:t(n,r,i),...o.map(l=>{var c,f,d;return(d=(f=(c=n.components)==null?void 0:c[l])==null?void 0:f.vars)==null?void 0:d.call(f,n,r,i)}),e==null?void 0:e(n,r,i)]))==null?void 0:u[s]}function D7e({theme:e,themeName:t,selector:n,options:r,props:i,stylesCtx:s,rootSelector:o,styles:a,style:u,vars:l,varsResolver:c,headless:f,withStylesTransform:d}){return{...!d&&k7e({theme:e,themeName:t,props:i,stylesCtx:s,selector:n}),...!d&&zO({theme:e,styles:a,props:i,stylesCtx:s})[n],...!d&&zO({theme:e,styles:r==null?void 0:r.styles,props:(r==null?void 0:r.props)||i,stylesCtx:s})[n],...N7e({theme:e,props:i,stylesCtx:s,vars:l,varsResolver:c,selector:n,themeName:t,headless:f}),...o===n?HU({style:u,theme:e}):null,...HU({style:r==null?void 0:r.style,theme:e})}}function P7e({props:e,stylesCtx:t,themeName:n}){var o;const r=ps(),i=(o=QUe())==null?void 0:o();return{getTransformedStyles:a=>i?[...a.map(l=>i(l,{props:e,theme:r,ctx:t})),...n.map(l=>{var c;return i((c=r.components[l])==null?void 0:c.styles,{props:e,theme:r,ctx:t})})].filter(Boolean):[],withStylesTransform:!!i}}function dt({name:e,classes:t,props:n,stylesCtx:r,className:i,style:s,rootSelector:o="root",unstyled:a,classNames:u,styles:l,vars:c,varsResolver:f}){const d=ps(),h=GUe(),p=YUe(),m=KUe(),g=(Array.isArray(e)?e:[e]).filter(b=>b),{withStylesTransform:y,getTransformedStyles:v}=P7e({props:n,stylesCtx:r,themeName:g});return(b,w)=>({className:I7e({theme:d,options:w,themeName:g,selector:b,classNamesPrefix:h,classNames:u,classes:t,unstyled:a,className:i,rootSelector:o,props:n,stylesCtx:r,withStaticClasses:p,headless:m,transformedStyles:v([w==null?void 0:w.styles,l])}),style:D7e({theme:d,themeName:g,selector:b,options:w,props:n,stylesCtx:r,rootSelector:o,styles:l,style:s,vars:c,varsResolver:f,headless:m,withStylesTransform:y})})}function Yx(e,t){return typeof e=="boolean"?e:t.autoContrast}function xe(e,t,n){var o;const r=ps(),i=(o=r.components[e])==null?void 0:o.defaultProps,s=typeof i=="function"?i(r):i;return{...t,...s,...Ay(n)}}function Oj(e){return Xr(e).reduce((t,n)=>e[n]!==void 0?`${t}${aUe(n)}:${e[n]};`:t,"").trim()}function O7e({selector:e,styles:t,media:n,container:r}){const i=t?Oj(t):"",s=Array.isArray(n)?n.map(a=>`@media${a.query}{${e}{${Oj(a.styles)}}}`):[],o=Array.isArray(r)?r.map(a=>`@container ${a.query}{${e}{${Oj(a.styles)}}}`):[];return`${i?`${e}{${i}}`:""}${s.join("")}${o.join("")}`.trim()}function Nb(e){const t=$W();return _.jsx("style",{"data-mantine-styles":"inline",nonce:t==null?void 0:t(),dangerouslySetInnerHTML:{__html:O7e(e)}})}function Db(e){const{m:t,mx:n,my:r,mt:i,mb:s,ml:o,mr:a,me:u,ms:l,p:c,px:f,py:d,pt:h,pb:p,pl:m,pr:g,pe:y,ps:v,bd:b,bg:w,c:E,opacity:T,ff:S,fz:C,fw:A,lts:k,ta:N,lh:O,fs:P,tt:$,td:F,w:M,miw:B,maw:U,h:H,mih:D,mah:z,bgsz:W,bgp:j,bgr:q,bga:G,pos:ne,top:ce,left:de,bottom:he,right:ve,inset:Ie,display:be,flex:Ke,hiddenFrom:Ue,visibleFrom:yt,lightHidden:it,darkHidden:_e,sx:ke,...ze}=e;return{styleProps:Ay({m:t,mx:n,my:r,mt:i,mb:s,ml:o,mr:a,me:u,ms:l,p:c,px:f,py:d,pt:h,pb:p,pl:m,pr:g,pe:y,ps:v,bd:b,bg:w,c:E,opacity:T,ff:S,fz:C,fw:A,lts:k,ta:N,lh:O,fs:P,tt:$,td:F,w:M,miw:B,maw:U,h:H,mih:D,mah:z,bgsz:W,bgp:j,bgr:q,bga:G,pos:ne,top:ce,left:de,bottom:he,right:ve,inset:Ie,display:be,flex:Ke,hiddenFrom:Ue,visibleFrom:yt,lightHidden:it,darkHidden:_e,sx:ke}),rest:ze}}const $7e={m:{type:"spacing",property:"margin"},mt:{type:"spacing",property:"marginTop"},mb:{type:"spacing",property:"marginBottom"},ml:{type:"spacing",property:"marginLeft"},mr:{type:"spacing",property:"marginRight"},ms:{type:"spacing",property:"marginInlineStart"},me:{type:"spacing",property:"marginInlineEnd"},mx:{type:"spacing",property:"marginInline"},my:{type:"spacing",property:"marginBlock"},p:{type:"spacing",property:"padding"},pt:{type:"spacing",property:"paddingTop"},pb:{type:"spacing",property:"paddingBottom"},pl:{type:"spacing",property:"paddingLeft"},pr:{type:"spacing",property:"paddingRight"},ps:{type:"spacing",property:"paddingInlineStart"},pe:{type:"spacing",property:"paddingInlineEnd"},px:{type:"spacing",property:"paddingInline"},py:{type:"spacing",property:"paddingBlock"},bd:{type:"border",property:"border"},bg:{type:"color",property:"background"},c:{type:"textColor",property:"color"},opacity:{type:"identity",property:"opacity"},ff:{type:"fontFamily",property:"fontFamily"},fz:{type:"fontSize",property:"fontSize"},fw:{type:"identity",property:"fontWeight"},lts:{type:"size",property:"letterSpacing"},ta:{type:"identity",property:"textAlign"},lh:{type:"lineHeight",property:"lineHeight"},fs:{type:"identity",property:"fontStyle"},tt:{type:"identity",property:"textTransform"},td:{type:"identity",property:"textDecoration"},w:{type:"spacing",property:"width"},miw:{type:"spacing",property:"minWidth"},maw:{type:"spacing",property:"maxWidth"},h:{type:"spacing",property:"height"},mih:{type:"spacing",property:"minHeight"},mah:{type:"spacing",property:"maxHeight"},bgsz:{type:"size",property:"backgroundSize"},bgp:{type:"identity",property:"backgroundPosition"},bgr:{type:"identity",property:"backgroundRepeat"},bga:{type:"identity",property:"backgroundAttachment"},pos:{type:"identity",property:"position"},top:{type:"identity",property:"top"},left:{type:"size",property:"left"},bottom:{type:"size",property:"bottom"},right:{type:"size",property:"right"},inset:{type:"size",property:"inset"},display:{type:"identity",property:"display"},flex:{type:"identity",property:"flex"}};function jW(e,t){const n=Vh({color:e,theme:t});return n.color==="dimmed"?"var(--mantine-color-dimmed)":n.color==="bright"?"var(--mantine-color-bright)":n.variable?`var(${n.variable})`:n.color}function M7e(e,t){const n=Vh({color:e,theme:t});return n.isThemeColor&&n.shade===void 0?`var(--mantine-color-${n.color}-text)`:jW(e,t)}function L7e(e,t){if(typeof e=="number")return Te(e);if(typeof e=="string"){const[n,r,...i]=e.split(" ").filter(o=>o.trim()!=="");let s=`${Te(n)}`;return r&&(s+=` ${r}`),d7e.length>0&&(s+=` ${jW(i.join(" "),t)}`),s.trim()}return e}const foe={text:"var(--mantine-font-family)",mono:"var(--mantine-font-family-monospace)",monospace:"var(--mantine-font-family-monospace)",heading:"var(--mantine-font-family-headings)",headings:"var(--mantine-font-family-headings)"};function F7e(e){return typeof e=="string"&&e in foe?foe[e]:e}const j7e=["h1","h2","h3","h4","h5","h6"];function B7e(e,t){return typeof e=="string"&&e in t.fontSizes?`var(--mantine-font-size-${e})`:typeof e=="string"&&j7e.includes(e)?`var(--mantine-${e}-font-size)`:typeof e=="number"||typeof e=="string"?Te(e):e}function U7e(e){return e}const z7e=["h1","h2","h3","h4","h5","h6"];function V7e(e,t){return typeof e=="string"&&e in t.lineHeights?`var(--mantine-line-height-${e})`:typeof e=="string"&&z7e.includes(e)?`var(--mantine-${e}-line-height)`:e}function H7e(e){return typeof e=="number"?Te(e):e}function q7e(e,t){if(typeof e=="number")return Te(e);if(typeof e=="string"){const n=e.replace("-","");if(!(n in t.spacing))return Te(e);const r=`--mantine-spacing-${n}`;return e.startsWith("-")?`calc(var(${r}) * -1)`:`var(${r})`}return e}const $j={color:jW,textColor:M7e,fontSize:B7e,spacing:q7e,identity:U7e,size:H7e,lineHeight:V7e,fontFamily:F7e,border:L7e};function doe(e){return e.replace("(min-width: ","").replace("em)","")}function W7e({media:e,...t}){const r=Object.keys(e).sort((i,s)=>Number(doe(i))-Number(doe(s))).map(i=>({query:i,styles:e[i]}));return{...t,media:r}}function G7e(e){if(typeof e!="object"||e===null)return!1;const t=Object.keys(e);return!(t.length===1&&t[0]==="base")}function Y7e(e){return typeof e=="object"&&e!==null?"base"in e?e.base:void 0:e}function K7e(e){return typeof e=="object"&&e!==null?Xr(e).filter(t=>t!=="base"):[]}function X7e(e,t){return typeof e=="object"&&e!==null&&t in e?e[t]:e}function J1e({styleProps:e,data:t,theme:n}){return W7e(Xr(e).reduce((r,i)=>{if(i==="hiddenFrom"||i==="visibleFrom"||i==="sx")return r;const s=t[i],o=Array.isArray(s.property)?s.property:[s.property],a=Y7e(e[i]);if(!G7e(e[i]))return o.forEach(l=>{r.inlineStyles[l]=$j[s.type](a,n)}),r;r.hasResponsiveStyles=!0;const u=K7e(e[i]);return o.forEach(l=>{a&&(r.styles[l]=$j[s.type](a,n)),u.forEach(c=>{const f=`(min-width: ${n.breakpoints[c]})`;r.media[f]={...r.media[f],[l]:$j[s.type](X7e(e[i],c),n)}})}),r},{hasResponsiveStyles:!1,styles:{},inlineStyles:{},media:{}}))}function ok(){return`__m__-${I.useId().replace(/:/g,"")}`}function BW(e,t){return Array.isArray(e)?[...e].reduce((n,r)=>({...n,...BW(r,t)}),{}):typeof e=="function"?e(t):e??{}}function Z1e(e){return e.startsWith("data-")?e:`data-${e}`}function Q7e(e){return Object.keys(e).reduce((t,n)=>{const r=e[n];return r===void 0||r===""||r===!1||r===null||(t[Z1e(n)]=e[n]),t},{})}function ebe(e){return e?typeof e=="string"?{[Z1e(e)]:!0}:Array.isArray(e)?[...e].reduce((t,n)=>({...t,...ebe(n)}),{}):Q7e(e):null}function qU(e,t){return Array.isArray(e)?[...e].reduce((n,r)=>({...n,...qU(r,t)}),{}):typeof e=="function"?e(t):e??{}}function J7e({theme:e,style:t,vars:n,styleProps:r}){const i=qU(t,e),s=qU(n,e);return{...i,...s,...r}}const tbe=I.forwardRef(({component:e,style:t,__vars:n,className:r,variant:i,mod:s,size:o,hiddenFrom:a,visibleFrom:u,lightHidden:l,darkHidden:c,renderRoot:f,__size:d,...h},p)=>{var C;const m=ps(),g=e||"div",{styleProps:y,rest:v}=Db(h),b=XUe(),w=(C=b==null?void 0:b())==null?void 0:C(y.sx),E=ok(),T=J1e({styleProps:y,theme:m,data:$7e}),S={ref:p,style:J7e({theme:m,style:t,vars:n,styleProps:T.inlineStyles}),className:Xi(r,w,{[E]:T.hasResponsiveStyles,"mantine-light-hidden":l,"mantine-dark-hidden":c,[`mantine-hidden-from-${a}`]:a,[`mantine-visible-from-${u}`]:u}),"data-variant":i,"data-size":M1e(o)?void 0:o||void 0,size:d,...ebe(s),...v};return _.jsxs(_.Fragment,{children:[T.hasResponsiveStyles&&_.jsx(Nb,{selector:`.${E}`,styles:T.styles,media:T.media}),typeof f=="function"?f(S):_.jsx(g,{...S})]})});tbe.displayName="@mantine/core/Box";const pe=tbe;function nbe(e){return e}function Me(e){const t=I.forwardRef(e);return t.extend=nbe,t}function Us(e){const t=I.forwardRef(e);return t.extend=nbe,t}const Z7e=I.createContext({dir:"ltr",toggleDirection:()=>{},setDirection:()=>{}});function Hh(){return I.useContext(Z7e)}function eze(e){if(!e||typeof e=="string")return 0;const t=e/36;return Math.round((4+15*t**.25+t/5)*10)}function Mj(e){return e!=null&&e.current?e.current.scrollHeight:"auto"}const wT=typeof window<"u"&&window.requestAnimationFrame;function tze({transitionDuration:e,transitionTimingFunction:t="ease",onTransitionEnd:n=()=>{},opened:r}){const i=I.useRef(null),s=0,o={display:"none",height:0,overflow:"hidden"},[a,u]=I.useState(r?{}:o),l=p=>{ik.flushSync(()=>u(p))},c=p=>{l(m=>({...m,...p}))};function f(p){const m=e||eze(p);return{transition:`height ${m}ms ${t}, opacity ${m}ms ${t}`}}Sh(()=>{typeof wT=="function"&&wT(r?()=>{c({willChange:"height",display:"block",overflow:"hidden"}),wT(()=>{const p=Mj(i);c({...f(p),height:p})})}:()=>{const p=Mj(i);c({...f(p),willChange:"height",height:p}),wT(()=>c({height:s,overflow:"hidden"}))})},[r]);const d=p=>{if(!(p.target!==i.current||p.propertyName!=="height"))if(r){const m=Mj(i);m===a.height?l({}):c({height:m}),n()}else a.height===s&&(l(o),n())};function h({style:p={},refKey:m="ref",...g}={}){const y=g[m];return{"aria-hidden":!r,...g,[m]:V1e(i,y),onTransitionEnd:d,style:{boxSizing:"border-box",...p,...a}}}return h}const nze={transitionDuration:200,transitionTimingFunction:"ease",animateOpacity:!0},xL=Me((e,t)=>{const{children:n,in:r,transitionDuration:i,transitionTimingFunction:s,style:o,onTransitionEnd:a,animateOpacity:u,...l}=xe("Collapse",nze,e),c=ps(),f=_L(),h=(c.respectReducedMotion?f:!1)?0:i,p=tze({opened:r,transitionDuration:h,transitionTimingFunction:s,onTransitionEnd:a});return h===0?r?_.jsx(pe,{...l,children:n}):null:_.jsx(pe,{...p({style:{opacity:r||!u?1:0,transition:u?`opacity ${h}ms ${s}`:"none",...BW(o,c)},ref:t,...l}),children:n})});xL.displayName="@mantine/core/Collapse";const[rze,Vc]=fo("ScrollArea.Root component was not found in tree");function DE(e,t){const n=jv(t);Rb(()=>{let r=0;if(e){const i=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return i.observe(e),()=>{window.cancelAnimationFrame(r),i.unobserve(e)}}},[e,n])}const ize=I.forwardRef((e,t)=>{const{style:n,...r}=e,i=Vc(),[s,o]=I.useState(0),[a,u]=I.useState(0),l=!!(s&&a);return DE(i.scrollbarX,()=>{var f;const c=((f=i.scrollbarX)==null?void 0:f.offsetHeight)||0;i.onCornerHeightChange(c),u(c)}),DE(i.scrollbarY,()=>{var f;const c=((f=i.scrollbarY)==null?void 0:f.offsetWidth)||0;i.onCornerWidthChange(c),o(c)}),l?_.jsx("div",{...r,ref:t,style:{...n,width:s,height:a}}):null}),sze=I.forwardRef((e,t)=>{const n=Vc(),r=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&r?_.jsx(ize,{...e,ref:t}):null}),oze={scrollHideDelay:1e3,type:"hover"},rbe=I.forwardRef((e,t)=>{const n=xe("ScrollAreaRoot",oze,e),{type:r,scrollHideDelay:i,scrollbars:s,...o}=n,[a,u]=I.useState(null),[l,c]=I.useState(null),[f,d]=I.useState(null),[h,p]=I.useState(null),[m,g]=I.useState(null),[y,v]=I.useState(0),[b,w]=I.useState(0),[E,T]=I.useState(!1),[S,C]=I.useState(!1),A=hs(t,k=>u(k));return _.jsx(rze,{value:{type:r,scrollHideDelay:i,scrollArea:a,viewport:l,onViewportChange:c,content:f,onContentChange:d,scrollbarX:h,onScrollbarXChange:p,scrollbarXEnabled:E,onScrollbarXEnabledChange:T,scrollbarY:m,onScrollbarYChange:g,scrollbarYEnabled:S,onScrollbarYEnabledChange:C,onCornerWidthChange:v,onCornerHeightChange:w},children:_.jsx(pe,{...o,ref:A,__vars:{"--sa-corner-width":s!=="xy"?"0px":`${y}px`,"--sa-corner-height":s!=="xy"?"0px":`${b}px`}})})});rbe.displayName="@mantine/core/ScrollAreaRoot";function ibe(e,t){const n=e/t;return Number.isNaN(n)?0:n}function SL(e){const t=ibe(e.viewport,e.content),n=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,r=(e.scrollbar.size-n)*t;return Math.max(r,18)}function sbe(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}function aze(e,[t,n]){return Math.min(n,Math.max(t,e))}function hoe(e,t,n="ltr"){const r=SL(t),i=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,s=t.scrollbar.size-i,o=t.content-t.viewport,a=s-r,u=n==="ltr"?[0,o]:[o*-1,0],l=aze(e,u);return sbe([0,o],[0,a])(l)}function uze(e,t,n,r="ltr"){const i=SL(n),s=i/2,o=t||s,a=i-o,u=n.scrollbar.paddingStart+o,l=n.scrollbar.size-n.scrollbar.paddingEnd-a,c=n.content-n.viewport,f=r==="ltr"?[0,c]:[c*-1,0];return sbe([u,l],f)(e)}function obe(e,t){return e>0&&e<t}function VO(e){return e?parseInt(e,10):0}function x1(e,t,{checkForDefaultPrevented:n=!0}={}){return r=>{e==null||e(r),(n===!1||!r.defaultPrevented)&&(t==null||t(r))}}const[lze,abe]=fo("ScrollAreaScrollbar was not found in tree"),ube=I.forwardRef((e,t)=>{const{sizes:n,hasThumb:r,onThumbChange:i,onThumbPointerUp:s,onThumbPointerDown:o,onThumbPositionChange:a,onDragScroll:u,onWheelScroll:l,onResize:c,...f}=e,d=Vc(),[h,p]=I.useState(null),m=hs(t,C=>p(C)),g=I.useRef(null),y=I.useRef(""),{viewport:v}=d,b=n.content-n.viewport,w=jv(l),E=jv(a),T=bL(c,10),S=C=>{if(g.current){const A=C.clientX-g.current.left,k=C.clientY-g.current.top;u({x:A,y:k})}};return I.useEffect(()=>{const C=A=>{const k=A.target;(h==null?void 0:h.contains(k))&&w(A,b)};return document.addEventListener("wheel",C,{passive:!1}),()=>document.removeEventListener("wheel",C,{passive:!1})},[v,h,b,w]),I.useEffect(E,[n,E]),DE(h,T),DE(d.content,T),_.jsx(lze,{value:{scrollbar:h,hasThumb:r,onThumbChange:jv(i),onThumbPointerUp:jv(s),onThumbPositionChange:E,onThumbPointerDown:jv(o)},children:_.jsx("div",{...f,ref:m,style:{position:"absolute",...f.style},onPointerDown:x1(e.onPointerDown,C=>{C.button===0&&(C.target.setPointerCapture(C.pointerId),g.current=h.getBoundingClientRect(),y.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",S(C))}),onPointerMove:x1(e.onPointerMove,S),onPointerUp:x1(e.onPointerUp,C=>{const A=C.target;A.hasPointerCapture(C.pointerId)&&A.releasePointerCapture(C.pointerId),document.body.style.webkitUserSelect=y.current,g.current=null})})})}),cze=I.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,style:i,...s}=e,o=Vc(),[a,u]=I.useState(),l=I.useRef(null),c=hs(t,l,o.onScrollbarXChange);return I.useEffect(()=>{l.current&&u(getComputedStyle(l.current))},[l]),_.jsx(ube,{"data-orientation":"horizontal",...s,ref:c,sizes:n,style:{...i,"--sa-thumb-width":`${SL(n)}px`},onThumbPointerDown:f=>e.onThumbPointerDown(f.x),onDragScroll:f=>e.onDragScroll(f.x),onWheelScroll:(f,d)=>{if(o.viewport){const h=o.viewport.scrollLeft+f.deltaX;e.onWheelScroll(h),obe(h,d)&&f.preventDefault()}},onResize:()=>{l.current&&o.viewport&&a&&r({content:o.viewport.scrollWidth,viewport:o.viewport.offsetWidth,scrollbar:{size:l.current.clientWidth,paddingStart:VO(a.paddingLeft),paddingEnd:VO(a.paddingRight)}})}})}),fze=I.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,style:i,...s}=e,o=Vc(),[a,u]=I.useState(),l=I.useRef(null),c=hs(t,l,o.onScrollbarYChange);return I.useEffect(()=>{l.current&&u(window.getComputedStyle(l.current))},[]),_.jsx(ube,{...s,"data-orientation":"vertical",ref:c,sizes:n,style:{"--sa-thumb-height":`${SL(n)}px`,...i},onThumbPointerDown:f=>e.onThumbPointerDown(f.y),onDragScroll:f=>e.onDragScroll(f.y),onWheelScroll:(f,d)=>{if(o.viewport){const h=o.viewport.scrollTop+f.deltaY;e.onWheelScroll(h),obe(h,d)&&f.preventDefault()}},onResize:()=>{l.current&&o.viewport&&a&&r({content:o.viewport.scrollHeight,viewport:o.viewport.offsetHeight,scrollbar:{size:l.current.clientHeight,paddingStart:VO(a.paddingTop),paddingEnd:VO(a.paddingBottom)}})}})}),UW=I.forwardRef((e,t)=>{const{orientation:n="vertical",...r}=e,{dir:i}=Hh(),s=Vc(),o=I.useRef(null),a=I.useRef(0),[u,l]=I.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),c=ibe(u.viewport,u.content),f={...r,sizes:u,onSizesChange:l,hasThumb:c>0&&c<1,onThumbChange:h=>{o.current=h},onThumbPointerUp:()=>{a.current=0},onThumbPointerDown:h=>{a.current=h}},d=(h,p)=>uze(h,a.current,u,p);return n==="horizontal"?_.jsx(cze,{...f,ref:t,onThumbPositionChange:()=>{if(s.viewport&&o.current){const h=s.viewport.scrollLeft,p=hoe(h,u,i);o.current.style.transform=`translate3d(${p}px, 0, 0)`}},onWheelScroll:h=>{s.viewport&&(s.viewport.scrollLeft=h)},onDragScroll:h=>{s.viewport&&(s.viewport.scrollLeft=d(h,i))}}):n==="vertical"?_.jsx(fze,{...f,ref:t,onThumbPositionChange:()=>{if(s.viewport&&o.current){const h=s.viewport.scrollTop,p=hoe(h,u);u.scrollbar.size===0?o.current.style.opacity="0":o.current.style.opacity="1",o.current.style.transform=`translate3d(0, ${p}px, 0)`}},onWheelScroll:h=>{s.viewport&&(s.viewport.scrollTop=h)},onDragScroll:h=>{s.viewport&&(s.viewport.scrollTop=d(h))}}):null}),lbe=I.forwardRef((e,t)=>{const n=Vc(),{forceMount:r,...i}=e,[s,o]=I.useState(!1),a=e.orientation==="horizontal",u=bL(()=>{if(n.viewport){const l=n.viewport.offsetWidth<n.viewport.scrollWidth,c=n.viewport.offsetHeight<n.viewport.scrollHeight;o(a?l:c)}},10);return DE(n.viewport,u),DE(n.content,u),r||s?_.jsx(UW,{"data-state":s?"visible":"hidden",...i,ref:t}):null}),dze=I.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=Vc(),[s,o]=I.useState(!1);return I.useEffect(()=>{const{scrollArea:a}=i;let u=0;if(a){const l=()=>{window.clearTimeout(u),o(!0)},c=()=>{u=window.setTimeout(()=>o(!1),i.scrollHideDelay)};return a.addEventListener("pointerenter",l),a.addEventListener("pointerleave",c),()=>{window.clearTimeout(u),a.removeEventListener("pointerenter",l),a.removeEventListener("pointerleave",c)}}},[i.scrollArea,i.scrollHideDelay]),n||s?_.jsx(lbe,{"data-state":s?"visible":"hidden",...r,ref:t}):null}),hze=I.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=Vc(),s=e.orientation==="horizontal",[o,a]=I.useState("hidden"),u=bL(()=>a("idle"),100);return I.useEffect(()=>{if(o==="idle"){const l=window.setTimeout(()=>a("hidden"),i.scrollHideDelay);return()=>window.clearTimeout(l)}},[o,i.scrollHideDelay]),I.useEffect(()=>{const{viewport:l}=i,c=s?"scrollLeft":"scrollTop";if(l){let f=l[c];const d=()=>{const h=l[c];f!==h&&(a("scrolling"),u()),f=h};return l.addEventListener("scroll",d),()=>l.removeEventListener("scroll",d)}},[i.viewport,s,u]),n||o!=="hidden"?_.jsx(UW,{"data-state":o==="hidden"?"hidden":"visible",...r,ref:t,onPointerEnter:x1(e.onPointerEnter,()=>a("interacting")),onPointerLeave:x1(e.onPointerLeave,()=>a("idle"))}):null}),poe=I.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=Vc(),{onScrollbarXEnabledChange:s,onScrollbarYEnabledChange:o}=i,a=e.orientation==="horizontal";return I.useEffect(()=>(a?s(!0):o(!0),()=>{a?s(!1):o(!1)}),[a,s,o]),i.type==="hover"?_.jsx(dze,{...r,ref:t,forceMount:n}):i.type==="scroll"?_.jsx(hze,{...r,ref:t,forceMount:n}):i.type==="auto"?_.jsx(lbe,{...r,ref:t,forceMount:n}):i.type==="always"?_.jsx(UW,{...r,ref:t}):null});function pze(e,t=()=>{}){let n={left:e.scrollLeft,top:e.scrollTop},r=0;return function i(){const s={left:e.scrollLeft,top:e.scrollTop},o=n.left!==s.left,a=n.top!==s.top;(o||a)&&t(),n=s,r=window.requestAnimationFrame(i)}(),()=>window.cancelAnimationFrame(r)}const mze=I.forwardRef((e,t)=>{const{style:n,...r}=e,i=Vc(),s=abe(),{onThumbPositionChange:o}=s,a=hs(t,c=>s.onThumbChange(c)),u=I.useRef(),l=bL(()=>{u.current&&(u.current(),u.current=void 0)},100);return I.useEffect(()=>{const{viewport:c}=i;if(c){const f=()=>{if(l(),!u.current){const d=pze(c,o);u.current=d,o()}};return o(),c.addEventListener("scroll",f),()=>c.removeEventListener("scroll",f)}},[i.viewport,l,o]),_.jsx("div",{"data-state":s.hasThumb?"visible":"hidden",...r,ref:a,style:{width:"var(--sa-thumb-width)",height:"var(--sa-thumb-height)",...n},onPointerDownCapture:x1(e.onPointerDownCapture,c=>{const d=c.target.getBoundingClientRect(),h=c.clientX-d.left,p=c.clientY-d.top;s.onThumbPointerDown({x:h,y:p})}),onPointerUp:x1(e.onPointerUp,s.onThumbPointerUp)})}),moe=I.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=abe();return n||i.hasThumb?_.jsx(mze,{ref:t,...r}):null}),cbe=I.forwardRef(({children:e,style:t,...n},r)=>{const i=Vc(),s=hs(r,i.onViewportChange);return _.jsx(pe,{...n,ref:s,style:{overflowX:i.scrollbarXEnabled?"scroll":"hidden",overflowY:i.scrollbarYEnabled?"scroll":"hidden",...t},children:_.jsx("div",{style:{minWidth:"100%",display:"table"},ref:i.onContentChange,children:e})})});cbe.displayName="@mantine/core/ScrollAreaViewport";var zW={root:"m_d57069b5",viewport:"m_c0783ff9",viewportInner:"m_f8f631dd",scrollbar:"m_c44ba933",thumb:"m_d8b5e363",corner:"m_21657268"};const fbe={scrollHideDelay:1e3,type:"hover",scrollbars:"xy"},gze=(e,{scrollbarSize:t})=>({root:{"--scrollarea-scrollbar-size":Te(t)}}),vm=Me((e,t)=>{const n=xe("ScrollArea",fbe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,scrollbarSize:u,vars:l,type:c,scrollHideDelay:f,viewportProps:d,viewportRef:h,onScrollPositionChange:p,children:m,offsetScrollbars:g,scrollbars:y,...v}=n,[b,w]=I.useState(!1),E=dt({name:"ScrollArea",props:n,classes:zW,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:gze});return _.jsxs(rbe,{type:c==="never"?"always":c,scrollHideDelay:f,ref:t,scrollbars:y,...E("root"),...v,children:[_.jsx(cbe,{...d,...E("viewport",{style:d==null?void 0:d.style}),ref:h,"data-offset-scrollbars":g===!0?"xy":g||void 0,"data-scrollbars":y||void 0,onScroll:T=>{var S;(S=d==null?void 0:d.onScroll)==null||S.call(d,T),p==null||p({x:T.currentTarget.scrollLeft,y:T.currentTarget.scrollTop})},children:m}),(y==="xy"||y==="x")&&_.jsx(poe,{...E("scrollbar"),orientation:"horizontal","data-hidden":c==="never"||void 0,forceMount:!0,onMouseEnter:()=>w(!0),onMouseLeave:()=>w(!1),children:_.jsx(moe,{...E("thumb")})}),(y==="xy"||y==="y")&&_.jsx(poe,{...E("scrollbar"),orientation:"vertical","data-hidden":c==="never"||void 0,forceMount:!0,onMouseEnter:()=>w(!0),onMouseLeave:()=>w(!1),children:_.jsx(moe,{...E("thumb")})}),_.jsx(sze,{...E("corner"),"data-hovered":b||void 0,"data-hidden":c==="never"||void 0})]})});vm.displayName="@mantine/core/ScrollArea";const VW=Me((e,t)=>{const{children:n,classNames:r,styles:i,scrollbarSize:s,scrollHideDelay:o,type:a,dir:u,offsetScrollbars:l,viewportRef:c,onScrollPositionChange:f,unstyled:d,variant:h,viewportProps:p,scrollbars:m,style:g,vars:y,...v}=xe("ScrollAreaAutosize",fbe,e);return _.jsx(pe,{...v,ref:t,style:[{display:"flex",overflow:"auto"},g],children:_.jsx(pe,{style:{display:"flex",flexDirection:"column",flex:1},children:_.jsx(vm,{classNames:r,styles:i,scrollHideDelay:o,scrollbarSize:s,type:a,dir:u,offsetScrollbars:l,viewportRef:c,onScrollPositionChange:f,unstyled:d,variant:h,viewportProps:p,vars:y,scrollbars:m,children:n})})})});vm.classes=zW;VW.displayName="@mantine/core/ScrollAreaAutosize";VW.classes=zW;vm.Autosize=VW;var dbe={root:"m_87cf2631"};const yze={__staticSelector:"UnstyledButton"},xs=Us((e,t)=>{const n=xe("UnstyledButton",yze,e),{className:r,component:i="button",__staticSelector:s,unstyled:o,classNames:a,styles:u,style:l,...c}=n,f=dt({name:s,props:n,classes:dbe,className:r,style:l,classNames:a,styles:u,unstyled:o});return _.jsx(pe,{...f("root",{focusable:!0}),component:i,ref:t,type:i==="button"?"button":void 0,...c})});xs.classes=dbe;xs.displayName="@mantine/core/UnstyledButton";var hbe={root:"m_515a97f8"};const vze={},HW=Me((e,t)=>{const n=xe("VisuallyHidden",vze,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,...l}=n,c=dt({name:"VisuallyHidden",classes:hbe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a});return _.jsx(pe,{component:"span",ref:t,...c("root"),...l})});HW.classes=hbe;HW.displayName="@mantine/core/VisuallyHidden";var pbe={root:"m_1b7284a3"};const bze={},_ze=(e,{radius:t,shadow:n})=>({root:{"--paper-radius":t===void 0?void 0:Ur(t),"--paper-shadow":DW(n)}}),Pb=Us((e,t)=>{const n=xe("Paper",bze,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,withBorder:u,vars:l,radius:c,shadow:f,variant:d,mod:h,...p}=n,m=dt({name:"Paper",props:n,classes:pbe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:_ze});return _.jsx(pe,{ref:t,mod:[{"data-with-border":u},h],...m("root"),variant:d,...p})});Pb.classes=pbe;Pb.displayName="@mantine/core/Paper";function Kx(e){return mbe(e)?(e.nodeName||"").toLowerCase():"#document"}function zu(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Hm(e){var t;return(t=(mbe(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function mbe(e){return e instanceof Node||e instanceof zu(e).Node}function Si(e){return e instanceof Element||e instanceof zu(e).Element}function Ml(e){return e instanceof HTMLElement||e instanceof zu(e).HTMLElement}function WU(e){return typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof zu(e).ShadowRoot}function ak(e){const{overflow:t,overflowX:n,overflowY:r,display:i}=Dc(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!["inline","contents"].includes(i)}function wze(e){return["table","td","th"].includes(Kx(e))}function qW(e){const t=WW(),n=Dc(e);return n.transform!=="none"||n.perspective!=="none"||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||["transform","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function Eze(e){let t=bm(e);for(;Ml(t)&&!j0(t);){if(qW(t))return t;t=bm(t)}return null}function WW(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function j0(e){return["html","body","#document"].includes(Kx(e))}function Dc(e){return zu(e).getComputedStyle(e)}function TL(e){return Si(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function bm(e){if(Kx(e)==="html")return e;const t=e.assignedSlot||e.parentNode||WU(e)&&e.host||Hm(e);return WU(t)?t.host:t}function gbe(e){const t=bm(e);return j0(t)?e.ownerDocument?e.ownerDocument.body:e.body:Ml(t)&&ak(t)?t:gbe(t)}function rm(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const i=gbe(e),s=i===((r=e.ownerDocument)==null?void 0:r.body),o=zu(i);return s?t.concat(o,o.visualViewport||[],ak(i)?i:[],o.frameElement&&n?rm(o.frameElement):[]):t.concat(i,rm(i,[],n))}function goe(e){let t=e.activeElement;for(;((n=t)==null||(n=n.shadowRoot)==null?void 0:n.activeElement)!=null;){var n;t=t.shadowRoot.activeElement}return t}function CA(e,t){if(!e||!t)return!1;const n=t.getRootNode==null?void 0:t.getRootNode();if(e.contains(t))return!0;if(n&&WU(n)){let r=t;for(;r;){if(e===r)return!0;r=r.parentNode||r.host}}return!1}function ybe(){const e=navigator.userAgentData;return e!=null&&e.platform?e.platform:navigator.platform}function vbe(){const e=navigator.userAgentData;return e&&Array.isArray(e.brands)?e.brands.map(t=>{let{brand:n,version:r}=t;return n+"/"+r}).join(" "):navigator.userAgent}function xze(e){return Cze()?!1:!yoe()&&e.width===0&&e.height===0||yoe()&&e.width===1&&e.height===1&&e.pressure===0&&e.detail===0&&e.pointerType==="mouse"||e.width<1&&e.height<1&&e.pressure===0&&e.detail===0&&e.pointerType==="touch"}function Sze(){return/apple/i.test(navigator.vendor)}function yoe(){const e=/android/i;return e.test(ybe())||e.test(vbe())}function Tze(){return ybe().toLowerCase().startsWith("mac")&&!navigator.maxTouchPoints}function Cze(){return vbe().includes("jsdom/")}function GU(e,t){const n=["mouse","pen"];return n.push("",void 0),n.includes(e)}function Aze(e){return"nativeEvent"in e}function Ize(e){return e.matches("html,body")}function r1(e){return(e==null?void 0:e.ownerDocument)||document}function Lj(e,t){if(t==null)return!1;if("composedPath"in e)return e.composedPath().includes(t);const n=e;return n.target!=null&&t.contains(n.target)}function Z_(e){return"composedPath"in e?e.composedPath()[0]:e.target}const kze="input:not([type='hidden']):not([disabled]),[contenteditable]:not([contenteditable='false']),textarea:not([disabled])";function Rze(e){return Ml(e)&&e.matches(kze)}const xl=Math.min,la=Math.max,HO=Math.round,AN=Math.floor,B0=e=>({x:e,y:e}),Nze={left:"right",right:"left",bottom:"top",top:"bottom"},Dze={start:"end",end:"start"};function YU(e,t,n){return la(e,xl(t,n))}function _m(e,t){return typeof e=="function"?e(t):e}function Gf(e){return e.split("-")[0]}function Xx(e){return e.split("-")[1]}function GW(e){return e==="x"?"y":"x"}function YW(e){return e==="y"?"height":"width"}function Ob(e){return["top","bottom"].includes(Gf(e))?"y":"x"}function KW(e){return GW(Ob(e))}function Pze(e,t,n){n===void 0&&(n=!1);const r=Xx(e),i=KW(e),s=YW(i);let o=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[s]>t.floating[s]&&(o=qO(o)),[o,qO(o)]}function Oze(e){const t=qO(e);return[KU(e),t,KU(t)]}function KU(e){return e.replace(/start|end/g,t=>Dze[t])}function $ze(e,t,n){const r=["left","right"],i=["right","left"],s=["top","bottom"],o=["bottom","top"];switch(e){case"top":case"bottom":return n?t?i:r:t?r:i;case"left":case"right":return t?s:o;default:return[]}}function Mze(e,t,n,r){const i=Xx(e);let s=$ze(Gf(e),n==="start",r);return i&&(s=s.map(o=>o+"-"+i),t&&(s=s.concat(s.map(KU)))),s}function qO(e){return e.replace(/left|right|bottom|top/g,t=>Nze[t])}function Lze(e){return{top:0,right:0,bottom:0,left:0,...e}}function XW(e){return typeof e!="number"?Lze(e):{top:e,right:e,bottom:e,left:e}}function PE(e){const{x:t,y:n,width:r,height:i}=e;return{width:r,height:i,top:n,left:t,right:t+r,bottom:n+i,x:t,y:n}}function voe(e,t,n){let{reference:r,floating:i}=e;const s=Ob(t),o=KW(t),a=YW(o),u=Gf(t),l=s==="y",c=r.x+r.width/2-i.width/2,f=r.y+r.height/2-i.height/2,d=r[a]/2-i[a]/2;let h;switch(u){case"top":h={x:c,y:r.y-i.height};break;case"bottom":h={x:c,y:r.y+r.height};break;case"right":h={x:r.x+r.width,y:f};break;case"left":h={x:r.x-i.width,y:f};break;default:h={x:r.x,y:r.y}}switch(Xx(t)){case"start":h[o]-=d*(n&&l?-1:1);break;case"end":h[o]+=d*(n&&l?-1:1);break}return h}const Fze=async(e,t,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:s=[],platform:o}=n,a=s.filter(Boolean),u=await(o.isRTL==null?void 0:o.isRTL(t));let l=await o.getElementRects({reference:e,floating:t,strategy:i}),{x:c,y:f}=voe(l,r,u),d=r,h={},p=0;for(let m=0;m<a.length;m++){const{name:g,fn:y}=a[m],{x:v,y:b,data:w,reset:E}=await y({x:c,y:f,initialPlacement:r,placement:d,strategy:i,middlewareData:h,rects:l,platform:o,elements:{reference:e,floating:t}});c=v??c,f=b??f,h={...h,[g]:{...h[g],...w}},E&&p<=50&&(p++,typeof E=="object"&&(E.placement&&(d=E.placement),E.rects&&(l=E.rects===!0?await o.getElementRects({reference:e,floating:t,strategy:i}):E.rects),{x:c,y:f}=voe(l,d,u)),m=-1)}return{x:c,y:f,placement:d,strategy:i,middlewareData:h}};async function QW(e,t){var n;t===void 0&&(t={});const{x:r,y:i,platform:s,rects:o,elements:a,strategy:u}=e,{boundary:l="clippingAncestors",rootBoundary:c="viewport",elementContext:f="floating",altBoundary:d=!1,padding:h=0}=_m(t,e),p=XW(h),g=a[d?f==="floating"?"reference":"floating":f],y=PE(await s.getClippingRect({element:(n=await(s.isElement==null?void 0:s.isElement(g)))==null||n?g:g.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:l,rootBoundary:c,strategy:u})),v=f==="floating"?{x:r,y:i,width:o.floating.width,height:o.floating.height}:o.reference,b=await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),w=await(s.isElement==null?void 0:s.isElement(b))?await(s.getScale==null?void 0:s.getScale(b))||{x:1,y:1}:{x:1,y:1},E=PE(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:v,offsetParent:b,strategy:u}):v);return{top:(y.top-E.top+p.top)/w.y,bottom:(E.bottom-y.bottom+p.bottom)/w.y,left:(y.left-E.left+p.left)/w.x,right:(E.right-y.right+p.right)/w.x}}const jze=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:i,rects:s,platform:o,elements:a,middlewareData:u}=t,{element:l,padding:c=0}=_m(e,t)||{};if(l==null)return{};const f=XW(c),d={x:n,y:r},h=KW(i),p=YW(h),m=await o.getDimensions(l),g=h==="y",y=g?"top":"left",v=g?"bottom":"right",b=g?"clientHeight":"clientWidth",w=s.reference[p]+s.reference[h]-d[h]-s.floating[p],E=d[h]-s.reference[h],T=await(o.getOffsetParent==null?void 0:o.getOffsetParent(l));let S=T?T[b]:0;(!S||!await(o.isElement==null?void 0:o.isElement(T)))&&(S=a.floating[b]||s.floating[p]);const C=w/2-E/2,A=S/2-m[p]/2-1,k=xl(f[y],A),N=xl(f[v],A),O=k,P=S-m[p]-N,$=S/2-m[p]/2+C,F=YU(O,$,P),M=!u.arrow&&Xx(i)!=null&&$!==F&&s.reference[p]/2-($<O?k:N)-m[p]/2<0,B=M?$<O?$-O:$-P:0;return{[h]:d[h]+B,data:{[h]:F,centerOffset:$-F-B,...M&&{alignmentOffset:B}},reset:M}}}),Bze=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:i,middlewareData:s,rects:o,initialPlacement:a,platform:u,elements:l}=t,{mainAxis:c=!0,crossAxis:f=!0,fallbackPlacements:d,fallbackStrategy:h="bestFit",fallbackAxisSideDirection:p="none",flipAlignment:m=!0,...g}=_m(e,t);if((n=s.arrow)!=null&&n.alignmentOffset)return{};const y=Gf(i),v=Gf(a)===a,b=await(u.isRTL==null?void 0:u.isRTL(l.floating)),w=d||(v||!m?[qO(a)]:Oze(a));!d&&p!=="none"&&w.push(...Mze(a,m,p,b));const E=[a,...w],T=await QW(t,g),S=[];let C=((r=s.flip)==null?void 0:r.overflows)||[];if(c&&S.push(T[y]),f){const O=Pze(i,o,b);S.push(T[O[0]],T[O[1]])}if(C=[...C,{placement:i,overflows:S}],!S.every(O=>O<=0)){var A,k;const O=(((A=s.flip)==null?void 0:A.index)||0)+1,P=E[O];if(P)return{data:{index:O,overflows:C},reset:{placement:P}};let $=(k=C.filter(F=>F.overflows[0]<=0).sort((F,M)=>F.overflows[1]-M.overflows[1])[0])==null?void 0:k.placement;if(!$)switch(h){case"bestFit":{var N;const F=(N=C.map(M=>[M.placement,M.overflows.filter(B=>B>0).reduce((B,U)=>B+U,0)]).sort((M,B)=>M[1]-B[1])[0])==null?void 0:N[0];F&&($=F);break}case"initialPlacement":$=a;break}if(i!==$)return{reset:{placement:$}}}return{}}}};function bbe(e){const t=xl(...e.map(s=>s.left)),n=xl(...e.map(s=>s.top)),r=la(...e.map(s=>s.right)),i=la(...e.map(s=>s.bottom));return{x:t,y:n,width:r-t,height:i-n}}function Uze(e){const t=e.slice().sort((i,s)=>i.y-s.y),n=[];let r=null;for(let i=0;i<t.length;i++){const s=t[i];!r||s.y-r.y>r.height/2?n.push([s]):n[n.length-1].push(s),r=s}return n.map(i=>PE(bbe(i)))}const zze=function(e){return e===void 0&&(e={}),{name:"inline",options:e,async fn(t){const{placement:n,elements:r,rects:i,platform:s,strategy:o}=t,{padding:a=2,x:u,y:l}=_m(e,t),c=Array.from(await(s.getClientRects==null?void 0:s.getClientRects(r.reference))||[]),f=Uze(c),d=PE(bbe(c)),h=XW(a);function p(){if(f.length===2&&f[0].left>f[1].right&&u!=null&&l!=null)return f.find(g=>u>g.left-h.left&&u<g.right+h.right&&l>g.top-h.top&&l<g.bottom+h.bottom)||d;if(f.length>=2){if(Ob(n)==="y"){const k=f[0],N=f[f.length-1],O=Gf(n)==="top",P=k.top,$=N.bottom,F=O?k.left:N.left,M=O?k.right:N.right,B=M-F,U=$-P;return{top:P,bottom:$,left:F,right:M,width:B,height:U,x:F,y:P}}const g=Gf(n)==="left",y=la(...f.map(k=>k.right)),v=xl(...f.map(k=>k.left)),b=f.filter(k=>g?k.left===v:k.right===y),w=b[0].top,E=b[b.length-1].bottom,T=v,S=y,C=S-T,A=E-w;return{top:w,bottom:E,left:T,right:S,width:C,height:A,x:T,y:w}}return d}const m=await s.getElementRects({reference:{getBoundingClientRect:p},floating:r.floating,strategy:o});return i.reference.x!==m.reference.x||i.reference.y!==m.reference.y||i.reference.width!==m.reference.width||i.reference.height!==m.reference.height?{reset:{rects:m}}:{}}}};async function Vze(e,t){const{placement:n,platform:r,elements:i}=e,s=await(r.isRTL==null?void 0:r.isRTL(i.floating)),o=Gf(n),a=Xx(n),u=Ob(n)==="y",l=["left","top"].includes(o)?-1:1,c=s&&u?-1:1,f=_m(t,e);let{mainAxis:d,crossAxis:h,alignmentAxis:p}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...f};return a&&typeof p=="number"&&(h=a==="end"?p*-1:p),u?{x:h*c,y:d*l}:{x:d*l,y:h*c}}const Hze=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:i,y:s,placement:o,middlewareData:a}=t,u=await Vze(t,e);return o===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:i+u.x,y:s+u.y,data:{...u,placement:o}}}}},qze=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:i}=t,{mainAxis:s=!0,crossAxis:o=!1,limiter:a={fn:g=>{let{x:y,y:v}=g;return{x:y,y:v}}},...u}=_m(e,t),l={x:n,y:r},c=await QW(t,u),f=Ob(Gf(i)),d=GW(f);let h=l[d],p=l[f];if(s){const g=d==="y"?"top":"left",y=d==="y"?"bottom":"right",v=h+c[g],b=h-c[y];h=YU(v,h,b)}if(o){const g=f==="y"?"top":"left",y=f==="y"?"bottom":"right",v=p+c[g],b=p-c[y];p=YU(v,p,b)}const m=a.fn({...t,[d]:h,[f]:p});return{...m,data:{x:m.x-n,y:m.y-r}}}}},Wze=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:r,placement:i,rects:s,middlewareData:o}=t,{offset:a=0,mainAxis:u=!0,crossAxis:l=!0}=_m(e,t),c={x:n,y:r},f=Ob(i),d=GW(f);let h=c[d],p=c[f];const m=_m(a,t),g=typeof m=="number"?{mainAxis:m,crossAxis:0}:{mainAxis:0,crossAxis:0,...m};if(u){const b=d==="y"?"height":"width",w=s.reference[d]-s.floating[b]+g.mainAxis,E=s.reference[d]+s.reference[b]-g.mainAxis;h<w?h=w:h>E&&(h=E)}if(l){var y,v;const b=d==="y"?"width":"height",w=["top","left"].includes(Gf(i)),E=s.reference[f]-s.floating[b]+(w&&((y=o.offset)==null?void 0:y[f])||0)+(w?0:g.crossAxis),T=s.reference[f]+s.reference[b]+(w?0:((v=o.offset)==null?void 0:v[f])||0)-(w?g.crossAxis:0);p<E?p=E:p>T&&(p=T)}return{[d]:h,[f]:p}}}},Gze=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){const{placement:n,rects:r,platform:i,elements:s}=t,{apply:o=()=>{},...a}=_m(e,t),u=await QW(t,a),l=Gf(n),c=Xx(n),f=Ob(n)==="y",{width:d,height:h}=r.floating;let p,m;l==="top"||l==="bottom"?(p=l,m=c===(await(i.isRTL==null?void 0:i.isRTL(s.floating))?"start":"end")?"left":"right"):(m=l,p=c==="end"?"top":"bottom");const g=h-u.top-u.bottom,y=d-u.left-u.right,v=xl(h-u[p],g),b=xl(d-u[m],y),w=!t.middlewareData.shift;let E=v,T=b;if(f?T=c||w?xl(b,y):y:E=c||w?xl(v,g):g,w&&!c){const C=la(u.left,0),A=la(u.right,0),k=la(u.top,0),N=la(u.bottom,0);f?T=d-2*(C!==0||A!==0?C+A:la(u.left,u.right)):E=h-2*(k!==0||N!==0?k+N:la(u.top,u.bottom))}await o({...t,availableWidth:T,availableHeight:E});const S=await i.getDimensions(s.floating);return d!==S.width||h!==S.height?{reset:{rects:!0}}:{}}}};function _be(e){const t=Dc(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const i=Ml(e),s=i?e.offsetWidth:n,o=i?e.offsetHeight:r,a=HO(n)!==s||HO(r)!==o;return a&&(n=s,r=o),{width:n,height:r,$:a}}function JW(e){return Si(e)?e:e.contextElement}function Gw(e){const t=JW(e);if(!Ml(t))return B0(1);const n=t.getBoundingClientRect(),{width:r,height:i,$:s}=_be(t);let o=(s?HO(n.width):n.width)/r,a=(s?HO(n.height):n.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const Yze=B0(0);function wbe(e){const t=zu(e);return!WW()||!t.visualViewport?Yze:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function Kze(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==zu(e)?!1:t}function U1(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const i=e.getBoundingClientRect(),s=JW(e);let o=B0(1);t&&(r?Si(r)&&(o=Gw(r)):o=Gw(e));const a=Kze(s,n,r)?wbe(s):B0(0);let u=(i.left+a.x)/o.x,l=(i.top+a.y)/o.y,c=i.width/o.x,f=i.height/o.y;if(s){const d=zu(s),h=r&&Si(r)?zu(r):r;let p=d,m=p.frameElement;for(;m&&r&&h!==p;){const g=Gw(m),y=m.getBoundingClientRect(),v=Dc(m),b=y.left+(m.clientLeft+parseFloat(v.paddingLeft))*g.x,w=y.top+(m.clientTop+parseFloat(v.paddingTop))*g.y;u*=g.x,l*=g.y,c*=g.x,f*=g.y,u+=b,l+=w,p=zu(m),m=p.frameElement}}return PE({width:c,height:f,x:u,y:l})}const Xze=[":popover-open",":modal"];function ZW(e){return Xze.some(t=>{try{return e.matches(t)}catch{return!1}})}function Qze(e){let{elements:t,rect:n,offsetParent:r,strategy:i}=e;const s=i==="fixed",o=Hm(r),a=t?ZW(t.floating):!1;if(r===o||a&&s)return n;let u={scrollLeft:0,scrollTop:0},l=B0(1);const c=B0(0),f=Ml(r);if((f||!f&&!s)&&((Kx(r)!=="body"||ak(o))&&(u=TL(r)),Ml(r))){const d=U1(r);l=Gw(r),c.x=d.x+r.clientLeft,c.y=d.y+r.clientTop}return{width:n.width*l.x,height:n.height*l.y,x:n.x*l.x-u.scrollLeft*l.x+c.x,y:n.y*l.y-u.scrollTop*l.y+c.y}}function Jze(e){return Array.from(e.getClientRects())}function Ebe(e){return U1(Hm(e)).left+TL(e).scrollLeft}function Zze(e){const t=Hm(e),n=TL(e),r=e.ownerDocument.body,i=la(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),s=la(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+Ebe(e);const a=-n.scrollTop;return Dc(r).direction==="rtl"&&(o+=la(t.clientWidth,r.clientWidth)-i),{width:i,height:s,x:o,y:a}}function eVe(e,t){const n=zu(e),r=Hm(e),i=n.visualViewport;let s=r.clientWidth,o=r.clientHeight,a=0,u=0;if(i){s=i.width,o=i.height;const l=WW();(!l||l&&t==="fixed")&&(a=i.offsetLeft,u=i.offsetTop)}return{width:s,height:o,x:a,y:u}}function tVe(e,t){const n=U1(e,!0,t==="fixed"),r=n.top+e.clientTop,i=n.left+e.clientLeft,s=Ml(e)?Gw(e):B0(1),o=e.clientWidth*s.x,a=e.clientHeight*s.y,u=i*s.x,l=r*s.y;return{width:o,height:a,x:u,y:l}}function boe(e,t,n){let r;if(t==="viewport")r=eVe(e,n);else if(t==="document")r=Zze(Hm(e));else if(Si(t))r=tVe(t,n);else{const i=wbe(e);r={...t,x:t.x-i.x,y:t.y-i.y}}return PE(r)}function xbe(e,t){const n=bm(e);return n===t||!Si(n)||j0(n)?!1:Dc(n).position==="fixed"||xbe(n,t)}function nVe(e,t){const n=t.get(e);if(n)return n;let r=rm(e,[],!1).filter(a=>Si(a)&&Kx(a)!=="body"),i=null;const s=Dc(e).position==="fixed";let o=s?bm(e):e;for(;Si(o)&&!j0(o);){const a=Dc(o),u=qW(o);!u&&a.position==="fixed"&&(i=null),(s?!u&&!i:!u&&a.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||ak(o)&&!u&&xbe(e,o))?r=r.filter(c=>c!==o):i=a,o=bm(o)}return t.set(e,r),r}function rVe(e){let{element:t,boundary:n,rootBoundary:r,strategy:i}=e;const o=[...n==="clippingAncestors"?ZW(t)?[]:nVe(t,this._c):[].concat(n),r],a=o[0],u=o.reduce((l,c)=>{const f=boe(t,c,i);return l.top=la(f.top,l.top),l.right=xl(f.right,l.right),l.bottom=xl(f.bottom,l.bottom),l.left=la(f.left,l.left),l},boe(t,a,i));return{width:u.right-u.left,height:u.bottom-u.top,x:u.left,y:u.top}}function iVe(e){const{width:t,height:n}=_be(e);return{width:t,height:n}}function sVe(e,t,n){const r=Ml(t),i=Hm(t),s=n==="fixed",o=U1(e,!0,s,t);let a={scrollLeft:0,scrollTop:0};const u=B0(0);if(r||!r&&!s)if((Kx(t)!=="body"||ak(i))&&(a=TL(t)),r){const f=U1(t,!0,s,t);u.x=f.x+t.clientLeft,u.y=f.y+t.clientTop}else i&&(u.x=Ebe(i));const l=o.left+a.scrollLeft-u.x,c=o.top+a.scrollTop-u.y;return{x:l,y:c,width:o.width,height:o.height}}function Fj(e){return Dc(e).position==="static"}function _oe(e,t){return!Ml(e)||Dc(e).position==="fixed"?null:t?t(e):e.offsetParent}function Sbe(e,t){const n=zu(e);if(ZW(e))return n;if(!Ml(e)){let i=bm(e);for(;i&&!j0(i);){if(Si(i)&&!Fj(i))return i;i=bm(i)}return n}let r=_oe(e,t);for(;r&&wze(r)&&Fj(r);)r=_oe(r,t);return r&&j0(r)&&Fj(r)&&!qW(r)?n:r||Eze(e)||n}const oVe=async function(e){const t=this.getOffsetParent||Sbe,n=this.getDimensions,r=await n(e.floating);return{reference:sVe(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function aVe(e){return Dc(e).direction==="rtl"}const uVe={convertOffsetParentRelativeRectToViewportRelativeRect:Qze,getDocumentElement:Hm,getClippingRect:rVe,getOffsetParent:Sbe,getElementRects:oVe,getClientRects:Jze,getDimensions:iVe,getScale:Gw,isElement:Si,isRTL:aVe};function lVe(e,t){let n=null,r;const i=Hm(e);function s(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function o(a,u){a===void 0&&(a=!1),u===void 0&&(u=1),s();const{left:l,top:c,width:f,height:d}=e.getBoundingClientRect();if(a||t(),!f||!d)return;const h=AN(c),p=AN(i.clientWidth-(l+f)),m=AN(i.clientHeight-(c+d)),g=AN(l),v={rootMargin:-h+"px "+-p+"px "+-m+"px "+-g+"px",threshold:la(0,xl(1,u))||1};let b=!0;function w(E){const T=E[0].intersectionRatio;if(T!==u){if(!b)return o();T?o(!1,T):r=setTimeout(()=>{o(!1,1e-7)},1e3)}b=!1}try{n=new IntersectionObserver(w,{...v,root:i.ownerDocument})}catch{n=new IntersectionObserver(w,v)}n.observe(e)}return o(!0),s}function cVe(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:u=!1}=r,l=JW(e),c=i||s?[...l?rm(l):[],...rm(t)]:[];c.forEach(y=>{i&&y.addEventListener("scroll",n,{passive:!0}),s&&y.addEventListener("resize",n)});const f=l&&a?lVe(l,n):null;let d=-1,h=null;o&&(h=new ResizeObserver(y=>{let[v]=y;v&&v.target===l&&h&&(h.unobserve(t),cancelAnimationFrame(d),d=requestAnimationFrame(()=>{var b;(b=h)==null||b.observe(t)})),n()}),l&&!u&&h.observe(l),h.observe(t));let p,m=u?U1(e):null;u&&g();function g(){const y=U1(e);m&&(y.x!==m.x||y.y!==m.y||y.width!==m.width||y.height!==m.height)&&n(),m=y,p=requestAnimationFrame(g)}return n(),()=>{var y;c.forEach(v=>{i&&v.removeEventListener("scroll",n),s&&v.removeEventListener("resize",n)}),f==null||f(),(y=h)==null||y.disconnect(),h=null,u&&cancelAnimationFrame(p)}}const fVe=Hze,dVe=qze,hVe=Bze,pVe=Gze,woe=jze,mVe=zze,gVe=Wze,yVe=(e,t,n)=>{const r=new Map,i={platform:uVe,...n},s={...i.platform,_c:r};return Fze(e,t,{...i,platform:s})};var lP=typeof document<"u"?I.useLayoutEffect:I.useEffect;function WO(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,i;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!WO(e[r],t[r]))return!1;return!0}if(i=Object.keys(e),n=i.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,i[r]))return!1;for(r=n;r--!==0;){const s=i[r];if(!(s==="_owner"&&e.$$typeof)&&!WO(e[s],t[s]))return!1}return!0}return e!==e&&t!==t}function Tbe(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function Eoe(e,t){const n=Tbe(e);return Math.round(t*n)/n}function xoe(e){const t=I.useRef(e);return lP(()=>{t.current=e}),t}function vVe(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:i,elements:{reference:s,floating:o}={},transform:a=!0,whileElementsMounted:u,open:l}=e,[c,f]=I.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[d,h]=I.useState(r);WO(d,r)||h(r);const[p,m]=I.useState(null),[g,y]=I.useState(null),v=I.useCallback(B=>{B!==T.current&&(T.current=B,m(B))},[]),b=I.useCallback(B=>{B!==S.current&&(S.current=B,y(B))},[]),w=s||p,E=o||g,T=I.useRef(null),S=I.useRef(null),C=I.useRef(c),A=u!=null,k=xoe(u),N=xoe(i),O=I.useCallback(()=>{if(!T.current||!S.current)return;const B={placement:t,strategy:n,middleware:d};N.current&&(B.platform=N.current),yVe(T.current,S.current,B).then(U=>{const H={...U,isPositioned:!0};P.current&&!WO(C.current,H)&&(C.current=H,ik.flushSync(()=>{f(H)}))})},[d,t,n,N]);lP(()=>{l===!1&&C.current.isPositioned&&(C.current.isPositioned=!1,f(B=>({...B,isPositioned:!1})))},[l]);const P=I.useRef(!1);lP(()=>(P.current=!0,()=>{P.current=!1}),[]),lP(()=>{if(w&&(T.current=w),E&&(S.current=E),w&&E){if(k.current)return k.current(w,E,O);O()}},[w,E,O,k,A]);const $=I.useMemo(()=>({reference:T,floating:S,setReference:v,setFloating:b}),[v,b]),F=I.useMemo(()=>({reference:w,floating:E}),[w,E]),M=I.useMemo(()=>{const B={position:n,left:0,top:0};if(!F.floating)return B;const U=Eoe(F.floating,c.x),H=Eoe(F.floating,c.y);return a?{...B,transform:"translate("+U+"px, "+H+"px)",...Tbe(F.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:U,top:H}},[n,a,F.floating,c.x,c.y]);return I.useMemo(()=>({...c,update:O,refs:$,elements:F,floatingStyles:M}),[c,O,$,F,M])}const bVe=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:r,padding:i}=typeof e=="function"?e(n):e;return r&&t(r)?r.current!=null?woe({element:r.current,padding:i}).fn(n):{}:r?woe({element:r,padding:i}).fn(n):{}}}},Cbe=(e,t)=>({...fVe(e),options:[e,t]}),eG=(e,t)=>({...dVe(e),options:[e,t]}),Soe=(e,t)=>({...gVe(e),options:[e,t]}),XU=(e,t)=>({...hVe(e),options:[e,t]}),_Ve=(e,t)=>({...pVe(e),options:[e,t]}),QU=(e,t)=>({...mVe(e),options:[e,t]}),Abe=(e,t)=>({...bVe(e),options:[e,t]}),Ibe={...pO},wVe=Ibe.useInsertionEffect,EVe=wVe||(e=>e());function Ug(e){const t=I.useRef(()=>{});return EVe(()=>{t.current=e}),I.useCallback(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return t.current==null?void 0:t.current(...r)},[])}var uh=typeof document<"u"?I.useLayoutEffect:I.useEffect;let Toe=!1,xVe=0;const Coe=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+xVe++;function SVe(){const[e,t]=I.useState(()=>Toe?Coe():void 0);return uh(()=>{e==null&&t(Coe())},[]),I.useEffect(()=>{Toe=!0},[]),e}const TVe=Ibe.useId,kbe=TVe||SVe;function CVe(){const e=new Map;return{emit(t,n){var r;(r=e.get(t))==null||r.forEach(i=>i(n))},on(t,n){e.set(t,[...e.get(t)||[],n])},off(t,n){var r;e.set(t,((r=e.get(t))==null?void 0:r.filter(i=>i!==n))||[])}}}const AVe=I.createContext(null),IVe=I.createContext(null),tG=()=>{var e;return((e=I.useContext(AVe))==null?void 0:e.id)||null},nG=()=>I.useContext(IVe);function rG(e){return"data-floating-ui-"+e}function Aoe(e){const t=I.useRef(e);return uh(()=>{t.current=e}),t}const Ioe=rG("safe-polygon");function cP(e,t,n){return n&&!GU(n)?0:typeof e=="number"?e:e==null?void 0:e[t]}function kVe(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,dataRef:i,events:s,elements:{domReference:o,floating:a}}=e,{enabled:u=!0,delay:l=0,handleClose:c=null,mouseOnly:f=!1,restMs:d=0,move:h=!0}=t,p=nG(),m=tG(),g=Aoe(c),y=Aoe(l),v=I.useRef(),b=I.useRef(-1),w=I.useRef(),E=I.useRef(-1),T=I.useRef(!0),S=I.useRef(!1),C=I.useRef(()=>{}),A=I.useCallback(()=>{var P;const $=(P=i.current.openEvent)==null?void 0:P.type;return($==null?void 0:$.includes("mouse"))&&$!=="mousedown"},[i]);I.useEffect(()=>{if(!u)return;function P($){let{open:F}=$;F||(clearTimeout(b.current),clearTimeout(E.current),T.current=!0)}return s.on("openchange",P),()=>{s.off("openchange",P)}},[u,s]),I.useEffect(()=>{if(!u||!g.current||!n)return;function P(F){A()&&r(!1,F,"hover")}const $=r1(a).documentElement;return $.addEventListener("mouseleave",P),()=>{$.removeEventListener("mouseleave",P)}},[a,n,r,u,g,A]);const k=I.useCallback(function(P,$,F){$===void 0&&($=!0),F===void 0&&(F="hover");const M=cP(y.current,"close",v.current);M&&!w.current?(clearTimeout(b.current),b.current=window.setTimeout(()=>r(!1,P,F),M)):$&&(clearTimeout(b.current),r(!1,P,F))},[y,r]),N=Ug(()=>{C.current(),w.current=void 0}),O=Ug(()=>{if(S.current){const P=r1(a).body;P.style.pointerEvents="",P.removeAttribute(Ioe),S.current=!1}});return I.useEffect(()=>{if(!u)return;function P(){return i.current.openEvent?["click","mousedown"].includes(i.current.openEvent.type):!1}function $(B){if(clearTimeout(b.current),T.current=!1,f&&!GU(v.current)||d>0&&!cP(y.current,"open"))return;const U=cP(y.current,"open",v.current);U?b.current=window.setTimeout(()=>{r(!0,B,"hover")},U):r(!0,B,"hover")}function F(B){if(P())return;C.current();const U=r1(a);if(clearTimeout(E.current),g.current&&i.current.floatingContext){n||clearTimeout(b.current),w.current=g.current({...i.current.floatingContext,tree:p,x:B.clientX,y:B.clientY,onClose(){O(),N(),k(B,!0,"safe-polygon")}});const D=w.current;U.addEventListener("mousemove",D),C.current=()=>{U.removeEventListener("mousemove",D)};return}(v.current==="touch"?!CA(a,B.relatedTarget):!0)&&k(B)}function M(B){P()||i.current.floatingContext&&(g.current==null||g.current({...i.current.floatingContext,tree:p,x:B.clientX,y:B.clientY,onClose(){O(),N(),k(B)}})(B))}if(Si(o)){const B=o;return n&&B.addEventListener("mouseleave",M),a==null||a.addEventListener("mouseleave",M),h&&B.addEventListener("mousemove",$,{once:!0}),B.addEventListener("mouseenter",$),B.addEventListener("mouseleave",F),()=>{n&&B.removeEventListener("mouseleave",M),a==null||a.removeEventListener("mouseleave",M),h&&B.removeEventListener("mousemove",$),B.removeEventListener("mouseenter",$),B.removeEventListener("mouseleave",F)}}},[o,a,u,e,f,d,h,k,N,O,r,n,p,y,g,i]),uh(()=>{var P;if(u&&n&&(P=g.current)!=null&&P.__options.blockPointerEvents&&A()){const F=r1(a).body;if(F.setAttribute(Ioe,""),F.style.pointerEvents="none",S.current=!0,Si(o)&&a){var $;const M=o,B=p==null||($=p.nodesRef.current.find(U=>U.id===m))==null||($=$.context)==null?void 0:$.elements.floating;return B&&(B.style.pointerEvents=""),M.style.pointerEvents="auto",a.style.pointerEvents="auto",()=>{M.style.pointerEvents="",a.style.pointerEvents=""}}}},[u,n,m,a,o,p,g,A]),uh(()=>{n||(v.current=void 0,N(),O())},[n,N,O]),I.useEffect(()=>()=>{N(),clearTimeout(b.current),clearTimeout(E.current),O()},[u,o,N,O]),I.useMemo(()=>{if(!u)return{};function P($){v.current=$.pointerType}return{reference:{onPointerDown:P,onPointerEnter:P,onMouseMove($){function F(){T.current||r(!0,$.nativeEvent,"hover")}f&&!GU(v.current)||n||d===0||(clearTimeout(E.current),v.current==="touch"?F():E.current=window.setTimeout(F,d))}},floating:{onMouseEnter(){clearTimeout(b.current)},onMouseLeave($){k($.nativeEvent,!1)}}}},[u,f,n,d,r,k])}const JU=()=>{},Rbe=I.createContext({delay:0,initialDelay:0,timeoutMs:0,currentId:null,setCurrentId:JU,setState:JU,isInstantPhase:!1}),Nbe=()=>I.useContext(Rbe);function RVe(e){const{children:t,delay:n,timeoutMs:r=0}=e,[i,s]=I.useReducer((u,l)=>({...u,...l}),{delay:n,timeoutMs:r,initialDelay:n,currentId:null,isInstantPhase:!1}),o=I.useRef(null),a=I.useCallback(u=>{s({currentId:u})},[]);return uh(()=>{i.currentId?o.current===null?o.current=i.currentId:i.isInstantPhase||s({isInstantPhase:!0}):(i.isInstantPhase&&s({isInstantPhase:!1}),o.current=null)},[i.currentId,i.isInstantPhase]),I.createElement(Rbe.Provider,{value:I.useMemo(()=>({...i,setState:s,setCurrentId:a}),[i,a])},t)}function NVe(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,floatingId:i}=e,{id:s}=t,o=s??i,a=Nbe(),{currentId:u,setCurrentId:l,initialDelay:c,setState:f,timeoutMs:d}=a;return uh(()=>{u&&(f({delay:{open:1,close:cP(c,"close")}}),u!==o&&r(!1))},[o,r,f,u,c]),uh(()=>{function h(){r(!1),f({delay:c,currentId:null})}if(u&&!n&&u===o){if(d){const p=window.setTimeout(h,d);return()=>{clearTimeout(p)}}h()}},[n,f,u,o,r,c,d]),uh(()=>{l===JU||!n||l(o)},[n,l,o]),a}function jj(e,t){let n=e.filter(i=>{var s;return i.parentId===t&&((s=i.context)==null?void 0:s.open)}),r=n;for(;r.length;)r=e.filter(i=>{var s;return(s=r)==null?void 0:s.some(o=>{var a;return i.parentId===o.id&&((a=i.context)==null?void 0:a.open)})}),n=n.concat(r);return n}const DVe={pointerdown:"onPointerDown",mousedown:"onMouseDown",click:"onClick"},PVe={pointerdown:"onPointerDownCapture",mousedown:"onMouseDownCapture",click:"onClickCapture"},koe=e=>{var t,n;return{escapeKey:typeof e=="boolean"?e:(t=e==null?void 0:e.escapeKey)!=null?t:!1,outsidePress:typeof e=="boolean"?e:(n=e==null?void 0:e.outsidePress)!=null?n:!0}};function OVe(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,elements:{reference:i,domReference:s,floating:o},dataRef:a}=e,{enabled:u=!0,escapeKey:l=!0,outsidePress:c=!0,outsidePressEvent:f="pointerdown",referencePress:d=!1,referencePressEvent:h="pointerdown",ancestorScroll:p=!1,bubbles:m,capture:g}=t,y=nG(),v=Ug(typeof c=="function"?c:()=>!1),b=typeof c=="function"?v:c,w=I.useRef(!1),E=I.useRef(!1),{escapeKey:T,outsidePress:S}=koe(m),{escapeKey:C,outsidePress:A}=koe(g),k=Ug($=>{var F;if(!n||!u||!l||$.key!=="Escape")return;const M=(F=a.current.floatingContext)==null?void 0:F.nodeId,B=y?jj(y.nodesRef.current,M):[];if(!T&&($.stopPropagation(),B.length>0)){let U=!0;if(B.forEach(H=>{var D;if((D=H.context)!=null&&D.open&&!H.context.dataRef.current.__escapeKeyBubbles){U=!1;return}}),!U)return}r(!1,Aze($)?$.nativeEvent:$,"escape-key")}),N=Ug($=>{var F;const M=()=>{var B;k($),(B=Z_($))==null||B.removeEventListener("keydown",M)};(F=Z_($))==null||F.addEventListener("keydown",M)}),O=Ug($=>{var F;const M=w.current;w.current=!1;const B=E.current;if(E.current=!1,f==="click"&&B||M||typeof b=="function"&&!b($))return;const U=Z_($),H="["+rG("inert")+"]",D=r1(o).querySelectorAll(H);let z=Si(U)?U:null;for(;z&&!j0(z);){const G=bm(z);if(j0(G)||!Si(G))break;z=G}if(D.length&&Si(U)&&!Ize(U)&&!CA(U,o)&&Array.from(D).every(G=>!CA(z,G)))return;if(Ml(U)&&o){const G=U.clientWidth>0&&U.scrollWidth>U.clientWidth,ne=U.clientHeight>0&&U.scrollHeight>U.clientHeight;let ce=ne&&$.offsetX>U.clientWidth;if(ne&&Dc(U).direction==="rtl"&&(ce=$.offsetX<=U.offsetWidth-U.clientWidth),ce||G&&$.offsetY>U.clientHeight)return}const W=(F=a.current.floatingContext)==null?void 0:F.nodeId,j=y&&jj(y.nodesRef.current,W).some(G=>{var ne;return Lj($,(ne=G.context)==null?void 0:ne.elements.floating)});if(Lj($,o)||Lj($,s)||j)return;const q=y?jj(y.nodesRef.current,W):[];if(q.length>0){let G=!0;if(q.forEach(ne=>{var ce;if((ce=ne.context)!=null&&ce.open&&!ne.context.dataRef.current.__outsidePressBubbles){G=!1;return}}),!G)return}r(!1,$,"outside-press")}),P=Ug($=>{var F;const M=()=>{var B;O($),(B=Z_($))==null||B.removeEventListener(f,M)};(F=Z_($))==null||F.addEventListener(f,M)});return I.useEffect(()=>{if(!n||!u)return;a.current.__escapeKeyBubbles=T,a.current.__outsidePressBubbles=S;function $(B){r(!1,B,"ancestor-scroll")}const F=r1(o);l&&F.addEventListener("keydown",C?N:k,C),b&&F.addEventListener(f,A?P:O,A);let M=[];return p&&(Si(s)&&(M=rm(s)),Si(o)&&(M=M.concat(rm(o))),!Si(i)&&i&&i.contextElement&&(M=M.concat(rm(i.contextElement)))),M=M.filter(B=>{var U;return B!==((U=F.defaultView)==null?void 0:U.visualViewport)}),M.forEach(B=>{B.addEventListener("scroll",$,{passive:!0})}),()=>{l&&F.removeEventListener("keydown",C?N:k,C),b&&F.removeEventListener(f,A?P:O,A),M.forEach(B=>{B.removeEventListener("scroll",$)})}},[a,o,s,i,l,b,f,n,r,p,u,T,S,k,C,N,O,A,P]),I.useEffect(()=>{w.current=!1},[b,f]),I.useMemo(()=>u?{reference:{onKeyDown:k,[DVe[h]]:$=>{d&&r(!1,$.nativeEvent,"reference-press")}},floating:{onKeyDown:k,onMouseDown(){E.current=!0},onMouseUp(){E.current=!0},[PVe[f]]:()=>{w.current=!0}}}:{},[u,d,f,h,r,k])}function $Ve(e){const{open:t=!1,onOpenChange:n,elements:r}=e,i=kbe(),s=I.useRef({}),[o]=I.useState(()=>CVe()),a=tG()!=null,[u,l]=I.useState(r.reference),c=Ug((h,p,m)=>{s.current.openEvent=h?p:void 0,o.emit("openchange",{open:h,event:p,reason:m,nested:a}),n==null||n(h,p,m)}),f=I.useMemo(()=>({setPositionReference:l}),[]),d=I.useMemo(()=>({reference:u||r.reference||null,floating:r.floating||null,domReference:r.reference}),[u,r.reference,r.floating]);return I.useMemo(()=>({dataRef:s,open:t,onOpenChange:c,elements:d,events:o,floatingId:i,refs:f}),[t,c,d,o,i,f])}function iG(e){e===void 0&&(e={});const{nodeId:t}=e,n=$Ve({...e,elements:{reference:null,floating:null,...e.elements}}),r=e.rootContext||n,i=r.elements,[s,o]=I.useState(null),[a,u]=I.useState(null),c=(i==null?void 0:i.reference)||s,f=I.useRef(null),d=nG();uh(()=>{c&&(f.current=c)},[c]);const h=vVe({...e,elements:{...i,...a&&{reference:a}}}),p=I.useCallback(b=>{const w=Si(b)?{getBoundingClientRect:()=>b.getBoundingClientRect(),contextElement:b}:b;u(w),h.refs.setReference(w)},[h.refs]),m=I.useCallback(b=>{(Si(b)||b===null)&&(f.current=b,o(b)),(Si(h.refs.reference.current)||h.refs.reference.current===null||b!==null&&!Si(b))&&h.refs.setReference(b)},[h.refs]),g=I.useMemo(()=>({...h.refs,setReference:m,setPositionReference:p,domReference:f}),[h.refs,m,p]),y=I.useMemo(()=>({...h.elements,domReference:c}),[h.elements,c]),v=I.useMemo(()=>({...h,...r,refs:g,elements:y,nodeId:t}),[h,g,y,t,r]);return uh(()=>{r.dataRef.current.floatingContext=v;const b=d==null?void 0:d.nodesRef.current.find(w=>w.id===t);b&&(b.context=v)}),I.useMemo(()=>({...h,context:v,refs:g,elements:y}),[h,g,y,v])}function MVe(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,events:i,dataRef:s,elements:{domReference:o}}=e,{enabled:a=!0,visibleOnly:u=!0}=t,l=I.useRef(!1),c=I.useRef(),f=I.useRef(!0);return I.useEffect(()=>{if(!a)return;const d=zu(o);function h(){!n&&Ml(o)&&o===goe(r1(o))&&(l.current=!0)}function p(){f.current=!0}return d.addEventListener("blur",h),d.addEventListener("keydown",p,!0),()=>{d.removeEventListener("blur",h),d.removeEventListener("keydown",p,!0)}},[o,n,a]),I.useEffect(()=>{if(!a)return;function d(h){let{reason:p}=h;(p==="reference-press"||p==="escape-key")&&(l.current=!0)}return i.on("openchange",d),()=>{i.off("openchange",d)}},[i,a]),I.useEffect(()=>()=>{clearTimeout(c.current)},[]),I.useMemo(()=>a?{reference:{onPointerDown(d){xze(d.nativeEvent)||(f.current=!1)},onMouseLeave(){l.current=!1},onFocus(d){if(l.current)return;const h=Z_(d.nativeEvent);if(u&&Si(h))try{if(Sze()&&Tze())throw Error();if(!h.matches(":focus-visible"))return}catch{if(!f.current&&!Rze(h))return}r(!0,d.nativeEvent,"focus")},onBlur(d){l.current=!1;const h=d.relatedTarget,p=Si(h)&&h.hasAttribute(rG("focus-guard"))&&h.getAttribute("data-type")==="outside";c.current=window.setTimeout(()=>{var m;const g=goe(o?o.ownerDocument:document);!h&&g===o||CA((m=s.current.floatingContext)==null?void 0:m.refs.floating.current,g)||CA(o,g)||p||r(!1,d.nativeEvent,"focus")})}}}:{},[a,u,s,o,r])}const Roe="active",Noe="selected";function Bj(e,t,n){const r=new Map,i=n==="item";let s=e;if(i&&e){const{[Roe]:o,[Noe]:a,...u}=e;s=u}return{...n==="floating"&&{tabIndex:-1},...s,...t.map(o=>{const a=o?o[n]:null;return typeof a=="function"?e?a(e):null:a}).concat(e).reduce((o,a)=>(a&&Object.entries(a).forEach(u=>{let[l,c]=u;if(!(i&&[Roe,Noe].includes(l)))if(l.indexOf("on")===0){if(r.has(l)||r.set(l,[]),typeof c=="function"){var f;(f=r.get(l))==null||f.push(c),o[l]=function(){for(var d,h=arguments.length,p=new Array(h),m=0;m<h;m++)p[m]=arguments[m];return(d=r.get(l))==null?void 0:d.map(g=>g(...p)).find(g=>g!==void 0)}}}else o[l]=c}),o),{})}}function LVe(e){e===void 0&&(e=[]);const t=e,n=I.useCallback(s=>Bj(s,e,"reference"),t),r=I.useCallback(s=>Bj(s,e,"floating"),t),i=I.useCallback(s=>Bj(s,e,"item"),e.map(s=>s==null?void 0:s.item));return I.useMemo(()=>({getReferenceProps:n,getFloatingProps:r,getItemProps:i}),[n,r,i])}const FVe=new Map([["select","listbox"],["combobox","listbox"],["label",!1]]);function jVe(e,t){var n;t===void 0&&(t={});const{open:r,floatingId:i}=e,{enabled:s=!0,role:o="dialog"}=t,a=(n=FVe.get(o))!=null?n:o,u=kbe(),c=tG()!=null;return I.useMemo(()=>{if(!s)return{};const f={id:i,...a&&{role:a}};return a==="tooltip"||o==="label"?{reference:{["aria-"+(o==="label"?"labelledby":"describedby")]:r?i:void 0},floating:f}:{reference:{"aria-expanded":r?"true":"false","aria-haspopup":a==="alertdialog"?"dialog":a,"aria-controls":r?i:void 0,...a==="listbox"&&{role:"combobox"},...a==="menu"&&{id:u},...a==="menu"&&c&&{role:"menuitem"},...o==="select"&&{"aria-autocomplete":"none"},...o==="combobox"&&{"aria-autocomplete":"list"}},floating:{...f,...a==="menu"&&{"aria-labelledby":u}},item(d){let{active:h,selected:p}=d;const m={role:"option",...h&&{id:i+"-option"}};switch(o){case"select":return{...m,"aria-selected":h&&p};case"combobox":return{...m,...h&&{"aria-selected":!0}}}return{}}}},[s,o,a,r,i,u,c])}function Dbe(e,t){if(e==="rtl"&&(t.includes("right")||t.includes("left"))){const[n,r]=t.split("-"),i=n==="right"?"left":"right";return r===void 0?i:`${i}-${r}`}return t}function Doe(e,t,n,r){return e==="center"||r==="center"?{top:t}:e==="end"?{bottom:n}:e==="start"?{top:n}:{}}function Poe(e,t,n,r,i){return e==="center"||r==="center"?{left:t}:e==="end"?{[i==="ltr"?"right":"left"]:n}:e==="start"?{[i==="ltr"?"left":"right"]:n}:{}}const BVe={bottom:"borderTopLeftRadius",left:"borderTopRightRadius",right:"borderBottomLeftRadius",top:"borderBottomRightRadius"};function UVe({position:e,arrowSize:t,arrowOffset:n,arrowRadius:r,arrowPosition:i,arrowX:s,arrowY:o,dir:a}){const[u,l="center"]=e.split("-"),c={width:Te(t),height:Te(t),transform:"rotate(45deg)",position:"absolute",[BVe[u]]:Te(r)},f=Te(-t/2);return u==="left"?{...c,...Doe(l,o,n,i),right:f,borderLeftColor:"transparent",borderBottomColor:"transparent"}:u==="right"?{...c,...Doe(l,o,n,i),left:f,borderRightColor:"transparent",borderTopColor:"transparent"}:u==="top"?{...c,...Poe(l,s,n,i,a),bottom:f,borderTopColor:"transparent",borderLeftColor:"transparent"}:u==="bottom"?{...c,...Poe(l,s,n,i,a),top:f,borderBottomColor:"transparent",borderRightColor:"transparent"}:{}}const sG=I.forwardRef(({position:e,arrowSize:t,arrowOffset:n,arrowRadius:r,arrowPosition:i,visible:s,arrowX:o,arrowY:a,style:u,...l},c)=>{const{dir:f}=Hh();return s?_.jsx("div",{...l,ref:c,style:{...u,...UVe({position:e,arrowSize:t,arrowOffset:n,arrowRadius:r,arrowPosition:i,dir:f,arrowX:o,arrowY:a})}}):null});sG.displayName="@mantine/core/FloatingArrow";const[zVe,Pbe]=fo("Popover component was not found in the tree");function CL({children:e,active:t=!0,refProp:n="ref"}){const r=AUe(t),i=hs(r,e==null?void 0:e.ref);return Iy(e)?I.cloneElement(e,{[n]:i}):e}function Obe(e){return _.jsx(HW,{tabIndex:-1,"data-autofocus":!0,...e})}CL.displayName="@mantine/core/FocusTrap";Obe.displayName="@mantine/core/FocusTrapInitialFocus";CL.InitialFocus=Obe;function VVe(e){const t=document.createElement("div");return t.setAttribute("data-portal","true"),typeof e.className=="string"&&t.classList.add(...e.className.split(" ").filter(Boolean)),typeof e.style=="object"&&Object.assign(t.style,e.style),typeof e.id=="string"&&t.setAttribute("id",e.id),t}const HVe={},$be=I.forwardRef((e,t)=>{const{children:n,target:r,...i}=xe("Portal",HVe,e),[s,o]=I.useState(!1),a=I.useRef(null);return Rb(()=>(o(!0),a.current=r?typeof r=="string"?document.querySelector(r):r:VVe(i),OW(t,a.current),!r&&a.current&&document.body.appendChild(a.current),()=>{!r&&a.current&&document.body.removeChild(a.current)}),[r]),!s||!a.current?null:ik.createPortal(_.jsx(_.Fragment,{children:n}),a.current)});$be.displayName="@mantine/core/Portal";function Qx({withinPortal:e=!0,children:t,...n}){return e?_.jsx($be,{...n,children:t}):_.jsx(_.Fragment,{children:t})}Qx.displayName="@mantine/core/OptionalPortal";const ET=e=>({in:{opacity:1,transform:"scale(1)"},out:{opacity:0,transform:`scale(.9) translateY(${Te(e==="bottom"?10:-10)})`},transitionProperty:"transform, opacity"}),IN={fade:{in:{opacity:1},out:{opacity:0},transitionProperty:"opacity"},"fade-up":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:`translateY(${Te(30)}`},transitionProperty:"opacity, transform"},"fade-down":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:`translateY(${Te(-30)}`},transitionProperty:"opacity, transform"},"fade-left":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:`translateX(${Te(30)}`},transitionProperty:"opacity, transform"},"fade-right":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:`translateX(${Te(-30)}`},transitionProperty:"opacity, transform"},scale:{in:{opacity:1,transform:"scale(1)"},out:{opacity:0,transform:"scale(0)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"scale-y":{in:{opacity:1,transform:"scaleY(1)"},out:{opacity:0,transform:"scaleY(0)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"scale-x":{in:{opacity:1,transform:"scaleX(1)"},out:{opacity:0,transform:"scaleX(0)"},common:{transformOrigin:"left"},transitionProperty:"transform, opacity"},"skew-up":{in:{opacity:1,transform:"translateY(0) skew(0deg, 0deg)"},out:{opacity:0,transform:`translateY(${Te(-20)}) skew(-10deg, -5deg)`},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"skew-down":{in:{opacity:1,transform:"translateY(0) skew(0deg, 0deg)"},out:{opacity:0,transform:`translateY(${Te(20)}) skew(-10deg, -5deg)`},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"rotate-left":{in:{opacity:1,transform:"translateY(0) rotate(0deg)"},out:{opacity:0,transform:`translateY(${Te(20)}) rotate(-5deg)`},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"rotate-right":{in:{opacity:1,transform:"translateY(0) rotate(0deg)"},out:{opacity:0,transform:`translateY(${Te(20)}) rotate(5deg)`},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"slide-down":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(-100%)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"slide-up":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(100%)"},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"slide-left":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(100%)"},common:{transformOrigin:"left"},transitionProperty:"transform, opacity"},"slide-right":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(-100%)"},common:{transformOrigin:"right"},transitionProperty:"transform, opacity"},pop:{...ET("bottom"),common:{transformOrigin:"center center"}},"pop-bottom-left":{...ET("bottom"),common:{transformOrigin:"bottom left"}},"pop-bottom-right":{...ET("bottom"),common:{transformOrigin:"bottom right"}},"pop-top-left":{...ET("top"),common:{transformOrigin:"top left"}},"pop-top-right":{...ET("top"),common:{transformOrigin:"top right"}}},Ooe={entering:"in",entered:"in",exiting:"out",exited:"out","pre-exiting":"out","pre-entering":"out"};function qVe({transition:e,state:t,duration:n,timingFunction:r}){const i={transitionDuration:`${n}ms`,transitionTimingFunction:r};return typeof e=="string"?e in IN?{transitionProperty:IN[e].transitionProperty,...i,...IN[e].common,...IN[e][Ooe[t]]}:{}:{transitionProperty:e.transitionProperty,...i,...e.common,...e[Ooe[t]]}}function WVe({duration:e,exitDuration:t,timingFunction:n,mounted:r,onEnter:i,onExit:s,onEntered:o,onExited:a}){const u=ps(),l=_L(),c=u.respectReducedMotion?l:!1,[f,d]=I.useState(c?0:e),[h,p]=I.useState(r?"entered":"exited"),m=I.useRef(-1),g=I.useRef(-1),y=v=>{const b=v?i:s,w=v?o:a;window.clearTimeout(m.current);const E=c?0:v?e:t;d(E),E===0?(typeof b=="function"&&b(),typeof w=="function"&&w(),p(v?"entered":"exited")):g.current=requestAnimationFrame(()=>{y2.flushSync(()=>{p(v?"pre-entering":"pre-exiting")}),g.current=requestAnimationFrame(()=>{typeof b=="function"&&b(),p(v?"entering":"exiting"),m.current=window.setTimeout(()=>{typeof w=="function"&&w(),p(v?"entered":"exited")},E)})})};return Sh(()=>{y(r)},[r]),I.useEffect(()=>()=>{window.clearTimeout(m.current),cancelAnimationFrame(g.current)},[]),{transitionDuration:f,transitionStatus:h,transitionTimingFunction:n||"ease"}}function qm({keepMounted:e,transition:t="fade",duration:n=250,exitDuration:r=n,mounted:i,children:s,timingFunction:o="ease",onExit:a,onEntered:u,onEnter:l,onExited:c}){const{transitionDuration:f,transitionStatus:d,transitionTimingFunction:h}=WVe({mounted:i,exitDuration:r,duration:n,timingFunction:o,onExit:a,onEntered:u,onEnter:l,onExited:c});return f===0?i?_.jsx(_.Fragment,{children:s({})}):e?s({display:"none"}):null:d==="exited"?e?s({display:"none"}):null:_.jsx(_.Fragment,{children:s(qVe({transition:t,duration:f,state:d,timingFunction:h}))})}qm.displayName="@mantine/core/Transition";var Mbe={dropdown:"m_38a85659",arrow:"m_a31dc6c1"};const GVe={},oG=Me((e,t)=>{var g,y,v,b;const n=xe("PopoverDropdown",GVe,e),{className:r,style:i,vars:s,children:o,onKeyDownCapture:a,variant:u,classNames:l,styles:c,...f}=n,d=Pbe(),h=F1e({opened:d.opened,shouldReturnFocus:d.returnFocus}),p=d.withRoles?{"aria-labelledby":d.getTargetId(),id:d.getDropdownId(),role:"dialog",tabIndex:-1}:{},m=hs(t,d.floating);return d.disabled?null:_.jsx(Qx,{...d.portalProps,withinPortal:d.withinPortal,children:_.jsx(qm,{mounted:d.opened,...d.transitionProps,transition:((g=d.transitionProps)==null?void 0:g.transition)||"fade",duration:((y=d.transitionProps)==null?void 0:y.duration)??150,keepMounted:d.keepMounted,exitDuration:typeof((v=d.transitionProps)==null?void 0:v.exitDuration)=="number"?d.transitionProps.exitDuration:(b=d.transitionProps)==null?void 0:b.duration,children:w=>_.jsx(CL,{active:d.trapFocus,children:_.jsxs(pe,{...p,...f,variant:u,ref:m,onKeyDownCapture:pUe(d.onClose,{active:d.closeOnEscape,onTrigger:h,onKeyDown:a}),"data-position":d.placement,...d.getStyles("dropdown",{className:r,props:n,classNames:l,styles:c,style:[{...w,zIndex:d.zIndex,top:d.y??0,left:d.x??0,width:d.width==="target"?void 0:Te(d.width)},i]}),children:[o,_.jsx(sG,{ref:d.arrowRef,arrowX:d.arrowX,arrowY:d.arrowY,visible:d.withArrow,position:d.placement,arrowSize:d.arrowSize,arrowRadius:d.arrowRadius,arrowOffset:d.arrowOffset,arrowPosition:d.arrowPosition,...d.getStyles("arrow",{props:n,classNames:l,styles:c})})]})})})})});oG.classes=Mbe;oG.displayName="@mantine/core/PopoverDropdown";const YVe={refProp:"ref",popupType:"dialog"},Lbe=Me((e,t)=>{const{children:n,refProp:r,popupType:i,...s}=xe("PopoverTarget",YVe,e);if(!Iy(n))throw new Error("Popover.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const o=s,a=Pbe(),u=hs(a.reference,n.ref,t),l=a.withRoles?{"aria-haspopup":i,"aria-expanded":a.opened,"aria-controls":a.getDropdownId(),id:a.getTargetId()}:{};return I.cloneElement(n,{...o,...l,...a.targetProps,className:Xi(a.targetProps.className,o.className,n.props.className),[r]:u,...a.controlled?null:{onClick:a.onToggle}})});Lbe.displayName="@mantine/core/PopoverTarget";function Fbe({opened:e,floating:t,position:n,positionDependencies:r}){const[i,s]=I.useState(0);I.useEffect(()=>{if(t.refs.reference.current&&t.refs.floating.current)return cVe(t.refs.reference.current,t.refs.floating.current,t.update)},[t.refs.reference.current,t.refs.floating.current,e,i,n]),Sh(()=>{t.update()},r),Sh(()=>{s(o=>o+1)},[e])}function KVe(e){if(e===void 0)return{shift:!0,flip:!0};const t={...e};return e.shift===void 0&&(t.shift=!0),e.flip===void 0&&(t.flip=!0),t}function XVe(e,t){const n=KVe(e.middlewares),r=[Cbe(e.offset)];return n.shift&&r.push(eG(typeof n.shift=="boolean"?{limiter:Soe(),padding:5}:{limiter:Soe(),padding:5,...n.shift})),n.flip&&r.push(typeof n.flip=="boolean"?XU():XU(n.flip)),n.inline&&r.push(typeof n.inline=="boolean"?QU():QU(n.inline)),r.push(Abe({element:e.arrowRef,padding:e.arrowOffset})),(n.size||e.width==="target")&&r.push(_Ve({...typeof n.size=="boolean"?{}:n.size,apply({rects:i,availableWidth:s,availableHeight:o}){var l;const u=((l=t().refs.floating.current)==null?void 0:l.style)??{};n.size&&Object.assign(u,{maxWidth:`${s}px`,maxHeight:`${o}px`}),e.width==="target"&&Object.assign(u,{width:`${i.reference.width}px`})}})),r}function QVe(e){const[t,n]=Ss({value:e.opened,defaultValue:e.defaultOpened,finalValue:!1,onChange:e.onChange}),r=()=>{var o;t&&((o=e.onClose)==null||o.call(e),n(!1))},i=()=>{var o,a;t?((o=e.onClose)==null||o.call(e),n(!1)):((a=e.onOpen)==null||a.call(e),n(!0))},s=iG({strategy:e.strategy,placement:e.position,middleware:XVe(e,()=>s)});return Fbe({opened:e.opened,position:e.position,positionDependencies:e.positionDependencies||[],floating:s}),Sh(()=>{var o;(o=e.onPositionChange)==null||o.call(e,s.placement)},[s.placement]),Sh(()=>{var o,a;e.opened?(a=e.onOpen)==null||a.call(e):(o=e.onClose)==null||o.call(e)},[e.opened]),{floating:s,controlled:typeof e.opened=="boolean",opened:t,onClose:r,onToggle:i}}const JVe={position:"bottom",offset:8,positionDependencies:[],transitionProps:{transition:"fade",duration:150},middlewares:{flip:!0,shift:!0,inline:!1},arrowSize:7,arrowOffset:5,arrowRadius:0,arrowPosition:"side",closeOnClickOutside:!0,withinPortal:!0,closeOnEscape:!0,trapFocus:!1,withRoles:!0,returnFocus:!1,clickOutsideEvents:["mousedown","touchstart"],zIndex:Jl("popover"),__staticSelector:"Popover",width:"max-content"},ZVe=(e,{radius:t,shadow:n})=>({dropdown:{"--popover-radius":t===void 0?void 0:Ur(t),"--popover-shadow":DW(n)}});function Do(e){var _e,ke,ze,ct,Ot,We;const t=xe("Popover",JVe,e),{children:n,position:r,offset:i,onPositionChange:s,positionDependencies:o,opened:a,transitionProps:u,width:l,middlewares:c,withArrow:f,arrowSize:d,arrowOffset:h,arrowRadius:p,arrowPosition:m,unstyled:g,classNames:y,styles:v,closeOnClickOutside:b,withinPortal:w,portalProps:E,closeOnEscape:T,clickOutsideEvents:S,trapFocus:C,onClose:A,onOpen:k,onChange:N,zIndex:O,radius:P,shadow:$,id:F,defaultOpened:M,__staticSelector:B,withRoles:U,disabled:H,returnFocus:D,variant:z,keepMounted:W,vars:j,floatingStrategy:q,...G}=t,ne=dt({name:B,props:t,classes:Mbe,classNames:y,styles:v,unstyled:g,rootSelector:"dropdown",vars:j,varsResolver:ZVe}),ce=I.useRef(null),[de,he]=I.useState(null),[ve,Ie]=I.useState(null),{dir:be}=Hh(),Ke=Ta(F),Ue=QVe({middlewares:c,width:l,position:Dbe(be,r),offset:typeof i=="number"?i+(f?d/2:0):i,arrowRef:ce,arrowOffset:h,onPositionChange:s,positionDependencies:o,opened:a,defaultOpened:M,onChange:N,onOpen:k,onClose:A,strategy:q});yUe(()=>b&&Ue.onClose(),S,[de,ve]);const yt=I.useCallback(ge=>{he(ge),Ue.floating.refs.setReference(ge)},[Ue.floating.refs.setReference]),it=I.useCallback(ge=>{Ie(ge),Ue.floating.refs.setFloating(ge)},[Ue.floating.refs.setFloating]);return _.jsx(zVe,{value:{returnFocus:D,disabled:H,controlled:Ue.controlled,reference:yt,floating:it,x:Ue.floating.x,y:Ue.floating.y,arrowX:(ze=(ke=(_e=Ue.floating)==null?void 0:_e.middlewareData)==null?void 0:ke.arrow)==null?void 0:ze.x,arrowY:(We=(Ot=(ct=Ue.floating)==null?void 0:ct.middlewareData)==null?void 0:Ot.arrow)==null?void 0:We.y,opened:Ue.opened,arrowRef:ce,transitionProps:u,width:l,withArrow:f,arrowSize:d,arrowOffset:h,arrowRadius:p,arrowPosition:m,placement:Ue.floating.placement,trapFocus:C,withinPortal:w,portalProps:E,zIndex:O,radius:P,shadow:$,closeOnEscape:T,onClose:Ue.onClose,onToggle:Ue.onToggle,getTargetId:()=>`${Ke}-target`,getDropdownId:()=>`${Ke}-dropdown`,withRoles:U,targetProps:G,__staticSelector:B,classNames:y,styles:v,unstyled:g,variant:z,keepMounted:W,getStyles:ne},children:n})}Do.Target=Lbe;Do.Dropdown=oG;Do.displayName="@mantine/core/Popover";Do.extend=e=>e;var kf={root:"m_5ae2e3c",barsLoader:"m_7a2bd4cd",bar:"m_870bb79","bars-loader-animation":"m_5d2b3b9d",dotsLoader:"m_4e3f22d7",dot:"m_870c4af","loader-dots-animation":"m_aac34a1",ovalLoader:"m_b34414df","oval-loader-animation":"m_f8e89c4b"};const eHe=I.forwardRef(({className:e,...t},n)=>_.jsxs(pe,{component:"span",className:Xi(kf.barsLoader,e),...t,ref:n,children:[_.jsx("span",{className:kf.bar}),_.jsx("span",{className:kf.bar}),_.jsx("span",{className:kf.bar})]})),tHe=I.forwardRef(({className:e,...t},n)=>_.jsxs(pe,{component:"span",className:Xi(kf.dotsLoader,e),...t,ref:n,children:[_.jsx("span",{className:kf.dot}),_.jsx("span",{className:kf.dot}),_.jsx("span",{className:kf.dot})]})),nHe=I.forwardRef(({className:e,...t},n)=>_.jsx(pe,{component:"span",className:Xi(kf.ovalLoader,e),...t,ref:n})),jbe={bars:eHe,oval:nHe,dots:tHe},rHe={loaders:jbe,type:"oval"},iHe=(e,{size:t,color:n})=>({root:{"--loader-size":tn(t,"loader-size"),"--loader-color":n?$r(n,e):void 0}}),sd=Me((e,t)=>{const n=xe("Loader",rHe,e),{size:r,color:i,type:s,vars:o,className:a,style:u,classNames:l,styles:c,unstyled:f,loaders:d,variant:h,children:p,...m}=n,g=dt({name:"Loader",props:n,classes:kf,className:a,style:u,classNames:l,styles:c,unstyled:f,vars:o,varsResolver:iHe});return p?_.jsx(pe,{...g("root"),ref:t,...m,children:p}):_.jsx(pe,{...g("root"),ref:t,component:d[s],variant:h,size:r,...m})});sd.defaultLoaders=jbe;sd.classes=kf;sd.displayName="@mantine/core/Loader";var AL={root:"m_8d3f4000",icon:"m_8d3afb97",loader:"m_302b9fb1",group:"m_1a0f1b21"};const $oe={orientation:"horizontal"},sHe=(e,{borderWidth:t})=>({group:{"--ai-border-width":Te(t)}}),aG=Me((e,t)=>{const n=xe("ActionIconGroup",$oe,e),{className:r,style:i,classNames:s,styles:o,unstyled:a,orientation:u,vars:l,borderWidth:c,variant:f,mod:d,...h}=xe("ActionIconGroup",$oe,e),p=dt({name:"ActionIconGroup",props:n,classes:AL,className:r,style:i,classNames:s,styles:o,unstyled:a,vars:l,varsResolver:sHe,rootSelector:"group"});return _.jsx(pe,{...p("group"),ref:t,variant:f,mod:[{"data-orientation":u},d],role:"group",...h})});aG.classes=AL;aG.displayName="@mantine/core/ActionIconGroup";const oHe={},aHe=(e,{size:t,radius:n,variant:r,gradient:i,color:s,autoContrast:o})=>{const a=e.variantColorResolver({color:s||e.primaryColor,theme:e,gradient:i,variant:r||"filled",autoContrast:o});return{root:{"--ai-size":tn(t,"ai-size"),"--ai-radius":n===void 0?void 0:Ur(n),"--ai-bg":s||r?a.background:void 0,"--ai-hover":s||r?a.hover:void 0,"--ai-hover-color":s||r?a.hoverColor:void 0,"--ai-color":a.color,"--ai-bd":s||r?a.border:void 0}}},$b=Us((e,t)=>{const n=xe("ActionIcon",oHe,e),{className:r,unstyled:i,variant:s,classNames:o,styles:a,style:u,loading:l,loaderProps:c,size:f,color:d,radius:h,__staticSelector:p,gradient:m,vars:g,children:y,disabled:v,"data-disabled":b,autoContrast:w,mod:E,...T}=n,S=dt({name:["ActionIcon",p],props:n,className:r,style:u,classes:AL,classNames:o,styles:a,unstyled:i,vars:g,varsResolver:aHe});return _.jsxs(xs,{...S("root",{active:!v&&!l&&!b}),...T,unstyled:i,variant:s,size:f,disabled:v||l,ref:t,mod:[{loading:l,disabled:v||b},E],children:[_.jsx(qm,{mounted:!!l,transition:"slide-down",duration:150,children:C=>_.jsx(pe,{component:"span",...S("loader",{style:C}),"aria-hidden":!0,children:_.jsx(sd,{color:"var(--ai-color)",size:"calc(var(--ai-size) * 0.55)",...c})})}),_.jsx(pe,{component:"span",mod:{loading:l},...S("icon"),children:y})]})});$b.classes=AL;$b.displayName="@mantine/core/ActionIcon";$b.Group=aG;const Bbe=I.forwardRef(({size:e="var(--cb-icon-size, 70%)",style:t,...n},r)=>_.jsx("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{...t,width:e,height:e},ref:r,...n,children:_.jsx("path",{d:"M11.7816 4.03157C12.0062 3.80702 12.0062 3.44295 11.7816 3.2184C11.5571 2.99385 11.193 2.99385 10.9685 3.2184L7.50005 6.68682L4.03164 3.2184C3.80708 2.99385 3.44301 2.99385 3.21846 3.2184C2.99391 3.44295 2.99391 3.80702 3.21846 4.03157L6.68688 7.49999L3.21846 10.9684C2.99391 11.193 2.99391 11.557 3.21846 11.7816C3.44301 12.0061 3.80708 12.0061 4.03164 11.7816L7.50005 8.31316L10.9685 11.7816C11.193 12.0061 11.5571 12.0061 11.7816 11.7816C12.0062 11.557 12.0062 11.193 11.7816 10.9684L8.31322 7.49999L11.7816 4.03157Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})}));Bbe.displayName="@mantine/core/CloseIcon";var Ube={root:"m_86a44da5","root--subtle":"m_220c80f2"};const uHe={variant:"subtle"},lHe=(e,{size:t,radius:n,iconSize:r})=>({root:{"--cb-size":tn(t,"cb-size"),"--cb-radius":n===void 0?void 0:Ur(n),"--cb-icon-size":Te(r)}}),Wm=Us((e,t)=>{const n=xe("CloseButton",uHe,e),{iconSize:r,children:i,vars:s,radius:o,className:a,classNames:u,style:l,styles:c,unstyled:f,"data-disabled":d,disabled:h,variant:p,icon:m,mod:g,...y}=n,v=dt({name:"CloseButton",props:n,className:a,style:l,classes:Ube,classNames:u,styles:c,unstyled:f,vars:s,varsResolver:lHe});return _.jsxs(xs,{ref:t,...y,unstyled:f,variant:p,disabled:h,mod:[{disabled:h||d},g],...v("root",{variant:p,active:!h&&!d}),children:[m||_.jsx(Bbe,{}),i]})});Wm.classes=Ube;Wm.displayName="@mantine/core/CloseButton";function cHe(e){return I.Children.toArray(e).filter(Boolean)}var zbe={root:"m_4081bf90"};const fHe={preventGrowOverflow:!0,gap:"md",align:"center",justify:"flex-start",wrap:"wrap"},dHe=(e,{grow:t,preventGrowOverflow:n,gap:r,align:i,justify:s,wrap:o},{childWidth:a})=>({root:{"--group-child-width":t&&n?a:void 0,"--group-gap":as(r),"--group-align":i,"--group-justify":s,"--group-wrap":o}}),ls=Me((e,t)=>{const n=xe("Group",fHe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,children:u,gap:l,align:c,justify:f,wrap:d,grow:h,preventGrowOverflow:p,vars:m,variant:g,__size:y,mod:v,...b}=n,w=cHe(u),E=w.length,T=as(l??"md"),C={childWidth:`calc(${100/E}% - (${T} - ${T} / ${E}))`},A=dt({name:"Group",props:n,stylesCtx:C,className:i,style:s,classes:zbe,classNames:r,styles:o,unstyled:a,vars:m,varsResolver:dHe});return _.jsx(pe,{...A("root"),ref:t,variant:g,mod:[{grow:h},v],size:y,...b,children:w})});ls.classes=zbe;ls.displayName="@mantine/core/Group";var Vbe={root:"m_9814e45f"};const hHe={zIndex:Jl("modal")},pHe=(e,{gradient:t,color:n,backgroundOpacity:r,blur:i,radius:s,zIndex:o})=>({root:{"--overlay-bg":t||(n!==void 0||r!==void 0)&&Rd(n||"#000",r??.6)||void 0,"--overlay-filter":i?`blur(${Te(i)})`:void 0,"--overlay-radius":s===void 0?void 0:Ur(s),"--overlay-z-index":o==null?void 0:o.toString()}}),AA=Us((e,t)=>{const n=xe("Overlay",hHe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,fixed:l,center:c,children:f,radius:d,zIndex:h,gradient:p,blur:m,color:g,backgroundOpacity:y,mod:v,...b}=n,w=dt({name:"Overlay",props:n,classes:Vbe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:pHe});return _.jsx(pe,{ref:t,...w("root"),mod:[{center:c,fixed:l},v],...b,children:f})});AA.classes=Vbe;AA.displayName="@mantine/core/Overlay";const[mHe,Gm]=fo("ModalBase component was not found in tree");function gHe({opened:e,transitionDuration:t}){const[n,r]=I.useState(e),i=I.useRef(),o=_L()?0:t;return I.useEffect(()=>(e?(r(!0),window.clearTimeout(i.current)):o===0?r(!1):i.current=window.setTimeout(()=>r(!1),o),()=>window.clearTimeout(i.current)),[e,o]),n}function yHe({id:e,transitionProps:t,opened:n,trapFocus:r,closeOnEscape:i,onClose:s,returnFocus:o}){const a=Ta(e),[u,l]=I.useState(!1),[c,f]=I.useState(!1),d=typeof(t==null?void 0:t.duration)=="number"?t==null?void 0:t.duration:200,h=gHe({opened:n,transitionDuration:d});return z1e("keydown",p=>{var m;p.key==="Escape"&&i&&n&&((m=p.target)==null?void 0:m.getAttribute("data-mantine-stop-propagation"))!=="true"&&s()},{capture:!0}),F1e({opened:n,shouldReturnFocus:r&&o}),{_id:a,titleMounted:u,bodyMounted:c,shouldLockScroll:h,setTitleMounted:l,setBodyMounted:f}}const Hbe=I.forwardRef(({keepMounted:e,opened:t,onClose:n,id:r,transitionProps:i,trapFocus:s,closeOnEscape:o,returnFocus:a,closeOnClickOutside:u,withinPortal:l,portalProps:c,lockScroll:f,children:d,zIndex:h,shadow:p,padding:m,__vars:g,unstyled:y,removeScrollProps:v,...b},w)=>{const{_id:E,titleMounted:T,bodyMounted:S,shouldLockScroll:C,setTitleMounted:A,setBodyMounted:k}=yHe({id:r,transitionProps:i,opened:t,trapFocus:s,closeOnEscape:o,onClose:n,returnFocus:a});return _.jsx(Qx,{...c,withinPortal:l,children:_.jsx(mHe,{value:{opened:t,onClose:n,closeOnClickOutside:u,transitionProps:{...i,keepMounted:e},getTitleId:()=>`${E}-title`,getBodyId:()=>`${E}-body`,titleMounted:T,bodyMounted:S,setTitleMounted:A,setBodyMounted:k,trapFocus:s,closeOnEscape:o,zIndex:h,unstyled:y},children:_.jsx(vL,{enabled:C&&f,...v,children:_.jsx(pe,{ref:w,...b,__vars:{...g,"--mb-z-index":(h||Jl("modal")).toString(),"--mb-shadow":DW(p),"--mb-padding":as(m)},children:d})})})})});function vHe(){const e=Gm();return I.useEffect(()=>(e.setBodyMounted(!0),()=>e.setBodyMounted(!1)),[]),e.getBodyId()}var OE={title:"m_615af6c9",header:"m_b5489c3c",inner:"m_60c222c7",content:"m_fd1ab0aa",close:"m_606cb269",body:"m_5df29311"};const uG=I.forwardRef(({className:e,...t},n)=>{const r=vHe(),i=Gm();return _.jsx(pe,{ref:n,...t,id:r,className:Xi({[OE.body]:!i.unstyled},e)})});uG.displayName="@mantine/core/ModalBaseBody";const lG=I.forwardRef(({className:e,onClick:t,...n},r)=>{const i=Gm();return _.jsx(Wm,{ref:r,...n,onClick:s=>{i.onClose(),t==null||t(s)},className:Xi({[OE.close]:!i.unstyled},e),unstyled:i.unstyled})});lG.displayName="@mantine/core/ModalBaseCloseButton";const qbe=I.forwardRef(({transitionProps:e,className:t,innerProps:n,onKeyDown:r,style:i,...s},o)=>{const a=Gm();return _.jsx(qm,{mounted:a.opened,transition:"pop",...a.transitionProps,...e,children:u=>_.jsx("div",{...n,className:Xi({[OE.inner]:!a.unstyled},n.className),children:_.jsx(CL,{active:a.opened&&a.trapFocus,children:_.jsx(Pb,{...s,component:"section",role:"dialog",tabIndex:-1,"aria-modal":!0,"aria-describedby":a.bodyMounted?a.getBodyId():void 0,"aria-labelledby":a.titleMounted?a.getTitleId():void 0,ref:o,style:[i,u],className:Xi({[OE.content]:!a.unstyled},t),unstyled:a.unstyled,children:s.children})})})})}),cG=I.forwardRef(({className:e,...t},n)=>{const r=Gm();return _.jsx(pe,{component:"header",ref:n,className:Xi({[OE.header]:!r.unstyled},e),...t})});cG.displayName="@mantine/core/ModalBaseHeader";const bHe={duration:200,timingFunction:"ease",transition:"fade"};function _He(e){const t=Gm();return{...bHe,...t.transitionProps,...e}}const fG=I.forwardRef(({onClick:e,transitionProps:t,style:n,...r},i)=>{const s=Gm(),o=_He(t);return _.jsx(qm,{mounted:s.opened,...o,transition:"fade",children:a=>_.jsx(AA,{ref:i,fixed:!0,style:[n,a],zIndex:s.zIndex,unstyled:s.unstyled,onClick:u=>{e==null||e(u),s.closeOnClickOutside&&s.onClose()},...r})})});fG.displayName="@mantine/core/ModalBaseOverlay";function wHe(){const e=Gm();return I.useEffect(()=>(e.setTitleMounted(!0),()=>e.setTitleMounted(!1)),[]),e.getTitleId()}const dG=I.forwardRef(({className:e,...t},n)=>{const r=wHe(),i=Gm();return _.jsx(pe,{component:"h2",ref:n,className:Xi({[OE.title]:!i.unstyled},e),...t,id:r})});dG.displayName="@mantine/core/ModalBaseTitle";function Wbe({children:e}){return _.jsx(_.Fragment,{children:e})}const[EHe,Jx]=Gx({offsetBottom:!1,offsetTop:!1,describedBy:void 0,getStyles:null,inputId:void 0,labelId:void 0});var Hc={wrapper:"m_6c018570",input:"m_8fb7ebe7",section:"m_82577fc2",placeholder:"m_88bacfd0",root:"m_46b77525",label:"m_8fdc1311",required:"m_78a94662",error:"m_8f816625",description:"m_fe47ce59"};const Moe={},xHe=(e,{size:t})=>({description:{"--input-description-size":t===void 0?void 0:`calc(${uo(t)} - ${Te(2)})`}}),IL=Me((e,t)=>{const n=xe("InputDescription",Moe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,size:l,__staticSelector:c,__inheritStyles:f=!0,variant:d,...h}=xe("InputDescription",Moe,n),p=Jx(),m=dt({name:["InputWrapper",c],props:n,classes:Hc,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"description",vars:u,varsResolver:xHe}),g=f&&(p==null?void 0:p.getStyles)||m;return _.jsx(pe,{component:"p",ref:t,variant:d,size:l,...g("description",p!=null&&p.getStyles?{className:i,style:s}:void 0),...h})});IL.classes=Hc;IL.displayName="@mantine/core/InputDescription";const SHe={},THe=(e,{size:t})=>({error:{"--input-error-size":t===void 0?void 0:`calc(${uo(t)} - ${Te(2)})`}}),kL=Me((e,t)=>{const n=xe("InputError",SHe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,size:l,__staticSelector:c,__inheritStyles:f=!0,variant:d,...h}=n,p=dt({name:["InputWrapper",c],props:n,classes:Hc,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"error",vars:u,varsResolver:THe}),m=Jx(),g=f&&(m==null?void 0:m.getStyles)||p;return _.jsx(pe,{component:"p",ref:t,variant:d,size:l,...g("error",m!=null&&m.getStyles?{className:i,style:s}:void 0),...h})});kL.classes=Hc;kL.displayName="@mantine/core/InputError";const Loe={labelElement:"label"},CHe=(e,{size:t})=>({label:{"--input-label-size":uo(t),"--input-asterisk-color":void 0}}),RL=Me((e,t)=>{const n=xe("InputLabel",Loe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,labelElement:l,size:c,required:f,htmlFor:d,onMouseDown:h,children:p,__staticSelector:m,variant:g,mod:y,...v}=xe("InputLabel",Loe,n),b=dt({name:["InputWrapper",m],props:n,classes:Hc,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"label",vars:u,varsResolver:CHe}),w=Jx(),E=(w==null?void 0:w.getStyles)||b;return _.jsxs(pe,{...E("label",w!=null&&w.getStyles?{className:i,style:s}:void 0),component:l,variant:g,size:c,ref:t,htmlFor:l==="label"?d:void 0,mod:[{required:f},y],onMouseDown:T=>{h==null||h(T),!T.defaultPrevented&&T.detail>1&&T.preventDefault()},...v,children:[p,f&&_.jsx("span",{...E("required"),"aria-hidden":!0,children:" *"})]})});RL.classes=Hc;RL.displayName="@mantine/core/InputLabel";const Foe={},hG=Me((e,t)=>{const n=xe("InputPlaceholder",Foe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,__staticSelector:l,variant:c,error:f,mod:d,...h}=xe("InputPlaceholder",Foe,n),p=dt({name:["InputPlaceholder",l],props:n,classes:Hc,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"placeholder"});return _.jsx(pe,{...p("placeholder"),mod:[{error:!!f},d],component:"span",variant:c,ref:t,...h})});hG.classes=Hc;hG.displayName="@mantine/core/InputPlaceholder";function AHe(e,{hasDescription:t,hasError:n}){const r=e.findIndex(u=>u==="input"),i=e.slice(0,r),s=e.slice(r+1),o=t&&i.includes("description")||n&&i.includes("error");return{offsetBottom:t&&s.includes("description")||n&&s.includes("error"),offsetTop:o}}const IHe={labelElement:"label",inputContainer:e=>e,inputWrapperOrder:["label","description","input","error"]},kHe=(e,{size:t})=>({label:{"--input-label-size":uo(t),"--input-asterisk-color":void 0},error:{"--input-error-size":t===void 0?void 0:`calc(${uo(t)} - ${Te(2)})`},description:{"--input-description-size":t===void 0?void 0:`calc(${uo(t)} - ${Te(2)})`}}),pG=Me((e,t)=>{const n=xe("InputWrapper",IHe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,size:l,variant:c,__staticSelector:f,inputContainer:d,inputWrapperOrder:h,label:p,error:m,description:g,labelProps:y,descriptionProps:v,errorProps:b,labelElement:w,children:E,withAsterisk:T,id:S,required:C,__stylesApiProps:A,mod:k,...N}=n,O=dt({name:["InputWrapper",f],props:A||n,classes:Hc,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:kHe}),P={size:l,variant:c,__staticSelector:f},$=Ta(S),F=typeof T=="boolean"?T:C,M=(b==null?void 0:b.id)||`${$}-error`,B=(v==null?void 0:v.id)||`${$}-description`,U=$,H=!!m&&typeof m!="boolean",D=!!g,z=`${H?M:""} ${D?B:""}`,W=z.trim().length>0?z.trim():void 0,j=(y==null?void 0:y.id)||`${$}-label`,q=p&&_.jsx(RL,{labelElement:w,id:j,htmlFor:U,required:F,...P,...y,children:p},"label"),G=D&&_.jsx(IL,{...v,...P,size:(v==null?void 0:v.size)||P.size,id:(v==null?void 0:v.id)||B,children:g},"description"),ne=_.jsx(I.Fragment,{children:d(E)},"input"),ce=H&&I.createElement(kL,{...b,...P,size:(b==null?void 0:b.size)||P.size,key:"error",id:(b==null?void 0:b.id)||M},m),de=h.map(he=>{switch(he){case"label":return q;case"input":return ne;case"description":return G;case"error":return ce;default:return null}});return _.jsx(EHe,{value:{getStyles:O,describedBy:W,inputId:U,labelId:j,...AHe(h,{hasDescription:D,hasError:H})},children:_.jsx(pe,{ref:t,variant:c,size:l,mod:[{error:!!m},k],...O("root"),...N,children:de})})});pG.classes=Hc;pG.displayName="@mantine/core/InputWrapper";const RHe={variant:"default",leftSectionPointerEvents:"none",rightSectionPointerEvents:"none",withAria:!0,withErrorStyles:!0},NHe=(e,t,n)=>({wrapper:{"--input-margin-top":n.offsetTop?"calc(var(--mantine-spacing-xs) / 2)":void 0,"--input-margin-bottom":n.offsetBottom?"calc(var(--mantine-spacing-xs) / 2)":void 0,"--input-height":tn(t.size,"input-height"),"--input-fz":uo(t.size),"--input-radius":t.radius===void 0?void 0:Ur(t.radius),"--input-left-section-width":t.leftSectionWidth!==void 0?Te(t.leftSectionWidth):void 0,"--input-right-section-width":t.rightSectionWidth!==void 0?Te(t.rightSectionWidth):void 0,"--input-padding-y":t.multiline?tn(t.size,"input-padding-y"):void 0,"--input-left-section-pointer-events":t.leftSectionPointerEvents,"--input-right-section-pointer-events":t.rightSectionPointerEvents}}),mi=Us((e,t)=>{const n=xe("Input",RHe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,required:u,__staticSelector:l,__stylesApiProps:c,size:f,wrapperProps:d,error:h,disabled:p,leftSection:m,leftSectionProps:g,leftSectionWidth:y,rightSection:v,rightSectionProps:b,rightSectionWidth:w,rightSectionPointerEvents:E,leftSectionPointerEvents:T,variant:S,vars:C,pointer:A,multiline:k,radius:N,id:O,withAria:P,withErrorStyles:$,mod:F,inputSize:M,...B}=n,{styleProps:U,rest:H}=Db(B),D=Jx(),z={offsetBottom:D==null?void 0:D.offsetBottom,offsetTop:D==null?void 0:D.offsetTop},W=dt({name:["Input",l],props:c||n,classes:Hc,className:i,style:s,classNames:r,styles:o,unstyled:a,stylesCtx:z,rootSelector:"wrapper",vars:C,varsResolver:NHe}),j=P?{required:u,disabled:p,"aria-invalid":!!h,"aria-describedby":D==null?void 0:D.describedBy,id:(D==null?void 0:D.inputId)||O}:{};return _.jsxs(pe,{...W("wrapper"),...U,...d,mod:[{error:!!h&&$,pointer:A,disabled:p,multiline:k,"data-with-right-section":!!v,"data-with-left-section":!!m},F],variant:S,size:f,children:[m&&_.jsx("div",{...g,"data-position":"left",...W("section",{className:g==null?void 0:g.className,style:g==null?void 0:g.style}),children:m}),_.jsx(pe,{component:"input",...H,...j,ref:t,required:u,mod:{disabled:p,error:!!h&&$},variant:S,__size:M,...W("input")}),v&&_.jsx("div",{...b,"data-position":"right",...W("section",{className:b==null?void 0:b.className,style:b==null?void 0:b.style}),children:v})]})});mi.classes=Hc;mi.Wrapper=pG;mi.Label=RL;mi.Error=kL;mi.Description=IL;mi.Placeholder=hG;mi.displayName="@mantine/core/Input";function Gbe(e,t,n){const r=xe(e,t,n),{label:i,description:s,error:o,required:a,classNames:u,styles:l,className:c,unstyled:f,__staticSelector:d,__stylesApiProps:h,errorProps:p,labelProps:m,descriptionProps:g,wrapperProps:y,id:v,size:b,style:w,inputContainer:E,inputWrapperOrder:T,withAsterisk:S,variant:C,vars:A,mod:k,...N}=r,{styleProps:O,rest:P}=Db(N),$={label:i,description:s,error:o,required:a,classNames:u,className:c,__staticSelector:d,__stylesApiProps:h||r,errorProps:p,labelProps:m,descriptionProps:g,unstyled:f,styles:l,size:b,style:w,inputContainer:E,inputWrapperOrder:T,withAsterisk:S,variant:C,id:v,mod:k,...y};return{...P,classNames:u,styles:l,unstyled:f,wrapperProps:{...$,...O},inputProps:{required:a,classNames:u,styles:l,unstyled:f,size:b,__staticSelector:d,__stylesApiProps:h||r,error:o,variant:C,id:v}}}const DHe={__staticSelector:"InputBase",withAria:!0},qc=Us((e,t)=>{const{inputProps:n,wrapperProps:r,...i}=Gbe("InputBase",DHe,e);return _.jsx(mi.Wrapper,{...r,children:_.jsx(mi,{...n,...i,ref:t})})});qc.classes={...mi.classes,...mi.Wrapper.classes};qc.displayName="@mantine/core/InputBase";const PHe={gap:{type:"spacing",property:"gap"},rowGap:{type:"spacing",property:"rowGap"},columnGap:{type:"spacing",property:"columnGap"},align:{type:"identity",property:"alignItems"},justify:{type:"identity",property:"justifyContent"},wrap:{type:"identity",property:"flexWrap"},direction:{type:"identity",property:"flexDirection"}};var Ybe={root:"m_8bffd616"};const OHe={},Nt=Us((e,t)=>{const n=xe("Flex",OHe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,gap:l,rowGap:c,columnGap:f,align:d,justify:h,wrap:p,direction:m,...g}=n,y=dt({name:"Flex",classes:Ybe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u}),v=ps(),b=ok(),w=J1e({styleProps:{gap:l,rowGap:c,columnGap:f,align:d,justify:h,wrap:p,direction:m},theme:v,data:PHe});return _.jsxs(_.Fragment,{children:[w.hasResponsiveStyles&&_.jsx(Nb,{selector:`.${b}`,styles:w.styles,media:w.media}),_.jsx(pe,{ref:t,...y("root",{className:b,style:Ay(w.inlineStyles)}),...g})]})});Nt.classes=Ybe;Nt.displayName="@mantine/core/Flex";function $He(e,t){if(!t||!e)return!1;let n=t.parentNode;for(;n!=null;){if(n===e)return!0;n=n.parentNode}return!1}function MHe({target:e,parent:t,ref:n,displayAfterTransitionEnd:r}){const i=I.useRef(),[s,o]=I.useState(!1),[a,u]=I.useState(typeof r=="boolean"?r:!1),l=()=>{if(!e||!t)return;const h=e.getBoundingClientRect(),p=t.getBoundingClientRect(),m={top:h.top-p.top,left:h.left-p.left,width:h.width,height:h.height};n.current&&(n.current.style.transform=`translateY(${m.top}px) translateX(${m.left}px)`,n.current.style.width=`${m.width}px`,n.current.style.height=`${m.height}px`)},c=()=>{window.clearTimeout(i.current),n.current&&(n.current.style.transitionDuration="0ms"),l(),i.current=window.setTimeout(()=>{n.current&&(n.current.style.transitionDuration="")},30)},f=I.useRef(),d=I.useRef();return I.useEffect(()=>{if(l(),e)return f.current=new ResizeObserver(c),f.current.observe(e),t&&(d.current=new ResizeObserver(c),d.current.observe(t)),()=>{var h,p;(h=f.current)==null||h.disconnect(),(p=d.current)==null||p.disconnect()}},[t,e]),I.useEffect(()=>{if(t){const h=p=>{$He(p.target,t)&&(c(),u(!1))};return document.addEventListener("transitionend",h),()=>{document.removeEventListener("transitionend",h)}}},[t]),FUe(()=>{q1e()!=="test"&&o(!0)},20,{autoInvoke:!0}),jUe(h=>{h.forEach(p=>{p.type==="attributes"&&p.attributeName==="dir"&&c()})},{attributes:!0,attributeFilter:["dir"]},()=>document.documentElement),{initialized:s,hidden:a}}var Kbe={root:"m_96b553a6"};const LHe={},FHe=(e,{transitionDuration:t})=>({root:{"--transition-duration":typeof t=="number"?`${t}ms`:t}}),mG=Me((e,t)=>{const n=xe("FloatingIndicator",LHe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,target:l,parent:c,transitionDuration:f,mod:d,displayAfterTransitionEnd:h,...p}=n,m=dt({name:"FloatingIndicator",classes:Kbe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:FHe}),g=I.useRef(null),{initialized:y,hidden:v}=MHe({target:l,parent:c,ref:g,displayAfterTransitionEnd:h}),b=hs(t,g);return!l||!c?null:_.jsx(pe,{ref:b,mod:[{initialized:y,hidden:v},d],...m("root"),...p})});mG.displayName="@mantine/core/FloatingIndicator";mG.classes=Kbe;const[jHe,gG]=fo("Accordion component was not found in the tree");function $E({style:e,size:t=16,...n}){return _.jsx("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{...e,width:Te(t),height:Te(t),display:"block"},...n,children:_.jsx("path",{d:"M3.13523 6.15803C3.3241 5.95657 3.64052 5.94637 3.84197 6.13523L7.5 9.56464L11.158 6.13523C11.3595 5.94637 11.6759 5.95657 11.8648 6.15803C12.0536 6.35949 12.0434 6.67591 11.842 6.86477L7.84197 10.6148C7.64964 10.7951 7.35036 10.7951 7.15803 10.6148L3.15803 6.86477C2.95657 6.67591 2.94637 6.35949 3.13523 6.15803Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}$E.displayName="@mantine/core/AccordionChevron";const[BHe,Xbe]=fo("Accordion.Item component was not found in the tree");var uk={root:"m_9bdbb667",panel:"m_df78851f",content:"m_4ba554d4",itemTitle:"m_8fa820a0",control:"m_4ba585b8","control--default":"m_6939a5e9","control--contained":"m_4271d21b",label:"m_df3ffa0f",chevron:"m_3f35ae96",icon:"m_9bd771fe",item:"m_9bd7b098","item--default":"m_fe19b709","item--contained":"m_1f921b3b","item--filled":"m_2cdf939a","item--separated":"m_9f59b069"};const UHe={},yG=Me((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,chevron:a,icon:u,onClick:l,onKeyDown:c,children:f,disabled:d,mod:h,...p}=xe("AccordionControl",UHe,e),{value:m}=Xbe(),g=gG(),y=g.isItemActive(m),v=typeof g.order=="number",b=`h${g.order}`,w=_.jsxs(xs,{...p,...g.getStyles("control",{className:r,classNames:n,style:i,styles:s,variant:g.variant}),unstyled:g.unstyled,mod:["accordion-control",{active:y,"chevron-position":g.chevronPosition,disabled:d},h],ref:t,onClick:E=>{l==null||l(E),g.onChange(m)},type:"button",disabled:d,"aria-expanded":y,"aria-controls":g.getRegionId(m),id:g.getControlId(m),onKeyDown:NW({siblingSelector:"[data-accordion-control]",parentSelector:"[data-accordion]",activateOnFocus:!1,loop:g.loop,orientation:"vertical",onKeyDown:c}),children:[_.jsx(pe,{component:"span",mod:{rotate:!g.disableChevronRotation&&y,position:g.chevronPosition},...g.getStyles("chevron",{classNames:n,styles:s}),children:a||g.chevron}),_.jsx("span",{...g.getStyles("label",{classNames:n,styles:s}),children:f}),u&&_.jsx(pe,{component:"span",mod:{"chevron-position":g.chevronPosition},...g.getStyles("icon",{classNames:n,styles:s}),children:u})]});return v?_.jsx(b,{...g.getStyles("itemTitle",{classNames:n,styles:s}),children:w}):w});yG.displayName="@mantine/core/AccordionControl";yG.classes=uk;const zHe={},vG=Me((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,value:a,mod:u,...l}=xe("AccordionItem",zHe,e),c=gG();return _.jsx(BHe,{value:{value:a},children:_.jsx(pe,{ref:t,mod:[{active:c.isItemActive(a)},u],...c.getStyles("item",{className:r,classNames:n,styles:s,style:i,variant:c.variant}),...l})})});vG.displayName="@mantine/core/AccordionItem";vG.classes=uk;const VHe={},bG=Me((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,children:a,...u}=xe("AccordionPanel",VHe,e),{value:l}=Xbe(),c=gG();return _.jsx(xL,{ref:t,...c.getStyles("panel",{className:r,classNames:n,style:i,styles:s}),...u,in:c.isItemActive(l),transitionDuration:c.transitionDuration??200,role:"region",id:c.getRegionId(l),"aria-labelledby":c.getControlId(l),children:_.jsx("div",{...c.getStyles("content",{classNames:n,styles:s}),children:a})})});bG.displayName="@mantine/core/AccordionPanel";bG.classes=uk;const HHe={multiple:!1,disableChevronRotation:!1,chevronPosition:"right",variant:"default",chevron:_.jsx($E,{})},qHe=(e,{transitionDuration:t,chevronSize:n,radius:r})=>({root:{"--accordion-transition-duration":t===void 0?void 0:`${t}ms`,"--accordion-chevron-size":n===void 0?void 0:Te(n),"--accordion-radius":r===void 0?void 0:Ur(r)}});function wu(e){const t=xe("Accordion",HHe,e),{classNames:n,className:r,style:i,styles:s,unstyled:o,vars:a,children:u,multiple:l,value:c,defaultValue:f,onChange:d,id:h,loop:p,transitionDuration:m,disableChevronRotation:g,chevronPosition:y,chevronSize:v,order:b,chevron:w,variant:E,radius:T,...S}=t,C=Ta(h),[A,k]=Ss({value:c,defaultValue:f,finalValue:l?[]:null,onChange:d}),N=$=>Array.isArray(A)?A.includes($):$===A,O=$=>{const F=Array.isArray(A)?A.includes($)?A.filter(M=>M!==$):[...A,$]:$===A?null:$;k(F)},P=dt({name:"Accordion",classes:uk,props:t,className:r,style:i,classNames:n,styles:s,unstyled:o,vars:a,varsResolver:qHe});return _.jsx(jHe,{value:{isItemActive:N,onChange:O,getControlId:BO(`${C}-control`,"Accordion.Item component was rendered with invalid value or without value"),getRegionId:BO(`${C}-panel`,"Accordion.Item component was rendered with invalid value or without value"),transitionDuration:m,disableChevronRotation:g,chevronPosition:y,order:b,chevron:w,loop:p,getStyles:P,variant:E,unstyled:o},children:_.jsx(pe,{...P("root"),id:C,...S,variant:E,"data-accordion":!0,children:u})})}const WHe=e=>e;wu.extend=WHe;wu.classes=uk;wu.displayName="@mantine/core/Accordion";wu.Item=vG;wu.Panel=bG;wu.Control=yG;wu.Chevron=$E;var Qbe={root:"m_66836ed3",wrapper:"m_a5d60502",body:"m_667c2793",title:"m_6a03f287",label:"m_698f4f23",icon:"m_667f2a6a",message:"m_7fa78076",closeButton:"m_87f54839"};const GHe={},YHe=(e,{radius:t,color:n,variant:r,autoContrast:i})=>{const s=e.variantColorResolver({color:n||e.primaryColor,theme:e,variant:r||"light",autoContrast:i});return{root:{"--alert-radius":t===void 0?void 0:Ur(t),"--alert-bg":n||r?s.background:void 0,"--alert-color":s.color,"--alert-bd":n||r?s.border:void 0}}},Zx=Me((e,t)=>{const n=xe("Alert",GHe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,radius:l,color:c,title:f,children:d,id:h,icon:p,withCloseButton:m,onClose:g,closeButtonLabel:y,variant:v,autoContrast:b,...w}=n,E=dt({name:"Alert",classes:Qbe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:YHe}),T=Ta(h),S=f&&`${T}-title`||void 0,C=`${T}-body`;return _.jsx(pe,{id:T,...E("root",{variant:v}),variant:v,ref:t,...w,role:"alert","aria-describedby":C,"aria-labelledby":S,children:_.jsxs("div",{...E("wrapper"),children:[p&&_.jsx("div",{...E("icon"),children:p}),_.jsxs("div",{...E("body"),children:[f&&_.jsx("div",{...E("title"),"data-with-close-button":m||void 0,children:_.jsx("span",{id:S,...E("label"),children:f})}),d&&_.jsx("div",{id:C,...E("message"),"data-variant":v,children:d})]}),m&&_.jsx(Wm,{...E("closeButton"),onClick:g,variant:"transparent",size:16,iconSize:16,"aria-label":y,unstyled:a})]})})});Zx.classes=Qbe;Zx.displayName="@mantine/core/Alert";var Jbe={root:"m_b6d8b162"};function KHe(e){if(e==="start")return"start";if(e==="end"||e)return"end"}const XHe={inherit:!1},QHe=(e,{variant:t,lineClamp:n,gradient:r,size:i,color:s})=>({root:{"--text-fz":uo(i),"--text-lh":L1e(i),"--text-gradient":t==="gradient"?VU(r,e):void 0,"--text-line-clamp":typeof n=="number"?n.toString():void 0,"--text-color":s?$r(s,e):void 0}}),Xe=Us((e,t)=>{const n=xe("Text",XHe,e),{lineClamp:r,truncate:i,inline:s,inherit:o,gradient:a,span:u,__staticSelector:l,vars:c,className:f,style:d,classNames:h,styles:p,unstyled:m,variant:g,mod:y,size:v,...b}=n,w=dt({name:["Text",l],props:n,classes:Jbe,className:f,style:d,classNames:h,styles:p,unstyled:m,vars:c,varsResolver:QHe});return _.jsx(pe,{...w("root",{focusable:!0}),ref:t,component:u?"span":"p",variant:g,mod:[{"data-truncate":KHe(i),"data-line-clamp":typeof r=="number","data-inline":s,"data-inherit":o},y],size:v,...b})});Xe.classes=Jbe;Xe.displayName="@mantine/core/Text";var Zbe={root:"m_849cf0da"};const JHe={underline:"hover"},Mb=Us((e,t)=>{const{underline:n,className:r,unstyled:i,mod:s,...o}=xe("Anchor",JHe,e);return _.jsx(Xe,{component:"a",ref:t,className:Xi({[Zbe.root]:!i},r),...o,mod:[{underline:n},s],__staticSelector:"Anchor",unstyled:i})});Mb.classes=Zbe;Mb.displayName="@mantine/core/Anchor";const[ZHe,eS]=fo("AppShell was not found in tree");var Ny={root:"m_89ab340",navbar:"m_45252eee",aside:"m_9cdde9a",header:"m_3b16f56b",main:"m_8983817",footer:"m_3840c879",section:"m_6dcfc7c7"};const eqe={},_G=Me((e,t)=>{const n=xe("AppShellAside",eqe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,withBorder:l,zIndex:c,mod:f,...d}=n,h=eS();return h.disabled?null:_.jsx(pe,{component:"aside",ref:t,mod:[{"with-border":l??h.withBorder},f],...h.getStyles("aside",{className:i,classNames:r,styles:o,style:s}),...d,__vars:{"--app-shell-aside-z-index":`calc(${c??h.zIndex} + 1)`}})});_G.classes=Ny;_G.displayName="@mantine/core/AppShellAside";const tqe={},wG=Me((e,t)=>{var p;const n=xe("AppShellFooter",tqe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,withBorder:l,zIndex:c,mod:f,...d}=n,h=eS();return h.disabled?null:_.jsx(pe,{component:"footer",ref:t,mod:[{"with-border":l??h.withBorder},f],...h.getStyles("footer",{className:Xi({[vL.classNames.zeroRight]:h.offsetScrollbars},i),classNames:r,styles:o,style:s}),...d,__vars:{"--app-shell-footer-z-index":(p=c??h.zIndex)==null?void 0:p.toString()}})});wG.classes=Ny;wG.displayName="@mantine/core/AppShellFooter";const nqe={},EG=Me((e,t)=>{var p;const n=xe("AppShellHeader",nqe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,withBorder:l,zIndex:c,mod:f,...d}=n,h=eS();return h.disabled?null:_.jsx(pe,{component:"header",ref:t,mod:[{"with-border":l??h.withBorder},f],...h.getStyles("header",{className:Xi({[vL.classNames.zeroRight]:h.offsetScrollbars},i),classNames:r,styles:o,style:s}),...d,__vars:{"--app-shell-header-z-index":(p=c??h.zIndex)==null?void 0:p.toString()}})});EG.classes=Ny;EG.displayName="@mantine/core/AppShellHeader";const rqe={},xG=Me((e,t)=>{const n=xe("AppShellMain",rqe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=eS();return _.jsx(pe,{component:"main",ref:t,...l.getStyles("main",{className:i,style:s,classNames:r,styles:o}),...u})});xG.classes=Ny;xG.displayName="@mantine/core/AppShellMain";function lk(e){return typeof e=="object"?e.base:e}function ck(e){const t=typeof e=="object"&&e!==null&&typeof e.base<"u"&&Object.keys(e).length===1;return typeof e=="number"||typeof e=="string"||t}function fk(e){return!(typeof e!="object"||e===null||Object.keys(e).length===1&&"base"in e)}function iqe({baseStyles:e,minMediaStyles:t,maxMediaStyles:n,aside:r,theme:i}){var u,l,c;const s=r==null?void 0:r.width,o="translateX(var(--app-shell-aside-width))",a="translateX(calc(var(--app-shell-aside-width) * -1))";if(r!=null&&r.breakpoint&&!((u=r==null?void 0:r.collapsed)!=null&&u.mobile)&&(n[r==null?void 0:r.breakpoint]=n[r==null?void 0:r.breakpoint]||{},n[r==null?void 0:r.breakpoint]["--app-shell-aside-width"]="100%",n[r==null?void 0:r.breakpoint]["--app-shell-aside-offset"]="0px"),ck(s)){const f=Te(lk(s));e["--app-shell-aside-width"]=f,e["--app-shell-aside-offset"]=f}if(fk(s)&&(typeof s.base<"u"&&(e["--app-shell-aside-width"]=Te(s.base),e["--app-shell-aside-offset"]=Te(s.base)),Xr(s).forEach(f=>{f!=="base"&&(t[f]=t[f]||{},t[f]["--app-shell-aside-width"]=Te(s[f]),t[f]["--app-shell-aside-offset"]=Te(s[f]))})),(l=r==null?void 0:r.collapsed)!=null&&l.desktop){const f=r.breakpoint;t[f]=t[f]||{},t[f]["--app-shell-aside-transform"]=o,t[f]["--app-shell-aside-transform-rtl"]=a,t[f]["--app-shell-aside-offset"]="0px !important"}if((c=r==null?void 0:r.collapsed)!=null&&c.mobile){const f=PW(r.breakpoint,i)-.1;n[f]=n[f]||{},n[f]["--app-shell-aside-width"]="100%",n[f]["--app-shell-aside-offset"]="0px",n[f]["--app-shell-aside-transform"]=o,n[f]["--app-shell-aside-transform-rtl"]=a}}function sqe({baseStyles:e,minMediaStyles:t,footer:n}){const r=n==null?void 0:n.height,i="translateY(var(--app-shell-footer-height))",s=(n==null?void 0:n.offset)??!0;if(ck(r)){const o=Te(lk(r));e["--app-shell-footer-height"]=o,s&&(e["--app-shell-footer-offset"]=o)}fk(r)&&(typeof r.base<"u"&&(e["--app-shell-footer-height"]=Te(r.base),s&&(e["--app-shell-footer-offset"]=Te(r.base))),Xr(r).forEach(o=>{o!=="base"&&(t[o]=t[o]||{},t[o]["--app-shell-footer-height"]=Te(r[o]),s&&(t[o]["--app-shell-footer-offset"]=Te(r[o])))})),n!=null&&n.collapsed&&(e["--app-shell-footer-transform"]=i,e["--app-shell-footer-offset"]="0px !important")}function oqe({baseStyles:e,minMediaStyles:t,header:n}){const r=n==null?void 0:n.height,i="translateY(calc(var(--app-shell-header-height) * -1))",s=(n==null?void 0:n.offset)??!0;if(ck(r)){const o=Te(lk(r));e["--app-shell-header-height"]=o,s&&(e["--app-shell-header-offset"]=o)}fk(r)&&(typeof r.base<"u"&&(e["--app-shell-header-height"]=Te(r.base),s&&(e["--app-shell-header-offset"]=Te(r.base))),Xr(r).forEach(o=>{o!=="base"&&(t[o]=t[o]||{},t[o]["--app-shell-header-height"]=Te(r[o]),s&&(t[o]["--app-shell-header-offset"]=Te(r[o])))})),n!=null&&n.collapsed&&(e["--app-shell-header-transform"]=i,e["--app-shell-header-offset"]="0px !important")}function aqe({baseStyles:e,minMediaStyles:t,maxMediaStyles:n,navbar:r,theme:i}){var u,l,c;const s=r==null?void 0:r.width,o="translateX(calc(var(--app-shell-navbar-width) * -1))",a="translateX(var(--app-shell-navbar-width))";if(r!=null&&r.breakpoint&&!((u=r==null?void 0:r.collapsed)!=null&&u.mobile)&&(n[r==null?void 0:r.breakpoint]=n[r==null?void 0:r.breakpoint]||{},n[r==null?void 0:r.breakpoint]["--app-shell-navbar-width"]="100%",n[r==null?void 0:r.breakpoint]["--app-shell-navbar-offset"]="0px"),ck(s)){const f=Te(lk(s));e["--app-shell-navbar-width"]=f,e["--app-shell-navbar-offset"]=f}if(fk(s)&&(typeof s.base<"u"&&(e["--app-shell-navbar-width"]=Te(s.base),e["--app-shell-navbar-offset"]=Te(s.base)),Xr(s).forEach(f=>{f!=="base"&&(t[f]=t[f]||{},t[f]["--app-shell-navbar-width"]=Te(s[f]),t[f]["--app-shell-navbar-offset"]=Te(s[f]))})),(l=r==null?void 0:r.collapsed)!=null&&l.desktop){const f=r.breakpoint;t[f]=t[f]||{},t[f]["--app-shell-navbar-transform"]=o,t[f]["--app-shell-navbar-transform-rtl"]=a,t[f]["--app-shell-navbar-offset"]="0px !important"}if((c=r==null?void 0:r.collapsed)!=null&&c.mobile){const f=PW(r.breakpoint,i)-.1;n[f]=n[f]||{},n[f]["--app-shell-navbar-width"]="100%",n[f]["--app-shell-navbar-offset"]="0px",n[f]["--app-shell-navbar-transform"]=o,n[f]["--app-shell-navbar-transform-rtl"]=a}}function Uj(e){return Number(e)===0?"0px":as(e)}function uqe({padding:e,baseStyles:t,minMediaStyles:n}){ck(e)&&(t["--app-shell-padding"]=Uj(lk(e))),fk(e)&&(e.base&&(t["--app-shell-padding"]=Uj(e.base)),Xr(e).forEach(r=>{r!=="base"&&(n[r]=n[r]||{},n[r]["--app-shell-padding"]=Uj(e[r]))}))}function lqe({navbar:e,header:t,footer:n,aside:r,padding:i,theme:s}){const o={},a={},u={};aqe({baseStyles:u,minMediaStyles:o,maxMediaStyles:a,navbar:e,theme:s}),iqe({baseStyles:u,minMediaStyles:o,maxMediaStyles:a,aside:r,theme:s}),oqe({baseStyles:u,minMediaStyles:o,header:t}),sqe({baseStyles:u,minMediaStyles:o,footer:n}),uqe({baseStyles:u,minMediaStyles:o,padding:i});const l=SA(Xr(o),s).map(d=>({query:`(min-width: ${jO(d.px)})`,styles:o[d.value]})),c=SA(Xr(a),s).map(d=>({query:`(max-width: ${jO(d.px)})`,styles:a[d.value]})),f=[...l,...c];return{baseStyles:u,media:f}}function cqe({navbar:e,header:t,aside:n,footer:r,padding:i}){const s=ps(),o=ky(),{media:a,baseStyles:u}=lqe({navbar:e,header:t,footer:r,aside:n,padding:i,theme:s});return _.jsx(Nb,{media:a,styles:u,selector:o.cssVariablesSelector})}const fqe={},SG=Me((e,t)=>{const n=xe("AppShellNavbar",fqe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,withBorder:l,zIndex:c,mod:f,...d}=n,h=eS();return h.disabled?null:_.jsx(pe,{component:"nav",ref:t,mod:[{"with-border":l??h.withBorder},f],...h.getStyles("navbar",{className:i,classNames:r,styles:o,style:s}),...d,__vars:{"--app-shell-navbar-z-index":`calc(${c??h.zIndex} + 1)`}})});SG.classes=Ny;SG.displayName="@mantine/core/AppShellNavbar";const dqe={},TG=Us((e,t)=>{const n=xe("AppShellSection",dqe,e),{classNames:r,className:i,style:s,styles:o,vars:a,grow:u,mod:l,...c}=n,f=eS();return _.jsx(pe,{ref:t,mod:[{grow:u},l],...f.getStyles("section",{className:i,style:s,classNames:r,styles:o}),...c})});TG.classes=Ny;TG.displayName="@mantine/core/AppShellSection";function hqe({transitionDuration:e,disabled:t}){const[n,r]=I.useState(!0),i=I.useRef(),s=I.useRef();return z1e("resize",()=>{r(!0),clearTimeout(i.current),i.current=window.setTimeout(()=>r(!1),200)}),Rb(()=>{I.startTransition(()=>{r(!0),clearTimeout(s.current),s.current=window.setTimeout(()=>r(!1),e||0)})},[t,e]),n}const pqe={withBorder:!0,offsetScrollbars:!0,padding:0,transitionDuration:200,transitionTimingFunction:"ease",zIndex:Jl("app")},mqe=(e,{transitionDuration:t,transitionTimingFunction:n})=>({root:{"--app-shell-transition-duration":`${t}ms`,"--app-shell-transition-timing-function":n}}),pi=Me((e,t)=>{const n=xe("AppShell",pqe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,navbar:l,withBorder:c,padding:f,transitionDuration:d,transitionTimingFunction:h,header:p,zIndex:m,layout:g,disabled:y,aside:v,footer:b,offsetScrollbars:w,mod:E,...T}=n,S=dt({name:"AppShell",classes:Ny,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:mqe}),C=hqe({disabled:y,transitionDuration:d});return _.jsxs(ZHe,{value:{getStyles:S,withBorder:c,zIndex:m,disabled:y,offsetScrollbars:w},children:[_.jsx(cqe,{navbar:l,header:p,aside:v,footer:b,padding:f}),_.jsx(pe,{ref:t,...S("root"),mod:[{resizing:C,layout:g,disabled:y},E],...T})]})});pi.classes=Ny;pi.displayName="@mantine/core/AppShell";pi.Navbar=SG;pi.Header=EG;pi.Main=xG;pi.Aside=_G;pi.Footer=wG;pi.Section=TG;function e_e(e){return typeof e=="string"?{value:e,label:e}:"value"in e&&!("label"in e)?{value:e.value,label:e.value,disabled:e.disabled}:typeof e=="number"?{value:e.toString(),label:e.toString()}:"group"in e?{group:e.group,items:e.items.map(t=>e_e(t))}:e}function t_e(e){return e?e.map(t=>e_e(t)):[]}function CG(e){return e.reduce((t,n)=>"group"in n?{...t,...CG(n.items)}:(t[n.value]=n,t),{})}var Xu={dropdown:"m_88b62a41",options:"m_b2821a6e",option:"m_92253aa5",search:"m_985517d8",empty:"m_2530cd1d",header:"m_858f94bd",footer:"m_82b967cb",group:"m_254f3e4f",groupLabel:"m_2bb2e9e5",chevron:"m_2943220b",optionsDropdownOption:"m_390b5f4",optionsDropdownCheckIcon:"m_8ee53fc2"};const gqe={error:null},yqe=(e,{size:t})=>({chevron:{"--combobox-chevron-size":tn(t,"combobox-chevron-size")}}),AG=Me((e,t)=>{const n=xe("ComboboxChevron",gqe,e),{size:r,error:i,style:s,className:o,classNames:a,styles:u,unstyled:l,vars:c,mod:f,...d}=n,h=dt({name:"ComboboxChevron",classes:Xu,props:n,style:s,className:o,classNames:a,styles:u,unstyled:l,vars:c,varsResolver:yqe,rootSelector:"chevron"});return _.jsx(pe,{component:"svg",...d,...h("chevron"),size:r,viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",mod:["combobox-chevron",{error:i},f],ref:t,children:_.jsx("path",{d:"M4.93179 5.43179C4.75605 5.60753 4.75605 5.89245 4.93179 6.06819C5.10753 6.24392 5.39245 6.24392 5.56819 6.06819L7.49999 4.13638L9.43179 6.06819C9.60753 6.24392 9.89245 6.24392 10.0682 6.06819C10.2439 5.89245 10.2439 5.60753 10.0682 5.43179L7.81819 3.18179C7.73379 3.0974 7.61933 3.04999 7.49999 3.04999C7.38064 3.04999 7.26618 3.0974 7.18179 3.18179L4.93179 5.43179ZM10.0682 9.56819C10.2439 9.39245 10.2439 9.10753 10.0682 8.93179C9.89245 8.75606 9.60753 8.75606 9.43179 8.93179L7.49999 10.8636L5.56819 8.93179C5.39245 8.75606 5.10753 8.75606 4.93179 8.93179C4.75605 9.10753 4.75605 9.39245 4.93179 9.56819L7.18179 11.8182C7.35753 11.9939 7.64245 11.9939 7.81819 11.8182L10.0682 9.56819Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})});AG.classes=Xu;AG.displayName="@mantine/core/ComboboxChevron";const[vqe,Wc]=fo("Combobox component was not found in tree"),n_e=I.forwardRef(({size:e,onMouseDown:t,onClick:n,onClear:r,...i},s)=>_.jsx(Wm,{ref:s,size:e||"sm",variant:"transparent",tabIndex:-1,"aria-hidden":!0,...i,onMouseDown:o=>{o.preventDefault(),t==null||t(o)},onClick:o=>{r(),n==null||n(o)}}));n_e.displayName="@mantine/core/ComboboxClearButton";const bqe={},IG=Me((e,t)=>{const{classNames:n,styles:r,className:i,style:s,hidden:o,...a}=xe("ComboboxDropdown",bqe,e),u=Wc();return _.jsx(Do.Dropdown,{...a,ref:t,role:"presentation","data-hidden":o||void 0,...u.getStyles("dropdown",{className:i,style:s,classNames:n,styles:r})})});IG.classes=Xu;IG.displayName="@mantine/core/ComboboxDropdown";const _qe={refProp:"ref"},r_e=Me((e,t)=>{const{children:n,refProp:r}=xe("ComboboxDropdownTarget",_qe,e);if(Wc(),!Iy(n))throw new Error("Combobox.DropdownTarget component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");return _.jsx(Do.Target,{ref:t,refProp:r,children:n})});r_e.displayName="@mantine/core/ComboboxDropdownTarget";const wqe={},kG=Me((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=xe("ComboboxEmpty",wqe,e),u=Wc();return _.jsx(pe,{ref:t,...u.getStyles("empty",{className:r,classNames:n,styles:s,style:i}),...a})});kG.classes=Xu;kG.displayName="@mantine/core/ComboboxEmpty";function RG({onKeyDown:e,withKeyboardNavigation:t,withAriaAttributes:n,withExpandedAttribute:r,targetType:i,autoComplete:s}){const o=Wc(),[a,u]=I.useState(null),l=f=>{if(e==null||e(f),!o.readOnly&&t){if(f.nativeEvent.isComposing)return;if(f.nativeEvent.code==="ArrowDown"&&(f.preventDefault(),o.store.dropdownOpened?u(o.store.selectNextOption()):(o.store.openDropdown("keyboard"),u(o.store.selectActiveOption()))),f.nativeEvent.code==="ArrowUp"&&(f.preventDefault(),o.store.dropdownOpened?u(o.store.selectPreviousOption()):(o.store.openDropdown("keyboard"),u(o.store.selectActiveOption()))),f.nativeEvent.code==="Enter"||f.nativeEvent.code==="NumpadEnter"){if(f.nativeEvent.keyCode===229)return;const d=o.store.getSelectedOptionIndex();o.store.dropdownOpened&&d!==-1?(f.preventDefault(),o.store.clickSelectedOption()):i==="button"&&(f.preventDefault(),o.store.openDropdown("keyboard"))}f.nativeEvent.code==="Escape"&&o.store.closeDropdown("keyboard"),f.nativeEvent.code==="Space"&&i==="button"&&(f.preventDefault(),o.store.toggleDropdown("keyboard"))}};return{...n?{"aria-haspopup":"listbox","aria-expanded":r&&!!(o.store.listId&&o.store.dropdownOpened)||void 0,"aria-controls":o.store.listId,"aria-activedescendant":o.store.dropdownOpened&&a||void 0,autoComplete:s,"data-expanded":o.store.dropdownOpened||void 0,"data-mantine-stop-propagation":o.store.dropdownOpened||void 0}:{},onKeyDown:l}}const Eqe={refProp:"ref",targetType:"input",withKeyboardNavigation:!0,withAriaAttributes:!0,withExpandedAttribute:!1,autoComplete:"off"},i_e=Me((e,t)=>{const{children:n,refProp:r,withKeyboardNavigation:i,withAriaAttributes:s,withExpandedAttribute:o,targetType:a,autoComplete:u,...l}=xe("ComboboxEventsTarget",Eqe,e);if(!Iy(n))throw new Error("Combobox.EventsTarget component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const c=Wc(),f=RG({targetType:a,withAriaAttributes:s,withKeyboardNavigation:i,withExpandedAttribute:o,onKeyDown:n.props.onKeyDown,autoComplete:u});return I.cloneElement(n,{...f,...l,[r]:hs(t,c.store.targetRef,n==null?void 0:n.ref)})});i_e.displayName="@mantine/core/ComboboxEventsTarget";const xqe={},NG=Me((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=xe("ComboboxFooter",xqe,e),u=Wc();return _.jsx(pe,{ref:t,...u.getStyles("footer",{className:r,classNames:n,style:i,styles:s}),...a})});NG.classes=Xu;NG.displayName="@mantine/core/ComboboxFooter";const Sqe={},DG=Me((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,children:a,label:u,...l}=xe("ComboboxGroup",Sqe,e),c=Wc();return _.jsxs(pe,{ref:t,...c.getStyles("group",{className:r,classNames:n,style:i,styles:s}),...l,children:[u&&_.jsx("div",{...c.getStyles("groupLabel",{classNames:n,styles:s}),children:u}),a]})});DG.classes=Xu;DG.displayName="@mantine/core/ComboboxGroup";const Tqe={},PG=Me((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=xe("ComboboxHeader",Tqe,e),u=Wc();return _.jsx(pe,{ref:t,...u.getStyles("header",{className:r,classNames:n,style:i,styles:s}),...a})});PG.classes=Xu;PG.displayName="@mantine/core/ComboboxHeader";function s_e({value:e,valuesDivider:t=",",...n}){return _.jsx("input",{type:"hidden",value:Array.isArray(e)?e.join(t):e||"",...n})}s_e.displayName="@mantine/core/ComboboxHiddenInput";const Cqe={},OG=Me((e,t)=>{const n=xe("ComboboxOption",Cqe,e),{classNames:r,className:i,style:s,styles:o,vars:a,onClick:u,id:l,active:c,onMouseDown:f,onMouseOver:d,disabled:h,selected:p,mod:m,...g}=n,y=Wc(),v=I.useId(),b=l||v;return _.jsx(pe,{...y.getStyles("option",{className:i,classNames:r,styles:o,style:s}),...g,ref:t,id:b,mod:["combobox-option",{"combobox-active":c,"combobox-disabled":h,"combobox-selected":p},m],role:"option",onClick:w=>{var E;h?w.preventDefault():((E=y.onOptionSubmit)==null||E.call(y,n.value,n),u==null||u(w))},onMouseDown:w=>{w.preventDefault(),f==null||f(w)},onMouseOver:w=>{y.resetSelectionOnOptionHover&&y.store.resetSelectedOption(),d==null||d(w)}})});OG.classes=Xu;OG.displayName="@mantine/core/ComboboxOption";const Aqe={},$G=Me((e,t)=>{const n=xe("ComboboxOptions",Aqe,e),{classNames:r,className:i,style:s,styles:o,id:a,onMouseDown:u,labelledBy:l,...c}=n,f=Wc(),d=Ta(a);return I.useEffect(()=>{f.store.setListId(d)},[d]),_.jsx(pe,{ref:t,...f.getStyles("options",{className:i,style:s,classNames:r,styles:o}),...c,id:d,role:"listbox","aria-labelledby":l,onMouseDown:h=>{h.preventDefault(),u==null||u(h)}})});$G.classes=Xu;$G.displayName="@mantine/core/ComboboxOptions";const Iqe={withAriaAttributes:!0,withKeyboardNavigation:!0},MG=Me((e,t)=>{const n=xe("ComboboxSearch",Iqe,e),{classNames:r,styles:i,unstyled:s,vars:o,withAriaAttributes:a,onKeyDown:u,withKeyboardNavigation:l,size:c,...f}=n,d=Wc(),h=d.getStyles("search"),p=RG({targetType:"input",withAriaAttributes:a,withKeyboardNavigation:l,withExpandedAttribute:!1,onKeyDown:u,autoComplete:"off"});return _.jsx(mi,{ref:hs(t,d.store.searchRef),classNames:[{input:h.className},r],styles:[{input:h.style},i],size:c||d.size,...p,...f,__staticSelector:"Combobox"})});MG.classes=Xu;MG.displayName="@mantine/core/ComboboxSearch";const kqe={refProp:"ref",targetType:"input",withKeyboardNavigation:!0,withAriaAttributes:!0,withExpandedAttribute:!1,autoComplete:"off"},o_e=Me((e,t)=>{const{children:n,refProp:r,withKeyboardNavigation:i,withAriaAttributes:s,withExpandedAttribute:o,targetType:a,autoComplete:u,...l}=xe("ComboboxTarget",kqe,e);if(!Iy(n))throw new Error("Combobox.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const c=Wc(),f=RG({targetType:a,withAriaAttributes:s,withKeyboardNavigation:i,withExpandedAttribute:o,onKeyDown:n.props.onKeyDown,autoComplete:u}),d=I.cloneElement(n,{...f,...l});return _.jsx(Do.Target,{ref:hs(t,c.store.targetRef),children:d})});o_e.displayName="@mantine/core/ComboboxTarget";function Rqe(e,t,n){for(let r=e-1;r>=0;r-=1)if(!t[r].hasAttribute("data-combobox-disabled"))return r;if(n){for(let r=t.length-1;r>-1;r-=1)if(!t[r].hasAttribute("data-combobox-disabled"))return r}return e}function Nqe(e,t,n){for(let r=e+1;r<t.length;r+=1)if(!t[r].hasAttribute("data-combobox-disabled"))return r;if(n){for(let r=0;r<t.length;r+=1)if(!t[r].hasAttribute("data-combobox-disabled"))return r}return e}function Dqe(e){for(let t=0;t<e.length;t+=1)if(!e[t].hasAttribute("data-combobox-disabled"))return t;return-1}function LG({defaultOpened:e,opened:t,onOpenedChange:n,onDropdownClose:r,onDropdownOpen:i,loop:s=!0,scrollBehavior:o="instant"}={}){const[a,u]=Ss({value:t,defaultValue:e,finalValue:!1,onChange:n}),l=I.useRef(null),c=I.useRef(-1),f=I.useRef(null),d=I.useRef(null),h=I.useRef(-1),p=I.useRef(-1),m=I.useRef(-1),g=I.useCallback((M="unknown")=>{a||(u(!0),i==null||i(M))},[u,i,a]),y=I.useCallback((M="unknown")=>{a&&(u(!1),r==null||r(M))},[u,r,a]),v=I.useCallback((M="unknown")=>{a?y(M):g(M)},[y,g,a]),b=I.useCallback(()=>{const M=document.querySelector(`#${l.current} [data-combobox-selected]`);M==null||M.removeAttribute("data-combobox-selected"),M==null||M.removeAttribute("aria-selected")},[]),w=I.useCallback(M=>{const B=document.getElementById(l.current),U=B==null?void 0:B.querySelectorAll("[data-combobox-option]");if(!U)return null;const H=M>=U.length?0:M<0?U.length-1:M;return c.current=H,U!=null&&U[H]&&!U[H].hasAttribute("data-combobox-disabled")?(b(),U[H].setAttribute("data-combobox-selected","true"),U[H].setAttribute("aria-selected","true"),U[H].scrollIntoView({block:"nearest",behavior:o}),U[H].id):null},[o,b]),E=I.useCallback(()=>{const M=document.querySelector(`#${l.current} [data-combobox-active]`);if(M){const B=document.querySelectorAll(`#${l.current} [data-combobox-option]`),U=Array.from(B).findIndex(H=>H===M);return w(U)}return w(0)},[w]),T=I.useCallback(()=>w(Nqe(c.current,document.querySelectorAll(`#${l.current} [data-combobox-option]`),s)),[w,s]),S=I.useCallback(()=>w(Rqe(c.current,document.querySelectorAll(`#${l.current} [data-combobox-option]`),s)),[w,s]),C=I.useCallback(()=>w(Dqe(document.querySelectorAll(`#${l.current} [data-combobox-option]`))),[w]),A=I.useCallback((M="selected",B)=>{m.current=window.setTimeout(()=>{var D;const U=document.querySelectorAll(`#${l.current} [data-combobox-option]`),H=Array.from(U).findIndex(z=>z.hasAttribute(`data-combobox-${M}`));c.current=H,B!=null&&B.scrollIntoView&&((D=U[H])==null||D.scrollIntoView({block:"nearest",behavior:o}))},0)},[]),k=I.useCallback(()=>{c.current=-1,b()},[b]),N=I.useCallback(()=>{const M=document.querySelectorAll(`#${l.current} [data-combobox-option]`),B=M==null?void 0:M[c.current];B==null||B.click()},[]),O=I.useCallback(M=>{l.current=M},[]),P=I.useCallback(()=>{h.current=window.setTimeout(()=>f.current.focus(),0)},[]),$=I.useCallback(()=>{p.current=window.setTimeout(()=>d.current.focus(),0)},[]),F=I.useCallback(()=>c.current,[]);return I.useEffect(()=>()=>{window.clearTimeout(h.current),window.clearTimeout(p.current),window.clearTimeout(m.current)},[]),{dropdownOpened:a,openDropdown:g,closeDropdown:y,toggleDropdown:v,selectedOptionIndex:c.current,getSelectedOptionIndex:F,selectOption:w,selectFirstOption:C,selectActiveOption:E,selectNextOption:T,selectPreviousOption:S,resetSelectedOption:k,updateSelectedOptionIndex:A,listId:l.current,setListId:O,clickSelectedOption:N,searchRef:f,focusSearchInput:P,targetRef:d,focusTarget:$}}const Pqe={keepMounted:!0,withinPortal:!0,resetSelectionOnOptionHover:!1,width:"target",transitionProps:{transition:"fade",duration:0}},Oqe=(e,{size:t,dropdownPadding:n})=>({options:{"--combobox-option-fz":uo(t),"--combobox-option-padding":tn(t,"combobox-option-padding")},dropdown:{"--combobox-padding":n===void 0?void 0:Te(n),"--combobox-option-fz":uo(t),"--combobox-option-padding":tn(t,"combobox-option-padding")}});function Kn(e){const t=xe("Combobox",Pqe,e),{classNames:n,styles:r,unstyled:i,children:s,store:o,vars:a,onOptionSubmit:u,onClose:l,size:c,dropdownPadding:f,resetSelectionOnOptionHover:d,__staticSelector:h,readOnly:p,...m}=t,g=LG(),y=o||g,v=dt({name:h||"Combobox",classes:Xu,props:t,classNames:n,styles:r,unstyled:i,vars:a,varsResolver:Oqe}),b=()=>{l==null||l(),y.closeDropdown()};return _.jsx(vqe,{value:{getStyles:v,store:y,onOptionSubmit:u,size:c,resetSelectionOnOptionHover:d,readOnly:p},children:_.jsx(Do,{opened:y.dropdownOpened,...m,onClose:b,withRoles:!1,unstyled:i,children:s})})}const $qe=e=>e;Kn.extend=$qe;Kn.classes=Xu;Kn.displayName="@mantine/core/Combobox";Kn.Target=o_e;Kn.Dropdown=IG;Kn.Options=$G;Kn.Option=OG;Kn.Search=MG;Kn.Empty=kG;Kn.Chevron=AG;Kn.Footer=NG;Kn.Header=PG;Kn.EventsTarget=i_e;Kn.DropdownTarget=r_e;Kn.Group=DG;Kn.ClearButton=n_e;Kn.HiddenInput=s_e;var a_e={root:"m_5f75b09e",body:"m_5f6e695e",labelWrapper:"m_d3ea56bb",label:"m_8ee546b8",description:"m_328f68c0",error:"m_8e8a99cc"};const u_e=a_e,NL=I.forwardRef(({__staticSelector:e,__stylesApiProps:t,className:n,classNames:r,styles:i,unstyled:s,children:o,label:a,description:u,id:l,disabled:c,error:f,size:d,labelPosition:h="left",bodyElement:p="div",labelElement:m="label",variant:g,style:y,vars:v,mod:b,...w},E)=>{const T=dt({name:e,props:t,className:n,style:y,classes:a_e,classNames:r,styles:i,unstyled:s});return _.jsx(pe,{...T("root"),ref:E,__vars:{"--label-fz":uo(d),"--label-lh":tn(d,"label-lh")},mod:[{"label-position":h},b],variant:g,size:d,...w,children:_.jsxs(pe,{component:p,htmlFor:p==="label"?l:void 0,...T("body"),children:[o,_.jsxs("div",{...T("labelWrapper"),"data-disabled":c||void 0,children:[a&&_.jsx(pe,{component:m,htmlFor:m==="label"?l:void 0,...T("label"),"data-disabled":c||void 0,children:a}),u&&_.jsx(mi.Description,{size:d,__inheritStyles:!1,...T("description"),children:u}),f&&typeof f!="boolean"&&_.jsx(mi.Error,{size:d,__inheritStyles:!1,...T("error"),children:f})]})]})})});NL.displayName="@mantine/core/InlineInput";const l_e=I.createContext(null),Mqe=l_e.Provider,c_e=()=>I.useContext(l_e),[Lqe,Fqe]=Gx();var f_e={card:"m_26775b0a"};const jqe={withBorder:!0},Bqe=(e,{radius:t})=>({card:{"--card-radius":Ur(t)}}),FG=Me((e,t)=>{const n=xe("CheckboxCard",jqe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,checked:l,mod:c,withBorder:f,value:d,onClick:h,...p}=n,m=dt({name:"CheckboxCard",classes:f_e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:Bqe,rootSelector:"card"}),g=c_e(),y=typeof l=="boolean"?l:(g==null?void 0:g.value.includes(d||""))||!1;return _.jsx(Lqe,{value:{checked:y},children:_.jsx(xs,{ref:t,mod:[{"with-border":f,checked:y},c],...m("card"),...p,role:"checkbox","aria-checked":y,onClick:v=>{h==null||h(v),g==null||g.onChange(d||"")}})})});FG.displayName="@mantine/core/CheckboxCard";FG.classes=f_e;function jG({children:e,role:t}){const n=Jx();return n?_.jsx("div",{role:t,"aria-labelledby":n.labelId,"aria-describedby":n.describedBy,children:e}):_.jsx(_.Fragment,{children:e})}const Uqe={},BG=Me((e,t)=>{const{value:n,defaultValue:r,onChange:i,size:s,wrapperProps:o,children:a,readOnly:u,...l}=xe("CheckboxGroup",Uqe,e),[c,f]=Ss({value:n,defaultValue:r,finalValue:[],onChange:i}),d=h=>{const p=typeof h=="string"?h:h.currentTarget.value;!u&&f(c.includes(p)?c.filter(m=>m!==p):[...c,p])};return _.jsx(Mqe,{value:{value:c,onChange:d,size:s},children:_.jsx(mi.Wrapper,{size:s,ref:t,...o,...l,labelElement:"div",__staticSelector:"CheckboxGroup",children:_.jsx(jG,{role:"group",children:a})})})});BG.classes=mi.Wrapper.classes;BG.displayName="@mantine/core/CheckboxGroup";function d_e({size:e,style:t,...n}){const r=e!==void 0?{width:Te(e),height:Te(e),...t}:t;return _.jsx("svg",{viewBox:"0 0 10 7",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:r,"aria-hidden":!0,...n,children:_.jsx("path",{d:"M4 4.586L1.707 2.293A1 1 0 1 0 .293 3.707l3 3a.997.997 0 0 0 1.414 0l5-5A1 1 0 1 0 8.293.293L4 4.586z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}function h_e({indeterminate:e,...t}){return e?_.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 32 6","aria-hidden":!0,...t,children:_.jsx("rect",{width:"32",height:"6",fill:"currentColor",rx:"3"})}):_.jsx(d_e,{...t})}var p_e={indicator:"m_5e5256ee",icon:"m_1b1c543a","indicator--outline":"m_76e20374"};const zqe={icon:h_e},Vqe=(e,{radius:t,color:n,size:r,iconColor:i,variant:s,autoContrast:o})=>{const a=Vh({color:n||e.primaryColor,theme:e}),u=a.isThemeColor&&a.shade===void 0?`var(--mantine-color-${a.color}-outline)`:a.color;return{indicator:{"--checkbox-size":tn(r,"checkbox-size"),"--checkbox-radius":t===void 0?void 0:Ur(t),"--checkbox-color":s==="outline"?u:$r(n,e),"--checkbox-icon-color":i?$r(i,e):Yx(o,e)?Ry({color:n,theme:e,autoContrast:o}):void 0}}},UG=Me((e,t)=>{const n=xe("CheckboxIndicator",zqe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,icon:l,indeterminate:c,radius:f,color:d,iconColor:h,autoContrast:p,checked:m,mod:g,variant:y,disabled:v,...b}=n,w=l,E=dt({name:"CheckboxIndicator",classes:p_e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:Vqe,rootSelector:"indicator"}),T=Fqe(),S=typeof m=="boolean"||typeof c=="boolean"?m||c:(T==null?void 0:T.checked)||!1;return _.jsx(pe,{ref:t,...E("indicator",{variant:y}),variant:y,mod:[{checked:S,disabled:v},g],...b,children:_.jsx(w,{indeterminate:c,...E("icon")})})});UG.displayName="@mantine/core/CheckboxIndicator";UG.classes=p_e;var m_e={root:"m_bf2d988c",inner:"m_26062bec",input:"m_26063560",icon:"m_bf295423","input--outline":"m_215c4542"};const Hqe={labelPosition:"right",icon:h_e},qqe=(e,{radius:t,color:n,size:r,iconColor:i,variant:s,autoContrast:o})=>{const a=Vh({color:n||e.primaryColor,theme:e}),u=a.isThemeColor&&a.shade===void 0?`var(--mantine-color-${a.color}-outline)`:a.color;return{root:{"--checkbox-size":tn(r,"checkbox-size"),"--checkbox-radius":t===void 0?void 0:Ur(t),"--checkbox-color":s==="outline"?u:$r(n,e),"--checkbox-icon-color":i?$r(i,e):Yx(o,e)?Ry({color:n,theme:e,autoContrast:o}):void 0}}},Sl=Me((e,t)=>{const n=xe("Checkbox",Hqe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,color:l,label:c,id:f,size:d,radius:h,wrapperProps:p,children:m,checked:g,labelPosition:y,description:v,error:b,disabled:w,variant:E,indeterminate:T,icon:S,rootRef:C,iconColor:A,onChange:k,autoContrast:N,mod:O,...P}=n,$=c_e(),F=d||($==null?void 0:$.size),M=S,B=dt({name:"Checkbox",props:n,classes:m_e,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:qqe}),{styleProps:U,rest:H}=Db(P),D=Ta(f),z=$?{checked:$.value.includes(H.value),onChange:W=>{$.onChange(W),k==null||k(W)}}:{};return _.jsx(NL,{...B("root"),__staticSelector:"Checkbox",__stylesApiProps:n,id:D,size:F,labelPosition:y,label:c,description:v,error:b,disabled:w,classNames:r,styles:o,unstyled:a,"data-checked":z.checked||g||void 0,variant:E,ref:C,mod:O,...U,...p,children:_.jsxs(pe,{...B("inner"),mod:{"data-label-position":y},children:[_.jsx(pe,{component:"input",id:D,ref:t,checked:g,disabled:w,mod:{error:!!b,indeterminate:T},...B("input",{focusable:!0,variant:E}),onChange:k,...H,...z,type:"checkbox"}),_.jsx(M,{indeterminate:T,...B("icon")})]})})});Sl.classes={...m_e,...u_e};Sl.displayName="@mantine/core/Checkbox";Sl.Group=BG;Sl.Indicator=UG;Sl.Card=FG;function ME(e){return"group"in e}function g_e({options:e,search:t,limit:n}){const r=t.trim().toLowerCase(),i=[];for(let s=0;s<e.length;s+=1){const o=e[s];if(i.length===n)return i;ME(o)&&i.push({group:o.group,items:g_e({options:o.items,search:t,limit:n-i.length})}),ME(o)||o.label.toLowerCase().includes(r)&&i.push(o)}return i}function Wqe(e){if(e.length===0)return!0;for(const t of e)if(!("group"in t)||t.items.length>0)return!1;return!0}function y_e(e,t=new Set){if(Array.isArray(e))for(const n of e)if(ME(n))y_e(n.items,t);else{if(typeof n.value>"u")throw new Error("[@mantine/core] Each option must have value property");if(typeof n.value!="string")throw new Error(`[@mantine/core] Option value must be a string, other data formats are not supported, got ${typeof n.value}`);if(t.has(n.value))throw new Error(`[@mantine/core] Duplicate options are not supported. Option with value "${n.value}" was provided more than once`);t.add(n.value)}}function Gqe(e,t){return Array.isArray(e)?e.includes(t):e===t}function v_e({data:e,withCheckIcon:t,value:n,checkIconPosition:r,unstyled:i,renderOption:s}){if(!ME(e)){const a=Gqe(n,e.value),u=t&&a&&_.jsx(d_e,{className:Xu.optionsDropdownCheckIcon}),l=_.jsxs(_.Fragment,{children:[r==="left"&&u,_.jsx("span",{children:e.label}),r==="right"&&u]});return _.jsx(Kn.Option,{value:e.value,disabled:e.disabled,className:Xi({[Xu.optionsDropdownOption]:!i}),"data-reverse":r==="right"||void 0,"data-checked":a||void 0,"aria-selected":a,active:a,children:typeof s=="function"?s({option:e,checked:a}):l})}const o=e.items.map(a=>_.jsx(v_e,{data:a,value:n,unstyled:i,withCheckIcon:t,checkIconPosition:r,renderOption:s},a.value));return _.jsx(Kn.Group,{label:e.group,children:o})}function b_e({data:e,hidden:t,hiddenWhenEmpty:n,filter:r,search:i,limit:s,maxDropdownHeight:o,withScrollArea:a=!0,filterOptions:u=!0,withCheckIcon:l=!1,value:c,checkIconPosition:f,nothingFoundMessage:d,unstyled:h,labelId:p,renderOption:m,scrollAreaProps:g,"aria-label":y}){y_e(e);const b=typeof i=="string"?(r||g_e)({options:e,search:u?i:"",limit:s??1/0}):e,w=Wqe(b),E=b.map(T=>_.jsx(v_e,{data:T,withCheckIcon:l,value:c,checkIconPosition:f,unstyled:h,renderOption:m},ME(T)?T.group:T.value));return _.jsx(Kn.Dropdown,{hidden:t||n&&w,children:_.jsxs(Kn.Options,{labelledBy:p,"aria-label":y,children:[a?_.jsx(vm.Autosize,{mah:o??220,type:"scroll",scrollbarSize:"var(--combobox-padding)",offsetScrollbars:"y",...g,children:E}):E,w&&d&&_.jsx(Kn.Empty,{children:d})]})})}var __e={root:"m_347db0ec","root--dot":"m_fbd81e3d",label:"m_5add502a",section:"m_91fdda9b"};const Yqe={},Kqe=(e,{radius:t,color:n,gradient:r,variant:i,size:s,autoContrast:o})=>{const a=e.variantColorResolver({color:n||e.primaryColor,theme:e,gradient:r,variant:i||"filled",autoContrast:o});return{root:{"--badge-height":tn(s,"badge-height"),"--badge-padding-x":tn(s,"badge-padding-x"),"--badge-fz":tn(s,"badge-fz"),"--badge-radius":t===void 0?void 0:Ur(t),"--badge-bg":n||i?a.background:void 0,"--badge-color":n||i?a.color:void 0,"--badge-bd":n||i?a.border:void 0,"--badge-dot-color":i==="dot"?$r(n,e):void 0}}},b0=Us((e,t)=>{const n=xe("Badge",Yqe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,radius:l,color:c,gradient:f,leftSection:d,rightSection:h,children:p,variant:m,fullWidth:g,autoContrast:y,circle:v,mod:b,...w}=n,E=dt({name:"Badge",props:n,classes:__e,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:Kqe});return _.jsxs(pe,{variant:m,mod:[{block:g,circle:v},b],...E("root",{variant:m}),ref:t,...w,children:[d&&_.jsx("span",{...E("section"),"data-position":"left",children:d}),_.jsx("span",{...E("label"),children:p}),h&&_.jsx("span",{...E("section"),"data-position":"right",children:h})]})});b0.classes=__e;b0.displayName="@mantine/core/Badge";var w_e={root:"m_fea6bf1a",burger:"m_d4fb9cad"};const Xqe={},Qqe=(e,{color:t,size:n,transitionDuration:r,transitionTimingFunction:i})=>({root:{"--burger-color":t?$r(t,e):void 0,"--burger-size":tn(n,"burger-size"),"--burger-transition-duration":r===void 0?void 0:`${r}ms`,"--burger-transition-timing-function":i}}),zG=Me((e,t)=>{const n=xe("Burger",Xqe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,opened:l,children:c,transitionDuration:f,transitionTimingFunction:d,...h}=n,p=dt({name:"Burger",classes:w_e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:Qqe});return _.jsxs(xs,{...p("root"),ref:t,...h,children:[_.jsx(pe,{mod:["reduce-motion",{opened:l}],...p("burger")}),c]})});zG.classes=w_e;zG.displayName="@mantine/core/Burger";var DL={root:"m_77c9d27d",inner:"m_80f1301b",label:"m_811560b9",section:"m_a74036a",loader:"m_a25b86ee",group:"m_80d6d844"};const joe={orientation:"horizontal"},Jqe=(e,{borderWidth:t})=>({group:{"--button-border-width":Te(t)}}),VG=Me((e,t)=>{const n=xe("ButtonGroup",joe,e),{className:r,style:i,classNames:s,styles:o,unstyled:a,orientation:u,vars:l,borderWidth:c,variant:f,mod:d,...h}=xe("ButtonGroup",joe,e),p=dt({name:"ButtonGroup",props:n,classes:DL,className:r,style:i,classNames:s,styles:o,unstyled:a,vars:l,varsResolver:Jqe,rootSelector:"group"});return _.jsx(pe,{...p("group"),ref:t,variant:f,mod:[{"data-orientation":u},d],role:"group",...h})});VG.classes=DL;VG.displayName="@mantine/core/ButtonGroup";const Zqe={in:{opacity:1,transform:`translate(-50%, calc(-50% + ${Te(1)}))`},out:{opacity:0,transform:"translate(-50%, -200%)"},common:{transformOrigin:"center"},transitionProperty:"transform, opacity"},eWe={},tWe=(e,{radius:t,color:n,gradient:r,variant:i,size:s,justify:o,autoContrast:a})=>{const u=e.variantColorResolver({color:n||e.primaryColor,theme:e,gradient:r,variant:i||"filled",autoContrast:a});return{root:{"--button-justify":o,"--button-height":tn(s,"button-height"),"--button-padding-x":tn(s,"button-padding-x"),"--button-fz":s!=null&&s.includes("compact")?uo(s.replace("compact-","")):uo(s),"--button-radius":t===void 0?void 0:Ur(t),"--button-bg":n||i?u.background:void 0,"--button-hover":n||i?u.hover:void 0,"--button-color":u.color,"--button-bd":n||i?u.border:void 0,"--button-hover-color":n||i?u.hoverColor:void 0}}},fn=Us((e,t)=>{const n=xe("Button",eWe,e),{style:r,vars:i,className:s,color:o,disabled:a,children:u,leftSection:l,rightSection:c,fullWidth:f,variant:d,radius:h,loading:p,loaderProps:m,gradient:g,classNames:y,styles:v,unstyled:b,"data-disabled":w,autoContrast:E,mod:T,...S}=n,C=dt({name:"Button",props:n,classes:DL,className:s,style:r,classNames:y,styles:v,unstyled:b,vars:i,varsResolver:tWe}),A=!!l,k=!!c;return _.jsxs(xs,{ref:t,...C("root",{active:!a&&!p&&!w}),unstyled:b,variant:d,disabled:a||p,mod:[{disabled:a||w,loading:p,block:f,"with-left-section":A,"with-right-section":k},T],...S,children:[_.jsx(qm,{mounted:!!p,transition:Zqe,duration:150,children:N=>_.jsx(pe,{component:"span",...C("loader",{style:N}),"aria-hidden":!0,children:_.jsx(sd,{color:"var(--button-color)",size:"calc(var(--button-height) / 1.8)",...m})})}),_.jsxs("span",{...C("inner"),children:[l&&_.jsx(pe,{component:"span",...C("section"),mod:{position:"left"},children:l}),_.jsx(pe,{component:"span",mod:{loading:p},...C("label"),children:u}),c&&_.jsx(pe,{component:"span",...C("section"),mod:{position:"right"},children:c})]})]})});fn.classes=DL;fn.displayName="@mantine/core/Button";fn.Group=VG;const[nWe,rWe]=fo("Card component was not found in tree");var HG={root:"m_e615b15f",section:"m_599a2148"};const iWe={},PL=Us((e,t)=>{const n=xe("CardSection",iWe,e),{classNames:r,className:i,style:s,styles:o,vars:a,withBorder:u,inheritPadding:l,mod:c,...f}=n,d=rWe();return _.jsx(pe,{ref:t,mod:[{"with-border":u,"inherit-padding":l},c],...d.getStyles("section",{className:i,style:s,styles:o,classNames:r}),...f})});PL.classes=HG;PL.displayName="@mantine/core/CardSection";const sWe={},oWe=(e,{padding:t})=>({root:{"--card-padding":as(t)}}),Lb=Us((e,t)=>{const n=xe("Card",sWe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,children:l,padding:c,...f}=n,d=dt({name:"Card",props:n,classes:HG,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:oWe}),h=I.Children.toArray(l),p=h.map((m,g)=>typeof m=="object"&&m&&"type"in m&&m.type===PL?I.cloneElement(m,{"data-first-section":g===0||void 0,"data-last-section":g===h.length-1||void 0}):m);return _.jsx(nWe,{value:{getStyles:d},children:_.jsx(Pb,{ref:t,unstyled:a,...d("root"),...f,children:p})})});Lb.classes=HG;Lb.displayName="@mantine/core/Card";Lb.Section=PL;var E_e={root:"m_4451eb3a"};const aWe={},Pc=Us((e,t)=>{const n=xe("Center",aWe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,inline:l,mod:c,...f}=n,d=dt({name:"Center",props:n,classes:E_e,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u});return _.jsx(pe,{ref:t,mod:[{inline:l},c],...d("root"),...f})});Pc.classes=E_e;Pc.displayName="@mantine/core/Center";var x_e={root:"m_b183c0a2"};const uWe={},lWe=(e,{color:t})=>({root:{"--code-bg":t?$r(t,e):void 0}}),gC=Me((e,t)=>{const n=xe("Code",uWe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,color:l,block:c,variant:f,mod:d,...h}=n,p=dt({name:"Code",props:n,classes:x_e,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:lWe});return _.jsx(pe,{component:c?"pre":"code",variant:f,ref:t,mod:[{block:c},d],...p("root"),...h,dir:"ltr"})});gC.classes=x_e;gC.displayName="@mantine/core/Code";var S_e={root:"m_7485cace"};const cWe={},fWe=(e,{size:t,fluid:n})=>({root:{"--container-size":n?void 0:tn(t,"container-size")}}),Oc=Me((e,t)=>{const n=xe("Container",cWe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,fluid:l,mod:c,...f}=n,d=dt({name:"Container",classes:S_e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:fWe});return _.jsx(pe,{ref:t,mod:[{fluid:l},c],...d("root"),...f})});Oc.classes=S_e;Oc.displayName="@mantine/core/Container";var T_e={root:"m_3eebeb36",label:"m_9e365f20"};const dWe={orientation:"horizontal"},hWe=(e,{color:t,variant:n,size:r})=>({root:{"--divider-color":t?$r(t,e):void 0,"--divider-border-style":n,"--divider-size":tn(r,"divider-size")}}),LE=Me((e,t)=>{const n=xe("Divider",dWe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,color:l,orientation:c,label:f,labelPosition:d,mod:h,...p}=n,m=dt({name:"Divider",classes:T_e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:hWe});return _.jsx(pe,{ref:t,mod:[{orientation:c,"with-label":!!f},h],...m("root"),...p,role:"separator",children:f&&_.jsx(pe,{component:"span",mod:{position:d},...m("label"),children:f})})});LE.classes=T_e;LE.displayName="@mantine/core/Divider";const[pWe,tS]=fo("Drawer component was not found in tree");var Ym={root:"m_f11b401e",header:"m_5a7c2c9",content:"m_b8a05bbd",inner:"m_31cd769a"};const mWe={},OL=Me((e,t)=>{const n=xe("DrawerBody",mWe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=tS();return _.jsx(uG,{ref:t,...l.getStyles("body",{classNames:r,style:s,styles:o,className:i}),...u})});OL.classes=Ym;OL.displayName="@mantine/core/DrawerBody";const gWe={},$L=Me((e,t)=>{const n=xe("DrawerCloseButton",gWe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=tS();return _.jsx(lG,{ref:t,...l.getStyles("close",{classNames:r,style:s,styles:o,className:i}),...u})});$L.classes=Ym;$L.displayName="@mantine/core/DrawerCloseButton";const yWe={},ML=Me((e,t)=>{const n=xe("DrawerContent",yWe,e),{classNames:r,className:i,style:s,styles:o,vars:a,children:u,radius:l,...c}=n,f=tS(),d=f.scrollAreaComponent||Wbe;return _.jsx(qbe,{...f.getStyles("content",{className:i,style:s,styles:o,classNames:r}),innerProps:f.getStyles("inner",{className:i,style:s,styles:o,classNames:r}),ref:t,...c,radius:l||f.radius||0,children:_.jsx(d,{style:{height:"100vh"},children:u})})});ML.classes=Ym;ML.displayName="@mantine/core/DrawerContent";const vWe={},LL=Me((e,t)=>{const n=xe("DrawerHeader",vWe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=tS();return _.jsx(cG,{ref:t,...l.getStyles("header",{classNames:r,style:s,styles:o,className:i}),...u})});LL.classes=Ym;LL.displayName="@mantine/core/DrawerHeader";const bWe={},FL=Me((e,t)=>{const n=xe("DrawerOverlay",bWe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=tS();return _.jsx(fG,{ref:t,...l.getStyles("overlay",{classNames:r,style:s,styles:o,className:i}),...u})});FL.classes=Ym;FL.displayName="@mantine/core/DrawerOverlay";function _We(e){switch(e){case"top":return"flex-start";case"bottom":return"flex-end";default:return}}function wWe(e){if(e==="top"||e==="bottom")return"0 0 calc(100% - var(--drawer-offset, 0rem) * 2)"}const EWe={top:"slide-down",bottom:"slide-up",left:"slide-right",right:"slide-left"},xWe={top:"slide-down",bottom:"slide-up",right:"slide-right",left:"slide-left"},SWe={closeOnClickOutside:!0,withinPortal:!0,lockScroll:!0,trapFocus:!0,returnFocus:!0,closeOnEscape:!0,keepMounted:!1,zIndex:Jl("modal"),position:"left"},TWe=(e,{position:t,size:n,offset:r})=>({root:{"--drawer-size":tn(n,"drawer-size"),"--drawer-flex":wWe(t),"--drawer-height":t==="left"||t==="right"?void 0:"var(--drawer-size)","--drawer-align":_We(t),"--drawer-justify":t==="right"?"flex-end":void 0,"--drawer-offset":Te(r)}}),jL=Me((e,t)=>{const n=xe("DrawerRoot",SWe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,scrollAreaComponent:l,position:c,transitionProps:f,radius:d,...h}=n,{dir:p}=Hh(),m=dt({name:"Drawer",classes:Ym,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:TWe}),g=(p==="rtl"?xWe:EWe)[c];return _.jsx(pWe,{value:{scrollAreaComponent:l,getStyles:m,radius:d},children:_.jsx(Hbe,{ref:t,...m("root"),transitionProps:{transition:g,...f},unstyled:a,...h})})});jL.classes=Ym;jL.displayName="@mantine/core/DrawerRoot";const CWe={},BL=Me((e,t)=>{const n=xe("DrawerTitle",CWe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=tS();return _.jsx(dG,{ref:t,...l.getStyles("title",{classNames:r,style:s,styles:o,className:i}),...u})});BL.classes=Ym;BL.displayName="@mantine/core/DrawerTitle";const AWe={closeOnClickOutside:!0,withinPortal:!0,lockScroll:!0,trapFocus:!0,returnFocus:!0,closeOnEscape:!0,keepMounted:!1,zIndex:Jl("modal"),withOverlay:!0,withCloseButton:!0},qh=Me((e,t)=>{const{title:n,withOverlay:r,overlayProps:i,withCloseButton:s,closeButtonProps:o,children:a,...u}=xe("Drawer",AWe,e),l=!!n||s;return _.jsxs(jL,{ref:t,...u,children:[r&&_.jsx(FL,{...i}),_.jsxs(ML,{children:[l&&_.jsxs(LL,{children:[n&&_.jsx(BL,{children:n}),s&&_.jsx($L,{...o})]}),_.jsx(OL,{children:a})]})]})});qh.classes=Ym;qh.displayName="@mantine/core/Drawer";qh.Root=jL;qh.Overlay=FL;qh.Content=ML;qh.Body=OL;qh.Header=LL;qh.Title=BL;qh.CloseButton=$L;function IWe({open:e,close:t,openDelay:n,closeDelay:r}){const i=I.useRef(-1),s=I.useRef(-1),o=()=>{window.clearTimeout(i.current),window.clearTimeout(s.current)},a=()=>{o(),n===0||n===void 0?e():i.current=window.setTimeout(e,n)},u=()=>{o(),r===0||r===void 0?t():s.current=window.setTimeout(t,r)};return I.useEffect(()=>o,[]),{openDropdown:a,closeDropdown:u}}const[kWe,C_e]=fo("Grid component was not found in tree"),ZU=(e,t)=>e==="content"?"auto":e==="auto"?"0rem":e?`${100/(t/e)}%`:void 0,Boe=(e,t,n)=>n||e==="auto"?"100%":e==="content"?"unset":ZU(e,t),Uoe=(e,t)=>{if(e)return e==="auto"||t?"1":"auto"},zoe=(e,t)=>e===0?"0":e?`${100/(t/e)}%`:void 0;function RWe({span:e,order:t,offset:n,selector:r}){var d;const i=ps(),s=C_e(),a=If(e)===void 0?12:If(e),u=Ay({"--col-order":(d=If(t))==null?void 0:d.toString(),"--col-flex-grow":Uoe(a,s.grow),"--col-flex-basis":ZU(a,s.columns),"--col-width":a==="content"?"auto":void 0,"--col-max-width":Boe(a,s.columns,s.grow),"--col-offset":zoe(If(n),s.columns)}),l=Xr(i.breakpoints).reduce((h,p)=>{var m;return h[p]||(h[p]={}),typeof t=="object"&&t[p]!==void 0&&(h[p]["--col-order"]=(m=t[p])==null?void 0:m.toString()),typeof e=="object"&&e[p]!==void 0&&(h[p]["--col-flex-grow"]=Uoe(e[p],s.grow),h[p]["--col-flex-basis"]=ZU(e[p],s.columns),h[p]["--col-width"]=e[p]==="content"?"auto":void 0,h[p]["--col-max-width"]=Boe(e[p],s.columns,s.grow)),typeof n=="object"&&n[p]!==void 0&&(h[p]["--col-offset"]=zoe(n[p],s.columns)),h},{}),f=SA(Xr(l),i).filter(h=>Xr(l[h.value]).length>0).map(h=>({query:`(min-width: ${i.breakpoints[h.value]})`,styles:l[h.value]}));return _.jsx(Nb,{styles:u,media:f,selector:r})}var qG={root:"m_410352e9",inner:"m_dee7bd2f",col:"m_96bdd299"};const NWe={span:12},WG=Me((e,t)=>{const n=xe("GridCol",NWe,e),{classNames:r,className:i,style:s,styles:o,vars:a,span:u,order:l,offset:c,...f}=n,d=C_e(),h=ok();return _.jsxs(_.Fragment,{children:[_.jsx(RWe,{selector:`.${h}`,span:u,order:l,offset:c}),_.jsx(pe,{ref:t,...d.getStyles("col",{className:Xi(i,h),style:s,classNames:r,styles:o}),...f})]})});WG.classes=qG;WG.displayName="@mantine/core/GridCol";function DWe({gutter:e,selector:t}){const n=ps(),r=Ay({"--grid-gutter":as(If(e))}),i=Xr(n.breakpoints).reduce((a,u)=>(a[u]||(a[u]={}),typeof e=="object"&&e[u]!==void 0&&(a[u]["--grid-gutter"]=as(e[u])),a),{}),o=SA(Xr(i),n).filter(a=>Xr(i[a.value]).length>0).map(a=>({query:`(min-width: ${n.breakpoints[a.value]})`,styles:i[a.value]}));return _.jsx(Nb,{styles:r,media:o,selector:t})}const PWe={gutter:"md",grow:!1,columns:12},OWe=(e,{justify:t,align:n,overflow:r})=>({root:{"--grid-justify":t,"--grid-align":n,"--grid-overflow":r}}),Ha=Me((e,t)=>{const n=xe("Grid",PWe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,grow:l,gutter:c,columns:f,align:d,justify:h,children:p,...m}=n,g=dt({name:"Grid",classes:qG,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:OWe}),y=ok();return _.jsxs(kWe,{value:{getStyles:g,grow:l,columns:f},children:[_.jsx(DWe,{selector:`.${y}`,...n}),_.jsx(pe,{ref:t,...g("root",{className:y}),...m,children:_.jsx("div",{...g("inner"),children:p})})]})});Ha.classes=qG;Ha.displayName="@mantine/core/Grid";Ha.Col=WG;var A_e={root:"m_9e117634"};const $We={},MWe=(e,{radius:t,fit:n})=>({root:{"--image-radius":t===void 0?void 0:Ur(t),"--image-object-fit":n}}),Dy=Us((e,t)=>{const n=xe("Image",$We,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,onError:l,src:c,radius:f,fit:d,fallbackSrc:h,mod:p,...m}=n,[g,y]=I.useState(!c);I.useEffect(()=>y(!c),[c]);const v=dt({name:"Image",classes:A_e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:MWe});return g&&h?_.jsx(pe,{component:"img",ref:t,src:h,...v("root"),onError:l,mod:["fallback",p],...m}):_.jsx(pe,{component:"img",ref:t,...v("root"),src:c,onError:b=>{l==null||l(b),y(!0)},mod:p,...m})});Dy.classes=A_e;Dy.displayName="@mantine/core/Image";function GO(){return GO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},GO.apply(null,arguments)}function GG(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}var LWe=I.useLayoutEffect,FWe=function(t){var n=I.useRef(t);return LWe(function(){n.current=t}),n},Voe=function(t,n){if(typeof t=="function"){t(n);return}t.current=n},jWe=function(t,n){var r=I.useRef();return I.useCallback(function(i){t.current=i,r.current&&Voe(r.current,null),r.current=n,n&&Voe(n,i)},[n])},Hoe={"min-height":"0","max-height":"none",height:"0",visibility:"hidden",overflow:"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0"},BWe=function(t){Object.keys(Hoe).forEach(function(n){t.style.setProperty(n,Hoe[n],"important")})},qoe=BWe,Na=null,Woe=function(t,n){var r=t.scrollHeight;return n.sizingStyle.boxSizing==="border-box"?r+n.borderSize:r-n.paddingSize};function UWe(e,t,n,r){n===void 0&&(n=1),r===void 0&&(r=1/0),Na||(Na=document.createElement("textarea"),Na.setAttribute("tabindex","-1"),Na.setAttribute("aria-hidden","true"),qoe(Na)),Na.parentNode===null&&document.body.appendChild(Na);var i=e.paddingSize,s=e.borderSize,o=e.sizingStyle,a=o.boxSizing;Object.keys(o).forEach(function(d){var h=d;Na.style[h]=o[h]}),qoe(Na),Na.value=t;var u=Woe(Na,e);Na.value=t,u=Woe(Na,e),Na.value="x";var l=Na.scrollHeight-i,c=l*n;a==="border-box"&&(c=c+i+s),u=Math.max(c,u);var f=l*r;return a==="border-box"&&(f=f+i+s),u=Math.min(f,u),[u,l]}var Goe=function(){},zWe=function(t,n){return t.reduce(function(r,i){return r[i]=n[i],r},{})},VWe=["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth","boxSizing","fontFamily","fontSize","fontStyle","fontWeight","letterSpacing","lineHeight","paddingBottom","paddingLeft","paddingRight","paddingTop","tabSize","textIndent","textRendering","textTransform","width","wordBreak"],HWe=!!document.documentElement.currentStyle,qWe=function(t){var n=window.getComputedStyle(t);if(n===null)return null;var r=zWe(VWe,n),i=r.boxSizing;if(i==="")return null;HWe&&i==="border-box"&&(r.width=parseFloat(r.width)+parseFloat(r.borderRightWidth)+parseFloat(r.borderLeftWidth)+parseFloat(r.paddingRight)+parseFloat(r.paddingLeft)+"px");var s=parseFloat(r.paddingBottom)+parseFloat(r.paddingTop),o=parseFloat(r.borderBottomWidth)+parseFloat(r.borderTopWidth);return{sizingStyle:r,paddingSize:s,borderSize:o}},WWe=qWe;function I_e(e,t,n){var r=FWe(n);I.useLayoutEffect(function(){var i=function(o){return r.current(o)};if(e)return e.addEventListener(t,i),function(){return e.removeEventListener(t,i)}},[])}var GWe=function(t){I_e(window,"resize",t)},YWe=function(t){I_e(document.fonts,"loadingdone",t)},KWe=["cacheMeasurements","maxRows","minRows","onChange","onHeightChange"],XWe=function(t,n){var r=t.cacheMeasurements,i=t.maxRows,s=t.minRows,o=t.onChange,a=o===void 0?Goe:o,u=t.onHeightChange,l=u===void 0?Goe:u,c=GG(t,KWe),f=c.value!==void 0,d=I.useRef(null),h=jWe(d,n),p=I.useRef(0),m=I.useRef(),g=function(){var b=d.current,w=r&&m.current?m.current:WWe(b);if(w){m.current=w;var E=UWe(w,b.value||b.placeholder||"x",s,i),T=E[0],S=E[1];p.current!==T&&(p.current=T,b.style.setProperty("height",T+"px","important"),l(T,{rowHeight:S}))}},y=function(b){f||g(),a(b)};return I.useLayoutEffect(g),GWe(g),YWe(g),I.createElement("textarea",GO({},c,{onChange:y,ref:h}))},QWe=I.forwardRef(XWe);const JWe={},YG=Me((e,t)=>{const{autosize:n,maxRows:r,minRows:i,__staticSelector:s,resize:o,...a}=xe("Textarea",JWe,e),u=n&&q1e()!=="test",l=u?{maxRows:r,minRows:i}:{};return _.jsx(qc,{component:u?QWe:"textarea",ref:t,...a,__staticSelector:s||"Textarea",multiline:!0,"data-no-overflow":n&&r===void 0||void 0,__vars:{"--input-resize":o},...l})});YG.classes=qc.classes;YG.displayName="@mantine/core/Textarea";const[ZWe,eGe]=fo("List component was not found in tree");var KG={root:"m_abbac491",item:"m_abb6bec2",itemWrapper:"m_75cd9f71",itemIcon:"m_60f83e5b"};const tGe={},XG=Me((e,t)=>{const n=xe("ListItem",tGe,e),{classNames:r,className:i,style:s,styles:o,vars:a,icon:u,children:l,mod:c,...f}=n,d=eGe(),h=u||d.icon,p={classNames:r,styles:o};return _.jsx(pe,{...d.getStyles("item",{...p,className:i,style:s}),component:"li",mod:[{"with-icon":!!h,centered:d.center},c],ref:t,...f,children:_.jsxs("div",{...d.getStyles("itemWrapper",p),children:[h&&_.jsx("span",{...d.getStyles("itemIcon",p),children:h}),_.jsx("span",{...d.getStyles("itemLabel",p),children:l})]})})});XG.classes=KG;XG.displayName="@mantine/core/ListItem";const nGe={type:"unordered"},rGe=(e,{size:t,spacing:n})=>({root:{"--list-fz":uo(t),"--list-lh":L1e(t),"--list-spacing":as(n)}}),jf=Me((e,t)=>{const n=xe("List",nGe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,children:l,type:c,withPadding:f,icon:d,spacing:h,center:p,listStyleType:m,mod:g,...y}=n,v=dt({name:"List",classes:KG,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:rGe});return _.jsx(ZWe,{value:{center:p,icon:d,getStyles:v},children:_.jsx(pe,{...v("root",{style:{listStyleType:m}}),component:c==="unordered"?"ul":"ol",mod:[{"with-padding":f},g],ref:t,...y,children:l})})});jf.classes=KG;jf.displayName="@mantine/core/List";jf.Item=XG;var k_e={root:"m_6e45937b",loader:"m_e8eb006c",overlay:"m_df587f17"};const Yoe={transitionProps:{transition:"fade",duration:0},overlayProps:{backgroundOpacity:.75},zIndex:Jl("overlay")},iGe=(e,{zIndex:t})=>({root:{"--lo-z-index":t==null?void 0:t.toString()}}),Ll=Me((e,t)=>{const n=xe("LoadingOverlay",Yoe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,transitionProps:l,loaderProps:c,overlayProps:f,visible:d,zIndex:h,...p}=n,m=ps(),g=dt({name:"LoadingOverlay",classes:k_e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:iGe}),y={...Yoe.overlayProps,...f};return _.jsx(qm,{transition:"fade",...l,mounted:!!d,children:v=>_.jsxs(pe,{...g("root",{style:v}),ref:t,...p,children:[_.jsx(sd,{...g("loader"),unstyled:a,...c}),_.jsx(AA,{...y,...g("overlay"),darkHidden:!0,unstyled:a,color:(f==null?void 0:f.color)||m.white}),_.jsx(AA,{...y,...g("overlay"),lightHidden:!0,unstyled:a,color:(f==null?void 0:f.color)||m.colors.dark[5]})]})})});Ll.classes=k_e;Ll.displayName="@mantine/core/LoadingOverlay";const[sGe,dk]=fo("Menu component was not found in the tree");var nS={dropdown:"m_dc9b7c9f",label:"m_9bfac126",divider:"m_efdf90cb",item:"m_99ac2aa1",itemLabel:"m_5476e0d3",itemSection:"m_8b75e504"};const oGe={},QG=Me((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=xe("MenuDivider",oGe,e),u=dk();return _.jsx(pe,{ref:t,...u.getStyles("divider",{className:r,style:i,styles:s,classNames:n}),...a})});QG.classes=nS;QG.displayName="@mantine/core/MenuDivider";const aGe={},JG=Me((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,onMouseEnter:a,onMouseLeave:u,children:l,...c}=xe("MenuDropdown",aGe,e),f=I.useRef(null),d=dk(),h=g=>{var y,v;(g.key==="ArrowUp"||g.key==="ArrowDown")&&(g.preventDefault(),(v=(y=f.current)==null?void 0:y.querySelectorAll("[data-menu-item]:not(:disabled)")[0])==null||v.focus())},p=Wp(a,()=>(d.trigger==="hover"||d.trigger==="click-hover")&&d.openDropdown()),m=Wp(u,()=>(d.trigger==="hover"||d.trigger==="click-hover")&&d.closeDropdown());return _.jsxs(Do.Dropdown,{...c,onMouseEnter:p,onMouseLeave:m,role:"menu","aria-orientation":"vertical",ref:hs(t,f),...d.getStyles("dropdown",{className:r,style:i,styles:s,classNames:n,withStaticClass:!1}),tabIndex:-1,"data-menu-dropdown":!0,onKeyDown:h,children:[_.jsx("div",{tabIndex:-1,"data-autofocus":!0,"aria-hidden":!0,style:{outline:0}}),l]})});JG.classes=nS;JG.displayName="@mantine/core/MenuDropdown";const uGe={},ZG=Us((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,color:a,closeMenuOnClick:u,leftSection:l,rightSection:c,children:f,disabled:d,...h}=xe("MenuItem",uGe,e),p=dk(),m=ps(),{dir:g}=Hh(),y=I.useRef(),v=p.getItemIndex(y.current),b=h,w=Wp(b.onMouseLeave,()=>p.setHovered(-1)),E=Wp(b.onMouseEnter,()=>p.setHovered(p.getItemIndex(y.current))),T=Wp(b.onClick,()=>{typeof u=="boolean"?u&&p.closeDropdownImmediately():p.closeOnItemClick&&p.closeDropdownImmediately()}),S=Wp(b.onFocus,()=>p.setHovered(p.getItemIndex(y.current))),C=a?m.variantColorResolver({color:a,theme:m,variant:"light"}):void 0,A=a?Vh({color:a,theme:m}):null;return _.jsxs(xs,{...h,unstyled:p.unstyled,tabIndex:p.menuItemTabIndex,onFocus:S,...p.getStyles("item",{className:r,style:i,styles:s,classNames:n}),ref:hs(y,t),role:"menuitem",disabled:d,"data-menu-item":!0,"data-disabled":d||void 0,"data-hovered":p.hovered===v?!0:void 0,onMouseEnter:E,onMouseLeave:w,onClick:T,onKeyDown:NW({siblingSelector:"[data-menu-item]",parentSelector:"[data-menu-dropdown]",activateOnFocus:!1,loop:p.loop,dir:g,orientation:"vertical",onKeyDown:b.onKeydown}),__vars:{"--menu-item-color":A!=null&&A.isThemeColor&&(A==null?void 0:A.shade)===void 0?`var(--mantine-color-${A.color}-6)`:C==null?void 0:C.color,"--menu-item-hover":C==null?void 0:C.hover},children:[l&&_.jsx("div",{...p.getStyles("itemSection",{styles:s,classNames:n}),"data-position":"left",children:l}),f&&_.jsx("div",{...p.getStyles("itemLabel",{styles:s,classNames:n}),children:f}),c&&_.jsx("div",{...p.getStyles("itemSection",{styles:s,classNames:n}),"data-position":"right",children:c})]})});ZG.classes=nS;ZG.displayName="@mantine/core/MenuItem";const lGe={},eY=Me((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=xe("MenuLabel",lGe,e),u=dk();return _.jsx(pe,{ref:t,...u.getStyles("label",{className:r,style:i,styles:s,classNames:n}),...a})});eY.classes=nS;eY.displayName="@mantine/core/MenuLabel";const cGe={refProp:"ref"},R_e=I.forwardRef((e,t)=>{const{children:n,refProp:r,...i}=xe("MenuTarget",cGe,e);if(!Iy(n))throw new Error("Menu.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const s=dk(),o=Wp(n.props.onClick,()=>{s.trigger==="click"?s.toggleDropdown():s.trigger==="click-hover"&&(s.setOpenedViaClick(!0),s.opened||s.openDropdown())}),a=Wp(n.props.onMouseEnter,()=>(s.trigger==="hover"||s.trigger==="click-hover")&&s.openDropdown()),u=Wp(n.props.onMouseLeave,()=>{(s.trigger==="hover"||s.trigger==="click-hover"&&!s.openedViaClick)&&s.closeDropdown()});return _.jsx(Do.Target,{refProp:r,popupType:"menu",ref:t,...i,children:I.cloneElement(n,{onClick:o,onMouseEnter:a,onMouseLeave:u,"data-expanded":s.opened?!0:void 0})})});R_e.displayName="@mantine/core/MenuTarget";const fGe={trapFocus:!0,closeOnItemClick:!0,clickOutsideEvents:["mousedown","touchstart","keydown"],loop:!0,trigger:"click",openDelay:0,closeDelay:100,menuItemTabIndex:-1};function Cu(e){const t=xe("Menu",fGe,e),{children:n,onOpen:r,onClose:i,opened:s,defaultOpened:o,trapFocus:a,onChange:u,closeOnItemClick:l,loop:c,closeOnEscape:f,trigger:d,openDelay:h,closeDelay:p,classNames:m,styles:g,unstyled:y,variant:v,vars:b,menuItemTabIndex:w,keepMounted:E,...T}=t,S=dt({name:"Menu",classes:nS,props:t,classNames:m,styles:g,unstyled:y}),[C,{setHovered:A,resetHovered:k}]=gUe(),[N,O]=Ss({value:s,defaultValue:o,finalValue:!1,onChange:u}),[P,$]=I.useState(!1),F=()=>{O(!1),$(!1),N&&(i==null||i())},M=()=>{O(!0),!N&&(r==null||r())},B=()=>{N?F():M()},{openDropdown:U,closeDropdown:H}=IWe({open:M,close:F,closeDelay:p,openDelay:h}),D=j=>mUe("[data-menu-item]","[data-menu-dropdown]",j),{resolvedClassNames:z,resolvedStyles:W}=Vm({classNames:m,styles:g,props:t});return Sh(()=>{k()},[N]),_.jsx(sGe,{value:{getStyles:S,opened:N,toggleDropdown:B,getItemIndex:D,hovered:C,setHovered:A,openedViaClick:P,setOpenedViaClick:$,closeOnItemClick:l,closeDropdown:d==="click"?F:H,openDropdown:d==="click"?M:U,closeDropdownImmediately:F,loop:c,trigger:d,unstyled:y,menuItemTabIndex:w},children:_.jsx(Do,{...T,opened:N,onChange:B,defaultOpened:o,trapFocus:E?!1:a,closeOnEscape:f,__staticSelector:"Menu",classNames:z,styles:W,unstyled:y,variant:v,keepMounted:E,children:n})})}Cu.extend=e=>e;Cu.classes=nS;Cu.displayName="@mantine/core/Menu";Cu.Item=ZG;Cu.Label=eY;Cu.Dropdown=JG;Cu.Target=R_e;Cu.Divider=QG;const[dGe,rS]=fo("Modal component was not found in tree");var Km={root:"m_9df02822",content:"m_54c44539",inner:"m_1f958f16",header:"m_d0e2b9cd"};const hGe={},UL=Me((e,t)=>{const n=xe("ModalBody",hGe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=rS();return _.jsx(uG,{ref:t,...l.getStyles("body",{classNames:r,style:s,styles:o,className:i}),...u})});UL.classes=Km;UL.displayName="@mantine/core/ModalBody";const pGe={},zL=Me((e,t)=>{const n=xe("ModalCloseButton",pGe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=rS();return _.jsx(lG,{ref:t,...l.getStyles("close",{classNames:r,style:s,styles:o,className:i}),...u})});zL.classes=Km;zL.displayName="@mantine/core/ModalCloseButton";const mGe={},VL=Me((e,t)=>{const n=xe("ModalContent",mGe,e),{classNames:r,className:i,style:s,styles:o,vars:a,children:u,...l}=n,c=rS(),f=c.scrollAreaComponent||Wbe;return _.jsx(qbe,{...c.getStyles("content",{className:i,style:s,styles:o,classNames:r}),innerProps:c.getStyles("inner",{className:i,style:s,styles:o,classNames:r}),"data-full-screen":c.fullScreen||void 0,"data-modal-content":!0,ref:t,...l,children:_.jsx(f,{style:{maxHeight:c.fullScreen?"100dvh":`calc(100dvh - (${Te(c.yOffset)} * 2))`},children:u})})});VL.classes=Km;VL.displayName="@mantine/core/ModalContent";const gGe={},HL=Me((e,t)=>{const n=xe("ModalHeader",gGe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=rS();return _.jsx(cG,{ref:t,...l.getStyles("header",{classNames:r,style:s,styles:o,className:i}),...u})});HL.classes=Km;HL.displayName="@mantine/core/ModalHeader";const yGe={},qL=Me((e,t)=>{const n=xe("ModalOverlay",yGe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=rS();return _.jsx(fG,{ref:t,...l.getStyles("overlay",{classNames:r,style:s,styles:o,className:i}),...u})});qL.classes=Km;qL.displayName="@mantine/core/ModalOverlay";const vGe={__staticSelector:"Modal",closeOnClickOutside:!0,withinPortal:!0,lockScroll:!0,trapFocus:!0,returnFocus:!0,closeOnEscape:!0,keepMounted:!1,zIndex:Jl("modal"),transitionProps:{duration:200,transition:"pop"},yOffset:"5dvh"},bGe=(e,{radius:t,size:n,yOffset:r,xOffset:i})=>({root:{"--modal-radius":t===void 0?void 0:Ur(t),"--modal-size":tn(n,"modal-size"),"--modal-y-offset":Te(r),"--modal-x-offset":Te(i)}}),WL=Me((e,t)=>{const n=xe("ModalRoot",vGe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,yOffset:l,scrollAreaComponent:c,radius:f,fullScreen:d,centered:h,xOffset:p,__staticSelector:m,...g}=n,y=dt({name:m,classes:Km,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:bGe});return _.jsx(dGe,{value:{yOffset:l,scrollAreaComponent:c,getStyles:y,fullScreen:d},children:_.jsx(Hbe,{ref:t,...y("root"),"data-full-screen":d||void 0,"data-centered":h||void 0,unstyled:a,...g})})});WL.classes=Km;WL.displayName="@mantine/core/ModalRoot";const _Ge={},GL=Me((e,t)=>{const n=xe("ModalTitle",_Ge,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=rS();return _.jsx(dG,{ref:t,...l.getStyles("title",{classNames:r,style:s,styles:o,className:i}),...u})});GL.classes=Km;GL.displayName="@mantine/core/ModalTitle";const wGe={closeOnClickOutside:!0,withinPortal:!0,lockScroll:!0,trapFocus:!0,returnFocus:!0,closeOnEscape:!0,keepMounted:!1,zIndex:Jl("modal"),transitionProps:{duration:200,transition:"fade-down"},withOverlay:!0,withCloseButton:!0},Yi=Me((e,t)=>{const{title:n,withOverlay:r,overlayProps:i,withCloseButton:s,closeButtonProps:o,children:a,radius:u,...l}=xe("Modal",wGe,e),c=!!n||s;return _.jsxs(WL,{ref:t,radius:u,...l,children:[r&&_.jsx(qL,{...i}),_.jsxs(VL,{radius:u,children:[c&&_.jsxs(HL,{children:[n&&_.jsx(GL,{children:n}),s&&_.jsx(zL,{...o})]}),_.jsx(UL,{children:a})]})]})});Yi.classes=Km;Yi.displayName="@mantine/core/Modal";Yi.Root=WL;Yi.Overlay=qL;Yi.Content=VL;Yi.Body=UL;Yi.Header=HL;Yi.Title=GL;Yi.CloseButton=zL;const[EGe,tY]=Gx(),[xGe,SGe]=Gx();var YL={root:"m_7cda1cd6","root--default":"m_44da308b","root--contrast":"m_e3a01f8",label:"m_1e0e6180",remove:"m_ae386778",group:"m_1dcfd90b"};const TGe={},CGe=(e,{gap:t},{size:n})=>({group:{"--pg-gap":t!==void 0?tn(t):tn(n,"pg-gap")}}),nY=Me((e,t)=>{const n=xe("PillGroup",TGe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,size:l,disabled:c,...f}=n,d=tY(),h=(d==null?void 0:d.size)||l||void 0,p=dt({name:"PillGroup",classes:YL,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:CGe,stylesCtx:{size:h},rootSelector:"group"});return _.jsx(xGe,{value:{size:h,disabled:c},children:_.jsx(pe,{ref:t,size:h,...p("group"),...f})})});nY.classes=YL;nY.displayName="@mantine/core/PillGroup";const AGe={variant:"default"},IGe=(e,{radius:t},{size:n})=>({root:{"--pill-fz":tn(n,"pill-fz"),"--pill-height":tn(n,"pill-height"),"--pill-radius":t===void 0?void 0:Ur(t)}}),IA=Me((e,t)=>{const n=xe("Pill",AGe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,variant:l,children:c,withRemoveButton:f,onRemove:d,removeButtonProps:h,radius:p,size:m,disabled:g,mod:y,...v}=n,b=SGe(),w=tY(),E=m||(b==null?void 0:b.size)||void 0,T=(w==null?void 0:w.variant)==="filled"?"contrast":l||"default",S=dt({name:"Pill",classes:YL,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:IGe,stylesCtx:{size:E}});return _.jsxs(pe,{component:"span",ref:t,variant:T,size:E,...S("root",{variant:T}),mod:[{"with-remove":f&&!g,disabled:g||(b==null?void 0:b.disabled)},y],...v,children:[_.jsx("span",{...S("label"),children:c}),f&&_.jsx(Wm,{variant:"transparent",radius:p,tabIndex:-1,"aria-hidden":!0,unstyled:a,...h,...S("remove",{className:h==null?void 0:h.className,style:h==null?void 0:h.style}),onMouseDown:C=>{var A;C.preventDefault(),C.stopPropagation(),(A=h==null?void 0:h.onMouseDown)==null||A.call(h,C)},onClick:C=>{var A;C.stopPropagation(),d==null||d(),(A=h==null?void 0:h.onClick)==null||A.call(h,C)}})]})});IA.classes=YL;IA.displayName="@mantine/core/Pill";IA.Group=nY;var N_e={field:"m_45c4369d"};const kGe={type:"visible"},rY=Me((e,t)=>{const n=xe("PillsInputField",kGe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,type:l,disabled:c,id:f,pointer:d,mod:h,...p}=n,m=tY(),g=Jx(),y=dt({name:"PillsInputField",classes:N_e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"field"}),v=c||(m==null?void 0:m.disabled);return _.jsx(pe,{component:"input",ref:hs(t,m==null?void 0:m.fieldRef),"data-type":l,disabled:v,mod:[{disabled:v,pointer:d},h],...y("field"),...p,id:(g==null?void 0:g.inputId)||f,"aria-invalid":m==null?void 0:m.hasError,"aria-describedby":g==null?void 0:g.describedBy,type:"text",onMouseDown:b=>!d&&b.stopPropagation()})});rY.classes=N_e;rY.displayName="@mantine/core/PillsInputField";const RGe={},YO=Me((e,t)=>{const n=xe("PillsInput",RGe,e),{children:r,onMouseDown:i,onClick:s,size:o,disabled:a,__staticSelector:u,error:l,variant:c,...f}=n,d=I.useRef();return _.jsx(EGe,{value:{fieldRef:d,size:o,disabled:a,hasError:!!l,variant:c},children:_.jsx(qc,{size:o,error:l,variant:c,component:"div",ref:t,onMouseDown:h=>{var p;h.preventDefault(),i==null||i(h),(p=d.current)==null||p.focus()},onClick:h=>{var p;h.preventDefault(),s==null||s(h),(p=d.current)==null||p.focus()},...f,multiline:!0,disabled:a,__staticSelector:u||"PillsInput",withAria:!1,children:r})})});YO.displayName="@mantine/core/PillsInput";YO.Field=rY;function NGe({data:e,value:t}){const n=t.map(i=>i.trim().toLowerCase());return e.reduce((i,s)=>(ME(s)?i.push({group:s.group,items:s.items.filter(o=>n.indexOf(o.value.toLowerCase().trim())===-1)}):n.indexOf(s.value.toLowerCase().trim())===-1&&i.push(s),i),[])}const DGe={maxValues:1/0,withCheckIcon:!0,checkIconPosition:"left",hiddenInputValuesDivider:","},iY=Me((e,t)=>{const n=xe("MultiSelect",DGe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,size:l,value:c,defaultValue:f,onChange:d,onKeyDown:h,variant:p,data:m,dropdownOpened:g,defaultDropdownOpened:y,onDropdownOpen:v,onDropdownClose:b,selectFirstOptionOnChange:w,onOptionSubmit:E,comboboxProps:T,filter:S,limit:C,withScrollArea:A,maxDropdownHeight:k,searchValue:N,defaultSearchValue:O,onSearchChange:P,readOnly:$,disabled:F,onFocus:M,onBlur:B,onPaste:U,radius:H,rightSection:D,rightSectionWidth:z,rightSectionPointerEvents:W,rightSectionProps:j,leftSection:q,leftSectionWidth:G,leftSectionPointerEvents:ne,leftSectionProps:ce,inputContainer:de,inputWrapperOrder:he,withAsterisk:ve,labelProps:Ie,descriptionProps:be,errorProps:Ke,wrapperProps:Ue,description:yt,label:it,error:_e,maxValues:ke,searchable:ze,nothingFoundMessage:ct,withCheckIcon:Ot,checkIconPosition:We,hidePickedOptions:ge,withErrorStyles:ht,name:vt,form:me,id:Ae,clearable:He,clearButtonProps:ut,hiddenInputProps:_t,placeholder:Ln,hiddenInputValuesDivider:Cr,required:Fn,mod:cr,renderOption:gn,onRemove:An,onClear:nr,scrollAreaProps:rr,...zo}=n,$i=Ta(Ae),In=t_e(m),Mi=CG(In),Ar=LG({opened:g,defaultOpened:y,onDropdownOpen:v,onDropdownClose:()=>{b==null||b(),Ar.resetSelectedOption()}}),{styleProps:gs,rest:{type:hp,autoComplete:cl,...bd}}=Db(zo),[xr,Ii]=Ss({value:c,defaultValue:f,finalValue:[],onChange:d}),[Qr,cu]=Ss({value:N,defaultValue:O,finalValue:"",onChange:P}),Ia=dt({name:"MultiSelect",classes:{},props:n,classNames:r,styles:o,unstyled:a}),{resolvedClassNames:ka,resolvedStyles:oe}=Vm({props:n,styles:o,classNames:r}),ee=ot=>{h==null||h(ot),ot.key===" "&&!ze&&(ot.preventDefault(),Ar.toggleDropdown()),ot.key==="Backspace"&&Qr.length===0&&xr.length>0&&(An==null||An(xr[xr.length-1]),Ii(xr.slice(0,xr.length-1)))},ae=xr.map((ot,St)=>{var Ht,On;return _.jsx(IA,{withRemoveButton:!$&&!((Ht=Mi[ot])!=null&&Ht.disabled),onRemove:()=>{Ii(xr.filter(jn=>ot!==jn)),An==null||An(ot)},unstyled:a,disabled:F,...Ia("pill"),children:((On=Mi[ot])==null?void 0:On.label)||ot},`${ot}-${St}`)});I.useEffect(()=>{w&&Ar.selectFirstOption()},[w,xr]);const Ce=He&&xr.length>0&&!F&&!$&&_.jsx(Kn.ClearButton,{size:l,...ut,onClear:()=>{nr==null||nr(),Ii([]),cu("")}}),Se=NGe({data:In,value:xr});return _.jsxs(_.Fragment,{children:[_.jsxs(Kn,{store:Ar,classNames:ka,styles:oe,unstyled:a,size:l,readOnly:$,__staticSelector:"MultiSelect",onOptionSubmit:ot=>{E==null||E(ot),cu(""),Ar.updateSelectedOptionIndex("selected"),xr.includes(Mi[ot].value)?(Ii(xr.filter(St=>St!==Mi[ot].value)),An==null||An(Mi[ot].value)):xr.length<ke&&Ii([...xr,Mi[ot].value])},...T,children:[_.jsx(Kn.DropdownTarget,{children:_.jsx(YO,{...gs,__staticSelector:"MultiSelect",classNames:ka,styles:oe,unstyled:a,size:l,className:i,style:s,variant:p,disabled:F,radius:H,rightSection:D||Ce||_.jsx(Kn.Chevron,{size:l,error:_e,unstyled:a}),rightSectionPointerEvents:W||(Ce?"all":"none"),rightSectionWidth:z,rightSectionProps:j,leftSection:q,leftSectionWidth:G,leftSectionPointerEvents:ne,leftSectionProps:ce,inputContainer:de,inputWrapperOrder:he,withAsterisk:ve,labelProps:Ie,descriptionProps:be,errorProps:Ke,wrapperProps:Ue,description:yt,label:it,error:_e,multiline:!0,withErrorStyles:ht,__stylesApiProps:{...n,rightSectionPointerEvents:W||(Ce?"all":"none"),multiline:!0},pointer:!ze,onClick:()=>ze?Ar.openDropdown():Ar.toggleDropdown(),"data-expanded":Ar.dropdownOpened||void 0,id:$i,required:Fn,mod:cr,children:_.jsxs(IA.Group,{disabled:F,unstyled:a,...Ia("pillsList"),children:[ae,_.jsx(Kn.EventsTarget,{autoComplete:cl,children:_.jsx(YO.Field,{...bd,ref:t,id:$i,placeholder:Ln,type:!ze&&!Ln?"hidden":"visible",...Ia("inputField"),unstyled:a,onFocus:ot=>{M==null||M(ot),ze&&Ar.openDropdown()},onBlur:ot=>{B==null||B(ot),Ar.closeDropdown(),cu("")},onKeyDown:ee,value:Qr,onChange:ot=>{cu(ot.currentTarget.value),ze&&Ar.openDropdown(),w&&Ar.selectFirstOption()},disabled:F,readOnly:$||!ze,pointer:!ze})})]})})}),_.jsx(b_e,{data:ge?Se:In,hidden:$||F,filter:S,search:Qr,limit:C,hiddenWhenEmpty:!ze||!ct||ge&&Se.length===0&&Qr.trim().length===0,withScrollArea:A,maxDropdownHeight:k,filterOptions:ze,value:xr,checkIconPosition:We,withCheckIcon:Ot,nothingFoundMessage:ct,unstyled:a,labelId:it?`${$i}-label`:void 0,"aria-label":it?void 0:zo["aria-label"],renderOption:gn,scrollAreaProps:rr})]}),_.jsx(Kn.HiddenInput,{name:vt,valuesDivider:Cr,value:xr,form:me,disabled:F,..._t})]})});iY.classes={...qc.classes,...Kn.classes};iY.displayName="@mantine/core/MultiSelect";var D_e={root:"m_f0824112",description:"m_57492dcc",section:"m_690090b5",label:"m_1f6ac4c4",body:"m_f07af9d2",children:"m_e17b862f",chevron:"m_1fd8a00b"};const PGe={},OGe=(e,{variant:t,color:n,childrenOffset:r,autoContrast:i})=>{const s=e.variantColorResolver({color:n||e.primaryColor,theme:e,variant:t||"light",autoContrast:i});return{root:{"--nl-bg":n||t?s.background:void 0,"--nl-hover":n||t?s.hover:void 0,"--nl-color":n||t?s.color:void 0},children:{"--nl-offset":as(r)}}},KL=Us((e,t)=>{const n=xe("NavLink",PGe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,opened:l,defaultOpened:c,onChange:f,children:d,onClick:h,active:p,disabled:m,leftSection:g,rightSection:y,label:v,description:b,disableRightSectionRotation:w,noWrap:E,childrenOffset:T,onKeyDown:S,autoContrast:C,mod:A,...k}=n,N=dt({name:"NavLink",props:n,classes:D_e,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:OGe}),[O,P]=Ss({value:l,defaultValue:c,finalValue:!1,onChange:f}),$=!!d,F=M=>{h==null||h(M),$&&(M.preventDefault(),P(!O))};return _.jsxs(_.Fragment,{children:[_.jsxs(xs,{...N("root"),component:"a",ref:t,onClick:F,onKeyDown:M=>{S==null||S(M),M.nativeEvent.code==="Space"&&$&&(M.preventDefault(),P(!O))},unstyled:a,mod:[{disabled:m,active:p,expanded:O},A],...k,children:[g&&_.jsx(pe,{component:"span",...N("section"),mod:{position:"left"},children:g}),_.jsxs(pe,{...N("body"),mod:{"no-wrap":E},children:[_.jsx(pe,{component:"span",...N("label"),children:v}),_.jsx(pe,{component:"span",mod:{active:p},...N("description"),children:b})]}),($||y)&&_.jsx(pe,{...N("section"),component:"span",mod:{rotate:O&&!w,position:"right"},children:$?y||_.jsx($E,{...N("chevron")}):y})]}),_.jsx(xL,{in:O,...N("collapse"),children:_.jsx("div",{...N("children"),children:d})})]})});KL.classes=D_e;KL.displayName="@mantine/core/NavLink";var P_e={root:"m_a513464",icon:"m_a4ceffb",loader:"m_b0920b15",body:"m_a49ed24",title:"m_3feedf16",description:"m_3d733a3a",closeButton:"m_919a4d88"};const $Ge={withCloseButton:!0},MGe=(e,{radius:t,color:n})=>({root:{"--notification-radius":t===void 0?void 0:Ur(t),"--notification-color":n?$r(n,e):void 0}}),sY=Me((e,t)=>{const n=xe("Notification",$Ge,e),{className:r,color:i,radius:s,loading:o,withCloseButton:a,withBorder:u,title:l,icon:c,children:f,onClose:d,closeButtonProps:h,classNames:p,style:m,styles:g,unstyled:y,variant:v,vars:b,mod:w,...E}=n,T=dt({name:"Notification",classes:P_e,props:n,className:r,style:m,classNames:p,styles:g,unstyled:y,vars:b,varsResolver:MGe});return _.jsxs(pe,{...T("root"),mod:[{"data-with-icon":!!c||o,"data-with-border":u},w],ref:t,variant:v,...E,role:"alert",children:[c&&!o&&_.jsx("div",{...T("icon"),children:c}),o&&_.jsx(sd,{size:28,color:i,...T("loader")}),_.jsxs("div",{...T("body"),children:[l&&_.jsx("div",{...T("title"),children:l}),_.jsx(pe,{...T("description"),mod:{"data-with-title":!!l},children:f})]}),a&&_.jsx(Wm,{iconSize:16,color:"gray",...h,unstyled:y,onClick:d,...T("closeButton")})]})});sY.classes=P_e;sY.displayName="@mantine/core/Notification";function O_e(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}var kA;(function(e){e.event="event",e.props="prop"})(kA||(kA={}));function zg(){}function LGe(e){var t,n=void 0;return function(){for(var r=[],i=arguments.length;i--;)r[i]=arguments[i];return t&&r.length===t.length&&r.every(function(s,o){return s===t[o]})||(t=r,n=e.apply(void 0,r)),n}}function RA(e){return!!(e||"").match(/\d/)}function Yw(e){return e==null}function FGe(e){return typeof e=="number"&&isNaN(e)}function $_e(e){return Yw(e)||FGe(e)||typeof e=="number"&&!isFinite(e)}function M_e(e){return e.replace(/[-[\]/{}()*+?.\\^$|]/g,"\\$&")}function jGe(e){switch(e){case"lakh":return/(\d+?)(?=(\d\d)+(\d)(?!\d))(\.\d+)?/g;case"wan":return/(\d)(?=(\d{4})+(?!\d))/g;case"thousand":default:return/(\d)(?=(\d{3})+(?!\d))/g}}function BGe(e,t,n){var r=jGe(n),i=e.search(/[1-9]/);return i=i===-1?e.length:i,e.substring(0,i)+e.substring(i,e.length).replace(r,"$1"+t)}function UGe(e){var t=I.useRef(e);t.current=e;var n=I.useRef(function(){for(var r=[],i=arguments.length;i--;)r[i]=arguments[i];return t.current.apply(t,r)});return n.current}function oY(e,t){t===void 0&&(t=!0);var n=e[0]==="-",r=n&&t;e=e.replace("-","");var i=e.split("."),s=i[0],o=i[1]||"";return{beforeDecimal:s,afterDecimal:o,hasNegation:n,addNegation:r}}function zGe(e){if(!e)return e;var t=e[0]==="-";t&&(e=e.substring(1,e.length));var n=e.split("."),r=n[0].replace(/^0+/,"")||"0",i=n[1]||"";return(t?"-":"")+r+(i?"."+i:"")}function L_e(e,t,n){for(var r="",i=n?"0":"",s=0;s<=t-1;s++)r+=e[s]||i;return r}function Koe(e,t){return Array(t+1).join(e)}function F_e(e){var t=e+"",n=t[0]==="-"?"-":"";n&&(t=t.substring(1));var r=t.split(/[eE]/g),i=r[0],s=r[1];if(s=Number(s),!s)return n+i;i=i.replace(".","");var o=1+s,a=i.length;return o<0?i="0."+Koe("0",Math.abs(o))+i:o>=a?i=i+Koe("0",o-a):i=(i.substring(0,o)||"0")+"."+i.substring(o),n+i}function Xoe(e,t,n){if(["","-"].indexOf(e)!==-1)return e;var r=(e.indexOf(".")!==-1||n)&&t,i=oY(e),s=i.beforeDecimal,o=i.afterDecimal,a=i.hasNegation,u=parseFloat("0."+(o||"0")),l=o.length<=t?"0."+o:u.toFixed(t),c=l.split("."),f=s;s&&Number(c[0])&&(f=s.split("").reverse().reduce(function(m,g,y){return m.length>y?(Number(m[0])+Number(g)).toString()+m.substring(1,m.length):g+m},c[0]));var d=L_e(c[1]||"",t,n),h=a?"-":"",p=r?".":"";return""+h+f+p+d}function Bv(e,t){if(e.value=e.value,e!==null){if(e.createTextRange){var n=e.createTextRange();return n.move("character",t),n.select(),!0}return e.selectionStart||e.selectionStart===0?(e.focus(),e.setSelectionRange(t,t),!0):(e.focus(),!1)}}var j_e=LGe(function(e,t){for(var n=0,r=0,i=e.length,s=t.length;e[n]===t[n]&&n<i;)n++;for(;e[i-1-r]===t[s-1-r]&&s-r>n&&i-r>n;)r++;return{from:{start:n,end:i-r},to:{start:n,end:s-r}}}),VGe=function(e,t){var n=Math.min(e.selectionStart,t);return{from:{start:n,end:e.selectionEnd},to:{start:n,end:t}}};function HGe(e,t,n){return Math.min(Math.max(e,t),n)}function zj(e){return Math.max(e.selectionStart,e.selectionEnd)}function qGe(){return typeof navigator<"u"&&!(navigator.platform&&/iPhone|iPod/.test(navigator.platform))}function WGe(e){return{from:{start:0,end:0},to:{start:0,end:e.length},lastValue:""}}function GGe(e){var t=e.currentValue,n=e.formattedValue,r=e.currentValueIndex,i=e.formattedValueIndex;return t[r]===n[i]}function YGe(e,t,n,r,i,s,o){o===void 0&&(o=GGe);var a=i.findIndex(function(w){return w}),u=e.slice(0,a);!t&&!n.startsWith(u)&&(t=u,n=u+n,r=r+u.length);for(var l=n.length,c=e.length,f={},d=new Array(l),h=0;h<l;h++){d[h]=-1;for(var p=0,m=c;p<m;p++){var g=o({currentValue:n,lastValue:t,formattedValue:e,currentValueIndex:h,formattedValueIndex:p});if(g&&f[p]!==!0){d[h]=p,f[p]=!0;break}}}for(var y=r;y<l&&(d[y]===-1||!s(n[y]));)y++;var v=y===l||d[y]===-1?c:d[y];for(y=r-1;y>0&&d[y]===-1;)y--;var b=y===-1||d[y]===-1?0:d[y]+1;return b>v?v:r-b<v-r?b:v}function Qoe(e,t,n,r){var i=e.length;if(t=HGe(t,0,i),r==="left"){for(;t>=0&&!n[t];)t--;t===-1&&(t=n.indexOf(!0))}else{for(;t<=i&&!n[t];)t++;t>i&&(t=n.lastIndexOf(!0))}return t===-1&&(t=i),t}function KGe(e){for(var t=Array.from({length:e.length+1}).map(function(){return!0}),n=0,r=t.length;n<r;n++)t[n]=!!(RA(e[n])||RA(e[n-1]));return t}function B_e(e,t,n,r,i,s){s===void 0&&(s=zg);var o=UGe(function(p,m){var g,y;return $_e(p)?(y="",g=""):typeof p=="number"||m?(y=typeof p=="number"?F_e(p):p,g=r(y)):(y=i(p,void 0),g=r(y)),{formattedValue:g,numAsString:y}}),a=I.useState(function(){return o(Yw(e)?t:e,n)}),u=a[0],l=a[1],c=function(p,m){p.formattedValue!==u.formattedValue&&l({formattedValue:p.formattedValue,numAsString:p.value}),s(p,m)},f=e,d=n;Yw(e)&&(f=u.numAsString,d=!0);var h=o(f,d);return I.useMemo(function(){l(h)},[h.formattedValue]),[u,c]}function XGe(e){return e.replace(/[^0-9]/g,"")}function QGe(e){return e}function JGe(e){var t=e.type;t===void 0&&(t="text");var n=e.displayType;n===void 0&&(n="input");var r=e.customInput,i=e.renderText,s=e.getInputRef,o=e.format;o===void 0&&(o=QGe);var a=e.removeFormatting;a===void 0&&(a=XGe);var u=e.defaultValue,l=e.valueIsNumericString,c=e.onValueChange,f=e.isAllowed,d=e.onChange;d===void 0&&(d=zg);var h=e.onKeyDown;h===void 0&&(h=zg);var p=e.onMouseUp;p===void 0&&(p=zg);var m=e.onFocus;m===void 0&&(m=zg);var g=e.onBlur;g===void 0&&(g=zg);var y=e.value,v=e.getCaretBoundary;v===void 0&&(v=KGe);var b=e.isValidInputCharacter;b===void 0&&(b=RA);var w=e.isCharacterSame,E=O_e(e,["type","displayType","customInput","renderText","getInputRef","format","removeFormatting","defaultValue","valueIsNumericString","onValueChange","isAllowed","onChange","onKeyDown","onMouseUp","onFocus","onBlur","value","getCaretBoundary","isValidInputCharacter","isCharacterSame"]),T=B_e(y,u,!!l,o,a,c),S=T[0],C=S.formattedValue,A=S.numAsString,k=T[1],N=I.useRef(),O=I.useRef({formattedValue:C,numAsString:A}),P=function(_e,ke){O.current={formattedValue:_e.formattedValue,numAsString:_e.value},k(_e,ke)},$=I.useState(!1),F=$[0],M=$[1],B=I.useRef(null),U=I.useRef({setCaretTimeout:null,focusTimeout:null});I.useEffect(function(){return M(!0),function(){clearTimeout(U.current.setCaretTimeout),clearTimeout(U.current.focusTimeout)}},[]);var H=o,D=function(_e,ke){var ze=parseFloat(ke);return{formattedValue:_e,value:ke,floatValue:isNaN(ze)?void 0:ze}},z=function(_e,ke,ze){_e.selectionStart===0&&_e.selectionEnd===_e.value.length||(Bv(_e,ke),U.current.setCaretTimeout=setTimeout(function(){_e.value===ze&&_e.selectionStart!==ke&&Bv(_e,ke)},0))},W=function(_e,ke,ze){return Qoe(_e,ke,v(_e),ze)},j=function(_e,ke,ze){var ct=v(ke),Ot=YGe(ke,C,_e,ze,ct,b,w);return Ot=Qoe(ke,Ot,ct),Ot},q=function(_e){var ke=_e.formattedValue;ke===void 0&&(ke="");var ze=_e.input,ct=_e.source,Ot=_e.event,We=_e.numAsString,ge;if(ze){var ht=_e.inputValue||ze.value,vt=zj(ze);ze.value=ke,ge=j(ht,ke,vt),ge!==void 0&&z(ze,ge,ke)}ke!==C&&P(D(ke,We),{event:Ot,source:ct})};I.useEffect(function(){var _e=O.current,ke=_e.formattedValue,ze=_e.numAsString;(C!==ke||A!==ze)&&P(D(C,A),{event:void 0,source:kA.props})},[C,A]);var G=B.current?zj(B.current):void 0,ne=typeof window<"u"?I.useLayoutEffect:I.useEffect;ne(function(){var _e=B.current;if(C!==O.current.formattedValue&&_e){var ke=j(O.current.formattedValue,C,G);_e.value=C,z(_e,ke,C)}},[C]);var ce=function(_e,ke,ze){var ct=ke.target,Ot=N.current?VGe(N.current,ct.selectionEnd):j_e(C,_e),We=Object.assign(Object.assign({},Ot),{lastValue:C}),ge=a(_e,We),ht=H(ge);if(ge=a(ht,void 0),f&&!f(D(ht,ge))){var vt=ke.target,me=zj(vt),Ae=j(_e,C,me);return vt.value=C,z(vt,Ae,C),!1}return q({formattedValue:ht,numAsString:ge,inputValue:_e,event:ke,source:ze,input:ke.target}),!0},de=function(_e,ke){ke===void 0&&(ke=0);var ze=_e.selectionStart,ct=_e.selectionEnd;N.current={selectionStart:ze,selectionEnd:ct+ke}},he=function(_e){var ke=_e.target,ze=ke.value,ct=ce(ze,_e,kA.event);ct&&d(_e),N.current=void 0},ve=function(_e){var ke=_e.target,ze=_e.key,ct=ke.selectionStart,Ot=ke.selectionEnd,We=ke.value;We===void 0&&(We="");var ge;ze==="ArrowLeft"||ze==="Backspace"?ge=Math.max(ct-1,0):ze==="ArrowRight"?ge=Math.min(ct+1,We.length):ze==="Delete"&&(ge=ct);var ht=0;ze==="Delete"&&ct===Ot&&(ht=1);var vt=ze==="ArrowLeft"||ze==="ArrowRight";if(ge===void 0||ct!==Ot&&!vt){h(_e),de(ke,ht);return}var me=ge;if(vt){var Ae=ze==="ArrowLeft"?"left":"right";me=W(We,ge,Ae),me!==ge&&_e.preventDefault()}else ze==="Delete"&&!b(We[ge])?me=W(We,ge,"right"):ze==="Backspace"&&!b(We[ge])&&(me=W(We,ge,"left"));me!==ge&&z(ke,me,We),h(_e),de(ke,ht)},Ie=function(_e){var ke=_e.target,ze=function(){var ct=ke.selectionStart,Ot=ke.selectionEnd,We=ke.value;if(We===void 0&&(We=""),ct===Ot){var ge=W(We,ct);ge!==ct&&z(ke,ge,We)}};ze(),requestAnimationFrame(function(){ze()}),p(_e),de(ke)},be=function(_e){_e.persist&&_e.persist();var ke=_e.target,ze=_e.currentTarget;B.current=ke,U.current.focusTimeout=setTimeout(function(){var ct=ke.selectionStart,Ot=ke.selectionEnd,We=ke.value;We===void 0&&(We="");var ge=W(We,ct);ge!==ct&&!(ct===0&&Ot===We.length)&&z(ke,ge,We),m(Object.assign(Object.assign({},_e),{currentTarget:ze}))},0)},Ke=function(_e){B.current=null,clearTimeout(U.current.focusTimeout),clearTimeout(U.current.setCaretTimeout),g(_e)},Ue=F&&qGe()?"numeric":void 0,yt=Object.assign({inputMode:Ue},E,{type:t,value:C,onChange:he,onKeyDown:ve,onMouseUp:Ie,onFocus:be,onBlur:Ke});if(n==="text")return i?_r.createElement(_r.Fragment,null,i(C,E)||null):_r.createElement("span",Object.assign({},E,{ref:s}),C);if(r){var it=r;return _r.createElement(it,Object.assign({},yt,{ref:s}))}return _r.createElement("input",Object.assign({},yt,{ref:s}))}function Joe(e,t){var n=t.decimalScale,r=t.fixedDecimalScale,i=t.prefix;i===void 0&&(i="");var s=t.suffix;s===void 0&&(s="");var o=t.allowNegative,a=t.thousandsGroupStyle;if(a===void 0&&(a="thousand"),e===""||e==="-")return e;var u=XL(t),l=u.thousandSeparator,c=u.decimalSeparator,f=n!==0&&e.indexOf(".")!==-1||n&&r,d=oY(e,o),h=d.beforeDecimal,p=d.afterDecimal,m=d.addNegation;return n!==void 0&&(p=L_e(p,n,!!r)),l&&(h=BGe(h,l,a)),i&&(h=i+h),s&&(p=p+s),m&&(h="-"+h),e=h+(f&&c||"")+p,e}function XL(e){var t=e.decimalSeparator;t===void 0&&(t=".");var n=e.thousandSeparator,r=e.allowedDecimalSeparators;return n===!0&&(n=","),r||(r=[t,"."]),{decimalSeparator:t,thousandSeparator:n,allowedDecimalSeparators:r}}function ZGe(e,t){e===void 0&&(e="");var n=new RegExp("(-)"),r=new RegExp("(-)(.)*(-)"),i=n.test(e),s=r.test(e);return e=e.replace(/-/g,""),i&&!s&&t&&(e="-"+e),e}function eYe(e,t){return new RegExp("(^-)|[0-9]|"+M_e(e),"g")}function tYe(e,t,n){return e===""?!0:!(t!=null&&t.match(/\d/))&&!(n!=null&&n.match(/\d/))&&typeof e=="string"&&!isNaN(Number(e))}function nYe(e,t,n){var r;t===void 0&&(t=WGe(e));var i=n.allowNegative,s=n.prefix;s===void 0&&(s="");var o=n.suffix;o===void 0&&(o="");var a=n.decimalScale,u=t.from,l=t.to,c=l.start,f=l.end,d=XL(n),h=d.allowedDecimalSeparators,p=d.decimalSeparator,m=e[f]===p;if(RA(e)&&(e===s||e===o)&&t.lastValue==="")return e;if(f-c===1&&h.indexOf(e[c])!==-1){var g=a===0?"":p;e=e.substring(0,c)+g+e.substring(c+1,e.length)}var y=function(B,U,H){var D=!1,z=!1;s.startsWith("-")?D=!1:B.startsWith("--")?(D=!1,z=!0):o.startsWith("-")&&B.length===o.length?D=!1:B[0]==="-"&&(D=!0);var W=D?1:0;return z&&(W=2),W&&(B=B.substring(W),U-=W,H-=W),{value:B,start:U,end:H,hasNegation:D}},v=y(e,c,f),b=v.hasNegation;r=v,e=r.value,c=r.start,f=r.end;var w=y(t.lastValue,u.start,u.end),E=w.start,T=w.end,S=w.value,C=e.substring(c,f);e.length&&S.length&&(E>S.length-o.length||T<s.length)&&!(C&&o.startsWith(C))&&(e=S);var A=0;e.startsWith(s)?A+=s.length:c<s.length&&(A=c),e=e.substring(A),f-=A;var k=e.length,N=e.length-o.length;e.endsWith(o)?k=N:(f>N||f>e.length-o.length)&&(k=f),e=e.substring(0,k),e=ZGe(b?"-"+e:e,i),e=(e.match(eYe(p))||[]).join("");var O=e.indexOf(p);e=e.replace(new RegExp(M_e(p),"g"),function(B,U){return U===O?".":""});var P=oY(e,i),$=P.beforeDecimal,F=P.afterDecimal,M=P.addNegation;return l.end-l.start<u.end-u.start&&$===""&&m&&!parseFloat(F)&&(e=M?"-":""),e}function rYe(e,t){var n=t.prefix;n===void 0&&(n="");var r=t.suffix;r===void 0&&(r="");var i=Array.from({length:e.length+1}).map(function(){return!0}),s=e[0]==="-";i.fill(!1,0,n.length+(s?1:0));var o=e.length;return i.fill(!1,o-r.length+1,o+1),i}function iYe(e){var t=XL(e),n=t.thousandSeparator,r=t.decimalSeparator,i=e.prefix;i===void 0&&(i="");var s=e.allowNegative;if(s===void 0&&(s=!0),n===r)throw new Error(`
        Decimal separator can't be same as thousand separator.
        thousandSeparator: `+n+` (thousandSeparator = {true} is same as thousandSeparator = ",")
        decimalSeparator: `+r+` (default value for decimalSeparator is .)
     `);return i.startsWith("-")&&s&&(console.error(`
      Prefix can't start with '-' when allowNegative is true.
      prefix: `+i+`
      allowNegative: `+s+`
    `),s=!1),Object.assign(Object.assign({},e),{allowNegative:s})}function sYe(e){e=iYe(e),e.decimalSeparator,e.allowedDecimalSeparators,e.thousandsGroupStyle;var t=e.suffix,n=e.allowNegative,r=e.allowLeadingZeros,i=e.onKeyDown;i===void 0&&(i=zg);var s=e.onBlur;s===void 0&&(s=zg);var o=e.thousandSeparator,a=e.decimalScale,u=e.fixedDecimalScale,l=e.prefix;l===void 0&&(l="");var c=e.defaultValue,f=e.value,d=e.valueIsNumericString,h=e.onValueChange,p=O_e(e,["decimalSeparator","allowedDecimalSeparators","thousandsGroupStyle","suffix","allowNegative","allowLeadingZeros","onKeyDown","onBlur","thousandSeparator","decimalScale","fixedDecimalScale","prefix","defaultValue","value","valueIsNumericString","onValueChange"]),m=XL(e),g=m.decimalSeparator,y=m.allowedDecimalSeparators,v=function(M){return Joe(M,e)},b=function(M,B){return nYe(M,B,e)},w=Yw(f)?c:f,E=d??tYe(w,l,t);Yw(f)?Yw(c)||(E=E||typeof c=="number"):E=E||typeof f=="number";var T=function(M){return $_e(M)?M:(typeof M=="number"&&(M=F_e(M)),E&&typeof a=="number"?Xoe(M,a,!!u):M)},S=B_e(T(f),T(c),!!E,v,b,h),C=S[0],A=C.numAsString,k=C.formattedValue,N=S[1],O=function(M){var B=M.target,U=M.key,H=B.selectionStart,D=B.selectionEnd,z=B.value;if(z===void 0&&(z=""),(U==="Backspace"||U==="Delete")&&D<l.length){M.preventDefault();return}if(H!==D){i(M);return}U==="Backspace"&&z[0]==="-"&&H===l.length+1&&n&&Bv(B,1),a&&u&&(U==="Backspace"&&z[H-1]===g?(Bv(B,H-1),M.preventDefault()):U==="Delete"&&z[H]===g&&M.preventDefault()),y!=null&&y.includes(U)&&z[H]===g&&Bv(B,H+1);var W=o===!0?",":o;U==="Backspace"&&z[H-1]===W&&Bv(B,H-1),U==="Delete"&&z[H]===W&&Bv(B,H+1),i(M)},P=function(M){var B=A;if(B.match(/\d/g)||(B=""),r||(B=zGe(B)),u&&a&&(B=Xoe(B,a,u)),B!==A){var U=Joe(B,e);N({formattedValue:U,value:B,floatValue:parseFloat(B)},{event:M,source:kA.event})}s(M)},$=function(M){return M===g?!0:RA(M)},F=function(M){var B=M.currentValue,U=M.lastValue,H=M.formattedValue,D=M.currentValueIndex,z=M.formattedValueIndex,W=B[D],j=H[z],q=j_e(U,B),G=q.to;return D>=G.start&&D<G.end&&y&&y.includes(W)&&j===g?!0:W===j};return Object.assign(Object.assign({},p),{value:k,valueIsNumericString:!1,isValidInputCharacter:$,isCharacterSame:F,onValueChange:N,format:v,removeFormatting:b,getCaretBoundary:function(M){return rYe(M,e)},onKeyDown:O,onBlur:P})}function oYe(e){var t=sYe(e);return _r.createElement(JGe,Object.assign({},t))}function Zoe({direction:e,style:t,...n}){return _.jsx("svg",{style:{width:"var(--ni-chevron-size)",height:"var(--ni-chevron-size)",transform:e==="up"?"rotate(180deg)":void 0,...t},viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...n,children:_.jsx("path",{d:"M3.13523 6.15803C3.3241 5.95657 3.64052 5.94637 3.84197 6.13523L7.5 9.56464L11.158 6.13523C11.3595 5.94637 11.6759 5.95657 11.8648 6.15803C12.0536 6.35949 12.0434 6.67591 11.842 6.86477L7.84197 10.6148C7.64964 10.7951 7.35036 10.7951 7.15803 10.6148L3.15803 6.86477C2.95657 6.67591 2.94637 6.35949 3.13523 6.15803Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}var e7={root:"m_e2f5cd4e",controls:"m_95e17d22",control:"m_80b4b171"};const aYe=/^(0\.0*|-0(\.0*)?)$/,uYe=/^-?0\d+(\.\d+)?\.?$/;function lYe(e){return(typeof e=="number"?e<Number.MAX_SAFE_INTEGER:!Number.isNaN(Number(e)))&&!Number.isNaN(e)}function eae(e,t,n){if(e===void 0)return!0;const r=t===void 0||e>=t,i=n===void 0||e<=n;return r&&i}const cYe={step:1,clampBehavior:"blur",allowDecimal:!0,allowNegative:!0,withKeyboardEvents:!0,allowLeadingZeros:!0,trimLeadingZeroesOnBlur:!0,startValue:0},fYe=(e,{size:t})=>({controls:{"--ni-chevron-size":tn(t,"ni-chevron-size")}}),aY=Me((e,t)=>{const n=xe("NumberInput",cYe,e),{className:r,classNames:i,styles:s,unstyled:o,vars:a,onChange:u,onValueChange:l,value:c,defaultValue:f,max:d,min:h,step:p,hideControls:m,rightSection:g,isAllowed:y,clampBehavior:v,onBlur:b,allowDecimal:w,decimalScale:E,onKeyDown:T,onKeyDownCapture:S,handlersRef:C,startValue:A,disabled:k,rightSectionPointerEvents:N,allowNegative:O,readOnly:P,size:$,rightSectionWidth:F,stepHoldInterval:M,stepHoldDelay:B,allowLeadingZeros:U,withKeyboardEvents:H,trimLeadingZeroesOnBlur:D,...z}=n,W=dt({name:"NumberInput",classes:e7,props:n,classNames:i,styles:s,unstyled:o,vars:a,varsResolver:fYe}),{resolvedClassNames:j,resolvedStyles:q}=Vm({classNames:i,styles:s,props:n}),[G,ne]=Ss({value:c,defaultValue:f,onChange:u}),ce=B!==void 0&&M!==void 0,de=I.useRef(null),he=I.useRef(null),ve=I.useRef(0),Ie=(ge,ht)=>{ht.source==="event"&&ne(lYe(ge.floatValue)&&!aYe.test(ge.value)&&!(U&&uYe.test(ge.value))?ge.floatValue:ge.value),l==null||l(ge,ht)},be=ge=>{const ht=String(ge).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return ht?Math.max(0,(ht[1]?ht[1].length:0)-(ht[2]?+ht[2]:0)):0},Ke=ge=>{de.current&&typeof ge<"u"&&de.current.setSelectionRange(ge,ge)},Ue=I.useRef();Ue.current=()=>{let ge;const ht=be(G),vt=be(p),me=Math.max(ht,vt),Ae=10**me;if(typeof G!="number"||Number.isNaN(G))ge=Zd(A,h,d);else if(d!==void 0){const ut=(Math.round(G*Ae)+Math.round(p*Ae))/Ae;ge=ut<=d?ut:d}else ge=(Math.round(G*Ae)+Math.round(p*Ae))/Ae;const He=ge.toFixed(me);ne(parseFloat(He)),l==null||l({floatValue:parseFloat(He),formattedValue:He,value:He},{source:"increment"}),setTimeout(()=>{var ut;return Ke((ut=de.current)==null?void 0:ut.value.length)},0)};const yt=I.useRef();yt.current=()=>{let ge;const ht=h!==void 0?h:O?Number.MIN_SAFE_INTEGER:0,vt=be(G),me=be(p),Ae=Math.max(vt,me),He=10**Ae;if(typeof G!="number"||Number.isNaN(G))ge=Zd(A,ht,d);else{const _t=(Math.round(G*He)-Math.round(p*He))/He;ge=ht!==void 0&&_t<ht?ht:_t}const ut=ge.toFixed(Ae);ne(parseFloat(ut)),l==null||l({floatValue:parseFloat(ut),formattedValue:ut,value:ut},{source:"decrement"}),setTimeout(()=>{var _t;return Ke((_t=de.current)==null?void 0:_t.value.length)},0)};const it=ge=>{T==null||T(ge),!(P||!H)&&(ge.key==="ArrowUp"&&(ge.preventDefault(),Ue.current()),ge.key==="ArrowDown"&&(ge.preventDefault(),yt.current()))},_e=ge=>{if(S==null||S(ge),ge.key==="Backspace"){const ht=de.current;ht.selectionStart===0&&ht.selectionStart===ht.selectionEnd&&(ge.preventDefault(),window.setTimeout(()=>Ke(0),0))}};OW(C,{increment:Ue.current,decrement:yt.current});const ke=ge=>{ge?Ue.current():yt.current(),ve.current+=1},ze=ge=>{if(ke(ge),ce){const ht=typeof M=="number"?M:M(ve.current);he.current=window.setTimeout(()=>ze(ge),ht)}},ct=(ge,ht)=>{var vt;ge.preventDefault(),(vt=de.current)==null||vt.focus(),ke(ht),ce&&(he.current=window.setTimeout(()=>ze(ht),B))},Ot=()=>{he.current&&window.clearTimeout(he.current),he.current=null,ve.current=0},We=_.jsxs("div",{...W("controls"),children:[_.jsx(xs,{...W("control"),tabIndex:-1,"aria-hidden":!0,disabled:k||typeof G=="number"&&d!==void 0&&G>=d,mod:{direction:"up"},onMouseDown:ge=>ge.preventDefault(),onPointerDown:ge=>{ct(ge,!0)},onPointerUp:Ot,onPointerLeave:Ot,children:_.jsx(Zoe,{direction:"up"})}),_.jsx(xs,{...W("control"),tabIndex:-1,"aria-hidden":!0,disabled:k||typeof G=="number"&&h!==void 0&&G<=h,mod:{direction:"down"},onMouseDown:ge=>ge.preventDefault(),onPointerDown:ge=>{ct(ge,!1)},onPointerUp:Ot,onPointerLeave:Ot,children:_.jsx(Zoe,{direction:"down"})})]});return _.jsx(qc,{component:oYe,allowNegative:O,className:Xi(e7.root,r),size:$,...z,readOnly:P,disabled:k,value:G,getInputRef:hs(t,de),onValueChange:Ie,rightSection:m||P?g:g||We,classNames:j,styles:q,unstyled:o,__staticSelector:"NumberInput",decimalScale:w?E:0,onKeyDown:it,onKeyDownCapture:_e,rightSectionPointerEvents:N??(k?"none":void 0),rightSectionWidth:F??`var(--ni-right-section-width-${$||"sm"})`,allowLeadingZeros:U,onBlur:ge=>{if(b==null||b(ge),v==="blur"&&typeof G=="number"&&Zd(G,h,d)!==G&&ne(Zd(G,h,d)),D&&typeof G=="string"){const ht=G.replace(/^0+/,""),vt=parseFloat(ht);ne(Number.isNaN(vt)?ht:vt)}},isAllowed:ge=>v==="strict"?y?y(ge)&&eae(ge.floatValue,h,d):eae(ge.floatValue,h,d):y?y(ge):!0})});aY.classes={...qc.classes,...e7};aY.displayName="@mantine/core/NumberInput";const[dYe,U_e]=fo("Progress.Root component was not found in tree");var hk={root:"m_db6d6462",section:"m_2242eb65","stripes-animation":"m_81a374bd",label:"m_91e40b74"};const hYe={},uY=Me((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=xe("ProgressLabel",hYe,e),u=U_e();return _.jsx(pe,{ref:t,...u.getStyles("label",{className:r,style:i,classNames:n,styles:s}),...a})});uY.classes=hk;uY.displayName="@mantine/core/ProgressLabel";const pYe={},mYe=(e,{size:t,radius:n,transitionDuration:r})=>({root:{"--progress-size":tn(t,"progress-size"),"--progress-radius":n===void 0?void 0:Ur(n),"--progress-transition-duration":typeof r=="number"?`${r}ms`:void 0}}),QL=Me((e,t)=>{const n=xe("ProgressRoot",pYe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,autoContrast:l,transitionDuration:c,...f}=n,d=dt({name:"Progress",classes:hk,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:mYe});return _.jsx(dYe,{value:{getStyles:d,autoContrast:l},children:_.jsx(pe,{ref:t,...d("root"),...f})})});QL.classes=hk;QL.displayName="@mantine/core/ProgressRoot";const gYe={withAria:!0},JL=Me((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,value:a,withAria:u,color:l,striped:c,animated:f,mod:d,...h}=xe("ProgressSection",gYe,e),p=U_e(),m=ps(),g=u?{role:"progressbar","aria-valuemax":100,"aria-valuemin":0,"aria-valuenow":a,"aria-valuetext":`${a}%`}:{};return _.jsx(pe,{ref:t,...p.getStyles("section",{className:r,classNames:n,styles:s,style:i}),...h,...g,mod:[{striped:c||f,animated:f},d],__vars:{"--progress-section-width":`${a}%`,"--progress-section-color":$r(l,m),"--progress-label-color":Yx(p.autoContrast,m)?Ry({color:l,theme:m,autoContrast:p.autoContrast}):void 0}})});JL.classes=hk;JL.displayName="@mantine/core/ProgressSection";const yYe={},iS=Me((e,t)=>{const n=xe("Progress",yYe,e),{value:r,classNames:i,styles:s,vars:o,color:a,striped:u,animated:l,"aria-label":c,...f}=n,{resolvedClassNames:d,resolvedStyles:h}=Vm({classNames:i,styles:s,props:n});return _.jsx(QL,{ref:t,classNames:d,styles:h,vars:o,...f,children:_.jsx(JL,{value:r,color:a,striped:u,animated:l,"aria-label":c})})});iS.classes=hk;iS.displayName="@mantine/core/Progress";iS.Section=JL;iS.Root=QL;iS.Label=uY;const[vYe,z_e]=Gx(),[bYe,_Ye]=Gx();var V_e={card:"m_9dc8ae12"};const wYe={withBorder:!0},EYe=(e,{radius:t})=>({card:{"--card-radius":Ur(t)}}),lY=Me((e,t)=>{const n=xe("RadioCard",wYe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,checked:l,mod:c,withBorder:f,value:d,onClick:h,name:p,onKeyDown:m,...g}=n,y=dt({name:"RadioCard",classes:V_e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:EYe,rootSelector:"card"}),{dir:v}=Hh(),b=z_e(),w=typeof l=="boolean"?l:(b==null?void 0:b.value)===d||!1,E=p||(b==null?void 0:b.name),T=S=>{if(m==null||m(S),["ArrowDown","ArrowUp","ArrowLeft","ArrowRight"].includes(S.nativeEvent.code)){S.preventDefault();const C=Array.from(document.querySelectorAll(`[role="radio"][name="${E||"__mantine"}"]`)),A=C.findIndex(O=>O===S.target),k=A+1>=C.length?0:A+1,N=A-1<0?C.length-1:A-1;S.nativeEvent.code==="ArrowDown"&&(C[k].focus(),C[k].click()),S.nativeEvent.code==="ArrowUp"&&(C[N].focus(),C[N].click()),S.nativeEvent.code==="ArrowLeft"&&(C[v==="ltr"?N:k].focus(),C[v==="ltr"?N:k].click()),S.nativeEvent.code==="ArrowRight"&&(C[v==="ltr"?k:N].focus(),C[v==="ltr"?k:N].click())}};return _.jsx(bYe,{value:{checked:w},children:_.jsx(xs,{ref:t,mod:[{"with-border":f,checked:w},c],...y("card"),...g,role:"radio","aria-checked":w,name:E,onClick:S=>{h==null||h(S),b==null||b.onChange(d||"")},onKeyDown:T})})});lY.displayName="@mantine/core/RadioCard";lY.classes=V_e;const xYe={},cY=Me((e,t)=>{const{value:n,defaultValue:r,onChange:i,size:s,wrapperProps:o,children:a,name:u,readOnly:l,...c}=xe("RadioGroup",xYe,e),f=Ta(u),[d,h]=Ss({value:n,defaultValue:r,finalValue:"",onChange:i}),p=m=>!l&&h(typeof m=="string"?m:m.currentTarget.value);return _.jsx(vYe,{value:{value:d,onChange:p,size:s,name:f},children:_.jsx(mi.Wrapper,{size:s,ref:t,...o,...c,labelElement:"div",__staticSelector:"RadioGroup",children:_.jsx(jG,{role:"radiogroup",children:a})})})});cY.classes=mi.Wrapper.classes;cY.displayName="@mantine/core/RadioGroup";function H_e({size:e,style:t,...n}){return _.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 5 5",style:{width:Te(e),height:Te(e),...t},"aria-hidden":!0,...n,children:_.jsx("circle",{cx:"2.5",cy:"2.5",r:"2.5",fill:"currentColor"})})}var q_e={indicator:"m_717d7ff6",icon:"m_3e4da632","indicator--outline":"m_2980836c"};const SYe={icon:H_e},TYe=(e,{radius:t,color:n,size:r,iconColor:i,variant:s,autoContrast:o})=>{const a=Vh({color:n||e.primaryColor,theme:e}),u=a.isThemeColor&&a.shade===void 0?`var(--mantine-color-${a.color}-outline)`:a.color;return{indicator:{"--radio-size":tn(r,"radio-size"),"--radio-radius":t===void 0?void 0:Ur(t),"--radio-color":s==="outline"?u:$r(n,e),"--radio-icon-size":tn(r,"radio-icon-size"),"--radio-icon-color":i?$r(i,e):Yx(o,e)?Ry({color:n,theme:e,autoContrast:o}):void 0}}},fY=Me((e,t)=>{const n=xe("RadioIndicator",SYe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,icon:l,radius:c,color:f,iconColor:d,autoContrast:h,checked:p,mod:m,variant:g,disabled:y,...v}=n,b=l,w=dt({name:"RadioIndicator",classes:q_e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:TYe,rootSelector:"indicator"}),E=_Ye(),T=typeof p=="boolean"?p:(E==null?void 0:E.checked)||!1;return _.jsx(pe,{ref:t,...w("indicator",{variant:g}),variant:g,mod:[{checked:T,disabled:y},m],...v,children:_.jsx(b,{...w("icon")})})});fY.displayName="@mantine/core/RadioIndicator";fY.classes=q_e;var W_e={root:"m_f3f1af94",inner:"m_89c4f5e4",icon:"m_f3ed6b2b",radio:"m_8a3dbb89","radio--outline":"m_1bfe9d39"};const CYe={labelPosition:"right"},AYe=(e,{size:t,radius:n,color:r,iconColor:i,variant:s,autoContrast:o})=>{const a=Vh({color:r||e.primaryColor,theme:e}),u=a.isThemeColor&&a.shade===void 0?`var(--mantine-color-${a.color}-outline)`:a.color;return{root:{"--radio-size":tn(t,"radio-size"),"--radio-radius":n===void 0?void 0:Ur(n),"--radio-color":s==="outline"?u:$r(r,e),"--radio-icon-color":i?$r(i,e):Yx(o,e)?Ry({color:r,theme:e,autoContrast:o}):void 0,"--radio-icon-size":tn(t,"radio-icon-size")}}},z1=Me((e,t)=>{const n=xe("Radio",CYe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,id:l,size:c,label:f,labelPosition:d,description:h,error:p,radius:m,color:g,variant:y,disabled:v,wrapperProps:b,icon:w=H_e,rootRef:E,iconColor:T,onChange:S,mod:C,...A}=n,k=dt({name:"Radio",classes:W_e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:AYe}),N=z_e(),O=(N==null?void 0:N.size)??c,P=n.size?c:O,{styleProps:$,rest:F}=Db(A),M=Ta(l),B=N?{checked:N.value===F.value,name:F.name??N.name,onChange:U=>{N.onChange(U),S==null||S(U)}}:{};return _.jsx(NL,{...k("root"),__staticSelector:"Radio",__stylesApiProps:n,id:M,size:P,labelPosition:d,label:f,description:h,error:p,disabled:v,classNames:r,styles:o,unstyled:a,"data-checked":B.checked||void 0,variant:y,ref:E,mod:C,...$,...b,children:_.jsxs(pe,{...k("inner"),mod:{"label-position":d},children:[_.jsx(pe,{...k("radio",{focusable:!0,variant:y}),onChange:S,...F,...B,component:"input",mod:{error:!!p},ref:t,id:M,disabled:v,type:"radio"}),_.jsx(w,{...k("icon"),"aria-hidden":!0})]})})});z1.classes=W_e;z1.displayName="@mantine/core/Radio";z1.Group=cY;z1.Card=lY;z1.Indicator=fY;const IYe={duration:100,transition:"fade"};function kYe(e,t){return{...IYe,...t,...e}}function RYe({offset:e,position:t}){const[n,r]=I.useState(!1),i=I.useRef(),{x:s,y:o,elements:a,refs:u,update:l,placement:c}=iG({placement:t,middleware:[eG({crossAxis:!0,padding:5,rootBoundary:"document"})]}),f=c.includes("right")?e:t.includes("left")?e*-1:0,d=c.includes("bottom")?e:t.includes("top")?e*-1:0,h=I.useCallback(({clientX:p,clientY:m})=>{u.setPositionReference({getBoundingClientRect(){return{width:0,height:0,x:p,y:m,left:p+f,top:m+d,right:p,bottom:m}}})},[a.reference]);return I.useEffect(()=>{if(u.floating.current){const p=i.current;p.addEventListener("mousemove",h);const m=rm(u.floating.current);return m.forEach(g=>{g.addEventListener("scroll",l)}),()=>{p.removeEventListener("mousemove",h),m.forEach(g=>{g.removeEventListener("scroll",l)})}}},[a.reference,u.floating.current,l,h,n]),{handleMouseMove:h,x:s,y:o,opened:n,setOpened:r,boundaryRef:i,floating:u.setFloating}}var ZL={tooltip:"m_1b3c8819",arrow:"m_f898399f"};const NYe={refProp:"ref",withinPortal:!0,offset:10,position:"right",zIndex:Jl("popover")},DYe=(e,{radius:t,color:n})=>({tooltip:{"--tooltip-radius":t===void 0?void 0:Ur(t),"--tooltip-bg":n?$r(n,e):void 0,"--tooltip-color":n?"var(--mantine-color-white)":void 0}}),dY=Me((e,t)=>{const n=xe("TooltipFloating",NYe,e),{children:r,refProp:i,withinPortal:s,style:o,className:a,classNames:u,styles:l,unstyled:c,radius:f,color:d,label:h,offset:p,position:m,multiline:g,zIndex:y,disabled:v,variant:b,vars:w,portalProps:E,...T}=n,S=ps(),C=dt({name:"TooltipFloating",props:n,classes:ZL,className:a,style:o,classNames:u,styles:l,unstyled:c,rootSelector:"tooltip",vars:w,varsResolver:DYe}),{handleMouseMove:A,x:k,y:N,opened:O,boundaryRef:P,floating:$,setOpened:F}=RYe({offset:p,position:m});if(!Iy(r))throw new Error("[@mantine/core] Tooltip.Floating component children should be an element or a component that accepts ref, fragments, strings, numbers and other primitive values are not supported");const M=hs(P,r.ref,t),B=H=>{var D,z;(z=(D=r.props).onMouseEnter)==null||z.call(D,H),A(H),F(!0)},U=H=>{var D,z;(z=(D=r.props).onMouseLeave)==null||z.call(D,H),F(!1)};return _.jsxs(_.Fragment,{children:[_.jsx(Qx,{...E,withinPortal:s,children:_.jsx(pe,{...T,...C("tooltip",{style:{...BW(o,S),zIndex:y,display:!v&&O?"block":"none",top:(N&&Math.round(N))??"",left:(k&&Math.round(k))??""}}),variant:b,ref:$,mod:{multiline:g},children:h})}),I.cloneElement(r,{...r.props,[i]:M,onMouseEnter:B,onMouseLeave:U})]})});dY.classes=ZL;dY.displayName="@mantine/core/TooltipFloating";const G_e=I.createContext(!1),PYe=G_e.Provider,OYe=()=>I.useContext(G_e),$Ye={openDelay:0,closeDelay:0};function Y_e(e){const{openDelay:t,closeDelay:n,children:r}=xe("TooltipGroup",$Ye,e);return _.jsx(PYe,{value:!0,children:_.jsx(RVe,{delay:{open:t,close:n},children:r})})}Y_e.displayName="@mantine/core/TooltipGroup";function MYe(e){var T,S,C;const[t,n]=I.useState(!1),i=typeof e.opened=="boolean"?e.opened:t,s=OYe(),o=Ta(),{delay:a,currentId:u,setCurrentId:l}=Nbe(),c=I.useCallback(A=>{n(A),A&&l(o)},[l,o]),{x:f,y:d,context:h,refs:p,update:m,placement:g,middlewareData:{arrow:{x:y,y:v}={}}}=iG({strategy:e.strategy,placement:e.position,open:i,onOpenChange:c,middleware:[Cbe(e.offset),eG({padding:8}),XU(),Abe({element:e.arrowRef,padding:e.arrowOffset}),...e.inline?[QU()]:[]]}),{getReferenceProps:b,getFloatingProps:w}=LVe([kVe(h,{enabled:(T=e.events)==null?void 0:T.hover,delay:s?a:{open:e.openDelay,close:e.closeDelay},mouseOnly:!((S=e.events)!=null&&S.touch)}),MVe(h,{enabled:(C=e.events)==null?void 0:C.focus,visibleOnly:!0}),jVe(h,{role:"tooltip"}),OVe(h,{enabled:typeof e.opened>"u"}),NVe(h,{id:o})]);Fbe({opened:i,position:e.position,positionDependencies:e.positionDependencies,floating:{refs:p,update:m}}),Sh(()=>{var A;(A=e.onPositionChange)==null||A.call(e,g)},[g]);const E=i&&u&&u!==o;return{x:f,y:d,arrowX:y,arrowY:v,reference:p.setReference,floating:p.setFloating,getFloatingProps:w,getReferenceProps:b,isGroupPhase:E,opened:i,placement:g}}const tae={position:"top",refProp:"ref",withinPortal:!0,inline:!1,arrowSize:4,arrowOffset:5,arrowRadius:0,arrowPosition:"side",offset:5,transitionProps:{duration:100,transition:"fade"},events:{hover:!0,focus:!1,touch:!1},zIndex:Jl("popover"),positionDependencies:[]},LYe=(e,{radius:t,color:n})=>({tooltip:{"--tooltip-radius":t===void 0?void 0:Ur(t),"--tooltip-bg":n?$r(n,e):void 0,"--tooltip-color":n?"var(--mantine-color-white)":void 0}}),ai=Me((e,t)=>{const n=xe("Tooltip",tae,e),{children:r,position:i,refProp:s,label:o,openDelay:a,closeDelay:u,onPositionChange:l,opened:c,withinPortal:f,radius:d,color:h,classNames:p,styles:m,unstyled:g,style:y,className:v,withArrow:b,arrowSize:w,arrowOffset:E,arrowRadius:T,arrowPosition:S,offset:C,transitionProps:A,multiline:k,events:N,zIndex:O,disabled:P,positionDependencies:$,onClick:F,onMouseEnter:M,onMouseLeave:B,inline:U,variant:H,keepMounted:D,vars:z,portalProps:W,mod:j,floatingStrategy:q,...G}=xe("Tooltip",tae,n),{dir:ne}=Hh(),ce=I.useRef(null),de=MYe({position:Dbe(ne,i),closeDelay:u,openDelay:a,onPositionChange:l,opened:c,events:N,arrowRef:ce,arrowOffset:E,offset:typeof C=="number"?C+(b?w/2:0):C,positionDependencies:[...$,r],inline:U,strategy:q}),he=dt({name:"Tooltip",props:n,classes:ZL,className:v,style:y,classNames:p,styles:m,unstyled:g,rootSelector:"tooltip",vars:z,varsResolver:LYe});if(!Iy(r))throw new Error("[@mantine/core] Tooltip component children should be an element or a component that accepts ref, fragments, strings, numbers and other primitive values are not supported");const ve=hs(de.reference,r.ref,t),Ie=kYe(A,{duration:100,transition:"fade"});return _.jsxs(_.Fragment,{children:[_.jsx(Qx,{...W,withinPortal:f,children:_.jsx(qm,{...Ie,keepMounted:D,mounted:!P&&!!de.opened,duration:de.isGroupPhase?10:Ie.duration,children:be=>_.jsxs(pe,{...G,variant:H,mod:[{multiline:k},j],...de.getFloatingProps({ref:de.floating,className:he("tooltip").className,style:{...he("tooltip").style,...be,zIndex:O,top:de.y??0,left:de.x??0}}),children:[o,_.jsx(sG,{ref:ce,arrowX:de.arrowX,arrowY:de.arrowY,visible:b,position:de.placement,arrowSize:w,arrowOffset:E,arrowRadius:T,arrowPosition:S,...he("arrow")})]})})}),I.cloneElement(r,de.getReferenceProps({onClick:F,onMouseEnter:M,onMouseLeave:B,onMouseMove:n.onMouseMove,onPointerDown:n.onPointerDown,onPointerEnter:n.onPointerEnter,[s]:ve,className:Xi(v,r.props.className),...r.props}))]})});ai.classes=ZL;ai.displayName="@mantine/core/Tooltip";ai.Floating=dY;ai.Group=Y_e;var K_e={root:"m_cf365364",indicator:"m_9e182ccd",label:"m_1738fcb2",input:"m_1714d588",control:"m_69686b9b",innerLabel:"m_78882f40"};const FYe={withItemsBorders:!0},jYe=(e,{radius:t,color:n,transitionDuration:r,size:i,transitionTimingFunction:s})=>({root:{"--sc-radius":t===void 0?void 0:Ur(t),"--sc-color":n?$r(n,e):void 0,"--sc-shadow":n?void 0:"var(--mantine-shadow-xs)","--sc-transition-duration":r===void 0?void 0:`${r}ms`,"--sc-transition-timing-function":s,"--sc-padding":tn(i,"sc-padding"),"--sc-font-size":uo(i)}}),hY=Me((e,t)=>{var ne,ce;const n=xe("SegmentedControl",FYe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,data:l,value:c,defaultValue:f,onChange:d,size:h,name:p,disabled:m,readOnly:g,fullWidth:y,orientation:v,radius:b,color:w,transitionDuration:E,transitionTimingFunction:T,variant:S,autoContrast:C,withItemsBorders:A,mod:k,...N}=n,O=dt({name:"SegmentedControl",props:n,classes:K_e,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:jYe}),P=ps(),$=l.map(de=>typeof de=="string"?{label:de,value:de}:de),F=BUe(),[M,B]=I.useState(null),[U,H]=I.useState({}),D=(de,he)=>{U[he]=de,H(U)},[z,W]=Ss({value:c,defaultValue:f,finalValue:Array.isArray(l)?((ne=$.find(de=>!de.disabled))==null?void 0:ne.value)??((ce=l[0])==null?void 0:ce.value)??null:null,onChange:d}),j=Ta(p),q=$.map(de=>I.createElement(pe,{...O("control"),mod:{active:z===de.value,orientation:v},key:de.value},I.createElement("input",{...O("input"),disabled:m||de.disabled,type:"radio",name:j,value:de.value,id:`${j}-${de.value}`,checked:z===de.value,onChange:()=>!g&&W(de.value),"data-focus-ring":P.focusRing,key:`${de.value}-input`}),I.createElement(pe,{component:"label",...O("label"),mod:{active:z===de.value&&!(m||de.disabled),disabled:m||de.disabled,"read-only":g},htmlFor:`${j}-${de.value}`,ref:he=>D(he,de.value),__vars:{"--sc-label-color":w!==void 0?Ry({color:w,theme:P,autoContrast:C}):void 0},key:`${de.value}-label`},_.jsx("span",{...O("innerLabel"),children:de.label})))),G=hs(t,de=>B(de));return l.length===0?null:_.jsxs(pe,{...O("root"),variant:S,size:h,ref:G,mod:[{"full-width":y,orientation:v,initialized:F,"with-items-borders":A},k],...N,role:"radiogroup",children:[typeof z=="string"&&_.jsx(mG,{target:U[z],parent:M,component:"span",transitionDuration:"var(--sc-transition-duration)",...O("indicator")}),q]})});hY.classes=K_e;hY.displayName="@mantine/core/SegmentedControl";const BYe={searchable:!1,withCheckIcon:!0,allowDeselect:!0,checkIconPosition:"left"},pk=Me((e,t)=>{const n=xe("Select",BYe,e),{classNames:r,styles:i,unstyled:s,vars:o,dropdownOpened:a,defaultDropdownOpened:u,onDropdownClose:l,onDropdownOpen:c,onFocus:f,onBlur:d,onClick:h,onChange:p,data:m,value:g,defaultValue:y,selectFirstOptionOnChange:v,onOptionSubmit:b,comboboxProps:w,readOnly:E,disabled:T,filter:S,limit:C,withScrollArea:A,maxDropdownHeight:k,size:N,searchable:O,rightSection:P,checkIconPosition:$,withCheckIcon:F,nothingFoundMessage:M,name:B,form:U,searchValue:H,defaultSearchValue:D,onSearchChange:z,allowDeselect:W,error:j,rightSectionPointerEvents:q,id:G,clearable:ne,clearButtonProps:ce,hiddenInputProps:de,renderOption:he,onClear:ve,autoComplete:Ie,scrollAreaProps:be,...Ke}=n,Ue=I.useMemo(()=>t_e(m),[m]),yt=I.useMemo(()=>CG(Ue),[Ue]),it=Ta(G),[_e,ke,ze]=Ss({value:g,defaultValue:y,finalValue:null,onChange:p}),ct=typeof _e=="string"?yt[_e]:void 0,[Ot,We]=Ss({value:H,defaultValue:D,finalValue:ct?ct.label:"",onChange:z}),ge=LG({opened:a,defaultOpened:u,onDropdownOpen:()=>{c==null||c(),ge.updateSelectedOptionIndex("active",{scrollIntoView:!0})},onDropdownClose:()=>{l==null||l(),ge.resetSelectedOption()}}),{resolvedClassNames:ht,resolvedStyles:vt}=Vm({props:n,styles:i,classNames:r});I.useEffect(()=>{v&&ge.selectFirstOption()},[v,_e]),I.useEffect(()=>{g===null&&We(""),typeof g=="string"&&ct&&We(ct.label)},[g,ct]);const me=ne&&!!_e&&!T&&!E&&_.jsx(Kn.ClearButton,{size:N,...ce,onClear:()=>{ke(null,null),We(""),ve==null||ve()}});return _.jsxs(_.Fragment,{children:[_.jsxs(Kn,{store:ge,__staticSelector:"Select",classNames:ht,styles:vt,unstyled:s,readOnly:E,onOptionSubmit:Ae=>{b==null||b(Ae);const He=W&&yt[Ae].value===_e?null:yt[Ae],ut=He?He.value:null;ke(ut,He),!ze&&We(typeof ut=="string"&&(He==null?void 0:He.label)||""),ge.closeDropdown()},size:N,...w,children:[_.jsx(Kn.Target,{targetType:O?"input":"button",autoComplete:Ie,children:_.jsx(qc,{id:it,ref:t,rightSection:P||me||_.jsx(Kn.Chevron,{size:N,error:j,unstyled:s}),rightSectionPointerEvents:q||(me?"all":"none"),...Ke,size:N,__staticSelector:"Select",disabled:T,readOnly:E||!O,value:Ot,onChange:Ae=>{We(Ae.currentTarget.value),ge.openDropdown(),v&&ge.selectFirstOption()},onFocus:Ae=>{O&&ge.openDropdown(),f==null||f(Ae)},onBlur:Ae=>{var He;O&&ge.closeDropdown(),We(_e!=null&&((He=yt[_e])==null?void 0:He.label)||""),d==null||d(Ae)},onClick:Ae=>{O?ge.openDropdown():ge.toggleDropdown(),h==null||h(Ae)},classNames:ht,styles:vt,unstyled:s,pointer:!O,error:j})}),_.jsx(b_e,{data:Ue,hidden:E||T,filter:S,search:Ot,limit:C,hiddenWhenEmpty:!O||!M,withScrollArea:A,maxDropdownHeight:k,filterOptions:O&&(ct==null?void 0:ct.label)!==Ot,value:_e,checkIconPosition:$,withCheckIcon:F,nothingFoundMessage:M,unstyled:s,labelId:Ke.label?`${it}-label`:void 0,"aria-label":Ke.label?void 0:Ke["aria-label"],renderOption:he,scrollAreaProps:be})]}),_.jsx(Kn.HiddenInput,{value:_e,name:B,form:U,disabled:T,...de})]})});pk.classes={...qc.classes,...Kn.classes};pk.displayName="@mantine/core/Select";function UYe({spacing:e,verticalSpacing:t,cols:n,selector:r}){var c;const i=ps(),s=t===void 0?e:t,o=Ay({"--sg-spacing-x":as(If(e)),"--sg-spacing-y":as(If(s)),"--sg-cols":(c=If(n))==null?void 0:c.toString()}),a=Xr(i.breakpoints).reduce((f,d)=>(f[d]||(f[d]={}),typeof e=="object"&&e[d]!==void 0&&(f[d]["--sg-spacing-x"]=as(e[d])),typeof s=="object"&&s[d]!==void 0&&(f[d]["--sg-spacing-y"]=as(s[d])),typeof n=="object"&&n[d]!==void 0&&(f[d]["--sg-cols"]=n[d]),f),{}),l=SA(Xr(a),i).filter(f=>Xr(a[f.value]).length>0).map(f=>({query:`(min-width: ${i.breakpoints[f.value]})`,styles:a[f.value]}));return _.jsx(Nb,{styles:o,media:l,selector:r})}function Vj(e){return typeof e=="object"&&e!==null?Xr(e):[]}function zYe(e){return e.sort((t,n)=>xA(t)-xA(n))}function VYe({spacing:e,verticalSpacing:t,cols:n}){const r=Array.from(new Set([...Vj(e),...Vj(t),...Vj(n)]));return zYe(r)}function HYe({spacing:e,verticalSpacing:t,cols:n,selector:r}){var l;const i=t===void 0?e:t,s=Ay({"--sg-spacing-x":as(If(e)),"--sg-spacing-y":as(If(i)),"--sg-cols":(l=If(n))==null?void 0:l.toString()}),o=VYe({spacing:e,verticalSpacing:t,cols:n}),a=o.reduce((c,f)=>(c[f]||(c[f]={}),typeof e=="object"&&e[f]!==void 0&&(c[f]["--sg-spacing-x"]=as(e[f])),typeof i=="object"&&i[f]!==void 0&&(c[f]["--sg-spacing-y"]=as(i[f])),typeof n=="object"&&n[f]!==void 0&&(c[f]["--sg-cols"]=n[f]),c),{}),u=o.map(c=>({query:`simple-grid (min-width: ${c})`,styles:a[c]}));return _.jsx(Nb,{styles:s,container:u,selector:r})}var X_e={container:"m_925c2d2c",root:"m_2415a157"};const qYe={cols:1,spacing:"md",type:"media"},pY=Me((e,t)=>{const n=xe("SimpleGrid",qYe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,cols:l,verticalSpacing:c,spacing:f,type:d,...h}=n,p=dt({name:"SimpleGrid",classes:X_e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u}),m=ok();return d==="container"?_.jsxs(_.Fragment,{children:[_.jsx(HYe,{...n,selector:`.${m}`}),_.jsx("div",{...p("container"),children:_.jsx(pe,{ref:t,...p("root",{className:m}),...h})})]}):_.jsxs(_.Fragment,{children:[_.jsx(UYe,{...n,selector:`.${m}`}),_.jsx(pe,{ref:t,...p("root",{className:m}),...h})]})});pY.classes=X_e;pY.displayName="@mantine/core/SimpleGrid";const[Q_e,e6]=fo("SliderProvider was not found in tree"),mY=I.forwardRef(({size:e,disabled:t,variant:n,color:r,thumbSize:i,radius:s,...o},a)=>{const{getStyles:u}=e6();return _.jsx(pe,{tabIndex:-1,variant:n,size:e,ref:a,...u("root"),...o})});mY.displayName="@mantine/core/SliderRoot";const KO=I.forwardRef(({max:e,min:t,value:n,position:r,label:i,dragging:s,onMouseDown:o,onKeyDownCapture:a,labelTransitionProps:u,labelAlwaysOn:l,thumbLabel:c,onFocus:f,onBlur:d,showLabelOnHover:h,isHovered:p,children:m=null,disabled:g},y)=>{const{getStyles:v}=e6(),[b,w]=I.useState(!1),E=l||s||b||h&&p;return _.jsxs(pe,{tabIndex:0,role:"slider","aria-label":c,"aria-valuemax":e,"aria-valuemin":t,"aria-valuenow":n,ref:y,__vars:{"--slider-thumb-offset":`${r}%`},...v("thumb",{focusable:!0}),mod:{dragging:s,disabled:g},onFocus:()=>{w(!0),typeof f=="function"&&f()},onBlur:()=>{w(!1),typeof d=="function"&&d()},onTouchStart:o,onMouseDown:o,onKeyDownCapture:a,onClick:T=>T.stopPropagation(),children:[m,_.jsx(qm,{mounted:i!=null&&!!E,transition:"fade",duration:0,...u,children:T=>_.jsx("div",{...v("label",{style:T}),children:i})})]})});KO.displayName="@mantine/core/SliderThumb";function XO({value:e,min:t,max:n}){const r=(e-t)/(n-t)*100;return Math.min(Math.max(r,0),100)}function WYe({mark:e,offset:t,value:n,inverted:r=!1}){return r?typeof t=="number"&&e.value<=t||e.value>=n:typeof t=="number"?e.value>=t&&e.value<=n:e.value<=n}function J_e({marks:e,min:t,max:n,disabled:r,value:i,offset:s,inverted:o}){const{getStyles:a}=e6();if(!e)return null;const u=e.map((l,c)=>I.createElement(pe,{...a("markWrapper"),__vars:{"--mark-offset":`${XO({value:l.value,min:t,max:n})}%`},key:c},_.jsx(pe,{...a("mark"),mod:{filled:WYe({mark:l,value:i,offset:s,inverted:o}),disabled:r}}),l.label&&_.jsx("div",{...a("markLabel"),children:l.label})));return _.jsx("div",{children:u})}J_e.displayName="@mantine/core/SliderMarks";function gY({filled:e,children:t,offset:n,disabled:r,marksOffset:i,inverted:s,containerProps:o,...a}){const{getStyles:u}=e6();return _.jsx(_.Fragment,{children:_.jsx(pe,{...u("trackContainer"),mod:{disabled:r},...o,children:_.jsxs(pe,{...u("track"),mod:{inverted:s,disabled:r},children:[_.jsx(pe,{mod:{inverted:s,disabled:r},__vars:{"--slider-bar-width":`calc(${e}% + var(--slider-size))`,"--slider-bar-offset":`calc(${n}% - var(--slider-size))`},...u("bar")}),t,_.jsx(J_e,{...a,offset:i,disabled:r,inverted:s})]})})})}gY.displayName="@mantine/core/SliderTrack";function t7({value:e,containerWidth:t,min:n,max:r,step:i,precision:s}){const a=(t?Math.min(Math.max(e,0),t)/t:e)*(r-n),u=(a!==0?Math.round(a/i)*i:0)+n,l=Math.max(u,n);return s!==void 0?Number(l.toFixed(s)):l}function fc(e,t){return parseFloat(e.toFixed(t))}function Z_e(e){if(!e)return 0;const t=e.toString().split(".");return t.length>1?t[1].length:0}var t6={root:"m_dd36362e",label:"m_c9357328",thumb:"m_c9a9a60a",trackContainer:"m_a8645c2",track:"m_c9ade57f",bar:"m_38aeed47",markWrapper:"m_b7b0423a",mark:"m_dd33bc19",markLabel:"m_68c77a5b"};const GYe={radius:"xl",min:0,max:100,step:1,marks:[],label:e=>e,labelTransitionProps:{transition:"fade",duration:0},labelAlwaysOn:!1,thumbLabel:"",showLabelOnHover:!0,disabled:!1,scale:e=>e},YYe=(e,{size:t,color:n,thumbSize:r,radius:i})=>({root:{"--slider-size":tn(t,"slider-size"),"--slider-color":n?$r(n,e):void 0,"--slider-radius":i===void 0?void 0:Ur(i),"--slider-thumb-size":r!==void 0?Te(r):"calc(var(--slider-size) * 2)"}}),n6=Me((e,t)=>{const n=xe("Slider",GYe,e),{classNames:r,styles:i,value:s,onChange:o,onChangeEnd:a,size:u,min:l,max:c,step:f,precision:d,defaultValue:h,name:p,marks:m,label:g,labelTransitionProps:y,labelAlwaysOn:v,thumbLabel:b,showLabelOnHover:w,thumbChildren:E,disabled:T,unstyled:S,scale:C,inverted:A,className:k,style:N,vars:O,hiddenInputProps:P,...$}=n,F=dt({name:"Slider",props:n,classes:t6,classNames:r,className:k,styles:i,style:N,vars:O,varsResolver:YYe,unstyled:S}),{dir:M}=Hh(),[B,U]=I.useState(!1),[H,D]=Ss({value:typeof s=="number"?Zd(s,l,c):s,defaultValue:typeof h=="number"?Zd(h,l,c):h,finalValue:Zd(0,l,c),onChange:o}),z=I.useRef(H),W=I.useRef(),j=I.useRef(),q=XO({value:H,min:l,max:c}),G=C(H),ne=typeof g=="function"?g(G):g,ce=d??Z_e(f),de=I.useCallback(({x:be})=>{if(!T){const Ke=t7({value:be,min:l,max:c,step:f,precision:ce});D(Ke),z.current=Ke}},[T,l,c,f,ce,D]),{ref:he,active:ve}=H1e(de,{onScrubEnd:()=>a==null?void 0:a(z.current)},M),Ie=be=>{var Ke,Ue,yt,it,_e,ke;if(!T)switch(be.key){case"ArrowUp":{be.preventDefault(),(Ke=j.current)==null||Ke.focus();const ze=fc(Math.min(Math.max(H+f,l),c),ce);D(ze),a==null||a(ze);break}case"ArrowRight":{be.preventDefault(),(Ue=j.current)==null||Ue.focus();const ze=fc(Math.min(Math.max(M==="rtl"?H-f:H+f,l),c),ce);D(ze),a==null||a(ze);break}case"ArrowDown":{be.preventDefault(),(yt=j.current)==null||yt.focus();const ze=fc(Math.min(Math.max(H-f,l),c),ce);D(ze),a==null||a(ze);break}case"ArrowLeft":{be.preventDefault(),(it=j.current)==null||it.focus();const ze=fc(Math.min(Math.max(M==="rtl"?H+f:H-f,l),c),ce);D(ze),a==null||a(ze);break}case"Home":{be.preventDefault(),(_e=j.current)==null||_e.focus(),D(l),a==null||a(l);break}case"End":{be.preventDefault(),(ke=j.current)==null||ke.focus(),D(c),a==null||a(c);break}}};return _.jsx(Q_e,{value:{getStyles:F},children:_.jsxs(mY,{...$,ref:hs(t,W),onKeyDownCapture:Ie,onMouseDownCapture:()=>{var be;return(be=W.current)==null?void 0:be.focus()},size:u,disabled:T,children:[_.jsx(gY,{inverted:A,offset:0,filled:q,marks:m,min:l,max:c,value:G,disabled:T,containerProps:{ref:he,onMouseEnter:w?()=>U(!0):void 0,onMouseLeave:w?()=>U(!1):void 0},children:_.jsx(KO,{max:c,min:l,value:G,position:q,dragging:ve,label:ne,ref:j,labelTransitionProps:y,labelAlwaysOn:v,thumbLabel:b,showLabelOnHover:w,isHovered:B,disabled:T,children:E})}),_.jsx("input",{type:"hidden",name:p,value:G,...P})]})})});n6.classes=t6;n6.displayName="@mantine/core/Slider";function KYe(e){return"TouchEvent"in window&&e instanceof window.TouchEvent?e.touches[0].clientX:e.clientX}const XYe=(e,{size:t,color:n,thumbSize:r,radius:i})=>({root:{"--slider-size":tn(t,"slider-size"),"--slider-color":n?$r(n,e):void 0,"--slider-radius":i===void 0?void 0:Ur(i),"--slider-thumb-size":r!==void 0?Te(r):"calc(var(--slider-size) * 2)"}}),QYe={min:0,max:100,minRange:10,step:1,marks:[],label:e=>e,labelTransitionProps:{transition:"fade",duration:0},labelAlwaysOn:!1,showLabelOnHover:!0,disabled:!1,scale:e=>e},NA=Me((e,t)=>{const n=xe("RangeSlider",QYe,e),{classNames:r,styles:i,value:s,onChange:o,onChangeEnd:a,size:u,min:l,max:c,minRange:f,maxRange:d,step:h,precision:p,defaultValue:m,name:g,marks:y,label:v,labelTransitionProps:b,labelAlwaysOn:w,thumbFromLabel:E,thumbToLabel:T,showLabelOnHover:S,thumbChildren:C,disabled:A,unstyled:k,scale:N,inverted:O,className:P,style:$,vars:F,hiddenInputProps:M,...B}=n,U=dt({name:"Slider",props:n,classes:t6,classNames:r,className:P,styles:i,style:$,vars:F,varsResolver:XYe,unstyled:k}),{dir:H}=Hh(),[D,z]=I.useState(-1),[W,j]=I.useState(!1),[q,G]=Ss({value:s,defaultValue:m,finalValue:[l,c],onChange:o}),ne=I.useRef(q),ce=I.useRef([]),de=I.useRef(void 0),he=[XO({value:q[0],min:l,max:c}),XO({value:q[1],min:l,max:c})],ve=p??Z_e(h),Ie=We=>{G(We),ne.current=We};I.useEffect(()=>{Array.isArray(s)&&(ne.current=s)},Array.isArray(s)?[s[0],s[1]]:[null,null]);const be=(We,ge,ht)=>{const vt=[...ne.current];vt[ge]=We,ge===0&&(We>vt[1]-(f-1e-9)&&(vt[1]=Math.min(We+f,c)),We>(c-(f-1e-9)||l)&&(vt[ge]=ne.current[ge]),vt[1]-We>d&&(vt[1]=We+d)),ge===1&&(We<vt[0]+f&&(vt[0]=Math.max(We-f,l)),We<vt[0]+f&&(vt[ge]=ne.current[ge]),We-vt[0]>d&&(vt[0]=We-d)),vt[0]=fc(vt[0],ve),vt[1]=fc(vt[1],ve),Ie(vt),ht&&(a==null||a(ne.current))},Ke=We=>{if(!A){const ge=t7({value:We,min:l,max:c,step:h,precision:ve});be(ge,de.current,!1)}},{ref:Ue,active:yt}=H1e(({x:We})=>Ke(We),{onScrubEnd:()=>a==null?void 0:a(ne.current)},H);function it(We){de.current=We}const _e=We=>{Ue.current.focus();const ge=Ue.current.getBoundingClientRect(),ht=KYe(We.nativeEvent),vt=t7({value:ht-ge.left,max:c,min:l,step:h,containerWidth:ge.width}),me=Math.abs(q[0]-vt)>Math.abs(q[1]-vt)?1:0,Ae=H==="ltr"?me:me===1?0:1;de.current=Ae},ke=()=>D!==1&&D!==0?(z(0),0):D,ze=We=>{if(!A)switch(We.key){case"ArrowUp":{We.preventDefault();const ge=ke();ce.current[ge].focus(),be(fc(Math.min(Math.max(ne.current[ge]+h,l),c),ve),ge,!0);break}case"ArrowRight":{We.preventDefault();const ge=ke();ce.current[ge].focus(),be(fc(Math.min(Math.max(H==="rtl"?ne.current[ge]-h:ne.current[ge]+h,l),c),ve),ge,!0);break}case"ArrowDown":{We.preventDefault();const ge=ke();ce.current[ge].focus(),be(fc(Math.min(Math.max(ne.current[ge]-h,l),c),ve),ge,!0);break}case"ArrowLeft":{We.preventDefault();const ge=ke();ce.current[ge].focus(),be(fc(Math.min(Math.max(H==="rtl"?ne.current[ge]+h:ne.current[ge]-h,l),c),ve),ge,!0);break}}},ct={max:c,min:l,size:u,labelTransitionProps:b,labelAlwaysOn:w,onBlur:()=>z(-1)},Ot=Array.isArray(C);return _.jsx(Q_e,{value:{getStyles:U},children:_.jsxs(mY,{...B,size:u,ref:t,disabled:A,children:[_.jsxs(gY,{offset:he[0],marksOffset:q[0],filled:he[1]-he[0],marks:y,inverted:O,min:l,max:c,value:q[1],disabled:A,containerProps:{ref:Ue,onMouseEnter:S?()=>j(!0):void 0,onMouseLeave:S?()=>j(!1):void 0,onTouchStartCapture:_e,onTouchEndCapture:()=>{de.current=-1},onMouseDownCapture:_e,onMouseUpCapture:()=>{de.current=-1},onKeyDownCapture:ze},children:[_.jsx(KO,{...ct,value:N(q[0]),position:he[0],dragging:yt,label:typeof v=="function"?v(fc(N(q[0]),ve)):v,ref:We=>{ce.current[0]=We},thumbLabel:E,onMouseDown:()=>it(0),onFocus:()=>z(0),showLabelOnHover:S,isHovered:W,disabled:A,children:Ot?C[0]:C}),_.jsx(KO,{...ct,thumbLabel:T,value:N(q[1]),position:he[1],dragging:yt,label:typeof v=="function"?v(fc(N(q[1]),ve)):v,ref:We=>{ce.current[1]=We},onMouseDown:()=>it(1),onFocus:()=>z(1),showLabelOnHover:S,isHovered:W,disabled:A,children:Ot?C[1]:C})]}),_.jsx("input",{type:"hidden",name:`${g}_from`,value:q[0],...M}),_.jsx("input",{type:"hidden",name:`${g}_to`,value:q[1],...M})]})})});NA.classes=t6;NA.displayName="@mantine/core/RangeSlider";const JYe={},Nl=Me((e,t)=>{const{w:n,h:r,miw:i,mih:s,...o}=xe("Space",JYe,e);return _.jsx(pe,{ref:t,...o,w:n,miw:i??n,h:r,mih:s??r})});Nl.displayName="@mantine/core/Space";var ewe={root:"m_559cce2d",content:"m_b912df4e",control:"m_b9131032"};const ZYe={maxHeight:100,initialState:!1},eKe=(e,{transitionDuration:t})=>({root:{"--spoiler-transition-duration":t!==void 0?`${t}ms`:void 0}}),yY=Me((e,t)=>{const n=xe("Spoiler",ZYe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,initialState:l,maxHeight:c,hideLabel:f,showLabel:d,children:h,controlRef:p,transitionDuration:m,id:g,...y}=n,v=dt({name:"Spoiler",classes:ewe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:eKe}),b=Ta(g),w=`${b}-region`,[E,T]=I.useState(l),{ref:S,height:C}=PUe(),A=E?f:d,k=A!==null&&c<C;return _.jsxs(pe,{...v("root"),id:b,ref:t,"data-has-spoiler":k||void 0,...y,children:[k&&_.jsx(Mb,{component:"button",type:"button",ref:p,onClick:()=>T(N=>!N),"aria-expanded":E,"aria-controls":w,...v("control"),children:A}),_.jsx("div",{...v("content",{style:{maxHeight:E?C?Te(C):void 0:Te(c)}}),"data-reduce-motion":!0,role:"region",id:w,children:_.jsx("div",{ref:S,children:h})})]})});yY.classes=ewe;yY.displayName="@mantine/core/Spoiler";var twe={root:"m_6d731127"};const tKe={gap:"md",align:"stretch",justify:"flex-start"},nKe=(e,{gap:t,align:n,justify:r})=>({root:{"--stack-gap":as(t),"--stack-align":n,"--stack-justify":r}}),Rf=Me((e,t)=>{const n=xe("Stack",tKe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,align:l,justify:c,gap:f,variant:d,...h}=n,p=dt({name:"Stack",props:n,classes:twe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:nKe});return _.jsx(pe,{ref:t,...p("root"),variant:d,...h})});Rf.classes=twe;Rf.displayName="@mantine/core/Stack";const nwe=I.createContext(null),rKe=nwe.Provider,iKe=()=>I.useContext(nwe),sKe={},vY=Me((e,t)=>{const{value:n,defaultValue:r,onChange:i,size:s,wrapperProps:o,children:a,readOnly:u,...l}=xe("SwitchGroup",sKe,e),[c,f]=Ss({value:n,defaultValue:r,finalValue:[],onChange:i}),d=h=>{const p=h.currentTarget.value;!u&&f(c.includes(p)?c.filter(m=>m!==p):[...c,p])};return _.jsx(rKe,{value:{value:c,onChange:d,size:s},children:_.jsx(mi.Wrapper,{size:s,ref:t,...o,...l,labelElement:"div",__staticSelector:"SwitchGroup",children:_.jsx(jG,{role:"group",children:a})})})});vY.classes=mi.Wrapper.classes;vY.displayName="@mantine/core/SwitchGroup";var rwe={root:"m_5f93f3bb",input:"m_926b4011",track:"m_9307d992",thumb:"m_93039a1d",trackLabel:"m_8277e082"};const oKe={labelPosition:"right"},aKe=(e,{radius:t,color:n,size:r})=>({root:{"--switch-radius":t===void 0?void 0:Ur(t),"--switch-height":tn(r,"switch-height"),"--switch-width":tn(r,"switch-width"),"--switch-thumb-size":tn(r,"switch-thumb-size"),"--switch-label-font-size":tn(r,"switch-label-font-size"),"--switch-track-label-padding":tn(r,"switch-track-label-padding"),"--switch-color":n?$r(n,e):void 0}}),Kw=Me((e,t)=>{const n=xe("Switch",oKe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,color:l,label:c,offLabel:f,onLabel:d,id:h,size:p,radius:m,wrapperProps:g,children:y,thumbIcon:v,checked:b,defaultChecked:w,onChange:E,labelPosition:T,description:S,error:C,disabled:A,variant:k,rootRef:N,mod:O,...P}=n,$=iKe(),F=p||($==null?void 0:$.size),M=dt({name:"Switch",props:n,classes:rwe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:aKe}),{styleProps:B,rest:U}=Db(P),H=Ta(h),D=$?{checked:$.value.includes(U.value),onChange:$.onChange}:{},[z,W]=Ss({value:D.checked??b,defaultValue:w,finalValue:!1});return _.jsxs(NL,{...M("root"),__staticSelector:"Switch",__stylesApiProps:n,id:H,size:F,labelPosition:T,label:c,description:S,error:C,disabled:A,bodyElement:"label",labelElement:"span",classNames:r,styles:o,unstyled:a,"data-checked":D.checked||void 0,variant:k,ref:N,mod:O,...B,...g,children:[_.jsx("input",{...U,disabled:A,checked:z,onChange:j=>{var q;$?(q=D.onChange)==null||q.call(D,j):E==null||E(j),W(j.currentTarget.checked)},id:H,ref:t,type:"checkbox",role:"switch",...M("input")}),_.jsxs(pe,{"aria-hidden":"true",mod:{error:C,"label-position":T},...M("track"),children:[_.jsx(pe,{component:"span",mod:"reduce-motion",...M("thumb"),children:v}),_.jsx("span",{...M("trackLabel"),children:z?d:f})]})]})});Kw.classes={...rwe,...u_e};Kw.displayName="@mantine/core/Switch";Kw.Group=vY;const[uKe,lKe]=fo("Table component was not found in the tree");var mk={table:"m_b23fa0ef",th:"m_4e7aa4f3",tr:"m_4e7aa4fd",td:"m_4e7aa4ef",tbody:"m_b2404537",thead:"m_b242d975",caption:"m_9e5a3ac7",scrollContainer:"m_a100c15",scrollContainerInner:"m_62259741"};function cKe(e,t){if(!t)return;const n={};return t.columnBorder&&e.withColumnBorders&&(n["data-with-column-border"]=!0),t.rowBorder&&e.withRowBorders&&(n["data-with-row-border"]=!0),t.striped&&e.striped&&(n["data-striped"]=e.striped),t.highlightOnHover&&e.highlightOnHover&&(n["data-hover"]=!0),t.captionSide&&e.captionSide&&(n["data-side"]=e.captionSide),t.stickyHeader&&e.stickyHeader&&(n["data-sticky"]=!0),n}function Fb(e,t){const n=`Table${e.charAt(0).toUpperCase()}${e.slice(1)}`,r=Me((i,s)=>{const o=xe(n,{},i),{classNames:a,className:u,style:l,styles:c,...f}=o,d=lKe();return _.jsx(pe,{component:e,ref:s,...cKe(d,t),...d.getStyles(e,{className:u,classNames:a,style:l,styles:c,props:o}),...f})});return r.displayName=`@mantine/core/${n}`,r.classes=mk,r}const n7=Fb("th",{columnBorder:!0}),iwe=Fb("td",{columnBorder:!0}),fP=Fb("tr",{rowBorder:!0,striped:!0,highlightOnHover:!0}),swe=Fb("thead",{stickyHeader:!0}),owe=Fb("tbody"),awe=Fb("tfoot"),uwe=Fb("caption",{captionSide:!0});function bY({data:e}){return _.jsxs(_.Fragment,{children:[e.caption&&_.jsx(uwe,{children:e.caption}),e.head&&_.jsx(swe,{children:_.jsx(fP,{children:e.head.map((t,n)=>_.jsx(n7,{children:t},n))})}),e.body&&_.jsx(owe,{children:e.body.map((t,n)=>_.jsx(fP,{children:t.map((r,i)=>_.jsx(iwe,{children:r},i))},n))}),e.foot&&_.jsx(awe,{children:_.jsx(fP,{children:e.foot.map((t,n)=>_.jsx(n7,{children:t},n))})})]})}bY.displayName="@mantine/core/TableDataRenderer";const fKe={type:"scrollarea"},dKe=(e,{minWidth:t,type:n})=>({scrollContainer:{"--table-min-width":Te(t),"--table-overflow":n==="native"?"auto":void 0}}),_Y=Me((e,t)=>{const n=xe("TableScrollContainer",fKe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,children:l,minWidth:c,type:f,...d}=n,h=dt({name:"TableScrollContainer",classes:mk,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:dKe,rootSelector:"scrollContainer"});return _.jsx(pe,{component:f==="scrollarea"?vm:"div",...f==="scrollarea"?{offsetScrollbars:"x"}:{},ref:t,...h("scrollContainer"),...d,children:_.jsx("div",{...h("scrollContainerInner"),children:l})})});_Y.classes=mk;_Y.displayName="@mantine/core/TableScrollContainer";const hKe={withRowBorders:!0,verticalSpacing:7},pKe=(e,{layout:t,captionSide:n,horizontalSpacing:r,verticalSpacing:i,borderColor:s,stripedColor:o,highlightOnHoverColor:a,striped:u,highlightOnHover:l,stickyHeaderOffset:c,stickyHeader:f})=>({table:{"--table-layout":t,"--table-caption-side":n,"--table-horizontal-spacing":as(r),"--table-vertical-spacing":as(i),"--table-border-color":s?$r(s,e):void 0,"--table-striped-color":u&&o?$r(o,e):void 0,"--table-highlight-on-hover-color":l&&a?$r(a,e):void 0,"--table-sticky-header-offset":f?Te(c):void 0}}),qt=Me((e,t)=>{const n=xe("Table",hKe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,horizontalSpacing:l,verticalSpacing:c,captionSide:f,stripedColor:d,highlightOnHoverColor:h,striped:p,highlightOnHover:m,withColumnBorders:g,withRowBorders:y,withTableBorder:v,borderColor:b,layout:w,variant:E,data:T,children:S,stickyHeader:C,stickyHeaderOffset:A,mod:k,...N}=n,O=dt({name:"Table",props:n,className:i,style:s,classes:mk,classNames:r,styles:o,unstyled:a,rootSelector:"table",vars:u,varsResolver:pKe});return _.jsx(uKe,{value:{getStyles:O,stickyHeader:C,striped:p===!0?"odd":p||void 0,highlightOnHover:m,withColumnBorders:g,withRowBorders:y,captionSide:f||"bottom"},children:_.jsx(pe,{component:"table",variant:E,ref:t,mod:[{"data-with-table-border":v},k],...O("table"),...N,children:S||!!T&&_.jsx(bY,{data:T})})})});qt.classes=mk;qt.displayName="@mantine/core/Table";qt.Td=iwe;qt.Th=n7;qt.Tr=fP;qt.Thead=swe;qt.Tbody=owe;qt.Tfoot=awe;qt.Caption=uwe;qt.ScrollContainer=_Y;qt.DataRenderer=bY;const[mKe,wY]=fo("Tabs component was not found in the tree");var gk={root:"m_89d60db1","list--default":"m_576c9d4",list:"m_89d33d6d",panel:"m_b0c91715",tab:"m_4ec4dce6",tabSection:"m_fc420b1f","tab--default":"m_539e827b","list--outline":"m_6772fbd5","tab--outline":"m_b59ab47c","tab--pills":"m_c3381914"};const gKe={},EY=Me((e,t)=>{const n=xe("TabsList",gKe,e),{children:r,className:i,grow:s,justify:o,classNames:a,styles:u,style:l,mod:c,...f}=n,d=wY();return _.jsx(pe,{...f,...d.getStyles("list",{className:i,style:l,classNames:a,styles:u,props:n,variant:d.variant}),ref:t,role:"tablist",variant:d.variant,mod:[{grow:s,orientation:d.orientation,placement:d.orientation==="vertical"&&d.placement,inverted:d.inverted},c],"aria-orientation":d.orientation,__vars:{"--tabs-justify":o},children:r})});EY.classes=gk;EY.displayName="@mantine/core/TabsList";const yKe={},xY=Me((e,t)=>{const n=xe("TabsPanel",yKe,e),{children:r,className:i,value:s,classNames:o,styles:a,style:u,mod:l,...c}=n,f=wY(),d=f.value===s,h=f.keepMounted||n.keepMounted||d?r:null;return _.jsx(pe,{...c,...f.getStyles("panel",{className:i,classNames:o,styles:a,style:[u,d?void 0:{display:"none"}],props:n}),ref:t,mod:[{orientation:f.orientation},l],role:"tabpanel",id:f.getPanelId(s),"aria-labelledby":f.getTabId(s),children:h})});xY.classes=gk;xY.displayName="@mantine/core/TabsPanel";const vKe={},SY=Me((e,t)=>{const n=xe("TabsTab",vKe,e),{className:r,children:i,rightSection:s,leftSection:o,value:a,onClick:u,onKeyDown:l,disabled:c,color:f,style:d,classNames:h,styles:p,vars:m,mod:g,...y}=n,v=ps(),{dir:b}=Hh(),w=wY(),E=a===w.value,T=C=>{w.onChange(w.allowTabDeactivation&&a===w.value?null:a),u==null||u(C)},S={classNames:h,styles:p,props:n};return _.jsxs(xs,{...y,...w.getStyles("tab",{className:r,style:d,variant:w.variant,...S}),disabled:c,unstyled:w.unstyled,variant:w.variant,mod:[{active:E,disabled:c,orientation:w.orientation,inverted:w.inverted,placement:w.orientation==="vertical"&&w.placement},g],ref:t,role:"tab",id:w.getTabId(a),"aria-selected":E,tabIndex:E||w.value===null?0:-1,"aria-controls":w.getPanelId(a),onClick:T,__vars:{"--tabs-color":f?$r(f,v):void 0},onKeyDown:NW({siblingSelector:'[role="tab"]',parentSelector:'[role="tablist"]',activateOnFocus:w.activateTabWithKeyboard,loop:w.loop,orientation:w.orientation||"horizontal",dir:b,onKeyDown:l}),children:[o&&_.jsx("span",{...w.getStyles("tabSection",S),"data-position":"left",children:o}),i&&_.jsx("span",{...w.getStyles("tabLabel",S),children:i}),s&&_.jsx("span",{...w.getStyles("tabSection",S),"data-position":"right",children:s})]})});SY.classes=gk;SY.displayName="@mantine/core/TabsTab";const nae="Tabs.Tab or Tabs.Panel component was rendered with invalid value or without value",bKe={keepMounted:!0,orientation:"horizontal",loop:!0,activateTabWithKeyboard:!0,allowTabDeactivation:!1,unstyled:!1,inverted:!1,variant:"default",placement:"left"},_Ke=(e,{radius:t,color:n,autoContrast:r})=>({root:{"--tabs-radius":Ur(t),"--tabs-color":$r(n,e),"--tabs-text-color":Yx(r,e)?Ry({color:n,theme:e,autoContrast:r}):void 0}}),ns=Me((e,t)=>{const n=xe("Tabs",bKe,e),{defaultValue:r,value:i,onChange:s,orientation:o,children:a,loop:u,id:l,activateTabWithKeyboard:c,allowTabDeactivation:f,variant:d,color:h,radius:p,inverted:m,placement:g,keepMounted:y,classNames:v,styles:b,unstyled:w,className:E,style:T,vars:S,autoContrast:C,mod:A,...k}=n,N=Ta(l),[O,P]=Ss({value:i,defaultValue:r,finalValue:null,onChange:s}),$=dt({name:"Tabs",props:n,classes:gk,className:E,style:T,classNames:v,styles:b,unstyled:w,vars:S,varsResolver:_Ke});return _.jsx(mKe,{value:{placement:g,value:O,orientation:o,id:N,loop:u,activateTabWithKeyboard:c,getTabId:BO(`${N}-tab`,nae),getPanelId:BO(`${N}-panel`,nae),onChange:P,allowTabDeactivation:f,variant:d,color:h,radius:p,inverted:m,keepMounted:y,unstyled:w,getStyles:$},children:_.jsx(pe,{ref:t,id:N,variant:d,mod:[{orientation:o,inverted:o==="horizontal"&&m,placement:o==="vertical"&&g},A],...$("root"),...k,children:a})})});ns.classes=gk;ns.displayName="@mantine/core/Tabs";ns.Tab=SY;ns.Panel=xY;ns.List=EY;const wKe={},Qg=Me((e,t)=>{const n=xe("TextInput",wKe,e);return _.jsx(qc,{component:"input",ref:t,...n,__staticSelector:"TextInput"})});Qg.classes=qc.classes;Qg.displayName="@mantine/core/TextInput";const EKe=["h1","h2","h3","h4","h5","h6"];function xKe(e,t){const n=t!==void 0?t:`h${e}`;return EKe.includes(n)?{fontSize:`var(--mantine-${n}-font-size)`,fontWeight:`var(--mantine-${n}-font-weight)`,lineHeight:`var(--mantine-${n}-line-height)`}:{fontSize:Te(n),fontWeight:`var(--mantine-h${e}-font-weight)`,lineHeight:`var(--mantine-h${e}-line-height)`}}var lwe={root:"m_8a5d1357"};const SKe={order:1},TKe=(e,{order:t,size:n,lineClamp:r,textWrap:i})=>{const s=xKe(t,n);return{root:{"--title-fw":s.fontWeight,"--title-lh":s.lineHeight,"--title-fz":s.fontSize,"--title-line-clamp":typeof r=="number"?r.toString():void 0,"--title-text-wrap":i}}},ui=Me((e,t)=>{const n=xe("Title",SKe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,order:u,vars:l,size:c,variant:f,lineClamp:d,textWrap:h,mod:p,...m}=n,g=dt({name:"Title",props:n,classes:lwe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:TKe});return[1,2,3,4,5,6].includes(u)?_.jsx(pe,{...g("root"),component:`h${u}`,variant:f,ref:t,mod:[{order:u,"data-line-clamp":typeof d=="number"},p],size:c,...m}):null});ui.classes=lwe;ui.displayName="@mantine/core/Title";function CKe(e){let t=e,n=!1;const r=new Set;return{getState(){return t},updateState(i){t=typeof i=="function"?i(t):i},setState(i){this.updateState(i),r.forEach(s=>s(t))},initialize(i){n||(t=i,n=!0)},subscribe(i){return r.add(i),()=>r.delete(i)}}}function AKe(e){return I.useSyncExternalStore(e.subscribe,()=>e.getState(),()=>e.getState())}function IKe(e,t,n){const r=[],i=[],s={};for(const o of e){const a=o.position||t;s[a]=s[a]||0,s[a]+=1,s[a]<=n?i.push(o):r.push(o)}return{notifications:i,queue:r}}const kKe=()=>CKe({notifications:[],queue:[],defaultPosition:"bottom-right",limit:5}),jb=kKe(),RKe=(e=jb)=>AKe(e);function sS(e,t){const n=e.getState(),r=t([...n.notifications,...n.queue]),i=IKe(r,n.defaultPosition,n.limit);e.setState({notifications:i.notifications,queue:i.queue,limit:n.limit,defaultPosition:n.defaultPosition})}function NKe(e,t=jb){const n=e.id||Ww();return sS(t,r=>e.id&&r.some(i=>i.id===e.id)?r:[...r,{...e,id:n}]),n}function cwe(e,t=jb){return sS(t,n=>n.filter(r=>{var i;return r.id===e?((i=r.onClose)==null||i.call(r,r),!1):!0})),e}function DKe(e,t=jb){return sS(t,n=>n.map(r=>r.id===e.id?{...r,...e}:r)),e.id}function PKe(e=jb){sS(e,()=>[])}function OKe(e=jb){sS(e,t=>t.slice(0,e.getState().limit))}const Bb={show:NKe,hide:cwe,update:DKe,clean:PKe,cleanQueue:OKe,updateState:sS};function r7(e,t){return r7=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},r7(e,t)}function fwe(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,r7(e,t)}var dwe={exports:{}},$Ke="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",MKe=$Ke,LKe=MKe;function hwe(){}function pwe(){}pwe.resetWarningCache=hwe;var FKe=function(){function e(r,i,s,o,a,u){if(u!==LKe){var l=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw l.name="Invariant Violation",l}}e.isRequired=e;function t(){return e}var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:pwe,resetWarningCache:hwe};return n.PropTypes=n,n};dwe.exports=FKe();var jKe=dwe.exports;const rae=Kl(jKe),iae={disabled:!1},QO=_r.createContext(null);var BKe=function(t){return t.scrollTop},v2="unmounted",Tv="exited",Cv="entering",ew="entered",i7="exiting",Xm=function(e){fwe(t,e);function t(r,i){var s;s=e.call(this,r,i)||this;var o=i,a=o&&!o.isMounting?r.enter:r.appear,u;return s.appearStatus=null,r.in?a?(u=Tv,s.appearStatus=Cv):u=ew:r.unmountOnExit||r.mountOnEnter?u=v2:u=Tv,s.state={status:u},s.nextCallback=null,s}t.getDerivedStateFromProps=function(i,s){var o=i.in;return o&&s.status===v2?{status:Tv}:null};var n=t.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(i){var s=null;if(i!==this.props){var o=this.state.status;this.props.in?o!==Cv&&o!==ew&&(s=Cv):(o===Cv||o===ew)&&(s=i7)}this.updateStatus(!1,s)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var i=this.props.timeout,s,o,a;return s=o=a=i,i!=null&&typeof i!="number"&&(s=i.exit,o=i.enter,a=i.appear!==void 0?i.appear:o),{exit:s,enter:o,appear:a}},n.updateStatus=function(i,s){if(i===void 0&&(i=!1),s!==null)if(this.cancelNextCallback(),s===Cv){if(this.props.unmountOnExit||this.props.mountOnEnter){var o=this.props.nodeRef?this.props.nodeRef.current:y2.findDOMNode(this);o&&BKe(o)}this.performEnter(i)}else this.performExit();else this.props.unmountOnExit&&this.state.status===Tv&&this.setState({status:v2})},n.performEnter=function(i){var s=this,o=this.props.enter,a=this.context?this.context.isMounting:i,u=this.props.nodeRef?[a]:[y2.findDOMNode(this),a],l=u[0],c=u[1],f=this.getTimeouts(),d=a?f.appear:f.enter;if(!i&&!o||iae.disabled){this.safeSetState({status:ew},function(){s.props.onEntered(l)});return}this.props.onEnter(l,c),this.safeSetState({status:Cv},function(){s.props.onEntering(l,c),s.onTransitionEnd(d,function(){s.safeSetState({status:ew},function(){s.props.onEntered(l,c)})})})},n.performExit=function(){var i=this,s=this.props.exit,o=this.getTimeouts(),a=this.props.nodeRef?void 0:y2.findDOMNode(this);if(!s||iae.disabled){this.safeSetState({status:Tv},function(){i.props.onExited(a)});return}this.props.onExit(a),this.safeSetState({status:i7},function(){i.props.onExiting(a),i.onTransitionEnd(o.exit,function(){i.safeSetState({status:Tv},function(){i.props.onExited(a)})})})},n.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(i,s){s=this.setNextCallback(s),this.setState(i,s)},n.setNextCallback=function(i){var s=this,o=!0;return this.nextCallback=function(a){o&&(o=!1,s.nextCallback=null,i(a))},this.nextCallback.cancel=function(){o=!1},this.nextCallback},n.onTransitionEnd=function(i,s){this.setNextCallback(s);var o=this.props.nodeRef?this.props.nodeRef.current:y2.findDOMNode(this),a=i==null&&!this.props.addEndListener;if(!o||a){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var u=this.props.nodeRef?[this.nextCallback]:[o,this.nextCallback],l=u[0],c=u[1];this.props.addEndListener(l,c)}i!=null&&setTimeout(this.nextCallback,i)},n.render=function(){var i=this.state.status;if(i===v2)return null;var s=this.props,o=s.children;s.in,s.mountOnEnter,s.unmountOnExit,s.appear,s.enter,s.exit,s.timeout,s.addEndListener,s.onEnter,s.onEntering,s.onEntered,s.onExit,s.onExiting,s.onExited,s.nodeRef;var a=GG(s,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return _r.createElement(QO.Provider,{value:null},typeof o=="function"?o(i,a):_r.cloneElement(_r.Children.only(o),a))},t}(_r.Component);Xm.contextType=QO;Xm.propTypes={};function k_(){}Xm.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:k_,onEntering:k_,onEntered:k_,onExit:k_,onExiting:k_,onExited:k_};Xm.UNMOUNTED=v2;Xm.EXITED=Tv;Xm.ENTERING=Cv;Xm.ENTERED=ew;Xm.EXITING=i7;function UKe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function TY(e,t){var n=function(s){return t&&I.isValidElement(s)?t(s):s},r=Object.create(null);return e&&I.Children.map(e,function(i){return i}).forEach(function(i){r[i.key]=n(i)}),r}function zKe(e,t){e=e||{},t=t||{};function n(c){return c in t?t[c]:e[c]}var r=Object.create(null),i=[];for(var s in e)s in t?i.length&&(r[s]=i,i=[]):i.push(s);var o,a={};for(var u in t){if(r[u])for(o=0;o<r[u].length;o++){var l=r[u][o];a[r[u][o]]=n(l)}a[u]=n(u)}for(o=0;o<i.length;o++)a[i[o]]=n(i[o]);return a}function i1(e,t,n){return n[t]!=null?n[t]:e.props[t]}function VKe(e,t){return TY(e.children,function(n){return I.cloneElement(n,{onExited:t.bind(null,n),in:!0,appear:i1(n,"appear",e),enter:i1(n,"enter",e),exit:i1(n,"exit",e)})})}function HKe(e,t,n){var r=TY(e.children),i=zKe(t,r);return Object.keys(i).forEach(function(s){var o=i[s];if(I.isValidElement(o)){var a=s in t,u=s in r,l=t[s],c=I.isValidElement(l)&&!l.props.in;u&&(!a||c)?i[s]=I.cloneElement(o,{onExited:n.bind(null,o),in:!0,exit:i1(o,"exit",e),enter:i1(o,"enter",e)}):!u&&a&&!c?i[s]=I.cloneElement(o,{in:!1}):u&&a&&I.isValidElement(l)&&(i[s]=I.cloneElement(o,{onExited:n.bind(null,o),in:l.props.in,exit:i1(o,"exit",e),enter:i1(o,"enter",e)}))}}),i}var qKe=Object.values||function(e){return Object.keys(e).map(function(t){return e[t]})},WKe={component:"div",childFactory:function(t){return t}},Ng=function(e){fwe(t,e);function t(r,i){var s;s=e.call(this,r,i)||this;var o=s.handleExited.bind(UKe(s));return s.state={contextValue:{isMounting:!0},handleExited:o,firstRender:!0},s}var n=t.prototype;return n.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},n.componentWillUnmount=function(){this.mounted=!1},t.getDerivedStateFromProps=function(i,s){var o=s.children,a=s.handleExited,u=s.firstRender;return{children:u?VKe(i,a):HKe(i,o,a),firstRender:!1}},n.handleExited=function(i,s){var o=TY(this.props.children);i.key in o||(i.props.onExited&&i.props.onExited(s),this.mounted&&this.setState(function(a){var u=GO({},a.children);return delete u[i.key],{children:u}}))},n.render=function(){var i=this.props,s=i.component,o=i.childFactory,a=GG(i,["component","childFactory"]),u=this.state.contextValue,l=qKe(this.state.children).map(o);return delete a.appear,delete a.enter,delete a.exit,s===null?_r.createElement(QO.Provider,{value:u},l):_r.createElement(QO.Provider,{value:u},_r.createElement(s,a,l))},t}(_r.Component);Ng.propTypes={};Ng.defaultProps=WKe;const mwe=["bottom-center","bottom-left","bottom-right","top-center","top-left","top-right"];function GKe(e,t){return e.reduce((n,r)=>(n[r.position||t].push(r),n),mwe.reduce((n,r)=>(n[r]=[],n),{}))}const sae={left:"translateX(-100%)",right:"translateX(100%)","top-center":"translateY(-100%)","bottom-center":"translateY(100%)"},YKe={left:"translateX(0)",right:"translateX(0)","top-center":"translateY(0)","bottom-center":"translateY(0)"};function KKe({state:e,maxHeight:t,position:n,transitionDuration:r}){const[i,s]=n.split("-"),o=s==="center"?`${i}-center`:s,a={opacity:0,maxHeight:t,transform:sae[o],transitionDuration:`${r}ms, ${r}ms, ${r}ms`,transitionTimingFunction:"cubic-bezier(.51,.3,0,1.21), cubic-bezier(.51,.3,0,1.21), linear",transitionProperty:"opacity, transform, max-height"},u={opacity:1,transform:YKe[o]},l={opacity:0,maxHeight:0,transform:sae[o]};return{...a,...{entering:u,entered:u,exiting:l,exited:l}[e]}}function XKe(e,t){return typeof t=="number"?t:t===!1||e===!1?!1:e}const gwe=I.forwardRef(({data:e,onHide:t,autoClose:n,...r},i)=>{const{autoClose:s,message:o,...a}=e,u=XKe(n,e.autoClose),l=I.useRef(),c=()=>window.clearTimeout(l.current),f=()=>{t(e.id),c()},d=()=>{typeof u=="number"&&(l.current=window.setTimeout(f,u))};return I.useEffect(()=>{var h;(h=e.onOpen)==null||h.call(e,e)},[]),I.useEffect(()=>(d(),c),[u]),_.jsx(sY,{...r,...a,onClose:f,ref:i,onMouseEnter:c,onMouseLeave:d,children:o})});gwe.displayName="@mantine/notifications/NotificationContainer";var ywe={root:"m_b37d9ac7",notification:"m_5ed0edd0"};const QKe=Xm,JKe={position:"bottom-right",autoClose:4e3,transitionDuration:250,containerWidth:440,notificationMaxHeight:200,limit:5,zIndex:Jl("overlay"),store:jb,withinPortal:!0},ZKe=(e,{zIndex:t,containerWidth:n})=>({root:{"--notifications-z-index":t==null?void 0:t.toString(),"--notifications-container-width":Te(n)}}),Qm=Me((e,t)=>{const n=xe("Notifications",JKe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,position:l,autoClose:c,transitionDuration:f,containerWidth:d,notificationMaxHeight:h,limit:p,zIndex:m,store:g,portalProps:y,withinPortal:v,...b}=n,w=ps(),E=RKe(g),T=kUe(),S=_L(),C=I.useRef({}),A=I.useRef(0),N=(w.respectReducedMotion?S:!1)?1:f,O=dt({name:"Notifications",classes:ywe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:ZKe});I.useEffect(()=>{g==null||g.updateState(F=>({...F,limit:p||5,defaultPosition:l}))},[p,l]),Sh(()=>{E.notifications.length>A.current&&setTimeout(()=>T(),0),A.current=E.notifications.length},[E.notifications]);const P=GKe(E.notifications,l),$=mwe.reduce((F,M)=>(F[M]=P[M].map(({style:B,...U})=>_.jsx(QKe,{timeout:N,onEnter:()=>C.current[U.id].offsetHeight,nodeRef:{current:C.current[U.id]},children:H=>_.jsx(gwe,{ref:D=>{C.current[U.id]=D},data:U,onHide:D=>cwe(D,g),autoClose:c,...O("notification",{style:{...KKe({state:H,position:M,transitionDuration:N,maxHeight:h}),...B}})})},U.id)),F),{});return _.jsxs(Qx,{withinPortal:v,...y,children:[_.jsx(pe,{...O("root"),"data-position":"top-center",ref:t,...b,children:_.jsx(Ng,{children:$["top-center"]})}),_.jsx(pe,{...O("root"),"data-position":"top-left",...b,children:_.jsx(Ng,{children:$["top-left"]})}),_.jsx(pe,{...O("root"),"data-position":"top-right",...b,children:_.jsx(Ng,{children:$["top-right"]})}),_.jsx(pe,{...O("root"),"data-position":"bottom-right",...b,children:_.jsx(Ng,{children:$["bottom-right"]})}),_.jsx(pe,{...O("root"),"data-position":"bottom-left",...b,children:_.jsx(Ng,{children:$["bottom-left"]})}),_.jsx(pe,{...O("root"),"data-position":"bottom-center",...b,children:_.jsx(Ng,{children:$["bottom-center"]})})]})});Qm.classes=ywe;Qm.displayName="@mantine/notifications/Notifications";Qm.show=Bb.show;Qm.hide=Bb.hide;Qm.update=Bb.update;Qm.clean=Bb.clean;Qm.cleanQueue=Bb.cleanQueue;Qm.updateState=Bb.updateState;const vwe=I.createContext({storageEngine:void 0,setStorageEngine:()=>{}}),Cs=()=>I.useContext(vwe);function eXe({children:e}){const[t,n]=_r.useState(void 0),r=_r.useMemo(()=>({storageEngine:t,setStorageEngine:n}),[t]);return _.jsx(vwe.Provider,{value:r,children:e})}/**
 * @remix-run/router v1.16.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function DA(){return DA=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},DA.apply(this,arguments)}var Jg;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Jg||(Jg={}));const oae="popstate";function tXe(e){e===void 0&&(e={});function t(r,i){let{pathname:s,search:o,hash:a}=r.location;return s7("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:_we(i)}return rXe(t,n,null,e)}function us(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function bwe(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function nXe(){return Math.random().toString(36).substr(2,8)}function aae(e,t){return{usr:e.state,key:e.key,idx:t}}function s7(e,t,n,r){return n===void 0&&(n=null),DA({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?oS(t):t,{state:n,key:t&&t.key||r||nXe()})}function _we(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function oS(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function rXe(e,t,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=Jg.Pop,u=null,l=c();l==null&&(l=0,o.replaceState(DA({},o.state,{idx:l}),""));function c(){return(o.state||{idx:null}).idx}function f(){a=Jg.Pop;let g=c(),y=g==null?null:g-l;l=g,u&&u({action:a,location:m.location,delta:y})}function d(g,y){a=Jg.Push;let v=s7(m.location,g,y);l=c()+1;let b=aae(v,l),w=m.createHref(v);try{o.pushState(b,"",w)}catch(E){if(E instanceof DOMException&&E.name==="DataCloneError")throw E;i.location.assign(w)}s&&u&&u({action:a,location:m.location,delta:1})}function h(g,y){a=Jg.Replace;let v=s7(m.location,g,y);l=c();let b=aae(v,l),w=m.createHref(v);o.replaceState(b,"",w),s&&u&&u({action:a,location:m.location,delta:0})}function p(g){let y=i.location.origin!=="null"?i.location.origin:i.location.href,v=typeof g=="string"?g:_we(g);return v=v.replace(/ $/,"%20"),us(y,"No window.location.(origin|href) available to create URL for href: "+v),new URL(v,y)}let m={get action(){return a},get location(){return e(i,o)},listen(g){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(oae,f),u=g,()=>{i.removeEventListener(oae,f),u=null}},createHref(g){return t(i,g)},createURL:p,encodeLocation(g){let y=p(g);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:d,replace:h,go(g){return o.go(g)}};return m}var uae;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(uae||(uae={}));function iXe(e,t,n){n===void 0&&(n="/");let r=typeof t=="string"?oS(t):t,i=xwe(r.pathname||"/",n);if(i==null)return null;let s=wwe(e);sXe(s);let o=null;for(let a=0;o==null&&a<s.length;++a){let u=yXe(i);o=pXe(s[a],u)}return o}function wwe(e,t,n,r){t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,a)=>{let u={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};u.relativePath.startsWith("/")&&(us(u.relativePath.startsWith(r),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(r.length));let l=_0([r,u.relativePath]),c=n.concat(u);s.children&&s.children.length>0&&(us(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+l+'".')),wwe(s.children,t,c,l)),!(s.path==null&&!s.index)&&t.push({path:l,score:dXe(l,s.index),routesMeta:c})};return e.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let u of Ewe(s.path))i(s,o,u)}),t}function Ewe(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=Ewe(r.join("/")),a=[];return a.push(...o.map(u=>u===""?s:[s,u].join("/"))),i&&a.push(...o),a.map(u=>e.startsWith("/")&&u===""?"/":u)}function sXe(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:hXe(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const oXe=/^:[\w-]+$/,aXe=3,uXe=2,lXe=1,cXe=10,fXe=-2,lae=e=>e==="*";function dXe(e,t){let n=e.split("/"),r=n.length;return n.some(lae)&&(r+=fXe),t&&(r+=uXe),n.filter(i=>!lae(i)).reduce((i,s)=>i+(oXe.test(s)?aXe:s===""?lXe:cXe),r)}function hXe(e,t){return e.length===t.length&&e.slice(0,-1).every((r,i)=>r===t[i])?e[e.length-1]-t[t.length-1]:0}function pXe(e,t){let{routesMeta:n}=e,r={},i="/",s=[];for(let o=0;o<n.length;++o){let a=n[o],u=o===n.length-1,l=i==="/"?t:t.slice(i.length)||"/",c=mXe({path:a.relativePath,caseSensitive:a.caseSensitive,end:u},l);if(!c)return null;Object.assign(r,c.params);let f=a.route;s.push({params:r,pathname:_0([i,c.pathname]),pathnameBase:wXe(_0([i,c.pathnameBase])),route:f}),c.pathnameBase!=="/"&&(i=_0([i,c.pathnameBase]))}return s}function mXe(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=gXe(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((l,c,f)=>{let{paramName:d,isOptional:h}=c;if(d==="*"){let m=a[f]||"";o=s.slice(0,s.length-m.length).replace(/(.)\/+$/,"$1")}const p=a[f];return h&&!p?l[d]=void 0:l[d]=(p||"").replace(/%2F/g,"/"),l},{}),pathname:s,pathnameBase:o,pattern:e}}function gXe(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),bwe(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,u)=>(r.push({paramName:a,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),i+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":e!==""&&e!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),r]}function yXe(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return bwe(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function xwe(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function vXe(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:i=""}=typeof e=="string"?oS(e):e;return{pathname:n?n.startsWith("/")?n:bXe(n,t):t,search:EXe(r),hash:xXe(i)}}function bXe(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function Hj(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function _Xe(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function CY(e,t){let n=_Xe(e);return t?n.map((r,i)=>i===e.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function AY(e,t,n,r){r===void 0&&(r=!1);let i;typeof e=="string"?i=oS(e):(i=DA({},e),us(!i.pathname||!i.pathname.includes("?"),Hj("?","pathname","search",i)),us(!i.pathname||!i.pathname.includes("#"),Hj("#","pathname","hash",i)),us(!i.search||!i.search.includes("#"),Hj("#","search","hash",i)));let s=e===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=n;else{let f=t.length-1;if(!r&&o.startsWith("..")){let d=o.split("/");for(;d[0]==="..";)d.shift(),f-=1;i.pathname=d.join("/")}a=f>=0?t[f]:"/"}let u=vXe(i,a),l=o&&o!=="/"&&o.endsWith("/"),c=(s||o===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(l||c)&&(u.pathname+="/"),u}const _0=e=>e.join("/").replace(/\/\/+/g,"/"),wXe=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),EXe=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,xXe=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function SXe(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const Swe=["post","put","patch","delete"];new Set(Swe);const TXe=["get",...Swe];new Set(TXe);/**
 * React Router v6.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function PA(){return PA=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},PA.apply(this,arguments)}const IY=I.createContext(null),CXe=I.createContext(null),Ub=I.createContext(null),r6=I.createContext(null),Wh=I.createContext({outlet:null,matches:[],isDataRoute:!1}),Twe=I.createContext(null);function Cwe(e,t){let{relative:n}={};aS()||us(!1);let{basename:r,navigator:i}=I.useContext(Ub),{hash:s,pathname:o,search:a}=RXe(e,{relative:n}),u=o;return r!=="/"&&(u=o==="/"?r:_0([r,o])),i.createHref({pathname:u,search:a,hash:s})}function aS(){return I.useContext(r6)!=null}function Py(){return aS()||us(!1),I.useContext(r6).location}function Awe(e){I.useContext(Ub).static||I.useLayoutEffect(e)}function Gh(){let{isDataRoute:e}=I.useContext(Wh);return e?UXe():AXe()}function AXe(){aS()||us(!1);let e=I.useContext(IY),{basename:t,future:n,navigator:r}=I.useContext(Ub),{matches:i}=I.useContext(Wh),{pathname:s}=Py(),o=JSON.stringify(CY(i,n.v7_relativeSplatPath)),a=I.useRef(!1);return Awe(()=>{a.current=!0}),I.useCallback(function(l,c){if(c===void 0&&(c={}),!a.current)return;if(typeof l=="number"){r.go(l);return}let f=AY(l,JSON.parse(o),s,c.relative==="path");e==null&&t!=="/"&&(f.pathname=f.pathname==="/"?t:_0([t,f.pathname])),(c.replace?r.replace:r.push)(f,c.state,c)},[t,r,o,s,e])}const IXe=I.createContext(null);function kXe(e){let t=I.useContext(Wh).outlet;return t&&I.createElement(IXe.Provider,{value:e},t)}function wm(){let{matches:e}=I.useContext(Wh),t=e[e.length-1];return t?t.params:{}}function RXe(e,t){let{relative:n}=t===void 0?{}:t,{future:r}=I.useContext(Ub),{matches:i}=I.useContext(Wh),{pathname:s}=Py(),o=JSON.stringify(CY(i,r.v7_relativeSplatPath));return I.useMemo(()=>AY(e,JSON.parse(o),s,n==="path"),[e,o,s,n])}function Iwe(e,t){return NXe(e,t)}function NXe(e,t,n,r){aS()||us(!1);let{navigator:i}=I.useContext(Ub),{matches:s}=I.useContext(Wh),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let u=o?o.pathnameBase:"/";o&&o.route;let l=Py(),c;if(t){var f;let g=typeof t=="string"?oS(t):t;u==="/"||(f=g.pathname)!=null&&f.startsWith(u)||us(!1),c=g}else c=l;let d=c.pathname||"/",h=d;if(u!=="/"){let g=u.replace(/^\//,"").split("/");h="/"+d.replace(/^\//,"").split("/").slice(g.length).join("/")}let p=iXe(e,{pathname:h}),m=MXe(p&&p.map(g=>Object.assign({},g,{params:Object.assign({},a,g.params),pathname:_0([u,i.encodeLocation?i.encodeLocation(g.pathname).pathname:g.pathname]),pathnameBase:g.pathnameBase==="/"?u:_0([u,i.encodeLocation?i.encodeLocation(g.pathnameBase).pathname:g.pathnameBase])})),s,n,r);return t&&m?I.createElement(r6.Provider,{value:{location:PA({pathname:"/",search:"",hash:"",state:null,key:"default"},c),navigationType:Jg.Pop}},m):m}function DXe(){let e=BXe(),t=SXe(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return I.createElement(I.Fragment,null,I.createElement("h2",null,"Unexpected Application Error!"),I.createElement("h3",{style:{fontStyle:"italic"}},t),n?I.createElement("pre",{style:i},n):null,null)}const PXe=I.createElement(DXe,null);class OXe extends I.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?I.createElement(Wh.Provider,{value:this.props.routeContext},I.createElement(Twe.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function $Xe(e){let{routeContext:t,match:n,children:r}=e,i=I.useContext(IY);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),I.createElement(Wh.Provider,{value:t},r)}function MXe(e,t,n,r){var i;if(t===void 0&&(t=[]),n===void 0&&(n=null),r===void 0&&(r=null),e==null){var s;if((s=n)!=null&&s.errors)e=n.matches;else return null}let o=e,a=(i=n)==null?void 0:i.errors;if(a!=null){let c=o.findIndex(f=>f.route.id&&(a==null?void 0:a[f.route.id])!==void 0);c>=0||us(!1),o=o.slice(0,Math.min(o.length,c+1))}let u=!1,l=-1;if(n&&r&&r.v7_partialHydration)for(let c=0;c<o.length;c++){let f=o[c];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(l=c),f.route.id){let{loaderData:d,errors:h}=n,p=f.route.loader&&d[f.route.id]===void 0&&(!h||h[f.route.id]===void 0);if(f.route.lazy||p){u=!0,l>=0?o=o.slice(0,l+1):o=[o[0]];break}}}return o.reduceRight((c,f,d)=>{let h,p=!1,m=null,g=null;n&&(h=a&&f.route.id?a[f.route.id]:void 0,m=f.route.errorElement||PXe,u&&(l<0&&d===0?(p=!0,g=null):l===d&&(p=!0,g=f.route.hydrateFallbackElement||null)));let y=t.concat(o.slice(0,d+1)),v=()=>{let b;return h?b=m:p?b=g:f.route.Component?b=I.createElement(f.route.Component,null):f.route.element?b=f.route.element:b=c,I.createElement($Xe,{match:f,routeContext:{outlet:c,matches:y,isDataRoute:n!=null},children:b})};return n&&(f.route.ErrorBoundary||f.route.errorElement||d===0)?I.createElement(OXe,{location:n.location,revalidation:n.revalidation,component:m,error:h,children:v(),routeContext:{outlet:null,matches:y,isDataRoute:!0}}):v()},null)}var kwe=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(kwe||{}),JO=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(JO||{});function LXe(e){let t=I.useContext(IY);return t||us(!1),t}function FXe(e){let t=I.useContext(CXe);return t||us(!1),t}function jXe(e){let t=I.useContext(Wh);return t||us(!1),t}function Rwe(e){let t=jXe(),n=t.matches[t.matches.length-1];return n.route.id||us(!1),n.route.id}function BXe(){var e;let t=I.useContext(Twe),n=FXe(JO.UseRouteError),r=Rwe(JO.UseRouteError);return t!==void 0?t:(e=n.errors)==null?void 0:e[r]}function UXe(){let{router:e}=LXe(kwe.UseNavigateStable),t=Rwe(JO.UseNavigateStable),n=I.useRef(!1);return Awe(()=>{n.current=!0}),I.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?e.navigate(i):e.navigate(i,PA({fromRouteId:t},s)))},[e,t])}function kY(e){let{to:t,replace:n,state:r,relative:i}=e;aS()||us(!1);let{future:s,static:o}=I.useContext(Ub),{matches:a}=I.useContext(Wh),{pathname:u}=Py(),l=Gh(),c=AY(t,CY(a,s.v7_relativeSplatPath),u,i==="path"),f=JSON.stringify(c);return I.useEffect(()=>l(JSON.parse(f),{replace:n,state:r,relative:i}),[l,f,i,n,r]),null}function zXe(e){return kXe(e.context)}function Tp(e){us(!1)}function VXe(e){let{basename:t="/",children:n=null,location:r,navigationType:i=Jg.Pop,navigator:s,static:o=!1,future:a}=e;aS()&&us(!1);let u=t.replace(/^\/*/,"/"),l=I.useMemo(()=>({basename:u,navigator:s,static:o,future:PA({v7_relativeSplatPath:!1},a)}),[u,a,s,o]);typeof r=="string"&&(r=oS(r));let{pathname:c="/",search:f="",hash:d="",state:h=null,key:p="default"}=r,m=I.useMemo(()=>{let g=xwe(c,u);return g==null?null:{location:{pathname:g,search:f,hash:d,state:h,key:p},navigationType:i}},[u,c,f,d,h,p,i]);return m==null?null:I.createElement(Ub.Provider,{value:l},I.createElement(r6.Provider,{children:n,value:m}))}function HXe(e){let{children:t,location:n}=e;return Iwe(o7(t),n)}new Promise(()=>{});function o7(e,t){t===void 0&&(t=[]);let n=[];return I.Children.forEach(e,(r,i)=>{if(!I.isValidElement(r))return;let s=[...t,i];if(r.type===I.Fragment){n.push.apply(n,o7(r.props.children,s));return}r.type!==Tp&&us(!1),!r.props.index||!r.props.children||us(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=o7(r.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function a7(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,n)=>{let r=e[n];return t.concat(Array.isArray(r)?r.map(i=>[n,i]):[[n,r]])},[]))}function qXe(e,t){let n=a7(e);return t&&t.forEach((r,i)=>{n.has(i)||t.getAll(i).forEach(s=>{n.append(i,s)})}),n}const WXe="6";try{window.__reactRouterVersion=WXe}catch{}const GXe="startTransition",cae=pO[GXe];function YXe(e){let{basename:t,children:n,future:r,window:i}=e,s=I.useRef();s.current==null&&(s.current=tXe({window:i,v5Compat:!0}));let o=s.current,[a,u]=I.useState({action:o.action,location:o.location}),{v7_startTransition:l}=r||{},c=I.useCallback(f=>{l&&cae?cae(()=>u(f)):u(f)},[u,l]);return I.useLayoutEffect(()=>o.listen(c),[o,c]),I.createElement(VXe,{basename:t,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}var fae;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(fae||(fae={}));var dae;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(dae||(dae={}));function RY(e){let t=I.useRef(a7(e)),n=I.useRef(!1),r=Py(),i=I.useMemo(()=>qXe(r.search,n.current?null:t.current),[r.search]),s=Gh(),o=I.useCallback((a,u)=>{const l=a7(typeof a=="function"?a(i):a);n.current=!0,s("?"+l,u)},[s,i]);return[i,o]}const NY=I.createContext(null);NY.displayName="@mantine/modals/ModalsContext";function KXe(){const e=I.useContext(NY);if(!e)throw new Error("[@mantine/modals] useModals hook was called outside of context, wrap your app with ModalsProvider component");return e}function XXe({id:e,cancelProps:t,confirmProps:n,labels:r={cancel:"",confirm:""},closeOnConfirm:i=!0,closeOnCancel:s=!0,groupProps:o,onCancel:a,onConfirm:u,children:l}){const{cancel:c,confirm:f}=r,d=KXe(),h=m=>{typeof(t==null?void 0:t.onClick)=="function"&&(t==null||t.onClick(m)),typeof a=="function"&&a(),s&&d.closeModal(e)},p=m=>{typeof(n==null?void 0:n.onClick)=="function"&&(n==null||n.onClick(m)),typeof u=="function"&&u(),i&&d.closeModal(e)};return _.jsxs(_.Fragment,{children:[l&&_.jsx(pe,{mb:"md",children:l}),_.jsxs(ls,{justify:"flex-end",...o,children:[_.jsx(fn,{variant:"default",...t,onClick:h,children:(t==null?void 0:t.children)||c}),_.jsx(fn,{...n,onClick:p,children:(n==null?void 0:n.children)||f})]})]})}const[QXe,i6]=zUe("mantine-modals");i6("openModal");i6("closeModal");i6("closeAllModals");const u7=i6("openConfirmModal");function hae(e,t){var n,r,i,s;t&&e.type==="confirm"&&((r=(n=e.props).onCancel)==null||r.call(n)),(s=(i=e.props).onClose)==null||s.call(i)}function JXe(e,t){switch(t.type){case"OPEN":return{current:t.modal,modals:[...e.modals,t.modal]};case"CLOSE":{const n=e.modals.find(i=>i.id===t.modalId);if(!n)return e;hae(n,t.canceled);const r=e.modals.filter(i=>i.id!==t.modalId);return{current:r[r.length-1]||e.current,modals:r}}case"CLOSE_ALL":return e.modals.length?(e.modals.concat().reverse().forEach(n=>{hae(n,t.canceled)}),{current:e.current,modals:[]}):e;default:return e}}function ZXe(e){if(!e)return{confirmProps:{},modalProps:{}};const{id:t,children:n,onCancel:r,onConfirm:i,closeOnConfirm:s,closeOnCancel:o,cancelProps:a,confirmProps:u,groupProps:l,labels:c,...f}=e;return{confirmProps:{id:t,children:n,onCancel:r,onConfirm:i,closeOnConfirm:s,closeOnCancel:o,cancelProps:a,confirmProps:u,groupProps:l,labels:c},modalProps:{id:t,...f}}}function eQe({children:e,modalProps:t,labels:n,modals:r}){const[i,s]=I.useReducer(JXe,{modals:[],current:null}),o=I.useRef(i);o.current=i;const a=I.useCallback(g=>{s({type:"CLOSE_ALL",canceled:g})},[o,s]),u=I.useCallback(({modalId:g,...y})=>{const v=g||Ww();return s({type:"OPEN",modal:{id:v,type:"content",props:y}}),v},[s]),l=I.useCallback(({modalId:g,...y})=>{const v=g||Ww();return s({type:"OPEN",modal:{id:v,type:"confirm",props:y}}),v},[s]),c=I.useCallback((g,{modalId:y,...v})=>{const b=y||Ww();return s({type:"OPEN",modal:{id:b,type:"context",props:v,ctx:g}}),b},[s]),f=I.useCallback((g,y)=>{s({type:"CLOSE",modalId:g,canceled:y})},[o,s]);QXe({openModal:u,openConfirmModal:l,openContextModal:({modal:g,...y})=>c(g,y),closeModal:f,closeContextModal:f,closeAllModals:a});const d={modals:i.modals,openModal:u,openConfirmModal:l,openContextModal:c,closeModal:f,closeContextModal:f,closeAll:a},h=()=>{const g=o.current.current;switch(g==null?void 0:g.type){case"context":{const{innerProps:y,...v}=g.props,b=r[g.ctx];return{modalProps:v,content:_.jsx(b,{innerProps:y,context:d,id:g.id})}}case"confirm":{const{modalProps:y,confirmProps:v}=ZXe(g.props);return{modalProps:y,content:_.jsx(XXe,{...v,id:g.id,labels:g.props.labels||n})}}case"content":{const{children:y,...v}=g.props;return{modalProps:v,content:_.jsx(_.Fragment,{children:y})}}default:return{modalProps:{},content:null}}},{modalProps:p,content:m}=h();return _.jsxs(NY.Provider,{value:d,children:[_.jsx(Yi,{zIndex:Jl("modal")+1,...t,...p,opened:i.modals.length>0,onClose:()=>{var g;return f((g=i.current)==null?void 0:g.id)},children:m}),e]})}/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var tQe={outline:{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"},filled:{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"currentColor",stroke:"none"}};/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tn=(e,t,n,r)=>{const i=I.forwardRef(({color:s="currentColor",size:o=24,stroke:a=2,className:u,children:l,...c},f)=>I.createElement("svg",{ref:f,...tQe[e],width:o,height:o,className:["tabler-icon",`tabler-icon-${t}`,u].join(" "),...e==="filled"?{fill:s}:{strokeWidth:a,stroke:s},...c},[...r.map(([d,h])=>I.createElement(d,h)),...Array.isArray(l)?l:[l]]));return i.displayName=`${n}`,i};/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var nQe=Tn("outline","adjustments-horizontal","IconAdjustmentsHorizontal",[["path",{d:"M14 6m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0",key:"svg-0"}],["path",{d:"M4 6l8 0",key:"svg-1"}],["path",{d:"M16 6l4 0",key:"svg-2"}],["path",{d:"M8 12m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0",key:"svg-3"}],["path",{d:"M4 12l2 0",key:"svg-4"}],["path",{d:"M10 12l10 0",key:"svg-5"}],["path",{d:"M17 18m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0",key:"svg-6"}],["path",{d:"M4 18l11 0",key:"svg-7"}],["path",{d:"M19 18l1 0",key:"svg-8"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var rQe=Tn("outline","alert-circle","IconAlertCircle",[["path",{d:"M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0",key:"svg-0"}],["path",{d:"M12 8v4",key:"svg-1"}],["path",{d:"M12 16h.01",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var pae=Tn("outline","alert-triangle","IconAlertTriangle",[["path",{d:"M12 9v4",key:"svg-0"}],["path",{d:"M10.363 3.591l-8.106 13.534a1.914 1.914 0 0 0 1.636 2.871h16.214a1.914 1.914 0 0 0 1.636 -2.87l-8.106 -13.536a1.914 1.914 0 0 0 -3.274 0z",key:"svg-1"}],["path",{d:"M12 16h.01",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var iQe=Tn("outline","arrows-shuffle","IconArrowsShuffle",[["path",{d:"M18 4l3 3l-3 3",key:"svg-0"}],["path",{d:"M18 20l3 -3l-3 -3",key:"svg-1"}],["path",{d:"M3 7h3a5 5 0 0 1 5 5a5 5 0 0 0 5 5h5",key:"svg-2"}],["path",{d:"M21 7h-5a4.978 4.978 0 0 0 -3 1m-4 8a4.984 4.984 0 0 1 -3 1h-3",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var sQe=Tn("outline","at","IconAt",[["path",{d:"M12 12m-4 0a4 4 0 1 0 8 0a4 4 0 1 0 -8 0",key:"svg-0"}],["path",{d:"M16 12v1.5a2.5 2.5 0 0 0 5 0v-1.5a9 9 0 1 0 -5.5 8.28",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var oQe=Tn("outline","brain","IconBrain",[["path",{d:"M15.5 13a3.5 3.5 0 0 0 -3.5 3.5v1a3.5 3.5 0 0 0 7 0v-1.8",key:"svg-0"}],["path",{d:"M8.5 13a3.5 3.5 0 0 1 3.5 3.5v1a3.5 3.5 0 0 1 -7 0v-1.8",key:"svg-1"}],["path",{d:"M17.5 16a3.5 3.5 0 0 0 0 -7h-.5",key:"svg-2"}],["path",{d:"M19 9.3v-2.8a3.5 3.5 0 0 0 -7 0",key:"svg-3"}],["path",{d:"M6.5 16a3.5 3.5 0 0 1 0 -7h.5",key:"svg-4"}],["path",{d:"M5 9.3v-2.8a3.5 3.5 0 0 1 7 0v10",key:"svg-5"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var aQe=Tn("outline","bubble-text","IconBubbleText",[["path",{d:"M7 10h10",key:"svg-0"}],["path",{d:"M9 14h5",key:"svg-1"}],["path",{d:"M12.4 3a5.34 5.34 0 0 1 4.906 3.239a5.333 5.333 0 0 1 -1.195 10.6a4.26 4.26 0 0 1 -5.28 1.863l-3.831 2.298v-3.134a2.668 2.668 0 0 1 -1.795 -3.773a4.8 4.8 0 0 1 2.908 -8.933a5.33 5.33 0 0 1 4.287 -2.16",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var uQe=Tn("outline","chart-bar","IconChartBar",[["path",{d:"M3 13a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v6a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z",key:"svg-0"}],["path",{d:"M15 9a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v10a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z",key:"svg-1"}],["path",{d:"M9 5a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v14a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z",key:"svg-2"}],["path",{d:"M4 20h14",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var lQe=Tn("outline","chart-donut-2","IconChartDonut2",[["path",{d:"M12 3v5m4 4h5",key:"svg-0"}],["path",{d:"M12 12m-4 0a4 4 0 1 0 8 0a4 4 0 1 0 -8 0",key:"svg-1"}],["path",{d:"M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var cQe=Tn("outline","chart-histogram","IconChartHistogram",[["path",{d:"M3 3v18h18",key:"svg-0"}],["path",{d:"M20 18v3",key:"svg-1"}],["path",{d:"M16 16v5",key:"svg-2"}],["path",{d:"M12 13v8",key:"svg-3"}],["path",{d:"M8 16v5",key:"svg-4"}],["path",{d:"M3 11c6 0 5 -5 9 -5s3 5 9 5",key:"svg-5"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Nwe=Tn("outline","check","IconCheck",[["path",{d:"M5 12l5 5l10 -10",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var fQe=Tn("outline","chevron-down","IconChevronDown",[["path",{d:"M6 9l6 6l6 -6",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var mae=Tn("outline","circle-check","IconCircleCheck",[["path",{d:"M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0",key:"svg-0"}],["path",{d:"M9 12l2 2l4 -4",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var dQe=Tn("outline","code-plus","IconCodePlus",[["path",{d:"M9 12h6",key:"svg-0"}],["path",{d:"M12 9v6",key:"svg-1"}],["path",{d:"M6 19a2 2 0 0 1 -2 -2v-4l-1 -1l1 -1v-4a2 2 0 0 1 2 -2",key:"svg-2"}],["path",{d:"M18 19a2 2 0 0 0 2 -2v-4l1 -1l-1 -1v-4a2 2 0 0 0 -2 -2",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var hQe=Tn("outline","database-export","IconDatabaseExport",[["path",{d:"M4 6c0 1.657 3.582 3 8 3s8 -1.343 8 -3s-3.582 -3 -8 -3s-8 1.343 -8 3",key:"svg-0"}],["path",{d:"M4 6v6c0 1.657 3.582 3 8 3c1.118 0 2.183 -.086 3.15 -.241",key:"svg-1"}],["path",{d:"M20 12v-6",key:"svg-2"}],["path",{d:"M4 12v6c0 1.657 3.582 3 8 3c.157 0 .312 -.002 .466 -.005",key:"svg-3"}],["path",{d:"M16 19h6",key:"svg-4"}],["path",{d:"M19 16l3 3l-3 3",key:"svg-5"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var pQe=Tn("outline","dots-vertical","IconDotsVertical",[["path",{d:"M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-0"}],["path",{d:"M12 19m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-1"}],["path",{d:"M12 5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var mQe=Tn("outline","dots","IconDots",[["path",{d:"M5 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-0"}],["path",{d:"M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-1"}],["path",{d:"M19 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var gQe=Tn("outline","external-link","IconExternalLink",[["path",{d:"M12 6h-6a2 2 0 0 0 -2 2v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-6",key:"svg-0"}],["path",{d:"M11 13l9 -9",key:"svg-1"}],["path",{d:"M15 4h5v5",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var yQe=Tn("outline","file-lambda","IconFileLambda",[["path",{d:"M14 3v4a1 1 0 0 0 1 1h4",key:"svg-0"}],["path",{d:"M17 21h-10a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2z",key:"svg-1"}],["path",{d:"M10 17l2 -3",key:"svg-2"}],["path",{d:"M15 17c-2.5 0 -2.5 -6 -5 -6",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var vQe=Tn("outline","html","IconHtml",[["path",{d:"M13 16v-8l2 5l2 -5v8",key:"svg-0"}],["path",{d:"M1 16v-8",key:"svg-1"}],["path",{d:"M5 8v8",key:"svg-2"}],["path",{d:"M1 12h4",key:"svg-3"}],["path",{d:"M7 8h4",key:"svg-4"}],["path",{d:"M9 8v8",key:"svg-5"}],["path",{d:"M20 8v8h3",key:"svg-6"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Dwe=Tn("outline","info-circle","IconInfoCircle",[["path",{d:"M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0",key:"svg-0"}],["path",{d:"M12 9h.01",key:"svg-1"}],["path",{d:"M11 12h1v4h1",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var bQe=Tn("outline","layout-columns","IconLayoutColumns",[["path",{d:"M4 4m0 2a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v12a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2z",key:"svg-0"}],["path",{d:"M12 4l0 16",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var _Qe=Tn("outline","mail","IconMail",[["path",{d:"M3 7a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v10a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2v-10z",key:"svg-0"}],["path",{d:"M3 7l9 6l9 -6",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var wQe=Tn("outline","number-123","IconNumber123",[["path",{d:"M3 10l2 -2v8",key:"svg-0"}],["path",{d:"M9 8h3a1 1 0 0 1 1 1v2a1 1 0 0 1 -1 1h-2a1 1 0 0 0 -1 1v2a1 1 0 0 0 1 1h3",key:"svg-1"}],["path",{d:"M17 8h2.5a1.5 1.5 0 0 1 1.5 1.5v1a1.5 1.5 0 0 1 -1.5 1.5h-1.5h1.5a1.5 1.5 0 0 1 1.5 1.5v1a1.5 1.5 0 0 1 -1.5 1.5h-2.5",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var EQe=Tn("outline","pencil","IconPencil",[["path",{d:"M4 20h4l10.5 -10.5a2.828 2.828 0 1 0 -4 -4l-10.5 10.5v4",key:"svg-0"}],["path",{d:"M13.5 6.5l4 4",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var xQe=Tn("outline","player-play","IconPlayerPlay",[["path",{d:"M7 4v16l13 -8z",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Pwe=Tn("outline","progress","IconProgress",[["path",{d:"M10 20.777a8.942 8.942 0 0 1 -2.48 -.969",key:"svg-0"}],["path",{d:"M14 3.223a9.003 9.003 0 0 1 0 17.554",key:"svg-1"}],["path",{d:"M4.579 17.093a8.961 8.961 0 0 1 -1.227 -2.592",key:"svg-2"}],["path",{d:"M3.124 10.5c.16 -.95 .468 -1.85 .9 -2.675l.169 -.305",key:"svg-3"}],["path",{d:"M6.907 4.579a8.954 8.954 0 0 1 3.093 -1.356",key:"svg-4"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var SQe=Tn("outline","radio","IconRadio",[["path",{d:"M14 3l-9.371 3.749a1 1 0 0 0 -.629 .928v11.323a1 1 0 0 0 1 1h14a1 1 0 0 0 1 -1v-11a1 1 0 0 0 -1 -1h-14.5",key:"svg-0"}],["path",{d:"M4 12h16",key:"svg-1"}],["path",{d:"M7 12v-2",key:"svg-2"}],["path",{d:"M17 16v.01",key:"svg-3"}],["path",{d:"M13 16v.01",key:"svg-4"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var TQe=Tn("outline","refresh","IconRefresh",[["path",{d:"M20 11a8.1 8.1 0 0 0 -15.5 -2m-.5 -4v4h4",key:"svg-0"}],["path",{d:"M4 13a8.1 8.1 0 0 0 15.5 2m.5 4v-4h-4",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var CQe=Tn("outline","schema","IconSchema",[["path",{d:"M5 2h5v4h-5z",key:"svg-0"}],["path",{d:"M15 10h5v4h-5z",key:"svg-1"}],["path",{d:"M5 18h5v4h-5z",key:"svg-2"}],["path",{d:"M5 10h5v4h-5z",key:"svg-3"}],["path",{d:"M10 12h5",key:"svg-4"}],["path",{d:"M7.5 6v4",key:"svg-5"}],["path",{d:"M7.5 14v4",key:"svg-6"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var AQe=Tn("outline","search","IconSearch",[["path",{d:"M10 10m-7 0a7 7 0 1 0 14 0a7 7 0 1 0 -14 0",key:"svg-0"}],["path",{d:"M21 21l-6 -6",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var IQe=Tn("outline","select","IconSelect",[["path",{d:"M3 3m0 2a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v14a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2z",key:"svg-0"}],["path",{d:"M9 11l3 3l3 -3",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Owe=Tn("outline","settings","IconSettings",[["path",{d:"M10.325 4.317c.426 -1.756 2.924 -1.756 3.35 0a1.724 1.724 0 0 0 2.573 1.066c1.543 -.94 3.31 .826 2.37 2.37a1.724 1.724 0 0 0 1.065 2.572c1.756 .426 1.756 2.924 0 3.35a1.724 1.724 0 0 0 -1.066 2.573c.94 1.543 -.826 3.31 -2.37 2.37a1.724 1.724 0 0 0 -2.572 1.065c-.426 1.756 -2.924 1.756 -3.35 0a1.724 1.724 0 0 0 -2.573 -1.066c-1.543 .94 -3.31 -.826 -2.37 -2.37a1.724 1.724 0 0 0 -1.065 -2.572c-1.756 -.426 -1.756 -2.924 0 -3.35a1.724 1.724 0 0 0 1.066 -2.573c-.94 -1.543 .826 -3.31 2.37 -2.37c1 .608 2.296 .07 2.572 -1.065z",key:"svg-0"}],["path",{d:"M9 12a3 3 0 1 0 6 0a3 3 0 0 0 -6 0",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var kQe=Tn("outline","squares","IconSquares",[["path",{d:"M8 10a2 2 0 0 1 2 -2h9a2 2 0 0 1 2 2v9a2 2 0 0 1 -2 2h-9a2 2 0 0 1 -2 -2z",key:"svg-0"}],["path",{d:"M16 8v-3a2 2 0 0 0 -2 -2h-9a2 2 0 0 0 -2 2v9a2 2 0 0 0 2 2h3",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var $we=Tn("outline","table-export","IconTableExport",[["path",{d:"M12.5 21h-7.5a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v7.5",key:"svg-0"}],["path",{d:"M3 10h18",key:"svg-1"}],["path",{d:"M10 3v18",key:"svg-2"}],["path",{d:"M16 19h6",key:"svg-3"}],["path",{d:"M19 16l3 3l-3 3",key:"svg-4"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var RQe=Tn("outline","table","IconTable",[["path",{d:"M3 5a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v14a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2v-14z",key:"svg-0"}],["path",{d:"M3 10h18",key:"svg-1"}],["path",{d:"M10 3v18",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Mwe=Tn("outline","trash-x","IconTrashX",[["path",{d:"M4 7h16",key:"svg-0"}],["path",{d:"M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12",key:"svg-1"}],["path",{d:"M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3",key:"svg-2"}],["path",{d:"M10 12l4 4m0 -4l-4 4",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var DY=Tn("outline","user-plus","IconUserPlus",[["path",{d:"M8 7a4 4 0 1 0 8 0a4 4 0 0 0 -8 0",key:"svg-0"}],["path",{d:"M16 19h6",key:"svg-1"}],["path",{d:"M19 16v6",key:"svg-2"}],["path",{d:"M6 21v-2a4 4 0 0 1 4 -4h4",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var PY=Tn("outline","x","IconX",[["path",{d:"M18 6l-12 12",key:"svg-0"}],["path",{d:"M6 6l12 12",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var NQe=Tn("filled","brand-google-filled","IconBrandGoogleFilled",[["path",{d:"M12 2a9.96 9.96 0 0 1 6.29 2.226a1 1 0 0 1 .04 1.52l-1.51 1.362a1 1 0 0 1 -1.265 .06a6 6 0 1 0 2.103 6.836l.001 -.004h-3.66a1 1 0 0 1 -.992 -.883l-.007 -.117v-2a1 1 0 0 1 1 -1h6.945a1 1 0 0 1 .994 .89c.04 .367 .061 .737 .061 1.11c0 5.523 -4.477 10 -10 10s-10 -4.477 -10 -10s4.477 -10 10 -10z",key:"svg-0"}]]);function Lwe(e){const t=e.split("/")||[];return t[t.length-1].replace(/\.[^\.]+$/,"").replace(".","_").replace(" ","_").replace("/","_")}const Vu="/study/";function gae(e){const t=[],n=String(e||"");let r=n.indexOf(","),i=0,s=!1;for(;!s;){r===-1&&(r=n.length,s=!0);const o=n.slice(i,r).trim();(o||!s)&&t.push(o),i=r+1,r=n.indexOf(",",i)}return t}function Fwe(e,t){const n={};return(e[e.length-1]===""?[...e,""]:e).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}const DQe=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,PQe=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,OQe={};function yae(e,t){return(OQe.jsx?PQe:DQe).test(e)}const $Qe=/[ \t\n\f\r]/g;function MQe(e){return typeof e=="object"?e.type==="text"?vae(e.value):!1:vae(e)}function vae(e){return e.replace($Qe,"")===""}let yk=class{constructor(t,n,r){this.property=t,this.normal=n,r&&(this.space=r)}};yk.prototype.property={};yk.prototype.normal={};yk.prototype.space=null;function jwe(e,t){const n={},r={};let i=-1;for(;++i<e.length;)Object.assign(n,e[i].property),Object.assign(r,e[i].normal);return new yk(n,r,t)}function OA(e){return e.toLowerCase()}let Gc=class{constructor(t,n){this.property=t,this.attribute=n}};Gc.prototype.space=null;Gc.prototype.boolean=!1;Gc.prototype.booleanish=!1;Gc.prototype.overloadedBoolean=!1;Gc.prototype.number=!1;Gc.prototype.commaSeparated=!1;Gc.prototype.spaceSeparated=!1;Gc.prototype.commaOrSpaceSeparated=!1;Gc.prototype.mustUseProperty=!1;Gc.prototype.defined=!1;let LQe=0;const yn=zb(),bs=zb(),Bwe=zb(),nt=zb(),ei=zb(),Xw=zb(),dl=zb();function zb(){return 2**++LQe}const l7=Object.freeze(Object.defineProperty({__proto__:null,boolean:yn,booleanish:bs,commaOrSpaceSeparated:dl,commaSeparated:Xw,number:nt,overloadedBoolean:Bwe,spaceSeparated:ei},Symbol.toStringTag,{value:"Module"})),qj=Object.keys(l7);class OY extends Gc{constructor(t,n,r,i){let s=-1;if(super(t,n),bae(this,"space",i),typeof r=="number")for(;++s<qj.length;){const o=qj[s];bae(this,qj[s],(r&l7[o])===l7[o])}}}OY.prototype.defined=!0;function bae(e,t,n){n&&(e[t]=n)}const FQe={}.hasOwnProperty;function uS(e){const t={},n={};let r;for(r in e.properties)if(FQe.call(e.properties,r)){const i=e.properties[r],s=new OY(r,e.transform(e.attributes||{},r),i,e.space);e.mustUseProperty&&e.mustUseProperty.includes(r)&&(s.mustUseProperty=!0),t[r]=s,n[OA(r)]=r,n[OA(s.attribute)]=r}return new yk(t,n,e.space)}const Uwe=uS({space:"xlink",transform(e,t){return"xlink:"+t.slice(5).toLowerCase()},properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null}}),zwe=uS({space:"xml",transform(e,t){return"xml:"+t.slice(3).toLowerCase()},properties:{xmlLang:null,xmlBase:null,xmlSpace:null}});function Vwe(e,t){return t in e?e[t]:t}function Hwe(e,t){return Vwe(e,t.toLowerCase())}const qwe=uS({space:"xmlns",attributes:{xmlnsxlink:"xmlns:xlink"},transform:Hwe,properties:{xmlns:null,xmlnsXLink:null}}),Wwe=uS({transform(e,t){return t==="role"?t:"aria-"+t.slice(4).toLowerCase()},properties:{ariaActiveDescendant:null,ariaAtomic:bs,ariaAutoComplete:null,ariaBusy:bs,ariaChecked:bs,ariaColCount:nt,ariaColIndex:nt,ariaColSpan:nt,ariaControls:ei,ariaCurrent:null,ariaDescribedBy:ei,ariaDetails:null,ariaDisabled:bs,ariaDropEffect:ei,ariaErrorMessage:null,ariaExpanded:bs,ariaFlowTo:ei,ariaGrabbed:bs,ariaHasPopup:null,ariaHidden:bs,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:ei,ariaLevel:nt,ariaLive:null,ariaModal:bs,ariaMultiLine:bs,ariaMultiSelectable:bs,ariaOrientation:null,ariaOwns:ei,ariaPlaceholder:null,ariaPosInSet:nt,ariaPressed:bs,ariaReadOnly:bs,ariaRelevant:null,ariaRequired:bs,ariaRoleDescription:ei,ariaRowCount:nt,ariaRowIndex:nt,ariaRowSpan:nt,ariaSelected:bs,ariaSetSize:nt,ariaSort:null,ariaValueMax:nt,ariaValueMin:nt,ariaValueNow:nt,ariaValueText:null,role:null}}),jQe=uS({space:"html",attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},transform:Hwe,mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:Xw,acceptCharset:ei,accessKey:ei,action:null,allow:null,allowFullScreen:yn,allowPaymentRequest:yn,allowUserMedia:yn,alt:null,as:null,async:yn,autoCapitalize:null,autoComplete:ei,autoFocus:yn,autoPlay:yn,blocking:ei,capture:null,charSet:null,checked:yn,cite:null,className:ei,cols:nt,colSpan:null,content:null,contentEditable:bs,controls:yn,controlsList:ei,coords:nt|Xw,crossOrigin:null,data:null,dateTime:null,decoding:null,default:yn,defer:yn,dir:null,dirName:null,disabled:yn,download:Bwe,draggable:bs,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:yn,formTarget:null,headers:ei,height:nt,hidden:yn,high:nt,href:null,hrefLang:null,htmlFor:ei,httpEquiv:ei,id:null,imageSizes:null,imageSrcSet:null,inert:yn,inputMode:null,integrity:null,is:null,isMap:yn,itemId:null,itemProp:ei,itemRef:ei,itemScope:yn,itemType:ei,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:yn,low:nt,manifest:null,max:null,maxLength:nt,media:null,method:null,min:null,minLength:nt,multiple:yn,muted:yn,name:null,nonce:null,noModule:yn,noValidate:yn,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:yn,optimum:nt,pattern:null,ping:ei,placeholder:null,playsInline:yn,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:yn,referrerPolicy:null,rel:ei,required:yn,reversed:yn,rows:nt,rowSpan:nt,sandbox:ei,scope:null,scoped:yn,seamless:yn,selected:yn,shadowRootClonable:yn,shadowRootDelegatesFocus:yn,shadowRootMode:null,shape:null,size:nt,sizes:null,slot:null,span:nt,spellCheck:bs,src:null,srcDoc:null,srcLang:null,srcSet:null,start:nt,step:null,style:null,tabIndex:nt,target:null,title:null,translate:null,type:null,typeMustMatch:yn,useMap:null,value:bs,width:nt,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:ei,axis:null,background:null,bgColor:null,border:nt,borderColor:null,bottomMargin:nt,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:yn,declare:yn,event:null,face:null,frame:null,frameBorder:null,hSpace:nt,leftMargin:nt,link:null,longDesc:null,lowSrc:null,marginHeight:nt,marginWidth:nt,noResize:yn,noHref:yn,noShade:yn,noWrap:yn,object:null,profile:null,prompt:null,rev:null,rightMargin:nt,rules:null,scheme:null,scrolling:bs,standby:null,summary:null,text:null,topMargin:nt,valueType:null,version:null,vAlign:null,vLink:null,vSpace:nt,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:yn,disableRemotePlayback:yn,prefix:null,property:null,results:nt,security:null,unselectable:null}}),BQe=uS({space:"svg",attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},transform:Vwe,properties:{about:dl,accentHeight:nt,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:nt,amplitude:nt,arabicForm:null,ascent:nt,attributeName:null,attributeType:null,azimuth:nt,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:nt,by:null,calcMode:null,capHeight:nt,className:ei,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:nt,diffuseConstant:nt,direction:null,display:null,dur:null,divisor:nt,dominantBaseline:null,download:yn,dx:null,dy:null,edgeMode:null,editable:null,elevation:nt,enableBackground:null,end:null,event:null,exponent:nt,externalResourcesRequired:null,fill:null,fillOpacity:nt,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:Xw,g2:Xw,glyphName:Xw,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:nt,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:nt,horizOriginX:nt,horizOriginY:nt,id:null,ideographic:nt,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:nt,k:nt,k1:nt,k2:nt,k3:nt,k4:nt,kernelMatrix:dl,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:nt,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:nt,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:nt,overlineThickness:nt,paintOrder:null,panose1:null,path:null,pathLength:nt,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:ei,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:nt,pointsAtY:nt,pointsAtZ:nt,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:dl,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:dl,rev:dl,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:dl,requiredFeatures:dl,requiredFonts:dl,requiredFormats:dl,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:nt,specularExponent:nt,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:nt,strikethroughThickness:nt,string:null,stroke:null,strokeDashArray:dl,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:nt,strokeOpacity:nt,strokeWidth:null,style:null,surfaceScale:nt,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:dl,tabIndex:nt,tableValues:null,target:null,targetX:nt,targetY:nt,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:dl,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:nt,underlineThickness:nt,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:nt,values:null,vAlphabetic:nt,vMathematical:nt,vectorEffect:null,vHanging:nt,vIdeographic:nt,version:null,vertAdvY:nt,vertOriginX:nt,vertOriginY:nt,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:nt,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null}}),UQe=/^data[-\w.:]+$/i,_ae=/-[a-z]/g,zQe=/[A-Z]/g;function s6(e,t){const n=OA(t);let r=t,i=Gc;if(n in e.normal)return e.property[e.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&UQe.test(t)){if(t.charAt(4)==="-"){const s=t.slice(5).replace(_ae,HQe);r="data"+s.charAt(0).toUpperCase()+s.slice(1)}else{const s=t.slice(4);if(!_ae.test(s)){let o=s.replace(zQe,VQe);o.charAt(0)!=="-"&&(o="-"+o),t="data"+o}}i=OY}return new i(r,t)}function VQe(e){return"-"+e.toLowerCase()}function HQe(e){return e.charAt(1).toUpperCase()}const qQe={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},vk=jwe([zwe,Uwe,qwe,Wwe,jQe],"html"),Oy=jwe([zwe,Uwe,qwe,Wwe,BQe],"svg");function wae(e){const t=String(e||"").trim();return t?t.split(/[ \t\n\r\f]+/g):[]}function Gwe(e){return e.join(" ").trim()}var Ywe={},Eae=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,WQe=/\n/g,GQe=/^\s*/,YQe=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,KQe=/^:\s*/,XQe=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,QQe=/^[;\s]*/,JQe=/^\s+|\s+$/g,ZQe=`
`,xae="/",Sae="*",Uv="",eJe="comment",tJe="declaration",nJe=function(e,t){if(typeof e!="string")throw new TypeError("First argument must be a string");if(!e)return[];t=t||{};var n=1,r=1;function i(p){var m=p.match(WQe);m&&(n+=m.length);var g=p.lastIndexOf(ZQe);r=~g?p.length-g:r+p.length}function s(){var p={line:n,column:r};return function(m){return m.position=new o(p),l(),m}}function o(p){this.start=p,this.end={line:n,column:r},this.source=t.source}o.prototype.content=e;function a(p){var m=new Error(t.source+":"+n+":"+r+": "+p);if(m.reason=p,m.filename=t.source,m.line=n,m.column=r,m.source=e,!t.silent)throw m}function u(p){var m=p.exec(e);if(m){var g=m[0];return i(g),e=e.slice(g.length),m}}function l(){u(GQe)}function c(p){var m;for(p=p||[];m=f();)m!==!1&&p.push(m);return p}function f(){var p=s();if(!(xae!=e.charAt(0)||Sae!=e.charAt(1))){for(var m=2;Uv!=e.charAt(m)&&(Sae!=e.charAt(m)||xae!=e.charAt(m+1));)++m;if(m+=2,Uv===e.charAt(m-1))return a("End of comment missing");var g=e.slice(2,m-2);return r+=2,i(g),e=e.slice(m),r+=2,p({type:eJe,comment:g})}}function d(){var p=s(),m=u(YQe);if(m){if(f(),!u(KQe))return a("property missing ':'");var g=u(XQe),y=p({type:tJe,property:Tae(m[0].replace(Eae,Uv)),value:g?Tae(g[0].replace(Eae,Uv)):Uv});return u(QQe),y}}function h(){var p=[];c(p);for(var m;m=d();)m!==!1&&(p.push(m),c(p));return p}return l(),h()};function Tae(e){return e?e.replace(JQe,Uv):Uv}var rJe=to&&to.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ywe,"__esModule",{value:!0});var iJe=rJe(nJe);function sJe(e,t){var n=null;if(!e||typeof e!="string")return n;var r=(0,iJe.default)(e),i=typeof t=="function";return r.forEach(function(s){if(s.type==="declaration"){var o=s.property,a=s.value;i?t(o,a,s):a&&(n=n||{},n[o]=a)}}),n}var Cae=Ywe.default=sJe;const oJe=Cae.default||Cae,o6=Kwe("end"),Yh=Kwe("start");function Kwe(e){return t;function t(n){const r=n&&n.position&&n.position[e]||{};if(typeof r.line=="number"&&r.line>0&&typeof r.column=="number"&&r.column>0)return{line:r.line,column:r.column,offset:typeof r.offset=="number"&&r.offset>-1?r.offset:void 0}}}function aJe(e){const t=Yh(e),n=o6(e);if(t&&n)return{start:t,end:n}}function yC(e){return!e||typeof e!="object"?"":"position"in e||"type"in e?Aae(e.position):"start"in e||"end"in e?Aae(e):"line"in e||"column"in e?c7(e):""}function c7(e){return Iae(e&&e.line)+":"+Iae(e&&e.column)}function Aae(e){return c7(e&&e.start)+"-"+c7(e&&e.end)}function Iae(e){return e&&typeof e=="number"?e:1}class Ca extends Error{constructor(t,n,r){super(),typeof n=="string"&&(r=n,n=void 0);let i="",s={},o=!1;if(n&&("line"in n&&"column"in n?s={place:n}:"start"in n&&"end"in n?s={place:n}:"type"in n?s={ancestors:[n],place:n.position}:s={...n}),typeof t=="string"?i=t:!s.cause&&t&&(o=!0,i=t.message,s.cause=t),!s.ruleId&&!s.source&&typeof r=="string"){const u=r.indexOf(":");u===-1?s.ruleId=r:(s.source=r.slice(0,u),s.ruleId=r.slice(u+1))}if(!s.place&&s.ancestors&&s.ancestors){const u=s.ancestors[s.ancestors.length-1];u&&(s.place=u.position)}const a=s.place&&"start"in s.place?s.place.start:s.place;this.ancestors=s.ancestors||void 0,this.cause=s.cause||void 0,this.column=a?a.column:void 0,this.fatal=void 0,this.file,this.message=i,this.line=a?a.line:void 0,this.name=yC(s.place)||"1:1",this.place=s.place||void 0,this.reason=this.message,this.ruleId=s.ruleId||void 0,this.source=s.source||void 0,this.stack=o&&s.cause&&typeof s.cause.stack=="string"?s.cause.stack:"",this.actual,this.expected,this.note,this.url}}Ca.prototype.file="";Ca.prototype.name="";Ca.prototype.reason="";Ca.prototype.message="";Ca.prototype.stack="";Ca.prototype.column=void 0;Ca.prototype.line=void 0;Ca.prototype.ancestors=void 0;Ca.prototype.cause=void 0;Ca.prototype.fatal=void 0;Ca.prototype.place=void 0;Ca.prototype.ruleId=void 0;Ca.prototype.source=void 0;const $Y={}.hasOwnProperty,uJe=new Map,lJe=/[A-Z]/g,cJe=/-([a-z])/g,fJe=new Set(["table","tbody","thead","tfoot","tr"]),dJe=new Set(["td","th"]),Xwe="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function hJe(e,t){if(!t||t.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const n=t.filePath||void 0;let r;if(t.development){if(typeof t.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");r=wJe(n,t.jsxDEV)}else{if(typeof t.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof t.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");r=_Je(n,t.jsx,t.jsxs)}const i={Fragment:t.Fragment,ancestors:[],components:t.components||{},create:r,elementAttributeNameCase:t.elementAttributeNameCase||"react",evaluater:t.createEvaluater?t.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:t.ignoreInvalidStyle||!1,passKeys:t.passKeys!==!1,passNode:t.passNode||!1,schema:t.space==="svg"?Oy:vk,stylePropertyNameCase:t.stylePropertyNameCase||"dom",tableCellAlignToStyle:t.tableCellAlignToStyle!==!1},s=Qwe(i,e,void 0);return s&&typeof s!="string"?s:i.create(e,i.Fragment,{children:s||void 0},void 0)}function Qwe(e,t,n){if(t.type==="element")return pJe(e,t,n);if(t.type==="mdxFlowExpression"||t.type==="mdxTextExpression")return mJe(e,t);if(t.type==="mdxJsxFlowElement"||t.type==="mdxJsxTextElement")return yJe(e,t,n);if(t.type==="mdxjsEsm")return gJe(e,t);if(t.type==="root")return vJe(e,t,n);if(t.type==="text")return bJe(e,t)}function pJe(e,t,n){const r=e.schema;let i=r;t.tagName.toLowerCase()==="svg"&&r.space==="html"&&(i=Oy,e.schema=i),e.ancestors.push(t);const s=Zwe(e,t.tagName,!1),o=EJe(e,t);let a=LY(e,t);return fJe.has(t.tagName)&&(a=a.filter(function(u){return typeof u=="string"?!MQe(u):!0})),Jwe(e,o,s,t),MY(o,a),e.ancestors.pop(),e.schema=r,e.create(t,s,o,n)}function mJe(e,t){if(t.data&&t.data.estree&&e.evaluater){const r=t.data.estree.body[0];return r.type,e.evaluater.evaluateExpression(r.expression)}$A(e,t.position)}function gJe(e,t){if(t.data&&t.data.estree&&e.evaluater)return e.evaluater.evaluateProgram(t.data.estree);$A(e,t.position)}function yJe(e,t,n){const r=e.schema;let i=r;t.name==="svg"&&r.space==="html"&&(i=Oy,e.schema=i),e.ancestors.push(t);const s=t.name===null?e.Fragment:Zwe(e,t.name,!0),o=xJe(e,t),a=LY(e,t);return Jwe(e,o,s,t),MY(o,a),e.ancestors.pop(),e.schema=r,e.create(t,s,o,n)}function vJe(e,t,n){const r={};return MY(r,LY(e,t)),e.create(t,e.Fragment,r,n)}function bJe(e,t){return t.value}function Jwe(e,t,n,r){typeof n!="string"&&n!==e.Fragment&&e.passNode&&(t.node=r)}function MY(e,t){if(t.length>0){const n=t.length>1?t:t[0];n&&(e.children=n)}}function _Je(e,t,n){return r;function r(i,s,o,a){const l=Array.isArray(o.children)?n:t;return a?l(s,o,a):l(s,o)}}function wJe(e,t){return n;function n(r,i,s,o){const a=Array.isArray(s.children),u=Yh(r);return t(i,s,o,a,{columnNumber:u?u.column-1:void 0,fileName:e,lineNumber:u?u.line:void 0},void 0)}}function EJe(e,t){const n={};let r,i;for(i in t.properties)if(i!=="children"&&$Y.call(t.properties,i)){const s=SJe(e,i,t.properties[i]);if(s){const[o,a]=s;e.tableCellAlignToStyle&&o==="align"&&typeof a=="string"&&dJe.has(t.tagName)?r=a:n[o]=a}}if(r){const s=n.style||(n.style={});s[e.stylePropertyNameCase==="css"?"text-align":"textAlign"]=r}return n}function xJe(e,t){const n={};for(const r of t.attributes)if(r.type==="mdxJsxExpressionAttribute")if(r.data&&r.data.estree&&e.evaluater){const s=r.data.estree.body[0];s.type;const o=s.expression;o.type;const a=o.properties[0];a.type,Object.assign(n,e.evaluater.evaluateExpression(a.argument))}else $A(e,t.position);else{const i=r.name;let s;if(r.value&&typeof r.value=="object")if(r.value.data&&r.value.data.estree&&e.evaluater){const a=r.value.data.estree.body[0];a.type,s=e.evaluater.evaluateExpression(a.expression)}else $A(e,t.position);else s=r.value===null?!0:r.value;n[i]=s}return n}function LY(e,t){const n=[];let r=-1;const i=e.passKeys?new Map:uJe;for(;++r<t.children.length;){const s=t.children[r];let o;if(e.passKeys){const u=s.type==="element"?s.tagName:s.type==="mdxJsxFlowElement"||s.type==="mdxJsxTextElement"?s.name:void 0;if(u){const l=i.get(u)||0;o=u+"-"+l,i.set(u,l+1)}}const a=Qwe(e,s,o);a!==void 0&&n.push(a)}return n}function SJe(e,t,n){const r=s6(e.schema,t);if(!(n==null||typeof n=="number"&&Number.isNaN(n))){if(Array.isArray(n)&&(n=r.commaSeparated?Fwe(n):Gwe(n)),r.property==="style"){let i=typeof n=="object"?n:TJe(e,String(n));return e.stylePropertyNameCase==="css"&&(i=CJe(i)),["style",i]}return[e.elementAttributeNameCase==="react"&&r.space?qQe[r.property]||r.property:r.attribute,n]}}function TJe(e,t){const n={};try{oJe(t,r)}catch(i){if(!e.ignoreInvalidStyle){const s=i,o=new Ca("Cannot parse `style` attribute",{ancestors:e.ancestors,cause:s,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw o.file=e.filePath||void 0,o.url=Xwe+"#cannot-parse-style-attribute",o}}return n;function r(i,s){let o=i;o.slice(0,2)!=="--"&&(o.slice(0,4)==="-ms-"&&(o="ms-"+o.slice(4)),o=o.replace(cJe,IJe)),n[o]=s}}function Zwe(e,t,n){let r;if(!n)r={type:"Literal",value:t};else if(t.includes(".")){const i=t.split(".");let s=-1,o;for(;++s<i.length;){const a=yae(i[s])?{type:"Identifier",name:i[s]}:{type:"Literal",value:i[s]};o=o?{type:"MemberExpression",object:o,property:a,computed:!!(s&&a.type==="Literal"),optional:!1}:a}r=o}else r=yae(t)&&!/^[a-z]/.test(t)?{type:"Identifier",name:t}:{type:"Literal",value:t};if(r.type==="Literal"){const i=r.value;return $Y.call(e.components,i)?e.components[i]:i}if(e.evaluater)return e.evaluater.evaluateExpression(r);$A(e)}function $A(e,t){const n=new Ca("Cannot handle MDX estrees without `createEvaluater`",{ancestors:e.ancestors,place:t,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=e.filePath||void 0,n.url=Xwe+"#cannot-handle-mdx-estrees-without-createevaluater",n}function CJe(e){const t={};let n;for(n in e)$Y.call(e,n)&&(t[AJe(n)]=e[n]);return t}function AJe(e){let t=e.replace(lJe,kJe);return t.slice(0,3)==="ms-"&&(t="-"+t),t}function IJe(e,t){return t.toUpperCase()}function kJe(e){return"-"+e.toLowerCase()}const Wj={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},RJe={};function NJe(e,t){const n=RJe,r=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,i=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return eEe(e,r,i)}function eEe(e,t,n){if(DJe(e)){if("value"in e)return e.type==="html"&&!n?"":e.value;if(t&&"alt"in e&&e.alt)return e.alt;if("children"in e)return kae(e.children,t,n)}return Array.isArray(e)?kae(e,t,n):""}function kae(e,t,n){const r=[];let i=-1;for(;++i<e.length;)r[i]=eEe(e[i],t,n);return r.join("")}function DJe(e){return!!(e&&typeof e=="object")}const Rae=document.createElement("i");function FY(e){const t="&"+e+";";Rae.innerHTML=t;const n=Rae.textContent;return n.charCodeAt(n.length-1)===59&&e!=="semi"||n===t?!1:n}function Em(e,t,n,r){const i=e.length;let s=0,o;if(t<0?t=-t>i?0:i+t:t=t>i?i:t,n=n>0?n:0,r.length<1e4)o=Array.from(r),o.unshift(t,n),e.splice(...o);else for(n&&e.splice(t,n);s<r.length;)o=r.slice(s,s+1e4),o.unshift(t,0),e.splice(...o),s+=1e4,t+=1e4}function mc(e,t){return e.length>0?(Em(e,e.length,0,t),e):t}const Nae={}.hasOwnProperty;function PJe(e){const t={};let n=-1;for(;++n<e.length;)OJe(t,e[n]);return t}function OJe(e,t){let n;for(n in t){const i=(Nae.call(e,n)?e[n]:void 0)||(e[n]={}),s=t[n];let o;if(s)for(o in s){Nae.call(i,o)||(i[o]=[]);const a=s[o];$Je(i[o],Array.isArray(a)?a:a?[a]:[])}}}function $Je(e,t){let n=-1;const r=[];for(;++n<t.length;)(t[n].add==="after"?e:r).push(t[n]);Em(e,0,0,r)}function tEe(e,t){const n=Number.parseInt(e,t);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"":String.fromCodePoint(n)}function Qw(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const Ud=$y(/[A-Za-z]/),Tl=$y(/[\dA-Za-z]/),MJe=$y(/[#-'*+\--9=?A-Z^-~]/);function f7(e){return e!==null&&(e<32||e===127)}const d7=$y(/\d/),LJe=$y(/[\dA-Fa-f]/),FJe=$y(/[!-/:-@[-`{-~]/);function en(e){return e!==null&&e<-2}function Hu(e){return e!==null&&(e<0||e===32)}function br(e){return e===-2||e===-1||e===32}const jJe=$y(new RegExp("\\p{P}|\\p{S}","u")),BJe=$y(/\s/);function $y(e){return t;function t(n){return n!==null&&n>-1&&e.test(String.fromCharCode(n))}}function lS(e){const t=[];let n=-1,r=0,i=0;for(;++n<e.length;){const s=e.charCodeAt(n);let o="";if(s===37&&Tl(e.charCodeAt(n+1))&&Tl(e.charCodeAt(n+2)))i=2;else if(s<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(s))||(o=String.fromCharCode(s));else if(s>55295&&s<57344){const a=e.charCodeAt(n+1);s<56320&&a>56319&&a<57344?(o=String.fromCharCode(s,a),i=1):o=""}else o=String.fromCharCode(s);o&&(t.push(e.slice(r,n),encodeURIComponent(o)),r=n+i+1,o=""),i&&(n+=i,i=0)}return t.join("")+e.slice(r)}function ni(e,t,n,r){const i=r?r-1:Number.POSITIVE_INFINITY;let s=0;return o;function o(u){return br(u)?(e.enter(n),a(u)):t(u)}function a(u){return br(u)&&s++<i?(e.consume(u),a):(e.exit(n),t(u))}}const UJe={tokenize:zJe};function zJe(e){const t=e.attempt(this.parser.constructs.contentInitial,r,i);let n;return t;function r(a){if(a===null){e.consume(a);return}return e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),ni(e,t,"linePrefix")}function i(a){return e.enter("paragraph"),s(a)}function s(a){const u=e.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=u),n=u,o(a)}function o(a){if(a===null){e.exit("chunkText"),e.exit("paragraph"),e.consume(a);return}return en(a)?(e.consume(a),e.exit("chunkText"),s):(e.consume(a),o)}}const VJe={tokenize:HJe},Dae={tokenize:qJe};function HJe(e){const t=this,n=[];let r=0,i,s,o;return a;function a(b){if(r<n.length){const w=n[r];return t.containerState=w[1],e.attempt(w[0].continuation,u,l)(b)}return l(b)}function u(b){if(r++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,i&&v();const w=t.events.length;let E=w,T;for(;E--;)if(t.events[E][0]==="exit"&&t.events[E][1].type==="chunkFlow"){T=t.events[E][1].end;break}y(r);let S=w;for(;S<t.events.length;)t.events[S][1].end=Object.assign({},T),S++;return Em(t.events,E+1,0,t.events.slice(w)),t.events.length=S,l(b)}return a(b)}function l(b){if(r===n.length){if(!i)return d(b);if(i.currentConstruct&&i.currentConstruct.concrete)return p(b);t.interrupt=!!(i.currentConstruct&&!i._gfmTableDynamicInterruptHack)}return t.containerState={},e.check(Dae,c,f)(b)}function c(b){return i&&v(),y(r),d(b)}function f(b){return t.parser.lazy[t.now().line]=r!==n.length,o=t.now().offset,p(b)}function d(b){return t.containerState={},e.attempt(Dae,h,p)(b)}function h(b){return r++,n.push([t.currentConstruct,t.containerState]),d(b)}function p(b){if(b===null){i&&v(),y(0),e.consume(b);return}return i=i||t.parser.flow(t.now()),e.enter("chunkFlow",{contentType:"flow",previous:s,_tokenizer:i}),m(b)}function m(b){if(b===null){g(e.exit("chunkFlow"),!0),y(0),e.consume(b);return}return en(b)?(e.consume(b),g(e.exit("chunkFlow")),r=0,t.interrupt=void 0,a):(e.consume(b),m)}function g(b,w){const E=t.sliceStream(b);if(w&&E.push(null),b.previous=s,s&&(s.next=b),s=b,i.defineSkip(b.start),i.write(E),t.parser.lazy[b.start.line]){let T=i.events.length;for(;T--;)if(i.events[T][1].start.offset<o&&(!i.events[T][1].end||i.events[T][1].end.offset>o))return;const S=t.events.length;let C=S,A,k;for(;C--;)if(t.events[C][0]==="exit"&&t.events[C][1].type==="chunkFlow"){if(A){k=t.events[C][1].end;break}A=!0}for(y(r),T=S;T<t.events.length;)t.events[T][1].end=Object.assign({},k),T++;Em(t.events,C+1,0,t.events.slice(S)),t.events.length=T}}function y(b){let w=n.length;for(;w-- >b;){const E=n[w];t.containerState=E[1],E[0].exit.call(t,e)}n.length=b}function v(){i.write([null]),s=void 0,i=void 0,t.containerState._closeFlow=void 0}}function qJe(e,t,n){return ni(e,e.attempt(this.parser.constructs.document,t,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function Pae(e){if(e===null||Hu(e)||BJe(e))return 1;if(jJe(e))return 2}function jY(e,t,n){const r=[];let i=-1;for(;++i<e.length;){const s=e[i].resolveAll;s&&!r.includes(s)&&(t=s(t,n),r.push(s))}return t}const h7={name:"attention",tokenize:GJe,resolveAll:WJe};function WJe(e,t){let n=-1,r,i,s,o,a,u,l,c;for(;++n<e.length;)if(e[n][0]==="enter"&&e[n][1].type==="attentionSequence"&&e[n][1]._close){for(r=n;r--;)if(e[r][0]==="exit"&&e[r][1].type==="attentionSequence"&&e[r][1]._open&&t.sliceSerialize(e[r][1]).charCodeAt(0)===t.sliceSerialize(e[n][1]).charCodeAt(0)){if((e[r][1]._close||e[n][1]._open)&&(e[n][1].end.offset-e[n][1].start.offset)%3&&!((e[r][1].end.offset-e[r][1].start.offset+e[n][1].end.offset-e[n][1].start.offset)%3))continue;u=e[r][1].end.offset-e[r][1].start.offset>1&&e[n][1].end.offset-e[n][1].start.offset>1?2:1;const f=Object.assign({},e[r][1].end),d=Object.assign({},e[n][1].start);Oae(f,-u),Oae(d,u),o={type:u>1?"strongSequence":"emphasisSequence",start:f,end:Object.assign({},e[r][1].end)},a={type:u>1?"strongSequence":"emphasisSequence",start:Object.assign({},e[n][1].start),end:d},s={type:u>1?"strongText":"emphasisText",start:Object.assign({},e[r][1].end),end:Object.assign({},e[n][1].start)},i={type:u>1?"strong":"emphasis",start:Object.assign({},o.start),end:Object.assign({},a.end)},e[r][1].end=Object.assign({},o.start),e[n][1].start=Object.assign({},a.end),l=[],e[r][1].end.offset-e[r][1].start.offset&&(l=mc(l,[["enter",e[r][1],t],["exit",e[r][1],t]])),l=mc(l,[["enter",i,t],["enter",o,t],["exit",o,t],["enter",s,t]]),l=mc(l,jY(t.parser.constructs.insideSpan.null,e.slice(r+1,n),t)),l=mc(l,[["exit",s,t],["enter",a,t],["exit",a,t],["exit",i,t]]),e[n][1].end.offset-e[n][1].start.offset?(c=2,l=mc(l,[["enter",e[n][1],t],["exit",e[n][1],t]])):c=0,Em(e,r-1,n-r+3,l),n=r+l.length-c-2;break}}for(n=-1;++n<e.length;)e[n][1].type==="attentionSequence"&&(e[n][1].type="data");return e}function GJe(e,t){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,i=Pae(r);let s;return o;function o(u){return s=u,e.enter("attentionSequence"),a(u)}function a(u){if(u===s)return e.consume(u),a;const l=e.exit("attentionSequence"),c=Pae(u),f=!c||c===2&&i||n.includes(u),d=!i||i===2&&c||n.includes(r);return l._open=!!(s===42?f:f&&(i||!d)),l._close=!!(s===42?d:d&&(c||!f)),t(u)}}function Oae(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}const YJe={name:"autolink",tokenize:KJe};function KJe(e,t,n){let r=0;return i;function i(h){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(h),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),s}function s(h){return Ud(h)?(e.consume(h),o):h===64?n(h):l(h)}function o(h){return h===43||h===45||h===46||Tl(h)?(r=1,a(h)):l(h)}function a(h){return h===58?(e.consume(h),r=0,u):(h===43||h===45||h===46||Tl(h))&&r++<32?(e.consume(h),a):(r=0,l(h))}function u(h){return h===62?(e.exit("autolinkProtocol"),e.enter("autolinkMarker"),e.consume(h),e.exit("autolinkMarker"),e.exit("autolink"),t):h===null||h===32||h===60||f7(h)?n(h):(e.consume(h),u)}function l(h){return h===64?(e.consume(h),c):MJe(h)?(e.consume(h),l):n(h)}function c(h){return Tl(h)?f(h):n(h)}function f(h){return h===46?(e.consume(h),r=0,c):h===62?(e.exit("autolinkProtocol").type="autolinkEmail",e.enter("autolinkMarker"),e.consume(h),e.exit("autolinkMarker"),e.exit("autolink"),t):d(h)}function d(h){if((h===45||Tl(h))&&r++<63){const p=h===45?d:f;return e.consume(h),p}return n(h)}}const a6={tokenize:XJe,partial:!0};function XJe(e,t,n){return r;function r(s){return br(s)?ni(e,i,"linePrefix")(s):i(s)}function i(s){return s===null||en(s)?t(s):n(s)}}const nEe={name:"blockQuote",tokenize:QJe,continuation:{tokenize:JJe},exit:ZJe};function QJe(e,t,n){const r=this;return i;function i(o){if(o===62){const a=r.containerState;return a.open||(e.enter("blockQuote",{_container:!0}),a.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(o),e.exit("blockQuoteMarker"),s}return n(o)}function s(o){return br(o)?(e.enter("blockQuotePrefixWhitespace"),e.consume(o),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(o))}}function JJe(e,t,n){const r=this;return i;function i(o){return br(o)?ni(e,s,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(o):s(o)}function s(o){return e.attempt(nEe,t,n)(o)}}function ZJe(e){e.exit("blockQuote")}const rEe={name:"characterEscape",tokenize:eZe};function eZe(e,t,n){return r;function r(s){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(s),e.exit("escapeMarker"),i}function i(s){return FJe(s)?(e.enter("characterEscapeValue"),e.consume(s),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):n(s)}}const iEe={name:"characterReference",tokenize:tZe};function tZe(e,t,n){const r=this;let i=0,s,o;return a;function a(f){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(f),e.exit("characterReferenceMarker"),u}function u(f){return f===35?(e.enter("characterReferenceMarkerNumeric"),e.consume(f),e.exit("characterReferenceMarkerNumeric"),l):(e.enter("characterReferenceValue"),s=31,o=Tl,c(f))}function l(f){return f===88||f===120?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(f),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),s=6,o=LJe,c):(e.enter("characterReferenceValue"),s=7,o=d7,c(f))}function c(f){if(f===59&&i){const d=e.exit("characterReferenceValue");return o===Tl&&!FY(r.sliceSerialize(d))?n(f):(e.enter("characterReferenceMarker"),e.consume(f),e.exit("characterReferenceMarker"),e.exit("characterReference"),t)}return o(f)&&i++<s?(e.consume(f),c):n(f)}}const $ae={tokenize:rZe,partial:!0},Mae={name:"codeFenced",tokenize:nZe,concrete:!0};function nZe(e,t,n){const r=this,i={tokenize:E,partial:!0};let s=0,o=0,a;return u;function u(T){return l(T)}function l(T){const S=r.events[r.events.length-1];return s=S&&S[1].type==="linePrefix"?S[2].sliceSerialize(S[1],!0).length:0,a=T,e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),c(T)}function c(T){return T===a?(o++,e.consume(T),c):o<3?n(T):(e.exit("codeFencedFenceSequence"),br(T)?ni(e,f,"whitespace")(T):f(T))}function f(T){return T===null||en(T)?(e.exit("codeFencedFence"),r.interrupt?t(T):e.check($ae,m,w)(T)):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),d(T))}function d(T){return T===null||en(T)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),f(T)):br(T)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),ni(e,h,"whitespace")(T)):T===96&&T===a?n(T):(e.consume(T),d)}function h(T){return T===null||en(T)?f(T):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),p(T))}function p(T){return T===null||en(T)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),f(T)):T===96&&T===a?n(T):(e.consume(T),p)}function m(T){return e.attempt(i,w,g)(T)}function g(T){return e.enter("lineEnding"),e.consume(T),e.exit("lineEnding"),y}function y(T){return s>0&&br(T)?ni(e,v,"linePrefix",s+1)(T):v(T)}function v(T){return T===null||en(T)?e.check($ae,m,w)(T):(e.enter("codeFlowValue"),b(T))}function b(T){return T===null||en(T)?(e.exit("codeFlowValue"),v(T)):(e.consume(T),b)}function w(T){return e.exit("codeFenced"),t(T)}function E(T,S,C){let A=0;return k;function k(F){return T.enter("lineEnding"),T.consume(F),T.exit("lineEnding"),N}function N(F){return T.enter("codeFencedFence"),br(F)?ni(T,O,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(F):O(F)}function O(F){return F===a?(T.enter("codeFencedFenceSequence"),P(F)):C(F)}function P(F){return F===a?(A++,T.consume(F),P):A>=o?(T.exit("codeFencedFenceSequence"),br(F)?ni(T,$,"whitespace")(F):$(F)):C(F)}function $(F){return F===null||en(F)?(T.exit("codeFencedFence"),S(F)):C(F)}}}function rZe(e,t,n){const r=this;return i;function i(o){return o===null?n(o):(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),s)}function s(o){return r.parser.lazy[r.now().line]?n(o):t(o)}}const Gj={name:"codeIndented",tokenize:sZe},iZe={tokenize:oZe,partial:!0};function sZe(e,t,n){const r=this;return i;function i(l){return e.enter("codeIndented"),ni(e,s,"linePrefix",5)(l)}function s(l){const c=r.events[r.events.length-1];return c&&c[1].type==="linePrefix"&&c[2].sliceSerialize(c[1],!0).length>=4?o(l):n(l)}function o(l){return l===null?u(l):en(l)?e.attempt(iZe,o,u)(l):(e.enter("codeFlowValue"),a(l))}function a(l){return l===null||en(l)?(e.exit("codeFlowValue"),o(l)):(e.consume(l),a)}function u(l){return e.exit("codeIndented"),t(l)}}function oZe(e,t,n){const r=this;return i;function i(o){return r.parser.lazy[r.now().line]?n(o):en(o)?(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),i):ni(e,s,"linePrefix",5)(o)}function s(o){const a=r.events[r.events.length-1];return a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?t(o):en(o)?i(o):n(o)}}const aZe={name:"codeText",tokenize:cZe,resolve:uZe,previous:lZe};function uZe(e){let t=e.length-4,n=3,r,i;if((e[n][1].type==="lineEnding"||e[n][1].type==="space")&&(e[t][1].type==="lineEnding"||e[t][1].type==="space")){for(r=n;++r<t;)if(e[r][1].type==="codeTextData"){e[n][1].type="codeTextPadding",e[t][1].type="codeTextPadding",n+=2,t-=2;break}}for(r=n-1,t++;++r<=t;)i===void 0?r!==t&&e[r][1].type!=="lineEnding"&&(i=r):(r===t||e[r][1].type==="lineEnding")&&(e[i][1].type="codeTextData",r!==i+2&&(e[i][1].end=e[r-1][1].end,e.splice(i+2,r-i-2),t-=r-i-2,r=i+2),i=void 0);return e}function lZe(e){return e!==96||this.events[this.events.length-1][1].type==="characterEscape"}function cZe(e,t,n){let r=0,i,s;return o;function o(f){return e.enter("codeText"),e.enter("codeTextSequence"),a(f)}function a(f){return f===96?(e.consume(f),r++,a):(e.exit("codeTextSequence"),u(f))}function u(f){return f===null?n(f):f===32?(e.enter("space"),e.consume(f),e.exit("space"),u):f===96?(s=e.enter("codeTextSequence"),i=0,c(f)):en(f)?(e.enter("lineEnding"),e.consume(f),e.exit("lineEnding"),u):(e.enter("codeTextData"),l(f))}function l(f){return f===null||f===32||f===96||en(f)?(e.exit("codeTextData"),u(f)):(e.consume(f),l)}function c(f){return f===96?(e.consume(f),i++,c):i===r?(e.exit("codeTextSequence"),e.exit("codeText"),t(f)):(s.type="codeTextData",l(f))}}class fZe{constructor(t){this.left=t?[...t]:[],this.right=[]}get(t){if(t<0||t>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+t+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return t<this.left.length?this.left[t]:this.right[this.right.length-t+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(t,n){const r=n??Number.POSITIVE_INFINITY;return r<this.left.length?this.left.slice(t,r):t>this.left.length?this.right.slice(this.right.length-r+this.left.length,this.right.length-t+this.left.length).reverse():this.left.slice(t).concat(this.right.slice(this.right.length-r+this.left.length).reverse())}splice(t,n,r){const i=n||0;this.setCursor(Math.trunc(t));const s=this.right.splice(this.right.length-i,Number.POSITIVE_INFINITY);return r&&xT(this.left,r),s.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(t){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(t)}pushMany(t){this.setCursor(Number.POSITIVE_INFINITY),xT(this.left,t)}unshift(t){this.setCursor(0),this.right.push(t)}unshiftMany(t){this.setCursor(0),xT(this.right,t.reverse())}setCursor(t){if(!(t===this.left.length||t>this.left.length&&this.right.length===0||t<0&&this.left.length===0))if(t<this.left.length){const n=this.left.splice(t,Number.POSITIVE_INFINITY);xT(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-t,Number.POSITIVE_INFINITY);xT(this.left,n.reverse())}}}function xT(e,t){let n=0;if(t.length<1e4)e.push(...t);else for(;n<t.length;)e.push(...t.slice(n,n+1e4)),n+=1e4}function sEe(e){const t={};let n=-1,r,i,s,o,a,u,l;const c=new fZe(e);for(;++n<c.length;){for(;n in t;)n=t[n];if(r=c.get(n),n&&r[1].type==="chunkFlow"&&c.get(n-1)[1].type==="listItemPrefix"&&(u=r[1]._tokenizer.events,s=0,s<u.length&&u[s][1].type==="lineEndingBlank"&&(s+=2),s<u.length&&u[s][1].type==="content"))for(;++s<u.length&&u[s][1].type!=="content";)u[s][1].type==="chunkText"&&(u[s][1]._isInFirstContentOfListItem=!0,s++);if(r[0]==="enter")r[1].contentType&&(Object.assign(t,dZe(c,n)),n=t[n],l=!0);else if(r[1]._container){for(s=n,i=void 0;s--&&(o=c.get(s),o[1].type==="lineEnding"||o[1].type==="lineEndingBlank");)o[0]==="enter"&&(i&&(c.get(i)[1].type="lineEndingBlank"),o[1].type="lineEnding",i=s);i&&(r[1].end=Object.assign({},c.get(i)[1].start),a=c.slice(i,n),a.unshift(r),c.splice(i,n-i+1,a))}}return Em(e,0,Number.POSITIVE_INFINITY,c.slice(0)),!l}function dZe(e,t){const n=e.get(t)[1],r=e.get(t)[2];let i=t-1;const s=[],o=n._tokenizer||r.parser[n.contentType](n.start),a=o.events,u=[],l={};let c,f,d=-1,h=n,p=0,m=0;const g=[m];for(;h;){for(;e.get(++i)[1]!==h;);s.push(i),h._tokenizer||(c=r.sliceStream(h),h.next||c.push(null),f&&o.defineSkip(h.start),h._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=!0),o.write(c),h._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=void 0)),f=h,h=h.next}for(h=n;++d<a.length;)a[d][0]==="exit"&&a[d-1][0]==="enter"&&a[d][1].type===a[d-1][1].type&&a[d][1].start.line!==a[d][1].end.line&&(m=d+1,g.push(m),h._tokenizer=void 0,h.previous=void 0,h=h.next);for(o.events=[],h?(h._tokenizer=void 0,h.previous=void 0):g.pop(),d=g.length;d--;){const y=a.slice(g[d],g[d+1]),v=s.pop();u.push([v,v+y.length-1]),e.splice(v,2,y)}for(u.reverse(),d=-1;++d<u.length;)l[p+u[d][0]]=p+u[d][1],p+=u[d][1]-u[d][0]-1;return l}const hZe={tokenize:gZe,resolve:mZe},pZe={tokenize:yZe,partial:!0};function mZe(e){return sEe(e),e}function gZe(e,t){let n;return r;function r(a){return e.enter("content"),n=e.enter("chunkContent",{contentType:"content"}),i(a)}function i(a){return a===null?s(a):en(a)?e.check(pZe,o,s)(a):(e.consume(a),i)}function s(a){return e.exit("chunkContent"),e.exit("content"),t(a)}function o(a){return e.consume(a),e.exit("chunkContent"),n.next=e.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,i}}function yZe(e,t,n){const r=this;return i;function i(o){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),ni(e,s,"linePrefix")}function s(o){if(o===null||en(o))return n(o);const a=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?t(o):e.interrupt(r.parser.constructs.flow,n,t)(o)}}function oEe(e,t,n,r,i,s,o,a,u){const l=u||Number.POSITIVE_INFINITY;let c=0;return f;function f(y){return y===60?(e.enter(r),e.enter(i),e.enter(s),e.consume(y),e.exit(s),d):y===null||y===32||y===41||f7(y)?n(y):(e.enter(r),e.enter(o),e.enter(a),e.enter("chunkString",{contentType:"string"}),m(y))}function d(y){return y===62?(e.enter(s),e.consume(y),e.exit(s),e.exit(i),e.exit(r),t):(e.enter(a),e.enter("chunkString",{contentType:"string"}),h(y))}function h(y){return y===62?(e.exit("chunkString"),e.exit(a),d(y)):y===null||y===60||en(y)?n(y):(e.consume(y),y===92?p:h)}function p(y){return y===60||y===62||y===92?(e.consume(y),h):h(y)}function m(y){return!c&&(y===null||y===41||Hu(y))?(e.exit("chunkString"),e.exit(a),e.exit(o),e.exit(r),t(y)):c<l&&y===40?(e.consume(y),c++,m):y===41?(e.consume(y),c--,m):y===null||y===32||y===40||f7(y)?n(y):(e.consume(y),y===92?g:m)}function g(y){return y===40||y===41||y===92?(e.consume(y),m):m(y)}}function aEe(e,t,n,r,i,s){const o=this;let a=0,u;return l;function l(h){return e.enter(r),e.enter(i),e.consume(h),e.exit(i),e.enter(s),c}function c(h){return a>999||h===null||h===91||h===93&&!u||h===94&&!a&&"_hiddenFootnoteSupport"in o.parser.constructs?n(h):h===93?(e.exit(s),e.enter(i),e.consume(h),e.exit(i),e.exit(r),t):en(h)?(e.enter("lineEnding"),e.consume(h),e.exit("lineEnding"),c):(e.enter("chunkString",{contentType:"string"}),f(h))}function f(h){return h===null||h===91||h===93||en(h)||a++>999?(e.exit("chunkString"),c(h)):(e.consume(h),u||(u=!br(h)),h===92?d:f)}function d(h){return h===91||h===92||h===93?(e.consume(h),a++,f):f(h)}}function uEe(e,t,n,r,i,s){let o;return a;function a(d){return d===34||d===39||d===40?(e.enter(r),e.enter(i),e.consume(d),e.exit(i),o=d===40?41:d,u):n(d)}function u(d){return d===o?(e.enter(i),e.consume(d),e.exit(i),e.exit(r),t):(e.enter(s),l(d))}function l(d){return d===o?(e.exit(s),u(o)):d===null?n(d):en(d)?(e.enter("lineEnding"),e.consume(d),e.exit("lineEnding"),ni(e,l,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),c(d))}function c(d){return d===o||d===null||en(d)?(e.exit("chunkString"),l(d)):(e.consume(d),d===92?f:c)}function f(d){return d===o||d===92?(e.consume(d),c):c(d)}}function vC(e,t){let n;return r;function r(i){return en(i)?(e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),n=!0,r):br(i)?ni(e,r,n?"linePrefix":"lineSuffix")(i):t(i)}}const vZe={name:"definition",tokenize:_Ze},bZe={tokenize:wZe,partial:!0};function _Ze(e,t,n){const r=this;let i;return s;function s(h){return e.enter("definition"),o(h)}function o(h){return aEe.call(r,e,a,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(h)}function a(h){return i=Qw(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),h===58?(e.enter("definitionMarker"),e.consume(h),e.exit("definitionMarker"),u):n(h)}function u(h){return Hu(h)?vC(e,l)(h):l(h)}function l(h){return oEe(e,c,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(h)}function c(h){return e.attempt(bZe,f,f)(h)}function f(h){return br(h)?ni(e,d,"whitespace")(h):d(h)}function d(h){return h===null||en(h)?(e.exit("definition"),r.parser.defined.push(i),t(h)):n(h)}}function wZe(e,t,n){return r;function r(a){return Hu(a)?vC(e,i)(a):n(a)}function i(a){return uEe(e,s,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(a)}function s(a){return br(a)?ni(e,o,"whitespace")(a):o(a)}function o(a){return a===null||en(a)?t(a):n(a)}}const EZe={name:"hardBreakEscape",tokenize:xZe};function xZe(e,t,n){return r;function r(s){return e.enter("hardBreakEscape"),e.consume(s),i}function i(s){return en(s)?(e.exit("hardBreakEscape"),t(s)):n(s)}}const SZe={name:"headingAtx",tokenize:CZe,resolve:TZe};function TZe(e,t){let n=e.length-2,r=3,i,s;return e[r][1].type==="whitespace"&&(r+=2),n-2>r&&e[n][1].type==="whitespace"&&(n-=2),e[n][1].type==="atxHeadingSequence"&&(r===n-1||n-4>r&&e[n-2][1].type==="whitespace")&&(n-=r+1===n?2:4),n>r&&(i={type:"atxHeadingText",start:e[r][1].start,end:e[n][1].end},s={type:"chunkText",start:e[r][1].start,end:e[n][1].end,contentType:"text"},Em(e,r,n-r+1,[["enter",i,t],["enter",s,t],["exit",s,t],["exit",i,t]])),e}function CZe(e,t,n){let r=0;return i;function i(c){return e.enter("atxHeading"),s(c)}function s(c){return e.enter("atxHeadingSequence"),o(c)}function o(c){return c===35&&r++<6?(e.consume(c),o):c===null||Hu(c)?(e.exit("atxHeadingSequence"),a(c)):n(c)}function a(c){return c===35?(e.enter("atxHeadingSequence"),u(c)):c===null||en(c)?(e.exit("atxHeading"),t(c)):br(c)?ni(e,a,"whitespace")(c):(e.enter("atxHeadingText"),l(c))}function u(c){return c===35?(e.consume(c),u):(e.exit("atxHeadingSequence"),a(c))}function l(c){return c===null||c===35||Hu(c)?(e.exit("atxHeadingText"),a(c)):(e.consume(c),l)}}const AZe=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],Lae=["pre","script","style","textarea"],IZe={name:"htmlFlow",tokenize:DZe,resolveTo:NZe,concrete:!0},kZe={tokenize:OZe,partial:!0},RZe={tokenize:PZe,partial:!0};function NZe(e){let t=e.length;for(;t--&&!(e[t][0]==="enter"&&e[t][1].type==="htmlFlow"););return t>1&&e[t-2][1].type==="linePrefix"&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2)),e}function DZe(e,t,n){const r=this;let i,s,o,a,u;return l;function l(j){return c(j)}function c(j){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(j),f}function f(j){return j===33?(e.consume(j),d):j===47?(e.consume(j),s=!0,m):j===63?(e.consume(j),i=3,r.interrupt?t:D):Ud(j)?(e.consume(j),o=String.fromCharCode(j),g):n(j)}function d(j){return j===45?(e.consume(j),i=2,h):j===91?(e.consume(j),i=5,a=0,p):Ud(j)?(e.consume(j),i=4,r.interrupt?t:D):n(j)}function h(j){return j===45?(e.consume(j),r.interrupt?t:D):n(j)}function p(j){const q="CDATA[";return j===q.charCodeAt(a++)?(e.consume(j),a===q.length?r.interrupt?t:O:p):n(j)}function m(j){return Ud(j)?(e.consume(j),o=String.fromCharCode(j),g):n(j)}function g(j){if(j===null||j===47||j===62||Hu(j)){const q=j===47,G=o.toLowerCase();return!q&&!s&&Lae.includes(G)?(i=1,r.interrupt?t(j):O(j)):AZe.includes(o.toLowerCase())?(i=6,q?(e.consume(j),y):r.interrupt?t(j):O(j)):(i=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(j):s?v(j):b(j))}return j===45||Tl(j)?(e.consume(j),o+=String.fromCharCode(j),g):n(j)}function y(j){return j===62?(e.consume(j),r.interrupt?t:O):n(j)}function v(j){return br(j)?(e.consume(j),v):k(j)}function b(j){return j===47?(e.consume(j),k):j===58||j===95||Ud(j)?(e.consume(j),w):br(j)?(e.consume(j),b):k(j)}function w(j){return j===45||j===46||j===58||j===95||Tl(j)?(e.consume(j),w):E(j)}function E(j){return j===61?(e.consume(j),T):br(j)?(e.consume(j),E):b(j)}function T(j){return j===null||j===60||j===61||j===62||j===96?n(j):j===34||j===39?(e.consume(j),u=j,S):br(j)?(e.consume(j),T):C(j)}function S(j){return j===u?(e.consume(j),u=null,A):j===null||en(j)?n(j):(e.consume(j),S)}function C(j){return j===null||j===34||j===39||j===47||j===60||j===61||j===62||j===96||Hu(j)?E(j):(e.consume(j),C)}function A(j){return j===47||j===62||br(j)?b(j):n(j)}function k(j){return j===62?(e.consume(j),N):n(j)}function N(j){return j===null||en(j)?O(j):br(j)?(e.consume(j),N):n(j)}function O(j){return j===45&&i===2?(e.consume(j),M):j===60&&i===1?(e.consume(j),B):j===62&&i===4?(e.consume(j),z):j===63&&i===3?(e.consume(j),D):j===93&&i===5?(e.consume(j),H):en(j)&&(i===6||i===7)?(e.exit("htmlFlowData"),e.check(kZe,W,P)(j)):j===null||en(j)?(e.exit("htmlFlowData"),P(j)):(e.consume(j),O)}function P(j){return e.check(RZe,$,W)(j)}function $(j){return e.enter("lineEnding"),e.consume(j),e.exit("lineEnding"),F}function F(j){return j===null||en(j)?P(j):(e.enter("htmlFlowData"),O(j))}function M(j){return j===45?(e.consume(j),D):O(j)}function B(j){return j===47?(e.consume(j),o="",U):O(j)}function U(j){if(j===62){const q=o.toLowerCase();return Lae.includes(q)?(e.consume(j),z):O(j)}return Ud(j)&&o.length<8?(e.consume(j),o+=String.fromCharCode(j),U):O(j)}function H(j){return j===93?(e.consume(j),D):O(j)}function D(j){return j===62?(e.consume(j),z):j===45&&i===2?(e.consume(j),D):O(j)}function z(j){return j===null||en(j)?(e.exit("htmlFlowData"),W(j)):(e.consume(j),z)}function W(j){return e.exit("htmlFlow"),t(j)}}function PZe(e,t,n){const r=this;return i;function i(o){return en(o)?(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),s):n(o)}function s(o){return r.parser.lazy[r.now().line]?n(o):t(o)}}function OZe(e,t,n){return r;function r(i){return e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),e.attempt(a6,t,n)}}const $Ze={name:"htmlText",tokenize:MZe};function MZe(e,t,n){const r=this;let i,s,o;return a;function a(D){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(D),u}function u(D){return D===33?(e.consume(D),l):D===47?(e.consume(D),E):D===63?(e.consume(D),b):Ud(D)?(e.consume(D),C):n(D)}function l(D){return D===45?(e.consume(D),c):D===91?(e.consume(D),s=0,p):Ud(D)?(e.consume(D),v):n(D)}function c(D){return D===45?(e.consume(D),h):n(D)}function f(D){return D===null?n(D):D===45?(e.consume(D),d):en(D)?(o=f,B(D)):(e.consume(D),f)}function d(D){return D===45?(e.consume(D),h):f(D)}function h(D){return D===62?M(D):D===45?d(D):f(D)}function p(D){const z="CDATA[";return D===z.charCodeAt(s++)?(e.consume(D),s===z.length?m:p):n(D)}function m(D){return D===null?n(D):D===93?(e.consume(D),g):en(D)?(o=m,B(D)):(e.consume(D),m)}function g(D){return D===93?(e.consume(D),y):m(D)}function y(D){return D===62?M(D):D===93?(e.consume(D),y):m(D)}function v(D){return D===null||D===62?M(D):en(D)?(o=v,B(D)):(e.consume(D),v)}function b(D){return D===null?n(D):D===63?(e.consume(D),w):en(D)?(o=b,B(D)):(e.consume(D),b)}function w(D){return D===62?M(D):b(D)}function E(D){return Ud(D)?(e.consume(D),T):n(D)}function T(D){return D===45||Tl(D)?(e.consume(D),T):S(D)}function S(D){return en(D)?(o=S,B(D)):br(D)?(e.consume(D),S):M(D)}function C(D){return D===45||Tl(D)?(e.consume(D),C):D===47||D===62||Hu(D)?A(D):n(D)}function A(D){return D===47?(e.consume(D),M):D===58||D===95||Ud(D)?(e.consume(D),k):en(D)?(o=A,B(D)):br(D)?(e.consume(D),A):M(D)}function k(D){return D===45||D===46||D===58||D===95||Tl(D)?(e.consume(D),k):N(D)}function N(D){return D===61?(e.consume(D),O):en(D)?(o=N,B(D)):br(D)?(e.consume(D),N):A(D)}function O(D){return D===null||D===60||D===61||D===62||D===96?n(D):D===34||D===39?(e.consume(D),i=D,P):en(D)?(o=O,B(D)):br(D)?(e.consume(D),O):(e.consume(D),$)}function P(D){return D===i?(e.consume(D),i=void 0,F):D===null?n(D):en(D)?(o=P,B(D)):(e.consume(D),P)}function $(D){return D===null||D===34||D===39||D===60||D===61||D===96?n(D):D===47||D===62||Hu(D)?A(D):(e.consume(D),$)}function F(D){return D===47||D===62||Hu(D)?A(D):n(D)}function M(D){return D===62?(e.consume(D),e.exit("htmlTextData"),e.exit("htmlText"),t):n(D)}function B(D){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(D),e.exit("lineEnding"),U}function U(D){return br(D)?ni(e,H,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(D):H(D)}function H(D){return e.enter("htmlTextData"),o(D)}}const BY={name:"labelEnd",tokenize:zZe,resolveTo:UZe,resolveAll:BZe},LZe={tokenize:VZe},FZe={tokenize:HZe},jZe={tokenize:qZe};function BZe(e){let t=-1;for(;++t<e.length;){const n=e[t][1];(n.type==="labelImage"||n.type==="labelLink"||n.type==="labelEnd")&&(e.splice(t+1,n.type==="labelImage"?4:2),n.type="data",t++)}return e}function UZe(e,t){let n=e.length,r=0,i,s,o,a;for(;n--;)if(i=e[n][1],s){if(i.type==="link"||i.type==="labelLink"&&i._inactive)break;e[n][0]==="enter"&&i.type==="labelLink"&&(i._inactive=!0)}else if(o){if(e[n][0]==="enter"&&(i.type==="labelImage"||i.type==="labelLink")&&!i._balanced&&(s=n,i.type!=="labelLink")){r=2;break}}else i.type==="labelEnd"&&(o=n);const u={type:e[s][1].type==="labelLink"?"link":"image",start:Object.assign({},e[s][1].start),end:Object.assign({},e[e.length-1][1].end)},l={type:"label",start:Object.assign({},e[s][1].start),end:Object.assign({},e[o][1].end)},c={type:"labelText",start:Object.assign({},e[s+r+2][1].end),end:Object.assign({},e[o-2][1].start)};return a=[["enter",u,t],["enter",l,t]],a=mc(a,e.slice(s+1,s+r+3)),a=mc(a,[["enter",c,t]]),a=mc(a,jY(t.parser.constructs.insideSpan.null,e.slice(s+r+4,o-3),t)),a=mc(a,[["exit",c,t],e[o-2],e[o-1],["exit",l,t]]),a=mc(a,e.slice(o+1)),a=mc(a,[["exit",u,t]]),Em(e,s,e.length,a),e}function zZe(e,t,n){const r=this;let i=r.events.length,s,o;for(;i--;)if((r.events[i][1].type==="labelImage"||r.events[i][1].type==="labelLink")&&!r.events[i][1]._balanced){s=r.events[i][1];break}return a;function a(d){return s?s._inactive?f(d):(o=r.parser.defined.includes(Qw(r.sliceSerialize({start:s.end,end:r.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(d),e.exit("labelMarker"),e.exit("labelEnd"),u):n(d)}function u(d){return d===40?e.attempt(LZe,c,o?c:f)(d):d===91?e.attempt(FZe,c,o?l:f)(d):o?c(d):f(d)}function l(d){return e.attempt(jZe,c,f)(d)}function c(d){return t(d)}function f(d){return s._balanced=!0,n(d)}}function VZe(e,t,n){return r;function r(f){return e.enter("resource"),e.enter("resourceMarker"),e.consume(f),e.exit("resourceMarker"),i}function i(f){return Hu(f)?vC(e,s)(f):s(f)}function s(f){return f===41?c(f):oEe(e,o,a,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(f)}function o(f){return Hu(f)?vC(e,u)(f):c(f)}function a(f){return n(f)}function u(f){return f===34||f===39||f===40?uEe(e,l,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(f):c(f)}function l(f){return Hu(f)?vC(e,c)(f):c(f)}function c(f){return f===41?(e.enter("resourceMarker"),e.consume(f),e.exit("resourceMarker"),e.exit("resource"),t):n(f)}}function HZe(e,t,n){const r=this;return i;function i(a){return aEe.call(r,e,s,o,"reference","referenceMarker","referenceString")(a)}function s(a){return r.parser.defined.includes(Qw(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?t(a):n(a)}function o(a){return n(a)}}function qZe(e,t,n){return r;function r(s){return e.enter("reference"),e.enter("referenceMarker"),e.consume(s),e.exit("referenceMarker"),i}function i(s){return s===93?(e.enter("referenceMarker"),e.consume(s),e.exit("referenceMarker"),e.exit("reference"),t):n(s)}}const WZe={name:"labelStartImage",tokenize:GZe,resolveAll:BY.resolveAll};function GZe(e,t,n){const r=this;return i;function i(a){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(a),e.exit("labelImageMarker"),s}function s(a){return a===91?(e.enter("labelMarker"),e.consume(a),e.exit("labelMarker"),e.exit("labelImage"),o):n(a)}function o(a){return a===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(a):t(a)}}const YZe={name:"labelStartLink",tokenize:KZe,resolveAll:BY.resolveAll};function KZe(e,t,n){const r=this;return i;function i(o){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(o),e.exit("labelMarker"),e.exit("labelLink"),s}function s(o){return o===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(o):t(o)}}const Yj={name:"lineEnding",tokenize:XZe};function XZe(e,t){return n;function n(r){return e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),ni(e,t,"linePrefix")}}const dP={name:"thematicBreak",tokenize:QZe};function QZe(e,t,n){let r=0,i;return s;function s(l){return e.enter("thematicBreak"),o(l)}function o(l){return i=l,a(l)}function a(l){return l===i?(e.enter("thematicBreakSequence"),u(l)):r>=3&&(l===null||en(l))?(e.exit("thematicBreak"),t(l)):n(l)}function u(l){return l===i?(e.consume(l),r++,u):(e.exit("thematicBreakSequence"),br(l)?ni(e,a,"whitespace")(l):a(l))}}const yu={name:"list",tokenize:eet,continuation:{tokenize:tet},exit:ret},JZe={tokenize:iet,partial:!0},ZZe={tokenize:net,partial:!0};function eet(e,t,n){const r=this,i=r.events[r.events.length-1];let s=i&&i[1].type==="linePrefix"?i[2].sliceSerialize(i[1],!0).length:0,o=0;return a;function a(h){const p=r.containerState.type||(h===42||h===43||h===45?"listUnordered":"listOrdered");if(p==="listUnordered"?!r.containerState.marker||h===r.containerState.marker:d7(h)){if(r.containerState.type||(r.containerState.type=p,e.enter(p,{_container:!0})),p==="listUnordered")return e.enter("listItemPrefix"),h===42||h===45?e.check(dP,n,l)(h):l(h);if(!r.interrupt||h===49)return e.enter("listItemPrefix"),e.enter("listItemValue"),u(h)}return n(h)}function u(h){return d7(h)&&++o<10?(e.consume(h),u):(!r.interrupt||o<2)&&(r.containerState.marker?h===r.containerState.marker:h===41||h===46)?(e.exit("listItemValue"),l(h)):n(h)}function l(h){return e.enter("listItemMarker"),e.consume(h),e.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||h,e.check(a6,r.interrupt?n:c,e.attempt(JZe,d,f))}function c(h){return r.containerState.initialBlankLine=!0,s++,d(h)}function f(h){return br(h)?(e.enter("listItemPrefixWhitespace"),e.consume(h),e.exit("listItemPrefixWhitespace"),d):n(h)}function d(h){return r.containerState.size=s+r.sliceSerialize(e.exit("listItemPrefix"),!0).length,t(h)}}function tet(e,t,n){const r=this;return r.containerState._closeFlow=void 0,e.check(a6,i,s);function i(a){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,ni(e,t,"listItemIndent",r.containerState.size+1)(a)}function s(a){return r.containerState.furtherBlankLines||!br(a)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,o(a)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,e.attempt(ZZe,t,o)(a))}function o(a){return r.containerState._closeFlow=!0,r.interrupt=void 0,ni(e,e.attempt(yu,t,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(a)}}function net(e,t,n){const r=this;return ni(e,i,"listItemIndent",r.containerState.size+1);function i(s){const o=r.events[r.events.length-1];return o&&o[1].type==="listItemIndent"&&o[2].sliceSerialize(o[1],!0).length===r.containerState.size?t(s):n(s)}}function ret(e){e.exit(this.containerState.type)}function iet(e,t,n){const r=this;return ni(e,i,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function i(s){const o=r.events[r.events.length-1];return!br(s)&&o&&o[1].type==="listItemPrefixWhitespace"?t(s):n(s)}}const Fae={name:"setextUnderline",tokenize:oet,resolveTo:set};function set(e,t){let n=e.length,r,i,s;for(;n--;)if(e[n][0]==="enter"){if(e[n][1].type==="content"){r=n;break}e[n][1].type==="paragraph"&&(i=n)}else e[n][1].type==="content"&&e.splice(n,1),!s&&e[n][1].type==="definition"&&(s=n);const o={type:"setextHeading",start:Object.assign({},e[i][1].start),end:Object.assign({},e[e.length-1][1].end)};return e[i][1].type="setextHeadingText",s?(e.splice(i,0,["enter",o,t]),e.splice(s+1,0,["exit",e[r][1],t]),e[r][1].end=Object.assign({},e[s][1].end)):e[r][1]=o,e.push(["exit",o,t]),e}function oet(e,t,n){const r=this;let i;return s;function s(l){let c=r.events.length,f;for(;c--;)if(r.events[c][1].type!=="lineEnding"&&r.events[c][1].type!=="linePrefix"&&r.events[c][1].type!=="content"){f=r.events[c][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||f)?(e.enter("setextHeadingLine"),i=l,o(l)):n(l)}function o(l){return e.enter("setextHeadingLineSequence"),a(l)}function a(l){return l===i?(e.consume(l),a):(e.exit("setextHeadingLineSequence"),br(l)?ni(e,u,"lineSuffix")(l):u(l))}function u(l){return l===null||en(l)?(e.exit("setextHeadingLine"),t(l)):n(l)}}const aet={tokenize:uet};function uet(e){const t=this,n=e.attempt(a6,r,e.attempt(this.parser.constructs.flowInitial,i,ni(e,e.attempt(this.parser.constructs.flow,i,e.attempt(hZe,i)),"linePrefix")));return n;function r(s){if(s===null){e.consume(s);return}return e.enter("lineEndingBlank"),e.consume(s),e.exit("lineEndingBlank"),t.currentConstruct=void 0,n}function i(s){if(s===null){e.consume(s);return}return e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),t.currentConstruct=void 0,n}}const cet={resolveAll:cEe()},fet=lEe("string"),det=lEe("text");function lEe(e){return{tokenize:t,resolveAll:cEe(e==="text"?het:void 0)};function t(n){const r=this,i=this.parser.constructs[e],s=n.attempt(i,o,a);return o;function o(c){return l(c)?s(c):a(c)}function a(c){if(c===null){n.consume(c);return}return n.enter("data"),n.consume(c),u}function u(c){return l(c)?(n.exit("data"),s(c)):(n.consume(c),u)}function l(c){if(c===null)return!0;const f=i[c];let d=-1;if(f)for(;++d<f.length;){const h=f[d];if(!h.previous||h.previous.call(r,r.previous))return!0}return!1}}}function cEe(e){return t;function t(n,r){let i=-1,s;for(;++i<=n.length;)s===void 0?n[i]&&n[i][1].type==="data"&&(s=i,i++):(!n[i]||n[i][1].type!=="data")&&(i!==s+2&&(n[s][1].end=n[i-1][1].end,n.splice(s+2,i-s-2),i=s+2),s=void 0);return e?e(n,r):n}}function het(e,t){let n=0;for(;++n<=e.length;)if((n===e.length||e[n][1].type==="lineEnding")&&e[n-1][1].type==="data"){const r=e[n-1][1],i=t.sliceStream(r);let s=i.length,o=-1,a=0,u;for(;s--;){const l=i[s];if(typeof l=="string"){for(o=l.length;l.charCodeAt(o-1)===32;)a++,o--;if(o)break;o=-1}else if(l===-2)u=!0,a++;else if(l!==-1){s++;break}}if(a){const l={type:n===e.length||u||a<2?"lineSuffix":"hardBreakTrailing",start:{line:r.end.line,column:r.end.column-a,offset:r.end.offset-a,_index:r.start._index+s,_bufferIndex:s?o:r.start._bufferIndex+o},end:Object.assign({},r.end)};r.end=Object.assign({},l.start),r.start.offset===r.end.offset?Object.assign(r,l):(e.splice(n,0,["enter",l,t],["exit",l,t]),n+=2)}n++}return e}function pet(e,t,n){let r=Object.assign(n?Object.assign({},n):{line:1,column:1,offset:0},{_index:0,_bufferIndex:-1});const i={},s=[];let o=[],a=[];const u={consume:v,enter:b,exit:w,attempt:S(E),check:S(T),interrupt:S(T,{interrupt:!0})},l={previous:null,code:null,containerState:{},events:[],parser:e,sliceStream:h,sliceSerialize:d,now:p,defineSkip:m,write:f};let c=t.tokenize.call(l,u);return t.resolveAll&&s.push(t),l;function f(N){return o=mc(o,N),g(),o[o.length-1]!==null?[]:(C(t,0),l.events=jY(s,l.events,l),l.events)}function d(N,O){return get(h(N),O)}function h(N){return met(o,N)}function p(){const{line:N,column:O,offset:P,_index:$,_bufferIndex:F}=r;return{line:N,column:O,offset:P,_index:$,_bufferIndex:F}}function m(N){i[N.line]=N.column,k()}function g(){let N;for(;r._index<o.length;){const O=o[r._index];if(typeof O=="string")for(N=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===N&&r._bufferIndex<O.length;)y(O.charCodeAt(r._bufferIndex));else y(O)}}function y(N){c=c(N)}function v(N){en(N)?(r.line++,r.column=1,r.offset+=N===-3?2:1,k()):N!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===o[r._index].length&&(r._bufferIndex=-1,r._index++)),l.previous=N}function b(N,O){const P=O||{};return P.type=N,P.start=p(),l.events.push(["enter",P,l]),a.push(P),P}function w(N){const O=a.pop();return O.end=p(),l.events.push(["exit",O,l]),O}function E(N,O){C(N,O.from)}function T(N,O){O.restore()}function S(N,O){return P;function P($,F,M){let B,U,H,D;return Array.isArray($)?W($):"tokenize"in $?W([$]):z($);function z(ne){return ce;function ce(de){const he=de!==null&&ne[de],ve=de!==null&&ne.null,Ie=[...Array.isArray(he)?he:he?[he]:[],...Array.isArray(ve)?ve:ve?[ve]:[]];return W(Ie)(de)}}function W(ne){return B=ne,U=0,ne.length===0?M:j(ne[U])}function j(ne){return ce;function ce(de){return D=A(),H=ne,ne.partial||(l.currentConstruct=ne),ne.name&&l.parser.constructs.disable.null.includes(ne.name)?G():ne.tokenize.call(O?Object.assign(Object.create(l),O):l,u,q,G)(de)}}function q(ne){return N(H,D),F}function G(ne){return D.restore(),++U<B.length?j(B[U]):M}}}function C(N,O){N.resolveAll&&!s.includes(N)&&s.push(N),N.resolve&&Em(l.events,O,l.events.length-O,N.resolve(l.events.slice(O),l)),N.resolveTo&&(l.events=N.resolveTo(l.events,l))}function A(){const N=p(),O=l.previous,P=l.currentConstruct,$=l.events.length,F=Array.from(a);return{restore:M,from:$};function M(){r=N,l.previous=O,l.currentConstruct=P,l.events.length=$,a=F,k()}}function k(){r.line in i&&r.column<2&&(r.column=i[r.line],r.offset+=i[r.line]-1)}}function met(e,t){const n=t.start._index,r=t.start._bufferIndex,i=t.end._index,s=t.end._bufferIndex;let o;if(n===i)o=[e[n].slice(r,s)];else{if(o=e.slice(n,i),r>-1){const a=o[0];typeof a=="string"?o[0]=a.slice(r):o.shift()}s>0&&o.push(e[i].slice(0,s))}return o}function get(e,t){let n=-1;const r=[];let i;for(;++n<e.length;){const s=e[n];let o;if(typeof s=="string")o=s;else switch(s){case-5:{o="\r";break}case-4:{o=`
`;break}case-3:{o=`\r
`;break}case-2:{o=t?" ":"	";break}case-1:{if(!t&&i)continue;o=" ";break}default:o=String.fromCharCode(s)}i=s===-2,r.push(o)}return r.join("")}const yet={42:yu,43:yu,45:yu,48:yu,49:yu,50:yu,51:yu,52:yu,53:yu,54:yu,55:yu,56:yu,57:yu,62:nEe},vet={91:vZe},bet={[-2]:Gj,[-1]:Gj,32:Gj},_et={35:SZe,42:dP,45:[Fae,dP],60:IZe,61:Fae,95:dP,96:Mae,126:Mae},wet={38:iEe,92:rEe},Eet={[-5]:Yj,[-4]:Yj,[-3]:Yj,33:WZe,38:iEe,42:h7,60:[YJe,$Ze],91:YZe,92:[EZe,rEe],93:BY,95:h7,96:aZe},xet={null:[h7,cet]},Tet={null:[42,95]},Cet={null:[]},Aet=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:Tet,contentInitial:vet,disable:Cet,document:yet,flow:_et,flowInitial:bet,insideSpan:xet,string:wet,text:Eet},Symbol.toStringTag,{value:"Module"}));function Iet(e){const n=PJe([Aet,...(e||{}).extensions||[]]),r={defined:[],lazy:{},constructs:n,content:i(UJe),document:i(VJe),flow:i(aet),string:i(fet),text:i(det)};return r;function i(s){return o;function o(a){return pet(r,s,a)}}}function ket(e){for(;!sEe(e););return e}const jae=/[\0\t\n\r]/g;function Ret(){let e=1,t="",n=!0,r;return i;function i(s,o,a){const u=[];let l,c,f,d,h;for(s=t+(typeof s=="string"?s.toString():new TextDecoder(o||void 0).decode(s)),f=0,t="",n&&(s.charCodeAt(0)===65279&&f++,n=void 0);f<s.length;){if(jae.lastIndex=f,l=jae.exec(s),d=l&&l.index!==void 0?l.index:s.length,h=s.charCodeAt(d),!l){t=s.slice(f);break}if(h===10&&f===d&&r)u.push(-3),r=void 0;else switch(r&&(u.push(-5),r=void 0),f<d&&(u.push(s.slice(f,d)),e+=d-f),h){case 0:{u.push(65533),e++;break}case 9:{for(c=Math.ceil(e/4)*4,u.push(-2);e++<c;)u.push(-1);break}case 10:{u.push(-4),e=1;break}default:r=!0,e=1}f=d+1}return a&&(r&&u.push(-5),t&&u.push(t),u.push(null)),u}}const Net=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function Det(e){return e.replace(Net,Pet)}function Pet(e,t,n){if(t)return t;if(n.charCodeAt(0)===35){const i=n.charCodeAt(1),s=i===120||i===88;return tEe(n.slice(s?2:1),s?16:10)}return FY(n)||e}const fEe={}.hasOwnProperty;function Oet(e,t,n){return typeof t!="string"&&(n=t,t=void 0),$et(n)(ket(Iet(n).document().write(Ret()(e,t,!0))))}function $et(e){const t={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:s(ze),autolinkProtocol:A,autolinkEmail:A,atxHeading:s(yt),blockQuote:s(ve),characterEscape:A,characterReference:A,codeFenced:s(Ie),codeFencedFenceInfo:o,codeFencedFenceMeta:o,codeIndented:s(Ie,o),codeText:s(be,o),codeTextData:A,data:A,codeFlowValue:A,definition:s(Ke),definitionDestinationString:o,definitionLabelString:o,definitionTitleString:o,emphasis:s(Ue),hardBreakEscape:s(it),hardBreakTrailing:s(it),htmlFlow:s(_e,o),htmlFlowData:A,htmlText:s(_e,o),htmlTextData:A,image:s(ke),label:o,link:s(ze),listItem:s(Ot),listItemValue:d,listOrdered:s(ct,f),listUnordered:s(ct),paragraph:s(We),reference:j,referenceString:o,resourceDestinationString:o,resourceTitleString:o,setextHeading:s(yt),strong:s(ge),thematicBreak:s(vt)},exit:{atxHeading:u(),atxHeadingSequence:E,autolink:u(),autolinkEmail:he,autolinkProtocol:de,blockQuote:u(),characterEscapeValue:k,characterReferenceMarkerHexadecimal:G,characterReferenceMarkerNumeric:G,characterReferenceValue:ne,characterReference:ce,codeFenced:u(g),codeFencedFence:m,codeFencedFenceInfo:h,codeFencedFenceMeta:p,codeFlowValue:k,codeIndented:u(y),codeText:u(F),codeTextData:k,data:k,definition:u(),definitionDestinationString:w,definitionLabelString:v,definitionTitleString:b,emphasis:u(),hardBreakEscape:u(O),hardBreakTrailing:u(O),htmlFlow:u(P),htmlFlowData:k,htmlText:u($),htmlTextData:k,image:u(B),label:H,labelText:U,lineEnding:N,link:u(M),listItem:u(),listOrdered:u(),listUnordered:u(),paragraph:u(),referenceString:q,resourceDestinationString:D,resourceTitleString:z,resource:W,setextHeading:u(C),setextHeadingLineSequence:S,setextHeadingText:T,strong:u(),thematicBreak:u()}};dEe(t,(e||{}).mdastExtensions||[]);const n={};return r;function r(me){let Ae={type:"root",children:[]};const He={stack:[Ae],tokenStack:[],config:t,enter:a,exit:l,buffer:o,resume:c,data:n},ut=[];let _t=-1;for(;++_t<me.length;)if(me[_t][1].type==="listOrdered"||me[_t][1].type==="listUnordered")if(me[_t][0]==="enter")ut.push(_t);else{const Ln=ut.pop();_t=i(me,Ln,_t)}for(_t=-1;++_t<me.length;){const Ln=t[me[_t][0]];fEe.call(Ln,me[_t][1].type)&&Ln[me[_t][1].type].call(Object.assign({sliceSerialize:me[_t][2].sliceSerialize},He),me[_t][1])}if(He.tokenStack.length>0){const Ln=He.tokenStack[He.tokenStack.length-1];(Ln[1]||Bae).call(He,void 0,Ln[0])}for(Ae.position={start:yg(me.length>0?me[0][1].start:{line:1,column:1,offset:0}),end:yg(me.length>0?me[me.length-2][1].end:{line:1,column:1,offset:0})},_t=-1;++_t<t.transforms.length;)Ae=t.transforms[_t](Ae)||Ae;return Ae}function i(me,Ae,He){let ut=Ae-1,_t=-1,Ln=!1,Cr,Fn,cr,gn;for(;++ut<=He;){const An=me[ut];switch(An[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{An[0]==="enter"?_t++:_t--,gn=void 0;break}case"lineEndingBlank":{An[0]==="enter"&&(Cr&&!gn&&!_t&&!cr&&(cr=ut),gn=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:gn=void 0}if(!_t&&An[0]==="enter"&&An[1].type==="listItemPrefix"||_t===-1&&An[0]==="exit"&&(An[1].type==="listUnordered"||An[1].type==="listOrdered")){if(Cr){let nr=ut;for(Fn=void 0;nr--;){const rr=me[nr];if(rr[1].type==="lineEnding"||rr[1].type==="lineEndingBlank"){if(rr[0]==="exit")continue;Fn&&(me[Fn][1].type="lineEndingBlank",Ln=!0),rr[1].type="lineEnding",Fn=nr}else if(!(rr[1].type==="linePrefix"||rr[1].type==="blockQuotePrefix"||rr[1].type==="blockQuotePrefixWhitespace"||rr[1].type==="blockQuoteMarker"||rr[1].type==="listItemIndent"))break}cr&&(!Fn||cr<Fn)&&(Cr._spread=!0),Cr.end=Object.assign({},Fn?me[Fn][1].start:An[1].end),me.splice(Fn||ut,0,["exit",Cr,An[2]]),ut++,He++}if(An[1].type==="listItemPrefix"){const nr={type:"listItem",_spread:!1,start:Object.assign({},An[1].start),end:void 0};Cr=nr,me.splice(ut,0,["enter",nr,An[2]]),ut++,He++,cr=void 0,gn=!0}}}return me[Ae][1]._spread=Ln,He}function s(me,Ae){return He;function He(ut){a.call(this,me(ut),ut),Ae&&Ae.call(this,ut)}}function o(){this.stack.push({type:"fragment",children:[]})}function a(me,Ae,He){this.stack[this.stack.length-1].children.push(me),this.stack.push(me),this.tokenStack.push([Ae,He]),me.position={start:yg(Ae.start),end:void 0}}function u(me){return Ae;function Ae(He){me&&me.call(this,He),l.call(this,He)}}function l(me,Ae){const He=this.stack.pop(),ut=this.tokenStack.pop();if(ut)ut[0].type!==me.type&&(Ae?Ae.call(this,me,ut[0]):(ut[1]||Bae).call(this,me,ut[0]));else throw new Error("Cannot close `"+me.type+"` ("+yC({start:me.start,end:me.end})+"): its not open");He.position.end=yg(me.end)}function c(){return NJe(this.stack.pop())}function f(){this.data.expectingFirstListItemValue=!0}function d(me){if(this.data.expectingFirstListItemValue){const Ae=this.stack[this.stack.length-2];Ae.start=Number.parseInt(this.sliceSerialize(me),10),this.data.expectingFirstListItemValue=void 0}}function h(){const me=this.resume(),Ae=this.stack[this.stack.length-1];Ae.lang=me}function p(){const me=this.resume(),Ae=this.stack[this.stack.length-1];Ae.meta=me}function m(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function g(){const me=this.resume(),Ae=this.stack[this.stack.length-1];Ae.value=me.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function y(){const me=this.resume(),Ae=this.stack[this.stack.length-1];Ae.value=me.replace(/(\r?\n|\r)$/g,"")}function v(me){const Ae=this.resume(),He=this.stack[this.stack.length-1];He.label=Ae,He.identifier=Qw(this.sliceSerialize(me)).toLowerCase()}function b(){const me=this.resume(),Ae=this.stack[this.stack.length-1];Ae.title=me}function w(){const me=this.resume(),Ae=this.stack[this.stack.length-1];Ae.url=me}function E(me){const Ae=this.stack[this.stack.length-1];if(!Ae.depth){const He=this.sliceSerialize(me).length;Ae.depth=He}}function T(){this.data.setextHeadingSlurpLineEnding=!0}function S(me){const Ae=this.stack[this.stack.length-1];Ae.depth=this.sliceSerialize(me).codePointAt(0)===61?1:2}function C(){this.data.setextHeadingSlurpLineEnding=void 0}function A(me){const He=this.stack[this.stack.length-1].children;let ut=He[He.length-1];(!ut||ut.type!=="text")&&(ut=ht(),ut.position={start:yg(me.start),end:void 0},He.push(ut)),this.stack.push(ut)}function k(me){const Ae=this.stack.pop();Ae.value+=this.sliceSerialize(me),Ae.position.end=yg(me.end)}function N(me){const Ae=this.stack[this.stack.length-1];if(this.data.atHardBreak){const He=Ae.children[Ae.children.length-1];He.position.end=yg(me.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&t.canContainEols.includes(Ae.type)&&(A.call(this,me),k.call(this,me))}function O(){this.data.atHardBreak=!0}function P(){const me=this.resume(),Ae=this.stack[this.stack.length-1];Ae.value=me}function $(){const me=this.resume(),Ae=this.stack[this.stack.length-1];Ae.value=me}function F(){const me=this.resume(),Ae=this.stack[this.stack.length-1];Ae.value=me}function M(){const me=this.stack[this.stack.length-1];if(this.data.inReference){const Ae=this.data.referenceType||"shortcut";me.type+="Reference",me.referenceType=Ae,delete me.url,delete me.title}else delete me.identifier,delete me.label;this.data.referenceType=void 0}function B(){const me=this.stack[this.stack.length-1];if(this.data.inReference){const Ae=this.data.referenceType||"shortcut";me.type+="Reference",me.referenceType=Ae,delete me.url,delete me.title}else delete me.identifier,delete me.label;this.data.referenceType=void 0}function U(me){const Ae=this.sliceSerialize(me),He=this.stack[this.stack.length-2];He.label=Det(Ae),He.identifier=Qw(Ae).toLowerCase()}function H(){const me=this.stack[this.stack.length-1],Ae=this.resume(),He=this.stack[this.stack.length-1];if(this.data.inReference=!0,He.type==="link"){const ut=me.children;He.children=ut}else He.alt=Ae}function D(){const me=this.resume(),Ae=this.stack[this.stack.length-1];Ae.url=me}function z(){const me=this.resume(),Ae=this.stack[this.stack.length-1];Ae.title=me}function W(){this.data.inReference=void 0}function j(){this.data.referenceType="collapsed"}function q(me){const Ae=this.resume(),He=this.stack[this.stack.length-1];He.label=Ae,He.identifier=Qw(this.sliceSerialize(me)).toLowerCase(),this.data.referenceType="full"}function G(me){this.data.characterReferenceType=me.type}function ne(me){const Ae=this.sliceSerialize(me),He=this.data.characterReferenceType;let ut;He?(ut=tEe(Ae,He==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):ut=FY(Ae);const _t=this.stack[this.stack.length-1];_t.value+=ut}function ce(me){const Ae=this.stack.pop();Ae.position.end=yg(me.end)}function de(me){k.call(this,me);const Ae=this.stack[this.stack.length-1];Ae.url=this.sliceSerialize(me)}function he(me){k.call(this,me);const Ae=this.stack[this.stack.length-1];Ae.url="mailto:"+this.sliceSerialize(me)}function ve(){return{type:"blockquote",children:[]}}function Ie(){return{type:"code",lang:null,meta:null,value:""}}function be(){return{type:"inlineCode",value:""}}function Ke(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function Ue(){return{type:"emphasis",children:[]}}function yt(){return{type:"heading",depth:0,children:[]}}function it(){return{type:"break"}}function _e(){return{type:"html",value:""}}function ke(){return{type:"image",title:null,url:"",alt:null}}function ze(){return{type:"link",title:null,url:"",children:[]}}function ct(me){return{type:"list",ordered:me.type==="listOrdered",start:null,spread:me._spread,children:[]}}function Ot(me){return{type:"listItem",spread:me._spread,checked:null,children:[]}}function We(){return{type:"paragraph",children:[]}}function ge(){return{type:"strong",children:[]}}function ht(){return{type:"text",value:""}}function vt(){return{type:"thematicBreak"}}}function yg(e){return{line:e.line,column:e.column,offset:e.offset}}function dEe(e,t){let n=-1;for(;++n<t.length;){const r=t[n];Array.isArray(r)?dEe(e,r):Met(e,r)}}function Met(e,t){let n;for(n in t)if(fEe.call(t,n))switch(n){case"canContainEols":{const r=t[n];r&&e[n].push(...r);break}case"transforms":{const r=t[n];r&&e[n].push(...r);break}case"enter":case"exit":{const r=t[n];r&&Object.assign(e[n],r);break}}}function Bae(e,t){throw e?new Error("Cannot close `"+e.type+"` ("+yC({start:e.start,end:e.end})+"): a different token (`"+t.type+"`, "+yC({start:t.start,end:t.end})+") is open"):new Error("Cannot close document, a token (`"+t.type+"`, "+yC({start:t.start,end:t.end})+") is still open")}function Let(e){const t=this;t.parser=n;function n(r){return Oet(r,{...t.data("settings"),...e,extensions:t.data("micromarkExtensions")||[],mdastExtensions:t.data("fromMarkdownExtensions")||[]})}}function Fet(e,t){const n={type:"element",tagName:"blockquote",properties:{},children:e.wrap(e.all(t),!0)};return e.patch(t,n),e.applyData(t,n)}function jet(e,t){const n={type:"element",tagName:"br",properties:{},children:[]};return e.patch(t,n),[e.applyData(t,n),{type:"text",value:`
`}]}function Bet(e,t){const n=t.value?t.value+`
`:"",r={};t.lang&&(r.className=["language-"+t.lang]);let i={type:"element",tagName:"code",properties:r,children:[{type:"text",value:n}]};return t.meta&&(i.data={meta:t.meta}),e.patch(t,i),i=e.applyData(t,i),i={type:"element",tagName:"pre",properties:{},children:[i]},e.patch(t,i),i}function Uet(e,t){const n={type:"element",tagName:"del",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function zet(e,t){const n={type:"element",tagName:"em",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function Vet(e,t){const n=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",r=String(t.identifier).toUpperCase(),i=lS(r.toLowerCase()),s=e.footnoteOrder.indexOf(r);let o,a=e.footnoteCounts.get(r);a===void 0?(a=0,e.footnoteOrder.push(r),o=e.footnoteOrder.length):o=s+1,a+=1,e.footnoteCounts.set(r,a);const u={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+i,id:n+"fnref-"+i+(a>1?"-"+a:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(o)}]};e.patch(t,u);const l={type:"element",tagName:"sup",properties:{},children:[u]};return e.patch(t,l),e.applyData(t,l)}function Het(e,t){const n={type:"element",tagName:"h"+t.depth,properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function qet(e,t){if(e.options.allowDangerousHtml){const n={type:"raw",value:t.value};return e.patch(t,n),e.applyData(t,n)}}function hEe(e,t){const n=t.referenceType;let r="]";if(n==="collapsed"?r+="[]":n==="full"&&(r+="["+(t.label||t.identifier)+"]"),t.type==="imageReference")return[{type:"text",value:"!["+t.alt+r}];const i=e.all(t),s=i[0];s&&s.type==="text"?s.value="["+s.value:i.unshift({type:"text",value:"["});const o=i[i.length-1];return o&&o.type==="text"?o.value+=r:i.push({type:"text",value:r}),i}function Wet(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return hEe(e,t);const i={src:lS(r.url||""),alt:t.alt};r.title!==null&&r.title!==void 0&&(i.title=r.title);const s={type:"element",tagName:"img",properties:i,children:[]};return e.patch(t,s),e.applyData(t,s)}function Get(e,t){const n={src:lS(t.url)};t.alt!==null&&t.alt!==void 0&&(n.alt=t.alt),t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"img",properties:n,children:[]};return e.patch(t,r),e.applyData(t,r)}function Yet(e,t){const n={type:"text",value:t.value.replace(/\r?\n|\r/g," ")};e.patch(t,n);const r={type:"element",tagName:"code",properties:{},children:[n]};return e.patch(t,r),e.applyData(t,r)}function Ket(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return hEe(e,t);const i={href:lS(r.url||"")};r.title!==null&&r.title!==void 0&&(i.title=r.title);const s={type:"element",tagName:"a",properties:i,children:e.all(t)};return e.patch(t,s),e.applyData(t,s)}function Xet(e,t){const n={href:lS(t.url)};t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"a",properties:n,children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function Qet(e,t,n){const r=e.all(t),i=n?Jet(n):pEe(t),s={},o=[];if(typeof t.checked=="boolean"){const c=r[0];let f;c&&c.type==="element"&&c.tagName==="p"?f=c:(f={type:"element",tagName:"p",properties:{},children:[]},r.unshift(f)),f.children.length>0&&f.children.unshift({type:"text",value:" "}),f.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:t.checked,disabled:!0},children:[]}),s.className=["task-list-item"]}let a=-1;for(;++a<r.length;){const c=r[a];(i||a!==0||c.type!=="element"||c.tagName!=="p")&&o.push({type:"text",value:`
`}),c.type==="element"&&c.tagName==="p"&&!i?o.push(...c.children):o.push(c)}const u=r[r.length-1];u&&(i||u.type!=="element"||u.tagName!=="p")&&o.push({type:"text",value:`
`});const l={type:"element",tagName:"li",properties:s,children:o};return e.patch(t,l),e.applyData(t,l)}function Jet(e){let t=!1;if(e.type==="list"){t=e.spread||!1;const n=e.children;let r=-1;for(;!t&&++r<n.length;)t=pEe(n[r])}return t}function pEe(e){const t=e.spread;return t??e.children.length>1}function Zet(e,t){const n={},r=e.all(t);let i=-1;for(typeof t.start=="number"&&t.start!==1&&(n.start=t.start);++i<r.length;){const o=r[i];if(o.type==="element"&&o.tagName==="li"&&o.properties&&Array.isArray(o.properties.className)&&o.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const s={type:"element",tagName:t.ordered?"ol":"ul",properties:n,children:e.wrap(r,!0)};return e.patch(t,s),e.applyData(t,s)}function ett(e,t){const n={type:"element",tagName:"p",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function ttt(e,t){const n={type:"root",children:e.wrap(e.all(t))};return e.patch(t,n),e.applyData(t,n)}function ntt(e,t){const n={type:"element",tagName:"strong",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function rtt(e,t){const n=e.all(t),r=n.shift(),i=[];if(r){const o={type:"element",tagName:"thead",properties:{},children:e.wrap([r],!0)};e.patch(t.children[0],o),i.push(o)}if(n.length>0){const o={type:"element",tagName:"tbody",properties:{},children:e.wrap(n,!0)},a=Yh(t.children[1]),u=o6(t.children[t.children.length-1]);a&&u&&(o.position={start:a,end:u}),i.push(o)}const s={type:"element",tagName:"table",properties:{},children:e.wrap(i,!0)};return e.patch(t,s),e.applyData(t,s)}function itt(e,t,n){const r=n?n.children:void 0,s=(r?r.indexOf(t):1)===0?"th":"td",o=n&&n.type==="table"?n.align:void 0,a=o?o.length:t.children.length;let u=-1;const l=[];for(;++u<a;){const f=t.children[u],d={},h=o?o[u]:void 0;h&&(d.align=h);let p={type:"element",tagName:s,properties:d,children:[]};f&&(p.children=e.all(f),e.patch(f,p),p=e.applyData(f,p)),l.push(p)}const c={type:"element",tagName:"tr",properties:{},children:e.wrap(l,!0)};return e.patch(t,c),e.applyData(t,c)}function stt(e,t){const n={type:"element",tagName:"td",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}const Uae=9,zae=32;function ott(e){const t=String(e),n=/\r?\n|\r/g;let r=n.exec(t),i=0;const s=[];for(;r;)s.push(Vae(t.slice(i,r.index),i>0,!0),r[0]),i=r.index+r[0].length,r=n.exec(t);return s.push(Vae(t.slice(i),i>0,!1)),s.join("")}function Vae(e,t,n){let r=0,i=e.length;if(t){let s=e.codePointAt(r);for(;s===Uae||s===zae;)r++,s=e.codePointAt(r)}if(n){let s=e.codePointAt(i-1);for(;s===Uae||s===zae;)i--,s=e.codePointAt(i-1)}return i>r?e.slice(r,i):""}function att(e,t){const n={type:"text",value:ott(String(t.value))};return e.patch(t,n),e.applyData(t,n)}function utt(e,t){const n={type:"element",tagName:"hr",properties:{},children:[]};return e.patch(t,n),e.applyData(t,n)}const ltt={blockquote:Fet,break:jet,code:Bet,delete:Uet,emphasis:zet,footnoteReference:Vet,heading:Het,html:qet,imageReference:Wet,image:Get,inlineCode:Yet,linkReference:Ket,link:Xet,listItem:Qet,list:Zet,paragraph:ett,root:ttt,strong:ntt,table:rtt,tableCell:stt,tableRow:itt,text:att,thematicBreak:utt,toml:kN,yaml:kN,definition:kN,footnoteDefinition:kN};function kN(){}const mEe=-1,u6=0,ZO=1,e3=2,UY=3,zY=4,VY=5,HY=6,gEe=7,yEe=8,Hae=typeof self=="object"?self:globalThis,ctt=(e,t)=>{const n=(i,s)=>(e.set(s,i),i),r=i=>{if(e.has(i))return e.get(i);const[s,o]=t[i];switch(s){case u6:case mEe:return n(o,i);case ZO:{const a=n([],i);for(const u of o)a.push(r(u));return a}case e3:{const a=n({},i);for(const[u,l]of o)a[r(u)]=r(l);return a}case UY:return n(new Date(o),i);case zY:{const{source:a,flags:u}=o;return n(new RegExp(a,u),i)}case VY:{const a=n(new Map,i);for(const[u,l]of o)a.set(r(u),r(l));return a}case HY:{const a=n(new Set,i);for(const u of o)a.add(r(u));return a}case gEe:{const{name:a,message:u}=o;return n(new Hae[a](u),i)}case yEe:return n(BigInt(o),i);case"BigInt":return n(Object(BigInt(o)),i)}return n(new Hae[s](o),i)};return r},qae=e=>ctt(new Map,e)(0),R_="",{toString:ftt}={},{keys:dtt}=Object,ST=e=>{const t=typeof e;if(t!=="object"||!e)return[u6,t];const n=ftt.call(e).slice(8,-1);switch(n){case"Array":return[ZO,R_];case"Object":return[e3,R_];case"Date":return[UY,R_];case"RegExp":return[zY,R_];case"Map":return[VY,R_];case"Set":return[HY,R_]}return n.includes("Array")?[ZO,n]:n.includes("Error")?[gEe,n]:[e3,n]},RN=([e,t])=>e===u6&&(t==="function"||t==="symbol"),htt=(e,t,n,r)=>{const i=(o,a)=>{const u=r.push(o)-1;return n.set(a,u),u},s=o=>{if(n.has(o))return n.get(o);let[a,u]=ST(o);switch(a){case u6:{let c=o;switch(u){case"bigint":a=yEe,c=o.toString();break;case"function":case"symbol":if(e)throw new TypeError("unable to serialize "+u);c=null;break;case"undefined":return i([mEe],o)}return i([a,c],o)}case ZO:{if(u)return i([u,[...o]],o);const c=[],f=i([a,c],o);for(const d of o)c.push(s(d));return f}case e3:{if(u)switch(u){case"BigInt":return i([u,o.toString()],o);case"Boolean":case"Number":case"String":return i([u,o.valueOf()],o)}if(t&&"toJSON"in o)return s(o.toJSON());const c=[],f=i([a,c],o);for(const d of dtt(o))(e||!RN(ST(o[d])))&&c.push([s(d),s(o[d])]);return f}case UY:return i([a,o.toISOString()],o);case zY:{const{source:c,flags:f}=o;return i([a,{source:c,flags:f}],o)}case VY:{const c=[],f=i([a,c],o);for(const[d,h]of o)(e||!(RN(ST(d))||RN(ST(h))))&&c.push([s(d),s(h)]);return f}case HY:{const c=[],f=i([a,c],o);for(const d of o)(e||!RN(ST(d)))&&c.push(s(d));return f}}const{message:l}=o;return i([a,{name:u,message:l}],o)};return s},Wae=(e,{json:t,lossy:n}={})=>{const r=[];return htt(!(t||n),!!t,new Map,r)(e),r},FE=typeof structuredClone=="function"?(e,t)=>t&&("json"in t||"lossy"in t)?qae(Wae(e,t)):structuredClone(e):(e,t)=>qae(Wae(e,t));function ptt(e,t){const n=[{type:"text",value:""}];return t>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(t)}]}),n}function mtt(e,t){return"Back to reference "+(e+1)+(t>1?"-"+t:"")}function gtt(e){const t=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",n=e.options.footnoteBackContent||ptt,r=e.options.footnoteBackLabel||mtt,i=e.options.footnoteLabel||"Footnotes",s=e.options.footnoteLabelTagName||"h2",o=e.options.footnoteLabelProperties||{className:["sr-only"]},a=[];let u=-1;for(;++u<e.footnoteOrder.length;){const l=e.footnoteById.get(e.footnoteOrder[u]);if(!l)continue;const c=e.all(l),f=String(l.identifier).toUpperCase(),d=lS(f.toLowerCase());let h=0;const p=[],m=e.footnoteCounts.get(f);for(;m!==void 0&&++h<=m;){p.length>0&&p.push({type:"text",value:" "});let v=typeof n=="string"?n:n(u,h);typeof v=="string"&&(v={type:"text",value:v}),p.push({type:"element",tagName:"a",properties:{href:"#"+t+"fnref-"+d+(h>1?"-"+h:""),dataFootnoteBackref:"",ariaLabel:typeof r=="string"?r:r(u,h),className:["data-footnote-backref"]},children:Array.isArray(v)?v:[v]})}const g=c[c.length-1];if(g&&g.type==="element"&&g.tagName==="p"){const v=g.children[g.children.length-1];v&&v.type==="text"?v.value+=" ":g.children.push({type:"text",value:" "}),g.children.push(...p)}else c.push(...p);const y={type:"element",tagName:"li",properties:{id:t+"fn-"+d},children:e.wrap(c,!0)};e.patch(l,y),a.push(y)}if(a.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:s,properties:{...FE(o),id:"footnote-label"},children:[{type:"text",value:i}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:e.wrap(a,!0)},{type:"text",value:`
`}]}}const vEe=function(e){if(e==null)return _tt;if(typeof e=="function")return l6(e);if(typeof e=="object")return Array.isArray(e)?ytt(e):vtt(e);if(typeof e=="string")return btt(e);throw new Error("Expected function, string, or object as test")};function ytt(e){const t=[];let n=-1;for(;++n<e.length;)t[n]=vEe(e[n]);return l6(r);function r(...i){let s=-1;for(;++s<t.length;)if(t[s].apply(this,i))return!0;return!1}}function vtt(e){const t=e;return l6(n);function n(r){const i=r;let s;for(s in e)if(i[s]!==t[s])return!1;return!0}}function btt(e){return l6(t);function t(n){return n&&n.type===e}}function l6(e){return t;function t(n,r,i){return!!(wtt(n)&&e.call(this,n,typeof r=="number"?r:void 0,i||void 0))}}function _tt(){return!0}function wtt(e){return e!==null&&typeof e=="object"&&"type"in e}const bEe=[],Ett=!0,Gae=!1,xtt="skip";function Stt(e,t,n,r){let i;typeof t=="function"&&typeof n!="function"?(r=n,n=t):i=t;const s=vEe(i),o=r?-1:1;a(e,void 0,[])();function a(u,l,c){const f=u&&typeof u=="object"?u:{};if(typeof f.type=="string"){const h=typeof f.tagName=="string"?f.tagName:typeof f.name=="string"?f.name:void 0;Object.defineProperty(d,"name",{value:"node ("+(u.type+(h?"<"+h+">":""))+")"})}return d;function d(){let h=bEe,p,m,g;if((!t||s(u,l,c[c.length-1]||void 0))&&(h=Ttt(n(u,c)),h[0]===Gae))return h;if("children"in u&&u.children){const y=u;if(y.children&&h[0]!==xtt)for(m=(r?y.children.length:-1)+o,g=c.concat(y);m>-1&&m<y.children.length;){const v=y.children[m];if(p=a(v,m,g)(),p[0]===Gae)return p;m=typeof p[1]=="number"?p[1]:m+o}}return h}}}function Ttt(e){return Array.isArray(e)?e:typeof e=="number"?[Ett,e]:e==null?bEe:[e]}function qY(e,t,n,r){let i,s,o;typeof t=="function"&&typeof n!="function"?(s=void 0,o=t,i=n):(s=t,o=n,i=r),Stt(e,s,a,i);function a(u,l){const c=l[l.length-1],f=c?c.children.indexOf(u):void 0;return o(u,f,c)}}const p7={}.hasOwnProperty,Ctt={};function Att(e,t){const n=t||Ctt,r=new Map,i=new Map,s=new Map,o={...ltt,...n.handlers},a={all:l,applyData:ktt,definitionById:r,footnoteById:i,footnoteCounts:s,footnoteOrder:[],handlers:o,one:u,options:n,patch:Itt,wrap:Ntt};return qY(e,function(c){if(c.type==="definition"||c.type==="footnoteDefinition"){const f=c.type==="definition"?r:i,d=String(c.identifier).toUpperCase();f.has(d)||f.set(d,c)}}),a;function u(c,f){const d=c.type,h=a.handlers[d];if(p7.call(a.handlers,d)&&h)return h(a,c,f);if(a.options.passThrough&&a.options.passThrough.includes(d)){if("children"in c){const{children:m,...g}=c,y=FE(g);return y.children=a.all(c),y}return FE(c)}return(a.options.unknownHandler||Rtt)(a,c,f)}function l(c){const f=[];if("children"in c){const d=c.children;let h=-1;for(;++h<d.length;){const p=a.one(d[h],c);if(p){if(h&&d[h-1].type==="break"&&(!Array.isArray(p)&&p.type==="text"&&(p.value=Yae(p.value)),!Array.isArray(p)&&p.type==="element")){const m=p.children[0];m&&m.type==="text"&&(m.value=Yae(m.value))}Array.isArray(p)?f.push(...p):f.push(p)}}}return f}}function Itt(e,t){e.position&&(t.position=aJe(e))}function ktt(e,t){let n=t;if(e&&e.data){const r=e.data.hName,i=e.data.hChildren,s=e.data.hProperties;if(typeof r=="string")if(n.type==="element")n.tagName=r;else{const o="children"in n?n.children:[n];n={type:"element",tagName:r,properties:{},children:o}}n.type==="element"&&s&&Object.assign(n.properties,FE(s)),"children"in n&&n.children&&i!==null&&i!==void 0&&(n.children=i)}return n}function Rtt(e,t){const n=t.data||{},r="value"in t&&!(p7.call(n,"hProperties")||p7.call(n,"hChildren"))?{type:"text",value:t.value}:{type:"element",tagName:"div",properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function Ntt(e,t){const n=[];let r=-1;for(t&&n.push({type:"text",value:`
`});++r<e.length;)r&&n.push({type:"text",value:`
`}),n.push(e[r]);return t&&e.length>0&&n.push({type:"text",value:`
`}),n}function Yae(e){let t=0,n=e.charCodeAt(t);for(;n===9||n===32;)t++,n=e.charCodeAt(t);return e.slice(t)}function Kae(e,t){const n=Att(e,t),r=n.one(e,void 0),i=gtt(n),s=Array.isArray(r)?{type:"root",children:r}:r||{type:"root",children:[]};return i&&s.children.push({type:"text",value:`
`},i),s}function Dtt(e,t){return e&&"run"in e?async function(n,r){const i=Kae(n,{file:r,...t});await e.run(i,r)}:function(n,r){return Kae(n,{file:r,...t||e})}}function Xae(e){if(e)throw e}var hP=Object.prototype.hasOwnProperty,_Ee=Object.prototype.toString,Qae=Object.defineProperty,Jae=Object.getOwnPropertyDescriptor,Zae=function(t){return typeof Array.isArray=="function"?Array.isArray(t):_Ee.call(t)==="[object Array]"},eue=function(t){if(!t||_Ee.call(t)!=="[object Object]")return!1;var n=hP.call(t,"constructor"),r=t.constructor&&t.constructor.prototype&&hP.call(t.constructor.prototype,"isPrototypeOf");if(t.constructor&&!n&&!r)return!1;var i;for(i in t);return typeof i>"u"||hP.call(t,i)},tue=function(t,n){Qae&&n.name==="__proto__"?Qae(t,n.name,{enumerable:!0,configurable:!0,value:n.newValue,writable:!0}):t[n.name]=n.newValue},nue=function(t,n){if(n==="__proto__")if(hP.call(t,n)){if(Jae)return Jae(t,n).value}else return;return t[n]},Ptt=function e(){var t,n,r,i,s,o,a=arguments[0],u=1,l=arguments.length,c=!1;for(typeof a=="boolean"&&(c=a,a=arguments[1]||{},u=2),(a==null||typeof a!="object"&&typeof a!="function")&&(a={});u<l;++u)if(t=arguments[u],t!=null)for(n in t)r=nue(a,n),i=nue(t,n),a!==i&&(c&&i&&(eue(i)||(s=Zae(i)))?(s?(s=!1,o=r&&Zae(r)?r:[]):o=r&&eue(r)?r:{},tue(a,{name:n,newValue:e(c,o,i)})):typeof i<"u"&&tue(a,{name:n,newValue:i}));return a};const Kj=Kl(Ptt);function m7(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function Ott(){const e=[],t={run:n,use:r};return t;function n(...i){let s=-1;const o=i.pop();if(typeof o!="function")throw new TypeError("Expected function as last argument, not "+o);a(null,...i);function a(u,...l){const c=e[++s];let f=-1;if(u){o(u);return}for(;++f<i.length;)(l[f]===null||l[f]===void 0)&&(l[f]=i[f]);i=l,c?$tt(c,a)(...l):o(null,...l)}}function r(i){if(typeof i!="function")throw new TypeError("Expected `middelware` to be a function, not "+i);return e.push(i),t}}function $tt(e,t){let n;return r;function r(...o){const a=e.length>o.length;let u;a&&o.push(i);try{u=e.apply(this,o)}catch(l){const c=l;if(a&&n)throw c;return i(c)}a||(u&&u.then&&typeof u.then=="function"?u.then(s,i):u instanceof Error?i(u):s(u))}function i(o,...a){n||(n=!0,t(o,...a))}function s(o){i(null,o)}}const Nd={basename:Mtt,dirname:Ltt,extname:Ftt,join:jtt,sep:"/"};function Mtt(e,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');bk(e);let n=0,r=-1,i=e.length,s;if(t===void 0||t.length===0||t.length>e.length){for(;i--;)if(e.codePointAt(i)===47){if(s){n=i+1;break}}else r<0&&(s=!0,r=i+1);return r<0?"":e.slice(n,r)}if(t===e)return"";let o=-1,a=t.length-1;for(;i--;)if(e.codePointAt(i)===47){if(s){n=i+1;break}}else o<0&&(s=!0,o=i+1),a>-1&&(e.codePointAt(i)===t.codePointAt(a--)?a<0&&(r=i):(a=-1,r=o));return n===r?r=o:r<0&&(r=e.length),e.slice(n,r)}function Ltt(e){if(bk(e),e.length===0)return".";let t=-1,n=e.length,r;for(;--n;)if(e.codePointAt(n)===47){if(r){t=n;break}}else r||(r=!0);return t<0?e.codePointAt(0)===47?"/":".":t===1&&e.codePointAt(0)===47?"//":e.slice(0,t)}function Ftt(e){bk(e);let t=e.length,n=-1,r=0,i=-1,s=0,o;for(;t--;){const a=e.codePointAt(t);if(a===47){if(o){r=t+1;break}continue}n<0&&(o=!0,n=t+1),a===46?i<0?i=t:s!==1&&(s=1):i>-1&&(s=-1)}return i<0||n<0||s===0||s===1&&i===n-1&&i===r+1?"":e.slice(i,n)}function jtt(...e){let t=-1,n;for(;++t<e.length;)bk(e[t]),e[t]&&(n=n===void 0?e[t]:n+"/"+e[t]);return n===void 0?".":Btt(n)}function Btt(e){bk(e);const t=e.codePointAt(0)===47;let n=Utt(e,!t);return n.length===0&&!t&&(n="."),n.length>0&&e.codePointAt(e.length-1)===47&&(n+="/"),t?"/"+n:n}function Utt(e,t){let n="",r=0,i=-1,s=0,o=-1,a,u;for(;++o<=e.length;){if(o<e.length)a=e.codePointAt(o);else{if(a===47)break;a=47}if(a===47){if(!(i===o-1||s===1))if(i!==o-1&&s===2){if(n.length<2||r!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(u=n.lastIndexOf("/"),u!==n.length-1){u<0?(n="",r=0):(n=n.slice(0,u),r=n.length-1-n.lastIndexOf("/")),i=o,s=0;continue}}else if(n.length>0){n="",r=0,i=o,s=0;continue}}t&&(n=n.length>0?n+"/..":"..",r=2)}else n.length>0?n+="/"+e.slice(i+1,o):n=e.slice(i+1,o),r=o-i-1;i=o,s=0}else a===46&&s>-1?s++:s=-1}return n}function bk(e){if(typeof e!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}const ztt={cwd:Vtt};function Vtt(){return"/"}function g7(e){return!!(e!==null&&typeof e=="object"&&"href"in e&&e.href&&"protocol"in e&&e.protocol&&e.auth===void 0)}function Htt(e){if(typeof e=="string")e=new URL(e);else if(!g7(e)){const t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if(e.protocol!=="file:"){const t=new TypeError("The URL must be of scheme file");throw t.code="ERR_INVALID_URL_SCHEME",t}return qtt(e)}function qtt(e){if(e.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const t=e.pathname;let n=-1;for(;++n<t.length;)if(t.codePointAt(n)===37&&t.codePointAt(n+1)===50){const r=t.codePointAt(n+2);if(r===70||r===102){const i=new TypeError("File URL path must not include encoded / characters");throw i.code="ERR_INVALID_FILE_URL_PATH",i}}return decodeURIComponent(t)}const Xj=["history","path","basename","stem","extname","dirname"];class wEe{constructor(t){let n;t?g7(t)?n={path:t}:typeof t=="string"||Wtt(t)?n={value:t}:n=t:n={},this.cwd=ztt.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let r=-1;for(;++r<Xj.length;){const s=Xj[r];s in n&&n[s]!==void 0&&n[s]!==null&&(this[s]=s==="history"?[...n[s]]:n[s])}let i;for(i in n)Xj.includes(i)||(this[i]=n[i])}get basename(){return typeof this.path=="string"?Nd.basename(this.path):void 0}set basename(t){Jj(t,"basename"),Qj(t,"basename"),this.path=Nd.join(this.dirname||"",t)}get dirname(){return typeof this.path=="string"?Nd.dirname(this.path):void 0}set dirname(t){rue(this.basename,"dirname"),this.path=Nd.join(t||"",this.basename)}get extname(){return typeof this.path=="string"?Nd.extname(this.path):void 0}set extname(t){if(Qj(t,"extname"),rue(this.dirname,"extname"),t){if(t.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(t.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=Nd.join(this.dirname,this.stem+(t||""))}get path(){return this.history[this.history.length-1]}set path(t){g7(t)&&(t=Htt(t)),Jj(t,"path"),this.path!==t&&this.history.push(t)}get stem(){return typeof this.path=="string"?Nd.basename(this.path,this.extname):void 0}set stem(t){Jj(t,"stem"),Qj(t,"stem"),this.path=Nd.join(this.dirname||"",t+(this.extname||""))}fail(t,n,r){const i=this.message(t,n,r);throw i.fatal=!0,i}info(t,n,r){const i=this.message(t,n,r);return i.fatal=void 0,i}message(t,n,r){const i=new Ca(t,n,r);return this.path&&(i.name=this.path+":"+i.name,i.file=this.path),i.fatal=!1,this.messages.push(i),i}toString(t){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(t||void 0).decode(this.value)}}function Qj(e,t){if(e&&e.includes(Nd.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+Nd.sep+"`")}function Jj(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function rue(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}function Wtt(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const Gtt=function(e){const r=this.constructor.prototype,i=r[e],s=function(){return i.apply(s,arguments)};Object.setPrototypeOf(s,r);const o=Object.getOwnPropertyNames(i);for(const a of o){const u=Object.getOwnPropertyDescriptor(i,a);u&&Object.defineProperty(s,a,u)}return s},Ytt={}.hasOwnProperty;class WY extends Gtt{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=Ott()}copy(){const t=new WY;let n=-1;for(;++n<this.attachers.length;){const r=this.attachers[n];t.use(...r)}return t.data(Kj(!0,{},this.namespace)),t}data(t,n){return typeof t=="string"?arguments.length===2?(t8("data",this.frozen),this.namespace[t]=n,this):Ytt.call(this.namespace,t)&&this.namespace[t]||void 0:t?(t8("data",this.frozen),this.namespace=t,this):this.namespace}freeze(){if(this.frozen)return this;const t=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...r]=this.attachers[this.freezeIndex];if(r[0]===!1)continue;r[0]===!0&&(r[0]=void 0);const i=n.call(t,...r);typeof i=="function"&&this.transformers.use(i)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(t){this.freeze();const n=NN(t),r=this.parser||this.Parser;return Zj("parse",r),r(String(n),n)}process(t,n){const r=this;return this.freeze(),Zj("process",this.parser||this.Parser),e8("process",this.compiler||this.Compiler),n?i(void 0,n):new Promise(i);function i(s,o){const a=NN(t),u=r.parse(a);r.run(u,a,function(c,f,d){if(c||!f||!d)return l(c);const h=f,p=r.stringify(h,d);Qtt(p)?d.value=p:d.result=p,l(c,d)});function l(c,f){c||!f?o(c):s?s(f):n(void 0,f)}}}processSync(t){let n=!1,r;return this.freeze(),Zj("processSync",this.parser||this.Parser),e8("processSync",this.compiler||this.Compiler),this.process(t,i),sue("processSync","process",n),r;function i(s,o){n=!0,Xae(s),r=o}}run(t,n,r){iue(t),this.freeze();const i=this.transformers;return!r&&typeof n=="function"&&(r=n,n=void 0),r?s(void 0,r):new Promise(s);function s(o,a){const u=NN(n);i.run(t,u,l);function l(c,f,d){const h=f||t;c?a(c):o?o(h):r(void 0,h,d)}}}runSync(t,n){let r=!1,i;return this.run(t,n,s),sue("runSync","run",r),i;function s(o,a){Xae(o),i=a,r=!0}}stringify(t,n){this.freeze();const r=NN(n),i=this.compiler||this.Compiler;return e8("stringify",i),iue(t),i(t,r)}use(t,...n){const r=this.attachers,i=this.namespace;if(t8("use",this.frozen),t!=null)if(typeof t=="function")u(t,n);else if(typeof t=="object")Array.isArray(t)?a(t):o(t);else throw new TypeError("Expected usable value, not `"+t+"`");return this;function s(l){if(typeof l=="function")u(l,[]);else if(typeof l=="object")if(Array.isArray(l)){const[c,...f]=l;u(c,f)}else o(l);else throw new TypeError("Expected usable value, not `"+l+"`")}function o(l){if(!("plugins"in l)&&!("settings"in l))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");a(l.plugins),l.settings&&(i.settings=Kj(!0,i.settings,l.settings))}function a(l){let c=-1;if(l!=null)if(Array.isArray(l))for(;++c<l.length;){const f=l[c];s(f)}else throw new TypeError("Expected a list of plugins, not `"+l+"`")}function u(l,c){let f=-1,d=-1;for(;++f<r.length;)if(r[f][0]===l){d=f;break}if(d===-1)r.push([l,...c]);else if(c.length>0){let[h,...p]=c;const m=r[d][1];m7(m)&&m7(h)&&(h=Kj(!0,m,h)),r[d]=[l,h,...p]}}}}const Ktt=new WY().freeze();function Zj(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `parser`")}function e8(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `compiler`")}function t8(e,t){if(t)throw new Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function iue(e){if(!m7(e)||typeof e.type!="string")throw new TypeError("Expected node, got `"+e+"`")}function sue(e,t,n){if(!n)throw new Error("`"+e+"` finished async. Use `"+t+"` instead")}function NN(e){return Xtt(e)?e:new wEe(e)}function Xtt(e){return!!(e&&typeof e=="object"&&"message"in e&&"messages"in e)}function Qtt(e){return typeof e=="string"||Jtt(e)}function Jtt(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const Ztt="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",oue=[],aue={allowDangerousHtml:!0},ent=/^(https?|ircs?|mailto|xmpp)$/i,tnt=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function nnt(e){const t=e.allowedElements,n=e.allowElement,r=e.children||"",i=e.className,s=e.components,o=e.disallowedElements,a=e.rehypePlugins||oue,u=e.remarkPlugins||oue,l=e.remarkRehypeOptions?{...e.remarkRehypeOptions,...aue}:aue,c=e.skipHtml,f=e.unwrapDisallowed,d=e.urlTransform||rnt,h=Ktt().use(Let).use(u).use(Dtt,l).use(a),p=new wEe;typeof r=="string"&&(p.value=r);for(const v of tnt)Object.hasOwn(e,v.from)&&(""+v.from+(v.to?"use `"+v.to+"` instead":"remove it")+Ztt+v.id,void 0);const m=h.parse(p);let g=h.runSync(m,p);return i&&(g={type:"element",tagName:"div",properties:{className:i},children:g.type==="root"?g.children:[g]}),qY(g,y),hJe(g,{Fragment:_.Fragment,components:s,ignoreInvalidStyle:!0,jsx:_.jsx,jsxs:_.jsxs,passKeys:!0,passNode:!0});function y(v,b,w){if(v.type==="raw"&&w&&typeof b=="number")return c?w.children.splice(b,1):w.children[b]={type:"text",value:v.value},b;if(v.type==="element"){let E;for(E in Wj)if(Object.hasOwn(Wj,E)&&Object.hasOwn(v.properties,E)){const T=v.properties[E],S=Wj[E];(S===null||S.includes(v.tagName))&&(v.properties[E]=d(String(T||""),E,v))}}if(v.type==="element"){let E=t?!t.includes(v.tagName):o?o.includes(v.tagName):!1;if(!E&&n&&typeof b=="number"&&(E=!n(v,b,w)),E&&w&&typeof b=="number")return f&&v.children?w.children.splice(b,1,...v.children):w.children.splice(b,1),b}}}function rnt(e){const t=e.indexOf(":"),n=e.indexOf("?"),r=e.indexOf("#"),i=e.indexOf("/");return t<0||i>-1&&t>i||n>-1&&t>n||r>-1&&t>r||ent.test(e.slice(0,t))?e:""}const uue=/[#.]/g;function int(e,t){const n=e||"",r={};let i=0,s,o;for(;i<n.length;){uue.lastIndex=i;const a=uue.exec(n),u=n.slice(i,a?a.index:n.length);u&&(s?s==="#"?r.id=u:Array.isArray(r.className)?r.className.push(u):r.className=[u]:o=u,i+=u.length),a&&(s=a[0],i++)}return{type:"element",tagName:o||t||"div",properties:r,children:[]}}const snt=new Set(["button","menu","reset","submit"]),y7={}.hasOwnProperty;function EEe(e,t,n){const r=n&&lnt(n);function i(s,o,...a){let u=-1,l;if(s==null){l={type:"root",children:[]};const c=o;a.unshift(c)}else if(l=int(s,t),l.tagName=l.tagName.toLowerCase(),r&&y7.call(r,l.tagName)&&(l.tagName=r[l.tagName]),ont(o,l.tagName)){let c;for(c in o)y7.call(o,c)&&ant(e,l.properties,c,o[c])}else a.unshift(o);for(;++u<a.length;)v7(l.children,a[u]);return l.type==="element"&&l.tagName==="template"&&(l.content={type:"root",children:l.children},l.children=[]),l}return i}function ont(e,t){return e==null||typeof e!="object"||Array.isArray(e)?!1:t==="input"||!e.type||typeof e.type!="string"?!0:"children"in e&&Array.isArray(e.children)?!1:t==="button"?snt.has(e.type.toLowerCase()):!("value"in e)}function ant(e,t,n,r){const i=s6(e,n);let s=-1,o;if(r!=null){if(typeof r=="number"){if(Number.isNaN(r))return;o=r}else typeof r=="boolean"?o=r:typeof r=="string"?i.spaceSeparated?o=wae(r):i.commaSeparated?o=gae(r):i.commaOrSpaceSeparated?o=wae(gae(r).join(" ")):o=lue(i,i.property,r):Array.isArray(r)?o=r.concat():o=i.property==="style"?unt(r):String(r);if(Array.isArray(o)){const a=[];for(;++s<o.length;){const u=lue(i,i.property,o[s]);a[s]=u}o=a}if(i.property==="className"&&Array.isArray(t.className)){const a=o;o=t.className.concat(a)}t[i.property]=o}}function v7(e,t){let n=-1;if(t!=null)if(typeof t=="string"||typeof t=="number")e.push({type:"text",value:String(t)});else if(Array.isArray(t))for(;++n<t.length;)v7(e,t[n]);else if(typeof t=="object"&&"type"in t)t.type==="root"?v7(e,t.children):e.push(t);else throw new Error("Expected node, nodes, or string, got `"+t+"`")}function lue(e,t,n){if(typeof n=="string"){if(e.number&&n&&!Number.isNaN(Number(n)))return Number(n);if((e.boolean||e.overloadedBoolean)&&(n===""||OA(n)===OA(t)))return!0}return n}function unt(e){const t=[];let n;for(n in e)y7.call(e,n)&&t.push([n,e[n]].join(": "));return t.join("; ")}function lnt(e){const t={};let n=-1;for(;++n<e.length;)t[e[n].toLowerCase()]=e[n];return t}const cnt=["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","solidColor","textArea","textPath"],fnt=EEe(vk,"div"),dnt=EEe(Oy,"g",cnt),n8=/\r?\n|\r/g;function hnt(e){const t=String(e),n=[];for(n8.lastIndex=0;n8.test(t);)n.push(n8.lastIndex);return n.push(t.length+1),{toPoint:r,toOffset:i};function r(s){let o=-1;if(typeof s=="number"&&s>-1&&s<n[n.length-1]){for(;++o<n.length;)if(n[o]>s)return{line:o+1,column:s-(o>0?n[o-1]:0)+1,offset:s}}}function i(s){const o=s&&s.line,a=s&&s.column;if(typeof o=="number"&&typeof a=="number"&&!Number.isNaN(o)&&!Number.isNaN(a)&&o-1 in n){const u=(n[o-2]||0)+a-1||0;if(u>-1&&u<n[n.length-1])return u}}}const s1={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},xEe={}.hasOwnProperty,pnt=Object.prototype;function mnt(e,t){const n=t||{};return GY({file:n.file||void 0,location:!1,schema:n.space==="svg"?Oy:vk,verbose:n.verbose||!1},e)}function GY(e,t){let n;switch(t.nodeName){case"#comment":{const r=t;return n={type:"comment",value:r.data},pP(e,r,n),n}case"#document":case"#document-fragment":{const r=t,i="mode"in r?r.mode==="quirks"||r.mode==="limited-quirks":!1;if(n={type:"root",children:SEe(e,t.childNodes),data:{quirksMode:i}},e.file&&e.location){const s=String(e.file),o=hnt(s),a=o.toPoint(0),u=o.toPoint(s.length);n.position={start:a,end:u}}return n}case"#documentType":{const r=t;return n={type:"doctype"},pP(e,r,n),n}case"#text":{const r=t;return n={type:"text",value:r.value},pP(e,r,n),n}default:return n=gnt(e,t),n}}function SEe(e,t){let n=-1;const r=[];for(;++n<t.length;){const i=GY(e,t[n]);r.push(i)}return r}function gnt(e,t){const n=e.schema;e.schema=t.namespaceURI===s1.svg?Oy:vk;let r=-1;const i={};for(;++r<t.attrs.length;){const a=t.attrs[r],u=(a.prefix?a.prefix+":":"")+a.name;xEe.call(pnt,u)||(i[u]=a.value)}const o=(e.schema.space==="svg"?dnt:fnt)(t.tagName,i,SEe(e,t.childNodes));if(pP(e,t,o),o.tagName==="template"){const a=t,u=a.sourceCodeLocation,l=u&&u.startTag&&Tw(u.startTag),c=u&&u.endTag&&Tw(u.endTag),f=GY(e,a.content);l&&c&&e.file&&(f.position={start:l.end,end:c.start}),o.content=f}return e.schema=n,o}function pP(e,t,n){if("sourceCodeLocation"in t&&t.sourceCodeLocation&&e.file){const r=ynt(e,n,t.sourceCodeLocation);r&&(e.location=!0,n.position=r)}}function ynt(e,t,n){const r=Tw(n);if(t.type==="element"){const i=t.children[t.children.length-1];if(r&&!n.endTag&&i&&i.position&&i.position.end&&(r.end=Object.assign({},i.position.end)),e.verbose){const s={};let o;if(n.attrs)for(o in n.attrs)xEe.call(n.attrs,o)&&(s[s6(e.schema,o).property]=Tw(n.attrs[o]));n.startTag;const a=Tw(n.startTag),u=n.endTag?Tw(n.endTag):void 0,l={opening:a};u&&(l.closing=u),l.properties=s,t.data={position:l}}}return r}function Tw(e){const t=cue({line:e.startLine,column:e.startCol,offset:e.startOffset}),n=cue({line:e.endLine,column:e.endCol,offset:e.endOffset});return t||n?{start:t,end:n}:void 0}function cue(e){return e.line&&e.column?e:void 0}const fue={}.hasOwnProperty;function TEe(e,t){const n=t||{};function r(i,...s){let o=r.invalid;const a=r.handlers;if(i&&fue.call(i,e)){const u=String(i[e]);o=fue.call(a,u)?a[u]:r.unknown}if(o)return o.call(this,i,...s)}return r.handlers=n.handlers||{},r.invalid=n.invalid,r.unknown=n.unknown,r}const vnt={},bnt={}.hasOwnProperty,CEe=TEe("type",{handlers:{root:wnt,element:Cnt,text:Snt,comment:Tnt,doctype:xnt}});function _nt(e,t){const r=(t||vnt).space;return CEe(e,r==="svg"?Oy:vk)}function wnt(e,t){const n={nodeName:"#document",mode:(e.data||{}).quirksMode?"quirks":"no-quirks",childNodes:[]};return n.childNodes=YY(e.children,n,t),cS(e,n),n}function Ent(e,t){const n={nodeName:"#document-fragment",childNodes:[]};return n.childNodes=YY(e.children,n,t),cS(e,n),n}function xnt(e){const t={nodeName:"#documentType",name:"html",publicId:"",systemId:"",parentNode:null};return cS(e,t),t}function Snt(e){const t={nodeName:"#text",value:e.value,parentNode:null};return cS(e,t),t}function Tnt(e){const t={nodeName:"#comment",data:e.value,parentNode:null};return cS(e,t),t}function Cnt(e,t){const n=t;let r=n;e.type==="element"&&e.tagName.toLowerCase()==="svg"&&n.space==="html"&&(r=Oy);const i=[];let s;if(e.properties){for(s in e.properties)if(s!=="children"&&bnt.call(e.properties,s)){const u=Ant(r,s,e.properties[s]);u&&i.push(u)}}const o=r.space,a={nodeName:e.tagName,tagName:e.tagName,attrs:i,namespaceURI:s1[o],childNodes:[],parentNode:null};return a.childNodes=YY(e.children,a,r),cS(e,a),e.tagName==="template"&&e.content&&(a.content=Ent(e.content,r)),a}function Ant(e,t,n){const r=s6(e,t);if(n===!1||n===null||n===void 0||typeof n=="number"&&Number.isNaN(n)||!n&&r.boolean)return;Array.isArray(n)&&(n=r.commaSeparated?Fwe(n):Gwe(n));const i={name:r.attribute,value:n===!0?"":String(n)};if(r.space&&r.space!=="html"&&r.space!=="svg"){const s=i.name.indexOf(":");s<0?i.prefix="":(i.name=i.name.slice(s+1),i.prefix=r.attribute.slice(0,s)),i.namespace=s1[r.space]}return i}function YY(e,t,n){let r=-1;const i=[];if(e)for(;++r<e.length;){const s=CEe(e[r],n);s.parentNode=t,i.push(s)}return i}function cS(e,t){const n=e.position;n&&n.start&&n.end&&(n.start.offset,n.end.offset,t.sourceCodeLocation={startLine:n.start.line,startCol:n.start.column,startOffset:n.start.offset,endLine:n.end.line,endCol:n.end.column,endOffset:n.end.offset})}const Int=["area","base","basefont","bgsound","br","col","command","embed","frame","hr","image","img","input","keygen","link","meta","param","source","track","wbr"],knt=new Set([65534,65535,131070,131071,196606,196607,262142,262143,327678,327679,393214,393215,458750,458751,524286,524287,589822,589823,655358,655359,720894,720895,786430,786431,851966,851967,917502,917503,983038,983039,1048574,1048575,1114110,1114111]),vi="";var X;(function(e){e[e.EOF=-1]="EOF",e[e.NULL=0]="NULL",e[e.TABULATION=9]="TABULATION",e[e.CARRIAGE_RETURN=13]="CARRIAGE_RETURN",e[e.LINE_FEED=10]="LINE_FEED",e[e.FORM_FEED=12]="FORM_FEED",e[e.SPACE=32]="SPACE",e[e.EXCLAMATION_MARK=33]="EXCLAMATION_MARK",e[e.QUOTATION_MARK=34]="QUOTATION_MARK",e[e.NUMBER_SIGN=35]="NUMBER_SIGN",e[e.AMPERSAND=38]="AMPERSAND",e[e.APOSTROPHE=39]="APOSTROPHE",e[e.HYPHEN_MINUS=45]="HYPHEN_MINUS",e[e.SOLIDUS=47]="SOLIDUS",e[e.DIGIT_0=48]="DIGIT_0",e[e.DIGIT_9=57]="DIGIT_9",e[e.SEMICOLON=59]="SEMICOLON",e[e.LESS_THAN_SIGN=60]="LESS_THAN_SIGN",e[e.EQUALS_SIGN=61]="EQUALS_SIGN",e[e.GREATER_THAN_SIGN=62]="GREATER_THAN_SIGN",e[e.QUESTION_MARK=63]="QUESTION_MARK",e[e.LATIN_CAPITAL_A=65]="LATIN_CAPITAL_A",e[e.LATIN_CAPITAL_F=70]="LATIN_CAPITAL_F",e[e.LATIN_CAPITAL_X=88]="LATIN_CAPITAL_X",e[e.LATIN_CAPITAL_Z=90]="LATIN_CAPITAL_Z",e[e.RIGHT_SQUARE_BRACKET=93]="RIGHT_SQUARE_BRACKET",e[e.GRAVE_ACCENT=96]="GRAVE_ACCENT",e[e.LATIN_SMALL_A=97]="LATIN_SMALL_A",e[e.LATIN_SMALL_F=102]="LATIN_SMALL_F",e[e.LATIN_SMALL_X=120]="LATIN_SMALL_X",e[e.LATIN_SMALL_Z=122]="LATIN_SMALL_Z",e[e.REPLACEMENT_CHARACTER=65533]="REPLACEMENT_CHARACTER"})(X=X||(X={}));const pu={DASH_DASH:"--",CDATA_START:"[CDATA[",DOCTYPE:"doctype",SCRIPT:"script",PUBLIC:"public",SYSTEM:"system"};function AEe(e){return e>=55296&&e<=57343}function Rnt(e){return e>=56320&&e<=57343}function Nnt(e,t){return(e-55296)*1024+9216+t}function IEe(e){return e!==32&&e!==10&&e!==13&&e!==9&&e!==12&&e>=1&&e<=31||e>=127&&e<=159}function kEe(e){return e>=64976&&e<=65007||knt.has(e)}var Ne;(function(e){e.controlCharacterInInputStream="control-character-in-input-stream",e.noncharacterInInputStream="noncharacter-in-input-stream",e.surrogateInInputStream="surrogate-in-input-stream",e.nonVoidHtmlElementStartTagWithTrailingSolidus="non-void-html-element-start-tag-with-trailing-solidus",e.endTagWithAttributes="end-tag-with-attributes",e.endTagWithTrailingSolidus="end-tag-with-trailing-solidus",e.unexpectedSolidusInTag="unexpected-solidus-in-tag",e.unexpectedNullCharacter="unexpected-null-character",e.unexpectedQuestionMarkInsteadOfTagName="unexpected-question-mark-instead-of-tag-name",e.invalidFirstCharacterOfTagName="invalid-first-character-of-tag-name",e.unexpectedEqualsSignBeforeAttributeName="unexpected-equals-sign-before-attribute-name",e.missingEndTagName="missing-end-tag-name",e.unexpectedCharacterInAttributeName="unexpected-character-in-attribute-name",e.unknownNamedCharacterReference="unknown-named-character-reference",e.missingSemicolonAfterCharacterReference="missing-semicolon-after-character-reference",e.unexpectedCharacterAfterDoctypeSystemIdentifier="unexpected-character-after-doctype-system-identifier",e.unexpectedCharacterInUnquotedAttributeValue="unexpected-character-in-unquoted-attribute-value",e.eofBeforeTagName="eof-before-tag-name",e.eofInTag="eof-in-tag",e.missingAttributeValue="missing-attribute-value",e.missingWhitespaceBetweenAttributes="missing-whitespace-between-attributes",e.missingWhitespaceAfterDoctypePublicKeyword="missing-whitespace-after-doctype-public-keyword",e.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers="missing-whitespace-between-doctype-public-and-system-identifiers",e.missingWhitespaceAfterDoctypeSystemKeyword="missing-whitespace-after-doctype-system-keyword",e.missingQuoteBeforeDoctypePublicIdentifier="missing-quote-before-doctype-public-identifier",e.missingQuoteBeforeDoctypeSystemIdentifier="missing-quote-before-doctype-system-identifier",e.missingDoctypePublicIdentifier="missing-doctype-public-identifier",e.missingDoctypeSystemIdentifier="missing-doctype-system-identifier",e.abruptDoctypePublicIdentifier="abrupt-doctype-public-identifier",e.abruptDoctypeSystemIdentifier="abrupt-doctype-system-identifier",e.cdataInHtmlContent="cdata-in-html-content",e.incorrectlyOpenedComment="incorrectly-opened-comment",e.eofInScriptHtmlCommentLikeText="eof-in-script-html-comment-like-text",e.eofInDoctype="eof-in-doctype",e.nestedComment="nested-comment",e.abruptClosingOfEmptyComment="abrupt-closing-of-empty-comment",e.eofInComment="eof-in-comment",e.incorrectlyClosedComment="incorrectly-closed-comment",e.eofInCdata="eof-in-cdata",e.absenceOfDigitsInNumericCharacterReference="absence-of-digits-in-numeric-character-reference",e.nullCharacterReference="null-character-reference",e.surrogateCharacterReference="surrogate-character-reference",e.characterReferenceOutsideUnicodeRange="character-reference-outside-unicode-range",e.controlCharacterReference="control-character-reference",e.noncharacterCharacterReference="noncharacter-character-reference",e.missingWhitespaceBeforeDoctypeName="missing-whitespace-before-doctype-name",e.missingDoctypeName="missing-doctype-name",e.invalidCharacterSequenceAfterDoctypeName="invalid-character-sequence-after-doctype-name",e.duplicateAttribute="duplicate-attribute",e.nonConformingDoctype="non-conforming-doctype",e.missingDoctype="missing-doctype",e.misplacedDoctype="misplaced-doctype",e.endTagWithoutMatchingOpenElement="end-tag-without-matching-open-element",e.closingOfElementWithOpenChildElements="closing-of-element-with-open-child-elements",e.disallowedContentInNoscriptInHead="disallowed-content-in-noscript-in-head",e.openElementsLeftAfterEof="open-elements-left-after-eof",e.abandonedHeadElementChild="abandoned-head-element-child",e.misplacedStartTagForHeadElement="misplaced-start-tag-for-head-element",e.nestedNoscriptInHead="nested-noscript-in-head",e.eofInElementThatCanContainOnlyText="eof-in-element-that-can-contain-only-text"})(Ne=Ne||(Ne={}));const Dnt=65536;class Pnt{constructor(t){this.handler=t,this.html="",this.pos=-1,this.lastGapPos=-2,this.gapStack=[],this.skipNextNewLine=!1,this.lastChunkWritten=!1,this.endOfChunkHit=!1,this.bufferWaterline=Dnt,this.isEol=!1,this.lineStartPos=0,this.droppedBufferSize=0,this.line=1,this.lastErrOffset=-1}get col(){return this.pos-this.lineStartPos+ +(this.lastGapPos!==this.pos)}get offset(){return this.droppedBufferSize+this.pos}getError(t){const{line:n,col:r,offset:i}=this;return{code:t,startLine:n,endLine:n,startCol:r,endCol:r,startOffset:i,endOffset:i}}_err(t){this.handler.onParseError&&this.lastErrOffset!==this.offset&&(this.lastErrOffset=this.offset,this.handler.onParseError(this.getError(t)))}_addGap(){this.gapStack.push(this.lastGapPos),this.lastGapPos=this.pos}_processSurrogate(t){if(this.pos!==this.html.length-1){const n=this.html.charCodeAt(this.pos+1);if(Rnt(n))return this.pos++,this._addGap(),Nnt(t,n)}else if(!this.lastChunkWritten)return this.endOfChunkHit=!0,X.EOF;return this._err(Ne.surrogateInInputStream),t}willDropParsedChunk(){return this.pos>this.bufferWaterline}dropParsedChunk(){this.willDropParsedChunk()&&(this.html=this.html.substring(this.pos),this.lineStartPos-=this.pos,this.droppedBufferSize+=this.pos,this.pos=0,this.lastGapPos=-2,this.gapStack.length=0)}write(t,n){this.html.length>0?this.html+=t:this.html=t,this.endOfChunkHit=!1,this.lastChunkWritten=n}insertHtmlAtCurrentPos(t){this.html=this.html.substring(0,this.pos+1)+t+this.html.substring(this.pos+1),this.endOfChunkHit=!1}startsWith(t,n){if(this.pos+t.length>this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,!1;if(n)return this.html.startsWith(t,this.pos);for(let r=0;r<t.length;r++)if((this.html.charCodeAt(this.pos+r)|32)!==t.charCodeAt(r))return!1;return!0}peek(t){const n=this.pos+t;if(n>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,X.EOF;const r=this.html.charCodeAt(n);return r===X.CARRIAGE_RETURN?X.LINE_FEED:r}advance(){if(this.pos++,this.isEol&&(this.isEol=!1,this.line++,this.lineStartPos=this.pos),this.pos>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,X.EOF;let t=this.html.charCodeAt(this.pos);return t===X.CARRIAGE_RETURN?(this.isEol=!0,this.skipNextNewLine=!0,X.LINE_FEED):t===X.LINE_FEED&&(this.isEol=!0,this.skipNextNewLine)?(this.line--,this.skipNextNewLine=!1,this._addGap(),this.advance()):(this.skipNextNewLine=!1,AEe(t)&&(t=this._processSurrogate(t)),this.handler.onParseError===null||t>31&&t<127||t===X.LINE_FEED||t===X.CARRIAGE_RETURN||t>159&&t<64976||this._checkForProblematicCharacters(t),t)}_checkForProblematicCharacters(t){IEe(t)?this._err(Ne.controlCharacterInInputStream):kEe(t)&&this._err(Ne.noncharacterInInputStream)}retreat(t){for(this.pos-=t;this.pos<this.lastGapPos;)this.lastGapPos=this.gapStack.pop(),this.pos--;this.isEol=!1}}var kn;(function(e){e[e.CHARACTER=0]="CHARACTER",e[e.NULL_CHARACTER=1]="NULL_CHARACTER",e[e.WHITESPACE_CHARACTER=2]="WHITESPACE_CHARACTER",e[e.START_TAG=3]="START_TAG",e[e.END_TAG=4]="END_TAG",e[e.COMMENT=5]="COMMENT",e[e.DOCTYPE=6]="DOCTYPE",e[e.EOF=7]="EOF",e[e.HIBERNATION=8]="HIBERNATION"})(kn=kn||(kn={}));function REe(e,t){for(let n=e.attrs.length-1;n>=0;n--)if(e.attrs[n].name===t)return e.attrs[n].value;return null}const xg=new Uint16Array('<\0\0\0\0\0\0EMabcfglmnoprstu\\bfmsligP&cutereve;iyx}rc;r;ravepha;acr;d;gpon;f;plyFunction;ingcsr;ign;ildemlaceforsucrkslash;;ed;y;crtause;noullis;a;r;pf;eve;cmpeq;HOacdefhilorsucy;PYcpyute;;italDifferentialD;leys;aeioron;dilrc;nint;ot;dnilla;terDot;i;rcleDMPTot;inus;lus;imes;ocskwiseContourIntegral;eCurlyDQoubleQuote;uote;lnpuon;e;gitruent;nt;ourIntegral;fr;oduct;nterClockwiseContourIntegral;oss;cr;p;Cap;DJSZacefios;otrahd;cy;cy;cy;grsger;r;hv;ayron;;l;ta;r;afcmriticalADGTcute;o;bleAcute;rave;ilde;ond;ferentialD;\0\0\0\0f;;DEot;qual;bleCDLRUVontourIntegrao\0\0nArrow;eoftARTrrow;ightArrow;engLReftARrrow;ightArrow;ightArrow;ightATrrow;ee;p\0\0rrow;ownArrow;erticalBar;nABLRTarrow;BUar;pArrow;reve;eft\0\0ightVector;eeVector;ector;Bar;ight\0eeVector;ector;Bar;ee;Arrow;ctr;rok;NTacdfglmopqstuxG;Hcuteaiyron;rc;ot;r;raveement;apcr;ty\0\0mallSquare;erySmallSquare;gpon;f;silon;uail;Tilde;librium;cir;m;a;mlipsts;onentialE;cfiosy;r;lled\0\0mallSquare;erySmallSquare;\0\0\0f;All;riertrf;cJTabcdfgorstcy;>mma;d;reve;eiydil;rc;;ot;r;;pf;eaterEFGLSTqual;Less;ullEqual;reater;ess;lantEqual;ilde;cr;;AacfiosuRDcy;ctek;;irc;r;lbertSpace;\0f;izontalLine;ctrok;mpownHumqual;EJOacdfgmnostucy;lig;cy;cuteiyrc;ot;r;rave;apcgr;inaryI;lie\0;egrral;section;isibleCTomma;imes;gpton;f;a;cr;ilde;\0cy;lcfosuiyrc;;r;pf;\0r;rcy;kcy;HJacfoscy;cy;ppa;eydil;;r;pf;cr;JTaceflmostcy;<cmnprute;bda;g;lacetrf;r;aeyron;dil;;fstACDFRTUVarnrgleBracket;row;BRar;ightArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ightAVrrow;ector;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;ightsEFGLSTqualGreater;ullEqual;reater;ess;lantEqual;ilde;r;;eftarrow;idot;npwgLRlreftARrrow;ightArrow;ightArrow;eftarightightf;erLReftArrow;ightArrow;cht;rok;;acefiosup;y;dliumSpace;lintrf;r;nusPlus;pf;c;Jacefostucy;cute;aeyron;dil;;gswativeMTVediumSpace;hicneryThitedGLreaterGreateessLesLine;r;Bnptreak;BreakingSpace;f;;CDEGHLNPRSTVoungruent;pCap;oubleVerticalBar;lqxement;ual;Tilde;ists;reater;EFGLSTqual;ullEqual;reater;ess;lantEqual;ilde;umpownHump;qual;efstTriangle;BEar;qual;s;EGLSTqual;reater;ess;lantEqual;ilde;estedGLreaterGreater;essLess;recedes;ESqual;lantEqual;eiverseElement;ghtTriangle;BEar;qual;quuareSubpset;Equal;erset;Equal;bcpset;Equal;ceeds;ESTqual;lantEqual;ilde;erset;Equal;ilde;EFTqual;ullEqual;ilde;erticalBar;cr;ilde;Eacdfgmoprstuvlig;cuteiyrc;blac;r;raveaeicr;ga;cron;pf;enCurlyDQoubleQuote;uote;;clr;ashidees;mlerBParr;acek;et;arenthesis;acfhilorsrtialD;y;r;i;;usMinus;ipncareplanf;;eiocedes;ESTqual;lantEqual;ilde;me;dpuct;ortion;al;cir;;UfosOT"r;pf;cr;BEacefhiorsuarr;Gcnrute;g;r;tl;aeyron;dil;;;verseEUlqement;uilibrium;pEquilibrium;ro;ghtACDFTUVanrgleBracket;row;BLar;eftArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;puf;ndImplies;ightarrow;chr;;leDelayed;HOacfhimoqstuCcHcy;y;FTcy;cute;;aeiyron;dil;rc;;r;ortDLRUownArroweftArrowightArrowpArrow;gma;allCircle;pf;\0\0t;are;ISUntersection;ubpset;Equal;erset;Equal;nion;cr;ar;bcmp;set;Equal;cheeds;ESTqual;lantEqual;ilde;Th;;esrset;Equal;etHRSacfhiorsORNADE;Hccy;y;bu;;aeyron;dil;;r;ei\0efore;a;cnkSpace;Space;lde;EFTqual;ullEqual;ilde;pf;ipleDot;ctr;rok;\0\0\0\0\0\0\0cruter;ocir;r\0y;ve;iyrc;blac;r;raveacr;dierBParr;acek;et;arenthesis;on;Plus;gpon;f;ADETadpsrrow;BDar;ownArrow;ownArrow;quilibrium;ee;Arrow;ownerLReftArrow;ightArrow;i;lon;ing;cr;ilde;mlDbcdefosvash;ar;y;ash;l;er;btyar;;icalBLSTar;ine;eparator;ilde;ThinSpace;r;pf;cr;dash;cefosirc;dge;r;pf;cr;fiosr;;pf;cr;AIUacfosucy;cy;cy;cuteiyrc;;r;pf;cr;ml;Hacdefoscy;cute;ayron;;ot;\0oWidta;r;pf;cr;\0\0\0\0\0\0\0cutereve;;Ediuy;;rcte;lig;r;raveepfpsym;ha;apcclr;g;\0\0;adsvnd;;lope;;;elmrsz;esd;a;;;;;;;;t;vb;d;pth;arr;gpon;f;;Eaeiop;cir;;d;s;rox;eingctyr;;mp;eildemlcioninnt;Nabcdefiklnoprsuot;crkcepsong;psilon;rime;im;eq;ee;ed;gerk;tbrk;oy;quo;cmprtaus;eptyv;snoahw;;een;r;gcostuvwaiurc;pdptot;lus;imes;\0\0cup;ar;riangleduown;p;plus;earow;akocnklstozenge;riangle;dlrown;eft;ight;k;\0\0;;4;ck;eo;q=uiv;t;ptwxf;;tomtie;DHUVbdhmptuvLRlr;;;;;DUdu;;;;LRlr;;;;;HLRhlr;;;;;;ox;LRlr;;;;;DUdu;;;;inus;lus;imes;LRlr;;;;;HLRhlr;;;;;;evbarceior;mi;m;el;bh;sub;l;etp;Ee;;q\0\0\0\0\0\0\0\0\0\0cprute;;abcdsnd;rcup;aup;p;ot;;eot;aeiu\0s;on;dilrc;ps;sm;ot;dmnilptyv;t;err;ceiy;ck;mark;r;Ecefms;;elq;e\0\0rrowlreft;ight;RSacd;st;irc;ash;nint;id;cir;ubs;uit\0on;e;q\0\0a;t;;flemxente\0;dot;nfry;o;sr;aorr;ss;cur;bp;e;;e;dot;delprvwarrlr;;\0\0r;c;arr;p;;bcdosrcap;aup;p;ot;r;;alrvrr;m;yevwq\0\0reuee;edge;enearrowlreftightecioninnt;lcty;AHabcdefhijlorstuwzrar;glrsger;eth;h;varow;aayron;;;aogrr;tseq;glmta;ptyv;irsht;;arlraegsvm;osnd;suit;amma;in;;iode;ontimes;ncy;c\0\0rn;op;lptuwlar;f;;empsq;dot;inus;lus;quare;blebarwedgnadhownarrowarpoonlrefighkaro\0\0rn;op;cotry;;l;rok;drot;i;fahraangle;ciy;grarr;DacdefglmnopqrstuxDoocsuteter;aioyron;r;clon;;ot;Drot;;;rsave;dot;;ilsnters;;;dot;apscr;ty;svetp1;;;gs;p;gpon;f;alsr;sl;us;i;lvon;csuviorc\0\0antgltressaeils;st;v;DD;parsl;Daot;rr;cdir;oah;mrlo;cipl;seoctationential\0\0\0\0\0\0\0llingdotsey;male;ilrlig;\0\0g;ig;;lig;lig;fjaltt;ig;ns;of;\0f;ak;v;artint;aocs\0\0;;;;\0;;\0\0;;5;\0;;8;l;wn;cr;Eabcdefgijlnorstv;l;cmpute;ma;d;reve;iyrc;;ot;;lqs;qslan;cdlc;ot;o;l;;es;r;;gmel;cy;;Eaj;;;Eaes;p;prox;q;qim;pf;cir;m;el;;>;cdlqrci;r;ot;Par;uest;adels\0pror;qlqlesienrtneqq;Aabcefkosyrilmrrsfildrcy;;cwir;;ar;irc;alrrts;uitlip;con;r;sewarow;arow;amoprrr;tht;klreftarrow;ightarrow;f;bar;cltr;asrok;bpull;hen\0\0\0\0\0\0cute;iyrc;cxy;clfr;rave;inoinnt;t;fin;ta;lig;aopcgtr;elpinarh;f;ed;;cfotare;in;tie;do;celpal;grerarhk;rod;cgpty;on;f;a;uestcir;n;Edsv;ot;;v;;ilde;\0cy;lcfmosuiyrc;;r;ath;pf;\0r;rcy;kcy;acfghjosppa;v;eydil;;r;reen;cy;cy;pf;cr;ABEHabcdefghjlmnoprstuvartrail;arr;;g;ar;\0\0\0\0\0\0\0\0\0ute;mptyv;rabda;g;dl;;uor;bfhlpst;fs;s;p;l;im;l;;aeil;;s;abrrr;rk;akcek;;es;ldu;;aeuyron;diil;;cqrsa;uo;rduhar;shar;h;;fgqstahlrtrrow;taarpoonduownpeftarrows;ightahsrrow;sarpoonquigarrohreetimes;;qslan;cdgsc;ot;o;r;;es;adegspproot;qgqgtiilrsht;;;E;rdu;l;lk;cy;;achtrorneard;ri;iodot;ust;acheEaes;p;prox;q;qim;abnoptwznrg;r;rglmreftarightapsto;ightparrowlrefight;aflr;;us;imes;st;;efngear;lt;achmtrornear;d;;ri;achiqtquo;r;m;eg;;buo;r;rok;<;cdhilqrci;r;remes;arr;uest;Piar;;efrdushar;har;enrtneqq;DacdefhilnopsuDot;clprret;;ese;sto;dluowefker;oymma;;ash;asuredangler;o;cdnro;acdsir;otus;bd;u;p;dpels;f;ctr;pos;lmtimap;GLRVabcdefghijlmoprstuvwgt;;veltftarrrow;ightarrow;;;vightarrow;Ddash;ash;bcnptlaute;g;;Eiop;d;s;rour;al;s\0pmp;eaeouy\0;on;dil;ng;dot;p;;ash;;Aadqsxrr;rhrk;;oot;uieiar;ist;sr;Eest;qs;qslani;rAaprrr;ar;;sv;d;cy;AEadestr;rr;r;;fqstarrroightarro;qslan;si;ri;eiptf;;inn;Edv;ot;;;i;v;;aorr;astllel;;lint;;ceu;c;eAaitrrr;cw;;ghtarrowri;echimpqu;ceru;ort\0\0arm;e;qsubpbcp;Ees;et;eq;qc;e;Ees;et;eq;qgilrldeianglelreft;eight;e;m;esro;p;DHadgilrsash;arr;p;ash;et;;>nfin;Aetrr;;;r<ie;Atrr;rie;im;Aanrr;rhrk;;oear;\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0csuteiyr;c;abioslac;v;old;lig;crir;;\0\0\0n;ave;bmar;acitrirr;oss;n;aeicr;ga;cdnron;;pf;aelr;rp;;adiosvr;efmr;ofgof;r;lope;;cloashl;idees;as;mlbar;\0\0\0\0\0\0\0\0\0r;ast;lle\0\0m;;y;rcimptnt;od;il;enk;r;imo;v;mane;;tvchfork;aunckk;h;s;abcdemstcir;ir;ou;;nim;wo;ipuntint;f;nd;Eaceinosu;p;u;c;acenspprourlyeaespprox;qq;im;ime;sEasdfpalslar;ine;urf;;trel;cir;;ncsp;fiopsur;pf;rime;cr;aeoteirnionnt;st;eABHabcdefhilmnoprstuxartrail;arar;cdenqrteu;te;imptyv;g;del;;uor;abcfhlpstwp;;fs;;s;l;im;l;;aiil;o;nalabrrrk;akcek;;es;ldu;;aeuyron;diil;;clqsa;dhar;uo;rh;acgl;ipsnart;ilrsht;;aordu;l;;v;gnshtahlrstrrow;taarpoonduowpeftahrrowarpoonightarrows;quigarrohreetimes;g;ingdotseahmra;oust;achemid;abptnrg;r;raflr;;us;imes;apr;gt;olint;arachqquo;r;buo;rhirremes;i;efltri;luhar;;\0\0\0\0\0\0\0cute;qu;Eaceinpsy;\0;on;u;dil;rc;Eas;p;im;olint;i;ot;be;Aacmstxrr;rhr;oti;war;minnut;r;oacoyrp;hycy;;rt\0\0iaragmma;fv;;deglnprot;;q;E;;E;e;lus;arr;araeitlslsetmhp;parsl;dle;;e;s;flptcy;;b;ar;f;adres;uitcsuaup;s;p;s;ubp;eset;e;eset;e;afrarcemtr;tmiararr;fanighteppsilohsbcmnp;Edemnprs;ot;;dot;ult;Ee;;lus;arr;eiut;enq;qeq;qm;bp;;c;acenspprourlyeaespproqg;123;Edehlmnps;ost;ub;;dot;soul;b;arr;ult;Ee;;lus;eiut;enq;qeq;qm;bp;;Aanrr;rhr;owar;lig\0\0\0\0\0\0\0\0\0\0\0\0get;;raeyron;dil;;lrec;r;eiko\0e4fa;svym;cnkaspproimsasrnes;bd;ar;;eps;bcfot;ir;;ork;rime;aipdadempstngle;dlqrowneft;e;ight;eot;inus;lus;b;ime;ezium;chtry;;cy;rok;ioxheadlreftarroightarrowAHabcdfghlmoprstuwrar;cruter\0y;ve;iyrc;abhrlac;airsht;;raverlrlk;ct\0\0rn;erop;ri;alcr;gpon;f;adhlsuownarpoonlrefighi;hlonparrows;cit\0\0rn;erop;ng;ri;cr;dirot;lde;i;famrlangle;ABDacdeflnoprszrar;v;asnrgrt;eknprstappothinhirop;hiugmbpsetneq;q;setneq;q;hretianglelreftighty;ashelr;bear;q;lip;btar;trsubppf;rotrcur;bpnEenEeigzag;cefoprsirc;dibgar;e;q;erp;r;pf;;eatcr;\0\0\0\0\0\0\0trr;Aarr;Aarrais;dptfl;imAarrcqr;ptracefiosucuyte;iyrc;;nr;cy;pf;cr;cmy;lacdefhioswcute;ayron;;ot;ettra;r;cy;grarr;pf;cr;jn;j;'.split("").map(e=>e.charCodeAt(0))),Ont=new Uint16Array("aglq	\x1B\0\0p;os;t;t;uot;".split("").map(e=>e.charCodeAt(0)));var r8;const $nt=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]),Mnt=(r8=String.fromCodePoint)!==null&&r8!==void 0?r8:function(e){let t="";return e>65535&&(e-=65536,t+=String.fromCharCode(e>>>10&1023|55296),e=56320|e&1023),t+=String.fromCharCode(e),t};function Lnt(e){var t;return e>=55296&&e<=57343||e>1114111?65533:(t=$nt.get(e))!==null&&t!==void 0?t:e}var Zs;(function(e){e[e.NUM=35]="NUM",e[e.SEMI=59]="SEMI",e[e.EQUALS=61]="EQUALS",e[e.ZERO=48]="ZERO",e[e.NINE=57]="NINE",e[e.LOWER_A=97]="LOWER_A",e[e.LOWER_F=102]="LOWER_F",e[e.LOWER_X=120]="LOWER_X",e[e.LOWER_Z=122]="LOWER_Z",e[e.UPPER_A=65]="UPPER_A",e[e.UPPER_F=70]="UPPER_F",e[e.UPPER_Z=90]="UPPER_Z"})(Zs||(Zs={}));const Fnt=32;var eh;(function(e){e[e.VALUE_LENGTH=49152]="VALUE_LENGTH",e[e.BRANCH_LENGTH=16256]="BRANCH_LENGTH",e[e.JUMP_TABLE=127]="JUMP_TABLE"})(eh||(eh={}));function b7(e){return e>=Zs.ZERO&&e<=Zs.NINE}function jnt(e){return e>=Zs.UPPER_A&&e<=Zs.UPPER_F||e>=Zs.LOWER_A&&e<=Zs.LOWER_F}function Bnt(e){return e>=Zs.UPPER_A&&e<=Zs.UPPER_Z||e>=Zs.LOWER_A&&e<=Zs.LOWER_Z||b7(e)}function Unt(e){return e===Zs.EQUALS||Bnt(e)}var Ws;(function(e){e[e.EntityStart=0]="EntityStart",e[e.NumericStart=1]="NumericStart",e[e.NumericDecimal=2]="NumericDecimal",e[e.NumericHex=3]="NumericHex",e[e.NamedEntity=4]="NamedEntity"})(Ws||(Ws={}));var zv;(function(e){e[e.Legacy=0]="Legacy",e[e.Strict=1]="Strict",e[e.Attribute=2]="Attribute"})(zv||(zv={}));class znt{constructor(t,n,r){this.decodeTree=t,this.emitCodePoint=n,this.errors=r,this.state=Ws.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=zv.Strict}startEntity(t){this.decodeMode=t,this.state=Ws.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1}write(t,n){switch(this.state){case Ws.EntityStart:return t.charCodeAt(n)===Zs.NUM?(this.state=Ws.NumericStart,this.consumed+=1,this.stateNumericStart(t,n+1)):(this.state=Ws.NamedEntity,this.stateNamedEntity(t,n));case Ws.NumericStart:return this.stateNumericStart(t,n);case Ws.NumericDecimal:return this.stateNumericDecimal(t,n);case Ws.NumericHex:return this.stateNumericHex(t,n);case Ws.NamedEntity:return this.stateNamedEntity(t,n)}}stateNumericStart(t,n){return n>=t.length?-1:(t.charCodeAt(n)|Fnt)===Zs.LOWER_X?(this.state=Ws.NumericHex,this.consumed+=1,this.stateNumericHex(t,n+1)):(this.state=Ws.NumericDecimal,this.stateNumericDecimal(t,n))}addToNumericResult(t,n,r,i){if(n!==r){const s=r-n;this.result=this.result*Math.pow(i,s)+parseInt(t.substr(n,s),i),this.consumed+=s}}stateNumericHex(t,n){const r=n;for(;n<t.length;){const i=t.charCodeAt(n);if(b7(i)||jnt(i))n+=1;else return this.addToNumericResult(t,r,n,16),this.emitNumericEntity(i,3)}return this.addToNumericResult(t,r,n,16),-1}stateNumericDecimal(t,n){const r=n;for(;n<t.length;){const i=t.charCodeAt(n);if(b7(i))n+=1;else return this.addToNumericResult(t,r,n,10),this.emitNumericEntity(i,2)}return this.addToNumericResult(t,r,n,10),-1}emitNumericEntity(t,n){var r;if(this.consumed<=n)return(r=this.errors)===null||r===void 0||r.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(t===Zs.SEMI)this.consumed+=1;else if(this.decodeMode===zv.Strict)return 0;return this.emitCodePoint(Lnt(this.result),this.consumed),this.errors&&(t!==Zs.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed}stateNamedEntity(t,n){const{decodeTree:r}=this;let i=r[this.treeIndex],s=(i&eh.VALUE_LENGTH)>>14;for(;n<t.length;n++,this.excess++){const o=t.charCodeAt(n);if(this.treeIndex=DEe(r,i,this.treeIndex+Math.max(1,s),o),this.treeIndex<0)return this.result===0||this.decodeMode===zv.Attribute&&(s===0||Unt(o))?0:this.emitNotTerminatedNamedEntity();if(i=r[this.treeIndex],s=(i&eh.VALUE_LENGTH)>>14,s!==0){if(o===Zs.SEMI)return this.emitNamedEntityData(this.treeIndex,s,this.consumed+this.excess);this.decodeMode!==zv.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1}emitNotTerminatedNamedEntity(){var t;const{result:n,decodeTree:r}=this,i=(r[n]&eh.VALUE_LENGTH)>>14;return this.emitNamedEntityData(n,i,this.consumed),(t=this.errors)===null||t===void 0||t.missingSemicolonAfterCharacterReference(),this.consumed}emitNamedEntityData(t,n,r){const{decodeTree:i}=this;return this.emitCodePoint(n===1?i[t]&~eh.VALUE_LENGTH:i[t+1],r),n===3&&this.emitCodePoint(i[t+2],r),r}end(){var t;switch(this.state){case Ws.NamedEntity:return this.result!==0&&(this.decodeMode!==zv.Attribute||this.result===this.treeIndex)?this.emitNotTerminatedNamedEntity():0;case Ws.NumericDecimal:return this.emitNumericEntity(0,2);case Ws.NumericHex:return this.emitNumericEntity(0,3);case Ws.NumericStart:return(t=this.errors)===null||t===void 0||t.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case Ws.EntityStart:return 0}}}function NEe(e){let t="";const n=new znt(e,r=>t+=Mnt(r));return function(i,s){let o=0,a=0;for(;(a=i.indexOf("&",a))>=0;){t+=i.slice(o,a),n.startEntity(s);const l=n.write(i,a+1);if(l<0){o=a+n.end();break}o=a+l,a=l===0?o+1:o}const u=t+i.slice(o);return t="",u}}function DEe(e,t,n,r){const i=(t&eh.BRANCH_LENGTH)>>7,s=t&eh.JUMP_TABLE;if(i===0)return s!==0&&r===s?n:-1;if(s){const u=r-s;return u<0||u>=i?-1:e[n+u]-1}let o=n,a=o+i-1;for(;o<=a;){const u=o+a>>>1,l=e[u];if(l<r)o=u+1;else if(l>r)a=u-1;else return e[u+i]}return-1}NEe(xg);NEe(Ont);var Fe;(function(e){e.HTML="http://www.w3.org/1999/xhtml",e.MATHML="http://www.w3.org/1998/Math/MathML",e.SVG="http://www.w3.org/2000/svg",e.XLINK="http://www.w3.org/1999/xlink",e.XML="http://www.w3.org/XML/1998/namespace",e.XMLNS="http://www.w3.org/2000/xmlns/"})(Fe=Fe||(Fe={}));var w0;(function(e){e.TYPE="type",e.ACTION="action",e.ENCODING="encoding",e.PROMPT="prompt",e.NAME="name",e.COLOR="color",e.FACE="face",e.SIZE="size"})(w0=w0||(w0={}));var yl;(function(e){e.NO_QUIRKS="no-quirks",e.QUIRKS="quirks",e.LIMITED_QUIRKS="limited-quirks"})(yl=yl||(yl={}));var Ee;(function(e){e.A="a",e.ADDRESS="address",e.ANNOTATION_XML="annotation-xml",e.APPLET="applet",e.AREA="area",e.ARTICLE="article",e.ASIDE="aside",e.B="b",e.BASE="base",e.BASEFONT="basefont",e.BGSOUND="bgsound",e.BIG="big",e.BLOCKQUOTE="blockquote",e.BODY="body",e.BR="br",e.BUTTON="button",e.CAPTION="caption",e.CENTER="center",e.CODE="code",e.COL="col",e.COLGROUP="colgroup",e.DD="dd",e.DESC="desc",e.DETAILS="details",e.DIALOG="dialog",e.DIR="dir",e.DIV="div",e.DL="dl",e.DT="dt",e.EM="em",e.EMBED="embed",e.FIELDSET="fieldset",e.FIGCAPTION="figcaption",e.FIGURE="figure",e.FONT="font",e.FOOTER="footer",e.FOREIGN_OBJECT="foreignObject",e.FORM="form",e.FRAME="frame",e.FRAMESET="frameset",e.H1="h1",e.H2="h2",e.H3="h3",e.H4="h4",e.H5="h5",e.H6="h6",e.HEAD="head",e.HEADER="header",e.HGROUP="hgroup",e.HR="hr",e.HTML="html",e.I="i",e.IMG="img",e.IMAGE="image",e.INPUT="input",e.IFRAME="iframe",e.KEYGEN="keygen",e.LABEL="label",e.LI="li",e.LINK="link",e.LISTING="listing",e.MAIN="main",e.MALIGNMARK="malignmark",e.MARQUEE="marquee",e.MATH="math",e.MENU="menu",e.META="meta",e.MGLYPH="mglyph",e.MI="mi",e.MO="mo",e.MN="mn",e.MS="ms",e.MTEXT="mtext",e.NAV="nav",e.NOBR="nobr",e.NOFRAMES="noframes",e.NOEMBED="noembed",e.NOSCRIPT="noscript",e.OBJECT="object",e.OL="ol",e.OPTGROUP="optgroup",e.OPTION="option",e.P="p",e.PARAM="param",e.PLAINTEXT="plaintext",e.PRE="pre",e.RB="rb",e.RP="rp",e.RT="rt",e.RTC="rtc",e.RUBY="ruby",e.S="s",e.SCRIPT="script",e.SECTION="section",e.SELECT="select",e.SOURCE="source",e.SMALL="small",e.SPAN="span",e.STRIKE="strike",e.STRONG="strong",e.STYLE="style",e.SUB="sub",e.SUMMARY="summary",e.SUP="sup",e.TABLE="table",e.TBODY="tbody",e.TEMPLATE="template",e.TEXTAREA="textarea",e.TFOOT="tfoot",e.TD="td",e.TH="th",e.THEAD="thead",e.TITLE="title",e.TR="tr",e.TRACK="track",e.TT="tt",e.U="u",e.UL="ul",e.SVG="svg",e.VAR="var",e.WBR="wbr",e.XMP="xmp"})(Ee=Ee||(Ee={}));var R;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.A=1]="A",e[e.ADDRESS=2]="ADDRESS",e[e.ANNOTATION_XML=3]="ANNOTATION_XML",e[e.APPLET=4]="APPLET",e[e.AREA=5]="AREA",e[e.ARTICLE=6]="ARTICLE",e[e.ASIDE=7]="ASIDE",e[e.B=8]="B",e[e.BASE=9]="BASE",e[e.BASEFONT=10]="BASEFONT",e[e.BGSOUND=11]="BGSOUND",e[e.BIG=12]="BIG",e[e.BLOCKQUOTE=13]="BLOCKQUOTE",e[e.BODY=14]="BODY",e[e.BR=15]="BR",e[e.BUTTON=16]="BUTTON",e[e.CAPTION=17]="CAPTION",e[e.CENTER=18]="CENTER",e[e.CODE=19]="CODE",e[e.COL=20]="COL",e[e.COLGROUP=21]="COLGROUP",e[e.DD=22]="DD",e[e.DESC=23]="DESC",e[e.DETAILS=24]="DETAILS",e[e.DIALOG=25]="DIALOG",e[e.DIR=26]="DIR",e[e.DIV=27]="DIV",e[e.DL=28]="DL",e[e.DT=29]="DT",e[e.EM=30]="EM",e[e.EMBED=31]="EMBED",e[e.FIELDSET=32]="FIELDSET",e[e.FIGCAPTION=33]="FIGCAPTION",e[e.FIGURE=34]="FIGURE",e[e.FONT=35]="FONT",e[e.FOOTER=36]="FOOTER",e[e.FOREIGN_OBJECT=37]="FOREIGN_OBJECT",e[e.FORM=38]="FORM",e[e.FRAME=39]="FRAME",e[e.FRAMESET=40]="FRAMESET",e[e.H1=41]="H1",e[e.H2=42]="H2",e[e.H3=43]="H3",e[e.H4=44]="H4",e[e.H5=45]="H5",e[e.H6=46]="H6",e[e.HEAD=47]="HEAD",e[e.HEADER=48]="HEADER",e[e.HGROUP=49]="HGROUP",e[e.HR=50]="HR",e[e.HTML=51]="HTML",e[e.I=52]="I",e[e.IMG=53]="IMG",e[e.IMAGE=54]="IMAGE",e[e.INPUT=55]="INPUT",e[e.IFRAME=56]="IFRAME",e[e.KEYGEN=57]="KEYGEN",e[e.LABEL=58]="LABEL",e[e.LI=59]="LI",e[e.LINK=60]="LINK",e[e.LISTING=61]="LISTING",e[e.MAIN=62]="MAIN",e[e.MALIGNMARK=63]="MALIGNMARK",e[e.MARQUEE=64]="MARQUEE",e[e.MATH=65]="MATH",e[e.MENU=66]="MENU",e[e.META=67]="META",e[e.MGLYPH=68]="MGLYPH",e[e.MI=69]="MI",e[e.MO=70]="MO",e[e.MN=71]="MN",e[e.MS=72]="MS",e[e.MTEXT=73]="MTEXT",e[e.NAV=74]="NAV",e[e.NOBR=75]="NOBR",e[e.NOFRAMES=76]="NOFRAMES",e[e.NOEMBED=77]="NOEMBED",e[e.NOSCRIPT=78]="NOSCRIPT",e[e.OBJECT=79]="OBJECT",e[e.OL=80]="OL",e[e.OPTGROUP=81]="OPTGROUP",e[e.OPTION=82]="OPTION",e[e.P=83]="P",e[e.PARAM=84]="PARAM",e[e.PLAINTEXT=85]="PLAINTEXT",e[e.PRE=86]="PRE",e[e.RB=87]="RB",e[e.RP=88]="RP",e[e.RT=89]="RT",e[e.RTC=90]="RTC",e[e.RUBY=91]="RUBY",e[e.S=92]="S",e[e.SCRIPT=93]="SCRIPT",e[e.SECTION=94]="SECTION",e[e.SELECT=95]="SELECT",e[e.SOURCE=96]="SOURCE",e[e.SMALL=97]="SMALL",e[e.SPAN=98]="SPAN",e[e.STRIKE=99]="STRIKE",e[e.STRONG=100]="STRONG",e[e.STYLE=101]="STYLE",e[e.SUB=102]="SUB",e[e.SUMMARY=103]="SUMMARY",e[e.SUP=104]="SUP",e[e.TABLE=105]="TABLE",e[e.TBODY=106]="TBODY",e[e.TEMPLATE=107]="TEMPLATE",e[e.TEXTAREA=108]="TEXTAREA",e[e.TFOOT=109]="TFOOT",e[e.TD=110]="TD",e[e.TH=111]="TH",e[e.THEAD=112]="THEAD",e[e.TITLE=113]="TITLE",e[e.TR=114]="TR",e[e.TRACK=115]="TRACK",e[e.TT=116]="TT",e[e.U=117]="U",e[e.UL=118]="UL",e[e.SVG=119]="SVG",e[e.VAR=120]="VAR",e[e.WBR=121]="WBR",e[e.XMP=122]="XMP"})(R=R||(R={}));const Vnt=new Map([[Ee.A,R.A],[Ee.ADDRESS,R.ADDRESS],[Ee.ANNOTATION_XML,R.ANNOTATION_XML],[Ee.APPLET,R.APPLET],[Ee.AREA,R.AREA],[Ee.ARTICLE,R.ARTICLE],[Ee.ASIDE,R.ASIDE],[Ee.B,R.B],[Ee.BASE,R.BASE],[Ee.BASEFONT,R.BASEFONT],[Ee.BGSOUND,R.BGSOUND],[Ee.BIG,R.BIG],[Ee.BLOCKQUOTE,R.BLOCKQUOTE],[Ee.BODY,R.BODY],[Ee.BR,R.BR],[Ee.BUTTON,R.BUTTON],[Ee.CAPTION,R.CAPTION],[Ee.CENTER,R.CENTER],[Ee.CODE,R.CODE],[Ee.COL,R.COL],[Ee.COLGROUP,R.COLGROUP],[Ee.DD,R.DD],[Ee.DESC,R.DESC],[Ee.DETAILS,R.DETAILS],[Ee.DIALOG,R.DIALOG],[Ee.DIR,R.DIR],[Ee.DIV,R.DIV],[Ee.DL,R.DL],[Ee.DT,R.DT],[Ee.EM,R.EM],[Ee.EMBED,R.EMBED],[Ee.FIELDSET,R.FIELDSET],[Ee.FIGCAPTION,R.FIGCAPTION],[Ee.FIGURE,R.FIGURE],[Ee.FONT,R.FONT],[Ee.FOOTER,R.FOOTER],[Ee.FOREIGN_OBJECT,R.FOREIGN_OBJECT],[Ee.FORM,R.FORM],[Ee.FRAME,R.FRAME],[Ee.FRAMESET,R.FRAMESET],[Ee.H1,R.H1],[Ee.H2,R.H2],[Ee.H3,R.H3],[Ee.H4,R.H4],[Ee.H5,R.H5],[Ee.H6,R.H6],[Ee.HEAD,R.HEAD],[Ee.HEADER,R.HEADER],[Ee.HGROUP,R.HGROUP],[Ee.HR,R.HR],[Ee.HTML,R.HTML],[Ee.I,R.I],[Ee.IMG,R.IMG],[Ee.IMAGE,R.IMAGE],[Ee.INPUT,R.INPUT],[Ee.IFRAME,R.IFRAME],[Ee.KEYGEN,R.KEYGEN],[Ee.LABEL,R.LABEL],[Ee.LI,R.LI],[Ee.LINK,R.LINK],[Ee.LISTING,R.LISTING],[Ee.MAIN,R.MAIN],[Ee.MALIGNMARK,R.MALIGNMARK],[Ee.MARQUEE,R.MARQUEE],[Ee.MATH,R.MATH],[Ee.MENU,R.MENU],[Ee.META,R.META],[Ee.MGLYPH,R.MGLYPH],[Ee.MI,R.MI],[Ee.MO,R.MO],[Ee.MN,R.MN],[Ee.MS,R.MS],[Ee.MTEXT,R.MTEXT],[Ee.NAV,R.NAV],[Ee.NOBR,R.NOBR],[Ee.NOFRAMES,R.NOFRAMES],[Ee.NOEMBED,R.NOEMBED],[Ee.NOSCRIPT,R.NOSCRIPT],[Ee.OBJECT,R.OBJECT],[Ee.OL,R.OL],[Ee.OPTGROUP,R.OPTGROUP],[Ee.OPTION,R.OPTION],[Ee.P,R.P],[Ee.PARAM,R.PARAM],[Ee.PLAINTEXT,R.PLAINTEXT],[Ee.PRE,R.PRE],[Ee.RB,R.RB],[Ee.RP,R.RP],[Ee.RT,R.RT],[Ee.RTC,R.RTC],[Ee.RUBY,R.RUBY],[Ee.S,R.S],[Ee.SCRIPT,R.SCRIPT],[Ee.SECTION,R.SECTION],[Ee.SELECT,R.SELECT],[Ee.SOURCE,R.SOURCE],[Ee.SMALL,R.SMALL],[Ee.SPAN,R.SPAN],[Ee.STRIKE,R.STRIKE],[Ee.STRONG,R.STRONG],[Ee.STYLE,R.STYLE],[Ee.SUB,R.SUB],[Ee.SUMMARY,R.SUMMARY],[Ee.SUP,R.SUP],[Ee.TABLE,R.TABLE],[Ee.TBODY,R.TBODY],[Ee.TEMPLATE,R.TEMPLATE],[Ee.TEXTAREA,R.TEXTAREA],[Ee.TFOOT,R.TFOOT],[Ee.TD,R.TD],[Ee.TH,R.TH],[Ee.THEAD,R.THEAD],[Ee.TITLE,R.TITLE],[Ee.TR,R.TR],[Ee.TRACK,R.TRACK],[Ee.TT,R.TT],[Ee.U,R.U],[Ee.UL,R.UL],[Ee.SVG,R.SVG],[Ee.VAR,R.VAR],[Ee.WBR,R.WBR],[Ee.XMP,R.XMP]]);function fS(e){var t;return(t=Vnt.get(e))!==null&&t!==void 0?t:R.UNKNOWN}const Je=R,Hnt={[Fe.HTML]:new Set([Je.ADDRESS,Je.APPLET,Je.AREA,Je.ARTICLE,Je.ASIDE,Je.BASE,Je.BASEFONT,Je.BGSOUND,Je.BLOCKQUOTE,Je.BODY,Je.BR,Je.BUTTON,Je.CAPTION,Je.CENTER,Je.COL,Je.COLGROUP,Je.DD,Je.DETAILS,Je.DIR,Je.DIV,Je.DL,Je.DT,Je.EMBED,Je.FIELDSET,Je.FIGCAPTION,Je.FIGURE,Je.FOOTER,Je.FORM,Je.FRAME,Je.FRAMESET,Je.H1,Je.H2,Je.H3,Je.H4,Je.H5,Je.H6,Je.HEAD,Je.HEADER,Je.HGROUP,Je.HR,Je.HTML,Je.IFRAME,Je.IMG,Je.INPUT,Je.LI,Je.LINK,Je.LISTING,Je.MAIN,Je.MARQUEE,Je.MENU,Je.META,Je.NAV,Je.NOEMBED,Je.NOFRAMES,Je.NOSCRIPT,Je.OBJECT,Je.OL,Je.P,Je.PARAM,Je.PLAINTEXT,Je.PRE,Je.SCRIPT,Je.SECTION,Je.SELECT,Je.SOURCE,Je.STYLE,Je.SUMMARY,Je.TABLE,Je.TBODY,Je.TD,Je.TEMPLATE,Je.TEXTAREA,Je.TFOOT,Je.TH,Je.THEAD,Je.TITLE,Je.TR,Je.TRACK,Je.UL,Je.WBR,Je.XMP]),[Fe.MATHML]:new Set([Je.MI,Je.MO,Je.MN,Je.MS,Je.MTEXT,Je.ANNOTATION_XML]),[Fe.SVG]:new Set([Je.TITLE,Je.FOREIGN_OBJECT,Je.DESC]),[Fe.XLINK]:new Set,[Fe.XML]:new Set,[Fe.XMLNS]:new Set};function PEe(e){return e===Je.H1||e===Je.H2||e===Je.H3||e===Je.H4||e===Je.H5||e===Je.H6}Ee.STYLE,Ee.SCRIPT,Ee.XMP,Ee.IFRAME,Ee.NOEMBED,Ee.NOFRAMES,Ee.PLAINTEXT;const qnt=new Map([[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]);var J;(function(e){e[e.DATA=0]="DATA",e[e.RCDATA=1]="RCDATA",e[e.RAWTEXT=2]="RAWTEXT",e[e.SCRIPT_DATA=3]="SCRIPT_DATA",e[e.PLAINTEXT=4]="PLAINTEXT",e[e.TAG_OPEN=5]="TAG_OPEN",e[e.END_TAG_OPEN=6]="END_TAG_OPEN",e[e.TAG_NAME=7]="TAG_NAME",e[e.RCDATA_LESS_THAN_SIGN=8]="RCDATA_LESS_THAN_SIGN",e[e.RCDATA_END_TAG_OPEN=9]="RCDATA_END_TAG_OPEN",e[e.RCDATA_END_TAG_NAME=10]="RCDATA_END_TAG_NAME",e[e.RAWTEXT_LESS_THAN_SIGN=11]="RAWTEXT_LESS_THAN_SIGN",e[e.RAWTEXT_END_TAG_OPEN=12]="RAWTEXT_END_TAG_OPEN",e[e.RAWTEXT_END_TAG_NAME=13]="RAWTEXT_END_TAG_NAME",e[e.SCRIPT_DATA_LESS_THAN_SIGN=14]="SCRIPT_DATA_LESS_THAN_SIGN",e[e.SCRIPT_DATA_END_TAG_OPEN=15]="SCRIPT_DATA_END_TAG_OPEN",e[e.SCRIPT_DATA_END_TAG_NAME=16]="SCRIPT_DATA_END_TAG_NAME",e[e.SCRIPT_DATA_ESCAPE_START=17]="SCRIPT_DATA_ESCAPE_START",e[e.SCRIPT_DATA_ESCAPE_START_DASH=18]="SCRIPT_DATA_ESCAPE_START_DASH",e[e.SCRIPT_DATA_ESCAPED=19]="SCRIPT_DATA_ESCAPED",e[e.SCRIPT_DATA_ESCAPED_DASH=20]="SCRIPT_DATA_ESCAPED_DASH",e[e.SCRIPT_DATA_ESCAPED_DASH_DASH=21]="SCRIPT_DATA_ESCAPED_DASH_DASH",e[e.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN=22]="SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN",e[e.SCRIPT_DATA_ESCAPED_END_TAG_OPEN=23]="SCRIPT_DATA_ESCAPED_END_TAG_OPEN",e[e.SCRIPT_DATA_ESCAPED_END_TAG_NAME=24]="SCRIPT_DATA_ESCAPED_END_TAG_NAME",e[e.SCRIPT_DATA_DOUBLE_ESCAPE_START=25]="SCRIPT_DATA_DOUBLE_ESCAPE_START",e[e.SCRIPT_DATA_DOUBLE_ESCAPED=26]="SCRIPT_DATA_DOUBLE_ESCAPED",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_DASH=27]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH=28]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN=29]="SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN",e[e.SCRIPT_DATA_DOUBLE_ESCAPE_END=30]="SCRIPT_DATA_DOUBLE_ESCAPE_END",e[e.BEFORE_ATTRIBUTE_NAME=31]="BEFORE_ATTRIBUTE_NAME",e[e.ATTRIBUTE_NAME=32]="ATTRIBUTE_NAME",e[e.AFTER_ATTRIBUTE_NAME=33]="AFTER_ATTRIBUTE_NAME",e[e.BEFORE_ATTRIBUTE_VALUE=34]="BEFORE_ATTRIBUTE_VALUE",e[e.ATTRIBUTE_VALUE_DOUBLE_QUOTED=35]="ATTRIBUTE_VALUE_DOUBLE_QUOTED",e[e.ATTRIBUTE_VALUE_SINGLE_QUOTED=36]="ATTRIBUTE_VALUE_SINGLE_QUOTED",e[e.ATTRIBUTE_VALUE_UNQUOTED=37]="ATTRIBUTE_VALUE_UNQUOTED",e[e.AFTER_ATTRIBUTE_VALUE_QUOTED=38]="AFTER_ATTRIBUTE_VALUE_QUOTED",e[e.SELF_CLOSING_START_TAG=39]="SELF_CLOSING_START_TAG",e[e.BOGUS_COMMENT=40]="BOGUS_COMMENT",e[e.MARKUP_DECLARATION_OPEN=41]="MARKUP_DECLARATION_OPEN",e[e.COMMENT_START=42]="COMMENT_START",e[e.COMMENT_START_DASH=43]="COMMENT_START_DASH",e[e.COMMENT=44]="COMMENT",e[e.COMMENT_LESS_THAN_SIGN=45]="COMMENT_LESS_THAN_SIGN",e[e.COMMENT_LESS_THAN_SIGN_BANG=46]="COMMENT_LESS_THAN_SIGN_BANG",e[e.COMMENT_LESS_THAN_SIGN_BANG_DASH=47]="COMMENT_LESS_THAN_SIGN_BANG_DASH",e[e.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH=48]="COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH",e[e.COMMENT_END_DASH=49]="COMMENT_END_DASH",e[e.COMMENT_END=50]="COMMENT_END",e[e.COMMENT_END_BANG=51]="COMMENT_END_BANG",e[e.DOCTYPE=52]="DOCTYPE",e[e.BEFORE_DOCTYPE_NAME=53]="BEFORE_DOCTYPE_NAME",e[e.DOCTYPE_NAME=54]="DOCTYPE_NAME",e[e.AFTER_DOCTYPE_NAME=55]="AFTER_DOCTYPE_NAME",e[e.AFTER_DOCTYPE_PUBLIC_KEYWORD=56]="AFTER_DOCTYPE_PUBLIC_KEYWORD",e[e.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER=57]="BEFORE_DOCTYPE_PUBLIC_IDENTIFIER",e[e.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED=58]="DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED",e[e.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED=59]="DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED",e[e.AFTER_DOCTYPE_PUBLIC_IDENTIFIER=60]="AFTER_DOCTYPE_PUBLIC_IDENTIFIER",e[e.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS=61]="BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS",e[e.AFTER_DOCTYPE_SYSTEM_KEYWORD=62]="AFTER_DOCTYPE_SYSTEM_KEYWORD",e[e.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER=63]="BEFORE_DOCTYPE_SYSTEM_IDENTIFIER",e[e.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED=64]="DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED",e[e.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED=65]="DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED",e[e.AFTER_DOCTYPE_SYSTEM_IDENTIFIER=66]="AFTER_DOCTYPE_SYSTEM_IDENTIFIER",e[e.BOGUS_DOCTYPE=67]="BOGUS_DOCTYPE",e[e.CDATA_SECTION=68]="CDATA_SECTION",e[e.CDATA_SECTION_BRACKET=69]="CDATA_SECTION_BRACKET",e[e.CDATA_SECTION_END=70]="CDATA_SECTION_END",e[e.CHARACTER_REFERENCE=71]="CHARACTER_REFERENCE",e[e.NAMED_CHARACTER_REFERENCE=72]="NAMED_CHARACTER_REFERENCE",e[e.AMBIGUOUS_AMPERSAND=73]="AMBIGUOUS_AMPERSAND",e[e.NUMERIC_CHARACTER_REFERENCE=74]="NUMERIC_CHARACTER_REFERENCE",e[e.HEXADEMICAL_CHARACTER_REFERENCE_START=75]="HEXADEMICAL_CHARACTER_REFERENCE_START",e[e.HEXADEMICAL_CHARACTER_REFERENCE=76]="HEXADEMICAL_CHARACTER_REFERENCE",e[e.DECIMAL_CHARACTER_REFERENCE=77]="DECIMAL_CHARACTER_REFERENCE",e[e.NUMERIC_CHARACTER_REFERENCE_END=78]="NUMERIC_CHARACTER_REFERENCE_END"})(J||(J={}));const os={DATA:J.DATA,RCDATA:J.RCDATA,RAWTEXT:J.RAWTEXT,SCRIPT_DATA:J.SCRIPT_DATA,PLAINTEXT:J.PLAINTEXT,CDATA_SECTION:J.CDATA_SECTION};function bC(e){return e>=X.DIGIT_0&&e<=X.DIGIT_9}function b2(e){return e>=X.LATIN_CAPITAL_A&&e<=X.LATIN_CAPITAL_Z}function Wnt(e){return e>=X.LATIN_SMALL_A&&e<=X.LATIN_SMALL_Z}function Sg(e){return Wnt(e)||b2(e)}function _7(e){return Sg(e)||bC(e)}function OEe(e){return e>=X.LATIN_CAPITAL_A&&e<=X.LATIN_CAPITAL_F}function $Ee(e){return e>=X.LATIN_SMALL_A&&e<=X.LATIN_SMALL_F}function Gnt(e){return bC(e)||OEe(e)||$Ee(e)}function DN(e){return e+32}function MEe(e){return e===X.SPACE||e===X.LINE_FEED||e===X.TABULATION||e===X.FORM_FEED}function Ynt(e){return e===X.EQUALS_SIGN||_7(e)}function due(e){return MEe(e)||e===X.SOLIDUS||e===X.GREATER_THAN_SIGN}class Knt{constructor(t,n){this.options=t,this.handler=n,this.paused=!1,this.inLoop=!1,this.inForeignNode=!1,this.lastStartTagName="",this.active=!1,this.state=J.DATA,this.returnState=J.DATA,this.charRefCode=-1,this.consumedAfterSnapshot=-1,this.currentCharacterToken=null,this.currentToken=null,this.currentAttr={name:"",value:""},this.preprocessor=new Pnt(n),this.currentLocation=this.getCurrentLocation(-1)}_err(t){var n,r;(r=(n=this.handler).onParseError)===null||r===void 0||r.call(n,this.preprocessor.getError(t))}getCurrentLocation(t){return this.options.sourceCodeLocationInfo?{startLine:this.preprocessor.line,startCol:this.preprocessor.col-t,startOffset:this.preprocessor.offset-t,endLine:-1,endCol:-1,endOffset:-1}:null}_runParsingLoop(){if(!this.inLoop){for(this.inLoop=!0;this.active&&!this.paused;){this.consumedAfterSnapshot=0;const t=this._consume();this._ensureHibernation()||this._callState(t)}this.inLoop=!1}}pause(){this.paused=!0}resume(t){if(!this.paused)throw new Error("Parser was already resumed");this.paused=!1,!this.inLoop&&(this._runParsingLoop(),this.paused||t==null||t())}write(t,n,r){this.active=!0,this.preprocessor.write(t,n),this._runParsingLoop(),this.paused||r==null||r()}insertHtmlAtCurrentPos(t){this.active=!0,this.preprocessor.insertHtmlAtCurrentPos(t),this._runParsingLoop()}_ensureHibernation(){return this.preprocessor.endOfChunkHit?(this._unconsume(this.consumedAfterSnapshot),this.active=!1,!0):!1}_consume(){return this.consumedAfterSnapshot++,this.preprocessor.advance()}_unconsume(t){this.consumedAfterSnapshot-=t,this.preprocessor.retreat(t)}_reconsumeInState(t,n){this.state=t,this._callState(n)}_advanceBy(t){this.consumedAfterSnapshot+=t;for(let n=0;n<t;n++)this.preprocessor.advance()}_consumeSequenceIfMatch(t,n){return this.preprocessor.startsWith(t,n)?(this._advanceBy(t.length-1),!0):!1}_createStartTagToken(){this.currentToken={type:kn.START_TAG,tagName:"",tagID:R.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(1)}}_createEndTagToken(){this.currentToken={type:kn.END_TAG,tagName:"",tagID:R.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(2)}}_createCommentToken(t){this.currentToken={type:kn.COMMENT,data:"",location:this.getCurrentLocation(t)}}_createDoctypeToken(t){this.currentToken={type:kn.DOCTYPE,name:t,forceQuirks:!1,publicId:null,systemId:null,location:this.currentLocation}}_createCharacterToken(t,n){this.currentCharacterToken={type:t,chars:n,location:this.currentLocation}}_createAttr(t){this.currentAttr={name:t,value:""},this.currentLocation=this.getCurrentLocation(0)}_leaveAttrName(){var t,n;const r=this.currentToken;if(REe(r,this.currentAttr.name)===null){if(r.attrs.push(this.currentAttr),r.location&&this.currentLocation){const i=(t=(n=r.location).attrs)!==null&&t!==void 0?t:n.attrs=Object.create(null);i[this.currentAttr.name]=this.currentLocation,this._leaveAttrValue()}}else this._err(Ne.duplicateAttribute)}_leaveAttrValue(){this.currentLocation&&(this.currentLocation.endLine=this.preprocessor.line,this.currentLocation.endCol=this.preprocessor.col,this.currentLocation.endOffset=this.preprocessor.offset)}prepareToken(t){this._emitCurrentCharacterToken(t.location),this.currentToken=null,t.location&&(t.location.endLine=this.preprocessor.line,t.location.endCol=this.preprocessor.col+1,t.location.endOffset=this.preprocessor.offset+1),this.currentLocation=this.getCurrentLocation(-1)}emitCurrentTagToken(){const t=this.currentToken;this.prepareToken(t),t.tagID=fS(t.tagName),t.type===kn.START_TAG?(this.lastStartTagName=t.tagName,this.handler.onStartTag(t)):(t.attrs.length>0&&this._err(Ne.endTagWithAttributes),t.selfClosing&&this._err(Ne.endTagWithTrailingSolidus),this.handler.onEndTag(t)),this.preprocessor.dropParsedChunk()}emitCurrentComment(t){this.prepareToken(t),this.handler.onComment(t),this.preprocessor.dropParsedChunk()}emitCurrentDoctype(t){this.prepareToken(t),this.handler.onDoctype(t),this.preprocessor.dropParsedChunk()}_emitCurrentCharacterToken(t){if(this.currentCharacterToken){switch(t&&this.currentCharacterToken.location&&(this.currentCharacterToken.location.endLine=t.startLine,this.currentCharacterToken.location.endCol=t.startCol,this.currentCharacterToken.location.endOffset=t.startOffset),this.currentCharacterToken.type){case kn.CHARACTER:{this.handler.onCharacter(this.currentCharacterToken);break}case kn.NULL_CHARACTER:{this.handler.onNullCharacter(this.currentCharacterToken);break}case kn.WHITESPACE_CHARACTER:{this.handler.onWhitespaceCharacter(this.currentCharacterToken);break}}this.currentCharacterToken=null}}_emitEOFToken(){const t=this.getCurrentLocation(0);t&&(t.endLine=t.startLine,t.endCol=t.startCol,t.endOffset=t.startOffset),this._emitCurrentCharacterToken(t),this.handler.onEof({type:kn.EOF,location:t}),this.active=!1}_appendCharToCurrentCharacterToken(t,n){if(this.currentCharacterToken)if(this.currentCharacterToken.type!==t)this.currentLocation=this.getCurrentLocation(0),this._emitCurrentCharacterToken(this.currentLocation),this.preprocessor.dropParsedChunk();else{this.currentCharacterToken.chars+=n;return}this._createCharacterToken(t,n)}_emitCodePoint(t){const n=MEe(t)?kn.WHITESPACE_CHARACTER:t===X.NULL?kn.NULL_CHARACTER:kn.CHARACTER;this._appendCharToCurrentCharacterToken(n,String.fromCodePoint(t))}_emitChars(t){this._appendCharToCurrentCharacterToken(kn.CHARACTER,t)}_matchNamedCharacterReference(t){let n=null,r=0,i=!1;for(let s=0,o=xg[0];s>=0&&(s=DEe(xg,o,s+1,t),!(s<0));t=this._consume()){r+=1,o=xg[s];const a=o&eh.VALUE_LENGTH;if(a){const u=(a>>14)-1;if(t!==X.SEMICOLON&&this._isCharacterReferenceInAttribute()&&Ynt(this.preprocessor.peek(1))?(n=[X.AMPERSAND],s+=u):(n=u===0?[xg[s]&~eh.VALUE_LENGTH]:u===1?[xg[++s]]:[xg[++s],xg[++s]],r=0,i=t!==X.SEMICOLON),u===0){this._consume();break}}}return this._unconsume(r),i&&!this.preprocessor.endOfChunkHit&&this._err(Ne.missingSemicolonAfterCharacterReference),this._unconsume(1),n}_isCharacterReferenceInAttribute(){return this.returnState===J.ATTRIBUTE_VALUE_DOUBLE_QUOTED||this.returnState===J.ATTRIBUTE_VALUE_SINGLE_QUOTED||this.returnState===J.ATTRIBUTE_VALUE_UNQUOTED}_flushCodePointConsumedAsCharacterReference(t){this._isCharacterReferenceInAttribute()?this.currentAttr.value+=String.fromCodePoint(t):this._emitCodePoint(t)}_callState(t){switch(this.state){case J.DATA:{this._stateData(t);break}case J.RCDATA:{this._stateRcdata(t);break}case J.RAWTEXT:{this._stateRawtext(t);break}case J.SCRIPT_DATA:{this._stateScriptData(t);break}case J.PLAINTEXT:{this._statePlaintext(t);break}case J.TAG_OPEN:{this._stateTagOpen(t);break}case J.END_TAG_OPEN:{this._stateEndTagOpen(t);break}case J.TAG_NAME:{this._stateTagName(t);break}case J.RCDATA_LESS_THAN_SIGN:{this._stateRcdataLessThanSign(t);break}case J.RCDATA_END_TAG_OPEN:{this._stateRcdataEndTagOpen(t);break}case J.RCDATA_END_TAG_NAME:{this._stateRcdataEndTagName(t);break}case J.RAWTEXT_LESS_THAN_SIGN:{this._stateRawtextLessThanSign(t);break}case J.RAWTEXT_END_TAG_OPEN:{this._stateRawtextEndTagOpen(t);break}case J.RAWTEXT_END_TAG_NAME:{this._stateRawtextEndTagName(t);break}case J.SCRIPT_DATA_LESS_THAN_SIGN:{this._stateScriptDataLessThanSign(t);break}case J.SCRIPT_DATA_END_TAG_OPEN:{this._stateScriptDataEndTagOpen(t);break}case J.SCRIPT_DATA_END_TAG_NAME:{this._stateScriptDataEndTagName(t);break}case J.SCRIPT_DATA_ESCAPE_START:{this._stateScriptDataEscapeStart(t);break}case J.SCRIPT_DATA_ESCAPE_START_DASH:{this._stateScriptDataEscapeStartDash(t);break}case J.SCRIPT_DATA_ESCAPED:{this._stateScriptDataEscaped(t);break}case J.SCRIPT_DATA_ESCAPED_DASH:{this._stateScriptDataEscapedDash(t);break}case J.SCRIPT_DATA_ESCAPED_DASH_DASH:{this._stateScriptDataEscapedDashDash(t);break}case J.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN:{this._stateScriptDataEscapedLessThanSign(t);break}case J.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:{this._stateScriptDataEscapedEndTagOpen(t);break}case J.SCRIPT_DATA_ESCAPED_END_TAG_NAME:{this._stateScriptDataEscapedEndTagName(t);break}case J.SCRIPT_DATA_DOUBLE_ESCAPE_START:{this._stateScriptDataDoubleEscapeStart(t);break}case J.SCRIPT_DATA_DOUBLE_ESCAPED:{this._stateScriptDataDoubleEscaped(t);break}case J.SCRIPT_DATA_DOUBLE_ESCAPED_DASH:{this._stateScriptDataDoubleEscapedDash(t);break}case J.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH:{this._stateScriptDataDoubleEscapedDashDash(t);break}case J.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN:{this._stateScriptDataDoubleEscapedLessThanSign(t);break}case J.SCRIPT_DATA_DOUBLE_ESCAPE_END:{this._stateScriptDataDoubleEscapeEnd(t);break}case J.BEFORE_ATTRIBUTE_NAME:{this._stateBeforeAttributeName(t);break}case J.ATTRIBUTE_NAME:{this._stateAttributeName(t);break}case J.AFTER_ATTRIBUTE_NAME:{this._stateAfterAttributeName(t);break}case J.BEFORE_ATTRIBUTE_VALUE:{this._stateBeforeAttributeValue(t);break}case J.ATTRIBUTE_VALUE_DOUBLE_QUOTED:{this._stateAttributeValueDoubleQuoted(t);break}case J.ATTRIBUTE_VALUE_SINGLE_QUOTED:{this._stateAttributeValueSingleQuoted(t);break}case J.ATTRIBUTE_VALUE_UNQUOTED:{this._stateAttributeValueUnquoted(t);break}case J.AFTER_ATTRIBUTE_VALUE_QUOTED:{this._stateAfterAttributeValueQuoted(t);break}case J.SELF_CLOSING_START_TAG:{this._stateSelfClosingStartTag(t);break}case J.BOGUS_COMMENT:{this._stateBogusComment(t);break}case J.MARKUP_DECLARATION_OPEN:{this._stateMarkupDeclarationOpen(t);break}case J.COMMENT_START:{this._stateCommentStart(t);break}case J.COMMENT_START_DASH:{this._stateCommentStartDash(t);break}case J.COMMENT:{this._stateComment(t);break}case J.COMMENT_LESS_THAN_SIGN:{this._stateCommentLessThanSign(t);break}case J.COMMENT_LESS_THAN_SIGN_BANG:{this._stateCommentLessThanSignBang(t);break}case J.COMMENT_LESS_THAN_SIGN_BANG_DASH:{this._stateCommentLessThanSignBangDash(t);break}case J.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:{this._stateCommentLessThanSignBangDashDash(t);break}case J.COMMENT_END_DASH:{this._stateCommentEndDash(t);break}case J.COMMENT_END:{this._stateCommentEnd(t);break}case J.COMMENT_END_BANG:{this._stateCommentEndBang(t);break}case J.DOCTYPE:{this._stateDoctype(t);break}case J.BEFORE_DOCTYPE_NAME:{this._stateBeforeDoctypeName(t);break}case J.DOCTYPE_NAME:{this._stateDoctypeName(t);break}case J.AFTER_DOCTYPE_NAME:{this._stateAfterDoctypeName(t);break}case J.AFTER_DOCTYPE_PUBLIC_KEYWORD:{this._stateAfterDoctypePublicKeyword(t);break}case J.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER:{this._stateBeforeDoctypePublicIdentifier(t);break}case J.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED:{this._stateDoctypePublicIdentifierDoubleQuoted(t);break}case J.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED:{this._stateDoctypePublicIdentifierSingleQuoted(t);break}case J.AFTER_DOCTYPE_PUBLIC_IDENTIFIER:{this._stateAfterDoctypePublicIdentifier(t);break}case J.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS:{this._stateBetweenDoctypePublicAndSystemIdentifiers(t);break}case J.AFTER_DOCTYPE_SYSTEM_KEYWORD:{this._stateAfterDoctypeSystemKeyword(t);break}case J.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER:{this._stateBeforeDoctypeSystemIdentifier(t);break}case J.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED:{this._stateDoctypeSystemIdentifierDoubleQuoted(t);break}case J.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED:{this._stateDoctypeSystemIdentifierSingleQuoted(t);break}case J.AFTER_DOCTYPE_SYSTEM_IDENTIFIER:{this._stateAfterDoctypeSystemIdentifier(t);break}case J.BOGUS_DOCTYPE:{this._stateBogusDoctype(t);break}case J.CDATA_SECTION:{this._stateCdataSection(t);break}case J.CDATA_SECTION_BRACKET:{this._stateCdataSectionBracket(t);break}case J.CDATA_SECTION_END:{this._stateCdataSectionEnd(t);break}case J.CHARACTER_REFERENCE:{this._stateCharacterReference(t);break}case J.NAMED_CHARACTER_REFERENCE:{this._stateNamedCharacterReference(t);break}case J.AMBIGUOUS_AMPERSAND:{this._stateAmbiguousAmpersand(t);break}case J.NUMERIC_CHARACTER_REFERENCE:{this._stateNumericCharacterReference(t);break}case J.HEXADEMICAL_CHARACTER_REFERENCE_START:{this._stateHexademicalCharacterReferenceStart(t);break}case J.HEXADEMICAL_CHARACTER_REFERENCE:{this._stateHexademicalCharacterReference(t);break}case J.DECIMAL_CHARACTER_REFERENCE:{this._stateDecimalCharacterReference(t);break}case J.NUMERIC_CHARACTER_REFERENCE_END:{this._stateNumericCharacterReferenceEnd(t);break}default:throw new Error("Unknown state")}}_stateData(t){switch(t){case X.LESS_THAN_SIGN:{this.state=J.TAG_OPEN;break}case X.AMPERSAND:{this.returnState=J.DATA,this.state=J.CHARACTER_REFERENCE;break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),this._emitCodePoint(t);break}case X.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateRcdata(t){switch(t){case X.AMPERSAND:{this.returnState=J.RCDATA,this.state=J.CHARACTER_REFERENCE;break}case X.LESS_THAN_SIGN:{this.state=J.RCDATA_LESS_THAN_SIGN;break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),this._emitChars(vi);break}case X.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateRawtext(t){switch(t){case X.LESS_THAN_SIGN:{this.state=J.RAWTEXT_LESS_THAN_SIGN;break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),this._emitChars(vi);break}case X.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptData(t){switch(t){case X.LESS_THAN_SIGN:{this.state=J.SCRIPT_DATA_LESS_THAN_SIGN;break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),this._emitChars(vi);break}case X.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_statePlaintext(t){switch(t){case X.NULL:{this._err(Ne.unexpectedNullCharacter),this._emitChars(vi);break}case X.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateTagOpen(t){if(Sg(t))this._createStartTagToken(),this.state=J.TAG_NAME,this._stateTagName(t);else switch(t){case X.EXCLAMATION_MARK:{this.state=J.MARKUP_DECLARATION_OPEN;break}case X.SOLIDUS:{this.state=J.END_TAG_OPEN;break}case X.QUESTION_MARK:{this._err(Ne.unexpectedQuestionMarkInsteadOfTagName),this._createCommentToken(1),this.state=J.BOGUS_COMMENT,this._stateBogusComment(t);break}case X.EOF:{this._err(Ne.eofBeforeTagName),this._emitChars("<"),this._emitEOFToken();break}default:this._err(Ne.invalidFirstCharacterOfTagName),this._emitChars("<"),this.state=J.DATA,this._stateData(t)}}_stateEndTagOpen(t){if(Sg(t))this._createEndTagToken(),this.state=J.TAG_NAME,this._stateTagName(t);else switch(t){case X.GREATER_THAN_SIGN:{this._err(Ne.missingEndTagName),this.state=J.DATA;break}case X.EOF:{this._err(Ne.eofBeforeTagName),this._emitChars("</"),this._emitEOFToken();break}default:this._err(Ne.invalidFirstCharacterOfTagName),this._createCommentToken(2),this.state=J.BOGUS_COMMENT,this._stateBogusComment(t)}}_stateTagName(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:{this.state=J.BEFORE_ATTRIBUTE_NAME;break}case X.SOLIDUS:{this.state=J.SELF_CLOSING_START_TAG;break}case X.GREATER_THAN_SIGN:{this.state=J.DATA,this.emitCurrentTagToken();break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),n.tagName+=vi;break}case X.EOF:{this._err(Ne.eofInTag),this._emitEOFToken();break}default:n.tagName+=String.fromCodePoint(b2(t)?DN(t):t)}}_stateRcdataLessThanSign(t){t===X.SOLIDUS?this.state=J.RCDATA_END_TAG_OPEN:(this._emitChars("<"),this.state=J.RCDATA,this._stateRcdata(t))}_stateRcdataEndTagOpen(t){Sg(t)?(this.state=J.RCDATA_END_TAG_NAME,this._stateRcdataEndTagName(t)):(this._emitChars("</"),this.state=J.RCDATA,this._stateRcdata(t))}handleSpecialEndTag(t){if(!this.preprocessor.startsWith(this.lastStartTagName,!1))return!this._ensureHibernation();this._createEndTagToken();const n=this.currentToken;switch(n.tagName=this.lastStartTagName,this.preprocessor.peek(this.lastStartTagName.length)){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:return this._advanceBy(this.lastStartTagName.length),this.state=J.BEFORE_ATTRIBUTE_NAME,!1;case X.SOLIDUS:return this._advanceBy(this.lastStartTagName.length),this.state=J.SELF_CLOSING_START_TAG,!1;case X.GREATER_THAN_SIGN:return this._advanceBy(this.lastStartTagName.length),this.emitCurrentTagToken(),this.state=J.DATA,!1;default:return!this._ensureHibernation()}}_stateRcdataEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=J.RCDATA,this._stateRcdata(t))}_stateRawtextLessThanSign(t){t===X.SOLIDUS?this.state=J.RAWTEXT_END_TAG_OPEN:(this._emitChars("<"),this.state=J.RAWTEXT,this._stateRawtext(t))}_stateRawtextEndTagOpen(t){Sg(t)?(this.state=J.RAWTEXT_END_TAG_NAME,this._stateRawtextEndTagName(t)):(this._emitChars("</"),this.state=J.RAWTEXT,this._stateRawtext(t))}_stateRawtextEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=J.RAWTEXT,this._stateRawtext(t))}_stateScriptDataLessThanSign(t){switch(t){case X.SOLIDUS:{this.state=J.SCRIPT_DATA_END_TAG_OPEN;break}case X.EXCLAMATION_MARK:{this.state=J.SCRIPT_DATA_ESCAPE_START,this._emitChars("<!");break}default:this._emitChars("<"),this.state=J.SCRIPT_DATA,this._stateScriptData(t)}}_stateScriptDataEndTagOpen(t){Sg(t)?(this.state=J.SCRIPT_DATA_END_TAG_NAME,this._stateScriptDataEndTagName(t)):(this._emitChars("</"),this.state=J.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=J.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscapeStart(t){t===X.HYPHEN_MINUS?(this.state=J.SCRIPT_DATA_ESCAPE_START_DASH,this._emitChars("-")):(this.state=J.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscapeStartDash(t){t===X.HYPHEN_MINUS?(this.state=J.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-")):(this.state=J.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscaped(t){switch(t){case X.HYPHEN_MINUS:{this.state=J.SCRIPT_DATA_ESCAPED_DASH,this._emitChars("-");break}case X.LESS_THAN_SIGN:{this.state=J.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),this._emitChars(vi);break}case X.EOF:{this._err(Ne.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptDataEscapedDash(t){switch(t){case X.HYPHEN_MINUS:{this.state=J.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-");break}case X.LESS_THAN_SIGN:{this.state=J.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),this.state=J.SCRIPT_DATA_ESCAPED,this._emitChars(vi);break}case X.EOF:{this._err(Ne.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=J.SCRIPT_DATA_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataEscapedDashDash(t){switch(t){case X.HYPHEN_MINUS:{this._emitChars("-");break}case X.LESS_THAN_SIGN:{this.state=J.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case X.GREATER_THAN_SIGN:{this.state=J.SCRIPT_DATA,this._emitChars(">");break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),this.state=J.SCRIPT_DATA_ESCAPED,this._emitChars(vi);break}case X.EOF:{this._err(Ne.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=J.SCRIPT_DATA_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataEscapedLessThanSign(t){t===X.SOLIDUS?this.state=J.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:Sg(t)?(this._emitChars("<"),this.state=J.SCRIPT_DATA_DOUBLE_ESCAPE_START,this._stateScriptDataDoubleEscapeStart(t)):(this._emitChars("<"),this.state=J.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataEscapedEndTagOpen(t){Sg(t)?(this.state=J.SCRIPT_DATA_ESCAPED_END_TAG_NAME,this._stateScriptDataEscapedEndTagName(t)):(this._emitChars("</"),this.state=J.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataEscapedEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=J.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataDoubleEscapeStart(t){if(this.preprocessor.startsWith(pu.SCRIPT,!1)&&due(this.preprocessor.peek(pu.SCRIPT.length))){this._emitCodePoint(t);for(let n=0;n<pu.SCRIPT.length;n++)this._emitCodePoint(this._consume());this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED}else this._ensureHibernation()||(this.state=J.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataDoubleEscaped(t){switch(t){case X.HYPHEN_MINUS:{this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED_DASH,this._emitChars("-");break}case X.LESS_THAN_SIGN:{this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),this._emitChars(vi);break}case X.EOF:{this._err(Ne.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedDash(t){switch(t){case X.HYPHEN_MINUS:{this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH,this._emitChars("-");break}case X.LESS_THAN_SIGN:{this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(vi);break}case X.EOF:{this._err(Ne.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedDashDash(t){switch(t){case X.HYPHEN_MINUS:{this._emitChars("-");break}case X.LESS_THAN_SIGN:{this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case X.GREATER_THAN_SIGN:{this.state=J.SCRIPT_DATA,this._emitChars(">");break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(vi);break}case X.EOF:{this._err(Ne.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedLessThanSign(t){t===X.SOLIDUS?(this.state=J.SCRIPT_DATA_DOUBLE_ESCAPE_END,this._emitChars("/")):(this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(t))}_stateScriptDataDoubleEscapeEnd(t){if(this.preprocessor.startsWith(pu.SCRIPT,!1)&&due(this.preprocessor.peek(pu.SCRIPT.length))){this._emitCodePoint(t);for(let n=0;n<pu.SCRIPT.length;n++)this._emitCodePoint(this._consume());this.state=J.SCRIPT_DATA_ESCAPED}else this._ensureHibernation()||(this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(t))}_stateBeforeAttributeName(t){switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:break;case X.SOLIDUS:case X.GREATER_THAN_SIGN:case X.EOF:{this.state=J.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(t);break}case X.EQUALS_SIGN:{this._err(Ne.unexpectedEqualsSignBeforeAttributeName),this._createAttr("="),this.state=J.ATTRIBUTE_NAME;break}default:this._createAttr(""),this.state=J.ATTRIBUTE_NAME,this._stateAttributeName(t)}}_stateAttributeName(t){switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:case X.SOLIDUS:case X.GREATER_THAN_SIGN:case X.EOF:{this._leaveAttrName(),this.state=J.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(t);break}case X.EQUALS_SIGN:{this._leaveAttrName(),this.state=J.BEFORE_ATTRIBUTE_VALUE;break}case X.QUOTATION_MARK:case X.APOSTROPHE:case X.LESS_THAN_SIGN:{this._err(Ne.unexpectedCharacterInAttributeName),this.currentAttr.name+=String.fromCodePoint(t);break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),this.currentAttr.name+=vi;break}default:this.currentAttr.name+=String.fromCodePoint(b2(t)?DN(t):t)}}_stateAfterAttributeName(t){switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:break;case X.SOLIDUS:{this.state=J.SELF_CLOSING_START_TAG;break}case X.EQUALS_SIGN:{this.state=J.BEFORE_ATTRIBUTE_VALUE;break}case X.GREATER_THAN_SIGN:{this.state=J.DATA,this.emitCurrentTagToken();break}case X.EOF:{this._err(Ne.eofInTag),this._emitEOFToken();break}default:this._createAttr(""),this.state=J.ATTRIBUTE_NAME,this._stateAttributeName(t)}}_stateBeforeAttributeValue(t){switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:break;case X.QUOTATION_MARK:{this.state=J.ATTRIBUTE_VALUE_DOUBLE_QUOTED;break}case X.APOSTROPHE:{this.state=J.ATTRIBUTE_VALUE_SINGLE_QUOTED;break}case X.GREATER_THAN_SIGN:{this._err(Ne.missingAttributeValue),this.state=J.DATA,this.emitCurrentTagToken();break}default:this.state=J.ATTRIBUTE_VALUE_UNQUOTED,this._stateAttributeValueUnquoted(t)}}_stateAttributeValueDoubleQuoted(t){switch(t){case X.QUOTATION_MARK:{this.state=J.AFTER_ATTRIBUTE_VALUE_QUOTED;break}case X.AMPERSAND:{this.returnState=J.ATTRIBUTE_VALUE_DOUBLE_QUOTED,this.state=J.CHARACTER_REFERENCE;break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),this.currentAttr.value+=vi;break}case X.EOF:{this._err(Ne.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAttributeValueSingleQuoted(t){switch(t){case X.APOSTROPHE:{this.state=J.AFTER_ATTRIBUTE_VALUE_QUOTED;break}case X.AMPERSAND:{this.returnState=J.ATTRIBUTE_VALUE_SINGLE_QUOTED,this.state=J.CHARACTER_REFERENCE;break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),this.currentAttr.value+=vi;break}case X.EOF:{this._err(Ne.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAttributeValueUnquoted(t){switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:{this._leaveAttrValue(),this.state=J.BEFORE_ATTRIBUTE_NAME;break}case X.AMPERSAND:{this.returnState=J.ATTRIBUTE_VALUE_UNQUOTED,this.state=J.CHARACTER_REFERENCE;break}case X.GREATER_THAN_SIGN:{this._leaveAttrValue(),this.state=J.DATA,this.emitCurrentTagToken();break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),this.currentAttr.value+=vi;break}case X.QUOTATION_MARK:case X.APOSTROPHE:case X.LESS_THAN_SIGN:case X.EQUALS_SIGN:case X.GRAVE_ACCENT:{this._err(Ne.unexpectedCharacterInUnquotedAttributeValue),this.currentAttr.value+=String.fromCodePoint(t);break}case X.EOF:{this._err(Ne.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAfterAttributeValueQuoted(t){switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:{this._leaveAttrValue(),this.state=J.BEFORE_ATTRIBUTE_NAME;break}case X.SOLIDUS:{this._leaveAttrValue(),this.state=J.SELF_CLOSING_START_TAG;break}case X.GREATER_THAN_SIGN:{this._leaveAttrValue(),this.state=J.DATA,this.emitCurrentTagToken();break}case X.EOF:{this._err(Ne.eofInTag),this._emitEOFToken();break}default:this._err(Ne.missingWhitespaceBetweenAttributes),this.state=J.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(t)}}_stateSelfClosingStartTag(t){switch(t){case X.GREATER_THAN_SIGN:{const n=this.currentToken;n.selfClosing=!0,this.state=J.DATA,this.emitCurrentTagToken();break}case X.EOF:{this._err(Ne.eofInTag),this._emitEOFToken();break}default:this._err(Ne.unexpectedSolidusInTag),this.state=J.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(t)}}_stateBogusComment(t){const n=this.currentToken;switch(t){case X.GREATER_THAN_SIGN:{this.state=J.DATA,this.emitCurrentComment(n);break}case X.EOF:{this.emitCurrentComment(n),this._emitEOFToken();break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),n.data+=vi;break}default:n.data+=String.fromCodePoint(t)}}_stateMarkupDeclarationOpen(t){this._consumeSequenceIfMatch(pu.DASH_DASH,!0)?(this._createCommentToken(pu.DASH_DASH.length+1),this.state=J.COMMENT_START):this._consumeSequenceIfMatch(pu.DOCTYPE,!1)?(this.currentLocation=this.getCurrentLocation(pu.DOCTYPE.length+1),this.state=J.DOCTYPE):this._consumeSequenceIfMatch(pu.CDATA_START,!0)?this.inForeignNode?this.state=J.CDATA_SECTION:(this._err(Ne.cdataInHtmlContent),this._createCommentToken(pu.CDATA_START.length+1),this.currentToken.data="[CDATA[",this.state=J.BOGUS_COMMENT):this._ensureHibernation()||(this._err(Ne.incorrectlyOpenedComment),this._createCommentToken(2),this.state=J.BOGUS_COMMENT,this._stateBogusComment(t))}_stateCommentStart(t){switch(t){case X.HYPHEN_MINUS:{this.state=J.COMMENT_START_DASH;break}case X.GREATER_THAN_SIGN:{this._err(Ne.abruptClosingOfEmptyComment),this.state=J.DATA;const n=this.currentToken;this.emitCurrentComment(n);break}default:this.state=J.COMMENT,this._stateComment(t)}}_stateCommentStartDash(t){const n=this.currentToken;switch(t){case X.HYPHEN_MINUS:{this.state=J.COMMENT_END;break}case X.GREATER_THAN_SIGN:{this._err(Ne.abruptClosingOfEmptyComment),this.state=J.DATA,this.emitCurrentComment(n);break}case X.EOF:{this._err(Ne.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="-",this.state=J.COMMENT,this._stateComment(t)}}_stateComment(t){const n=this.currentToken;switch(t){case X.HYPHEN_MINUS:{this.state=J.COMMENT_END_DASH;break}case X.LESS_THAN_SIGN:{n.data+="<",this.state=J.COMMENT_LESS_THAN_SIGN;break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),n.data+=vi;break}case X.EOF:{this._err(Ne.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+=String.fromCodePoint(t)}}_stateCommentLessThanSign(t){const n=this.currentToken;switch(t){case X.EXCLAMATION_MARK:{n.data+="!",this.state=J.COMMENT_LESS_THAN_SIGN_BANG;break}case X.LESS_THAN_SIGN:{n.data+="<";break}default:this.state=J.COMMENT,this._stateComment(t)}}_stateCommentLessThanSignBang(t){t===X.HYPHEN_MINUS?this.state=J.COMMENT_LESS_THAN_SIGN_BANG_DASH:(this.state=J.COMMENT,this._stateComment(t))}_stateCommentLessThanSignBangDash(t){t===X.HYPHEN_MINUS?this.state=J.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:(this.state=J.COMMENT_END_DASH,this._stateCommentEndDash(t))}_stateCommentLessThanSignBangDashDash(t){t!==X.GREATER_THAN_SIGN&&t!==X.EOF&&this._err(Ne.nestedComment),this.state=J.COMMENT_END,this._stateCommentEnd(t)}_stateCommentEndDash(t){const n=this.currentToken;switch(t){case X.HYPHEN_MINUS:{this.state=J.COMMENT_END;break}case X.EOF:{this._err(Ne.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="-",this.state=J.COMMENT,this._stateComment(t)}}_stateCommentEnd(t){const n=this.currentToken;switch(t){case X.GREATER_THAN_SIGN:{this.state=J.DATA,this.emitCurrentComment(n);break}case X.EXCLAMATION_MARK:{this.state=J.COMMENT_END_BANG;break}case X.HYPHEN_MINUS:{n.data+="-";break}case X.EOF:{this._err(Ne.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="--",this.state=J.COMMENT,this._stateComment(t)}}_stateCommentEndBang(t){const n=this.currentToken;switch(t){case X.HYPHEN_MINUS:{n.data+="--!",this.state=J.COMMENT_END_DASH;break}case X.GREATER_THAN_SIGN:{this._err(Ne.incorrectlyClosedComment),this.state=J.DATA,this.emitCurrentComment(n);break}case X.EOF:{this._err(Ne.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="--!",this.state=J.COMMENT,this._stateComment(t)}}_stateDoctype(t){switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:{this.state=J.BEFORE_DOCTYPE_NAME;break}case X.GREATER_THAN_SIGN:{this.state=J.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(t);break}case X.EOF:{this._err(Ne.eofInDoctype),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ne.missingWhitespaceBeforeDoctypeName),this.state=J.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(t)}}_stateBeforeDoctypeName(t){if(b2(t))this._createDoctypeToken(String.fromCharCode(DN(t))),this.state=J.DOCTYPE_NAME;else switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:break;case X.NULL:{this._err(Ne.unexpectedNullCharacter),this._createDoctypeToken(vi),this.state=J.DOCTYPE_NAME;break}case X.GREATER_THAN_SIGN:{this._err(Ne.missingDoctypeName),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=J.DATA;break}case X.EOF:{this._err(Ne.eofInDoctype),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._createDoctypeToken(String.fromCodePoint(t)),this.state=J.DOCTYPE_NAME}}_stateDoctypeName(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:{this.state=J.AFTER_DOCTYPE_NAME;break}case X.GREATER_THAN_SIGN:{this.state=J.DATA,this.emitCurrentDoctype(n);break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),n.name+=vi;break}case X.EOF:{this._err(Ne.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.name+=String.fromCodePoint(b2(t)?DN(t):t)}}_stateAfterDoctypeName(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:break;case X.GREATER_THAN_SIGN:{this.state=J.DATA,this.emitCurrentDoctype(n);break}case X.EOF:{this._err(Ne.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._consumeSequenceIfMatch(pu.PUBLIC,!1)?this.state=J.AFTER_DOCTYPE_PUBLIC_KEYWORD:this._consumeSequenceIfMatch(pu.SYSTEM,!1)?this.state=J.AFTER_DOCTYPE_SYSTEM_KEYWORD:this._ensureHibernation()||(this._err(Ne.invalidCharacterSequenceAfterDoctypeName),n.forceQuirks=!0,this.state=J.BOGUS_DOCTYPE,this._stateBogusDoctype(t))}}_stateAfterDoctypePublicKeyword(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:{this.state=J.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER;break}case X.QUOTATION_MARK:{this._err(Ne.missingWhitespaceAfterDoctypePublicKeyword),n.publicId="",this.state=J.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break}case X.APOSTROPHE:{this._err(Ne.missingWhitespaceAfterDoctypePublicKeyword),n.publicId="",this.state=J.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break}case X.GREATER_THAN_SIGN:{this._err(Ne.missingDoctypePublicIdentifier),n.forceQuirks=!0,this.state=J.DATA,this.emitCurrentDoctype(n);break}case X.EOF:{this._err(Ne.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ne.missingQuoteBeforeDoctypePublicIdentifier),n.forceQuirks=!0,this.state=J.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBeforeDoctypePublicIdentifier(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:break;case X.QUOTATION_MARK:{n.publicId="",this.state=J.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break}case X.APOSTROPHE:{n.publicId="",this.state=J.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break}case X.GREATER_THAN_SIGN:{this._err(Ne.missingDoctypePublicIdentifier),n.forceQuirks=!0,this.state=J.DATA,this.emitCurrentDoctype(n);break}case X.EOF:{this._err(Ne.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ne.missingQuoteBeforeDoctypePublicIdentifier),n.forceQuirks=!0,this.state=J.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateDoctypePublicIdentifierDoubleQuoted(t){const n=this.currentToken;switch(t){case X.QUOTATION_MARK:{this.state=J.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),n.publicId+=vi;break}case X.GREATER_THAN_SIGN:{this._err(Ne.abruptDoctypePublicIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=J.DATA;break}case X.EOF:{this._err(Ne.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.publicId+=String.fromCodePoint(t)}}_stateDoctypePublicIdentifierSingleQuoted(t){const n=this.currentToken;switch(t){case X.APOSTROPHE:{this.state=J.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),n.publicId+=vi;break}case X.GREATER_THAN_SIGN:{this._err(Ne.abruptDoctypePublicIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=J.DATA;break}case X.EOF:{this._err(Ne.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.publicId+=String.fromCodePoint(t)}}_stateAfterDoctypePublicIdentifier(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:{this.state=J.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS;break}case X.GREATER_THAN_SIGN:{this.state=J.DATA,this.emitCurrentDoctype(n);break}case X.QUOTATION_MARK:{this._err(Ne.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),n.systemId="",this.state=J.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case X.APOSTROPHE:{this._err(Ne.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),n.systemId="",this.state=J.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case X.EOF:{this._err(Ne.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ne.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=J.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBetweenDoctypePublicAndSystemIdentifiers(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:break;case X.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=J.DATA;break}case X.QUOTATION_MARK:{n.systemId="",this.state=J.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case X.APOSTROPHE:{n.systemId="",this.state=J.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case X.EOF:{this._err(Ne.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ne.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=J.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateAfterDoctypeSystemKeyword(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:{this.state=J.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER;break}case X.QUOTATION_MARK:{this._err(Ne.missingWhitespaceAfterDoctypeSystemKeyword),n.systemId="",this.state=J.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case X.APOSTROPHE:{this._err(Ne.missingWhitespaceAfterDoctypeSystemKeyword),n.systemId="",this.state=J.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case X.GREATER_THAN_SIGN:{this._err(Ne.missingDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=J.DATA,this.emitCurrentDoctype(n);break}case X.EOF:{this._err(Ne.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ne.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=J.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBeforeDoctypeSystemIdentifier(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:break;case X.QUOTATION_MARK:{n.systemId="",this.state=J.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case X.APOSTROPHE:{n.systemId="",this.state=J.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case X.GREATER_THAN_SIGN:{this._err(Ne.missingDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=J.DATA,this.emitCurrentDoctype(n);break}case X.EOF:{this._err(Ne.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ne.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=J.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateDoctypeSystemIdentifierDoubleQuoted(t){const n=this.currentToken;switch(t){case X.QUOTATION_MARK:{this.state=J.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),n.systemId+=vi;break}case X.GREATER_THAN_SIGN:{this._err(Ne.abruptDoctypeSystemIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=J.DATA;break}case X.EOF:{this._err(Ne.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.systemId+=String.fromCodePoint(t)}}_stateDoctypeSystemIdentifierSingleQuoted(t){const n=this.currentToken;switch(t){case X.APOSTROPHE:{this.state=J.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),n.systemId+=vi;break}case X.GREATER_THAN_SIGN:{this._err(Ne.abruptDoctypeSystemIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=J.DATA;break}case X.EOF:{this._err(Ne.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.systemId+=String.fromCodePoint(t)}}_stateAfterDoctypeSystemIdentifier(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:break;case X.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=J.DATA;break}case X.EOF:{this._err(Ne.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ne.unexpectedCharacterAfterDoctypeSystemIdentifier),this.state=J.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBogusDoctype(t){const n=this.currentToken;switch(t){case X.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=J.DATA;break}case X.NULL:{this._err(Ne.unexpectedNullCharacter);break}case X.EOF:{this.emitCurrentDoctype(n),this._emitEOFToken();break}}}_stateCdataSection(t){switch(t){case X.RIGHT_SQUARE_BRACKET:{this.state=J.CDATA_SECTION_BRACKET;break}case X.EOF:{this._err(Ne.eofInCdata),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateCdataSectionBracket(t){t===X.RIGHT_SQUARE_BRACKET?this.state=J.CDATA_SECTION_END:(this._emitChars("]"),this.state=J.CDATA_SECTION,this._stateCdataSection(t))}_stateCdataSectionEnd(t){switch(t){case X.GREATER_THAN_SIGN:{this.state=J.DATA;break}case X.RIGHT_SQUARE_BRACKET:{this._emitChars("]");break}default:this._emitChars("]]"),this.state=J.CDATA_SECTION,this._stateCdataSection(t)}}_stateCharacterReference(t){t===X.NUMBER_SIGN?this.state=J.NUMERIC_CHARACTER_REFERENCE:_7(t)?(this.state=J.NAMED_CHARACTER_REFERENCE,this._stateNamedCharacterReference(t)):(this._flushCodePointConsumedAsCharacterReference(X.AMPERSAND),this._reconsumeInState(this.returnState,t))}_stateNamedCharacterReference(t){const n=this._matchNamedCharacterReference(t);if(!this._ensureHibernation())if(n){for(let r=0;r<n.length;r++)this._flushCodePointConsumedAsCharacterReference(n[r]);this.state=this.returnState}else this._flushCodePointConsumedAsCharacterReference(X.AMPERSAND),this.state=J.AMBIGUOUS_AMPERSAND}_stateAmbiguousAmpersand(t){_7(t)?this._flushCodePointConsumedAsCharacterReference(t):(t===X.SEMICOLON&&this._err(Ne.unknownNamedCharacterReference),this._reconsumeInState(this.returnState,t))}_stateNumericCharacterReference(t){this.charRefCode=0,t===X.LATIN_SMALL_X||t===X.LATIN_CAPITAL_X?this.state=J.HEXADEMICAL_CHARACTER_REFERENCE_START:bC(t)?(this.state=J.DECIMAL_CHARACTER_REFERENCE,this._stateDecimalCharacterReference(t)):(this._err(Ne.absenceOfDigitsInNumericCharacterReference),this._flushCodePointConsumedAsCharacterReference(X.AMPERSAND),this._flushCodePointConsumedAsCharacterReference(X.NUMBER_SIGN),this._reconsumeInState(this.returnState,t))}_stateHexademicalCharacterReferenceStart(t){Gnt(t)?(this.state=J.HEXADEMICAL_CHARACTER_REFERENCE,this._stateHexademicalCharacterReference(t)):(this._err(Ne.absenceOfDigitsInNumericCharacterReference),this._flushCodePointConsumedAsCharacterReference(X.AMPERSAND),this._flushCodePointConsumedAsCharacterReference(X.NUMBER_SIGN),this._unconsume(2),this.state=this.returnState)}_stateHexademicalCharacterReference(t){OEe(t)?this.charRefCode=this.charRefCode*16+t-55:$Ee(t)?this.charRefCode=this.charRefCode*16+t-87:bC(t)?this.charRefCode=this.charRefCode*16+t-48:t===X.SEMICOLON?this.state=J.NUMERIC_CHARACTER_REFERENCE_END:(this._err(Ne.missingSemicolonAfterCharacterReference),this.state=J.NUMERIC_CHARACTER_REFERENCE_END,this._stateNumericCharacterReferenceEnd(t))}_stateDecimalCharacterReference(t){bC(t)?this.charRefCode=this.charRefCode*10+t-48:t===X.SEMICOLON?this.state=J.NUMERIC_CHARACTER_REFERENCE_END:(this._err(Ne.missingSemicolonAfterCharacterReference),this.state=J.NUMERIC_CHARACTER_REFERENCE_END,this._stateNumericCharacterReferenceEnd(t))}_stateNumericCharacterReferenceEnd(t){if(this.charRefCode===X.NULL)this._err(Ne.nullCharacterReference),this.charRefCode=X.REPLACEMENT_CHARACTER;else if(this.charRefCode>1114111)this._err(Ne.characterReferenceOutsideUnicodeRange),this.charRefCode=X.REPLACEMENT_CHARACTER;else if(AEe(this.charRefCode))this._err(Ne.surrogateCharacterReference),this.charRefCode=X.REPLACEMENT_CHARACTER;else if(kEe(this.charRefCode))this._err(Ne.noncharacterCharacterReference);else if(IEe(this.charRefCode)||this.charRefCode===X.CARRIAGE_RETURN){this._err(Ne.controlCharacterReference);const n=qnt.get(this.charRefCode);n!==void 0&&(this.charRefCode=n)}this._flushCodePointConsumedAsCharacterReference(this.charRefCode),this._reconsumeInState(this.returnState,t)}}const LEe=new Set([R.DD,R.DT,R.LI,R.OPTGROUP,R.OPTION,R.P,R.RB,R.RP,R.RT,R.RTC]),hue=new Set([...LEe,R.CAPTION,R.COLGROUP,R.TBODY,R.TD,R.TFOOT,R.TH,R.THEAD,R.TR]),PN=new Map([[R.APPLET,Fe.HTML],[R.CAPTION,Fe.HTML],[R.HTML,Fe.HTML],[R.MARQUEE,Fe.HTML],[R.OBJECT,Fe.HTML],[R.TABLE,Fe.HTML],[R.TD,Fe.HTML],[R.TEMPLATE,Fe.HTML],[R.TH,Fe.HTML],[R.ANNOTATION_XML,Fe.MATHML],[R.MI,Fe.MATHML],[R.MN,Fe.MATHML],[R.MO,Fe.MATHML],[R.MS,Fe.MATHML],[R.MTEXT,Fe.MATHML],[R.DESC,Fe.SVG],[R.FOREIGN_OBJECT,Fe.SVG],[R.TITLE,Fe.SVG]]),Xnt=[R.H1,R.H2,R.H3,R.H4,R.H5,R.H6],Qnt=[R.TR,R.TEMPLATE,R.HTML],Jnt=[R.TBODY,R.TFOOT,R.THEAD,R.TEMPLATE,R.HTML],Znt=[R.TABLE,R.TEMPLATE,R.HTML],ert=[R.TD,R.TH];class trt{get currentTmplContentOrNode(){return this._isInTemplate()?this.treeAdapter.getTemplateContent(this.current):this.current}constructor(t,n,r){this.treeAdapter=n,this.handler=r,this.items=[],this.tagIDs=[],this.stackTop=-1,this.tmplCount=0,this.currentTagId=R.UNKNOWN,this.current=t}_indexOf(t){return this.items.lastIndexOf(t,this.stackTop)}_isInTemplate(){return this.currentTagId===R.TEMPLATE&&this.treeAdapter.getNamespaceURI(this.current)===Fe.HTML}_updateCurrentElement(){this.current=this.items[this.stackTop],this.currentTagId=this.tagIDs[this.stackTop]}push(t,n){this.stackTop++,this.items[this.stackTop]=t,this.current=t,this.tagIDs[this.stackTop]=n,this.currentTagId=n,this._isInTemplate()&&this.tmplCount++,this.handler.onItemPush(t,n,!0)}pop(){const t=this.current;this.tmplCount>0&&this._isInTemplate()&&this.tmplCount--,this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(t,!0)}replace(t,n){const r=this._indexOf(t);this.items[r]=n,r===this.stackTop&&(this.current=n)}insertAfter(t,n,r){const i=this._indexOf(t)+1;this.items.splice(i,0,n),this.tagIDs.splice(i,0,r),this.stackTop++,i===this.stackTop&&this._updateCurrentElement(),this.handler.onItemPush(this.current,this.currentTagId,i===this.stackTop)}popUntilTagNamePopped(t){let n=this.stackTop+1;do n=this.tagIDs.lastIndexOf(t,n-1);while(n>0&&this.treeAdapter.getNamespaceURI(this.items[n])!==Fe.HTML);this.shortenToLength(n<0?0:n)}shortenToLength(t){for(;this.stackTop>=t;){const n=this.current;this.tmplCount>0&&this._isInTemplate()&&(this.tmplCount-=1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(n,this.stackTop<t)}}popUntilElementPopped(t){const n=this._indexOf(t);this.shortenToLength(n<0?0:n)}popUntilPopped(t,n){const r=this._indexOfTagNames(t,n);this.shortenToLength(r<0?0:r)}popUntilNumberedHeaderPopped(){this.popUntilPopped(Xnt,Fe.HTML)}popUntilTableCellPopped(){this.popUntilPopped(ert,Fe.HTML)}popAllUpToHtmlElement(){this.tmplCount=0,this.shortenToLength(1)}_indexOfTagNames(t,n){for(let r=this.stackTop;r>=0;r--)if(t.includes(this.tagIDs[r])&&this.treeAdapter.getNamespaceURI(this.items[r])===n)return r;return-1}clearBackTo(t,n){const r=this._indexOfTagNames(t,n);this.shortenToLength(r+1)}clearBackToTableContext(){this.clearBackTo(Znt,Fe.HTML)}clearBackToTableBodyContext(){this.clearBackTo(Jnt,Fe.HTML)}clearBackToTableRowContext(){this.clearBackTo(Qnt,Fe.HTML)}remove(t){const n=this._indexOf(t);n>=0&&(n===this.stackTop?this.pop():(this.items.splice(n,1),this.tagIDs.splice(n,1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(t,!1)))}tryPeekProperlyNestedBodyElement(){return this.stackTop>=1&&this.tagIDs[1]===R.BODY?this.items[1]:null}contains(t){return this._indexOf(t)>-1}getCommonAncestor(t){const n=this._indexOf(t)-1;return n>=0?this.items[n]:null}isRootHtmlElementCurrent(){return this.stackTop===0&&this.tagIDs[0]===R.HTML}hasInScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n],i=this.treeAdapter.getNamespaceURI(this.items[n]);if(r===t&&i===Fe.HTML)return!0;if(PN.get(r)===i)return!1}return!0}hasNumberedHeaderInScope(){for(let t=this.stackTop;t>=0;t--){const n=this.tagIDs[t],r=this.treeAdapter.getNamespaceURI(this.items[t]);if(PEe(n)&&r===Fe.HTML)return!0;if(PN.get(n)===r)return!1}return!0}hasInListItemScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n],i=this.treeAdapter.getNamespaceURI(this.items[n]);if(r===t&&i===Fe.HTML)return!0;if((r===R.UL||r===R.OL)&&i===Fe.HTML||PN.get(r)===i)return!1}return!0}hasInButtonScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n],i=this.treeAdapter.getNamespaceURI(this.items[n]);if(r===t&&i===Fe.HTML)return!0;if(r===R.BUTTON&&i===Fe.HTML||PN.get(r)===i)return!1}return!0}hasInTableScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n];if(this.treeAdapter.getNamespaceURI(this.items[n])===Fe.HTML){if(r===t)return!0;if(r===R.TABLE||r===R.TEMPLATE||r===R.HTML)return!1}}return!0}hasTableBodyContextInTableScope(){for(let t=this.stackTop;t>=0;t--){const n=this.tagIDs[t];if(this.treeAdapter.getNamespaceURI(this.items[t])===Fe.HTML){if(n===R.TBODY||n===R.THEAD||n===R.TFOOT)return!0;if(n===R.TABLE||n===R.HTML)return!1}}return!0}hasInSelectScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n];if(this.treeAdapter.getNamespaceURI(this.items[n])===Fe.HTML){if(r===t)return!0;if(r!==R.OPTION&&r!==R.OPTGROUP)return!1}}return!0}generateImpliedEndTags(){for(;LEe.has(this.currentTagId);)this.pop()}generateImpliedEndTagsThoroughly(){for(;hue.has(this.currentTagId);)this.pop()}generateImpliedEndTagsWithExclusion(t){for(;this.currentTagId!==t&&hue.has(this.currentTagId);)this.pop()}}const i8=3;var _f;(function(e){e[e.Marker=0]="Marker",e[e.Element=1]="Element"})(_f=_f||(_f={}));const pue={type:_f.Marker};class nrt{constructor(t){this.treeAdapter=t,this.entries=[],this.bookmark=null}_getNoahArkConditionCandidates(t,n){const r=[],i=n.length,s=this.treeAdapter.getTagName(t),o=this.treeAdapter.getNamespaceURI(t);for(let a=0;a<this.entries.length;a++){const u=this.entries[a];if(u.type===_f.Marker)break;const{element:l}=u;if(this.treeAdapter.getTagName(l)===s&&this.treeAdapter.getNamespaceURI(l)===o){const c=this.treeAdapter.getAttrList(l);c.length===i&&r.push({idx:a,attrs:c})}}return r}_ensureNoahArkCondition(t){if(this.entries.length<i8)return;const n=this.treeAdapter.getAttrList(t),r=this._getNoahArkConditionCandidates(t,n);if(r.length<i8)return;const i=new Map(n.map(o=>[o.name,o.value]));let s=0;for(let o=0;o<r.length;o++){const a=r[o];a.attrs.every(u=>i.get(u.name)===u.value)&&(s+=1,s>=i8&&this.entries.splice(a.idx,1))}}insertMarker(){this.entries.unshift(pue)}pushElement(t,n){this._ensureNoahArkCondition(t),this.entries.unshift({type:_f.Element,element:t,token:n})}insertElementAfterBookmark(t,n){const r=this.entries.indexOf(this.bookmark);this.entries.splice(r,0,{type:_f.Element,element:t,token:n})}removeEntry(t){const n=this.entries.indexOf(t);n>=0&&this.entries.splice(n,1)}clearToLastMarker(){const t=this.entries.indexOf(pue);t>=0?this.entries.splice(0,t+1):this.entries.length=0}getElementEntryInScopeWithTagName(t){const n=this.entries.find(r=>r.type===_f.Marker||this.treeAdapter.getTagName(r.element)===t);return n&&n.type===_f.Element?n:null}getElementEntry(t){return this.entries.find(n=>n.type===_f.Element&&n.element===t)}}function mue(e){return{nodeName:"#text",value:e,parentNode:null}}const tw={createDocument(){return{nodeName:"#document",mode:yl.NO_QUIRKS,childNodes:[]}},createDocumentFragment(){return{nodeName:"#document-fragment",childNodes:[]}},createElement(e,t,n){return{nodeName:e,tagName:e,attrs:n,namespaceURI:t,childNodes:[],parentNode:null}},createCommentNode(e){return{nodeName:"#comment",data:e,parentNode:null}},appendChild(e,t){e.childNodes.push(t),t.parentNode=e},insertBefore(e,t,n){const r=e.childNodes.indexOf(n);e.childNodes.splice(r,0,t),t.parentNode=e},setTemplateContent(e,t){e.content=t},getTemplateContent(e){return e.content},setDocumentType(e,t,n,r){const i=e.childNodes.find(s=>s.nodeName==="#documentType");if(i)i.name=t,i.publicId=n,i.systemId=r;else{const s={nodeName:"#documentType",name:t,publicId:n,systemId:r,parentNode:null};tw.appendChild(e,s)}},setDocumentMode(e,t){e.mode=t},getDocumentMode(e){return e.mode},detachNode(e){if(e.parentNode){const t=e.parentNode.childNodes.indexOf(e);e.parentNode.childNodes.splice(t,1),e.parentNode=null}},insertText(e,t){if(e.childNodes.length>0){const n=e.childNodes[e.childNodes.length-1];if(tw.isTextNode(n)){n.value+=t;return}}tw.appendChild(e,mue(t))},insertTextBefore(e,t,n){const r=e.childNodes[e.childNodes.indexOf(n)-1];r&&tw.isTextNode(r)?r.value+=t:tw.insertBefore(e,mue(t),n)},adoptAttributes(e,t){const n=new Set(e.attrs.map(r=>r.name));for(let r=0;r<t.length;r++)n.has(t[r].name)||e.attrs.push(t[r])},getFirstChild(e){return e.childNodes[0]},getChildNodes(e){return e.childNodes},getParentNode(e){return e.parentNode},getAttrList(e){return e.attrs},getTagName(e){return e.tagName},getNamespaceURI(e){return e.namespaceURI},getTextNodeContent(e){return e.value},getCommentNodeContent(e){return e.data},getDocumentTypeNodeName(e){return e.name},getDocumentTypeNodePublicId(e){return e.publicId},getDocumentTypeNodeSystemId(e){return e.systemId},isTextNode(e){return e.nodeName==="#text"},isCommentNode(e){return e.nodeName==="#comment"},isDocumentTypeNode(e){return e.nodeName==="#documentType"},isElementNode(e){return Object.prototype.hasOwnProperty.call(e,"tagName")},setNodeSourceCodeLocation(e,t){e.sourceCodeLocation=t},getNodeSourceCodeLocation(e){return e.sourceCodeLocation},updateNodeSourceCodeLocation(e,t){e.sourceCodeLocation={...e.sourceCodeLocation,...t}}},FEe="html",rrt="about:legacy-compat",irt="http://www.ibm.com/data/dtd/v11/ibmxhtml1-transitional.dtd",jEe=["+//silmaril//dtd html pro v0r11 19970101//","-//as//dtd html 3.0 aswedit + extensions//","-//advasoft ltd//dtd html 3.0 aswedit + extensions//","-//ietf//dtd html 2.0 level 1//","-//ietf//dtd html 2.0 level 2//","-//ietf//dtd html 2.0 strict level 1//","-//ietf//dtd html 2.0 strict level 2//","-//ietf//dtd html 2.0 strict//","-//ietf//dtd html 2.0//","-//ietf//dtd html 2.1e//","-//ietf//dtd html 3.0//","-//ietf//dtd html 3.2 final//","-//ietf//dtd html 3.2//","-//ietf//dtd html 3//","-//ietf//dtd html level 0//","-//ietf//dtd html level 1//","-//ietf//dtd html level 2//","-//ietf//dtd html level 3//","-//ietf//dtd html strict level 0//","-//ietf//dtd html strict level 1//","-//ietf//dtd html strict level 2//","-//ietf//dtd html strict level 3//","-//ietf//dtd html strict//","-//ietf//dtd html//","-//metrius//dtd metrius presentational//","-//microsoft//dtd internet explorer 2.0 html strict//","-//microsoft//dtd internet explorer 2.0 html//","-//microsoft//dtd internet explorer 2.0 tables//","-//microsoft//dtd internet explorer 3.0 html strict//","-//microsoft//dtd internet explorer 3.0 html//","-//microsoft//dtd internet explorer 3.0 tables//","-//netscape comm. corp.//dtd html//","-//netscape comm. corp.//dtd strict html//","-//o'reilly and associates//dtd html 2.0//","-//o'reilly and associates//dtd html extended 1.0//","-//o'reilly and associates//dtd html extended relaxed 1.0//","-//sq//dtd html 2.0 hotmetal + extensions//","-//softquad software//dtd hotmetal pro 6.0::19990601::extensions to html 4.0//","-//softquad//dtd hotmetal pro 4.0::19971010::extensions to html 4.0//","-//spyglass//dtd html 2.0 extended//","-//sun microsystems corp.//dtd hotjava html//","-//sun microsystems corp.//dtd hotjava strict html//","-//w3c//dtd html 3 1995-03-24//","-//w3c//dtd html 3.2 draft//","-//w3c//dtd html 3.2 final//","-//w3c//dtd html 3.2//","-//w3c//dtd html 3.2s draft//","-//w3c//dtd html 4.0 frameset//","-//w3c//dtd html 4.0 transitional//","-//w3c//dtd html experimental 19960712//","-//w3c//dtd html experimental 970421//","-//w3c//dtd w3 html//","-//w3o//dtd w3 html 3.0//","-//webtechs//dtd mozilla html 2.0//","-//webtechs//dtd mozilla html//"],srt=[...jEe,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"],ort=new Set(["-//w3o//dtd w3 html strict 3.0//en//","-/w3c/dtd html 4.0 transitional/en","html"]),BEe=["-//w3c//dtd xhtml 1.0 frameset//","-//w3c//dtd xhtml 1.0 transitional//"],art=[...BEe,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"];function gue(e,t){return t.some(n=>e.startsWith(n))}function urt(e){return e.name===FEe&&e.publicId===null&&(e.systemId===null||e.systemId===rrt)}function lrt(e){if(e.name!==FEe)return yl.QUIRKS;const{systemId:t}=e;if(t&&t.toLowerCase()===irt)return yl.QUIRKS;let{publicId:n}=e;if(n!==null){if(n=n.toLowerCase(),ort.has(n))return yl.QUIRKS;let r=t===null?srt:jEe;if(gue(n,r))return yl.QUIRKS;if(r=t===null?BEe:art,gue(n,r))return yl.LIMITED_QUIRKS}return yl.NO_QUIRKS}const yue={TEXT_HTML:"text/html",APPLICATION_XML:"application/xhtml+xml"},crt="definitionurl",frt="definitionURL",drt=new Map(["attributeName","attributeType","baseFrequency","baseProfile","calcMode","clipPathUnits","diffuseConstant","edgeMode","filterUnits","glyphRef","gradientTransform","gradientUnits","kernelMatrix","kernelUnitLength","keyPoints","keySplines","keyTimes","lengthAdjust","limitingConeAngle","markerHeight","markerUnits","markerWidth","maskContentUnits","maskUnits","numOctaves","pathLength","patternContentUnits","patternTransform","patternUnits","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","refX","refY","repeatCount","repeatDur","requiredExtensions","requiredFeatures","specularConstant","specularExponent","spreadMethod","startOffset","stdDeviation","stitchTiles","surfaceScale","systemLanguage","tableValues","targetX","targetY","textLength","viewBox","viewTarget","xChannelSelector","yChannelSelector","zoomAndPan"].map(e=>[e.toLowerCase(),e])),hrt=new Map([["xlink:actuate",{prefix:"xlink",name:"actuate",namespace:Fe.XLINK}],["xlink:arcrole",{prefix:"xlink",name:"arcrole",namespace:Fe.XLINK}],["xlink:href",{prefix:"xlink",name:"href",namespace:Fe.XLINK}],["xlink:role",{prefix:"xlink",name:"role",namespace:Fe.XLINK}],["xlink:show",{prefix:"xlink",name:"show",namespace:Fe.XLINK}],["xlink:title",{prefix:"xlink",name:"title",namespace:Fe.XLINK}],["xlink:type",{prefix:"xlink",name:"type",namespace:Fe.XLINK}],["xml:base",{prefix:"xml",name:"base",namespace:Fe.XML}],["xml:lang",{prefix:"xml",name:"lang",namespace:Fe.XML}],["xml:space",{prefix:"xml",name:"space",namespace:Fe.XML}],["xmlns",{prefix:"",name:"xmlns",namespace:Fe.XMLNS}],["xmlns:xlink",{prefix:"xmlns",name:"xlink",namespace:Fe.XMLNS}]]),prt=new Map(["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","textPath"].map(e=>[e.toLowerCase(),e])),mrt=new Set([R.B,R.BIG,R.BLOCKQUOTE,R.BODY,R.BR,R.CENTER,R.CODE,R.DD,R.DIV,R.DL,R.DT,R.EM,R.EMBED,R.H1,R.H2,R.H3,R.H4,R.H5,R.H6,R.HEAD,R.HR,R.I,R.IMG,R.LI,R.LISTING,R.MENU,R.META,R.NOBR,R.OL,R.P,R.PRE,R.RUBY,R.S,R.SMALL,R.SPAN,R.STRONG,R.STRIKE,R.SUB,R.SUP,R.TABLE,R.TT,R.U,R.UL,R.VAR]);function grt(e){const t=e.tagID;return t===R.FONT&&e.attrs.some(({name:r})=>r===w0.COLOR||r===w0.SIZE||r===w0.FACE)||mrt.has(t)}function UEe(e){for(let t=0;t<e.attrs.length;t++)if(e.attrs[t].name===crt){e.attrs[t].name=frt;break}}function zEe(e){for(let t=0;t<e.attrs.length;t++){const n=drt.get(e.attrs[t].name);n!=null&&(e.attrs[t].name=n)}}function KY(e){for(let t=0;t<e.attrs.length;t++){const n=hrt.get(e.attrs[t].name);n&&(e.attrs[t].prefix=n.prefix,e.attrs[t].name=n.name,e.attrs[t].namespace=n.namespace)}}function yrt(e){const t=prt.get(e.tagName);t!=null&&(e.tagName=t,e.tagID=fS(e.tagName))}function vrt(e,t){return t===Fe.MATHML&&(e===R.MI||e===R.MO||e===R.MN||e===R.MS||e===R.MTEXT)}function brt(e,t,n){if(t===Fe.MATHML&&e===R.ANNOTATION_XML){for(let r=0;r<n.length;r++)if(n[r].name===w0.ENCODING){const i=n[r].value.toLowerCase();return i===yue.TEXT_HTML||i===yue.APPLICATION_XML}}return t===Fe.SVG&&(e===R.FOREIGN_OBJECT||e===R.DESC||e===R.TITLE)}function _rt(e,t,n,r){return(!r||r===Fe.HTML)&&brt(e,t,n)||(!r||r===Fe.MATHML)&&vrt(e,t)}const wrt="hidden",Ert=8,xrt=3;var ie;(function(e){e[e.INITIAL=0]="INITIAL",e[e.BEFORE_HTML=1]="BEFORE_HTML",e[e.BEFORE_HEAD=2]="BEFORE_HEAD",e[e.IN_HEAD=3]="IN_HEAD",e[e.IN_HEAD_NO_SCRIPT=4]="IN_HEAD_NO_SCRIPT",e[e.AFTER_HEAD=5]="AFTER_HEAD",e[e.IN_BODY=6]="IN_BODY",e[e.TEXT=7]="TEXT",e[e.IN_TABLE=8]="IN_TABLE",e[e.IN_TABLE_TEXT=9]="IN_TABLE_TEXT",e[e.IN_CAPTION=10]="IN_CAPTION",e[e.IN_COLUMN_GROUP=11]="IN_COLUMN_GROUP",e[e.IN_TABLE_BODY=12]="IN_TABLE_BODY",e[e.IN_ROW=13]="IN_ROW",e[e.IN_CELL=14]="IN_CELL",e[e.IN_SELECT=15]="IN_SELECT",e[e.IN_SELECT_IN_TABLE=16]="IN_SELECT_IN_TABLE",e[e.IN_TEMPLATE=17]="IN_TEMPLATE",e[e.AFTER_BODY=18]="AFTER_BODY",e[e.IN_FRAMESET=19]="IN_FRAMESET",e[e.AFTER_FRAMESET=20]="AFTER_FRAMESET",e[e.AFTER_AFTER_BODY=21]="AFTER_AFTER_BODY",e[e.AFTER_AFTER_FRAMESET=22]="AFTER_AFTER_FRAMESET"})(ie||(ie={}));const Srt={startLine:-1,startCol:-1,startOffset:-1,endLine:-1,endCol:-1,endOffset:-1},VEe=new Set([R.TABLE,R.TBODY,R.TFOOT,R.THEAD,R.TR]),vue={scriptingEnabled:!0,sourceCodeLocationInfo:!1,treeAdapter:tw,onParseError:null};let bue=class{constructor(t,n,r=null,i=null){this.fragmentContext=r,this.scriptHandler=i,this.currentToken=null,this.stopped=!1,this.insertionMode=ie.INITIAL,this.originalInsertionMode=ie.INITIAL,this.headElement=null,this.formElement=null,this.currentNotInHTML=!1,this.tmplInsertionModeStack=[],this.pendingCharacterTokens=[],this.hasNonWhitespacePendingCharacterToken=!1,this.framesetOk=!0,this.skipNextNewLine=!1,this.fosterParentingEnabled=!1,this.options={...vue,...t},this.treeAdapter=this.options.treeAdapter,this.onParseError=this.options.onParseError,this.onParseError&&(this.options.sourceCodeLocationInfo=!0),this.document=n??this.treeAdapter.createDocument(),this.tokenizer=new Knt(this.options,this),this.activeFormattingElements=new nrt(this.treeAdapter),this.fragmentContextID=r?fS(this.treeAdapter.getTagName(r)):R.UNKNOWN,this._setContextModes(r??this.document,this.fragmentContextID),this.openElements=new trt(this.document,this.treeAdapter,this)}static parse(t,n){const r=new this(n);return r.tokenizer.write(t,!0),r.document}static getFragmentParser(t,n){const r={...vue,...n};t??(t=r.treeAdapter.createElement(Ee.TEMPLATE,Fe.HTML,[]));const i=r.treeAdapter.createElement("documentmock",Fe.HTML,[]),s=new this(r,i,t);return s.fragmentContextID===R.TEMPLATE&&s.tmplInsertionModeStack.unshift(ie.IN_TEMPLATE),s._initTokenizerForFragmentParsing(),s._insertFakeRootElement(),s._resetInsertionMode(),s._findFormInFragmentContext(),s}getFragment(){const t=this.treeAdapter.getFirstChild(this.document),n=this.treeAdapter.createDocumentFragment();return this._adoptNodes(t,n),n}_err(t,n,r){var i;if(!this.onParseError)return;const s=(i=t.location)!==null&&i!==void 0?i:Srt,o={code:n,startLine:s.startLine,startCol:s.startCol,startOffset:s.startOffset,endLine:r?s.startLine:s.endLine,endCol:r?s.startCol:s.endCol,endOffset:r?s.startOffset:s.endOffset};this.onParseError(o)}onItemPush(t,n,r){var i,s;(s=(i=this.treeAdapter).onItemPush)===null||s===void 0||s.call(i,t),r&&this.openElements.stackTop>0&&this._setContextModes(t,n)}onItemPop(t,n){var r,i;if(this.options.sourceCodeLocationInfo&&this._setEndLocation(t,this.currentToken),(i=(r=this.treeAdapter).onItemPop)===null||i===void 0||i.call(r,t,this.openElements.current),n){let s,o;this.openElements.stackTop===0&&this.fragmentContext?(s=this.fragmentContext,o=this.fragmentContextID):{current:s,currentTagId:o}=this.openElements,this._setContextModes(s,o)}}_setContextModes(t,n){const r=t===this.document||this.treeAdapter.getNamespaceURI(t)===Fe.HTML;this.currentNotInHTML=!r,this.tokenizer.inForeignNode=!r&&!this._isIntegrationPoint(n,t)}_switchToTextParsing(t,n){this._insertElement(t,Fe.HTML),this.tokenizer.state=n,this.originalInsertionMode=this.insertionMode,this.insertionMode=ie.TEXT}switchToPlaintextParsing(){this.insertionMode=ie.TEXT,this.originalInsertionMode=ie.IN_BODY,this.tokenizer.state=os.PLAINTEXT}_getAdjustedCurrentElement(){return this.openElements.stackTop===0&&this.fragmentContext?this.fragmentContext:this.openElements.current}_findFormInFragmentContext(){let t=this.fragmentContext;for(;t;){if(this.treeAdapter.getTagName(t)===Ee.FORM){this.formElement=t;break}t=this.treeAdapter.getParentNode(t)}}_initTokenizerForFragmentParsing(){if(!(!this.fragmentContext||this.treeAdapter.getNamespaceURI(this.fragmentContext)!==Fe.HTML))switch(this.fragmentContextID){case R.TITLE:case R.TEXTAREA:{this.tokenizer.state=os.RCDATA;break}case R.STYLE:case R.XMP:case R.IFRAME:case R.NOEMBED:case R.NOFRAMES:case R.NOSCRIPT:{this.tokenizer.state=os.RAWTEXT;break}case R.SCRIPT:{this.tokenizer.state=os.SCRIPT_DATA;break}case R.PLAINTEXT:{this.tokenizer.state=os.PLAINTEXT;break}}}_setDocumentType(t){const n=t.name||"",r=t.publicId||"",i=t.systemId||"";if(this.treeAdapter.setDocumentType(this.document,n,r,i),t.location){const o=this.treeAdapter.getChildNodes(this.document).find(a=>this.treeAdapter.isDocumentTypeNode(a));o&&this.treeAdapter.setNodeSourceCodeLocation(o,t.location)}}_attachElementToTree(t,n){if(this.options.sourceCodeLocationInfo){const r=n&&{...n,startTag:n};this.treeAdapter.setNodeSourceCodeLocation(t,r)}if(this._shouldFosterParentOnInsertion())this._fosterParentElement(t);else{const r=this.openElements.currentTmplContentOrNode;this.treeAdapter.appendChild(r,t)}}_appendElement(t,n){const r=this.treeAdapter.createElement(t.tagName,n,t.attrs);this._attachElementToTree(r,t.location)}_insertElement(t,n){const r=this.treeAdapter.createElement(t.tagName,n,t.attrs);this._attachElementToTree(r,t.location),this.openElements.push(r,t.tagID)}_insertFakeElement(t,n){const r=this.treeAdapter.createElement(t,Fe.HTML,[]);this._attachElementToTree(r,null),this.openElements.push(r,n)}_insertTemplate(t){const n=this.treeAdapter.createElement(t.tagName,Fe.HTML,t.attrs),r=this.treeAdapter.createDocumentFragment();this.treeAdapter.setTemplateContent(n,r),this._attachElementToTree(n,t.location),this.openElements.push(n,t.tagID),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(r,null)}_insertFakeRootElement(){const t=this.treeAdapter.createElement(Ee.HTML,Fe.HTML,[]);this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(t,null),this.treeAdapter.appendChild(this.openElements.current,t),this.openElements.push(t,R.HTML)}_appendCommentNode(t,n){const r=this.treeAdapter.createCommentNode(t.data);this.treeAdapter.appendChild(n,r),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(r,t.location)}_insertCharacters(t){let n,r;if(this._shouldFosterParentOnInsertion()?({parent:n,beforeElement:r}=this._findFosterParentingLocation(),r?this.treeAdapter.insertTextBefore(n,t.chars,r):this.treeAdapter.insertText(n,t.chars)):(n=this.openElements.currentTmplContentOrNode,this.treeAdapter.insertText(n,t.chars)),!t.location)return;const i=this.treeAdapter.getChildNodes(n),s=r?i.lastIndexOf(r):i.length,o=i[s-1];if(this.treeAdapter.getNodeSourceCodeLocation(o)){const{endLine:u,endCol:l,endOffset:c}=t.location;this.treeAdapter.updateNodeSourceCodeLocation(o,{endLine:u,endCol:l,endOffset:c})}else this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(o,t.location)}_adoptNodes(t,n){for(let r=this.treeAdapter.getFirstChild(t);r;r=this.treeAdapter.getFirstChild(t))this.treeAdapter.detachNode(r),this.treeAdapter.appendChild(n,r)}_setEndLocation(t,n){if(this.treeAdapter.getNodeSourceCodeLocation(t)&&n.location){const r=n.location,i=this.treeAdapter.getTagName(t),s=n.type===kn.END_TAG&&i===n.tagName?{endTag:{...r},endLine:r.endLine,endCol:r.endCol,endOffset:r.endOffset}:{endLine:r.startLine,endCol:r.startCol,endOffset:r.startOffset};this.treeAdapter.updateNodeSourceCodeLocation(t,s)}}shouldProcessStartTagTokenInForeignContent(t){if(!this.currentNotInHTML)return!1;let n,r;return this.openElements.stackTop===0&&this.fragmentContext?(n=this.fragmentContext,r=this.fragmentContextID):{current:n,currentTagId:r}=this.openElements,t.tagID===R.SVG&&this.treeAdapter.getTagName(n)===Ee.ANNOTATION_XML&&this.treeAdapter.getNamespaceURI(n)===Fe.MATHML?!1:this.tokenizer.inForeignNode||(t.tagID===R.MGLYPH||t.tagID===R.MALIGNMARK)&&!this._isIntegrationPoint(r,n,Fe.HTML)}_processToken(t){switch(t.type){case kn.CHARACTER:{this.onCharacter(t);break}case kn.NULL_CHARACTER:{this.onNullCharacter(t);break}case kn.COMMENT:{this.onComment(t);break}case kn.DOCTYPE:{this.onDoctype(t);break}case kn.START_TAG:{this._processStartTag(t);break}case kn.END_TAG:{this.onEndTag(t);break}case kn.EOF:{this.onEof(t);break}case kn.WHITESPACE_CHARACTER:{this.onWhitespaceCharacter(t);break}}}_isIntegrationPoint(t,n,r){const i=this.treeAdapter.getNamespaceURI(n),s=this.treeAdapter.getAttrList(n);return _rt(t,i,s,r)}_reconstructActiveFormattingElements(){const t=this.activeFormattingElements.entries.length;if(t){const n=this.activeFormattingElements.entries.findIndex(i=>i.type===_f.Marker||this.openElements.contains(i.element)),r=n<0?t-1:n-1;for(let i=r;i>=0;i--){const s=this.activeFormattingElements.entries[i];this._insertElement(s.token,this.treeAdapter.getNamespaceURI(s.element)),s.element=this.openElements.current}}}_closeTableCell(){this.openElements.generateImpliedEndTags(),this.openElements.popUntilTableCellPopped(),this.activeFormattingElements.clearToLastMarker(),this.insertionMode=ie.IN_ROW}_closePElement(){this.openElements.generateImpliedEndTagsWithExclusion(R.P),this.openElements.popUntilTagNamePopped(R.P)}_resetInsertionMode(){for(let t=this.openElements.stackTop;t>=0;t--)switch(t===0&&this.fragmentContext?this.fragmentContextID:this.openElements.tagIDs[t]){case R.TR:{this.insertionMode=ie.IN_ROW;return}case R.TBODY:case R.THEAD:case R.TFOOT:{this.insertionMode=ie.IN_TABLE_BODY;return}case R.CAPTION:{this.insertionMode=ie.IN_CAPTION;return}case R.COLGROUP:{this.insertionMode=ie.IN_COLUMN_GROUP;return}case R.TABLE:{this.insertionMode=ie.IN_TABLE;return}case R.BODY:{this.insertionMode=ie.IN_BODY;return}case R.FRAMESET:{this.insertionMode=ie.IN_FRAMESET;return}case R.SELECT:{this._resetInsertionModeForSelect(t);return}case R.TEMPLATE:{this.insertionMode=this.tmplInsertionModeStack[0];return}case R.HTML:{this.insertionMode=this.headElement?ie.AFTER_HEAD:ie.BEFORE_HEAD;return}case R.TD:case R.TH:{if(t>0){this.insertionMode=ie.IN_CELL;return}break}case R.HEAD:{if(t>0){this.insertionMode=ie.IN_HEAD;return}break}}this.insertionMode=ie.IN_BODY}_resetInsertionModeForSelect(t){if(t>0)for(let n=t-1;n>0;n--){const r=this.openElements.tagIDs[n];if(r===R.TEMPLATE)break;if(r===R.TABLE){this.insertionMode=ie.IN_SELECT_IN_TABLE;return}}this.insertionMode=ie.IN_SELECT}_isElementCausesFosterParenting(t){return VEe.has(t)}_shouldFosterParentOnInsertion(){return this.fosterParentingEnabled&&this._isElementCausesFosterParenting(this.openElements.currentTagId)}_findFosterParentingLocation(){for(let t=this.openElements.stackTop;t>=0;t--){const n=this.openElements.items[t];switch(this.openElements.tagIDs[t]){case R.TEMPLATE:{if(this.treeAdapter.getNamespaceURI(n)===Fe.HTML)return{parent:this.treeAdapter.getTemplateContent(n),beforeElement:null};break}case R.TABLE:{const r=this.treeAdapter.getParentNode(n);return r?{parent:r,beforeElement:n}:{parent:this.openElements.items[t-1],beforeElement:null}}}}return{parent:this.openElements.items[0],beforeElement:null}}_fosterParentElement(t){const n=this._findFosterParentingLocation();n.beforeElement?this.treeAdapter.insertBefore(n.parent,t,n.beforeElement):this.treeAdapter.appendChild(n.parent,t)}_isSpecialElement(t,n){const r=this.treeAdapter.getNamespaceURI(t);return Hnt[r].has(n)}onCharacter(t){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){est(this,t);return}switch(this.insertionMode){case ie.INITIAL:{TT(this,t);break}case ie.BEFORE_HTML:{_C(this,t);break}case ie.BEFORE_HEAD:{wC(this,t);break}case ie.IN_HEAD:{EC(this,t);break}case ie.IN_HEAD_NO_SCRIPT:{xC(this,t);break}case ie.AFTER_HEAD:{SC(this,t);break}case ie.IN_BODY:case ie.IN_CAPTION:case ie.IN_CELL:case ie.IN_TEMPLATE:{qEe(this,t);break}case ie.TEXT:case ie.IN_SELECT:case ie.IN_SELECT_IN_TABLE:{this._insertCharacters(t);break}case ie.IN_TABLE:case ie.IN_TABLE_BODY:case ie.IN_ROW:{s8(this,t);break}case ie.IN_TABLE_TEXT:{QEe(this,t);break}case ie.IN_COLUMN_GROUP:{t3(this,t);break}case ie.AFTER_BODY:{n3(this,t);break}case ie.AFTER_AFTER_BODY:{mP(this,t);break}}}onNullCharacter(t){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){Zit(this,t);return}switch(this.insertionMode){case ie.INITIAL:{TT(this,t);break}case ie.BEFORE_HTML:{_C(this,t);break}case ie.BEFORE_HEAD:{wC(this,t);break}case ie.IN_HEAD:{EC(this,t);break}case ie.IN_HEAD_NO_SCRIPT:{xC(this,t);break}case ie.AFTER_HEAD:{SC(this,t);break}case ie.TEXT:{this._insertCharacters(t);break}case ie.IN_TABLE:case ie.IN_TABLE_BODY:case ie.IN_ROW:{s8(this,t);break}case ie.IN_COLUMN_GROUP:{t3(this,t);break}case ie.AFTER_BODY:{n3(this,t);break}case ie.AFTER_AFTER_BODY:{mP(this,t);break}}}onComment(t){if(this.skipNextNewLine=!1,this.currentNotInHTML){w7(this,t);return}switch(this.insertionMode){case ie.INITIAL:case ie.BEFORE_HTML:case ie.BEFORE_HEAD:case ie.IN_HEAD:case ie.IN_HEAD_NO_SCRIPT:case ie.AFTER_HEAD:case ie.IN_BODY:case ie.IN_TABLE:case ie.IN_CAPTION:case ie.IN_COLUMN_GROUP:case ie.IN_TABLE_BODY:case ie.IN_ROW:case ie.IN_CELL:case ie.IN_SELECT:case ie.IN_SELECT_IN_TABLE:case ie.IN_TEMPLATE:case ie.IN_FRAMESET:case ie.AFTER_FRAMESET:{w7(this,t);break}case ie.IN_TABLE_TEXT:{CT(this,t);break}case ie.AFTER_BODY:{Nrt(this,t);break}case ie.AFTER_AFTER_BODY:case ie.AFTER_AFTER_FRAMESET:{Drt(this,t);break}}}onDoctype(t){switch(this.skipNextNewLine=!1,this.insertionMode){case ie.INITIAL:{Prt(this,t);break}case ie.BEFORE_HEAD:case ie.IN_HEAD:case ie.IN_HEAD_NO_SCRIPT:case ie.AFTER_HEAD:{this._err(t,Ne.misplacedDoctype);break}case ie.IN_TABLE_TEXT:{CT(this,t);break}}}onStartTag(t){this.skipNextNewLine=!1,this.currentToken=t,this._processStartTag(t),t.selfClosing&&!t.ackSelfClosing&&this._err(t,Ne.nonVoidHtmlElementStartTagWithTrailingSolidus)}_processStartTag(t){this.shouldProcessStartTagTokenInForeignContent(t)?tst(this,t):this._startTagOutsideForeignContent(t)}_startTagOutsideForeignContent(t){switch(this.insertionMode){case ie.INITIAL:{TT(this,t);break}case ie.BEFORE_HTML:{Ort(this,t);break}case ie.BEFORE_HEAD:{Mrt(this,t);break}case ie.IN_HEAD:{od(this,t);break}case ie.IN_HEAD_NO_SCRIPT:{jrt(this,t);break}case ie.AFTER_HEAD:{Urt(this,t);break}case ie.IN_BODY:{Aa(this,t);break}case ie.IN_TABLE:{jE(this,t);break}case ie.IN_TABLE_TEXT:{CT(this,t);break}case ie.IN_CAPTION:{Lit(this,t);break}case ie.IN_COLUMN_GROUP:{JY(this,t);break}case ie.IN_TABLE_BODY:{d6(this,t);break}case ie.IN_ROW:{h6(this,t);break}case ie.IN_CELL:{Bit(this,t);break}case ie.IN_SELECT:{exe(this,t);break}case ie.IN_SELECT_IN_TABLE:{zit(this,t);break}case ie.IN_TEMPLATE:{Hit(this,t);break}case ie.AFTER_BODY:{Wit(this,t);break}case ie.IN_FRAMESET:{Git(this,t);break}case ie.AFTER_FRAMESET:{Kit(this,t);break}case ie.AFTER_AFTER_BODY:{Qit(this,t);break}case ie.AFTER_AFTER_FRAMESET:{Jit(this,t);break}}}onEndTag(t){this.skipNextNewLine=!1,this.currentToken=t,this.currentNotInHTML?nst(this,t):this._endTagOutsideForeignContent(t)}_endTagOutsideForeignContent(t){switch(this.insertionMode){case ie.INITIAL:{TT(this,t);break}case ie.BEFORE_HTML:{$rt(this,t);break}case ie.BEFORE_HEAD:{Lrt(this,t);break}case ie.IN_HEAD:{Frt(this,t);break}case ie.IN_HEAD_NO_SCRIPT:{Brt(this,t);break}case ie.AFTER_HEAD:{zrt(this,t);break}case ie.IN_BODY:{f6(this,t);break}case ie.TEXT:{Ait(this,t);break}case ie.IN_TABLE:{MA(this,t);break}case ie.IN_TABLE_TEXT:{CT(this,t);break}case ie.IN_CAPTION:{Fit(this,t);break}case ie.IN_COLUMN_GROUP:{jit(this,t);break}case ie.IN_TABLE_BODY:{E7(this,t);break}case ie.IN_ROW:{ZEe(this,t);break}case ie.IN_CELL:{Uit(this,t);break}case ie.IN_SELECT:{txe(this,t);break}case ie.IN_SELECT_IN_TABLE:{Vit(this,t);break}case ie.IN_TEMPLATE:{qit(this,t);break}case ie.AFTER_BODY:{rxe(this,t);break}case ie.IN_FRAMESET:{Yit(this,t);break}case ie.AFTER_FRAMESET:{Xit(this,t);break}case ie.AFTER_AFTER_BODY:{mP(this,t);break}}}onEof(t){switch(this.insertionMode){case ie.INITIAL:{TT(this,t);break}case ie.BEFORE_HTML:{_C(this,t);break}case ie.BEFORE_HEAD:{wC(this,t);break}case ie.IN_HEAD:{EC(this,t);break}case ie.IN_HEAD_NO_SCRIPT:{xC(this,t);break}case ie.AFTER_HEAD:{SC(this,t);break}case ie.IN_BODY:case ie.IN_TABLE:case ie.IN_CAPTION:case ie.IN_COLUMN_GROUP:case ie.IN_TABLE_BODY:case ie.IN_ROW:case ie.IN_CELL:case ie.IN_SELECT:case ie.IN_SELECT_IN_TABLE:{KEe(this,t);break}case ie.TEXT:{Iit(this,t);break}case ie.IN_TABLE_TEXT:{CT(this,t);break}case ie.IN_TEMPLATE:{nxe(this,t);break}case ie.AFTER_BODY:case ie.IN_FRAMESET:case ie.AFTER_FRAMESET:case ie.AFTER_AFTER_BODY:case ie.AFTER_AFTER_FRAMESET:{QY(this,t);break}}}onWhitespaceCharacter(t){if(this.skipNextNewLine&&(this.skipNextNewLine=!1,t.chars.charCodeAt(0)===X.LINE_FEED)){if(t.chars.length===1)return;t.chars=t.chars.substr(1)}if(this.tokenizer.inForeignNode){this._insertCharacters(t);return}switch(this.insertionMode){case ie.IN_HEAD:case ie.IN_HEAD_NO_SCRIPT:case ie.AFTER_HEAD:case ie.TEXT:case ie.IN_COLUMN_GROUP:case ie.IN_SELECT:case ie.IN_SELECT_IN_TABLE:case ie.IN_FRAMESET:case ie.AFTER_FRAMESET:{this._insertCharacters(t);break}case ie.IN_BODY:case ie.IN_CAPTION:case ie.IN_CELL:case ie.IN_TEMPLATE:case ie.AFTER_BODY:case ie.AFTER_AFTER_BODY:case ie.AFTER_AFTER_FRAMESET:{HEe(this,t);break}case ie.IN_TABLE:case ie.IN_TABLE_BODY:case ie.IN_ROW:{s8(this,t);break}case ie.IN_TABLE_TEXT:{XEe(this,t);break}}}};function Trt(e,t){let n=e.activeFormattingElements.getElementEntryInScopeWithTagName(t.tagName);return n?e.openElements.contains(n.element)?e.openElements.hasInScope(t.tagID)||(n=null):(e.activeFormattingElements.removeEntry(n),n=null):YEe(e,t),n}function Crt(e,t){let n=null,r=e.openElements.stackTop;for(;r>=0;r--){const i=e.openElements.items[r];if(i===t.element)break;e._isSpecialElement(i,e.openElements.tagIDs[r])&&(n=i)}return n||(e.openElements.shortenToLength(r<0?0:r),e.activeFormattingElements.removeEntry(t)),n}function Art(e,t,n){let r=t,i=e.openElements.getCommonAncestor(t);for(let s=0,o=i;o!==n;s++,o=i){i=e.openElements.getCommonAncestor(o);const a=e.activeFormattingElements.getElementEntry(o),u=a&&s>=xrt;!a||u?(u&&e.activeFormattingElements.removeEntry(a),e.openElements.remove(o)):(o=Irt(e,a),r===t&&(e.activeFormattingElements.bookmark=a),e.treeAdapter.detachNode(r),e.treeAdapter.appendChild(o,r),r=o)}return r}function Irt(e,t){const n=e.treeAdapter.getNamespaceURI(t.element),r=e.treeAdapter.createElement(t.token.tagName,n,t.token.attrs);return e.openElements.replace(t.element,r),t.element=r,r}function krt(e,t,n){const r=e.treeAdapter.getTagName(t),i=fS(r);if(e._isElementCausesFosterParenting(i))e._fosterParentElement(n);else{const s=e.treeAdapter.getNamespaceURI(t);i===R.TEMPLATE&&s===Fe.HTML&&(t=e.treeAdapter.getTemplateContent(t)),e.treeAdapter.appendChild(t,n)}}function Rrt(e,t,n){const r=e.treeAdapter.getNamespaceURI(n.element),{token:i}=n,s=e.treeAdapter.createElement(i.tagName,r,i.attrs);e._adoptNodes(t,s),e.treeAdapter.appendChild(t,s),e.activeFormattingElements.insertElementAfterBookmark(s,i),e.activeFormattingElements.removeEntry(n),e.openElements.remove(n.element),e.openElements.insertAfter(t,s,i.tagID)}function XY(e,t){for(let n=0;n<Ert;n++){const r=Trt(e,t);if(!r)break;const i=Crt(e,r);if(!i)break;e.activeFormattingElements.bookmark=r;const s=Art(e,i,r.element),o=e.openElements.getCommonAncestor(r.element);e.treeAdapter.detachNode(s),o&&krt(e,o,s),Rrt(e,i,r)}}function w7(e,t){e._appendCommentNode(t,e.openElements.currentTmplContentOrNode)}function Nrt(e,t){e._appendCommentNode(t,e.openElements.items[0])}function Drt(e,t){e._appendCommentNode(t,e.document)}function QY(e,t){if(e.stopped=!0,t.location){const n=e.fragmentContext?0:2;for(let r=e.openElements.stackTop;r>=n;r--)e._setEndLocation(e.openElements.items[r],t);if(!e.fragmentContext&&e.openElements.stackTop>=0){const r=e.openElements.items[0],i=e.treeAdapter.getNodeSourceCodeLocation(r);if(i&&!i.endTag&&(e._setEndLocation(r,t),e.openElements.stackTop>=1)){const s=e.openElements.items[1],o=e.treeAdapter.getNodeSourceCodeLocation(s);o&&!o.endTag&&e._setEndLocation(s,t)}}}}function Prt(e,t){e._setDocumentType(t);const n=t.forceQuirks?yl.QUIRKS:lrt(t);urt(t)||e._err(t,Ne.nonConformingDoctype),e.treeAdapter.setDocumentMode(e.document,n),e.insertionMode=ie.BEFORE_HTML}function TT(e,t){e._err(t,Ne.missingDoctype,!0),e.treeAdapter.setDocumentMode(e.document,yl.QUIRKS),e.insertionMode=ie.BEFORE_HTML,e._processToken(t)}function Ort(e,t){t.tagID===R.HTML?(e._insertElement(t,Fe.HTML),e.insertionMode=ie.BEFORE_HEAD):_C(e,t)}function $rt(e,t){const n=t.tagID;(n===R.HTML||n===R.HEAD||n===R.BODY||n===R.BR)&&_C(e,t)}function _C(e,t){e._insertFakeRootElement(),e.insertionMode=ie.BEFORE_HEAD,e._processToken(t)}function Mrt(e,t){switch(t.tagID){case R.HTML:{Aa(e,t);break}case R.HEAD:{e._insertElement(t,Fe.HTML),e.headElement=e.openElements.current,e.insertionMode=ie.IN_HEAD;break}default:wC(e,t)}}function Lrt(e,t){const n=t.tagID;n===R.HEAD||n===R.BODY||n===R.HTML||n===R.BR?wC(e,t):e._err(t,Ne.endTagWithoutMatchingOpenElement)}function wC(e,t){e._insertFakeElement(Ee.HEAD,R.HEAD),e.headElement=e.openElements.current,e.insertionMode=ie.IN_HEAD,e._processToken(t)}function od(e,t){switch(t.tagID){case R.HTML:{Aa(e,t);break}case R.BASE:case R.BASEFONT:case R.BGSOUND:case R.LINK:case R.META:{e._appendElement(t,Fe.HTML),t.ackSelfClosing=!0;break}case R.TITLE:{e._switchToTextParsing(t,os.RCDATA);break}case R.NOSCRIPT:{e.options.scriptingEnabled?e._switchToTextParsing(t,os.RAWTEXT):(e._insertElement(t,Fe.HTML),e.insertionMode=ie.IN_HEAD_NO_SCRIPT);break}case R.NOFRAMES:case R.STYLE:{e._switchToTextParsing(t,os.RAWTEXT);break}case R.SCRIPT:{e._switchToTextParsing(t,os.SCRIPT_DATA);break}case R.TEMPLATE:{e._insertTemplate(t),e.activeFormattingElements.insertMarker(),e.framesetOk=!1,e.insertionMode=ie.IN_TEMPLATE,e.tmplInsertionModeStack.unshift(ie.IN_TEMPLATE);break}case R.HEAD:{e._err(t,Ne.misplacedStartTagForHeadElement);break}default:EC(e,t)}}function Frt(e,t){switch(t.tagID){case R.HEAD:{e.openElements.pop(),e.insertionMode=ie.AFTER_HEAD;break}case R.BODY:case R.BR:case R.HTML:{EC(e,t);break}case R.TEMPLATE:{Vb(e,t);break}default:e._err(t,Ne.endTagWithoutMatchingOpenElement)}}function Vb(e,t){e.openElements.tmplCount>0?(e.openElements.generateImpliedEndTagsThoroughly(),e.openElements.currentTagId!==R.TEMPLATE&&e._err(t,Ne.closingOfElementWithOpenChildElements),e.openElements.popUntilTagNamePopped(R.TEMPLATE),e.activeFormattingElements.clearToLastMarker(),e.tmplInsertionModeStack.shift(),e._resetInsertionMode()):e._err(t,Ne.endTagWithoutMatchingOpenElement)}function EC(e,t){e.openElements.pop(),e.insertionMode=ie.AFTER_HEAD,e._processToken(t)}function jrt(e,t){switch(t.tagID){case R.HTML:{Aa(e,t);break}case R.BASEFONT:case R.BGSOUND:case R.HEAD:case R.LINK:case R.META:case R.NOFRAMES:case R.STYLE:{od(e,t);break}case R.NOSCRIPT:{e._err(t,Ne.nestedNoscriptInHead);break}default:xC(e,t)}}function Brt(e,t){switch(t.tagID){case R.NOSCRIPT:{e.openElements.pop(),e.insertionMode=ie.IN_HEAD;break}case R.BR:{xC(e,t);break}default:e._err(t,Ne.endTagWithoutMatchingOpenElement)}}function xC(e,t){const n=t.type===kn.EOF?Ne.openElementsLeftAfterEof:Ne.disallowedContentInNoscriptInHead;e._err(t,n),e.openElements.pop(),e.insertionMode=ie.IN_HEAD,e._processToken(t)}function Urt(e,t){switch(t.tagID){case R.HTML:{Aa(e,t);break}case R.BODY:{e._insertElement(t,Fe.HTML),e.framesetOk=!1,e.insertionMode=ie.IN_BODY;break}case R.FRAMESET:{e._insertElement(t,Fe.HTML),e.insertionMode=ie.IN_FRAMESET;break}case R.BASE:case R.BASEFONT:case R.BGSOUND:case R.LINK:case R.META:case R.NOFRAMES:case R.SCRIPT:case R.STYLE:case R.TEMPLATE:case R.TITLE:{e._err(t,Ne.abandonedHeadElementChild),e.openElements.push(e.headElement,R.HEAD),od(e,t),e.openElements.remove(e.headElement);break}case R.HEAD:{e._err(t,Ne.misplacedStartTagForHeadElement);break}default:SC(e,t)}}function zrt(e,t){switch(t.tagID){case R.BODY:case R.HTML:case R.BR:{SC(e,t);break}case R.TEMPLATE:{Vb(e,t);break}default:e._err(t,Ne.endTagWithoutMatchingOpenElement)}}function SC(e,t){e._insertFakeElement(Ee.BODY,R.BODY),e.insertionMode=ie.IN_BODY,c6(e,t)}function c6(e,t){switch(t.type){case kn.CHARACTER:{qEe(e,t);break}case kn.WHITESPACE_CHARACTER:{HEe(e,t);break}case kn.COMMENT:{w7(e,t);break}case kn.START_TAG:{Aa(e,t);break}case kn.END_TAG:{f6(e,t);break}case kn.EOF:{KEe(e,t);break}}}function HEe(e,t){e._reconstructActiveFormattingElements(),e._insertCharacters(t)}function qEe(e,t){e._reconstructActiveFormattingElements(),e._insertCharacters(t),e.framesetOk=!1}function Vrt(e,t){e.openElements.tmplCount===0&&e.treeAdapter.adoptAttributes(e.openElements.items[0],t.attrs)}function Hrt(e,t){const n=e.openElements.tryPeekProperlyNestedBodyElement();n&&e.openElements.tmplCount===0&&(e.framesetOk=!1,e.treeAdapter.adoptAttributes(n,t.attrs))}function qrt(e,t){const n=e.openElements.tryPeekProperlyNestedBodyElement();e.framesetOk&&n&&(e.treeAdapter.detachNode(n),e.openElements.popAllUpToHtmlElement(),e._insertElement(t,Fe.HTML),e.insertionMode=ie.IN_FRAMESET)}function Wrt(e,t){e.openElements.hasInButtonScope(R.P)&&e._closePElement(),e._insertElement(t,Fe.HTML)}function Grt(e,t){e.openElements.hasInButtonScope(R.P)&&e._closePElement(),PEe(e.openElements.currentTagId)&&e.openElements.pop(),e._insertElement(t,Fe.HTML)}function Yrt(e,t){e.openElements.hasInButtonScope(R.P)&&e._closePElement(),e._insertElement(t,Fe.HTML),e.skipNextNewLine=!0,e.framesetOk=!1}function Krt(e,t){const n=e.openElements.tmplCount>0;(!e.formElement||n)&&(e.openElements.hasInButtonScope(R.P)&&e._closePElement(),e._insertElement(t,Fe.HTML),n||(e.formElement=e.openElements.current))}function Xrt(e,t){e.framesetOk=!1;const n=t.tagID;for(let r=e.openElements.stackTop;r>=0;r--){const i=e.openElements.tagIDs[r];if(n===R.LI&&i===R.LI||(n===R.DD||n===R.DT)&&(i===R.DD||i===R.DT)){e.openElements.generateImpliedEndTagsWithExclusion(i),e.openElements.popUntilTagNamePopped(i);break}if(i!==R.ADDRESS&&i!==R.DIV&&i!==R.P&&e._isSpecialElement(e.openElements.items[r],i))break}e.openElements.hasInButtonScope(R.P)&&e._closePElement(),e._insertElement(t,Fe.HTML)}function Qrt(e,t){e.openElements.hasInButtonScope(R.P)&&e._closePElement(),e._insertElement(t,Fe.HTML),e.tokenizer.state=os.PLAINTEXT}function Jrt(e,t){e.openElements.hasInScope(R.BUTTON)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(R.BUTTON)),e._reconstructActiveFormattingElements(),e._insertElement(t,Fe.HTML),e.framesetOk=!1}function Zrt(e,t){const n=e.activeFormattingElements.getElementEntryInScopeWithTagName(Ee.A);n&&(XY(e,t),e.openElements.remove(n.element),e.activeFormattingElements.removeEntry(n)),e._reconstructActiveFormattingElements(),e._insertElement(t,Fe.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function eit(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,Fe.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function tit(e,t){e._reconstructActiveFormattingElements(),e.openElements.hasInScope(R.NOBR)&&(XY(e,t),e._reconstructActiveFormattingElements()),e._insertElement(t,Fe.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function nit(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,Fe.HTML),e.activeFormattingElements.insertMarker(),e.framesetOk=!1}function rit(e,t){e.treeAdapter.getDocumentMode(e.document)!==yl.QUIRKS&&e.openElements.hasInButtonScope(R.P)&&e._closePElement(),e._insertElement(t,Fe.HTML),e.framesetOk=!1,e.insertionMode=ie.IN_TABLE}function WEe(e,t){e._reconstructActiveFormattingElements(),e._appendElement(t,Fe.HTML),e.framesetOk=!1,t.ackSelfClosing=!0}function GEe(e){const t=REe(e,w0.TYPE);return t!=null&&t.toLowerCase()===wrt}function iit(e,t){e._reconstructActiveFormattingElements(),e._appendElement(t,Fe.HTML),GEe(t)||(e.framesetOk=!1),t.ackSelfClosing=!0}function sit(e,t){e._appendElement(t,Fe.HTML),t.ackSelfClosing=!0}function oit(e,t){e.openElements.hasInButtonScope(R.P)&&e._closePElement(),e._appendElement(t,Fe.HTML),e.framesetOk=!1,t.ackSelfClosing=!0}function ait(e,t){t.tagName=Ee.IMG,t.tagID=R.IMG,WEe(e,t)}function uit(e,t){e._insertElement(t,Fe.HTML),e.skipNextNewLine=!0,e.tokenizer.state=os.RCDATA,e.originalInsertionMode=e.insertionMode,e.framesetOk=!1,e.insertionMode=ie.TEXT}function lit(e,t){e.openElements.hasInButtonScope(R.P)&&e._closePElement(),e._reconstructActiveFormattingElements(),e.framesetOk=!1,e._switchToTextParsing(t,os.RAWTEXT)}function cit(e,t){e.framesetOk=!1,e._switchToTextParsing(t,os.RAWTEXT)}function _ue(e,t){e._switchToTextParsing(t,os.RAWTEXT)}function fit(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,Fe.HTML),e.framesetOk=!1,e.insertionMode=e.insertionMode===ie.IN_TABLE||e.insertionMode===ie.IN_CAPTION||e.insertionMode===ie.IN_TABLE_BODY||e.insertionMode===ie.IN_ROW||e.insertionMode===ie.IN_CELL?ie.IN_SELECT_IN_TABLE:ie.IN_SELECT}function dit(e,t){e.openElements.currentTagId===R.OPTION&&e.openElements.pop(),e._reconstructActiveFormattingElements(),e._insertElement(t,Fe.HTML)}function hit(e,t){e.openElements.hasInScope(R.RUBY)&&e.openElements.generateImpliedEndTags(),e._insertElement(t,Fe.HTML)}function pit(e,t){e.openElements.hasInScope(R.RUBY)&&e.openElements.generateImpliedEndTagsWithExclusion(R.RTC),e._insertElement(t,Fe.HTML)}function mit(e,t){e._reconstructActiveFormattingElements(),UEe(t),KY(t),t.selfClosing?e._appendElement(t,Fe.MATHML):e._insertElement(t,Fe.MATHML),t.ackSelfClosing=!0}function git(e,t){e._reconstructActiveFormattingElements(),zEe(t),KY(t),t.selfClosing?e._appendElement(t,Fe.SVG):e._insertElement(t,Fe.SVG),t.ackSelfClosing=!0}function wue(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,Fe.HTML)}function Aa(e,t){switch(t.tagID){case R.I:case R.S:case R.B:case R.U:case R.EM:case R.TT:case R.BIG:case R.CODE:case R.FONT:case R.SMALL:case R.STRIKE:case R.STRONG:{eit(e,t);break}case R.A:{Zrt(e,t);break}case R.H1:case R.H2:case R.H3:case R.H4:case R.H5:case R.H6:{Grt(e,t);break}case R.P:case R.DL:case R.OL:case R.UL:case R.DIV:case R.DIR:case R.NAV:case R.MAIN:case R.MENU:case R.ASIDE:case R.CENTER:case R.FIGURE:case R.FOOTER:case R.HEADER:case R.HGROUP:case R.DIALOG:case R.DETAILS:case R.ADDRESS:case R.ARTICLE:case R.SECTION:case R.SUMMARY:case R.FIELDSET:case R.BLOCKQUOTE:case R.FIGCAPTION:{Wrt(e,t);break}case R.LI:case R.DD:case R.DT:{Xrt(e,t);break}case R.BR:case R.IMG:case R.WBR:case R.AREA:case R.EMBED:case R.KEYGEN:{WEe(e,t);break}case R.HR:{oit(e,t);break}case R.RB:case R.RTC:{hit(e,t);break}case R.RT:case R.RP:{pit(e,t);break}case R.PRE:case R.LISTING:{Yrt(e,t);break}case R.XMP:{lit(e,t);break}case R.SVG:{git(e,t);break}case R.HTML:{Vrt(e,t);break}case R.BASE:case R.LINK:case R.META:case R.STYLE:case R.TITLE:case R.SCRIPT:case R.BGSOUND:case R.BASEFONT:case R.TEMPLATE:{od(e,t);break}case R.BODY:{Hrt(e,t);break}case R.FORM:{Krt(e,t);break}case R.NOBR:{tit(e,t);break}case R.MATH:{mit(e,t);break}case R.TABLE:{rit(e,t);break}case R.INPUT:{iit(e,t);break}case R.PARAM:case R.TRACK:case R.SOURCE:{sit(e,t);break}case R.IMAGE:{ait(e,t);break}case R.BUTTON:{Jrt(e,t);break}case R.APPLET:case R.OBJECT:case R.MARQUEE:{nit(e,t);break}case R.IFRAME:{cit(e,t);break}case R.SELECT:{fit(e,t);break}case R.OPTION:case R.OPTGROUP:{dit(e,t);break}case R.NOEMBED:{_ue(e,t);break}case R.FRAMESET:{qrt(e,t);break}case R.TEXTAREA:{uit(e,t);break}case R.NOSCRIPT:{e.options.scriptingEnabled?_ue(e,t):wue(e,t);break}case R.PLAINTEXT:{Qrt(e,t);break}case R.COL:case R.TH:case R.TD:case R.TR:case R.HEAD:case R.FRAME:case R.TBODY:case R.TFOOT:case R.THEAD:case R.CAPTION:case R.COLGROUP:break;default:wue(e,t)}}function yit(e,t){if(e.openElements.hasInScope(R.BODY)&&(e.insertionMode=ie.AFTER_BODY,e.options.sourceCodeLocationInfo)){const n=e.openElements.tryPeekProperlyNestedBodyElement();n&&e._setEndLocation(n,t)}}function vit(e,t){e.openElements.hasInScope(R.BODY)&&(e.insertionMode=ie.AFTER_BODY,rxe(e,t))}function bit(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n))}function _it(e){const t=e.openElements.tmplCount>0,{formElement:n}=e;t||(e.formElement=null),(n||t)&&e.openElements.hasInScope(R.FORM)&&(e.openElements.generateImpliedEndTags(),t?e.openElements.popUntilTagNamePopped(R.FORM):n&&e.openElements.remove(n))}function wit(e){e.openElements.hasInButtonScope(R.P)||e._insertFakeElement(Ee.P,R.P),e._closePElement()}function Eit(e){e.openElements.hasInListItemScope(R.LI)&&(e.openElements.generateImpliedEndTagsWithExclusion(R.LI),e.openElements.popUntilTagNamePopped(R.LI))}function xit(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTagsWithExclusion(n),e.openElements.popUntilTagNamePopped(n))}function Sit(e){e.openElements.hasNumberedHeaderInScope()&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilNumberedHeaderPopped())}function Tit(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n),e.activeFormattingElements.clearToLastMarker())}function Cit(e){e._reconstructActiveFormattingElements(),e._insertFakeElement(Ee.BR,R.BR),e.openElements.pop(),e.framesetOk=!1}function YEe(e,t){const n=t.tagName,r=t.tagID;for(let i=e.openElements.stackTop;i>0;i--){const s=e.openElements.items[i],o=e.openElements.tagIDs[i];if(r===o&&(r!==R.UNKNOWN||e.treeAdapter.getTagName(s)===n)){e.openElements.generateImpliedEndTagsWithExclusion(r),e.openElements.stackTop>=i&&e.openElements.shortenToLength(i);break}if(e._isSpecialElement(s,o))break}}function f6(e,t){switch(t.tagID){case R.A:case R.B:case R.I:case R.S:case R.U:case R.EM:case R.TT:case R.BIG:case R.CODE:case R.FONT:case R.NOBR:case R.SMALL:case R.STRIKE:case R.STRONG:{XY(e,t);break}case R.P:{wit(e);break}case R.DL:case R.UL:case R.OL:case R.DIR:case R.DIV:case R.NAV:case R.PRE:case R.MAIN:case R.MENU:case R.ASIDE:case R.BUTTON:case R.CENTER:case R.FIGURE:case R.FOOTER:case R.HEADER:case R.HGROUP:case R.DIALOG:case R.ADDRESS:case R.ARTICLE:case R.DETAILS:case R.SECTION:case R.SUMMARY:case R.LISTING:case R.FIELDSET:case R.BLOCKQUOTE:case R.FIGCAPTION:{bit(e,t);break}case R.LI:{Eit(e);break}case R.DD:case R.DT:{xit(e,t);break}case R.H1:case R.H2:case R.H3:case R.H4:case R.H5:case R.H6:{Sit(e);break}case R.BR:{Cit(e);break}case R.BODY:{yit(e,t);break}case R.HTML:{vit(e,t);break}case R.FORM:{_it(e);break}case R.APPLET:case R.OBJECT:case R.MARQUEE:{Tit(e,t);break}case R.TEMPLATE:{Vb(e,t);break}default:YEe(e,t)}}function KEe(e,t){e.tmplInsertionModeStack.length>0?nxe(e,t):QY(e,t)}function Ait(e,t){var n;t.tagID===R.SCRIPT&&((n=e.scriptHandler)===null||n===void 0||n.call(e,e.openElements.current)),e.openElements.pop(),e.insertionMode=e.originalInsertionMode}function Iit(e,t){e._err(t,Ne.eofInElementThatCanContainOnlyText),e.openElements.pop(),e.insertionMode=e.originalInsertionMode,e.onEof(t)}function s8(e,t){if(VEe.has(e.openElements.currentTagId))switch(e.pendingCharacterTokens.length=0,e.hasNonWhitespacePendingCharacterToken=!1,e.originalInsertionMode=e.insertionMode,e.insertionMode=ie.IN_TABLE_TEXT,t.type){case kn.CHARACTER:{QEe(e,t);break}case kn.WHITESPACE_CHARACTER:{XEe(e,t);break}}else _k(e,t)}function kit(e,t){e.openElements.clearBackToTableContext(),e.activeFormattingElements.insertMarker(),e._insertElement(t,Fe.HTML),e.insertionMode=ie.IN_CAPTION}function Rit(e,t){e.openElements.clearBackToTableContext(),e._insertElement(t,Fe.HTML),e.insertionMode=ie.IN_COLUMN_GROUP}function Nit(e,t){e.openElements.clearBackToTableContext(),e._insertFakeElement(Ee.COLGROUP,R.COLGROUP),e.insertionMode=ie.IN_COLUMN_GROUP,JY(e,t)}function Dit(e,t){e.openElements.clearBackToTableContext(),e._insertElement(t,Fe.HTML),e.insertionMode=ie.IN_TABLE_BODY}function Pit(e,t){e.openElements.clearBackToTableContext(),e._insertFakeElement(Ee.TBODY,R.TBODY),e.insertionMode=ie.IN_TABLE_BODY,d6(e,t)}function Oit(e,t){e.openElements.hasInTableScope(R.TABLE)&&(e.openElements.popUntilTagNamePopped(R.TABLE),e._resetInsertionMode(),e._processStartTag(t))}function $it(e,t){GEe(t)?e._appendElement(t,Fe.HTML):_k(e,t),t.ackSelfClosing=!0}function Mit(e,t){!e.formElement&&e.openElements.tmplCount===0&&(e._insertElement(t,Fe.HTML),e.formElement=e.openElements.current,e.openElements.pop())}function jE(e,t){switch(t.tagID){case R.TD:case R.TH:case R.TR:{Pit(e,t);break}case R.STYLE:case R.SCRIPT:case R.TEMPLATE:{od(e,t);break}case R.COL:{Nit(e,t);break}case R.FORM:{Mit(e,t);break}case R.TABLE:{Oit(e,t);break}case R.TBODY:case R.TFOOT:case R.THEAD:{Dit(e,t);break}case R.INPUT:{$it(e,t);break}case R.CAPTION:{kit(e,t);break}case R.COLGROUP:{Rit(e,t);break}default:_k(e,t)}}function MA(e,t){switch(t.tagID){case R.TABLE:{e.openElements.hasInTableScope(R.TABLE)&&(e.openElements.popUntilTagNamePopped(R.TABLE),e._resetInsertionMode());break}case R.TEMPLATE:{Vb(e,t);break}case R.BODY:case R.CAPTION:case R.COL:case R.COLGROUP:case R.HTML:case R.TBODY:case R.TD:case R.TFOOT:case R.TH:case R.THEAD:case R.TR:break;default:_k(e,t)}}function _k(e,t){const n=e.fosterParentingEnabled;e.fosterParentingEnabled=!0,c6(e,t),e.fosterParentingEnabled=n}function XEe(e,t){e.pendingCharacterTokens.push(t)}function QEe(e,t){e.pendingCharacterTokens.push(t),e.hasNonWhitespacePendingCharacterToken=!0}function CT(e,t){let n=0;if(e.hasNonWhitespacePendingCharacterToken)for(;n<e.pendingCharacterTokens.length;n++)_k(e,e.pendingCharacterTokens[n]);else for(;n<e.pendingCharacterTokens.length;n++)e._insertCharacters(e.pendingCharacterTokens[n]);e.insertionMode=e.originalInsertionMode,e._processToken(t)}const JEe=new Set([R.CAPTION,R.COL,R.COLGROUP,R.TBODY,R.TD,R.TFOOT,R.TH,R.THEAD,R.TR]);function Lit(e,t){const n=t.tagID;JEe.has(n)?e.openElements.hasInTableScope(R.CAPTION)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(R.CAPTION),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=ie.IN_TABLE,jE(e,t)):Aa(e,t)}function Fit(e,t){const n=t.tagID;switch(n){case R.CAPTION:case R.TABLE:{e.openElements.hasInTableScope(R.CAPTION)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(R.CAPTION),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=ie.IN_TABLE,n===R.TABLE&&MA(e,t));break}case R.BODY:case R.COL:case R.COLGROUP:case R.HTML:case R.TBODY:case R.TD:case R.TFOOT:case R.TH:case R.THEAD:case R.TR:break;default:f6(e,t)}}function JY(e,t){switch(t.tagID){case R.HTML:{Aa(e,t);break}case R.COL:{e._appendElement(t,Fe.HTML),t.ackSelfClosing=!0;break}case R.TEMPLATE:{od(e,t);break}default:t3(e,t)}}function jit(e,t){switch(t.tagID){case R.COLGROUP:{e.openElements.currentTagId===R.COLGROUP&&(e.openElements.pop(),e.insertionMode=ie.IN_TABLE);break}case R.TEMPLATE:{Vb(e,t);break}case R.COL:break;default:t3(e,t)}}function t3(e,t){e.openElements.currentTagId===R.COLGROUP&&(e.openElements.pop(),e.insertionMode=ie.IN_TABLE,e._processToken(t))}function d6(e,t){switch(t.tagID){case R.TR:{e.openElements.clearBackToTableBodyContext(),e._insertElement(t,Fe.HTML),e.insertionMode=ie.IN_ROW;break}case R.TH:case R.TD:{e.openElements.clearBackToTableBodyContext(),e._insertFakeElement(Ee.TR,R.TR),e.insertionMode=ie.IN_ROW,h6(e,t);break}case R.CAPTION:case R.COL:case R.COLGROUP:case R.TBODY:case R.TFOOT:case R.THEAD:{e.openElements.hasTableBodyContextInTableScope()&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=ie.IN_TABLE,jE(e,t));break}default:jE(e,t)}}function E7(e,t){const n=t.tagID;switch(t.tagID){case R.TBODY:case R.TFOOT:case R.THEAD:{e.openElements.hasInTableScope(n)&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=ie.IN_TABLE);break}case R.TABLE:{e.openElements.hasTableBodyContextInTableScope()&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=ie.IN_TABLE,MA(e,t));break}case R.BODY:case R.CAPTION:case R.COL:case R.COLGROUP:case R.HTML:case R.TD:case R.TH:case R.TR:break;default:MA(e,t)}}function h6(e,t){switch(t.tagID){case R.TH:case R.TD:{e.openElements.clearBackToTableRowContext(),e._insertElement(t,Fe.HTML),e.insertionMode=ie.IN_CELL,e.activeFormattingElements.insertMarker();break}case R.CAPTION:case R.COL:case R.COLGROUP:case R.TBODY:case R.TFOOT:case R.THEAD:case R.TR:{e.openElements.hasInTableScope(R.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=ie.IN_TABLE_BODY,d6(e,t));break}default:jE(e,t)}}function ZEe(e,t){switch(t.tagID){case R.TR:{e.openElements.hasInTableScope(R.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=ie.IN_TABLE_BODY);break}case R.TABLE:{e.openElements.hasInTableScope(R.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=ie.IN_TABLE_BODY,E7(e,t));break}case R.TBODY:case R.TFOOT:case R.THEAD:{(e.openElements.hasInTableScope(t.tagID)||e.openElements.hasInTableScope(R.TR))&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=ie.IN_TABLE_BODY,E7(e,t));break}case R.BODY:case R.CAPTION:case R.COL:case R.COLGROUP:case R.HTML:case R.TD:case R.TH:break;default:MA(e,t)}}function Bit(e,t){const n=t.tagID;JEe.has(n)?(e.openElements.hasInTableScope(R.TD)||e.openElements.hasInTableScope(R.TH))&&(e._closeTableCell(),h6(e,t)):Aa(e,t)}function Uit(e,t){const n=t.tagID;switch(n){case R.TD:case R.TH:{e.openElements.hasInTableScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=ie.IN_ROW);break}case R.TABLE:case R.TBODY:case R.TFOOT:case R.THEAD:case R.TR:{e.openElements.hasInTableScope(n)&&(e._closeTableCell(),ZEe(e,t));break}case R.BODY:case R.CAPTION:case R.COL:case R.COLGROUP:case R.HTML:break;default:f6(e,t)}}function exe(e,t){switch(t.tagID){case R.HTML:{Aa(e,t);break}case R.OPTION:{e.openElements.currentTagId===R.OPTION&&e.openElements.pop(),e._insertElement(t,Fe.HTML);break}case R.OPTGROUP:{e.openElements.currentTagId===R.OPTION&&e.openElements.pop(),e.openElements.currentTagId===R.OPTGROUP&&e.openElements.pop(),e._insertElement(t,Fe.HTML);break}case R.INPUT:case R.KEYGEN:case R.TEXTAREA:case R.SELECT:{e.openElements.hasInSelectScope(R.SELECT)&&(e.openElements.popUntilTagNamePopped(R.SELECT),e._resetInsertionMode(),t.tagID!==R.SELECT&&e._processStartTag(t));break}case R.SCRIPT:case R.TEMPLATE:{od(e,t);break}}}function txe(e,t){switch(t.tagID){case R.OPTGROUP:{e.openElements.stackTop>0&&e.openElements.currentTagId===R.OPTION&&e.openElements.tagIDs[e.openElements.stackTop-1]===R.OPTGROUP&&e.openElements.pop(),e.openElements.currentTagId===R.OPTGROUP&&e.openElements.pop();break}case R.OPTION:{e.openElements.currentTagId===R.OPTION&&e.openElements.pop();break}case R.SELECT:{e.openElements.hasInSelectScope(R.SELECT)&&(e.openElements.popUntilTagNamePopped(R.SELECT),e._resetInsertionMode());break}case R.TEMPLATE:{Vb(e,t);break}}}function zit(e,t){const n=t.tagID;n===R.CAPTION||n===R.TABLE||n===R.TBODY||n===R.TFOOT||n===R.THEAD||n===R.TR||n===R.TD||n===R.TH?(e.openElements.popUntilTagNamePopped(R.SELECT),e._resetInsertionMode(),e._processStartTag(t)):exe(e,t)}function Vit(e,t){const n=t.tagID;n===R.CAPTION||n===R.TABLE||n===R.TBODY||n===R.TFOOT||n===R.THEAD||n===R.TR||n===R.TD||n===R.TH?e.openElements.hasInTableScope(n)&&(e.openElements.popUntilTagNamePopped(R.SELECT),e._resetInsertionMode(),e.onEndTag(t)):txe(e,t)}function Hit(e,t){switch(t.tagID){case R.BASE:case R.BASEFONT:case R.BGSOUND:case R.LINK:case R.META:case R.NOFRAMES:case R.SCRIPT:case R.STYLE:case R.TEMPLATE:case R.TITLE:{od(e,t);break}case R.CAPTION:case R.COLGROUP:case R.TBODY:case R.TFOOT:case R.THEAD:{e.tmplInsertionModeStack[0]=ie.IN_TABLE,e.insertionMode=ie.IN_TABLE,jE(e,t);break}case R.COL:{e.tmplInsertionModeStack[0]=ie.IN_COLUMN_GROUP,e.insertionMode=ie.IN_COLUMN_GROUP,JY(e,t);break}case R.TR:{e.tmplInsertionModeStack[0]=ie.IN_TABLE_BODY,e.insertionMode=ie.IN_TABLE_BODY,d6(e,t);break}case R.TD:case R.TH:{e.tmplInsertionModeStack[0]=ie.IN_ROW,e.insertionMode=ie.IN_ROW,h6(e,t);break}default:e.tmplInsertionModeStack[0]=ie.IN_BODY,e.insertionMode=ie.IN_BODY,Aa(e,t)}}function qit(e,t){t.tagID===R.TEMPLATE&&Vb(e,t)}function nxe(e,t){e.openElements.tmplCount>0?(e.openElements.popUntilTagNamePopped(R.TEMPLATE),e.activeFormattingElements.clearToLastMarker(),e.tmplInsertionModeStack.shift(),e._resetInsertionMode(),e.onEof(t)):QY(e,t)}function Wit(e,t){t.tagID===R.HTML?Aa(e,t):n3(e,t)}function rxe(e,t){var n;if(t.tagID===R.HTML){if(e.fragmentContext||(e.insertionMode=ie.AFTER_AFTER_BODY),e.options.sourceCodeLocationInfo&&e.openElements.tagIDs[0]===R.HTML){e._setEndLocation(e.openElements.items[0],t);const r=e.openElements.items[1];r&&!(!((n=e.treeAdapter.getNodeSourceCodeLocation(r))===null||n===void 0)&&n.endTag)&&e._setEndLocation(r,t)}}else n3(e,t)}function n3(e,t){e.insertionMode=ie.IN_BODY,c6(e,t)}function Git(e,t){switch(t.tagID){case R.HTML:{Aa(e,t);break}case R.FRAMESET:{e._insertElement(t,Fe.HTML);break}case R.FRAME:{e._appendElement(t,Fe.HTML),t.ackSelfClosing=!0;break}case R.NOFRAMES:{od(e,t);break}}}function Yit(e,t){t.tagID===R.FRAMESET&&!e.openElements.isRootHtmlElementCurrent()&&(e.openElements.pop(),!e.fragmentContext&&e.openElements.currentTagId!==R.FRAMESET&&(e.insertionMode=ie.AFTER_FRAMESET))}function Kit(e,t){switch(t.tagID){case R.HTML:{Aa(e,t);break}case R.NOFRAMES:{od(e,t);break}}}function Xit(e,t){t.tagID===R.HTML&&(e.insertionMode=ie.AFTER_AFTER_FRAMESET)}function Qit(e,t){t.tagID===R.HTML?Aa(e,t):mP(e,t)}function mP(e,t){e.insertionMode=ie.IN_BODY,c6(e,t)}function Jit(e,t){switch(t.tagID){case R.HTML:{Aa(e,t);break}case R.NOFRAMES:{od(e,t);break}}}function Zit(e,t){t.chars=vi,e._insertCharacters(t)}function est(e,t){e._insertCharacters(t),e.framesetOk=!1}function ixe(e){for(;e.treeAdapter.getNamespaceURI(e.openElements.current)!==Fe.HTML&&!e._isIntegrationPoint(e.openElements.currentTagId,e.openElements.current);)e.openElements.pop()}function tst(e,t){if(grt(t))ixe(e),e._startTagOutsideForeignContent(t);else{const n=e._getAdjustedCurrentElement(),r=e.treeAdapter.getNamespaceURI(n);r===Fe.MATHML?UEe(t):r===Fe.SVG&&(yrt(t),zEe(t)),KY(t),t.selfClosing?e._appendElement(t,r):e._insertElement(t,r),t.ackSelfClosing=!0}}function nst(e,t){if(t.tagID===R.P||t.tagID===R.BR){ixe(e),e._endTagOutsideForeignContent(t);return}for(let n=e.openElements.stackTop;n>0;n--){const r=e.openElements.items[n];if(e.treeAdapter.getNamespaceURI(r)===Fe.HTML){e._endTagOutsideForeignContent(t);break}const i=e.treeAdapter.getTagName(r);if(i.toLowerCase()===t.tagName){t.tagName=i,e.openElements.shortenToLength(n);break}}}Ee.AREA,Ee.BASE,Ee.BASEFONT,Ee.BGSOUND,Ee.BR,Ee.COL,Ee.EMBED,Ee.FRAME,Ee.HR,Ee.IMG,Ee.INPUT,Ee.KEYGEN,Ee.LINK,Ee.META,Ee.PARAM,Ee.SOURCE,Ee.TRACK,Ee.WBR;const rst=new Set(["mdxFlowExpression","mdxJsxFlowElement","mdxJsxTextElement","mdxTextExpression","mdxjsEsm"]),Eue={sourceCodeLocationInfo:!0,scriptingEnabled:!1};function sxe(e,t){const n=hst(e),r=TEe("type",{handlers:{root:ist,element:sst,text:ost,comment:axe,doctype:ast,raw:lst},unknown:cst}),i={parser:n?new bue(Eue):bue.getFragmentParser(void 0,Eue),handle(a){r(a,i)},stitches:!1,options:t||{}};r(e,i),dS(i,Yh());const s=n?i.parser.document:i.parser.getFragment(),o=mnt(s,{file:i.options.file});return i.stitches&&qY(o,"comment",function(a,u,l){const c=a;if(c.value.stitch&&l&&u!==void 0){const f=l.children;return f[u]=c.value.stitch,u}}),o.type==="root"&&o.children.length===1&&o.children[0].type===e.type?o.children[0]:o}function oxe(e,t){let n=-1;if(e)for(;++n<e.length;)t.handle(e[n])}function ist(e,t){oxe(e.children,t)}function sst(e,t){fst(e,t),oxe(e.children,t),dst(e,t)}function ost(e,t){const n={type:kn.CHARACTER,chars:e.value,location:wk(e)};dS(t,Yh(e)),t.parser.currentToken=n,t.parser._processToken(t.parser.currentToken)}function ast(e,t){const n={type:kn.DOCTYPE,name:"html",forceQuirks:!1,publicId:"",systemId:"",location:wk(e)};dS(t,Yh(e)),t.parser.currentToken=n,t.parser._processToken(t.parser.currentToken)}function ust(e,t){t.stitches=!0;const n=pst(e);if("children"in e&&"children"in n){const r=sxe({type:"root",children:e.children},t.options);n.children=r.children}axe({type:"comment",value:{stitch:n}},t)}function axe(e,t){const n=e.value,r={type:kn.COMMENT,data:n,location:wk(e)};dS(t,Yh(e)),t.parser.currentToken=r,t.parser._processToken(t.parser.currentToken)}function lst(e,t){if(t.parser.tokenizer.preprocessor.html="",t.parser.tokenizer.preprocessor.pos=-1,t.parser.tokenizer.preprocessor.lastGapPos=-2,t.parser.tokenizer.preprocessor.gapStack=[],t.parser.tokenizer.preprocessor.skipNextNewLine=!1,t.parser.tokenizer.preprocessor.lastChunkWritten=!1,t.parser.tokenizer.preprocessor.endOfChunkHit=!1,t.parser.tokenizer.preprocessor.isEol=!1,uxe(t,Yh(e)),t.parser.tokenizer.write(e.value,!1),t.parser.tokenizer._runParsingLoop(),t.parser.tokenizer.state===72||t.parser.tokenizer.state===78){t.parser.tokenizer.preprocessor.lastChunkWritten=!0;const n=t.parser.tokenizer._consume();t.parser.tokenizer._callState(n)}}function cst(e,t){const n=e;if(t.options.passThrough&&t.options.passThrough.includes(n.type))ust(n,t);else{let r="";throw rst.has(n.type)&&(r=". It looks like you are using MDX nodes with `hast-util-raw` (or `rehype-raw`). If you use this because you are using remark or rehype plugins that inject `'html'` nodes, then please raise an issue with that plugin, as its a bad and slow idea. If you use this because you are using markdown syntax, then you have to configure this utility (or plugin) to pass through these nodes (see `passThrough` in docs), but you can also migrate to use the MDX syntax"),new Error("Cannot compile `"+n.type+"` node"+r)}}function dS(e,t){uxe(e,t);const n=e.parser.tokenizer.currentCharacterToken;n&&n.location&&(n.location.endLine=e.parser.tokenizer.preprocessor.line,n.location.endCol=e.parser.tokenizer.preprocessor.col+1,n.location.endOffset=e.parser.tokenizer.preprocessor.offset+1,e.parser.currentToken=n,e.parser._processToken(e.parser.currentToken)),e.parser.tokenizer.paused=!1,e.parser.tokenizer.inLoop=!1,e.parser.tokenizer.active=!1,e.parser.tokenizer.returnState=os.DATA,e.parser.tokenizer.charRefCode=-1,e.parser.tokenizer.consumedAfterSnapshot=-1,e.parser.tokenizer.currentLocation=null,e.parser.tokenizer.currentCharacterToken=null,e.parser.tokenizer.currentToken=null,e.parser.tokenizer.currentAttr={name:"",value:""}}function uxe(e,t){if(t&&t.offset!==void 0){const n={startLine:t.line,startCol:t.column,startOffset:t.offset,endLine:-1,endCol:-1,endOffset:-1};e.parser.tokenizer.preprocessor.lineStartPos=-t.column+1,e.parser.tokenizer.preprocessor.droppedBufferSize=t.offset,e.parser.tokenizer.preprocessor.line=t.line,e.parser.tokenizer.currentLocation=n}}function fst(e,t){const n=e.tagName.toLowerCase();if(t.parser.tokenizer.state===os.PLAINTEXT)return;dS(t,Yh(e));const r=t.parser.openElements.current;let i="namespaceURI"in r?r.namespaceURI:s1.html;i===s1.html&&n==="svg"&&(i=s1.svg);const s=_nt({...e,children:[]},{space:i===s1.svg?"svg":"html"}),o={type:kn.START_TAG,tagName:n,tagID:fS(n),selfClosing:!1,ackSelfClosing:!1,attrs:"attrs"in s?s.attrs:[],location:wk(e)};t.parser.currentToken=o,t.parser._processToken(t.parser.currentToken),t.parser.tokenizer.lastStartTagName=n}function dst(e,t){const n=e.tagName.toLowerCase();if(!t.parser.tokenizer.inForeignNode&&Int.includes(n)||t.parser.tokenizer.state===os.PLAINTEXT)return;dS(t,o6(e));const r={type:kn.END_TAG,tagName:n,tagID:fS(n),selfClosing:!1,ackSelfClosing:!1,attrs:[],location:wk(e)};t.parser.currentToken=r,t.parser._processToken(t.parser.currentToken),n===t.parser.tokenizer.lastStartTagName&&(t.parser.tokenizer.state===os.RCDATA||t.parser.tokenizer.state===os.RAWTEXT||t.parser.tokenizer.state===os.SCRIPT_DATA)&&(t.parser.tokenizer.state=os.DATA)}function hst(e){const t=e.type==="root"?e.children[0]:e;return!!(t&&(t.type==="doctype"||t.type==="element"&&t.tagName.toLowerCase()==="html"))}function wk(e){const t=Yh(e)||{line:void 0,column:void 0,offset:void 0},n=o6(e)||{line:void 0,column:void 0,offset:void 0};return{startLine:t.line,startCol:t.column,startOffset:t.offset,endLine:n.line,endCol:n.column,endOffset:n.offset}}function pst(e){return"children"in e?FE({...e,children:[]}):FE(e)}function mst(e){return function(t,n){return sxe(t,{...e,file:n})}}function Qa({text:e,required:t}){const n={img({node:i,width:s,height:o,...a}){return _.jsx(Dy,{...a,h:o,w:s,ref:void 0})},p({node:i,...s}){return _.jsx(Xe,{...s,pb:8,fw:"inherit",ref:void 0})},h1({node:i,...s}){return _.jsx(ui,{...s,order:1,...s,pb:12})},h2({node:i,...s}){return _.jsx(ui,{...s,order:2,...s,pb:12})},h3({node:i,...s}){return _.jsx(ui,{...s,order:3,...s,pb:12})},h4({node:i,...s}){return _.jsx(ui,{...s,order:4,...s,pb:12})},h5({node:i,...s}){return _.jsx(ui,{...s,order:5,...s,pb:12})},h6({node:i,...s}){return _.jsx(ui,{...s,order:6,...s,pb:12})},a({node:i,...s}){return _.jsx(Mb,{...s,ref:void 0})},ul({node:i,...s}){return _.jsx(jf,{withPadding:!0,...s,pb:8})},ol({node:i,type:s,...o}){return _.jsx(jf,{type:"ordered",withPadding:!0,...o,pb:8})}};return _.jsx(nnt,{components:n,rehypePlugins:[mst],children:e+(t?'<span style="color: #fa5252; margin-left: 4px">*</span>':"")})}function x7({issues:e,type:t}){const n=`
    ${t==="error"?"There was an issue loading the study config. Please check the following issues:":"There were some warnings while loading the study config. Please check the following warnings:"}

    ${e.map(r=>`- You have an error at ${r.instancePath||"root"}: ${r.message} - ${JSON.stringify(r.params)}  `).join(`
`)}
  `.replace(/\n\s+/g,`
`);return _.jsx(Qa,{text:n})}const gst="https://github.com/revisit-studies/study/tree/main/public/";function yst({globalConfig:e,studyConfigs:t}){const{configsList:n}=e,r=Gh();return _.jsx(pi.Main,{children:_.jsxs(Oc,{size:"xs",px:"xs",children:[_.jsx(Dy,{maw:150,mx:"auto",mb:"xl",radius:"md",src:`${Vu}revisitAssets/revisitLogoSquare.svg`,alt:"reVISit"}),_.jsx(Xe,{children:"Select an experiment to launch:"}),n.map(i=>{const s=t[i];if(!s)return null;const o=Lwe(i);return _.jsx(xs,{onClick:a=>{a.preventDefault(),r(`/${o}`)},my:"sm",style:{width:"100%"},children:_.jsxs(Lb,{shadow:"sm",radius:"md",withBorder:!0,children:[s.errors.length>0?_.jsxs(_.Fragment,{children:[_.jsx(Xe,{fw:"bold",children:i}),_.jsxs(Nt,{align:"center",direction:"row",children:[_.jsx(pae,{color:"red"}),_.jsx(Xe,{fw:"bold",ml:8,color:"red",children:"Errors"})]}),_.jsx(x7,{issues:s.errors,type:"error"})]}):_.jsxs(_.Fragment,{children:[_.jsxs(Nt,{direction:"row",justify:"space-between",children:[_.jsx(Xe,{fw:"bold",children:s.studyMetadata.title}),_.jsx($b,{onClick:a=>{a.stopPropagation()},variant:"transparent",size:20,style:{float:"right"},component:"a",href:`${Vu}${o}`,children:_.jsx(gQe,{style:{paddingTop:4}})})]}),_.jsxs(Xe,{c:"dimmed",children:[_.jsx(Xe,{span:!0,fw:500,children:"Authors: "}),s.studyMetadata.authors]}),_.jsx(Xe,{c:"dimmed",children:s.studyMetadata.description}),_.jsx(Xe,{c:"dimmed",ta:"right",style:{paddingRight:5},children:_.jsxs(Mb,{target:"_blank",onClick:a=>a.stopPropagation(),href:`${gst}${o}`,children:["View source:"," ",o]})})]}),s.warnings.length>0&&_.jsxs(_.Fragment,{children:[_.jsxs(Nt,{align:"center",direction:"row",children:[_.jsx(pae,{color:"orange"}),_.jsx(Xe,{fw:"bold",ml:8,color:"orange",children:"Warnings"})]}),_.jsx(x7,{issues:s.warnings,type:"warning"})]})]})},i)})]})})}var lxe={exports:{}},cxe={};/**
 * @license React
 * use-sync-external-store-with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ek=I;function vst(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var bst=typeof Object.is=="function"?Object.is:vst,_st=Ek.useSyncExternalStore,wst=Ek.useRef,Est=Ek.useEffect,xst=Ek.useMemo,Sst=Ek.useDebugValue;cxe.useSyncExternalStoreWithSelector=function(e,t,n,r,i){var s=wst(null);if(s.current===null){var o={hasValue:!1,value:null};s.current=o}else o=s.current;s=xst(function(){function u(h){if(!l){if(l=!0,c=h,h=r(h),i!==void 0&&o.hasValue){var p=o.value;if(i(p,h))return f=p}return f=h}if(p=f,bst(c,h))return p;var m=r(h);return i!==void 0&&i(p,m)?p:(c=h,f=m)}var l=!1,c,f,d=n===void 0?null:n;return[function(){return u(t())},d===null?void 0:function(){return u(d())}]},[t,n,r,i]);var a=_st(e,s[0],s[1]);return Est(function(){o.hasValue=!0,o.value=a},[a]),Sst(a),a};lxe.exports=cxe;var Tst=lxe.exports,Cl="default"in pO?_r:pO,xue=Symbol.for("react-redux-context"),Sue=typeof globalThis<"u"?globalThis:{};function Cst(){if(!Cl.createContext)return{};const e=Sue[xue]??(Sue[xue]=new Map);let t=e.get(Cl.createContext);return t||(t=Cl.createContext(null),e.set(Cl.createContext,t)),t}var U0=Cst(),Ast=()=>{throw new Error("uSES not initialized!")};function ZY(e=U0){return function(){return Cl.useContext(e)}}var fxe=ZY(),dxe=Ast,Ist=e=>{dxe=e},kst=(e,t)=>e===t;function Rst(e=U0){const t=e===U0?fxe:ZY(e),n=(r,i={})=>{const{equalityFn:s=kst,devModeChecks:o={}}=typeof i=="function"?{equalityFn:i}:i,{store:a,subscription:u,getServerState:l,stabilityCheck:c,identityFunctionCheck:f}=t();Cl.useRef(!0);const d=Cl.useCallback({[r.name](p){return r(p)}}[r.name],[r,c,o.stabilityCheck]),h=dxe(u.addNestedSub,a.getState,l||a.getState,d,s);return Cl.useDebugValue(h),h};return Object.assign(n,{withTypes:()=>n}),n}var Nst=Rst();function Dst(e){e()}function Pst(){let e=null,t=null;return{clear(){e=null,t=null},notify(){Dst(()=>{let n=e;for(;n;)n.callback(),n=n.next})},get(){const n=[];let r=e;for(;r;)n.push(r),r=r.next;return n},subscribe(n){let r=!0;const i=t={callback:n,next:null,prev:t};return i.prev?i.prev.next=i:e=i,function(){!r||e===null||(r=!1,i.next?i.next.prev=i.prev:t=i.prev,i.prev?i.prev.next=i.next:e=i.next)}}}}var Tue={notify(){},get:()=>[]};function Ost(e,t){let n,r=Tue,i=0,s=!1;function o(m){c();const g=r.subscribe(m);let y=!1;return()=>{y||(y=!0,g(),f())}}function a(){r.notify()}function u(){p.onStateChange&&p.onStateChange()}function l(){return s}function c(){i++,n||(n=e.subscribe(u),r=Pst())}function f(){i--,n&&i===0&&(n(),n=void 0,r.clear(),r=Tue)}function d(){s||(s=!0,c())}function h(){s&&(s=!1,f())}const p={addNestedSub:o,notifyNestedSubs:a,handleChangeWrapper:u,isSubscribed:l,trySubscribe:d,tryUnsubscribe:h,getListeners:()=>r};return p}var $st=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Mst=typeof navigator<"u"&&navigator.product==="ReactNative",Lst=$st||Mst?Cl.useLayoutEffect:Cl.useEffect;function Fst({store:e,context:t,children:n,serverState:r,stabilityCheck:i="once",identityFunctionCheck:s="once"}){const o=Cl.useMemo(()=>{const l=Ost(e);return{store:e,subscription:l,getServerState:r?()=>r:void 0,stabilityCheck:i,identityFunctionCheck:s}},[e,r,i,s]),a=Cl.useMemo(()=>e.getState(),[e]);Lst(()=>{const{subscription:l}=o;return l.onStateChange=l.notifyNestedSubs,l.trySubscribe(),a!==e.getState()&&l.notifyNestedSubs(),()=>{l.tryUnsubscribe(),l.onStateChange=void 0}},[o,a]);const u=t||U0;return Cl.createElement(u.Provider,{value:o},n)}var jst=Fst;function hxe(e=U0){const t=e===U0?fxe:ZY(e),n=()=>{const{store:r}=t();return r};return Object.assign(n,{withTypes:()=>n}),n}var Bst=hxe();function Ust(e=U0){const t=e===U0?Bst:hxe(e),n=()=>t().dispatch;return Object.assign(n,{withTypes:()=>n}),n}var pxe=Ust();Ist(Tst.useSyncExternalStoreWithSelector);function Eo(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var zst=typeof Symbol=="function"&&Symbol.observable||"@@observable",Cue=zst,o8=()=>Math.random().toString(36).substring(7).split("").join("."),Vst={INIT:`@@redux/INIT${o8()}`,REPLACE:`@@redux/REPLACE${o8()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${o8()}`},r3=Vst;function eK(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function mxe(e,t,n){if(typeof e!="function")throw new Error(Eo(2));if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(Eo(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(Eo(1));return n(mxe)(e,t)}let r=e,i=t,s=new Map,o=s,a=0,u=!1;function l(){o===s&&(o=new Map,s.forEach((g,y)=>{o.set(y,g)}))}function c(){if(u)throw new Error(Eo(3));return i}function f(g){if(typeof g!="function")throw new Error(Eo(4));if(u)throw new Error(Eo(5));let y=!0;l();const v=a++;return o.set(v,g),function(){if(y){if(u)throw new Error(Eo(6));y=!1,l(),o.delete(v),s=null}}}function d(g){if(!eK(g))throw new Error(Eo(7));if(typeof g.type>"u")throw new Error(Eo(8));if(typeof g.type!="string")throw new Error(Eo(17));if(u)throw new Error(Eo(9));try{u=!0,i=r(i,g)}finally{u=!1}return(s=o).forEach(v=>{v()}),g}function h(g){if(typeof g!="function")throw new Error(Eo(10));r=g,d({type:r3.REPLACE})}function p(){const g=f;return{subscribe(y){if(typeof y!="object"||y===null)throw new Error(Eo(11));function v(){const w=y;w.next&&w.next(c())}return v(),{unsubscribe:g(v)}},[Cue](){return this}}}return d({type:r3.INIT}),{dispatch:d,subscribe:f,getState:c,replaceReducer:h,[Cue]:p}}function Hst(e){Object.keys(e).forEach(t=>{const n=e[t];if(typeof n(void 0,{type:r3.INIT})>"u")throw new Error(Eo(12));if(typeof n(void 0,{type:r3.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Eo(13))})}function qst(e){const t=Object.keys(e),n={};for(let s=0;s<t.length;s++){const o=t[s];typeof e[o]=="function"&&(n[o]=e[o])}const r=Object.keys(n);let i;try{Hst(n)}catch(s){i=s}return function(o={},a){if(i)throw i;let u=!1;const l={};for(let c=0;c<r.length;c++){const f=r[c],d=n[f],h=o[f],p=d(h,a);if(typeof p>"u")throw a&&a.type,new Error(Eo(14));l[f]=p,u=u||p!==h}return u=u||r.length!==Object.keys(o).length,u?l:o}}function i3(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,n)=>(...r)=>t(n(...r)))}function Wst(...e){return t=>(n,r)=>{const i=t(n,r);let s=()=>{throw new Error(Eo(15))};const o={getState:i.getState,dispatch:(u,...l)=>s(u,...l)},a=e.map(u=>u(o));return s=i3(...a)(i.dispatch),{...i,dispatch:s}}}function Gst(e){return eK(e)&&"type"in e&&typeof e.type=="string"}var gxe=Symbol.for("immer-nothing"),Aue=Symbol.for("immer-draftable"),Fl=Symbol.for("immer-state");function Ef(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var BE=Object.getPrototypeOf;function z0(e){return!!e&&!!e[Fl]}function xm(e){var t;return e?yxe(e)||Array.isArray(e)||!!e[Aue]||!!((t=e.constructor)!=null&&t[Aue])||m6(e)||g6(e):!1}var Yst=Object.prototype.constructor.toString();function yxe(e){if(!e||typeof e!="object")return!1;const t=BE(e);if(t===null)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object?!0:typeof n=="function"&&Function.toString.call(n)===Yst}function s3(e,t){p6(e)===0?Reflect.ownKeys(e).forEach(n=>{t(n,e[n],e)}):e.forEach((n,r)=>t(r,n,e))}function p6(e){const t=e[Fl];return t?t.type_:Array.isArray(e)?1:m6(e)?2:g6(e)?3:0}function S7(e,t){return p6(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function vxe(e,t,n){const r=p6(e);r===2?e.set(t,n):r===3?e.add(n):e[t]=n}function Kst(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function m6(e){return e instanceof Map}function g6(e){return e instanceof Set}function Av(e){return e.copy_||e.base_}function T7(e,t){if(m6(e))return new Map(e);if(g6(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const n=yxe(e);if(t===!0||t==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(e);delete r[Fl];let i=Reflect.ownKeys(r);for(let s=0;s<i.length;s++){const o=i[s],a=r[o];a.writable===!1&&(a.writable=!0,a.configurable=!0),(a.get||a.set)&&(r[o]={configurable:!0,writable:!0,enumerable:a.enumerable,value:e[o]})}return Object.create(BE(e),r)}else{const r=BE(e);if(r!==null&&n)return{...e};const i=Object.create(r);return Object.assign(i,e)}}function tK(e,t=!1){return y6(e)||z0(e)||!xm(e)||(p6(e)>1&&(e.set=e.add=e.clear=e.delete=Xst),Object.freeze(e),t&&Object.entries(e).forEach(([n,r])=>tK(r,!0))),e}function Xst(){Ef(2)}function y6(e){return Object.isFrozen(e)}var Qst={};function V1(e){const t=Qst[e];return t||Ef(0,e),t}var LA;function bxe(){return LA}function Jst(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function Iue(e,t){t&&(V1("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function C7(e){A7(e),e.drafts_.forEach(Zst),e.drafts_=null}function A7(e){e===LA&&(LA=e.parent_)}function kue(e){return LA=Jst(LA,e)}function Zst(e){const t=e[Fl];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function Rue(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return e!==void 0&&e!==n?(n[Fl].modified_&&(C7(t),Ef(4)),xm(e)&&(e=o3(t,e),t.parent_||a3(t,e)),t.patches_&&V1("Patches").generateReplacementPatches_(n[Fl].base_,e,t.patches_,t.inversePatches_)):e=o3(t,n,[]),C7(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==gxe?e:void 0}function o3(e,t,n){if(y6(t))return t;const r=t[Fl];if(!r)return s3(t,(i,s)=>Nue(e,r,t,i,s,n)),t;if(r.scope_!==e)return t;if(!r.modified_)return a3(e,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const i=r.copy_;let s=i,o=!1;r.type_===3&&(s=new Set(i),i.clear(),o=!0),s3(s,(a,u)=>Nue(e,r,i,a,u,n,o)),a3(e,i,!1),n&&e.patches_&&V1("Patches").generatePatches_(r,n,e.patches_,e.inversePatches_)}return r.copy_}function Nue(e,t,n,r,i,s,o){if(z0(i)){const a=s&&t&&t.type_!==3&&!S7(t.assigned_,r)?s.concat(r):void 0,u=o3(e,i,a);if(vxe(n,r,u),z0(u))e.canAutoFreeze_=!1;else return}else o&&n.add(i);if(xm(i)&&!y6(i)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;o3(e,i),(!t||!t.scope_.parent_)&&typeof r!="symbol"&&Object.prototype.propertyIsEnumerable.call(n,r)&&a3(e,i)}}function a3(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&tK(t,n)}function eot(e,t){const n=Array.isArray(e),r={type_:n?1:0,scope_:t?t.scope_:bxe(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=r,s=nK;n&&(i=[r],s=FA);const{revoke:o,proxy:a}=Proxy.revocable(i,s);return r.draft_=a,r.revoke_=o,a}var nK={get(e,t){if(t===Fl)return e;const n=Av(e);if(!S7(n,t))return tot(e,n,t);const r=n[t];return e.finalized_||!xm(r)?r:r===a8(e.base_,t)?(u8(e),e.copy_[t]=k7(r,e)):r},has(e,t){return t in Av(e)},ownKeys(e){return Reflect.ownKeys(Av(e))},set(e,t,n){const r=_xe(Av(e),t);if(r!=null&&r.set)return r.set.call(e.draft_,n),!0;if(!e.modified_){const i=a8(Av(e),t),s=i==null?void 0:i[Fl];if(s&&s.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if(Kst(n,i)&&(n!==void 0||S7(e.base_,t)))return!0;u8(e),I7(e)}return e.copy_[t]===n&&(n!==void 0||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty(e,t){return a8(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,u8(e),I7(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const n=Av(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty(){Ef(11)},getPrototypeOf(e){return BE(e.base_)},setPrototypeOf(){Ef(12)}},FA={};s3(nK,(e,t)=>{FA[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});FA.deleteProperty=function(e,t){return FA.set.call(this,e,t,void 0)};FA.set=function(e,t,n){return nK.set.call(this,e[0],t,n,e[0])};function a8(e,t){const n=e[Fl];return(n?Av(n):e)[t]}function tot(e,t,n){var i;const r=_xe(t,n);return r?"value"in r?r.value:(i=r.get)==null?void 0:i.call(e.draft_):void 0}function _xe(e,t){if(!(t in e))return;let n=BE(e);for(;n;){const r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=BE(n)}}function I7(e){e.modified_||(e.modified_=!0,e.parent_&&I7(e.parent_))}function u8(e){e.copy_||(e.copy_=T7(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var not=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,n,r)=>{if(typeof t=="function"&&typeof n!="function"){const s=n;n=t;const o=this;return function(u=s,...l){return o.produce(u,c=>n.call(this,c,...l))}}typeof n!="function"&&Ef(6),r!==void 0&&typeof r!="function"&&Ef(7);let i;if(xm(t)){const s=kue(this),o=k7(t,void 0);let a=!0;try{i=n(o),a=!1}finally{a?C7(s):A7(s)}return Iue(s,r),Rue(i,s)}else if(!t||typeof t!="object"){if(i=n(t),i===void 0&&(i=t),i===gxe&&(i=void 0),this.autoFreeze_&&tK(i,!0),r){const s=[],o=[];V1("Patches").generateReplacementPatches_(t,i,s,o),r(s,o)}return i}else Ef(1,t)},this.produceWithPatches=(t,n)=>{if(typeof t=="function")return(o,...a)=>this.produceWithPatches(o,u=>t(u,...a));let r,i;return[this.produce(t,n,(o,a)=>{r=o,i=a}),r,i]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){xm(e)||Ef(8),z0(e)&&(e=wxe(e));const t=kue(this),n=k7(e,void 0);return n[Fl].isManual_=!0,A7(t),n}finishDraft(e,t){const n=e&&e[Fl];(!n||!n.isManual_)&&Ef(9);const{scope_:r}=n;return Iue(r,t),Rue(void 0,r)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const i=t[n];if(i.path.length===0&&i.op==="replace"){e=i.value;break}}n>-1&&(t=t.slice(n+1));const r=V1("Patches").applyPatches_;return z0(e)?r(e,t):this.produce(e,i=>r(i,t))}};function k7(e,t){const n=m6(e)?V1("MapSet").proxyMap_(e,t):g6(e)?V1("MapSet").proxySet_(e,t):eot(e,t);return(t?t.scope_:bxe()).drafts_.push(n),n}function wxe(e){return z0(e)||Ef(10,e),Exe(e)}function Exe(e){if(!xm(e)||y6(e))return e;const t=e[Fl];let n;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=T7(e,t.scope_.immer_.useStrictShallowCopy_)}else n=T7(e,!0);return s3(n,(r,i)=>{vxe(n,r,Exe(i))}),t&&(t.finalized_=!1),n}var jl=new not,xxe=jl.produce;jl.produceWithPatches.bind(jl);jl.setAutoFreeze.bind(jl);jl.setUseStrictShallowCopy.bind(jl);jl.applyPatches.bind(jl);jl.createDraft.bind(jl);jl.finishDraft.bind(jl);function rot(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function iot(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function sot(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(n=>typeof n=="function")){const n=e.map(r=>typeof r=="function"?`function ${r.name||"unnamed"}()`:typeof r).join(", ");throw new TypeError(`${t}[${n}]`)}}var Due=e=>Array.isArray(e)?e:[e];function oot(e){const t=Array.isArray(e[0])?e[0]:e;return sot(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function aot(e,t){const n=[],{length:r}=e;for(let i=0;i<r;i++)n.push(e[i].apply(null,t));return n}var uot=class{constructor(e){this.value=e}deref(){return this.value}},lot=typeof WeakRef<"u"?WeakRef:uot,cot=0,Pue=1;function ON(){return{s:cot,v:void 0,o:null,p:null}}function rK(e,t={}){let n=ON();const{resultEqualityCheck:r}=t;let i,s=0;function o(){var f;let a=n;const{length:u}=arguments;for(let d=0,h=u;d<h;d++){const p=arguments[d];if(typeof p=="function"||typeof p=="object"&&p!==null){let m=a.o;m===null&&(a.o=m=new WeakMap);const g=m.get(p);g===void 0?(a=ON(),m.set(p,a)):a=g}else{let m=a.p;m===null&&(a.p=m=new Map);const g=m.get(p);g===void 0?(a=ON(),m.set(p,a)):a=g}}const l=a;let c;if(a.s===Pue)c=a.v;else if(c=e.apply(null,arguments),s++,r){const d=((f=i==null?void 0:i.deref)==null?void 0:f.call(i))??i;d!=null&&r(d,c)&&(c=d,s!==0&&s--),i=typeof c=="object"&&c!==null||typeof c=="function"?new lot(c):c}return l.s=Pue,l.v=c,c}return o.clearCache=()=>{n=ON(),o.resetResultsCount()},o.resultsCount=()=>s,o.resetResultsCount=()=>{s=0},o}function Sxe(e,...t){const n=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,r=(...i)=>{let s=0,o=0,a,u={},l=i.pop();typeof l=="object"&&(u=l,l=i.pop()),rot(l,`createSelector expects an output function after the inputs, but received: [${typeof l}]`);const c={...n,...u},{memoize:f,memoizeOptions:d=[],argsMemoize:h=rK,argsMemoizeOptions:p=[],devModeChecks:m={}}=c,g=Due(d),y=Due(p),v=oot(i),b=f(function(){return s++,l.apply(null,arguments)},...g),w=h(function(){o++;const T=aot(v,arguments);return a=b.apply(null,T),a},...y);return Object.assign(w,{resultFunc:l,memoizedResultFunc:b,dependencies:v,dependencyRecomputations:()=>o,resetDependencyRecomputations:()=>{o=0},lastResult:()=>a,recomputations:()=>s,resetRecomputations:()=>{s=0},memoize:f,argsMemoize:h})};return Object.assign(r,{withTypes:()=>r}),r}var fot=Sxe(rK),dot=Object.assign((e,t=fot)=>{iot(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const n=Object.keys(e),r=n.map(s=>e[s]);return t(r,(...s)=>s.reduce((o,a,u)=>(o[n[u]]=a,o),{}))},{withTypes:()=>dot});function Txe(e){return({dispatch:n,getState:r})=>i=>s=>typeof s=="function"?s(n,r,e):i(s)}var hot=Txe(),pot=Txe,mot=(...e)=>{const t=Sxe(...e),n=Object.assign((...r)=>{const i=t(...r),s=(o,...a)=>i(z0(o)?wxe(o):o,...a);return Object.assign(s,i),s},{withTypes:()=>n});return n};mot(rK);var got=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?i3:i3.apply(null,arguments)};function UE(e,t){function n(...r){if(t){let i=t(...r);if(!i)throw new Error(qu(0));return{type:e,payload:i.payload,..."meta"in i&&{meta:i.meta},..."error"in i&&{error:i.error}}}return{type:e,payload:r[0]}}return n.toString=()=>`${e}`,n.type=e,n.match=r=>Gst(r)&&r.type===e,n}var Cxe=class _2 extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,_2.prototype)}static get[Symbol.species](){return _2}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new _2(...t[0].concat(this)):new _2(...t.concat(this))}};function Oue(e){return xm(e)?xxe(e,()=>{}):e}function $ue(e,t,n){if(e.has(t)){let i=e.get(t);return n.update&&(i=n.update(i,t,e),e.set(t,i)),i}if(!n.insert)throw new Error(qu(10));const r=n.insert(t,e);return e.set(t,r),r}function yot(e){return typeof e=="boolean"}var vot=()=>function(t){const{thunk:n=!0,immutableCheck:r=!0,serializableCheck:i=!0,actionCreatorCheck:s=!0}=t??{};let o=new Cxe;return n&&(yot(n)?o.push(hot):o.push(pot(n.extraArgument))),o},bot="RTK_autoBatch",Axe=e=>t=>{setTimeout(t,e)},_ot=typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:Axe(10),wot=(e={type:"raf"})=>t=>(...n)=>{const r=t(...n);let i=!0,s=!1,o=!1;const a=new Set,u=e.type==="tick"?queueMicrotask:e.type==="raf"?_ot:e.type==="callback"?e.queueNotification:Axe(e.timeout),l=()=>{o=!1,s&&(s=!1,a.forEach(c=>c()))};return Object.assign({},r,{subscribe(c){const f=()=>i&&c(),d=r.subscribe(f);return a.add(c),()=>{d(),a.delete(c)}},dispatch(c){var f;try{return i=!((f=c==null?void 0:c.meta)!=null&&f[bot]),s=!i,s&&(o||(o=!0,u(l))),r.dispatch(c)}finally{i=!0}}})},Eot=e=>function(n){const{autoBatch:r=!0}=n??{};let i=new Cxe(e);return r&&i.push(wot(typeof r=="object"?r:void 0)),i},xot=!0;function Sot(e){const t=vot(),{reducer:n=void 0,middleware:r,devTools:i=!0,preloadedState:s=void 0,enhancers:o=void 0}=e||{};let a;if(typeof n=="function")a=n;else if(eK(n))a=qst(n);else throw new Error(qu(1));let u;typeof r=="function"?u=r(t):u=t();let l=i3;i&&(l=got({trace:!xot,...typeof i=="object"&&i}));const c=Wst(...u),f=Eot(c);let d=typeof o=="function"?o(f):f();const h=l(...d);return mxe(a,s,h)}function Ixe(e){const t={},n=[];let r;const i={addCase(s,o){const a=typeof s=="string"?s:s.type;if(!a)throw new Error(qu(28));if(a in t)throw new Error(qu(29));return t[a]=o,i},addMatcher(s,o){return n.push({matcher:s,reducer:o}),i},addDefaultCase(s){return r=s,i}};return e(i),[t,n,r]}function Tot(e){return typeof e=="function"}function Cot(e,t){let[n,r,i]=Ixe(t),s;if(Tot(e))s=()=>Oue(e());else{const a=Oue(e);s=()=>a}function o(a=s(),u){let l=[n[u.type],...r.filter(({matcher:c})=>c(u)).map(({reducer:c})=>c)];return l.filter(c=>!!c).length===0&&(l=[i]),l.reduce((c,f)=>{if(f)if(z0(c)){const h=f(c,u);return h===void 0?c:h}else{if(xm(c))return xxe(c,d=>f(d,u));{const d=f(c,u);if(d===void 0){if(c===null)return c;throw new Error(qu(9))}return d}}return c},a)}return o.getInitialState=s,o}var Aot="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",Iot=(e=21)=>{let t="",n=e;for(;n--;)t+=Aot[Math.random()*64|0];return t},kot=Symbol.for("rtk-slice-createasyncthunk");function Rot(e,t){return`${e}/${t}`}function Not({creators:e}={}){var n;const t=(n=e==null?void 0:e.asyncThunk)==null?void 0:n[kot];return function(i){const{name:s,reducerPath:o=s}=i;if(!s)throw new Error(qu(11));typeof process<"u";const a=(typeof i.reducers=="function"?i.reducers(Oot()):i.reducers)||{},u=Object.keys(a),l={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},c={addCase(b,w){const E=typeof b=="string"?b:b.type;if(!E)throw new Error(qu(12));if(E in l.sliceCaseReducersByType)throw new Error(qu(13));return l.sliceCaseReducersByType[E]=w,c},addMatcher(b,w){return l.sliceMatchers.push({matcher:b,reducer:w}),c},exposeAction(b,w){return l.actionCreators[b]=w,c},exposeCaseReducer(b,w){return l.sliceCaseReducersByName[b]=w,c}};u.forEach(b=>{const w=a[b],E={reducerName:b,type:Rot(s,b),createNotation:typeof i.reducers=="function"};Mot(w)?Fot(E,w,c,t):$ot(E,w,c)});function f(){const[b={},w=[],E=void 0]=typeof i.extraReducers=="function"?Ixe(i.extraReducers):[i.extraReducers],T={...b,...l.sliceCaseReducersByType};return Cot(i.initialState,S=>{for(let C in T)S.addCase(C,T[C]);for(let C of l.sliceMatchers)S.addMatcher(C.matcher,C.reducer);for(let C of w)S.addMatcher(C.matcher,C.reducer);E&&S.addDefaultCase(E)})}const d=b=>b,h=new Map;let p;function m(b,w){return p||(p=f()),p(b,w)}function g(){return p||(p=f()),p.getInitialState()}function y(b,w=!1){function E(S){let C=S[b];return typeof C>"u"&&w&&(C=g()),C}function T(S=d){const C=$ue(h,w,{insert:()=>new WeakMap});return $ue(C,S,{insert:()=>{const A={};for(const[k,N]of Object.entries(i.selectors??{}))A[k]=Dot(N,S,g,w);return A}})}return{reducerPath:b,getSelectors:T,get selectors(){return T(E)},selectSlice:E}}const v={name:s,reducer:m,actions:l.actionCreators,caseReducers:l.sliceCaseReducersByName,getInitialState:g,...y(o),injectInto(b,{reducerPath:w,...E}={}){const T=w??o;return b.inject({reducerPath:T,reducer:m},E),{...v,...y(T,!0)}}};return v}}function Dot(e,t,n,r){function i(s,...o){let a=t(s);return typeof a>"u"&&r&&(a=n()),e(a,...o)}return i.unwrapped=e,i}var Pot=Not();function Oot(){function e(t,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...n}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...n){return t(...n)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:n}},asyncThunk:e}}function $ot({type:e,reducerName:t,createNotation:n},r,i){let s,o;if("reducer"in r){if(n&&!Lot(r))throw new Error(qu(17));s=r.reducer,o=r.prepare}else s=r;i.addCase(e,s).exposeCaseReducer(t,s).exposeAction(t,o?UE(e,o):UE(e))}function Mot(e){return e._reducerDefinitionType==="asyncThunk"}function Lot(e){return e._reducerDefinitionType==="reducerWithPrepare"}function Fot({type:e,reducerName:t},n,r,i){if(!i)throw new Error(qu(18));const{payloadCreator:s,fulfilled:o,pending:a,rejected:u,settled:l,options:c}=n,f=i(e,s,c);r.exposeAction(t,f),o&&r.addCase(f.fulfilled,o),a&&r.addCase(f.pending,a),u&&r.addCase(f.rejected,u),l&&r.addMatcher(f.settled,l),r.exposeCaseReducer(t,{fulfilled:o||$N,pending:a||$N,rejected:u||$N,settled:l||$N})}function $N(){}var jot=(e,t)=>{if(typeof e!="function")throw new Error(qu(32))},iK="listenerMiddleware",Bot=e=>{let{type:t,actionCreator:n,matcher:r,predicate:i,effect:s}=e;if(t)i=UE(t).match;else if(n)t=n.type,i=n.match;else if(r)i=r;else if(!i)throw new Error(qu(21));return jot(s),{predicate:i,type:t,effect:s}},Uot=Object.assign(e=>{const{type:t,predicate:n,effect:r}=Bot(e);return{id:Iot(),effect:r,type:t,predicate:n,pending:new Set,unsubscribe:()=>{throw new Error(qu(22))}}},{withTypes:()=>Uot}),zot=Object.assign(UE(`${iK}/add`),{withTypes:()=>zot});UE(`${iK}/removeAll`);var Vot=Object.assign(UE(`${iK}/remove`),{withTypes:()=>Vot});function qu(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}function Sm(e){return e.components.flatMap(t=>typeof t=="string"?t:Sm(t))}function kxe(e){var t;return[...e.components.flatMap(n=>typeof n=="string"?n:kxe(n)),...((t=e.interruptions)==null?void 0:t.flatMap(n=>n.components))||[]]}function Rxe(e,t,n){let r=0;for(let i=0;i<e.components.length;i+=1){const s=e.components[i];if(typeof s=="string"){if(typeof t=="number"&&t===n+r)return[{currentBlock:e,firstIndex:n,lastIndex:n+Sm(e).length-1}];if(typeof t=="string"&&e.orderPath===t)return[{currentBlock:e,firstIndex:n,lastIndex:n+Sm(e).length-1}];r+=1}else{const o=Rxe(s,t,n+r);if(typeof o=="number")r+=o;else{const a={currentBlock:e,firstIndex:n,lastIndex:o[0].lastIndex};return[...o,a]}}}return r}function Nxe(e,t){const n=Rxe(e,t,0);return typeof n=="number"?null:n}function Dxe(e,t,n){if(e.id===t)return{found:!0,distance:n};let r=0;for(let i=0;i<e.components.length;i+=1){const s=e.components[i];if(typeof s=="string")r+=1;else{const o=Dxe(s,t,n+r);if(o.found)return o;r+=o.distance}}return{found:!1,distance:r}}function Hot(e,t){const n=Dxe(e,t,0);return n.found?n.distance:-1}function Pxe(e,t="root"){const n=[],r={};return e.components.forEach((i,s)=>{typeof i=="string"?(n.push({componentName:i,orderPath:t,timesSeenInBlock:r[i]||0}),r[i]=r[i]?r[i]+1:1):n.push(...Pxe(i,`${t}-${s}`))}),n}function sK(e,t){return typeof e=="string"?e:{...e,orderPath:t,components:e.components.map((n,r)=>sK(n,`${t}-${r}`))}}async function qot(e,t,n,r,i){const s=Sm(n),o=Object.fromEntries(s.filter(d=>d!=="end").map((d,h)=>[`${d}_${h}`,{answer:{}}])),a=Object.assign({},...s.map((d,h)=>({[`${d}_${h}`]:{aboveStimulus:{valid:!1,values:{}},belowStimulus:{valid:!1,values:{}},sidebar:{valid:!1,values:{}}}}))),u=Object.assign({},...s.map((d,h)=>({[`${d}_${h}`]:{aboveStimulus:!0,belowStimulus:!0,sidebar:!0,values:{}}}))),l={studyId:e,answers:Object.keys(i).length>0?i:o,sequence:n,config:t,showStudyBrowser:!0,showHelpText:!1,alertModal:{show:!1,message:""},trialValidation:i?u:a,iframeAnswers:{},iframeProvenance:null,metadata:r},c=Pot({name:"storeSlice",initialState:l,reducers:{setConfig(d,h){d.config=h.payload},toggleStudyBrowser:d=>{d.showStudyBrowser=!d.showStudyBrowser},toggleShowHelpText:d=>{d.showHelpText=!d.showHelpText},setAlertModal:(d,h)=>{d.alertModal=h.payload},setIframeAnswers:(d,h)=>{d.iframeAnswers=h.payload},setIframeProvenance:(d,h)=>{d.iframeProvenance=h.payload},updateResponseBlockValidation:(d,{payload:h})=>{d.trialValidation[h.identifier]||(d.trialValidation[h.identifier]={aboveStimulus:{valid:!1,values:{}},belowStimulus:{valid:!1,values:{}},sidebar:{valid:!1,values:{}},provenanceGraph:void 0}),d.trialValidation[h.identifier][h.location]={valid:h.status,values:h.values},h.provenanceGraph&&(d.trialValidation[h.identifier].provenanceGraph=h.provenanceGraph)},saveTrialAnswer(d,{payload:h}){const{identifier:p,answer:m,startTime:g,endTime:y,provenanceGraph:v,windowEvents:b}=h;d.answers[p]={answer:m,startTime:g,endTime:y,provenanceGraph:v,windowEvents:b}}}});return{store:Sot({reducer:c.reducer,preloadedState:l}),actions:c.actions}}const Oxe=I.createContext(null);function Kh(){return I.useContext(Oxe).actions}const Xh=pxe,Yc=Nst;function Wot(e){return Yc(t=>{if(e.includes("reviewer-"))return!0;const n=Object.values(t.trialValidation[e]).every(r=>typeof r=="object"&&"valid"in r?r.valid:!0);return n?Object.values(n).every(r=>r):!1})}function oK(){return Yc(e=>Sm(e.sequence))}function Hb(){const{studyId:e}=wm();return`${e}`}function Jm(){const{index:e}=wm(),t=parseInt(e||"0",10);return Number.isNaN(t)?e:t}function My(){const e=Jm(),t=oK();return typeof e=="number"?t[e]:e.replace("reviewer-","")}var u3={exports:{}};u3.exports;(function(e,t){var n=200,r="__lodash_hash_undefined__",i=800,s=16,o=9007199254740991,a="[object Arguments]",u="[object Array]",l="[object AsyncFunction]",c="[object Boolean]",f="[object Date]",d="[object Error]",h="[object Function]",p="[object GeneratorFunction]",m="[object Map]",g="[object Number]",y="[object Null]",v="[object Object]",b="[object Proxy]",w="[object RegExp]",E="[object Set]",T="[object String]",S="[object Undefined]",C="[object WeakMap]",A="[object ArrayBuffer]",k="[object DataView]",N="[object Float32Array]",O="[object Float64Array]",P="[object Int8Array]",$="[object Int16Array]",F="[object Int32Array]",M="[object Uint8Array]",B="[object Uint8ClampedArray]",U="[object Uint16Array]",H="[object Uint32Array]",D=/[\\^$.*+?()[\]{}|]/g,z=/^\[object .+?Constructor\]$/,W=/^(?:0|[1-9]\d*)$/,j={};j[N]=j[O]=j[P]=j[$]=j[F]=j[M]=j[B]=j[U]=j[H]=!0,j[a]=j[u]=j[A]=j[c]=j[k]=j[f]=j[d]=j[h]=j[m]=j[g]=j[v]=j[w]=j[E]=j[T]=j[C]=!1;var q=typeof to=="object"&&to&&to.Object===Object&&to,G=typeof self=="object"&&self&&self.Object===Object&&self,ne=q||G||Function("return this")(),ce=t&&!t.nodeType&&t,de=ce&&!0&&e&&!e.nodeType&&e,he=de&&de.exports===ce,ve=he&&q.process,Ie=function(){try{var te=de&&de.require&&de.require("util").types;return te||ve&&ve.binding&&ve.binding("util")}catch{}}(),be=Ie&&Ie.isTypedArray;function Ke(te,ue,Re){switch(Re.length){case 0:return te.call(ue);case 1:return te.call(ue,Re[0]);case 2:return te.call(ue,Re[0],Re[1]);case 3:return te.call(ue,Re[0],Re[1],Re[2])}return te.apply(ue,Re)}function Ue(te,ue){for(var Re=-1,At=Array(te);++Re<te;)At[Re]=ue(Re);return At}function yt(te){return function(ue){return te(ue)}}function it(te,ue){return te==null?void 0:te[ue]}function _e(te,ue){return function(Re){return te(ue(Re))}}var ke=Array.prototype,ze=Function.prototype,ct=Object.prototype,Ot=ne["__core-js_shared__"],We=ze.toString,ge=ct.hasOwnProperty,ht=function(){var te=/[^.]+$/.exec(Ot&&Ot.keys&&Ot.keys.IE_PROTO||"");return te?"Symbol(src)_1."+te:""}(),vt=ct.toString,me=We.call(Object),Ae=RegExp("^"+We.call(ge).replace(D,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),He=he?ne.Buffer:void 0,ut=ne.Symbol,_t=ne.Uint8Array;He&&He.allocUnsafe;var Ln=_e(Object.getPrototypeOf,Object),Cr=Object.create,Fn=ct.propertyIsEnumerable,cr=ke.splice,gn=ut?ut.toStringTag:void 0,An=function(){try{var te=qe(Object,"defineProperty");return te({},"",{}),te}catch{}}(),nr=He?He.isBuffer:void 0,rr=Math.max,zo=Date.now,$i=qe(ne,"Map"),In=qe(Object,"create"),Mi=function(){function te(){}return function(ue){if(!yp(ue))return{};if(Cr)return Cr(ue);te.prototype=ue;var Re=new te;return te.prototype=void 0,Re}}();function Ar(te){var ue=-1,Re=te==null?0:te.length;for(this.clear();++ue<Re;){var At=te[ue];this.set(At[0],At[1])}}function gs(){this.__data__=In?In(null):{},this.size=0}function hp(te){var ue=this.has(te)&&delete this.__data__[te];return this.size-=ue?1:0,ue}function cl(te){var ue=this.__data__;if(In){var Re=ue[te];return Re===r?void 0:Re}return ge.call(ue,te)?ue[te]:void 0}function bd(te){var ue=this.__data__;return In?ue[te]!==void 0:ge.call(ue,te)}function xr(te,ue){var Re=this.__data__;return this.size+=this.has(te)?0:1,Re[te]=In&&ue===void 0?r:ue,this}Ar.prototype.clear=gs,Ar.prototype.delete=hp,Ar.prototype.get=cl,Ar.prototype.has=bd,Ar.prototype.set=xr;function Ii(te){var ue=-1,Re=te==null?0:te.length;for(this.clear();++ue<Re;){var At=te[ue];this.set(At[0],At[1])}}function Qr(){this.__data__=[],this.size=0}function cu(te){var ue=this.__data__,Re=Jn(ue,te);if(Re<0)return!1;var At=ue.length-1;return Re==At?ue.pop():cr.call(ue,Re,1),--this.size,!0}function Ia(te){var ue=this.__data__,Re=Jn(ue,te);return Re<0?void 0:ue[Re][1]}function ka(te){return Jn(this.__data__,te)>-1}function oe(te,ue){var Re=this.__data__,At=Jn(Re,te);return At<0?(++this.size,Re.push([te,ue])):Re[At][1]=ue,this}Ii.prototype.clear=Qr,Ii.prototype.delete=cu,Ii.prototype.get=Ia,Ii.prototype.has=ka,Ii.prototype.set=oe;function ee(te){var ue=-1,Re=te==null?0:te.length;for(this.clear();++ue<Re;){var At=te[ue];this.set(At[0],At[1])}}function ae(){this.size=0,this.__data__={hash:new Ar,map:new($i||Ii),string:new Ar}}function Ce(te){var ue=Ve(this,te).delete(te);return this.size-=ue?1:0,ue}function Se(te){return Ve(this,te).get(te)}function ot(te){return Ve(this,te).has(te)}function St(te,ue){var Re=Ve(this,te),At=Re.size;return Re.set(te,ue),this.size+=Re.size==At?0:1,this}ee.prototype.clear=ae,ee.prototype.delete=Ce,ee.prototype.get=Se,ee.prototype.has=ot,ee.prototype.set=St;function Ht(te){var ue=this.__data__=new Ii(te);this.size=ue.size}function On(){this.__data__=new Ii,this.size=0}function jn(te){var ue=this.__data__,Re=ue.delete(te);return this.size=ue.size,Re}function pn(te){return this.__data__.get(te)}function ir(te){return this.__data__.has(te)}function Ir(te,ue){var Re=this.__data__;if(Re instanceof Ii){var At=Re.__data__;if(!$i||At.length<n-1)return At.push([te,ue]),this.size=++Re.size,this;Re=this.__data__=new ee(At)}return Re.set(te,ue),this.size=Re.size,this}Ht.prototype.clear=On,Ht.prototype.delete=jn,Ht.prototype.get=pn,Ht.prototype.has=ir,Ht.prototype.set=Ir;function Vt(te,ue){var Re=mp(te),At=!Re&&fu(te),$n=!Re&&!At&&gp(te),Sr=!Re&&!At&&!$n&&JR(te),qr=Re||At||$n||Sr,Un=qr?Ue(te.length,String):[],Wr=Un.length;for(var Zi in te)qr&&(Zi=="length"||$n&&(Zi=="offset"||Zi=="parent")||Sr&&(Zi=="buffer"||Zi=="byteLength"||Zi=="byteOffset")||Et(Zi,Wr))||Un.push(Zi);return Un}function sr(te,ue,Re){(Re!==void 0&&!nc(te[ue],Re)||Re===void 0&&!(ue in te))&&ki(te,ue,Re)}function Hr(te,ue,Re){var At=te[ue];(!(ge.call(te,ue)&&nc(At,Re))||Re===void 0&&!(ue in te))&&ki(te,ue,Re)}function Jn(te,ue){for(var Re=te.length;Re--;)if(nc(te[Re][0],ue))return Re;return-1}function ki(te,ue,Re){ue=="__proto__"&&An?An(te,ue,{configurable:!0,enumerable:!0,value:Re,writable:!0}):te[ue]=Re}var Hs=Oe();function Jr(te){return te==null?te===void 0?S:y:gn&&gn in Object(te)?Ge(te):Ho(te)}function mo(te){return du(te)&&Jr(te)==a}function Li(te){if(!yp(te)||Bn(te))return!1;var ue=cT(te)?Ae:z;return ue.test(KR(te))}function Fi(te){return du(te)&&QR(te.length)&&!!j[Jr(te)]}function Vo(te){if(!yp(te))return Rr(te);var ue=kr(te),Re=[];for(var At in te)At=="constructor"&&(ue||!ge.call(te,At))||Re.push(At);return Re}function Ra(te,ue,Re,At,$n){te!==ue&&Hs(ue,function(Sr,qr){if($n||($n=new Ht),yp(Sr))qs(te,ue,qr,Re,Ra,At,$n);else{var Un=At?At(pp(te,qr),Sr,qr+"",te,ue,$n):void 0;Un===void 0&&(Un=Sr),sr(te,qr,Un)}},av)}function qs(te,ue,Re,At,$n,Sr,qr){var Un=pp(te,Re),Wr=pp(ue,Re),Zi=qr.get(Wr);if(Zi){sr(te,Re,Zi);return}var qo=Sr?Sr(Un,Wr,Re+"",te,ue,qr):void 0,lv=qo===void 0;if(lv){var vp=mp(Wr),b_=!vp&&gp(Wr),__=!vp&&!b_&&JR(Wr);qo=Wr,vp||b_||__?mp(Un)?qo=Un:XR(Un)?qo=fe(Un):b_?(lv=!1,qo=Y(Wr)):__?(lv=!1,qo=Z(Wr)):qo=[]:G5(Wr)||fu(Wr)?(qo=Un,fu(Un)?qo=ov(Un):(!yp(Un)||cT(Un))&&(qo=st(Wr))):lv=!1}lv&&(qr.set(Wr,qo),$n(qo,Wr,At,Sr,qr),qr.delete(Wr)),sr(te,Re,qo)}function tc(te,ue){return lT(wd(te,ue,mg),te+"")}var _d=An?function(te,ue){return An(te,"toString",{configurable:!0,enumerable:!1,value:uv(ue),writable:!0})}:mg;function Y(te,ue){return te.slice()}function se(te){var ue=new te.constructor(te.byteLength);return new _t(ue).set(new _t(te)),ue}function Z(te,ue){var Re=se(te.buffer);return new te.constructor(Re,te.byteOffset,te.length)}function fe(te,ue){var Re=-1,At=te.length;for(ue||(ue=Array(At));++Re<At;)ue[Re]=te[Re];return ue}function ye(te,ue,Re,At){var $n=!Re;Re||(Re={});for(var Sr=-1,qr=ue.length;++Sr<qr;){var Un=ue[Sr],Wr=void 0;Wr===void 0&&(Wr=te[Un]),$n?ki(Re,Un,Wr):Hr(Re,Un,Wr)}return Re}function le(te){return tc(function(ue,Re){var At=-1,$n=Re.length,Sr=$n>1?Re[$n-1]:void 0,qr=$n>2?Re[2]:void 0;for(Sr=te.length>3&&typeof Sr=="function"?($n--,Sr):void 0,qr&&mn(Re[0],Re[1],qr)&&(Sr=$n<3?void 0:Sr,$n=1),ue=Object(ue);++At<$n;){var Un=Re[At];Un&&te(ue,Un,At,Sr)}return ue})}function Oe(te){return function(ue,Re,At){for(var $n=-1,Sr=Object(ue),qr=At(ue),Un=qr.length;Un--;){var Wr=qr[++$n];if(Re(Sr[Wr],Wr,Sr)===!1)break}return ue}}function Ve(te,ue){var Re=te.__data__;return Dt(ue)?Re[typeof ue=="string"?"string":"hash"]:Re.map}function qe(te,ue){var Re=it(te,ue);return Li(Re)?Re:void 0}function Ge(te){var ue=ge.call(te,gn),Re=te[gn];try{te[gn]=void 0;var At=!0}catch{}var $n=vt.call(te);return At&&(ue?te[gn]=Re:delete te[gn]),$n}function st(te){return typeof te.constructor=="function"&&!kr(te)?Mi(Ln(te)):{}}function Et(te,ue){var Re=typeof te;return ue=ue??o,!!ue&&(Re=="number"||Re!="symbol"&&W.test(te))&&te>-1&&te%1==0&&te<ue}function mn(te,ue,Re){if(!yp(Re))return!1;var At=typeof ue;return(At=="number"?v_(Re)&&Et(ue,Re.length):At=="string"&&ue in Re)?nc(Re[ue],te):!1}function Dt(te){var ue=typeof te;return ue=="string"||ue=="number"||ue=="symbol"||ue=="boolean"?te!=="__proto__":te===null}function Bn(te){return!!ht&&ht in te}function kr(te){var ue=te&&te.constructor,Re=typeof ue=="function"&&ue.prototype||ct;return te===Re}function Rr(te){var ue=[];if(te!=null)for(var Re in Object(te))ue.push(Re);return ue}function Ho(te){return vt.call(te)}function wd(te,ue,Re){return ue=rr(ue===void 0?te.length-1:ue,0),function(){for(var At=arguments,$n=-1,Sr=rr(At.length-ue,0),qr=Array(Sr);++$n<Sr;)qr[$n]=At[ue+$n];$n=-1;for(var Un=Array(ue+1);++$n<ue;)Un[$n]=At[$n];return Un[ue]=Re(qr),Ke(te,this,Un)}}function pp(te,ue){if(!(ue==="constructor"&&typeof te[ue]=="function")&&ue!="__proto__")return te[ue]}var lT=sv(_d);function sv(te){var ue=0,Re=0;return function(){var At=zo(),$n=s-(At-Re);if(Re=At,$n>0){if(++ue>=i)return arguments[0]}else ue=0;return te.apply(void 0,arguments)}}function KR(te){if(te!=null){try{return We.call(te)}catch{}try{return te+""}catch{}}return""}function nc(te,ue){return te===ue||te!==te&&ue!==ue}var fu=mo(function(){return arguments}())?mo:function(te){return du(te)&&ge.call(te,"callee")&&!Fn.call(te,"callee")},mp=Array.isArray;function v_(te){return te!=null&&QR(te.length)&&!cT(te)}function XR(te){return du(te)&&v_(te)}var gp=nr||eN;function cT(te){if(!yp(te))return!1;var ue=Jr(te);return ue==h||ue==p||ue==l||ue==b}function QR(te){return typeof te=="number"&&te>-1&&te%1==0&&te<=o}function yp(te){var ue=typeof te;return te!=null&&(ue=="object"||ue=="function")}function du(te){return te!=null&&typeof te=="object"}function G5(te){if(!du(te)||Jr(te)!=v)return!1;var ue=Ln(te);if(ue===null)return!0;var Re=ge.call(ue,"constructor")&&ue.constructor;return typeof Re=="function"&&Re instanceof Re&&We.call(Re)==me}var JR=be?yt(be):Fi;function ov(te){return ye(te,av(te))}function av(te){return v_(te)?Vt(te):Vo(te)}var ZR=le(function(te,ue,Re){Ra(te,ue,Re)});function uv(te){return function(){return te}}function mg(te){return te}function eN(){return!1}e.exports=ZR})(u3,u3.exports);var Got=u3.exports;const aK=Kl(Got);function E0(e){return structuredClone(e)}function uK(){const{answers:e}=Yc(i=>i),t=Jm(),r=`${My()}_${t}`;return e[r]}const $xe=I.createContext(null);function Yot(){const e=I.useContext($xe);if(!e)throw new Error("useWindowEvents must be used within a WindowEventsProvider");return e}function V0(){return Yc(e=>e.config)}function Mue(e,t,n,r){const i=t.slice(0,t.lastIndexOf("_")),s=Object.entries(r.components).find(([a])=>a===i),o=s?s[1]:null;if(!o)throw new Error(`Component ${i} could not be found in the study components.`);return o.correctAnswer?o.correctAnswer.every(a=>e[a.id]===a.answer):!0}function Mxe(){const e=Jm(),t=oK(),r=`${My()}_${e}`,{trialValidation:i,sequence:s,answers:o}=Yc(T=>T),a=Xh(),{saveTrialAnswer:u,setIframeAnswers:l}=Kh(),{storageEngine:c}=Cs(),f=Hb(),[d,h]=I.useState(!0);I.useEffect(()=>{(async()=>{if(c){const S=await c.getModes(f);h(S.dataCollectionEnabled)}})()},[c,f]);const p=Wot(r),m=typeof e!="number"||!p,g=uK(),y=Gh(),v=V0(),b=I.useMemo(()=>Date.now(),[]),w=Yot(),E=I.useCallback(()=>{if(typeof e!="number")return;const T=E0(i[r]),S=Object.values(T).reduce((F,M)=>Object.hasOwn(M,"values")?{...F,...M.values}:F,{}),{provenanceGraph:C}=T,A=Date.now(),k=w&&"current"in w&&w.current?w.current.splice(0,w.current.length):[];d&&!g.endTime&&(a(u({identifier:r,answer:S,startTime:b,endTime:A,provenanceGraph:C,windowEvents:k})),c&&c.saveAnswers({...o,[r]:{answer:S,startTime:b,endTime:A,provenanceGraph:C,windowEvents:k}}),a(l({})));let N=e+1;const O=Nxe(s,e),P=O!==null&&O.some(F=>Object.hasOwn(F.currentBlock,"skip")&&F.currentBlock.skip!==void 0),$={...o,[r]:{answer:S,startTime:b,endTime:A,provenanceGraph:C,windowEvents:k}};P&&[...O.flatMap(M=>M.currentBlock.skip?M.currentBlock.skip.map(B=>({...B,firstIndex:M.firstIndex,lastIndex:M.lastIndex})):[])].some(M=>{let B=!1;const U=Object.fromEntries(Object.entries($).filter(([D])=>{const z=parseInt(D.slice(D.lastIndexOf("_")+1),10);return z>=M.firstIndex&&z<=e})),H=M.check!=="block"?Object.entries(U).filter(([D])=>D.slice(0,D.lastIndexOf("_"))===M.name):Object.entries(U);if(H.length===0)return!1;if(H.some(([D,z])=>!z))throw new Error(`There are components with missing response objects for the skip condition: ${JSON.stringify(M,null,2)}`);if(M.check==="response"||M.check==="responses"){const[D,z]=H[0];M.check==="response"?B=M.comparison==="equal"?M.value===z.answer[M.responseId]:M.value!==z.answer[M.responseId]:B=!Mue(z.answer,D,v.components[D.slice(0,D.lastIndexOf("_"))],v)}else if(M.check==="block"||M.check==="repeatedComponent"){if(H.length<M.value)return!1;const D=H.map(([j,q])=>Mue(q.answer,j,v.components[j.slice(0,j.lastIndexOf("_"))],v)),z=D.filter(j=>j).length,W=D.length-z;B=M.condition==="numCorrect"&&z===M.value||M.condition==="numIncorrect"&&W===M.value}if(B){const D=t.indexOf(M.to),z=D===-1?Hot(s,M.to):-1;return N=D===-1?z:D,!0}return!1}),y(`/${f}/${N}${window.location.search}`)},[e,i,r,w,d,g.endTime,s,o,b,y,f,a,u,c,l,v,t]);return{isNextDisabled:m,goToNextStep:E}}function Kot({label:e="Next",disabled:t=!1,onClick:n}){const{isNextDisabled:r,goToNextStep:i}=Mxe(),s=I.useCallback(()=>{n&&n(),i()},[i,n]);return _.jsx(fn,{type:"submit",disabled:t||r,onClick:s,children:e})}function Xot(e){if(!/^[0-9a-zA-Z-]+$/.test(e))throw new Error(`[@mantine/use-form] Form name "${e}" is invalid, it should contain only letters, numbers and dashes`)}const Qot=typeof window<"u"?I.useLayoutEffect:I.useEffect;function yo(e,t){Qot(()=>{if(e)return window.addEventListener(e,t),()=>window.removeEventListener(e,t)},[e])}function Jot(e,t){e&&Xot(e),yo(`mantine-form:${e}:set-field-value`,n=>t.setFieldValue(n.detail.path,n.detail.value)),yo(`mantine-form:${e}:set-values`,n=>t.setValues(n.detail)),yo(`mantine-form:${e}:set-initial-values`,n=>t.setInitialValues(n.detail)),yo(`mantine-form:${e}:set-errors`,n=>t.setErrors(n.detail)),yo(`mantine-form:${e}:set-field-error`,n=>t.setFieldError(n.detail.path,n.detail.error)),yo(`mantine-form:${e}:clear-field-error`,n=>t.clearFieldError(n.detail)),yo(`mantine-form:${e}:clear-errors`,t.clearErrors),yo(`mantine-form:${e}:reset`,t.reset),yo(`mantine-form:${e}:validate`,t.validate),yo(`mantine-form:${e}:validate-field`,n=>t.validateField(n.detail)),yo(`mantine-form:${e}:reorder-list-item`,n=>t.reorderListItem(n.detail.path,n.detail.payload)),yo(`mantine-form:${e}:remove-list-item`,n=>t.removeListItem(n.detail.path,n.detail.index)),yo(`mantine-form:${e}:insert-list-item`,n=>t.insertListItem(n.detail.path,n.detail.item,n.detail.index)),yo(`mantine-form:${e}:set-dirty`,n=>t.setDirty(n.detail)),yo(`mantine-form:${e}:set-touched`,n=>t.setTouched(n.detail)),yo(`mantine-form:${e}:reset-dirty`,n=>t.resetDirty(n.detail)),yo(`mantine-form:${e}:reset-touched`,t.resetTouched)}function Zot(e){return t=>{if(!t)e(t);else if(typeof t=="function")e(t);else if(typeof t=="object"&&"nativeEvent"in t){const{currentTarget:n}=t;n instanceof HTMLInputElement?n.type==="checkbox"?e(n.checked):e(n.value):(n instanceof HTMLTextAreaElement||n instanceof HTMLSelectElement)&&e(n.value)}else e(t)}}function R7(e){return e===null||typeof e!="object"?{}:Object.keys(e).reduce((t,n)=>{const r=e[n];return r!=null&&r!==!1&&(t[n]=r),t},{})}function eat(e){const[t,n]=I.useState(R7(e)),r=I.useRef(t),i=I.useCallback(u=>{n(l=>{const c=R7(typeof u=="function"?u(l):u);return r.current=c,c})},[]),s=I.useCallback(()=>i({}),[]),o=I.useCallback(u=>{r.current[u]!==void 0&&i(l=>{const c={...l};return delete c[u],c})},[t]),a=I.useCallback((u,l)=>{l==null||l===!1?o(u):r.current[u]!==l&&i(c=>({...c,[u]:l}))},[t]);return{errorsState:t,setErrors:i,clearErrors:s,setFieldError:a,clearFieldError:o}}function Lxe(e,t){if(t===null||typeof t!="object")return{};const n={...t};return Object.keys(t).forEach(r=>{r.includes(`${String(e)}.`)&&delete n[r]}),n}function Lue(e,t){const n=e.substring(t.length+1).split(".")[0];return parseInt(n,10)}function Fue(e,t,n,r){if(t===void 0)return n;const i=`${String(e)}`;let s=n;r===-1&&(s=Lxe(`${i}.${t}`,s));const o={...s},a=new Set;return Object.entries(s).filter(([u])=>{if(!u.startsWith(`${i}.`))return!1;const l=Lue(u,i);return Number.isNaN(l)?!1:l>=t}).forEach(([u,l])=>{const c=Lue(u,i),f=u.replace(`${i}.${c}`,`${i}.${c+r}`);o[f]=l,a.add(f),a.has(u)||delete o[u]}),o}function tat(e,{from:t,to:n},r){const i=`${e}.${t}`,s=`${e}.${n}`,o={...r};return Object.keys(r).every(a=>{let u,l;if(a.startsWith(i)&&(u=a,l=a.replace(i,s)),a.startsWith(s)&&(u=a.replace(s,i),l=a),u&&l){const c=o[u],f=o[l];return f===void 0?delete o[u]:o[u]=f,c===void 0?delete o[l]:o[l]=c,!1}return!0}),o}function jue(e,t,n){typeof n.value=="object"&&(n.value=Cw(n.value)),!n.enumerable||n.get||n.set||!n.configurable||!n.writable||t==="__proto__"?Object.defineProperty(e,t,n):e[t]=n.value}function Cw(e){if(typeof e!="object")return e;var t=0,n,r,i,s=Object.prototype.toString.call(e);if(s==="[object Object]"?i=Object.create(e.__proto__||null):s==="[object Array]"?i=Array(e.length):s==="[object Set]"?(i=new Set,e.forEach(function(o){i.add(Cw(o))})):s==="[object Map]"?(i=new Map,e.forEach(function(o,a){i.set(Cw(a),Cw(o))})):s==="[object Date]"?i=new Date(+e):s==="[object RegExp]"?i=new RegExp(e.source,e.flags):s==="[object DataView]"?i=new e.constructor(Cw(e.buffer)):s==="[object ArrayBuffer]"?i=e.slice(0):s.slice(-6)==="Array]"&&(i=new e.constructor(e)),i){for(r=Object.getOwnPropertySymbols(e);t<r.length;t++)jue(i,r[t],Object.getOwnPropertyDescriptor(e,r[t]));for(t=0,r=Object.getOwnPropertyNames(e);t<r.length;t++)Object.hasOwnProperty.call(i,n=r[t])&&i[n]===e[n]||jue(i,n,Object.getOwnPropertyDescriptor(e,n))}return i||e}function Fxe(e){return typeof e!="string"?[]:e.split(".")}function Ou(e,t){const n=Fxe(e);if(n.length===0||typeof t!="object"||t===null)return;let r=t[n[0]];for(let i=1;i<n.length&&r!==void 0;i+=1)r=r[n[i]];return r}function v6(e,t,n){const r=Fxe(e);if(r.length===0)return n;const i=Cw(n);if(r.length===1)return i[r[0]]=t,i;let s=i[r[0]];for(let o=1;o<r.length-1;o+=1){if(s===void 0)return i;s=s[r[o]]}return s[r[r.length-1]]=t,i}function nat(e,{from:t,to:n},r){const i=Ou(e,r);if(!Array.isArray(i))return r;const s=[...i],o=i[t];return s.splice(t,1),s.splice(n,0,o),v6(e,s,r)}function rat(e,t,n,r){const i=Ou(e,r);if(!Array.isArray(i))return r;const s=[...i];return s.splice(typeof n=="number"?n:s.length,0,t),v6(e,s,r)}function iat(e,t,n){const r=Ou(e,n);return Array.isArray(r)?v6(e,r.filter((i,s)=>s!==t),n):n}function sat({$values:e,$errors:t,$status:n}){const r=I.useCallback((o,a)=>{n.clearFieldDirty(o),t.setErrors(u=>tat(o,a,u)),e.setValues({values:nat(o,a,e.refValues.current),updateState:!0})},[]),i=I.useCallback((o,a)=>{n.clearFieldDirty(o),t.setErrors(u=>Fue(o,a,u,-1)),e.setValues({values:iat(o,a,e.refValues.current),updateState:!0})},[]),s=I.useCallback((o,a,u)=>{n.clearFieldDirty(o),t.setErrors(l=>Fue(o,u,l,1)),e.setValues({values:rat(o,a,u,e.refValues.current),updateState:!0})},[]);return{reorderListItem:r,removeListItem:i,insertListItem:s}}var lK=function e(t,n){if(t===n)return!0;if(t&&n&&typeof t=="object"&&typeof n=="object"){if(t.constructor!==n.constructor)return!1;var r,i,s;if(Array.isArray(t)){if(r=t.length,r!=n.length)return!1;for(i=r;i--!==0;)if(!e(t[i],n[i]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if(s=Object.keys(t),r=s.length,r!==Object.keys(n).length)return!1;for(i=r;i--!==0;)if(!Object.prototype.hasOwnProperty.call(n,s[i]))return!1;for(i=r;i--!==0;){var o=s[i];if(!e(t[o],n[o]))return!1}return!0}return t!==t&&n!==n};const gP=Kl(lK);function MN(e,t){const n=Object.keys(e);if(typeof t=="string"){const r=n.filter(i=>i.startsWith(`${t}.`));return e[t]||r.some(i=>e[i])||!1}return n.some(r=>e[r])}function oat({initialDirty:e,initialTouched:t,mode:n,$values:r}){const[i,s]=I.useState(t),[o,a]=I.useState(e),u=I.useRef(t),l=I.useRef(e),c=I.useCallback(E=>{const T=typeof E=="function"?E(u.current):E;u.current=T,n==="controlled"&&s(T)},[]),f=I.useCallback(E=>{const T=typeof E=="function"?E(l.current):E;l.current=T,n==="controlled"&&a(T)},[]),d=I.useCallback(()=>c({}),[]),h=E=>{const T=E?{...E,...r.refValues.current}:r.refValues.current;r.setValuesSnapshot(T),f({})},p=I.useCallback((E,T)=>{c(S=>MN(S,E)===T?S:{...S,[E]:T})},[]),m=I.useCallback((E,T)=>{f(S=>MN(S,E)===T?S:{...S,[E]:T})},[]),g=I.useCallback(E=>MN(u.current,E),[]),y=I.useCallback(E=>f(T=>{if(typeof E!="string")return T;const S=Lxe(E,T);return delete S[E],gP(S,T)?T:S}),[]),v=I.useCallback(E=>{if(E){const S=Ou(E,l.current);if(typeof S=="boolean")return S;const C=Ou(E,r.refValues.current),A=Ou(E,r.valuesSnapshot.current);return!gP(C,A)}return Object.keys(l.current).length>0?MN(l.current):!gP(r.refValues.current,r.valuesSnapshot.current)},[]),b=I.useCallback(()=>l.current,[]),w=I.useCallback(()=>u.current,[]);return{touchedState:i,dirtyState:o,touchedRef:u,dirtyRef:l,setTouched:c,setDirty:f,resetDirty:h,resetTouched:d,isTouched:g,setFieldTouched:p,setFieldDirty:m,setTouchedState:s,setDirtyState:a,clearFieldDirty:y,isDirty:v,getDirty:b,getTouched:w}}function aat({initialValues:e,onValuesChange:t,mode:n}){const r=I.useRef(!1),[i,s]=I.useState(e||{}),o=I.useRef(i),a=I.useRef(i),u=I.useCallback(({values:p,subscribers:m,updateState:g=!0,mergeWithPreviousValues:y=!0})=>{const v=o.current,b=p instanceof Function?p(o.current):p,w=y?{...v,...b}:b;o.current=w,g&&s(w),t==null||t(w,v),m==null||m.filter(Boolean).forEach(E=>E({updatedValues:w,previousValues:v}))},[t]),l=I.useCallback(p=>{var y;const m=Ou(p.path,o.current),g=p.value instanceof Function?p.value(m):p.value;if(m!==g){const v=o.current,b=v6(p.path,g,o.current);u({values:b,updateState:p.updateState}),(y=p.subscribers)==null||y.filter(Boolean).forEach(w=>w({path:p.path,updatedValues:b,previousValues:v}))}},[]),c=I.useCallback(p=>{a.current=p},[]),f=I.useCallback((p,m)=>{r.current||(r.current=!0,u({values:p,updateState:n==="controlled"}),c(p),m())},[]),d=I.useCallback(()=>{u({values:a.current,updateState:!0,mergeWithPreviousValues:!1})},[]),h=I.useCallback(()=>o.current,[]);return{initialized:r,stateValues:i,refValues:o,valuesSnapshot:a,setValues:u,setFieldValue:l,resetValues:d,setValuesSnapshot:c,initialize:f,getValues:h}}function uat({$status:e}){const t=I.useRef({}),n=I.useCallback((i,s)=>{I.useEffect(()=>(t.current[i]=t.current[i]||[],t.current[i].push(s),()=>{t.current[i]=t.current[i].filter(o=>o!==s)}),[s])},[]),r=I.useCallback(i=>t.current[i]?t.current[i].map(s=>o=>s({previousValue:Ou(i,o.previousValues),value:Ou(i,o.updatedValues),touched:e.isTouched(i),dirty:e.isDirty(i)})):[],[]);return{subscribers:t,watch:n,getFieldSubscribers:r}}function Bue(e,t){return e?`${e}-${t.toString()}`:t.toString()}function Uue(e){const t=R7(e);return{hasErrors:Object.keys(t).length>0,errors:t}}function N7(e,t,n="",r={}){return typeof e!="object"||e===null?r:Object.keys(e).reduce((i,s)=>{const o=e[s],a=`${n===""?"":`${n}.`}${s}`,u=Ou(a,t);let l=!1;return typeof o=="function"&&(i[a]=o(u,t,a)),typeof o=="object"&&Array.isArray(u)&&(l=!0,u.forEach((c,f)=>N7(o,t,`${a}.${f}`,i))),typeof o=="object"&&typeof u=="object"&&u!==null&&(l||N7(o,t,a,i)),i},r)}function D7(e,t){return Uue(typeof e=="function"?e(t):N7(e,t))}function LN(e,t,n){if(typeof e!="string")return{hasError:!1,error:null};const r=D7(t,n),i=Object.keys(r.errors).find(s=>e.split(".").every((o,a)=>o===s.split(".")[a]));return{hasError:!!i,error:i?r.errors[i]:null}}const lat="__MANTINE_FORM_INDEX__";function zue(e,t){return t?typeof t=="boolean"?t:Array.isArray(t)?t.includes(e.replace(/[.][0-9]/g,`.${lat}`)):!1:!1}function jxe({name:e,mode:t="controlled",initialValues:n,initialErrors:r={},initialDirty:i={},initialTouched:s={},clearInputErrorOnChange:o=!0,validateInputOnChange:a=!1,validateInputOnBlur:u=!1,onValuesChange:l,transformValues:c=h=>h,enhanceGetInputProps:f,validate:d}={}){const h=eat(r),p=aat({initialValues:n,onValuesChange:l,mode:t}),m=oat({initialDirty:i,initialTouched:s,$values:p,mode:t}),g=sat({$values:p,$errors:h,$status:m}),y=uat({$status:m}),[v,b]=I.useState(0),[w,E]=I.useState({}),T=I.useCallback(()=>{p.resetValues(),h.clearErrors(),m.resetDirty(),m.resetTouched(),t==="uncontrolled"&&b(D=>D+1)},[]),S=I.useCallback(D=>{p.initialize(D,()=>t==="uncontrolled"&&b(z=>z+1))},[]),C=I.useCallback((D,z,W)=>{const j=zue(D,a);m.clearFieldDirty(D),m.setFieldTouched(D,!0),!j&&o&&h.clearFieldError(D),p.setFieldValue({path:D,value:z,updateState:t==="controlled",subscribers:[...y.getFieldSubscribers(D),j?q=>{const G=LN(D,d,q.updatedValues);G.hasError?h.setFieldError(D,G.error):h.clearFieldError(D)}:null,(W==null?void 0:W.forceUpdate)!==!1&&t!=="controlled"?()=>E(q=>({...q,[D]:(q[D]||0)+1})):null]})},[l,d]),A=I.useCallback(D=>{const z=p.refValues.current;p.setValues({values:D,updateState:t==="controlled"}),o&&h.clearErrors(),t==="uncontrolled"&&b(W=>W+1),Object.keys(y.subscribers.current).forEach(W=>{const j=Ou(W,p.refValues.current),q=Ou(W,z);j!==q&&y.getFieldSubscribers(W).forEach(G=>G({previousValues:z,updatedValues:p.refValues.current}))})},[l,o]),k=I.useCallback(()=>{const D=D7(d,p.refValues.current);return h.setErrors(D.errors),D},[d]),N=I.useCallback(D=>{const z=LN(D,d,p.refValues.current);return z.hasError?h.setFieldError(D,z.error):h.clearFieldError(D),z},[d]),O=(D,{type:z="input",withError:W=!0,withFocus:j=!0,...q}={})=>{const ne={onChange:Zot(ce=>C(D,ce,{forceUpdate:!1})),"data-path":Bue(e,D)};return W&&(ne.error=h.errorsState[D]),z==="checkbox"?ne[t==="controlled"?"checked":"defaultChecked"]=Ou(D,p.refValues.current):ne[t==="controlled"?"value":"defaultValue"]=Ou(D,p.refValues.current),j&&(ne.onFocus=()=>m.setFieldTouched(D,!0),ne.onBlur=()=>{if(zue(D,u)){const ce=LN(D,d,p.refValues.current);ce.hasError?h.setFieldError(D,ce.error):h.clearFieldError(D)}}),Object.assign(ne,f==null?void 0:f({inputProps:ne,field:D,options:{type:z,withError:W,withFocus:j,...q},form:H}))},P=(D,z)=>W=>{W==null||W.preventDefault();const j=k();j.hasErrors?z==null||z(j.errors,p.refValues.current,W):D==null||D(c(p.refValues.current),W)},$=D=>c(D||p.refValues.current),F=I.useCallback(D=>{D.preventDefault(),T()},[]),M=I.useCallback(D=>D?!LN(D,d,p.refValues.current).hasError:!D7(d,p.refValues.current).hasErrors,[d]),B=D=>`${v}-${D}-${w[D]||0}`,U=I.useCallback(D=>document.querySelector(`[data-path="${Bue(e,D)}"]`),[]),H={watch:y.watch,initialized:p.initialized.current,values:p.stateValues,getValues:p.getValues,setInitialValues:p.setValuesSnapshot,initialize:S,setValues:A,setFieldValue:C,errors:h.errorsState,setErrors:h.setErrors,setFieldError:h.setFieldError,clearFieldError:h.clearFieldError,clearErrors:h.clearErrors,resetDirty:m.resetDirty,setTouched:m.setTouched,setDirty:m.setDirty,isTouched:m.isTouched,resetTouched:m.resetTouched,isDirty:m.isDirty,getTouched:m.getTouched,getDirty:m.getDirty,reorderListItem:g.reorderListItem,insertListItem:g.insertListItem,removeListItem:g.removeListItem,reset:T,validate:k,validateField:N,getInputProps:O,onSubmit:P,onReset:F,isValid:M,getTransformedValues:$,key:B,getInputNode:U};return Jot(e,H),H}function cat(e,t){const n=t||!0;return r=>typeof r!="string"?n:e.test(r)?null:n}function fat(e){return cat(/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/,e)}function Bxe(e,t){if(e.type==="checkbox"){const n=e,r=n.minSelections&&t.length<n.minSelections,i=n.maxSelections&&t.length>n.maxSelections;if(r&&i)return`Please select between ${n.minSelections} and ${n.maxSelections} options`;if(r)return`Please select at least ${n.minSelections} options`;if(i)return`Please select at most ${n.maxSelections} options`}return null}const dat=new URLSearchParams(window.location.search),hat=(e,t)=>{let n={};return e.forEach(r=>{const i=t?t[r.id]:{};if(i)n={...n,[r.id]:i};else{const s=r.paramCapture?dat.get(r.paramCapture):"";n={...n,[r.id]:r.type==="iframe"?[]:s}}}),{...n}},pat=e=>{let t={};return e.forEach(n=>{n.required&&(t={...t,[n.id]:r=>{if(Array.isArray(r)){if(n.requiredValue!=null&&!Array.isArray(n.requiredValue))return"Incorrect required value. Contact study administrator.";if(n.requiredValue!=null&&Array.isArray(n.requiredValue)){if(n.requiredValue.length!==r.length)return"Incorrect input";const i=[...n.requiredValue].sort(),s=[...r].sort();return i.every((o,a)=>o===s[a])?null:"Incorrect input"}return n.type==="checkbox"?Bxe(n,r):r.length===0?"Empty input":null}return n.required&&n.requiredValue!=null&&r!=null?r.toString()!==n.requiredValue.toString()?"Incorrect input":null:n.required?r==null||r===""?"Empty input":null:r===null?"Empty input":null}})}),t};function mat(e,t,n){const[r,i]=I.useState(null),s=jxe({initialValues:hat(e,n),validate:pat(e)});return I.useEffect(()=>{r!==t&&(i(t),s.reset())},[r,s,t]),s}function qb(e,t,n){var o;const{requiredValue:r,requiredLabel:i}=e;let s="";return t.checked&&Array.isArray(r)?s=r&&[...r].sort().toString()!==[...t.checked].sort().toString()?`Please ${n?"select":"enter"} ${i||r.toString()} to continue.`:null:t.checked&&e.required?s=Bxe(e,t.checked):s=t.value&&r&&r.toString()!==t.value.toString()?`Please ${n?"select":"enter"} ${i||(n?(o=n.find(a=>a.value===r))==null?void 0:o.label:r.toString())} to continue.`:null,s}function gat({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{prompt:s,required:o,options:a,secondaryText:u}=e,l=a.map(c=>typeof c=="string"?{value:c,label:c}:c);return _.jsx(Sl.Group,{label:_.jsxs(Nt,{direction:"row",wrap:"nowrap",gap:4,children:[i&&_.jsx(pe,{style:{minWidth:"fit-content"},children:`${r}. `}),_.jsx(pe,{style:{display:"block"},className:"no-last-child-bottom-padding",children:_.jsx(Qa,{text:s,required:o})})]}),description:u,...n,error:qb(e,n,l),style:{"--input-description-size":"calc(var(--mantine-font-size-md) - calc(0.125rem * var(--mantine-scale)))"},children:_.jsx(ls,{mt:"xs",children:l.map(c=>_.jsx(Sl,{disabled:t,value:c.value,label:c.label},c.value))})})}function yat({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{placeholder:s,prompt:o,required:a,options:u,secondaryText:l}=e,c=u.map(f=>typeof f=="string"?{value:f,label:f}:f);return _.jsx(pk,{disabled:t,label:_.jsxs(Nt,{direction:"row",wrap:"nowrap",gap:4,children:[i&&_.jsx(pe,{style:{minWidth:"fit-content"},children:`${r}. `}),_.jsx(pe,{style:{display:"block"},className:"no-last-child-bottom-padding",children:_.jsx(Qa,{text:o,required:a})})]}),description:l,placeholder:s,data:c,radius:"md",size:"md",...n,error:qb(e,n,c)})}function vat({response:e,answer:t,index:n,enumerateQuestions:r}){const{prompt:i,required:s,secondaryText:o}=e;return _.jsx(mi.Wrapper,{label:_.jsxs(Nt,{direction:"row",wrap:"nowrap",gap:4,children:[r&&_.jsx(pe,{style:{minWidth:"fit-content"},children:`${n}. `}),_.jsx(pe,{style:{display:"block"},className:"no-last-child-bottom-padding",children:_.jsx(Qa,{text:i,required:s})})]}),description:o,size:"md",children:_.jsx(jf,{children:Array.isArray(t.value)?t.value.map(a=>_.jsx(jf.Item,{children:a},a)):_.jsx(jf.Item,{children:t.value})})})}function Uxe({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{prompt:s,required:o,options:a,leftLabel:u,rightLabel:l,secondaryText:c}=e,f=a.map(d=>typeof d=="string"?{value:d,label:d}:d);return _.jsx(z1.Group,{name:`radioInput${e.id}`,label:_.jsxs(Nt,{direction:"row",wrap:"nowrap",gap:4,children:[i&&_.jsx(pe,{style:{minWidth:"fit-content"},children:`${r}. `}),_.jsx(pe,{style:{display:"block"},className:"no-last-child-bottom-padding",children:_.jsx(Qa,{text:s,required:o})})]}),description:c,...n,error:qb(e,n,f),style:{"--input-description-size":"calc(var(--mantine-font-size-md) - calc(0.125rem * var(--mantine-scale)))"},children:_.jsxs(ls,{mt:"xs",children:[u?_.jsx(Xe,{style:{textAlign:"center"},children:u}):null,f.map(d=>_.jsx(z1,{disabled:t,value:d.value,label:d.label},d.label)),_.jsx(Xe,{children:l})]})},e.id)}function bat({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{numItems:s}=e,o=[];for(let u=1;u<=+s;u+=1)o.push({label:`${u}`,value:`${u}`});const a={...e,type:"radio",options:o};return _.jsx(Uxe,{disabled:t,response:a,answer:n,index:r,enumerateQuestions:i})}function _at({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{prompt:s,required:o,min:a,max:u,placeholder:l,secondaryText:c}=e;return _.jsx(aY,{disabled:t,placeholder:l,label:_.jsxs(Nt,{direction:"row",wrap:"nowrap",gap:4,children:[i&&_.jsx(pe,{style:{minWidth:"fit-content"},children:`${r}. `}),_.jsx(pe,{style:{display:"block"},className:"no-last-child-bottom-padding",children:_.jsx(Qa,{text:s,required:o})})]}),description:c,radius:"md",size:"md",min:a,max:u,...n,error:qb(e,n)})}function wat({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{prompt:s,required:o,options:a,secondaryText:u}=e,l=qb(e,n);return _.jsx(mi.Wrapper,{label:_.jsxs(Nt,{direction:"row",wrap:"nowrap",gap:4,children:[i&&_.jsx(pe,{style:{minWidth:"fit-content"},children:`${r}. `}),_.jsx(pe,{style:{display:"block"},className:"no-last-child-bottom-padding",children:_.jsx(Qa,{text:s,required:o})})]}),description:u,error:l,style:{"--input-description-size":"calc(var(--mantine-font-size-md) - calc(0.125rem * var(--mantine-scale)))"},children:_.jsx(n6,{disabled:t,marks:a,...n,h:40})})}function Eat({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{placeholder:s,prompt:o,required:a,secondaryText:u}=e;return _.jsx(Qg,{disabled:t,placeholder:s,label:_.jsxs(Nt,{direction:"row",wrap:"nowrap",gap:4,children:[i&&_.jsx(pe,{style:{minWidth:"fit-content"},children:`${r}. `}),_.jsx(pe,{style:{display:"block"},className:"no-last-child-bottom-padding",children:_.jsx(Qa,{text:o,required:a})})]}),description:u,radius:"md",size:"md",...n,value:n.value||"",error:qb(e,n)})}function xat({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{placeholder:s,prompt:o,required:a,secondaryText:u}=e;return _.jsx(YG,{disabled:t,placeholder:s,label:_.jsxs(Nt,{direction:"row",wrap:"nowrap",gap:4,children:[i&&_.jsx(pe,{style:{minWidth:"fit-content"},children:`${r}. `}),_.jsx(pe,{style:{display:"block"},className:"no-last-child-bottom-padding",children:_.jsx(Qa,{text:o,required:a})})]}),description:u,radius:"md",size:"md",...n,value:n.value||"",error:qb(e,n)})}function Sat({response:e,answer:t,storedAnswer:n,index:r}){const i=(n?{value:n}:t)||{value:void 0},s=!!n,[o]=RY(),u=V0().uiConfig.enumerateQuestions??!1,l=I.useMemo(()=>{if(e.paramCapture){const c=o.get(e.paramCapture);return s||!!c}return s},[s,e.paramCapture,o]);return _.jsxs(pe,{mb:"md",children:[e.type==="numerical"&&_.jsx(_at,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="shortText"&&_.jsx(Eat,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="longText"&&_.jsx(xat,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="likert"&&_.jsx(bat,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="dropdown"&&_.jsx(yat,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="slider"&&_.jsx(wat,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="radio"&&_.jsx(Uxe,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="checkbox"&&_.jsx(gat,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="iframe"&&_.jsx(vat,{response:e,answer:i,index:r,enumerateQuestions:u})]})}function l3({config:e,location:t,status:n,style:r}){var $;const i=Xh(),{updateResponseBlockValidation:s,toggleShowHelpText:o}=Kh(),a=Jm(),u=My(),l=n==null?void 0:n.answer,c=Gh(),f=e,d=I.useMemo(()=>{var F;return((F=f==null?void 0:f.response)==null?void 0:F.filter(M=>M.location?M.location===t:t==="belowStimulus"))||[]},[f==null?void 0:f.response,t]),h=mat(d,a,l||{}),[p,m]=I.useState(void 0),{iframeAnswers:g,iframeProvenance:y}=Yc(F=>F),v=(f==null?void 0:f.provideFeedback)&&((($=f==null?void 0:f.correctAnswer)==null?void 0:$.length)||0)>0,b=(f==null?void 0:f.allowFailedTraining)===void 0?!0:f.allowFailedTraining,[w,E]=I.useState(0),T=(f==null?void 0:f.trainingAttempts)||2,[S,C]=I.useState(!1),A=t===((f==null?void 0:f.nextButtonLocation)||"belowStimulus");I.useEffect(()=>{const F=d.find(M=>M.type==="iframe");if(g&&F){const M=F.id;h.setValues({...h.values,[M]:g[M]})}},[g]),I.useEffect(()=>{y&&m(y)},[y]),I.useEffect(()=>{i(s({location:t,identifier:`${u}_${a}`,status:h.isValid(),values:E0(h.values),provenanceGraph:p}))},[h.values,u,a,t,i,s,p]);const[k,N]=I.useState(Object.fromEntries(d.map(F=>[F.id,{visible:!1,title:"Correct Answer",message:"The correct answer is: ",color:"green"}]))),O=(F,M,B,U,H)=>{N(D=>({...D,[F]:{visible:M,title:B,message:U,color:H}}))},P=()=>{const F=w+1;E(F);const M=Object.fromEntries(d.map(B=>{var D,z;const U=(z=(D=f.correctAnswer)==null?void 0:D.find(W=>W.id===B.id))==null?void 0:z.answer,H=h.values[B.id];return[B.id,Array.isArray(H)?typeof U=="string"?H.length===1&&U===H[0]:H.length===U.length&&H.every(W=>U.includes(W)):U===H]}));v&&(d.forEach(B=>{var U;if(M[B.id]&&!((U=k[B.id])!=null&&U.message.includes("You've failed to answer this question correctly")))O(B.id,!0,"Correct Answer","You have answered the question correctly.","green");else{let H="";F>=T?(H=`You didn't answer this question correctly after ${T} attempts. ${b?"You can continue to the next question.":"Unfortunately you have not met the criteria for continuing this study."}`,b||setTimeout(()=>{c("./__trainingFailed")},5e3)):T-F===1?H="Please try again. You have 1 attempt left.":H=`Please try again. You have ${T-F} attempts left.`,O(B.id,!0,"Incorrect Answer",H,"red")}}),C(b&&F>=T||Object.values(M).every(B=>B)&&F<=T))};return _.jsxs("div",{style:r,children:[d.map((F,M)=>{var U,H;const B=(H=(U=f.correctAnswer)==null?void 0:U.find(D=>D.id===F.id))==null?void 0:H.answer;return _.jsx(_r.Fragment,{children:F.hidden?"":_.jsxs(_.Fragment,{children:[_.jsx(Sat,{storedAnswer:l?l[F.id]:void 0,answer:{...h.getInputProps(F.id,{type:F.type==="checkbox"?"checkbox":"input"})},response:F,index:M+1}),k[F.id].visible&&_.jsxs(Zx,{mb:"md",title:k[F.id].title,color:k[F.id].color,children:[k[F.id].message," ",k[F.id].message.includes("Please try again")&&_.jsxs(_.Fragment,{children:["Please"," ",_.jsx(Mb,{style:{fontSize:14},onClick:()=>i(o()),children:"click here"})," ","and read the help text carefully."]}),_.jsx("br",{}),_.jsx("br",{}),w>=T&&B&&` The correct answer was: ${B}.`]})]})},`${F.id}-${a}`)}),_.jsxs(ls,{justify:"right",gap:"xs",children:[v&&A&&_.jsx(fn,{onClick:()=>P(),disabled:!h.isValid(),children:"Check Answer"}),A&&_.jsx(Kot,{disabled:v&&!S||!h.isValid(),label:f.nextButtonText||"Next"})]})]})}const AT="@REVISIT_COMMS",Tat={minHeight:"500px",width:"100%",border:0};function Cat({currentConfig:e}){const{setIframeAnswers:t,setIframeProvenance:n}=Kh(),r=Xh(),i=pxe(),s=I.useRef(null),o=I.useMemo(()=>crypto.randomUUID?crypto.randomUUID():`testID-${Date.now()}`,[]),a=My(),u=Gh(),l=I.useCallback((c,f)=>{var d,h;(h=(d=s.current)==null?void 0:d.contentWindow)==null||h.postMessage({error:!1,type:`${AT}/${c}`,iframeId:o,message:f},"*")},[s,o]);return I.useEffect(()=>{const c=f=>{const{data:d}=f;if(typeof d=="object"&&o===d.iframeId)switch(d.type){case`${AT}/WINDOW_READY`:e.parameters&&l("STUDY_DATA",e.parameters);break;case`${AT}/READY`:s.current&&(s.current.style.height=`${d.message.documentHeight}px`);break;case`${AT}/ANSWERS`:r(t(d.message));break;case`${AT}/PROVENANCE`:r(n(d.message));break}};return window.addEventListener("message",c),()=>window.removeEventListener("message",c)},[r,i,o,u,e,l,t,n]),_.jsx("iframe",{ref:s,src:`${Vu}${e.path}?trialid=${a}&id=${o}`,style:Tat})}async function cK(e){const n=await(await fetch(`${Vu}${e}`)).text();if(!n.includes("<title>reVISit</title>"))return n}function H1({email:e,path:t}){const n=Py();return _.jsxs(Oc,{fluid:!0,my:50,maw:800,mx:"auto",children:[_.jsx(ui,{order:2,children:_.jsx(Xe,{span:!0,c:"orange",children:"404"})}),_.jsxs(Xe,{children:[_.jsx(Xe,{span:!0,fw:700,children:t||n.pathname})," ","not Found."]}),_.jsx(Nl,{h:"lg"}),_.jsxs(jf,{children:[_.jsx(jf.Item,{children:_.jsx(Xe,{children:"If you're trying to access your study please check the URL and verify that the global config file is correctly configured. Then try again."})}),_.jsx(jf.Item,{children:_.jsxs(Xe,{children:["If you're a participant, please contact the study administrator"," ",e&&_.jsxs(_.Fragment,{children:["at"," ",_.jsxs(Mb,{c:"blue",href:`mailto:${e}`,children:[e," "]})]}),"."]})})]})]})}const Aat={maxWidth:"100%"};function Iat({currentConfig:e}){const t={...Aat,...e.style},[n,r]=I.useState(!0),[i,s]=I.useState(!1);return I.useEffect(()=>{async function o(){const a=await cK(e.path);s(!!a),r(!1)}o()},[e]),n||i?_.jsx(Dy,{mx:"auto",src:`${Vu}${e.path}`,style:t}):_.jsx(H1,{path:e.path})}function im(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function kat(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function hS(e){let t,n,r;e.length!==2?(t=im,n=(a,u)=>im(e(a),u),r=(a,u)=>e(a)-u):(t=e===im||e===kat?e:Rat,n=e,r=e);function i(a,u,l=0,c=a.length){if(l<c){if(t(u,u)!==0)return c;do{const f=l+c>>>1;n(a[f],u)<0?l=f+1:c=f}while(l<c)}return l}function s(a,u,l=0,c=a.length){if(l<c){if(t(u,u)!==0)return c;do{const f=l+c>>>1;n(a[f],u)<=0?l=f+1:c=f}while(l<c)}return l}function o(a,u,l=0,c=a.length){const f=i(a,u,l,c-1);return f>l&&r(a[f-1],u)>-r(a[f],u)?f-1:f}return{left:i,center:o,right:s}}function Rat(){return 0}function zxe(e){return e===null?NaN:+e}function*Nat(e,t){if(t===void 0)for(let n of e)n!=null&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)(r=t(r,++n,e))!=null&&(r=+r)>=r&&(yield r)}}const Vxe=hS(im),H0=Vxe.right,Dat=Vxe.left;hS(zxe).center;function Pat(e,t){let n=0,r,i=0,s=0;if(t===void 0)for(let o of e)o!=null&&(o=+o)>=o&&(r=o-i,i+=r/++n,s+=r*(o-i));else{let o=-1;for(let a of e)(a=t(a,++o,e))!=null&&(a=+a)>=a&&(r=a-i,i+=r/++n,s+=r*(a-i))}if(n>1)return s/(n-1)}function Oat(e,t){const n=Pat(e,t);return n&&Math.sqrt(n)}function P7(e,t){let n,r;for(const i of e)i!=null&&(n===void 0?i>=i&&(n=r=i):(n>i&&(n=i),r<i&&(r=i)));return[n,r]}class Ya{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const n=this._partials;let r=0;for(let i=0;i<this._n&&i<32;i++){const s=n[i],o=t+s,a=Math.abs(t)<Math.abs(s)?t-(o-s):s-(o-t);a&&(n[r++]=a),t=o}return n[r]=t,this._n=r+1,this}valueOf(){const t=this._partials;let n=this._n,r,i,s,o=0;if(n>0){for(o=t[--n];n>0&&(r=o,i=t[--n],o=r+i,s=i-(o-r),!s););n>0&&(s<0&&t[n-1]<0||s>0&&t[n-1]>0)&&(i=s*2,r=o+i,i==r-o&&(o=r))}return o}}class O7 extends Map{constructor(t,n=Wxe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,i]of t)this.set(r,i)}get(t){return super.get($7(this,t))}has(t){return super.has($7(this,t))}set(t,n){return super.set(Hxe(this,t),n)}delete(t){return super.delete(qxe(this,t))}}class c3 extends Set{constructor(t,n=Wxe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const r of t)this.add(r)}has(t){return super.has($7(this,t))}add(t){return super.add(Hxe(this,t))}delete(t){return super.delete(qxe(this,t))}}function $7({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function Hxe({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function qxe({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function Wxe(e){return e!==null&&typeof e=="object"?e.valueOf():e}function $at(e){return e}function Mat(e,t,...n){return Lat(e,$at,t,n)}function Lat(e,t,n,r){return function i(s,o){if(o>=r.length)return n(s);const a=new O7,u=r[o++];let l=-1;for(const c of s){const f=u(c,++l,s),d=a.get(f);d?d.push(c):a.set(f,[c])}for(const[c,f]of a)a.set(c,i(f,o));return t(a)}(e,0)}function Fat(e,t){return Array.from(t,n=>e[n])}function jat(e=im){if(e===im)return Gxe;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const r=e(t,n);return r||r===0?r:(e(n,n)===0)-(e(t,t)===0)}}function Gxe(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const Bat=Math.sqrt(50),Uat=Math.sqrt(10),zat=Math.sqrt(2);function f3(e,t,n){const r=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(r)),s=r/Math.pow(10,i),o=s>=Bat?10:s>=Uat?5:s>=zat?2:1;let a,u,l;return i<0?(l=Math.pow(10,-i)/o,a=Math.round(e*l),u=Math.round(t*l),a/l<e&&++a,u/l>t&&--u,l=-l):(l=Math.pow(10,i)*o,a=Math.round(e/l),u=Math.round(t/l),a*l<e&&++a,u*l>t&&--u),u<a&&.5<=n&&n<2?f3(e,t,n*2):[a,u,l]}function M7(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const r=t<e,[i,s,o]=r?f3(t,e,n):f3(e,t,n);if(!(s>=i))return[];const a=s-i+1,u=new Array(a);if(r)if(o<0)for(let l=0;l<a;++l)u[l]=(s-l)/-o;else for(let l=0;l<a;++l)u[l]=(s-l)*o;else if(o<0)for(let l=0;l<a;++l)u[l]=(i+l)/-o;else for(let l=0;l<a;++l)u[l]=(i+l)*o;return u}function L7(e,t,n){return t=+t,e=+e,n=+n,f3(e,t,n)[2]}function q0(e,t,n){t=+t,e=+e,n=+n;const r=t<e,i=r?L7(t,e,n):L7(e,t,n);return(r?-1:1)*(i<0?1/-i:i)}function lh(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function d3(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n>i||n===void 0&&i>=i)&&(n=i)}return n}function Yxe(e,t,n=0,r=1/0,i){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(e.length-1,r)),!(n<=t&&t<=r))return e;for(i=i===void 0?Gxe:jat(i);r>n;){if(r-n>600){const u=r-n+1,l=t-n+1,c=Math.log(u),f=.5*Math.exp(2*c/3),d=.5*Math.sqrt(c*f*(u-f)/u)*(l-u/2<0?-1:1),h=Math.max(n,Math.floor(t-l*f/u+d)),p=Math.min(r,Math.floor(t+(u-l)*f/u+d));Yxe(e,t,h,p,i)}const s=e[t];let o=n,a=r;for(IT(e,n,t),i(e[r],s)>0&&IT(e,n,r);o<a;){for(IT(e,o,a),++o,--a;i(e[o],s)<0;)++o;for(;i(e[a],s)>0;)--a}i(e[n],s)===0?IT(e,n,a):(++a,IT(e,a,r)),a<=t&&(n=a+1),t<=a&&(r=a-1)}return e}function IT(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function jA(e,t,n){if(e=Float64Array.from(Nat(e,n)),!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return d3(e);if(t>=1)return lh(e);var r,i=(r-1)*t,s=Math.floor(i),o=lh(Yxe(e,s).subarray(0,s+1)),a=d3(e.subarray(s+1));return o+(a-o)*(i-s)}}function Kxe(e,t,n=zxe){if(!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,s=Math.floor(i),o=+n(e[s],s,e),a=+n(e[s+1],s+1,e);return o+(a-o)*(i-s)}}function Xxe(e,t){let n=0,r=0;if(t===void 0)for(let i of e)i!=null&&(i=+i)>=i&&(++n,r+=i);else{let i=-1;for(let s of e)(s=t(s,++i,e))!=null&&(s=+s)>=s&&(++n,r+=s)}if(n)return r/n}function Qxe(e,t){return jA(e,.5,t)}function*Vat(e){for(const t of e)yield*t}function Jxe(e){return Array.from(Vat(e))}function $u(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((t-e)/n))|0,s=new Array(i);++r<i;)s[r]=e+r*n;return s}function Zxe(e,t){let n=0;for(let r of e)(r=+r)&&(n+=r);return n}function Hat(e,...t){e=new c3(e),t=t.map(qat);e:for(const n of e)for(const r of t)if(!r.has(n)){e.delete(n);continue e}return e}function qat(e){return e instanceof c3?e:new c3(e)}function Wat(...e){const t=new c3;for(const n of e)for(const r of n)t.add(r);return t}function Gat(e){return e}var l8=1,c8=2,F7=3,w2=4,Vue=1e-6;function Yat(e){return"translate("+e+",0)"}function Kat(e){return"translate(0,"+e+")"}function Xat(e){return t=>+e(t)}function Qat(e,t){return t=Math.max(0,e.bandwidth()-t*2)/2,e.round()&&(t=Math.round(t)),n=>+e(n)+t}function Jat(){return!this.__axis}function eSe(e,t){var n=[],r=null,i=null,s=6,o=6,a=3,u=typeof window<"u"&&window.devicePixelRatio>1?0:.5,l=e===l8||e===w2?-1:1,c=e===w2||e===c8?"x":"y",f=e===l8||e===F7?Yat:Kat;function d(h){var p=r??(t.ticks?t.ticks.apply(t,n):t.domain()),m=i??(t.tickFormat?t.tickFormat.apply(t,n):Gat),g=Math.max(s,0)+a,y=t.range(),v=+y[0]+u,b=+y[y.length-1]+u,w=(t.bandwidth?Qat:Xat)(t.copy(),u),E=h.selection?h.selection():h,T=E.selectAll(".domain").data([null]),S=E.selectAll(".tick").data(p,t).order(),C=S.exit(),A=S.enter().append("g").attr("class","tick"),k=S.select("line"),N=S.select("text");T=T.merge(T.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),S=S.merge(A),k=k.merge(A.append("line").attr("stroke","currentColor").attr(c+"2",l*s)),N=N.merge(A.append("text").attr("fill","currentColor").attr(c,l*g).attr("dy",e===l8?"0em":e===F7?"0.71em":"0.32em")),h!==E&&(T=T.transition(h),S=S.transition(h),k=k.transition(h),N=N.transition(h),C=C.transition(h).attr("opacity",Vue).attr("transform",function(O){return isFinite(O=w(O))?f(O+u):this.getAttribute("transform")}),A.attr("opacity",Vue).attr("transform",function(O){var P=this.parentNode.__axis;return f((P&&isFinite(P=P(O))?P:w(O))+u)})),C.remove(),T.attr("d",e===w2||e===c8?o?"M"+l*o+","+v+"H"+u+"V"+b+"H"+l*o:"M"+u+","+v+"V"+b:o?"M"+v+","+l*o+"V"+u+"H"+b+"V"+l*o:"M"+v+","+u+"H"+b),S.attr("opacity",1).attr("transform",function(O){return f(w(O)+u)}),k.attr(c+"2",l*s),N.attr(c,l*g).text(m),E.filter(Jat).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",e===c8?"start":e===w2?"end":"middle"),E.each(function(){this.__axis=w})}return d.scale=function(h){return arguments.length?(t=h,d):t},d.ticks=function(){return n=Array.from(arguments),d},d.tickArguments=function(h){return arguments.length?(n=h==null?[]:Array.from(h),d):n.slice()},d.tickValues=function(h){return arguments.length?(r=h==null?null:Array.from(h),d):r&&r.slice()},d.tickFormat=function(h){return arguments.length?(i=h,d):i},d.tickSize=function(h){return arguments.length?(s=o=+h,d):s},d.tickSizeInner=function(h){return arguments.length?(s=+h,d):s},d.tickSizeOuter=function(h){return arguments.length?(o=+h,d):o},d.tickPadding=function(h){return arguments.length?(a=+h,d):a},d.offset=function(h){return arguments.length?(u=+h,d):u},d}function Zat(e){return eSe(F7,e)}function eut(e){return eSe(w2,e)}var tut={value:()=>{}};function b6(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new yP(n)}function yP(e){this._=e}function nut(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}yP.prototype=b6.prototype={constructor:yP,on:function(e,t){var n=this._,r=nut(e+"",n),i,s=-1,o=r.length;if(arguments.length<2){for(;++s<o;)if((i=(e=r[s]).type)&&(i=rut(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++s<o;)if(i=(e=r[s]).type)n[i]=Hue(n[i],e.name,t);else if(t==null)for(i in n)n[i]=Hue(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new yP(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,s;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(s=this._[e],r=0,i=s.length;r<i;++r)s[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,s=r.length;i<s;++i)r[i].value.apply(t,n)}};function rut(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function Hue(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=tut,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var j7="http://www.w3.org/1999/xhtml";const que={svg:"http://www.w3.org/2000/svg",xhtml:j7,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function _6(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),que.hasOwnProperty(t)?{space:que[t],local:e}:e}function iut(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===j7&&t.documentElement.namespaceURI===j7?t.createElement(e):t.createElementNS(n,e)}}function sut(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function tSe(e){var t=_6(e);return(t.local?sut:iut)(t)}function out(){}function fK(e){return e==null?out:function(){return this.querySelector(e)}}function aut(e){typeof e!="function"&&(e=fK(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,a=r[i]=new Array(o),u,l,c=0;c<o;++c)(u=s[c])&&(l=e.call(u,u.__data__,c,s))&&("__data__"in u&&(l.__data__=u.__data__),a[c]=l);return new Ja(r,this._parents)}function nSe(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function uut(){return[]}function rSe(e){return e==null?uut:function(){return this.querySelectorAll(e)}}function lut(e){return function(){return nSe(e.apply(this,arguments))}}function cut(e){typeof e=="function"?e=lut(e):e=rSe(e);for(var t=this._groups,n=t.length,r=[],i=[],s=0;s<n;++s)for(var o=t[s],a=o.length,u,l=0;l<a;++l)(u=o[l])&&(r.push(e.call(u,u.__data__,l,o)),i.push(u));return new Ja(r,i)}function iSe(e){return function(){return this.matches(e)}}function sSe(e){return function(t){return t.matches(e)}}var fut=Array.prototype.find;function dut(e){return function(){return fut.call(this.children,e)}}function hut(){return this.firstElementChild}function put(e){return this.select(e==null?hut:dut(typeof e=="function"?e:sSe(e)))}var mut=Array.prototype.filter;function gut(){return Array.from(this.children)}function yut(e){return function(){return mut.call(this.children,e)}}function vut(e){return this.selectAll(e==null?gut:yut(typeof e=="function"?e:sSe(e)))}function but(e){typeof e!="function"&&(e=iSe(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,a=r[i]=[],u,l=0;l<o;++l)(u=s[l])&&e.call(u,u.__data__,l,s)&&a.push(u);return new Ja(r,this._parents)}function oSe(e){return new Array(e.length)}function _ut(){return new Ja(this._enter||this._groups.map(oSe),this._parents)}function h3(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}h3.prototype={constructor:h3,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function wut(e){return function(){return e}}function Eut(e,t,n,r,i,s){for(var o=0,a,u=t.length,l=s.length;o<l;++o)(a=t[o])?(a.__data__=s[o],r[o]=a):n[o]=new h3(e,s[o]);for(;o<u;++o)(a=t[o])&&(i[o]=a)}function xut(e,t,n,r,i,s,o){var a,u,l=new Map,c=t.length,f=s.length,d=new Array(c),h;for(a=0;a<c;++a)(u=t[a])&&(d[a]=h=o.call(u,u.__data__,a,t)+"",l.has(h)?i[a]=u:l.set(h,u));for(a=0;a<f;++a)h=o.call(e,s[a],a,s)+"",(u=l.get(h))?(r[a]=u,u.__data__=s[a],l.delete(h)):n[a]=new h3(e,s[a]);for(a=0;a<c;++a)(u=t[a])&&l.get(d[a])===u&&(i[a]=u)}function Sut(e){return e.__data__}function Tut(e,t){if(!arguments.length)return Array.from(this,Sut);var n=t?xut:Eut,r=this._parents,i=this._groups;typeof e!="function"&&(e=wut(e));for(var s=i.length,o=new Array(s),a=new Array(s),u=new Array(s),l=0;l<s;++l){var c=r[l],f=i[l],d=f.length,h=Cut(e.call(c,c&&c.__data__,l,r)),p=h.length,m=a[l]=new Array(p),g=o[l]=new Array(p),y=u[l]=new Array(d);n(c,f,m,g,y,h,t);for(var v=0,b=0,w,E;v<p;++v)if(w=m[v]){for(v>=b&&(b=v+1);!(E=g[b])&&++b<p;);w._next=E||null}}return o=new Ja(o,r),o._enter=a,o._exit=u,o}function Cut(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Aut(){return new Ja(this._exit||this._groups.map(oSe),this._parents)}function Iut(e,t,n){var r=this.enter(),i=this,s=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),n==null?s.remove():n(s),r&&i?r.merge(i).order():i}function kut(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,i=n.length,s=r.length,o=Math.min(i,s),a=new Array(i),u=0;u<o;++u)for(var l=n[u],c=r[u],f=l.length,d=a[u]=new Array(f),h,p=0;p<f;++p)(h=l[p]||c[p])&&(d[p]=h);for(;u<i;++u)a[u]=n[u];return new Ja(a,this._parents)}function Rut(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],i=r.length-1,s=r[i],o;--i>=0;)(o=r[i])&&(s&&o.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(o,s),s=o);return this}function Nut(e){e||(e=Dut);function t(f,d){return f&&d?e(f.__data__,d.__data__):!f-!d}for(var n=this._groups,r=n.length,i=new Array(r),s=0;s<r;++s){for(var o=n[s],a=o.length,u=i[s]=new Array(a),l,c=0;c<a;++c)(l=o[c])&&(u[c]=l);u.sort(t)}return new Ja(i,this._parents).order()}function Dut(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function Put(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function Out(){return Array.from(this)}function $ut(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,s=r.length;i<s;++i){var o=r[i];if(o)return o}return null}function Mut(){let e=0;for(const t of this)++e;return e}function Lut(){return!this.node()}function Fut(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i=t[n],s=0,o=i.length,a;s<o;++s)(a=i[s])&&e.call(a,a.__data__,s,i);return this}function jut(e){return function(){this.removeAttribute(e)}}function But(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Uut(e,t){return function(){this.setAttribute(e,t)}}function zut(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function Vut(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function Hut(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function qut(e,t){var n=_6(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?But:jut:typeof t=="function"?n.local?Hut:Vut:n.local?zut:Uut)(n,t))}function aSe(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function Wut(e){return function(){this.style.removeProperty(e)}}function Gut(e,t,n){return function(){this.style.setProperty(e,t,n)}}function Yut(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function Kut(e,t,n){return arguments.length>1?this.each((t==null?Wut:typeof t=="function"?Yut:Gut)(e,t,n??"")):zE(this.node(),e)}function zE(e,t){return e.style.getPropertyValue(t)||aSe(e).getComputedStyle(e,null).getPropertyValue(t)}function Xut(e){return function(){delete this[e]}}function Qut(e,t){return function(){this[e]=t}}function Jut(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function Zut(e,t){return arguments.length>1?this.each((t==null?Xut:typeof t=="function"?Jut:Qut)(e,t)):this.node()[e]}function uSe(e){return e.trim().split(/^|\s+/)}function dK(e){return e.classList||new lSe(e)}function lSe(e){this._node=e,this._names=uSe(e.getAttribute("class")||"")}lSe.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function cSe(e,t){for(var n=dK(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function fSe(e,t){for(var n=dK(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function elt(e){return function(){cSe(this,e)}}function tlt(e){return function(){fSe(this,e)}}function nlt(e,t){return function(){(t.apply(this,arguments)?cSe:fSe)(this,e)}}function rlt(e,t){var n=uSe(e+"");if(arguments.length<2){for(var r=dK(this.node()),i=-1,s=n.length;++i<s;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?nlt:t?elt:tlt)(n,t))}function ilt(){this.textContent=""}function slt(e){return function(){this.textContent=e}}function olt(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function alt(e){return arguments.length?this.each(e==null?ilt:(typeof e=="function"?olt:slt)(e)):this.node().textContent}function ult(){this.innerHTML=""}function llt(e){return function(){this.innerHTML=e}}function clt(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function flt(e){return arguments.length?this.each(e==null?ult:(typeof e=="function"?clt:llt)(e)):this.node().innerHTML}function dlt(){this.nextSibling&&this.parentNode.appendChild(this)}function hlt(){return this.each(dlt)}function plt(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function mlt(){return this.each(plt)}function glt(e){var t=typeof e=="function"?e:tSe(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function ylt(){return null}function vlt(e,t){var n=typeof e=="function"?e:tSe(e),r=t==null?ylt:typeof t=="function"?t:fK(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function blt(){var e=this.parentNode;e&&e.removeChild(this)}function _lt(){return this.each(blt)}function wlt(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Elt(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function xlt(e){return this.select(e?Elt:wlt)}function Slt(e){return arguments.length?this.property("__data__",e):this.node().__data__}function Tlt(e){return function(t){e.call(this,t,this.__data__)}}function Clt(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function Alt(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,i=t.length,s;n<i;++n)s=t[n],(!e.type||s.type===e.type)&&s.name===e.name?this.removeEventListener(s.type,s.listener,s.options):t[++r]=s;++r?t.length=r:delete this.__on}}}function Ilt(e,t,n){return function(){var r=this.__on,i,s=Tlt(t);if(r){for(var o=0,a=r.length;o<a;++o)if((i=r[o]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=s,i.options=n),i.value=t;return}}this.addEventListener(e.type,s,n),i={type:e.type,name:e.name,value:t,listener:s,options:n},r?r.push(i):this.__on=[i]}}function klt(e,t,n){var r=Clt(e+""),i,s=r.length,o;if(arguments.length<2){var a=this.node().__on;if(a){for(var u=0,l=a.length,c;u<l;++u)for(i=0,c=a[u];i<s;++i)if((o=r[i]).type===c.type&&o.name===c.name)return c.value}return}for(a=t?Ilt:Alt,i=0;i<s;++i)this.each(a(r[i],t,n));return this}function dSe(e,t,n){var r=aSe(e),i=r.CustomEvent;typeof i=="function"?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function Rlt(e,t){return function(){return dSe(this,e,t)}}function Nlt(e,t){return function(){return dSe(this,e,t.apply(this,arguments))}}function Dlt(e,t){return this.each((typeof t=="function"?Nlt:Rlt)(e,t))}function*Plt(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,s=r.length,o;i<s;++i)(o=r[i])&&(yield o)}var hK=[null];function Ja(e,t){this._groups=e,this._parents=t}function xk(){return new Ja([[document.documentElement]],hK)}function Olt(){return this}Ja.prototype=xk.prototype={constructor:Ja,select:aut,selectAll:cut,selectChild:put,selectChildren:vut,filter:but,data:Tut,enter:_ut,exit:Aut,join:Iut,merge:kut,selection:Olt,order:Rut,sort:Nut,call:Put,nodes:Out,node:$ut,size:Mut,empty:Lut,each:Fut,attr:qut,style:Kut,property:Zut,classed:rlt,text:alt,html:flt,raise:hlt,lower:mlt,append:glt,insert:vlt,remove:_lt,clone:xlt,datum:Slt,on:klt,dispatch:Dlt,[Symbol.iterator]:Plt};function rs(e){return typeof e=="string"?new Ja([[document.querySelector(e)]],[document.documentElement]):new Ja([[e]],hK)}function $lt(e){let t;for(;t=e.sourceEvent;)e=t;return e}function B7(e,t){if(e=$lt(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}function Mlt(e){return typeof e=="string"?new Ja([document.querySelectorAll(e)],[document.documentElement]):new Ja([nSe(e)],hK)}const U7={capture:!0,passive:!1};function z7(e){e.preventDefault(),e.stopImmediatePropagation()}function Llt(e){var t=e.document.documentElement,n=rs(e).on("dragstart.drag",z7,U7);"onselectstart"in t?n.on("selectstart.drag",z7,U7):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function Flt(e,t){var n=e.document.documentElement,r=rs(e).on("dragstart.drag",null);t&&(r.on("click.drag",z7,U7),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}function pS(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Sk(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Ly(){}var q1=.7,VE=1/q1,Jw="\\s*([+-]?\\d+)\\s*",BA="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ch="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",jlt=/^#([0-9a-f]{3,8})$/,Blt=new RegExp(`^rgb\\(${Jw},${Jw},${Jw}\\)$`),Ult=new RegExp(`^rgb\\(${ch},${ch},${ch}\\)$`),zlt=new RegExp(`^rgba\\(${Jw},${Jw},${Jw},${BA}\\)$`),Vlt=new RegExp(`^rgba\\(${ch},${ch},${ch},${BA}\\)$`),Hlt=new RegExp(`^hsl\\(${BA},${ch},${ch}\\)$`),qlt=new RegExp(`^hsla\\(${BA},${ch},${ch},${BA}\\)$`),Wue={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};pS(Ly,W1,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Gue,formatHex:Gue,formatHex8:Wlt,formatHsl:Glt,formatRgb:Yue,toString:Yue});function Gue(){return this.rgb().formatHex()}function Wlt(){return this.rgb().formatHex8()}function Glt(){return hSe(this).formatHsl()}function Yue(){return this.rgb().formatRgb()}function W1(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=jlt.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?Kue(t):n===3?new no(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?FN(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?FN(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=Blt.exec(e))?new no(t[1],t[2],t[3],1):(t=Ult.exec(e))?new no(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=zlt.exec(e))?FN(t[1],t[2],t[3],t[4]):(t=Vlt.exec(e))?FN(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=Hlt.exec(e))?Jue(t[1],t[2]/100,t[3]/100,1):(t=qlt.exec(e))?Jue(t[1],t[2]/100,t[3]/100,t[4]):Wue.hasOwnProperty(e)?Kue(Wue[e]):e==="transparent"?new no(NaN,NaN,NaN,0):null}function Kue(e){return new no(e>>16&255,e>>8&255,e&255,1)}function FN(e,t,n,r){return r<=0&&(e=t=n=NaN),new no(e,t,n,r)}function pK(e){return e instanceof Ly||(e=W1(e)),e?(e=e.rgb(),new no(e.r,e.g,e.b,e.opacity)):new no}function W0(e,t,n,r){return arguments.length===1?pK(e):new no(e,t,n,r??1)}function no(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}pS(no,W0,Sk(Ly,{brighter(e){return e=e==null?VE:Math.pow(VE,e),new no(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?q1:Math.pow(q1,e),new no(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new no(S1(this.r),S1(this.g),S1(this.b),p3(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Xue,formatHex:Xue,formatHex8:Ylt,formatRgb:Que,toString:Que}));function Xue(){return`#${o1(this.r)}${o1(this.g)}${o1(this.b)}`}function Ylt(){return`#${o1(this.r)}${o1(this.g)}${o1(this.b)}${o1((isNaN(this.opacity)?1:this.opacity)*255)}`}function Que(){const e=p3(this.opacity);return`${e===1?"rgb(":"rgba("}${S1(this.r)}, ${S1(this.g)}, ${S1(this.b)}${e===1?")":`, ${e})`}`}function p3(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function S1(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function o1(e){return e=S1(e),(e<16?"0":"")+e.toString(16)}function Jue(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new xf(e,t,n,r)}function hSe(e){if(e instanceof xf)return new xf(e.h,e.s,e.l,e.opacity);if(e instanceof Ly||(e=W1(e)),!e)return new xf;if(e instanceof xf)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),s=Math.max(t,n,r),o=NaN,a=s-i,u=(s+i)/2;return a?(t===s?o=(n-r)/a+(n<r)*6:n===s?o=(r-t)/a+2:o=(t-n)/a+4,a/=u<.5?s+i:2-s-i,o*=60):a=u>0&&u<1?0:o,new xf(o,a,u,e.opacity)}function m3(e,t,n,r){return arguments.length===1?hSe(e):new xf(e,t,n,r??1)}function xf(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}pS(xf,m3,Sk(Ly,{brighter(e){return e=e==null?VE:Math.pow(VE,e),new xf(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?q1:Math.pow(q1,e),new xf(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new no(f8(e>=240?e-240:e+120,i,r),f8(e,i,r),f8(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new xf(Zue(this.h),jN(this.s),jN(this.l),p3(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=p3(this.opacity);return`${e===1?"hsl(":"hsla("}${Zue(this.h)}, ${jN(this.s)*100}%, ${jN(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Zue(e){return e=(e||0)%360,e<0?e+360:e}function jN(e){return Math.max(0,Math.min(1,e||0))}function f8(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const pSe=Math.PI/180,mSe=180/Math.PI,g3=18,gSe=.96422,ySe=1,vSe=.82521,bSe=4/29,Zw=6/29,_Se=3*Zw*Zw,Klt=Zw*Zw*Zw;function wSe(e){if(e instanceof fh)return new fh(e.l,e.a,e.b,e.opacity);if(e instanceof Gp)return ESe(e);e instanceof no||(e=pK(e));var t=m8(e.r),n=m8(e.g),r=m8(e.b),i=d8((.2225045*t+.7168786*n+.0606169*r)/ySe),s,o;return t===n&&n===r?s=o=i:(s=d8((.4360747*t+.3850649*n+.1430804*r)/gSe),o=d8((.0139322*t+.0971045*n+.7141733*r)/vSe)),new fh(116*i-16,500*(s-i),200*(i-o),e.opacity)}function y3(e,t,n,r){return arguments.length===1?wSe(e):new fh(e,t,n,r??1)}function fh(e,t,n,r){this.l=+e,this.a=+t,this.b=+n,this.opacity=+r}pS(fh,y3,Sk(Ly,{brighter(e){return new fh(this.l+g3*(e??1),this.a,this.b,this.opacity)},darker(e){return new fh(this.l-g3*(e??1),this.a,this.b,this.opacity)},rgb(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return t=gSe*h8(t),e=ySe*h8(e),n=vSe*h8(n),new no(p8(3.1338561*t-1.6168667*e-.4906146*n),p8(-.9787684*t+1.9161415*e+.033454*n),p8(.0719453*t-.2289914*e+1.4052427*n),this.opacity)}}));function d8(e){return e>Klt?Math.pow(e,1/3):e/_Se+bSe}function h8(e){return e>Zw?e*e*e:_Se*(e-bSe)}function p8(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function m8(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function Xlt(e){if(e instanceof Gp)return new Gp(e.h,e.c,e.l,e.opacity);if(e instanceof fh||(e=wSe(e)),e.a===0&&e.b===0)return new Gp(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*mSe;return new Gp(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function v3(e,t,n,r){return arguments.length===1?Xlt(e):new Gp(e,t,n,r??1)}function Gp(e,t,n,r){this.h=+e,this.c=+t,this.l=+n,this.opacity=+r}function ESe(e){if(isNaN(e.h))return new fh(e.l,0,0,e.opacity);var t=e.h*pSe;return new fh(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}pS(Gp,v3,Sk(Ly,{brighter(e){return new Gp(this.h,this.c,this.l+g3*(e??1),this.opacity)},darker(e){return new Gp(this.h,this.c,this.l-g3*(e??1),this.opacity)},rgb(){return ESe(this).rgb()}}));var xSe=-.14861,mK=1.78277,gK=-.29227,w6=-.90649,UA=1.97294,ele=UA*w6,tle=UA*mK,nle=mK*gK-w6*xSe;function Qlt(e){if(e instanceof T1)return new T1(e.h,e.s,e.l,e.opacity);e instanceof no||(e=pK(e));var t=e.r/255,n=e.g/255,r=e.b/255,i=(nle*r+ele*t-tle*n)/(nle+ele-tle),s=r-i,o=(UA*(n-i)-gK*s)/w6,a=Math.sqrt(o*o+s*s)/(UA*i*(1-i)),u=a?Math.atan2(o,s)*mSe-120:NaN;return new T1(u<0?u+360:u,a,i,e.opacity)}function V7(e,t,n,r){return arguments.length===1?Qlt(e):new T1(e,t,n,r??1)}function T1(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}pS(T1,V7,Sk(Ly,{brighter(e){return e=e==null?VE:Math.pow(VE,e),new T1(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?q1:Math.pow(q1,e),new T1(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=isNaN(this.h)?0:(this.h+120)*pSe,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),r=Math.cos(e),i=Math.sin(e);return new no(255*(t+n*(xSe*r+mK*i)),255*(t+n*(gK*r+w6*i)),255*(t+n*(UA*r)),this.opacity)}}));function SSe(e,t,n,r,i){var s=e*e,o=s*e;return((1-3*e+3*s-o)*t+(4-6*s+3*o)*n+(1+3*e+3*s-3*o)*r+o*i)/6}function TSe(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),i=e[r],s=e[r+1],o=r>0?e[r-1]:2*i-s,a=r<t-1?e[r+2]:2*s-i;return SSe((n-r/t)*t,o,i,s,a)}}function CSe(e){var t=e.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*t),i=e[(r+t-1)%t],s=e[r%t],o=e[(r+1)%t],a=e[(r+2)%t];return SSe((n-r/t)*t,i,s,o,a)}}const E6=e=>()=>e;function ASe(e,t){return function(n){return e+n*t}}function Jlt(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function x6(e,t){var n=t-e;return n?ASe(e,n>180||n<-180?n-360*Math.round(n/360):n):E6(isNaN(e)?t:e)}function Zlt(e){return(e=+e)==1?ro:function(t,n){return n-t?Jlt(t,n,e):E6(isNaN(t)?n:t)}}function ro(e,t){var n=t-e;return n?ASe(e,n):E6(isNaN(e)?t:e)}const zA=function e(t){var n=Zlt(t);function r(i,s){var o=n((i=W0(i)).r,(s=W0(s)).r),a=n(i.g,s.g),u=n(i.b,s.b),l=ro(i.opacity,s.opacity);return function(c){return i.r=o(c),i.g=a(c),i.b=u(c),i.opacity=l(c),i+""}}return r.gamma=e,r}(1);function ISe(e){return function(t){var n=t.length,r=new Array(n),i=new Array(n),s=new Array(n),o,a;for(o=0;o<n;++o)a=W0(t[o]),r[o]=a.r||0,i[o]=a.g||0,s[o]=a.b||0;return r=e(r),i=e(i),s=e(s),a.opacity=1,function(u){return a.r=r(u),a.g=i(u),a.b=s(u),a+""}}}var ect=ISe(TSe),tct=ISe(CSe);function yK(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(s){for(i=0;i<n;++i)r[i]=e[i]*(1-s)+t[i]*s;return r}}function kSe(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function nct(e,t){return(kSe(t)?yK:RSe)(e,t)}function RSe(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),s=new Array(n),o;for(o=0;o<r;++o)i[o]=Zm(e[o],t[o]);for(;o<n;++o)s[o]=t[o];return function(a){for(o=0;o<r;++o)s[o]=i[o](a);return s}}function NSe(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function gc(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function DSe(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=Zm(e[i],t[i]):r[i]=t[i];return function(s){for(i in n)r[i]=n[i](s);return r}}var H7=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,g8=new RegExp(H7.source,"g");function rct(e){return function(){return e}}function ict(e){return function(t){return e(t)+""}}function vK(e,t){var n=H7.lastIndex=g8.lastIndex=0,r,i,s,o=-1,a=[],u=[];for(e=e+"",t=t+"";(r=H7.exec(e))&&(i=g8.exec(t));)(s=i.index)>n&&(s=t.slice(n,s),a[o]?a[o]+=s:a[++o]=s),(r=r[0])===(i=i[0])?a[o]?a[o]+=i:a[++o]=i:(a[++o]=null,u.push({i:o,x:gc(r,i)})),n=g8.lastIndex;return n<t.length&&(s=t.slice(n),a[o]?a[o]+=s:a[++o]=s),a.length<2?u[0]?ict(u[0].x):rct(t):(t=u.length,function(l){for(var c=0,f;c<t;++c)a[(f=u[c]).i]=f.x(l);return a.join("")})}function Zm(e,t){var n=typeof t,r;return t==null||n==="boolean"?E6(t):(n==="number"?gc:n==="string"?(r=W1(t))?(t=r,zA):vK:t instanceof W1?zA:t instanceof Date?NSe:kSe(t)?yK:Array.isArray(t)?RSe:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?DSe:gc)(e,t)}function sct(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}}function oct(e,t){var n=x6(+e,+t);return function(r){var i=n(r);return i-360*Math.floor(i/360)}}function Tk(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var rle=180/Math.PI,q7={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function PSe(e,t,n,r,i,s){var o,a,u;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(u=e*n+t*r)&&(n-=e*u,r-=t*u),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,u/=a),e*r<t*n&&(e=-e,t=-t,u=-u,o=-o),{translateX:i,translateY:s,rotate:Math.atan2(t,e)*rle,skewX:Math.atan(u)*rle,scaleX:o,scaleY:a}}var BN;function act(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?q7:PSe(t.a,t.b,t.c,t.d,t.e,t.f)}function uct(e){return e==null||(BN||(BN=document.createElementNS("http://www.w3.org/2000/svg","g")),BN.setAttribute("transform",e),!(e=BN.transform.baseVal.consolidate()))?q7:(e=e.matrix,PSe(e.a,e.b,e.c,e.d,e.e,e.f))}function OSe(e,t,n,r){function i(l){return l.length?l.pop()+" ":""}function s(l,c,f,d,h,p){if(l!==f||c!==d){var m=h.push("translate(",null,t,null,n);p.push({i:m-4,x:gc(l,f)},{i:m-2,x:gc(c,d)})}else(f||d)&&h.push("translate("+f+t+d+n)}function o(l,c,f,d){l!==c?(l-c>180?c+=360:c-l>180&&(l+=360),d.push({i:f.push(i(f)+"rotate(",null,r)-2,x:gc(l,c)})):c&&f.push(i(f)+"rotate("+c+r)}function a(l,c,f,d){l!==c?d.push({i:f.push(i(f)+"skewX(",null,r)-2,x:gc(l,c)}):c&&f.push(i(f)+"skewX("+c+r)}function u(l,c,f,d,h,p){if(l!==f||c!==d){var m=h.push(i(h)+"scale(",null,",",null,")");p.push({i:m-4,x:gc(l,f)},{i:m-2,x:gc(c,d)})}else(f!==1||d!==1)&&h.push(i(h)+"scale("+f+","+d+")")}return function(l,c){var f=[],d=[];return l=e(l),c=e(c),s(l.translateX,l.translateY,c.translateX,c.translateY,f,d),o(l.rotate,c.rotate,f,d),a(l.skewX,c.skewX,f,d),u(l.scaleX,l.scaleY,c.scaleX,c.scaleY,f,d),l=c=null,function(h){for(var p=-1,m=d.length,g;++p<m;)f[(g=d[p]).i]=g.x(h);return f.join("")}}}var $Se=OSe(act,"px, ","px)","deg)"),MSe=OSe(uct,", ",")",")"),lct=1e-12;function ile(e){return((e=Math.exp(e))+1/e)/2}function cct(e){return((e=Math.exp(e))-1/e)/2}function fct(e){return((e=Math.exp(2*e))-1)/(e+1)}const dct=function e(t,n,r){function i(s,o){var a=s[0],u=s[1],l=s[2],c=o[0],f=o[1],d=o[2],h=c-a,p=f-u,m=h*h+p*p,g,y;if(m<lct)y=Math.log(d/l)/t,g=function(S){return[a+S*h,u+S*p,l*Math.exp(t*S*y)]};else{var v=Math.sqrt(m),b=(d*d-l*l+r*m)/(2*l*n*v),w=(d*d-l*l-r*m)/(2*d*n*v),E=Math.log(Math.sqrt(b*b+1)-b),T=Math.log(Math.sqrt(w*w+1)-w);y=(T-E)/t,g=function(S){var C=S*y,A=ile(E),k=l/(n*v)*(A*fct(t*C+E)-cct(E));return[a+k*h,u+k*p,l*A/ile(t*C+E)]}}return g.duration=y*1e3*t/Math.SQRT2,g}return i.rho=function(s){var o=Math.max(.001,+s),a=o*o,u=a*a;return e(o,a,u)},i}(Math.SQRT2,2,4);function LSe(e){return function(t,n){var r=e((t=m3(t)).h,(n=m3(n)).h),i=ro(t.s,n.s),s=ro(t.l,n.l),o=ro(t.opacity,n.opacity);return function(a){return t.h=r(a),t.s=i(a),t.l=s(a),t.opacity=o(a),t+""}}}const hct=LSe(x6);var pct=LSe(ro);function mct(e,t){var n=ro((e=y3(e)).l,(t=y3(t)).l),r=ro(e.a,t.a),i=ro(e.b,t.b),s=ro(e.opacity,t.opacity);return function(o){return e.l=n(o),e.a=r(o),e.b=i(o),e.opacity=s(o),e+""}}function FSe(e){return function(t,n){var r=e((t=v3(t)).h,(n=v3(n)).h),i=ro(t.c,n.c),s=ro(t.l,n.l),o=ro(t.opacity,n.opacity);return function(a){return t.h=r(a),t.c=i(a),t.l=s(a),t.opacity=o(a),t+""}}}const gct=FSe(x6);var yct=FSe(ro);function jSe(e){return function t(n){n=+n;function r(i,s){var o=e((i=V7(i)).h,(s=V7(s)).h),a=ro(i.s,s.s),u=ro(i.l,s.l),l=ro(i.opacity,s.opacity);return function(c){return i.h=o(c),i.s=a(c),i.l=u(Math.pow(c,n)),i.opacity=l(c),i+""}}return r.gamma=t,r}(1)}const vct=jSe(x6);var bct=jSe(ro);function bK(e,t){t===void 0&&(t=e,e=Zm);for(var n=0,r=t.length-1,i=t[0],s=new Array(r<0?0:r);n<r;)s[n]=e(i,i=t[++n]);return function(o){var a=Math.max(0,Math.min(r-1,Math.floor(o*=r)));return s[a](o-a)}}function _ct(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e(r/(t-1));return n}const wct=Object.freeze(Object.defineProperty({__proto__:null,interpolate:Zm,interpolateArray:nct,interpolateBasis:TSe,interpolateBasisClosed:CSe,interpolateCubehelix:vct,interpolateCubehelixLong:bct,interpolateDate:NSe,interpolateDiscrete:sct,interpolateHcl:gct,interpolateHclLong:yct,interpolateHsl:hct,interpolateHslLong:pct,interpolateHue:oct,interpolateLab:mct,interpolateNumber:gc,interpolateNumberArray:yK,interpolateObject:DSe,interpolateRgb:zA,interpolateRgbBasis:ect,interpolateRgbBasisClosed:tct,interpolateRound:Tk,interpolateString:vK,interpolateTransformCss:$Se,interpolateTransformSvg:MSe,interpolateZoom:dct,piecewise:bK,quantize:_ct},Symbol.toStringTag,{value:"Module"}));var HE=0,E2=0,kT=0,BSe=1e3,b3,x2,_3=0,G1=0,S6=0,VA=typeof performance=="object"&&performance.now?performance:Date,USe=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function T6(){return G1||(USe(Ect),G1=VA.now()+S6)}function Ect(){G1=0}function HA(){this._call=this._time=this._next=null}HA.prototype=_K.prototype={constructor:HA,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?T6():+n)+(t==null?0:+t),!this._next&&x2!==this&&(x2?x2._next=this:b3=this,x2=this),this._call=e,this._time=n,W7()},stop:function(){this._call&&(this._call=null,this._time=1/0,W7())}};function _K(e,t,n){var r=new HA;return r.restart(e,t,n),r}function xct(){T6(),++HE;for(var e=b3,t;e;)(t=G1-e._time)>=0&&e._call.call(void 0,t),e=e._next;--HE}function sle(){G1=(_3=VA.now())+S6,HE=E2=0;try{xct()}finally{HE=0,Tct(),G1=0}}function Sct(){var e=VA.now(),t=e-_3;t>BSe&&(S6-=t,_3=e)}function Tct(){for(var e,t=b3,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:b3=n);x2=e,W7(r)}function W7(e){if(!HE){E2&&(E2=clearTimeout(E2));var t=e-G1;t>24?(e<1/0&&(E2=setTimeout(sle,e-VA.now()-S6)),kT&&(kT=clearInterval(kT))):(kT||(_3=VA.now(),kT=setInterval(Sct,BSe)),HE=1,USe(sle))}}function ole(e,t,n){var r=new HA;return t=t==null?0:+t,r.restart(i=>{r.stop(),e(i+t)},t,n),r}function Cct(e,t,n){var r=new HA,i=t;return t==null?(r.restart(e,t,n),r):(r._restart=r.restart,r.restart=function(s,o,a){o=+o,a=a==null?T6():+a,r._restart(function u(l){l+=i,r._restart(u,i+=o,a),s(l)},o,a)},r.restart(e,t,n),r)}var Act=b6("start","end","cancel","interrupt"),Ict=[],zSe=0,ale=1,G7=2,vP=3,ule=4,Y7=5,bP=6;function C6(e,t,n,r,i,s){var o=e.__transition;if(!o)e.__transition={};else if(n in o)return;kct(e,n,{name:t,index:r,group:i,on:Act,tween:Ict,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:zSe})}function wK(e,t){var n=ad(e,t);if(n.state>zSe)throw new Error("too late; already scheduled");return n}function Qh(e,t){var n=ad(e,t);if(n.state>vP)throw new Error("too late; already running");return n}function ad(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function kct(e,t,n){var r=e.__transition,i;r[t]=n,n.timer=_K(s,0,n.time);function s(l){n.state=ale,n.timer.restart(o,n.delay,n.time),n.delay<=l&&o(l-n.delay)}function o(l){var c,f,d,h;if(n.state!==ale)return u();for(c in r)if(h=r[c],h.name===n.name){if(h.state===vP)return ole(o);h.state===ule?(h.state=bP,h.timer.stop(),h.on.call("interrupt",e,e.__data__,h.index,h.group),delete r[c]):+c<t&&(h.state=bP,h.timer.stop(),h.on.call("cancel",e,e.__data__,h.index,h.group),delete r[c])}if(ole(function(){n.state===vP&&(n.state=ule,n.timer.restart(a,n.delay,n.time),a(l))}),n.state=G7,n.on.call("start",e,e.__data__,n.index,n.group),n.state===G7){for(n.state=vP,i=new Array(d=n.tween.length),c=0,f=-1;c<d;++c)(h=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(i[++f]=h);i.length=f+1}}function a(l){for(var c=l<n.duration?n.ease.call(null,l/n.duration):(n.timer.restart(u),n.state=Y7,1),f=-1,d=i.length;++f<d;)i[f].call(e,c);n.state===Y7&&(n.on.call("end",e,e.__data__,n.index,n.group),u())}function u(){n.state=bP,n.timer.stop(),delete r[t];for(var l in r)return;delete e.__transition}}function K7(e,t){var n=e.__transition,r,i,s=!0,o;if(n){t=t==null?null:t+"";for(o in n){if((r=n[o]).name!==t){s=!1;continue}i=r.state>G7&&r.state<Y7,r.state=bP,r.timer.stop(),r.on.call(i?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[o]}s&&delete e.__transition}}function Rct(e){return this.each(function(){K7(this,e)})}function Nct(e,t){var n,r;return function(){var i=Qh(this,e),s=i.tween;if(s!==n){r=n=s;for(var o=0,a=r.length;o<a;++o)if(r[o].name===t){r=r.slice(),r.splice(o,1);break}}i.tween=r}}function Dct(e,t,n){var r,i;if(typeof n!="function")throw new Error;return function(){var s=Qh(this,e),o=s.tween;if(o!==r){i=(r=o).slice();for(var a={name:t,value:n},u=0,l=i.length;u<l;++u)if(i[u].name===t){i[u]=a;break}u===l&&i.push(a)}s.tween=i}}function Pct(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=ad(this.node(),n).tween,i=0,s=r.length,o;i<s;++i)if((o=r[i]).name===e)return o.value;return null}return this.each((t==null?Nct:Dct)(n,e,t))}function EK(e,t,n){var r=e._id;return e.each(function(){var i=Qh(this,r);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return ad(i,r).value[t]}}function VSe(e,t){var n;return(typeof t=="number"?gc:t instanceof W1?zA:(n=W1(t))?(t=n,zA):vK)(e,t)}function Oct(e){return function(){this.removeAttribute(e)}}function $ct(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Mct(e,t,n){var r,i=n+"",s;return function(){var o=this.getAttribute(e);return o===i?null:o===r?s:s=t(r=o,n)}}function Lct(e,t,n){var r,i=n+"",s;return function(){var o=this.getAttributeNS(e.space,e.local);return o===i?null:o===r?s:s=t(r=o,n)}}function Fct(e,t,n){var r,i,s;return function(){var o,a=n(this),u;return a==null?void this.removeAttribute(e):(o=this.getAttribute(e),u=a+"",o===u?null:o===r&&u===i?s:(i=u,s=t(r=o,a)))}}function jct(e,t,n){var r,i,s;return function(){var o,a=n(this),u;return a==null?void this.removeAttributeNS(e.space,e.local):(o=this.getAttributeNS(e.space,e.local),u=a+"",o===u?null:o===r&&u===i?s:(i=u,s=t(r=o,a)))}}function Bct(e,t){var n=_6(e),r=n==="transform"?MSe:VSe;return this.attrTween(e,typeof t=="function"?(n.local?jct:Fct)(n,r,EK(this,"attr."+e,t)):t==null?(n.local?$ct:Oct)(n):(n.local?Lct:Mct)(n,r,t))}function Uct(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function zct(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function Vct(e,t){var n,r;function i(){var s=t.apply(this,arguments);return s!==r&&(n=(r=s)&&zct(e,s)),n}return i._value=t,i}function Hct(e,t){var n,r;function i(){var s=t.apply(this,arguments);return s!==r&&(n=(r=s)&&Uct(e,s)),n}return i._value=t,i}function qct(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=_6(e);return this.tween(n,(r.local?Vct:Hct)(r,t))}function Wct(e,t){return function(){wK(this,e).delay=+t.apply(this,arguments)}}function Gct(e,t){return t=+t,function(){wK(this,e).delay=t}}function Yct(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Wct:Gct)(t,e)):ad(this.node(),t).delay}function Kct(e,t){return function(){Qh(this,e).duration=+t.apply(this,arguments)}}function Xct(e,t){return t=+t,function(){Qh(this,e).duration=t}}function Qct(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Kct:Xct)(t,e)):ad(this.node(),t).duration}function Jct(e,t){if(typeof t!="function")throw new Error;return function(){Qh(this,e).ease=t}}function Zct(e){var t=this._id;return arguments.length?this.each(Jct(t,e)):ad(this.node(),t).ease}function eft(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;Qh(this,e).ease=n}}function tft(e){if(typeof e!="function")throw new Error;return this.each(eft(this._id,e))}function nft(e){typeof e!="function"&&(e=iSe(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,a=r[i]=[],u,l=0;l<o;++l)(u=s[l])&&e.call(u,u.__data__,l,s)&&a.push(u);return new Tm(r,this._parents,this._name,this._id)}function rft(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,s=Math.min(r,i),o=new Array(r),a=0;a<s;++a)for(var u=t[a],l=n[a],c=u.length,f=o[a]=new Array(c),d,h=0;h<c;++h)(d=u[h]||l[h])&&(f[h]=d);for(;a<r;++a)o[a]=t[a];return new Tm(o,this._parents,this._name,this._id)}function ift(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function sft(e,t,n){var r,i,s=ift(t)?wK:Qh;return function(){var o=s(this,e),a=o.on;a!==r&&(i=(r=a).copy()).on(t,n),o.on=i}}function oft(e,t){var n=this._id;return arguments.length<2?ad(this.node(),n).on.on(e):this.each(sft(n,e,t))}function aft(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function uft(){return this.on("end.remove",aft(this._id))}function lft(e){var t=this._name,n=this._id;typeof e!="function"&&(e=fK(e));for(var r=this._groups,i=r.length,s=new Array(i),o=0;o<i;++o)for(var a=r[o],u=a.length,l=s[o]=new Array(u),c,f,d=0;d<u;++d)(c=a[d])&&(f=e.call(c,c.__data__,d,a))&&("__data__"in c&&(f.__data__=c.__data__),l[d]=f,C6(l[d],t,n,d,l,ad(c,n)));return new Tm(s,this._parents,t,n)}function cft(e){var t=this._name,n=this._id;typeof e!="function"&&(e=rSe(e));for(var r=this._groups,i=r.length,s=[],o=[],a=0;a<i;++a)for(var u=r[a],l=u.length,c,f=0;f<l;++f)if(c=u[f]){for(var d=e.call(c,c.__data__,f,u),h,p=ad(c,n),m=0,g=d.length;m<g;++m)(h=d[m])&&C6(h,t,n,m,d,p);s.push(d),o.push(c)}return new Tm(s,o,t,n)}var fft=xk.prototype.constructor;function dft(){return new fft(this._groups,this._parents)}function hft(e,t){var n,r,i;return function(){var s=zE(this,e),o=(this.style.removeProperty(e),zE(this,e));return s===o?null:s===n&&o===r?i:i=t(n=s,r=o)}}function HSe(e){return function(){this.style.removeProperty(e)}}function pft(e,t,n){var r,i=n+"",s;return function(){var o=zE(this,e);return o===i?null:o===r?s:s=t(r=o,n)}}function mft(e,t,n){var r,i,s;return function(){var o=zE(this,e),a=n(this),u=a+"";return a==null&&(u=a=(this.style.removeProperty(e),zE(this,e))),o===u?null:o===r&&u===i?s:(i=u,s=t(r=o,a))}}function gft(e,t){var n,r,i,s="style."+t,o="end."+s,a;return function(){var u=Qh(this,e),l=u.on,c=u.value[s]==null?a||(a=HSe(t)):void 0;(l!==n||i!==c)&&(r=(n=l).copy()).on(o,i=c),u.on=r}}function yft(e,t,n){var r=(e+="")=="transform"?$Se:VSe;return t==null?this.styleTween(e,hft(e,r)).on("end.style."+e,HSe(e)):typeof t=="function"?this.styleTween(e,mft(e,r,EK(this,"style."+e,t))).each(gft(this._id,e)):this.styleTween(e,pft(e,r,t),n).on("end.style."+e,null)}function vft(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function bft(e,t,n){var r,i;function s(){var o=t.apply(this,arguments);return o!==i&&(r=(i=o)&&vft(e,o,n)),r}return s._value=t,s}function _ft(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,bft(e,t,n??""))}function wft(e){return function(){this.textContent=e}}function Eft(e){return function(){var t=e(this);this.textContent=t??""}}function xft(e){return this.tween("text",typeof e=="function"?Eft(EK(this,"text",e)):wft(e==null?"":e+""))}function Sft(e){return function(t){this.textContent=e.call(this,t)}}function Tft(e){var t,n;function r(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&Sft(i)),t}return r._value=e,r}function Cft(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,Tft(e))}function Aft(){for(var e=this._name,t=this._id,n=qSe(),r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],a=o.length,u,l=0;l<a;++l)if(u=o[l]){var c=ad(u,t);C6(u,e,n,l,o,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new Tm(r,this._parents,e,n)}function Ift(){var e,t,n=this,r=n._id,i=n.size();return new Promise(function(s,o){var a={value:o},u={value:function(){--i===0&&s()}};n.each(function(){var l=Qh(this,r),c=l.on;c!==e&&(t=(e=c).copy(),t._.cancel.push(a),t._.interrupt.push(a),t._.end.push(u)),l.on=t}),i===0&&s()})}var kft=0;function Tm(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function qSe(){return++kft}var bp=xk.prototype;Tm.prototype={constructor:Tm,select:lft,selectAll:cft,selectChild:bp.selectChild,selectChildren:bp.selectChildren,filter:nft,merge:rft,selection:dft,transition:Aft,call:bp.call,nodes:bp.nodes,node:bp.node,size:bp.size,empty:bp.empty,each:bp.each,on:oft,attr:Bct,attrTween:qct,style:yft,styleTween:_ft,text:xft,textTween:Cft,remove:uft,tween:Pct,delay:Yct,duration:Qct,ease:Zct,easeVarying:tft,end:Ift,[Symbol.iterator]:bp[Symbol.iterator]};const Rft=e=>+e;function Nft(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var Dft={time:null,delay:0,duration:250,ease:Nft};function Pft(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function Oft(e){var t,n;e instanceof Tm?(t=e._id,e=e._name):(t=qSe(),(n=Dft).time=T6(),e=e==null?null:e+"");for(var r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],a=o.length,u,l=0;l<a;++l)(u=o[l])&&C6(u,e,t,l,o,n||Pft(u,t));return new Tm(r,this._parents,e,t)}xk.prototype.interrupt=Rct;xk.prototype.transition=Oft;const y8=e=>()=>e;function $ft(e,{sourceEvent:t,target:n,selection:r,mode:i,dispatch:s}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},selection:{value:r,enumerable:!0,configurable:!0},mode:{value:i,enumerable:!0,configurable:!0},_:{value:s}})}function Mft(e){e.stopImmediatePropagation()}function v8(e){e.preventDefault(),e.stopImmediatePropagation()}var lle={name:"drag"},b8={name:"space"},N_={name:"handle"},D_={name:"center"};const{abs:cle,max:Xo,min:Qo}=Math;function fle(e){return[+e[0],+e[1]]}function X7(e){return[fle(e[0]),fle(e[1])]}var _P={name:"x",handles:["w","e"].map(qA),input:function(e,t){return e==null?null:[[+e[0],t[0][1]],[+e[1],t[1][1]]]},output:function(e){return e&&[e[0][0],e[1][0]]}},wP={name:"y",handles:["n","s"].map(qA),input:function(e,t){return e==null?null:[[t[0][0],+e[0]],[t[1][0],+e[1]]]},output:function(e){return e&&[e[0][1],e[1][1]]}},Lft={name:"xy",handles:["n","w","e","s","nw","ne","sw","se"].map(qA),input:function(e){return e==null?null:X7(e)},output:function(e){return e}},_p={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},dle={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},hle={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},Fft={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},jft={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function qA(e){return{type:e}}function Bft(e){return!e.ctrlKey&&!e.button}function Uft(){var e=this.ownerSVGElement||this;return e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]}function zft(){return navigator.maxTouchPoints||"ontouchstart"in this}function _8(e){for(;!e.__brush;)if(!(e=e.parentNode))return;return e.__brush}function Vft(e){return e[0][0]===e[1][0]||e[0][1]===e[1][1]}function Hft(){return xK(_P)}function qft(){return xK(wP)}function Wft(){return xK(Lft)}function xK(e){var t=Uft,n=Bft,r=zft,i=!0,s=b6("start","brush","end"),o=6,a;function u(g){var y=g.property("__brush",m).selectAll(".overlay").data([qA("overlay")]);y.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",_p.overlay).merge(y).each(function(){var b=_8(this).extent;rs(this).attr("x",b[0][0]).attr("y",b[0][1]).attr("width",b[1][0]-b[0][0]).attr("height",b[1][1]-b[0][1])}),g.selectAll(".selection").data([qA("selection")]).enter().append("rect").attr("class","selection").attr("cursor",_p.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var v=g.selectAll(".handle").data(e.handles,function(b){return b.type});v.exit().remove(),v.enter().append("rect").attr("class",function(b){return"handle handle--"+b.type}).attr("cursor",function(b){return _p[b.type]}),g.each(l).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",d).filter(r).on("touchstart.brush",d).on("touchmove.brush",h).on("touchend.brush touchcancel.brush",p).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}u.move=function(g,y,v){g.tween?g.on("start.brush",function(b){c(this,arguments).beforestart().start(b)}).on("interrupt.brush end.brush",function(b){c(this,arguments).end(b)}).tween("brush",function(){var b=this,w=b.__brush,E=c(b,arguments),T=w.selection,S=e.input(typeof y=="function"?y.apply(this,arguments):y,w.extent),C=Zm(T,S);function A(k){w.selection=k===1&&S===null?null:C(k),l.call(b),E.brush()}return T!==null&&S!==null?A:A(1)}):g.each(function(){var b=this,w=arguments,E=b.__brush,T=e.input(typeof y=="function"?y.apply(b,w):y,E.extent),S=c(b,w).beforestart();K7(b),E.selection=T===null?null:T,l.call(b),S.start(v).brush(v).end(v)})},u.clear=function(g,y){u.move(g,null,y)};function l(){var g=rs(this),y=_8(this).selection;y?(g.selectAll(".selection").style("display",null).attr("x",y[0][0]).attr("y",y[0][1]).attr("width",y[1][0]-y[0][0]).attr("height",y[1][1]-y[0][1]),g.selectAll(".handle").style("display",null).attr("x",function(v){return v.type[v.type.length-1]==="e"?y[1][0]-o/2:y[0][0]-o/2}).attr("y",function(v){return v.type[0]==="s"?y[1][1]-o/2:y[0][1]-o/2}).attr("width",function(v){return v.type==="n"||v.type==="s"?y[1][0]-y[0][0]+o:o}).attr("height",function(v){return v.type==="e"||v.type==="w"?y[1][1]-y[0][1]+o:o})):g.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function c(g,y,v){var b=g.__brush.emitter;return b&&(!v||!b.clean)?b:new f(g,y,v)}function f(g,y,v){this.that=g,this.args=y,this.state=g.__brush,this.active=0,this.clean=v}f.prototype={beforestart:function(){return++this.active===1&&(this.state.emitter=this,this.starting=!0),this},start:function(g,y){return this.starting?(this.starting=!1,this.emit("start",g,y)):this.emit("brush",g),this},brush:function(g,y){return this.emit("brush",g,y),this},end:function(g,y){return--this.active===0&&(delete this.state.emitter,this.emit("end",g,y)),this},emit:function(g,y,v){var b=rs(this.that).datum();s.call(g,this.that,new $ft(g,{sourceEvent:y,target:u,selection:e.output(this.state.selection),mode:v,dispatch:s}),b)}};function d(g){if(a&&!g.touches||!n.apply(this,arguments))return;var y=this,v=g.target.__data__.type,b=(i&&g.metaKey?v="overlay":v)==="selection"?lle:i&&g.altKey?D_:N_,w=e===wP?null:Fft[v],E=e===_P?null:jft[v],T=_8(y),S=T.extent,C=T.selection,A=S[0][0],k,N,O=S[0][1],P,$,F=S[1][0],M,B,U=S[1][1],H,D,z=0,W=0,j,q=w&&E&&i&&g.shiftKey,G,ne,ce=Array.from(g.touches||[g],_e=>{const ke=_e.identifier;return _e=B7(_e,y),_e.point0=_e.slice(),_e.identifier=ke,_e});K7(y);var de=c(y,arguments,!0).beforestart();if(v==="overlay"){C&&(j=!0);const _e=[ce[0],ce[1]||ce[0]];T.selection=C=[[k=e===wP?A:Qo(_e[0][0],_e[1][0]),P=e===_P?O:Qo(_e[0][1],_e[1][1])],[M=e===wP?F:Xo(_e[0][0],_e[1][0]),H=e===_P?U:Xo(_e[0][1],_e[1][1])]],ce.length>1&&Ke(g)}else k=C[0][0],P=C[0][1],M=C[1][0],H=C[1][1];N=k,$=P,B=M,D=H;var he=rs(y).attr("pointer-events","none"),ve=he.selectAll(".overlay").attr("cursor",_p[v]);if(g.touches)de.moved=be,de.ended=Ue;else{var Ie=rs(g.view).on("mousemove.brush",be,!0).on("mouseup.brush",Ue,!0);i&&Ie.on("keydown.brush",yt,!0).on("keyup.brush",it,!0),Llt(g.view)}l.call(y),de.start(g,b.name);function be(_e){for(const ke of _e.changedTouches||[_e])for(const ze of ce)ze.identifier===ke.identifier&&(ze.cur=B7(ke,y));if(q&&!G&&!ne&&ce.length===1){const ke=ce[0];cle(ke.cur[0]-ke[0])>cle(ke.cur[1]-ke[1])?ne=!0:G=!0}for(const ke of ce)ke.cur&&(ke[0]=ke.cur[0],ke[1]=ke.cur[1]);j=!0,v8(_e),Ke(_e)}function Ke(_e){const ke=ce[0],ze=ke.point0;var ct;switch(z=ke[0]-ze[0],W=ke[1]-ze[1],b){case b8:case lle:{w&&(z=Xo(A-k,Qo(F-M,z)),N=k+z,B=M+z),E&&(W=Xo(O-P,Qo(U-H,W)),$=P+W,D=H+W);break}case N_:{ce[1]?(w&&(N=Xo(A,Qo(F,ce[0][0])),B=Xo(A,Qo(F,ce[1][0])),w=1),E&&($=Xo(O,Qo(U,ce[0][1])),D=Xo(O,Qo(U,ce[1][1])),E=1)):(w<0?(z=Xo(A-k,Qo(F-k,z)),N=k+z,B=M):w>0&&(z=Xo(A-M,Qo(F-M,z)),N=k,B=M+z),E<0?(W=Xo(O-P,Qo(U-P,W)),$=P+W,D=H):E>0&&(W=Xo(O-H,Qo(U-H,W)),$=P,D=H+W));break}case D_:{w&&(N=Xo(A,Qo(F,k-z*w)),B=Xo(A,Qo(F,M+z*w))),E&&($=Xo(O,Qo(U,P-W*E)),D=Xo(O,Qo(U,H+W*E)));break}}B<N&&(w*=-1,ct=k,k=M,M=ct,ct=N,N=B,B=ct,v in dle&&ve.attr("cursor",_p[v=dle[v]])),D<$&&(E*=-1,ct=P,P=H,H=ct,ct=$,$=D,D=ct,v in hle&&ve.attr("cursor",_p[v=hle[v]])),T.selection&&(C=T.selection),G&&(N=C[0][0],B=C[1][0]),ne&&($=C[0][1],D=C[1][1]),(C[0][0]!==N||C[0][1]!==$||C[1][0]!==B||C[1][1]!==D)&&(T.selection=[[N,$],[B,D]],l.call(y),de.brush(_e,b.name))}function Ue(_e){if(Mft(_e),_e.touches){if(_e.touches.length)return;a&&clearTimeout(a),a=setTimeout(function(){a=null},500)}else Flt(_e.view,j),Ie.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);he.attr("pointer-events","all"),ve.attr("cursor",_p.overlay),T.selection&&(C=T.selection),Vft(C)&&(T.selection=null,l.call(y)),de.end(_e,b.name)}function yt(_e){switch(_e.keyCode){case 16:{q=w&&E;break}case 18:{b===N_&&(w&&(M=B-z*w,k=N+z*w),E&&(H=D-W*E,P=$+W*E),b=D_,Ke(_e));break}case 32:{(b===N_||b===D_)&&(w<0?M=B-z:w>0&&(k=N-z),E<0?H=D-W:E>0&&(P=$-W),b=b8,ve.attr("cursor",_p.selection),Ke(_e));break}default:return}v8(_e)}function it(_e){switch(_e.keyCode){case 16:{q&&(G=ne=q=!1,Ke(_e));break}case 18:{b===D_&&(w<0?M=B:w>0&&(k=N),E<0?H=D:E>0&&(P=$),b=N_,Ke(_e));break}case 32:{b===b8&&(_e.altKey?(w&&(M=B-z*w,k=N+z*w),E&&(H=D-W*E,P=$+W*E),b=D_):(w<0?M=B:w>0&&(k=N),E<0?H=D:E>0&&(P=$),b=N_),ve.attr("cursor",_p[v]),Ke(_e));break}default:return}v8(_e)}}function h(g){c(this,arguments).moved(g)}function p(g){c(this,arguments).ended(g)}function m(){var g=this.__brush||{selection:null};return g.extent=X7(t.apply(this,arguments)),g.dim=e,g}return u.extent=function(g){return arguments.length?(t=typeof g=="function"?g:y8(X7(g)),u):t},u.filter=function(g){return arguments.length?(n=typeof g=="function"?g:y8(!!g),u):n},u.touchable=function(g){return arguments.length?(r=typeof g=="function"?g:y8(!!g),u):r},u.handleSize=function(g){return arguments.length?(o=+g,u):o},u.keyModifiers=function(g){return arguments.length?(i=!!g,u):i},u.on=function(){var g=s.on.apply(s,arguments);return g===s?u:g},u}const Q7=Math.PI,J7=2*Q7,Iv=1e-6,Gft=J7-Iv;function WSe(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function Yft(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return WSe;const n=10**t;return function(r){this._+=r[0];for(let i=1,s=r.length;i<s;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}let SK=class{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?WSe:Yft(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,r,i){this._append`Q${+t},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(t,n,r,i,s,o){this._append`C${+t},${+n},${+r},${+i},${this._x1=+s},${this._y1=+o}`}arcTo(t,n,r,i,s){if(t=+t,n=+n,r=+r,i=+i,s=+s,s<0)throw new Error(`negative radius: ${s}`);let o=this._x1,a=this._y1,u=r-t,l=i-n,c=o-t,f=a-n,d=c*c+f*f;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(d>Iv)if(!(Math.abs(f*u-l*c)>Iv)||!s)this._append`L${this._x1=t},${this._y1=n}`;else{let h=r-o,p=i-a,m=u*u+l*l,g=h*h+p*p,y=Math.sqrt(m),v=Math.sqrt(d),b=s*Math.tan((Q7-Math.acos((m+d-g)/(2*y*v)))/2),w=b/v,E=b/y;Math.abs(w-1)>Iv&&this._append`L${t+w*c},${n+w*f}`,this._append`A${s},${s},0,0,${+(f*h>c*p)},${this._x1=t+E*u},${this._y1=n+E*l}`}}arc(t,n,r,i,s,o){if(t=+t,n=+n,r=+r,o=!!o,r<0)throw new Error(`negative radius: ${r}`);let a=r*Math.cos(i),u=r*Math.sin(i),l=t+a,c=n+u,f=1^o,d=o?i-s:s-i;this._x1===null?this._append`M${l},${c}`:(Math.abs(this._x1-l)>Iv||Math.abs(this._y1-c)>Iv)&&this._append`L${l},${c}`,r&&(d<0&&(d=d%J7+J7),d>Gft?this._append`A${r},${r},0,1,${f},${t-a},${n-u}A${r},${r},0,1,${f},${this._x1=l},${this._y1=c}`:d>Iv&&this._append`A${r},${r},0,${+(d>=Q7)},${f},${this._x1=t+r*Math.cos(s)},${this._y1=n+r*Math.sin(s)}`)}rect(t,n,r,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}};function A6(){return new SK}A6.prototype=SK.prototype;const sm=11102230246251565e-32,Jo=134217729,Kft=(3+8*sm)*sm;function w8(e,t,n,r,i){let s,o,a,u,l=t[0],c=r[0],f=0,d=0;c>l==c>-l?(s=l,l=t[++f]):(s=c,c=r[++d]);let h=0;if(f<e&&d<n)for(c>l==c>-l?(o=l+s,a=s-(o-l),l=t[++f]):(o=c+s,a=s-(o-c),c=r[++d]),s=o,a!==0&&(i[h++]=a);f<e&&d<n;)c>l==c>-l?(o=s+l,u=o-s,a=s-(o-u)+(l-u),l=t[++f]):(o=s+c,u=o-s,a=s-(o-u)+(c-u),c=r[++d]),s=o,a!==0&&(i[h++]=a);for(;f<e;)o=s+l,u=o-s,a=s-(o-u)+(l-u),l=t[++f],s=o,a!==0&&(i[h++]=a);for(;d<n;)o=s+c,u=o-s,a=s-(o-u)+(c-u),c=r[++d],s=o,a!==0&&(i[h++]=a);return(s!==0||h===0)&&(i[h++]=s),h}function Xft(e,t){let n=t[0];for(let r=1;r<e;r++)n+=t[r];return n}function Ck(e){return new Float64Array(e)}const Qft=(3+16*sm)*sm,Jft=(2+12*sm)*sm,Zft=(9+64*sm)*sm*sm,P_=Ck(4),ple=Ck(8),mle=Ck(12),gle=Ck(16),Da=Ck(4);function edt(e,t,n,r,i,s,o){let a,u,l,c,f,d,h,p,m,g,y,v,b,w,E,T,S,C;const A=e-i,k=n-i,N=t-s,O=r-s;w=A*O,d=Jo*A,h=d-(d-A),p=A-h,d=Jo*O,m=d-(d-O),g=O-m,E=p*g-(w-h*m-p*m-h*g),T=N*k,d=Jo*N,h=d-(d-N),p=N-h,d=Jo*k,m=d-(d-k),g=k-m,S=p*g-(T-h*m-p*m-h*g),y=E-S,f=E-y,P_[0]=E-(y+f)+(f-S),v=w+y,f=v-w,b=w-(v-f)+(y-f),y=b-T,f=b-y,P_[1]=b-(y+f)+(f-T),C=v+y,f=C-v,P_[2]=v-(C-f)+(y-f),P_[3]=C;let P=Xft(4,P_),$=Jft*o;if(P>=$||-P>=$||(f=e-A,a=e-(A+f)+(f-i),f=n-k,l=n-(k+f)+(f-i),f=t-N,u=t-(N+f)+(f-s),f=r-O,c=r-(O+f)+(f-s),a===0&&u===0&&l===0&&c===0)||($=Zft*o+Kft*Math.abs(P),P+=A*c+O*a-(N*l+k*u),P>=$||-P>=$))return P;w=a*O,d=Jo*a,h=d-(d-a),p=a-h,d=Jo*O,m=d-(d-O),g=O-m,E=p*g-(w-h*m-p*m-h*g),T=u*k,d=Jo*u,h=d-(d-u),p=u-h,d=Jo*k,m=d-(d-k),g=k-m,S=p*g-(T-h*m-p*m-h*g),y=E-S,f=E-y,Da[0]=E-(y+f)+(f-S),v=w+y,f=v-w,b=w-(v-f)+(y-f),y=b-T,f=b-y,Da[1]=b-(y+f)+(f-T),C=v+y,f=C-v,Da[2]=v-(C-f)+(y-f),Da[3]=C;const F=w8(4,P_,4,Da,ple);w=A*c,d=Jo*A,h=d-(d-A),p=A-h,d=Jo*c,m=d-(d-c),g=c-m,E=p*g-(w-h*m-p*m-h*g),T=N*l,d=Jo*N,h=d-(d-N),p=N-h,d=Jo*l,m=d-(d-l),g=l-m,S=p*g-(T-h*m-p*m-h*g),y=E-S,f=E-y,Da[0]=E-(y+f)+(f-S),v=w+y,f=v-w,b=w-(v-f)+(y-f),y=b-T,f=b-y,Da[1]=b-(y+f)+(f-T),C=v+y,f=C-v,Da[2]=v-(C-f)+(y-f),Da[3]=C;const M=w8(F,ple,4,Da,mle);w=a*c,d=Jo*a,h=d-(d-a),p=a-h,d=Jo*c,m=d-(d-c),g=c-m,E=p*g-(w-h*m-p*m-h*g),T=u*l,d=Jo*u,h=d-(d-u),p=u-h,d=Jo*l,m=d-(d-l),g=l-m,S=p*g-(T-h*m-p*m-h*g),y=E-S,f=E-y,Da[0]=E-(y+f)+(f-S),v=w+y,f=v-w,b=w-(v-f)+(y-f),y=b-T,f=b-y,Da[1]=b-(y+f)+(f-T),C=v+y,f=C-v,Da[2]=v-(C-f)+(y-f),Da[3]=C;const B=w8(M,mle,4,Da,gle);return gle[B-1]}function UN(e,t,n,r,i,s){const o=(t-s)*(n-i),a=(e-i)*(r-s),u=o-a,l=Math.abs(o+a);return Math.abs(u)>=Qft*l?u:-edt(e,t,n,r,i,s,l)}const yle=Math.pow(2,-52),zN=new Uint32Array(512);class w3{static from(t,n=sdt,r=odt){const i=t.length,s=new Float64Array(i*2);for(let o=0;o<i;o++){const a=t[o];s[2*o]=n(a),s[2*o+1]=r(a)}return new w3(s)}constructor(t){const n=t.length>>1;if(n>0&&typeof t[0]!="number")throw new Error("Expected coords to contain numbers.");this.coords=t;const r=Math.max(2*n-5,0);this._triangles=new Uint32Array(r*3),this._halfedges=new Int32Array(r*3),this._hashSize=Math.ceil(Math.sqrt(n)),this._hullPrev=new Uint32Array(n),this._hullNext=new Uint32Array(n),this._hullTri=new Uint32Array(n),this._hullHash=new Int32Array(this._hashSize),this._ids=new Uint32Array(n),this._dists=new Float64Array(n),this.update()}update(){const{coords:t,_hullPrev:n,_hullNext:r,_hullTri:i,_hullHash:s}=this,o=t.length>>1;let a=1/0,u=1/0,l=-1/0,c=-1/0;for(let A=0;A<o;A++){const k=t[2*A],N=t[2*A+1];k<a&&(a=k),N<u&&(u=N),k>l&&(l=k),N>c&&(c=N),this._ids[A]=A}const f=(a+l)/2,d=(u+c)/2;let h,p,m;for(let A=0,k=1/0;A<o;A++){const N=E8(f,d,t[2*A],t[2*A+1]);N<k&&(h=A,k=N)}const g=t[2*h],y=t[2*h+1];for(let A=0,k=1/0;A<o;A++){if(A===h)continue;const N=E8(g,y,t[2*A],t[2*A+1]);N<k&&N>0&&(p=A,k=N)}let v=t[2*p],b=t[2*p+1],w=1/0;for(let A=0;A<o;A++){if(A===h||A===p)continue;const k=rdt(g,y,v,b,t[2*A],t[2*A+1]);k<w&&(m=A,w=k)}let E=t[2*m],T=t[2*m+1];if(w===1/0){for(let N=0;N<o;N++)this._dists[N]=t[2*N]-t[0]||t[2*N+1]-t[1];Aw(this._ids,this._dists,0,o-1);const A=new Uint32Array(o);let k=0;for(let N=0,O=-1/0;N<o;N++){const P=this._ids[N],$=this._dists[P];$>O&&(A[k++]=P,O=$)}this.hull=A.subarray(0,k),this.triangles=new Uint32Array(0),this.halfedges=new Uint32Array(0);return}if(UN(g,y,v,b,E,T)<0){const A=p,k=v,N=b;p=m,v=E,b=T,m=A,E=k,T=N}const S=idt(g,y,v,b,E,T);this._cx=S.x,this._cy=S.y;for(let A=0;A<o;A++)this._dists[A]=E8(t[2*A],t[2*A+1],S.x,S.y);Aw(this._ids,this._dists,0,o-1),this._hullStart=h;let C=3;r[h]=n[m]=p,r[p]=n[h]=m,r[m]=n[p]=h,i[h]=0,i[p]=1,i[m]=2,s.fill(-1),s[this._hashKey(g,y)]=h,s[this._hashKey(v,b)]=p,s[this._hashKey(E,T)]=m,this.trianglesLen=0,this._addTriangle(h,p,m,-1,-1,-1);for(let A=0,k,N;A<this._ids.length;A++){const O=this._ids[A],P=t[2*O],$=t[2*O+1];if(A>0&&Math.abs(P-k)<=yle&&Math.abs($-N)<=yle||(k=P,N=$,O===h||O===p||O===m))continue;let F=0;for(let D=0,z=this._hashKey(P,$);D<this._hashSize&&(F=s[(z+D)%this._hashSize],!(F!==-1&&F!==r[F]));D++);F=n[F];let M=F,B;for(;B=r[M],UN(P,$,t[2*M],t[2*M+1],t[2*B],t[2*B+1])>=0;)if(M=B,M===F){M=-1;break}if(M===-1)continue;let U=this._addTriangle(M,O,r[M],-1,-1,i[M]);i[O]=this._legalize(U+2),i[M]=U,C++;let H=r[M];for(;B=r[H],UN(P,$,t[2*H],t[2*H+1],t[2*B],t[2*B+1])<0;)U=this._addTriangle(H,O,B,i[O],-1,i[H]),i[O]=this._legalize(U+2),r[H]=H,C--,H=B;if(M===F)for(;B=n[M],UN(P,$,t[2*B],t[2*B+1],t[2*M],t[2*M+1])<0;)U=this._addTriangle(B,O,M,-1,i[M],i[B]),this._legalize(U+2),i[B]=U,r[M]=M,C--,M=B;this._hullStart=n[O]=M,r[M]=n[H]=O,r[O]=H,s[this._hashKey(P,$)]=O,s[this._hashKey(t[2*M],t[2*M+1])]=M}this.hull=new Uint32Array(C);for(let A=0,k=this._hullStart;A<C;A++)this.hull[A]=k,k=r[k];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(t,n){return Math.floor(tdt(t-this._cx,n-this._cy)*this._hashSize)%this._hashSize}_legalize(t){const{_triangles:n,_halfedges:r,coords:i}=this;let s=0,o=0;for(;;){const a=r[t],u=t-t%3;if(o=u+(t+2)%3,a===-1){if(s===0)break;t=zN[--s];continue}const l=a-a%3,c=u+(t+1)%3,f=l+(a+2)%3,d=n[o],h=n[t],p=n[c],m=n[f];if(ndt(i[2*d],i[2*d+1],i[2*h],i[2*h+1],i[2*p],i[2*p+1],i[2*m],i[2*m+1])){n[t]=m,n[a]=d;const y=r[f];if(y===-1){let b=this._hullStart;do{if(this._hullTri[b]===f){this._hullTri[b]=t;break}b=this._hullPrev[b]}while(b!==this._hullStart)}this._link(t,y),this._link(a,r[o]),this._link(o,f);const v=l+(a+1)%3;s<zN.length&&(zN[s++]=v)}else{if(s===0)break;t=zN[--s]}}return o}_link(t,n){this._halfedges[t]=n,n!==-1&&(this._halfedges[n]=t)}_addTriangle(t,n,r,i,s,o){const a=this.trianglesLen;return this._triangles[a]=t,this._triangles[a+1]=n,this._triangles[a+2]=r,this._link(a,i),this._link(a+1,s),this._link(a+2,o),this.trianglesLen+=3,a}}function tdt(e,t){const n=e/(Math.abs(e)+Math.abs(t));return(t>0?3-n:1+n)/4}function E8(e,t,n,r){const i=e-n,s=t-r;return i*i+s*s}function ndt(e,t,n,r,i,s,o,a){const u=e-o,l=t-a,c=n-o,f=r-a,d=i-o,h=s-a,p=u*u+l*l,m=c*c+f*f,g=d*d+h*h;return u*(f*g-m*h)-l*(c*g-m*d)+p*(c*h-f*d)<0}function rdt(e,t,n,r,i,s){const o=n-e,a=r-t,u=i-e,l=s-t,c=o*o+a*a,f=u*u+l*l,d=.5/(o*l-a*u),h=(l*c-a*f)*d,p=(o*f-u*c)*d;return h*h+p*p}function idt(e,t,n,r,i,s){const o=n-e,a=r-t,u=i-e,l=s-t,c=o*o+a*a,f=u*u+l*l,d=.5/(o*l-a*u),h=e+(l*c-a*f)*d,p=t+(o*f-u*c)*d;return{x:h,y:p}}function Aw(e,t,n,r){if(r-n<=20)for(let i=n+1;i<=r;i++){const s=e[i],o=t[s];let a=i-1;for(;a>=n&&t[e[a]]>o;)e[a+1]=e[a--];e[a+1]=s}else{const i=n+r>>1;let s=n+1,o=r;RT(e,i,s),t[e[n]]>t[e[r]]&&RT(e,n,r),t[e[s]]>t[e[r]]&&RT(e,s,r),t[e[n]]>t[e[s]]&&RT(e,n,s);const a=e[s],u=t[a];for(;;){do s++;while(t[e[s]]<u);do o--;while(t[e[o]]>u);if(o<s)break;RT(e,s,o)}e[n+1]=e[o],e[o]=a,r-s+1>=o-n?(Aw(e,t,s,r),Aw(e,t,n,o-1)):(Aw(e,t,n,o-1),Aw(e,t,s,r))}}function RT(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function sdt(e){return e[0]}function odt(e){return e[1]}const vle=1e-6;class a1{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(t,n){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(t,n){this._+=`L${this._x1=+t},${this._y1=+n}`}arc(t,n,r){t=+t,n=+n,r=+r;const i=t+r,s=n;if(r<0)throw new Error("negative radius");this._x1===null?this._+=`M${i},${s}`:(Math.abs(this._x1-i)>vle||Math.abs(this._y1-s)>vle)&&(this._+="L"+i+","+s),r&&(this._+=`A${r},${r},0,1,1,${t-r},${n}A${r},${r},0,1,1,${this._x1=i},${this._y1=s}`)}rect(t,n,r,i){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${+r}v${+i}h${-r}Z`}value(){return this._||null}}class Z7{constructor(){this._=[]}moveTo(t,n){this._.push([t,n])}closePath(){this._.push(this._[0].slice())}lineTo(t,n){this._.push([t,n])}value(){return this._.length?this._:null}}let adt=class{constructor(t,[n,r,i,s]=[0,0,960,500]){if(!((i=+i)>=(n=+n))||!((s=+s)>=(r=+r)))throw new Error("invalid bounds");this.delaunay=t,this._circumcenters=new Float64Array(t.points.length*2),this.vectors=new Float64Array(t.points.length*2),this.xmax=i,this.xmin=n,this.ymax=s,this.ymin=r,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points:t,hull:n,triangles:r},vectors:i}=this;let s,o;const a=this.circumcenters=this._circumcenters.subarray(0,r.length/3*2);for(let m=0,g=0,y=r.length,v,b;m<y;m+=3,g+=2){const w=r[m]*2,E=r[m+1]*2,T=r[m+2]*2,S=t[w],C=t[w+1],A=t[E],k=t[E+1],N=t[T],O=t[T+1],P=A-S,$=k-C,F=N-S,M=O-C,B=(P*M-$*F)*2;if(Math.abs(B)<1e-9){if(s===void 0){s=o=0;for(const H of n)s+=t[H*2],o+=t[H*2+1];s/=n.length,o/=n.length}const U=1e9*Math.sign((s-S)*M-(o-C)*F);v=(S+N)/2-U*M,b=(C+O)/2+U*F}else{const U=1/B,H=P*P+$*$,D=F*F+M*M;v=S+(M*H-$*D)*U,b=C+(P*D-F*H)*U}a[g]=v,a[g+1]=b}let u=n[n.length-1],l,c=u*4,f,d=t[2*u],h,p=t[2*u+1];i.fill(0);for(let m=0;m<n.length;++m)u=n[m],l=c,f=d,h=p,c=u*4,d=t[2*u],p=t[2*u+1],i[l+2]=i[c]=h-p,i[l+3]=i[c+1]=d-f}render(t){const n=t==null?t=new a1:void 0,{delaunay:{halfedges:r,inedges:i,hull:s},circumcenters:o,vectors:a}=this;if(s.length<=1)return null;for(let c=0,f=r.length;c<f;++c){const d=r[c];if(d<c)continue;const h=Math.floor(c/3)*2,p=Math.floor(d/3)*2,m=o[h],g=o[h+1],y=o[p],v=o[p+1];this._renderSegment(m,g,y,v,t)}let u,l=s[s.length-1];for(let c=0;c<s.length;++c){u=l,l=s[c];const f=Math.floor(i[l]/3)*2,d=o[f],h=o[f+1],p=u*4,m=this._project(d,h,a[p+2],a[p+3]);m&&this._renderSegment(d,h,m[0],m[1],t)}return n&&n.value()}renderBounds(t){const n=t==null?t=new a1:void 0;return t.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),n&&n.value()}renderCell(t,n){const r=n==null?n=new a1:void 0,i=this._clip(t);if(i===null||!i.length)return;n.moveTo(i[0],i[1]);let s=i.length;for(;i[0]===i[s-2]&&i[1]===i[s-1]&&s>1;)s-=2;for(let o=2;o<s;o+=2)(i[o]!==i[o-2]||i[o+1]!==i[o-1])&&n.lineTo(i[o],i[o+1]);return n.closePath(),r&&r.value()}*cellPolygons(){const{delaunay:{points:t}}=this;for(let n=0,r=t.length/2;n<r;++n){const i=this.cellPolygon(n);i&&(i.index=n,yield i)}}cellPolygon(t){const n=new Z7;return this.renderCell(t,n),n.value()}_renderSegment(t,n,r,i,s){let o;const a=this._regioncode(t,n),u=this._regioncode(r,i);a===0&&u===0?(s.moveTo(t,n),s.lineTo(r,i)):(o=this._clipSegment(t,n,r,i,a,u))&&(s.moveTo(o[0],o[1]),s.lineTo(o[2],o[3]))}contains(t,n,r){return n=+n,n!==n||(r=+r,r!==r)?!1:this.delaunay._step(t,n,r)===t}*neighbors(t){const n=this._clip(t);if(n)for(const r of this.delaunay.neighbors(t)){const i=this._clip(r);if(i){e:for(let s=0,o=n.length;s<o;s+=2)for(let a=0,u=i.length;a<u;a+=2)if(n[s]===i[a]&&n[s+1]===i[a+1]&&n[(s+2)%o]===i[(a+u-2)%u]&&n[(s+3)%o]===i[(a+u-1)%u]){yield r;break e}}}}_cell(t){const{circumcenters:n,delaunay:{inedges:r,halfedges:i,triangles:s}}=this,o=r[t];if(o===-1)return null;const a=[];let u=o;do{const l=Math.floor(u/3);if(a.push(n[l*2],n[l*2+1]),u=u%3===2?u-2:u+1,s[u]!==t)break;u=i[u]}while(u!==o&&u!==-1);return a}_clip(t){if(t===0&&this.delaunay.hull.length===1)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const n=this._cell(t);if(n===null)return null;const{vectors:r}=this,i=t*4;return this._simplify(r[i]||r[i+1]?this._clipInfinite(t,n,r[i],r[i+1],r[i+2],r[i+3]):this._clipFinite(t,n))}_clipFinite(t,n){const r=n.length;let i=null,s,o,a=n[r-2],u=n[r-1],l,c=this._regioncode(a,u),f,d=0;for(let h=0;h<r;h+=2)if(s=a,o=u,a=n[h],u=n[h+1],l=c,c=this._regioncode(a,u),l===0&&c===0)f=d,d=0,i?i.push(a,u):i=[a,u];else{let p,m,g,y,v;if(l===0){if((p=this._clipSegment(s,o,a,u,l,c))===null)continue;[m,g,y,v]=p}else{if((p=this._clipSegment(a,u,s,o,c,l))===null)continue;[y,v,m,g]=p,f=d,d=this._edgecode(m,g),f&&d&&this._edge(t,f,d,i,i.length),i?i.push(m,g):i=[m,g]}f=d,d=this._edgecode(y,v),f&&d&&this._edge(t,f,d,i,i.length),i?i.push(y,v):i=[y,v]}if(i)f=d,d=this._edgecode(i[0],i[1]),f&&d&&this._edge(t,f,d,i,i.length);else if(this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return i}_clipSegment(t,n,r,i,s,o){const a=s<o;for(a&&([t,n,r,i,s,o]=[r,i,t,n,o,s]);;){if(s===0&&o===0)return a?[r,i,t,n]:[t,n,r,i];if(s&o)return null;let u,l,c=s||o;c&8?(u=t+(r-t)*(this.ymax-n)/(i-n),l=this.ymax):c&4?(u=t+(r-t)*(this.ymin-n)/(i-n),l=this.ymin):c&2?(l=n+(i-n)*(this.xmax-t)/(r-t),u=this.xmax):(l=n+(i-n)*(this.xmin-t)/(r-t),u=this.xmin),s?(t=u,n=l,s=this._regioncode(t,n)):(r=u,i=l,o=this._regioncode(r,i))}}_clipInfinite(t,n,r,i,s,o){let a=Array.from(n),u;if((u=this._project(a[0],a[1],r,i))&&a.unshift(u[0],u[1]),(u=this._project(a[a.length-2],a[a.length-1],s,o))&&a.push(u[0],u[1]),a=this._clipFinite(t,a))for(let l=0,c=a.length,f,d=this._edgecode(a[c-2],a[c-1]);l<c;l+=2)f=d,d=this._edgecode(a[l],a[l+1]),f&&d&&(l=this._edge(t,f,d,a,l),c=a.length);else this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(a=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return a}_edge(t,n,r,i,s){for(;n!==r;){let o,a;switch(n){case 5:n=4;continue;case 4:n=6,o=this.xmax,a=this.ymin;break;case 6:n=2;continue;case 2:n=10,o=this.xmax,a=this.ymax;break;case 10:n=8;continue;case 8:n=9,o=this.xmin,a=this.ymax;break;case 9:n=1;continue;case 1:n=5,o=this.xmin,a=this.ymin;break}(i[s]!==o||i[s+1]!==a)&&this.contains(t,o,a)&&(i.splice(s,0,o,a),s+=2)}return s}_project(t,n,r,i){let s=1/0,o,a,u;if(i<0){if(n<=this.ymin)return null;(o=(this.ymin-n)/i)<s&&(u=this.ymin,a=t+(s=o)*r)}else if(i>0){if(n>=this.ymax)return null;(o=(this.ymax-n)/i)<s&&(u=this.ymax,a=t+(s=o)*r)}if(r>0){if(t>=this.xmax)return null;(o=(this.xmax-t)/r)<s&&(a=this.xmax,u=n+(s=o)*i)}else if(r<0){if(t<=this.xmin)return null;(o=(this.xmin-t)/r)<s&&(a=this.xmin,u=n+(s=o)*i)}return[a,u]}_edgecode(t,n){return(t===this.xmin?1:t===this.xmax?2:0)|(n===this.ymin?4:n===this.ymax?8:0)}_regioncode(t,n){return(t<this.xmin?1:t>this.xmax?2:0)|(n<this.ymin?4:n>this.ymax?8:0)}_simplify(t){if(t&&t.length>4){for(let n=0;n<t.length;n+=2){const r=(n+2)%t.length,i=(n+4)%t.length;(t[n]===t[r]&&t[r]===t[i]||t[n+1]===t[r+1]&&t[r+1]===t[i+1])&&(t.splice(r,2),n-=2)}t.length||(t=null)}return t}};const udt=2*Math.PI,O_=Math.pow;function ldt(e){return e[0]}function cdt(e){return e[1]}function fdt(e){const{triangles:t,coords:n}=e;for(let r=0;r<t.length;r+=3){const i=2*t[r],s=2*t[r+1],o=2*t[r+2];if((n[o]-n[i])*(n[s+1]-n[i+1])-(n[s]-n[i])*(n[o+1]-n[i+1])>1e-10)return!1}return!0}function ddt(e,t,n){return[e+Math.sin(e+t)*n,t+Math.cos(e-t)*n]}class TK{static from(t,n=ldt,r=cdt,i){return new TK("length"in t?hdt(t,n,r,i):Float64Array.from(pdt(t,n,r,i)))}constructor(t){this._delaunator=new w3(t),this.inedges=new Int32Array(t.length/2),this._hullIndex=new Int32Array(t.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const t=this._delaunator,n=this.points;if(t.hull&&t.hull.length>2&&fdt(t)){this.collinear=Int32Array.from({length:n.length/2},(d,h)=>h).sort((d,h)=>n[2*d]-n[2*h]||n[2*d+1]-n[2*h+1]);const u=this.collinear[0],l=this.collinear[this.collinear.length-1],c=[n[2*u],n[2*u+1],n[2*l],n[2*l+1]],f=1e-8*Math.hypot(c[3]-c[1],c[2]-c[0]);for(let d=0,h=n.length/2;d<h;++d){const p=ddt(n[2*d],n[2*d+1],f);n[2*d]=p[0],n[2*d+1]=p[1]}this._delaunator=new w3(n)}else delete this.collinear;const r=this.halfedges=this._delaunator.halfedges,i=this.hull=this._delaunator.hull,s=this.triangles=this._delaunator.triangles,o=this.inedges.fill(-1),a=this._hullIndex.fill(-1);for(let u=0,l=r.length;u<l;++u){const c=s[u%3===2?u-2:u+1];(r[u]===-1||o[c]===-1)&&(o[c]=u)}for(let u=0,l=i.length;u<l;++u)a[i[u]]=u;i.length<=2&&i.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=i[0],o[i[0]]=1,i.length===2&&(o[i[1]]=0,this.triangles[1]=i[1],this.triangles[2]=i[1]))}voronoi(t){return new adt(this,t)}*neighbors(t){const{inedges:n,hull:r,_hullIndex:i,halfedges:s,triangles:o,collinear:a}=this;if(a){const f=a.indexOf(t);f>0&&(yield a[f-1]),f<a.length-1&&(yield a[f+1]);return}const u=n[t];if(u===-1)return;let l=u,c=-1;do{if(yield c=o[l],l=l%3===2?l-2:l+1,o[l]!==t)return;if(l=s[l],l===-1){const f=r[(i[t]+1)%r.length];f!==c&&(yield f);return}}while(l!==u)}find(t,n,r=0){if(t=+t,t!==t||(n=+n,n!==n))return-1;const i=r;let s;for(;(s=this._step(r,t,n))>=0&&s!==r&&s!==i;)r=s;return s}_step(t,n,r){const{inedges:i,hull:s,_hullIndex:o,halfedges:a,triangles:u,points:l}=this;if(i[t]===-1||!l.length)return(t+1)%(l.length>>1);let c=t,f=O_(n-l[t*2],2)+O_(r-l[t*2+1],2);const d=i[t];let h=d;do{let p=u[h];const m=O_(n-l[p*2],2)+O_(r-l[p*2+1],2);if(m<f&&(f=m,c=p),h=h%3===2?h-2:h+1,u[h]!==t)break;if(h=a[h],h===-1){if(h=s[(o[t]+1)%s.length],h!==p&&O_(n-l[h*2],2)+O_(r-l[h*2+1],2)<f)return h;break}}while(h!==d);return c}render(t){const n=t==null?t=new a1:void 0,{points:r,halfedges:i,triangles:s}=this;for(let o=0,a=i.length;o<a;++o){const u=i[o];if(u<o)continue;const l=s[o]*2,c=s[u]*2;t.moveTo(r[l],r[l+1]),t.lineTo(r[c],r[c+1])}return this.renderHull(t),n&&n.value()}renderPoints(t,n){n===void 0&&(!t||typeof t.moveTo!="function")&&(n=t,t=null),n=n==null?2:+n;const r=t==null?t=new a1:void 0,{points:i}=this;for(let s=0,o=i.length;s<o;s+=2){const a=i[s],u=i[s+1];t.moveTo(a+n,u),t.arc(a,u,n,0,udt)}return r&&r.value()}renderHull(t){const n=t==null?t=new a1:void 0,{hull:r,points:i}=this,s=r[0]*2,o=r.length;t.moveTo(i[s],i[s+1]);for(let a=1;a<o;++a){const u=2*r[a];t.lineTo(i[u],i[u+1])}return t.closePath(),n&&n.value()}hullPolygon(){const t=new Z7;return this.renderHull(t),t.value()}renderTriangle(t,n){const r=n==null?n=new a1:void 0,{points:i,triangles:s}=this,o=s[t*=3]*2,a=s[t+1]*2,u=s[t+2]*2;return n.moveTo(i[o],i[o+1]),n.lineTo(i[a],i[a+1]),n.lineTo(i[u],i[u+1]),n.closePath(),r&&r.value()}*trianglePolygons(){const{triangles:t}=this;for(let n=0,r=t.length/3;n<r;++n)yield this.trianglePolygon(n)}trianglePolygon(t){const n=new Z7;return this.renderTriangle(t,n),n.value()}}function hdt(e,t,n,r){const i=e.length,s=new Float64Array(i*2);for(let o=0;o<i;++o){const a=e[o];s[o*2]=t.call(r,a,o,e),s[o*2+1]=n.call(r,a,o,e)}return s}function*pdt(e,t,n,r){let i=0;for(const s of e)yield t.call(r,s,i,e),yield n.call(r,s,i,e),++i}var ble={},x8={},S8=34,NT=10,T8=13;function GSe(e){return new Function("d","return {"+e.map(function(t,n){return JSON.stringify(t)+": d["+n+'] || ""'}).join(",")+"}")}function mdt(e,t){var n=GSe(e);return function(r,i){return t(n(r),i,e)}}function _le(e){var t=Object.create(null),n=[];return e.forEach(function(r){for(var i in r)i in t||n.push(t[i]=i)}),n}function vu(e,t){var n=e+"",r=n.length;return r<t?new Array(t-r+1).join(0)+n:n}function gdt(e){return e<0?"-"+vu(-e,6):e>9999?"+"+vu(e,6):vu(e,4)}function ydt(e){var t=e.getUTCHours(),n=e.getUTCMinutes(),r=e.getUTCSeconds(),i=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":gdt(e.getUTCFullYear())+"-"+vu(e.getUTCMonth()+1,2)+"-"+vu(e.getUTCDate(),2)+(i?"T"+vu(t,2)+":"+vu(n,2)+":"+vu(r,2)+"."+vu(i,3)+"Z":r?"T"+vu(t,2)+":"+vu(n,2)+":"+vu(r,2)+"Z":n||t?"T"+vu(t,2)+":"+vu(n,2)+"Z":"")}function YSe(e){var t=new RegExp('["'+e+`
\r]`),n=e.charCodeAt(0);function r(f,d){var h,p,m=i(f,function(g,y){if(h)return h(g,y-1);p=g,h=d?mdt(g,d):GSe(g)});return m.columns=p||[],m}function i(f,d){var h=[],p=f.length,m=0,g=0,y,v=p<=0,b=!1;f.charCodeAt(p-1)===NT&&--p,f.charCodeAt(p-1)===T8&&--p;function w(){if(v)return x8;if(b)return b=!1,ble;var T,S=m,C;if(f.charCodeAt(S)===S8){for(;m++<p&&f.charCodeAt(m)!==S8||f.charCodeAt(++m)===S8;);return(T=m)>=p?v=!0:(C=f.charCodeAt(m++))===NT?b=!0:C===T8&&(b=!0,f.charCodeAt(m)===NT&&++m),f.slice(S+1,T-1).replace(/""/g,'"')}for(;m<p;){if((C=f.charCodeAt(T=m++))===NT)b=!0;else if(C===T8)b=!0,f.charCodeAt(m)===NT&&++m;else if(C!==n)continue;return f.slice(S,T)}return v=!0,f.slice(S,p)}for(;(y=w())!==x8;){for(var E=[];y!==ble&&y!==x8;)E.push(y),y=w();d&&(E=d(E,g++))==null||h.push(E)}return h}function s(f,d){return f.map(function(h){return d.map(function(p){return c(h[p])}).join(e)})}function o(f,d){return d==null&&(d=_le(f)),[d.map(c).join(e)].concat(s(f,d)).join(`
`)}function a(f,d){return d==null&&(d=_le(f)),s(f,d).join(`
`)}function u(f){return f.map(l).join(`
`)}function l(f){return f.map(c).join(e)}function c(f){return f==null?"":f instanceof Date?ydt(f):t.test(f+="")?'"'+f.replace(/"/g,'""')+'"':f}return{parse:r,parseRows:i,format:o,formatBody:a,formatRows:u,formatRow:l,formatValue:c}}var vdt=YSe(","),bdt=vdt.parse;function _dt(e){if(!e.ok)throw new Error(e.status+" "+e.statusText);return e.text()}function wdt(e,t){return fetch(e,t).then(_dt)}function Edt(e){return function(t,n,r){return arguments.length===2&&typeof n=="function"&&(r=n,n=void 0),wdt(t,n).then(function(i){return e(i,r)})}}var CK=Edt(bdt);function xdt(e,t){var n,r=1;e==null&&(e=0),t==null&&(t=0);function i(){var s,o=n.length,a,u=0,l=0;for(s=0;s<o;++s)a=n[s],u+=a.x,l+=a.y;for(u=(u/o-e)*r,l=(l/o-t)*r,s=0;s<o;++s)a=n[s],a.x-=u,a.y-=l}return i.initialize=function(s){n=s},i.x=function(s){return arguments.length?(e=+s,i):e},i.y=function(s){return arguments.length?(t=+s,i):t},i.strength=function(s){return arguments.length?(r=+s,i):r},i}function Sdt(e){const t=+this._x.call(null,e),n=+this._y.call(null,e);return KSe(this.cover(t,n),t,n,e)}function KSe(e,t,n,r){if(isNaN(t)||isNaN(n))return e;var i,s=e._root,o={data:r},a=e._x0,u=e._y0,l=e._x1,c=e._y1,f,d,h,p,m,g,y,v;if(!s)return e._root=o,e;for(;s.length;)if((m=t>=(f=(a+l)/2))?a=f:l=f,(g=n>=(d=(u+c)/2))?u=d:c=d,i=s,!(s=s[y=g<<1|m]))return i[y]=o,e;if(h=+e._x.call(null,s.data),p=+e._y.call(null,s.data),t===h&&n===p)return o.next=s,i?i[y]=o:e._root=o,e;do i=i?i[y]=new Array(4):e._root=new Array(4),(m=t>=(f=(a+l)/2))?a=f:l=f,(g=n>=(d=(u+c)/2))?u=d:c=d;while((y=g<<1|m)===(v=(p>=d)<<1|h>=f));return i[v]=s,i[y]=o,e}function Tdt(e){var t,n,r=e.length,i,s,o=new Array(r),a=new Array(r),u=1/0,l=1/0,c=-1/0,f=-1/0;for(n=0;n<r;++n)isNaN(i=+this._x.call(null,t=e[n]))||isNaN(s=+this._y.call(null,t))||(o[n]=i,a[n]=s,i<u&&(u=i),i>c&&(c=i),s<l&&(l=s),s>f&&(f=s));if(u>c||l>f)return this;for(this.cover(u,l).cover(c,f),n=0;n<r;++n)KSe(this,o[n],a[n],e[n]);return this}function Cdt(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var n=this._x0,r=this._y0,i=this._x1,s=this._y1;if(isNaN(n))i=(n=Math.floor(e))+1,s=(r=Math.floor(t))+1;else{for(var o=i-n||1,a=this._root,u,l;n>e||e>=i||r>t||t>=s;)switch(l=(t<r)<<1|e<n,u=new Array(4),u[l]=a,a=u,o*=2,l){case 0:i=n+o,s=r+o;break;case 1:n=i-o,s=r+o;break;case 2:i=n+o,r=s-o;break;case 3:n=i-o,r=s-o;break}this._root&&this._root.length&&(this._root=a)}return this._x0=n,this._y0=r,this._x1=i,this._y1=s,this}function Adt(){var e=[];return this.visit(function(t){if(!t.length)do e.push(t.data);while(t=t.next)}),e}function Idt(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function za(e,t,n,r,i){this.node=e,this.x0=t,this.y0=n,this.x1=r,this.y1=i}function kdt(e,t,n){var r,i=this._x0,s=this._y0,o,a,u,l,c=this._x1,f=this._y1,d=[],h=this._root,p,m;for(h&&d.push(new za(h,i,s,c,f)),n==null?n=1/0:(i=e-n,s=t-n,c=e+n,f=t+n,n*=n);p=d.pop();)if(!(!(h=p.node)||(o=p.x0)>c||(a=p.y0)>f||(u=p.x1)<i||(l=p.y1)<s))if(h.length){var g=(o+u)/2,y=(a+l)/2;d.push(new za(h[3],g,y,u,l),new za(h[2],o,y,g,l),new za(h[1],g,a,u,y),new za(h[0],o,a,g,y)),(m=(t>=y)<<1|e>=g)&&(p=d[d.length-1],d[d.length-1]=d[d.length-1-m],d[d.length-1-m]=p)}else{var v=e-+this._x.call(null,h.data),b=t-+this._y.call(null,h.data),w=v*v+b*b;if(w<n){var E=Math.sqrt(n=w);i=e-E,s=t-E,c=e+E,f=t+E,r=h.data}}return r}function Rdt(e){if(isNaN(c=+this._x.call(null,e))||isNaN(f=+this._y.call(null,e)))return this;var t,n=this._root,r,i,s,o=this._x0,a=this._y0,u=this._x1,l=this._y1,c,f,d,h,p,m,g,y;if(!n)return this;if(n.length)for(;;){if((p=c>=(d=(o+u)/2))?o=d:u=d,(m=f>=(h=(a+l)/2))?a=h:l=h,t=n,!(n=n[g=m<<1|p]))return this;if(!n.length)break;(t[g+1&3]||t[g+2&3]||t[g+3&3])&&(r=t,y=g)}for(;n.data!==e;)if(i=n,!(n=n.next))return this;return(s=n.next)&&delete n.next,i?(s?i.next=s:delete i.next,this):t?(s?t[g]=s:delete t[g],(n=t[0]||t[1]||t[2]||t[3])&&n===(t[3]||t[2]||t[1]||t[0])&&!n.length&&(r?r[y]=n:this._root=n),this):(this._root=s,this)}function Ndt(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this}function Ddt(){return this._root}function Pdt(){var e=0;return this.visit(function(t){if(!t.length)do++e;while(t=t.next)}),e}function Odt(e){var t=[],n,r=this._root,i,s,o,a,u;for(r&&t.push(new za(r,this._x0,this._y0,this._x1,this._y1));n=t.pop();)if(!e(r=n.node,s=n.x0,o=n.y0,a=n.x1,u=n.y1)&&r.length){var l=(s+a)/2,c=(o+u)/2;(i=r[3])&&t.push(new za(i,l,c,a,u)),(i=r[2])&&t.push(new za(i,s,c,l,u)),(i=r[1])&&t.push(new za(i,l,o,a,c)),(i=r[0])&&t.push(new za(i,s,o,l,c))}return this}function $dt(e){var t=[],n=[],r;for(this._root&&t.push(new za(this._root,this._x0,this._y0,this._x1,this._y1));r=t.pop();){var i=r.node;if(i.length){var s,o=r.x0,a=r.y0,u=r.x1,l=r.y1,c=(o+u)/2,f=(a+l)/2;(s=i[0])&&t.push(new za(s,o,a,c,f)),(s=i[1])&&t.push(new za(s,c,a,u,f)),(s=i[2])&&t.push(new za(s,o,f,c,l)),(s=i[3])&&t.push(new za(s,c,f,u,l))}n.push(r)}for(;r=n.pop();)e(r.node,r.x0,r.y0,r.x1,r.y1);return this}function Mdt(e){return e[0]}function Ldt(e){return arguments.length?(this._x=e,this):this._x}function Fdt(e){return e[1]}function jdt(e){return arguments.length?(this._y=e,this):this._y}function AK(e,t,n){var r=new IK(t??Mdt,n??Fdt,NaN,NaN,NaN,NaN);return e==null?r:r.addAll(e)}function IK(e,t,n,r,i,s){this._x=e,this._y=t,this._x0=n,this._y0=r,this._x1=i,this._y1=s,this._root=void 0}function wle(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}var ou=AK.prototype=IK.prototype;ou.copy=function(){var e=new IK(this._x,this._y,this._x0,this._y0,this._x1,this._y1),t=this._root,n,r;if(!t)return e;if(!t.length)return e._root=wle(t),e;for(n=[{source:t,target:e._root=new Array(4)}];t=n.pop();)for(var i=0;i<4;++i)(r=t.source[i])&&(r.length?n.push({source:r,target:t.target[i]=new Array(4)}):t.target[i]=wle(r));return e};ou.add=Sdt;ou.addAll=Tdt;ou.cover=Cdt;ou.data=Adt;ou.extent=Idt;ou.find=kdt;ou.remove=Rdt;ou.removeAll=Ndt;ou.root=Ddt;ou.size=Pdt;ou.visit=Odt;ou.visitAfter=$dt;ou.x=Ldt;ou.y=jdt;function qa(e){return function(){return e}}function Zg(e){return(e()-.5)*1e-6}function Bdt(e){return e.x+e.vx}function Udt(e){return e.y+e.vy}function zdt(e){var t,n,r,i=1,s=1;typeof e!="function"&&(e=qa(e==null?1:+e));function o(){for(var l,c=t.length,f,d,h,p,m,g,y=0;y<s;++y)for(f=AK(t,Bdt,Udt).visitAfter(a),l=0;l<c;++l)d=t[l],m=n[d.index],g=m*m,h=d.x+d.vx,p=d.y+d.vy,f.visit(v);function v(b,w,E,T,S){var C=b.data,A=b.r,k=m+A;if(C){if(C.index>d.index){var N=h-C.x-C.vx,O=p-C.y-C.vy,P=N*N+O*O;P<k*k&&(N===0&&(N=Zg(r),P+=N*N),O===0&&(O=Zg(r),P+=O*O),P=(k-(P=Math.sqrt(P)))/P*i,d.vx+=(N*=P)*(k=(A*=A)/(g+A)),d.vy+=(O*=P)*k,C.vx-=N*(k=1-k),C.vy-=O*k)}return}return w>h+k||T<h-k||E>p+k||S<p-k}}function a(l){if(l.data)return l.r=n[l.data.index];for(var c=l.r=0;c<4;++c)l[c]&&l[c].r>l.r&&(l.r=l[c].r)}function u(){if(t){var l,c=t.length,f;for(n=new Array(c),l=0;l<c;++l)f=t[l],n[f.index]=+e(f,l,t)}}return o.initialize=function(l,c){t=l,r=c,u()},o.iterations=function(l){return arguments.length?(s=+l,o):s},o.strength=function(l){return arguments.length?(i=+l,o):i},o.radius=function(l){return arguments.length?(e=typeof l=="function"?l:qa(+l),u(),o):e},o}function Vdt(e){return e.index}function Ele(e,t){var n=e.get(t);if(!n)throw new Error("node not found: "+t);return n}function Hdt(e){var t=Vdt,n=f,r,i=qa(30),s,o,a,u,l,c=1;e==null&&(e=[]);function f(g){return 1/Math.min(a[g.source.index],a[g.target.index])}function d(g){for(var y=0,v=e.length;y<c;++y)for(var b=0,w,E,T,S,C,A,k;b<v;++b)w=e[b],E=w.source,T=w.target,S=T.x+T.vx-E.x-E.vx||Zg(l),C=T.y+T.vy-E.y-E.vy||Zg(l),A=Math.sqrt(S*S+C*C),A=(A-s[b])/A*g*r[b],S*=A,C*=A,T.vx-=S*(k=u[b]),T.vy-=C*k,E.vx+=S*(k=1-k),E.vy+=C*k}function h(){if(o){var g,y=o.length,v=e.length,b=new Map(o.map((E,T)=>[t(E,T,o),E])),w;for(g=0,a=new Array(y);g<v;++g)w=e[g],w.index=g,typeof w.source!="object"&&(w.source=Ele(b,w.source)),typeof w.target!="object"&&(w.target=Ele(b,w.target)),a[w.source.index]=(a[w.source.index]||0)+1,a[w.target.index]=(a[w.target.index]||0)+1;for(g=0,u=new Array(v);g<v;++g)w=e[g],u[g]=a[w.source.index]/(a[w.source.index]+a[w.target.index]);r=new Array(v),p(),s=new Array(v),m()}}function p(){if(o)for(var g=0,y=e.length;g<y;++g)r[g]=+n(e[g],g,e)}function m(){if(o)for(var g=0,y=e.length;g<y;++g)s[g]=+i(e[g],g,e)}return d.initialize=function(g,y){o=g,l=y,h()},d.links=function(g){return arguments.length?(e=g,h(),d):e},d.id=function(g){return arguments.length?(t=g,d):t},d.iterations=function(g){return arguments.length?(c=+g,d):c},d.strength=function(g){return arguments.length?(n=typeof g=="function"?g:qa(+g),p(),d):n},d.distance=function(g){return arguments.length?(i=typeof g=="function"?g:qa(+g),m(),d):i},d}const qdt=1664525,Wdt=1013904223,xle=4294967296;function Gdt(){let e=1;return()=>(e=(qdt*e+Wdt)%xle)/xle}function Ydt(e){return e.x}function Kdt(e){return e.y}var Xdt=10,Qdt=Math.PI*(3-Math.sqrt(5));function Jdt(e){var t,n=1,r=.001,i=1-Math.pow(r,1/300),s=0,o=.6,a=new Map,u=_K(f),l=b6("tick","end"),c=Gdt();e==null&&(e=[]);function f(){d(),l.call("tick",t),n<r&&(u.stop(),l.call("end",t))}function d(m){var g,y=e.length,v;m===void 0&&(m=1);for(var b=0;b<m;++b)for(n+=(s-n)*i,a.forEach(function(w){w(n)}),g=0;g<y;++g)v=e[g],v.fx==null?v.x+=v.vx*=o:(v.x=v.fx,v.vx=0),v.fy==null?v.y+=v.vy*=o:(v.y=v.fy,v.vy=0);return t}function h(){for(var m=0,g=e.length,y;m<g;++m){if(y=e[m],y.index=m,y.fx!=null&&(y.x=y.fx),y.fy!=null&&(y.y=y.fy),isNaN(y.x)||isNaN(y.y)){var v=Xdt*Math.sqrt(.5+m),b=m*Qdt;y.x=v*Math.cos(b),y.y=v*Math.sin(b)}(isNaN(y.vx)||isNaN(y.vy))&&(y.vx=y.vy=0)}}function p(m){return m.initialize&&m.initialize(e,c),m}return h(),t={tick:d,restart:function(){return u.restart(f),t},stop:function(){return u.stop(),t},nodes:function(m){return arguments.length?(e=m,h(),a.forEach(p),t):e},alpha:function(m){return arguments.length?(n=+m,t):n},alphaMin:function(m){return arguments.length?(r=+m,t):r},alphaDecay:function(m){return arguments.length?(i=+m,t):+i},alphaTarget:function(m){return arguments.length?(s=+m,t):s},velocityDecay:function(m){return arguments.length?(o=1-m,t):1-o},randomSource:function(m){return arguments.length?(c=m,a.forEach(p),t):c},force:function(m,g){return arguments.length>1?(g==null?a.delete(m):a.set(m,p(g)),t):a.get(m)},find:function(m,g,y){var v=0,b=e.length,w,E,T,S,C;for(y==null?y=1/0:y*=y,v=0;v<b;++v)S=e[v],w=m-S.x,E=g-S.y,T=w*w+E*E,T<y&&(C=S,y=T);return C},on:function(m,g){return arguments.length>1?(l.on(m,g),t):l.on(m)}}}function Zdt(){var e,t,n,r,i=qa(-30),s,o=1,a=1/0,u=.81;function l(h){var p,m=e.length,g=AK(e,Ydt,Kdt).visitAfter(f);for(r=h,p=0;p<m;++p)t=e[p],g.visit(d)}function c(){if(e){var h,p=e.length,m;for(s=new Array(p),h=0;h<p;++h)m=e[h],s[m.index]=+i(m,h,e)}}function f(h){var p=0,m,g,y=0,v,b,w;if(h.length){for(v=b=w=0;w<4;++w)(m=h[w])&&(g=Math.abs(m.value))&&(p+=m.value,y+=g,v+=g*m.x,b+=g*m.y);h.x=v/y,h.y=b/y}else{m=h,m.x=m.data.x,m.y=m.data.y;do p+=s[m.data.index];while(m=m.next)}h.value=p}function d(h,p,m,g){if(!h.value)return!0;var y=h.x-t.x,v=h.y-t.y,b=g-p,w=y*y+v*v;if(b*b/u<w)return w<a&&(y===0&&(y=Zg(n),w+=y*y),v===0&&(v=Zg(n),w+=v*v),w<o&&(w=Math.sqrt(o*w)),t.vx+=y*h.value*r/w,t.vy+=v*h.value*r/w),!0;if(h.length||w>=a)return;(h.data!==t||h.next)&&(y===0&&(y=Zg(n),w+=y*y),v===0&&(v=Zg(n),w+=v*v),w<o&&(w=Math.sqrt(o*w)));do h.data!==t&&(b=s[h.data.index]*r/w,t.vx+=y*b,t.vy+=v*b);while(h=h.next)}return l.initialize=function(h,p){e=h,n=p,c()},l.strength=function(h){return arguments.length?(i=typeof h=="function"?h:qa(+h),c(),l):i},l.distanceMin=function(h){return arguments.length?(o=h*h,l):Math.sqrt(o)},l.distanceMax=function(h){return arguments.length?(a=h*h,l):Math.sqrt(a)},l.theta=function(h){return arguments.length?(u=h*h,l):Math.sqrt(u)},l}function eht(e){var t=qa(.1),n,r,i;typeof e!="function"&&(e=qa(e==null?0:+e));function s(a){for(var u=0,l=n.length,c;u<l;++u)c=n[u],c.vx+=(i[u]-c.x)*r[u]*a}function o(){if(n){var a,u=n.length;for(r=new Array(u),i=new Array(u),a=0;a<u;++a)r[a]=isNaN(i[a]=+e(n[a],a,n))?0:+t(n[a],a,n)}}return s.initialize=function(a){n=a,o()},s.strength=function(a){return arguments.length?(t=typeof a=="function"?a:qa(+a),o(),s):t},s.x=function(a){return arguments.length?(e=typeof a=="function"?a:qa(+a),o(),s):e},s}function tht(e){var t=qa(.1),n,r,i;typeof e!="function"&&(e=qa(e==null?0:+e));function s(a){for(var u=0,l=n.length,c;u<l;++u)c=n[u],c.vy+=(i[u]-c.y)*r[u]*a}function o(){if(n){var a,u=n.length;for(r=new Array(u),i=new Array(u),a=0;a<u;++a)r[a]=isNaN(i[a]=+e(n[a],a,n))?0:+t(n[a],a,n)}}return s.initialize=function(a){n=a,o()},s.strength=function(a){return arguments.length?(t=typeof a=="function"?a:qa(+a),o(),s):t},s.y=function(a){return arguments.length?(e=typeof a=="function"?a:qa(+a),o(),s):e},s}function nht(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function E3(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function qE(e){return e=E3(Math.abs(e)),e?e[1]:NaN}function rht(e,t){return function(n,r){for(var i=n.length,s=[],o=0,a=e[0],u=0;i>0&&a>0&&(u+a+1>r&&(a=Math.max(1,r-u)),s.push(n.substring(i-=a,i+a)),!((u+=a+1)>r));)a=e[o=(o+1)%e.length];return s.reverse().join(t)}}function iht(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var sht=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Y1(e){if(!(t=sht.exec(e)))throw new Error("invalid format: "+e);var t;return new kK({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Y1.prototype=kK.prototype;function kK(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}kK.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function oht(e){e:for(var t=e.length,n=1,r=-1,i;n<t;++n)switch(e[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(i+1):e}var XSe;function aht(e,t){var n=E3(e,t);if(!n)return e+"";var r=n[0],i=n[1],s=i-(XSe=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,o=r.length;return s===o?r:s>o?r+new Array(s-o+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+E3(e,Math.max(0,t+s-1))[0]}function Sle(e,t){var n=E3(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const Tle={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:nht,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>Sle(e*100,t),r:Sle,s:aht,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function Cle(e){return e}var Ale=Array.prototype.map,Ile=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function QSe(e){var t=e.grouping===void 0||e.thousands===void 0?Cle:rht(Ale.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",s=e.numerals===void 0?Cle:iht(Ale.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",a=e.minus===void 0?"":e.minus+"",u=e.nan===void 0?"NaN":e.nan+"";function l(f){f=Y1(f);var d=f.fill,h=f.align,p=f.sign,m=f.symbol,g=f.zero,y=f.width,v=f.comma,b=f.precision,w=f.trim,E=f.type;E==="n"?(v=!0,E="g"):Tle[E]||(b===void 0&&(b=12),w=!0,E="g"),(g||d==="0"&&h==="=")&&(g=!0,d="0",h="=");var T=m==="$"?n:m==="#"&&/[boxX]/.test(E)?"0"+E.toLowerCase():"",S=m==="$"?r:/[%p]/.test(E)?o:"",C=Tle[E],A=/[defgprs%]/.test(E);b=b===void 0?6:/[gprs]/.test(E)?Math.max(1,Math.min(21,b)):Math.max(0,Math.min(20,b));function k(N){var O=T,P=S,$,F,M;if(E==="c")P=C(N)+P,N="";else{N=+N;var B=N<0||1/N<0;if(N=isNaN(N)?u:C(Math.abs(N),b),w&&(N=oht(N)),B&&+N==0&&p!=="+"&&(B=!1),O=(B?p==="("?p:a:p==="-"||p==="("?"":p)+O,P=(E==="s"?Ile[8+XSe/3]:"")+P+(B&&p==="("?")":""),A){for($=-1,F=N.length;++$<F;)if(M=N.charCodeAt($),48>M||M>57){P=(M===46?i+N.slice($+1):N.slice($))+P,N=N.slice(0,$);break}}}v&&!g&&(N=t(N,1/0));var U=O.length+N.length+P.length,H=U<y?new Array(y-U+1).join(d):"";switch(v&&g&&(N=t(H+N,H.length?y-P.length:1/0),H=""),h){case"<":N=O+N+P+H;break;case"=":N=O+H+N+P;break;case"^":N=H.slice(0,U=H.length>>1)+O+N+P+H.slice(U);break;default:N=H+O+N+P;break}return s(N)}return k.toString=function(){return f+""},k}function c(f,d){var h=l((f=Y1(f),f.type="f",f)),p=Math.max(-8,Math.min(8,Math.floor(qE(d)/3)))*3,m=Math.pow(10,-p),g=Ile[8+p/3];return function(y){return h(m*y)+g}}return{format:l,formatPrefix:c}}var VN,Fy,RK;uht({thousands:",",grouping:[3],currency:["$",""]});function uht(e){return VN=QSe(e),Fy=VN.format,RK=VN.formatPrefix,VN}function JSe(e){return Math.max(0,-qE(Math.abs(e)))}function ZSe(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(qE(t)/3)))*3-qE(Math.abs(e)))}function eTe(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,qE(t)-qE(e))+1}var Bt=1e-6,x3=1e-12,Dn=Math.PI,Gi=Dn/2,S3=Dn/4,Za=Dn*2,is=180/Dn,Rn=Dn/180,Xn=Math.abs,mS=Math.atan,$c=Math.atan2,zt=Math.cos,HN=Math.ceil,tTe=Math.exp,ez=Math.hypot,T3=Math.log,C8=Math.pow,Ft=Math.sin,xc=Math.sign||function(e){return e>0?1:e<0?-1:0},eu=Math.sqrt,NK=Math.tan;function nTe(e){return e>1?0:e<-1?Dn:Math.acos(e)}function Qu(e){return e>1?Gi:e<-1?-Gi:Math.asin(e)}function ko(){}function C3(e,t){e&&Rle.hasOwnProperty(e.type)&&Rle[e.type](e,t)}var kle={Feature:function(e,t){C3(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,i=n.length;++r<i;)C3(n[r].geometry,t)}},Rle={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)e=n[r],t.point(e[0],e[1],e[2])},LineString:function(e,t){tz(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)tz(n[r],t,0)},Polygon:function(e,t){Nle(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)Nle(n[r],t)},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,i=n.length;++r<i;)C3(n[r],t)}};function tz(e,t,n){var r=-1,i=e.length-n,s;for(t.lineStart();++r<i;)s=e[r],t.point(s[0],s[1],s[2]);t.lineEnd()}function Nle(e,t){var n=-1,r=e.length;for(t.polygonStart();++n<r;)tz(e[n],t,1);t.polygonEnd()}function Fp(e,t){e&&kle.hasOwnProperty(e.type)?kle[e.type](e,t):C3(e,t)}var A3=new Ya,I3=new Ya,rTe,iTe,nz,rz,iz,Th={point:ko,lineStart:ko,lineEnd:ko,polygonStart:function(){A3=new Ya,Th.lineStart=lht,Th.lineEnd=cht},polygonEnd:function(){var e=+A3;I3.add(e<0?Za+e:e),this.lineStart=this.lineEnd=this.point=ko},sphere:function(){I3.add(Za)}};function lht(){Th.point=fht}function cht(){sTe(rTe,iTe)}function fht(e,t){Th.point=sTe,rTe=e,iTe=t,e*=Rn,t*=Rn,nz=e,rz=zt(t=t/2+S3),iz=Ft(t)}function sTe(e,t){e*=Rn,t*=Rn,t=t/2+S3;var n=e-nz,r=n>=0?1:-1,i=r*n,s=zt(t),o=Ft(t),a=iz*o,u=rz*s+a*zt(i),l=a*r*Ft(i);A3.add($c(l,u)),nz=e,rz=s,iz=o}function dht(e){return I3=new Ya,Fp(e,Th),I3*2}function k3(e){return[$c(e[1],e[0]),Qu(e[2])]}function K1(e){var t=e[0],n=e[1],r=zt(n);return[r*zt(t),r*Ft(t),Ft(n)]}function qN(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function WE(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function A8(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function WN(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function R3(e){var t=eu(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}var Ri,Au,ji,vl,kv,oTe,aTe,eE,TC,Dg,Cm,Pp={point:sz,lineStart:Dle,lineEnd:Ple,polygonStart:function(){Pp.point=lTe,Pp.lineStart=hht,Pp.lineEnd=pht,TC=new Ya,Th.polygonStart()},polygonEnd:function(){Th.polygonEnd(),Pp.point=sz,Pp.lineStart=Dle,Pp.lineEnd=Ple,A3<0?(Ri=-(ji=180),Au=-(vl=90)):TC>Bt?vl=90:TC<-Bt&&(Au=-90),Cm[0]=Ri,Cm[1]=ji},sphere:function(){Ri=-(ji=180),Au=-(vl=90)}};function sz(e,t){Dg.push(Cm=[Ri=e,ji=e]),t<Au&&(Au=t),t>vl&&(vl=t)}function uTe(e,t){var n=K1([e*Rn,t*Rn]);if(eE){var r=WE(eE,n),i=[r[1],-r[0],0],s=WE(i,r);R3(s),s=k3(s);var o=e-kv,a=o>0?1:-1,u=s[0]*is*a,l,c=Xn(o)>180;c^(a*kv<u&&u<a*e)?(l=s[1]*is,l>vl&&(vl=l)):(u=(u+360)%360-180,c^(a*kv<u&&u<a*e)?(l=-s[1]*is,l<Au&&(Au=l)):(t<Au&&(Au=t),t>vl&&(vl=t))),c?e<kv?gl(Ri,e)>gl(Ri,ji)&&(ji=e):gl(e,ji)>gl(Ri,ji)&&(Ri=e):ji>=Ri?(e<Ri&&(Ri=e),e>ji&&(ji=e)):e>kv?gl(Ri,e)>gl(Ri,ji)&&(ji=e):gl(e,ji)>gl(Ri,ji)&&(Ri=e)}else Dg.push(Cm=[Ri=e,ji=e]);t<Au&&(Au=t),t>vl&&(vl=t),eE=n,kv=e}function Dle(){Pp.point=uTe}function Ple(){Cm[0]=Ri,Cm[1]=ji,Pp.point=sz,eE=null}function lTe(e,t){if(eE){var n=e-kv;TC.add(Xn(n)>180?n+(n>0?360:-360):n)}else oTe=e,aTe=t;Th.point(e,t),uTe(e,t)}function hht(){Th.lineStart()}function pht(){lTe(oTe,aTe),Th.lineEnd(),Xn(TC)>Bt&&(Ri=-(ji=180)),Cm[0]=Ri,Cm[1]=ji,eE=null}function gl(e,t){return(t-=e)<0?t+360:t}function mht(e,t){return e[0]-t[0]}function Ole(e,t){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}function ght(e){var t,n,r,i,s,o,a;if(vl=ji=-(Ri=Au=1/0),Dg=[],Fp(e,Pp),n=Dg.length){for(Dg.sort(mht),t=1,r=Dg[0],s=[r];t<n;++t)i=Dg[t],Ole(r,i[0])||Ole(r,i[1])?(gl(r[0],i[1])>gl(r[0],r[1])&&(r[1]=i[1]),gl(i[0],r[1])>gl(r[0],r[1])&&(r[0]=i[0])):s.push(r=i);for(o=-1/0,n=s.length-1,t=0,r=s[n];t<=n;r=i,++t)i=s[t],(a=gl(r[1],i[0]))>o&&(o=a,Ri=i[0],ji=r[1])}return Dg=Cm=null,Ri===1/0||Au===1/0?[[NaN,NaN],[NaN,NaN]]:[[Ri,Au],[ji,vl]]}var S2,N3,D3,P3,O3,$3,M3,L3,oz,az,uz,cTe,fTe,ja,Ba,Ua,Nf={sphere:ko,point:DK,lineStart:$le,lineEnd:Mle,polygonStart:function(){Nf.lineStart=bht,Nf.lineEnd=_ht},polygonEnd:function(){Nf.lineStart=$le,Nf.lineEnd=Mle}};function DK(e,t){e*=Rn,t*=Rn;var n=zt(t);Ak(n*zt(e),n*Ft(e),Ft(t))}function Ak(e,t,n){++S2,D3+=(e-D3)/S2,P3+=(t-P3)/S2,O3+=(n-O3)/S2}function $le(){Nf.point=yht}function yht(e,t){e*=Rn,t*=Rn;var n=zt(t);ja=n*zt(e),Ba=n*Ft(e),Ua=Ft(t),Nf.point=vht,Ak(ja,Ba,Ua)}function vht(e,t){e*=Rn,t*=Rn;var n=zt(t),r=n*zt(e),i=n*Ft(e),s=Ft(t),o=$c(eu((o=Ba*s-Ua*i)*o+(o=Ua*r-ja*s)*o+(o=ja*i-Ba*r)*o),ja*r+Ba*i+Ua*s);N3+=o,$3+=o*(ja+(ja=r)),M3+=o*(Ba+(Ba=i)),L3+=o*(Ua+(Ua=s)),Ak(ja,Ba,Ua)}function Mle(){Nf.point=DK}function bht(){Nf.point=wht}function _ht(){dTe(cTe,fTe),Nf.point=DK}function wht(e,t){cTe=e,fTe=t,e*=Rn,t*=Rn,Nf.point=dTe;var n=zt(t);ja=n*zt(e),Ba=n*Ft(e),Ua=Ft(t),Ak(ja,Ba,Ua)}function dTe(e,t){e*=Rn,t*=Rn;var n=zt(t),r=n*zt(e),i=n*Ft(e),s=Ft(t),o=Ba*s-Ua*i,a=Ua*r-ja*s,u=ja*i-Ba*r,l=ez(o,a,u),c=Qu(l),f=l&&-c/l;oz.add(f*o),az.add(f*a),uz.add(f*u),N3+=c,$3+=c*(ja+(ja=r)),M3+=c*(Ba+(Ba=i)),L3+=c*(Ua+(Ua=s)),Ak(ja,Ba,Ua)}function Eht(e){S2=N3=D3=P3=O3=$3=M3=L3=0,oz=new Ya,az=new Ya,uz=new Ya,Fp(e,Nf);var t=+oz,n=+az,r=+uz,i=ez(t,n,r);return i<x3&&(t=$3,n=M3,r=L3,N3<Bt&&(t=D3,n=P3,r=O3),i=ez(t,n,r),i<x3)?[NaN,NaN]:[$c(n,t)*is,Qu(r/i)*is]}function lz(e,t){function n(r,i){return r=e(r,i),t(r[0],r[1])}return e.invert&&t.invert&&(n.invert=function(r,i){return r=t.invert(r,i),r&&e.invert(r[0],r[1])}),n}function cz(e,t){return Xn(e)>Dn&&(e-=Math.round(e/Za)*Za),[e,t]}cz.invert=cz;function hTe(e,t,n){return(e%=Za)?t||n?lz(Fle(e),jle(t,n)):Fle(e):t||n?jle(t,n):cz}function Lle(e){return function(t,n){return t+=e,Xn(t)>Dn&&(t-=Math.round(t/Za)*Za),[t,n]}}function Fle(e){var t=Lle(e);return t.invert=Lle(-e),t}function jle(e,t){var n=zt(e),r=Ft(e),i=zt(t),s=Ft(t);function o(a,u){var l=zt(u),c=zt(a)*l,f=Ft(a)*l,d=Ft(u),h=d*n+c*r;return[$c(f*i-h*s,c*n-d*r),Qu(h*i+f*s)]}return o.invert=function(a,u){var l=zt(u),c=zt(a)*l,f=Ft(a)*l,d=Ft(u),h=d*i-f*s;return[$c(f*i+d*s,c*n+h*r),Qu(h*n-c*r)]},o}function xht(e){e=hTe(e[0]*Rn,e[1]*Rn,e.length>2?e[2]*Rn:0);function t(n){return n=e(n[0]*Rn,n[1]*Rn),n[0]*=is,n[1]*=is,n}return t.invert=function(n){return n=e.invert(n[0]*Rn,n[1]*Rn),n[0]*=is,n[1]*=is,n},t}function Sht(e,t,n,r,i,s){if(n){var o=zt(t),a=Ft(t),u=r*n;i==null?(i=t+r*Za,s=t-u/2):(i=Ble(o,i),s=Ble(o,s),(r>0?i<s:i>s)&&(i+=r*Za));for(var l,c=i;r>0?c>s:c<s;c-=u)l=k3([o,-a*zt(c),-a*Ft(c)]),e.point(l[0],l[1])}}function Ble(e,t){t=K1(t),t[0]-=e,R3(t);var n=nTe(-t[1]);return((-t[2]<0?-n:n)+Za-Bt)%Za}function pTe(){var e=[],t;return{point:function(n,r,i){t.push([n,r,i])},lineStart:function(){e.push(t=[])},lineEnd:ko,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function EP(e,t){return Xn(e[0]-t[0])<Bt&&Xn(e[1]-t[1])<Bt}function GN(e,t,n,r){this.x=e,this.z=t,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function mTe(e,t,n,r,i){var s=[],o=[],a,u;if(e.forEach(function(p){if(!((m=p.length-1)<=0)){var m,g=p[0],y=p[m],v;if(EP(g,y)){if(!g[2]&&!y[2]){for(i.lineStart(),a=0;a<m;++a)i.point((g=p[a])[0],g[1]);i.lineEnd();return}y[0]+=2*Bt}s.push(v=new GN(g,p,null,!0)),o.push(v.o=new GN(g,null,v,!1)),s.push(v=new GN(y,p,null,!1)),o.push(v.o=new GN(y,null,v,!0))}}),!!s.length){for(o.sort(t),Ule(s),Ule(o),a=0,u=o.length;a<u;++a)o[a].e=n=!n;for(var l=s[0],c,f;;){for(var d=l,h=!0;d.v;)if((d=d.n)===l)return;c=d.z,i.lineStart();do{if(d.v=d.o.v=!0,d.e){if(h)for(a=0,u=c.length;a<u;++a)i.point((f=c[a])[0],f[1]);else r(d.x,d.n.x,1,i);d=d.n}else{if(h)for(c=d.p.z,a=c.length-1;a>=0;--a)i.point((f=c[a])[0],f[1]);else r(d.x,d.p.x,-1,i);d=d.p}d=d.o,c=d.z,h=!h}while(!d.v);i.lineEnd()}}}function Ule(e){if(t=e.length){for(var t,n=0,r=e[0],i;++n<t;)r.n=i=e[n],i.p=r,r=i;r.n=i=e[0],i.p=r}}function I8(e){return Xn(e[0])<=Dn?e[0]:xc(e[0])*((Xn(e[0])+Dn)%Za-Dn)}function Tht(e,t){var n=I8(t),r=t[1],i=Ft(r),s=[Ft(n),-zt(n),0],o=0,a=0,u=new Ya;i===1?r=Gi+Bt:i===-1&&(r=-Gi-Bt);for(var l=0,c=e.length;l<c;++l)if(d=(f=e[l]).length)for(var f,d,h=f[d-1],p=I8(h),m=h[1]/2+S3,g=Ft(m),y=zt(m),v=0;v<d;++v,p=w,g=T,y=S,h=b){var b=f[v],w=I8(b),E=b[1]/2+S3,T=Ft(E),S=zt(E),C=w-p,A=C>=0?1:-1,k=A*C,N=k>Dn,O=g*T;if(u.add($c(O*A*Ft(k),y*S+O*zt(k))),o+=N?C+A*Za:C,N^p>=n^w>=n){var P=WE(K1(h),K1(b));R3(P);var $=WE(s,P);R3($);var F=(N^C>=0?-1:1)*Qu($[2]);(r>F||r===F&&(P[0]||P[1]))&&(a+=N^C>=0?1:-1)}}return(o<-Bt||o<Bt&&u<-x3)^a&1}function gTe(e,t,n,r){return function(i){var s=t(i),o=pTe(),a=t(o),u=!1,l,c,f,d={point:h,lineStart:m,lineEnd:g,polygonStart:function(){d.point=y,d.lineStart=v,d.lineEnd=b,c=[],l=[]},polygonEnd:function(){d.point=h,d.lineStart=m,d.lineEnd=g,c=Jxe(c);var w=Tht(l,r);c.length?(u||(i.polygonStart(),u=!0),mTe(c,Aht,w,n,i)):w&&(u||(i.polygonStart(),u=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),u&&(i.polygonEnd(),u=!1),c=l=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function h(w,E){e(w,E)&&i.point(w,E)}function p(w,E){s.point(w,E)}function m(){d.point=p,s.lineStart()}function g(){d.point=h,s.lineEnd()}function y(w,E){f.push([w,E]),a.point(w,E)}function v(){a.lineStart(),f=[]}function b(){y(f[0][0],f[0][1]),a.lineEnd();var w=a.clean(),E=o.result(),T,S=E.length,C,A,k;if(f.pop(),l.push(f),f=null,!!S){if(w&1){if(A=E[0],(C=A.length-1)>0){for(u||(i.polygonStart(),u=!0),i.lineStart(),T=0;T<C;++T)i.point((k=A[T])[0],k[1]);i.lineEnd()}return}S>1&&w&2&&E.push(E.pop().concat(E.shift())),c.push(E.filter(Cht))}}return d}}function Cht(e){return e.length>1}function Aht(e,t){return((e=e.x)[0]<0?e[1]-Gi-Bt:Gi-e[1])-((t=t.x)[0]<0?t[1]-Gi-Bt:Gi-t[1])}const zle=gTe(function(){return!0},Iht,Rht,[-Dn,-Gi]);function Iht(e){var t=NaN,n=NaN,r=NaN,i;return{lineStart:function(){e.lineStart(),i=1},point:function(s,o){var a=s>0?Dn:-Dn,u=Xn(s-t);Xn(u-Dn)<Bt?(e.point(t,n=(n+o)/2>0?Gi:-Gi),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(a,n),e.point(s,n),i=0):r!==a&&u>=Dn&&(Xn(t-r)<Bt&&(t-=r*Bt),Xn(s-a)<Bt&&(s-=a*Bt),n=kht(t,n,s,o),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(a,n),i=0),e.point(t=s,n=o),r=a},lineEnd:function(){e.lineEnd(),t=n=NaN},clean:function(){return 2-i}}}function kht(e,t,n,r){var i,s,o=Ft(e-n);return Xn(o)>Bt?mS((Ft(t)*(s=zt(r))*Ft(n)-Ft(r)*(i=zt(t))*Ft(e))/(i*s*o)):(t+r)/2}function Rht(e,t,n,r){var i;if(e==null)i=n*Gi,r.point(-Dn,i),r.point(0,i),r.point(Dn,i),r.point(Dn,0),r.point(Dn,-i),r.point(0,-i),r.point(-Dn,-i),r.point(-Dn,0),r.point(-Dn,i);else if(Xn(e[0]-t[0])>Bt){var s=e[0]<t[0]?Dn:-Dn;i=n*s/2,r.point(-s,i),r.point(0,i),r.point(s,i)}else r.point(t[0],t[1])}function Nht(e){var t=zt(e),n=2*Rn,r=t>0,i=Xn(t)>Bt;function s(c,f,d,h){Sht(h,e,n,d,c,f)}function o(c,f){return zt(c)*zt(f)>t}function a(c){var f,d,h,p,m;return{lineStart:function(){p=h=!1,m=1},point:function(g,y){var v=[g,y],b,w=o(g,y),E=r?w?0:l(g,y):w?l(g+(g<0?Dn:-Dn),y):0;if(!f&&(p=h=w)&&c.lineStart(),w!==h&&(b=u(f,v),(!b||EP(f,b)||EP(v,b))&&(v[2]=1)),w!==h)m=0,w?(c.lineStart(),b=u(v,f),c.point(b[0],b[1])):(b=u(f,v),c.point(b[0],b[1],2),c.lineEnd()),f=b;else if(i&&f&&r^w){var T;!(E&d)&&(T=u(v,f,!0))&&(m=0,r?(c.lineStart(),c.point(T[0][0],T[0][1]),c.point(T[1][0],T[1][1]),c.lineEnd()):(c.point(T[1][0],T[1][1]),c.lineEnd(),c.lineStart(),c.point(T[0][0],T[0][1],3)))}w&&(!f||!EP(f,v))&&c.point(v[0],v[1]),f=v,h=w,d=E},lineEnd:function(){h&&c.lineEnd(),f=null},clean:function(){return m|(p&&h)<<1}}}function u(c,f,d){var h=K1(c),p=K1(f),m=[1,0,0],g=WE(h,p),y=qN(g,g),v=g[0],b=y-v*v;if(!b)return!d&&c;var w=t*y/b,E=-t*v/b,T=WE(m,g),S=WN(m,w),C=WN(g,E);A8(S,C);var A=T,k=qN(S,A),N=qN(A,A),O=k*k-N*(qN(S,S)-1);if(!(O<0)){var P=eu(O),$=WN(A,(-k-P)/N);if(A8($,S),$=k3($),!d)return $;var F=c[0],M=f[0],B=c[1],U=f[1],H;M<F&&(H=F,F=M,M=H);var D=M-F,z=Xn(D-Dn)<Bt,W=z||D<Bt;if(!z&&U<B&&(H=B,B=U,U=H),W?z?B+U>0^$[1]<(Xn($[0]-F)<Bt?B:U):B<=$[1]&&$[1]<=U:D>Dn^(F<=$[0]&&$[0]<=M)){var j=WN(A,(-k+P)/N);return A8(j,S),[$,k3(j)]}}}function l(c,f){var d=r?e:Dn-e,h=0;return c<-d?h|=1:c>d&&(h|=2),f<-d?h|=4:f>d&&(h|=8),h}return gTe(o,a,s,r?[0,-e]:[-Dn,e-Dn])}function Dht(e,t,n,r,i,s){var o=e[0],a=e[1],u=t[0],l=t[1],c=0,f=1,d=u-o,h=l-a,p;if(p=n-o,!(!d&&p>0)){if(p/=d,d<0){if(p<c)return;p<f&&(f=p)}else if(d>0){if(p>f)return;p>c&&(c=p)}if(p=i-o,!(!d&&p<0)){if(p/=d,d<0){if(p>f)return;p>c&&(c=p)}else if(d>0){if(p<c)return;p<f&&(f=p)}if(p=r-a,!(!h&&p>0)){if(p/=h,h<0){if(p<c)return;p<f&&(f=p)}else if(h>0){if(p>f)return;p>c&&(c=p)}if(p=s-a,!(!h&&p<0)){if(p/=h,h<0){if(p>f)return;p>c&&(c=p)}else if(h>0){if(p<c)return;p<f&&(f=p)}return c>0&&(e[0]=o+c*d,e[1]=a+c*h),f<1&&(t[0]=o+f*d,t[1]=a+f*h),!0}}}}}var T2=1e9,YN=-T2;function yTe(e,t,n,r){function i(l,c){return e<=l&&l<=n&&t<=c&&c<=r}function s(l,c,f,d){var h=0,p=0;if(l==null||(h=o(l,f))!==(p=o(c,f))||u(l,c)<0^f>0)do d.point(h===0||h===3?e:n,h>1?r:t);while((h=(h+f+4)%4)!==p);else d.point(c[0],c[1])}function o(l,c){return Xn(l[0]-e)<Bt?c>0?0:3:Xn(l[0]-n)<Bt?c>0?2:1:Xn(l[1]-t)<Bt?c>0?1:0:c>0?3:2}function a(l,c){return u(l.x,c.x)}function u(l,c){var f=o(l,1),d=o(c,1);return f!==d?f-d:f===0?c[1]-l[1]:f===1?l[0]-c[0]:f===2?l[1]-c[1]:c[0]-l[0]}return function(l){var c=l,f=pTe(),d,h,p,m,g,y,v,b,w,E,T,S={point:C,lineStart:O,lineEnd:P,polygonStart:k,polygonEnd:N};function C(F,M){i(F,M)&&c.point(F,M)}function A(){for(var F=0,M=0,B=h.length;M<B;++M)for(var U=h[M],H=1,D=U.length,z=U[0],W,j,q=z[0],G=z[1];H<D;++H)W=q,j=G,z=U[H],q=z[0],G=z[1],j<=r?G>r&&(q-W)*(r-j)>(G-j)*(e-W)&&++F:G<=r&&(q-W)*(r-j)<(G-j)*(e-W)&&--F;return F}function k(){c=f,d=[],h=[],T=!0}function N(){var F=A(),M=T&&F,B=(d=Jxe(d)).length;(M||B)&&(l.polygonStart(),M&&(l.lineStart(),s(null,null,1,l),l.lineEnd()),B&&mTe(d,a,F,s,l),l.polygonEnd()),c=l,d=h=p=null}function O(){S.point=$,h&&h.push(p=[]),E=!0,w=!1,v=b=NaN}function P(){d&&($(m,g),y&&w&&f.rejoin(),d.push(f.result())),S.point=C,w&&c.lineEnd()}function $(F,M){var B=i(F,M);if(h&&p.push([F,M]),E)m=F,g=M,y=B,E=!1,B&&(c.lineStart(),c.point(F,M));else if(B&&w)c.point(F,M);else{var U=[v=Math.max(YN,Math.min(T2,v)),b=Math.max(YN,Math.min(T2,b))],H=[F=Math.max(YN,Math.min(T2,F)),M=Math.max(YN,Math.min(T2,M))];Dht(U,H,e,t,n,r)?(w||(c.lineStart(),c.point(U[0],U[1])),c.point(H[0],H[1]),B||c.lineEnd(),T=!1):B&&(c.lineStart(),c.point(F,M),T=!1)}v=F,b=M,w=B}return S}}function Vle(e,t,n){var r=$u(e,t-Bt,n).concat(t);return function(i){return r.map(function(s){return[i,s]})}}function Hle(e,t,n){var r=$u(e,t-Bt,n).concat(t);return function(i){return r.map(function(s){return[s,i]})}}function Pht(){var e,t,n,r,i,s,o,a,u=10,l=u,c=90,f=360,d,h,p,m,g=2.5;function y(){return{type:"MultiLineString",coordinates:v()}}function v(){return $u(HN(r/c)*c,n,c).map(p).concat($u(HN(a/f)*f,o,f).map(m)).concat($u(HN(t/u)*u,e,u).filter(function(b){return Xn(b%c)>Bt}).map(d)).concat($u(HN(s/l)*l,i,l).filter(function(b){return Xn(b%f)>Bt}).map(h))}return y.lines=function(){return v().map(function(b){return{type:"LineString",coordinates:b}})},y.outline=function(){return{type:"Polygon",coordinates:[p(r).concat(m(o).slice(1),p(n).reverse().slice(1),m(a).reverse().slice(1))]}},y.extent=function(b){return arguments.length?y.extentMajor(b).extentMinor(b):y.extentMinor()},y.extentMajor=function(b){return arguments.length?(r=+b[0][0],n=+b[1][0],a=+b[0][1],o=+b[1][1],r>n&&(b=r,r=n,n=b),a>o&&(b=a,a=o,o=b),y.precision(g)):[[r,a],[n,o]]},y.extentMinor=function(b){return arguments.length?(t=+b[0][0],e=+b[1][0],s=+b[0][1],i=+b[1][1],t>e&&(b=t,t=e,e=b),s>i&&(b=s,s=i,i=b),y.precision(g)):[[t,s],[e,i]]},y.step=function(b){return arguments.length?y.stepMajor(b).stepMinor(b):y.stepMinor()},y.stepMajor=function(b){return arguments.length?(c=+b[0],f=+b[1],y):[c,f]},y.stepMinor=function(b){return arguments.length?(u=+b[0],l=+b[1],y):[u,l]},y.precision=function(b){return arguments.length?(g=+b,d=Vle(s,i,90),h=Hle(t,e,g),p=Vle(a,o,90),m=Hle(r,n,g),y):g},y.extentMajor([[-180,-90+Bt],[180,90-Bt]]).extentMinor([[-180,-80-Bt],[180,80+Bt]])}const WA=e=>e;var k8=new Ya,fz=new Ya,vTe,bTe,dz,hz,jp={point:ko,lineStart:ko,lineEnd:ko,polygonStart:function(){jp.lineStart=Oht,jp.lineEnd=Mht},polygonEnd:function(){jp.lineStart=jp.lineEnd=jp.point=ko,k8.add(Xn(fz)),fz=new Ya},result:function(){var e=k8/2;return k8=new Ya,e}};function Oht(){jp.point=$ht}function $ht(e,t){jp.point=_Te,vTe=dz=e,bTe=hz=t}function _Te(e,t){fz.add(hz*e-dz*t),dz=e,hz=t}function Mht(){_Te(vTe,bTe)}var GE=1/0,F3=GE,GA=-GE,j3=GA,B3={point:Lht,lineStart:ko,lineEnd:ko,polygonStart:ko,polygonEnd:ko,result:function(){var e=[[GE,F3],[GA,j3]];return GA=j3=-(F3=GE=1/0),e}};function Lht(e,t){e<GE&&(GE=e),e>GA&&(GA=e),t<F3&&(F3=t),t>j3&&(j3=t)}var pz=0,mz=0,C2=0,U3=0,z3=0,Iw=0,gz=0,yz=0,A2=0,wTe,ETe,zd,Vd,_c={point:X1,lineStart:qle,lineEnd:Wle,polygonStart:function(){_c.lineStart=Bht,_c.lineEnd=Uht},polygonEnd:function(){_c.point=X1,_c.lineStart=qle,_c.lineEnd=Wle},result:function(){var e=A2?[gz/A2,yz/A2]:Iw?[U3/Iw,z3/Iw]:C2?[pz/C2,mz/C2]:[NaN,NaN];return pz=mz=C2=U3=z3=Iw=gz=yz=A2=0,e}};function X1(e,t){pz+=e,mz+=t,++C2}function qle(){_c.point=Fht}function Fht(e,t){_c.point=jht,X1(zd=e,Vd=t)}function jht(e,t){var n=e-zd,r=t-Vd,i=eu(n*n+r*r);U3+=i*(zd+e)/2,z3+=i*(Vd+t)/2,Iw+=i,X1(zd=e,Vd=t)}function Wle(){_c.point=X1}function Bht(){_c.point=zht}function Uht(){xTe(wTe,ETe)}function zht(e,t){_c.point=xTe,X1(wTe=zd=e,ETe=Vd=t)}function xTe(e,t){var n=e-zd,r=t-Vd,i=eu(n*n+r*r);U3+=i*(zd+e)/2,z3+=i*(Vd+t)/2,Iw+=i,i=Vd*e-zd*t,gz+=i*(zd+e),yz+=i*(Vd+t),A2+=i*3,X1(zd=e,Vd=t)}function STe(e){this._context=e}STe.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._context.moveTo(e,t),this._point=1;break}case 1:{this._context.lineTo(e,t);break}default:{this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,Za);break}}},result:ko};var vz=new Ya,R8,TTe,CTe,I2,k2,YA={point:ko,lineStart:function(){YA.point=Vht},lineEnd:function(){R8&&ATe(TTe,CTe),YA.point=ko},polygonStart:function(){R8=!0},polygonEnd:function(){R8=null},result:function(){var e=+vz;return vz=new Ya,e}};function Vht(e,t){YA.point=ATe,TTe=I2=e,CTe=k2=t}function ATe(e,t){I2-=e,k2-=t,vz.add(eu(I2*I2+k2*k2)),I2=e,k2=t}let Gle,V3,Yle,Kle;class Xle{constructor(t){this._append=t==null?ITe:Hht(t),this._radius=4.5,this._=""}pointRadius(t){return this._radius=+t,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(t,n){switch(this._point){case 0:{this._append`M${t},${n}`,this._point=1;break}case 1:{this._append`L${t},${n}`;break}default:{if(this._append`M${t},${n}`,this._radius!==Yle||this._append!==V3){const r=this._radius,i=this._;this._="",this._append`m0,${r}a${r},${r} 0 1,1 0,${-2*r}a${r},${r} 0 1,1 0,${2*r}z`,Yle=r,V3=this._append,Kle=this._,this._=i}this._+=Kle;break}}}result(){const t=this._;return this._="",t.length?t:null}}function ITe(e){let t=1;this._+=e[0];for(const n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function Hht(e){const t=Math.floor(e);if(!(t>=0))throw new RangeError(`invalid digits: ${e}`);if(t>15)return ITe;if(t!==Gle){const n=10**t;Gle=t,V3=function(i){let s=1;this._+=i[0];for(const o=i.length;s<o;++s)this._+=Math.round(arguments[s]*n)/n+i[s]}}return V3}function kTe(e,t){let n=3,r=4.5,i,s;function o(a){return a&&(typeof r=="function"&&s.pointRadius(+r.apply(this,arguments)),Fp(a,i(s))),s.result()}return o.area=function(a){return Fp(a,i(jp)),jp.result()},o.measure=function(a){return Fp(a,i(YA)),YA.result()},o.bounds=function(a){return Fp(a,i(B3)),B3.result()},o.centroid=function(a){return Fp(a,i(_c)),_c.result()},o.projection=function(a){return arguments.length?(i=a==null?(e=null,WA):(e=a).stream,o):e},o.context=function(a){return arguments.length?(s=a==null?(t=null,new Xle(n)):new STe(t=a),typeof r!="function"&&s.pointRadius(r),o):t},o.pointRadius=function(a){return arguments.length?(r=typeof a=="function"?a:(s.pointRadius(+a),+a),o):r},o.digits=function(a){if(!arguments.length)return n;if(a==null)n=null;else{const u=Math.floor(a);if(!(u>=0))throw new RangeError(`invalid digits: ${a}`);n=u}return t===null&&(s=new Xle(n)),o},o.projection(e).digits(n).context(t)}function I6(e){return function(t){var n=new bz;for(var r in e)n[r]=e[r];return n.stream=t,n}}function bz(){}bz.prototype={constructor:bz,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function PK(e,t,n){var r=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),r!=null&&e.clipExtent(null),Fp(n,e.stream(B3)),t(B3.result()),r!=null&&e.clipExtent(r),e}function k6(e,t,n){return PK(e,function(r){var i=t[1][0]-t[0][0],s=t[1][1]-t[0][1],o=Math.min(i/(r[1][0]-r[0][0]),s/(r[1][1]-r[0][1])),a=+t[0][0]+(i-o*(r[1][0]+r[0][0]))/2,u=+t[0][1]+(s-o*(r[1][1]+r[0][1]))/2;e.scale(150*o).translate([a,u])},n)}function OK(e,t,n){return k6(e,[[0,0],t],n)}function $K(e,t,n){return PK(e,function(r){var i=+t,s=i/(r[1][0]-r[0][0]),o=(i-s*(r[1][0]+r[0][0]))/2,a=-s*r[0][1];e.scale(150*s).translate([o,a])},n)}function MK(e,t,n){return PK(e,function(r){var i=+t,s=i/(r[1][1]-r[0][1]),o=-s*r[0][0],a=(i-s*(r[1][1]+r[0][1]))/2;e.scale(150*s).translate([o,a])},n)}var Qle=16,qht=zt(30*Rn);function Jle(e,t){return+t?Ght(e,t):Wht(e)}function Wht(e){return I6({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}function Ght(e,t){function n(r,i,s,o,a,u,l,c,f,d,h,p,m,g){var y=l-r,v=c-i,b=y*y+v*v;if(b>4*t&&m--){var w=o+d,E=a+h,T=u+p,S=eu(w*w+E*E+T*T),C=Qu(T/=S),A=Xn(Xn(T)-1)<Bt||Xn(s-f)<Bt?(s+f)/2:$c(E,w),k=e(A,C),N=k[0],O=k[1],P=N-r,$=O-i,F=v*P-y*$;(F*F/b>t||Xn((y*P+v*$)/b-.5)>.3||o*d+a*h+u*p<qht)&&(n(r,i,s,o,a,u,N,O,A,w/=S,E/=S,T,m,g),g.point(N,O),n(N,O,A,w,E,T,l,c,f,d,h,p,m,g))}}return function(r){var i,s,o,a,u,l,c,f,d,h,p,m,g={point:y,lineStart:v,lineEnd:w,polygonStart:function(){r.polygonStart(),g.lineStart=E},polygonEnd:function(){r.polygonEnd(),g.lineStart=v}};function y(C,A){C=e(C,A),r.point(C[0],C[1])}function v(){f=NaN,g.point=b,r.lineStart()}function b(C,A){var k=K1([C,A]),N=e(C,A);n(f,d,c,h,p,m,f=N[0],d=N[1],c=C,h=k[0],p=k[1],m=k[2],Qle,r),r.point(f,d)}function w(){g.point=y,r.lineEnd()}function E(){v(),g.point=T,g.lineEnd=S}function T(C,A){b(i=C,A),s=f,o=d,a=h,u=p,l=m,g.point=b}function S(){n(f,d,c,h,p,m,s,o,i,a,u,l,Qle,r),g.lineEnd=w,w()}return g}}var Yht=I6({point:function(e,t){this.stream.point(e*Rn,t*Rn)}});function Kht(e){return I6({point:function(t,n){var r=e(t,n);return this.stream.point(r[0],r[1])}})}function Xht(e,t,n,r,i){function s(o,a){return o*=r,a*=i,[t+e*o,n-e*a]}return s.invert=function(o,a){return[(o-t)/e*r,(n-a)/e*i]},s}function Zle(e,t,n,r,i,s){if(!s)return Xht(e,t,n,r,i);var o=zt(s),a=Ft(s),u=o*e,l=a*e,c=o/e,f=a/e,d=(a*n-o*t)/e,h=(a*t+o*n)/e;function p(m,g){return m*=r,g*=i,[u*m-l*g+t,n-l*m-u*g]}return p.invert=function(m,g){return[r*(c*m-f*g+d),i*(h-f*m-c*g)]},p}function Jh(e){return RTe(function(){return e})()}function RTe(e){var t,n=150,r=480,i=250,s=0,o=0,a=0,u=0,l=0,c,f=0,d=1,h=1,p=null,m=zle,g=null,y,v,b,w=WA,E=.5,T,S,C,A,k;function N(F){return C(F[0]*Rn,F[1]*Rn)}function O(F){return F=C.invert(F[0],F[1]),F&&[F[0]*is,F[1]*is]}N.stream=function(F){return A&&k===F?A:A=Yht(Kht(c)(m(T(w(k=F)))))},N.preclip=function(F){return arguments.length?(m=F,p=void 0,$()):m},N.postclip=function(F){return arguments.length?(w=F,g=y=v=b=null,$()):w},N.clipAngle=function(F){return arguments.length?(m=+F?Nht(p=F*Rn):(p=null,zle),$()):p*is},N.clipExtent=function(F){return arguments.length?(w=F==null?(g=y=v=b=null,WA):yTe(g=+F[0][0],y=+F[0][1],v=+F[1][0],b=+F[1][1]),$()):g==null?null:[[g,y],[v,b]]},N.scale=function(F){return arguments.length?(n=+F,P()):n},N.translate=function(F){return arguments.length?(r=+F[0],i=+F[1],P()):[r,i]},N.center=function(F){return arguments.length?(s=F[0]%360*Rn,o=F[1]%360*Rn,P()):[s*is,o*is]},N.rotate=function(F){return arguments.length?(a=F[0]%360*Rn,u=F[1]%360*Rn,l=F.length>2?F[2]%360*Rn:0,P()):[a*is,u*is,l*is]},N.angle=function(F){return arguments.length?(f=F%360*Rn,P()):f*is},N.reflectX=function(F){return arguments.length?(d=F?-1:1,P()):d<0},N.reflectY=function(F){return arguments.length?(h=F?-1:1,P()):h<0},N.precision=function(F){return arguments.length?(T=Jle(S,E=F*F),$()):eu(E)},N.fitExtent=function(F,M){return k6(N,F,M)},N.fitSize=function(F,M){return OK(N,F,M)},N.fitWidth=function(F,M){return $K(N,F,M)},N.fitHeight=function(F,M){return MK(N,F,M)};function P(){var F=Zle(n,0,0,d,h,f).apply(null,t(s,o)),M=Zle(n,r-F[0],i-F[1],d,h,f);return c=hTe(a,u,l),S=lz(t,M),C=lz(c,S),T=Jle(S,E),$()}function $(){return A=k=null,N}return function(){return t=e.apply(this,arguments),N.invert=t.invert&&O,P()}}function LK(e){var t=0,n=Dn/3,r=RTe(e),i=r(t,n);return i.parallels=function(s){return arguments.length?r(t=s[0]*Rn,n=s[1]*Rn):[t*is,n*is]},i}function Qht(e){var t=zt(e);function n(r,i){return[r*t,Ft(i)/t]}return n.invert=function(r,i){return[r/t,Qu(i*t)]},n}function Jht(e,t){var n=Ft(e),r=(n+Ft(t))/2;if(Xn(r)<Bt)return Qht(e);var i=1+n*(2*r-n),s=eu(i)/r;function o(a,u){var l=eu(i-2*r*Ft(u))/r;return[l*Ft(a*=r),s-l*zt(a)]}return o.invert=function(a,u){var l=s-u,c=$c(a,Xn(l))*xc(l);return l*r<0&&(c-=Dn*xc(a)*xc(l)),[c/r,Qu((i-(a*a+l*l)*r*r)/(2*r))]},o}function H3(){return LK(Jht).scale(155.424).center([0,33.6442])}function NTe(){return H3().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function Zht(e){var t=e.length;return{point:function(n,r){for(var i=-1;++i<t;)e[i].point(n,r)},sphere:function(){for(var n=-1;++n<t;)e[n].sphere()},lineStart:function(){for(var n=-1;++n<t;)e[n].lineStart()},lineEnd:function(){for(var n=-1;++n<t;)e[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<t;)e[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<t;)e[n].polygonEnd()}}}function ept(){var e,t,n=NTe(),r,i=H3().rotate([154,0]).center([-2,58.5]).parallels([55,65]),s,o=H3().rotate([157,0]).center([-3,19.9]).parallels([8,18]),a,u,l={point:function(d,h){u=[d,h]}};function c(d){var h=d[0],p=d[1];return u=null,r.point(h,p),u||(s.point(h,p),u)||(a.point(h,p),u)}c.invert=function(d){var h=n.scale(),p=n.translate(),m=(d[0]-p[0])/h,g=(d[1]-p[1])/h;return(g>=.12&&g<.234&&m>=-.425&&m<-.214?i:g>=.166&&g<.234&&m>=-.214&&m<-.115?o:n).invert(d)},c.stream=function(d){return e&&t===d?e:e=Zht([n.stream(t=d),i.stream(d),o.stream(d)])},c.precision=function(d){return arguments.length?(n.precision(d),i.precision(d),o.precision(d),f()):n.precision()},c.scale=function(d){return arguments.length?(n.scale(d),i.scale(d*.35),o.scale(d),c.translate(n.translate())):n.scale()},c.translate=function(d){if(!arguments.length)return n.translate();var h=n.scale(),p=+d[0],m=+d[1];return r=n.translate(d).clipExtent([[p-.455*h,m-.238*h],[p+.455*h,m+.238*h]]).stream(l),s=i.translate([p-.307*h,m+.201*h]).clipExtent([[p-.425*h+Bt,m+.12*h+Bt],[p-.214*h-Bt,m+.234*h-Bt]]).stream(l),a=o.translate([p-.205*h,m+.212*h]).clipExtent([[p-.214*h+Bt,m+.166*h+Bt],[p-.115*h-Bt,m+.234*h-Bt]]).stream(l),f()},c.fitExtent=function(d,h){return k6(c,d,h)},c.fitSize=function(d,h){return OK(c,d,h)},c.fitWidth=function(d,h){return $K(c,d,h)},c.fitHeight=function(d,h){return MK(c,d,h)};function f(){return e=t=null,c}return c.scale(1070)}function DTe(e){return function(t,n){var r=zt(t),i=zt(n),s=e(r*i);return s===1/0?[2,0]:[s*i*Ft(t),s*Ft(n)]}}function Ik(e){return function(t,n){var r=eu(t*t+n*n),i=e(r),s=Ft(i),o=zt(i);return[$c(t*s,r*o),Qu(r&&n*s/r)]}}var PTe=DTe(function(e){return eu(2/(1+e))});PTe.invert=Ik(function(e){return 2*Qu(e/2)});function tpt(){return Jh(PTe).scale(124.75).clipAngle(180-.001)}var OTe=DTe(function(e){return(e=nTe(e))&&e/Ft(e)});OTe.invert=Ik(function(e){return e});function npt(){return Jh(OTe).scale(79.4188).clipAngle(180-.001)}function R6(e,t){return[e,T3(NK((Gi+t)/2))]}R6.invert=function(e,t){return[e,2*mS(tTe(t))-Gi]};function rpt(){return $Te(R6).scale(961/Za)}function $Te(e){var t=Jh(e),n=t.center,r=t.scale,i=t.translate,s=t.clipExtent,o=null,a,u,l;t.scale=function(f){return arguments.length?(r(f),c()):r()},t.translate=function(f){return arguments.length?(i(f),c()):i()},t.center=function(f){return arguments.length?(n(f),c()):n()},t.clipExtent=function(f){return arguments.length?(f==null?o=a=u=l=null:(o=+f[0][0],a=+f[0][1],u=+f[1][0],l=+f[1][1]),c()):o==null?null:[[o,a],[u,l]]};function c(){var f=Dn*r(),d=t(xht(t.rotate()).invert([0,0]));return s(o==null?[[d[0]-f,d[1]-f],[d[0]+f,d[1]+f]]:e===R6?[[Math.max(d[0]-f,o),a],[Math.min(d[0]+f,u),l]]:[[o,Math.max(d[1]-f,a)],[u,Math.min(d[1]+f,l)]])}return c()}function KN(e){return NK((Gi+e)/2)}function ipt(e,t){var n=zt(e),r=e===t?Ft(e):T3(n/zt(t))/T3(KN(t)/KN(e)),i=n*C8(KN(e),r)/r;if(!r)return R6;function s(o,a){i>0?a<-Gi+Bt&&(a=-Gi+Bt):a>Gi-Bt&&(a=Gi-Bt);var u=i/C8(KN(a),r);return[u*Ft(r*o),i-u*zt(r*o)]}return s.invert=function(o,a){var u=i-a,l=xc(r)*eu(o*o+u*u),c=$c(o,Xn(u))*xc(u);return u*r<0&&(c-=Dn*xc(o)*xc(u)),[c/r,2*mS(C8(i/l,1/r))-Gi]},s}function spt(){return LK(ipt).scale(109.5).parallels([30,30])}function q3(e,t){return[e,t]}q3.invert=q3;function opt(){return Jh(q3).scale(152.63)}function apt(e,t){var n=zt(e),r=e===t?Ft(e):(n-zt(t))/(t-e),i=n/r+e;if(Xn(r)<Bt)return q3;function s(o,a){var u=i-a,l=r*o;return[u*Ft(l),i-u*zt(l)]}return s.invert=function(o,a){var u=i-a,l=$c(o,Xn(u))*xc(u);return u*r<0&&(l-=Dn*xc(o)*xc(u)),[l/r,i-xc(r)*eu(o*o+u*u)]},s}function upt(){return LK(apt).scale(131.154).center([0,13.9389])}var CC=1.340264,AC=-.081106,IC=893e-6,kC=.003796,W3=eu(3)/2,lpt=12;function MTe(e,t){var n=Qu(W3*Ft(t)),r=n*n,i=r*r*r;return[e*zt(n)/(W3*(CC+3*AC*r+i*(7*IC+9*kC*r))),n*(CC+AC*r+i*(IC+kC*r))]}MTe.invert=function(e,t){for(var n=t,r=n*n,i=r*r*r,s=0,o,a,u;s<lpt&&(a=n*(CC+AC*r+i*(IC+kC*r))-t,u=CC+3*AC*r+i*(7*IC+9*kC*r),n-=o=a/u,r=n*n,i=r*r*r,!(Xn(o)<x3));++s);return[W3*e*(CC+3*AC*r+i*(7*IC+9*kC*r))/zt(n),Qu(Ft(n)/W3)]};function cpt(){return Jh(MTe).scale(177.158)}function LTe(e,t){var n=zt(t),r=zt(e)*n;return[n*Ft(e)/r,Ft(t)/r]}LTe.invert=Ik(mS);function fpt(){return Jh(LTe).scale(144.049).clipAngle(60)}function dpt(){var e=1,t=0,n=0,r=1,i=1,s=0,o,a,u=null,l,c,f,d=1,h=1,p=I6({point:function(w,E){var T=b([w,E]);this.stream.point(T[0],T[1])}}),m=WA,g,y;function v(){return d=e*r,h=e*i,g=y=null,b}function b(w){var E=w[0]*d,T=w[1]*h;if(s){var S=T*o-E*a;E=E*o+T*a,T=S}return[E+t,T+n]}return b.invert=function(w){var E=w[0]-t,T=w[1]-n;if(s){var S=T*o+E*a;E=E*o-T*a,T=S}return[E/d,T/h]},b.stream=function(w){return g&&y===w?g:g=p(m(y=w))},b.postclip=function(w){return arguments.length?(m=w,u=l=c=f=null,v()):m},b.clipExtent=function(w){return arguments.length?(m=w==null?(u=l=c=f=null,WA):yTe(u=+w[0][0],l=+w[0][1],c=+w[1][0],f=+w[1][1]),v()):u==null?null:[[u,l],[c,f]]},b.scale=function(w){return arguments.length?(e=+w,v()):e},b.translate=function(w){return arguments.length?(t=+w[0],n=+w[1],v()):[t,n]},b.angle=function(w){return arguments.length?(s=w%360*Rn,a=Ft(s),o=zt(s),v()):s*is},b.reflectX=function(w){return arguments.length?(r=w?-1:1,v()):r<0},b.reflectY=function(w){return arguments.length?(i=w?-1:1,v()):i<0},b.fitExtent=function(w,E){return k6(b,w,E)},b.fitSize=function(w,E){return OK(b,w,E)},b.fitWidth=function(w,E){return $K(b,w,E)},b.fitHeight=function(w,E){return MK(b,w,E)},b}function FTe(e,t){var n=t*t,r=n*n;return[e*(.8707-.131979*n+r*(-.013791+r*(.003971*n-.001529*r))),t*(1.007226+n*(.015085+r*(-.044475+.028874*n-.005916*r)))]}FTe.invert=function(e,t){var n=t,r=25,i;do{var s=n*n,o=s*s;n-=i=(n*(1.007226+s*(.015085+o*(-.044475+.028874*s-.005916*o)))-t)/(1.007226+s*(.015085*3+o*(-.044475*7+.028874*9*s-.005916*11*o)))}while(Xn(i)>Bt&&--r>0);return[e/(.8707+(s=n*n)*(-.131979+s*(-.013791+s*s*s*(.003971-.001529*s)))),n]};function hpt(){return Jh(FTe).scale(175.295)}function jTe(e,t){return[zt(t)*Ft(e),Ft(t)]}jTe.invert=Ik(Qu);function ppt(){return Jh(jTe).scale(249.5).clipAngle(90+Bt)}function BTe(e,t){var n=zt(t),r=1+zt(e)*n;return[n*Ft(e)/r,Ft(t)/r]}BTe.invert=Ik(function(e){return 2*mS(e)});function mpt(){return Jh(BTe).scale(250).clipAngle(142)}function UTe(e,t){return[T3(NK((Gi+t)/2)),-e]}UTe.invert=function(e,t){return[-t,2*mS(tTe(e))-Gi]};function gpt(){var e=$Te(UTe),t=e.center,n=e.rotate;return e.center=function(r){return arguments.length?t([-r[1],r[0]]):(r=t(),[r[1],-r[0]])},e.rotate=function(r){return arguments.length?n([r[0],r[1],r.length>2?r[2]+90:90]):(r=n(),[r[0],r[1],r[2]-90])},n([0,0,90]).scale(159.155)}function ypt(e,t){return e.parent===t.parent?1:2}function vpt(e){return e.reduce(bpt,0)/e.length}function bpt(e,t){return e+t.x}function _pt(e){return 1+e.reduce(wpt,0)}function wpt(e,t){return Math.max(e,t.y)}function Ept(e){for(var t;t=e.children;)e=t[0];return e}function xpt(e){for(var t;t=e.children;)e=t[t.length-1];return e}function Spt(){var e=ypt,t=1,n=1,r=!1;function i(s){var o,a=0;s.eachAfter(function(d){var h=d.children;h?(d.x=vpt(h),d.y=_pt(h)):(d.x=o?a+=e(d,o):0,d.y=0,o=d)});var u=Ept(s),l=xpt(s),c=u.x-e(u,l)/2,f=l.x+e(l,u)/2;return s.eachAfter(r?function(d){d.x=(d.x-s.x)*t,d.y=(s.y-d.y)*n}:function(d){d.x=(d.x-c)/(f-c)*t,d.y=(1-(s.y?d.y/s.y:1))*n})}return i.separation=function(s){return arguments.length?(e=s,i):e},i.size=function(s){return arguments.length?(r=!1,t=+s[0],n=+s[1],i):r?null:[t,n]},i.nodeSize=function(s){return arguments.length?(r=!0,t=+s[0],n=+s[1],i):r?[t,n]:null},i}function Tpt(e){var t=0,n=e.children,r=n&&n.length;if(!r)t=1;else for(;--r>=0;)t+=n[r].value;e.value=t}function Cpt(){return this.eachAfter(Tpt)}function Apt(e,t){let n=-1;for(const r of this)e.call(t,r,++n,this);return this}function Ipt(e,t){for(var n=this,r=[n],i,s,o=-1;n=r.pop();)if(e.call(t,n,++o,this),i=n.children)for(s=i.length-1;s>=0;--s)r.push(i[s]);return this}function kpt(e,t){for(var n=this,r=[n],i=[],s,o,a,u=-1;n=r.pop();)if(i.push(n),s=n.children)for(o=0,a=s.length;o<a;++o)r.push(s[o]);for(;n=i.pop();)e.call(t,n,++u,this);return this}function Rpt(e,t){let n=-1;for(const r of this)if(e.call(t,r,++n,this))return r}function Npt(e){return this.eachAfter(function(t){for(var n=+e(t.data)||0,r=t.children,i=r&&r.length;--i>=0;)n+=r[i].value;t.value=n})}function Dpt(e){return this.eachBefore(function(t){t.children&&t.children.sort(e)})}function Ppt(e){for(var t=this,n=Opt(t,e),r=[t];t!==n;)t=t.parent,r.push(t);for(var i=r.length;e!==n;)r.splice(i,0,e),e=e.parent;return r}function Opt(e,t){if(e===t)return e;var n=e.ancestors(),r=t.ancestors(),i=null;for(e=n.pop(),t=r.pop();e===t;)i=e,e=n.pop(),t=r.pop();return i}function $pt(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t}function Mpt(){return Array.from(this)}function Lpt(){var e=[];return this.eachBefore(function(t){t.children||e.push(t)}),e}function Fpt(){var e=this,t=[];return e.each(function(n){n!==e&&t.push({source:n.parent,target:n})}),t}function*jpt(){var e=this,t,n=[e],r,i,s;do for(t=n.reverse(),n=[];e=t.pop();)if(yield e,r=e.children)for(i=0,s=r.length;i<s;++i)n.push(r[i]);while(n.length)}function N6(e,t){e instanceof Map?(e=[void 0,e],t===void 0&&(t=zpt)):t===void 0&&(t=Upt);for(var n=new YE(e),r,i=[n],s,o,a,u;r=i.pop();)if((o=t(r.data))&&(u=(o=Array.from(o)).length))for(r.children=o,a=u-1;a>=0;--a)i.push(s=o[a]=new YE(o[a])),s.parent=r,s.depth=r.depth+1;return n.eachBefore(zTe)}function Bpt(){return N6(this).eachBefore(Vpt)}function Upt(e){return e.children}function zpt(e){return Array.isArray(e)?e[1]:null}function Vpt(e){e.data.value!==void 0&&(e.value=e.data.value),e.data=e.data.data}function zTe(e){var t=0;do e.height=t;while((e=e.parent)&&e.height<++t)}function YE(e){this.data=e,this.depth=this.height=0,this.parent=null}YE.prototype=N6.prototype={constructor:YE,count:Cpt,each:Apt,eachAfter:kpt,eachBefore:Ipt,find:Rpt,sum:Npt,sort:Dpt,path:Ppt,ancestors:$pt,descendants:Mpt,leaves:Lpt,links:Fpt,copy:Bpt,[Symbol.iterator]:jpt};function xP(e){return e==null?null:VTe(e)}function VTe(e){if(typeof e!="function")throw new Error;return e}function Vv(){return 0}function nw(e){return function(){return e}}const Hpt=1664525,qpt=1013904223,ece=4294967296;function Wpt(){let e=1;return()=>(e=(Hpt*e+qpt)%ece)/ece}function Gpt(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Ypt(e,t){let n=e.length,r,i;for(;n;)i=t()*n--|0,r=e[n],e[n]=e[i],e[i]=r;return e}function Kpt(e,t){for(var n=0,r=(e=Ypt(Array.from(e),t)).length,i=[],s,o;n<r;)s=e[n],o&&HTe(o,s)?++n:(o=Qpt(i=Xpt(i,s)),n=0);return o}function Xpt(e,t){var n,r;if(N8(t,e))return[t];for(n=0;n<e.length;++n)if(XN(t,e[n])&&N8(R2(e[n],t),e))return[e[n],t];for(n=0;n<e.length-1;++n)for(r=n+1;r<e.length;++r)if(XN(R2(e[n],e[r]),t)&&XN(R2(e[n],t),e[r])&&XN(R2(e[r],t),e[n])&&N8(qTe(e[n],e[r],t),e))return[e[n],e[r],t];throw new Error}function XN(e,t){var n=e.r-t.r,r=t.x-e.x,i=t.y-e.y;return n<0||n*n<r*r+i*i}function HTe(e,t){var n=e.r-t.r+Math.max(e.r,t.r,1)*1e-9,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function N8(e,t){for(var n=0;n<t.length;++n)if(!HTe(e,t[n]))return!1;return!0}function Qpt(e){switch(e.length){case 1:return Jpt(e[0]);case 2:return R2(e[0],e[1]);case 3:return qTe(e[0],e[1],e[2])}}function Jpt(e){return{x:e.x,y:e.y,r:e.r}}function R2(e,t){var n=e.x,r=e.y,i=e.r,s=t.x,o=t.y,a=t.r,u=s-n,l=o-r,c=a-i,f=Math.sqrt(u*u+l*l);return{x:(n+s+u/f*c)/2,y:(r+o+l/f*c)/2,r:(f+i+a)/2}}function qTe(e,t,n){var r=e.x,i=e.y,s=e.r,o=t.x,a=t.y,u=t.r,l=n.x,c=n.y,f=n.r,d=r-o,h=r-l,p=i-a,m=i-c,g=u-s,y=f-s,v=r*r+i*i-s*s,b=v-o*o-a*a+u*u,w=v-l*l-c*c+f*f,E=h*p-d*m,T=(p*w-m*b)/(E*2)-r,S=(m*g-p*y)/E,C=(h*b-d*w)/(E*2)-i,A=(d*y-h*g)/E,k=S*S+A*A-1,N=2*(s+T*S+C*A),O=T*T+C*C-s*s,P=-(Math.abs(k)>1e-6?(N+Math.sqrt(N*N-4*k*O))/(2*k):O/N);return{x:r+T+S*P,y:i+C+A*P,r:P}}function tce(e,t,n){var r=e.x-t.x,i,s,o=e.y-t.y,a,u,l=r*r+o*o;l?(s=t.r+n.r,s*=s,u=e.r+n.r,u*=u,s>u?(i=(l+u-s)/(2*l),a=Math.sqrt(Math.max(0,u/l-i*i)),n.x=e.x-i*r-a*o,n.y=e.y-i*o+a*r):(i=(l+s-u)/(2*l),a=Math.sqrt(Math.max(0,s/l-i*i)),n.x=t.x+i*r-a*o,n.y=t.y+i*o+a*r)):(n.x=t.x+n.r,n.y=t.y)}function nce(e,t){var n=e.r+t.r-1e-6,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function rce(e){var t=e._,n=e.next._,r=t.r+n.r,i=(t.x*n.r+n.x*t.r)/r,s=(t.y*n.r+n.y*t.r)/r;return i*i+s*s}function QN(e){this._=e,this.next=null,this.previous=null}function Zpt(e,t){if(!(s=(e=Gpt(e)).length))return 0;var n,r,i,s,o,a,u,l,c,f,d;if(n=e[0],n.x=0,n.y=0,!(s>1))return n.r;if(r=e[1],n.x=-r.r,r.x=n.r,r.y=0,!(s>2))return n.r+r.r;tce(r,n,i=e[2]),n=new QN(n),r=new QN(r),i=new QN(i),n.next=i.previous=r,r.next=n.previous=i,i.next=r.previous=n;e:for(u=3;u<s;++u){tce(n._,r._,i=e[u]),i=new QN(i),l=r.next,c=n.previous,f=r._.r,d=n._.r;do if(f<=d){if(nce(l._,i._)){r=l,n.next=r,r.previous=n,--u;continue e}f+=l._.r,l=l.next}else{if(nce(c._,i._)){n=c,n.next=r,r.previous=n,--u;continue e}d+=c._.r,c=c.previous}while(l!==c.next);for(i.previous=n,i.next=r,n.next=r.previous=r=i,o=rce(n);(i=i.next)!==r;)(a=rce(i))<o&&(n=i,o=a);r=n.next}for(n=[r._],i=r;(i=i.next)!==r;)n.push(i._);for(i=Kpt(n,t),u=0;u<s;++u)n=e[u],n.x-=i.x,n.y-=i.y;return i.r}function emt(e){return Math.sqrt(e.value)}function WTe(){var e=null,t=1,n=1,r=Vv;function i(s){const o=Wpt();return s.x=t/2,s.y=n/2,e?s.eachBefore(ice(e)).eachAfter(D8(r,.5,o)).eachBefore(sce(1)):s.eachBefore(ice(emt)).eachAfter(D8(Vv,1,o)).eachAfter(D8(r,s.r/Math.min(t,n),o)).eachBefore(sce(Math.min(t,n)/(2*s.r))),s}return i.radius=function(s){return arguments.length?(e=xP(s),i):e},i.size=function(s){return arguments.length?(t=+s[0],n=+s[1],i):[t,n]},i.padding=function(s){return arguments.length?(r=typeof s=="function"?s:nw(+s),i):r},i}function ice(e){return function(t){t.children||(t.r=Math.max(0,+e(t)||0))}}function D8(e,t,n){return function(r){if(i=r.children){var i,s,o=i.length,a=e(r)*t||0,u;if(a)for(s=0;s<o;++s)i[s].r+=a;if(u=Zpt(i,n),a)for(s=0;s<o;++s)i[s].r-=a;r.r=u+a}}}function sce(e){return function(t){var n=t.parent;t.r*=e,n&&(t.x=n.x+e*t.x,t.y=n.y+e*t.y)}}function GTe(e){e.x0=Math.round(e.x0),e.y0=Math.round(e.y0),e.x1=Math.round(e.x1),e.y1=Math.round(e.y1)}function kk(e,t,n,r,i){for(var s=e.children,o,a=-1,u=s.length,l=e.value&&(r-t)/e.value;++a<u;)o=s[a],o.y0=n,o.y1=i,o.x0=t,o.x1=t+=o.value*l}function tmt(){var e=1,t=1,n=0,r=!1;function i(o){var a=o.height+1;return o.x0=o.y0=n,o.x1=e,o.y1=t/a,o.eachBefore(s(t,a)),r&&o.eachBefore(GTe),o}function s(o,a){return function(u){u.children&&kk(u,u.x0,o*(u.depth+1)/a,u.x1,o*(u.depth+2)/a);var l=u.x0,c=u.y0,f=u.x1-n,d=u.y1-n;f<l&&(l=f=(l+f)/2),d<c&&(c=d=(c+d)/2),u.x0=l,u.y0=c,u.x1=f,u.y1=d}}return i.round=function(o){return arguments.length?(r=!!o,i):r},i.size=function(o){return arguments.length?(e=+o[0],t=+o[1],i):[e,t]},i.padding=function(o){return arguments.length?(n=+o,i):n},i}var nmt={depth:-1},oce={},P8={};function rmt(e){return e.id}function imt(e){return e.parentId}function ace(){var e=rmt,t=imt,n;function r(i){var s=Array.from(i),o=e,a=t,u,l,c,f,d,h,p,m,g=new Map;if(n!=null){const y=s.map((w,E)=>smt(n(w,E,i))),v=y.map(uce),b=new Set(y).add("");for(const w of v)b.has(w)||(b.add(w),y.push(w),v.push(uce(w)),s.push(P8));o=(w,E)=>y[E],a=(w,E)=>v[E]}for(c=0,u=s.length;c<u;++c)l=s[c],h=s[c]=new YE(l),(p=o(l,c,i))!=null&&(p+="")&&(m=h.id=p,g.set(m,g.has(m)?oce:h)),(p=a(l,c,i))!=null&&(p+="")&&(h.parent=p);for(c=0;c<u;++c)if(h=s[c],p=h.parent){if(d=g.get(p),!d)throw new Error("missing: "+p);if(d===oce)throw new Error("ambiguous: "+p);d.children?d.children.push(h):d.children=[h],h.parent=d}else{if(f)throw new Error("multiple roots");f=h}if(!f)throw new Error("no root");if(n!=null){for(;f.data===P8&&f.children.length===1;)f=f.children[0],--u;for(let y=s.length-1;y>=0&&(h=s[y],h.data===P8);--y)h.data=null}if(f.parent=nmt,f.eachBefore(function(y){y.depth=y.parent.depth+1,--u}).eachBefore(zTe),f.parent=null,u>0)throw new Error("cycle");return f}return r.id=function(i){return arguments.length?(e=xP(i),r):e},r.parentId=function(i){return arguments.length?(t=xP(i),r):t},r.path=function(i){return arguments.length?(n=xP(i),r):n},r}function smt(e){e=`${e}`;let t=e.length;return _z(e,t-1)&&!_z(e,t-2)&&(e=e.slice(0,-1)),e[0]==="/"?e:`/${e}`}function uce(e){let t=e.length;if(t<2)return"";for(;--t>1&&!_z(e,t););return e.slice(0,t)}function _z(e,t){if(e[t]==="/"){let n=0;for(;t>0&&e[--t]==="\\";)++n;if(!(n&1))return!0}return!1}function omt(e,t){return e.parent===t.parent?1:2}function O8(e){var t=e.children;return t?t[0]:e.t}function $8(e){var t=e.children;return t?t[t.length-1]:e.t}function amt(e,t,n){var r=n/(t.i-e.i);t.c-=r,t.s+=n,e.c+=r,t.z+=n,t.m+=n}function umt(e){for(var t=0,n=0,r=e.children,i=r.length,s;--i>=0;)s=r[i],s.z+=t,s.m+=t,t+=s.s+(n+=s.c)}function lmt(e,t,n){return e.a.parent===t.parent?e.a:n}function SP(e,t){this._=e,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=t}SP.prototype=Object.create(YE.prototype);function cmt(e){for(var t=new SP(e,0),n,r=[t],i,s,o,a;n=r.pop();)if(s=n._.children)for(n.children=new Array(a=s.length),o=a-1;o>=0;--o)r.push(i=n.children[o]=new SP(s[o],o)),i.parent=n;return(t.parent=new SP(null,0)).children=[t],t}function fmt(){var e=omt,t=1,n=1,r=null;function i(l){var c=cmt(l);if(c.eachAfter(s),c.parent.m=-c.z,c.eachBefore(o),r)l.eachBefore(u);else{var f=l,d=l,h=l;l.eachBefore(function(v){v.x<f.x&&(f=v),v.x>d.x&&(d=v),v.depth>h.depth&&(h=v)});var p=f===d?1:e(f,d)/2,m=p-f.x,g=t/(d.x+p+m),y=n/(h.depth||1);l.eachBefore(function(v){v.x=(v.x+m)*g,v.y=v.depth*y})}return l}function s(l){var c=l.children,f=l.parent.children,d=l.i?f[l.i-1]:null;if(c){umt(l);var h=(c[0].z+c[c.length-1].z)/2;d?(l.z=d.z+e(l._,d._),l.m=l.z-h):l.z=h}else d&&(l.z=d.z+e(l._,d._));l.parent.A=a(l,d,l.parent.A||f[0])}function o(l){l._.x=l.z+l.parent.m,l.m+=l.parent.m}function a(l,c,f){if(c){for(var d=l,h=l,p=c,m=d.parent.children[0],g=d.m,y=h.m,v=p.m,b=m.m,w;p=$8(p),d=O8(d),p&&d;)m=O8(m),h=$8(h),h.a=l,w=p.z+v-d.z-g+e(p._,d._),w>0&&(amt(lmt(p,l,f),l,w),g+=w,y+=w),v+=p.m,g+=d.m,b+=m.m,y+=h.m;p&&!$8(h)&&(h.t=p,h.m+=v-y),d&&!O8(m)&&(m.t=d,m.m+=g-b,f=l)}return f}function u(l){l.x*=t,l.y=l.depth*n}return i.separation=function(l){return arguments.length?(e=l,i):e},i.size=function(l){return arguments.length?(r=!1,t=+l[0],n=+l[1],i):r?null:[t,n]},i.nodeSize=function(l){return arguments.length?(r=!0,t=+l[0],n=+l[1],i):r?[t,n]:null},i}function D6(e,t,n,r,i){for(var s=e.children,o,a=-1,u=s.length,l=e.value&&(i-n)/e.value;++a<u;)o=s[a],o.x0=t,o.x1=r,o.y0=n,o.y1=n+=o.value*l}var YTe=(1+Math.sqrt(5))/2;function KTe(e,t,n,r,i,s){for(var o=[],a=t.children,u,l,c=0,f=0,d=a.length,h,p,m=t.value,g,y,v,b,w,E,T;c<d;){h=i-n,p=s-r;do g=a[f++].value;while(!g&&f<d);for(y=v=g,E=Math.max(p/h,h/p)/(m*e),T=g*g*E,w=Math.max(v/T,T/y);f<d;++f){if(g+=l=a[f].value,l<y&&(y=l),l>v&&(v=l),T=g*g*E,b=Math.max(v/T,T/y),b>w){g-=l;break}w=b}o.push(u={value:g,dice:h<p,children:a.slice(c,f)}),u.dice?kk(u,n,r,i,m?r+=p*g/m:s):D6(u,n,r,m?n+=h*g/m:i,s),m-=g,c=f}return o}const XTe=function e(t){function n(r,i,s,o,a){KTe(t,r,i,s,o,a)}return n.ratio=function(r){return e((r=+r)>1?r:1)},n}(YTe);function dmt(){var e=XTe,t=!1,n=1,r=1,i=[0],s=Vv,o=Vv,a=Vv,u=Vv,l=Vv;function c(d){return d.x0=d.y0=0,d.x1=n,d.y1=r,d.eachBefore(f),i=[0],t&&d.eachBefore(GTe),d}function f(d){var h=i[d.depth],p=d.x0+h,m=d.y0+h,g=d.x1-h,y=d.y1-h;g<p&&(p=g=(p+g)/2),y<m&&(m=y=(m+y)/2),d.x0=p,d.y0=m,d.x1=g,d.y1=y,d.children&&(h=i[d.depth+1]=s(d)/2,p+=l(d)-h,m+=o(d)-h,g-=a(d)-h,y-=u(d)-h,g<p&&(p=g=(p+g)/2),y<m&&(m=y=(m+y)/2),e(d,p,m,g,y))}return c.round=function(d){return arguments.length?(t=!!d,c):t},c.size=function(d){return arguments.length?(n=+d[0],r=+d[1],c):[n,r]},c.tile=function(d){return arguments.length?(e=VTe(d),c):e},c.padding=function(d){return arguments.length?c.paddingInner(d).paddingOuter(d):c.paddingInner()},c.paddingInner=function(d){return arguments.length?(s=typeof d=="function"?d:nw(+d),c):s},c.paddingOuter=function(d){return arguments.length?c.paddingTop(d).paddingRight(d).paddingBottom(d).paddingLeft(d):c.paddingTop()},c.paddingTop=function(d){return arguments.length?(o=typeof d=="function"?d:nw(+d),c):o},c.paddingRight=function(d){return arguments.length?(a=typeof d=="function"?d:nw(+d),c):a},c.paddingBottom=function(d){return arguments.length?(u=typeof d=="function"?d:nw(+d),c):u},c.paddingLeft=function(d){return arguments.length?(l=typeof d=="function"?d:nw(+d),c):l},c}function hmt(e,t,n,r,i){var s=e.children,o,a=s.length,u,l=new Array(a+1);for(l[0]=u=o=0;o<a;++o)l[o+1]=u+=s[o].value;c(0,a,e.value,t,n,r,i);function c(f,d,h,p,m,g,y){if(f>=d-1){var v=s[f];v.x0=p,v.y0=m,v.x1=g,v.y1=y;return}for(var b=l[f],w=h/2+b,E=f+1,T=d-1;E<T;){var S=E+T>>>1;l[S]<w?E=S+1:T=S}w-l[E-1]<l[E]-w&&f+1<E&&--E;var C=l[E]-b,A=h-C;if(g-p>y-m){var k=h?(p*A+g*C)/h:g;c(f,E,C,p,m,k,y),c(E,d,A,k,m,g,y)}else{var N=h?(m*A+y*C)/h:y;c(f,E,C,p,m,g,N),c(E,d,A,p,N,g,y)}}}function pmt(e,t,n,r,i){(e.depth&1?D6:kk)(e,t,n,r,i)}const mmt=function e(t){function n(r,i,s,o,a){if((u=r._squarify)&&u.ratio===t)for(var u,l,c,f,d=-1,h,p=u.length,m=r.value;++d<p;){for(l=u[d],c=l.children,f=l.value=0,h=c.length;f<h;++f)l.value+=c[f].value;l.dice?kk(l,i,s,o,m?s+=(a-s)*l.value/m:a):D6(l,i,s,m?i+=(o-i)*l.value/m:o,a),m-=l.value}else r._squarify=u=KTe(t,r,i,s,o,a),u.ratio=t}return n.ratio=function(r){return e((r=+r)>1?r:1)},n}(YTe);function ud(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function jy(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const wz=Symbol("implicit");function Wb(){var e=new O7,t=[],n=[],r=wz;function i(s){let o=e.get(s);if(o===void 0){if(r!==wz)return r;e.set(s,o=t.push(s)-1)}return n[o%n.length]}return i.domain=function(s){if(!arguments.length)return t.slice();t=[],e=new O7;for(const o of s)e.has(o)||e.set(o,t.push(o)-1);return i},i.range=function(s){return arguments.length?(n=Array.from(s),i):n.slice()},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return Wb(t,n).unknown(r)},ud.apply(i,arguments),i}function gS(){var e=Wb().unknown(void 0),t=e.domain,n=e.range,r=0,i=1,s,o,a=!1,u=0,l=0,c=.5;delete e.unknown;function f(){var d=t().length,h=i<r,p=h?i:r,m=h?r:i;s=(m-p)/Math.max(1,d-u+l*2),a&&(s=Math.floor(s)),p+=(m-p-s*(d-u))*c,o=s*(1-u),a&&(p=Math.round(p),o=Math.round(o));var g=$u(d).map(function(y){return p+s*y});return n(h?g.reverse():g)}return e.domain=function(d){return arguments.length?(t(d),f()):t()},e.range=function(d){return arguments.length?([r,i]=d,r=+r,i=+i,f()):[r,i]},e.rangeRound=function(d){return[r,i]=d,r=+r,i=+i,a=!0,f()},e.bandwidth=function(){return o},e.step=function(){return s},e.round=function(d){return arguments.length?(a=!!d,f()):a},e.padding=function(d){return arguments.length?(u=Math.min(1,l=+d),f()):u},e.paddingInner=function(d){return arguments.length?(u=Math.min(1,d),f()):u},e.paddingOuter=function(d){return arguments.length?(l=+d,f()):l},e.align=function(d){return arguments.length?(c=Math.max(0,Math.min(1,d)),f()):c},e.copy=function(){return gS(t(),[r,i]).round(a).paddingInner(u).paddingOuter(l).align(c)},ud.apply(f(),arguments)}function gmt(e){return function(){return e}}function Ez(e){return+e}var lce=[0,1];function Mu(e){return e}function xz(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:gmt(isNaN(t)?NaN:.5)}function ymt(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function vmt(e,t,n){var r=e[0],i=e[1],s=t[0],o=t[1];return i<r?(r=xz(i,r),s=n(o,s)):(r=xz(r,i),s=n(s,o)),function(a){return s(r(a))}}function bmt(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),s=new Array(r),o=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<r;)i[o]=xz(e[o],e[o+1]),s[o]=n(t[o],t[o+1]);return function(a){var u=H0(e,a,1,r)-1;return s[u](i[u](a))}}function Rk(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function P6(){var e=lce,t=lce,n=Zm,r,i,s,o=Mu,a,u,l;function c(){var d=Math.min(e.length,t.length);return o!==Mu&&(o=ymt(e[0],e[d-1])),a=d>2?bmt:vmt,u=l=null,f}function f(d){return d==null||isNaN(d=+d)?s:(u||(u=a(e.map(r),t,n)))(r(o(d)))}return f.invert=function(d){return o(i((l||(l=a(t,e.map(r),gc)))(d)))},f.domain=function(d){return arguments.length?(e=Array.from(d,Ez),c()):e.slice()},f.range=function(d){return arguments.length?(t=Array.from(d),c()):t.slice()},f.rangeRound=function(d){return t=Array.from(d),n=Tk,c()},f.clamp=function(d){return arguments.length?(o=d?!0:Mu,c()):o!==Mu},f.interpolate=function(d){return arguments.length?(n=d,c()):n},f.unknown=function(d){return arguments.length?(s=d,f):s},function(d,h){return r=d,i=h,c()}}function QTe(){return P6()(Mu,Mu)}function JTe(e,t,n,r){var i=q0(e,t,n),s;switch(r=Y1(r??",f"),r.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(s=ZSe(i,o))&&(r.precision=s),RK(r,o)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(s=eTe(i,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=s-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(s=JSe(i))&&(r.precision=s-(r.type==="%")*2);break}}return Fy(r)}function Gb(e){var t=e.domain;return e.ticks=function(n){var r=t();return M7(r[0],r[r.length-1],n??10)},e.tickFormat=function(n,r){var i=t();return JTe(i[0],i[i.length-1],n??10,r)},e.nice=function(n){n==null&&(n=10);var r=t(),i=0,s=r.length-1,o=r[i],a=r[s],u,l,c=10;for(a<o&&(l=o,o=a,a=l,l=i,i=s,s=l);c-- >0;){if(l=L7(o,a,n),l===u)return r[i]=o,r[s]=a,t(r);if(l>0)o=Math.floor(o/l)*l,a=Math.ceil(a/l)*l;else if(l<0)o=Math.ceil(o*l)/l,a=Math.floor(a*l)/l;else break;u=l}return e},e}function Yf(){var e=QTe();return e.copy=function(){return Rk(e,Yf())},ud.apply(e,arguments),Gb(e)}function ZTe(e){var t;function n(r){return r==null||isNaN(r=+r)?t:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(e=Array.from(r,Ez),n):e.slice()},n.unknown=function(r){return arguments.length?(t=r,n):t},n.copy=function(){return ZTe(e).unknown(t)},e=arguments.length?Array.from(e,Ez):[0,1],Gb(n)}function e2e(e,t){e=e.slice();var n=0,r=e.length-1,i=e[n],s=e[r],o;return s<i&&(o=n,n=r,r=o,o=i,i=s,s=o),e[n]=t.floor(i),e[r]=t.ceil(s),e}function cce(e){return Math.log(e)}function fce(e){return Math.exp(e)}function _mt(e){return-Math.log(-e)}function wmt(e){return-Math.exp(-e)}function Emt(e){return isFinite(e)?+("1e"+e):e<0?0:e}function xmt(e){return e===10?Emt:e===Math.E?Math.exp:t=>Math.pow(e,t)}function Smt(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function dce(e){return(t,n)=>-e(-t,n)}function FK(e){const t=e(cce,fce),n=t.domain;let r=10,i,s;function o(){return i=Smt(r),s=xmt(r),n()[0]<0?(i=dce(i),s=dce(s),e(_mt,wmt)):e(cce,fce),t}return t.base=function(a){return arguments.length?(r=+a,o()):r},t.domain=function(a){return arguments.length?(n(a),o()):n()},t.ticks=a=>{const u=n();let l=u[0],c=u[u.length-1];const f=c<l;f&&([l,c]=[c,l]);let d=i(l),h=i(c),p,m;const g=a==null?10:+a;let y=[];if(!(r%1)&&h-d<g){if(d=Math.floor(d),h=Math.ceil(h),l>0){for(;d<=h;++d)for(p=1;p<r;++p)if(m=d<0?p/s(-d):p*s(d),!(m<l)){if(m>c)break;y.push(m)}}else for(;d<=h;++d)for(p=r-1;p>=1;--p)if(m=d>0?p/s(-d):p*s(d),!(m<l)){if(m>c)break;y.push(m)}y.length*2<g&&(y=M7(l,c,g))}else y=M7(d,h,Math.min(h-d,g)).map(s);return f?y.reverse():y},t.tickFormat=(a,u)=>{if(a==null&&(a=10),u==null&&(u=r===10?"s":","),typeof u!="function"&&(!(r%1)&&(u=Y1(u)).precision==null&&(u.trim=!0),u=Fy(u)),a===1/0)return u;const l=Math.max(1,r*a/t.ticks().length);return c=>{let f=c/s(Math.round(i(c)));return f*r<r-.5&&(f*=r),f<=l?u(c):""}},t.nice=()=>n(e2e(n(),{floor:a=>s(Math.floor(i(a))),ceil:a=>s(Math.ceil(i(a)))})),t}function t2e(){const e=FK(P6()).domain([1,10]);return e.copy=()=>Rk(e,t2e()).base(e.base()),ud.apply(e,arguments),e}function hce(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function pce(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function jK(e){var t=1,n=e(hce(t),pce(t));return n.constant=function(r){return arguments.length?e(hce(t=+r),pce(t)):t},Gb(n)}function n2e(){var e=jK(P6());return e.copy=function(){return Rk(e,n2e()).constant(e.constant())},ud.apply(e,arguments)}function mce(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function Tmt(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function Cmt(e){return e<0?-e*e:e*e}function BK(e){var t=e(Mu,Mu),n=1;function r(){return n===1?e(Mu,Mu):n===.5?e(Tmt,Cmt):e(mce(n),mce(1/n))}return t.exponent=function(i){return arguments.length?(n=+i,r()):n},Gb(t)}function UK(){var e=BK(P6());return e.copy=function(){return Rk(e,UK()).exponent(e.exponent())},ud.apply(e,arguments),e}function Amt(){return UK.apply(null,arguments).exponent(.5)}function r2e(){var e=[],t=[],n=[],r;function i(){var o=0,a=Math.max(1,t.length);for(n=new Array(a-1);++o<a;)n[o-1]=Kxe(e,o/a);return s}function s(o){return o==null||isNaN(o=+o)?r:t[H0(n,o)]}return s.invertExtent=function(o){var a=t.indexOf(o);return a<0?[NaN,NaN]:[a>0?n[a-1]:e[0],a<n.length?n[a]:e[e.length-1]]},s.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let a of o)a!=null&&!isNaN(a=+a)&&e.push(a);return e.sort(im),i()},s.range=function(o){return arguments.length?(t=Array.from(o),i()):t.slice()},s.unknown=function(o){return arguments.length?(r=o,s):r},s.quantiles=function(){return n.slice()},s.copy=function(){return r2e().domain(e).range(t).unknown(r)},ud.apply(s,arguments)}function i2e(){var e=0,t=1,n=1,r=[.5],i=[0,1],s;function o(u){return u!=null&&u<=u?i[H0(r,u,0,n)]:s}function a(){var u=-1;for(r=new Array(n);++u<n;)r[u]=((u+1)*t-(u-n)*e)/(n+1);return o}return o.domain=function(u){return arguments.length?([e,t]=u,e=+e,t=+t,a()):[e,t]},o.range=function(u){return arguments.length?(n=(i=Array.from(u)).length-1,a()):i.slice()},o.invertExtent=function(u){var l=i.indexOf(u);return l<0?[NaN,NaN]:l<1?[e,r[0]]:l>=n?[r[n-1],t]:[r[l-1],r[l]]},o.unknown=function(u){return arguments.length&&(s=u),o},o.thresholds=function(){return r.slice()},o.copy=function(){return i2e().domain([e,t]).range(i).unknown(s)},ud.apply(Gb(o),arguments)}function s2e(){var e=[.5],t=[0,1],n,r=1;function i(s){return s!=null&&s<=s?t[H0(e,s,0,r)]:n}return i.domain=function(s){return arguments.length?(e=Array.from(s),r=Math.min(e.length,t.length-1),i):e.slice()},i.range=function(s){return arguments.length?(t=Array.from(s),r=Math.min(e.length,t.length-1),i):t.slice()},i.invertExtent=function(s){var o=t.indexOf(s);return[e[o-1],e[o]]},i.unknown=function(s){return arguments.length?(n=s,i):n},i.copy=function(){return s2e().domain(e).range(t).unknown(n)},ud.apply(i,arguments)}const M8=new Date,L8=new Date;function zs(e,t,n,r){function i(s){return e(s=arguments.length===0?new Date:new Date(+s)),s}return i.floor=s=>(e(s=new Date(+s)),s),i.ceil=s=>(e(s=new Date(s-1)),t(s,1),e(s),s),i.round=s=>{const o=i(s),a=i.ceil(s);return s-o<a-s?o:a},i.offset=(s,o)=>(t(s=new Date(+s),o==null?1:Math.floor(o)),s),i.range=(s,o,a)=>{const u=[];if(s=i.ceil(s),a=a==null?1:Math.floor(a),!(s<o)||!(a>0))return u;let l;do u.push(l=new Date(+s)),t(s,a),e(s);while(l<s&&s<o);return u},i.filter=s=>zs(o=>{if(o>=o)for(;e(o),!s(o);)o.setTime(o-1)},(o,a)=>{if(o>=o)if(a<0)for(;++a<=0;)for(;t(o,-1),!s(o););else for(;--a>=0;)for(;t(o,1),!s(o););}),n&&(i.count=(s,o)=>(M8.setTime(+s),L8.setTime(+o),e(M8),e(L8),Math.floor(n(M8,L8))),i.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?i.filter(r?o=>r(o)%s===0:o=>i.count(0,o)%s===0):i)),i}const KE=zs(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);KE.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?zs(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):KE);KE.range;const Yp=1e3,Sc=Yp*60,Kp=Sc*60,Am=Kp*24,zK=Am*7,gce=Am*30,F8=Am*365,Xp=zs(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Yp)},(e,t)=>(t-e)/Yp,e=>e.getUTCSeconds());Xp.range;const O6=zs(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Yp)},(e,t)=>{e.setTime(+e+t*Sc)},(e,t)=>(t-e)/Sc,e=>e.getMinutes());O6.range;const $6=zs(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Sc)},(e,t)=>(t-e)/Sc,e=>e.getUTCMinutes());$6.range;const M6=zs(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Yp-e.getMinutes()*Sc)},(e,t)=>{e.setTime(+e+t*Kp)},(e,t)=>(t-e)/Kp,e=>e.getHours());M6.range;const L6=zs(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*Kp)},(e,t)=>(t-e)/Kp,e=>e.getUTCHours());L6.range;const om=zs(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Sc)/Am,e=>e.getDate()-1);om.range;const x0=zs(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Am,e=>e.getUTCDate()-1);x0.range;const o2e=zs(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Am,e=>Math.floor(e/Am));o2e.range;function Yb(e){return zs(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*Sc)/zK)}const yS=Yb(0),G3=Yb(1),Imt=Yb(2),kmt=Yb(3),XE=Yb(4),Rmt=Yb(5),Nmt=Yb(6);yS.range;G3.range;Imt.range;kmt.range;XE.range;Rmt.range;Nmt.range;function Kb(e){return zs(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/zK)}const vS=Kb(0),Y3=Kb(1),Dmt=Kb(2),Pmt=Kb(3),QE=Kb(4),Omt=Kb(5),$mt=Kb(6);vS.range;Y3.range;Dmt.range;Pmt.range;QE.range;Omt.range;$mt.range;const KA=zs(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());KA.range;const XA=zs(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());XA.range;const Ch=zs(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());Ch.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:zs(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});Ch.range;const Ah=zs(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Ah.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:zs(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});Ah.range;function a2e(e,t,n,r,i,s){const o=[[Xp,1,Yp],[Xp,5,5*Yp],[Xp,15,15*Yp],[Xp,30,30*Yp],[s,1,Sc],[s,5,5*Sc],[s,15,15*Sc],[s,30,30*Sc],[i,1,Kp],[i,3,3*Kp],[i,6,6*Kp],[i,12,12*Kp],[r,1,Am],[r,2,2*Am],[n,1,zK],[t,1,gce],[t,3,3*gce],[e,1,F8]];function a(l,c,f){const d=c<l;d&&([l,c]=[c,l]);const h=f&&typeof f.range=="function"?f:u(l,c,f),p=h?h.range(l,+c+1):[];return d?p.reverse():p}function u(l,c,f){const d=Math.abs(c-l)/f,h=hS(([,,g])=>g).right(o,d);if(h===o.length)return e.every(q0(l/F8,c/F8,f));if(h===0)return KE.every(Math.max(q0(l,c,f),1));const[p,m]=o[d/o[h-1][2]<o[h][2]/d?h-1:h];return p.every(m)}return[a,u]}const[Mmt,Lmt]=a2e(Ah,XA,vS,o2e,L6,$6),[Fmt,jmt]=a2e(Ch,KA,yS,om,M6,O6);function j8(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function B8(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function DT(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function u2e(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,s=e.days,o=e.shortDays,a=e.months,u=e.shortMonths,l=PT(i),c=OT(i),f=PT(s),d=OT(s),h=PT(o),p=OT(o),m=PT(a),g=OT(a),y=PT(u),v=OT(u),b={a:B,A:U,b:H,B:D,c:null,d:Ece,e:Ece,f:ugt,g:vgt,G:_gt,H:sgt,I:ogt,j:agt,L:l2e,m:lgt,M:cgt,p:z,q:W,Q:Tce,s:Cce,S:fgt,u:dgt,U:hgt,V:pgt,w:mgt,W:ggt,x:null,X:null,y:ygt,Y:bgt,Z:wgt,"%":Sce},w={a:j,A:q,b:G,B:ne,c:null,d:xce,e:xce,f:Tgt,g:$gt,G:Lgt,H:Egt,I:xgt,j:Sgt,L:f2e,m:Cgt,M:Agt,p:ce,q:de,Q:Tce,s:Cce,S:Igt,u:kgt,U:Rgt,V:Ngt,w:Dgt,W:Pgt,x:null,X:null,y:Ogt,Y:Mgt,Z:Fgt,"%":Sce},E={a:k,A:N,b:O,B:P,c:$,d:_ce,e:_ce,f:tgt,g:bce,G:vce,H:wce,I:wce,j:Qmt,L:egt,m:Xmt,M:Jmt,p:A,q:Kmt,Q:rgt,s:igt,S:Zmt,u:Hmt,U:qmt,V:Wmt,w:Vmt,W:Gmt,x:F,X:M,y:bce,Y:vce,Z:Ymt,"%":ngt};b.x=T(n,b),b.X=T(r,b),b.c=T(t,b),w.x=T(n,w),w.X=T(r,w),w.c=T(t,w);function T(he,ve){return function(Ie){var be=[],Ke=-1,Ue=0,yt=he.length,it,_e,ke;for(Ie instanceof Date||(Ie=new Date(+Ie));++Ke<yt;)he.charCodeAt(Ke)===37&&(be.push(he.slice(Ue,Ke)),(_e=yce[it=he.charAt(++Ke)])!=null?it=he.charAt(++Ke):_e=it==="e"?" ":"0",(ke=ve[it])&&(it=ke(Ie,_e)),be.push(it),Ue=Ke+1);return be.push(he.slice(Ue,Ke)),be.join("")}}function S(he,ve){return function(Ie){var be=DT(1900,void 0,1),Ke=C(be,he,Ie+="",0),Ue,yt;if(Ke!=Ie.length)return null;if("Q"in be)return new Date(be.Q);if("s"in be)return new Date(be.s*1e3+("L"in be?be.L:0));if(ve&&!("Z"in be)&&(be.Z=0),"p"in be&&(be.H=be.H%12+be.p*12),be.m===void 0&&(be.m="q"in be?be.q:0),"V"in be){if(be.V<1||be.V>53)return null;"w"in be||(be.w=1),"Z"in be?(Ue=B8(DT(be.y,0,1)),yt=Ue.getUTCDay(),Ue=yt>4||yt===0?Y3.ceil(Ue):Y3(Ue),Ue=x0.offset(Ue,(be.V-1)*7),be.y=Ue.getUTCFullYear(),be.m=Ue.getUTCMonth(),be.d=Ue.getUTCDate()+(be.w+6)%7):(Ue=j8(DT(be.y,0,1)),yt=Ue.getDay(),Ue=yt>4||yt===0?G3.ceil(Ue):G3(Ue),Ue=om.offset(Ue,(be.V-1)*7),be.y=Ue.getFullYear(),be.m=Ue.getMonth(),be.d=Ue.getDate()+(be.w+6)%7)}else("W"in be||"U"in be)&&("w"in be||(be.w="u"in be?be.u%7:"W"in be?1:0),yt="Z"in be?B8(DT(be.y,0,1)).getUTCDay():j8(DT(be.y,0,1)).getDay(),be.m=0,be.d="W"in be?(be.w+6)%7+be.W*7-(yt+5)%7:be.w+be.U*7-(yt+6)%7);return"Z"in be?(be.H+=be.Z/100|0,be.M+=be.Z%100,B8(be)):j8(be)}}function C(he,ve,Ie,be){for(var Ke=0,Ue=ve.length,yt=Ie.length,it,_e;Ke<Ue;){if(be>=yt)return-1;if(it=ve.charCodeAt(Ke++),it===37){if(it=ve.charAt(Ke++),_e=E[it in yce?ve.charAt(Ke++):it],!_e||(be=_e(he,Ie,be))<0)return-1}else if(it!=Ie.charCodeAt(be++))return-1}return be}function A(he,ve,Ie){var be=l.exec(ve.slice(Ie));return be?(he.p=c.get(be[0].toLowerCase()),Ie+be[0].length):-1}function k(he,ve,Ie){var be=h.exec(ve.slice(Ie));return be?(he.w=p.get(be[0].toLowerCase()),Ie+be[0].length):-1}function N(he,ve,Ie){var be=f.exec(ve.slice(Ie));return be?(he.w=d.get(be[0].toLowerCase()),Ie+be[0].length):-1}function O(he,ve,Ie){var be=y.exec(ve.slice(Ie));return be?(he.m=v.get(be[0].toLowerCase()),Ie+be[0].length):-1}function P(he,ve,Ie){var be=m.exec(ve.slice(Ie));return be?(he.m=g.get(be[0].toLowerCase()),Ie+be[0].length):-1}function $(he,ve,Ie){return C(he,t,ve,Ie)}function F(he,ve,Ie){return C(he,n,ve,Ie)}function M(he,ve,Ie){return C(he,r,ve,Ie)}function B(he){return o[he.getDay()]}function U(he){return s[he.getDay()]}function H(he){return u[he.getMonth()]}function D(he){return a[he.getMonth()]}function z(he){return i[+(he.getHours()>=12)]}function W(he){return 1+~~(he.getMonth()/3)}function j(he){return o[he.getUTCDay()]}function q(he){return s[he.getUTCDay()]}function G(he){return u[he.getUTCMonth()]}function ne(he){return a[he.getUTCMonth()]}function ce(he){return i[+(he.getUTCHours()>=12)]}function de(he){return 1+~~(he.getUTCMonth()/3)}return{format:function(he){var ve=T(he+="",b);return ve.toString=function(){return he},ve},parse:function(he){var ve=S(he+="",!1);return ve.toString=function(){return he},ve},utcFormat:function(he){var ve=T(he+="",w);return ve.toString=function(){return he},ve},utcParse:function(he){var ve=S(he+="",!0);return ve.toString=function(){return he},ve}}}var yce={"-":"",_:" ",0:"0"},ho=/^\s*\d+/,Bmt=/^%/,Umt=/[\\^$*+?|[\]().{}]/g;function mr(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",s=i.length;return r+(s<n?new Array(n-s+1).join(t)+i:i)}function zmt(e){return e.replace(Umt,"\\$&")}function PT(e){return new RegExp("^(?:"+e.map(zmt).join("|")+")","i")}function OT(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function Vmt(e,t,n){var r=ho.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function Hmt(e,t,n){var r=ho.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function qmt(e,t,n){var r=ho.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function Wmt(e,t,n){var r=ho.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function Gmt(e,t,n){var r=ho.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function vce(e,t,n){var r=ho.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function bce(e,t,n){var r=ho.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function Ymt(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function Kmt(e,t,n){var r=ho.exec(t.slice(n,n+1));return r?(e.q=r[0]*3-3,n+r[0].length):-1}function Xmt(e,t,n){var r=ho.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function _ce(e,t,n){var r=ho.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function Qmt(e,t,n){var r=ho.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function wce(e,t,n){var r=ho.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function Jmt(e,t,n){var r=ho.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function Zmt(e,t,n){var r=ho.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function egt(e,t,n){var r=ho.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function tgt(e,t,n){var r=ho.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function ngt(e,t,n){var r=Bmt.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function rgt(e,t,n){var r=ho.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function igt(e,t,n){var r=ho.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function Ece(e,t){return mr(e.getDate(),t,2)}function sgt(e,t){return mr(e.getHours(),t,2)}function ogt(e,t){return mr(e.getHours()%12||12,t,2)}function agt(e,t){return mr(1+om.count(Ch(e),e),t,3)}function l2e(e,t){return mr(e.getMilliseconds(),t,3)}function ugt(e,t){return l2e(e,t)+"000"}function lgt(e,t){return mr(e.getMonth()+1,t,2)}function cgt(e,t){return mr(e.getMinutes(),t,2)}function fgt(e,t){return mr(e.getSeconds(),t,2)}function dgt(e){var t=e.getDay();return t===0?7:t}function hgt(e,t){return mr(yS.count(Ch(e)-1,e),t,2)}function c2e(e){var t=e.getDay();return t>=4||t===0?XE(e):XE.ceil(e)}function pgt(e,t){return e=c2e(e),mr(XE.count(Ch(e),e)+(Ch(e).getDay()===4),t,2)}function mgt(e){return e.getDay()}function ggt(e,t){return mr(G3.count(Ch(e)-1,e),t,2)}function ygt(e,t){return mr(e.getFullYear()%100,t,2)}function vgt(e,t){return e=c2e(e),mr(e.getFullYear()%100,t,2)}function bgt(e,t){return mr(e.getFullYear()%1e4,t,4)}function _gt(e,t){var n=e.getDay();return e=n>=4||n===0?XE(e):XE.ceil(e),mr(e.getFullYear()%1e4,t,4)}function wgt(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+mr(t/60|0,"0",2)+mr(t%60,"0",2)}function xce(e,t){return mr(e.getUTCDate(),t,2)}function Egt(e,t){return mr(e.getUTCHours(),t,2)}function xgt(e,t){return mr(e.getUTCHours()%12||12,t,2)}function Sgt(e,t){return mr(1+x0.count(Ah(e),e),t,3)}function f2e(e,t){return mr(e.getUTCMilliseconds(),t,3)}function Tgt(e,t){return f2e(e,t)+"000"}function Cgt(e,t){return mr(e.getUTCMonth()+1,t,2)}function Agt(e,t){return mr(e.getUTCMinutes(),t,2)}function Igt(e,t){return mr(e.getUTCSeconds(),t,2)}function kgt(e){var t=e.getUTCDay();return t===0?7:t}function Rgt(e,t){return mr(vS.count(Ah(e)-1,e),t,2)}function d2e(e){var t=e.getUTCDay();return t>=4||t===0?QE(e):QE.ceil(e)}function Ngt(e,t){return e=d2e(e),mr(QE.count(Ah(e),e)+(Ah(e).getUTCDay()===4),t,2)}function Dgt(e){return e.getUTCDay()}function Pgt(e,t){return mr(Y3.count(Ah(e)-1,e),t,2)}function Ogt(e,t){return mr(e.getUTCFullYear()%100,t,2)}function $gt(e,t){return e=d2e(e),mr(e.getUTCFullYear()%100,t,2)}function Mgt(e,t){return mr(e.getUTCFullYear()%1e4,t,4)}function Lgt(e,t){var n=e.getUTCDay();return e=n>=4||n===0?QE(e):QE.ceil(e),mr(e.getUTCFullYear()%1e4,t,4)}function Fgt(){return"+0000"}function Sce(){return"%"}function Tce(e){return+e}function Cce(e){return Math.floor(+e/1e3)}var $_,VK,HK,Xb,h2e;jgt({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function jgt(e){return $_=u2e(e),VK=$_.format,HK=$_.parse,Xb=$_.utcFormat,h2e=$_.utcParse,$_}function Bgt(e){return new Date(e)}function Ugt(e){return e instanceof Date?+e:+new Date(+e)}function qK(e,t,n,r,i,s,o,a,u,l){var c=QTe(),f=c.invert,d=c.domain,h=l(".%L"),p=l(":%S"),m=l("%I:%M"),g=l("%I %p"),y=l("%a %d"),v=l("%b %d"),b=l("%B"),w=l("%Y");function E(T){return(u(T)<T?h:a(T)<T?p:o(T)<T?m:s(T)<T?g:r(T)<T?i(T)<T?y:v:n(T)<T?b:w)(T)}return c.invert=function(T){return new Date(f(T))},c.domain=function(T){return arguments.length?d(Array.from(T,Ugt)):d().map(Bgt)},c.ticks=function(T){var S=d();return e(S[0],S[S.length-1],T??10)},c.tickFormat=function(T,S){return S==null?E:l(S)},c.nice=function(T){var S=d();return(!T||typeof T.range!="function")&&(T=t(S[0],S[S.length-1],T??10)),T?d(e2e(S,T)):c},c.copy=function(){return Rk(c,qK(e,t,n,r,i,s,o,a,u,l))},c}function QA(){return ud.apply(qK(Fmt,jmt,Ch,KA,yS,om,M6,O6,Xp,VK).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function zgt(){return ud.apply(qK(Mmt,Lmt,Ah,XA,vS,x0,L6,$6,Xp,Xb).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function F6(){var e=0,t=1,n,r,i,s,o=Mu,a=!1,u;function l(f){return f==null||isNaN(f=+f)?u:o(i===0?.5:(f=(s(f)-n)*i,a?Math.max(0,Math.min(1,f)):f))}l.domain=function(f){return arguments.length?([e,t]=f,n=s(e=+e),r=s(t=+t),i=n===r?0:1/(r-n),l):[e,t]},l.clamp=function(f){return arguments.length?(a=!!f,l):a},l.interpolator=function(f){return arguments.length?(o=f,l):o};function c(f){return function(d){var h,p;return arguments.length?([h,p]=d,o=f(h,p),l):[o(0),o(1)]}}return l.range=c(Zm),l.rangeRound=c(Tk),l.unknown=function(f){return arguments.length?(u=f,l):u},function(f){return s=f,n=f(e),r=f(t),i=n===r?0:1/(r-n),l}}function By(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function WK(){var e=Gb(F6()(Mu));return e.copy=function(){return By(e,WK())},jy.apply(e,arguments)}function p2e(){var e=FK(F6()).domain([1,10]);return e.copy=function(){return By(e,p2e()).base(e.base())},jy.apply(e,arguments)}function m2e(){var e=jK(F6());return e.copy=function(){return By(e,m2e()).constant(e.constant())},jy.apply(e,arguments)}function GK(){var e=BK(F6());return e.copy=function(){return By(e,GK()).exponent(e.exponent())},jy.apply(e,arguments)}function Vgt(){return GK.apply(null,arguments).exponent(.5)}function j6(){var e=0,t=.5,n=1,r=1,i,s,o,a,u,l=Mu,c,f=!1,d;function h(m){return isNaN(m=+m)?d:(m=.5+((m=+c(m))-s)*(r*m<r*s?a:u),l(f?Math.max(0,Math.min(1,m)):m))}h.domain=function(m){return arguments.length?([e,t,n]=m,i=c(e=+e),s=c(t=+t),o=c(n=+n),a=i===s?0:.5/(s-i),u=s===o?0:.5/(o-s),r=s<i?-1:1,h):[e,t,n]},h.clamp=function(m){return arguments.length?(f=!!m,h):f},h.interpolator=function(m){return arguments.length?(l=m,h):l};function p(m){return function(g){var y,v,b;return arguments.length?([y,v,b]=g,l=bK(m,[y,v,b]),h):[l(0),l(.5),l(1)]}}return h.range=p(Zm),h.rangeRound=p(Tk),h.unknown=function(m){return arguments.length?(d=m,h):d},function(m){return c=m,i=m(e),s=m(t),o=m(n),a=i===s?0:.5/(s-i),u=s===o?0:.5/(o-s),r=s<i?-1:1,h}}function g2e(){var e=Gb(j6()(Mu));return e.copy=function(){return By(e,g2e())},jy.apply(e,arguments)}function y2e(){var e=FK(j6()).domain([.1,1,10]);return e.copy=function(){return By(e,y2e()).base(e.base())},jy.apply(e,arguments)}function v2e(){var e=jK(j6());return e.copy=function(){return By(e,v2e()).constant(e.constant())},jy.apply(e,arguments)}function YK(){var e=BK(j6());return e.copy=function(){return By(e,YK()).exponent(e.exponent())},jy.apply(e,arguments)}function Hgt(){return YK.apply(null,arguments).exponent(.5)}function ld(e){for(var t=e.length/6|0,n=new Array(t),r=0;r<t;)n[r]="#"+e.slice(r*6,++r*6);return n}const qgt=ld("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),Wgt=ld("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),Ggt=ld("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),Ygt=ld("4269d0efb118ff725c6cc5b03ca951ff8ab7a463f297bbf59c6b4e9498a0"),Kgt=ld("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),Xgt=ld("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),Qgt=ld("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),Jgt=ld("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),Zgt=ld("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),e0t=ld("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),b2e=ld("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab");function En(e){return function(){return e}}const Ace=Math.abs,Zo=Math.atan2,fv=Math.cos,t0t=Math.max,U8=Math.min,xd=Math.sin,u1=Math.sqrt,ra=1e-12,JE=Math.PI,K3=JE/2,RC=2*JE;function n0t(e){return e>1?0:e<-1?JE:Math.acos(e)}function Ice(e){return e>=1?K3:e<=-1?-K3:Math.asin(e)}function B6(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);t=r}return e},()=>new SK(t)}function r0t(e){return e.innerRadius}function i0t(e){return e.outerRadius}function s0t(e){return e.startAngle}function o0t(e){return e.endAngle}function a0t(e){return e&&e.padAngle}function u0t(e,t,n,r,i,s,o,a){var u=n-e,l=r-t,c=o-i,f=a-s,d=f*u-c*l;if(!(d*d<ra))return d=(c*(t-s)-f*(e-i))/d,[e+d*u,t+d*l]}function JN(e,t,n,r,i,s,o){var a=e-n,u=t-r,l=(o?s:-s)/u1(a*a+u*u),c=l*u,f=-l*a,d=e+c,h=t+f,p=n+c,m=r+f,g=(d+p)/2,y=(h+m)/2,v=p-d,b=m-h,w=v*v+b*b,E=i-s,T=d*m-p*h,S=(b<0?-1:1)*u1(t0t(0,E*E*w-T*T)),C=(T*b-v*S)/w,A=(-T*v-b*S)/w,k=(T*b+v*S)/w,N=(-T*v+b*S)/w,O=C-g,P=A-y,$=k-g,F=N-y;return O*O+P*P>$*$+F*F&&(C=k,A=N),{cx:C,cy:A,x01:-c,y01:-f,x11:C*(i/E-1),y11:A*(i/E-1)}}function Sz(){var e=r0t,t=i0t,n=En(0),r=null,i=s0t,s=o0t,o=a0t,a=null,u=B6(l);function l(){var c,f,d=+e.apply(this,arguments),h=+t.apply(this,arguments),p=i.apply(this,arguments)-K3,m=s.apply(this,arguments)-K3,g=Ace(m-p),y=m>p;if(a||(a=c=u()),h<d&&(f=h,h=d,d=f),!(h>ra))a.moveTo(0,0);else if(g>RC-ra)a.moveTo(h*fv(p),h*xd(p)),a.arc(0,0,h,p,m,!y),d>ra&&(a.moveTo(d*fv(m),d*xd(m)),a.arc(0,0,d,m,p,y));else{var v=p,b=m,w=p,E=m,T=g,S=g,C=o.apply(this,arguments)/2,A=C>ra&&(r?+r.apply(this,arguments):u1(d*d+h*h)),k=U8(Ace(h-d)/2,+n.apply(this,arguments)),N=k,O=k,P,$;if(A>ra){var F=Ice(A/d*xd(C)),M=Ice(A/h*xd(C));(T-=F*2)>ra?(F*=y?1:-1,w+=F,E-=F):(T=0,w=E=(p+m)/2),(S-=M*2)>ra?(M*=y?1:-1,v+=M,b-=M):(S=0,v=b=(p+m)/2)}var B=h*fv(v),U=h*xd(v),H=d*fv(E),D=d*xd(E);if(k>ra){var z=h*fv(b),W=h*xd(b),j=d*fv(w),q=d*xd(w),G;if(g<JE)if(G=u0t(B,U,j,q,z,W,H,D)){var ne=B-G[0],ce=U-G[1],de=z-G[0],he=W-G[1],ve=1/xd(n0t((ne*de+ce*he)/(u1(ne*ne+ce*ce)*u1(de*de+he*he)))/2),Ie=u1(G[0]*G[0]+G[1]*G[1]);N=U8(k,(d-Ie)/(ve-1)),O=U8(k,(h-Ie)/(ve+1))}else N=O=0}S>ra?O>ra?(P=JN(j,q,B,U,h,O,y),$=JN(z,W,H,D,h,O,y),a.moveTo(P.cx+P.x01,P.cy+P.y01),O<k?a.arc(P.cx,P.cy,O,Zo(P.y01,P.x01),Zo($.y01,$.x01),!y):(a.arc(P.cx,P.cy,O,Zo(P.y01,P.x01),Zo(P.y11,P.x11),!y),a.arc(0,0,h,Zo(P.cy+P.y11,P.cx+P.x11),Zo($.cy+$.y11,$.cx+$.x11),!y),a.arc($.cx,$.cy,O,Zo($.y11,$.x11),Zo($.y01,$.x01),!y))):(a.moveTo(B,U),a.arc(0,0,h,v,b,!y)):a.moveTo(B,U),!(d>ra)||!(T>ra)?a.lineTo(H,D):N>ra?(P=JN(H,D,z,W,d,-N,y),$=JN(B,U,j,q,d,-N,y),a.lineTo(P.cx+P.x01,P.cy+P.y01),N<k?a.arc(P.cx,P.cy,N,Zo(P.y01,P.x01),Zo($.y01,$.x01),!y):(a.arc(P.cx,P.cy,N,Zo(P.y01,P.x01),Zo(P.y11,P.x11),!y),a.arc(0,0,d,Zo(P.cy+P.y11,P.cx+P.x11),Zo($.cy+$.y11,$.cx+$.x11),y),a.arc($.cx,$.cy,N,Zo($.y11,$.x11),Zo($.y01,$.x01),!y))):a.arc(0,0,d,E,w,y)}if(a.closePath(),c)return a=null,c+""||null}return l.centroid=function(){var c=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,f=(+i.apply(this,arguments)+ +s.apply(this,arguments))/2-JE/2;return[fv(f)*c,xd(f)*c]},l.innerRadius=function(c){return arguments.length?(e=typeof c=="function"?c:En(+c),l):e},l.outerRadius=function(c){return arguments.length?(t=typeof c=="function"?c:En(+c),l):t},l.cornerRadius=function(c){return arguments.length?(n=typeof c=="function"?c:En(+c),l):n},l.padRadius=function(c){return arguments.length?(r=c==null?null:typeof c=="function"?c:En(+c),l):r},l.startAngle=function(c){return arguments.length?(i=typeof c=="function"?c:En(+c),l):i},l.endAngle=function(c){return arguments.length?(s=typeof c=="function"?c:En(+c),l):s},l.padAngle=function(c){return arguments.length?(o=typeof c=="function"?c:En(+c),l):o},l.context=function(c){return arguments.length?(a=c??null,l):a},l}function U6(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function _2e(e){this._context=e}_2e.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function KK(e){return new _2e(e)}function w2e(e){return e[0]}function E2e(e){return e[1]}function XK(e,t){var n=En(!0),r=null,i=KK,s=null,o=B6(a);e=typeof e=="function"?e:e===void 0?w2e:En(e),t=typeof t=="function"?t:t===void 0?E2e:En(t);function a(u){var l,c=(u=U6(u)).length,f,d=!1,h;for(r==null&&(s=i(h=o())),l=0;l<=c;++l)!(l<c&&n(f=u[l],l,u))===d&&((d=!d)?s.lineStart():s.lineEnd()),d&&s.point(+e(f,l,u),+t(f,l,u));if(h)return s=null,h+""||null}return a.x=function(u){return arguments.length?(e=typeof u=="function"?u:En(+u),a):e},a.y=function(u){return arguments.length?(t=typeof u=="function"?u:En(+u),a):t},a.defined=function(u){return arguments.length?(n=typeof u=="function"?u:En(!!u),a):n},a.curve=function(u){return arguments.length?(i=u,r!=null&&(s=i(r)),a):i},a.context=function(u){return arguments.length?(u==null?r=s=null:s=i(r=u),a):r},a}function x2e(e,t,n){var r=null,i=En(!0),s=null,o=KK,a=null,u=B6(l);e=typeof e=="function"?e:e===void 0?w2e:En(+e),t=typeof t=="function"?t:En(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?E2e:En(+n);function l(f){var d,h,p,m=(f=U6(f)).length,g,y=!1,v,b=new Array(m),w=new Array(m);for(s==null&&(a=o(v=u())),d=0;d<=m;++d){if(!(d<m&&i(g=f[d],d,f))===y)if(y=!y)h=d,a.areaStart(),a.lineStart();else{for(a.lineEnd(),a.lineStart(),p=d-1;p>=h;--p)a.point(b[p],w[p]);a.lineEnd(),a.areaEnd()}y&&(b[d]=+e(g,d,f),w[d]=+t(g,d,f),a.point(r?+r(g,d,f):b[d],n?+n(g,d,f):w[d]))}if(v)return a=null,v+""||null}function c(){return XK().defined(i).curve(o).context(s)}return l.x=function(f){return arguments.length?(e=typeof f=="function"?f:En(+f),r=null,l):e},l.x0=function(f){return arguments.length?(e=typeof f=="function"?f:En(+f),l):e},l.x1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:En(+f),l):r},l.y=function(f){return arguments.length?(t=typeof f=="function"?f:En(+f),n=null,l):t},l.y0=function(f){return arguments.length?(t=typeof f=="function"?f:En(+f),l):t},l.y1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:En(+f),l):n},l.lineX0=l.lineY0=function(){return c().x(e).y(t)},l.lineY1=function(){return c().x(e).y(n)},l.lineX1=function(){return c().x(r).y(t)},l.defined=function(f){return arguments.length?(i=typeof f=="function"?f:En(!!f),l):i},l.curve=function(f){return arguments.length?(o=f,s!=null&&(a=o(s)),l):o},l.context=function(f){return arguments.length?(f==null?s=a=null:a=o(s=f),l):s},l}function l0t(e,t){return t<e?-1:t>e?1:t>=e?0:NaN}function c0t(e){return e}function f0t(){var e=c0t,t=l0t,n=null,r=En(0),i=En(RC),s=En(0);function o(a){var u,l=(a=U6(a)).length,c,f,d=0,h=new Array(l),p=new Array(l),m=+r.apply(this,arguments),g=Math.min(RC,Math.max(-RC,i.apply(this,arguments)-m)),y,v=Math.min(Math.abs(g)/l,s.apply(this,arguments)),b=v*(g<0?-1:1),w;for(u=0;u<l;++u)(w=p[h[u]=u]=+e(a[u],u,a))>0&&(d+=w);for(t!=null?h.sort(function(E,T){return t(p[E],p[T])}):n!=null&&h.sort(function(E,T){return n(a[E],a[T])}),u=0,f=d?(g-l*b)/d:0;u<l;++u,m=y)c=h[u],w=p[c],y=m+(w>0?w*f:0)+b,p[c]={data:a[c],index:u,value:w,startAngle:m,endAngle:y,padAngle:v};return p}return o.value=function(a){return arguments.length?(e=typeof a=="function"?a:En(+a),o):e},o.sortValues=function(a){return arguments.length?(t=a,n=null,o):t},o.sort=function(a){return arguments.length?(n=a,t=null,o):n},o.startAngle=function(a){return arguments.length?(r=typeof a=="function"?a:En(+a),o):r},o.endAngle=function(a){return arguments.length?(i=typeof a=="function"?a:En(+a),o):i},o.padAngle=function(a){return arguments.length?(s=typeof a=="function"?a:En(+a),o):s},o}const d0t={draw(e,t){const n=u1(t/JE);e.moveTo(n,0),e.arc(0,0,n,0,RC)}};function h0t(e,t){let n=null,r=B6(i);e=typeof e=="function"?e:En(e||d0t),t=typeof t=="function"?t:En(t===void 0?64:+t);function i(){let s;if(n||(n=s=r()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),s)return n=null,s+""||null}return i.type=function(s){return arguments.length?(e=typeof s=="function"?s:En(s),i):e},i.size=function(s){return arguments.length?(t=typeof s=="function"?s:En(+s),i):t},i.context=function(s){return arguments.length?(n=s??null,i):n},i}function G0(){}function X3(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function z6(e){this._context=e}z6.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:X3(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:X3(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function S2e(e){return new z6(e)}function T2e(e){this._context=e}T2e.prototype={areaStart:G0,areaEnd:G0,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:X3(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function p0t(e){return new T2e(e)}function C2e(e){this._context=e}C2e.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:X3(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function m0t(e){return new C2e(e)}function A2e(e,t){this._basis=new z6(e),this._beta=t}A2e.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,n=e.length-1;if(n>0)for(var r=e[0],i=t[0],s=e[n]-r,o=t[n]-i,a=-1,u;++a<=n;)u=a/n,this._basis.point(this._beta*e[a]+(1-this._beta)*(r+u*s),this._beta*t[a]+(1-this._beta)*(i+u*o));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}};const g0t=function e(t){function n(r){return t===1?new z6(r):new A2e(r,t)}return n.beta=function(r){return e(+r)},n}(.85);function Q3(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function QK(e,t){this._context=e,this._k=(1-t)/6}QK.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:Q3(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:Q3(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const y0t=function e(t){function n(r){return new QK(r,t)}return n.tension=function(r){return e(+r)},n}(0);function JK(e,t){this._context=e,this._k=(1-t)/6}JK.prototype={areaStart:G0,areaEnd:G0,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:Q3(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const v0t=function e(t){function n(r){return new JK(r,t)}return n.tension=function(r){return e(+r)},n}(0);function ZK(e,t){this._context=e,this._k=(1-t)/6}ZK.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Q3(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const b0t=function e(t){function n(r){return new ZK(r,t)}return n.tension=function(r){return e(+r)},n}(0);function eX(e,t,n){var r=e._x1,i=e._y1,s=e._x2,o=e._y2;if(e._l01_a>ra){var a=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,u=3*e._l01_a*(e._l01_a+e._l12_a);r=(r*a-e._x0*e._l12_2a+e._x2*e._l01_2a)/u,i=(i*a-e._y0*e._l12_2a+e._y2*e._l01_2a)/u}if(e._l23_a>ra){var l=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,c=3*e._l23_a*(e._l23_a+e._l12_a);s=(s*l+e._x1*e._l23_2a-t*e._l12_2a)/c,o=(o*l+e._y1*e._l23_2a-n*e._l12_2a)/c}e._context.bezierCurveTo(r,i,s,o,e._x2,e._y2)}function I2e(e,t){this._context=e,this._alpha=t}I2e.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:eX(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const _0t=function e(t){function n(r){return t?new I2e(r,t):new QK(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function k2e(e,t){this._context=e,this._alpha=t}k2e.prototype={areaStart:G0,areaEnd:G0,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:eX(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const w0t=function e(t){function n(r){return t?new k2e(r,t):new JK(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function R2e(e,t){this._context=e,this._alpha=t}R2e.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:eX(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const E0t=function e(t){function n(r){return t?new R2e(r,t):new ZK(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function N2e(e){this._context=e}N2e.prototype={areaStart:G0,areaEnd:G0,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function x0t(e){return new N2e(e)}function kce(e){return e<0?-1:1}function Rce(e,t,n){var r=e._x1-e._x0,i=t-e._x1,s=(e._y1-e._y0)/(r||i<0&&-0),o=(n-e._y1)/(i||r<0&&-0),a=(s*i+o*r)/(r+i);return(kce(s)+kce(o))*Math.min(Math.abs(s),Math.abs(o),.5*Math.abs(a))||0}function Nce(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function z8(e,t,n){var r=e._x0,i=e._y0,s=e._x1,o=e._y1,a=(s-r)/3;e._context.bezierCurveTo(r+a,i+a*t,s-a,o-a*n,s,o)}function J3(e){this._context=e}J3.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:z8(this,this._t0,Nce(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,z8(this,Nce(this,n=Rce(this,e,t)),n);break;default:z8(this,this._t0,n=Rce(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function D2e(e){this._context=new P2e(e)}(D2e.prototype=Object.create(J3.prototype)).point=function(e,t){J3.prototype.point.call(this,t,e)};function P2e(e){this._context=e}P2e.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,i,s){this._context.bezierCurveTo(t,e,r,n,s,i)}};function S0t(e){return new J3(e)}function T0t(e){return new D2e(e)}function O2e(e){this._context=e}O2e.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var r=Dce(e),i=Dce(t),s=0,o=1;o<n;++s,++o)this._context.bezierCurveTo(r[0][s],i[0][s],r[1][s],i[1][s],e[o],t[o]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function Dce(e){var t,n=e.length-1,r,i=new Array(n),s=new Array(n),o=new Array(n);for(i[0]=0,s[0]=2,o[0]=e[0]+2*e[1],t=1;t<n-1;++t)i[t]=1,s[t]=4,o[t]=4*e[t]+2*e[t+1];for(i[n-1]=2,s[n-1]=7,o[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)r=i[t]/s[t-1],s[t]-=r,o[t]-=r*o[t-1];for(i[n-1]=o[n-1]/s[n-1],t=n-2;t>=0;--t)i[t]=(o[t]-i[t+1])/s[t];for(s[n-1]=(e[n]+i[n-1])/2,t=0;t<n-1;++t)s[t]=2*e[t+1]-i[t+1];return[i,s]}function C0t(e){return new O2e(e)}function V6(e,t){this._context=e,this._t=t}V6.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function A0t(e){return new V6(e,.5)}function I0t(e){return new V6(e,0)}function k0t(e){return new V6(e,1)}function Pce(e,t){if((o=e.length)>1)for(var n=1,r,i,s=e[t[0]],o,a=s.length;n<o;++n)for(i=s,s=e[t[n]],r=0;r<a;++r)s[r][1]+=s[r][0]=isNaN(i[r][1])?i[r][0]:i[r][1]}function Oce(e){for(var t=e.length,n=new Array(t);--t>=0;)n[t]=t;return n}function R0t(e,t){return e[t]}function N0t(e){const t=[];return t.key=e,t}function D0t(){var e=En([]),t=Oce,n=Pce,r=R0t;function i(s){var o=Array.from(e.apply(this,arguments),N0t),a,u=o.length,l=-1,c;for(const f of s)for(a=0,++l;a<u;++a)(o[a][l]=[0,+r(f,o[a].key,l,s)]).data=f;for(a=0,c=U6(t(o));a<u;++a)o[c[a]].index=a;return n(o,c),o}return i.keys=function(s){return arguments.length?(e=typeof s=="function"?s:En(Array.from(s)),i):e},i.value=function(s){return arguments.length?(r=typeof s=="function"?s:En(+s),i):r},i.order=function(s){return arguments.length?(t=s==null?Oce:typeof s=="function"?s:En(Array.from(s)),i):t},i.offset=function(s){return arguments.length?(n=s??Pce,i):n},i}function N2(e,t,n){this.k=e,this.x=t,this.y=n}N2.prototype={constructor:N2,scale:function(e){return e===1?this:new N2(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new N2(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};N2.prototype;function tX({xScale:e,yRange:t,vertPosition:n,label:r,ticks:i,isDate:s=!1,showLines:o=!0,compact:a=!1}){const u=I.useMemo(()=>i.length>1?Math.abs(i[1].offset-i[0].offset):e.range()[0]-e.range()[1],[i,e]),l=I.useCallback(c=>(s?Xb("%B"):Fy(".2s"))(c),[s]);return _.jsxs(_.Fragment,{children:[_.jsx("g",{transform:`translate(${e.range()[0]}, ${n+25})`,children:_.jsx("foreignObject",{width:Math.abs(e.range()[0]-e.range()[1]),height:20,children:_.jsx(Pc,{children:_.jsx(ls,{gap:3,children:_.jsx(Xe,{size:a?"10px":"14px",style:{color:"#878E95"},children:r})})})})}),_.jsx("path",{transform:`translate(0, ${n})`,d:["M",e.range()[0],0,"H",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}),o?_.jsx("path",{transform:`translate(0, ${t[1]})`,d:["M",e.range()[0],0,"H",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}):null,i.map(({value:c,offset:f})=>_.jsxs("g",{transform:`translate(${f}, ${n})`,children:[_.jsx("line",{y2:"6",stroke:"currentColor"}),o?_.jsx("line",{y2:`${-(t[0]-t[1])}`,stroke:"lightgray"}):null,_.jsx("foreignObject",{x:0-u/2,y:10,width:u,height:20,children:_.jsx(Pc,{children:_.jsx(ai,{withinPortal:!0,label:c,children:_.jsx(Xe,{px:2,size:"10px",style:{textAlign:"center",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"},children:+c==0?0:l(s?new Date(c):c)})})})})]},c))]})}const P0t=Object.freeze(Object.defineProperty({__proto__:null,XAxisBar:tX},Symbol.toStringTag,{value:"Module"}));function $2e({yScale:e,xRange:t,horizontalPosition:n,label:r,ticks:i,showLines:s,compact:o=!1}){const a=I.useMemo(()=>{const u=i.reduce((l,{value:c})=>{const{length:f}=`${c}`;return f>l?f:l},0);return u>10?60:u*6},[i]);return _.jsxs(_.Fragment,{children:[_.jsx("g",{transform:`translate(${n-a-40}, ${e.range()[1]}) rotate(-90)`,children:_.jsx("foreignObject",{width:Math.abs(e.range()[1]-e.range()[0]),height:20,children:_.jsx(Pc,{children:_.jsx(ls,{gap:3,children:_.jsx(Xe,{size:o?"10px":"14px",style:{color:"#878E95"},children:r})})})})}),_.jsx("path",{transform:`translate(${n}, 0)`,d:["M",0,e.range()[0],"V",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}),s?_.jsx("path",{transform:`translate(${t[1]}, 0)`,d:["M",0,e.range()[0],"V",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}):null,i.map(({value:u,offset:l})=>_.jsxs("g",{transform:`translate(${n}, ${l})`,children:[_.jsx("line",{x2:"-6",stroke:"currentColor"}),s?_.jsx("line",{x2:`${t[1]-t[0]}`,stroke:"lightgray"}):null,_.jsx("g",{style:{transform:`translate(-${a+10}px, -9px)`},children:_.jsx("foreignObject",{width:a,height:20,children:_.jsx(ls,{style:{width:"100%",height:"100%"},justify:"right",children:_.jsx(Xe,{style:{textOverflow:"ellipsis",overflow:"hidden"},size:"10px",children:u})})})},u)]},u))]})}const O0t=Object.freeze(Object.defineProperty({__proto__:null,YAxisBar:$2e},Symbol.toStringTag,{value:"Module"})),rc={top:15,left:100,right:50,bottom:50};function Tz({barsTable:e,parameters:t,data:n}){const[r,{height:i,width:s}]=E1(),o=I.useMemo(()=>s-rc.left-rc.right,[s]),a=I.useMemo(()=>i-rc.top-rc.bottom,[i]),u=I.useMemo(()=>{const d=Array.from(new Set(n.map(h=>h[t.category])));return Wb(b2e).domain(d)},[n,t.category]),l=I.useMemo(()=>e?Yf([rc.left,o+rc.left]).domain([0,lh(e.objects().map(d=>d.count))]).nice():null,[e,o]),c=I.useMemo(()=>e?gS([rc.top,a+rc.top]).domain(e.array(t.category).sort()).paddingInner(.1):null,[e,a,t.category]),f=I.useMemo(()=>!l||!c||!u||!e?null:e.objects().map((d,h)=>d[t.category]===null||d.count===null?null:_.jsxs("g",{children:[_.jsx("rect",{x:rc.left,y:c(d[t.category]),fill:u(d[t.category]),height:c.bandwidth(),width:l(d.count)-rc.left},h),_.jsx("text",{x:l(d.count)+5,y:c(d[t.category])+c.bandwidth()/2,style:{textAlign:"center",dominantBaseline:"middle",fontSize:14},children:d.count})]},h)),[e,u,t.category,l,c]);return c&&l?_.jsxs("svg",{ref:r,style:{height:"200px",width:"550px",fontFamily:'BlinkMacSystemFont, -apple-system, "Segoe UI", "Roboto", "Oxygen", "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue", "Helvetica", "Arial", sans-serif'},children:[_.jsx(tX,{xScale:l,yRange:c.range(),vertPosition:a+rc.top,showLines:!1,label:"Count",ticks:l.ticks(5).map(d=>({value:d.toString(),offset:l(d)}))}),c?_.jsx($2e,{yScale:c,horizontalPosition:rc.left,xRange:l.range(),label:t.category,ticks:u.domain().map(d=>({value:d,offset:c(d)+c.bandwidth()/2}))}):null,f]}):_.jsx(sd,{})}const $0t=Object.freeze(Object.defineProperty({__proto__:null,Bar:Tz,default:Tz},Symbol.toStringTag,{value:"Module"})),dr=Array.isArray;function Ju(e){return e!=null?dr(e)?e:[e]:[]}function M0t(e=0,t=1/0){return`${$ce(e)} < row_number() && row_number() <= ${$ce(t)}`}function $ce(e){return e<0?`count() + ${e}`:e}class M2e{constructor(t){t&&(this._params=t)}params(t){return arguments.length?(t&&(this._params={...this._params,...t}),this):this._params}reify(t){return this.__reify(this,t)}count(t){return this.__count(this,t)}derive(t,n){return this.__derive(this,t,n)}filter(t){return this.__filter(this,t)}slice(t,n){return this.filter(M0t(t,n)).reify()}groupby(...t){return this.__groupby(this,t.flat())}orderby(...t){return this.__orderby(this,t.flat())}relocate(t,n){return this.__relocate(this,Ju(t),n)}rename(...t){return this.__rename(this,t.flat())}rollup(t){return this.__rollup(this,t)}sample(t,n){return this.__sample(this,t,n)}select(...t){return this.__select(this,t.flat())}ungroup(){return this.__ungroup(this)}unorder(){return this.__unorder(this)}dedupe(...t){return this.__dedupe(this,t.flat())}impute(t,n){return this.__impute(this,t,n)}fold(t,n){return this.__fold(this,t,n)}pivot(t,n,r){return this.__pivot(this,t,n,r)}spread(t,n){return this.__spread(this,t,n)}unroll(t,n){return this.__unroll(this,t,n)}lookup(t,n,...r){return this.__lookup(this,t,n,r.flat())}join(t,n,r,i){return this.__join(this,t,n,r,i)}join_left(t,n,r,i){const s={...i,left:!0,right:!1};return this.__join(this,t,n,r,s)}join_right(t,n,r,i){const s={...i,left:!1,right:!0};return this.__join(this,t,n,r,s)}join_full(t,n,r,i){const s={...i,left:!0,right:!0};return this.__join(this,t,n,r,s)}cross(t,n,r){return this.__cross(this,t,n,r)}semijoin(t,n){return this.__semijoin(this,t,n)}antijoin(t,n){return this.__antijoin(this,t,n)}concat(...t){return this.__concat(this,t.flat())}union(...t){return this.__union(this,t.flat())}intersect(...t){return this.__intersect(this,t.flat())}except(...t){return this.__except(this,t.flat())}}function xn(e){throw Error(e)}function tu(e){return typeof e=="number"}function gi(e){return typeof e=="function"}function H6(e,t){const n=Array(e);if(gi(t))for(let r=0;r<e;++r)n[r]=t(r);else n.fill(t);return n}let L0t=class extends M2e{constructor(t,n,r,i,s,o,a){super(a),this._names=Object.freeze(t),this._data=r,this._total=n,this._nrows=i?i.count():n,this._mask=n!==this._nrows&&i||null,this._group=s||null,this._order=o||null}create(t){xn("Not implemented")}get[Symbol.toStringTag](){if(!this._names)return"Object";const t=this.numRows()+" row"+(this.numRows()!==1?"s":"");return`Table: ${this.numCols()+" col"+(this.numCols()!==1?"s":"")} x ${t}`+(this.isFiltered()?` (${this.totalRows()} backing)`:"")+(this.isGrouped()?`, ${this._group.size} groups`:"")+(this.isOrdered()?", ordered":"")}isFiltered(){return!!this._mask}isGrouped(){return!!this._group}isOrdered(){return!!this._order}data(){return this._data}mask(){return this._mask}groups(){return this._group}comparator(){return this._order}totalRows(){return this._total}numRows(){return this._nrows}get size(){return this._nrows}numCols(){return this._names.length}columnNames(t){return t?this._names.filter(t):this._names.slice()}columnName(t){return this._names[t]}columnIndex(t){return this._names.indexOf(t)}columnArray(t,n){return this.array(t,n)}array(t,n){xn("Not implemented")}*values(t){const n=this.getter(t),r=this.numRows();for(let i=0;i<r;++i)yield n(i)}get(t,n=0){xn("Not implemented")}getter(t){xn("Not implemented")}objects(t){xn("Not implemented")}object(t){xn("Not implemented")}[Symbol.iterator](){xn("Not implemented")}print(t={}){tu(t)?t={limit:t}:t.limit==null&&(t.limit=10);const n=this.objects({...t,grouped:!1}),r=`${this[Symbol.toStringTag]}. Showing ${n.length} rows.`;return console.log(r),console.table(n),this}indices(t=!0){if(this._index)return this._index;const n=this.numRows(),r=new Uint32Array(n),i=this.isOrdered(),s=this.mask();let o=-1;if(s)for(let a=s.next(0);a>=0;a=s.next(a+1))r[++o]=a;else for(let a=0;a<n;++a)r[++o]=a;if(t&&i){const a=this._order,u=this._data;r.sort((l,c)=>a(l,c,u))}return(t||!i)&&(this._index=r),r}partitions(t=!0){if(this._partitions)return this._partitions;if(!this.isGrouped())return[this.indices(t)];const{keys:n,size:r}=this._group,i=H6(r,()=>[]),s=this._index,o=this.mask(),a=this.numRows();if(s&&this.isOrdered())for(let u=0,l;u<a;++u)l=s[u],i[n[l]].push(l);else if(o)for(let u=o.next(0);u>=0;u=o.next(u+1))i[n[u]].push(u);else for(let u=0;u<a;++u)i[n[u]].push(u);if(t&&!s&&this.isOrdered()){const u=this._order,l=this._data;for(let c=0;c<r;++c)i[c].sort((f,d)=>u(f,d,l))}return(t||!this.isOrdered())&&(this._partitions=i),i}scan(t,n,r=1/0,i=0){const s=this._mask,o=this._nrows,a=this._data;let u=i||0;if(u>o)return;const l=Math.min(o,u+r),c=()=>u=this._total;if(n&&this.isOrdered()||s&&this._index){const f=this.indices(),d=this._data;for(;u<l;++u)t(f[u],d,c)}else if(s){let f=l-u+1;for(u=s.nth(u);--f&&u>-1;u=s.next(u+1))t(u,a,c)}else for(;u<l;++u)t(u,a,c)}slice(t=0,n=1/0){if(this.isGrouped())return super.slice(t,n);const r=[],i=this.numRows();return t=Math.max(0,t+(t<0?i:0)),n=Math.min(i,Math.max(0,n+(n<0?i:0))),this.scan(s=>r.push(s),!0,n-t,t),this.reify(r)}reduce(t){return this.__reduce(this,t)}},F0t=class{constructor(t){this.data=t}get length(){return this.data.length}get(t){return this.data[t]}[Symbol.iterator](){return this.data[Symbol.iterator]()}},j0t=function(e){return e&&gi(e.get)?e:new F0t(e)};function Im(e){return e instanceof Date}function wa(e){return e===Object(e)}function Z3(e){return e instanceof RegExp}function Bo(e){return typeof e=="string"}function B0t(e,t){const n=r=>xn(`Illegal argument type: ${r||typeof e}`);return e instanceof Map?Mce(e.entries(),t):Im(e)?n("Date"):Z3(e)?n("RegExp"):Bo(e)?n():dr(e)?U0t(e,t):gi(e[Symbol.iterator])?z0t(e,t):wa(e)?Mce(Object.entries(e),t):n()}function Mce(e,t=["key","value"]){const n=[],r=[];for(const[s,o]of e)n.push(s),r.push(o);const i={};return t[0]&&(i[t[0]]=n),t[1]&&(i[t[1]]=r),i}function U0t(e,t){const n=e.length,r={},i=s=>r[s]=Array(n);if(n){t=t||Object.keys(e[0]);const s=t.map(i),o=s.length;for(let a=0;a<n;++a){const u=e[a];for(let l=0;l<o;++l)s[l][a]=u[t[l]]}}else t&&t.forEach(i);return r}function z0t(e,t){const n={},r=o=>n[o]=[];let i,s;for(const o of e){i||(t=t||Object.keys(o),i=t.map(r),s=i.length);for(let a=0;a<s;++a)i[a].push(o[t[a]])}return!i&&t&&t.forEach(r),n}const{hasOwnProperty:V0t}=Object.prototype;function Kf(e,t){return V0t.call(e,t)}function Zl(e){return e?new Lce({...e.data()},e.columnNames()):new Lce}class Lce{constructor(t,n){this.data=t||{},this.names=n||[]}add(t,n){return this.has(t)||this.names.push(t+""),this.data[t]=n}has(t){return Kf(this.data,t)}new(){return this.filter=null,this.groups=this.groups||null,this.order=null,this}groupby(t){return this.groups=t,this}}const ar=void 0,H0t=Object.getPrototypeOf(Int8Array);function Nk(e){return e instanceof H0t}function l1(e){return dr(e)||Nk(e)}function Df(e){return e!=null&&e===e}const $T=e=>l1(e)||Bo(e),q0t={compact:e=>l1(e)?e.filter(t=>Df(t)):e,concat:(...e)=>[].concat(...e),includes:(e,t,n)=>$T(e)?e.includes(t,n):!1,indexof:(e,t)=>$T(e)?e.indexOf(t):-1,join:(e,t)=>l1(e)?e.join(t):ar,lastindexof:(e,t)=>$T(e)?e.lastIndexOf(t):-1,length:e=>$T(e)?e.length:0,pluck:(e,t)=>l1(e)?e.map(n=>Df(n)?n[t]:ar):ar,reverse:e=>l1(e)?e.slice().reverse():Bo(e)?e.split("").reverse().join(""):ar,slice:(e,t,n)=>$T(e)?e.slice(t,n):ar};function W0t(e,t,n,r,i){return e==null?null:e<t?-1/0:e>n?1/0:(e=Math.max(t,Math.min(e,n)),t+r*Math.floor(1e-14+(e-t)/r+(i||0)))}function TP(e,t,n="0"){const r=e+"",i=r.length;return i<t?Array(t-i+1).join(n)+r:r}const Sd=e=>(e<10?"0":"")+e,G0t=e=>e<0?"-"+TP(-e,6):e>9999?"+"+TP(e,6):TP(e,4);function L2e(e,t,n,r,i,s,o,a,u){const l=a?"Z":"";return G0t(e)+"-"+Sd(t+1)+"-"+Sd(n)+(!u||o?"T"+Sd(r)+":"+Sd(i)+":"+Sd(s)+"."+TP(o,3)+l:s?"T"+Sd(r)+":"+Sd(i)+":"+Sd(s)+l:i||r||!a?"T"+Sd(r)+":"+Sd(i)+l:"")}function F2e(e,t){return isNaN(e)?"Invalid Date":L2e(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds(),!1,t)}function q6(e,t){return isNaN(e)?"Invalid Date":L2e(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds(),!0,t)}const Y0t=/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/;function K0t(e){return e.match(Y0t)&&!isNaN(Date.parse(e))}function X0t(e,t=Date.parse){return K0t(e)?t(e):e}const j2e=6e4,B2e=864e5,U2e=6048e5,Vi=new Date,Hi=new Date,es=e=>(Vi.setTime(typeof e=="string"?X0t(e):e),Vi);function Q0t(e,t,n,r,i,s,o){return arguments.length?new Date(e,t||0,n??1,r||0,i||0,s||0,o||0):new Date(Date.now())}function J0t(e,t,n,r,i,s,o){return arguments.length?new Date(Date.UTC(e,t||0,n??1,r||0,i||0,s||0,o||0)):new Date(Date.now())}function Z0t(e){Hi.setTime(+e),Hi.setHours(0,0,0,0),Vi.setTime(+Hi),Vi.setMonth(0),Vi.setDate(1);const t=(Hi.getTimezoneOffset()-Vi.getTimezoneOffset())*j2e;return Math.floor(1+(Hi-Vi-t)/B2e)}function eyt(e){Hi.setTime(+e),Hi.setUTCHours(0,0,0,0);const t=Date.UTC(Hi.getUTCFullYear(),0,1);return Math.floor(1+(Hi-t)/B2e)}function tyt(e,t){const n=t||0;Hi.setTime(+e),Hi.setDate(Hi.getDate()-(Hi.getDay()+7-n)%7),Hi.setHours(0,0,0,0),Vi.setTime(+e),Vi.setMonth(0),Vi.setDate(1),Vi.setDate(1-(Vi.getDay()+7-n)%7),Vi.setHours(0,0,0,0);const r=(Hi.getTimezoneOffset()-Vi.getTimezoneOffset())*j2e;return Math.floor((1+(Hi-Vi)-r)/U2e)}function nyt(e,t){const n=t||0;return Hi.setTime(+e),Hi.setUTCDate(Hi.getUTCDate()-(Hi.getUTCDay()+7-n)%7),Hi.setUTCHours(0,0,0,0),Vi.setTime(+e),Vi.setUTCMonth(0),Vi.setUTCDate(1),Vi.setUTCDate(1-(Vi.getUTCDay()+7-n)%7),Vi.setUTCHours(0,0,0,0),Math.floor((1+(Hi-Vi))/U2e)}const ryt={format_date:(e,t)=>F2e(es(e),!t),format_utcdate:(e,t)=>q6(es(e),!t),timestamp:e=>+es(e),year:e=>es(e).getFullYear(),quarter:e=>Math.floor(es(e).getMonth()/3),month:e=>es(e).getMonth(),date:e=>es(e).getDate(),dayofweek:e=>es(e).getDay(),hours:e=>es(e).getHours(),minutes:e=>es(e).getMinutes(),seconds:e=>es(e).getSeconds(),milliseconds:e=>es(e).getMilliseconds(),utcyear:e=>es(e).getUTCFullYear(),utcquarter:e=>Math.floor(es(e).getUTCMonth()/3),utcmonth:e=>es(e).getUTCMonth(),utcdate:e=>es(e).getUTCDate(),utcdayofweek:e=>es(e).getUTCDay(),utchours:e=>es(e).getUTCHours(),utcminutes:e=>es(e).getUTCMinutes(),utcseconds:e=>es(e).getUTCSeconds(),utcmilliseconds:e=>es(e).getUTCMilliseconds(),datetime:Q0t,dayofyear:Z0t,week:tyt,utcdatetime:J0t,utcdayofyear:eyt,utcweek:nyt,now:Date.now};function nX(e,t){return e==null||t==null||e!==e||t!==t?!1:e===t?!0:Im(e)||Im(t)?+e==+t:Z3(e)&&Z3(t)?e+""==t+"":wa(e)&&wa(t)?iyt(e,t):!1}function iyt(e,t){if(Object.getPrototypeOf(e)!==Object.getPrototypeOf(t))return!1;if(e.length||t.length)return Fce(e,t);const n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length||(n.sort(),r.sort(),!Fce(n,r,(s,o)=>s===o)))return!1;const i=n.length;for(let s=0;s<i;++s){const o=n[s];if(!nX(e[o],t[o]))return!1}return!0}function Fce(e,t,n=nX){const r=e.length;if(r!==t.length)return!1;for(let i=0;i<r;++i)if(!n(e[i],t[i]))return!1;return!0}const syt={parse_json:e=>JSON.parse(e),to_json:e=>JSON.stringify(e)};let oyt=Math.random;function bS(){return oyt()}const ayt={random:bS,is_nan:Number.isNaN,is_finite:Number.isFinite,abs:Math.abs,cbrt:Math.cbrt,ceil:Math.ceil,clz32:Math.clz32,exp:Math.exp,expm1:Math.expm1,floor:Math.floor,fround:Math.fround,greatest:Math.max,least:Math.min,log:Math.log,log10:Math.log10,log1p:Math.log1p,log2:Math.log2,pow:Math.pow,round:Math.round,sign:Math.sign,sqrt:Math.sqrt,trunc:Math.trunc,degrees:e=>180*e/Math.PI,radians:e=>Math.PI*e/180,acos:Math.acos,acosh:Math.acosh,asin:Math.asin,asinh:Math.asinh,atan:Math.atan,atan2:Math.atan2,atanh:Math.atanh,cos:Math.cos,cosh:Math.cosh,sin:Math.sin,sinh:Math.sinh,tan:Math.tan,tanh:Math.tanh};function rX(e){return e instanceof Map}function uyt(e){return e instanceof Set}function CP(e){return rX(e)||uyt(e)}function V8(e){return Array.from(e)}const lyt={has:(e,t)=>CP(e)?e.has(t):e!=null?Kf(e,t):!1,keys:e=>rX(e)?V8(e.keys()):e!=null?Object.keys(e):[],values:e=>CP(e)?V8(e.values()):e!=null?Object.values(e):[],entries:e=>CP(e)?V8(e.entries()):e!=null?Object.entries(e):[],object:e=>e?Object.fromEntries(e):ar};function cyt(e,t,n){if(t instanceof Map){if(t.has(e))return t.get(e)}else if(Kf(t,e))return t[e];return n!==void 0?n:e}function fyt(e,t,n){let r=arguments.length;e=+e,t=+t,n=r<2?(t=e,e=0,1):r<3?1:+n,r=Math.max(0,Math.ceil((t-e)/n))|0;const i=new Array(r);for(let s=0;s<r;++s)i[s]=e+s*n;return i}const dyt={parse_date:e=>e==null?e:new Date(e),parse_float:e=>e==null?e:Number.parseFloat(e),parse_int:(e,t)=>e==null?e:Number.parseInt(e,t),endswith:(e,t,n)=>e==null?!1:String(e).endsWith(t,n),match:(e,t,n)=>{const r=e==null?e:String(e).match(t);return n==null||r==null?r:typeof n=="number"?r[n]:r.groups?r.groups[n]:null},normalize:(e,t)=>e==null?e:String(e).normalize(t),padend:(e,t,n)=>e==null?e:String(e).padEnd(t,n),padstart:(e,t,n)=>e==null?e:String(e).padStart(t,n),upper:e=>e==null?e:String(e).toUpperCase(),lower:e=>e==null?e:String(e).toLowerCase(),repeat:(e,t)=>e==null?e:String(e).repeat(t),replace:(e,t,n)=>e==null?e:String(e).replace(t,String(n)),substring:(e,t,n)=>e==null?e:String(e).substring(t,n),split:(e,t,n)=>e==null?[]:String(e).split(t,n),startswith:(e,t,n)=>e==null?!1:String(e).startsWith(t,n),trim:e=>e==null?e:String(e).trim()},kw={bin:W0t,equal:nX,recode:cyt,sequence:fyt,...q0t,...ryt,...syt,...ayt,...lyt,...dyt};function JA(e){return typeof e=="bigint"}function Ih(e){return e===void 0?e+"":JA(e)?e+"n":JSON.stringify(e)}function vn(e,t=[],n=[]){return new hyt(e,Ju(t),Ju(n))}let hyt=class{constructor(t,n,r){this.name=t,this.fields=n,this.params=r}toString(){const t=[...this.fields.map(n=>`d[${Ih(n)}]`),...this.params.map(Ih)];return`d => op.${this.name}(${t})`}toObject(){return{expr:this.toString(),func:!0}}};const z2e=e=>vn("any",e),V2e=()=>vn("count"),H2e=e=>vn("array_agg",e),q2e=e=>vn("array_agg_distinct",e),W2e=(e,t)=>vn("map_agg",[e,t]),G2e=(e,t)=>vn("object_agg",[e,t]),Y2e=(e,t)=>vn("entries_agg",[e,t]);({...kw});function pyt(e,t){e=CP(e)?e:new Set(e);let n=t,r=0;for(;e.has(n);)n=t+ ++r;return n}function myt(e,t){if(!e||!t)return e;const{keys:n,rows:r,size:i}=e,s=new Int32Array(i);t.scan(c=>s[n[c]]=1);const o=s.reduce((c,f)=>c+f,0);if(o===i)return e;const a=Array(o);let u=0;for(let c=0;c<i;++c)s[c]&&(a[s[c]=u++]=r[c]);const l=new Uint32Array(n.length);return t.scan(c=>l[c]=s[n[c]]),{...e,keys:l,rows:a,size:u}}function gyt(e,t,n,r){const{keys:i,rows:s,size:o}=e;let a=s,u=o,l=null;if(n){l=new Int32Array(o),t(p=>l[i[p]]=1);const h=l.reduce((p,m)=>p+m,0);if(h!==o){a=Array(h),u=0;for(let p=0;p<o;++p)l[p]&&(a[l[p]=u++]=s[p])}}let c=-1;const f=new Uint32Array(r);return t(u!==o?h=>f[++c]=l[i[h]]:h=>f[++c]=i[h]),{...e,keys:f,rows:a,size:u}}function yyt(e,t,n,r){const i=r==="map"||r===!0?W2e:r==="entries"?Y2e:r==="object"?G2e:xn('groups option must be "map", "entries", or "object".'),{names:s}=e.groups(),o=pyt(e.columnNames(),"_");let a=e.select().reify(t).create({data:{[o]:n}}).rollup({[o]:H2e(o)});for(let u=s.length;--u>=0;)a=a.groupby(s.slice(0,u)).rollup({[o]:i(s[u],o)});return a.get(o)}const vyt="ArrayPattern",byt="ArrowFunctionExpression",_yt="FunctionExpression",S0="Identifier",_S="Literal",K2e="MemberExpression",wyt="ObjectExpression",X2e="ObjectPattern",Q2e="Property",Dk="Column",Eyt="Constant",xyt="Dictionary",Syt="Function",Tyt="Parameter",J2e="Op",Zr=(e,t)=>{const n=Cyt[e.type];return n?n(e,t):xn(`Unsupported expression construct: ${e.type}`)},H8=(e,t)=>"("+Zr(e.left,t)+" "+e.operator+" "+Zr(e.right,t)+")",q8=(e,t)=>"("+Dd(e.params,t)+")=>"+Zr(e.body,t),jce=(e,t)=>Zr(e.callee,t)+"("+Dd(e.arguments,t)+")",Dd=(e,t,n=",")=>e.map(r=>Zr(r,t)).join(n),Z2e=e=>e.computed?`[${Ih(e.name)}]`:`.${e.name}`,Bce=(e,t,n)=>{const r=e.table||"";return`data${r}${Z2e(e)}.${n}(${t.index}${r})`},Cyt={Constant:e=>e.raw,Column:(e,t)=>Bce(e,t,"get"),Dictionary:(e,t)=>Bce(e,t,"key"),Function:e=>`fn.${e.name}`,Parameter:e=>`$${Z2e(e)}`,Op:(e,t)=>`op(${Ih(e.name)},${t.op||t.index})`,Literal:e=>e.raw,Identifier:e=>e.name,TemplateLiteral:(e,t)=>{const{quasis:n,expressions:r}=e,i=r.length;let s=n[0].value.raw;for(let o=0;o<i;)s+="${"+Zr(r[o],t)+"}"+n[++o].value.raw;return"`"+s+"`"},MemberExpression:(e,t)=>{const n=!e.computed,r=Zr(e.object,t),i=Zr(e.property,t);return r+(n?"."+i:"["+i+"]")},CallExpression:jce,NewExpression:(e,t)=>"new "+jce(e,t),ArrayExpression:(e,t)=>"["+Dd(e.elements,t)+"]",AssignmentExpression:H8,BinaryExpression:H8,LogicalExpression:H8,UnaryExpression:(e,t)=>"("+e.operator+Zr(e.argument,t)+")",ConditionalExpression:(e,t)=>"("+Zr(e.test,t)+"?"+Zr(e.consequent,t)+":"+Zr(e.alternate,t)+")",ObjectExpression:(e,t)=>"({"+Dd(e.properties,t)+"})",Property:(e,t)=>{const n=Zr(e.key,t);return(e.computed?`[${n}]`:n)+":"+Zr(e.value,t)},ArrowFunctionExpression:q8,FunctionExpression:q8,FunctionDeclaration:q8,ArrayPattern:(e,t)=>"["+Dd(e.elements,t)+"]",ObjectPattern:(e,t)=>"{"+Dd(e.properties,t)+"}",VariableDeclaration:(e,t)=>e.kind+" "+Dd(e.declarations,t,","),VariableDeclarator:(e,t)=>Zr(e.id,t)+"="+Zr(e.init,t),SpreadElement:(e,t)=>"..."+Zr(e.argument,t),BlockStatement:(e,t)=>"{"+Dd(e.body,t,";")+";}",BreakStatement:()=>"break",ExpressionStatement:(e,t)=>Zr(e.expression,t),IfStatement:(e,t)=>"if ("+Zr(e.test,t)+")"+Zr(e.consequent,t)+(e.alternate?" else "+Zr(e.alternate,t):""),SwitchStatement:(e,t)=>"switch ("+Zr(e.discriminant,t)+") {"+Dd(e.cases,t,"")+"}",SwitchCase:(e,t)=>(e.test?"case "+Zr(e.test,t):"default")+": "+Dd(e.consequent,t,";")+";",ReturnStatement:(e,t)=>"return "+Zr(e.argument,t),Program:(e,t)=>Zr(e.body[0],t)};function e$(e,t={index:"row"}){return Zr(e,t)}function Ayt(e,t,n=15,r=!0,i=0,s){const a=Math.LN10;if(s==null){const u=Math.ceil(Math.log(n)/a),l=t-e||Math.abs(e)||1,c=[5,2];for(s=Math.max(i,Math.pow(10,Math.round(Math.log(l)/a)-u));Math.ceil(l/s)>n;)s*=10;const f=c.length;for(let d=0;d<f;++d){const h=s/c[d];h>=i&&l/h<=n&&(s=h)}}if(r){let u=Math.log(s);const l=u>=0?0:~~(-u/a)+1,c=Math.pow(10,-l-1);u=Math.floor(e/s+c)*s,e=e<u?u-s:u,t=Math.ceil(t/s)*s}return[e,t===e?e+s:t,s]}function ZE(e){const t=typeof e;return t==="string"?`"${e}"`:t!=="object"||!e?e:Im(e)?+e:dr(e)||Nk(e)?`[${e.map(ZE)}]`:Z3(e)?e+"":Iyt(e)}function Iyt(e){let t="{",n=-1;for(const r in e)++n>0&&(t+=","),t+=`"${r}":${ZE(e[r])}`;return t+="}",t}function t$(e,t){const n=e.length;return n===1?(r,i)=>ZE(e[0](r,i)):(r,i)=>{let s="";for(let o=0;o<n;++o){o>0&&(s+="|");const a=e[o](r,i);if(t&&(a==null||a!==a))return null;s+=ZE(a)}return s}}function kyt(){const e=new Map;return{count(){return e.size},values(){return Array.from(e.values(),t=>t.v)},increment(t){const n=ZE(t),r=e.get(n);r?++r.n:e.set(n,{v:t,n:1})},decrement(t){const n=ZE(t),r=e.get(n);r.n===1?e.delete(n):--r.n},forEach(t){e.forEach(({v:n,n:r})=>t(n,r))}}}function Op(){}function Ryt(e,t=0,n=e.length){let r=e[t++];for(let i=t;i<n;++i)r*=e[i];return r}function As(e){return e.init=e.init||Op,e.add=e.add||Op,e.rem=e.rem||Op,e}function Uce(e,t){return e.product_v=!1,e.product=t}const eCe={count:{create:()=>As({value:e=>e.count}),param:[]},array_agg:{create:()=>As({init:e=>e.values=!0,value:e=>e.list.values(e.stream)}),param:[1]},object_agg:{create:()=>As({init:e=>e.values=!0,value:e=>Object.fromEntries(e.list.values())}),param:[2]},map_agg:{create:()=>As({init:e=>e.values=!0,value:e=>new Map(e.list.values())}),param:[2]},entries_agg:{create:()=>As({init:e=>e.values=!0,value:e=>e.list.values(e.stream)}),param:[2]},any:{create:()=>As({add:(e,t)=>{e.any==null&&(e.any=t)},value:e=>e.valid?e.any:ar}),param:[1]},valid:{create:()=>As({value:e=>e.valid}),param:[1]},invalid:{create:()=>As({value:e=>e.count-e.valid}),param:[1]},distinct:{create:()=>({init:e=>e.distinct=kyt(),value:e=>e.distinct.count()+(e.valid===e.count?0:1),add:(e,t)=>e.distinct.increment(t),rem:(e,t)=>e.distinct.decrement(t)}),param:[1]},array_agg_distinct:{create:()=>As({value:e=>e.distinct.values()}),param:[1],req:["distinct"]},mode:{create:()=>As({value:e=>{let t=ar,n=0;return e.distinct.forEach((r,i)=>{i>n&&(n=i,t=r)}),t}}),param:[1],req:["distinct"]},sum:{create:()=>({init:e=>e.sum=0,value:e=>e.valid?e.sum:ar,add:(e,t)=>JA(t)?e.sum===0?e.sum=t:e.sum+=t:e.sum+=+t,rem:(e,t)=>e.sum-=t}),param:[1]},product:{create:()=>({init:e=>Uce(e,1),value:e=>e.valid?e.product_v?Uce(e,Ryt(e.list.values())):e.product:void 0,add:(e,t)=>JA(t)&&e.product===1?e.product=t:e.product*=t,rem:(e,t)=>t==0||t===1/0||t===-1/0?e.product_v=!0:e.product/=t}),param:[1],stream:["array_agg"]},mean:{create:()=>({init:e=>e.mean=0,value:e=>e.valid?e.mean:ar,add:(e,t)=>{e.mean_d=t-e.mean,e.mean+=e.mean_d/e.valid},rem:(e,t)=>{e.mean_d=t-e.mean,e.mean-=e.valid?e.mean_d/e.valid:e.mean}}),param:[1]},average:{create:()=>As({value:e=>e.valid?e.mean:ar}),param:[1],req:["mean"]},variance:{create:()=>({init:e=>e.dev=0,value:e=>e.valid>1?e.dev/(e.valid-1):ar,add:(e,t)=>e.dev+=e.mean_d*(t-e.mean),rem:(e,t)=>e.dev-=e.mean_d*(t-e.mean)}),param:[1],req:["mean"]},variancep:{create:()=>As({value:e=>e.valid>1?e.dev/e.valid:ar}),param:[1],req:["variance"]},stdev:{create:()=>As({value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid-1)):ar}),param:[1],req:["variance"]},stdevp:{create:()=>As({value:e=>e.valid>1?Math.sqrt(e.dev/e.valid):ar}),param:[1],req:["variance"]},min:{create:()=>({init:e=>e.min=ar,value:e=>e.min=Number.isNaN(e.min)?e.list.min():e.min,add:(e,t)=>{(t<e.min||e.min===ar)&&(e.min=t)},rem:(e,t)=>{t<=e.min&&(e.min=NaN)}}),param:[1],stream:["array_agg"]},max:{create:()=>({init:e=>e.max=ar,value:e=>e.max=Number.isNaN(e.max)?e.list.max():e.max,add:(e,t)=>{(t>e.max||e.max===ar)&&(e.max=t)},rem:(e,t)=>{t>=e.max&&(e.max=NaN)}}),param:[1],stream:["array_agg"]},quantile:{create:e=>As({value:t=>t.list.quantile(e)}),param:[1,1],req:["array_agg"]},median:{create:()=>As({value:e=>e.list.quantile(.5)}),param:[1],req:["array_agg"]},covariance:{create:()=>({init:e=>{e.cov=e.mean_x=e.mean_y=e.dev_x=e.dev_y=0},value:e=>e.valid>1?e.cov/(e.valid-1):ar,add:(e,t,n)=>{const r=t-e.mean_x,i=n-e.mean_y;e.mean_x+=r/e.valid,e.mean_y+=i/e.valid;const s=n-e.mean_y;e.dev_x+=r*(t-e.mean_x),e.dev_y+=i*s,e.cov+=r*s},rem:(e,t,n)=>{const r=t-e.mean_x,i=n-e.mean_y;e.mean_x-=e.valid?r/e.valid:e.mean_x,e.mean_y-=e.valid?i/e.valid:e.mean_y;const s=n-e.mean_y;e.dev_x-=r*(t-e.mean_x),e.dev_y-=i*s,e.cov-=r*s}}),param:[2]},covariancep:{create:()=>As({value:e=>e.valid>1?e.cov/e.valid:ar}),param:[2],req:["covariance"]},corr:{create:()=>As({value:e=>e.valid>1?e.cov/(Math.sqrt(e.dev_x)*Math.sqrt(e.dev_y)):ar}),param:[2],req:["covariance"]},bins:{create:(e,t,n,r)=>As({value:i=>Ayt(i.min,i.max,e,t,n,r)}),param:[1,4],req:["min","max"]}},zce={create(){let e;return{init:()=>e=1,value:t=>{const n=t.index;return n&&!t.peer(n)?e=n+1:e}}},param:[]},Vce={create(){let e;return{init:()=>e=0,value:t=>{const{index:n,peer:r,size:i}=t;let s=n;if(e<s){for(;s+1<i&&r(s+1);)++s;e=s}return(1+e)/i}}},param:[]},tCe={row_number:{create(){return{init:Op,value:e=>e.index+1}},param:[]},rank:zce,avg_rank:{create(){let e,t;return{init:()=>(e=-1,t=1),value:n=>{const r=n.index;if(r>=e){for(t=e=r+1;n.peer(e);t+=++e);t/=e-r}return t}}},param:[]},dense_rank:{create(){let e;return{init:()=>e=1,value:t=>{const n=t.index;return n&&!t.peer(n)?++e:e}}},param:[]},percent_rank:{create(){const{init:e,value:t}=zce.create();return{init:e,value:n=>(t(n)-1)/(n.size-1)}},param:[]},cume_dist:Vce,ntile:{create(e){e=+e,e>0||xn("ntile num must be greater than zero.");const{init:t,value:n}=Vce.create();return{init:t,value:r=>Math.ceil(e*n(r))}},param:[0,1]},lag:{create(e,t=ar){return e=+e||1,{init:Op,value:(n,r)=>{const i=n.index-e;return i>=0?n.value(i,r):t}}},param:[1,2]},lead:{create(e,t=ar){return e=+e||1,{init:Op,value:(n,r)=>{const i=n.index+e;return i<n.size?n.value(i,r):t}}},param:[1,2]},first_value:{create(){return{init:Op,value:(e,t)=>e.value(e.i0,t)}},param:[1]},last_value:{create(){return{init:Op,value:(e,t)=>e.value(e.i1-1,t)}},param:[1]},nth_value:{create(e){return e=+e,e>0||xn("nth_value nth must be greater than zero."),{init:Op,value:(t,n)=>{const r=t.i0+(e-1);return r<t.i1?t.value(r,n):ar}}},param:[1,1]},fill_down:{create(e=ar){let t;return{init:()=>t=e,value:(n,r)=>{const i=n.value(n.index,r);return Df(i)?t=i:t}}},param:[1,1]},fill_up:{create(e=ar){let t,n;return{init:()=>(t=e,n=-1),value:(r,i)=>r.index<=n?t:(n=Nyt(r,i,r.index))>=0?t=r.value(n,i):(n=r.size,t=e)}},param:[1,1]}};function Nyt(e,t,n){for(const r=e.size;n<r;++n)if(Df(e.value(n,t)))return n;return-1}function iX(e){return Kf(eCe,e)}function sX(e){return Kf(tCe,e)}function nCe(e){return Kf(kw,e)||e==="row_object"}function rCe(e){return iX(e)&&eCe[e]}function iCe(e){return sX(e)&&tCe[e]}function MT(e,t,n){return e=`"use strict"; return ${e};`,Function("fn","$",e)(t,n)}const oX={escape:(e,t,n)=>MT(e,t,n),expr:(e,t)=>MT(`(row,data,op)=>${e}`,kw,t),expr2:(e,t)=>MT(`(row0,data0,row,data)=>${e}`,kw,t),join:(e,t)=>MT(`(row1,data1,row2,data2)=>${e}`,kw,t),param:(e,t)=>MT(e,kw,t)},Dyt={"==":1,"!=":1,"===":1,"!==":1};function sCe(e,t,n=0,r,i){if(e.type=Dk,e.name=t,e.table=n,i&&r&&gi(r.keyFor)){const s=Dyt[i.operator]?i.left===e?i.right:i.left:i.callee&&i.callee.name==="equal"?i.arguments[i.arguments[0]===e?1:0]:null;s&&s.type===_S&&Pyt(i,e,s,r.keyFor(s.value))}return e}function Pyt(e,t,n,r){return r<0?(e.type=_S,e.value=!1,e.raw="false"):(t.type=xyt,n.value=r,n.raw=r+""),!0}function W6(e){return dr(e)?e:rX(e)?e.entries():e?Object.entries(e):[]}const oCe="row_object";function aCe(e,t){e.type=wyt;const n=e.properties=[];for(const r of W6(t)){const[i,s]=dr(r)?r:[r,r];n.push({type:Q2e,key:{type:_S,raw:Ih(s)},value:sCe({computed:!0},i)})}return e}function uCe(e){return e$(aCe({},e))}function lCe(e){return oX.expr(uCe(e))}const Oyt=new TextDecoder("utf-8"),Cz=e=>Oyt.decode(e),$yt=new TextEncoder,aX=e=>$yt.encode(e),Myt=e=>typeof e=="boolean",Eu=e=>typeof e=="function",Uy=e=>e!=null&&Object(e)===e,G6=e=>Uy(e)&&Eu(e.then),uX=e=>Uy(e)&&Eu(e[Symbol.iterator]),Y6=e=>Uy(e)&&Eu(e[Symbol.asyncIterator]),Lyt=e=>Uy(e)&&"done"in e&&"value"in e,cCe=e=>"_getDOMStream"in e&&"_getNodeStream"in e,Fyt=e=>Uy(e)&&Eu(e.abort)&&Eu(e.getWriter)&&!cCe(e),jyt=e=>Uy(e)&&Eu(e.end)&&Eu(e.write)&&Myt(e.writable)&&!cCe(e),Byt=e=>Uy(e)&&Eu(e.clear)&&Eu(e.bytes)&&Eu(e.position)&&Eu(e.setPosition)&&Eu(e.capacity)&&Eu(e.getBufferIdentifier)&&Eu(e.createLong),lX=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:ArrayBuffer;function Uyt(e){const t=e[0]?[e[0]]:[];let n,r,i,s;for(let o,a,u=0,l=0,c=e.length;++u<c;){if(o=t[l],a=e[u],!o||!a||o.buffer!==a.buffer||a.byteOffset<o.byteOffset){a&&(t[++l]=a);continue}if({byteOffset:n,byteLength:i}=o,{byteOffset:r,byteLength:s}=a,n+i<r||r+s<n){a&&(t[++l]=a);continue}t[l]=new Uint8Array(o.buffer,n,r-n+s)}return t}function n$(e,t,n=0,r=t.byteLength){const i=e.byteLength,s=new Uint8Array(e.buffer,e.byteOffset,i),o=new Uint8Array(t.buffer,t.byteOffset,Math.min(r,i));return s.set(o,n),e}function kh(e,t){const n=Uyt(e),r=n.reduce((c,f)=>c+f.byteLength,0);let i,s,o,a=0,u=-1;const l=Math.min(t||Number.POSITIVE_INFINITY,r);for(const c=n.length;++u<c;){if(i=n[u],s=i.subarray(0,Math.min(i.length,l-a)),l<=a+s.length){s.length<i.length?n[u]=i.subarray(s.length):s.length===i.length&&u++,o?n$(o,s,a):o=s;break}n$(o||(o=new Uint8Array(l)),s,a),a+=s.length}return[o||new Uint8Array(0),n.slice(u),r-(o?o.byteLength:0)]}function Ys(e,t){let n=Lyt(t)?t.value:t;return n instanceof e?e===Uint8Array?new e(n.buffer,n.byteOffset,n.byteLength):n:n?(typeof n=="string"&&(n=aX(n)),n instanceof ArrayBuffer?new e(n):n instanceof lX?new e(n):Byt(n)?Ys(e,n.bytes()):ArrayBuffer.isView(n)?n.byteLength<=0?new e(0):new e(n.buffer,n.byteOffset,n.byteLength/e.BYTES_PER_ELEMENT):e.from(n)):new e(0)}const LT=e=>Ys(Int32Array,e),Dr=e=>Ys(Uint8Array,e),Az=e=>(e.next(),e);function*zyt(e,t){const n=function*(i){yield i},r=typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof lX?n(t):uX(t)?t:n(t);return yield*Az(function*(i){let s=null;do s=i.next(yield Ys(e,s));while(!s.done)}(r[Symbol.iterator]())),new e}const Vyt=e=>zyt(Uint8Array,e);function fCe(e,t){return n1(this,arguments,function*(){if(G6(t))return yield Yn(yield Yn(yield*xj(mC(fCe(e,yield Yn(t))))));const r=function(o){return n1(this,arguments,function*(){yield yield Yn(yield Yn(o))})},i=function(o){return n1(this,arguments,function*(){yield Yn(yield*xj(mC(Az(function*(a){let u=null;do u=a.next(yield u==null?void 0:u.value);while(!u.done)}(o[Symbol.iterator]())))))})},s=typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof lX?r(t):uX(t)?i(t):Y6(t)?t:r(t);return yield Yn(yield*xj(mC(Az(function(o){return n1(this,arguments,function*(){let a=null;do a=yield Yn(o.next(yield yield Yn(Ys(e,a))));while(!a.done)})}(s[Symbol.asyncIterator]()))))),yield Yn(new e)})}const Hyt=e=>fCe(Uint8Array,e);function dCe(e,t,n){if(e!==0){n=n.slice(0,t);for(let r=-1,i=n.length;++r<i;)n[r]+=e}return n.subarray(0,t)}function qyt(e,t){let n=0;const r=e.length;if(r!==t.length)return!1;if(r>0)do if(e[n]!==t[n])return!1;while(++n<r);return!0}const Hce={fromIterable(e){return ZN(Wyt(e))},fromAsyncIterable(e){return ZN(Gyt(e))},fromDOMStream(e){return ZN(Yyt(e))},fromNodeStream(e){return ZN(Xyt(e))},toDOMStream(e,t){throw new Error('"toDOMStream" not available in this environment')},toNodeStream(e,t){throw new Error('"toNodeStream" not available in this environment')}},ZN=e=>(e.next(),e);function*Wyt(e){let t,n=!1,r=[],i,s,o,a=0;function u(){return s==="peek"?kh(r,o)[0]:([i,r,a]=kh(r,o),i)}({cmd:s,size:o}=yield null);const l=Vyt(e)[Symbol.iterator]();try{do if({done:t,value:i}=Number.isNaN(o-a)?l.next():l.next(o-a),!t&&i.byteLength>0&&(r.push(i),a+=i.byteLength),t||o<=a)do({cmd:s,size:o}=yield u());while(o<a);while(!t)}catch(c){(n=!0)&&typeof l.throw=="function"&&l.throw(c)}finally{n===!1&&typeof l.return=="function"&&l.return(null)}return null}function Gyt(e){return n1(this,arguments,function*(){let n,r=!1,i=[],s,o,a,u=0;function l(){return o==="peek"?kh(i,a)[0]:([s,i,u]=kh(i,a),s)}({cmd:o,size:a}=yield yield Yn(null));const c=Hyt(e)[Symbol.asyncIterator]();try{do if({done:n,value:s}=Number.isNaN(a-u)?yield Yn(c.next()):yield Yn(c.next(a-u)),!n&&s.byteLength>0&&(i.push(s),u+=s.byteLength),n||a<=u)do({cmd:o,size:a}=yield yield Yn(l()));while(a<u);while(!n)}catch(f){(r=!0)&&typeof c.throw=="function"&&(yield Yn(c.throw(f)))}finally{r===!1&&typeof c.return=="function"&&(yield Yn(c.return(new Uint8Array(0))))}return yield Yn(null)})}function Yyt(e){return n1(this,arguments,function*(){let n=!1,r=!1,i=[],s,o,a,u=0;function l(){return o==="peek"?kh(i,a)[0]:([s,i,u]=kh(i,a),s)}({cmd:o,size:a}=yield yield Yn(null));const c=new Kyt(e);try{do if({done:n,value:s}=Number.isNaN(a-u)?yield Yn(c.read()):yield Yn(c.read(a-u)),!n&&s.byteLength>0&&(i.push(Dr(s)),u+=s.byteLength),n||a<=u)do({cmd:o,size:a}=yield yield Yn(l()));while(a<u);while(!n)}catch(f){(r=!0)&&(yield Yn(c.cancel(f)))}finally{r===!1?yield Yn(c.cancel()):e.locked&&c.releaseLock()}return yield Yn(null)})}class Kyt{constructor(t){this.source=t,this.reader=null,this.reader=this.source.getReader(),this.reader.closed.catch(()=>{})}get closed(){return this.reader?this.reader.closed.catch(()=>{}):Promise.resolve()}releaseLock(){this.reader&&this.reader.releaseLock(),this.reader=null}cancel(t){return Lp(this,void 0,void 0,function*(){const{reader:n,source:r}=this;n&&(yield n.cancel(t).catch(()=>{})),r&&r.locked&&this.releaseLock()})}read(t){return Lp(this,void 0,void 0,function*(){if(t===0)return{done:this.reader==null,value:new Uint8Array(0)};const n=yield this.reader.read();return!n.done&&(n.value=Dr(n)),n})}}const W8=(e,t)=>{const n=i=>r([t,i]);let r;return[t,n,new Promise(i=>(r=i)&&e.once(t,n))]};function Xyt(e){return n1(this,arguments,function*(){const n=[];let r="error",i=!1,s=null,o,a,u=0,l=[],c;function f(){return o==="peek"?kh(l,a)[0]:([c,l,u]=kh(l,a),c)}if({cmd:o,size:a}=yield yield Yn(null),e.isTTY)return yield yield Yn(new Uint8Array(0)),yield Yn(null);try{n[0]=W8(e,"end"),n[1]=W8(e,"error");do{if(n[2]=W8(e,"readable"),[r,s]=yield Yn(Promise.race(n.map(h=>h[2]))),r==="error")break;if((i=r==="end")||(Number.isFinite(a-u)?(c=Dr(e.read(a-u)),c.byteLength<a-u&&(c=Dr(e.read()))):c=Dr(e.read()),c.byteLength>0&&(l.push(c),u+=c.byteLength)),i||a<=u)do({cmd:o,size:a}=yield yield Yn(f()));while(a<u)}while(!i)}finally{yield Yn(d(n,r==="error"?s:null))}return yield Yn(null);function d(h,p){return c=l=null,new Promise((m,g)=>{for(const[y,v]of h)e.off(y,v);try{const y=e.destroy;y&&y.call(e,p),p=void 0}catch(y){p=y||p}finally{p!=null?g(p):m()}})}})}var Va;(function(e){e[e.V1=0]="V1",e[e.V2=1]="V2",e[e.V3=2]="V3",e[e.V4=3]="V4",e[e.V5=4]="V5"})(Va||(Va={}));var Zu;(function(e){e[e.Sparse=0]="Sparse",e[e.Dense=1]="Dense"})(Zu||(Zu={}));var Po;(function(e){e[e.HALF=0]="HALF",e[e.SINGLE=1]="SINGLE",e[e.DOUBLE=2]="DOUBLE"})(Po||(Po={}));var Rh;(function(e){e[e.DAY=0]="DAY",e[e.MILLISECOND=1]="MILLISECOND"})(Rh||(Rh={}));var Wt;(function(e){e[e.SECOND=0]="SECOND",e[e.MILLISECOND=1]="MILLISECOND",e[e.MICROSECOND=2]="MICROSECOND",e[e.NANOSECOND=3]="NANOSECOND"})(Wt||(Wt={}));var Nh;(function(e){e[e.YEAR_MONTH=0]="YEAR_MONTH",e[e.DAY_TIME=1]="DAY_TIME",e[e.MONTH_DAY_NANO=2]="MONTH_DAY_NANO"})(Nh||(Nh={}));var Qs;(function(e){e[e.NONE=0]="NONE",e[e.Schema=1]="Schema",e[e.DictionaryBatch=2]="DictionaryBatch",e[e.RecordBatch=3]="RecordBatch",e[e.Tensor=4]="Tensor",e[e.SparseTensor=5]="SparseTensor"})(Qs||(Qs={}));var re;(function(e){e[e.NONE=0]="NONE",e[e.Null=1]="Null",e[e.Int=2]="Int",e[e.Float=3]="Float",e[e.Binary=4]="Binary",e[e.Utf8=5]="Utf8",e[e.Bool=6]="Bool",e[e.Decimal=7]="Decimal",e[e.Date=8]="Date",e[e.Time=9]="Time",e[e.Timestamp=10]="Timestamp",e[e.Interval=11]="Interval",e[e.List=12]="List",e[e.Struct=13]="Struct",e[e.Union=14]="Union",e[e.FixedSizeBinary=15]="FixedSizeBinary",e[e.FixedSizeList=16]="FixedSizeList",e[e.Map=17]="Map",e[e.Duration=18]="Duration",e[e.Dictionary=-1]="Dictionary",e[e.Int8=-2]="Int8",e[e.Int16=-3]="Int16",e[e.Int32=-4]="Int32",e[e.Int64=-5]="Int64",e[e.Uint8=-6]="Uint8",e[e.Uint16=-7]="Uint16",e[e.Uint32=-8]="Uint32",e[e.Uint64=-9]="Uint64",e[e.Float16=-10]="Float16",e[e.Float32=-11]="Float32",e[e.Float64=-12]="Float64",e[e.DateDay=-13]="DateDay",e[e.DateMillisecond=-14]="DateMillisecond",e[e.TimestampSecond=-15]="TimestampSecond",e[e.TimestampMillisecond=-16]="TimestampMillisecond",e[e.TimestampMicrosecond=-17]="TimestampMicrosecond",e[e.TimestampNanosecond=-18]="TimestampNanosecond",e[e.TimeSecond=-19]="TimeSecond",e[e.TimeMillisecond=-20]="TimeMillisecond",e[e.TimeMicrosecond=-21]="TimeMicrosecond",e[e.TimeNanosecond=-22]="TimeNanosecond",e[e.DenseUnion=-23]="DenseUnion",e[e.SparseUnion=-24]="SparseUnion",e[e.IntervalDayTime=-25]="IntervalDayTime",e[e.IntervalYearMonth=-26]="IntervalYearMonth",e[e.DurationSecond=-27]="DurationSecond",e[e.DurationMillisecond=-28]="DurationMillisecond",e[e.DurationMicrosecond=-29]="DurationMicrosecond",e[e.DurationNanosecond=-30]="DurationNanosecond"})(re||(re={}));var Ip;(function(e){e[e.OFFSET=0]="OFFSET",e[e.DATA=1]="DATA",e[e.VALIDITY=2]="VALIDITY",e[e.TYPE=3]="TYPE"})(Ip||(Ip={}));const Qyt=void 0;function Q1(e){if(e===null)return"null";if(e===Qyt)return"undefined";switch(typeof e){case"number":return`${e}`;case"bigint":return`${e}`;case"string":return`"${e}"`}return typeof e[Symbol.toPrimitive]=="function"?e[Symbol.toPrimitive]("string"):ArrayBuffer.isView(e)?e instanceof BigInt64Array||e instanceof BigUint64Array?`[${[...e].map(t=>Q1(t))}]`:`[${e}]`:ArrayBuffer.isView(e)?`[${e}]`:JSON.stringify(e,(t,n)=>typeof n=="bigint"?`${n}`:n)}const Jyt=Symbol.for("isArrowBigNum");function cd(e,...t){return t.length===0?Object.setPrototypeOf(Ys(this.TypedArray,e),this.constructor.prototype):Object.setPrototypeOf(new this.TypedArray(e,...t),this.constructor.prototype)}cd.prototype[Jyt]=!0;cd.prototype.toJSON=function(){return`"${eI(this)}"`};cd.prototype.valueOf=function(){return hCe(this)};cd.prototype.toString=function(){return eI(this)};cd.prototype[Symbol.toPrimitive]=function(e="default"){switch(e){case"number":return hCe(this);case"string":return eI(this);case"default":return Zyt(this)}return eI(this)};function tE(...e){return cd.apply(this,e)}function nE(...e){return cd.apply(this,e)}function ZA(...e){return cd.apply(this,e)}Object.setPrototypeOf(tE.prototype,Object.create(Int32Array.prototype));Object.setPrototypeOf(nE.prototype,Object.create(Uint32Array.prototype));Object.setPrototypeOf(ZA.prototype,Object.create(Uint32Array.prototype));Object.assign(tE.prototype,cd.prototype,{constructor:tE,signed:!0,TypedArray:Int32Array,BigIntArray:BigInt64Array});Object.assign(nE.prototype,cd.prototype,{constructor:nE,signed:!1,TypedArray:Uint32Array,BigIntArray:BigUint64Array});Object.assign(ZA.prototype,cd.prototype,{constructor:ZA,signed:!0,TypedArray:Uint32Array,BigIntArray:BigUint64Array});function hCe(e){const{buffer:t,byteOffset:n,length:r,signed:i}=e,s=new BigUint64Array(t,n,r),o=i&&s.at(-1)&BigInt(1)<<BigInt(63);let a=BigInt(o?1:0),u=BigInt(0);if(o){for(const l of s)a+=~l*(BigInt(1)<<BigInt(32)*u++);a*=BigInt(-1)}else for(const l of s)a+=l*(BigInt(1)<<BigInt(32)*u++);return a}const eI=e=>{if(e.byteLength===8)return`${new e.BigIntArray(e.buffer,e.byteOffset,1)[0]}`;if(!e.signed)return G8(e);let t=new Uint16Array(e.buffer,e.byteOffset,e.byteLength/2);if(new Int16Array([t.at(-1)])[0]>=0)return G8(e);t=t.slice();let r=1;for(let s=0;s<t.length;s++){const o=t[s],a=~o+r;t[s]=a,r&=o===0?1:0}return`-${G8(t)}`},Zyt=e=>e.byteLength===8?new e.BigIntArray(e.buffer,e.byteOffset,1)[0]:eI(e);function G8(e){let t="";const n=new Uint32Array(2);let r=new Uint16Array(e.buffer,e.byteOffset,e.byteLength/2);const i=new Uint32Array((r=new Uint16Array(r).reverse()).buffer);let s=-1;const o=r.length-1;do{for(n[0]=r[s=0];s<o;)r[s++]=n[1]=n[0]/10,n[0]=(n[0]-n[1]*10<<16)+r[s];r[s]=n[1]=n[0]/10,n[0]=n[0]-n[1]*10,t=`${n[0]}${t}`}while(i[0]||i[1]||i[2]||i[3]);return t??"0"}class cX{static new(t,n){switch(n){case!0:return new tE(t);case!1:return new nE(t)}switch(t.constructor){case Int8Array:case Int16Array:case Int32Array:case BigInt64Array:return new tE(t)}return t.byteLength===16?new ZA(t):new nE(t)}static signed(t){return new tE(t)}static unsigned(t){return new nE(t)}static decimal(t){return new ZA(t)}constructor(t,n){return cX.new(t,n)}}function Xf(e){if(typeof e=="bigint"&&(e<Number.MIN_SAFE_INTEGER||e>Number.MAX_SAFE_INTEGER))throw new TypeError(`${e} is not safe to convert to a number.`);return Number(e)}var pCe,mCe,gCe,yCe,vCe,bCe,_Ce,wCe,ECe,xCe,SCe,TCe,CCe,ACe,ICe,kCe,RCe,NCe,DCe,PCe;let Sn=class Iz{static isNull(t){return(t==null?void 0:t.typeId)===re.Null}static isInt(t){return(t==null?void 0:t.typeId)===re.Int}static isFloat(t){return(t==null?void 0:t.typeId)===re.Float}static isBinary(t){return(t==null?void 0:t.typeId)===re.Binary}static isUtf8(t){return(t==null?void 0:t.typeId)===re.Utf8}static isBool(t){return(t==null?void 0:t.typeId)===re.Bool}static isDecimal(t){return(t==null?void 0:t.typeId)===re.Decimal}static isDate(t){return(t==null?void 0:t.typeId)===re.Date}static isTime(t){return(t==null?void 0:t.typeId)===re.Time}static isTimestamp(t){return(t==null?void 0:t.typeId)===re.Timestamp}static isInterval(t){return(t==null?void 0:t.typeId)===re.Interval}static isDuration(t){return(t==null?void 0:t.typeId)===re.Duration}static isList(t){return(t==null?void 0:t.typeId)===re.List}static isStruct(t){return(t==null?void 0:t.typeId)===re.Struct}static isUnion(t){return(t==null?void 0:t.typeId)===re.Union}static isFixedSizeBinary(t){return(t==null?void 0:t.typeId)===re.FixedSizeBinary}static isFixedSizeList(t){return(t==null?void 0:t.typeId)===re.FixedSizeList}static isMap(t){return(t==null?void 0:t.typeId)===re.Map}static isDictionary(t){return(t==null?void 0:t.typeId)===re.Dictionary}static isDenseUnion(t){return Iz.isUnion(t)&&t.mode===Zu.Dense}static isSparseUnion(t){return Iz.isUnion(t)&&t.mode===Zu.Sparse}get typeId(){return re.NONE}};pCe=Symbol.toStringTag;Sn[pCe]=(e=>(e.children=null,e.ArrayType=Array,e[Symbol.toStringTag]="DataType"))(Sn.prototype);let km=class extends Sn{toString(){return"Null"}get typeId(){return re.Null}};mCe=Symbol.toStringTag;km[mCe]=(e=>e[Symbol.toStringTag]="Null")(km.prototype);class nu extends Sn{constructor(t,n){super(),this.isSigned=t,this.bitWidth=n}get typeId(){return re.Int}get ArrayType(){switch(this.bitWidth){case 8:return this.isSigned?Int8Array:Uint8Array;case 16:return this.isSigned?Int16Array:Uint16Array;case 32:return this.isSigned?Int32Array:Uint32Array;case 64:return this.isSigned?BigInt64Array:BigUint64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`${this.isSigned?"I":"Ui"}nt${this.bitWidth}`}}gCe=Symbol.toStringTag;nu[gCe]=(e=>(e.isSigned=null,e.bitWidth=null,e[Symbol.toStringTag]="Int"))(nu.prototype);class fX extends nu{constructor(){super(!0,8)}get ArrayType(){return Int8Array}}class dX extends nu{constructor(){super(!0,16)}get ArrayType(){return Int16Array}}class Y0 extends nu{constructor(){super(!0,32)}get ArrayType(){return Int32Array}}class hX extends nu{constructor(){super(!0,64)}get ArrayType(){return BigInt64Array}}class pX extends nu{constructor(){super(!1,8)}get ArrayType(){return Uint8Array}}class mX extends nu{constructor(){super(!1,16)}get ArrayType(){return Uint16Array}}class gX extends nu{constructor(){super(!1,32)}get ArrayType(){return Uint32Array}}class yX extends nu{constructor(){super(!1,64)}get ArrayType(){return BigUint64Array}}Object.defineProperty(fX.prototype,"ArrayType",{value:Int8Array});Object.defineProperty(dX.prototype,"ArrayType",{value:Int16Array});Object.defineProperty(Y0.prototype,"ArrayType",{value:Int32Array});Object.defineProperty(hX.prototype,"ArrayType",{value:BigInt64Array});Object.defineProperty(pX.prototype,"ArrayType",{value:Uint8Array});Object.defineProperty(mX.prototype,"ArrayType",{value:Uint16Array});Object.defineProperty(gX.prototype,"ArrayType",{value:Uint32Array});Object.defineProperty(yX.prototype,"ArrayType",{value:BigUint64Array});class K0 extends Sn{constructor(t){super(),this.precision=t}get typeId(){return re.Float}get ArrayType(){switch(this.precision){case Po.HALF:return Uint16Array;case Po.SINGLE:return Float32Array;case Po.DOUBLE:return Float64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`Float${this.precision<<5||16}`}}yCe=Symbol.toStringTag;K0[yCe]=(e=>(e.precision=null,e[Symbol.toStringTag]="Float"))(K0.prototype);class OCe extends K0{constructor(){super(Po.HALF)}}class vX extends K0{constructor(){super(Po.SINGLE)}}class bX extends K0{constructor(){super(Po.DOUBLE)}}Object.defineProperty(OCe.prototype,"ArrayType",{value:Uint16Array});Object.defineProperty(vX.prototype,"ArrayType",{value:Float32Array});Object.defineProperty(bX.prototype,"ArrayType",{value:Float64Array});let tI=class extends Sn{constructor(){super()}get typeId(){return re.Binary}toString(){return"Binary"}};vCe=Symbol.toStringTag;tI[vCe]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Binary"))(tI.prototype);let ex=class extends Sn{constructor(){super()}get typeId(){return re.Utf8}toString(){return"Utf8"}};bCe=Symbol.toStringTag;ex[bCe]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Utf8"))(ex.prototype);let nI=class extends Sn{constructor(){super()}get typeId(){return re.Bool}toString(){return"Bool"}};_Ce=Symbol.toStringTag;nI[_Ce]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Bool"))(nI.prototype);let r$=class extends Sn{constructor(t,n,r=128){super(),this.scale=t,this.precision=n,this.bitWidth=r}get typeId(){return re.Decimal}toString(){return`Decimal[${this.precision}e${this.scale>0?"+":""}${this.scale}]`}};wCe=Symbol.toStringTag;r$[wCe]=(e=>(e.scale=null,e.precision=null,e.ArrayType=Uint32Array,e[Symbol.toStringTag]="Decimal"))(r$.prototype);class tx extends Sn{constructor(t){super(),this.unit=t}get typeId(){return re.Date}toString(){return`Date${(this.unit+1)*32}<${Rh[this.unit]}>`}}ECe=Symbol.toStringTag;tx[ECe]=(e=>(e.unit=null,e.ArrayType=Int32Array,e[Symbol.toStringTag]="Date"))(tx.prototype);class evt extends tx{constructor(){super(Rh.DAY)}}class tvt extends tx{constructor(){super(Rh.MILLISECOND)}}class Rm extends Sn{constructor(t,n){super(),this.unit=t,this.bitWidth=n}get typeId(){return re.Time}toString(){return`Time${this.bitWidth}<${Wt[this.unit]}>`}get ArrayType(){switch(this.bitWidth){case 32:return Int32Array;case 64:return BigInt64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}}xCe=Symbol.toStringTag;Rm[xCe]=(e=>(e.unit=null,e.bitWidth=null,e[Symbol.toStringTag]="Time"))(Rm.prototype);class nvt extends Rm{constructor(){super(Wt.SECOND,32)}}class rvt extends Rm{constructor(){super(Wt.MILLISECOND,32)}}class ivt extends Rm{constructor(){super(Wt.MICROSECOND,64)}}class svt extends Rm{constructor(){super(Wt.NANOSECOND,64)}}class i$ extends Sn{constructor(t,n){super(),this.unit=t,this.timezone=n}get typeId(){return re.Timestamp}toString(){return`Timestamp<${Wt[this.unit]}${this.timezone?`, ${this.timezone}`:""}>`}}SCe=Symbol.toStringTag;i$[SCe]=(e=>(e.unit=null,e.timezone=null,e.ArrayType=Int32Array,e[Symbol.toStringTag]="Timestamp"))(i$.prototype);class nx extends Sn{constructor(t){super(),this.unit=t}get typeId(){return re.Interval}toString(){return`Interval<${Nh[this.unit]}>`}}TCe=Symbol.toStringTag;nx[TCe]=(e=>(e.unit=null,e.ArrayType=Int32Array,e[Symbol.toStringTag]="Interval"))(nx.prototype);class ovt extends nx{constructor(){super(Nh.DAY_TIME)}}class avt extends nx{constructor(){super(Nh.YEAR_MONTH)}}let s$=class extends Sn{constructor(t){super(),this.unit=t}get typeId(){return re.Duration}toString(){return`Duration<${Wt[this.unit]}>`}};CCe=Symbol.toStringTag;s$[CCe]=(e=>(e.unit=null,e.ArrayType=BigInt64Array,e[Symbol.toStringTag]="Duration"))(s$.prototype);let rx=class extends Sn{constructor(t){super(),this.children=[t]}get typeId(){return re.List}toString(){return`List<${this.valueType}>`}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}};ACe=Symbol.toStringTag;rx[ACe]=(e=>(e.children=null,e[Symbol.toStringTag]="List"))(rx.prototype);class fa extends Sn{constructor(t){super(),this.children=t}get typeId(){return re.Struct}toString(){return`Struct<{${this.children.map(t=>`${t.name}:${t.type}`).join(", ")}}>`}}ICe=Symbol.toStringTag;fa[ICe]=(e=>(e.children=null,e[Symbol.toStringTag]="Struct"))(fa.prototype);class rI extends Sn{constructor(t,n,r){super(),this.mode=t,this.children=r,this.typeIds=n=Int32Array.from(n),this.typeIdToChildIndex=n.reduce((i,s,o)=>(i[s]=o)&&i||i,Object.create(null))}get typeId(){return re.Union}toString(){return`${this[Symbol.toStringTag]}<${this.children.map(t=>`${t.type}`).join(" | ")}>`}}kCe=Symbol.toStringTag;rI[kCe]=(e=>(e.mode=null,e.typeIds=null,e.children=null,e.typeIdToChildIndex=null,e.ArrayType=Int8Array,e[Symbol.toStringTag]="Union"))(rI.prototype);let o$=class extends Sn{constructor(t){super(),this.byteWidth=t}get typeId(){return re.FixedSizeBinary}toString(){return`FixedSizeBinary[${this.byteWidth}]`}};RCe=Symbol.toStringTag;o$[RCe]=(e=>(e.byteWidth=null,e.ArrayType=Uint8Array,e[Symbol.toStringTag]="FixedSizeBinary"))(o$.prototype);let ix=class extends Sn{constructor(t,n){super(),this.listSize=t,this.children=[n]}get typeId(){return re.FixedSizeList}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}toString(){return`FixedSizeList[${this.listSize}]<${this.valueType}>`}};NCe=Symbol.toStringTag;ix[NCe]=(e=>(e.children=null,e.listSize=null,e[Symbol.toStringTag]="FixedSizeList"))(ix.prototype);class iI extends Sn{constructor(t,n=!1){var r,i,s;if(super(),this.children=[t],this.keysSorted=n,t&&(t.name="entries",!((r=t==null?void 0:t.type)===null||r===void 0)&&r.children)){const o=(i=t==null?void 0:t.type)===null||i===void 0?void 0:i.children[0];o&&(o.name="key");const a=(s=t==null?void 0:t.type)===null||s===void 0?void 0:s.children[1];a&&(a.name="value")}}get typeId(){return re.Map}get keyType(){return this.children[0].type.children[0].type}get valueType(){return this.children[0].type.children[1].type}get childType(){return this.children[0].type}toString(){return`Map<{${this.children[0].type.children.map(t=>`${t.name}:${t.type}`).join(", ")}}>`}}DCe=Symbol.toStringTag;iI[DCe]=(e=>(e.children=null,e.keysSorted=null,e[Symbol.toStringTag]="Map_"))(iI.prototype);const uvt=(e=>()=>++e)(-1);class X0 extends Sn{constructor(t,n,r,i){super(),this.indices=n,this.dictionary=t,this.isOrdered=i||!1,this.id=r==null?uvt():Xf(r)}get typeId(){return re.Dictionary}get children(){return this.dictionary.children}get valueType(){return this.dictionary}get ArrayType(){return this.dictionary.ArrayType}toString(){return`Dictionary<${this.indices}, ${this.dictionary}>`}}PCe=Symbol.toStringTag;X0[PCe]=(e=>(e.id=null,e.indices=null,e.isOrdered=null,e.dictionary=null,e[Symbol.toStringTag]="Dictionary"))(X0.prototype);function $d(e){const t=e;switch(e.typeId){case re.Decimal:return e.bitWidth/32;case re.Timestamp:return 2;case re.Date:return 1+t.unit;case re.Interval:return 1+t.unit;case re.FixedSizeList:return t.listSize;case re.FixedSizeBinary:return t.byteWidth;default:return 1}}class Cn{visitMany(t,...n){return t.map((r,i)=>this.visit(r,...n.map(s=>s[i])))}visit(...t){return this.getVisitFn(t[0],!1).apply(this,t)}getVisitFn(t,n=!0){return lvt(this,t,n)}getVisitFnByTypeId(t,n=!0){return rw(this,t,n)}visitNull(t,...n){return null}visitBool(t,...n){return null}visitInt(t,...n){return null}visitFloat(t,...n){return null}visitUtf8(t,...n){return null}visitBinary(t,...n){return null}visitFixedSizeBinary(t,...n){return null}visitDate(t,...n){return null}visitTimestamp(t,...n){return null}visitTime(t,...n){return null}visitDecimal(t,...n){return null}visitList(t,...n){return null}visitStruct(t,...n){return null}visitUnion(t,...n){return null}visitDictionary(t,...n){return null}visitInterval(t,...n){return null}visitDuration(t,...n){return null}visitFixedSizeList(t,...n){return null}visitMap(t,...n){return null}}function lvt(e,t,n=!0){return typeof t=="number"?rw(e,t,n):typeof t=="string"&&t in re?rw(e,re[t],n):t&&t instanceof Sn?rw(e,qce(t),n):t!=null&&t.type&&t.type instanceof Sn?rw(e,qce(t.type),n):rw(e,re.NONE,n)}function rw(e,t,n=!0){let r=null;switch(t){case re.Null:r=e.visitNull;break;case re.Bool:r=e.visitBool;break;case re.Int:r=e.visitInt;break;case re.Int8:r=e.visitInt8||e.visitInt;break;case re.Int16:r=e.visitInt16||e.visitInt;break;case re.Int32:r=e.visitInt32||e.visitInt;break;case re.Int64:r=e.visitInt64||e.visitInt;break;case re.Uint8:r=e.visitUint8||e.visitInt;break;case re.Uint16:r=e.visitUint16||e.visitInt;break;case re.Uint32:r=e.visitUint32||e.visitInt;break;case re.Uint64:r=e.visitUint64||e.visitInt;break;case re.Float:r=e.visitFloat;break;case re.Float16:r=e.visitFloat16||e.visitFloat;break;case re.Float32:r=e.visitFloat32||e.visitFloat;break;case re.Float64:r=e.visitFloat64||e.visitFloat;break;case re.Utf8:r=e.visitUtf8;break;case re.Binary:r=e.visitBinary;break;case re.FixedSizeBinary:r=e.visitFixedSizeBinary;break;case re.Date:r=e.visitDate;break;case re.DateDay:r=e.visitDateDay||e.visitDate;break;case re.DateMillisecond:r=e.visitDateMillisecond||e.visitDate;break;case re.Timestamp:r=e.visitTimestamp;break;case re.TimestampSecond:r=e.visitTimestampSecond||e.visitTimestamp;break;case re.TimestampMillisecond:r=e.visitTimestampMillisecond||e.visitTimestamp;break;case re.TimestampMicrosecond:r=e.visitTimestampMicrosecond||e.visitTimestamp;break;case re.TimestampNanosecond:r=e.visitTimestampNanosecond||e.visitTimestamp;break;case re.Time:r=e.visitTime;break;case re.TimeSecond:r=e.visitTimeSecond||e.visitTime;break;case re.TimeMillisecond:r=e.visitTimeMillisecond||e.visitTime;break;case re.TimeMicrosecond:r=e.visitTimeMicrosecond||e.visitTime;break;case re.TimeNanosecond:r=e.visitTimeNanosecond||e.visitTime;break;case re.Decimal:r=e.visitDecimal;break;case re.List:r=e.visitList;break;case re.Struct:r=e.visitStruct;break;case re.Union:r=e.visitUnion;break;case re.DenseUnion:r=e.visitDenseUnion||e.visitUnion;break;case re.SparseUnion:r=e.visitSparseUnion||e.visitUnion;break;case re.Dictionary:r=e.visitDictionary;break;case re.Interval:r=e.visitInterval;break;case re.IntervalDayTime:r=e.visitIntervalDayTime||e.visitInterval;break;case re.IntervalYearMonth:r=e.visitIntervalYearMonth||e.visitInterval;break;case re.Duration:r=e.visitDuration;break;case re.DurationSecond:r=e.visitDurationSecond||e.visitDuration;break;case re.DurationMillisecond:r=e.visitDurationMillisecond||e.visitDuration;break;case re.DurationMicrosecond:r=e.visitDurationMicrosecond||e.visitDuration;break;case re.DurationNanosecond:r=e.visitDurationNanosecond||e.visitDuration;break;case re.FixedSizeList:r=e.visitFixedSizeList;break;case re.Map:r=e.visitMap;break}if(typeof r=="function")return r;if(!n)return()=>null;throw new Error(`Unrecognized type '${re[t]}'`)}function qce(e){switch(e.typeId){case re.Null:return re.Null;case re.Int:{const{bitWidth:t,isSigned:n}=e;switch(t){case 8:return n?re.Int8:re.Uint8;case 16:return n?re.Int16:re.Uint16;case 32:return n?re.Int32:re.Uint32;case 64:return n?re.Int64:re.Uint64}return re.Int}case re.Float:switch(e.precision){case Po.HALF:return re.Float16;case Po.SINGLE:return re.Float32;case Po.DOUBLE:return re.Float64}return re.Float;case re.Binary:return re.Binary;case re.Utf8:return re.Utf8;case re.Bool:return re.Bool;case re.Decimal:return re.Decimal;case re.Time:switch(e.unit){case Wt.SECOND:return re.TimeSecond;case Wt.MILLISECOND:return re.TimeMillisecond;case Wt.MICROSECOND:return re.TimeMicrosecond;case Wt.NANOSECOND:return re.TimeNanosecond}return re.Time;case re.Timestamp:switch(e.unit){case Wt.SECOND:return re.TimestampSecond;case Wt.MILLISECOND:return re.TimestampMillisecond;case Wt.MICROSECOND:return re.TimestampMicrosecond;case Wt.NANOSECOND:return re.TimestampNanosecond}return re.Timestamp;case re.Date:switch(e.unit){case Rh.DAY:return re.DateDay;case Rh.MILLISECOND:return re.DateMillisecond}return re.Date;case re.Interval:switch(e.unit){case Nh.DAY_TIME:return re.IntervalDayTime;case Nh.YEAR_MONTH:return re.IntervalYearMonth}return re.Interval;case re.Duration:switch(e.unit){case Wt.SECOND:return re.DurationSecond;case Wt.MILLISECOND:return re.DurationMillisecond;case Wt.MICROSECOND:return re.DurationMicrosecond;case Wt.NANOSECOND:return re.DurationNanosecond}return re.Duration;case re.Map:return re.Map;case re.List:return re.List;case re.Struct:return re.Struct;case re.Union:switch(e.mode){case Zu.Dense:return re.DenseUnion;case Zu.Sparse:return re.SparseUnion}return re.Union;case re.FixedSizeBinary:return re.FixedSizeBinary;case re.FixedSizeList:return re.FixedSizeList;case re.Dictionary:return re.Dictionary}throw new Error(`Unrecognized type '${re[e.typeId]}'`)}Cn.prototype.visitInt8=null;Cn.prototype.visitInt16=null;Cn.prototype.visitInt32=null;Cn.prototype.visitInt64=null;Cn.prototype.visitUint8=null;Cn.prototype.visitUint16=null;Cn.prototype.visitUint32=null;Cn.prototype.visitUint64=null;Cn.prototype.visitFloat16=null;Cn.prototype.visitFloat32=null;Cn.prototype.visitFloat64=null;Cn.prototype.visitDateDay=null;Cn.prototype.visitDateMillisecond=null;Cn.prototype.visitTimestampSecond=null;Cn.prototype.visitTimestampMillisecond=null;Cn.prototype.visitTimestampMicrosecond=null;Cn.prototype.visitTimestampNanosecond=null;Cn.prototype.visitTimeSecond=null;Cn.prototype.visitTimeMillisecond=null;Cn.prototype.visitTimeMicrosecond=null;Cn.prototype.visitTimeNanosecond=null;Cn.prototype.visitDenseUnion=null;Cn.prototype.visitSparseUnion=null;Cn.prototype.visitIntervalDayTime=null;Cn.prototype.visitIntervalYearMonth=null;Cn.prototype.visitDuration=null;Cn.prototype.visitDurationSecond=null;Cn.prototype.visitDurationMillisecond=null;Cn.prototype.visitDurationMicrosecond=null;Cn.prototype.visitDurationNanosecond=null;const $Ce=new Float64Array(1),M_=new Uint32Array($Ce.buffer);function MCe(e){const t=(e&31744)>>10,n=(e&1023)/1024,r=Math.pow(-1,(e&32768)>>15);switch(t){case 31:return r*(n?Number.NaN:1/0);case 0:return r*(n?6103515625e-14*n:0)}return r*Math.pow(2,t-15)*(1+n)}function LCe(e){if(e!==e)return 32256;$Ce[0]=e;const t=(M_[1]&2147483648)>>16&65535;let n=M_[1]&2146435072,r=0;return n>=1089470464?M_[0]>0?n=31744:(n=(n&2080374784)>>16,r=(M_[1]&1048575)>>10):n<=1056964608?(r=1048576+(M_[1]&1048575),r=1048576+(r<<(n>>20)-998)>>21,n=0):(n=n-1056964608>>10,r=(M_[1]&1048575)+512>>10),t|n|r&65535}class Qt extends Cn{}function rn(e){return(t,n,r)=>{if(t.setValid(n,r!=null))return e(t,n,r)}}const cvt=(e,t,n)=>{e[t]=Math.trunc(n/864e5)},_X=(e,t,n)=>{e[t]=Math.trunc(n%4294967296),e[t+1]=Math.trunc(n/4294967296)},fvt=(e,t,n)=>{e[t]=Math.trunc(n*1e3%4294967296),e[t+1]=Math.trunc(n*1e3/4294967296)},dvt=(e,t,n)=>{e[t]=Math.trunc(n*1e6%4294967296),e[t+1]=Math.trunc(n*1e6/4294967296)},FCe=(e,t,n,r)=>{if(n+1<t.length){const{[n]:i,[n+1]:s}=t;e.set(r.subarray(0,s-i),i)}},hvt=({offset:e,values:t},n,r)=>{const i=e+n;r?t[i>>3]|=1<<i%8:t[i>>3]&=~(1<<i%8)},eg=({values:e},t,n)=>{e[t]=n},wX=({values:e},t,n)=>{e[t]=n},jCe=({values:e},t,n)=>{e[t]=LCe(n)},pvt=(e,t,n)=>{switch(e.type.precision){case Po.HALF:return jCe(e,t,n);case Po.SINGLE:case Po.DOUBLE:return wX(e,t,n)}},EX=({values:e},t,n)=>{cvt(e,t,n.valueOf())},xX=({values:e},t,n)=>{_X(e,t*2,n.valueOf())},BCe=({stride:e,values:t},n,r)=>{t.set(r.subarray(0,e),e*n)},mvt=({values:e,valueOffsets:t},n,r)=>FCe(e,t,n,r),gvt=({values:e,valueOffsets:t},n,r)=>{FCe(e,t,n,aX(r))},UCe=(e,t,n)=>{e.type.unit===Rh.DAY?EX(e,t,n):xX(e,t,n)},SX=({values:e},t,n)=>_X(e,t*2,n/1e3),TX=({values:e},t,n)=>_X(e,t*2,n),CX=({values:e},t,n)=>fvt(e,t*2,n),AX=({values:e},t,n)=>dvt(e,t*2,n),zCe=(e,t,n)=>{switch(e.type.unit){case Wt.SECOND:return SX(e,t,n);case Wt.MILLISECOND:return TX(e,t,n);case Wt.MICROSECOND:return CX(e,t,n);case Wt.NANOSECOND:return AX(e,t,n)}},IX=({values:e},t,n)=>{e[t]=n},kX=({values:e},t,n)=>{e[t]=n},RX=({values:e},t,n)=>{e[t]=n},NX=({values:e},t,n)=>{e[t]=n},VCe=(e,t,n)=>{switch(e.type.unit){case Wt.SECOND:return IX(e,t,n);case Wt.MILLISECOND:return kX(e,t,n);case Wt.MICROSECOND:return RX(e,t,n);case Wt.NANOSECOND:return NX(e,t,n)}},HCe=({values:e,stride:t},n,r)=>{e.set(r.subarray(0,t),t*n)},yvt=(e,t,n)=>{const r=e.children[0],i=e.valueOffsets,s=Mc.getVisitFn(r);if(Array.isArray(n))for(let o=-1,a=i[t],u=i[t+1];a<u;)s(r,a++,n[++o]);else for(let o=-1,a=i[t],u=i[t+1];a<u;)s(r,a++,n.get(++o))},vvt=(e,t,n)=>{const r=e.children[0],{valueOffsets:i}=e,s=Mc.getVisitFn(r);let{[t]:o,[t+1]:a}=i;const u=n instanceof Map?n.entries():Object.entries(n);for(const l of u)if(s(r,o,l),++o>=a)break},bvt=(e,t)=>(n,r,i,s)=>r&&n(r,e,t[s]),_vt=(e,t)=>(n,r,i,s)=>r&&n(r,e,t.get(s)),wvt=(e,t)=>(n,r,i,s)=>r&&n(r,e,t.get(i.name)),Evt=(e,t)=>(n,r,i,s)=>r&&n(r,e,t[i.name]),xvt=(e,t,n)=>{const r=e.type.children.map(s=>Mc.getVisitFn(s.type)),i=n instanceof Map?wvt(t,n):n instanceof hr?_vt(t,n):Array.isArray(n)?bvt(t,n):Evt(t,n);e.type.children.forEach((s,o)=>i(r[o],e.children[o],s,o))},Svt=(e,t,n)=>{e.type.mode===Zu.Dense?qCe(e,t,n):WCe(e,t,n)},qCe=(e,t,n)=>{const r=e.type.typeIdToChildIndex[e.typeIds[t]],i=e.children[r];Mc.visit(i,e.valueOffsets[t],n)},WCe=(e,t,n)=>{const r=e.type.typeIdToChildIndex[e.typeIds[t]],i=e.children[r];Mc.visit(i,t,n)},Tvt=(e,t,n)=>{var r;(r=e.dictionary)===null||r===void 0||r.set(e.values[t],n)},GCe=(e,t,n)=>{e.type.unit===Nh.DAY_TIME?DX(e,t,n):PX(e,t,n)},DX=({values:e},t,n)=>{e.set(n.subarray(0,2),2*t)},PX=({values:e},t,n)=>{e[t]=n[0]*12+n[1]%12},OX=({values:e},t,n)=>{e[t]=n},$X=({values:e},t,n)=>{e[t]=n},MX=({values:e},t,n)=>{e[t]=n},LX=({values:e},t,n)=>{e[t]=n},YCe=(e,t,n)=>{switch(e.type.unit){case Wt.SECOND:return OX(e,t,n);case Wt.MILLISECOND:return $X(e,t,n);case Wt.MICROSECOND:return MX(e,t,n);case Wt.NANOSECOND:return LX(e,t,n)}},Cvt=(e,t,n)=>{const{stride:r}=e,i=e.children[0],s=Mc.getVisitFn(i);if(Array.isArray(n))for(let o=-1,a=t*r;++o<r;)s(i,a+o,n[o]);else for(let o=-1,a=t*r;++o<r;)s(i,a+o,n.get(o))};Qt.prototype.visitBool=rn(hvt);Qt.prototype.visitInt=rn(eg);Qt.prototype.visitInt8=rn(eg);Qt.prototype.visitInt16=rn(eg);Qt.prototype.visitInt32=rn(eg);Qt.prototype.visitInt64=rn(eg);Qt.prototype.visitUint8=rn(eg);Qt.prototype.visitUint16=rn(eg);Qt.prototype.visitUint32=rn(eg);Qt.prototype.visitUint64=rn(eg);Qt.prototype.visitFloat=rn(pvt);Qt.prototype.visitFloat16=rn(jCe);Qt.prototype.visitFloat32=rn(wX);Qt.prototype.visitFloat64=rn(wX);Qt.prototype.visitUtf8=rn(gvt);Qt.prototype.visitBinary=rn(mvt);Qt.prototype.visitFixedSizeBinary=rn(BCe);Qt.prototype.visitDate=rn(UCe);Qt.prototype.visitDateDay=rn(EX);Qt.prototype.visitDateMillisecond=rn(xX);Qt.prototype.visitTimestamp=rn(zCe);Qt.prototype.visitTimestampSecond=rn(SX);Qt.prototype.visitTimestampMillisecond=rn(TX);Qt.prototype.visitTimestampMicrosecond=rn(CX);Qt.prototype.visitTimestampNanosecond=rn(AX);Qt.prototype.visitTime=rn(VCe);Qt.prototype.visitTimeSecond=rn(IX);Qt.prototype.visitTimeMillisecond=rn(kX);Qt.prototype.visitTimeMicrosecond=rn(RX);Qt.prototype.visitTimeNanosecond=rn(NX);Qt.prototype.visitDecimal=rn(HCe);Qt.prototype.visitList=rn(yvt);Qt.prototype.visitStruct=rn(xvt);Qt.prototype.visitUnion=rn(Svt);Qt.prototype.visitDenseUnion=rn(qCe);Qt.prototype.visitSparseUnion=rn(WCe);Qt.prototype.visitDictionary=rn(Tvt);Qt.prototype.visitInterval=rn(GCe);Qt.prototype.visitIntervalDayTime=rn(DX);Qt.prototype.visitIntervalYearMonth=rn(PX);Qt.prototype.visitDuration=rn(YCe);Qt.prototype.visitDurationSecond=rn(OX);Qt.prototype.visitDurationMillisecond=rn($X);Qt.prototype.visitDurationMicrosecond=rn(MX);Qt.prototype.visitDurationNanosecond=rn(LX);Qt.prototype.visitFixedSizeList=rn(Cvt);Qt.prototype.visitMap=rn(vvt);const Mc=new Qt,gf=Symbol.for("parent"),rE=Symbol.for("rowIndex");class FX{constructor(t,n){return this[gf]=t,this[rE]=n,new Proxy(this,new Ivt)}toArray(){return Object.values(this.toJSON())}toJSON(){const t=this[rE],n=this[gf],r=n.type.children,i={};for(let s=-1,o=r.length;++s<o;)i[r[s].name]=el.visit(n.children[s],t);return i}toString(){return`{${[...this].map(([t,n])=>`${Q1(t)}: ${Q1(n)}`).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}[Symbol.iterator](){return new Avt(this[gf],this[rE])}}class Avt{constructor(t,n){this.childIndex=0,this.children=t.children,this.rowIndex=n,this.childFields=t.type.children,this.numChildren=this.childFields.length}[Symbol.iterator](){return this}next(){const t=this.childIndex;return t<this.numChildren?(this.childIndex=t+1,{done:!1,value:[this.childFields[t].name,el.visit(this.children[t],this.rowIndex)]}):{done:!0,value:null}}}Object.defineProperties(FX.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[gf]:{writable:!0,enumerable:!1,configurable:!1,value:null},[rE]:{writable:!0,enumerable:!1,configurable:!1,value:-1}});class Ivt{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(t){return t[gf].type.children.map(n=>n.name)}has(t,n){return t[gf].type.children.findIndex(r=>r.name===n)!==-1}getOwnPropertyDescriptor(t,n){if(t[gf].type.children.findIndex(r=>r.name===n)!==-1)return{writable:!0,enumerable:!0,configurable:!0}}get(t,n){if(Reflect.has(t,n))return t[n];const r=t[gf].type.children.findIndex(i=>i.name===n);if(r!==-1){const i=el.visit(t[gf].children[r],t[rE]);return Reflect.set(t,n,i),i}}set(t,n,r){const i=t[gf].type.children.findIndex(s=>s.name===n);return i!==-1?(Mc.visit(t[gf].children[i],t[rE],r),Reflect.set(t,n,r)):Reflect.has(t,n)||typeof n=="symbol"?Reflect.set(t,n,r):!1}}class Gt extends Cn{}function Jt(e){return(t,n)=>t.getValid(n)?e(t,n):null}const kvt=(e,t)=>864e5*e[t],jX=(e,t)=>4294967296*e[t+1]+(e[t]>>>0),Rvt=(e,t)=>4294967296*(e[t+1]/1e3)+(e[t]>>>0)/1e3,Nvt=(e,t)=>4294967296*(e[t+1]/1e6)+(e[t]>>>0)/1e6,KCe=e=>new Date(e),Dvt=(e,t)=>KCe(kvt(e,t)),Pvt=(e,t)=>KCe(jX(e,t)),Ovt=(e,t)=>null,XCe=(e,t,n)=>{if(n+1>=t.length)return null;const r=t[n],i=t[n+1];return e.subarray(r,i)},$vt=({offset:e,values:t},n)=>{const r=e+n;return(t[r>>3]&1<<r%8)!==0},QCe=({values:e},t)=>Dvt(e,t),JCe=({values:e},t)=>Pvt(e,t*2),zy=({stride:e,values:t},n)=>t[e*n],Mvt=({stride:e,values:t},n)=>MCe(t[e*n]),ZCe=({values:e},t)=>e[t],Lvt=({stride:e,values:t},n)=>t.subarray(e*n,e*(n+1)),Fvt=({values:e,valueOffsets:t},n)=>XCe(e,t,n),jvt=({values:e,valueOffsets:t},n)=>{const r=XCe(e,t,n);return r!==null?Cz(r):null},Bvt=({values:e},t)=>e[t],Uvt=({type:e,values:t},n)=>e.precision!==Po.HALF?t[n]:MCe(t[n]),zvt=(e,t)=>e.type.unit===Rh.DAY?QCe(e,t):JCe(e,t),eAe=({values:e},t)=>1e3*jX(e,t*2),tAe=({values:e},t)=>jX(e,t*2),nAe=({values:e},t)=>Rvt(e,t*2),rAe=({values:e},t)=>Nvt(e,t*2),Vvt=(e,t)=>{switch(e.type.unit){case Wt.SECOND:return eAe(e,t);case Wt.MILLISECOND:return tAe(e,t);case Wt.MICROSECOND:return nAe(e,t);case Wt.NANOSECOND:return rAe(e,t)}},iAe=({values:e},t)=>e[t],sAe=({values:e},t)=>e[t],oAe=({values:e},t)=>e[t],aAe=({values:e},t)=>e[t],Hvt=(e,t)=>{switch(e.type.unit){case Wt.SECOND:return iAe(e,t);case Wt.MILLISECOND:return sAe(e,t);case Wt.MICROSECOND:return oAe(e,t);case Wt.NANOSECOND:return aAe(e,t)}},qvt=({values:e,stride:t},n)=>cX.decimal(e.subarray(t*n,t*(n+1))),Wvt=(e,t)=>{const{valueOffsets:n,stride:r,children:i}=e,{[t*r]:s,[t*r+1]:o}=n,u=i[0].slice(s,o-s);return new hr([u])},Gvt=(e,t)=>{const{valueOffsets:n,children:r}=e,{[t]:i,[t+1]:s}=n,o=r[0];return new K6(o.slice(i,s-i))},Yvt=(e,t)=>new FX(e,t),Kvt=(e,t)=>e.type.mode===Zu.Dense?uAe(e,t):lAe(e,t),uAe=(e,t)=>{const n=e.type.typeIdToChildIndex[e.typeIds[t]],r=e.children[n];return el.visit(r,e.valueOffsets[t])},lAe=(e,t)=>{const n=e.type.typeIdToChildIndex[e.typeIds[t]],r=e.children[n];return el.visit(r,t)},Xvt=(e,t)=>{var n;return(n=e.dictionary)===null||n===void 0?void 0:n.get(e.values[t])},Qvt=(e,t)=>e.type.unit===Nh.DAY_TIME?cAe(e,t):fAe(e,t),cAe=({values:e},t)=>e.subarray(2*t,2*(t+1)),fAe=({values:e},t)=>{const n=e[t],r=new Int32Array(2);return r[0]=Math.trunc(n/12),r[1]=Math.trunc(n%12),r},dAe=({values:e},t)=>e[t],hAe=({values:e},t)=>e[t],pAe=({values:e},t)=>e[t],mAe=({values:e},t)=>e[t],Jvt=(e,t)=>{switch(e.type.unit){case Wt.SECOND:return dAe(e,t);case Wt.MILLISECOND:return hAe(e,t);case Wt.MICROSECOND:return pAe(e,t);case Wt.NANOSECOND:return mAe(e,t)}},Zvt=(e,t)=>{const{stride:n,children:r}=e,s=r[0].slice(t*n,n);return new hr([s])};Gt.prototype.visitNull=Jt(Ovt);Gt.prototype.visitBool=Jt($vt);Gt.prototype.visitInt=Jt(Bvt);Gt.prototype.visitInt8=Jt(zy);Gt.prototype.visitInt16=Jt(zy);Gt.prototype.visitInt32=Jt(zy);Gt.prototype.visitInt64=Jt(ZCe);Gt.prototype.visitUint8=Jt(zy);Gt.prototype.visitUint16=Jt(zy);Gt.prototype.visitUint32=Jt(zy);Gt.prototype.visitUint64=Jt(ZCe);Gt.prototype.visitFloat=Jt(Uvt);Gt.prototype.visitFloat16=Jt(Mvt);Gt.prototype.visitFloat32=Jt(zy);Gt.prototype.visitFloat64=Jt(zy);Gt.prototype.visitUtf8=Jt(jvt);Gt.prototype.visitBinary=Jt(Fvt);Gt.prototype.visitFixedSizeBinary=Jt(Lvt);Gt.prototype.visitDate=Jt(zvt);Gt.prototype.visitDateDay=Jt(QCe);Gt.prototype.visitDateMillisecond=Jt(JCe);Gt.prototype.visitTimestamp=Jt(Vvt);Gt.prototype.visitTimestampSecond=Jt(eAe);Gt.prototype.visitTimestampMillisecond=Jt(tAe);Gt.prototype.visitTimestampMicrosecond=Jt(nAe);Gt.prototype.visitTimestampNanosecond=Jt(rAe);Gt.prototype.visitTime=Jt(Hvt);Gt.prototype.visitTimeSecond=Jt(iAe);Gt.prototype.visitTimeMillisecond=Jt(sAe);Gt.prototype.visitTimeMicrosecond=Jt(oAe);Gt.prototype.visitTimeNanosecond=Jt(aAe);Gt.prototype.visitDecimal=Jt(qvt);Gt.prototype.visitList=Jt(Wvt);Gt.prototype.visitStruct=Jt(Yvt);Gt.prototype.visitUnion=Jt(Kvt);Gt.prototype.visitDenseUnion=Jt(uAe);Gt.prototype.visitSparseUnion=Jt(lAe);Gt.prototype.visitDictionary=Jt(Xvt);Gt.prototype.visitInterval=Jt(Qvt);Gt.prototype.visitIntervalDayTime=Jt(cAe);Gt.prototype.visitIntervalYearMonth=Jt(fAe);Gt.prototype.visitDuration=Jt(Jvt);Gt.prototype.visitDurationSecond=Jt(dAe);Gt.prototype.visitDurationMillisecond=Jt(hAe);Gt.prototype.visitDurationMicrosecond=Jt(pAe);Gt.prototype.visitDurationNanosecond=Jt(mAe);Gt.prototype.visitFixedSizeList=Jt(Zvt);Gt.prototype.visitMap=Jt(Gvt);const el=new Gt,Sf=Symbol.for("keys"),iE=Symbol.for("vals");class K6{constructor(t){return this[Sf]=new hr([t.children[0]]).memoize(),this[iE]=t.children[1],new Proxy(this,new t1t)}[Symbol.iterator](){return new e1t(this[Sf],this[iE])}get size(){return this[Sf].length}toArray(){return Object.values(this.toJSON())}toJSON(){const t=this[Sf],n=this[iE],r={};for(let i=-1,s=t.length;++i<s;)r[t.get(i)]=el.visit(n,i);return r}toString(){return`{${[...this].map(([t,n])=>`${Q1(t)}: ${Q1(n)}`).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}}class e1t{constructor(t,n){this.keys=t,this.vals=n,this.keyIndex=0,this.numKeys=t.length}[Symbol.iterator](){return this}next(){const t=this.keyIndex;return t===this.numKeys?{done:!0,value:null}:(this.keyIndex++,{done:!1,value:[this.keys.get(t),el.visit(this.vals,t)]})}}class t1t{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(t){return t[Sf].toArray().map(String)}has(t,n){return t[Sf].includes(n)}getOwnPropertyDescriptor(t,n){if(t[Sf].indexOf(n)!==-1)return{writable:!0,enumerable:!0,configurable:!0}}get(t,n){if(Reflect.has(t,n))return t[n];const r=t[Sf].indexOf(n);if(r!==-1){const i=el.visit(Reflect.get(t,iE),r);return Reflect.set(t,n,i),i}}set(t,n,r){const i=t[Sf].indexOf(n);return i!==-1?(Mc.visit(Reflect.get(t,iE),i,r),Reflect.set(t,n,r)):Reflect.has(t,n)?Reflect.set(t,n,r):!1}}Object.defineProperties(K6.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[Sf]:{writable:!0,enumerable:!1,configurable:!1,value:null},[iE]:{writable:!0,enumerable:!1,configurable:!1,value:null}});let Wce;function gAe(e,t,n,r){const{length:i=0}=e;let s=typeof t!="number"?0:t,o=typeof n!="number"?i:n;return s<0&&(s=(s%i+i)%i),o<0&&(o=(o%i+i)%i),o<s&&(Wce=s,s=o,o=Wce),o>i&&(o=i),r?r(e,s,o):[s,o]}const Gce=e=>e!==e;function wS(e){if(typeof e!=="object"||e===null)return Gce(e)?Gce:n=>n===e;if(e instanceof Date){const n=e.valueOf();return r=>r instanceof Date?r.valueOf()===n:!1}return ArrayBuffer.isView(e)?n=>n?qyt(e,n):!1:e instanceof Map?r1t(e):Array.isArray(e)?n1t(e):e instanceof hr?i1t(e):s1t(e,!0)}function n1t(e){const t=[];for(let n=-1,r=e.length;++n<r;)t[n]=wS(e[n]);return X6(t)}function r1t(e){let t=-1;const n=[];for(const r of e.values())n[++t]=wS(r);return X6(n)}function i1t(e){const t=[];for(let n=-1,r=e.length;++n<r;)t[n]=wS(e.get(n));return X6(t)}function s1t(e,t=!1){const n=Object.keys(e);if(!t&&n.length===0)return()=>!1;const r=[];for(let i=-1,s=n.length;++i<s;)r[i]=wS(e[n[i]]);return X6(r,n)}function X6(e,t){return n=>{if(!n||typeof n!="object")return!1;switch(n.constructor){case Array:return o1t(e,n);case Map:return Yce(e,n,n.keys());case K6:case FX:case Object:case void 0:return Yce(e,n,t||Object.keys(n))}return n instanceof hr?a1t(e,n):!1}}function o1t(e,t){const n=e.length;if(t.length!==n)return!1;for(let r=-1;++r<n;)if(!e[r](t[r]))return!1;return!0}function a1t(e,t){const n=e.length;if(t.length!==n)return!1;for(let r=-1;++r<n;)if(!e[r](t.get(r)))return!1;return!0}function Yce(e,t,n){const r=n[Symbol.iterator](),i=t instanceof Map?t.keys():Object.keys(t)[Symbol.iterator](),s=t instanceof Map?t.values():Object.values(t)[Symbol.iterator]();let o=0;const a=e.length;let u=s.next(),l=r.next(),c=i.next();for(;o<a&&!l.done&&!c.done&&!u.done&&!(l.value!==c.value||!e[o](u.value));++o,l=r.next(),c=i.next(),u=s.next());return o===a&&l.done&&c.done&&u.done?!0:(r.return&&r.return(),i.return&&i.return(),s.return&&s.return(),!1)}function yAe(e,t,n,r){return(n&1<<r)!==0}function u1t(e,t,n,r){return(n&1<<r)>>r}function a$(e,t,n){const r=n.byteLength+7&-8;if(e>0||n.byteLength<r){const i=new Uint8Array(r);return i.set(e%8===0?n.subarray(e>>3):vAe(new BX(n,e,t,null,yAe)).subarray(0,r)),i}return n}function vAe(e){const t=[];let n=0,r=0,i=0;for(const o of e)o&&(i|=1<<r),++r===8&&(t[n++]=i,i=r=0);(n===0||r>0)&&(t[n++]=i);const s=new Uint8Array(t.length+7&-8);return s.set(t),s}class BX{constructor(t,n,r,i,s){this.bytes=t,this.length=r,this.context=i,this.get=s,this.bit=n%8,this.byteIndex=n>>3,this.byte=t[this.byteIndex++],this.index=0}next(){return this.index<this.length?(this.bit===8&&(this.bit=0,this.byte=this.bytes[this.byteIndex++]),{value:this.get(this.context,this.index++,this.byte,this.bit++)}):{done:!0,value:null}}[Symbol.iterator](){return this}}function kz(e,t,n){if(n-t<=0)return 0;if(n-t<8){let s=0;for(const o of new BX(e,t,n-t,e,u1t))s+=o;return s}const r=n>>3<<3,i=t+(t%8===0?0:8-t%8);return kz(e,t,i)+kz(e,r,n)+l1t(e,i>>3,r-i>>3)}function l1t(e,t,n){let r=0,i=Math.trunc(t);const s=new DataView(e.buffer,e.byteOffset,e.byteLength),o=n===void 0?e.byteLength:i+n;for(;o-i>=4;)r+=Y8(s.getUint32(i)),i+=4;for(;o-i>=2;)r+=Y8(s.getUint16(i)),i+=2;for(;o-i>=1;)r+=Y8(s.getUint8(i)),i+=1;return r}function Y8(e){let t=Math.trunc(e);return t=t-(t>>>1&1431655765),t=(t&858993459)+(t>>>2&858993459),(t+(t>>>4)&252645135)*16843009>>>24}const c1t=-1;class Nr{get typeId(){return this.type.typeId}get ArrayType(){return this.type.ArrayType}get buffers(){return[this.valueOffsets,this.values,this.nullBitmap,this.typeIds]}get nullable(){if(this._nullCount!==0){const{type:t}=this;return Sn.isSparseUnion(t)?this.children.some(n=>n.nullable):Sn.isDenseUnion(t)?this.children.some(n=>n.nullable):this.nullBitmap&&this.nullBitmap.byteLength>0}return!0}get byteLength(){let t=0;const{valueOffsets:n,values:r,nullBitmap:i,typeIds:s}=this;return n&&(t+=n.byteLength),r&&(t+=r.byteLength),i&&(t+=i.byteLength),s&&(t+=s.byteLength),this.children.reduce((o,a)=>o+a.byteLength,t)}get nullCount(){if(Sn.isUnion(this.type))return this.children.reduce((r,i)=>r+i.nullCount,0);let t=this._nullCount,n;return t<=c1t&&(n=this.nullBitmap)&&(this._nullCount=t=this.length-kz(n,this.offset,this.offset+this.length)),t}constructor(t,n,r,i,s,o=[],a){this.type=t,this.children=o,this.dictionary=a,this.offset=Math.floor(Math.max(n||0,0)),this.length=Math.floor(Math.max(r||0,0)),this._nullCount=Math.floor(Math.max(i||0,-1));let u;s instanceof Nr?(this.stride=s.stride,this.values=s.values,this.typeIds=s.typeIds,this.nullBitmap=s.nullBitmap,this.valueOffsets=s.valueOffsets):(this.stride=$d(t),s&&((u=s[0])&&(this.valueOffsets=u),(u=s[1])&&(this.values=u),(u=s[2])&&(this.nullBitmap=u),(u=s[3])&&(this.typeIds=u)))}getValid(t){const{type:n}=this;if(Sn.isUnion(n)){const r=n,i=this.children[r.typeIdToChildIndex[this.typeIds[t]]],s=r.mode===Zu.Dense?this.valueOffsets[t]:t;return i.getValid(s)}if(this.nullable&&this.nullCount>0){const r=this.offset+t;return(this.nullBitmap[r>>3]&1<<r%8)!==0}return!0}setValid(t,n){let r;const{type:i}=this;if(Sn.isUnion(i)){const s=i,o=this.children[s.typeIdToChildIndex[this.typeIds[t]]],a=s.mode===Zu.Dense?this.valueOffsets[t]:t;r=o.getValid(a),o.setValid(a,n)}else{let{nullBitmap:s}=this;const{offset:o,length:a}=this,u=o+t,l=1<<u%8,c=u>>3;(!s||s.byteLength<=c)&&(s=new Uint8Array((o+a+63&-64)>>3).fill(255),this.nullCount>0&&s.set(a$(o,a,this.nullBitmap),0),Object.assign(this,{nullBitmap:s,_nullCount:-1}));const f=s[c];r=(f&l)!==0,n?s[c]=f|l:s[c]=f&~l}return r!==!!n&&(this._nullCount=this.nullCount+(n?-1:1)),n}clone(t=this.type,n=this.offset,r=this.length,i=this._nullCount,s=this,o=this.children){return new Nr(t,n,r,i,s,o,this.dictionary)}slice(t,n){const{stride:r,typeId:i,children:s}=this,o=+(this._nullCount===0)-1,a=i===16?r:1,u=this._sliceBuffers(t,n,r,i);return this.clone(this.type,this.offset+t,n,o,u,s.length===0||this.valueOffsets?s:this._sliceChildren(s,a*t,a*n))}_changeLengthAndBackfillNullBitmap(t){if(this.typeId===re.Null)return this.clone(this.type,0,t,0);const{length:n,nullCount:r}=this,i=new Uint8Array((t+63&-64)>>3).fill(255,0,n>>3);i[n>>3]=(1<<n-(n&-8))-1,r>0&&i.set(a$(this.offset,n,this.nullBitmap),0);const s=this.buffers;return s[Ip.VALIDITY]=i,this.clone(this.type,0,t,r+(t-n),s)}_sliceBuffers(t,n,r,i){let s;const{buffers:o}=this;return(s=o[Ip.TYPE])&&(o[Ip.TYPE]=s.subarray(t,t+n)),(s=o[Ip.OFFSET])&&(o[Ip.OFFSET]=s.subarray(t,t+n+1))||(s=o[Ip.DATA])&&(o[Ip.DATA]=i===6?s:s.subarray(r*t,r*(t+n))),o}_sliceChildren(t,n,r){return t.map(i=>i.slice(n,r))}}Nr.prototype.children=Object.freeze([]);class NC extends Cn{visit(t){return this.getVisitFn(t.type).call(this,t)}visitNull(t){const{["type"]:n,["offset"]:r=0,["length"]:i=0}=t;return new Nr(n,r,i,i)}visitBool(t){const{["type"]:n,["offset"]:r=0}=t,i=Dr(t.nullBitmap),s=Ys(n.ArrayType,t.data),{["length"]:o=s.length>>3,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Nr(n,r,o,a,[void 0,s,i])}visitInt(t){const{["type"]:n,["offset"]:r=0}=t,i=Dr(t.nullBitmap),s=Ys(n.ArrayType,t.data),{["length"]:o=s.length,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Nr(n,r,o,a,[void 0,s,i])}visitFloat(t){const{["type"]:n,["offset"]:r=0}=t,i=Dr(t.nullBitmap),s=Ys(n.ArrayType,t.data),{["length"]:o=s.length,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Nr(n,r,o,a,[void 0,s,i])}visitUtf8(t){const{["type"]:n,["offset"]:r=0}=t,i=Dr(t.data),s=Dr(t.nullBitmap),o=LT(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:u=t.nullBitmap?-1:0}=t;return new Nr(n,r,a,u,[o,i,s])}visitBinary(t){const{["type"]:n,["offset"]:r=0}=t,i=Dr(t.data),s=Dr(t.nullBitmap),o=LT(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:u=t.nullBitmap?-1:0}=t;return new Nr(n,r,a,u,[o,i,s])}visitFixedSizeBinary(t){const{["type"]:n,["offset"]:r=0}=t,i=Dr(t.nullBitmap),s=Ys(n.ArrayType,t.data),{["length"]:o=s.length/$d(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Nr(n,r,o,a,[void 0,s,i])}visitDate(t){const{["type"]:n,["offset"]:r=0}=t,i=Dr(t.nullBitmap),s=Ys(n.ArrayType,t.data),{["length"]:o=s.length/$d(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Nr(n,r,o,a,[void 0,s,i])}visitTimestamp(t){const{["type"]:n,["offset"]:r=0}=t,i=Dr(t.nullBitmap),s=Ys(n.ArrayType,t.data),{["length"]:o=s.length/$d(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Nr(n,r,o,a,[void 0,s,i])}visitTime(t){const{["type"]:n,["offset"]:r=0}=t,i=Dr(t.nullBitmap),s=Ys(n.ArrayType,t.data),{["length"]:o=s.length/$d(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Nr(n,r,o,a,[void 0,s,i])}visitDecimal(t){const{["type"]:n,["offset"]:r=0}=t,i=Dr(t.nullBitmap),s=Ys(n.ArrayType,t.data),{["length"]:o=s.length/$d(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Nr(n,r,o,a,[void 0,s,i])}visitList(t){const{["type"]:n,["offset"]:r=0,["child"]:i}=t,s=Dr(t.nullBitmap),o=LT(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:u=t.nullBitmap?-1:0}=t;return new Nr(n,r,a,u,[o,void 0,s],[i])}visitStruct(t){const{["type"]:n,["offset"]:r=0,["children"]:i=[]}=t,s=Dr(t.nullBitmap),{length:o=i.reduce((u,{length:l})=>Math.max(u,l),0),nullCount:a=t.nullBitmap?-1:0}=t;return new Nr(n,r,o,a,[void 0,void 0,s],i)}visitUnion(t){const{["type"]:n,["offset"]:r=0,["children"]:i=[]}=t,s=Ys(n.ArrayType,t.typeIds),{["length"]:o=s.length,["nullCount"]:a=-1}=t;if(Sn.isSparseUnion(n))return new Nr(n,r,o,a,[void 0,void 0,void 0,s],i);const u=LT(t.valueOffsets);return new Nr(n,r,o,a,[u,void 0,void 0,s],i)}visitDictionary(t){const{["type"]:n,["offset"]:r=0}=t,i=Dr(t.nullBitmap),s=Ys(n.indices.ArrayType,t.data),{["dictionary"]:o=new hr([new NC().visit({type:n.dictionary})])}=t,{["length"]:a=s.length,["nullCount"]:u=t.nullBitmap?-1:0}=t;return new Nr(n,r,a,u,[void 0,s,i],[],o)}visitInterval(t){const{["type"]:n,["offset"]:r=0}=t,i=Dr(t.nullBitmap),s=Ys(n.ArrayType,t.data),{["length"]:o=s.length/$d(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Nr(n,r,o,a,[void 0,s,i])}visitDuration(t){const{["type"]:n,["offset"]:r=0}=t,i=Dr(t.nullBitmap),s=Ys(n.ArrayType,t.data),{["length"]:o=s.length,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Nr(n,r,o,a,[void 0,s,i])}visitFixedSizeList(t){const{["type"]:n,["offset"]:r=0,["child"]:i=new NC().visit({type:n.valueType})}=t,s=Dr(t.nullBitmap),{["length"]:o=i.length/$d(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Nr(n,r,o,a,[void 0,void 0,s],[i])}visitMap(t){const{["type"]:n,["offset"]:r=0,["child"]:i=new NC().visit({type:n.childType})}=t,s=Dr(t.nullBitmap),o=LT(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:u=t.nullBitmap?-1:0}=t;return new Nr(n,r,a,u,[o,void 0,s],[i])}}const f1t=new NC;function aa(e){return f1t.visit(e)}class Kce{constructor(t=0,n){this.numChunks=t,this.getChunkIterator=n,this.chunkIndex=0,this.chunkIterator=this.getChunkIterator(0)}next(){for(;this.chunkIndex<this.numChunks;){const t=this.chunkIterator.next();if(!t.done)return t;++this.chunkIndex<this.numChunks&&(this.chunkIterator=this.getChunkIterator(this.chunkIndex))}return{done:!0,value:null}}[Symbol.iterator](){return this}}function bAe(e){return e.reduce((t,n)=>t+n.nullCount,0)}function _Ae(e){return e.reduce((t,n,r)=>(t[r+1]=t[r]+n.length,t),new Uint32Array(e.length+1))}function wAe(e,t,n,r){const i=[];for(let s=-1,o=e.length;++s<o;){const a=e[s],u=t[s],{length:l}=a;if(u>=r)break;if(n>=u+l)continue;if(u>=n&&u+l<=r){i.push(a);continue}const c=Math.max(0,n-u),f=Math.min(r-u,l);i.push(a.slice(c,f-c))}return i.length===0&&i.push(e[0].slice(0,0)),i}function UX(e,t,n,r){let i=0,s=0,o=t.length-1;do{if(i>=o-1)return n<t[o]?r(e,i,n-t[i]):null;s=i+Math.trunc((o-i)*.5),n<t[s]?o=s:i=s}while(i<o)}function zX(e,t){return e.getValid(t)}function sE(e){function t(n,r,i){return e(n[r],i)}return function(n){const r=this.data;return UX(r,this._offsets,n,t)}}function EAe(e){let t;function n(r,i,s){return e(r[i],s,t)}return function(r,i){const s=this.data;t=i;const o=UX(s,this._offsets,r,n);return t=void 0,o}}function xAe(e){let t;function n(r,i,s){let o=s,a=0,u=0;for(let l=i-1,c=r.length;++l<c;){const f=r[l];if(~(a=e(f,t,o)))return u+a;o=0,u+=f.length}return-1}return function(r,i){t=r;const s=this.data,o=typeof i!="number"?n(s,0,0):UX(s,this._offsets,i,n);return t=void 0,o}}class Yt extends Cn{}function d1t(e,t){return t===null&&e.length>0?0:-1}function h1t(e,t){const{nullBitmap:n}=e;if(!n||e.nullCount<=0)return-1;let r=0;for(const i of new BX(n,e.offset+(t||0),e.length,n,yAe)){if(!i)return r;++r}return-1}function cn(e,t,n){if(t===void 0)return-1;if(t===null)switch(e.typeId){case re.Union:break;case re.Dictionary:break;default:return h1t(e,n)}const r=el.getVisitFn(e),i=wS(t);for(let s=(n||0)-1,o=e.length;++s<o;)if(i(r(e,s)))return s;return-1}function SAe(e,t,n){const r=el.getVisitFn(e),i=wS(t);for(let s=(n||0)-1,o=e.length;++s<o;)if(i(r(e,s)))return s;return-1}Yt.prototype.visitNull=d1t;Yt.prototype.visitBool=cn;Yt.prototype.visitInt=cn;Yt.prototype.visitInt8=cn;Yt.prototype.visitInt16=cn;Yt.prototype.visitInt32=cn;Yt.prototype.visitInt64=cn;Yt.prototype.visitUint8=cn;Yt.prototype.visitUint16=cn;Yt.prototype.visitUint32=cn;Yt.prototype.visitUint64=cn;Yt.prototype.visitFloat=cn;Yt.prototype.visitFloat16=cn;Yt.prototype.visitFloat32=cn;Yt.prototype.visitFloat64=cn;Yt.prototype.visitUtf8=cn;Yt.prototype.visitBinary=cn;Yt.prototype.visitFixedSizeBinary=cn;Yt.prototype.visitDate=cn;Yt.prototype.visitDateDay=cn;Yt.prototype.visitDateMillisecond=cn;Yt.prototype.visitTimestamp=cn;Yt.prototype.visitTimestampSecond=cn;Yt.prototype.visitTimestampMillisecond=cn;Yt.prototype.visitTimestampMicrosecond=cn;Yt.prototype.visitTimestampNanosecond=cn;Yt.prototype.visitTime=cn;Yt.prototype.visitTimeSecond=cn;Yt.prototype.visitTimeMillisecond=cn;Yt.prototype.visitTimeMicrosecond=cn;Yt.prototype.visitTimeNanosecond=cn;Yt.prototype.visitDecimal=cn;Yt.prototype.visitList=cn;Yt.prototype.visitStruct=cn;Yt.prototype.visitUnion=cn;Yt.prototype.visitDenseUnion=SAe;Yt.prototype.visitSparseUnion=SAe;Yt.prototype.visitDictionary=cn;Yt.prototype.visitInterval=cn;Yt.prototype.visitIntervalDayTime=cn;Yt.prototype.visitIntervalYearMonth=cn;Yt.prototype.visitDuration=cn;Yt.prototype.visitDurationSecond=cn;Yt.prototype.visitDurationMillisecond=cn;Yt.prototype.visitDurationMicrosecond=cn;Yt.prototype.visitDurationNanosecond=cn;Yt.prototype.visitFixedSizeList=cn;Yt.prototype.visitMap=cn;const u$=new Yt;class Kt extends Cn{}function Zt(e){const{type:t}=e;if(e.nullCount===0&&e.stride===1&&(t.typeId===re.Timestamp||t instanceof nu&&t.bitWidth!==64||t instanceof Rm&&t.bitWidth!==64||t instanceof K0&&t.precision!==Po.HALF))return new Kce(e.data.length,r=>{const i=e.data[r];return i.values.subarray(0,i.length)[Symbol.iterator]()});let n=0;return new Kce(e.data.length,r=>{const s=e.data[r].length,o=e.slice(n,n+s);return n+=s,new p1t(o)})}class p1t{constructor(t){this.vector=t,this.index=0}next(){return this.index<this.vector.length?{value:this.vector.get(this.index++)}:{done:!0,value:null}}[Symbol.iterator](){return this}}Kt.prototype.visitNull=Zt;Kt.prototype.visitBool=Zt;Kt.prototype.visitInt=Zt;Kt.prototype.visitInt8=Zt;Kt.prototype.visitInt16=Zt;Kt.prototype.visitInt32=Zt;Kt.prototype.visitInt64=Zt;Kt.prototype.visitUint8=Zt;Kt.prototype.visitUint16=Zt;Kt.prototype.visitUint32=Zt;Kt.prototype.visitUint64=Zt;Kt.prototype.visitFloat=Zt;Kt.prototype.visitFloat16=Zt;Kt.prototype.visitFloat32=Zt;Kt.prototype.visitFloat64=Zt;Kt.prototype.visitUtf8=Zt;Kt.prototype.visitBinary=Zt;Kt.prototype.visitFixedSizeBinary=Zt;Kt.prototype.visitDate=Zt;Kt.prototype.visitDateDay=Zt;Kt.prototype.visitDateMillisecond=Zt;Kt.prototype.visitTimestamp=Zt;Kt.prototype.visitTimestampSecond=Zt;Kt.prototype.visitTimestampMillisecond=Zt;Kt.prototype.visitTimestampMicrosecond=Zt;Kt.prototype.visitTimestampNanosecond=Zt;Kt.prototype.visitTime=Zt;Kt.prototype.visitTimeSecond=Zt;Kt.prototype.visitTimeMillisecond=Zt;Kt.prototype.visitTimeMicrosecond=Zt;Kt.prototype.visitTimeNanosecond=Zt;Kt.prototype.visitDecimal=Zt;Kt.prototype.visitList=Zt;Kt.prototype.visitStruct=Zt;Kt.prototype.visitUnion=Zt;Kt.prototype.visitDenseUnion=Zt;Kt.prototype.visitSparseUnion=Zt;Kt.prototype.visitDictionary=Zt;Kt.prototype.visitInterval=Zt;Kt.prototype.visitIntervalDayTime=Zt;Kt.prototype.visitIntervalYearMonth=Zt;Kt.prototype.visitDuration=Zt;Kt.prototype.visitDurationSecond=Zt;Kt.prototype.visitDurationMillisecond=Zt;Kt.prototype.visitDurationMicrosecond=Zt;Kt.prototype.visitDurationNanosecond=Zt;Kt.prototype.visitFixedSizeList=Zt;Kt.prototype.visitMap=Zt;const VX=new Kt,m1t=(e,t)=>e+t;class Vy extends Cn{visitNull(t,n){return 0}visitInt(t,n){return t.type.bitWidth/8}visitFloat(t,n){return t.type.ArrayType.BYTES_PER_ELEMENT}visitBool(t,n){return 1/8}visitDecimal(t,n){return t.type.bitWidth/8}visitDate(t,n){return(t.type.unit+1)*4}visitTime(t,n){return t.type.bitWidth/8}visitTimestamp(t,n){return t.type.unit===Wt.SECOND?4:8}visitInterval(t,n){return(t.type.unit+1)*4}visitDuration(t,n){return 8}visitStruct(t,n){return t.children.reduce((r,i)=>r+Dh.visit(i,n),0)}visitFixedSizeBinary(t,n){return t.type.byteWidth}visitMap(t,n){return 8+t.children.reduce((r,i)=>r+Dh.visit(i,n),0)}visitDictionary(t,n){var r;return t.type.indices.bitWidth/8+(((r=t.dictionary)===null||r===void 0?void 0:r.getByteLength(t.values[n]))||0)}}const g1t=({valueOffsets:e},t)=>8+(e[t+1]-e[t]),y1t=({valueOffsets:e},t)=>8+(e[t+1]-e[t]),v1t=({valueOffsets:e,stride:t,children:n},r)=>{const i=n[0],{[r*t]:s}=e,{[r*t+1]:o}=e,a=Dh.getVisitFn(i.type),u=i.slice(s,o-s);let l=8;for(let c=-1,f=o-s;++c<f;)l+=a(u,c);return l},b1t=({stride:e,children:t},n)=>{const r=t[0],i=r.slice(n*e,e),s=Dh.getVisitFn(r.type);let o=0;for(let a=-1,u=i.length;++a<u;)o+=s(i,a);return o},_1t=(e,t)=>e.type.mode===Zu.Dense?TAe(e,t):CAe(e,t),TAe=({type:e,children:t,typeIds:n,valueOffsets:r},i)=>{const s=e.typeIdToChildIndex[n[i]];return 8+Dh.visit(t[s],r[i])},CAe=({children:e},t)=>4+Dh.visitMany(e,e.map(()=>t)).reduce(m1t,0);Vy.prototype.visitUtf8=g1t;Vy.prototype.visitBinary=y1t;Vy.prototype.visitList=v1t;Vy.prototype.visitFixedSizeList=b1t;Vy.prototype.visitUnion=_1t;Vy.prototype.visitDenseUnion=TAe;Vy.prototype.visitSparseUnion=CAe;const Dh=new Vy;var AAe;const IAe={},kAe={};class hr{constructor(t){var n,r,i;const s=t[0]instanceof hr?t.flatMap(a=>a.data):t;if(s.length===0||s.some(a=>!(a instanceof Nr)))throw new TypeError("Vector constructor expects an Array of Data instances.");const o=(n=s[0])===null||n===void 0?void 0:n.type;switch(s.length){case 0:this._offsets=[0];break;case 1:{const{get:a,set:u,indexOf:l,byteLength:c}=IAe[o.typeId],f=s[0];this.isValid=d=>zX(f,d),this.get=d=>a(f,d),this.set=(d,h)=>u(f,d,h),this.indexOf=d=>l(f,d),this.getByteLength=d=>c(f,d),this._offsets=[0,f.length];break}default:Object.setPrototypeOf(this,kAe[o.typeId]),this._offsets=_Ae(s);break}this.data=s,this.type=o,this.stride=$d(o),this.numChildren=(i=(r=o.children)===null||r===void 0?void 0:r.length)!==null&&i!==void 0?i:0,this.length=this._offsets.at(-1)}get byteLength(){return this.data.reduce((t,n)=>t+n.byteLength,0)}get nullCount(){return bAe(this.data)}get ArrayType(){return this.type.ArrayType}get[Symbol.toStringTag](){return`${this.VectorName}<${this.type[Symbol.toStringTag]}>`}get VectorName(){return`${re[this.type.typeId]}Vector`}isValid(t){return!1}get(t){return null}set(t,n){}indexOf(t,n){return-1}includes(t,n){return this.indexOf(t,n)>-1}getByteLength(t){return 0}[Symbol.iterator](){return VX.visit(this)}concat(...t){return new hr(this.data.concat(t.flatMap(n=>n.data).flat(Number.POSITIVE_INFINITY)))}slice(t,n){return new hr(gAe(this,t,n,({data:r,_offsets:i},s,o)=>wAe(r,i,s,o)))}toJSON(){return[...this]}toArray(){const{type:t,data:n,length:r,stride:i,ArrayType:s}=this;switch(t.typeId){case re.Int:case re.Float:case re.Decimal:case re.Time:case re.Timestamp:switch(n.length){case 0:return new s;case 1:return n[0].values.subarray(0,r*i);default:return n.reduce((o,{values:a,length:u})=>(o.array.set(a.subarray(0,u*i),o.offset),o.offset+=u*i,o),{array:new s(r*i),offset:0}).array}}return[...this]}toString(){return`[${[...this].join(",")}]`}getChild(t){var n;return this.getChildAt((n=this.type.children)===null||n===void 0?void 0:n.findIndex(r=>r.name===t))}getChildAt(t){return t>-1&&t<this.numChildren?new hr(this.data.map(({children:n})=>n[t])):null}get isMemoized(){return Sn.isDictionary(this.type)?this.data[0].dictionary.isMemoized:!1}memoize(){if(Sn.isDictionary(this.type)){const t=new l$(this.data[0].dictionary),n=this.data.map(r=>{const i=r.clone();return i.dictionary=t,i});return new hr(n)}return new l$(this)}unmemoize(){if(Sn.isDictionary(this.type)&&this.isMemoized){const t=this.data[0].dictionary.unmemoize(),n=this.data.map(r=>{const i=r.clone();return i.dictionary=t,i});return new hr(n)}return this}}AAe=Symbol.toStringTag;hr[AAe]=(e=>{e.type=Sn.prototype,e.data=[],e.length=0,e.stride=1,e.numChildren=0,e._offsets=new Uint32Array([0]),e[Symbol.isConcatSpreadable]=!0;const t=Object.keys(re).map(n=>re[n]).filter(n=>typeof n=="number"&&n!==re.NONE);for(const n of t){const r=el.getVisitFnByTypeId(n),i=Mc.getVisitFnByTypeId(n),s=u$.getVisitFnByTypeId(n),o=Dh.getVisitFnByTypeId(n);IAe[n]={get:r,set:i,indexOf:s,byteLength:o},kAe[n]=Object.create(e,{isValid:{value:sE(zX)},get:{value:sE(el.getVisitFnByTypeId(n))},set:{value:EAe(Mc.getVisitFnByTypeId(n))},indexOf:{value:xAe(u$.getVisitFnByTypeId(n))},getByteLength:{value:sE(Dh.getVisitFnByTypeId(n))}})}return"Vector"})(hr.prototype);class l$ extends hr{constructor(t){super(t.data);const n=this.get,r=this.set,i=this.slice,s=new Array(this.length);Object.defineProperty(this,"get",{value(o){const a=s[o];if(a!==void 0)return a;const u=n.call(this,o);return s[o]=u,u}}),Object.defineProperty(this,"set",{value(o,a){r.call(this,o,a),s[o]=a}}),Object.defineProperty(this,"slice",{value:(o,a)=>new l$(i.call(this,o,a))}),Object.defineProperty(this,"isMemoized",{value:!0}),Object.defineProperty(this,"unmemoize",{value:()=>new hr(this.data)}),Object.defineProperty(this,"memoize",{value:()=>this})}}function w1t(e){if(!e||e.length<=0)return function(i){return!0};let t="";const n=e.filter(r=>r===r);return n.length>0&&(t=`
    switch (x) {${n.map(r=>`
        case ${E1t(r)}:`).join("")}
            return false;
    }`),e.length!==n.length&&(t=`if (x !== x) return false;
${t}`),new Function("x",`${t}
return true;`)}function E1t(e){return typeof e!="bigint"?Q1(e):`${Q1(e)}n`}const K8=(e,t)=>(Math.ceil(e)*t+63&-64||64)/t,x1t=(e,t=0)=>e.length>=t?e.subarray(0,t):n$(new e.constructor(t),e,0);class Q6{constructor(t,n=1){this.buffer=t,this.stride=n,this.BYTES_PER_ELEMENT=t.BYTES_PER_ELEMENT,this.ArrayType=t.constructor,this._resize(this.length=Math.ceil(t.length/n))}get byteLength(){return Math.ceil(this.length*this.stride)*this.BYTES_PER_ELEMENT}get reservedLength(){return this.buffer.length/this.stride}get reservedByteLength(){return this.buffer.byteLength}set(t,n){return this}append(t){return this.set(this.length,t)}reserve(t){if(t>0){this.length+=t;const n=this.stride,r=this.length*n,i=this.buffer.length;r>=i&&this._resize(i===0?K8(r*1,this.BYTES_PER_ELEMENT):K8(r*2,this.BYTES_PER_ELEMENT))}return this}flush(t=this.length){t=K8(t*this.stride,this.BYTES_PER_ELEMENT);const n=x1t(this.buffer,t);return this.clear(),n}clear(){return this.length=0,this._resize(0),this}_resize(t){return this.buffer=n$(new this.ArrayType(t),this.buffer)}}Q6.prototype.offset=0;class Pk extends Q6{last(){return this.get(this.length-1)}get(t){return this.buffer[t]}set(t,n){return this.reserve(t-this.length+1),this.buffer[t*this.stride]=n,this}}class RAe extends Pk{constructor(t=new Uint8Array(0)){super(t,1/8),this.numValid=0}get numInvalid(){return this.length-this.numValid}get(t){return this.buffer[t>>3]>>t%8&1}set(t,n){const{buffer:r}=this.reserve(t-this.length+1),i=t>>3,s=t%8,o=r[i]>>s&1;return n?o===0&&(r[i]|=1<<s,++this.numValid):o===1&&(r[i]&=~(1<<s),--this.numValid),this}clear(){return this.numValid=0,super.clear()}}class NAe extends Pk{constructor(t=new Int32Array(1)){super(t,1)}append(t){return this.set(this.length-1,t)}set(t,n){const r=this.length-1,i=this.reserve(t-r+1).buffer;return r<t++&&i.fill(i[r],r,t),i[t]=i[t-1]+n,this}flush(t=this.length-1){return t>this.length&&this.set(t-1,0),super.flush(t+1)}}let al=class{static throughNode(t){throw new Error('"throughNode" not available in this environment')}static throughDOM(t){throw new Error('"throughDOM" not available in this environment')}constructor({type:t,nullValues:n}){this.length=0,this.finished=!1,this.type=t,this.children=[],this.nullValues=n,this.stride=$d(t),this._nulls=new RAe,n&&n.length>0&&(this._isValid=w1t(n))}toVector(){return new hr([this.flush()])}get ArrayType(){return this.type.ArrayType}get nullCount(){return this._nulls.numInvalid}get numChildren(){return this.children.length}get byteLength(){let t=0;const{_offsets:n,_values:r,_nulls:i,_typeIds:s,children:o}=this;return n&&(t+=n.byteLength),r&&(t+=r.byteLength),i&&(t+=i.byteLength),s&&(t+=s.byteLength),o.reduce((a,u)=>a+u.byteLength,t)}get reservedLength(){return this._nulls.reservedLength}get reservedByteLength(){let t=0;return this._offsets&&(t+=this._offsets.reservedByteLength),this._values&&(t+=this._values.reservedByteLength),this._nulls&&(t+=this._nulls.reservedByteLength),this._typeIds&&(t+=this._typeIds.reservedByteLength),this.children.reduce((n,r)=>n+r.reservedByteLength,t)}get valueOffsets(){return this._offsets?this._offsets.buffer:null}get values(){return this._values?this._values.buffer:null}get nullBitmap(){return this._nulls?this._nulls.buffer:null}get typeIds(){return this._typeIds?this._typeIds.buffer:null}append(t){return this.set(this.length,t)}isValid(t){return this._isValid(t)}set(t,n){return this.setValid(t,this.isValid(n))&&this.setValue(t,n),this}setValue(t,n){this._setValue(this,t,n)}setValid(t,n){return this.length=this._nulls.set(t,+n).length,n}addChild(t,n=`${this.numChildren}`){throw new Error(`Cannot append children to non-nested type "${this.type}"`)}getChildAt(t){return this.children[t]||null}flush(){let t,n,r,i;const{type:s,length:o,nullCount:a,_typeIds:u,_offsets:l,_values:c,_nulls:f}=this;(n=u==null?void 0:u.flush(o))?i=l==null?void 0:l.flush(o):(i=l==null?void 0:l.flush(o))?t=c==null?void 0:c.flush(l.last()):t=c==null?void 0:c.flush(o),a>0&&(r=f==null?void 0:f.flush(o));const d=this.children.map(h=>h.flush());return this.clear(),aa({type:s,length:o,nullCount:a,children:d,child:d[0],data:t,typeIds:n,nullBitmap:r,valueOffsets:i})}finish(){this.finished=!0;for(const t of this.children)t.finish();return this}clear(){var t,n,r,i;this.length=0,(t=this._nulls)===null||t===void 0||t.clear(),(n=this._values)===null||n===void 0||n.clear(),(r=this._offsets)===null||r===void 0||r.clear(),(i=this._typeIds)===null||i===void 0||i.clear();for(const s of this.children)s.clear();return this}};al.prototype.length=1;al.prototype.stride=1;al.prototype.children=null;al.prototype.finished=!1;al.prototype.nullValues=null;al.prototype._isValid=()=>!0;class tg extends al{constructor(t){super(t),this._values=new Pk(new this.ArrayType(0),this.stride)}setValue(t,n){const r=this._values;return r.reserve(t-r.length+1),super.setValue(t,n)}}class J6 extends al{constructor(t){super(t),this._pendingLength=0,this._offsets=new NAe}setValue(t,n){const r=this._pending||(this._pending=new Map),i=r.get(t);i&&(this._pendingLength-=i.length),this._pendingLength+=n instanceof K6?n[Sf].length:n.length,r.set(t,n)}setValid(t,n){return super.setValid(t,n)?!0:((this._pending||(this._pending=new Map)).set(t,void 0),!1)}clear(){return this._pendingLength=0,this._pending=void 0,super.clear()}flush(){return this._flush(),super.flush()}finish(){return this._flush(),super.finish()}_flush(){const t=this._pending,n=this._pendingLength;return this._pendingLength=0,this._pending=void 0,t&&t.size>0&&this._flushPending(t,n),this}}class Rz{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}offset(){return this.bb.readInt64(this.bb_pos)}metaDataLength(){return this.bb.readInt32(this.bb_pos+8)}bodyLength(){return this.bb.readInt64(this.bb_pos+16)}static sizeOf(){return 24}static createBlock(t,n,r,i){return t.prep(8,24),t.writeInt64(BigInt(i??0)),t.pad(4),t.writeInt32(r),t.writeInt64(BigInt(n??0)),t.offset()}}const X8=2,Hd=4,Bp=4,zr=4,Pg=new Int32Array(2),Xce=new Float32Array(Pg.buffer),Qce=new Float64Array(Pg.buffer),eD=new Uint16Array(new Uint8Array([1,0]).buffer)[0]===1;var Nz;(function(e){e[e.UTF8_BYTES=1]="UTF8_BYTES",e[e.UTF16_STRING=2]="UTF16_STRING"})(Nz||(Nz={}));let c$=class DAe{constructor(t){this.bytes_=t,this.position_=0,this.text_decoder_=new TextDecoder}static allocate(t){return new DAe(new Uint8Array(t))}clear(){this.position_=0}bytes(){return this.bytes_}position(){return this.position_}setPosition(t){this.position_=t}capacity(){return this.bytes_.length}readInt8(t){return this.readUint8(t)<<24>>24}readUint8(t){return this.bytes_[t]}readInt16(t){return this.readUint16(t)<<16>>16}readUint16(t){return this.bytes_[t]|this.bytes_[t+1]<<8}readInt32(t){return this.bytes_[t]|this.bytes_[t+1]<<8|this.bytes_[t+2]<<16|this.bytes_[t+3]<<24}readUint32(t){return this.readInt32(t)>>>0}readInt64(t){return BigInt.asIntN(64,BigInt(this.readUint32(t))+(BigInt(this.readUint32(t+4))<<BigInt(32)))}readUint64(t){return BigInt.asUintN(64,BigInt(this.readUint32(t))+(BigInt(this.readUint32(t+4))<<BigInt(32)))}readFloat32(t){return Pg[0]=this.readInt32(t),Xce[0]}readFloat64(t){return Pg[eD?0:1]=this.readInt32(t),Pg[eD?1:0]=this.readInt32(t+4),Qce[0]}writeInt8(t,n){this.bytes_[t]=n}writeUint8(t,n){this.bytes_[t]=n}writeInt16(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8}writeUint16(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8}writeInt32(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8,this.bytes_[t+2]=n>>16,this.bytes_[t+3]=n>>24}writeUint32(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8,this.bytes_[t+2]=n>>16,this.bytes_[t+3]=n>>24}writeInt64(t,n){this.writeInt32(t,Number(BigInt.asIntN(32,n))),this.writeInt32(t+4,Number(BigInt.asIntN(32,n>>BigInt(32))))}writeUint64(t,n){this.writeUint32(t,Number(BigInt.asUintN(32,n))),this.writeUint32(t+4,Number(BigInt.asUintN(32,n>>BigInt(32))))}writeFloat32(t,n){Xce[0]=n,this.writeInt32(t,Pg[0])}writeFloat64(t,n){Qce[0]=n,this.writeInt32(t,Pg[eD?0:1]),this.writeInt32(t+4,Pg[eD?1:0])}getBufferIdentifier(){if(this.bytes_.length<this.position_+Hd+Bp)throw new Error("FlatBuffers: ByteBuffer is too short to contain an identifier.");let t="";for(let n=0;n<Bp;n++)t+=String.fromCharCode(this.readInt8(this.position_+Hd+n));return t}__offset(t,n){const r=t-this.readInt32(t);return n<this.readInt16(r)?this.readInt16(r+n):0}__union(t,n){return t.bb_pos=n+this.readInt32(n),t.bb=this,t}__string(t,n){t+=this.readInt32(t);const r=this.readInt32(t);t+=Hd;const i=this.bytes_.subarray(t,t+r);return n===Nz.UTF8_BYTES?i:this.text_decoder_.decode(i)}__union_with_string(t,n){return typeof t=="string"?this.__string(n):this.__union(t,n)}__indirect(t){return t+this.readInt32(t)}__vector(t){return t+this.readInt32(t)+Hd}__vector_len(t){return this.readInt32(t+this.readInt32(t))}__has_identifier(t){if(t.length!=Bp)throw new Error("FlatBuffers: file identifier must be length "+Bp);for(let n=0;n<Bp;n++)if(t.charCodeAt(n)!=this.readInt8(this.position()+Hd+n))return!1;return!0}createScalarList(t,n){const r=[];for(let i=0;i<n;++i){const s=t(i);s!==null&&r.push(s)}return r}createObjList(t,n){const r=[];for(let i=0;i<n;++i){const s=t(i);s!==null&&r.push(s.unpack())}return r}},PAe=class OAe{constructor(t){this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null,this.text_encoder=new TextEncoder;let n;t?n=t:n=1024,this.bb=c$.allocate(n),this.space=n}clear(){this.bb.clear(),this.space=this.bb.capacity(),this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null}forceDefaults(t){this.force_defaults=t}dataBuffer(){return this.bb}asUint8Array(){return this.bb.bytes().subarray(this.bb.position(),this.bb.position()+this.offset())}prep(t,n){t>this.minalign&&(this.minalign=t);const r=~(this.bb.capacity()-this.space+n)+1&t-1;for(;this.space<r+t+n;){const i=this.bb.capacity();this.bb=OAe.growByteBuffer(this.bb),this.space+=this.bb.capacity()-i}this.pad(r)}pad(t){for(let n=0;n<t;n++)this.bb.writeInt8(--this.space,0)}writeInt8(t){this.bb.writeInt8(this.space-=1,t)}writeInt16(t){this.bb.writeInt16(this.space-=2,t)}writeInt32(t){this.bb.writeInt32(this.space-=4,t)}writeInt64(t){this.bb.writeInt64(this.space-=8,t)}writeFloat32(t){this.bb.writeFloat32(this.space-=4,t)}writeFloat64(t){this.bb.writeFloat64(this.space-=8,t)}addInt8(t){this.prep(1,0),this.writeInt8(t)}addInt16(t){this.prep(2,0),this.writeInt16(t)}addInt32(t){this.prep(4,0),this.writeInt32(t)}addInt64(t){this.prep(8,0),this.writeInt64(t)}addFloat32(t){this.prep(4,0),this.writeFloat32(t)}addFloat64(t){this.prep(8,0),this.writeFloat64(t)}addFieldInt8(t,n,r){(this.force_defaults||n!=r)&&(this.addInt8(n),this.slot(t))}addFieldInt16(t,n,r){(this.force_defaults||n!=r)&&(this.addInt16(n),this.slot(t))}addFieldInt32(t,n,r){(this.force_defaults||n!=r)&&(this.addInt32(n),this.slot(t))}addFieldInt64(t,n,r){(this.force_defaults||n!==r)&&(this.addInt64(n),this.slot(t))}addFieldFloat32(t,n,r){(this.force_defaults||n!=r)&&(this.addFloat32(n),this.slot(t))}addFieldFloat64(t,n,r){(this.force_defaults||n!=r)&&(this.addFloat64(n),this.slot(t))}addFieldOffset(t,n,r){(this.force_defaults||n!=r)&&(this.addOffset(n),this.slot(t))}addFieldStruct(t,n,r){n!=r&&(this.nested(n),this.slot(t))}nested(t){if(t!=this.offset())throw new TypeError("FlatBuffers: struct must be serialized inline.")}notNested(){if(this.isNested)throw new TypeError("FlatBuffers: object serialization must not be nested.")}slot(t){this.vtable!==null&&(this.vtable[t]=this.offset())}offset(){return this.bb.capacity()-this.space}static growByteBuffer(t){const n=t.capacity();if(n&3221225472)throw new Error("FlatBuffers: cannot grow buffer beyond 2 gigabytes.");const r=n<<1,i=c$.allocate(r);return i.setPosition(r-n),i.bytes().set(t.bytes(),r-n),i}addOffset(t){this.prep(Hd,0),this.writeInt32(this.offset()-t+Hd)}startObject(t){this.notNested(),this.vtable==null&&(this.vtable=[]),this.vtable_in_use=t;for(let n=0;n<t;n++)this.vtable[n]=0;this.isNested=!0,this.object_start=this.offset()}endObject(){if(this.vtable==null||!this.isNested)throw new Error("FlatBuffers: endObject called without startObject");this.addInt32(0);const t=this.offset();let n=this.vtable_in_use-1;for(;n>=0&&this.vtable[n]==0;n--);const r=n+1;for(;n>=0;n--)this.addInt16(this.vtable[n]!=0?t-this.vtable[n]:0);const i=2;this.addInt16(t-this.object_start);const s=(r+i)*X8;this.addInt16(s);let o=0;const a=this.space;e:for(n=0;n<this.vtables.length;n++){const u=this.bb.capacity()-this.vtables[n];if(s==this.bb.readInt16(u)){for(let l=X8;l<s;l+=X8)if(this.bb.readInt16(a+l)!=this.bb.readInt16(u+l))continue e;o=this.vtables[n];break}}return o?(this.space=this.bb.capacity()-t,this.bb.writeInt32(this.space,o-t)):(this.vtables.push(this.offset()),this.bb.writeInt32(this.bb.capacity()-t,this.offset()-t)),this.isNested=!1,t}finish(t,n,r){const i=r?zr:0;if(n){const s=n;if(this.prep(this.minalign,Hd+Bp+i),s.length!=Bp)throw new TypeError("FlatBuffers: file identifier must be length "+Bp);for(let o=Bp-1;o>=0;o--)this.writeInt8(s.charCodeAt(o))}this.prep(this.minalign,Hd+i),this.addOffset(t),i&&this.addInt32(this.bb.capacity()-this.space),this.bb.setPosition(this.space)}finishSizePrefixed(t,n){this.finish(t,n,!0)}requiredField(t,n){const r=this.bb.capacity()-t,i=r-this.bb.readInt32(r);if(!(n<this.bb.readInt16(i)&&this.bb.readInt16(i+n)!=0))throw new TypeError("FlatBuffers: field "+n+" must be set")}startVector(t,n,r){this.notNested(),this.vector_num_elems=n,this.prep(Hd,t*n),this.prep(r,t*n)}endVector(){return this.writeInt32(this.vector_num_elems),this.offset()}createSharedString(t){if(!t)return 0;if(this.string_maps||(this.string_maps=new Map),this.string_maps.has(t))return this.string_maps.get(t);const n=this.createString(t);return this.string_maps.set(t,n),n}createString(t){if(t==null)return 0;let n;t instanceof Uint8Array?n=t:n=this.text_encoder.encode(t),this.addInt8(0),this.startVector(1,n.length,1),this.bb.setPosition(this.space-=n.length);for(let r=0,i=this.space,s=this.bb.bytes();r<n.length;r++)s[i++]=n[r];return this.endVector()}createObjectOffset(t){return t===null?0:typeof t=="string"?this.createString(t):t.pack(this)}createObjectOffsetList(t){const n=[];for(let r=0;r<t.length;++r){const i=t[r];if(i!==null)n.push(this.createObjectOffset(i));else throw new TypeError("FlatBuffers: Argument for createObjectOffsetList cannot contain null.")}return n}createStructOffsetList(t,n){return n(this,t.length),this.createObjectOffsetList(t.slice().reverse()),this.endVector()}};class Rs{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsKeyValue(t,n){return(n||new Rs).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsKeyValue(t,n){return t.setPosition(t.position()+zr),(n||new Rs).__init(t.readInt32(t.position())+t.position(),t)}key(t){const n=this.bb.__offset(this.bb_pos,4);return n?this.bb.__string(this.bb_pos+n,t):null}value(t){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.__string(this.bb_pos+n,t):null}static startKeyValue(t){t.startObject(2)}static addKey(t,n){t.addFieldOffset(0,n,0)}static addValue(t,n){t.addFieldOffset(1,n,0)}static endKeyValue(t){return t.endObject()}static createKeyValue(t,n,r){return Rs.startKeyValue(t),Rs.addKey(t,n),Rs.addValue(t,r),Rs.endKeyValue(t)}}var sx;(function(e){e[e.V1=0]="V1",e[e.V2=1]="V2",e[e.V3=2]="V3",e[e.V4=3]="V4",e[e.V5=4]="V5"})(sx||(sx={}));var ox;(function(e){e[e.Little=0]="Little",e[e.Big=1]="Big"})(ox||(ox={}));var f$;(function(e){e[e.DenseArray=0]="DenseArray"})(f$||(f$={}));class bl{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsInt(t,n){return(n||new bl).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsInt(t,n){return t.setPosition(t.position()+zr),(n||new bl).__init(t.readInt32(t.position())+t.position(),t)}bitWidth(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}isSigned(){const t=this.bb.__offset(this.bb_pos,6);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startInt(t){t.startObject(2)}static addBitWidth(t,n){t.addFieldInt32(0,n,0)}static addIsSigned(t,n){t.addFieldInt8(1,+n,0)}static endInt(t){return t.endObject()}static createInt(t,n,r){return bl.startInt(t),bl.addBitWidth(t,n),bl.addIsSigned(t,r),bl.endInt(t)}}class Up{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDictionaryEncoding(t,n){return(n||new Up).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDictionaryEncoding(t,n){return t.setPosition(t.position()+zr),(n||new Up).__init(t.readInt32(t.position())+t.position(),t)}id(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}indexType(t){const n=this.bb.__offset(this.bb_pos,6);return n?(t||new bl).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}isOrdered(){const t=this.bb.__offset(this.bb_pos,8);return t?!!this.bb.readInt8(this.bb_pos+t):!1}dictionaryKind(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readInt16(this.bb_pos+t):f$.DenseArray}static startDictionaryEncoding(t){t.startObject(4)}static addId(t,n){t.addFieldInt64(0,n,BigInt("0"))}static addIndexType(t,n){t.addFieldOffset(1,n,0)}static addIsOrdered(t,n){t.addFieldInt8(2,+n,0)}static addDictionaryKind(t,n){t.addFieldInt16(3,n,f$.DenseArray)}static endDictionaryEncoding(t){return t.endObject()}}class c1{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsBinary(t,n){return(n||new c1).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBinary(t,n){return t.setPosition(t.position()+zr),(n||new c1).__init(t.readInt32(t.position())+t.position(),t)}static startBinary(t){t.startObject(0)}static endBinary(t){return t.endObject()}static createBinary(t){return c1.startBinary(t),c1.endBinary(t)}}class f1{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsBool(t,n){return(n||new f1).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBool(t,n){return t.setPosition(t.position()+zr),(n||new f1).__init(t.readInt32(t.position())+t.position(),t)}static startBool(t){t.startObject(0)}static endBool(t){return t.endObject()}static createBool(t){return f1.startBool(t),f1.endBool(t)}}var d$;(function(e){e[e.DAY=0]="DAY",e[e.MILLISECOND=1]="MILLISECOND"})(d$||(d$={}));let AP=class iw{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDate(t,n){return(n||new iw).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDate(t,n){return t.setPosition(t.position()+zr),(n||new iw).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):d$.MILLISECOND}static startDate(t){t.startObject(1)}static addUnit(t,n){t.addFieldInt16(0,n,d$.MILLISECOND)}static endDate(t){return t.endObject()}static createDate(t,n){return iw.startDate(t),iw.addUnit(t,n),iw.endDate(t)}};class xu{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDecimal(t,n){return(n||new xu).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDecimal(t,n){return t.setPosition(t.position()+zr),(n||new xu).__init(t.readInt32(t.position())+t.position(),t)}precision(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}scale(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt32(this.bb_pos+t):0}bitWidth(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readInt32(this.bb_pos+t):128}static startDecimal(t){t.startObject(3)}static addPrecision(t,n){t.addFieldInt32(0,n,0)}static addScale(t,n){t.addFieldInt32(1,n,0)}static addBitWidth(t,n){t.addFieldInt32(2,n,128)}static endDecimal(t){return t.endObject()}static createDecimal(t,n,r,i){return xu.startDecimal(t),xu.addPrecision(t,n),xu.addScale(t,r),xu.addBitWidth(t,i),xu.endDecimal(t)}}var Q0;(function(e){e[e.SECOND=0]="SECOND",e[e.MILLISECOND=1]="MILLISECOND",e[e.MICROSECOND=2]="MICROSECOND",e[e.NANOSECOND=3]="NANOSECOND"})(Q0||(Q0={}));class qd{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDuration(t,n){return(n||new qd).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDuration(t,n){return t.setPosition(t.position()+zr),(n||new qd).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Q0.MILLISECOND}static startDuration(t){t.startObject(1)}static addUnit(t,n){t.addFieldInt16(0,n,Q0.MILLISECOND)}static endDuration(t){return t.endObject()}static createDuration(t,n){return qd.startDuration(t),qd.addUnit(t,n),qd.endDuration(t)}}class Wd{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFixedSizeBinary(t,n){return(n||new Wd).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFixedSizeBinary(t,n){return t.setPosition(t.position()+zr),(n||new Wd).__init(t.readInt32(t.position())+t.position(),t)}byteWidth(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}static startFixedSizeBinary(t){t.startObject(1)}static addByteWidth(t,n){t.addFieldInt32(0,n,0)}static endFixedSizeBinary(t){return t.endObject()}static createFixedSizeBinary(t,n){return Wd.startFixedSizeBinary(t),Wd.addByteWidth(t,n),Wd.endFixedSizeBinary(t)}}class Gd{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFixedSizeList(t,n){return(n||new Gd).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFixedSizeList(t,n){return t.setPosition(t.position()+zr),(n||new Gd).__init(t.readInt32(t.position())+t.position(),t)}listSize(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}static startFixedSizeList(t){t.startObject(1)}static addListSize(t,n){t.addFieldInt32(0,n,0)}static endFixedSizeList(t){return t.endObject()}static createFixedSizeList(t,n){return Gd.startFixedSizeList(t),Gd.addListSize(t,n),Gd.endFixedSizeList(t)}}var h$;(function(e){e[e.HALF=0]="HALF",e[e.SINGLE=1]="SINGLE",e[e.DOUBLE=2]="DOUBLE"})(h$||(h$={}));class Yd{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFloatingPoint(t,n){return(n||new Yd).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFloatingPoint(t,n){return t.setPosition(t.position()+zr),(n||new Yd).__init(t.readInt32(t.position())+t.position(),t)}precision(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):h$.HALF}static startFloatingPoint(t){t.startObject(1)}static addPrecision(t,n){t.addFieldInt16(0,n,h$.HALF)}static endFloatingPoint(t){return t.endObject()}static createFloatingPoint(t,n){return Yd.startFloatingPoint(t),Yd.addPrecision(t,n),Yd.endFloatingPoint(t)}}var p$;(function(e){e[e.YEAR_MONTH=0]="YEAR_MONTH",e[e.DAY_TIME=1]="DAY_TIME",e[e.MONTH_DAY_NANO=2]="MONTH_DAY_NANO"})(p$||(p$={}));class Kd{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsInterval(t,n){return(n||new Kd).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsInterval(t,n){return t.setPosition(t.position()+zr),(n||new Kd).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):p$.YEAR_MONTH}static startInterval(t){t.startObject(1)}static addUnit(t,n){t.addFieldInt16(0,n,p$.YEAR_MONTH)}static endInterval(t){return t.endObject()}static createInterval(t,n){return Kd.startInterval(t),Kd.addUnit(t,n),Kd.endInterval(t)}}class d1{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsList(t,n){return(n||new d1).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsList(t,n){return t.setPosition(t.position()+zr),(n||new d1).__init(t.readInt32(t.position())+t.position(),t)}static startList(t){t.startObject(0)}static endList(t){return t.endObject()}static createList(t){return d1.startList(t),d1.endList(t)}}let IP=class sw{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsMap(t,n){return(n||new sw).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsMap(t,n){return t.setPosition(t.position()+zr),(n||new sw).__init(t.readInt32(t.position())+t.position(),t)}keysSorted(){const t=this.bb.__offset(this.bb_pos,4);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startMap(t){t.startObject(1)}static addKeysSorted(t,n){t.addFieldInt8(0,+n,0)}static endMap(t){return t.endObject()}static createMap(t,n){return sw.startMap(t),sw.addKeysSorted(t,n),sw.endMap(t)}};class h1{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsNull(t,n){return(n||new h1).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsNull(t,n){return t.setPosition(t.position()+zr),(n||new h1).__init(t.readInt32(t.position())+t.position(),t)}static startNull(t){t.startObject(0)}static endNull(t){return t.endObject()}static createNull(t){return h1.startNull(t),h1.endNull(t)}}class p1{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsStruct_(t,n){return(n||new p1).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsStruct_(t,n){return t.setPosition(t.position()+zr),(n||new p1).__init(t.readInt32(t.position())+t.position(),t)}static startStruct_(t){t.startObject(0)}static endStruct_(t){return t.endObject()}static createStruct_(t){return p1.startStruct_(t),p1.endStruct_(t)}}let D2=class Rv{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsTime(t,n){return(n||new Rv).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsTime(t,n){return t.setPosition(t.position()+zr),(n||new Rv).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Q0.MILLISECOND}bitWidth(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt32(this.bb_pos+t):32}static startTime(t){t.startObject(2)}static addUnit(t,n){t.addFieldInt16(0,n,Q0.MILLISECOND)}static addBitWidth(t,n){t.addFieldInt32(1,n,32)}static endTime(t){return t.endObject()}static createTime(t,n,r){return Rv.startTime(t),Rv.addUnit(t,n),Rv.addBitWidth(t,r),Rv.endTime(t)}},P2=class Nv{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsTimestamp(t,n){return(n||new Nv).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsTimestamp(t,n){return t.setPosition(t.position()+zr),(n||new Nv).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Q0.SECOND}timezone(t){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.__string(this.bb_pos+n,t):null}static startTimestamp(t){t.startObject(2)}static addUnit(t,n){t.addFieldInt16(0,n,Q0.SECOND)}static addTimezone(t,n){t.addFieldOffset(1,n,0)}static endTimestamp(t){return t.endObject()}static createTimestamp(t,n,r){return Nv.startTimestamp(t),Nv.addUnit(t,n),Nv.addTimezone(t,r),Nv.endTimestamp(t)}};var m$;(function(e){e[e.Sparse=0]="Sparse",e[e.Dense=1]="Dense"})(m$||(m$={}));let Dv=class Pv{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsUnion(t,n){return(n||new Pv).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsUnion(t,n){return t.setPosition(t.position()+zr),(n||new Pv).__init(t.readInt32(t.position())+t.position(),t)}mode(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):m$.Sparse}typeIds(t){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.readInt32(this.bb.__vector(this.bb_pos+n)+t*4):0}typeIdsLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}typeIdsArray(){const t=this.bb.__offset(this.bb_pos,6);return t?new Int32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}static startUnion(t){t.startObject(2)}static addMode(t,n){t.addFieldInt16(0,n,m$.Sparse)}static addTypeIds(t,n){t.addFieldOffset(1,n,0)}static createTypeIdsVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addInt32(n[r]);return t.endVector()}static startTypeIdsVector(t,n){t.startVector(4,n,4)}static endUnion(t){return t.endObject()}static createUnion(t,n,r){return Pv.startUnion(t),Pv.addMode(t,n),Pv.addTypeIds(t,r),Pv.endUnion(t)}};class m1{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsUtf8(t,n){return(n||new m1).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsUtf8(t,n){return t.setPosition(t.position()+zr),(n||new m1).__init(t.readInt32(t.position())+t.position(),t)}static startUtf8(t){t.startObject(0)}static endUtf8(t){return t.endObject()}static createUtf8(t){return m1.startUtf8(t),m1.endUtf8(t)}}var bi;(function(e){e[e.NONE=0]="NONE",e[e.Null=1]="Null",e[e.Int=2]="Int",e[e.FloatingPoint=3]="FloatingPoint",e[e.Binary=4]="Binary",e[e.Utf8=5]="Utf8",e[e.Bool=6]="Bool",e[e.Decimal=7]="Decimal",e[e.Date=8]="Date",e[e.Time=9]="Time",e[e.Timestamp=10]="Timestamp",e[e.Interval=11]="Interval",e[e.List=12]="List",e[e.Struct_=13]="Struct_",e[e.Union=14]="Union",e[e.FixedSizeBinary=15]="FixedSizeBinary",e[e.FixedSizeList=16]="FixedSizeList",e[e.Map=17]="Map",e[e.Duration=18]="Duration",e[e.LargeBinary=19]="LargeBinary",e[e.LargeUtf8=20]="LargeUtf8",e[e.LargeList=21]="LargeList",e[e.RunEndEncoded=22]="RunEndEncoded"})(bi||(bi={}));let lc=class kP{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsField(t,n){return(n||new kP).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsField(t,n){return t.setPosition(t.position()+zr),(n||new kP).__init(t.readInt32(t.position())+t.position(),t)}name(t){const n=this.bb.__offset(this.bb_pos,4);return n?this.bb.__string(this.bb_pos+n,t):null}nullable(){const t=this.bb.__offset(this.bb_pos,6);return t?!!this.bb.readInt8(this.bb_pos+t):!1}typeType(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readUint8(this.bb_pos+t):bi.NONE}type(t){const n=this.bb.__offset(this.bb_pos,10);return n?this.bb.__union(t,this.bb_pos+n):null}dictionary(t){const n=this.bb.__offset(this.bb_pos,12);return n?(t||new Up).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}children(t,n){const r=this.bb.__offset(this.bb_pos,14);return r?(n||new kP).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}childrenLength(){const t=this.bb.__offset(this.bb_pos,14);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,16);return r?(n||new Rs).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,16);return t?this.bb.__vector_len(this.bb_pos+t):0}static startField(t){t.startObject(7)}static addName(t,n){t.addFieldOffset(0,n,0)}static addNullable(t,n){t.addFieldInt8(1,+n,0)}static addTypeType(t,n){t.addFieldInt8(2,n,bi.NONE)}static addType(t,n){t.addFieldOffset(3,n,0)}static addDictionary(t,n){t.addFieldOffset(4,n,0)}static addChildren(t,n){t.addFieldOffset(5,n,0)}static createChildrenVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startChildrenVector(t,n){t.startVector(4,n,4)}static addCustomMetadata(t,n){t.addFieldOffset(6,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static endField(t){return t.endObject()}},Pd=class Cp{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsSchema(t,n){return(n||new Cp).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsSchema(t,n){return t.setPosition(t.position()+zr),(n||new Cp).__init(t.readInt32(t.position())+t.position(),t)}endianness(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):ox.Little}fields(t,n){const r=this.bb.__offset(this.bb_pos,6);return r?(n||new lc).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}fieldsLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,8);return r?(n||new Rs).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}features(t){const n=this.bb.__offset(this.bb_pos,10);return n?this.bb.readInt64(this.bb.__vector(this.bb_pos+n)+t*8):BigInt(0)}featuresLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}static startSchema(t){t.startObject(4)}static addEndianness(t,n){t.addFieldInt16(0,n,ox.Little)}static addFields(t,n){t.addFieldOffset(1,n,0)}static createFieldsVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startFieldsVector(t,n){t.startVector(4,n,4)}static addCustomMetadata(t,n){t.addFieldOffset(2,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static addFeatures(t,n){t.addFieldOffset(3,n,0)}static createFeaturesVector(t,n){t.startVector(8,n.length,8);for(let r=n.length-1;r>=0;r--)t.addInt64(n[r]);return t.endVector()}static startFeaturesVector(t,n){t.startVector(8,n,8)}static endSchema(t){return t.endObject()}static finishSchemaBuffer(t,n){t.finish(n)}static finishSizePrefixedSchemaBuffer(t,n){t.finish(n,void 0,!0)}static createSchema(t,n,r,i,s){return Cp.startSchema(t),Cp.addEndianness(t,n),Cp.addFields(t,r),Cp.addCustomMetadata(t,i),Cp.addFeatures(t,s),Cp.endSchema(t)}};class pl{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFooter(t,n){return(n||new pl).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFooter(t,n){return t.setPosition(t.position()+zr),(n||new pl).__init(t.readInt32(t.position())+t.position(),t)}version(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):sx.V1}schema(t){const n=this.bb.__offset(this.bb_pos,6);return n?(t||new Pd).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}dictionaries(t,n){const r=this.bb.__offset(this.bb_pos,8);return r?(n||new Rz).__init(this.bb.__vector(this.bb_pos+r)+t*24,this.bb):null}dictionariesLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}recordBatches(t,n){const r=this.bb.__offset(this.bb_pos,10);return r?(n||new Rz).__init(this.bb.__vector(this.bb_pos+r)+t*24,this.bb):null}recordBatchesLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,12);return r?(n||new Rs).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}static startFooter(t){t.startObject(5)}static addVersion(t,n){t.addFieldInt16(0,n,sx.V1)}static addSchema(t,n){t.addFieldOffset(1,n,0)}static addDictionaries(t,n){t.addFieldOffset(2,n,0)}static startDictionariesVector(t,n){t.startVector(24,n,8)}static addRecordBatches(t,n){t.addFieldOffset(3,n,0)}static startRecordBatchesVector(t,n){t.startVector(24,n,8)}static addCustomMetadata(t,n){t.addFieldOffset(4,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static endFooter(t){return t.endObject()}static finishFooterBuffer(t,n){t.finish(n)}static finishSizePrefixedFooterBuffer(t,n){t.finish(n,void 0,!0)}}class Tr{constructor(t=[],n,r,i=Va.V5){this.fields=t||[],this.metadata=n||new Map,r||(r=Pz(t)),this.dictionaries=r,this.metadataVersion=i}get[Symbol.toStringTag](){return"Schema"}get names(){return this.fields.map(t=>t.name)}toString(){return`Schema<{ ${this.fields.map((t,n)=>`${n}: ${t}`).join(", ")} }>`}select(t){const n=new Set(t),r=this.fields.filter(i=>n.has(i.name));return new Tr(r,this.metadata)}selectAt(t){const n=t.map(r=>this.fields[r]).filter(Boolean);return new Tr(n,this.metadata)}assign(...t){const n=t[0]instanceof Tr?t[0]:Array.isArray(t[0])?new Tr(t[0]):new Tr(t),r=[...this.fields],i=tD(tD(new Map,this.metadata),n.metadata),s=n.fields.filter(a=>{const u=r.findIndex(l=>l.name===a.name);return~u?(r[u]=a.clone({metadata:tD(tD(new Map,r[u].metadata),a.metadata)}))&&!1:!0}),o=Pz(s,new Map);return new Tr([...r,...s],i,new Map([...this.dictionaries,...o]))}}Tr.prototype.fields=null;Tr.prototype.metadata=null;Tr.prototype.dictionaries=null;let Fr=class Dz{static new(...t){let[n,r,i,s]=t;return t[0]&&typeof t[0]=="object"&&({name:n}=t[0],r===void 0&&(r=t[0].type),i===void 0&&(i=t[0].nullable),s===void 0&&(s=t[0].metadata)),new Dz(`${n}`,r,i,s)}constructor(t,n,r=!1,i){this.name=t,this.type=n,this.nullable=r,this.metadata=i||new Map}get typeId(){return this.type.typeId}get[Symbol.toStringTag](){return"Field"}toString(){return`${this.name}: ${this.type}`}clone(...t){let[n,r,i,s]=t;return!t[0]||typeof t[0]!="object"?[n=this.name,r=this.type,i=this.nullable,s=this.metadata]=t:{name:n=this.name,type:r=this.type,nullable:i=this.nullable,metadata:s=this.metadata}=t[0],Dz.new(n,r,i,s)}};Fr.prototype.type=null;Fr.prototype.name=null;Fr.prototype.nullable=null;Fr.prototype.metadata=null;function tD(e,t){return new Map([...e||new Map,...t||new Map])}function Pz(e,t=new Map){for(let n=-1,r=e.length;++n<r;){const s=e[n].type;if(Sn.isDictionary(s)){if(!t.has(s.id))t.set(s.id,s.dictionary);else if(t.get(s.id)!==s.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}s.children&&s.children.length>0&&Pz(s.children,t)}return t}var S1t=PAe,T1t=c$;class Oz{static decode(t){t=new T1t(Dr(t));const n=pl.getRootAsFooter(t),r=Tr.decode(n.schema(),new Map,n.version());return new C1t(r,n)}static encode(t){const n=new S1t,r=Tr.encode(n,t.schema);pl.startRecordBatchesVector(n,t.numRecordBatches);for(const o of[...t.recordBatches()].slice().reverse())J0.encode(n,o);const i=n.endVector();pl.startDictionariesVector(n,t.numDictionaries);for(const o of[...t.dictionaryBatches()].slice().reverse())J0.encode(n,o);const s=n.endVector();return pl.startFooter(n),pl.addSchema(n,r),pl.addVersion(n,Va.V5),pl.addRecordBatches(n,i),pl.addDictionaries(n,s),pl.finishFooterBuffer(n,pl.endFooter(n)),n.asUint8Array()}get numRecordBatches(){return this._recordBatches.length}get numDictionaries(){return this._dictionaryBatches.length}constructor(t,n=Va.V5,r,i){this.schema=t,this.version=n,r&&(this._recordBatches=r),i&&(this._dictionaryBatches=i)}*recordBatches(){for(let t,n=-1,r=this.numRecordBatches;++n<r;)(t=this.getRecordBatch(n))&&(yield t)}*dictionaryBatches(){for(let t,n=-1,r=this.numDictionaries;++n<r;)(t=this.getDictionaryBatch(n))&&(yield t)}getRecordBatch(t){return t>=0&&t<this.numRecordBatches&&this._recordBatches[t]||null}getDictionaryBatch(t){return t>=0&&t<this.numDictionaries&&this._dictionaryBatches[t]||null}}class C1t extends Oz{get numRecordBatches(){return this._footer.recordBatchesLength()}get numDictionaries(){return this._footer.dictionariesLength()}constructor(t,n){super(t,n.version()),this._footer=n}getRecordBatch(t){if(t>=0&&t<this.numRecordBatches){const n=this._footer.recordBatches(t);if(n)return J0.decode(n)}return null}getDictionaryBatch(t){if(t>=0&&t<this.numDictionaries){const n=this._footer.dictionaries(t);if(n)return J0.decode(n)}return null}}class J0{static decode(t){return new J0(t.metaDataLength(),t.bodyLength(),t.offset())}static encode(t,n){const{metaDataLength:r}=n,i=BigInt(n.offset),s=BigInt(n.bodyLength);return Rz.createBlock(t,i,r,s)}constructor(t,n,r){this.metaDataLength=t,this.offset=Xf(r),this.bodyLength=Xf(n)}}const nD=Object.freeze({done:!0,value:void 0});class $Ae{tee(){return this._getDOMStream().tee()}pipe(t,n){return this._getNodeStream().pipe(t,n)}pipeTo(t,n){return this._getDOMStream().pipeTo(t,n)}pipeThrough(t,n){return this._getDOMStream().pipeThrough(t,n)}_getDOMStream(){return this._DOMStream||(this._DOMStream=this.toDOMStream())}_getNodeStream(){return this._nodeStream||(this._nodeStream=this.toNodeStream())}}class A1t extends $Ae{constructor(){super(),this._values=[],this.resolvers=[],this._closedPromise=new Promise(t=>this._closedPromiseResolve=t)}get closed(){return this._closedPromise}cancel(t){return Lp(this,void 0,void 0,function*(){yield this.return(t)})}write(t){this._ensureOpen()&&(this.resolvers.length<=0?this._values.push(t):this.resolvers.shift().resolve({done:!1,value:t}))}abort(t){this._closedPromiseResolve&&(this.resolvers.length<=0?this._error={error:t}:this.resolvers.shift().reject({done:!0,value:t}))}close(){if(this._closedPromiseResolve){const{resolvers:t}=this;for(;t.length>0;)t.shift().resolve(nD);this._closedPromiseResolve(),this._closedPromiseResolve=void 0}}[Symbol.asyncIterator](){return this}toDOMStream(t){return Hce.toDOMStream(this._closedPromiseResolve||this._error?this:this._values,t)}toNodeStream(t){return Hce.toNodeStream(this._closedPromiseResolve||this._error?this:this._values,t)}throw(t){return Lp(this,void 0,void 0,function*(){return yield this.abort(t),nD})}return(t){return Lp(this,void 0,void 0,function*(){return yield this.close(),nD})}read(t){return Lp(this,void 0,void 0,function*(){return(yield this.next(t,"read")).value})}peek(t){return Lp(this,void 0,void 0,function*(){return(yield this.next(t,"peek")).value})}next(...t){return this._values.length>0?Promise.resolve({done:!1,value:this._values.shift()}):this._error?Promise.reject({done:!0,value:this._error.error}):this._closedPromiseResolve?new Promise((n,r)=>{this.resolvers.push({resolve:n,reject:r})}):Promise.resolve(nD)}_ensureOpen(){if(this._closedPromiseResolve)return!0;throw new Error("AsyncQueue is closed")}}class Q8 extends A1t{write(t){if((t=Dr(t)).byteLength>0)return super.write(t)}toString(t=!1){return t?Cz(this.toUint8Array(!0)):this.toUint8Array(!1).then(Cz)}toUint8Array(t=!1){return t?kh(this._values)[0]:Lp(this,void 0,void 0,function*(){var n,r,i,s;const o=[];let a=0;try{for(var u=!0,l=mC(this),c;c=yield l.next(),n=c.done,!n;u=!0){s=c.value,u=!1;const f=s;o.push(f),a+=f.byteLength}}catch(f){r={error:f}}finally{try{!u&&!n&&(i=l.return)&&(yield i.call(l))}finally{if(r)throw r.error}}return kh(o,a)[0]})}}class MAe extends J6{constructor(t){super(t),this._values=new Q6(new Uint8Array(0))}get byteLength(){let t=this._pendingLength+this.length*4;return this._offsets&&(t+=this._offsets.byteLength),this._values&&(t+=this._values.byteLength),this._nulls&&(t+=this._nulls.byteLength),t}setValue(t,n){return super.setValue(t,Dr(n))}_flushPending(t,n){const r=this._offsets,i=this._values.reserve(n).buffer;let s=0;for(const[o,a]of t)if(a===void 0)r.set(o,0);else{const u=a.length;i.set(a,s),r.set(o,u),s+=u}}}class I1t extends al{constructor(t){super(t),this._values=new RAe}setValue(t,n){this._values.set(t,+n)}}class Z6 extends tg{}Z6.prototype._setValue=UCe;class LAe extends Z6{}LAe.prototype._setValue=EX;class FAe extends Z6{}FAe.prototype._setValue=xX;class jAe extends tg{}jAe.prototype._setValue=HCe;class k1t extends al{constructor({type:t,nullValues:n,dictionaryHashFunction:r}){super({type:new X0(t.dictionary,t.indices,t.id,t.isOrdered)}),this._nulls=null,this._dictionaryOffset=0,this._keysToIndices=Object.create(null),this.indices=g$({type:this.type.indices,nullValues:n}),this.dictionary=g$({type:this.type.dictionary,nullValues:null}),typeof r=="function"&&(this.valueToKey=r)}get values(){return this.indices.values}get nullCount(){return this.indices.nullCount}get nullBitmap(){return this.indices.nullBitmap}get byteLength(){return this.indices.byteLength+this.dictionary.byteLength}get reservedLength(){return this.indices.reservedLength+this.dictionary.reservedLength}get reservedByteLength(){return this.indices.reservedByteLength+this.dictionary.reservedByteLength}isValid(t){return this.indices.isValid(t)}setValid(t,n){const r=this.indices;return n=r.setValid(t,n),this.length=r.length,n}setValue(t,n){const r=this._keysToIndices,i=this.valueToKey(n);let s=r[i];return s===void 0&&(r[i]=s=this._dictionaryOffset+this.dictionary.append(n).length-1),this.indices.setValue(t,s)}flush(){const t=this.type,n=this._dictionary,r=this.dictionary.toVector(),i=this.indices.flush().clone(t);return i.dictionary=n?n.concat(r):r,this.finished||(this._dictionaryOffset+=r.length),this._dictionary=i.dictionary,this.clear(),i}finish(){return this.indices.finish(),this.dictionary.finish(),this._dictionaryOffset=0,this._keysToIndices=Object.create(null),super.finish()}clear(){return this.indices.clear(),this.dictionary.clear(),super.clear()}valueToKey(t){return typeof t=="string"?t:`${t}`}}class BAe extends tg{}BAe.prototype._setValue=BCe;class R1t extends al{setValue(t,n){const[r]=this.children,i=t*this.stride;for(let s=-1,o=n.length;++s<o;)r.set(i+s,n[s])}addChild(t,n="0"){if(this.numChildren>0)throw new Error("FixedSizeListBuilder can only have one child.");const r=this.children.push(t);return this.type=new ix(this.type.listSize,new Fr(n,t.type,!0)),r}}class e4 extends tg{setValue(t,n){this._values.set(t,n)}}class N1t extends e4{setValue(t,n){super.setValue(t,LCe(n))}}class D1t extends e4{}class P1t extends e4{}class t4 extends tg{}t4.prototype._setValue=GCe;class UAe extends t4{}UAe.prototype._setValue=DX;class zAe extends t4{}zAe.prototype._setValue=PX;class ES extends tg{}ES.prototype._setValue=YCe;class VAe extends ES{}VAe.prototype._setValue=OX;class HAe extends ES{}HAe.prototype._setValue=$X;class qAe extends ES{}qAe.prototype._setValue=MX;class WAe extends ES{}WAe.prototype._setValue=LX;class ng extends tg{setValue(t,n){this._values.set(t,n)}}class O1t extends ng{}class $1t extends ng{}class M1t extends ng{}class L1t extends ng{}class F1t extends ng{}class j1t extends ng{}class B1t extends ng{}class U1t extends ng{}class z1t extends J6{constructor(t){super(t),this._offsets=new NAe}addChild(t,n="0"){if(this.numChildren>0)throw new Error("ListBuilder can only have one child.");return this.children[this.numChildren]=t,this.type=new rx(new Fr(n,t.type,!0)),this.numChildren-1}_flushPending(t){const n=this._offsets,[r]=this.children;for(const[i,s]of t)if(typeof s>"u")n.set(i,0);else{const o=s,a=o.length,u=n.set(i,a).buffer[i];for(let l=-1;++l<a;)r.set(u+l,o[l])}}}class V1t extends J6{set(t,n){return super.set(t,n)}setValue(t,n){const r=n instanceof Map?n:new Map(Object.entries(n)),i=this._pending||(this._pending=new Map),s=i.get(t);s&&(this._pendingLength-=s.size),this._pendingLength+=r.size,i.set(t,r)}addChild(t,n=`${this.numChildren}`){if(this.numChildren>0)throw new Error("ListBuilder can only have one child.");return this.children[this.numChildren]=t,this.type=new iI(new Fr(n,t.type,!0),this.type.keysSorted),this.numChildren-1}_flushPending(t){const n=this._offsets,[r]=this.children;for(const[i,s]of t)if(s===void 0)n.set(i,0);else{let{[i]:o,[i+1]:a}=n.set(i,s.size).buffer;for(const u of s.entries())if(r.set(o,u),++o>=a)break}}}class H1t extends al{setValue(t,n){}setValid(t,n){return this.length=Math.max(t+1,this.length),n}}class q1t extends al{setValue(t,n){const{children:r,type:i}=this;switch(Array.isArray(n)||n.constructor){case!0:return i.children.forEach((s,o)=>r[o].set(t,n[o]));case Map:return i.children.forEach((s,o)=>r[o].set(t,n.get(s.name)));default:return i.children.forEach((s,o)=>r[o].set(t,n[s.name]))}}setValid(t,n){return super.setValid(t,n)||this.children.forEach(r=>r.setValid(t,n)),n}addChild(t,n=`${this.numChildren}`){const r=this.children.push(t);return this.type=new fa([...this.type.children,new Fr(n,t.type,!0)]),r}}class xS extends tg{}xS.prototype._setValue=zCe;class GAe extends xS{}GAe.prototype._setValue=SX;class YAe extends xS{}YAe.prototype._setValue=TX;class KAe extends xS{}KAe.prototype._setValue=CX;class XAe extends xS{}XAe.prototype._setValue=AX;class SS extends tg{}SS.prototype._setValue=VCe;class QAe extends SS{}QAe.prototype._setValue=IX;class JAe extends SS{}JAe.prototype._setValue=kX;class ZAe extends SS{}ZAe.prototype._setValue=RX;class eIe extends SS{}eIe.prototype._setValue=NX;class HX extends al{constructor(t){super(t),this._typeIds=new Pk(new Int8Array(0),1),typeof t.valueToChildTypeId=="function"&&(this._valueToChildTypeId=t.valueToChildTypeId)}get typeIdToChildIndex(){return this.type.typeIdToChildIndex}append(t,n){return this.set(this.length,t,n)}set(t,n,r){return r===void 0&&(r=this._valueToChildTypeId(this,n,t)),this.setValue(t,n,r),this}setValue(t,n,r){this._typeIds.set(t,r);const i=this.type.typeIdToChildIndex[r],s=this.children[i];s==null||s.set(t,n)}addChild(t,n=`${this.children.length}`){const r=this.children.push(t),{type:{children:i,mode:s,typeIds:o}}=this,a=[...i,new Fr(n,t.type)];return this.type=new rI(s,[...o,r],a),r}_valueToChildTypeId(t,n,r){throw new Error("Cannot map UnionBuilder value to child typeId. Pass the `childTypeId` as the second argument to unionBuilder.append(), or supply a `valueToChildTypeId` function as part of the UnionBuilder constructor options.")}}class W1t extends HX{}class G1t extends HX{constructor(t){super(t),this._offsets=new Pk(new Int32Array(0))}setValue(t,n,r){const i=this._typeIds.set(t,r).buffer[t],s=this.getChildAt(this.type.typeIdToChildIndex[i]),o=this._offsets.set(t,s.length).buffer[t];s==null||s.set(o,n)}}class tIe extends J6{constructor(t){super(t),this._values=new Q6(new Uint8Array(0))}get byteLength(){let t=this._pendingLength+this.length*4;return this._offsets&&(t+=this._offsets.byteLength),this._values&&(t+=this._values.byteLength),this._nulls&&(t+=this._nulls.byteLength),t}setValue(t,n){return super.setValue(t,aX(n))}_flushPending(t,n){}}tIe.prototype._flushPending=MAe.prototype._flushPending;class Y1t extends Cn{visitNull(){return H1t}visitBool(){return I1t}visitInt(){return ng}visitInt8(){return O1t}visitInt16(){return $1t}visitInt32(){return M1t}visitInt64(){return L1t}visitUint8(){return F1t}visitUint16(){return j1t}visitUint32(){return B1t}visitUint64(){return U1t}visitFloat(){return e4}visitFloat16(){return N1t}visitFloat32(){return D1t}visitFloat64(){return P1t}visitUtf8(){return tIe}visitBinary(){return MAe}visitFixedSizeBinary(){return BAe}visitDate(){return Z6}visitDateDay(){return LAe}visitDateMillisecond(){return FAe}visitTimestamp(){return xS}visitTimestampSecond(){return GAe}visitTimestampMillisecond(){return YAe}visitTimestampMicrosecond(){return KAe}visitTimestampNanosecond(){return XAe}visitTime(){return SS}visitTimeSecond(){return QAe}visitTimeMillisecond(){return JAe}visitTimeMicrosecond(){return ZAe}visitTimeNanosecond(){return eIe}visitDecimal(){return jAe}visitList(){return z1t}visitStruct(){return q1t}visitUnion(){return HX}visitDenseUnion(){return G1t}visitSparseUnion(){return W1t}visitDictionary(){return k1t}visitInterval(){return t4}visitIntervalDayTime(){return UAe}visitIntervalYearMonth(){return zAe}visitDuration(){return ES}visitDurationSecond(){return VAe}visitDurationMillisecond(){return HAe}visitDurationMicrosecond(){return qAe}visistDurationNanosecond(){return WAe}visitFixedSizeList(){return R1t}visitMap(){return V1t}}const K1t=new Y1t;class Xt extends Cn{compareSchemas(t,n){return t===n||n instanceof t.constructor&&this.compareManyFields(t.fields,n.fields)}compareManyFields(t,n){return t===n||Array.isArray(t)&&Array.isArray(n)&&t.length===n.length&&t.every((r,i)=>this.compareFields(r,n[i]))}compareFields(t,n){return t===n||n instanceof t.constructor&&t.name===n.name&&t.nullable===n.nullable&&this.visit(t.type,n.type)}}function au(e,t){return t instanceof e.constructor}function Ok(e,t){return e===t||au(e,t)}function rg(e,t){return e===t||au(e,t)&&e.bitWidth===t.bitWidth&&e.isSigned===t.isSigned}function n4(e,t){return e===t||au(e,t)&&e.precision===t.precision}function X1t(e,t){return e===t||au(e,t)&&e.byteWidth===t.byteWidth}function qX(e,t){return e===t||au(e,t)&&e.unit===t.unit}function $k(e,t){return e===t||au(e,t)&&e.unit===t.unit&&e.timezone===t.timezone}function Mk(e,t){return e===t||au(e,t)&&e.unit===t.unit&&e.bitWidth===t.bitWidth}function Q1t(e,t){return e===t||au(e,t)&&e.children.length===t.children.length&&Z0.compareManyFields(e.children,t.children)}function J1t(e,t){return e===t||au(e,t)&&e.children.length===t.children.length&&Z0.compareManyFields(e.children,t.children)}function WX(e,t){return e===t||au(e,t)&&e.mode===t.mode&&e.typeIds.every((n,r)=>n===t.typeIds[r])&&Z0.compareManyFields(e.children,t.children)}function Z1t(e,t){return e===t||au(e,t)&&e.id===t.id&&e.isOrdered===t.isOrdered&&Z0.visit(e.indices,t.indices)&&Z0.visit(e.dictionary,t.dictionary)}function GX(e,t){return e===t||au(e,t)&&e.unit===t.unit}function Lk(e,t){return e===t||au(e,t)&&e.unit===t.unit}function ebt(e,t){return e===t||au(e,t)&&e.listSize===t.listSize&&e.children.length===t.children.length&&Z0.compareManyFields(e.children,t.children)}function tbt(e,t){return e===t||au(e,t)&&e.keysSorted===t.keysSorted&&e.children.length===t.children.length&&Z0.compareManyFields(e.children,t.children)}Xt.prototype.visitNull=Ok;Xt.prototype.visitBool=Ok;Xt.prototype.visitInt=rg;Xt.prototype.visitInt8=rg;Xt.prototype.visitInt16=rg;Xt.prototype.visitInt32=rg;Xt.prototype.visitInt64=rg;Xt.prototype.visitUint8=rg;Xt.prototype.visitUint16=rg;Xt.prototype.visitUint32=rg;Xt.prototype.visitUint64=rg;Xt.prototype.visitFloat=n4;Xt.prototype.visitFloat16=n4;Xt.prototype.visitFloat32=n4;Xt.prototype.visitFloat64=n4;Xt.prototype.visitUtf8=Ok;Xt.prototype.visitBinary=Ok;Xt.prototype.visitFixedSizeBinary=X1t;Xt.prototype.visitDate=qX;Xt.prototype.visitDateDay=qX;Xt.prototype.visitDateMillisecond=qX;Xt.prototype.visitTimestamp=$k;Xt.prototype.visitTimestampSecond=$k;Xt.prototype.visitTimestampMillisecond=$k;Xt.prototype.visitTimestampMicrosecond=$k;Xt.prototype.visitTimestampNanosecond=$k;Xt.prototype.visitTime=Mk;Xt.prototype.visitTimeSecond=Mk;Xt.prototype.visitTimeMillisecond=Mk;Xt.prototype.visitTimeMicrosecond=Mk;Xt.prototype.visitTimeNanosecond=Mk;Xt.prototype.visitDecimal=Ok;Xt.prototype.visitList=Q1t;Xt.prototype.visitStruct=J1t;Xt.prototype.visitUnion=WX;Xt.prototype.visitDenseUnion=WX;Xt.prototype.visitSparseUnion=WX;Xt.prototype.visitDictionary=Z1t;Xt.prototype.visitInterval=GX;Xt.prototype.visitIntervalDayTime=GX;Xt.prototype.visitIntervalYearMonth=GX;Xt.prototype.visitDuration=Lk;Xt.prototype.visitDurationSecond=Lk;Xt.prototype.visitDurationMillisecond=Lk;Xt.prototype.visitDurationMicrosecond=Lk;Xt.prototype.visitDurationNanosecond=Lk;Xt.prototype.visitFixedSizeList=ebt;Xt.prototype.visitMap=tbt;const Z0=new Xt;function $z(e,t){return Z0.compareSchemas(e,t)}function g$(e){const t=e.type,n=new(K1t.getVisitFn(t)())(e);if(t.children&&t.children.length>0){const r=e.children||[],i={nullValues:e.nullValues},s=Array.isArray(r)?(o,a)=>r[a]||i:({name:o})=>r[o]||i;for(const[o,a]of t.children.entries()){const{type:u}=a,l=s(a,o);n.children.push(g$(Object.assign(Object.assign({},l),{type:u})))}}return n}function J8(e,t){return nbt(e,t.map(n=>n.data.concat()))}function nbt(e,t){const n=[...e.fields],r=[],i={numBatches:t.reduce((f,d)=>Math.max(f,d.length),0)};let s=0,o=0,a=-1;const u=t.length;let l,c=[];for(;i.numBatches-- >0;){for(o=Number.POSITIVE_INFINITY,a=-1;++a<u;)c[a]=l=t[a].shift(),o=Math.min(o,l?l.length:o);Number.isFinite(o)&&(c=rbt(n,o,c,t,i),o>0&&(r[s++]=aa({type:new fa(n),length:o,nullCount:0,children:c.slice()})))}return[e=e.assign(n),r.map(f=>new _l(e,f))]}function rbt(e,t,n,r,i){var s;const o=(t+63&-64)>>3;for(let a=-1,u=r.length;++a<u;){const l=n[a],c=l==null?void 0:l.length;if(c>=t)c===t?n[a]=l:(n[a]=l.slice(0,t),i.numBatches=Math.max(i.numBatches,r[a].unshift(l.slice(t,c-t))));else{const f=e[a];e[a]=f.clone({nullable:!0}),n[a]=(s=l==null?void 0:l._changeLengthAndBackfillNullBitmap(t))!==null&&s!==void 0?s:aa({type:f.type,length:t,nullCount:t,nullBitmap:new Uint8Array(o)})}}return n}var nIe;class Iu{constructor(...t){var n,r;if(t.length===0)return this.batches=[],this.schema=new Tr([]),this._offsets=[0],this;let i,s;t[0]instanceof Tr&&(i=t.shift()),t.at(-1)instanceof Uint32Array&&(s=t.pop());const o=u=>{if(u){if(u instanceof _l)return[u];if(u instanceof Iu)return u.batches;if(u instanceof Nr){if(u.type instanceof fa)return[new _l(new Tr(u.type.children),u)]}else{if(Array.isArray(u))return u.flatMap(l=>o(l));if(typeof u[Symbol.iterator]=="function")return[...u].flatMap(l=>o(l));if(typeof u=="object"){const l=Object.keys(u),c=l.map(h=>new hr([u[h]])),f=new Tr(l.map((h,p)=>new Fr(String(h),c[p].type))),[,d]=J8(f,c);return d.length===0?[new _l(u)]:d}}}return[]},a=t.flatMap(u=>o(u));if(i=(r=i??((n=a[0])===null||n===void 0?void 0:n.schema))!==null&&r!==void 0?r:new Tr([]),!(i instanceof Tr))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");for(const u of a){if(!(u instanceof _l))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");if(!$z(i,u.schema))throw new TypeError("Table and inner RecordBatch schemas must be equivalent.")}this.schema=i,this.batches=a,this._offsets=s??_Ae(this.data)}get data(){return this.batches.map(({data:t})=>t)}get numCols(){return this.schema.fields.length}get numRows(){return this.data.reduce((t,n)=>t+n.length,0)}get nullCount(){return this._nullCount===-1&&(this._nullCount=bAe(this.data)),this._nullCount}isValid(t){return!1}get(t){return null}set(t,n){}indexOf(t,n){return-1}getByteLength(t){return 0}[Symbol.iterator](){return this.batches.length>0?VX.visit(new hr(this.data)):new Array(0)[Symbol.iterator]()}toArray(){return[...this]}toString(){return`[
  ${this.toArray().join(`,
  `)}
]`}concat(...t){const n=this.schema,r=this.data.concat(t.flatMap(({data:i})=>i));return new Iu(n,r.map(i=>new _l(n,i)))}slice(t,n){const r=this.schema;[t,n]=gAe({length:this.numRows},t,n);const i=wAe(this.data,this._offsets,t,n);return new Iu(r,i.map(s=>new _l(r,s)))}getChild(t){return this.getChildAt(this.schema.fields.findIndex(n=>n.name===t))}getChildAt(t){if(t>-1&&t<this.schema.fields.length){const n=this.data.map(r=>r.children[t]);if(n.length===0){const{type:r}=this.schema.fields[t],i=aa({type:r,length:0,nullCount:0});n.push(i._changeLengthAndBackfillNullBitmap(this.numRows))}return new hr(n)}return null}setChild(t,n){var r;return this.setChildAt((r=this.schema.fields)===null||r===void 0?void 0:r.findIndex(i=>i.name===t),n)}setChildAt(t,n){let r=this.schema,i=[...this.batches];if(t>-1&&t<this.numCols){n||(n=new hr([aa({type:new km,length:this.numRows})]));const s=r.fields.slice(),o=s[t].clone({type:n.type}),a=this.schema.fields.map((u,l)=>this.getChildAt(l));[s[t],a[t]]=[o,n],[r,i]=J8(r,a)}return new Iu(r,i)}select(t){const n=this.schema.fields.reduce((r,i,s)=>r.set(i.name,s),new Map);return this.selectAt(t.map(r=>n.get(r)).filter(r=>r>-1))}selectAt(t){const n=this.schema.selectAt(t),r=this.batches.map(i=>i.selectAt(t));return new Iu(n,r)}assign(t){const n=this.schema.fields,[r,i]=t.schema.fields.reduce((a,u,l)=>{const[c,f]=a,d=n.findIndex(h=>h.name===u.name);return~d?f[d]=l:c.push(l),a},[[],[]]),s=this.schema.assign(t.schema),o=[...n.map((a,u)=>[u,i[u]]).map(([a,u])=>u===void 0?this.getChildAt(a):t.getChildAt(u)),...r.map(a=>t.getChildAt(a))].filter(Boolean);return new Iu(...J8(s,o))}}nIe=Symbol.toStringTag;Iu[nIe]=(e=>(e.schema=null,e.batches=[],e._offsets=new Uint32Array([0]),e._nullCount=-1,e[Symbol.isConcatSpreadable]=!0,e.isValid=sE(zX),e.get=sE(el.getVisitFn(re.Struct)),e.set=EAe(Mc.getVisitFn(re.Struct)),e.indexOf=xAe(u$.getVisitFn(re.Struct)),e.getByteLength=sE(Dh.getVisitFn(re.Struct)),"Table"))(Iu.prototype);var rIe;let _l=class O2{constructor(...t){switch(t.length){case 2:{if([this.schema]=t,!(this.schema instanceof Tr))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");if([,this.data=aa({nullCount:0,type:new fa(this.schema.fields),children:this.schema.fields.map(n=>aa({type:n.type,nullCount:0}))})]=t,!(this.data instanceof Nr))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");[this.schema,this.data]=Jce(this.schema,this.data.children);break}case 1:{const[n]=t,{fields:r,children:i,length:s}=Object.keys(n).reduce((u,l,c)=>(u.children[c]=n[l],u.length=Math.max(u.length,n[l].length),u.fields[c]=Fr.new({name:l,type:n[l].type,nullable:!0}),u),{length:0,fields:new Array,children:new Array}),o=new Tr(r),a=aa({type:new fa(r),length:s,children:i,nullCount:0});[this.schema,this.data]=Jce(o,a.children,s);break}default:throw new TypeError("RecordBatch constructor expects an Object mapping names to child Data, or a [Schema, Data] pair.")}}get dictionaries(){return this._dictionaries||(this._dictionaries=iIe(this.schema.fields,this.data.children))}get numCols(){return this.schema.fields.length}get numRows(){return this.data.length}get nullCount(){return this.data.nullCount}isValid(t){return this.data.getValid(t)}get(t){return el.visit(this.data,t)}set(t,n){return Mc.visit(this.data,t,n)}indexOf(t,n){return u$.visit(this.data,t,n)}getByteLength(t){return Dh.visit(this.data,t)}[Symbol.iterator](){return VX.visit(new hr([this.data]))}toArray(){return[...this]}concat(...t){return new Iu(this.schema,[this,...t])}slice(t,n){const[r]=new hr([this.data]).slice(t,n).data;return new O2(this.schema,r)}getChild(t){var n;return this.getChildAt((n=this.schema.fields)===null||n===void 0?void 0:n.findIndex(r=>r.name===t))}getChildAt(t){return t>-1&&t<this.schema.fields.length?new hr([this.data.children[t]]):null}setChild(t,n){var r;return this.setChildAt((r=this.schema.fields)===null||r===void 0?void 0:r.findIndex(i=>i.name===t),n)}setChildAt(t,n){let r=this.schema,i=this.data;if(t>-1&&t<this.numCols){n||(n=new hr([aa({type:new km,length:this.numRows})]));const s=r.fields.slice(),o=i.children.slice(),a=s[t].clone({type:n.type});[s[t],o[t]]=[a,n.data[0]],r=new Tr(s,new Map(this.schema.metadata)),i=aa({type:new fa(s),children:o})}return new O2(r,i)}select(t){const n=this.schema.select(t),r=new fa(n.fields),i=[];for(const s of t){const o=this.schema.fields.findIndex(a=>a.name===s);~o&&(i[o]=this.data.children[o])}return new O2(n,aa({type:r,length:this.numRows,children:i}))}selectAt(t){const n=this.schema.selectAt(t),r=t.map(s=>this.data.children[s]).filter(Boolean),i=aa({type:new fa(n.fields),length:this.numRows,children:r});return new O2(n,i)}};rIe=Symbol.toStringTag;_l[rIe]=(e=>(e._nullCount=-1,e[Symbol.isConcatSpreadable]=!0,"RecordBatch"))(_l.prototype);function Jce(e,t,n=t.reduce((r,i)=>Math.max(r,i.length),0)){var r;const i=[...e.fields],s=[...t],o=(n+63&-64)>>3;for(const[a,u]of e.fields.entries()){const l=t[a];(!l||l.length!==n)&&(i[a]=u.clone({nullable:!0}),s[a]=(r=l==null?void 0:l._changeLengthAndBackfillNullBitmap(n))!==null&&r!==void 0?r:aa({type:u.type,length:n,nullCount:n,nullBitmap:new Uint8Array(o)}))}return[e.assign(i),aa({type:new fa(i),length:n,children:s})]}function iIe(e,t,n=new Map){var r,i;if(((r=e==null?void 0:e.length)!==null&&r!==void 0?r:0)>0&&(e==null?void 0:e.length)===(t==null?void 0:t.length))for(let s=-1,o=e.length;++s<o;){const{type:a}=e[s],u=t[s];for(const l of[u,...((i=u==null?void 0:u.dictionary)===null||i===void 0?void 0:i.data)||[]])iIe(a.children,l==null?void 0:l.children,n);if(Sn.isDictionary(a)){const{id:l}=a;if(!n.has(l))u!=null&&u.dictionary&&n.set(l,u.dictionary);else if(n.get(l)!==u.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}}return n}class ibt extends _l{constructor(t){const n=t.fields.map(i=>aa({type:i.type})),r=aa({type:new fa(t.fields),nullCount:0,children:n});super(t,r)}}var y$;(function(e){e[e.BUFFER=0]="BUFFER"})(y$||(y$={}));var v$;(function(e){e[e.LZ4_FRAME=0]="LZ4_FRAME",e[e.ZSTD=1]="ZSTD"})(v$||(v$={}));class Og{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsBodyCompression(t,n){return(n||new Og).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBodyCompression(t,n){return t.setPosition(t.position()+zr),(n||new Og).__init(t.readInt32(t.position())+t.position(),t)}codec(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt8(this.bb_pos+t):v$.LZ4_FRAME}method(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt8(this.bb_pos+t):y$.BUFFER}static startBodyCompression(t){t.startObject(2)}static addCodec(t,n){t.addFieldInt8(0,n,v$.LZ4_FRAME)}static addMethod(t,n){t.addFieldInt8(1,n,y$.BUFFER)}static endBodyCompression(t){return t.endObject()}static createBodyCompression(t,n,r){return Og.startBodyCompression(t),Og.addCodec(t,n),Og.addMethod(t,r),Og.endBodyCompression(t)}}let sIe=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}offset(){return this.bb.readInt64(this.bb_pos)}length(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createBuffer(t,n,r){return t.prep(8,16),t.writeInt64(BigInt(r??0)),t.writeInt64(BigInt(n??0)),t.offset()}},oIe=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}length(){return this.bb.readInt64(this.bb_pos)}nullCount(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createFieldNode(t,n,r){return t.prep(8,16),t.writeInt64(BigInt(r??0)),t.writeInt64(BigInt(n??0)),t.offset()}},kp=class Mz{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsRecordBatch(t,n){return(n||new Mz).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsRecordBatch(t,n){return t.setPosition(t.position()+zr),(n||new Mz).__init(t.readInt32(t.position())+t.position(),t)}length(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}nodes(t,n){const r=this.bb.__offset(this.bb_pos,6);return r?(n||new oIe).__init(this.bb.__vector(this.bb_pos+r)+t*16,this.bb):null}nodesLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}buffers(t,n){const r=this.bb.__offset(this.bb_pos,8);return r?(n||new sIe).__init(this.bb.__vector(this.bb_pos+r)+t*16,this.bb):null}buffersLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}compression(t){const n=this.bb.__offset(this.bb_pos,10);return n?(t||new Og).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}static startRecordBatch(t){t.startObject(4)}static addLength(t,n){t.addFieldInt64(0,n,BigInt("0"))}static addNodes(t,n){t.addFieldOffset(1,n,0)}static startNodesVector(t,n){t.startVector(16,n,8)}static addBuffers(t,n){t.addFieldOffset(2,n,0)}static startBuffersVector(t,n){t.startVector(16,n,8)}static addCompression(t,n){t.addFieldOffset(3,n,0)}static endRecordBatch(t){return t.endObject()}},ow=class Lz{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDictionaryBatch(t,n){return(n||new Lz).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDictionaryBatch(t,n){return t.setPosition(t.position()+zr),(n||new Lz).__init(t.readInt32(t.position())+t.position(),t)}id(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}data(t){const n=this.bb.__offset(this.bb_pos,6);return n?(t||new kp).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}isDelta(){const t=this.bb.__offset(this.bb_pos,8);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startDictionaryBatch(t){t.startObject(3)}static addId(t,n){t.addFieldInt64(0,n,BigInt("0"))}static addData(t,n){t.addFieldOffset(1,n,0)}static addIsDelta(t,n){t.addFieldInt8(2,+n,0)}static endDictionaryBatch(t){return t.endObject()}};var b$;(function(e){e[e.NONE=0]="NONE",e[e.Schema=1]="Schema",e[e.DictionaryBatch=2]="DictionaryBatch",e[e.RecordBatch=3]="RecordBatch",e[e.Tensor=4]="Tensor",e[e.SparseTensor=5]="SparseTensor"})(b$||(b$={}));let vg=class Cd{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsMessage(t,n){return(n||new Cd).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsMessage(t,n){return t.setPosition(t.position()+zr),(n||new Cd).__init(t.readInt32(t.position())+t.position(),t)}version(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):sx.V1}headerType(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readUint8(this.bb_pos+t):b$.NONE}header(t){const n=this.bb.__offset(this.bb_pos,8);return n?this.bb.__union(t,this.bb_pos+n):null}bodyLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,12);return r?(n||new Rs).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}static startMessage(t){t.startObject(5)}static addVersion(t,n){t.addFieldInt16(0,n,sx.V1)}static addHeaderType(t,n){t.addFieldInt8(1,n,b$.NONE)}static addHeader(t,n){t.addFieldOffset(2,n,0)}static addBodyLength(t,n){t.addFieldInt64(3,n,BigInt("0"))}static addCustomMetadata(t,n){t.addFieldOffset(4,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static endMessage(t){return t.endObject()}static finishMessageBuffer(t,n){t.finish(n)}static finishSizePrefixedMessageBuffer(t,n){t.finish(n,void 0,!0)}static createMessage(t,n,r,i,s,o){return Cd.startMessage(t),Cd.addVersion(t,n),Cd.addHeaderType(t,r),Cd.addHeader(t,i),Cd.addBodyLength(t,s),Cd.addCustomMetadata(t,o),Cd.endMessage(t)}};class sbt extends Cn{visit(t,n){return t==null||n==null?void 0:super.visit(t,n)}visitNull(t,n){return h1.startNull(n),h1.endNull(n)}visitInt(t,n){return bl.startInt(n),bl.addBitWidth(n,t.bitWidth),bl.addIsSigned(n,t.isSigned),bl.endInt(n)}visitFloat(t,n){return Yd.startFloatingPoint(n),Yd.addPrecision(n,t.precision),Yd.endFloatingPoint(n)}visitBinary(t,n){return c1.startBinary(n),c1.endBinary(n)}visitBool(t,n){return f1.startBool(n),f1.endBool(n)}visitUtf8(t,n){return m1.startUtf8(n),m1.endUtf8(n)}visitDecimal(t,n){return xu.startDecimal(n),xu.addScale(n,t.scale),xu.addPrecision(n,t.precision),xu.addBitWidth(n,t.bitWidth),xu.endDecimal(n)}visitDate(t,n){return AP.startDate(n),AP.addUnit(n,t.unit),AP.endDate(n)}visitTime(t,n){return D2.startTime(n),D2.addUnit(n,t.unit),D2.addBitWidth(n,t.bitWidth),D2.endTime(n)}visitTimestamp(t,n){const r=t.timezone&&n.createString(t.timezone)||void 0;return P2.startTimestamp(n),P2.addUnit(n,t.unit),r!==void 0&&P2.addTimezone(n,r),P2.endTimestamp(n)}visitInterval(t,n){return Kd.startInterval(n),Kd.addUnit(n,t.unit),Kd.endInterval(n)}visitDuration(t,n){return qd.startDuration(n),qd.addUnit(n,t.unit),qd.endDuration(n)}visitList(t,n){return d1.startList(n),d1.endList(n)}visitStruct(t,n){return p1.startStruct_(n),p1.endStruct_(n)}visitUnion(t,n){Dv.startTypeIdsVector(n,t.typeIds.length);const r=Dv.createTypeIdsVector(n,t.typeIds);return Dv.startUnion(n),Dv.addMode(n,t.mode),Dv.addTypeIds(n,r),Dv.endUnion(n)}visitDictionary(t,n){const r=this.visit(t.indices,n);return Up.startDictionaryEncoding(n),Up.addId(n,BigInt(t.id)),Up.addIsOrdered(n,t.isOrdered),r!==void 0&&Up.addIndexType(n,r),Up.endDictionaryEncoding(n)}visitFixedSizeBinary(t,n){return Wd.startFixedSizeBinary(n),Wd.addByteWidth(n,t.byteWidth),Wd.endFixedSizeBinary(n)}visitFixedSizeList(t,n){return Gd.startFixedSizeList(n),Gd.addListSize(n,t.listSize),Gd.endFixedSizeList(n)}visitMap(t,n){return IP.startMap(n),IP.addKeysSorted(n,t.keysSorted),IP.endMap(n)}}const Z8=new sbt;function obt(e,t=new Map){return new Tr(ubt(e,t),RP(e.metadata),t)}function aIe(e){return new Bl(e.count,uIe(e.columns),lIe(e.columns))}function abt(e){return new Ph(aIe(e.data),e.id,e.isDelta)}function ubt(e,t){return(e.fields||[]).filter(Boolean).map(n=>Fr.fromJSON(n,t))}function Zce(e,t){return(e.children||[]).filter(Boolean).map(n=>Fr.fromJSON(n,t))}function uIe(e){return(e||[]).reduce((t,n)=>[...t,new ey(n.count,lbt(n.VALIDITY)),...uIe(n.children)],[])}function lIe(e,t=[]){for(let n=-1,r=(e||[]).length;++n<r;){const i=e[n];i.VALIDITY&&t.push(new th(t.length,i.VALIDITY.length)),i.TYPE_ID&&t.push(new th(t.length,i.TYPE_ID.length)),i.OFFSET&&t.push(new th(t.length,i.OFFSET.length)),i.DATA&&t.push(new th(t.length,i.DATA.length)),t=lIe(i.children,t)}return t}function lbt(e){return(e||[]).reduce((t,n)=>t+ +(n===0),0)}function cbt(e,t){let n,r,i,s,o,a;return!t||!(s=e.dictionary)?(o=tfe(e,Zce(e,t)),i=new Fr(e.name,o,e.nullable,RP(e.metadata))):t.has(n=s.id)?(r=(r=s.indexType)?efe(r):new Y0,a=new X0(t.get(n),r,n,s.isOrdered),i=new Fr(e.name,a,e.nullable,RP(e.metadata))):(r=(r=s.indexType)?efe(r):new Y0,t.set(n,o=tfe(e,Zce(e,t))),a=new X0(o,r,n,s.isOrdered),i=new Fr(e.name,a,e.nullable,RP(e.metadata))),i||null}function RP(e=[]){return new Map(e.map(({key:t,value:n})=>[t,n]))}function efe(e){return new nu(e.isSigned,e.bitWidth)}function tfe(e,t){const n=e.type.name;switch(n){case"NONE":return new km;case"null":return new km;case"binary":return new tI;case"utf8":return new ex;case"bool":return new nI;case"list":return new rx((t||[])[0]);case"struct":return new fa(t||[]);case"struct_":return new fa(t||[])}switch(n){case"int":{const r=e.type;return new nu(r.isSigned,r.bitWidth)}case"floatingpoint":{const r=e.type;return new K0(Po[r.precision])}case"decimal":{const r=e.type;return new r$(r.scale,r.precision,r.bitWidth)}case"date":{const r=e.type;return new tx(Rh[r.unit])}case"time":{const r=e.type;return new Rm(Wt[r.unit],r.bitWidth)}case"timestamp":{const r=e.type;return new i$(Wt[r.unit],r.timezone)}case"interval":{const r=e.type;return new nx(Nh[r.unit])}case"duration":{const r=e.type;return new s$(Wt[r.unit])}case"union":{const r=e.type,[i,...s]=(r.mode+"").toLowerCase(),o=i.toUpperCase()+s.join("");return new rI(Zu[o],r.typeIds||[],t||[])}case"fixedsizebinary":{const r=e.type;return new o$(r.byteWidth)}case"fixedsizelist":{const r=e.type;return new ix(r.listSize,(t||[])[0])}case"map":{const r=e.type;return new iI((t||[])[0],r.keysSorted)}}throw new Error(`Unrecognized type: "${n}"`)}var fbt=PAe,dbt=c$;class Xd{static fromJSON(t,n){const r=new Xd(0,Va.V5,n);return r._createHeader=hbt(t,n),r}static decode(t){t=new dbt(Dr(t));const n=vg.getRootAsMessage(t),r=n.bodyLength(),i=n.version(),s=n.headerType(),o=new Xd(r,i,s);return o._createHeader=pbt(n,s),o}static encode(t){const n=new fbt;let r=-1;return t.isSchema()?r=Tr.encode(n,t.header()):t.isRecordBatch()?r=Bl.encode(n,t.header()):t.isDictionaryBatch()&&(r=Ph.encode(n,t.header())),vg.startMessage(n),vg.addVersion(n,Va.V5),vg.addHeader(n,r),vg.addHeaderType(n,t.headerType),vg.addBodyLength(n,BigInt(t.bodyLength)),vg.finishMessageBuffer(n,vg.endMessage(n)),n.asUint8Array()}static from(t,n=0){if(t instanceof Tr)return new Xd(0,Va.V5,Qs.Schema,t);if(t instanceof Bl)return new Xd(n,Va.V5,Qs.RecordBatch,t);if(t instanceof Ph)return new Xd(n,Va.V5,Qs.DictionaryBatch,t);throw new Error(`Unrecognized Message header: ${t}`)}get type(){return this.headerType}get version(){return this._version}get headerType(){return this._headerType}get bodyLength(){return this._bodyLength}header(){return this._createHeader()}isSchema(){return this.headerType===Qs.Schema}isRecordBatch(){return this.headerType===Qs.RecordBatch}isDictionaryBatch(){return this.headerType===Qs.DictionaryBatch}constructor(t,n,r,i){this._version=n,this._headerType=r,this.body=new Uint8Array(0),i&&(this._createHeader=()=>i),this._bodyLength=Xf(t)}}class Bl{get nodes(){return this._nodes}get length(){return this._length}get buffers(){return this._buffers}constructor(t,n,r){this._nodes=n,this._buffers=r,this._length=Xf(t)}}class Ph{get id(){return this._id}get data(){return this._data}get isDelta(){return this._isDelta}get length(){return this.data.length}get nodes(){return this.data.nodes}get buffers(){return this.data.buffers}constructor(t,n,r=!1){this._data=t,this._isDelta=r,this._id=Xf(n)}}class th{constructor(t,n){this.offset=Xf(t),this.length=Xf(n)}}class ey{constructor(t,n){this.length=Xf(t),this.nullCount=Xf(n)}}function hbt(e,t){return()=>{switch(t){case Qs.Schema:return Tr.fromJSON(e);case Qs.RecordBatch:return Bl.fromJSON(e);case Qs.DictionaryBatch:return Ph.fromJSON(e)}throw new Error(`Unrecognized Message type: { name: ${Qs[t]}, type: ${t} }`)}}function pbt(e,t){return()=>{switch(t){case Qs.Schema:return Tr.decode(e.header(new Pd),new Map,e.version());case Qs.RecordBatch:return Bl.decode(e.header(new kp),e.version());case Qs.DictionaryBatch:return Ph.decode(e.header(new ow),e.version())}throw new Error(`Unrecognized Message type: { name: ${Qs[t]}, type: ${t} }`)}}Fr.encode=Tbt;Fr.decode=xbt;Fr.fromJSON=cbt;Tr.encode=Sbt;Tr.decode=mbt;Tr.fromJSON=obt;Bl.encode=Cbt;Bl.decode=gbt;Bl.fromJSON=aIe;Ph.encode=Abt;Ph.decode=ybt;Ph.fromJSON=abt;ey.encode=Ibt;ey.decode=bbt;th.encode=kbt;th.decode=vbt;function mbt(e,t=new Map,n=Va.V5){const r=Ebt(e,t);return new Tr(r,NP(e),t,n)}function gbt(e,t=Va.V5){if(e.compression()!==null)throw new Error("Record batch compression not implemented");return new Bl(e.length(),_bt(e),wbt(e,t))}function ybt(e,t=Va.V5){return new Ph(Bl.decode(e.data(),t),e.id(),e.isDelta())}function vbt(e){return new th(e.offset(),e.length())}function bbt(e){return new ey(e.length(),e.nullCount())}function _bt(e){const t=[];for(let n,r=-1,i=-1,s=e.nodesLength();++r<s;)(n=e.nodes(r))&&(t[++i]=ey.decode(n));return t}function wbt(e,t){const n=[];for(let r,i=-1,s=-1,o=e.buffersLength();++i<o;)(r=e.buffers(i))&&(t<Va.V4&&(r.bb_pos+=8*(i+1)),n[++s]=th.decode(r));return n}function Ebt(e,t){const n=[];for(let r,i=-1,s=-1,o=e.fieldsLength();++i<o;)(r=e.fields(i))&&(n[++s]=Fr.decode(r,t));return n}function nfe(e,t){const n=[];for(let r,i=-1,s=-1,o=e.childrenLength();++i<o;)(r=e.children(i))&&(n[++s]=Fr.decode(r,t));return n}function xbt(e,t){let n,r,i,s,o,a;return!t||!(a=e.dictionary())?(i=ife(e,nfe(e,t)),r=new Fr(e.name(),i,e.nullable(),NP(e))):t.has(n=Xf(a.id()))?(s=(s=a.indexType())?rfe(s):new Y0,o=new X0(t.get(n),s,n,a.isOrdered()),r=new Fr(e.name(),o,e.nullable(),NP(e))):(s=(s=a.indexType())?rfe(s):new Y0,t.set(n,i=ife(e,nfe(e,t))),o=new X0(i,s,n,a.isOrdered()),r=new Fr(e.name(),o,e.nullable(),NP(e))),r||null}function NP(e){const t=new Map;if(e)for(let n,r,i=-1,s=Math.trunc(e.customMetadataLength());++i<s;)(n=e.customMetadata(i))&&(r=n.key())!=null&&t.set(r,n.value());return t}function rfe(e){return new nu(e.isSigned(),e.bitWidth())}function ife(e,t){const n=e.typeType();switch(n){case bi.NONE:return new km;case bi.Null:return new km;case bi.Binary:return new tI;case bi.Utf8:return new ex;case bi.Bool:return new nI;case bi.List:return new rx((t||[])[0]);case bi.Struct_:return new fa(t||[])}switch(n){case bi.Int:{const r=e.type(new bl);return new nu(r.isSigned(),r.bitWidth())}case bi.FloatingPoint:{const r=e.type(new Yd);return new K0(r.precision())}case bi.Decimal:{const r=e.type(new xu);return new r$(r.scale(),r.precision(),r.bitWidth())}case bi.Date:{const r=e.type(new AP);return new tx(r.unit())}case bi.Time:{const r=e.type(new D2);return new Rm(r.unit(),r.bitWidth())}case bi.Timestamp:{const r=e.type(new P2);return new i$(r.unit(),r.timezone())}case bi.Interval:{const r=e.type(new Kd);return new nx(r.unit())}case bi.Duration:{const r=e.type(new qd);return new s$(r.unit())}case bi.Union:{const r=e.type(new Dv);return new rI(r.mode(),r.typeIdsArray()||[],t||[])}case bi.FixedSizeBinary:{const r=e.type(new Wd);return new o$(r.byteWidth())}case bi.FixedSizeList:{const r=e.type(new Gd);return new ix(r.listSize(),(t||[])[0])}case bi.Map:{const r=e.type(new IP);return new iI((t||[])[0],r.keysSorted())}}throw new Error(`Unrecognized type: "${bi[n]}" (${n})`)}function Sbt(e,t){const n=t.fields.map(s=>Fr.encode(e,s));Pd.startFieldsVector(e,n.length);const r=Pd.createFieldsVector(e,n),i=t.metadata&&t.metadata.size>0?Pd.createCustomMetadataVector(e,[...t.metadata].map(([s,o])=>{const a=e.createString(`${s}`),u=e.createString(`${o}`);return Rs.startKeyValue(e),Rs.addKey(e,a),Rs.addValue(e,u),Rs.endKeyValue(e)})):-1;return Pd.startSchema(e),Pd.addFields(e,r),Pd.addEndianness(e,Rbt?ox.Little:ox.Big),i!==-1&&Pd.addCustomMetadata(e,i),Pd.endSchema(e)}function Tbt(e,t){let n=-1,r=-1,i=-1;const s=t.type;let o=t.typeId;Sn.isDictionary(s)?(o=s.dictionary.typeId,i=Z8.visit(s,e),r=Z8.visit(s.dictionary,e)):r=Z8.visit(s,e);const a=(s.children||[]).map(c=>Fr.encode(e,c)),u=lc.createChildrenVector(e,a),l=t.metadata&&t.metadata.size>0?lc.createCustomMetadataVector(e,[...t.metadata].map(([c,f])=>{const d=e.createString(`${c}`),h=e.createString(`${f}`);return Rs.startKeyValue(e),Rs.addKey(e,d),Rs.addValue(e,h),Rs.endKeyValue(e)})):-1;return t.name&&(n=e.createString(t.name)),lc.startField(e),lc.addType(e,r),lc.addTypeType(e,o),lc.addChildren(e,u),lc.addNullable(e,!!t.nullable),n!==-1&&lc.addName(e,n),i!==-1&&lc.addDictionary(e,i),l!==-1&&lc.addCustomMetadata(e,l),lc.endField(e)}function Cbt(e,t){const n=t.nodes||[],r=t.buffers||[];kp.startNodesVector(e,n.length);for(const o of n.slice().reverse())ey.encode(e,o);const i=e.endVector();kp.startBuffersVector(e,r.length);for(const o of r.slice().reverse())th.encode(e,o);const s=e.endVector();return kp.startRecordBatch(e),kp.addLength(e,BigInt(t.length)),kp.addNodes(e,i),kp.addBuffers(e,s),kp.endRecordBatch(e)}function Abt(e,t){const n=Bl.encode(e,t.data);return ow.startDictionaryBatch(e),ow.addId(e,BigInt(t.id)),ow.addIsDelta(e,t.isDelta),ow.addData(e,n),ow.endDictionaryBatch(e)}function Ibt(e,t){return oIe.createFieldNode(e,BigInt(t.length),BigInt(t.nullCount))}function kbt(e,t){return sIe.createBuffer(e,BigInt(t.offset),BigInt(t.length))}const Rbt=(()=>{const e=new ArrayBuffer(2);return new DataView(e).setInt16(0,256,!0),new Int16Array(e)[0]===256})(),Fz="ARROW1",YX=new Uint8Array(Fz.length);for(let e=0;e<Fz.length;e+=1)YX[e]=Fz.codePointAt(e);YX.length;class cs extends Cn{static assemble(...t){const n=i=>i.flatMap(s=>Array.isArray(s)?n(s):s instanceof _l?s.data.children:s.data),r=new cs;return r.visitMany(n(t)),r}constructor(){super(),this._byteLength=0,this._nodes=[],this._buffers=[],this._bufferRegions=[]}visit(t){if(t instanceof hr)return this.visitMany(t.data),this;const{type:n}=t;if(!Sn.isDictionary(n)){const{length:r}=t;if(r>2147483647)throw new RangeError("Cannot write arrays larger than 2^31 - 1 in length");if(Sn.isUnion(n))this.nodes.push(new ey(r,0));else{const{nullCount:i}=t;Sn.isNull(n)||Bf.call(this,i<=0?new Uint8Array(0):a$(t.offset,r,t.nullBitmap)),this.nodes.push(new ey(r,i))}}return super.visit(t)}visitNull(t){return this}visitDictionary(t){return this.visit(t.clone(t.type.indices))}get nodes(){return this._nodes}get buffers(){return this._buffers}get byteLength(){return this._byteLength}get bufferRegions(){return this._bufferRegions}}function Bf(e){const t=e.byteLength+7&-8;return this.buffers.push(e),this.bufferRegions.push(new th(this._byteLength,t)),this._byteLength+=t,this}function Nbt(e){var t;const{type:n,length:r,typeIds:i,valueOffsets:s}=e;if(Bf.call(this,i),n.mode===Zu.Sparse)return jz.call(this,e);if(n.mode===Zu.Dense){if(e.offset<=0)return Bf.call(this,s),jz.call(this,e);{const o=new Int32Array(r),a=Object.create(null),u=Object.create(null);for(let l,c,f=-1;++f<r;)(l=i[f])!==void 0&&((c=a[l])===void 0&&(c=a[l]=s[f]),o[f]=s[f]-c,u[l]=((t=u[l])!==null&&t!==void 0?t:0)+1);Bf.call(this,o),this.visitMany(e.children.map((l,c)=>{const f=n.typeIds[c],d=a[f],h=u[f];return l.slice(d,Math.min(r,h))}))}}return this}function Dbt(e){let t;return e.nullCount>=e.length?Bf.call(this,new Uint8Array(0)):(t=e.values)instanceof Uint8Array?Bf.call(this,a$(e.offset,e.length,t)):Bf.call(this,vAe(e.values))}function ig(e){return Bf.call(this,e.values.subarray(0,e.length*e.stride))}function cIe(e){const{length:t,values:n,valueOffsets:r}=e,{[0]:i,[t]:s}=r,o=Math.min(s-i,n.byteLength-i);return Bf.call(this,dCe(-i,t+1,r)),Bf.call(this,n.subarray(i,i+o)),this}function KX(e){const{length:t,valueOffsets:n}=e;if(n){const{[0]:r,[t]:i}=n;return Bf.call(this,dCe(-r,t+1,n)),this.visit(e.children[0].slice(r,i-r))}return this.visit(e.children[0])}function jz(e){return this.visitMany(e.type.children.map((t,n)=>e.children[n]).filter(Boolean))[0]}cs.prototype.visitBool=Dbt;cs.prototype.visitInt=ig;cs.prototype.visitFloat=ig;cs.prototype.visitUtf8=cIe;cs.prototype.visitBinary=cIe;cs.prototype.visitFixedSizeBinary=ig;cs.prototype.visitDate=ig;cs.prototype.visitTimestamp=ig;cs.prototype.visitTime=ig;cs.prototype.visitDecimal=ig;cs.prototype.visitList=KX;cs.prototype.visitStruct=jz;cs.prototype.visitUnion=Nbt;cs.prototype.visitInterval=ig;cs.prototype.visitDuration=ig;cs.prototype.visitFixedSizeList=KX;cs.prototype.visitMap=KX;class fIe extends $Ae{static throughNode(t){throw new Error('"throughNode" not available in this environment')}static throughDOM(t,n){throw new Error('"throughDOM" not available in this environment')}constructor(t){super(),this._position=0,this._started=!1,this._sink=new Q8,this._schema=null,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._dictionaryDeltaOffsets=new Map,Uy(t)||(t={autoDestroy:!0,writeLegacyIpcFormat:!1}),this._autoDestroy=typeof t.autoDestroy=="boolean"?t.autoDestroy:!0,this._writeLegacyIpcFormat=typeof t.writeLegacyIpcFormat=="boolean"?t.writeLegacyIpcFormat:!1}toString(t=!1){return this._sink.toString(t)}toUint8Array(t=!1){return this._sink.toUint8Array(t)}writeAll(t){return G6(t)?t.then(n=>this.writeAll(n)):Y6(t)?ZX(this,t):JX(this,t)}get closed(){return this._sink.closed}[Symbol.asyncIterator](){return this._sink[Symbol.asyncIterator]()}toDOMStream(t){return this._sink.toDOMStream(t)}toNodeStream(t){return this._sink.toNodeStream(t)}close(){return this.reset()._sink.close()}abort(t){return this.reset()._sink.abort(t)}finish(){return this._autoDestroy?this.close():this.reset(this._sink,this._schema),this}reset(t=this._sink,n=null){return t===this._sink||t instanceof Q8?this._sink=t:(this._sink=new Q8,t&&Fyt(t)?this.toDOMStream({type:"bytes"}).pipeTo(t):t&&jyt(t)&&this.toNodeStream({objectMode:!1}).pipe(t)),this._started&&this._schema&&this._writeFooter(this._schema),this._started=!1,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._dictionaryDeltaOffsets=new Map,(!n||!$z(n,this._schema))&&(n==null?(this._position=0,this._schema=null):(this._started=!0,this._schema=n,this._writeSchema(n))),this}write(t){let n=null;if(this._sink){if(t==null)return this.finish()&&void 0;if(t instanceof Iu&&!(n=t.schema))return this.finish()&&void 0;if(t instanceof _l&&!(n=t.schema))return this.finish()&&void 0}else throw new Error("RecordBatchWriter is closed");if(n&&!$z(n,this._schema)){if(this._started&&this._autoDestroy)return this.close();this.reset(this._sink,n)}t instanceof _l?t instanceof ibt||this._writeRecordBatch(t):t instanceof Iu?this.writeAll(t.batches):uX(t)&&this.writeAll(t)}_writeMessage(t,n=8){const r=n-1,i=Xd.encode(t),s=i.byteLength,o=this._writeLegacyIpcFormat?4:8,a=s+o+r&~r,u=a-s-o;return t.headerType===Qs.RecordBatch?this._recordBatchBlocks.push(new J0(a,t.bodyLength,this._position)):t.headerType===Qs.DictionaryBatch&&this._dictionaryBlocks.push(new J0(a,t.bodyLength,this._position)),this._writeLegacyIpcFormat||this._write(Int32Array.of(-1)),this._write(Int32Array.of(a-o)),s>0&&this._write(i),this._writePadding(u)}_write(t){if(this._started){const n=Dr(t);n&&n.byteLength>0&&(this._sink.write(n),this._position+=n.byteLength)}return this}_writeSchema(t){return this._writeMessage(Xd.from(t))}_writeFooter(t){return this._writeLegacyIpcFormat?this._write(Int32Array.of(0)):this._write(Int32Array.of(-1,0))}_writeMagic(){return this._write(YX)}_writePadding(t){return t>0?this._write(new Uint8Array(t)):this}_writeRecordBatch(t){const{byteLength:n,nodes:r,bufferRegions:i,buffers:s}=cs.assemble(t),o=new Bl(t.numRows,r,i),a=Xd.from(o,n);return this._writeDictionaries(t)._writeMessage(a)._writeBodyBuffers(s)}_writeDictionaryBatch(t,n,r=!1){this._dictionaryDeltaOffsets.set(n,t.length+(this._dictionaryDeltaOffsets.get(n)||0));const{byteLength:i,nodes:s,bufferRegions:o,buffers:a}=cs.assemble(new hr([t])),u=new Bl(t.length,s,o),l=new Ph(u,n,r),c=Xd.from(l,i);return this._writeMessage(c)._writeBodyBuffers(a)}_writeBodyBuffers(t){let n,r,i;for(let s=-1,o=t.length;++s<o;)(n=t[s])&&(r=n.byteLength)>0&&(this._write(n),(i=(r+7&-8)-r)>0&&this._writePadding(i));return this}_writeDictionaries(t){for(let[n,r]of t.dictionaries){let i=this._dictionaryDeltaOffsets.get(n)||0;if(i===0||(r=r==null?void 0:r.slice(i)).length>0)for(const s of r.data)this._writeDictionaryBatch(s,n,i>0),i+=s.length}return this}}class XX extends fIe{static writeAll(t,n){const r=new XX(n);return G6(t)?t.then(i=>r.writeAll(i)):Y6(t)?ZX(r,t):JX(r,t)}}class QX extends fIe{static writeAll(t){const n=new QX;return G6(t)?t.then(r=>n.writeAll(r)):Y6(t)?ZX(n,t):JX(n,t)}constructor(){super(),this._autoDestroy=!0}_writeSchema(t){return this._writeMagic()._writePadding(2)}_writeFooter(t){const n=Oz.encode(new Oz(t,Va.V5,this._recordBatchBlocks,this._dictionaryBlocks));return super._writeFooter(t)._write(n)._write(Int32Array.of(n.byteLength))._writeMagic()}}function JX(e,t){let n=t;t instanceof Iu&&(n=t.batches,e.reset(void 0,t.schema));for(const r of n)e.write(r);return e.finish()}function ZX(e,t){var n,r,i,s,o,a,u;return Lp(this,void 0,void 0,function*(){try{for(n=!0,r=mC(t);i=yield r.next(),s=i.done,!s;n=!0){u=i.value,n=!1;const l=u;e.write(l)}}catch(l){o={error:l}}finally{try{!n&&!s&&(a=r.return)&&(yield a.call(r))}finally{if(o)throw o.error}}return e.finish()})}function Pbt(e,t="stream"){return(t==="stream"?XX:QX).writeAll(e).toUint8Array(!0)}function eQ(e,t=1){return(e*t+63&-64||64)/t}function ty(e,t,n=e.BYTES_PER_ELEMENT){return new e(eQ(t,n))}function tQ(e){return e instanceof Nr?e:new Nr(e.type,0,e.length,e.nulls,e.buffers,null,e.dict)}function Obt(e){return new hr([tQ(e)])}const nQ=new TextEncoder;function $bt(e,t,n){const r=nQ.encode(n);return e.set(r,t),r.length}function Mbt(e,t,n){return nQ.encodeInto(n,e.subarray(t)).written}const Lbt=nQ.encodeInto?Mbt:$bt;function sfe(e,t){const n=ty(e.ArrayType,t);return{set(r,i){n[i]=r},data:()=>({type:e,length:t,buffers:[null,n]})}}function Fbt(e,t){const n=ty(e.ArrayType,t/8);return{set(r,i){r&&(n[i>>3]|=1<<i%8)},data:()=>({type:e,length:t,buffers:[null,n]})}}function jbt(e,t){const n=ty(e.ArrayType,t);return{set(r,i){n[i]=r/864e5|0},data:()=>({type:e,length:t,buffers:[null,n]})}}function Bbt(e,t){const n=ty(e.ArrayType,t<<1);return{set(r,i){const s=i<<1;n[s]=r%4294967296|0,n[s+1]=r/4294967296|0},data:()=>({type:e,length:t,buffers:[null,n]})}}function Ubt(e){const t=g$({type:e,nullValues:[null,void 0]});return{set(n,r){t.set(r,n)},data:()=>t.finish().flush()}}function zbt(e,t,n){const r=ty(Int32Array,t+1),i=ty(Uint8Array,3*n);let s=0;return{set(o,a){s+=Lbt(i,s,o),r[a+1]=s},data:()=>{const o=eQ(s),a=i.length>o?i.subarray(0,o):i;return{type:e,length:t,buffers:[r,a]}}}}function Vbt(e,t){const n=[],r=ty(e.indices.ArrayType,t),i=Object.create(null);let s=-1,o=0;return{set(a,u){const l=String(a);let c=i[l];c===void 0&&(o+=l.length,i[l]=c=++s,n.push(l)),r[u]=c},data:()=>({type:e,length:t,buffers:[null,r],dict:Hbt(e.dictionary,n,o)})}}function Hbt(e,t,n){const r=zbt(e,t.length,n);return t.forEach(r.set),Obt(r.data())}function qbt(e,t){const n=ty(Uint8Array,t/8);let r=0;return{set(i,s){i==null?++r:(e.set(i,s),n[s>>3]|=1<<s%8)},data:()=>{const i=e.data();return r&&(i.nulls=r,i.buffers[2]=n),i}}}function Wbt(e,t,n=!0){let r;switch(e.typeId){case re.Int:r=e.bitWidth<64?sfe:null;break;case re.Float:r=e.precision>0?sfe:null;break;case re.Dictionary:r=e.dictionary.typeId===re.Utf8&&e.indices.typeId===re.Int&&e.indices.bitWidth<64?Vbt:null;break;case re.Bool:r=Fbt;break;case re.Date:r=e.unit?Bbt:jbt;break}return r==null?Ubt(e):n?qbt(r(e,t),t):r(e,t)}function Gbt(e,t){const n=e.length,r=eQ(n,e.BYTES_PER_ELEMENT);let i=e;return n!==r&&(i=new e.constructor(r),i.set(e)),tQ({type:t,length:n,buffers:[null,i]})}function dIe(e,t,n,r,i=!0){const s=Wbt(r,e,i);return t(n,s.set),tQ(s.data())}function rQ(e){if(e instanceof Sn||e==null)return e;switch(e){case re.Binary:return new tI;case re.Bool:return new nI;case re.DateDay:return new evt;case re.DateMillisecond:case re.Date:return new tvt;case re.Dictionary:return new X0(new ex,new Y0);case re.Float16:return new OCe;case re.Float32:return new vX;case re.Float64:case re.Float:return new bX;case re.Int8:return new fX;case re.Int16:return new dX;case re.Int32:case re.Int:return new Y0;case re.Int64:return new hX;case re.IntervalDayTime:return new ovt;case re.Interval:case re.IntervalYearMonth:return new avt;case re.Null:return new km;case re.TimeMicrosecond:return new ivt;case re.TimeMillisecond:case re.Time:return new rvt;case re.TimeNanosecond:return new svt;case re.TimeSecond:return new nvt;case re.Uint8:return new pX;case re.Uint16:return new mX;case re.Uint32:return new gX;case re.Uint64:return new yX;case re.Utf8:return new ex;default:xn(`Unsupported type code: ${Ih(e)}. Use a data type constructor instead?`)}}function Ybt(e){return e.getUTCHours()===0&&e.getUTCMinutes()===0&&e.getUTCSeconds()===0&&e.getUTCMilliseconds()===0}function hIe(e,t){const n=Bz();return e(t,n.add),n}function Bz(){const e={count:0,nulls:0,bools:0,nums:0,ints:0,bigints:0,min:1/0,max:-1/0,digits:0,dates:0,utcdays:0,strings:0,strlen:0,arrays:0,minlen:1/0,maxlen:0,structs:0,add(t){if(++e.count,t==null){++e.nulls;return}const n=typeof t;if(n==="string")++e.strings;else if(n==="number")++e.nums,t<e.min&&(e.min=t),t>e.max&&(e.max=t),Number.isInteger(t)&&++e.ints;else if(n==="boolean")++e.bools;else if(n==="object")if(Im(t))++e.dates,Ybt(t)&&++e.utcdays;else if(l1(t)){++e.arrays,t.length<e.minlen&&(e.minlen=t.length),t.length>e.maxlen&&(e.maxlen=t.length);const r=e.array_prof||(e.array_prof=Bz());t.forEach(r.add)}else{++e.structs;const r=e.struct_prof||(e.struct_prof={});for(const i in t)(r[i]||(r[i]=Bz())).add(t[i])}else n==="bigint"&&(++e.bigints,t<e.min&&(e.min=t),t>e.max&&(e.max=t))},type(){return rQ(Kbt(e))}};return e}function Kbt(e){const t=e.count-e.nulls;if(t===0)return re.Null;if(e.ints===t){const n=Math.max(Math.abs(e.min)-1,e.max);return e.min<0?n>=2**31?re.Float64:n<128?re.Int8:n<32768?re.Int16:re.Int32:n>=2**32?re.Float64:n<256?re.Uint8:n<65536?re.Uint16:re.Uint32}else{if(e.nums===t)return re.Float64;if(e.bigints===t){const n=-e.min>e.max?-e.min-1n:e.max;return e.min<0?n<2**63?re.Int64:xn(`BigInt exceeds 64 bits: ${n}`):e.max<2**64?re.Uint64:xn(`BigInt exceeds 64 bits: ${e.max}`)}else{if(e.bools===t)return re.Bool;if(e.utcdays===t)return re.DateDay;if(e.dates===t)return re.DateMillisecond;if(e.arrays===t){const n=Fr.new("value",e.array_prof.type(),!0);return e.minlen===e.maxlen?new ix(e.minlen,n):new rx(n)}else if(e.structs===t){const n=e.struct_prof;return new fa(Object.keys(n).map(r=>Fr.new(r,n[r].type(),!0)))}else{if(e.strings>0)return re.Dictionary;xn("Type inference failure")}}}}function Xbt(e,t,n,r,i,s=!0){if(i=rQ(i),!i){const o=hIe(r,t);s=o.nulls>0,i=o.type()}return dIe(n,r,t,i,s)}function Qbt(e,t,n,r,i,s=!0){i=rQ(i);const o=e.column(t),a=!(e.isFiltered()||e.isOrdered()),u=Jbt(o);if(u&&a&&ofe(u.type,i))return u;const l=o.data;if(Nk(l)){const c=Zbt(l);if(a&&c&&ofe(c,i))return Gbt(l,c);i=i||c,s=!1}if(!i){const c=hIe(r,o);s=c.nulls>0,i=c.type()}return dIe(n,r,o,i,s)}function Jbt(e){return e instanceof hr?e:e.vector instanceof hr?e.vector:null}function Zbt(e){const n={Float32Array:vX,Float64Array:bX,Int8Array:fX,Int16Array:dX,Int32Array:Y0,Uint8Array:pX,Uint16Array:mX,Uint32Array:gX,BigInt64Array:hX,BigUint64Array:yX}[e.constructor.name];return n?new n:null}function ofe(e,t){return!e||!t?!0:e.compareTo(t)}function e_t(e,t,n){const r=Math.min(e.length,n+t);return(i,s)=>{for(let o=n;o<r;++o)s(e[o][i],o)}}function t_t(e,t,n){const r=n===0&&e.numRows()<=t&&!e.isFiltered()&&!e.isOrdered();return(i,s)=>{let o=-1;r&&l1(i.data)?i.data.forEach(s):e.scan(a=>s(i.get(a),++o),!0,t,n)}}const n_t=()=>xn("Apache Arrow not imported, see https://github.com/uwdata/arquero#usage");function r_t(){try{return Iu}catch{n_t()}}function pIe(e,t={}){const{types:n={}}=t,{dataFrom:r,names:i,nrows:s,scan:o}=i_t(e,t),a={};i.forEach(l=>{const c=r(e,l,s,o,n[l]);c.length!==s&&xn("Column length mismatch"),a[l]=c});const u=r_t();return new u(a)}function i_t(e,t){const{columns:n,limit:r=1/0,offset:i=0}=t,s=gi(n)?n(e):dr(n)?n:null;if(dr(e))return{dataFrom:Xbt,names:s||Object.keys(e[0]),nrows:Math.min(r,e.length-i),scan:e_t(e,r,i)};if(s_t(e))return{dataFrom:Qbt,names:s||e.columnNames(),nrows:Math.min(r,e.numRows()-i),scan:t_t(e,r,i)};xn("Unsupported input data type")}function s_t(e){return e&&gi(e.reify)}function o_t(e,t={}){const{format:n,...r}=t,i=n||"stream";if(!["stream","file"].includes(i))throw Error("Unrecognised output format");return Pbt(pIe(e,r),n)}function a_t(e){return e.getUTCHours()===0&&e.getUTCMinutes()===0&&e.getUTCSeconds()===0&&e.getUTCMilliseconds()===0}function u_t(e,t={}){let n=0,r=0,i=0,s=0,o=0,a=0;return e(u=>{if(++n,u==null){++r;return}const l=typeof u;if(l==="object"&&Im(u))++i,a_t(u)&&++s;else if(l==="number"&&(++o,u===u&&(u|0)!==u)){const c=u+"",f=c.indexOf(".");if(f>=0){const d=c.indexOf("e"),h=d>0?d:c.length;a=Math.max(a,h-f-1)}}}),{align:(r+o+i)/n>.5?"r":"l",format:{utc:i===s,digits:Math.min(a,t.maxdigits||6)}}}function r4(e,t){return gi(t)?t(e):t||e.columnNames()}function mIe(e,t,n){const r=n.format||{},i=n.align||{},s={},o={};return t.forEach(a=>{const u=u_t(l_t(e,a),n);o[a]=i[a]||u.align,s[a]=r[a]||u.format}),{align:o,format:s}}function l_t(e,t){const n=e.column(t);return r=>e.scan(i=>r(n.get(i)))}function iQ(e,t,n=100,r,i){const s=e.data(),o=t.length;e.scan(a=>{i.row(a);for(let u=0;u<o;++u){const l=t[u];i.cell(s[t[u]].get(a),l,u)}},!0,n,r)}function c_t(e,t={}){const n=r4(e,t.columns),r=t.format||{},i=t.delimiter||",",s=new RegExp(`["${i}
\r]`),o=l=>l==null?"":Im(l)?q6(l,!0):s.test(l+="")?'"'+l.replace(/"/g,'""')+'"':l,a=n.map(o);let u="";return iQ(e,n,t.limit||1/0,t.offset,{row(){u+=a.join(i)+`
`},cell(l,c,f){a[f]=o(r[c]?r[c](l):l)}}),u+a.join(i)}function gIe(e,t={}){if(gi(t))return t(e)+"";const n=typeof e;if(n==="object"){if(Im(e))return t.utc?q6(e):F2e(e);{const r=JSON.stringify(e,(s,o)=>Nk(o)?Array.from(o):o),i=t.maxlen||30;return r.length>i?r.slice(0,28)+""+(r[0]==="["?"]":"}"):r}}else if(n==="number"){const r=t.digits||0;let i;return e!==0&&((i=Math.abs(e))>=1e18||i<Math.pow(10,-r))?e.toExponential(r):e.toFixed(r)}else return e+""}function i4(e,t,n={}){for(const r in e)n[r]=t(e[r],r);return n}function f_t(e,t={}){const n=r4(e,t.columns),{align:r,format:i}=mIe(e,n,t),s=d_t(t),o=t.null,a=m=>m==="c"?"center":m==="r"?"right":"left",u=m=>m.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),l=(m,g)=>u(gIe(m,g)),c=o?(m,g)=>m==null?o(m):l(m,g):l;let f=-1,d=-1;const h=(m,g,y)=>{const v=y?a(r[g]):"",b=s[m]&&s[m](g,d,f)||"",w=(v?`text-align: ${v};`+(b?" ":""):"")+b;return`<${m}${w?` style="${w}"`:""}>`};let p=h("table")+h("thead")+h("tr",f)+n.map(m=>`${h("th",m,1)}${m}</th>`).join("")+"</tr></thead>"+h("tbody");return iQ(e,n,t.limit,t.offset,{row(m){f=m,p+=(++d?"</tr>":"")+h("tr")},cell(m,g){p+=h("td",g,1)+c(m,i[g])+"</td>"}}),p+"</tr></tbody></table>"}function d_t(e){return i4(e.style,t=>gi(t)?t:()=>t)}function h_t(e,t=!0,n=!1){return e===void 0||e?t:n}const p_t=e=>Im(e)?q6(e,!0):e;function m_t(e,t={}){const n=h_t(t.schema),r=t.format||{},i=r4(e,t.columns);let s="{";return n&&(s+='"schema":{"fields":'+JSON.stringify(i.map(o=>({name:o})))+'},"data":{'),i.forEach((o,a)=>{s+=(a?",":"")+JSON.stringify(o)+":[";const u=e.column(o),l=r[o]||p_t;let c=-1;e.scan(f=>{const d=u.get(f);s+=(++c?",":"")+JSON.stringify(l(d))},!0,t.limit,t.offset),s+="]"}),s+"}"+(n?"}":"")}function g_t(e,t={}){const n=r4(e,t.columns),{align:r,format:i}=mIe(e,n,t),s=u=>u==="c"?":-:":u==="r"?"-:":":-",o=u=>u.replace(/\|/g,"\\|");let a="|"+n.map(o).join("|")+`|
|`+n.map(u=>s(r[u])).join("|")+"|";return iQ(e,n,t.limit,t.offset,{row(){a+=`
|`},cell(u,l){a+=o(gIe(u,i[l]))+"|"}}),a+`
`}function yIe(e,t){for(const[n,r]of W6(t))e.set(n,r);return e}function y_t(e){return e.replace(/[.*+\-?^${}()|[\]\\]/g,"\\$&")}function Nm(e,t,n=new Map){return t=tu(t)?e.columnName(t):t,Bo(t)?n.set(t,t):dr(t)?t.forEach(r=>Nm(e,r,n)):gi(t)?Nm(e,t(e),n):wa(t)?yIe(n,t):xn(`Invalid column selection: ${Ih(t)}`),n}function s4(e,t){return e.toObject=t,e}function vIe(e){return dr(e)?e.map(vIe):e&&e.toObject?e.toObject():e}function ax(){return s4(e=>e.columnNames(),()=>({all:[]}))}function bIe(...e){return e=e.flat(),s4(t=>{const n=Nm(t,e);return t.columnNames(r=>!n.has(r))},()=>({not:vIe(e)}))}function v_t(e,t){return s4(n=>{let r=tu(e)?e:n.columnIndex(e),i=tu(t)?t:n.columnIndex(t);if(i<r){const s=i;i=r,r=s}return n.columnNames().slice(r,i+1)},()=>({range:[e,t]}))}function b_t(e){return Bo(e)&&(e=RegExp(y_t(e))),s4(t=>t.columnNames(n=>e.test(n)),()=>({matches:[e.source,e.flags]}))}function __t(e){return Nk(e.data)?e.data.constructor:Array}class zp extends L0t{static from(t,n){return new zp(B0t(t,n),n)}static new(t,n){if(t instanceof zp)return t;const r={},i=[];for(const[s,o]of W6(t))r[s]=o,i.push(s);return new zp(r,n||i)}constructor(t,n,r,i,s,o){i4(t,j0t,t),n=n||Object.keys(t);const a=n.length?t[n[0]].length:0;super(n,a,t,r,i,s,o)}create({data:t,names:n,filter:r,groups:i,order:s}){const o=r!==void 0?r:this.mask();return new zp(t||this._data,n||(t?null:this._names),o,i!==void 0?i:myt(this._group,r&&o),s!==void 0?s:this._order,this._params)}assign(...t){const n=this.numRows(),r=this.reify(),i=Zl(r).groupby(r.groups());return t.forEach(s=>{s=zp.new(s),s.numRows()!==n&&xn("Assign row counts do not match"),s=s.reify(),s.columnNames(o=>i.add(o,s.column(o)))}),this.create(i.new())}columns(){return this._data}column(t){return this._data[t]}columnAt(t){return this._data[this._names[t]]}array(t,n=Array){const r=this.column(t),i=new n(this.numRows());let s=-1;return this.scan(o=>i[++s]=r.get(o),!0),i}get(t,n=0){const r=this.column(t);return this.isFiltered()||this.isOrdered()?r.get(this.indices()[n]):r.get(n)}getter(t){const n=this.column(t),r=this.isFiltered()||this.isOrdered()?this.indices():null;return r?i=>n.get(r[i]):n?i=>n.get(i):xn(`Unrecognized column: ${t}`)}object(t=0){return afe(this)(t)}objects(t={}){const{grouped:n,limit:r,offset:i}=t,s=Nm(this,t.columns||ax()),o=lCe(s),a=[];if(this.scan((u,l)=>a.push(o(u,l)),!0,r,i),n&&this.isGrouped()){const u=[];return this.scan(l=>u.push(l),!0,r,i),yyt(this,u,a,n)}return a}*[Symbol.iterator](){const t=afe(this),n=this.numRows();for(let r=0;r<n;++r)yield t(r)}reify(t){const n=t?t.length:this.numRows(),r=this._names;let i,s;if(!t&&!this.isOrdered())if(this.isFiltered())n===this.totalRows()&&(i=this.data());else return this;if(!i){const o=t?u=>t.forEach(u):u=>this.scan(u,!0),a=r.length;i={};for(let u=0;u<a;++u){const l=r[u],c=this.column(l),f=i[l]=new(__t(c))(n);let d=-1;o(h=>f[++d]=c.get(h))}this.isGrouped()&&(s=gyt(this.groups(),o,!!t,n))}return this.create({data:i,names:r,groups:s,filter:null,order:null})}transform(...t){return t.flat().reduce((n,r)=>r(n),this)}toArrow(t){return pIe(this,t)}toArrowBuffer(t){return o_t(this,t)}toCSV(t){return c_t(this,t)}toHTML(t){return f_t(this,t)}toJSON(t){return m_t(this,t)}toMarkdown(t){return g_t(this,t)}}function afe(e){let t=e._builder;if(!t){const n=lCe(e.columnNames()),r=e.data();if(e.isOrdered()||e.isFiltered()){const i=e.indices();t=s=>n(i[s],r)}else t=i=>n(i,r);e._builder=t}return t}class w_t{constructor(t){this._outputs=t}size(){return this._outputs.length}outputs(){return this._outputs}init(){return{}}add(){}rem(){}write(){}}function er(e,t,n,r){const i=n[e.type]||n.Default;if(i&&i(e,t,r)===!1)return;const s=E_t[e.type];s&&s(e,t,n)}const rD=(e,t,n)=>{er(e.argument,t,n,e)},e9=(e,t,n)=>{er(e.left,t,n,e),er(e.right,t,n,e)},ufe=(e,t,n)=>{er(e.test,t,n,e),er(e.consequent,t,n,e),e.alternate&&er(e.alternate,t,n,e)},t9=(e,t,n)=>{Od(e.params,t,n,e),er(e.body,t,n,e)},lfe=(e,t,n)=>{er(e.callee,t,n,e),Od(e.arguments,t,n,e)},Od=(e,t,n,r)=>{e.forEach(i=>er(i,t,n,r))},E_t={TemplateLiteral:(e,t,n)=>{Od(e.expressions,t,n,e),Od(e.quasis,t,n,e)},MemberExpression:(e,t,n)=>{er(e.object,t,n,e),er(e.property,t,n,e)},CallExpression:lfe,NewExpression:lfe,ArrayExpression:(e,t,n)=>{Od(e.elements,t,n,e)},AssignmentExpression:e9,AwaitExpression:rD,BinaryExpression:e9,LogicalExpression:e9,UnaryExpression:rD,UpdateExpression:rD,ConditionalExpression:ufe,ObjectExpression:(e,t,n)=>{Od(e.properties,t,n,e)},Property:(e,t,n)=>{er(e.key,t,n,e),er(e.value,t,n,e)},ArrowFunctionExpression:t9,FunctionExpression:t9,FunctionDeclaration:t9,VariableDeclaration:(e,t,n)=>{Od(e.declarations,t,n,e)},VariableDeclarator:(e,t,n)=>{er(e.id,t,n,e),er(e.init,t,n,e)},SpreadElement:(e,t,n)=>{er(e.argument,t,n,e)},BlockStatement:(e,t,n)=>{Od(e.body,t,n,e)},ExpressionStatement:(e,t,n)=>{er(e.expression,t,n,e)},IfStatement:ufe,ForStatement:(e,t,n)=>{er(e.init,t,n,e),er(e.test,t,n,e),er(e.update,t,n,e),er(e.body,t,n,e)},WhileStatement:(e,t,n)=>{er(e.test,t,n,e),er(e.body,t,n,e)},DoWhileStatement:(e,t,n)=>{er(e.body,t,n,e),er(e.test,t,n,e)},SwitchStatement:(e,t,n)=>{er(e.discriminant,t,n,e),Od(e.cases,t,n,e)},SwitchCase:(e,t,n)=>{e.test&&er(e.test,t,n,e),Od(e.consequent,t,n,e)},ReturnStatement:rD,Program:(e,t,n)=>{er(e.body[0],t,n,e)}};function _Ie(e){delete e.start,delete e.end,delete e.optional}function cfe(e){_Ie(e),delete e.object,delete e.property,delete e.computed,e.table||delete e.table}function x_t(e){return er(e,null,{Column:cfe,Constant:cfe,Default:_Ie}),e}function Ds(e,t){return t&&t.type===e}function S_t(e){return Ds(_yt,e)||Ds(byt,e)}function T_t(e){return gi(e)?e:()=>e}const C_t="Escaped functions are not valid as rollup or pivot values.";function A_t(e,t,n){e.aggronly&&xn(C_t);const r="(row,data)=>fn("+uCe(e.table.columnNames())+",$)";return{escape:oX.escape(r,T_t(t.expr),n)}}var I_t=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,370,1,81,2,71,10,50,3,123,2,54,14,32,10,3,1,11,3,46,10,8,0,46,9,7,2,37,13,2,9,6,1,45,0,13,2,49,13,9,3,2,11,83,11,7,0,3,0,158,11,6,9,7,3,56,1,2,6,3,1,3,2,10,0,11,1,3,6,4,4,193,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,84,14,5,9,243,14,166,9,71,5,2,1,3,3,2,0,2,1,13,9,120,6,3,6,4,0,29,9,41,6,2,3,9,0,10,10,47,15,406,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,10,1,2,0,49,6,4,4,14,9,5351,0,7,14,13835,9,87,9,39,4,60,6,26,9,1014,0,2,54,8,3,82,0,12,1,19628,1,4706,45,3,22,543,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,101,0,161,6,10,9,357,0,62,13,499,13,983,6,110,6,6,9,4759,9,787719,239],wIe=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,13,10,2,14,2,6,2,1,2,10,2,14,2,6,2,1,68,310,10,21,11,7,25,5,2,41,2,8,70,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,349,41,7,1,79,28,11,0,9,21,43,17,47,20,28,22,13,52,58,1,3,0,14,44,33,24,27,35,30,0,3,0,9,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,20,1,64,6,2,0,2,3,2,14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,159,52,19,3,21,2,31,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,14,0,72,26,38,6,186,43,117,63,32,7,3,0,3,7,2,1,2,23,16,0,2,0,95,7,3,38,17,0,2,0,29,0,11,39,8,0,22,0,12,45,20,0,19,72,264,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,16,0,2,12,2,33,125,0,80,921,103,110,18,195,2637,96,16,1071,18,5,4026,582,8634,568,8,30,18,78,18,29,19,47,17,3,32,20,6,18,689,63,129,74,6,0,67,12,65,1,2,0,29,6135,9,1237,43,8,8936,3,2,6,2,1,2,290,16,0,30,2,3,0,15,3,9,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,1845,30,7,5,262,61,147,44,11,6,17,0,322,29,19,43,485,27,757,6,2,3,2,1,2,14,2,196,60,67,8,0,1205,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42719,33,4153,7,221,3,5761,15,7472,16,621,2467,541,1507,4938,6,4191],k_t="-----------------------------------------------------------------------------------------------------------------------------------------------------",EIe="------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------",n9={3:"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile",5:"class enum extends super const export import",6:"enum",strict:"implements interface let package private protected public static yield",strictBind:"eval arguments"},r9="break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this",R_t={5:r9,"5module":r9+" export import",6:r9+" const class extends export import super"},N_t=/^in(stanceof)?$/,D_t=new RegExp("["+EIe+"]"),P_t=new RegExp("["+EIe+k_t+"]");function Uz(e,t){for(var n=65536,r=0;r<t.length;r+=2){if(n+=t[r],n>e)return!1;if(n+=t[r+1],n>=e)return!0}return!1}function Dm(e,t){return e<65?e===36:e<91?!0:e<97?e===95:e<123?!0:e<=65535?e>=170&&D_t.test(String.fromCharCode(e)):t===!1?!1:Uz(e,wIe)}function ux(e,t){return e<48?e===36:e<58?!0:e<65?!1:e<91?!0:e<97?e===95:e<123?!0:e<=65535?e>=170&&P_t.test(String.fromCharCode(e)):t===!1?!1:Uz(e,wIe)||Uz(e,I_t)}var or=function(t,n){n===void 0&&(n={}),this.label=t,this.keyword=n.keyword,this.beforeExpr=!!n.beforeExpr,this.startsExpr=!!n.startsExpr,this.isLoop=!!n.isLoop,this.isAssign=!!n.isAssign,this.prefix=!!n.prefix,this.postfix=!!n.postfix,this.binop=n.binop||null,this.updateContext=null};function ic(e,t){return new or(e,{beforeExpr:!0,binop:t})}var sc={beforeExpr:!0},mu={startsExpr:!0},sQ={};function Wn(e,t){return t===void 0&&(t={}),t.keyword=e,sQ[e]=new or(e,t)}var K={num:new or("num",mu),regexp:new or("regexp",mu),string:new or("string",mu),name:new or("name",mu),privateId:new or("privateId",mu),eof:new or("eof"),bracketL:new or("[",{beforeExpr:!0,startsExpr:!0}),bracketR:new or("]"),braceL:new or("{",{beforeExpr:!0,startsExpr:!0}),braceR:new or("}"),parenL:new or("(",{beforeExpr:!0,startsExpr:!0}),parenR:new or(")"),comma:new or(",",sc),semi:new or(";",sc),colon:new or(":",sc),dot:new or("."),question:new or("?",sc),questionDot:new or("?."),arrow:new or("=>",sc),template:new or("template"),invalidTemplate:new or("invalidTemplate"),ellipsis:new or("...",sc),backQuote:new or("`",mu),dollarBraceL:new or("${",{beforeExpr:!0,startsExpr:!0}),eq:new or("=",{beforeExpr:!0,isAssign:!0}),assign:new or("_=",{beforeExpr:!0,isAssign:!0}),incDec:new or("++/--",{prefix:!0,postfix:!0,startsExpr:!0}),prefix:new or("!/~",{beforeExpr:!0,prefix:!0,startsExpr:!0}),logicalOR:ic("||",1),logicalAND:ic("&&",2),bitwiseOR:ic("|",3),bitwiseXOR:ic("^",4),bitwiseAND:ic("&",5),equality:ic("==/!=/===/!==",6),relational:ic("</>/<=/>=",7),bitShift:ic("<</>>/>>>",8),plusMin:new or("+/-",{beforeExpr:!0,binop:9,prefix:!0,startsExpr:!0}),modulo:ic("%",10),star:ic("*",10),slash:ic("/",10),starstar:new or("**",{beforeExpr:!0}),coalesce:ic("??",1),_break:Wn("break"),_case:Wn("case",sc),_catch:Wn("catch"),_continue:Wn("continue"),_debugger:Wn("debugger"),_default:Wn("default",sc),_do:Wn("do",{isLoop:!0,beforeExpr:!0}),_else:Wn("else",sc),_finally:Wn("finally"),_for:Wn("for",{isLoop:!0}),_function:Wn("function",mu),_if:Wn("if"),_return:Wn("return",sc),_switch:Wn("switch"),_throw:Wn("throw",sc),_try:Wn("try"),_var:Wn("var"),_const:Wn("const"),_while:Wn("while",{isLoop:!0}),_with:Wn("with"),_new:Wn("new",{beforeExpr:!0,startsExpr:!0}),_this:Wn("this",mu),_super:Wn("super",mu),_class:Wn("class",mu),_extends:Wn("extends",sc),_export:Wn("export"),_import:Wn("import",mu),_null:Wn("null",mu),_true:Wn("true",mu),_false:Wn("false",mu),_in:Wn("in",{beforeExpr:!0,binop:7}),_instanceof:Wn("instanceof",{beforeExpr:!0,binop:7}),_typeof:Wn("typeof",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_void:Wn("void",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_delete:Wn("delete",{beforeExpr:!0,prefix:!0,startsExpr:!0})},Kc=/\r\n?|\n|\u2028|\u2029/,O_t=new RegExp(Kc.source,"g");function TS(e){return e===10||e===13||e===8232||e===8233}function xIe(e,t,n){n===void 0&&(n=e.length);for(var r=t;r<n;r++){var i=e.charCodeAt(r);if(TS(i))return r<n-1&&i===13&&e.charCodeAt(r+1)===10?r+2:r+1}return-1}var SIe=/[\u1680\u2000-\u200a\u202f\u205f\u3000\ufeff]/,yc=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g,TIe=Object.prototype,$_t=TIe.hasOwnProperty,M_t=TIe.toString,Fk=Object.hasOwn||function(e,t){return $_t.call(e,t)},ffe=Array.isArray||function(e){return M_t.call(e)==="[object Array]"},dfe=Object.create(null);function e0(e){return dfe[e]||(dfe[e]=new RegExp("^(?:"+e.replace(/ /g,"|")+")$"))}function ny(e){return e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode((e>>10)+55296,(e&1023)+56320))}var L_t=/(?:[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])/,sI=function(t,n){this.line=t,this.column=n};sI.prototype.offset=function(t){return new sI(this.line,this.column+t)};var o4=function(t,n,r){this.start=n,this.end=r,t.sourceFile!==null&&(this.source=t.sourceFile)};function CIe(e,t){for(var n=1,r=0;;){var i=xIe(e,r,t);if(i<0)return new sI(n,t-r);++n,r=i}}var zz={ecmaVersion:null,sourceType:"script",onInsertedSemicolon:null,onTrailingComma:null,allowReserved:null,allowReturnOutsideFunction:!1,allowImportExportEverywhere:!1,allowAwaitOutsideFunction:null,allowSuperOutsideMethod:null,allowHashBang:!1,checkPrivateFields:!0,locations:!1,onToken:null,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null,preserveParens:!1},hfe=!1;function F_t(e){var t={};for(var n in zz)t[n]=e&&Fk(e,n)?e[n]:zz[n];if(t.ecmaVersion==="latest"?t.ecmaVersion=1e8:t.ecmaVersion==null?(!hfe&&typeof console=="object"&&console.warn&&(hfe=!0,console.warn(`Since Acorn 8.0.0, options.ecmaVersion is required.
Defaulting to 2020, but this will stop working in the future.`)),t.ecmaVersion=11):t.ecmaVersion>=2015&&(t.ecmaVersion-=2009),t.allowReserved==null&&(t.allowReserved=t.ecmaVersion<5),(!e||e.allowHashBang==null)&&(t.allowHashBang=t.ecmaVersion>=14),ffe(t.onToken)){var r=t.onToken;t.onToken=function(i){return r.push(i)}}return ffe(t.onComment)&&(t.onComment=j_t(t,t.onComment)),t}function j_t(e,t){return function(n,r,i,s,o,a){var u={type:n?"Block":"Line",value:r,start:i,end:s};e.locations&&(u.loc=new o4(this,o,a)),e.ranges&&(u.range=[i,s]),t.push(u)}}var oI=1,CS=2,oQ=4,AIe=8,IIe=16,kIe=32,aQ=64,RIe=128,jk=256,uQ=oI|CS|jk;function lQ(e,t){return CS|(e?oQ:0)|(t?AIe:0)}var _$=0,cQ=1,sg=2,NIe=3,DIe=4,PIe=5,Bs=function(t,n,r){this.options=t=F_t(t),this.sourceFile=t.sourceFile,this.keywords=e0(R_t[t.ecmaVersion>=6?6:t.sourceType==="module"?"5module":5]);var i="";t.allowReserved!==!0&&(i=n9[t.ecmaVersion>=6?6:t.ecmaVersion===5?5:3],t.sourceType==="module"&&(i+=" await")),this.reservedWords=e0(i);var s=(i?i+" ":"")+n9.strict;this.reservedWordsStrict=e0(s),this.reservedWordsStrictBind=e0(s+" "+n9.strictBind),this.input=String(n),this.containsEsc=!1,r?(this.pos=r,this.lineStart=this.input.lastIndexOf(`
`,r-1)+1,this.curLine=this.input.slice(0,this.lineStart).split(Kc).length):(this.pos=this.lineStart=0,this.curLine=1),this.type=K.eof,this.value=null,this.start=this.end=this.pos,this.startLoc=this.endLoc=this.curPosition(),this.lastTokEndLoc=this.lastTokStartLoc=null,this.lastTokStart=this.lastTokEnd=this.pos,this.context=this.initialContext(),this.exprAllowed=!0,this.inModule=t.sourceType==="module",this.strict=this.inModule||this.strictDirective(this.pos),this.potentialArrowAt=-1,this.potentialArrowInForAwait=!1,this.yieldPos=this.awaitPos=this.awaitIdentPos=0,this.labels=[],this.undefinedExports=Object.create(null),this.pos===0&&t.allowHashBang&&this.input.slice(0,2)==="#!"&&this.skipLineComment(2),this.scopeStack=[],this.enterScope(oI),this.regexpState=null,this.privateNameStack=[]},Zh={inFunction:{configurable:!0},inGenerator:{configurable:!0},inAsync:{configurable:!0},canAwait:{configurable:!0},allowSuper:{configurable:!0},allowDirectSuper:{configurable:!0},treatFunctionsAsVar:{configurable:!0},allowNewDotTarget:{configurable:!0},inClassStaticBlock:{configurable:!0}};Bs.prototype.parse=function(){var t=this.options.program||this.startNode();return this.nextToken(),this.parseTopLevel(t)};Zh.inFunction.get=function(){return(this.currentVarScope().flags&CS)>0};Zh.inGenerator.get=function(){return(this.currentVarScope().flags&AIe)>0&&!this.currentVarScope().inClassFieldInit};Zh.inAsync.get=function(){return(this.currentVarScope().flags&oQ)>0&&!this.currentVarScope().inClassFieldInit};Zh.canAwait.get=function(){for(var e=this.scopeStack.length-1;e>=0;e--){var t=this.scopeStack[e];if(t.inClassFieldInit||t.flags&jk)return!1;if(t.flags&CS)return(t.flags&oQ)>0}return this.inModule&&this.options.ecmaVersion>=13||this.options.allowAwaitOutsideFunction};Zh.allowSuper.get=function(){var e=this.currentThisScope(),t=e.flags,n=e.inClassFieldInit;return(t&aQ)>0||n||this.options.allowSuperOutsideMethod};Zh.allowDirectSuper.get=function(){return(this.currentThisScope().flags&RIe)>0};Zh.treatFunctionsAsVar.get=function(){return this.treatFunctionsAsVarInScope(this.currentScope())};Zh.allowNewDotTarget.get=function(){var e=this.currentThisScope(),t=e.flags,n=e.inClassFieldInit;return(t&(CS|jk))>0||n};Zh.inClassStaticBlock.get=function(){return(this.currentVarScope().flags&jk)>0};Bs.extend=function(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];for(var r=this,i=0;i<t.length;i++)r=t[i](r);return r};Bs.parse=function(t,n){return new this(n,t).parse()};Bs.parseExpressionAt=function(t,n,r){var i=new this(r,t,n);return i.nextToken(),i.parseExpression()};Bs.tokenizer=function(t,n){return new this(n,t)};Object.defineProperties(Bs.prototype,Zh);var uu=Bs.prototype,B_t=/^(?:'((?:\\.|[^'\\])*?)'|"((?:\\.|[^"\\])*?)")/;uu.strictDirective=function(e){if(this.options.ecmaVersion<5)return!1;for(;;){yc.lastIndex=e,e+=yc.exec(this.input)[0].length;var t=B_t.exec(this.input.slice(e));if(!t)return!1;if((t[1]||t[2])==="use strict"){yc.lastIndex=e+t[0].length;var n=yc.exec(this.input),r=n.index+n[0].length,i=this.input.charAt(r);return i===";"||i==="}"||Kc.test(n[0])&&!(/[(`.[+\-/*%<>=,?^&]/.test(i)||i==="!"&&this.input.charAt(r+1)==="=")}e+=t[0].length,yc.lastIndex=e,e+=yc.exec(this.input)[0].length,this.input[e]===";"&&e++}};uu.eat=function(e){return this.type===e?(this.next(),!0):!1};uu.isContextual=function(e){return this.type===K.name&&this.value===e&&!this.containsEsc};uu.eatContextual=function(e){return this.isContextual(e)?(this.next(),!0):!1};uu.expectContextual=function(e){this.eatContextual(e)||this.unexpected()};uu.canInsertSemicolon=function(){return this.type===K.eof||this.type===K.braceR||Kc.test(this.input.slice(this.lastTokEnd,this.start))};uu.insertSemicolon=function(){if(this.canInsertSemicolon())return this.options.onInsertedSemicolon&&this.options.onInsertedSemicolon(this.lastTokEnd,this.lastTokEndLoc),!0};uu.semicolon=function(){!this.eat(K.semi)&&!this.insertSemicolon()&&this.unexpected()};uu.afterTrailingComma=function(e,t){if(this.type===e)return this.options.onTrailingComma&&this.options.onTrailingComma(this.lastTokStart,this.lastTokStartLoc),t||this.next(),!0};uu.expect=function(e){this.eat(e)||this.unexpected()};uu.unexpected=function(e){this.raise(e??this.start,"Unexpected token")};var a4=function(){this.shorthandAssign=this.trailingComma=this.parenthesizedAssign=this.parenthesizedBind=this.doubleProto=-1};uu.checkPatternErrors=function(e,t){if(e){e.trailingComma>-1&&this.raiseRecoverable(e.trailingComma,"Comma is not permitted after the rest element");var n=t?e.parenthesizedAssign:e.parenthesizedBind;n>-1&&this.raiseRecoverable(n,t?"Assigning to rvalue":"Parenthesized pattern")}};uu.checkExpressionErrors=function(e,t){if(!e)return!1;var n=e.shorthandAssign,r=e.doubleProto;if(!t)return n>=0||r>=0;n>=0&&this.raise(n,"Shorthand property assignments are valid only in destructuring patterns"),r>=0&&this.raiseRecoverable(r,"Redefinition of __proto__ property")};uu.checkYieldAwaitInDefaultParams=function(){this.yieldPos&&(!this.awaitPos||this.yieldPos<this.awaitPos)&&this.raise(this.yieldPos,"Yield expression cannot be a default value"),this.awaitPos&&this.raise(this.awaitPos,"Await expression cannot be a default value")};uu.isSimpleAssignTarget=function(e){return e.type==="ParenthesizedExpression"?this.isSimpleAssignTarget(e.expression):e.type==="Identifier"||e.type==="MemberExpression"};var $t=Bs.prototype;$t.parseTopLevel=function(e){var t=Object.create(null);for(e.body||(e.body=[]);this.type!==K.eof;){var n=this.parseStatement(null,!0,t);e.body.push(n)}if(this.inModule)for(var r=0,i=Object.keys(this.undefinedExports);r<i.length;r+=1){var s=i[r];this.raiseRecoverable(this.undefinedExports[s].start,"Export '"+s+"' is not defined")}return this.adaptDirectivePrologue(e.body),this.next(),e.sourceType=this.options.sourceType,this.finishNode(e,"Program")};var fQ={kind:"loop"},U_t={kind:"switch"};$t.isLet=function(e){if(this.options.ecmaVersion<6||!this.isContextual("let"))return!1;yc.lastIndex=this.pos;var t=yc.exec(this.input),n=this.pos+t[0].length,r=this.input.charCodeAt(n);if(r===91||r===92)return!0;if(e)return!1;if(r===123||r>55295&&r<56320)return!0;if(Dm(r,!0)){for(var i=n+1;ux(r=this.input.charCodeAt(i),!0);)++i;if(r===92||r>55295&&r<56320)return!0;var s=this.input.slice(n,i);if(!N_t.test(s))return!0}return!1};$t.isAsyncFunction=function(){if(this.options.ecmaVersion<8||!this.isContextual("async"))return!1;yc.lastIndex=this.pos;var e=yc.exec(this.input),t=this.pos+e[0].length,n;return!Kc.test(this.input.slice(this.pos,t))&&this.input.slice(t,t+8)==="function"&&(t+8===this.input.length||!(ux(n=this.input.charCodeAt(t+8))||n>55295&&n<56320))};$t.parseStatement=function(e,t,n){var r=this.type,i=this.startNode(),s;switch(this.isLet(e)&&(r=K._var,s="let"),r){case K._break:case K._continue:return this.parseBreakContinueStatement(i,r.keyword);case K._debugger:return this.parseDebuggerStatement(i);case K._do:return this.parseDoStatement(i);case K._for:return this.parseForStatement(i);case K._function:return e&&(this.strict||e!=="if"&&e!=="label")&&this.options.ecmaVersion>=6&&this.unexpected(),this.parseFunctionStatement(i,!1,!e);case K._class:return e&&this.unexpected(),this.parseClass(i,!0);case K._if:return this.parseIfStatement(i);case K._return:return this.parseReturnStatement(i);case K._switch:return this.parseSwitchStatement(i);case K._throw:return this.parseThrowStatement(i);case K._try:return this.parseTryStatement(i);case K._const:case K._var:return s=s||this.value,e&&s!=="var"&&this.unexpected(),this.parseVarStatement(i,s);case K._while:return this.parseWhileStatement(i);case K._with:return this.parseWithStatement(i);case K.braceL:return this.parseBlock(!0,i);case K.semi:return this.parseEmptyStatement(i);case K._export:case K._import:if(this.options.ecmaVersion>10&&r===K._import){yc.lastIndex=this.pos;var o=yc.exec(this.input),a=this.pos+o[0].length,u=this.input.charCodeAt(a);if(u===40||u===46)return this.parseExpressionStatement(i,this.parseExpression())}return this.options.allowImportExportEverywhere||(t||this.raise(this.start,"'import' and 'export' may only appear at the top level"),this.inModule||this.raise(this.start,"'import' and 'export' may appear only with 'sourceType: module'")),r===K._import?this.parseImport(i):this.parseExport(i,n);default:if(this.isAsyncFunction())return e&&this.unexpected(),this.next(),this.parseFunctionStatement(i,!0,!e);var l=this.value,c=this.parseExpression();return r===K.name&&c.type==="Identifier"&&this.eat(K.colon)?this.parseLabeledStatement(i,l,c,e):this.parseExpressionStatement(i,c)}};$t.parseBreakContinueStatement=function(e,t){var n=t==="break";this.next(),this.eat(K.semi)||this.insertSemicolon()?e.label=null:this.type!==K.name?this.unexpected():(e.label=this.parseIdent(),this.semicolon());for(var r=0;r<this.labels.length;++r){var i=this.labels[r];if((e.label==null||i.name===e.label.name)&&(i.kind!=null&&(n||i.kind==="loop")||e.label&&n))break}return r===this.labels.length&&this.raise(e.start,"Unsyntactic "+t),this.finishNode(e,n?"BreakStatement":"ContinueStatement")};$t.parseDebuggerStatement=function(e){return this.next(),this.semicolon(),this.finishNode(e,"DebuggerStatement")};$t.parseDoStatement=function(e){return this.next(),this.labels.push(fQ),e.body=this.parseStatement("do"),this.labels.pop(),this.expect(K._while),e.test=this.parseParenExpression(),this.options.ecmaVersion>=6?this.eat(K.semi):this.semicolon(),this.finishNode(e,"DoWhileStatement")};$t.parseForStatement=function(e){this.next();var t=this.options.ecmaVersion>=9&&this.canAwait&&this.eatContextual("await")?this.lastTokStart:-1;if(this.labels.push(fQ),this.enterScope(0),this.expect(K.parenL),this.type===K.semi)return t>-1&&this.unexpected(t),this.parseFor(e,null);var n=this.isLet();if(this.type===K._var||this.type===K._const||n){var r=this.startNode(),i=n?"let":this.value;return this.next(),this.parseVar(r,!0,i),this.finishNode(r,"VariableDeclaration"),(this.type===K._in||this.options.ecmaVersion>=6&&this.isContextual("of"))&&r.declarations.length===1?(this.options.ecmaVersion>=9&&(this.type===K._in?t>-1&&this.unexpected(t):e.await=t>-1),this.parseForIn(e,r)):(t>-1&&this.unexpected(t),this.parseFor(e,r))}var s=this.isContextual("let"),o=!1,a=new a4,u=this.parseExpression(t>-1?"await":!0,a);return this.type===K._in||(o=this.options.ecmaVersion>=6&&this.isContextual("of"))?(this.options.ecmaVersion>=9&&(this.type===K._in?t>-1&&this.unexpected(t):e.await=t>-1),s&&o&&this.raise(u.start,"The left-hand side of a for-of loop may not start with 'let'."),this.toAssignable(u,!1,a),this.checkLValPattern(u),this.parseForIn(e,u)):(this.checkExpressionErrors(a,!0),t>-1&&this.unexpected(t),this.parseFor(e,u))};$t.parseFunctionStatement=function(e,t,n){return this.next(),this.parseFunction(e,DC|(n?0:Vz),!1,t)};$t.parseIfStatement=function(e){return this.next(),e.test=this.parseParenExpression(),e.consequent=this.parseStatement("if"),e.alternate=this.eat(K._else)?this.parseStatement("if"):null,this.finishNode(e,"IfStatement")};$t.parseReturnStatement=function(e){return!this.inFunction&&!this.options.allowReturnOutsideFunction&&this.raise(this.start,"'return' outside of function"),this.next(),this.eat(K.semi)||this.insertSemicolon()?e.argument=null:(e.argument=this.parseExpression(),this.semicolon()),this.finishNode(e,"ReturnStatement")};$t.parseSwitchStatement=function(e){this.next(),e.discriminant=this.parseParenExpression(),e.cases=[],this.expect(K.braceL),this.labels.push(U_t),this.enterScope(0);for(var t,n=!1;this.type!==K.braceR;)if(this.type===K._case||this.type===K._default){var r=this.type===K._case;t&&this.finishNode(t,"SwitchCase"),e.cases.push(t=this.startNode()),t.consequent=[],this.next(),r?t.test=this.parseExpression():(n&&this.raiseRecoverable(this.lastTokStart,"Multiple default clauses"),n=!0,t.test=null),this.expect(K.colon)}else t||this.unexpected(),t.consequent.push(this.parseStatement(null));return this.exitScope(),t&&this.finishNode(t,"SwitchCase"),this.next(),this.labels.pop(),this.finishNode(e,"SwitchStatement")};$t.parseThrowStatement=function(e){return this.next(),Kc.test(this.input.slice(this.lastTokEnd,this.start))&&this.raise(this.lastTokEnd,"Illegal newline after throw"),e.argument=this.parseExpression(),this.semicolon(),this.finishNode(e,"ThrowStatement")};var z_t=[];$t.parseCatchClauseParam=function(){var e=this.parseBindingAtom(),t=e.type==="Identifier";return this.enterScope(t?kIe:0),this.checkLValPattern(e,t?DIe:sg),this.expect(K.parenR),e};$t.parseTryStatement=function(e){if(this.next(),e.block=this.parseBlock(),e.handler=null,this.type===K._catch){var t=this.startNode();this.next(),this.eat(K.parenL)?t.param=this.parseCatchClauseParam():(this.options.ecmaVersion<10&&this.unexpected(),t.param=null,this.enterScope(0)),t.body=this.parseBlock(!1),this.exitScope(),e.handler=this.finishNode(t,"CatchClause")}return e.finalizer=this.eat(K._finally)?this.parseBlock():null,!e.handler&&!e.finalizer&&this.raise(e.start,"Missing catch or finally clause"),this.finishNode(e,"TryStatement")};$t.parseVarStatement=function(e,t,n){return this.next(),this.parseVar(e,!1,t,n),this.semicolon(),this.finishNode(e,"VariableDeclaration")};$t.parseWhileStatement=function(e){return this.next(),e.test=this.parseParenExpression(),this.labels.push(fQ),e.body=this.parseStatement("while"),this.labels.pop(),this.finishNode(e,"WhileStatement")};$t.parseWithStatement=function(e){return this.strict&&this.raise(this.start,"'with' in strict mode"),this.next(),e.object=this.parseParenExpression(),e.body=this.parseStatement("with"),this.finishNode(e,"WithStatement")};$t.parseEmptyStatement=function(e){return this.next(),this.finishNode(e,"EmptyStatement")};$t.parseLabeledStatement=function(e,t,n,r){for(var i=0,s=this.labels;i<s.length;i+=1){var o=s[i];o.name===t&&this.raise(n.start,"Label '"+t+"' is already declared")}for(var a=this.type.isLoop?"loop":this.type===K._switch?"switch":null,u=this.labels.length-1;u>=0;u--){var l=this.labels[u];if(l.statementStart===e.start)l.statementStart=this.start,l.kind=a;else break}return this.labels.push({name:t,kind:a,statementStart:this.start}),e.body=this.parseStatement(r?r.indexOf("label")===-1?r+"label":r:"label"),this.labels.pop(),e.label=n,this.finishNode(e,"LabeledStatement")};$t.parseExpressionStatement=function(e,t){return e.expression=t,this.semicolon(),this.finishNode(e,"ExpressionStatement")};$t.parseBlock=function(e,t,n){for(e===void 0&&(e=!0),t===void 0&&(t=this.startNode()),t.body=[],this.expect(K.braceL),e&&this.enterScope(0);this.type!==K.braceR;){var r=this.parseStatement(null);t.body.push(r)}return n&&(this.strict=!1),this.next(),e&&this.exitScope(),this.finishNode(t,"BlockStatement")};$t.parseFor=function(e,t){return e.init=t,this.expect(K.semi),e.test=this.type===K.semi?null:this.parseExpression(),this.expect(K.semi),e.update=this.type===K.parenR?null:this.parseExpression(),this.expect(K.parenR),e.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(e,"ForStatement")};$t.parseForIn=function(e,t){var n=this.type===K._in;return this.next(),t.type==="VariableDeclaration"&&t.declarations[0].init!=null&&(!n||this.options.ecmaVersion<8||this.strict||t.kind!=="var"||t.declarations[0].id.type!=="Identifier")&&this.raise(t.start,(n?"for-in":"for-of")+" loop variable declaration may not have an initializer"),e.left=t,e.right=n?this.parseExpression():this.parseMaybeAssign(),this.expect(K.parenR),e.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(e,n?"ForInStatement":"ForOfStatement")};$t.parseVar=function(e,t,n,r){for(e.declarations=[],e.kind=n;;){var i=this.startNode();if(this.parseVarId(i,n),this.eat(K.eq)?i.init=this.parseMaybeAssign(t):!r&&n==="const"&&!(this.type===K._in||this.options.ecmaVersion>=6&&this.isContextual("of"))?this.unexpected():!r&&i.id.type!=="Identifier"&&!(t&&(this.type===K._in||this.isContextual("of")))?this.raise(this.lastTokEnd,"Complex binding patterns require an initialization value"):i.init=null,e.declarations.push(this.finishNode(i,"VariableDeclarator")),!this.eat(K.comma))break}return e};$t.parseVarId=function(e,t){e.id=this.parseBindingAtom(),this.checkLValPattern(e.id,t==="var"?cQ:sg,!1)};var DC=1,Vz=2,OIe=4;$t.parseFunction=function(e,t,n,r,i){this.initFunction(e),(this.options.ecmaVersion>=9||this.options.ecmaVersion>=6&&!r)&&(this.type===K.star&&t&Vz&&this.unexpected(),e.generator=this.eat(K.star)),this.options.ecmaVersion>=8&&(e.async=!!r),t&DC&&(e.id=t&OIe&&this.type!==K.name?null:this.parseIdent(),e.id&&!(t&Vz)&&this.checkLValSimple(e.id,this.strict||e.generator||e.async?this.treatFunctionsAsVar?cQ:sg:NIe));var s=this.yieldPos,o=this.awaitPos,a=this.awaitIdentPos;return this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(lQ(e.async,e.generator)),t&DC||(e.id=this.type===K.name?this.parseIdent():null),this.parseFunctionParams(e),this.parseFunctionBody(e,n,!1,i),this.yieldPos=s,this.awaitPos=o,this.awaitIdentPos=a,this.finishNode(e,t&DC?"FunctionDeclaration":"FunctionExpression")};$t.parseFunctionParams=function(e){this.expect(K.parenL),e.params=this.parseBindingList(K.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams()};$t.parseClass=function(e,t){this.next();var n=this.strict;this.strict=!0,this.parseClassId(e,t),this.parseClassSuper(e);var r=this.enterClassBody(),i=this.startNode(),s=!1;for(i.body=[],this.expect(K.braceL);this.type!==K.braceR;){var o=this.parseClassElement(e.superClass!==null);o&&(i.body.push(o),o.type==="MethodDefinition"&&o.kind==="constructor"?(s&&this.raiseRecoverable(o.start,"Duplicate constructor in the same class"),s=!0):o.key&&o.key.type==="PrivateIdentifier"&&V_t(r,o)&&this.raiseRecoverable(o.key.start,"Identifier '#"+o.key.name+"' has already been declared"))}return this.strict=n,this.next(),e.body=this.finishNode(i,"ClassBody"),this.exitClassBody(),this.finishNode(e,t?"ClassDeclaration":"ClassExpression")};$t.parseClassElement=function(e){if(this.eat(K.semi))return null;var t=this.options.ecmaVersion,n=this.startNode(),r="",i=!1,s=!1,o="method",a=!1;if(this.eatContextual("static")){if(t>=13&&this.eat(K.braceL))return this.parseClassStaticBlock(n),n;this.isClassElementNameStart()||this.type===K.star?a=!0:r="static"}if(n.static=a,!r&&t>=8&&this.eatContextual("async")&&((this.isClassElementNameStart()||this.type===K.star)&&!this.canInsertSemicolon()?s=!0:r="async"),!r&&(t>=9||!s)&&this.eat(K.star)&&(i=!0),!r&&!s&&!i){var u=this.value;(this.eatContextual("get")||this.eatContextual("set"))&&(this.isClassElementNameStart()?o=u:r=u)}if(r?(n.computed=!1,n.key=this.startNodeAt(this.lastTokStart,this.lastTokStartLoc),n.key.name=r,this.finishNode(n.key,"Identifier")):this.parseClassElementName(n),t<13||this.type===K.parenL||o!=="method"||i||s){var l=!n.static&&w$(n,"constructor"),c=l&&e;l&&o!=="method"&&this.raise(n.key.start,"Constructor can't have get/set modifier"),n.kind=l?"constructor":o,this.parseClassMethod(n,i,s,c)}else this.parseClassField(n);return n};$t.isClassElementNameStart=function(){return this.type===K.name||this.type===K.privateId||this.type===K.num||this.type===K.string||this.type===K.bracketL||this.type.keyword};$t.parseClassElementName=function(e){this.type===K.privateId?(this.value==="constructor"&&this.raise(this.start,"Classes can't have an element named '#constructor'"),e.computed=!1,e.key=this.parsePrivateIdent()):this.parsePropertyName(e)};$t.parseClassMethod=function(e,t,n,r){var i=e.key;e.kind==="constructor"?(t&&this.raise(i.start,"Constructor can't be a generator"),n&&this.raise(i.start,"Constructor can't be an async method")):e.static&&w$(e,"prototype")&&this.raise(i.start,"Classes may not have a static property named prototype");var s=e.value=this.parseMethod(t,n,r);return e.kind==="get"&&s.params.length!==0&&this.raiseRecoverable(s.start,"getter should have no params"),e.kind==="set"&&s.params.length!==1&&this.raiseRecoverable(s.start,"setter should have exactly one param"),e.kind==="set"&&s.params[0].type==="RestElement"&&this.raiseRecoverable(s.params[0].start,"Setter cannot use rest params"),this.finishNode(e,"MethodDefinition")};$t.parseClassField=function(e){if(w$(e,"constructor")?this.raise(e.key.start,"Classes can't have a field named 'constructor'"):e.static&&w$(e,"prototype")&&this.raise(e.key.start,"Classes can't have a static field named 'prototype'"),this.eat(K.eq)){var t=this.currentThisScope(),n=t.inClassFieldInit;t.inClassFieldInit=!0,e.value=this.parseMaybeAssign(),t.inClassFieldInit=n}else e.value=null;return this.semicolon(),this.finishNode(e,"PropertyDefinition")};$t.parseClassStaticBlock=function(e){e.body=[];var t=this.labels;for(this.labels=[],this.enterScope(jk|aQ);this.type!==K.braceR;){var n=this.parseStatement(null);e.body.push(n)}return this.next(),this.exitScope(),this.labels=t,this.finishNode(e,"StaticBlock")};$t.parseClassId=function(e,t){this.type===K.name?(e.id=this.parseIdent(),t&&this.checkLValSimple(e.id,sg,!1)):(t===!0&&this.unexpected(),e.id=null)};$t.parseClassSuper=function(e){e.superClass=this.eat(K._extends)?this.parseExprSubscripts(null,!1):null};$t.enterClassBody=function(){var e={declared:Object.create(null),used:[]};return this.privateNameStack.push(e),e.declared};$t.exitClassBody=function(){var e=this.privateNameStack.pop(),t=e.declared,n=e.used;if(this.options.checkPrivateFields)for(var r=this.privateNameStack.length,i=r===0?null:this.privateNameStack[r-1],s=0;s<n.length;++s){var o=n[s];Fk(t,o.name)||(i?i.used.push(o):this.raiseRecoverable(o.start,"Private field '#"+o.name+"' must be declared in an enclosing class"))}};function V_t(e,t){var n=t.key.name,r=e[n],i="true";return t.type==="MethodDefinition"&&(t.kind==="get"||t.kind==="set")&&(i=(t.static?"s":"i")+t.kind),r==="iget"&&i==="iset"||r==="iset"&&i==="iget"||r==="sget"&&i==="sset"||r==="sset"&&i==="sget"?(e[n]="true",!1):r?!0:(e[n]=i,!1)}function w$(e,t){var n=e.computed,r=e.key;return!n&&(r.type==="Identifier"&&r.name===t||r.type==="Literal"&&r.value===t)}$t.parseExportAllDeclaration=function(e,t){return this.options.ecmaVersion>=11&&(this.eatContextual("as")?(e.exported=this.parseModuleExportName(),this.checkExport(t,e.exported,this.lastTokStart)):e.exported=null),this.expectContextual("from"),this.type!==K.string&&this.unexpected(),e.source=this.parseExprAtom(),this.semicolon(),this.finishNode(e,"ExportAllDeclaration")};$t.parseExport=function(e,t){if(this.next(),this.eat(K.star))return this.parseExportAllDeclaration(e,t);if(this.eat(K._default))return this.checkExport(t,"default",this.lastTokStart),e.declaration=this.parseExportDefaultDeclaration(),this.finishNode(e,"ExportDefaultDeclaration");if(this.shouldParseExportStatement())e.declaration=this.parseExportDeclaration(e),e.declaration.type==="VariableDeclaration"?this.checkVariableExport(t,e.declaration.declarations):this.checkExport(t,e.declaration.id,e.declaration.id.start),e.specifiers=[],e.source=null;else{if(e.declaration=null,e.specifiers=this.parseExportSpecifiers(t),this.eatContextual("from"))this.type!==K.string&&this.unexpected(),e.source=this.parseExprAtom();else{for(var n=0,r=e.specifiers;n<r.length;n+=1){var i=r[n];this.checkUnreserved(i.local),this.checkLocalExport(i.local),i.local.type==="Literal"&&this.raise(i.local.start,"A string literal cannot be used as an exported binding without `from`.")}e.source=null}this.semicolon()}return this.finishNode(e,"ExportNamedDeclaration")};$t.parseExportDeclaration=function(e){return this.parseStatement(null)};$t.parseExportDefaultDeclaration=function(){var e;if(this.type===K._function||(e=this.isAsyncFunction())){var t=this.startNode();return this.next(),e&&this.next(),this.parseFunction(t,DC|OIe,!1,e)}else if(this.type===K._class){var n=this.startNode();return this.parseClass(n,"nullableID")}else{var r=this.parseMaybeAssign();return this.semicolon(),r}};$t.checkExport=function(e,t,n){e&&(typeof t!="string"&&(t=t.type==="Identifier"?t.name:t.value),Fk(e,t)&&this.raiseRecoverable(n,"Duplicate export '"+t+"'"),e[t]=!0)};$t.checkPatternExport=function(e,t){var n=t.type;if(n==="Identifier")this.checkExport(e,t,t.start);else if(n==="ObjectPattern")for(var r=0,i=t.properties;r<i.length;r+=1){var s=i[r];this.checkPatternExport(e,s)}else if(n==="ArrayPattern")for(var o=0,a=t.elements;o<a.length;o+=1){var u=a[o];u&&this.checkPatternExport(e,u)}else n==="Property"?this.checkPatternExport(e,t.value):n==="AssignmentPattern"?this.checkPatternExport(e,t.left):n==="RestElement"&&this.checkPatternExport(e,t.argument)};$t.checkVariableExport=function(e,t){if(e)for(var n=0,r=t;n<r.length;n+=1){var i=r[n];this.checkPatternExport(e,i.id)}};$t.shouldParseExportStatement=function(){return this.type.keyword==="var"||this.type.keyword==="const"||this.type.keyword==="class"||this.type.keyword==="function"||this.isLet()||this.isAsyncFunction()};$t.parseExportSpecifier=function(e){var t=this.startNode();return t.local=this.parseModuleExportName(),t.exported=this.eatContextual("as")?this.parseModuleExportName():t.local,this.checkExport(e,t.exported,t.exported.start),this.finishNode(t,"ExportSpecifier")};$t.parseExportSpecifiers=function(e){var t=[],n=!0;for(this.expect(K.braceL);!this.eat(K.braceR);){if(n)n=!1;else if(this.expect(K.comma),this.afterTrailingComma(K.braceR))break;t.push(this.parseExportSpecifier(e))}return t};$t.parseImport=function(e){return this.next(),this.type===K.string?(e.specifiers=z_t,e.source=this.parseExprAtom()):(e.specifiers=this.parseImportSpecifiers(),this.expectContextual("from"),e.source=this.type===K.string?this.parseExprAtom():this.unexpected()),this.semicolon(),this.finishNode(e,"ImportDeclaration")};$t.parseImportSpecifier=function(){var e=this.startNode();return e.imported=this.parseModuleExportName(),this.eatContextual("as")?e.local=this.parseIdent():(this.checkUnreserved(e.imported),e.local=e.imported),this.checkLValSimple(e.local,sg),this.finishNode(e,"ImportSpecifier")};$t.parseImportDefaultSpecifier=function(){var e=this.startNode();return e.local=this.parseIdent(),this.checkLValSimple(e.local,sg),this.finishNode(e,"ImportDefaultSpecifier")};$t.parseImportNamespaceSpecifier=function(){var e=this.startNode();return this.next(),this.expectContextual("as"),e.local=this.parseIdent(),this.checkLValSimple(e.local,sg),this.finishNode(e,"ImportNamespaceSpecifier")};$t.parseImportSpecifiers=function(){var e=[],t=!0;if(this.type===K.name&&(e.push(this.parseImportDefaultSpecifier()),!this.eat(K.comma)))return e;if(this.type===K.star)return e.push(this.parseImportNamespaceSpecifier()),e;for(this.expect(K.braceL);!this.eat(K.braceR);){if(t)t=!1;else if(this.expect(K.comma),this.afterTrailingComma(K.braceR))break;e.push(this.parseImportSpecifier())}return e};$t.parseModuleExportName=function(){if(this.options.ecmaVersion>=13&&this.type===K.string){var e=this.parseLiteral(this.value);return L_t.test(e.value)&&this.raise(e.start,"An export name cannot include a lone surrogate."),e}return this.parseIdent(!0)};$t.adaptDirectivePrologue=function(e){for(var t=0;t<e.length&&this.isDirectiveCandidate(e[t]);++t)e[t].directive=e[t].expression.raw.slice(1,-1)};$t.isDirectiveCandidate=function(e){return this.options.ecmaVersion>=5&&e.type==="ExpressionStatement"&&e.expression.type==="Literal"&&typeof e.expression.value=="string"&&(this.input[e.start]==='"'||this.input[e.start]==="'")};var Xc=Bs.prototype;Xc.toAssignable=function(e,t,n){if(this.options.ecmaVersion>=6&&e)switch(e.type){case"Identifier":this.inAsync&&e.name==="await"&&this.raise(e.start,"Cannot use 'await' as identifier inside an async function");break;case"ObjectPattern":case"ArrayPattern":case"AssignmentPattern":case"RestElement":break;case"ObjectExpression":e.type="ObjectPattern",n&&this.checkPatternErrors(n,!0);for(var r=0,i=e.properties;r<i.length;r+=1){var s=i[r];this.toAssignable(s,t),s.type==="RestElement"&&(s.argument.type==="ArrayPattern"||s.argument.type==="ObjectPattern")&&this.raise(s.argument.start,"Unexpected token")}break;case"Property":e.kind!=="init"&&this.raise(e.key.start,"Object pattern can't contain getter or setter"),this.toAssignable(e.value,t);break;case"ArrayExpression":e.type="ArrayPattern",n&&this.checkPatternErrors(n,!0),this.toAssignableList(e.elements,t);break;case"SpreadElement":e.type="RestElement",this.toAssignable(e.argument,t),e.argument.type==="AssignmentPattern"&&this.raise(e.argument.start,"Rest elements cannot have a default value");break;case"AssignmentExpression":e.operator!=="="&&this.raise(e.left.end,"Only '=' operator can be used for specifying default value."),e.type="AssignmentPattern",delete e.operator,this.toAssignable(e.left,t);break;case"ParenthesizedExpression":this.toAssignable(e.expression,t,n);break;case"ChainExpression":this.raiseRecoverable(e.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":if(!t)break;default:this.raise(e.start,"Assigning to rvalue")}else n&&this.checkPatternErrors(n,!0);return e};Xc.toAssignableList=function(e,t){for(var n=e.length,r=0;r<n;r++){var i=e[r];i&&this.toAssignable(i,t)}if(n){var s=e[n-1];this.options.ecmaVersion===6&&t&&s&&s.type==="RestElement"&&s.argument.type!=="Identifier"&&this.unexpected(s.argument.start)}return e};Xc.parseSpread=function(e){var t=this.startNode();return this.next(),t.argument=this.parseMaybeAssign(!1,e),this.finishNode(t,"SpreadElement")};Xc.parseRestBinding=function(){var e=this.startNode();return this.next(),this.options.ecmaVersion===6&&this.type!==K.name&&this.unexpected(),e.argument=this.parseBindingAtom(),this.finishNode(e,"RestElement")};Xc.parseBindingAtom=function(){if(this.options.ecmaVersion>=6)switch(this.type){case K.bracketL:var e=this.startNode();return this.next(),e.elements=this.parseBindingList(K.bracketR,!0,!0),this.finishNode(e,"ArrayPattern");case K.braceL:return this.parseObj(!0)}return this.parseIdent()};Xc.parseBindingList=function(e,t,n,r){for(var i=[],s=!0;!this.eat(e);)if(s?s=!1:this.expect(K.comma),t&&this.type===K.comma)i.push(null);else{if(n&&this.afterTrailingComma(e))break;if(this.type===K.ellipsis){var o=this.parseRestBinding();this.parseBindingListItem(o),i.push(o),this.type===K.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element"),this.expect(e);break}else i.push(this.parseAssignableListItem(r))}return i};Xc.parseAssignableListItem=function(e){var t=this.parseMaybeDefault(this.start,this.startLoc);return this.parseBindingListItem(t),t};Xc.parseBindingListItem=function(e){return e};Xc.parseMaybeDefault=function(e,t,n){if(n=n||this.parseBindingAtom(),this.options.ecmaVersion<6||!this.eat(K.eq))return n;var r=this.startNodeAt(e,t);return r.left=n,r.right=this.parseMaybeAssign(),this.finishNode(r,"AssignmentPattern")};Xc.checkLValSimple=function(e,t,n){t===void 0&&(t=_$);var r=t!==_$;switch(e.type){case"Identifier":this.strict&&this.reservedWordsStrictBind.test(e.name)&&this.raiseRecoverable(e.start,(r?"Binding ":"Assigning to ")+e.name+" in strict mode"),r&&(t===sg&&e.name==="let"&&this.raiseRecoverable(e.start,"let is disallowed as a lexically bound name"),n&&(Fk(n,e.name)&&this.raiseRecoverable(e.start,"Argument name clash"),n[e.name]=!0),t!==PIe&&this.declareName(e.name,t,e.start));break;case"ChainExpression":this.raiseRecoverable(e.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":r&&this.raiseRecoverable(e.start,"Binding member expression");break;case"ParenthesizedExpression":return r&&this.raiseRecoverable(e.start,"Binding parenthesized expression"),this.checkLValSimple(e.expression,t,n);default:this.raise(e.start,(r?"Binding":"Assigning to")+" rvalue")}};Xc.checkLValPattern=function(e,t,n){switch(t===void 0&&(t=_$),e.type){case"ObjectPattern":for(var r=0,i=e.properties;r<i.length;r+=1){var s=i[r];this.checkLValInnerPattern(s,t,n)}break;case"ArrayPattern":for(var o=0,a=e.elements;o<a.length;o+=1){var u=a[o];u&&this.checkLValInnerPattern(u,t,n)}break;default:this.checkLValSimple(e,t,n)}};Xc.checkLValInnerPattern=function(e,t,n){switch(t===void 0&&(t=_$),e.type){case"Property":this.checkLValInnerPattern(e.value,t,n);break;case"AssignmentPattern":this.checkLValPattern(e.left,t,n);break;case"RestElement":this.checkLValPattern(e.argument,t,n);break;default:this.checkLValPattern(e,t,n)}};var of=function(t,n,r,i,s){this.token=t,this.isExpr=!!n,this.preserveSpace=!!r,this.override=i,this.generator=!!s},Ti={b_stat:new of("{",!1),b_expr:new of("{",!0),b_tmpl:new of("${",!1),p_stat:new of("(",!1),p_expr:new of("(",!0),q_tmpl:new of("`",!0,!0,function(e){return e.tryReadTemplateToken()}),f_stat:new of("function",!1),f_expr:new of("function",!0),f_expr_gen:new of("function",!0,!1,null,!0),f_gen:new of("function",!1,!1,null,!0)},AS=Bs.prototype;AS.initialContext=function(){return[Ti.b_stat]};AS.curContext=function(){return this.context[this.context.length-1]};AS.braceIsBlock=function(e){var t=this.curContext();return t===Ti.f_expr||t===Ti.f_stat?!0:e===K.colon&&(t===Ti.b_stat||t===Ti.b_expr)?!t.isExpr:e===K._return||e===K.name&&this.exprAllowed?Kc.test(this.input.slice(this.lastTokEnd,this.start)):e===K._else||e===K.semi||e===K.eof||e===K.parenR||e===K.arrow?!0:e===K.braceL?t===Ti.b_stat:e===K._var||e===K._const||e===K.name?!1:!this.exprAllowed};AS.inGeneratorContext=function(){for(var e=this.context.length-1;e>=1;e--){var t=this.context[e];if(t.token==="function")return t.generator}return!1};AS.updateContext=function(e){var t,n=this.type;n.keyword&&e===K.dot?this.exprAllowed=!1:(t=n.updateContext)?t.call(this,e):this.exprAllowed=n.beforeExpr};AS.overrideContext=function(e){this.curContext()!==e&&(this.context[this.context.length-1]=e)};K.parenR.updateContext=K.braceR.updateContext=function(){if(this.context.length===1){this.exprAllowed=!0;return}var e=this.context.pop();e===Ti.b_stat&&this.curContext().token==="function"&&(e=this.context.pop()),this.exprAllowed=!e.isExpr};K.braceL.updateContext=function(e){this.context.push(this.braceIsBlock(e)?Ti.b_stat:Ti.b_expr),this.exprAllowed=!0};K.dollarBraceL.updateContext=function(){this.context.push(Ti.b_tmpl),this.exprAllowed=!0};K.parenL.updateContext=function(e){var t=e===K._if||e===K._for||e===K._with||e===K._while;this.context.push(t?Ti.p_stat:Ti.p_expr),this.exprAllowed=!0};K.incDec.updateContext=function(){};K._function.updateContext=K._class.updateContext=function(e){e.beforeExpr&&e!==K._else&&!(e===K.semi&&this.curContext()!==Ti.p_stat)&&!(e===K._return&&Kc.test(this.input.slice(this.lastTokEnd,this.start)))&&!((e===K.colon||e===K.braceL)&&this.curContext()===Ti.b_stat)?this.context.push(Ti.f_expr):this.context.push(Ti.f_stat),this.exprAllowed=!1};K.colon.updateContext=function(){this.curContext().token==="function"&&this.context.pop(),this.exprAllowed=!0};K.backQuote.updateContext=function(){this.curContext()===Ti.q_tmpl?this.context.pop():this.context.push(Ti.q_tmpl),this.exprAllowed=!1};K.star.updateContext=function(e){if(e===K._function){var t=this.context.length-1;this.context[t]===Ti.f_expr?this.context[t]=Ti.f_expr_gen:this.context[t]=Ti.f_gen}this.exprAllowed=!0};K.name.updateContext=function(e){var t=!1;this.options.ecmaVersion>=6&&e!==K.dot&&(this.value==="of"&&!this.exprAllowed||this.value==="yield"&&this.inGeneratorContext())&&(t=!0),this.exprAllowed=t};var un=Bs.prototype;un.checkPropClash=function(e,t,n){if(!(this.options.ecmaVersion>=9&&e.type==="SpreadElement")&&!(this.options.ecmaVersion>=6&&(e.computed||e.method||e.shorthand))){var r=e.key,i;switch(r.type){case"Identifier":i=r.name;break;case"Literal":i=String(r.value);break;default:return}var s=e.kind;if(this.options.ecmaVersion>=6){i==="__proto__"&&s==="init"&&(t.proto&&(n?n.doubleProto<0&&(n.doubleProto=r.start):this.raiseRecoverable(r.start,"Redefinition of __proto__ property")),t.proto=!0);return}i="$"+i;var o=t[i];if(o){var a;s==="init"?a=this.strict&&o.init||o.get||o.set:a=o.init||o[s],a&&this.raiseRecoverable(r.start,"Redefinition of property")}else o=t[i]={init:!1,get:!1,set:!1};o[s]=!0}};un.parseExpression=function(e,t){var n=this.start,r=this.startLoc,i=this.parseMaybeAssign(e,t);if(this.type===K.comma){var s=this.startNodeAt(n,r);for(s.expressions=[i];this.eat(K.comma);)s.expressions.push(this.parseMaybeAssign(e,t));return this.finishNode(s,"SequenceExpression")}return i};un.parseMaybeAssign=function(e,t,n){if(this.isContextual("yield")){if(this.inGenerator)return this.parseYield(e);this.exprAllowed=!1}var r=!1,i=-1,s=-1,o=-1;t?(i=t.parenthesizedAssign,s=t.trailingComma,o=t.doubleProto,t.parenthesizedAssign=t.trailingComma=-1):(t=new a4,r=!0);var a=this.start,u=this.startLoc;(this.type===K.parenL||this.type===K.name)&&(this.potentialArrowAt=this.start,this.potentialArrowInForAwait=e==="await");var l=this.parseMaybeConditional(e,t);if(n&&(l=n.call(this,l,a,u)),this.type.isAssign){var c=this.startNodeAt(a,u);return c.operator=this.value,this.type===K.eq&&(l=this.toAssignable(l,!1,t)),r||(t.parenthesizedAssign=t.trailingComma=t.doubleProto=-1),t.shorthandAssign>=l.start&&(t.shorthandAssign=-1),this.type===K.eq?this.checkLValPattern(l):this.checkLValSimple(l),c.left=l,this.next(),c.right=this.parseMaybeAssign(e),o>-1&&(t.doubleProto=o),this.finishNode(c,"AssignmentExpression")}else r&&this.checkExpressionErrors(t,!0);return i>-1&&(t.parenthesizedAssign=i),s>-1&&(t.trailingComma=s),l};un.parseMaybeConditional=function(e,t){var n=this.start,r=this.startLoc,i=this.parseExprOps(e,t);if(this.checkExpressionErrors(t))return i;if(this.eat(K.question)){var s=this.startNodeAt(n,r);return s.test=i,s.consequent=this.parseMaybeAssign(),this.expect(K.colon),s.alternate=this.parseMaybeAssign(e),this.finishNode(s,"ConditionalExpression")}return i};un.parseExprOps=function(e,t){var n=this.start,r=this.startLoc,i=this.parseMaybeUnary(t,!1,!1,e);return this.checkExpressionErrors(t)||i.start===n&&i.type==="ArrowFunctionExpression"?i:this.parseExprOp(i,n,r,-1,e)};un.parseExprOp=function(e,t,n,r,i){var s=this.type.binop;if(s!=null&&(!i||this.type!==K._in)&&s>r){var o=this.type===K.logicalOR||this.type===K.logicalAND,a=this.type===K.coalesce;a&&(s=K.logicalAND.binop);var u=this.value;this.next();var l=this.start,c=this.startLoc,f=this.parseExprOp(this.parseMaybeUnary(null,!1,!1,i),l,c,s,i),d=this.buildBinary(t,n,e,f,u,o||a);return(o&&this.type===K.coalesce||a&&(this.type===K.logicalOR||this.type===K.logicalAND))&&this.raiseRecoverable(this.start,"Logical expressions and coalesce expressions cannot be mixed. Wrap either by parentheses"),this.parseExprOp(d,t,n,r,i)}return e};un.buildBinary=function(e,t,n,r,i,s){r.type==="PrivateIdentifier"&&this.raise(r.start,"Private identifier can only be left side of binary expression");var o=this.startNodeAt(e,t);return o.left=n,o.operator=i,o.right=r,this.finishNode(o,s?"LogicalExpression":"BinaryExpression")};un.parseMaybeUnary=function(e,t,n,r){var i=this.start,s=this.startLoc,o;if(this.isContextual("await")&&this.canAwait)o=this.parseAwait(r),t=!0;else if(this.type.prefix){var a=this.startNode(),u=this.type===K.incDec;a.operator=this.value,a.prefix=!0,this.next(),a.argument=this.parseMaybeUnary(null,!0,u,r),this.checkExpressionErrors(e,!0),u?this.checkLValSimple(a.argument):this.strict&&a.operator==="delete"&&a.argument.type==="Identifier"?this.raiseRecoverable(a.start,"Deleting local variable in strict mode"):a.operator==="delete"&&$Ie(a.argument)?this.raiseRecoverable(a.start,"Private fields can not be deleted"):t=!0,o=this.finishNode(a,u?"UpdateExpression":"UnaryExpression")}else if(!t&&this.type===K.privateId)(r||this.privateNameStack.length===0)&&this.options.checkPrivateFields&&this.unexpected(),o=this.parsePrivateIdent(),this.type!==K._in&&this.unexpected();else{if(o=this.parseExprSubscripts(e,r),this.checkExpressionErrors(e))return o;for(;this.type.postfix&&!this.canInsertSemicolon();){var l=this.startNodeAt(i,s);l.operator=this.value,l.prefix=!1,l.argument=o,this.checkLValSimple(o),this.next(),o=this.finishNode(l,"UpdateExpression")}}if(!n&&this.eat(K.starstar))if(t)this.unexpected(this.lastTokStart);else return this.buildBinary(i,s,o,this.parseMaybeUnary(null,!1,!1,r),"**",!1);else return o};function $Ie(e){return e.type==="MemberExpression"&&e.property.type==="PrivateIdentifier"||e.type==="ChainExpression"&&$Ie(e.expression)}un.parseExprSubscripts=function(e,t){var n=this.start,r=this.startLoc,i=this.parseExprAtom(e,t);if(i.type==="ArrowFunctionExpression"&&this.input.slice(this.lastTokStart,this.lastTokEnd)!==")")return i;var s=this.parseSubscripts(i,n,r,!1,t);return e&&s.type==="MemberExpression"&&(e.parenthesizedAssign>=s.start&&(e.parenthesizedAssign=-1),e.parenthesizedBind>=s.start&&(e.parenthesizedBind=-1),e.trailingComma>=s.start&&(e.trailingComma=-1)),s};un.parseSubscripts=function(e,t,n,r,i){for(var s=this.options.ecmaVersion>=8&&e.type==="Identifier"&&e.name==="async"&&this.lastTokEnd===e.end&&!this.canInsertSemicolon()&&e.end-e.start===5&&this.potentialArrowAt===e.start,o=!1;;){var a=this.parseSubscript(e,t,n,r,s,o,i);if(a.optional&&(o=!0),a===e||a.type==="ArrowFunctionExpression"){if(o){var u=this.startNodeAt(t,n);u.expression=a,a=this.finishNode(u,"ChainExpression")}return a}e=a}};un.shouldParseAsyncArrow=function(){return!this.canInsertSemicolon()&&this.eat(K.arrow)};un.parseSubscriptAsyncArrow=function(e,t,n,r){return this.parseArrowExpression(this.startNodeAt(e,t),n,!0,r)};un.parseSubscript=function(e,t,n,r,i,s,o){var a=this.options.ecmaVersion>=11,u=a&&this.eat(K.questionDot);r&&u&&this.raise(this.lastTokStart,"Optional chaining cannot appear in the callee of new expressions");var l=this.eat(K.bracketL);if(l||u&&this.type!==K.parenL&&this.type!==K.backQuote||this.eat(K.dot)){var c=this.startNodeAt(t,n);c.object=e,l?(c.property=this.parseExpression(),this.expect(K.bracketR)):this.type===K.privateId&&e.type!=="Super"?c.property=this.parsePrivateIdent():c.property=this.parseIdent(this.options.allowReserved!=="never"),c.computed=!!l,a&&(c.optional=u),e=this.finishNode(c,"MemberExpression")}else if(!r&&this.eat(K.parenL)){var f=new a4,d=this.yieldPos,h=this.awaitPos,p=this.awaitIdentPos;this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0;var m=this.parseExprList(K.parenR,this.options.ecmaVersion>=8,!1,f);if(i&&!u&&this.shouldParseAsyncArrow())return this.checkPatternErrors(f,!1),this.checkYieldAwaitInDefaultParams(),this.awaitIdentPos>0&&this.raise(this.awaitIdentPos,"Cannot use 'await' as identifier inside an async function"),this.yieldPos=d,this.awaitPos=h,this.awaitIdentPos=p,this.parseSubscriptAsyncArrow(t,n,m,o);this.checkExpressionErrors(f,!0),this.yieldPos=d||this.yieldPos,this.awaitPos=h||this.awaitPos,this.awaitIdentPos=p||this.awaitIdentPos;var g=this.startNodeAt(t,n);g.callee=e,g.arguments=m,a&&(g.optional=u),e=this.finishNode(g,"CallExpression")}else if(this.type===K.backQuote){(u||s)&&this.raise(this.start,"Optional chaining cannot appear in the tag of tagged template expressions");var y=this.startNodeAt(t,n);y.tag=e,y.quasi=this.parseTemplate({isTagged:!0}),e=this.finishNode(y,"TaggedTemplateExpression")}return e};un.parseExprAtom=function(e,t,n){this.type===K.slash&&this.readRegexp();var r,i=this.potentialArrowAt===this.start;switch(this.type){case K._super:return this.allowSuper||this.raise(this.start,"'super' keyword outside a method"),r=this.startNode(),this.next(),this.type===K.parenL&&!this.allowDirectSuper&&this.raise(r.start,"super() call outside constructor of a subclass"),this.type!==K.dot&&this.type!==K.bracketL&&this.type!==K.parenL&&this.unexpected(),this.finishNode(r,"Super");case K._this:return r=this.startNode(),this.next(),this.finishNode(r,"ThisExpression");case K.name:var s=this.start,o=this.startLoc,a=this.containsEsc,u=this.parseIdent(!1);if(this.options.ecmaVersion>=8&&!a&&u.name==="async"&&!this.canInsertSemicolon()&&this.eat(K._function))return this.overrideContext(Ti.f_expr),this.parseFunction(this.startNodeAt(s,o),0,!1,!0,t);if(i&&!this.canInsertSemicolon()){if(this.eat(K.arrow))return this.parseArrowExpression(this.startNodeAt(s,o),[u],!1,t);if(this.options.ecmaVersion>=8&&u.name==="async"&&this.type===K.name&&!a&&(!this.potentialArrowInForAwait||this.value!=="of"||this.containsEsc))return u=this.parseIdent(!1),(this.canInsertSemicolon()||!this.eat(K.arrow))&&this.unexpected(),this.parseArrowExpression(this.startNodeAt(s,o),[u],!0,t)}return u;case K.regexp:var l=this.value;return r=this.parseLiteral(l.value),r.regex={pattern:l.pattern,flags:l.flags},r;case K.num:case K.string:return this.parseLiteral(this.value);case K._null:case K._true:case K._false:return r=this.startNode(),r.value=this.type===K._null?null:this.type===K._true,r.raw=this.type.keyword,this.next(),this.finishNode(r,"Literal");case K.parenL:var c=this.start,f=this.parseParenAndDistinguishExpression(i,t);return e&&(e.parenthesizedAssign<0&&!this.isSimpleAssignTarget(f)&&(e.parenthesizedAssign=c),e.parenthesizedBind<0&&(e.parenthesizedBind=c)),f;case K.bracketL:return r=this.startNode(),this.next(),r.elements=this.parseExprList(K.bracketR,!0,!0,e),this.finishNode(r,"ArrayExpression");case K.braceL:return this.overrideContext(Ti.b_expr),this.parseObj(!1,e);case K._function:return r=this.startNode(),this.next(),this.parseFunction(r,0);case K._class:return this.parseClass(this.startNode(),!1);case K._new:return this.parseNew();case K.backQuote:return this.parseTemplate();case K._import:return this.options.ecmaVersion>=11?this.parseExprImport(n):this.unexpected();default:return this.parseExprAtomDefault()}};un.parseExprAtomDefault=function(){this.unexpected()};un.parseExprImport=function(e){var t=this.startNode();if(this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword import"),this.next(),this.type===K.parenL&&!e)return this.parseDynamicImport(t);if(this.type===K.dot){var n=this.startNodeAt(t.start,t.loc&&t.loc.start);return n.name="import",t.meta=this.finishNode(n,"Identifier"),this.parseImportMeta(t)}else this.unexpected()};un.parseDynamicImport=function(e){if(this.next(),e.source=this.parseMaybeAssign(),!this.eat(K.parenR)){var t=this.start;this.eat(K.comma)&&this.eat(K.parenR)?this.raiseRecoverable(t,"Trailing comma is not allowed in import()"):this.unexpected(t)}return this.finishNode(e,"ImportExpression")};un.parseImportMeta=function(e){this.next();var t=this.containsEsc;return e.property=this.parseIdent(!0),e.property.name!=="meta"&&this.raiseRecoverable(e.property.start,"The only valid meta property for import is 'import.meta'"),t&&this.raiseRecoverable(e.start,"'import.meta' must not contain escaped characters"),this.options.sourceType!=="module"&&!this.options.allowImportExportEverywhere&&this.raiseRecoverable(e.start,"Cannot use 'import.meta' outside a module"),this.finishNode(e,"MetaProperty")};un.parseLiteral=function(e){var t=this.startNode();return t.value=e,t.raw=this.input.slice(this.start,this.end),t.raw.charCodeAt(t.raw.length-1)===110&&(t.bigint=t.raw.slice(0,-1).replace(/_/g,"")),this.next(),this.finishNode(t,"Literal")};un.parseParenExpression=function(){this.expect(K.parenL);var e=this.parseExpression();return this.expect(K.parenR),e};un.shouldParseArrow=function(e){return!this.canInsertSemicolon()};un.parseParenAndDistinguishExpression=function(e,t){var n=this.start,r=this.startLoc,i,s=this.options.ecmaVersion>=8;if(this.options.ecmaVersion>=6){this.next();var o=this.start,a=this.startLoc,u=[],l=!0,c=!1,f=new a4,d=this.yieldPos,h=this.awaitPos,p;for(this.yieldPos=0,this.awaitPos=0;this.type!==K.parenR;)if(l?l=!1:this.expect(K.comma),s&&this.afterTrailingComma(K.parenR,!0)){c=!0;break}else if(this.type===K.ellipsis){p=this.start,u.push(this.parseParenItem(this.parseRestBinding())),this.type===K.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element");break}else u.push(this.parseMaybeAssign(!1,f,this.parseParenItem));var m=this.lastTokEnd,g=this.lastTokEndLoc;if(this.expect(K.parenR),e&&this.shouldParseArrow(u)&&this.eat(K.arrow))return this.checkPatternErrors(f,!1),this.checkYieldAwaitInDefaultParams(),this.yieldPos=d,this.awaitPos=h,this.parseParenArrowList(n,r,u,t);(!u.length||c)&&this.unexpected(this.lastTokStart),p&&this.unexpected(p),this.checkExpressionErrors(f,!0),this.yieldPos=d||this.yieldPos,this.awaitPos=h||this.awaitPos,u.length>1?(i=this.startNodeAt(o,a),i.expressions=u,this.finishNodeAt(i,"SequenceExpression",m,g)):i=u[0]}else i=this.parseParenExpression();if(this.options.preserveParens){var y=this.startNodeAt(n,r);return y.expression=i,this.finishNode(y,"ParenthesizedExpression")}else return i};un.parseParenItem=function(e){return e};un.parseParenArrowList=function(e,t,n,r){return this.parseArrowExpression(this.startNodeAt(e,t),n,!1,r)};var H_t=[];un.parseNew=function(){this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword new");var e=this.startNode();if(this.next(),this.options.ecmaVersion>=6&&this.type===K.dot){var t=this.startNodeAt(e.start,e.loc&&e.loc.start);t.name="new",e.meta=this.finishNode(t,"Identifier"),this.next();var n=this.containsEsc;return e.property=this.parseIdent(!0),e.property.name!=="target"&&this.raiseRecoverable(e.property.start,"The only valid meta property for new is 'new.target'"),n&&this.raiseRecoverable(e.start,"'new.target' must not contain escaped characters"),this.allowNewDotTarget||this.raiseRecoverable(e.start,"'new.target' can only be used in functions and class static block"),this.finishNode(e,"MetaProperty")}var r=this.start,i=this.startLoc;return e.callee=this.parseSubscripts(this.parseExprAtom(null,!1,!0),r,i,!0,!1),this.eat(K.parenL)?e.arguments=this.parseExprList(K.parenR,this.options.ecmaVersion>=8,!1):e.arguments=H_t,this.finishNode(e,"NewExpression")};un.parseTemplateElement=function(e){var t=e.isTagged,n=this.startNode();return this.type===K.invalidTemplate?(t||this.raiseRecoverable(this.start,"Bad escape sequence in untagged template literal"),n.value={raw:this.value,cooked:null}):n.value={raw:this.input.slice(this.start,this.end).replace(/\r\n?/g,`
`),cooked:this.value},this.next(),n.tail=this.type===K.backQuote,this.finishNode(n,"TemplateElement")};un.parseTemplate=function(e){e===void 0&&(e={});var t=e.isTagged;t===void 0&&(t=!1);var n=this.startNode();this.next(),n.expressions=[];var r=this.parseTemplateElement({isTagged:t});for(n.quasis=[r];!r.tail;)this.type===K.eof&&this.raise(this.pos,"Unterminated template literal"),this.expect(K.dollarBraceL),n.expressions.push(this.parseExpression()),this.expect(K.braceR),n.quasis.push(r=this.parseTemplateElement({isTagged:t}));return this.next(),this.finishNode(n,"TemplateLiteral")};un.isAsyncProp=function(e){return!e.computed&&e.key.type==="Identifier"&&e.key.name==="async"&&(this.type===K.name||this.type===K.num||this.type===K.string||this.type===K.bracketL||this.type.keyword||this.options.ecmaVersion>=9&&this.type===K.star)&&!Kc.test(this.input.slice(this.lastTokEnd,this.start))};un.parseObj=function(e,t){var n=this.startNode(),r=!0,i={};for(n.properties=[],this.next();!this.eat(K.braceR);){if(r)r=!1;else if(this.expect(K.comma),this.options.ecmaVersion>=5&&this.afterTrailingComma(K.braceR))break;var s=this.parseProperty(e,t);e||this.checkPropClash(s,i,t),n.properties.push(s)}return this.finishNode(n,e?"ObjectPattern":"ObjectExpression")};un.parseProperty=function(e,t){var n=this.startNode(),r,i,s,o;if(this.options.ecmaVersion>=9&&this.eat(K.ellipsis))return e?(n.argument=this.parseIdent(!1),this.type===K.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element"),this.finishNode(n,"RestElement")):(n.argument=this.parseMaybeAssign(!1,t),this.type===K.comma&&t&&t.trailingComma<0&&(t.trailingComma=this.start),this.finishNode(n,"SpreadElement"));this.options.ecmaVersion>=6&&(n.method=!1,n.shorthand=!1,(e||t)&&(s=this.start,o=this.startLoc),e||(r=this.eat(K.star)));var a=this.containsEsc;return this.parsePropertyName(n),!e&&!a&&this.options.ecmaVersion>=8&&!r&&this.isAsyncProp(n)?(i=!0,r=this.options.ecmaVersion>=9&&this.eat(K.star),this.parsePropertyName(n)):i=!1,this.parsePropertyValue(n,e,r,i,s,o,t,a),this.finishNode(n,"Property")};un.parseGetterSetter=function(e){e.kind=e.key.name,this.parsePropertyName(e),e.value=this.parseMethod(!1);var t=e.kind==="get"?0:1;if(e.value.params.length!==t){var n=e.value.start;e.kind==="get"?this.raiseRecoverable(n,"getter should have no params"):this.raiseRecoverable(n,"setter should have exactly one param")}else e.kind==="set"&&e.value.params[0].type==="RestElement"&&this.raiseRecoverable(e.value.params[0].start,"Setter cannot use rest params")};un.parsePropertyValue=function(e,t,n,r,i,s,o,a){(n||r)&&this.type===K.colon&&this.unexpected(),this.eat(K.colon)?(e.value=t?this.parseMaybeDefault(this.start,this.startLoc):this.parseMaybeAssign(!1,o),e.kind="init"):this.options.ecmaVersion>=6&&this.type===K.parenL?(t&&this.unexpected(),e.kind="init",e.method=!0,e.value=this.parseMethod(n,r)):!t&&!a&&this.options.ecmaVersion>=5&&!e.computed&&e.key.type==="Identifier"&&(e.key.name==="get"||e.key.name==="set")&&this.type!==K.comma&&this.type!==K.braceR&&this.type!==K.eq?((n||r)&&this.unexpected(),this.parseGetterSetter(e)):this.options.ecmaVersion>=6&&!e.computed&&e.key.type==="Identifier"?((n||r)&&this.unexpected(),this.checkUnreserved(e.key),e.key.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=i),e.kind="init",t?e.value=this.parseMaybeDefault(i,s,this.copyNode(e.key)):this.type===K.eq&&o?(o.shorthandAssign<0&&(o.shorthandAssign=this.start),e.value=this.parseMaybeDefault(i,s,this.copyNode(e.key))):e.value=this.copyNode(e.key),e.shorthand=!0):this.unexpected()};un.parsePropertyName=function(e){if(this.options.ecmaVersion>=6){if(this.eat(K.bracketL))return e.computed=!0,e.key=this.parseMaybeAssign(),this.expect(K.bracketR),e.key;e.computed=!1}return e.key=this.type===K.num||this.type===K.string?this.parseExprAtom():this.parseIdent(this.options.allowReserved!=="never")};un.initFunction=function(e){e.id=null,this.options.ecmaVersion>=6&&(e.generator=e.expression=!1),this.options.ecmaVersion>=8&&(e.async=!1)};un.parseMethod=function(e,t,n){var r=this.startNode(),i=this.yieldPos,s=this.awaitPos,o=this.awaitIdentPos;return this.initFunction(r),this.options.ecmaVersion>=6&&(r.generator=e),this.options.ecmaVersion>=8&&(r.async=!!t),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(lQ(t,r.generator)|aQ|(n?RIe:0)),this.expect(K.parenL),r.params=this.parseBindingList(K.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams(),this.parseFunctionBody(r,!1,!0,!1),this.yieldPos=i,this.awaitPos=s,this.awaitIdentPos=o,this.finishNode(r,"FunctionExpression")};un.parseArrowExpression=function(e,t,n,r){var i=this.yieldPos,s=this.awaitPos,o=this.awaitIdentPos;return this.enterScope(lQ(n,!1)|IIe),this.initFunction(e),this.options.ecmaVersion>=8&&(e.async=!!n),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,e.params=this.toAssignableList(t,!0),this.parseFunctionBody(e,!0,!1,r),this.yieldPos=i,this.awaitPos=s,this.awaitIdentPos=o,this.finishNode(e,"ArrowFunctionExpression")};un.parseFunctionBody=function(e,t,n,r){var i=t&&this.type!==K.braceL,s=this.strict,o=!1;if(i)e.body=this.parseMaybeAssign(r),e.expression=!0,this.checkParams(e,!1);else{var a=this.options.ecmaVersion>=7&&!this.isSimpleParamList(e.params);(!s||a)&&(o=this.strictDirective(this.end),o&&a&&this.raiseRecoverable(e.start,"Illegal 'use strict' directive in function with non-simple parameter list"));var u=this.labels;this.labels=[],o&&(this.strict=!0),this.checkParams(e,!s&&!o&&!t&&!n&&this.isSimpleParamList(e.params)),this.strict&&e.id&&this.checkLValSimple(e.id,PIe),e.body=this.parseBlock(!1,void 0,o&&!s),e.expression=!1,this.adaptDirectivePrologue(e.body.body),this.labels=u}this.exitScope()};un.isSimpleParamList=function(e){for(var t=0,n=e;t<n.length;t+=1){var r=n[t];if(r.type!=="Identifier")return!1}return!0};un.checkParams=function(e,t){for(var n=Object.create(null),r=0,i=e.params;r<i.length;r+=1){var s=i[r];this.checkLValInnerPattern(s,cQ,t?null:n)}};un.parseExprList=function(e,t,n,r){for(var i=[],s=!0;!this.eat(e);){if(s)s=!1;else if(this.expect(K.comma),t&&this.afterTrailingComma(e))break;var o=void 0;n&&this.type===K.comma?o=null:this.type===K.ellipsis?(o=this.parseSpread(r),r&&this.type===K.comma&&r.trailingComma<0&&(r.trailingComma=this.start)):o=this.parseMaybeAssign(!1,r),i.push(o)}return i};un.checkUnreserved=function(e){var t=e.start,n=e.end,r=e.name;if(this.inGenerator&&r==="yield"&&this.raiseRecoverable(t,"Cannot use 'yield' as identifier inside a generator"),this.inAsync&&r==="await"&&this.raiseRecoverable(t,"Cannot use 'await' as identifier inside an async function"),this.currentThisScope().inClassFieldInit&&r==="arguments"&&this.raiseRecoverable(t,"Cannot use 'arguments' in class field initializer"),this.inClassStaticBlock&&(r==="arguments"||r==="await")&&this.raise(t,"Cannot use "+r+" in class static initialization block"),this.keywords.test(r)&&this.raise(t,"Unexpected keyword '"+r+"'"),!(this.options.ecmaVersion<6&&this.input.slice(t,n).indexOf("\\")!==-1)){var i=this.strict?this.reservedWordsStrict:this.reservedWords;i.test(r)&&(!this.inAsync&&r==="await"&&this.raiseRecoverable(t,"Cannot use keyword 'await' outside an async function"),this.raiseRecoverable(t,"The keyword '"+r+"' is reserved"))}};un.parseIdent=function(e){var t=this.parseIdentNode();return this.next(!!e),this.finishNode(t,"Identifier"),e||(this.checkUnreserved(t),t.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=t.start)),t};un.parseIdentNode=function(){var e=this.startNode();return this.type===K.name?e.name=this.value:this.type.keyword?(e.name=this.type.keyword,(e.name==="class"||e.name==="function")&&(this.lastTokEnd!==this.lastTokStart+1||this.input.charCodeAt(this.lastTokStart)!==46)&&this.context.pop(),this.type=K.name):this.unexpected(),e};un.parsePrivateIdent=function(){var e=this.startNode();return this.type===K.privateId?e.name=this.value:this.unexpected(),this.next(),this.finishNode(e,"PrivateIdentifier"),this.options.checkPrivateFields&&(this.privateNameStack.length===0?this.raise(e.start,"Private field '#"+e.name+"' must be declared in an enclosing class"):this.privateNameStack[this.privateNameStack.length-1].used.push(e)),e};un.parseYield=function(e){this.yieldPos||(this.yieldPos=this.start);var t=this.startNode();return this.next(),this.type===K.semi||this.canInsertSemicolon()||this.type!==K.star&&!this.type.startsExpr?(t.delegate=!1,t.argument=null):(t.delegate=this.eat(K.star),t.argument=this.parseMaybeAssign(e)),this.finishNode(t,"YieldExpression")};un.parseAwait=function(e){this.awaitPos||(this.awaitPos=this.start);var t=this.startNode();return this.next(),t.argument=this.parseMaybeUnary(null,!0,!1,e),this.finishNode(t,"AwaitExpression")};var E$=Bs.prototype;E$.raise=function(e,t){var n=CIe(this.input,e);t+=" ("+n.line+":"+n.column+")";var r=new SyntaxError(t);throw r.pos=e,r.loc=n,r.raisedAt=this.pos,r};E$.raiseRecoverable=E$.raise;E$.curPosition=function(){if(this.options.locations)return new sI(this.curLine,this.pos-this.lineStart)};var Hy=Bs.prototype,q_t=function(t){this.flags=t,this.var=[],this.lexical=[],this.functions=[],this.inClassFieldInit=!1};Hy.enterScope=function(e){this.scopeStack.push(new q_t(e))};Hy.exitScope=function(){this.scopeStack.pop()};Hy.treatFunctionsAsVarInScope=function(e){return e.flags&CS||!this.inModule&&e.flags&oI};Hy.declareName=function(e,t,n){var r=!1;if(t===sg){var i=this.currentScope();r=i.lexical.indexOf(e)>-1||i.functions.indexOf(e)>-1||i.var.indexOf(e)>-1,i.lexical.push(e),this.inModule&&i.flags&oI&&delete this.undefinedExports[e]}else if(t===DIe){var s=this.currentScope();s.lexical.push(e)}else if(t===NIe){var o=this.currentScope();this.treatFunctionsAsVar?r=o.lexical.indexOf(e)>-1:r=o.lexical.indexOf(e)>-1||o.var.indexOf(e)>-1,o.functions.push(e)}else for(var a=this.scopeStack.length-1;a>=0;--a){var u=this.scopeStack[a];if(u.lexical.indexOf(e)>-1&&!(u.flags&kIe&&u.lexical[0]===e)||!this.treatFunctionsAsVarInScope(u)&&u.functions.indexOf(e)>-1){r=!0;break}if(u.var.push(e),this.inModule&&u.flags&oI&&delete this.undefinedExports[e],u.flags&uQ)break}r&&this.raiseRecoverable(n,"Identifier '"+e+"' has already been declared")};Hy.checkLocalExport=function(e){this.scopeStack[0].lexical.indexOf(e.name)===-1&&this.scopeStack[0].var.indexOf(e.name)===-1&&(this.undefinedExports[e.name]=e)};Hy.currentScope=function(){return this.scopeStack[this.scopeStack.length-1]};Hy.currentVarScope=function(){for(var e=this.scopeStack.length-1;;e--){var t=this.scopeStack[e];if(t.flags&uQ)return t}};Hy.currentThisScope=function(){for(var e=this.scopeStack.length-1;;e--){var t=this.scopeStack[e];if(t.flags&uQ&&!(t.flags&IIe))return t}};var u4=function(t,n,r){this.type="",this.start=n,this.end=0,t.options.locations&&(this.loc=new o4(t,r)),t.options.directSourceFile&&(this.sourceFile=t.options.directSourceFile),t.options.ranges&&(this.range=[n,0])},Bk=Bs.prototype;Bk.startNode=function(){return new u4(this,this.start,this.startLoc)};Bk.startNodeAt=function(e,t){return new u4(this,e,t)};function MIe(e,t,n,r){return e.type=t,e.end=n,this.options.locations&&(e.loc.end=r),this.options.ranges&&(e.range[1]=n),e}Bk.finishNode=function(e,t){return MIe.call(this,e,t,this.lastTokEnd,this.lastTokEndLoc)};Bk.finishNodeAt=function(e,t,n,r){return MIe.call(this,e,t,n,r)};Bk.copyNode=function(e){var t=new u4(this,e.start,this.startLoc);for(var n in e)t[n]=e[n];return t};var LIe="ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS",FIe=LIe+" Extended_Pictographic",jIe=FIe,BIe=jIe+" EBase EComp EMod EPres ExtPict",UIe=BIe,W_t=UIe,G_t={9:LIe,10:FIe,11:jIe,12:BIe,13:UIe,14:W_t},Y_t="Basic_Emoji Emoji_Keycap_Sequence RGI_Emoji_Modifier_Sequence RGI_Emoji_Flag_Sequence RGI_Emoji_Tag_Sequence RGI_Emoji_ZWJ_Sequence RGI_Emoji",K_t={9:"",10:"",11:"",12:"",13:"",14:Y_t},pfe="Cased_Letter LC Close_Punctuation Pe Connector_Punctuation Pc Control Cc cntrl Currency_Symbol Sc Dash_Punctuation Pd Decimal_Number Nd digit Enclosing_Mark Me Final_Punctuation Pf Format Cf Initial_Punctuation Pi Letter L Letter_Number Nl Line_Separator Zl Lowercase_Letter Ll Mark M Combining_Mark Math_Symbol Sm Modifier_Letter Lm Modifier_Symbol Sk Nonspacing_Mark Mn Number N Open_Punctuation Ps Other C Other_Letter Lo Other_Number No Other_Punctuation Po Other_Symbol So Paragraph_Separator Zp Private_Use Co Punctuation P punct Separator Z Space_Separator Zs Spacing_Mark Mc Surrogate Cs Symbol S Titlecase_Letter Lt Unassigned Cn Uppercase_Letter Lu",zIe="Adlam Adlm Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb",VIe=zIe+" Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd",HIe=VIe+" Elymaic Elym Nandinagari Nand Nyiakeng_Puachue_Hmong Hmnp Wancho Wcho",qIe=HIe+" Chorasmian Chrs Diak Dives_Akuru Khitan_Small_Script Kits Yezi Yezidi",WIe=qIe+" Cypro_Minoan Cpmn Old_Uyghur Ougr Tangsa Tnsa Toto Vithkuqi Vith",X_t=WIe+" Hrkt Katakana_Or_Hiragana Kawi Nag_Mundari Nagm Unknown Zzzz",Q_t={9:zIe,10:VIe,11:HIe,12:qIe,13:WIe,14:X_t},GIe={};function J_t(e){var t=GIe[e]={binary:e0(G_t[e]+" "+pfe),binaryOfStrings:e0(K_t[e]),nonBinary:{General_Category:e0(pfe),Script:e0(Q_t[e])}};t.nonBinary.Script_Extensions=t.nonBinary.Script,t.nonBinary.gc=t.nonBinary.General_Category,t.nonBinary.sc=t.nonBinary.Script,t.nonBinary.scx=t.nonBinary.Script_Extensions}for(var i9=0,mfe=[9,10,11,12,13,14];i9<mfe.length;i9+=1){var Z_t=mfe[i9];J_t(Z_t)}var Ct=Bs.prototype,ep=function(t){this.parser=t,this.validFlags="gim"+(t.options.ecmaVersion>=6?"uy":"")+(t.options.ecmaVersion>=9?"s":"")+(t.options.ecmaVersion>=13?"d":"")+(t.options.ecmaVersion>=15?"v":""),this.unicodeProperties=GIe[t.options.ecmaVersion>=14?14:t.options.ecmaVersion],this.source="",this.flags="",this.start=0,this.switchU=!1,this.switchV=!1,this.switchN=!1,this.pos=0,this.lastIntValue=0,this.lastStringValue="",this.lastAssertionIsQuantifiable=!1,this.numCapturingParens=0,this.maxBackReference=0,this.groupNames=[],this.backReferenceNames=[]};ep.prototype.reset=function(t,n,r){var i=r.indexOf("v")!==-1,s=r.indexOf("u")!==-1;this.start=t|0,this.source=n+"",this.flags=r,i&&this.parser.options.ecmaVersion>=15?(this.switchU=!0,this.switchV=!0,this.switchN=!0):(this.switchU=s&&this.parser.options.ecmaVersion>=6,this.switchV=!1,this.switchN=s&&this.parser.options.ecmaVersion>=9)};ep.prototype.raise=function(t){this.parser.raiseRecoverable(this.start,"Invalid regular expression: /"+this.source+"/: "+t)};ep.prototype.at=function(t,n){n===void 0&&(n=!1);var r=this.source,i=r.length;if(t>=i)return-1;var s=r.charCodeAt(t);if(!(n||this.switchU)||s<=55295||s>=57344||t+1>=i)return s;var o=r.charCodeAt(t+1);return o>=56320&&o<=57343?(s<<10)+o-56613888:s};ep.prototype.nextIndex=function(t,n){n===void 0&&(n=!1);var r=this.source,i=r.length;if(t>=i)return i;var s=r.charCodeAt(t),o;return!(n||this.switchU)||s<=55295||s>=57344||t+1>=i||(o=r.charCodeAt(t+1))<56320||o>57343?t+1:t+2};ep.prototype.current=function(t){return t===void 0&&(t=!1),this.at(this.pos,t)};ep.prototype.lookahead=function(t){return t===void 0&&(t=!1),this.at(this.nextIndex(this.pos,t),t)};ep.prototype.advance=function(t){t===void 0&&(t=!1),this.pos=this.nextIndex(this.pos,t)};ep.prototype.eat=function(t,n){return n===void 0&&(n=!1),this.current(n)===t?(this.advance(n),!0):!1};ep.prototype.eatChars=function(t,n){n===void 0&&(n=!1);for(var r=this.pos,i=0,s=t;i<s.length;i+=1){var o=s[i],a=this.at(r,n);if(a===-1||a!==o)return!1;r=this.nextIndex(r,n)}return this.pos=r,!0};Ct.validateRegExpFlags=function(e){for(var t=e.validFlags,n=e.flags,r=!1,i=!1,s=0;s<n.length;s++){var o=n.charAt(s);t.indexOf(o)===-1&&this.raise(e.start,"Invalid regular expression flag"),n.indexOf(o,s+1)>-1&&this.raise(e.start,"Duplicate regular expression flag"),o==="u"&&(r=!0),o==="v"&&(i=!0)}this.options.ecmaVersion>=15&&r&&i&&this.raise(e.start,"Invalid regular expression flag")};Ct.validateRegExpPattern=function(e){this.regexp_pattern(e),!e.switchN&&this.options.ecmaVersion>=9&&e.groupNames.length>0&&(e.switchN=!0,this.regexp_pattern(e))};Ct.regexp_pattern=function(e){e.pos=0,e.lastIntValue=0,e.lastStringValue="",e.lastAssertionIsQuantifiable=!1,e.numCapturingParens=0,e.maxBackReference=0,e.groupNames.length=0,e.backReferenceNames.length=0,this.regexp_disjunction(e),e.pos!==e.source.length&&(e.eat(41)&&e.raise("Unmatched ')'"),(e.eat(93)||e.eat(125))&&e.raise("Lone quantifier brackets")),e.maxBackReference>e.numCapturingParens&&e.raise("Invalid escape");for(var t=0,n=e.backReferenceNames;t<n.length;t+=1){var r=n[t];e.groupNames.indexOf(r)===-1&&e.raise("Invalid named capture referenced")}};Ct.regexp_disjunction=function(e){for(this.regexp_alternative(e);e.eat(124);)this.regexp_alternative(e);this.regexp_eatQuantifier(e,!0)&&e.raise("Nothing to repeat"),e.eat(123)&&e.raise("Lone quantifier brackets")};Ct.regexp_alternative=function(e){for(;e.pos<e.source.length&&this.regexp_eatTerm(e););};Ct.regexp_eatTerm=function(e){return this.regexp_eatAssertion(e)?(e.lastAssertionIsQuantifiable&&this.regexp_eatQuantifier(e)&&e.switchU&&e.raise("Invalid quantifier"),!0):(e.switchU?this.regexp_eatAtom(e):this.regexp_eatExtendedAtom(e))?(this.regexp_eatQuantifier(e),!0):!1};Ct.regexp_eatAssertion=function(e){var t=e.pos;if(e.lastAssertionIsQuantifiable=!1,e.eat(94)||e.eat(36))return!0;if(e.eat(92)){if(e.eat(66)||e.eat(98))return!0;e.pos=t}if(e.eat(40)&&e.eat(63)){var n=!1;if(this.options.ecmaVersion>=9&&(n=e.eat(60)),e.eat(61)||e.eat(33))return this.regexp_disjunction(e),e.eat(41)||e.raise("Unterminated group"),e.lastAssertionIsQuantifiable=!n,!0}return e.pos=t,!1};Ct.regexp_eatQuantifier=function(e,t){return t===void 0&&(t=!1),this.regexp_eatQuantifierPrefix(e,t)?(e.eat(63),!0):!1};Ct.regexp_eatQuantifierPrefix=function(e,t){return e.eat(42)||e.eat(43)||e.eat(63)||this.regexp_eatBracedQuantifier(e,t)};Ct.regexp_eatBracedQuantifier=function(e,t){var n=e.pos;if(e.eat(123)){var r=0,i=-1;if(this.regexp_eatDecimalDigits(e)&&(r=e.lastIntValue,e.eat(44)&&this.regexp_eatDecimalDigits(e)&&(i=e.lastIntValue),e.eat(125)))return i!==-1&&i<r&&!t&&e.raise("numbers out of order in {} quantifier"),!0;e.switchU&&!t&&e.raise("Incomplete quantifier"),e.pos=n}return!1};Ct.regexp_eatAtom=function(e){return this.regexp_eatPatternCharacters(e)||e.eat(46)||this.regexp_eatReverseSolidusAtomEscape(e)||this.regexp_eatCharacterClass(e)||this.regexp_eatUncapturingGroup(e)||this.regexp_eatCapturingGroup(e)};Ct.regexp_eatReverseSolidusAtomEscape=function(e){var t=e.pos;if(e.eat(92)){if(this.regexp_eatAtomEscape(e))return!0;e.pos=t}return!1};Ct.regexp_eatUncapturingGroup=function(e){var t=e.pos;if(e.eat(40)){if(e.eat(63)&&e.eat(58)){if(this.regexp_disjunction(e),e.eat(41))return!0;e.raise("Unterminated group")}e.pos=t}return!1};Ct.regexp_eatCapturingGroup=function(e){if(e.eat(40)){if(this.options.ecmaVersion>=9?this.regexp_groupSpecifier(e):e.current()===63&&e.raise("Invalid group"),this.regexp_disjunction(e),e.eat(41))return e.numCapturingParens+=1,!0;e.raise("Unterminated group")}return!1};Ct.regexp_eatExtendedAtom=function(e){return e.eat(46)||this.regexp_eatReverseSolidusAtomEscape(e)||this.regexp_eatCharacterClass(e)||this.regexp_eatUncapturingGroup(e)||this.regexp_eatCapturingGroup(e)||this.regexp_eatInvalidBracedQuantifier(e)||this.regexp_eatExtendedPatternCharacter(e)};Ct.regexp_eatInvalidBracedQuantifier=function(e){return this.regexp_eatBracedQuantifier(e,!0)&&e.raise("Nothing to repeat"),!1};Ct.regexp_eatSyntaxCharacter=function(e){var t=e.current();return YIe(t)?(e.lastIntValue=t,e.advance(),!0):!1};function YIe(e){return e===36||e>=40&&e<=43||e===46||e===63||e>=91&&e<=94||e>=123&&e<=125}Ct.regexp_eatPatternCharacters=function(e){for(var t=e.pos,n=0;(n=e.current())!==-1&&!YIe(n);)e.advance();return e.pos!==t};Ct.regexp_eatExtendedPatternCharacter=function(e){var t=e.current();return t!==-1&&t!==36&&!(t>=40&&t<=43)&&t!==46&&t!==63&&t!==91&&t!==94&&t!==124?(e.advance(),!0):!1};Ct.regexp_groupSpecifier=function(e){if(e.eat(63)){if(this.regexp_eatGroupName(e)){e.groupNames.indexOf(e.lastStringValue)!==-1&&e.raise("Duplicate capture group name"),e.groupNames.push(e.lastStringValue);return}e.raise("Invalid group")}};Ct.regexp_eatGroupName=function(e){if(e.lastStringValue="",e.eat(60)){if(this.regexp_eatRegExpIdentifierName(e)&&e.eat(62))return!0;e.raise("Invalid capture group name")}return!1};Ct.regexp_eatRegExpIdentifierName=function(e){if(e.lastStringValue="",this.regexp_eatRegExpIdentifierStart(e)){for(e.lastStringValue+=ny(e.lastIntValue);this.regexp_eatRegExpIdentifierPart(e);)e.lastStringValue+=ny(e.lastIntValue);return!0}return!1};Ct.regexp_eatRegExpIdentifierStart=function(e){var t=e.pos,n=this.options.ecmaVersion>=11,r=e.current(n);return e.advance(n),r===92&&this.regexp_eatRegExpUnicodeEscapeSequence(e,n)&&(r=e.lastIntValue),ewt(r)?(e.lastIntValue=r,!0):(e.pos=t,!1)};function ewt(e){return Dm(e,!0)||e===36||e===95}Ct.regexp_eatRegExpIdentifierPart=function(e){var t=e.pos,n=this.options.ecmaVersion>=11,r=e.current(n);return e.advance(n),r===92&&this.regexp_eatRegExpUnicodeEscapeSequence(e,n)&&(r=e.lastIntValue),twt(r)?(e.lastIntValue=r,!0):(e.pos=t,!1)};function twt(e){return ux(e,!0)||e===36||e===95||e===8204||e===8205}Ct.regexp_eatAtomEscape=function(e){return this.regexp_eatBackReference(e)||this.regexp_eatCharacterClassEscape(e)||this.regexp_eatCharacterEscape(e)||e.switchN&&this.regexp_eatKGroupName(e)?!0:(e.switchU&&(e.current()===99&&e.raise("Invalid unicode escape"),e.raise("Invalid escape")),!1)};Ct.regexp_eatBackReference=function(e){var t=e.pos;if(this.regexp_eatDecimalEscape(e)){var n=e.lastIntValue;if(e.switchU)return n>e.maxBackReference&&(e.maxBackReference=n),!0;if(n<=e.numCapturingParens)return!0;e.pos=t}return!1};Ct.regexp_eatKGroupName=function(e){if(e.eat(107)){if(this.regexp_eatGroupName(e))return e.backReferenceNames.push(e.lastStringValue),!0;e.raise("Invalid named reference")}return!1};Ct.regexp_eatCharacterEscape=function(e){return this.regexp_eatControlEscape(e)||this.regexp_eatCControlLetter(e)||this.regexp_eatZero(e)||this.regexp_eatHexEscapeSequence(e)||this.regexp_eatRegExpUnicodeEscapeSequence(e,!1)||!e.switchU&&this.regexp_eatLegacyOctalEscapeSequence(e)||this.regexp_eatIdentityEscape(e)};Ct.regexp_eatCControlLetter=function(e){var t=e.pos;if(e.eat(99)){if(this.regexp_eatControlLetter(e))return!0;e.pos=t}return!1};Ct.regexp_eatZero=function(e){return e.current()===48&&!l4(e.lookahead())?(e.lastIntValue=0,e.advance(),!0):!1};Ct.regexp_eatControlEscape=function(e){var t=e.current();return t===116?(e.lastIntValue=9,e.advance(),!0):t===110?(e.lastIntValue=10,e.advance(),!0):t===118?(e.lastIntValue=11,e.advance(),!0):t===102?(e.lastIntValue=12,e.advance(),!0):t===114?(e.lastIntValue=13,e.advance(),!0):!1};Ct.regexp_eatControlLetter=function(e){var t=e.current();return KIe(t)?(e.lastIntValue=t%32,e.advance(),!0):!1};function KIe(e){return e>=65&&e<=90||e>=97&&e<=122}Ct.regexp_eatRegExpUnicodeEscapeSequence=function(e,t){t===void 0&&(t=!1);var n=e.pos,r=t||e.switchU;if(e.eat(117)){if(this.regexp_eatFixedHexDigits(e,4)){var i=e.lastIntValue;if(r&&i>=55296&&i<=56319){var s=e.pos;if(e.eat(92)&&e.eat(117)&&this.regexp_eatFixedHexDigits(e,4)){var o=e.lastIntValue;if(o>=56320&&o<=57343)return e.lastIntValue=(i-55296)*1024+(o-56320)+65536,!0}e.pos=s,e.lastIntValue=i}return!0}if(r&&e.eat(123)&&this.regexp_eatHexDigits(e)&&e.eat(125)&&nwt(e.lastIntValue))return!0;r&&e.raise("Invalid unicode escape"),e.pos=n}return!1};function nwt(e){return e>=0&&e<=1114111}Ct.regexp_eatIdentityEscape=function(e){if(e.switchU)return this.regexp_eatSyntaxCharacter(e)?!0:e.eat(47)?(e.lastIntValue=47,!0):!1;var t=e.current();return t!==99&&(!e.switchN||t!==107)?(e.lastIntValue=t,e.advance(),!0):!1};Ct.regexp_eatDecimalEscape=function(e){e.lastIntValue=0;var t=e.current();if(t>=49&&t<=57){do e.lastIntValue=10*e.lastIntValue+(t-48),e.advance();while((t=e.current())>=48&&t<=57);return!0}return!1};var XIe=0,Pm=1,wc=2;Ct.regexp_eatCharacterClassEscape=function(e){var t=e.current();if(rwt(t))return e.lastIntValue=-1,e.advance(),Pm;var n=!1;if(e.switchU&&this.options.ecmaVersion>=9&&((n=t===80)||t===112)){e.lastIntValue=-1,e.advance();var r;if(e.eat(123)&&(r=this.regexp_eatUnicodePropertyValueExpression(e))&&e.eat(125))return n&&r===wc&&e.raise("Invalid property name"),r;e.raise("Invalid property name")}return XIe};function rwt(e){return e===100||e===68||e===115||e===83||e===119||e===87}Ct.regexp_eatUnicodePropertyValueExpression=function(e){var t=e.pos;if(this.regexp_eatUnicodePropertyName(e)&&e.eat(61)){var n=e.lastStringValue;if(this.regexp_eatUnicodePropertyValue(e)){var r=e.lastStringValue;return this.regexp_validateUnicodePropertyNameAndValue(e,n,r),Pm}}if(e.pos=t,this.regexp_eatLoneUnicodePropertyNameOrValue(e)){var i=e.lastStringValue;return this.regexp_validateUnicodePropertyNameOrValue(e,i)}return XIe};Ct.regexp_validateUnicodePropertyNameAndValue=function(e,t,n){Fk(e.unicodeProperties.nonBinary,t)||e.raise("Invalid property name"),e.unicodeProperties.nonBinary[t].test(n)||e.raise("Invalid property value")};Ct.regexp_validateUnicodePropertyNameOrValue=function(e,t){if(e.unicodeProperties.binary.test(t))return Pm;if(e.switchV&&e.unicodeProperties.binaryOfStrings.test(t))return wc;e.raise("Invalid property name")};Ct.regexp_eatUnicodePropertyName=function(e){var t=0;for(e.lastStringValue="";QIe(t=e.current());)e.lastStringValue+=ny(t),e.advance();return e.lastStringValue!==""};function QIe(e){return KIe(e)||e===95}Ct.regexp_eatUnicodePropertyValue=function(e){var t=0;for(e.lastStringValue="";iwt(t=e.current());)e.lastStringValue+=ny(t),e.advance();return e.lastStringValue!==""};function iwt(e){return QIe(e)||l4(e)}Ct.regexp_eatLoneUnicodePropertyNameOrValue=function(e){return this.regexp_eatUnicodePropertyValue(e)};Ct.regexp_eatCharacterClass=function(e){if(e.eat(91)){var t=e.eat(94),n=this.regexp_classContents(e);return e.eat(93)||e.raise("Unterminated character class"),t&&n===wc&&e.raise("Negated character class may contain strings"),!0}return!1};Ct.regexp_classContents=function(e){return e.current()===93?Pm:e.switchV?this.regexp_classSetExpression(e):(this.regexp_nonEmptyClassRanges(e),Pm)};Ct.regexp_nonEmptyClassRanges=function(e){for(;this.regexp_eatClassAtom(e);){var t=e.lastIntValue;if(e.eat(45)&&this.regexp_eatClassAtom(e)){var n=e.lastIntValue;e.switchU&&(t===-1||n===-1)&&e.raise("Invalid character class"),t!==-1&&n!==-1&&t>n&&e.raise("Range out of order in character class")}}};Ct.regexp_eatClassAtom=function(e){var t=e.pos;if(e.eat(92)){if(this.regexp_eatClassEscape(e))return!0;if(e.switchU){var n=e.current();(n===99||eke(n))&&e.raise("Invalid class escape"),e.raise("Invalid escape")}e.pos=t}var r=e.current();return r!==93?(e.lastIntValue=r,e.advance(),!0):!1};Ct.regexp_eatClassEscape=function(e){var t=e.pos;if(e.eat(98))return e.lastIntValue=8,!0;if(e.switchU&&e.eat(45))return e.lastIntValue=45,!0;if(!e.switchU&&e.eat(99)){if(this.regexp_eatClassControlLetter(e))return!0;e.pos=t}return this.regexp_eatCharacterClassEscape(e)||this.regexp_eatCharacterEscape(e)};Ct.regexp_classSetExpression=function(e){var t=Pm,n;if(!this.regexp_eatClassSetRange(e))if(n=this.regexp_eatClassSetOperand(e)){n===wc&&(t=wc);for(var r=e.pos;e.eatChars([38,38]);){if(e.current()!==38&&(n=this.regexp_eatClassSetOperand(e))){n!==wc&&(t=Pm);continue}e.raise("Invalid character in character class")}if(r!==e.pos)return t;for(;e.eatChars([45,45]);)this.regexp_eatClassSetOperand(e)||e.raise("Invalid character in character class");if(r!==e.pos)return t}else e.raise("Invalid character in character class");for(;;)if(!this.regexp_eatClassSetRange(e)){if(n=this.regexp_eatClassSetOperand(e),!n)return t;n===wc&&(t=wc)}};Ct.regexp_eatClassSetRange=function(e){var t=e.pos;if(this.regexp_eatClassSetCharacter(e)){var n=e.lastIntValue;if(e.eat(45)&&this.regexp_eatClassSetCharacter(e)){var r=e.lastIntValue;return n!==-1&&r!==-1&&n>r&&e.raise("Range out of order in character class"),!0}e.pos=t}return!1};Ct.regexp_eatClassSetOperand=function(e){return this.regexp_eatClassSetCharacter(e)?Pm:this.regexp_eatClassStringDisjunction(e)||this.regexp_eatNestedClass(e)};Ct.regexp_eatNestedClass=function(e){var t=e.pos;if(e.eat(91)){var n=e.eat(94),r=this.regexp_classContents(e);if(e.eat(93))return n&&r===wc&&e.raise("Negated character class may contain strings"),r;e.pos=t}if(e.eat(92)){var i=this.regexp_eatCharacterClassEscape(e);if(i)return i;e.pos=t}return null};Ct.regexp_eatClassStringDisjunction=function(e){var t=e.pos;if(e.eatChars([92,113])){if(e.eat(123)){var n=this.regexp_classStringDisjunctionContents(e);if(e.eat(125))return n}else e.raise("Invalid escape");e.pos=t}return null};Ct.regexp_classStringDisjunctionContents=function(e){for(var t=this.regexp_classString(e);e.eat(124);)this.regexp_classString(e)===wc&&(t=wc);return t};Ct.regexp_classString=function(e){for(var t=0;this.regexp_eatClassSetCharacter(e);)t++;return t===1?Pm:wc};Ct.regexp_eatClassSetCharacter=function(e){var t=e.pos;if(e.eat(92))return this.regexp_eatCharacterEscape(e)||this.regexp_eatClassSetReservedPunctuator(e)?!0:e.eat(98)?(e.lastIntValue=8,!0):(e.pos=t,!1);var n=e.current();return n<0||n===e.lookahead()&&swt(n)||owt(n)?!1:(e.advance(),e.lastIntValue=n,!0)};function swt(e){return e===33||e>=35&&e<=38||e>=42&&e<=44||e===46||e>=58&&e<=64||e===94||e===96||e===126}function owt(e){return e===40||e===41||e===45||e===47||e>=91&&e<=93||e>=123&&e<=125}Ct.regexp_eatClassSetReservedPunctuator=function(e){var t=e.current();return awt(t)?(e.lastIntValue=t,e.advance(),!0):!1};function awt(e){return e===33||e===35||e===37||e===38||e===44||e===45||e>=58&&e<=62||e===64||e===96||e===126}Ct.regexp_eatClassControlLetter=function(e){var t=e.current();return l4(t)||t===95?(e.lastIntValue=t%32,e.advance(),!0):!1};Ct.regexp_eatHexEscapeSequence=function(e){var t=e.pos;if(e.eat(120)){if(this.regexp_eatFixedHexDigits(e,2))return!0;e.switchU&&e.raise("Invalid escape"),e.pos=t}return!1};Ct.regexp_eatDecimalDigits=function(e){var t=e.pos,n=0;for(e.lastIntValue=0;l4(n=e.current());)e.lastIntValue=10*e.lastIntValue+(n-48),e.advance();return e.pos!==t};function l4(e){return e>=48&&e<=57}Ct.regexp_eatHexDigits=function(e){var t=e.pos,n=0;for(e.lastIntValue=0;JIe(n=e.current());)e.lastIntValue=16*e.lastIntValue+ZIe(n),e.advance();return e.pos!==t};function JIe(e){return e>=48&&e<=57||e>=65&&e<=70||e>=97&&e<=102}function ZIe(e){return e>=65&&e<=70?10+(e-65):e>=97&&e<=102?10+(e-97):e-48}Ct.regexp_eatLegacyOctalEscapeSequence=function(e){if(this.regexp_eatOctalDigit(e)){var t=e.lastIntValue;if(this.regexp_eatOctalDigit(e)){var n=e.lastIntValue;t<=3&&this.regexp_eatOctalDigit(e)?e.lastIntValue=t*64+n*8+e.lastIntValue:e.lastIntValue=t*8+n}else e.lastIntValue=t;return!0}return!1};Ct.regexp_eatOctalDigit=function(e){var t=e.current();return eke(t)?(e.lastIntValue=t-48,e.advance(),!0):(e.lastIntValue=0,!1)};function eke(e){return e>=48&&e<=55}Ct.regexp_eatFixedHexDigits=function(e,t){var n=e.pos;e.lastIntValue=0;for(var r=0;r<t;++r){var i=e.current();if(!JIe(i))return e.pos=n,!1;e.lastIntValue=16*e.lastIntValue+ZIe(i),e.advance()}return!0};var dQ=function(t){this.type=t.type,this.value=t.value,this.start=t.start,this.end=t.end,t.options.locations&&(this.loc=new o4(t,t.startLoc,t.endLoc)),t.options.ranges&&(this.range=[t.start,t.end])},qn=Bs.prototype;qn.next=function(e){!e&&this.type.keyword&&this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword "+this.type.keyword),this.options.onToken&&this.options.onToken(new dQ(this)),this.lastTokEnd=this.end,this.lastTokStart=this.start,this.lastTokEndLoc=this.endLoc,this.lastTokStartLoc=this.startLoc,this.nextToken()};qn.getToken=function(){return this.next(),new dQ(this)};typeof Symbol<"u"&&(qn[Symbol.iterator]=function(){var e=this;return{next:function(){var t=e.getToken();return{done:t.type===K.eof,value:t}}}});qn.nextToken=function(){var e=this.curContext();if((!e||!e.preserveSpace)&&this.skipSpace(),this.start=this.pos,this.options.locations&&(this.startLoc=this.curPosition()),this.pos>=this.input.length)return this.finishToken(K.eof);if(e.override)return e.override(this);this.readToken(this.fullCharCodeAtPos())};qn.readToken=function(e){return Dm(e,this.options.ecmaVersion>=6)||e===92?this.readWord():this.getTokenFromCode(e)};qn.fullCharCodeAtPos=function(){var e=this.input.charCodeAt(this.pos);if(e<=55295||e>=56320)return e;var t=this.input.charCodeAt(this.pos+1);return t<=56319||t>=57344?e:(e<<10)+t-56613888};qn.skipBlockComment=function(){var e=this.options.onComment&&this.curPosition(),t=this.pos,n=this.input.indexOf("*/",this.pos+=2);if(n===-1&&this.raise(this.pos-2,"Unterminated comment"),this.pos=n+2,this.options.locations)for(var r=void 0,i=t;(r=xIe(this.input,i,this.pos))>-1;)++this.curLine,i=this.lineStart=r;this.options.onComment&&this.options.onComment(!0,this.input.slice(t+2,n),t,this.pos,e,this.curPosition())};qn.skipLineComment=function(e){for(var t=this.pos,n=this.options.onComment&&this.curPosition(),r=this.input.charCodeAt(this.pos+=e);this.pos<this.input.length&&!TS(r);)r=this.input.charCodeAt(++this.pos);this.options.onComment&&this.options.onComment(!1,this.input.slice(t+e,this.pos),t,this.pos,n,this.curPosition())};qn.skipSpace=function(){e:for(;this.pos<this.input.length;){var e=this.input.charCodeAt(this.pos);switch(e){case 32:case 160:++this.pos;break;case 13:this.input.charCodeAt(this.pos+1)===10&&++this.pos;case 10:case 8232:case 8233:++this.pos,this.options.locations&&(++this.curLine,this.lineStart=this.pos);break;case 47:switch(this.input.charCodeAt(this.pos+1)){case 42:this.skipBlockComment();break;case 47:this.skipLineComment(2);break;default:break e}break;default:if(e>8&&e<14||e>=5760&&SIe.test(String.fromCharCode(e)))++this.pos;else break e}}};qn.finishToken=function(e,t){this.end=this.pos,this.options.locations&&(this.endLoc=this.curPosition());var n=this.type;this.type=e,this.value=t,this.updateContext(n)};qn.readToken_dot=function(){var e=this.input.charCodeAt(this.pos+1);if(e>=48&&e<=57)return this.readNumber(!0);var t=this.input.charCodeAt(this.pos+2);return this.options.ecmaVersion>=6&&e===46&&t===46?(this.pos+=3,this.finishToken(K.ellipsis)):(++this.pos,this.finishToken(K.dot))};qn.readToken_slash=function(){var e=this.input.charCodeAt(this.pos+1);return this.exprAllowed?(++this.pos,this.readRegexp()):e===61?this.finishOp(K.assign,2):this.finishOp(K.slash,1)};qn.readToken_mult_modulo_exp=function(e){var t=this.input.charCodeAt(this.pos+1),n=1,r=e===42?K.star:K.modulo;return this.options.ecmaVersion>=7&&e===42&&t===42&&(++n,r=K.starstar,t=this.input.charCodeAt(this.pos+2)),t===61?this.finishOp(K.assign,n+1):this.finishOp(r,n)};qn.readToken_pipe_amp=function(e){var t=this.input.charCodeAt(this.pos+1);if(t===e){if(this.options.ecmaVersion>=12){var n=this.input.charCodeAt(this.pos+2);if(n===61)return this.finishOp(K.assign,3)}return this.finishOp(e===124?K.logicalOR:K.logicalAND,2)}return t===61?this.finishOp(K.assign,2):this.finishOp(e===124?K.bitwiseOR:K.bitwiseAND,1)};qn.readToken_caret=function(){var e=this.input.charCodeAt(this.pos+1);return e===61?this.finishOp(K.assign,2):this.finishOp(K.bitwiseXOR,1)};qn.readToken_plus_min=function(e){var t=this.input.charCodeAt(this.pos+1);return t===e?t===45&&!this.inModule&&this.input.charCodeAt(this.pos+2)===62&&(this.lastTokEnd===0||Kc.test(this.input.slice(this.lastTokEnd,this.pos)))?(this.skipLineComment(3),this.skipSpace(),this.nextToken()):this.finishOp(K.incDec,2):t===61?this.finishOp(K.assign,2):this.finishOp(K.plusMin,1)};qn.readToken_lt_gt=function(e){var t=this.input.charCodeAt(this.pos+1),n=1;return t===e?(n=e===62&&this.input.charCodeAt(this.pos+2)===62?3:2,this.input.charCodeAt(this.pos+n)===61?this.finishOp(K.assign,n+1):this.finishOp(K.bitShift,n)):t===33&&e===60&&!this.inModule&&this.input.charCodeAt(this.pos+2)===45&&this.input.charCodeAt(this.pos+3)===45?(this.skipLineComment(4),this.skipSpace(),this.nextToken()):(t===61&&(n=2),this.finishOp(K.relational,n))};qn.readToken_eq_excl=function(e){var t=this.input.charCodeAt(this.pos+1);return t===61?this.finishOp(K.equality,this.input.charCodeAt(this.pos+2)===61?3:2):e===61&&t===62&&this.options.ecmaVersion>=6?(this.pos+=2,this.finishToken(K.arrow)):this.finishOp(e===61?K.eq:K.prefix,1)};qn.readToken_question=function(){var e=this.options.ecmaVersion;if(e>=11){var t=this.input.charCodeAt(this.pos+1);if(t===46){var n=this.input.charCodeAt(this.pos+2);if(n<48||n>57)return this.finishOp(K.questionDot,2)}if(t===63){if(e>=12){var r=this.input.charCodeAt(this.pos+2);if(r===61)return this.finishOp(K.assign,3)}return this.finishOp(K.coalesce,2)}}return this.finishOp(K.question,1)};qn.readToken_numberSign=function(){var e=this.options.ecmaVersion,t=35;if(e>=13&&(++this.pos,t=this.fullCharCodeAtPos(),Dm(t,!0)||t===92))return this.finishToken(K.privateId,this.readWord1());this.raise(this.pos,"Unexpected character '"+ny(t)+"'")};qn.getTokenFromCode=function(e){switch(e){case 46:return this.readToken_dot();case 40:return++this.pos,this.finishToken(K.parenL);case 41:return++this.pos,this.finishToken(K.parenR);case 59:return++this.pos,this.finishToken(K.semi);case 44:return++this.pos,this.finishToken(K.comma);case 91:return++this.pos,this.finishToken(K.bracketL);case 93:return++this.pos,this.finishToken(K.bracketR);case 123:return++this.pos,this.finishToken(K.braceL);case 125:return++this.pos,this.finishToken(K.braceR);case 58:return++this.pos,this.finishToken(K.colon);case 96:if(this.options.ecmaVersion<6)break;return++this.pos,this.finishToken(K.backQuote);case 48:var t=this.input.charCodeAt(this.pos+1);if(t===120||t===88)return this.readRadixNumber(16);if(this.options.ecmaVersion>=6){if(t===111||t===79)return this.readRadixNumber(8);if(t===98||t===66)return this.readRadixNumber(2)}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.readNumber(!1);case 34:case 39:return this.readString(e);case 47:return this.readToken_slash();case 37:case 42:return this.readToken_mult_modulo_exp(e);case 124:case 38:return this.readToken_pipe_amp(e);case 94:return this.readToken_caret();case 43:case 45:return this.readToken_plus_min(e);case 60:case 62:return this.readToken_lt_gt(e);case 61:case 33:return this.readToken_eq_excl(e);case 63:return this.readToken_question();case 126:return this.finishOp(K.prefix,1);case 35:return this.readToken_numberSign()}this.raise(this.pos,"Unexpected character '"+ny(e)+"'")};qn.finishOp=function(e,t){var n=this.input.slice(this.pos,this.pos+t);return this.pos+=t,this.finishToken(e,n)};qn.readRegexp=function(){for(var e,t,n=this.pos;;){this.pos>=this.input.length&&this.raise(n,"Unterminated regular expression");var r=this.input.charAt(this.pos);if(Kc.test(r)&&this.raise(n,"Unterminated regular expression"),e)e=!1;else{if(r==="[")t=!0;else if(r==="]"&&t)t=!1;else if(r==="/"&&!t)break;e=r==="\\"}++this.pos}var i=this.input.slice(n,this.pos);++this.pos;var s=this.pos,o=this.readWord1();this.containsEsc&&this.unexpected(s);var a=this.regexpState||(this.regexpState=new ep(this));a.reset(n,i,o),this.validateRegExpFlags(a),this.validateRegExpPattern(a);var u=null;try{u=new RegExp(i,o)}catch{}return this.finishToken(K.regexp,{pattern:i,flags:o,value:u})};qn.readInt=function(e,t,n){for(var r=this.options.ecmaVersion>=12&&t===void 0,i=n&&this.input.charCodeAt(this.pos)===48,s=this.pos,o=0,a=0,u=0,l=t??1/0;u<l;++u,++this.pos){var c=this.input.charCodeAt(this.pos),f=void 0;if(r&&c===95){i&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed in legacy octal numeric literals"),a===95&&this.raiseRecoverable(this.pos,"Numeric separator must be exactly one underscore"),u===0&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed at the first of digits"),a=c;continue}if(c>=97?f=c-97+10:c>=65?f=c-65+10:c>=48&&c<=57?f=c-48:f=1/0,f>=e)break;a=c,o=o*e+f}return r&&a===95&&this.raiseRecoverable(this.pos-1,"Numeric separator is not allowed at the last of digits"),this.pos===s||t!=null&&this.pos-s!==t?null:o};function uwt(e,t){return t?parseInt(e,8):parseFloat(e.replace(/_/g,""))}function tke(e){return typeof BigInt!="function"?null:BigInt(e.replace(/_/g,""))}qn.readRadixNumber=function(e){var t=this.pos;this.pos+=2;var n=this.readInt(e);return n==null&&this.raise(this.start+2,"Expected number in radix "+e),this.options.ecmaVersion>=11&&this.input.charCodeAt(this.pos)===110?(n=tke(this.input.slice(t,this.pos)),++this.pos):Dm(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(K.num,n)};qn.readNumber=function(e){var t=this.pos;!e&&this.readInt(10,void 0,!0)===null&&this.raise(t,"Invalid number");var n=this.pos-t>=2&&this.input.charCodeAt(t)===48;n&&this.strict&&this.raise(t,"Invalid number");var r=this.input.charCodeAt(this.pos);if(!n&&!e&&this.options.ecmaVersion>=11&&r===110){var i=tke(this.input.slice(t,this.pos));return++this.pos,Dm(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(K.num,i)}n&&/[89]/.test(this.input.slice(t,this.pos))&&(n=!1),r===46&&!n&&(++this.pos,this.readInt(10),r=this.input.charCodeAt(this.pos)),(r===69||r===101)&&!n&&(r=this.input.charCodeAt(++this.pos),(r===43||r===45)&&++this.pos,this.readInt(10)===null&&this.raise(t,"Invalid number")),Dm(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");var s=uwt(this.input.slice(t,this.pos),n);return this.finishToken(K.num,s)};qn.readCodePoint=function(){var e=this.input.charCodeAt(this.pos),t;if(e===123){this.options.ecmaVersion<6&&this.unexpected();var n=++this.pos;t=this.readHexChar(this.input.indexOf("}",this.pos)-this.pos),++this.pos,t>1114111&&this.invalidStringToken(n,"Code point out of bounds")}else t=this.readHexChar(4);return t};qn.readString=function(e){for(var t="",n=++this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated string constant");var r=this.input.charCodeAt(this.pos);if(r===e)break;r===92?(t+=this.input.slice(n,this.pos),t+=this.readEscapedChar(!1),n=this.pos):r===8232||r===8233?(this.options.ecmaVersion<10&&this.raise(this.start,"Unterminated string constant"),++this.pos,this.options.locations&&(this.curLine++,this.lineStart=this.pos)):(TS(r)&&this.raise(this.start,"Unterminated string constant"),++this.pos)}return t+=this.input.slice(n,this.pos++),this.finishToken(K.string,t)};var nke={};qn.tryReadTemplateToken=function(){this.inTemplateElement=!0;try{this.readTmplToken()}catch(e){if(e===nke)this.readInvalidTemplateToken();else throw e}this.inTemplateElement=!1};qn.invalidStringToken=function(e,t){if(this.inTemplateElement&&this.options.ecmaVersion>=9)throw nke;this.raise(e,t)};qn.readTmplToken=function(){for(var e="",t=this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated template");var n=this.input.charCodeAt(this.pos);if(n===96||n===36&&this.input.charCodeAt(this.pos+1)===123)return this.pos===this.start&&(this.type===K.template||this.type===K.invalidTemplate)?n===36?(this.pos+=2,this.finishToken(K.dollarBraceL)):(++this.pos,this.finishToken(K.backQuote)):(e+=this.input.slice(t,this.pos),this.finishToken(K.template,e));if(n===92)e+=this.input.slice(t,this.pos),e+=this.readEscapedChar(!0),t=this.pos;else if(TS(n)){switch(e+=this.input.slice(t,this.pos),++this.pos,n){case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:e+=`
`;break;default:e+=String.fromCharCode(n);break}this.options.locations&&(++this.curLine,this.lineStart=this.pos),t=this.pos}else++this.pos}};qn.readInvalidTemplateToken=function(){for(;this.pos<this.input.length;this.pos++)switch(this.input[this.pos]){case"\\":++this.pos;break;case"$":if(this.input[this.pos+1]!=="{")break;case"`":return this.finishToken(K.invalidTemplate,this.input.slice(this.start,this.pos))}this.raise(this.start,"Unterminated template")};qn.readEscapedChar=function(e){var t=this.input.charCodeAt(++this.pos);switch(++this.pos,t){case 110:return`
`;case 114:return"\r";case 120:return String.fromCharCode(this.readHexChar(2));case 117:return ny(this.readCodePoint());case 116:return"	";case 98:return"\b";case 118:return"\v";case 102:return"\f";case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:return this.options.locations&&(this.lineStart=this.pos,++this.curLine),"";case 56:case 57:if(this.strict&&this.invalidStringToken(this.pos-1,"Invalid escape sequence"),e){var n=this.pos-1;this.invalidStringToken(n,"Invalid escape sequence in template string")}default:if(t>=48&&t<=55){var r=this.input.substr(this.pos-1,3).match(/^[0-7]+/)[0],i=parseInt(r,8);return i>255&&(r=r.slice(0,-1),i=parseInt(r,8)),this.pos+=r.length-1,t=this.input.charCodeAt(this.pos),(r!=="0"||t===56||t===57)&&(this.strict||e)&&this.invalidStringToken(this.pos-1-r.length,e?"Octal literal in template string":"Octal literal in strict mode"),String.fromCharCode(i)}return TS(t)?"":String.fromCharCode(t)}};qn.readHexChar=function(e){var t=this.pos,n=this.readInt(16,e);return n===null&&this.invalidStringToken(t,"Bad character escape sequence"),n};qn.readWord1=function(){this.containsEsc=!1;for(var e="",t=!0,n=this.pos,r=this.options.ecmaVersion>=6;this.pos<this.input.length;){var i=this.fullCharCodeAtPos();if(ux(i,r))this.pos+=i<=65535?1:2;else if(i===92){this.containsEsc=!0,e+=this.input.slice(n,this.pos);var s=this.pos;this.input.charCodeAt(++this.pos)!==117&&this.invalidStringToken(this.pos,"Expecting Unicode escape sequence \\uXXXX"),++this.pos;var o=this.readCodePoint();(t?Dm:ux)(o,r)||this.invalidStringToken(s,"Invalid Unicode escape"),e+=ny(o),n=this.pos}else break;t=!1}return e+this.input.slice(n,this.pos)};qn.readWord=function(){var e=this.readWord1(),t=K.name;return this.keywords.test(e)&&(t=sQ[e]),this.finishToken(t,e)};var lwt="8.11.3";Bs.acorn={Parser:Bs,version:lwt,defaultOptions:zz,Position:sI,SourceLocation:o4,getLineInfo:CIe,Node:u4,TokenType:or,tokTypes:K,keywordTypes:sQ,TokContext:of,tokContexts:Ti,isIdentifierChar:ux,isIdentifierStart:Dm,Token:dQ,isNewLine:TS,lineBreak:Kc,lineBreakG:O_t,nonASCIIwhitespace:SIe};function cwt(e,t){return Bs.parse(e,t)}const hQ={undefined:"void(0)",Infinity:"Number.POSITIVE_INFINITY",NaN:"Number.NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2"},fwt={ecmaVersion:11},gfe="$",dwt="d",hwt="d1",pwt="d2",So=e=>(t,n)=>n.error(t,e+" not allowed"),mwt=So("Aggregate function"),gwt=So("Window function"),ywt="Invalid argument",pQ="Invalid column reference",vwt=pQ+" (must be input to an aggregate function)",rke="Invalid function call",bwt="Invalid member expression",_wt="Invalid operator parameter",wwt="Invalid param reference",Ewt="Invalid variable reference",xwt="Variable not accessible in operator call",Swt="Unsupported variable declaration",Twt="Unsupported destructuring pattern",ike="Table expressions do not support closures",ske="Use aq.escape(fn) to use a function as-is (including closures)",Cwt="use table.params({ name: value }) to define dynamic parameters",Awt="use aq.addFunction(name, fn) to add new op functions",Iwt=`
Note: ${ike}. ${ske}, or ${Cwt}.`,oke=`
Note: ${ike}. ${ske}, or ${Awt}.`,kwt=`The ${oCe} method is not valid in multi-table expressions.`;function Rwt(e,t){const n=Nwt(t);let r=e.root=n;return e.spec=t,e.tuple=null,e.tuple1=null,e.tuple2=null,e.$param=null,e.$op=0,e.scope=new Set,e.paramsRef=new Map,e.columnRef=new Map,S_t(r)?(Pwt(r,e),r=r.body):e.join?(e.scope.add(e.tuple1=hwt),e.scope.add(e.tuple2=pwt),e.scope.add(e.$param=gfe)):(e.scope.add(e.tuple=dwt),e.scope.add(e.$param=gfe)),er(r,e,mQ),e.root}function Nwt(e){try{const t=e.field?Dwt(e):dr(e)?Ih(e):e;return cwt(`expr=(${t})`,fwt).body[0].expression.right}catch{xn(`Expression parse error: ${e+""}`)}}function Dwt(e){const t=JSON.stringify(e+"");return e.table?`(a,b)=>b[${t}]`:`d=>d[${t}]`}const mQ={FunctionDeclaration:So("Function definitions"),ForStatement:So("For loops"),ForOfStatement:So("For-of loops"),ForInStatement:So("For-in loops"),WhileStatement:So("While loops"),DoWhileStatement:So("Do-while loops"),AwaitExpression:So("Await expressions"),ArrowFunctionExpression:So("Function definitions"),AssignmentExpression:So("Assignments"),FunctionExpression:So("Function definitions"),NewExpression:So('Use of "new"'),UpdateExpression:So("Update expressions"),VariableDeclarator(e,t){Wz(e.id,t)},Identifier(e,t,n){lke(e,t,n)&&!t.scope.has(e.name)&&t.error(e,Ewt,Iwt)},CallExpression(e,t){const n=ake(e.callee),r=rCe(n)||iCe(n);if(r){if((t.join||t.aggregate===!1)&&iX(n)&&mwt(e,t),(t.join||t.window===!1)&&sX(n)&&gwt(e,t),t.$op=1,t.ast)qz(e,n,t),e.arguments.forEach(i=>er(i,t,Hz));else{const i=t.op(Owt(t,r,n,e.arguments));Object.assign(e,{type:J2e,name:i.id})}return t.$op=0,!1}else nCe(n)?qz(e,n,t):t.error(e,rke,oke)},MemberExpression(e,t,n){const{object:r,property:i}=e;if(!Ds(S0,r))return;const{name:s}=r;if(uke(e)&&Ds(S0,i)&&Kf(hQ,i.name)){dke(e,i.name);return}const o=s===t.tuple?0:s===t.tuple1?1:s===t.tuple2?2:-1;if(o>=0)return yfe(e,o,t,cke,n);if(s===t.$param)return yfe(e,o,t,Mwt);t.paramsRef.has(s)?aI(e,t.paramsRef.get(s)):t.columnRef.has(s)?fke(r,s,t,e):Kf(t.params,s)&&aI(r,s)}};function yfe(e,t,n,r,i){const{property:s,computed:o}=e;let a;if(!o)a=s.name;else if(Ds(_S,s))a=s.value;else try{er(s,n,mQ,e),a=n.param(s)}catch{n.error(e,bwt)}return r(e,a,t,n,i),!1}const Hz={...mQ,VariableDeclarator:So("Variable declaration in operator call"),Identifier(e,t,n){lke(e,t,n)&&t.error(e,xwt)},CallExpression(e,t){const n=ake(e.callee);nCe(n)?qz(e,n,t):t.error(e,rke,oke)}};function Pwt(e,t){e.generator&&So("Generator functions")(e,t),e.async&&So("Async functions")(e,t);const{params:n}=e,r=n.length,i=o=>(a,u)=>t.columnRef.set(a,[u,o]),s=(o,a)=>t.paramsRef.set(o,a);r&&(t.join?(FT(t,n[0],"tuple1",i(1)),r>1&&FT(t,n[1],"tuple2",i(2)),r>2&&FT(t,n[2],"$param",s)):(FT(t,n[0],"tuple",i(0)),r>1&&FT(t,n[1],"$param",s))),t.root=e.body}function FT(e,t,n,r){Ds(S0,t)?(e.scope.add(t.name),e[n]=t.name):Ds(X2e,t)&&t.properties.forEach(i=>{const s=Ds(S0,i.key)?i.key.name:Ds(_S,i.key)?i.key.value:e.error(i,ywt);Ds(S0,i.value)||e.error(i.value,Twt),r(i.value.name,s)})}function Owt(e,t,n,r){const i=[],s=[],o=t.param[0]||0,a=o+(t.param[1]||0);return r.forEach((u,l)=>{l<o?(er(u,e,Hz),i.push(e.field(u))):l<a?(er(u,e,Hz),s.push(e.param(u))):e.error(u,_wt)}),{name:n,fields:i,params:s,...e.spec.window||{}}}function ake(e){return Ds(S0,e)?e.name:Ds(K2e,e)?uke(e)?$wt(e.property.name):e.property.name:null}function uke(e){return Ds(S0,e.object)&&e.object.name==="Math"}function $wt(e){return e==="max"?"greatest":e==="min"?"least":e}function lke(e,t,n){const{name:r}=e;if(!(Ds(K2e,n)&&n.property===e)){if(!(Ds(Q2e,n)&&n.key===e))if(t.paramsRef.has(r))aI(e,t.paramsRef.get(r));else if(t.columnRef.has(r))fke(e,r,t,n);else if(Kf(t.params,r))aI(e,r);else if(Kf(hQ,r))dke(e,r);else return!0}}function cke(e,t,n,r,i){const s=n===0?r.table:n>0?r.join[n-1]:null,o=s&&s.column(t);s&&!o&&r.error(e,pQ),r.aggronly&&!r.$op&&r.error(e,vwt),sCe(e,t,n,o,i)}function fke(e,t,n,r){const[i,s]=n.columnRef.get(t);cke(e,i,s,n,r)}function Mwt(e,t,n,r){r.params&&!Kf(r.params,t)&&r.error(e,wwt),aI(e,t)}function aI(e,t){e.type=Tyt,e.name=t}function dke(e,t){e.type=Eyt,e.name=t,e.raw=hQ[t]}function qz(e,t,n){if(t===oCe){const r=n.table;r||n.error(e,kwt),aCe(e,e.arguments.length?e.arguments.map(i=>{const s=n.param(i),o=tu(s)?r.columnName(s):s;return r.column(o)||n.error(i,pQ),o}):r.columnNames())}else e.callee={type:Syt,name:t}}function Wz(e,t){Ds(S0,e)?t.scope.add(e.name):Ds(vyt,e)?e.elements.forEach(n=>Wz(n,t)):Ds(X2e,e)?e.properties.forEach(n=>Wz(n.value,t)):t.error(e.id,Swt)}const Lwt={[Dk]:1,[J2e]:1};function tl(e,t={}){const n=t.generate||e$,r=t.compiler||oX,i=jwt(t),s={},o={},a=[],u=[];let l=0,c=-1;const f=t.join?r.join:t.index==1?r.expr2:r.expr,d={op(m){const g=Fwt(m);return o[g]||(m.id=++c,o[g]=m)},field(m){const g=n(m);return s[g]||(s[g]=++l)},param(m){return Ds(_S,m)?m.value:r.param(n(m),i)},value(m,g){a.push(m);const y=g.escape||(t.ast?x_t(g):f(n(g),i));u.push(y),Lwt[g.type]&&y!==g&&wa(y)&&(y.field=g.name)},error(m,g,y=""){const v=m.start-6,b=m.end-6,w=String(d.spec).slice(v,b);xn(`${g}: "${w}"${y}`)}};Object.assign(d,t,{params:i});for(const[m,g]of W6(e))d.value(m+"",g.escape?A_t(d,g,i):Rwt(d,g));if(t.ast)return{names:a,exprs:u};const h=[];for(const m in s)h[s[m]]=r.expr(m,i);const p=Object.values(o);return p.forEach(m=>m.fields=m.fields.map(g=>h[g])),{names:a,exprs:u,ops:p}}function Fwt(e){let t=`${e.name}(${e.fields.concat(e.params).join(",")})`;if(e.frame){const n=e.frame.map(r=>Number.isFinite(r)?Math.abs(r):-1);t+=`[${n},${!!e.peers}]`}return t}function jwt(e){return(e.table?s9(e.table):e.join?{...s9(e.join[1]),...s9(e.join[0])}:{})||{}}function s9(e){return e&&gi(e.params)?e.params():{}}const hke="Expr",af="ExprList",pke="ExprNumber",$2="ExprObject",Rw="JoinKeys",x$="JoinValues",cc="Options",gQ="OrderKeys",Tg="SelectionList",Hv="TableRef",Nw="TableRefList",Bwt="Descending",Uwt="Query",zwt="Selection",Vwt="Verb",Hwt="Window";function c4(e,t){return e&&e.expr?new vfe({...e,...t}):new vfe(t,e)}class vfe{constructor(t,n){this.expr=n,Object.assign(this,t)}toString(){return String(this.expr)}toObject(){return{...this,expr:this.toString(),...gi(this.expr)?{func:!0}:{}}}}function qwt(e){return c4(e,{desc:!0})}function J1(e,t,n=0){const r=n?{field:!0,table:n}:{field:!0};return c4(e,t?{expr:t,...r}:r)}function Wwt(e,t,n){return c4(e,{window:{frame:t||[-1/0,0],peers:!!n}})}function Gwt(e){const t=n=>n;return t.toString=()=>e,t}function bfe(e,t){return t=t&&gi(t.query)?t.query():t,t&&gi(t.evaluate)?t.evaluate(null,e):e(t)}function mke(e){return wa(e)&&(dr(e.all)||dr(e.matches)||dr(e.not)||dr(e.range))}function uI(e){return e&&gi(e.toObject)?e.toObject():gi(e)?{expr:String(e),func:!0}:dr(e)?e.map(uI):wa(e)?i4(e,t=>uI(t)):e}function yQ(e){return dr(e)?e.map(yQ):wa(e)?dr(e.verbs)?bQ.from(e):dr(e.all)?ax():dr(e.range)?v_t(...e.range):dr(e.match)?b_t(RegExp(...e.match)):dr(e.not)?bIe(e.not.map(uI)):Ywt(e):e}function Ywt(e){let t=e,n=e.expr;if(n!=null){if(e.field===!0?t=n=J1(n):e.func===!0&&(t=n=Gwt(n)),wa(e.window)){const{frame:r,peers:i}=e.window;t=n=Wwt(n,r,i)}e.desc===!0&&(t=qwt(n))}return e===t?i4(e,r=>yQ(r)):t}function Kwt(e){return dr(e)?e.map(Xwt):e}function Xwt(e){const t=[];return Ju(e).forEach(n=>{tu(n)?t.push(n):Bo(n)?t.push(J1(n,null)):wa(n)&&n.expr||gi(n)?t.push(n):xn(`Invalid key value: ${n+""}`)}),t}function Qwt(e){return dr(e)?e.map(Jwt):e}function Jwt(e,t){return t<2?Ju(e):e}function Zwt(e){const t=[];return e.forEach(n=>{const r=n.expr!=null?n.expr:n;if(wa(r)&&!gi(r))for(const i in r)t.push(r[i]);else n=tu(r)?r:Bo(r)?J1(n):gi(r)?n:xn(`Invalid orderby field: ${n+""}`),t.push(n)}),t}const eEt={[hke]:bke,[af]:lx,[pke]:oEt,[$2]:ry,[Rw]:aEt,[x$]:uEt,[gQ]:lx,[Tg]:iEt};function tEt(e,t,n){return t===Hv?_fe(e):t===Nw?e.map(_fe):gke(uI(e),t,n)}function gke(e,t,n){return t===cc?e&&nEt(e,n):eEt[t](e)}function nEt(e,t={}){const n={};for(const r in e){const i=e[r];n[r]=t[r]?gke(i,t[r]):i}return n}function rEt(e,t){return tl({expr:e},{...t,ast:!0}).exprs[0]}function vQ(e){return{type:Dk,name:e}}function yke(e){return{type:Dk,index:e}}function ry(e,t){if(Bo(e))return rEt(e,t);if(e.expr){let n;if(e.field===!0?n=vQ(e.expr):e.func===!0&&(n=ry(e.expr,t)),n)return e.desc&&(n={type:Bwt,expr:n}),e.window&&(n={type:Hwt,expr:n,...e.window}),n}return Object.keys(e).map(n=>({...ry(e[n],t),as:n}))}function vke(e){const t=zwt;return e.all?{type:t,operator:"all"}:e.not?{type:t,operator:"not",arguments:lx(e.not)}:e.range?{type:t,operator:"range",arguments:lx(e.range)}:e.matches?{type:t,operator:"matches",arguments:e.matches}:xn("Invalid input")}function iEt(e){return Ju(e).map(sEt).flat()}function sEt(e){return mke(e)?vke(e):tu(e)?yke(e):Bo(e)?vQ(e):wa(e)?Object.keys(e).map(t=>({type:Dk,name:t,as:e[t]})):xn("Invalid input")}function bke(e){return mke(e)?vke(e):tu(e)?yke(e):Bo(e)?vQ(e):wa(e)?ry(e):xn("Invalid input")}function lx(e){return Ju(e).map(bke).flat()}function oEt(e){return tu(e)?e:ry(e)}function aEt(e){return dr(e)?e.map(lx):ry(e,{join:!0})}function uEt(e){return dr(e)?e.map((t,n)=>n<2?lx(t):ry(t,{join:!0})):ry(e,{join:!0})}function _fe(e){return e&&gi(e.toAST)?e.toAST():e}class _ke{constructor(t,n=[],r=[]){this.verb=t,this.schema=n,n.forEach((i,s)=>{const o=i.type,a=r[s],u=o===Rw?Kwt(a):o===x$?Qwt(a):o===gQ?Zwt(a):a;this[i.name]=u!==void 0?u:i.default})}static from(t){const n=Gz[t.verb],r=(n.schema||[]).map(({name:i})=>yQ(t[i]));return n(...r)}evaluate(t,n){const r=this.schema.map(({name:i,type:s})=>{const o=this[i];return s===Hv?bfe(n,o):s===Nw?o.map(a=>bfe(n,a)):o});return t[this.verb](...r)}toObject(){const t={verb:this.verb};return this.schema.forEach(({name:n})=>{t[n]=uI(this[n])}),t}toAST(){const t={type:Vwt,verb:this.verb};return this.schema.forEach(({name:n,type:r,props:i})=>{t[n]=tEt(this[n],r,i)}),t}}function Lr(e,t){return Object.assign((...n)=>new _ke(e,t,n),{schema:t})}const Gz={count:Lr("count",[{name:"options",type:cc}]),derive:Lr("derive",[{name:"values",type:$2},{name:"options",type:cc,props:{before:Tg,after:Tg}}]),filter:Lr("filter",[{name:"criteria",type:$2}]),groupby:Lr("groupby",[{name:"keys",type:af}]),orderby:Lr("orderby",[{name:"keys",type:gQ}]),relocate:Lr("relocate",[{name:"columns",type:Tg},{name:"options",type:cc,props:{before:Tg,after:Tg}}]),rename:Lr("rename",[{name:"columns",type:Tg}]),rollup:Lr("rollup",[{name:"values",type:$2}]),sample:Lr("sample",[{name:"size",type:pke},{name:"options",type:cc,props:{weight:hke}}]),select:Lr("select",[{name:"columns",type:Tg}]),ungroup:Lr("ungroup"),unorder:Lr("unorder"),reify:Lr("reify"),dedupe:Lr("dedupe",[{name:"keys",type:af,default:[]}]),impute:Lr("impute",[{name:"values",type:$2},{name:"options",type:cc,props:{expand:af}}]),fold:Lr("fold",[{name:"values",type:af},{name:"options",type:cc}]),pivot:Lr("pivot",[{name:"keys",type:af},{name:"values",type:af},{name:"options",type:cc}]),spread:Lr("spread",[{name:"values",type:af},{name:"options",type:cc}]),unroll:Lr("unroll",[{name:"values",type:af},{name:"options",type:cc,props:{drop:af}}]),lookup:Lr("lookup",[{name:"table",type:Hv},{name:"on",type:Rw},{name:"values",type:af}]),join:Lr("join",[{name:"table",type:Hv},{name:"on",type:Rw},{name:"values",type:x$},{name:"options",type:cc}]),cross:Lr("cross",[{name:"table",type:Hv},{name:"values",type:x$},{name:"options",type:cc}]),semijoin:Lr("semijoin",[{name:"table",type:Hv},{name:"on",type:Rw}]),antijoin:Lr("antijoin",[{name:"table",type:Hv},{name:"on",type:Rw}]),concat:Lr("concat",[{name:"tables",type:Nw}]),union:Lr("union",[{name:"tables",type:Nw}]),intersect:Lr("intersect",[{name:"tables",type:Nw}]),except:Lr("except",[{name:"tables",type:Nw}])};let bQ=class wke extends M2e{constructor(t,n,r){super(n),this._verbs=t||[],this._table=r}static from({verbs:t,table:n,params:r}){return new wke(t.map(_ke.from),r,n)}get[Symbol.toStringTag](){return this._verbs?`Query: ${this._verbs.length} verbs`+(this._table?` on '${this._table}'`:""):"Object"}get length(){return this._verbs.length}get tableName(){return this._table}params(t){return arguments.length?(this._params={...this._params,...t},this):this._params}evaluate(t,n){t=t||n(this._table);for(const r of this._verbs)t=r.evaluate(t.params(this._params),n);return t}toObject(){return wfe(this,"toObject")}toJSON(){return this.toObject()}toAST(){return wfe(this,"toAST",{type:Uwt})}};function wfe(e,t,n){return{...n,verbs:e._verbs.map(r=>r[t]()),...e._params?{params:e._params}:null,...e._table?{table:e._table}:null}}function lEt(e,t){return new bQ(e._verbs.concat(t),e._params,e._table)}for(const e in Gz){const t=Gz[e];bQ.prototype["__"+e]=function(n,...r){return lEt(n,t(...r))}}function IS(e,t,...n){const r=["_","$"],i=r.slice(0,n.length);return i.push('"use strict"; const '+n.map((s,o)=>s.map((a,u)=>`${r[o]}${u} = ${r[o]}[${u}]`).join(", ")).join(", ")+`; return (${e}) => ${t};`),Function(...i)(...n)}function cEt(e,t=[]){return e.groupby(t.length?t:e.columnNames()).filter("row_number() === 1").ungroup().reify()}function _Q(e,t){const n=Zl();return t.forEach((r,i)=>{const s=Bo(r)?r:i;if(s){const o=e.column(i)||xn(`Unrecognized column: ${i}`);n.add(s,o)}}),e.create(n)}function Eke(e,t,{before:n,after:r}={}){const i=n!=null,s=r!=null;i||s||xn("relocate requires a before or after option."),i&&s&&xn("relocate accepts only one of the before or after options."),t=Nm(e,t);const o=[...Nm(e,i?n:r).keys()],a=i?o[0]:o.pop(),u=new Map;return e.columnNames().forEach(l=>{const c=!t.has(l);if(l===a){s&&c&&u.set(l,l);for(const[f,d]of t)u.set(f,d);if(s)return}c&&u.set(l,l)}),_Q(e,u)}function Uk(e,t=r=>r,n=""){const r=e.length;if(!r)return"";let i=t(e[0],0);for(let s=1;s<r;++s)i+=n+t(e[s],s);return i}function wQ(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function fEt(e,t=0,n=e.length){let r=n?e[t++]:ar;for(let i=t;i<n;++i)r>e[i]&&(r=e[i]);return r}function dEt(e,t=0,n=e.length){let r=n?e[t++]:ar;for(let i=t;i<n;++i)r<e[i]&&(r=e[i]);return r}function iD(e){return JA(e)?e:+e}function hEt(e,t){const n=e.length;if(!n)return ar;if((t=+t)<=0||n<2)return iD(e[0]);if(t>=1)return iD(e[n-1]);const r=(n-1)*t,i=Math.floor(r),s=iD(e[i]);return JA(s)?s:s+(iD(e[i+1])-s)*(r-i)}class pEt{constructor(t){this._values=t||[],this._sorted=null,this._start=0}values(t){return this._start&&(this._values=this._values.slice(this._start),this._start=0),t?this._values.slice():this._values}add(t){this._values.push(t),this._sorted=null}rem(){this._start+=1,this._sorted=null}min(){return this._sorted&&this._sorted.length?this._sorted[0]:fEt(this._values,this._start)}max(){return this._sorted&&this._sorted.length?this._sorted[this._sorted.length-1]:dEt(this._values,this._start)}quantile(t){return this._sorted||(this._sorted=this.values(!0),this._sorted.sort(wQ)),hEt(this._sorted,t)}}const S$=(e,t,n)=>IS(t,"{"+Uk(e,(r,i)=>`_${i}.${n}(${t});`)+"}",e);function mEt(e,t){const{ops:n,output:r}=gEt(e,t),i=e[0].fields,s=i.length,o=s===0?EQ:s===1?yEt:s===2?vEt:xn("Unsupported field count: "+s);return new o(i,n,r,t)}function gEt(e,t){const n={},r=[];function i(o,a=[]){const u=o+":"+a;if(n[u])return n[u];const l=rCe(o),c=l.create(...a);return t<0&&l.stream&&l.stream.forEach(f=>i(f,[])),l.req&&l.req.forEach(f=>i(f,[])),n[u]=c,r.push(c),c}const s=e.map(o=>{const a=i(o.name,o.params);return a.output=o.id,a});return{ops:r,output:s}}class EQ extends w_t{constructor(t,n,r,i){super(r),this._op=n,this._fields=t,this._stream=!!i}init(){const t={count:0,valid:0,stream:this._stream};return this._op.forEach(n=>n.init(t)),t.values&&(t.list=new pEt),t}write(t,n,r){const i=this._outputs,s=i.length;for(let o=0;o<s;++o)n[i[o].output][r]=i[o].value(t);return 1}_add(){}_rem(){}add(t){++t.count}rem(t){--t.count}}class yEt extends EQ{constructor(t,n,r,i){super(t,n,r,i);const s=["state","v1","v2"];this._add=S$(n,s,"add"),this._rem=S$(n,s,"rem")}add(t,n,r){const i=this._fields[0](n,r);++t.count,Df(i)&&(++t.valid,t.list&&t.list.add(i),this._add(t,i))}rem(t,n,r){const i=this._fields[0](n,r);--t.count,Df(i)&&(--t.valid,t.list&&t.list.rem(),this._rem(t,i))}}class vEt extends EQ{constructor(t,n,r,i){super(t,n,r,i);const s=["state","v1","v2"];this._add=S$(n,s,"add"),this._rem=S$(n,s,"rem")}add(t,n,r){const i=this._fields[0](n,r),s=this._fields[1](n,r);++t.count,Df(i)&&Df(s)&&(++t.valid,t.list&&t.list.add([i,s]),this._add(t,i,s))}rem(t,n,r){const i=this._fields[0](n,r),s=this._fields[1](n,r);--t.count,Df(i)&&Df(s)&&(--t.valid,t.list&&t.list.rem(),this._rem(t,i,s))}}function Qb(e,t,n){if(t.length){const r=e.data(),{keys:i}=e.groups()||{},s=kS(e,t),o=i?(a,u)=>s[a][i[u]]:a=>s[a][0];n=n.map(a=>u=>a(u,r,o))}return n}function kS(e,t,n){if(!t.length)return n;const r=xke(t),i=e.groups(),s=i?i.size:1;return n=n||H6(t.length,()=>Array(s)),s>1?r.forEach(o=>{const a=Tke(e,o,i);for(let u=0;u<s;++u)o.write(a[u],n,u)}):r.forEach(o=>{const a=Ske(e,o);o.write(a,n,0)}),n}function xke(e,t){const n=[],r={};for(const i of e){const s=i.fields.map(o=>o+"").join(",");(r[s]||(r[s]=[])).push(i)}for(const i in r)n.push(mEt(r[i],t));return n}function Ske(e,t){const n=t.init(),r=e.totalRows(),i=e.data(),s=e.mask();if(e.isOrdered()){const o=e.indices();for(let a=0;a<r;++a)t.add(n,o[a],i)}else if(s)for(let o=s.next(0);o>=0;o=s.next(o+1))t.add(n,o,i);else for(let o=0;o<r;++o)t.add(n,o,i);return n}function Tke(e,t,n){const{keys:r,size:i}=n,s=H6(i,()=>t.init()),o=e.data();if(e.isOrdered()){const a=e.indices(),u=a.length;for(let l=0;l<u;++l){const c=a[l];t.add(s[r[c]],c,o)}}else if(e.isFiltered()){const a=e.mask();for(let u=a.next(0);u>=0;u=a.next(u+1))t.add(s[r[u]],u,o)}else{const a=e.totalRows();for(let u=0;u<a;++u)t.add(s[r[u]],u,o)}return s}function Cke(e,t){const{get:n,names:r,rows:i,size:s}=t,o=r.length;for(let a=0;a<o;++a){const u=e.add(r[a],Array(s)),l=n[a];for(let c=0;c<s;++c)u[c]=l(i[c])}}function Ake(e){return{left(t,n,r,i){for(r==null&&(r=0),i==null&&(i=t.length);r<i;){const s=r+i>>>1;e(t[s],n)<0?r=s+1:i=s}return r},right(t,n,r,i){for(r==null&&(r=0),i==null&&(i=t.length);r<i;){const s=r+i>>>1;e(t[s],n)>0?i=s:r=s+1}return r}}}const Efe=Ake(wQ);function bEt(e,t,n,r,i){let s,o,a,u,l;const c=m=>o[m-1]===o[m],f=r.length,d=i.length,h=r.length?IS(["w","r","k"],"{"+Uk(r,(m,g)=>`r[_${g}.id][k]=_${g}.value(w,_${g}.get);`)+"}",r):()=>{},p={i0:0,i1:0,index:0,size:0,peer:c,init(m,g,y,v){p.index=p.i0=p.i1=0,p.size=g.length,s=m,o=g,u=y,l=v,a=i?i.map(b=>b.init()):null;for(let b=0;b<f;++b)r[b].init();return p},value(m,g){return g(s[m],e)},step(m){const[g,y]=t,v=p.size,b=p.i0,w=p.i1;p.i0=g!=null?Math.max(0,m-Math.abs(g)):0,p.i1=y!=null?Math.min(v,m+Math.abs(y)+1):v,p.index=m,n&&(p.i0>0&&c(p.i0)&&(p.i0=Efe.left(o,o[p.i0])),p.i1<v&&c(p.i1)&&(p.i1=Efe.right(o,o[p.i1-1])));for(let E=0;E<d;++E){const T=i[E],S=a[E];for(let C=b;C<p.i0;++C)T.rem(S,s[C],e);for(let C=w;C<p.i1;++C)T.add(S,s[C],e);T.write(S,u,l)}return h(p,u,l),u}};return p}const _Et=e=>(e.frame||[null,null]).map(t=>Number.isFinite(t)?Math.abs(t):null),wEt=e=>!!e.peers;function EEt(e){const{id:t,name:n,fields:r=[],params:i=[]}=e,s=iCe(n).create(...i);return r.length&&(s.get=r[0]),s.id=t,s}function xEt(e,t,n,r={},i){const s=e.data(),o=SEt(i,s),a=o.length,u=IS(["r","d","op"],"{"+Uk(t,(l,c)=>`_${c}[r] = $${c}(r, d, op);`)+"}",t,n);e.partitions().forEach((l,c)=>{const f=l.length,d=TEt(e,l);for(let p=0;p<a;++p)o[p].init(l,d,r,c);const h=p=>r[p][c];for(let p=0;p<f;++p){for(let m=0;m<a;++m)o[m].step(p);u(l[p],s,h)}})}function SEt(e,t){const n={};return e.forEach(r=>{const i=_Et(r),s=wEt(r),o=`${i},${s}`,{aggOps:a,winOps:u}=n[o]||(n[o]={frame:i,peers:s,aggOps:[],winOps:[]});iX(r.name)?a.push(r):u.push(EEt(r))}),Object.values(n).map(r=>bEt(t,r.frame,r.peers,r.winOps,xke(r.aggOps,r.frame[0]!=null?-1:1)))}function TEt(e,t){if(e.isOrdered()){const n=e.comparator(),r=e.data(),i=t.length,s=new Uint32Array(i);for(let o=1,a=0;o<i;++o)s[o]=n(t[o-1],t[o],r)?++a:a;return s}else return t}function CEt(e){return sX(e.name)||e.frame&&(Number.isFinite(e.frame[0])||Number.isFinite(e.frame[1]))}function xQ(e,{names:t,exprs:n,ops:r},i={}){const s=e.totalRows(),o=Zl(i.drop?null:e),a=t.map(d=>o.add(d,Array(s))),[u,l]=AEt(r),c=e.isGrouped()?e.groups().size:1,f=kS(e,u,H6(r.length,()=>Array(c)));return l.length?xEt(e,a,n,f,l):IEt(e,a,n,f),e.create(o)}function AEt(e){const t=[],n=[],r=e.length;for(let i=0;i<r;++i){const s=e[i];s.id=i,(CEt(s)?n:t).push(s)}return[t,n]}function IEt(e,t,n,r){const i=e.mask(),s=e.data(),{keys:o}=e.groups()||{},a=o?(l,c)=>r[l][o[c]]:l=>r[l][0],u=t.length;for(let l=0;l<u;++l){const c=n[l],f=t[l];if(i)for(let d=i.next(0);d>=0;d=i.next(d+1))f[d]=c(d,s,a);else{const d=e.totalRows();for(let h=0;h<d;++h)f[h]=c(h,s,a)}}}function kEt(e,t,n={}){const r=xQ(e,tl(t,{table:e}),n);return n.drop||n.before==null&&n.after==null?r:Eke(r,Object.keys(t).filter(i=>!e.column(i)),n)}function REt(e,t){if(t.length===0)return e;const n=e.columnNames();return t.reduce((r,i)=>r.antijoin(i.select(n)),e).dedupe()}const sD=2147483648,NEt=4294967295;class Ike{constructor(t){this._size=t,this._bits=new Uint32Array(Math.ceil(t/32))}get length(){return this._size}count(){const t=this._bits.length;let n=0;for(let r=0;r<t;++r)for(let i=this._bits[r];i;++n)i&=i-1;return n}get(t){return this._bits[t>>5]&sD>>>t}set(t){this._bits[t>>5]|=sD>>>t}clear(t){this._bits[t>>5]&=~(sD>>>t)}scan(t){for(let n=this.next(0);n>=0;n=this.next(n+1))t(n)}next(t){const n=this._bits,r=n.length;let i=t>>5,s=n[i]&NEt>>>t;for(;i<r;s=n[++i])if(s!==0)return(i<<5)+Math.clz32(s);return-1}nth(t){let n=this.next(0);for(;t--&&n>=0;)n=this.next(n+1);return n}not(){const t=this._bits,n=t.length;for(let i=0;i<n;++i)t[i]=~t[i];const r=this._size%32;return r&&(t[n-1]&=sD>>r-1),this}and(t){if(t){const n=this._bits,r=t._bits,i=n.length;for(let s=0;s<i;++s)n[s]&=r[s]}return this}or(t){if(t){const n=this._bits,r=t._bits,i=n.length;for(let s=0;s<i;++s)n[s]|=r[s]}return this}}function DEt(e,t){const n=e.totalRows(),r=e.mask(),i=e.data(),s=new Ike(n);if(r)for(let o=r.next(0);o>=0;o=r.next(o+1))t(o,i)&&s.set(o);else for(let o=0;o<n;++o)t(o,i)&&s.set(o);return e.create({filter:s})}function PEt(e,t){const n=tl({p:t},{table:e});let r=n.exprs[0];if(n.ops.length){const{data:i}=xQ(e,n,{drop:!0}).column("p");r=s=>i[s]}return DEt(e,r)}function kke(e,{names:t=[],exprs:n=[],ops:r=[]},i={}){if(!t.length)return e;const s=i.limit>0?+i.limit:1/0,o=i.index?i.index===!0?"index":i.index+"":null,a=new Set(i.drop),u=Qb(e,r,n),l=Zl(),c=new Set(t),f=[],d=[],h=[];e.columnNames().forEach(w=>{if(!a.has(w)){const E=l.add(w,[]);c.has(w)||(f.push(e.column(w)),d.push(E))}}),t.forEach(w=>{a.has(w)||(l.has(w)||l.add(w,[]),h.push(l.data[w]))});const p=o?l.add(o,[]):null;let m=0;const g=f.length,y=h.length,v=(w,E)=>{for(let T=0;T<g;++T)d[T].length=m+E,d[T].fill(f[T].get(w),m,m+E)},b=p?(w,E)=>{for(let T=0;T<E;++T)p[w+T]=T}:()=>{};if(y===1){const w=u[0],E=h[0];e.scan((T,S)=>{const C=Ju(w(T,S)),A=Math.min(C.length,s);v(T,A);for(let k=0;k<A;++k)E[m+k]=C[k];b(m,A),m+=A})}else e.scan((w,E)=>{let T=0;const S=u.map(C=>{const A=Ju(C(w,E));return T=Math.min(Math.max(T,A.length),s),A});v(w,T);for(let C=0;C<y;++C){const A=h[C],k=S[C];for(let N=0;N<T;++N)A[m+N]=k[N]}b(m,T),m+=T});return e.create(l.new())}function OEt(e,{names:t=[],exprs:n=[],ops:r=[]},i={}){if(t.length===0)return e;const[s="key",o="value"]=i.as||[],a=Qb(e,r,n);return kke(e,{names:[s,o],exprs:[()=>t,(u,l)=>a.map(c=>c(u,l))]},{...i,drop:t})}function Qf(e,t,n,r={window:!1}){const i=new Map,s=o=>{o=tu(o)?t.columnName(o):o,Bo(o)?i.set(o,J1(o)):gi(o)?Nm(t,o).forEach(s):wa(o)?yIe(i,o):xn(`Invalid ${e} value: ${o+""}`)};return Ju(n).forEach(s),r.preparse&&r.preparse(i),tl(i,{table:t,...r})}function $Et(e,t,n){return OEt(e,Qf("fold",e,t),n)}function xfe(e,t,n,r){const i=n&&n.length;return MEt(i?LEt(e,n,r):e,t,i)}function MEt(e,{names:t,exprs:n,ops:r},i){const s=Qb(e,r,n),o=i?null:Zl(e),a=e.totalRows();return t.forEach((u,l)=>{const c=e.column(u),f=i?c.data:o.add(u,Array(a)),d=s[l];e.scan(h=>{const p=c.get(h);f[h]=Df(p)?p:d(h)})}),i?e:e.create(o)}function LEt(e,t,n){const r=e.groups(),i=e.data(),s=(r?r.names:[]).concat(t),o=(r?r.get:[]).concat(t.map(p=>e.getter(p))),a=new Set,u=t$(o);e.scan((p,m)=>a.add(u(p,m)));const l=e.columnNames(),c=Zl(),f=l.map(p=>c.add(p,[]));l.forEach((p,m)=>{const g=i[p],y=f[m];e.scan(v=>y.push(g.get(v)))});const d=t$(o.map((p,m)=>g=>g[m])),h=IS("v","{"+f.map((p,m)=>`_${m}.push(v[$${m}]);`).join("")+"}",f,l.map(p=>s.indexOf(p)));if(r){let p=r.keys.length;const m=n.reduce((y,v)=>y*v.length,r.size),g=new Uint32Array(m+(p-a.size));g.set(r.keys),Sfe(r,n,(y,v)=>{a.has(d(y))||(h(y),g[p++]=v[0])}),c.groupby({...r,keys:g})}else Sfe(r,n,p=>{a.has(d(p))||h(p)});return e.create(c.new())}function Sfe(e,t,n){const r=e?e.get.length:0,i=e?1:0,s=i+t.length,o=new Int32Array(s),a=new Int32Array(s),u=[];if(e){const{get:c,rows:f,size:d}=e;o[0]=d,u.push((h,p)=>{const m=f[p];for(let g=0;g<r;++g)h[g]=c[g](m)})}t.forEach((c,f)=>{const d=f+r;o[f+i]=c.length,u.push((h,p)=>h[d]=c[p])});const l=Array(r+t.length);for(let c=0;c<s;++c)u[c](l,0);n(l,a);for(let c=s-1;c>=0;){const f=++a[c];f<o[c]?(u[c](l,f),n(l,a),c=s-1):(a[c]=0,u[c](l,0),--c)}}function SQ(e,{names:t,exprs:n,ops:r}){const i=Zl(),s=e.groups();return s&&Cke(i,s),FEt(t,n,s,kS(e,r),i),e.create(i.new())}function FEt(e,t,n,r=[],i){if(!t.length)return;const s=n?n.size:1,o=(u,l)=>r[u][l],a=e.length;for(let u=0;u<a;++u){const l=t[u];if(l.field!=null)i.add(e[u],r[l.field]);else if(s>1){const c=i.add(e[u],Array(s));for(let f=0;f<s;++f)c[f]=l(f,null,o)}else i.add(e[u],[l(0,null,o)])}}function jEt(e,t,n={}){if(t=tl(t,{table:e}),t.names.forEach(r=>e.column(r)?0:xn(`Invalid impute column ${Ih(r)}`)),n.expand){const r={preparse:BEt,aggronly:!0},i=Qf("impute",e,n.expand,r),s=SQ(e.ungroup(),i);return xfe(e,t,i.names,i.names.map(o=>s.get(o,0)))}else return xfe(e,t)}function BEt(e){e.forEach((t,n)=>t.field?e.set(n,q2e(t+"")):0)}function UEt(e,t){const n=e.columnNames();return t.length?t.reduce((r,i)=>r.semijoin(i.select(n)),e).dedupe():e.reify([])}function Rke(e,t){const n=new Map;return e.scan((r,i)=>{const s=t(r,i);s!=null&&s===s&&n.set(s,r)}),n}function zEt(e,t,n){const r=new Map,i=e.length;for(let s=0;s<i;++s){const o=e[s],a=n(o,t);a!=null&&a===a&&(r.has(a)?r.get(a).push(s):r.set(a,[s]))}return r}function VEt(e,t){const n=["i","a","j","b"];return IS(n,"{"+Uk(e,(r,i)=>`_${i}.push($${i}(${n}));`)+"}",e,t)}function HEt(e,t,n,{names:r,exprs:i},s={}){const o=e.data(),a=e.indices(!1),u=a.length,l=new Int32Array(u),c=t.data(),f=t.indices(!1),d=f.length,h=new Int32Array(d),p=r.length,m=Zl(),g=Array(p),y=Array(p);for(let w=0;w<r.length;++w)g[w]=m.add(r[w],[]),y[w]=i[w];const v=VEt(g,y);if((dr(n)?WEt:qEt)(v,n,o,c,a,f,l,h,u,d),s.left)for(let w=0;w<u;++w)l[w]||v(a[w],o,-1,c);if(s.right)for(let w=0;w<d;++w)h[w]||v(-1,o,f[w],c);return e.create(m.new())}function qEt(e,t,n,r,i,s,o,a,u,l){for(let c=0;c<u;++c){const f=i[c];for(let d=0;d<l;++d){const h=s[d];t(f,n,h,r)&&(e(f,n,h,r),o[c]=1,a[d]=1)}}}function WEt(e,[t,n],r,i,s,o,a,u,l,c){let f,d,h,p,m,g,y,v,b=e;l>=c?(f=r,d=t,h=a,p=s,m=i,g=n,y=u,v=o):(f=i,d=n,h=u,p=o,m=r,g=t,y=a,v=s,b=(T,S,C,A)=>e(C,A,T,S));const w=zEt(v,m,g),E=p.length;for(let T=0;T<E;++T){const S=p[T],C=w.get(d(S,f));if(C){const A=C.length;for(let k=0;k<A;++k){const N=C[k];b(S,f,v[N],m),y[N]=1}h[T]=1}}}function T$(e,t,n){const r=new Map;Ju(n).forEach((s,o)=>{s=tu(s)?t.columnName(s):s,Bo(s)?r.set(o,J1(s)):gi(s)||wa(s)&&s.expr?r.set(o,s):xn(`Invalid ${e} key value: ${s+""}`)});const i=tl(r,{table:t,aggregate:!1,window:!1});return t$(i.exprs,!0)}function GEt(e,t){const n=new Set(t);return e.filter(r=>n.has(r))}function TQ(e,t,n){if(n)Bo(n)?n=[n,n]:dr(n)&&n.length===1&&(n=[n[0],n[0]]);else{const r=GEt(e.columnNames(),t.columnNames());r.length||xn("Natural join requires shared column names."),n=[r,r]}return n}function Nke(e,t,n,r){return n.length!==r.length&&xn("Mismatched number of join keys"),[T$("join",e,n),T$("join",t,r)]}const YEt={aggregate:!1,window:!1},KEt={...YEt,index:1};function Tfe(e,t,n,r,i={}){n=TQ(e,t,n);const s={join:[e,t]};let o;if(dr(n)){const[a,u]=n.map(Ju);o=Nke(e,t,a,u),r||(r=XEt(e,a,u,i))}else o=tl({on:n},s).exprs[0],r||(r=[ax(),ax()]);return HEt(e,t,o,QEt(e,t,r,s,i&&i.suffix),i)}function XEt(e,t,n,r){const i=[];t.forEach((o,a)=>Bo(o)&&o===n[a]?i.push(o):0);const s=bIe(i);if(r.left&&r.right){const o=new Set(i);return[e.columnNames().map(a=>{const u=`[${Ih(a)}]`;return o.has(a)?{[a]:`(a, b) => a${u} == null ? b${u} : a${u}`}:a}),s]}return r.right?[s,ax()]:[ax(),s]}function QEt(e,t,n,r,i=[]){if(dr(n)){let s,o,a,u=n.length;s=o=a={names:[],exprs:[]},u--&&(s=Qf("join",e,n[0],r)),u--&&(o=Qf("join",t,n[1],KEt)),u--&&(a=tl(n[2],r));const l=new Set,c=new Set(s.names);return o.names.forEach(f=>{c.has(f)&&l.add(f)}),l.size&&(i[0]!==""&&Cfe(s.names,l,i[0]||"_1"),i[1]!==""&&Cfe(o.names,l,i[1]||"_2")),{names:s.names.concat(o.names,a.names),exprs:s.exprs.concat(o.exprs,a.exprs)}}else return tl(n,r)}function Cfe(e,t,n){e.forEach((r,i)=>t.has(r)?e[i]=r+n:0)}function JEt(e,t,n,r={}){const i=new Ike(e.totalRows());return(dr(n)?ZEt:ext)(i,e,t,n),r.anti&&i.not().and(e.mask()),e.create({filter:i})}function ZEt(e,t,n,[r,i]){const s=Rke(n,i);t.scan((o,a)=>{s.get(r(o,a))>=0&&e.set(o)})}function ext(e,t,n,r){const i=t.numRows(),s=n.numRows(),o=t.data(),a=n.data();if(t.isFiltered()||n.isFiltered()){const u=t.indices(!1),l=n.indices(!1);for(let c=0;c<i;++c){const f=u[c];for(let d=0;d<s;++d)if(r(f,o,l[d],a)){e.set(f);break}}}else for(let u=0;u<i;++u)for(let l=0;l<s;++l)if(r(u,o,l,a)){e.set(u);break}}function Afe(e,t,n,r){n=TQ(e,t,n);const i=dr(n)?Nke(e,t,...n.map(Ju)):tl({on:n},{join:[e,t]}).exprs[0];return JEt(e,t,i,r)}function txt(e,t,[n,r],{names:i,exprs:s,ops:o}){const a=Zl(e),u=e.totalRows();i.forEach(d=>a.add(d,Array(u).fill(ar)));const l=Rke(t,r),c=IS(["lr","rr","data"],"{"+Uk(i,(d,h)=>`_[${h}][lr] = $[${h}](rr, data);`)+"}",i.map(d=>a.data[d]),Qb(t,o,s)),f=t.data();return e.scan((d,h)=>{const p=l.get(n(d,h));p>=0&&c(d,p,f)}),e.create(a)}function nxt(e,t,n,r){return n=TQ(e,t,n),txt(e,t,[T$("lookup",e,n[0]),T$("lookup",t,n[1])],Qf("lookup",t,r))}const Yz=(e,t)=>e??t;function rxt(e,t,n,r={}){const{keys:i,keyColumn:s}=ixt(e,t,r),o=Yz(r.valueSeparator,"_"),a=n.names.length>1?(l,c)=>c+o+i[l]:l=>i[l],u=i.map(l=>kS(e,n.ops.map(c=>{if(c.name==="count"){const d=h=>l===s[h]?1:NaN;return d.toString=()=>l+":1",{...c,name:"sum",fields:[d]}}const f=c.fields.map(d=>{const h=(p,m)=>l===s[p]?d(p,m):NaN;return h.toString=()=>l+":"+d,h});return{...c,fields:f}})));return e.create(sxt(n,a,e.groups(),u))}function ixt(e,t,n){const r=n.limit>0?+n.limit:1/0,i=Yz(n.sort,!0),s=Yz(n.keySeparator,"_"),o=Qb(e,t.ops,t.exprs),a=o.length===1?o[0]:(f,d)=>o.map(h=>h(f,d)).join(s),u=Array(e.totalRows());e.scan((f,d)=>u[f]=a(f,d));const l=kS(e.ungroup(),[{id:0,name:"array_agg_distinct",fields:[f=>u[f]],params:[]}])[0][0],c=i?l.sort():l;return{keys:Number.isFinite(r)?c.slice(0,r):c,keyColumn:u}}function sxt({names:e,exprs:t},n,r,i){const s=r?r.size:1,o=Zl(),a=i.length,u=e.length;let l;const c=(f,d)=>l[f][d];r&&Cke(o,r);for(let f=0;f<u;++f){const d=t[f];if(d.field!=null)for(let h=0;h<a;++h)o.add(n(h,e[f]),i[h][d.field]);else if(s>1)for(let h=0;h<a;++h){l=i[h];const p=o.add(n(h,e[f]),Array(s));for(let m=0;m<s;++m)p[m]=d(m,null,c)}else for(let h=0;h<a;++h)l=i[h],o.add(n(h,e[f]),[d(0,null,c)])}return o.new()}function oxt(e,t,n,r){return rxt(e,Qf("fold",e,t),Qf("fold",e,n,{preparse:axt,aggronly:!0}),r)}function axt(e){e.forEach((t,n)=>t.field?e.set(n,z2e(t+"")):0)}function uxt(e,t){const n=new Map;return e.columnNames(r=>(n.set(r,r),0)),_Q(e,Nm(e,t,n))}function Ife(e,t){return SQ(e,tl(t,{table:e,aggronly:!0,window:!1}))}function lxt(e,t,n,r){return(t?r?fxt:cxt:r?hxt:dxt)(e.length,e,n,r)}function cxt(e,t,n){const r=n.length;for(let i=0;i<e;++i)t[i]=n[r*bS()|0];return t}function fxt(e,t,n,r){const i=n.length,s=new Float64Array(i);let o=0;for(let u=0;u<i;++u)s[u]=o+=r(n[u]);const a=Ake(wQ).right;for(let u=0;u<e;++u)t[u]=n[a(s,o*bS())];return t}function dxt(e,t,n){const r=n.length;if(e>=r)return n;for(let i=0;i<e;++i)t[i]=n[i];for(let i=e;i<r;++i){const s=i*bS();s<e&&(t[s|0]=n[i])}return t}function hxt(e,t,n,r){const i=n.length;if(e>=i)return n;const s=new Float32Array(i),o=new Uint32Array(i);for(let a=0;a<i;++a)o[a]=a,s[a]=-Math.log(bS())/r(n[a]);o.sort((a,u)=>s[a]-s[u]);for(let a=0;a<e;++a)t[a]=n[o[a]];return t}function pxt(e,t=0,n=e.length){let r=n-(t=+t);for(;r;){const i=bS()*r--|0,s=e[r+t];e[r+t]=e[i+t],e[i+t]=s}return e}function mxt(e,t,n,r={}){const{replace:i,shuffle:s}=r,o=e.partitions(!1);let a=0;t=o.map((c,f)=>{let d=t(f);return a+=d=i?d:Math.min(c.length,d),d});const u=new Uint32Array(a);let l=0;return o.forEach((c,f)=>{const d=t[f],h=u.subarray(l,l+=d);!i&&d===c.length?h.set(c):lxt(h,i,c,n)}),s!==!1&&(o.length>1||!i)&&pxt(u),e.reify(u)}function gxt(e,t,n={}){return mxt(e,yxt(e,t),vxt(e,n.weight),n)}const Dke=e=>t=>e.get(t)||0;function yxt(e,t){return tu(t)?()=>t:Dke(SQ(e,tl({size:t},{table:e,window:!1})).column("size"))}function vxt(e,t){return t==null?null:(t=tu(t)?e.columnName(t):t,Dke(Bo(t)?e.column(t):xQ(e,tl({w:t},{table:e}),{drop:!0}).column("w")))}function bxt(e,t){return _Q(e,Nm(e,t))}function _xt(e,{names:t,exprs:n,ops:r=[]},i={}){if(t.length===0)return e;const s=t.length===1&&i.as||[],o=i.drop==null?!0:!!i.drop,a=i.limit==null?s.length||1/0:Math.max(1,+i.limit||1),u=Qb(e,r,n),l=Zl(),c=t.reduce((d,h,p)=>d.set(h,p),new Map),f=(d,h)=>{const p=wxt(e,u[d],a),m=p.length;for(let g=0;g<m;++g)l.add(s[g]||`${h}_${g+1}`,p[g])};return e.columnNames().forEach(d=>{c.has(d)?(o||l.add(d,e.column(d)),f(c.get(d),d),c.delete(d)):l.add(d,e.column(d))}),c.forEach(f),e.create(l)}function wxt(e,t,n){const r=e.totalRows(),i=[];return e.scan((s,o)=>{const a=Ju(t(s,o)),u=Math.min(a.length,n);for(;i.length<u;)i.push(Array(r).fill(ar));for(let l=0;l<u;++l)i[l][s]=a[l]}),i}function Ext(e,t,n){return _xt(e,Qf("spread",e,t),n)}function xxt(e,t){return e.concat(t).dedupe()}function Sxt(e,t,n){return kke(e,Qf("unroll",e,t),n&&n.drop?{...n,drop:Qf("unroll",e,n.drop).names}:n)}function Txt(e,t){return e.create({groups:Cxt(e,t)})}function Cxt(e,{names:t=[],exprs:n=[],ops:r=[]}){const i=t.length;if(i===0)return null;if(i===1&&!e.isFiltered()&&n[0].field){const h=e.column(n[0].field);if(h.groups)return h.groups(t)}let s=Qb(e,r,n);const o=t$(s),a=e.totalRows(),u=new Uint32Array(a),l={},c=[],f=e.data(),d=e.mask();if(d)for(let h=d.next(0);h>=0;h=d.next(h+1)){const p=o(h,f)+"",m=l[p];u[h]=m??(l[p]=c.push(h)-1)}else for(let h=0;h<a;++h){const p=o(h,f)+"",m=l[p];u[h]=m??(l[p]=c.push(h)-1)}return r.length||(s=s.map(h=>p=>h(p,f))),{keys:u,get:s,names:t,rows:c,size:c.length}}function Axt(e,t){return Txt(e,Qf("groupby",e,t))}function Ixt(e,t){return e.create({order:t})}const kxt=(e,t,n,r)=>`((u = ${e}) < (v = ${t}) || u == null) && v != null ? ${n}
    : (u > v || v == null) && u != null ? ${r}
    : ((v = v instanceof Date ? +v : v), (u = u instanceof Date ? +u : u)) !== u && v === v ? ${n}
    : v !== v && u === u ? ${r} : `;function Rxt(e,t){const n=[],r=[],i=[];let s=null,o="0",a="0";e.isGrouped()&&(s=e.groups().keys,o="ka",a="kb");const{ops:u}=tl(t,{table:e,value:(h,p)=>{if(n.push(h),p.escape){const m=g=>`fn[${i.length}](${g}, data)`;r.push([m("a"),m("b")]),i.push(p.escape)}else r.push([e$(p,{index:"a",op:o}),e$(p,{index:"b",op:a})])},window:!1}),l=kS(e,u),c=(h,p)=>l[h][p],f=n.length;let d="return (a, b) => {"+(c&&e.isGrouped()?"const ka = keys[a], kb = keys[b];":"")+"let u, v; return ";for(let h=0;h<f;++h){const p=t.get(n[h]).desc?-1:1,[m,g]=r[h];d+=kxt(m,g,-p,p)}return d+="0;};",Function("op","keys","fn","data",d)(c,s,i,e.data())}function Nxt(e,t){return Ixt(e,Dxt(e,t))}function Dxt(e,t){let n=-1;const r=new Map,i=s=>r.set(++n+"",s);return t.forEach(s=>{const o=s.expr!=null?s.expr:s;if(wa(o)&&!gi(o))for(const a in o)i(o[a]);else i(tu(o)?J1(s,e.columnName(o)):Bo(o)?J1(s):gi(o)?s:xn(`Invalid orderby field: ${s+""}`))}),Rxt(e,r)}function Pxt(e,t){const n=e.numRows(),r=n+t.reduce((o,a)=>o+a.numRows(),0);if(n===r)return e;const i=[e,...t],s=Zl();return e.columnNames().forEach(o=>{const a=Array(r);let u=0;i.forEach(l=>{const c=l.column(o)||{get:()=>ar};l.scan(f=>a[u++]=c.get(f))}),s.add(o,a)}),e.create(s.new())}function Oxt(e,t){const n=Zl(),r=e.groups(),{get:i,names:s=[],rows:o,size:a=1}=r||{},u=new Uint32Array(a+1);s.forEach(d=>n.add(d,null));const l=r?Tke(e,t,r):[Ske(e,t)];t.outputs().map(d=>n.add(d,[]));const c=u.length-1;let f=0;for(let d=0;d<c;++d)f+=u[d+1]=t.write(l[d],n.data,u[d]);if(r){const d=e.data();s.forEach((h,p)=>{const m=n.data[h]=Array(f),g=i[p];for(let y=0,v=0;y<a;++y)m.fill(g(o[y],d),v,v+=u[y+1])})}return e.create(n.new())}function $xt(e){return e.isGrouped()?e.create({groups:null}):e}function Mxt(e){return e.isOrdered()?e.create({order:null}):e}const Lxt={__antijoin:(e,t,n)=>Afe(e,t,n,{anti:!0}),__count:(e,t={})=>Ife(e,{[t.as||"count"]:V2e()}),__cross:(e,t,n,r)=>Tfe(e,t,()=>!0,n,{...r,left:!0,right:!0}),__concat:Pxt,__dedupe:cEt,__derive:kEt,__except:REt,__filter:PEt,__fold:$Et,__impute:jEt,__intersect:UEt,__join:Tfe,__lookup:nxt,__pivot:oxt,__relocate:Eke,__rename:uxt,__rollup:Ife,__sample:gxt,__select:bxt,__semijoin:Afe,__spread:Ext,__union:xxt,__unroll:Sxt,__groupby:Axt,__orderby:Nxt,__ungroup:$xt,__unorder:Mxt,__reduce:Oxt};Object.assign(zp.prototype,Lxt);function Fxt(e,t){return zp.from(e,t)}function o9(e){return c4(e,{escape:!0,toString(){xn("Escaped values can not be serialized.")}})}zp.prototype;function Tf(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Error("[Immer] minified error nr: "+e+(n.length?" "+n.map(function(i){return"'"+i+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function iy(e){return!!e&&!!e[wi]}function Om(e){var t;return!!e&&(function(n){if(!n||typeof n!="object")return!1;var r=Object.getPrototypeOf(n);if(r===null)return!0;var i=Object.hasOwnProperty.call(r,"constructor")&&r.constructor;return i===Object||typeof i=="function"&&Function.toString.call(i)===Gxt}(e)||Array.isArray(e)||!!e[$fe]||!!(!((t=e.constructor)===null||t===void 0)&&t[$fe])||CQ(e)||AQ(e))}function Z1(e,t,n){n===void 0&&(n=!1),RS(e)===0?(n?Object.keys:aE)(e).forEach(function(r){n&&typeof r=="symbol"||t(r,e[r],e)}):e.forEach(function(r,i){return t(i,r,e)})}function RS(e){var t=e[wi];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:CQ(e)?2:AQ(e)?3:0}function oE(e,t){return RS(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function jxt(e,t){return RS(e)===2?e.get(t):e[t]}function Pke(e,t,n){var r=RS(e);r===2?e.set(t,n):r===3?e.add(n):e[t]=n}function Oke(e,t){return e===t?e!==0||1/e==1/t:e!=e&&t!=t}function CQ(e){return qxt&&e instanceof Map}function AQ(e){return Wxt&&e instanceof Set}function Ov(e){return e.o||e.t}function IQ(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=Mke(e);delete t[wi];for(var n=aE(t),r=0;r<n.length;r++){var i=n[r],s=t[i];s.writable===!1&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(t[i]={configurable:!0,writable:!0,enumerable:s.enumerable,value:e[i]})}return Object.create(Object.getPrototypeOf(e),t)}function kQ(e,t){return t===void 0&&(t=!1),RQ(e)||iy(e)||!Om(e)||(RS(e)>1&&(e.set=e.add=e.clear=e.delete=Bxt),Object.freeze(e),t&&Z1(e,function(n,r){return kQ(r,!0)},!0)),e}function Bxt(){Tf(2)}function RQ(e){return e==null||typeof e!="object"||Object.isFrozen(e)}function dh(e){var t=Jz[e];return t||Tf(18,e),t}function Uxt(e,t){Jz[e]||(Jz[e]=t)}function Kz(){return lI}function a9(e,t){t&&(dh("Patches"),e.u=[],e.s=[],e.v=t)}function C$(e){Xz(e),e.p.forEach(zxt),e.p=null}function Xz(e){e===lI&&(lI=e.l)}function kfe(e){return lI={p:[],l:lI,h:e,m:!0,_:0}}function zxt(e){var t=e[wi];t.i===0||t.i===1?t.j():t.g=!0}function u9(e,t){t._=t.p.length;var n=t.p[0],r=e!==void 0&&e!==n;return t.h.O||dh("ES5").S(t,e,r),r?(n[wi].P&&(C$(t),Tf(4)),Om(e)&&(e=A$(t,e),t.l||I$(t,e)),t.u&&dh("Patches").M(n[wi].t,e,t.u,t.s)):e=A$(t,n,[]),C$(t),t.u&&t.v(t.u,t.s),e!==$ke?e:void 0}function A$(e,t,n){if(RQ(t))return t;var r=t[wi];if(!r)return Z1(t,function(a,u){return Rfe(e,r,t,a,u,n)},!0),t;if(r.A!==e)return t;if(!r.P)return I$(e,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var i=r.i===4||r.i===5?r.o=IQ(r.k):r.o,s=i,o=!1;r.i===3&&(s=new Set(i),i.clear(),o=!0),Z1(s,function(a,u){return Rfe(e,r,i,a,u,n,o)}),I$(e,i,!1),n&&e.u&&dh("Patches").N(r,n,e.u,e.s)}return r.o}function Rfe(e,t,n,r,i,s,o){if(iy(i)){var a=A$(e,i,s&&t&&t.i!==3&&!oE(t.R,r)?s.concat(r):void 0);if(Pke(n,r,a),!iy(a))return;e.m=!1}else o&&n.add(i);if(Om(i)&&!RQ(i)){if(!e.h.D&&e._<1)return;A$(e,i),t&&t.A.l||I$(e,i)}}function I$(e,t,n){n===void 0&&(n=!1),!e.l&&e.h.D&&e.m&&kQ(t,n)}function l9(e,t){var n=e[wi];return(n?Ov(n):e)[t]}function Nfe(e,t){if(t in e)for(var n=Object.getPrototypeOf(e);n;){var r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Object.getPrototypeOf(n)}}function Vg(e){e.P||(e.P=!0,e.l&&Vg(e.l))}function c9(e){e.o||(e.o=IQ(e.t))}function Qz(e,t,n){var r=CQ(t)?dh("MapSet").F(t,n):AQ(t)?dh("MapSet").T(t,n):e.O?function(i,s){var o=Array.isArray(i),a={i:o?1:0,A:s?s.A:Kz(),P:!1,I:!1,R:{},l:s,t:i,k:null,o:null,j:null,C:!1},u=a,l=cI;o&&(u=[a],l=M2);var c=Proxy.revocable(u,l),f=c.revoke,d=c.proxy;return a.k=d,a.j=f,d}(t,n):dh("ES5").J(t,n);return(n?n.A:Kz()).p.push(r),r}function Vxt(e){return iy(e)||Tf(22,e),function t(n){if(!Om(n))return n;var r,i=n[wi],s=RS(n);if(i){if(!i.P&&(i.i<4||!dh("ES5").K(i)))return i.t;i.I=!0,r=Dfe(n,s),i.I=!1}else r=Dfe(n,s);return Z1(r,function(o,a){i&&jxt(i.t,o)===a||Pke(r,o,t(a))}),s===3?new Set(r):r}(e)}function Dfe(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return IQ(e)}function Hxt(){function e(s,o){var a=i[s];return a?a.enumerable=o:i[s]=a={configurable:!0,enumerable:o,get:function(){var u=this[wi];return cI.get(u,s)},set:function(u){var l=this[wi];cI.set(l,s,u)}},a}function t(s){for(var o=s.length-1;o>=0;o--){var a=s[o][wi];if(!a.P)switch(a.i){case 5:r(a)&&Vg(a);break;case 4:n(a)&&Vg(a)}}}function n(s){for(var o=s.t,a=s.k,u=aE(a),l=u.length-1;l>=0;l--){var c=u[l];if(c!==wi){var f=o[c];if(f===void 0&&!oE(o,c))return!0;var d=a[c],h=d&&d[wi];if(h?h.t!==f:!Oke(d,f))return!0}}var p=!!o[wi];return u.length!==aE(o).length+(p?0:1)}function r(s){var o=s.k;if(o.length!==s.t.length)return!0;var a=Object.getOwnPropertyDescriptor(o,o.length-1);if(a&&!a.get)return!0;for(var u=0;u<o.length;u++)if(!o.hasOwnProperty(u))return!0;return!1}var i={};Uxt("ES5",{J:function(s,o){var a=Array.isArray(s),u=function(c,f){if(c){for(var d=Array(f.length),h=0;h<f.length;h++)Object.defineProperty(d,""+h,e(h,!0));return d}var p=Mke(f);delete p[wi];for(var m=aE(p),g=0;g<m.length;g++){var y=m[g];p[y]=e(y,c||!!p[y].enumerable)}return Object.create(Object.getPrototypeOf(f),p)}(a,s),l={i:a?5:4,A:o?o.A:Kz(),P:!1,I:!1,R:{},l:o,t:s,k:u,o:null,g:!1,C:!1};return Object.defineProperty(u,wi,{value:l,writable:!0}),u},S:function(s,o,a){a?iy(o)&&o[wi].A===s&&t(s.p):(s.u&&function u(l){if(l&&typeof l=="object"){var c=l[wi];if(c){var f=c.t,d=c.k,h=c.R,p=c.i;if(p===4)Z1(d,function(b){b!==wi&&(f[b]!==void 0||oE(f,b)?h[b]||u(d[b]):(h[b]=!0,Vg(c)))}),Z1(f,function(b){d[b]!==void 0||oE(d,b)||(h[b]=!1,Vg(c))});else if(p===5){if(r(c)&&(Vg(c),h.length=!0),d.length<f.length)for(var m=d.length;m<f.length;m++)h[m]=!1;else for(var g=f.length;g<d.length;g++)h[g]=!0;for(var y=Math.min(d.length,f.length),v=0;v<y;v++)d.hasOwnProperty(v)||(h[v]=!0),h[v]===void 0&&u(d[v])}}}}(s.p[0]),t(s.p))},K:function(s){return s.i===4?n(s):r(s)}})}var Pfe,lI,NQ=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",qxt=typeof Map<"u",Wxt=typeof Set<"u",Ofe=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",$ke=NQ?Symbol.for("immer-nothing"):((Pfe={})["immer-nothing"]=!0,Pfe),$fe=NQ?Symbol.for("immer-draftable"):"__$immer_draftable",wi=NQ?Symbol.for("immer-state"):"__$immer_state",Gxt=""+Object.prototype.constructor,aE=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,Mke=Object.getOwnPropertyDescriptors||function(e){var t={};return aE(e).forEach(function(n){t[n]=Object.getOwnPropertyDescriptor(e,n)}),t},Jz={},cI={get:function(e,t){if(t===wi)return e;var n=Ov(e);if(!oE(n,t))return function(i,s,o){var a,u=Nfe(s,o);return u?"value"in u?u.value:(a=u.get)===null||a===void 0?void 0:a.call(i.k):void 0}(e,n,t);var r=n[t];return e.I||!Om(r)?r:r===l9(e.t,t)?(c9(e),e.o[t]=Qz(e.A.h,r,e)):r},has:function(e,t){return t in Ov(e)},ownKeys:function(e){return Reflect.ownKeys(Ov(e))},set:function(e,t,n){var r=Nfe(Ov(e),t);if(r!=null&&r.set)return r.set.call(e.k,n),!0;if(!e.P){var i=l9(Ov(e),t),s=i==null?void 0:i[wi];if(s&&s.t===n)return e.o[t]=n,e.R[t]=!1,!0;if(Oke(n,i)&&(n!==void 0||oE(e.t,t)))return!0;c9(e),Vg(e)}return e.o[t]===n&&(n!==void 0||t in e.o)||Number.isNaN(n)&&Number.isNaN(e.o[t])||(e.o[t]=n,e.R[t]=!0),!0},deleteProperty:function(e,t){return l9(e.t,t)!==void 0||t in e.t?(e.R[t]=!1,c9(e),Vg(e)):delete e.R[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var n=Ov(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.i!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty:function(){Tf(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){Tf(12)}},M2={};Z1(cI,function(e,t){M2[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),M2.deleteProperty=function(e,t){return M2.set.call(this,e,t,void 0)},M2.set=function(e,t,n){return cI.set.call(this,e[0],t,n,e[0])};var Yxt=function(){function e(n){var r=this;this.O=Ofe,this.D=!0,this.produce=function(i,s,o){if(typeof i=="function"&&typeof s!="function"){var a=s;s=i;var u=r;return function(m){var g=this;m===void 0&&(m=a);for(var y=arguments.length,v=Array(y>1?y-1:0),b=1;b<y;b++)v[b-1]=arguments[b];return u.produce(m,function(w){var E;return(E=s).call.apply(E,[g,w].concat(v))})}}var l;if(typeof s!="function"&&Tf(6),o!==void 0&&typeof o!="function"&&Tf(7),Om(i)){var c=kfe(r),f=Qz(r,i,void 0),d=!0;try{l=s(f),d=!1}finally{d?C$(c):Xz(c)}return typeof Promise<"u"&&l instanceof Promise?l.then(function(m){return a9(c,o),u9(m,c)},function(m){throw C$(c),m}):(a9(c,o),u9(l,c))}if(!i||typeof i!="object"){if((l=s(i))===void 0&&(l=i),l===$ke&&(l=void 0),r.D&&kQ(l,!0),o){var h=[],p=[];dh("Patches").M(i,l,h,p),o(h,p)}return l}Tf(21,i)},this.produceWithPatches=function(i,s){if(typeof i=="function")return function(l){for(var c=arguments.length,f=Array(c>1?c-1:0),d=1;d<c;d++)f[d-1]=arguments[d];return r.produceWithPatches(l,function(h){return i.apply(void 0,[h].concat(f))})};var o,a,u=r.produce(i,s,function(l,c){o=l,a=c});return typeof Promise<"u"&&u instanceof Promise?u.then(function(l){return[l,o,a]}):[u,o,a]},typeof(n==null?void 0:n.useProxies)=="boolean"&&this.setUseProxies(n.useProxies),typeof(n==null?void 0:n.autoFreeze)=="boolean"&&this.setAutoFreeze(n.autoFreeze)}var t=e.prototype;return t.createDraft=function(n){Om(n)||Tf(8),iy(n)&&(n=Vxt(n));var r=kfe(this),i=Qz(this,n,void 0);return i[wi].C=!0,Xz(r),i},t.finishDraft=function(n,r){var i=n&&n[wi],s=i.A;return a9(s,r),u9(void 0,s)},t.setAutoFreeze=function(n){this.D=n},t.setUseProxies=function(n){n&&!Ofe&&Tf(20),this.O=n},t.applyPatches=function(n,r){var i;for(i=r.length-1;i>=0;i--){var s=r[i];if(s.path.length===0&&s.op==="replace"){n=s.value;break}}i>-1&&(r=r.slice(i+1));var o=dh("Patches").$;return iy(n)?o(n,r):this.produce(n,function(a){return o(a,r)})},e}(),Ul=new Yxt,Kxt=Ul.produce;Ul.produceWithPatches.bind(Ul);Ul.setAutoFreeze.bind(Ul);Ul.setUseProxies.bind(Ul);Ul.applyPatches.bind(Ul);Ul.createDraft.bind(Ul);Ul.finishDraft.bind(Ul);const Lke=Kxt;function fI(e){"@babel/helpers - typeof";return fI=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},fI(e)}function Xxt(e,t){if(fI(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(fI(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Qxt(e){var t=Xxt(e,"string");return fI(t)=="symbol"?t:t+""}function Jxt(e,t,n){return(t=Qxt(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Mfe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Lfe(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Mfe(Object(n),!0).forEach(function(r){Jxt(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Mfe(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function sa(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var Ffe=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),f9=function(){return Math.random().toString(36).substring(7).split("").join(".")},k$={INIT:"@@redux/INIT"+f9(),REPLACE:"@@redux/REPLACE"+f9(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+f9()}};function Zxt(e){if(typeof e!="object"||e===null)return!1;for(var t=e;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function Fke(e,t,n){var r;if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(sa(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(sa(1));return n(Fke)(e,t)}if(typeof e!="function")throw new Error(sa(2));var i=e,s=t,o=[],a=o,u=!1;function l(){a===o&&(a=o.slice())}function c(){if(u)throw new Error(sa(3));return s}function f(m){if(typeof m!="function")throw new Error(sa(4));if(u)throw new Error(sa(5));var g=!0;return l(),a.push(m),function(){if(g){if(u)throw new Error(sa(6));g=!1,l();var v=a.indexOf(m);a.splice(v,1),o=null}}}function d(m){if(!Zxt(m))throw new Error(sa(7));if(typeof m.type>"u")throw new Error(sa(8));if(u)throw new Error(sa(9));try{u=!0,s=i(s,m)}finally{u=!1}for(var g=o=a,y=0;y<g.length;y++){var v=g[y];v()}return m}function h(m){if(typeof m!="function")throw new Error(sa(10));i=m,d({type:k$.REPLACE})}function p(){var m,g=f;return m={subscribe:function(v){if(typeof v!="object"||v===null)throw new Error(sa(11));function b(){v.next&&v.next(c())}b();var w=g(b);return{unsubscribe:w}}},m[Ffe]=function(){return this},m}return d({type:k$.INIT}),r={dispatch:d,subscribe:f,getState:c,replaceReducer:h},r[Ffe]=p,r}function eSt(e){Object.keys(e).forEach(function(t){var n=e[t],r=n(void 0,{type:k$.INIT});if(typeof r>"u")throw new Error(sa(12));if(typeof n(void 0,{type:k$.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(sa(13))})}function tSt(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++){var i=t[r];typeof e[i]=="function"&&(n[i]=e[i])}var s=Object.keys(n),o;try{eSt(n)}catch(a){o=a}return function(u,l){if(u===void 0&&(u={}),o)throw o;for(var c=!1,f={},d=0;d<s.length;d++){var h=s[d],p=n[h],m=u[h],g=p(m,l);if(typeof g>"u")throw l&&l.type,new Error(sa(14));f[h]=g,c=c||g!==m}return c=c||s.length!==Object.keys(u).length,c?f:u}}function R$(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.length===0?function(r){return r}:t.length===1?t[0]:t.reduce(function(r,i){return function(){return r(i.apply(void 0,arguments))}})}function nSt(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(r){return function(){var i=r.apply(void 0,arguments),s=function(){throw new Error(sa(15))},o={getState:i.getState,dispatch:function(){return s.apply(void 0,arguments)}},a=t.map(function(u){return u(o)});return s=R$.apply(void 0,a)(i.dispatch),Lfe(Lfe({},i),{},{dispatch:s})}}}function jke(e){var t=function(r){var i=r.dispatch,s=r.getState;return function(o){return function(a){return typeof a=="function"?a(i,s,e):o(a)}}};return t}var Zz=jke();Zz.withExtraArgument=jke;var Bke=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),zk=function(e,t){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(l){return function(c){return u([l,c])}}function u(l){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(s=l[0]&2?i.return:l[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,l[1])).done)return s;switch(i=0,s&&(l=[l[0]&2,s.value]),l[0]){case 0:case 1:s=l;break;case 4:return n.label++,{value:l[1],done:!1};case 5:n.label++,i=l[1],l=[0];continue;case 7:l=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(l[0]===6||l[0]===2)){n=0;continue}if(l[0]===3&&(!s||l[1]>s[0]&&l[1]<s[3])){n.label=l[1];break}if(l[0]===6&&n.label<s[1]){n.label=s[1],s=l;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(l);break}s[2]&&n.ops.pop(),n.trys.pop();continue}l=t.call(e,n)}catch(c){l=[6,c],i=0}finally{r=s=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}},eb=function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e},rSt=Object.defineProperty,iSt=Object.defineProperties,sSt=Object.getOwnPropertyDescriptors,jfe=Object.getOwnPropertySymbols,oSt=Object.prototype.hasOwnProperty,aSt=Object.prototype.propertyIsEnumerable,Bfe=function(e,t,n){return t in e?rSt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},T0=function(e,t){for(var n in t||(t={}))oSt.call(t,n)&&Bfe(e,n,t[n]);if(jfe)for(var r=0,i=jfe(t);r<i.length;r++){var n=i[r];aSt.call(t,n)&&Bfe(e,n,t[n])}return e},d9=function(e,t){return iSt(e,sSt(t))},Vk=function(e,t,n){return new Promise(function(r,i){var s=function(u){try{a(n.next(u))}catch(l){i(l)}},o=function(u){try{a(n.throw(u))}catch(l){i(l)}},a=function(u){return u.done?r(u.value):Promise.resolve(u.value).then(s,o)};a((n=n.apply(e,t)).next())})},uSt=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?R$:R$.apply(null,arguments)};function Uke(e){if(typeof e!="object"||e===null)return!1;var t=Object.getPrototypeOf(e);if(t===null)return!0;for(var n=t;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return t===n}var lSt=function(e){return e&&typeof e.match=="function"};function hh(e,t){function n(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];if(t){var s=t.apply(void 0,r);if(!s)throw new Error("prepareAction did not return an object");return T0(T0({type:e,payload:s.payload},"meta"in s&&{meta:s.meta}),"error"in s&&{error:s.error})}return{type:e,payload:r[0]}}return n.toString=function(){return""+e},n.type=e,n.match=function(r){return r.type===e},n}function cSt(e){return Uke(e)&&"type"in e}var fSt=function(e){Bke(t,e);function t(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=e.apply(this,n)||this;return Object.setPrototypeOf(i,t.prototype),i}return Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return e.prototype.concat.apply(this,n)},t.prototype.prepend=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return n.length===1&&Array.isArray(n[0])?new(t.bind.apply(t,eb([void 0],n[0].concat(this)))):new(t.bind.apply(t,eb([void 0],n.concat(this))))},t}(Array),dSt=function(e){Bke(t,e);function t(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=e.apply(this,n)||this;return Object.setPrototypeOf(i,t.prototype),i}return Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return e.prototype.concat.apply(this,n)},t.prototype.prepend=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return n.length===1&&Array.isArray(n[0])?new(t.bind.apply(t,eb([void 0],n[0].concat(this)))):new(t.bind.apply(t,eb([void 0],n.concat(this))))},t}(Array);function eV(e){return Om(e)?Lke(e,function(){}):e}function hSt(e){return typeof e=="boolean"}function pSt(){return function(t){return mSt(t)}}function mSt(e){e===void 0&&(e={});var t=e.thunk,n=t===void 0?!0:t;e.immutableCheck,e.serializableCheck,e.actionCreatorCheck;var r=new fSt;return n&&(hSt(n)?r.push(Zz):r.push(Zz.withExtraArgument(n.extraArgument))),r}var gSt=!0;function ySt(e){var t=pSt(),n=e||{},r=n.reducer,i=r===void 0?void 0:r,s=n.middleware,o=s===void 0?t():s,a=n.devTools,u=a===void 0?!0:a,l=n.preloadedState,c=l===void 0?void 0:l,f=n.enhancers,d=f===void 0?void 0:f,h;if(typeof i=="function")h=i;else if(Uke(i))h=tSt(i);else throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');var p=o;typeof p=="function"&&(p=p(t));var m=nSt.apply(void 0,p),g=R$;u&&(g=uSt(T0({trace:!gSt},typeof u=="object"&&u)));var y=new dSt(m),v=y;Array.isArray(d)?v=eb([m],d):typeof d=="function"&&(v=d(y));var b=g.apply(void 0,v);return Fke(h,c,b)}function zke(e){var t={},n=[],r,i={addCase:function(s,o){var a=typeof s=="string"?s:s.type;if(!a)throw new Error("`builder.addCase` cannot be called with an empty action type");if(a in t)throw new Error("`builder.addCase` cannot be called with two reducers for the same action type");return t[a]=o,i},addMatcher:function(s,o){return n.push({matcher:s,reducer:o}),i},addDefaultCase:function(s){return r=s,i}};return e(i),[t,n,r]}function vSt(e){return typeof e=="function"}function bSt(e,t,n,r){n===void 0&&(n=[]);var i=typeof t=="function"?zke(t):[t,n,r],s=i[0],o=i[1],a=i[2],u;if(vSt(e))u=function(){return eV(e())};else{var l=eV(e);u=function(){return l}}function c(f,d){f===void 0&&(f=u());var h=eb([s[d.type]],o.filter(function(p){var m=p.matcher;return m(d)}).map(function(p){var m=p.reducer;return m}));return h.filter(function(p){return!!p}).length===0&&(h=[a]),h.reduce(function(p,m){if(m)if(iy(p)){var g=p,y=m(g,d);return y===void 0?p:y}else{if(Om(p))return Lke(p,function(v){return m(v,d)});var y=m(p,d);if(y===void 0){if(p===null)return p;throw Error("A case reducer on a non-draftable value must not return undefined")}return y}return p},f)}return c.getInitialState=u,c}function _St(e,t){return e+"/"+t}function wSt(e){var t=e.name;if(!t)throw new Error("`name` is a required option for createSlice");typeof process<"u";var n=typeof e.initialState=="function"?e.initialState:eV(e.initialState),r=e.reducers||{},i=Object.keys(r),s={},o={},a={};i.forEach(function(c){var f=r[c],d=_St(t,c),h,p;"reducer"in f?(h=f.reducer,p=f.prepare):h=f,s[c]=h,o[d]=h,a[c]=p?hh(d,p):hh(d)});function u(){var c=typeof e.extraReducers=="function"?zke(e.extraReducers):[e.extraReducers],f=c[0],d=f===void 0?{}:f,h=c[1],p=h===void 0?[]:h,m=c[2],g=m===void 0?void 0:m,y=T0(T0({},d),o);return bSt(n,function(v){for(var b in y)v.addCase(b,y[b]);for(var w=0,E=p;w<E.length;w++){var T=E[w];v.addMatcher(T.matcher,T.reducer)}g&&v.addDefaultCase(g)})}var l;return{name:t,reducer:function(c,f){return l||(l=u()),l(c,f)},actions:a,caseReducers:s,getInitialState:function(){return l||(l=u()),l.getInitialState()}}}var ESt="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",Vke=function(e){e===void 0&&(e=21);for(var t="",n=e;n--;)t+=ESt[Math.random()*64|0];return t},xSt=["name","message","stack","code"],h9=function(){function e(t,n){this.payload=t,this.meta=n}return e}(),Ufe=function(){function e(t,n){this.payload=t,this.meta=n}return e}(),SSt=function(e){if(typeof e=="object"&&e!==null){for(var t={},n=0,r=xSt;n<r.length;n++){var i=r[n];typeof e[i]=="string"&&(t[i]=e[i])}return t}return{message:String(e)}};(function(){function e(t,n,r){var i=hh(t+"/fulfilled",function(l,c,f,d){return{payload:l,meta:d9(T0({},d||{}),{arg:f,requestId:c,requestStatus:"fulfilled"})}}),s=hh(t+"/pending",function(l,c,f){return{payload:void 0,meta:d9(T0({},f||{}),{arg:c,requestId:l,requestStatus:"pending"})}}),o=hh(t+"/rejected",function(l,c,f,d,h){return{payload:d,error:(r&&r.serializeError||SSt)(l||"Rejected"),meta:d9(T0({},h||{}),{arg:f,requestId:c,rejectedWithValue:!!d,requestStatus:"rejected",aborted:(l==null?void 0:l.name)==="AbortError",condition:(l==null?void 0:l.name)==="ConditionError"})}}),a=typeof AbortController<"u"?AbortController:function(){function l(){this.signal={aborted:!1,addEventListener:function(){},dispatchEvent:function(){return!1},onabort:function(){},removeEventListener:function(){},reason:void 0,throwIfAborted:function(){}}}return l.prototype.abort=function(){},l}();function u(l){return function(c,f,d){var h=r!=null&&r.idGenerator?r.idGenerator(l):Vke(),p=new a,m;function g(v){m=v,p.abort()}var y=function(){return Vk(this,null,function(){var v,b,w,E,T,S,C;return zk(this,function(A){switch(A.label){case 0:return A.trys.push([0,4,,5]),E=(v=r==null?void 0:r.condition)==null?void 0:v.call(r,l,{getState:f,extra:d}),CSt(E)?[4,E]:[3,2];case 1:E=A.sent(),A.label=2;case 2:if(E===!1||p.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};return T=new Promise(function(k,N){return p.signal.addEventListener("abort",function(){return N({name:"AbortError",message:m||"Aborted"})})}),c(s(h,l,(b=r==null?void 0:r.getPendingMeta)==null?void 0:b.call(r,{requestId:h,arg:l},{getState:f,extra:d}))),[4,Promise.race([T,Promise.resolve(n(l,{dispatch:c,getState:f,extra:d,requestId:h,signal:p.signal,abort:g,rejectWithValue:function(k,N){return new h9(k,N)},fulfillWithValue:function(k,N){return new Ufe(k,N)}})).then(function(k){if(k instanceof h9)throw k;return k instanceof Ufe?i(k.payload,h,l,k.meta):i(k,h,l)})])];case 3:return w=A.sent(),[3,5];case 4:return S=A.sent(),w=S instanceof h9?o(null,h,l,S.payload,S.meta):o(S,h,l),[3,5];case 5:return C=r&&!r.dispatchConditionRejection&&o.match(w)&&w.meta.condition,C||c(w),[2,w]}})})}();return Object.assign(y,{abort:g,requestId:h,arg:l,unwrap:function(){return y.then(TSt)}})}}return Object.assign(u,{pending:s,rejected:o,fulfilled:i,typePrefix:t})}return e.withTypes=function(){return e},e})();function TSt(e){if(e.meta&&e.meta.rejectedWithValue)throw e.payload;if(e.error)throw e.error;return e.payload}function CSt(e){return e!==null&&typeof e=="object"&&typeof e.then=="function"}var ASt=function(e,t){return lSt(e)?e.match(t):e(t)};function zfe(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(n){return e.some(function(r){return ASt(r,n)})}}var DQ=function(e,t){if(typeof e!="function")throw new TypeError(t+" is not a function")},tV=function(){},Hke=function(e,t){return t===void 0&&(t=tV),e.catch(t),e},qke=function(e,t){return e.addEventListener("abort",t,{once:!0}),function(){return e.removeEventListener("abort",t)}},uE=function(e,t){var n=e.signal;n.aborted||("reason"in n||Object.defineProperty(n,"reason",{enumerable:!0,value:t,configurable:!0,writable:!0}),e.abort(t))},ISt="task",Wke="listener",Gke="completed",PQ="cancelled",kSt="task-"+PQ,RSt="task-"+Gke,Yke=Wke+"-"+PQ,NSt=Wke+"-"+Gke,f4=function(){function e(t){this.code=t,this.name="TaskAbortError",this.message=ISt+" "+PQ+" (reason: "+t+")"}return e}(),lE=function(e){if(e.aborted)throw new f4(e.reason)};function Kke(e,t){var n=tV;return new Promise(function(r,i){var s=function(){return i(new f4(e.reason))};if(e.aborted){s();return}n=qke(e,s),t.finally(function(){return n()}).then(r,i)}).finally(function(){n=tV})}var DSt=function(e,t){return Vk(void 0,null,function(){var n,r;return zk(this,function(i){switch(i.label){case 0:return i.trys.push([0,3,4,5]),[4,Promise.resolve()];case 1:return i.sent(),[4,e()];case 2:return n=i.sent(),[2,{status:"ok",value:n}];case 3:return r=i.sent(),[2,{status:r instanceof f4?"cancelled":"rejected",error:r}];case 4:return t==null||t(),[7];case 5:return[2]}})})},N$=function(e){return function(t){return Hke(Kke(e,t).then(function(n){return lE(e),n}))}},Xke=function(e){var t=N$(e);return function(n){return t(new Promise(function(r){return setTimeout(r,n)}))}},PSt=Object.assign,Vfe={},Hk="listenerMiddleware",OSt=function(e,t){var n=function(r){return qke(e,function(){return uE(r,e.reason)})};return function(r,i){DQ(r,"taskExecutor");var s=new AbortController;n(s);var o=DSt(function(){return Vk(void 0,null,function(){var a;return zk(this,function(u){switch(u.label){case 0:return lE(e),lE(s.signal),[4,r({pause:N$(s.signal),delay:Xke(s.signal),signal:s.signal})];case 1:return a=u.sent(),lE(s.signal),[2,a]}})})},function(){return uE(s,RSt)});return i!=null&&i.autoJoin&&t.push(o),{result:N$(e)(o),cancel:function(){uE(s,kSt)}}}},$St=function(e,t){var n=function(r,i){return Vk(void 0,null,function(){var s,o,a,u;return zk(this,function(l){switch(l.label){case 0:lE(t),s=function(){},o=new Promise(function(c,f){var d=e({predicate:r,effect:function(h,p){p.unsubscribe(),c([h,p.getState(),p.getOriginalState()])}});s=function(){d(),f()}}),a=[o],i!=null&&a.push(new Promise(function(c){return setTimeout(c,i,null)})),l.label=1;case 1:return l.trys.push([1,,3,4]),[4,Kke(t,Promise.race(a))];case 2:return u=l.sent(),lE(t),[2,u];case 3:return s(),[7];case 4:return[2]}})})};return function(r,i){return Hke(n(r,i))}},Qke=function(e){var t=e.type,n=e.actionCreator,r=e.matcher,i=e.predicate,s=e.effect;if(t)i=hh(t).match;else if(n)t=n.type,i=n.match;else if(r)i=r;else if(!i)throw new Error("Creating or removing a listener requires one of the known fields for matching an action");return DQ(s,"options.listener"),{predicate:i,type:t,effect:s}},MSt=function(e){var t=Qke(e),n=t.type,r=t.predicate,i=t.effect,s=Vke(),o={id:s,effect:i,type:n,predicate:r,pending:new Set,unsubscribe:function(){throw new Error("Unsubscribe not initialized")}};return o},nV=function(e){e.pending.forEach(function(t){uE(t,Yke)})},LSt=function(e){return function(){e.forEach(nV),e.clear()}},Hfe=function(e,t,n){try{e(t,n)}catch(r){setTimeout(function(){throw r},0)}},FSt=hh(Hk+"/add"),jSt=hh(Hk+"/removeAll"),BSt=hh(Hk+"/remove"),USt=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];console.error.apply(console,eb([Hk+"/error"],e))};function zSt(e){var t=this;e===void 0&&(e={});var n=new Map,r=e.extra,i=e.onError,s=i===void 0?USt:i;DQ(s,"onError");var o=function(h){return h.unsubscribe=function(){return n.delete(h.id)},n.set(h.id,h),function(p){h.unsubscribe(),p!=null&&p.cancelActive&&nV(h)}},a=function(h){for(var p=0,m=Array.from(n.values());p<m.length;p++){var g=m[p];if(h(g))return g}},u=function(h){var p=a(function(m){return m.effect===h.effect});return p||(p=MSt(h)),o(p)},l=function(h){var p=Qke(h),m=p.type,g=p.effect,y=p.predicate,v=a(function(b){var w=typeof m=="string"?b.type===m:b.predicate===y;return w&&b.effect===g});return v&&(v.unsubscribe(),h.cancelActive&&nV(v)),!!v},c=function(h,p,m,g){return Vk(t,null,function(){var y,v,b,w;return zk(this,function(E){switch(E.label){case 0:y=new AbortController,v=$St(u,y.signal),b=[],E.label=1;case 1:return E.trys.push([1,3,4,6]),h.pending.add(y),[4,Promise.resolve(h.effect(p,PSt({},m,{getOriginalState:g,condition:function(T,S){return v(T,S).then(Boolean)},take:v,delay:Xke(y.signal),pause:N$(y.signal),extra:r,signal:y.signal,fork:OSt(y.signal,b),unsubscribe:h.unsubscribe,subscribe:function(){n.set(h.id,h)},cancelActiveListeners:function(){h.pending.forEach(function(T,S,C){T!==y&&(uE(T,Yke),C.delete(T))})}})))];case 2:return E.sent(),[3,6];case 3:return w=E.sent(),w instanceof f4||Hfe(s,w,{raisedBy:"effect"}),[3,6];case 4:return[4,Promise.allSettled(b)];case 5:return E.sent(),uE(y,NSt),h.pending.delete(y),[7];case 6:return[2]}})})},f=LSt(n),d=function(h){return function(p){return function(m){if(!cSt(m))return p(m);if(FSt.match(m))return u(m.payload);if(jSt.match(m)){f();return}if(BSt.match(m))return l(m.payload);var g=h.getState(),y=function(){if(g===Vfe)throw new Error(Hk+": getOriginalState can only be called synchronously");return g},v;try{if(v=p(m),n.size>0)for(var b=h.getState(),w=Array.from(n.values()),E=0,T=w;E<T.length;E++){var S=T[E],C=!1;try{C=S.predicate(m,b,g)}catch(A){C=!1,Hfe(s,A,{raisedBy:"predicate"})}C&&c(S,m,h,y)}}finally{g=Vfe}return v}}};return{middleware:d,startListening:u,stopListening:l,clearListeners:f}}var qfe;typeof queueMicrotask=="function"&&queueMicrotask.bind(typeof window<"u"?window:typeof global<"u"?global:globalThis);Hxt();function VSt(){const e=new Map;return{listen(t,n){return e.has(t)||e.set(t,[]),e.get(t).push(n),()=>{e.set(t,(e.get(t)||[]).filter(r=>r!==n))}},fire(t,n){const r=e.get(t);r&&r.forEach(i=>i(n))}}}let oD;const HSt=new Uint8Array(16);function qSt(){if(!oD&&(oD=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!oD))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return oD(HSt)}const bo=[];for(let e=0;e<256;++e)bo.push((e+256).toString(16).slice(1));function WSt(e,t=0){return(bo[e[t+0]]+bo[e[t+1]]+bo[e[t+2]]+bo[e[t+3]]+"-"+bo[e[t+4]]+bo[e[t+5]]+"-"+bo[e[t+6]]+bo[e[t+7]]+"-"+bo[e[t+8]]+bo[e[t+9]]+"-"+bo[e[t+10]]+bo[e[t+11]]+bo[e[t+12]]+bo[e[t+13]]+bo[e[t+14]]+bo[e[t+15]]).toLowerCase()}const GSt=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Wfe={randomUUID:GSt};function Gfe(e,t,n){if(Wfe.randomUUID&&!t&&!e)return Wfe.randomUUID();e=e||{};const r=e.random||(e.rng||qSt)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,WSt(r)}class ph{static get(){let t=Gfe();for(;this.ids.has(t);)t=Gfe();return this.ids.set(t,!0),t}}ph.ids=new Map;function mh(e){return"parent"in e}function YSt(e){const{label:t=void 0,state:n,initialArtifact:r,initialMetadata:i}=e,s={annotation:[],bookmark:[]},o=Object.keys(i||{}).reduce((u,l)=>(u[l]=[],i&&i[l]&&u[l].push({type:l,id:ph.get(),val:i[l],createdOn:Date.now()}),u),s),a=r?[{id:ph.get(),createdOn:Date.now(),val:r}]:[];return{id:ph.get(),label:t||"Root",event:"Root",children:[],level:0,createdOn:Date.now(),meta:o,artifacts:a,state:{type:"checkpoint",val:n}}}function KSt({parent:e,state:t,label:n,sideEffects:r={do:[],undo:[]},initialMetadata:i,initialArtifact:s,event:o}){const a={annotation:[],bookmark:[]},u=Object.keys(i||{}).reduce((c,f)=>(c[f]=[],i&&i[f]&&c[f].push({type:f,id:ph.get(),val:i[f],createdOn:Date.now()}),c),a),l=s?[{id:ph.get(),createdOn:Date.now(),val:s}]:[];return{id:ph.get(),label:n,event:o,children:[],parent:e.id,createdOn:Date.now(),meta:u,artifacts:l,sideEffects:r,state:t,level:e.level+1}}function qi(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if({}.NODE_ENV!=="production"){var i=iTt[e],s=i?typeof i=="function"?i.apply(null,n):i:"unknown error nr: "+e;throw Error("[Immer] "+s)}throw Error("[Immer] minified error nr: "+e+(n.length?" "+n.map(function(o){return"'"+o+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function tb(e){return!!e&&!!e[zl]}function sy(e){var t;return!!e&&(function(n){if(!n||typeof n!="object")return!1;var r=Object.getPrototypeOf(n);if(r===null)return!0;var i=Object.hasOwnProperty.call(r,"constructor")&&r.constructor;return i===Object||typeof i=="function"&&Function.toString.call(i)===sTt}(e)||Array.isArray(e)||!!e[PC]||!!(!((t=e.constructor)===null||t===void 0)&&t[PC])||d4(e)||h4(e))}function cx(e,t,n){n===void 0&&(n=!1),oy(e)===0?(n?Object.keys:jQ)(e).forEach(function(r){n&&typeof r=="symbol"||t(r,e[r],e)}):e.forEach(function(r,i){return t(i,r,e)})}function oy(e){var t=e[zl];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:d4(e)?2:h4(e)?3:0}function dI(e,t){return oy(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function DP(e,t){return oy(e)===2?e.get(t):e[t]}function Jke(e,t,n){var r=oy(e);r===2?e.set(t,n):r===3?(e.delete(t),e.add(n)):e[t]=n}function XSt(e,t){return e===t?e!==0||1/e==1/t:e!=e&&t!=t}function d4(e){return nTt&&e instanceof Map}function h4(e){return rTt&&e instanceof Set}function $v(e){return e.o||e.t}function OQ(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=oTt(e);delete t[zl];for(var n=jQ(t),r=0;r<n.length;r++){var i=n[r],s=t[i];s.writable===!1&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(t[i]={configurable:!0,writable:!0,enumerable:s.enumerable,value:e[i]})}return Object.create(Object.getPrototypeOf(e),t)}function $Q(e,t){return t===void 0&&(t=!1),MQ(e)||tb(e)||!sy(e)||(oy(e)>1&&(e.set=e.add=e.clear=e.delete=QSt),Object.freeze(e),t&&cx(e,function(n,r){return $Q(r,!0)},!0)),e}function QSt(){qi(2)}function MQ(e){return e==null||typeof e!="object"||Object.isFrozen(e)}function gh(e){var t=oV[e];return t||qi(18,e),t}function JSt(e,t){oV[e]||(oV[e]=t)}function Yfe(){return{}.NODE_ENV==="production"||fx||qi(0),fx}function p9(e,t){t&&(gh("Patches"),e.u=[],e.s=[],e.v=t)}function D$(e){rV(e),e.p.forEach(ZSt),e.p=null}function rV(e){e===fx&&(fx=e.l)}function Kfe(e){return fx={p:[],l:fx,h:e,m:!0,_:0}}function ZSt(e){var t=e[zl];t.i===0||t.i===1?t.j():t.O=!0}function m9(e,t){t._=t.p.length;var n=t.p[0],r=e!==void 0&&e!==n;return t.h.g||gh("ES5").S(t,e,r),r?(n[zl].P&&(D$(t),qi(4)),sy(e)&&(e=P$(t,e),t.l||O$(t,e)),t.u&&gh("Patches").M(n[zl].t,e,t.u,t.s)):e=P$(t,n,[]),D$(t),t.u&&t.v(t.u,t.s),e!==FQ?e:void 0}function P$(e,t,n){if(MQ(t))return t;var r=t[zl];if(!r)return cx(t,function(s,o){return Xfe(e,r,t,s,o,n)},!0),t;if(r.A!==e)return t;if(!r.P)return O$(e,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var i=r.i===4||r.i===5?r.o=OQ(r.k):r.o;cx(r.i===3?new Set(i):i,function(s,o){return Xfe(e,r,i,s,o,n)}),O$(e,i,!1),n&&e.u&&gh("Patches").R(r,n,e.u,e.s)}return r.o}function Xfe(e,t,n,r,i,s){if({}.NODE_ENV!=="production"&&i===n&&qi(5),tb(i)){var o=P$(e,i,s&&t&&t.i!==3&&!dI(t.D,r)?s.concat(r):void 0);if(Jke(n,r,o),!tb(o))return;e.m=!1}if(sy(i)&&!MQ(i)){if(!e.h.F&&e._<1)return;P$(e,i),t&&t.A.l||O$(e,i)}}function O$(e,t,n){n===void 0&&(n=!1),e.h.F&&e.m&&$Q(t,n)}function g9(e,t){var n=e[zl];return(n?$v(n):e)[t]}function Qfe(e,t){if(t in e)for(var n=Object.getPrototypeOf(e);n;){var r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Object.getPrototypeOf(n)}}function iV(e){e.P||(e.P=!0,e.l&&iV(e.l))}function y9(e){e.o||(e.o=OQ(e.t))}function sV(e,t,n){var r=d4(t)?gh("MapSet").N(t,n):h4(t)?gh("MapSet").T(t,n):e.g?function(i,s){var o=Array.isArray(i),a={i:o?1:0,A:s?s.A:Yfe(),P:!1,I:!1,D:{},l:s,t:i,k:null,o:null,j:null,C:!1},u=a,l=aV;o&&(u=[a],l=L2);var c=Proxy.revocable(u,l),f=c.revoke,d=c.proxy;return a.k=d,a.j=f,d}(t,n):gh("ES5").J(t,n);return(n?n.A:Yfe()).p.push(r),r}function eTt(e){return tb(e)||qi(22,e),function t(n){if(!sy(n))return n;var r,i=n[zl],s=oy(n);if(i){if(!i.P&&(i.i<4||!gh("ES5").K(i)))return i.t;i.I=!0,r=Jfe(n,s),i.I=!1}else r=Jfe(n,s);return cx(r,function(o,a){i&&DP(i.t,o)===a||Jke(r,o,t(a))}),s===3?new Set(r):r}(e)}function Jfe(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return OQ(e)}function tTt(){function e(r){if(!sy(r))return r;if(Array.isArray(r))return r.map(e);if(d4(r))return new Map(Array.from(r.entries()).map(function(o){return[o[0],e(o[1])]}));if(h4(r))return new Set(Array.from(r).map(e));var i=Object.create(Object.getPrototypeOf(r));for(var s in r)i[s]=e(r[s]);return dI(r,PC)&&(i[PC]=r[PC]),i}function t(r){return tb(r)?e(r):r}var n="add";JSt("Patches",{$:function(r,i){return i.forEach(function(s){for(var o=s.path,a=s.op,u=r,l=0;l<o.length-1;l++){var c=oy(u),f=""+o[l];c!==0&&c!==1||f!=="__proto__"&&f!=="constructor"||qi(24),typeof u=="function"&&f==="prototype"&&qi(24),typeof(u=DP(u,f))!="object"&&qi(15,o.join("/"))}var d=oy(u),h=e(s.value),p=o[o.length-1];switch(a){case"replace":switch(d){case 2:return u.set(p,h);case 3:qi(16);default:return u[p]=h}case n:switch(d){case 1:return p==="-"?u.push(h):u.splice(p,0,h);case 2:return u.set(p,h);case 3:return u.add(h);default:return u[p]=h}case"remove":switch(d){case 1:return u.splice(p,1);case 2:return u.delete(p);case 3:return u.delete(s.value);default:return delete u[p]}default:qi(17,a)}}),r},R:function(r,i,s,o){switch(r.i){case 0:case 4:case 2:return function(a,u,l,c){var f=a.t,d=a.o;cx(a.D,function(h,p){var m=DP(f,h),g=DP(d,h),y=p?dI(f,h)?"replace":n:"remove";if(m!==g||y!=="replace"){var v=u.concat(h);l.push(y==="remove"?{op:y,path:v}:{op:y,path:v,value:g}),c.push(y===n?{op:"remove",path:v}:y==="remove"?{op:n,path:v,value:t(m)}:{op:"replace",path:v,value:t(m)})}})}(r,i,s,o);case 5:case 1:return function(a,u,l,c){var f=a.t,d=a.D,h=a.o;if(h.length<f.length){var p=[h,f];f=p[0],h=p[1];var m=[c,l];l=m[0],c=m[1]}for(var g=0;g<f.length;g++)if(d[g]&&h[g]!==f[g]){var y=u.concat([g]);l.push({op:"replace",path:y,value:t(h[g])}),c.push({op:"replace",path:y,value:t(f[g])})}for(var v=f.length;v<h.length;v++){var b=u.concat([v]);l.push({op:n,path:b,value:t(h[v])})}f.length<h.length&&c.push({op:"replace",path:u.concat(["length"]),value:f.length})}(r,i,s,o);case 3:return function(a,u,l,c){var f=a.t,d=a.o,h=0;f.forEach(function(p){if(!d.has(p)){var m=u.concat([h]);l.push({op:"remove",path:m,value:p}),c.unshift({op:n,path:m,value:p})}h++}),h=0,d.forEach(function(p){if(!f.has(p)){var m=u.concat([h]);l.push({op:n,path:m,value:p}),c.unshift({op:"remove",path:m,value:p})}h++})}(r,i,s,o)}},M:function(r,i,s,o){s.push({op:"replace",path:[],value:i===FQ?void 0:i}),o.push({op:"replace",path:[],value:r})}})}var Zfe,fx,LQ=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",nTt=typeof Map<"u",rTt=typeof Set<"u",ede=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",FQ=LQ?Symbol.for("immer-nothing"):((Zfe={})["immer-nothing"]=!0,Zfe),PC=LQ?Symbol.for("immer-draftable"):"__$immer_draftable",zl=LQ?Symbol.for("immer-state"):"__$immer_state",iTt={0:"Illegal state",1:"Immer drafts cannot have computed properties",2:"This object has been frozen and should not be mutated",3:function(e){return"Cannot use a proxy that has been revoked. Did you pass an object from inside an immer function to an async process? "+e},4:"An immer producer returned a new value *and* modified its draft. Either return a new value *or* modify the draft.",5:"Immer forbids circular references",6:"The first or second argument to `produce` must be a function",7:"The third argument to `produce` must be a function or undefined",8:"First argument to `createDraft` must be a plain object, an array, or an immerable object",9:"First argument to `finishDraft` must be a draft returned by `createDraft`",10:"The given draft is already finalized",11:"Object.defineProperty() cannot be used on an Immer draft",12:"Object.setPrototypeOf() cannot be used on an Immer draft",13:"Immer only supports deleting array indices",14:"Immer only supports setting array indices and the 'length' property",15:function(e){return"Cannot apply patch, path doesn't resolve: "+e},16:'Sets cannot have "replace" patches.',17:function(e){return"Unsupported patch operation: "+e},18:function(e){return"The plugin for '"+e+"' has not been loaded into Immer. To enable the plugin, import and call `enable"+e+"()` when initializing your application."},20:"Cannot use proxies if Proxy, Proxy.revocable or Reflect are not available",21:function(e){return"produce can only be called on things that are draftable: plain objects, arrays, Map, Set or classes that are marked with '[immerable]: true'. Got '"+e+"'"},22:function(e){return"'current' expects a draft, got: "+e},23:function(e){return"'original' expects a draft, got: "+e},24:"Patching reserved attributes like __proto__, prototype and constructor is not allowed"},sTt=""+Object.prototype.constructor,jQ=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,oTt=Object.getOwnPropertyDescriptors||function(e){var t={};return jQ(e).forEach(function(n){t[n]=Object.getOwnPropertyDescriptor(e,n)}),t},oV={},aV={get:function(e,t){if(t===zl)return e;var n=$v(e);if(!dI(n,t))return function(i,s,o){var a,u=Qfe(s,o);return u?"value"in u?u.value:(a=u.get)===null||a===void 0?void 0:a.call(i.k):void 0}(e,n,t);var r=n[t];return e.I||!sy(r)?r:r===g9(e.t,t)?(y9(e),e.o[t]=sV(e.A.h,r,e)):r},has:function(e,t){return t in $v(e)},ownKeys:function(e){return Reflect.ownKeys($v(e))},set:function(e,t,n){var r=Qfe($v(e),t);if(r!=null&&r.set)return r.set.call(e.k,n),!0;if(!e.P){var i=g9($v(e),t),s=i==null?void 0:i[zl];if(s&&s.t===n)return e.o[t]=n,e.D[t]=!1,!0;if(XSt(n,i)&&(n!==void 0||dI(e.t,t)))return!0;y9(e),iV(e)}return e.o[t]===n&&typeof n!="number"&&(n!==void 0||t in e.o)||(e.o[t]=n,e.D[t]=!0,!0)},deleteProperty:function(e,t){return g9(e.t,t)!==void 0||t in e.t?(e.D[t]=!1,y9(e),iV(e)):delete e.D[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var n=$v(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.i!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty:function(){qi(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){qi(12)}},L2={};cx(aV,function(e,t){L2[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),L2.deleteProperty=function(e,t){return{}.NODE_ENV!=="production"&&isNaN(parseInt(t))&&qi(13),L2.set.call(this,e,t,void 0)},L2.set=function(e,t,n){return{}.NODE_ENV!=="production"&&t!=="length"&&isNaN(parseInt(t))&&qi(14),aV.set.call(this,e[0],t,n,e[0])};var aTt=function(){function e(n){var r=this;this.g=ede,this.F=!0,this.produce=function(i,s,o){if(typeof i=="function"&&typeof s!="function"){var a=s;s=i;var u=r;return function(m){var g=this;m===void 0&&(m=a);for(var y=arguments.length,v=Array(y>1?y-1:0),b=1;b<y;b++)v[b-1]=arguments[b];return u.produce(m,function(w){var E;return(E=s).call.apply(E,[g,w].concat(v))})}}var l;if(typeof s!="function"&&qi(6),o!==void 0&&typeof o!="function"&&qi(7),sy(i)){var c=Kfe(r),f=sV(r,i,void 0),d=!0;try{l=s(f),d=!1}finally{d?D$(c):rV(c)}return typeof Promise<"u"&&l instanceof Promise?l.then(function(m){return p9(c,o),m9(m,c)},function(m){throw D$(c),m}):(p9(c,o),m9(l,c))}if(!i||typeof i!="object"){if((l=s(i))===void 0&&(l=i),l===FQ&&(l=void 0),r.F&&$Q(l,!0),o){var h=[],p=[];gh("Patches").M(i,l,h,p),o(h,p)}return l}qi(21,i)},this.produceWithPatches=function(i,s){if(typeof i=="function")return function(l){for(var c=arguments.length,f=Array(c>1?c-1:0),d=1;d<c;d++)f[d-1]=arguments[d];return r.produceWithPatches(l,function(h){return i.apply(void 0,[h].concat(f))})};var o,a,u=r.produce(i,s,function(l,c){o=l,a=c});return typeof Promise<"u"&&u instanceof Promise?u.then(function(l){return[l,o,a]}):[u,o,a]},typeof(n==null?void 0:n.useProxies)=="boolean"&&this.setUseProxies(n.useProxies),typeof(n==null?void 0:n.autoFreeze)=="boolean"&&this.setAutoFreeze(n.autoFreeze)}var t=e.prototype;return t.createDraft=function(n){sy(n)||qi(8),tb(n)&&(n=eTt(n));var r=Kfe(this),i=sV(this,n,void 0);return i[zl].C=!0,rV(r),i},t.finishDraft=function(n,r){var i=n&&n[zl];({}).NODE_ENV!=="production"&&(i&&i.C||qi(9),i.I&&qi(10));var s=i.A;return p9(s,r),m9(void 0,s)},t.setAutoFreeze=function(n){this.F=n},t.setUseProxies=function(n){n&&!ede&&qi(20),this.g=n},t.applyPatches=function(n,r){var i;for(i=r.length-1;i>=0;i--){var s=r[i];if(s.path.length===0&&s.op==="replace"){n=s.value;break}}i>-1&&(r=r.slice(i+1));var o=gh("Patches").$;return tb(n)?o(n,r):this.produce(n,function(a){return o(a,r)})},e}(),Vl=new aTt,uTt=Vl.produce;Vl.produceWithPatches.bind(Vl);Vl.setAutoFreeze.bind(Vl);Vl.setUseProxies.bind(Vl);Vl.applyPatches.bind(Vl);Vl.createDraft.bind(Vl);Vl.finishDraft.bind(Vl);function lTt(e,t={}){const{artifact:n=void 0,metadata:r=void 0,rootLabel:i="Root"}=t,s=YSt({state:e,label:i,initialArtifact:n,initialMetadata:r}),o={nodes:{[s.id]:s},root:s.id,current:s.id};return wSt({name:"provenance-graph",initialState:o,reducers:{addMetadata(a,u){const{id:l,meta:c}=u.payload,f=a.nodes[l].meta,d=Object.keys(c).reduce((h,p)=>(h[p]||(h[p]=[]),h[p].push({type:p,id:ph.get(),val:c[p],createdOn:Date.now()}),h),f);a.nodes[u.payload.id].meta=d},addArtifact(a,u){a.nodes[u.payload.id].artifacts.push({id:ph.get(),createdOn:Date.now(),val:u.payload.artifact})},changeCurrent(a,u){a.current=u.payload},addNode(a,{payload:u}){a.nodes[u.id]=u,a.nodes[u.parent].children.push(u.id),a.current=u.id},load(a,{payload:u}){return u}}})}function cTt(e){const t=new Map,{reducer:n,actions:r,getInitialState:i}=lTt(e),s=zSt();s.startListening({matcher:zfe(r.changeCurrent,r.addNode),effect:(a,u)=>{u.cancelActiveListeners(),t.forEach(l=>{const c=zfe(r.addNode)(a),{skipOnNew:f}=l.config;f&&c||l.func(c?"new":"traversal")})}});const o=ySt({reducer:n,middleware:a=>a().prepend(s.middleware)});return{initialState:i(),get backend(){return o.getState()},get current(){return o.getState().nodes[o.getState().current]},get root(){return o.getState().nodes[o.getState().root]},currentChange(a,u){const l={id:ph.get(),func:a,config:u};return t.set(l.id,l),()=>t.delete(l.id)},update:o.dispatch,...r}}/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2022 Joachim Wester
 * MIT licensed
 */var fTt=globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},e(t,n)};return function(t,n){e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),dTt=Object.prototype.hasOwnProperty;function uV(e,t){return dTt.call(e,t)}function lV(e){if(Array.isArray(e)){for(var t=new Array(e.length),n=0;n<t.length;n++)t[n]=""+n;return t}if(Object.keys)return Object.keys(e);var r=[];for(var i in e)uV(e,i)&&r.push(i);return r}function Lu(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}}function cV(e){for(var t=0,n=e.length,r;t<n;){if(r=e.charCodeAt(t),r>=48&&r<=57){t++;continue}return!1}return!0}function Mv(e){return e.indexOf("/")===-1&&e.indexOf("~")===-1?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function Zke(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function fV(e){if(e===void 0)return!0;if(e){if(Array.isArray(e)){for(var t=0,n=e.length;t<n;t++)if(fV(e[t]))return!0}else if(typeof e=="object"){for(var r=lV(e),i=r.length,s=0;s<i;s++)if(fV(e[r[s]]))return!0}}return!1}function tde(e,t){var n=[e];for(var r in t){var i=typeof t[r]=="object"?JSON.stringify(t[r],null,2):t[r];typeof i<"u"&&n.push(r+": "+i)}return n.join(`
`)}var eRe=function(e){fTt(t,e);function t(n,r,i,s,o){var a=this.constructor,u=e.call(this,tde(n,{name:r,index:i,operation:s,tree:o}))||this;return u.name=r,u.index=i,u.operation=s,u.tree=o,Object.setPrototypeOf(u,a.prototype),u.message=tde(n,{name:r,index:i,operation:s,tree:o}),u}return t}(Error),Bi=eRe,hTt=Lu,Dw={add:function(e,t,n){return e[t]=this.value,{newDocument:n}},remove:function(e,t,n){var r=e[t];return delete e[t],{newDocument:n,removed:r}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:function(e,t,n){var r=$$(n,this.path);r&&(r=Lu(r));var i=C1(n,{op:"remove",path:this.from}).removed;return C1(n,{op:"add",path:this.path,value:i}),{newDocument:n,removed:r}},copy:function(e,t,n){var r=$$(n,this.from);return C1(n,{op:"add",path:this.path,value:Lu(r)}),{newDocument:n}},test:function(e,t,n){return{newDocument:n,test:hI(e[t],this.value)}},_get:function(e,t,n){return this.value=e[t],{newDocument:n}}},pTt={add:function(e,t,n){return cV(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:n,index:t}},remove:function(e,t,n){var r=e.splice(t,1);return{newDocument:n,removed:r[0]}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:Dw.move,copy:Dw.copy,test:Dw.test,_get:Dw._get};function $$(e,t){if(t=="")return e;var n={op:"_get",path:t};return C1(e,n),n.value}function C1(e,t,n,r,i,s){if(n===void 0&&(n=!1),r===void 0&&(r=!0),i===void 0&&(i=!0),s===void 0&&(s=0),n&&(typeof n=="function"?n(t,0,e,t.path):M$(t,0)),t.path===""){var o={newDocument:e};if(t.op==="add")return o.newDocument=t.value,o;if(t.op==="replace")return o.newDocument=t.value,o.removed=e,o;if(t.op==="move"||t.op==="copy")return o.newDocument=$$(e,t.from),t.op==="move"&&(o.removed=e),o;if(t.op==="test"){if(o.test=hI(e,t.value),o.test===!1)throw new Bi("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o.newDocument=e,o}else{if(t.op==="remove")return o.removed=e,o.newDocument=null,o;if(t.op==="_get")return t.value=e,o;if(n)throw new Bi("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",s,t,e);return o}}else{r||(e=Lu(e));var a=t.path||"",u=a.split("/"),l=e,c=1,f=u.length,d=void 0,h=void 0,p=void 0;for(typeof n=="function"?p=n:p=M$;;){if(h=u[c],h&&h.indexOf("~")!=-1&&(h=Zke(h)),i&&(h=="__proto__"||h=="prototype"&&c>0&&u[c-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&d===void 0&&(l[h]===void 0?d=u.slice(0,c).join("/"):c==f-1&&(d=t.path),d!==void 0&&p(t,0,e,d)),c++,Array.isArray(l)){if(h==="-")h=l.length;else{if(n&&!cV(h))throw new Bi("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",s,t,e);cV(h)&&(h=~~h)}if(c>=f){if(n&&t.op==="add"&&h>l.length)throw new Bi("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",s,t,e);var o=pTt[t.op].call(t,l,h,e);if(o.test===!1)throw new Bi("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o}}else if(c>=f){var o=Dw[t.op].call(t,l,h,e);if(o.test===!1)throw new Bi("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o}if(l=l[h],n&&c<f&&(!l||typeof l!="object"))throw new Bi("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",s,t,e)}}}function p4(e,t,n,r,i){if(r===void 0&&(r=!0),i===void 0&&(i=!0),n&&!Array.isArray(t))throw new Bi("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");r||(e=Lu(e));for(var s=new Array(t.length),o=0,a=t.length;o<a;o++)s[o]=C1(e,t[o],n,!0,i,o),e=s[o].newDocument;return s.newDocument=e,s}function mTt(e,t,n){var r=C1(e,t);if(r.test===!1)throw new Bi("Test operation failed","TEST_OPERATION_FAILED",n,t,e);return r.newDocument}function M$(e,t,n,r){if(typeof e!="object"||e===null||Array.isArray(e))throw new Bi("Operation is not an object","OPERATION_NOT_AN_OBJECT",t,e,n);if(Dw[e.op]){if(typeof e.path!="string")throw new Bi("Operation `path` property is not a string","OPERATION_PATH_INVALID",t,e,n);if(e.path.indexOf("/")!==0&&e.path.length>0)throw new Bi('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",t,e,n);if((e.op==="move"||e.op==="copy")&&typeof e.from!="string")throw new Bi("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&e.value===void 0)throw new Bi("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&fV(e.value))throw new Bi("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",t,e,n);if(n){if(e.op=="add"){var i=e.path.split("/").length,s=r.split("/").length;if(i!==s+1&&i!==s)throw new Bi("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",t,e,n)}else if(e.op==="replace"||e.op==="remove"||e.op==="_get"){if(e.path!==r)throw new Bi("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",t,e,n)}else if(e.op==="move"||e.op==="copy"){var o={op:"_get",path:e.from,value:void 0},a=tRe([o],n);if(a&&a.name==="OPERATION_PATH_UNRESOLVABLE")throw new Bi("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",t,e,n)}}}else throw new Bi("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",t,e,n)}function tRe(e,t,n){try{if(!Array.isArray(e))throw new Bi("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)p4(Lu(t),Lu(e),n||!0);else{n=n||M$;for(var r=0;r<e.length;r++)n(e[r],r,t,void 0)}}catch(i){if(i instanceof Bi)return i;throw i}}function hI(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){var n=Array.isArray(e),r=Array.isArray(t),i,s,o;if(n&&r){if(s=e.length,s!=t.length)return!1;for(i=s;i--!==0;)if(!hI(e[i],t[i]))return!1;return!0}if(n!=r)return!1;var a=Object.keys(e);if(s=a.length,s!==Object.keys(t).length)return!1;for(i=s;i--!==0;)if(!t.hasOwnProperty(a[i]))return!1;for(i=s;i--!==0;)if(o=a[i],!hI(e[o],t[o]))return!1;return!0}return e!==e&&t!==t}const gTt=Object.freeze(Object.defineProperty({__proto__:null,JsonPatchError:Bi,_areEquals:hI,applyOperation:C1,applyPatch:p4,applyReducer:mTt,deepClone:hTt,getValueByPointer:$$,validate:tRe,validator:M$},Symbol.toStringTag,{value:"Module"}));/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2021 Joachim Wester
 * MIT license
 */var BQ=new WeakMap,yTt=function(){function e(t){this.observers=new Map,this.obj=t}return e}(),vTt=function(){function e(t,n){this.callback=t,this.observer=n}return e}();function bTt(e){return BQ.get(e)}function _Tt(e,t){return e.observers.get(t)}function wTt(e,t){e.observers.delete(t.callback)}function ETt(e,t){t.unobserve()}function xTt(e,t){var n=[],r,i=bTt(e);if(!i)i=new yTt(e),BQ.set(e,i);else{var s=_Tt(i,t);r=s&&s.observer}if(r)return r;if(r={},i.value=Lu(e),t){r.callback=t,r.next=null;var o=function(){dV(r)},a=function(){clearTimeout(r.next),r.next=setTimeout(o)};typeof window<"u"&&(window.addEventListener("mouseup",a),window.addEventListener("keyup",a),window.addEventListener("mousedown",a),window.addEventListener("keydown",a),window.addEventListener("change",a))}return r.patches=n,r.object=e,r.unobserve=function(){dV(r),clearTimeout(r.next),wTt(i,r),typeof window<"u"&&(window.removeEventListener("mouseup",a),window.removeEventListener("keyup",a),window.removeEventListener("mousedown",a),window.removeEventListener("keydown",a),window.removeEventListener("change",a))},i.observers.set(t,new vTt(t,r)),r}function dV(e,t){t===void 0&&(t=!1);var n=BQ.get(e.object);UQ(n.value,e.object,e.patches,"",t),e.patches.length&&p4(n.value,e.patches);var r=e.patches;return r.length>0&&(e.patches=[],e.callback&&e.callback(r)),r}function UQ(e,t,n,r,i){if(t!==e){typeof t.toJSON=="function"&&(t=t.toJSON());for(var s=lV(t),o=lV(e),a=!1,u=o.length-1;u>=0;u--){var l=o[u],c=e[l];if(uV(t,l)&&!(t[l]===void 0&&c!==void 0&&Array.isArray(t)===!1)){var f=t[l];typeof c=="object"&&c!=null&&typeof f=="object"&&f!=null&&Array.isArray(c)===Array.isArray(f)?UQ(c,f,n,r+"/"+Mv(l),i):c!==f&&(i&&n.push({op:"test",path:r+"/"+Mv(l),value:Lu(c)}),n.push({op:"replace",path:r+"/"+Mv(l),value:Lu(f)}))}else Array.isArray(e)===Array.isArray(t)?(i&&n.push({op:"test",path:r+"/"+Mv(l),value:Lu(c)}),n.push({op:"remove",path:r+"/"+Mv(l)}),a=!0):(i&&n.push({op:"test",path:r,value:e}),n.push({op:"replace",path:r,value:t}))}if(!(!a&&s.length==o.length))for(var u=0;u<s.length;u++){var l=s[u];!uV(e,l)&&t[l]!==void 0&&n.push({op:"add",path:r+"/"+Mv(l),value:Lu(t[l])})}}}function nRe(e,t,n){n===void 0&&(n=!1);var r=[];return UQ(e,t,r,"",n),r}const STt=Object.freeze(Object.defineProperty({__proto__:null,compare:nRe,generate:dV,observe:xTt,unobserve:ETt},Symbol.toStringTag,{value:"Module"}));Object.assign({},gTt,STt,{JsonPatchError:eRe,deepClone:Lu,escapePathComponent:Mv,unescapePathComponent:Zke});var F2=(e=>(e.TRAVERSAL_START="Traversal_Start",e.TRAVERSAL_END="Traversal_End",e))(F2||{});function PP(e,t){const n=e.state;if(n.type==="checkpoint")return n.val;const{checkpointRef:r}=n,i=t[r],s=rRe(i,e,t);s.shift();const o=s.map(u=>t[u]).map(u=>u.state.val).reduce((u,l)=>[...u,...l],[]),a=PP(i,t);return p4(a,Lu(o),!0,!1).newDocument}function TTt(e,t){const n=Object.keys(e).length;return new Set(t.map(r=>r.path.split("/")[0])).size<n/2?"patch":"checkpoint"}function zQ({registry:e,initialState:t}){let n=!1;const r=VSt(),i=cTt(t);function s(c){return i.backend.nodes[c]}r.listen(F2.TRAVERSAL_START,()=>{n=!0}),r.listen(F2.TRAVERSAL_END,()=>{n=!1});const o={add(c,f=i.current.id){i.update(i.addMetadata({id:f,meta:c}))},latestOfType(c,f=i.current.id){var d;return(d=i.backend.nodes[f].meta[c])==null?void 0:d.at(-1)},allOfType(c,f=i.current.id){return i.backend.nodes[f].meta[c]},latest(c=i.current.id){const f=i.backend.nodes[c].meta,d=Object.keys(f).reduce((h,p)=>{const m=f[p].at(-1);return m&&(h[p]=m),h},{});return Object.keys(d).length>0?d:void 0},all(c=i.current.id){return i.backend.nodes[c].meta},types(c=i.current.id){return Object.keys(i.backend.nodes[c].meta)}},a={add(c,f=i.current.id){i.update(i.addArtifact({id:f,artifact:c}))},latest(c=i.current.id){return i.backend.nodes[c].artifacts.at(-1)},all(c=i.current.id){return i.backend.nodes[c].artifacts}},u={add(c,f=i.current.id){o.add({annotation:c},f)},latest(c=i.current.id){var f;return(f=o.latestOfType("annotation",c))==null?void 0:f.val},all(c=i.current.id){var f;return(f=o.allOfType("annotation",c))==null?void 0:f.map(d=>d.val)}},l={add(c=i.current.id){o.add({bookmark:!0},c)},remove(c=i.current.id){o.add({bookmark:!1},c)},is(c=i.current.id){var f;return!!((f=o.latestOfType("bookmark",c))!=null&&f.val)},toggle(c=i.current.id){l.is(c)?l.remove(c):l.add(c)}};return{registry:e,get isTraversing(){return n},getState(c=i.current){return PP(c,i.backend.nodes)},graph:i,get current(){return i.current},get root(){return i.root},record({label:c,state:f,sideEffects:d,eventType:h,onlySideEffects:p=!1}){let m=null,g=null;const y=PP(this.current,this.graph.backend.nodes);if(p)g={type:"checkpoint",val:f};else{const v=nRe(y,f);if(TTt(f,v)==="checkpoint")g={type:"checkpoint",val:f};else{const b=this.current.state.type==="checkpoint"?this.current.id:this.current.state.checkpointRef;g={type:"patch",val:v,checkpointRef:b}}}if(!g)throw new Error(`Could not calculate new state. Previous state is: ${JSON.stringify(this.current.state,null,2)}`);if(m=KSt({label:c,state:g,parent:this.current,sideEffects:d,event:h}),!m)throw new Error("State Node creation failed!");i.update(i.addNode(m))},async apply(c,f){const d=e.get(f.type),h=PP(this.current,this.graph.backend.nodes);if(d.config.hasSideEffects){const{do:p=f,undo:m}=d.func(f.payload);this.record({label:c,state:h,sideEffects:{do:[p],undo:[m]},eventType:d.config.eventType})}else{const p=d.func(h,f.payload);this.record({label:c,state:p,sideEffects:{do:[],undo:[]},eventType:d.config.eventType})}},async to(c){r.fire(F2.TRAVERSAL_START);const f=rRe(i.current,i.backend.nodes[c],i.backend.nodes),d=[];for(let h=0;h<f.length-1;++h){const p=s(f[h]),m=s(f[h+1]);ATt(p,m)?mh(p)&&d.push(...p.sideEffects.undo):mh(m)&&d.push(...m.sideEffects.do)}for(const h of d){const p=e.get(h.type).func;await p(h.payload)}i.update(i.changeCurrent(c)),r.fire(F2.TRAVERSAL_END)},undo(){const{current:c}=i;return mh(c)?this.to(c.parent):Promise.resolve(console.warn("Already at root!"))},redo(c="latest"){const{current:f}=i;return f.children.length>0?this.to(f.children[c==="oldest"?0:f.children.length-1]):Promise.resolve(console.warn("Already at latest in this branch!"))},currentChange(c,f=!1){return i.currentChange(c,{skipOnNew:f})},done(){console.log("Setup later for URL sharing.")},tree(){return iRe(i.root,i.backend.nodes)},on(c,f){r.listen(c,f)},export(){return JSON.stringify(i.backend)},exportObject(){return JSON.parse(JSON.stringify(i.backend))},import(c){const f=JSON.parse(c),d=f.current;f.current=f.root,i.update(i.load(f)),this.to(d)},importObject(c){const f=c.current;c.current=c.root,i.update(i.load(c)),this.to(f)},metadata:o,artifact:a,annotations:u,bookmarks:l}}function CTt(e,t,n){let[r,i]=[e,t];r.level>i.level&&([r,i]=[i,r]);let s=i.level-r.level;for(;mh(i)&&s!==0;)i=n[i.parent],s-=1;if(r.id===i.id)return r.id;for(;r.id!==i.id;)mh(r)&&(r=n[r.parent]),mh(i)&&(i=n[i.parent]);return r.id}function rRe(e,t,n){const r=CTt(e,t,n),i=n[r],s=[],o=[];let[a,u]=[e,t];for(;a.id!==i.id;)s.push(a),mh(a)&&(a=n[a.parent]);for(s.push(a);u.id!==i.id;)o.push(u),mh(u)&&(u=n[u.parent]);const l=o.reverse();return[...s,...l].map(c=>c.id)}function ATt(e,t){if(mh(e)&&e.parent===t.id)return!0;if(mh(t)&&t.parent===e.id)return!1;throw new Error("Incorrect use of function. Nodes are not connected to each other.")}function iRe(e,t){return{...e,children:e.children.map(n=>iRe(t[n],t)),name:`${e.label}`}}tTt();function ITt(e){return e.length===2?uTt(e):e}class qk{static create(){return new qk}constructor(){this.registry=new Map}has(t){return this.registry.has(t)}register(t,n,r){const i=n.length===2;if(n.length>2)throw new Error("Incorrect action function signature. Action function can only have two arguments at most!");if(this.has(t))throw new Error(`Already registered: ${t}`);const{label:s=t,eventType:o=t}=r||{};return this.registry.set(t,{func:ITt(n),config:{hasSideEffects:!i,label:typeof s=="string"?()=>s:s,eventType:o}}),hh(t)}get(t){const n=this.registry.get(t);if(!n)throw new Error(`Not registered: ${t}`);return n}}var kTt="Expected a function",nde=NaN,RTt="[object Symbol]",NTt=/^\s+|\s+$/g,DTt=/^[-+]0x[0-9a-f]+$/i,PTt=/^0b[01]+$/i,OTt=/^0o[0-7]+$/i,$Tt=parseInt,MTt=typeof to=="object"&&to&&to.Object===Object&&to,LTt=typeof self=="object"&&self&&self.Object===Object&&self,FTt=MTt||LTt||Function("return this")(),jTt=Object.prototype,BTt=jTt.toString,UTt=Math.max,zTt=Math.min,v9=function(){return FTt.Date.now()};function VTt(e,t,n){var r,i,s,o,a,u,l=0,c=!1,f=!1,d=!0;if(typeof e!="function")throw new TypeError(kTt);t=rde(t)||0,hV(n)&&(c=!!n.leading,f="maxWait"in n,s=f?UTt(rde(n.maxWait)||0,t):s,d="trailing"in n?!!n.trailing:d);function h(T){var S=r,C=i;return r=i=void 0,l=T,o=e.apply(C,S),o}function p(T){return l=T,a=setTimeout(y,t),c?h(T):o}function m(T){var S=T-u,C=T-l,A=t-S;return f?zTt(A,s-C):A}function g(T){var S=T-u,C=T-l;return u===void 0||S>=t||S<0||f&&C>=s}function y(){var T=v9();if(g(T))return v(T);a=setTimeout(y,m(T))}function v(T){return a=void 0,d&&r?h(T):(r=i=void 0,o)}function b(){a!==void 0&&clearTimeout(a),l=0,r=u=i=a=void 0}function w(){return a===void 0?o:v(v9())}function E(){var T=v9(),S=g(T);if(r=arguments,i=this,u=T,S){if(a===void 0)return p(u);if(f)return a=setTimeout(y,t),h(u)}return a===void 0&&(a=setTimeout(y,t)),o}return E.cancel=b,E.flush=w,E}function hV(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}function HTt(e){return!!e&&typeof e=="object"}function qTt(e){return typeof e=="symbol"||HTt(e)&&BTt.call(e)==RTt}function rde(e){if(typeof e=="number")return e;if(qTt(e))return nde;if(hV(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=hV(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=e.replace(NTt,"");var n=PTt.test(e);return n||OTt.test(e)?$Tt(e.slice(2),n?2:8):DTt.test(e)?nde:+e}var WTt=VTt;const ff=Kl(WTt);function sRe({yScale:e,xRange:t,horizontalPosition:n,label:r}){const i=I.useMemo(()=>e.ticks(5).map(o=>({value:o,yOffset:e(o)})),[e]),s=I.useMemo(()=>Fy(".2s"),[]);return _.jsxs(_.Fragment,{children:[_.jsx("g",{transform:`translate(${n-60}, ${e.range()[0]}) rotate(-90)`,children:_.jsx("foreignObject",{width:Math.abs(e.range()[1]-e.range()[0]),height:20,children:_.jsx(Pc,{children:_.jsx(ls,{gap:3,children:_.jsx(Xe,{size:"14px",style:{color:"#878E95"},children:r})})})})}),_.jsx("path",{transform:`translate(${n}, 0)`,d:["M",0,e.range()[0],"V",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}),_.jsx("path",{transform:`translate(${t[1]}, 0)`,d:["M",0,e.range()[0],"V",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}),i.map(({value:o,yOffset:a})=>_.jsxs("g",{transform:`translate(${n}, ${a})`,children:[_.jsx("line",{x2:"-6",stroke:"currentColor"}),_.jsx("line",{x2:`${t[1]-t[0]}`,stroke:`${o===0?"black":"lightgray"}`}),_.jsx("text",{style:{dominantBaseline:"middle",fontSize:"10px",textAnchor:"end",transform:"translateX(-8px)",fill:"black",font:"Roboto"},children:s(o)},o)]},o))]})}const GTt=Object.freeze(Object.defineProperty({__proto__:null,YAxis:sRe},Symbol.toStringTag,{value:"Module"})),b9=15;function oRe({xScale:e,yScale:t,setBrushedSpace:n,params:r,data:i,brushState:s,isSelect:o=!0}){const[a,u]=I.useState([0,0]),[l,c]=I.useState(!1);return I.useEffect(()=>{const f=rs("#scatterSvgBrushStudy");if(f){const d=f.node().getBoundingClientRect();f.on("mousemove",h=>{const p=[h.clientX-d.x,h.clientY-d.y];if(u(p),l){const m=i.filter(g=>Math.abs(e(g[r.x])-p[0])<b9&&Math.abs(t(g[r.y])-p[1])<b9);if(h.ctrlKey||h.metaKey||!o){const g=new Set(s.ids);m.forEach(v=>{g.has(v[r.ids])&&g.delete(v[r.ids])});const y=Array.from(g);n([[a[0],a[1]],[a[0],a[1]]],e,t,y.length===0?"clear":"drag",y)}else{const g=Array.from(new Set([...s.ids,...m.map(y=>y[r.ids])]));g.length>0&&n([[a[0],a[1]],[a[0],a[1]]],e,t,"drag",g)}}}),f.on("mousedown",h=>{c(!0),h.stopPropagation(),h.preventDefault()}),f.on("mouseup",()=>{c(!1)})}},[a,s.ids,i,l,o,r,n,e,t]),_.jsx("circle",{style:{cursor:l?"pointer":"default"},r:b9,fill:"darkgray",opacity:.5,cx:a[0],cy:a[1]})}const YTt=Object.freeze(Object.defineProperty({__proto__:null,Paintbrush:oRe},Symbol.toStringTag,{value:"Module"})),yi={top:15,left:100,right:15,bottom:70};function pV({setFilteredTable:e,brushState:t,setBrushedSpace:n,brushType:r,params:i,data:s,brushedPoints:o}){const[a,{height:u,width:l}]=E1(),[c]=E1(),[f]=E1(),[d,h]=I.useState(!0),p=I.useMemo(()=>l-yi.left-yi.right,[l]),m=I.useMemo(()=>u-yi.top-yi.bottom,[u]),g=I.useMemo(()=>{const k=Array.from(new Set(s.map(N=>N[i.category])));return Wb(b2e).domain(k)},[s,i.category]),{xMin:y,yMin:v,xMax:b,yMax:w}=I.useMemo(()=>{const k=s.map(M=>+M[i.x]).filter(M=>M!==null),[N,O]=P7(k),P=s.map(M=>+M[i.y]).filter(M=>M!==null),[$,F]=P7(P);return{xMin:N,xMax:O,yMin:$,yMax:F}},[s,i.x,i.y]),E=I.useMemo(()=>{const k=b-y;return p<=0?null:i.dataType==="date"?QA([yi.left,p+yi.left]).domain([new Date("2014-12-20"),new Date("2016-01-10")]):Yf([yi.left,p+yi.left]).domain([y-k/10,b+k/10]).nice()},[i.dataType,p,b,y]),T=I.useMemo(()=>{const k=w-v;return m<=0?null:Yf([m+yi.top,yi.top]).domain([v-k/10,w+k/10]).nice()},[m,w,v]),S=I.useMemo(()=>{if(!E||!T)return()=>null;if(r==="Axis Selection"){const k=Hft().extent([[yi.left,yi.top+m-5],[yi.left+p,yi.top+m+5]]).on("brush end",O=>{O.sourceEvent!==void 0&&n([[O.selection[0],null],[O.selection[1],null]],E,T,O.mode)}),N=qft().extent([[yi.left-5,yi.top],[yi.left+5,yi.top+m]]).on("brush end",O=>{O.sourceEvent!==void 0&&n([[null,O.selection[0]],[null,O.selection[1]]],E,T,O.mode)});return c.current&&f.current&&(rs(f.current).call(N),rs(c.current).call(k),t.hasBrush||(rs(f.current).call(N.move,[T(w),T(v)]),rs(c.current).call(k.move,[E(new Date("2015-01-02")),E(new Date("2015-12-31"))]),n([[E(new Date("2015-01-02")),T(w)],[E(new Date("2015-12-31")),T(v)]],E,T,"drag"))),()=>{rs(f.current).call(N.move,[T(w),T(v)]),rs(c.current).call(k.move,[E(new Date("2015-01-02")),E(new Date("2015-12-31"))]),n([[E(new Date("2015-01-02")),T(w)],[E(new Date("2015-12-31")),T(v)]],E,T,"clear")}}if(r==="Rectangular Selection"){const k=Wft().extent([[yi.left,yi.top],[yi.left+p,yi.top+m]]).on("brush",N=>{N.sourceEvent!==void 0&&n([[N.selection[0][0],N.selection[0][1]],[N.selection[1][0],N.selection[1][1]]],E,T,N.mode)}).on("end",N=>{N.selection===null&&N.sourceEvent!==void 0&&(rs(a.current).call(k.move,null),e(null))});return rs(a.current).call(k),()=>{rs(a.current).call(k.move,null),n([[null,null],[null,null]],E,T,"clear")}}return r==="Slider Selection"?(t.hasBrush||n([[E(y),T(w)],[E(b),T(v)]],E,T,null),()=>n([[E(y),T(w)],[E(b),T(v)]],E,T,"clear")):r==="Paintbrush Selection"?()=>n([[E(y),T(w)],[E(b),T(v)]],E,T,"clear",[]):()=>null},[t.hasBrush,r,c,f,m,a,n,e,p,b,y,E,w,v,T]),C=I.useMemo(()=>o.length===0?null:new Set(o),[o]),A=I.useMemo(()=>!E||!T?null:s.map((k,N)=>{if(k[i.x]===null||k[i.y]===null)return null;const O=i.dataType==="date"?E(new Date(k[i.x])):E(k[i.x]);return _.jsx("circle",{opacity:C&&!C.has(k[i.ids])?.3:1,r:3,fill:C&&!C.has(k[i.ids])?"lightgray":g(k[i.category]),cx:O,cy:T(k[i.y])},N)}),[C,g,s,i.category,i.dataType,i.ids,i.x,i.y,E,T]);return I.useEffect(()=>{r==="Axis Selection"&&Mlt(".handle").style("fill","darkgrey")},[t,r]),_.jsxs(Rf,{children:[_.jsxs(ls,{children:[_.jsx(fn,{ml:60,size:"compact-sm",style:{width:"130px"},disabled:o.length===0,onClick:()=>{e(null),S==null||S()},children:"Clear Selection"}),i.brushType==="Paintbrush Selection"?_.jsx(hY,{defaultChecked:!0,value:d?"Select":"De-Select",onChange:k=>h(k==="Select"),data:[{label:"Select",value:"Select"},{label:"De-Select",value:"De-Select",disabled:o.length===0}]}):null]}),_.jsxs(ls,{style:{width:"100%",height:"100%"},wrap:"nowrap",children:[_.jsxs("svg",{id:"scatterSvgBrushStudy",ref:a,style:{height:"500px",width:i.brushType==="Axis Selection"?"800px":"530px",fontFamily:'BlinkMacSystemFont, -apple-system, "Segoe UI", "Roboto", "Oxygen", "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue", "Helvetica", "Arial", sans-serif'},children:[E&&T?_.jsxs("g",{children:[_.jsx(sRe,{yScale:T,label:i.y,horizontalPosition:yi.left,xRange:E.range()}),_.jsx(tX,{xScale:E,yRange:T.range(),isDate:i.dataType==="date",vertPosition:m+yi.top,label:i.x,ticks:E.ticks(i.brushType==="Axis Selection"?12:5).map(k=>({value:k.toString(),offset:E(k)}))})]}):null,A,_.jsx("g",{id:"brushXRef",ref:c}),_.jsx("g",{id:"brushYRef",ref:f}),E&&T&&r==="Paintbrush Selection"?_.jsx(oRe,{brushState:t,setBrushedSpace:n,params:i,data:s,isSelect:d,xScale:E,yScale:T}):null]}),r==="Slider Selection"&&E&&T?_.jsxs(Rf,{style:{flexGrow:1},gap:50,children:[_.jsxs(Rf,{gap:0,children:[_.jsx(Xe,{children:i.x}),_.jsx(NA,{minRange:1,label:null,min:E.domain()[0],max:E.domain()[1],labelAlwaysOn:!1,onChange:k=>{n([[E(k[0]),t.y1],[E(k[1]),t.y2]],E,T,"drag")},style:{width:"300px"},marks:E.ticks(5).map(k=>({value:k,label:k})),value:[E.invert(t.x1),E.invert(t.x2)]})]}),_.jsxs(Rf,{gap:0,children:[_.jsx(Xe,{children:i.y}),_.jsx(NA,{minRange:1,label:null,min:T.domain()[0],max:T.domain()[1],onChange:k=>{n([[t.x1,T(k[1])],[t.x2,T(k[0])]],E,T,"drag")},style:{width:"300px"},marks:T.ticks(5).map(k=>({value:k,label:k})),value:[T.invert(t.y2),T.invert(t.y1)]})]})]}):null]})]})}const KTt=Object.freeze(Object.defineProperty({__proto__:null,Scatter:pV,default:pV},Symbol.toStringTag,{value:"Module"}));function ide({parameters:e,setAnswer:t}){const[n,r]=I.useState(null),[i,s]=I.useState({hasBrush:!1,x1:0,y1:0,x2:0,y2:0,ids:[]}),[o,a]=I.useState(null);I.useEffect(()=>{CK(`./data/${e.dataset}.csv`).then(g=>{a(g)})},[e]);const u=I.useMemo(()=>o?Fxt(o):null,[o]),{actions:l,trrack:c}=I.useMemo(()=>{const g=qk.create(),y=g.register("brush",(T,S)=>(T.all={brush:S},T)),v=g.register("brushMove",(T,S)=>(T.all={brush:S},T)),b=g.register("brushResize",(T,S)=>(T.all={brush:S},T)),w=g.register("brushClear",(T,S)=>(T.all={brush:S},T)),E=zQ({registry:g,initialState:{all:{hasBrush:!1,x1:null,x2:null,y1:null,y2:null,ids:[]}}});return{actions:{brush:y,brushMove:v,brushResize:b,clearBrush:w},trrack:E}},[]),f=I.useCallback((g,y)=>{g==="drag"?c.apply("Move Brush",l.brushMove(y)):g==="handle"&&c.apply("Brush",l.brush(y))},[l,c]),d=I.useMemo(()=>ff(f,100,{maxWait:100}),[f]),h=I.useCallback((g,y,v,b,w)=>{if(!y||!v)return;const E=y.invert(g[0][0]||i.x1),T=y.invert(g[1][0]||i.x2),S=v.invert(g[1][1]||i.y2),C=v.invert(g[0][1]||i.y1);let A=null;if(b==="clear")A=u;else if(w){const N=new Set(w);A=u.filter(o9(O=>N.has(O[e.ids])))}else e.brushType==="Axis Selection"?A=u.filter(o9(N=>new Date(N[e.x])>=new Date(E)&&new Date(N[e.x])<=new Date(T)&&N[e.y]>=S&&N[e.y]<=C)):A=u.filter(o9(N=>N[e.x]>=E&&N[e.x]<=T&&N[e.y]>=S&&N[e.y]<=C));const k={x1:g[0][0]||(i==null?void 0:i.x1)||0,x2:g[1][0]||(i==null?void 0:i.x2)||0,y1:g[0][1]||(i==null?void 0:i.y1)||0,y2:g[1][1]||(i==null?void 0:i.y2)||0,hasBrush:b!=="clear",ids:b!=="clear"?A==null?void 0:A.array("id"):[]};s(k),b==="drag"||b==="handle"?d(b,k):b==="clear"&&c.apply("Clear Brush",l.clearBrush(k)),r(A),t({status:!0,provenanceGraph:c.graph.backend,answers:{}})},[i,u,e,c,t,d,l]),p=I.useMemo(()=>n?n==null?void 0:n.groupby(e.category).count():u?u==null?void 0:u.groupby(e.category).count():null,[n,u,e.category]),m=I.useCallback(g=>{r(g)},[]);return o?_.jsxs(Rf,{gap:"xs",children:[_.jsx(pV,{brushedPoints:i==null?void 0:i.ids,data:o,params:e,brushType:e.brushType,setBrushedSpace:h,brushState:i,setFilteredTable:m}),_.jsx(Tz,{data:o,parameters:e,barsTable:p})]}):_.jsx(sd,{})}const XTt=Object.freeze(Object.defineProperty({__proto__:null,BrushPlot:ide,default:ide},Symbol.toStringTag,{value:"Module"})),QTt=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"})),sde=e=>{const t={...e,marginTop:e.marginTop||10,marginRight:e.marginRight||10,marginBottom:e.marginBottom||40,marginLeft:e.marginLeft||75};return{...t,boundedHeight:t.height?Math.max(t.height-t.marginTop-t.marginBottom,0):0,boundedWidth:t.width?Math.max(t.width-t.marginLeft-t.marginRight,0):0}},NS=e=>{const t=I.useRef(null),n=sde(e),[r,i]=I.useState(0),[s,o]=I.useState(0);I.useEffect(()=>{const u=t.current;if(u){const l=new ResizeObserver(c=>{if(!Array.isArray(c)||!c.length)return;const f=c[0];r!==f.contentRect.width&&i(f.contentRect.width),s!==f.contentRect.height&&o(f.contentRect.height)});return l.observe(u),()=>l.unobserve(u)}return()=>null},[s,r]);const a=sde({...n,width:n.width||r,height:n.height||s});return[t,a]},JTt=Object.freeze(Object.defineProperty({__proto__:null,useChartDimensions:NS},Symbol.toStringTag,{value:"Module"}));function aRe({data:e,xScale:t,yScale:n,height:r}){return _.jsx("g",{children:e.map((i,s)=>_.jsx("rect",{x:t(i.name),y:n(i.value),width:t.bandwidth(),height:r-n(i.value),fill:"transparent",stroke:"currentColor"},s))})}const ZTt=Object.freeze(Object.defineProperty({__proto__:null,Bars:aRe},Symbol.toStringTag,{value:"Module"}));function VQ({domain:e=[0,100],range:t=[10,100],withTick:n=!0,tickLen:r=5,tickFilter:i=s=>s}){const s=I.useMemo(()=>{const o=Yf().domain(e).range(t),a=t[1]-t[0],l=Math.max(1,Math.floor(a/30));return i(o.ticks(l).map(c=>({value:c,xOffset:o(c)})))},[e,t,i]);return _.jsxs("g",{children:[_.jsx("path",{d:["M",0,t[0],"h",r,"V",t[1],"h",-r].join(" "),fill:"none",stroke:"currentColor"}),n&&s.map(({value:o,xOffset:a})=>_.jsxs("g",{transform:`translate(0,${a})`,children:[_.jsx("line",{x2:`${r}`,stroke:"currentColor"}),_.jsx("text",{style:{fontSize:"10px",textAnchor:"middle",transform:"translateX(-10px)"},children:o},o)]},o))]})}const e2t=Object.freeze(Object.defineProperty({__proto__:null,NumericAxisV:VQ},Symbol.toStringTag,{value:"Module"}));function uRe({domain:e=["A","B","C","D","E"],range:t=[10,100],withTick:n=!0,tickLen:r=5,tickFilter:i=s=>s}){const s=I.useMemo(()=>{const o=gS().domain(e).range(t).padding(.2);return i(e.map(a=>({value:a,xOffset:(o(a)||0)+o.bandwidth()/2-5})))},[e,t,i]);return _.jsxs("g",{children:[_.jsx("path",{d:["M",t[0],r,"v",-r,"H",t[1],"v",r].join(" "),fill:"none",stroke:"currentColor"}),n&&s.map(({value:o,xOffset:a})=>_.jsx("g",{transform:`translate(${a}, 10)`,children:_.jsx("circle",{r:2,cx:0,cy:0,children:o},o)},o))]})}const t2t=Object.freeze(Object.defineProperty({__proto__:null,OrdinalAxisHWithDotMarks:uRe},Symbol.toStringTag,{value:"Module"})),n2t={marginBottom:40,marginLeft:40,marginTop:15,marginRight:15,width:400,height:400};function r2t({parameters:e}){const[n,r]=NS(n2t),i=gS().domain(e.data.map(u=>u.name)).range([0,r.boundedWidth]).padding(.2),s=Yf().domain([100,0]).range([0,r.boundedHeight]),o=u=>u.filter((l,c)=>c===0||c===u.length-1),a=u=>u.filter((l,c)=>e.selectedIndices.includes(c));return _.jsx("div",{className:"Chart__wrapper",ref:n,style:{height:400},children:_.jsx("svg",{width:r.width,height:r.height,children:_.jsxs("g",{transform:`translate(${[r.marginLeft,r.marginTop].join(",")})`,children:[_.jsx("g",{transform:`translate(${[6,r.boundedHeight].join(",")})`,children:_.jsx(uRe,{domain:i.domain(),range:i.range(),withTick:!0,tickLen:0,tickFilter:a})}),_.jsx("g",{transform:`translate(${[0,0].join(",")})`,children:_.jsx(VQ,{domain:s.domain(),range:s.range(),withTick:!0,tickLen:6,tickFilter:o})}),_.jsx("g",{transform:`translate(${[0,0].join(",")})`,children:_.jsx(aRe,{data:e.data,xScale:i,yScale:s,height:r.boundedHeight})})]})})})}const i2t=Object.freeze(Object.defineProperty({__proto__:null,default:r2t},Symbol.toStringTag,{value:"Module"}));function lRe({data:e}){return _.jsx("g",{children:e.map(({bubble:t},n)=>_.jsx("circle",{cx:t.x,cy:t.y,r:t.r,fill:"transparent",stroke:"currentColor"},n))})}const s2t=Object.freeze(Object.defineProperty({__proto__:null,Bubbles:lRe},Symbol.toStringTag,{value:"Module"}));function HQ({positions:e}){return _.jsx("g",{children:e.map((t,n)=>_.jsx("circle",{cx:t.x,cy:t.y,r:2,fill:"black",stroke:"currentColor"},n))})}const o2t=Object.freeze(Object.defineProperty({__proto__:null,DotMarks:HQ},Symbol.toStringTag,{value:"Module"})),a2t={marginBottom:40,marginLeft:40,marginTop:15,marginRight:15,height:400,width:400},u2t=({data:e},t=100,n=100)=>{const i={children:e.map(a=>+a.value).map(a=>({value:a}))},s=WTe().size([t-10,n-10]).padding(1.5),o=N6(i).sum(a=>a.value);return s(o).descendants().filter(a=>!a.children).map((a,u)=>({bubble:a,data:e[u]}))},l2t=(e,t)=>e.filter((n,r)=>t.includes(r)).map(({bubble:n})=>({x:n.x,y:n.y}));function c2t({parameters:e}){const[t,n]=NS(a2t),r=u2t(e,n.width,n.height),i=l2t(r,e.selectedIndices);return _.jsx("div",{className:"Chart__wrapper",ref:t,style:{height:"400px"},children:_.jsx("svg",{width:n.width,height:n.height,children:_.jsxs("g",{transform:`translate(${[n.marginLeft/2,n.marginTop/2].join(",")})`,children:[_.jsx(lRe,{data:r}),_.jsx(HQ,{positions:i})]})})})}const f2t=Object.freeze(Object.defineProperty({__proto__:null,default:c2t},Symbol.toStringTag,{value:"Module"}));function cRe({arcs:e}){return _.jsx("g",{children:e.map((t,n)=>_.jsx("path",{d:t(),fill:"transparent",stroke:"currentColor"},n))})}const d2t=Object.freeze(Object.defineProperty({__proto__:null,Slices:cRe},Symbol.toStringTag,{value:"Module"}));function fRe({positions:e}){return _.jsx("g",{children:e.map((t,n)=>_.jsx("g",{transform:`translate(${t.centroid()})`,children:_.jsx("circle",{r:2,cx:0,cy:0},n)},n))})}const h2t=Object.freeze(Object.defineProperty({__proto__:null,SlicesDotMarks:fRe},Symbol.toStringTag,{value:"Module"})),p2t={marginBottom:40,marginLeft:40,marginTop:15,marginRight:15,height:400,width:500},m2t=f0t().value(e=>e.value),jT=150;function g2t({parameters:e}){const[t,n]=NS(p2t),r=m2t(e.data),i=r.map(o=>Sz().innerRadius(0).outerRadius(jT).startAngle(o.startAngle).endAngle(o.endAngle)),s=r.map(o=>Sz().outerRadius(jT+10).innerRadius(jT+10).startAngle(o.startAngle).endAngle(o.endAngle)).filter((o,a)=>e.selectedIndices.includes(a));return _.jsx("div",{className:"Chart__wrapper",ref:t,style:{height:400},children:_.jsx("svg",{width:n.width,height:n.height,children:_.jsxs("g",{transform:`translate(${[n.marginLeft+jT,n.marginTop+jT].join(",")})`,children:[_.jsx(cRe,{arcs:i}),_.jsx(fRe,{positions:s})]})})})}const y2t=Object.freeze(Object.defineProperty({__proto__:null,default:g2t},Symbol.toStringTag,{value:"Module"}));function dRe({domain:e=[0,100],range:t=[10,100],withTick:n=!0,tickLen:r=5,tickFilter:i=s=>s}){const s=I.useMemo(()=>{const o=Yf().domain(e).range(t),a=t[1]-t[0],l=Math.max(1,Math.floor(a/30));return i(o.ticks(l).map(c=>({value:c,xOffset:o(c)})))},[e,t,i]);return _.jsxs("g",{children:[_.jsx("path",{d:["M",t[0],r,"v",-r,"H",t[1],"v",r].join(" "),fill:"none",stroke:"currentColor"}),n&&s.map(({value:o,xOffset:a})=>_.jsxs("g",{transform:`translate(${a}, 0)`,children:[_.jsx("line",{y2:`${r}`,stroke:"currentColor"}),_.jsx("text",{style:{fontSize:"10px",textAnchor:"middle",transform:"translateY(20px)"},children:o},o)]},o))]})}const v2t=Object.freeze(Object.defineProperty({__proto__:null,NumericAxisH:dRe},Symbol.toStringTag,{value:"Module"}));function hRe({data:e,barWidth:t,yScale:n}){return _.jsx("g",{children:e.map((r,i)=>_.jsx("rect",{x:t/2,y:n(r[0][1]),width:t,height:n(r[0][0])-n(r[0][1]),fill:"transparent",stroke:"currentColor"},i))})}const b2t=Object.freeze(Object.defineProperty({__proto__:null,StackedBars:hRe},Symbol.toStringTag,{value:"Module"})),_2t={marginBottom:40,marginLeft:40,marginTop:15,marginRight:15,height:400,width:400};function w2t({parameters:e}){const[n,r]=NS(_2t),i=gS().domain(e.data.map(h=>h.name)).range([0,r.boundedWidth]).padding(.2),s=Yf().domain([100,0]).range([0,r.boundedWidth]),o=h=>h.filter((p,m)=>m===0||m===h.length-1),a=h=>h.filter((p,m)=>e.selectedIndices.includes(m)),u=h=>{const p=h.map(b=>+b.value),g=p.reduce((b,w)=>Number(b)+Number(w))/100,y={};p.forEach((b,w)=>{y[String.fromCharCode(w+65)]=b/g});const v=[y];return D0t().keys(e.data.map(b=>b.name))(v)},l=(h,p,m)=>h.filter((y,v)=>p.includes(v)).map(y=>({x:m,y:s(y[0][1])+.5*(s(y[0][0])-s(y[0][1]))})),c=u(e.data),f=Math.min(r.width,r.height)/2-20,d=l(c,e.selectedIndices,f);return _.jsx("div",{className:"Chart__wrapper",ref:n,style:{height:"400"},children:_.jsx("svg",{width:r.width,height:r.height,children:_.jsxs("g",{transform:`translate(${[r.marginLeft,r.marginTop].join(",")})`,children:[_.jsx("g",{transform:`translate(${[6,r.boundedHeight].join(",")})`,children:_.jsx(dRe,{domain:i.domain(),range:i.range(),withTick:!0,tickLen:0,tickFilter:a})}),_.jsx("g",{transform:"translate(0, 0)",children:_.jsx(VQ,{domain:s.domain(),range:s.range(),withTick:!0,tickLen:6,tickFilter:o})}),_.jsxs("g",{transform:"translate(0, 0)",children:[_.jsx(hRe,{data:c,barWidth:f,yScale:s}),_.jsx(HQ,{positions:d})]})]})})})}const E2t=Object.freeze(Object.defineProperty({__proto__:null,default:w2t},Symbol.toStringTag,{value:"Module"})),x2t={marginBottom:40,marginLeft:40,marginTop:15,marginRight:15,height:650,width:850};function S2t({parameters:e,setAnswer:t}){const[n,r]=NS(x2t),[i,s]=I.useState(100),[o,a]=I.useState(100),[u,l]=I.useState(300),{taskid:c}=e,{actions:f,trrack:d}=I.useMemo(()=>{const p=qk.create(),m=p.register("click",(y,v)=>(y.clickX=v.clickX,y.clickY=v.clickY,y.distance=v.distance,y)),g=zQ({registry:p,initialState:{distance:0,speed:10,clickX:0,clickY:0}});return{actions:{clickAction:m},trrack:g}},[]),h=I.useCallback(p=>{const m=rs("#movingCircle"),g=rs("#clickAccuracySvg"),y=B7(p,g.node()),v=[+m.attr("cx"),+m.attr("cy")],b=`${Math.round(Math.sqrt((y[0]-v[0])**2+(y[1]-v[1])**2))}px`;d.apply("Clicked",f.clickAction({distance:+b,clickX:y[0],clickY:y[1]})),t({status:!0,provenanceGraph:d.graph.backend,answers:{[c]:b}})},[f,t,c,d]);return I.useEffect(()=>{const p=Math.random()*800,m=Math.random()*600,y=Math.sqrt((p-i)**2+(m-o)**2)/u*1e3;rs(n.current).select("circle").transition().duration(y).ease(Rft).attr("cx",p).attr("cy",m).on("end",()=>{s(p),a(m)})},[n,u,i,o]),_.jsxs(_.Fragment,{children:[_.jsx("div",{className:"Chart__wrapper",ref:n,onClick:h,style:{height:"650px"},children:_.jsx("svg",{id:"clickAccuracySvg",width:r.width,height:r.height,children:_.jsxs("g",{transform:`translate(${[r.marginLeft/2,r.marginTop/2].join(",")})`,children:[_.jsx("rect",{width:"800",height:"600",stroke:"black",strokeWidth:"5",fill:"none"}),_.jsx("circle",{id:"movingCircle",cx:"100",cy:"100",r:"10"})]})})}),_.jsxs(pe,{children:["Adjust speed (px/s):",_.jsx(n6,{w:800,min:10,max:1e3,value:u,onChange:l})]})]})}const T2t=Object.freeze(Object.defineProperty({__proto__:null,default:S2t},Symbol.toStringTag,{value:"Module"}));function ode({rankings:e}){return _.jsx("div",{style:{fontFamily:"sans-serif"},children:_.jsx("div",{children:e.map((t,n)=>_.jsx("div",{style:{textAlign:"center",marginBottom:1,padding:2,background:`${t===0?"#AEC7E8":"#FF9896"}`},children:t===0?"Group A":"Group B"},n))})})}function C2t({parameters:e,setAnswer:t}){const n=My(),[r,i]=I.useState(""),{goToNextStep:s,isNextDisabled:o}=Mxe(),a=I.useMemo(()=>Math.floor(Math.random()*2)===0?"r1":"r2",[]),[u]=I.useState(new URLSearchParams(window.location.search)),l=(u.get("admin")||"f")==="t",c=I.useCallback(h=>{i(h),t({status:!0,answers:{[`${n}/leftARP`]:a==="r1"?e.data.r1ARP:e.data.r2ARP,[`${n}/rightARP`]:a==="r2"?e.data.r1ARP:e.data.r2ARP,[`${n}/leftRanking`]:JSON.stringify(a==="r1"?e.data.r1:e.data.r2),[`${n}/rightRanking`]:JSON.stringify(a==="r2"?e.data.r1:e.data.r2),[`${n}/choice`]:h,[`${n}/correctChoice`]:a==="r1"&&parseFloat(e.data.r1ARP)<parseFloat(e.data.r2ARP)?"left":"right"}})},[n,a,e.data,t]),f=I.useCallback(()=>{o||s()},[o,s]);I.useEffect(()=>{const h=LUe([["ArrowLeft",()=>c("left")],["ArrowRight",()=>c("right")],["Enter",f]]);return document.body.addEventListener("keydown",h),()=>{document.body.removeEventListener("keydown",h)}},[c,f]);let d=!1;return a==="r1"?(r==="left"&&parseFloat(e.data.r1ARP)<parseFloat(e.data.r2ARP)||r==="right"&&parseFloat(e.data.r2ARP)<parseFloat(e.data.r1ARP))&&(d=!0):(r==="left"&&parseFloat(e.data.r2ARP)<parseFloat(e.data.r1ARP)||r==="right"&&parseFloat(e.data.r1ARP)<parseFloat(e.data.r2ARP))&&(d=!0),_.jsxs("div",{children:[_.jsxs(Ha,{children:[_.jsxs(Ha.Col,{span:2,children:[_.jsx(ode,{rankings:a==="r1"?e.data.r1:e.data.r2}),_.jsx(fn,{fullWidth:!0,disabled:r==="left",onClick:()=>{c("left")},children:r==="left"?_.jsx(mae,{}):"Select this ranking"}),l&&r&&_.jsx("div",{children:a==="r1"?e.data.r1ARP:e.data.r2ARP})]}),_.jsxs(Ha.Col,{span:2,children:[_.jsx(ode,{rankings:a==="r1"?e.data.r2:e.data.r1}),_.jsx(fn,{fullWidth:!0,disabled:r==="right",onClick:()=>{c("right")},children:r==="right"?_.jsx(mae,{}):"Select this ranking"}),l&&r&&_.jsx("div",{children:a==="r1"?e.data.r2ARP:e.data.r1ARP})]})]}),l&&r&&_.jsx("div",{style:{padding:20,textAlign:"center",width:300},children:d?"CORRECT":"INCORRECT"})]})}const A2t=Object.freeze(Object.defineProperty({__proto__:null,default:C2t},Symbol.toStringTag,{value:"Module"})),I2t={Public:"#1f77b4",Private:"#ff7f0e",Foreign:"#2ca02c",Other:"#d62728",Proprietary:"#9467bd"};function ade({parameters:e}){const[t,n]=I.useState(null),[r]=I.useState(e.dataset),[i,s]=I.useState(null);return I.useEffect(()=>{CK(`./data/${r}.csv`).then(o=>{if(o.length===0){console.warn("Empty data received for",r);return}n(o)})},[r]),I.useEffect(()=>{if(t){const o=rs(i);o.selectAll("*").remove();const a={top:20,right:30,bottom:60,left:60},u=800-a.left-a.right,l=400-a.top-a.bottom,c=o.append("g").attr("transform",`translate(${a.left},${a.top})`),f=gS().domain(t.map(h=>h[e.y])).range([0,u]).padding(.1),d=Yf().domain([0,lh(t,h=>+h[e.x])||0]).nice().range([l,0]);c.append("g").attr("transform",`translate(0,${l})`).call(Zat(f).tickSize(5)),c.append("g").call(eut(d)),c.append("text").attr("fill","#000").attr("transform","rotate(-90)").attr("y",-a.left+15).attr("x",-(l/2)).attr("text-anchor","middle").attr("font-size","12px").text(`${e.x} (Billion USD)`),c.selectAll(".bar").data(t).enter().append("rect").attr("class","bar").attr("x",h=>f(h[e.y])||0).attr("y",h=>d(+h[e.x])).attr("width",f.bandwidth()).attr("height",h=>l-d(+h[e.x])).attr("fill",h=>I2t[h[e.y]]||"#ccc")}},[t,i,e]),_.jsxs(Rf,{children:[_.jsxs(Pb,{shadow:"md",radius:"md",p:"md",withBorder:!0,children:[_.jsx(ui,{order:3,children:"Debt by School Type"}),_.jsx("svg",{ref:s,width:800,height:400})]}),t===null&&_.jsx(sd,{})]})}const k2t=Object.freeze(Object.defineProperty({__proto__:null,Bar:ade,default:ade},Symbol.toStringTag,{value:"Module"})),R2t=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"})),vo={Purple:"#6D3E91",DarkOrange:"#C05917",LightTeal:"#58AC8C",Blue:"#286BBB",Maroon:"#883039",Camel:"#BC8E5A",MidnightBlue:"#00295B",DustyCoral:"#C15065",DarkOliveGreen:"#18470F",DarkCopper:"#9A5129",Peach:"#E56E5A",Mauve:"#A2559C",Turquoise:"#38AABA",OliveGreen:"#578145",Cherry:"#970046",Teal:"#00847E",RustyOrange:"#B13507",Denim:"#4C6A9C",Fuchsia:"#CF0A66",TealishGreen:"#00875E",Copper:"#B16214",DarkMauve:"#8C4569",Lime:"#3B8E1D",Coral:"#D73C50"},L_={DarkOrangeDarker:"#BE5915",PeachDarker:"#C4523E",LightTealDarker:"#2C8465",TurquoiseDarker:"#008291",CamelDarker:"#996D39",LimeDarker:"#338711"},pRe=[vo.DustyCoral,L_.LightTealDarker,L_.DarkOrangeDarker,vo.Purple,vo.DarkOliveGreen,vo.Blue,vo.Maroon,L_.CamelDarker,vo.MidnightBlue,vo.DarkCopper,L_.PeachDarker,vo.Mauve,L_.TurquoiseDarker,vo.OliveGreen,vo.Cherry,vo.Teal,vo.RustyOrange,vo.Denim,vo.TealishGreen,vo.Copper,vo.DarkMauve,L_.LimeDarker,vo.Coral],N2t=Object.freeze(Object.defineProperty({__proto__:null,OwidDistinctLinesPalette:pRe},Symbol.toStringTag,{value:"Module"}));function mV({xScale:e,yRange:t,vertPosition:n,ticks:r,isDate:i=!1,showLines:s=!0}){const o=I.useMemo(()=>r.length>1?Math.abs(r[1].offset-r[0].offset):e.range()[0]-e.range()[1],[r,e]),a=u=>{const l=Xb("%b %e, %Y");return i?l(u).toString():Fy(".2s")(parseFloat(String(u)))};return _.jsxs(_.Fragment,{children:[s&&_.jsx("path",{transform:`translate(0, ${t[1]})`,d:["M",e.range()[0],0,"H",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}),r.map(({value:u,offset:l})=>_.jsxs("g",{transform:`translate(${l}, ${n})`,children:[_.jsx("line",{y2:"6",stroke:"currentColor"}),s&&_.jsx("line",{y2:`${-(t[0]-t[1])}`,stroke:"lightgray"}),_.jsx("foreignObject",{x:0-o/2,y:10,width:o,height:20,children:_.jsx(Pc,{children:_.jsx(ai,{withinPortal:!0,label:String(u),children:_.jsxs(Xe,{px:2,size:"xs",style:{textAlign:"center",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"},children:[a(i?new Date(u):u)," "]})})})})]},`${u}tick`))]})}const D2t=Object.freeze(Object.defineProperty({__proto__:null,XAxis:mV,default:mV},Symbol.toStringTag,{value:"Module"}));function mRe({yScale:e,xRange:t,horizontalPosition:n,label:r}){const i=I.useMemo(()=>e.ticks(5).map(o=>({value:o,yOffset:e(o)})),[e]),s=I.useMemo(()=>Fy(".2s"),[]);return _.jsxs(_.Fragment,{children:[_.jsx("g",{transform:`translate(${n-60}, ${e.range()[0]}) rotate(-90)`,children:_.jsx("foreignObject",{width:Math.abs(e.range()[1]-e.range()[0]),height:20,children:_.jsx(Pc,{children:_.jsx(ls,{gap:3,children:_.jsx(Xe,{size:"14px",style:{color:"#878E95"},children:r})})})})}),_.jsx("path",{transform:`translate(${n}, 0)`,d:["M",0,e.range()[0],"V",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}),_.jsx("path",{transform:`translate(${t[1]}, 0)`,d:["M",0,e.range()[0],"V",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}),i.map(({value:o,yOffset:a})=>_.jsxs("g",{transform:`translate(${n}, ${a})`,children:[_.jsx("line",{x2:"-6",stroke:"currentColor"}),_.jsx("line",{x2:`${t[1]-t[0]}`,stroke:`${o===0?"black":"lightgray"}`}),_.jsx("text",{style:{dominantBaseline:"middle",fontSize:"10px",textAnchor:"end",transform:"translateX(-8px)",fill:"black",font:"Roboto"},children:s(o)},o)]},o))]})}const P2t=Object.freeze(Object.defineProperty({__proto__:null,YAxis:mRe},Symbol.toStringTag,{value:"Module"})),ea={top:30,left:100,right:110,bottom:80};function gV({parameters:e,data:t,dataname:n,items:r,selection:i,range:s,guardrail:o}){const a=I.useMemo(()=>{const v=r.filter(b=>i==null?void 0:i.includes(b.name)).map(b=>b.group);return r.filter(b=>v.includes(b.group)&&!(i!=null&&i.includes(b.name))).map(b=>b.name)},[i,r]),u=I.useMemo(()=>{const v=r.map(E=>E.group),b=t.filter(E=>v.includes(String(E[e.group_var]))),w=Mat(b,E=>({mean:Xxe(E,T=>+T[e.y_var]),upperq:jA(E,.75,T=>+T[e.y_var]),lowerq:jA(E,.25,T=>+T[e.y_var])}),E=>E[e.x_var]);return Array.from(w,([E,T])=>({date:E,mean:T.mean,upperq:T.upperq,lowerq:T.lowerq}))},[t,e,r]),l=n==="clean_data"?800-ea.left-ea.right-60:800-ea.left-ea.right,c=400-ea.top-ea.bottom,{yMin:f,yMax:d}=I.useMemo(()=>{let v=[];switch(o){case"super_data":v=(i==null?void 0:i.concat(a))??[];break;default:v=i??[];break}const b=t.filter(C=>v.includes(String(C[e.cat_var]))).map(C=>+C[e.y_var]).filter(C=>C!==null),[w,E]=P7(b),T=d3(u,C=>C.lowerq)??w,S=lh(u,C=>C.upperq)??E;return{yMin:o==="super_summ"?Math.min(w,T):w,yMax:o==="super_summ"?Math.max(E,S):E}},[t,i,o,u,a,e]),h=I.useMemo(()=>s?QA().range([ea.left,l+ea.left]).domain(s):QA().range([ea.left,l+ea.left]).domain([new Date(e.start_date),new Date(e.end_date)]),[l,s,e]),p=I.useMemo(()=>Yf().range([c+ea.top,ea.top]).domain([f,d]).nice(),[c,d,f]),m=I.useMemo(()=>{const v=Array.from(new Set(t.map(b=>String(b[e.cat_var]))));return Wb(pRe).domain(v)},[t,e]),g=I.useMemo(()=>{if(!h||!p)return[];const v=XK().x(b=>h(HK("%Y-%m-%d")(String(b[e.x_var])))).y(b=>p(+b[e.y_var])).curve(S2e);return i==null?void 0:i.map(b=>({schoolType:b,path:v(t.filter(w=>w[e.cat_var]===b))}))},[t,h,p,i,e]),y=I.useMemo(()=>h.ticks(6).map(v=>({value:Xb("%b %e, %Y")(v),offset:h(v)})),[h]);return(i==null?void 0:i.length)===0?_.jsx(Pc,{style:{width:"800px",height:"400px"},children:_.jsx(Xe,{fs:"italic",c:"dimmed",children:"Select an item to view the chart."})}):_.jsxs("svg",{style:{height:"400px",width:"800px"},children:[_.jsxs("g",{id:"axes",children:[_.jsx(mV,{isDate:!0,xScale:h,yRange:p.range(),vertPosition:c+ea.top,ticks:y}),_.jsx(mRe,{label:"Debt In Billion USD",yScale:p,horizontalPosition:ea.left,xRange:h.range()})]}),g==null?void 0:g.map(v=>_.jsx("g",{children:_.jsx("path",{id:`${v.schoolType}`,fill:"none",stroke:m(v.schoolType),strokeWidth:2,d:v.path})},`${v.schoolType}_g`)),_.jsx("g",{transform:`translate(${l+ea.left+20}, ${ea.top})`,children:Array.from(new Set(t.map(v=>v[e.cat_var]))).map((v,b)=>_.jsxs("g",{transform:`translate(0, ${b*20})`,children:[_.jsx("rect",{width:15,height:15,fill:m(String(v))}),_.jsx("text",{x:20,y:15,style:{fontSize:"12px",fill:"black"},children:v})]},v))})]})}const O2t=Object.freeze(Object.defineProperty({__proto__:null,LineChart:gV,default:gV},Symbol.toStringTag,{value:"Module"}));function yV({parameters:e,setRange:t,trackRange:n}){const r=QA().domain([new Date(e.start_date),new Date(e.end_date)]).range([0,100]);function i(l){return r.invert(l)}function s(l){const c=i(l);return Xb("%b %e, %Y")(c)}const o={marginTop:"20px",marginBottom:"20px"},a={marginBottom:"5px",fontWeight:"bold",color:"#4a5568"},u={paddingLeft:"30px"};return _.jsxs(pe,{style:u,children:[_.jsx(Xe,{style:[a,{marginBottom:30}],children:"Select Date Range:"}),_.jsx(NA,{style:o,defaultValue:[0,100],label:l=>s(l),labelAlwaysOn:!0,step:1,min:0,max:100,disabled:!e.allow_time_slider,onChange:([l,c])=>{const f=[i(l),i(c)];t(f),n(f)},thumbSize:16,thumbToLabel:"Date Range",marks:[{value:0,label:s(0)},{value:100,label:s(100)}]})]})}const $2t=Object.freeze(Object.defineProperty({__proto__:null,RangeSelector:yV,default:yV},Symbol.toStringTag,{value:"Module"}));function ude({parameters:e}){const[t,n]=I.useState(null),[r]=I.useState(e.dataset),[i]=I.useState(e.initial_selection),[s,o]=I.useState(null),[a,u]=I.useState([new Date(e.start_date),new Date(e.end_date)]),[l]=I.useState(e.guardrail);I.useEffect(()=>{CK(`./data/${r}.csv`).then(m=>{n(m),o(Array.from(new Set(m.map(g=>JSON.stringify({name:g[e.cat_var],group:g[e.group_var]})))).map(g=>JSON.parse(g)))})},[r,e]);const c=I.useMemo(()=>t&&a?t.filter(m=>{const g=new Date(m[e.x_var]);return g.getTime()>=a[0].getTime()&&g.getTime()<=a[1].getTime()}):null,[t,a,e.x_var]),{actions:f,trrack:d}=I.useMemo(()=>{const m=qk.create(),g=m.register("selection",(b,w)=>(b.selection=w,b)),y=m.register("range",(b,w)=>(b.range=w,b)),v=zQ({registry:m,initialState:{selection:[],range:[e.start_date,e.end_date]}});return{actions:{selection:g,range:y},trrack:v}},[e.end_date,e.start_date]),h=I.useCallback(m=>{d.apply("Change daterange",f.range([m[0].toISOString().slice(0,10),m[1].toISOString().slice(0,10)]))},[d,f]),p=I.useMemo(()=>ff(h,200),[h]);return c&&s&&a&&i?_.jsx("div",{children:_.jsxs("div",{children:[_.jsx("div",{children:_.jsx("h3",{children:"Debt by School Type"})}),_.jsxs("div",{children:[_.jsx(gV,{parameters:e,data:c,dataname:r,items:s,selection:i,range:a,guardrail:l}),e.allow_time_slider&&_.jsx("div",{style:{width:"700px"},children:_.jsx(yV,{parameters:e,setRange:u,trackRange:p})})]})]})}):_.jsx("div",{children:"Loading..."})}const M2t=Object.freeze(Object.defineProperty({__proto__:null,DataExplorer:ude,default:ude},Symbol.toStringTag,{value:"Module"})),lde=Object.assign({"../public/demo-brush-interactions/assets/Bar.tsx":$0t,"../public/demo-brush-interactions/assets/BrushPlot.tsx":XTt,"../public/demo-brush-interactions/assets/Paintbrush.tsx":YTt,"../public/demo-brush-interactions/assets/Scatter.tsx":KTt,"../public/demo-brush-interactions/assets/XAxisBar.tsx":P0t,"../public/demo-brush-interactions/assets/YAxis.tsx":GTt,"../public/demo-brush-interactions/assets/YAxisBar.tsx":O0t,"../public/demo-brush-interactions/assets/types.ts":QTt,"../public/demo-cleveland/assets/BarChart.tsx":i2t,"../public/demo-cleveland/assets/BubbleChart.tsx":f2t,"../public/demo-cleveland/assets/PieChart.tsx":y2t,"../public/demo-cleveland/assets/StackedBarChart.tsx":E2t,"../public/demo-cleveland/assets/chartcomponents/Bars.tsx":ZTt,"../public/demo-cleveland/assets/chartcomponents/Bubbles.tsx":s2t,"../public/demo-cleveland/assets/chartcomponents/DotMarks.tsx":o2t,"../public/demo-cleveland/assets/chartcomponents/NumericAxisH.tsx":v2t,"../public/demo-cleveland/assets/chartcomponents/NumericAxisV.tsx":e2t,"../public/demo-cleveland/assets/chartcomponents/OrdinalAxisHWithDotMarks.tsx":t2t,"../public/demo-cleveland/assets/chartcomponents/Slices.tsx":d2t,"../public/demo-cleveland/assets/chartcomponents/SlicesDotMarks.tsx":h2t,"../public/demo-cleveland/assets/chartcomponents/StackedBars.tsx":b2t,"../public/demo-cleveland/assets/hooks/useChartDimensions.tsx":JTt,"../public/demo-click-accuracy-test/assets/ClickAccuracyTest.tsx":T2t,"../public/demo-fairness-jnd/assets/FairnessJND.tsx":A2t,"../public/demo-mqp-study/assets/Bar.tsx":k2t,"../public/demo-mqp-study/assets/ChartParam.ts":R2t,"../public/demo-mqp-study/assets/Color.tsx":N2t,"../public/demo-mqp-study/assets/DataExplorer.tsx":M2t,"../public/demo-mqp-study/assets/LineChart.tsx":O2t,"../public/demo-mqp-study/assets/RangeSelector.tsx":$2t,"../public/demo-mqp-study/assets/XAxis.tsx":D2t,"../public/demo-mqp-study/assets/YAxis.tsx":P2t});function L2t({currentConfig:e}){const t=Jm(),n=My(),r=`../public/${e.path}`,i=r in lde?lde[r].default:null,s=Xh(),{updateResponseBlockValidation:o,setIframeAnswers:a}=Kh();function u({status:l,provenanceGraph:c,answers:f}){s(o({location:"sidebar",identifier:`${n}_${t}`,status:l,values:f,provenanceGraph:c})),s(a(f))}return _.jsx(I.Suspense,{fallback:_.jsx("div",{children:"Loading..."}),children:i?_.jsx(i,{parameters:e.parameters,setAnswer:u}):_.jsx(H1,{path:e.path})})}function F2t({currentConfig:e}){const[t,n]=I.useState(""),[r,i]=I.useState(!0);return I.useEffect(()=>{async function s(){const o=await cK(e.path);o!==void 0&&n(o),i(!1)}s()},[e.path]),r||t?_.jsx(Qa,{text:t}):_.jsx(H1,{path:e.path})}const j2t={},B2t=Object.freeze(Object.defineProperty({__proto__:null,default:j2t},Symbol.toStringTag,{value:"Module"})),U2t=Zje(B2t);var z2t=U2t;function V2t(e,t){var n,r="",i=0,s=!0,o=0,a;function u(){return a=e.charAt(o),o++,a}for(u(),a==="-"&&(r="-",u());a>="0"&&a<="9";)s&&(a=="0"?i++:s=!1),r+=a,u();if(s&&i--,a===".")for(r+=".";u()&&a>="0"&&a<="9";)r+=a;if(a==="e"||a==="E")for(r+=a,u(),(a==="-"||a==="+")&&(r+=a,u());a>="0"&&a<="9";)r+=a,u();for(;a&&a<=" ";)u();if(t&&(a===","||a==="}"||a==="]"||a==="#"||a==="/"&&(e[o]==="/"||e[o]==="*"))&&(a=0),n=+r,!(a||i||!isFinite(n)))return n}function H2t(e,t){return Object.defineProperty&&Object.defineProperty(e,"__COMMENTS__",{enumerable:!1,writable:!0}),e.__COMMENTS__=t||{}}function q2t(e){Object.defineProperty(e,"__COMMENTS__",{value:void 0})}function W2t(e){return e.__COMMENTS__}function G2t(e){if(!e)return"";var t=e.split(`
`),n,r,i,s;for(i=0;i<t.length;i++)for(n=t[i],s=n.length,r=0;r<s;r++){var o=n[r];if(o==="#")break;if(o==="/"&&(n[r+1]==="/"||n[r+1]==="*")){n[r+1]==="*"&&(i=t.length);break}else if(o>" "){t[i]="# "+n;break}}return t.join(`
`)}var m4={EOL:z2t.EOL||`
`,tryParseNumber:V2t,createComment:H2t,removeComment:q2t,getComment:W2t,forceComment:G2t},Y2t="3.2.1";function K2t(e,t){if(Object.prototype.toString.apply(e)!=="[object Array]"){if(e)throw new Error("dsf option must contain an array!");return cde}else if(e.length===0)return cde;var n=[];function r(i){return{}.toString.call(i)==="[object Function]"}return e.forEach(function(i){if(!i.name||!r(i.parse)||!r(i.stringify))throw new Error("extension does not match the DSF interface");n.push(function(){try{if(t=="parse")return i.parse.apply(null,arguments);if(t=="stringify"){var s=i.stringify.apply(null,arguments);if(s!==void 0&&(typeof s!="string"||s.length===0||s[0]==='"'||[].some.call(s,function(o){return Q2t(o)})))throw new Error("value may not be empty, start with a quote or contain a punctuator character except colon: "+s);return s}else throw new Error("Invalid type")}catch(o){throw new Error("DSF-"+i.name+" failed; "+o.message)}})}),X2t.bind(null,n)}function X2t(e,t){if(e)for(var n=0;n<e.length;n++){var r=e[n](t);if(r!==void 0)return r}}function cde(){}function Q2t(e){return e==="{"||e==="}"||e==="["||e==="]"||e===","}function gRe(){return{name:"math",parse:function(e){switch(e){case"+inf":case"inf":case"+Inf":case"Inf":return 1/0;case"-inf":case"-Inf":return-1/0;case"nan":case"NaN":return NaN}},stringify:function(e){if(typeof e=="number"){if(1/e===-1/0)return"-0";if(e===1/0)return"Inf";if(e===-1/0)return"-Inf";if(isNaN(e))return"NaN"}}}}gRe.description="support for Inf/inf, -Inf/-inf, Nan/naN and -0";function yRe(e){var t=e&&e.out;return{name:"hex",parse:function(n){if(/^0x[0-9A-Fa-f]+$/.test(n))return parseInt(n,16)},stringify:function(n){if(t&&Number.isInteger(n))return"0x"+n.toString(16)}}}yRe.description="parse hexadecimal numbers prefixed with 0x";function vRe(){return{name:"date",parse:function(e){if(/^\d{4}-\d{2}-\d{2}$/.test(e)||/^\d{4}-\d{2}-\d{2}T\d{2}\:\d{2}\:\d{2}(?:.\d+)(?:Z|[+-]\d{2}:\d{2})$/.test(e)){var t=Date.parse(e);if(!isNaN(t))return new Date(t)}},stringify:function(e){if(Object.prototype.toString.call(e)==="[object Date]"){var t=e.toISOString();return t.indexOf("T00:00:00.000Z",t.length-14)!==-1?t.substr(0,10):t}}}}vRe.description="support ISO dates";var qQ={loadDsf:K2t,std:{math:gRe,hex:yRe,date:vRe}},J2t=function(e,t){var n=m4,r=qQ,i,s,o,a={'"':'"',"'":"'","\\":"\\","/":"/",b:"\b",f:"\f",n:`
`,r:"\r",t:"	"},u,l;function c(){s=0,o=" "}function f($){return $==="{"||$==="}"||$==="["||$==="]"||$===","||$===":"}function d($){var F,M=0,B=1;for(F=s-1;F>0&&i[F]!==`
`;F--,M++);for(;F>0;F--)i[F]===`
`&&B++;throw new Error($+" at line "+B+","+M+" >>>"+i.substr(s-M,20)+" ...")}function h(){return o=i.charAt(s),s++,o}function p($){return i.charAt(s+$)}function m($){for(var F="",M=o;h();){if(o===M)return h(),$&&M==="'"&&o==="'"&&F.length===0?(h(),g()):F;if(o==="\\")if(h(),o==="u"){for(var B=0,U=0;U<4;U++){h();var H=o.charCodeAt(0),D;o>="0"&&o<="9"?D=H-48:o>="a"&&o<="f"?D=H-97+10:o>="A"&&o<="F"?D=H-65+10:d("Bad \\u char "+o),B=B*16+D}F+=String.fromCharCode(B)}else if(typeof a[o]=="string")F+=a[o];else break;else o===`
`||o==="\r"?d("Bad string containing newline"):F+=o}d("Bad string")}function g(){for(var $="",F=0,M=0;;){var B=p(-M-5);if(!B||B===`
`)break;M++}function U(){for(var H=M;o&&o<=" "&&o!==`
`&&H-- >0;)h()}for(;o&&o<=" "&&o!==`
`;)h();for(o===`
`&&(h(),U());;){if(!o)d("Bad multiline string");else if(o==="'"){if(F++,h(),F===3)return $.slice(-1)===`
`&&($=$.slice(0,-1)),$;continue}else for(;F>0;)$+="'",F--;o===`
`?($+=`
`,h(),U()):(o!=="\r"&&($+=o),h())}}function y(){if(o==='"'||o==="'")return m(!1);for(var $="",F=s,M=-1;;){if(o===":")return $?M>=0&&M!==$.length&&(s=F+M,d("Found whitespace in your key name (use quotes to include)")):d("Found ':' but no key name (for an empty key name use quotes)"),$;o<=" "?o?M<0&&(M=$.length):d("Found EOF while looking for a key name (check your syntax)"):f(o)?d("Found '"+o+"' where a key name was expected (check your syntax or use quotes if the key name includes {}[],: or whitespace)"):$+=o,h()}}function v(){for(;o;){for(;o&&o<=" ";)h();if(o==="#"||o==="/"&&p(0)==="/")for(;o&&o!==`
`;)h();else if(o==="/"&&p(0)==="*"){for(h(),h();o&&!(o==="*"&&p(0)==="/");)h();o&&(h(),h())}else break}}function b(){var $=o;for(f(o)&&d("Found a punctuator character '"+o+"' when expecting a quoteless string (check your syntax)");;){h();var F=o==="\r"||o===`
`||o==="";if(F||o===","||o==="}"||o==="]"||o==="#"||o==="/"&&(p(0)==="/"||p(0)==="*")){var M=$[0];switch(M){case"f":if($.trim()==="false")return!1;break;case"n":if($.trim()==="null")return null;break;case"t":if($.trim()==="true")return!0;break;default:if(M==="-"||M>="0"&&M<="9"){var B=n.tryParseNumber($);if(B!==void 0)return B}}if(F){$=$.trim();var U=l($);return U!==void 0?U:$}}$+=o}}function w($,F){var M;for($--,M=s-2;M>$&&i[M]<=" "&&i[M]!==`
`;M--);i[M]===`
`&&M--,i[M]==="\r"&&M--;var B=i.substr($,M-$+1);for(M=0;M<B.length;M++)if(B[M]>" "){var U=B.indexOf(`
`);if(U>=0){var H=[B.substr(0,U),B.substr(U+1)];return F&&H[0].trim().length===0&&H.shift(),H}else return[B]}return[]}function E($){function F(B,U){var H,D,z,W;switch(typeof B){case"string":B.indexOf(U)>=0&&(W=B);break;case"object":if(Object.prototype.toString.apply(B)==="[object Array]")for(H=0,z=B.length;H<z;H++)W=F(B[H],U)||W;else for(D in B)Object.prototype.hasOwnProperty.call(B,D)&&(W=F(B[D],U)||W)}return W}function M(B){var U=F($,B);return U?"found '"+B+`' in a string value, your mistake could be with:
  > `+U+`
  (unquoted strings contain everything up to the next line!)`:""}return M("}")||M("]")}function T(){var $=[],F,M,B;try{if(u&&(F=n.createComment($,{a:[]})),h(),M=s,v(),F&&(B=w(M,!0).join(`
`)),o==="]")return h(),F&&(F.e=[B]),$;for(;o;){if($.push(C()),M=s,v(),o===","&&(h(),M=s,v()),F){var U=w(M);F.a.push([B||"",U[0]||""]),B=U[1]}if(o==="]")return h(),F&&(F.a[F.a.length-1][1]+=B||""),$;v()}d("End of input while parsing an array (missing ']')")}catch(H){throw H.hint=H.hint||E($),H}}function S($){var F="",M={},B,U,H;try{if(u&&(B=n.createComment(M,{c:{},o:[]})),$?U=1:(h(),U=s),v(),B&&(H=w(U,!0).join(`
`)),o==="}"&&!$)return B&&(B.e=[H]),h(),M;for(;o;){if(F=y(),v(),o!==":"&&d("Expected ':' instead of '"+o+"'"),h(),M[F]=C(),U=s,v(),o===","&&(h(),U=s,v()),B){var D=w(U);B.c[F]=[H||"",D[0]||""],H=D[1],B.o.push(F)}if(o==="}"&&!$)return h(),B&&(B.c[F][1]+=H||""),M;v()}if($)return M;d("End of input while parsing an object (missing '}')")}catch(z){throw z.hint=z.hint||E(M),z}}function C(){switch(v(),o){case"{":return S();case"[":return T();case"'":case'"':return m(!0);default:return b()}}function A($,F){var M=s;if(v(),o&&d("Syntax error, found trailing characters"),u){var B=F.join(`
`),U=w(M).join(`
`);if(U||B){var H=n.createComment($,n.getComment($));H.r=[B,U]}}return $}function k(){v();var $=u?w(1):null;switch(o){case"{":return A(S(),$);case"[":return A(T(),$);default:return A(C(),$)}}function N(){v();var $=u?w(1):null;switch(o){case"{":return A(S(),$);case"[":return A(T(),$)}try{return A(S(!0),$)}catch(F){c();try{return A(C(),$)}catch{throw F}}}if(typeof e!="string")throw new Error("source is not a string");var O=null,P=!0;return t&&typeof t=="object"&&(u=t.keepWsc,O=t.dsf,P=t.legacyRoot!==!1),l=r.loadDsf(O,"parse"),i=e,c(),P?N():k()},Z2t=function(e,t){var n=m4,r=qQ,i={obj:["{","}"],arr:["[","]"],key:["",""],qkey:['"','"'],col:[":",""],com:[",",""],str:["",""],qstr:['"','"'],mstr:["'''","'''"],num:["",""],lit:["",""],dsf:["",""],esc:["\\",""],uni:["\\u",""],rem:["",""]},s=n.EOL,o="  ",a=!1,u=!1,l=!1,c=!1,f=0,d=1,h="",p=null,m=!1,g=i;if(t&&typeof t=="object"){t.quotes=t.quotes==="always"?"strings":t.quotes,(t.eol===`
`||t.eol===`\r
`)&&(s=t.eol),a=t.keepWsc,f=t.condense||0,u=t.bracesSameLine,l=t.quotes==="all"||t.quotes==="keys",c=t.quotes==="all"||t.quotes==="strings"||t.separator===!0,c||t.multiline=="off"?d=0:d=t.multiline=="no-tabs"?2:1,h=t.separator===!0?g.com[0]:"",p=t.dsf,m=t.sortProps,typeof t.space=="number"?o=new Array(t.space+1).join(" "):typeof t.space=="string"&&(o=t.space),t.colors===!0&&(g={obj:["\x1B[37m{\x1B[0m","\x1B[37m}\x1B[0m"],arr:["\x1B[37m[\x1B[0m","\x1B[37m]\x1B[0m"],key:["\x1B[33m","\x1B[0m"],qkey:['\x1B[33m"','"\x1B[0m'],col:["\x1B[37m:\x1B[0m",""],com:["\x1B[37m,\x1B[0m",""],str:["\x1B[37;1m","\x1B[0m"],qstr:['\x1B[37;1m"','"\x1B[0m'],mstr:["\x1B[37;1m'''","'''\x1B[0m"],num:["\x1B[36;1m","\x1B[0m"],lit:["\x1B[36m","\x1B[0m"],dsf:["\x1B[37m","\x1B[0m"],esc:["\x1B[31m\\","\x1B[0m"],uni:["\x1B[31m\\u","\x1B[0m"],rem:["\x1B[35m","\x1B[0m"]});var y,v=Object.keys(i);for(y=v.length-1;y>=0;y--){var b=v[y];g[b].push(i[b][0].length,i[b][1].length)}}var w,E="---\u2028--\uFEFF-",T=new RegExp('[\\\\\\"\0-'+E+"]","g"),S=new RegExp(`^\\s|^"|^'|^#|^\\/\\*|^\\/\\/|^\\{|^\\}|^\\[|^\\]|^:|^,|\\s$|[\0-`+E+"]","g"),C=new RegExp("'''|^[\\s]+$|[\0-"+(d===2?"	":"\b")+"\v\f-"+E+"]","g"),A=new RegExp("^(true|false|null)\\s*((,|\\]|\\}|#|//|/\\*).*)?$"),k={"\b":"b","	":"t","\n":"n","\f":"f","\r":"r",'"':'"',"\\":"\\"},N=/[,\{\[\}\]\s:#"']|\/\/|\/\*/,O="",P=0;function $(W,j){return P+=W[0].length+W[1].length-W[2]-W[3],W[0]+j+W[1]}function F(W){return W.replace(T,function(j){var q=k[j];return typeof q=="string"?$(g.esc,q):$(g.uni,("0000"+j.charCodeAt(0).toString(16)).slice(-4))})}function M(W,j,q,G){return W?(S.lastIndex=0,A.lastIndex=0,c||q||S.test(W)||n.tryParseNumber(W,!0)!==void 0||A.test(W)?(T.lastIndex=0,C.lastIndex=0,T.test(W)?!C.test(W)&&!G&&d?B(W,j):$(g.qstr,F(W)):$(g.qstr,W)):$(g.str,W)):$(g.qstr,"")}function B(W,j){var q,G=W.replace(/\r/g,"").split(`
`);if(j+=o,G.length===1)return $(g.mstr,G[0]);var ne=s+j+g.mstr[0];for(q=0;q<G.length;q++)ne+=s,G[q]&&(ne+=j+G[q]);return ne+s+j+g.mstr[1]}function U(W){return W?l||N.test(W)?(T.lastIndex=0,$(g.qkey,T.test(W)?F(W):W)):$(g.key,W):'""'}function H(W,j,q,G){function ne(gn){return gn&&gn[gn[0]==="\r"?1:0]===`
`}function ce(gn){return gn&&!ne(gn)}function de(gn,An,nr){if(!gn)return"";gn=n.forceComment(gn);var rr,zo=gn.length;for(rr=0;rr<zo&&gn[rr]<=" ";rr++);return nr&&rr>0&&(gn=gn.substr(rr)),rr<zo?An+$(g.rem,gn):gn}var he=w(W);if(he!==void 0)return $(g.dsf,he);switch(typeof W){case"string":return M(W,O,j,G);case"number":return isFinite(W)?$(g.num,String(W)):$(g.lit,"null");case"boolean":return $(g.lit,String(W));case"object":if(!W)return $(g.lit,"null");var ve;a&&(ve=n.getComment(W));var Ie=Object.prototype.toString.apply(W)==="[object Array]",be=O;O+=o;var Ke=s+be,Ue=s+O,yt=q||u?"":Ke,it=[],_e,ke=f?[]:null,ze=c,ct=d,Ot=h?"":g.com[0],We=0,ge,ht,vt,me,Ae,He,ut,_t,Ln;if(Ie){for(ge=0,ht=W.length;ge<ht;ge++){if(_e=ge<ht-1,ve?(He=ve.a[ge]||[],ut=ce(He[1]),it.push(de(He[0],`
`)+Ue),ke&&(He[0]||He[1]||ut)&&(ke=null)):it.push(Ue),P=0,me=W[ge],it.push(H(me,ve?ut:!1,!0)+(_e?h:"")),ke){switch(typeof me){case"string":P=0,c=!0,d=0,ke.push(H(me,!1,!0)+(_e?g.com[0]:"")),c=ze,d=ct;break;case"object":if(me){ke=null;break}default:ke.push(it[it.length-1]+(_e?Ot:""));break}_e&&(P+=g.com[0].length-g.com[2]),We+=P}ve&&He[1]&&it.push(de(He[1],ut?" ":`
`,ut))}ht===0?ve&&ve.e&&it.push(de(ve.e[0],`
`)+Ke):it.push(Ke),it.length===0?_t=$(g.arr,""):(_t=yt+$(g.arr,it.join("")),ke&&(Ln=ke.join(" "),Ln.length-We<=f&&(_t=$(g.arr,Ln))))}else{var Cr=ve?ve.o.slice():[],Fn=[];for(vt in W)Object.prototype.hasOwnProperty.call(W,vt)&&Cr.indexOf(vt)<0&&Fn.push(vt);m&&Fn.sort();var cr=Cr.concat(Fn);for(ge=0,ht=cr.length;ge<ht;ge++)if(_e=ge<ht-1,vt=cr[ge],ve?(He=ve.c[vt]||[],ut=ce(He[1]),it.push(de(He[0],`
`)+Ue),ke&&(He[0]||He[1]||ut)&&(ke=null)):it.push(Ue),P=0,me=W[vt],Ae=H(me,ve&&ut),it.push(U(vt)+g.col[0]+(ne(Ae)?"":" ")+Ae+(_e?h:"")),ve&&He[1]&&it.push(de(He[1],ut?" ":`
`,ut)),ke){switch(typeof me){case"string":P=0,c=!0,d=0,Ae=H(me,!1),c=ze,d=ct,ke.push(U(vt)+g.col[0]+" "+Ae+(_e?g.com[0]:""));break;case"object":if(me){ke=null;break}default:ke.push(it[it.length-1]+(_e?Ot:""));break}P+=g.col[0].length-g.col[2],_e&&(P+=g.com[0].length-g.com[2]),We+=P}ht===0?ve&&ve.e&&it.push(de(ve.e[0],`
`)+Ke):it.push(Ke),it.length===0?_t=$(g.obj,""):(_t=yt+$(g.obj,it.join("")),ke&&(Ln=ke.join(" "),Ln.length-We<=f&&(_t=$(g.obj,Ln))))}return O=be,_t}}w=r.loadDsf(p,"stringify");var D="",z=a?z=(n.getComment(e)||{}).r:null;return z&&z[0]&&(D=z[0]+`
`),D+=H(e,null,!0,!0),z&&(D+=z[1]||""),D},cE=m4;function OC(e,t,n){var r;return e&&(r={b:e}),t&&((r=r||{}).a=t),n&&((r=r||{}).x=n),r}function vV(e,t){if(!(e===null||typeof e!="object")){var n=cE.getComment(e);n&&cE.removeComment(e);var r,i,s,o;if(Object.prototype.toString.apply(e)==="[object Array]"){for(o={a:{}},r=0,i=e.length;r<i;r++)fde(o.a,r,n.a[r],vV(e[r]))&&(s=!0);!s&&n.e&&(o.e=OC(n.e[0],n.e[1]),s=!0)}else{o={s:{}};var a,u=Object.keys(e);for(n&&n.o?(a=[],n.o.concat(u).forEach(function(c){Object.prototype.hasOwnProperty.call(e,c)&&a.indexOf(c)<0&&a.push(c)})):a=u,o.o=a,r=0,i=a.length;r<i;r++){var l=a[r];fde(o.s,l,n.c[l],vV(e[l]))&&(s=!0)}!s&&n.e&&(o.e=OC(n.e[0],n.e[1]),s=!0)}return t&&n&&n.r&&(o.r=OC(n.r[0],n.r[1])),s?o:void 0}}function eCt(){var e="";return[].forEach.call(arguments,function(t){t&&t.trim()!==""&&(e&&(e+="; "),e+=t.trim())}),e}function tCt(e,t){var n=[];if(bV(e,t,n,[]),n.length>0){var r=L$(t,null,1);r+=`
# Orphaned comments:
`,n.forEach(function(i){r+=("# "+i.path.join("/")+": "+eCt(i.b,i.a,i.e)).replace(`
`,"\\n ")+`
`}),L$(t,r,1)}}function fde(e,t,n,r){var i=OC(n?n[0]:void 0,n?n[1]:void 0,r);return i&&(e[t]=i),i}function $C(e,t){var n=OC(t.b,t.a);return n.path=e,n}function MC(e,t,n){if(e){var r,i;if(e.a)for(r=0,i=e.a.length;r<i;r++){var s=n.slice().concat([r]),o=e.a[r];o&&(t.push($C(s,o)),MC(o.x,t,s))}else e.o&&e.o.forEach(function(a){var u=n.slice().concat([a]),l=e.s[a];l&&(t.push($C(u,l)),MC(l.x,t,u))});e.e&&t.push($C(n,e.e))}}function bV(e,t,n,r){if(e){if(t===null||typeof t!="object"){MC(e,n,r);return}var i,s=cE.createComment(t);if(r.length===0&&e.r&&(s.r=[e.r.b,e.r.a]),Object.prototype.toString.apply(t)==="[object Array]"){s.a=[];var o=e.a||{};for(var a in o)if(o.hasOwnProperty(a)){i=parseInt(a);var u=e.a[a];if(u){var l=r.slice().concat([i]);i<t.length?(s.a[i]=[u.b,u.a],bV(u.x,t[i],n,l)):(n.push($C(l,u)),MC(u.x,n,l))}}i===0&&e.e&&(s.e=[e.e.b,e.e.a])}else s.c={},s.o=[],(e.o||[]).forEach(function(c){var f=r.slice().concat([c]),d=e.s[c];Object.prototype.hasOwnProperty.call(t,c)?(s.o.push(c),d&&(s.c[c]=[d.b,d.a],bV(d.x,t[c],n,f))):d&&(n.push($C(f,d)),MC(d.x,n,f))}),e.e&&(s.e=[e.e.b,e.e.a])}}function L$(e,t,n){var r=cE.createComment(e,cE.getComment(e));return r.r||(r.r=["",""]),(t||t==="")&&(r.r[n]=cE.forceComment(t)),r.r[n]||""}var nCt={extract:function(e){return vV(e,!0)},merge:tCt,header:function(e,t){return L$(e,t,0)},footer:function(e,t){return L$(e,t,1)}};/*!
 * Hjson v3.2.1
 * https://hjson.github.io
 *
 * Copyright 2014-2017 Christian Zangl, MIT license
 * Details and documentation:
 * https://github.com/hjson/hjson-js
 *
 * This code is based on the the JSON version by Douglas Crockford:
 * https://github.com/douglascrockford/JSON-js (json_parse.js, json2.js)
 */var dde=m4,rCt=Y2t,hde=J2t,pde=Z2t,iCt=nCt,sCt=qQ,WQ={parse:hde,stringify:pde,endOfLine:function(){return dde.EOL},setEndOfLine:function(e){(e===`
`||e===`\r
`)&&(dde.EOL=e)},version:rCt,rt:{parse:function(e,t){return(t=t||{}).keepWsc=!0,hde(e,t)},stringify:function(e,t){return(t=t||{}).keepWsc=!0,pde(e,t)}},comments:iCt,dsf:sCt.std},_V={exports:{}},bRe={},Uf={},dx={},Wk={},Pn={},pI={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.regexpCode=e.getEsmExportName=e.getProperty=e.safeStringify=e.stringify=e.strConcat=e.addCodeArg=e.str=e._=e.nil=e._Code=e.Name=e.IDENTIFIER=e._CodeOrName=void 0;class t{}e._CodeOrName=t,e.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;class n extends t{constructor(v){if(super(),!e.IDENTIFIER.test(v))throw new Error("CodeGen: name must be a valid identifier");this.str=v}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}}e.Name=n;class r extends t{constructor(v){super(),this._items=typeof v=="string"?[v]:v}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;const v=this._items[0];return v===""||v==='""'}get str(){var v;return(v=this._str)!==null&&v!==void 0?v:this._str=this._items.reduce((b,w)=>`${b}${w}`,"")}get names(){var v;return(v=this._names)!==null&&v!==void 0?v:this._names=this._items.reduce((b,w)=>(w instanceof n&&(b[w.str]=(b[w.str]||0)+1),b),{})}}e._Code=r,e.nil=new r("");function i(y,...v){const b=[y[0]];let w=0;for(;w<v.length;)a(b,v[w]),b.push(y[++w]);return new r(b)}e._=i;const s=new r("+");function o(y,...v){const b=[h(y[0])];let w=0;for(;w<v.length;)b.push(s),a(b,v[w]),b.push(s,h(y[++w]));return u(b),new r(b)}e.str=o;function a(y,v){v instanceof r?y.push(...v._items):v instanceof n?y.push(v):y.push(f(v))}e.addCodeArg=a;function u(y){let v=1;for(;v<y.length-1;){if(y[v]===s){const b=l(y[v-1],y[v+1]);if(b!==void 0){y.splice(v-1,3,b);continue}y[v++]="+"}v++}}function l(y,v){if(v==='""')return y;if(y==='""')return v;if(typeof y=="string")return v instanceof n||y[y.length-1]!=='"'?void 0:typeof v!="string"?`${y.slice(0,-1)}${v}"`:v[0]==='"'?y.slice(0,-1)+v.slice(1):void 0;if(typeof v=="string"&&v[0]==='"'&&!(y instanceof n))return`"${y}${v.slice(1)}`}function c(y,v){return v.emptyStr()?y:y.emptyStr()?v:o`${y}${v}`}e.strConcat=c;function f(y){return typeof y=="number"||typeof y=="boolean"||y===null?y:h(Array.isArray(y)?y.join(","):y)}function d(y){return new r(h(y))}e.stringify=d;function h(y){return JSON.stringify(y).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}e.safeStringify=h;function p(y){return typeof y=="string"&&e.IDENTIFIER.test(y)?new r(`.${y}`):i`[${y}]`}e.getProperty=p;function m(y){if(typeof y=="string"&&e.IDENTIFIER.test(y))return new r(`${y}`);throw new Error(`CodeGen: invalid export name: ${y}, use explicit $id name mapping`)}e.getEsmExportName=m;function g(y){return new r(y.toString())}e.regexpCode=g})(pI);var wV={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ValueScope=e.ValueScopeName=e.Scope=e.varKinds=e.UsedValueState=void 0;const t=pI;class n extends Error{constructor(l){super(`CodeGen: "code" for ${l} not defined`),this.value=l.value}}var r;(function(u){u[u.Started=0]="Started",u[u.Completed=1]="Completed"})(r||(e.UsedValueState=r={})),e.varKinds={const:new t.Name("const"),let:new t.Name("let"),var:new t.Name("var")};class i{constructor({prefixes:l,parent:c}={}){this._names={},this._prefixes=l,this._parent=c}toName(l){return l instanceof t.Name?l:this.name(l)}name(l){return new t.Name(this._newName(l))}_newName(l){const c=this._names[l]||this._nameGroup(l);return`${l}${c.index++}`}_nameGroup(l){var c,f;if(!((f=(c=this._parent)===null||c===void 0?void 0:c._prefixes)===null||f===void 0)&&f.has(l)||this._prefixes&&!this._prefixes.has(l))throw new Error(`CodeGen: prefix "${l}" is not allowed in this scope`);return this._names[l]={prefix:l,index:0}}}e.Scope=i;class s extends t.Name{constructor(l,c){super(c),this.prefix=l}setValue(l,{property:c,itemIndex:f}){this.value=l,this.scopePath=(0,t._)`.${new t.Name(c)}[${f}]`}}e.ValueScopeName=s;const o=(0,t._)`\n`;class a extends i{constructor(l){super(l),this._values={},this._scope=l.scope,this.opts={...l,_n:l.lines?o:t.nil}}get(){return this._scope}name(l){return new s(l,this._newName(l))}value(l,c){var f;if(c.ref===void 0)throw new Error("CodeGen: ref must be passed in value");const d=this.toName(l),{prefix:h}=d,p=(f=c.key)!==null&&f!==void 0?f:c.ref;let m=this._values[h];if(m){const v=m.get(p);if(v)return v}else m=this._values[h]=new Map;m.set(p,d);const g=this._scope[h]||(this._scope[h]=[]),y=g.length;return g[y]=c.ref,d.setValue(c,{property:h,itemIndex:y}),d}getValue(l,c){const f=this._values[l];if(f)return f.get(c)}scopeRefs(l,c=this._values){return this._reduceValues(c,f=>{if(f.scopePath===void 0)throw new Error(`CodeGen: name "${f}" has no value`);return(0,t._)`${l}${f.scopePath}`})}scopeCode(l=this._values,c,f){return this._reduceValues(l,d=>{if(d.value===void 0)throw new Error(`CodeGen: name "${d}" has no value`);return d.value.code},c,f)}_reduceValues(l,c,f={},d){let h=t.nil;for(const p in l){const m=l[p];if(!m)continue;const g=f[p]=f[p]||new Map;m.forEach(y=>{if(g.has(y))return;g.set(y,r.Started);let v=c(y);if(v){const b=this.opts.es5?e.varKinds.var:e.varKinds.const;h=(0,t._)`${h}${b} ${y} = ${v};${this.opts._n}`}else if(v=d==null?void 0:d(y))h=(0,t._)`${h}${v}${this.opts._n}`;else throw new n(y);g.set(y,r.Completed)})}return h}}e.ValueScope=a})(wV);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.or=e.and=e.not=e.CodeGen=e.operators=e.varKinds=e.ValueScopeName=e.ValueScope=e.Scope=e.Name=e.regexpCode=e.stringify=e.getProperty=e.nil=e.strConcat=e.str=e._=void 0;const t=pI,n=wV;var r=pI;Object.defineProperty(e,"_",{enumerable:!0,get:function(){return r._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return r.str}}),Object.defineProperty(e,"strConcat",{enumerable:!0,get:function(){return r.strConcat}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return r.nil}}),Object.defineProperty(e,"getProperty",{enumerable:!0,get:function(){return r.getProperty}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return r.stringify}}),Object.defineProperty(e,"regexpCode",{enumerable:!0,get:function(){return r.regexpCode}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return r.Name}});var i=wV;Object.defineProperty(e,"Scope",{enumerable:!0,get:function(){return i.Scope}}),Object.defineProperty(e,"ValueScope",{enumerable:!0,get:function(){return i.ValueScope}}),Object.defineProperty(e,"ValueScopeName",{enumerable:!0,get:function(){return i.ValueScopeName}}),Object.defineProperty(e,"varKinds",{enumerable:!0,get:function(){return i.varKinds}}),e.operators={GT:new t._Code(">"),GTE:new t._Code(">="),LT:new t._Code("<"),LTE:new t._Code("<="),EQ:new t._Code("==="),NEQ:new t._Code("!=="),NOT:new t._Code("!"),OR:new t._Code("||"),AND:new t._Code("&&"),ADD:new t._Code("+")};class s{optimizeNodes(){return this}optimizeNames(q,G){return this}}class o extends s{constructor(q,G,ne){super(),this.varKind=q,this.name=G,this.rhs=ne}render({es5:q,_n:G}){const ne=q?n.varKinds.var:this.varKind,ce=this.rhs===void 0?"":` = ${this.rhs}`;return`${ne} ${this.name}${ce};`+G}optimizeNames(q,G){if(q[this.name.str])return this.rhs&&(this.rhs=$(this.rhs,q,G)),this}get names(){return this.rhs instanceof t._CodeOrName?this.rhs.names:{}}}class a extends s{constructor(q,G,ne){super(),this.lhs=q,this.rhs=G,this.sideEffects=ne}render({_n:q}){return`${this.lhs} = ${this.rhs};`+q}optimizeNames(q,G){if(!(this.lhs instanceof t.Name&&!q[this.lhs.str]&&!this.sideEffects))return this.rhs=$(this.rhs,q,G),this}get names(){const q=this.lhs instanceof t.Name?{}:{...this.lhs.names};return P(q,this.rhs)}}class u extends a{constructor(q,G,ne,ce){super(q,ne,ce),this.op=G}render({_n:q}){return`${this.lhs} ${this.op}= ${this.rhs};`+q}}class l extends s{constructor(q){super(),this.label=q,this.names={}}render({_n:q}){return`${this.label}:`+q}}class c extends s{constructor(q){super(),this.label=q,this.names={}}render({_n:q}){return`break${this.label?` ${this.label}`:""};`+q}}class f extends s{constructor(q){super(),this.error=q}render({_n:q}){return`throw ${this.error};`+q}get names(){return this.error.names}}class d extends s{constructor(q){super(),this.code=q}render({_n:q}){return`${this.code};`+q}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(q,G){return this.code=$(this.code,q,G),this}get names(){return this.code instanceof t._CodeOrName?this.code.names:{}}}class h extends s{constructor(q=[]){super(),this.nodes=q}render(q){return this.nodes.reduce((G,ne)=>G+ne.render(q),"")}optimizeNodes(){const{nodes:q}=this;let G=q.length;for(;G--;){const ne=q[G].optimizeNodes();Array.isArray(ne)?q.splice(G,1,...ne):ne?q[G]=ne:q.splice(G,1)}return q.length>0?this:void 0}optimizeNames(q,G){const{nodes:ne}=this;let ce=ne.length;for(;ce--;){const de=ne[ce];de.optimizeNames(q,G)||(F(q,de.names),ne.splice(ce,1))}return ne.length>0?this:void 0}get names(){return this.nodes.reduce((q,G)=>O(q,G.names),{})}}class p extends h{render(q){return"{"+q._n+super.render(q)+"}"+q._n}}class m extends h{}class g extends p{}g.kind="else";class y extends p{constructor(q,G){super(G),this.condition=q}render(q){let G=`if(${this.condition})`+super.render(q);return this.else&&(G+="else "+this.else.render(q)),G}optimizeNodes(){super.optimizeNodes();const q=this.condition;if(q===!0)return this.nodes;let G=this.else;if(G){const ne=G.optimizeNodes();G=this.else=Array.isArray(ne)?new g(ne):ne}if(G)return q===!1?G instanceof y?G:G.nodes:this.nodes.length?this:new y(M(q),G instanceof y?[G]:G.nodes);if(!(q===!1||!this.nodes.length))return this}optimizeNames(q,G){var ne;if(this.else=(ne=this.else)===null||ne===void 0?void 0:ne.optimizeNames(q,G),!!(super.optimizeNames(q,G)||this.else))return this.condition=$(this.condition,q,G),this}get names(){const q=super.names;return P(q,this.condition),this.else&&O(q,this.else.names),q}}y.kind="if";class v extends p{}v.kind="for";class b extends v{constructor(q){super(),this.iteration=q}render(q){return`for(${this.iteration})`+super.render(q)}optimizeNames(q,G){if(super.optimizeNames(q,G))return this.iteration=$(this.iteration,q,G),this}get names(){return O(super.names,this.iteration.names)}}class w extends v{constructor(q,G,ne,ce){super(),this.varKind=q,this.name=G,this.from=ne,this.to=ce}render(q){const G=q.es5?n.varKinds.var:this.varKind,{name:ne,from:ce,to:de}=this;return`for(${G} ${ne}=${ce}; ${ne}<${de}; ${ne}++)`+super.render(q)}get names(){const q=P(super.names,this.from);return P(q,this.to)}}class E extends v{constructor(q,G,ne,ce){super(),this.loop=q,this.varKind=G,this.name=ne,this.iterable=ce}render(q){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(q)}optimizeNames(q,G){if(super.optimizeNames(q,G))return this.iterable=$(this.iterable,q,G),this}get names(){return O(super.names,this.iterable.names)}}class T extends p{constructor(q,G,ne){super(),this.name=q,this.args=G,this.async=ne}render(q){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(q)}}T.kind="func";class S extends h{render(q){return"return "+super.render(q)}}S.kind="return";class C extends p{render(q){let G="try"+super.render(q);return this.catch&&(G+=this.catch.render(q)),this.finally&&(G+=this.finally.render(q)),G}optimizeNodes(){var q,G;return super.optimizeNodes(),(q=this.catch)===null||q===void 0||q.optimizeNodes(),(G=this.finally)===null||G===void 0||G.optimizeNodes(),this}optimizeNames(q,G){var ne,ce;return super.optimizeNames(q,G),(ne=this.catch)===null||ne===void 0||ne.optimizeNames(q,G),(ce=this.finally)===null||ce===void 0||ce.optimizeNames(q,G),this}get names(){const q=super.names;return this.catch&&O(q,this.catch.names),this.finally&&O(q,this.finally.names),q}}class A extends p{constructor(q){super(),this.error=q}render(q){return`catch(${this.error})`+super.render(q)}}A.kind="catch";class k extends p{render(q){return"finally"+super.render(q)}}k.kind="finally";class N{constructor(q,G={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...G,_n:G.lines?`
`:""},this._extScope=q,this._scope=new n.Scope({parent:q}),this._nodes=[new m]}toString(){return this._root.render(this.opts)}name(q){return this._scope.name(q)}scopeName(q){return this._extScope.name(q)}scopeValue(q,G){const ne=this._extScope.value(q,G);return(this._values[ne.prefix]||(this._values[ne.prefix]=new Set)).add(ne),ne}getScopeValue(q,G){return this._extScope.getValue(q,G)}scopeRefs(q){return this._extScope.scopeRefs(q,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(q,G,ne,ce){const de=this._scope.toName(G);return ne!==void 0&&ce&&(this._constants[de.str]=ne),this._leafNode(new o(q,de,ne)),de}const(q,G,ne){return this._def(n.varKinds.const,q,G,ne)}let(q,G,ne){return this._def(n.varKinds.let,q,G,ne)}var(q,G,ne){return this._def(n.varKinds.var,q,G,ne)}assign(q,G,ne){return this._leafNode(new a(q,G,ne))}add(q,G){return this._leafNode(new u(q,e.operators.ADD,G))}code(q){return typeof q=="function"?q():q!==t.nil&&this._leafNode(new d(q)),this}object(...q){const G=["{"];for(const[ne,ce]of q)G.length>1&&G.push(","),G.push(ne),(ne!==ce||this.opts.es5)&&(G.push(":"),(0,t.addCodeArg)(G,ce));return G.push("}"),new t._Code(G)}if(q,G,ne){if(this._blockNode(new y(q)),G&&ne)this.code(G).else().code(ne).endIf();else if(G)this.code(G).endIf();else if(ne)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(q){return this._elseNode(new y(q))}else(){return this._elseNode(new g)}endIf(){return this._endBlockNode(y,g)}_for(q,G){return this._blockNode(q),G&&this.code(G).endFor(),this}for(q,G){return this._for(new b(q),G)}forRange(q,G,ne,ce,de=this.opts.es5?n.varKinds.var:n.varKinds.let){const he=this._scope.toName(q);return this._for(new w(de,he,G,ne),()=>ce(he))}forOf(q,G,ne,ce=n.varKinds.const){const de=this._scope.toName(q);if(this.opts.es5){const he=G instanceof t.Name?G:this.var("_arr",G);return this.forRange("_i",0,(0,t._)`${he}.length`,ve=>{this.var(de,(0,t._)`${he}[${ve}]`),ne(de)})}return this._for(new E("of",ce,de,G),()=>ne(de))}forIn(q,G,ne,ce=this.opts.es5?n.varKinds.var:n.varKinds.const){if(this.opts.ownProperties)return this.forOf(q,(0,t._)`Object.keys(${G})`,ne);const de=this._scope.toName(q);return this._for(new E("in",ce,de,G),()=>ne(de))}endFor(){return this._endBlockNode(v)}label(q){return this._leafNode(new l(q))}break(q){return this._leafNode(new c(q))}return(q){const G=new S;if(this._blockNode(G),this.code(q),G.nodes.length!==1)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(S)}try(q,G,ne){if(!G&&!ne)throw new Error('CodeGen: "try" without "catch" and "finally"');const ce=new C;if(this._blockNode(ce),this.code(q),G){const de=this.name("e");this._currNode=ce.catch=new A(de),G(de)}return ne&&(this._currNode=ce.finally=new k,this.code(ne)),this._endBlockNode(A,k)}throw(q){return this._leafNode(new f(q))}block(q,G){return this._blockStarts.push(this._nodes.length),q&&this.code(q).endBlock(G),this}endBlock(q){const G=this._blockStarts.pop();if(G===void 0)throw new Error("CodeGen: not in self-balancing block");const ne=this._nodes.length-G;if(ne<0||q!==void 0&&ne!==q)throw new Error(`CodeGen: wrong number of nodes: ${ne} vs ${q} expected`);return this._nodes.length=G,this}func(q,G=t.nil,ne,ce){return this._blockNode(new T(q,G,ne)),ce&&this.code(ce).endFunc(),this}endFunc(){return this._endBlockNode(T)}optimize(q=1){for(;q-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(q){return this._currNode.nodes.push(q),this}_blockNode(q){this._currNode.nodes.push(q),this._nodes.push(q)}_endBlockNode(q,G){const ne=this._currNode;if(ne instanceof q||G&&ne instanceof G)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${G?`${q.kind}/${G.kind}`:q.kind}"`)}_elseNode(q){const G=this._currNode;if(!(G instanceof y))throw new Error('CodeGen: "else" without "if"');return this._currNode=G.else=q,this}get _root(){return this._nodes[0]}get _currNode(){const q=this._nodes;return q[q.length-1]}set _currNode(q){const G=this._nodes;G[G.length-1]=q}}e.CodeGen=N;function O(j,q){for(const G in q)j[G]=(j[G]||0)+(q[G]||0);return j}function P(j,q){return q instanceof t._CodeOrName?O(j,q.names):j}function $(j,q,G){if(j instanceof t.Name)return ne(j);if(!ce(j))return j;return new t._Code(j._items.reduce((de,he)=>(he instanceof t.Name&&(he=ne(he)),he instanceof t._Code?de.push(...he._items):de.push(he),de),[]));function ne(de){const he=G[de.str];return he===void 0||q[de.str]!==1?de:(delete q[de.str],he)}function ce(de){return de instanceof t._Code&&de._items.some(he=>he instanceof t.Name&&q[he.str]===1&&G[he.str]!==void 0)}}function F(j,q){for(const G in q)j[G]=(j[G]||0)-(q[G]||0)}function M(j){return typeof j=="boolean"||typeof j=="number"||j===null?!j:(0,t._)`!${W(j)}`}e.not=M;const B=z(e.operators.AND);function U(...j){return j.reduce(B)}e.and=U;const H=z(e.operators.OR);function D(...j){return j.reduce(H)}e.or=D;function z(j){return(q,G)=>q===t.nil?G:G===t.nil?q:(0,t._)`${W(q)} ${j} ${W(G)}`}function W(j){return j instanceof t.Name?j:(0,t._)`(${j})`}})(Pn);var wt={};Object.defineProperty(wt,"__esModule",{value:!0});wt.checkStrictMode=wt.getErrorPath=wt.Type=wt.useFunc=wt.setEvaluated=wt.evaluatedPropsToName=wt.mergeEvaluated=wt.eachItem=wt.unescapeJsonPointer=wt.escapeJsonPointer=wt.escapeFragment=wt.unescapeFragment=wt.schemaRefOrVal=wt.schemaHasRulesButRef=wt.schemaHasRules=wt.checkUnknownRules=wt.alwaysValidSchema=wt.toHash=void 0;const Yr=Pn,oCt=pI;function aCt(e){const t={};for(const n of e)t[n]=!0;return t}wt.toHash=aCt;function uCt(e,t){return typeof t=="boolean"?t:Object.keys(t).length===0?!0:(_Re(e,t),!wRe(t,e.self.RULES.all))}wt.alwaysValidSchema=uCt;function _Re(e,t=e.schema){const{opts:n,self:r}=e;if(!n.strictSchema||typeof t=="boolean")return;const i=r.RULES.keywords;for(const s in t)i[s]||SRe(e,`unknown keyword: "${s}"`)}wt.checkUnknownRules=_Re;function wRe(e,t){if(typeof e=="boolean")return!e;for(const n in e)if(t[n])return!0;return!1}wt.schemaHasRules=wRe;function lCt(e,t){if(typeof e=="boolean")return!e;for(const n in e)if(n!=="$ref"&&t.all[n])return!0;return!1}wt.schemaHasRulesButRef=lCt;function cCt({topSchemaRef:e,schemaPath:t},n,r,i){if(!i){if(typeof n=="number"||typeof n=="boolean")return n;if(typeof n=="string")return(0,Yr._)`${n}`}return(0,Yr._)`${e}${t}${(0,Yr.getProperty)(r)}`}wt.schemaRefOrVal=cCt;function fCt(e){return ERe(decodeURIComponent(e))}wt.unescapeFragment=fCt;function dCt(e){return encodeURIComponent(GQ(e))}wt.escapeFragment=dCt;function GQ(e){return typeof e=="number"?`${e}`:e.replace(/~/g,"~0").replace(/\//g,"~1")}wt.escapeJsonPointer=GQ;function ERe(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}wt.unescapeJsonPointer=ERe;function hCt(e,t){if(Array.isArray(e))for(const n of e)t(n);else t(e)}wt.eachItem=hCt;function mde({mergeNames:e,mergeToName:t,mergeValues:n,resultToName:r}){return(i,s,o,a)=>{const u=o===void 0?s:o instanceof Yr.Name?(s instanceof Yr.Name?e(i,s,o):t(i,s,o),o):s instanceof Yr.Name?(t(i,o,s),s):n(s,o);return a===Yr.Name&&!(u instanceof Yr.Name)?r(i,u):u}}wt.mergeEvaluated={props:mde({mergeNames:(e,t,n)=>e.if((0,Yr._)`${n} !== true && ${t} !== undefined`,()=>{e.if((0,Yr._)`${t} === true`,()=>e.assign(n,!0),()=>e.assign(n,(0,Yr._)`${n} || {}`).code((0,Yr._)`Object.assign(${n}, ${t})`))}),mergeToName:(e,t,n)=>e.if((0,Yr._)`${n} !== true`,()=>{t===!0?e.assign(n,!0):(e.assign(n,(0,Yr._)`${n} || {}`),YQ(e,n,t))}),mergeValues:(e,t)=>e===!0?!0:{...e,...t},resultToName:xRe}),items:mde({mergeNames:(e,t,n)=>e.if((0,Yr._)`${n} !== true && ${t} !== undefined`,()=>e.assign(n,(0,Yr._)`${t} === true ? true : ${n} > ${t} ? ${n} : ${t}`)),mergeToName:(e,t,n)=>e.if((0,Yr._)`${n} !== true`,()=>e.assign(n,t===!0?!0:(0,Yr._)`${n} > ${t} ? ${n} : ${t}`)),mergeValues:(e,t)=>e===!0?!0:Math.max(e,t),resultToName:(e,t)=>e.var("items",t)})};function xRe(e,t){if(t===!0)return e.var("props",!0);const n=e.var("props",(0,Yr._)`{}`);return t!==void 0&&YQ(e,n,t),n}wt.evaluatedPropsToName=xRe;function YQ(e,t,n){Object.keys(n).forEach(r=>e.assign((0,Yr._)`${t}${(0,Yr.getProperty)(r)}`,!0))}wt.setEvaluated=YQ;const gde={};function pCt(e,t){return e.scopeValue("func",{ref:t,code:gde[t.code]||(gde[t.code]=new oCt._Code(t.code))})}wt.useFunc=pCt;var EV;(function(e){e[e.Num=0]="Num",e[e.Str=1]="Str"})(EV||(wt.Type=EV={}));function mCt(e,t,n){if(e instanceof Yr.Name){const r=t===EV.Num;return n?r?(0,Yr._)`"[" + ${e} + "]"`:(0,Yr._)`"['" + ${e} + "']"`:r?(0,Yr._)`"/" + ${e}`:(0,Yr._)`"/" + ${e}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return n?(0,Yr.getProperty)(e).toString():"/"+GQ(e)}wt.getErrorPath=mCt;function SRe(e,t,n=e.opts.strictSchema){if(n){if(t=`strict mode: ${t}`,n===!0)throw new Error(t);e.self.logger.warn(t)}}wt.checkStrictMode=SRe;var tp={};Object.defineProperty(tp,"__esModule",{value:!0});const ta=Pn,gCt={data:new ta.Name("data"),valCxt:new ta.Name("valCxt"),instancePath:new ta.Name("instancePath"),parentData:new ta.Name("parentData"),parentDataProperty:new ta.Name("parentDataProperty"),rootData:new ta.Name("rootData"),dynamicAnchors:new ta.Name("dynamicAnchors"),vErrors:new ta.Name("vErrors"),errors:new ta.Name("errors"),this:new ta.Name("this"),self:new ta.Name("self"),scope:new ta.Name("scope"),json:new ta.Name("json"),jsonPos:new ta.Name("jsonPos"),jsonLen:new ta.Name("jsonLen"),jsonPart:new ta.Name("jsonPart")};tp.default=gCt;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.extendErrors=e.resetErrorsCount=e.reportExtraError=e.reportError=e.keyword$DataError=e.keywordError=void 0;const t=Pn,n=wt,r=tp;e.keywordError={message:({keyword:g})=>(0,t.str)`must pass "${g}" keyword validation`},e.keyword$DataError={message:({keyword:g,schemaType:y})=>y?(0,t.str)`"${g}" keyword must be ${y} ($data)`:(0,t.str)`"${g}" keyword is invalid ($data)`};function i(g,y=e.keywordError,v,b){const{it:w}=g,{gen:E,compositeRule:T,allErrors:S}=w,C=f(g,y,v);b??(T||S)?u(E,C):l(w,(0,t._)`[${C}]`)}e.reportError=i;function s(g,y=e.keywordError,v){const{it:b}=g,{gen:w,compositeRule:E,allErrors:T}=b,S=f(g,y,v);u(w,S),E||T||l(b,r.default.vErrors)}e.reportExtraError=s;function o(g,y){g.assign(r.default.errors,y),g.if((0,t._)`${r.default.vErrors} !== null`,()=>g.if(y,()=>g.assign((0,t._)`${r.default.vErrors}.length`,y),()=>g.assign(r.default.vErrors,null)))}e.resetErrorsCount=o;function a({gen:g,keyword:y,schemaValue:v,data:b,errsCount:w,it:E}){if(w===void 0)throw new Error("ajv implementation error");const T=g.name("err");g.forRange("i",w,r.default.errors,S=>{g.const(T,(0,t._)`${r.default.vErrors}[${S}]`),g.if((0,t._)`${T}.instancePath === undefined`,()=>g.assign((0,t._)`${T}.instancePath`,(0,t.strConcat)(r.default.instancePath,E.errorPath))),g.assign((0,t._)`${T}.schemaPath`,(0,t.str)`${E.errSchemaPath}/${y}`),E.opts.verbose&&(g.assign((0,t._)`${T}.schema`,v),g.assign((0,t._)`${T}.data`,b))})}e.extendErrors=a;function u(g,y){const v=g.const("err",y);g.if((0,t._)`${r.default.vErrors} === null`,()=>g.assign(r.default.vErrors,(0,t._)`[${v}]`),(0,t._)`${r.default.vErrors}.push(${v})`),g.code((0,t._)`${r.default.errors}++`)}function l(g,y){const{gen:v,validateName:b,schemaEnv:w}=g;w.$async?v.throw((0,t._)`new ${g.ValidationError}(${y})`):(v.assign((0,t._)`${b}.errors`,y),v.return(!1))}const c={keyword:new t.Name("keyword"),schemaPath:new t.Name("schemaPath"),params:new t.Name("params"),propertyName:new t.Name("propertyName"),message:new t.Name("message"),schema:new t.Name("schema"),parentSchema:new t.Name("parentSchema")};function f(g,y,v){const{createErrors:b}=g.it;return b===!1?(0,t._)`{}`:d(g,y,v)}function d(g,y,v={}){const{gen:b,it:w}=g,E=[h(w,v),p(g,v)];return m(g,y,E),b.object(...E)}function h({errorPath:g},{instancePath:y}){const v=y?(0,t.str)`${g}${(0,n.getErrorPath)(y,n.Type.Str)}`:g;return[r.default.instancePath,(0,t.strConcat)(r.default.instancePath,v)]}function p({keyword:g,it:{errSchemaPath:y}},{schemaPath:v,parentSchema:b}){let w=b?y:(0,t.str)`${y}/${g}`;return v&&(w=(0,t.str)`${w}${(0,n.getErrorPath)(v,n.Type.Str)}`),[c.schemaPath,w]}function m(g,{params:y,message:v},b){const{keyword:w,data:E,schemaValue:T,it:S}=g,{opts:C,propertyName:A,topSchemaRef:k,schemaPath:N}=S;b.push([c.keyword,w],[c.params,typeof y=="function"?y(g):y||(0,t._)`{}`]),C.messages&&b.push([c.message,typeof v=="function"?v(g):v]),C.verbose&&b.push([c.schema,T],[c.parentSchema,(0,t._)`${k}${N}`],[r.default.data,E]),A&&b.push([c.propertyName,A])}})(Wk);Object.defineProperty(dx,"__esModule",{value:!0});dx.boolOrEmptySchema=dx.topBoolOrEmptySchema=void 0;const yCt=Wk,vCt=Pn,bCt=tp,_Ct={message:"boolean schema is false"};function wCt(e){const{gen:t,schema:n,validateName:r}=e;n===!1?TRe(e,!1):typeof n=="object"&&n.$async===!0?t.return(bCt.default.data):(t.assign((0,vCt._)`${r}.errors`,null),t.return(!0))}dx.topBoolOrEmptySchema=wCt;function ECt(e,t){const{gen:n,schema:r}=e;r===!1?(n.var(t,!1),TRe(e)):n.var(t,!0)}dx.boolOrEmptySchema=ECt;function TRe(e,t){const{gen:n,data:r}=e,i={gen:n,keyword:"false schema",data:r,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:e};(0,yCt.reportError)(i,_Ct,void 0,t)}var ks={},nb={};Object.defineProperty(nb,"__esModule",{value:!0});nb.getRules=nb.isJSONType=void 0;const xCt=["string","number","integer","boolean","null","object","array"],SCt=new Set(xCt);function TCt(e){return typeof e=="string"&&SCt.has(e)}nb.isJSONType=TCt;function CCt(){const e={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...e,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},e.number,e.string,e.array,e.object],post:{rules:[]},all:{},keywords:{}}}nb.getRules=CCt;var am={};Object.defineProperty(am,"__esModule",{value:!0});am.shouldUseRule=am.shouldUseGroup=am.schemaHasRulesForType=void 0;function ACt({schema:e,self:t},n){const r=t.RULES.types[n];return r&&r!==!0&&CRe(e,r)}am.schemaHasRulesForType=ACt;function CRe(e,t){return t.rules.some(n=>ARe(e,n))}am.shouldUseGroup=CRe;function ARe(e,t){var n;return e[t.keyword]!==void 0||((n=t.definition.implements)===null||n===void 0?void 0:n.some(r=>e[r]!==void 0))}am.shouldUseRule=ARe;Object.defineProperty(ks,"__esModule",{value:!0});ks.reportTypeError=ks.checkDataTypes=ks.checkDataType=ks.coerceAndCheckDataType=ks.getJSONTypes=ks.getSchemaTypes=ks.DataType=void 0;const ICt=nb,kCt=am,RCt=Wk,wn=Pn,IRe=wt;var fE;(function(e){e[e.Correct=0]="Correct",e[e.Wrong=1]="Wrong"})(fE||(ks.DataType=fE={}));function NCt(e){const t=kRe(e.type);if(t.includes("null")){if(e.nullable===!1)throw new Error("type: null contradicts nullable: false")}else{if(!t.length&&e.nullable!==void 0)throw new Error('"nullable" cannot be used without "type"');e.nullable===!0&&t.push("null")}return t}ks.getSchemaTypes=NCt;function kRe(e){const t=Array.isArray(e)?e:e?[e]:[];if(t.every(ICt.isJSONType))return t;throw new Error("type must be JSONType or JSONType[]: "+t.join(","))}ks.getJSONTypes=kRe;function DCt(e,t){const{gen:n,data:r,opts:i}=e,s=PCt(t,i.coerceTypes),o=t.length>0&&!(s.length===0&&t.length===1&&(0,kCt.schemaHasRulesForType)(e,t[0]));if(o){const a=KQ(t,r,i.strictNumbers,fE.Wrong);n.if(a,()=>{s.length?OCt(e,t,s):XQ(e)})}return o}ks.coerceAndCheckDataType=DCt;const RRe=new Set(["string","number","integer","boolean","null"]);function PCt(e,t){return t?e.filter(n=>RRe.has(n)||t==="array"&&n==="array"):[]}function OCt(e,t,n){const{gen:r,data:i,opts:s}=e,o=r.let("dataType",(0,wn._)`typeof ${i}`),a=r.let("coerced",(0,wn._)`undefined`);s.coerceTypes==="array"&&r.if((0,wn._)`${o} == 'object' && Array.isArray(${i}) && ${i}.length == 1`,()=>r.assign(i,(0,wn._)`${i}[0]`).assign(o,(0,wn._)`typeof ${i}`).if(KQ(t,i,s.strictNumbers),()=>r.assign(a,i))),r.if((0,wn._)`${a} !== undefined`);for(const l of n)(RRe.has(l)||l==="array"&&s.coerceTypes==="array")&&u(l);r.else(),XQ(e),r.endIf(),r.if((0,wn._)`${a} !== undefined`,()=>{r.assign(i,a),$Ct(e,a)});function u(l){switch(l){case"string":r.elseIf((0,wn._)`${o} == "number" || ${o} == "boolean"`).assign(a,(0,wn._)`"" + ${i}`).elseIf((0,wn._)`${i} === null`).assign(a,(0,wn._)`""`);return;case"number":r.elseIf((0,wn._)`${o} == "boolean" || ${i} === null
              || (${o} == "string" && ${i} && ${i} == +${i})`).assign(a,(0,wn._)`+${i}`);return;case"integer":r.elseIf((0,wn._)`${o} === "boolean" || ${i} === null
              || (${o} === "string" && ${i} && ${i} == +${i} && !(${i} % 1))`).assign(a,(0,wn._)`+${i}`);return;case"boolean":r.elseIf((0,wn._)`${i} === "false" || ${i} === 0 || ${i} === null`).assign(a,!1).elseIf((0,wn._)`${i} === "true" || ${i} === 1`).assign(a,!0);return;case"null":r.elseIf((0,wn._)`${i} === "" || ${i} === 0 || ${i} === false`),r.assign(a,null);return;case"array":r.elseIf((0,wn._)`${o} === "string" || ${o} === "number"
              || ${o} === "boolean" || ${i} === null`).assign(a,(0,wn._)`[${i}]`)}}}function $Ct({gen:e,parentData:t,parentDataProperty:n},r){e.if((0,wn._)`${t} !== undefined`,()=>e.assign((0,wn._)`${t}[${n}]`,r))}function xV(e,t,n,r=fE.Correct){const i=r===fE.Correct?wn.operators.EQ:wn.operators.NEQ;let s;switch(e){case"null":return(0,wn._)`${t} ${i} null`;case"array":s=(0,wn._)`Array.isArray(${t})`;break;case"object":s=(0,wn._)`${t} && typeof ${t} == "object" && !Array.isArray(${t})`;break;case"integer":s=o((0,wn._)`!(${t} % 1) && !isNaN(${t})`);break;case"number":s=o();break;default:return(0,wn._)`typeof ${t} ${i} ${e}`}return r===fE.Correct?s:(0,wn.not)(s);function o(a=wn.nil){return(0,wn.and)((0,wn._)`typeof ${t} == "number"`,a,n?(0,wn._)`isFinite(${t})`:wn.nil)}}ks.checkDataType=xV;function KQ(e,t,n,r){if(e.length===1)return xV(e[0],t,n,r);let i;const s=(0,IRe.toHash)(e);if(s.array&&s.object){const o=(0,wn._)`typeof ${t} != "object"`;i=s.null?o:(0,wn._)`!${t} || ${o}`,delete s.null,delete s.array,delete s.object}else i=wn.nil;s.number&&delete s.integer;for(const o in s)i=(0,wn.and)(i,xV(o,t,n,r));return i}ks.checkDataTypes=KQ;const MCt={message:({schema:e})=>`must be ${e}`,params:({schema:e,schemaValue:t})=>typeof e=="string"?(0,wn._)`{type: ${e}}`:(0,wn._)`{type: ${t}}`};function XQ(e){const t=LCt(e);(0,RCt.reportError)(t,MCt)}ks.reportTypeError=XQ;function LCt(e){const{gen:t,data:n,schema:r}=e,i=(0,IRe.schemaRefOrVal)(e,r,"type");return{gen:t,keyword:"type",data:n,schema:r.type,schemaCode:i,schemaValue:i,parentSchema:r,params:{},it:e}}var g4={};Object.defineProperty(g4,"__esModule",{value:!0});g4.assignDefaults=void 0;const F_=Pn,FCt=wt;function jCt(e,t){const{properties:n,items:r}=e.schema;if(t==="object"&&n)for(const i in n)yde(e,i,n[i].default);else t==="array"&&Array.isArray(r)&&r.forEach((i,s)=>yde(e,s,i.default))}g4.assignDefaults=jCt;function yde(e,t,n){const{gen:r,compositeRule:i,data:s,opts:o}=e;if(n===void 0)return;const a=(0,F_._)`${s}${(0,F_.getProperty)(t)}`;if(i){(0,FCt.checkStrictMode)(e,`default is ignored for: ${a}`);return}let u=(0,F_._)`${a} === undefined`;o.useDefaults==="empty"&&(u=(0,F_._)`${u} || ${a} === null || ${a} === ""`),r.if(u,(0,F_._)`${a} = ${(0,F_.stringify)(n)}`)}var nh={},Nn={};Object.defineProperty(Nn,"__esModule",{value:!0});Nn.validateUnion=Nn.validateArray=Nn.usePattern=Nn.callValidateCode=Nn.schemaProperties=Nn.allSchemaProperties=Nn.noPropertyInData=Nn.propertyInData=Nn.isOwnProperty=Nn.hasPropFunc=Nn.reportMissingProp=Nn.checkMissingProp=Nn.checkReportMissingProp=void 0;const li=Pn,QQ=wt,bg=tp,BCt=wt;function UCt(e,t){const{gen:n,data:r,it:i}=e;n.if(ZQ(n,r,t,i.opts.ownProperties),()=>{e.setParams({missingProperty:(0,li._)`${t}`},!0),e.error()})}Nn.checkReportMissingProp=UCt;function zCt({gen:e,data:t,it:{opts:n}},r,i){return(0,li.or)(...r.map(s=>(0,li.and)(ZQ(e,t,s,n.ownProperties),(0,li._)`${i} = ${s}`)))}Nn.checkMissingProp=zCt;function VCt(e,t){e.setParams({missingProperty:t},!0),e.error()}Nn.reportMissingProp=VCt;function NRe(e){return e.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,li._)`Object.prototype.hasOwnProperty`})}Nn.hasPropFunc=NRe;function JQ(e,t,n){return(0,li._)`${NRe(e)}.call(${t}, ${n})`}Nn.isOwnProperty=JQ;function HCt(e,t,n,r){const i=(0,li._)`${t}${(0,li.getProperty)(n)} !== undefined`;return r?(0,li._)`${i} && ${JQ(e,t,n)}`:i}Nn.propertyInData=HCt;function ZQ(e,t,n,r){const i=(0,li._)`${t}${(0,li.getProperty)(n)} === undefined`;return r?(0,li.or)(i,(0,li.not)(JQ(e,t,n))):i}Nn.noPropertyInData=ZQ;function DRe(e){return e?Object.keys(e).filter(t=>t!=="__proto__"):[]}Nn.allSchemaProperties=DRe;function qCt(e,t){return DRe(t).filter(n=>!(0,QQ.alwaysValidSchema)(e,t[n]))}Nn.schemaProperties=qCt;function WCt({schemaCode:e,data:t,it:{gen:n,topSchemaRef:r,schemaPath:i,errorPath:s},it:o},a,u,l){const c=l?(0,li._)`${e}, ${t}, ${r}${i}`:t,f=[[bg.default.instancePath,(0,li.strConcat)(bg.default.instancePath,s)],[bg.default.parentData,o.parentData],[bg.default.parentDataProperty,o.parentDataProperty],[bg.default.rootData,bg.default.rootData]];o.opts.dynamicRef&&f.push([bg.default.dynamicAnchors,bg.default.dynamicAnchors]);const d=(0,li._)`${c}, ${n.object(...f)}`;return u!==li.nil?(0,li._)`${a}.call(${u}, ${d})`:(0,li._)`${a}(${d})`}Nn.callValidateCode=WCt;const GCt=(0,li._)`new RegExp`;function YCt({gen:e,it:{opts:t}},n){const r=t.unicodeRegExp?"u":"",{regExp:i}=t.code,s=i(n,r);return e.scopeValue("pattern",{key:s.toString(),ref:s,code:(0,li._)`${i.code==="new RegExp"?GCt:(0,BCt.useFunc)(e,i)}(${n}, ${r})`})}Nn.usePattern=YCt;function KCt(e){const{gen:t,data:n,keyword:r,it:i}=e,s=t.name("valid");if(i.allErrors){const a=t.let("valid",!0);return o(()=>t.assign(a,!1)),a}return t.var(s,!0),o(()=>t.break()),s;function o(a){const u=t.const("len",(0,li._)`${n}.length`);t.forRange("i",0,u,l=>{e.subschema({keyword:r,dataProp:l,dataPropType:QQ.Type.Num},s),t.if((0,li.not)(s),a)})}}Nn.validateArray=KCt;function XCt(e){const{gen:t,schema:n,keyword:r,it:i}=e;if(!Array.isArray(n))throw new Error("ajv implementation error");if(n.some(u=>(0,QQ.alwaysValidSchema)(i,u))&&!i.opts.unevaluated)return;const o=t.let("valid",!1),a=t.name("_valid");t.block(()=>n.forEach((u,l)=>{const c=e.subschema({keyword:r,schemaProp:l,compositeRule:!0},a);t.assign(o,(0,li._)`${o} || ${a}`),e.mergeValidEvaluated(c,a)||t.if((0,li.not)(o))})),e.result(o,()=>e.reset(),()=>e.error(!0))}Nn.validateUnion=XCt;Object.defineProperty(nh,"__esModule",{value:!0});nh.validateKeywordUsage=nh.validSchemaType=nh.funcKeywordCode=nh.macroKeywordCode=void 0;const La=Pn,qv=tp,QCt=Nn,JCt=Wk;function ZCt(e,t){const{gen:n,keyword:r,schema:i,parentSchema:s,it:o}=e,a=t.macro.call(o.self,i,s,o),u=PRe(n,r,a);o.opts.validateSchema!==!1&&o.self.validateSchema(a,!0);const l=n.name("valid");e.subschema({schema:a,schemaPath:La.nil,errSchemaPath:`${o.errSchemaPath}/${r}`,topSchemaRef:u,compositeRule:!0},l),e.pass(l,()=>e.error(!0))}nh.macroKeywordCode=ZCt;function eAt(e,t){var n;const{gen:r,keyword:i,schema:s,parentSchema:o,$data:a,it:u}=e;nAt(u,t);const l=!a&&t.compile?t.compile.call(u.self,s,o,u):t.validate,c=PRe(r,i,l),f=r.let("valid");e.block$data(f,d),e.ok((n=t.valid)!==null&&n!==void 0?n:f);function d(){if(t.errors===!1)m(),t.modifying&&vde(e),g(()=>e.error());else{const y=t.async?h():p();t.modifying&&vde(e),g(()=>tAt(e,y))}}function h(){const y=r.let("ruleErrs",null);return r.try(()=>m((0,La._)`await `),v=>r.assign(f,!1).if((0,La._)`${v} instanceof ${u.ValidationError}`,()=>r.assign(y,(0,La._)`${v}.errors`),()=>r.throw(v))),y}function p(){const y=(0,La._)`${c}.errors`;return r.assign(y,null),m(La.nil),y}function m(y=t.async?(0,La._)`await `:La.nil){const v=u.opts.passContext?qv.default.this:qv.default.self,b=!("compile"in t&&!a||t.schema===!1);r.assign(f,(0,La._)`${y}${(0,QCt.callValidateCode)(e,c,v,b)}`,t.modifying)}function g(y){var v;r.if((0,La.not)((v=t.valid)!==null&&v!==void 0?v:f),y)}}nh.funcKeywordCode=eAt;function vde(e){const{gen:t,data:n,it:r}=e;t.if(r.parentData,()=>t.assign(n,(0,La._)`${r.parentData}[${r.parentDataProperty}]`))}function tAt(e,t){const{gen:n}=e;n.if((0,La._)`Array.isArray(${t})`,()=>{n.assign(qv.default.vErrors,(0,La._)`${qv.default.vErrors} === null ? ${t} : ${qv.default.vErrors}.concat(${t})`).assign(qv.default.errors,(0,La._)`${qv.default.vErrors}.length`),(0,JCt.extendErrors)(e)},()=>e.error())}function nAt({schemaEnv:e},t){if(t.async&&!e.$async)throw new Error("async keyword in sync schema")}function PRe(e,t,n){if(n===void 0)throw new Error(`keyword "${t}" failed to compile`);return e.scopeValue("keyword",typeof n=="function"?{ref:n}:{ref:n,code:(0,La.stringify)(n)})}function rAt(e,t,n=!1){return!t.length||t.some(r=>r==="array"?Array.isArray(e):r==="object"?e&&typeof e=="object"&&!Array.isArray(e):typeof e==r||n&&typeof e>"u")}nh.validSchemaType=rAt;function iAt({schema:e,opts:t,self:n,errSchemaPath:r},i,s){if(Array.isArray(i.keyword)?!i.keyword.includes(s):i.keyword!==s)throw new Error("ajv implementation error");const o=i.dependencies;if(o!=null&&o.some(a=>!Object.prototype.hasOwnProperty.call(e,a)))throw new Error(`parent schema must have dependencies of ${s}: ${o.join(",")}`);if(i.validateSchema&&!i.validateSchema(e[s])){const u=`keyword "${s}" value is invalid at path "${r}": `+n.errorsText(i.validateSchema.errors);if(t.validateSchema==="log")n.logger.error(u);else throw new Error(u)}}nh.validateKeywordUsage=iAt;var C0={};Object.defineProperty(C0,"__esModule",{value:!0});C0.extendSubschemaMode=C0.extendSubschemaData=C0.getSubschema=void 0;const Qd=Pn,ORe=wt;function sAt(e,{keyword:t,schemaProp:n,schema:r,schemaPath:i,errSchemaPath:s,topSchemaRef:o}){if(t!==void 0&&r!==void 0)throw new Error('both "keyword" and "schema" passed, only one allowed');if(t!==void 0){const a=e.schema[t];return n===void 0?{schema:a,schemaPath:(0,Qd._)`${e.schemaPath}${(0,Qd.getProperty)(t)}`,errSchemaPath:`${e.errSchemaPath}/${t}`}:{schema:a[n],schemaPath:(0,Qd._)`${e.schemaPath}${(0,Qd.getProperty)(t)}${(0,Qd.getProperty)(n)}`,errSchemaPath:`${e.errSchemaPath}/${t}/${(0,ORe.escapeFragment)(n)}`}}if(r!==void 0){if(i===void 0||s===void 0||o===void 0)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:r,schemaPath:i,topSchemaRef:o,errSchemaPath:s}}throw new Error('either "keyword" or "schema" must be passed')}C0.getSubschema=sAt;function oAt(e,t,{dataProp:n,dataPropType:r,data:i,dataTypes:s,propertyName:o}){if(i!==void 0&&n!==void 0)throw new Error('both "data" and "dataProp" passed, only one allowed');const{gen:a}=t;if(n!==void 0){const{errorPath:l,dataPathArr:c,opts:f}=t,d=a.let("data",(0,Qd._)`${t.data}${(0,Qd.getProperty)(n)}`,!0);u(d),e.errorPath=(0,Qd.str)`${l}${(0,ORe.getErrorPath)(n,r,f.jsPropertySyntax)}`,e.parentDataProperty=(0,Qd._)`${n}`,e.dataPathArr=[...c,e.parentDataProperty]}if(i!==void 0){const l=i instanceof Qd.Name?i:a.let("data",i,!0);u(l),o!==void 0&&(e.propertyName=o)}s&&(e.dataTypes=s);function u(l){e.data=l,e.dataLevel=t.dataLevel+1,e.dataTypes=[],t.definedProperties=new Set,e.parentData=t.data,e.dataNames=[...t.dataNames,l]}}C0.extendSubschemaData=oAt;function aAt(e,{jtdDiscriminator:t,jtdMetadata:n,compositeRule:r,createErrors:i,allErrors:s}){r!==void 0&&(e.compositeRule=r),i!==void 0&&(e.createErrors=i),s!==void 0&&(e.allErrors=s),e.jtdDiscriminator=t,e.jtdMetadata=n}C0.extendSubschemaMode=aAt;var Ao={},$Re={exports:{}},t0=$Re.exports=function(e,t,n){typeof t=="function"&&(n=t,t={}),n=t.cb||n;var r=typeof n=="function"?n:n.pre||function(){},i=n.post||function(){};OP(t,r,i,e,"",e)};t0.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0};t0.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0};t0.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0};t0.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function OP(e,t,n,r,i,s,o,a,u,l){if(r&&typeof r=="object"&&!Array.isArray(r)){t(r,i,s,o,a,u,l);for(var c in r){var f=r[c];if(Array.isArray(f)){if(c in t0.arrayKeywords)for(var d=0;d<f.length;d++)OP(e,t,n,f[d],i+"/"+c+"/"+d,s,i,c,r,d)}else if(c in t0.propsKeywords){if(f&&typeof f=="object")for(var h in f)OP(e,t,n,f[h],i+"/"+c+"/"+uAt(h),s,i,c,r,h)}else(c in t0.keywords||e.allKeys&&!(c in t0.skipKeywords))&&OP(e,t,n,f,i+"/"+c,s,i,c,r)}n(r,i,s,o,a,u,l)}}function uAt(e){return e.replace(/~/g,"~0").replace(/\//g,"~1")}var lAt=$Re.exports;Object.defineProperty(Ao,"__esModule",{value:!0});Ao.getSchemaRefs=Ao.resolveUrl=Ao.normalizeId=Ao._getFullPath=Ao.getFullPath=Ao.inlineRef=void 0;const cAt=wt,fAt=lK,dAt=lAt,hAt=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function pAt(e,t=!0){return typeof e=="boolean"?!0:t===!0?!SV(e):t?MRe(e)<=t:!1}Ao.inlineRef=pAt;const mAt=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function SV(e){for(const t in e){if(mAt.has(t))return!0;const n=e[t];if(Array.isArray(n)&&n.some(SV)||typeof n=="object"&&SV(n))return!0}return!1}function MRe(e){let t=0;for(const n in e){if(n==="$ref")return 1/0;if(t++,!hAt.has(n)&&(typeof e[n]=="object"&&(0,cAt.eachItem)(e[n],r=>t+=MRe(r)),t===1/0))return 1/0}return t}function LRe(e,t="",n){n!==!1&&(t=dE(t));const r=e.parse(t);return FRe(e,r)}Ao.getFullPath=LRe;function FRe(e,t){return e.serialize(t).split("#")[0]+"#"}Ao._getFullPath=FRe;const gAt=/#\/?$/;function dE(e){return e?e.replace(gAt,""):""}Ao.normalizeId=dE;function yAt(e,t,n){return n=dE(n),e.resolve(t,n)}Ao.resolveUrl=yAt;const vAt=/^[a-z_][-a-z0-9._]*$/i;function bAt(e,t){if(typeof e=="boolean")return{};const{schemaId:n,uriResolver:r}=this.opts,i=dE(e[n]||t),s={"":i},o=LRe(r,i,!1),a={},u=new Set;return dAt(e,{allKeys:!0},(f,d,h,p)=>{if(p===void 0)return;const m=o+d;let g=s[p];typeof f[n]=="string"&&(g=y.call(this,f[n])),v.call(this,f.$anchor),v.call(this,f.$dynamicAnchor),s[d]=g;function y(b){const w=this.opts.uriResolver.resolve;if(b=dE(g?w(g,b):b),u.has(b))throw c(b);u.add(b);let E=this.refs[b];return typeof E=="string"&&(E=this.refs[E]),typeof E=="object"?l(f,E.schema,b):b!==dE(m)&&(b[0]==="#"?(l(f,a[b],b),a[b]=f):this.refs[b]=m),b}function v(b){if(typeof b=="string"){if(!vAt.test(b))throw new Error(`invalid anchor "${b}"`);y.call(this,`#${b}`)}}}),a;function l(f,d,h){if(d!==void 0&&!fAt(f,d))throw c(h)}function c(f){return new Error(`reference "${f}" resolves to more than one schema`)}}Ao.getSchemaRefs=bAt;Object.defineProperty(Uf,"__esModule",{value:!0});Uf.getData=Uf.KeywordCxt=Uf.validateFunctionCode=void 0;const jRe=dx,bde=ks,eJ=am,F$=ks,_At=g4,LC=nh,_9=C0,Pt=Pn,sn=tp,wAt=Ao,um=wt,BT=Wk;function EAt(e){if(zRe(e)&&(VRe(e),URe(e))){TAt(e);return}BRe(e,()=>(0,jRe.topBoolOrEmptySchema)(e))}Uf.validateFunctionCode=EAt;function BRe({gen:e,validateName:t,schema:n,schemaEnv:r,opts:i},s){i.code.es5?e.func(t,(0,Pt._)`${sn.default.data}, ${sn.default.valCxt}`,r.$async,()=>{e.code((0,Pt._)`"use strict"; ${_de(n,i)}`),SAt(e,i),e.code(s)}):e.func(t,(0,Pt._)`${sn.default.data}, ${xAt(i)}`,r.$async,()=>e.code(_de(n,i)).code(s))}function xAt(e){return(0,Pt._)`{${sn.default.instancePath}="", ${sn.default.parentData}, ${sn.default.parentDataProperty}, ${sn.default.rootData}=${sn.default.data}${e.dynamicRef?(0,Pt._)`, ${sn.default.dynamicAnchors}={}`:Pt.nil}}={}`}function SAt(e,t){e.if(sn.default.valCxt,()=>{e.var(sn.default.instancePath,(0,Pt._)`${sn.default.valCxt}.${sn.default.instancePath}`),e.var(sn.default.parentData,(0,Pt._)`${sn.default.valCxt}.${sn.default.parentData}`),e.var(sn.default.parentDataProperty,(0,Pt._)`${sn.default.valCxt}.${sn.default.parentDataProperty}`),e.var(sn.default.rootData,(0,Pt._)`${sn.default.valCxt}.${sn.default.rootData}`),t.dynamicRef&&e.var(sn.default.dynamicAnchors,(0,Pt._)`${sn.default.valCxt}.${sn.default.dynamicAnchors}`)},()=>{e.var(sn.default.instancePath,(0,Pt._)`""`),e.var(sn.default.parentData,(0,Pt._)`undefined`),e.var(sn.default.parentDataProperty,(0,Pt._)`undefined`),e.var(sn.default.rootData,sn.default.data),t.dynamicRef&&e.var(sn.default.dynamicAnchors,(0,Pt._)`{}`)})}function TAt(e){const{schema:t,opts:n,gen:r}=e;BRe(e,()=>{n.$comment&&t.$comment&&qRe(e),RAt(e),r.let(sn.default.vErrors,null),r.let(sn.default.errors,0),n.unevaluated&&CAt(e),HRe(e),PAt(e)})}function CAt(e){const{gen:t,validateName:n}=e;e.evaluated=t.const("evaluated",(0,Pt._)`${n}.evaluated`),t.if((0,Pt._)`${e.evaluated}.dynamicProps`,()=>t.assign((0,Pt._)`${e.evaluated}.props`,(0,Pt._)`undefined`)),t.if((0,Pt._)`${e.evaluated}.dynamicItems`,()=>t.assign((0,Pt._)`${e.evaluated}.items`,(0,Pt._)`undefined`))}function _de(e,t){const n=typeof e=="object"&&e[t.schemaId];return n&&(t.code.source||t.code.process)?(0,Pt._)`/*# sourceURL=${n} */`:Pt.nil}function AAt(e,t){if(zRe(e)&&(VRe(e),URe(e))){IAt(e,t);return}(0,jRe.boolOrEmptySchema)(e,t)}function URe({schema:e,self:t}){if(typeof e=="boolean")return!e;for(const n in e)if(t.RULES.all[n])return!0;return!1}function zRe(e){return typeof e.schema!="boolean"}function IAt(e,t){const{schema:n,gen:r,opts:i}=e;i.$comment&&n.$comment&&qRe(e),NAt(e),DAt(e);const s=r.const("_errs",sn.default.errors);HRe(e,s),r.var(t,(0,Pt._)`${s} === ${sn.default.errors}`)}function VRe(e){(0,um.checkUnknownRules)(e),kAt(e)}function HRe(e,t){if(e.opts.jtd)return wde(e,[],!1,t);const n=(0,bde.getSchemaTypes)(e.schema),r=(0,bde.coerceAndCheckDataType)(e,n);wde(e,n,!r,t)}function kAt(e){const{schema:t,errSchemaPath:n,opts:r,self:i}=e;t.$ref&&r.ignoreKeywordsWithRef&&(0,um.schemaHasRulesButRef)(t,i.RULES)&&i.logger.warn(`$ref: keywords ignored in schema at path "${n}"`)}function RAt(e){const{schema:t,opts:n}=e;t.default!==void 0&&n.useDefaults&&n.strictSchema&&(0,um.checkStrictMode)(e,"default is ignored in the schema root")}function NAt(e){const t=e.schema[e.opts.schemaId];t&&(e.baseId=(0,wAt.resolveUrl)(e.opts.uriResolver,e.baseId,t))}function DAt(e){if(e.schema.$async&&!e.schemaEnv.$async)throw new Error("async schema in sync schema")}function qRe({gen:e,schemaEnv:t,schema:n,errSchemaPath:r,opts:i}){const s=n.$comment;if(i.$comment===!0)e.code((0,Pt._)`${sn.default.self}.logger.log(${s})`);else if(typeof i.$comment=="function"){const o=(0,Pt.str)`${r}/$comment`,a=e.scopeValue("root",{ref:t.root});e.code((0,Pt._)`${sn.default.self}.opts.$comment(${s}, ${o}, ${a}.schema)`)}}function PAt(e){const{gen:t,schemaEnv:n,validateName:r,ValidationError:i,opts:s}=e;n.$async?t.if((0,Pt._)`${sn.default.errors} === 0`,()=>t.return(sn.default.data),()=>t.throw((0,Pt._)`new ${i}(${sn.default.vErrors})`)):(t.assign((0,Pt._)`${r}.errors`,sn.default.vErrors),s.unevaluated&&OAt(e),t.return((0,Pt._)`${sn.default.errors} === 0`))}function OAt({gen:e,evaluated:t,props:n,items:r}){n instanceof Pt.Name&&e.assign((0,Pt._)`${t}.props`,n),r instanceof Pt.Name&&e.assign((0,Pt._)`${t}.items`,r)}function wde(e,t,n,r){const{gen:i,schema:s,data:o,allErrors:a,opts:u,self:l}=e,{RULES:c}=l;if(s.$ref&&(u.ignoreKeywordsWithRef||!(0,um.schemaHasRulesButRef)(s,c))){i.block(()=>YRe(e,"$ref",c.all.$ref.definition));return}u.jtd||$At(e,t),i.block(()=>{for(const d of c.rules)f(d);f(c.post)});function f(d){(0,eJ.shouldUseGroup)(s,d)&&(d.type?(i.if((0,F$.checkDataType)(d.type,o,u.strictNumbers)),Ede(e,d),t.length===1&&t[0]===d.type&&n&&(i.else(),(0,F$.reportTypeError)(e)),i.endIf()):Ede(e,d),a||i.if((0,Pt._)`${sn.default.errors} === ${r||0}`))}}function Ede(e,t){const{gen:n,schema:r,opts:{useDefaults:i}}=e;i&&(0,_At.assignDefaults)(e,t.type),n.block(()=>{for(const s of t.rules)(0,eJ.shouldUseRule)(r,s)&&YRe(e,s.keyword,s.definition,t.type)})}function $At(e,t){e.schemaEnv.meta||!e.opts.strictTypes||(MAt(e,t),e.opts.allowUnionTypes||LAt(e,t),FAt(e,e.dataTypes))}function MAt(e,t){if(t.length){if(!e.dataTypes.length){e.dataTypes=t;return}t.forEach(n=>{WRe(e.dataTypes,n)||tJ(e,`type "${n}" not allowed by context "${e.dataTypes.join(",")}"`)}),BAt(e,t)}}function LAt(e,t){t.length>1&&!(t.length===2&&t.includes("null"))&&tJ(e,"use allowUnionTypes to allow union type keyword")}function FAt(e,t){const n=e.self.RULES.all;for(const r in n){const i=n[r];if(typeof i=="object"&&(0,eJ.shouldUseRule)(e.schema,i)){const{type:s}=i.definition;s.length&&!s.some(o=>jAt(t,o))&&tJ(e,`missing type "${s.join(",")}" for keyword "${r}"`)}}}function jAt(e,t){return e.includes(t)||t==="number"&&e.includes("integer")}function WRe(e,t){return e.includes(t)||t==="integer"&&e.includes("number")}function BAt(e,t){const n=[];for(const r of e.dataTypes)WRe(t,r)?n.push(r):t.includes("integer")&&r==="number"&&n.push("integer");e.dataTypes=n}function tJ(e,t){const n=e.schemaEnv.baseId+e.errSchemaPath;t+=` at "${n}" (strictTypes)`,(0,um.checkStrictMode)(e,t,e.opts.strictTypes)}class GRe{constructor(t,n,r){if((0,LC.validateKeywordUsage)(t,n,r),this.gen=t.gen,this.allErrors=t.allErrors,this.keyword=r,this.data=t.data,this.schema=t.schema[r],this.$data=n.$data&&t.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,um.schemaRefOrVal)(t,this.schema,r,this.$data),this.schemaType=n.schemaType,this.parentSchema=t.schema,this.params={},this.it=t,this.def=n,this.$data)this.schemaCode=t.gen.const("vSchema",KRe(this.$data,t));else if(this.schemaCode=this.schemaValue,!(0,LC.validSchemaType)(this.schema,n.schemaType,n.allowUndefined))throw new Error(`${r} value must be ${JSON.stringify(n.schemaType)}`);("code"in n?n.trackErrors:n.errors!==!1)&&(this.errsCount=t.gen.const("_errs",sn.default.errors))}result(t,n,r){this.failResult((0,Pt.not)(t),n,r)}failResult(t,n,r){this.gen.if(t),r?r():this.error(),n?(this.gen.else(),n(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(t,n){this.failResult((0,Pt.not)(t),void 0,n)}fail(t){if(t===void 0){this.error(),this.allErrors||this.gen.if(!1);return}this.gen.if(t),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(t){if(!this.$data)return this.fail(t);const{schemaCode:n}=this;this.fail((0,Pt._)`${n} !== undefined && (${(0,Pt.or)(this.invalid$data(),t)})`)}error(t,n,r){if(n){this.setParams(n),this._error(t,r),this.setParams({});return}this._error(t,r)}_error(t,n){(t?BT.reportExtraError:BT.reportError)(this,this.def.error,n)}$dataError(){(0,BT.reportError)(this,this.def.$dataError||BT.keyword$DataError)}reset(){if(this.errsCount===void 0)throw new Error('add "trackErrors" to keyword definition');(0,BT.resetErrorsCount)(this.gen,this.errsCount)}ok(t){this.allErrors||this.gen.if(t)}setParams(t,n){n?Object.assign(this.params,t):this.params=t}block$data(t,n,r=Pt.nil){this.gen.block(()=>{this.check$data(t,r),n()})}check$data(t=Pt.nil,n=Pt.nil){if(!this.$data)return;const{gen:r,schemaCode:i,schemaType:s,def:o}=this;r.if((0,Pt.or)((0,Pt._)`${i} === undefined`,n)),t!==Pt.nil&&r.assign(t,!0),(s.length||o.validateSchema)&&(r.elseIf(this.invalid$data()),this.$dataError(),t!==Pt.nil&&r.assign(t,!1)),r.else()}invalid$data(){const{gen:t,schemaCode:n,schemaType:r,def:i,it:s}=this;return(0,Pt.or)(o(),a());function o(){if(r.length){if(!(n instanceof Pt.Name))throw new Error("ajv implementation error");const u=Array.isArray(r)?r:[r];return(0,Pt._)`${(0,F$.checkDataTypes)(u,n,s.opts.strictNumbers,F$.DataType.Wrong)}`}return Pt.nil}function a(){if(i.validateSchema){const u=t.scopeValue("validate$data",{ref:i.validateSchema});return(0,Pt._)`!${u}(${n})`}return Pt.nil}}subschema(t,n){const r=(0,_9.getSubschema)(this.it,t);(0,_9.extendSubschemaData)(r,this.it,t),(0,_9.extendSubschemaMode)(r,t);const i={...this.it,...r,items:void 0,props:void 0};return AAt(i,n),i}mergeEvaluated(t,n){const{it:r,gen:i}=this;r.opts.unevaluated&&(r.props!==!0&&t.props!==void 0&&(r.props=um.mergeEvaluated.props(i,t.props,r.props,n)),r.items!==!0&&t.items!==void 0&&(r.items=um.mergeEvaluated.items(i,t.items,r.items,n)))}mergeValidEvaluated(t,n){const{it:r,gen:i}=this;if(r.opts.unevaluated&&(r.props!==!0||r.items!==!0))return i.if(n,()=>this.mergeEvaluated(t,Pt.Name)),!0}}Uf.KeywordCxt=GRe;function YRe(e,t,n,r){const i=new GRe(e,n,t);"code"in n?n.code(i,r):i.$data&&n.validate?(0,LC.funcKeywordCode)(i,n):"macro"in n?(0,LC.macroKeywordCode)(i,n):(n.compile||n.validate)&&(0,LC.funcKeywordCode)(i,n)}const UAt=/^\/(?:[^~]|~0|~1)*$/,zAt=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function KRe(e,{dataLevel:t,dataNames:n,dataPathArr:r}){let i,s;if(e==="")return sn.default.rootData;if(e[0]==="/"){if(!UAt.test(e))throw new Error(`Invalid JSON-pointer: ${e}`);i=e,s=sn.default.rootData}else{const l=zAt.exec(e);if(!l)throw new Error(`Invalid JSON-pointer: ${e}`);const c=+l[1];if(i=l[2],i==="#"){if(c>=t)throw new Error(u("property/index",c));return r[t-c]}if(c>t)throw new Error(u("data",c));if(s=n[t-c],!i)return s}let o=s;const a=i.split("/");for(const l of a)l&&(s=(0,Pt._)`${s}${(0,Pt.getProperty)((0,um.unescapeJsonPointer)(l))}`,o=(0,Pt._)`${o} && ${s}`);return o;function u(l,c){return`Cannot access ${l} ${c} levels up, current level is ${t}`}}Uf.getData=KRe;var Gk={};Object.defineProperty(Gk,"__esModule",{value:!0});class VAt extends Error{constructor(t){super("validation failed"),this.errors=t,this.ajv=this.validation=!0}}Gk.default=VAt;var DS={};Object.defineProperty(DS,"__esModule",{value:!0});const w9=Ao;class HAt extends Error{constructor(t,n,r,i){super(i||`can't resolve reference ${r} from id ${n}`),this.missingRef=(0,w9.resolveUrl)(t,n,r),this.missingSchema=(0,w9.normalizeId)((0,w9.getFullPath)(t,this.missingRef))}}DS.default=HAt;var Ru={};Object.defineProperty(Ru,"__esModule",{value:!0});Ru.resolveSchema=Ru.getCompilingSchema=Ru.resolveRef=Ru.compileSchema=Ru.SchemaEnv=void 0;const nf=Pn,qAt=Gk,dv=tp,Cf=Ao,xde=wt,WAt=Uf;class y4{constructor(t){var n;this.refs={},this.dynamicAnchors={};let r;typeof t.schema=="object"&&(r=t.schema),this.schema=t.schema,this.schemaId=t.schemaId,this.root=t.root||this,this.baseId=(n=t.baseId)!==null&&n!==void 0?n:(0,Cf.normalizeId)(r==null?void 0:r[t.schemaId||"$id"]),this.schemaPath=t.schemaPath,this.localRefs=t.localRefs,this.meta=t.meta,this.$async=r==null?void 0:r.$async,this.refs={}}}Ru.SchemaEnv=y4;function nJ(e){const t=XRe.call(this,e);if(t)return t;const n=(0,Cf.getFullPath)(this.opts.uriResolver,e.root.baseId),{es5:r,lines:i}=this.opts.code,{ownProperties:s}=this.opts,o=new nf.CodeGen(this.scope,{es5:r,lines:i,ownProperties:s});let a;e.$async&&(a=o.scopeValue("Error",{ref:qAt.default,code:(0,nf._)`require("ajv/dist/runtime/validation_error").default`}));const u=o.scopeName("validate");e.validateName=u;const l={gen:o,allErrors:this.opts.allErrors,data:dv.default.data,parentData:dv.default.parentData,parentDataProperty:dv.default.parentDataProperty,dataNames:[dv.default.data],dataPathArr:[nf.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:o.scopeValue("schema",this.opts.code.source===!0?{ref:e.schema,code:(0,nf.stringify)(e.schema)}:{ref:e.schema}),validateName:u,ValidationError:a,schema:e.schema,schemaEnv:e,rootId:n,baseId:e.baseId||n,schemaPath:nf.nil,errSchemaPath:e.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,nf._)`""`,opts:this.opts,self:this};let c;try{this._compilations.add(e),(0,WAt.validateFunctionCode)(l),o.optimize(this.opts.code.optimize);const f=o.toString();c=`${o.scopeRefs(dv.default.scope)}return ${f}`,this.opts.code.process&&(c=this.opts.code.process(c,e));const h=new Function(`${dv.default.self}`,`${dv.default.scope}`,c)(this,this.scope.get());if(this.scope.value(u,{ref:h}),h.errors=null,h.schema=e.schema,h.schemaEnv=e,e.$async&&(h.$async=!0),this.opts.code.source===!0&&(h.source={validateName:u,validateCode:f,scopeValues:o._values}),this.opts.unevaluated){const{props:p,items:m}=l;h.evaluated={props:p instanceof nf.Name?void 0:p,items:m instanceof nf.Name?void 0:m,dynamicProps:p instanceof nf.Name,dynamicItems:m instanceof nf.Name},h.source&&(h.source.evaluated=(0,nf.stringify)(h.evaluated))}return e.validate=h,e}catch(f){throw delete e.validate,delete e.validateName,c&&this.logger.error("Error compiling schema, function code:",c),f}finally{this._compilations.delete(e)}}Ru.compileSchema=nJ;function GAt(e,t,n){var r;n=(0,Cf.resolveUrl)(this.opts.uriResolver,t,n);const i=e.refs[n];if(i)return i;let s=XAt.call(this,e,n);if(s===void 0){const o=(r=e.localRefs)===null||r===void 0?void 0:r[n],{schemaId:a}=this.opts;o&&(s=new y4({schema:o,schemaId:a,root:e,baseId:t}))}if(s!==void 0)return e.refs[n]=YAt.call(this,s)}Ru.resolveRef=GAt;function YAt(e){return(0,Cf.inlineRef)(e.schema,this.opts.inlineRefs)?e.schema:e.validate?e:nJ.call(this,e)}function XRe(e){for(const t of this._compilations)if(KAt(t,e))return t}Ru.getCompilingSchema=XRe;function KAt(e,t){return e.schema===t.schema&&e.root===t.root&&e.baseId===t.baseId}function XAt(e,t){let n;for(;typeof(n=this.refs[t])=="string";)t=n;return n||this.schemas[t]||v4.call(this,e,t)}function v4(e,t){const n=this.opts.uriResolver.parse(t),r=(0,Cf._getFullPath)(this.opts.uriResolver,n);let i=(0,Cf.getFullPath)(this.opts.uriResolver,e.baseId,void 0);if(Object.keys(e.schema).length>0&&r===i)return E9.call(this,n,e);const s=(0,Cf.normalizeId)(r),o=this.refs[s]||this.schemas[s];if(typeof o=="string"){const a=v4.call(this,e,o);return typeof(a==null?void 0:a.schema)!="object"?void 0:E9.call(this,n,a)}if(typeof(o==null?void 0:o.schema)=="object"){if(o.validate||nJ.call(this,o),s===(0,Cf.normalizeId)(t)){const{schema:a}=o,{schemaId:u}=this.opts,l=a[u];return l&&(i=(0,Cf.resolveUrl)(this.opts.uriResolver,i,l)),new y4({schema:a,schemaId:u,root:e,baseId:i})}return E9.call(this,n,o)}}Ru.resolveSchema=v4;const QAt=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function E9(e,{baseId:t,schema:n,root:r}){var i;if(((i=e.fragment)===null||i===void 0?void 0:i[0])!=="/")return;for(const a of e.fragment.slice(1).split("/")){if(typeof n=="boolean")return;const u=n[(0,xde.unescapeFragment)(a)];if(u===void 0)return;n=u;const l=typeof n=="object"&&n[this.opts.schemaId];!QAt.has(a)&&l&&(t=(0,Cf.resolveUrl)(this.opts.uriResolver,t,l))}let s;if(typeof n!="boolean"&&n.$ref&&!(0,xde.schemaHasRulesButRef)(n,this.RULES)){const a=(0,Cf.resolveUrl)(this.opts.uriResolver,t,n.$ref);s=v4.call(this,r,a)}const{schemaId:o}=this.opts;if(s=s||new y4({schema:n,schemaId:o,root:r,baseId:t}),s.schema!==s.root.schema)return s}const JAt="https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",ZAt="Meta-schema for $data reference (JSON AnySchema extension proposal)",eIt="object",tIt=["$data"],nIt={$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},rIt=!1,iIt={$id:JAt,description:ZAt,type:eIt,required:tIt,properties:nIt,additionalProperties:rIt};var rJ={},TV={exports:{}};/** @license URI.js v4.4.1 (c) 2011 Gary Court. License: http://github.com/garycourt/uri-js */(function(e,t){(function(n,r){r(t)})(to,function(n){function r(){for(var oe=arguments.length,ee=Array(oe),ae=0;ae<oe;ae++)ee[ae]=arguments[ae];if(ee.length>1){ee[0]=ee[0].slice(0,-1);for(var Ce=ee.length-1,Se=1;Se<Ce;++Se)ee[Se]=ee[Se].slice(1,-1);return ee[Ce]=ee[Ce].slice(1),ee.join("")}else return ee[0]}function i(oe){return"(?:"+oe+")"}function s(oe){return oe===void 0?"undefined":oe===null?"null":Object.prototype.toString.call(oe).split(" ").pop().split("]").shift().toLowerCase()}function o(oe){return oe.toUpperCase()}function a(oe){return oe!=null?oe instanceof Array?oe:typeof oe.length!="number"||oe.split||oe.setInterval||oe.call?[oe]:Array.prototype.slice.call(oe):[]}function u(oe,ee){var ae=oe;if(ee)for(var Ce in ee)ae[Ce]=ee[Ce];return ae}function l(oe){var ee="[A-Za-z]",ae="[0-9]",Ce=r(ae,"[A-Fa-f]"),Se=i(i("%[EFef]"+Ce+"%"+Ce+Ce+"%"+Ce+Ce)+"|"+i("%[89A-Fa-f]"+Ce+"%"+Ce+Ce)+"|"+i("%"+Ce+Ce)),ot="[\\:\\/\\?\\#\\[\\]\\@]",St="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",Ht=r(ot,St),On=oe?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]",jn=oe?"[\\uE000-\\uF8FF]":"[]",pn=r(ee,ae,"[\\-\\.\\_\\~]",On);i(ee+r(ee,ae,"[\\+\\-\\.]")+"*"),i(i(Se+"|"+r(pn,St,"[\\:]"))+"*");var ir=i(i("25[0-5]")+"|"+i("2[0-4]"+ae)+"|"+i("1"+ae+ae)+"|"+i("0?[1-9]"+ae)+"|0?0?"+ae),Ir=i(ir+"\\."+ir+"\\."+ir+"\\."+ir),Vt=i(Ce+"{1,4}"),sr=i(i(Vt+"\\:"+Vt)+"|"+Ir),Hr=i(i(Vt+"\\:")+"{6}"+sr),Jn=i("\\:\\:"+i(Vt+"\\:")+"{5}"+sr),ki=i(i(Vt)+"?\\:\\:"+i(Vt+"\\:")+"{4}"+sr),Hs=i(i(i(Vt+"\\:")+"{0,1}"+Vt)+"?\\:\\:"+i(Vt+"\\:")+"{3}"+sr),Jr=i(i(i(Vt+"\\:")+"{0,2}"+Vt)+"?\\:\\:"+i(Vt+"\\:")+"{2}"+sr),mo=i(i(i(Vt+"\\:")+"{0,3}"+Vt)+"?\\:\\:"+Vt+"\\:"+sr),Li=i(i(i(Vt+"\\:")+"{0,4}"+Vt)+"?\\:\\:"+sr),Fi=i(i(i(Vt+"\\:")+"{0,5}"+Vt)+"?\\:\\:"+Vt),Vo=i(i(i(Vt+"\\:")+"{0,6}"+Vt)+"?\\:\\:"),Ra=i([Hr,Jn,ki,Hs,Jr,mo,Li,Fi,Vo].join("|")),qs=i(i(pn+"|"+Se)+"+");i("[vV]"+Ce+"+\\."+r(pn,St,"[\\:]")+"+"),i(i(Se+"|"+r(pn,St))+"*");var tc=i(Se+"|"+r(pn,St,"[\\:\\@]"));return i(i(Se+"|"+r(pn,St,"[\\@]"))+"+"),i(i(tc+"|"+r("[\\/\\?]",jn))+"*"),{NOT_SCHEME:new RegExp(r("[^]",ee,ae,"[\\+\\-\\.]"),"g"),NOT_USERINFO:new RegExp(r("[^\\%\\:]",pn,St),"g"),NOT_HOST:new RegExp(r("[^\\%\\[\\]\\:]",pn,St),"g"),NOT_PATH:new RegExp(r("[^\\%\\/\\:\\@]",pn,St),"g"),NOT_PATH_NOSCHEME:new RegExp(r("[^\\%\\/\\@]",pn,St),"g"),NOT_QUERY:new RegExp(r("[^\\%]",pn,St,"[\\:\\@\\/\\?]",jn),"g"),NOT_FRAGMENT:new RegExp(r("[^\\%]",pn,St,"[\\:\\@\\/\\?]"),"g"),ESCAPE:new RegExp(r("[^]",pn,St),"g"),UNRESERVED:new RegExp(pn,"g"),OTHER_CHARS:new RegExp(r("[^\\%]",pn,Ht),"g"),PCT_ENCODED:new RegExp(Se,"g"),IPV4ADDRESS:new RegExp("^("+Ir+")$"),IPV6ADDRESS:new RegExp("^\\[?("+Ra+")"+i(i("\\%25|\\%(?!"+Ce+"{2})")+"("+qs+")")+"?\\]?$")}}var c=l(!1),f=l(!0),d=function(){function oe(ee,ae){var Ce=[],Se=!0,ot=!1,St=void 0;try{for(var Ht=ee[Symbol.iterator](),On;!(Se=(On=Ht.next()).done)&&(Ce.push(On.value),!(ae&&Ce.length===ae));Se=!0);}catch(jn){ot=!0,St=jn}finally{try{!Se&&Ht.return&&Ht.return()}finally{if(ot)throw St}}return Ce}return function(ee,ae){if(Array.isArray(ee))return ee;if(Symbol.iterator in Object(ee))return oe(ee,ae);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),h=function(oe){if(Array.isArray(oe)){for(var ee=0,ae=Array(oe.length);ee<oe.length;ee++)ae[ee]=oe[ee];return ae}else return Array.from(oe)},p=2147483647,m=36,g=1,y=26,v=38,b=700,w=72,E=128,T="-",S=/^xn--/,C=/[^\0-\x7E]/,A=/[\x2E\u3002\uFF0E\uFF61]/g,k={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},N=m-g,O=Math.floor,P=String.fromCharCode;function $(oe){throw new RangeError(k[oe])}function F(oe,ee){for(var ae=[],Ce=oe.length;Ce--;)ae[Ce]=ee(oe[Ce]);return ae}function M(oe,ee){var ae=oe.split("@"),Ce="";ae.length>1&&(Ce=ae[0]+"@",oe=ae[1]),oe=oe.replace(A,".");var Se=oe.split("."),ot=F(Se,ee).join(".");return Ce+ot}function B(oe){for(var ee=[],ae=0,Ce=oe.length;ae<Ce;){var Se=oe.charCodeAt(ae++);if(Se>=55296&&Se<=56319&&ae<Ce){var ot=oe.charCodeAt(ae++);(ot&64512)==56320?ee.push(((Se&1023)<<10)+(ot&1023)+65536):(ee.push(Se),ae--)}else ee.push(Se)}return ee}var U=function(ee){return String.fromCodePoint.apply(String,h(ee))},H=function(ee){return ee-48<10?ee-22:ee-65<26?ee-65:ee-97<26?ee-97:m},D=function(ee,ae){return ee+22+75*(ee<26)-((ae!=0)<<5)},z=function(ee,ae,Ce){var Se=0;for(ee=Ce?O(ee/b):ee>>1,ee+=O(ee/ae);ee>N*y>>1;Se+=m)ee=O(ee/N);return O(Se+(N+1)*ee/(ee+v))},W=function(ee){var ae=[],Ce=ee.length,Se=0,ot=E,St=w,Ht=ee.lastIndexOf(T);Ht<0&&(Ht=0);for(var On=0;On<Ht;++On)ee.charCodeAt(On)>=128&&$("not-basic"),ae.push(ee.charCodeAt(On));for(var jn=Ht>0?Ht+1:0;jn<Ce;){for(var pn=Se,ir=1,Ir=m;;Ir+=m){jn>=Ce&&$("invalid-input");var Vt=H(ee.charCodeAt(jn++));(Vt>=m||Vt>O((p-Se)/ir))&&$("overflow"),Se+=Vt*ir;var sr=Ir<=St?g:Ir>=St+y?y:Ir-St;if(Vt<sr)break;var Hr=m-sr;ir>O(p/Hr)&&$("overflow"),ir*=Hr}var Jn=ae.length+1;St=z(Se-pn,Jn,pn==0),O(Se/Jn)>p-ot&&$("overflow"),ot+=O(Se/Jn),Se%=Jn,ae.splice(Se++,0,ot)}return String.fromCodePoint.apply(String,ae)},j=function(ee){var ae=[];ee=B(ee);var Ce=ee.length,Se=E,ot=0,St=w,Ht=!0,On=!1,jn=void 0;try{for(var pn=ee[Symbol.iterator](),ir;!(Ht=(ir=pn.next()).done);Ht=!0){var Ir=ir.value;Ir<128&&ae.push(P(Ir))}}catch(Oe){On=!0,jn=Oe}finally{try{!Ht&&pn.return&&pn.return()}finally{if(On)throw jn}}var Vt=ae.length,sr=Vt;for(Vt&&ae.push(T);sr<Ce;){var Hr=p,Jn=!0,ki=!1,Hs=void 0;try{for(var Jr=ee[Symbol.iterator](),mo;!(Jn=(mo=Jr.next()).done);Jn=!0){var Li=mo.value;Li>=Se&&Li<Hr&&(Hr=Li)}}catch(Oe){ki=!0,Hs=Oe}finally{try{!Jn&&Jr.return&&Jr.return()}finally{if(ki)throw Hs}}var Fi=sr+1;Hr-Se>O((p-ot)/Fi)&&$("overflow"),ot+=(Hr-Se)*Fi,Se=Hr;var Vo=!0,Ra=!1,qs=void 0;try{for(var tc=ee[Symbol.iterator](),_d;!(Vo=(_d=tc.next()).done);Vo=!0){var Y=_d.value;if(Y<Se&&++ot>p&&$("overflow"),Y==Se){for(var se=ot,Z=m;;Z+=m){var fe=Z<=St?g:Z>=St+y?y:Z-St;if(se<fe)break;var ye=se-fe,le=m-fe;ae.push(P(D(fe+ye%le,0))),se=O(ye/le)}ae.push(P(D(se,0))),St=z(ot,Fi,sr==Vt),ot=0,++sr}}}catch(Oe){Ra=!0,qs=Oe}finally{try{!Vo&&tc.return&&tc.return()}finally{if(Ra)throw qs}}++ot,++Se}return ae.join("")},q=function(ee){return M(ee,function(ae){return S.test(ae)?W(ae.slice(4).toLowerCase()):ae})},G=function(ee){return M(ee,function(ae){return C.test(ae)?"xn--"+j(ae):ae})},ne={version:"2.1.0",ucs2:{decode:B,encode:U},decode:W,encode:j,toASCII:G,toUnicode:q},ce={};function de(oe){var ee=oe.charCodeAt(0),ae=void 0;return ee<16?ae="%0"+ee.toString(16).toUpperCase():ee<128?ae="%"+ee.toString(16).toUpperCase():ee<2048?ae="%"+(ee>>6|192).toString(16).toUpperCase()+"%"+(ee&63|128).toString(16).toUpperCase():ae="%"+(ee>>12|224).toString(16).toUpperCase()+"%"+(ee>>6&63|128).toString(16).toUpperCase()+"%"+(ee&63|128).toString(16).toUpperCase(),ae}function he(oe){for(var ee="",ae=0,Ce=oe.length;ae<Ce;){var Se=parseInt(oe.substr(ae+1,2),16);if(Se<128)ee+=String.fromCharCode(Se),ae+=3;else if(Se>=194&&Se<224){if(Ce-ae>=6){var ot=parseInt(oe.substr(ae+4,2),16);ee+=String.fromCharCode((Se&31)<<6|ot&63)}else ee+=oe.substr(ae,6);ae+=6}else if(Se>=224){if(Ce-ae>=9){var St=parseInt(oe.substr(ae+4,2),16),Ht=parseInt(oe.substr(ae+7,2),16);ee+=String.fromCharCode((Se&15)<<12|(St&63)<<6|Ht&63)}else ee+=oe.substr(ae,9);ae+=9}else ee+=oe.substr(ae,3),ae+=3}return ee}function ve(oe,ee){function ae(Ce){var Se=he(Ce);return Se.match(ee.UNRESERVED)?Se:Ce}return oe.scheme&&(oe.scheme=String(oe.scheme).replace(ee.PCT_ENCODED,ae).toLowerCase().replace(ee.NOT_SCHEME,"")),oe.userinfo!==void 0&&(oe.userinfo=String(oe.userinfo).replace(ee.PCT_ENCODED,ae).replace(ee.NOT_USERINFO,de).replace(ee.PCT_ENCODED,o)),oe.host!==void 0&&(oe.host=String(oe.host).replace(ee.PCT_ENCODED,ae).toLowerCase().replace(ee.NOT_HOST,de).replace(ee.PCT_ENCODED,o)),oe.path!==void 0&&(oe.path=String(oe.path).replace(ee.PCT_ENCODED,ae).replace(oe.scheme?ee.NOT_PATH:ee.NOT_PATH_NOSCHEME,de).replace(ee.PCT_ENCODED,o)),oe.query!==void 0&&(oe.query=String(oe.query).replace(ee.PCT_ENCODED,ae).replace(ee.NOT_QUERY,de).replace(ee.PCT_ENCODED,o)),oe.fragment!==void 0&&(oe.fragment=String(oe.fragment).replace(ee.PCT_ENCODED,ae).replace(ee.NOT_FRAGMENT,de).replace(ee.PCT_ENCODED,o)),oe}function Ie(oe){return oe.replace(/^0*(.*)/,"$1")||"0"}function be(oe,ee){var ae=oe.match(ee.IPV4ADDRESS)||[],Ce=d(ae,2),Se=Ce[1];return Se?Se.split(".").map(Ie).join("."):oe}function Ke(oe,ee){var ae=oe.match(ee.IPV6ADDRESS)||[],Ce=d(ae,3),Se=Ce[1],ot=Ce[2];if(Se){for(var St=Se.toLowerCase().split("::").reverse(),Ht=d(St,2),On=Ht[0],jn=Ht[1],pn=jn?jn.split(":").map(Ie):[],ir=On.split(":").map(Ie),Ir=ee.IPV4ADDRESS.test(ir[ir.length-1]),Vt=Ir?7:8,sr=ir.length-Vt,Hr=Array(Vt),Jn=0;Jn<Vt;++Jn)Hr[Jn]=pn[Jn]||ir[sr+Jn]||"";Ir&&(Hr[Vt-1]=be(Hr[Vt-1],ee));var ki=Hr.reduce(function(Fi,Vo,Ra){if(!Vo||Vo==="0"){var qs=Fi[Fi.length-1];qs&&qs.index+qs.length===Ra?qs.length++:Fi.push({index:Ra,length:1})}return Fi},[]),Hs=ki.sort(function(Fi,Vo){return Vo.length-Fi.length})[0],Jr=void 0;if(Hs&&Hs.length>1){var mo=Hr.slice(0,Hs.index),Li=Hr.slice(Hs.index+Hs.length);Jr=mo.join(":")+"::"+Li.join(":")}else Jr=Hr.join(":");return ot&&(Jr+="%"+ot),Jr}else return oe}var Ue=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[^\/?#\]]+\]|[^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i,yt="".match(/(){0}/)[1]===void 0;function it(oe){var ee=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ae={},Ce=ee.iri!==!1?f:c;ee.reference==="suffix"&&(oe=(ee.scheme?ee.scheme+":":"")+"//"+oe);var Se=oe.match(Ue);if(Se){yt?(ae.scheme=Se[1],ae.userinfo=Se[3],ae.host=Se[4],ae.port=parseInt(Se[5],10),ae.path=Se[6]||"",ae.query=Se[7],ae.fragment=Se[8],isNaN(ae.port)&&(ae.port=Se[5])):(ae.scheme=Se[1]||void 0,ae.userinfo=oe.indexOf("@")!==-1?Se[3]:void 0,ae.host=oe.indexOf("//")!==-1?Se[4]:void 0,ae.port=parseInt(Se[5],10),ae.path=Se[6]||"",ae.query=oe.indexOf("?")!==-1?Se[7]:void 0,ae.fragment=oe.indexOf("#")!==-1?Se[8]:void 0,isNaN(ae.port)&&(ae.port=oe.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?Se[4]:void 0)),ae.host&&(ae.host=Ke(be(ae.host,Ce),Ce)),ae.scheme===void 0&&ae.userinfo===void 0&&ae.host===void 0&&ae.port===void 0&&!ae.path&&ae.query===void 0?ae.reference="same-document":ae.scheme===void 0?ae.reference="relative":ae.fragment===void 0?ae.reference="absolute":ae.reference="uri",ee.reference&&ee.reference!=="suffix"&&ee.reference!==ae.reference&&(ae.error=ae.error||"URI is not a "+ee.reference+" reference.");var ot=ce[(ee.scheme||ae.scheme||"").toLowerCase()];if(!ee.unicodeSupport&&(!ot||!ot.unicodeSupport)){if(ae.host&&(ee.domainHost||ot&&ot.domainHost))try{ae.host=ne.toASCII(ae.host.replace(Ce.PCT_ENCODED,he).toLowerCase())}catch(St){ae.error=ae.error||"Host's domain name can not be converted to ASCII via punycode: "+St}ve(ae,c)}else ve(ae,Ce);ot&&ot.parse&&ot.parse(ae,ee)}else ae.error=ae.error||"URI can not be parsed.";return ae}function _e(oe,ee){var ae=ee.iri!==!1?f:c,Ce=[];return oe.userinfo!==void 0&&(Ce.push(oe.userinfo),Ce.push("@")),oe.host!==void 0&&Ce.push(Ke(be(String(oe.host),ae),ae).replace(ae.IPV6ADDRESS,function(Se,ot,St){return"["+ot+(St?"%25"+St:"")+"]"})),(typeof oe.port=="number"||typeof oe.port=="string")&&(Ce.push(":"),Ce.push(String(oe.port))),Ce.length?Ce.join(""):void 0}var ke=/^\.\.?\//,ze=/^\/\.(\/|$)/,ct=/^\/\.\.(\/|$)/,Ot=/^\/?(?:.|\n)*?(?=\/|$)/;function We(oe){for(var ee=[];oe.length;)if(oe.match(ke))oe=oe.replace(ke,"");else if(oe.match(ze))oe=oe.replace(ze,"/");else if(oe.match(ct))oe=oe.replace(ct,"/"),ee.pop();else if(oe==="."||oe==="..")oe="";else{var ae=oe.match(Ot);if(ae){var Ce=ae[0];oe=oe.slice(Ce.length),ee.push(Ce)}else throw new Error("Unexpected dot segment condition")}return ee.join("")}function ge(oe){var ee=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ae=ee.iri?f:c,Ce=[],Se=ce[(ee.scheme||oe.scheme||"").toLowerCase()];if(Se&&Se.serialize&&Se.serialize(oe,ee),oe.host&&!ae.IPV6ADDRESS.test(oe.host)){if(ee.domainHost||Se&&Se.domainHost)try{oe.host=ee.iri?ne.toUnicode(oe.host):ne.toASCII(oe.host.replace(ae.PCT_ENCODED,he).toLowerCase())}catch(Ht){oe.error=oe.error||"Host's domain name can not be converted to "+(ee.iri?"Unicode":"ASCII")+" via punycode: "+Ht}}ve(oe,ae),ee.reference!=="suffix"&&oe.scheme&&(Ce.push(oe.scheme),Ce.push(":"));var ot=_e(oe,ee);if(ot!==void 0&&(ee.reference!=="suffix"&&Ce.push("//"),Ce.push(ot),oe.path&&oe.path.charAt(0)!=="/"&&Ce.push("/")),oe.path!==void 0){var St=oe.path;!ee.absolutePath&&(!Se||!Se.absolutePath)&&(St=We(St)),ot===void 0&&(St=St.replace(/^\/\//,"/%2F")),Ce.push(St)}return oe.query!==void 0&&(Ce.push("?"),Ce.push(oe.query)),oe.fragment!==void 0&&(Ce.push("#"),Ce.push(oe.fragment)),Ce.join("")}function ht(oe,ee){var ae=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},Ce=arguments[3],Se={};return Ce||(oe=it(ge(oe,ae),ae),ee=it(ge(ee,ae),ae)),ae=ae||{},!ae.tolerant&&ee.scheme?(Se.scheme=ee.scheme,Se.userinfo=ee.userinfo,Se.host=ee.host,Se.port=ee.port,Se.path=We(ee.path||""),Se.query=ee.query):(ee.userinfo!==void 0||ee.host!==void 0||ee.port!==void 0?(Se.userinfo=ee.userinfo,Se.host=ee.host,Se.port=ee.port,Se.path=We(ee.path||""),Se.query=ee.query):(ee.path?(ee.path.charAt(0)==="/"?Se.path=We(ee.path):((oe.userinfo!==void 0||oe.host!==void 0||oe.port!==void 0)&&!oe.path?Se.path="/"+ee.path:oe.path?Se.path=oe.path.slice(0,oe.path.lastIndexOf("/")+1)+ee.path:Se.path=ee.path,Se.path=We(Se.path)),Se.query=ee.query):(Se.path=oe.path,ee.query!==void 0?Se.query=ee.query:Se.query=oe.query),Se.userinfo=oe.userinfo,Se.host=oe.host,Se.port=oe.port),Se.scheme=oe.scheme),Se.fragment=ee.fragment,Se}function vt(oe,ee,ae){var Ce=u({scheme:"null"},ae);return ge(ht(it(oe,Ce),it(ee,Ce),Ce,!0),Ce)}function me(oe,ee){return typeof oe=="string"?oe=ge(it(oe,ee),ee):s(oe)==="object"&&(oe=it(ge(oe,ee),ee)),oe}function Ae(oe,ee,ae){return typeof oe=="string"?oe=ge(it(oe,ae),ae):s(oe)==="object"&&(oe=ge(oe,ae)),typeof ee=="string"?ee=ge(it(ee,ae),ae):s(ee)==="object"&&(ee=ge(ee,ae)),oe===ee}function He(oe,ee){return oe&&oe.toString().replace(!ee||!ee.iri?c.ESCAPE:f.ESCAPE,de)}function ut(oe,ee){return oe&&oe.toString().replace(!ee||!ee.iri?c.PCT_ENCODED:f.PCT_ENCODED,he)}var _t={scheme:"http",domainHost:!0,parse:function(ee,ae){return ee.host||(ee.error=ee.error||"HTTP URIs must have a host."),ee},serialize:function(ee,ae){var Ce=String(ee.scheme).toLowerCase()==="https";return(ee.port===(Ce?443:80)||ee.port==="")&&(ee.port=void 0),ee.path||(ee.path="/"),ee}},Ln={scheme:"https",domainHost:_t.domainHost,parse:_t.parse,serialize:_t.serialize};function Cr(oe){return typeof oe.secure=="boolean"?oe.secure:String(oe.scheme).toLowerCase()==="wss"}var Fn={scheme:"ws",domainHost:!0,parse:function(ee,ae){var Ce=ee;return Ce.secure=Cr(Ce),Ce.resourceName=(Ce.path||"/")+(Ce.query?"?"+Ce.query:""),Ce.path=void 0,Ce.query=void 0,Ce},serialize:function(ee,ae){if((ee.port===(Cr(ee)?443:80)||ee.port==="")&&(ee.port=void 0),typeof ee.secure=="boolean"&&(ee.scheme=ee.secure?"wss":"ws",ee.secure=void 0),ee.resourceName){var Ce=ee.resourceName.split("?"),Se=d(Ce,2),ot=Se[0],St=Se[1];ee.path=ot&&ot!=="/"?ot:void 0,ee.query=St,ee.resourceName=void 0}return ee.fragment=void 0,ee}},cr={scheme:"wss",domainHost:Fn.domainHost,parse:Fn.parse,serialize:Fn.serialize},gn={},An="[A-Za-z0-9\\-\\.\\_\\~\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]",nr="[0-9A-Fa-f]",rr=i(i("%[EFef]"+nr+"%"+nr+nr+"%"+nr+nr)+"|"+i("%[89A-Fa-f]"+nr+"%"+nr+nr)+"|"+i("%"+nr+nr)),zo="[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]",$i="[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\<\\>A-Z\\x5E-\\x7E]",In=r($i,'[\\"\\\\]'),Mi="[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]",Ar=new RegExp(An,"g"),gs=new RegExp(rr,"g"),hp=new RegExp(r("[^]",zo,"[\\.]",'[\\"]',In),"g"),cl=new RegExp(r("[^]",An,Mi),"g"),bd=cl;function xr(oe){var ee=he(oe);return ee.match(Ar)?ee:oe}var Ii={scheme:"mailto",parse:function(ee,ae){var Ce=ee,Se=Ce.to=Ce.path?Ce.path.split(","):[];if(Ce.path=void 0,Ce.query){for(var ot=!1,St={},Ht=Ce.query.split("&"),On=0,jn=Ht.length;On<jn;++On){var pn=Ht[On].split("=");switch(pn[0]){case"to":for(var ir=pn[1].split(","),Ir=0,Vt=ir.length;Ir<Vt;++Ir)Se.push(ir[Ir]);break;case"subject":Ce.subject=ut(pn[1],ae);break;case"body":Ce.body=ut(pn[1],ae);break;default:ot=!0,St[ut(pn[0],ae)]=ut(pn[1],ae);break}}ot&&(Ce.headers=St)}Ce.query=void 0;for(var sr=0,Hr=Se.length;sr<Hr;++sr){var Jn=Se[sr].split("@");if(Jn[0]=ut(Jn[0]),ae.unicodeSupport)Jn[1]=ut(Jn[1],ae).toLowerCase();else try{Jn[1]=ne.toASCII(ut(Jn[1],ae).toLowerCase())}catch(ki){Ce.error=Ce.error||"Email address's domain name can not be converted to ASCII via punycode: "+ki}Se[sr]=Jn.join("@")}return Ce},serialize:function(ee,ae){var Ce=ee,Se=a(ee.to);if(Se){for(var ot=0,St=Se.length;ot<St;++ot){var Ht=String(Se[ot]),On=Ht.lastIndexOf("@"),jn=Ht.slice(0,On).replace(gs,xr).replace(gs,o).replace(hp,de),pn=Ht.slice(On+1);try{pn=ae.iri?ne.toUnicode(pn):ne.toASCII(ut(pn,ae).toLowerCase())}catch(sr){Ce.error=Ce.error||"Email address's domain name can not be converted to "+(ae.iri?"Unicode":"ASCII")+" via punycode: "+sr}Se[ot]=jn+"@"+pn}Ce.path=Se.join(",")}var ir=ee.headers=ee.headers||{};ee.subject&&(ir.subject=ee.subject),ee.body&&(ir.body=ee.body);var Ir=[];for(var Vt in ir)ir[Vt]!==gn[Vt]&&Ir.push(Vt.replace(gs,xr).replace(gs,o).replace(cl,de)+"="+ir[Vt].replace(gs,xr).replace(gs,o).replace(bd,de));return Ir.length&&(Ce.query=Ir.join("&")),Ce}},Qr=/^([^\:]+)\:(.*)/,cu={scheme:"urn",parse:function(ee,ae){var Ce=ee.path&&ee.path.match(Qr),Se=ee;if(Ce){var ot=ae.scheme||Se.scheme||"urn",St=Ce[1].toLowerCase(),Ht=Ce[2],On=ot+":"+(ae.nid||St),jn=ce[On];Se.nid=St,Se.nss=Ht,Se.path=void 0,jn&&(Se=jn.parse(Se,ae))}else Se.error=Se.error||"URN can not be parsed.";return Se},serialize:function(ee,ae){var Ce=ae.scheme||ee.scheme||"urn",Se=ee.nid,ot=Ce+":"+(ae.nid||Se),St=ce[ot];St&&(ee=St.serialize(ee,ae));var Ht=ee,On=ee.nss;return Ht.path=(Se||ae.nid)+":"+On,Ht}},Ia=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/,ka={scheme:"urn:uuid",parse:function(ee,ae){var Ce=ee;return Ce.uuid=Ce.nss,Ce.nss=void 0,!ae.tolerant&&(!Ce.uuid||!Ce.uuid.match(Ia))&&(Ce.error=Ce.error||"UUID is not valid."),Ce},serialize:function(ee,ae){var Ce=ee;return Ce.nss=(ee.uuid||"").toLowerCase(),Ce}};ce[_t.scheme]=_t,ce[Ln.scheme]=Ln,ce[Fn.scheme]=Fn,ce[cr.scheme]=cr,ce[Ii.scheme]=Ii,ce[cu.scheme]=cu,ce[ka.scheme]=ka,n.SCHEMES=ce,n.pctEncChar=de,n.pctDecChars=he,n.parse=it,n.removeDotSegments=We,n.serialize=ge,n.resolveComponents=ht,n.resolve=vt,n.normalize=me,n.equal=Ae,n.escapeComponent=He,n.unescapeComponent=ut,Object.defineProperty(n,"__esModule",{value:!0})})})(TV,TV.exports);var sIt=TV.exports;Object.defineProperty(rJ,"__esModule",{value:!0});const QRe=sIt;QRe.code='require("ajv/dist/runtime/uri").default';rJ.default=QRe;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.CodeGen=e.Name=e.nil=e.stringify=e.str=e._=e.KeywordCxt=void 0;var t=Uf;Object.defineProperty(e,"KeywordCxt",{enumerable:!0,get:function(){return t.KeywordCxt}});var n=Pn;Object.defineProperty(e,"_",{enumerable:!0,get:function(){return n._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return n.str}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return n.stringify}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return n.nil}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return n.Name}}),Object.defineProperty(e,"CodeGen",{enumerable:!0,get:function(){return n.CodeGen}});const r=Gk,i=DS,s=nb,o=Ru,a=Pn,u=Ao,l=ks,c=wt,f=iIt,d=rJ,h=(D,z)=>new RegExp(D,z);h.code="new RegExp";const p=["removeAdditional","useDefaults","coerceTypes"],m=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),g={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},y={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},v=200;function b(D){var z,W,j,q,G,ne,ce,de,he,ve,Ie,be,Ke,Ue,yt,it,_e,ke,ze,ct,Ot,We,ge,ht,vt;const me=D.strict,Ae=(z=D.code)===null||z===void 0?void 0:z.optimize,He=Ae===!0||Ae===void 0?1:Ae||0,ut=(j=(W=D.code)===null||W===void 0?void 0:W.regExp)!==null&&j!==void 0?j:h,_t=(q=D.uriResolver)!==null&&q!==void 0?q:d.default;return{strictSchema:(ne=(G=D.strictSchema)!==null&&G!==void 0?G:me)!==null&&ne!==void 0?ne:!0,strictNumbers:(de=(ce=D.strictNumbers)!==null&&ce!==void 0?ce:me)!==null&&de!==void 0?de:!0,strictTypes:(ve=(he=D.strictTypes)!==null&&he!==void 0?he:me)!==null&&ve!==void 0?ve:"log",strictTuples:(be=(Ie=D.strictTuples)!==null&&Ie!==void 0?Ie:me)!==null&&be!==void 0?be:"log",strictRequired:(Ue=(Ke=D.strictRequired)!==null&&Ke!==void 0?Ke:me)!==null&&Ue!==void 0?Ue:!1,code:D.code?{...D.code,optimize:He,regExp:ut}:{optimize:He,regExp:ut},loopRequired:(yt=D.loopRequired)!==null&&yt!==void 0?yt:v,loopEnum:(it=D.loopEnum)!==null&&it!==void 0?it:v,meta:(_e=D.meta)!==null&&_e!==void 0?_e:!0,messages:(ke=D.messages)!==null&&ke!==void 0?ke:!0,inlineRefs:(ze=D.inlineRefs)!==null&&ze!==void 0?ze:!0,schemaId:(ct=D.schemaId)!==null&&ct!==void 0?ct:"$id",addUsedSchema:(Ot=D.addUsedSchema)!==null&&Ot!==void 0?Ot:!0,validateSchema:(We=D.validateSchema)!==null&&We!==void 0?We:!0,validateFormats:(ge=D.validateFormats)!==null&&ge!==void 0?ge:!0,unicodeRegExp:(ht=D.unicodeRegExp)!==null&&ht!==void 0?ht:!0,int32range:(vt=D.int32range)!==null&&vt!==void 0?vt:!0,uriResolver:_t}}class w{constructor(z={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,z=this.opts={...z,...b(z)};const{es5:W,lines:j}=this.opts.code;this.scope=new a.ValueScope({scope:{},prefixes:m,es5:W,lines:j}),this.logger=O(z.logger);const q=z.validateFormats;z.validateFormats=!1,this.RULES=(0,s.getRules)(),E.call(this,g,z,"NOT SUPPORTED"),E.call(this,y,z,"DEPRECATED","warn"),this._metaOpts=k.call(this),z.formats&&C.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),z.keywords&&A.call(this,z.keywords),typeof z.meta=="object"&&this.addMetaSchema(z.meta),S.call(this),z.validateFormats=q}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){const{$data:z,meta:W,schemaId:j}=this.opts;let q=f;j==="id"&&(q={...f},q.id=q.$id,delete q.$id),W&&z&&this.addMetaSchema(q,q[j],!1)}defaultMeta(){const{meta:z,schemaId:W}=this.opts;return this.opts.defaultMeta=typeof z=="object"?z[W]||z:void 0}validate(z,W){let j;if(typeof z=="string"){if(j=this.getSchema(z),!j)throw new Error(`no schema with key or ref "${z}"`)}else j=this.compile(z);const q=j(W);return"$async"in j||(this.errors=j.errors),q}compile(z,W){const j=this._addSchema(z,W);return j.validate||this._compileSchemaEnv(j)}compileAsync(z,W){if(typeof this.opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");const{loadSchema:j}=this.opts;return q.call(this,z,W);async function q(ve,Ie){await G.call(this,ve.$schema);const be=this._addSchema(ve,Ie);return be.validate||ne.call(this,be)}async function G(ve){ve&&!this.getSchema(ve)&&await q.call(this,{$ref:ve},!0)}async function ne(ve){try{return this._compileSchemaEnv(ve)}catch(Ie){if(!(Ie instanceof i.default))throw Ie;return ce.call(this,Ie),await de.call(this,Ie.missingSchema),ne.call(this,ve)}}function ce({missingSchema:ve,missingRef:Ie}){if(this.refs[ve])throw new Error(`AnySchema ${ve} is loaded but ${Ie} cannot be resolved`)}async function de(ve){const Ie=await he.call(this,ve);this.refs[ve]||await G.call(this,Ie.$schema),this.refs[ve]||this.addSchema(Ie,ve,W)}async function he(ve){const Ie=this._loading[ve];if(Ie)return Ie;try{return await(this._loading[ve]=j(ve))}finally{delete this._loading[ve]}}}addSchema(z,W,j,q=this.opts.validateSchema){if(Array.isArray(z)){for(const ne of z)this.addSchema(ne,void 0,j,q);return this}let G;if(typeof z=="object"){const{schemaId:ne}=this.opts;if(G=z[ne],G!==void 0&&typeof G!="string")throw new Error(`schema ${ne} must be string`)}return W=(0,u.normalizeId)(W||G),this._checkUnique(W),this.schemas[W]=this._addSchema(z,j,W,q,!0),this}addMetaSchema(z,W,j=this.opts.validateSchema){return this.addSchema(z,W,!0,j),this}validateSchema(z,W){if(typeof z=="boolean")return!0;let j;if(j=z.$schema,j!==void 0&&typeof j!="string")throw new Error("$schema must be a string");if(j=j||this.opts.defaultMeta||this.defaultMeta(),!j)return this.logger.warn("meta-schema not available"),this.errors=null,!0;const q=this.validate(j,z);if(!q&&W){const G="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(G);else throw new Error(G)}return q}getSchema(z){let W;for(;typeof(W=T.call(this,z))=="string";)z=W;if(W===void 0){const{schemaId:j}=this.opts,q=new o.SchemaEnv({schema:{},schemaId:j});if(W=o.resolveSchema.call(this,q,z),!W)return;this.refs[z]=W}return W.validate||this._compileSchemaEnv(W)}removeSchema(z){if(z instanceof RegExp)return this._removeAllSchemas(this.schemas,z),this._removeAllSchemas(this.refs,z),this;switch(typeof z){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{const W=T.call(this,z);return typeof W=="object"&&this._cache.delete(W.schema),delete this.schemas[z],delete this.refs[z],this}case"object":{const W=z;this._cache.delete(W);let j=z[this.opts.schemaId];return j&&(j=(0,u.normalizeId)(j),delete this.schemas[j],delete this.refs[j]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(z){for(const W of z)this.addKeyword(W);return this}addKeyword(z,W){let j;if(typeof z=="string")j=z,typeof W=="object"&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),W.keyword=j);else if(typeof z=="object"&&W===void 0){if(W=z,j=W.keyword,Array.isArray(j)&&!j.length)throw new Error("addKeywords: keyword must be string or non-empty array")}else throw new Error("invalid addKeywords parameters");if($.call(this,j,W),!W)return(0,c.eachItem)(j,G=>F.call(this,G)),this;B.call(this,W);const q={...W,type:(0,l.getJSONTypes)(W.type),schemaType:(0,l.getJSONTypes)(W.schemaType)};return(0,c.eachItem)(j,q.type.length===0?G=>F.call(this,G,q):G=>q.type.forEach(ne=>F.call(this,G,q,ne))),this}getKeyword(z){const W=this.RULES.all[z];return typeof W=="object"?W.definition:!!W}removeKeyword(z){const{RULES:W}=this;delete W.keywords[z],delete W.all[z];for(const j of W.rules){const q=j.rules.findIndex(G=>G.keyword===z);q>=0&&j.rules.splice(q,1)}return this}addFormat(z,W){return typeof W=="string"&&(W=new RegExp(W)),this.formats[z]=W,this}errorsText(z=this.errors,{separator:W=", ",dataVar:j="data"}={}){return!z||z.length===0?"No errors":z.map(q=>`${j}${q.instancePath} ${q.message}`).reduce((q,G)=>q+W+G)}$dataMetaSchema(z,W){const j=this.RULES.all;z=JSON.parse(JSON.stringify(z));for(const q of W){const G=q.split("/").slice(1);let ne=z;for(const ce of G)ne=ne[ce];for(const ce in j){const de=j[ce];if(typeof de!="object")continue;const{$data:he}=de.definition,ve=ne[ce];he&&ve&&(ne[ce]=H(ve))}}return z}_removeAllSchemas(z,W){for(const j in z){const q=z[j];(!W||W.test(j))&&(typeof q=="string"?delete z[j]:q&&!q.meta&&(this._cache.delete(q.schema),delete z[j]))}}_addSchema(z,W,j,q=this.opts.validateSchema,G=this.opts.addUsedSchema){let ne;const{schemaId:ce}=this.opts;if(typeof z=="object")ne=z[ce];else{if(this.opts.jtd)throw new Error("schema must be object");if(typeof z!="boolean")throw new Error("schema must be object or boolean")}let de=this._cache.get(z);if(de!==void 0)return de;j=(0,u.normalizeId)(ne||j);const he=u.getSchemaRefs.call(this,z,j);return de=new o.SchemaEnv({schema:z,schemaId:ce,meta:W,baseId:j,localRefs:he}),this._cache.set(de.schema,de),G&&!j.startsWith("#")&&(j&&this._checkUnique(j),this.refs[j]=de),q&&this.validateSchema(z,!0),de}_checkUnique(z){if(this.schemas[z]||this.refs[z])throw new Error(`schema with key or id "${z}" already exists`)}_compileSchemaEnv(z){if(z.meta?this._compileMetaSchema(z):o.compileSchema.call(this,z),!z.validate)throw new Error("ajv implementation error");return z.validate}_compileMetaSchema(z){const W=this.opts;this.opts=this._metaOpts;try{o.compileSchema.call(this,z)}finally{this.opts=W}}}w.ValidationError=r.default,w.MissingRefError=i.default,e.default=w;function E(D,z,W,j="error"){for(const q in D){const G=q;G in z&&this.logger[j](`${W}: option ${q}. ${D[G]}`)}}function T(D){return D=(0,u.normalizeId)(D),this.schemas[D]||this.refs[D]}function S(){const D=this.opts.schemas;if(D)if(Array.isArray(D))this.addSchema(D);else for(const z in D)this.addSchema(D[z],z)}function C(){for(const D in this.opts.formats){const z=this.opts.formats[D];z&&this.addFormat(D,z)}}function A(D){if(Array.isArray(D)){this.addVocabulary(D);return}this.logger.warn("keywords option as map is deprecated, pass array");for(const z in D){const W=D[z];W.keyword||(W.keyword=z),this.addKeyword(W)}}function k(){const D={...this.opts};for(const z of p)delete D[z];return D}const N={log(){},warn(){},error(){}};function O(D){if(D===!1)return N;if(D===void 0)return console;if(D.log&&D.warn&&D.error)return D;throw new Error("logger must implement log, warn and error methods")}const P=/^[a-z_$][a-z0-9_$:-]*$/i;function $(D,z){const{RULES:W}=this;if((0,c.eachItem)(D,j=>{if(W.keywords[j])throw new Error(`Keyword ${j} is already defined`);if(!P.test(j))throw new Error(`Keyword ${j} has invalid name`)}),!!z&&z.$data&&!("code"in z||"validate"in z))throw new Error('$data keyword must have "code" or "validate" function')}function F(D,z,W){var j;const q=z==null?void 0:z.post;if(W&&q)throw new Error('keyword with "post" flag cannot have "type"');const{RULES:G}=this;let ne=q?G.post:G.rules.find(({type:de})=>de===W);if(ne||(ne={type:W,rules:[]},G.rules.push(ne)),G.keywords[D]=!0,!z)return;const ce={keyword:D,definition:{...z,type:(0,l.getJSONTypes)(z.type),schemaType:(0,l.getJSONTypes)(z.schemaType)}};z.before?M.call(this,ne,ce,z.before):ne.rules.push(ce),G.all[D]=ce,(j=z.implements)===null||j===void 0||j.forEach(de=>this.addKeyword(de))}function M(D,z,W){const j=D.rules.findIndex(q=>q.keyword===W);j>=0?D.rules.splice(j,0,z):(D.rules.push(z),this.logger.warn(`rule ${W} is not defined`))}function B(D){let{metaSchema:z}=D;z!==void 0&&(D.$data&&this.opts.$data&&(z=H(z)),D.validateSchema=this.compile(z,!0))}const U={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function H(D){return{anyOf:[D,U]}}})(bRe);var iJ={},sJ={},oJ={};Object.defineProperty(oJ,"__esModule",{value:!0});const oIt={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};oJ.default=oIt;var rb={};Object.defineProperty(rb,"__esModule",{value:!0});rb.callRef=rb.getValidate=void 0;const aIt=DS,Sde=Nn,bu=Pn,j_=tp,Tde=Ru,aD=wt,uIt={keyword:"$ref",schemaType:"string",code(e){const{gen:t,schema:n,it:r}=e,{baseId:i,schemaEnv:s,validateName:o,opts:a,self:u}=r,{root:l}=s;if((n==="#"||n==="#/")&&i===l.baseId)return f();const c=Tde.resolveRef.call(u,l,i,n);if(c===void 0)throw new aIt.default(r.opts.uriResolver,i,n);if(c instanceof Tde.SchemaEnv)return d(c);return h(c);function f(){if(s===l)return $P(e,o,s,s.$async);const p=t.scopeValue("root",{ref:l});return $P(e,(0,bu._)`${p}.validate`,l,l.$async)}function d(p){const m=JRe(e,p);$P(e,m,p,p.$async)}function h(p){const m=t.scopeValue("schema",a.code.source===!0?{ref:p,code:(0,bu.stringify)(p)}:{ref:p}),g=t.name("valid"),y=e.subschema({schema:p,dataTypes:[],schemaPath:bu.nil,topSchemaRef:m,errSchemaPath:n},g);e.mergeEvaluated(y),e.ok(g)}}};function JRe(e,t){const{gen:n}=e;return t.validate?n.scopeValue("validate",{ref:t.validate}):(0,bu._)`${n.scopeValue("wrapper",{ref:t})}.validate`}rb.getValidate=JRe;function $P(e,t,n,r){const{gen:i,it:s}=e,{allErrors:o,schemaEnv:a,opts:u}=s,l=u.passContext?j_.default.this:bu.nil;r?c():f();function c(){if(!a.$async)throw new Error("async schema referenced by sync schema");const p=i.let("valid");i.try(()=>{i.code((0,bu._)`await ${(0,Sde.callValidateCode)(e,t,l)}`),h(t),o||i.assign(p,!0)},m=>{i.if((0,bu._)`!(${m} instanceof ${s.ValidationError})`,()=>i.throw(m)),d(m),o||i.assign(p,!1)}),e.ok(p)}function f(){e.result((0,Sde.callValidateCode)(e,t,l),()=>h(t),()=>d(t))}function d(p){const m=(0,bu._)`${p}.errors`;i.assign(j_.default.vErrors,(0,bu._)`${j_.default.vErrors} === null ? ${m} : ${j_.default.vErrors}.concat(${m})`),i.assign(j_.default.errors,(0,bu._)`${j_.default.vErrors}.length`)}function h(p){var m;if(!s.opts.unevaluated)return;const g=(m=n==null?void 0:n.validate)===null||m===void 0?void 0:m.evaluated;if(s.props!==!0)if(g&&!g.dynamicProps)g.props!==void 0&&(s.props=aD.mergeEvaluated.props(i,g.props,s.props));else{const y=i.var("props",(0,bu._)`${p}.evaluated.props`);s.props=aD.mergeEvaluated.props(i,y,s.props,bu.Name)}if(s.items!==!0)if(g&&!g.dynamicItems)g.items!==void 0&&(s.items=aD.mergeEvaluated.items(i,g.items,s.items));else{const y=i.var("items",(0,bu._)`${p}.evaluated.items`);s.items=aD.mergeEvaluated.items(i,y,s.items,bu.Name)}}}rb.callRef=$P;rb.default=uIt;Object.defineProperty(sJ,"__esModule",{value:!0});const lIt=oJ,cIt=rb,fIt=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",lIt.default,cIt.default];sJ.default=fIt;var aJ={},uJ={};Object.defineProperty(uJ,"__esModule",{value:!0});const j$=Pn,_g=j$.operators,B$={maximum:{okStr:"<=",ok:_g.LTE,fail:_g.GT},minimum:{okStr:">=",ok:_g.GTE,fail:_g.LT},exclusiveMaximum:{okStr:"<",ok:_g.LT,fail:_g.GTE},exclusiveMinimum:{okStr:">",ok:_g.GT,fail:_g.LTE}},dIt={message:({keyword:e,schemaCode:t})=>(0,j$.str)`must be ${B$[e].okStr} ${t}`,params:({keyword:e,schemaCode:t})=>(0,j$._)`{comparison: ${B$[e].okStr}, limit: ${t}}`},hIt={keyword:Object.keys(B$),type:"number",schemaType:"number",$data:!0,error:dIt,code(e){const{keyword:t,data:n,schemaCode:r}=e;e.fail$data((0,j$._)`${n} ${B$[t].fail} ${r} || isNaN(${n})`)}};uJ.default=hIt;var lJ={};Object.defineProperty(lJ,"__esModule",{value:!0});const FC=Pn,pIt={message:({schemaCode:e})=>(0,FC.str)`must be multiple of ${e}`,params:({schemaCode:e})=>(0,FC._)`{multipleOf: ${e}}`},mIt={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:pIt,code(e){const{gen:t,data:n,schemaCode:r,it:i}=e,s=i.opts.multipleOfPrecision,o=t.let("res"),a=s?(0,FC._)`Math.abs(Math.round(${o}) - ${o}) > 1e-${s}`:(0,FC._)`${o} !== parseInt(${o})`;e.fail$data((0,FC._)`(${r} === 0 || (${o} = ${n}/${r}, ${a}))`)}};lJ.default=mIt;var cJ={},fJ={};Object.defineProperty(fJ,"__esModule",{value:!0});function ZRe(e){const t=e.length;let n=0,r=0,i;for(;r<t;)n++,i=e.charCodeAt(r++),i>=55296&&i<=56319&&r<t&&(i=e.charCodeAt(r),(i&64512)===56320&&r++);return n}fJ.default=ZRe;ZRe.code='require("ajv/dist/runtime/ucs2length").default';Object.defineProperty(cJ,"__esModule",{value:!0});const Wv=Pn,gIt=wt,yIt=fJ,vIt={message({keyword:e,schemaCode:t}){const n=e==="maxLength"?"more":"fewer";return(0,Wv.str)`must NOT have ${n} than ${t} characters`},params:({schemaCode:e})=>(0,Wv._)`{limit: ${e}}`},bIt={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:vIt,code(e){const{keyword:t,data:n,schemaCode:r,it:i}=e,s=t==="maxLength"?Wv.operators.GT:Wv.operators.LT,o=i.opts.unicode===!1?(0,Wv._)`${n}.length`:(0,Wv._)`${(0,gIt.useFunc)(e.gen,yIt.default)}(${n})`;e.fail$data((0,Wv._)`${o} ${s} ${r}`)}};cJ.default=bIt;var dJ={};Object.defineProperty(dJ,"__esModule",{value:!0});const _It=Nn,U$=Pn,wIt={message:({schemaCode:e})=>(0,U$.str)`must match pattern "${e}"`,params:({schemaCode:e})=>(0,U$._)`{pattern: ${e}}`},EIt={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:wIt,code(e){const{data:t,$data:n,schema:r,schemaCode:i,it:s}=e,o=s.opts.unicodeRegExp?"u":"",a=n?(0,U$._)`(new RegExp(${i}, ${o}))`:(0,_It.usePattern)(e,r);e.fail$data((0,U$._)`!${a}.test(${t})`)}};dJ.default=EIt;var hJ={};Object.defineProperty(hJ,"__esModule",{value:!0});const jC=Pn,xIt={message({keyword:e,schemaCode:t}){const n=e==="maxProperties"?"more":"fewer";return(0,jC.str)`must NOT have ${n} than ${t} properties`},params:({schemaCode:e})=>(0,jC._)`{limit: ${e}}`},SIt={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:xIt,code(e){const{keyword:t,data:n,schemaCode:r}=e,i=t==="maxProperties"?jC.operators.GT:jC.operators.LT;e.fail$data((0,jC._)`Object.keys(${n}).length ${i} ${r}`)}};hJ.default=SIt;var pJ={};Object.defineProperty(pJ,"__esModule",{value:!0});const UT=Nn,BC=Pn,TIt=wt,CIt={message:({params:{missingProperty:e}})=>(0,BC.str)`must have required property '${e}'`,params:({params:{missingProperty:e}})=>(0,BC._)`{missingProperty: ${e}}`},AIt={keyword:"required",type:"object",schemaType:"array",$data:!0,error:CIt,code(e){const{gen:t,schema:n,schemaCode:r,data:i,$data:s,it:o}=e,{opts:a}=o;if(!s&&n.length===0)return;const u=n.length>=a.loopRequired;if(o.allErrors?l():c(),a.strictRequired){const h=e.parentSchema.properties,{definedProperties:p}=e.it;for(const m of n)if((h==null?void 0:h[m])===void 0&&!p.has(m)){const g=o.schemaEnv.baseId+o.errSchemaPath,y=`required property "${m}" is not defined at "${g}" (strictRequired)`;(0,TIt.checkStrictMode)(o,y,o.opts.strictRequired)}}function l(){if(u||s)e.block$data(BC.nil,f);else for(const h of n)(0,UT.checkReportMissingProp)(e,h)}function c(){const h=t.let("missing");if(u||s){const p=t.let("valid",!0);e.block$data(p,()=>d(h,p)),e.ok(p)}else t.if((0,UT.checkMissingProp)(e,n,h)),(0,UT.reportMissingProp)(e,h),t.else()}function f(){t.forOf("prop",r,h=>{e.setParams({missingProperty:h}),t.if((0,UT.noPropertyInData)(t,i,h,a.ownProperties),()=>e.error())})}function d(h,p){e.setParams({missingProperty:h}),t.forOf(h,r,()=>{t.assign(p,(0,UT.propertyInData)(t,i,h,a.ownProperties)),t.if((0,BC.not)(p),()=>{e.error(),t.break()})},BC.nil)}}};pJ.default=AIt;var mJ={};Object.defineProperty(mJ,"__esModule",{value:!0});const UC=Pn,IIt={message({keyword:e,schemaCode:t}){const n=e==="maxItems"?"more":"fewer";return(0,UC.str)`must NOT have ${n} than ${t} items`},params:({schemaCode:e})=>(0,UC._)`{limit: ${e}}`},kIt={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:IIt,code(e){const{keyword:t,data:n,schemaCode:r}=e,i=t==="maxItems"?UC.operators.GT:UC.operators.LT;e.fail$data((0,UC._)`${n}.length ${i} ${r}`)}};mJ.default=kIt;var gJ={},Yk={};Object.defineProperty(Yk,"__esModule",{value:!0});const eNe=lK;eNe.code='require("ajv/dist/runtime/equal").default';Yk.default=eNe;Object.defineProperty(gJ,"__esModule",{value:!0});const x9=ks,wo=Pn,RIt=wt,NIt=Yk,DIt={message:({params:{i:e,j:t}})=>(0,wo.str)`must NOT have duplicate items (items ## ${t} and ${e} are identical)`,params:({params:{i:e,j:t}})=>(0,wo._)`{i: ${e}, j: ${t}}`},PIt={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:DIt,code(e){const{gen:t,data:n,$data:r,schema:i,parentSchema:s,schemaCode:o,it:a}=e;if(!r&&!i)return;const u=t.let("valid"),l=s.items?(0,x9.getSchemaTypes)(s.items):[];e.block$data(u,c,(0,wo._)`${o} === false`),e.ok(u);function c(){const p=t.let("i",(0,wo._)`${n}.length`),m=t.let("j");e.setParams({i:p,j:m}),t.assign(u,!0),t.if((0,wo._)`${p} > 1`,()=>(f()?d:h)(p,m))}function f(){return l.length>0&&!l.some(p=>p==="object"||p==="array")}function d(p,m){const g=t.name("item"),y=(0,x9.checkDataTypes)(l,g,a.opts.strictNumbers,x9.DataType.Wrong),v=t.const("indices",(0,wo._)`{}`);t.for((0,wo._)`;${p}--;`,()=>{t.let(g,(0,wo._)`${n}[${p}]`),t.if(y,(0,wo._)`continue`),l.length>1&&t.if((0,wo._)`typeof ${g} == "string"`,(0,wo._)`${g} += "_"`),t.if((0,wo._)`typeof ${v}[${g}] == "number"`,()=>{t.assign(m,(0,wo._)`${v}[${g}]`),e.error(),t.assign(u,!1).break()}).code((0,wo._)`${v}[${g}] = ${p}`)})}function h(p,m){const g=(0,RIt.useFunc)(t,NIt.default),y=t.name("outer");t.label(y).for((0,wo._)`;${p}--;`,()=>t.for((0,wo._)`${m} = ${p}; ${m}--;`,()=>t.if((0,wo._)`${g}(${n}[${p}], ${n}[${m}])`,()=>{e.error(),t.assign(u,!1).break(y)})))}}};gJ.default=PIt;var yJ={};Object.defineProperty(yJ,"__esModule",{value:!0});const CV=Pn,OIt=wt,$It=Yk,MIt={message:"must be equal to constant",params:({schemaCode:e})=>(0,CV._)`{allowedValue: ${e}}`},LIt={keyword:"const",$data:!0,error:MIt,code(e){const{gen:t,data:n,$data:r,schemaCode:i,schema:s}=e;r||s&&typeof s=="object"?e.fail$data((0,CV._)`!${(0,OIt.useFunc)(t,$It.default)}(${n}, ${i})`):e.fail((0,CV._)`${s} !== ${n}`)}};yJ.default=LIt;var vJ={};Object.defineProperty(vJ,"__esModule",{value:!0});const j2=Pn,FIt=wt,jIt=Yk,BIt={message:"must be equal to one of the allowed values",params:({schemaCode:e})=>(0,j2._)`{allowedValues: ${e}}`},UIt={keyword:"enum",schemaType:"array",$data:!0,error:BIt,code(e){const{gen:t,data:n,$data:r,schema:i,schemaCode:s,it:o}=e;if(!r&&i.length===0)throw new Error("enum must have non-empty array");const a=i.length>=o.opts.loopEnum;let u;const l=()=>u??(u=(0,FIt.useFunc)(t,jIt.default));let c;if(a||r)c=t.let("valid"),e.block$data(c,f);else{if(!Array.isArray(i))throw new Error("ajv implementation error");const h=t.const("vSchema",s);c=(0,j2.or)(...i.map((p,m)=>d(h,m)))}e.pass(c);function f(){t.assign(c,!1),t.forOf("v",s,h=>t.if((0,j2._)`${l()}(${n}, ${h})`,()=>t.assign(c,!0).break()))}function d(h,p){const m=i[p];return typeof m=="object"&&m!==null?(0,j2._)`${l()}(${n}, ${h}[${p}])`:(0,j2._)`${n} === ${m}`}}};vJ.default=UIt;Object.defineProperty(aJ,"__esModule",{value:!0});const zIt=uJ,VIt=lJ,HIt=cJ,qIt=dJ,WIt=hJ,GIt=pJ,YIt=mJ,KIt=gJ,XIt=yJ,QIt=vJ,JIt=[zIt.default,VIt.default,HIt.default,qIt.default,WIt.default,GIt.default,YIt.default,KIt.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},XIt.default,QIt.default];aJ.default=JIt;var bJ={},PS={};Object.defineProperty(PS,"__esModule",{value:!0});PS.validateAdditionalItems=void 0;const Gv=Pn,AV=wt,ZIt={message:({params:{len:e}})=>(0,Gv.str)`must NOT have more than ${e} items`,params:({params:{len:e}})=>(0,Gv._)`{limit: ${e}}`},ekt={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:ZIt,code(e){const{parentSchema:t,it:n}=e,{items:r}=t;if(!Array.isArray(r)){(0,AV.checkStrictMode)(n,'"additionalItems" is ignored when "items" is not an array of schemas');return}tNe(e,r)}};function tNe(e,t){const{gen:n,schema:r,data:i,keyword:s,it:o}=e;o.items=!0;const a=n.const("len",(0,Gv._)`${i}.length`);if(r===!1)e.setParams({len:t.length}),e.pass((0,Gv._)`${a} <= ${t.length}`);else if(typeof r=="object"&&!(0,AV.alwaysValidSchema)(o,r)){const l=n.var("valid",(0,Gv._)`${a} <= ${t.length}`);n.if((0,Gv.not)(l),()=>u(l)),e.ok(l)}function u(l){n.forRange("i",t.length,a,c=>{e.subschema({keyword:s,dataProp:c,dataPropType:AV.Type.Num},l),o.allErrors||n.if((0,Gv.not)(l),()=>n.break())})}}PS.validateAdditionalItems=tNe;PS.default=ekt;var _J={},OS={};Object.defineProperty(OS,"__esModule",{value:!0});OS.validateTuple=void 0;const Cde=Pn,MP=wt,tkt=Nn,nkt={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(e){const{schema:t,it:n}=e;if(Array.isArray(t))return nNe(e,"additionalItems",t);n.items=!0,!(0,MP.alwaysValidSchema)(n,t)&&e.ok((0,tkt.validateArray)(e))}};function nNe(e,t,n=e.schema){const{gen:r,parentSchema:i,data:s,keyword:o,it:a}=e;c(i),a.opts.unevaluated&&n.length&&a.items!==!0&&(a.items=MP.mergeEvaluated.items(r,n.length,a.items));const u=r.name("valid"),l=r.const("len",(0,Cde._)`${s}.length`);n.forEach((f,d)=>{(0,MP.alwaysValidSchema)(a,f)||(r.if((0,Cde._)`${l} > ${d}`,()=>e.subschema({keyword:o,schemaProp:d,dataProp:d},u)),e.ok(u))});function c(f){const{opts:d,errSchemaPath:h}=a,p=n.length,m=p===f.minItems&&(p===f.maxItems||f[t]===!1);if(d.strictTuples&&!m){const g=`"${o}" is ${p}-tuple, but minItems or maxItems/${t} are not specified or different at path "${h}"`;(0,MP.checkStrictMode)(a,g,d.strictTuples)}}}OS.validateTuple=nNe;OS.default=nkt;Object.defineProperty(_J,"__esModule",{value:!0});const rkt=OS,ikt={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:e=>(0,rkt.validateTuple)(e,"items")};_J.default=ikt;var wJ={};Object.defineProperty(wJ,"__esModule",{value:!0});const Ade=Pn,skt=wt,okt=Nn,akt=PS,ukt={message:({params:{len:e}})=>(0,Ade.str)`must NOT have more than ${e} items`,params:({params:{len:e}})=>(0,Ade._)`{limit: ${e}}`},lkt={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:ukt,code(e){const{schema:t,parentSchema:n,it:r}=e,{prefixItems:i}=n;r.items=!0,!(0,skt.alwaysValidSchema)(r,t)&&(i?(0,akt.validateAdditionalItems)(e,i):e.ok((0,okt.validateArray)(e)))}};wJ.default=lkt;var EJ={};Object.defineProperty(EJ,"__esModule",{value:!0});const dc=Pn,uD=wt,ckt={message:({params:{min:e,max:t}})=>t===void 0?(0,dc.str)`must contain at least ${e} valid item(s)`:(0,dc.str)`must contain at least ${e} and no more than ${t} valid item(s)`,params:({params:{min:e,max:t}})=>t===void 0?(0,dc._)`{minContains: ${e}}`:(0,dc._)`{minContains: ${e}, maxContains: ${t}}`},fkt={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:ckt,code(e){const{gen:t,schema:n,parentSchema:r,data:i,it:s}=e;let o,a;const{minContains:u,maxContains:l}=r;s.opts.next?(o=u===void 0?1:u,a=l):o=1;const c=t.const("len",(0,dc._)`${i}.length`);if(e.setParams({min:o,max:a}),a===void 0&&o===0){(0,uD.checkStrictMode)(s,'"minContains" == 0 without "maxContains": "contains" keyword ignored');return}if(a!==void 0&&o>a){(0,uD.checkStrictMode)(s,'"minContains" > "maxContains" is always invalid'),e.fail();return}if((0,uD.alwaysValidSchema)(s,n)){let m=(0,dc._)`${c} >= ${o}`;a!==void 0&&(m=(0,dc._)`${m} && ${c} <= ${a}`),e.pass(m);return}s.items=!0;const f=t.name("valid");a===void 0&&o===1?h(f,()=>t.if(f,()=>t.break())):o===0?(t.let(f,!0),a!==void 0&&t.if((0,dc._)`${i}.length > 0`,d)):(t.let(f,!1),d()),e.result(f,()=>e.reset());function d(){const m=t.name("_valid"),g=t.let("count",0);h(m,()=>t.if(m,()=>p(g)))}function h(m,g){t.forRange("i",0,c,y=>{e.subschema({keyword:"contains",dataProp:y,dataPropType:uD.Type.Num,compositeRule:!0},m),g()})}function p(m){t.code((0,dc._)`${m}++`),a===void 0?t.if((0,dc._)`${m} >= ${o}`,()=>t.assign(f,!0).break()):(t.if((0,dc._)`${m} > ${a}`,()=>t.assign(f,!1).break()),o===1?t.assign(f,!0):t.if((0,dc._)`${m} >= ${o}`,()=>t.assign(f,!0)))}}};EJ.default=fkt;var rNe={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.validateSchemaDeps=e.validatePropertyDeps=e.error=void 0;const t=Pn,n=wt,r=Nn;e.error={message:({params:{property:u,depsCount:l,deps:c}})=>{const f=l===1?"property":"properties";return(0,t.str)`must have ${f} ${c} when property ${u} is present`},params:({params:{property:u,depsCount:l,deps:c,missingProperty:f}})=>(0,t._)`{property: ${u},
    missingProperty: ${f},
    depsCount: ${l},
    deps: ${c}}`};const i={keyword:"dependencies",type:"object",schemaType:"object",error:e.error,code(u){const[l,c]=s(u);o(u,l),a(u,c)}};function s({schema:u}){const l={},c={};for(const f in u){if(f==="__proto__")continue;const d=Array.isArray(u[f])?l:c;d[f]=u[f]}return[l,c]}function o(u,l=u.schema){const{gen:c,data:f,it:d}=u;if(Object.keys(l).length===0)return;const h=c.let("missing");for(const p in l){const m=l[p];if(m.length===0)continue;const g=(0,r.propertyInData)(c,f,p,d.opts.ownProperties);u.setParams({property:p,depsCount:m.length,deps:m.join(", ")}),d.allErrors?c.if(g,()=>{for(const y of m)(0,r.checkReportMissingProp)(u,y)}):(c.if((0,t._)`${g} && (${(0,r.checkMissingProp)(u,m,h)})`),(0,r.reportMissingProp)(u,h),c.else())}}e.validatePropertyDeps=o;function a(u,l=u.schema){const{gen:c,data:f,keyword:d,it:h}=u,p=c.name("valid");for(const m in l)(0,n.alwaysValidSchema)(h,l[m])||(c.if((0,r.propertyInData)(c,f,m,h.opts.ownProperties),()=>{const g=u.subschema({keyword:d,schemaProp:m},p);u.mergeValidEvaluated(g,p)},()=>c.var(p,!0)),u.ok(p))}e.validateSchemaDeps=a,e.default=i})(rNe);var xJ={};Object.defineProperty(xJ,"__esModule",{value:!0});const iNe=Pn,dkt=wt,hkt={message:"property name must be valid",params:({params:e})=>(0,iNe._)`{propertyName: ${e.propertyName}}`},pkt={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:hkt,code(e){const{gen:t,schema:n,data:r,it:i}=e;if((0,dkt.alwaysValidSchema)(i,n))return;const s=t.name("valid");t.forIn("key",r,o=>{e.setParams({propertyName:o}),e.subschema({keyword:"propertyNames",data:o,dataTypes:["string"],propertyName:o,compositeRule:!0},s),t.if((0,iNe.not)(s),()=>{e.error(!0),i.allErrors||t.break()})}),e.ok(s)}};xJ.default=pkt;var b4={};Object.defineProperty(b4,"__esModule",{value:!0});const lD=Nn,uf=Pn,mkt=tp,cD=wt,gkt={message:"must NOT have additional properties",params:({params:e})=>(0,uf._)`{additionalProperty: ${e.additionalProperty}}`},ykt={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:gkt,code(e){const{gen:t,schema:n,parentSchema:r,data:i,errsCount:s,it:o}=e;if(!s)throw new Error("ajv implementation error");const{allErrors:a,opts:u}=o;if(o.props=!0,u.removeAdditional!=="all"&&(0,cD.alwaysValidSchema)(o,n))return;const l=(0,lD.allSchemaProperties)(r.properties),c=(0,lD.allSchemaProperties)(r.patternProperties);f(),e.ok((0,uf._)`${s} === ${mkt.default.errors}`);function f(){t.forIn("key",i,g=>{!l.length&&!c.length?p(g):t.if(d(g),()=>p(g))})}function d(g){let y;if(l.length>8){const v=(0,cD.schemaRefOrVal)(o,r.properties,"properties");y=(0,lD.isOwnProperty)(t,v,g)}else l.length?y=(0,uf.or)(...l.map(v=>(0,uf._)`${g} === ${v}`)):y=uf.nil;return c.length&&(y=(0,uf.or)(y,...c.map(v=>(0,uf._)`${(0,lD.usePattern)(e,v)}.test(${g})`))),(0,uf.not)(y)}function h(g){t.code((0,uf._)`delete ${i}[${g}]`)}function p(g){if(u.removeAdditional==="all"||u.removeAdditional&&n===!1){h(g);return}if(n===!1){e.setParams({additionalProperty:g}),e.error(),a||t.break();return}if(typeof n=="object"&&!(0,cD.alwaysValidSchema)(o,n)){const y=t.name("valid");u.removeAdditional==="failing"?(m(g,y,!1),t.if((0,uf.not)(y),()=>{e.reset(),h(g)})):(m(g,y),a||t.if((0,uf.not)(y),()=>t.break()))}}function m(g,y,v){const b={keyword:"additionalProperties",dataProp:g,dataPropType:cD.Type.Str};v===!1&&Object.assign(b,{compositeRule:!0,createErrors:!1,allErrors:!1}),e.subschema(b,y)}}};b4.default=ykt;var SJ={};Object.defineProperty(SJ,"__esModule",{value:!0});const vkt=Uf,Ide=Nn,S9=wt,kde=b4,bkt={keyword:"properties",type:"object",schemaType:"object",code(e){const{gen:t,schema:n,parentSchema:r,data:i,it:s}=e;s.opts.removeAdditional==="all"&&r.additionalProperties===void 0&&kde.default.code(new vkt.KeywordCxt(s,kde.default,"additionalProperties"));const o=(0,Ide.allSchemaProperties)(n);for(const f of o)s.definedProperties.add(f);s.opts.unevaluated&&o.length&&s.props!==!0&&(s.props=S9.mergeEvaluated.props(t,(0,S9.toHash)(o),s.props));const a=o.filter(f=>!(0,S9.alwaysValidSchema)(s,n[f]));if(a.length===0)return;const u=t.name("valid");for(const f of a)l(f)?c(f):(t.if((0,Ide.propertyInData)(t,i,f,s.opts.ownProperties)),c(f),s.allErrors||t.else().var(u,!0),t.endIf()),e.it.definedProperties.add(f),e.ok(u);function l(f){return s.opts.useDefaults&&!s.compositeRule&&n[f].default!==void 0}function c(f){e.subschema({keyword:"properties",schemaProp:f,dataProp:f},u)}}};SJ.default=bkt;var TJ={};Object.defineProperty(TJ,"__esModule",{value:!0});const Rde=Nn,fD=Pn,Nde=wt,Dde=wt,_kt={keyword:"patternProperties",type:"object",schemaType:"object",code(e){const{gen:t,schema:n,data:r,parentSchema:i,it:s}=e,{opts:o}=s,a=(0,Rde.allSchemaProperties)(n),u=a.filter(m=>(0,Nde.alwaysValidSchema)(s,n[m]));if(a.length===0||u.length===a.length&&(!s.opts.unevaluated||s.props===!0))return;const l=o.strictSchema&&!o.allowMatchingProperties&&i.properties,c=t.name("valid");s.props!==!0&&!(s.props instanceof fD.Name)&&(s.props=(0,Dde.evaluatedPropsToName)(t,s.props));const{props:f}=s;d();function d(){for(const m of a)l&&h(m),s.allErrors?p(m):(t.var(c,!0),p(m),t.if(c))}function h(m){for(const g in l)new RegExp(m).test(g)&&(0,Nde.checkStrictMode)(s,`property ${g} matches pattern ${m} (use allowMatchingProperties)`)}function p(m){t.forIn("key",r,g=>{t.if((0,fD._)`${(0,Rde.usePattern)(e,m)}.test(${g})`,()=>{const y=u.includes(m);y||e.subschema({keyword:"patternProperties",schemaProp:m,dataProp:g,dataPropType:Dde.Type.Str},c),s.opts.unevaluated&&f!==!0?t.assign((0,fD._)`${f}[${g}]`,!0):!y&&!s.allErrors&&t.if((0,fD.not)(c),()=>t.break())})})}}};TJ.default=_kt;var CJ={};Object.defineProperty(CJ,"__esModule",{value:!0});const wkt=wt,Ekt={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(e){const{gen:t,schema:n,it:r}=e;if((0,wkt.alwaysValidSchema)(r,n)){e.fail();return}const i=t.name("valid");e.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},i),e.failResult(i,()=>e.reset(),()=>e.error())},error:{message:"must NOT be valid"}};CJ.default=Ekt;var AJ={};Object.defineProperty(AJ,"__esModule",{value:!0});const xkt=Nn,Skt={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:xkt.validateUnion,error:{message:"must match a schema in anyOf"}};AJ.default=Skt;var IJ={};Object.defineProperty(IJ,"__esModule",{value:!0});const LP=Pn,Tkt=wt,Ckt={message:"must match exactly one schema in oneOf",params:({params:e})=>(0,LP._)`{passingSchemas: ${e.passing}}`},Akt={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:Ckt,code(e){const{gen:t,schema:n,parentSchema:r,it:i}=e;if(!Array.isArray(n))throw new Error("ajv implementation error");if(i.opts.discriminator&&r.discriminator)return;const s=n,o=t.let("valid",!1),a=t.let("passing",null),u=t.name("_valid");e.setParams({passing:a}),t.block(l),e.result(o,()=>e.reset(),()=>e.error(!0));function l(){s.forEach((c,f)=>{let d;(0,Tkt.alwaysValidSchema)(i,c)?t.var(u,!0):d=e.subschema({keyword:"oneOf",schemaProp:f,compositeRule:!0},u),f>0&&t.if((0,LP._)`${u} && ${o}`).assign(o,!1).assign(a,(0,LP._)`[${a}, ${f}]`).else(),t.if(u,()=>{t.assign(o,!0),t.assign(a,f),d&&e.mergeEvaluated(d,LP.Name)})})}}};IJ.default=Akt;var kJ={};Object.defineProperty(kJ,"__esModule",{value:!0});const Ikt=wt,kkt={keyword:"allOf",schemaType:"array",code(e){const{gen:t,schema:n,it:r}=e;if(!Array.isArray(n))throw new Error("ajv implementation error");const i=t.name("valid");n.forEach((s,o)=>{if((0,Ikt.alwaysValidSchema)(r,s))return;const a=e.subschema({keyword:"allOf",schemaProp:o},i);e.ok(i),e.mergeEvaluated(a)})}};kJ.default=kkt;var RJ={};Object.defineProperty(RJ,"__esModule",{value:!0});const z$=Pn,sNe=wt,Rkt={message:({params:e})=>(0,z$.str)`must match "${e.ifClause}" schema`,params:({params:e})=>(0,z$._)`{failingKeyword: ${e.ifClause}}`},Nkt={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:Rkt,code(e){const{gen:t,parentSchema:n,it:r}=e;n.then===void 0&&n.else===void 0&&(0,sNe.checkStrictMode)(r,'"if" without "then" and "else" is ignored');const i=Pde(r,"then"),s=Pde(r,"else");if(!i&&!s)return;const o=t.let("valid",!0),a=t.name("_valid");if(u(),e.reset(),i&&s){const c=t.let("ifClause");e.setParams({ifClause:c}),t.if(a,l("then",c),l("else",c))}else i?t.if(a,l("then")):t.if((0,z$.not)(a),l("else"));e.pass(o,()=>e.error(!0));function u(){const c=e.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},a);e.mergeEvaluated(c)}function l(c,f){return()=>{const d=e.subschema({keyword:c},a);t.assign(o,a),e.mergeValidEvaluated(d,o),f?t.assign(f,(0,z$._)`${c}`):e.setParams({ifClause:c})}}}};function Pde(e,t){const n=e.schema[t];return n!==void 0&&!(0,sNe.alwaysValidSchema)(e,n)}RJ.default=Nkt;var NJ={};Object.defineProperty(NJ,"__esModule",{value:!0});const Dkt=wt,Pkt={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:e,parentSchema:t,it:n}){t.if===void 0&&(0,Dkt.checkStrictMode)(n,`"${e}" without "if" is ignored`)}};NJ.default=Pkt;Object.defineProperty(bJ,"__esModule",{value:!0});const Okt=PS,$kt=_J,Mkt=OS,Lkt=wJ,Fkt=EJ,jkt=rNe,Bkt=xJ,Ukt=b4,zkt=SJ,Vkt=TJ,Hkt=CJ,qkt=AJ,Wkt=IJ,Gkt=kJ,Ykt=RJ,Kkt=NJ;function Xkt(e=!1){const t=[Hkt.default,qkt.default,Wkt.default,Gkt.default,Ykt.default,Kkt.default,Bkt.default,Ukt.default,jkt.default,zkt.default,Vkt.default];return e?t.push($kt.default,Lkt.default):t.push(Okt.default,Mkt.default),t.push(Fkt.default),t}bJ.default=Xkt;var DJ={},PJ={};Object.defineProperty(PJ,"__esModule",{value:!0});const ts=Pn,Qkt={message:({schemaCode:e})=>(0,ts.str)`must match format "${e}"`,params:({schemaCode:e})=>(0,ts._)`{format: ${e}}`},Jkt={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:Qkt,code(e,t){const{gen:n,data:r,$data:i,schema:s,schemaCode:o,it:a}=e,{opts:u,errSchemaPath:l,schemaEnv:c,self:f}=a;if(!u.validateFormats)return;i?d():h();function d(){const p=n.scopeValue("formats",{ref:f.formats,code:u.code.formats}),m=n.const("fDef",(0,ts._)`${p}[${o}]`),g=n.let("fType"),y=n.let("format");n.if((0,ts._)`typeof ${m} == "object" && !(${m} instanceof RegExp)`,()=>n.assign(g,(0,ts._)`${m}.type || "string"`).assign(y,(0,ts._)`${m}.validate`),()=>n.assign(g,(0,ts._)`"string"`).assign(y,m)),e.fail$data((0,ts.or)(v(),b()));function v(){return u.strictSchema===!1?ts.nil:(0,ts._)`${o} && !${y}`}function b(){const w=c.$async?(0,ts._)`(${m}.async ? await ${y}(${r}) : ${y}(${r}))`:(0,ts._)`${y}(${r})`,E=(0,ts._)`(typeof ${y} == "function" ? ${w} : ${y}.test(${r}))`;return(0,ts._)`${y} && ${y} !== true && ${g} === ${t} && !${E}`}}function h(){const p=f.formats[s];if(!p){v();return}if(p===!0)return;const[m,g,y]=b(p);m===t&&e.pass(w());function v(){if(u.strictSchema===!1){f.logger.warn(E());return}throw new Error(E());function E(){return`unknown format "${s}" ignored in schema at path "${l}"`}}function b(E){const T=E instanceof RegExp?(0,ts.regexpCode)(E):u.code.formats?(0,ts._)`${u.code.formats}${(0,ts.getProperty)(s)}`:void 0,S=n.scopeValue("formats",{key:s,ref:E,code:T});return typeof E=="object"&&!(E instanceof RegExp)?[E.type||"string",E.validate,(0,ts._)`${S}.validate`]:["string",E,S]}function w(){if(typeof p=="object"&&!(p instanceof RegExp)&&p.async){if(!c.$async)throw new Error("async format in sync schema");return(0,ts._)`await ${y}(${r})`}return typeof g=="function"?(0,ts._)`${y}(${r})`:(0,ts._)`${y}.test(${r})`}}}};PJ.default=Jkt;Object.defineProperty(DJ,"__esModule",{value:!0});const Zkt=PJ,eRt=[Zkt.default];DJ.default=eRt;var hx={};Object.defineProperty(hx,"__esModule",{value:!0});hx.contentVocabulary=hx.metadataVocabulary=void 0;hx.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"];hx.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"];Object.defineProperty(iJ,"__esModule",{value:!0});const tRt=sJ,nRt=aJ,rRt=bJ,iRt=DJ,Ode=hx,sRt=[tRt.default,nRt.default,(0,rRt.default)(),iRt.default,Ode.metadataVocabulary,Ode.contentVocabulary];iJ.default=sRt;var OJ={},_4={};Object.defineProperty(_4,"__esModule",{value:!0});_4.DiscrError=void 0;var $de;(function(e){e.Tag="tag",e.Mapping="mapping"})($de||(_4.DiscrError=$de={}));Object.defineProperty(OJ,"__esModule",{value:!0});const aw=Pn,IV=_4,Mde=Ru,oRt=DS,aRt=wt,uRt={message:({params:{discrError:e,tagName:t}})=>e===IV.DiscrError.Tag?`tag "${t}" must be string`:`value of tag "${t}" must be in oneOf`,params:({params:{discrError:e,tag:t,tagName:n}})=>(0,aw._)`{error: ${e}, tag: ${n}, tagValue: ${t}}`},lRt={keyword:"discriminator",type:"object",schemaType:"object",error:uRt,code(e){const{gen:t,data:n,schema:r,parentSchema:i,it:s}=e,{oneOf:o}=i;if(!s.opts.discriminator)throw new Error("discriminator: requires discriminator option");const a=r.propertyName;if(typeof a!="string")throw new Error("discriminator: requires propertyName");if(r.mapping)throw new Error("discriminator: mapping is not supported");if(!o)throw new Error("discriminator: requires oneOf keyword");const u=t.let("valid",!1),l=t.const("tag",(0,aw._)`${n}${(0,aw.getProperty)(a)}`);t.if((0,aw._)`typeof ${l} == "string"`,()=>c(),()=>e.error(!1,{discrError:IV.DiscrError.Tag,tag:l,tagName:a})),e.ok(u);function c(){const h=d();t.if(!1);for(const p in h)t.elseIf((0,aw._)`${l} === ${p}`),t.assign(u,f(h[p]));t.else(),e.error(!1,{discrError:IV.DiscrError.Mapping,tag:l,tagName:a}),t.endIf()}function f(h){const p=t.name("valid"),m=e.subschema({keyword:"oneOf",schemaProp:h},p);return e.mergeEvaluated(m,aw.Name),p}function d(){var h;const p={},m=y(i);let g=!0;for(let w=0;w<o.length;w++){let E=o[w];if(E!=null&&E.$ref&&!(0,aRt.schemaHasRulesButRef)(E,s.self.RULES)){const S=E.$ref;if(E=Mde.resolveRef.call(s.self,s.schemaEnv.root,s.baseId,S),E instanceof Mde.SchemaEnv&&(E=E.schema),E===void 0)throw new oRt.default(s.opts.uriResolver,s.baseId,S)}const T=(h=E==null?void 0:E.properties)===null||h===void 0?void 0:h[a];if(typeof T!="object")throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${a}"`);g=g&&(m||y(E)),v(T,w)}if(!g)throw new Error(`discriminator: "${a}" must be required`);return p;function y({required:w}){return Array.isArray(w)&&w.includes(a)}function v(w,E){if(w.const)b(w.const,E);else if(w.enum)for(const T of w.enum)b(T,E);else throw new Error(`discriminator: "properties/${a}" must have "const" or "enum"`)}function b(w,E){if(typeof w!="string"||w in p)throw new Error(`discriminator: "${a}" values must be unique strings`);p[w]=E}}}};OJ.default=lRt;const cRt="http://json-schema.org/draft-07/schema#",fRt="http://json-schema.org/draft-07/schema#",dRt="Core schema meta-schema",hRt={schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},pRt=["object","boolean"],mRt={$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},gRt={$schema:cRt,$id:fRt,title:dRt,definitions:hRt,type:pRt,properties:mRt,default:!0};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.MissingRefError=t.ValidationError=t.CodeGen=t.Name=t.nil=t.stringify=t.str=t._=t.KeywordCxt=t.Ajv=void 0;const n=bRe,r=iJ,i=OJ,s=gRt,o=["/properties"],a="http://json-schema.org/draft-07/schema";class u extends n.default{_addVocabularies(){super._addVocabularies(),r.default.forEach(p=>this.addVocabulary(p)),this.opts.discriminator&&this.addKeyword(i.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;const p=this.opts.$data?this.$dataMetaSchema(s,o):s;this.addMetaSchema(p,a,!1),this.refs["http://json-schema.org/schema"]=a}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(a)?a:void 0)}}t.Ajv=u,e.exports=t=u,e.exports.Ajv=u,Object.defineProperty(t,"__esModule",{value:!0}),t.default=u;var l=Uf;Object.defineProperty(t,"KeywordCxt",{enumerable:!0,get:function(){return l.KeywordCxt}});var c=Pn;Object.defineProperty(t,"_",{enumerable:!0,get:function(){return c._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return c.str}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return c.stringify}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return c.nil}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return c.Name}}),Object.defineProperty(t,"CodeGen",{enumerable:!0,get:function(){return c.CodeGen}});var f=Gk;Object.defineProperty(t,"ValidationError",{enumerable:!0,get:function(){return f.default}});var d=DS;Object.defineProperty(t,"MissingRefError",{enumerable:!0,get:function(){return d.default}})})(_V,_V.exports);var yRt=_V.exports;const oNe=Kl(yRt),vRt="#/definitions/StudyConfig",bRt="http://json-schema.org/draft-07/schema#",_Rt={Answer:{additionalProperties:!1,description:`The Answer interface is used to define the properties of an answer. Answers are used to define the correct answer for a task. These are generally used in training tasks or if skip logic is required based on the answer.

Answers are used to defined correct answers for a task. These are generally used in training tasks or if skip logic is required based on the answer. The answer field is used to define the correct answer to the question. The acceptableLow and acceptableHigh fields are used to define a range of acceptable answers (these are currently only used for training). For example, if the correct answer is 5, and the acceptableLow is 4 and the acceptableHigh is 6, then any answer between 4 and 6 will be considered correct.

Here's an example of how to use the Answer interface to define the correct answer to a question:

\`\`\`js { "type": "markdown", "path": "<study-name>/assets/question.md", "response": [  {    "id": "response1",    "prompt": "What is 2 + 2?",    "required": true,    "location": "belowStimulus",    "type": "numerical"  } ] "correctAnswer": [{  "id": "response1",  "answer": 4 }] } \`\`\`

In this example, the correct answer to the question "What is 2 + 2?" is 4. If the participant answers 4, they will be considered correct. If they answer anything other than 4, they will be considered incorrect.`,properties:{acceptableHigh:{description:"The acceptable high value for the answer. This is used to define a range of acceptable answers.",type:"number"},acceptableLow:{description:"The acceptable low value for the answer. This is used to define a range of acceptable answers.",type:"number"},answer:{description:"The correct answer to the question."},id:{description:"The id of the answer. This is used to identify the answer in the data file.",type:"string"}},required:["id","answer"],type:"object"},BaseComponents:{additionalProperties:{additionalProperties:!1,properties:{allowFailedTraining:{description:"Controls whether the component should allow failed training. If not provided, the default is true.",type:"boolean"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},parameters:{anyOf:[{additionalProperties:{},description:"The parameters that are passed to the react component. These can be used within your react component to render different things.",type:"object"},{additionalProperties:{},description:"The parameters that are passed to the website (iframe). These can be used within your website to render different things.",type:"object"}],description:"The parameters that are passed to the react component. These can be used within your react component to render different things."},path:{anyOf:[{description:"The path to the markdown file. This should be a relative path from the public folder.",type:"string"},{description:"The path to the react component. This should be a relative path from the src/public folder.",type:"string"},{description:"The path to the image. This should be a relative path from the public folder.",type:"string"},{description:"The path to the website. This should be a relative path from the public folder or could be an external website.",type:"string"}],description:"The path to the markdown file. This should be a relative path from the public folder."},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},style:{additionalProperties:{type:"string"},description:"The style of the image. This is an object with css properties as keys and css values as values.",type:"object"},trainingAttempts:{description:"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.",type:"number"},type:{enum:["markdown","react-component","image","website","questionnaire"],type:"string"}},type:"object"},description:'The baseComponents is an optional set of components which can help template other components. For example, suppose you have a single HTML file that you want to display to the user several times. Instead of having the same component twice in the `components` list, you can have a single baseComponent with all the information that the two HTML components will share. A great example is showing the same HTML component but with two different questions;\n\n Using baseComponents:\n\n```js "baseComponents": { "my-image-component": { "instructionLocation": "sidebar", "nextButtonLocation": "sidebar", "path": "<study-name>/assets/my-image.jpg", "response": [   {     "id": "my-image-id",     "options": ["Europe", "Japan", "USA"],     "prompt": "Your Selected Answer:",     "type": "dropdown"   } ], "type": "image" } } ``` In the above code snippet, we have a single base component which holds the information about the type of component, the path to the image, and the response (which is a dropdown containing three choices). Any component which contains the `"baseComponent":"my-image-component"` key-value pair will inherit each of these properties. Thus, if we have three different questions which have the same choices and are concerning the same image, we can define our components like below: ```js "components": { "q1": { "baseComponent": "my-image-component", "description": "Choosing section with largest GDP", "instruction": "Which region has the largest GDP?" }, "q2": { "baseComponent": "my-image-component", "description": "Choosing section with lowest GDP", "instruction": "Which region has the lowest GDP?" }, "q3": { "baseComponent": "my-image-component", "description": "Choosing section with highest exports of Wheat", "instruction": "Which region had the most Wheat exported in 2022?" } } ```',type:"object"},CheckboxResponse:{additionalProperties:!1,description:'The CheckboxResponse interface is used to define the properties of a checkbox response. CheckboxResponses render as a checkbox input with user specified options.\n\n```js { "id": "q7", "prompt": "Checkbox example (not required)", "required": false, "location": "aboveStimulus", "type": "checkbox", "options": ["Option 1", "Option 2", "Option 3"] } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},maxSelections:{description:"The maximum number of selections that are required.",type:"number"},minSelections:{description:"The minimum number of selections that are required.",type:"number"},options:{description:"The options that are displayed as checkboxes, provided as an array of objects, with label and value fields.",items:{anyOf:[{$ref:"#/definitions/StringOption"},{type:"string"}]},type:"array"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"checkbox",type:"string"}},required:["id","options","prompt","required","type"],type:"object"},ComponentBlock:{additionalProperties:!1,description:'The ComponentBlock interface is used to define order properties within the sequence. This is used to define the order of components in a study and the skip logic. It supports random assignment of trials using a pure random assignment and a [latin square](https://en.wikipedia.org/wiki/Latin_square).\n\nThe pure random assignment is a random assignment with no guarantees. For example, one component _could_ show up in the first position 10 times in a row. However, this situation is unlikely.\n\nHere\'s a snippet that shows how to use the random order:\n\n```js { "order": "random", "components": [ "component1", "component2", "component3" ] } ``` This snippet would produce a random order of the components in the sequence array. For example, the resulting sequence array could be :\n\n```js [ ["component2", "component3", "component1"], ["component1", "component3", "component2"], ["component3", "component1", "component2"], ... ] ```\n\nThe latin square assignment is a random assignment with some guarantees. It ensures that each component is shown an equal number of times in each position. Here\'s a snippet that shows how to use the latin square order:\n\n```js { "order": "latinSquare", "components": [ "component1", "component2", "component3" ] } ```\n\nThis snippet would produce a latin square order of the components in the sequence array. Since the latin square guarantees that each component is shown an equal number of times in each position, the resulting sequence array could be:\n\n```js [ ["component1", "component2", "component3"], ["component2", "component3", "component1"], ["component3", "component1", "component2"], ... ] ```\n\nThe fixed assignment is a fixed assignment of components. This is used when you want to show the components in a specific order. Here\'s a snippet that shows how to use the fixed order:\n\n```js { "order": "fixed", "components": [ "component1", "component2", "component3" ] } ```\n\nThis snippet would produce a fixed order of the components in the sequence array. The resulting sequence array would be:\n\n```js [ ["component1", "component2", "component3"], ["component1", "component2", "component3"], ["component1", "component2", "component3"], ... ] ```\n\nIn addition to the order property, the ComponentBlock interface also includes the `"numSamples"` property. This is used to reduce the number of components shown to a participant. This property respects the order property and the guarantees provided by the order property. For example, if you have three components in the components array and you set `"numSamples"` to 2, you would randomize across the three components while only showing a participant two of them. Here\'s a snippet that shows how to use the numSamples property:\n\n```js { "order": "latinSquare", "components": [ "component1", "component2", "component3" ], "numSamples": 2 } ```\n\nThis snippet would produce a latin square order of the components in the sequence array. Since the latin square guarantees that each component is shown an equal number of times in each position, the resulting sequence array could be:\n\n```js [ ["component1", "component2"], ["component2", "component3"], ["component3", "component1"], ... ] ```\n\nThe interruptions property specifies an array of interruptions. These can be used for breaks or attention checks. Interruptions can be deterministic or random. Please see [InterruptionBlock](../../type-aliases/InterruptionBlock) for more specific information.\n\nThe skip property is used to define skip conditions. This is used to skip to a different component or block based on the response to a component or the number of correct or incorrect responses in a block. Please see [SkipConditions](../../type-aliases/SkipConditions) for more specific information.',properties:{components:{description:"The components that are included in the order.",items:{anyOf:[{type:"string"},{$ref:"#/definitions/ComponentBlock"}]},type:"array"},id:{description:"The id of the block. This is used to identify the block in the SkipConditions and is only required if you want to refer to the whole block in the condition.to property.",type:"string"},interruptions:{description:"The interruptions property specifies an array of interruptions. These can be used for breaks or attention checks.",items:{$ref:"#/definitions/InterruptionBlock"},type:"array"},numSamples:{description:"The number of samples to use for the random assignments. This means you can randomize across 3 components while only showing a participant 2 at a time.",type:"number"},order:{description:"The type of order. This can be random (pure random), latinSquare (random with some guarantees), or fixed.",enum:["random","latinSquare","fixed"],type:"string"},skip:{$ref:"#/definitions/SkipConditions",description:"The skip conditions for the block."}},required:["order","components"],type:"object"},ComponentBlockCondition:{additionalProperties:!1,description:`The ComponentBlockCondition interface is used to define a SkipCondition based on the number of correct or incorrect components in a block. All answers on all components in the block are checked.

Answers are checked against the correct answers defined in the IndividualComponent's [CorrectAnswer](../Answer). If no correct answers are defined, the component is considered correct by default.

You might use this if a participant answers two questions in a block incorrectly. Here's an example of how to use the ComponentBlockCondition:

\`\`\`js { ... "skip": [ {   "check": "block",   "condition": "numIncorrect",   "value": 2,   "to": "end" } ] ... } \`\`\`

In this example, when the number of components with incorrect responses in the block is two, the participant will be redirected to the end of the study. If the number of incorrect responses is less than two, the participant will continue to the next component in the sequence.

When the condition is met, the participant will immediately be redirected to the component or block specified in the \`"to"\` property. If no conditions are met, the participant will continue to the next component in the sequence.`,properties:{check:{const:"block",description:"The check we'll perform.",type:"string"},condition:{description:"The condition to check.",enum:["numCorrect","numIncorrect"],type:"string"},to:{description:"The id of the component or block to skip to",type:"string"},value:{description:"The number of correct or incorrect responses to check for.",type:"number"}},required:["check","condition","value","to"],type:"object"},DeterministicInterruption:{additionalProperties:!1,description:`The DeterministicInterruption interface is used to define an interruption that will be shown at a specific location in the block.

For example, if you want to show an interruption after the second component in the block, you would set firstLocation to 2. If you want to show an interruption after every 3 components, you would set spacing to 3. If you want to show an interruption after the second component and then every 3 components, you would set firstLocation to 2 and spacing to 3.

The components property is an array of the components that will be inserted at the location specified by firstLocation and spacing. These components should reference components in the StudyConfig.components section of the config.

Here's an example of how to use the DeterministicInterruption:

\`\`\`js { "order": "fixed", "components": [ "component1", "component2", "component3", "component4", "component5", "component6" ], "interruptions": [ {   "firstLocation": 2,   "spacing": 3,   "components": [     "interruption1",     "interruption2"   ] } ] } \`\`\`

The resulting sequence array could be:

\`\`\`js [ ["component1", "component2", "interruption1", "component3", "component4", "component5", "interruption2", "component6"], ["component1", "component2", "interruption1", "component3", "component4", "component5", "interruption2", "component6"], ["component1", "component2", "interruption1", "component3", "component4", "component5", "interruption2", "component6"], ... ] \`\`\``,properties:{components:{description:"The components that are included in the interruption. These reference components in the StudyConfig.components section of the config.",items:{type:"string"},type:"array"},firstLocation:{description:"The Location of the first instance of the interruption. If this is set to 2, the interruption will be shown after the second component (inserted at index 2).",type:"number"},spacing:{description:"The number of components between breaks.",type:"number"}},required:["firstLocation","spacing","components"],type:"object"},DropdownResponse:{additionalProperties:!1,description:'The DropdownResponse interface is used to define the properties of a dropdown response. DropdownResponses render as a select input with user specified options.\n\nExample: ```js { "id": "q-color", "prompt": "What is your favorite color?", "required": true, "location": "aboveStimulus", "type": "dropdown", "placeholder": "Please choose your favorite color", "options": ["Red", "Blue"] } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},options:{description:"The options that are displayed in the dropdown.",items:{anyOf:[{$ref:"#/definitions/StringOption"},{type:"string"}]},type:"array"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},placeholder:{description:"The placeholder text that is displayed in the input.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"dropdown",type:"string"}},required:["id","options","prompt","required","type"],type:"object"},IFrameResponse:{additionalProperties:!1,description:"The IFrameResponse interface is used to define the properties of an iframe response. IFrameResponses render as a list, that is connected to a WebsiteComponent. When data is sent from the WebsiteComponent, it is displayed in the list.",properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"iframe",type:"string"}},required:["id","prompt","required","type"],type:"object"},ImageComponent:{additionalProperties:!1,description:'The ImageComponent interface is used to define the properties of an image component. This component is used to render an image with optional styling.\n\nFor example, to render an image with a path of `path/to/study/assets/image.jpg` and a max width of 50%, you would use the following snippet: ```js { "type": "image", "path": "<study-name>/assets/image.jpg", "style": { "maxWidth": "50%" } } ```',properties:{allowFailedTraining:{description:"Controls whether the component should allow failed training. If not provided, the default is true.",type:"boolean"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},path:{description:"The path to the image. This should be a relative path from the public folder.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},style:{additionalProperties:{type:"string"},description:"The style of the image. This is an object with css properties as keys and css values as values.",type:"object"},trainingAttempts:{description:"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.",type:"number"},type:{const:"image",type:"string"}},required:["path","response","type"],type:"object"},IndividualComponent:{anyOf:[{$ref:"#/definitions/MarkdownComponent"},{$ref:"#/definitions/ReactComponent"},{$ref:"#/definitions/ImageComponent"},{$ref:"#/definitions/WebsiteComponent"},{$ref:"#/definitions/QuestionnaireComponent"}]},IndividualComponentAllResponsesCondition:{additionalProperties:!1,description:`The IndividualComponentAllResponsesCondition interface is used to define a SkipCondition based on all answers to a specific component. The skip logic will be checked for every component in the block that has the specified name.

:::info

If you need to check all instances of a repeated component, you should use the RepeatedComponentBlockCondition.

:::


Here's an example of how to use the IndividualComponentAllResponsesCondition:

\`\`\`js { ... "skip": [ {   "name": "attentionCheck",   "check": "responses",   "to": "end" } ] ... } \`\`\`

In this example, if all responses to the component with the ID "attentionCheck" are correct, the participant will be redirected to the end of the study. If any response is incorrect, the participant will continue to the next component in the sequence.`,properties:{check:{const:"responses",description:"The check we'll perform.",type:"string"},name:{description:"The name of the component to check.",type:"string"},to:{description:"The id of the component or block to skip to",type:"string"}},required:["name","check","to"],type:"object"},IndividualComponentSingleResponseCondition:{additionalProperties:!1,description:`The IndividualComponentSingleResponseCondition interface is used to define a SkipCondition based on a single answer to a specific component. The skip logic will be checked for every component in the block that has the specified name.

:::info

If you need to check all instances of a repeated component, you should use the RepeatedComponentBlockCondition.

:::

For example, if you want to skip to a different component based on a response to a specific component, you would use the IndividualComponentSingleResponseCondition. Here's an example of how to use the IndividualComponentSingleResponseCondition:

\`\`\`js { ... "skip": [ {   "name": "attentionCheck",   "check": "response",   "responseId": "attentionCheckResponse",   "value": "the right answer",   "comparison": "equal",   "to": "end" } ] ... } \`\`\`

In this example, we assign our skip logic to the component whose ID is "attentionCheck". If the answer given to the response "attentionCheckResponse" is equal to "the right answer", then the user will be redirected to the end of the study. If the response is _not_ equal to "the right answer", then the participant will continue to the next component in the sequence.`,properties:{check:{const:"response",description:"The check we'll perform.",type:"string"},comparison:{description:"The comparison to use.",enum:["equal","notEqual"],type:"string"},name:{description:"The name of the component to check.",type:"string"},responseId:{description:"The response id to check.",type:"string"},to:{description:"The id of the component or block to skip to",type:"string"},value:{description:"The value to check.",type:["string","number"]}},required:["name","check","responseId","value","comparison","to"],type:"object"},InheritedComponent:{additionalProperties:!1,description:"An InheritedComponent is a component that inherits properties from a baseComponent. This is used to avoid repeating properties in components. This also means that components in the baseComponents object can be partially defined, while components in the components object can inherit from them and must be fully defined and include all properties (after potentially merging with a base component).",properties:{allowFailedTraining:{description:"Controls whether the component should allow failed training. If not provided, the default is true.",type:"boolean"},baseComponent:{type:"string"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},parameters:{anyOf:[{additionalProperties:{},description:"The parameters that are passed to the react component. These can be used within your react component to render different things.",type:"object"},{additionalProperties:{},description:"The parameters that are passed to the website (iframe). These can be used within your website to render different things.",type:"object"}],description:"The parameters that are passed to the react component. These can be used within your react component to render different things."},path:{anyOf:[{description:"The path to the markdown file. This should be a relative path from the public folder.",type:"string"},{description:"The path to the react component. This should be a relative path from the src/public folder.",type:"string"},{description:"The path to the image. This should be a relative path from the public folder.",type:"string"},{description:"The path to the website. This should be a relative path from the public folder or could be an external website.",type:"string"}],description:"The path to the markdown file. This should be a relative path from the public folder."},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},style:{additionalProperties:{type:"string"},description:"The style of the image. This is an object with css properties as keys and css values as values.",type:"object"},trainingAttempts:{description:"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.",type:"number"},type:{enum:["markdown","react-component","image","website","questionnaire"],type:"string"}},required:["baseComponent"],type:"object"},InterruptionBlock:{anyOf:[{$ref:"#/definitions/DeterministicInterruption"},{$ref:"#/definitions/RandomInterruption"}],description:"The InterruptionBlock interface is used to define interruptions in a block. These can be used for breaks or attention checks. Interruptions can be deterministic or random."},LikertResponse:{additionalProperties:!1,description:`The LikertResponse interface is used to define the properties of a likert response. LikertResponses render as radio buttons with a user specified number of options, which can be controlled through the numItems. For example, numItems: 5 will render 5 radio buttons, and numItems: 7 will render 7 radio buttons. LikertResponses can also have a description, and left and right labels. The left and right labels are used to label the left and right ends of the likert scale with values such as 'Strongly Disagree' and 'Strongly Agree'.

Example for a five-point Likert Scale:

\`\`\`js { "id": "q-satisfaction", "prompt": "Rate your satisfaction from 1 (not enjoyable) to 5 (very enjoyable).", "required": true, "location": "aboveStimulus", "type": "likert", "leftLabel": "Not Enjoyable", "rightLabel": "Very Enjoyable", "numItems": 5 } \`\`\``,properties:{desc:{description:"The description of the likert scale.",type:"string"},hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},leftLabel:{description:"The left label of the likert scale. E.g Strongly Disagree",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},numItems:{description:"The number of options to render.",type:"number"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},rightLabel:{description:"The right label of the likert scale. E.g Strongly Agree",type:"string"},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"likert",type:"string"}},required:["id","numItems","prompt","required","type"],type:"object"},LongTextResponse:{additionalProperties:!1,description:'The LongTextResponse interface is used to define the properties of a long text response. LongTextResponses render as a text area that accepts any text and can optionally have a placeholder. ```js { "id": "q-name", "prompt": "What is your first name?", "required": true, "location": "aboveStimulus", "type": "longText", "placeholder": "Please enter your first name" } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},placeholder:{description:"The placeholder text that is displayed in the input.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"longText",type:"string"}},required:["id","prompt","required","type"],type:"object"},MarkdownComponent:{additionalProperties:!1,description:'The MarkdownComponent interface is used to define the properties of a markdown component. The components can be used to render many different things, such as consent forms, instructions, and debriefs. Additionally, you can use the markdown component to render images, videos, and other media, with supporting text. Markdown components can have responses (e.g. in a consent form), or no responses (e.g. in a help text file). Here\'s an example with no responses for a simple help text file:\n\n```js { "type": "markdown", "path": "<study-name>/assets/help.md", "response": [] } ```',properties:{allowFailedTraining:{description:"Controls whether the component should allow failed training. If not provided, the default is true.",type:"boolean"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},path:{description:"The path to the markdown file. This should be a relative path from the public folder.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},trainingAttempts:{description:"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.",type:"number"},type:{const:"markdown",type:"string"}},required:["path","response","type"],type:"object"},NumberOption:{additionalProperties:!1,description:"The NumberOption interface is used to define the options for a slider response. The label is the text that is displayed to the user, and the value is the value that is stored in the data file.",properties:{label:{description:"The label displayed to participants.",type:"string"},value:{description:"The value stored in the participant's data.",type:"number"}},required:["label","value"],type:"object"},NumericalResponse:{additionalProperties:!1,description:'The NumericalResponse interface is used to define the properties of a numerical response. NumericalResponses render as a text input that only accepts numbers, and can optionally have a min and max value, or a placeholder.\n\nExample: ```js { "id": "q-numerical", "prompt": "Numerical example", "required": true, "location": "aboveStimulus", "type": "numerical", "placeholder": "Enter your age, range from 0 - 120", "max": 120, "min": 0 } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},max:{description:"The maximum value that is accepted in the input.",type:"number"},min:{description:"The minimum value that is accepted in the input.",type:"number"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},placeholder:{description:"The placeholder text that is displayed in the input.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"numerical",type:"string"}},required:["id","prompt","required","type"],type:"object"},QuestionnaireComponent:{additionalProperties:!1,description:'A QuestionnaireComponent is used to render simple questions that require a response. The main use case of this component type is to ask participants questions when you don\'t need to render a stimulus. Please note, that even though we\'re not using a stimulus, the responses still require a `location`. For example this could be used to collect demographic information from a participant using the following snippet:\n\n```js { "type": "questionnaire", "response": [  {    "id": "gender",    "prompt": "Gender:",    "required": true,    "location": "belowStimulus",    "type": "checkbox",    "options": ["Man", "Woman", "Genderqueer", "Third-gender", ...]  } ] } ```',properties:{allowFailedTraining:{description:"Controls whether the component should allow failed training. If not provided, the default is true.",type:"boolean"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},trainingAttempts:{description:"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.",type:"number"},type:{const:"questionnaire",type:"string"}},required:["response","type"],type:"object"},RadioResponse:{additionalProperties:!1,description:'The RadioResponse interface is used to define the properties of a radio response. Radios have only one allowable selection. RadioResponses render as a radio input with user specified options, and optionally left and right labels.\n\nExample: ```js { "id": "q-radio", "prompt": "Radio button example", "required": true, "location": "aboveStimulus", "type": "radio", "options": ["Option 1", "Option 2"] } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},leftLabel:{description:"The left label of the radio group. Used in Likert scales for example",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},options:{description:"The options that are displayed as checkboxes, provided as an array of objects, with label and value fields.",items:{anyOf:[{$ref:"#/definitions/StringOption"},{type:"string"}]},type:"array"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},rightLabel:{description:"The right label of the radio group. Used in Likert scales for example",type:"string"},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"radio",type:"string"}},required:["id","options","prompt","required","type"],type:"object"},RandomInterruption:{additionalProperties:!1,description:'The RandomInterruption interface is used to define an interruption that will be shown randomly in the block.\n\nFor example, if you want to show a single interruption randomly in the block, you would set `"spacing"` to "random" and `"numInterruptions"` to 1. If you want to show 3 interruptions randomly in the block, you would set `"spacing"` to "random" and `"numInterruptions"` to 3.\n\nThe components property is an array of the components that will be inserted randomly in the block. These components should reference components in the StudyConfig.components section of the config.\n\nHere\'s an example of how to use the RandomInterruption:\n\n```js { "order": "fixed", "components": [ "component1", "component2", "component3", "component4", "component5", "component6" ], "interruptions": [ {   "spacing": "random",   "numInterruptions": 3,   "components": [     "interruption1",     "interruption2"   ] } ] } ```\n\nThe resulting sequence array could be:\n\n```js [ ["component1", "interruption1", "interruption2", "component2", "interruption1", "interruption2", "component3", "component4", "component5", "interruption1", "interruption2", "component6], ["component1", "interruption1", "interruption2", "component2", "interruption1", "interruption2", "component3", "component4", "interruption1", "interruption2", "component5", "component6], ["component1", "component2" "interruption1", "interruption2", "component3", "interruption1", "interruption2", "component4", "component5", "interruption1", "interruption2", "component6], ... ] ```',properties:{components:{description:"The components that are included in the interruption. These reference components in the StudyConfig.components section of the config.",items:{type:"string"},type:"array"},numInterruptions:{description:"The number of times the interruption will be randomly added",type:"number"},spacing:{const:"random",description:"If spacing is set to random, reVISit will add interruptions randomly. These interruptions will not ever be displayed as the first component in the block.",type:"string"}},required:["spacing","numInterruptions","components"],type:"object"},ReactComponent:{additionalProperties:!1,description:"The ReactComponent interface is used to define the properties of a react component. This component is used to render react code with certain parameters. These parameters can be used within your react code to render different things.\n\nUnlike other types of components, the path for a React component is relative to the `src/public/` folder. Similar to our standard assets, we suggest creating a folder named `src/public/{studyName}/assets` to house all of the React component assets for a particular study. Your React component which you link to in the path must be default exported from its file.\n\nReact components created this way have a generic prop type passed to the component on render, `<StimulusParams<T>>`, which has the following types.\n\n```ts { parameters: T; setAnswer: ({ status, provenanceGraph, answers }: { status: boolean, provenanceGraph?: TrrackedProvenance, answers: Record<string, any> }) => void } ```\n\nparameters is the same object passed in from the ReactComponent type below, allowing you to pass options in from the config to your component. setAnswer is a callback function allowing the creator of the ReactComponent to programmatically set the answer, as well as the provenance graph. This can be useful if you don't use the default answer interface, and instead have something more unique.\n\nSo, for example, if I had the following ReactComponent in my config ```js { type: 'react-component'; path: 'my_study/CoolComponent.tsx'; parameters: {  name: 'Zach';  age: 26; } } ```\n\nMy react component, CoolComponent.tsx, would exist in src/public/my_study/assets, and look something like this\n\n```ts export default function CoolComponent({ parameters, setAnswer }: StimulusParams<{name: string, age: number}>) { // render something } ```\n\nFor in depth examples, see the following studies, and their associated codebases. https://revisit.dev/study/demo-click-accuracy-test (https://github.com/revisit-studies/study/tree/v1.0.3/src/public/demo-click-accuracy-test/assets) https://revisit.dev/study/demo-brush-interactions (https://github.com/revisit-studies/study/tree/v1.0.3/src/public/demo-brush-interactions/assets)",properties:{allowFailedTraining:{description:"Controls whether the component should allow failed training. If not provided, the default is true.",type:"boolean"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},parameters:{additionalProperties:{},description:"The parameters that are passed to the react component. These can be used within your react component to render different things.",type:"object"},path:{description:"The path to the react component. This should be a relative path from the src/public folder.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},trainingAttempts:{description:"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.",type:"number"},type:{const:"react-component",type:"string"}},required:["path","response","type"],type:"object"},RepeatedComponentBlockCondition:{additionalProperties:!1,description:`The RepeatedComponentBlockCondition interface is used to define a SkipCondition based on the number of correct or incorrect repeated components. You might use this if you need to check if an attention check was failed multiple times. This is similar to the [ComponentBlockCondition](../ComponentBlockCondition), but it only checks a specific repeated component.

Here's an example of how to use the RepeatedComponentBlockCondition:

\`\`\`js { ... "skip": [ {   "name": "attentionCheck",   "check": "repeatedComponent",   "condition": "numIncorrect",   "value": 2,   "to": "end" } ] ... } \`\`\`

In this example, when the number of incorrect responses to the repeated component with the name "attentionCheck" is two, the participant will be redirected to the end of the study. If the number of incorrect responses is less than two, the participant will continue to the next component in the sequence.`,properties:{check:{const:"repeatedComponent",description:"The check we'll perform.",type:"string"},condition:{description:"The condition to check.",enum:["numCorrect","numIncorrect"],type:"string"},name:{description:"The name of the repeated component to check (e.g. attentionCheck).",type:"string"},to:{description:"The id of the component or block to skip to",type:"string"},value:{description:"The number of correct or incorrect responses to check for.",type:"number"}},required:["name","check","condition","value","to"],type:"object"},Response:{anyOf:[{$ref:"#/definitions/NumericalResponse"},{$ref:"#/definitions/ShortTextResponse"},{$ref:"#/definitions/LongTextResponse"},{$ref:"#/definitions/LikertResponse"},{$ref:"#/definitions/DropdownResponse"},{$ref:"#/definitions/SliderResponse"},{$ref:"#/definitions/RadioResponse"},{$ref:"#/definitions/CheckboxResponse"},{$ref:"#/definitions/IFrameResponse"}]},ResponseBlockLocation:{enum:["sidebar","aboveStimulus","belowStimulus"],type:"string"},ShortTextResponse:{additionalProperties:!1,description:'The ShortTextResponse interface is used to define the properties of a short text response. ShortTextResponses render as a text input that accepts any text and can optionally have a placeholder.\n\n```js { "id": "q-short-text", "prompt": "Short text example", "required": true, "location": "aboveStimulus", "type": "shortText", "placeholder": "Enter your answer here" } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},placeholder:{description:"The placeholder text that is displayed in the input.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"shortText",type:"string"}},required:["id","prompt","required","type"],type:"object"},SkipConditions:{description:`The SkipConditions interface is used to define skip conditions. This is used to skip to a different component/block based on the response to a component or based on the number of correct/incorrect responses in a block. Skip conditions work recursively: if you have a nested block, the parent blocks' skip conditions will be considered when computing the skip logic.

Skip conditions are evaluated in the order they are defined in the array. If a condition is met, the participant will be redirected to the component or block specified in the \`"to"\` property. If no conditions are met, the participant will continue to the next component in the sequence.

Skip conditions allow you to jump to a different component or block. If you intend to skip to a block, you should specify a block id in the sequence. If you intend to skip to a component, you should specify a component id. Skipping backwards is not supported. Skipping to a repeated component will skip to the first instance of the component after the component that triggered the skip.

Please see the interface definitions for more specific information on the different types of skip conditions.`,items:{anyOf:[{$ref:"#/definitions/IndividualComponentSingleResponseCondition"},{$ref:"#/definitions/IndividualComponentAllResponsesCondition"},{$ref:"#/definitions/ComponentBlockCondition"},{$ref:"#/definitions/RepeatedComponentBlockCondition"}]},type:"array"},SliderResponse:{additionalProperties:!1,description:'The SliderResponse interface is used to define the properties of a slider response. SliderResponses render as a slider input with user specified steps. For example, you could have steps of 0, 50, and 100.\n\nExample: ```js { "id": "q-slider", "prompt": "How are you feeling?", "location": "aboveStimulus", "required": true, "type": "slider", "options": [  {    "label": "Bad",    "value": 0  },  {    "label": "OK",    "value": 50  },  {    "label": "Good",    "value": 100  } ] } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},options:{description:"This defines the steps in the slider and the extent of the slider as an array of objects that have a label and a value.",items:{$ref:"#/definitions/NumberOption"},type:"array"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"slider",type:"string"}},required:["id","options","prompt","required","type"],type:"object"},StringOption:{additionalProperties:!1,description:"The StringOption interface is used to define the options for a dropdown, radio, or checkbox response. The label is the text that is displayed to the user, and the value is the value that is stored in the data file.",properties:{label:{description:"The label displayed to participants.",type:"string"},value:{description:"The value stored in the participant's data.",type:"string"}},required:["label","value"],type:"object"},StudyConfig:{additionalProperties:!1,description:'The StudyConfig interface is used to define the properties of a study configuration. This is a JSON object with four main components: the StudyMetadata, the UIConfig, the Components, and the Sequence. Below is the general template that should be followed when constructing a Study configuration file.\n\n```js { "$schema": "https://raw.githubusercontent.com/revisit-studies/study/v1.0.3/src/parser/StudyConfigSchema.json", "studyMetadata": {  ... }, "uiConfig": {  ... }, "components": {  ... }, "sequence": {  ... } } ```\n\n:::info For information about each of the individual pieces of the study configuration file, you can visit the documentation for each one individually. ::: <br/>\n\nThe `$schema` line is used to verify the schema. If you\'re using VSCode (or other similar IDEs), including this line will allow for autocomplete and helpful suggestions when writing the study configuration.',properties:{$schema:{description:"A required json schema property. This should point to the github link for the version of the schema you would like. The `$schema` line is used to verify the schema. If you're using VSCode (or other similar IDEs), including this line will allow for autocomplete and helpful suggestions when writing the study configuration. See examples for more information",type:"string"},baseComponents:{$ref:"#/definitions/BaseComponents",description:"The base components that are used in the study. These components can be used to template other components. See [BaseComponents](../../type-aliases/BaseComponents) for more information."},components:{additionalProperties:{anyOf:[{$ref:"#/definitions/IndividualComponent"},{$ref:"#/definitions/InheritedComponent"}]},description:"The components that are used in the study. They must be fully defined here with all properties. Some properties may be inherited from baseComponents.",type:"object"},sequence:{$ref:"#/definitions/ComponentBlock",description:"The order of the components in the study. This might include some randomness."},studyMetadata:{$ref:"#/definitions/StudyMetadata",description:"The metadata for the study. This is used to identify the study and version in the data file."},uiConfig:{$ref:"#/definitions/UIConfig",description:"The UI configuration for the study. This is used to configure the UI of the app."}},required:["$schema","studyMetadata","uiConfig","components","sequence"],type:"object"},StudyMetadata:{additionalProperties:!1,description:'The StudyMetadata is used to describe certain properties of a study. Some of this data is displayed on the landing page when running the app, such as the title and description. Below is an example of a StudyMetadata entry in your study configuration file:\n\n```js "studyMetadata" : { "title": "My New Study", "version": "pilot", "authors": [  "Jane Doe",  "John Doe" ], "date": "2024-04-01", "description": "This study is meant to test your ability.", "organizations": [  "The reVISit Team",  "The Other Team" ] } ```',properties:{authors:{description:"The authors of your study.",items:{type:"string"},type:"array"},date:{description:"The date of your study, may be useful for the researcher.",type:"string"},description:{description:"The description of your study, shown on the landing page.",type:"string"},organizations:{description:"The organizations that are associated with your study.",items:{type:"string"},type:"array"},title:{description:"The title of your study, shown on the landing page.",type:"string"},version:{description:"The version of your study. When you change a configuration file after a study has already been distributed to participants, you can change the version number so that the participants who see this new configuration file can be identified.",type:"string"}},required:["title","version","authors","date","description","organizations"],type:"object"},UIConfig:{additionalProperties:!1,description:'The UIConfig is used to configure the UI of the app. This includes the logo, contact email, and whether to show a progress bar. The UIConfig is also used to configure the sidebar, which can be used to display the task instructions and capture responses. Below is an example of how the UI Config would look in your study configuration (note, there are optional fields that are not shown here): ```js uiConfig:{ "contactEmail": "contact@revisit.dev", "helpTextPath": "<study-name>/assets/help.md", "logoPath": "<study-name>/assets/logo.jpg", "withProgressBar": true, "autoDownloadStudy": true "autoDownloadTime": 5000, "studyEndMsg": "Thank you for completing this study. You\'re the best!", "sidebar": true, "windowEventDebounceTime": 500, "urlParticipantIdParam": "PROLIFIC_ID", "numSequences": 500 } ``` In the above, the `path/to/assets/` path is referring to the path to your individual study assets. It is common practice to have your study directory contain an `assets` directory where all components and images relevant to your study reside. Note that this path is relative to the `public` folder of the repository - as is all other paths you define in reVISit (aside from React components whose paths are relative to `src/public`.)',properties:{autoDownloadStudy:{description:"Controls whether the study data is automatically downloaded at the end of the study.",type:"boolean"},autoDownloadTime:{description:"The time in milliseconds to wait before automatically downloading the study data.",type:"number"},contactEmail:{description:"The email address that used during the study if a participant clicks contact.",type:"string"},enumerateQuestions:{description:"Whether to prepend questions with their index (+ 1). This should only be used when all questions are in the same location, e.g. all are in the side bar.",type:"boolean"},helpTextPath:{description:"The path to the help text file. This is displayed when a participant clicks help. Markdown is supported.",type:"string"},logoPath:{description:"The path to the logo image. This is displayed on the landing page and the header.",type:"string"},numSequences:{description:"The number of sequences to generate for the study. This is used to generate the random sequences for the study. The default is 1000.",type:"number"},sidebar:{description:"Controls whether the left sidebar is rendered at all. Required to be true if your response's location is set to sidebar for any question.",type:"boolean"},sidebarWidth:{description:"The width of the left sidebar. Defaults to 300.",type:"number"},studyEndMsg:{description:"The message to display when the study ends.",type:"string"},urlParticipantIdParam:{description:"If the participant ID is passed in the URL, this is the name of the querystring parameter that is used to capture the participant ID (e.g. PROLIFIC_ID). This will allow a user to continue a study on different devices and browsers.",type:"string"},windowEventDebounceTime:{description:"Debounce time in milliseconds for automatically tracked window events. Defaults to 100. E.g 100 here means 1000ms / 100ms = 10 times a second, 200 here means 1000ms / 200ms = 5 times per second",type:"number"},withProgressBar:{description:"Controls whether the progress bar is rendered in the study.",type:"boolean"}},required:["contactEmail","logoPath","withProgressBar","sidebar"],type:"object"},WebsiteComponent:{additionalProperties:!1,description:'The WebsiteComponent interface is used to define the properties of a website component. A WebsiteComponent is used to render an iframe with a website inside of it. This can be used to display an external website or an html file that is located in the public folder.\n\n```js { "type": "website", "path": "<study-name>/assets/website.html", } ```\n\nTo pass a data from the config to the website, you can use the `parameters` field as below:\n\n```js { "type": "website", "path": "<study-name>/website.html", "parameters": {  "barData": [0.32, 0.01, 1.2, 1.3, 0.82, 0.4, 0.3] } "response": [  {    "id": "barChart",    "prompt": "Your selected answer:",    "required": true,    "location": "belowStimulus",    "type": "iframe"  } ], } ``` In the `website.html` file, by including `revisit-communicate.js`, you can use the `Revisit.onDataReceive` method to retrieve the data, and `Revisit.postAnswers` to send the user\'s responses back to the reVISit as shown in the example below:\n\n```html <script src="../../revisitUtilities/revisit-communicate.js"><\/script> <script> Revisit.onDataReceive((data) => {  const barData = data[\'barData\'];  ... });\n\n// Call out that \'barChart\' needs to match ID in \'response\' object Revisit.postAnswers({ barChart: userAnswer }); <\/script> ```\n\n If the html website implements Trrack library for provenance tracking, you can send the provenance graph back to reVISit by calling `Revisit.postProvenanceGraph` as shown in the example below. You need to call this each time the Trrack state is updated so that reVISit is kept aware of the changes in the provenance graph.\n\n```js const trrack = initializeTrrack({ initialState, registry });\n\n... Revisit.postProvenance(trrack.graph.backend); ```',properties:{allowFailedTraining:{description:"Controls whether the component should allow failed training. If not provided, the default is true.",type:"boolean"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},parameters:{additionalProperties:{},description:"The parameters that are passed to the website (iframe). These can be used within your website to render different things.",type:"object"},path:{description:"The path to the website. This should be a relative path from the public folder or could be an external website.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},trainingAttempts:{description:"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.",type:"number"},type:{const:"website",type:"string"}},required:["path","response","type"],type:"object"}},wRt={$ref:vRt,$schema:bRt,definitions:_Rt},ERt="#/definitions/GlobalConfig",xRt="http://json-schema.org/draft-07/schema#",SRt={GlobalConfig:{additionalProperties:!1,description:"The GlobalConfig is used to generate the list of available studies in the UI. This list is displayed on the landing page when running the app.",properties:{$schema:{description:"A required json schema property. This should point to the github link for the version of the schema you would like. See examples in the public folder for more information",type:"string"},configs:{additionalProperties:{additionalProperties:!1,description:"The key is used to identify the study config file. This key is used in the configList property.",properties:{path:{description:"The path to the study config file. This should be a relative path from the public folder.",type:"string"},test:{description:"Indicates whether the study is a test study. This is used to hide the study from the landing page.",type:"boolean"}},required:["path"],type:"object"},description:"A required property that specifies the options for the configList property.",type:"object"},configsList:{description:"A required property that is used to generate the list of available studies in the UI. This list is displayed on the landing page when running the app.",items:{type:"string"},type:"array"}},required:["$schema","configs","configsList"],type:"object"}},TRt={$ref:ERt,$schema:xRt,definitions:SRt},aNe=new oNe;aNe.addSchema(TRt);const Lde=aNe.getSchema("#/definitions/GlobalConfig"),uNe=new oNe;uNe.addSchema(wRt);const T9=uNe.getSchema("#/definitions/StudyConfig");function CRt(e){const t=[];return[e.configsList.every(r=>e.configs[r]===void 0?(t.push({message:`Config ${r} is not defined in configs object, but is present in configsList`}),!1):!0),t]}function w4(e){return e.baseComponent!==void 0}function ARt(e){const t=WQ.parse(e),n=Lde(t),r=CRt(t);if(n&&r[0])return t;throw console.error("Global config parsing errors",[...Lde.errors||[],...r[1]]),Error("There was an issue validating your file global.json")}function lNe(e,t,n=[]){if(e.components.length===0){n.push({message:"Sequence has an empty components array",instancePath:"/sequence/",params:{action:"remove empty components block"}});return}e.id&&t.map((i,s)=>i===e.id?s:null).forEach(i=>{i!==null&&t.splice(i,1)}),e.components.forEach(r=>{typeof r=="string"?t.includes(r)&&t.map((s,o)=>s===r?o:null).forEach(s=>{s!==null&&t.splice(s,1)}):lNe(r,t,n)}),e.skip&&t.push(...e.skip.map(r=>r.to).filter(r=>r!=="end"))}function IRt(e){const t=[],n=[];Object.entries(e.components).forEach(([s,o])=>{var a;w4(o)&&!((a=e.baseComponents)!=null&&a[o.baseComponent])&&t.push({message:`Base component \`${o.baseComponent}\` is not defined in baseComponents object`,instancePath:`/components/${s}`,params:{action:"add the base component to the baseComponents object"}})});const r=kxe(e.sequence);r.forEach(s=>{var o;e.components[s]||t.push({message:(o=e.baseComponents)!=null&&o[s]?`Component \`${s}\` is a base component and cannot be used in the sequence`:`Component \`${s}\` is not defined in components object`,instancePath:"/sequence/",params:{action:"add the component to the components object"}})}),Object.keys(e.components).filter(s=>!r.includes(s)).forEach(s=>{n.push({message:`Component \`${s}\` is defined in components object but not used in the sequence`,instancePath:"/components/",params:{action:"remove the component from the components object or add it to the sequence"}})});const i=[];return lNe(e.sequence,i),i.forEach(s=>{t.push({message:`Skip target \`${s}\` does not occur after the skip block it is used in`,instancePath:"/sequence/",params:{action:"add the target to the sequence after the skip block"}})}),{errors:t,warnings:n}}function kRt(e){let t=!1,n;try{n=WQ.parse(e),t=T9(n)}catch{t=!1}let r=[],i=[];if(t){const{errors:s,warnings:o}=IRt(n);r=[...T9.errors||[],...s],i=o}else r=T9.errors||[{message:"There was an issue validating your config file",instancePath:"root",params:{action:"fix the errors in your file or make sure the global config references the right file path"}}];return{...n,errors:r,warnings:i}}function cNe(){const e=Jm(),{setAlertModal:t}=Kh(),n=Xh();I.useEffect(()=>{window.history.pushState(null,"",window.location.href),window.onpopstate=()=>{window.history.pushState(null,"",window.location.href),n(t({show:!0,message:"Using the browser's back button is prohibited during the study."}))}},[e,t,n])}var Fde=Object.prototype.hasOwnProperty;function jde(e,t,n){for(n of e.keys())if(zC(n,t))return n}function zC(e,t){var n,r,i;if(e===t)return!0;if(e&&t&&(n=e.constructor)===t.constructor){if(n===Date)return e.getTime()===t.getTime();if(n===RegExp)return e.toString()===t.toString();if(n===Array){if((r=e.length)===t.length)for(;r--&&zC(e[r],t[r]););return r===-1}if(n===Set){if(e.size!==t.size)return!1;for(r of e)if(i=r,i&&typeof i=="object"&&(i=jde(t,i),!i)||!t.has(i))return!1;return!0}if(n===Map){if(e.size!==t.size)return!1;for(r of e)if(i=r[0],i&&typeof i=="object"&&(i=jde(t,i),!i)||!zC(r[1],t.get(i)))return!1;return!0}if(n===ArrayBuffer)e=new Uint8Array(e),t=new Uint8Array(t);else if(n===DataView){if((r=e.byteLength)===t.byteLength)for(;r--&&e.getInt8(r)===t.getInt8(r););return r===-1}if(ArrayBuffer.isView(e)){if((r=e.byteLength)===t.byteLength)for(;r--&&e[r]===t[r];);return r===-1}if(!n||typeof e=="object"){r=0;for(n in e)if(Fde.call(e,n)&&++r&&!Fde.call(t,n)||!(n in t)||!zC(e[n],t[n]))return!1;return Object.keys(t).length===r}}return e!==e&&t!==t}function RRt(e){var t=I.useRef(e),n=I.useRef(0);return zC(e,t.current)||(t.current=e,n.current+=1),I.useMemo(function(){return t.current},[n.current])}function NRt(e,t){return I.useEffect(e,RRt(t))}const DRt=(e,t=null)=>{const[n,r]=I.useState("idle"),[i,s]=I.useState(null),[o,a]=I.useState(null),u=I.useRef(),l=I.useRef(!1);I.useEffect(()=>(l.current=!0,()=>{l.current=!1}),[]);const c=I.useCallback((...f)=>{r("pending"),a(null);const d=Promise.resolve(e(...f)).then(h=>(l.current&&d===u.current&&(s(h),r("success")),h)).catch(h=>{throw l.current&&d===u.current&&(s(null),a(h),r("error")),h});return u.current=d,d},[e]);return NRt(()=>{if(t)try{c(...t)}catch{}},[c,t]),{execute:c,status:n,value:i,error:o}},Bde=["status","percentComplete","description","instruction","responsePrompt","answer","correctAnswer","responseMin","responseMax","startTime","endTime","duration","meta","configHash"],fNe=["participantId","trialId","trialOrder","responseId"];function $J(e,t){const n=`data:text/json;charset=utf-8,${encodeURIComponent(e)}`,r=document.createElement("a");r.setAttribute("href",n),r.setAttribute("download",t),document.body.appendChild(r),r.click(),r.remove()}function PRt(e,t,n){const r=(Object.entries(e.answers).filter(([i,s])=>s.endTime!==void 0).length/(Sm(e.sequence).length-1)*100).toFixed(2);return Object.entries(e.answers).map(([i,s])=>{const o=i.split("_").slice(0,-1).join("_"),a=parseInt(`${i.split("_").at(-1)}`,10),u=n.components[o],l=w4(u)&&u.baseComponent&&n.baseComponents?aK({},n.baseComponents[u.baseComponent],u):u,c=s.endTime-s.startTime;return Object.entries(s.answer).map(([d,h])=>{var g,y;const p={participantId:e.participantId,trialId:o,trialOrder:a,responseId:d},m=l.response.find(v=>v.id===d);if(t.includes("status")&&(p.status=e.rejected?"rejected":e.completed?"completed":"in progress"),t.includes("configHash")&&(p.configHash=e.participantConfigHash),t.includes("percentComplete")&&(p.percentComplete=r),t.includes("description")&&(p.description=l.description),t.includes("instruction")&&(p.instruction=l.instruction),t.includes("responsePrompt")&&(p.responsePrompt=m==null?void 0:m.prompt),t.includes("answer")&&(p.answer=h),t.includes("correctAnswer")){const v=(y=(g=l.correctAnswer)==null?void 0:g.find(b=>b.id===d))==null?void 0:y.answer;p.correctAnswer=typeof v=="object"?JSON.stringify(v):v}return t.includes("responseMin")&&(p.responseMin=(m==null?void 0:m.type)==="numerical"?m.min:void 0),t.includes("responseMax")&&(p.responseMax=(m==null?void 0:m.type)==="numerical"?m.max:void 0),t.includes("startTime")&&(p.startTime=new Date(s.startTime).toISOString()),t.includes("endTime")&&(p.endTime=new Date(s.endTime).toISOString()),t.includes("duration")&&(p.duration=c),t.includes("meta")&&(p.meta=JSON.stringify(l.meta,null,2)),p}).flat()}).flat()}async function ORt(e,t,n,r){if(!n)return{header:[],rows:[]};const i=[...fNe,...e],s=[...new Set(t.map(c=>c.participantConfigHash))],o=await n.getAllConfigsFromHash(s,r),a=i,l=(await Promise.all(t.map(async c=>await PRt(c,i,o[c.participantConfigHash])))).flat().sort((c,f)=>c!==f?c.participantId.localeCompare(f.participantId):c.trialOrder-f.trialOrder);return{header:a,rows:l}}function $Rt({opened:e,close:t,filename:n,data:r,studyId:i}){const[s,o]=I.useState([...Bde].filter(h=>h!=="meta")),a=Cs(),{value:u,status:l,error:c}=DRt(ORt,[s,r,a.storageEngine,i]),f=I.useCallback(()=>{if(!u)return;const h=[u.header.join(","),...u.rows.map(p=>u.header.map(m=>`"${`${p[m]}`.replace(/"/g,'""')}"`).join(","))].join(`
`);$J(h,n)},[n,u]),d=I.useMemo(()=>{if(!u)return"";const h=u.rows.length>5?5:u.rows.length,p=h===1?"":"s";return`This is a preview of the first ${p?h:""} row${p} of the CSV. The full CSV contains ${u.rows.length} row${p}.`},[u]);return _.jsxs(Yi,{opened:e,size:"90%",onClose:t,title:"Tidy CSV Exporter",centered:!0,withCloseButton:!1,children:[_.jsx(iY,{searchable:!0,nothingFoundMessage:"Property not found",data:[...Bde],value:s,onChange:h=>o(h),label:"Included optional columns:",leftSection:_.jsx(bQe,{}),variant:"filled"}),_.jsx(Nl,{h:"md"}),_.jsxs(pe,{mih:300,style:{width:"100%",overflow:"scroll"},children:[l==="success"&&u?_.jsxs(qt,{striped:!0,captionSide:"bottom",withTableBorder:!0,children:[_.jsx(qt.Thead,{children:_.jsx(qt.Tr,{children:u.header.map(h=>_.jsx(qt.Th,{style:{whiteSpace:"nowrap",minWidth:["description","instruction","participantId"].includes(h)?200:void 0},children:_.jsxs(Nt,{direction:"row",justify:"space-between",align:"center",children:[h,!fNe.includes(h)&&_.jsx($b,{onClick:()=>o(s.filter(p=>p!==h)),style:{marginBottom:-3,marginLeft:8},variant:"subtle",color:"gray",children:_.jsx(PY,{size:16})})]})},h))})}),_.jsx(qt.Tbody,{children:u.rows.slice(0,5).map((h,p)=>_.jsx(qt.Tr,{children:u.header.map(m=>_.jsx(qt.Td,{style:{whiteSpace:["description","instruction","participantId"].includes(m)?"normal":"nowrap"},children:h[m]},`${p}-${m}`))},p))})]}):l==="error"&&c?_.jsx(Zx,{variant:"light",children:c.message}):null,_.jsx(Ll,{visible:l==="pending"||l==="idle"})]}),_.jsx(Nl,{h:"sm"}),_.jsx(Nt,{justify:"center",fz:"sm",c:"dimmed",children:_.jsx(Xe,{children:d})}),_.jsx(Nl,{h:"md"}),_.jsxs(ls,{justify:"right",children:[_.jsx(fn,{onClick:t,color:"dark",variant:"subtle",children:"Close"}),_.jsx(fn,{leftSection:_.jsx($we,{}),onClick:()=>f(),"data-autofocus":!0,children:"Download"})]})]})}function MRt(){const e=V0(),{storageEngine:t}=Cs(),{answers:n}=Yc(v=>v),[r,i]=I.useState(!1);I.useEffect(()=>{const v=setInterval(async()=>{await t.verifyCompletion(n)&&(i(!0),clearInterval(v))},1e3)},[]),cNe();const[s,o]=I.useState(),[a,u]=I.useState(""),l=e.studyMetadata.title.replace(" ","_");I.useEffect(()=>{async function v(){if(t){const b=await t.getCurrentParticipantId(),w=await t.getParticipantData();u(b),o(w)}}v()},[t]);const c=I.useCallback(async()=>{$J(JSON.stringify(s,null,2),`${l}_${a}.json`)},[l,s,a]),f=e.uiConfig.autoDownloadStudy||!1,d=f&&e.uiConfig.autoDownloadTime||-1,[h,p]=I.useState(Math.floor(d/1e3));I.useEffect(()=>{if(r){const v=setInterval(()=>{p(b=>b-1)},1e3);return h<=0?(f&&c(),clearInterval(v),()=>clearInterval(v)):()=>clearInterval(v)}return()=>{}},[f,r,h,c]);const m=Hb(),[g,y]=I.useState(!1);return I.useEffect(()=>{(async()=>{if(t){const b=await t.getModes(m);y(b.dataCollectionEnabled)}})()},[t,m]),_.jsx(Pc,{style:{height:"100%"},children:_.jsx(Nt,{direction:"column",children:r||!g?_.jsx(Xe,{size:"xl",display:"block",children:e.uiConfig.studyEndMsg?_.jsx(Qa,{text:e.uiConfig.studyEndMsg}):"Thank you for completing the study. You may close this window now."}):_.jsxs(_.Fragment,{children:[_.jsx(Xe,{size:"xl",display:"block",children:"Please wait while your answers are uploaded."}),_.jsx(Nl,{h:"lg"}),_.jsx(Pc,{children:_.jsx(sd,{color:"blue"})})]})})})}function LRt(){return _.jsx(Xe,{children:"Thank you for participating. Unfortunately you have didn't answer the training correctly, which means you are not eligible to participate in the study. You may close this window now."})}function FRt(){var d;const e=V0(),t=Jm(),n=My()||"Notfound",r=e.components[n],i=uK();cNe();const{storageEngine:s}=Cs(),o=Xh(),{setAlertModal:a}=Kh();if(I.useEffect(()=>{(s==null?void 0:s.getEngine())!=="firebase"&&o(a({show:!0,message:"There was an issue connecting to the firebase database. This could be caused by a network issue or your adblocker. If you are using an adblocker, please disable it for this website and refresh."}))},[a,s,o]),n==="end")return _.jsx(MRt,{});if(n==="__trainingFailed")return _.jsx(LRt,{});if(n==="Notfound")return _.jsx(H1,{email:e.uiConfig.contactEmail});const u=w4(r)&&e.baseComponents?aK({},(d=e.baseComponents)==null?void 0:d[r.baseComponent],r):r,l=u.instruction||"",{instructionLocation:c}=u,f=e.uiConfig.sidebar&&(c==="sidebar"||c===void 0);return _.jsxs(_.Fragment,{children:[c==="aboveStimulus"&&_.jsx(Qa,{text:l}),_.jsx(l3,{status:i,config:u,location:"aboveStimulus"},`${t}-above-response-block`),_.jsxs(I.Suspense,{fallback:_.jsx("div",{children:"Loading..."}),children:[u.type==="markdown"&&_.jsx(F2t,{currentConfig:u}),u.type==="website"&&_.jsx(Cat,{currentConfig:u}),u.type==="image"&&_.jsx(Iat,{currentConfig:u}),u.type==="react-component"&&_.jsx(L2t,{currentConfig:u})]},`${t}-stimulus`),(c==="belowStimulus"||c===void 0&&!f)&&_.jsx(Qa,{text:l}),_.jsx(l3,{status:i,config:u,location:"belowStimulus"},`${t}-below-response-block`)]})}function kV(e){const[t]=RY();return _.jsx(kY,{...e,to:{pathname:e.to,search:t.toString()}})}function dNe(e,t,n,r){let i=0;for(let s=0;s<e.components.length;s+=1){const o=e.components[s];if(typeof o=="string"){if(r===e.orderPath&&o===t&&s>=n)break;i+=1}else if(i+=dNe(o,t,n,r),r.includes(o.orderPath))break}return i}function hNe(e,t){let n=0;return t.components.forEach(r=>{var i;if(typeof r=="string"&&((i=e.interruptions)!=null&&i.flatMap(s=>s.components).includes(r)))n+=1;else if(typeof r!="string"){const s=e.components.find(o=>typeof o!="string"&&o.orderPath===r.orderPath);n+=hNe(s,r)}}),n}function jRt(e,t){const n=[];return t.forEach(r=>{const i=e.findIndex(s=>typeof s=="string"?s===r:typeof r!="string"&&s.orderPath===r.orderPath);i!==-1&&(n.push(e[i]),e.splice(i,1)),i===-1&&typeof r=="string"&&n.push(r)}),n.push(...e),n}function BRt({step:e,disabled:t,fullSequence:n,startIndex:r,interruption:i,participantView:s,studyConfig:o,subSequence:a,analysisNavigation:u}){const l=Hb(),c=Gh(),f=Jm(),[d,{close:h,open:p}]=wL(!1),m=e in o.components&&o.components[e],g=a&&a.components.slice(r).includes(e)?dNe(n,e,r,a.orderPath):-1,{trialId:y}=wm(),v=y===e,b=s?f===g:f===`reviewer-${e}`,w=u?v:b,E=I.useCallback(()=>c(y?`./../${e}`:`./${e}`),[c,e,y]),S=u?E:()=>c(s?`/${l}/${g}`:`/${l}/reviewer-${e}`);return _.jsxs(Do,{withinPortal:!0,position:"left",withArrow:!0,arrowSize:10,shadow:"md",opened:d,offset:20,children:[_.jsx(Do.Target,{children:_.jsx(pe,{onMouseEnter:p,onMouseLeave:h,children:_.jsx(KL,{active:w,style:{lineHeight:"32px",height:"32px"},label:_.jsxs(pe,{children:[i&&_.jsx(oQe,{size:16,style:{marginRight:4,marginBottom:-2},color:"orange"}),w?_.jsx(Xe,{size:"sm",span:!0,fw:"700",display:"inline",children:e}):_.jsx(Xe,{size:"sm",display:"inline",children:e})]}),onClick:S,disabled:t})})}),m&&(m.description||m.meta)&&_.jsx(Do.Dropdown,{onMouseLeave:h,children:_.jsx(Xe,{size:"sm",children:_.jsxs(pe,{children:[m.description&&_.jsxs(pe,{children:[_.jsx(Xe,{fw:900,display:"inline-block",mr:2,children:"Description:"}),_.jsx(Xe,{fw:400,component:"span",children:m.description})]}),m.meta&&_.jsxs(Xe,{children:[_.jsx(Xe,{fw:"900",component:"span",children:"Task Meta: "}),_.jsx(Xe,{component:"pre",style:{margin:0,padding:0},children:`${JSON.stringify(m.meta,null,2)}`})]})]})})})]})}function V$({configSequence:e,fullSequence:t,participantSequence:n,participantView:r,studyConfig:i,analysisNavigation:s}){var a;let o=E0(e.components);return n&&r&&(o=jRt(E0(e.components),E0(n.components))),r||(o=[...((a=e.interruptions)==null?void 0:a.flatMap(u=>u.components))||[],...o]),_.jsx(_.Fragment,{children:o.map((u,l)=>{if(typeof u=="string")return _.jsx(BRt,{step:u,disabled:r&&(n==null?void 0:n.components[l])!==u,fullSequence:t,startIndex:l,interruption:e.interruptions&&e.interruptions.findIndex(h=>h.components.includes(u))>-1||!1,participantView:r,studyConfig:i,subSequence:n,analysisNavigation:s},l);const c=n==null?void 0:n.components.find(h=>typeof h!="string"&&h.orderPath===u.orderPath),f=c?Sm(c).length-hNe(u,c):0,d=Sm(u);return _.jsx(KL,{label:_.jsxs(pe,{style:{opacity:f>0?1:.5},children:[_.jsx(Xe,{size:"sm",display:"inline",children:u.order}),u.order==="random"||u.order==="latinSquare"?_.jsx(iQe,{size:"15",opacity:.5,style:{marginLeft:"5px",verticalAlign:"middle"}}):null,r&&_.jsxs(b0,{ml:5,variant:"light",children:[f,"/",d.length]}),r&&u.interruptions&&_.jsx(b0,{ml:5,color:"orange",variant:"light",children:(c==null?void 0:c.components.filter(h=>{var p;return typeof h=="string"&&((p=u.interruptions)==null?void 0:p.flatMap(m=>m.components).includes(h))}).length)||0})]}),defaultOpened:!0,childrenOffset:32,style:{lineHeight:"32px",height:"32px"},children:_.jsx(pe,{style:{borderLeft:"1px solid #e9ecef"},children:_.jsx(V$,{configSequence:u,participantSequence:c,fullSequence:t,participantView:r,studyConfig:i,analysisNavigation:s})})},l)})})}function pNe(e,t,n,r){e==null||e.nextParticipant().then(()=>{window.location.href=r}).catch(i=>{console.error(i)})}function Ude({text:e}){return _.jsx(ai,{label:e,multiline:!0,w:200,style:{whiteSpace:"normal"},withinPortal:!0,position:"bottom",children:_.jsx(Dwe,{size:16,style:{marginBottom:-3,marginLeft:4}})})}function URt(){const{sequence:e,metadata:t}=Yc(f=>f),{toggleStudyBrowser:n}=Kh(),r=V0(),i=Xh(),s=Hb(),o=Cwe(`/${s}`),{storageEngine:a}=Cs(),u=I.useMemo(()=>{let f=E0(r.sequence);return f=sK(f,"root"),f.components.push("end"),f},[r.sequence]),[l,c]=I.useState("participant");return _.jsxs(pi.Aside,{p:"0",children:[_.jsx(pi.Section,{children:_.jsxs(Nt,{direction:"row",p:"sm",justify:"space-between",pb:"xs",children:[_.jsx(Xe,{size:"md",fw:700,pt:3,children:"Study Browser"}),_.jsx(fn,{variant:"light",leftSection:_.jsx(DY,{size:14}),onClick:()=>pNe(a,r,t,o),size:"xs",disabled:l==="allTrials",children:"Next Participant"}),_.jsx(Wm,{onClick:()=>i(n()),mt:1})]})}),_.jsx(pi.Section,{grow:!0,component:vm,p:"xs",pt:0,children:_.jsxs(ns,{value:l,onChange:c,children:[_.jsx(pe,{style:{position:"sticky",top:0,backgroundColor:"white",zIndex:1},children:_.jsxs(ns.List,{grow:!0,children:[_.jsxs(ns.Tab,{value:"participant",children:["Participant View",_.jsx(Ude,{text:"The Participants View shows items just as a participants would see them, considering randomization, omissions, etc. You can navigate between multiple participants using the next participant button."})]}),_.jsxs(ns.Tab,{value:"allTrials",children:["All Trials View",_.jsx(Ude,{text:"The All Trials View shows all items in the order defined in the config."})]})]})}),_.jsx(ns.Panel,{value:"participant",children:_.jsx(V$,{configSequence:u,participantSequence:e,fullSequence:e,participantView:!0,studyConfig:r})}),_.jsx(ns.Panel,{value:"allTrials",children:_.jsx(V$,{configSequence:u,participantSequence:e,fullSequence:e,participantView:!1,studyConfig:r})})]})})]})}function zRt({studyNavigatorEnabled:e,dataCollectionEnabled:t}){const{config:n,metadata:r}=Yc(E=>E),i=oK(),s=Xh(),{toggleShowHelpText:o,toggleStudyBrowser:a}=Kh(),{storageEngine:u}=Cs(),l=Jm(),c=i.length-1,f=typeof l=="number"?l/c*100:0,[d,h]=I.useState(!1),p=n==null?void 0:n.uiConfig.logoPath,m=n==null?void 0:n.uiConfig.withProgressBar,g=Hb(),y=Cwe(`/${g}`),v=I.useRef(null),[b,w]=I.useState(!1);return I.useEffect(()=>{const E=v.current;E&&w(E.scrollWidth>E.offsetWidth)},[n]),_.jsx(pi.Header,{p:"md",children:_.jsxs(Ha,{mt:-7,align:"center",children:[_.jsx(Ha.Col,{span:4,children:_.jsxs(Nt,{align:"center",children:[_.jsx(Dy,{w:40,src:`${Vu}${p}`,alt:"Study Logo"}),_.jsx(Nl,{w:"md"}),_.jsx(ui,{ref:v,order:4,style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},title:b?n==null?void 0:n.studyMetadata.title:void 0,children:n==null?void 0:n.studyMetadata.title})]})}),_.jsx(Ha.Col,{span:4,children:m&&_.jsx(iS,{radius:"md",size:"lg",value:f})}),_.jsx(Ha.Col,{span:4,children:_.jsxs(ls,{wrap:"nowrap",justify:"right",children:[!t&&_.jsx(ai,{multiline:!0,withArrow:!0,arrowSize:6,w:300,label:"This is a demo version of the study, were not collecting any data.",children:_.jsx(b0,{size:"lg",color:"orange",children:"Demo Mode"})}),(n==null?void 0:n.uiConfig.helpTextPath)!==void 0&&_.jsx(fn,{variant:"outline",onClick:()=>s(o()),children:"Help"}),_.jsxs(Cu,{shadow:"md",width:200,withinPortal:!0,opened:d,onChange:h,children:[_.jsx(Cu.Target,{children:_.jsx($b,{size:"lg",className:"studyBrowserMenuDropdown",variant:"subtle",color:"gray",children:_.jsx(pQe,{})})}),_.jsxs(Cu.Dropdown,{children:[e&&_.jsx(Cu.Item,{leftSection:_.jsx(CQe,{size:14}),onClick:()=>s(a()),children:"Study Browser"}),_.jsx(Cu.Item,{component:"a",href:n!==null?`mailto:${n.uiConfig.contactEmail}`:void 0,leftSection:_.jsx(_Qe,{size:14}),children:"Contact"}),e&&_.jsx(Cu.Item,{leftSection:_.jsx(DY,{size:14}),onClick:()=>pNe(u,n,r,y),children:"Next Participant"})]})]})]})})]})})}function mNe(e,t){var n;return w4(e)&&t.baseComponents?aK({},(n=t.baseComponents)==null?void 0:n[e.baseComponent],e):e}function VRt(){var u;const e=(u=V0())==null?void 0:u.uiConfig.sidebar,t=V0(),n=My(),r=t.components[n],i=I.useMemo(()=>r?mNe(r,t):null,[r,t]),s=uK(),o=(i==null?void 0:i.instruction)||"",a=(i==null?void 0:i.instructionLocation)==="sidebar"||(i==null?void 0:i.instructionLocation)===void 0;return e&&i?_.jsxs(pi.Navbar,{bg:"gray.1",display:"block",style:{zIndex:0,overflowY:"scroll"},children:[a&&o!==""&&_.jsx(pi.Section,{bg:"gray.3",p:"md",children:_.jsxs(Xe,{c:"gray.9",children:[_.jsx(Xe,{span:!0,c:"orange.8",fw:700,inherit:!0,children:"Task:"}),_.jsx(Qa,{text:o})]})}),_.jsx(pi.Section,{p:"md",children:_.jsx(l3,{status:s,config:i,location:"sidebar"},`${n}-sidebar-response-block`)})]}):_.jsx(pi.Navbar,{bg:"gray.1",display:"block",style:{zIndex:0,overflowY:"scroll"},children:_.jsx(l3,{status:s,config:i,location:"sidebar",style:{display:"hidden"}},`${n}-sidebar-response-block`)})}function HRt(){const{showHelpText:e,config:t}=Yc(u=>u),n=Xh(),{toggleShowHelpText:r}=Kh(),[i,s]=I.useState(""),[o,a]=I.useState(!0);return I.useEffect(()=>{async function u(){const l=await cK(t.uiConfig.helpTextPath);l!==void 0&&s(l),a(!1)}u()},[t.uiConfig.helpTextPath]),_.jsx(Yi,{size:"70%",opened:e,withCloseButton:!1,onClose:()=>n(r()),children:o||i?_.jsx(Qa,{text:i}):_.jsx(H1,{path:t.uiConfig.helpTextPath})})}function qRt(){const{alertModal:e}=Yc(o=>o),{setAlertModal:t}=Kh(),n=Xh(),[r,i]=I.useState(e.show),s=I.useCallback(()=>n(t({...e,show:!1})),[e,t,n]);return I.useEffect(()=>i(e.show),[e.show]),_.jsx(Yi,{opened:r,centered:!0,size:"lg",withCloseButton:!1,onClose:s,children:_.jsxs(Zx,{color:"red",radius:"xs",title:"Alert",icon:_.jsx(rQe,{}),onClose:s,styles:{root:{backgroundColor:"unset"}},children:[_.jsx(Xe,{my:"md",children:e.message}),_.jsx(ls,{w:"100%",justify:"end",children:_.jsx(fn,{onClick:s,color:"red",variant:"filled",m:"xs",children:"Continue Study"})})]})})}function WRt(){const e=I.useRef([]),t=V0(),n=t.uiConfig.windowEventDebounceTime??100,r=Yc(d=>d.showStudyBrowser);I.useEffect(()=>{const d=ff(E=>{e.current.push([Date.now(),"focus",E.target instanceof HTMLElement?E.target.tagName:""])},n,{maxWait:n}),h=ff(E=>{e.current.push([Date.now(),"input",E.data??""])},n,{maxWait:n}),p=ff(E=>{e.current.push([Date.now(),"keypress",E.key])},n,{maxWait:n}),m=ff(E=>{e.current.push([Date.now(),"mousedown",[E.clientX,E.clientY]])},n,{maxWait:n}),g=ff(E=>{e.current.push([Date.now(),"mouseup",[E.clientX,E.clientY]])},n,{maxWait:n}),y=ff(()=>{e.current.push([Date.now(),"resize",[window.innerWidth,window.innerHeight]])},n,{maxWait:n}),v=ff(E=>{e.current.push([Date.now(),"mousemove",[E.clientX,E.clientY]])},n,{maxWait:n}),b=ff(()=>{e.current.push([Date.now(),"scroll",[window.scrollX,window.scrollY]])},n,{maxWait:n}),w=ff(()=>{e.current.push([Date.now(),"visibility",document.visibilityState])},n,{maxWait:n});return window.addEventListener("focus",d,!0),window.addEventListener("input",h),window.addEventListener("keypress",p),window.addEventListener("mousedown",m),window.addEventListener("mouseup",g),window.addEventListener("resize",y),window.addEventListener("mousemove",v),window.addEventListener("scroll",b),document.addEventListener("visibilitychange",w),()=>{window.removeEventListener("focus",d,!0),window.removeEventListener("input",h),window.removeEventListener("keypress",p),window.addEventListener("mousedown",m),window.addEventListener("mouseup",g),window.removeEventListener("resize",y),window.removeEventListener("mousemove",v),window.removeEventListener("scroll",b),document.removeEventListener("visibilitychange",w)}},[]);const i=t.uiConfig.sidebarWidth??300,{storageEngine:s}=Cs(),o=Hb(),[a,u]=I.useState(!1),[l,c]=I.useState(!1);I.useEffect(()=>{(async()=>{if(s){const h=await s.getModes(o);u(h.studyNavigatorEnabled),c(h.dataCollectionEnabled)}})()},[s,o]);const f=I.useMemo(()=>a&&r,[a,r]);return _.jsx($xe.Provider,{value:e,children:_.jsxs(pi,{padding:"md",header:{height:70},navbar:{width:i,breakpoint:"xs",collapsed:{desktop:!t.uiConfig.sidebar,mobile:!t.uiConfig.sidebar}},aside:{width:360,breakpoint:"xs",collapsed:{desktop:!f,mobile:!f}},children:[_.jsx(VRt,{}),_.jsx(URt,{}),_.jsx(zRt,{studyNavigatorEnabled:a,dataCollectionEnabled:l}),_.jsx(HRt,{}),_.jsx(qRt,{}),_.jsx(pi.Main,{children:_.jsx(zXe,{})})]})})}function GRt(e,t=!1){return typeof e=="number"?zde(e,t):zde(e.length,t).map(r=>r.map(i=>e[i]))}function zde(e,t){if(e<0)throw new Error("Latin square size must be > 0");if(e==0)return[];if(e==1)return[[0]];let n=new Array(e);for(let s=0;s<e;s++)s<2?n[s]=s:s%2==0?n[s]=e-s/2:n[s]=Math.floor(s/2)+1;let r=[n],i=n;for(let s=1;s<e;s+=1){let o=i.map(a=>(a+1)%e);r.push(o),i=o}if(t&&e%2>0)for(let s=0;s<e;s+=1)r.push(r[s].slice().reverse());return r}function gNe(e,t,n){let r=e.components;e.order==="random"?r=e.components.sort(()=>.5-Math.random()):e.order==="latinSquare"&&t&&(r=t[n].pop().map(i=>i.startsWith("_componentBlock")?e.components[+i.slice(15)]:i)),r=r.slice(0,e.numSamples);for(let i=0;i<r.length;i+=1){const s=r[i];if(typeof s!="string"&&!Array.isArray(s)){const o=e.components.indexOf(s);r[i]=gNe(s,t,`${n}-${o}`)}}return e.interruptions&&e.interruptions.forEach(i=>{const s=[];if(i.spacing!=="random")for(let o=0;o<r.length;o+=1)(o===i.firstLocation||o>i.firstLocation&&o%i.spacing===0)&&s.push(i.components),s.push(r[o]);if(i.spacing==="random"){const o=new Set;if(i.numInterruptions>r.length-1)throw new Error("Number of interruptions cannot be greater than the number of components");for(;o.size<i.numInterruptions;){const l=Math.floor(Math.random()*r.length-1)+1;o.add(l)}const a=Array.from(o).sort((l,c)=>l-c);let u=0;for(let l=0;l<r.length;l+=1)l===a[u]&&(s.push(i.components),u+=1),s.push(r[l])}r=s}),{id:e.id,orderPath:n,components:r.flat(),skip:e.skip}}function YRt(e,t){const n=E0(e);return gNe(n,t,"root")}function yNe(e,t,n,r=0){const i=n.length>0?`${n}-${r}`:"root";e.order==="latinSquare"&&t.push(i),e.components.forEach((s,o)=>{typeof s!="string"&&yNe(s,t,i,o)})}function KRt(e){const t=[];return yNe(e,t,"",0),t}function Vde(e,t){const n=t.split("-");let r={};n.forEach(o=>{o==="root"?r=e.sequence:r=r.components[+o]});const i=r.components.map((o,a)=>typeof o=="string"?o:`_componentBlock${a}`);return GRt(i.sort(()=>.5-Math.random()),!0)}function XRt(e){const n=KRt(e.sequence).map(s=>({[s]:Vde(e,s)})).reduce((s,o)=>({...s,...o}),{}),r=e.uiConfig.numSequences||1e3,i=[];return Array.from({length:r}).forEach(()=>{const s=YRt(e.sequence,n);s.components.push("end"),i.push(s),Object.entries(n).forEach(([o,a])=>{a.length===0&&(n[o]=Vde(e,o))})}),i}var QRt={VITE_BASE_PATH:"/study/",VITE_FIREBASE_CONFIG:`
{
  apiKey: "AIzaSyBR5snEuMQodNBn3tFkZ9VZtVha81rSiUs",
  authDomain: "mock-mqp.firebaseapp.com",
  projectId: "mock-mqp",
  storageBucket: "mock-mqp.appspot.com",
  messagingSenderId: "810459265279",
  appId: "1:810459265279:web:1f321cea4ef5376865f4ca",
  measurementId: "G-EFGFSXZL35"
}
`,VITE_STORAGE_ENGINE:"firebase",VITE_RECAPTCHAV3TOKEN:"6LfADT8qAAAAAAi4qNf-NQaCV0RXzIqKvBrxNjx2",BASE_URL:"/study/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};async function JRt(e){const t=await(await fetch(`${Vu}${e}`)).text();return kRt(t)}async function E4(e,t){const n=t.configsList.find(r=>Lwe(r)===e);if(n){const r=t.configs[n];return await JRt(`${r.path}`)}return null}async function ZRt(e){const t={},n=e.configsList.filter(i=>QRt.VITE_CI==="true"?!0:!e.configs[i].test).map(async i=>E4(i,e)),r=await Promise.all(n);return e.configsList.forEach((i,s)=>{t[i]=r[s]}),t}function eNt({globalConfig:e}){const t=Hb(),[n,r]=I.useState(null),i=e.configsList.includes(t);I.useEffect(()=>{E4(t,e).then(h=>{r(h)})},[e,t]);const[s,o]=I.useState([]),[a,u]=I.useState(null),{storageEngine:l}=Cs(),[c]=RY();I.useEffect(()=>{async function h(){if(!l||!n||!t)return;await l.initializeStudyDb(t,n),await l.getSequenceArray()||await l.setSequenceArray(await XRt(n));const m=n.uiConfig.urlParticipantIdParam&&c.get(n.uiConfig.urlParticipantIdParam)||void 0,g=Object.fromEntries(c.entries()),y=await fetch("https://api.ipify.org?format=json").catch(T=>""),v=y instanceof Response?await y.json():{ip:""},b={language:navigator.language,userAgent:navigator.userAgent,resolution:{width:window.screen.width,height:window.screen.height,availHeight:window.screen.availHeight,availWidth:window.screen.availWidth,colorDepth:window.screen.colorDepth,orientation:window.screen.orientation.type,pixelDepth:window.screen.pixelDepth},ip:v.ip},w=await l.initializeParticipantSession(t,g,n,b,m),E=await qot(t,n,w.sequence,b,w.answers);u(E),o([{element:_.jsx(WRt,{}),children:[{path:"/",element:_.jsx(kV,{to:"0",replace:!0})},{path:"/:index",element:n.errors.length>0?_.jsxs(_.Fragment,{children:[_.jsx(ui,{order:2,mb:8,children:"Error loading config"}),_.jsx(x7,{issues:n.errors,type:"error"})]}):_.jsx(FRt,{})}]}])}h()},[l,n,t,c]);const f=Iwe(s);let d=null;return i?s.length===0?d=_.jsx(Ll,{visible:!0}):d=f&&a?_.jsx(Oxe.Provider,{value:a,children:_.jsx(jst,{store:a.store,children:f})}):_.jsx(H1,{}):d=_.jsx(H1,{}),d}var Hde={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vNe=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=i&63|128):(i&64512)===55296&&r+1<e.length&&(e.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(e.charCodeAt(++r)&1023),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=i&63|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=i&63|128)}return t},tNt=function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=e[n++],o=e[n++],a=e[n++],u=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;t[r++]=String.fromCharCode(55296+(u>>10)),t[r++]=String.fromCharCode(56320+(u&1023))}else{const s=e[n++],o=e[n++];t[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return t.join("")},MJ={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const s=e[i],o=i+1<e.length,a=o?e[i+1]:0,u=i+2<e.length,l=u?e[i+2]:0,c=s>>2,f=(s&3)<<4|a>>4;let d=(a&15)<<2|l>>6,h=l&63;u||(h=64,o||(d=64)),r.push(n[c],n[f],n[d],n[h])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(vNe(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):tNt(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const s=n[e.charAt(i++)],a=i<e.length?n[e.charAt(i)]:0;++i;const l=i<e.length?n[e.charAt(i)]:64;++i;const f=i<e.length?n[e.charAt(i)]:64;if(++i,s==null||a==null||l==null||f==null)throw new nNt;const d=s<<2|a>>4;if(r.push(d),l!==64){const h=a<<4&240|l>>2;if(r.push(h),f!==64){const p=l<<6&192|f;r.push(p)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class nNt extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const rNt=function(e){const t=vNe(e);return MJ.encodeByteArray(t,!0)},H$=function(e){return rNt(e).replace(/\./g,"")},bNe=function(e){try{return MJ.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _Ne(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iNt=()=>_Ne().__FIREBASE_DEFAULTS__,sNt=()=>{if(typeof process>"u"||typeof Hde>"u")return;const e=Hde.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},oNt=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&bNe(e[1]);return t&&JSON.parse(t)},x4=()=>{try{return iNt()||sNt()||oNt()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},wNe=e=>{var t,n;return(n=(t=x4())===null||t===void 0?void 0:t.emulatorHosts)===null||n===void 0?void 0:n[e]},aNt=e=>{const t=wNe(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),r]:[t.substring(0,n),r]},ENe=()=>{var e;return(e=x4())===null||e===void 0?void 0:e.config},xNe=e=>{var t;return(t=x4())===null||t===void 0?void 0:t[`_${e}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mI{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uNt(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=t||"demo-project",i=e.iat||0,s=e.sub||e.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},e);return[H$(JSON.stringify(n)),H$(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fo(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function lNt(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Fo())}function cNt(){var e;const t=(e=x4())===null||e===void 0?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function fNt(){const e=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof e=="object"&&e.id!==void 0}function dNt(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function hNt(){const e=Fo();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function pNt(){return!cNt()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function LJ(){try{return typeof indexedDB=="object"}catch{return!1}}function mNt(){return new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;t(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){t(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gNt="FirebaseError";class np extends Error{constructor(t,n,r){super(n),this.code=t,this.customData=r,this.name=gNt,Object.setPrototypeOf(this,np.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,$S.prototype.create)}}class $S{constructor(t,n,r){this.service=t,this.serviceName=n,this.errors=r}create(t,...n){const r=n[0]||{},i=`${this.service}/${t}`,s=this.errors[t],o=s?yNt(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new np(i,a,r)}}function yNt(e,t){return e.replace(vNt,(n,r)=>{const i=t[r];return i!=null?String(i):`<${r}?>`})}const vNt=/\{\$([^}]+)}/g;function bNt(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function gI(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const s=e[i],o=t[i];if(qde(s)&&qde(o)){if(!gI(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function qde(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kk(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(i=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function _Nt(e,t){const n=new wNt(e,t);return n.subscribe.bind(n)}class wNt{constructor(t,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{t(this)}).catch(r=>{this.error(r)})}next(t){this.forEachObserver(n=>{n.next(t)})}error(t){this.forEachObserver(n=>{n.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,n,r){let i;if(t===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");ENt(t,["next","error","complete"])?i=t:i={next:t,error:n,complete:r},i.next===void 0&&(i.next=C9),i.error===void 0&&(i.error=C9),i.complete===void 0&&(i.complete=C9);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,t)}sendOne(t,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{n(this.observers[t])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function ENt(e,t){if(typeof e!="object"||e===null)return!1;for(const n of t)if(n in e&&typeof e[n]=="function")return!0;return!1}function C9(){}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xNt=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{const t=Math.random()*16|0;return(e==="x"?t:t&3|8).toString(16)})};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SNt=1e3,TNt=2,CNt=4*60*60*1e3,ANt=.5;function INt(e,t=SNt,n=TNt){const r=t*Math.pow(n,e),i=Math.round(ANt*r*(Math.random()-.5)*2);return Math.min(CNt,r+i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ii(e){return e&&e._delegate?e._delegate:e}class Oh{constructor(t,n,r){this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lv="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kNt{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const r=new mI;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){var n;const r=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),i=(n=t==null?void 0:t.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(NNt(t))try{this.getOrInitializeService({instanceIdentifier:Lv})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(t=Lv){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=Lv){return this.instances.has(t)}getOptions(t=Lv){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,r=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(t,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(t),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&t(o,i),()=>{s.delete(t)}}invokeOnInitCallbacks(t,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:RNt(t),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch{}return r||null}normalizeInstanceIdentifier(t=Lv){return this.component?this.component.multipleInstances?t:Lv:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function RNt(e){return e===Lv?void 0:e}function NNt(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DNt{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new kNt(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Gn;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(Gn||(Gn={}));const PNt={debug:Gn.DEBUG,verbose:Gn.VERBOSE,info:Gn.INFO,warn:Gn.WARN,error:Gn.ERROR,silent:Gn.SILENT},ONt=Gn.INFO,$Nt={[Gn.DEBUG]:"log",[Gn.VERBOSE]:"log",[Gn.INFO]:"info",[Gn.WARN]:"warn",[Gn.ERROR]:"error"},MNt=(e,t,...n)=>{if(t<e.logLevel)return;const r=new Date().toISOString(),i=$Nt[t];if(i)console[i](`[${r}]  ${e.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class S4{constructor(t){this.name=t,this._logLevel=ONt,this._logHandler=MNt,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Gn))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?PNt[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Gn.DEBUG,...t),this._logHandler(this,Gn.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Gn.VERBOSE,...t),this._logHandler(this,Gn.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Gn.INFO,...t),this._logHandler(this,Gn.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Gn.WARN,...t),this._logHandler(this,Gn.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Gn.ERROR,...t),this._logHandler(this,Gn.ERROR,...t)}}const LNt=(e,t)=>t.some(n=>e instanceof n);let Wde,Gde;function FNt(){return Wde||(Wde=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function jNt(){return Gde||(Gde=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const SNe=new WeakMap,RV=new WeakMap,TNe=new WeakMap,A9=new WeakMap,FJ=new WeakMap;function BNt(e){const t=new Promise((n,r)=>{const i=()=>{e.removeEventListener("success",s),e.removeEventListener("error",o)},s=()=>{n(A0(e.result)),i()},o=()=>{r(e.error),i()};e.addEventListener("success",s),e.addEventListener("error",o)});return t.then(n=>{n instanceof IDBCursor&&SNe.set(n,e)}).catch(()=>{}),FJ.set(t,e),t}function UNt(e){if(RV.has(e))return;const t=new Promise((n,r)=>{const i=()=>{e.removeEventListener("complete",s),e.removeEventListener("error",o),e.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(e.error||new DOMException("AbortError","AbortError")),i()};e.addEventListener("complete",s),e.addEventListener("error",o),e.addEventListener("abort",o)});RV.set(e,t)}let NV={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return RV.get(e);if(t==="objectStoreNames")return e.objectStoreNames||TNe.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return A0(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function zNt(e){NV=e(NV)}function VNt(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const r=e.call(I9(this),t,...n);return TNe.set(r,t.sort?t.sort():[t]),A0(r)}:jNt().includes(e)?function(...t){return e.apply(I9(this),t),A0(SNe.get(this))}:function(...t){return A0(e.apply(I9(this),t))}}function HNt(e){return typeof e=="function"?VNt(e):(e instanceof IDBTransaction&&UNt(e),LNt(e,FNt())?new Proxy(e,NV):e)}function A0(e){if(e instanceof IDBRequest)return BNt(e);if(A9.has(e))return A9.get(e);const t=HNt(e);return t!==e&&(A9.set(e,t),FJ.set(t,e)),t}const I9=e=>FJ.get(e);function qNt(e,t,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(e,t),a=A0(o);return r&&o.addEventListener("upgradeneeded",u=>{r(A0(o.result),u.oldVersion,u.newVersion,A0(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),a.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}const WNt=["get","getKey","getAll","getAllKeys","count"],GNt=["put","add","delete","clear"],k9=new Map;function Yde(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(k9.get(t))return k9.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=GNt.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||WNt.includes(n)))return;const s=async function(o,...a){const u=this.transaction(o,i?"readwrite":"readonly");let l=u.store;return r&&(l=l.index(a.shift())),(await Promise.all([l[n](...a),i&&u.done]))[0]};return k9.set(t,s),s}zNt(e=>({...e,get:(t,n,r)=>Yde(t,n)||e.get(t,n,r),has:(t,n)=>!!Yde(t,n)||e.has(t,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YNt{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(KNt(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function KNt(e){const t=e.getComponent();return(t==null?void 0:t.type)==="VERSION"}const DV="@firebase/app",Kde="0.10.5";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ib=new S4("@firebase/app"),XNt="@firebase/app-compat",QNt="@firebase/analytics-compat",JNt="@firebase/analytics",ZNt="@firebase/app-check-compat",eDt="@firebase/app-check",tDt="@firebase/auth",nDt="@firebase/auth-compat",rDt="@firebase/database",iDt="@firebase/database-compat",sDt="@firebase/functions",oDt="@firebase/functions-compat",aDt="@firebase/installations",uDt="@firebase/installations-compat",lDt="@firebase/messaging",cDt="@firebase/messaging-compat",fDt="@firebase/performance",dDt="@firebase/performance-compat",hDt="@firebase/remote-config",pDt="@firebase/remote-config-compat",mDt="@firebase/storage",gDt="@firebase/storage-compat",yDt="@firebase/firestore",vDt="@firebase/vertexai-preview",bDt="@firebase/firestore-compat",_Dt="firebase",wDt="10.12.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PV="[DEFAULT]",EDt={[DV]:"fire-core",[XNt]:"fire-core-compat",[JNt]:"fire-analytics",[QNt]:"fire-analytics-compat",[eDt]:"fire-app-check",[ZNt]:"fire-app-check-compat",[tDt]:"fire-auth",[nDt]:"fire-auth-compat",[rDt]:"fire-rtdb",[iDt]:"fire-rtdb-compat",[sDt]:"fire-fn",[oDt]:"fire-fn-compat",[aDt]:"fire-iid",[uDt]:"fire-iid-compat",[lDt]:"fire-fcm",[cDt]:"fire-fcm-compat",[fDt]:"fire-perf",[dDt]:"fire-perf-compat",[hDt]:"fire-rc",[pDt]:"fire-rc-compat",[mDt]:"fire-gcs",[gDt]:"fire-gcs-compat",[yDt]:"fire-fst",[bDt]:"fire-fst-compat",[vDt]:"fire-vertex","fire-js":"fire-js",[_Dt]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q$=new Map,xDt=new Map,OV=new Map;function Xde(e,t){try{e.container.addComponent(t)}catch(n){ib.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function $m(e){const t=e.name;if(OV.has(t))return ib.debug(`There were multiple attempts to register component ${t}.`),!1;OV.set(t,e);for(const n of q$.values())Xde(n,e);for(const n of xDt.values())Xde(n,e);return!0}function MS(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function rh(e){return e.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SDt={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},I0=new $S("app","Firebase",SDt);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TDt{constructor(t,n,r){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Oh("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw I0.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jb=wDt;function CNe(e,t={}){let n=e;typeof t!="object"&&(t={name:t});const r=Object.assign({name:PV,automaticDataCollectionEnabled:!1},t),i=r.name;if(typeof i!="string"||!i)throw I0.create("bad-app-name",{appName:String(i)});if(n||(n=ENe()),!n)throw I0.create("no-options");const s=q$.get(i);if(s){if(gI(n,s.options)&&gI(r,s.config))return s;throw I0.create("duplicate-app",{appName:i})}const o=new DNt(i);for(const u of OV.values())o.addComponent(u);const a=new TDt(n,r,o);return q$.set(i,a),a}function jJ(e=PV){const t=q$.get(e);if(!t&&e===PV&&ENe())return CNe();if(!t)throw I0.create("no-app",{appName:e});return t}function zf(e,t,n){var r;let i=(r=EDt[e])!==null&&r!==void 0?r:e;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=t.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${t}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${t}" contains illegal characters (whitespace or "/")`),ib.warn(a.join(" "));return}$m(new Oh(`${i}-version`,()=>({library:i,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CDt="firebase-heartbeat-database",ADt=1,yI="firebase-heartbeat-store";let R9=null;function ANe(){return R9||(R9=qNt(CDt,ADt,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(yI)}catch(n){console.warn(n)}}}}).catch(e=>{throw I0.create("idb-open",{originalErrorMessage:e.message})})),R9}async function IDt(e){try{const n=(await ANe()).transaction(yI),r=await n.objectStore(yI).get(INe(e));return await n.done,r}catch(t){if(t instanceof np)ib.warn(t.message);else{const n=I0.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});ib.warn(n.message)}}}async function Qde(e,t){try{const r=(await ANe()).transaction(yI,"readwrite");await r.objectStore(yI).put(t,INe(e)),await r.done}catch(n){if(n instanceof np)ib.warn(n.message);else{const r=I0.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});ib.warn(r.message)}}}function INe(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kDt=1024,RDt=30*24*60*60*1e3;class NDt{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new PDt(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var t,n;const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Jde();if(!(((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)))return this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=RDt}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var t;if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Jde(),{heartbeatsToSend:r,unsentEntries:i}=DDt(this._heartbeatsCache.heartbeats),s=H$(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}}function Jde(){return new Date().toISOString().substring(0,10)}function DDt(e,t=kDt){const n=[];let r=e.slice();for(const i of e){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),Zde(n)>t){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Zde(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class PDt{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return LJ()?mNt().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await IDt(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Qde(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Qde(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...t.heartbeats]})}else return}}function Zde(e){return H$(JSON.stringify({version:2,heartbeats:e})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ODt(e){$m(new Oh("platform-logger",t=>new YNt(t),"PRIVATE")),$m(new Oh("heartbeat",t=>new NDt(t),"PRIVATE")),zf(DV,Kde,e),zf(DV,Kde,"esm2017"),zf("fire-js","")}ODt("");function kNe(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const $Dt=kNe,RNe=new $S("auth","Firebase",kNe());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W$=new S4("@firebase/auth");function MDt(e,...t){W$.logLevel<=Gn.WARN&&W$.warn(`Auth (${Jb}): ${e}`,...t)}function FP(e,...t){W$.logLevel<=Gn.ERROR&&W$.error(`Auth (${Jb}): ${e}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $h(e,...t){throw UJ(e,...t)}function Vf(e,...t){return UJ(e,...t)}function BJ(e,t,n){const r=Object.assign(Object.assign({},$Dt()),{[t]:n});return new $S("auth","Firebase",r).create(t,{appName:e.name})}function k0(e){return BJ(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function LDt(e,t,n){const r=n;if(!(t instanceof r))throw r.name!==t.constructor.name&&$h(e,"argument-error"),BJ(e,"argument-error",`Type of ${t.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function UJ(e,...t){if(typeof e!="string"){const n=t[0],r=[...t.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(n,...r)}return RNe.create(e,...t)}function on(e,t,...n){if(!e)throw UJ(t,...n)}function Qp(e){const t="INTERNAL ASSERTION FAILED: "+e;throw FP(t),new Error(t)}function Mm(e,t){e||Qp(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $V(){var e;return typeof self<"u"&&((e=self.location)===null||e===void 0?void 0:e.href)||""}function FDt(){return ehe()==="http:"||ehe()==="https:"}function ehe(){var e;return typeof self<"u"&&((e=self.location)===null||e===void 0?void 0:e.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jDt(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(FDt()||fNt()||"connection"in navigator)?navigator.onLine:!0}function BDt(){if(typeof navigator>"u")return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xk{constructor(t,n){this.shortDelay=t,this.longDelay=n,Mm(n>t,"Short delay should be less than long delay!"),this.isMobile=lNt()||dNt()}get(){return jDt()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zJ(e,t){Mm(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NNe{static initialize(t,n,r){this.fetchImpl=t,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Qp("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Qp("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Qp("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UDt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zDt=new Xk(3e4,6e4);function T4(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function LS(e,t,n,r,i={}){return DNe(e,i,async()=>{let s={},o={};r&&(t==="GET"?o=r:s={body:JSON.stringify(r)});const a=Kk(Object.assign({key:e.config.apiKey},o)).slice(1),u=await e._getAdditionalHeaders();return u["Content-Type"]="application/json",e.languageCode&&(u["X-Firebase-Locale"]=e.languageCode),NNe.fetch()(ONe(e,e.config.apiHost,n,a),Object.assign({method:t,headers:u,referrerPolicy:"no-referrer"},s))})}async function DNe(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},UDt),t);try{const i=new VDt(e),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw dD(e,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[u,l]=a.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw dD(e,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw dD(e,"email-already-in-use",o);if(u==="USER_DISABLED")throw dD(e,"user-disabled",o);const c=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw BJ(e,c,l);$h(e,c)}}catch(i){if(i instanceof np)throw i;$h(e,"network-request-failed",{message:String(i)})}}async function PNe(e,t,n,r,i={}){const s=await LS(e,t,n,r,i);return"mfaPendingCredential"in s&&$h(e,"multi-factor-auth-required",{_serverResponse:s}),s}function ONe(e,t,n,r){const i=`${t}${n}?${r}`;return e.config.emulator?zJ(e.config,i):`${e.config.apiScheme}://${i}`}class VDt{constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Vf(this.auth,"network-request-failed")),zDt.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function dD(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Vf(e,t,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HDt(e,t){return LS(e,"POST","/v1/accounts:delete",t)}async function $Ne(e,t){return LS(e,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VC(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function qDt(e,t=!1){const n=ii(e),r=await n.getIdToken(t),i=VJ(r);on(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:VC(N9(i.auth_time)),issuedAtTime:VC(N9(i.iat)),expirationTime:VC(N9(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function N9(e){return Number(e)*1e3}function VJ(e){const[t,n,r]=e.split(".");if(t===void 0||n===void 0||r===void 0)return FP("JWT malformed, contained fewer than 3 sections"),null;try{const i=bNe(n);return i?JSON.parse(i):(FP("Failed to decode base64 JWT payload"),null)}catch(i){return FP("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function the(e){const t=VJ(e);return on(t,"internal-error"),on(typeof t.exp<"u","internal-error"),on(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vI(e,t,n=!1){if(n)return t;try{return await t}catch(r){throw r instanceof np&&WDt(r)&&e.auth.currentUser===e&&await e.auth.signOut(),r}}function WDt({code:e}){return e==="auth/user-disabled"||e==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GDt{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){var n;if(t){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(t=!1){if(!this.isRunning)return;const n=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){(t==null?void 0:t.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MV{constructor(t,n){this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=VC(this.lastLoginAt),this.creationTime=VC(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function G$(e){var t;const n=e.auth,r=await e.getIdToken(),i=await vI(e,$Ne(n,{idToken:r}));on(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];e._notifyReloadListener(s);const o=!((t=s.providerUserInfo)===null||t===void 0)&&t.length?MNe(s.providerUserInfo):[],a=KDt(e.providerData,o),u=e.isAnonymous,l=!(e.email&&s.passwordHash)&&!(a!=null&&a.length),c=u?l:!1,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new MV(s.createdAt,s.lastLoginAt),isAnonymous:c};Object.assign(e,f)}async function YDt(e){const t=ii(e);await G$(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function KDt(e,t){return[...e.filter(r=>!t.some(i=>i.providerId===r.providerId)),...t]}function MNe(e){return e.map(t=>{var{providerId:n}=t,r=sk(t,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XDt(e,t){const n=await DNe(e,{},async()=>{const r=Kk({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:i,apiKey:s}=e.config,o=ONe(e,i,"/v1/token",`key=${s}`),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",NNe.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function QDt(e,t){return LS(e,"POST","/v2/accounts:revokeToken",T4(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hE{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){on(t.idToken,"internal-error"),on(typeof t.idToken<"u","internal-error"),on(typeof t.refreshToken<"u","internal-error");const n="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):the(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,n)}updateFromIdToken(t){on(t.length!==0,"internal-error");const n=the(t);this.updateTokensAndExpiration(t,null,n)}async getToken(t,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(on(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await XDt(t,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(t,n,r){this.refreshToken=n||null,this.accessToken=t||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(t,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new hE;return r&&(on(typeof r=="string","internal-error",{appName:t}),o.refreshToken=r),i&&(on(typeof i=="string","internal-error",{appName:t}),o.accessToken=i),s&&(on(typeof s=="number","internal-error",{appName:t}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new hE,this.toJSON())}_performRefresh(){return Qp("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wg(e,t){on(typeof e=="string"||typeof e>"u","internal-error",{appName:t})}class Jp{constructor(t){var{uid:n,auth:r,stsTokenManager:i}=t,s=sk(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new GDt(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new MV(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(t){const n=await vI(this,this.stsTokenManager.getToken(this.auth,t));return on(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(t){return qDt(this,t)}reload(){return YDt(this)}_assign(t){this!==t&&(on(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(n=>Object.assign({},n)),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const n=new Jp(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(t){on(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,n=!1){let r=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),n&&await G$(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(rh(this.auth.app))return Promise.reject(k0(this.auth));const t=await this.getIdToken();return await vI(this,HDt(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>Object.assign({},t)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,n){var r,i,s,o,a,u,l,c;const f=(r=n.displayName)!==null&&r!==void 0?r:void 0,d=(i=n.email)!==null&&i!==void 0?i:void 0,h=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,p=(o=n.photoURL)!==null&&o!==void 0?o:void 0,m=(a=n.tenantId)!==null&&a!==void 0?a:void 0,g=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,y=(l=n.createdAt)!==null&&l!==void 0?l:void 0,v=(c=n.lastLoginAt)!==null&&c!==void 0?c:void 0,{uid:b,emailVerified:w,isAnonymous:E,providerData:T,stsTokenManager:S}=n;on(b&&S,t,"internal-error");const C=hE.fromJSON(this.name,S);on(typeof b=="string",t,"internal-error"),wg(f,t.name),wg(d,t.name),on(typeof w=="boolean",t,"internal-error"),on(typeof E=="boolean",t,"internal-error"),wg(h,t.name),wg(p,t.name),wg(m,t.name),wg(g,t.name),wg(y,t.name),wg(v,t.name);const A=new Jp({uid:b,auth:t,email:d,emailVerified:w,displayName:f,isAnonymous:E,photoURL:p,phoneNumber:h,tenantId:m,stsTokenManager:C,createdAt:y,lastLoginAt:v});return T&&Array.isArray(T)&&(A.providerData=T.map(k=>Object.assign({},k))),g&&(A._redirectEventId=g),A}static async _fromIdTokenResponse(t,n,r=!1){const i=new hE;i.updateFromServerResponse(n);const s=new Jp({uid:n.localId,auth:t,stsTokenManager:i,isAnonymous:r});return await G$(s),s}static async _fromGetAccountInfoResponse(t,n,r){const i=n.users[0];on(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?MNe(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),a=new hE;a.updateFromIdToken(r);const u=new Jp({uid:i.localId,auth:t,stsTokenManager:a,isAnonymous:o}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new MV(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(u,l),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nhe=new Map;function Zp(e){Mm(e instanceof Function,"Expected a class definition");let t=nhe.get(e);return t?(Mm(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,nhe.set(e,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LNe{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,n){this.storage[t]=n}async _get(t){const n=this.storage[t];return n===void 0?null:n}async _remove(t){delete this.storage[t]}_addListener(t,n){}_removeListener(t,n){}}LNe.type="NONE";const rhe=LNe;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jP(e,t,n){return`firebase:${e}:${t}:${n}`}class pE{constructor(t,n,r){this.persistence=t,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=jP(this.userKey,i.apiKey,s),this.fullPersistenceKey=jP("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);return t?Jp._fromJSON(this.auth,t):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,n,r="authUser"){if(!n.length)return new pE(Zp(rhe),t,r);const i=(await Promise.all(n.map(async l=>{if(await l._isAvailable())return l}))).filter(l=>l);let s=i[0]||Zp(rhe);const o=jP(r,t.config.apiKey,t.name);let a=null;for(const l of n)try{const c=await l._get(o);if(c){const f=Jp._fromJSON(t,c);l!==s&&(a=f),s=l;break}}catch{}const u=i.filter(l=>l._shouldAllowMigration);return!s._shouldAllowMigration||!u.length?new pE(s,t,r):(s=u[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async l=>{if(l!==s)try{await l._remove(o)}catch{}})),new pE(s,t,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ihe(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(BNe(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(FNe(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(zNe(t))return"Blackberry";if(VNe(t))return"Webos";if(HJ(t))return"Safari";if((t.includes("chrome/")||jNe(t))&&!t.includes("edge/"))return"Chrome";if(UNe(t))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=e.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function FNe(e=Fo()){return/firefox\//i.test(e)}function HJ(e=Fo()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function jNe(e=Fo()){return/crios\//i.test(e)}function BNe(e=Fo()){return/iemobile/i.test(e)}function UNe(e=Fo()){return/android/i.test(e)}function zNe(e=Fo()){return/blackberry/i.test(e)}function VNe(e=Fo()){return/webos/i.test(e)}function C4(e=Fo()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function JDt(e=Fo()){var t;return C4(e)&&!!(!((t=window.navigator)===null||t===void 0)&&t.standalone)}function ZDt(){return hNt()&&document.documentMode===10}function HNe(e=Fo()){return C4(e)||UNe(e)||VNe(e)||zNe(e)||/windows phone/i.test(e)||BNe(e)}function ePt(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qNe(e,t=[]){let n;switch(e){case"Browser":n=ihe(Fo());break;case"Worker":n=`${ihe(Fo())}-${e}`;break;default:n=e}const r=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${Jb}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tPt{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,n){const r=s=>new Promise((o,a)=>{try{const u=t(s);o(u)}catch(u){a(u)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const n=[];try{for(const r of this.queue)await r(t),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nPt(e,t={}){return LS(e,"GET","/v2/passwordPolicy",T4(e,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rPt=6;class iPt{constructor(t){var n,r,i,s;const o=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:rPt,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=t.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=t.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=t.schemaVersion}validatePassword(t){var n,r,i,s,o,a;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,u),this.validatePasswordCharacterOptions(t,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(s=u.containsUppercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(a=u.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),u}validatePasswordLengthOptions(t,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=t.length>=r),i&&(n.meetsMaxPasswordLength=t.length<=i)}validatePasswordCharacterOptions(t,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<t.length;i++)r=t.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(t,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sPt{constructor(t,n,r,i){this.app=t,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new she(this),this.idTokenSubscription=new she(this),this.beforeStateQueue=new tPt(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=RNe,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(t,n){return n&&(this._popupRedirectResolver=Zp(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await pE.create(this,t),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const n=await $Ne(this,{idToken:t}),r=await Jp._fromGetAccountInfoResponse(this,n,t);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){var n;if(rh(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,u=await this.tryRedirectSignIn(t);(!o||o===a)&&(u!=null&&u.user)&&(i=u.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return on(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(t){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(t){try{await G$(t)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=BDt()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(rh(this.app))return Promise.reject(k0(this));const n=t?ii(t):null;return n&&on(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(t,n=!1){if(!this._deleted)return t&&on(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return rh(this.app)?Promise.reject(k0(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return rh(this.app)?Promise.reject(k0(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Zp(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await nPt(this),n=new iPt(t);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(t){this._errorFactory=new $S("auth","Firebase",t())}onAuthStateChanged(t,n,r){return this.registerStateListener(this.authStateSubscription,t,n,r)}beforeAuthStateChanged(t,n){return this.beforeStateQueue.pushCallback(t,n)}onIdTokenChanged(t,n,r){return this.registerStateListener(this.idTokenSubscription,t,n,r)}authStateReady(){return new Promise((t,n)=>{if(this.currentUser)t();else{const r=this.onAuthStateChanged(()=>{r(),t()},n)}})}async revokeAccessToken(t){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await QDt(this,r)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)===null||t===void 0?void 0:t.toJSON()}}async _setRedirectUser(t,n){const r=await this.getOrInitRedirectPersistenceManager(n);return t===null?r.removeCurrentUser():r.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const n=t&&Zp(t)||this._popupRedirectResolver;on(n,this,"argument-error"),this.redirectPersistenceManager=await pE.create(this,[Zp(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===t?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(t=this.currentUser)===null||t===void 0?void 0:t.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(on(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const u=t.addObserver(n,r,i);return()=>{o=!0,u()}}else{const u=t.addObserver(n);return()=>{o=!0,u()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return on(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=qNe(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var t;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((t=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var t;const n=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getToken());return n!=null&&n.error&&MDt(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Qk(e){return ii(e)}class she{constructor(t){this.auth=t,this.observer=null,this.addObserver=_Nt(n=>this.observer=n)}get next(){return on(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qJ={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function oPt(e){qJ=e}function aPt(e){return qJ.loadJS(e)}function uPt(){return qJ.gapiScript}function lPt(e){return`__${e}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cPt(e,t){const n=MS(e,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(gI(s,t??{}))return i;$h(i,"already-initialized")}return n.initialize({options:t})}function fPt(e,t){const n=(t==null?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Zp);t!=null&&t.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,t==null?void 0:t.popupRedirectResolver)}function dPt(e,t,n){const r=Qk(e);on(r._canInitEmulator,r,"emulator-config-failed"),on(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!1,s=WNe(t),{host:o,port:a}=hPt(t),u=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${u}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),pPt()}function WNe(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function hPt(e){const t=WNe(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:ohe(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:ohe(o)}}}function ohe(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}function pPt(){function e(){const t=document.createElement("p"),n=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",e):e())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GNe{constructor(t,n){this.providerId=t,this.signInMethod=n}toJSON(){return Qp("not implemented")}_getIdTokenResponse(t){return Qp("not implemented")}_linkToIdToken(t,n){return Qp("not implemented")}_getReauthenticationResolver(t){return Qp("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mE(e,t){return PNe(e,"POST","/v1/accounts:signInWithIdp",T4(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mPt="http://localhost";class sb extends GNe{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const n=new sb(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(n.idToken=t.idToken),t.accessToken&&(n.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(n.nonce=t.nonce),t.pendingToken&&(n.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(n.accessToken=t.oauthToken,n.secret=t.oauthTokenSecret):$h("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t,{providerId:r,signInMethod:i}=n,s=sk(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new sb(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(t){const n=this.buildRequest();return mE(t,n)}_linkToIdToken(t,n){const r=this.buildRequest();return r.idToken=n,mE(t,r)}_getReauthenticationResolver(t){const n=this.buildRequest();return n.autoCreate=!1,mE(t,n)}buildRequest(){const t={requestUri:mPt,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),t.postBody=Kk(n)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WJ{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jk extends WJ{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hg extends Jk{constructor(){super("facebook.com")}static credential(t){return sb._fromParams({providerId:Hg.PROVIDER_ID,signInMethod:Hg.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Hg.credentialFromTaggedObject(t)}static credentialFromError(t){return Hg.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Hg.credential(t.oauthAccessToken)}catch{return null}}}Hg.FACEBOOK_SIGN_IN_METHOD="facebook.com";Hg.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vp extends Jk{constructor(){super("google.com"),this.addScope("profile")}static credential(t,n){return sb._fromParams({providerId:Vp.PROVIDER_ID,signInMethod:Vp.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:n})}static credentialFromResult(t){return Vp.credentialFromTaggedObject(t)}static credentialFromError(t){return Vp.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return Vp.credential(n,r)}catch{return null}}}Vp.GOOGLE_SIGN_IN_METHOD="google.com";Vp.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qg extends Jk{constructor(){super("github.com")}static credential(t){return sb._fromParams({providerId:qg.PROVIDER_ID,signInMethod:qg.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return qg.credentialFromTaggedObject(t)}static credentialFromError(t){return qg.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return qg.credential(t.oauthAccessToken)}catch{return null}}}qg.GITHUB_SIGN_IN_METHOD="github.com";qg.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wg extends Jk{constructor(){super("twitter.com")}static credential(t,n){return sb._fromParams({providerId:Wg.PROVIDER_ID,signInMethod:Wg.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:n})}static credentialFromResult(t){return Wg.credentialFromTaggedObject(t)}static credentialFromError(t){return Wg.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return Wg.credential(n,r)}catch{return null}}}Wg.TWITTER_SIGN_IN_METHOD="twitter.com";Wg.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gPt(e,t){return PNe(e,"POST","/v1/accounts:signUp",T4(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ay{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,n,r,i=!1){const s=await Jp._fromIdTokenResponse(t,r,i),o=ahe(r);return new ay({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(t,n,r){await t._updateTokensIfNecessary(r,!0);const i=ahe(r);return new ay({user:t,providerId:i,_tokenResponse:r,operationType:n})}}function ahe(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yPt(e){var t;if(rh(e.app))return Promise.reject(k0(e));const n=Qk(e);if(await n._initializationPromise,!((t=n.currentUser)===null||t===void 0)&&t.isAnonymous)return new ay({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await gPt(n,{returnSecureToken:!0}),i=await ay._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y$ extends np{constructor(t,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Y$.prototype),this.customData={appName:t.name,tenantId:(s=t.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(t,n,r,i){return new Y$(t,n,r,i)}}function YNe(e,t,n,r){return(t==="reauthenticate"?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Y$._fromErrorAndOperation(e,s,t,r):s})}async function vPt(e,t,n=!1){const r=await vI(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return ay._forOperation(e,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bPt(e,t,n=!1){const{auth:r}=e;if(rh(r.app))return Promise.reject(k0(r));const i="reauthenticate";try{const s=await vI(e,YNe(r,i,t,e),n);on(s.idToken,r,"internal-error");const o=VJ(s.idToken);on(o,r,"internal-error");const{sub:a}=o;return on(e.uid===a,r,"user-mismatch"),ay._forOperation(e,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&$h(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _Pt(e,t,n=!1){if(rh(e.app))return Promise.reject(k0(e));const r="signIn",i=await YNe(e,r,t),s=await ay._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(s.user),s}function wPt(e,t,n,r){return ii(e).onIdTokenChanged(t,n,r)}function EPt(e,t,n){return ii(e).beforeAuthStateChanged(t,n)}function xPt(e,t,n,r){return ii(e).onAuthStateChanged(t,n,r)}function SPt(e){return ii(e).signOut()}const K$="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KNe{constructor(t,n){this.storageRetriever=t,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(K$,"1"),this.storage.removeItem(K$),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,n){return this.storage.setItem(t,JSON.stringify(n)),Promise.resolve()}_get(t){const n=this.storage.getItem(t);return Promise.resolve(n?JSON.parse(n):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TPt(){const e=Fo();return HJ(e)||C4(e)}const CPt=1e3,APt=10;class XNe extends KNe{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,n)=>this.onStorageEvent(t,n),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=TPt()&&ePt(),this.fallbackToPolling=HNe(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&t(n,i,r)}}onStorageEvent(t,n=!1){if(!t.key){this.forAllChangedKeys((o,a,u)=>{this.notifyListeners(o,u)});return}const r=t.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const o=this.storage.getItem(r);if(t.newValue!==o)t.newValue!==null?this.storage.setItem(r,t.newValue):this.storage.removeItem(r);else if(this.localCache[r]===t.newValue&&!n)return}const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);ZDt()&&s!==t.newValue&&t.newValue!==t.oldValue?setTimeout(i,APt):i()}notifyListeners(t,n){this.localCache[t]=n;const r=this.listeners[t];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)})},CPt)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,n){await super._set(t,n),this.localCache[t]=JSON.stringify(n)}async _get(t){const n=await super._get(t);return this.localCache[t]=JSON.stringify(n),n}async _remove(t){await super._remove(t),delete this.localCache[t]}}XNe.type="LOCAL";const IPt=XNe;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QNe extends KNe{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,n){}_removeListener(t,n){}}QNe.type="SESSION";const JNe=QNe;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kPt(e){return Promise.all(e.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A4{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const n=this.receivers.find(i=>i.isListeningto(t));if(n)return n;const r=new A4(t);return this.receivers.push(r),r}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const n=t,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async l=>l(n.origin,s)),u=await kPt(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:u})}_subscribe(t,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(n)}_unsubscribe(t,n){this.handlersMap[t]&&n&&this.handlersMap[t].delete(n),(!n||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}A4.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GJ(e="",t=10){let n="";for(let r=0;r<t;r++)n+=Math.floor(Math.random()*10);return e+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RPt{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,u)=>{const l=GJ("",20);i.port1.start();const c=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(f){const d=f;if(d.data.eventId===l)switch(d.data.status){case"ack":clearTimeout(c),s=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(d.data.response);break;default:clearTimeout(c),clearTimeout(s),u(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:t,eventId:l,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yh(){return window}function NPt(e){yh().location.href=e}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZNe(){return typeof yh().WorkerGlobalScope<"u"&&typeof yh().importScripts=="function"}async function DPt(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function PPt(){var e;return((e=navigator==null?void 0:navigator.serviceWorker)===null||e===void 0?void 0:e.controller)||null}function OPt(){return ZNe()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eDe="firebaseLocalStorageDb",$Pt=1,X$="firebaseLocalStorage",tDe="fbase_key";class Zk{constructor(t){this.request=t}toPromise(){return new Promise((t,n)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function I4(e,t){return e.transaction([X$],t?"readwrite":"readonly").objectStore(X$)}function MPt(){const e=indexedDB.deleteDatabase(eDe);return new Zk(e).toPromise()}function LV(){const e=indexedDB.open(eDe,$Pt);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const r=e.result;try{r.createObjectStore(X$,{keyPath:tDe})}catch(i){n(i)}}),e.addEventListener("success",async()=>{const r=e.result;r.objectStoreNames.contains(X$)?t(r):(r.close(),await MPt(),t(await LV()))})})}async function uhe(e,t,n){const r=I4(e,!0).put({[tDe]:t,value:n});return new Zk(r).toPromise()}async function LPt(e,t){const n=I4(e,!1).get(t),r=await new Zk(n).toPromise();return r===void 0?null:r.value}function lhe(e,t){const n=I4(e,!0).delete(t);return new Zk(n).toPromise()}const FPt=800,jPt=3;class nDe{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await LV(),this.db)}async _withRetries(t){let n=0;for(;;)try{const r=await this._openDb();return await t(r)}catch(r){if(n++>jPt)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return ZNe()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=A4._getInstance(OPt()),this.receiver._subscribe("keyChanged",async(t,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(t,n)=>["keyChanged"])}async initializeSender(){var t,n;if(this.activeServiceWorker=await DPt(),!this.activeServiceWorker)return;this.sender=new RPt(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((t=r[0])===null||t===void 0)&&t.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||PPt()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await LV();return await uhe(t,K$,"1"),await lhe(t,K$),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>uhe(r,t,n)),this.localCache[t]=n,this.notifyServiceWorker(t)))}async _get(t){const n=await this._withRetries(r=>LPt(r,t));return this.localCache[t]=n,n}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(n=>lhe(n,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(i=>{const s=I4(i,!1).getAll();return new Zk(s).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(t.length!==0)for(const{fbase_key:i,value:s}of t)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(t,n){this.localCache[t]=n;const r=this.listeners[t];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),FPt)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}nDe.type="LOCAL";const BPt=nDe;new Xk(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rDe(e,t){return t?Zp(t):(on(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YJ extends GNe{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return mE(t,this._buildIdpRequest())}_linkToIdToken(t,n){return mE(t,this._buildIdpRequest(n))}_getReauthenticationResolver(t){return mE(t,this._buildIdpRequest())}_buildIdpRequest(t){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(n.idToken=t),n}}function UPt(e){return _Pt(e.auth,new YJ(e),e.bypassAuthState)}function zPt(e){const{auth:t,user:n}=e;return on(n,t,"internal-error"),bPt(n,new YJ(e),e.bypassAuthState)}async function VPt(e){const{auth:t,user:n}=e;return on(n,t,"internal-error"),vPt(n,new YJ(e),e.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iDe{constructor(t,n,r,i,s=!1){this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(t,n)=>{this.pendingPromise={resolve:t,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(t){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=t;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(u))}catch(l){this.reject(l)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return UPt;case"linkViaPopup":case"linkViaRedirect":return VPt;case"reauthViaPopup":case"reauthViaRedirect":return zPt;default:$h(this.auth,"internal-error")}}resolve(t){Mm(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){Mm(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HPt=new Xk(2e3,1e4);async function qPt(e,t,n){if(rh(e.app))return Promise.reject(Vf(e,"operation-not-supported-in-this-environment"));const r=Qk(e);LDt(e,t,WJ);const i=rDe(r,n);return new g1(r,"signInViaPopup",t,i).executeNotNull()}class g1 extends iDe{constructor(t,n,r,i,s){super(t,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,g1.currentPopupAction&&g1.currentPopupAction.cancel(),g1.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return on(t,this.auth,"internal-error"),t}async onExecution(){Mm(this.filter.length===1,"Popup operations only handle one event");const t=GJ();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Vf(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)===null||t===void 0?void 0:t.associatedEvent)||null}cancel(){this.reject(Vf(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,g1.currentPopupAction=null}pollUserCancellation(){const t=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Vf(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,HPt.get())};t()}}g1.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WPt="pendingRedirect",BP=new Map;class GPt extends iDe{constructor(t,n,r=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let t=BP.get(this.auth._key());if(!t){try{const r=await YPt(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(r)}catch(n){t=()=>Promise.reject(n)}BP.set(this.auth._key(),t)}return this.bypassAuthState||BP.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const n=await this.auth._redirectUserForId(t.eventId);if(n)return this.user=n,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function YPt(e,t){const n=QPt(t),r=XPt(e);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function KPt(e,t){BP.set(e._key(),t)}function XPt(e){return Zp(e._redirectPersistence)}function QPt(e){return jP(WPt,e.config.apiKey,e.name)}async function JPt(e,t,n=!1){if(rh(e.app))return Promise.reject(k0(e));const r=Qk(e),i=rDe(r,t),o=await new GPt(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,t)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZPt=10*60*1e3;class eOt{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(t,r)&&(n=!0,this.sendToConsumer(t,r),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!tOt(t)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=t,n=!0)),n}sendToConsumer(t,n){var r;if(t.error&&!sDe(t)){const i=((r=t.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Vf(this.auth,i))}else n.onAuthEvent(t)}isEventForConsumer(t,n){const r=n.eventId===null||!!t.eventId&&t.eventId===n.eventId;return n.filter.includes(t.type)&&r}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=ZPt&&this.cachedEventUids.clear(),this.cachedEventUids.has(che(t))}saveEventToCache(t){this.cachedEventUids.add(che(t)),this.lastProcessedEventTime=Date.now()}}function che(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(t=>t).join("-")}function sDe({type:e,error:t}){return e==="unknown"&&(t==null?void 0:t.code)==="auth/no-auth-event"}function tOt(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return sDe(e);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nOt(e,t={}){return LS(e,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rOt=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,iOt=/^https?/;async function sOt(e){if(e.config.emulator)return;const{authorizedDomains:t}=await nOt(e);for(const n of t)try{if(oOt(n))return}catch{}$h(e,"unauthorized-domain")}function oOt(e){const t=$V(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const o=new URL(e);return o.hostname===""&&r===""?n==="chrome-extension:"&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!iOt.test(n))return!1;if(rOt.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aOt=new Xk(3e4,6e4);function fhe(){const e=yh().___jsl;if(e!=null&&e.H){for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}}function uOt(e){return new Promise((t,n)=>{var r,i,s;function o(){fhe(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{fhe(),n(Vf(e,"network-request-failed"))},timeout:aOt.get()})}if(!((i=(r=yh().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)t(gapi.iframes.getContext());else if(!((s=yh().gapi)===null||s===void 0)&&s.load)o();else{const a=lPt("iframefcb");return yh()[a]=()=>{gapi.load?o():n(Vf(e,"network-request-failed"))},aPt(`${uPt()}?onload=${a}`).catch(u=>n(u))}}).catch(t=>{throw UP=null,t})}let UP=null;function lOt(e){return UP=UP||uOt(e),UP}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cOt=new Xk(5e3,15e3),fOt="__/auth/iframe",dOt="emulator/auth/iframe",hOt={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},pOt=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function mOt(e){const t=e.config;on(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?zJ(t,dOt):`https://${e.config.authDomain}/${fOt}`,r={apiKey:t.apiKey,appName:e.name,v:Jb},i=pOt.get(e.config.apiHost);i&&(r.eid=i);const s=e._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${Kk(r).slice(1)}`}async function gOt(e){const t=await lOt(e),n=yh().gapi;return on(n,e,"internal-error"),t.open({where:document.body,url:mOt(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:hOt,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=Vf(e,"network-request-failed"),a=yh().setTimeout(()=>{s(o)},cOt.get());function u(){yh().clearTimeout(a),i(r)}r.ping(u).then(u,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yOt={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},vOt=500,bOt=600,_Ot="_blank",wOt="http://localhost";class dhe{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function EOt(e,t,n,r=vOt,i=bOt){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const u=Object.assign(Object.assign({},yOt),{width:r.toString(),height:i.toString(),top:s,left:o}),l=Fo().toLowerCase();n&&(a=jNe(l)?_Ot:n),FNe(l)&&(t=t||wOt,u.scrollbars="yes");const c=Object.entries(u).reduce((d,[h,p])=>`${d}${h}=${p},`,"");if(JDt(l)&&a!=="_self")return xOt(t||"",a),new dhe(null);const f=window.open(t||"",a,c);on(f,e,"popup-blocked");try{f.focus()}catch{}return new dhe(f)}function xOt(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SOt="__/auth/handler",TOt="emulator/auth/handler",COt=encodeURIComponent("fac");async function hhe(e,t,n,r,i,s){on(e.config.authDomain,e,"auth-domain-config-required"),on(e.config.apiKey,e,"invalid-api-key");const o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:Jb,eventId:i};if(t instanceof WJ){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",bNt(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(const[c,f]of Object.entries({}))o[c]=f}if(t instanceof Jk){const c=t.getScopes().filter(f=>f!=="");c.length>0&&(o.scopes=c.join(","))}e.tenantId&&(o.tid=e.tenantId);const a=o;for(const c of Object.keys(a))a[c]===void 0&&delete a[c];const u=await e._getAppCheckToken(),l=u?`#${COt}=${encodeURIComponent(u)}`:"";return`${AOt(e)}?${Kk(a).slice(1)}${l}`}function AOt({config:e}){return e.emulator?zJ(e,TOt):`https://${e.authDomain}/${SOt}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D9="webStorageSupport";class IOt{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=JNe,this._completeRedirectFn=JPt,this._overrideRedirectResult=KPt}async _openPopup(t,n,r,i){var s;Mm((s=this.eventManagers[t._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await hhe(t,n,r,$V(),i);return EOt(t,o,GJ())}async _openRedirect(t,n,r,i){await this._originValidation(t);const s=await hhe(t,n,r,$V(),i);return NPt(s),new Promise(()=>{})}_initialize(t){const n=t._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(Mm(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(t);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(t){const n=await gOt(t),r=new eOt(t);return n.register("authEvent",i=>(on(i==null?void 0:i.authEvent,t,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,r}_isIframeWebStorageSupported(t,n){this.iframes[t._key()].send(D9,{type:D9},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[D9];o!==void 0&&n(!!o),$h(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const n=t._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=sOt(t)),this.originValidationPromises[n]}get _shouldInitProactively(){return HNe()||HJ()||C4()}}const oDe=IOt;var phe="@firebase/auth",mhe="1.7.4";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kOt{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)===null||t===void 0?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const n=this.auth.onIdTokenChanged(r=>{t((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(t,n),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const n=this.internalListeners.get(t);n&&(this.internalListeners.delete(t),n(),this.updateProactiveRefresh())}assertAuthConfigured(){on(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ROt(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function NOt(e){$m(new Oh("auth",(t,{options:n})=>{const r=t.getProvider("app").getImmediate(),i=t.getProvider("heartbeat"),s=t.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;on(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:o,authDomain:a,clientPlatform:e,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:qNe(e)},l=new sPt(r,i,s,u);return fPt(l,n),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,n,r)=>{t.getProvider("auth-internal").initialize()})),$m(new Oh("auth-internal",t=>{const n=Qk(t.getProvider("auth").getImmediate());return(r=>new kOt(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),zf(phe,mhe,ROt(e)),zf(phe,mhe,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DOt=5*60,POt=xNe("authIdTokenMaxAge")||DOt;let ghe=null;const OOt=e=>async t=>{const n=t&&await t.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>POt)return;const i=n==null?void 0:n.token;ghe!==i&&(ghe=i,await fetch(e,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function Q$(e=jJ()){const t=MS(e,"auth");if(t.isInitialized())return t.getImmediate();const n=cPt(e,{popupRedirectResolver:oDe,persistence:[BPt,IPt,JNe]}),r=xNe("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=OOt(s.toString());EPt(n,o,()=>o(n.currentUser)),wPt(n,a=>o(a))}}const i=wNe("auth");return i&&dPt(n,`http://${i}`),n}function $Ot(){var e,t;return(t=(e=document.getElementsByTagName("head"))===null||e===void 0?void 0:e[0])!==null&&t!==void 0?t:document}oPt({loadJS(e){return new Promise((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=i=>{const s=Vf("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",$Ot().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});NOt("Browser");var MOt="firebase",LOt="10.12.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */zf(MOt,LOt,"app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aDe="firebasestorage.googleapis.com",uDe="storageBucket",FOt=2*60*1e3,jOt=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ji extends np{constructor(t,n,r=0){super(P9(t),`Firebase Storage: ${n} (${P9(t)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Ji.prototype)}get status(){return this.status_}set status(t){this.status_=t}_codeEquals(t){return P9(t)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(t){this.customData.serverResponse=t,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Qi;(function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Qi||(Qi={}));function P9(e){return"storage/"+e}function KJ(){const e="An unknown error occurred, please check the error payload for server response.";return new Ji(Qi.UNKNOWN,e)}function BOt(e){return new Ji(Qi.OBJECT_NOT_FOUND,"Object '"+e+"' does not exist.")}function UOt(e){return new Ji(Qi.QUOTA_EXCEEDED,"Quota for bucket '"+e+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function zOt(){const e="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Ji(Qi.UNAUTHENTICATED,e)}function VOt(){return new Ji(Qi.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function HOt(e){return new Ji(Qi.UNAUTHORIZED,"User does not have permission to access '"+e+"'.")}function qOt(){return new Ji(Qi.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function WOt(){return new Ji(Qi.CANCELED,"User canceled the upload/download.")}function GOt(e){return new Ji(Qi.INVALID_URL,"Invalid URL '"+e+"'.")}function YOt(e){return new Ji(Qi.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+e+"'.")}function KOt(){return new Ji(Qi.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+uDe+"' property when initializing the app?")}function XOt(){return new Ji(Qi.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function QOt(){return new Ji(Qi.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function JOt(e){return new Ji(Qi.UNSUPPORTED_ENVIRONMENT,`${e} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function FV(e){return new Ji(Qi.INVALID_ARGUMENT,e)}function lDe(){return new Ji(Qi.APP_DELETED,"The Firebase app was deleted.")}function ZOt(e){return new Ji(Qi.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function HC(e,t){return new Ji(Qi.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function zT(e){throw new Ji(Qi.INTERNAL_ERROR,"Internal error: "+e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wa{constructor(t,n){this.bucket=t,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(t,n){let r;try{r=Wa.makeFromUrl(t,n)}catch{return new Wa(t,"")}if(r.path==="")return r;throw YOt(t)}static makeFromUrl(t,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function s(w){w.path.charAt(w.path.length-1)==="/"&&(w.path_=w.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+i+o,"i"),u={bucket:1,path:3};function l(w){w.path_=decodeURIComponent(w.path)}const c="v[A-Za-z0-9_]+",f=n.replace(/[.]/g,"\\."),d="(/([^?#]*).*)?$",h=new RegExp(`^https?://${f}/${c}/b/${i}/o${d}`,"i"),p={bucket:1,path:3},m=n===aDe?"(?:storage.googleapis.com|storage.cloud.google.com)":n,g="([^?#]*)",y=new RegExp(`^https?://${m}/${i}/${g}`,"i"),b=[{regex:a,indices:u,postModify:s},{regex:h,indices:p,postModify:l},{regex:y,indices:{bucket:1,path:2},postModify:l}];for(let w=0;w<b.length;w++){const E=b[w],T=E.regex.exec(t);if(T){const S=T[E.indices.bucket];let C=T[E.indices.path];C||(C=""),r=new Wa(S,C),E.postModify(r);break}}if(r==null)throw GOt(t);return r}}class e3t{constructor(t){this.promise_=Promise.reject(t)}getPromise(){return this.promise_}cancel(t=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t3t(e,t,n){let r=1,i=null,s=null,o=!1,a=0;function u(){return a===2}let l=!1;function c(...g){l||(l=!0,t.apply(null,g))}function f(g){i=setTimeout(()=>{i=null,e(h,u())},g)}function d(){s&&clearTimeout(s)}function h(g,...y){if(l){d();return}if(g){d(),c.call(null,g,...y);return}if(u()||o){d(),c.call(null,g,...y);return}r<64&&(r*=2);let b;a===1?(a=2,b=0):b=(r+Math.random())*1e3,f(b)}let p=!1;function m(g){p||(p=!0,d(),!l&&(i!==null?(g||(a=2),clearTimeout(i),f(0)):g||(a=1)))}return f(0),s=setTimeout(()=>{o=!0,m(!0)},n),m}function n3t(e){e(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r3t(e){return e!==void 0}function i3t(e){return typeof e=="object"&&!Array.isArray(e)}function XJ(e){return typeof e=="string"||e instanceof String}function yhe(e){return QJ()&&e instanceof Blob}function QJ(){return typeof Blob<"u"}function jV(e,t,n,r){if(r<t)throw FV(`Invalid value for '${e}'. Expected ${t} or greater.`);if(r>n)throw FV(`Invalid value for '${e}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eR(e,t,n){let r=t;return n==null&&(r=`https://${t}`),`${n}://${r}/v0${e}`}function cDe(e){const t=encodeURIComponent;let n="?";for(const r in e)if(e.hasOwnProperty(r)){const i=t(r)+"="+t(e[r]);n=n+i+"&"}return n=n.slice(0,-1),n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var A1;(function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"})(A1||(A1={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s3t(e,t){const n=e>=500&&e<600,i=[408,429].indexOf(e)!==-1,s=t.indexOf(e)!==-1;return n||i||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o3t{constructor(t,n,r,i,s,o,a,u,l,c,f,d=!0){this.url_=t,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=u,this.timeout_=l,this.progressCallback_=c,this.connectionFactory_=f,this.retry=d,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((h,p)=>{this.resolve_=h,this.reject_=p,this.start_()})}start_(){const t=(r,i)=>{if(i){r(!1,new hD(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const o=a=>{const u=a.loaded,l=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(u,l)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const a=s.getErrorCode()===A1.NO_ERROR,u=s.getStatus();if(!a||s3t(u,this.additionalRetryCodes_)&&this.retry){const c=s.getErrorCode()===A1.ABORT;r(!1,new hD(!1,null,c));return}const l=this.successCodes_.indexOf(u)!==-1;r(!0,new hD(l,s))})},n=(r,i)=>{const s=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{const u=this.callback_(a,a.getResponse());r3t(u)?s(u):s()}catch(u){o(u)}else if(a!==null){const u=KJ();u.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,u)):o(u)}else if(i.canceled){const u=this.appDelete_?lDe():WOt();o(u)}else{const u=qOt();o(u)}};this.canceled_?n(!1,new hD(!1,null,!0)):this.backoffId_=t3t(t,n,this.timeout_)}getPromise(){return this.promise_}cancel(t){this.canceled_=!0,this.appDelete_=t||!1,this.backoffId_!==null&&n3t(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class hD{constructor(t,n,r){this.wasSuccessCode=t,this.connection=n,this.canceled=!!r}}function a3t(e,t){t!==null&&t.length>0&&(e.Authorization="Firebase "+t)}function u3t(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(t??"AppManager")}function l3t(e,t){t&&(e["X-Firebase-GMPID"]=t)}function c3t(e,t){t!==null&&(e["X-Firebase-AppCheck"]=t)}function f3t(e,t,n,r,i,s,o=!0){const a=cDe(e.urlParams),u=e.url+a,l=Object.assign({},e.headers);return l3t(l,t),a3t(l,n),u3t(l,s),c3t(l,r),new o3t(u,e.method,l,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d3t(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function h3t(...e){const t=d3t();if(t!==void 0){const n=new t;for(let r=0;r<e.length;r++)n.append(e[r]);return n.getBlob()}else{if(QJ())return new Blob(e);throw new Ji(Qi.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function p3t(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m3t(e){if(typeof atob>"u")throw JOt("base-64");return atob(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ih={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class O9{constructor(t,n){this.data=t,this.contentType=n||null}}function g3t(e,t){switch(e){case ih.RAW:return new O9(fDe(t));case ih.BASE64:case ih.BASE64URL:return new O9(dDe(e,t));case ih.DATA_URL:return new O9(v3t(t),b3t(t))}throw KJ()}function fDe(e){const t=[];for(let n=0;n<e.length;n++){let r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<e.length-1&&(e.charCodeAt(n+1)&64512)===56320))t.push(239,191,189);else{const s=r,o=e.charCodeAt(++n);r=65536|(s&1023)<<10|o&1023,t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(t)}function y3t(e){let t;try{t=decodeURIComponent(e)}catch{throw HC(ih.DATA_URL,"Malformed data URL.")}return fDe(t)}function dDe(e,t){switch(e){case ih.BASE64:{const i=t.indexOf("-")!==-1,s=t.indexOf("_")!==-1;if(i||s)throw HC(e,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case ih.BASE64URL:{const i=t.indexOf("+")!==-1,s=t.indexOf("/")!==-1;if(i||s)throw HC(e,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=m3t(t)}catch(i){throw i.message.includes("polyfill")?i:HC(e,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class hDe{constructor(t){this.base64=!1,this.contentType=null;const n=t.match(/^data:([^,]+)?,/);if(n===null)throw HC(ih.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=_3t(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=t.substring(t.indexOf(",")+1)}}function v3t(e){const t=new hDe(e);return t.base64?dDe(ih.BASE64,t.rest):y3t(t.rest)}function b3t(e){return new hDe(e).contentType}function _3t(e,t){return e.length>=t.length?e.substring(e.length-t.length)===t:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gg{constructor(t,n){let r=0,i="";yhe(t)?(this.data_=t,r=t.size,i=t.type):t instanceof ArrayBuffer?(n?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),r=this.data_.length):t instanceof Uint8Array&&(n?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),r=t.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(t,n){if(yhe(this.data_)){const r=this.data_,i=p3t(r,t,n);return i===null?null:new Gg(i)}else{const r=new Uint8Array(this.data_.buffer,t,n-t);return new Gg(r,!0)}}static getBlob(...t){if(QJ()){const n=t.map(r=>r instanceof Gg?r.data_:r);return new Gg(h3t.apply(null,n))}else{const n=t.map(o=>XJ(o)?g3t(ih.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const i=new Uint8Array(r);let s=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)i[s++]=o[a]}),new Gg(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JJ(e){let t;try{t=JSON.parse(e)}catch{return null}return i3t(t)?t:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w3t(e){if(e.length===0)return null;const t=e.lastIndexOf("/");return t===-1?"":e.slice(0,t)}function E3t(e,t){const n=t.split("/").filter(r=>r.length>0).join("/");return e.length===0?n:e+"/"+n}function pDe(e){const t=e.lastIndexOf("/",e.length-2);return t===-1?e:e.slice(t+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x3t(e,t){return t}class Pa{constructor(t,n,r,i){this.server=t,this.local=n||t,this.writable=!!r,this.xform=i||x3t}}let pD=null;function S3t(e){return!XJ(e)||e.length<2?e:pDe(e)}function mDe(){if(pD)return pD;const e=[];e.push(new Pa("bucket")),e.push(new Pa("generation")),e.push(new Pa("metageneration")),e.push(new Pa("name","fullPath",!0));function t(s,o){return S3t(o)}const n=new Pa("name");n.xform=t,e.push(n);function r(s,o){return o!==void 0?Number(o):o}const i=new Pa("size");return i.xform=r,e.push(i),e.push(new Pa("timeCreated")),e.push(new Pa("updated")),e.push(new Pa("md5Hash",null,!0)),e.push(new Pa("cacheControl",null,!0)),e.push(new Pa("contentDisposition",null,!0)),e.push(new Pa("contentEncoding",null,!0)),e.push(new Pa("contentLanguage",null,!0)),e.push(new Pa("contentType",null,!0)),e.push(new Pa("metadata","customMetadata",!0)),pD=e,pD}function T3t(e,t){function n(){const r=e.bucket,i=e.fullPath,s=new Wa(r,i);return t._makeStorageReference(s)}Object.defineProperty(e,"ref",{get:n})}function C3t(e,t,n){const r={};r.type="file";const i=n.length;for(let s=0;s<i;s++){const o=n[s];r[o.local]=o.xform(r,t[o.server])}return T3t(r,e),r}function gDe(e,t,n){const r=JJ(t);return r===null?null:C3t(e,r,n)}function A3t(e,t,n,r){const i=JJ(t);if(i===null||!XJ(i.downloadTokens))return null;const s=i.downloadTokens;if(s.length===0)return null;const o=encodeURIComponent;return s.split(",").map(l=>{const c=e.bucket,f=e.fullPath,d="/b/"+o(c)+"/o/"+o(f),h=eR(d,n,r),p=cDe({alt:"media",token:l});return h+p})[0]}function I3t(e,t){const n={},r=t.length;for(let i=0;i<r;i++){const s=t[i];s.writable&&(n[s.server]=e[s.local])}return JSON.stringify(n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vhe="prefixes",bhe="items";function k3t(e,t,n){const r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[vhe])for(const i of n[vhe]){const s=i.replace(/\/$/,""),o=e._makeStorageReference(new Wa(t,s));r.prefixes.push(o)}if(n[bhe])for(const i of n[bhe]){const s=e._makeStorageReference(new Wa(t,i.name));r.items.push(s)}return r}function R3t(e,t,n){const r=JJ(n);return r===null?null:k3t(e,t,r)}class k4{constructor(t,n,r,i){this.url=t,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZJ(e){if(!e)throw KJ()}function N3t(e,t){function n(r,i){const s=gDe(e,i,t);return ZJ(s!==null),s}return n}function D3t(e,t){function n(r,i){const s=R3t(e,t,i);return ZJ(s!==null),s}return n}function P3t(e,t){function n(r,i){const s=gDe(e,i,t);return ZJ(s!==null),A3t(s,i,e.host,e._protocol)}return n}function eZ(e){function t(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=VOt():i=zOt():n.getStatus()===402?i=UOt(e.bucket):n.getStatus()===403?i=HOt(e.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return t}function yDe(e){const t=eZ(e);function n(r,i){let s=t(r,i);return r.getStatus()===404&&(s=BOt(e.path)),s.serverResponse=i.serverResponse,s}return n}function O3t(e,t,n,r,i){const s={};t.isRoot?s.prefix="":s.prefix=t.path+"/",n.length>0&&(s.delimiter=n),r&&(s.pageToken=r),i&&(s.maxResults=i);const o=t.bucketOnlyServerUrl(),a=eR(o,e.host,e._protocol),u="GET",l=e.maxOperationRetryTime,c=new k4(a,u,D3t(e,t.bucket),l);return c.urlParams=s,c.errorHandler=eZ(t),c}function $3t(e,t,n){const r=t.fullServerUrl(),i=eR(r,e.host,e._protocol),s="GET",o=e.maxOperationRetryTime,a=new k4(i,s,P3t(e,n),o);return a.errorHandler=yDe(t),a}function M3t(e,t){const n=t.fullServerUrl(),r=eR(n,e.host,e._protocol),i="DELETE",s=e.maxOperationRetryTime;function o(u,l){}const a=new k4(r,i,o,s);return a.successCodes=[200,204],a.errorHandler=yDe(t),a}function L3t(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}function F3t(e,t,n){const r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=L3t(null,t)),r}function j3t(e,t,n,r,i){const s=t.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let b="";for(let w=0;w<2;w++)b=b+Math.random().toString().slice(2);return b}const u=a();o["Content-Type"]="multipart/related; boundary="+u;const l=F3t(t,r,i),c=I3t(l,n),f="--"+u+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+c+`\r
--`+u+`\r
Content-Type: `+l.contentType+`\r
\r
`,d=`\r
--`+u+"--",h=Gg.getBlob(f,r,d);if(h===null)throw XOt();const p={name:l.fullPath},m=eR(s,e.host,e._protocol),g="POST",y=e.maxUploadRetryTime,v=new k4(m,g,N3t(e,n),y);return v.urlParams=p,v.headers=o,v.body=h.uploadData(),v.errorHandler=eZ(t),v}class B3t{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=A1.NO_ERROR,this.sendPromise_=new Promise(t=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=A1.ABORT,t()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=A1.NETWORK_ERROR,t()}),this.xhr_.addEventListener("load",()=>{t()})})}send(t,n,r,i){if(this.sent_)throw zT("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,t,!0),i!==void 0)for(const s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw zT("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw zT("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw zT("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw zT("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(t){return this.xhr_.getResponseHeader(t)}addUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",t)}removeUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",t)}}class U3t extends B3t{initXhr(){this.xhr_.responseType="text"}}function R4(){return new U3t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ob{constructor(t,n){this._service=t,n instanceof Wa?this._location=n:this._location=Wa.makeFromUrl(n,t.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(t,n){return new ob(t,n)}get root(){const t=new Wa(this._location.bucket,"");return this._newRef(this._service,t)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return pDe(this._location.path)}get storage(){return this._service}get parent(){const t=w3t(this._location.path);if(t===null)return null;const n=new Wa(this._location.bucket,t);return new ob(this._service,n)}_throwIfRoot(t){if(this._location.path==="")throw ZOt(t)}}function z3t(e,t,n){e._throwIfRoot("uploadBytes");const r=j3t(e.storage,e._location,mDe(),new Gg(t,!0),n);return e.storage.makeRequestWithTokens(r,R4).then(i=>({metadata:i,ref:e}))}function V3t(e){const t={prefixes:[],items:[]};return vDe(e,t).then(()=>t)}async function vDe(e,t,n){const i=await H3t(e,{pageToken:n});t.prefixes.push(...i.prefixes),t.items.push(...i.items),i.nextPageToken!=null&&await vDe(e,t,i.nextPageToken)}function H3t(e,t){t!=null&&typeof t.maxResults=="number"&&jV("options.maxResults",1,1e3,t.maxResults);const n=t||{},r=O3t(e.storage,e._location,"/",n.pageToken,n.maxResults);return e.storage.makeRequestWithTokens(r,R4)}function q3t(e){e._throwIfRoot("getDownloadURL");const t=$3t(e.storage,e._location,mDe());return e.storage.makeRequestWithTokens(t,R4).then(n=>{if(n===null)throw QOt();return n})}function W3t(e){e._throwIfRoot("deleteObject");const t=M3t(e.storage,e._location);return e.storage.makeRequestWithTokens(t,R4)}function G3t(e,t){const n=E3t(e._location.path,t),r=new Wa(e._location.bucket,n);return new ob(e.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y3t(e){return/^[A-Za-z]+:\/\//.test(e)}function K3t(e,t){return new ob(e,t)}function bDe(e,t){if(e instanceof tZ){const n=e;if(n._bucket==null)throw KOt();const r=new ob(n,n._bucket);return t!=null?bDe(r,t):r}else return t!==void 0?G3t(e,t):e}function X3t(e,t){if(t&&Y3t(t)){if(e instanceof tZ)return K3t(e,t);throw FV("To use ref(service, url), the first argument must be a Storage instance.")}else return bDe(e,t)}function _he(e,t){const n=t==null?void 0:t[uDe];return n==null?null:Wa.makeFromBucketSpec(n,e)}function Q3t(e,t,n,r={}){e.host=`${t}:${n}`,e._protocol="http";const{mockUserToken:i}=r;i&&(e._overrideAuthToken=typeof i=="string"?i:uNt(i,e.app.options.projectId))}class tZ{constructor(t,n,r,i,s){this.app=t,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=aDe,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=FOt,this._maxUploadRetryTime=jOt,this._requests=new Set,i!=null?this._bucket=Wa.makeFromBucketSpec(i,this._host):this._bucket=_he(this._host,this.app.options)}get host(){return this._host}set host(t){this._host=t,this._url!=null?this._bucket=Wa.makeFromBucketSpec(this._url,t):this._bucket=_he(t,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(t){jV("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(t){jV("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const t=this._authProvider.getImmediate({optional:!0});if(t){const n=await t.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const t=this._appCheckProvider.getImmediate({optional:!0});return t?(await t.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(t=>t.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(t){return new ob(this,t)}_makeRequest(t,n,r,i,s=!0){if(this._deleted)return new e3t(lDe());{const o=f3t(t,this._appId,r,i,n,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(t,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(t,n,r,i).getPromise()}}const whe="@firebase/storage",Ehe="0.12.5";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _De="storage";function $9(e,t,n){return e=ii(e),z3t(e,t,n)}function VT(e){return e=ii(e),V3t(e)}function M9(e){return e=ii(e),q3t(e)}function xhe(e){return e=ii(e),W3t(e)}function oc(e,t){return e=ii(e),X3t(e,t)}function J3t(e=jJ(),t){e=ii(e);const r=MS(e,_De).getImmediate({identifier:t}),i=aNt("storage");return i&&Z3t(r,...i),r}function Z3t(e,t,n,r={}){Q3t(e,t,n,r)}function e$t(e,{instanceIdentifier:t}){const n=e.getProvider("app").getImmediate(),r=e.getProvider("auth-internal"),i=e.getProvider("app-check-internal");return new tZ(n,r,i,t,Jb)}function t$t(){$m(new Oh(_De,e$t,"PUBLIC").setMultipleInstances(!0)),zf(whe,Ehe,""),zf(whe,Ehe,"esm2017")}t$t();var She=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var I1,wDe;(function(){var e;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(S,C){function A(){}A.prototype=C.prototype,S.D=C.prototype,S.prototype=new A,S.prototype.constructor=S,S.C=function(k,N,O){for(var P=Array(arguments.length-2),$=2;$<arguments.length;$++)P[$-2]=arguments[$];return C.prototype[N].apply(k,P)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(S,C,A){A||(A=0);var k=Array(16);if(typeof C=="string")for(var N=0;16>N;++N)k[N]=C.charCodeAt(A++)|C.charCodeAt(A++)<<8|C.charCodeAt(A++)<<16|C.charCodeAt(A++)<<24;else for(N=0;16>N;++N)k[N]=C[A++]|C[A++]<<8|C[A++]<<16|C[A++]<<24;C=S.g[0],A=S.g[1],N=S.g[2];var O=S.g[3],P=C+(O^A&(N^O))+k[0]+3614090360&4294967295;C=A+(P<<7&4294967295|P>>>25),P=O+(N^C&(A^N))+k[1]+3905402710&4294967295,O=C+(P<<12&4294967295|P>>>20),P=N+(A^O&(C^A))+k[2]+606105819&4294967295,N=O+(P<<17&4294967295|P>>>15),P=A+(C^N&(O^C))+k[3]+3250441966&4294967295,A=N+(P<<22&4294967295|P>>>10),P=C+(O^A&(N^O))+k[4]+4118548399&4294967295,C=A+(P<<7&4294967295|P>>>25),P=O+(N^C&(A^N))+k[5]+1200080426&4294967295,O=C+(P<<12&4294967295|P>>>20),P=N+(A^O&(C^A))+k[6]+2821735955&4294967295,N=O+(P<<17&4294967295|P>>>15),P=A+(C^N&(O^C))+k[7]+4249261313&4294967295,A=N+(P<<22&4294967295|P>>>10),P=C+(O^A&(N^O))+k[8]+1770035416&4294967295,C=A+(P<<7&4294967295|P>>>25),P=O+(N^C&(A^N))+k[9]+2336552879&4294967295,O=C+(P<<12&4294967295|P>>>20),P=N+(A^O&(C^A))+k[10]+4294925233&4294967295,N=O+(P<<17&4294967295|P>>>15),P=A+(C^N&(O^C))+k[11]+2304563134&4294967295,A=N+(P<<22&4294967295|P>>>10),P=C+(O^A&(N^O))+k[12]+1804603682&4294967295,C=A+(P<<7&4294967295|P>>>25),P=O+(N^C&(A^N))+k[13]+4254626195&4294967295,O=C+(P<<12&4294967295|P>>>20),P=N+(A^O&(C^A))+k[14]+2792965006&4294967295,N=O+(P<<17&4294967295|P>>>15),P=A+(C^N&(O^C))+k[15]+1236535329&4294967295,A=N+(P<<22&4294967295|P>>>10),P=C+(N^O&(A^N))+k[1]+4129170786&4294967295,C=A+(P<<5&4294967295|P>>>27),P=O+(A^N&(C^A))+k[6]+3225465664&4294967295,O=C+(P<<9&4294967295|P>>>23),P=N+(C^A&(O^C))+k[11]+643717713&4294967295,N=O+(P<<14&4294967295|P>>>18),P=A+(O^C&(N^O))+k[0]+3921069994&4294967295,A=N+(P<<20&4294967295|P>>>12),P=C+(N^O&(A^N))+k[5]+3593408605&4294967295,C=A+(P<<5&4294967295|P>>>27),P=O+(A^N&(C^A))+k[10]+38016083&4294967295,O=C+(P<<9&4294967295|P>>>23),P=N+(C^A&(O^C))+k[15]+3634488961&4294967295,N=O+(P<<14&4294967295|P>>>18),P=A+(O^C&(N^O))+k[4]+3889429448&4294967295,A=N+(P<<20&4294967295|P>>>12),P=C+(N^O&(A^N))+k[9]+568446438&4294967295,C=A+(P<<5&4294967295|P>>>27),P=O+(A^N&(C^A))+k[14]+3275163606&4294967295,O=C+(P<<9&4294967295|P>>>23),P=N+(C^A&(O^C))+k[3]+4107603335&4294967295,N=O+(P<<14&4294967295|P>>>18),P=A+(O^C&(N^O))+k[8]+1163531501&4294967295,A=N+(P<<20&4294967295|P>>>12),P=C+(N^O&(A^N))+k[13]+2850285829&4294967295,C=A+(P<<5&4294967295|P>>>27),P=O+(A^N&(C^A))+k[2]+4243563512&4294967295,O=C+(P<<9&4294967295|P>>>23),P=N+(C^A&(O^C))+k[7]+1735328473&4294967295,N=O+(P<<14&4294967295|P>>>18),P=A+(O^C&(N^O))+k[12]+2368359562&4294967295,A=N+(P<<20&4294967295|P>>>12),P=C+(A^N^O)+k[5]+4294588738&4294967295,C=A+(P<<4&4294967295|P>>>28),P=O+(C^A^N)+k[8]+2272392833&4294967295,O=C+(P<<11&4294967295|P>>>21),P=N+(O^C^A)+k[11]+1839030562&4294967295,N=O+(P<<16&4294967295|P>>>16),P=A+(N^O^C)+k[14]+4259657740&4294967295,A=N+(P<<23&4294967295|P>>>9),P=C+(A^N^O)+k[1]+2763975236&4294967295,C=A+(P<<4&4294967295|P>>>28),P=O+(C^A^N)+k[4]+1272893353&4294967295,O=C+(P<<11&4294967295|P>>>21),P=N+(O^C^A)+k[7]+4139469664&4294967295,N=O+(P<<16&4294967295|P>>>16),P=A+(N^O^C)+k[10]+3200236656&4294967295,A=N+(P<<23&4294967295|P>>>9),P=C+(A^N^O)+k[13]+681279174&4294967295,C=A+(P<<4&4294967295|P>>>28),P=O+(C^A^N)+k[0]+3936430074&4294967295,O=C+(P<<11&4294967295|P>>>21),P=N+(O^C^A)+k[3]+3572445317&4294967295,N=O+(P<<16&4294967295|P>>>16),P=A+(N^O^C)+k[6]+76029189&4294967295,A=N+(P<<23&4294967295|P>>>9),P=C+(A^N^O)+k[9]+3654602809&4294967295,C=A+(P<<4&4294967295|P>>>28),P=O+(C^A^N)+k[12]+3873151461&4294967295,O=C+(P<<11&4294967295|P>>>21),P=N+(O^C^A)+k[15]+530742520&4294967295,N=O+(P<<16&4294967295|P>>>16),P=A+(N^O^C)+k[2]+3299628645&4294967295,A=N+(P<<23&4294967295|P>>>9),P=C+(N^(A|~O))+k[0]+4096336452&4294967295,C=A+(P<<6&4294967295|P>>>26),P=O+(A^(C|~N))+k[7]+1126891415&4294967295,O=C+(P<<10&4294967295|P>>>22),P=N+(C^(O|~A))+k[14]+2878612391&4294967295,N=O+(P<<15&4294967295|P>>>17),P=A+(O^(N|~C))+k[5]+4237533241&4294967295,A=N+(P<<21&4294967295|P>>>11),P=C+(N^(A|~O))+k[12]+1700485571&4294967295,C=A+(P<<6&4294967295|P>>>26),P=O+(A^(C|~N))+k[3]+2399980690&4294967295,O=C+(P<<10&4294967295|P>>>22),P=N+(C^(O|~A))+k[10]+4293915773&4294967295,N=O+(P<<15&4294967295|P>>>17),P=A+(O^(N|~C))+k[1]+2240044497&4294967295,A=N+(P<<21&4294967295|P>>>11),P=C+(N^(A|~O))+k[8]+1873313359&4294967295,C=A+(P<<6&4294967295|P>>>26),P=O+(A^(C|~N))+k[15]+4264355552&4294967295,O=C+(P<<10&4294967295|P>>>22),P=N+(C^(O|~A))+k[6]+2734768916&4294967295,N=O+(P<<15&4294967295|P>>>17),P=A+(O^(N|~C))+k[13]+1309151649&4294967295,A=N+(P<<21&4294967295|P>>>11),P=C+(N^(A|~O))+k[4]+4149444226&4294967295,C=A+(P<<6&4294967295|P>>>26),P=O+(A^(C|~N))+k[11]+3174756917&4294967295,O=C+(P<<10&4294967295|P>>>22),P=N+(C^(O|~A))+k[2]+718787259&4294967295,N=O+(P<<15&4294967295|P>>>17),P=A+(O^(N|~C))+k[9]+3951481745&4294967295,S.g[0]=S.g[0]+C&4294967295,S.g[1]=S.g[1]+(N+(P<<21&4294967295|P>>>11))&4294967295,S.g[2]=S.g[2]+N&4294967295,S.g[3]=S.g[3]+O&4294967295}r.prototype.u=function(S,C){C===void 0&&(C=S.length);for(var A=C-this.blockSize,k=this.B,N=this.h,O=0;O<C;){if(N==0)for(;O<=A;)i(this,S,O),O+=this.blockSize;if(typeof S=="string"){for(;O<C;)if(k[N++]=S.charCodeAt(O++),N==this.blockSize){i(this,k),N=0;break}}else for(;O<C;)if(k[N++]=S[O++],N==this.blockSize){i(this,k),N=0;break}}this.h=N,this.o+=C},r.prototype.v=function(){var S=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);S[0]=128;for(var C=1;C<S.length-8;++C)S[C]=0;var A=8*this.o;for(C=S.length-8;C<S.length;++C)S[C]=A&255,A/=256;for(this.u(S),S=Array(16),C=A=0;4>C;++C)for(var k=0;32>k;k+=8)S[A++]=this.g[C]>>>k&255;return S};function s(S,C){var A=a;return Object.prototype.hasOwnProperty.call(A,S)?A[S]:A[S]=C(S)}function o(S,C){this.h=C;for(var A=[],k=!0,N=S.length-1;0<=N;N--){var O=S[N]|0;k&&O==C||(A[N]=O,k=!1)}this.g=A}var a={};function u(S){return-128<=S&&128>S?s(S,function(C){return new o([C|0],0>C?-1:0)}):new o([S|0],0>S?-1:0)}function l(S){if(isNaN(S)||!isFinite(S))return f;if(0>S)return g(l(-S));for(var C=[],A=1,k=0;S>=A;k++)C[k]=S/A|0,A*=4294967296;return new o(C,0)}function c(S,C){if(S.length==0)throw Error("number format error: empty string");if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(S.charAt(0)=="-")return g(c(S.substring(1),C));if(0<=S.indexOf("-"))throw Error('number format error: interior "-" character');for(var A=l(Math.pow(C,8)),k=f,N=0;N<S.length;N+=8){var O=Math.min(8,S.length-N),P=parseInt(S.substring(N,N+O),C);8>O?(O=l(Math.pow(C,O)),k=k.j(O).add(l(P))):(k=k.j(A),k=k.add(l(P)))}return k}var f=u(0),d=u(1),h=u(16777216);e=o.prototype,e.m=function(){if(m(this))return-g(this).m();for(var S=0,C=1,A=0;A<this.g.length;A++){var k=this.i(A);S+=(0<=k?k:4294967296+k)*C,C*=4294967296}return S},e.toString=function(S){if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(p(this))return"0";if(m(this))return"-"+g(this).toString(S);for(var C=l(Math.pow(S,6)),A=this,k="";;){var N=w(A,C).g;A=y(A,N.j(C));var O=((0<A.g.length?A.g[0]:A.h)>>>0).toString(S);if(A=N,p(A))return O+k;for(;6>O.length;)O="0"+O;k=O+k}},e.i=function(S){return 0>S?0:S<this.g.length?this.g[S]:this.h};function p(S){if(S.h!=0)return!1;for(var C=0;C<S.g.length;C++)if(S.g[C]!=0)return!1;return!0}function m(S){return S.h==-1}e.l=function(S){return S=y(this,S),m(S)?-1:p(S)?0:1};function g(S){for(var C=S.g.length,A=[],k=0;k<C;k++)A[k]=~S.g[k];return new o(A,~S.h).add(d)}e.abs=function(){return m(this)?g(this):this},e.add=function(S){for(var C=Math.max(this.g.length,S.g.length),A=[],k=0,N=0;N<=C;N++){var O=k+(this.i(N)&65535)+(S.i(N)&65535),P=(O>>>16)+(this.i(N)>>>16)+(S.i(N)>>>16);k=P>>>16,O&=65535,P&=65535,A[N]=P<<16|O}return new o(A,A[A.length-1]&-2147483648?-1:0)};function y(S,C){return S.add(g(C))}e.j=function(S){if(p(this)||p(S))return f;if(m(this))return m(S)?g(this).j(g(S)):g(g(this).j(S));if(m(S))return g(this.j(g(S)));if(0>this.l(h)&&0>S.l(h))return l(this.m()*S.m());for(var C=this.g.length+S.g.length,A=[],k=0;k<2*C;k++)A[k]=0;for(k=0;k<this.g.length;k++)for(var N=0;N<S.g.length;N++){var O=this.i(k)>>>16,P=this.i(k)&65535,$=S.i(N)>>>16,F=S.i(N)&65535;A[2*k+2*N]+=P*F,v(A,2*k+2*N),A[2*k+2*N+1]+=O*F,v(A,2*k+2*N+1),A[2*k+2*N+1]+=P*$,v(A,2*k+2*N+1),A[2*k+2*N+2]+=O*$,v(A,2*k+2*N+2)}for(k=0;k<C;k++)A[k]=A[2*k+1]<<16|A[2*k];for(k=C;k<2*C;k++)A[k]=0;return new o(A,0)};function v(S,C){for(;(S[C]&65535)!=S[C];)S[C+1]+=S[C]>>>16,S[C]&=65535,C++}function b(S,C){this.g=S,this.h=C}function w(S,C){if(p(C))throw Error("division by zero");if(p(S))return new b(f,f);if(m(S))return C=w(g(S),C),new b(g(C.g),g(C.h));if(m(C))return C=w(S,g(C)),new b(g(C.g),C.h);if(30<S.g.length){if(m(S)||m(C))throw Error("slowDivide_ only works with positive integers.");for(var A=d,k=C;0>=k.l(S);)A=E(A),k=E(k);var N=T(A,1),O=T(k,1);for(k=T(k,2),A=T(A,2);!p(k);){var P=O.add(k);0>=P.l(S)&&(N=N.add(A),O=P),k=T(k,1),A=T(A,1)}return C=y(S,N.j(C)),new b(N,C)}for(N=f;0<=S.l(C);){for(A=Math.max(1,Math.floor(S.m()/C.m())),k=Math.ceil(Math.log(A)/Math.LN2),k=48>=k?1:Math.pow(2,k-48),O=l(A),P=O.j(C);m(P)||0<P.l(S);)A-=k,O=l(A),P=O.j(C);p(O)&&(O=d),N=N.add(O),S=y(S,P)}return new b(N,S)}e.A=function(S){return w(this,S).h},e.and=function(S){for(var C=Math.max(this.g.length,S.g.length),A=[],k=0;k<C;k++)A[k]=this.i(k)&S.i(k);return new o(A,this.h&S.h)},e.or=function(S){for(var C=Math.max(this.g.length,S.g.length),A=[],k=0;k<C;k++)A[k]=this.i(k)|S.i(k);return new o(A,this.h|S.h)},e.xor=function(S){for(var C=Math.max(this.g.length,S.g.length),A=[],k=0;k<C;k++)A[k]=this.i(k)^S.i(k);return new o(A,this.h^S.h)};function E(S){for(var C=S.g.length+1,A=[],k=0;k<C;k++)A[k]=S.i(k)<<1|S.i(k-1)>>>31;return new o(A,S.h)}function T(S,C){var A=C>>5;C%=32;for(var k=S.g.length-A,N=[],O=0;O<k;O++)N[O]=0<C?S.i(O+A)>>>C|S.i(O+A+1)<<32-C:S.i(O+A);return new o(N,S.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,wDe=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=l,o.fromString=c,I1=o}).apply(typeof She<"u"?She:typeof self<"u"?self:typeof window<"u"?window:{});var mD=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var EDe,xDe,B2,SDe,zP,BV,TDe,CDe,ADe;(function(){var e,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(x,L,V){return x==Array.prototype||x==Object.prototype||(x[L]=V.value),x};function n(x){x=[typeof globalThis=="object"&&globalThis,x,typeof window=="object"&&window,typeof self=="object"&&self,typeof mD=="object"&&mD];for(var L=0;L<x.length;++L){var V=x[L];if(V&&V.Math==Math)return V}throw Error("Cannot find global object")}var r=n(this);function i(x,L){if(L)e:{var V=r;x=x.split(".");for(var Q=0;Q<x.length-1;Q++){var we=x[Q];if(!(we in V))break e;V=V[we]}x=x[x.length-1],Q=V[x],L=L(Q),L!=Q&&L!=null&&t(V,x,{configurable:!0,writable:!0,value:L})}}function s(x,L){x instanceof String&&(x+="");var V=0,Q=!1,we={next:function(){if(!Q&&V<x.length){var Pe=V++;return{value:L(Pe,x[Pe]),done:!1}}return Q=!0,{done:!0,value:void 0}}};return we[Symbol.iterator]=function(){return we},we}i("Array.prototype.values",function(x){return x||function(){return s(this,function(L,V){return V})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function u(x){var L=typeof x;return L=L!="object"?L:x?Array.isArray(x)?"array":L:"null",L=="array"||L=="object"&&typeof x.length=="number"}function l(x){var L=typeof x;return L=="object"&&x!=null||L=="function"}function c(x,L,V){return x.call.apply(x.bind,arguments)}function f(x,L,V){if(!x)throw Error();if(2<arguments.length){var Q=Array.prototype.slice.call(arguments,2);return function(){var we=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(we,Q),x.apply(L,we)}}return function(){return x.apply(L,arguments)}}function d(x,L,V){return d=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?c:f,d.apply(null,arguments)}function h(x,L){var V=Array.prototype.slice.call(arguments,1);return function(){var Q=V.slice();return Q.push.apply(Q,arguments),x.apply(this,Q)}}function p(x,L){function V(){}V.prototype=L.prototype,x.aa=L.prototype,x.prototype=new V,x.prototype.constructor=x,x.Qb=function(Q,we,Pe){for(var ft=Array(arguments.length-2),Gr=2;Gr<arguments.length;Gr++)ft[Gr-2]=arguments[Gr];return L.prototype[we].apply(Q,ft)}}function m(x){const L=x.length;if(0<L){const V=Array(L);for(let Q=0;Q<L;Q++)V[Q]=x[Q];return V}return[]}function g(x,L){for(let V=1;V<arguments.length;V++){const Q=arguments[V];if(u(Q)){const we=x.length||0,Pe=Q.length||0;x.length=we+Pe;for(let ft=0;ft<Pe;ft++)x[we+ft]=Q[ft]}else x.push(Q)}}class y{constructor(L,V){this.i=L,this.j=V,this.h=0,this.g=null}get(){let L;return 0<this.h?(this.h--,L=this.g,this.g=L.next,L.next=null):L=this.i(),L}}function v(x){return/^[\s\xa0]*$/.test(x)}function b(){var x=a.navigator;return x&&(x=x.userAgent)?x:""}function w(x){return w[" "](x),x}w[" "]=function(){};var E=b().indexOf("Gecko")!=-1&&!(b().toLowerCase().indexOf("webkit")!=-1&&b().indexOf("Edge")==-1)&&!(b().indexOf("Trident")!=-1||b().indexOf("MSIE")!=-1)&&b().indexOf("Edge")==-1;function T(x,L,V){for(const Q in x)L.call(V,x[Q],Q,x)}function S(x,L){for(const V in x)L.call(void 0,x[V],V,x)}function C(x){const L={};for(const V in x)L[V]=x[V];return L}const A="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function k(x,L){let V,Q;for(let we=1;we<arguments.length;we++){Q=arguments[we];for(V in Q)x[V]=Q[V];for(let Pe=0;Pe<A.length;Pe++)V=A[Pe],Object.prototype.hasOwnProperty.call(Q,V)&&(x[V]=Q[V])}}function N(x){var L=1;x=x.split(":");const V=[];for(;0<L&&x.length;)V.push(x.shift()),L--;return x.length&&V.push(x.join(":")),V}function O(x){a.setTimeout(()=>{throw x},0)}function P(){var x=H;let L=null;return x.g&&(L=x.g,x.g=x.g.next,x.g||(x.h=null),L.next=null),L}class ${constructor(){this.h=this.g=null}add(L,V){const Q=F.get();Q.set(L,V),this.h?this.h.next=Q:this.g=Q,this.h=Q}}var F=new y(()=>new M,x=>x.reset());class M{constructor(){this.next=this.g=this.h=null}set(L,V){this.h=L,this.g=V,this.next=null}reset(){this.next=this.g=this.h=null}}let B,U=!1,H=new $,D=()=>{const x=a.Promise.resolve(void 0);B=()=>{x.then(z)}};var z=()=>{for(var x;x=P();){try{x.h.call(x.g)}catch(V){O(V)}var L=F;L.j(x),100>L.h&&(L.h++,x.next=L.g,L.g=x)}U=!1};function W(){this.s=this.s,this.C=this.C}W.prototype.s=!1,W.prototype.ma=function(){this.s||(this.s=!0,this.N())},W.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function j(x,L){this.type=x,this.g=this.target=L,this.defaultPrevented=!1}j.prototype.h=function(){this.defaultPrevented=!0};var q=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var x=!1,L=Object.defineProperty({},"passive",{get:function(){x=!0}});try{const V=()=>{};a.addEventListener("test",V,L),a.removeEventListener("test",V,L)}catch{}return x}();function G(x,L){if(j.call(this,x?x.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,x){var V=this.type=x.type,Q=x.changedTouches&&x.changedTouches.length?x.changedTouches[0]:null;if(this.target=x.target||x.srcElement,this.g=L,L=x.relatedTarget){if(E){e:{try{w(L.nodeName);var we=!0;break e}catch{}we=!1}we||(L=null)}}else V=="mouseover"?L=x.fromElement:V=="mouseout"&&(L=x.toElement);this.relatedTarget=L,Q?(this.clientX=Q.clientX!==void 0?Q.clientX:Q.pageX,this.clientY=Q.clientY!==void 0?Q.clientY:Q.pageY,this.screenX=Q.screenX||0,this.screenY=Q.screenY||0):(this.clientX=x.clientX!==void 0?x.clientX:x.pageX,this.clientY=x.clientY!==void 0?x.clientY:x.pageY,this.screenX=x.screenX||0,this.screenY=x.screenY||0),this.button=x.button,this.key=x.key||"",this.ctrlKey=x.ctrlKey,this.altKey=x.altKey,this.shiftKey=x.shiftKey,this.metaKey=x.metaKey,this.pointerId=x.pointerId||0,this.pointerType=typeof x.pointerType=="string"?x.pointerType:ne[x.pointerType]||"",this.state=x.state,this.i=x,x.defaultPrevented&&G.aa.h.call(this)}}p(G,j);var ne={2:"touch",3:"pen",4:"mouse"};G.prototype.h=function(){G.aa.h.call(this);var x=this.i;x.preventDefault?x.preventDefault():x.returnValue=!1};var ce="closure_listenable_"+(1e6*Math.random()|0),de=0;function he(x,L,V,Q,we){this.listener=x,this.proxy=null,this.src=L,this.type=V,this.capture=!!Q,this.ha=we,this.key=++de,this.da=this.fa=!1}function ve(x){x.da=!0,x.listener=null,x.proxy=null,x.src=null,x.ha=null}function Ie(x){this.src=x,this.g={},this.h=0}Ie.prototype.add=function(x,L,V,Q,we){var Pe=x.toString();x=this.g[Pe],x||(x=this.g[Pe]=[],this.h++);var ft=Ke(x,L,Q,we);return-1<ft?(L=x[ft],V||(L.fa=!1)):(L=new he(L,this.src,Pe,!!Q,we),L.fa=V,x.push(L)),L};function be(x,L){var V=L.type;if(V in x.g){var Q=x.g[V],we=Array.prototype.indexOf.call(Q,L,void 0),Pe;(Pe=0<=we)&&Array.prototype.splice.call(Q,we,1),Pe&&(ve(L),x.g[V].length==0&&(delete x.g[V],x.h--))}}function Ke(x,L,V,Q){for(var we=0;we<x.length;++we){var Pe=x[we];if(!Pe.da&&Pe.listener==L&&Pe.capture==!!V&&Pe.ha==Q)return we}return-1}var Ue="closure_lm_"+(1e6*Math.random()|0),yt={};function it(x,L,V,Q,we){if(Array.isArray(L)){for(var Pe=0;Pe<L.length;Pe++)it(x,L[Pe],V,Q,we);return null}return V=vt(V),x&&x[ce]?x.K(L,V,l(Q)?!!Q.capture:!!Q,we):_e(x,L,V,!1,Q,we)}function _e(x,L,V,Q,we,Pe){if(!L)throw Error("Invalid event type");var ft=l(we)?!!we.capture:!!we,Gr=ge(x);if(Gr||(x[Ue]=Gr=new Ie(x)),V=Gr.add(L,V,Q,ft,Pe),V.proxy)return V;if(Q=ke(),V.proxy=Q,Q.src=x,Q.listener=V,x.addEventListener)q||(we=ft),we===void 0&&(we=!1),x.addEventListener(L.toString(),Q,we);else if(x.attachEvent)x.attachEvent(Ot(L.toString()),Q);else if(x.addListener&&x.removeListener)x.addListener(Q);else throw Error("addEventListener and attachEvent are unavailable.");return V}function ke(){function x(V){return L.call(x.src,x.listener,V)}const L=We;return x}function ze(x,L,V,Q,we){if(Array.isArray(L))for(var Pe=0;Pe<L.length;Pe++)ze(x,L[Pe],V,Q,we);else Q=l(Q)?!!Q.capture:!!Q,V=vt(V),x&&x[ce]?(x=x.i,L=String(L).toString(),L in x.g&&(Pe=x.g[L],V=Ke(Pe,V,Q,we),-1<V&&(ve(Pe[V]),Array.prototype.splice.call(Pe,V,1),Pe.length==0&&(delete x.g[L],x.h--)))):x&&(x=ge(x))&&(L=x.g[L.toString()],x=-1,L&&(x=Ke(L,V,Q,we)),(V=-1<x?L[x]:null)&&ct(V))}function ct(x){if(typeof x!="number"&&x&&!x.da){var L=x.src;if(L&&L[ce])be(L.i,x);else{var V=x.type,Q=x.proxy;L.removeEventListener?L.removeEventListener(V,Q,x.capture):L.detachEvent?L.detachEvent(Ot(V),Q):L.addListener&&L.removeListener&&L.removeListener(Q),(V=ge(L))?(be(V,x),V.h==0&&(V.src=null,L[Ue]=null)):ve(x)}}}function Ot(x){return x in yt?yt[x]:yt[x]="on"+x}function We(x,L){if(x.da)x=!0;else{L=new G(L,this);var V=x.listener,Q=x.ha||x.src;x.fa&&ct(x),x=V.call(Q,L)}return x}function ge(x){return x=x[Ue],x instanceof Ie?x:null}var ht="__closure_events_fn_"+(1e9*Math.random()>>>0);function vt(x){return typeof x=="function"?x:(x[ht]||(x[ht]=function(L){return x.handleEvent(L)}),x[ht])}function me(){W.call(this),this.i=new Ie(this),this.M=this,this.F=null}p(me,W),me.prototype[ce]=!0,me.prototype.removeEventListener=function(x,L,V,Q){ze(this,x,L,V,Q)};function Ae(x,L){var V,Q=x.F;if(Q)for(V=[];Q;Q=Q.F)V.push(Q);if(x=x.M,Q=L.type||L,typeof L=="string")L=new j(L,x);else if(L instanceof j)L.target=L.target||x;else{var we=L;L=new j(Q,x),k(L,we)}if(we=!0,V)for(var Pe=V.length-1;0<=Pe;Pe--){var ft=L.g=V[Pe];we=He(ft,Q,!0,L)&&we}if(ft=L.g=x,we=He(ft,Q,!0,L)&&we,we=He(ft,Q,!1,L)&&we,V)for(Pe=0;Pe<V.length;Pe++)ft=L.g=V[Pe],we=He(ft,Q,!1,L)&&we}me.prototype.N=function(){if(me.aa.N.call(this),this.i){var x=this.i,L;for(L in x.g){for(var V=x.g[L],Q=0;Q<V.length;Q++)ve(V[Q]);delete x.g[L],x.h--}}this.F=null},me.prototype.K=function(x,L,V,Q){return this.i.add(String(x),L,!1,V,Q)},me.prototype.L=function(x,L,V,Q){return this.i.add(String(x),L,!0,V,Q)};function He(x,L,V,Q){if(L=x.i.g[String(L)],!L)return!0;L=L.concat();for(var we=!0,Pe=0;Pe<L.length;++Pe){var ft=L[Pe];if(ft&&!ft.da&&ft.capture==V){var Gr=ft.listener,go=ft.ha||ft.src;ft.fa&&be(x.i,ft),we=Gr.call(go,Q)!==!1&&we}}return we&&!Q.defaultPrevented}function ut(x,L,V){if(typeof x=="function")V&&(x=d(x,V));else if(x&&typeof x.handleEvent=="function")x=d(x.handleEvent,x);else throw Error("Invalid listener argument");return 2147483647<Number(L)?-1:a.setTimeout(x,L||0)}function _t(x){x.g=ut(()=>{x.g=null,x.i&&(x.i=!1,_t(x))},x.l);const L=x.h;x.h=null,x.m.apply(null,L)}class Ln extends W{constructor(L,V){super(),this.m=L,this.l=V,this.h=null,this.i=!1,this.g=null}j(L){this.h=arguments,this.g?this.i=!0:_t(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Cr(x){W.call(this),this.h=x,this.g={}}p(Cr,W);var Fn=[];function cr(x){T(x.g,function(L,V){this.g.hasOwnProperty(V)&&ct(L)},x),x.g={}}Cr.prototype.N=function(){Cr.aa.N.call(this),cr(this)},Cr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var gn=a.JSON.stringify,An=a.JSON.parse,nr=class{stringify(x){return a.JSON.stringify(x,void 0)}parse(x){return a.JSON.parse(x,void 0)}};function rr(){}rr.prototype.h=null;function zo(x){return x.h||(x.h=x.i())}function $i(){}var In={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Mi(){j.call(this,"d")}p(Mi,j);function Ar(){j.call(this,"c")}p(Ar,j);var gs={},hp=null;function cl(){return hp=hp||new me}gs.La="serverreachability";function bd(x){j.call(this,gs.La,x)}p(bd,j);function xr(x){const L=cl();Ae(L,new bd(L))}gs.STAT_EVENT="statevent";function Ii(x,L){j.call(this,gs.STAT_EVENT,x),this.stat=L}p(Ii,j);function Qr(x){const L=cl();Ae(L,new Ii(L,x))}gs.Ma="timingevent";function cu(x,L){j.call(this,gs.Ma,x),this.size=L}p(cu,j);function Ia(x,L){if(typeof x!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){x()},L)}function ka(){this.g=!0}ka.prototype.xa=function(){this.g=!1};function oe(x,L,V,Q,we,Pe){x.info(function(){if(x.g)if(Pe)for(var ft="",Gr=Pe.split("&"),go=0;go<Gr.length;go++){var fr=Gr[go].split("=");if(1<fr.length){var Wo=fr[0];fr=fr[1];var Go=Wo.split("_");ft=2<=Go.length&&Go[1]=="type"?ft+(Wo+"="+fr+"&"):ft+(Wo+"=redacted&")}}else ft=null;else ft=Pe;return"XMLHTTP REQ ("+Q+") [attempt "+we+"]: "+L+`
`+V+`
`+ft})}function ee(x,L,V,Q,we,Pe,ft){x.info(function(){return"XMLHTTP RESP ("+Q+") [ attempt "+we+"]: "+L+`
`+V+`
`+Pe+" "+ft})}function ae(x,L,V,Q){x.info(function(){return"XMLHTTP TEXT ("+L+"): "+Se(x,V)+(Q?" "+Q:"")})}function Ce(x,L){x.info(function(){return"TIMEOUT: "+L})}ka.prototype.info=function(){};function Se(x,L){if(!x.g)return L;if(!L)return null;try{var V=JSON.parse(L);if(V){for(x=0;x<V.length;x++)if(Array.isArray(V[x])){var Q=V[x];if(!(2>Q.length)){var we=Q[1];if(Array.isArray(we)&&!(1>we.length)){var Pe=we[0];if(Pe!="noop"&&Pe!="stop"&&Pe!="close")for(var ft=1;ft<we.length;ft++)we[ft]=""}}}}return gn(V)}catch{return L}}var ot={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},St={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Ht;function On(){}p(On,rr),On.prototype.g=function(){return new XMLHttpRequest},On.prototype.i=function(){return{}},Ht=new On;function jn(x,L,V,Q){this.j=x,this.i=L,this.l=V,this.R=Q||1,this.U=new Cr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new pn}function pn(){this.i=null,this.g="",this.h=!1}var ir={},Ir={};function Vt(x,L,V){x.L=1,x.v=Bn(Ge(L)),x.m=V,x.P=!0,sr(x,null)}function sr(x,L){x.F=Date.now(),ki(x),x.A=Ge(x.v);var V=x.A,Q=x.R;Array.isArray(Q)||(Q=[String(Q)]),XR(V.i,"t",Q),x.C=0,V=x.j.J,x.h=new pn,x.g=jie(x.j,V?L:null,!x.m),0<x.O&&(x.M=new Ln(d(x.Y,x,x.g),x.O)),L=x.U,V=x.g,Q=x.ca;var we="readystatechange";Array.isArray(we)||(we&&(Fn[0]=we.toString()),we=Fn);for(var Pe=0;Pe<we.length;Pe++){var ft=it(V,we[Pe],Q||L.handleEvent,!1,L.h||L);if(!ft)break;L.g[ft.key]=ft}L=x.H?C(x.H):{},x.m?(x.u||(x.u="POST"),L["Content-Type"]="application/x-www-form-urlencoded",x.g.ea(x.A,x.u,x.m,L)):(x.u="GET",x.g.ea(x.A,x.u,null,L)),xr(),oe(x.i,x.u,x.A,x.l,x.R,x.m)}jn.prototype.ca=function(x){x=x.target;const L=this.M;L&&Zi(x)==3?L.j():this.Y(x)},jn.prototype.Y=function(x){try{if(x==this.g)e:{const Go=Zi(this.g);var L=this.g.Ba();const E_=this.g.Z();if(!(3>Go)&&(Go!=3||this.g&&(this.h.h||this.g.oa()||qo(this.g)))){this.J||Go!=4||L==7||(L==8||0>=E_?xr(3):xr(2)),Jr(this);var V=this.g.Z();this.X=V;t:if(Hr(this)){var Q=qo(this.g);x="";var we=Q.length,Pe=Zi(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Li(this),mo(this);var ft="";break t}this.h.i=new a.TextDecoder}for(L=0;L<we;L++)this.h.h=!0,x+=this.h.i.decode(Q[L],{stream:!(Pe&&L==we-1)});Q.length=0,this.h.g+=x,this.C=0,ft=this.h.g}else ft=this.g.oa();if(this.o=V==200,ee(this.i,this.u,this.A,this.l,this.R,Go,V),this.o){if(this.T&&!this.K){t:{if(this.g){var Gr,go=this.g;if((Gr=go.g?go.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!v(Gr)){var fr=Gr;break t}}fr=null}if(V=fr)ae(this.i,this.l,V,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Fi(this,V);else{this.o=!1,this.s=3,Qr(12),Li(this),mo(this);break e}}if(this.P){V=!0;let ef;for(;!this.J&&this.C<ft.length;)if(ef=Jn(this,ft),ef==Ir){Go==4&&(this.s=4,Qr(14),V=!1),ae(this.i,this.l,null,"[Incomplete Response]");break}else if(ef==ir){this.s=4,Qr(15),ae(this.i,this.l,ft,"[Invalid Chunk]"),V=!1;break}else ae(this.i,this.l,ef,null),Fi(this,ef);if(Hr(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Go!=4||ft.length!=0||this.h.h||(this.s=1,Qr(16),V=!1),this.o=this.o&&V,!V)ae(this.i,this.l,ft,"[Invalid Chunked Response]"),Li(this),mo(this);else if(0<ft.length&&!this.W){this.W=!0;var Wo=this.j;Wo.g==this&&Wo.ba&&!Wo.M&&(Wo.j.info("Great, no buffering proxy detected. Bytes received: "+ft.length),K5(Wo),Wo.M=!0,Qr(11))}}else ae(this.i,this.l,ft,null),Fi(this,ft);Go==4&&Li(this),this.o&&!this.J&&(Go==4?$ie(this.j,this):(this.o=!1,ki(this)))}else lv(this.g),V==400&&0<ft.indexOf("Unknown SID")?(this.s=3,Qr(12)):(this.s=0,Qr(13)),Li(this),mo(this)}}}catch{}finally{}};function Hr(x){return x.g?x.u=="GET"&&x.L!=2&&x.j.Ca:!1}function Jn(x,L){var V=x.C,Q=L.indexOf(`
`,V);return Q==-1?Ir:(V=Number(L.substring(V,Q)),isNaN(V)?ir:(Q+=1,Q+V>L.length?Ir:(L=L.slice(Q,Q+V),x.C=Q+V,L)))}jn.prototype.cancel=function(){this.J=!0,Li(this)};function ki(x){x.S=Date.now()+x.I,Hs(x,x.I)}function Hs(x,L){if(x.B!=null)throw Error("WatchDog timer not null");x.B=Ia(d(x.ba,x),L)}function Jr(x){x.B&&(a.clearTimeout(x.B),x.B=null)}jn.prototype.ba=function(){this.B=null;const x=Date.now();0<=x-this.S?(Ce(this.i,this.A),this.L!=2&&(xr(),Qr(17)),Li(this),this.s=2,mo(this)):Hs(this,this.S-x)};function mo(x){x.j.G==0||x.J||$ie(x.j,x)}function Li(x){Jr(x);var L=x.M;L&&typeof L.ma=="function"&&L.ma(),x.M=null,cr(x.U),x.g&&(L=x.g,x.g=null,L.abort(),L.ma())}function Fi(x,L){try{var V=x.j;if(V.G!=0&&(V.g==x||_d(V.h,x))){if(!x.K&&_d(V.h,x)&&V.G==3){try{var Q=V.Da.g.parse(L)}catch{Q=null}if(Array.isArray(Q)&&Q.length==3){var we=Q;if(we[0]==0){e:if(!V.u){if(V.g)if(V.g.F+3e3<x.F)rN(V),tN(V);else break e;Y5(V),Qr(18)}}else V.za=we[1],0<V.za-V.T&&37500>we[2]&&V.F&&V.v==0&&!V.C&&(V.C=Ia(d(V.Za,V),6e3));if(1>=tc(V.h)&&V.ca){try{V.ca()}catch{}V.ca=void 0}}else cv(V,11)}else if((x.K||V.g==x)&&rN(V),!v(L))for(we=V.Da.g.parse(L),L=0;L<we.length;L++){let fr=we[L];if(V.T=fr[0],fr=fr[1],V.G==2)if(fr[0]=="c"){V.K=fr[1],V.ia=fr[2];const Wo=fr[3];Wo!=null&&(V.la=Wo,V.j.info("VER="+V.la));const Go=fr[4];Go!=null&&(V.Aa=Go,V.j.info("SVER="+V.Aa));const E_=fr[5];E_!=null&&typeof E_=="number"&&0<E_&&(Q=1.5*E_,V.L=Q,V.j.info("backChannelRequestTimeoutMs_="+Q)),Q=V;const ef=x.g;if(ef){const sN=ef.g?ef.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(sN){var Pe=Q.h;Pe.g||sN.indexOf("spdy")==-1&&sN.indexOf("quic")==-1&&sN.indexOf("h2")==-1||(Pe.j=Pe.l,Pe.g=new Set,Pe.h&&(Y(Pe,Pe.h),Pe.h=null))}if(Q.D){const X5=ef.g?ef.g.getResponseHeader("X-HTTP-Session-Id"):null;X5&&(Q.ya=X5,Dt(Q.I,Q.D,X5))}}V.G=3,V.l&&V.l.ua(),V.ba&&(V.R=Date.now()-x.F,V.j.info("Handshake RTT: "+V.R+"ms")),Q=V;var ft=x;if(Q.qa=Fie(Q,Q.J?Q.ia:null,Q.W),ft.K){se(Q.h,ft);var Gr=ft,go=Q.L;go&&(Gr.I=go),Gr.B&&(Jr(Gr),ki(Gr)),Q.g=ft}else Pie(Q);0<V.i.length&&nN(V)}else fr[0]!="stop"&&fr[0]!="close"||cv(V,7);else V.G==3&&(fr[0]=="stop"||fr[0]=="close"?fr[0]=="stop"?cv(V,7):__(V):fr[0]!="noop"&&V.l&&V.l.ta(fr),V.v=0)}}xr(4)}catch{}}var Vo=class{constructor(x,L){this.g=x,this.map=L}};function Ra(x){this.l=x||10,a.PerformanceNavigationTiming?(x=a.performance.getEntriesByType("navigation"),x=0<x.length&&(x[0].nextHopProtocol=="hq"||x[0].nextHopProtocol=="h2")):x=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=x?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function qs(x){return x.h?!0:x.g?x.g.size>=x.j:!1}function tc(x){return x.h?1:x.g?x.g.size:0}function _d(x,L){return x.h?x.h==L:x.g?x.g.has(L):!1}function Y(x,L){x.g?x.g.add(L):x.h=L}function se(x,L){x.h&&x.h==L?x.h=null:x.g&&x.g.has(L)&&x.g.delete(L)}Ra.prototype.cancel=function(){if(this.i=Z(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const x of this.g.values())x.cancel();this.g.clear()}};function Z(x){if(x.h!=null)return x.i.concat(x.h.D);if(x.g!=null&&x.g.size!==0){let L=x.i;for(const V of x.g.values())L=L.concat(V.D);return L}return m(x.i)}function fe(x){if(x.V&&typeof x.V=="function")return x.V();if(typeof Map<"u"&&x instanceof Map||typeof Set<"u"&&x instanceof Set)return Array.from(x.values());if(typeof x=="string")return x.split("");if(u(x)){for(var L=[],V=x.length,Q=0;Q<V;Q++)L.push(x[Q]);return L}L=[],V=0;for(Q in x)L[V++]=x[Q];return L}function ye(x){if(x.na&&typeof x.na=="function")return x.na();if(!x.V||typeof x.V!="function"){if(typeof Map<"u"&&x instanceof Map)return Array.from(x.keys());if(!(typeof Set<"u"&&x instanceof Set)){if(u(x)||typeof x=="string"){var L=[];x=x.length;for(var V=0;V<x;V++)L.push(V);return L}L=[],V=0;for(const Q in x)L[V++]=Q;return L}}}function le(x,L){if(x.forEach&&typeof x.forEach=="function")x.forEach(L,void 0);else if(u(x)||typeof x=="string")Array.prototype.forEach.call(x,L,void 0);else for(var V=ye(x),Q=fe(x),we=Q.length,Pe=0;Pe<we;Pe++)L.call(void 0,Q[Pe],V&&V[Pe],x)}var Oe=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ve(x,L){if(x){x=x.split("&");for(var V=0;V<x.length;V++){var Q=x[V].indexOf("="),we=null;if(0<=Q){var Pe=x[V].substring(0,Q);we=x[V].substring(Q+1)}else Pe=x[V];L(Pe,we?decodeURIComponent(we.replace(/\+/g," ")):"")}}}function qe(x){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,x instanceof qe){this.h=x.h,st(this,x.j),this.o=x.o,this.g=x.g,Et(this,x.s),this.l=x.l;var L=x.i,V=new nc;V.i=L.i,L.g&&(V.g=new Map(L.g),V.h=L.h),mn(this,V),this.m=x.m}else x&&(L=String(x).match(Oe))?(this.h=!1,st(this,L[1]||"",!0),this.o=kr(L[2]||""),this.g=kr(L[3]||"",!0),Et(this,L[4]),this.l=kr(L[5]||"",!0),mn(this,L[6]||"",!0),this.m=kr(L[7]||"")):(this.h=!1,this.i=new nc(null,this.h))}qe.prototype.toString=function(){var x=[],L=this.j;L&&x.push(Rr(L,wd,!0),":");var V=this.g;return(V||L=="file")&&(x.push("//"),(L=this.o)&&x.push(Rr(L,wd,!0),"@"),x.push(encodeURIComponent(String(V)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),V=this.s,V!=null&&x.push(":",String(V))),(V=this.l)&&(this.g&&V.charAt(0)!="/"&&x.push("/"),x.push(Rr(V,V.charAt(0)=="/"?lT:pp,!0))),(V=this.i.toString())&&x.push("?",V),(V=this.m)&&x.push("#",Rr(V,KR)),x.join("")};function Ge(x){return new qe(x)}function st(x,L,V){x.j=V?kr(L,!0):L,x.j&&(x.j=x.j.replace(/:$/,""))}function Et(x,L){if(L){if(L=Number(L),isNaN(L)||0>L)throw Error("Bad port number "+L);x.s=L}else x.s=null}function mn(x,L,V){L instanceof nc?(x.i=L,cT(x.i,x.h)):(V||(L=Rr(L,sv)),x.i=new nc(L,x.h))}function Dt(x,L,V){x.i.set(L,V)}function Bn(x){return Dt(x,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),x}function kr(x,L){return x?L?decodeURI(x.replace(/%25/g,"%2525")):decodeURIComponent(x):""}function Rr(x,L,V){return typeof x=="string"?(x=encodeURI(x).replace(L,Ho),V&&(x=x.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),x):null}function Ho(x){return x=x.charCodeAt(0),"%"+(x>>4&15).toString(16)+(x&15).toString(16)}var wd=/[#\/\?@]/g,pp=/[#\?:]/g,lT=/[#\?]/g,sv=/[#\?@]/g,KR=/#/g;function nc(x,L){this.h=this.g=null,this.i=x||null,this.j=!!L}function fu(x){x.g||(x.g=new Map,x.h=0,x.i&&Ve(x.i,function(L,V){x.add(decodeURIComponent(L.replace(/\+/g," ")),V)}))}e=nc.prototype,e.add=function(x,L){fu(this),this.i=null,x=gp(this,x);var V=this.g.get(x);return V||this.g.set(x,V=[]),V.push(L),this.h+=1,this};function mp(x,L){fu(x),L=gp(x,L),x.g.has(L)&&(x.i=null,x.h-=x.g.get(L).length,x.g.delete(L))}function v_(x,L){return fu(x),L=gp(x,L),x.g.has(L)}e.forEach=function(x,L){fu(this),this.g.forEach(function(V,Q){V.forEach(function(we){x.call(L,we,Q,this)},this)},this)},e.na=function(){fu(this);const x=Array.from(this.g.values()),L=Array.from(this.g.keys()),V=[];for(let Q=0;Q<L.length;Q++){const we=x[Q];for(let Pe=0;Pe<we.length;Pe++)V.push(L[Q])}return V},e.V=function(x){fu(this);let L=[];if(typeof x=="string")v_(this,x)&&(L=L.concat(this.g.get(gp(this,x))));else{x=Array.from(this.g.values());for(let V=0;V<x.length;V++)L=L.concat(x[V])}return L},e.set=function(x,L){return fu(this),this.i=null,x=gp(this,x),v_(this,x)&&(this.h-=this.g.get(x).length),this.g.set(x,[L]),this.h+=1,this},e.get=function(x,L){return x?(x=this.V(x),0<x.length?String(x[0]):L):L};function XR(x,L,V){mp(x,L),0<V.length&&(x.i=null,x.g.set(gp(x,L),m(V)),x.h+=V.length)}e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const x=[],L=Array.from(this.g.keys());for(var V=0;V<L.length;V++){var Q=L[V];const Pe=encodeURIComponent(String(Q)),ft=this.V(Q);for(Q=0;Q<ft.length;Q++){var we=Pe;ft[Q]!==""&&(we+="="+encodeURIComponent(String(ft[Q]))),x.push(we)}}return this.i=x.join("&")};function gp(x,L){return L=String(L),x.j&&(L=L.toLowerCase()),L}function cT(x,L){L&&!x.j&&(fu(x),x.i=null,x.g.forEach(function(V,Q){var we=Q.toLowerCase();Q!=we&&(mp(this,Q),XR(this,we,V))},x)),x.j=L}function QR(x,L){const V=new ka;if(a.Image){const Q=new Image;Q.onload=h(du,V,"TestLoadImage: loaded",!0,L,Q),Q.onerror=h(du,V,"TestLoadImage: error",!1,L,Q),Q.onabort=h(du,V,"TestLoadImage: abort",!1,L,Q),Q.ontimeout=h(du,V,"TestLoadImage: timeout",!1,L,Q),a.setTimeout(function(){Q.ontimeout&&Q.ontimeout()},1e4),Q.src=x}else L(!1)}function yp(x,L){const V=new ka,Q=new AbortController,we=setTimeout(()=>{Q.abort(),du(V,"TestPingServer: timeout",!1,L)},1e4);fetch(x,{signal:Q.signal}).then(Pe=>{clearTimeout(we),Pe.ok?du(V,"TestPingServer: ok",!0,L):du(V,"TestPingServer: server error",!1,L)}).catch(()=>{clearTimeout(we),du(V,"TestPingServer: error",!1,L)})}function du(x,L,V,Q,we){try{we&&(we.onload=null,we.onerror=null,we.onabort=null,we.ontimeout=null),Q(V)}catch{}}function G5(){this.g=new nr}function JR(x,L,V){const Q=V||"";try{le(x,function(we,Pe){let ft=we;l(we)&&(ft=gn(we)),L.push(Q+Pe+"="+encodeURIComponent(ft))})}catch(we){throw L.push(Q+"type="+encodeURIComponent("_badmap")),we}}function ov(x){this.l=x.Ub||null,this.j=x.eb||!1}p(ov,rr),ov.prototype.g=function(){return new av(this.l,this.j)},ov.prototype.i=function(x){return function(){return x}}({});function av(x,L){me.call(this),this.D=x,this.o=L,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}p(av,me),e=av.prototype,e.open=function(x,L){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=x,this.A=L,this.readyState=1,mg(this)},e.send=function(x){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const L={headers:this.u,method:this.B,credentials:this.m,cache:void 0};x&&(L.body=x),(this.D||a).fetch(new Request(this.A,L)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,uv(this)),this.readyState=0},e.Sa=function(x){if(this.g&&(this.l=x,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=x.headers,this.readyState=2,mg(this)),this.g&&(this.readyState=3,mg(this),this.g)))if(this.responseType==="arraybuffer")x.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in x){if(this.j=x.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;ZR(this)}else x.text().then(this.Ra.bind(this),this.ga.bind(this))};function ZR(x){x.j.read().then(x.Pa.bind(x)).catch(x.ga.bind(x))}e.Pa=function(x){if(this.g){if(this.o&&x.value)this.response.push(x.value);else if(!this.o){var L=x.value?x.value:new Uint8Array(0);(L=this.v.decode(L,{stream:!x.done}))&&(this.response=this.responseText+=L)}x.done?uv(this):mg(this),this.readyState==3&&ZR(this)}},e.Ra=function(x){this.g&&(this.response=this.responseText=x,uv(this))},e.Qa=function(x){this.g&&(this.response=x,uv(this))},e.ga=function(){this.g&&uv(this)};function uv(x){x.readyState=4,x.l=null,x.j=null,x.v=null,mg(x)}e.setRequestHeader=function(x,L){this.u.append(x,L)},e.getResponseHeader=function(x){return this.h&&this.h.get(x.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const x=[],L=this.h.entries();for(var V=L.next();!V.done;)V=V.value,x.push(V[0]+": "+V[1]),V=L.next();return x.join(`\r
`)};function mg(x){x.onreadystatechange&&x.onreadystatechange.call(x)}Object.defineProperty(av.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(x){this.m=x?"include":"same-origin"}});function eN(x){let L="";return T(x,function(V,Q){L+=Q,L+=":",L+=V,L+=`\r
`}),L}function te(x,L,V){e:{for(Q in V){var Q=!1;break e}Q=!0}Q||(V=eN(V),typeof x=="string"?V!=null&&encodeURIComponent(String(V)):Dt(x,L,V))}function ue(x){me.call(this),this.headers=new Map,this.o=x||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}p(ue,me);var Re=/^https?$/i,At=["POST","PUT"];e=ue.prototype,e.Ha=function(x){this.J=x},e.ea=function(x,L,V,Q){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+x);L=L?L.toUpperCase():"GET",this.D=x,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ht.g(),this.v=this.o?zo(this.o):zo(Ht),this.g.onreadystatechange=d(this.Ea,this);try{this.B=!0,this.g.open(L,String(x),!0),this.B=!1}catch(Pe){$n(this,Pe);return}if(x=V||"",V=new Map(this.headers),Q)if(Object.getPrototypeOf(Q)===Object.prototype)for(var we in Q)V.set(we,Q[we]);else if(typeof Q.keys=="function"&&typeof Q.get=="function")for(const Pe of Q.keys())V.set(Pe,Q.get(Pe));else throw Error("Unknown input type for opt_headers: "+String(Q));Q=Array.from(V.keys()).find(Pe=>Pe.toLowerCase()=="content-type"),we=a.FormData&&x instanceof a.FormData,!(0<=Array.prototype.indexOf.call(At,L,void 0))||Q||we||V.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Pe,ft]of V)this.g.setRequestHeader(Pe,ft);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Wr(this),this.u=!0,this.g.send(x),this.u=!1}catch(Pe){$n(this,Pe)}};function $n(x,L){x.h=!1,x.g&&(x.j=!0,x.g.abort(),x.j=!1),x.l=L,x.m=5,Sr(x),Un(x)}function Sr(x){x.A||(x.A=!0,Ae(x,"complete"),Ae(x,"error"))}e.abort=function(x){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=x||7,Ae(this,"complete"),Ae(this,"abort"),Un(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Un(this,!0)),ue.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?qr(this):this.bb())},e.bb=function(){qr(this)};function qr(x){if(x.h&&typeof o<"u"&&(!x.v[1]||Zi(x)!=4||x.Z()!=2)){if(x.u&&Zi(x)==4)ut(x.Ea,0,x);else if(Ae(x,"readystatechange"),Zi(x)==4){x.h=!1;try{const ft=x.Z();e:switch(ft){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var L=!0;break e;default:L=!1}var V;if(!(V=L)){var Q;if(Q=ft===0){var we=String(x.D).match(Oe)[1]||null;!we&&a.self&&a.self.location&&(we=a.self.location.protocol.slice(0,-1)),Q=!Re.test(we?we.toLowerCase():"")}V=Q}if(V)Ae(x,"complete"),Ae(x,"success");else{x.m=6;try{var Pe=2<Zi(x)?x.g.statusText:""}catch{Pe=""}x.l=Pe+" ["+x.Z()+"]",Sr(x)}}finally{Un(x)}}}}function Un(x,L){if(x.g){Wr(x);const V=x.g,Q=x.v[0]?()=>{}:null;x.g=null,x.v=null,L||Ae(x,"ready");try{V.onreadystatechange=Q}catch{}}}function Wr(x){x.I&&(a.clearTimeout(x.I),x.I=null)}e.isActive=function(){return!!this.g};function Zi(x){return x.g?x.g.readyState:0}e.Z=function(){try{return 2<Zi(this)?this.g.status:-1}catch{return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},e.Oa=function(x){if(this.g){var L=this.g.responseText;return x&&L.indexOf(x)==0&&(L=L.substring(x.length)),An(L)}};function qo(x){try{if(!x.g)return null;if("response"in x.g)return x.g.response;switch(x.H){case"":case"text":return x.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in x.g)return x.g.mozResponseArrayBuffer}return null}catch{return null}}function lv(x){const L={};x=(x.g&&2<=Zi(x)&&x.g.getAllResponseHeaders()||"").split(`\r
`);for(let Q=0;Q<x.length;Q++){if(v(x[Q]))continue;var V=N(x[Q]);const we=V[0];if(V=V[1],typeof V!="string")continue;V=V.trim();const Pe=L[we]||[];L[we]=Pe,Pe.push(V)}S(L,function(Q){return Q.join(", ")})}e.Ba=function(){return this.m},e.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function vp(x,L,V){return V&&V.internalChannelParams&&V.internalChannelParams[x]||L}function b_(x){this.Aa=0,this.i=[],this.j=new ka,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=vp("failFast",!1,x),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=vp("baseRetryDelayMs",5e3,x),this.cb=vp("retryDelaySeedMs",1e4,x),this.Wa=vp("forwardChannelMaxRetries",2,x),this.wa=vp("forwardChannelRequestTimeoutMs",2e4,x),this.pa=x&&x.xmlHttpFactory||void 0,this.Xa=x&&x.Tb||void 0,this.Ca=x&&x.useFetchStreams||!1,this.L=void 0,this.J=x&&x.supportsCrossDomainXhr||!1,this.K="",this.h=new Ra(x&&x.concurrentRequestLimit),this.Da=new G5,this.P=x&&x.fastHandshake||!1,this.O=x&&x.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=x&&x.Rb||!1,x&&x.xa&&this.j.xa(),x&&x.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&x&&x.detectBufferingProxy||!1,this.ja=void 0,x&&x.longPollingTimeout&&0<x.longPollingTimeout&&(this.ja=x.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}e=b_.prototype,e.la=8,e.G=1,e.connect=function(x,L,V,Q){Qr(0),this.W=x,this.H=L||{},V&&Q!==void 0&&(this.H.OSID=V,this.H.OAID=Q),this.F=this.X,this.I=Fie(this,null,this.W),nN(this)};function __(x){if(Rie(x),x.G==3){var L=x.U++,V=Ge(x.I);if(Dt(V,"SID",x.K),Dt(V,"RID",L),Dt(V,"TYPE","terminate"),fT(x,V),L=new jn(x,x.j,L),L.L=2,L.v=Bn(Ge(V)),V=!1,a.navigator&&a.navigator.sendBeacon)try{V=a.navigator.sendBeacon(L.v.toString(),"")}catch{}!V&&a.Image&&(new Image().src=L.v,V=!0),V||(L.g=jie(L.j,null),L.g.ea(L.v)),L.F=Date.now(),ki(L)}Lie(x)}function tN(x){x.g&&(K5(x),x.g.cancel(),x.g=null)}function Rie(x){tN(x),x.u&&(a.clearTimeout(x.u),x.u=null),rN(x),x.h.cancel(),x.s&&(typeof x.s=="number"&&a.clearTimeout(x.s),x.s=null)}function nN(x){if(!qs(x.h)&&!x.s){x.s=!0;var L=x.Ga;B||D(),U||(B(),U=!0),H.add(L,x),x.B=0}}function Yje(x,L){return tc(x.h)>=x.h.j-(x.s?1:0)?!1:x.s?(x.i=L.D.concat(x.i),!0):x.G==1||x.G==2||x.B>=(x.Va?0:x.Wa)?!1:(x.s=Ia(d(x.Ga,x,L),Mie(x,x.B)),x.B++,!0)}e.Ga=function(x){if(this.s)if(this.s=null,this.G==1){if(!x){this.U=Math.floor(1e5*Math.random()),x=this.U++;const we=new jn(this,this.j,x);let Pe=this.o;if(this.S&&(Pe?(Pe=C(Pe),k(Pe,this.S)):Pe=this.S),this.m!==null||this.O||(we.H=Pe,Pe=null),this.P)e:{for(var L=0,V=0;V<this.i.length;V++){t:{var Q=this.i[V];if("__data__"in Q.map&&(Q=Q.map.__data__,typeof Q=="string")){Q=Q.length;break t}Q=void 0}if(Q===void 0)break;if(L+=Q,4096<L){L=V;break e}if(L===4096||V===this.i.length-1){L=V+1;break e}}L=1e3}else L=1e3;L=Die(this,we,L),V=Ge(this.I),Dt(V,"RID",x),Dt(V,"CVER",22),this.D&&Dt(V,"X-HTTP-Session-Id",this.D),fT(this,V),Pe&&(this.O?L="headers="+encodeURIComponent(String(eN(Pe)))+"&"+L:this.m&&te(V,this.m,Pe)),Y(this.h,we),this.Ua&&Dt(V,"TYPE","init"),this.P?(Dt(V,"$req",L),Dt(V,"SID","null"),we.T=!0,Vt(we,V,null)):Vt(we,V,L),this.G=2}}else this.G==3&&(x?Nie(this,x):this.i.length==0||qs(this.h)||Nie(this))};function Nie(x,L){var V;L?V=L.l:V=x.U++;const Q=Ge(x.I);Dt(Q,"SID",x.K),Dt(Q,"RID",V),Dt(Q,"AID",x.T),fT(x,Q),x.m&&x.o&&te(Q,x.m,x.o),V=new jn(x,x.j,V,x.B+1),x.m===null&&(V.H=x.o),L&&(x.i=L.D.concat(x.i)),L=Die(x,V,1e3),V.I=Math.round(.5*x.wa)+Math.round(.5*x.wa*Math.random()),Y(x.h,V),Vt(V,Q,L)}function fT(x,L){x.H&&T(x.H,function(V,Q){Dt(L,Q,V)}),x.l&&le({},function(V,Q){Dt(L,Q,V)})}function Die(x,L,V){V=Math.min(x.i.length,V);var Q=x.l?d(x.l.Na,x.l,x):null;e:{var we=x.i;let Pe=-1;for(;;){const ft=["count="+V];Pe==-1?0<V?(Pe=we[0].g,ft.push("ofs="+Pe)):Pe=0:ft.push("ofs="+Pe);let Gr=!0;for(let go=0;go<V;go++){let fr=we[go].g;const Wo=we[go].map;if(fr-=Pe,0>fr)Pe=Math.max(0,we[go].g-100),Gr=!1;else try{JR(Wo,ft,"req"+fr+"_")}catch{Q&&Q(Wo)}}if(Gr){Q=ft.join("&");break e}}}return x=x.i.splice(0,V),L.D=x,Q}function Pie(x){if(!x.g&&!x.u){x.Y=1;var L=x.Fa;B||D(),U||(B(),U=!0),H.add(L,x),x.v=0}}function Y5(x){return x.g||x.u||3<=x.v?!1:(x.Y++,x.u=Ia(d(x.Fa,x),Mie(x,x.v)),x.v++,!0)}e.Fa=function(){if(this.u=null,Oie(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var x=2*this.R;this.j.info("BP detection timer enabled: "+x),this.A=Ia(d(this.ab,this),x)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Qr(10),tN(this),Oie(this))};function K5(x){x.A!=null&&(a.clearTimeout(x.A),x.A=null)}function Oie(x){x.g=new jn(x,x.j,"rpc",x.Y),x.m===null&&(x.g.H=x.o),x.g.O=0;var L=Ge(x.qa);Dt(L,"RID","rpc"),Dt(L,"SID",x.K),Dt(L,"AID",x.T),Dt(L,"CI",x.F?"0":"1"),!x.F&&x.ja&&Dt(L,"TO",x.ja),Dt(L,"TYPE","xmlhttp"),fT(x,L),x.m&&x.o&&te(L,x.m,x.o),x.L&&(x.g.I=x.L);var V=x.g;x=x.ia,V.L=1,V.v=Bn(Ge(L)),V.m=null,V.P=!0,sr(V,x)}e.Za=function(){this.C!=null&&(this.C=null,tN(this),Y5(this),Qr(19))};function rN(x){x.C!=null&&(a.clearTimeout(x.C),x.C=null)}function $ie(x,L){var V=null;if(x.g==L){rN(x),K5(x),x.g=null;var Q=2}else if(_d(x.h,L))V=L.D,se(x.h,L),Q=1;else return;if(x.G!=0){if(L.o)if(Q==1){V=L.m?L.m.length:0,L=Date.now()-L.F;var we=x.B;Q=cl(),Ae(Q,new cu(Q,V)),nN(x)}else Pie(x);else if(we=L.s,we==3||we==0&&0<L.X||!(Q==1&&Yje(x,L)||Q==2&&Y5(x)))switch(V&&0<V.length&&(L=x.h,L.i=L.i.concat(V)),we){case 1:cv(x,5);break;case 4:cv(x,10);break;case 3:cv(x,6);break;default:cv(x,2)}}}function Mie(x,L){let V=x.Ta+Math.floor(Math.random()*x.cb);return x.isActive()||(V*=2),V*L}function cv(x,L){if(x.j.info("Error code "+L),L==2){var V=d(x.fb,x),Q=x.Xa;const we=!Q;Q=new qe(Q||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||st(Q,"https"),Bn(Q),we?QR(Q.toString(),V):yp(Q.toString(),V)}else Qr(2);x.G=0,x.l&&x.l.sa(L),Lie(x),Rie(x)}e.fb=function(x){x?(this.j.info("Successfully pinged google.com"),Qr(2)):(this.j.info("Failed to ping google.com"),Qr(1))};function Lie(x){if(x.G=0,x.ka=[],x.l){const L=Z(x.h);(L.length!=0||x.i.length!=0)&&(g(x.ka,L),g(x.ka,x.i),x.h.i.length=0,m(x.i),x.i.length=0),x.l.ra()}}function Fie(x,L,V){var Q=V instanceof qe?Ge(V):new qe(V);if(Q.g!="")L&&(Q.g=L+"."+Q.g),Et(Q,Q.s);else{var we=a.location;Q=we.protocol,L=L?L+"."+we.hostname:we.hostname,we=+we.port;var Pe=new qe(null);Q&&st(Pe,Q),L&&(Pe.g=L),we&&Et(Pe,we),V&&(Pe.l=V),Q=Pe}return V=x.D,L=x.ya,V&&L&&Dt(Q,V,L),Dt(Q,"VER",x.la),fT(x,Q),Q}function jie(x,L,V){if(L&&!x.J)throw Error("Can't create secondary domain capable XhrIo object.");return L=x.Ca&&!x.pa?new ue(new ov({eb:V})):new ue(x.pa),L.Ha(x.J),L}e.isActive=function(){return!!this.l&&this.l.isActive(this)};function Bie(){}e=Bie.prototype,e.ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){};function iN(){}iN.prototype.g=function(x,L){return new fl(x,L)};function fl(x,L){me.call(this),this.g=new b_(L),this.l=x,this.h=L&&L.messageUrlParams||null,x=L&&L.messageHeaders||null,L&&L.clientProtocolHeaderRequired&&(x?x["X-Client-Protocol"]="webchannel":x={"X-Client-Protocol":"webchannel"}),this.g.o=x,x=L&&L.initMessageHeaders||null,L&&L.messageContentType&&(x?x["X-WebChannel-Content-Type"]=L.messageContentType:x={"X-WebChannel-Content-Type":L.messageContentType}),L&&L.va&&(x?x["X-WebChannel-Client-Profile"]=L.va:x={"X-WebChannel-Client-Profile":L.va}),this.g.S=x,(x=L&&L.Sb)&&!v(x)&&(this.g.m=x),this.v=L&&L.supportsCrossDomainXhr||!1,this.u=L&&L.sendRawJson||!1,(L=L&&L.httpSessionIdParam)&&!v(L)&&(this.g.D=L,x=this.h,x!==null&&L in x&&(x=this.h,L in x&&delete x[L])),this.j=new w_(this)}p(fl,me),fl.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},fl.prototype.close=function(){__(this.g)},fl.prototype.o=function(x){var L=this.g;if(typeof x=="string"){var V={};V.__data__=x,x=V}else this.u&&(V={},V.__data__=gn(x),x=V);L.i.push(new Vo(L.Ya++,x)),L.G==3&&nN(L)},fl.prototype.N=function(){this.g.l=null,delete this.j,__(this.g),delete this.g,fl.aa.N.call(this)};function Uie(x){Mi.call(this),x.__headers__&&(this.headers=x.__headers__,this.statusCode=x.__status__,delete x.__headers__,delete x.__status__);var L=x.__sm__;if(L){e:{for(const V in L){x=V;break e}x=void 0}(this.i=x)&&(x=this.i,L=L!==null&&x in L?L[x]:void 0),this.data=L}else this.data=x}p(Uie,Mi);function zie(){Ar.call(this),this.status=1}p(zie,Ar);function w_(x){this.g=x}p(w_,Bie),w_.prototype.ua=function(){Ae(this.g,"a")},w_.prototype.ta=function(x){Ae(this.g,new Uie(x))},w_.prototype.sa=function(x){Ae(this.g,new zie)},w_.prototype.ra=function(){Ae(this.g,"b")},iN.prototype.createWebChannel=iN.prototype.g,fl.prototype.send=fl.prototype.o,fl.prototype.open=fl.prototype.m,fl.prototype.close=fl.prototype.close,ADe=function(){return new iN},CDe=function(){return cl()},TDe=gs,BV={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ot.NO_ERROR=0,ot.TIMEOUT=8,ot.HTTP_ERROR=6,zP=ot,St.COMPLETE="complete",SDe=St,$i.EventType=In,In.OPEN="a",In.CLOSE="b",In.ERROR="c",In.MESSAGE="d",me.prototype.listen=me.prototype.K,B2=$i,xDe=ov,ue.prototype.listenOnce=ue.prototype.L,ue.prototype.getLastError=ue.prototype.Ka,ue.prototype.getLastErrorCode=ue.prototype.Ba,ue.prototype.getStatus=ue.prototype.Z,ue.prototype.getResponseJson=ue.prototype.Oa,ue.prototype.getResponseText=ue.prototype.oa,ue.prototype.send=ue.prototype.ea,ue.prototype.setWithCredentials=ue.prototype.Ha,EDe=ue}).apply(typeof mD<"u"?mD:typeof self<"u"?self:typeof window<"u"?window:{});const The="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _u{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}_u.UNAUTHENTICATED=new _u(null),_u.GOOGLE_CREDENTIALS=new _u("google-credentials-uid"),_u.FIRST_PARTY=new _u("first-party-uid"),_u.MOCK_USER=new _u("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let FS="10.12.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ab=new S4("@firebase/firestore");function HT(){return ab.logLevel}function It(e,...t){if(ab.logLevel<=Gn.DEBUG){const n=t.map(nZ);ab.debug(`Firestore (${FS}): ${e}`,...n)}}function Lm(e,...t){if(ab.logLevel<=Gn.ERROR){const n=t.map(nZ);ab.error(`Firestore (${FS}): ${e}`,...n)}}function bI(e,...t){if(ab.logLevel<=Gn.WARN){const n=t.map(nZ);ab.warn(`Firestore (${FS}): ${e}`,...n)}}function nZ(e){if(typeof e=="string")return e;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(e)}catch{return e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function an(e="Unexpected state"){const t=`FIRESTORE (${FS}) INTERNAL ASSERTION FAILED: `+e;throw Lm(t),new Error(t)}function ri(e,t){e||an()}function hn(e,t){return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Be={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class bt extends np{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lm{constructor(){this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n$t{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class r$t{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable(()=>n(_u.UNAUTHENTICATED))}shutdown(){}}class i$t{constructor(t){this.t=t,this.currentUser=_u.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){let r=this.i;const i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let s=new lm;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new lm,t.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const u=s;t.enqueueRetryable(async()=>{await u.promise,await i(this.currentUser)})},a=u=>{It("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?a(u):(It("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new lm)}},0),o()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==t?(It("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ri(typeof r.accessToken=="string"),new n$t(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const t=this.auth&&this.auth.getUid();return ri(t===null||typeof t=="string"),new _u(t)}}class s$t{constructor(t,n,r){this.l=t,this.h=n,this.P=r,this.type="FirstParty",this.user=_u.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const t=this.T();return t&&this.I.set("Authorization",t),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class o$t{constructor(t,n,r){this.l=t,this.h=n,this.P=r}getToken(){return Promise.resolve(new s$t(this.l,this.h,this.P))}start(t,n){t.enqueueRetryable(()=>n(_u.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class a$t{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class u$t{constructor(t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(t,n){const r=s=>{s.error!=null&&It("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,It("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{t.enqueueRetryable(()=>r(s))};const i=s=>{It("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):It("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(n=>n?(ri(typeof n.token=="string"),this.R=n.token,new a$t(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l$t(e){const t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IDe{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/t.length)*t.length;let r="";for(;r.length<20;){const i=l$t(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=t.charAt(i[s]%t.length))}return r}}function vr(e,t){return e<t?-1:e>t?1:0}function px(e,t,n){return e.length===t.length&&e.every((r,i)=>n(r,t[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ls{constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new bt(Be.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new bt(Be.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new bt(Be.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new bt(Be.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return Ls.fromMillis(Date.now())}static fromDate(t){return Ls.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),r=Math.floor(1e6*(t-1e3*n));return new Ls(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?vr(this.nanoseconds,t.nanoseconds):vr(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dn{constructor(t){this.timestamp=t}static fromTimestamp(t){return new dn(t)}static min(){return new dn(new Ls(0,0))}static max(){return new dn(new Ls(253402300799,999999999))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _I{constructor(t,n,r){n===void 0?n=0:n>t.length&&an(),r===void 0?r=t.length-n:r>t.length-n&&an(),this.segments=t,this.offset=n,this.len=r}get length(){return this.len}isEqual(t){return _I.comparator(this,t)===0}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof _I?t.forEach(r=>{n.push(r)}):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,r=this.limit();n<r;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const r=Math.min(t.length,n.length);for(let i=0;i<r;i++){const s=t.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return t.length<n.length?-1:t.length>n.length?1:0}}class ci extends _I{construct(t,n,r){return new ci(t,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const n=[];for(const r of t){if(r.indexOf("//")>=0)throw new bt(Be.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new ci(n)}static emptyPath(){return new ci([])}}const c$t=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Io extends _I{construct(t,n,r){return new Io(t,n,r)}static isValidIdentifier(t){return c$t.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Io.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Io(["__name__"])}static fromServerFormat(t){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new bt(Be.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<t.length;){const a=t[i];if(a==="\\"){if(i+1===t.length)throw new bt(Be.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const u=t[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new bt(Be.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new bt(Be.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Io(n)}static emptyPath(){return new Io([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ut{constructor(t){this.path=t}static fromPath(t){return new Ut(ci.fromString(t))}static fromName(t){return new Ut(ci.fromString(t).popFirst(5))}static empty(){return new Ut(ci.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&ci.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return ci.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new Ut(new ci(t.slice()))}}function f$t(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=dn.fromTimestamp(r===1e9?new Ls(n+1,0):new Ls(n,r));return new uy(i,Ut.empty(),t)}function d$t(e){return new uy(e.readTime,e.key,-1)}class uy{constructor(t,n,r){this.readTime=t,this.documentKey=n,this.largestBatchId=r}static min(){return new uy(dn.min(),Ut.empty(),-1)}static max(){return new uy(dn.max(),Ut.empty(),-1)}}function h$t(e,t){let n=e.readTime.compareTo(t.readTime);return n!==0?n:(n=Ut.comparator(e.documentKey,t.documentKey),n!==0?n:vr(e.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p$t="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class m$t{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tR(e){if(e.code!==Be.FAILED_PRECONDITION||e.message!==p$t)throw e;It("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qe{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&an(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new Qe((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(t,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((t,n)=>{this.next(t,n)})}wrapUserFunction(t){try{const n=t();return n instanceof Qe?n:Qe.resolve(n)}catch(n){return Qe.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction(()=>t(n)):Qe.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction(()=>t(n)):Qe.reject(n)}static resolve(t){return new Qe((n,r)=>{n(t)})}static reject(t){return new Qe((n,r)=>{r(t)})}static waitFor(t){return new Qe((n,r)=>{let i=0,s=0,o=!1;t.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},u=>r(u))}),o=!0,s===i&&n()})}static or(t){let n=Qe.resolve(!1);for(const r of t)n=n.next(i=>i?Qe.resolve(i):r());return n}static forEach(t,n){const r=[];return t.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(t,n){return new Qe((r,i)=>{const s=t.length,o=new Array(s);let a=0;for(let u=0;u<s;u++){const l=u;n(t[l]).next(c=>{o[l]=c,++a,a===s&&r(o)},c=>i(c))}})}static doWhile(t,n){return new Qe((r,i)=>{const s=()=>{t()===!0?n().next(()=>{s()},i):r()};s()})}}function g$t(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function nR(e){return e.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rZ{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.se&&this.se(t),t}}rZ.oe=-1;function N4(e){return e==null}function J$(e){return e===0&&1/e==-1/0}function y$t(e){return typeof e=="number"&&Number.isInteger(e)&&!J$(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Che(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Zb(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function kDe(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oi{constructor(t,n){this.comparator=t,this.root=n||To.EMPTY}insert(t,n){return new Oi(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,To.BLACK,null,null))}remove(t){return new Oi(this.comparator,this.root.remove(t,this.comparator).copy(null,null,To.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(t,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(t){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(t,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((n,r)=>(t(n,r),!1))}toString(){const t=[];return this.inorderTraversal((n,r)=>(t.push(`${n}:${r}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new gD(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new gD(this.root,t,this.comparator,!1)}getReverseIterator(){return new gD(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new gD(this.root,t,this.comparator,!0)}}class gD{constructor(t,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!t.isEmpty();)if(s=n?r(t.key,n):1,n&&i&&(s*=-1),s<0)t=this.isReverse?t.left:t.right;else{if(s===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class To{constructor(t,n,r,i,s){this.key=t,this.value=n,this.color=r??To.RED,this.left=i??To.EMPTY,this.right=s??To.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,r,i,s){return new To(t??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,r){let i=this;const s=r(t,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(t,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(t,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return To.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(t,i.key)===0){if(i.right.isEmpty())return To.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,To.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,To.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw an();const t=this.left.check();if(t!==this.right.check())throw an();return t+(this.isRed()?0:1)}}To.EMPTY=null,To.RED=!0,To.BLACK=!1;To.EMPTY=new class{constructor(){this.size=0}get key(){throw an()}get value(){throw an()}get color(){throw an()}get left(){throw an()}get right(){throw an()}copy(t,n,r,i,s){return this}insert(t,n,r){return new To(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oo{constructor(t){this.comparator=t,this.data=new Oi(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((n,r)=>(t(n),!1))}forEachInRange(t,n){const r=this.data.getIteratorFrom(t[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,t[1])>=0)return;n(i.key)}}forEachWhile(t,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!t(r.getNext().key))return}firstAfterOrEqual(t){const n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new Ahe(this.data.getIterator())}getIteratorFrom(t){return new Ahe(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach(r=>{n=n.add(r)}),n}isEqual(t){if(!(t instanceof Oo)||this.size!==t.size)return!1;const n=this.data.getIterator(),r=t.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(n=>{t.push(n)}),t}toString(){const t=[];return this.forEach(n=>t.push(n)),"SortedSet("+t.toString()+")"}copy(t){const n=new Oo(this.comparator);return n.data=t,n}}class Ahe{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Al{constructor(t){this.fields=t,t.sort(Io.comparator)}static empty(){return new Al([])}unionWith(t){let n=new Oo(Io.comparator);for(const r of this.fields)n=n.add(r);for(const r of t)n=n.add(r);return new Al(n.toArray())}covers(t){for(const n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return px(this.fields,t.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RDe extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ea{constructor(t){this.binaryString=t}static fromBase64String(t){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new RDe("Invalid base64 string: "+s):s}}(t);return new Ea(n)}static fromUint8Array(t){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(t);return new Ea(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return vr(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Ea.EMPTY_BYTE_STRING=new Ea("");const v$t=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ly(e){if(ri(!!e),typeof e=="string"){let t=0;const n=v$t.exec(e);if(ri(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),t=Number(i)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:_s(e.seconds),nanos:_s(e.nanos)}}function _s(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function ub(e){return typeof e=="string"?Ea.fromBase64String(e):Ea.fromUint8Array(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iZ(e){var t,n;return((n=(((t=e==null?void 0:e.mapValue)===null||t===void 0?void 0:t.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function sZ(e){const t=e.mapValue.fields.__previous_value__;return iZ(t)?sZ(t):t}function wI(e){const t=ly(e.mapValue.fields.__local_write_time__.timestampValue);return new Ls(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b$t{constructor(t,n,r,i,s,o,a,u,l){this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=l}}class EI{constructor(t,n){this.projectId=t,this.database=n||"(default)"}static empty(){return new EI("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(t){return t instanceof EI&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yD={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function lb(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?iZ(e)?4:_$t(e)?9007199254740991:10:an()}function Mh(e,t){if(e===t)return!0;const n=lb(e);if(n!==lb(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return wI(e).isEqual(wI(t));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=ly(i.timestampValue),a=ly(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(i,s){return ub(i.bytesValue).isEqual(ub(s.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(i,s){return _s(i.geoPointValue.latitude)===_s(s.geoPointValue.latitude)&&_s(i.geoPointValue.longitude)===_s(s.geoPointValue.longitude)}(e,t);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return _s(i.integerValue)===_s(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=_s(i.doubleValue),a=_s(s.doubleValue);return o===a?J$(o)===J$(a):isNaN(o)&&isNaN(a)}return!1}(e,t);case 9:return px(e.arrayValue.values||[],t.arrayValue.values||[],Mh);case 10:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(Che(o)!==Che(a))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(a[u]===void 0||!Mh(o[u],a[u])))return!1;return!0}(e,t);default:return an()}}function xI(e,t){return(e.values||[]).find(n=>Mh(n,t))!==void 0}function mx(e,t){if(e===t)return 0;const n=lb(e),r=lb(t);if(n!==r)return vr(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return vr(e.booleanValue,t.booleanValue);case 2:return function(s,o){const a=_s(s.integerValue||s.doubleValue),u=_s(o.integerValue||o.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(e,t);case 3:return Ihe(e.timestampValue,t.timestampValue);case 4:return Ihe(wI(e),wI(t));case 5:return vr(e.stringValue,t.stringValue);case 6:return function(s,o){const a=ub(s),u=ub(o);return a.compareTo(u)}(e.bytesValue,t.bytesValue);case 7:return function(s,o){const a=s.split("/"),u=o.split("/");for(let l=0;l<a.length&&l<u.length;l++){const c=vr(a[l],u[l]);if(c!==0)return c}return vr(a.length,u.length)}(e.referenceValue,t.referenceValue);case 8:return function(s,o){const a=vr(_s(s.latitude),_s(o.latitude));return a!==0?a:vr(_s(s.longitude),_s(o.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(s,o){const a=s.values||[],u=o.values||[];for(let l=0;l<a.length&&l<u.length;++l){const c=mx(a[l],u[l]);if(c)return c}return vr(a.length,u.length)}(e.arrayValue,t.arrayValue);case 10:return function(s,o){if(s===yD.mapValue&&o===yD.mapValue)return 0;if(s===yD.mapValue)return 1;if(o===yD.mapValue)return-1;const a=s.fields||{},u=Object.keys(a),l=o.fields||{},c=Object.keys(l);u.sort(),c.sort();for(let f=0;f<u.length&&f<c.length;++f){const d=vr(u[f],c[f]);if(d!==0)return d;const h=mx(a[u[f]],l[c[f]]);if(h!==0)return h}return vr(u.length,c.length)}(e.mapValue,t.mapValue);default:throw an()}}function Ihe(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return vr(e,t);const n=ly(e),r=ly(t),i=vr(n.seconds,r.seconds);return i!==0?i:vr(n.nanos,r.nanos)}function gx(e){return UV(e)}function UV(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(n){const r=ly(n);return`time(${r.seconds},${r.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(n){return ub(n).toBase64()}(e.bytesValue):"referenceValue"in e?function(n){return Ut.fromName(n).toString()}(e.referenceValue):"geoPointValue"in e?function(n){return`geo(${n.latitude},${n.longitude})`}(e.geoPointValue):"arrayValue"in e?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=UV(s);return r+"]"}(e.arrayValue):"mapValue"in e?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${UV(n.fields[o])}`;return i+"}"}(e.mapValue):an()}function khe(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function zV(e){return!!e&&"integerValue"in e}function oZ(e){return!!e&&"arrayValue"in e}function Rhe(e){return!!e&&"nullValue"in e}function Nhe(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function VP(e){return!!e&&"mapValue"in e}function qC(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return Zb(e.mapValue.fields,(n,r)=>t.mapValue.fields[n]=qC(r)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=qC(e.arrayValue.values[n]);return t}return Object.assign({},e)}function _$t(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nu{constructor(t){this.value=t}static empty(){return new Nu({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let r=0;r<t.length-1;++r)if(n=(n.mapValue.fields||{})[t.get(r)],!VP(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=qC(n)}setAll(t){let n=Io.emptyPath(),r={},i=[];t.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=qC(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(t){const n=this.field(t.popLast());VP(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return Mh(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<t.length;++r){let i=n.mapValue.fields[t.get(r)];VP(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[t.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(t,n,r){Zb(n,(i,s)=>t[i]=s);for(const i of r)delete t[i]}clone(){return new Nu(qC(this.value))}}function NDe(e){const t=[];return Zb(e.fields,(n,r)=>{const i=new Io([n]);if(VP(r)){const s=NDe(r.mapValue).fields;if(s.length===0)t.push(i);else for(const o of s)t.push(i.child(o))}else t.push(i)}),new Al(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ca{constructor(t,n,r,i,s,o,a){this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(t){return new ca(t,0,dn.min(),dn.min(),dn.min(),Nu.empty(),0)}static newFoundDocument(t,n,r,i){return new ca(t,1,n,dn.min(),r,i,0)}static newNoDocument(t,n){return new ca(t,2,n,dn.min(),dn.min(),Nu.empty(),0)}static newUnknownDocument(t,n){return new ca(t,3,n,dn.min(),dn.min(),Nu.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual(dn.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Nu.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Nu.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=dn.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof ca&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new ca(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Z$=class{constructor(t,n){this.position=t,this.inclusive=n}};function Dhe(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const s=t[i],o=e.position[i];if(s.field.isKeyField()?r=Ut.comparator(Ut.fromName(o.referenceValue),n.key):r=mx(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function Phe(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Mh(e.position[n],t.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SI{constructor(t,n="asc"){this.field=t,this.dir=n}}function w$t(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let DDe=class{};class Es extends DDe{constructor(t,n,r){super(),this.field=t,this.op=n,this.value=r}static create(t,n,r){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,r):new x$t(t,n,r):n==="array-contains"?new C$t(t,r):n==="in"?new A$t(t,r):n==="not-in"?new I$t(t,r):n==="array-contains-any"?new k$t(t,r):new Es(t,n,r)}static createKeyFieldInFilter(t,n,r){return n==="in"?new S$t(t,r):new T$t(t,r)}matches(t){const n=t.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(mx(n,this.value)):n!==null&&lb(this.value)===lb(n)&&this.matchesComparison(mx(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return an()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Jf extends DDe{constructor(t,n){super(),this.filters=t,this.op=n,this.ae=null}static create(t,n){return new Jf(t,n)}matches(t){return PDe(this)?this.filters.find(n=>!n.matches(t))===void 0:this.filters.find(n=>n.matches(t))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((t,n)=>t.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function PDe(e){return e.op==="and"}function ODe(e){return E$t(e)&&PDe(e)}function E$t(e){for(const t of e.filters)if(t instanceof Jf)return!1;return!0}function VV(e){if(e instanceof Es)return e.field.canonicalString()+e.op.toString()+gx(e.value);if(ODe(e))return e.filters.map(t=>VV(t)).join(",");{const t=e.filters.map(n=>VV(n)).join(",");return`${e.op}(${t})`}}function $De(e,t){return e instanceof Es?function(r,i){return i instanceof Es&&r.op===i.op&&r.field.isEqual(i.field)&&Mh(r.value,i.value)}(e,t):e instanceof Jf?function(r,i){return i instanceof Jf&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&$De(o,i.filters[a]),!0):!1}(e,t):void an()}function MDe(e){return e instanceof Es?function(n){return`${n.field.canonicalString()} ${n.op} ${gx(n.value)}`}(e):e instanceof Jf?function(n){return n.op.toString()+" {"+n.getFilters().map(MDe).join(" ,")+"}"}(e):"Filter"}class x$t extends Es{constructor(t,n,r){super(t,n,r),this.key=Ut.fromName(r.referenceValue)}matches(t){const n=Ut.comparator(t.key,this.key);return this.matchesComparison(n)}}class S$t extends Es{constructor(t,n){super(t,"in",n),this.keys=LDe("in",n)}matches(t){return this.keys.some(n=>n.isEqual(t.key))}}class T$t extends Es{constructor(t,n){super(t,"not-in",n),this.keys=LDe("not-in",n)}matches(t){return!this.keys.some(n=>n.isEqual(t.key))}}function LDe(e,t){var n;return(((n=t.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>Ut.fromName(r.referenceValue))}class C$t extends Es{constructor(t,n){super(t,"array-contains",n)}matches(t){const n=t.data.field(this.field);return oZ(n)&&xI(n.arrayValue,this.value)}}class A$t extends Es{constructor(t,n){super(t,"in",n)}matches(t){const n=t.data.field(this.field);return n!==null&&xI(this.value.arrayValue,n)}}class I$t extends Es{constructor(t,n){super(t,"not-in",n)}matches(t){if(xI(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=t.data.field(this.field);return n!==null&&!xI(this.value.arrayValue,n)}}class k$t extends Es{constructor(t,n){super(t,"array-contains-any",n)}matches(t){const n=t.data.field(this.field);return!(!oZ(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>xI(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R$t{constructor(t,n=null,r=[],i=[],s=null,o=null,a=null){this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function Ohe(e,t=null,n=[],r=[],i=null,s=null,o=null){return new R$t(e,t,n,r,i,s,o)}function aZ(e){const t=hn(e);if(t.ue===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map(r=>VV(r)).join(","),n+="|ob:",n+=t.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),N4(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map(r=>gx(r)).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map(r=>gx(r)).join(",")),t.ue=n}return t.ue}function uZ(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!w$t(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!$De(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Phe(e.startAt,t.startAt)&&Phe(e.endAt,t.endAt)}function HV(e){return Ut.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jS{constructor(t,n=null,r=[],i=[],s=null,o="F",a=null,u=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function N$t(e,t,n,r,i,s,o,a){return new jS(e,t,n,r,i,s,o,a)}function lZ(e){return new jS(e)}function $he(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function FDe(e){return e.collectionGroup!==null}function WC(e){const t=hn(e);if(t.ce===null){t.ce=[];const n=new Set;for(const s of t.explicitOrderBy)t.ce.push(s),n.add(s.field.canonicalString());const r=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Oo(Io.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(t).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||t.ce.push(new SI(s,r))}),n.has(Io.keyField().canonicalString())||t.ce.push(new SI(Io.keyField(),r))}return t.ce}function vh(e){const t=hn(e);return t.le||(t.le=D$t(t,WC(e))),t.le}function D$t(e,t){if(e.limitType==="F")return Ohe(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new SI(i.field,s)});const n=e.endAt?new Z$(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new Z$(e.startAt.position,e.startAt.inclusive):null;return Ohe(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function qV(e,t){const n=e.filters.concat([t]);return new jS(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function WV(e,t,n){return new jS(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function D4(e,t){return uZ(vh(e),vh(t))&&e.limitType===t.limitType}function jDe(e){return`${aZ(vh(e))}|lt:${e.limitType}`}function uw(e){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>MDe(i)).join(", ")}]`),N4(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>gx(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>gx(i)).join(",")),`Target(${r})`}(vh(e))}; limitType=${e.limitType})`}function P4(e,t){return t.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):Ut.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(e,t)&&function(r,i){for(const s of WC(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(e,t)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(e,t)&&function(r,i){return!(r.startAt&&!function(o,a,u){const l=Dhe(o,a,u);return o.inclusive?l<=0:l<0}(r.startAt,WC(r),i)||r.endAt&&!function(o,a,u){const l=Dhe(o,a,u);return o.inclusive?l>=0:l>0}(r.endAt,WC(r),i))}(e,t)}function P$t(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function BDe(e){return(t,n)=>{let r=!1;for(const i of WC(e)){const s=O$t(i,t,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function O$t(e,t,n){const r=e.field.isKeyField()?Ut.comparator(t.key,n.key):function(s,o,a){const u=o.data.field(s),l=a.data.field(s);return u!==null&&l!==null?mx(u,l):an()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return an()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BS{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,t))return s}}has(t){return this.get(t)!==void 0}set(t,n){const r=this.mapKeyFn(t),i=this.inner[r];if(i===void 0)return this.inner[r]=[[t,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],t))return void(i[s]=[t,n]);i.push([t,n]),this.innerSize++}delete(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(t){Zb(this.inner,(n,r)=>{for(const[i,s]of r)t(i,s)})}isEmpty(){return kDe(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $$t=new Oi(Ut.comparator);function Fm(){return $$t}const UDe=new Oi(Ut.comparator);function U2(...e){let t=UDe;for(const n of e)t=t.insert(n.key,n);return t}function zDe(e){let t=UDe;return e.forEach((n,r)=>t=t.insert(n,r.overlayedDocument)),t}function y1(){return GC()}function VDe(){return GC()}function GC(){return new BS(e=>e.toString(),(e,t)=>e.isEqual(t))}const M$t=new Oi(Ut.comparator),L$t=new Oo(Ut.comparator);function zn(...e){let t=L$t;for(const n of e)t=t.add(n);return t}const F$t=new Oo(vr);function j$t(){return F$t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HDe(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:J$(t)?"-0":t}}function qDe(e){return{integerValue:""+e}}function B$t(e,t){return y$t(t)?qDe(t):HDe(e,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O4{constructor(){this._=void 0}}function U$t(e,t,n){return e instanceof TI?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&iZ(s)&&(s=sZ(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,t):e instanceof CI?GDe(e,t):e instanceof AI?YDe(e,t):function(i,s){const o=WDe(i,s),a=Mhe(o)+Mhe(i.Pe);return zV(o)&&zV(i.Pe)?qDe(a):HDe(i.serializer,a)}(e,t)}function z$t(e,t,n){return e instanceof CI?GDe(e,t):e instanceof AI?YDe(e,t):n}function WDe(e,t){return e instanceof eM?function(r){return zV(r)||function(s){return!!s&&"doubleValue"in s}(r)}(t)?t:{integerValue:0}:null}class TI extends O4{}class CI extends O4{constructor(t){super(),this.elements=t}}function GDe(e,t){const n=KDe(t);for(const r of e.elements)n.some(i=>Mh(i,r))||n.push(r);return{arrayValue:{values:n}}}class AI extends O4{constructor(t){super(),this.elements=t}}function YDe(e,t){let n=KDe(t);for(const r of e.elements)n=n.filter(i=>!Mh(i,r));return{arrayValue:{values:n}}}class eM extends O4{constructor(t,n){super(),this.serializer=t,this.Pe=n}}function Mhe(e){return _s(e.integerValue||e.doubleValue)}function KDe(e){return oZ(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V$t{constructor(t,n){this.field=t,this.transform=n}}function H$t(e,t){return e.field.isEqual(t.field)&&function(r,i){return r instanceof CI&&i instanceof CI||r instanceof AI&&i instanceof AI?px(r.elements,i.elements,Mh):r instanceof eM&&i instanceof eM?Mh(r.Pe,i.Pe):r instanceof TI&&i instanceof TI}(e.transform,t.transform)}class q$t{constructor(t,n){this.version=t,this.transformResults=n}}class Wu{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new Wu}static exists(t){return new Wu(void 0,t)}static updateTime(t){return new Wu(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function HP(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}class $4{}function XDe(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new M4(e.key,Wu.none()):new rR(e.key,e.data,Wu.none());{const n=e.data,r=Nu.empty();let i=new Oo(Io.comparator);for(let s of t.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new qy(e.key,r,new Al(i.toArray()),Wu.none())}}function W$t(e,t,n){e instanceof rR?function(i,s,o){const a=i.value.clone(),u=Fhe(i.fieldTransforms,s,o.transformResults);a.setAll(u),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(e,t,n):e instanceof qy?function(i,s,o){if(!HP(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=Fhe(i.fieldTransforms,s,o.transformResults),u=s.data;u.setAll(QDe(i)),u.setAll(a),s.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(e,t,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,t,n)}function YC(e,t,n,r){return e instanceof rR?function(s,o,a,u){if(!HP(s.precondition,o))return a;const l=s.value.clone(),c=jhe(s.fieldTransforms,u,o);return l.setAll(c),o.convertToFoundDocument(o.version,l).setHasLocalMutations(),null}(e,t,n,r):e instanceof qy?function(s,o,a,u){if(!HP(s.precondition,o))return a;const l=jhe(s.fieldTransforms,u,o),c=o.data;return c.setAll(QDe(s)),c.setAll(l),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(f=>f.field))}(e,t,n,r):function(s,o,a){return HP(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(e,t,n)}function G$t(e,t){let n=null;for(const r of e.fieldTransforms){const i=t.data.field(r.field),s=WDe(r.transform,i||null);s!=null&&(n===null&&(n=Nu.empty()),n.set(r.field,s))}return n||null}function Lhe(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&px(r,i,(s,o)=>H$t(s,o))}(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class rR extends $4{constructor(t,n,r,i=[]){super(),this.key=t,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class qy extends $4{constructor(t,n,r,i,s=[]){super(),this.key=t,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function QDe(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function Fhe(e,t,n){const r=new Map;ri(e.length===n.length);for(let i=0;i<n.length;i++){const s=e[i],o=s.transform,a=t.data.field(s.field);r.set(s.field,z$t(o,a,n[i]))}return r}function jhe(e,t,n){const r=new Map;for(const i of e){const s=i.transform,o=n.data.field(i.field);r.set(i.field,U$t(s,o,t))}return r}class M4 extends $4{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Y$t extends $4{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K$t{constructor(t,n,r,i){this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(t,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(t.key)&&W$t(s,t,r[i])}}applyToLocalView(t,n){for(const r of this.baseMutations)r.key.isEqual(t.key)&&(n=YC(r,t,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(t.key)&&(n=YC(r,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){const r=VDe();return this.mutations.forEach(i=>{const s=t.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const u=XDe(o,a);u!==null&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(dn.min())}),r}keys(){return this.mutations.reduce((t,n)=>t.add(n.key),zn())}isEqual(t){return this.batchId===t.batchId&&px(this.mutations,t.mutations,(n,r)=>Lhe(n,r))&&px(this.baseMutations,t.baseMutations,(n,r)=>Lhe(n,r))}}class cZ{constructor(t,n,r,i){this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(t,n,r){ri(t.mutations.length===r.length);let i=function(){return M$t}();const s=t.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new cZ(t,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X$t{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q$t{constructor(t,n){this.count=t,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var vs,Zn;function J$t(e){switch(e){default:return an();case Be.CANCELLED:case Be.UNKNOWN:case Be.DEADLINE_EXCEEDED:case Be.RESOURCE_EXHAUSTED:case Be.INTERNAL:case Be.UNAVAILABLE:case Be.UNAUTHENTICATED:return!1;case Be.INVALID_ARGUMENT:case Be.NOT_FOUND:case Be.ALREADY_EXISTS:case Be.PERMISSION_DENIED:case Be.FAILED_PRECONDITION:case Be.ABORTED:case Be.OUT_OF_RANGE:case Be.UNIMPLEMENTED:case Be.DATA_LOSS:return!0}}function JDe(e){if(e===void 0)return Lm("GRPC error has no .code"),Be.UNKNOWN;switch(e){case vs.OK:return Be.OK;case vs.CANCELLED:return Be.CANCELLED;case vs.UNKNOWN:return Be.UNKNOWN;case vs.DEADLINE_EXCEEDED:return Be.DEADLINE_EXCEEDED;case vs.RESOURCE_EXHAUSTED:return Be.RESOURCE_EXHAUSTED;case vs.INTERNAL:return Be.INTERNAL;case vs.UNAVAILABLE:return Be.UNAVAILABLE;case vs.UNAUTHENTICATED:return Be.UNAUTHENTICATED;case vs.INVALID_ARGUMENT:return Be.INVALID_ARGUMENT;case vs.NOT_FOUND:return Be.NOT_FOUND;case vs.ALREADY_EXISTS:return Be.ALREADY_EXISTS;case vs.PERMISSION_DENIED:return Be.PERMISSION_DENIED;case vs.FAILED_PRECONDITION:return Be.FAILED_PRECONDITION;case vs.ABORTED:return Be.ABORTED;case vs.OUT_OF_RANGE:return Be.OUT_OF_RANGE;case vs.UNIMPLEMENTED:return Be.UNIMPLEMENTED;case vs.DATA_LOSS:return Be.DATA_LOSS;default:return an()}}(Zn=vs||(vs={}))[Zn.OK=0]="OK",Zn[Zn.CANCELLED=1]="CANCELLED",Zn[Zn.UNKNOWN=2]="UNKNOWN",Zn[Zn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Zn[Zn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Zn[Zn.NOT_FOUND=5]="NOT_FOUND",Zn[Zn.ALREADY_EXISTS=6]="ALREADY_EXISTS",Zn[Zn.PERMISSION_DENIED=7]="PERMISSION_DENIED",Zn[Zn.UNAUTHENTICATED=16]="UNAUTHENTICATED",Zn[Zn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Zn[Zn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Zn[Zn.ABORTED=10]="ABORTED",Zn[Zn.OUT_OF_RANGE=11]="OUT_OF_RANGE",Zn[Zn.UNIMPLEMENTED=12]="UNIMPLEMENTED",Zn[Zn.INTERNAL=13]="INTERNAL",Zn[Zn.UNAVAILABLE=14]="UNAVAILABLE",Zn[Zn.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z$t(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eMt=new I1([4294967295,4294967295],0);function Bhe(e){const t=Z$t().encode(e),n=new wDe;return n.update(t),new Uint8Array(n.digest())}function Uhe(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new I1([n,r],0),new I1([i,s],0)]}class fZ{constructor(t,n,r){if(this.bitmap=t,this.padding=n,this.hashCount=r,n<0||n>=8)throw new z2(`Invalid padding: ${n}`);if(r<0)throw new z2(`Invalid hash count: ${r}`);if(t.length>0&&this.hashCount===0)throw new z2(`Invalid hash count: ${r}`);if(t.length===0&&n!==0)throw new z2(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*t.length-n,this.Te=I1.fromNumber(this.Ie)}Ee(t,n,r){let i=t.add(n.multiply(I1.fromNumber(r)));return i.compare(eMt)===1&&(i=new I1([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(t){return(this.bitmap[Math.floor(t/8)]&1<<t%8)!=0}mightContain(t){if(this.Ie===0)return!1;const n=Bhe(t),[r,i]=Uhe(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(t,n,r){const i=t%8==0?0:8-t%8,s=new Uint8Array(Math.ceil(t/8)),o=new fZ(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(t){if(this.Ie===0)return;const n=Bhe(t),[r,i]=Uhe(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);this.Ae(o)}}Ae(t){const n=Math.floor(t/8),r=t%8;this.bitmap[n]|=1<<r}}class z2 extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L4{constructor(t,n,r,i,s){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(t,n,r){const i=new Map;return i.set(t,iR.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new L4(dn.min(),i,new Oi(vr),Fm(),zn())}}class iR{constructor(t,n,r,i,s){this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(t,n,r){return new iR(r,n,zn(),zn(),zn())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qP{constructor(t,n,r,i){this.Re=t,this.removedTargetIds=n,this.key=r,this.Ve=i}}class ZDe{constructor(t,n){this.targetId=t,this.me=n}}class ePe{constructor(t,n,r=Ea.EMPTY_BYTE_STRING,i=null){this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i}}class zhe{constructor(){this.fe=0,this.ge=Hhe(),this.pe=Ea.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(t){t.approximateByteSize()>0&&(this.we=!0,this.pe=t)}Ce(){let t=zn(),n=zn(),r=zn();return this.ge.forEach((i,s)=>{switch(s){case 0:t=t.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:an()}}),new iR(this.pe,this.ye,t,n,r)}ve(){this.we=!1,this.ge=Hhe()}Fe(t,n){this.we=!0,this.ge=this.ge.insert(t,n)}Me(t){this.we=!0,this.ge=this.ge.remove(t)}xe(){this.fe+=1}Oe(){this.fe-=1,ri(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class tMt{constructor(t){this.Le=t,this.Be=new Map,this.ke=Fm(),this.qe=Vhe(),this.Qe=new Oi(vr)}Ke(t){for(const n of t.Re)t.Ve&&t.Ve.isFoundDocument()?this.$e(n,t.Ve):this.Ue(n,t.key,t.Ve);for(const n of t.removedTargetIds)this.Ue(n,t.key,t.Ve)}We(t){this.forEachTarget(t,n=>{const r=this.Ge(n);switch(t.state){case 0:this.ze(n)&&r.De(t.resumeToken);break;case 1:r.Oe(),r.Se||r.ve(),r.De(t.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(t.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(t.resumeToken));break;default:an()}})}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(t){const n=t.targetId,r=t.me.count,i=this.Je(n);if(i){const s=i.target;if(HV(s))if(r===0){const o=new Ut(s.path);this.Ue(n,o,ca.newNoDocument(o,dn.min()))}else ri(r===1);else{const o=this.Ye(n);if(o!==r){const a=this.Ze(t),u=a?this.Xe(a,t,o):1;if(u!==0){this.je(n);const l=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,l)}}}}}Ze(t){const n=t.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=ub(r).toUint8Array()}catch(u){if(u instanceof RDe)return bI("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new fZ(o,i,s)}catch(u){return bI(u instanceof z2?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.Ie===0?null:a}Xe(t,n,r){return n.me.count===r-this.nt(t,n.targetId)?0:2}nt(t,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;t.mightContain(a)||(this.Ue(n,s,null),i++)}),i}rt(t){const n=new Map;this.Be.forEach((s,o)=>{const a=this.Je(o);if(a){if(s.current&&HV(a.target)){const u=new Ut(a.target.path);this.ke.get(u)!==null||this.it(o,u)||this.Ue(o,u,ca.newNoDocument(u,t))}s.be&&(n.set(o,s.Ce()),s.ve())}});let r=zn();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(u=>{const l=this.Je(u);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(t));const i=new L4(t,n,this.Qe,this.ke,r);return this.ke=Fm(),this.qe=Vhe(),this.Qe=new Oi(vr),i}$e(t,n){if(!this.ze(t))return;const r=this.it(t,n.key)?2:0;this.Ge(t).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(t))}Ue(t,n,r){if(!this.ze(t))return;const i=this.Ge(t);this.it(t,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(t)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(t){this.Be.delete(t)}Ye(t){const n=this.Ge(t).Ce();return this.Le.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}xe(t){this.Ge(t).xe()}Ge(t){let n=this.Be.get(t);return n||(n=new zhe,this.Be.set(t,n)),n}st(t){let n=this.qe.get(t);return n||(n=new Oo(vr),this.qe=this.qe.insert(t,n)),n}ze(t){const n=this.Je(t)!==null;return n||It("WatchChangeAggregator","Detected inactive target",t),n}Je(t){const n=this.Be.get(t);return n&&n.Se?null:this.Le.ot(t)}je(t){this.Be.set(t,new zhe),this.Le.getRemoteKeysForTarget(t).forEach(n=>{this.Ue(t,n,null)})}it(t,n){return this.Le.getRemoteKeysForTarget(t).has(n)}}function Vhe(){return new Oi(Ut.comparator)}function Hhe(){return new Oi(Ut.comparator)}const nMt={asc:"ASCENDING",desc:"DESCENDING"},rMt={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},iMt={and:"AND",or:"OR"};class sMt{constructor(t,n){this.databaseId=t,this.useProto3Json=n}}function GV(e,t){return e.useProto3Json||N4(t)?t:{value:t}}function tM(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function tPe(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function oMt(e,t){return tM(e,t.toTimestamp())}function bh(e){return ri(!!e),dn.fromTimestamp(function(n){const r=ly(n);return new Ls(r.seconds,r.nanos)}(e))}function dZ(e,t){return YV(e,t).canonicalString()}function YV(e,t){const n=function(i){return new ci(["projects",i.projectId,"databases",i.database])}(e).child("documents");return t===void 0?n:n.child(t)}function nPe(e){const t=ci.fromString(e);return ri(aPe(t)),t}function KV(e,t){return dZ(e.databaseId,t.path)}function L9(e,t){const n=nPe(t);if(n.get(1)!==e.databaseId.projectId)throw new bt(Be.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new bt(Be.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Ut(iPe(n))}function rPe(e,t){return dZ(e.databaseId,t)}function aMt(e){const t=nPe(e);return t.length===4?ci.emptyPath():iPe(t)}function XV(e){return new ci(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function iPe(e){return ri(e.length>4&&e.get(4)==="documents"),e.popFirst(5)}function qhe(e,t,n){return{name:KV(e,t),fields:n.value.mapValue.fields}}function uMt(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:an()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],s=function(l,c){return l.useProto3Json?(ri(c===void 0||typeof c=="string"),Ea.fromBase64String(c||"")):(ri(c===void 0||c instanceof Buffer||c instanceof Uint8Array),Ea.fromUint8Array(c||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(l){const c=l.code===void 0?Be.UNKNOWN:JDe(l.code);return new bt(c,l.message||"")}(o);n=new ePe(r,i,s,a||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=L9(e,r.document.name),s=bh(r.document.updateTime),o=r.document.createTime?bh(r.document.createTime):dn.min(),a=new Nu({mapValue:{fields:r.document.fields}}),u=ca.newFoundDocument(i,s,o,a),l=r.targetIds||[],c=r.removedTargetIds||[];n=new qP(l,c,u.key,u)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=L9(e,r.document),s=r.readTime?bh(r.readTime):dn.min(),o=ca.newNoDocument(i,s),a=r.removedTargetIds||[];n=new qP([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=L9(e,r.document),s=r.removedTargetIds||[];n=new qP([],s,i,null)}else{if(!("filter"in t))return an();{t.filter;const r=t.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new Q$t(i,s),a=r.targetId;n=new ZDe(a,o)}}return n}function lMt(e,t){let n;if(t instanceof rR)n={update:qhe(e,t.key,t.value)};else if(t instanceof M4)n={delete:KV(e,t.key)};else if(t instanceof qy)n={update:qhe(e,t.key,t.data),updateMask:vMt(t.fieldMask)};else{if(!(t instanceof Y$t))return an();n={verify:KV(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof TI)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof CI)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof AI)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof eM)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw an()}(0,r))),t.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:oMt(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:an()}(e,t.precondition)),n}function cMt(e,t){return e&&e.length>0?(ri(t!==void 0),e.map(n=>function(i,s){let o=i.updateTime?bh(i.updateTime):bh(s);return o.isEqual(dn.min())&&(o=bh(s)),new q$t(o,i.transformResults||[])}(n,t))):[]}function fMt(e,t){return{documents:[rPe(e,t.path)]}}function dMt(e,t){const n={structuredQuery:{}},r=t.path;let i;t.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=rPe(e,i);const s=function(l){if(l.length!==0)return oPe(Jf.create(l,"and"))}(t.filters);s&&(n.structuredQuery.where=s);const o=function(l){if(l.length!==0)return l.map(c=>function(d){return{field:lw(d.field),direction:mMt(d.dir)}}(c))}(t.orderBy);o&&(n.structuredQuery.orderBy=o);const a=GV(e,t.limit);return a!==null&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(t.endAt)),{_t:n,parent:i}}function hMt(e){let t=aMt(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){ri(r===1);const c=n.from[0];c.allDescendants?i=c.collectionId:t=t.child(c.collectionId)}let s=[];n.where&&(s=function(f){const d=sPe(f);return d instanceof Jf&&ODe(d)?d.getFilters():[d]}(n.where));let o=[];n.orderBy&&(o=function(f){return f.map(d=>function(p){return new SI(cw(p.field),function(g){switch(g){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(p.direction))}(d))}(n.orderBy));let a=null;n.limit&&(a=function(f){let d;return d=typeof f=="object"?f.value:f,N4(d)?null:d}(n.limit));let u=null;n.startAt&&(u=function(f){const d=!!f.before,h=f.values||[];return new Z$(h,d)}(n.startAt));let l=null;return n.endAt&&(l=function(f){const d=!f.before,h=f.values||[];return new Z$(h,d)}(n.endAt)),N$t(t,i,o,s,a,"F",u,l)}function pMt(e,t){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return an()}}(t.purpose);return n==null?null:{"goog-listen-tags":n}}function sPe(e){return e.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=cw(n.unaryFilter.field);return Es.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=cw(n.unaryFilter.field);return Es.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=cw(n.unaryFilter.field);return Es.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=cw(n.unaryFilter.field);return Es.create(o,"!=",{nullValue:"NULL_VALUE"});default:return an()}}(e):e.fieldFilter!==void 0?function(n){return Es.create(cw(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return an()}}(n.fieldFilter.op),n.fieldFilter.value)}(e):e.compositeFilter!==void 0?function(n){return Jf.create(n.compositeFilter.filters.map(r=>sPe(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return an()}}(n.compositeFilter.op))}(e):an()}function mMt(e){return nMt[e]}function gMt(e){return rMt[e]}function yMt(e){return iMt[e]}function lw(e){return{fieldPath:e.canonicalString()}}function cw(e){return Io.fromServerFormat(e.fieldPath)}function oPe(e){return e instanceof Es?function(n){if(n.op==="=="){if(Nhe(n.value))return{unaryFilter:{field:lw(n.field),op:"IS_NAN"}};if(Rhe(n.value))return{unaryFilter:{field:lw(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Nhe(n.value))return{unaryFilter:{field:lw(n.field),op:"IS_NOT_NAN"}};if(Rhe(n.value))return{unaryFilter:{field:lw(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:lw(n.field),op:gMt(n.op),value:n.value}}}(e):e instanceof Jf?function(n){const r=n.getFilters().map(i=>oPe(i));return r.length===1?r[0]:{compositeFilter:{op:yMt(n.op),filters:r}}}(e):an()}function vMt(e){const t=[];return e.fields.forEach(n=>t.push(n.canonicalString())),{fieldPaths:t}}function aPe(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n0{constructor(t,n,r,i,s=dn.min(),o=dn.min(),a=Ea.EMPTY_BYTE_STRING,u=null){this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(t){return new n0(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new n0(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new n0(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new n0(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bMt{constructor(t){this.ct=t}}function _Mt(e){const t=hMt({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?WV(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wMt{constructor(){this._n=new EMt}addToCollectionParentIndex(t,n){return this._n.add(n),Qe.resolve()}getCollectionParents(t,n){return Qe.resolve(this._n.getEntries(n))}addFieldIndex(t,n){return Qe.resolve()}deleteFieldIndex(t,n){return Qe.resolve()}deleteAllFieldIndexes(t){return Qe.resolve()}createTargetIndexes(t,n){return Qe.resolve()}getDocumentsMatchingTarget(t,n){return Qe.resolve(null)}getIndexType(t,n){return Qe.resolve(0)}getFieldIndexes(t,n){return Qe.resolve([])}getNextCollectionGroupToUpdate(t){return Qe.resolve(null)}getMinOffset(t,n){return Qe.resolve(uy.min())}getMinOffsetFromCollectionGroup(t,n){return Qe.resolve(uy.min())}updateCollectionGroup(t,n,r){return Qe.resolve()}updateIndexEntries(t,n){return Qe.resolve()}}class EMt{constructor(){this.index={}}add(t){const n=t.lastSegment(),r=t.popLast(),i=this.index[n]||new Oo(ci.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(t){const n=t.lastSegment(),r=t.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(t){return(this.index[t]||new Oo(ci.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yx{constructor(t){this.On=t}next(){return this.On+=2,this.On}static Nn(){return new yx(0)}static Ln(){return new yx(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xMt{constructor(){this.changes=new BS(t=>t.toString(),(t,n)=>t.isEqual(n)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,ca.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?Qe.resolve(r):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SMt{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TMt{constructor(t,n,r,i){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(t,n){let r=null;return this.documentOverlayCache.getOverlay(t,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(t,n))).next(i=>(r!==null&&YC(r.mutation,i,Al.empty(),Ls.now()),i))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next(r=>this.getLocalViewOfDocuments(t,r,zn()).next(()=>r))}getLocalViewOfDocuments(t,n,r=zn()){const i=y1();return this.populateOverlays(t,i,n).next(()=>this.computeViews(t,n,i,r).next(s=>{let o=U2();return s.forEach((a,u)=>{o=o.insert(a,u.overlayedDocument)}),o}))}getOverlayedDocuments(t,n){const r=y1();return this.populateOverlays(t,r,n).next(()=>this.computeViews(t,n,r,zn()))}populateOverlays(t,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(t,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(t,n,r,i){let s=Fm();const o=GC(),a=function(){return GC()}();return n.forEach((u,l)=>{const c=r.get(l.key);i.has(l.key)&&(c===void 0||c.mutation instanceof qy)?s=s.insert(l.key,l):c!==void 0?(o.set(l.key,c.mutation.getFieldMask()),YC(c.mutation,l,c.mutation.getFieldMask(),Ls.now())):o.set(l.key,Al.empty())}),this.recalculateAndSaveOverlays(t,s).next(u=>(u.forEach((l,c)=>o.set(l,c)),n.forEach((l,c)=>{var f;return a.set(l,new SMt(c,(f=o.get(l))!==null&&f!==void 0?f:null))}),a))}recalculateAndSaveOverlays(t,n){const r=GC();let i=new Oi((o,a)=>o-a),s=zn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next(o=>{for(const a of o)a.keys().forEach(u=>{const l=n.get(u);if(l===null)return;let c=r.get(u)||Al.empty();c=a.applyToLocalView(l,c),r.set(u,c);const f=(i.get(a.batchId)||zn()).add(u);i=i.insert(a.batchId,f)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const u=a.getNext(),l=u.key,c=u.value,f=VDe();c.forEach(d=>{if(!s.has(d)){const h=XDe(n.get(d),r.get(d));h!==null&&f.set(d,h),s=s.add(d)}}),o.push(this.documentOverlayCache.saveOverlays(t,l,f))}return Qe.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next(r=>this.recalculateAndSaveOverlays(t,r))}getDocumentsMatchingQuery(t,n,r,i){return function(o){return Ut.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):FDe(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,r,i):this.getDocumentsMatchingCollectionQuery(t,n,r,i)}getNextDocuments(t,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,r.largestBatchId,i-s.size):Qe.resolve(y1());let a=-1,u=s;return o.next(l=>Qe.forEach(l,(c,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),s.get(c)?Qe.resolve():this.remoteDocumentCache.getEntry(t,c).next(d=>{u=u.insert(c,d)}))).next(()=>this.populateOverlays(t,l,s)).next(()=>this.computeViews(t,u,l,zn())).next(c=>({batchId:a,changes:zDe(c)})))})}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new Ut(n)).next(r=>{let i=U2();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(t,n,r,i){const s=n.collectionGroup;let o=U2();return this.indexManager.getCollectionParents(t,s).next(a=>Qe.forEach(a,u=>{const l=function(f,d){return new jS(d,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,u.child(s));return this.getDocumentsMatchingCollectionQuery(t,l,r,i).next(c=>{c.forEach((f,d)=>{o=o.insert(f,d)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(t,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,r,s,i))).next(o=>{s.forEach((u,l)=>{const c=l.getKey();o.get(c)===null&&(o=o.insert(c,ca.newInvalidDocument(c)))});let a=U2();return o.forEach((u,l)=>{const c=s.get(u);c!==void 0&&YC(c.mutation,l,Al.empty(),Ls.now()),P4(n,l)&&(a=a.insert(u,l))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CMt{constructor(t){this.serializer=t,this.cr=new Map,this.lr=new Map}getBundleMetadata(t,n){return Qe.resolve(this.cr.get(n))}saveBundleMetadata(t,n){return this.cr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:bh(i.createTime)}}(n)),Qe.resolve()}getNamedQuery(t,n){return Qe.resolve(this.lr.get(n))}saveNamedQuery(t,n){return this.lr.set(n.name,function(i){return{name:i.name,query:_Mt(i.bundledQuery),readTime:bh(i.readTime)}}(n)),Qe.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AMt{constructor(){this.overlays=new Oi(Ut.comparator),this.hr=new Map}getOverlay(t,n){return Qe.resolve(this.overlays.get(n))}getOverlays(t,n){const r=y1();return Qe.forEach(n,i=>this.getOverlay(t,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(t,n,r){return r.forEach((i,s)=>{this.ht(t,n,s)}),Qe.resolve()}removeOverlaysForBatchId(t,n,r){const i=this.hr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.hr.delete(r)),Qe.resolve()}getOverlaysForCollection(t,n,r){const i=y1(),s=n.length+1,o=new Ut(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const u=a.getNext().value,l=u.getKey();if(!n.isPrefixOf(l.path))break;l.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return Qe.resolve(i)}getOverlaysForCollectionGroup(t,n,r,i){let s=new Oi((l,c)=>l-c);const o=this.overlays.getIterator();for(;o.hasNext();){const l=o.getNext().value;if(l.getKey().getCollectionGroup()===n&&l.largestBatchId>r){let c=s.get(l.largestBatchId);c===null&&(c=y1(),s=s.insert(l.largestBatchId,c)),c.set(l.getKey(),l)}}const a=y1(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,c)=>a.set(l,c)),!(a.size()>=i)););return Qe.resolve(a)}ht(t,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.hr.get(i.largestBatchId).delete(r.key);this.hr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new X$t(n,r));let s=this.hr.get(n);s===void 0&&(s=zn(),this.hr.set(n,s)),this.hr.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hZ{constructor(){this.Pr=new Oo(Ks.Ir),this.Tr=new Oo(Ks.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(t,n){const r=new Ks(t,n);this.Pr=this.Pr.add(r),this.Tr=this.Tr.add(r)}dr(t,n){t.forEach(r=>this.addReference(r,n))}removeReference(t,n){this.Ar(new Ks(t,n))}Rr(t,n){t.forEach(r=>this.removeReference(r,n))}Vr(t){const n=new Ut(new ci([])),r=new Ks(n,t),i=new Ks(n,t+1),s=[];return this.Tr.forEachInRange([r,i],o=>{this.Ar(o),s.push(o.key)}),s}mr(){this.Pr.forEach(t=>this.Ar(t))}Ar(t){this.Pr=this.Pr.delete(t),this.Tr=this.Tr.delete(t)}gr(t){const n=new Ut(new ci([])),r=new Ks(n,t),i=new Ks(n,t+1);let s=zn();return this.Tr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(t){const n=new Ks(t,0),r=this.Pr.firstAfterOrEqual(n);return r!==null&&t.isEqual(r.key)}}class Ks{constructor(t,n){this.key=t,this.pr=n}static Ir(t,n){return Ut.comparator(t.key,n.key)||vr(t.pr,n.pr)}static Er(t,n){return vr(t.pr,n.pr)||Ut.comparator(t.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IMt{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.yr=1,this.wr=new Oo(Ks.Ir)}checkEmpty(t){return Qe.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,r,i){const s=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new K$t(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.wr=this.wr.add(new Ks(a.key,s)),this.indexManager.addToCollectionParentIndex(t,a.key.path.popLast());return Qe.resolve(o)}lookupMutationBatch(t,n){return Qe.resolve(this.Sr(n))}getNextMutationBatchAfterBatchId(t,n){const r=n+1,i=this.br(r),s=i<0?0:i;return Qe.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return Qe.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(t){return Qe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){const r=new Ks(n,0),i=new Ks(n,Number.POSITIVE_INFINITY),s=[];return this.wr.forEachInRange([r,i],o=>{const a=this.Sr(o.pr);s.push(a)}),Qe.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(t,n){let r=new Oo(vr);return n.forEach(i=>{const s=new Ks(i,0),o=new Ks(i,Number.POSITIVE_INFINITY);this.wr.forEachInRange([s,o],a=>{r=r.add(a.pr)})}),Qe.resolve(this.Dr(r))}getAllMutationBatchesAffectingQuery(t,n){const r=n.path,i=r.length+1;let s=r;Ut.isDocumentKey(s)||(s=s.child(""));const o=new Ks(new Ut(s),0);let a=new Oo(vr);return this.wr.forEachWhile(u=>{const l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(u.pr)),!0)},o),Qe.resolve(this.Dr(a))}Dr(t){const n=[];return t.forEach(r=>{const i=this.Sr(r);i!==null&&n.push(i)}),n}removeMutationBatch(t,n){ri(this.Cr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.wr;return Qe.forEach(n.mutations,i=>{const s=new Ks(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(t,i.key)}).next(()=>{this.wr=r})}Mn(t){}containsKey(t,n){const r=new Ks(n,0),i=this.wr.firstAfterOrEqual(r);return Qe.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(t){return this.mutationQueue.length,Qe.resolve()}Cr(t,n){return this.br(t)}br(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Sr(t){const n=this.br(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kMt{constructor(t){this.vr=t,this.docs=function(){return new Oi(Ut.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.vr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(t,r.path.popLast())}removeEntry(t){const n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){const r=this.docs.get(n);return Qe.resolve(r?r.document.mutableCopy():ca.newInvalidDocument(n))}getEntries(t,n){let r=Fm();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():ca.newInvalidDocument(i))}),Qe.resolve(r)}getDocumentsMatchingQuery(t,n,r,i){let s=Fm();const o=n.path,a=new Ut(o.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){const{key:l,value:{document:c}}=u.getNext();if(!o.isPrefixOf(l.path))break;l.path.length>o.length+1||h$t(d$t(c),r)<=0||(i.has(c.key)||P4(n,c))&&(s=s.insert(c.key,c.mutableCopy()))}return Qe.resolve(s)}getAllFromCollectionGroup(t,n,r,i){an()}Fr(t,n){return Qe.forEach(this.docs,r=>n(r))}newChangeBuffer(t){return new RMt(this)}getSize(t){return Qe.resolve(this.size)}}class RMt extends xMt{constructor(t){super(),this.ar=t}applyChanges(t){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.ar.addEntry(t,i)):this.ar.removeEntry(r)}),Qe.waitFor(n)}getFromCache(t,n){return this.ar.getEntry(t,n)}getAllFromCache(t,n){return this.ar.getEntries(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NMt{constructor(t){this.persistence=t,this.Mr=new BS(n=>aZ(n),uZ),this.lastRemoteSnapshotVersion=dn.min(),this.highestTargetId=0,this.Or=0,this.Nr=new hZ,this.targetCount=0,this.Lr=yx.Nn()}forEachTarget(t,n){return this.Mr.forEach((r,i)=>n(i)),Qe.resolve()}getLastRemoteSnapshotVersion(t){return Qe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return Qe.resolve(this.Or)}allocateTargetId(t){return this.highestTargetId=this.Lr.next(),Qe.resolve(this.highestTargetId)}setTargetsMetadata(t,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Or&&(this.Or=n),Qe.resolve()}qn(t){this.Mr.set(t.target,t);const n=t.targetId;n>this.highestTargetId&&(this.Lr=new yx(n),this.highestTargetId=n),t.sequenceNumber>this.Or&&(this.Or=t.sequenceNumber)}addTargetData(t,n){return this.qn(n),this.targetCount+=1,Qe.resolve()}updateTargetData(t,n){return this.qn(n),Qe.resolve()}removeTargetData(t,n){return this.Mr.delete(n.target),this.Nr.Vr(n.targetId),this.targetCount-=1,Qe.resolve()}removeTargets(t,n,r){let i=0;const s=[];return this.Mr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Mr.delete(o),s.push(this.removeMatchingKeysForTargetId(t,a.targetId)),i++)}),Qe.waitFor(s).next(()=>i)}getTargetCount(t){return Qe.resolve(this.targetCount)}getTargetData(t,n){const r=this.Mr.get(n)||null;return Qe.resolve(r)}addMatchingKeys(t,n,r){return this.Nr.dr(n,r),Qe.resolve()}removeMatchingKeys(t,n,r){this.Nr.Rr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(t,o))}),Qe.waitFor(s)}removeMatchingKeysForTargetId(t,n){return this.Nr.Vr(n),Qe.resolve()}getMatchingKeysForTargetId(t,n){const r=this.Nr.gr(n);return Qe.resolve(r)}containsKey(t,n){return Qe.resolve(this.Nr.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DMt{constructor(t,n){this.Br={},this.overlays={},this.kr=new rZ(0),this.qr=!1,this.qr=!0,this.referenceDelegate=t(this),this.Qr=new NMt(this),this.indexManager=new wMt,this.remoteDocumentCache=function(i){return new kMt(i)}(r=>this.referenceDelegate.Kr(r)),this.serializer=new bMt(n),this.$r=new CMt(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new AMt,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let r=this.Br[t.toKey()];return r||(r=new IMt(n,this.referenceDelegate),this.Br[t.toKey()]=r),r}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(t,n,r){It("MemoryPersistence","Starting transaction:",t);const i=new PMt(this.kr.next());return this.referenceDelegate.Ur(),r(i).next(s=>this.referenceDelegate.Wr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Gr(t,n){return Qe.or(Object.values(this.Br).map(r=>()=>r.containsKey(t,n)))}}class PMt extends m$t{constructor(t){super(),this.currentSequenceNumber=t}}class pZ{constructor(t){this.persistence=t,this.zr=new hZ,this.jr=null}static Hr(t){return new pZ(t)}get Jr(){if(this.jr)return this.jr;throw an()}addReference(t,n,r){return this.zr.addReference(r,n),this.Jr.delete(r.toString()),Qe.resolve()}removeReference(t,n,r){return this.zr.removeReference(r,n),this.Jr.add(r.toString()),Qe.resolve()}markPotentiallyOrphaned(t,n){return this.Jr.add(n.toString()),Qe.resolve()}removeTarget(t,n){this.zr.Vr(n.targetId).forEach(i=>this.Jr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,n.targetId).next(i=>{i.forEach(s=>this.Jr.add(s.toString()))}).next(()=>r.removeTargetData(t,n))}Ur(){this.jr=new Set}Wr(t){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Qe.forEach(this.Jr,r=>{const i=Ut.fromPath(r);return this.Yr(t,i).next(s=>{s||n.removeEntry(i,dn.min())})}).next(()=>(this.jr=null,n.apply(t)))}updateLimboDocument(t,n){return this.Yr(t,n).next(r=>{r?this.Jr.delete(n.toString()):this.Jr.add(n.toString())})}Kr(t){return 0}Yr(t,n){return Qe.or([()=>Qe.resolve(this.zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.Gr(t,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mZ{constructor(t,n,r,i){this.targetId=t,this.fromCache=n,this.qi=r,this.Qi=i}static Ki(t,n){let r=zn(),i=zn();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new mZ(t,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OMt{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $Mt{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=function(){return pNt()?8:g$t(Fo())>0?6:4}()}initialize(t,n){this.zi=t,this.indexManager=n,this.$i=!0}getDocumentsMatchingQuery(t,n,r,i){const s={result:null};return this.ji(t,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Hi(t,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new OMt;return this.Ji(t,n,o).next(a=>{if(s.result=a,this.Ui)return this.Yi(t,n,o,a.size)})}).next(()=>s.result)}Yi(t,n,r,i){return r.documentReadCount<this.Wi?(HT()<=Gn.DEBUG&&It("QueryEngine","SDK will not create cache indexes for query:",uw(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),Qe.resolve()):(HT()<=Gn.DEBUG&&It("QueryEngine","Query:",uw(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Gi*i?(HT()<=Gn.DEBUG&&It("QueryEngine","The SDK decides to create cache indexes for query:",uw(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,vh(n))):Qe.resolve())}ji(t,n){if($he(n))return Qe.resolve(null);let r=vh(n);return this.indexManager.getIndexType(t,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=WV(n,null,"F"),r=vh(n)),this.indexManager.getDocumentsMatchingTarget(t,r).next(s=>{const o=zn(...s);return this.zi.getDocuments(t,o).next(a=>this.indexManager.getMinOffset(t,r).next(u=>{const l=this.Zi(n,a);return this.Xi(n,l,o,u.readTime)?this.ji(t,WV(n,null,"F")):this.es(t,l,n,u)}))})))}Hi(t,n,r,i){return $he(n)||i.isEqual(dn.min())?Qe.resolve(null):this.zi.getDocuments(t,r).next(s=>{const o=this.Zi(n,s);return this.Xi(n,o,r,i)?Qe.resolve(null):(HT()<=Gn.DEBUG&&It("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),uw(n)),this.es(t,o,n,f$t(i,-1)).next(a=>a))})}Zi(t,n){let r=new Oo(BDe(t));return n.forEach((i,s)=>{P4(t,s)&&(r=r.add(s))}),r}Xi(t,n,r,i){if(t.limit===null)return!1;if(r.size!==n.size)return!0;const s=t.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ji(t,n,r){return HT()<=Gn.DEBUG&&It("QueryEngine","Using full collection scan to execute query:",uw(n)),this.zi.getDocumentsMatchingQuery(t,n,uy.min(),r)}es(t,n,r,i){return this.zi.getDocumentsMatchingQuery(t,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MMt{constructor(t,n,r,i){this.persistence=t,this.ts=n,this.serializer=i,this.ns=new Oi(vr),this.rs=new BS(s=>aZ(s),uZ),this.ss=new Map,this.os=t.getRemoteDocumentCache(),this.Qr=t.getTargetCache(),this.$r=t.getBundleCache(),this._s(r)}_s(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new TMt(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>t.collect(n,this.ns))}}function LMt(e,t,n,r){return new MMt(e,t,n,r)}async function uPe(e,t){const n=hn(e);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n._s(t),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let u=zn();for(const l of i){o.push(l.batchId);for(const c of l.mutations)u=u.add(c.key)}for(const l of s){a.push(l.batchId);for(const c of l.mutations)u=u.add(c.key)}return n.localDocuments.getDocuments(r,u).next(l=>({us:l,removedBatchIds:o,addedBatchIds:a}))})})}function FMt(e,t){const n=hn(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=t.batch.keys(),s=n.os.newChangeBuffer({trackRemovals:!0});return function(a,u,l,c){const f=l.batch,d=f.keys();let h=Qe.resolve();return d.forEach(p=>{h=h.next(()=>c.getEntry(u,p)).next(m=>{const g=l.docVersions.get(p);ri(g!==null),m.version.compareTo(g)<0&&(f.applyToRemoteDocument(m,l),m.isValidDocument()&&(m.setReadTime(l.commitVersion),c.addEntry(m)))})}),h.next(()=>a.mutationQueue.removeMutationBatch(u,f))}(n,r,t,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=zn();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(u=u.add(a.batch.mutations[l].key));return u}(t))).next(()=>n.localDocuments.getDocuments(r,i))})}function lPe(e){const t=hn(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",n=>t.Qr.getLastRemoteSnapshotVersion(n))}function jMt(e,t){const n=hn(e),r=t.snapshotVersion;let i=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.os.newChangeBuffer({trackRemovals:!0});i=n.ns;const a=[];t.targetChanges.forEach((c,f)=>{const d=i.get(f);if(!d)return;a.push(n.Qr.removeMatchingKeys(s,c.removedDocuments,f).next(()=>n.Qr.addMatchingKeys(s,c.addedDocuments,f)));let h=d.withSequenceNumber(s.currentSequenceNumber);t.targetMismatches.get(f)!==null?h=h.withResumeToken(Ea.EMPTY_BYTE_STRING,dn.min()).withLastLimboFreeSnapshotVersion(dn.min()):c.resumeToken.approximateByteSize()>0&&(h=h.withResumeToken(c.resumeToken,r)),i=i.insert(f,h),function(m,g,y){return m.resumeToken.approximateByteSize()===0||g.snapshotVersion.toMicroseconds()-m.snapshotVersion.toMicroseconds()>=3e8?!0:y.addedDocuments.size+y.modifiedDocuments.size+y.removedDocuments.size>0}(d,h,c)&&a.push(n.Qr.updateTargetData(s,h))});let u=Fm(),l=zn();if(t.documentUpdates.forEach(c=>{t.resolvedLimboDocuments.has(c)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,c))}),a.push(BMt(s,o,t.documentUpdates).next(c=>{u=c.cs,l=c.ls})),!r.isEqual(dn.min())){const c=n.Qr.getLastRemoteSnapshotVersion(s).next(f=>n.Qr.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(c)}return Qe.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,u,l)).next(()=>u)}).then(s=>(n.ns=i,s))}function BMt(e,t,n){let r=zn(),i=zn();return n.forEach(s=>r=r.add(s)),t.getEntries(e,r).next(s=>{let o=Fm();return n.forEach((a,u)=>{const l=s.get(a);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(dn.min())?(t.removeEntry(a,u.readTime),o=o.insert(a,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(t.addEntry(u),o=o.insert(a,u)):It("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",u.version)}),{cs:o,ls:i}})}function UMt(e,t){const n=hn(e);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(t===void 0&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,t)))}function zMt(e,t){const n=hn(e);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Qr.getTargetData(r,t).next(s=>s?(i=s,Qe.resolve(i)):n.Qr.allocateTargetId(r).next(o=>(i=new n0(t,o,"TargetPurposeListen",r.currentSequenceNumber),n.Qr.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.ns.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.ns=n.ns.insert(r.targetId,r),n.rs.set(t,r.targetId)),r})}async function QV(e,t,n){const r=hn(e),i=r.ns.get(t),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!nR(o))throw o;It("LocalStore",`Failed to update sequence numbers for target ${t}: ${o}`)}r.ns=r.ns.remove(t),r.rs.delete(i.target)}function Whe(e,t,n){const r=hn(e);let i=dn.min(),s=zn();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,l,c){const f=hn(u),d=f.rs.get(c);return d!==void 0?Qe.resolve(f.ns.get(d)):f.Qr.getTargetData(l,c)}(r,o,vh(t)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(o,a.targetId).next(u=>{s=u})}).next(()=>r.ts.getDocumentsMatchingQuery(o,t,n?i:dn.min(),n?s:zn())).next(a=>(VMt(r,P$t(t),a),{documents:a,hs:s})))}function VMt(e,t,n){let r=e.ss.get(t)||dn.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),e.ss.set(t,r)}class Ghe{constructor(){this.activeTargetIds=j$t()}As(t){this.activeTargetIds=this.activeTargetIds.add(t)}Rs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}ds(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class HMt{constructor(){this.no=new Ghe,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,r){}addLocalQueryTarget(t){return this.no.As(t),this.ro[t]||"not-current"}updateQueryState(t,n,r){this.ro[t]=n}removeLocalQueryTarget(t){this.no.Rs(t)}isLocalQueryTarget(t){return this.no.activeTargetIds.has(t)}clearQueryState(t){delete this.ro[t]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(t){return this.no.activeTargetIds.has(t)}start(){return this.no=new Ghe,Promise.resolve()}handleUserChange(t,n,r){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qMt{io(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yhe{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(t){this.uo.push(t)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){It("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const t of this.uo)t(0)}ao(){It("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const t of this.uo)t(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vD=null;function F9(){return vD===null?vD=function(){return 268435456+Math.round(2147483648*Math.random())}():vD++,"0x"+vD.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WMt={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GMt{constructor(t){this.lo=t.lo,this.ho=t.ho}Po(t){this.Io=t}To(t){this.Eo=t}Ao(t){this.Ro=t}onMessage(t){this.Vo=t}close(){this.ho()}send(t){this.lo(t)}mo(){this.Io()}fo(){this.Eo()}po(t){this.Ro(t)}yo(t){this.Vo(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const na="WebChannelConnection";class YMt extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.wo=r+"://"+n.host,this.So=`projects/${i}/databases/${s}`,this.bo=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Do(){return!1}Co(n,r,i,s,o){const a=F9(),u=this.vo(n,r.toUriEncodedString());It("RestConnection",`Sending RPC '${n}' ${a}:`,u,i);const l={"google-cloud-resource-prefix":this.So,"x-goog-request-params":this.bo};return this.Fo(l,s,o),this.Mo(n,u,l,i).then(c=>(It("RestConnection",`Received RPC '${n}' ${a}: `,c),c),c=>{throw bI("RestConnection",`RPC '${n}' ${a} failed with error: `,c,"url: ",u,"request:",i),c})}xo(n,r,i,s,o,a){return this.Co(n,r,i,s,o)}Fo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+FS}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}vo(n,r){const i=WMt[n];return`${this.wo}/v1/${r}:${i}`}terminate(){}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Mo(t,n,r,i){const s=F9();return new Promise((o,a)=>{const u=new EDe;u.setWithCredentials(!0),u.listenOnce(SDe.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case zP.NO_ERROR:const c=u.getResponseJson();It(na,`XHR for RPC '${t}' ${s} received:`,JSON.stringify(c)),o(c);break;case zP.TIMEOUT:It(na,`RPC '${t}' ${s} timed out`),a(new bt(Be.DEADLINE_EXCEEDED,"Request time out"));break;case zP.HTTP_ERROR:const f=u.getStatus();if(It(na,`RPC '${t}' ${s} failed with status:`,f,"response text:",u.getResponseText()),f>0){let d=u.getResponseJson();Array.isArray(d)&&(d=d[0]);const h=d==null?void 0:d.error;if(h&&h.status&&h.message){const p=function(g){const y=g.toLowerCase().replace(/_/g,"-");return Object.values(Be).indexOf(y)>=0?y:Be.UNKNOWN}(h.status);a(new bt(p,h.message))}else a(new bt(Be.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new bt(Be.UNAVAILABLE,"Connection failed."));break;default:an()}}finally{It(na,`RPC '${t}' ${s} completed.`)}});const l=JSON.stringify(i);It(na,`RPC '${t}' ${s} sending request:`,i),u.send(n,"POST",l,r,15)})}Oo(t,n,r){const i=F9(),s=[this.wo,"/","google.firestore.v1.Firestore","/",t,"/channel"],o=ADe(),a=CDe(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.xmlHttpFactory=new xDe({})),this.Fo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const c=s.join("");It(na,`Creating RPC '${t}' stream ${i}: ${c}`,u);const f=o.createWebChannel(c,u);let d=!1,h=!1;const p=new GMt({lo:g=>{h?It(na,`Not sending because RPC '${t}' stream ${i} is closed:`,g):(d||(It(na,`Opening RPC '${t}' stream ${i} transport.`),f.open(),d=!0),It(na,`RPC '${t}' stream ${i} sending:`,g),f.send(g))},ho:()=>f.close()}),m=(g,y,v)=>{g.listen(y,b=>{try{v(b)}catch(w){setTimeout(()=>{throw w},0)}})};return m(f,B2.EventType.OPEN,()=>{h||(It(na,`RPC '${t}' stream ${i} transport opened.`),p.mo())}),m(f,B2.EventType.CLOSE,()=>{h||(h=!0,It(na,`RPC '${t}' stream ${i} transport closed`),p.po())}),m(f,B2.EventType.ERROR,g=>{h||(h=!0,bI(na,`RPC '${t}' stream ${i} transport errored:`,g),p.po(new bt(Be.UNAVAILABLE,"The operation could not be completed")))}),m(f,B2.EventType.MESSAGE,g=>{var y;if(!h){const v=g.data[0];ri(!!v);const b=v,w=b.error||((y=b[0])===null||y===void 0?void 0:y.error);if(w){It(na,`RPC '${t}' stream ${i} received error:`,w);const E=w.status;let T=function(A){const k=vs[A];if(k!==void 0)return JDe(k)}(E),S=w.message;T===void 0&&(T=Be.INTERNAL,S="Unknown error status: "+E+" with message "+w.message),h=!0,p.po(new bt(T,S)),f.close()}else It(na,`RPC '${t}' stream ${i} received:`,v),p.yo(v)}}),m(a,TDe.STAT_EVENT,g=>{g.stat===BV.PROXY?It(na,`RPC '${t}' stream ${i} detected buffering proxy`):g.stat===BV.NOPROXY&&It(na,`RPC '${t}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{p.fo()},0),p}}function j9(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F4(e){return new sMt(e,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cPe{constructor(t,n,r=1e3,i=1.5,s=6e4){this.oi=t,this.timerId=n,this.No=r,this.Lo=i,this.Bo=s,this.ko=0,this.qo=null,this.Qo=Date.now(),this.reset()}reset(){this.ko=0}Ko(){this.ko=this.Bo}$o(t){this.cancel();const n=Math.floor(this.ko+this.Uo()),r=Math.max(0,Date.now()-this.Qo),i=Math.max(0,n-r);i>0&&It("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.qo=this.oi.enqueueAfterDelay(this.timerId,i,()=>(this.Qo=Date.now(),t())),this.ko*=this.Lo,this.ko<this.No&&(this.ko=this.No),this.ko>this.Bo&&(this.ko=this.Bo)}Wo(){this.qo!==null&&(this.qo.skipDelay(),this.qo=null)}cancel(){this.qo!==null&&(this.qo.cancel(),this.qo=null)}Uo(){return(Math.random()-.5)*this.ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fPe{constructor(t,n,r,i,s,o,a,u){this.oi=t,this.Go=r,this.zo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.jo=0,this.Ho=null,this.Jo=null,this.stream=null,this.Yo=new cPe(t,n)}Zo(){return this.state===1||this.state===5||this.Xo()}Xo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.e_()}async stop(){this.Zo()&&await this.close(0)}t_(){this.state=0,this.Yo.reset()}n_(){this.Xo()&&this.Ho===null&&(this.Ho=this.oi.enqueueAfterDelay(this.Go,6e4,()=>this.r_()))}i_(t){this.s_(),this.stream.send(t)}async r_(){if(this.Xo())return this.close(0)}s_(){this.Ho&&(this.Ho.cancel(),this.Ho=null)}o_(){this.Jo&&(this.Jo.cancel(),this.Jo=null)}async close(t,n){this.s_(),this.o_(),this.Yo.cancel(),this.jo++,t!==4?this.Yo.reset():n&&n.code===Be.RESOURCE_EXHAUSTED?(Lm(n.toString()),Lm("Using maximum backoff delay to prevent overloading the backend."),this.Yo.Ko()):n&&n.code===Be.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.__(),this.stream.close(),this.stream=null),this.state=t,await this.listener.Ao(n)}__(){}auth(){this.state=1;const t=this.a_(this.jo),n=this.jo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.jo===n&&this.u_(r,i)},r=>{t(()=>{const i=new bt(Be.UNKNOWN,"Fetching auth token failed: "+r.message);return this.c_(i)})})}u_(t,n){const r=this.a_(this.jo);this.stream=this.l_(t,n),this.stream.Po(()=>{r(()=>this.listener.Po())}),this.stream.To(()=>{r(()=>(this.state=2,this.Jo=this.oi.enqueueAfterDelay(this.zo,1e4,()=>(this.Xo()&&(this.state=3),Promise.resolve())),this.listener.To()))}),this.stream.Ao(i=>{r(()=>this.c_(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}e_(){this.state=5,this.Yo.$o(async()=>{this.state=0,this.start()})}c_(t){return It("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}a_(t){return n=>{this.oi.enqueueAndForget(()=>this.jo===t?n():(It("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class KMt extends fPe{constructor(t,n,r,i,s,o){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}l_(t,n){return this.connection.Oo("Listen",t,n)}onMessage(t){this.Yo.reset();const n=uMt(this.serializer,t),r=function(s){if(!("targetChange"in s))return dn.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?dn.min():o.readTime?bh(o.readTime):dn.min()}(t);return this.listener.h_(n,r)}P_(t){const n={};n.database=XV(this.serializer),n.addTarget=function(s,o){let a;const u=o.target;if(a=HV(u)?{documents:fMt(s,u)}:{query:dMt(s,u)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=tPe(s,o.resumeToken);const l=GV(s,o.expectedCount);l!==null&&(a.expectedCount=l)}else if(o.snapshotVersion.compareTo(dn.min())>0){a.readTime=tM(s,o.snapshotVersion.toTimestamp());const l=GV(s,o.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,t);const r=pMt(this.serializer,t);r&&(n.labels=r),this.i_(n)}I_(t){const n={};n.database=XV(this.serializer),n.removeTarget=t,this.i_(n)}}class XMt extends fPe{constructor(t,n,r,i,s,o){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s,this.T_=!1}get E_(){return this.T_}start(){this.T_=!1,this.lastStreamToken=void 0,super.start()}__(){this.T_&&this.d_([])}l_(t,n){return this.connection.Oo("Write",t,n)}onMessage(t){if(ri(!!t.streamToken),this.lastStreamToken=t.streamToken,this.T_){this.Yo.reset();const n=cMt(t.writeResults,t.commitTime),r=bh(t.commitTime);return this.listener.A_(r,n)}return ri(!t.writeResults||t.writeResults.length===0),this.T_=!0,this.listener.R_()}V_(){const t={};t.database=XV(this.serializer),this.i_(t)}d_(t){const n={streamToken:this.lastStreamToken,writes:t.map(r=>lMt(this.serializer,r))};this.i_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QMt extends class{}{constructor(t,n,r,i){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.m_=!1}f_(){if(this.m_)throw new bt(Be.FAILED_PRECONDITION,"The client has already been terminated.")}Co(t,n,r,i){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Co(t,YV(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===Be.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new bt(Be.UNKNOWN,s.toString())})}xo(t,n,r,i,s){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.xo(t,YV(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===Be.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new bt(Be.UNKNOWN,o.toString())})}terminate(){this.m_=!0,this.connection.terminate()}}class JMt{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.g_=0,this.p_=null,this.y_=!0}w_(){this.g_===0&&(this.S_("Unknown"),this.p_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.p_=null,this.b_("Backend didn't respond within 10 seconds."),this.S_("Offline"),Promise.resolve())))}D_(t){this.state==="Online"?this.S_("Unknown"):(this.g_++,this.g_>=1&&(this.C_(),this.b_(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.S_("Offline")))}set(t){this.C_(),this.g_=0,t==="Online"&&(this.y_=!1),this.S_(t)}S_(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}b_(t){const n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.y_?(Lm(n),this.y_=!1):It("OnlineStateTracker",n)}C_(){this.p_!==null&&(this.p_.cancel(),this.p_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZMt{constructor(t,n,r,i,s){this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.v_=[],this.F_=new Map,this.M_=new Set,this.x_=[],this.O_=s,this.O_.io(o=>{r.enqueueAndForget(async()=>{e_(this)&&(It("RemoteStore","Restarting streams for network reachability change."),await async function(u){const l=hn(u);l.M_.add(4),await oR(l),l.N_.set("Unknown"),l.M_.delete(4),await sR(l)}(this))})}),this.N_=new JMt(r,i)}}async function sR(e){if(e_(e))for(const t of e.x_)await t(!0)}async function oR(e){for(const t of e.x_)await t(!1)}function dPe(e,t){const n=hn(e);n.F_.has(t.targetId)||(n.F_.set(t.targetId,t),bZ(n)?vZ(n):US(n).Xo()&&yZ(n,t))}function gZ(e,t){const n=hn(e),r=US(n);n.F_.delete(t),r.Xo()&&hPe(n,t),n.F_.size===0&&(r.Xo()?r.n_():e_(n)&&n.N_.set("Unknown"))}function yZ(e,t){if(e.L_.xe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(dn.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}US(e).P_(t)}function hPe(e,t){e.L_.xe(t),US(e).I_(t)}function vZ(e){e.L_=new tMt({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),ot:t=>e.F_.get(t)||null,tt:()=>e.datastore.serializer.databaseId}),US(e).start(),e.N_.w_()}function bZ(e){return e_(e)&&!US(e).Zo()&&e.F_.size>0}function e_(e){return hn(e).M_.size===0}function pPe(e){e.L_=void 0}async function eLt(e){e.N_.set("Online")}async function tLt(e){e.F_.forEach((t,n)=>{yZ(e,t)})}async function nLt(e,t){pPe(e),bZ(e)?(e.N_.D_(t),vZ(e)):e.N_.set("Unknown")}async function rLt(e,t,n){if(e.N_.set("Online"),t instanceof ePe&&t.state===2&&t.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.F_.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.F_.delete(a),i.L_.removeTarget(a))}(e,t)}catch(r){It("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),r),await nM(e,r)}else if(t instanceof qP?e.L_.Ke(t):t instanceof ZDe?e.L_.He(t):e.L_.We(t),!n.isEqual(dn.min()))try{const r=await lPe(e.localStore);n.compareTo(r)>=0&&await function(s,o){const a=s.L_.rt(o);return a.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){const c=s.F_.get(l);c&&s.F_.set(l,c.withResumeToken(u.resumeToken,o))}}),a.targetMismatches.forEach((u,l)=>{const c=s.F_.get(u);if(!c)return;s.F_.set(u,c.withResumeToken(Ea.EMPTY_BYTE_STRING,c.snapshotVersion)),hPe(s,u);const f=new n0(c.target,u,l,c.sequenceNumber);yZ(s,f)}),s.remoteSyncer.applyRemoteEvent(a)}(e,n)}catch(r){It("RemoteStore","Failed to raise snapshot:",r),await nM(e,r)}}async function nM(e,t,n){if(!nR(t))throw t;e.M_.add(1),await oR(e),e.N_.set("Offline"),n||(n=()=>lPe(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{It("RemoteStore","Retrying IndexedDB access"),await n(),e.M_.delete(1),await sR(e)})}function mPe(e,t){return t().catch(n=>nM(e,n,t))}async function j4(e){const t=hn(e),n=cy(t);let r=t.v_.length>0?t.v_[t.v_.length-1].batchId:-1;for(;iLt(t);)try{const i=await UMt(t.localStore,r);if(i===null){t.v_.length===0&&n.n_();break}r=i.batchId,sLt(t,i)}catch(i){await nM(t,i)}gPe(t)&&yPe(t)}function iLt(e){return e_(e)&&e.v_.length<10}function sLt(e,t){e.v_.push(t);const n=cy(e);n.Xo()&&n.E_&&n.d_(t.mutations)}function gPe(e){return e_(e)&&!cy(e).Zo()&&e.v_.length>0}function yPe(e){cy(e).start()}async function oLt(e){cy(e).V_()}async function aLt(e){const t=cy(e);for(const n of e.v_)t.d_(n.mutations)}async function uLt(e,t,n){const r=e.v_.shift(),i=cZ.from(r,t,n);await mPe(e,()=>e.remoteSyncer.applySuccessfulWrite(i)),await j4(e)}async function lLt(e,t){t&&cy(e).E_&&await async function(r,i){if(function(o){return J$t(o)&&o!==Be.ABORTED}(i.code)){const s=r.v_.shift();cy(r).t_(),await mPe(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await j4(r)}}(e,t),gPe(e)&&yPe(e)}async function Khe(e,t){const n=hn(e);n.asyncQueue.verifyOperationInProgress(),It("RemoteStore","RemoteStore received new credentials");const r=e_(n);n.M_.add(3),await oR(n),r&&n.N_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.M_.delete(3),await sR(n)}async function cLt(e,t){const n=hn(e);t?(n.M_.delete(2),await sR(n)):t||(n.M_.add(2),await oR(n),n.N_.set("Unknown"))}function US(e){return e.B_||(e.B_=function(n,r,i){const s=hn(n);return s.f_(),new KMt(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(e.datastore,e.asyncQueue,{Po:eLt.bind(null,e),To:tLt.bind(null,e),Ao:nLt.bind(null,e),h_:rLt.bind(null,e)}),e.x_.push(async t=>{t?(e.B_.t_(),bZ(e)?vZ(e):e.N_.set("Unknown")):(await e.B_.stop(),pPe(e))})),e.B_}function cy(e){return e.k_||(e.k_=function(n,r,i){const s=hn(n);return s.f_(),new XMt(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(e.datastore,e.asyncQueue,{Po:()=>Promise.resolve(),To:oLt.bind(null,e),Ao:lLt.bind(null,e),R_:aLt.bind(null,e),A_:uLt.bind(null,e)}),e.x_.push(async t=>{t?(e.k_.t_(),await j4(e)):(await e.k_.stop(),e.v_.length>0&&(It("RemoteStore",`Stopping write stream with ${e.v_.length} pending writes`),e.v_=[]))})),e.k_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _Z{constructor(t,n,r,i,s){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new lm,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,n,r,i,s){const o=Date.now()+r,a=new _Z(t,n,o,i,s);return a.start(r),a}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new bt(Be.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function wZ(e,t){if(Lm("AsyncQueue",`${t}: ${e}`),nR(e))return new bt(Be.UNAVAILABLE,`${t}: ${e}`);throw e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gE{constructor(t){this.comparator=t?(n,r)=>t(n,r)||Ut.comparator(n.key,r.key):(n,r)=>Ut.comparator(n.key,r.key),this.keyedMap=U2(),this.sortedSet=new Oi(this.comparator)}static emptySet(t){return new gE(t.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((n,r)=>(t(n),!1))}add(t){const n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){const n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof gE)||this.size!==t.size)return!1;const n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const t=[];return this.forEach(n=>{t.push(n.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){const r=new gE;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xhe{constructor(){this.q_=new Oi(Ut.comparator)}track(t){const n=t.doc.key,r=this.q_.get(n);r?t.type!==0&&r.type===3?this.q_=this.q_.insert(n,t):t.type===3&&r.type!==1?this.q_=this.q_.insert(n,{type:r.type,doc:t.doc}):t.type===2&&r.type===2?this.q_=this.q_.insert(n,{type:2,doc:t.doc}):t.type===2&&r.type===0?this.q_=this.q_.insert(n,{type:0,doc:t.doc}):t.type===1&&r.type===0?this.q_=this.q_.remove(n):t.type===1&&r.type===2?this.q_=this.q_.insert(n,{type:1,doc:r.doc}):t.type===0&&r.type===1?this.q_=this.q_.insert(n,{type:2,doc:t.doc}):an():this.q_=this.q_.insert(n,t)}Q_(){const t=[];return this.q_.inorderTraversal((n,r)=>{t.push(r)}),t}}class vx{constructor(t,n,r,i,s,o,a,u,l){this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(t,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new vx(t,n,gE.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&D4(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const n=this.docChanges,r=t.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fLt{constructor(){this.K_=void 0,this.U_=[]}W_(){return this.U_.some(t=>t.G_())}}class dLt{constructor(){this.queries=new BS(t=>jDe(t),D4),this.onlineState="Unknown",this.z_=new Set}}async function vPe(e,t){const n=hn(e);let r=3;const i=t.query;let s=n.queries.get(i);s?!s.W_()&&t.G_()&&(r=2):(s=new fLt,r=t.G_()?0:1);try{switch(r){case 0:s.K_=await n.onListen(i,!0);break;case 1:s.K_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const a=wZ(o,`Initialization of query '${uw(t.query)}' failed`);return void t.onError(a)}n.queries.set(i,s),s.U_.push(t),t.j_(n.onlineState),s.K_&&t.H_(s.K_)&&EZ(n)}async function bPe(e,t){const n=hn(e),r=t.query;let i=3;const s=n.queries.get(r);if(s){const o=s.U_.indexOf(t);o>=0&&(s.U_.splice(o,1),s.U_.length===0?i=t.G_()?0:1:!s.W_()&&t.G_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function hLt(e,t){const n=hn(e);let r=!1;for(const i of t){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.U_)a.H_(i)&&(r=!0);o.K_=i}}r&&EZ(n)}function pLt(e,t,n){const r=hn(e),i=r.queries.get(t);if(i)for(const s of i.U_)s.onError(n);r.queries.delete(t)}function EZ(e){e.z_.forEach(t=>{t.next()})}var JV,Qhe;(Qhe=JV||(JV={})).J_="default",Qhe.Cache="cache";class _Pe{constructor(t,n,r){this.query=t,this.Y_=n,this.Z_=!1,this.X_=null,this.onlineState="Unknown",this.options=r||{}}H_(t){if(!this.options.includeMetadataChanges){const r=[];for(const i of t.docChanges)i.type!==3&&r.push(i);t=new vx(t.query,t.docs,t.oldDocs,r,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let n=!1;return this.Z_?this.ea(t)&&(this.Y_.next(t),n=!0):this.ta(t,this.onlineState)&&(this.na(t),n=!0),this.X_=t,n}onError(t){this.Y_.error(t)}j_(t){this.onlineState=t;let n=!1;return this.X_&&!this.Z_&&this.ta(this.X_,t)&&(this.na(this.X_),n=!0),n}ta(t,n){if(!t.fromCache||!this.G_())return!0;const r=n!=="Offline";return(!this.options.ra||!r)&&(!t.docs.isEmpty()||t.hasCachedResults||n==="Offline")}ea(t){if(t.docChanges.length>0)return!0;const n=this.X_&&this.X_.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}na(t){t=vx.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Z_=!0,this.Y_.next(t)}G_(){return this.options.source!==JV.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wPe{constructor(t){this.key=t}}class EPe{constructor(t){this.key=t}}class mLt{constructor(t,n){this.query=t,this.la=n,this.ha=null,this.hasCachedResults=!1,this.current=!1,this.Pa=zn(),this.mutatedKeys=zn(),this.Ia=BDe(t),this.Ta=new gE(this.Ia)}get Ea(){return this.la}da(t,n){const r=n?n.Aa:new Xhe,i=n?n.Ta:this.Ta;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal((c,f)=>{const d=i.get(c),h=P4(this.query,f)?f:null,p=!!d&&this.mutatedKeys.has(d.key),m=!!h&&(h.hasLocalMutations||this.mutatedKeys.has(h.key)&&h.hasCommittedMutations);let g=!1;d&&h?d.data.isEqual(h.data)?p!==m&&(r.track({type:3,doc:h}),g=!0):this.Ra(d,h)||(r.track({type:2,doc:h}),g=!0,(u&&this.Ia(h,u)>0||l&&this.Ia(h,l)<0)&&(a=!0)):!d&&h?(r.track({type:0,doc:h}),g=!0):d&&!h&&(r.track({type:1,doc:d}),g=!0,(u||l)&&(a=!0)),g&&(h?(o=o.add(h),s=m?s.add(c):s.delete(c)):(o=o.delete(c),s=s.delete(c)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const c=this.query.limitType==="F"?o.last():o.first();o=o.delete(c.key),s=s.delete(c.key),r.track({type:1,doc:c})}return{Ta:o,Aa:r,Xi:a,mutatedKeys:s}}Ra(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,r,i){const s=this.Ta;this.Ta=t.Ta,this.mutatedKeys=t.mutatedKeys;const o=t.Aa.Q_();o.sort((c,f)=>function(h,p){const m=g=>{switch(g){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return an()}};return m(h)-m(p)}(c.type,f.type)||this.Ia(c.doc,f.doc)),this.Va(r),i=i!=null&&i;const a=n&&!i?this.ma():[],u=this.Pa.size===0&&this.current&&!i?1:0,l=u!==this.ha;return this.ha=u,o.length!==0||l?{snapshot:new vx(this.query,t.Ta,s,o,t.mutatedKeys,u===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),fa:a}:{fa:a}}j_(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({Ta:this.Ta,Aa:new Xhe,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{fa:[]}}ga(t){return!this.la.has(t)&&!!this.Ta.has(t)&&!this.Ta.get(t).hasLocalMutations}Va(t){t&&(t.addedDocuments.forEach(n=>this.la=this.la.add(n)),t.modifiedDocuments.forEach(n=>{}),t.removedDocuments.forEach(n=>this.la=this.la.delete(n)),this.current=t.current)}ma(){if(!this.current)return[];const t=this.Pa;this.Pa=zn(),this.Ta.forEach(r=>{this.ga(r.key)&&(this.Pa=this.Pa.add(r.key))});const n=[];return t.forEach(r=>{this.Pa.has(r)||n.push(new EPe(r))}),this.Pa.forEach(r=>{t.has(r)||n.push(new wPe(r))}),n}pa(t){this.la=t.hs,this.Pa=zn();const n=this.da(t.documents);return this.applyChanges(n,!0)}ya(){return vx.fromInitialDocuments(this.query,this.Ta,this.mutatedKeys,this.ha===0,this.hasCachedResults)}}class gLt{constructor(t,n,r){this.query=t,this.targetId=n,this.view=r}}class yLt{constructor(t){this.key=t,this.wa=!1}}class vLt{constructor(t,n,r,i,s,o){this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Sa={},this.ba=new BS(a=>jDe(a),D4),this.Da=new Map,this.Ca=new Set,this.va=new Oi(Ut.comparator),this.Fa=new Map,this.Ma=new hZ,this.xa={},this.Oa=new Map,this.Na=yx.Ln(),this.onlineState="Unknown",this.La=void 0}get isPrimaryClient(){return this.La===!0}}async function bLt(e,t,n=!0){const r=IPe(e);let i;const s=r.ba.get(t);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.ya()):i=await xPe(r,t,n,!0),i}async function _Lt(e,t){const n=IPe(e);await xPe(n,t,!0,!1)}async function xPe(e,t,n,r){const i=await zMt(e.localStore,vh(t)),s=i.targetId,o=n?e.sharedClientState.addLocalQueryTarget(s):"not-current";let a;return r&&(a=await wLt(e,t,s,o==="current",i.resumeToken)),e.isPrimaryClient&&n&&dPe(e.remoteStore,i),a}async function wLt(e,t,n,r,i){e.Ba=(f,d,h)=>async function(m,g,y,v){let b=g.view.da(y);b.Xi&&(b=await Whe(m.localStore,g.query,!1).then(({documents:S})=>g.view.da(S,b)));const w=v&&v.targetChanges.get(g.targetId),E=v&&v.targetMismatches.get(g.targetId)!=null,T=g.view.applyChanges(b,m.isPrimaryClient,w,E);return Zhe(m,g.targetId,T.fa),T.snapshot}(e,f,d,h);const s=await Whe(e.localStore,t,!0),o=new mLt(t,s.hs),a=o.da(s.documents),u=iR.createSynthesizedTargetChangeForCurrentChange(n,r&&e.onlineState!=="Offline",i),l=o.applyChanges(a,e.isPrimaryClient,u);Zhe(e,n,l.fa);const c=new gLt(t,n,o);return e.ba.set(t,c),e.Da.has(n)?e.Da.get(n).push(t):e.Da.set(n,[t]),l.snapshot}async function ELt(e,t,n){const r=hn(e),i=r.ba.get(t),s=r.Da.get(i.targetId);if(s.length>1)return r.Da.set(i.targetId,s.filter(o=>!D4(o,t))),void r.ba.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await QV(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&gZ(r.remoteStore,i.targetId),ZV(r,i.targetId)}).catch(tR)):(ZV(r,i.targetId),await QV(r.localStore,i.targetId,!0))}async function xLt(e,t){const n=hn(e),r=n.ba.get(t),i=n.Da.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),gZ(n.remoteStore,r.targetId))}async function SLt(e,t,n){const r=NLt(e);try{const i=await function(o,a){const u=hn(o),l=Ls.now(),c=a.reduce((h,p)=>h.add(p.key),zn());let f,d;return u.persistence.runTransaction("Locally write mutations","readwrite",h=>{let p=Fm(),m=zn();return u.os.getEntries(h,c).next(g=>{p=g,p.forEach((y,v)=>{v.isValidDocument()||(m=m.add(y))})}).next(()=>u.localDocuments.getOverlayedDocuments(h,p)).next(g=>{f=g;const y=[];for(const v of a){const b=G$t(v,f.get(v.key).overlayedDocument);b!=null&&y.push(new qy(v.key,b,NDe(b.value.mapValue),Wu.exists(!0)))}return u.mutationQueue.addMutationBatch(h,l,y,a)}).next(g=>{d=g;const y=g.applyToLocalDocumentSet(f,m);return u.documentOverlayCache.saveOverlays(h,g.batchId,y)})}).then(()=>({batchId:d.batchId,changes:zDe(f)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,u){let l=o.xa[o.currentUser.toKey()];l||(l=new Oi(vr)),l=l.insert(a,u),o.xa[o.currentUser.toKey()]=l}(r,i.batchId,n),await aR(r,i.changes),await j4(r.remoteStore)}catch(i){const s=wZ(i,"Failed to persist write");n.reject(s)}}async function SPe(e,t){const n=hn(e);try{const r=await jMt(n.localStore,t);t.targetChanges.forEach((i,s)=>{const o=n.Fa.get(s);o&&(ri(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.wa=!0:i.modifiedDocuments.size>0?ri(o.wa):i.removedDocuments.size>0&&(ri(o.wa),o.wa=!1))}),await aR(n,r,t)}catch(r){await tR(r)}}function Jhe(e,t,n){const r=hn(e);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.ba.forEach((s,o)=>{const a=o.view.j_(t);a.snapshot&&i.push(a.snapshot)}),function(o,a){const u=hn(o);u.onlineState=a;let l=!1;u.queries.forEach((c,f)=>{for(const d of f.U_)d.j_(a)&&(l=!0)}),l&&EZ(u)}(r.eventManager,t),i.length&&r.Sa.h_(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function TLt(e,t,n){const r=hn(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.Fa.get(t),s=i&&i.key;if(s){let o=new Oi(Ut.comparator);o=o.insert(s,ca.newNoDocument(s,dn.min()));const a=zn().add(s),u=new L4(dn.min(),new Map,new Oi(vr),o,a);await SPe(r,u),r.va=r.va.remove(s),r.Fa.delete(t),xZ(r)}else await QV(r.localStore,t,!1).then(()=>ZV(r,t,n)).catch(tR)}async function CLt(e,t){const n=hn(e),r=t.batch.batchId;try{const i=await FMt(n.localStore,t);CPe(n,r,null),TPe(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await aR(n,i)}catch(i){await tR(i)}}async function ALt(e,t,n){const r=hn(e);try{const i=await function(o,a){const u=hn(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let c;return u.mutationQueue.lookupMutationBatch(l,a).next(f=>(ri(f!==null),c=f.keys(),u.mutationQueue.removeMutationBatch(l,f))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,c,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,c)).next(()=>u.localDocuments.getDocuments(l,c))})}(r.localStore,t);CPe(r,t,n),TPe(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await aR(r,i)}catch(i){await tR(i)}}function TPe(e,t){(e.Oa.get(t)||[]).forEach(n=>{n.resolve()}),e.Oa.delete(t)}function CPe(e,t,n){const r=hn(e);let i=r.xa[r.currentUser.toKey()];if(i){const s=i.get(t);s&&(n?s.reject(n):s.resolve(),i=i.remove(t)),r.xa[r.currentUser.toKey()]=i}}function ZV(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Da.get(t))e.ba.delete(r),n&&e.Sa.ka(r,n);e.Da.delete(t),e.isPrimaryClient&&e.Ma.Vr(t).forEach(r=>{e.Ma.containsKey(r)||APe(e,r)})}function APe(e,t){e.Ca.delete(t.path.canonicalString());const n=e.va.get(t);n!==null&&(gZ(e.remoteStore,n),e.va=e.va.remove(t),e.Fa.delete(n),xZ(e))}function Zhe(e,t,n){for(const r of n)r instanceof wPe?(e.Ma.addReference(r.key,t),ILt(e,r)):r instanceof EPe?(It("SyncEngine","Document no longer in limbo: "+r.key),e.Ma.removeReference(r.key,t),e.Ma.containsKey(r.key)||APe(e,r.key)):an()}function ILt(e,t){const n=t.key,r=n.path.canonicalString();e.va.get(n)||e.Ca.has(r)||(It("SyncEngine","New document in limbo: "+n),e.Ca.add(r),xZ(e))}function xZ(e){for(;e.Ca.size>0&&e.va.size<e.maxConcurrentLimboResolutions;){const t=e.Ca.values().next().value;e.Ca.delete(t);const n=new Ut(ci.fromString(t)),r=e.Na.next();e.Fa.set(r,new yLt(n)),e.va=e.va.insert(n,r),dPe(e.remoteStore,new n0(vh(lZ(n.path)),r,"TargetPurposeLimboResolution",rZ.oe))}}async function aR(e,t,n){const r=hn(e),i=[],s=[],o=[];r.ba.isEmpty()||(r.ba.forEach((a,u)=>{o.push(r.Ba(u,t,n).then(l=>{if((l||n)&&r.isPrimaryClient){const c=l&&!l.fromCache;r.sharedClientState.updateQueryState(u.targetId,c?"current":"not-current")}if(l){i.push(l);const c=mZ.Ki(u.targetId,l);s.push(c)}}))}),await Promise.all(o),r.Sa.h_(i),await async function(u,l){const c=hn(u);try{await c.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>Qe.forEach(l,d=>Qe.forEach(d.qi,h=>c.persistence.referenceDelegate.addReference(f,d.targetId,h)).next(()=>Qe.forEach(d.Qi,h=>c.persistence.referenceDelegate.removeReference(f,d.targetId,h)))))}catch(f){if(!nR(f))throw f;It("LocalStore","Failed to update sequence numbers: "+f)}for(const f of l){const d=f.targetId;if(!f.fromCache){const h=c.ns.get(d),p=h.snapshotVersion,m=h.withLastLimboFreeSnapshotVersion(p);c.ns=c.ns.insert(d,m)}}}(r.localStore,s))}async function kLt(e,t){const n=hn(e);if(!n.currentUser.isEqual(t)){It("SyncEngine","User change. New user:",t.toKey());const r=await uPe(n.localStore,t);n.currentUser=t,function(s,o){s.Oa.forEach(a=>{a.forEach(u=>{u.reject(new bt(Be.CANCELLED,o))})}),s.Oa.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,r.removedBatchIds,r.addedBatchIds),await aR(n,r.us)}}function RLt(e,t){const n=hn(e),r=n.Fa.get(t);if(r&&r.wa)return zn().add(r.key);{let i=zn();const s=n.Da.get(t);if(!s)return i;for(const o of s){const a=n.ba.get(o);i=i.unionWith(a.view.Ea)}return i}}function IPe(e){const t=hn(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=SPe.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=RLt.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=TLt.bind(null,t),t.Sa.h_=hLt.bind(null,t.eventManager),t.Sa.ka=pLt.bind(null,t.eventManager),t}function NLt(e){const t=hn(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=CLt.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=ALt.bind(null,t),t}class epe{constructor(){this.synchronizeTabs=!1}async initialize(t){this.serializer=F4(t.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(t),this.persistence=this.createPersistence(t),await this.persistence.start(),this.localStore=this.createLocalStore(t),this.gcScheduler=this.createGarbageCollectionScheduler(t,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(t,this.localStore)}createGarbageCollectionScheduler(t,n){return null}createIndexBackfillerScheduler(t,n){return null}createLocalStore(t){return LMt(this.persistence,new $Mt,t.initialUser,this.serializer)}createPersistence(t){return new DMt(pZ.Hr,this.serializer)}createSharedClientState(t){return new HMt}async terminate(){var t,n;(t=this.gcScheduler)===null||t===void 0||t.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class DLt{async initialize(t,n){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Jhe(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=kLt.bind(null,this.syncEngine),await cLt(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new dLt}()}createDatastore(t){const n=F4(t.databaseInfo.databaseId),r=function(s){return new YMt(s)}(t.databaseInfo);return function(s,o,a,u){return new QMt(s,o,a,u)}(t.authCredentials,t.appCheckCredentials,r,n)}createRemoteStore(t){return function(r,i,s,o,a){return new ZMt(r,i,s,o,a)}(this.localStore,this.datastore,t.asyncQueue,n=>Jhe(this.syncEngine,n,0),function(){return Yhe.D()?new Yhe:new qMt}())}createSyncEngine(t,n){return function(i,s,o,a,u,l,c){const f=new vLt(i,s,o,a,u,l);return c&&(f.La=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}async terminate(){var t;await async function(r){const i=hn(r);It("RemoteStore","RemoteStore shutting down."),i.M_.add(5),await oR(i),i.O_.shutdown(),i.N_.set("Unknown")}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kPe{constructor(t){this.observer=t,this.muted=!1}next(t){this.observer.next&&this.Ka(this.observer.next,t)}error(t){this.observer.error?this.Ka(this.observer.error,t):Lm("Uncaught Error in snapshot listener:",t.toString())}$a(){this.muted=!0}Ka(t,n){this.muted||setTimeout(()=>{this.muted||t(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PLt{constructor(t,n,r,i){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=_u.UNAUTHENTICATED,this.clientId=IDe.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async s=>{It("FirestoreClient","Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>(It("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new bt(Be.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const t=new lm;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){const r=wZ(n,"Failed to shutdown persistence");t.reject(r)}}),t.promise}}async function B9(e,t){e.asyncQueue.verifyOperationInProgress(),It("FirestoreClient","Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(async i=>{r.isEqual(i)||(await uPe(t.localStore,i),r=i)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function tpe(e,t){e.asyncQueue.verifyOperationInProgress();const n=await RPe(e);It("FirestoreClient","Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(r=>Khe(t.remoteStore,r)),e.setAppCheckTokenChangeListener((r,i)=>Khe(t.remoteStore,i)),e._onlineComponents=t}function OLt(e){return e.name==="FirebaseError"?e.code===Be.FAILED_PRECONDITION||e.code===Be.UNIMPLEMENTED:!(typeof DOMException<"u"&&e instanceof DOMException)||e.code===22||e.code===20||e.code===11}async function RPe(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){It("FirestoreClient","Using user provided OfflineComponentProvider");try{await B9(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!OLt(n))throw n;bI("Error using user provided cache. Falling back to memory cache: "+n),await B9(e,new epe)}}else It("FirestoreClient","Using default OfflineComponentProvider"),await B9(e,new epe);return e._offlineComponents}async function SZ(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(It("FirestoreClient","Using user provided OnlineComponentProvider"),await tpe(e,e._uninitializedComponentsProvider._online)):(It("FirestoreClient","Using default OnlineComponentProvider"),await tpe(e,new DLt))),e._onlineComponents}function $Lt(e){return RPe(e).then(t=>t.persistence)}function MLt(e){return SZ(e).then(t=>t.remoteStore)}function LLt(e){return SZ(e).then(t=>t.syncEngine)}async function NPe(e){const t=await SZ(e),n=t.eventManager;return n.onListen=bLt.bind(null,t.syncEngine),n.onUnlisten=ELt.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=_Lt.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=xLt.bind(null,t.syncEngine),n}function FLt(e){return e.asyncQueue.enqueue(async()=>{const t=await $Lt(e),n=await MLt(e);return t.setNetworkEnabled(!0),function(i){const s=hn(i);return s.M_.delete(0),sR(s)}(n)})}function jLt(e,t,n={}){const r=new lm;return e.asyncQueue.enqueueAndForget(async()=>function(s,o,a,u,l){const c=new kPe({next:d=>{o.enqueueAndForget(()=>bPe(s,f));const h=d.docs.has(a);!h&&d.fromCache?l.reject(new bt(Be.UNAVAILABLE,"Failed to get document because the client is offline.")):h&&d.fromCache&&u&&u.source==="server"?l.reject(new bt(Be.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(d)},error:d=>l.reject(d)}),f=new _Pe(lZ(a.path),c,{includeMetadataChanges:!0,ra:!0});return vPe(s,f)}(await NPe(e),e.asyncQueue,t,n,r)),r.promise}function BLt(e,t,n={}){const r=new lm;return e.asyncQueue.enqueueAndForget(async()=>function(s,o,a,u,l){const c=new kPe({next:d=>{o.enqueueAndForget(()=>bPe(s,f)),d.fromCache&&u.source==="server"?l.reject(new bt(Be.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(d)},error:d=>l.reject(d)}),f=new _Pe(a,c,{includeMetadataChanges:!0,ra:!0});return vPe(s,f)}(await NPe(e),e.asyncQueue,t,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DPe(e){const t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const npe=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PPe(e,t,n){if(!n)throw new bt(Be.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function ULt(e,t,n,r){if(t===!0&&r===!0)throw new bt(Be.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function rpe(e){if(!Ut.isDocumentKey(e))throw new bt(Be.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function ipe(e){if(Ut.isDocumentKey(e))throw new bt(Be.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function B4(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";{const t=function(r){return r.constructor?r.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return typeof e=="function"?"a function":an()}function Zf(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new bt(Be.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=B4(e);throw new bt(Be.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class spe{constructor(t){var n,r;if(t.host===void 0){if(t.ssl!==void 0)throw new bt(Be.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=(n=t.ssl)===null||n===void 0||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<1048576)throw new bt(Be.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}ULt("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=DPe((r=t.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new bt(Be.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new bt(Be.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new bt(Be.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class TZ{constructor(t,n,r,i){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new spe({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new bt(Be.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(t){if(this._settingsFrozen)throw new bt(Be.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new spe(t),t.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new r$t;switch(r.type){case"firstParty":return new o$t(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new bt(Be.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=npe.get(n);r&&(It("ComponentProvider","Removing Datastore"),npe.delete(n),r.terminate())}(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t_{constructor(t,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=t}withConverter(t){return new t_(this.firestore,t,this._query)}}class Ka{constructor(t,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new R0(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Ka(this.firestore,t,this._key)}}class R0 extends t_{constructor(t,n,r){super(t,n,lZ(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Ka(this.firestore,null,new Ut(t))}withConverter(t){return new R0(this.firestore,t,this._path)}}function rf(e,t,...n){if(e=ii(e),PPe("collection","path",t),e instanceof TZ){const r=ci.fromString(t,...n);return ipe(r),new R0(e,null,r)}{if(!(e instanceof Ka||e instanceof R0))throw new bt(Be.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(ci.fromString(t,...n));return ipe(r),new R0(e.firestore,null,r)}}function ys(e,t,...n){if(e=ii(e),arguments.length===1&&(t=IDe.newId()),PPe("doc","path",t),e instanceof TZ){const r=ci.fromString(t,...n);return rpe(r),new Ka(e,null,new Ut(r))}{if(!(e instanceof Ka||e instanceof R0))throw new bt(Be.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(ci.fromString(t,...n));return rpe(r),new Ka(e.firestore,e instanceof R0?e.converter:null,new Ut(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zLt{constructor(){this.iu=Promise.resolve(),this.su=[],this.ou=!1,this._u=[],this.au=null,this.uu=!1,this.cu=!1,this.lu=[],this.Yo=new cPe(this,"async_queue_retry"),this.hu=()=>{const n=j9();n&&It("AsyncQueue","Visibility state changed to "+n.visibilityState),this.Yo.Wo()};const t=j9();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.hu)}get isShuttingDown(){return this.ou}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.Pu(),this.Iu(t)}enterRestrictedMode(t){if(!this.ou){this.ou=!0,this.cu=t||!1;const n=j9();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.hu)}}enqueue(t){if(this.Pu(),this.ou)return new Promise(()=>{});const n=new lm;return this.Iu(()=>this.ou&&this.cu?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.su.push(t),this.Tu()))}async Tu(){if(this.su.length!==0){try{await this.su[0](),this.su.shift(),this.Yo.reset()}catch(t){if(!nR(t))throw t;It("AsyncQueue","Operation failed with retryable error: "+t)}this.su.length>0&&this.Yo.$o(()=>this.Tu())}}Iu(t){const n=this.iu.then(()=>(this.uu=!0,t().catch(r=>{this.au=r,this.uu=!1;const i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw Lm("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.uu=!1,r))));return this.iu=n,n}enqueueAfterDelay(t,n,r){this.Pu(),this.lu.indexOf(t)>-1&&(n=0);const i=_Z.createAndSchedule(this,t,n,r,s=>this.Eu(s));return this._u.push(i),i}Pu(){this.au&&an()}verifyOperationInProgress(){}async du(){let t;do t=this.iu,await t;while(t!==this.iu)}Au(t){for(const n of this._u)if(n.timerId===t)return!0;return!1}Ru(t){return this.du().then(()=>{this._u.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this._u)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.du()})}Vu(t){this.lu.push(t)}Eu(t){const n=this._u.indexOf(t);this._u.splice(n,1)}}class Wy extends TZ{constructor(t,n,r,i){super(t,n,r,i),this.type="firestore",this._queue=function(){return new zLt}(),this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||OPe(this),this._firestoreClient.terminate()}}function VLt(e,t,n){n||(n="(default)");const r=MS(e,"firestore");if(r.isInitialized(n)){const i=r.getImmediate({identifier:n}),s=r.getOptions(n);if(gI(s,t))return i;throw new bt(Be.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(t.cacheSizeBytes!==void 0&&t.localCache!==void 0)throw new bt(Be.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(t.cacheSizeBytes!==void 0&&t.cacheSizeBytes!==-1&&t.cacheSizeBytes<1048576)throw new bt(Be.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return r.initialize({options:t,instanceIdentifier:n})}function uR(e){return e._firestoreClient||OPe(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function OPe(e){var t,n,r;const i=e._freezeSettings(),s=function(a,u,l,c){return new b$t(a,u,l,c.host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,DPe(c.experimentalLongPollingOptions),c.useFetchStreams)}(e._databaseId,((t=e._app)===null||t===void 0?void 0:t.options.appId)||"",e._persistenceKey,i);e._firestoreClient=new PLt(e._authCredentials,e._appCheckCredentials,e._queue,s),!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function HLt(e){return FLt(uR(e=Zf(e,Wy)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bx{constructor(t){this._byteString=t}static fromBase64String(t){try{return new bx(Ea.fromBase64String(t))}catch(n){throw new bt(Be.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new bx(Ea.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lR{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new bt(Be.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Io(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U4{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let CZ=class{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new bt(Be.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new bt(Be.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return vr(this._lat,t._lat)||vr(this._long,t._long)}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qLt=/^__.*__$/;class WLt{constructor(t,n,r){this.data=t,this.fieldMask=n,this.fieldTransforms=r}toMutation(t,n){return this.fieldMask!==null?new qy(t,this.data,this.fieldMask,n,this.fieldTransforms):new rR(t,this.data,n,this.fieldTransforms)}}class $Pe{constructor(t,n,r){this.data=t,this.fieldMask=n,this.fieldTransforms=r}toMutation(t,n){return new qy(t,this.data,this.fieldMask,n,this.fieldTransforms)}}function MPe(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw an()}}class AZ{constructor(t,n,r,i,s,o){this.settings=t,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.mu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get fu(){return this.settings.fu}gu(t){return new AZ(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}pu(t){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(t),i=this.gu({path:r,yu:!1});return i.wu(t),i}Su(t){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(t),i=this.gu({path:r,yu:!1});return i.mu(),i}bu(t){return this.gu({path:void 0,yu:!0})}Du(t){return rM(t,this.settings.methodName,this.settings.Cu||!1,this.path,this.settings.vu)}contains(t){return this.fieldMask.find(n=>t.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>t.isPrefixOf(n.field))!==void 0}mu(){if(this.path)for(let t=0;t<this.path.length;t++)this.wu(this.path.get(t))}wu(t){if(t.length===0)throw this.Du("Document fields must not be empty");if(MPe(this.fu)&&qLt.test(t))throw this.Du('Document fields cannot begin and end with "__"')}}class GLt{constructor(t,n,r){this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=r||F4(t)}Fu(t,n,r,i=!1){return new AZ({fu:t,methodName:n,vu:r,path:Io.emptyPath(),yu:!1,Cu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function z4(e){const t=e._freezeSettings(),n=F4(e._databaseId);return new GLt(e._databaseId,!!t.ignoreUndefinedProperties,n)}function LPe(e,t,n,r,i,s={}){const o=e.Fu(s.merge||s.mergeFields?2:0,t,n,i);kZ("Data must be an object, but it was:",o,r);const a=BPe(r,o);let u,l;if(s.merge)u=new Al(o.fieldMask),l=o.fieldTransforms;else if(s.mergeFields){const c=[];for(const f of s.mergeFields){const d=eH(t,f,n);if(!o.contains(d))throw new bt(Be.INVALID_ARGUMENT,`Field '${d}' is specified in your field mask but missing from your input data.`);zPe(c,d)||c.push(d)}u=new Al(c),l=o.fieldTransforms.filter(f=>u.covers(f.field))}else u=null,l=o.fieldTransforms;return new WLt(new Nu(a),u,l)}class V4 extends U4{_toFieldTransform(t){if(t.fu!==2)throw t.fu===1?t.Du(`${this._methodName}() can only appear at the top level of your update data`):t.Du(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof V4}}class IZ extends U4{_toFieldTransform(t){return new V$t(t.path,new TI)}isEqual(t){return t instanceof IZ}}function FPe(e,t,n,r){const i=e.Fu(1,t,n);kZ("Data must be an object, but it was:",i,r);const s=[],o=Nu.empty();Zb(r,(u,l)=>{const c=RZ(t,u,n);l=ii(l);const f=i.Su(c);if(l instanceof V4)s.push(c);else{const d=cR(l,f);d!=null&&(s.push(c),o.set(c,d))}});const a=new Al(s);return new $Pe(o,a,i.fieldTransforms)}function jPe(e,t,n,r,i,s){const o=e.Fu(1,t,n),a=[eH(t,r,n)],u=[i];if(s.length%2!=0)throw new bt(Be.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let d=0;d<s.length;d+=2)a.push(eH(t,s[d])),u.push(s[d+1]);const l=[],c=Nu.empty();for(let d=a.length-1;d>=0;--d)if(!zPe(l,a[d])){const h=a[d];let p=u[d];p=ii(p);const m=o.Su(h);if(p instanceof V4)l.push(h);else{const g=cR(p,m);g!=null&&(l.push(h),c.set(h,g))}}const f=new Al(l);return new $Pe(c,f,o.fieldTransforms)}function YLt(e,t,n,r=!1){return cR(n,e.Fu(r?4:3,t))}function cR(e,t){if(UPe(e=ii(e)))return kZ("Unsupported field value:",t,e),BPe(e,t);if(e instanceof U4)return function(r,i){if(!MPe(i.fu))throw i.Du(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Du(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.yu&&t.fu!==4)throw t.Du("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let u=cR(a,i.bu(o));u==null&&(u={nullValue:"NULL_VALUE"}),s.push(u),o++}return{arrayValue:{values:s}}}(e,t)}return function(r,i){if((r=ii(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return B$t(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=Ls.fromDate(r);return{timestampValue:tM(i.serializer,s)}}if(r instanceof Ls){const s=new Ls(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:tM(i.serializer,s)}}if(r instanceof CZ)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof bx)return{bytesValue:tPe(i.serializer,r._byteString)};if(r instanceof Ka){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Du(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:dZ(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.Du(`Unsupported field value: ${B4(r)}`)}(e,t)}function BPe(e,t){const n={};return kDe(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Zb(e,(r,i)=>{const s=cR(i,t.pu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function UPe(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof Ls||e instanceof CZ||e instanceof bx||e instanceof Ka||e instanceof U4)}function kZ(e,t,n){if(!UPe(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=B4(n);throw r==="an object"?t.Du(e+" a custom object"):t.Du(e+" "+r)}}function eH(e,t,n){if((t=ii(t))instanceof lR)return t._internalPath;if(typeof t=="string")return RZ(e,t);throw rM("Field path arguments must be of type string or ",e,!1,void 0,n)}const KLt=new RegExp("[~\\*/\\[\\]]");function RZ(e,t,n){if(t.search(KLt)>=0)throw rM(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new lR(...t.split("."))._internalPath}catch{throw rM(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function rM(e,t,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${t}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new bt(Be.INVALID_ARGUMENT,a+e+u)}function zPe(e,t){return e.some(n=>n.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VPe{constructor(t,n,r,i,s){this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Ka(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new XLt(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const n=this._document.data.field(H4("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}}class XLt extends VPe{data(){return super.data()}}function H4(e,t){return typeof t=="string"?RZ(e,t):t instanceof lR?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QLt(e){if(e.limitType==="L"&&e.explicitOrderBy.length===0)throw new bt(Be.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class NZ{}class HPe extends NZ{}function ope(e,t,...n){let r=[];t instanceof NZ&&r.push(t),r=r.concat(n),function(s){const o=s.filter(u=>u instanceof DZ).length,a=s.filter(u=>u instanceof q4).length;if(o>1||o>0&&a>0)throw new bt(Be.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)e=i._apply(e);return e}class q4 extends HPe{constructor(t,n,r){super(),this._field=t,this._op=n,this._value=r,this.type="where"}static _create(t,n,r){return new q4(t,n,r)}_apply(t){const n=this._parse(t);return qPe(t._query,n),new t_(t.firestore,t.converter,qV(t._query,n))}_parse(t){const n=z4(t.firestore);return function(s,o,a,u,l,c,f){let d;if(l.isKeyField()){if(c==="array-contains"||c==="array-contains-any")throw new bt(Be.INVALID_ARGUMENT,`Invalid Query. You can't perform '${c}' queries on documentId().`);if(c==="in"||c==="not-in"){upe(f,c);const h=[];for(const p of f)h.push(ape(u,s,p));d={arrayValue:{values:h}}}else d=ape(u,s,f)}else c!=="in"&&c!=="not-in"&&c!=="array-contains-any"||upe(f,c),d=YLt(a,o,f,c==="in"||c==="not-in");return Es.create(l,c,d)}(t._query,"where",n,t.firestore._databaseId,this._field,this._op,this._value)}}function JLt(e,t,n){const r=t,i=H4("where",e);return q4._create(i,r,n)}class DZ extends NZ{constructor(t,n){super(),this.type=t,this._queryConstraints=n}static _create(t,n){return new DZ(t,n)}_parse(t){const n=this._queryConstraints.map(r=>r._parse(t)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Jf.create(n,this._getOperator())}_apply(t){const n=this._parse(t);return n.getFilters().length===0?t:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const u of a)qPe(o,u),o=qV(o,u)}(t._query,n),new t_(t.firestore,t.converter,qV(t._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class PZ extends HPe{constructor(t,n){super(),this._field=t,this._direction=n,this.type="orderBy"}static _create(t,n){return new PZ(t,n)}_apply(t){const n=function(i,s,o){if(i.startAt!==null)throw new bt(Be.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new bt(Be.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new SI(s,o)}(t._query,this._field,this._direction);return new t_(t.firestore,t.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new jS(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(t._query,n))}}function ZLt(e,t="asc"){const n=t,r=H4("orderBy",e);return PZ._create(r,n)}function ape(e,t,n){if(typeof(n=ii(n))=="string"){if(n==="")throw new bt(Be.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!FDe(t)&&n.indexOf("/")!==-1)throw new bt(Be.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=t.path.child(ci.fromString(n));if(!Ut.isDocumentKey(r))throw new bt(Be.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return khe(e,new Ut(r))}if(n instanceof Ka)return khe(e,n._key);throw new bt(Be.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${B4(n)}.`)}function upe(e,t){if(!Array.isArray(e)||e.length===0)throw new bt(Be.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function qPe(e,t){const n=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(e.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(n!==null)throw n===t.op?new bt(Be.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new bt(Be.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}class e6t{convertValue(t,n="none"){switch(lb(t)){case 0:return null;case 1:return t.booleanValue;case 2:return _s(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(ub(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 10:return this.convertObject(t.mapValue,n);default:throw an()}}convertObject(t,n){return this.convertObjectMap(t.fields,n)}convertObjectMap(t,n="none"){const r={};return Zb(t,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertGeoPoint(t){return new CZ(_s(t.latitude),_s(t.longitude))}convertArray(t,n){return(t.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(t,n){switch(n){case"previous":const r=sZ(t);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(wI(t));default:return null}}convertTimestamp(t){const n=ly(t);return new Ls(n.seconds,n.nanos)}convertDocumentKey(t,n){const r=ci.fromString(t);ri(aPe(r));const i=new EI(r.get(1),r.get(3)),s=new Ut(r.popFirst(5));return i.isEqual(n)||Lm(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WPe(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V2{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class GPe extends VPe{constructor(t,n,r,i,s,o){super(t,n,r,i,o),this._firestore=t,this._firestoreImpl=t,this.metadata=s}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const n=new WP(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){const r=this._document.data.field(H4("DocumentSnapshot.get",t));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class WP extends GPe{data(t={}){return super.data(t)}}class t6t{constructor(t,n,r,i){this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new V2(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const t=[];return this.forEach(n=>t.push(n)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,n){this._snapshot.docs.forEach(r=>{t.call(n,new WP(this._firestore,this._userDataWriter,r.key,r,new V2(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new bt(Be.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const u=new WP(i._firestore,i._userDataWriter,a.doc.key,a.doc,new V2(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const u=new WP(i._firestore,i._userDataWriter,a.doc.key,a.doc,new V2(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let l=-1,c=-1;return a.type!==0&&(l=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),c=o.indexOf(a.doc.key)),{type:n6t(a.type),doc:u,oldIndex:l,newIndex:c}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function n6t(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return an()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U9(e){e=Zf(e,Ka);const t=Zf(e.firestore,Wy);return jLt(uR(t),e._key).then(n=>s6t(t,e,n))}class YPe extends e6t{constructor(t){super(),this.firestore=t}convertBytes(t){return new bx(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new Ka(this.firestore,null,n)}}function qT(e){e=Zf(e,t_);const t=Zf(e.firestore,Wy),n=uR(t),r=new YPe(t);return QLt(e._query),BLt(n,e._query).then(i=>new t6t(t,r,e,i))}function gu(e,t,n){e=Zf(e,Ka);const r=Zf(e.firestore,Wy),i=WPe(e.converter,t,n);return W4(r,[LPe(z4(r),"setDoc",e._key,i,e.converter!==null,n).toMutation(e._key,Wu.none())])}function r6t(e,t,n,...r){e=Zf(e,Ka);const i=Zf(e.firestore,Wy),s=z4(i);let o;return o=typeof(t=ii(t))=="string"||t instanceof lR?jPe(s,"updateDoc",e._key,t,n,r):FPe(s,"updateDoc",e._key,t),W4(i,[o.toMutation(e._key,Wu.exists(!0))])}function i6t(e){return W4(Zf(e.firestore,Wy),[new M4(e._key,Wu.none())])}function W4(e,t){return function(r,i){const s=new lm;return r.asyncQueue.enqueueAndForget(async()=>SLt(await LLt(r),i,s)),s.promise}(uR(e),t)}function s6t(e,t,n){const r=n.docs.get(t._key),i=new YPe(e);return new GPe(e,i,t._key,r,new V2(n.hasPendingWrites,n.fromCache),t.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o6t{constructor(t,n){this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=z4(t)}set(t,n,r){this._verifyNotCommitted();const i=z9(t,this._firestore),s=WPe(i.converter,n,r),o=LPe(this._dataReader,"WriteBatch.set",i._key,s,i.converter!==null,r);return this._mutations.push(o.toMutation(i._key,Wu.none())),this}update(t,n,r,...i){this._verifyNotCommitted();const s=z9(t,this._firestore);let o;return o=typeof(n=ii(n))=="string"||n instanceof lR?jPe(this._dataReader,"WriteBatch.update",s._key,n,r,i):FPe(this._dataReader,"WriteBatch.update",s._key,n),this._mutations.push(o.toMutation(s._key,Wu.exists(!0))),this}delete(t){this._verifyNotCommitted();const n=z9(t,this._firestore);return this._mutations=this._mutations.concat(new M4(n._key,Wu.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new bt(Be.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function z9(e,t){if((e=ii(e)).firestore!==t)throw new bt(Be.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}function a6t(){return new IZ("serverTimestamp")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lpe(e){return uR(e=Zf(e,Wy)),new o6t(e,t=>W4(e,t))}(function(t,n=!0){(function(i){FS=i})(Jb),$m(new Oh("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new Wy(new i$t(r.getProvider("auth-internal")),new u$t(r.getProvider("app-check-internal")),function(l,c){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new bt(Be.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new EI(l.options.projectId,c)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),zf(The,"4.6.3",t),zf(The,"4.6.3","esm2017")})();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tH=new Map,KPe={activated:!1,tokenObservers:[]},u6t={initialized:!1,enabled:!1};function Fs(e){return tH.get(e)||Object.assign({},KPe)}function l6t(e,t){return tH.set(e,t),tH.get(e)}function G4(){return u6t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XPe="https://content-firebaseappcheck.googleapis.com/v1",c6t="exchangeRecaptchaV3Token",f6t="exchangeDebugToken",cpe={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},d6t=24*60*60*1e3;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h6t{constructor(t,n,r,i,s){if(this.operation=t,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=i,i>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}async process(t){this.stop();try{this.pending=new mI,this.pending.promise.catch(n=>{}),await p6t(this.getNextRun(t)),this.pending.resolve(),await this.pending.promise,this.pending=new mI,this.pending.promise.catch(n=>{}),await this.operation(),this.pending.resolve(),await this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}}getNextRun(t){if(t)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}}function p6t(e){return new Promise(t=>{setTimeout(t,e)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m6t={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},Fu=new $S("appCheck","AppCheck",m6t);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fpe(e=!1){var t;return e?(t=self.grecaptcha)===null||t===void 0?void 0:t.enterprise:self.grecaptcha}function OZ(e){if(!Fs(e).activated)throw Fu.create("use-before-activation",{appName:e.name})}function QPe(e){const t=Math.round(e/1e3),n=Math.floor(t/(3600*24)),r=Math.floor((t-n*3600*24)/3600),i=Math.floor((t-n*3600*24-r*3600)/60),s=t-n*3600*24-r*3600-i*60;let o="";return n&&(o+=bD(n)+"d:"),r&&(o+=bD(r)+"h:"),o+=bD(i)+"m:"+bD(s)+"s",o}function bD(e){return e===0?"00":e>=10?e.toString():"0"+e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $Z({url:e,body:t},n){const r={"Content-Type":"application/json"},i=n.getImmediate({optional:!0});if(i){const f=await i.getHeartbeatsHeader();f&&(r["X-Firebase-Client"]=f)}const s={method:"POST",body:JSON.stringify(t),headers:r};let o;try{o=await fetch(e,s)}catch(f){throw Fu.create("fetch-network-error",{originalErrorMessage:f==null?void 0:f.message})}if(o.status!==200)throw Fu.create("fetch-status-error",{httpStatus:o.status});let a;try{a=await o.json()}catch(f){throw Fu.create("fetch-parse-error",{originalErrorMessage:f==null?void 0:f.message})}const u=a.ttl.match(/^([\d.]+)(s)$/);if(!u||!u[2]||isNaN(Number(u[1])))throw Fu.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${a.ttl}`});const l=Number(u[1])*1e3,c=Date.now();return{token:a.token,expireTimeMillis:c+l,issuedAtTimeMillis:c}}function g6t(e,t){const{projectId:n,appId:r,apiKey:i}=e.options;return{url:`${XPe}/projects/${n}/apps/${r}:${c6t}?key=${i}`,body:{recaptcha_v3_token:t}}}function JPe(e,t){const{projectId:n,appId:r,apiKey:i}=e.options;return{url:`${XPe}/projects/${n}/apps/${r}:${f6t}?key=${i}`,body:{debug_token:t}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y6t="firebase-app-check-database",v6t=1,II="firebase-app-check-store",ZPe="debug-token";let _D=null;function eOe(){return _D||(_D=new Promise((e,t)=>{try{const n=indexedDB.open(y6t,v6t);n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{var i;t(Fu.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},n.onupgradeneeded=r=>{const i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(II,{keyPath:"compositeKey"})}}}catch(n){t(Fu.create("storage-open",{originalErrorMessage:n==null?void 0:n.message}))}}),_D)}function b6t(e){return nOe(rOe(e))}function _6t(e,t){return tOe(rOe(e),t)}function w6t(e){return tOe(ZPe,e)}function E6t(){return nOe(ZPe)}async function tOe(e,t){const r=(await eOe()).transaction(II,"readwrite"),s=r.objectStore(II).put({compositeKey:e,value:t});return new Promise((o,a)=>{s.onsuccess=u=>{o()},r.onerror=u=>{var l;a(Fu.create("storage-set",{originalErrorMessage:(l=u.target.error)===null||l===void 0?void 0:l.message}))}})}async function nOe(e){const n=(await eOe()).transaction(II,"readonly"),i=n.objectStore(II).get(e);return new Promise((s,o)=>{i.onsuccess=a=>{const u=a.target.result;s(u?u.value:void 0)},n.onerror=a=>{var u;o(Fu.create("storage-get",{originalErrorMessage:(u=a.target.error)===null||u===void 0?void 0:u.message}))}})}function rOe(e){return`${e.options.appId}-${e.name}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kI=new S4("@firebase/app-check");/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function x6t(e){if(LJ()){let t;try{t=await b6t(e)}catch(n){kI.warn(`Failed to read token from IndexedDB. Error: ${n}`)}return t}}function V9(e,t){return LJ()?_6t(e,t).catch(n=>{kI.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}async function S6t(){let e;try{e=await E6t()}catch{}if(e)return e;{const t=xNt();return w6t(t).catch(n=>kI.warn(`Failed to persist debug token to IndexedDB. Error: ${n}`)),t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MZ(){return G4().enabled}async function LZ(){const e=G4();if(e.enabled&&e.token)return e.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)}function T6t(){const e=_Ne(),t=G4();if(t.initialized=!0,typeof e.FIREBASE_APPCHECK_DEBUG_TOKEN!="string"&&e.FIREBASE_APPCHECK_DEBUG_TOKEN!==!0)return;t.enabled=!0;const n=new mI;t.token=n,typeof e.FIREBASE_APPCHECK_DEBUG_TOKEN=="string"?n.resolve(e.FIREBASE_APPCHECK_DEBUG_TOKEN):n.resolve(S6t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C6t={error:"UNKNOWN_ERROR"};function A6t(e){return MJ.encodeString(JSON.stringify(e),!1)}async function nH(e,t=!1){const n=e.app;OZ(n);const r=Fs(n);let i=r.token,s;if(i&&!Pw(i)&&(r.token=void 0,i=void 0),!i){const u=await r.cachedTokenPromise;u&&(Pw(u)?i=u:await V9(n,void 0))}if(!t&&i&&Pw(i))return{token:i.token};let o=!1;if(MZ()){r.exchangeTokenPromise||(r.exchangeTokenPromise=$Z(JPe(n,await LZ()),e.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),o=!0);const u=await r.exchangeTokenPromise;return await V9(n,u),r.token=u,{token:u.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),o=!0),i=await Fs(n).exchangeTokenPromise}catch(u){u.code==="appCheck/throttled"?kI.warn(u.message):kI.error(u),s=u}let a;return i?s?Pw(i)?a={token:i.token,internalError:s}:a=hpe(s):(a={token:i.token},r.token=i,await V9(n,i)):a=hpe(s),o&&oOe(n,a),a}async function I6t(e){const t=e.app;OZ(t);const{provider:n}=Fs(t);if(MZ()){const r=await LZ(),{token:i}=await $Z(JPe(t,r),e.heartbeatServiceProvider);return{token:i}}else{const{token:r}=await n.getToken();return{token:r}}}function iOe(e,t,n,r){const{app:i}=e,s=Fs(i),o={next:n,error:r,type:t};if(s.tokenObservers=[...s.tokenObservers,o],s.token&&Pw(s.token)){const a=s.token;Promise.resolve().then(()=>{n({token:a.token}),dpe(e)}).catch(()=>{})}s.cachedTokenPromise.then(()=>dpe(e))}function sOe(e,t){const n=Fs(e),r=n.tokenObservers.filter(i=>i.next!==t);r.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=r}function dpe(e){const{app:t}=e,n=Fs(t);let r=n.tokenRefresher;r||(r=k6t(e),n.tokenRefresher=r),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function k6t(e){const{app:t}=e;return new h6t(async()=>{const n=Fs(t);let r;if(n.token?r=await nH(e,!0):r=await nH(e),r.error)throw r.error;if(r.internalError)throw r.internalError},()=>!0,()=>{const n=Fs(t);if(n.token){let r=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5;const i=n.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},cpe.RETRIAL_MIN_WAIT,cpe.RETRIAL_MAX_WAIT)}function oOe(e,t){const n=Fs(e).tokenObservers;for(const r of n)try{r.type==="EXTERNAL"&&t.error!=null?r.error(t.error):r.next(t)}catch{}}function Pw(e){return e.expireTimeMillis-Date.now()>0}function hpe(e){return{token:A6t(C6t),error:e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R6t{constructor(t,n){this.app=t,this.heartbeatServiceProvider=n}_delete(){const{tokenObservers:t}=Fs(this.app);for(const n of t)sOe(this.app,n.next);return Promise.resolve()}}function N6t(e,t){return new R6t(e,t)}function D6t(e){return{getToken:t=>nH(e,t),getLimitedUseToken:()=>I6t(e),addTokenListener:t=>iOe(e,"INTERNAL",t),removeTokenListener:t=>sOe(e.app,t)}}const P6t="@firebase/app-check",O6t="0.8.4";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $6t="https://www.google.com/recaptcha/api.js";function M6t(e,t){const n=new mI,r=Fs(e);r.reCAPTCHAState={initialized:n};const i=L6t(e),s=fpe(!1);return s?ppe(e,t,s,i,n):B6t(()=>{const o=fpe(!1);if(!o)throw new Error("no recaptcha");ppe(e,t,o,i,n)}),n.promise}function ppe(e,t,n,r,i){n.ready(()=>{j6t(e,t,n,r),i.resolve(n)})}function L6t(e){const t=`fire_app_check_${e.name}`,n=document.createElement("div");return n.id=t,n.style.display="none",document.body.appendChild(n),t}async function F6t(e){OZ(e);const n=await Fs(e).reCAPTCHAState.initialized.promise;return new Promise((r,i)=>{const s=Fs(e).reCAPTCHAState;n.ready(()=>{r(n.execute(s.widgetId,{action:"fire_app_check"}))})})}function j6t(e,t,n,r){const i=n.render(r,{sitekey:t,size:"invisible",callback:()=>{Fs(e).reCAPTCHAState.succeeded=!0},"error-callback":()=>{Fs(e).reCAPTCHAState.succeeded=!1}}),s=Fs(e);s.reCAPTCHAState=Object.assign(Object.assign({},s.reCAPTCHAState),{widgetId:i})}function B6t(e){const t=document.createElement("script");t.src=$6t,t.onload=e,document.head.appendChild(t)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FZ{constructor(t){this._siteKey=t,this._throttleData=null}async getToken(){var t,n,r;z6t(this._throttleData);const i=await F6t(this._app).catch(o=>{throw Fu.create("recaptcha-error")});if(!(!((t=Fs(this._app).reCAPTCHAState)===null||t===void 0)&&t.succeeded))throw Fu.create("recaptcha-error");let s;try{s=await $Z(g6t(this._app,i),this._heartbeatServiceProvider)}catch(o){throw!((n=o.code)===null||n===void 0)&&n.includes("fetch-status-error")?(this._throttleData=U6t(Number((r=o.customData)===null||r===void 0?void 0:r.httpStatus),this._throttleData),Fu.create("throttled",{time:QPe(this._throttleData.allowRequestsAfter-Date.now()),httpStatus:this._throttleData.httpStatus})):o}return this._throttleData=null,s}initialize(t){this._app=t,this._heartbeatServiceProvider=MS(t,"heartbeat"),M6t(t,this._siteKey).catch(()=>{})}isEqual(t){return t instanceof FZ?this._siteKey===t._siteKey:!1}}function U6t(e,t){if(e===404||e===403)return{backoffCount:1,allowRequestsAfter:Date.now()+d6t,httpStatus:e};{const n=t?t.backoffCount:0,r=INt(n,1e3,2);return{backoffCount:n+1,allowRequestsAfter:Date.now()+r,httpStatus:e}}}function z6t(e){if(e&&Date.now()-e.allowRequestsAfter<=0)throw Fu.create("throttled",{time:QPe(e.allowRequestsAfter-Date.now()),httpStatus:e.httpStatus})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V6t(e=jJ(),t){e=ii(e);const n=MS(e,"app-check");if(G4().initialized||T6t(),MZ()&&LZ().then(i=>console.log(`App Check debug token: ${i}. You will need to add it to your app's App Check settings in the Firebase console for it to work.`)),n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(s.isTokenAutoRefreshEnabled===t.isTokenAutoRefreshEnabled&&s.provider.isEqual(t.provider))return i;throw Fu.create("already-initialized",{appName:e.name})}const r=n.initialize({options:t});return H6t(e,t.provider,t.isTokenAutoRefreshEnabled),Fs(e).isTokenAutoRefreshEnabled&&iOe(r,"INTERNAL",()=>{}),r}function H6t(e,t,n){const r=l6t(e,Object.assign({},KPe));r.activated=!0,r.provider=t,r.cachedTokenPromise=x6t(e).then(i=>(i&&Pw(i)&&(r.token=i,oOe(e,{token:i.token})),i)),r.isTokenAutoRefreshEnabled=n===void 0?e.automaticDataCollectionEnabled:n,r.provider.initialize(e)}const q6t="app-check",mpe="app-check-internal";function W6t(){$m(new Oh(q6t,e=>{const t=e.getProvider("app").getImmediate(),n=e.getProvider("heartbeat");return N6t(t,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider(mpe).initialize()})),$m(new Oh(mpe,e=>{const t=e.getProvider("app-check").getImmediate();return D6t(t)},"PUBLIC").setInstantiationMode("EXPLICIT")),zf(P6t,O6t)}W6t();function wD(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var aOe={exports:{}};/*!
    localForage -- Offline Storage, Improved
    Version 1.10.0
    https://localforage.github.io/localForage
    (c) 2013-2017 Mozilla, Apache License 2.0
*/(function(e,t){(function(n){e.exports=n()})(function(){return function n(r,i,s){function o(l,c){if(!i[l]){if(!r[l]){var f=typeof wD=="function"&&wD;if(!c&&f)return f(l,!0);if(a)return a(l,!0);var d=new Error("Cannot find module '"+l+"'");throw d.code="MODULE_NOT_FOUND",d}var h=i[l]={exports:{}};r[l][0].call(h.exports,function(p){var m=r[l][1][p];return o(m||p)},h,h.exports,n,r,i,s)}return i[l].exports}for(var a=typeof wD=="function"&&wD,u=0;u<s.length;u++)o(s[u]);return o}({1:[function(n,r,i){(function(s){var o=s.MutationObserver||s.WebKitMutationObserver,a;if(o){var u=0,l=new o(p),c=s.document.createTextNode("");l.observe(c,{characterData:!0}),a=function(){c.data=u=++u%2}}else if(!s.setImmediate&&typeof s.MessageChannel<"u"){var f=new s.MessageChannel;f.port1.onmessage=p,a=function(){f.port2.postMessage(0)}}else"document"in s&&"onreadystatechange"in s.document.createElement("script")?a=function(){var g=s.document.createElement("script");g.onreadystatechange=function(){p(),g.onreadystatechange=null,g.parentNode.removeChild(g),g=null},s.document.documentElement.appendChild(g)}:a=function(){setTimeout(p,0)};var d,h=[];function p(){d=!0;for(var g,y,v=h.length;v;){for(y=h,h=[],g=-1;++g<v;)y[g]();v=h.length}d=!1}r.exports=m;function m(g){h.push(g)===1&&!d&&a()}}).call(this,typeof to<"u"?to:typeof self<"u"?self:typeof window<"u"?window:{})},{}],2:[function(n,r,i){var s=n(1);function o(){}var a={},u=["REJECTED"],l=["FULFILLED"],c=["PENDING"];r.exports=f;function f(E){if(typeof E!="function")throw new TypeError("resolver must be a function");this.state=c,this.queue=[],this.outcome=void 0,E!==o&&m(this,E)}f.prototype.catch=function(E){return this.then(null,E)},f.prototype.then=function(E,T){if(typeof E!="function"&&this.state===l||typeof T!="function"&&this.state===u)return this;var S=new this.constructor(o);if(this.state!==c){var C=this.state===l?E:T;h(S,C,this.outcome)}else this.queue.push(new d(S,E,T));return S};function d(E,T,S){this.promise=E,typeof T=="function"&&(this.onFulfilled=T,this.callFulfilled=this.otherCallFulfilled),typeof S=="function"&&(this.onRejected=S,this.callRejected=this.otherCallRejected)}d.prototype.callFulfilled=function(E){a.resolve(this.promise,E)},d.prototype.otherCallFulfilled=function(E){h(this.promise,this.onFulfilled,E)},d.prototype.callRejected=function(E){a.reject(this.promise,E)},d.prototype.otherCallRejected=function(E){h(this.promise,this.onRejected,E)};function h(E,T,S){s(function(){var C;try{C=T(S)}catch(A){return a.reject(E,A)}C===E?a.reject(E,new TypeError("Cannot resolve promise with itself")):a.resolve(E,C)})}a.resolve=function(E,T){var S=g(p,T);if(S.status==="error")return a.reject(E,S.value);var C=S.value;if(C)m(E,C);else{E.state=l,E.outcome=T;for(var A=-1,k=E.queue.length;++A<k;)E.queue[A].callFulfilled(T)}return E},a.reject=function(E,T){E.state=u,E.outcome=T;for(var S=-1,C=E.queue.length;++S<C;)E.queue[S].callRejected(T);return E};function p(E){var T=E&&E.then;if(E&&(typeof E=="object"||typeof E=="function")&&typeof T=="function")return function(){T.apply(E,arguments)}}function m(E,T){var S=!1;function C(O){S||(S=!0,a.reject(E,O))}function A(O){S||(S=!0,a.resolve(E,O))}function k(){T(A,C)}var N=g(k);N.status==="error"&&C(N.value)}function g(E,T){var S={};try{S.value=E(T),S.status="success"}catch(C){S.status="error",S.value=C}return S}f.resolve=y;function y(E){return E instanceof this?E:a.resolve(new this(o),E)}f.reject=v;function v(E){var T=new this(o);return a.reject(T,E)}f.all=b;function b(E){var T=this;if(Object.prototype.toString.call(E)!=="[object Array]")return this.reject(new TypeError("must be an array"));var S=E.length,C=!1;if(!S)return this.resolve([]);for(var A=new Array(S),k=0,N=-1,O=new this(o);++N<S;)P(E[N],N);return O;function P($,F){T.resolve($).then(M,function(B){C||(C=!0,a.reject(O,B))});function M(B){A[F]=B,++k===S&&!C&&(C=!0,a.resolve(O,A))}}}f.race=w;function w(E){var T=this;if(Object.prototype.toString.call(E)!=="[object Array]")return this.reject(new TypeError("must be an array"));var S=E.length,C=!1;if(!S)return this.resolve([]);for(var A=-1,k=new this(o);++A<S;)N(E[A]);return k;function N(O){T.resolve(O).then(function(P){C||(C=!0,a.resolve(k,P))},function(P){C||(C=!0,a.reject(k,P))})}}},{1:1}],3:[function(n,r,i){(function(s){typeof s.Promise!="function"&&(s.Promise=n(2))}).call(this,typeof to<"u"?to:typeof self<"u"?self:typeof window<"u"?window:{})},{2:2}],4:[function(n,r,i){var s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Y){return typeof Y}:function(Y){return Y&&typeof Symbol=="function"&&Y.constructor===Symbol&&Y!==Symbol.prototype?"symbol":typeof Y};function o(Y,se){if(!(Y instanceof se))throw new TypeError("Cannot call a class as a function")}function a(){try{if(typeof indexedDB<"u")return indexedDB;if(typeof webkitIndexedDB<"u")return webkitIndexedDB;if(typeof mozIndexedDB<"u")return mozIndexedDB;if(typeof OIndexedDB<"u")return OIndexedDB;if(typeof msIndexedDB<"u")return msIndexedDB}catch{return}}var u=a();function l(){try{if(!u||!u.open)return!1;var Y=typeof openDatabase<"u"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),se=typeof fetch=="function"&&fetch.toString().indexOf("[native code")!==-1;return(!Y||se)&&typeof indexedDB<"u"&&typeof IDBKeyRange<"u"}catch{return!1}}function c(Y,se){Y=Y||[],se=se||{};try{return new Blob(Y,se)}catch(le){if(le.name!=="TypeError")throw le;for(var Z=typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder,fe=new Z,ye=0;ye<Y.length;ye+=1)fe.append(Y[ye]);return fe.getBlob(se.type)}}typeof Promise>"u"&&n(3);var f=Promise;function d(Y,se){se&&Y.then(function(Z){se(null,Z)},function(Z){se(Z)})}function h(Y,se,Z){typeof se=="function"&&Y.then(se),typeof Z=="function"&&Y.catch(Z)}function p(Y){return typeof Y!="string"&&(console.warn(Y+" used as a key, but it is not a string."),Y=String(Y)),Y}function m(){if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}var g="local-forage-detect-blob-support",y=void 0,v={},b=Object.prototype.toString,w="readonly",E="readwrite";function T(Y){for(var se=Y.length,Z=new ArrayBuffer(se),fe=new Uint8Array(Z),ye=0;ye<se;ye++)fe[ye]=Y.charCodeAt(ye);return Z}function S(Y){return new f(function(se){var Z=Y.transaction(g,E),fe=c([""]);Z.objectStore(g).put(fe,"key"),Z.onabort=function(ye){ye.preventDefault(),ye.stopPropagation(),se(!1)},Z.oncomplete=function(){var ye=navigator.userAgent.match(/Chrome\/(\d+)/),le=navigator.userAgent.match(/Edge\//);se(le||!ye||parseInt(ye[1],10)>=43)}}).catch(function(){return!1})}function C(Y){return typeof y=="boolean"?f.resolve(y):S(Y).then(function(se){return y=se,y})}function A(Y){var se=v[Y.name],Z={};Z.promise=new f(function(fe,ye){Z.resolve=fe,Z.reject=ye}),se.deferredOperations.push(Z),se.dbReady?se.dbReady=se.dbReady.then(function(){return Z.promise}):se.dbReady=Z.promise}function k(Y){var se=v[Y.name],Z=se.deferredOperations.pop();if(Z)return Z.resolve(),Z.promise}function N(Y,se){var Z=v[Y.name],fe=Z.deferredOperations.pop();if(fe)return fe.reject(se),fe.promise}function O(Y,se){return new f(function(Z,fe){if(v[Y.name]=v[Y.name]||W(),Y.db)if(se)A(Y),Y.db.close();else return Z(Y.db);var ye=[Y.name];se&&ye.push(Y.version);var le=u.open.apply(u,ye);se&&(le.onupgradeneeded=function(Oe){var Ve=le.result;try{Ve.createObjectStore(Y.storeName),Oe.oldVersion<=1&&Ve.createObjectStore(g)}catch(qe){if(qe.name==="ConstraintError")console.warn('The database "'+Y.name+'" has been upgraded from version '+Oe.oldVersion+" to version "+Oe.newVersion+', but the storage "'+Y.storeName+'" already exists.');else throw qe}}),le.onerror=function(Oe){Oe.preventDefault(),fe(le.error)},le.onsuccess=function(){var Oe=le.result;Oe.onversionchange=function(Ve){Ve.target.close()},Z(Oe),k(Y)}})}function P(Y){return O(Y,!1)}function $(Y){return O(Y,!0)}function F(Y,se){if(!Y.db)return!0;var Z=!Y.db.objectStoreNames.contains(Y.storeName),fe=Y.version<Y.db.version,ye=Y.version>Y.db.version;if(fe&&(Y.version!==se&&console.warn('The database "'+Y.name+`" can't be downgraded from version `+Y.db.version+" to version "+Y.version+"."),Y.version=Y.db.version),ye||Z){if(Z){var le=Y.db.version+1;le>Y.version&&(Y.version=le)}return!0}return!1}function M(Y){return new f(function(se,Z){var fe=new FileReader;fe.onerror=Z,fe.onloadend=function(ye){var le=btoa(ye.target.result||"");se({__local_forage_encoded_blob:!0,data:le,type:Y.type})},fe.readAsBinaryString(Y)})}function B(Y){var se=T(atob(Y.data));return c([se],{type:Y.type})}function U(Y){return Y&&Y.__local_forage_encoded_blob}function H(Y){var se=this,Z=se._initReady().then(function(){var fe=v[se._dbInfo.name];if(fe&&fe.dbReady)return fe.dbReady});return h(Z,Y,Y),Z}function D(Y){A(Y);for(var se=v[Y.name],Z=se.forages,fe=0;fe<Z.length;fe++){var ye=Z[fe];ye._dbInfo.db&&(ye._dbInfo.db.close(),ye._dbInfo.db=null)}return Y.db=null,P(Y).then(function(le){return Y.db=le,F(Y)?$(Y):le}).then(function(le){Y.db=se.db=le;for(var Oe=0;Oe<Z.length;Oe++)Z[Oe]._dbInfo.db=le}).catch(function(le){throw N(Y,le),le})}function z(Y,se,Z,fe){fe===void 0&&(fe=1);try{var ye=Y.db.transaction(Y.storeName,se);Z(null,ye)}catch(le){if(fe>0&&(!Y.db||le.name==="InvalidStateError"||le.name==="NotFoundError"))return f.resolve().then(function(){if(!Y.db||le.name==="NotFoundError"&&!Y.db.objectStoreNames.contains(Y.storeName)&&Y.version<=Y.db.version)return Y.db&&(Y.version=Y.db.version+1),$(Y)}).then(function(){return D(Y).then(function(){z(Y,se,Z,fe-1)})}).catch(Z);Z(le)}}function W(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function j(Y){var se=this,Z={db:null};if(Y)for(var fe in Y)Z[fe]=Y[fe];var ye=v[Z.name];ye||(ye=W(),v[Z.name]=ye),ye.forages.push(se),se._initReady||(se._initReady=se.ready,se.ready=H);var le=[];function Oe(){return f.resolve()}for(var Ve=0;Ve<ye.forages.length;Ve++){var qe=ye.forages[Ve];qe!==se&&le.push(qe._initReady().catch(Oe))}var Ge=ye.forages.slice(0);return f.all(le).then(function(){return Z.db=ye.db,P(Z)}).then(function(st){return Z.db=st,F(Z,se._defaultConfig.version)?$(Z):st}).then(function(st){Z.db=ye.db=st,se._dbInfo=Z;for(var Et=0;Et<Ge.length;Et++){var mn=Ge[Et];mn!==se&&(mn._dbInfo.db=Z.db,mn._dbInfo.version=Z.version)}})}function q(Y,se){var Z=this;Y=p(Y);var fe=new f(function(ye,le){Z.ready().then(function(){z(Z._dbInfo,w,function(Oe,Ve){if(Oe)return le(Oe);try{var qe=Ve.objectStore(Z._dbInfo.storeName),Ge=qe.get(Y);Ge.onsuccess=function(){var st=Ge.result;st===void 0&&(st=null),U(st)&&(st=B(st)),ye(st)},Ge.onerror=function(){le(Ge.error)}}catch(st){le(st)}})}).catch(le)});return d(fe,se),fe}function G(Y,se){var Z=this,fe=new f(function(ye,le){Z.ready().then(function(){z(Z._dbInfo,w,function(Oe,Ve){if(Oe)return le(Oe);try{var qe=Ve.objectStore(Z._dbInfo.storeName),Ge=qe.openCursor(),st=1;Ge.onsuccess=function(){var Et=Ge.result;if(Et){var mn=Et.value;U(mn)&&(mn=B(mn));var Dt=Y(mn,Et.key,st++);Dt!==void 0?ye(Dt):Et.continue()}else ye()},Ge.onerror=function(){le(Ge.error)}}catch(Et){le(Et)}})}).catch(le)});return d(fe,se),fe}function ne(Y,se,Z){var fe=this;Y=p(Y);var ye=new f(function(le,Oe){var Ve;fe.ready().then(function(){return Ve=fe._dbInfo,b.call(se)==="[object Blob]"?C(Ve.db).then(function(qe){return qe?se:M(se)}):se}).then(function(qe){z(fe._dbInfo,E,function(Ge,st){if(Ge)return Oe(Ge);try{var Et=st.objectStore(fe._dbInfo.storeName);qe===null&&(qe=void 0);var mn=Et.put(qe,Y);st.oncomplete=function(){qe===void 0&&(qe=null),le(qe)},st.onabort=st.onerror=function(){var Dt=mn.error?mn.error:mn.transaction.error;Oe(Dt)}}catch(Dt){Oe(Dt)}})}).catch(Oe)});return d(ye,Z),ye}function ce(Y,se){var Z=this;Y=p(Y);var fe=new f(function(ye,le){Z.ready().then(function(){z(Z._dbInfo,E,function(Oe,Ve){if(Oe)return le(Oe);try{var qe=Ve.objectStore(Z._dbInfo.storeName),Ge=qe.delete(Y);Ve.oncomplete=function(){ye()},Ve.onerror=function(){le(Ge.error)},Ve.onabort=function(){var st=Ge.error?Ge.error:Ge.transaction.error;le(st)}}catch(st){le(st)}})}).catch(le)});return d(fe,se),fe}function de(Y){var se=this,Z=new f(function(fe,ye){se.ready().then(function(){z(se._dbInfo,E,function(le,Oe){if(le)return ye(le);try{var Ve=Oe.objectStore(se._dbInfo.storeName),qe=Ve.clear();Oe.oncomplete=function(){fe()},Oe.onabort=Oe.onerror=function(){var Ge=qe.error?qe.error:qe.transaction.error;ye(Ge)}}catch(Ge){ye(Ge)}})}).catch(ye)});return d(Z,Y),Z}function he(Y){var se=this,Z=new f(function(fe,ye){se.ready().then(function(){z(se._dbInfo,w,function(le,Oe){if(le)return ye(le);try{var Ve=Oe.objectStore(se._dbInfo.storeName),qe=Ve.count();qe.onsuccess=function(){fe(qe.result)},qe.onerror=function(){ye(qe.error)}}catch(Ge){ye(Ge)}})}).catch(ye)});return d(Z,Y),Z}function ve(Y,se){var Z=this,fe=new f(function(ye,le){if(Y<0){ye(null);return}Z.ready().then(function(){z(Z._dbInfo,w,function(Oe,Ve){if(Oe)return le(Oe);try{var qe=Ve.objectStore(Z._dbInfo.storeName),Ge=!1,st=qe.openKeyCursor();st.onsuccess=function(){var Et=st.result;if(!Et){ye(null);return}Y===0||Ge?ye(Et.key):(Ge=!0,Et.advance(Y))},st.onerror=function(){le(st.error)}}catch(Et){le(Et)}})}).catch(le)});return d(fe,se),fe}function Ie(Y){var se=this,Z=new f(function(fe,ye){se.ready().then(function(){z(se._dbInfo,w,function(le,Oe){if(le)return ye(le);try{var Ve=Oe.objectStore(se._dbInfo.storeName),qe=Ve.openKeyCursor(),Ge=[];qe.onsuccess=function(){var st=qe.result;if(!st){fe(Ge);return}Ge.push(st.key),st.continue()},qe.onerror=function(){ye(qe.error)}}catch(st){ye(st)}})}).catch(ye)});return d(Z,Y),Z}function be(Y,se){se=m.apply(this,arguments);var Z=this.config();Y=typeof Y!="function"&&Y||{},Y.name||(Y.name=Y.name||Z.name,Y.storeName=Y.storeName||Z.storeName);var fe=this,ye;if(!Y.name)ye=f.reject("Invalid arguments");else{var le=Y.name===Z.name&&fe._dbInfo.db,Oe=le?f.resolve(fe._dbInfo.db):P(Y).then(function(Ve){var qe=v[Y.name],Ge=qe.forages;qe.db=Ve;for(var st=0;st<Ge.length;st++)Ge[st]._dbInfo.db=Ve;return Ve});Y.storeName?ye=Oe.then(function(Ve){if(Ve.objectStoreNames.contains(Y.storeName)){var qe=Ve.version+1;A(Y);var Ge=v[Y.name],st=Ge.forages;Ve.close();for(var Et=0;Et<st.length;Et++){var mn=st[Et];mn._dbInfo.db=null,mn._dbInfo.version=qe}var Dt=new f(function(Bn,kr){var Rr=u.open(Y.name,qe);Rr.onerror=function(Ho){var wd=Rr.result;wd.close(),kr(Ho)},Rr.onupgradeneeded=function(){var Ho=Rr.result;Ho.deleteObjectStore(Y.storeName)},Rr.onsuccess=function(){var Ho=Rr.result;Ho.close(),Bn(Ho)}});return Dt.then(function(Bn){Ge.db=Bn;for(var kr=0;kr<st.length;kr++){var Rr=st[kr];Rr._dbInfo.db=Bn,k(Rr._dbInfo)}}).catch(function(Bn){throw(N(Y,Bn)||f.resolve()).catch(function(){}),Bn})}}):ye=Oe.then(function(Ve){A(Y);var qe=v[Y.name],Ge=qe.forages;Ve.close();for(var st=0;st<Ge.length;st++){var Et=Ge[st];Et._dbInfo.db=null}var mn=new f(function(Dt,Bn){var kr=u.deleteDatabase(Y.name);kr.onerror=function(){var Rr=kr.result;Rr&&Rr.close(),Bn(kr.error)},kr.onblocked=function(){console.warn('dropInstance blocked for database "'+Y.name+'" until all open connections are closed')},kr.onsuccess=function(){var Rr=kr.result;Rr&&Rr.close(),Dt(Rr)}});return mn.then(function(Dt){qe.db=Dt;for(var Bn=0;Bn<Ge.length;Bn++){var kr=Ge[Bn];k(kr._dbInfo)}}).catch(function(Dt){throw(N(Y,Dt)||f.resolve()).catch(function(){}),Dt})})}return d(ye,se),ye}var Ke={_driver:"asyncStorage",_initStorage:j,_support:l(),iterate:G,getItem:q,setItem:ne,removeItem:ce,clear:de,length:he,key:ve,keys:Ie,dropInstance:be};function Ue(){return typeof openDatabase=="function"}var yt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",it="~~local_forage_type~",_e=/^~~local_forage_type~([^~]+)~/,ke="__lfsc__:",ze=ke.length,ct="arbf",Ot="blob",We="si08",ge="ui08",ht="uic8",vt="si16",me="si32",Ae="ur16",He="ui32",ut="fl32",_t="fl64",Ln=ze+ct.length,Cr=Object.prototype.toString;function Fn(Y){var se=Y.length*.75,Z=Y.length,fe,ye=0,le,Oe,Ve,qe;Y[Y.length-1]==="="&&(se--,Y[Y.length-2]==="="&&se--);var Ge=new ArrayBuffer(se),st=new Uint8Array(Ge);for(fe=0;fe<Z;fe+=4)le=yt.indexOf(Y[fe]),Oe=yt.indexOf(Y[fe+1]),Ve=yt.indexOf(Y[fe+2]),qe=yt.indexOf(Y[fe+3]),st[ye++]=le<<2|Oe>>4,st[ye++]=(Oe&15)<<4|Ve>>2,st[ye++]=(Ve&3)<<6|qe&63;return Ge}function cr(Y){var se=new Uint8Array(Y),Z="",fe;for(fe=0;fe<se.length;fe+=3)Z+=yt[se[fe]>>2],Z+=yt[(se[fe]&3)<<4|se[fe+1]>>4],Z+=yt[(se[fe+1]&15)<<2|se[fe+2]>>6],Z+=yt[se[fe+2]&63];return se.length%3===2?Z=Z.substring(0,Z.length-1)+"=":se.length%3===1&&(Z=Z.substring(0,Z.length-2)+"=="),Z}function gn(Y,se){var Z="";if(Y&&(Z=Cr.call(Y)),Y&&(Z==="[object ArrayBuffer]"||Y.buffer&&Cr.call(Y.buffer)==="[object ArrayBuffer]")){var fe,ye=ke;Y instanceof ArrayBuffer?(fe=Y,ye+=ct):(fe=Y.buffer,Z==="[object Int8Array]"?ye+=We:Z==="[object Uint8Array]"?ye+=ge:Z==="[object Uint8ClampedArray]"?ye+=ht:Z==="[object Int16Array]"?ye+=vt:Z==="[object Uint16Array]"?ye+=Ae:Z==="[object Int32Array]"?ye+=me:Z==="[object Uint32Array]"?ye+=He:Z==="[object Float32Array]"?ye+=ut:Z==="[object Float64Array]"?ye+=_t:se(new Error("Failed to get type for BinaryArray"))),se(ye+cr(fe))}else if(Z==="[object Blob]"){var le=new FileReader;le.onload=function(){var Oe=it+Y.type+"~"+cr(this.result);se(ke+Ot+Oe)},le.readAsArrayBuffer(Y)}else try{se(JSON.stringify(Y))}catch(Oe){console.error("Couldn't convert value into a JSON string: ",Y),se(null,Oe)}}function An(Y){if(Y.substring(0,ze)!==ke)return JSON.parse(Y);var se=Y.substring(Ln),Z=Y.substring(ze,Ln),fe;if(Z===Ot&&_e.test(se)){var ye=se.match(_e);fe=ye[1],se=se.substring(ye[0].length)}var le=Fn(se);switch(Z){case ct:return le;case Ot:return c([le],{type:fe});case We:return new Int8Array(le);case ge:return new Uint8Array(le);case ht:return new Uint8ClampedArray(le);case vt:return new Int16Array(le);case Ae:return new Uint16Array(le);case me:return new Int32Array(le);case He:return new Uint32Array(le);case ut:return new Float32Array(le);case _t:return new Float64Array(le);default:throw new Error("Unkown type: "+Z)}}var nr={serialize:gn,deserialize:An,stringToBuffer:Fn,bufferToString:cr};function rr(Y,se,Z,fe){Y.executeSql("CREATE TABLE IF NOT EXISTS "+se.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],Z,fe)}function zo(Y){var se=this,Z={db:null};if(Y)for(var fe in Y)Z[fe]=typeof Y[fe]!="string"?Y[fe].toString():Y[fe];var ye=new f(function(le,Oe){try{Z.db=openDatabase(Z.name,String(Z.version),Z.description,Z.size)}catch(Ve){return Oe(Ve)}Z.db.transaction(function(Ve){rr(Ve,Z,function(){se._dbInfo=Z,le()},function(qe,Ge){Oe(Ge)})},Oe)});return Z.serializer=nr,ye}function $i(Y,se,Z,fe,ye,le){Y.executeSql(Z,fe,ye,function(Oe,Ve){Ve.code===Ve.SYNTAX_ERR?Oe.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[se.storeName],function(qe,Ge){Ge.rows.length?le(qe,Ve):rr(qe,se,function(){qe.executeSql(Z,fe,ye,le)},le)},le):le(Oe,Ve)},le)}function In(Y,se){var Z=this;Y=p(Y);var fe=new f(function(ye,le){Z.ready().then(function(){var Oe=Z._dbInfo;Oe.db.transaction(function(Ve){$i(Ve,Oe,"SELECT * FROM "+Oe.storeName+" WHERE key = ? LIMIT 1",[Y],function(qe,Ge){var st=Ge.rows.length?Ge.rows.item(0).value:null;st&&(st=Oe.serializer.deserialize(st)),ye(st)},function(qe,Ge){le(Ge)})})}).catch(le)});return d(fe,se),fe}function Mi(Y,se){var Z=this,fe=new f(function(ye,le){Z.ready().then(function(){var Oe=Z._dbInfo;Oe.db.transaction(function(Ve){$i(Ve,Oe,"SELECT * FROM "+Oe.storeName,[],function(qe,Ge){for(var st=Ge.rows,Et=st.length,mn=0;mn<Et;mn++){var Dt=st.item(mn),Bn=Dt.value;if(Bn&&(Bn=Oe.serializer.deserialize(Bn)),Bn=Y(Bn,Dt.key,mn+1),Bn!==void 0){ye(Bn);return}}ye()},function(qe,Ge){le(Ge)})})}).catch(le)});return d(fe,se),fe}function Ar(Y,se,Z,fe){var ye=this;Y=p(Y);var le=new f(function(Oe,Ve){ye.ready().then(function(){se===void 0&&(se=null);var qe=se,Ge=ye._dbInfo;Ge.serializer.serialize(se,function(st,Et){Et?Ve(Et):Ge.db.transaction(function(mn){$i(mn,Ge,"INSERT OR REPLACE INTO "+Ge.storeName+" (key, value) VALUES (?, ?)",[Y,st],function(){Oe(qe)},function(Dt,Bn){Ve(Bn)})},function(mn){if(mn.code===mn.QUOTA_ERR){if(fe>0){Oe(Ar.apply(ye,[Y,qe,Z,fe-1]));return}Ve(mn)}})})}).catch(Ve)});return d(le,Z),le}function gs(Y,se,Z){return Ar.apply(this,[Y,se,Z,1])}function hp(Y,se){var Z=this;Y=p(Y);var fe=new f(function(ye,le){Z.ready().then(function(){var Oe=Z._dbInfo;Oe.db.transaction(function(Ve){$i(Ve,Oe,"DELETE FROM "+Oe.storeName+" WHERE key = ?",[Y],function(){ye()},function(qe,Ge){le(Ge)})})}).catch(le)});return d(fe,se),fe}function cl(Y){var se=this,Z=new f(function(fe,ye){se.ready().then(function(){var le=se._dbInfo;le.db.transaction(function(Oe){$i(Oe,le,"DELETE FROM "+le.storeName,[],function(){fe()},function(Ve,qe){ye(qe)})})}).catch(ye)});return d(Z,Y),Z}function bd(Y){var se=this,Z=new f(function(fe,ye){se.ready().then(function(){var le=se._dbInfo;le.db.transaction(function(Oe){$i(Oe,le,"SELECT COUNT(key) as c FROM "+le.storeName,[],function(Ve,qe){var Ge=qe.rows.item(0).c;fe(Ge)},function(Ve,qe){ye(qe)})})}).catch(ye)});return d(Z,Y),Z}function xr(Y,se){var Z=this,fe=new f(function(ye,le){Z.ready().then(function(){var Oe=Z._dbInfo;Oe.db.transaction(function(Ve){$i(Ve,Oe,"SELECT key FROM "+Oe.storeName+" WHERE id = ? LIMIT 1",[Y+1],function(qe,Ge){var st=Ge.rows.length?Ge.rows.item(0).key:null;ye(st)},function(qe,Ge){le(Ge)})})}).catch(le)});return d(fe,se),fe}function Ii(Y){var se=this,Z=new f(function(fe,ye){se.ready().then(function(){var le=se._dbInfo;le.db.transaction(function(Oe){$i(Oe,le,"SELECT key FROM "+le.storeName,[],function(Ve,qe){for(var Ge=[],st=0;st<qe.rows.length;st++)Ge.push(qe.rows.item(st).key);fe(Ge)},function(Ve,qe){ye(qe)})})}).catch(ye)});return d(Z,Y),Z}function Qr(Y){return new f(function(se,Z){Y.transaction(function(fe){fe.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(ye,le){for(var Oe=[],Ve=0;Ve<le.rows.length;Ve++)Oe.push(le.rows.item(Ve).name);se({db:Y,storeNames:Oe})},function(ye,le){Z(le)})},function(fe){Z(fe)})})}function cu(Y,se){se=m.apply(this,arguments);var Z=this.config();Y=typeof Y!="function"&&Y||{},Y.name||(Y.name=Y.name||Z.name,Y.storeName=Y.storeName||Z.storeName);var fe=this,ye;return Y.name?ye=new f(function(le){var Oe;Y.name===Z.name?Oe=fe._dbInfo.db:Oe=openDatabase(Y.name,"","",0),Y.storeName?le({db:Oe,storeNames:[Y.storeName]}):le(Qr(Oe))}).then(function(le){return new f(function(Oe,Ve){le.db.transaction(function(qe){function Ge(Dt){return new f(function(Bn,kr){qe.executeSql("DROP TABLE IF EXISTS "+Dt,[],function(){Bn()},function(Rr,Ho){kr(Ho)})})}for(var st=[],Et=0,mn=le.storeNames.length;Et<mn;Et++)st.push(Ge(le.storeNames[Et]));f.all(st).then(function(){Oe()}).catch(function(Dt){Ve(Dt)})},function(qe){Ve(qe)})})}):ye=f.reject("Invalid arguments"),d(ye,se),ye}var Ia={_driver:"webSQLStorage",_initStorage:zo,_support:Ue(),iterate:Mi,getItem:In,setItem:gs,removeItem:hp,clear:cl,length:bd,key:xr,keys:Ii,dropInstance:cu};function ka(){try{return typeof localStorage<"u"&&"setItem"in localStorage&&!!localStorage.setItem}catch{return!1}}function oe(Y,se){var Z=Y.name+"/";return Y.storeName!==se.storeName&&(Z+=Y.storeName+"/"),Z}function ee(){var Y="_localforage_support_test";try{return localStorage.setItem(Y,!0),localStorage.removeItem(Y),!1}catch{return!0}}function ae(){return!ee()||localStorage.length>0}function Ce(Y){var se=this,Z={};if(Y)for(var fe in Y)Z[fe]=Y[fe];return Z.keyPrefix=oe(Y,se._defaultConfig),ae()?(se._dbInfo=Z,Z.serializer=nr,f.resolve()):f.reject()}function Se(Y){var se=this,Z=se.ready().then(function(){for(var fe=se._dbInfo.keyPrefix,ye=localStorage.length-1;ye>=0;ye--){var le=localStorage.key(ye);le.indexOf(fe)===0&&localStorage.removeItem(le)}});return d(Z,Y),Z}function ot(Y,se){var Z=this;Y=p(Y);var fe=Z.ready().then(function(){var ye=Z._dbInfo,le=localStorage.getItem(ye.keyPrefix+Y);return le&&(le=ye.serializer.deserialize(le)),le});return d(fe,se),fe}function St(Y,se){var Z=this,fe=Z.ready().then(function(){for(var ye=Z._dbInfo,le=ye.keyPrefix,Oe=le.length,Ve=localStorage.length,qe=1,Ge=0;Ge<Ve;Ge++){var st=localStorage.key(Ge);if(st.indexOf(le)===0){var Et=localStorage.getItem(st);if(Et&&(Et=ye.serializer.deserialize(Et)),Et=Y(Et,st.substring(Oe),qe++),Et!==void 0)return Et}}});return d(fe,se),fe}function Ht(Y,se){var Z=this,fe=Z.ready().then(function(){var ye=Z._dbInfo,le;try{le=localStorage.key(Y)}catch{le=null}return le&&(le=le.substring(ye.keyPrefix.length)),le});return d(fe,se),fe}function On(Y){var se=this,Z=se.ready().then(function(){for(var fe=se._dbInfo,ye=localStorage.length,le=[],Oe=0;Oe<ye;Oe++){var Ve=localStorage.key(Oe);Ve.indexOf(fe.keyPrefix)===0&&le.push(Ve.substring(fe.keyPrefix.length))}return le});return d(Z,Y),Z}function jn(Y){var se=this,Z=se.keys().then(function(fe){return fe.length});return d(Z,Y),Z}function pn(Y,se){var Z=this;Y=p(Y);var fe=Z.ready().then(function(){var ye=Z._dbInfo;localStorage.removeItem(ye.keyPrefix+Y)});return d(fe,se),fe}function ir(Y,se,Z){var fe=this;Y=p(Y);var ye=fe.ready().then(function(){se===void 0&&(se=null);var le=se;return new f(function(Oe,Ve){var qe=fe._dbInfo;qe.serializer.serialize(se,function(Ge,st){if(st)Ve(st);else try{localStorage.setItem(qe.keyPrefix+Y,Ge),Oe(le)}catch(Et){(Et.name==="QuotaExceededError"||Et.name==="NS_ERROR_DOM_QUOTA_REACHED")&&Ve(Et),Ve(Et)}})})});return d(ye,Z),ye}function Ir(Y,se){if(se=m.apply(this,arguments),Y=typeof Y!="function"&&Y||{},!Y.name){var Z=this.config();Y.name=Y.name||Z.name,Y.storeName=Y.storeName||Z.storeName}var fe=this,ye;return Y.name?ye=new f(function(le){Y.storeName?le(oe(Y,fe._defaultConfig)):le(Y.name+"/")}).then(function(le){for(var Oe=localStorage.length-1;Oe>=0;Oe--){var Ve=localStorage.key(Oe);Ve.indexOf(le)===0&&localStorage.removeItem(Ve)}}):ye=f.reject("Invalid arguments"),d(ye,se),ye}var Vt={_driver:"localStorageWrapper",_initStorage:Ce,_support:ka(),iterate:St,getItem:ot,setItem:ir,removeItem:pn,clear:Se,length:jn,key:Ht,keys:On,dropInstance:Ir},sr=function(se,Z){return se===Z||typeof se=="number"&&typeof Z=="number"&&isNaN(se)&&isNaN(Z)},Hr=function(se,Z){for(var fe=se.length,ye=0;ye<fe;){if(sr(se[ye],Z))return!0;ye++}return!1},Jn=Array.isArray||function(Y){return Object.prototype.toString.call(Y)==="[object Array]"},ki={},Hs={},Jr={INDEXEDDB:Ke,WEBSQL:Ia,LOCALSTORAGE:Vt},mo=[Jr.INDEXEDDB._driver,Jr.WEBSQL._driver,Jr.LOCALSTORAGE._driver],Li=["dropInstance"],Fi=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(Li),Vo={description:"",driver:mo.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function Ra(Y,se){Y[se]=function(){var Z=arguments;return Y.ready().then(function(){return Y[se].apply(Y,Z)})}}function qs(){for(var Y=1;Y<arguments.length;Y++){var se=arguments[Y];if(se)for(var Z in se)se.hasOwnProperty(Z)&&(Jn(se[Z])?arguments[0][Z]=se[Z].slice():arguments[0][Z]=se[Z])}return arguments[0]}var tc=function(){function Y(se){o(this,Y);for(var Z in Jr)if(Jr.hasOwnProperty(Z)){var fe=Jr[Z],ye=fe._driver;this[Z]=ye,ki[ye]||this.defineDriver(fe)}this._defaultConfig=qs({},Vo),this._config=qs({},this._defaultConfig,se),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return Y.prototype.config=function(Z){if((typeof Z>"u"?"undefined":s(Z))==="object"){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var fe in Z){if(fe==="storeName"&&(Z[fe]=Z[fe].replace(/\W/g,"_")),fe==="version"&&typeof Z[fe]!="number")return new Error("Database version must be a number.");this._config[fe]=Z[fe]}return"driver"in Z&&Z.driver?this.setDriver(this._config.driver):!0}else return typeof Z=="string"?this._config[Z]:this._config},Y.prototype.defineDriver=function(Z,fe,ye){var le=new f(function(Oe,Ve){try{var qe=Z._driver,Ge=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!Z._driver){Ve(Ge);return}for(var st=Fi.concat("_initStorage"),Et=0,mn=st.length;Et<mn;Et++){var Dt=st[Et],Bn=!Hr(Li,Dt);if((Bn||Z[Dt])&&typeof Z[Dt]!="function"){Ve(Ge);return}}var kr=function(){for(var wd=function(nc){return function(){var fu=new Error("Method "+nc+" is not implemented by the current driver"),mp=f.reject(fu);return d(mp,arguments[arguments.length-1]),mp}},pp=0,lT=Li.length;pp<lT;pp++){var sv=Li[pp];Z[sv]||(Z[sv]=wd(sv))}};kr();var Rr=function(wd){ki[qe]&&console.info("Redefining LocalForage driver: "+qe),ki[qe]=Z,Hs[qe]=wd,Oe()};"_support"in Z?Z._support&&typeof Z._support=="function"?Z._support().then(Rr,Ve):Rr(!!Z._support):Rr(!0)}catch(Ho){Ve(Ho)}});return h(le,fe,ye),le},Y.prototype.driver=function(){return this._driver||null},Y.prototype.getDriver=function(Z,fe,ye){var le=ki[Z]?f.resolve(ki[Z]):f.reject(new Error("Driver not found."));return h(le,fe,ye),le},Y.prototype.getSerializer=function(Z){var fe=f.resolve(nr);return h(fe,Z),fe},Y.prototype.ready=function(Z){var fe=this,ye=fe._driverSet.then(function(){return fe._ready===null&&(fe._ready=fe._initDriver()),fe._ready});return h(ye,Z,Z),ye},Y.prototype.setDriver=function(Z,fe,ye){var le=this;Jn(Z)||(Z=[Z]);var Oe=this._getSupportedDrivers(Z);function Ve(){le._config.driver=le.driver()}function qe(Et){return le._extend(Et),Ve(),le._ready=le._initStorage(le._config),le._ready}function Ge(Et){return function(){var mn=0;function Dt(){for(;mn<Et.length;){var Bn=Et[mn];return mn++,le._dbInfo=null,le._ready=null,le.getDriver(Bn).then(qe).catch(Dt)}Ve();var kr=new Error("No available storage method found.");return le._driverSet=f.reject(kr),le._driverSet}return Dt()}}var st=this._driverSet!==null?this._driverSet.catch(function(){return f.resolve()}):f.resolve();return this._driverSet=st.then(function(){var Et=Oe[0];return le._dbInfo=null,le._ready=null,le.getDriver(Et).then(function(mn){le._driver=mn._driver,Ve(),le._wrapLibraryMethodsWithReady(),le._initDriver=Ge(Oe)})}).catch(function(){Ve();var Et=new Error("No available storage method found.");return le._driverSet=f.reject(Et),le._driverSet}),h(this._driverSet,fe,ye),this._driverSet},Y.prototype.supports=function(Z){return!!Hs[Z]},Y.prototype._extend=function(Z){qs(this,Z)},Y.prototype._getSupportedDrivers=function(Z){for(var fe=[],ye=0,le=Z.length;ye<le;ye++){var Oe=Z[ye];this.supports(Oe)&&fe.push(Oe)}return fe},Y.prototype._wrapLibraryMethodsWithReady=function(){for(var Z=0,fe=Fi.length;Z<fe;Z++)Ra(this,Fi[Z])},Y.prototype.createInstance=function(Z){return new Y(Z)},Y}(),_d=new tc;r.exports=_d},{3:3}]},{},[4])(4)})})(aOe);var G6t=aOe.exports;const fw=Kl(G6t);var _o=[];for(var H9=0;H9<256;++H9)_o.push((H9+256).toString(16).slice(1));function Y6t(e,t=0){return(_o[e[t+0]]+_o[e[t+1]]+_o[e[t+2]]+_o[e[t+3]]+"-"+_o[e[t+4]]+_o[e[t+5]]+"-"+_o[e[t+6]]+_o[e[t+7]]+"-"+_o[e[t+8]]+_o[e[t+9]]+"-"+_o[e[t+10]]+_o[e[t+11]]+_o[e[t+12]]+_o[e[t+13]]+_o[e[t+14]]+_o[e[t+15]]).toLowerCase()}var ED,K6t=new Uint8Array(16);function X6t(){if(!ED&&(ED=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!ED))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return ED(K6t)}var Q6t=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);const gpe={randomUUID:Q6t};function iM(e,t,n){if(gpe.randomUUID&&!t&&!e)return gpe.randomUUID();e=e||{};var r=e.random||(e.rng||X6t)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,Y6t(r)}class uOe{constructor(t){hu(this,"engine");hu(this,"connected",!1);hu(this,"currentParticipantId",null);this.engine=t}isConnected(){return this.connected}getEngine(){return this.engine}}async function sM(e){const t=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",t);return Array.from(new Uint8Array(n)).map(s=>s.toString(16).padStart(2,"0")).join("")}function WT(e){return e.participantId!==void 0}class vc extends uOe{constructor(){super("firebase");hu(this,"RECAPTCHAV3TOKEN","6LfADT8qAAAAAAi4qNf-NQaCV0RXzIqKvBrxNjx2");hu(this,"firestore");hu(this,"collectionPrefix","prod-");hu(this,"studyCollection");hu(this,"storage");hu(this,"studyId","");hu(this,"localForage",fw.createInstance({name:"currentParticipantId"}));hu(this,"participantData",null);const n=WQ.parse(`
{
  apiKey: "AIzaSyBR5snEuMQodNBn3tFkZ9VZtVha81rSiUs",
  authDomain: "mock-mqp.firebaseapp.com",
  projectId: "mock-mqp",
  storageBucket: "mock-mqp.appspot.com",
  messagingSenderId: "810459265279",
  appId: "1:810459265279:web:1f321cea4ef5376865f4ca",
  measurementId: "G-EFGFSXZL35"
}
`),r=CNe(n);this.firestore=VLt(r,{}),this.storage=J3t();try{V6t(r,{provider:new FZ(this.RECAPTCHAV3TOKEN),isTokenAutoRefreshEnabled:!1})}catch{console.warn("Failed to initialize Firebase App Check")}}async connect(){try{await HLt(this.firestore),this.connected=!0}catch{console.warn("Failed to connect to Firebase")}}async initializeStudyDb(n,r){try{const i=Q$();if(!i.currentUser&&(await yPt(i),!i.currentUser))throw new Error("Login failed with firebase");const s=await this.getCurrentConfigHash(),o=await sM(JSON.stringify(r));if(this.studyCollection=rf(this.firestore,`${this.collectionPrefix}${n}`),this.studyId=n,await this._pushToFirebaseStorage(`configs/${o}`,"config",r),s&&s!==o){try{await this._deleteFromFirebaseStorage("","sequenceArray")}catch{}await this.clearCurrentParticipantId()}return await this.localForage.setItem("currentConfigHash",o),Promise.resolve()}catch(i){return console.warn("Failed to connect to Firebase."),Promise.reject(i)}}async initializeParticipantSession(n,r,i,s,o){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(await this.getCurrentParticipantId(o),!this.currentParticipantId)throw new Error("Participant not initialized");const a=await this._getFromFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData"),u=await this.getModes(n);if(WT(a))return this.participantData=a,a;const l=await sM(JSON.stringify(i));return this.participantData={participantId:this.currentParticipantId,participantConfigHash:l,sequence:await this.getSequence(),answers:{},searchParams:r,metadata:s,completed:!1,rejected:!1},u.dataCollectionEnabled&&await this._pushToFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData",this.participantData),this.participantData}async getCurrentConfigHash(){return await this.localForage.getItem("currentConfigHash")}async getAllConfigsFromHash(n,r){const i=n.map(a=>{const u=oc(this.storage,`${this.collectionPrefix}${r}/configs/${a}_config`);return this._getFromFirebaseStorageByRef(u,"config")}),s=await Promise.all(i),o={};return n.forEach((a,u)=>o[a]=s[u]),o}async getCurrentParticipantId(n){const r=await this.localForage.getItem("currentParticipantId");if(n)return this.currentParticipantId=n,await this.localForage.setItem("currentParticipantId",n),n;if(r)return this.currentParticipantId=r,r;if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");return this.currentParticipantId=iM(),await this.localForage.setItem("currentParticipantId",this.currentParticipantId),this.currentParticipantId}async clearCurrentParticipantId(){return await this.localForage.removeItem("currentParticipantId")}async saveAnswers(n){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(!this.currentParticipantId||this.participantData===null)throw new Error("Participant not initialized");this.participantData={...this.participantData,answers:n},await this._pushToFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData",this.participantData)}async setSequenceArray(n){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");await this._pushToFirebaseStorage("","sequenceArray",n)}async getSequenceArray(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const n=await this._getFromFirebaseStorage("","sequenceArray");return Array.isArray(n)?n:null}async getSequence(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(!this.currentParticipantId)throw new Error("Participant not initialized");const n=await this.getSequenceArray();if(!n)throw new Error("Latin square not initialized");const r=await this.getModes(this.studyId),i=ys(this.studyCollection,"sequenceAssignment");await gu(i,{});const s=rf(i,"sequenceAssignment"),o=ys(s,this.currentParticipantId),a=ope(s,JLt("participantId","==","")),u=await qT(a);if(u.docs.length>0){const m=u.docs[0],g=m.data().timestamp;r.dataCollectionEnabled&&(await i6t(m.ref),await gu(o,{participantId:this.currentParticipantId,timestamp:g}))}else r.dataCollectionEnabled&&await gu(o,{participantId:this.currentParticipantId,timestamp:a6t()});const l=ope(s,ZLt("timestamp","asc")),d=(await qT(l)).docs.map(m=>m.data()).findIndex(m=>m.participantId===this.currentParticipantId)%n.length,h=d===-1?Math.floor(Math.random()*n.length-1):d,p=n[h];if(!p)throw new Error("Latin square is empty");return p}async getAllParticipantsData(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const n=oc(this.storage,`${this.collectionPrefix}${this.studyId}/participants`),r=await VT(n),i=[],s=r.items.map(async o=>{const a=await this._getFromFirebaseStorageByRef(o,"participantData");WT(a)&&i.push(a)});return await Promise.all(s),i}async getParticipantData(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(this.currentParticipantId===null)throw new Error("Participant not initialized");const n=await this._getFromFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData");return WT(n)?n:null}async nextParticipant(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const n=iM();await this.localForage.setItem("currentParticipantId",n)}async verifyCompletion(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(!this.currentParticipantId)throw new Error("Participant not initialized");if(await this.getParticipantData(),!this.participantData)throw new Error("Participant not initialized");const n=await this.getModes(this.studyId);return this.participantData.completed=!0,n.dataCollectionEnabled&&await this._pushToFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData",this.participantData),!0}async getUserManagementData(n){const r=rf(this.firestore,"user-management"),i=await qT(r),s=Object.fromEntries(i.docs.map(o=>[o.id,o.data()]));return n in s?s[n]:null}async validateUser(n){if(n!=null&&n.user){const r=await this.getUserManagementData("authentication");if(r!=null&&r.isEnabled){const i=await this.getUserManagementData("adminUsers");if(i&&i.adminUsersList){const s=Object.fromEntries(i.adminUsersList.map(a=>[a.email,a.uid]));if(n.user.email&&(s[n.user.email]===n.user.uid||s[n.user.email]===null)){if(n.user.email&&s[n.user.email]===null){const a=i.adminUsersList.find(u=>u.email===n.user.email);a&&(a.uid=n.user.uid),await gu(ys(this.firestore,"user-management","adminUsers"),{adminUsersList:i.adminUsersList})}return!0}return!1}}return!0}return!1}async changeAuth(n){await gu(ys(this.firestore,"user-management","authentication"),{isEnabled:n})}async addAdminUser(n){const r=await this.getUserManagementData("adminUsers");if(r!=null&&r.adminUsersList){const i=r.adminUsersList;i.find(o=>o.email===n.email)||(i.push({email:n.email,uid:n.uid}),await gu(ys(this.firestore,"user-management","adminUsers"),{adminUsersList:i}))}else await gu(ys(this.firestore,"user-management","adminUsers"),{adminUsersList:[{email:n.email,uid:n.uid}]})}async removeAdminUser(n){const r=await this.getUserManagementData("adminUsers");r!=null&&r.adminUsersList&&r.adminUsersList.length>1&&r.adminUsersList.find(i=>i.email===n)&&(r.adminUsersList=r==null?void 0:r.adminUsersList.filter(i=>i.email!==n),await gu(ys(this.firestore,"user-management","adminUsers"),{adminUsersList:r==null?void 0:r.adminUsersList}))}async getAllParticipantsDataByStudy(n){const r=oc(this.storage,`${this.collectionPrefix}${n}/participants`),i=await VT(r),s=[],o=i.items.map(async a=>{const u=await this._getFromFirebaseStorageByRef(a,"participantData");WT(u)&&s.push(u)});return await Promise.all(o),s}async rejectParticipant(n,r){const i=rf(this.firestore,`${this.collectionPrefix}${n}`),s=oc(this.storage,`${this.collectionPrefix}${n}/participants/${r}_participantData`),o=await this._getFromFirebaseStorageByRef(s,"participantData");try{if(!o||!WT(o)||o.rejected)return;o.rejected=!0,await this._pushToFirebaseStorageByRef(s,"participantData",o);const a=ys(i,"sequenceAssignment"),u=rf(a,"sequenceAssignment"),l=ys(u,r);await r6t(l,{participantId:""})}catch{console.warn("Failed to reject the participant.")}}async setMode(n,r,i){const s=ys(this.firestore,"metadata",`${this.collectionPrefix}${n}`);return await gu(s,{[r]:i},{merge:!0})}async getModes(n){const r=ys(this.firestore,"metadata",`${this.collectionPrefix}${n}`),i=await U9(r);if(i.exists())return i.data();const s={dataCollectionEnabled:!0,studyNavigatorEnabled:!0,analyticsInterfacePubliclyAccessible:!0};return await gu(r,s),s}async createSnapshot(n,r){const i=`${this.collectionPrefix}${n}`;if(!await this._directoryExists(i))return console.warn(`Source directory ${i} does not exist.`),{status:"FAILED",error:{message:"There is currently no data in your study. A snapshot could not be created.",title:"Failed to Create Snapshot."}};const s=new Date,o=s.getUTCFullYear(),a=(s.getUTCMonth()+1).toString().padStart(2,"0"),u=s.getUTCDate().toString().padStart(2,"0"),l=s.getUTCHours().toString().padStart(2,"0"),c=s.getUTCMinutes().toString().padStart(2,"0"),f=s.getUTCSeconds().toString().padStart(2,"0"),d=`${o}-${a}-${u}T${l}:${c}:${f}`,h=`${this.collectionPrefix}${n}-snapshot-${d}`;await this._copyDirectory(`${i}/configs`,`${h}/configs`),await this._copyDirectory(`${i}/participants`,`${h}/participants`),await this._copyDirectory(i,h),await this._copyCollection(i,h),await this._addDirectoryNameToMetadata(h);const p=[];if(r){const m=await this.removeSnapshotOrLive(i,!1);m.status==="FAILED"?p.push({title:m.error.title,message:m.error.message,color:"red"}):p.push({title:"Success!",message:"Successfully deleted live data.",color:"green"})}return p.push({message:"Successfully created snapshot",title:"Success!",color:"green"}),{status:"SUCCESS",notifications:p}}async removeSnapshotOrLive(n,r){try{const i=n.startsWith(this.collectionPrefix)?n:`${this.collectionPrefix}${n}`;return await this._deleteDirectory(`${i}/configs`),await this._deleteDirectory(`${i}/participants`),await this._deleteDirectory(i),await this._deleteCollection(i),r&&await this._removeNameFromMetadata(i),{status:"SUCCESS",notifications:[{message:"Successfully deleted snapshot or live data.",title:"Success!",color:"green"}]}}catch{return{status:"FAILED",error:{title:"Failed to delete live data or snapshot",message:"There was an unspecified error when trying to remove a snapshot or live data."}}}}async getSnapshots(n){try{const r=ys(this.firestore,"metadata","collections"),i=await U9(r);if(i.exists()){const s=i.data();return Object.keys(s).filter(u=>u.startsWith(`${this.collectionPrefix}${n}-snapshot`)).map(u=>{const l=s[u];let c;return typeof l=="boolean"?c=u:l&&typeof l=="object"&&l.enabled===!0?c=l.name:c=null,{originalName:u,alternateName:c}}).filter(u=>u.alternateName!==null).sort((u,l)=>u.originalName.localeCompare(l.originalName)).reverse()}return[]}catch(r){throw console.error("Error listing collections with prefix:",r),r}}async restoreSnapshot(n,r){const i=`${this.collectionPrefix}${n}`,s=[];try{const o=await this.createSnapshot(n,!0);return o.status==="FAILED"?(console.warn("No live data to capture."),s.push({title:o.error.title,message:o.error.message,color:"yellow"})):s.push({title:"Success!",message:"Successfully created snapshot of live data.",color:"green"}),await this._copyDirectory(`${r}/configs`,`${i}/configs`),await this._copyDirectory(`${r}/participants`,`${i}/participants`),await this._copyDirectory(r,i),await this._copyCollection(r,i),s.push({message:"Successfully restored snapshot to live data.",title:"Success!",color:"green"}),{status:"SUCCESS",notifications:s}}catch(o){return console.error("Error trying to delete a snapshot",o),{status:"FAILED",error:{title:"Failed to restore a snapshot fully.",message:"There was an unspecified error when trying to restore this snapshot."}}}}async _addDirectoryNameToMetadata(n){try{const r=ys(this.firestore,"metadata","collections");await gu(r,{[n]:{enabled:!0,name:n}},{merge:!0})}catch(r){throw console.error("Error adding collection to metadata:",r),r}}async renameSnapshot(n,r){try{const i=ys(this.firestore,"metadata","collections");return await gu(i,{[n]:{enabled:!0,name:r}},{merge:!0}),{status:"SUCCESS",notifications:[{message:"Successfully renamed snapshot.",title:"Success!",color:"green"}]}}catch(i){return console.error("Error renaming collection in metadata",i),{status:"FAILED",error:{title:"Failed to Rename Snapshot.",message:"There was an error when trying to rename the snapshot."}}}}async _removeNameFromMetadata(n){try{const r=ys(this.firestore,"metadata","collections"),i=await U9(r);if(i.exists()){const s=i.data();s[n]?(delete s[n],await gu(r,s)):console.warn(`${n} does not exist in metadata.`)}else console.warn("No metadata found.")}catch(r){throw console.error("Error removing collection from metadata:",r),r}}async _deleteDirectory(n){try{const r=oc(this.storage,n),s=(await VT(r)).items.map(o=>xhe(o));await Promise.all(s)}catch(r){console.error("Error deleting files in directory:",r)}}async _copyDirectory(n,r){try{const i=oc(this.storage,n),o=(await VT(i)).items.map(a=>{const u=a.fullPath,l=u.replace(n,r);return this._copyFile(u,l)});await Promise.all(o)}catch(i){console.error("Error copying file:",i)}}async _copyFile(n,r){try{const i=oc(this.storage,n),s=oc(this.storage,r),o=await M9(i),u=await(await fetch(o)).blob();await $9(s,u)}catch(i){console.error("Error copying file:",i)}}async _copyCollection(n,r){const i=rf(this.firestore,n),s=ys(i,"sequenceAssignment"),o=rf(s,"sequenceAssignment"),a=rf(this.firestore,r),u=ys(a,"sequenceAssignment");await gu(u,{});const l=rf(u,"sequenceAssignment"),c=await qT(o),f=lpe(this.firestore);c.docs.forEach(d=>{const h=ys(l,d.id);f.set(h,d.data())}),await f.commit()}async _deleteCollection(n){const r=rf(this.firestore,n),i=ys(r,"sequenceAssignment"),s=rf(i,"sequenceAssignment"),o=await qT(s),a=lpe(this.firestore);o.forEach(u=>{const l=ys(s,u.id);a.delete(l)}),a.delete(i),await a.commit()}async _directoryExists(n){try{const r=oc(this.storage,n);return(await VT(r)).items.length>0}catch(r){if(r.code==="storage/object-not-found")return!1;throw console.error("Error checking if directory exists:",r),r}}_verifyStudyDatabase(n){return n!==void 0}async _getFromFirebaseStorage(n,r){const i=oc(this.storage,`${this.collectionPrefix}${this.studyId}/${n}_${r}`);let s={};try{const o=await M9(i),u=await(await fetch(o)).text();s=JSON.parse(u)}catch{console.warn(`${n} does not have ${r} for ${this.collectionPrefix}${this.studyId}.`)}return s}async _getFromFirebaseStorageByRef(n,r){let i={};try{const s=await M9(n),a=await(await fetch(s)).text();i=JSON.parse(a)}catch{console.warn(`${n} with type ${r} not found.`)}return i}async _pushToFirebaseStorage(n,r,i){if(Object.keys(i).length>0){const s=oc(this.storage,`${this.collectionPrefix}${this.studyId}/${n}_${r}`),o=new Blob([JSON.stringify(i)],{type:"application/json"});await $9(s,o)}}async _pushToFirebaseStorageByRef(n,r,i){if(Object.keys(i).length>0){const s=new Blob([JSON.stringify(i)],{type:"application/json"});await $9(n,s)}}async _deleteFromFirebaseStorage(n,r){const i=oc(this.storage,`${this.collectionPrefix}${this.studyId}/${n}_${r}`);await xhe(i)}}const lOe=I.createContext({user:{user:null,determiningStatus:!1,isAdmin:!1,adminVerification:!1},logout:async()=>{},triggerAuth:()=>{},verifyAdminStatus:()=>Promise.resolve(!1)}),n_=()=>I.useContext(lOe);function J6t({children:e}){const t={user:null,determiningStatus:!0,isAdmin:!1,adminVerification:!1},n={user:null,determiningStatus:!1,isAdmin:!1,adminVerification:!1},r={user:{name:"fakeName",email:"fakeEmail@fake.com",uid:"fakeUid"},determiningStatus:!1,isAdmin:!0,adminVerification:!0},[i,s]=I.useState(t),[o,a]=I.useState(!1),{storageEngine:u}=Cs(),l=async()=>{const h=Q$();try{await SPt(h)}catch(p){console.error(`There was an issue signing-out the user: ${p.message}`)}finally{s(n)}},c=()=>{a(!0)},f=async h=>u?await u.validateUser(h):!1;I.useEffect(()=>{s(t);let h;if(u instanceof vc)try{h=Q$()}catch{console.warn("No firebase store.")}const p=async y=>{if(s(v=>({user:v.user,isAdmin:v.isAdmin,determiningStatus:!0,adminVerification:!1})),y){const v={user:y,determiningStatus:!1,isAdmin:!1,adminVerification:!0},b=await f(v);v.isAdmin=!!b,s(v)}else l()},g=(async()=>{if(u instanceof vc){const y=await(u==null?void 0:u.getUserManagementData("authentication"));if(y!=null&&y.isEnabled){const v=xPt(h,async b=>await p(b));return()=>v()}s(r)}else u&&s(r);return()=>{}})();return()=>{g.then(y=>y())}},[u,o]);const d=I.useMemo(()=>({user:i,triggerAuth:c,logout:l,verifyAdminStatus:f}),[i]);return _.jsx(lOe.Provider,{value:d,children:i.determiningStatus?_.jsx(Ll,{visible:!0}):e})}function KC({studyIds:e}){const t=Gh(),{studyId:n}=wm(),r=Py(),i=e.map(d=>({value:d,label:d})),{storageEngine:s}=Cs(),{user:o,logout:a}=n_(),[u,l]=I.useState(!1),c=r.pathname.includes("analysis"),f=[{name:"Studies",leftIcon:_.jsx(yQe,{}),href:"",needAdmin:!1},{name:"Analysis",leftIcon:_.jsx(uQe,{}),href:"analysis/dashboard",needAdmin:!1},{name:"Settings",leftIcon:_.jsx(Owe,{}),href:"settings",needAdmin:!0}];return _.jsx(pi.Header,{p:"md",children:_.jsxs(Ha,{mt:-7,align:"center",children:[_.jsx(Ha.Col,{span:6,children:_.jsxs(Nt,{align:"center",onClick:()=>t(c?"/analysis/dashboard":"/"),style:{cursor:"pointer"},children:[_.jsx(Dy,{w:40,src:`${Vu}revisitAssets/revisitLogoSquare.svg`,alt:"Revisit Logo"}),_.jsx(Nl,{w:"md"}),_.jsx(ui,{order:4,style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:c?"ReVISit Analytics Platform":"ReVISit Studies"})]})}),_.jsx(Ha.Col,{span:6,children:_.jsxs(Nt,{justify:"flex-end",direction:"row",children:[c&&_.jsx(pk,{allowDeselect:!1,placeholder:"Select Study",data:i,value:n,onChange:d=>t(`/analysis/stats/${d}`),mr:16}),_.jsx(zG,{opened:!1,onClick:()=>l(!0),style:{visibility:u?"hidden":void 0}}),_.jsx(qh,{opened:u,onClose:()=>l(!1),position:"right",withCloseButton:!1,children:_.jsxs(Nt,{direction:"column",mt:20,children:[_.jsx(Xe,{ml:15,mb:20,fw:700,size:"lg",children:"Navigation"}),f.map(d=>d.needAdmin?o.isAdmin?_.jsx(fn,{leftSection:d.leftIcon,variant:"default",style:{border:"none",display:"flex",justifyContent:"flex-start"},onClick:h=>{h.preventDefault(),t(`/${d.href}`),l(!1)},component:"a",href:`${Vu}${d.href}`,children:d.name},`menu-item-${d.name}`):null:_.jsx(fn,{leftSection:d.leftIcon,variant:"default",style:{border:"none",display:"flex",justifyContent:"flex-start"},onClick:h=>{h.preventDefault(),t(`/${d.href}`),l(!1)},component:"a",href:`${Vu}${d.href}`,children:d.name},`menu-item-${d.name}`)),_.jsxs(pe,{ml:10,children:[_.jsx(LE,{my:"sm"}),(s==null?void 0:s.getEngine())==="firebase"?o.isAdmin?_.jsx(Xe,{size:"sm",ml:10,style:{cursor:"pointer"},onClick:()=>{a(),t("/login"),l(!1)},children:"Logout"}):_.jsx(Xe,{size:"sm",ml:10,style:{cursor:"pointer"},onClick:()=>{t("/login"),l(!1)},children:"Login"}):null]})]})})]})})]})})}function jZ({allParticipants:e,studyId:t,gap:n,fileName:r}){const[i,{open:s,close:o}]=wL(!1),[a,u]=I.useState([]),l=async()=>typeof e=="function"?await e():e,c=async()=>{const d=await l(),h=r?`${r}.json`:`${t}_all.json`;$J(JSON.stringify(d,null,2),h)},f=async()=>{const d=await l();u(d),s()};return _.jsxs(_.Fragment,{children:[_.jsxs(ls,{style:{gap:n},children:[_.jsx(ai,{label:"Download all participants data as JSON",children:_.jsx(fn,{variant:"light",disabled:e.length===0&&typeof e!="function",onClick:c,px:4,children:_.jsx(hQe,{})})}),_.jsx(ai,{label:"Download all participants data as a tidy CSV",children:_.jsx(fn,{variant:"light",disabled:e.length===0&&typeof e!="function",onClick:f,px:4,children:_.jsx($we,{})})})]}),i&&a.length>0&&_.jsx($Rt,{opened:i,close:o,filename:r?`${r}_tidy.csv`:`${t}_all_tidy.csv`,data:a,studyId:t})]})}function Z6t({cellData:e}){return _.jsx(qt.Td,{children:_.jsx(Rf,{miw:100,children:Object.entries(e.answer).map(([t,n])=>_.jsxs(pe,{children:[_.jsxs(Xe,{fw:700,span:!0,children:[" ",`${t}: `]}),_.jsx(Xe,{span:!0,children:`${n}`})]},`cell-${t}`))})})}function ype({cellData:e}){const t=(e.endTime-e.startTime)/1e3;return _.jsxs(qt.Td,{children:[t.toFixed(1)," ","s"]})}function e4t(e){const{metaData:t}=e;return _.jsx(qt.Td,{children:_.jsx(yY,{w:200,hideLabel:"hide",maxHeight:50,showLabel:"more",children:_.jsxs(Rf,{gap:"xs",children:[_.jsxs(pe,{children:["IP:"," ",t.ip]}),_.jsxs(pe,{children:["Language:"," ",t.language]}),_.jsxs(pe,{children:["Resolution:"," ",JSON.stringify(t.resolution)]}),_.jsxs(pe,{children:["User Agent:"," ",t.userAgent]})]})})})}function t4t({completed:e,inProgress:t,rejected:n,studyConfig:r,refresh:i}){const{storageEngine:s}=Cs(),{studyId:o}=wm(),{user:a}=n_(),u=async b=>{s&&o&&(a.isAdmin?(await s.rejectParticipant(o,b),await i()):console.warn("You are not authorized to perform this action."))},[l,c]=I.useState([]),[f,d]=I.useState(!1),h=()=>u7({title:"Confirm rejecting participants",children:_.jsxs(Xe,{size:"sm",children:["Are you sure you want to reject the selected participants? This action is"," ",_.jsx(Xe,{span:!0,fw:700,td:"underline",inherit:!0,children:"irreversible"}),", and will return the participants' sequences to the beginning of the sequence array."]}),labels:{confirm:"Reject Participants",cancel:"Cancel"},confirmProps:{color:"red"},cancelProps:{variant:"subtle",color:"dark"},onCancel:()=>{},onConfirm:async()=>{d(!0);const b=l.map(async w=>await u(w));await Promise.all(b),c([]),await i(),d(!1)}}),p=I.useMemo(()=>[...e,...t,...n],[e,t,n]);function m(b){b==="all"?l.length===p.length?c([]):c(p.map(w=>w.participantId)):l.includes(b)?c(l.filter(w=>w!==b)):c([...l,b])}const g=Pxe(r.sequence),y=[_.jsx(qt.Th,{children:_.jsx(Nt,{justify:"center",children:_.jsx(Sl,{mb:-4,checked:l.length===p.length,onChange:()=>m("all")})})},"action"),_.jsx(qt.Th,{children:"ID"},"ID"),_.jsx(qt.Th,{children:"Status"},"status"),_.jsx(qt.Th,{children:"Meta"},"meta"),...g.flatMap(b=>[_.jsx(qt.Th,{children:b.componentName},`header-${b.componentName}-${b.timesSeenInBlock}`),_.jsxs(qt.Th,{children:[_.jsx("span",{style:{whiteSpace:"nowrap"},children:b.componentName})," ","Duration"]},`header-${b.componentName}-${b.timesSeenInBlock}-duration`)]),_.jsx(qt.Th,{children:"Total Duration"},"total-duration")],v=p.map(b=>_.jsxs(qt.Tr,{children:[_.jsx(qt.Td,{children:_.jsx(Nt,{justify:"center",children:_.jsx(Sl,{mb:-4,checked:l.includes(b.participantId),onChange:()=>m(b.participantId)})})}),_.jsx(qt.Td,{style:{whiteSpace:"nowrap"},children:b.participantId}),_.jsx(qt.Td,{children:_.jsxs(Nt,{direction:"row",align:"center",children:[b.rejected?_.jsx(ai,{label:"Rejected",children:_.jsx(PY,{size:16,color:"red",style:{marginBottom:-3}})}):b.completed?_.jsx(ai,{label:"Completed",children:_.jsx(Nwe,{size:16,color:"teal",style:{marginBottom:-3}})}):_.jsx(ai,{label:"In Progress",children:_.jsx(Pwe,{size:16,color:"orange",style:{marginBottom:-3}})}),!b.completed&&_.jsxs(Xe,{size:"sm",mb:-1,ml:4,children:[(Object.entries(b.answers).filter(([w,E])=>E.endTime!==void 0).length/(Sm(b.sequence).length-1)*100).toFixed(2),"%"]})]})}),b.metadata?_.jsx(e4t,{metaData:b.metadata}):_.jsx(qt.Td,{children:"N/A"}),g.map(w=>{const E=Nxe(b.sequence,w.orderPath),T=E&&Object.entries(b.answers).sort((S,C)=>{const A=parseInt(S[0].slice(S[0].lastIndexOf("_")+1),10),k=parseInt(C[0].slice(C[0].lastIndexOf("_")+1),10);return A-k}).filter(([S])=>{const C=S.slice(0,S.lastIndexOf("_")),A=parseInt(S.slice(S.lastIndexOf("_")+1),10);return C===w.componentName&&A<=E[0].lastIndex&&A>=E[0].firstIndex});return T!==null&&T.length>=w.timesSeenInBlock+1?_.jsxs(_r.Fragment,{children:[_.jsx(Z6t,{cellData:T[w.timesSeenInBlock][1]}),_.jsx(ype,{cellData:T[w.timesSeenInBlock][1]})]},`cellgroup-${b.participantId}-${w.componentName}-${w.timesSeenInBlock}`):_.jsxs(_r.Fragment,{children:[_.jsx(qt.Td,{children:"N/A"}),_.jsx(qt.Td,{children:"N/A"})]},`cellgroup-${b.participantId}-${w.componentName}-${w.timesSeenInBlock}`)}),_.jsx(ype,{cellData:{startTime:Math.min(...Object.values(b.answers).map(w=>w.startTime)),endTime:Math.max(...Object.values(b.answers).map(w=>w.endTime)),answer:{},windowEvents:[]}},`cell-${b.participantId}-total-duration`)]},b.participantId));return p.length>0?_.jsxs(_.Fragment,{children:[_.jsx(Ll,{visible:f,overlayProps:{blur:2}}),_.jsxs(Nt,{justify:"space-between",mb:8,p:8,children:[_.jsx(ls,{children:_.jsx(pk,{w:350,variant:"filled",placeholder:"Search for a participant ID",data:p.map(b=>({value:b.participantId,label:b.participantId})),searchable:!0,value:null,leftSection:_.jsx(AQe,{size:14}),onChange:b=>b&&m(b)})}),_.jsxs(ls,{children:[_.jsx(jZ,{allParticipants:[...e,...t],studyId:o||""}),_.jsx(fn,{disabled:l.length===0||!a.isAdmin,onClick:h,color:"red",children:"Reject Participants"})]})]}),_.jsx(Nt,{direction:"column",style:{width:"100%",overflow:"auto"},children:_.jsxs(qt,{striped:!0,withTableBorder:!0,children:[_.jsx(qt.Thead,{children:_.jsx(qt.Tr,{children:y})}),_.jsx(qt.Tbody,{children:v})]})})]}):_.jsxs(_.Fragment,{children:[_.jsx(Nl,{h:"xl"}),_.jsx(Nt,{justify:"center",align:"center",children:_.jsx(Xe,{children:"No data available"})})]})}const n4t="_root_1spq0_1",r4t="_description_1spq0_9",i4t="_title_1spq0_10",s4t="_closeButton_1spq0_14",o4t={root:n4t,description:r4t,title:i4t,closeButton:s4t},oM=e=>{const{title:t,message:n,color:r}=e;Bb.show({title:t,message:n,position:"top-center",classNames:o4t,color:r||"blue",autoClose:r==="red"||r==="yellow"?!1:5e3})};function a4t({studyId:e,refresh:t}){const[n,r]=I.useState(!1),[i,s]=I.useState(!1),[o,a]=I.useState(!1),[u,l]=I.useState(!1),[c,f]=I.useState(""),[d,h]=I.useState([]),[p,m]=I.useState(""),[g,y]=I.useState(""),[v,b]=I.useState(!1),[w,E]=I.useState(!1),{storageEngine:T}=Cs(),S=T,C=I.useCallback(async()=>{E(!0);const D=await S.getSnapshots(e);h(D),E(!1)},[S,e]);I.useEffect(()=>{C()},[C]);const A=async(D,...z)=>{b(!0);const W=await D(...z);W.status==="SUCCESS"?(C(),b(!1),await t(),W.notifications&&W.notifications.forEach(j=>{oM(j)})):(b(!1),oM({title:W.error.title,message:W.error.message,color:"red"}))},k=async()=>{await A(S.createSnapshot.bind(S),e,!1)},N=async()=>{m(""),r(!1),await A(S.createSnapshot.bind(S),e,!0)},O=async()=>{a(!1),await A(S.renameSnapshot.bind(S),c,g)},P=async D=>{await A(S.restoreSnapshot.bind(S),e,D)},$=async()=>{m(""),s(!1),await A(S.removeSnapshotOrLive.bind(S),c,!0)},F=async()=>{m(""),l(!1),await A(S.removeSnapshotOrLive.bind(S),e,!0)},M=()=>u7({title:"Create a Snapshot",children:_.jsx(Xe,{mb:30,children:"This will create a snapshot of the live database without impacting the live data."}),labels:{confirm:"Create",cancel:"Cancel"},cancelProps:{variant:"subtle",color:"dark"},onCancel:()=>{},onConfirm:()=>k()}),B=D=>u7({title:"Restore Snapshot",children:_.jsx(Xe,{mb:30,children:"Restoring this snapshot will perform 2 actions. First, we will create a snapshot of the current live database, then we will restore the selected snapshot into the live database."}),labels:{confirm:"Restore",cancel:"Cancel"},confirmProps:{color:"red"},cancelProps:{variant:"subtle",color:"dark"},onCancel:()=>{},onConfirm:()=>P(D)}),U=D=>{const z=/-snapshot-(.+)$/,W=D.match(z);return W&&W[1]?W[1].replace("T"," "):null},H=async D=>{const z=D.slice(D.indexOf("-")+1);return await S.getAllParticipantsDataByStudy(z)};return _.jsxs(_.Fragment,{children:[_.jsx(Ll,{visible:v}),_.jsxs(Nt,{justify:"space-between",align:"center",children:[_.jsxs(pe,{style:{width:"70%"},children:[_.jsx(ui,{order:5,children:"Create a Snapshot"}),_.jsxs(Xe,{children:["This will create a snapshot of the live"," ",_.jsx(Xe,{span:!0,fw:700,children:e})," ","database. It will"," ",_.jsx(Xe,{span:!0,fw:700,fs:"italic",children:"not"})," ","remove this data from the live database. The current study data can be restored from a snapshot at any time."]})]}),_.jsx(ai,{label:"Create a snapshot",children:_.jsx(fn,{onClick:M,children:"Snapshot"})})]}),_.jsx(Nl,{h:"lg"}),_.jsxs(Nt,{justify:"space-between",align:"center",children:[_.jsxs(pe,{style:{width:"70%"},children:[_.jsx(ui,{order:5,children:"Archive Data"}),_.jsxs(Xe,{children:["This will create a snapshot of the live"," ",_.jsx(Xe,{span:!0,fw:700,children:e})," ","database. It will then remove this data from the live database. The current study data can be restored from a snapshot at any time."]})]}),_.jsx(ai,{label:"Snapshot and Delete Data",children:_.jsx(fn,{color:"red",onClick:()=>r(!0),children:"Archive"})})]}),_.jsx(Nl,{h:"lg"}),_.jsxs(Nt,{justify:"space-between",align:"center",children:[_.jsxs(pe,{style:{width:"70%"},children:[_.jsx(ui,{order:5,children:"Delete Data"}),_.jsxs(Xe,{children:["This will delete the live"," ",_.jsx(Xe,{span:!0,fw:700,children:e})," ","database. Since this does not create a snapshot the data will be permanently deleted and cannot be restored."]})]}),_.jsx(ai,{label:"Delete Data",children:_.jsx(fn,{color:"red",onClick:()=>l(!0),children:"Delete"})})]}),_.jsx(Nl,{h:"xl"}),_.jsxs(Nt,{direction:"column",children:[_.jsx(Nt,{style:{borderBottom:"1px solid #dedede"},direction:"row",justify:"space-between",mb:"xs",pb:"sm",children:_.jsx(ui,{order:5,children:"Snapshots"})}),_.jsxs(pe,{style:{position:"relative"},children:[_.jsx(Ll,{visible:w}),d.length>0?_.jsxs(qt,{children:[_.jsx(qt.Thead,{children:_.jsxs(qt.Tr,{children:[_.jsx(qt.Th,{children:"Snapshot Name"}),_.jsx(qt.Th,{children:"Date Created"}),_.jsx(qt.Th,{children:"Actions"})]})}),_.jsx(qt.Tbody,{children:d.map(D=>_.jsxs(qt.Tr,{children:[_.jsx(qt.Td,{children:D.alternateName}),_.jsx(qt.Td,{children:U(D.originalName)}),_.jsx(qt.Td,{children:_.jsxs(Nt,{children:[_.jsx(ai,{label:"Rename",children:_.jsx(fn,{color:"green",variant:"light",px:4,style:{margin:"0px 5px"},onClick:()=>{a(!0),f(D.originalName)},children:_.jsx(EQe,{})})}),_.jsx(ai,{label:"Restore Snapshot",children:_.jsx(fn,{color:"blue",variant:"light",px:4,style:{margin:"0px 5px"},onClick:()=>{B(D.originalName)},children:_.jsx(TQe,{})})}),_.jsx(ai,{label:"Delete Snapshot",children:_.jsx(fn,{color:"red",px:4,variant:"light",style:{margin:"0px 10px 0px 5px"},onClick:()=>{s(!0),f(D.originalName)},children:_.jsx(Mwe,{})})}),_.jsx(jZ,{allParticipants:()=>H(D.originalName),studyId:e,gap:"10px",fileName:D.alternateName})]})})]},D.originalName))})]}):_.jsx(Xe,{children:"No snapshots."})]})]}),_.jsxs(Yi,{opened:n,onClose:()=>{r(!1),m("")},title:_.jsx(Xe,{children:"Archive Data"}),children:[_.jsx(Xe,{mb:"sm",children:"This will create a snapshot of the live database and remove the data from the live database."}),_.jsx(Qg,{label:"To archive this data, please enter the name of the study.",placeholder:e,onChange:D=>m(D.target.value)}),_.jsxs(Nt,{mt:"sm",justify:"right",children:[_.jsx(fn,{mr:5,variant:"subtle",color:"dark",onClick:()=>{r(!1),m("")},children:"Cancel"}),_.jsx(fn,{color:"red",onClick:N,disabled:p!==e,children:"Archive"})]})]}),_.jsxs(Yi,{opened:i,onClose:()=>{s(!1),m("")},title:_.jsx(Xe,{children:"Delete Snapshot"}),children:[_.jsxs(Xe,{mb:"sm",children:["This will permanently remove this snapshot. This action is"," ",_.jsx(Xe,{span:!0,fw:700,children:"irreversible"}),"."]}),_.jsx(Qg,{label:"To delete this snapshot, please enter the name of the study.",placeholder:e,onChange:D=>m(D.target.value)}),_.jsxs(Nt,{mt:"sm",justify:"right",children:[_.jsx(fn,{mr:5,variant:"subtle",color:"dark",onClick:()=>{s(!1),m("")},children:"Cancel"}),_.jsx(fn,{color:"red",onClick:$,disabled:p!==e,children:"Delete"})]})]}),_.jsxs(Yi,{opened:o,onClose:()=>{a(!1),y("")},title:_.jsx(Xe,{children:"Rename Snapshot"}),children:[_.jsx(Qg,{label:"Enter the new name of the snapshot.",placeholder:c,onChange:D=>y(D.target.value)}),_.jsxs(Nt,{mt:"sm",justify:"right",children:[_.jsx(fn,{mr:5,variant:"subtle",color:"dark",onClick:()=>{a(!1),y("")},children:"Cancel"}),_.jsx(fn,{color:"green",onClick:O,disabled:!g||g.length===0,children:"Rename"})]})]}),_.jsxs(Yi,{opened:u,onClose:()=>{l(!1),m("")},title:_.jsx(Xe,{children:"Delete Live Data"}),children:[_.jsxs(Xe,{mb:"sm",children:["This will permanently delete the live"," ",_.jsx(Xe,{span:!0,fw:700,children:e})," ","data. This action is"," ",_.jsx(Xe,{span:!0,fw:700,children:"irreversible"}),". Please consider using archive data to create a snapshot of the live data before deleting."]}),_.jsx(Qg,{label:"To delete this live data, please enter the name of the study.",placeholder:e,onChange:D=>m(D.target.value)}),_.jsxs(Nt,{mt:"sm",justify:"right",children:[_.jsx(fn,{mr:5,variant:"subtle",color:"dark",onClick:()=>{l(!1),m("")},children:"Cancel"}),_.jsx(fn,{color:"red",onClick:F,disabled:p!==e,children:"Delete"})]})]})]})}function u4t({studyId:e}){const{storageEngine:t}=Cs(),[n,r]=I.useState(!1),[i,s]=I.useState(!1),[o,a]=I.useState(!1),[u,l]=I.useState(!1);I.useEffect(()=>{(async()=>{if(t){const d=await t.getModes(e);s(d.dataCollectionEnabled),a(d.studyNavigatorEnabled),l(d.analyticsInterfacePubliclyAccessible),r(!0)}})()},[t,e]);const c=async(f,d)=>{t&&(await t.setMode(e,f,d),f==="dataCollectionEnabled"?s(d):f==="studyNavigatorEnabled"?a(d):f==="analyticsInterfacePubliclyAccessible"&&l(d))};return n&&_.jsxs(Rf,{children:[_.jsx(Kw,{label:"Data Collection Enabled",checked:i,onChange:f=>c("dataCollectionEnabled",f.currentTarget.checked)}),_.jsx(Kw,{label:"Study Navigator Enabled",checked:o,onChange:f=>c("studyNavigatorEnabled",f.currentTarget.checked)}),_.jsx(Kw,{label:"Analytics Interface Publicly Accessible",checked:u,onChange:f=>c("analyticsInterfacePubliclyAccessible",f.currentTarget.checked)})]})}function l4t({studyId:e,refresh:t}){const{storageEngine:n}=Cs();return _.jsx(Oc,{children:_.jsxs(wu,{multiple:!0,variant:"contained",children:[_.jsxs(wu.Item,{value:"ReVISit Modes",children:[_.jsx(wu.Control,{children:_.jsx(ui,{order:5,children:"ReVISit Modes"})}),_.jsx(wu.Panel,{children:_.jsx(u4t,{studyId:e})})]},"modes"),_.jsxs(wu.Item,{value:"Data Management",children:[_.jsx(wu.Control,{disabled:(n==null?void 0:n.getEngine())==="localStorage",children:_.jsx(ui,{order:5,children:"Data Management"})}),_.jsx(wu.Panel,{children:(n==null?void 0:n.getEngine())!=="localStorage"&&_.jsx(a4t,{studyId:e,refresh:t})})]},"dataManagement")]})})}const B_=14;function cOe({completed:e,inProgress:t,rejected:n,filteredCompleted:r}){return _.jsxs(Nt,{ml:4,gap:4,children:[_.jsx(ai,{label:"Completed",children:_.jsx(b0,{variant:"light",color:"green",leftSection:_.jsx(Nwe,{width:B_,height:B_,style:{paddingTop:1}}),pb:1,children:r&&r!==e?`${r}/${e}`:e})}),_.jsx(ai,{label:"In Progress",children:_.jsx(b0,{variant:"light",color:"orange",leftSection:_.jsx(Pwe,{width:B_,height:B_,style:{paddingTop:1}}),pb:1,children:t})}),_.jsx(ai,{label:"Rejected",children:_.jsx(b0,{variant:"light",color:"red",leftSection:_.jsx(PY,{width:B_,height:B_,style:{paddingTop:1}}),pb:1,children:n})})]})}const vpe={};function rH(e,t){e===void 0&&(e=vpe),t===void 0&&(t=vpe);const n=Object.keys(e),r=Object.keys(t);return e===t||n.length===r.length&&n.every(i=>e[i]===t[i])}/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2022 Joachim Wester
 * MIT licensed
 */var c4t=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},e(t,n)};return function(t,n){e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),f4t=Object.prototype.hasOwnProperty;function iH(e,t){return f4t.call(e,t)}function sH(e){if(Array.isArray(e)){for(var t=new Array(e.length),n=0;n<t.length;n++)t[n]=""+n;return t}if(Object.keys)return Object.keys(e);var r=[];for(var i in e)iH(e,i)&&r.push(i);return r}function Il(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}}function oH(e){for(var t=0,n=e.length,r;t<n;){if(r=e.charCodeAt(t),r>=48&&r<=57){t++;continue}return!1}return!0}function Fv(e){return e.indexOf("/")===-1&&e.indexOf("~")===-1?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function fOe(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function aH(e){if(e===void 0)return!0;if(e){if(Array.isArray(e)){for(var t=0,n=e.length;t<n;t++)if(aH(e[t]))return!0}else if(typeof e=="object"){for(var r=sH(e),i=r.length,s=0;s<i;s++)if(aH(e[r[s]]))return!0}}return!1}function bpe(e,t){var n=[e];for(var r in t){var i=typeof t[r]=="object"?JSON.stringify(t[r],null,2):t[r];typeof i<"u"&&n.push(r+": "+i)}return n.join(`
`)}var dOe=function(e){c4t(t,e);function t(n,r,i,s,o){var a=this.constructor,u=e.call(this,bpe(n,{name:r,index:i,operation:s,tree:o}))||this;return u.name=r,u.index=i,u.operation=s,u.tree=o,Object.setPrototypeOf(u,a.prototype),u.message=bpe(n,{name:r,index:i,operation:s,tree:o}),u}return t}(Error),Ui=dOe,d4t=Il,Ow={add:function(e,t,n){return e[t]=this.value,{newDocument:n}},remove:function(e,t,n){var r=e[t];return delete e[t],{newDocument:n,removed:r}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:function(e,t,n){var r=aM(n,this.path);r&&(r=Il(r));var i=k1(n,{op:"remove",path:this.from}).removed;return k1(n,{op:"add",path:this.path,value:i}),{newDocument:n,removed:r}},copy:function(e,t,n){var r=aM(n,this.from);return k1(n,{op:"add",path:this.path,value:Il(r)}),{newDocument:n}},test:function(e,t,n){return{newDocument:n,test:RI(e[t],this.value)}},_get:function(e,t,n){return this.value=e[t],{newDocument:n}}},h4t={add:function(e,t,n){return oH(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:n,index:t}},remove:function(e,t,n){var r=e.splice(t,1);return{newDocument:n,removed:r[0]}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:Ow.move,copy:Ow.copy,test:Ow.test,_get:Ow._get};function aM(e,t){if(t=="")return e;var n={op:"_get",path:t};return k1(e,n),n.value}function k1(e,t,n,r,i,s){if(n===void 0&&(n=!1),r===void 0&&(r=!0),i===void 0&&(i=!0),s===void 0&&(s=0),n&&(typeof n=="function"?n(t,0,e,t.path):uM(t,0)),t.path===""){var o={newDocument:e};if(t.op==="add")return o.newDocument=t.value,o;if(t.op==="replace")return o.newDocument=t.value,o.removed=e,o;if(t.op==="move"||t.op==="copy")return o.newDocument=aM(e,t.from),t.op==="move"&&(o.removed=e),o;if(t.op==="test"){if(o.test=RI(e,t.value),o.test===!1)throw new Ui("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o.newDocument=e,o}else{if(t.op==="remove")return o.removed=e,o.newDocument=null,o;if(t.op==="_get")return t.value=e,o;if(n)throw new Ui("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",s,t,e);return o}}else{r||(e=Il(e));var a=t.path||"",u=a.split("/"),l=e,c=1,f=u.length,d=void 0,h=void 0,p=void 0;for(typeof n=="function"?p=n:p=uM;;){if(h=u[c],h&&h.indexOf("~")!=-1&&(h=fOe(h)),i&&(h=="__proto__"||h=="prototype"&&c>0&&u[c-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&d===void 0&&(l[h]===void 0?d=u.slice(0,c).join("/"):c==f-1&&(d=t.path),d!==void 0&&p(t,0,e,d)),c++,Array.isArray(l)){if(h==="-")h=l.length;else{if(n&&!oH(h))throw new Ui("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",s,t,e);oH(h)&&(h=~~h)}if(c>=f){if(n&&t.op==="add"&&h>l.length)throw new Ui("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",s,t,e);var o=h4t[t.op].call(t,l,h,e);if(o.test===!1)throw new Ui("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o}}else if(c>=f){var o=Ow[t.op].call(t,l,h,e);if(o.test===!1)throw new Ui("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o}if(l=l[h],n&&c<f&&(!l||typeof l!="object"))throw new Ui("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",s,t,e)}}}function Y4(e,t,n,r,i){if(r===void 0&&(r=!0),i===void 0&&(i=!0),n&&!Array.isArray(t))throw new Ui("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");r||(e=Il(e));for(var s=new Array(t.length),o=0,a=t.length;o<a;o++)s[o]=k1(e,t[o],n,!0,i,o),e=s[o].newDocument;return s.newDocument=e,s}function p4t(e,t,n){var r=k1(e,t);if(r.test===!1)throw new Ui("Test operation failed","TEST_OPERATION_FAILED",n,t,e);return r.newDocument}function uM(e,t,n,r){if(typeof e!="object"||e===null||Array.isArray(e))throw new Ui("Operation is not an object","OPERATION_NOT_AN_OBJECT",t,e,n);if(Ow[e.op]){if(typeof e.path!="string")throw new Ui("Operation `path` property is not a string","OPERATION_PATH_INVALID",t,e,n);if(e.path.indexOf("/")!==0&&e.path.length>0)throw new Ui('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",t,e,n);if((e.op==="move"||e.op==="copy")&&typeof e.from!="string")throw new Ui("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&e.value===void 0)throw new Ui("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&aH(e.value))throw new Ui("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",t,e,n);if(n){if(e.op=="add"){var i=e.path.split("/").length,s=r.split("/").length;if(i!==s+1&&i!==s)throw new Ui("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",t,e,n)}else if(e.op==="replace"||e.op==="remove"||e.op==="_get"){if(e.path!==r)throw new Ui("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",t,e,n)}else if(e.op==="move"||e.op==="copy"){var o={op:"_get",path:e.from,value:void 0},a=hOe([o],n);if(a&&a.name==="OPERATION_PATH_UNRESOLVABLE")throw new Ui("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",t,e,n)}}}else throw new Ui("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",t,e,n)}function hOe(e,t,n){try{if(!Array.isArray(e))throw new Ui("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)Y4(Il(t),Il(e),n||!0);else{n=n||uM;for(var r=0;r<e.length;r++)n(e[r],r,t,void 0)}}catch(i){if(i instanceof Ui)return i;throw i}}function RI(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){var n=Array.isArray(e),r=Array.isArray(t),i,s,o;if(n&&r){if(s=e.length,s!=t.length)return!1;for(i=s;i--!==0;)if(!RI(e[i],t[i]))return!1;return!0}if(n!=r)return!1;var a=Object.keys(e);if(s=a.length,s!==Object.keys(t).length)return!1;for(i=s;i--!==0;)if(!t.hasOwnProperty(a[i]))return!1;for(i=s;i--!==0;)if(o=a[i],!RI(e[o],t[o]))return!1;return!0}return e!==e&&t!==t}const m4t=Object.freeze(Object.defineProperty({__proto__:null,JsonPatchError:Ui,_areEquals:RI,applyOperation:k1,applyPatch:Y4,applyReducer:p4t,deepClone:d4t,getValueByPointer:aM,validate:hOe,validator:uM},Symbol.toStringTag,{value:"Module"}));/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2021 Joachim Wester
 * MIT license
 */var BZ=new WeakMap,g4t=function(){function e(t){this.observers=new Map,this.obj=t}return e}(),y4t=function(){function e(t,n){this.callback=t,this.observer=n}return e}();function v4t(e){return BZ.get(e)}function b4t(e,t){return e.observers.get(t)}function _4t(e,t){e.observers.delete(t.callback)}function w4t(e,t){t.unobserve()}function E4t(e,t){var n=[],r,i=v4t(e);if(!i)i=new g4t(e),BZ.set(e,i);else{var s=b4t(i,t);r=s&&s.observer}if(r)return r;if(r={},i.value=Il(e),t){r.callback=t,r.next=null;var o=function(){uH(r)},a=function(){clearTimeout(r.next),r.next=setTimeout(o)};typeof window<"u"&&(window.addEventListener("mouseup",a),window.addEventListener("keyup",a),window.addEventListener("mousedown",a),window.addEventListener("keydown",a),window.addEventListener("change",a))}return r.patches=n,r.object=e,r.unobserve=function(){uH(r),clearTimeout(r.next),_4t(i,r),typeof window<"u"&&(window.removeEventListener("mouseup",a),window.removeEventListener("keyup",a),window.removeEventListener("mousedown",a),window.removeEventListener("keydown",a),window.removeEventListener("change",a))},i.observers.set(t,new y4t(t,r)),r}function uH(e,t){t===void 0&&(t=!1);var n=BZ.get(e.object);UZ(n.value,e.object,e.patches,"",t),e.patches.length&&Y4(n.value,e.patches);var r=e.patches;return r.length>0&&(e.patches=[],e.callback&&e.callback(r)),r}function UZ(e,t,n,r,i){if(t!==e){typeof t.toJSON=="function"&&(t=t.toJSON());for(var s=sH(t),o=sH(e),a=!1,u=o.length-1;u>=0;u--){var l=o[u],c=e[l];if(iH(t,l)&&!(t[l]===void 0&&c!==void 0&&Array.isArray(t)===!1)){var f=t[l];typeof c=="object"&&c!=null&&typeof f=="object"&&f!=null&&Array.isArray(c)===Array.isArray(f)?UZ(c,f,n,r+"/"+Fv(l),i):c!==f&&(i&&n.push({op:"test",path:r+"/"+Fv(l),value:Il(c)}),n.push({op:"replace",path:r+"/"+Fv(l),value:Il(f)}))}else Array.isArray(e)===Array.isArray(t)?(i&&n.push({op:"test",path:r+"/"+Fv(l),value:Il(c)}),n.push({op:"remove",path:r+"/"+Fv(l)}),a=!0):(i&&n.push({op:"test",path:r,value:e}),n.push({op:"replace",path:r,value:t}))}if(!(!a&&s.length==o.length))for(var u=0;u<s.length;u++){var l=s[u];!iH(e,l)&&t[l]!==void 0&&n.push({op:"add",path:r+"/"+Fv(l),value:Il(t[l])})}}}function x4t(e,t,n){n===void 0&&(n=!1);var r=[];return UZ(e,t,r,"",n),r}const S4t=Object.freeze(Object.defineProperty({__proto__:null,compare:x4t,generate:uH,observe:E4t,unobserve:w4t},Symbol.toStringTag,{value:"Module"}));Object.assign({},m4t,S4t,{JsonPatchError:dOe,deepClone:Il,escapePathComponent:Fv,unescapePathComponent:fOe});var T4t=/("(?:[^\\"]|\\.)*")|[:,]/g,C4t=function(t,n){var r,i,s;return n=n||{},r=JSON.stringify([1],void 0,n.indent===void 0?2:n.indent).slice(2,-3),i=r===""?1/0:n.maxLength===void 0?80:n.maxLength,s=n.replacer,function o(a,u,l){var c,f,d,h,p,m,g,y,v,b,w,E;if(a&&typeof a.toJSON=="function"&&(a=a.toJSON()),w=JSON.stringify(a,s),w===void 0)return w;if(g=i-u.length-l,w.length<=g&&(v=w.replace(T4t,function(T,S){return S||T+" "}),v.length<=g))return v;if(s!=null&&(a=JSON.parse(w),s=void 0),typeof a=="object"&&a!==null){if(y=u+r,d=[],f=0,Array.isArray(a))for(b="[",c="]",g=a.length;f<g;f++)d.push(o(a[f],y,f===g-1?0:1)||"null");else for(b="{",c="}",m=Object.keys(a),g=m.length;f<g;f++)h=m[f],p=JSON.stringify(h)+": ",E=o(a[h],y,p.length+(f===g-1?0:1)),E!==void 0&&d.push(p+E);if(d.length>0)return[b,r+d.join(`,
`+y),c].join(`
`+u)}return w}(t,"",0)};const q9=Kl(C4t);function ul(e,t,n){return e.fields=t||[],e.fname=n,e}function Ki(e){return e==null?null:e.fname}function ga(e){return e==null?null:e.fields}function pOe(e){return e.length===1?A4t(e[0]):I4t(e)}const A4t=e=>function(t){return t[e]},I4t=e=>{const t=e.length;return function(n){for(let r=0;r<t;++r)n=n[e[r]];return n}};function Le(e){throw Error(e)}function rp(e){const t=[],n=e.length;let r=null,i=0,s="",o,a,u;e=e+"";function l(){t.push(s+e.substring(o,a)),s="",o=a+1}for(o=a=0;a<n;++a)if(u=e[a],u==="\\")s+=e.substring(o,a++),o=a;else if(u===r)l(),r=null,i=-1;else{if(r)continue;o===i&&u==='"'||o===i&&u==="'"?(o=a+1,r=u):u==="."&&!i?a>o?l():o=a+1:u==="["?(a>o&&l(),i=o=a+1):u==="]"&&(i||Le("Access path missing open bracket: "+e),i>0&&l(),i=0,o=a+1)}return i&&Le("Access path missing closing bracket: "+e),r&&Le("Access path missing closing quote: "+e),a>o&&(a++,l()),t}function Lc(e,t,n){const r=rp(e);return e=r.length===1?r[0]:e,ul((n&&n.get||pOe)(r),[e],t||e)}const fR=Lc("id"),xa=ul(e=>e,[],"identity"),Yg=ul(()=>0,[],"zero"),zS=ul(()=>1,[],"one"),Fc=ul(()=>!0,[],"true"),Cg=ul(()=>!1,[],"false");function k4t(e,t,n){const r=[t].concat([].slice.call(n));console[e].apply(console,r)}const mOe=0,zZ=1,VZ=2,gOe=3,yOe=4;function HZ(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:k4t,r=e||mOe;return{level(i){return arguments.length?(r=+i,this):r},error(){return r>=zZ&&n(t||"error","ERROR",arguments),this},warn(){return r>=VZ&&n(t||"warn","WARN",arguments),this},info(){return r>=gOe&&n(t||"log","INFO",arguments),this},debug(){return r>=yOe&&n(t||"log","DEBUG",arguments),this}}}var je=Array.isArray;function gt(e){return e===Object(e)}const _pe=e=>e!=="__proto__";function VS(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((r,i)=>{for(const s in i)if(s==="signals")r.signals=R4t(r.signals,i.signals);else{const o=s==="legend"?{layout:1}:s==="style"?!0:null;HS(r,s,i[s],o)}return r},{})}function HS(e,t,n,r){if(!_pe(t))return;let i,s;if(gt(n)&&!je(n)){s=gt(e[t])?e[t]:e[t]={};for(i in n)r&&(r===!0||r[i])?HS(s,i,n[i]):_pe(i)&&(s[i]=n[i])}else e[t]=n}function R4t(e,t){if(e==null)return t;const n={},r=[];function i(s){n[s.name]||(n[s.name]=1,r.push(s))}return t.forEach(i),e.forEach(i),r}function Qn(e){return e[e.length-1]}function ha(e){return e==null||e===""?null:+e}const vOe=e=>t=>e*Math.exp(t),bOe=e=>t=>Math.log(e*t),_Oe=e=>t=>Math.sign(t)*Math.log1p(Math.abs(t/e)),wOe=e=>t=>Math.sign(t)*Math.expm1(Math.abs(t))*e,lM=e=>t=>t<0?-Math.pow(-t,e):Math.pow(t,e);function K4(e,t,n,r){const i=n(e[0]),s=n(Qn(e)),o=(s-i)*t;return[r(i-o),r(s-o)]}function EOe(e,t){return K4(e,t,ha,xa)}function xOe(e,t){var n=Math.sign(e[0]);return K4(e,t,bOe(n),vOe(n))}function SOe(e,t,n){return K4(e,t,lM(n),lM(1/n))}function TOe(e,t,n){return K4(e,t,_Oe(n),wOe(n))}function X4(e,t,n,r,i){const s=r(e[0]),o=r(Qn(e)),a=t!=null?r(t):(s+o)/2;return[i(a+(s-a)*n),i(a+(o-a)*n)]}function qZ(e,t,n){return X4(e,t,n,ha,xa)}function WZ(e,t,n){const r=Math.sign(e[0]);return X4(e,t,n,bOe(r),vOe(r))}function cM(e,t,n,r){return X4(e,t,n,lM(r),lM(1/r))}function GZ(e,t,n,r){return X4(e,t,n,_Oe(r),wOe(r))}function COe(e){return 1+~~(new Date(e).getMonth()/3)}function AOe(e){return 1+~~(new Date(e).getUTCMonth()/3)}function pt(e){return e!=null?je(e)?e:[e]:[]}function IOe(e,t,n){let r=e[0],i=e[1],s;return i<r&&(s=i,i=r,r=s),s=i-r,s>=n-t?[t,n]:[r=Math.min(Math.max(r,t),n-s),r+s]}function _n(e){return typeof e=="function"}const N4t="descending";function YZ(e,t,n){n=n||{},t=pt(t)||[];const r=[],i=[],s={},o=n.comparator||D4t;return pt(e).forEach((a,u)=>{a!=null&&(r.push(t[u]===N4t?-1:1),i.push(a=_n(a)?a:Lc(a,null,n)),(ga(a)||[]).forEach(l=>s[l]=1))}),i.length===0?null:ul(o(i,r),Object.keys(s))}const Q4=(e,t)=>(e<t||e==null)&&t!=null?-1:(e>t||t==null)&&e!=null?1:(t=t instanceof Date?+t:t,(e=e instanceof Date?+e:e)!==e&&t===t?-1:t!==t&&e===e?1:0),D4t=(e,t)=>e.length===1?P4t(e[0],t[0]):O4t(e,t,e.length),P4t=(e,t)=>function(n,r){return Q4(e(n),e(r))*t},O4t=(e,t,n)=>(t.push(0),function(r,i){let s,o=0,a=-1;for(;o===0&&++a<n;)s=e[a],o=Q4(s(r),s(i));return o*t[a]});function Sa(e){return _n(e)?e:()=>e}function KZ(e,t){let n;return r=>{n&&clearTimeout(n),n=setTimeout(()=>(t(r),n=null),e)}}function bn(e){for(let t,n,r=1,i=arguments.length;r<i;++r){t=arguments[r];for(n in t)e[n]=t[n]}return e}function Lh(e,t){let n=0,r,i,s,o;if(e&&(r=e.length))if(t==null){for(i=e[n];n<r&&(i==null||i!==i);i=e[++n]);for(s=o=i;n<r;++n)i=e[n],i!=null&&(i<s&&(s=i),i>o&&(o=i))}else{for(i=t(e[n]);n<r&&(i==null||i!==i);i=t(e[++n]));for(s=o=i;n<r;++n)i=t(e[n]),i!=null&&(i<s&&(s=i),i>o&&(o=i))}return[s,o]}function kOe(e,t){const n=e.length;let r=-1,i,s,o,a,u;if(t==null){for(;++r<n;)if(s=e[r],s!=null&&s>=s){i=o=s;break}if(r===n)return[-1,-1];for(a=u=r;++r<n;)s=e[r],s!=null&&(i>s&&(i=s,a=r),o<s&&(o=s,u=r))}else{for(;++r<n;)if(s=t(e[r],r,e),s!=null&&s>=s){i=o=s;break}if(r===n)return[-1,-1];for(a=u=r;++r<n;)s=t(e[r],r,e),s!=null&&(i>s&&(i=s,a=r),o<s&&(o=s,u=r))}return[a,u]}const $4t=Object.prototype.hasOwnProperty;function jt(e,t){return $4t.call(e,t)}const xD={};function qS(e){let t={},n;function r(s){return jt(t,s)&&t[s]!==xD}const i={size:0,empty:0,object:t,has:r,get(s){return r(s)?t[s]:void 0},set(s,o){return r(s)||(++i.size,t[s]===xD&&--i.empty),t[s]=o,this},delete(s){return r(s)&&(--i.size,++i.empty,t[s]=xD),this},clear(){i.size=i.empty=0,i.object=t={}},test(s){return arguments.length?(n=s,i):n},clean(){const s={};let o=0;for(const a in t){const u=t[a];u!==xD&&(!n||!n(u))&&(s[a]=u,++o)}i.size=o,i.empty=0,i.object=t=s}};return e&&Object.keys(e).forEach(s=>{i.set(s,e[s])}),i}function ROe(e,t,n,r,i,s){if(!n&&n!==0)return s;const o=+n;let a=e[0],u=Qn(e),l;u<a&&(l=a,a=u,u=l),l=Math.abs(t-a);const c=Math.abs(u-t);return l<c&&l<=o?r:c<=o?i:s}function lt(e,t,n){const r=e.prototype=Object.create(t.prototype);return Object.defineProperty(r,"constructor",{value:e,writable:!0,enumerable:!0,configurable:!0}),bn(r,n)}function $w(e,t,n,r){let i=t[0],s=t[t.length-1],o;return i>s&&(o=i,i=s,s=o),n=n===void 0||n,r=r===void 0||r,(n?i<=e:i<e)&&(r?e<=s:e<s)}function Gy(e){return typeof e=="boolean"}function N0(e){return Object.prototype.toString.call(e)==="[object Date]"}function NOe(e){return e&&_n(e[Symbol.iterator])}function lr(e){return typeof e=="number"}function DOe(e){return Object.prototype.toString.call(e)==="[object RegExp]"}function mt(e){return typeof e=="string"}function XZ(e,t,n){e&&(e=t?pt(e).map(a=>a.replace(/\\(.)/g,"$1")):pt(e));const r=e&&e.length,i=n&&n.get||pOe,s=a=>i(t?[a]:rp(a));let o;if(!r)o=function(){return""};else if(r===1){const a=s(e[0]);o=function(u){return""+a(u)}}else{const a=e.map(s);o=function(u){let l=""+a[0](u),c=0;for(;++c<r;)l+="|"+a[c](u);return l}}return ul(o,e,"key")}function POe(e,t){const n=e[0],r=Qn(e),i=+t;return i?i===1?r:n+i*(r-n):n}const M4t=1e4;function OOe(e){e=+e||M4t;let t,n,r;const i=()=>{t={},n={},r=0},s=(o,a)=>(++r>e&&(n=t,t={},r=1),t[o]=a);return i(),{clear:i,has:o=>jt(t,o)||jt(n,o),get:o=>jt(t,o)?t[o]:jt(n,o)?s(o,n[o]):void 0,set:(o,a)=>jt(t,o)?t[o]=a:s(o,a)}}function $Oe(e,t,n,r){const i=t.length,s=n.length;if(!s)return t;if(!i)return n;const o=r||new t.constructor(i+s);let a=0,u=0,l=0;for(;a<i&&u<s;++l)o[l]=e(t[a],n[u])>0?n[u++]:t[a++];for(;a<i;++a,++l)o[l]=t[a];for(;u<s;++u,++l)o[l]=n[u];return o}function H2(e,t){let n="";for(;--t>=0;)n+=e;return n}function MOe(e,t,n,r){const i=n||" ",s=e+"",o=t-s.length;return o<=0?s:r==="left"?H2(i,o)+s:r==="center"?H2(i,~~(o/2))+s+H2(i,Math.ceil(o/2)):s+H2(i,o)}function dR(e){return e&&Qn(e)-e[0]||0}function rt(e){return je(e)?"["+e.map(rt)+"]":gt(e)||mt(e)?JSON.stringify(e).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):e}function QZ(e){return e==null||e===""?null:!e||e==="false"||e==="0"?!1:!!e}const L4t=e=>lr(e)||N0(e)?e:Date.parse(e);function JZ(e,t){return t=t||L4t,e==null||e===""?null:t(e)}function ZZ(e){return e==null||e===""?null:e+""}function ed(e){const t={},n=e.length;for(let r=0;r<n;++r)t[e[r]]=!0;return t}function LOe(e,t,n,r){const i=r??"",s=e+"",o=s.length,a=Math.max(0,t-i.length);return o<=t?s:n==="left"?i+s.slice(o-a):n==="center"?s.slice(0,Math.ceil(a/2))+i+s.slice(o-~~(a/2)):s.slice(0,a)+i}function $g(e,t,n){if(e)if(t){const r=e.length;for(let i=0;i<r;++i){const s=t(e[i]);s&&n(s,i,e)}}else e.forEach(n)}function F4t(e){return e}function j4t(e){if(e==null)return F4t;var t,n,r=e.scale[0],i=e.scale[1],s=e.translate[0],o=e.translate[1];return function(a,u){u||(t=n=0);var l=2,c=a.length,f=new Array(c);for(f[0]=(t+=a[0])*r+s,f[1]=(n+=a[1])*i+o;l<c;)f[l]=a[l],++l;return f}}function B4t(e,t){for(var n,r=e.length,i=r-t;i<--r;)n=e[i],e[i++]=e[r],e[r]=n}function U4t(e,t){return typeof t=="string"&&(t=e.objects[t]),t.type==="GeometryCollection"?{type:"FeatureCollection",features:t.geometries.map(function(n){return wpe(e,n)})}:wpe(e,t)}function wpe(e,t){var n=t.id,r=t.bbox,i=t.properties==null?{}:t.properties,s=FOe(e,t);return n==null&&r==null?{type:"Feature",properties:i,geometry:s}:r==null?{type:"Feature",id:n,properties:i,geometry:s}:{type:"Feature",id:n,bbox:r,properties:i,geometry:s}}function FOe(e,t){var n=j4t(e.transform),r=e.arcs;function i(c,f){f.length&&f.pop();for(var d=r[c<0?~c:c],h=0,p=d.length;h<p;++h)f.push(n(d[h],h));c<0&&B4t(f,p)}function s(c){return n(c)}function o(c){for(var f=[],d=0,h=c.length;d<h;++d)i(c[d],f);return f.length<2&&f.push(f[0]),f}function a(c){for(var f=o(c);f.length<4;)f.push(f[0]);return f}function u(c){return c.map(a)}function l(c){var f=c.type,d;switch(f){case"GeometryCollection":return{type:f,geometries:c.geometries.map(l)};case"Point":d=s(c.coordinates);break;case"MultiPoint":d=c.coordinates.map(s);break;case"LineString":d=o(c.arcs);break;case"MultiLineString":d=c.arcs.map(o);break;case"Polygon":d=u(c.arcs);break;case"MultiPolygon":d=c.arcs.map(u);break;default:return null}return{type:f,coordinates:d}}return l(t)}function z4t(e,t){var n={},r={},i={},s=[],o=-1;t.forEach(function(l,c){var f=e.arcs[l<0?~l:l],d;f.length<3&&!f[1][0]&&!f[1][1]&&(d=t[++o],t[o]=l,t[c]=d)}),t.forEach(function(l){var c=a(l),f=c[0],d=c[1],h,p;if(h=i[f])if(delete i[h.end],h.push(l),h.end=d,p=r[d]){delete r[p.start];var m=p===h?h:h.concat(p);r[m.start=h.start]=i[m.end=p.end]=m}else r[h.start]=i[h.end]=h;else if(h=r[d])if(delete r[h.start],h.unshift(l),h.start=f,p=i[f]){delete i[p.end];var g=p===h?h:p.concat(h);r[g.start=p.start]=i[g.end=h.end]=g}else r[h.start]=i[h.end]=h;else h=[l],r[h.start=f]=i[h.end=d]=h});function a(l){var c=e.arcs[l<0?~l:l],f=c[0],d;return e.transform?(d=[0,0],c.forEach(function(h){d[0]+=h[0],d[1]+=h[1]})):d=c[c.length-1],l<0?[d,f]:[f,d]}function u(l,c){for(var f in l){var d=l[f];delete c[d.start],delete d.start,delete d.end,d.forEach(function(h){n[h<0?~h:h]=1}),s.push(d)}}return u(i,r),u(r,i),t.forEach(function(l){n[l<0?~l:l]||s.push([l])}),s}function V4t(e){return FOe(e,H4t.apply(this,arguments))}function H4t(e,t,n){var r,i,s;if(arguments.length>1)r=q4t(e,t,n);else for(i=0,r=new Array(s=e.arcs.length);i<s;++i)r[i]=i;return{type:"MultiLineString",arcs:z4t(e,r)}}function q4t(e,t,n){var r=[],i=[],s;function o(f){var d=f<0?~f:f;(i[d]||(i[d]=[])).push({i:f,g:s})}function a(f){f.forEach(o)}function u(f){f.forEach(a)}function l(f){f.forEach(u)}function c(f){switch(s=f,f.type){case"GeometryCollection":f.geometries.forEach(c);break;case"LineString":a(f.arcs);break;case"MultiLineString":case"Polygon":u(f.arcs);break;case"MultiPolygon":l(f.arcs);break}}return c(t),i.forEach(n==null?function(f){r.push(f[0].i)}:function(f){n(f[0].g,f[f.length-1].g)&&r.push(f[0].i)}),r}const $o="year",nl="quarter",ya="month",$s="week",rl="date",da="day",Fh="dayofyear",Hl="hours",ql="minutes",jc="seconds",td="milliseconds",eee=[$o,nl,ya,$s,rl,da,Fh,Hl,ql,jc,td],W9=eee.reduce((e,t,n)=>(e[t]=1+n,e),{});function tee(e){const t=pt(e).slice(),n={};return t.length||Le("Missing time unit."),t.forEach(i=>{jt(W9,i)?n[i]=1:Le(`Invalid time unit: ${i}.`)}),(n[$s]||n[da]?1:0)+(n[nl]||n[ya]||n[rl]?1:0)+(n[Fh]?1:0)>1&&Le(`Incompatible time units: ${e}`),t.sort((i,s)=>W9[i]-W9[s]),t}const W4t={[$o]:"%Y ",[nl]:"Q%q ",[ya]:"%b ",[rl]:"%d ",[$s]:"W%U ",[da]:"%a ",[Fh]:"%j ",[Hl]:"%H:00",[ql]:"00:%M",[jc]:":%S",[td]:".%L",[`${$o}-${ya}`]:"%Y-%m ",[`${$o}-${ya}-${rl}`]:"%Y-%m-%d ",[`${Hl}-${ql}`]:"%H:%M"};function jOe(e,t){const n=bn({},W4t,t),r=tee(e),i=r.length;let s="",o=0,a,u;for(o=0;o<i;)for(a=r.length;a>o;--a)if(u=r.slice(o,a).join("-"),n[u]!=null){s+=n[u],o=a;break}return s.trim()}const Yv=new Date;function nee(e){return Yv.setFullYear(e),Yv.setMonth(0),Yv.setDate(1),Yv.setHours(0,0,0,0),Yv}function BOe(e){return zOe(new Date(e))}function UOe(e){return lH(new Date(e))}function zOe(e){return om.count(nee(e.getFullYear())-1,e)}function lH(e){return yS.count(nee(e.getFullYear())-1,e)}function cH(e){return nee(e).getDay()}function G4t(e,t,n,r,i,s,o){if(0<=e&&e<100){const a=new Date(-1,t,n,r,i,s,o);return a.setFullYear(e),a}return new Date(e,t,n,r,i,s,o)}function VOe(e){return qOe(new Date(e))}function HOe(e){return fH(new Date(e))}function qOe(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return x0.count(t-1,e)}function fH(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return vS.count(t-1,e)}function dH(e){return Yv.setTime(Date.UTC(e,0,1)),Yv.getUTCDay()}function Y4t(e,t,n,r,i,s,o){if(0<=e&&e<100){const a=new Date(Date.UTC(-1,t,n,r,i,s,o));return a.setUTCFullYear(n.y),a}return new Date(Date.UTC(e,t,n,r,i,s,o))}function WOe(e,t,n,r,i){const s=t||1,o=Qn(e),a=(y,v,b)=>(b=b||y,K4t(n[b],r[b],y===o&&s,v)),u=new Date,l=ed(e),c=l[$o]?a($o):Sa(2012),f=l[ya]?a(ya):l[nl]?a(nl):Yg,d=l[$s]&&l[da]?a(da,1,$s+da):l[$s]?a($s,1):l[da]?a(da,1):l[rl]?a(rl,1):l[Fh]?a(Fh,1):zS,h=l[Hl]?a(Hl):Yg,p=l[ql]?a(ql):Yg,m=l[jc]?a(jc):Yg,g=l[td]?a(td):Yg;return function(y){u.setTime(+y);const v=c(u);return i(v,f(u),d(u,v),h(u),p(u),m(u),g(u))}}function K4t(e,t,n,r){const i=n<=1?e:r?(s,o)=>r+n*Math.floor((e(s,o)-r)/n):(s,o)=>n*Math.floor(e(s,o)/n);return t?(s,o)=>t(i(s,o),o):i}function _x(e,t,n){return t+e*7-(n+6)%7}const X4t={[$o]:e=>e.getFullYear(),[nl]:e=>Math.floor(e.getMonth()/3),[ya]:e=>e.getMonth(),[rl]:e=>e.getDate(),[Hl]:e=>e.getHours(),[ql]:e=>e.getMinutes(),[jc]:e=>e.getSeconds(),[td]:e=>e.getMilliseconds(),[Fh]:e=>zOe(e),[$s]:e=>lH(e),[$s+da]:(e,t)=>_x(lH(e),e.getDay(),cH(t)),[da]:(e,t)=>_x(1,e.getDay(),cH(t))},Q4t={[nl]:e=>3*e,[$s]:(e,t)=>_x(e,0,cH(t))};function GOe(e,t){return WOe(e,t||1,X4t,Q4t,G4t)}const J4t={[$o]:e=>e.getUTCFullYear(),[nl]:e=>Math.floor(e.getUTCMonth()/3),[ya]:e=>e.getUTCMonth(),[rl]:e=>e.getUTCDate(),[Hl]:e=>e.getUTCHours(),[ql]:e=>e.getUTCMinutes(),[jc]:e=>e.getUTCSeconds(),[td]:e=>e.getUTCMilliseconds(),[Fh]:e=>qOe(e),[$s]:e=>fH(e),[da]:(e,t)=>_x(1,e.getUTCDay(),dH(t)),[$s+da]:(e,t)=>_x(fH(e),e.getUTCDay(),dH(t))},Z4t={[nl]:e=>3*e,[$s]:(e,t)=>_x(e,0,dH(t))};function YOe(e,t){return WOe(e,t||1,J4t,Z4t,Y4t)}const eFt={[$o]:Ch,[nl]:KA.every(3),[ya]:KA,[$s]:yS,[rl]:om,[da]:om,[Fh]:om,[Hl]:M6,[ql]:O6,[jc]:Xp,[td]:KE},tFt={[$o]:Ah,[nl]:XA.every(3),[ya]:XA,[$s]:vS,[rl]:x0,[da]:x0,[Fh]:x0,[Hl]:L6,[ql]:$6,[jc]:Xp,[td]:KE};function WS(e){return eFt[e]}function GS(e){return tFt[e]}function KOe(e,t,n){return e?e.offset(t,n):void 0}function XOe(e,t,n){return KOe(WS(e),t,n)}function QOe(e,t,n){return KOe(GS(e),t,n)}function JOe(e,t,n,r){return e?e.range(t,n,r):void 0}function ZOe(e,t,n,r){return JOe(WS(e),t,n,r)}function e3e(e,t,n,r){return JOe(GS(e),t,n,r)}const q2=1e3,W2=q2*60,G2=W2*60,J4=G2*24,nFt=J4*7,Epe=J4*30,hH=J4*365,t3e=[$o,ya,rl,Hl,ql,jc,td],Y2=t3e.slice(0,-1),K2=Y2.slice(0,-1),X2=K2.slice(0,-1),rFt=X2.slice(0,-1),iFt=[$o,$s],xpe=[$o,ya],n3e=[$o],GT=[[Y2,1,q2],[Y2,5,5*q2],[Y2,15,15*q2],[Y2,30,30*q2],[K2,1,W2],[K2,5,5*W2],[K2,15,15*W2],[K2,30,30*W2],[X2,1,G2],[X2,3,3*G2],[X2,6,6*G2],[X2,12,12*G2],[rFt,1,J4],[iFt,1,nFt],[xpe,1,Epe],[xpe,3,3*Epe],[n3e,1,hH]];function r3e(e){const t=e.extent,n=e.maxbins||40,r=Math.abs(dR(t))/n;let i=hS(a=>a[2]).right(GT,r),s,o;return i===GT.length?(s=n3e,o=q0(t[0]/hH,t[1]/hH,n)):i?(i=GT[r/GT[i-1][2]<GT[i][2]/r?i-1:i],s=i[0],o=i[1]):(s=t3e,o=Math.max(q0(t[0],t[1],n),1)),{units:s,step:o}}function Q2(e){const t={};return n=>t[n]||(t[n]=e(n))}function sFt(e,t){return n=>{const r=e(n),i=r.indexOf(t);if(i<0)return r;let s=oFt(r,i);const o=s<r.length?r.slice(s):"";for(;--s>i;)if(r[s]!=="0"){++s;break}return r.slice(0,s)+o}}function oFt(e,t){let n=e.lastIndexOf("e"),r;if(n>0)return n;for(n=e.length;--n>t;)if(r=e.charCodeAt(n),r>=48&&r<=57)return n+1}function i3e(e){const t=Q2(e.format),n=e.formatPrefix;return{format:t,formatPrefix:n,formatFloat(r){const i=Y1(r||",");if(i.precision==null){switch(i.precision=12,i.type){case"%":i.precision-=2;break;case"e":i.precision-=1;break}return sFt(t(i),t(".1f")(1)[1])}else return t(i)},formatSpan(r,i,s,o){o=Y1(o??",f");const a=q0(r,i,s),u=Math.max(Math.abs(r),Math.abs(i));let l;if(o.precision==null)switch(o.type){case"s":return isNaN(l=ZSe(a,u))||(o.precision=l),n(o,u);case"":case"e":case"g":case"p":case"r":{isNaN(l=eTe(a,u))||(o.precision=l-(o.type==="e"));break}case"f":case"%":{isNaN(l=JSe(a))||(o.precision=l-(o.type==="%")*2);break}}return t(o)}}}let pH;s3e();function s3e(){return pH=i3e({format:Fy,formatPrefix:RK})}function o3e(e){return i3e(QSe(e))}function fM(e){return arguments.length?pH=o3e(e):pH}function Spe(e,t,n){n=n||{},gt(n)||Le(`Invalid time multi-format specifier: ${n}`);const r=t(jc),i=t(ql),s=t(Hl),o=t(rl),a=t($s),u=t(ya),l=t(nl),c=t($o),f=e(n[td]||".%L"),d=e(n[jc]||":%S"),h=e(n[ql]||"%I:%M"),p=e(n[Hl]||"%I %p"),m=e(n[rl]||n[da]||"%a %d"),g=e(n[$s]||"%b %d"),y=e(n[ya]||"%B"),v=e(n[nl]||"%B"),b=e(n[$o]||"%Y");return w=>(r(w)<w?f:i(w)<w?d:s(w)<w?h:o(w)<w?p:u(w)<w?a(w)<w?m:g:c(w)<w?l(w)<w?y:v:b)(w)}function a3e(e){const t=Q2(e.format),n=Q2(e.utcFormat);return{timeFormat:r=>mt(r)?t(r):Spe(t,WS,r),utcFormat:r=>mt(r)?n(r):Spe(n,GS,r),timeParse:Q2(e.parse),utcParse:Q2(e.utcParse)}}let mH;u3e();function u3e(){return mH=a3e({format:VK,parse:HK,utcFormat:Xb,utcParse:h2e})}function l3e(e){return a3e(u2e(e))}function NI(e){return arguments.length?mH=l3e(e):mH}const gH=(e,t)=>bn({},e,t);function c3e(e,t){const n=e?o3e(e):fM(),r=t?l3e(t):NI();return gH(n,r)}function ree(e,t){const n=arguments.length;return n&&n!==2&&Le("defaultLocale expects either zero or two arguments."),n?gH(fM(e),NI(t)):gH(fM(),NI())}function aFt(){return s3e(),u3e(),ree()}const uFt=/^(data:|([A-Za-z]+:)?\/\/)/,lFt=/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp|file|data):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,cFt=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,Tpe="file://";function fFt(e,t){return n=>({options:n||{},sanitize:hFt,load:dFt,fileAccess:!!t,file:pFt(t),http:gFt(e)})}async function dFt(e,t){const n=await this.sanitize(e,t),r=n.href;return n.localFile?this.file(r):this.http(r,t)}async function hFt(e,t){t=bn({},this.options,t);const n=this.fileAccess,r={href:null};let i,s,o;const a=lFt.test(e.replace(cFt,""));(e==null||typeof e!="string"||!a)&&Le("Sanitize failure, invalid URI: "+rt(e));const u=uFt.test(e);return(o=t.baseURL)&&!u&&(!e.startsWith("/")&&!o.endsWith("/")&&(e="/"+e),e=o+e),s=(i=e.startsWith(Tpe))||t.mode==="file"||t.mode!=="http"&&!u&&n,i?e=e.slice(Tpe.length):e.startsWith("//")&&(t.defaultProtocol==="file"?(e=e.slice(2),s=!0):e=(t.defaultProtocol||"http")+":"+e),Object.defineProperty(r,"localFile",{value:!!s}),r.href=e,t.target&&(r.target=t.target+""),t.rel&&(r.rel=t.rel+""),t.context==="image"&&t.crossOrigin&&(r.crossOrigin=t.crossOrigin+""),r}function pFt(e){return e?t=>new Promise((n,r)=>{e.readFile(t,(i,s)=>{i?r(i):n(s)})}):mFt}async function mFt(){Le("No file system access.")}function gFt(e){return e?async function(t,n){const r=bn({},this.options.http,n),i=n&&n.response,s=await e(t,r);return s.ok?_n(s[i])?s[i]():s.text():Le(s.status+""+s.statusText)}:yFt}async function yFt(){Le("No HTTP fetch method available.")}const vFt=e=>e!=null&&e===e,bFt=e=>e==="true"||e==="false"||e===!0||e===!1,_Ft=e=>!Number.isNaN(Date.parse(e)),f3e=e=>!Number.isNaN(+e)&&!(e instanceof Date),wFt=e=>f3e(e)&&Number.isInteger(+e),yH={boolean:QZ,integer:ha,number:ha,date:JZ,string:ZZ,unknown:xa},SD=[bFt,wFt,f3e,_Ft],EFt=["boolean","integer","number","date"];function d3e(e,t){if(!e||!e.length)return"unknown";const n=e.length,r=SD.length,i=SD.map((s,o)=>o+1);for(let s=0,o=0,a,u;s<n;++s)for(u=t?e[s][t]:e[s],a=0;a<r;++a)if(i[a]&&vFt(u)&&!SD[a](u)&&(i[a]=0,++o,o===SD.length))return"string";return EFt[i.reduce((s,o)=>s===0?o:s,0)-1]}function h3e(e,t){return t.reduce((n,r)=>(n[r]=d3e(e,r),n),{})}function Cpe(e){const t=function(n,r){const i={delimiter:e};return iee(n,r?bn(r,i):i)};return t.responseType="text",t}function iee(e,t){return t.header&&(e=t.header.map(rt).join(t.delimiter)+`
`+e),YSe(t.delimiter).parse(e+"")}iee.responseType="text";function xFt(e){return typeof Buffer=="function"&&_n(Buffer.isBuffer)?Buffer.isBuffer(e):!1}function see(e,t){const n=t&&t.property?Lc(t.property):xa;return gt(e)&&!xFt(e)?SFt(n(e),t):n(JSON.parse(e))}see.responseType="json";function SFt(e,t){return!je(e)&&NOe(e)&&(e=[...e]),t&&t.copy?JSON.parse(JSON.stringify(e)):e}const TFt={interior:(e,t)=>e!==t,exterior:(e,t)=>e===t};function p3e(e,t){let n,r,i,s;return e=see(e,t),t&&t.feature?(n=U4t,i=t.feature):t&&t.mesh?(n=V4t,i=t.mesh,s=TFt[t.filter]):Le("Missing TopoJSON feature or mesh parameter."),r=(r=e.objects[i])?n(e,r,s):Le("Invalid TopoJSON object: "+i),r&&r.features||[r]}p3e.responseType="json";const GP={dsv:iee,csv:Cpe(","),tsv:Cpe("	"),json:see,topojson:p3e};function oee(e,t){return arguments.length>1?(GP[e]=t,this):jt(GP,e)?GP[e]:null}function m3e(e){const t=oee(e);return t&&t.responseType||"text"}function g3e(e,t,n,r){t=t||{};const i=oee(t.type||"json");return i||Le("Unknown data format type: "+t.type),e=i(e,t),t.parse&&CFt(e,t.parse,n,r),jt(e,"columns")&&delete e.columns,e}function CFt(e,t,n,r){if(!e.length)return;const i=NI();n=n||i.timeParse,r=r||i.utcParse;let s=e.columns||Object.keys(e[0]),o,a,u,l,c,f;t==="auto"&&(t=h3e(e,s)),s=Object.keys(t);const d=s.map(h=>{const p=t[h];let m,g;if(p&&(p.startsWith("date:")||p.startsWith("utc:")))return m=p.split(/:(.+)?/,2),g=m[1],(g[0]==="'"&&g[g.length-1]==="'"||g[0]==='"'&&g[g.length-1]==='"')&&(g=g.slice(1,-1)),(m[0]==="utc"?r:n)(g);if(!yH[p])throw Error("Illegal format pattern: "+h+":"+p);return yH[p]});for(u=0,c=e.length,f=s.length;u<c;++u)for(o=e[u],l=0;l<f;++l)a=s[l],o[a]=d[l](o[a])}const Z4=fFt(typeof fetch<"u"&&fetch,null);function eF(e){const t=e||xa,n=[],r={};return n.add=i=>{const s=t(i);return r[s]||(r[s]=1,n.push(i)),n},n.remove=i=>{const s=t(i);if(r[s]){r[s]=0;const o=n.indexOf(i);o>=0&&n.splice(o,1)}return n},n}async function YP(e,t){try{await t(e)}catch(n){e.error(n)}}const y3e=Symbol("vega_id");let AFt=1;function tF(e){return!!(e&&Lt(e))}function Lt(e){return e[y3e]}function v3e(e,t){return e[y3e]=t,e}function Er(e){const t=e===Object(e)?e:{data:e};return Lt(t)?t:v3e(t,AFt++)}function aee(e){return nF(e,Er({}))}function nF(e,t){for(const n in e)t[n]=e[n];return t}function b3e(e,t){return v3e(t,Lt(e))}function r_(e,t){return e?t?(n,r)=>e(n,r)||Lt(t(n))-Lt(t(r)):(n,r)=>e(n,r)||Lt(n)-Lt(r):null}function _3e(e){return e&&e.constructor===i_}function i_(){const e=[],t=[],n=[],r=[],i=[];let s=null,o=!1;return{constructor:i_,insert(a){const u=pt(a),l=u.length;for(let c=0;c<l;++c)e.push(u[c]);return this},remove(a){const u=_n(a)?r:t,l=pt(a),c=l.length;for(let f=0;f<c;++f)u.push(l[f]);return this},modify(a,u,l){const c={field:u,value:Sa(l)};return _n(a)?(c.filter=a,i.push(c)):(c.tuple=a,n.push(c)),this},encode(a,u){return _n(a)?i.push({filter:a,field:u}):n.push({tuple:a,field:u}),this},clean(a){return s=a,this},reflow(){return o=!0,this},pulse(a,u){const l={},c={};let f,d,h,p,m,g;for(f=0,d=u.length;f<d;++f)l[Lt(u[f])]=1;for(f=0,d=t.length;f<d;++f)m=t[f],l[Lt(m)]=-1;for(f=0,d=r.length;f<d;++f)p=r[f],u.forEach(v=>{p(v)&&(l[Lt(v)]=-1)});for(f=0,d=e.length;f<d;++f)m=e[f],g=Lt(m),l[g]?l[g]=1:a.add.push(Er(e[f]));for(f=0,d=u.length;f<d;++f)m=u[f],l[Lt(m)]<0&&a.rem.push(m);function y(v,b,w){w?v[b]=w(v):a.encode=b,o||(c[Lt(v)]=v)}for(f=0,d=n.length;f<d;++f)h=n[f],m=h.tuple,p=h.field,g=l[Lt(m)],g>0&&(y(m,p,h.value),a.modifies(p));for(f=0,d=i.length;f<d;++f)h=i[f],p=h.filter,u.forEach(v=>{p(v)&&l[Lt(v)]>0&&y(v,h.field,h.value)}),a.modifies(h.field);if(o)a.mod=t.length||r.length?u.filter(v=>l[Lt(v)]>0):u.slice();else for(g in c)a.mod.push(c[g]);return(s||s==null&&(t.length||r.length))&&a.clean(!0),a}}}const KP="_:mod:_";function rF(){Object.defineProperty(this,KP,{writable:!0,value:{}})}rF.prototype={set(e,t,n,r){const i=this,s=i[e],o=i[KP];return t!=null&&t>=0?(s[t]!==n||r)&&(s[t]=n,o[t+":"+e]=-1,o[e]=-1):(s!==n||r)&&(i[e]=n,o[e]=je(n)?1+n.length:-1),i},modified(e,t){const n=this[KP];if(arguments.length){if(je(e)){for(let r=0;r<e.length;++r)if(n[e[r]])return!0;return!1}}else{for(const r in n)if(n[r])return!0;return!1}return t!=null&&t>=0?t+1<n[e]||!!n[t+":"+e]:!!n[e]},clear(){return this[KP]={},this}};let IFt=0;const kFt="pulse",RFt=new rF,NFt=1,DFt=2;function Kr(e,t,n,r){this.id=++IFt,this.value=e,this.stamp=-1,this.rank=-1,this.qrank=-1,this.flags=0,t&&(this._update=t),n&&this.parameters(n,r)}function Ape(e){return function(t){const n=this.flags;return arguments.length===0?!!(n&e):(this.flags=t?n|e:n&~e,this)}}Kr.prototype={targets(){return this._targets||(this._targets=eF(fR))},set(e){return this.value!==e?(this.value=e,1):0},skip:Ape(NFt),modified:Ape(DFt),parameters(e,t,n){t=t!==!1;const r=this._argval=this._argval||new rF,i=this._argops=this._argops||[],s=[];let o,a,u,l;const c=(f,d,h)=>{h instanceof Kr?(h!==this&&(t&&h.targets().add(this),s.push(h)),i.push({op:h,name:f,index:d})):r.set(f,d,h)};for(o in e)if(a=e[o],o===kFt)pt(a).forEach(f=>{f instanceof Kr?f!==this&&(f.targets().add(this),s.push(f)):Le("Pulse parameters must be operator instances.")}),this.source=a;else if(je(a))for(r.set(o,-1,Array(u=a.length)),l=0;l<u;++l)c(o,l,a[l]);else c(o,-1,a);return this.marshall().clear(),n&&(i.initonly=!0),s},marshall(e){const t=this._argval||RFt,n=this._argops;let r,i,s,o;if(n){const a=n.length;for(i=0;i<a;++i)r=n[i],s=r.op,o=s.modified()&&s.stamp===e,t.set(r.name,r.index,s.value,o);if(n.initonly){for(i=0;i<a;++i)r=n[i],r.op.targets().remove(this);this._argops=null,this._update=null}}return t},detach(){const e=this._argops;let t,n,r,i;if(e)for(t=0,n=e.length;t<n;++t)r=e[t],i=r.op,i._targets&&i._targets.remove(this);this.pulse=null,this.source=null},evaluate(e){const t=this._update;if(t){const n=this.marshall(e.stamp),r=t.call(this,n,e);if(n.clear(),r!==this.value)this.value=r;else if(!this.modified())return e.StopPropagation}},run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?(this.skip(!1),t=0):t=this.evaluate(e),this.pulse=t||e}};function PFt(e,t,n,r){let i=1,s;return e instanceof Kr?s=e:e&&e.prototype instanceof Kr?s=new e:_n(e)?s=new Kr(null,e):(i=0,s=new Kr(e,t)),this.rank(s),i&&(r=n,n=t),n&&this.connect(s,s.parameters(n,r)),this.touch(s),s}function OFt(e,t){const n=e.rank,r=t.length;for(let i=0;i<r;++i)if(n<t[i].rank){this.rerank(e);return}}let $Ft=0;function iF(e,t,n){this.id=++$Ft,this.value=null,n&&(this.receive=n),e&&(this._filter=e),t&&(this._apply=t)}function Ag(e,t,n){return new iF(e,t,n)}iF.prototype={_filter:Fc,_apply:xa,targets(){return this._targets||(this._targets=eF(fR))},consume(e){return arguments.length?(this._consume=!!e,this):!!this._consume},receive(e){if(this._filter(e)){const t=this.value=this._apply(e),n=this._targets,r=n?n.length:0;for(let i=0;i<r;++i)n[i].receive(t);this._consume&&(e.preventDefault(),e.stopPropagation())}},filter(e){const t=Ag(e);return this.targets().add(t),t},apply(e){const t=Ag(null,e);return this.targets().add(t),t},merge(){const e=Ag();this.targets().add(e);for(let t=0,n=arguments.length;t<n;++t)arguments[t].targets().add(e);return e},throttle(e){let t=-1;return this.filter(()=>{const n=Date.now();return n-t>e?(t=n,1):0})},debounce(e){const t=Ag();return this.targets().add(Ag(null,null,KZ(e,n=>{const r=n.dataflow;t.receive(n),r&&r.run&&r.run()}))),t},between(e,t){let n=!1;return e.targets().add(Ag(null,null,()=>n=!0)),t.targets().add(Ag(null,null,()=>n=!1)),this.filter(()=>n)},detach(){this._filter=Fc,this._targets=null}};function MFt(e,t,n,r){const i=this,s=Ag(n,r),o=function(l){l.dataflow=i;try{s.receive(l)}catch(c){i.error(c)}finally{i.run()}};let a;typeof e=="string"&&typeof document<"u"?a=document.querySelectorAll(e):a=pt(e);const u=a.length;for(let l=0;l<u;++l)a[l].addEventListener(t,o);return s}function LFt(e,t){const n=this.locale();return g3e(e,t,n.timeParse,n.utcParse)}function FFt(e,t,n){return t=this.parse(t,n),this.pulse(e,this.changeset().insert(t))}async function jFt(e,t){const n=this;let r=0,i;try{i=await n.loader().load(e,{context:"dataflow",response:m3e(t&&t.type)});try{i=n.parse(i,t)}catch(s){r=-2,n.warn("Data ingestion failed",e,s)}}catch(s){r=-1,n.warn("Loading failed",e,s)}return{data:i,status:r}}async function BFt(e,t,n){const r=this,i=r._pending||UFt(r);i.requests+=1;const s=await r.request(t,n);return r.pulse(e,r.changeset().remove(Fc).insert(s.data||[])),i.done(),s}function UFt(e){let t;const n=new Promise(r=>t=r);return n.requests=0,n.done=()=>{--n.requests===0&&(e._pending=null,t(e))},e._pending=n}const zFt={skip:!0};function VFt(e,t,n,r,i){return(e instanceof Kr?qFt:HFt)(this,e,t,n,r,i),this}function HFt(e,t,n,r,i,s){const o=bn({},s,zFt);let a,u;_n(n)||(n=Sa(n)),r===void 0?a=l=>e.touch(n(l)):_n(r)?(u=new Kr(null,r,i,!1),a=l=>{u.evaluate(l);const c=n(l),f=u.value;_3e(f)?e.pulse(c,f,s):e.update(c,f,o)}):a=l=>e.update(n(l),r,o),t.apply(a)}function qFt(e,t,n,r,i,s){if(r===void 0)t.targets().add(n);else{const o=s||{},a=new Kr(null,WFt(n,r),i,!1);a.modified(o.force),a.rank=t.rank,t.targets().add(a),n&&(a.skip(!0),a.value=n.value,a.targets().add(n),e.connect(n,[a]))}}function WFt(e,t){return t=_n(t)?t:Sa(t),e?function(n,r){const i=t(n,r);return e.skip()||(e.skip(i!==this.value).value=i),i}:t}function GFt(e){e.rank=++this._rank}function YFt(e){const t=[e];let n,r,i;for(;t.length;)if(this.rank(n=t.pop()),r=n._targets)for(i=r.length;--i>=0;)t.push(n=r[i]),n===e&&Le("Cycle detected in dataflow graph.")}const dM={},Md=1,Mg=2,Rp=4,KFt=Md|Mg,Ipe=Md|Rp,U_=Md|Mg|Rp,kpe=8,YT=16,Rpe=32,Npe=64;function D0(e,t,n){this.dataflow=e,this.stamp=t??-1,this.add=[],this.rem=[],this.mod=[],this.fields=null,this.encode=n||null}function G9(e,t){const n=[];return $g(e,t,r=>n.push(r)),n}function Dpe(e,t){const n={};return e.visit(t,r=>{n[Lt(r)]=1}),r=>n[Lt(r)]?null:r}function TD(e,t){return e?(n,r)=>e(n,r)&&t(n,r):t}D0.prototype={StopPropagation:dM,ADD:Md,REM:Mg,MOD:Rp,ADD_REM:KFt,ADD_MOD:Ipe,ALL:U_,REFLOW:kpe,SOURCE:YT,NO_SOURCE:Rpe,NO_FIELDS:Npe,fork(e){return new D0(this.dataflow).init(this,e)},clone(){const e=this.fork(U_);return e.add=e.add.slice(),e.rem=e.rem.slice(),e.mod=e.mod.slice(),e.source&&(e.source=e.source.slice()),e.materialize(U_|YT)},addAll(){let e=this;return!e.source||e.add===e.rem||!e.rem.length&&e.source.length===e.add.length||(e=new D0(this.dataflow).init(this),e.add=e.source,e.rem=[]),e},init(e,t){const n=this;return n.stamp=e.stamp,n.encode=e.encode,e.fields&&!(t&Npe)&&(n.fields=e.fields),t&Md?(n.addF=e.addF,n.add=e.add):(n.addF=null,n.add=[]),t&Mg?(n.remF=e.remF,n.rem=e.rem):(n.remF=null,n.rem=[]),t&Rp?(n.modF=e.modF,n.mod=e.mod):(n.modF=null,n.mod=[]),t&Rpe?(n.srcF=null,n.source=null):(n.srcF=e.srcF,n.source=e.source,e.cleans&&(n.cleans=e.cleans)),n},runAfter(e){this.dataflow.runAfter(e)},changed(e){const t=e||U_;return t&Md&&this.add.length||t&Mg&&this.rem.length||t&Rp&&this.mod.length},reflow(e){if(e)return this.fork(U_).reflow();const t=this.add.length,n=this.source&&this.source.length;return n&&n!==t&&(this.mod=this.source,t&&this.filter(Rp,Dpe(this,Md))),this},clean(e){return arguments.length?(this.cleans=!!e,this):this.cleans},modifies(e){const t=this.fields||(this.fields={});return je(e)?e.forEach(n=>t[n]=!0):t[e]=!0,this},modified(e,t){const n=this.fields;return(t||this.mod.length)&&n?arguments.length?je(e)?e.some(r=>n[r]):n[e]:!!n:!1},filter(e,t){const n=this;return e&Md&&(n.addF=TD(n.addF,t)),e&Mg&&(n.remF=TD(n.remF,t)),e&Rp&&(n.modF=TD(n.modF,t)),e&YT&&(n.srcF=TD(n.srcF,t)),n},materialize(e){e=e||U_;const t=this;return e&Md&&t.addF&&(t.add=G9(t.add,t.addF),t.addF=null),e&Mg&&t.remF&&(t.rem=G9(t.rem,t.remF),t.remF=null),e&Rp&&t.modF&&(t.mod=G9(t.mod,t.modF),t.modF=null),e&YT&&t.srcF&&(t.source=t.source.filter(t.srcF),t.srcF=null),t},visit(e,t){const n=this,r=t;if(e&YT)return $g(n.source,n.srcF,r),n;e&Md&&$g(n.add,n.addF,r),e&Mg&&$g(n.rem,n.remF,r),e&Rp&&$g(n.mod,n.modF,r);const i=n.source;if(e&kpe&&i){const s=n.add.length+n.mod.length;s===i.length||(s?$g(i,Dpe(n,Ipe),r):$g(i,n.srcF,r))}return n}};function uee(e,t,n,r){const i=this;let s=0;this.dataflow=e,this.stamp=t,this.fields=null,this.encode=r||null,this.pulses=n;for(const o of n)if(o.stamp===t){if(o.fields){const a=i.fields||(i.fields={});for(const u in o.fields)a[u]=1}o.changed(i.ADD)&&(s|=i.ADD),o.changed(i.REM)&&(s|=i.REM),o.changed(i.MOD)&&(s|=i.MOD)}this.changes=s}lt(uee,D0,{fork(e){const t=new D0(this.dataflow).init(this,e&this.NO_FIELDS);return e!==void 0&&(e&t.ADD&&this.visit(t.ADD,n=>t.add.push(n)),e&t.REM&&this.visit(t.REM,n=>t.rem.push(n)),e&t.MOD&&this.visit(t.MOD,n=>t.mod.push(n))),t},changed(e){return this.changes&e},modified(e){const t=this,n=t.fields;return n&&t.changes&t.MOD?je(e)?e.some(r=>n[r]):n[e]:0},filter(){Le("MultiPulse does not support filtering.")},materialize(){Le("MultiPulse does not support materialization.")},visit(e,t){const n=this,r=n.pulses,i=r.length;let s=0;if(e&n.SOURCE)for(;s<i;++s)r[s].visit(e,t);else for(;s<i;++s)r[s].stamp===n.stamp&&r[s].visit(e,t);return n}});async function XFt(e,t,n){const r=this,i=[];if(r._pulse)return w3e(r);if(r._pending&&await r._pending,t&&await YP(r,t),!r._touched.length)return r.debug("Dataflow invoked, but nothing to do."),r;const s=++r._clock;r._pulse=new D0(r,s,e),r._touched.forEach(c=>r._enqueue(c,!0)),r._touched=eF(fR);let o=0,a,u,l;try{for(;r._heap.size()>0;){if(a=r._heap.pop(),a.rank!==a.qrank){r._enqueue(a,!0);continue}u=a.run(r._getPulse(a,e)),u.then?u=await u:u.async&&(i.push(u.async),u=dM),u!==dM&&a._targets&&a._targets.forEach(c=>r._enqueue(c)),++o}}catch(c){r._heap.clear(),l=c}if(r._input={},r._pulse=null,r.debug(`Pulse ${s}: ${o} operators`),l&&(r._postrun=[],r.error(l)),r._postrun.length){const c=r._postrun.sort((f,d)=>d.priority-f.priority);r._postrun=[];for(let f=0;f<c.length;++f)await YP(r,c[f].callback)}return n&&await YP(r,n),i.length&&Promise.all(i).then(c=>r.runAsync(null,()=>{c.forEach(f=>{try{f(r)}catch(d){r.error(d)}})})),r}async function QFt(e,t,n){for(;this._running;)await this._running;const r=()=>this._running=null;return(this._running=this.evaluate(e,t,n)).then(r,r),this._running}function JFt(e,t,n){return this._pulse?w3e(this):(this.evaluate(e,t,n),this)}function ZFt(e,t,n){if(this._pulse||t)this._postrun.push({priority:n||0,callback:e});else try{e(this)}catch(r){this.error(r)}}function w3e(e){return e.error("Dataflow already running. Use runAsync() to chain invocations."),e}function e5t(e,t){const n=e.stamp<this._clock;n&&(e.stamp=this._clock),(n||t)&&(e.qrank=e.rank,this._heap.push(e))}function t5t(e,t){const n=e.source,r=this._clock;return n&&je(n)?new uee(this,r,n.map(i=>i.pulse),t):this._input[e.id]||n5t(this._pulse,n&&n.pulse)}function n5t(e,t){return t&&t.stamp===e.stamp?t:(e=e.fork(),t&&t!==dM&&(e.source=t.source),e)}const lee={skip:!1,force:!1};function r5t(e,t){const n=t||lee;return this._pulse?this._enqueue(e):this._touched.add(e),n.skip&&e.skip(!0),this}function i5t(e,t,n){const r=n||lee;return(e.set(t)||r.force)&&this.touch(e,r),this}function s5t(e,t,n){this.touch(e,n||lee);const r=new D0(this,this._clock+(this._pulse?0:1)),i=e.pulse&&e.pulse.source||[];return r.target=e,this._input[e.id]=t.pulse(r,i),this}function o5t(e){let t=[];return{clear:()=>t=[],size:()=>t.length,peek:()=>t[0],push:n=>(t.push(n),E3e(t,0,t.length-1,e)),pop:()=>{const n=t.pop();let r;return t.length?(r=t[0],t[0]=n,a5t(t,0,e)):r=n,r}}}function E3e(e,t,n,r){let i,s;const o=e[n];for(;n>t;){if(s=n-1>>1,i=e[s],r(o,i)<0){e[n]=i,n=s;continue}break}return e[n]=o}function a5t(e,t,n){const r=t,i=e.length,s=e[t];let o=(t<<1)+1,a;for(;o<i;)a=o+1,a<i&&n(e[o],e[a])>=0&&(o=a),e[t]=e[o],t=o,o=(t<<1)+1;return e[t]=s,E3e(e,r,t,n)}function yE(){this.logger(HZ()),this.logLevel(zZ),this._clock=0,this._rank=0,this._locale=ree();try{this._loader=Z4()}catch{}this._touched=eF(fR),this._input={},this._pulse=null,this._heap=o5t((e,t)=>e.qrank-t.qrank),this._postrun=[]}function KT(e){return function(){return this._log[e].apply(this,arguments)}}yE.prototype={stamp(){return this._clock},loader(e){return arguments.length?(this._loader=e,this):this._loader},locale(e){return arguments.length?(this._locale=e,this):this._locale},logger(e){return arguments.length?(this._log=e,this):this._log},error:KT("error"),warn:KT("warn"),info:KT("info"),debug:KT("debug"),logLevel:KT("level"),cleanThreshold:1e4,add:PFt,connect:OFt,rank:GFt,rerank:YFt,pulse:s5t,touch:r5t,update:i5t,changeset:i_,ingest:FFt,parse:LFt,preload:BFt,request:jFt,events:MFt,on:VFt,evaluate:XFt,run:JFt,runAsync:QFt,runAfter:ZFt,_enqueue:e5t,_getPulse:t5t};function De(e,t){Kr.call(this,e,null,t)}lt(De,Kr,{run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?this.skip(!1):t=this.evaluate(e),t=t||e,t.then?t=t.then(n=>this.pulse=n):t!==e.StopPropagation&&(this.pulse=t),t},evaluate(e){const t=this.marshall(e.stamp),n=this.transform(t,e);return t.clear(),n},transform(){}});const wx={};function x3e(e){const t=S3e(e);return t&&t.Definition||null}function S3e(e){return e=e&&e.toLowerCase(),jt(wx,e)?wx[e]:null}function*T3e(e,t){if(t==null)for(let n of e)n!=null&&n!==""&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)r=t(r,++n,e),r!=null&&r!==""&&(r=+r)>=r&&(yield r)}}function cee(e,t,n){const r=Float64Array.from(T3e(e,n));return r.sort(im),t.map(i=>Kxe(r,i))}function fee(e,t){return cee(e,[.25,.5,.75],t)}function dee(e,t){const n=e.length,r=Oat(e,t),i=fee(e,t),s=(i[2]-i[0])/1.34;return 1.06*(Math.min(r,s)||r||Math.abs(i[0])||1)*Math.pow(n,-.2)}function C3e(e){const t=e.maxbins||20,n=e.base||10,r=Math.log(n),i=e.divide||[5,2];let s=e.extent[0],o=e.extent[1],a,u,l,c,f,d;const h=e.span||o-s||Math.abs(s)||1;if(e.step)a=e.step;else if(e.steps){for(c=h/t,f=0,d=e.steps.length;f<d&&e.steps[f]<c;++f);a=e.steps[Math.max(0,f-1)]}else{for(u=Math.ceil(Math.log(t)/r),l=e.minstep||0,a=Math.max(l,Math.pow(n,Math.round(Math.log(h)/r)-u));Math.ceil(h/a)>t;)a*=n;for(f=0,d=i.length;f<d;++f)c=a/i[f],c>=l&&h/c<=t&&(a=c)}c=Math.log(a);const p=c>=0?0:~~(-c/r)+1,m=Math.pow(n,-p-1);return(e.nice||e.nice===void 0)&&(c=Math.floor(s/a+m)*a,s=s<c?c-a:c,o=Math.ceil(o/a)*a),{start:s,stop:o===s?s+a:o,step:a}}var Bc=Math.random;function u5t(e){Bc=e}function A3e(e,t,n,r){if(!e.length)return[void 0,void 0];const i=Float64Array.from(T3e(e,r)),s=i.length,o=t;let a,u,l,c;for(l=0,c=Array(o);l<o;++l){for(a=0,u=0;u<s;++u)a+=i[~~(Bc()*s)];c[l]=a/s}return c.sort(im),[jA(c,n/2),jA(c,1-n/2)]}function I3e(e,t,n,r){r=r||(d=>d);const i=e.length,s=new Float64Array(i);let o=0,a=1,u=r(e[0]),l=u,c=u+t,f;for(;a<i;++a){if(f=r(e[a]),f>=c){for(l=(u+l)/2;o<a;++o)s[o]=l;c=f+t,u=f}l=f}for(l=(u+l)/2;o<a;++o)s[o]=l;return n?l5t(s,t+t/4):s}function l5t(e,t){const n=e.length;let r=0,i=1,s,o;for(;e[r]===e[i];)++i;for(;i<n;){for(s=i+1;e[i]===e[s];)++s;if(e[i]-e[i-1]<t){for(o=i+(r+s-i-i>>1);o<i;)e[o++]=e[i];for(;o>i;)e[o--]=e[r]}r=i,i=s}return e}function c5t(e){return function(){return e=(1103515245*e+12345)%2147483647,e/2147483647}}function f5t(e,t){t==null&&(t=e,e=0);let n,r,i;const s={min(o){return arguments.length?(n=o||0,i=r-n,s):n},max(o){return arguments.length?(r=o||0,i=r-n,s):r},sample(){return n+Math.floor(i*Bc())},pdf(o){return o===Math.floor(o)&&o>=n&&o<r?1/i:0},cdf(o){const a=Math.floor(o);return a<n?0:a>=r?1:(a-n+1)/i},icdf(o){return o>=0&&o<=1?n-1+Math.floor(o*i):NaN}};return s.min(e).max(t)}const k3e=Math.sqrt(2*Math.PI),d5t=Math.SQRT2;let XT=NaN;function sF(e,t){e=e||0,t=t??1;let n=0,r=0,i,s;if(XT===XT)n=XT,XT=NaN;else{do n=Bc()*2-1,r=Bc()*2-1,i=n*n+r*r;while(i===0||i>1);s=Math.sqrt(-2*Math.log(i)/i),n*=s,XT=r*s}return e+n*t}function hee(e,t,n){n=n??1;const r=(e-(t||0))/n;return Math.exp(-.5*r*r)/(n*k3e)}function oF(e,t,n){t=t||0,n=n??1;const r=(e-t)/n,i=Math.abs(r);let s;if(i>37)s=0;else{const o=Math.exp(-i*i/2);let a;i<7.07106781186547?(a=.0352624965998911*i+.700383064443688,a=a*i+6.37396220353165,a=a*i+33.912866078383,a=a*i+112.079291497871,a=a*i+221.213596169931,a=a*i+220.206867912376,s=o*a,a=.0883883476483184*i+1.75566716318264,a=a*i+16.064177579207,a=a*i+86.7807322029461,a=a*i+296.564248779674,a=a*i+637.333633378831,a=a*i+793.826512519948,a=a*i+440.413735824752,s=s/a):(a=i+.65,a=i+4/a,a=i+3/a,a=i+2/a,a=i+1/a,s=o/a/2.506628274631)}return r>0?1-s:s}function aF(e,t,n){return e<0||e>1?NaN:(t||0)+(n??1)*d5t*h5t(2*e-1)}function h5t(e){let t=-Math.log((1-e)*(1+e)),n;return t<6.25?(t-=3.125,n=-364441206401782e-35,n=-16850591381820166e-35+n*t,n=128584807152564e-32+n*t,n=11157877678025181e-33+n*t,n=-1333171662854621e-31+n*t,n=20972767875968562e-33+n*t,n=6637638134358324e-30+n*t,n=-4054566272975207e-29+n*t,n=-8151934197605472e-29+n*t,n=26335093153082323e-28+n*t,n=-12975133253453532e-27+n*t,n=-5415412054294628e-26+n*t,n=10512122733215323e-25+n*t,n=-4112633980346984e-24+n*t,n=-29070369957882005e-24+n*t,n=42347877827932404e-23+n*t,n=-13654692000834679e-22+n*t,n=-13882523362786469e-21+n*t,n=.00018673420803405714+n*t,n=-.000740702534166267+n*t,n=-.006033670871430149+n*t,n=.24015818242558962+n*t,n=1.6536545626831027+n*t):t<16?(t=Math.sqrt(t)-3.25,n=22137376921775787e-25,n=9075656193888539e-23+n*t,n=-27517406297064545e-23+n*t,n=18239629214389228e-24+n*t,n=15027403968909828e-22+n*t,n=-4013867526981546e-21+n*t,n=29234449089955446e-22+n*t,n=12475304481671779e-21+n*t,n=-47318229009055734e-21+n*t,n=6828485145957318e-20+n*t,n=24031110387097894e-21+n*t,n=-.0003550375203628475+n*t,n=.0009532893797373805+n*t,n=-.0016882755560235047+n*t,n=.002491442096107851+n*t,n=-.003751208507569241+n*t,n=.005370914553590064+n*t,n=1.0052589676941592+n*t,n=3.0838856104922208+n*t):Number.isFinite(t)?(t=Math.sqrt(t)-5,n=-27109920616438573e-27,n=-2555641816996525e-25+n*t,n=15076572693500548e-25+n*t,n=-3789465440126737e-24+n*t,n=761570120807834e-23+n*t,n=-1496002662714924e-23+n*t,n=2914795345090108e-23+n*t,n=-6771199775845234e-23+n*t,n=22900482228026655e-23+n*t,n=-99298272942317e-20+n*t,n=4526062597223154e-21+n*t,n=-1968177810553167e-20+n*t,n=7599527703001776e-20+n*t,n=-.00021503011930044477+n*t,n=-.00013871931833623122+n*t,n=1.0103004648645344+n*t,n=4.849906401408584+n*t):n=1/0,n*e}function pee(e,t){let n,r;const i={mean(s){return arguments.length?(n=s||0,i):n},stdev(s){return arguments.length?(r=s??1,i):r},sample:()=>sF(n,r),pdf:s=>hee(s,n,r),cdf:s=>oF(s,n,r),icdf:s=>aF(s,n,r)};return i.mean(e).stdev(t)}function mee(e,t){const n=pee();let r=0;const i={data(s){return arguments.length?(e=s,r=s?s.length:0,i.bandwidth(t)):e},bandwidth(s){return arguments.length?(t=s,!t&&e&&(t=dee(e)),i):t},sample(){return e[~~(Bc()*r)]+t*n.sample()},pdf(s){let o=0,a=0;for(;a<r;++a)o+=n.pdf((s-e[a])/t);return o/t/r},cdf(s){let o=0,a=0;for(;a<r;++a)o+=n.cdf((s-e[a])/t);return o/r},icdf(){throw Error("KDE icdf not supported.")}};return i.data(e)}function gee(e,t){return e=e||0,t=t??1,Math.exp(e+sF()*t)}function yee(e,t,n){if(e<=0)return 0;t=t||0,n=n??1;const r=(Math.log(e)-t)/n;return Math.exp(-.5*r*r)/(n*k3e*e)}function vee(e,t,n){return oF(Math.log(e),t,n)}function bee(e,t,n){return Math.exp(aF(e,t,n))}function R3e(e,t){let n,r;const i={mean(s){return arguments.length?(n=s||0,i):n},stdev(s){return arguments.length?(r=s??1,i):r},sample:()=>gee(n,r),pdf:s=>yee(s,n,r),cdf:s=>vee(s,n,r),icdf:s=>bee(s,n,r)};return i.mean(e).stdev(t)}function N3e(e,t){let n=0,r;function i(o){const a=[];let u=0,l;for(l=0;l<n;++l)u+=a[l]=o[l]==null?1:+o[l];for(l=0;l<n;++l)a[l]/=u;return a}const s={weights(o){return arguments.length?(r=i(t=o||[]),s):t},distributions(o){return arguments.length?(o?(n=o.length,e=o):(n=0,e=[]),s.weights(t)):e},sample(){const o=Bc();let a=e[n-1],u=r[0],l=0;for(;l<n-1;u+=r[++l])if(o<u){a=e[l];break}return a.sample()},pdf(o){let a=0,u=0;for(;u<n;++u)a+=r[u]*e[u].pdf(o);return a},cdf(o){let a=0,u=0;for(;u<n;++u)a+=r[u]*e[u].cdf(o);return a},icdf(){throw Error("Mixture icdf not supported.")}};return s.distributions(e).weights(t)}function _ee(e,t){return t==null&&(t=e??1,e=0),e+(t-e)*Bc()}function wee(e,t,n){return n==null&&(n=t??1,t=0),e>=t&&e<=n?1/(n-t):0}function Eee(e,t,n){return n==null&&(n=t??1,t=0),e<t?0:e>n?1:(e-t)/(n-t)}function xee(e,t,n){return n==null&&(n=t??1,t=0),e>=0&&e<=1?t+e*(n-t):NaN}function D3e(e,t){let n,r;const i={min(s){return arguments.length?(n=s||0,i):n},max(s){return arguments.length?(r=s??1,i):r},sample:()=>_ee(n,r),pdf:s=>wee(s,n,r),cdf:s=>Eee(s,n,r),icdf:s=>xee(s,n,r)};return t==null&&(t=e??1,e=0),i.min(e).max(t)}function See(e,t,n){let r=0,i=0;for(const s of e){const o=n(s);t(s)==null||o==null||isNaN(o)||(r+=(o-r)/++i)}return{coef:[r],predict:()=>r,rSquared:0}}function hR(e,t,n,r){const i=r-e*e,s=Math.abs(i)<1e-24?0:(n-e*t)/i;return[t-s*e,s]}function uF(e,t,n,r){e=e.filter(h=>{let p=t(h),m=n(h);return p!=null&&(p=+p)>=p&&m!=null&&(m=+m)>=m}),r&&e.sort((h,p)=>t(h)-t(p));const i=e.length,s=new Float64Array(i),o=new Float64Array(i);let a=0,u=0,l=0,c,f,d;for(d of e)s[a]=c=+t(d),o[a]=f=+n(d),++a,u+=(c-u)/a,l+=(f-l)/a;for(a=0;a<i;++a)s[a]-=u,o[a]-=l;return[s,o,u,l]}function pR(e,t,n,r){let i=-1,s,o;for(const a of e)s=t(a),o=n(a),s!=null&&(s=+s)>=s&&o!=null&&(o=+o)>=o&&r(s,o,++i)}function YS(e,t,n,r,i){let s=0,o=0;return pR(e,t,n,(a,u)=>{const l=u-i(a),c=u-r;s+=l*l,o+=c*c}),1-s/o}function Tee(e,t,n){let r=0,i=0,s=0,o=0,a=0;pR(e,t,n,(c,f)=>{++a,r+=(c-r)/a,i+=(f-i)/a,s+=(c*f-s)/a,o+=(c*c-o)/a});const u=hR(r,i,s,o),l=c=>u[0]+u[1]*c;return{coef:u,predict:l,rSquared:YS(e,t,n,i,l)}}function P3e(e,t,n){let r=0,i=0,s=0,o=0,a=0;pR(e,t,n,(c,f)=>{++a,c=Math.log(c),r+=(c-r)/a,i+=(f-i)/a,s+=(c*f-s)/a,o+=(c*c-o)/a});const u=hR(r,i,s,o),l=c=>u[0]+u[1]*Math.log(c);return{coef:u,predict:l,rSquared:YS(e,t,n,i,l)}}function O3e(e,t,n){const[r,i,s,o]=uF(e,t,n);let a=0,u=0,l=0,c=0,f=0,d,h,p;pR(e,t,n,(v,b)=>{d=r[f++],h=Math.log(b),p=d*b,a+=(b*h-a)/f,u+=(p-u)/f,l+=(p*h-l)/f,c+=(d*p-c)/f});const[m,g]=hR(u/o,a/o,l/o,c/o),y=v=>Math.exp(m+g*(v-s));return{coef:[Math.exp(m-g*s),g],predict:y,rSquared:YS(e,t,n,o,y)}}function $3e(e,t,n){let r=0,i=0,s=0,o=0,a=0,u=0;pR(e,t,n,(f,d)=>{const h=Math.log(f),p=Math.log(d);++u,r+=(h-r)/u,i+=(p-i)/u,s+=(h*p-s)/u,o+=(h*h-o)/u,a+=(d-a)/u});const l=hR(r,i,s,o),c=f=>l[0]*Math.pow(f,l[1]);return l[0]=Math.exp(l[0]),{coef:l,predict:c,rSquared:YS(e,t,n,a,c)}}function Cee(e,t,n){const[r,i,s,o]=uF(e,t,n),a=r.length;let u=0,l=0,c=0,f=0,d=0,h,p,m,g;for(h=0;h<a;)p=r[h],m=i[h++],g=p*p,u+=(g-u)/h,l+=(g*p-l)/h,c+=(g*g-c)/h,f+=(p*m-f)/h,d+=(g*m-d)/h;const y=c-u*u,v=u*y-l*l,b=(d*u-f*l)/v,w=(f*y-d*l)/v,E=-b*u,T=S=>(S=S-s,b*S*S+w*S+E+o);return{coef:[E-w*s+b*s*s+o,w-2*b*s,b],predict:T,rSquared:YS(e,t,n,o,T)}}function M3e(e,t,n,r){if(r===0)return See(e,t,n);if(r===1)return Tee(e,t,n);if(r===2)return Cee(e,t,n);const[i,s,o,a]=uF(e,t,n),u=i.length,l=[],c=[],f=r+1;let d,h,p,m,g;for(d=0;d<f;++d){for(p=0,m=0;p<u;++p)m+=Math.pow(i[p],d)*s[p];for(l.push(m),g=new Float64Array(f),h=0;h<f;++h){for(p=0,m=0;p<u;++p)m+=Math.pow(i[p],d+h);g[h]=m}c.push(g)}c.push(l);const y=m5t(c),v=b=>{b-=o;let w=a+y[0]+y[1]*b+y[2]*b*b;for(d=3;d<f;++d)w+=y[d]*Math.pow(b,d);return w};return{coef:p5t(f,y,-o,a),predict:v,rSquared:YS(e,t,n,a,v)}}function p5t(e,t,n,r){const i=Array(e);let s,o,a,u;for(s=0;s<e;++s)i[s]=0;for(s=e-1;s>=0;--s)for(a=t[s],u=1,i[s]+=a,o=1;o<=s;++o)u*=(s+1-o)/o,i[s-o]+=a*Math.pow(n,o)*u;return i[0]+=r,i}function m5t(e){const t=e.length-1,n=[];let r,i,s,o,a;for(r=0;r<t;++r){for(o=r,i=r+1;i<t;++i)Math.abs(e[r][i])>Math.abs(e[r][o])&&(o=i);for(s=r;s<t+1;++s)a=e[s][r],e[s][r]=e[s][o],e[s][o]=a;for(i=r+1;i<t;++i)for(s=t;s>=r;s--)e[s][i]-=e[s][r]*e[r][i]/e[r][r]}for(i=t-1;i>=0;--i){for(a=0,s=i+1;s<t;++s)a+=e[s][i]*n[s];n[i]=(e[t][i]-a)/e[i][i]}return n}const Ppe=2,Ope=1e-12;function L3e(e,t,n,r){const[i,s,o,a]=uF(e,t,n,!0),u=i.length,l=Math.max(2,~~(r*u)),c=new Float64Array(u),f=new Float64Array(u),d=new Float64Array(u).fill(1);for(let h=-1;++h<=Ppe;){const p=[0,l-1];for(let g=0;g<u;++g){const y=i[g],v=p[0],b=p[1],w=y-i[v]>i[b]-y?v:b;let E=0,T=0,S=0,C=0,A=0;const k=1/Math.abs(i[w]-y||1);for(let P=v;P<=b;++P){const $=i[P],F=s[P],M=g5t(Math.abs(y-$)*k)*d[P],B=$*M;E+=M,T+=B,S+=F*M,C+=F*B,A+=$*B}const[N,O]=hR(T/E,S/E,C/E,A/E);c[g]=N+O*y,f[g]=Math.abs(s[g]-c[g]),y5t(i,g+1,p)}if(h===Ppe)break;const m=Qxe(f);if(Math.abs(m)<Ope)break;for(let g=0,y,v;g<u;++g)y=f[g]/(6*m),d[g]=y>=1?Ope:(v=1-y*y)*v}return v5t(i,c,o,a)}function g5t(e){return(e=1-e*e*e)*e*e}function y5t(e,t,n){const r=e[t];let i=n[0],s=n[1]+1;if(!(s>=e.length))for(;t>i&&e[s]-r<=r-e[i];)n[0]=++i,n[1]=s,++s}function v5t(e,t,n,r){const i=e.length,s=[];let o=0,a=0,u=[],l;for(;o<i;++o)l=e[o]+n,u[0]===l?u[1]+=(t[o]-u[1])/++a:(a=0,u[1]+=r,u=[l,t[o]],s.push(u));return u[1]+=r,s}const b5t=.5*Math.PI/180;function lF(e,t,n,r){n=n||25,r=Math.max(n,r||200);const i=m=>[m,e(m)],s=t[0],o=t[1],a=o-s,u=a/r,l=[i(s)],c=[];if(n===r){for(let m=1;m<r;++m)l.push(i(s+m/n*a));return l.push(i(o)),l}else{c.push(i(o));for(let m=n;--m>0;)c.push(i(s+m/n*a))}let f=l[0],d=c[c.length-1];const h=1/a,p=_5t(f[1],c);for(;d;){const m=i((f[0]+d[0])/2);m[0]-f[0]>=u&&w5t(f,m,d,h,p)>b5t?c.push(m):(f=d,l.push(d),c.pop()),d=c[c.length-1]}return l}function _5t(e,t){let n=e,r=e;const i=t.length;for(let s=0;s<i;++s){const o=t[s][1];o<n&&(n=o),o>r&&(r=o)}return 1/(r-n)}function w5t(e,t,n,r,i){const s=Math.atan2(i*(n[1]-e[1]),r*(n[0]-e[0])),o=Math.atan2(i*(t[1]-e[1]),r*(t[0]-e[0]));return Math.abs(s-o)}function E5t(e){return t=>{const n=e.length;let r=1,i=String(e[0](t));for(;r<n;++r)i+="|"+e[r](t);return i}}function vH(e){return!e||!e.length?function(){return""}:e.length===1?e[0]:E5t(e)}function F3e(e,t,n){return n||e+(t?"_"+t:"")}const Y9=()=>{},x5t={init:Y9,add:Y9,rem:Y9,idx:0},DI={values:{init:e=>e.cell.store=!0,value:e=>e.cell.data.values(),idx:-1},count:{value:e=>e.cell.num},__count__:{value:e=>e.missing+e.valid},missing:{value:e=>e.missing},valid:{value:e=>e.valid},sum:{init:e=>e.sum=0,value:e=>e.valid?e.sum:void 0,add:(e,t)=>e.sum+=+t,rem:(e,t)=>e.sum-=t},product:{init:e=>e.product=1,value:e=>e.valid?e.product:void 0,add:(e,t)=>e.product*=t,rem:(e,t)=>e.product/=t},mean:{init:e=>e.mean=0,value:e=>e.valid?e.mean:void 0,add:(e,t)=>(e.mean_d=t-e.mean,e.mean+=e.mean_d/e.valid),rem:(e,t)=>(e.mean_d=t-e.mean,e.mean-=e.valid?e.mean_d/e.valid:e.mean)},average:{value:e=>e.valid?e.mean:void 0,req:["mean"],idx:1},variance:{init:e=>e.dev=0,value:e=>e.valid>1?e.dev/(e.valid-1):void 0,add:(e,t)=>e.dev+=e.mean_d*(t-e.mean),rem:(e,t)=>e.dev-=e.mean_d*(t-e.mean),req:["mean"],idx:1},variancep:{value:e=>e.valid>1?e.dev/e.valid:void 0,req:["variance"],idx:2},stdev:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid-1)):void 0,req:["variance"],idx:2},stdevp:{value:e=>e.valid>1?Math.sqrt(e.dev/e.valid):void 0,req:["variance"],idx:2},stderr:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid*(e.valid-1))):void 0,req:["variance"],idx:2},distinct:{value:e=>e.cell.data.distinct(e.get),req:["values"],idx:3},ci0:{value:e=>e.cell.data.ci0(e.get),req:["values"],idx:3},ci1:{value:e=>e.cell.data.ci1(e.get),req:["values"],idx:3},median:{value:e=>e.cell.data.q2(e.get),req:["values"],idx:3},q1:{value:e=>e.cell.data.q1(e.get),req:["values"],idx:3},q3:{value:e=>e.cell.data.q3(e.get),req:["values"],idx:3},min:{init:e=>e.min=void 0,value:e=>e.min=Number.isNaN(e.min)?e.cell.data.min(e.get):e.min,add:(e,t)=>{(t<e.min||e.min===void 0)&&(e.min=t)},rem:(e,t)=>{t<=e.min&&(e.min=NaN)},req:["values"],idx:4},max:{init:e=>e.max=void 0,value:e=>e.max=Number.isNaN(e.max)?e.cell.data.max(e.get):e.max,add:(e,t)=>{(t>e.max||e.max===void 0)&&(e.max=t)},rem:(e,t)=>{t>=e.max&&(e.max=NaN)},req:["values"],idx:4},argmin:{init:e=>e.argmin=void 0,value:e=>e.argmin||e.cell.data.argmin(e.get),add:(e,t,n)=>{t<e.min&&(e.argmin=n)},rem:(e,t)=>{t<=e.min&&(e.argmin=void 0)},req:["min","values"],idx:3},argmax:{init:e=>e.argmax=void 0,value:e=>e.argmax||e.cell.data.argmax(e.get),add:(e,t,n)=>{t>e.max&&(e.argmax=n)},rem:(e,t)=>{t>=e.max&&(e.argmax=void 0)},req:["max","values"],idx:3},exponential:{init:(e,t)=>{e.exp=0,e.exp_r=t},value:e=>e.valid?e.exp*(1-e.exp_r)/(1-e.exp_r**e.valid):void 0,add:(e,t)=>e.exp=e.exp_r*e.exp+t,rem:(e,t)=>e.exp=(e.exp-t/e.exp_r**(e.valid-1))/e.exp_r},exponentialb:{value:e=>e.valid?e.exp*(1-e.exp_r):void 0,req:["exponential"],idx:1}},mR=Object.keys(DI).filter(e=>e!=="__count__");function S5t(e,t){return(n,r)=>bn({name:e,aggregate_param:r,out:n||e},x5t,t)}[...mR,"__count__"].forEach(e=>{DI[e]=S5t(e,DI[e])});function j3e(e,t,n){return DI[e](n,t)}function B3e(e,t){return e.idx-t.idx}function T5t(e){const t={};e.forEach(r=>t[r.name]=r);const n=r=>{r.req&&r.req.forEach(i=>{t[i]||n(t[i]=DI[i]())})};return e.forEach(n),Object.values(t).sort(B3e)}function C5t(){this.valid=0,this.missing=0,this._ops.forEach(e=>e.aggregate_param==null?e.init(this):e.init(this,e.aggregate_param))}function A5t(e,t){if(e==null||e===""){++this.missing;return}e===e&&(++this.valid,this._ops.forEach(n=>n.add(this,e,t)))}function I5t(e,t){if(e==null||e===""){--this.missing;return}e===e&&(--this.valid,this._ops.forEach(n=>n.rem(this,e,t)))}function k5t(e){return this._out.forEach(t=>e[t.out]=t.value(this)),e}function U3e(e,t){const n=t||xa,r=T5t(e),i=e.slice().sort(B3e);function s(o){this._ops=r,this._out=i,this.cell=o,this.init()}return s.prototype.init=C5t,s.prototype.add=A5t,s.prototype.rem=I5t,s.prototype.set=k5t,s.prototype.get=n,s.fields=e.map(o=>o.out),s}function Aee(e){this._key=e?Lc(e):Lt,this.reset()}const Uo=Aee.prototype;Uo.reset=function(){this._add=[],this._rem=[],this._ext=null,this._get=null,this._q=null};Uo.add=function(e){this._add.push(e)};Uo.rem=function(e){this._rem.push(e)};Uo.values=function(){if(this._get=null,this._rem.length===0)return this._add;const e=this._add,t=this._rem,n=this._key,r=e.length,i=t.length,s=Array(r-i),o={};let a,u,l;for(a=0;a<i;++a)o[n(t[a])]=1;for(a=0,u=0;a<r;++a)o[n(l=e[a])]?o[n(l)]=0:s[u++]=l;return this._rem=[],this._add=s};Uo.distinct=function(e){const t=this.values(),n={};let r=t.length,i=0,s;for(;--r>=0;)s=e(t[r])+"",jt(n,s)||(n[s]=1,++i);return i};Uo.extent=function(e){if(this._get!==e||!this._ext){const t=this.values(),n=kOe(t,e);this._ext=[t[n[0]],t[n[1]]],this._get=e}return this._ext};Uo.argmin=function(e){return this.extent(e)[0]||{}};Uo.argmax=function(e){return this.extent(e)[1]||{}};Uo.min=function(e){const t=this.extent(e)[0];return t!=null?e(t):void 0};Uo.max=function(e){const t=this.extent(e)[1];return t!=null?e(t):void 0};Uo.quartile=function(e){return(this._get!==e||!this._q)&&(this._q=fee(this.values(),e),this._get=e),this._q};Uo.q1=function(e){return this.quartile(e)[0]};Uo.q2=function(e){return this.quartile(e)[1]};Uo.q3=function(e){return this.quartile(e)[2]};Uo.ci=function(e){return(this._get!==e||!this._ci)&&(this._ci=A3e(this.values(),1e3,.05,e),this._get=e),this._ci};Uo.ci0=function(e){return this.ci(e)[0]};Uo.ci1=function(e){return this.ci(e)[1]};function fy(e){De.call(this,null,e),this._adds=[],this._mods=[],this._alen=0,this._mlen=0,this._drop=!0,this._cross=!1,this._dims=[],this._dnames=[],this._measures=[],this._countOnly=!1,this._counts=null,this._prev=null,this._inputs=null,this._outputs=null}fy.Definition={type:"Aggregate",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:mR},{name:"aggregate_params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"drop",type:"boolean",default:!0},{name:"cross",type:"boolean",default:!1},{name:"key",type:"field"}]};lt(fy,De,{transform(e,t){const n=this,r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.modified();return n.stamp=r.stamp,n.value&&(i||t.modified(n._inputs,!0))?(n._prev=n.value,n.value=i?n.init(e):Object.create(null),t.visit(t.SOURCE,s=>n.add(s))):(n.value=n.value||n.init(e),t.visit(t.REM,s=>n.rem(s)),t.visit(t.ADD,s=>n.add(s))),r.modifies(n._outputs),n._drop=e.drop!==!1,e.cross&&n._dims.length>1&&(n._drop=!1,n.cross()),t.clean()&&n._drop&&r.clean(!0).runAfter(()=>this.clean()),n.changes(r)},cross(){const e=this,t=e.value,n=e._dnames,r=n.map(()=>({})),i=n.length;function s(a){let u,l,c,f;for(u in a)for(c=a[u].tuple,l=0;l<i;++l)r[l][f=c[n[l]]]=f}s(e._prev),s(t);function o(a,u,l){const c=n[l],f=r[l++];for(const d in f){const h=a?a+"|"+d:d;u[c]=f[d],l<i?o(h,u,l):t[h]||e.cell(h,u)}}o("",{},0)},init(e){const t=this._inputs=[],n=this._outputs=[],r={};function i(v){const b=pt(ga(v)),w=b.length;let E=0,T;for(;E<w;++E)r[T=b[E]]||(r[T]=1,t.push(T))}this._dims=pt(e.groupby),this._dnames=this._dims.map(v=>{const b=Ki(v);return i(v),n.push(b),b}),this.cellkey=e.key?e.key:vH(this._dims),this._countOnly=!0,this._counts=[],this._measures=[];const s=e.fields||[null],o=e.ops||["count"],a=e.aggregate_params||[null],u=e.as||[],l=s.length,c={};let f,d,h,p,m,g,y;for(l!==o.length&&Le("Unmatched number of fields and aggregate ops."),y=0;y<l;++y){if(f=s[y],d=o[y],h=a[y]||null,f==null&&d!=="count"&&Le("Null aggregate field specified."),m=Ki(f),g=F3e(d,m,u[y]),n.push(g),d==="count"){this._counts.push(g);continue}p=c[m],p||(i(f),p=c[m]=[],p.field=f,this._measures.push(p)),d!=="count"&&(this._countOnly=!1),p.push(j3e(d,h,g))}return this._measures=this._measures.map(v=>U3e(v,v.field)),Object.create(null)},cellkey:vH(),cell(e,t){let n=this.value[e];return n?n.num===0&&this._drop&&n.stamp<this.stamp?(n.stamp=this.stamp,this._adds[this._alen++]=n):n.stamp<this.stamp&&(n.stamp=this.stamp,this._mods[this._mlen++]=n):(n=this.value[e]=this.newcell(e,t),this._adds[this._alen++]=n),n},newcell(e,t){const n={key:e,num:0,agg:null,tuple:this.newtuple(t,this._prev&&this._prev[e]),stamp:this.stamp,store:!1};if(!this._countOnly){const r=this._measures,i=r.length;n.agg=Array(i);for(let s=0;s<i;++s)n.agg[s]=new r[s](n)}return n.store&&(n.data=new Aee),n},newtuple(e,t){const n=this._dnames,r=this._dims,i=r.length,s={};for(let o=0;o<i;++o)s[n[o]]=r[o](e);return t?b3e(t.tuple,s):Er(s)},clean(){const e=this.value;for(const t in e)e[t].num===0&&delete e[t]},add(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num+=1,this._countOnly)return;n.store&&n.data.add(e);const r=n.agg;for(let i=0,s=r.length;i<s;++i)r[i].add(r[i].get(e),e)},rem(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num-=1,this._countOnly)return;n.store&&n.data.rem(e);const r=n.agg;for(let i=0,s=r.length;i<s;++i)r[i].rem(r[i].get(e),e)},celltuple(e){const t=e.tuple,n=this._counts;e.store&&e.data.values();for(let r=0,i=n.length;r<i;++r)t[n[r]]=e.num;if(!this._countOnly){const r=e.agg;for(let i=0,s=r.length;i<s;++i)r[i].set(t)}return t},changes(e){const t=this._adds,n=this._mods,r=this._prev,i=this._drop,s=e.add,o=e.rem,a=e.mod;let u,l,c,f;if(r)for(l in r)u=r[l],(!i||u.num)&&o.push(u.tuple);for(c=0,f=this._alen;c<f;++c)s.push(this.celltuple(t[c])),t[c]=null;for(c=0,f=this._mlen;c<f;++c)u=n[c],(u.num===0&&i?o:a).push(this.celltuple(u)),n[c]=null;return this._alen=this._mlen=0,this._prev=null,e}});const R5t=1e-14;function Iee(e){De.call(this,null,e)}Iee.Definition={type:"Bin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"anchor",type:"number"},{name:"maxbins",type:"number",default:20},{name:"base",type:"number",default:10},{name:"divide",type:"number",array:!0,default:[5,2]},{name:"extent",type:"number",array:!0,length:2,required:!0},{name:"span",type:"number"},{name:"step",type:"number"},{name:"steps",type:"number",array:!0},{name:"minstep",type:"number",default:0},{name:"nice",type:"boolean",default:!0},{name:"name",type:"string"},{name:"as",type:"string",array:!0,length:2,default:["bin0","bin1"]}]};lt(Iee,De,{transform(e,t){const n=e.interval!==!1,r=this._bins(e),i=r.start,s=r.step,o=e.as||["bin0","bin1"],a=o[0],u=o[1];let l;return e.modified()?(t=t.reflow(!0),l=t.SOURCE):l=t.modified(ga(e.field))?t.ADD_MOD:t.ADD,t.visit(l,n?c=>{const f=r(c);c[a]=f,c[u]=f==null?null:i+s*(1+(f-i)/s)}:c=>c[a]=r(c)),t.modifies(n?o:a)},_bins(e){if(this.value&&!e.modified())return this.value;const t=e.field,n=C3e(e),r=n.step;let i=n.start,s=i+Math.ceil((n.stop-i)/r)*r,o,a;(o=e.anchor)!=null&&(a=o-(i+r*Math.floor((o-i)/r)),i+=a,s+=a);const u=function(l){let c=ha(t(l));return c==null?null:c<i?-1/0:c>s?1/0:(c=Math.max(i,Math.min(c,s-r)),i+r*Math.floor(R5t+(c-i)/r))};return u.start=i,u.stop=n.stop,u.step=r,this.value=ul(u,ga(t),e.name||"bin_"+Ki(t))}});function z3e(e,t,n){const r=e;let i=t||[],s=n||[],o={},a=0;return{add:u=>s.push(u),remove:u=>o[r(u)]=++a,size:()=>i.length,data:(u,l)=>(a&&(i=i.filter(c=>!o[r(c)]),o={},a=0),l&&u&&i.sort(u),s.length&&(i=u?$Oe(u,i,s.sort(u)):i.concat(s),s=[]),i)}}function kee(e){De.call(this,[],e)}kee.Definition={type:"Collect",metadata:{source:!0},params:[{name:"sort",type:"compare"}]};lt(kee,De,{transform(e,t){const n=t.fork(t.ALL),r=z3e(Lt,this.value,n.materialize(n.ADD).add),i=e.sort,s=t.changed()||i&&(e.modified("sort")||t.modified(i.fields));return n.visit(n.REM,r.remove),this.modified(s),this.value=n.source=r.data(r_(i),s),t.source&&t.source.root&&(this.value.root=t.source.root),n}});function V3e(e){Kr.call(this,null,N5t,e)}lt(V3e,Kr);function N5t(e){return this.value&&!e.modified()?this.value:YZ(e.fields,e.orders)}function Ree(e){De.call(this,null,e)}Ree.Definition={type:"CountPattern",metadata:{generates:!0,changes:!0},params:[{name:"field",type:"field",required:!0},{name:"case",type:"enum",values:["upper","lower","mixed"],default:"mixed"},{name:"pattern",type:"string",default:'[\\w"]+'},{name:"stopwords",type:"string",default:""},{name:"as",type:"string",array:!0,length:2,default:["text","count"]}]};function D5t(e,t,n){switch(t){case"upper":e=e.toUpperCase();break;case"lower":e=e.toLowerCase();break}return e.match(n)}lt(Ree,De,{transform(e,t){const n=f=>d=>{for(var h=D5t(a(d),e.case,s)||[],p,m=0,g=h.length;m<g;++m)o.test(p=h[m])||f(p)},r=this._parameterCheck(e,t),i=this._counts,s=this._match,o=this._stop,a=e.field,u=e.as||["text","count"],l=n(f=>i[f]=1+(i[f]||0)),c=n(f=>i[f]-=1);return r?t.visit(t.SOURCE,l):(t.visit(t.ADD,l),t.visit(t.REM,c)),this._finish(t,u)},_parameterCheck(e,t){let n=!1;return(e.modified("stopwords")||!this._stop)&&(this._stop=new RegExp("^"+(e.stopwords||"")+"$","i"),n=!0),(e.modified("pattern")||!this._match)&&(this._match=new RegExp(e.pattern||"[\\w']+","g"),n=!0),(e.modified("field")||t.modified(e.field.fields))&&(n=!0),n&&(this._counts={}),n},_finish(e,t){const n=this._counts,r=this._tuples||(this._tuples={}),i=t[0],s=t[1],o=e.fork(e.NO_SOURCE|e.NO_FIELDS);let a,u,l;for(a in n)u=r[a],l=n[a]||0,!u&&l?(r[a]=u=Er({}),u[i]=a,u[s]=l,o.add.push(u)):l===0?(u&&o.rem.push(u),n[a]=null,r[a]=null):u[s]!==l&&(u[s]=l,o.mod.push(u));return o.modifies(t)}});function Nee(e){De.call(this,null,e)}Nee.Definition={type:"Cross",metadata:{generates:!0},params:[{name:"filter",type:"expr"},{name:"as",type:"string",array:!0,length:2,default:["a","b"]}]};lt(Nee,De,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.as||["a","b"],i=r[0],s=r[1],o=!this.value||t.changed(t.ADD_REM)||e.modified("as")||e.modified("filter");let a=this.value;return o?(a&&(n.rem=a),a=t.materialize(t.SOURCE).source,n.add=this.value=P5t(a,i,s,e.filter||Fc)):n.mod=a,n.source=this.value,n.modifies(r)}});function P5t(e,t,n,r){for(var i=[],s={},o=e.length,a=0,u,l;a<o;++a)for(s[t]=l=e[a],u=0;u<o;++u)s[n]=e[u],r(s)&&(i.push(Er(s)),s={},s[t]=l);return i}const $pe={kde:mee,mixture:N3e,normal:pee,lognormal:R3e,uniform:D3e},O5t="distributions",Mpe="function",$5t="field";function H3e(e,t){const n=e[Mpe];jt($pe,n)||Le("Unknown distribution function: "+n);const r=$pe[n]();for(const i in e)i===$5t?r.data((e.from||t()).map(e[i])):i===O5t?r[i](e[i].map(s=>H3e(s,t))):typeof r[i]===Mpe&&r[i](e[i]);return r}function Dee(e){De.call(this,null,e)}const q3e=[{key:{function:"normal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"lognormal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"uniform"},params:[{name:"min",type:"number",default:0},{name:"max",type:"number",default:1}]},{key:{function:"kde"},params:[{name:"field",type:"field",required:!0},{name:"from",type:"data"},{name:"bandwidth",type:"number",default:0}]}],M5t={key:{function:"mixture"},params:[{name:"distributions",type:"param",array:!0,params:q3e},{name:"weights",type:"number",array:!0}]};Dee.Definition={type:"Density",metadata:{generates:!0},params:[{name:"extent",type:"number",array:!0,length:2},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"method",type:"string",default:"pdf",values:["pdf","cdf"]},{name:"distribution",type:"param",params:q3e.concat(M5t)},{name:"as",type:"string",array:!0,default:["value","density"]}]};lt(Dee,De,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=H3e(e.distribution,L5t(t)),i=e.steps||e.minsteps||25,s=e.steps||e.maxsteps||200;let o=e.method||"pdf";o!=="pdf"&&o!=="cdf"&&Le("Invalid density method: "+o),!e.extent&&!r.data&&Le("Missing density extent parameter."),o=r[o];const a=e.as||["value","density"],u=e.extent||Lh(r.data()),l=lF(o,u,i,s).map(c=>{const f={};return f[a[0]]=c[0],f[a[1]]=c[1],Er(f)});this.value&&(n.rem=this.value),this.value=n.add=n.source=l}return n}});function L5t(e){return()=>e.materialize(e.SOURCE).source}function W3e(e,t){return e?e.map((n,r)=>t[r]||Ki(n)):null}function Pee(e,t,n){const r=[],i=f=>f(u);let s,o,a,u,l,c;if(t==null)r.push(e.map(n));else for(s={},o=0,a=e.length;o<a;++o)u=e[o],l=t.map(i),c=s[l],c||(s[l]=c=[],c.dims=l,r.push(c)),c.push(n(u));return r}const G3e="bin";function Oee(e){De.call(this,null,e)}Oee.Definition={type:"DotBin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"step",type:"number"},{name:"smooth",type:"boolean",default:!1},{name:"as",type:"string",default:G3e}]};const F5t=(e,t)=>dR(Lh(e,t))/30;lt(Oee,De,{transform(e,t){if(this.value&&!(e.modified()||t.changed()))return t;const n=t.materialize(t.SOURCE).source,r=Pee(t.source,e.groupby,xa),i=e.smooth||!1,s=e.field,o=e.step||F5t(n,s),a=r_((p,m)=>s(p)-s(m)),u=e.as||G3e,l=r.length;let c=1/0,f=-1/0,d=0,h;for(;d<l;++d){const p=r[d].sort(a);h=-1;for(const m of I3e(p,o,i,s))m<c&&(c=m),m>f&&(f=m),p[++h][u]=m}return this.value={start:c,stop:f,step:o},t.reflow(!0).modifies(u)}});function Y3e(e){Kr.call(this,null,j5t,e),this.modified(!0)}lt(Y3e,Kr);function j5t(e){const t=e.expr;return this.value&&!e.modified("expr")?this.value:ul(n=>t(n,e),ga(t),Ki(t))}function $ee(e){De.call(this,[void 0,void 0],e)}$ee.Definition={type:"Extent",metadata:{},params:[{name:"field",type:"field",required:!0}]};lt($ee,De,{transform(e,t){const n=this.value,r=e.field,i=t.changed()||t.modified(r.fields)||e.modified("field");let s=n[0],o=n[1];if((i||s==null)&&(s=1/0,o=-1/0),t.visit(i?t.SOURCE:t.ADD,a=>{const u=ha(r(a));u!=null&&(u<s&&(s=u),u>o&&(o=u))}),!Number.isFinite(s)||!Number.isFinite(o)){let a=Ki(r);a&&(a=` for field "${a}"`),t.dataflow.warn(`Infinite extent${a}: [${s}, ${o}]`),s=o=void 0}this.value=[s,o]}});function Mee(e,t){Kr.call(this,e),this.parent=t,this.count=0}lt(Mee,Kr,{connect(e){return this.detachSubflow=e.detachSubflow,this.targets().add(e),e.source=this},add(e){this.count+=1,this.value.add.push(e)},rem(e){this.count-=1,this.value.rem.push(e)},mod(e){this.value.mod.push(e)},init(e){this.value.init(e,e.NO_SOURCE)},evaluate(){return this.value}});function cF(e){De.call(this,{},e),this._keys=qS();const t=this._targets=[];t.active=0,t.forEach=n=>{for(let r=0,i=t.active;r<i;++r)n(t[r],r,t)}}lt(cF,De,{activate(e){this._targets[this._targets.active++]=e},subflow(e,t,n,r){const i=this.value;let s=jt(i,e)&&i[e],o,a;return s?s.value.stamp<n.stamp&&(s.init(n),this.activate(s)):(a=r||(a=this._group[e])&&a.tuple,o=n.dataflow,s=new Mee(n.fork(n.NO_SOURCE),this),o.add(s).connect(t(o,e,a)),i[e]=s,this.activate(s)),s},clean(){const e=this.value;let t=0;for(const n in e)if(e[n].count===0){const r=e[n].detachSubflow;r&&r(),delete e[n],++t}if(t){const n=this._targets.filter(r=>r&&r.count>0);this.initTargets(n)}},initTargets(e){const t=this._targets,n=t.length,r=e?e.length:0;let i=0;for(;i<r;++i)t[i]=e[i];for(;i<n&&t[i]!=null;++i)t[i]=null;t.active=r},transform(e,t){const n=t.dataflow,r=e.key,i=e.subflow,s=this._keys,o=e.modified("key"),a=u=>this.subflow(u,i,t);return this._group=e.group||{},this.initTargets(),t.visit(t.REM,u=>{const l=Lt(u),c=s.get(l);c!==void 0&&(s.delete(l),a(c).rem(u))}),t.visit(t.ADD,u=>{const l=r(u);s.set(Lt(u),l),a(l).add(u)}),o||t.modified(r.fields)?t.visit(t.MOD,u=>{const l=Lt(u),c=s.get(l),f=r(u);c===f?a(f).mod(u):(s.set(l,f),a(c).rem(u),a(f).add(u))}):t.changed(t.MOD)&&t.visit(t.MOD,u=>{a(s.get(Lt(u))).mod(u)}),o&&t.visit(t.REFLOW,u=>{const l=Lt(u),c=s.get(l),f=r(u);c!==f&&(s.set(l,f),a(c).rem(u),a(f).add(u))}),t.clean()?n.runAfter(()=>{this.clean(),s.clean()}):s.empty>n.cleanThreshold&&n.runAfter(s.clean),t}});function K3e(e){Kr.call(this,null,B5t,e)}lt(K3e,Kr);function B5t(e){return this.value&&!e.modified()?this.value:je(e.name)?pt(e.name).map(t=>Lc(t)):Lc(e.name,e.as)}function Lee(e){De.call(this,qS(),e)}Lee.Definition={type:"Filter",metadata:{changes:!0},params:[{name:"expr",type:"expr",required:!0}]};lt(Lee,De,{transform(e,t){const n=t.dataflow,r=this.value,i=t.fork(),s=i.add,o=i.rem,a=i.mod,u=e.expr;let l=!0;t.visit(t.REM,f=>{const d=Lt(f);r.has(d)?r.delete(d):o.push(f)}),t.visit(t.ADD,f=>{u(f,e)?s.push(f):r.set(Lt(f),1)});function c(f){const d=Lt(f),h=u(f,e),p=r.get(d);h&&p?(r.delete(d),s.push(f)):!h&&!p?(r.set(d,1),o.push(f)):l&&h&&!p&&a.push(f)}return t.visit(t.MOD,c),e.modified()&&(l=!1,t.visit(t.REFLOW,c)),r.empty>n.cleanThreshold&&n.runAfter(r.clean),i}});function Fee(e){De.call(this,[],e)}Fee.Definition={type:"Flatten",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"index",type:"string"},{name:"as",type:"string",array:!0}]};lt(Fee,De,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=W3e(r,e.as||[]),s=e.index||null,o=i.length;return n.rem=this.value,t.visit(t.SOURCE,a=>{const u=r.map(p=>p(a)),l=u.reduce((p,m)=>Math.max(p,m.length),0);let c=0,f,d,h;for(;c<l;++c){for(d=aee(a),f=0;f<o;++f)d[i[f]]=(h=u[f][c])==null?null:h;s&&(d[s]=c),n.add.push(d)}}),this.value=n.source=n.add,s&&n.modifies(s),n.modifies(i)}});function jee(e){De.call(this,[],e)}jee.Definition={type:"Fold",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0,length:2,default:["key","value"]}]};lt(jee,De,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=r.map(Ki),s=e.as||["key","value"],o=s[0],a=s[1],u=r.length;return n.rem=this.value,t.visit(t.SOURCE,l=>{for(let c=0,f;c<u;++c)f=aee(l),f[o]=i[c],f[a]=r[c](l),n.add.push(f)}),this.value=n.source=n.add,n.modifies(s)}});function Bee(e){De.call(this,null,e)}Bee.Definition={type:"Formula",metadata:{modifies:!0},params:[{name:"expr",type:"expr",required:!0},{name:"as",type:"string",required:!0},{name:"initonly",type:"boolean"}]};lt(Bee,De,{transform(e,t){const n=e.expr,r=e.as,i=e.modified(),s=e.initonly?t.ADD:i?t.SOURCE:t.modified(n.fields)||t.modified(r)?t.ADD_MOD:t.ADD;return i&&(t=t.materialize().reflow(!0)),e.initonly||t.modifies(r),t.visit(s,o=>o[r]=n(o,e))}});function X3e(e){De.call(this,[],e)}lt(X3e,De,{transform(e,t){const n=t.fork(t.ALL),r=e.generator;let i=this.value,s=e.size-i.length,o,a,u;if(s>0){for(o=[];--s>=0;)o.push(u=Er(r(e))),i.push(u);n.add=n.add.length?n.materialize(n.ADD).add.concat(o):o}else a=i.slice(0,-s),n.rem=n.rem.length?n.materialize(n.REM).rem.concat(a):a,i=i.slice(-s);return n.source=this.value=i,n}});const CD={value:"value",median:Qxe,mean:Xxe,min:d3,max:lh},U5t=[];function Uee(e){De.call(this,[],e)}Uee.Definition={type:"Impute",metadata:{changes:!0},params:[{name:"field",type:"field",required:!0},{name:"key",type:"field",required:!0},{name:"keyvals",array:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"enum",default:"value",values:["value","mean","median","max","min"]},{name:"value",default:0}]};function z5t(e){var t=e.method||CD.value,n;if(CD[t]==null)Le("Unrecognized imputation method: "+t);else return t===CD.value?(n=e.value!==void 0?e.value:0,()=>n):CD[t]}function V5t(e){const t=e.field;return n=>n?t(n):NaN}lt(Uee,De,{transform(e,t){var n=t.fork(t.ALL),r=z5t(e),i=V5t(e),s=Ki(e.field),o=Ki(e.key),a=(e.groupby||[]).map(Ki),u=H5t(t.source,e.groupby,e.key,e.keyvals),l=[],c=this.value,f=u.domain.length,d,h,p,m,g,y,v,b,w,E;for(g=0,b=u.length;g<b;++g)for(d=u[g],p=d.values,h=NaN,v=0;v<f;++v)if(d[v]==null){for(m=u.domain[v],E={_impute:!0},y=0,w=p.length;y<w;++y)E[a[y]]=p[y];E[o]=m,E[s]=Number.isNaN(h)?h=r(d,i):h,l.push(Er(E))}return l.length&&(n.add=n.materialize(n.ADD).add.concat(l)),c.length&&(n.rem=n.materialize(n.REM).rem.concat(c)),this.value=l,n}});function H5t(e,t,n,r){var i=y=>y(g),s=[],o=r?r.slice():[],a={},u={},l,c,f,d,h,p,m,g;for(o.forEach((y,v)=>a[y]=v+1),d=0,m=e.length;d<m;++d)g=e[d],p=n(g),h=a[p]||(a[p]=o.push(p)),c=(l=t?t.map(i):U5t)+"",(f=u[c])||(f=u[c]=[],s.push(f),f.values=l),f[h-1]=g;return s.domain=o,s}function zee(e){fy.call(this,e)}zee.Definition={type:"JoinAggregate",metadata:{modifies:!0},params:[{name:"groupby",type:"field",array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"ops",type:"enum",array:!0,values:mR},{name:"as",type:"string",null:!0,array:!0},{name:"key",type:"field"}]};lt(zee,fy,{transform(e,t){const n=this,r=e.modified();let i;return n.value&&(r||t.modified(n._inputs,!0))?(i=n.value=r?n.init(e):{},t.visit(t.SOURCE,s=>n.add(s))):(i=n.value=n.value||this.init(e),t.visit(t.REM,s=>n.rem(s)),t.visit(t.ADD,s=>n.add(s))),n.changes(),t.visit(t.SOURCE,s=>{bn(s,i[n.cellkey(s)].tuple)}),t.reflow(r).modifies(this._outputs)},changes(){const e=this._adds,t=this._mods;let n,r;for(n=0,r=this._alen;n<r;++n)this.celltuple(e[n]),e[n]=null;for(n=0,r=this._mlen;n<r;++n)this.celltuple(t[n]),t[n]=null;this._alen=this._mlen=0}});function Vee(e){De.call(this,null,e)}Vee.Definition={type:"KDE",metadata:{generates:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"cumulative",type:"boolean",default:!1},{name:"counts",type:"boolean",default:!1},{name:"bandwidth",type:"number",default:0},{name:"extent",type:"number",array:!0,length:2},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"as",type:"string",array:!0,default:["value","density"]}]};lt(Vee,De,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=Pee(r,e.groupby,e.field),s=(e.groupby||[]).map(Ki),o=e.bandwidth,a=e.cumulative?"cdf":"pdf",u=e.as||["value","density"],l=[];let c=e.extent,f=e.steps||e.minsteps||25,d=e.steps||e.maxsteps||200;a!=="pdf"&&a!=="cdf"&&Le("Invalid density method: "+a),e.resolve==="shared"&&(c||(c=Lh(r,e.field)),f=d=e.steps||d),i.forEach(h=>{const p=mee(h,o)[a],m=e.counts?h.length:1,g=c||Lh(h);lF(p,g,f,d).forEach(y=>{const v={};for(let b=0;b<s.length;++b)v[s[b]]=h.dims[b];v[u[0]]=y[0],v[u[1]]=y[1]*m,l.push(Er(v))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=l}return n}});function Q3e(e){Kr.call(this,null,q5t,e)}lt(Q3e,Kr);function q5t(e){return this.value&&!e.modified()?this.value:XZ(e.fields,e.flat)}function J3e(e){De.call(this,[],e),this._pending=null}lt(J3e,De,{transform(e,t){const n=t.dataflow;return this._pending?K9(this,t,this._pending):W5t(e)?t.StopPropagation:e.values?K9(this,t,n.parse(e.values,e.format)):e.async?{async:n.request(e.url,e.format).then(i=>(this._pending=pt(i.data),s=>s.touch(this)))}:n.request(e.url,e.format).then(r=>K9(this,t,pt(r.data)))}});function W5t(e){return e.modified("async")&&!(e.modified("values")||e.modified("url")||e.modified("format"))}function K9(e,t,n){n.forEach(Er);const r=t.fork(t.NO_FIELDS&t.NO_SOURCE);return r.rem=e.value,e.value=r.source=r.add=n,e._pending=null,r.rem.length&&r.clean(!0),r}function Hee(e){De.call(this,{},e)}Hee.Definition={type:"Lookup",metadata:{modifies:!0},params:[{name:"index",type:"index",params:[{name:"from",type:"data",required:!0},{name:"key",type:"field",required:!0}]},{name:"values",type:"field",array:!0},{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0},{name:"default",default:null}]};lt(Hee,De,{transform(e,t){const n=e.fields,r=e.index,i=e.values,s=e.default==null?null:e.default,o=e.modified(),a=n.length;let u=o?t.SOURCE:t.ADD,l=t,c=e.as,f,d,h;return i?(d=i.length,a>1&&!c&&Le('Multi-field lookup requires explicit "as" parameter.'),c&&c.length!==a*d&&Le('The "as" parameter has too few output field names.'),c=c||i.map(Ki),f=function(p){for(var m=0,g=0,y,v;m<a;++m)if(v=r.get(n[m](p)),v==null)for(y=0;y<d;++y,++g)p[c[g]]=s;else for(y=0;y<d;++y,++g)p[c[g]]=i[y](v)}):(c||Le("Missing output field names."),f=function(p){for(var m=0,g;m<a;++m)g=r.get(n[m](p)),p[c[m]]=g??s}),o?l=t.reflow(!0):(h=n.some(p=>t.modified(p.fields)),u|=h?t.MOD:0),t.visit(u,f),l.modifies(c)}});function Z3e(e){Kr.call(this,null,G5t,e)}lt(Z3e,Kr);function G5t(e){if(this.value&&!e.modified())return this.value;const t=e.extents,n=t.length;let r=1/0,i=-1/0,s,o;for(s=0;s<n;++s)o=t[s],o[0]<r&&(r=o[0]),o[1]>i&&(i=o[1]);return[r,i]}function e$e(e){Kr.call(this,null,Y5t,e)}lt(e$e,Kr);function Y5t(e){return this.value&&!e.modified()?this.value:e.values.reduce((t,n)=>t.concat(n),[])}function t$e(e){De.call(this,null,e)}lt(t$e,De,{transform(e,t){return this.modified(e.modified()),this.value=e,t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function qee(e){fy.call(this,e)}qee.Definition={type:"Pivot",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"value",type:"field",required:!0},{name:"op",type:"enum",values:mR,default:"sum"},{name:"limit",type:"number",default:0},{name:"key",type:"field"}]};lt(qee,fy,{_transform:fy.prototype.transform,transform(e,t){return this._transform(K5t(e,t),t)}});function K5t(e,t){const n=e.field,r=e.value,i=(e.op==="count"?"__count__":e.op)||"sum",s=ga(n).concat(ga(r)),o=Q5t(n,e.limit||0,t);return t.changed()&&e.set("__pivot__",null,null,!0),{key:e.key,groupby:e.groupby,ops:o.map(()=>i),fields:o.map(a=>X5t(a,n,r,s)),as:o.map(a=>a+""),modified:e.modified.bind(e)}}function X5t(e,t,n,r){return ul(i=>t(i)===e?n(i):NaN,r,e+"")}function Q5t(e,t,n){const r={},i=[];return n.visit(n.SOURCE,s=>{const o=e(s);r[o]||(r[o]=1,i.push(o))}),i.sort(Q4),t?i.slice(0,t):i}function n$e(e){cF.call(this,e)}lt(n$e,cF,{transform(e,t){const n=e.subflow,r=e.field,i=s=>this.subflow(Lt(s),n,t,s);return(e.modified("field")||r&&t.modified(ga(r)))&&Le("PreFacet does not support field modification."),this.initTargets(),r?(t.visit(t.MOD,s=>{const o=i(s);r(s).forEach(a=>o.mod(a))}),t.visit(t.ADD,s=>{const o=i(s);r(s).forEach(a=>o.add(Er(a)))}),t.visit(t.REM,s=>{const o=i(s);r(s).forEach(a=>o.rem(a))})):(t.visit(t.MOD,s=>i(s).mod(s)),t.visit(t.ADD,s=>i(s).add(s)),t.visit(t.REM,s=>i(s).rem(s))),t.clean()&&t.runAfter(()=>this.clean()),t}});function Wee(e){De.call(this,null,e)}Wee.Definition={type:"Project",metadata:{generates:!0,changes:!0},params:[{name:"fields",type:"field",array:!0},{name:"as",type:"string",null:!0,array:!0}]};lt(Wee,De,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=W3e(e.fields,e.as||[]),s=r?(a,u)=>J5t(a,u,r,i):nF;let o;return this.value?o=this.value:(t=t.addAll(),o=this.value={}),t.visit(t.REM,a=>{const u=Lt(a);n.rem.push(o[u]),o[u]=null}),t.visit(t.ADD,a=>{const u=s(a,Er({}));o[Lt(a)]=u,n.add.push(u)}),t.visit(t.MOD,a=>{n.mod.push(s(a,o[Lt(a)]))}),n}});function J5t(e,t,n,r){for(let i=0,s=n.length;i<s;++i)t[r[i]]=n[i](e);return t}function r$e(e){De.call(this,null,e)}lt(r$e,De,{transform(e,t){return this.value=e.value,e.modified("value")?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});function Gee(e){De.call(this,null,e)}Gee.Definition={type:"Quantile",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"probs",type:"number",array:!0},{name:"step",type:"number",default:.01},{name:"as",type:"string",array:!0,default:["prob","value"]}]};const Z5t=1e-14;lt(Gee,De,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=e.as||["prob","value"];if(this.value&&!e.modified()&&!t.changed())return n.source=this.value,n;const i=t.materialize(t.SOURCE).source,s=Pee(i,e.groupby,e.field),o=(e.groupby||[]).map(Ki),a=[],u=e.step||.01,l=e.probs||$u(u/2,1-Z5t,u),c=l.length;return s.forEach(f=>{const d=cee(f,l);for(let h=0;h<c;++h){const p={};for(let m=0;m<o.length;++m)p[o[m]]=f.dims[m];p[r[0]]=l[h],p[r[1]]=d[h],a.push(Er(p))}}),this.value&&(n.rem=this.value),this.value=n.add=n.source=a,n}});function i$e(e){De.call(this,null,e)}lt(i$e,De,{transform(e,t){let n,r;return this.value?r=this.value:(n=t=t.addAll(),r=this.value={}),e.derive&&(n=t.fork(t.NO_SOURCE),t.visit(t.REM,i=>{const s=Lt(i);n.rem.push(r[s]),r[s]=null}),t.visit(t.ADD,i=>{const s=aee(i);r[Lt(i)]=s,n.add.push(s)}),t.visit(t.MOD,i=>{const s=r[Lt(i)];for(const o in i)s[o]=i[o],n.modifies(o);n.mod.push(s)})),n}});function Yee(e){De.call(this,[],e),this.count=0}Yee.Definition={type:"Sample",metadata:{},params:[{name:"size",type:"number",default:1e3}]};lt(Yee,De,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.modified("size"),i=e.size,s=this.value.reduce((c,f)=>(c[Lt(f)]=1,c),{});let o=this.value,a=this.count,u=0;function l(c){let f,d;o.length<i?o.push(c):(d=~~((a+1)*Bc()),d<o.length&&d>=u&&(f=o[d],s[Lt(f)]&&n.rem.push(f),o[d]=c)),++a}if(t.rem.length&&(t.visit(t.REM,c=>{const f=Lt(c);s[f]&&(s[f]=-1,n.rem.push(c)),--a}),o=o.filter(c=>s[Lt(c)]!==-1)),(t.rem.length||r)&&o.length<i&&t.source&&(u=a=o.length,t.visit(t.SOURCE,c=>{s[Lt(c)]||l(c)}),u=-1),r&&o.length>i){const c=o.length-i;for(let f=0;f<c;++f)s[Lt(o[f])]=-1,n.rem.push(o[f]);o=o.slice(c)}return t.mod.length&&t.visit(t.MOD,c=>{s[Lt(c)]&&n.mod.push(c)}),t.add.length&&t.visit(t.ADD,l),(t.add.length||u<0)&&(n.add=o.filter(c=>!s[Lt(c)])),this.count=a,this.value=n.source=o,n}});function Kee(e){De.call(this,null,e)}Kee.Definition={type:"Sequence",metadata:{generates:!0,changes:!0},params:[{name:"start",type:"number",required:!0},{name:"stop",type:"number",required:!0},{name:"step",type:"number",default:1},{name:"as",type:"string",default:"data"}]};lt(Kee,De,{transform(e,t){if(this.value&&!e.modified())return;const n=t.materialize().fork(t.MOD),r=e.as||"data";return n.rem=this.value?t.rem.concat(this.value):t.rem,this.value=$u(e.start,e.stop,e.step||1).map(i=>{const s={};return s[r]=i,Er(s)}),n.add=t.add.concat(this.value),n}});function s$e(e){De.call(this,null,e),this.modified(!0)}lt(s$e,De,{transform(e,t){return this.value=t.source,t.changed()?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});function Xee(e){De.call(this,null,e)}const o$e=["unit0","unit1"];Xee.Definition={type:"TimeUnit",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"units",type:"enum",values:eee,array:!0},{name:"step",type:"number",default:1},{name:"maxbins",type:"number",default:40},{name:"extent",type:"date",array:!0},{name:"timezone",type:"enum",default:"local",values:["local","utc"]},{name:"as",type:"string",array:!0,length:2,default:o$e}]};lt(Xee,De,{transform(e,t){const n=e.field,r=e.interval!==!1,i=e.timezone==="utc",s=this._floor(e,t),o=(i?GS:WS)(s.unit).offset,a=e.as||o$e,u=a[0],l=a[1],c=s.step;let f=s.start||1/0,d=s.stop||-1/0,h=t.ADD;return(e.modified()||t.changed(t.REM)||t.modified(ga(n)))&&(t=t.reflow(!0),h=t.SOURCE,f=1/0,d=-1/0),t.visit(h,p=>{const m=n(p);let g,y;m==null?(p[u]=null,r&&(p[l]=null)):(p[u]=g=y=s(m),r&&(p[l]=y=o(g,c)),g<f&&(f=g),y>d&&(d=y))}),s.start=f,s.stop=d,t.modifies(r?a:u)},_floor(e,t){const n=e.timezone==="utc",{units:r,step:i}=e.units?{units:e.units,step:e.step||1}:r3e({extent:e.extent||Lh(t.materialize(t.SOURCE).source,e.field),maxbins:e.maxbins}),s=tee(r),o=this.value||{},a=(n?YOe:GOe)(s,i);return a.unit=Qn(s),a.units=s,a.step=i,a.start=o.start,a.stop=o.stop,this.value=a}});function a$e(e){De.call(this,qS(),e)}lt(a$e,De,{transform(e,t){const n=t.dataflow,r=e.field,i=this.value,s=a=>i.set(r(a),a);let o=!0;return e.modified("field")||t.modified(r.fields)?(i.clear(),t.visit(t.SOURCE,s)):t.changed()?(t.visit(t.REM,a=>i.delete(r(a))),t.visit(t.ADD,s)):o=!1,this.modified(o),i.empty>n.cleanThreshold&&n.runAfter(i.clean),t.fork()}});function u$e(e){De.call(this,null,e)}lt(u$e,De,{transform(e,t){(!this.value||e.modified("field")||e.modified("sort")||t.changed()||e.sort&&t.modified(e.sort.fields))&&(this.value=(e.sort?t.source.slice().sort(r_(e.sort)):t.source).map(e.field))}});function ejt(e,t,n,r){const i=PI[e](t,n);return{init:i.init||Yg,update:function(s,o){o[r]=i.next(s)}}}const PI={row_number:function(){return{next:e=>e.index+1}},rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,r=t.data;return n&&t.compare(r[n-1],r[n])?e=n+1:e}}},dense_rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,r=t.data;return n&&t.compare(r[n-1],r[n])?++e:e}}},percent_rank:function(){const e=PI.rank(),t=e.next;return{init:e.init,next:n=>(t(n)-1)/(n.data.length-1)}},cume_dist:function(){let e;return{init:()=>e=0,next:t=>{const n=t.data,r=t.compare;let i=t.index;if(e<i){for(;i+1<n.length&&!r(n[i],n[i+1]);)++i;e=i}return(1+e)/n.length}}},ntile:function(e,t){t=+t,t>0||Le("ntile num must be greater than zero.");const n=PI.cume_dist(),r=n.next;return{init:n.init,next:i=>Math.ceil(t*r(i))}},lag:function(e,t){return t=+t||1,{next:n=>{const r=n.index-t;return r>=0?e(n.data[r]):null}}},lead:function(e,t){return t=+t||1,{next:n=>{const r=n.index+t,i=n.data;return r<i.length?e(i[r]):null}}},first_value:function(e){return{next:t=>e(t.data[t.i0])}},last_value:function(e){return{next:t=>e(t.data[t.i1-1])}},nth_value:function(e,t){return t=+t,t>0||Le("nth_value nth must be greater than zero."),{next:n=>{const r=n.i0+(t-1);return r<n.i1?e(n.data[r]):null}}},prev_value:function(e){let t;return{init:()=>t=null,next:n=>{const r=e(n.data[n.index]);return r!=null?t=r:t}}},next_value:function(e){let t,n;return{init:()=>(t=null,n=-1),next:r=>{const i=r.data;return r.index<=n?t:(n=tjt(e,i,r.index))<0?(n=i.length,t=null):t=e(i[n])}}}};function tjt(e,t,n){for(let r=t.length;n<r;++n)if(e(t[n])!=null)return n;return-1}const njt=Object.keys(PI);function l$e(e){const t=pt(e.ops),n=pt(e.fields),r=pt(e.params),i=pt(e.aggregate_params),s=pt(e.as),o=this.outputs=[],a=this.windows=[],u={},l={},c=[],f=[];let d=!0;function h(p){pt(ga(p)).forEach(m=>u[m]=1)}h(e.sort),t.forEach((p,m)=>{const g=n[m],y=r[m],v=i[m]||null,b=Ki(g),w=F3e(p,b,s[m]);if(h(g),o.push(w),jt(PI,p))a.push(ejt(p,g,y,w));else{if(g==null&&p!=="count"&&Le("Null aggregate field specified."),p==="count"){c.push(w);return}d=!1;let E=l[b];E||(E=l[b]=[],E.field=g,f.push(E)),E.push(j3e(p,v,w))}}),(c.length||f.length)&&(this.cell=rjt(f,c,d)),this.inputs=Object.keys(u)}const c$e=l$e.prototype;c$e.init=function(){this.windows.forEach(e=>e.init()),this.cell&&this.cell.init()};c$e.update=function(e,t){const n=this.cell,r=this.windows,i=e.data,s=r&&r.length;let o;if(n){for(o=e.p0;o<e.i0;++o)n.rem(i[o]);for(o=e.p1;o<e.i1;++o)n.add(i[o]);n.set(t)}for(o=0;o<s;++o)r[o].update(e,t)};function rjt(e,t,n){e=e.map(u=>U3e(u,u.field));const r={num:0,agg:null,store:!1,count:t};if(!n)for(var i=e.length,s=r.agg=Array(i),o=0;o<i;++o)s[o]=new e[o](r);if(r.store)var a=r.data=new Aee;return r.add=function(u){if(r.num+=1,!n){a&&a.add(u);for(let l=0;l<i;++l)s[l].add(s[l].get(u),u)}},r.rem=function(u){if(r.num-=1,!n){a&&a.rem(u);for(let l=0;l<i;++l)s[l].rem(s[l].get(u),u)}},r.set=function(u){let l,c;for(a&&a.values(),l=0,c=t.length;l<c;++l)u[t[l]]=r.num;if(!n)for(l=0,c=s.length;l<c;++l)s[l].set(u)},r.init=function(){r.num=0,a&&a.reset();for(let u=0;u<i;++u)s[u].init()},r}function Qee(e){De.call(this,{},e),this._mlen=0,this._mods=[]}Qee.Definition={type:"Window",metadata:{modifies:!0},params:[{name:"sort",type:"compare"},{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:njt.concat(mR)},{name:"params",type:"number",null:!0,array:!0},{name:"aggregate_params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"frame",type:"number",null:!0,array:!0,length:2,default:[null,0]},{name:"ignorePeers",type:"boolean",default:!1}]};lt(Qee,De,{transform(e,t){this.stamp=t.stamp;const n=e.modified(),r=r_(e.sort),i=vH(e.groupby),s=a=>this.group(i(a));let o=this.state;(!o||n)&&(o=this.state=new l$e(e)),n||t.modified(o.inputs)?(this.value={},t.visit(t.SOURCE,a=>s(a).add(a))):(t.visit(t.REM,a=>s(a).remove(a)),t.visit(t.ADD,a=>s(a).add(a)));for(let a=0,u=this._mlen;a<u;++a)ijt(this._mods[a],o,r,e);return this._mlen=0,this._mods=[],t.reflow(n).modifies(o.outputs)},group(e){let t=this.value[e];return t||(t=this.value[e]=z3e(Lt),t.stamp=-1),t.stamp<this.stamp&&(t.stamp=this.stamp,this._mods[this._mlen++]=t),t}});function ijt(e,t,n,r){const i=r.sort,s=i&&!r.ignorePeers,o=r.frame||[null,0],a=e.data(n),u=a.length,l=s?hS(i):null,c={i0:0,i1:0,p0:0,p1:0,index:0,data:a,compare:i||Sa(-1)};t.init();for(let f=0;f<u;++f)sjt(c,o,f,u),s&&ojt(c,l),t.update(c,a[f])}function sjt(e,t,n,r){e.p0=e.i0,e.p1=e.i1,e.i0=t[0]==null?0:Math.max(0,n-Math.abs(t[0])),e.i1=t[1]==null?r:Math.min(r,n+Math.abs(t[1])+1),e.index=n}function ojt(e,t){const n=e.i0,r=e.i1-1,i=e.compare,s=e.data,o=s.length-1;n>0&&!i(s[n],s[n-1])&&(e.i0=t.left(s,s[n])),r<o&&!i(s[r],s[r+1])&&(e.i1=t.right(s,s[r]))}const ajt=Object.freeze(Object.defineProperty({__proto__:null,aggregate:fy,bin:Iee,collect:kee,compare:V3e,countpattern:Ree,cross:Nee,density:Dee,dotbin:Oee,expression:Y3e,extent:$ee,facet:cF,field:K3e,filter:Lee,flatten:Fee,fold:jee,formula:Bee,generate:X3e,impute:Uee,joinaggregate:zee,kde:Vee,key:Q3e,load:J3e,lookup:Hee,multiextent:Z3e,multivalues:e$e,params:t$e,pivot:qee,prefacet:n$e,project:Wee,proxy:r$e,quantile:Gee,relay:i$e,sample:Yee,sequence:Kee,sieve:s$e,subflow:Mee,timeunit:Xee,tupleindex:a$e,values:u$e,window:Qee},Symbol.toStringTag,{value:"Module"}));function P0(e,t){if(typeof document<"u"&&document.createElement){const n=document.createElement("canvas");if(n&&n.getContext)return n.width=e,n.height=t,n}return null}const ujt=()=>typeof Image<"u"?Image:null;function Jee(e,t,n){const r=e-t+n*2;return e?r>0?r:1:0}const ljt="identity",Ex="linear",jm="log",gR="pow",yR="sqrt",fF="symlog",cb="time",fb="utc",_h="sequential",KS="diverging",xx="quantile",dF="quantize",hF="threshold",Zee="ordinal",bH="point",f$e="band",ete="bin-ordinal",Vs="continuous",vR="discrete",bR="discretizing",Qc="interpolating",tte="temporal";function cjt(e){return function(t){let n=t[0],r=t[1],i;return r<n&&(i=n,n=r,r=i),[e.invert(n),e.invert(r)]}}function fjt(e){return function(t){const n=e.range();let r=t[0],i=t[1],s=-1,o,a,u,l;for(i<r&&(a=r,r=i,i=a),u=0,l=n.length;u<l;++u)n[u]>=r&&n[u]<=i&&(s<0&&(s=u),o=u);if(!(s<0))return r=e.invertExtent(n[s]),i=e.invertExtent(n[o]),[r[0]===void 0?r[1]:r[0],i[1]===void 0?i[0]:i[1]]}}function nte(){const e=Wb().unknown(void 0),t=e.domain,n=e.range;let r=[0,1],i,s,o=!1,a=0,u=0,l=.5;delete e.unknown;function c(){const f=t().length,d=r[1]<r[0],h=r[1-d],p=Jee(f,a,u);let m=r[d-0];i=(h-m)/(p||1),o&&(i=Math.floor(i)),m+=(h-m-i*(f-a))*l,s=i*(1-a),o&&(m=Math.round(m),s=Math.round(s));const g=$u(f).map(y=>m+i*y);return n(d?g.reverse():g)}return e.domain=function(f){return arguments.length?(t(f),c()):t()},e.range=function(f){return arguments.length?(r=[+f[0],+f[1]],c()):r.slice()},e.rangeRound=function(f){return r=[+f[0],+f[1]],o=!0,c()},e.bandwidth=function(){return s},e.step=function(){return i},e.round=function(f){return arguments.length?(o=!!f,c()):o},e.padding=function(f){return arguments.length?(u=Math.max(0,Math.min(1,f)),a=u,c()):a},e.paddingInner=function(f){return arguments.length?(a=Math.max(0,Math.min(1,f)),c()):a},e.paddingOuter=function(f){return arguments.length?(u=Math.max(0,Math.min(1,f)),c()):u},e.align=function(f){return arguments.length?(l=Math.max(0,Math.min(1,f)),c()):l},e.invertRange=function(f){if(f[0]==null||f[1]==null)return;const d=r[1]<r[0],h=d?n().reverse():n(),p=h.length-1;let m=+f[0],g=+f[1],y,v,b;if(!(m!==m||g!==g)&&(g<m&&(b=m,m=g,g=b),!(g<h[0]||m>r[1-d])))return y=Math.max(0,H0(h,m)-1),v=m===g?y:H0(h,g)-1,m-h[y]>s+1e-10&&++y,d&&(b=y,y=p-v,v=p-b),y>v?void 0:t().slice(y,v+1)},e.invert=function(f){const d=e.invertRange([f,f]);return d&&d[0]},e.copy=function(){return nte().domain(t()).range(r).round(o).paddingInner(a).paddingOuter(u).align(l)},c()}function d$e(e){const t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,e.copy=function(){return d$e(t())},e}function djt(){return d$e(nte().paddingInner(1))}var hjt=Array.prototype.map;function pjt(e){return hjt.call(e,ha)}const mjt=Array.prototype.slice;function h$e(){let e=[],t=[];function n(r){return r==null||r!==r?void 0:t[(H0(e,r)-1)%t.length]}return n.domain=function(r){return arguments.length?(e=pjt(r),n):e.slice()},n.range=function(r){return arguments.length?(t=mjt.call(r),n):t.slice()},n.tickFormat=function(r,i){return JTe(e[0],Qn(e),r??10,i)},n.copy=function(){return h$e().domain(n.domain()).range(n.range())},n}const hM=new Map,p$e=Symbol("vega_scale");function m$e(e){return e[p$e]=!0,e}function gjt(e){return e&&e[p$e]===!0}function yjt(e,t,n){const r=function(){const s=t();return s.invertRange||(s.invertRange=s.invert?cjt(s):s.invertExtent?fjt(s):void 0),s.type=e,m$e(s)};return r.metadata=ed(pt(n)),r}function gr(e,t,n){return arguments.length>1?(hM.set(e,yjt(e,t,n)),this):g$e(e)?hM.get(e):void 0}gr(ljt,ZTe);gr(Ex,Yf,Vs);gr(jm,t2e,[Vs,jm]);gr(gR,UK,Vs);gr(yR,Amt,Vs);gr(fF,n2e,Vs);gr(cb,QA,[Vs,tte]);gr(fb,zgt,[Vs,tte]);gr(_h,WK,[Vs,Qc]);gr(`${_h}-${Ex}`,WK,[Vs,Qc]);gr(`${_h}-${jm}`,p2e,[Vs,Qc,jm]);gr(`${_h}-${gR}`,GK,[Vs,Qc]);gr(`${_h}-${yR}`,Vgt,[Vs,Qc]);gr(`${_h}-${fF}`,m2e,[Vs,Qc]);gr(`${KS}-${Ex}`,g2e,[Vs,Qc]);gr(`${KS}-${jm}`,y2e,[Vs,Qc,jm]);gr(`${KS}-${gR}`,YK,[Vs,Qc]);gr(`${KS}-${yR}`,Hgt,[Vs,Qc]);gr(`${KS}-${fF}`,v2e,[Vs,Qc]);gr(xx,r2e,[bR,xx]);gr(dF,i2e,bR);gr(hF,s2e,bR);gr(ete,h$e,[vR,bR]);gr(Zee,Wb,vR);gr(f$e,nte,vR);gr(bH,djt,vR);function g$e(e){return hM.has(e)}function s_(e,t){const n=hM.get(e);return n&&n.metadata[t]}function rte(e){return s_(e,Vs)}function Sx(e){return s_(e,vR)}function _H(e){return s_(e,bR)}function y$e(e){return s_(e,jm)}function vjt(e){return s_(e,tte)}function v$e(e){return s_(e,Qc)}function b$e(e){return s_(e,xx)}const bjt=["clamp","base","constant","exponent"];function _$e(e,t){const n=t[0],r=Qn(t)-n;return function(i){return e(n+i*r)}}function pF(e,t,n){return bK(ite(t||"rgb",n),e)}function w$e(e,t){const n=new Array(t),r=t+1;for(let i=0;i<t;)n[i]=e(++i/r);return n}function E$e(e,t,n){const r=n-t;let i,s,o;return!r||!Number.isFinite(r)?Sa(.5):(i=(s=e.type).indexOf("-"),s=i<0?s:s.slice(i+1),o=gr(s)().domain([t,n]).range([0,1]),bjt.forEach(a=>e[a]?o[a](e[a]()):0),o)}function ite(e,t){const n=wct[_jt(e)];return t!=null&&n&&n.gamma?n.gamma(t):n}function _jt(e){return"interpolate"+e.toLowerCase().split("-").map(t=>t[0].toUpperCase()+t.slice(1)).join("")}const wjt={blues:"cfe1f2bed8eca8cee58fc1de74b2d75ba3cf4592c63181bd206fb2125ca40a4a90",greens:"d3eecdc0e6baabdda594d3917bc77d60ba6c46ab5e329a512089430e7735036429",greys:"e2e2e2d4d4d4c4c4c4b1b1b19d9d9d8888887575756262624d4d4d3535351e1e1e",oranges:"fdd8b3fdc998fdb87bfda55efc9244f87f2cf06b18e4580bd14904b93d029f3303",purples:"e2e1efd4d4e8c4c5e0b4b3d6a3a0cc928ec3827cb97566ae684ea25c3696501f8c",reds:"fdc9b4fcb49afc9e80fc8767fa7051f6573fec3f2fdc2a25c81b1db21218970b13",blueGreen:"d5efedc1e8e0a7ddd18bd2be70c6a958ba9144ad77319c5d2089460e7736036429",bluePurple:"ccddecbad0e4a8c2dd9ab0d4919cc98d85be8b6db28a55a6873c99822287730f71",greenBlue:"d3eecec5e8c3b1e1bb9bd8bb82cec269c2ca51b2cd3c9fc7288abd1675b10b60a1",orangeRed:"fddcaffdcf9bfdc18afdad77fb9562f67d53ee6545e24932d32d1ebf130da70403",purpleBlue:"dbdaebc8cee4b1c3de97b7d87bacd15b9fc93a90c01e7fb70b70ab056199045281",purpleBlueGreen:"dbd8eac8cee4b0c3de93b7d872acd1549fc83892bb1c88a3097f8702736b016353",purpleRed:"dcc9e2d3b3d7ce9eccd186c0da6bb2e14da0e23189d91e6fc61159ab07498f023a",redPurple:"fccfccfcbec0faa9b8f98faff571a5ec539ddb3695c41b8aa908808d0179700174",yellowGreen:"e4f4acd1eca0b9e2949ed68880c97c62bb6e47aa5e3297502083440e723b036034",yellowOrangeBrown:"feeaa1fedd84fecc63feb746fca031f68921eb7215db5e0bc54c05ab3d038f3204",yellowOrangeRed:"fee087fed16ffebd59fea849fd903efc7335f9522bee3423de1b20ca0b22af0225",blueOrange:"134b852f78b35da2cb9dcae1d2e5eff2f0ebfce0bafbbf74e8932fc5690d994a07",brownBlueGreen:"704108a0651ac79548e3c78af3e6c6eef1eac9e9e48ed1c74da79e187a72025147",purpleGreen:"5b1667834792a67fb6c9aed3e6d6e8eff0efd9efd5aedda971bb75368e490e5e29",purpleOrange:"4114696647968f83b7b9b4d6dadbebf3eeeafce0bafbbf74e8932fc5690d994a07",redBlue:"8c0d25bf363adf745ef4ae91fbdbc9f2efeed2e5ef9dcae15da2cb2f78b3134b85",redGrey:"8c0d25bf363adf745ef4ae91fcdccbfaf4f1e2e2e2c0c0c0969696646464343434",yellowGreenBlue:"eff9bddbf1b4bde5b594d5b969c5be45b4c22c9ec02182b82163aa23479c1c3185",redYellowBlue:"a50026d4322cf16e43fcac64fedd90faf8c1dcf1ecabd6e875abd04a74b4313695",redYellowGreen:"a50026d4322cf16e43fcac63fedd8df9f7aed7ee8ea4d86e64bc6122964f006837",pinkYellowGreen:"8e0152c0267edd72adf0b3d6faddedf5f3efe1f2cab6de8780bb474f9125276419",spectral:"9e0142d13c4bf0704afcac63fedd8dfbf8b0e0f3a1a9dda269bda94288b55e4fa2",viridis:"440154470e61481a6c482575472f7d443a834144873d4e8a39568c35608d31688e2d708e2a788e27818e23888e21918d1f988b1fa08822a8842ab07f35b77943bf7154c56866cc5d7ad1518fd744a5db36bcdf27d2e21be9e51afde725",magma:"0000040404130b0924150e3720114b2c11603b0f704a107957157e651a80721f817f24828c29819a2e80a8327db6377ac43c75d1426fde4968e95462f1605df76f5cfa7f5efc8f65fe9f6dfeaf78febf84fece91fddea0fcedaffcfdbf",inferno:"0000040403130c0826170c3b240c4f330a5f420a68500d6c5d126e6b176e781c6d86216b932667a12b62ae305cbb3755c73e4cd24644dd513ae65c30ed6925f3771af8850ffb9506fca50afcb519fac62df6d645f2e661f3f484fcffa4",plasma:"0d088723069033059742039d5002a25d01a66a00a87801a88405a7900da49c179ea72198b12a90ba3488c33d80cb4779d35171da5a69e16462e76e5bed7953f2834cf68f44fa9a3dfca636fdb32ffec029fcce25f9dc24f5ea27f0f921",cividis:"00205100235800265d002961012b65042e670831690d346b11366c16396d1c3c6e213f6e26426e2c456e31476e374a6e3c4d6e42506e47536d4c566d51586e555b6e5a5e6e5e616e62646f66676f6a6a706e6d717270717573727976737c79747f7c75827f758682768985778c8877908b78938e789691789a94789e9778a19b78a59e77a9a177aea575b2a874b6ab73bbaf71c0b26fc5b66dc9b96acebd68d3c065d8c462ddc85fe2cb5ce7cf58ebd355f0d652f3da4ff7de4cfae249fce647",rainbow:"6e40aa883eb1a43db3bf3cafd83fa4ee4395fe4b83ff576eff6659ff7847ff8c38f3a130e2b72fcfcc36bee044aff05b8ff4576ff65b52f6673af27828ea8d1ddfa319d0b81cbecb23abd82f96e03d82e14c6edb5a5dd0664dbf6e40aa",sinebow:"ff4040fc582af47218e78d0bd5a703bfbf00a7d5038de70b72f41858fc2a40ff402afc5818f4720be78d03d5a700bfbf03a7d50b8de71872f42a58fc4040ff582afc7218f48d0be7a703d5bf00bfd503a7e70b8df41872fc2a58ff4040",turbo:"23171b32204a3e2a71453493493eae4b49c54a53d7485ee44569ee4074f53c7ff8378af93295f72e9ff42ba9ef28b3e926bce125c5d925cdcf27d5c629dcbc2de3b232e9a738ee9d3ff39347f68950f9805afc7765fd6e70fe667cfd5e88fc5795fb51a1f84badf545b9f140c5ec3cd0e637dae034e4d931ecd12ef4c92bfac029ffb626ffad24ffa223ff9821ff8d1fff821dff771cfd6c1af76118f05616e84b14df4111d5380fcb2f0dc0260ab61f07ac1805a313029b0f00950c00910b00",browns:"eedbbdecca96e9b97ae4a865dc9856d18954c7784cc0673fb85536ad44339f3632",tealBlues:"bce4d89dd3d181c3cb65b3c245a2b9368fae347da0306a932c5985",teals:"bbdfdfa2d4d58ac9c975bcbb61b0af4da5a43799982b8b8c1e7f7f127273006667",warmGreys:"dcd4d0cec5c1c0b8b4b3aaa7a59c9998908c8b827f7e7673726866665c5a59504e",goldGreen:"f4d166d5ca60b6c35c98bb597cb25760a6564b9c533f8f4f33834a257740146c36",goldOrange:"f4d166f8be5cf8aa4cf5983bf3852aef701be2621fd65322c54923b142239e3a26",goldRed:"f4d166f6be59f9aa51fc964ef6834bee734ae56249db5247cf4244c43141b71d3e",lightGreyRed:"efe9e6e1dad7d5cbc8c8bdb9bbaea9cd967ddc7b43e15f19df4011dc000b",lightGreyTeal:"e4eaead6dcddc8ced2b7c2c7a6b4bc64b0bf22a6c32295c11f85be1876bc",lightMulti:"e0f1f2c4e9d0b0de9fd0e181f6e072f6c053f3993ef77440ef4a3c",lightOrange:"f2e7daf7d5baf9c499fab184fa9c73f68967ef7860e8645bde515bd43d5b",lightTealBlue:"e3e9e0c0dccf9aceca7abfc859afc0389fb9328dad2f7ca0276b95255988",darkBlue:"3232322d46681a5c930074af008cbf05a7ce25c0dd38daed50f3faffffff",darkGold:"3c3c3c584b37725e348c7631ae8b2bcfa424ecc31ef9de30fff184ffffff",darkGreen:"3a3a3a215748006f4d048942489e4276b340a6c63dd2d836ffeb2cffffaa",darkMulti:"3737371f5287197d8c29a86995ce3fffe800ffffff",darkRed:"3434347036339e3c38cc4037e75d1eec8620eeab29f0ce32ffeb2c"},Ejt={accent:Wgt,category10:qgt,category20:"1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5",category20b:"393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6",category20c:"3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9",dark2:Ggt,observable10:Ygt,paired:Kgt,pastel1:Xgt,pastel2:Qgt,set1:Jgt,set2:Zgt,set3:e0t,tableau10:"4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac",tableau20:"4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5"};function x$e(e){if(je(e))return e;const t=e.length/6|0,n=new Array(t);for(let r=0;r<t;)n[r]="#"+e.slice(r*6,++r*6);return n}function S$e(e,t){for(const n in e)ste(n,t(e[n]))}const Lpe={};S$e(Ejt,x$e);S$e(wjt,e=>pF(x$e(e)));function ste(e,t){return e=e&&e.toLowerCase(),arguments.length>1?(Lpe[e]=t,this):Lpe[e]}const XP="symbol",xjt="discrete",Sjt="gradient",Tjt=e=>je(e)?e.map(t=>String(t)):String(e),Cjt=(e,t)=>e[1]-t[1],Ajt=(e,t)=>t[1]-e[1];function ote(e,t,n){let r;return lr(t)&&(e.bins&&(t=Math.max(t,e.bins.length)),n!=null&&(t=Math.min(t,Math.floor(dR(e.domain())/n||1)+1))),gt(t)&&(r=t.step,t=t.interval),mt(t)&&(t=e.type===cb?WS(t):e.type==fb?GS(t):Le("Only time and utc scales accept interval strings."),r&&(t=t.every(r))),t}function T$e(e,t,n){let r=e.range(),i=r[0],s=Qn(r),o=Cjt;if(i>s&&(r=s,s=i,i=r,o=Ajt),i=Math.floor(i),s=Math.ceil(s),t=t.map(a=>[a,e(a)]).filter(a=>i<=a[1]&&a[1]<=s).sort(o).map(a=>a[0]),n>0&&t.length>1){const a=[t[0],Qn(t)];for(;t.length>n&&t.length>=3;)t=t.filter((u,l)=>!(l%2));t.length<3&&(t=a)}return t}function ate(e,t){return e.bins?T$e(e,e.bins,t):e.ticks?e.ticks(t):e.domain()}function C$e(e,t,n,r,i,s){const o=t.type;let a=Tjt;if(o===cb||i===cb)a=e.timeFormat(r);else if(o===fb||i===fb)a=e.utcFormat(r);else if(y$e(o)){const u=e.formatFloat(r);if(s||t.bins)a=u;else{const l=A$e(t,n,!1);a=c=>l(c)?u(c):""}}else if(t.tickFormat){const u=t.domain();a=e.formatSpan(u[0],u[u.length-1],n,r)}else r&&(a=e.format(r));return a}function A$e(e,t,n){const r=ate(e,t),i=e.base(),s=Math.log(i),o=Math.max(1,i*t/r.length),a=u=>{let l=u/Math.pow(i,Math.round(Math.log(u)/s));return l*i<i-.5&&(l*=i),l<=o};return n?r.filter(a):a}const wH={[xx]:"quantiles",[dF]:"thresholds",[hF]:"domain"},I$e={[xx]:"quantiles",[dF]:"domain"};function k$e(e,t){return e.bins?Rjt(e.bins):e.type===jm?A$e(e,t,!0):wH[e.type]?kjt(e[wH[e.type]]()):ate(e,t)}function Ijt(e,t,n){const r=t[I$e[t.type]](),i=r.length;let s=i>1?r[1]-r[0]:r[0],o;for(o=1;o<i;++o)s=Math.min(s,r[o]-r[o-1]);return e.formatSpan(0,s,3*10,n)}function kjt(e){const t=[-1/0].concat(e);return t.max=1/0,t}function Rjt(e){const t=e.slice(0,-1);return t.max=Qn(e),t}const Njt=e=>wH[e.type]||e.bins;function R$e(e,t,n,r,i,s,o){const a=I$e[t.type]&&s!==cb&&s!==fb?Ijt(e,t,i):C$e(e,t,n,i,s,o);return r===XP&&Njt(t)?Djt(a):r===xjt?Pjt(a):Ojt(a)}const Djt=e=>(t,n,r)=>{const i=Fpe(r[n+1],Fpe(r.max,1/0)),s=jpe(t,e),o=jpe(i,e);return s&&o?s+"  "+o:o?"< "+o:" "+s},Fpe=(e,t)=>e??t,Pjt=e=>(t,n)=>n?e(t):null,Ojt=e=>t=>e(t),jpe=(e,t)=>Number.isFinite(e)?t(e):null;function $jt(e){const t=e.domain(),n=t.length-1;let r=+t[0],i=+Qn(t),s=i-r;if(e.type===hF){const o=n?s/n:.1;r-=o,i+=o,s=i-r}return o=>(o-r)/s}function Mjt(e,t,n,r){const i=r||t.type;return mt(n)&&vjt(i)&&(n=n.replace(/%a/g,"%A").replace(/%b/g,"%B")),!n&&i===cb?e.timeFormat("%A, %d %B %Y, %X"):!n&&i===fb?e.utcFormat("%A, %d %B %Y, %X UTC"):R$e(e,t,5,null,n,r,!0)}function N$e(e,t,n){n=n||{};const r=Math.max(3,n.maxlen||7),i=Mjt(e,t,n.format,n.formatType);if(_H(t.type)){const s=k$e(t).slice(1).map(i),o=s.length;return`${o} boundar${o===1?"y":"ies"}: ${s.join(", ")}`}else if(Sx(t.type)){const s=t.domain(),o=s.length,a=o>r?s.slice(0,r-2).map(i).join(", ")+", ending with "+s.slice(-1).map(i):s.map(i).join(", ");return`${o} value${o===1?"":"s"}: ${a}`}else{const s=t.domain();return`values from ${i(s[0])} to ${i(Qn(s))}`}}let D$e=0;function Ljt(){D$e=0}const pM="p_";function ute(e){return e&&e.gradient}function P$e(e,t,n){const r=e.gradient;let i=e.id,s=r==="radial"?pM:"";return i||(i=e.id="gradient_"+D$e++,r==="radial"?(e.x1=Td(e.x1,.5),e.y1=Td(e.y1,.5),e.r1=Td(e.r1,0),e.x2=Td(e.x2,.5),e.y2=Td(e.y2,.5),e.r2=Td(e.r2,.5),s=pM):(e.x1=Td(e.x1,0),e.y1=Td(e.y1,0),e.x2=Td(e.x2,1),e.y2=Td(e.y2,0))),t[i]=e,"url("+(n||"")+"#"+s+i+")"}function Td(e,t){return e??t}function O$e(e,t){var n=[],r;return r={gradient:"linear",x1:e?e[0]:0,y1:e?e[1]:0,x2:t?t[0]:1,y2:t?t[1]:0,stops:n,stop:function(i,s){return n.push({offset:i,color:s}),r}}}const Bpe={basis:{curve:S2e},"basis-closed":{curve:p0t},"basis-open":{curve:m0t},bundle:{curve:g0t,tension:"beta",value:.85},cardinal:{curve:y0t,tension:"tension",value:0},"cardinal-open":{curve:b0t,tension:"tension",value:0},"cardinal-closed":{curve:v0t,tension:"tension",value:0},"catmull-rom":{curve:_0t,tension:"alpha",value:.5},"catmull-rom-closed":{curve:w0t,tension:"alpha",value:.5},"catmull-rom-open":{curve:E0t,tension:"alpha",value:.5},linear:{curve:KK},"linear-closed":{curve:x0t},monotone:{horizontal:T0t,vertical:S0t},natural:{curve:C0t},step:{curve:A0t},"step-after":{curve:k0t},"step-before":{curve:I0t}};function lte(e,t,n){var r=jt(Bpe,e)&&Bpe[e],i=null;return r&&(i=r.curve||r[t||"vertical"],r.tension&&n!=null&&(i=i[r.tension](n))),i}const Fjt={m:2,l:2,h:1,v:1,z:0,c:6,s:4,q:4,t:2,a:7},jjt=/[mlhvzcsqta]([^mlhvzcsqta]+|$)/gi,Bjt=/^[+-]?(([0-9]*\.[0-9]+)|([0-9]+\.)|([0-9]+))([eE][+-]?[0-9]+)?/,Ujt=/^((\s+,?\s*)|(,\s*))/,zjt=/^[01]/;function Tx(e){const t=[];return(e.match(jjt)||[]).forEach(r=>{let i=r[0];const s=i.toLowerCase(),o=Fjt[s],a=Vjt(s,o,r.slice(1).trim()),u=a.length;if(u<o||u&&u%o!==0)throw Error("Invalid SVG path, incorrect parameter count");if(t.push([i,...a.slice(0,o)]),u!==o){s==="m"&&(i=i==="M"?"L":"l");for(let l=o;l<u;l+=o)t.push([i,...a.slice(l,l+o)])}}),t}function Vjt(e,t,n){const r=[];for(let i=0;t&&i<n.length;)for(let s=0;s<t;++s){const o=e==="a"&&(s===3||s===4)?zjt:Bjt,a=n.slice(i).match(o);if(a===null)throw Error("Invalid SVG path, incorrect parameter type");i+=a[0].length,r.push(+a[0]);const u=n.slice(i).match(Ujt);u!==null&&(i+=u[0].length)}return r}const dy=Math.PI/180,Hjt=1e-14,Kv=Math.PI/2,Jd=Math.PI*2,z_=Math.sqrt(3)/2;var X9={},Q9={},$$e=[].join;function qjt(e,t,n,r,i,s,o,a,u){const l=$$e.call(arguments);if(X9[l])return X9[l];const c=o*dy,f=Math.sin(c),d=Math.cos(c);n=Math.abs(n),r=Math.abs(r);const h=d*(a-e)*.5+f*(u-t)*.5,p=d*(u-t)*.5-f*(a-e)*.5;let m=h*h/(n*n)+p*p/(r*r);m>1&&(m=Math.sqrt(m),n*=m,r*=m);const g=d/n,y=f/n,v=-f/r,b=d/r,w=g*a+y*u,E=v*a+b*u,T=g*e+y*t,S=v*e+b*t;let A=1/((T-w)*(T-w)+(S-E)*(S-E))-.25;A<0&&(A=0);let k=Math.sqrt(A);s==i&&(k=-k);const N=.5*(w+T)-k*(S-E),O=.5*(E+S)+k*(T-w),P=Math.atan2(E-O,w-N);let F=Math.atan2(S-O,T-N)-P;F<0&&s===1?F+=Jd:F>0&&s===0&&(F-=Jd);const M=Math.ceil(Math.abs(F/(Kv+.001))),B=[];for(let U=0;U<M;++U){const H=P+U*F/M,D=P+(U+1)*F/M;B[U]=[N,O,H,D,n,r,f,d]}return X9[l]=B}function Wjt(e){const t=$$e.call(e);if(Q9[t])return Q9[t];var n=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],u=e[6],l=e[7];const c=l*o,f=-u*a,d=u*o,h=l*a,p=Math.cos(i),m=Math.sin(i),g=Math.cos(s),y=Math.sin(s),v=.5*(s-i),b=Math.sin(v*.5),w=8/3*b*b/Math.sin(v),E=n+p-w*m,T=r+m+w*p,S=n+g,C=r+y,A=S+w*y,k=C-w*g;return Q9[t]=[c*E+f*T,d*E+h*T,c*A+f*k,d*A+h*k,c*S+f*C,d*S+h*C]}const ac=["l",0,0,0,0,0,0,0];function Gjt(e,t,n){const r=ac[0]=e[0];if(r==="a"||r==="A")ac[1]=t*e[1],ac[2]=n*e[2],ac[3]=e[3],ac[4]=e[4],ac[5]=e[5],ac[6]=t*e[6],ac[7]=n*e[7];else if(r==="h"||r==="H")ac[1]=t*e[1];else if(r==="v"||r==="V")ac[1]=n*e[1];else for(var i=1,s=e.length;i<s;++i)ac[i]=(i%2==1?t:n)*e[i];return ac}function OI(e,t,n,r,i,s){var o,a=null,u=0,l=0,c=0,f=0,d,h,p,m,g=0,y=0;n==null&&(n=0),r==null&&(r=0),i==null&&(i=1),s==null&&(s=i),e.beginPath&&e.beginPath();for(var v=0,b=t.length;v<b;++v){switch(o=t[v],(i!==1||s!==1)&&(o=Gjt(o,i,s)),o[0]){case"l":u+=o[1],l+=o[2],e.lineTo(u+n,l+r);break;case"L":u=o[1],l=o[2],e.lineTo(u+n,l+r);break;case"h":u+=o[1],e.lineTo(u+n,l+r);break;case"H":u=o[1],e.lineTo(u+n,l+r);break;case"v":l+=o[1],e.lineTo(u+n,l+r);break;case"V":l=o[1],e.lineTo(u+n,l+r);break;case"m":u+=o[1],l+=o[2],g=u,y=l,e.moveTo(u+n,l+r);break;case"M":u=o[1],l=o[2],g=u,y=l,e.moveTo(u+n,l+r);break;case"c":d=u+o[5],h=l+o[6],c=u+o[3],f=l+o[4],e.bezierCurveTo(u+o[1]+n,l+o[2]+r,c+n,f+r,d+n,h+r),u=d,l=h;break;case"C":u=o[5],l=o[6],c=o[3],f=o[4],e.bezierCurveTo(o[1]+n,o[2]+r,c+n,f+r,u+n,l+r);break;case"s":d=u+o[3],h=l+o[4],c=2*u-c,f=2*l-f,e.bezierCurveTo(c+n,f+r,u+o[1]+n,l+o[2]+r,d+n,h+r),c=u+o[1],f=l+o[2],u=d,l=h;break;case"S":d=o[3],h=o[4],c=2*u-c,f=2*l-f,e.bezierCurveTo(c+n,f+r,o[1]+n,o[2]+r,d+n,h+r),u=d,l=h,c=o[1],f=o[2];break;case"q":d=u+o[3],h=l+o[4],c=u+o[1],f=l+o[2],e.quadraticCurveTo(c+n,f+r,d+n,h+r),u=d,l=h;break;case"Q":d=o[3],h=o[4],e.quadraticCurveTo(o[1]+n,o[2]+r,d+n,h+r),u=d,l=h,c=o[1],f=o[2];break;case"t":d=u+o[1],h=l+o[2],a[0].match(/[QqTt]/)===null?(c=u,f=l):a[0]==="t"?(c=2*u-p,f=2*l-m):a[0]==="q"&&(c=2*u-c,f=2*l-f),p=c,m=f,e.quadraticCurveTo(c+n,f+r,d+n,h+r),u=d,l=h,c=u+o[1],f=l+o[2];break;case"T":d=o[1],h=o[2],c=2*u-c,f=2*l-f,e.quadraticCurveTo(c+n,f+r,d+n,h+r),u=d,l=h;break;case"a":Upe(e,u+n,l+r,[o[1],o[2],o[3],o[4],o[5],o[6]+u+n,o[7]+l+r]),u+=o[6],l+=o[7];break;case"A":Upe(e,u+n,l+r,[o[1],o[2],o[3],o[4],o[5],o[6]+n,o[7]+r]),u=o[6],l=o[7];break;case"z":case"Z":u=g,l=y,e.closePath();break}a=o}}function Upe(e,t,n,r){const i=qjt(r[5],r[6],r[0],r[1],r[3],r[4],r[2],t,n);for(let s=0;s<i.length;++s){const o=Wjt(i[s]);e.bezierCurveTo(o[0],o[1],o[2],o[3],o[4],o[5])}}const zpe=.5773502691896257,Vpe={circle:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(n,0),e.arc(0,0,n,0,Jd)}},cross:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/2.5;e.moveTo(-n,-r),e.lineTo(-n,r),e.lineTo(-r,r),e.lineTo(-r,n),e.lineTo(r,n),e.lineTo(r,r),e.lineTo(n,r),e.lineTo(n,-r),e.lineTo(r,-r),e.lineTo(r,-n),e.lineTo(-r,-n),e.lineTo(-r,-r),e.closePath()}},diamond:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(0,-n),e.lineTo(n,0),e.lineTo(0,n),e.closePath()}},square:{draw:function(e,t){var n=Math.sqrt(t),r=-n/2;e.rect(r,r,n,n)}},arrow:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/7,i=n/2.5,s=n/8;e.moveTo(-r,n),e.lineTo(r,n),e.lineTo(r,-s),e.lineTo(i,-s),e.lineTo(0,-n),e.lineTo(-i,-s),e.lineTo(-r,-s),e.closePath()}},wedge:{draw:function(e,t){var n=Math.sqrt(t)/2,r=z_*n,i=r-n*zpe,s=n/4;e.moveTo(0,-r-i),e.lineTo(-s,r-i),e.lineTo(s,r-i),e.closePath()}},triangle:{draw:function(e,t){var n=Math.sqrt(t)/2,r=z_*n,i=r-n*zpe;e.moveTo(0,-r-i),e.lineTo(-n,r-i),e.lineTo(n,r-i),e.closePath()}},"triangle-up":{draw:function(e,t){var n=Math.sqrt(t)/2,r=z_*n;e.moveTo(0,-r),e.lineTo(-n,r),e.lineTo(n,r),e.closePath()}},"triangle-down":{draw:function(e,t){var n=Math.sqrt(t)/2,r=z_*n;e.moveTo(0,r),e.lineTo(-n,-r),e.lineTo(n,-r),e.closePath()}},"triangle-right":{draw:function(e,t){var n=Math.sqrt(t)/2,r=z_*n;e.moveTo(r,0),e.lineTo(-r,-n),e.lineTo(-r,n),e.closePath()}},"triangle-left":{draw:function(e,t){var n=Math.sqrt(t)/2,r=z_*n;e.moveTo(-r,0),e.lineTo(r,-n),e.lineTo(r,n),e.closePath()}},stroke:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(n,0)}}};function M$e(e){return jt(Vpe,e)?Vpe[e]:Yjt(e)}var J9={};function Yjt(e){if(!jt(J9,e)){const t=Tx(e);J9[e]={draw:function(n,r){OI(n,t,0,0,Math.sqrt(r)/2)}}}return J9[e]}const Eg=.448084975506;function Kjt(e){return e.x}function Xjt(e){return e.y}function Qjt(e){return e.width}function Jjt(e){return e.height}function wp(e){return typeof e=="function"?e:()=>+e}function AD(e,t,n){return Math.max(t,Math.min(e,n))}function L$e(){var e=Kjt,t=Xjt,n=Qjt,r=Jjt,i=wp(0),s=i,o=i,a=i,u=null;function l(c,f,d){var h,p=f??+e.call(this,c),m=d??+t.call(this,c),g=+n.call(this,c),y=+r.call(this,c),v=Math.min(g,y)/2,b=AD(+i.call(this,c),0,v),w=AD(+s.call(this,c),0,v),E=AD(+o.call(this,c),0,v),T=AD(+a.call(this,c),0,v);if(u||(u=h=A6()),b<=0&&w<=0&&E<=0&&T<=0)u.rect(p,m,g,y);else{var S=p+g,C=m+y;u.moveTo(p+b,m),u.lineTo(S-w,m),u.bezierCurveTo(S-Eg*w,m,S,m+Eg*w,S,m+w),u.lineTo(S,C-T),u.bezierCurveTo(S,C-Eg*T,S-Eg*T,C,S-T,C),u.lineTo(p+E,C),u.bezierCurveTo(p+Eg*E,C,p,C-Eg*E,p,C-E),u.lineTo(p,m+b),u.bezierCurveTo(p,m+Eg*b,p+Eg*b,m,p+b,m),u.closePath()}if(h)return u=null,h+""||null}return l.x=function(c){return arguments.length?(e=wp(c),l):e},l.y=function(c){return arguments.length?(t=wp(c),l):t},l.width=function(c){return arguments.length?(n=wp(c),l):n},l.height=function(c){return arguments.length?(r=wp(c),l):r},l.cornerRadius=function(c,f,d,h){return arguments.length?(i=wp(c),s=f!=null?wp(f):i,a=d!=null?wp(d):i,o=h!=null?wp(h):s,l):i},l.context=function(c){return arguments.length?(u=c??null,l):u},l}function F$e(){var e,t,n,r,i=null,s,o,a,u;function l(f,d,h){const p=h/2;if(s){var m=a-d,g=f-o;if(m||g){var y=Math.hypot(m,g),v=(m/=y)*u,b=(g/=y)*u,w=Math.atan2(g,m);i.moveTo(o-v,a-b),i.lineTo(f-m*p,d-g*p),i.arc(f,d,p,w-Math.PI,w),i.lineTo(o+v,a+b),i.arc(o,a,u,w,w+Math.PI)}else i.arc(f,d,p,0,Jd);i.closePath()}else s=1;o=f,a=d,u=p}function c(f){var d,h=f.length,p,m=!1,g;for(i==null&&(i=g=A6()),d=0;d<=h;++d)!(d<h&&r(p=f[d],d,f))===m&&(m=!m)&&(s=0),m&&l(+e(p,d,f),+t(p,d,f),+n(p,d,f));if(g)return i=null,g+""||null}return c.x=function(f){return arguments.length?(e=f,c):e},c.y=function(f){return arguments.length?(t=f,c):t},c.size=function(f){return arguments.length?(n=f,c):n},c.defined=function(f){return arguments.length?(r=f,c):r},c.context=function(f){return arguments.length?(f==null?i=null:i=f,c):i},c}function _R(e,t){return e??t}const wR=e=>e.x||0,ER=e=>e.y||0,Zjt=e=>e.width||0,e8t=e=>e.height||0,t8t=e=>(e.x||0)+(e.width||0),n8t=e=>(e.y||0)+(e.height||0),r8t=e=>e.startAngle||0,i8t=e=>e.endAngle||0,s8t=e=>e.padAngle||0,o8t=e=>e.innerRadius||0,a8t=e=>e.outerRadius||0,u8t=e=>e.cornerRadius||0,l8t=e=>_R(e.cornerRadiusTopLeft,e.cornerRadius)||0,c8t=e=>_R(e.cornerRadiusTopRight,e.cornerRadius)||0,f8t=e=>_R(e.cornerRadiusBottomRight,e.cornerRadius)||0,d8t=e=>_R(e.cornerRadiusBottomLeft,e.cornerRadius)||0,h8t=e=>_R(e.size,64),p8t=e=>e.size||1,mF=e=>e.defined!==!1,m8t=e=>M$e(e.shape||"circle"),g8t=Sz().startAngle(r8t).endAngle(i8t).padAngle(s8t).innerRadius(o8t).outerRadius(a8t).cornerRadius(u8t),y8t=x2e().x(wR).y1(ER).y0(n8t).defined(mF),v8t=x2e().y(ER).x1(wR).x0(t8t).defined(mF),b8t=XK().x(wR).y(ER).defined(mF),_8t=L$e().x(wR).y(ER).width(Zjt).height(e8t).cornerRadius(l8t,c8t,f8t,d8t),w8t=h0t().type(m8t).size(h8t),E8t=F$e().x(wR).y(ER).defined(mF).size(p8t);function cte(e){return e.cornerRadius||e.cornerRadiusTopLeft||e.cornerRadiusTopRight||e.cornerRadiusBottomRight||e.cornerRadiusBottomLeft}function x8t(e,t){return g8t.context(e)(t)}function S8t(e,t){const n=t[0],r=n.interpolate||"linear";return(n.orient==="horizontal"?v8t:y8t).curve(lte(r,n.orient,n.tension)).context(e)(t)}function T8t(e,t){const n=t[0],r=n.interpolate||"linear";return b8t.curve(lte(r,n.orient,n.tension)).context(e)(t)}function XS(e,t,n,r){return _8t.context(e)(t,n,r)}function C8t(e,t){return(t.mark.shape||t.shape).context(e)(t)}function A8t(e,t){return w8t.context(e)(t)}function I8t(e,t){return E8t.context(e)(t)}var j$e=1;function B$e(){j$e=1}function fte(e,t,n){var r=t.clip,i=e._defs,s=t.clip_id||(t.clip_id="clip"+j$e++),o=i.clipping[s]||(i.clipping[s]={id:s});return _n(r)?o.path=r(null):cte(n)?o.path=XS(null,n,0,0):(o.width=n.width||0,o.height=n.height||0),"url(#"+s+")"}function Ts(e){this.clear(),e&&this.union(e)}Ts.prototype={clone(){return new Ts(this)},clear(){return this.x1=+Number.MAX_VALUE,this.y1=+Number.MAX_VALUE,this.x2=-Number.MAX_VALUE,this.y2=-Number.MAX_VALUE,this},empty(){return this.x1===+Number.MAX_VALUE&&this.y1===+Number.MAX_VALUE&&this.x2===-Number.MAX_VALUE&&this.y2===-Number.MAX_VALUE},equals(e){return this.x1===e.x1&&this.y1===e.y1&&this.x2===e.x2&&this.y2===e.y2},set(e,t,n,r){return n<e?(this.x2=e,this.x1=n):(this.x1=e,this.x2=n),r<t?(this.y2=t,this.y1=r):(this.y1=t,this.y2=r),this},add(e,t){return e<this.x1&&(this.x1=e),t<this.y1&&(this.y1=t),e>this.x2&&(this.x2=e),t>this.y2&&(this.y2=t),this},expand(e){return this.x1-=e,this.y1-=e,this.x2+=e,this.y2+=e,this},round(){return this.x1=Math.floor(this.x1),this.y1=Math.floor(this.y1),this.x2=Math.ceil(this.x2),this.y2=Math.ceil(this.y2),this},scale(e){return this.x1*=e,this.y1*=e,this.x2*=e,this.y2*=e,this},translate(e,t){return this.x1+=e,this.x2+=e,this.y1+=t,this.y2+=t,this},rotate(e,t,n){const r=this.rotatedPoints(e,t,n);return this.clear().add(r[0],r[1]).add(r[2],r[3]).add(r[4],r[5]).add(r[6],r[7])},rotatedPoints(e,t,n){var{x1:r,y1:i,x2:s,y2:o}=this,a=Math.cos(e),u=Math.sin(e),l=t-t*a+n*u,c=n-t*u-n*a;return[a*r-u*i+l,u*r+a*i+c,a*r-u*o+l,u*r+a*o+c,a*s-u*i+l,u*s+a*i+c,a*s-u*o+l,u*s+a*o+c]},union(e){return e.x1<this.x1&&(this.x1=e.x1),e.y1<this.y1&&(this.y1=e.y1),e.x2>this.x2&&(this.x2=e.x2),e.y2>this.y2&&(this.y2=e.y2),this},intersect(e){return e.x1>this.x1&&(this.x1=e.x1),e.y1>this.y1&&(this.y1=e.y1),e.x2<this.x2&&(this.x2=e.x2),e.y2<this.y2&&(this.y2=e.y2),this},encloses(e){return e&&this.x1<=e.x1&&this.x2>=e.x2&&this.y1<=e.y1&&this.y2>=e.y2},alignsWith(e){return e&&(this.x1==e.x1||this.x2==e.x2||this.y1==e.y1||this.y2==e.y2)},intersects(e){return e&&!(this.x2<e.x1||this.x1>e.x2||this.y2<e.y1||this.y1>e.y2)},contains(e,t){return!(e<this.x1||e>this.x2||t<this.y1||t>this.y2)},width(){return this.x2-this.x1},height(){return this.y2-this.y1}};function gF(e){this.mark=e,this.bounds=this.bounds||new Ts}function yF(e){gF.call(this,e),this.items=this.items||[]}lt(yF,gF);class U$e{constructor(t){this._pending=0,this._loader=t||Z4()}pending(){return this._pending}sanitizeURL(t){const n=this;return Hpe(n),n._loader.sanitize(t,{context:"href"}).then(r=>(QT(n),r)).catch(()=>(QT(n),null))}loadImage(t){const n=this,r=ujt();return Hpe(n),n._loader.sanitize(t,{context:"image"}).then(i=>{const s=i.href;if(!s||!r)throw{url:s};const o=new r,a=jt(i,"crossOrigin")?i.crossOrigin:"anonymous";return a!=null&&(o.crossOrigin=a),o.onload=()=>QT(n),o.onerror=()=>QT(n),o.src=s,o}).catch(i=>(QT(n),{complete:!1,width:0,height:0,src:i&&i.url||""}))}ready(){const t=this;return new Promise(n=>{function r(i){t.pending()?setTimeout(()=>{r(!0)},10):n(i)}r(!1)})}}function Hpe(e){e._pending+=1}function QT(e){e._pending-=1}function og(e,t,n){if(t.stroke&&t.opacity!==0&&t.strokeOpacity!==0){const r=t.strokeWidth!=null?+t.strokeWidth:1;e.expand(r+(n?k8t(t,r):0))}return e}function k8t(e,t){return e.strokeJoin&&e.strokeJoin!=="miter"?0:t}const R8t=Jd-1e-8;let vF,QP,JP,v1,EH,ZP,xH,SH;const r0=(e,t)=>vF.add(e,t),eO=(e,t)=>r0(QP=e,JP=t),qpe=e=>r0(e,vF.y1),Wpe=e=>r0(vF.x1,e),Xv=(e,t)=>EH*e+xH*t,Qv=(e,t)=>ZP*e+SH*t,Z9=(e,t)=>r0(Xv(e,t),Qv(e,t)),eB=(e,t)=>eO(Xv(e,t),Qv(e,t));function xR(e,t){return vF=e,t?(v1=t*dy,EH=SH=Math.cos(v1),ZP=Math.sin(v1),xH=-ZP):(EH=SH=1,v1=ZP=xH=0),N8t}const N8t={beginPath(){},closePath(){},moveTo:eB,lineTo:eB,rect(e,t,n,r){v1?(Z9(e+n,t),Z9(e+n,t+r),Z9(e,t+r),eB(e,t)):(r0(e+n,t+r),eO(e,t))},quadraticCurveTo(e,t,n,r){const i=Xv(e,t),s=Qv(e,t),o=Xv(n,r),a=Qv(n,r);Gpe(QP,i,o,qpe),Gpe(JP,s,a,Wpe),eO(o,a)},bezierCurveTo(e,t,n,r,i,s){const o=Xv(e,t),a=Qv(e,t),u=Xv(n,r),l=Qv(n,r),c=Xv(i,s),f=Qv(i,s);Ype(QP,o,u,c,qpe),Ype(JP,a,l,f,Wpe),eO(c,f)},arc(e,t,n,r,i,s){if(r+=v1,i+=v1,QP=n*Math.cos(i)+e,JP=n*Math.sin(i)+t,Math.abs(i-r)>R8t)r0(e-n,t-n),r0(e+n,t+n);else{const o=l=>r0(n*Math.cos(l)+e,n*Math.sin(l)+t);let a,u;if(o(r),o(i),i!==r)if(r=r%Jd,r<0&&(r+=Jd),i=i%Jd,i<0&&(i+=Jd),i<r&&(s=!s,a=r,r=i,i=a),s)for(i-=Jd,a=r-r%Kv,u=0;u<4&&a>i;++u,a-=Kv)o(a);else for(a=r-r%Kv+Kv,u=0;u<4&&a<i;++u,a=a+Kv)o(a)}}};function Gpe(e,t,n,r){const i=(e-t)/(e+n-2*t);0<i&&i<1&&r(e+(t-e)*i)}function Ype(e,t,n,r,i){const s=r-e+3*t-3*n,o=e+n-2*t,a=e-t;let u=0,l=0,c;Math.abs(s)>Hjt?(c=o*o+a*s,c>=0&&(c=Math.sqrt(c),u=(-o+c)/s,l=(-o-c)/s)):u=.5*a/o,0<u&&u<1&&i(Kpe(u,e,t,n,r)),0<l&&l<1&&i(Kpe(l,e,t,n,r))}function Kpe(e,t,n,r,i){const s=1-e,o=s*s,a=e*e;return o*s*t+3*o*e*n+3*s*a*r+a*e*i}var O0=(O0=P0(1,1))?O0.getContext("2d"):null;const TH=new Ts;function dte(e){return function(t,n){if(!O0)return!0;e(O0,t),TH.clear().union(t.bounds).intersect(n).round();const{x1:r,y1:i,x2:s,y2:o}=TH;for(let a=i;a<=o;++a)for(let u=r;u<=s;++u)if(O0.isPointInPath(u,a))return!0;return!1}}function hte(e,t){return t.contains(e.x||0,e.y||0)}function z$e(e,t){const n=e.x||0,r=e.y||0,i=e.width||0,s=e.height||0;return t.intersects(TH.set(n,r,n+i,r+s))}function V$e(e,t){const n=e.x||0,r=e.y||0,i=e.x2!=null?e.x2:n,s=e.y2!=null?e.y2:r;return Mw(t,n,r,i,s)}function Mw(e,t,n,r,i){const{x1:s,y1:o,x2:a,y2:u}=e,l=r-t,c=i-n;let f=0,d=1,h,p,m,g;for(g=0;g<4;++g){if(g===0&&(h=-l,p=-(s-t)),g===1&&(h=l,p=a-t),g===2&&(h=-c,p=-(o-n)),g===3&&(h=c,p=u-n),Math.abs(h)<1e-10&&p<0)return!1;if(m=p/h,h<0){if(m>d)return!1;m>f&&(f=m)}else if(h>0){if(m<f)return!1;m<d&&(d=m)}}return!0}function Cx(e,t){e.globalCompositeOperation=t.blend||"source-over"}function lf(e,t){return e??t}function Xpe(e,t){const n=t.length;for(let r=0;r<n;++r)e.addColorStop(t[r].offset,t[r].color);return e}function D8t(e,t,n){const r=n.width(),i=n.height();let s;if(t.gradient==="radial")s=e.createRadialGradient(n.x1+lf(t.x1,.5)*r,n.y1+lf(t.y1,.5)*i,Math.max(r,i)*lf(t.r1,0),n.x1+lf(t.x2,.5)*r,n.y1+lf(t.y2,.5)*i,Math.max(r,i)*lf(t.r2,.5));else{const o=lf(t.x1,0),a=lf(t.y1,0),u=lf(t.x2,1),l=lf(t.y2,0);if(o===u||a===l||r===i)s=e.createLinearGradient(n.x1+o*r,n.y1+a*i,n.x1+u*r,n.y1+l*i);else{const c=P0(Math.ceil(r),Math.ceil(i)),f=c.getContext("2d");return f.scale(r,i),f.fillStyle=Xpe(f.createLinearGradient(o,a,u,l),t.stops),f.fillRect(0,0,r,i),e.createPattern(c,"no-repeat")}}return Xpe(s,t.stops)}function H$e(e,t,n){return ute(n)?D8t(e,n,t.bounds):n}function mM(e,t,n){return n*=t.fillOpacity==null?1:t.fillOpacity,n>0?(e.globalAlpha=n,e.fillStyle=H$e(e,t,t.fill),!0):!1}var P8t=[];function Ax(e,t,n){var r=(r=t.strokeWidth)!=null?r:1;return r<=0?!1:(n*=t.strokeOpacity==null?1:t.strokeOpacity,n>0?(e.globalAlpha=n,e.strokeStyle=H$e(e,t,t.stroke),e.lineWidth=r,e.lineCap=t.strokeCap||"butt",e.lineJoin=t.strokeJoin||"miter",e.miterLimit=t.strokeMiterLimit||10,e.setLineDash&&(e.setLineDash(t.strokeDash||P8t),e.lineDashOffset=t.strokeDashOffset||0),!0):!1)}function O8t(e,t){return e.zindex-t.zindex||e.index-t.index}function pte(e){if(!e.zdirty)return e.zitems;var t=e.items,n=[],r,i,s;for(i=0,s=t.length;i<s;++i)r=t[i],r.index=i,r.zindex&&n.push(r);return e.zdirty=!1,e.zitems=n.sort(O8t)}function nd(e,t){var n=e.items,r,i;if(!n||!n.length)return;const s=pte(e);if(s&&s.length){for(r=0,i=n.length;r<i;++r)n[r].zindex||t(n[r]);n=s}for(r=0,i=n.length;r<i;++r)t(n[r])}function gM(e,t){var n=e.items,r,i;if(!n||!n.length)return null;const s=pte(e);for(s&&s.length&&(n=s),i=n.length;--i>=0;)if(r=t(n[i]))return r;if(n===s){for(n=e.items,i=n.length;--i>=0;)if(!n[i].zindex&&(r=t(n[i])))return r}return null}function mte(e){return function(t,n,r){nd(n,i=>{(!r||r.intersects(i.bounds))&&q$e(e,t,i,i)})}}function $8t(e){return function(t,n,r){n.items.length&&(!r||r.intersects(n.bounds))&&q$e(e,t,n.items[0],n.items)}}function q$e(e,t,n,r){var i=n.opacity==null?1:n.opacity;i!==0&&(e(t,r)||(Cx(t,n),n.fill&&mM(t,n,i)&&t.fill(),n.stroke&&Ax(t,n,i)&&t.stroke()))}function bF(e){return e=e||Fc,function(t,n,r,i,s,o){return r*=t.pixelRatio,i*=t.pixelRatio,gM(n,a=>{const u=a.bounds;if(!(u&&!u.contains(s,o)||!u)&&e(t,a,r,i,s,o))return a})}}function SR(e,t){return function(n,r,i,s){var o=Array.isArray(r)?r[0]:r,a=t??o.fill,u=o.stroke&&n.isPointInStroke,l,c;return u&&(l=o.strokeWidth,c=o.strokeCap,n.lineWidth=l??1,n.lineCap=c??"butt"),e(n,r)?!1:a&&n.isPointInPath(i,s)||u&&n.isPointInStroke(i,s)}}function gte(e){return bF(SR(e))}function R1(e,t){return"translate("+e+","+t+")"}function yte(e){return"rotate("+e+")"}function M8t(e,t){return"scale("+e+","+t+")"}function W$e(e){return R1(e.x||0,e.y||0)}function L8t(e){return R1(e.x||0,e.y||0)+(e.angle?" "+yte(e.angle):"")}function F8t(e){return R1(e.x||0,e.y||0)+(e.angle?" "+yte(e.angle):"")+(e.scaleX||e.scaleY?" "+M8t(e.scaleX||1,e.scaleY||1):"")}function vte(e,t,n){function r(o,a){o("transform",L8t(a)),o("d",t(null,a))}function i(o,a){return t(xR(o,a.angle),a),og(o,a).translate(a.x||0,a.y||0)}function s(o,a){var u=a.x||0,l=a.y||0,c=a.angle||0;o.translate(u,l),c&&o.rotate(c*=dy),o.beginPath(),t(o,a),c&&o.rotate(-c),o.translate(-u,-l)}return{type:e,tag:"path",nested:!1,attr:r,bound:i,draw:mte(s),pick:gte(s),isect:n||dte(s)}}var j8t=vte("arc",x8t);function B8t(e,t){for(var n=e[0].orient==="horizontal"?t[1]:t[0],r=e[0].orient==="horizontal"?"y":"x",i=e.length,s=1/0,o,a;--i>=0;)e[i].defined!==!1&&(a=Math.abs(e[i][r]-n),a<s&&(s=a,o=e[i]));return o}function U8t(e,t){for(var n=Math.pow(e[0].strokeWidth||1,2),r=e.length,i,s,o;--r>=0;)if(e[r].defined!==!1&&(i=e[r].x-t[0],s=e[r].y-t[1],o=i*i+s*s,o<n))return e[r];return null}function z8t(e,t){for(var n=e.length,r,i,s;--n>=0;)if(e[n].defined!==!1&&(r=e[n].x-t[0],i=e[n].y-t[1],s=r*r+i*i,r=e[n].size||1,s<r*r))return e[n];return null}function bte(e,t,n){function r(u,l){var c=l.mark.items;c.length&&u("d",t(null,c))}function i(u,l){var c=l.items;return c.length===0?u:(t(xR(u),c),og(u,c[0]))}function s(u,l){u.beginPath(),t(u,l)}const o=SR(s);function a(u,l,c,f,d,h){var p=l.items,m=l.bounds;return!p||!p.length||m&&!m.contains(d,h)?null:(c*=u.pixelRatio,f*=u.pixelRatio,o(u,p,c,f)?p[0]:null)}return{type:e,tag:"path",nested:!0,attr:r,bound:i,draw:$8t(s),pick:a,isect:hte,tip:n}}var V8t=bte("area",S8t,B8t);function H8t(e,t){var n=t.clip;e.save(),_n(n)?(e.beginPath(),n(e),e.clip()):G$e(e,t.group)}function G$e(e,t){e.beginPath(),cte(t)?XS(e,t,0,0):e.rect(0,0,t.width||0,t.height||0),e.clip()}function Y$e(e){const t=lf(e.strokeWidth,1);return e.strokeOffset!=null?e.strokeOffset:e.stroke&&t>.5&&t<1.5?.5-Math.abs(t-1):0}function q8t(e,t){e("transform",W$e(t))}function K$e(e,t){const n=Y$e(t);e("d",XS(null,t,n,n))}function W8t(e,t){e("class","background"),e("aria-hidden",!0),K$e(e,t)}function G8t(e,t){e("class","foreground"),e("aria-hidden",!0),t.strokeForeground?K$e(e,t):e("d","")}function Y8t(e,t,n){const r=t.clip?fte(n,t,t):null;e("clip-path",r)}function K8t(e,t){if(!t.clip&&t.items){const n=t.items,r=n.length;for(let i=0;i<r;++i)e.union(n[i].bounds)}return(t.clip||t.width||t.height)&&!t.noBound&&e.add(0,0).add(t.width||0,t.height||0),og(e,t),e.translate(t.x||0,t.y||0)}function $I(e,t,n,r){const i=Y$e(t);e.beginPath(),XS(e,t,(n||0)+i,(r||0)+i)}const X8t=SR($I),Q8t=SR($I,!1),J8t=SR($I,!0);function Z8t(e,t,n,r){nd(t,i=>{const s=i.x||0,o=i.y||0,a=i.strokeForeground,u=i.opacity==null?1:i.opacity;(i.stroke||i.fill)&&u&&($I(e,i,s,o),Cx(e,i),i.fill&&mM(e,i,u)&&e.fill(),i.stroke&&!a&&Ax(e,i,u)&&e.stroke()),e.save(),e.translate(s,o),i.clip&&G$e(e,i),n&&n.translate(-s,-o),nd(i,l=>{(l.marktype==="group"||r==null||r.includes(l.marktype))&&this.draw(e,l,n,r)}),n&&n.translate(s,o),e.restore(),a&&i.stroke&&u&&($I(e,i,s,o),Cx(e,i),Ax(e,i,u)&&e.stroke())})}function e9t(e,t,n,r,i,s){if(t.bounds&&!t.bounds.contains(i,s)||!t.items)return null;const o=n*e.pixelRatio,a=r*e.pixelRatio;return gM(t,u=>{let l,c,f;const d=u.bounds;if(d&&!d.contains(i,s))return;c=u.x||0,f=u.y||0;const h=c+(u.width||0),p=f+(u.height||0),m=u.clip;if(m&&(i<c||i>h||s<f||s>p))return;if(e.save(),e.translate(c,f),c=i-c,f=s-f,m&&cte(u)&&!J8t(e,u,o,a))return e.restore(),null;const g=u.strokeForeground,y=t.interactive!==!1;return y&&g&&u.stroke&&Q8t(e,u,o,a)?(e.restore(),u):(l=gM(u,v=>t9t(v,c,f)?this.pick(v,n,r,c,f):null),!l&&y&&(u.fill||!g&&u.stroke)&&X8t(e,u,o,a)&&(l=u),e.restore(),l||null)})}function t9t(e,t,n){return(e.interactive!==!1||e.marktype==="group")&&e.bounds&&e.bounds.contains(t,n)}var n9t={type:"group",tag:"g",nested:!1,attr:q8t,bound:K8t,draw:Z8t,pick:e9t,isect:z$e,content:Y8t,background:W8t,foreground:G8t},MI={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1"};function _te(e,t){var n=e.image;return(!n||e.url&&e.url!==n.url)&&(n={complete:!1,width:0,height:0},t.loadImage(e.url).then(r=>{e.image=r,e.image.url=e.url})),n}function wte(e,t){return e.width!=null?e.width:!t||!t.width?0:e.aspect!==!1&&e.height?e.height*t.width/t.height:t.width}function Ete(e,t){return e.height!=null?e.height:!t||!t.height?0:e.aspect!==!1&&e.width?e.width*t.height/t.width:t.height}function _F(e,t){return e==="center"?t/2:e==="right"?t:0}function wF(e,t){return e==="middle"?t/2:e==="bottom"?t:0}function r9t(e,t,n){const r=_te(t,n),i=wte(t,r),s=Ete(t,r),o=(t.x||0)-_F(t.align,i),a=(t.y||0)-wF(t.baseline,s),u=!r.src&&r.toDataURL?r.toDataURL():r.src||"";e("href",u,MI["xmlns:xlink"],"xlink:href"),e("transform",R1(o,a)),e("width",i),e("height",s),e("preserveAspectRatio",t.aspect===!1?"none":"xMidYMid")}function i9t(e,t){const n=t.image,r=wte(t,n),i=Ete(t,n),s=(t.x||0)-_F(t.align,r),o=(t.y||0)-wF(t.baseline,i);return e.set(s,o,s+r,o+i)}function s9t(e,t,n){nd(t,r=>{if(n&&!n.intersects(r.bounds))return;const i=_te(r,this);let s=wte(r,i),o=Ete(r,i);if(s===0||o===0)return;let a=(r.x||0)-_F(r.align,s),u=(r.y||0)-wF(r.baseline,o),l,c,f,d;r.aspect!==!1&&(c=i.width/i.height,f=r.width/r.height,c===c&&f===f&&c!==f&&(f<c?(d=s/c,u+=(o-d)/2,o=d):(d=o*c,a+=(s-d)/2,s=d))),(i.complete||i.toDataURL)&&(Cx(e,r),e.globalAlpha=(l=r.opacity)!=null?l:1,e.imageSmoothingEnabled=r.smooth!==!1,e.drawImage(i,a,u,s,o))})}var o9t={type:"image",tag:"image",nested:!1,attr:r9t,bound:i9t,draw:s9t,pick:bF(),isect:Fc,get:_te,xOffset:_F,yOffset:wF},a9t=bte("line",T8t,U8t);function u9t(e,t){var n=t.scaleX||1,r=t.scaleY||1;(n!==1||r!==1)&&e("vector-effect","non-scaling-stroke"),e("transform",F8t(t)),e("d",t.path)}function tO(e,t){var n=t.path;if(n==null)return!0;var r=t.x||0,i=t.y||0,s=t.scaleX||1,o=t.scaleY||1,a=(t.angle||0)*dy,u=t.pathCache;(!u||u.path!==n)&&((t.pathCache=u=Tx(n)).path=n),a&&e.rotate&&e.translate?(e.translate(r,i),e.rotate(a),OI(e,u,0,0,s,o),e.rotate(-a),e.translate(-r,-i)):OI(e,u,r,i,s,o)}function l9t(e,t){return tO(xR(e,t.angle),t)?e.set(0,0,0,0):og(e,t,!0)}var c9t={type:"path",tag:"path",nested:!1,attr:u9t,bound:l9t,draw:mte(tO),pick:gte(tO),isect:dte(tO)};function f9t(e,t){e("d",XS(null,t))}function d9t(e,t){var n,r;return og(e.set(n=t.x||0,r=t.y||0,n+t.width||0,r+t.height||0),t)}function Qpe(e,t){e.beginPath(),XS(e,t)}var h9t={type:"rect",tag:"path",nested:!1,attr:f9t,bound:d9t,draw:mte(Qpe),pick:gte(Qpe),isect:z$e};function p9t(e,t){e("transform",W$e(t)),e("x2",t.x2!=null?t.x2-(t.x||0):0),e("y2",t.y2!=null?t.y2-(t.y||0):0)}function m9t(e,t){var n,r;return og(e.set(n=t.x||0,r=t.y||0,t.x2!=null?t.x2:n,t.y2!=null?t.y2:r),t)}function X$e(e,t,n){var r,i,s,o;return t.stroke&&Ax(e,t,n)?(r=t.x||0,i=t.y||0,s=t.x2!=null?t.x2:r,o=t.y2!=null?t.y2:i,e.beginPath(),e.moveTo(r,i),e.lineTo(s,o),!0):!1}function g9t(e,t,n){nd(t,r=>{if(!(n&&!n.intersects(r.bounds))){var i=r.opacity==null?1:r.opacity;i&&X$e(e,r,i)&&(Cx(e,r),e.stroke())}})}function y9t(e,t,n,r){return e.isPointInStroke?X$e(e,t,1)&&e.isPointInStroke(n,r):!1}var v9t={type:"rule",tag:"line",nested:!1,attr:p9t,bound:m9t,draw:g9t,pick:bF(y9t),isect:V$e},b9t=vte("shape",C8t),_9t=vte("symbol",A8t,hte);const Jpe=OOe();var Dl={height:ip,measureWidth:xte,estimateWidth:yM,width:yM,canvas:Q$e};Q$e(!0);function Q$e(e){Dl.width=e&&O0?xte:yM}function yM(e,t){return J$e(py(e,t),ip(e))}function J$e(e,t){return~~(.8*e.length*t)}function xte(e,t){return ip(e)<=0||!(t=py(e,t))?0:Z$e(t,EF(e))}function Z$e(e,t){const n=`(${t}) ${e}`;let r=Jpe.get(n);return r===void 0&&(O0.font=t,r=O0.measureText(e).width,Jpe.set(n,r)),r}function ip(e){return e.fontSize!=null?+e.fontSize||0:11}function hy(e){return e.lineHeight!=null?e.lineHeight:ip(e)+2}function w9t(e){return je(e)?e.length>1?e:e[0]:e}function TR(e){return w9t(e.lineBreak&&e.text&&!je(e.text)?e.text.split(e.lineBreak):e.text)}function Ste(e){const t=TR(e);return(je(t)?t.length-1:0)*hy(e)}function py(e,t){const n=t==null?"":(t+"").trim();return e.limit>0&&n.length?x9t(e,n):n}function E9t(e){if(Dl.width===xte){const t=EF(e);return n=>Z$e(n,t)}else if(Dl.width===yM){const t=ip(e);return n=>J$e(n,t)}else return t=>Dl.width(e,t)}function x9t(e,t){var n=+e.limit,r=E9t(e);if(r(t)<n)return t;var i=e.ellipsis||"",s=e.dir==="rtl",o=0,a=t.length,u;if(n-=r(i),s){for(;o<a;)u=o+a>>>1,r(t.slice(u))>n?o=u+1:a=u;return i+t.slice(o)}else{for(;o<a;)u=1+(o+a>>>1),r(t.slice(0,u))<n?o=u:a=u-1;return t.slice(0,o)+i}}function CR(e,t){var n=e.font;return(t&&n?String(n).replace(/"/g,"'"):n)||"sans-serif"}function EF(e,t){return(e.fontStyle?e.fontStyle+" ":"")+(e.fontVariant?e.fontVariant+" ":"")+(e.fontWeight?e.fontWeight+" ":"")+ip(e)+"px "+CR(e,t)}function Tte(e){var t=e.baseline,n=ip(e);return Math.round(t==="top"?.79*n:t==="middle"?.3*n:t==="bottom"?-.21*n:t==="line-top"?.29*n+.5*hy(e):t==="line-bottom"?.29*n-.5*hy(e):0)}const S9t={left:"start",center:"middle",right:"end"},XC=new Ts;function xF(e){var t=e.x||0,n=e.y||0,r=e.radius||0,i;return r&&(i=(e.theta||0)-Kv,t+=r*Math.cos(i),n+=r*Math.sin(i)),XC.x1=t,XC.y1=n,XC}function T9t(e,t){var n=t.dx||0,r=(t.dy||0)+Tte(t),i=xF(t),s=i.x1,o=i.y1,a=t.angle||0,u;e("text-anchor",S9t[t.align]||"start"),a?(u=R1(s,o)+" "+yte(a),(n||r)&&(u+=" "+R1(n,r))):u=R1(s+n,o+r),e("transform",u)}function Cte(e,t,n){var r=Dl.height(t),i=t.align,s=xF(t),o=s.x1,a=s.y1,u=t.dx||0,l=(t.dy||0)+Tte(t)-Math.round(.8*r),c=TR(t),f;if(je(c)?(r+=hy(t)*(c.length-1),f=c.reduce((d,h)=>Math.max(d,Dl.width(t,h)),0)):f=Dl.width(t,c),i==="center"?u-=f/2:i==="right"&&(u-=f),e.set(u+=o,l+=a,u+f,l+r),t.angle&&!n)e.rotate(t.angle*dy,o,a);else if(n===2)return e.rotatedPoints(t.angle*dy,o,a);return e}function C9t(e,t,n){nd(t,r=>{var i=r.opacity==null?1:r.opacity,s,o,a,u,l,c,f;if(!(n&&!n.intersects(r.bounds)||i===0||r.fontSize<=0||r.text==null||r.text.length===0)){if(e.font=EF(r),e.textAlign=r.align||"left",s=xF(r),o=s.x1,a=s.y1,r.angle&&(e.save(),e.translate(o,a),e.rotate(r.angle*dy),o=a=0),o+=r.dx||0,a+=(r.dy||0)+Tte(r),c=TR(r),Cx(e,r),je(c))for(l=hy(r),u=0;u<c.length;++u)f=py(r,c[u]),r.fill&&mM(e,r,i)&&e.fillText(f,o,a),r.stroke&&Ax(e,r,i)&&e.strokeText(f,o,a),a+=l;else f=py(r,c),r.fill&&mM(e,r,i)&&e.fillText(f,o,a),r.stroke&&Ax(e,r,i)&&e.strokeText(f,o,a);r.angle&&e.restore()}})}function A9t(e,t,n,r,i,s){if(t.fontSize<=0)return!1;if(!t.angle)return!0;var o=xF(t),a=o.x1,u=o.y1,l=Cte(XC,t,1),c=-t.angle*dy,f=Math.cos(c),d=Math.sin(c),h=f*i-d*s+(a-f*a+d*u),p=d*i+f*s+(u-d*a-f*u);return l.contains(h,p)}function I9t(e,t){const n=Cte(XC,e,2);return Mw(t,n[0],n[1],n[2],n[3])||Mw(t,n[0],n[1],n[4],n[5])||Mw(t,n[4],n[5],n[6],n[7])||Mw(t,n[2],n[3],n[6],n[7])}var k9t={type:"text",tag:"text",nested:!1,attr:T9t,bound:Cte,draw:C9t,pick:bF(A9t),isect:I9t},R9t=bte("trail",I8t,z8t),Wl={arc:j8t,area:V8t,group:n9t,image:o9t,line:a9t,path:c9t,rect:h9t,rule:v9t,shape:b9t,symbol:_9t,text:k9t,trail:R9t};function CH(e,t,n){var r=Wl[e.mark.marktype],i=t||r.bound;return r.nested&&(e=e.mark),i(e.bounds||(e.bounds=new Ts),e,n)}var Zpe={mark:null};function eMe(e,t,n){var r=Wl[e.marktype],i=r.bound,s=e.items,o=s&&s.length,a,u,l,c;if(r.nested)return o?l=s[0]:(Zpe.mark=e,l=Zpe),c=CH(l,i,n),t=t&&t.union(c)||c,t;if(t=t||e.bounds&&e.bounds.clear()||new Ts,o)for(a=0,u=s.length;a<u;++a)t.union(CH(s[a],i,n));return e.bounds=t}const N9t=["marktype","name","role","interactive","clip","items","zindex","x","y","width","height","align","baseline","fill","fillOpacity","opacity","blend","stroke","strokeOpacity","strokeWidth","strokeCap","strokeDash","strokeDashOffset","strokeForeground","strokeOffset","startAngle","endAngle","innerRadius","outerRadius","cornerRadius","padAngle","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight","interpolate","tension","orient","defined","url","aspect","smooth","path","scaleX","scaleY","x2","y2","size","shape","text","angle","theta","radius","dir","dx","dy","ellipsis","limit","lineBreak","lineHeight","font","fontSize","fontWeight","fontStyle","fontVariant","description","aria","ariaRole","ariaRoleDescription"];function tMe(e,t){return JSON.stringify(e,N9t,t)}function nMe(e){const t=typeof e=="string"?JSON.parse(e):e;return rMe(t)}function rMe(e){var t=e.marktype,n=e.items,r,i,s;if(n)for(i=0,s=n.length;i<s;++i)r=t?"mark":"group",n[i][r]=e,n[i].zindex&&(n[i][r].zdirty=!0),(t||r)==="group"&&rMe(n[i]);return t&&eMe(e),e}class iMe{constructor(t){arguments.length?this.root=nMe(t):(this.root=eme({marktype:"group",name:"root",role:"frame"}),this.root.items=[new yF(this.root)])}toJSON(t){return tMe(this.root,t||0)}mark(t,n,r){n=n||this.root.items[0];const i=eme(t,n);return n.items[r]=i,i.zindex&&(i.group.zdirty=!0),i}}function eme(e,t){const n={bounds:new Ts,clip:!!e.clip,group:t,interactive:e.interactive!==!1,items:[],marktype:e.marktype,name:e.name||void 0,role:e.role||void 0,zindex:e.zindex||0};return e.aria!=null&&(n.aria=e.aria),e.description&&(n.description=e.description),n}function i0(e,t,n){return!e&&typeof document<"u"&&document.createElement&&(e=document),e?n?e.createElementNS(n,t):e.createElement(t):null}function Ate(e,t){t=t.toLowerCase();for(var n=e.childNodes,r=0,i=n.length;r<i;++r)if(n[r].tagName.toLowerCase()===t)return n[r]}function Ps(e,t,n,r){var i=e.childNodes[t],s;return(!i||i.tagName.toLowerCase()!==n.toLowerCase())&&(s=i||null,i=i0(e.ownerDocument,n,r),e.insertBefore(i,s)),i}function bc(e,t){for(var n=e.childNodes,r=n.length;r>t;)e.removeChild(n[--r]);return e}function sMe(e){return"mark-"+e.marktype+(e.role?" role-"+e.role:"")+(e.name?" "+e.name:"")}function SF(e,t){const n=t.getBoundingClientRect();return[e.clientX-n.left-(t.clientLeft||0),e.clientY-n.top-(t.clientTop||0)]}function D9t(e,t,n,r){var i=e&&e.mark,s,o;if(i&&(s=Wl[i.marktype]).tip){for(o=SF(t,n),o[0]-=r[0],o[1]-=r[1];e=e.mark.group;)o[0]-=e.x||0,o[1]-=e.y||0;e=s.tip(i.items,o)}return e}let Ite=class{constructor(t,n){this._active=null,this._handlers={},this._loader=t||Z4(),this._tooltip=n||P9t}initialize(t,n,r){return this._el=t,this._obj=r||null,this.origin(n)}element(){return this._el}canvas(){return this._el&&this._el.firstChild}origin(t){return arguments.length?(this._origin=t||[0,0],this):this._origin.slice()}scene(t){return arguments.length?(this._scene=t,this):this._scene}on(){}off(){}_handlerIndex(t,n,r){for(let i=t?t.length:0;--i>=0;)if(t[i].type===n&&(!r||t[i].handler===r))return i;return-1}handlers(t){const n=this._handlers,r=[];if(t)r.push(...n[this.eventName(t)]);else for(const i in n)r.push(...n[i]);return r}eventName(t){const n=t.indexOf(".");return n<0?t:t.slice(0,n)}handleHref(t,n,r){this._loader.sanitize(r,{context:"href"}).then(i=>{const s=new MouseEvent(t.type,t),o=i0(null,"a");for(const a in i)o.setAttribute(a,i[a]);o.dispatchEvent(s)}).catch(()=>{})}handleTooltip(t,n,r){if(n&&n.tooltip!=null){n=D9t(n,t,this.canvas(),this._origin);const i=r&&n&&n.tooltip||null;this._tooltip.call(this._obj,this,t,n,i)}}getItemBoundingClientRect(t){const n=this.canvas();if(!n)return;const r=n.getBoundingClientRect(),i=this._origin,s=t.bounds,o=s.width(),a=s.height();let u=s.x1+i[0]+r.left,l=s.y1+i[1]+r.top;for(;t.mark&&(t=t.mark.group);)u+=t.x||0,l+=t.y||0;return{x:u,y:l,width:o,height:a,left:u,top:l,right:u+o,bottom:l+a}}};function P9t(e,t,n,r){e.element().setAttribute("title",r||"")}class AR{constructor(t){this._el=null,this._bgcolor=null,this._loader=new U$e(t)}initialize(t,n,r,i,s){return this._el=t,this.resize(n,r,i,s)}element(){return this._el}canvas(){return this._el&&this._el.firstChild}background(t){return arguments.length===0?this._bgcolor:(this._bgcolor=t,this)}resize(t,n,r,i){return this._width=t,this._height=n,this._origin=r||[0,0],this._scale=i||1,this}dirty(){}render(t,n){const r=this;return r._call=function(){r._render(t,n)},r._call(),r._call=null,r}_render(){}renderAsync(t,n){const r=this.render(t,n);return this._ready?this._ready.then(()=>r):Promise.resolve(r)}_load(t,n){var r=this,i=r._loader[t](n);if(!r._ready){const s=r._call;r._ready=r._loader.ready().then(o=>{o&&s(),r._ready=null})}return i}sanitizeURL(t){return this._load("sanitizeURL",t)}loadImage(t){return this._load("loadImage",t)}}const O9t="keydown",$9t="keypress",M9t="keyup",oMe="dragenter",nO="dragleave",aMe="dragover",AH="pointerdown",L9t="pointerup",vM="pointermove",rO="pointerout",uMe="pointerover",IH="mousedown",F9t="mouseup",lMe="mousemove",bM="mouseout",cMe="mouseover",_M="click",j9t="dblclick",B9t="wheel",fMe="mousewheel",wM="touchstart",EM="touchmove",xM="touchend",U9t=[O9t,$9t,M9t,oMe,nO,aMe,AH,L9t,vM,rO,uMe,IH,F9t,lMe,bM,cMe,_M,j9t,B9t,fMe,wM,EM,xM],kH=vM,QC=bM,RH=_M;class IR extends Ite{constructor(t,n){super(t,n),this._down=null,this._touch=null,this._first=!0,this._events={},this.events=U9t,this.pointermove=nme([vM,lMe],[uMe,cMe],[rO,bM]),this.dragover=nme([aMe],[oMe],[nO]),this.pointerout=rme([rO,bM]),this.dragleave=rme([nO])}initialize(t,n,r){return this._canvas=t&&Ate(t,"canvas"),[_M,IH,AH,vM,rO,nO].forEach(i=>tme(this,i)),super.initialize(t,n,r)}canvas(){return this._canvas}context(){return this._canvas.getContext("2d")}DOMMouseScroll(t){this.fire(fMe,t)}pointerdown(t){this._down=this._active,this.fire(AH,t)}mousedown(t){this._down=this._active,this.fire(IH,t)}click(t){this._down===this._active&&(this.fire(_M,t),this._down=null)}touchstart(t){this._touch=this.pickEvent(t.changedTouches[0]),this._first&&(this._active=this._touch,this._first=!1),this.fire(wM,t,!0)}touchmove(t){this.fire(EM,t,!0)}touchend(t){this.fire(xM,t,!0),this._touch=null}fire(t,n,r){const i=r?this._touch:this._active,s=this._handlers[t];if(n.vegaType=t,t===RH&&i&&i.href?this.handleHref(n,i,i.href):(t===kH||t===QC)&&this.handleTooltip(n,i,t!==QC),s)for(let o=0,a=s.length;o<a;++o)s[o].handler.call(this._obj,n,i)}on(t,n){const r=this.eventName(t),i=this._handlers;return this._handlerIndex(i[r],t,n)<0&&(tme(this,t),(i[r]||(i[r]=[])).push({type:t,handler:n})),this}off(t,n){const r=this.eventName(t),i=this._handlers[r],s=this._handlerIndex(i,t,n);return s>=0&&i.splice(s,1),this}pickEvent(t){const n=SF(t,this._canvas),r=this._origin;return this.pick(this._scene,n[0],n[1],n[0]-r[0],n[1]-r[1])}pick(t,n,r,i,s){const o=this.context();return Wl[t.marktype].pick.call(this,o,t,n,r,i,s)}}const z9t=e=>e===wM||e===EM||e===xM?[wM,EM,xM]:[e];function tme(e,t){z9t(t).forEach(n=>V9t(e,n))}function V9t(e,t){const n=e.canvas();n&&!e._events[t]&&(e._events[t]=1,n.addEventListener(t,e[t]?r=>e[t](r):r=>e.fire(t,r)))}function J2(e,t,n){t.forEach(r=>e.fire(r,n))}function nme(e,t,n){return function(r){const i=this._active,s=this.pickEvent(r);s===i?J2(this,e,r):((!i||!i.exit)&&J2(this,n,r),this._active=s,J2(this,t,r),J2(this,e,r))}}function rme(e){return function(t){J2(this,e,t),this._active=null}}function H9t(){return typeof window<"u"&&window.devicePixelRatio||1}function q9t(e,t,n,r,i,s){const o=typeof HTMLElement<"u"&&e instanceof HTMLElement&&e.parentNode!=null,a=e.getContext("2d"),u=o?H9t():i;e.width=t*u,e.height=n*u;for(const l in s)a[l]=s[l];return o&&u!==1&&(e.style.width=t+"px",e.style.height=n+"px"),a.pixelRatio=u,a.setTransform(u,0,0,u,u*r[0],u*r[1]),e}class SM extends AR{constructor(t){super(t),this._options={},this._redraw=!1,this._dirty=new Ts,this._tempb=new Ts}initialize(t,n,r,i,s,o){return this._options=o||{},this._canvas=this._options.externalContext?null:P0(1,1,this._options.type),t&&this._canvas&&(bc(t,0).appendChild(this._canvas),this._canvas.setAttribute("class","marks")),super.initialize(t,n,r,i,s)}resize(t,n,r,i){if(super.resize(t,n,r,i),this._canvas)q9t(this._canvas,this._width,this._height,this._origin,this._scale,this._options.context);else{const s=this._options.externalContext;s||Le("CanvasRenderer is missing a valid canvas or context"),s.scale(this._scale,this._scale),s.translate(this._origin[0],this._origin[1])}return this._redraw=!0,this}canvas(){return this._canvas}context(){return this._options.externalContext||(this._canvas?this._canvas.getContext("2d"):null)}dirty(t){const n=this._tempb.clear().union(t.bounds);let r=t.mark.group;for(;r;)n.translate(r.x||0,r.y||0),r=r.mark.group;this._dirty.union(n)}_render(t,n){const r=this.context(),i=this._origin,s=this._width,o=this._height,a=this._dirty,u=W9t(i,s,o);r.save();const l=this._redraw||a.empty()?(this._redraw=!1,u.expand(1)):G9t(r,u.intersect(a),i);return this.clear(-i[0],-i[1],s,o),this.draw(r,t,l,n),r.restore(),a.clear(),this}draw(t,n,r,i){if(n.marktype!=="group"&&i!=null&&!i.includes(n.marktype))return;const s=Wl[n.marktype];n.clip&&H8t(t,n),s.draw.call(this,t,n,r,i),n.clip&&t.restore()}clear(t,n,r,i){const s=this._options,o=this.context();s.type!=="pdf"&&!s.externalContext&&o.clearRect(t,n,r,i),this._bgcolor!=null&&(o.fillStyle=this._bgcolor,o.fillRect(t,n,r,i))}}const W9t=(e,t,n)=>new Ts().set(0,0,t,n).translate(-e[0],-e[1]);function G9t(e,t,n){return t.expand(1).round(),e.pixelRatio%1&&t.scale(e.pixelRatio).round().scale(1/e.pixelRatio),t.translate(-(n[0]%1),-(n[1]%1)),e.beginPath(),e.rect(t.x1,t.y1,t.width(),t.height()),e.clip(),t}class dMe extends Ite{constructor(t,n){super(t,n);const r=this;r._hrefHandler=tB(r,(i,s)=>{s&&s.href&&r.handleHref(i,s,s.href)}),r._tooltipHandler=tB(r,(i,s)=>{r.handleTooltip(i,s,i.type!==QC)})}initialize(t,n,r){let i=this._svg;return i&&(i.removeEventListener(RH,this._hrefHandler),i.removeEventListener(kH,this._tooltipHandler),i.removeEventListener(QC,this._tooltipHandler)),this._svg=i=t&&Ate(t,"svg"),i&&(i.addEventListener(RH,this._hrefHandler),i.addEventListener(kH,this._tooltipHandler),i.addEventListener(QC,this._tooltipHandler)),super.initialize(t,n,r)}canvas(){return this._svg}on(t,n){const r=this.eventName(t),i=this._handlers;if(this._handlerIndex(i[r],t,n)<0){const o={type:t,handler:n,listener:tB(this,n)};(i[r]||(i[r]=[])).push(o),this._svg&&this._svg.addEventListener(r,o.listener)}return this}off(t,n){const r=this.eventName(t),i=this._handlers[r],s=this._handlerIndex(i,t,n);return s>=0&&(this._svg&&this._svg.removeEventListener(r,i[s].listener),i.splice(s,1)),this}}const tB=(e,t)=>n=>{let r=n.target.__data__;r=Array.isArray(r)?r[0]:r,n.vegaType=n.type,t.call(e._obj,n,r)},hMe="aria-hidden",kte="aria-label",Rte="role",Nte="aria-roledescription",pMe="graphics-object",Dte="graphics-symbol",mMe=(e,t,n)=>({[Rte]:e,[Nte]:t,[kte]:n||void 0}),Y9t=ed(["axis-domain","axis-grid","axis-label","axis-tick","axis-title","legend-band","legend-entry","legend-gradient","legend-label","legend-title","legend-symbol","title"]),ime={axis:{desc:"axis",caption:Q9t},legend:{desc:"legend",caption:J9t},"title-text":{desc:"title",caption:e=>`Title text '${ome(e)}'`},"title-subtitle":{desc:"subtitle",caption:e=>`Subtitle text '${ome(e)}'`}},sme={ariaRole:Rte,ariaRoleDescription:Nte,description:kte};function gMe(e,t){const n=t.aria===!1;if(e(hMe,n||void 0),n||t.description==null)for(const r in sme)e(sme[r],void 0);else{const r=t.mark.marktype;e(kte,t.description),e(Rte,t.ariaRole||(r==="group"?pMe:Dte)),e(Nte,t.ariaRoleDescription||`${r} mark`)}}function yMe(e){return e.aria===!1?{[hMe]:!0}:Y9t[e.role]?null:ime[e.role]?X9t(e,ime[e.role]):K9t(e)}function K9t(e){const t=e.marktype,n=t==="group"||t==="text"||e.items.some(r=>r.description!=null&&r.aria!==!1);return mMe(n?pMe:Dte,`${t} mark container`,e.description)}function X9t(e,t){try{const n=e.items[0],r=t.caption||(()=>"");return mMe(t.role||Dte,t.desc,n.description||r(n))}catch{return null}}function ome(e){return pt(e.text).join(" ")}function Q9t(e){const t=e.datum,n=e.orient,r=t.title?vMe(e):null,i=e.context,s=i.scales[t.scale].value,o=i.dataflow.locale(),a=s.type;return`${n==="left"||n==="right"?"Y":"X"}-axis`+(r?` titled '${r}'`:"")+` for a ${Sx(a)?"discrete":a} scale with ${N$e(o,s,e)}`}function J9t(e){const t=e.datum,n=t.title?vMe(e):null,r=`${t.type||""} legend`.trim(),i=t.scales,s=Object.keys(i),o=e.context,a=o.scales[i[s[0]]].value,u=o.dataflow.locale();return eBt(r)+(n?` titled '${n}'`:"")+` for ${Z9t(s)} with ${N$e(u,a,e)}`}function vMe(e){try{return pt(Qn(e.items).items[0].text).join(" ")}catch{return null}}function Z9t(e){return e=e.map(t=>t+(t==="fill"||t==="stroke"?" color":"")),e.length<2?e[0]:e.slice(0,-1).join(", ")+" and "+Qn(e)}function eBt(e){return e.length?e[0].toUpperCase()+e.slice(1):e}const bMe=e=>(e+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),tBt=e=>bMe(e).replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;");function Pte(){let e="",t="",n="";const r=[],i=()=>t=n="",s=u=>{t&&(e+=`${t}>${n}`,i()),r.push(u)},o=(u,l)=>(l!=null&&(t+=` ${u}="${tBt(l)}"`),a),a={open(u){s(u),t="<"+u;for(var l=arguments.length,c=new Array(l>1?l-1:0),f=1;f<l;f++)c[f-1]=arguments[f];for(const d of c)for(const h in d)o(h,d[h]);return a},close(){const u=r.pop();return t?e+=t+(n?`>${n}</${u}>`:"/>"):e+=`</${u}>`,i(),a},attr:o,text:u=>(n+=bMe(u),a),toString:()=>e};return a}const _Me=e=>wMe(Pte(),e)+"";function wMe(e,t){if(e.open(t.tagName),t.hasAttributes()){const n=t.attributes,r=n.length;for(let i=0;i<r;++i)e.attr(n[i].name,n[i].value)}if(t.hasChildNodes()){const n=t.childNodes;for(const r of n)r.nodeType===3?e.text(r.nodeValue):wMe(e,r)}return e.close()}const TM={fill:"fill",fillOpacity:"fill-opacity",stroke:"stroke",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",strokeCap:"stroke-linecap",strokeJoin:"stroke-linejoin",strokeDash:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeMiterLimit:"stroke-miterlimit",opacity:"opacity"},CM={blend:"mix-blend-mode"},EMe={fill:"none","stroke-miterlimit":10},JT=0,ame="http://www.w3.org/2000/xmlns/",Ns=MI.xmlns;class Ote extends AR{constructor(t){super(t),this._dirtyID=0,this._dirty=[],this._svg=null,this._root=null,this._defs=null}initialize(t,n,r,i,s){return this._defs={},this._clearDefs(),t&&(this._svg=Ps(t,0,"svg",Ns),this._svg.setAttributeNS(ame,"xmlns",Ns),this._svg.setAttributeNS(ame,"xmlns:xlink",MI["xmlns:xlink"]),this._svg.setAttribute("version",MI.version),this._svg.setAttribute("class","marks"),bc(t,1),this._root=Ps(this._svg,JT,"g",Ns),s0(this._root,EMe),bc(this._svg,JT+1)),this.background(this._bgcolor),super.initialize(t,n,r,i,s)}background(t){return arguments.length&&this._svg&&this._svg.style.setProperty("background-color",t),super.background(...arguments)}resize(t,n,r,i){return super.resize(t,n,r,i),this._svg&&(s0(this._svg,{width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}),this._root.setAttribute("transform",`translate(${this._origin})`)),this._dirty=[],this}canvas(){return this._svg}svg(){const t=this._svg,n=this._bgcolor;if(!t)return null;let r;n&&(t.removeAttribute("style"),r=Ps(t,JT,"rect",Ns),s0(r,{width:this._width,height:this._height,fill:n}));const i=_Me(t);return n&&(t.removeChild(r),this._svg.style.setProperty("background-color",n)),i}_render(t,n){return this._dirtyCheck()&&(this._dirtyAll&&this._clearDefs(),this.mark(this._root,t,void 0,n),bc(this._root,1)),this.defs(),this._dirty=[],++this._dirtyID,this}dirty(t){t.dirty!==this._dirtyID&&(t.dirty=this._dirtyID,this._dirty.push(t))}isDirty(t){return this._dirtyAll||!t._svg||!t._svg.ownerSVGElement||t.dirty===this._dirtyID}_dirtyCheck(){this._dirtyAll=!0;const t=this._dirty;if(!t.length||!this._dirtyID)return!0;const n=++this._dirtyID;let r,i,s,o,a,u,l;for(a=0,u=t.length;a<u;++a)if(r=t[a],i=r.mark,i.marktype!==s&&(s=i.marktype,o=Wl[s]),i.zdirty&&i.dirty!==n&&(this._dirtyAll=!1,ume(r,n),i.items.forEach(c=>{c.dirty=n})),!i.zdirty){if(r.exit){o.nested&&i.items.length?(l=i.items[0],l._svg&&this._update(o,l._svg,l)):r._svg&&(l=r._svg.parentNode,l&&l.removeChild(r._svg)),r._svg=null;continue}r=o.nested?i.items[0]:r,r._update!==n&&(!r._svg||!r._svg.ownerSVGElement?(this._dirtyAll=!1,ume(r,n)):this._update(o,r._svg,r),r._update=n)}return!this._dirtyAll}mark(t,n,r,i){if(!this.isDirty(n))return n._svg;const s=this._svg,o=n.marktype,a=Wl[o],u=n.interactive===!1?"none":null,l=a.tag==="g",c=lme(n,t,r,"g",s);if(o!=="group"&&i!=null&&!i.includes(o))return bc(c,0),n._svg;c.setAttribute("class",sMe(n));const f=yMe(n);for(const m in f)$a(c,m,f[m]);l||$a(c,"pointer-events",u),$a(c,"clip-path",n.clip?fte(this,n,n.group):null);let d=null,h=0;const p=m=>{const g=this.isDirty(m),y=lme(m,c,d,a.tag,s);g&&(this._update(a,y,m),l&&iBt(this,y,m,i)),d=y,++h};return a.nested?n.items.length&&p(n.items[0]):nd(n,p),bc(c,h),c}_update(t,n,r){em=n,oa=n.__values__,gMe(JC,r),t.attr(JC,r,this);const i=oBt[t.type];i&&i.call(this,t,n,r),em&&this.style(em,r)}style(t,n){if(n!=null){for(const r in TM){let i=r==="font"?CR(n):n[r];if(i===oa[r])continue;const s=TM[r];i==null?t.removeAttribute(s):(ute(i)&&(i=P$e(i,this._defs.gradient,xMe())),t.setAttribute(s,i+"")),oa[r]=i}for(const r in CM)iO(t,CM[r],n[r])}}defs(){const t=this._svg,n=this._defs;let r=n.el,i=0;for(const s in n.gradient)r||(n.el=r=Ps(t,JT+1,"defs",Ns)),i=nBt(r,n.gradient[s],i);for(const s in n.clipping)r||(n.el=r=Ps(t,JT+1,"defs",Ns)),i=rBt(r,n.clipping[s],i);r&&(i===0?(t.removeChild(r),n.el=null):bc(r,i))}_clearDefs(){const t=this._defs;t.gradient={},t.clipping={}}}function ume(e,t){for(;e&&e.dirty!==t;e=e.mark.group)if(e.dirty=t,e.mark&&e.mark.dirty!==t)e.mark.dirty=t;else return}function nBt(e,t,n){let r,i,s;if(t.gradient==="radial"){let o=Ps(e,n++,"pattern",Ns);s0(o,{id:pM+t.id,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),o=Ps(o,0,"rect",Ns),s0(o,{width:1,height:1,fill:`url(${xMe()}#${t.id})`}),e=Ps(e,n++,"radialGradient",Ns),s0(e,{id:t.id,fx:t.x1,fy:t.y1,fr:t.r1,cx:t.x2,cy:t.y2,r:t.r2})}else e=Ps(e,n++,"linearGradient",Ns),s0(e,{id:t.id,x1:t.x1,x2:t.x2,y1:t.y1,y2:t.y2});for(r=0,i=t.stops.length;r<i;++r)s=Ps(e,r,"stop",Ns),s.setAttribute("offset",t.stops[r].offset),s.setAttribute("stop-color",t.stops[r].color);return bc(e,r),n}function rBt(e,t,n){let r;return e=Ps(e,n,"clipPath",Ns),e.setAttribute("id",t.id),t.path?(r=Ps(e,0,"path",Ns),r.setAttribute("d",t.path)):(r=Ps(e,0,"rect",Ns),s0(r,{x:0,y:0,width:t.width,height:t.height})),bc(e,1),n+1}function iBt(e,t,n,r){t=t.lastChild.previousSibling;let i,s=0;nd(n,o=>{i=e.mark(t,o,i,r),++s}),bc(t,1+s)}function lme(e,t,n,r,i){let s=e._svg,o;if(!s&&(o=t.ownerDocument,s=i0(o,r,Ns),e._svg=s,e.mark&&(s.__data__=e,s.__values__={fill:"default"},r==="g"))){const a=i0(o,"path",Ns);s.appendChild(a),a.__data__=e;const u=i0(o,"g",Ns);s.appendChild(u),u.__data__=e;const l=i0(o,"path",Ns);s.appendChild(l),l.__data__=e,l.__values__={fill:"default"}}return(s.ownerSVGElement!==i||sBt(s,n))&&t.insertBefore(s,n?n.nextSibling:t.firstChild),s}function sBt(e,t){return e.parentNode&&e.parentNode.childNodes.length>1&&e.previousSibling!=t}let em=null,oa=null;const oBt={group(e,t,n){const r=em=t.childNodes[2];oa=r.__values__,e.foreground(JC,n,this),oa=t.__values__,em=t.childNodes[1],e.content(JC,n,this);const i=em=t.childNodes[0];e.background(JC,n,this);const s=n.mark.interactive===!1?"none":null;if(s!==oa.events&&($a(r,"pointer-events",s),$a(i,"pointer-events",s),oa.events=s),n.strokeForeground&&n.stroke){const o=n.fill;$a(r,"display",null),this.style(i,n),$a(i,"stroke",null),o&&(n.fill=null),oa=r.__values__,this.style(r,n),o&&(n.fill=o),em=null}else $a(r,"display","none")},image(e,t,n){n.smooth===!1?(iO(t,"image-rendering","optimizeSpeed"),iO(t,"image-rendering","pixelated")):iO(t,"image-rendering",null)},text(e,t,n){const r=TR(n);let i,s,o,a;je(r)?(s=r.map(u=>py(n,u)),i=s.join(`
`),i!==oa.text&&(bc(t,0),o=t.ownerDocument,a=hy(n),s.forEach((u,l)=>{const c=i0(o,"tspan",Ns);c.__data__=n,c.textContent=u,l&&(c.setAttribute("x",0),c.setAttribute("dy",a)),t.appendChild(c)}),oa.text=i)):(s=py(n,r),s!==oa.text&&(t.textContent=s,oa.text=s)),$a(t,"font-family",CR(n)),$a(t,"font-size",ip(n)+"px"),$a(t,"font-style",n.fontStyle),$a(t,"font-variant",n.fontVariant),$a(t,"font-weight",n.fontWeight)}};function JC(e,t,n){t!==oa[e]&&(n?aBt(em,e,t,n):$a(em,e,t),oa[e]=t)}function iO(e,t,n){n!==oa[t]&&(n==null?e.style.removeProperty(t):e.style.setProperty(t,n+""),oa[t]=n)}function s0(e,t){for(const n in t)$a(e,n,t[n])}function $a(e,t,n){n!=null?e.setAttribute(t,n):e.removeAttribute(t)}function aBt(e,t,n,r){n!=null?e.setAttributeNS(r,t,n):e.removeAttributeNS(r,t)}function xMe(){let e;return typeof window>"u"?"":(e=window.location).hash?e.href.slice(0,-e.hash.length):e.href}class SMe extends AR{constructor(t){super(t),this._text=null,this._defs={gradient:{},clipping:{}}}svg(){return this._text}_render(t){const n=Pte();n.open("svg",bn({},MI,{class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}));const r=this._bgcolor;return r&&r!=="transparent"&&r!=="none"&&n.open("rect",{width:this._width,height:this._height,fill:r}).close(),n.open("g",EMe,{transform:"translate("+this._origin+")"}),this.mark(n,t),n.close(),this.defs(n),this._text=n.close()+"",this}mark(t,n){const r=Wl[n.marktype],i=r.tag,s=[gMe,r.attr];t.open("g",{class:sMe(n),"clip-path":n.clip?fte(this,n,n.group):null},yMe(n),{"pointer-events":i!=="g"&&n.interactive===!1?"none":null});const o=a=>{const u=this.href(a);if(u&&t.open("a",u),t.open(i,this.attr(n,a,s,i!=="g"?i:null)),i==="text"){const l=TR(a);if(je(l)){const c={x:0,dy:hy(a)};for(let f=0;f<l.length;++f)t.open("tspan",f?c:null).text(py(a,l[f])).close()}else t.text(py(a,l))}else if(i==="g"){const l=a.strokeForeground,c=a.fill,f=a.stroke;l&&f&&(a.stroke=null),t.open("path",this.attr(n,a,r.background,"bgrect")).close(),t.open("g",this.attr(n,a,r.content)),nd(a,d=>this.mark(t,d)),t.close(),l&&f?(c&&(a.fill=null),a.stroke=f,t.open("path",this.attr(n,a,r.foreground,"bgrect")).close(),c&&(a.fill=c)):t.open("path",this.attr(n,a,r.foreground,"bgfore")).close()}t.close(),u&&t.close()};return r.nested?n.items&&n.items.length&&o(n.items[0]):nd(n,o),t.close()}href(t){const n=t.href;let r;if(n){if(r=this._hrefs&&this._hrefs[n])return r;this.sanitizeURL(n).then(i=>{i["xlink:href"]=i.href,i.href=null,(this._hrefs||(this._hrefs={}))[n]=i})}return null}attr(t,n,r,i){const s={},o=(a,u,l,c)=>{s[c||a]=u};return Array.isArray(r)?r.forEach(a=>a(o,n,this)):r(o,n,this),i&&uBt(s,n,t,i,this._defs),s}defs(t){const n=this._defs.gradient,r=this._defs.clipping;if(Object.keys(n).length+Object.keys(r).length!==0){t.open("defs");for(const s in n){const o=n[s],a=o.stops;o.gradient==="radial"?(t.open("pattern",{id:pM+s,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),t.open("rect",{width:"1",height:"1",fill:"url(#"+s+")"}).close(),t.close(),t.open("radialGradient",{id:s,fx:o.x1,fy:o.y1,fr:o.r1,cx:o.x2,cy:o.y2,r:o.r2})):t.open("linearGradient",{id:s,x1:o.x1,x2:o.x2,y1:o.y1,y2:o.y2});for(let u=0;u<a.length;++u)t.open("stop",{offset:a[u].offset,"stop-color":a[u].color}).close();t.close()}for(const s in r){const o=r[s];t.open("clipPath",{id:s}),o.path?t.open("path",{d:o.path}).close():t.open("rect",{x:0,y:0,width:o.width,height:o.height}).close(),t.close()}t.close()}}}function uBt(e,t,n,r,i){let s;if(t==null||(r==="bgrect"&&n.interactive===!1&&(e["pointer-events"]="none"),r==="bgfore"&&(n.interactive===!1&&(e["pointer-events"]="none"),e.display="none",t.fill!==null)))return e;r==="image"&&t.smooth===!1&&(s=["image-rendering: optimizeSpeed;","image-rendering: pixelated;"]),r==="text"&&(e["font-family"]=CR(t),e["font-size"]=ip(t)+"px",e["font-style"]=t.fontStyle,e["font-variant"]=t.fontVariant,e["font-weight"]=t.fontWeight);for(const o in TM){let a=t[o];const u=TM[o];a==="transparent"&&(u==="fill"||u==="stroke")||a!=null&&(ute(a)&&(a=P$e(a,i.gradient,"")),e[u]=a)}for(const o in CM){const a=t[o];a!=null&&(s=s||[],s.push(`${CM[o]}: ${a};`))}return s&&(e.style=s.join(" ")),e}const yf={svgMarkTypes:["text"],svgOnTop:!0,debug:!1};function lBt(e){yf.svgMarkTypes=e.svgMarkTypes??["text"],yf.svgOnTop=e.svgOnTop??!0,yf.debug=e.debug??!1}class NH extends AR{constructor(t){super(t),this._svgRenderer=new Ote(t),this._canvasRenderer=new SM(t)}initialize(t,n,r,i,s){this._root_el=Ps(t,0,"div");const o=Ps(this._root_el,0,"div"),a=Ps(this._root_el,1,"div");return this._root_el.style.position="relative",yf.debug||(o.style.height="100%",a.style.position="absolute",a.style.top="0",a.style.left="0",a.style.height="100%",a.style.width="100%"),this._svgEl=yf.svgOnTop?a:o,this._canvasEl=yf.svgOnTop?o:a,this._svgEl.style.pointerEvents="none",this._canvasRenderer.initialize(this._canvasEl,n,r,i,s),this._svgRenderer.initialize(this._svgEl,n,r,i,s),super.initialize(t,n,r,i,s)}dirty(t){return yf.svgMarkTypes.includes(t.mark.marktype)?this._svgRenderer.dirty(t):this._canvasRenderer.dirty(t),this}_render(t,n){const i=(n??["arc","area","image","line","path","rect","rule","shape","symbol","text","trail"]).filter(s=>!yf.svgMarkTypes.includes(s));this._svgRenderer.render(t,yf.svgMarkTypes),this._canvasRenderer.render(t,i)}resize(t,n,r,i){return super.resize(t,n,r,i),this._svgRenderer.resize(t,n,r,i),this._canvasRenderer.resize(t,n,r,i),this}background(t){return yf.svgOnTop?this._canvasRenderer.background(t):this._svgRenderer.background(t),this}}class TMe extends IR{constructor(t,n){super(t,n)}initialize(t,n,r){const i=Ps(Ps(t,0,"div"),yf.svgOnTop?0:1,"div");return super.initialize(i,n,r)}}const CMe="canvas",AMe="hybrid",IMe="png",kMe="svg",RMe="none",o0={Canvas:CMe,PNG:IMe,SVG:kMe,Hybrid:AMe,None:RMe},db={};db[CMe]=db[IMe]={renderer:SM,headless:SM,handler:IR};db[kMe]={renderer:Ote,headless:SMe,handler:dMe};db[AMe]={renderer:NH,headless:NH,handler:TMe};db[RMe]={};function TF(e,t){return e=String(e||"").toLowerCase(),arguments.length>1?(db[e]=t,this):db[e]}function NMe(e,t,n){const r=[],i=new Ts().union(t),s=e.marktype;return s?DMe(e,i,n,r):s==="group"?PMe(e,i,n,r):Le("Intersect scene must be mark node or group item.")}function DMe(e,t,n,r){if(cBt(e,t,n)){const i=e.items,s=e.marktype,o=i.length;let a=0;if(s==="group")for(;a<o;++a)PMe(i[a],t,n,r);else for(const u=Wl[s].isect;a<o;++a){const l=i[a];OMe(l,t,u)&&r.push(l)}}return r}function cBt(e,t,n){return e.bounds&&t.intersects(e.bounds)&&(e.marktype==="group"||e.interactive!==!1&&(!n||n(e)))}function PMe(e,t,n,r){n&&n(e.mark)&&OMe(e,t,Wl.group.isect)&&r.push(e);const i=e.items,s=i&&i.length;if(s){const o=e.x||0,a=e.y||0;t.translate(-o,-a);for(let u=0;u<s;++u)DMe(i[u],t,n,r);t.translate(o,a)}return r}function OMe(e,t,n){const r=e.bounds;return t.encloses(r)||t.intersects(r)&&n(e,t)}const nB=new Ts;function $Me(e){const t=e.clip;if(_n(t))t(xR(nB.clear()));else if(t)nB.set(0,0,e.group.width,e.group.height);else return;e.bounds.intersect(nB)}const fBt=1e-9;function $te(e,t,n){return e===t?!0:n==="path"?MMe(e,t):e instanceof Date&&t instanceof Date?+e==+t:lr(e)&&lr(t)?Math.abs(e-t)<=fBt:!e||!t||!gt(e)&&!gt(t)?e==t:dBt(e,t)}function MMe(e,t){return $te(Tx(e),Tx(t))}function dBt(e,t){var n=Object.keys(e),r=Object.keys(t),i,s;if(n.length!==r.length)return!1;for(n.sort(),r.sort(),s=n.length-1;s>=0;s--)if(n[s]!=r[s])return!1;for(s=n.length-1;s>=0;s--)if(i=n[s],!$te(e[i],t[i],i))return!1;return typeof e==typeof t}function hBt(){B$e(),Ljt()}const Ix="top",Af="left",Pf="right",my="bottom",pBt="top-left",mBt="top-right",gBt="bottom-left",yBt="bottom-right",Mte="start",DH="middle",Fa="end",vBt="x",bBt="y",CF="group",Lte="axis",Fte="title",_Bt="frame",wBt="scope",jte="legend",LMe="row-header",FMe="row-footer",jMe="row-title",BMe="column-header",UMe="column-footer",zMe="column-title",EBt="padding",xBt="symbol",VMe="fit",HMe="fit-x",qMe="fit-y",SBt="pad",Bte="none",ID="all",PH="each",Ute="flush",a0="column",u0="row";function WMe(e){De.call(this,null,e)}lt(WMe,De,{transform(e,t){const n=t.dataflow,r=e.mark,i=r.marktype,s=Wl[i],o=s.bound;let a=r.bounds,u;if(s.nested)r.items.length&&n.dirty(r.items[0]),a=kD(r,o),r.items.forEach(l=>{l.bounds.clear().union(a)});else if(i===CF||e.modified())switch(t.visit(t.MOD,l=>n.dirty(l)),a.clear(),r.items.forEach(l=>a.union(kD(l,o))),r.role){case Lte:case jte:case Fte:t.reflow()}else u=t.changed(t.REM),t.visit(t.ADD,l=>{a.union(kD(l,o))}),t.visit(t.MOD,l=>{u=u||a.alignsWith(l.bounds),n.dirty(l),a.union(kD(l,o))}),u&&(a.clear(),r.items.forEach(l=>a.union(l.bounds)));return $Me(r),t.modifies("bounds")}});function kD(e,t,n){return t(e.bounds.clear(),e,n)}const cme=":vega_identifier:";function zte(e){De.call(this,0,e)}zte.Definition={type:"Identifier",metadata:{modifies:!0},params:[{name:"as",type:"string",required:!0}]};lt(zte,De,{transform(e,t){const n=TBt(t.dataflow),r=e.as;let i=n.value;return t.visit(t.ADD,s=>s[r]=s[r]||++i),n.set(this.value=i),t}});function TBt(e){return e._signals[cme]||(e._signals[cme]=e.add(0))}function GMe(e){De.call(this,null,e)}lt(GMe,De,{transform(e,t){let n=this.value;n||(n=t.dataflow.scenegraph().mark(e.markdef,CBt(e),e.index),n.group.context=e.context,e.context.group||(e.context.group=n.group),n.source=this.source,n.clip=e.clip,n.interactive=e.interactive,this.value=n);const r=n.marktype===CF?yF:gF;return t.visit(t.ADD,i=>r.call(i,n)),(e.modified("clip")||e.modified("interactive"))&&(n.clip=e.clip,n.interactive=!!e.interactive,n.zdirty=!0,t.reflow()),n.items=t.source,t}});function CBt(e){const t=e.groups,n=e.parent;return t&&t.size===1?t.get(Object.keys(t.object)[0]):t&&n?t.lookup(n):null}function YMe(e){De.call(this,null,e)}const fme={parity:e=>e.filter((t,n)=>n%2?t.opacity=0:1),greedy:(e,t)=>{let n;return e.filter((r,i)=>!i||!KMe(n.bounds,r.bounds,t)?(n=r,1):r.opacity=0)}},KMe=(e,t,n)=>n>Math.max(t.x1-e.x2,e.x1-t.x2,t.y1-e.y2,e.y1-t.y2),dme=(e,t)=>{for(var n=1,r=e.length,i=e[0].bounds,s;n<r;i=s,++n)if(KMe(i,s=e[n].bounds,t))return!0},ABt=e=>{const t=e.bounds;return t.width()>1&&t.height()>1},IBt=(e,t,n)=>{var r=e.range(),i=new Ts;return t===Ix||t===my?i.set(r[0],-1/0,r[1],1/0):i.set(-1/0,r[0],1/0,r[1]),i.expand(n||1),s=>i.encloses(s.bounds)},hme=e=>(e.forEach(t=>t.opacity=1),e),pme=(e,t)=>e.reflow(t.modified()).modifies("opacity");lt(YMe,De,{transform(e,t){const n=fme[e.method]||fme.parity,r=e.separation||0;let i=t.materialize(t.SOURCE).source,s,o;if(!i||!i.length)return;if(!e.method)return e.modified("method")&&(hme(i),t=pme(t,e)),t;if(i=i.filter(ABt),!i.length)return;if(e.sort&&(i=i.slice().sort(e.sort)),s=hme(i),t=pme(t,e),s.length>=3&&dme(s,r)){do s=n(s,r);while(s.length>=3&&dme(s,r));s.length<3&&!Qn(i).opacity&&(s.length>1&&(Qn(s).opacity=0),Qn(i).opacity=1)}e.boundScale&&e.boundTolerance>=0&&(o=IBt(e.boundScale,e.boundOrient,+e.boundTolerance),i.forEach(u=>{o(u)||(u.opacity=0)}));const a=s[0].mark.bounds.clear();return i.forEach(u=>{u.opacity&&a.union(u.bounds)}),t}});function XMe(e){De.call(this,null,e)}lt(XMe,De,{transform(e,t){const n=t.dataflow;if(t.visit(t.ALL,r=>n.dirty(r)),t.fields&&t.fields.zindex){const r=t.source&&t.source[0];r&&(r.mark.zdirty=!0)}}});const ia=new Ts;function Lw(e,t,n){return e[t]===n?0:(e[t]=n,1)}function kBt(e){var t=e.items[0].orient;return t===Af||t===Pf}function RBt(e){let t=+e.grid;return[e.ticks?t++:-1,e.labels?t++:-1,t+ +e.domain]}function NBt(e,t,n,r){var i=t.items[0],s=i.datum,o=i.translate!=null?i.translate:.5,a=i.orient,u=RBt(s),l=i.range,c=i.offset,f=i.position,d=i.minExtent,h=i.maxExtent,p=s.title&&i.items[u[2]].items[0],m=i.titlePadding,g=i.bounds,y=p&&Ste(p),v=0,b=0,w,E;switch(ia.clear().union(g),g.clear(),(w=u[0])>-1&&g.union(i.items[w].bounds),(w=u[1])>-1&&g.union(i.items[w].bounds),a){case Ix:v=f||0,b=-c,E=Math.max(d,Math.min(h,-g.y1)),g.add(0,-E).add(l,0),p&&RD(e,p,E,m,y,0,-1,g);break;case Af:v=-c,b=f||0,E=Math.max(d,Math.min(h,-g.x1)),g.add(-E,0).add(0,l),p&&RD(e,p,E,m,y,1,-1,g);break;case Pf:v=n+c,b=f||0,E=Math.max(d,Math.min(h,g.x2)),g.add(0,0).add(E,l),p&&RD(e,p,E,m,y,1,1,g);break;case my:v=f||0,b=r+c,E=Math.max(d,Math.min(h,g.y2)),g.add(0,0).add(l,E),p&&RD(e,p,E,m,0,0,1,g);break;default:v=i.x,b=i.y}return og(g.translate(v,b),i),Lw(i,"x",v+o)|Lw(i,"y",b+o)&&(i.bounds=ia,e.dirty(i),i.bounds=g,e.dirty(i)),i.mark.bounds.clear().union(g)}function RD(e,t,n,r,i,s,o,a){const u=t.bounds;if(t.auto){const l=o*(n+i+r);let c=0,f=0;e.dirty(t),s?c=(t.x||0)-(t.x=l):f=(t.y||0)-(t.y=l),t.mark.bounds.clear().union(u.translate(-c,-f)),e.dirty(t)}a.union(u)}const mme=(e,t)=>Math.floor(Math.min(e,t)),gme=(e,t)=>Math.ceil(Math.max(e,t));function DBt(e){var t=e.items,n=t.length,r=0,i,s;const o={marks:[],rowheaders:[],rowfooters:[],colheaders:[],colfooters:[],rowtitle:null,coltitle:null};for(;r<n;++r)if(i=t[r],s=i.items,i.marktype===CF)switch(i.role){case Lte:case jte:case Fte:break;case LMe:o.rowheaders.push(...s);break;case FMe:o.rowfooters.push(...s);break;case BMe:o.colheaders.push(...s);break;case UMe:o.colfooters.push(...s);break;case jMe:o.rowtitle=s[0];break;case zMe:o.coltitle=s[0];break;default:o.marks.push(...s)}return o}function PBt(e){return new Ts().set(0,0,e.width||0,e.height||0)}function OBt(e){const t=e.bounds.clone();return t.empty()?t.set(0,0,0,0):t.translate(-(e.x||0),-(e.y||0))}function _i(e,t,n){const r=gt(e)?e[t]:e;return r??(n!==void 0?n:0)}function yme(e){return e<0?Math.ceil(-e):0}function QMe(e,t,n){var r=!n.nodirty,i=n.bounds===Ute?PBt:OBt,s=ia.set(0,0,0,0),o=_i(n.align,a0),a=_i(n.align,u0),u=_i(n.padding,a0),l=_i(n.padding,u0),c=n.columns||t.length,f=c<=0?1:Math.ceil(t.length/c),d=t.length,h=Array(d),p=Array(c),m=0,g=Array(d),y=Array(f),v=0,b=Array(d),w=Array(d),E=Array(d),T,S,C,A,k,N,O,P,$,F,M;for(S=0;S<c;++S)p[S]=0;for(S=0;S<f;++S)y[S]=0;for(S=0;S<d;++S)N=t[S],k=E[S]=i(N),N.x=N.x||0,b[S]=0,N.y=N.y||0,w[S]=0,C=S%c,A=~~(S/c),m=Math.max(m,O=Math.ceil(k.x2)),v=Math.max(v,P=Math.ceil(k.y2)),p[C]=Math.max(p[C],O),y[A]=Math.max(y[A],P),h[S]=u+yme(k.x1),g[S]=l+yme(k.y1),r&&e.dirty(t[S]);for(S=0;S<d;++S)S%c===0&&(h[S]=0),S<c&&(g[S]=0);if(o===PH)for(C=1;C<c;++C){for(M=0,S=C;S<d;S+=c)M<h[S]&&(M=h[S]);for(S=C;S<d;S+=c)h[S]=M+p[C-1]}else if(o===ID){for(M=0,S=0;S<d;++S)S%c&&M<h[S]&&(M=h[S]);for(S=0;S<d;++S)S%c&&(h[S]=M+m)}else for(o=!1,C=1;C<c;++C)for(S=C;S<d;S+=c)h[S]+=p[C-1];if(a===PH)for(A=1;A<f;++A){for(M=0,S=A*c,T=S+c;S<T;++S)M<g[S]&&(M=g[S]);for(S=A*c;S<T;++S)g[S]=M+y[A-1]}else if(a===ID){for(M=0,S=c;S<d;++S)M<g[S]&&(M=g[S]);for(S=c;S<d;++S)g[S]=M+v}else for(a=!1,A=1;A<f;++A)for(S=A*c,T=S+c;S<T;++S)g[S]+=y[A-1];for($=0,S=0;S<d;++S)$=h[S]+(S%c?$:0),b[S]+=$-t[S].x;for(C=0;C<c;++C)for(F=0,S=C;S<d;S+=c)F+=g[S],w[S]+=F-t[S].y;if(o&&_i(n.center,a0)&&f>1)for(S=0;S<d;++S)k=o===ID?m:p[S%c],$=k-E[S].x2-t[S].x-b[S],$>0&&(b[S]+=$/2);if(a&&_i(n.center,u0)&&c!==1)for(S=0;S<d;++S)k=a===ID?v:y[~~(S/c)],F=k-E[S].y2-t[S].y-w[S],F>0&&(w[S]+=F/2);for(S=0;S<d;++S)s.union(E[S].translate(b[S],w[S]));switch($=_i(n.anchor,vBt),F=_i(n.anchor,bBt),_i(n.anchor,a0)){case Fa:$-=s.width();break;case DH:$-=s.width()/2}switch(_i(n.anchor,u0)){case Fa:F-=s.height();break;case DH:F-=s.height()/2}for($=Math.round($),F=Math.round(F),s.clear(),S=0;S<d;++S)t[S].mark.bounds.clear();for(S=0;S<d;++S)N=t[S],N.x+=b[S]+=$,N.y+=w[S]+=F,s.union(N.mark.bounds.union(N.bounds.translate(b[S],w[S]))),r&&e.dirty(N);return s}function $Bt(e,t,n){var r=DBt(t),i=r.marks,s=n.bounds===Ute?MBt:LBt,o=n.offset,a=n.columns||i.length,u=a<=0?1:Math.ceil(i.length/a),l=u*a,c,f,d,h,p,m,g;const y=QMe(e,i,n);y.empty()&&y.set(0,0,0,0),r.rowheaders&&(m=_i(n.headerBand,u0,null),c=ND(e,r.rowheaders,i,a,u,-_i(o,"rowHeader"),mme,0,s,"x1",0,a,1,m)),r.colheaders&&(m=_i(n.headerBand,a0,null),f=ND(e,r.colheaders,i,a,a,-_i(o,"columnHeader"),mme,1,s,"y1",0,1,a,m)),r.rowfooters&&(m=_i(n.footerBand,u0,null),d=ND(e,r.rowfooters,i,a,u,_i(o,"rowFooter"),gme,0,s,"x2",a-1,a,1,m)),r.colfooters&&(m=_i(n.footerBand,a0,null),h=ND(e,r.colfooters,i,a,a,_i(o,"columnFooter"),gme,1,s,"y2",l-a,1,a,m)),r.rowtitle&&(p=_i(n.titleAnchor,u0),g=_i(o,"rowTitle"),g=p===Fa?d+g:c-g,m=_i(n.titleBand,u0,.5),vme(e,r.rowtitle,g,0,y,m)),r.coltitle&&(p=_i(n.titleAnchor,a0),g=_i(o,"columnTitle"),g=p===Fa?h+g:f-g,m=_i(n.titleBand,a0,.5),vme(e,r.coltitle,g,1,y,m))}function MBt(e,t){return t==="x1"?e.x||0:t==="y1"?e.y||0:t==="x2"?(e.x||0)+(e.width||0):t==="y2"?(e.y||0)+(e.height||0):void 0}function LBt(e,t){return e.bounds[t]}function ND(e,t,n,r,i,s,o,a,u,l,c,f,d,h){var p=n.length,m=0,g=0,y,v,b,w,E,T,S,C,A;if(!p)return m;for(y=c;y<p;y+=f)n[y]&&(m=o(m,u(n[y],l)));if(!t.length)return m;for(t.length>i&&(e.warn("Grid headers exceed limit: "+i),t=t.slice(0,i)),m+=s,v=0,w=t.length;v<w;++v)e.dirty(t[v]),t[v].mark.bounds.clear();for(y=c,v=0,w=t.length;v<w;++v,y+=f){for(T=t[v],E=T.mark.bounds,b=y;b>=0&&(S=n[b])==null;b-=d);a?(C=h==null?S.x:Math.round(S.bounds.x1+h*S.bounds.width()),A=m):(C=m,A=h==null?S.y:Math.round(S.bounds.y1+h*S.bounds.height())),E.union(T.bounds.translate(C-(T.x||0),A-(T.y||0))),T.x=C,T.y=A,e.dirty(T),g=o(g,E[l])}return g}function vme(e,t,n,r,i,s){if(t){e.dirty(t);var o=n,a=n;r?o=Math.round(i.x1+s*i.width()):a=Math.round(i.y1+s*i.height()),t.bounds.translate(o-(t.x||0),a-(t.y||0)),t.mark.bounds.clear().union(t.bounds),t.x=o,t.y=a,e.dirty(t)}}function FBt(e,t){const n=e[t]||{};return(r,i)=>n[r]!=null?n[r]:e[r]!=null?e[r]:i}function jBt(e,t){let n=-1/0;return e.forEach(r=>{r.offset!=null&&(n=Math.max(n,r.offset))}),n>-1/0?n:t}function BBt(e,t,n,r,i,s,o){const a=FBt(n,t),u=jBt(e,a("offset",0)),l=a("anchor",Mte),c=l===Fa?1:l===DH?.5:0,f={align:PH,bounds:a("bounds",Ute),columns:a("direction")==="vertical"?1:e.length,padding:a("margin",8),center:a("center"),nodirty:!0};switch(t){case Af:f.anchor={x:Math.floor(r.x1)-u,column:Fa,y:c*(o||r.height()+2*r.y1),row:l};break;case Pf:f.anchor={x:Math.ceil(r.x2)+u,y:c*(o||r.height()+2*r.y1),row:l};break;case Ix:f.anchor={y:Math.floor(i.y1)-u,row:Fa,x:c*(s||i.width()+2*i.x1),column:l};break;case my:f.anchor={y:Math.ceil(i.y2)+u,x:c*(s||i.width()+2*i.x1),column:l};break;case pBt:f.anchor={x:u,y:u};break;case mBt:f.anchor={x:s-u,y:u,column:Fa};break;case gBt:f.anchor={x:u,y:o-u,row:Fa};break;case yBt:f.anchor={x:s-u,y:o-u,column:Fa,row:Fa};break}return f}function UBt(e,t){var n=t.items[0],r=n.datum,i=n.orient,s=n.bounds,o=n.x,a=n.y,u,l;return n._bounds?n._bounds.clear().union(s):n._bounds=s.clone(),s.clear(),VBt(e,n,n.items[0].items[0]),s=zBt(n,s),u=2*n.padding,l=2*n.padding,s.empty()||(u=Math.ceil(s.width()+u),l=Math.ceil(s.height()+l)),r.type===xBt&&HBt(n.items[0].items[0].items[0].items),i!==Bte&&(n.x=o=0,n.y=a=0),n.width=u,n.height=l,og(s.set(o,a,o+u,a+l),n),n.mark.bounds.clear().union(s),n}function zBt(e,t){return e.items.forEach(n=>t.union(n.bounds)),t.x1=e.padding,t.y1=e.padding,t}function VBt(e,t,n){var r=t.padding,i=r-n.x,s=r-n.y;if(!t.datum.title)(i||s)&&ZT(e,n,i,s);else{var o=t.items[1].items[0],a=o.anchor,u=t.titlePadding||0,l=r-o.x,c=r-o.y;switch(o.orient){case Af:i+=Math.ceil(o.bounds.width())+u;break;case Pf:case my:break;default:s+=o.bounds.height()+u}switch((i||s)&&ZT(e,n,i,s),o.orient){case Af:c+=V_(t,n,o,a,1,1);break;case Pf:l+=V_(t,n,o,Fa,0,0)+u,c+=V_(t,n,o,a,1,1);break;case my:l+=V_(t,n,o,a,0,0),c+=V_(t,n,o,Fa,-1,0,1)+u;break;default:l+=V_(t,n,o,a,0,0)}(l||c)&&ZT(e,o,l,c),(l=Math.round(o.bounds.x1-r))<0&&(ZT(e,n,-l,0),ZT(e,o,-l,0))}}function V_(e,t,n,r,i,s,o){const a=e.datum.type!=="symbol",u=n.datum.vgrad,l=a&&(s||!u)&&!o?t.items[0]:t,c=l.bounds[i?"y2":"x2"]-e.padding,f=u&&s?c:0,d=u&&s?0:c,h=i<=0?0:Ste(n);return Math.round(r===Mte?f:r===Fa?d-h:.5*(c-h))}function ZT(e,t,n,r){t.x+=n,t.y+=r,t.bounds.translate(n,r),t.mark.bounds.translate(n,r),e.dirty(t)}function HBt(e){const t=e.reduce((n,r)=>(n[r.column]=Math.max(r.bounds.x2-r.x,n[r.column]||0),n),{});e.forEach(n=>{n.width=t[n.column],n.height=n.bounds.y2-n.y})}function qBt(e,t,n,r,i){var s=t.items[0],o=s.frame,a=s.orient,u=s.anchor,l=s.offset,c=s.padding,f=s.items[0].items[0],d=s.items[1]&&s.items[1].items[0],h=a===Af||a===Pf?r:n,p=0,m=0,g=0,y=0,v=0,b;if(o!==CF?a===Af?(p=i.y2,h=i.y1):a===Pf?(p=i.y1,h=i.y2):(p=i.x1,h=i.x2):a===Af&&(p=r,h=0),b=u===Mte?p:u===Fa?h:(p+h)/2,d&&d.text){switch(a){case Ix:case my:v=f.bounds.height()+c;break;case Af:y=f.bounds.width()+c;break;case Pf:y=-f.bounds.width()-c;break}ia.clear().union(d.bounds),ia.translate(y-(d.x||0),v-(d.y||0)),Lw(d,"x",y)|Lw(d,"y",v)&&(e.dirty(d),d.bounds.clear().union(ia),d.mark.bounds.clear().union(ia),e.dirty(d)),ia.clear().union(d.bounds)}else ia.clear();switch(ia.union(f.bounds),a){case Ix:m=b,g=i.y1-ia.height()-l;break;case Af:m=i.x1-ia.width()-l,g=b;break;case Pf:m=i.x2+ia.width()+l,g=b;break;case my:m=b,g=i.y2+l;break;default:m=s.x,g=s.y}return Lw(s,"x",m)|Lw(s,"y",g)&&(ia.translate(m,g),e.dirty(s),s.bounds.clear().union(ia),t.bounds.clear().union(ia),e.dirty(s)),s.bounds}function JMe(e){De.call(this,null,e)}lt(JMe,De,{transform(e,t){const n=t.dataflow;return e.mark.items.forEach(r=>{e.layout&&$Bt(n,r,e.layout),GBt(n,r,e)}),WBt(e.mark.group)?t.reflow():t}});function WBt(e){return e&&e.mark.role!=="legend-entry"}function GBt(e,t,n){var r=t.items,i=Math.max(0,t.width||0),s=Math.max(0,t.height||0),o=new Ts().set(0,0,i,s),a=o.clone(),u=o.clone(),l=[],c,f,d,h,p,m;for(p=0,m=r.length;p<m;++p)switch(f=r[p],f.role){case Lte:h=kBt(f)?a:u,h.union(NBt(e,f,i,s));break;case Fte:c=f;break;case jte:l.push(UBt(e,f));break;case _Bt:case wBt:case LMe:case FMe:case jMe:case BMe:case UMe:case zMe:a.union(f.bounds),u.union(f.bounds);break;default:o.union(f.bounds)}if(l.length){const g={};l.forEach(y=>{d=y.orient||Pf,d!==Bte&&(g[d]||(g[d]=[])).push(y)});for(const y in g){const v=g[y];QMe(e,v,BBt(v,y,n.legends,a,u,i,s))}l.forEach(y=>{const v=y.bounds;if(v.equals(y._bounds)||(y.bounds=y._bounds,e.dirty(y),y.bounds=v,e.dirty(y)),n.autosize&&(n.autosize.type===VMe||n.autosize.type===HMe||n.autosize.type===qMe))switch(y.orient){case Af:case Pf:o.add(v.x1,0).add(v.x2,0);break;case Ix:case my:o.add(0,v.y1).add(0,v.y2)}else o.union(v)})}o.union(a).union(u),c&&o.union(qBt(e,c,i,s,o)),t.clip&&o.set(0,0,t.width||0,t.height||0),YBt(e,t,o,n)}function YBt(e,t,n,r){const i=r.autosize||{},s=i.type;if(e._autosize<1||!s)return;let o=e._width,a=e._height,u=Math.max(0,t.width||0),l=Math.max(0,Math.ceil(-n.x1)),c=Math.max(0,t.height||0),f=Math.max(0,Math.ceil(-n.y1));const d=Math.max(0,Math.ceil(n.x2-u)),h=Math.max(0,Math.ceil(n.y2-c));if(i.contains===EBt){const p=e.padding();o-=p.left+p.right,a-=p.top+p.bottom}s===Bte?(l=0,f=0,u=o,c=a):s===VMe?(u=Math.max(0,o-l-d),c=Math.max(0,a-f-h)):s===HMe?(u=Math.max(0,o-l-d),a=c+f+h):s===qMe?(o=u+l+d,c=Math.max(0,a-f-h)):s===SBt&&(o=u+l+d,a=c+f+h),e._resizeView(o,a,u,c,[l,f],i.resize)}const KBt=Object.freeze(Object.defineProperty({__proto__:null,bound:WMe,identifier:zte,mark:GMe,overlap:YMe,render:XMe,viewlayout:JMe},Symbol.toStringTag,{value:"Module"}));function ZMe(e){De.call(this,null,e)}lt(ZMe,De,{transform(e,t){if(this.value&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=this.value,s=e.scale,o=e.count==null?e.values?e.values.length:10:e.count,a=ote(s,o,e.minstep),u=e.format||C$e(n,s,a,e.formatSpecifier,e.formatType,!!e.values),l=e.values?T$e(s,e.values,a):ate(s,a);return i&&(r.rem=i),i=l.map((c,f)=>Er({index:f/(l.length-1||1),value:c,label:u(c)})),e.extra&&i.length&&i.push(Er({index:-1,extra:{value:i[0].value},label:""})),r.source=i,r.add=i,this.value=i,r}});function eLe(e){De.call(this,null,e)}function XBt(){return Er({})}function QBt(e){const t=qS().test(n=>n.exit);return t.lookup=n=>t.get(e(n)),t}lt(eLe,De,{transform(e,t){var n=t.dataflow,r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.item||XBt,s=e.key||Lt,o=this.value;return je(r.encode)&&(r.encode=null),o&&(e.modified("key")||t.modified(s))&&Le("DataJoin does not support modified key function or fields."),o||(t=t.addAll(),this.value=o=QBt(s)),t.visit(t.ADD,a=>{const u=s(a);let l=o.get(u);l?l.exit?(o.empty--,r.add.push(l)):r.mod.push(l):(l=i(a),o.set(u,l),r.add.push(l)),l.datum=a,l.exit=!1}),t.visit(t.MOD,a=>{const u=s(a),l=o.get(u);l&&(l.datum=a,r.mod.push(l))}),t.visit(t.REM,a=>{const u=s(a),l=o.get(u);a===l.datum&&!l.exit&&(r.rem.push(l),l.exit=!0,++o.empty)}),t.changed(t.ADD_MOD)&&r.modifies("datum"),(t.clean()||e.clean&&o.empty>n.cleanThreshold)&&n.runAfter(o.clean),r}});function tLe(e){De.call(this,null,e)}lt(tLe,De,{transform(e,t){var n=t.fork(t.ADD_REM),r=e.mod||!1,i=e.encoders,s=t.encode;if(je(s))if(n.changed()||s.every(f=>i[f]))s=s[0],n.encode=null;else return t.StopPropagation;var o=s==="enter",a=i.update||Cg,u=i.enter||Cg,l=i.exit||Cg,c=(s&&!o?i[s]:a)||Cg;if(t.changed(t.ADD)&&(t.visit(t.ADD,f=>{u(f,e),a(f,e)}),n.modifies(u.output),n.modifies(a.output),c!==Cg&&c!==a&&(t.visit(t.ADD,f=>{c(f,e)}),n.modifies(c.output))),t.changed(t.REM)&&l!==Cg&&(t.visit(t.REM,f=>{l(f,e)}),n.modifies(l.output)),o||c!==Cg){const f=t.MOD|(e.modified()?t.REFLOW:0);o?(t.visit(f,d=>{const h=u(d,e)||r;(c(d,e)||h)&&n.mod.push(d)}),n.mod.length&&n.modifies(u.output)):t.visit(f,d=>{(c(d,e)||r)&&n.mod.push(d)}),n.mod.length&&n.modifies(c.output)}return n.changed()?n:t.StopPropagation}});function nLe(e){De.call(this,[],e)}lt(nLe,De,{transform(e,t){if(this.value!=null&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=this.value,s=e.type||XP,o=e.scale,a=+e.limit,u=ote(o,e.count==null?5:e.count,e.minstep),l=!!e.values||s===XP,c=e.format||R$e(n,o,u,s,e.formatSpecifier,e.formatType,l),f=e.values||k$e(o,u),d,h,p,m,g;return i&&(r.rem=i),s===XP?(a&&f.length>a?(t.dataflow.warn("Symbol legend count exceeds limit, filtering items."),i=f.slice(0,a-1),g=!0):i=f,_n(p=e.size)?(!e.values&&o(i[0])===0&&(i=i.slice(1)),m=i.reduce((y,v)=>Math.max(y,p(v,e)),0)):p=Sa(m=p||8),i=i.map((y,v)=>Er({index:v,label:c(y,v,i),value:y,offset:m,size:p(y,e)})),g&&(g=f[i.length],i.push(Er({index:i.length,label:`${f.length-i.length} entries`,value:g,offset:m,size:p(g,e)})))):s===Sjt?(d=o.domain(),h=E$e(o,d[0],Qn(d)),f.length<3&&!e.values&&d[0]!==Qn(d)&&(f=[d[0],Qn(d)]),i=f.map((y,v)=>Er({index:v,label:c(y,v,f),value:y,perc:h(y)}))):(p=f.length-1,h=$jt(o),i=f.map((y,v)=>Er({index:v,label:c(y,v,f),value:y,perc:v?h(y):0,perc2:v===p?1:h(f[v+1])}))),r.source=i,r.add=i,this.value=i,r}});const JBt=e=>e.source.x,ZBt=e=>e.source.y,eUt=e=>e.target.x,tUt=e=>e.target.y;function Vte(e){De.call(this,{},e)}Vte.Definition={type:"LinkPath",metadata:{modifies:!0},params:[{name:"sourceX",type:"field",default:"source.x"},{name:"sourceY",type:"field",default:"source.y"},{name:"targetX",type:"field",default:"target.x"},{name:"targetY",type:"field",default:"target.y"},{name:"orient",type:"enum",default:"vertical",values:["horizontal","vertical","radial"]},{name:"shape",type:"enum",default:"line",values:["line","arc","curve","diagonal","orthogonal"]},{name:"require",type:"signal"},{name:"as",type:"string",default:"path"}]};lt(Vte,De,{transform(e,t){var n=e.sourceX||JBt,r=e.sourceY||ZBt,i=e.targetX||eUt,s=e.targetY||tUt,o=e.as||"path",a=e.orient||"vertical",u=e.shape||"line",l=bme.get(u+"-"+a)||bme.get(u);return l||Le("LinkPath unsupported type: "+e.shape+(e.orient?"-"+e.orient:"")),t.visit(t.SOURCE,c=>{c[o]=l(n(c),r(c),i(c),s(c))}),t.reflow(e.modified()).modifies(o)}});const rLe=(e,t,n,r)=>"M"+e+","+t+"L"+n+","+r,nUt=(e,t,n,r)=>rLe(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),iLe=(e,t,n,r)=>{var i=n-e,s=r-t,o=Math.hypot(i,s)/2,a=180*Math.atan2(s,i)/Math.PI;return"M"+e+","+t+"A"+o+","+o+" "+a+" 0 1 "+n+","+r},rUt=(e,t,n,r)=>iLe(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),sLe=(e,t,n,r)=>{const i=n-e,s=r-t,o=.2*(i+s),a=.2*(s-i);return"M"+e+","+t+"C"+(e+o)+","+(t+a)+" "+(n+a)+","+(r-o)+" "+n+","+r},iUt=(e,t,n,r)=>sLe(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),sUt=(e,t,n,r)=>"M"+e+","+t+"V"+r+"H"+n,oUt=(e,t,n,r)=>"M"+e+","+t+"H"+n+"V"+r,aUt=(e,t,n,r)=>{const i=Math.cos(e),s=Math.sin(e),o=Math.cos(n),a=Math.sin(n),u=Math.abs(n-e)>Math.PI?n<=e:n>e;return"M"+t*i+","+t*s+"A"+t+","+t+" 0 0,"+(u?1:0)+" "+t*o+","+t*a+"L"+r*o+","+r*a},uUt=(e,t,n,r)=>{const i=(e+n)/2;return"M"+e+","+t+"C"+i+","+t+" "+i+","+r+" "+n+","+r},lUt=(e,t,n,r)=>{const i=(t+r)/2;return"M"+e+","+t+"C"+e+","+i+" "+n+","+i+" "+n+","+r},cUt=(e,t,n,r)=>{const i=Math.cos(e),s=Math.sin(e),o=Math.cos(n),a=Math.sin(n),u=(t+r)/2;return"M"+t*i+","+t*s+"C"+u*i+","+u*s+" "+u*o+","+u*a+" "+r*o+","+r*a},bme=qS({line:rLe,"line-radial":nUt,arc:iLe,"arc-radial":rUt,curve:sLe,"curve-radial":iUt,"orthogonal-horizontal":sUt,"orthogonal-vertical":oUt,"orthogonal-radial":aUt,"diagonal-horizontal":uUt,"diagonal-vertical":lUt,"diagonal-radial":cUt});function Hte(e){De.call(this,null,e)}Hte.Definition={type:"Pie",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"startAngle",type:"number",default:0},{name:"endAngle",type:"number",default:6.283185307179586},{name:"sort",type:"boolean",default:!1},{name:"as",type:"string",array:!0,length:2,default:["startAngle","endAngle"]}]};lt(Hte,De,{transform(e,t){var n=e.as||["startAngle","endAngle"],r=n[0],i=n[1],s=e.field||zS,o=e.startAngle||0,a=e.endAngle!=null?e.endAngle:2*Math.PI,u=t.source,l=u.map(s),c=l.length,f=o,d=(a-o)/Zxe(l),h=$u(c),p,m,g;for(e.sort&&h.sort((y,v)=>l[y]-l[v]),p=0;p<c;++p)g=l[h[p]],m=u[h[p]],m[r]=f,m[i]=f+=g*d;return this.value=l,t.reflow(e.modified()).modifies(n)}});const fUt=5;function dUt(e){const t=e.type;return!e.bins&&(t===Ex||t===gR||t===yR)}function oLe(e){return rte(e)&&e!==_h}const hUt=ed(["set","modified","clear","type","scheme","schemeExtent","schemeCount","domain","domainMin","domainMid","domainMax","domainRaw","domainImplicit","nice","zero","bins","range","rangeStep","round","reverse","interpolate","interpolateGamma"]);function aLe(e){De.call(this,null,e),this.modified(!0)}lt(aLe,De,{transform(e,t){var n=t.dataflow,r=this.value,i=pUt(e);(!r||i!==r.type)&&(this.value=r=gr(i)());for(i in e)if(!hUt[i]){if(i==="padding"&&oLe(r.type))continue;_n(r[i])?r[i](e[i]):n.warn("Unsupported scale property: "+i)}return _Ut(r,e,bUt(r,e,gUt(r,e,n))),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function pUt(e){var t=e.type,n="",r;return t===_h?_h+"-"+Ex:(mUt(e)&&(r=e.rawDomain?e.rawDomain.length:e.domain?e.domain.length+ +(e.domainMid!=null):0,n=r===2?_h+"-":r===3?KS+"-":""),(n+t||Ex).toLowerCase())}function mUt(e){const t=e.type;return rte(t)&&t!==cb&&t!==fb&&(e.scheme||e.range&&e.range.length&&e.range.every(mt))}function gUt(e,t,n){const r=yUt(e,t.domainRaw,n);if(r>-1)return r;var i=t.domain,s=e.type,o=t.zero||t.zero===void 0&&dUt(e),a,u;if(!i)return 0;if((o||t.domainMin!=null||t.domainMax!=null||t.domainMid!=null)&&(a=(i=i.slice()).length-1||1,o&&(i[0]>0&&(i[0]=0),i[a]<0&&(i[a]=0)),t.domainMin!=null&&(i[0]=t.domainMin),t.domainMax!=null&&(i[a]=t.domainMax),t.domainMid!=null)){u=t.domainMid;const l=u>i[a]?a+1:u<i[0]?0:a;l!==a&&n.warn("Scale domainMid exceeds domain min or max.",u),i.splice(l,0,u)}return oLe(s)&&t.padding&&i[0]!==Qn(i)&&(i=vUt(s,i,t.range,t.padding,t.exponent,t.constant)),e.domain(uLe(s,i,n)),s===Zee&&e.unknown(t.domainImplicit?wz:void 0),t.nice&&e.nice&&e.nice(t.nice!==!0&&ote(e,t.nice)||null),i.length}function yUt(e,t,n){return t?(e.domain(uLe(e.type,t,n)),t.length):-1}function vUt(e,t,n,r,i,s){var o=Math.abs(Qn(n)-n[0]),a=o/(o-2*r),u=e===jm?WZ(t,null,a):e===yR?cM(t,null,a,.5):e===gR?cM(t,null,a,i||1):e===fF?GZ(t,null,a,s||1):qZ(t,null,a);return t=t.slice(),t[0]=u[0],t[t.length-1]=u[1],t}function uLe(e,t,n){if(y$e(e)){var r=Math.abs(t.reduce((i,s)=>i+(s<0?-1:s>0?1:0),0));r!==t.length&&n.warn("Log scale domain includes zero: "+rt(t))}return t}function bUt(e,t,n){let r=t.bins;if(r&&!je(r)){const i=e.domain(),s=i[0],o=Qn(i),a=r.step;let u=r.start==null?s:r.start,l=r.stop==null?o:r.stop;a||Le("Scale bins parameter missing step property."),u<s&&(u=a*Math.ceil(s/a)),l>o&&(l=a*Math.floor(o/a)),r=$u(u,l+a/2,a)}return r?e.bins=r:e.bins&&delete e.bins,e.type===ete&&(r?!t.domain&&!t.domainRaw&&(e.domain(r),n=r.length):e.bins=e.domain()),n}function _Ut(e,t,n){var r=e.type,i=t.round||!1,s=t.range;if(t.rangeStep!=null)s=wUt(r,t,n);else if(t.scheme&&(s=EUt(r,t,n),_n(s))){if(e.interpolator)return e.interpolator(s);Le(`Scale type ${r} does not support interpolating color schemes.`)}if(s&&v$e(r))return e.interpolator(pF(OH(s,t.reverse),t.interpolate,t.interpolateGamma));s&&t.interpolate&&e.interpolate?e.interpolate(ite(t.interpolate,t.interpolateGamma)):_n(e.round)?e.round(i):_n(e.rangeRound)&&e.interpolate(i?Tk:Zm),s&&e.range(OH(s,t.reverse))}function wUt(e,t,n){e!==f$e&&e!==bH&&Le("Only band and point scales support rangeStep.");var r=(t.paddingOuter!=null?t.paddingOuter:t.padding)||0,i=e===bH?1:(t.paddingInner!=null?t.paddingInner:t.padding)||0;return[0,t.rangeStep*Jee(n,i,r)]}function EUt(e,t,n){var r=t.schemeExtent,i,s;return je(t.scheme)?s=pF(t.scheme,t.interpolate,t.interpolateGamma):(i=t.scheme.toLowerCase(),s=ste(i),s||Le(`Unrecognized scheme name: ${t.scheme}`)),n=e===hF?n+1:e===ete?n-1:e===xx||e===dF?+t.schemeCount||fUt:n,v$e(e)?_me(s,r,t.reverse):_n(s)?w$e(_me(s,r),n):e===Zee?s:s.slice(0,n)}function _me(e,t,n){return _n(e)&&(t||n)?_$e(e,OH(t||[0,1],n)):e}function OH(e,t){return t?e.slice().reverse():e}function lLe(e){De.call(this,null,e)}lt(lLe,De,{transform(e,t){const n=e.modified("sort")||t.changed(t.ADD)||t.modified(e.sort.fields)||t.modified("datum");return n&&t.source.sort(r_(e.sort)),this.modified(n),t}});const wme="zero",cLe="center",fLe="normalize",dLe=["y0","y1"];function qte(e){De.call(this,null,e)}qte.Definition={type:"Stack",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"groupby",type:"field",array:!0},{name:"sort",type:"compare"},{name:"offset",type:"enum",default:wme,values:[wme,cLe,fLe]},{name:"as",type:"string",array:!0,length:2,default:dLe}]};lt(qte,De,{transform(e,t){var n=e.as||dLe,r=n[0],i=n[1],s=r_(e.sort),o=e.field||zS,a=e.offset===cLe?xUt:e.offset===fLe?SUt:TUt,u,l,c,f;for(u=CUt(t.source,e.groupby,s,o),l=0,c=u.length,f=u.max;l<c;++l)a(u[l],f,o,r,i);return t.reflow(e.modified()).modifies(n)}});function xUt(e,t,n,r,i){for(var s=(t-e.sum)/2,o=e.length,a=0,u;a<o;++a)u=e[a],u[r]=s,u[i]=s+=Math.abs(n(u))}function SUt(e,t,n,r,i){for(var s=1/e.sum,o=0,a=e.length,u=0,l=0,c;u<a;++u)c=e[u],c[r]=o,c[i]=o=s*(l+=Math.abs(n(c)))}function TUt(e,t,n,r,i){for(var s=0,o=0,a=e.length,u=0,l,c;u<a;++u)c=e[u],l=+n(c),l<0?(c[r]=o,c[i]=o+=l):(c[r]=s,c[i]=s+=l)}function CUt(e,t,n,r){var i=[],s=m=>m(c),o,a,u,l,c,f,d,h,p;if(t==null)i.push(e.slice());else for(o={},a=0,u=e.length;a<u;++a)c=e[a],f=t.map(s),d=o[f],d||(o[f]=d=[],i.push(d)),d.push(c);for(f=0,p=0,l=i.length;f<l;++f){for(d=i[f],a=0,h=0,u=d.length;a<u;++a)h+=Math.abs(r(d[a]));d.sum=h,h>p&&(p=h),n&&d.sort(n)}return i.max=p,i}const AUt=Object.freeze(Object.defineProperty({__proto__:null,axisticks:ZMe,datajoin:eLe,encode:tLe,legendentries:nLe,linkpath:Vte,pie:Hte,scale:aLe,sortitems:lLe,stack:qte},Symbol.toStringTag,{value:"Module"}));var IUt=Math.abs,$H=Math.cos,AM=Math.sin,kUt=1e-6,hLe=Math.PI,MH=hLe/2,Eme=RUt(2);function xme(e){return e>1?MH:e<-1?-MH:Math.asin(e)}function RUt(e){return e>0?Math.sqrt(e):0}function NUt(e,t){var n=e*AM(t),r=30,i;do t-=i=(t+AM(t)-n)/(1+$H(t));while(IUt(i)>kUt&&--r>0);return t/2}function DUt(e,t,n){function r(i,s){return[e*i*$H(s=NUt(n,s)),t*AM(s)]}return r.invert=function(i,s){return s=xme(s/t),[i/(e*$H(s)),xme((2*s+AM(2*s))/n)]},r}var PUt=DUt(Eme/MH,Eme,hLe);function OUt(){return Jh(PUt).scale(169.529)}const $Ut=kTe(),LH=["clipAngle","clipExtent","scale","translate","center","rotate","parallels","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];function MUt(e,t){return function n(){const r=t();return r.type=e,r.path=kTe().projection(r),r.copy=r.copy||function(){const i=n();return LH.forEach(s=>{r[s]&&i[s](r[s]())}),i.path.pointRadius(r.path.pointRadius()),i},m$e(r)}}function Wte(e,t){if(!e||typeof e!="string")throw new Error("Projection type must be a name string.");return e=e.toLowerCase(),arguments.length>1?(IM[e]=MUt(e,t),this):IM[e]||null}function pLe(e){return e&&e.path||$Ut}const IM={albers:NTe,albersusa:ept,azimuthalequalarea:tpt,azimuthalequidistant:npt,conicconformal:spt,conicequalarea:H3,conicequidistant:upt,equalEarth:cpt,equirectangular:opt,gnomonic:fpt,identity:dpt,mercator:rpt,mollweide:OUt,naturalEarth1:hpt,orthographic:ppt,stereographic:mpt,transversemercator:gpt};for(const e in IM)Wte(e,IM[e]);function LUt(){}const Ep=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function mLe(){var e=1,t=1,n=a;function r(u,l){return l.map(c=>i(u,c))}function i(u,l){var c=[],f=[];return s(u,l,d=>{n(d,u,l),FUt(d)>0?c.push([d]):f.push(d)}),f.forEach(d=>{for(var h=0,p=c.length,m;h<p;++h)if(jUt((m=c[h])[0],d)!==-1){m.push(d);return}}),{type:"MultiPolygon",value:l,coordinates:c}}function s(u,l,c){var f=new Array,d=new Array,h,p,m,g,y,v;for(h=p=-1,g=u[0]>=l,Ep[g<<1].forEach(b);++h<e-1;)m=g,g=u[h+1]>=l,Ep[m|g<<1].forEach(b);for(Ep[g<<0].forEach(b);++p<t-1;){for(h=-1,g=u[p*e+e]>=l,y=u[p*e]>=l,Ep[g<<1|y<<2].forEach(b);++h<e-1;)m=g,g=u[p*e+e+h+1]>=l,v=y,y=u[p*e+h+1]>=l,Ep[m|g<<1|y<<2|v<<3].forEach(b);Ep[g|y<<3].forEach(b)}for(h=-1,y=u[p*e]>=l,Ep[y<<2].forEach(b);++h<e-1;)v=y,y=u[p*e+h+1]>=l,Ep[y<<2|v<<3].forEach(b);Ep[y<<3].forEach(b);function b(w){var E=[w[0][0]+h,w[0][1]+p],T=[w[1][0]+h,w[1][1]+p],S=o(E),C=o(T),A,k;(A=d[S])?(k=f[C])?(delete d[A.end],delete f[k.start],A===k?(A.ring.push(T),c(A.ring)):f[A.start]=d[k.end]={start:A.start,end:k.end,ring:A.ring.concat(k.ring)}):(delete d[A.end],A.ring.push(T),d[A.end=C]=A):(A=f[C])?(k=d[S])?(delete f[A.start],delete d[k.end],A===k?(A.ring.push(T),c(A.ring)):f[k.start]=d[A.end]={start:k.start,end:A.end,ring:k.ring.concat(A.ring)}):(delete f[A.start],A.ring.unshift(E),f[A.start=S]=A):f[S]=d[C]={start:S,end:C,ring:[E,T]}}}function o(u){return u[0]*2+u[1]*(e+1)*4}function a(u,l,c){u.forEach(f=>{var d=f[0],h=f[1],p=d|0,m=h|0,g,y=l[m*e+p];d>0&&d<e&&p===d&&(g=l[m*e+p-1],f[0]=d+(c-g)/(y-g)-.5),h>0&&h<t&&m===h&&(g=l[(m-1)*e+p],f[1]=h+(c-g)/(y-g)-.5)})}return r.contour=i,r.size=function(u){if(!arguments.length)return[e,t];var l=Math.floor(u[0]),c=Math.floor(u[1]);return l>=0&&c>=0||Le("invalid size"),e=l,t=c,r},r.smooth=function(u){return arguments.length?(n=u?a:LUt,r):n===a},r}function FUt(e){for(var t=0,n=e.length,r=e[n-1][1]*e[0][0]-e[n-1][0]*e[0][1];++t<n;)r+=e[t-1][1]*e[t][0]-e[t-1][0]*e[t][1];return r}function jUt(e,t){for(var n=-1,r=t.length,i;++n<r;)if(i=BUt(e,t[n]))return i;return 0}function BUt(e,t){for(var n=t[0],r=t[1],i=-1,s=0,o=e.length,a=o-1;s<o;a=s++){var u=e[s],l=u[0],c=u[1],f=e[a],d=f[0],h=f[1];if(UUt(u,f,t))return 0;c>r!=h>r&&n<(d-l)*(r-c)/(h-c)+l&&(i=-i)}return i}function UUt(e,t,n){var r;return zUt(e,t,n)&&VUt(e[r=+(e[0]===t[0])],n[r],t[r])}function zUt(e,t,n){return(t[0]-e[0])*(n[1]-e[1])===(n[0]-e[0])*(t[1]-e[1])}function VUt(e,t,n){return e<=t&&t<=n||n<=t&&t<=e}function gLe(e,t,n){return function(r){var i=Lh(r),s=n?Math.min(i[0],0):i[0],o=i[1],a=o-s,u=t?q0(s,o,e):a/(e+1);return $u(s+u,o,u)}}function Gte(e){De.call(this,null,e)}Gte.Definition={type:"Isocontour",metadata:{generates:!0},params:[{name:"field",type:"field"},{name:"thresholds",type:"number",array:!0},{name:"levels",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"zero",type:"boolean",default:!0},{name:"smooth",type:"boolean",default:!0},{name:"scale",type:"number",expr:!0},{name:"translate",type:"number",array:!0,expr:!0},{name:"as",type:"string",null:!0,default:"contour"}]};lt(Gte,De,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=t.materialize(t.SOURCE).source,i=e.field||xa,s=mLe().smooth(e.smooth!==!1),o=e.thresholds||HUt(r,i,e),a=e.as===null?null:e.as||"contour",u=[];return r.forEach(l=>{const c=i(l),f=s.size([c.width,c.height])(c.values,je(o)?o:o(c.values));qUt(f,c,l,e),f.forEach(d=>{u.push(nF(l,Er(a!=null?{[a]:d}:d)))})}),this.value&&(n.rem=this.value),this.value=n.source=n.add=u,n}});function HUt(e,t,n){const r=gLe(n.levels||10,n.nice,n.zero!==!1);return n.resolve!=="shared"?r:r(e.map(i=>lh(t(i).values)))}function qUt(e,t,n,r){let i=r.scale||t.scale,s=r.translate||t.translate;if(_n(i)&&(i=i(n,r)),_n(s)&&(s=s(n,r)),(i===1||i==null)&&!s)return;const o=(lr(i)?i:i[0])||1,a=(lr(i)?i:i[1])||1,u=s&&s[0]||0,l=s&&s[1]||0;e.forEach(yLe(t,o,a,u,l))}function yLe(e,t,n,r,i){const s=e.x1||0,o=e.y1||0,a=t*n<0;function u(f){f.forEach(l)}function l(f){a&&f.reverse(),f.forEach(c)}function c(f){f[0]=(f[0]-s)*t+r,f[1]=(f[1]-o)*n+i}return function(f){return f.coordinates.forEach(u),f}}function Sme(e,t,n){const r=e>=0?e:dee(t,n);return Math.round((Math.sqrt(4*r*r+1)-1)/2)}function rB(e){return _n(e)?e:Sa(+e)}function vLe(){var e=u=>u[0],t=u=>u[1],n=zS,r=[-1,-1],i=960,s=500,o=2;function a(u,l){const c=Sme(r[0],u,e)>>o,f=Sme(r[1],u,t)>>o,d=c?c+2:0,h=f?f+2:0,p=2*d+(i>>o),m=2*h+(s>>o),g=new Float32Array(p*m),y=new Float32Array(p*m);let v=g;u.forEach(w=>{const E=d+(+e(w)>>o),T=h+(+t(w)>>o);E>=0&&E<p&&T>=0&&T<m&&(g[E+T*p]+=+n(w))}),c>0&&f>0?(H_(p,m,g,y,c),q_(p,m,y,g,f),H_(p,m,g,y,c),q_(p,m,y,g,f),H_(p,m,g,y,c),q_(p,m,y,g,f)):c>0?(H_(p,m,g,y,c),H_(p,m,y,g,c),H_(p,m,g,y,c),v=y):f>0&&(q_(p,m,g,y,f),q_(p,m,y,g,f),q_(p,m,g,y,f),v=y);const b=l?Math.pow(2,-2*o):1/Zxe(v);for(let w=0,E=p*m;w<E;++w)v[w]*=b;return{values:v,scale:1<<o,width:p,height:m,x1:d,y1:h,x2:d+(i>>o),y2:h+(s>>o)}}return a.x=function(u){return arguments.length?(e=rB(u),a):e},a.y=function(u){return arguments.length?(t=rB(u),a):t},a.weight=function(u){return arguments.length?(n=rB(u),a):n},a.size=function(u){if(!arguments.length)return[i,s];var l=+u[0],c=+u[1];return l>=0&&c>=0||Le("invalid size"),i=l,s=c,a},a.cellSize=function(u){return arguments.length?((u=+u)>=1||Le("invalid cell size"),o=Math.floor(Math.log(u)/Math.LN2),a):1<<o},a.bandwidth=function(u){return arguments.length?(u=pt(u),u.length===1&&(u=[+u[0],+u[0]]),u.length!==2&&Le("invalid bandwidth"),r=u,a):r},a}function H_(e,t,n,r,i){const s=(i<<1)+1;for(let o=0;o<t;++o)for(let a=0,u=0;a<e+i;++a)a<e&&(u+=n[a+o*e]),a>=i&&(a>=s&&(u-=n[a-s+o*e]),r[a-i+o*e]=u/Math.min(a+1,e-1+s-a,s))}function q_(e,t,n,r,i){const s=(i<<1)+1;for(let o=0;o<e;++o)for(let a=0,u=0;a<t+i;++a)a<t&&(u+=n[o+a*e]),a>=i&&(a>=s&&(u-=n[o+(a-s)*e]),r[o+(a-i)*e]=u/Math.min(a+1,t-1+s-a,s))}function Yte(e){De.call(this,null,e)}Yte.Definition={type:"KDE2D",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"weight",type:"field"},{name:"groupby",type:"field",array:!0},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number",array:!0,length:2},{name:"counts",type:"boolean",default:!1},{name:"as",type:"string",default:"grid"}]};const WUt=["x","y","weight","size","cellSize","bandwidth"];function bLe(e,t){return WUt.forEach(n=>t[n]!=null?e[n](t[n]):0),e}lt(Yte,De,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=t.materialize(t.SOURCE).source,i=GUt(r,e.groupby),s=(e.groupby||[]).map(Ki),o=bLe(vLe(),e),a=e.as||"grid",u=[];function l(c,f){for(let d=0;d<s.length;++d)c[s[d]]=f[d];return c}return u=i.map(c=>Er(l({[a]:o(c,e.counts)},c.dims))),this.value&&(n.rem=this.value),this.value=n.source=n.add=u,n}});function GUt(e,t){var n=[],r=c=>c(a),i,s,o,a,u,l;if(t==null)n.push(e);else for(i={},s=0,o=e.length;s<o;++s)a=e[s],u=t.map(r),l=i[u],l||(i[u]=l=[],l.dims=u,n.push(l)),l.push(a);return n}function Kte(e){De.call(this,null,e)}Kte.Definition={type:"Contour",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"values",type:"number",array:!0},{name:"x",type:"field"},{name:"y",type:"field"},{name:"weight",type:"field"},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number"},{name:"count",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"thresholds",type:"number",array:!0},{name:"smooth",type:"boolean",default:!0}]};lt(Kte,De,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=mLe().smooth(e.smooth!==!1),i=e.values,s=e.thresholds||gLe(e.count||10,e.nice,!!i),o=e.size,a,u;return i||(i=t.materialize(t.SOURCE).source,a=bLe(vLe(),e)(i,!0),u=yLe(a,a.scale||1,a.scale||1,0,0),o=[a.width,a.height],i=a.values),s=je(s)?s:s(i),i=r.size(o)(i,s),u&&i.forEach(u),this.value&&(n.rem=this.value),this.value=n.source=n.add=(i||[]).map(Er),n}});const FH="Feature",Xte="FeatureCollection",YUt="MultiPoint";function Qte(e){De.call(this,null,e)}Qte.Definition={type:"GeoJSON",metadata:{},params:[{name:"fields",type:"field",array:!0,length:2},{name:"geojson",type:"field"}]};lt(Qte,De,{transform(e,t){var n=this._features,r=this._points,i=e.fields,s=i&&i[0],o=i&&i[1],a=e.geojson||!i&&xa,u=t.ADD,l;l=e.modified()||t.changed(t.REM)||t.modified(ga(a))||s&&t.modified(ga(s))||o&&t.modified(ga(o)),(!this.value||l)&&(u=t.SOURCE,this._features=n=[],this._points=r=[]),a&&t.visit(u,c=>n.push(a(c))),s&&o&&(t.visit(u,c=>{var f=s(c),d=o(c);f!=null&&d!=null&&(f=+f)===f&&(d=+d)===d&&r.push([f,d])}),n=n.concat({type:FH,geometry:{type:YUt,coordinates:r}})),this.value={type:Xte,features:n}}});function Jte(e){De.call(this,null,e)}Jte.Definition={type:"GeoPath",metadata:{modifies:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"path"}]};lt(Jte,De,{transform(e,t){var n=t.fork(t.ALL),r=this.value,i=e.field||xa,s=e.as||"path",o=n.SOURCE;!r||e.modified()?(this.value=r=pLe(e.projection),n.materialize().reflow()):o=i===xa||t.modified(i.fields)?n.ADD_MOD:n.ADD;const a=KUt(r,e.pointRadius);return n.visit(o,u=>u[s]=r(i(u))),r.pointRadius(a),n.modifies(s)}});function KUt(e,t){const n=e.pointRadius();return e.context(null),t!=null&&e.pointRadius(t),n}function Zte(e){De.call(this,null,e)}Zte.Definition={type:"GeoPoint",metadata:{modifies:!0},params:[{name:"projection",type:"projection",required:!0},{name:"fields",type:"field",array:!0,required:!0,length:2},{name:"as",type:"string",array:!0,length:2,default:["x","y"]}]};lt(Zte,De,{transform(e,t){var n=e.projection,r=e.fields[0],i=e.fields[1],s=e.as||["x","y"],o=s[0],a=s[1],u;function l(c){const f=n([r(c),i(c)]);f?(c[o]=f[0],c[a]=f[1]):(c[o]=void 0,c[a]=void 0)}return e.modified()?t=t.materialize().reflow(!0).visit(t.SOURCE,l):(u=t.modified(r.fields)||t.modified(i.fields),t.visit(u?t.ADD_MOD:t.ADD,l)),t.modifies(s)}});function ene(e){De.call(this,null,e)}ene.Definition={type:"GeoShape",metadata:{modifies:!0,nomod:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field",default:"datum"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"shape"}]};lt(ene,De,{transform(e,t){var n=t.fork(t.ALL),r=this.value,i=e.as||"shape",s=n.ADD;return(!r||e.modified())&&(this.value=r=XUt(pLe(e.projection),e.field||Lc("datum"),e.pointRadius),n.materialize().reflow(),s=n.SOURCE),n.visit(s,o=>o[i]=r),n.modifies(i)}});function XUt(e,t,n){const r=n==null?i=>e(t(i)):i=>{var s=e.pointRadius(),o=e.pointRadius(n)(t(i));return e.pointRadius(s),o};return r.context=i=>(e.context(i),r),r}function tne(e){De.call(this,[],e),this.generator=Pht()}tne.Definition={type:"Graticule",metadata:{changes:!0,generates:!0},params:[{name:"extent",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMajor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMinor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"step",type:"number",array:!0,length:2},{name:"stepMajor",type:"number",array:!0,length:2,default:[90,360]},{name:"stepMinor",type:"number",array:!0,length:2,default:[10,10]},{name:"precision",type:"number",default:2.5}]};lt(tne,De,{transform(e,t){var n=this.value,r=this.generator,i;if(!n.length||e.modified())for(const s in e)_n(r[s])&&r[s](e[s]);return i=r(),n.length?t.mod.push(b3e(n[0],i)):t.add.push(Er(i)),n[0]=i,t}});function nne(e){De.call(this,null,e)}nne.Definition={type:"heatmap",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"color",type:"string",expr:!0},{name:"opacity",type:"number",expr:!0},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"as",type:"string",default:"image"}]};lt(nne,De,{transform(e,t){if(!t.changed()&&!e.modified())return t.StopPropagation;var n=t.materialize(t.SOURCE).source,r=e.resolve==="shared",i=e.field||xa,s=JUt(e.opacity,e),o=QUt(e.color,e),a=e.as||"image",u={$x:0,$y:0,$value:0,$max:r?lh(n.map(l=>lh(i(l).values))):0};return n.forEach(l=>{const c=i(l),f=bn({},l,u);r||(f.$max=lh(c.values||[])),l[a]=ZUt(c,f,o.dep?o:Sa(o(f)),s.dep?s:Sa(s(f)))}),t.reflow(!0).modifies(a)}});function QUt(e,t){let n;return _n(e)?(n=r=>W0(e(r,t)),n.dep=_Le(e)):n=Sa(W0(e||"#888")),n}function JUt(e,t){let n;return _n(e)?(n=r=>e(r,t),n.dep=_Le(e)):e?n=Sa(e):(n=r=>r.$value/r.$max||0,n.dep=!0),n}function _Le(e){if(!_n(e))return!1;const t=ed(ga(e));return t.$x||t.$y||t.$value||t.$max}function ZUt(e,t,n,r){const i=e.width,s=e.height,o=e.x1||0,a=e.y1||0,u=e.x2||i,l=e.y2||s,c=e.values,f=c?g=>c[g]:Yg,d=P0(u-o,l-a),h=d.getContext("2d"),p=h.getImageData(0,0,u-o,l-a),m=p.data;for(let g=a,y=0;g<l;++g){t.$y=g-a;for(let v=o,b=g*i;v<u;++v,y+=4){t.$x=v-o,t.$value=f(v+b);const w=n(t);m[y+0]=w.r,m[y+1]=w.g,m[y+2]=w.b,m[y+3]=~~(255*r(t))}}return h.putImageData(p,0,0),d}function wLe(e){De.call(this,null,e),this.modified(!0)}lt(wLe,De,{transform(e,t){let n=this.value;return!n||e.modified("type")?(this.value=n=t7t(e.type),LH.forEach(r=>{e[r]!=null&&Tme(n,r,e[r])})):LH.forEach(r=>{e.modified(r)&&Tme(n,r,e[r])}),e.pointRadius!=null&&n.path.pointRadius(e.pointRadius),e.fit&&e7t(n,e),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function e7t(e,t){const n=n7t(t.fit);t.extent?e.fitExtent(t.extent,n):t.size&&e.fitSize(t.size,n)}function t7t(e){const t=Wte((e||"mercator").toLowerCase());return t||Le("Unrecognized projection type: "+e),t()}function Tme(e,t,n){_n(e[t])&&e[t](n)}function n7t(e){return e=pt(e),e.length===1?e[0]:{type:Xte,features:e.reduce((t,n)=>t.concat(r7t(n)),[])}}function r7t(e){return e.type===Xte?e.features:pt(e).filter(t=>t!=null).map(t=>t.type===FH?t:{type:FH,geometry:t})}const i7t=Object.freeze(Object.defineProperty({__proto__:null,contour:Kte,geojson:Qte,geopath:Jte,geopoint:Zte,geoshape:ene,graticule:tne,heatmap:nne,isocontour:Gte,kde2d:Yte,projection:wLe},Symbol.toStringTag,{value:"Module"})),Cme={center:xdt,collide:zdt,nbody:Zdt,link:Hdt,x:eht,y:tht},Z2="forces",jH=["alpha","alphaMin","alphaTarget","velocityDecay","forces"],s7t=["static","iterations"],ELe=["x","y","vx","vy"];function rne(e){De.call(this,null,e)}rne.Definition={type:"Force",metadata:{modifies:!0},params:[{name:"static",type:"boolean",default:!1},{name:"restart",type:"boolean",default:!1},{name:"iterations",type:"number",default:300},{name:"alpha",type:"number",default:1},{name:"alphaMin",type:"number",default:.001},{name:"alphaTarget",type:"number",default:0},{name:"velocityDecay",type:"number",default:.4},{name:"forces",type:"param",array:!0,params:[{key:{force:"center"},params:[{name:"x",type:"number",default:0},{name:"y",type:"number",default:0}]},{key:{force:"collide"},params:[{name:"radius",type:"number",expr:!0},{name:"strength",type:"number",default:.7},{name:"iterations",type:"number",default:1}]},{key:{force:"nbody"},params:[{name:"strength",type:"number",default:-30,expr:!0},{name:"theta",type:"number",default:.9},{name:"distanceMin",type:"number",default:1},{name:"distanceMax",type:"number"}]},{key:{force:"link"},params:[{name:"links",type:"data"},{name:"id",type:"field"},{name:"distance",type:"number",default:30,expr:!0},{name:"strength",type:"number",expr:!0},{name:"iterations",type:"number",default:1}]},{key:{force:"x"},params:[{name:"strength",type:"number",default:.1},{name:"x",type:"field"}]},{key:{force:"y"},params:[{name:"strength",type:"number",default:.1},{name:"y",type:"field"}]}]},{name:"as",type:"string",array:!0,modify:!1,default:ELe}]};lt(rne,De,{transform(e,t){var n=this.value,r=t.changed(t.ADD_REM),i=e.modified(jH),s=e.iterations||300;if(n?(r&&(t.modifies("index"),n.nodes(t.source)),(i||t.changed(t.MOD))&&xLe(n,e,0,t)):(this.value=n=a7t(t.source,e),n.on("tick",o7t(t.dataflow,this)),e.static||(r=!0,n.tick()),t.modifies("index")),i||r||e.modified(s7t)||t.changed()&&e.restart){if(n.alpha(Math.max(n.alpha(),e.alpha||1)).alphaDecay(1-Math.pow(n.alphaMin(),1/s)),e.static)for(n.stop();--s>=0;)n.tick();else if(n.stopped()&&n.restart(),!r)return t.StopPropagation}return this.finish(e,t)},finish(e,t){const n=t.dataflow;for(let a=this._argops,u=0,l=a.length,c;u<l;++u)if(c=a[u],!(c.name!==Z2||c.op._argval.force!=="link")){for(var r=c.op._argops,i=0,s=r.length,o;i<s;++i)if(r[i].name==="links"&&(o=r[i].op.source)){n.pulse(o,n.changeset().reflow());break}}return t.reflow(e.modified()).modifies(ELe)}});function o7t(e,t){return()=>e.touch(t).run()}function a7t(e,t){const n=Jdt(e),r=n.stop,i=n.restart;let s=!1;return n.stopped=()=>s,n.restart=()=>(s=!1,i()),n.stop=()=>(s=!0,r()),xLe(n,t,!0).on("end",()=>s=!0)}function xLe(e,t,n,r){var i=pt(t.forces),s,o,a,u;for(s=0,o=jH.length;s<o;++s)a=jH[s],a!==Z2&&t.modified(a)&&e[a](t[a]);for(s=0,o=i.length;s<o;++s)u=Z2+s,a=n||t.modified(Z2,s)?l7t(i[s]):r&&u7t(i[s],r)?e.force(u):null,a&&e.force(u,a);for(o=e.numForces||0;s<o;++s)e.force(Z2+s,null);return e.numForces=i.length,e}function u7t(e,t){var n,r;for(n in e)if(_n(r=e[n])&&t.modified(ga(r)))return 1;return 0}function l7t(e){var t,n;jt(Cme,e.force)||Le("Unrecognized force: "+e.force),t=Cme[e.force]();for(n in e)_n(t[n])&&c7t(t[n],e[n],e);return t}function c7t(e,t,n){e(_n(t)?r=>t(r,n):t)}const f7t=Object.freeze(Object.defineProperty({__proto__:null,force:rne},Symbol.toStringTag,{value:"Module"}));function BH(e,t,n){const r={};return e.each(i=>{const s=i.data;n(s)&&(r[t(s)]=i)}),e.lookup=r,e}function ine(e){De.call(this,null,e)}ine.Definition={type:"Nest",metadata:{treesource:!0,changes:!0},params:[{name:"keys",type:"field",array:!0},{name:"generate",type:"boolean"}]};const d7t=e=>e.values;lt(ine,De,{transform(e,t){t.source||Le("Nest transform requires an upstream data source.");var n=e.generate,r=e.modified(),i=t.clone(),s=this.value;return(!s||r||t.changed())&&(s&&s.each(o=>{o.children&&tF(o.data)&&i.rem.push(o.data)}),this.value=s=N6({values:pt(e.keys).reduce((o,a)=>(o.key(a),o),h7t()).entries(i.source)},d7t),n&&s.each(o=>{o.children&&(o=Er(o.data),i.add.push(o),i.source.push(o))}),BH(s,Lt,Lt)),i.source.root=s,i}});function h7t(){const e=[],t={entries:i=>r(n(i,0),0),key:i=>(e.push(i),t)};function n(i,s){if(s>=e.length)return i;const o=i.length,a=e[s++],u={},l={};let c=-1,f,d,h;for(;++c<o;)f=a(d=i[c])+"",(h=u[f])?h.push(d):u[f]=[d];for(f in u)l[f]=n(u[f],s);return l}function r(i,s){if(++s>e.length)return i;const o=[];for(const a in i)o.push({key:a,values:r(i[a],s)});return o}return t}function ag(e){De.call(this,null,e)}const p7t=(e,t)=>e.parent===t.parent?1:2;lt(ag,De,{transform(e,t){(!t.source||!t.source.root)&&Le(this.constructor.name+" transform requires a backing tree data source.");const n=this.layout(e.method),r=this.fields,i=t.source.root,s=e.as||r;e.field?i.sum(e.field):i.count(),e.sort&&i.sort(r_(e.sort,o=>o.data)),m7t(n,this.params,e),n.separation&&n.separation(e.separation!==!1?p7t:zS);try{this.value=n(i)}catch(o){Le(o)}return i.each(o=>g7t(o,r,s)),t.reflow(e.modified()).modifies(s).modifies("leaf")}});function m7t(e,t,n){for(let r,i=0,s=t.length;i<s;++i)r=t[i],r in n&&e[r](n[r])}function g7t(e,t,n){const r=e.data,i=t.length-1;for(let s=0;s<i;++s)r[n[s]]=e[t[s]];r[n[i]]=e.children?e.children.length:0}const UH=["x","y","r","depth","children"];function sne(e){ag.call(this,e)}sne.Definition={type:"Pack",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"radius",type:"field",default:null},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:UH.length,default:UH}]};lt(sne,ag,{layout:WTe,params:["radius","size","padding"],fields:UH});const zH=["x0","y0","x1","y1","depth","children"];function one(e){ag.call(this,e)}one.Definition={type:"Partition",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:zH.length,default:zH}]};lt(one,ag,{layout:tmt,params:["size","round","padding"],fields:zH});function ane(e){De.call(this,null,e)}ane.Definition={type:"Stratify",metadata:{treesource:!0},params:[{name:"key",type:"field",required:!0},{name:"parentKey",type:"field",required:!0}]};lt(ane,De,{transform(e,t){t.source||Le("Stratify transform requires an upstream data source.");let n=this.value;const r=e.modified(),i=t.fork(t.ALL).materialize(t.SOURCE),s=!n||r||t.changed(t.ADD_REM)||t.modified(e.key.fields)||t.modified(e.parentKey.fields);return i.source=i.source.slice(),s&&(n=i.source.length?BH(ace().id(e.key).parentId(e.parentKey)(i.source),e.key,Fc):BH(ace()([{}]),e.key,e.key)),i.source.root=this.value=n,i}});const Ame={tidy:fmt,cluster:Spt},VH=["x","y","depth","children"];function une(e){ag.call(this,e)}une.Definition={type:"Tree",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"tidy",values:["tidy","cluster"]},{name:"size",type:"number",array:!0,length:2},{name:"nodeSize",type:"number",array:!0,length:2},{name:"separation",type:"boolean",default:!0},{name:"as",type:"string",array:!0,length:VH.length,default:VH}]};lt(une,ag,{layout(e){const t=e||"tidy";if(jt(Ame,t))return Ame[t]();Le("Unrecognized Tree layout method: "+t)},params:["size","nodeSize"],fields:VH});function lne(e){De.call(this,[],e)}lne.Definition={type:"TreeLinks",metadata:{tree:!0,generates:!0,changes:!0},params:[]};lt(lne,De,{transform(e,t){const n=this.value,r=t.source&&t.source.root,i=t.fork(t.NO_SOURCE),s={};return r||Le("TreeLinks transform requires a tree data source."),t.changed(t.ADD_REM)?(i.rem=n,t.visit(t.SOURCE,o=>s[Lt(o)]=1),r.each(o=>{const a=o.data,u=o.parent&&o.parent.data;u&&s[Lt(a)]&&s[Lt(u)]&&i.add.push(Er({source:u,target:a}))}),this.value=i.add):t.changed(t.MOD)&&(t.visit(t.MOD,o=>s[Lt(o)]=1),n.forEach(o=>{(s[Lt(o.source)]||s[Lt(o.target)])&&i.mod.push(o)})),i}});const Ime={binary:hmt,dice:kk,slice:D6,slicedice:pmt,squarify:XTe,resquarify:mmt},HH=["x0","y0","x1","y1","depth","children"];function cne(e){ag.call(this,e)}cne.Definition={type:"Treemap",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"squarify",values:["squarify","resquarify","binary","dice","slice","slicedice"]},{name:"padding",type:"number",default:0},{name:"paddingInner",type:"number",default:0},{name:"paddingOuter",type:"number",default:0},{name:"paddingTop",type:"number",default:0},{name:"paddingRight",type:"number",default:0},{name:"paddingBottom",type:"number",default:0},{name:"paddingLeft",type:"number",default:0},{name:"ratio",type:"number",default:1.618033988749895},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:HH.length,default:HH}]};lt(cne,ag,{layout(){const e=dmt();return e.ratio=t=>{const n=e.tile();n.ratio&&e.tile(n.ratio(t))},e.method=t=>{jt(Ime,t)?e.tile(Ime[t]):Le("Unrecognized Treemap layout method: "+t)},e},params:["method","ratio","size","round","padding","paddingInner","paddingOuter","paddingTop","paddingRight","paddingBottom","paddingLeft"],fields:HH});const y7t=Object.freeze(Object.defineProperty({__proto__:null,nest:ine,pack:sne,partition:one,stratify:ane,tree:une,treelinks:lne,treemap:cne},Symbol.toStringTag,{value:"Module"})),iB=4278190080;function v7t(e,t){const n=e.bitmap();return(t||[]).forEach(r=>n.set(e(r.boundary[0]),e(r.boundary[3]))),[n,void 0]}function b7t(e,t,n,r,i){const s=e.width,o=e.height,a=r||i,u=P0(s,o).getContext("2d"),l=P0(s,o).getContext("2d"),c=a&&P0(s,o).getContext("2d");n.forEach(C=>sO(u,C,!1)),sO(l,t,!1),a&&sO(c,t,!0);const f=sB(u,s,o),d=sB(l,s,o),h=a&&sB(c,s,o),p=e.bitmap(),m=a&&e.bitmap();let g,y,v,b,w,E,T,S;for(y=0;y<o;++y)for(g=0;g<s;++g)w=y*s+g,E=f[w]&iB,S=d[w]&iB,T=a&&h[w]&iB,(E||T||S)&&(v=e(g),b=e(y),!i&&(E||S)&&p.set(v,b),a&&(E||T)&&m.set(v,b));return[p,m]}function sB(e,t,n){return new Uint32Array(e.getImageData(0,0,t,n).data.buffer)}function sO(e,t,n){if(!t.length)return;const r=t[0].mark.marktype;r==="group"?t.forEach(i=>{i.items.forEach(s=>sO(e,s.items,n))}):Wl[r].draw(e,{items:n?t.map(_7t):t})}function _7t(e){const t=nF(e,{});return t.stroke&&t.strokeOpacity!==0||t.fill&&t.fillOpacity!==0?{...t,strokeOpacity:1,stroke:"#000",fillOpacity:0}:t}const xp=5,Oa=31,LI=32,Lg=new Uint32Array(LI+1),wf=new Uint32Array(LI+1);wf[0]=0;Lg[0]=~wf[0];for(let e=1;e<=LI;++e)wf[e]=wf[e-1]<<1|1,Lg[e]=~wf[e];function w7t(e,t){const n=new Uint32Array(~~((e*t+LI)/LI));function r(s,o){n[s]|=o}function i(s,o){n[s]&=o}return{array:n,get:(s,o)=>{const a=o*e+s;return n[a>>>xp]&1<<(a&Oa)},set:(s,o)=>{const a=o*e+s;r(a>>>xp,1<<(a&Oa))},clear:(s,o)=>{const a=o*e+s;i(a>>>xp,~(1<<(a&Oa)))},getRange:(s,o,a,u)=>{let l=u,c,f,d,h;for(;l>=o;--l)if(c=l*e+s,f=l*e+a,d=c>>>xp,h=f>>>xp,d===h){if(n[d]&Lg[c&Oa]&wf[(f&Oa)+1])return!0}else{if(n[d]&Lg[c&Oa]||n[h]&wf[(f&Oa)+1])return!0;for(let p=d+1;p<h;++p)if(n[p])return!0}return!1},setRange:(s,o,a,u)=>{let l,c,f,d,h;for(;o<=u;++o)if(l=o*e+s,c=o*e+a,f=l>>>xp,d=c>>>xp,f===d)r(f,Lg[l&Oa]&wf[(c&Oa)+1]);else for(r(f,Lg[l&Oa]),r(d,wf[(c&Oa)+1]),h=f+1;h<d;++h)r(h,4294967295)},clearRange:(s,o,a,u)=>{let l,c,f,d,h;for(;o<=u;++o)if(l=o*e+s,c=o*e+a,f=l>>>xp,d=c>>>xp,f===d)i(f,wf[l&Oa]|Lg[(c&Oa)+1]);else for(i(f,wf[l&Oa]),i(d,Lg[(c&Oa)+1]),h=f+1;h<d;++h)i(h,0)},outOfBounds:(s,o,a,u)=>s<0||o<0||u>=t||a>=e}}function E7t(e,t,n){const r=Math.max(1,Math.sqrt(e*t/1e6)),i=~~((e+2*n+r)/r),s=~~((t+2*n+r)/r),o=a=>~~((a+n)/r);return o.invert=a=>a*r-n,o.bitmap=()=>w7t(i,s),o.ratio=r,o.padding=n,o.width=e,o.height=t,o}function x7t(e,t,n,r){const i=e.width,s=e.height;return function(o){const a=o.datum.datum.items[r].items,u=a.length,l=o.datum.fontSize,c=Dl.width(o.datum,o.datum.text);let f=0,d,h,p,m,g,y,v;for(let b=0;b<u;++b)d=a[b].x,p=a[b].y,h=a[b].x2===void 0?d:a[b].x2,m=a[b].y2===void 0?p:a[b].y2,g=(d+h)/2,y=(p+m)/2,v=Math.abs(h-d+m-p),v>=f&&(f=v,o.x=g,o.y=y);return g=c/2,y=l/2,d=o.x-g,h=o.x+g,p=o.y-y,m=o.y+y,o.align="center",d<0&&h<=i?o.align="left":0<=d&&i<h&&(o.align="right"),o.baseline="middle",p<0&&m<=s?o.baseline="top":0<=p&&s<m&&(o.baseline="bottom"),!0}}function kM(e,t,n,r,i,s){let o=n/2;return e-o<0||e+o>i||t-(o=r/2)<0||t+o>s}function l0(e,t,n,r,i,s,o,a){const u=i*s/(r*2),l=e(t-u),c=e(t+u),f=e(n-(s=s/2)),d=e(n+s);return o.outOfBounds(l,f,c,d)||o.getRange(l,f,c,d)||a&&a.getRange(l,f,c,d)}function S7t(e,t,n,r){const i=e.width,s=e.height,o=t[0],a=t[1];function u(l,c,f,d,h){const p=e.invert(l),m=e.invert(c);let g=f,y=s,v;if(!kM(p,m,d,h,i,s)&&!l0(e,p,m,h,d,g,o,a)&&!l0(e,p,m,h,d,h,o,null)){for(;y-g>=1;)v=(g+y)/2,l0(e,p,m,h,d,v,o,a)?y=v:g=v;if(g>f)return[p,m,g,!0]}}return function(l){const c=l.datum.datum.items[r].items,f=c.length,d=l.datum.fontSize,h=Dl.width(l.datum,l.datum.text);let p=n?d:0,m=!1,g=!1,y=0,v,b,w,E,T,S,C,A,k,N,O,P,$,F,M,B,U;for(let H=0;H<f;++H){for(v=c[H].x,w=c[H].y,b=c[H].x2===void 0?v:c[H].x2,E=c[H].y2===void 0?w:c[H].y2,v>b&&(U=v,v=b,b=U),w>E&&(U=w,w=E,E=U),k=e(v),O=e(b),N=~~((k+O)/2),P=e(w),F=e(E),$=~~((P+F)/2),C=N;C>=k;--C)for(A=$;A>=P;--A)B=u(C,A,p,h,d),B&&([l.x,l.y,p,m]=B);for(C=N;C<=O;++C)for(A=$;A<=F;++A)B=u(C,A,p,h,d),B&&([l.x,l.y,p,m]=B);!m&&!n&&(M=Math.abs(b-v+E-w),T=(v+b)/2,S=(w+E)/2,M>=y&&!kM(T,S,h,d,i,s)&&!l0(e,T,S,d,h,d,o,null)&&(y=M,l.x=T,l.y=S,g=!0))}return m||g?(T=h/2,S=d/2,o.setRange(e(l.x-T),e(l.y-S),e(l.x+T),e(l.y+S)),l.align="center",l.baseline="middle",!0):!1}}const T7t=[-1,-1,1,1],C7t=[-1,1,-1,1];function A7t(e,t,n,r){const i=e.width,s=e.height,o=t[0],a=t[1],u=e.bitmap();return function(l){const c=l.datum.datum.items[r].items,f=c.length,d=l.datum.fontSize,h=Dl.width(l.datum,l.datum.text),p=[];let m=n?d:0,g=!1,y=!1,v=0,b,w,E,T,S,C,A,k,N,O,P,$;for(let F=0;F<f;++F){for(b=c[F].x,E=c[F].y,w=c[F].x2===void 0?b:c[F].x2,T=c[F].y2===void 0?E:c[F].y2,p.push([e((b+w)/2),e((E+T)/2)]);p.length;)if([A,k]=p.pop(),!(o.get(A,k)||a.get(A,k)||u.get(A,k))){u.set(A,k);for(let M=0;M<4;++M)S=A+T7t[M],C=k+C7t[M],u.outOfBounds(S,C,S,C)||p.push([S,C]);if(S=e.invert(A),C=e.invert(k),N=m,O=s,!kM(S,C,h,d,i,s)&&!l0(e,S,C,d,h,N,o,a)&&!l0(e,S,C,d,h,d,o,null)){for(;O-N>=1;)P=(N+O)/2,l0(e,S,C,d,h,P,o,a)?O=P:N=P;N>m&&(l.x=S,l.y=C,m=N,g=!0)}}!g&&!n&&($=Math.abs(w-b+T-E),S=(b+w)/2,C=(E+T)/2,$>=v&&!kM(S,C,h,d,i,s)&&!l0(e,S,C,d,h,d,o,null)&&(v=$,l.x=S,l.y=C,y=!0))}return g||y?(S=h/2,C=d/2,o.setRange(e(l.x-S),e(l.y-C),e(l.x+S),e(l.y+C)),l.align="center",l.baseline="middle",!0):!1}}const I7t=["right","center","left"],k7t=["bottom","middle","top"];function R7t(e,t,n,r){const i=e.width,s=e.height,o=t[0],a=t[1],u=r.length;return function(l){const c=l.boundary,f=l.datum.fontSize;if(c[2]<0||c[5]<0||c[0]>i||c[3]>s)return!1;let d=l.textWidth??0,h,p,m,g,y,v,b,w,E,T,S,C,A,k,N;for(let O=0;O<u;++O){if(h=(n[O]&3)-1,p=(n[O]>>>2&3)-1,m=h===0&&p===0||r[O]<0,g=h&&p?Math.SQRT1_2:1,y=r[O]<0?-1:1,v=c[1+h]+r[O]*h*g,S=c[4+p]+y*f*p/2+r[O]*p*g,w=S-f/2,E=S+f/2,C=e(v),k=e(w),N=e(E),!d)if(kme(C,C,k,N,o,a,v,v,w,E,c,m))d=Dl.width(l.datum,l.datum.text);else continue;if(T=v+y*d*h/2,v=T-d/2,b=T+d/2,C=e(v),A=e(b),kme(C,A,k,N,o,a,v,b,w,E,c,m))return l.x=h?h*y<0?b:v:T,l.y=p?p*y<0?E:w:S,l.align=I7t[h*y+1],l.baseline=k7t[p*y+1],o.setRange(C,k,A,N),!0}return!1}}function kme(e,t,n,r,i,s,o,a,u,l,c,f){return!(i.outOfBounds(e,n,t,r)||(f&&s||i).getRange(e,n,t,r))}const oB=0,aB=4,uB=8,lB=0,cB=1,fB=2,N7t={"top-left":oB+lB,top:oB+cB,"top-right":oB+fB,left:aB+lB,middle:aB+cB,right:aB+fB,"bottom-left":uB+lB,bottom:uB+cB,"bottom-right":uB+fB},D7t={naive:x7t,"reduced-search":S7t,floodfill:A7t};function P7t(e,t,n,r,i,s,o,a,u,l,c){if(!e.length)return e;const f=Math.max(r.length,i.length),d=O7t(r,f),h=$7t(i,f),p=M7t(e[0].datum),m=p==="group"&&e[0].datum.items[u].marktype,g=m==="area",y=L7t(p,m,a,u),v=l===null||l===1/0,b=g&&c==="naive";let w=-1,E=-1;const T=e.map(k=>{const N=v?Dl.width(k,k.text):void 0;return w=Math.max(w,N),E=Math.max(E,k.fontSize),{datum:k,opacity:0,x:void 0,y:void 0,align:void 0,baseline:void 0,boundary:y(k),textWidth:N}});l=l===null||l===1/0?Math.max(w,E)+Math.max(...r):l;const S=E7t(t[0],t[1],l);let C;if(!b){n&&T.sort((O,P)=>n(O.datum,P.datum));let k=!1;for(let O=0;O<h.length&&!k;++O)k=h[O]===5||d[O]<0;const N=(p&&o||g)&&e.map(O=>O.datum);C=s.length||N?b7t(S,N||[],s,k,g):v7t(S,o&&T)}const A=g?D7t[c](S,C,o,u):R7t(S,C,h,d);return T.forEach(k=>k.opacity=+A(k)),T}function O7t(e,t){const n=new Float64Array(t),r=e.length;for(let i=0;i<r;++i)n[i]=e[i]||0;for(let i=r;i<t;++i)n[i]=n[r-1];return n}function $7t(e,t){const n=new Int8Array(t),r=e.length;for(let i=0;i<r;++i)n[i]|=N7t[e[i]];for(let i=r;i<t;++i)n[i]=n[r-1];return n}function M7t(e){return e&&e.mark&&e.mark.marktype}function L7t(e,t,n,r){const i=s=>[s.x,s.x,s.x,s.y,s.y,s.y];return e?e==="line"||e==="area"?s=>i(s.datum):t==="line"?s=>{const o=s.datum.items[r].items;return i(o.length?o[n==="start"?0:o.length-1]:{x:NaN,y:NaN})}:s=>{const o=s.datum.bounds;return[o.x1,(o.x1+o.x2)/2,o.x2,o.y1,(o.y1+o.y2)/2,o.y2]}:i}const qH=["x","y","opacity","align","baseline"],SLe=["top-left","left","bottom-left","top","bottom","top-right","right","bottom-right"];function fne(e){De.call(this,null,e)}fne.Definition={type:"Label",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"sort",type:"compare"},{name:"anchor",type:"string",array:!0,default:SLe},{name:"offset",type:"number",array:!0,default:[1]},{name:"padding",type:"number",default:0,null:!0},{name:"lineAnchor",type:"string",values:["start","end"],default:"end"},{name:"markIndex",type:"number",default:0},{name:"avoidBaseMark",type:"boolean",default:!0},{name:"avoidMarks",type:"data",array:!0},{name:"method",type:"string",default:"naive"},{name:"as",type:"string",array:!0,length:qH.length,default:qH}]};lt(fne,De,{transform(e,t){function n(s){const o=e[s];return _n(o)&&t.modified(o.fields)}const r=e.modified();if(!(r||t.changed(t.ADD_REM)||n("sort")))return;(!e.size||e.size.length!==2)&&Le("Size parameter should be specified as a [width, height] array.");const i=e.as||qH;return P7t(t.materialize(t.SOURCE).source||[],e.size,e.sort,pt(e.offset==null?1:e.offset),pt(e.anchor||SLe),e.avoidMarks||[],e.avoidBaseMark!==!1,e.lineAnchor||"end",e.markIndex||0,e.padding===void 0?0:e.padding,e.method||"naive").forEach(s=>{const o=s.datum;o[i[0]]=s.x,o[i[1]]=s.y,o[i[2]]=s.opacity,o[i[3]]=s.align,o[i[4]]=s.baseline}),t.reflow(r).modifies(i)}});const F7t=Object.freeze(Object.defineProperty({__proto__:null,label:fne},Symbol.toStringTag,{value:"Module"}));function TLe(e,t){var n=[],r=function(c){return c(a)},i,s,o,a,u,l;if(t==null)n.push(e);else for(i={},s=0,o=e.length;s<o;++s)a=e[s],u=t.map(r),l=i[u],l||(i[u]=l=[],l.dims=u,n.push(l)),l.push(a);return n}function dne(e){De.call(this,null,e)}dne.Definition={type:"Loess",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"bandwidth",type:"number",default:.3},{name:"as",type:"string",array:!0}]};lt(dne,De,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=TLe(r,e.groupby),s=(e.groupby||[]).map(Ki),o=s.length,a=e.as||[Ki(e.x),Ki(e.y)],u=[];i.forEach(l=>{L3e(l,e.x,e.y,e.bandwidth||.3).forEach(c=>{const f={};for(let d=0;d<o;++d)f[s[d]]=l.dims[d];f[a[0]]=c[0],f[a[1]]=c[1],u.push(Er(f))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=u}return n}});const WH={constant:See,linear:Tee,log:P3e,exp:O3e,pow:$3e,quad:Cee,poly:M3e},j7t=(e,t)=>e==="poly"?t:e==="quad"?2:1;function hne(e){De.call(this,null,e)}hne.Definition={type:"Regression",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"string",default:"linear",values:Object.keys(WH)},{name:"order",type:"number",default:3},{name:"extent",type:"number",array:!0,length:2},{name:"params",type:"boolean",default:!1},{name:"as",type:"string",array:!0}]};lt(hne,De,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=TLe(r,e.groupby),s=(e.groupby||[]).map(Ki),o=e.method||"linear",a=e.order==null?3:e.order,u=j7t(o,a),l=e.as||[Ki(e.x),Ki(e.y)],c=WH[o],f=[];let d=e.extent;jt(WH,o)||Le("Invalid regression method: "+o),d!=null&&o==="log"&&d[0]<=0&&(t.dataflow.warn("Ignoring extent with values <= 0 for log regression."),d=null),i.forEach(h=>{if(h.length<=u){t.dataflow.warn("Skipping regression with more parameters than data points.");return}const m=c(h,e.x,e.y,a);if(e.params){f.push(Er({keys:h.dims,coef:m.coef,rSquared:m.rSquared}));return}const g=d||Lh(h,e.x),y=v=>{const b={};for(let w=0;w<s.length;++w)b[s[w]]=h.dims[w];b[l[0]]=v[0],b[l[1]]=v[1],f.push(Er(b))};o==="linear"||o==="constant"?g.forEach(v=>y([v,m.predict(v)])):lF(m.predict,g,25,200).forEach(y)}),this.value&&(n.rem=this.value),this.value=n.add=n.source=f}return n}});const B7t=Object.freeze(Object.defineProperty({__proto__:null,loess:dne,regression:hne},Symbol.toStringTag,{value:"Module"}));function pne(e){De.call(this,null,e)}pne.Definition={type:"Voronoi",metadata:{modifies:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"size",type:"number",array:!0,length:2},{name:"extent",type:"array",array:!0,length:2,default:[[-1e5,-1e5],[1e5,1e5]],content:{type:"number",array:!0,length:2}},{name:"as",type:"string",default:"path"}]};const U7t=[-1e5,-1e5,1e5,1e5];lt(pne,De,{transform(e,t){const n=e.as||"path",r=t.source;if(!r||!r.length)return t;let i=e.size;i=i?[0,0,i[0],i[1]]:(i=e.extent)?[i[0][0],i[0][1],i[1][0],i[1][1]]:U7t;const s=this.value=TK.from(r,e.x,e.y).voronoi(i);for(let o=0,a=r.length;o<a;++o){const u=s.cellPolygon(o);r[o][n]=u&&!V7t(u)?z7t(u):null}return t.reflow(e.modified()).modifies(n)}});function z7t(e){const t=e[0][0],n=e[0][1];let r=e.length-1;for(;e[r][0]===t&&e[r][1]===n;--r);return"M"+e.slice(0,r+1).join("L")+"Z"}function V7t(e){return e.length===2&&e[0][0]===e[1][0]&&e[0][1]===e[1][1]}const H7t=Object.freeze(Object.defineProperty({__proto__:null,voronoi:pne},Symbol.toStringTag,{value:"Module"}));var dB=Math.PI/180,eC=64,oO=2048;function q7t(){var e=[256,256],t,n,r,i,s,o,a,u=CLe,l=[],c=Math.random,f={};f.layout=function(){for(var p=d(P0()),m=Q7t((e[0]>>5)*e[1]),g=null,y=l.length,v=-1,b=[],w=l.map(T=>({text:t(T),font:n(T),style:i(T),weight:s(T),rotate:o(T),size:~~(r(T)+1e-14),padding:a(T),xoff:0,yoff:0,x1:0,y1:0,x0:0,y0:0,hasText:!1,sprite:null,datum:T})).sort((T,S)=>S.size-T.size);++v<y;){var E=w[v];E.x=e[0]*(c()+.5)>>1,E.y=e[1]*(c()+.5)>>1,W7t(p,E,w,v),E.hasText&&h(m,E,g)&&(b.push(E),g?Y7t(g,E):g=[{x:E.x+E.x0,y:E.y+E.y0},{x:E.x+E.x1,y:E.y+E.y1}],E.x-=e[0]>>1,E.y-=e[1]>>1)}return b};function d(p){p.width=p.height=1;var m=Math.sqrt(p.getContext("2d").getImageData(0,0,1,1).data.length>>2);p.width=(eC<<5)/m,p.height=oO/m;var g=p.getContext("2d");return g.fillStyle=g.strokeStyle="red",g.textAlign="center",{context:g,ratio:m}}function h(p,m,g){for(var y=m.x,v=m.y,b=Math.sqrt(e[0]*e[0]+e[1]*e[1]),w=u(e),E=c()<.5?1:-1,T=-E,S,C,A;(S=w(T+=E))&&(C=~~S[0],A=~~S[1],!(Math.min(Math.abs(C),Math.abs(A))>=b));)if(m.x=y+C,m.y=v+A,!(m.x+m.x0<0||m.y+m.y0<0||m.x+m.x1>e[0]||m.y+m.y1>e[1])&&(!g||!G7t(m,p,e[0]))&&(!g||K7t(m,g))){for(var k=m.sprite,N=m.width>>5,O=e[0]>>5,P=m.x-(N<<4),$=P&127,F=32-$,M=m.y1-m.y0,B=(m.y+m.y0)*O+(P>>5),U,H=0;H<M;H++){U=0;for(var D=0;D<=N;D++)p[B+D]|=U<<F|(D<N?(U=k[H*N+D])>>>$:0);B+=O}return m.sprite=null,!0}return!1}return f.words=function(p){return arguments.length?(l=p,f):l},f.size=function(p){return arguments.length?(e=[+p[0],+p[1]],f):e},f.font=function(p){return arguments.length?(n=hv(p),f):n},f.fontStyle=function(p){return arguments.length?(i=hv(p),f):i},f.fontWeight=function(p){return arguments.length?(s=hv(p),f):s},f.rotate=function(p){return arguments.length?(o=hv(p),f):o},f.text=function(p){return arguments.length?(t=hv(p),f):t},f.spiral=function(p){return arguments.length?(u=J7t[p]||p,f):u},f.fontSize=function(p){return arguments.length?(r=hv(p),f):r},f.padding=function(p){return arguments.length?(a=hv(p),f):a},f.random=function(p){return arguments.length?(c=p,f):c},f}function W7t(e,t,n,r){if(!t.sprite){var i=e.context,s=e.ratio;i.clearRect(0,0,(eC<<5)/s,oO/s);var o=0,a=0,u=0,l=n.length,c,f,d,h,p;for(--r;++r<l;){if(t=n[r],i.save(),i.font=t.style+" "+t.weight+" "+~~((t.size+1)/s)+"px "+t.font,c=i.measureText(t.text+"m").width*s,d=t.size<<1,t.rotate){var m=Math.sin(t.rotate*dB),g=Math.cos(t.rotate*dB),y=c*g,v=c*m,b=d*g,w=d*m;c=Math.max(Math.abs(y+w),Math.abs(y-w))+31>>5<<5,d=~~Math.max(Math.abs(v+b),Math.abs(v-b))}else c=c+31>>5<<5;if(d>u&&(u=d),o+c>=eC<<5&&(o=0,a+=u,u=0),a+d>=oO)break;i.translate((o+(c>>1))/s,(a+(d>>1))/s),t.rotate&&i.rotate(t.rotate*dB),i.fillText(t.text,0,0),t.padding&&(i.lineWidth=2*t.padding,i.strokeText(t.text,0,0)),i.restore(),t.width=c,t.height=d,t.xoff=o,t.yoff=a,t.x1=c>>1,t.y1=d>>1,t.x0=-t.x1,t.y0=-t.y1,t.hasText=!0,o+=c}for(var E=i.getImageData(0,0,(eC<<5)/s,oO/s).data,T=[];--r>=0;)if(t=n[r],!!t.hasText){for(c=t.width,f=c>>5,d=t.y1-t.y0,h=0;h<d*f;h++)T[h]=0;if(o=t.xoff,o==null)return;a=t.yoff;var S=0,C=-1;for(p=0;p<d;p++){for(h=0;h<c;h++){var A=f*p+(h>>5),k=E[(a+p)*(eC<<5)+(o+h)<<2]?1<<31-h%32:0;T[A]|=k,S|=k}S?C=p:(t.y0++,d--,p--,a++)}t.y1=t.y0+C,t.sprite=T.slice(0,(t.y1-t.y0)*f)}}}function G7t(e,t,n){n>>=5;for(var r=e.sprite,i=e.width>>5,s=e.x-(i<<4),o=s&127,a=32-o,u=e.y1-e.y0,l=(e.y+e.y0)*n+(s>>5),c,f=0;f<u;f++){c=0;for(var d=0;d<=i;d++)if((c<<a|(d<i?(c=r[f*i+d])>>>o:0))&t[l+d])return!0;l+=n}return!1}function Y7t(e,t){var n=e[0],r=e[1];t.x+t.x0<n.x&&(n.x=t.x+t.x0),t.y+t.y0<n.y&&(n.y=t.y+t.y0),t.x+t.x1>r.x&&(r.x=t.x+t.x1),t.y+t.y1>r.y&&(r.y=t.y+t.y1)}function K7t(e,t){return e.x+e.x1>t[0].x&&e.x+e.x0<t[1].x&&e.y+e.y1>t[0].y&&e.y+e.y0<t[1].y}function CLe(e){var t=e[0]/e[1];return function(n){return[t*(n*=.1)*Math.cos(n),n*Math.sin(n)]}}function X7t(e){var t=4,n=t*e[0]/e[1],r=0,i=0;return function(s){var o=s<0?-1:1;switch(Math.sqrt(1+4*o*s)-o&3){case 0:r+=n;break;case 1:i+=t;break;case 2:r-=n;break;default:i-=t;break}return[r,i]}}function Q7t(e){for(var t=[],n=-1;++n<e;)t[n]=0;return t}function hv(e){return typeof e=="function"?e:function(){return e}}var J7t={archimedean:CLe,rectangular:X7t};const ALe=["x","y","font","fontSize","fontStyle","fontWeight","angle"],Z7t=["text","font","rotate","fontSize","fontStyle","fontWeight"];function mne(e){De.call(this,q7t(),e)}mne.Definition={type:"Wordcloud",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2},{name:"font",type:"string",expr:!0,default:"sans-serif"},{name:"fontStyle",type:"string",expr:!0,default:"normal"},{name:"fontWeight",type:"string",expr:!0,default:"normal"},{name:"fontSize",type:"number",expr:!0,default:14},{name:"fontSizeRange",type:"number",array:"nullable",default:[10,50]},{name:"rotate",type:"number",expr:!0,default:0},{name:"text",type:"field"},{name:"spiral",type:"string",values:["archimedean","rectangular"]},{name:"padding",type:"number",expr:!0},{name:"as",type:"string",array:!0,length:7,default:ALe}]};lt(mne,De,{transform(e,t){e.size&&!(e.size[0]&&e.size[1])&&Le("Wordcloud size dimensions must be non-zero.");function n(p){const m=e[p];return _n(m)&&t.modified(m.fields)}const r=e.modified();if(!(r||t.changed(t.ADD_REM)||Z7t.some(n)))return;const i=t.materialize(t.SOURCE).source,s=this.value,o=e.as||ALe;let a=e.fontSize||14,u;if(_n(a)?u=e.fontSizeRange:a=Sa(a),u){const p=a,m=gr("sqrt")().domain(Lh(i,p)).range(u);a=g=>m(p(g))}i.forEach(p=>{p[o[0]]=NaN,p[o[1]]=NaN,p[o[3]]=0});const l=s.words(i).text(e.text).size(e.size||[500,500]).padding(e.padding||1).spiral(e.spiral||"archimedean").rotate(e.rotate||0).font(e.font||"sans-serif").fontStyle(e.fontStyle||"normal").fontWeight(e.fontWeight||"normal").fontSize(a).random(Bc).layout(),c=s.size(),f=c[0]>>1,d=c[1]>>1,h=l.length;for(let p=0,m,g;p<h;++p)m=l[p],g=m.datum,g[o[0]]=m.x+f,g[o[1]]=m.y+d,g[o[2]]=m.font,g[o[3]]=m.size,g[o[4]]=m.style,g[o[5]]=m.weight,g[o[6]]=m.rotate;return t.reflow(r).modifies(o)}});const ezt=Object.freeze(Object.defineProperty({__proto__:null,wordcloud:mne},Symbol.toStringTag,{value:"Module"})),tzt=e=>new Uint8Array(e),nzt=e=>new Uint16Array(e),ZC=e=>new Uint32Array(e);function rzt(){let e=8,t=[],n=ZC(0),r=DD(0,e),i=DD(0,e);return{data:()=>t,seen:()=>n=izt(n,t.length),add(s){for(let o=0,a=t.length,u=s.length,l;o<u;++o)l=s[o],l._index=a++,t.push(l)},remove(s,o){const a=t.length,u=Array(a-s),l=t;let c,f,d;for(f=0;!o[f]&&f<a;++f)u[f]=t[f],l[f]=f;for(d=f;f<a;++f)c=t[f],o[f]?l[f]=-1:(l[f]=d,r[d]=r[f],i[d]=i[f],u[d]=c,c._index=d++),r[f]=0;return t=u,l},size:()=>t.length,curr:()=>r,prev:()=>i,reset:s=>i[s]=r[s],all:()=>e<257?255:e<65537?65535:4294967295,set(s,o){r[s]|=o},clear(s,o){r[s]&=~o},resize(s,o){const a=r.length;(s>a||o>e)&&(e=Math.max(o,e),r=DD(s,e,r),i=DD(s,e))}}}function izt(e,t,n){return e.length>=t?e:(n=n||new e.constructor(t),n.set(e),n)}function DD(e,t,n){const r=(t<257?tzt:t<65537?nzt:ZC)(e);return n&&r.set(n),r}function Rme(e,t,n){const r=1<<t;return{one:r,zero:~r,range:n.slice(),bisect:e.bisect,index:e.index,size:e.size,onAdd(i,s){const o=this,a=o.bisect(o.range,i.value),u=i.index,l=a[0],c=a[1],f=u.length;let d;for(d=0;d<l;++d)s[u[d]]|=r;for(d=c;d<f;++d)s[u[d]]|=r;return o}}}function Nme(){let e=ZC(0),t=[],n=0;function r(a,u,l){if(!u.length)return[];const c=n,f=u.length,d=ZC(f);let h=Array(f),p,m,g;for(g=0;g<f;++g)h[g]=a(u[g]),d[g]=g;if(h=szt(h,d),c)p=t,m=e,t=Array(c+f),e=ZC(c+f),ozt(l,p,m,c,h,d,f,t,e);else{if(l>0)for(g=0;g<f;++g)d[g]+=l;t=h,e=d}return n=c+f,{index:d,value:h}}function i(a,u){const l=n;let c,f,d;for(f=0;!u[e[f]]&&f<l;++f);for(d=f;f<l;++f)u[c=e[f]]||(e[d]=c,t[d]=t[f],++d);n=l-a}function s(a){for(let u=0,l=n;u<l;++u)e[u]=a[e[u]]}function o(a,u){let l;return u?l=u.length:(u=t,l=n),[Dat(u,a[0],0,l),H0(u,a[1],0,l)]}return{insert:r,remove:i,bisect:o,reindex:s,index:()=>e,size:()=>n}}function szt(e,t){return e.sort.call(t,(n,r)=>{const i=e[n],s=e[r];return i<s?-1:i>s?1:0}),Fat(e,t)}function ozt(e,t,n,r,i,s,o,a,u){let l=0,c=0,f;for(f=0;l<r&&c<o;++f)t[l]<i[c]?(a[f]=t[l],u[f]=n[l++]):(a[f]=i[c],u[f]=s[c++]+e);for(;l<r;++l,++f)a[f]=t[l],u[f]=n[l];for(;c<o;++c,++f)a[f]=i[c],u[f]=s[c]+e}function gne(e){De.call(this,rzt(),e),this._indices=null,this._dims=null}gne.Definition={type:"CrossFilter",metadata:{},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"query",type:"array",array:!0,required:!0,content:{type:"number",array:!0,length:2}}]};lt(gne,De,{transform(e,t){if(this._dims){var n=e.modified("fields")||e.fields.some(r=>t.modified(r.fields));return n?this.reinit(e,t):this.eval(e,t)}else return this.init(e,t)},init(e,t){const n=e.fields,r=e.query,i=this._indices={},s=this._dims=[],o=r.length;let a=0,u,l;for(;a<o;++a)u=n[a].fname,l=i[u]||(i[u]=Nme()),s.push(Rme(l,a,r[a]));return this.eval(e,t)},reinit(e,t){const n=t.materialize().fork(),r=e.fields,i=e.query,s=this._indices,o=this._dims,a=this.value,u=a.curr(),l=a.prev(),c=a.all(),f=n.rem=n.add,d=n.mod,h=i.length,p={};let m,g,y,v,b,w,E,T,S;if(l.set(u),t.rem.length&&(b=this.remove(e,t,n)),t.add.length&&a.add(t.add),t.mod.length)for(w={},v=t.mod,E=0,T=v.length;E<T;++E)w[v[E]._index]=1;for(E=0;E<h;++E)S=r[E],(!o[E]||e.modified("fields",E)||t.modified(S.fields))&&(y=S.fname,(m=p[y])||(s[y]=g=Nme(),p[y]=m=g.insert(S,t.source,0)),o[E]=Rme(g,E,i[E]).onAdd(m,u));for(E=0,T=a.data().length;E<T;++E)b[E]||(l[E]!==u[E]?f.push(E):w[E]&&u[E]!==c&&d.push(E));return a.mask=(1<<h)-1,n},eval(e,t){const n=t.materialize().fork(),r=this._dims.length;let i=0;return t.rem.length&&(this.remove(e,t,n),i|=(1<<r)-1),e.modified("query")&&!e.modified("fields")&&(i|=this.update(e,t,n)),t.add.length&&(this.insert(e,t,n),i|=(1<<r)-1),t.mod.length&&(this.modify(t,n),i|=(1<<r)-1),this.value.mask=i,n},insert(e,t,n){const r=t.add,i=this.value,s=this._dims,o=this._indices,a=e.fields,u={},l=n.add,c=i.size()+r.length,f=s.length;let d=i.size(),h,p,m;i.resize(c,f),i.add(r);const g=i.curr(),y=i.prev(),v=i.all();for(h=0;h<f;++h)p=a[h].fname,m=u[p]||(u[p]=o[p].insert(a[h],r,d)),s[h].onAdd(m,g);for(;d<c;++d)y[d]=v,g[d]!==v&&l.push(d)},modify(e,t){const n=t.mod,r=this.value,i=r.curr(),s=r.all(),o=e.mod;let a,u,l;for(a=0,u=o.length;a<u;++a)l=o[a]._index,i[l]!==s&&n.push(l)},remove(e,t,n){const r=this._indices,i=this.value,s=i.curr(),o=i.prev(),a=i.all(),u={},l=n.rem,c=t.rem;let f,d,h,p;for(f=0,d=c.length;f<d;++f)h=c[f]._index,u[h]=1,o[h]=p=s[h],s[h]=a,p!==a&&l.push(h);for(h in r)r[h].remove(d,u);return this.reindex(t,d,u),u},reindex(e,t,n){const r=this._indices,i=this.value;e.runAfter(()=>{const s=i.remove(t,n);for(const o in r)r[o].reindex(s)})},update(e,t,n){const r=this._dims,i=e.query,s=t.stamp,o=r.length;let a=0,u,l;for(n.filters=0,l=0;l<o;++l)e.modified("query",l)&&(u=l,++a);if(a===1)a=r[u].one,this.incrementOne(r[u],i[u],n.add,n.rem);else for(l=0,a=0;l<o;++l)e.modified("query",l)&&(a|=r[l].one,this.incrementAll(r[l],i[l],s,n.add),n.rem=n.add);return a},incrementAll(e,t,n,r){const i=this.value,s=i.seen(),o=i.curr(),a=i.prev(),u=e.index(),l=e.bisect(e.range),c=e.bisect(t),f=c[0],d=c[1],h=l[0],p=l[1],m=e.one;let g,y,v;if(f<h)for(g=f,y=Math.min(h,d);g<y;++g)v=u[g],s[v]!==n&&(a[v]=o[v],s[v]=n,r.push(v)),o[v]^=m;else if(f>h)for(g=h,y=Math.min(f,p);g<y;++g)v=u[g],s[v]!==n&&(a[v]=o[v],s[v]=n,r.push(v)),o[v]^=m;if(d>p)for(g=Math.max(f,p),y=d;g<y;++g)v=u[g],s[v]!==n&&(a[v]=o[v],s[v]=n,r.push(v)),o[v]^=m;else if(d<p)for(g=Math.max(h,d),y=p;g<y;++g)v=u[g],s[v]!==n&&(a[v]=o[v],s[v]=n,r.push(v)),o[v]^=m;e.range=t.slice()},incrementOne(e,t,n,r){const i=this.value,s=i.curr(),o=e.index(),a=e.bisect(e.range),u=e.bisect(t),l=u[0],c=u[1],f=a[0],d=a[1],h=e.one;let p,m,g;if(l<f)for(p=l,m=Math.min(f,c);p<m;++p)g=o[p],s[g]^=h,n.push(g);else if(l>f)for(p=f,m=Math.min(l,d);p<m;++p)g=o[p],s[g]^=h,r.push(g);if(c>d)for(p=Math.max(l,d),m=c;p<m;++p)g=o[p],s[g]^=h,n.push(g);else if(c<d)for(p=Math.max(f,c),m=d;p<m;++p)g=o[p],s[g]^=h,r.push(g);e.range=t.slice()}});function yne(e){De.call(this,null,e)}yne.Definition={type:"ResolveFilter",metadata:{},params:[{name:"ignore",type:"number",required:!0,description:"A bit mask indicating which filters to ignore."},{name:"filter",type:"object",required:!0,description:"Per-tuple filter bitmaps from a CrossFilter transform."}]};lt(yne,De,{transform(e,t){const n=~(e.ignore||0),r=e.filter,i=r.mask;if(!(i&n))return t.StopPropagation;const s=t.fork(t.ALL),o=r.data(),a=r.curr(),u=r.prev(),l=c=>a[c]&n?null:o[c];return s.filter(s.MOD,l),i&i-1?(s.filter(s.ADD,c=>{const f=a[c]&n;return!f&&f^u[c]&n?o[c]:null}),s.filter(s.REM,c=>{const f=a[c]&n;return f&&!(f^(f^u[c]&n))?o[c]:null})):(s.filter(s.ADD,l),s.filter(s.REM,c=>(a[c]&n)===i?o[c]:null)),s.filter(s.SOURCE,c=>l(c._index))}});const azt=Object.freeze(Object.defineProperty({__proto__:null,crossfilter:gne,resolvefilter:yne},Symbol.toStringTag,{value:"Module"})),uzt="RawCode",hb="Literal",lzt="Property",czt="Identifier",fzt="ArrayExpression",dzt="BinaryExpression",ILe="CallExpression",hzt="ConditionalExpression",pzt="LogicalExpression",mzt="MemberExpression",gzt="ObjectExpression",yzt="UnaryExpression";function fd(e){this.type=e}fd.prototype.visit=function(e){let t,n,r;if(e(this))return 1;for(t=vzt(this),n=0,r=t.length;n<r;++n)if(t[n].visit(e))return 1};function vzt(e){switch(e.type){case fzt:return e.elements;case dzt:case pzt:return[e.left,e.right];case ILe:return[e.callee].concat(e.arguments);case hzt:return[e.test,e.consequent,e.alternate];case mzt:return[e.object,e.property];case gzt:return e.properties;case lzt:return[e.key,e.value];case yzt:return[e.argument];case czt:case hb:case uzt:default:return[]}}var sp,kt,$e,va,Pr,AF=1,kR=2,pb=3,Yy=4,IF=5,o_=6,Su=7,RR=8,bzt=9;sp={};sp[AF]="Boolean";sp[kR]="<end>";sp[pb]="Identifier";sp[Yy]="Keyword";sp[IF]="Null";sp[o_]="Numeric";sp[Su]="Punctuator";sp[RR]="String";sp[bzt]="RegularExpression";var _zt="ArrayExpression",wzt="BinaryExpression",Ezt="CallExpression",xzt="ConditionalExpression",kLe="Identifier",Szt="Literal",Tzt="LogicalExpression",Czt="MemberExpression",Azt="ObjectExpression",Izt="Property",kzt="UnaryExpression",io="Unexpected token %0",Rzt="Unexpected number",Nzt="Unexpected string",Dzt="Unexpected identifier",Pzt="Unexpected reserved word",Ozt="Unexpected end of input",GH="Invalid regular expression",hB="Invalid regular expression: missing /",RLe="Octal literals are not allowed in strict mode.",$zt="Duplicate data property in object literal not allowed in strict mode",Ro="ILLEGAL",FI="Disabled.",Mzt=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),Lzt=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B2\\u08E4-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58\\u0C59\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D60-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA69D\\uA69F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2D\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]");function kF(e,t){if(!e)throw new Error("ASSERT: "+t)}function $p(e){return e>=48&&e<=57}function vne(e){return"0123456789abcdefABCDEF".indexOf(e)>=0}function eA(e){return"01234567".indexOf(e)>=0}function Fzt(e){return e===32||e===9||e===11||e===12||e===160||e>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(e)>=0}function jI(e){return e===10||e===13||e===8232||e===8233}function NR(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e===92||e>=128&&Mzt.test(String.fromCharCode(e))}function RM(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57||e===92||e>=128&&Lzt.test(String.fromCharCode(e))}const jzt={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1};function NLe(){for(;$e<va;){const e=kt.charCodeAt($e);if(Fzt(e)||jI(e))++$e;else break}}function YH(e){var t,n,r,i=0;for(n=e==="u"?4:2,t=0;t<n;++t)$e<va&&vne(kt[$e])?(r=kt[$e++],i=i*16+"0123456789abcdef".indexOf(r.toLowerCase())):pr({},io,Ro);return String.fromCharCode(i)}function Bzt(){var e,t,n,r;for(e=kt[$e],t=0,e==="}"&&pr({},io,Ro);$e<va&&(e=kt[$e++],!!vne(e));)t=t*16+"0123456789abcdef".indexOf(e.toLowerCase());return(t>1114111||e!=="}")&&pr({},io,Ro),t<=65535?String.fromCharCode(t):(n=(t-65536>>10)+55296,r=(t-65536&1023)+56320,String.fromCharCode(n,r))}function DLe(){var e,t;for(e=kt.charCodeAt($e++),t=String.fromCharCode(e),e===92&&(kt.charCodeAt($e)!==117&&pr({},io,Ro),++$e,e=YH("u"),(!e||e==="\\"||!NR(e.charCodeAt(0)))&&pr({},io,Ro),t=e);$e<va&&(e=kt.charCodeAt($e),!!RM(e));)++$e,t+=String.fromCharCode(e),e===92&&(t=t.substr(0,t.length-1),kt.charCodeAt($e)!==117&&pr({},io,Ro),++$e,e=YH("u"),(!e||e==="\\"||!RM(e.charCodeAt(0)))&&pr({},io,Ro),t+=e);return t}function Uzt(){var e,t;for(e=$e++;$e<va;){if(t=kt.charCodeAt($e),t===92)return $e=e,DLe();if(RM(t))++$e;else break}return kt.slice(e,$e)}function zzt(){var e,t,n;return e=$e,t=kt.charCodeAt($e)===92?DLe():Uzt(),t.length===1?n=pb:jzt.hasOwnProperty(t)?n=Yy:t==="null"?n=IF:t==="true"||t==="false"?n=AF:n=pb,{type:n,value:t,start:e,end:$e}}function pB(){var e=$e,t=kt.charCodeAt($e),n,r=kt[$e],i,s,o;switch(t){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++$e,{type:Su,value:String.fromCharCode(t),start:e,end:$e};default:if(n=kt.charCodeAt($e+1),n===61)switch(t){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return $e+=2,{type:Su,value:String.fromCharCode(t)+String.fromCharCode(n),start:e,end:$e};case 33:case 61:return $e+=2,kt.charCodeAt($e)===61&&++$e,{type:Su,value:kt.slice(e,$e),start:e,end:$e}}}if(o=kt.substr($e,4),o===">>>=")return $e+=4,{type:Su,value:o,start:e,end:$e};if(s=o.substr(0,3),s===">>>"||s==="<<="||s===">>=")return $e+=3,{type:Su,value:s,start:e,end:$e};if(i=s.substr(0,2),r===i[1]&&"+-<>&|".indexOf(r)>=0||i==="=>")return $e+=2,{type:Su,value:i,start:e,end:$e};if(i==="//"&&pr({},io,Ro),"<>=!+-*%&|^/".indexOf(r)>=0)return++$e,{type:Su,value:r,start:e,end:$e};pr({},io,Ro)}function Vzt(e){let t="";for(;$e<va&&vne(kt[$e]);)t+=kt[$e++];return t.length===0&&pr({},io,Ro),NR(kt.charCodeAt($e))&&pr({},io,Ro),{type:o_,value:parseInt("0x"+t,16),start:e,end:$e}}function Hzt(e){let t="0"+kt[$e++];for(;$e<va&&eA(kt[$e]);)t+=kt[$e++];return(NR(kt.charCodeAt($e))||$p(kt.charCodeAt($e)))&&pr({},io,Ro),{type:o_,value:parseInt(t,8),octal:!0,start:e,end:$e}}function Dme(){var e,t,n;if(n=kt[$e],kF($p(n.charCodeAt(0))||n===".","Numeric literal must start with a decimal digit or a decimal point"),t=$e,e="",n!=="."){if(e=kt[$e++],n=kt[$e],e==="0"){if(n==="x"||n==="X")return++$e,Vzt(t);if(eA(n))return Hzt(t);n&&$p(n.charCodeAt(0))&&pr({},io,Ro)}for(;$p(kt.charCodeAt($e));)e+=kt[$e++];n=kt[$e]}if(n==="."){for(e+=kt[$e++];$p(kt.charCodeAt($e));)e+=kt[$e++];n=kt[$e]}if(n==="e"||n==="E")if(e+=kt[$e++],n=kt[$e],(n==="+"||n==="-")&&(e+=kt[$e++]),$p(kt.charCodeAt($e)))for(;$p(kt.charCodeAt($e));)e+=kt[$e++];else pr({},io,Ro);return NR(kt.charCodeAt($e))&&pr({},io,Ro),{type:o_,value:parseFloat(e),start:t,end:$e}}function qzt(){var e="",t,n,r,i,s=!1;for(t=kt[$e],kF(t==="'"||t==='"',"String literal must starts with a quote"),n=$e,++$e;$e<va;)if(r=kt[$e++],r===t){t="";break}else if(r==="\\")if(r=kt[$e++],!r||!jI(r.charCodeAt(0)))switch(r){case"u":case"x":kt[$e]==="{"?(++$e,e+=Bzt()):e+=YH(r);break;case"n":e+=`
`;break;case"r":e+="\r";break;case"t":e+="	";break;case"b":e+="\b";break;case"f":e+="\f";break;case"v":e+="\v";break;default:eA(r)?(i="01234567".indexOf(r),i!==0&&(s=!0),$e<va&&eA(kt[$e])&&(s=!0,i=i*8+"01234567".indexOf(kt[$e++]),"0123".indexOf(r)>=0&&$e<va&&eA(kt[$e])&&(i=i*8+"01234567".indexOf(kt[$e++]))),e+=String.fromCharCode(i)):e+=r;break}else r==="\r"&&kt[$e]===`
`&&++$e;else{if(jI(r.charCodeAt(0)))break;e+=r}return t!==""&&pr({},io,Ro),{type:RR,value:e,octal:s,start:n,end:$e}}function Wzt(e,t){let n=e;t.indexOf("u")>=0&&(n=n.replace(/\\u\{([0-9a-fA-F]+)\}/g,(r,i)=>{if(parseInt(i,16)<=1114111)return"x";pr({},GH)}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{new RegExp(n)}catch{pr({},GH)}try{return new RegExp(e,t)}catch{return null}}function Gzt(){var e,t,n,r,i;for(e=kt[$e],kF(e==="/","Regular expression literal must start with a slash"),t=kt[$e++],n=!1,r=!1;$e<va;)if(e=kt[$e++],t+=e,e==="\\")e=kt[$e++],jI(e.charCodeAt(0))&&pr({},hB),t+=e;else if(jI(e.charCodeAt(0)))pr({},hB);else if(n)e==="]"&&(n=!1);else if(e==="/"){r=!0;break}else e==="["&&(n=!0);return r||pr({},hB),i=t.substr(1,t.length-2),{value:i,literal:t}}function Yzt(){var e,t,n;for(t="",n="";$e<va&&(e=kt[$e],!!RM(e.charCodeAt(0)));)++$e,e==="\\"&&$e<va?pr({},io,Ro):(n+=e,t+=e);return n.search(/[^gimuy]/g)>=0&&pr({},GH,n),{value:n,literal:t}}function Kzt(){var e,t,n,r;return Pr=null,NLe(),e=$e,t=Gzt(),n=Yzt(),r=Wzt(t.value,n.value),{literal:t.literal+n.literal,value:r,regex:{pattern:t.value,flags:n.value},start:e,end:$e}}function Xzt(e){return e.type===pb||e.type===Yy||e.type===AF||e.type===IF}function PLe(){if(NLe(),$e>=va)return{type:kR,start:$e,end:$e};const e=kt.charCodeAt($e);return NR(e)?zzt():e===40||e===41||e===59?pB():e===39||e===34?qzt():e===46?$p(kt.charCodeAt($e+1))?Dme():pB():$p(e)?Dme():pB()}function Du(){const e=Pr;return $e=e.end,Pr=PLe(),$e=e.end,e}function OLe(){const e=$e;Pr=PLe(),$e=e}function Qzt(e){const t=new fd(_zt);return t.elements=e,t}function Pme(e,t,n){const r=new fd(e==="||"||e==="&&"?Tzt:wzt);return r.operator=e,r.left=t,r.right=n,r}function Jzt(e,t){const n=new fd(Ezt);return n.callee=e,n.arguments=t,n}function Zzt(e,t,n){const r=new fd(xzt);return r.test=e,r.consequent=t,r.alternate=n,r}function bne(e){const t=new fd(kLe);return t.name=e,t}function tC(e){const t=new fd(Szt);return t.value=e.value,t.raw=kt.slice(e.start,e.end),e.regex&&(t.raw==="//"&&(t.raw="/(?:)/"),t.regex=e.regex),t}function Ome(e,t,n){const r=new fd(Czt);return r.computed=e==="[",r.object=t,r.property=n,r.computed||(n.member=!0),r}function eVt(e){const t=new fd(Azt);return t.properties=e,t}function $me(e,t,n){const r=new fd(Izt);return r.key=t,r.value=n,r.kind=e,r}function tVt(e,t){const n=new fd(kzt);return n.operator=e,n.argument=t,n.prefix=!0,n}function pr(e,t){var n,r=Array.prototype.slice.call(arguments,2),i=t.replace(/%(\d)/g,(s,o)=>(kF(o<r.length,"Message reference must be in range"),r[o]));throw n=new Error(i),n.index=$e,n.description=i,n}function RF(e){e.type===kR&&pr(e,Ozt),e.type===o_&&pr(e,Rzt),e.type===RR&&pr(e,Nzt),e.type===pb&&pr(e,Dzt),e.type===Yy&&pr(e,Pzt),pr(e,io,e.value)}function ba(e){const t=Du();(t.type!==Su||t.value!==e)&&RF(t)}function fi(e){return Pr.type===Su&&Pr.value===e}function mB(e){return Pr.type===Yy&&Pr.value===e}function nVt(){const e=[];for($e=Pr.start,ba("[");!fi("]");)fi(",")?(Du(),e.push(null)):(e.push(mb()),fi("]")||ba(","));return Du(),Qzt(e)}function Mme(){$e=Pr.start;const e=Du();return e.type===RR||e.type===o_?(e.octal&&pr(e,RLe),tC(e)):bne(e.value)}function rVt(){var e,t,n,r;if($e=Pr.start,e=Pr,e.type===pb)return n=Mme(),ba(":"),r=mb(),$me("init",n,r);if(e.type===kR||e.type===Su)RF(e);else return t=Mme(),ba(":"),r=mb(),$me("init",t,r)}function iVt(){var e=[],t,n,r,i={},s=String;for($e=Pr.start,ba("{");!fi("}");)t=rVt(),t.key.type===kLe?n=t.key.name:n=s(t.key.value),r="$"+n,Object.prototype.hasOwnProperty.call(i,r)?pr({},$zt):i[r]=!0,e.push(t),fi("}")||ba(",");return ba("}"),eVt(e)}function sVt(){ba("(");const e=_ne();return ba(")"),e}const oVt={if:1};function aVt(){var e,t,n;if(fi("("))return sVt();if(fi("["))return nVt();if(fi("{"))return iVt();if(e=Pr.type,$e=Pr.start,e===pb||oVt[Pr.value])n=bne(Du().value);else if(e===RR||e===o_)Pr.octal&&pr(Pr,RLe),n=tC(Du());else{if(e===Yy)throw new Error(FI);e===AF?(t=Du(),t.value=t.value==="true",n=tC(t)):e===IF?(t=Du(),t.value=null,n=tC(t)):fi("/")||fi("/=")?(n=tC(Kzt()),OLe()):RF(Du())}return n}function uVt(){const e=[];if(ba("("),!fi(")"))for(;$e<va&&(e.push(mb()),!fi(")"));)ba(",");return ba(")"),e}function lVt(){$e=Pr.start;const e=Du();return Xzt(e)||RF(e),bne(e.value)}function cVt(){return ba("."),lVt()}function fVt(){ba("[");const e=_ne();return ba("]"),e}function dVt(){var e,t,n;for(e=aVt();;)if(fi("."))n=cVt(),e=Ome(".",e,n);else if(fi("("))t=uVt(),e=Jzt(e,t);else if(fi("["))n=fVt(),e=Ome("[",e,n);else break;return e}function Lme(){const e=dVt();if(Pr.type===Su&&(fi("++")||fi("--")))throw new Error(FI);return e}function aO(){var e,t;if(Pr.type!==Su&&Pr.type!==Yy)t=Lme();else{if(fi("++")||fi("--"))throw new Error(FI);if(fi("+")||fi("-")||fi("~")||fi("!"))e=Du(),t=aO(),t=tVt(e.value,t);else{if(mB("delete")||mB("void")||mB("typeof"))throw new Error(FI);t=Lme()}}return t}function Fme(e){let t=0;if(e.type!==Su&&e.type!==Yy)return 0;switch(e.value){case"||":t=1;break;case"&&":t=2;break;case"|":t=3;break;case"^":t=4;break;case"&":t=5;break;case"==":case"!=":case"===":case"!==":t=6;break;case"<":case">":case"<=":case">=":case"instanceof":case"in":t=7;break;case"<<":case">>":case">>>":t=8;break;case"+":case"-":t=9;break;case"*":case"/":case"%":t=11;break}return t}function hVt(){var e,t,n,r,i,s,o,a,u,l;if(e=Pr,u=aO(),r=Pr,i=Fme(r),i===0)return u;for(r.prec=i,Du(),t=[e,Pr],o=aO(),s=[u,r,o];(i=Fme(Pr))>0;){for(;s.length>2&&i<=s[s.length-2].prec;)o=s.pop(),a=s.pop().value,u=s.pop(),t.pop(),n=Pme(a,u,o),s.push(n);r=Du(),r.prec=i,s.push(r),t.push(Pr),n=aO(),s.push(n)}for(l=s.length-1,n=s[l],t.pop();l>1;)t.pop(),n=Pme(s[l-1].value,s[l-2],n),l-=2;return n}function mb(){var e,t,n;return e=hVt(),fi("?")&&(Du(),t=mb(),ba(":"),n=mb(),e=Zzt(e,t,n)),e}function _ne(){const e=mb();if(fi(","))throw new Error(FI);return e}function wne(e){kt=e,$e=0,va=kt.length,Pr=null,OLe();const t=_ne();if(Pr.type!==kR)throw new Error("Unexpect token after expression.");return t}var $Le={NaN:"NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2",MIN_VALUE:"Number.MIN_VALUE",MAX_VALUE:"Number.MAX_VALUE"};function MLe(e){function t(o,a,u,l){let c=e(a[0]);return u&&(c=u+"("+c+")",u.lastIndexOf("new ",0)===0&&(c="("+c+")")),c+"."+o+(l<0?"":l===0?"()":"("+a.slice(1).map(e).join(",")+")")}function n(o,a,u){return l=>t(o,l,a,u)}const r="new Date",i="String",s="RegExp";return{isNaN:"Number.isNaN",isFinite:"Number.isFinite",abs:"Math.abs",acos:"Math.acos",asin:"Math.asin",atan:"Math.atan",atan2:"Math.atan2",ceil:"Math.ceil",cos:"Math.cos",exp:"Math.exp",floor:"Math.floor",hypot:"Math.hypot",log:"Math.log",max:"Math.max",min:"Math.min",pow:"Math.pow",random:"Math.random",round:"Math.round",sin:"Math.sin",sqrt:"Math.sqrt",tan:"Math.tan",clamp:function(o){o.length<3&&Le("Missing arguments to clamp function."),o.length>3&&Le("Too many arguments to clamp function.");const a=o.map(e);return"Math.max("+a[1]+", Math.min("+a[2]+","+a[0]+"))"},now:"Date.now",utc:"Date.UTC",datetime:r,date:n("getDate",r,0),day:n("getDay",r,0),year:n("getFullYear",r,0),month:n("getMonth",r,0),hours:n("getHours",r,0),minutes:n("getMinutes",r,0),seconds:n("getSeconds",r,0),milliseconds:n("getMilliseconds",r,0),time:n("getTime",r,0),timezoneoffset:n("getTimezoneOffset",r,0),utcdate:n("getUTCDate",r,0),utcday:n("getUTCDay",r,0),utcyear:n("getUTCFullYear",r,0),utcmonth:n("getUTCMonth",r,0),utchours:n("getUTCHours",r,0),utcminutes:n("getUTCMinutes",r,0),utcseconds:n("getUTCSeconds",r,0),utcmilliseconds:n("getUTCMilliseconds",r,0),length:n("length",null,-1),parseFloat:"parseFloat",parseInt:"parseInt",upper:n("toUpperCase",i,0),lower:n("toLowerCase",i,0),substring:n("substring",i),split:n("split",i),trim:n("trim",i,0),regexp:s,test:n("test",s),if:function(o){o.length<3&&Le("Missing arguments to if function."),o.length>3&&Le("Too many arguments to if function.");const a=o.map(e);return"("+a[0]+"?"+a[1]+":"+a[2]+")"}}}function pVt(e){const t=e&&e.length-1;return t&&(e[0]==='"'&&e[t]==='"'||e[0]==="'"&&e[t]==="'")?e.slice(1,-1):e}function LLe(e){e=e||{};const t=e.allowed?ed(e.allowed):{},n=e.forbidden?ed(e.forbidden):{},r=e.constants||$Le,i=(e.functions||MLe)(f),s=e.globalvar,o=e.fieldvar,a=_n(s)?s:p=>`${s}["${p}"]`;let u={},l={},c=0;function f(p){if(mt(p))return p;const m=d[p.type];return m==null&&Le("Unsupported type: "+p.type),m(p)}const d={Literal:p=>p.raw,Identifier:p=>{const m=p.name;return c>0?m:jt(n,m)?Le("Illegal identifier: "+m):jt(r,m)?r[m]:jt(t,m)?m:(u[m]=1,a(m))},MemberExpression:p=>{const m=!p.computed,g=f(p.object);m&&(c+=1);const y=f(p.property);return g===o&&(l[pVt(y)]=1),m&&(c-=1),g+(m?"."+y:"["+y+"]")},CallExpression:p=>{p.callee.type!=="Identifier"&&Le("Illegal callee type: "+p.callee.type);const m=p.callee.name,g=p.arguments,y=jt(i,m)&&i[m];return y||Le("Unrecognized function: "+m),_n(y)?y(g):y+"("+g.map(f).join(",")+")"},ArrayExpression:p=>"["+p.elements.map(f).join(",")+"]",BinaryExpression:p=>"("+f(p.left)+" "+p.operator+" "+f(p.right)+")",UnaryExpression:p=>"("+p.operator+f(p.argument)+")",ConditionalExpression:p=>"("+f(p.test)+"?"+f(p.consequent)+":"+f(p.alternate)+")",LogicalExpression:p=>"("+f(p.left)+p.operator+f(p.right)+")",ObjectExpression:p=>"{"+p.properties.map(f).join(",")+"}",Property:p=>{c+=1;const m=f(p.key);return c-=1,m+":"+f(p.value)}};function h(p){const m={code:f(p),globals:Object.keys(u),fields:Object.keys(l)};return u={},l={},m}return h.functions=i,h.constants=r,h}const jme=Symbol("vega_selection_getter");function FLe(e){return(!e.getter||!e.getter[jme])&&(e.getter=Lc(e.field),e.getter[jme]=!0),e.getter}const Ene="intersect",Bme="union",mVt="vlMulti",gVt="vlPoint",Ume="or",yVt="and",Fd="_vgsid_",BI=Lc(Fd),vVt="E",bVt="R",_Vt="R-E",wVt="R-LE",EVt="R-RE",NM="index:unit";function zme(e,t){for(var n=t.fields,r=t.values,i=n.length,s=0,o,a;s<i;++s)if(a=n[s],o=FLe(a)(e),N0(o)&&(o=ha(o)),N0(r[s])&&(r[s]=ha(r[s])),je(r[s])&&N0(r[s][0])&&(r[s]=r[s].map(ha)),a.type===vVt){if(je(r[s])?r[s].indexOf(o)<0:o!==r[s])return!1}else if(a.type===bVt){if(!$w(o,r[s]))return!1}else if(a.type===EVt){if(!$w(o,r[s],!0,!1))return!1}else if(a.type===_Vt){if(!$w(o,r[s],!1,!1))return!1}else if(a.type===wVt&&!$w(o,r[s],!1,!0))return!1;return!0}function xVt(e,t,n){for(var r=this.context.data[e],i=r?r.values.value:[],s=r?r[NM]&&r[NM].value:void 0,o=n===Ene,a=i.length,u=0,l,c,f,d,h;u<a;++u)if(l=i[u],s&&o){if(c=c||{},f=c[d=l.unit]||0,f===-1)continue;if(h=zme(t,l),c[d]=h?-1:++f,h&&s.size===1)return!0;if(!h&&f===s.get(d).count)return!1}else if(h=zme(t,l),o^h)return h;return a&&o}const jLe=hS(BI),SVt=jLe.left,TVt=jLe.right;function CVt(e,t,n){const r=this.context.data[e],i=r?r.values.value:[],s=r?r[NM]&&r[NM].value:void 0,o=n===Ene,a=BI(t),u=SVt(i,a);if(u===i.length||BI(i[u])!==a)return!1;if(s&&o){if(s.size===1)return!0;if(TVt(i,a)-u<s.size)return!1}return!0}function AVt(e,t){return e.map(n=>bn(t.fields?{values:t.fields.map(r=>FLe(r)(n.datum))}:{[Fd]:BI(n.datum)},t))}function IVt(e,t,n,r){for(var i=this.context.data[e],s=i?i.values.value:[],o={},a={},u={},l,c,f,d,h,p,m,g,y,v,b=s.length,w=0,E,T;w<b;++w)if(l=s[w],d=l.unit,c=l.fields,f=l.values,c&&f){for(E=0,T=c.length;E<T;++E)h=c[E],m=o[h.field]||(o[h.field]={}),g=m[d]||(m[d]=[]),u[h.field]=y=h.type.charAt(0),v=gB[`${y}_union`],m[d]=v(g,pt(f[E]));n&&(g=a[d]||(a[d]=[]),g.push(pt(f).reduce((S,C,A)=>(S[c[A].field]=C,S),{})))}else h=Fd,p=BI(l),m=o[h]||(o[h]={}),g=m[d]||(m[d]=[]),g.push(p),n&&(g=a[d]||(a[d]=[]),g.push({[Fd]:p}));if(t=t||Bme,o[Fd]?o[Fd]=gB[`${Fd}_${t}`](...Object.values(o[Fd])):Object.keys(o).forEach(S=>{o[S]=Object.keys(o[S]).map(C=>o[S][C]).reduce((C,A)=>C===void 0?A:gB[`${u[S]}_${t}`](C,A))}),s=Object.keys(a),n&&s.length){const S=r?gVt:mVt;o[S]=t===Bme?{[Ume]:s.reduce((C,A)=>(C.push(...a[A]),C),[])}:{[yVt]:s.map(C=>({[Ume]:a[C]}))}}return o}var gB={[`${Fd}_union`]:Wat,[`${Fd}_intersect`]:Hat,E_union:function(e,t){if(!e.length)return t;for(var n=0,r=t.length;n<r;++n)e.indexOf(t[n])<0&&e.push(t[n]);return e},E_intersect:function(e,t){return e.length?e.filter(n=>t.indexOf(n)>=0):t},R_union:function(e,t){var n=ha(t[0]),r=ha(t[1]);return n>r&&(n=t[1],r=t[0]),e.length?(e[0]>n&&(e[0]=n),e[1]<r&&(e[1]=r),e):[n,r]},R_intersect:function(e,t){var n=ha(t[0]),r=ha(t[1]);return n>r&&(n=t[1],r=t[0]),e.length?r<e[0]||e[1]<n?[]:(e[0]<n&&(e[0]=n),e[1]>r&&(e[1]=r),e):[n,r]}};const kVt=":",RVt="@";function xne(e,t,n,r){t[0].type!==hb&&Le("First argument to selection functions must be a string literal.");const i=t[0].value,s=t.length>=2&&Qn(t).value,o="unit",a=RVt+o,u=kVt+i;s===Ene&&!jt(r,a)&&(r[a]=n.getData(i).indataRef(n,o)),jt(r,u)||(r[u]=n.getData(i).tuplesRef())}function BLe(e){const t=this.context.data[e];return t?t.values.value:[]}function NVt(e,t,n){const r=this.context.data[e]["index:"+t],i=r?r.value.get(n):void 0;return i&&i.count}function DVt(e,t){const n=this.context.dataflow,r=this.context.data[e],i=r.input;return n.pulse(i,n.changeset().remove(Fc).insert(t)),1}function PVt(e,t,n){if(e){const r=this.context.dataflow,i=e.mark.source;r.pulse(i,r.changeset().encode(e,t))}return n!==void 0?n:e}const DR=e=>function(t,n){return this.context.dataflow.locale()[e](n)(t)},OVt=DR("format"),ULe=DR("timeFormat"),$Vt=DR("utcFormat"),MVt=DR("timeParse"),LVt=DR("utcParse"),PD=new Date(2e3,0,1);function NF(e,t,n){return!Number.isInteger(e)||!Number.isInteger(t)?"":(PD.setYear(2e3),PD.setMonth(e),PD.setDate(t),ULe.call(this,PD,n))}function FVt(e){return NF.call(this,e,1,"%B")}function jVt(e){return NF.call(this,e,1,"%b")}function BVt(e){return NF.call(this,0,2+e,"%A")}function UVt(e){return NF.call(this,0,2+e,"%a")}const zVt=":",VVt="@",KH="%",zLe="$";function Sne(e,t,n,r){t[0].type!==hb&&Le("First argument to data functions must be a string literal.");const i=t[0].value,s=zVt+i;if(!jt(s,r))try{r[s]=n.getData(i).tuplesRef()}catch{}}function HVt(e,t,n,r){t[0].type!==hb&&Le("First argument to indata must be a string literal."),t[1].type!==hb&&Le("Second argument to indata must be a string literal.");const i=t[0].value,s=t[1].value,o=VVt+s;jt(o,r)||(r[o]=n.getData(i).indataRef(n,s))}function Xa(e,t,n,r){if(t[0].type===hb)Vme(n,r,t[0].value);else for(e in n.scales)Vme(n,r,e)}function Vme(e,t,n){const r=KH+n;if(!jt(t,r))try{t[r]=e.scaleRef(n)}catch{}}function op(e,t){if(_n(e))return e;if(mt(e)){const n=t.scales[e];return n&&gjt(n.value)?n.value:void 0}}function qVt(e,t,n){t.__bandwidth=i=>i&&i.bandwidth?i.bandwidth():0,n._bandwidth=Xa,n._range=Xa,n._scale=Xa;const r=i=>"_["+(i.type===hb?rt(KH+i.value):rt(KH)+"+"+e(i))+"]";return{_bandwidth:i=>`this.__bandwidth(${r(i[0])})`,_range:i=>`${r(i[0])}.range()`,_scale:i=>`${r(i[0])}(${e(i[1])})`}}function Tne(e,t){return function(n,r,i){if(n){const s=op(n,(i||this).context);return s&&s.path[e](r)}else return t(r)}}const WVt=Tne("area",dht),GVt=Tne("bounds",ght),YVt=Tne("centroid",Eht);function KVt(e,t){const n=op(e,(t||this).context);return n&&n.scale()}function XVt(e){const t=this.context.group;let n=!1;if(t)for(;e;){if(e===t){n=!0;break}e=e.mark.group}return n}function Cne(e,t,n){try{e[t].apply(e,["EXPRESSION"].concat([].slice.call(n)))}catch(r){e.warn(r)}return n[n.length-1]}function QVt(){return Cne(this.context.dataflow,"warn",arguments)}function JVt(){return Cne(this.context.dataflow,"info",arguments)}function ZVt(){return Cne(this.context.dataflow,"debug",arguments)}function yB(e){const t=e/255;return t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)}function XH(e){const t=W0(e),n=yB(t.r),r=yB(t.g),i=yB(t.b);return .2126*n+.7152*r+.0722*i}function eHt(e,t){const n=XH(e),r=XH(t),i=Math.max(n,r),s=Math.min(n,r);return(i+.05)/(s+.05)}function tHt(){const e=[].slice.call(arguments);return e.unshift({}),bn(...e)}function VLe(e,t){return e===t||e!==e&&t!==t?!0:je(e)?je(t)&&e.length===t.length?nHt(e,t):!1:gt(e)&&gt(t)?HLe(e,t):!1}function nHt(e,t){for(let n=0,r=e.length;n<r;++n)if(!VLe(e[n],t[n]))return!1;return!0}function HLe(e,t){for(const n in e)if(!VLe(e[n],t[n]))return!1;return!0}function Hme(e){return t=>HLe(e,t)}function rHt(e,t,n,r,i,s){const o=this.context.dataflow,a=this.context.data[e],u=a.input,l=o.stamp();let c=a.changes,f,d;if(o._trigger===!1||!(u.value.length||t||r))return 0;if((!c||c.stamp<l)&&(a.changes=c=o.changeset(),c.stamp=l,o.runAfter(()=>{a.modified=!0,o.pulse(u,c).run()},!0,1)),n&&(f=n===!0?Fc:je(n)||tF(n)?n:Hme(n),c.remove(f)),t&&c.insert(t),r&&(f=Hme(r),u.value.some(f)?c.remove(f):c.insert(r)),i)for(d in s)c.modify(i,d,s[d]);return 1}function iHt(e){const t=e.touches,n=t[0].clientX-t[1].clientX,r=t[0].clientY-t[1].clientY;return Math.hypot(n,r)}function sHt(e){const t=e.touches;return Math.atan2(t[0].clientY-t[1].clientY,t[0].clientX-t[1].clientX)}const qme={};function oHt(e,t){const n=qme[t]||(qme[t]=Lc(t));return je(e)?e.map(n):n(e)}function Ane(e){return je(e)||ArrayBuffer.isView(e)?e:null}function Ine(e){return Ane(e)||(mt(e)?e:null)}function aHt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Ane(e).join(...n)}function uHt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Ine(e).indexOf(...n)}function lHt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Ine(e).lastIndexOf(...n)}function cHt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Ine(e).slice(...n)}function fHt(e,t,n){return _n(n)&&Le("Function argument passed to replace."),String(e).replace(t,n)}function dHt(e){return Ane(e).slice().reverse()}function hHt(e,t,n){return Jee(e||0,t||0,n||0)}function pHt(e,t){const n=op(e,(t||this).context);return n&&n.bandwidth?n.bandwidth():0}function mHt(e,t){const n=op(e,(t||this).context);return n?n.copy():void 0}function gHt(e,t){const n=op(e,(t||this).context);return n?n.domain():[]}function yHt(e,t,n){const r=op(e,(n||this).context);return r?je(t)?(r.invertRange||r.invert)(t):(r.invert||r.invertExtent)(t):void 0}function vHt(e,t){const n=op(e,(t||this).context);return n&&n.range?n.range():[]}function bHt(e,t,n){const r=op(e,(n||this).context);return r?r(t):void 0}function _Ht(e,t,n,r,i){e=op(e,(i||this).context);const s=O$e(t,n);let o=e.domain(),a=o[0],u=Qn(o),l=xa;return u-a?l=E$e(e,a,u):e=(e.interpolator?gr("sequential")().interpolator(e.interpolator()):gr("linear")().interpolate(e.interpolate()).range(e.range())).domain([a=0,u=1]),e.ticks&&(o=e.ticks(+r||15),a!==o[0]&&o.unshift(a),u!==Qn(o)&&o.push(u)),o.forEach(c=>s.stop(l(c),e(c))),s}function wHt(e,t,n){const r=op(e,(n||this).context);return function(i){return r?r.path.context(i)(t):""}}function EHt(e){let t=null;return function(n){return n?OI(n,t=t||Tx(e)):e}}const qLe=e=>e.data;function WLe(e,t){const n=BLe.call(t,e);return n.root&&n.root.lookup||{}}function xHt(e,t,n){const r=WLe(e,this),i=r[t],s=r[n];return i&&s?i.path(s).map(qLe):void 0}function SHt(e,t){const n=WLe(e,this)[t];return n?n.ancestors().map(qLe):void 0}const GLe=()=>typeof window<"u"&&window||null;function THt(){const e=GLe();return e?e.screen:{}}function CHt(){const e=GLe();return e?[e.innerWidth,e.innerHeight]:[void 0,void 0]}function AHt(){const e=this.context.dataflow,t=e.container&&e.container();return t?[t.clientWidth,t.clientHeight]:[void 0,void 0]}function YLe(e,t,n){if(!e)return[];const[r,i]=e,s=new Ts().set(r[0],r[1],i[0],i[1]),o=n||this.context.dataflow.scenegraph().root;return NMe(o,s,IHt(t))}function IHt(e){let t=null;if(e){const n=pt(e.marktype),r=pt(e.markname);t=i=>(!n.length||n.some(s=>i.marktype===s))&&(!r.length||r.some(s=>i.name===s))}return t}function kHt(e,t,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:5;e=pt(e);const i=e[e.length-1];return i===void 0||Math.hypot(i[0]-t,i[1]-n)>r?[...e,[t,n]]:e}function RHt(e){return pt(e).reduce((t,n,r)=>{let[i,s]=n;return t+=r==0?`M ${i},${s} `:r===e.length-1?" Z":`L ${i},${s} `},"")}function NHt(e,t,n){const{x:r,y:i,mark:s}=n,o=new Ts().set(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,Number.MIN_SAFE_INTEGER,Number.MIN_SAFE_INTEGER);for(const[u,l]of t)u<o.x1&&(o.x1=u),u>o.x2&&(o.x2=u),l<o.y1&&(o.y1=l),l>o.y2&&(o.y2=l);return o.translate(r,i),YLe([[o.x1,o.y1],[o.x2,o.y2]],e,s).filter(u=>DHt(u.x,u.y,t))}function DHt(e,t,n){let r=0;for(let i=0,s=n.length-1;i<n.length;s=i++){const[o,a]=n[s],[u,l]=n[i];l>t!=a>t&&e<(o-u)*(t-l)/(a-l)+u&&r++}return r&1}const UI={random(){return Bc()},cumulativeNormal:oF,cumulativeLogNormal:vee,cumulativeUniform:Eee,densityNormal:hee,densityLogNormal:yee,densityUniform:wee,quantileNormal:aF,quantileLogNormal:bee,quantileUniform:xee,sampleNormal:sF,sampleLogNormal:gee,sampleUniform:_ee,isArray:je,isBoolean:Gy,isDate:N0,isDefined(e){return e!==void 0},isNumber:lr,isObject:gt,isRegExp:DOe,isString:mt,isTuple:tF,isValid(e){return e!=null&&e===e},toBoolean:QZ,toDate(e){return JZ(e)},toNumber:ha,toString:ZZ,indexof:uHt,join:aHt,lastindexof:lHt,replace:fHt,reverse:dHt,slice:cHt,flush:ROe,lerp:POe,merge:tHt,pad:MOe,peek:Qn,pluck:oHt,span:dR,inrange:$w,truncate:LOe,rgb:W0,lab:y3,hcl:v3,hsl:m3,luminance:XH,contrast:eHt,sequence:$u,format:OVt,utcFormat:$Vt,utcParse:LVt,utcOffset:QOe,utcSequence:e3e,timeFormat:ULe,timeParse:MVt,timeOffset:XOe,timeSequence:ZOe,timeUnitSpecifier:jOe,monthFormat:FVt,monthAbbrevFormat:jVt,dayFormat:BVt,dayAbbrevFormat:UVt,quarter:COe,utcquarter:AOe,week:UOe,utcweek:HOe,dayofyear:BOe,utcdayofyear:VOe,warn:QVt,info:JVt,debug:ZVt,extent(e){return Lh(e)},inScope:XVt,intersect:YLe,clampRange:IOe,pinchDistance:iHt,pinchAngle:sHt,screen:THt,containerSize:AHt,windowSize:CHt,bandspace:hHt,setdata:DVt,pathShape:EHt,panLinear:EOe,panLog:xOe,panPow:SOe,panSymlog:TOe,zoomLinear:qZ,zoomLog:WZ,zoomPow:cM,zoomSymlog:GZ,encode:PVt,modify:rHt,lassoAppend:kHt,lassoPath:RHt,intersectLasso:NHt},PHt=["view","item","group","xy","x","y"],OHt="event.vega.",KLe="this.",kne={},XLe={forbidden:["_"],allowed:["datum","event","item"],fieldvar:"datum",globalvar:e=>`_[${rt(zLe+e)}]`,functions:$Ht,constants:$Le,visitors:kne},QH=LLe(XLe);function $Ht(e){const t=MLe(e);PHt.forEach(n=>t[n]=OHt+n);for(const n in UI)t[n]=KLe+n;return bn(t,qVt(e,UI,kne)),t}function ms(e,t,n){return arguments.length===1?UI[e]:(UI[e]=t,n&&(kne[e]=n),QH&&(QH.functions[e]=KLe+e),this)}ms("bandwidth",pHt,Xa);ms("copy",mHt,Xa);ms("domain",gHt,Xa);ms("range",vHt,Xa);ms("invert",yHt,Xa);ms("scale",bHt,Xa);ms("gradient",_Ht,Xa);ms("geoArea",WVt,Xa);ms("geoBounds",GVt,Xa);ms("geoCentroid",YVt,Xa);ms("geoShape",wHt,Xa);ms("geoScale",KVt,Xa);ms("indata",NVt,HVt);ms("data",BLe,Sne);ms("treePath",xHt,Sne);ms("treeAncestors",SHt,Sne);ms("vlSelectionTest",xVt,xne);ms("vlSelectionIdTest",CVt,xne);ms("vlSelectionResolve",IVt,xne);ms("vlSelectionTuples",AVt);function jh(e,t){const n={};let r;try{e=mt(e)?e:rt(e)+"",r=wne(e)}catch{Le("Expression parse error: "+e)}r.visit(s=>{if(s.type!==ILe)return;const o=s.callee.name,a=XLe.visitors[o];a&&a(o,s.arguments,t,n)});const i=QH(r);return i.globals.forEach(s=>{const o=zLe+s;!jt(n,o)&&t.getSignal(s)&&(n[o]=t.signalRef(s))}),{$expr:bn({code:i.code},t.options.ast?{ast:r}:null),$fields:i.fields,$params:n}}function MHt(e){const t=this,n=e.operators||[];return e.background&&(t.background=e.background),e.eventConfig&&(t.eventConfig=e.eventConfig),e.locale&&(t.locale=e.locale),n.forEach(r=>t.parseOperator(r)),n.forEach(r=>t.parseOperatorParameters(r)),(e.streams||[]).forEach(r=>t.parseStream(r)),(e.updates||[]).forEach(r=>t.parseUpdate(r)),t.resolve()}const LHt=ed(["rule"]),Wme=ed(["group","image","rect"]);function FHt(e,t){let n="";return LHt[t]||(e.x2&&(e.x?(Wme[t]&&(n+="if(o.x>o.x2)$=o.x,o.x=o.x2,o.x2=$;"),n+="o.width=o.x2-o.x;"):n+="o.x=o.x2-(o.width||0);"),e.xc&&(n+="o.x=o.xc-(o.width||0)/2;"),e.y2&&(e.y?(Wme[t]&&(n+="if(o.y>o.y2)$=o.y,o.y=o.y2,o.y2=$;"),n+="o.height=o.y2-o.y;"):n+="o.y=o.y2-(o.height||0);"),e.yc&&(n+="o.y=o.yc-(o.height||0)/2;")),n}function Rne(e){return(e+"").toLowerCase()}function jHt(e){return Rne(e)==="operator"}function BHt(e){return Rne(e)==="collect"}function e2(e,t,n){n.endsWith(";")||(n="return("+n+");");const r=Function(...t.concat(n));return e&&e.functions?r.bind(e.functions):r}function UHt(e,t,n,r){return`((u = ${e}) < (v = ${t}) || u == null) && v != null ? ${n}
  : (u > v || v == null) && u != null ? ${r}
  : ((v = v instanceof Date ? +v : v), (u = u instanceof Date ? +u : u)) !== u && v === v ? ${n}
  : v !== v && u === u ? ${r} : `}var zHt={operator:(e,t)=>e2(e,["_"],t.code),parameter:(e,t)=>e2(e,["datum","_"],t.code),event:(e,t)=>e2(e,["event"],t.code),handler:(e,t)=>{const n=`var datum=event.item&&event.item.datum;return ${t.code};`;return e2(e,["_","event"],n)},encode:(e,t)=>{const{marktype:n,channels:r}=t;let i="var o=item,datum=o.datum,m=0,$;";for(const s in r){const o="o["+rt(s)+"]";i+=`$=${r[s].code};if(${o}!==$)${o}=$,m=1;`}return i+=FHt(r,n),i+="return m;",e2(e,["item","_"],i)},codegen:{get(e){const t=`[${e.map(rt).join("][")}]`,n=Function("_",`return _${t};`);return n.path=t,n},comparator(e,t){let n;const r=(s,o)=>{const a=t[o];let u,l;return s.path?(u=`a${s.path}`,l=`b${s.path}`):((n=n||{})["f"+o]=s,u=`this.f${o}(a)`,l=`this.f${o}(b)`),UHt(u,l,-a,a)},i=Function("a","b","var u, v; return "+e.map(r).join("")+"0;");return n?i.bind(n):i}}};function VHt(e){const t=this;jHt(e.type)||!e.type?t.operator(e,e.update?t.operatorExpression(e.update):null):t.transform(e,e.type)}function HHt(e){const t=this;if(e.params){const n=t.get(e.id);n||Le("Invalid operator id: "+e.id),t.dataflow.connect(n,n.parameters(t.parseParameters(e.params),e.react,e.initonly))}}function qHt(e,t){t=t||{};const n=this;for(const r in e){const i=e[r];t[r]=je(i)?i.map(s=>Gme(s,n,t)):Gme(i,n,t)}return t}function Gme(e,t,n){if(!e||!gt(e))return e;for(let r=0,i=Yme.length,s;r<i;++r)if(s=Yme[r],jt(e,s.key))return s.parse(e,t,n);return e}var Yme=[{key:"$ref",parse:WHt},{key:"$key",parse:YHt},{key:"$expr",parse:GHt},{key:"$field",parse:KHt},{key:"$encode",parse:QHt},{key:"$compare",parse:XHt},{key:"$context",parse:JHt},{key:"$subflow",parse:ZHt},{key:"$tupleid",parse:eqt}];function WHt(e,t){return t.get(e.$ref)||Le("Operator not defined: "+e.$ref)}function GHt(e,t,n){e.$params&&t.parseParameters(e.$params,n);const r="e:"+e.$expr.code;return t.fn[r]||(t.fn[r]=ul(t.parameterExpression(e.$expr),e.$fields))}function YHt(e,t){const n="k:"+e.$key+"_"+!!e.$flat;return t.fn[n]||(t.fn[n]=XZ(e.$key,e.$flat,t.expr.codegen))}function KHt(e,t){if(!e.$field)return null;const n="f:"+e.$field+"_"+e.$name;return t.fn[n]||(t.fn[n]=Lc(e.$field,e.$name,t.expr.codegen))}function XHt(e,t){const n="c:"+e.$compare+"_"+e.$order,r=pt(e.$compare).map(i=>i&&i.$tupleid?Lt:i);return t.fn[n]||(t.fn[n]=YZ(r,e.$order,t.expr.codegen))}function QHt(e,t){const n=e.$encode,r={};for(const i in n){const s=n[i];r[i]=ul(t.encodeExpression(s.$expr),s.$fields),r[i].output=s.$output}return r}function JHt(e,t){return t}function ZHt(e,t){const n=e.$subflow;return function(r,i,s){const o=t.fork().parse(n),a=o.get(n.operators[0].id),u=o.signals.parent;return u&&u.set(s),a.detachSubflow=()=>t.detach(o),a}}function eqt(){return Lt}function tqt(e){var t=this,n=e.filter!=null?t.eventExpression(e.filter):void 0,r=e.stream!=null?t.get(e.stream):void 0,i;e.source?r=t.events(e.source,e.type,n):e.merge&&(i=e.merge.map(s=>t.get(s)),r=i[0].merge.apply(i[0],i.slice(1))),e.between&&(i=e.between.map(s=>t.get(s)),r=r.between(i[0],i[1])),e.filter&&(r=r.filter(n)),e.throttle!=null&&(r=r.throttle(+e.throttle)),e.debounce!=null&&(r=r.debounce(+e.debounce)),r==null&&Le("Invalid stream definition: "+JSON.stringify(e)),e.consume&&r.consume(!0),t.stream(e,r)}function nqt(e){var t=this,n=gt(n=e.source)?n.$ref:n,r=t.get(n),i=null,s=e.update,o=void 0;r||Le("Source not defined: "+e.source),i=e.target&&e.target.$expr?t.eventExpression(e.target.$expr):t.get(e.target),s&&s.$expr&&(s.$params&&(o=t.parseParameters(s.$params)),s=t.handlerExpression(s.$expr)),t.update(e,r,i,s,o)}const rqt={skip:!0};function iqt(e){var t=this,n={};if(e.signals){var r=n.signals={};Object.keys(t.signals).forEach(s=>{const o=t.signals[s];e.signals(s,o)&&(r[s]=o.value)})}if(e.data){var i=n.data={};Object.keys(t.data).forEach(s=>{const o=t.data[s];e.data(s,o)&&(i[s]=o.input.value)})}return t.subcontext&&e.recurse!==!1&&(n.subcontext=t.subcontext.map(s=>s.getState(e))),n}function sqt(e){var t=this,n=t.dataflow,r=e.data,i=e.signals;Object.keys(i||{}).forEach(s=>{n.update(t.signals[s],i[s],rqt)}),Object.keys(r||{}).forEach(s=>{n.pulse(t.data[s].input,n.changeset().remove(Fc).insert(r[s]))}),(e.subcontext||[]).forEach((s,o)=>{const a=t.subcontext[o];a&&a.setState(s)})}function QLe(e,t,n,r){return new JLe(e,t,n,r)}function JLe(e,t,n,r){this.dataflow=e,this.transforms=t,this.events=e.events.bind(e),this.expr=r||zHt,this.signals={},this.scales={},this.nodes={},this.data={},this.fn={},n&&(this.functions=Object.create(n),this.functions.context=this)}function Kme(e){this.dataflow=e.dataflow,this.transforms=e.transforms,this.events=e.events,this.expr=e.expr,this.signals=Object.create(e.signals),this.scales=Object.create(e.scales),this.nodes=Object.create(e.nodes),this.data=Object.create(e.data),this.fn=Object.create(e.fn),e.functions&&(this.functions=Object.create(e.functions),this.functions.context=this)}JLe.prototype=Kme.prototype={fork(){const e=new Kme(this);return(this.subcontext||(this.subcontext=[])).push(e),e},detach(e){this.subcontext=this.subcontext.filter(n=>n!==e);const t=Object.keys(e.nodes);for(const n of t)e.nodes[n]._targets=null;for(const n of t)e.nodes[n].detach();e.nodes=null},get(e){return this.nodes[e]},set(e,t){return this.nodes[e]=t},add(e,t){const n=this,r=n.dataflow,i=e.value;if(n.set(e.id,t),BHt(e.type)&&i&&(i.$ingest?r.ingest(t,i.$ingest,i.$format):i.$request?r.preload(t,i.$request,i.$format):r.pulse(t,r.changeset().insert(i))),e.root&&(n.root=t),e.parent){let s=n.get(e.parent.$ref);s?(r.connect(s,[t]),t.targets().add(s)):(n.unresolved=n.unresolved||[]).push(()=>{s=n.get(e.parent.$ref),r.connect(s,[t]),t.targets().add(s)})}if(e.signal&&(n.signals[e.signal]=t),e.scale&&(n.scales[e.scale]=t),e.data)for(const s in e.data){const o=n.data[s]||(n.data[s]={});e.data[s].forEach(a=>o[a]=t)}},resolve(){return(this.unresolved||[]).forEach(e=>e()),delete this.unresolved,this},operator(e,t){this.add(e,this.dataflow.add(e.value,t))},transform(e,t){this.add(e,this.dataflow.add(this.transforms[Rne(t)]))},stream(e,t){this.set(e.id,t)},update(e,t,n,r,i){this.dataflow.on(t,n,r,i,e.options)},operatorExpression(e){return this.expr.operator(this,e)},parameterExpression(e){return this.expr.parameter(this,e)},eventExpression(e){return this.expr.event(this,e)},handlerExpression(e){return this.expr.handler(this,e)},encodeExpression(e){return this.expr.encode(this,e)},parse:MHt,parseOperator:VHt,parseOperatorParameters:HHt,parseParameters:qHt,parseStream:tqt,parseUpdate:nqt,getState:iqt,setState:sqt};function oqt(e){const t=e.container();t&&(t.setAttribute("role","graphics-document"),t.setAttribute("aria-roleDescription","visualization"),ZLe(t,e.description()))}function ZLe(e,t){e&&(t==null?e.removeAttribute("aria-label"):e.setAttribute("aria-label",t))}function aqt(e){e.add(null,t=>(e._background=t.bg,e._resize=1,t.bg),{bg:e._signals.background})}const vB="default";function uqt(e){const t=e._signals.cursor||(e._signals.cursor=e.add({user:vB,item:null}));e.on(e.events("view","pointermove"),t,(n,r)=>{const i=t.value,s=i?mt(i)?i:i.user:vB,o=r.item&&r.item.cursor||null;return i&&s===i.user&&o==i.item?i:{user:s,item:o}}),e.add(null,function(n){let r=n.cursor,i=this.value;return mt(r)||(i=r.item,r=r.user),JH(e,r&&r!==vB?r:i||r),i},{cursor:t})}function JH(e,t){const n=e.globalCursor()?typeof document<"u"&&document.body:e.container();if(n)return t==null?n.style.removeProperty("cursor"):n.style.cursor=t}function DM(e,t){var n=e._runtime.data;return jt(n,t)||Le("Unrecognized data set: "+t),n[t]}function lqt(e,t){return arguments.length<2?DM(this,e).values.value:DF.call(this,e,i_().remove(Fc).insert(t))}function DF(e,t){_3e(t)||Le("Second argument to changes must be a changeset.");const n=DM(this,e);return n.modified=!0,this.pulse(n.input,t)}function cqt(e,t){return DF.call(this,e,i_().insert(t))}function fqt(e,t){return DF.call(this,e,i_().remove(t))}function e6e(e){var t=e.padding();return Math.max(0,e._viewWidth+t.left+t.right)}function t6e(e){var t=e.padding();return Math.max(0,e._viewHeight+t.top+t.bottom)}function PF(e){var t=e.padding(),n=e._origin;return[t.left+n[0],t.top+n[1]]}function dqt(e){var t=PF(e),n=e6e(e),r=t6e(e);e._renderer.background(e.background()),e._renderer.resize(n,r,t),e._handler.origin(t),e._resizeListeners.forEach(i=>{try{i(n,r)}catch(s){e.error(s)}})}function hqt(e,t,n){var r=e._renderer,i=r&&r.canvas(),s,o,a;return i&&(a=PF(e),o=t.changedTouches?t.changedTouches[0]:t,s=SF(o,i),s[0]-=a[0],s[1]-=a[1]),t.dataflow=e,t.item=n,t.vega=pqt(e,n,s),t}function pqt(e,t,n){const r=t?t.mark.marktype==="group"?t:t.mark.group:null;function i(o){var a=r,u;if(o){for(u=t;u;u=u.mark.group)if(u.mark.name===o){a=u;break}}return a&&a.mark&&a.mark.interactive?a:{}}function s(o){if(!o)return n;mt(o)&&(o=i(o));const a=n.slice();for(;o;)a[0]-=o.x||0,a[1]-=o.y||0,o=o.mark&&o.mark.group;return a}return{view:Sa(e),item:Sa(t||{}),group:i,xy:s,x:o=>s(o)[0],y:o=>s(o)[1]}}const Xme="view",mqt="timer",gqt="window",yqt={trap:!1};function vqt(e){const t=bn({defaults:{}},e),n=(r,i)=>{i.forEach(s=>{je(r[s])&&(r[s]=ed(r[s]))})};return n(t.defaults,["prevent","allow"]),n(t,["view","window","selector"]),t}function n6e(e,t,n,r){e._eventListeners.push({type:n,sources:pt(t),handler:r})}function bqt(e,t){var n=e._eventConfig.defaults,r=n.prevent,i=n.allow;return r===!1||i===!0?!1:r===!0||i===!1?!0:r?r[t]:i?!i[t]:e.preventDefault()}function OD(e,t,n){const r=e._eventConfig&&e._eventConfig[t];return r===!1||gt(r)&&!r[n]?(e.warn(`Blocked ${t} ${n} event listener.`),!1):!0}function _qt(e,t,n){var r=this,i=new iF(n),s=function(l,c){r.runAsync(null,()=>{e===Xme&&bqt(r,t)&&l.preventDefault(),i.receive(hqt(r,l,c))})},o;if(e===mqt)OD(r,"timer",t)&&r.timer(s,t);else if(e===Xme)OD(r,"view",t)&&r.addEventListener(t,s,yqt);else if(e===gqt?OD(r,"window",t)&&typeof window<"u"&&(o=[window]):typeof document<"u"&&OD(r,"selector",t)&&(o=Array.from(document.querySelectorAll(e))),!o)r.warn("Can not resolve event source: "+e);else{for(var a=0,u=o.length;a<u;++a)o[a].addEventListener(t,s);n6e(r,o,t,s)}return i}function Qme(e){return e.item}function Jme(e){return e.item.mark.source}function Zme(e){return function(t,n){return n.vega.view().changeset().encode(n.item,e)}}function wqt(e,t){return e=[e||"hover"],t=[t||"update",e[0]],this.on(this.events("view","pointerover",Qme),Jme,Zme(e)),this.on(this.events("view","pointerout",Qme),Jme,Zme(t)),this}function Eqt(){var e=this._tooltip,t=this._timers,n=this._handler.handlers(),r=this._eventListeners,i,s,o,a,u;for(i=t.length;--i>=0;)t[i].stop();for(i=r.length;--i>=0;)for(o=r[i],s=o.sources.length;--s>=0;)o.sources[s].removeEventListener(o.type,o.handler);for(e&&e.call(this,this._handler,null,null,null),i=n.length;--i>=0;)u=n[i].type,a=n[i].handler,this._handler.off(u,a);return this}function Pl(e,t,n){const r=document.createElement(e);for(const i in t)r.setAttribute(i,t[i]);return n!=null&&(r.textContent=n),r}const xqt="vega-bind",Sqt="vega-bind-name",Tqt="vega-bind-radio";function Cqt(e,t,n){if(!t)return;const r=n.param;let i=n.state;return i||(i=n.state={elements:null,active:!1,set:null,update:o=>{o!=e.signal(r.signal)&&e.runAsync(null,()=>{i.source=!0,e.signal(r.signal,o)})}},r.debounce&&(i.update=KZ(r.debounce,i.update))),(r.input==null&&r.element?Aqt:kqt)(i,t,r,e),i.active||(e.on(e._signals[r.signal],null,()=>{i.source?i.source=!1:i.set(e.signal(r.signal))}),i.active=!0),i}function Aqt(e,t,n,r){const i=n.event||"input",s=()=>e.update(t.value);r.signal(n.signal,t.value),t.addEventListener(i,s),n6e(r,t,i,s),e.set=o=>{t.value=o,t.dispatchEvent(Iqt(i))}}function Iqt(e){return typeof Event<"u"?new Event(e):{type:e}}function kqt(e,t,n,r){const i=r.signal(n.signal),s=Pl("div",{class:xqt}),o=n.input==="radio"?s:s.appendChild(Pl("label"));o.appendChild(Pl("span",{class:Sqt},n.name||n.signal)),t.appendChild(s);let a=Rqt;switch(n.input){case"checkbox":a=Nqt;break;case"select":a=Dqt;break;case"radio":a=Pqt;break;case"range":a=Oqt;break}a(e,o,n,i)}function Rqt(e,t,n,r){const i=Pl("input");for(const s in n)s!=="signal"&&s!=="element"&&i.setAttribute(s==="input"?"type":s,n[s]);i.setAttribute("name",n.signal),i.value=r,t.appendChild(i),i.addEventListener("input",()=>e.update(i.value)),e.elements=[i],e.set=s=>i.value=s}function Nqt(e,t,n,r){const i={type:"checkbox",name:n.signal};r&&(i.checked=!0);const s=Pl("input",i);t.appendChild(s),s.addEventListener("change",()=>e.update(s.checked)),e.elements=[s],e.set=o=>s.checked=!!o||null}function Dqt(e,t,n,r){const i=Pl("select",{name:n.signal}),s=n.labels||[];n.options.forEach((o,a)=>{const u={value:o};PM(o,r)&&(u.selected=!0),i.appendChild(Pl("option",u,(s[a]||o)+""))}),t.appendChild(i),i.addEventListener("change",()=>{e.update(n.options[i.selectedIndex])}),e.elements=[i],e.set=o=>{for(let a=0,u=n.options.length;a<u;++a)if(PM(n.options[a],o)){i.selectedIndex=a;return}}}function Pqt(e,t,n,r){const i=Pl("span",{class:Tqt}),s=n.labels||[];t.appendChild(i),e.elements=n.options.map((o,a)=>{const u={type:"radio",name:n.signal,value:o};PM(o,r)&&(u.checked=!0);const l=Pl("input",u);l.addEventListener("change",()=>e.update(o));const c=Pl("label",{},(s[a]||o)+"");return c.prepend(l),i.appendChild(c),l}),e.set=o=>{const a=e.elements,u=a.length;for(let l=0;l<u;++l)PM(a[l].value,o)&&(a[l].checked=!0)}}function Oqt(e,t,n,r){r=r!==void 0?r:(+n.max+ +n.min)/2;const i=n.max!=null?n.max:Math.max(100,+r)||100,s=n.min||Math.min(0,i,+r)||0,o=n.step||q0(s,i,100),a=Pl("input",{type:"range",name:n.signal,min:s,max:i,step:o});a.value=r;const u=Pl("span",{},+r);t.appendChild(a),t.appendChild(u);const l=()=>{u.textContent=a.value,e.update(+a.value)};a.addEventListener("input",l),a.addEventListener("change",l),e.elements=[a],e.set=c=>{a.value=c,u.textContent=c}}function PM(e,t){return e===t||e+""==t+""}function r6e(e,t,n,r,i,s){return t=t||new r(e.loader()),t.initialize(n,e6e(e),t6e(e),PF(e),i,s).background(e.background())}function Nne(e,t){return t?function(){try{t.apply(this,arguments)}catch(n){e.error(n)}}:null}function $qt(e,t,n,r){const i=new r(e.loader(),Nne(e,e.tooltip())).scene(e.scenegraph().root).initialize(n,PF(e),e);return t&&t.handlers().forEach(s=>{i.on(s.type,s.handler)}),i}function Mqt(e,t){const n=this,r=n._renderType,i=n._eventConfig.bind,s=TF(r);e=n._el=e?bB(n,e,!0):null,oqt(n),s||n.error("Unrecognized renderer type: "+r);const o=s.handler||IR,a=e?s.renderer:s.headless;return n._renderer=a?r6e(n,n._renderer,e,a):null,n._handler=$qt(n,n._handler,e,o),n._redraw=!0,e&&i!=="none"&&(t=t?n._elBind=bB(n,t,!0):e.appendChild(Pl("form",{class:"vega-bindings"})),n._bind.forEach(u=>{u.param.element&&i!=="container"&&(u.element=bB(n,u.param.element,!!u.param.input))}),n._bind.forEach(u=>{Cqt(n,u.element||t,u)})),n}function bB(e,t,n){if(typeof t=="string")if(typeof document<"u"){if(t=document.querySelector(t),!t)return e.error("Signal bind element not found: "+t),null}else return e.error("DOM document instance not found."),null;if(t&&n)try{t.textContent=""}catch(r){t=null,e.error(r)}return t}const t2=e=>+e||0,Lqt=e=>({top:e,bottom:e,left:e,right:e});function ege(e){return gt(e)?{top:t2(e.top),bottom:t2(e.bottom),left:t2(e.left),right:t2(e.right)}:Lqt(t2(e))}async function Dne(e,t,n,r){const i=TF(t),s=i&&i.headless;return s||Le("Unrecognized renderer type: "+t),await e.runAsync(),r6e(e,null,null,s,n,r).renderAsync(e._scenegraph.root)}async function Fqt(e,t){e!==o0.Canvas&&e!==o0.SVG&&e!==o0.PNG&&Le("Unrecognized image type: "+e);const n=await Dne(this,e,t);return e===o0.SVG?jqt(n.svg(),"image/svg+xml"):n.canvas().toDataURL("image/png")}function jqt(e,t){const n=new Blob([e],{type:t});return window.URL.createObjectURL(n)}async function Bqt(e,t){return(await Dne(this,o0.Canvas,e,t)).canvas()}async function Uqt(e){return(await Dne(this,o0.SVG,e)).svg()}function zqt(e,t,n){return QLe(e,wx,UI,n).parse(t)}function Vqt(e){var t=this._runtime.scales;return jt(t,e)||Le("Unrecognized scale or projection: "+e),t[e].value}var i6e="width",s6e="height",Pne="padding",tge={skip:!0};function o6e(e,t){var n=e.autosize(),r=e.padding();return t-(n&&n.contains===Pne?r.left+r.right:0)}function a6e(e,t){var n=e.autosize(),r=e.padding();return t-(n&&n.contains===Pne?r.top+r.bottom:0)}function Hqt(e){var t=e._signals,n=t[i6e],r=t[s6e],i=t[Pne];function s(){e._autosize=e._resize=1}e._resizeWidth=e.add(null,a=>{e._width=a.size,e._viewWidth=o6e(e,a.size),s()},{size:n}),e._resizeHeight=e.add(null,a=>{e._height=a.size,e._viewHeight=a6e(e,a.size),s()},{size:r});const o=e.add(null,s,{pad:i});e._resizeWidth.rank=n.rank+1,e._resizeHeight.rank=r.rank+1,o.rank=i.rank+1}function qqt(e,t,n,r,i,s){this.runAfter(o=>{let a=0;o._autosize=0,o.width()!==n&&(a=1,o.signal(i6e,n,tge),o._resizeWidth.skip(!0)),o.height()!==r&&(a=1,o.signal(s6e,r,tge),o._resizeHeight.skip(!0)),o._viewWidth!==e&&(o._resize=1,o._viewWidth=e),o._viewHeight!==t&&(o._resize=1,o._viewHeight=t),(o._origin[0]!==i[0]||o._origin[1]!==i[1])&&(o._resize=1,o._origin=i),a&&o.run("enter"),s&&o.runAfter(u=>u.resize())},!1,1)}function Wqt(e){return this._runtime.getState(e||{data:Gqt,signals:Yqt,recurse:!0})}function Gqt(e,t){return t.modified&&je(t.input.value)&&!e.startsWith("_:vega:_")}function Yqt(e,t){return!(e==="parent"||t instanceof wx.proxy)}function Kqt(e){return this.runAsync(null,t=>{t._trigger=!1,t._runtime.setState(e)},t=>{t._trigger=!0}),this}function Xqt(e,t){function n(r){e({timestamp:Date.now(),elapsed:r})}this._timers.push(Cct(n,t))}function Qqt(e,t,n,r){const i=e.element();i&&i.setAttribute("title",Jqt(r))}function Jqt(e){return e==null?"":je(e)?u6e(e):gt(e)&&!N0(e)?Zqt(e):e+""}function Zqt(e){return Object.keys(e).map(t=>{const n=e[t];return t+": "+(je(n)?u6e(n):l6e(n))}).join(`
`)}function u6e(e){return"["+e.map(l6e).join(", ")+"]"}function l6e(e){return je(e)?"[]":gt(e)&&!N0(e)?"{}":e}function eWt(){if(this.renderer()==="canvas"&&this._renderer._canvas){let e=null;const t=()=>{e!=null&&e();const n=matchMedia(`(resolution: ${window.devicePixelRatio}dppx)`);n.addEventListener("change",t),e=()=>{n.removeEventListener("change",t)},this._renderer._canvas.getContext("2d").pixelRatio=window.devicePixelRatio||1,this._redraw=!0,this._resize=1,this.resize().runAsync()};t()}}function c6e(e,t){const n=this;if(t=t||{},yE.call(n),t.loader&&n.loader(t.loader),t.logger&&n.logger(t.logger),t.logLevel!=null&&n.logLevel(t.logLevel),t.locale||e.locale){const s=bn({},e.locale,t.locale);n.locale(c3e(s.number,s.time))}n._el=null,n._elBind=null,n._renderType=t.renderer||o0.Canvas,n._scenegraph=new iMe;const r=n._scenegraph.root;n._renderer=null,n._tooltip=t.tooltip||Qqt,n._redraw=!0,n._handler=new IR().scene(r),n._globalCursor=!1,n._preventDefault=!1,n._timers=[],n._eventListeners=[],n._resizeListeners=[],n._eventConfig=vqt(e.eventConfig),n.globalCursor(n._eventConfig.globalCursor);const i=zqt(n,e,t.expr);n._runtime=i,n._signals=i.signals,n._bind=(e.bindings||[]).map(s=>({state:null,param:bn({},s)})),i.root&&i.root.set(r),r.source=i.data.root.input,n.pulse(i.data.root.input,n.changeset().insert(r.items)),n._width=n.width(),n._height=n.height(),n._viewWidth=o6e(n,n._width),n._viewHeight=a6e(n,n._height),n._origin=[0,0],n._resize=0,n._autosize=1,Hqt(n),aqt(n),uqt(n),n.description(e.description),t.hover&&n.hover(),t.container&&n.initialize(t.container,t.bind),t.watchPixelRatio&&n._watchPixelRatio()}function $D(e,t){return jt(e._signals,t)?e._signals[t]:Le("Unrecognized signal name: "+rt(t))}function f6e(e,t){const n=(e._targets||[]).filter(r=>r._update&&r._update.handler===t);return n.length?n[0]:null}function nge(e,t,n,r){let i=f6e(n,r);return i||(i=Nne(e,()=>r(t,n.value)),i.handler=r,e.on(n,null,i)),e}function rge(e,t,n){const r=f6e(t,n);return r&&t._targets.remove(r),e}lt(c6e,yE,{async evaluate(e,t,n){if(await yE.prototype.evaluate.call(this,e,t),this._redraw||this._resize)try{this._renderer&&(this._resize&&(this._resize=0,dqt(this)),await this._renderer.renderAsync(this._scenegraph.root)),this._redraw=!1}catch(r){this.error(r)}return n&&YP(this,n),this},dirty(e){this._redraw=!0,this._renderer&&this._renderer.dirty(e)},description(e){if(arguments.length){const t=e!=null?e+"":null;return t!==this._desc&&ZLe(this._el,this._desc=t),this}return this._desc},container(){return this._el},scenegraph(){return this._scenegraph},origin(){return this._origin.slice()},signal(e,t,n){const r=$D(this,e);return arguments.length===1?r.value:this.update(r,t,n)},width(e){return arguments.length?this.signal("width",e):this.signal("width")},height(e){return arguments.length?this.signal("height",e):this.signal("height")},padding(e){return arguments.length?this.signal("padding",ege(e)):ege(this.signal("padding"))},autosize(e){return arguments.length?this.signal("autosize",e):this.signal("autosize")},background(e){return arguments.length?this.signal("background",e):this.signal("background")},renderer(e){return arguments.length?(TF(e)||Le("Unrecognized renderer type: "+e),e!==this._renderType&&(this._renderType=e,this._resetRenderer()),this):this._renderType},tooltip(e){return arguments.length?(e!==this._tooltip&&(this._tooltip=e,this._resetRenderer()),this):this._tooltip},loader(e){return arguments.length?(e!==this._loader&&(yE.prototype.loader.call(this,e),this._resetRenderer()),this):this._loader},resize(){return this._autosize=1,this.touch($D(this,"autosize"))},_resetRenderer(){this._renderer&&(this._renderer=null,this.initialize(this._el,this._elBind))},_resizeView:qqt,addEventListener(e,t,n){let r=t;return n&&n.trap===!1||(r=Nne(this,t),r.raw=t),this._handler.on(e,r),this},removeEventListener(e,t){for(var n=this._handler.handlers(e),r=n.length,i,s;--r>=0;)if(s=n[r].type,i=n[r].handler,e===s&&(t===i||t===i.raw)){this._handler.off(s,i);break}return this},addResizeListener(e){const t=this._resizeListeners;return t.includes(e)||t.push(e),this},removeResizeListener(e){var t=this._resizeListeners,n=t.indexOf(e);return n>=0&&t.splice(n,1),this},addSignalListener(e,t){return nge(this,e,$D(this,e),t)},removeSignalListener(e,t){return rge(this,$D(this,e),t)},addDataListener(e,t){return nge(this,e,DM(this,e).values,t)},removeDataListener(e,t){return rge(this,DM(this,e).values,t)},globalCursor(e){if(arguments.length){if(this._globalCursor!==!!e){const t=JH(this,null);this._globalCursor=!!e,t&&JH(this,t)}return this}else return this._globalCursor},preventDefault(e){return arguments.length?(this._preventDefault=e,this):this._preventDefault},timer:Xqt,events:_qt,finalize:Eqt,hover:wqt,data:lqt,change:DF,insert:cqt,remove:fqt,scale:Vqt,initialize:Mqt,toImageURL:Fqt,toCanvas:Bqt,toSVG:Uqt,getState:Wqt,setState:Kqt,_watchPixelRatio:eWt});const tWt="view",OM="[",$M="]",d6e="{",h6e="}",nWt=":",p6e=",",rWt="@",iWt=">",sWt=/[[\]{}]/,oWt={"*":1,arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1};let m6e,g6e;function Ky(e,t,n){return m6e=t||tWt,g6e=n||oWt,y6e(e.trim()).map(ZH)}function aWt(e){return g6e[e]}function tA(e,t,n,r,i){const s=e.length;let o=0,a;for(;t<s;++t){if(a=e[t],!o&&a===n)return t;i&&i.indexOf(a)>=0?--o:r&&r.indexOf(a)>=0&&++o}return t}function y6e(e){const t=[],n=e.length;let r=0,i=0;for(;i<n;)i=tA(e,i,p6e,OM+d6e,$M+h6e),t.push(e.substring(r,i).trim()),r=++i;if(t.length===0)throw"Empty event selector: "+e;return t}function ZH(e){return e[0]==="["?uWt(e):lWt(e)}function uWt(e){const t=e.length;let n=1,r;if(n=tA(e,n,$M,OM,$M),n===t)throw"Empty between selector: "+e;if(r=y6e(e.substring(1,n)),r.length!==2)throw"Between selector must have two elements: "+e;if(e=e.slice(n+1).trim(),e[0]!==iWt)throw"Expected '>' after between selector: "+e;r=r.map(ZH);const i=ZH(e.slice(1).trim());return i.between?{between:r,stream:i}:(i.between=r,i)}function lWt(e){const t={source:m6e},n=[];let r=[0,0],i=0,s=0,o=e.length,a=0,u,l;if(e[o-1]===h6e){if(a=e.lastIndexOf(d6e),a>=0){try{r=cWt(e.substring(a+1,o-1))}catch{throw"Invalid throttle specification: "+e}e=e.slice(0,a).trim(),o=e.length}else throw"Unmatched right brace: "+e;a=0}if(!o)throw e;if(e[0]===rWt&&(i=++a),u=tA(e,a,nWt),u<o&&(n.push(e.substring(s,u).trim()),s=a=++u),a=tA(e,a,OM),a===o)n.push(e.substring(s,o).trim());else if(n.push(e.substring(s,a).trim()),l=[],s=++a,s===o)throw"Unmatched left bracket: "+e;for(;a<o;){if(a=tA(e,a,$M),a===o)throw"Unmatched left bracket: "+e;if(l.push(e.substring(s,a).trim()),a<o-1&&e[++a]!==OM)throw"Expected left bracket: "+e;s=++a}if(!(o=n.length)||sWt.test(n[o-1]))throw"Invalid event selector: "+e;return o>1?(t.type=n[1],i?t.markname=n[0].slice(1):aWt(n[0])?t.marktype=n[0]:t.source=n[0]):t.type=n[0],t.type.slice(-1)==="!"&&(t.consume=!0,t.type=t.type.slice(0,-1)),l!=null&&(t.filter=l),r[0]&&(t.throttle=r[0]),r[1]&&(t.debounce=r[1]),t}function cWt(e){const t=e.split(p6e);if(!e.length||t.length>2)throw e;return t.map(n=>{const r=+n;if(r!==r)throw e;return r})}function fWt(e){return gt(e)?e:{type:e||"pad"}}const n2=e=>+e||0,dWt=e=>({top:e,bottom:e,left:e,right:e});function hWt(e){return gt(e)?e.signal?e:{top:n2(e.top),bottom:n2(e.bottom),left:n2(e.left),right:n2(e.right)}:dWt(n2(e))}const so=e=>gt(e)&&!je(e)?bn({},e):{value:e};function ige(e,t,n,r){return n!=null?(gt(n)&&!je(n)||je(n)&&n.length&&gt(n[0])?e.update[t]=n:e[r||"enter"][t]={value:n},1):0}function jo(e,t,n){for(const r in t)ige(e,r,t[r]);for(const r in n)ige(e,r,n[r],"update")}function QS(e,t,n){for(const r in t)n&&jt(n,r)||(e[r]=bn(e[r]||{},t[r]));return e}function dw(e,t){return t&&(t.enter&&t.enter[e]||t.update&&t.update[e])}const One="mark",$ne="frame",Mne="scope",pWt="axis",mWt="axis-domain",gWt="axis-grid",yWt="axis-label",vWt="axis-tick",bWt="axis-title",_Wt="legend",wWt="legend-band",EWt="legend-entry",xWt="legend-gradient",v6e="legend-label",SWt="legend-symbol",TWt="legend-title",CWt="title",AWt="title-text",IWt="title-subtitle";function kWt(e,t,n,r,i){const s={},o={};let a,u,l,c;u="lineBreak",t==="text"&&i[u]!=null&&!dw(u,e)&&_B(s,u,i[u]),(n=="legend"||String(n).startsWith("axis"))&&(n=null),c=n===$ne?i.group:n===One?bn({},i.mark,i[t]):null;for(u in c)l=dw(u,e)||(u==="fill"||u==="stroke")&&(dw("fill",e)||dw("stroke",e)),l||_B(s,u,c[u]);pt(r).forEach(f=>{const d=i.style&&i.style[f];for(const h in d)dw(h,e)||_B(s,h,d[h])}),e=bn({},e);for(u in s)c=s[u],c.signal?(a=a||{})[u]=c:o[u]=c;return e.enter=bn(o,e.enter),a&&(e.update=bn(a,e.update)),e}function _B(e,t,n){e[t]=n&&n.signal?{signal:n.signal}:{value:n}}const b6e=e=>mt(e)?rt(e):e.signal?`(${e.signal})`:_6e(e);function OF(e){if(e.gradient!=null)return NWt(e);let t=e.signal?`(${e.signal})`:e.color?RWt(e.color):e.field!=null?_6e(e.field):e.value!==void 0?rt(e.value):void 0;return e.scale!=null&&(t=DWt(e,t)),t===void 0&&(t=null),e.exponent!=null&&(t=`pow(${t},${uO(e.exponent)})`),e.mult!=null&&(t+=`*${uO(e.mult)}`),e.offset!=null&&(t+=`+${uO(e.offset)}`),e.round&&(t=`round(${t})`),t}const MD=(e,t,n,r)=>`(${e}(${[t,n,r].map(OF).join(",")})+'')`;function RWt(e){return e.c?MD("hcl",e.h,e.c,e.l):e.h||e.s?MD("hsl",e.h,e.s,e.l):e.l||e.a?MD("lab",e.l,e.a,e.b):e.r||e.g||e.b?MD("rgb",e.r,e.g,e.b):null}function NWt(e){const t=[e.start,e.stop,e.count].map(n=>n==null?null:rt(n));for(;t.length&&Qn(t)==null;)t.pop();return t.unshift(b6e(e.gradient)),`gradient(${t.join(",")})`}function uO(e){return gt(e)?"("+OF(e)+")":e}function _6e(e){return w6e(gt(e)?e:{datum:e})}function w6e(e){let t,n,r;if(e.signal)t="datum",r=e.signal;else if(e.group||e.parent){for(n=Math.max(1,e.level||1),t="item";n-- >0;)t+=".mark.group";e.parent?(r=e.parent,t+=".datum"):r=e.group}else e.datum?(t="datum",r=e.datum):Le("Invalid field reference: "+rt(e));return e.signal||(r=mt(r)?rp(r).map(rt).join("]["):w6e(r)),t+"["+r+"]"}function DWt(e,t){const n=b6e(e.scale);return e.range!=null?t=`lerp(_range(${n}), ${+e.range})`:(t!==void 0&&(t=`_scale(${n}, ${t})`),e.band&&(t=(t?t+"+":"")+`_bandwidth(${n})`+(+e.band==1?"":"*"+uO(e.band)),e.extra&&(t=`(datum.extra ? _scale(${n}, datum.extra.value) : ${t})`)),t==null&&(t="0")),t}function PWt(e){let t="";return e.forEach(n=>{const r=OF(n);t+=n.test?`(${n.test})?${r}:`:r}),Qn(t)===":"&&(t+="null"),t}function E6e(e,t,n,r,i,s){const o={};s=s||{},s.encoders={$encode:o},e=kWt(e,t,n,r,i.config);for(const a in e)o[a]=OWt(e[a],t,s,i);return s}function OWt(e,t,n,r){const i={},s={};for(const o in e)e[o]!=null&&(i[o]=MWt($Wt(e[o]),r,n,s));return{$expr:{marktype:t,channels:i},$fields:Object.keys(s),$output:Object.keys(e)}}function $Wt(e){return je(e)?PWt(e):OF(e)}function MWt(e,t,n,r){const i=jh(e,t);return i.$fields.forEach(s=>r[s]=1),bn(n,i.$params),i.$expr}const LWt="outer",FWt=["value","update","init","react","bind"];function sge(e,t){Le(e+' for "outer" push: '+rt(t))}function x6e(e,t){const n=e.name;if(e.push===LWt)t.signals[n]||sge("No prior signal definition",n),FWt.forEach(r=>{e[r]!==void 0&&sge("Invalid property ",r)});else{const r=t.addSignal(n,e.value);e.react===!1&&(r.react=!1),e.bind&&t.addBinding(n,e.bind)}}function eq(e,t,n,r){this.id=-1,this.type=e,this.value=t,this.params=n,r&&(this.parent=r)}function $F(e,t,n,r){return new eq(e,t,n,r)}function MM(e,t){return $F("operator",e,t)}function Mt(e){const t={$ref:e.id};return e.id<0&&(e.refs=e.refs||[]).push(t),t}function zI(e,t){return t?{$field:e,$name:t}:{$field:e}}const tq=zI("key");function oge(e,t){return{$compare:e,$order:t}}function jWt(e,t){const n={$key:e};return t&&(n.$flat=!0),n}const BWt="ascending",UWt="descending";function zWt(e){return gt(e)?(e.order===UWt?"-":"+")+MF(e.op,e.field):""}function MF(e,t){return(e&&e.signal?"$"+e.signal:e||"")+(e&&t?"_":"")+(t&&t.signal?"$"+t.signal:t||"")}const Lne="scope",nq="view";function js(e){return e&&e.signal}function VWt(e){return e&&e.expr}function lO(e){if(js(e))return!0;if(gt(e)){for(const t in e)if(lO(e[t]))return!0}return!1}function vf(e,t){return e??t}function N1(e){return e&&e.signal||e}const age="timer";function VI(e,t){return(e.merge?qWt:e.stream?WWt:e.type?GWt:Le("Invalid stream specification: "+rt(e)))(e,t)}function HWt(e){return e===Lne?nq:e||nq}function qWt(e,t){const n=e.merge.map(i=>VI(i,t)),r=Fne({merge:n},e,t);return t.addStream(r).id}function WWt(e,t){const n=VI(e.stream,t),r=Fne({stream:n},e,t);return t.addStream(r).id}function GWt(e,t){let n;e.type===age?(n=t.event(age,e.throttle),e={between:e.between,filter:e.filter}):n=t.event(HWt(e.source),e.type);const r=Fne({stream:n},e,t);return Object.keys(r).length===1?n:t.addStream(r).id}function Fne(e,t,n){let r=t.between;return r&&(r.length!==2&&Le('Stream "between" parameter must have 2 entries: '+rt(t)),e.between=[VI(r[0],n),VI(r[1],n)]),r=t.filter?[].concat(t.filter):[],(t.marktype||t.markname||t.markrole)&&r.push(YWt(t.marktype,t.markname,t.markrole)),t.source===Lne&&r.push("inScope(event.item)"),r.length&&(e.filter=jh("("+r.join(")&&(")+")",n).$expr),(r=t.throttle)!=null&&(e.throttle=+r),(r=t.debounce)!=null&&(e.debounce=+r),t.consume&&(e.consume=!0),e}function YWt(e,t,n){const r="event.item";return r+(e&&e!=="*"?"&&"+r+".mark.marktype==='"+e+"'":"")+(n?"&&"+r+".mark.role==='"+n+"'":"")+(t?"&&"+r+".mark.name==='"+t+"'":"")}const KWt={code:"_.$value",ast:{type:"Identifier",value:"value"}};function XWt(e,t,n){const r=e.encode,i={target:n};let s=e.events,o=e.update,a=[];s||Le("Signal update missing events specification."),mt(s)&&(s=Ky(s,t.isSubscope()?Lne:nq)),s=pt(s).filter(u=>u.signal||u.scale?(a.push(u),0):1),a.length>1&&(a=[JWt(a)]),s.length&&a.push(s.length>1?{merge:s}:s[0]),r!=null&&(o&&Le("Signal encode and update are mutually exclusive."),o="encode(item(),"+rt(r)+")"),i.update=mt(o)?jh(o,t):o.expr!=null?jh(o.expr,t):o.value!=null?o.value:o.signal!=null?{$expr:KWt,$params:{$value:t.signalRef(o.signal)}}:Le("Invalid signal update specification."),e.force&&(i.options={force:!0}),a.forEach(u=>t.addUpdate(bn(QWt(u,t),i)))}function QWt(e,t){return{source:e.signal?t.signalRef(e.signal):e.scale?t.scaleRef(e.scale):VI(e,t)}}function JWt(e){return{signal:"["+e.map(t=>t.scale?'scale("'+t.scale+'")':t.signal)+"]"}}function ZWt(e,t){const n=t.getSignal(e.name);let r=e.update;e.init&&(r?Le("Signals can not include both init and update expressions."):(r=e.init,n.initonly=!0)),r&&(r=jh(r,t),n.update=r.$expr,n.params=r.$params),e.on&&e.on.forEach(i=>XWt(i,t,n.id))}const Vr=e=>(t,n,r)=>$F(e,n,t||void 0,r),S6e=Vr("aggregate"),eGt=Vr("axisticks"),T6e=Vr("bound"),dd=Vr("collect"),uge=Vr("compare"),tGt=Vr("datajoin"),C6e=Vr("encode"),nGt=Vr("expression"),rGt=Vr("facet"),iGt=Vr("field"),sGt=Vr("key"),oGt=Vr("legendentries"),aGt=Vr("load"),uGt=Vr("mark"),lGt=Vr("multiextent"),cGt=Vr("multivalues"),fGt=Vr("overlap"),dGt=Vr("params"),A6e=Vr("prefacet"),hGt=Vr("projection"),pGt=Vr("proxy"),mGt=Vr("relay"),I6e=Vr("render"),gGt=Vr("scale"),a_=Vr("sieve"),yGt=Vr("sortitems"),k6e=Vr("viewlayout"),vGt=Vr("values");let bGt=0;const R6e={min:"min",max:"max",count:"sum"};function _Gt(e,t){const n=e.type||"linear";g$e(n)||Le("Unrecognized scale type: "+rt(n)),t.addScale(e.name,{type:n,domain:void 0})}function wGt(e,t){const n=t.getScale(e.name).params;let r;n.domain=N6e(e.domain,e,t),e.range!=null&&(n.range=P6e(e,t,n)),e.interpolate!=null&&NGt(e.interpolate,n),e.nice!=null&&(n.nice=RGt(e.nice,t)),e.bins!=null&&(n.bins=kGt(e.bins,t));for(r in e)jt(n,r)||r==="name"||(n[r]=Tc(e[r],t))}function Tc(e,t){return gt(e)?e.signal?t.signalRef(e.signal):Le("Unsupported object: "+rt(e)):e}function cO(e,t){return e.signal?t.signalRef(e.signal):e.map(n=>Tc(n,t))}function LF(e){Le("Can not find data set: "+rt(e))}function N6e(e,t,n){if(!e){(t.domainMin!=null||t.domainMax!=null)&&Le("No scale domain defined for domainMin/domainMax to override.");return}return e.signal?n.signalRef(e.signal):(je(e)?EGt:e.fields?SGt:xGt)(e,t,n)}function EGt(e,t,n){return e.map(r=>Tc(r,n))}function xGt(e,t,n){const r=n.getData(e.data);return r||LF(e.data),Sx(t.type)?r.valuesRef(n,e.field,D6e(e.sort,!1)):b$e(t.type)?r.domainRef(n,e.field):r.extentRef(n,e.field)}function SGt(e,t,n){const r=e.data,i=e.fields.reduce((s,o)=>(o=mt(o)?{data:r,field:o}:je(o)||o.signal?TGt(o,n):o,s.push(o),s),[]);return(Sx(t.type)?CGt:b$e(t.type)?AGt:IGt)(e,n,i)}function TGt(e,t){const n="_:vega:_"+bGt++,r=dd({});if(je(e))r.value={$ingest:e};else if(e.signal){const i="setdata("+rt(n)+","+e.signal+")";r.params.input=t.signalRef(i)}return t.addDataPipeline(n,[r,a_({})]),{data:n,field:"data"}}function CGt(e,t,n){const r=D6e(e.sort,!0);let i,s;const o=n.map(l=>{const c=t.getData(l.data);return c||LF(l.data),c.countsRef(t,l.field,r)}),a={groupby:tq,pulse:o};r&&(i=r.op||"count",s=r.field?MF(i,r.field):"count",a.ops=[R6e[i]],a.fields=[t.fieldRef(s)],a.as=[s]),i=t.add(S6e(a));const u=t.add(dd({pulse:Mt(i)}));return s=t.add(vGt({field:tq,sort:t.sortRef(r),pulse:Mt(u)})),Mt(s)}function D6e(e,t){return e&&(!e.field&&!e.op?gt(e)?e.field="key":e={field:"key"}:!e.field&&e.op!=="count"?Le("No field provided for sort aggregate op: "+e.op):t&&e.field&&e.op&&!R6e[e.op]&&Le("Multiple domain scales can not be sorted using "+e.op)),e}function AGt(e,t,n){const r=n.map(i=>{const s=t.getData(i.data);return s||LF(i.data),s.domainRef(t,i.field)});return Mt(t.add(cGt({values:r})))}function IGt(e,t,n){const r=n.map(i=>{const s=t.getData(i.data);return s||LF(i.data),s.extentRef(t,i.field)});return Mt(t.add(lGt({extents:r})))}function kGt(e,t){return e.signal||je(e)?cO(e,t):t.objectProperty(e)}function RGt(e,t){return e.signal?t.signalRef(e.signal):gt(e)?{interval:Tc(e.interval),step:Tc(e.step)}:Tc(e)}function NGt(e,t){t.interpolate=Tc(e.type||e),e.gamma!=null&&(t.interpolateGamma=Tc(e.gamma))}function P6e(e,t,n){const r=t.config.range;let i=e.range;if(i.signal)return t.signalRef(i.signal);if(mt(i)){if(r&&jt(r,i))return e=bn({},e,{range:r[i]}),P6e(e,t,n);i==="width"?i=[0,{signal:"width"}]:i==="height"?i=Sx(e.type)?[0,{signal:"height"}]:[{signal:"height"},0]:Le("Unrecognized scale range value: "+rt(i))}else if(i.scheme){n.scheme=je(i.scheme)?cO(i.scheme,t):Tc(i.scheme,t),i.extent&&(n.schemeExtent=cO(i.extent,t)),i.count&&(n.schemeCount=Tc(i.count,t));return}else if(i.step){n.rangeStep=Tc(i.step,t);return}else{if(Sx(e.type)&&!je(i))return N6e(i,e,t);je(i)||Le("Unsupported range type: "+rt(i))}return i.map(s=>(je(s)?cO:Tc)(s,t))}function DGt(e,t){const n=t.config.projection||{},r={};for(const i in e)i!=="name"&&(r[i]=rq(e[i],i,t));for(const i in n)r[i]==null&&(r[i]=rq(n[i],i,t));t.addProjection(e.name,r)}function rq(e,t,n){return je(e)?e.map(r=>rq(r,t,n)):gt(e)?e.signal?n.signalRef(e.signal):t==="fit"?e:Le("Unsupported parameter object: "+rt(e)):e}const hd="top",JS="left",ZS="right",gy="bottom",O6e="center",PGt="vertical",OGt="start",$Gt="middle",MGt="end",iq="index",jne="label",LGt="offset",kx="perc",FGt="perc2",Ic="value",PR="guide-label",Bne="guide-title",jGt="group-title",BGt="group-subtitle",lge="symbol",fO="gradient",sq="discrete",oq="size",UGt="shape",zGt="fill",VGt="stroke",HGt="strokeWidth",qGt="strokeDash",WGt="opacity",Une=[oq,UGt,zGt,VGt,HGt,qGt,WGt],OR={name:1,style:1,interactive:1},tr={value:0},kc={value:1},FF="group",$6e="rect",zne="rule",GGt="symbol",u_="text";function HI(e){return e.type=FF,e.interactive=e.interactive||!1,e}function ll(e,t){const n=(r,i)=>vf(e[r],vf(t[r],i));return n.isVertical=r=>PGt===vf(e.direction,t.direction||(r?t.symbolDirection:t.gradientDirection)),n.gradientLength=()=>vf(e.gradientLength,t.gradientLength||t.gradientWidth),n.gradientThickness=()=>vf(e.gradientThickness,t.gradientThickness||t.gradientHeight),n.entryColumns=()=>vf(e.columns,vf(t.columns,+n.isVertical(!0))),n}function M6e(e,t){const n=t&&(t.update&&t.update[e]||t.enter&&t.enter[e]);return n&&n.signal?n:n?n.value:null}function YGt(e,t,n){const r=t.config.style[n];return r&&r[e]}function jF(e,t,n){return`item.anchor === '${OGt}' ? ${e} : item.anchor === '${MGt}' ? ${t} : ${n}`}const Vne=jF(rt(JS),rt(ZS),rt(O6e));function KGt(e){const t=e("tickBand");let n=e("tickOffset"),r,i;return t?t.signal?(r={signal:`(${t.signal}) === 'extent' ? 1 : 0.5`},i={signal:`(${t.signal}) === 'extent'`},gt(n)||(n={signal:`(${t.signal}) === 'extent' ? 0 : ${n}`})):t==="extent"?(r=1,i=!0,n=0):(r=.5,i=!1):(r=e("bandPosition"),i=e("tickExtra")),{extra:i,band:r,offset:n}}function L6e(e,t){return t?e?gt(e)?Object.assign({},e,{offset:L6e(e.offset,t)}):{value:e,offset:t}:t:e}function Gl(e,t){return t?(e.name=t.name,e.style=t.style||e.style,e.interactive=!!t.interactive,e.encode=QS(e.encode,t,OR)):e.interactive=!1,e}function XGt(e,t,n,r){const i=ll(e,n),s=i.isVertical(),o=i.gradientThickness(),a=i.gradientLength();let u,l,c,f,d;s?(l=[0,1],c=[0,0],f=o,d=a):(l=[0,0],c=[1,0],f=a,d=o);const h={enter:u={opacity:tr,x:tr,y:tr,width:so(f),height:so(d)},update:bn({},u,{opacity:kc,fill:{gradient:t,start:l,stop:c}}),exit:{opacity:tr}};return jo(h,{stroke:i("gradientStrokeColor"),strokeWidth:i("gradientStrokeWidth")},{opacity:i("gradientOpacity")}),Gl({type:$6e,role:xWt,encode:h},r)}function QGt(e,t,n,r,i){const s=ll(e,n),o=s.isVertical(),a=s.gradientThickness(),u=s.gradientLength();let l,c,f,d,h="";o?(l="y",f="y2",c="x",d="width",h="1-"):(l="x",f="x2",c="y",d="height");const p={opacity:tr,fill:{scale:t,field:Ic}};p[l]={signal:h+"datum."+kx,mult:u},p[c]=tr,p[f]={signal:h+"datum."+FGt,mult:u},p[d]=so(a);const m={enter:p,update:bn({},p,{opacity:kc}),exit:{opacity:tr}};return jo(m,{stroke:s("gradientStrokeColor"),strokeWidth:s("gradientStrokeWidth")},{opacity:s("gradientOpacity")}),Gl({type:$6e,role:wWt,key:Ic,from:i,encode:m},r)}const JGt=`datum.${kx}<=0?"${JS}":datum.${kx}>=1?"${ZS}":"${O6e}"`,ZGt=`datum.${kx}<=0?"${gy}":datum.${kx}>=1?"${hd}":"${$Gt}"`;function cge(e,t,n,r){const i=ll(e,t),s=i.isVertical(),o=so(i.gradientThickness()),a=i.gradientLength();let u=i("labelOverlap"),l,c,f,d,h="";const p={enter:l={opacity:tr},update:c={opacity:kc,text:{field:jne}},exit:{opacity:tr}};return jo(p,{fill:i("labelColor"),fillOpacity:i("labelOpacity"),font:i("labelFont"),fontSize:i("labelFontSize"),fontStyle:i("labelFontStyle"),fontWeight:i("labelFontWeight"),limit:vf(e.labelLimit,t.gradientLabelLimit)}),s?(l.align={value:"left"},l.baseline=c.baseline={signal:ZGt},f="y",d="x",h="1-"):(l.align=c.align={signal:JGt},l.baseline={value:"top"},f="x",d="y"),l[f]=c[f]={signal:h+"datum."+kx,mult:a},l[d]=c[d]=o,o.offset=vf(e.labelOffset,t.gradientLabelOffset)||0,u=u?{separation:i("labelSeparation"),method:u,order:"datum."+iq}:void 0,Gl({type:u_,role:v6e,style:PR,key:Ic,from:r,encode:p,overlap:u},n)}function eYt(e,t,n,r,i){const s=ll(e,t),o=n.entries,a=!!(o&&o.interactive),u=o?o.name:void 0,l=s("clipHeight"),c=s("symbolOffset"),f={data:"value"},d=`(${i}) ? datum.${LGt} : datum.${oq}`,h=l?so(l):{field:oq},p=`datum.${iq}`,m=`max(1, ${i})`;let g,y,v,b,w;h.mult=.5,g={enter:y={opacity:tr,x:{signal:d,mult:.5,offset:c},y:h},update:v={opacity:kc,x:y.x,y:y.y},exit:{opacity:tr}};let E=null,T=null;e.fill||(E=t.symbolBaseFillColor,T=t.symbolBaseStrokeColor),jo(g,{fill:s("symbolFillColor",E),shape:s("symbolType"),size:s("symbolSize"),stroke:s("symbolStrokeColor",T),strokeDash:s("symbolDash"),strokeDashOffset:s("symbolDashOffset"),strokeWidth:s("symbolStrokeWidth")},{opacity:s("symbolOpacity")}),Une.forEach(k=>{e[k]&&(v[k]=y[k]={scale:e[k],field:Ic})});const S=Gl({type:GGt,role:SWt,key:Ic,from:f,clip:l?!0:void 0,encode:g},n.symbols),C=so(c);C.offset=s("labelOffset"),g={enter:y={opacity:tr,x:{signal:d,offset:C},y:h},update:v={opacity:kc,text:{field:jne},x:y.x,y:y.y},exit:{opacity:tr}},jo(g,{align:s("labelAlign"),baseline:s("labelBaseline"),fill:s("labelColor"),fillOpacity:s("labelOpacity"),font:s("labelFont"),fontSize:s("labelFontSize"),fontStyle:s("labelFontStyle"),fontWeight:s("labelFontWeight"),limit:s("labelLimit")});const A=Gl({type:u_,role:v6e,style:PR,key:Ic,from:f,encode:g},n.labels);return g={enter:{noBound:{value:!l},width:tr,height:l?so(l):tr,opacity:tr},exit:{opacity:tr},update:v={opacity:kc,row:{signal:null},column:{signal:null}}},s.isVertical(!0)?(b=`ceil(item.mark.items.length / ${m})`,v.row.signal=`${p}%${b}`,v.column.signal=`floor(${p} / ${b})`,w={field:["row",p]}):(v.row.signal=`floor(${p} / ${m})`,v.column.signal=`${p} % ${m}`,w={field:p}),v.column.signal=`(${i})?${v.column.signal}:${p}`,r={facet:{data:r,name:"value",groupby:iq}},HI({role:Mne,from:r,encode:QS(g,o,OR),marks:[S,A],name:u,interactive:a,sort:w})}function tYt(e,t){const n=ll(e,t);return{align:n("gridAlign"),columns:n.entryColumns(),center:{row:!0,column:!1},padding:{row:n("rowPadding"),column:n("columnPadding")}}}const Hne='item.orient === "left"',qne='item.orient === "right"',BF=`(${Hne} || ${qne})`,nYt=`datum.vgrad && ${BF}`,rYt=jF('"top"','"bottom"','"middle"'),iYt=jF('"right"','"left"','"center"'),sYt=`datum.vgrad && ${qne} ? (${iYt}) : (${BF} && !(datum.vgrad && ${Hne})) ? "left" : ${Vne}`,oYt=`item._anchor || (${BF} ? "middle" : "start")`,aYt=`${nYt} ? (${Hne} ? -90 : 90) : 0`,uYt=`${BF} ? (datum.vgrad ? (${qne} ? "bottom" : "top") : ${rYt}) : "top"`;function lYt(e,t,n,r){const i=ll(e,t),s={enter:{opacity:tr},update:{opacity:kc,x:{field:{group:"padding"}},y:{field:{group:"padding"}}},exit:{opacity:tr}};return jo(s,{orient:i("titleOrient"),_anchor:i("titleAnchor"),anchor:{signal:oYt},angle:{signal:aYt},align:{signal:sYt},baseline:{signal:uYt},text:e.title,fill:i("titleColor"),fillOpacity:i("titleOpacity"),font:i("titleFont"),fontSize:i("titleFontSize"),fontStyle:i("titleFontStyle"),fontWeight:i("titleFontWeight"),limit:i("titleLimit"),lineHeight:i("titleLineHeight")},{align:i("titleAlign"),baseline:i("titleBaseline")}),Gl({type:u_,role:TWt,style:Bne,from:r,encode:s},n)}function cYt(e,t){let n;return gt(e)&&(e.signal?n=e.signal:e.path?n="pathShape("+fge(e.path)+")":e.sphere&&(n="geoShape("+fge(e.sphere)+', {type: "Sphere"})')),n?t.signalRef(n):!!e}function fge(e){return gt(e)&&e.signal?e.signal:rt(e)}function F6e(e){const t=e.role||"";return t.startsWith("axis")||t.startsWith("legend")||t.startsWith("title")?t:e.type===FF?Mne:t||One}function fYt(e){return{marktype:e.type,name:e.name||void 0,role:e.role||F6e(e),zindex:+e.zindex||void 0,aria:e.aria,description:e.description}}function dYt(e,t){return e&&e.signal?t.signalRef(e.signal):e!==!1}function Wne(e,t){const n=x3e(e.type);n||Le("Unrecognized transform type: "+rt(e.type));const r=$F(n.type.toLowerCase(),null,j6e(n,e,t));return e.signal&&t.addSignal(e.signal,t.proxy(r)),r.metadata=n.metadata||{},r}function j6e(e,t,n){const r={},i=e.params.length;for(let s=0;s<i;++s){const o=e.params[s];r[o.name]=hYt(o,t,n)}return r}function hYt(e,t,n){const r=e.type,i=t[e.name];if(r==="index")return pYt(e,t,n);if(i===void 0){e.required&&Le("Missing required "+rt(t.type)+" parameter: "+rt(e.name));return}else{if(r==="param")return mYt(e,t,n);if(r==="projection")return n.projectionRef(t[e.name])}return e.array&&!js(i)?i.map(s=>dge(e,s,n)):dge(e,i,n)}function dge(e,t,n){const r=e.type;if(js(t))return pge(r)?Le("Expression references can not be signals."):wB(r)?n.fieldRef(t):mge(r)?n.compareRef(t):n.signalRef(t.signal);{const i=e.expr||wB(r);return i&&gYt(t)?n.exprRef(t.expr,t.as):i&&yYt(t)?zI(t.field,t.as):pge(r)?jh(t,n):vYt(r)?Mt(n.getData(t).values):wB(r)?zI(t):mge(r)?n.compareRef(t):t}}function pYt(e,t,n){return mt(t.from)||Le('Lookup "from" parameter must be a string literal.'),n.getData(t.from).lookupRef(n,t.key)}function mYt(e,t,n){const r=t[e.name];return e.array?(je(r)||Le("Expected an array of sub-parameters. Instead: "+rt(r)),r.map(i=>hge(e,i,n))):hge(e,r,n)}function hge(e,t,n){const r=e.params.length;let i;for(let o=0;o<r;++o){i=e.params[o];for(const a in i.key)if(i.key[a]!==t[a]){i=null;break}if(i)break}i||Le("Unsupported parameter: "+rt(t));const s=bn(j6e(i,t,n),i.key);return Mt(n.add(dGt(s)))}const gYt=e=>e&&e.expr,yYt=e=>e&&e.field,vYt=e=>e==="data",pge=e=>e==="expr",wB=e=>e==="field",mge=e=>e==="compare";function bYt(e,t,n){let r,i,s,o,a;return e?(r=e.facet)&&(t||Le("Only group marks can be faceted."),r.field!=null?o=a=dO(r,n):(e.data?a=Mt(n.getData(e.data).aggregate):(s=Wne(bn({type:"aggregate",groupby:pt(r.groupby)},r.aggregate),n),s.params.key=n.keyRef(r.groupby),s.params.pulse=dO(r,n),o=a=Mt(n.add(s))),i=n.keyRef(r.groupby,!0))):o=Mt(n.add(dd(null,[{}]))),o||(o=dO(e,n)),{key:i,pulse:o,parent:a}}function dO(e,t){return e.$ref?e:e.data&&e.data.$ref?e.data:Mt(t.getData(e.data).output)}function gb(e,t,n,r,i){this.scope=e,this.input=t,this.output=n,this.values=r,this.aggregate=i,this.index={}}gb.fromEntries=function(e,t){const n=t.length,r=t[n-1],i=t[n-2];let s=t[0],o=null,a=1;for(s&&s.type==="load"&&(s=t[1]),e.add(t[0]);a<n;++a)t[a].params.pulse=Mt(t[a-1]),e.add(t[a]),t[a].type==="aggregate"&&(o=t[a]);return new gb(e,s,i,r,o)};function B6e(e){return mt(e)?e:null}function gge(e,t,n){const r=MF(n.op,n.field);let i;if(t.ops){for(let s=0,o=t.as.length;s<o;++s)if(t.as[s]===r)return}else t.ops=["count"],t.fields=[null],t.as=["count"];n.op&&(t.ops.push((i=n.op.signal)?e.signalRef(i):n.op),t.fields.push(e.fieldRef(n.field)),t.as.push(r))}function r2(e,t,n,r,i,s,o){const a=t[n]||(t[n]={}),u=zWt(s);let l=B6e(i),c,f;if(l!=null&&(e=t.scope,l=l+(u?"|"+u:""),c=a[l]),!c){const d=s?{field:tq,pulse:t.countsRef(e,i,s)}:{field:e.fieldRef(i),pulse:Mt(t.output)};u&&(d.sort=e.sortRef(s)),f=e.add($F(r,void 0,d)),o&&(t.index[i]=f),c=Mt(f),l!=null&&(a[l]=c)}return c}gb.prototype={countsRef(e,t,n){const r=this,i=r.counts||(r.counts={}),s=B6e(t);let o,a,u;return s!=null&&(e=r.scope,o=i[s]),o?n&&n.field&&gge(e,o.agg.params,n):(u={groupby:e.fieldRef(t,"key"),pulse:Mt(r.output)},n&&n.field&&gge(e,u,n),a=e.add(S6e(u)),o=e.add(dd({pulse:Mt(a)})),o={agg:a,ref:Mt(o)},s!=null&&(i[s]=o)),o.ref},tuplesRef(){return Mt(this.values)},extentRef(e,t){return r2(e,this,"extent","extent",t,!1)},domainRef(e,t){return r2(e,this,"domain","values",t,!1)},valuesRef(e,t,n){return r2(e,this,"vals","values",t,n||!0)},lookupRef(e,t){return r2(e,this,"lookup","tupleindex",t,!1)},indataRef(e,t){return r2(e,this,"indata","tupleindex",t,!0,!0)}};function _Yt(e,t,n){const r=e.from.facet,i=r.name,s=dO(r,t);let o;r.name||Le("Facet must have a name: "+rt(r)),r.data||Le("Facet must reference a data set: "+rt(r)),r.field?o=t.add(A6e({field:t.fieldRef(r.field),pulse:s})):r.groupby?o=t.add(rGt({key:t.keyRef(r.groupby),group:Mt(t.proxy(n.parent)),pulse:s})):Le("Facet must specify groupby or field: "+rt(r));const a=t.fork(),u=a.add(dd()),l=a.add(a_({pulse:Mt(u)}));a.addData(i,new gb(a,u,u,l)),a.addSignal("parent",null),o.params.subflow={$subflow:a.parse(e).toRuntime()}}function wYt(e,t,n){const r=t.add(A6e({pulse:n.pulse})),i=t.fork();i.add(a_()),i.addSignal("parent",null),r.params.subflow={$subflow:i.parse(e).toRuntime()}}function U6e(e,t,n){const r=e.remove,i=e.insert,s=e.toggle,o=e.modify,a=e.values,u=t.add(MM()),l="if("+e.trigger+',modify("'+n+'",'+[i,r,s,o,a].map(f=>f??"null").join(",")+"),0)",c=jh(l,t);u.update=c.$expr,u.params=c.$params}function UF(e,t){const n=F6e(e),r=e.type===FF,i=e.from&&e.from.facet,s=e.overlap;let o=e.layout||n===Mne||n===$ne,a,u,l,c,f,d,h;const p=n===One||o||i,m=bYt(e.from,r,t);u=t.add(tGt({key:m.key||(e.key?zI(e.key):void 0),pulse:m.pulse,clean:!r}));const g=Mt(u);u=l=t.add(dd({pulse:g})),u=t.add(uGt({markdef:fYt(e),interactive:dYt(e.interactive,t),clip:cYt(e.clip,t),context:{$context:!0},groups:t.lookup(),parent:t.signals.parent?t.signalRef("parent"):null,index:t.markpath(),pulse:Mt(u)}));const y=Mt(u);u=c=t.add(C6e(E6e(e.encode,e.type,n,e.style,t,{mod:!1,pulse:y}))),u.params.parent=t.encode(),e.transform&&e.transform.forEach(T=>{const S=Wne(T,t),C=S.metadata;(C.generates||C.changes)&&Le("Mark transforms should not generate new data."),C.nomod||(c.params.mod=!0),S.params.pulse=Mt(u),t.add(u=S)}),e.sort&&(u=t.add(yGt({sort:t.compareRef(e.sort),pulse:Mt(u)})));const v=Mt(u);(i||o)&&(o=t.add(k6e({layout:t.objectProperty(e.layout),legends:t.legends,mark:y,pulse:v})),d=Mt(o));const b=t.add(T6e({mark:y,pulse:d||v}));h=Mt(b),r&&(p&&(a=t.operators,a.pop(),o&&a.pop()),t.pushState(v,d||h,g),i?_Yt(e,t,m):p?wYt(e,t,m):t.parse(e),t.popState(),p&&(o&&a.push(o),a.push(b))),s&&(h=EYt(s,h,t));const w=t.add(I6e({pulse:h})),E=t.add(a_({pulse:Mt(w)},void 0,t.parent()));e.name!=null&&(f=e.name,t.addData(f,new gb(t,l,w,E)),e.on&&e.on.forEach(T=>{(T.insert||T.remove||T.toggle)&&Le("Marks only support modify triggers."),U6e(T,t,f)}))}function EYt(e,t,n){const r=e.method,i=e.bound,s=e.separation,o={separation:js(s)?n.signalRef(s.signal):s,method:js(r)?n.signalRef(r.signal):r,pulse:t};if(e.order&&(o.sort=n.compareRef({field:e.order})),i){const a=i.tolerance;o.boundTolerance=js(a)?n.signalRef(a.signal):+a,o.boundScale=n.scaleRef(i.scale),o.boundOrient=i.orient}return Mt(n.add(fGt(o)))}function xYt(e,t){const n=t.config.legend,r=e.encode||{},i=ll(e,n),s=r.legend||{},o=s.name||void 0,a=s.interactive,u=s.style,l={};let c=0,f,d,h;Une.forEach(b=>e[b]?(l[b]=e[b],c=c||e[b]):0),c||Le("Missing valid scale for legend.");const p=SYt(e,t.scaleType(c)),m={title:e.title!=null,scales:l,type:p,vgrad:p!=="symbol"&&i.isVertical()},g=Mt(t.add(dd(null,[m]))),y={enter:{x:{value:0},y:{value:0}}},v=Mt(t.add(oGt(d={type:p,scale:t.scaleRef(c),count:t.objectProperty(i("tickCount")),limit:t.property(i("symbolLimit")),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)})));return p===fO?(h=[XGt(e,c,n,r.gradient),cge(e,n,r.labels,v)],d.count=d.count||t.signalRef(`max(2,2*floor((${N1(i.gradientLength())})/100))`)):p===sq?h=[QGt(e,c,n,r.gradient,v),cge(e,n,r.labels,v)]:(f=tYt(e,n),h=[eYt(e,n,r,v,N1(f.columns))],d.size=AYt(e,t,h[0].marks)),h=[HI({role:EWt,from:g,encode:y,marks:h,layout:f,interactive:a})],m.title&&h.push(lYt(e,n,r.title,g)),UF(HI({role:_Wt,from:g,encode:QS(CYt(i,e,n),s,OR),marks:h,aria:i("aria"),description:i("description"),zindex:i("zindex"),name:o,interactive:a,style:u}),t)}function SYt(e,t){let n=e.type||lge;return!e.type&&TYt(e)===1&&(e.fill||e.stroke)&&(n=rte(t)?fO:_H(t)?sq:lge),n!==fO?n:_H(t)?sq:fO}function TYt(e){return Une.reduce((t,n)=>t+(e[n]?1:0),0)}function CYt(e,t,n){const r={enter:{},update:{}};return jo(r,{orient:e("orient"),offset:e("offset"),padding:e("padding"),titlePadding:e("titlePadding"),cornerRadius:e("cornerRadius"),fill:e("fillColor"),stroke:e("strokeColor"),strokeWidth:n.strokeWidth,strokeDash:n.strokeDash,x:e("legendX"),y:e("legendY"),format:t.format,formatType:t.formatType}),r}function AYt(e,t,n){const r=N1(yge("size",e,n)),i=N1(yge("strokeWidth",e,n)),s=N1(IYt(n[1].encode,t,PR));return jh(`max(ceil(sqrt(${r})+${i}),${s})`,t)}function yge(e,t,n){return t[e]?`scale("${t[e]}",datum)`:M6e(e,n[0].encode)}function IYt(e,t,n){return M6e("fontSize",e)||YGt("fontSize",t,n)}const kYt=`item.orient==="${JS}"?-90:item.orient==="${ZS}"?90:0`;function RYt(e,t){e=mt(e)?{text:e}:e;const n=ll(e,t.config.title),r=e.encode||{},i=r.group||{},s=i.name||void 0,o=i.interactive,a=i.style,u=[],l={},c=Mt(t.add(dd(null,[l])));return u.push(PYt(e,n,NYt(e),c)),e.subtitle&&u.push(OYt(e,n,r.subtitle,c)),UF(HI({role:CWt,from:c,encode:DYt(n,i),marks:u,aria:n("aria"),description:n("description"),zindex:n("zindex"),name:s,interactive:o,style:a}),t)}function NYt(e){const t=e.encode;return t&&t.title||bn({name:e.name,interactive:e.interactive,style:e.style},t)}function DYt(e,t){const n={enter:{},update:{}};return jo(n,{orient:e("orient"),anchor:e("anchor"),align:{signal:Vne},angle:{signal:kYt},limit:e("limit"),frame:e("frame"),offset:e("offset")||0,padding:e("subtitlePadding")}),QS(n,t,OR)}function PYt(e,t,n,r){const i={value:0},s=e.text,o={enter:{opacity:i},update:{opacity:{value:1}},exit:{opacity:i}};return jo(o,{text:s,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("color"),font:t("font"),fontSize:t("fontSize"),fontStyle:t("fontStyle"),fontWeight:t("fontWeight"),lineHeight:t("lineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),Gl({type:u_,role:AWt,style:jGt,from:r,encode:o},n)}function OYt(e,t,n,r){const i={value:0},s=e.subtitle,o={enter:{opacity:i},update:{opacity:{value:1}},exit:{opacity:i}};return jo(o,{text:s,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("subtitleColor"),font:t("subtitleFont"),fontSize:t("subtitleFontSize"),fontStyle:t("subtitleFontStyle"),fontWeight:t("subtitleFontWeight"),lineHeight:t("subtitleLineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),Gl({type:u_,role:IWt,style:BGt,from:r,encode:o},n)}function $Yt(e,t){const n=[];e.transform&&e.transform.forEach(r=>{n.push(Wne(r,t))}),e.on&&e.on.forEach(r=>{U6e(r,t,e.name)}),t.addDataPipeline(e.name,MYt(e,t,n))}function MYt(e,t,n){const r=[];let i=null,s=!1,o=!1,a,u,l,c,f;for(e.values?js(e.values)||lO(e.format)?(r.push(vge(t,e)),r.push(i=pv())):r.push(i=pv({$ingest:e.values,$format:e.format})):e.url?lO(e.url)||lO(e.format)?(r.push(vge(t,e)),r.push(i=pv())):r.push(i=pv({$request:e.url,$format:e.format})):e.source&&(i=a=pt(e.source).map(d=>Mt(t.getData(d).output)),r.push(null)),u=0,l=n.length;u<l;++u)c=n[u],f=c.metadata,!i&&!f.source&&r.push(i=pv()),r.push(c),f.generates&&(o=!0),f.modifies&&!o&&(s=!0),f.source?i=c:f.changes&&(i=null);return a&&(l=a.length-1,r[0]=mGt({derive:s,pulse:l?a:a[0]}),(s||l)&&r.splice(1,0,pv())),i||r.push(pv()),r.push(a_({})),r}function pv(e){const t=dd({},e);return t.metadata={source:!0},t}function vge(e,t){return aGt({url:t.url?e.property(t.url):void 0,async:t.async?e.property(t.async):void 0,values:t.values?e.property(t.values):void 0,format:e.objectProperty(t.format)})}const z6e=e=>e===gy||e===hd,zF=(e,t,n)=>js(e)?BYt(e.signal,t,n):e===JS||e===hd?t:n,oo=(e,t,n)=>js(e)?FYt(e.signal,t,n):z6e(e)?t:n,Hf=(e,t,n)=>js(e)?jYt(e.signal,t,n):z6e(e)?n:t,V6e=(e,t,n)=>js(e)?UYt(e.signal,t,n):e===hd?{value:t}:{value:n},LYt=(e,t,n)=>js(e)?zYt(e.signal,t,n):e===ZS?{value:t}:{value:n},FYt=(e,t,n)=>H6e(`${e} === '${hd}' || ${e} === '${gy}'`,t,n),jYt=(e,t,n)=>H6e(`${e} !== '${hd}' && ${e} !== '${gy}'`,t,n),BYt=(e,t,n)=>Gne(`${e} === '${JS}' || ${e} === '${hd}'`,t,n),UYt=(e,t,n)=>Gne(`${e} === '${hd}'`,t,n),zYt=(e,t,n)=>Gne(`${e} === '${ZS}'`,t,n),H6e=(e,t,n)=>(t=t!=null?so(t):t,n=n!=null?so(n):n,bge(t)&&bge(n)?(t=t?t.signal||rt(t.value):null,n=n?n.signal||rt(n.value):null,{signal:`${e} ? (${t}) : (${n})`}):[bn({test:e},t)].concat(n||[])),bge=e=>e==null||Object.keys(e).length===1,Gne=(e,t,n)=>({signal:`${e} ? (${Fw(t)}) : (${Fw(n)})`}),VYt=(e,t,n,r,i)=>({signal:(r!=null?`${e} === '${JS}' ? (${Fw(r)}) : `:"")+(n!=null?`${e} === '${gy}' ? (${Fw(n)}) : `:"")+(i!=null?`${e} === '${ZS}' ? (${Fw(i)}) : `:"")+(t!=null?`${e} === '${hd}' ? (${Fw(t)}) : `:"")+"(null)"}),Fw=e=>js(e)?e.signal:e==null?null:rt(e),HYt=(e,t)=>t===0?0:js(e)?{signal:`(${e.signal}) * ${t}`}:{value:e*t},vE=(e,t)=>{const n=e.signal;return n&&n.endsWith("(null)")?{signal:n.slice(0,-6)+t.signal}:e};function W_(e,t,n,r){let i;if(t&&jt(t,e))return t[e];if(jt(n,e))return n[e];if(e.startsWith("title")){switch(e){case"titleColor":i="fill";break;case"titleFont":case"titleFontSize":case"titleFontWeight":i=e[5].toLowerCase()+e.slice(6)}return r[Bne][i]}else if(e.startsWith("label")){switch(e){case"labelColor":i="fill";break;case"labelFont":case"labelFontSize":i=e[5].toLowerCase()+e.slice(6)}return r[PR][i]}return null}function _ge(e){const t={};for(const n of e)if(n)for(const r in n)t[r]=1;return Object.keys(t)}function qYt(e,t){var n=t.config,r=n.style,i=n.axis,s=t.scaleType(e.scale)==="band"&&n.axisBand,o=e.orient,a,u,l;if(js(o)){const f=_ge([n.axisX,n.axisY]),d=_ge([n.axisTop,n.axisBottom,n.axisLeft,n.axisRight]);a={};for(l of f)a[l]=oo(o,W_(l,n.axisX,i,r),W_(l,n.axisY,i,r));u={};for(l of d)u[l]=VYt(o.signal,W_(l,n.axisTop,i,r),W_(l,n.axisBottom,i,r),W_(l,n.axisLeft,i,r),W_(l,n.axisRight,i,r))}else a=o===hd||o===gy?n.axisX:n.axisY,u=n["axis"+o[0].toUpperCase()+o.slice(1)];return a||u||s?bn({},i,a,u,s):i}function WYt(e,t,n,r){const i=ll(e,t),s=e.orient;let o,a;const u={enter:o={opacity:tr},update:a={opacity:kc},exit:{opacity:tr}};jo(u,{stroke:i("domainColor"),strokeCap:i("domainCap"),strokeDash:i("domainDash"),strokeDashOffset:i("domainDashOffset"),strokeWidth:i("domainWidth"),strokeOpacity:i("domainOpacity")});const l=wge(e,0),c=wge(e,1);return o.x=a.x=oo(s,l,tr),o.x2=a.x2=oo(s,c),o.y=a.y=Hf(s,l,tr),o.y2=a.y2=Hf(s,c),Gl({type:zne,role:mWt,from:r,encode:u},n)}function wge(e,t){return{scale:e.scale,range:t}}function GYt(e,t,n,r,i){const s=ll(e,t),o=e.orient,a=e.gridScale,u=zF(o,1,-1),l=YYt(e.offset,u);let c,f,d;const h={enter:c={opacity:tr},update:d={opacity:kc},exit:f={opacity:tr}};jo(h,{stroke:s("gridColor"),strokeCap:s("gridCap"),strokeDash:s("gridDash"),strokeDashOffset:s("gridDashOffset"),strokeOpacity:s("gridOpacity"),strokeWidth:s("gridWidth")});const p={scale:e.scale,field:Ic,band:i.band,extra:i.extra,offset:i.offset,round:s("tickRound")},m=oo(o,{signal:"height"},{signal:"width"}),g=a?{scale:a,range:0,mult:u,offset:l}:{value:0,offset:l},y=a?{scale:a,range:1,mult:u,offset:l}:bn(m,{mult:u,offset:l});return c.x=d.x=oo(o,p,g),c.y=d.y=Hf(o,p,g),c.x2=d.x2=Hf(o,y),c.y2=d.y2=oo(o,y),f.x=oo(o,p),f.y=Hf(o,p),Gl({type:zne,role:gWt,key:Ic,from:r,encode:h},n)}function YYt(e,t){if(t!==1)if(!gt(e))e=js(t)?{signal:`(${t.signal}) * (${e||0})`}:t*(e||0);else{let n=e=bn({},e);for(;n.mult!=null;)if(gt(n.mult))n=n.mult=bn({},n.mult);else return n.mult=js(t)?{signal:`(${n.mult}) * (${t.signal})`}:n.mult*t,e;n.mult=t}return e}function KYt(e,t,n,r,i,s){const o=ll(e,t),a=e.orient,u=zF(a,-1,1);let l,c,f;const d={enter:l={opacity:tr},update:f={opacity:kc},exit:c={opacity:tr}};jo(d,{stroke:o("tickColor"),strokeCap:o("tickCap"),strokeDash:o("tickDash"),strokeDashOffset:o("tickDashOffset"),strokeOpacity:o("tickOpacity"),strokeWidth:o("tickWidth")});const h=so(i);h.mult=u;const p={scale:e.scale,field:Ic,band:s.band,extra:s.extra,offset:s.offset,round:o("tickRound")};return f.y=l.y=oo(a,tr,p),f.y2=l.y2=oo(a,h),c.x=oo(a,p),f.x=l.x=Hf(a,tr,p),f.x2=l.x2=Hf(a,h),c.y=Hf(a,p),Gl({type:zne,role:vWt,key:Ic,from:r,encode:d},n)}function EB(e,t,n,r,i){return{signal:'flush(range("'+e+'"), scale("'+e+'", datum.value), '+t+","+n+","+r+","+i+")"}}function XYt(e,t,n,r,i,s){const o=ll(e,t),a=e.orient,u=e.scale,l=zF(a,-1,1),c=N1(o("labelFlush")),f=N1(o("labelFlushOffset")),d=o("labelAlign"),h=o("labelBaseline");let p=c===0||!!c,m;const g=so(i);g.mult=l,g.offset=so(o("labelPadding")||0),g.offset.mult=l;const y={scale:u,field:Ic,band:.5,offset:L6e(s.offset,o("labelOffset"))},v=oo(a,p?EB(u,c,'"left"','"right"','"center"'):{value:"center"},LYt(a,"left","right")),b=oo(a,V6e(a,"bottom","top"),p?EB(u,c,'"top"','"bottom"','"middle"'):{value:"middle"}),w=EB(u,c,`-(${f})`,f,0);p=p&&f;const E={opacity:tr,x:oo(a,y,g),y:Hf(a,y,g)},T={enter:E,update:m={opacity:kc,text:{field:jne},x:E.x,y:E.y,align:v,baseline:b},exit:{opacity:tr,x:E.x,y:E.y}};jo(T,{dx:!d&&p?oo(a,w):null,dy:!h&&p?Hf(a,w):null}),jo(T,{angle:o("labelAngle"),fill:o("labelColor"),fillOpacity:o("labelOpacity"),font:o("labelFont"),fontSize:o("labelFontSize"),fontWeight:o("labelFontWeight"),fontStyle:o("labelFontStyle"),limit:o("labelLimit"),lineHeight:o("labelLineHeight")},{align:d,baseline:h});const S=o("labelBound");let C=o("labelOverlap");return C=C||S?{separation:o("labelSeparation"),method:C,order:"datum.index",bound:S?{scale:u,orient:a,tolerance:S}:null}:void 0,m.align!==v&&(m.align=vE(m.align,v)),m.baseline!==b&&(m.baseline=vE(m.baseline,b)),Gl({type:u_,role:yWt,style:PR,key:Ic,from:r,encode:T,overlap:C},n)}function QYt(e,t,n,r){const i=ll(e,t),s=e.orient,o=zF(s,-1,1);let a,u;const l={enter:a={opacity:tr,anchor:so(i("titleAnchor",null)),align:{signal:Vne}},update:u=bn({},a,{opacity:kc,text:so(e.title)}),exit:{opacity:tr}},c={signal:`lerp(range("${e.scale}"), ${jF(0,1,.5)})`};return u.x=oo(s,c),u.y=Hf(s,c),a.angle=oo(s,tr,HYt(o,90)),a.baseline=oo(s,V6e(s,gy,hd),{value:gy}),u.angle=a.angle,u.baseline=a.baseline,jo(l,{fill:i("titleColor"),fillOpacity:i("titleOpacity"),font:i("titleFont"),fontSize:i("titleFontSize"),fontStyle:i("titleFontStyle"),fontWeight:i("titleFontWeight"),limit:i("titleLimit"),lineHeight:i("titleLineHeight")},{align:i("titleAlign"),angle:i("titleAngle"),baseline:i("titleBaseline")}),JYt(i,s,l,n),l.update.align=vE(l.update.align,a.align),l.update.angle=vE(l.update.angle,a.angle),l.update.baseline=vE(l.update.baseline,a.baseline),Gl({type:u_,role:bWt,style:Bne,from:r,encode:l},n)}function JYt(e,t,n,r){const i=(a,u)=>a!=null?(n.update[u]=vE(so(a),n.update[u]),!1):!dw(u,r),s=i(e("titleX"),"x"),o=i(e("titleY"),"y");n.enter.auto=o===s?so(o):oo(t,so(o),so(s))}function ZYt(e,t){const n=qYt(e,t),r=e.encode||{},i=r.axis||{},s=i.name||void 0,o=i.interactive,a=i.style,u=ll(e,n),l=KGt(u),c={scale:e.scale,ticks:!!u("ticks"),labels:!!u("labels"),grid:!!u("grid"),domain:!!u("domain"),title:e.title!=null},f=Mt(t.add(dd({},[c]))),d=Mt(t.add(eGt({scale:t.scaleRef(e.scale),extra:t.property(l.extra),count:t.objectProperty(e.tickCount),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)}))),h=[];let p;return c.grid&&h.push(GYt(e,n,r.grid,d,l)),c.ticks&&(p=u("tickSize"),h.push(KYt(e,n,r.ticks,d,p,l))),c.labels&&(p=c.ticks?p:0,h.push(XYt(e,n,r.labels,d,p,l))),c.domain&&h.push(WYt(e,n,r.domain,f)),c.title&&h.push(QYt(e,n,r.title,f)),UF(HI({role:pWt,from:f,encode:QS(eKt(u,e),i,OR),marks:h,aria:u("aria"),description:u("description"),zindex:u("zindex"),name:s,interactive:o,style:a}),t)}function eKt(e,t){const n={enter:{},update:{}};return jo(n,{orient:e("orient"),offset:e("offset")||0,position:vf(t.position,0),titlePadding:e("titlePadding"),minExtent:e("minExtent"),maxExtent:e("maxExtent"),range:{signal:`abs(span(range("${t.scale}")))`},translate:e("translate"),format:t.format,formatType:t.formatType}),n}function q6e(e,t,n){const r=pt(e.signals),i=pt(e.scales);return n||r.forEach(s=>x6e(s,t)),pt(e.projections).forEach(s=>DGt(s,t)),i.forEach(s=>_Gt(s,t)),pt(e.data).forEach(s=>$Yt(s,t)),i.forEach(s=>wGt(s,t)),(n||r).forEach(s=>ZWt(s,t)),pt(e.axes).forEach(s=>ZYt(s,t)),pt(e.marks).forEach(s=>UF(s,t)),pt(e.legends).forEach(s=>xYt(s,t)),e.title&&RYt(e.title,t),t.parseLambdas(),t}const tKt=e=>QS({enter:{x:{value:0},y:{value:0}},update:{width:{signal:"width"},height:{signal:"height"}}},e);function nKt(e,t){const n=t.config,r=Mt(t.root=t.add(MM())),i=rKt(e,n);i.forEach(l=>x6e(l,t)),t.description=e.description||n.description,t.eventConfig=n.events,t.legends=t.objectProperty(n.legend&&n.legend.layout),t.locale=n.locale;const s=t.add(dd()),o=t.add(C6e(E6e(tKt(e.encode),FF,$ne,e.style,t,{pulse:Mt(s)}))),a=t.add(k6e({layout:t.objectProperty(e.layout),legends:t.legends,autosize:t.signalRef("autosize"),mark:r,pulse:Mt(o)}));t.operators.pop(),t.pushState(Mt(o),Mt(a),null),q6e(e,t,i),t.operators.push(a);let u=t.add(T6e({mark:r,pulse:Mt(a)}));return u=t.add(I6e({pulse:Mt(u)})),u=t.add(a_({pulse:Mt(u)})),t.addData("root",new gb(t,s,s,u)),t}function i2(e,t){return t&&t.signal?{name:e,update:t.signal}:{name:e,value:t}}function rKt(e,t){const n=o=>vf(e[o],t[o]),r=[i2("background",n("background")),i2("autosize",fWt(n("autosize"))),i2("padding",hWt(n("padding"))),i2("width",n("width")||0),i2("height",n("height")||0)],i=r.reduce((o,a)=>(o[a.name]=a,o),{}),s={};return pt(e.signals).forEach(o=>{jt(i,o.name)?o=bn(i[o.name],o):r.push(o),s[o.name]=o}),pt(t.signals).forEach(o=>{!jt(s,o.name)&&!jt(i,o.name)&&r.push(o)}),r}function W6e(e,t){this.config=e||{},this.options=t||{},this.bindings=[],this.field={},this.signals={},this.lambdas={},this.scales={},this.events={},this.data={},this.streams=[],this.updates=[],this.operators=[],this.eventConfig=null,this.locale=null,this._id=0,this._subid=0,this._nextsub=[0],this._parent=[],this._encode=[],this._lookup=[],this._markpath=[]}function Ege(e){this.config=e.config,this.options=e.options,this.legends=e.legends,this.field=Object.create(e.field),this.signals=Object.create(e.signals),this.lambdas=Object.create(e.lambdas),this.scales=Object.create(e.scales),this.events=Object.create(e.events),this.data=Object.create(e.data),this.streams=[],this.updates=[],this.operators=[],this._id=0,this._subid=++e._nextsub[0],this._nextsub=e._nextsub,this._parent=e._parent.slice(),this._encode=e._encode.slice(),this._lookup=e._lookup.slice(),this._markpath=e._markpath}W6e.prototype=Ege.prototype={parse(e){return q6e(e,this)},fork(){return new Ege(this)},isSubscope(){return this._subid>0},toRuntime(){return this.finish(),{description:this.description,operators:this.operators,streams:this.streams,updates:this.updates,bindings:this.bindings,eventConfig:this.eventConfig,locale:this.locale}},id(){return(this._subid?this._subid+":":0)+this._id++},add(e){return this.operators.push(e),e.id=this.id(),e.refs&&(e.refs.forEach(t=>{t.$ref=e.id}),e.refs=null),e},proxy(e){const t=e instanceof eq?Mt(e):e;return this.add(pGt({value:t}))},addStream(e){return this.streams.push(e),e.id=this.id(),e},addUpdate(e){return this.updates.push(e),e},finish(){let e,t;this.root&&(this.root.root=!0);for(e in this.signals)this.signals[e].signal=e;for(e in this.scales)this.scales[e].scale=e;function n(r,i,s){let o,a;r&&(o=r.data||(r.data={}),a=o[i]||(o[i]=[]),a.push(s))}for(e in this.data){t=this.data[e],n(t.input,e,"input"),n(t.output,e,"output"),n(t.values,e,"values");for(const r in t.index)n(t.index[r],e,"index:"+r)}return this},pushState(e,t,n){this._encode.push(Mt(this.add(a_({pulse:e})))),this._parent.push(t),this._lookup.push(n?Mt(this.proxy(n)):null),this._markpath.push(-1)},popState(){this._encode.pop(),this._parent.pop(),this._lookup.pop(),this._markpath.pop()},parent(){return Qn(this._parent)},encode(){return Qn(this._encode)},lookup(){return Qn(this._lookup)},markpath(){const e=this._markpath;return++e[e.length-1]},fieldRef(e,t){if(mt(e))return zI(e,t);e.signal||Le("Unsupported field reference: "+rt(e));const n=e.signal;let r=this.field[n];if(!r){const i={name:this.signalRef(n)};t&&(i.as=t),this.field[n]=r=Mt(this.add(iGt(i)))}return r},compareRef(e){let t=!1;const n=s=>js(s)?(t=!0,this.signalRef(s.signal)):VWt(s)?(t=!0,this.exprRef(s.expr)):s,r=pt(e.field).map(n),i=pt(e.order).map(n);return t?Mt(this.add(uge({fields:r,orders:i}))):oge(r,i)},keyRef(e,t){let n=!1;const r=s=>js(s)?(n=!0,Mt(i[s.signal])):s,i=this.signals;return e=pt(e).map(r),n?Mt(this.add(sGt({fields:e,flat:t}))):jWt(e,t)},sortRef(e){if(!e)return e;const t=MF(e.op,e.field),n=e.order||BWt;return n.signal?Mt(this.add(uge({fields:t,orders:this.signalRef(n.signal)}))):oge(t,n)},event(e,t){const n=e+":"+t;if(!this.events[n]){const r=this.id();this.streams.push({id:r,source:e,type:t}),this.events[n]=r}return this.events[n]},hasOwnSignal(e){return jt(this.signals,e)},addSignal(e,t){this.hasOwnSignal(e)&&Le("Duplicate signal name: "+rt(e));const n=t instanceof eq?t:this.add(MM(t));return this.signals[e]=n},getSignal(e){return this.signals[e]||Le("Unrecognized signal name: "+rt(e)),this.signals[e]},signalRef(e){return this.signals[e]?Mt(this.signals[e]):(jt(this.lambdas,e)||(this.lambdas[e]=this.add(MM(null))),Mt(this.lambdas[e]))},parseLambdas(){const e=Object.keys(this.lambdas);for(let t=0,n=e.length;t<n;++t){const r=e[t],i=jh(r,this),s=this.lambdas[r];s.params=i.$params,s.update=i.$expr}},property(e){return e&&e.signal?this.signalRef(e.signal):e},objectProperty(e){return!e||!gt(e)?e:this.signalRef(e.signal||Yne(e))},exprRef(e,t){const n={expr:jh(e,this)};return t&&(n.expr.$name=t),Mt(this.add(nGt(n)))},addBinding(e,t){this.bindings||Le("Nested signals do not support binding: "+rt(e)),this.bindings.push(bn({signal:e},t))},addScaleProj(e,t){jt(this.scales,e)&&Le("Duplicate scale or projection name: "+rt(e)),this.scales[e]=this.add(t)},addScale(e,t){this.addScaleProj(e,gGt(t))},addProjection(e,t){this.addScaleProj(e,hGt(t))},getScale(e){return this.scales[e]||Le("Unrecognized scale name: "+rt(e)),this.scales[e]},scaleRef(e){return Mt(this.getScale(e))},scaleType(e){return this.getScale(e).params.type},projectionRef(e){return this.scaleRef(e)},projectionType(e){return this.scaleType(e)},addData(e,t){return jt(this.data,e)&&Le("Duplicate data set name: "+rt(e)),this.data[e]=t},getData(e){return this.data[e]||Le("Undefined data set name: "+rt(e)),this.data[e]},addDataPipeline(e,t){return jt(this.data,e)&&Le("Duplicate data set name: "+rt(e)),this.addData(e,gb.fromEntries(this,t))}};function Yne(e){return(je(e)?iKt:sKt)(e)}function iKt(e){const t=e.length;let n="[";for(let r=0;r<t;++r){const i=e[r];n+=(r>0?",":"")+(gt(i)?i.signal||Yne(i):rt(i))}return n+"]"}function sKt(e){let t="{",n=0,r,i;for(r in e)i=e[r],t+=(++n>1?",":"")+rt(r)+":"+(gt(i)?i.signal||Yne(i):rt(i));return t+"}"}function oKt(){const e="sans-serif",r="#4c78a8",i="#000",s="#888",o="#ddd";return{description:"Vega visualization",padding:0,autosize:"pad",background:null,events:{defaults:{allow:["wheel"]}},group:null,mark:null,arc:{fill:r},area:{fill:r},image:null,line:{stroke:r,strokeWidth:2},path:{stroke:r},rect:{fill:r},rule:{stroke:i},shape:{stroke:r},symbol:{fill:r,size:64},text:{fill:i,font:e,fontSize:11},trail:{fill:r,size:2},style:{"guide-label":{fill:i,font:e,fontSize:10},"guide-title":{fill:i,font:e,fontSize:11,fontWeight:"bold"},"group-title":{fill:i,font:e,fontSize:13,fontWeight:"bold"},"group-subtitle":{fill:i,font:e,fontSize:12},point:{size:30,strokeWidth:2,shape:"circle"},circle:{size:30,strokeWidth:2},square:{size:30,strokeWidth:2,shape:"square"},cell:{fill:"transparent",stroke:o},view:{fill:"transparent"}},title:{orient:"top",anchor:"middle",offset:4,subtitlePadding:3},axis:{minExtent:0,maxExtent:200,bandPosition:.5,domain:!0,domainWidth:1,domainColor:s,grid:!1,gridWidth:1,gridColor:o,labels:!0,labelAngle:0,labelLimit:180,labelOffset:0,labelPadding:2,ticks:!0,tickColor:s,tickOffset:0,tickRound:!0,tickSize:5,tickWidth:1,titlePadding:4},axisBand:{tickOffset:-.5},projection:{type:"mercator"},legend:{orient:"right",padding:0,gridAlign:"each",columnPadding:10,rowPadding:2,symbolDirection:"vertical",gradientDirection:"vertical",gradientLength:200,gradientThickness:16,gradientStrokeColor:o,gradientStrokeWidth:0,gradientLabelOffset:2,labelAlign:"left",labelBaseline:"middle",labelLimit:160,labelOffset:4,labelOverlap:!0,symbolLimit:30,symbolType:"circle",symbolSize:100,symbolOffset:0,symbolStrokeWidth:1.5,symbolBaseFillColor:"transparent",symbolBaseStrokeColor:s,titleLimit:180,titleOrient:"top",titlePadding:5,layout:{offset:18,direction:"horizontal",left:{direction:"vertical"},right:{direction:"vertical"}}},range:{category:{scheme:"tableau10"},ordinal:{scheme:"blues"},heatmap:{scheme:"yellowgreenblue"},ramp:{scheme:"blues"},diverging:{scheme:"blueorange",extent:[1,0]},symbol:["circle","square","triangle-up","cross","diamond","triangle-right","triangle-down","triangle-left"]}}}function aKt(e,t,n){return gt(e)||Le("Input Vega specification must be an object."),t=VS(oKt(),t,e.config),nKt(e,new W6e(t,n)).toRuntime()}var uKt="5.29.0";bn(wx,ajt,KBt,AUt,i7t,f7t,F7t,y7t,B7t,H7t,ezt,azt);const lKt=Object.freeze(Object.defineProperty({__proto__:null,Bounds:Ts,CanvasHandler:IR,CanvasRenderer:SM,DATE:rl,DAY:da,DAYOFYEAR:Fh,Dataflow:yE,Debug:yOe,Error:zZ,EventStream:iF,Gradient:O$e,GroupItem:yF,HOURS:Hl,Handler:Ite,HybridHandler:TMe,HybridRenderer:NH,Info:gOe,Item:gF,MILLISECONDS:td,MINUTES:ql,MONTH:ya,Marks:Wl,MultiPulse:uee,None:mOe,Operator:Kr,Parameters:rF,Pulse:D0,QUARTER:nl,RenderType:o0,Renderer:AR,ResourceLoader:U$e,SECONDS:jc,SVGHandler:dMe,SVGRenderer:Ote,SVGStringRenderer:SMe,Scenegraph:iMe,TIME_UNITS:eee,Transform:De,View:c6e,WEEK:$s,Warn:VZ,YEAR:$o,accessor:ul,accessorFields:ga,accessorName:Ki,array:pt,ascending:Q4,bandwidthNRD:dee,bin:C3e,bootstrapCI:A3e,boundClip:$Me,boundContext:xR,boundItem:CH,boundMark:eMe,boundStroke:og,changeset:i_,clampRange:IOe,codegenExpression:LLe,compare:YZ,constant:Sa,cumulativeLogNormal:vee,cumulativeNormal:oF,cumulativeUniform:Eee,dayofyear:BOe,debounce:KZ,defaultLocale:ree,definition:x3e,densityLogNormal:yee,densityNormal:hee,densityUniform:wee,domChild:Ps,domClear:bc,domCreate:i0,domFind:Ate,dotbin:I3e,error:Le,expressionFunction:ms,extend:bn,extent:Lh,extentIndex:kOe,falsy:Cg,fastmap:qS,field:Lc,flush:ROe,font:EF,fontFamily:CR,fontSize:ip,format:GP,formatLocale:fM,formats:oee,hasOwnProperty:jt,id:fR,identity:xa,inferType:d3e,inferTypes:h3e,ingest:Er,inherits:lt,inrange:$w,interpolate:ite,interpolateColors:pF,interpolateRange:_$e,intersect:NMe,intersectBoxLine:Mw,intersectPath:dte,intersectPoint:hte,intersectRule:V$e,isArray:je,isBoolean:Gy,isDate:N0,isFunction:_n,isIterable:NOe,isNumber:lr,isObject:gt,isRegExp:DOe,isString:mt,isTuple:tF,key:XZ,lerp:POe,lineHeight:hy,loader:Z4,locale:c3e,logger:HZ,lruCache:OOe,markup:Pte,merge:$Oe,mergeConfig:VS,multiLineOffset:Ste,one:zS,pad:MOe,panLinear:EOe,panLog:xOe,panPow:SOe,panSymlog:TOe,parse:aKt,parseExpression:wne,parseSelector:Ky,path:A6,pathCurves:lte,pathEqual:MMe,pathParse:Tx,pathRectangle:L$e,pathRender:OI,pathSymbols:M$e,pathTrail:F$e,peek:Qn,point:SF,projection:Wte,quantileLogNormal:bee,quantileNormal:aF,quantileUniform:xee,quantiles:cee,quantizeInterpolator:w$e,quarter:COe,quartiles:fee,get random(){return Bc},randomInteger:f5t,randomKDE:mee,randomLCG:c5t,randomLogNormal:R3e,randomMixture:N3e,randomNormal:pee,randomUniform:D3e,read:g3e,regressionConstant:See,regressionExp:O3e,regressionLinear:Tee,regressionLoess:L3e,regressionLog:P3e,regressionPoly:M3e,regressionPow:$3e,regressionQuad:Cee,renderModule:TF,repeat:H2,resetDefaultLocale:aFt,resetSVGClipId:B$e,resetSVGDefIds:hBt,responseType:m3e,runtimeContext:QLe,sampleCurve:lF,sampleLogNormal:gee,sampleNormal:sF,sampleUniform:_ee,scale:gr,sceneEqual:$te,sceneFromJSON:nMe,scenePickVisit:gM,sceneToJSON:tMe,sceneVisit:nd,sceneZOrder:pte,scheme:ste,serializeXML:_Me,setHybridRendererOptions:lBt,setRandom:u5t,span:dR,splitAccessPath:rp,stringValue:rt,textMetrics:Dl,timeBin:r3e,timeFloor:GOe,timeFormatLocale:NI,timeInterval:WS,timeOffset:XOe,timeSequence:ZOe,timeUnitSpecifier:jOe,timeUnits:tee,toBoolean:QZ,toDate:JZ,toNumber:ha,toSet:ed,toString:ZZ,transform:S3e,transforms:wx,truncate:LOe,truthy:Fc,tupleid:Lt,typeParsers:yH,utcFloor:YOe,utcInterval:GS,utcOffset:QOe,utcSequence:e3e,utcdayofyear:VOe,utcquarter:AOe,utcweek:HOe,version:uKt,visitArray:$g,week:UOe,writeConfig:HS,zero:Yg,zoomLinear:qZ,zoomLog:WZ,zoomPow:cM,zoomSymlog:GZ},Symbol.toStringTag,{value:"Module"}));function cKt(e,t,n){let r;t.x2&&(t.x?(n&&e.x>e.x2&&(r=e.x,e.x=e.x2,e.x2=r),e.width=e.x2-e.x):e.x=e.x2-(e.width||0)),t.xc&&(e.x=e.xc-(e.width||0)/2),t.y2&&(t.y?(n&&e.y>e.y2&&(r=e.y,e.y=e.y2,e.y2=r),e.height=e.y2-e.y):e.y=e.y2-(e.height||0)),t.yc&&(e.y=e.yc-(e.height||0)/2)}var fKt={NaN:NaN,E:Math.E,LN2:Math.LN2,LN10:Math.LN10,LOG2E:Math.LOG2E,LOG10E:Math.LOG10E,PI:Math.PI,SQRT1_2:Math.SQRT1_2,SQRT2:Math.SQRT2,MIN_VALUE:Number.MIN_VALUE,MAX_VALUE:Number.MAX_VALUE},dKt={"*":(e,t)=>e*t,"+":(e,t)=>e+t,"-":(e,t)=>e-t,"/":(e,t)=>e/t,"%":(e,t)=>e%t,">":(e,t)=>e>t,"<":(e,t)=>e<t,"<=":(e,t)=>e<=t,">=":(e,t)=>e>=t,"==":(e,t)=>e==t,"!=":(e,t)=>e!=t,"===":(e,t)=>e===t,"!==":(e,t)=>e!==t,"&":(e,t)=>e&t,"|":(e,t)=>e|t,"^":(e,t)=>e^t,"<<":(e,t)=>e<<t,">>":(e,t)=>e>>t,">>>":(e,t)=>e>>>t},hKt={"+":e=>+e,"-":e=>-e,"~":e=>~e,"!":e=>!e};const pKt=Array.prototype.slice,mv=(e,t,n)=>{const r=n?n(t[0]):t[0];return r[e].apply(r,pKt.call(t,1))},mKt=(e,t,n,r,i,s,o)=>new Date(e,t||0,n??1,r||0,i||0,s||0,o||0);var gKt={isNaN:Number.isNaN,isFinite:Number.isFinite,abs:Math.abs,acos:Math.acos,asin:Math.asin,atan:Math.atan,atan2:Math.atan2,ceil:Math.ceil,cos:Math.cos,exp:Math.exp,floor:Math.floor,log:Math.log,max:Math.max,min:Math.min,pow:Math.pow,random:Math.random,round:Math.round,sin:Math.sin,sqrt:Math.sqrt,tan:Math.tan,clamp:(e,t,n)=>Math.max(t,Math.min(n,e)),now:Date.now,utc:Date.UTC,datetime:mKt,date:e=>new Date(e).getDate(),day:e=>new Date(e).getDay(),year:e=>new Date(e).getFullYear(),month:e=>new Date(e).getMonth(),hours:e=>new Date(e).getHours(),minutes:e=>new Date(e).getMinutes(),seconds:e=>new Date(e).getSeconds(),milliseconds:e=>new Date(e).getMilliseconds(),time:e=>new Date(e).getTime(),timezoneoffset:e=>new Date(e).getTimezoneOffset(),utcdate:e=>new Date(e).getUTCDate(),utcday:e=>new Date(e).getUTCDay(),utcyear:e=>new Date(e).getUTCFullYear(),utcmonth:e=>new Date(e).getUTCMonth(),utchours:e=>new Date(e).getUTCHours(),utcminutes:e=>new Date(e).getUTCMinutes(),utcseconds:e=>new Date(e).getUTCSeconds(),utcmilliseconds:e=>new Date(e).getUTCMilliseconds(),length:e=>e.length,join:function(){return mv("join",arguments)},indexof:function(){return mv("indexOf",arguments)},lastindexof:function(){return mv("lastIndexOf",arguments)},slice:function(){return mv("slice",arguments)},reverse:e=>e.slice().reverse(),parseFloat,parseInt,upper:e=>String(e).toUpperCase(),lower:e=>String(e).toLowerCase(),substring:function(){return mv("substring",arguments,String)},split:function(){return mv("split",arguments,String)},replace:function(){return mv("replace",arguments,String)},trim:e=>String(e).trim(),regexp:RegExp,test:(e,t)=>RegExp(e).test(t)};const yKt=["view","item","group","xy","x","y"],aq=new Set([Function,eval,setTimeout,setInterval]);typeof setImmediate=="function"&&aq.add(setImmediate);const vKt={Literal:(e,t)=>t.value,Identifier:(e,t)=>{const n=t.name;return e.memberDepth>0?n:n==="datum"?e.datum:n==="event"?e.event:n==="item"?e.item:fKt[n]||e.params["$"+n]},MemberExpression:(e,t)=>{const n=!t.computed,r=e(t.object);n&&(e.memberDepth+=1);const i=e(t.property);if(n&&(e.memberDepth-=1),aq.has(r[i])){console.error(`Prevented interpretation of member "${i}" which could lead to insecure code execution`);return}return r[i]},CallExpression:(e,t)=>{const n=t.arguments;let r=t.callee.name;return r.startsWith("_")&&(r=r.slice(1)),r==="if"?e(n[0])?e(n[1]):e(n[2]):(e.fn[r]||gKt[r]).apply(e.fn,n.map(e))},ArrayExpression:(e,t)=>t.elements.map(e),BinaryExpression:(e,t)=>dKt[t.operator](e(t.left),e(t.right)),UnaryExpression:(e,t)=>hKt[t.operator](e(t.argument)),ConditionalExpression:(e,t)=>e(t.test)?e(t.consequent):e(t.alternate),LogicalExpression:(e,t)=>t.operator==="&&"?e(t.left)&&e(t.right):e(t.left)||e(t.right),ObjectExpression:(e,t)=>t.properties.reduce((n,r)=>{e.memberDepth+=1;const i=e(r.key);return e.memberDepth-=1,aq.has(e(r.value))?console.error(`Prevented interpretation of property "${i}" which could lead to insecure code execution`):n[i]=e(r.value),n},{})};function s2(e,t,n,r,i,s){const o=a=>vKt[a.type](o,a);return o.memberDepth=0,o.fn=Object.create(t),o.params=n,o.datum=r,o.event=i,o.item=s,yKt.forEach(a=>o.fn[a]=function(){return i.vega[a](...arguments)}),o(e)}var bKt={operator(e,t){const n=t.ast,r=e.functions;return i=>s2(n,r,i)},parameter(e,t){const n=t.ast,r=e.functions;return(i,s)=>s2(n,r,s,i)},event(e,t){const n=t.ast,r=e.functions;return i=>s2(n,r,void 0,void 0,i)},handler(e,t){const n=t.ast,r=e.functions;return(i,s)=>{const o=s.item&&s.item.datum;return s2(n,r,i,o,s)}},encode(e,t){const{marktype:n,channels:r}=t,i=e.functions,s=n==="group"||n==="image"||n==="rect";return(o,a)=>{const u=o.datum;let l=0,c;for(const f in r)c=s2(r[f].ast,i,a,u,void 0,o),o[f]!==c&&(o[f]=c,l=1);return n!=="rule"&&cKt(o,r,s),l}}};const _Kt="vega-lite",wKt='Dominik Moritz, Kanit "Ham" Wongsuphasawat, Arvind Satyanarayan, Jeffrey Heer',EKt="5.18.1",xKt=["Kanit Wongsuphasawat (http://kanitw.yellowpigz.com)","Dominik Moritz (https://www.domoritz.de)","Arvind Satyanarayan (https://arvindsatya.com)","Jeffrey Heer (https://jheer.org)"],SKt="https://vega.github.io/vega-lite/",TKt="Vega-Lite is a concise high-level language for interactive visualization.",CKt=["vega","chart","visualization"],AKt="build/vega-lite.js",IKt="build/vega-lite.min.js",kKt="build/vega-lite.min.js",RKt="build/src/index",NKt="build/src/index.d.ts",DKt={vl2pdf:"./bin/vl2pdf",vl2png:"./bin/vl2png",vl2svg:"./bin/vl2svg",vl2vg:"./bin/vl2vg"},PKt=["bin","build","src","vega-lite*","tsconfig.json"],OKt={changelog:"conventional-changelog -p angular -r 2",prebuild:"yarn clean:build",build:"yarn build:only","build:only":"tsc -p tsconfig.build.json && rollup -c","prebuild:examples":"yarn build:only","build:examples":"yarn data && TZ=America/Los_Angeles scripts/build-examples.sh","prebuild:examples-full":"yarn build:only","build:examples-full":"TZ=America/Los_Angeles scripts/build-examples.sh 1","build:example":"TZ=America/Los_Angeles scripts/build-example.sh","build:toc":"yarn build:jekyll && scripts/generate-toc","build:site":"rollup -c site/rollup.config.mjs","build:jekyll":"pushd site && bundle exec jekyll build -q && popd","build:versions":"scripts/update-version.sh",clean:"yarn clean:build && del-cli 'site/data/*' 'examples/compiled/*.png' && find site/examples ! -name 'index.md' ! -name 'data' -type f -delete","clean:build":"del-cli 'build/*' !build/vega-lite-schema.json",data:"rsync -r node_modules/vega-datasets/data/* site/data","build-editor-preview":"scripts/build-editor-preview.sh",schema:"mkdir -p build && ts-json-schema-generator -f tsconfig.json -p src/index.ts -t TopLevelSpec --no-type-check --no-ref-encode > build/vega-lite-schema.json && yarn renameschema && cp build/vega-lite-schema.json site/_data/",renameschema:"scripts/rename-schema.sh",presite:"yarn data && yarn schema && yarn build:site && yarn build:versions && scripts/create-example-pages.sh",site:"yarn site:only","site:only":"pushd site && bundle exec jekyll serve -I -l && popd",prettierbase:"prettier '**/*.{md,css,yml}'",format:"eslint . --fix && yarn prettierbase --write",lint:"eslint . && yarn prettierbase --check",test:"yarn jest test/ && yarn lint && yarn schema && yarn jest examples/ && yarn test:runtime","test:cover":"yarn jest --collectCoverage test/","test:inspect":"node --inspect-brk ./node_modules/.bin/jest --runInBand test","test:runtime":"TZ=America/Los_Angeles npx jest test-runtime/ --config test-runtime/jest-config.json","test:runtime:generate":"yarn build:only && del-cli test-runtime/resources && VL_GENERATE_TESTS=true yarn test:runtime",watch:"tsc -p tsconfig.build.json -w","watch:site":"yarn build:site -w","watch:test":"yarn jest --watch test/","watch:test:runtime":"TZ=America/Los_Angeles npx jest --watch test-runtime/ --config test-runtime/jest-config.json",release:"release-it"},$Kt={type:"git",url:"https://github.com/vega/vega-lite.git"},MKt="BSD-3-Clause",LKt={url:"https://github.com/vega/vega-lite/issues"},FKt={"@babel/core":"^7.24.5","@babel/preset-env":"^7.24.5","@babel/preset-typescript":"^7.24.1","@release-it/conventional-changelog":"^8.0.1","@rollup/plugin-alias":"^5.1.0","@rollup/plugin-babel":"^6.0.4","@rollup/plugin-commonjs":"^25.0.7","@rollup/plugin-json":"^6.1.0","@rollup/plugin-node-resolve":"^15.2.3","@rollup/plugin-terser":"^0.4.4","@types/d3":"^7.4.3","@types/jest":"^29.5.12","@types/pako":"^2.0.3","@typescript-eslint/eslint-plugin":"^7.8.0","@typescript-eslint/parser":"^7.8.0",ajv:"^8.13.0","ajv-formats":"^2.1.1",cheerio:"^1.0.0-rc.12","conventional-changelog-cli":"^4.1.0",d3:"^7.9.0","del-cli":"^5.1.0",eslint:"^8.57.0","eslint-config-prettier":"^9.1.0","eslint-plugin-jest":"^27.9.0","eslint-plugin-prettier":"^5.1.3","fast-json-stable-stringify":"~2.1.0","highlight.js":"^11.9.0",jest:"^29.7.0","jest-dev-server":"^10.0.0",mkdirp:"^3.0.1",pako:"^2.1.0",prettier:"^3.2.5",puppeteer:"^15.0.0","release-it":"^17.2.1",rollup:"^4.17.2","rollup-plugin-bundle-size":"^1.0.3",serve:"^14.2.3",terser:"^5.31.0","ts-jest":"^29.1.2","ts-json-schema-generator":"^1.5.0",typescript:"~5.4.5","vega-cli":"^5.28.0","vega-datasets":"^2.8.1","vega-embed":"^6.25.0","vega-tooltip":"^0.34.0","yaml-front-matter":"^4.1.1"},jKt={"json-stringify-pretty-compact":"~3.0.0",tslib:"~2.6.2","vega-event-selector":"~3.0.1","vega-expression":"~5.1.0","vega-util":"~1.17.2",yargs:"~17.7.2"},BKt={vega:"^5.24.0"},UKt={node:">=18"},zKt="yarn@1.22.19",VKt={name:_Kt,author:wKt,version:EKt,collaborators:xKt,homepage:SKt,description:TKt,keywords:CKt,main:AKt,unpkg:IKt,jsdelivr:kKt,module:RKt,types:NKt,bin:DKt,files:PKt,scripts:OKt,repository:$Kt,license:MKt,bugs:LKt,devDependencies:FKt,dependencies:jKt,peerDependencies:BKt,engines:UKt,packageManager:zKt};function Kne(e){return!!e.or}function Xne(e){return!!e.and}function Qne(e){return!!e.not}function hO(e,t){if(Qne(e))hO(e.not,t);else if(Xne(e))for(const n of e.and)hO(n,t);else if(Kne(e))for(const n of e.or)hO(n,t);else t(e)}function bE(e,t){return Qne(e)?{not:bE(e.not,t)}:Xne(e)?{and:e.and.map(n=>bE(n,t))}:Kne(e)?{or:e.or.map(n=>bE(n,t))}:t(e)}const nn=structuredClone;function G6e(e){throw new Error(e)}function Rx(e,t){const n={};for(const r of t)jt(e,r)&&(n[r]=e[r]);return n}function Gu(e,t){const n={...e};for(const r of t)delete n[r];return n}Set.prototype.toJSON=function(){return`Set(${[...this].map(e=>Br(e)).join(",")})`};function Vn(e){if(lr(e))return e;const t=mt(e)?e:Br(e);if(t.length<250)return t;let n=0;for(let r=0;r<t.length;r++){const i=t.charCodeAt(r);n=(n<<5)-n+i,n=n&n}return n}function uq(e){return e===!1||e===null}function Hn(e,t){return e.includes(t)}function yb(e,t){let n=0;for(const[r,i]of e.entries())if(t(i,r,n++))return!0;return!1}function Jne(e,t){let n=0;for(const[r,i]of e.entries())if(!t(i,r,n++))return!1;return!0}function Y6e(e,...t){for(const n of t)HKt(e,n??{});return e}function HKt(e,t){for(const n of Ye(t))HS(e,n,t[n],!0)}function sh(e,t){const n=[],r={};let i;for(const s of e)i=t(s),!(i in r)&&(r[i]=1,n.push(s));return n}function qKt(e,t){const n=Ye(e),r=Ye(t);if(n.length!==r.length)return!1;for(const i of n)if(e[i]!==t[i])return!1;return!0}function K6e(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}function Zne(e,t){for(const n of e)if(t.has(n))return!0;return!1}function lq(e){const t=new Set;for(const n of e){const i=rp(n).map((o,a)=>a===0?o:`[${o}]`),s=i.map((o,a)=>i.slice(0,a+1).join(""));for(const o of s)t.add(o)}return t}function ere(e,t){return e===void 0||t===void 0?!0:Zne(lq(e),lq(t))}function jr(e){return Ye(e).length===0}const Ye=Object.keys,Mo=Object.values,yy=Object.entries;function qI(e){return e===!0||e===!1}function Ci(e){const t=e.replace(/\W/g,"_");return(e.match(/^\d+/)?"_":"")+t}function nA(e,t){return Qne(e)?`!(${nA(e.not,t)})`:Xne(e)?`(${e.and.map(n=>nA(n,t)).join(") && (")})`:Kne(e)?`(${e.or.map(n=>nA(n,t)).join(") || (")})`:t(e)}function LM(e,t){if(t.length===0)return!0;const n=t.shift();return n in e&&LM(e[n],t)&&delete e[n],jr(e)}function $R(e){return e.charAt(0).toUpperCase()+e.substr(1)}function tre(e,t="datum"){const n=rp(e),r=[];for(let i=1;i<=n.length;i++){const s=`[${n.slice(0,i).map(rt).join("][")}]`;r.push(`${t}${s}`)}return r.join(" && ")}function X6e(e,t="datum"){return`${t}[${rt(rp(e).join("."))}]`}function WKt(e){return e.replace(/(\[|\]|\.|'|")/g,"\\$1")}function Uc(e){return`${rp(e).map(WKt).join("\\.")}`}function vb(e,t,n){return e.replace(new RegExp(t.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"),"g"),n)}function eT(e){return`${rp(e).join(".")}`}function Nx(e){return e?rp(e).length:0}function fs(...e){for(const t of e)if(t!==void 0)return t}let Q6e=42;function J6e(e){const t=++Q6e;return e?String(e)+t:t}function GKt(){Q6e=42}function Z6e(e){return e4e(e)?e:`__${e}`}function e4e(e){return e.startsWith("__")}function WI(e){if(e!==void 0)return(e%360+360)%360}function VF(e){return lr(e)?!0:!isNaN(e)&&!isNaN(parseFloat(e))}const xge=Object.getPrototypeOf(structuredClone({}));function kl(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor.name!==t.constructor.name)return!1;let n,r;if(Array.isArray(e)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(!kl(e[r],t[r]))return!1;return!0}if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(r of e.entries())if(!t.has(r[0]))return!1;for(r of e.entries())if(!kl(r[1],t.get(r[0])))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(r of e.entries())if(!t.has(r[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(e[r]!==t[r])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf&&e.valueOf!==xge.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString&&e.toString!==xge.toString)return e.toString()===t.toString();const i=Object.keys(e);if(n=i.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!Object.prototype.hasOwnProperty.call(t,i[r]))return!1;for(r=n;r--!==0;){const s=i[r];if(!kl(e[s],t[s]))return!1}return!0}return e!==e&&t!==t}function Br(e){const t=[];return function n(r){if(r&&r.toJSON&&typeof r.toJSON=="function"&&(r=r.toJSON()),r===void 0)return;if(typeof r=="number")return isFinite(r)?""+r:"null";if(typeof r!="object")return JSON.stringify(r);let i,s;if(Array.isArray(r)){for(s="[",i=0;i<r.length;i++)i&&(s+=","),s+=n(r[i])||"null";return s+"]"}if(r===null)return"null";if(t.includes(r))throw new TypeError("Converting circular structure to JSON");const o=t.push(r)-1,a=Object.keys(r).sort();for(s="",i=0;i<a.length;i++){const u=a[i],l=n(r[u]);l&&(s&&(s+=","),s+=JSON.stringify(u)+":"+l)}return t.splice(o,1),`{${s}}`}(e)}const cm="row",fm="column",HF="facet",Ai="x",po="y",pd="x2",ap="y2",Xy="xOffset",tT="yOffset",md="radius",ug="radius2",Jc="theta",lg="theta2",gd="latitude",yd="longitude",vd="latitude2",zc="longitude2",il="color",up="fill",lp="stroke",sl="shape",cg="size",l_="angle",fg="opacity",Qy="fillOpacity",Jy="strokeOpacity",Zy="strokeWidth",ev="strokeDash",MR="text",Dx="order",LR="detail",qF="key",bb="tooltip",WF="href",GF="url",YF="description",YKt={x:1,y:1,x2:1,y2:1},t4e={theta:1,theta2:1,radius:1,radius2:1};function n4e(e){return e in t4e}const nre={longitude:1,longitude2:1,latitude:1,latitude2:1};function r4e(e){switch(e){case gd:return"y";case vd:return"y2";case yd:return"x";case zc:return"x2"}}function i4e(e){return e in nre}const KKt=Ye(nre),rre={...YKt,...t4e,...nre,xOffset:1,yOffset:1,color:1,fill:1,stroke:1,opacity:1,fillOpacity:1,strokeOpacity:1,strokeWidth:1,strokeDash:1,size:1,angle:1,shape:1,order:1,text:1,detail:1,key:1,tooltip:1,href:1,url:1,description:1};function _E(e){return e===il||e===up||e===lp}const s4e={row:1,column:1,facet:1},Cc=Ye(s4e),ire={...rre,...s4e},XKt=Ye(ire),{order:Aun,detail:Iun,tooltip:kun,...QKt}=ire,{row:Run,column:Nun,facet:Dun,...JKt}=QKt;function ZKt(e){return!!JKt[e]}function o4e(e){return!!ire[e]}const eXt=[pd,ap,vd,zc,lg,ug];function a4e(e){return c_(e)!==e}function c_(e){switch(e){case pd:return Ai;case ap:return po;case vd:return gd;case zc:return yd;case lg:return Jc;case ug:return md}return e}function vy(e){if(n4e(e))switch(e){case Jc:return"startAngle";case lg:return"endAngle";case md:return"outerRadius";case ug:return"innerRadius"}return e}function cp(e){switch(e){case Ai:return pd;case po:return ap;case gd:return vd;case yd:return zc;case Jc:return lg;case md:return ug}}function ol(e){switch(e){case Ai:case pd:return"width";case po:case ap:return"height"}}function u4e(e){switch(e){case Ai:return"xOffset";case po:return"yOffset";case pd:return"x2Offset";case ap:return"y2Offset";case Jc:return"thetaOffset";case md:return"radiusOffset";case lg:return"theta2Offset";case ug:return"radius2Offset"}}function sre(e){switch(e){case Ai:return"xOffset";case po:return"yOffset"}}function tXt(e){switch(e){case"xOffset":return"x";case"yOffset":return"y"}}const nXt=Ye(rre),{x:Pun,y:Oun,x2:$un,y2:Mun,xOffset:Lun,yOffset:Fun,latitude:jun,longitude:Bun,latitude2:Uun,longitude2:zun,theta:Vun,theta2:Hun,radius:qun,radius2:Wun,...ore}=rre,rXt=Ye(ore),are={x:1,y:1},fp=Ye(are);function ds(e){return e in are}const ure={theta:1,radius:1},iXt=Ye(ure);function KF(e){return e==="width"?Ai:po}const l4e={xOffset:1,yOffset:1};function FR(e){return e in l4e}const{text:Gun,tooltip:Yun,href:Kun,url:Xun,description:Qun,detail:Jun,key:Zun,order:eln,...c4e}=ore,sXt=Ye(c4e);function oXt(e){return!!ore[e]}function aXt(e){switch(e){case il:case up:case lp:case cg:case sl:case fg:case Zy:case ev:return!0;case Qy:case Jy:case l_:return!1}}const f4e={...are,...ure,...l4e,...c4e},XF=Ye(f4e);function dg(e){return!!f4e[e]}function uXt(e,t){return cXt(e)[t]}const d4e={arc:"always",area:"always",bar:"always",circle:"always",geoshape:"always",image:"always",line:"always",rule:"always",point:"always",rect:"always",square:"always",trail:"always",text:"always",tick:"always"},{geoshape:tln,...lXt}=d4e;function cXt(e){switch(e){case il:case up:case lp:case YF:case LR:case qF:case bb:case WF:case Dx:case fg:case Qy:case Jy:case Zy:case HF:case cm:case fm:return d4e;case Ai:case po:case Xy:case tT:case gd:case yd:return lXt;case pd:case ap:case vd:case zc:return{area:"always",bar:"always",image:"always",rect:"always",rule:"always",circle:"binned",point:"binned",square:"binned",tick:"binned",line:"binned",trail:"binned"};case cg:return{point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",text:"always",line:"always",trail:"always"};case ev:return{line:"always",point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",geoshape:"always"};case sl:return{point:"always",geoshape:"always"};case MR:return{text:"always"};case l_:return{point:"always",square:"always",text:"always"};case GF:return{image:"always"};case Jc:return{text:"always",arc:"always"};case md:return{text:"always",arc:"always"};case lg:case ug:return{arc:"always"}}}function xB(e){switch(e){case Ai:case po:case Jc:case md:case Xy:case tT:case cg:case l_:case Zy:case fg:case Qy:case Jy:case pd:case ap:case lg:case ug:return;case HF:case cm:case fm:case sl:case ev:case MR:case bb:case WF:case GF:case YF:return"discrete";case il:case up:case lp:return"flexible";case gd:case yd:case vd:case zc:case LR:case qF:case Dx:return}}const fXt={argmax:1,argmin:1,average:1,count:1,distinct:1,exponential:1,exponentialb:1,product:1,max:1,mean:1,median:1,min:1,missing:1,q1:1,q3:1,ci0:1,ci1:1,stderr:1,stdev:1,stdevp:1,sum:1,valid:1,values:1,variance:1,variancep:1},dXt={count:1,min:1,max:1};function Bm(e){return!!e&&!!e.argmin}function tv(e){return!!e&&!!e.argmax}function lre(e){return mt(e)&&!!fXt[e]}const hXt=new Set(["count","valid","missing","distinct"]);function h4e(e){return mt(e)&&hXt.has(e)}function pXt(e){return mt(e)&&Hn(["min","max"],e)}const mXt=new Set(["count","sum","distinct","valid","missing"]),gXt=new Set(["mean","average","median","q1","q3","min","max"]);function p4e(e){return Gy(e)&&(e=u5(e,void 0)),"bin"+Ye(e).map(t=>QF(e[t])?Ci(`_${t}_${yy(e[t])}`):Ci(`_${t}_${e[t]}`)).join("")}function si(e){return e===!0||f_(e)&&!e.binned}function Co(e){return e==="binned"||f_(e)&&e.binned===!0}function f_(e){return gt(e)}function QF(e){return e==null?void 0:e.param}function Sge(e){switch(e){case cm:case fm:case cg:case il:case up:case lp:case Zy:case fg:case Qy:case Jy:case sl:return 6;case ev:return 4;default:return 10}}function jR(e){return!!(e!=null&&e.expr)}function ku(e){const t=Ye(e||{}),n={};for(const r of t)n[r]=wl(e[r]);return n}function m4e(e){const{anchor:t,frame:n,offset:r,orient:i,angle:s,limit:o,color:a,subtitleColor:u,subtitleFont:l,subtitleFontSize:c,subtitleFontStyle:f,subtitleFontWeight:d,subtitleLineHeight:h,subtitlePadding:p,...m}=e,g={...m,...a?{fill:a}:{}},y={...t?{anchor:t}:{},...n?{frame:n}:{},...r?{offset:r}:{},...i?{orient:i}:{},...s!==void 0?{angle:s}:{},...o!==void 0?{limit:o}:{}},v={...u?{subtitleColor:u}:{},...l?{subtitleFont:l}:{},...c?{subtitleFontSize:c}:{},...f?{subtitleFontStyle:f}:{},...d?{subtitleFontWeight:d}:{},...h?{subtitleLineHeight:h}:{},...p?{subtitlePadding:p}:{}},b=Rx(e,["align","baseline","dx","dy","limit"]);return{titleMarkConfig:g,subtitleMarkConfig:b,nonMarkTitleProperties:y,subtitle:v}}function Fg(e){return mt(e)||je(e)&&mt(e[0])}function Rt(e){return!!(e!=null&&e.signal)}function nv(e){return!!e.step}function yXt(e){return je(e)?!1:"fields"in e&&!("data"in e)}function vXt(e){return je(e)?!1:"fields"in e&&"data"in e}function tm(e){return je(e)?!1:"field"in e&&"data"in e}const bXt={aria:1,description:1,ariaRole:1,ariaRoleDescription:1,blend:1,opacity:1,fill:1,fillOpacity:1,stroke:1,strokeCap:1,strokeWidth:1,strokeOpacity:1,strokeDash:1,strokeDashOffset:1,strokeJoin:1,strokeOffset:1,strokeMiterLimit:1,startAngle:1,endAngle:1,padAngle:1,innerRadius:1,outerRadius:1,size:1,shape:1,interpolate:1,tension:1,orient:1,align:1,baseline:1,text:1,dir:1,dx:1,dy:1,ellipsis:1,limit:1,radius:1,theta:1,angle:1,font:1,fontSize:1,fontWeight:1,fontStyle:1,lineBreak:1,lineHeight:1,cursor:1,href:1,tooltip:1,cornerRadius:1,cornerRadiusTopLeft:1,cornerRadiusTopRight:1,cornerRadiusBottomLeft:1,cornerRadiusBottomRight:1,aspect:1,width:1,height:1,url:1,smooth:1},_Xt=Ye(bXt),wXt={arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1},cq=["cornerRadius","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight"];function g4e(e){const t=je(e.condition)?e.condition.map(Tge):Tge(e.condition);return{...wl(e),condition:t}}function wl(e){if(jR(e)){const{expr:t,...n}=e;return{signal:t,...n}}return e}function Tge(e){if(jR(e)){const{expr:t,...n}=e;return{signal:t,...n}}return e}function di(e){if(jR(e)){const{expr:t,...n}=e;return{signal:t,...n}}return Rt(e)?e:e!==void 0?{value:e}:void 0}function EXt(e){return Rt(e)?e.signal:rt(e)}function Cge(e){return Rt(e)?e.signal:rt(e.value)}function Of(e){return Rt(e)?e.signal:e==null?null:rt(e)}function xXt(e,t,n){for(const r of n){const i=Um(r,t.markDef,t.config);i!==void 0&&(e[r]=di(i))}return e}function y4e(e){return[].concat(e.type,e.style??[])}function wr(e,t,n,r={}){const{vgChannel:i,ignoreVgConfig:s}=r;return i&&t[i]!==void 0?t[i]:t[e]!==void 0?t[e]:s&&(!i||i===e)?void 0:Um(e,t,n,r)}function Um(e,t,n,{vgChannel:r}={}){return fs(r?FM(e,t,n.style):void 0,FM(e,t,n.style),r?n[t.type][r]:void 0,n[t.type][e],r?n.mark[r]:n.mark[e])}function FM(e,t,n){return v4e(e,y4e(t),n)}function v4e(e,t,n){t=pt(t);let r;for(const i of t){const s=n[i];s&&s[e]!==void 0&&(r=s[e])}return r}function b4e(e,t){return pt(e).reduce((n,r)=>(n.field.push(at(r,t)),n.order.push(r.sort??"ascending"),n),{field:[],order:[]})}function _4e(e,t){const n=[...e];return t.forEach(r=>{for(const i of n)if(kl(i,r))return;n.push(r)}),n}function w4e(e,t){return kl(e,t)||!t?e:e?[...pt(e),...pt(t)].join(", "):t}function E4e(e,t){const n=e.value,r=t.value;if(n==null||r===null)return{explicit:e.explicit,value:null};if((Fg(n)||Rt(n))&&(Fg(r)||Rt(r)))return{explicit:e.explicit,value:w4e(n,r)};if(Fg(n)||Rt(n))return{explicit:e.explicit,value:n};if(Fg(r)||Rt(r))return{explicit:e.explicit,value:r};if(!Fg(n)&&!Rt(n)&&!Fg(r)&&!Rt(r))return{explicit:e.explicit,value:_4e(n,r)};throw new Error("It should never reach here")}function cre(e){return`Invalid specification ${Br(e)}. Make sure the specification includes at least one of the following properties: "mark", "layer", "facet", "hconcat", "vconcat", "concat", or "repeat".`}const SXt='Autosize "fit" only works for single views and layered views.';function Age(e){return`${e=="width"?"Width":"Height"} "container" only works for single views and layered views.`}function Ige(e){const t=e=="width"?"Width":"Height",n=e=="width"?"x":"y";return`${t} "container" only works well with autosize "fit" or "fit-${n}".`}function kge(e){return e?`Dropping "fit-${e}" because spec has discrete ${ol(e)}.`:'Dropping "fit" because spec has discrete size.'}function fre(e){return`Unknown field for ${e}. Cannot calculate view size.`}function Rge(e){return`Cannot project a selection on encoding channel "${e}", which has no field.`}function TXt(e,t){return`Cannot project a selection on encoding channel "${e}" as it uses an aggregate function ("${t}").`}function CXt(e){return`The "nearest" transform is not supported for ${e} marks.`}function x4e(e){return`Selection not supported for ${e} yet.`}function AXt(e){return`Cannot find a selection named "${e}".`}const IXt="Scale bindings are currently only supported for scales with unbinned, continuous domains.",kXt="Sequntial scales are deprecated. The available quantitative scale type values are linear, log, pow, sqrt, symlog, time and utc",RXt="Legend bindings are only supported for selections over an individual field or encoding channel.";function NXt(e){return`Lookups can only be performed on selection parameters. "${e}" is a variable parameter.`}function DXt(e){return`Cannot define and lookup the "${e}" selection in the same view. Try moving the lookup into a second, layered view?`}const PXt="The same selection must be used to override scale domains in a layered view.",OXt='Interval selections should be initialized using "x", "y", "longitude", or "latitude" keys.';function $Xt(e){return`Unknown repeated value "${e}".`}function Nge(e){return`The "columns" property cannot be used when "${e}" has nested row/column.`}const MXt="Axes cannot be shared in concatenated or repeated views yet (https://github.com/vega/vega-lite/issues/2415).";function LXt(e){return`Unrecognized parse "${e}".`}function Dge(e,t,n){return`An ancestor parsed field "${e}" as ${n} but a child wants to parse the field as ${t}.`}const FXt="Attempt to add the same child twice.";function jXt(e){return`Ignoring an invalid transform: ${Br(e)}.`}const BXt='If "from.fields" is not specified, "as" has to be a string that specifies the key to be used for the data from the secondary source.';function Pge(e){return`Config.customFormatTypes is not true, thus custom format type and format for channel ${e} are dropped.`}function UXt(e){const{parentProjection:t,projection:n}=e;return`Layer's shared projection ${Br(t)} is overridden by a child projection ${Br(n)}.`}const zXt="Arc marks uses theta channel rather than angle, replacing angle with theta.";function VXt(e){return`${e}Offset dropped because ${e} is continuous`}function HXt(e,t,n){return`Channel ${e} is a ${t}. Converted to {value: ${Br(n)}}.`}function S4e(e){return`Invalid field type "${e}".`}function qXt(e,t){return`Invalid field type "${e}" for aggregate: "${t}", using "quantitative" instead.`}function WXt(e){return`Invalid aggregation operator "${e}".`}function T4e(e,t){const{fill:n,stroke:r}=t;return`Dropping color ${e} as the plot also has ${n&&r?"fill and stroke":n?"fill":"stroke"}.`}function GXt(e){return`Position range does not support relative band size for ${e}.`}function fq(e,t){return`Dropping ${Br(e)} from channel "${t}" since it does not contain any data field, datum, value, or signal.`}const YXt="Line marks cannot encode size with a non-groupby field. You may want to use trail marks instead.";function JF(e,t,n){return`${e} dropped as it is incompatible with "${t}".`}function KXt(e){return`${e}-encoding is dropped as ${e} is not a valid encoding channel.`}function XXt(e){return`${e} encoding should be discrete (ordinal / nominal / binned).`}function QXt(e){return`${e} encoding should be discrete (ordinal / nominal / binned) or use a discretizing scale (e.g. threshold).`}function JXt(e){return`Facet encoding dropped as ${e.join(" and ")} ${e.length>1?"are":"is"} also specified.`}function SB(e,t){return`Using discrete channel "${e}" to encode "${t}" field can be misleading as it does not encode ${t==="ordinal"?"order":"magnitude"}.`}function ZXt(e){return`The ${e} for range marks cannot be an expression`}function eQt(e,t){return`Line mark is for continuous lines and thus cannot be used with ${e&&t?"x2 and y2":e?"x2":"y2"}. We will use the rule mark (line segments) instead.`}function tQt(e,t){return`Specified orient "${e}" overridden with "${t}".`}function nQt(e){return`Cannot use the scale property "${e}" with non-color channel.`}function rQt(e){return`Cannot use the relative band size with ${e} scale.`}function iQt(e){return`Using unaggregated domain with raw field has no effect (${Br(e)}).`}function sQt(e){return`Unaggregated domain not applicable for "${e}" since it produces values outside the origin domain of the source data.`}function oQt(e){return`Unaggregated domain is currently unsupported for log scale (${Br(e)}).`}function aQt(e){return`Cannot apply size to non-oriented mark "${e}".`}function uQt(e,t,n){return`Channel "${e}" does not work with "${t}" scale. We are using "${n}" scale instead.`}function lQt(e,t){return`FieldDef does not work with "${e}" scale. We are using "${t}" scale instead.`}function C4e(e,t,n){return`${n}-scale's "${t}" is dropped as it does not work with ${e} scale.`}function A4e(e){return`The step for "${e}" is dropped because the ${e==="width"?"x":"y"} is continuous.`}function cQt(e,t,n,r){return`Conflicting ${t.toString()} property "${e.toString()}" (${Br(n)} and ${Br(r)}). Using ${Br(n)}.`}function fQt(e,t,n,r){return`Conflicting ${t.toString()} property "${e.toString()}" (${Br(n)} and ${Br(r)}). Using the union of the two domains.`}function dQt(e){return`Setting the scale to be independent for "${e}" means we also have to set the guide (axis or legend) to be independent.`}function hQt(e){return`Dropping sort property ${Br(e)} as unioned domains only support boolean or op "count", "min", and "max".`}const Oge="Domains that should be unioned has conflicting sort properties. Sort will be set to true.",pQt="Detected faceted independent scales that union domain of multiple fields from different data sources. We will use the first field. The result view size may be incorrect.",mQt="Detected faceted independent scales that union domain of the same fields from different source. We will assume that this is the same field from a different fork of the same data source. However, if this is not the case, the result view size may be incorrect.",gQt="Detected faceted independent scales that union domain of multiple fields from the same data source. We will use the first field. The result view size may be incorrect.";function yQt(e){return`Cannot stack "${e}" if there is already "${e}2".`}function vQt(e){return`Stack is applied to a non-linear scale (${e}).`}function bQt(e){return`Stacking is applied even though the aggregate function is non-summative ("${e}").`}function jM(e,t){return`Invalid ${e}: ${Br(t)}.`}function _Qt(e){return`Dropping day from datetime ${Br(e)} as day cannot be combined with other units.`}function wQt(e,t){return`${t?"extent ":""}${t&&e?"and ":""}${e?"center ":""}${t&&e?"are ":"is "}not needed when data are aggregated.`}function EQt(e,t,n){return`${e} is not usually used with ${t} for ${n}.`}function xQt(e,t){return`Continuous axis should not have customized aggregation function ${e}; ${t} already agregates the axis.`}function $ge(e){return`1D error band does not support ${e}.`}function I4e(e){return`Channel ${e} is required for "binned" bin.`}function SQt(e){return`Channel ${e} should not be used with "binned" bin.`}function TQt(e){return`Domain for ${e} is required for threshold scale.`}const k4e=HZ(VZ);let Px=k4e;function CQt(e){return Px=e,Px}function AQt(){return Px=k4e,Px}function Ze(...e){Px.warn(...e)}function IQt(...e){Px.debug(...e)}function d_(e){if(e&&gt(e)){for(const t of hre)if(t in e)return!0}return!1}const R4e=["january","february","march","april","may","june","july","august","september","october","november","december"],kQt=R4e.map(e=>e.substr(0,3)),N4e=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],RQt=N4e.map(e=>e.substr(0,3));function NQt(e){if(VF(e)&&(e=+e),lr(e))return e>4&&Ze(jM("quarter",e)),e-1;throw new Error(jM("quarter",e))}function DQt(e){if(VF(e)&&(e=+e),lr(e))return e-1;{const t=e.toLowerCase(),n=R4e.indexOf(t);if(n!==-1)return n;const r=t.substr(0,3),i=kQt.indexOf(r);if(i!==-1)return i;throw new Error(jM("month",e))}}function PQt(e){if(VF(e)&&(e=+e),lr(e))return e%7;{const t=e.toLowerCase(),n=N4e.indexOf(t);if(n!==-1)return n;const r=t.substr(0,3),i=RQt.indexOf(r);if(i!==-1)return i;throw new Error(jM("day",e))}}function dre(e,t){const n=[];if(t&&e.day!==void 0&&Ye(e).length>1&&(Ze(_Qt(e)),e=nn(e),delete e.day),e.year!==void 0?n.push(e.year):n.push(2012),e.month!==void 0){const r=t?DQt(e.month):e.month;n.push(r)}else if(e.quarter!==void 0){const r=t?NQt(e.quarter):e.quarter;n.push(lr(r)?r*3:`${r}*3`)}else n.push(0);if(e.date!==void 0)n.push(e.date);else if(e.day!==void 0){const r=t?PQt(e.day):e.day;n.push(lr(r)?r+1:`${r}+1`)}else n.push(1);for(const r of["hours","minutes","seconds","milliseconds"]){const i=e[r];n.push(typeof i>"u"?0:i)}return n}function _b(e){const n=dre(e,!0).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}function OQt(e){const n=dre(e,!1).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}function $Qt(e){const t=dre(e,!0);return e.utc?+new Date(Date.UTC(...t)):+new Date(...t)}const D4e={year:1,quarter:1,month:1,week:1,day:1,dayofyear:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1},hre=Ye(D4e);function MQt(e){return!!D4e[e]}function h_(e){return gt(e)?e.binned:P4e(e)}function P4e(e){return e&&e.startsWith("binned")}function pre(e){return e.startsWith("utc")}function LQt(e){return e.substring(3)}const FQt={"year-month":"%b %Y ","year-month-date":"%b %d, %Y "};function ZF(e){return hre.filter(t=>$4e(e,t))}function O4e(e){const t=ZF(e);return t[t.length-1]}function $4e(e,t){const n=e.indexOf(t);return!(n<0||n>0&&t==="seconds"&&e.charAt(n-1)==="i"||e.length>n+3&&t==="day"&&e.charAt(n+3)==="o"||n>0&&t==="year"&&e.charAt(n-1)==="f")}function jQt(e,t,{end:n}={end:!1}){const r=tre(t),i=pre(e)?"utc":"";function s(u){return u==="quarter"?`(${i}quarter(${r})-1)`:`${i}${u}(${r})`}let o;const a={};for(const u of hre)$4e(e,u)&&(a[u]=s(u),o=u);return n&&(a[o]+="+1"),OQt(a)}function M4e(e){if(!e)return;const t=ZF(e);return`timeUnitSpecifier(${Br(t)}, ${Br(FQt)})`}function BQt(e,t,n){if(!e)return;const r=M4e(e);return`${n||pre(e)?"utc":"time"}Format(${t}, ${r})`}function lo(e){if(!e)return;let t;return mt(e)?P4e(e)?t={unit:e.substring(6),binned:!0}:t={unit:e}:gt(e)&&(t={...e,...e.unit?{unit:e.unit}:{}}),pre(t.unit)&&(t.utc=!0,t.unit=LQt(t.unit)),t}function UQt(e){const{utc:t,...n}=lo(e);return n.unit?(t?"utc":"")+Ye(n).map(r=>Ci(`${r==="unit"?"":`_${r}_`}${n[r]}`)).join(""):(t?"utc":"")+"timeunit"+Ye(n).map(r=>Ci(`_${r}_${n[r]}`)).join("")}function L4e(e,t=n=>n){const n=lo(e),r=O4e(n.unit);if(r&&r!=="day"){const i={year:2001,month:1,date:1,hours:0,minutes:0,seconds:0,milliseconds:0},{step:s,part:o}=F4e(r,n.step),a={...i,[o]:+i[o]+s};return`${t(_b(a))} - ${t(_b(i))}`}}const zQt={year:1,month:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1};function VQt(e){return!!zQt[e]}function F4e(e,t=1){if(VQt(e))return{part:e,step:t};switch(e){case"day":case"dayofyear":return{part:"date",step:t};case"quarter":return{part:"month",step:t*3};case"week":return{part:"date",step:t*7}}}function HQt(e){return e==null?void 0:e.param}function mre(e){return!!(e!=null&&e.field)&&e.equal!==void 0}function gre(e){return!!(e!=null&&e.field)&&e.lt!==void 0}function yre(e){return!!(e!=null&&e.field)&&e.lte!==void 0}function vre(e){return!!(e!=null&&e.field)&&e.gt!==void 0}function bre(e){return!!(e!=null&&e.field)&&e.gte!==void 0}function _re(e){if(e!=null&&e.field){if(je(e.range)&&e.range.length===2)return!0;if(Rt(e.range))return!0}return!1}function wre(e){return!!(e!=null&&e.field)&&(je(e.oneOf)||je(e.in))}function qQt(e){return!!(e!=null&&e.field)&&e.valid!==void 0}function j4e(e){return wre(e)||mre(e)||_re(e)||gre(e)||vre(e)||yre(e)||bre(e)}function Ad(e,t){return l5(e,{timeUnit:t,wrapTime:!0})}function WQt(e,t){return e.map(n=>Ad(n,t))}function B4e(e,t=!0){const{field:n}=e,r=lo(e.timeUnit),{unit:i,binned:s}=r||{},o=at(e,{expr:"datum"}),a=i?`time(${s?o:jQt(i,n)})`:o;if(mre(e))return`${a}===${Ad(e.equal,i)}`;if(gre(e)){const u=e.lt;return`${a}<${Ad(u,i)}`}else if(vre(e)){const u=e.gt;return`${a}>${Ad(u,i)}`}else if(yre(e)){const u=e.lte;return`${a}<=${Ad(u,i)}`}else if(bre(e)){const u=e.gte;return`${a}>=${Ad(u,i)}`}else{if(wre(e))return`indexof([${WQt(e.oneOf,i).join(",")}], ${a}) !== -1`;if(qQt(e))return Ere(a,e.valid);if(_re(e)){const{range:u}=e,l=Rt(u)?{signal:`${u.signal}[0]`}:u[0],c=Rt(u)?{signal:`${u.signal}[1]`}:u[1];if(l!==null&&c!==null&&t)return"inrange("+a+", ["+Ad(l,i)+", "+Ad(c,i)+"])";const f=[];return l!==null&&f.push(`${a} >= ${Ad(l,i)}`),c!==null&&f.push(`${a} <= ${Ad(c,i)}`),f.length>0?f.join(" && "):"true"}}throw new Error(`Invalid field predicate: ${Br(e)}`)}function Ere(e,t=!0){return t?`isValid(${e}) && isFinite(+${e})`:`!isValid(${e}) || !isFinite(+${e})`}function GQt(e){return j4e(e)&&e.timeUnit?{...e,timeUnit:lo(e.timeUnit)}:e}const BR={quantitative:"quantitative",ordinal:"ordinal",temporal:"temporal",nominal:"nominal",geojson:"geojson"};function YQt(e){return e==="quantitative"||e==="temporal"}function U4e(e){return e==="ordinal"||e==="nominal"}const wb=BR.quantitative,xre=BR.ordinal,Ox=BR.temporal,Sre=BR.nominal,nT=BR.geojson;function KQt(e){if(e)switch(e=e.toLowerCase(),e){case"q":case wb:return"quantitative";case"t":case Ox:return"temporal";case"o":case xre:return"ordinal";case"n":case Sre:return"nominal";case nT:return"geojson"}}const Yu={LINEAR:"linear",LOG:"log",POW:"pow",SQRT:"sqrt",SYMLOG:"symlog",IDENTITY:"identity",SEQUENTIAL:"sequential",TIME:"time",UTC:"utc",QUANTILE:"quantile",QUANTIZE:"quantize",THRESHOLD:"threshold",BIN_ORDINAL:"bin-ordinal",ORDINAL:"ordinal",POINT:"point",BAND:"band"},dq={linear:"numeric",log:"numeric",pow:"numeric",sqrt:"numeric",symlog:"numeric",identity:"numeric",sequential:"numeric",time:"time",utc:"time",ordinal:"ordinal","bin-ordinal":"bin-ordinal",point:"ordinal-position",band:"ordinal-position",quantile:"discretizing",quantize:"discretizing",threshold:"discretizing"};function XQt(e,t){const n=dq[e],r=dq[t];return n===r||n==="ordinal-position"&&r==="time"||r==="ordinal-position"&&n==="time"}const QQt={linear:0,log:1,pow:1,sqrt:1,symlog:1,identity:1,sequential:1,time:0,utc:0,point:10,band:11,ordinal:0,"bin-ordinal":0,quantile:0,quantize:0,threshold:0};function Mge(e){return QQt[e]}const z4e=new Set(["linear","log","pow","sqrt","symlog"]),V4e=new Set([...z4e,"time","utc"]);function H4e(e){return z4e.has(e)}const q4e=new Set(["quantile","quantize","threshold"]),JQt=new Set([...V4e,...q4e,"sequential","identity"]),ZQt=new Set(["ordinal","bin-ordinal","point","band"]);function co(e){return ZQt.has(e)}function Yl(e){return JQt.has(e)}function $f(e){return V4e.has(e)}function $x(e){return q4e.has(e)}const eJt={pointPadding:.5,barBandPaddingInner:.1,rectBandPaddingInner:0,bandWithNestedOffsetPaddingInner:.2,bandWithNestedOffsetPaddingOuter:.2,minBandSize:2,minFontSize:8,maxFontSize:40,minOpacity:.3,maxOpacity:.8,minSize:9,minStrokeWidth:1,maxStrokeWidth:4,quantileCount:4,quantizeCount:4,zero:!0};function tJt(e){return!mt(e)&&!!e.name}function W4e(e){return e==null?void 0:e.param}function nJt(e){return e==null?void 0:e.unionWith}function rJt(e){return gt(e)&&"field"in e}const iJt={type:1,domain:1,domainMax:1,domainMin:1,domainMid:1,domainRaw:1,align:1,range:1,rangeMax:1,rangeMin:1,scheme:1,bins:1,reverse:1,round:1,clamp:1,nice:1,base:1,exponent:1,constant:1,interpolate:1,zero:1,padding:1,paddingInner:1,paddingOuter:1},{type:nln,domain:rln,range:iln,rangeMax:sln,rangeMin:oln,scheme:aln,...sJt}=iJt,oJt=Ye(sJt);function hq(e,t){switch(t){case"type":case"domain":case"reverse":case"range":return!0;case"scheme":case"interpolate":return!["point","band","identity"].includes(e);case"bins":return!["point","band","identity","ordinal"].includes(e);case"round":return $f(e)||e==="band"||e==="point";case"padding":case"rangeMin":case"rangeMax":return $f(e)||["point","band"].includes(e);case"paddingOuter":case"align":return["point","band"].includes(e);case"paddingInner":return e==="band";case"domainMax":case"domainMid":case"domainMin":case"domainRaw":case"clamp":return $f(e);case"nice":return $f(e)||e==="quantize"||e==="threshold";case"exponent":return e==="pow";case"base":return e==="log";case"constant":return e==="symlog";case"zero":return Yl(e)&&!Hn(["log","time","utc","threshold","quantile"],e)}}function G4e(e,t){switch(t){case"interpolate":case"scheme":case"domainMid":return _E(e)?void 0:nQt(t);case"align":case"type":case"bins":case"domain":case"domainMax":case"domainMin":case"domainRaw":case"range":case"base":case"exponent":case"constant":case"nice":case"padding":case"paddingInner":case"paddingOuter":case"rangeMax":case"rangeMin":case"reverse":case"round":case"clamp":case"zero":return}}function aJt(e,t){return Hn([xre,Sre],t)?e===void 0||co(e):t===Ox?Hn([Yu.TIME,Yu.UTC,void 0],e):t===wb?H4e(e)||$x(e)||e===void 0:!0}function uJt(e,t,n=!1){if(!dg(e))return!1;switch(e){case Ai:case po:case Xy:case tT:case Jc:case md:return $f(t)||t==="band"?!0:t==="point"?!n:!1;case cg:case Zy:case fg:case Qy:case Jy:case l_:return $f(t)||$x(t)||Hn(["band","point","ordinal"],t);case il:case up:case lp:return t!=="band";case ev:case sl:return t==="ordinal"||$x(t)}}function Tre(e){const{channel:t,channelDef:n,markDef:r,scale:i,config:s}=e,o=Are(e);return et(n)&&!h4e(n.aggregate)&&i&&$f(i.get("type"))?lJt({fieldDef:n,channel:t,markDef:r,ref:o,config:s}):o}function lJt({fieldDef:e,channel:t,markDef:n,ref:r,config:i}){return wr("invalid",n,i)===null?[cJt(e,t),r]:r}function cJt(e,t){const n=Cre(e,!0),i=c_(t)==="y"?{field:{group:"height"}}:{value:0};return{test:n,...i}}function Cre(e,t=!0){return Ere(mt(e)?e:at(e,{expr:"datum"}),!t)}function fJt(e){const{datum:t}=e;return d_(t)?_b(t):`${Br(t)}`}function D1(e,t,n,r){const i={};if(t&&(i.scale=t),dp(e)){const{datum:s}=e;d_(s)?i.signal=_b(s):Rt(s)?i.signal=s.signal:jR(s)?i.signal=s.expr:i.value=s}else i.field=at(e,n);if(r){const{offset:s,band:o}=r;s&&(i.offset=s),o&&(i.band=o)}return i}function BM({scaleName:e,fieldOrDatumDef:t,fieldOrDatumDef2:n,offset:r,startSuffix:i,endSuffix:s="end",bandPosition:o=.5}){const a=!Rt(o)&&0<o&&o<1?"datum":void 0,u=at(t,{expr:a,suffix:i}),l=n!==void 0?at(n,{expr:a}):at(t,{suffix:s,expr:a}),c={};if(o===0||o===1){c.scale=e;const f=o===0?u:l;c.field=f}else{const f=Rt(o)?`(1-${o.signal}) * ${u} + ${o.signal} * ${l}`:`${1-o} * ${u} + ${o} * ${l}`;c.signal=`scale("${e}", ${f})`}return r&&(c.offset=r),c}function dJt({scaleName:e,fieldDef:t}){const n=at(t,{expr:"datum"}),r=at(t,{expr:"datum",suffix:"end"});return`abs(scale("${e}", ${r}) - scale("${e}", ${n}))`}function Are({channel:e,channelDef:t,channel2Def:n,markDef:r,config:i,scaleName:s,scale:o,stack:a,offset:u,defaultRef:l,bandPosition:c}){if(t){if(ln(t)){const f=o==null?void 0:o.get("type");if(ru(t)){c??(c=by({fieldDef:t,fieldDef2:n,markDef:r,config:i}));const{bin:d,timeUnit:h,type:p}=t;if(si(d)||c&&h&&p===Ox)return a!=null&&a.impute?D1(t,s,{binSuffix:"mid"},{offset:u}):c&&!co(f)?BM({scaleName:s,fieldOrDatumDef:t,bandPosition:c,offset:u}):D1(t,s,HR(t,e)?{binSuffix:"range"}:{},{offset:u});if(Co(d)){if(et(n))return BM({scaleName:s,fieldOrDatumDef:t,fieldOrDatumDef2:n,bandPosition:c,offset:u});Ze(I4e(e===Ai?pd:ap))}}return D1(t,s,co(f)?{binSuffix:"range"}:{},{offset:u,band:f==="band"?c??t.bandPosition??.5:void 0})}else if(rd(t)){const f=t.value,d=u?{offset:u}:{};return{...rA(e,f),...d}}}return _n(l)&&(l=l()),l&&{...l,...u?{offset:u}:{}}}function rA(e,t){return Hn(["x","x2"],e)&&t==="width"?{field:{group:"width"}}:Hn(["y","y2"],e)&&t==="height"?{field:{group:"height"}}:di(t)}function Eb(e){return e&&e!=="number"&&e!=="time"}function Y4e(e,t,n){return`${e}(${t}${n?`, ${Br(n)}`:""})`}const hJt="  ";function Ire({fieldOrDatumDef:e,format:t,formatType:n,expr:r,normalizeStack:i,config:s}){var u,l;if(Eb(n))return Mf({fieldOrDatumDef:e,format:t,formatType:n,expr:r,config:s});const o=K4e(e,r,i),a=Mx(e);if(t===void 0&&n===void 0&&s.customFormatTypes){if(a==="quantitative"){if(i&&s.normalizedNumberFormatType)return Mf({fieldOrDatumDef:e,format:s.normalizedNumberFormat,formatType:s.normalizedNumberFormatType,expr:r,config:s});if(s.numberFormatType)return Mf({fieldOrDatumDef:e,format:s.numberFormat,formatType:s.numberFormatType,expr:r,config:s})}if(a==="temporal"&&s.timeFormatType&&et(e)&&e.timeUnit===void 0)return Mf({fieldOrDatumDef:e,format:s.timeFormat,formatType:s.timeFormatType,expr:r,config:s})}if(Fx(e)){const c=mJt({field:o,timeUnit:et(e)?(u=lo(e.timeUnit))==null?void 0:u.unit:void 0,format:t,formatType:s.timeFormatType,rawTimeFormat:s.timeFormat,isUTCScale:m_(e)&&((l=e.scale)==null?void 0:l.type)===Yu.UTC});return c?{signal:c}:void 0}if(t=pq({type:a,specifiedFormat:t,config:s,normalizeStack:i}),et(e)&&si(e.bin)){const c=at(e,{expr:r,binSuffix:"end"});return{signal:UR(o,c,t,n,s)}}else return t||Mx(e)==="quantitative"?{signal:`${J4e(o,t)}`}:{signal:`isValid(${o}) ? ${o} : ""+${o}`}}function K4e(e,t,n){return et(e)?n?`${at(e,{expr:t,suffix:"end"})}-${at(e,{expr:t,suffix:"start"})}`:at(e,{expr:t}):fJt(e)}function Mf({fieldOrDatumDef:e,format:t,formatType:n,expr:r,normalizeStack:i,config:s,field:o}){if(o??(o=K4e(e,r,i)),o!=="datum.value"&&et(e)&&si(e.bin)){const a=at(e,{expr:r,binSuffix:"end"});return{signal:UR(o,a,t,n,s)}}return{signal:Y4e(n,o,t)}}function X4e(e,t,n,r,i,s){var o;if(!(mt(r)&&Eb(r))&&!(n===void 0&&r===void 0&&i.customFormatTypes&&Mx(e)==="quantitative"&&(i.normalizedNumberFormatType&&Lx(e)&&e.stack==="normalize"||i.numberFormatType))){if(Lx(e)&&e.stack==="normalize"&&i.normalizedNumberFormat)return pq({type:"quantitative",config:i,normalizeStack:!0});if(Fx(e)){const a=et(e)?(o=lo(e.timeUnit))==null?void 0:o.unit:void 0;return a===void 0&&i.customFormatTypes&&i.timeFormatType?void 0:pJt({specifiedFormat:n,timeUnit:a,config:i,omitTimeFormatConfig:s})}return pq({type:t,specifiedFormat:n,config:i})}}function Q4e(e,t,n){var r;if(e&&(Rt(e)||e==="number"||e==="time"))return e;if(Fx(t)&&n!=="time"&&n!=="utc")return et(t)&&((r=lo(t==null?void 0:t.timeUnit))!=null&&r.utc)?"utc":"time"}function pq({type:e,specifiedFormat:t,config:n,normalizeStack:r}){if(mt(t))return t;if(e===wb)return r?n.normalizedNumberFormat:n.numberFormat}function pJt({specifiedFormat:e,timeUnit:t,config:n,omitTimeFormatConfig:r}){return e||(t?{signal:M4e(t)}:r?void 0:n.timeFormat)}function J4e(e,t){return`format(${e}, "${t||""}")`}function Lge(e,t,n,r){return Eb(n)?Y4e(n,e,t):J4e(e,(mt(t)?t:void 0)??r.numberFormat)}function UR(e,t,n,r,i){if(n===void 0&&r===void 0&&i.customFormatTypes&&i.numberFormatType)return UR(e,t,i.numberFormat,i.numberFormatType,i);const s=Lge(e,n,r,i),o=Lge(t,n,r,i);return`${Ere(e,!1)} ? "null" : ${s} + "${hJt}" + ${o}`}function mJt({field:e,timeUnit:t,format:n,formatType:r,rawTimeFormat:i,isUTCScale:s}){return!t||n?!t&&r?`${r}(${e}, '${n}')`:(n=mt(n)?n:i,`${s?"utc":"time"}Format(${e}, '${n}')`):BQt(t,e,s)}const lu={arc:"arc",area:"area",bar:"bar",image:"image",line:"line",point:"point",rect:"rect",rule:"rule",text:"text",tick:"tick",trail:"trail",circle:"circle",square:"square",geoshape:"geoshape"},Z4e=lu.arc,e5=lu.area,t5=lu.bar,gJt=lu.image,n5=lu.line,r5=lu.point,yJt=lu.rect,UM=lu.rule,eFe=lu.text,kre=lu.tick,vJt=lu.trail,Rre=lu.circle,Nre=lu.square,tFe=lu.geoshape;function p_(e){return["line","area","trail"].includes(e)}function GI(e){return["rect","bar","image","arc"].includes(e)}const bJt=new Set(Ye(lu));function Bh(e){return e.type}const _Jt=["stroke","strokeWidth","strokeDash","strokeDashOffset","strokeOpacity","strokeJoin","strokeMiterLimit"],wJt=["fill","fillOpacity"],EJt=[..._Jt,...wJt],xJt={color:1,filled:1,invalid:1,order:1,radius2:1,theta2:1,timeUnitBandSize:1,timeUnitBandPosition:1},Fge=Ye(xJt),SJt={area:["line","point"],bar:["binSpacing","continuousBandSize","discreteBandSize","minBandSize"],rect:["binSpacing","continuousBandSize","discreteBandSize","minBandSize"],line:["point"],tick:["bandSize","thickness"]},TJt={color:"#4c78a8",invalid:"filter",timeUnitBandSize:1},CJt={mark:1,arc:1,area:1,bar:1,circle:1,image:1,line:1,point:1,rect:1,rule:1,square:1,text:1,tick:1,trail:1,geoshape:1},nFe=Ye(CJt);function xb(e){return e&&e.band!=null}const AJt={horizontal:["cornerRadiusTopRight","cornerRadiusBottomRight"],vertical:["cornerRadiusTopLeft","cornerRadiusTopRight"]},rFe=5,IJt={binSpacing:1,continuousBandSize:rFe,minBandSize:.25,timeUnitBandPosition:.5},kJt={binSpacing:0,continuousBandSize:rFe,minBandSize:.25,timeUnitBandPosition:.5},RJt={thickness:1};function NJt(e){return Bh(e)?e.type:e}const i5="min",DJt={x:1,y:1,color:1,fill:1,stroke:1,strokeWidth:1,size:1,shape:1,fillOpacity:1,strokeOpacity:1,opacity:1,text:1};function jge(e){return e in DJt}function iFe(e){return!!(e!=null&&e.encoding)}function wh(e){return e&&(e.op==="count"||!!e.field)}function sFe(e){return e&&je(e)}function zR(e){return"row"in e||"column"in e}function Dre(e){return!!e&&"header"in e}function s5(e){return"facet"in e}function PJt(e){return e.param}function OJt(e){return e&&!mt(e)&&"repeat"in e}function Bge(e){const{field:t,timeUnit:n,bin:r,aggregate:i}=e;return{...n?{timeUnit:n}:{},...r?{bin:r}:{},...i?{aggregate:i}:{},field:t}}function Pre(e){return"sort"in e}function by({fieldDef:e,fieldDef2:t,markDef:n,config:r}){if(ln(e)&&e.bandPosition!==void 0)return e.bandPosition;if(et(e)){const{timeUnit:i,bin:s}=e;if(i&&!t)return Um("timeUnitBandPosition",n,r);if(si(s))return .5}}function oFe({channel:e,fieldDef:t,fieldDef2:n,markDef:r,config:i,scaleType:s,useVlSizeChannel:o}){var l,c,f;const a=ol(e),u=wr(o?"size":a,r,i,{vgChannel:a});if(u!==void 0)return u;if(et(t)){const{timeUnit:d,bin:h}=t;if(d&&!n)return{band:Um("timeUnitBandSize",r,i)};if(si(h)&&!co(s))return{band:1}}if(GI(r.type))return s?co(s)?((l=i[r.type])==null?void 0:l.discreteBandSize)||{band:1}:(c=i[r.type])==null?void 0:c.continuousBandSize:(f=i[r.type])==null?void 0:f.discreteBandSize}function aFe(e,t,n,r){return si(e.bin)||e.timeUnit&&ru(e)&&e.type==="temporal"?by({fieldDef:e,fieldDef2:t,markDef:n,config:r})!==void 0:!1}function uFe(e){return e&&!!e.sort&&!e.field}function o5(e){return e&&"condition"in e}function a5(e){const t=e==null?void 0:e.condition;return!!t&&!je(t)&&et(t)}function VR(e){const t=e==null?void 0:e.condition;return!!t&&!je(t)&&ln(t)}function $Jt(e){const t=e==null?void 0:e.condition;return!!t&&(je(t)||rd(t))}function et(e){return e&&(!!e.field||e.aggregate==="count")}function Mx(e){return e==null?void 0:e.type}function dp(e){return e&&"datum"in e}function c0(e){return ru(e)&&!VM(e)||zM(e)}function Uge(e){return ru(e)&&e.type==="quantitative"&&!e.bin||zM(e)}function zM(e){return dp(e)&&lr(e.datum)}function ln(e){return et(e)||dp(e)}function ru(e){return e&&("field"in e||e.aggregate==="count")&&"type"in e}function rd(e){return e&&"value"in e&&"value"in e}function m_(e){return e&&("scale"in e||"sort"in e)}function Lx(e){return e&&("axis"in e||"stack"in e||"impute"in e)}function lFe(e){return e&&"legend"in e}function cFe(e){return e&&("format"in e||"formatType"in e)}function MJt(e){return Gu(e,["legend","axis","header","scale"])}function LJt(e){return"op"in e}function at(e,t={}){let n=e.field;const r=t.prefix;let i=t.suffix,s="";if(jJt(e))n=Z6e("count");else{let o;if(!t.nofn)if(LJt(e))o=e.op;else{const{bin:a,aggregate:u,timeUnit:l}=e;si(a)?(o=p4e(a),i=(t.binSuffix??"")+(t.suffix??"")):u?tv(u)?(s=`["${n}"]`,n=`argmax_${u.argmax}`):Bm(u)?(s=`["${n}"]`,n=`argmin_${u.argmin}`):o=String(u):l&&!h_(l)&&(o=UQt(l),i=(!["range","mid"].includes(t.binSuffix)&&t.binSuffix||"")+(t.suffix??""))}o&&(n=n?`${o}_${n}`:o)}return i&&(n=`${n}_${i}`),r&&(n=`${r}_${n}`),t.forAs?eT(n):t.expr?X6e(n,t.expr)+s:Uc(n)+s}function VM(e){switch(e.type){case"nominal":case"ordinal":case"geojson":return!0;case"quantitative":return et(e)&&!!e.bin;case"temporal":return!1}throw new Error(S4e(e.type))}function FJt(e){var t;return m_(e)&&$x((t=e.scale)==null?void 0:t.type)}function jJt(e){return e.aggregate==="count"}function BJt(e,t){var o;const{field:n,bin:r,timeUnit:i,aggregate:s}=e;if(s==="count")return t.countTitle;if(si(r))return`${n} (binned)`;if(i&&!h_(i)){const a=(o=lo(i))==null?void 0:o.unit;if(a)return`${n} (${ZF(a).join("-")})`}else if(s)return tv(s)?`${n} for max ${s.argmax}`:Bm(s)?`${n} for min ${s.argmin}`:`${$R(s)} of ${n}`;return n}function UJt(e){const{aggregate:t,bin:n,timeUnit:r,field:i}=e;if(tv(t))return`${i} for argmax(${t.argmax})`;if(Bm(t))return`${i} for argmin(${t.argmin})`;const s=r&&!h_(r)?lo(r):void 0,o=t||(s==null?void 0:s.unit)||(s==null?void 0:s.maxbins)&&"timeunit"||si(n)&&"bin";return o?`${o.toUpperCase()}(${i})`:i}const fFe=(e,t)=>{switch(t.fieldTitle){case"plain":return e.field;case"functional":return UJt(e);default:return BJt(e,t)}};let dFe=fFe;function hFe(e){dFe=e}function zJt(){hFe(fFe)}function wE(e,t,{allowDisabling:n,includeDefault:r=!0}){var a;const i=(a=Ore(e))==null?void 0:a.title;if(!et(e))return i??e.title;const s=e,o=r?$re(s,t):void 0;return n?fs(i,s.title,o):i??s.title??o}function Ore(e){if(Lx(e)&&e.axis)return e.axis;if(lFe(e)&&e.legend)return e.legend;if(Dre(e)&&e.header)return e.header}function $re(e,t){return dFe(e,t)}function HM(e){if(cFe(e)){const{format:t,formatType:n}=e;return{format:t,formatType:n}}else{const t=Ore(e)??{},{format:n,formatType:r}=t;return{format:n,formatType:r}}}function VJt(e,t){var s;switch(t){case"latitude":case"longitude":return"quantitative";case"row":case"column":case"facet":case"shape":case"strokeDash":return"nominal";case"order":return"ordinal"}if(Pre(e)&&je(e.sort))return"ordinal";const{aggregate:n,bin:r,timeUnit:i}=e;if(i)return"temporal";if(r||n&&!tv(n)&&!Bm(n))return"quantitative";if(m_(e)&&((s=e.scale)!=null&&s.type))switch(dq[e.scale.type]){case"numeric":case"discretizing":return"quantitative";case"time":return"temporal"}return"nominal"}function Uh(e){if(et(e))return e;if(a5(e))return e.condition}function Ms(e){if(ln(e))return e;if(VR(e))return e.condition}function pFe(e,t,n,r={}){if(mt(e)||lr(e)||Gy(e)){const i=mt(e)?"string":lr(e)?"number":"boolean";return Ze(HXt(t,i,e)),{value:e}}return ln(e)?qM(e,t,n,r):VR(e)?{...e,condition:qM(e.condition,t,n,r)}:e}function qM(e,t,n,r){if(cFe(e)){const{format:i,formatType:s,...o}=e;if(Eb(s)&&!n.customFormatTypes)return Ze(Pge(t)),qM(o,t,n,r)}else{const i=Lx(e)?"axis":lFe(e)?"legend":Dre(e)?"header":null;if(i&&e[i]){const{format:s,formatType:o,...a}=e[i];if(Eb(o)&&!n.customFormatTypes)return Ze(Pge(t)),qM({...e,[i]:a},t,n,r)}}return et(e)?Mre(e,t,r):HJt(e)}function HJt(e){let t=e.type;if(t)return e;const{datum:n}=e;return t=lr(n)?"quantitative":mt(n)?"nominal":d_(n)?"temporal":void 0,{...e,type:t}}function Mre(e,t,{compositeMark:n=!1}={}){const{aggregate:r,timeUnit:i,bin:s,field:o}=e,a={...e};if(!n&&r&&!lre(r)&&!tv(r)&&!Bm(r)&&(Ze(WXt(r)),delete a.aggregate),i&&(a.timeUnit=lo(i)),o&&(a.field=`${o}`),si(s)&&(a.bin=u5(s,t)),Co(s)&&!ds(t)&&Ze(SQt(t)),ru(a)){const{type:u}=a,l=KQt(u);u!==l&&(a.type=l),u!=="quantitative"&&h4e(r)&&(Ze(qXt(u,r)),a.type="quantitative")}else if(!a4e(t)){const u=VJt(a,t);a.type=u}if(ru(a)){const{compatible:u,warning:l}=qJt(a,t)||{};u===!1&&Ze(l)}if(Pre(a)&&mt(a.sort)){const{sort:u}=a;if(jge(u))return{...a,sort:{encoding:u}};const l=u.substr(1);if(u.charAt(0)==="-"&&jge(l))return{...a,sort:{encoding:l,order:"descending"}}}if(Dre(a)){const{header:u}=a;if(u){const{orient:l,...c}=u;if(l)return{...a,header:{...c,labelOrient:u.labelOrient||l,titleOrient:u.titleOrient||l}}}}return a}function u5(e,t){return Gy(e)?{maxbins:Sge(t)}:e==="binned"?{binned:!0}:!e.maxbins&&!e.step?{...e,maxbins:Sge(t)}:e}const G_={compatible:!0};function qJt(e,t){const n=e.type;if(n==="geojson"&&t!=="shape")return{compatible:!1,warning:`Channel ${t} should not be used with a geojson data.`};switch(t){case cm:case fm:case HF:return VM(e)?G_:{compatible:!1,warning:XXt(t)};case Ai:case po:case Xy:case tT:case il:case up:case lp:case MR:case LR:case qF:case bb:case WF:case GF:case l_:case Jc:case md:case YF:return G_;case yd:case zc:case gd:case vd:return n!==wb?{compatible:!1,warning:`Channel ${t} should be used with a quantitative field only, not ${e.type} field.`}:G_;case fg:case Qy:case Jy:case Zy:case cg:case lg:case ug:case pd:case ap:return n==="nominal"&&!e.sort?{compatible:!1,warning:`Channel ${t} should not be used with an unsorted discrete field.`}:G_;case sl:case ev:return!VM(e)&&!FJt(e)?{compatible:!1,warning:QXt(t)}:G_;case Dx:return e.type==="nominal"&&!("sort"in e)?{compatible:!1,warning:"Channel order is inappropriate for nominal field, which has no inherent order."}:G_}}function Fx(e){const{formatType:t}=HM(e);return t==="time"||!t&&WJt(e)}function WJt(e){return e&&(e.type==="temporal"||et(e)&&!!e.timeUnit)}function l5(e,{timeUnit:t,type:n,wrapTime:r,undefinedIfExprNotRequired:i}){var u;const s=t&&((u=lo(t))==null?void 0:u.unit);let o=s||n==="temporal",a;return jR(e)?a=e.expr:Rt(e)?a=e.signal:d_(e)?(o=!0,a=_b(e)):(mt(e)||lr(e))&&o&&(a=`datetime(${Br(e)})`,MQt(s)&&(lr(e)&&e<1e4||mt(e)&&isNaN(Date.parse(e)))&&(a=_b({[s]:e}))),a?r&&o?`time(${a})`:a:i?void 0:Br(e)}function mFe(e,t){const{type:n}=e;return t.map(r=>{const i=et(e)&&!h_(e.timeUnit)?e.timeUnit:void 0,s=l5(r,{timeUnit:i,type:n,undefinedIfExprNotRequired:!0});return s!==void 0?{signal:s}:r})}function HR(e,t){return si(e.bin)?dg(t)&&["ordinal","nominal"].includes(e.type):(console.warn("Only call this method for binned field defs."),!1)}const zge={labelAlign:{part:"labels",vgProp:"align"},labelBaseline:{part:"labels",vgProp:"baseline"},labelColor:{part:"labels",vgProp:"fill"},labelFont:{part:"labels",vgProp:"font"},labelFontSize:{part:"labels",vgProp:"fontSize"},labelFontStyle:{part:"labels",vgProp:"fontStyle"},labelFontWeight:{part:"labels",vgProp:"fontWeight"},labelOpacity:{part:"labels",vgProp:"opacity"},labelOffset:null,labelPadding:null,gridColor:{part:"grid",vgProp:"stroke"},gridDash:{part:"grid",vgProp:"strokeDash"},gridDashOffset:{part:"grid",vgProp:"strokeDashOffset"},gridOpacity:{part:"grid",vgProp:"opacity"},gridWidth:{part:"grid",vgProp:"strokeWidth"},tickColor:{part:"ticks",vgProp:"stroke"},tickDash:{part:"ticks",vgProp:"strokeDash"},tickDashOffset:{part:"ticks",vgProp:"strokeDashOffset"},tickOpacity:{part:"ticks",vgProp:"opacity"},tickSize:null,tickWidth:{part:"ticks",vgProp:"strokeWidth"}};function qR(e){return e==null?void 0:e.condition}const gFe=["domain","grid","labels","ticks","title"],GJt={grid:"grid",gridCap:"grid",gridColor:"grid",gridDash:"grid",gridDashOffset:"grid",gridOpacity:"grid",gridScale:"grid",gridWidth:"grid",orient:"main",bandPosition:"both",aria:"main",description:"main",domain:"main",domainCap:"main",domainColor:"main",domainDash:"main",domainDashOffset:"main",domainOpacity:"main",domainWidth:"main",format:"main",formatType:"main",labelAlign:"main",labelAngle:"main",labelBaseline:"main",labelBound:"main",labelColor:"main",labelFlush:"main",labelFlushOffset:"main",labelFont:"main",labelFontSize:"main",labelFontStyle:"main",labelFontWeight:"main",labelLimit:"main",labelLineHeight:"main",labelOffset:"main",labelOpacity:"main",labelOverlap:"main",labelPadding:"main",labels:"main",labelSeparation:"main",maxExtent:"main",minExtent:"main",offset:"both",position:"main",tickCap:"main",tickColor:"main",tickDash:"main",tickDashOffset:"main",tickMinStep:"both",tickOffset:"both",tickOpacity:"main",tickRound:"both",ticks:"main",tickSize:"main",tickWidth:"both",title:"main",titleAlign:"main",titleAnchor:"main",titleAngle:"main",titleBaseline:"main",titleColor:"main",titleFont:"main",titleFontSize:"main",titleFontStyle:"main",titleFontWeight:"main",titleLimit:"main",titleLineHeight:"main",titleOpacity:"main",titlePadding:"main",titleX:"main",titleY:"main",encode:"both",scale:"both",tickBand:"both",tickCount:"both",tickExtra:"both",translate:"both",values:"both",zindex:"both"},yFe={orient:1,aria:1,bandPosition:1,description:1,domain:1,domainCap:1,domainColor:1,domainDash:1,domainDashOffset:1,domainOpacity:1,domainWidth:1,format:1,formatType:1,grid:1,gridCap:1,gridColor:1,gridDash:1,gridDashOffset:1,gridOpacity:1,gridWidth:1,labelAlign:1,labelAngle:1,labelBaseline:1,labelBound:1,labelColor:1,labelFlush:1,labelFlushOffset:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelLineHeight:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labels:1,labelSeparation:1,maxExtent:1,minExtent:1,offset:1,position:1,tickBand:1,tickCap:1,tickColor:1,tickCount:1,tickDash:1,tickDashOffset:1,tickExtra:1,tickMinStep:1,tickOffset:1,tickOpacity:1,tickRound:1,ticks:1,tickSize:1,tickWidth:1,title:1,titleAlign:1,titleAnchor:1,titleAngle:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titlePadding:1,titleX:1,titleY:1,translate:1,values:1,zindex:1},YJt={...yFe,style:1,labelExpr:1,encoding:1};function Vge(e){return!!YJt[e]}const KJt={axis:1,axisBand:1,axisBottom:1,axisDiscrete:1,axisLeft:1,axisPoint:1,axisQuantitative:1,axisRight:1,axisTemporal:1,axisTop:1,axisX:1,axisXBand:1,axisXDiscrete:1,axisXPoint:1,axisXQuantitative:1,axisXTemporal:1,axisY:1,axisYBand:1,axisYDiscrete:1,axisYPoint:1,axisYQuantitative:1,axisYTemporal:1},vFe=Ye(KJt);function hg(e){return"mark"in e}class c5{constructor(t,n){this.name=t,this.run=n}hasMatchingType(t){return hg(t)?NJt(t.mark)===this.name:!1}}function P1(e,t){const n=e&&e[t];return n?je(n)?yb(n,r=>!!r.field):et(n)||a5(n):!1}function bFe(e,t){const n=e&&e[t];return n?je(n)?yb(n,r=>!!r.field):et(n)||dp(n)||VR(n):!1}function _Fe(e,t){if(ds(t)){const n=e[t];if((et(n)||dp(n))&&(U4e(n.type)||et(n)&&n.timeUnit)){const r=sre(t);return bFe(e,r)}}return!1}function Lre(e){return yb(XKt,t=>{if(P1(e,t)){const n=e[t];if(je(n))return yb(n,r=>!!r.aggregate);{const r=Uh(n);return r&&!!r.aggregate}}return!1})}function wFe(e,t){const n=[],r=[],i=[],s=[],o={};return Fre(e,(a,u)=>{if(et(a)){const{field:l,aggregate:c,bin:f,timeUnit:d,...h}=a;if(c||d||f){const p=Ore(a),m=p==null?void 0:p.title;let g=at(a,{forAs:!0});const y={...m?[]:{title:wE(a,t,{allowDisabling:!0})},...h,field:g};if(c){let v;if(tv(c)?(v="argmax",g=at({op:"argmax",field:c.argmax},{forAs:!0}),y.field=`${g}.${l}`):Bm(c)?(v="argmin",g=at({op:"argmin",field:c.argmin},{forAs:!0}),y.field=`${g}.${l}`):c!=="boxplot"&&c!=="errorbar"&&c!=="errorband"&&(v=c),v){const b={op:v,as:g};l&&(b.field=l),s.push(b)}}else if(n.push(g),ru(a)&&si(f)){if(r.push({bin:f,field:l,as:g}),n.push(at(a,{binSuffix:"end"})),HR(a,u)&&n.push(at(a,{binSuffix:"range"})),ds(u)){const v={field:`${g}_end`};o[`${u}2`]=v}y.bin="binned",a4e(u)||(y.type=wb)}else if(d&&!h_(d)){i.push({timeUnit:d,field:l,as:g});const v=ru(a)&&a.type!==Ox&&"time";v&&(u===MR||u===bb?y.formatType=v:oXt(u)?y.legend={formatType:v,...y.legend}:ds(u)&&(y.axis={formatType:v,...y.axis}))}o[u]=y}else n.push(l),o[u]=e[u]}else o[u]=e[u]}),{bins:r,timeUnits:i,aggregate:s,groupby:n,encoding:o}}function XJt(e,t,n){const r=uXt(t,n);if(r){if(r==="binned"){const i=e[t===pd?Ai:po];return!!(et(i)&&et(e[t])&&Co(i.bin))}}else return!1;return!0}function QJt(e,t,n,r){const i={};for(const s of Ye(e))o4e(s)||Ze(KXt(s));for(let s of nXt){if(!e[s])continue;const o=e[s];if(FR(s)){const a=tXt(s),u=i[a];if(et(u)&&YQt(u.type)&&et(o)&&!u.timeUnit){Ze(VXt(a));continue}}if(s==="angle"&&t==="arc"&&!e.theta&&(Ze(zXt),s=Jc),!XJt(e,s,t)){Ze(JF(s,t));continue}if(s===cg&&t==="line"){const a=Uh(e[s]);if(a!=null&&a.aggregate){Ze(YXt);continue}}if(s===il&&(n?"fill"in e:"stroke"in e)){Ze(T4e("encoding",{fill:"fill"in e,stroke:"stroke"in e}));continue}if(s===LR||s===Dx&&!je(o)&&!rd(o)||s===bb&&je(o)){if(o){if(s===Dx){const a=e[s];if(uFe(a)){i[s]=a;continue}}i[s]=pt(o).reduce((a,u)=>(et(u)?a.push(Mre(u,s)):Ze(fq(u,s)),a),[])}}else{if(s===bb&&o===null)i[s]=null;else if(!et(o)&&!dp(o)&&!rd(o)&&!o5(o)&&!Rt(o)){Ze(fq(o,s));continue}i[s]=pFe(o,s,r)}}return i}function f5(e,t){const n={};for(const r of Ye(e)){const i=pFe(e[r],r,t,{compositeMark:!0});n[r]=i}return n}function JJt(e){const t=[];for(const n of Ye(e))if(P1(e,n)){const r=e[n],i=pt(r);for(const s of i)et(s)?t.push(s):a5(s)&&t.push(s.condition)}return t}function Fre(e,t,n){if(e)for(const r of Ye(e)){const i=e[r];if(je(i))for(const s of i)t.call(n,s,r);else t.call(n,i,r)}}function ZJt(e,t,n,r){return e?Ye(e).reduce((i,s)=>{const o=e[s];return je(o)?o.reduce((a,u)=>t.call(r,a,u,s),i):t.call(r,i,o,s)},n):n}function EFe(e,t){return Ye(t).reduce((n,r)=>{switch(r){case Ai:case po:case WF:case YF:case GF:case pd:case ap:case Xy:case tT:case Jc:case lg:case md:case ug:case gd:case yd:case vd:case zc:case MR:case sl:case l_:case bb:return n;case Dx:if(e==="line"||e==="trail")return n;case LR:case qF:{const i=t[r];if(je(i)||et(i))for(const s of pt(i))s.aggregate||n.push(at(s,{}));return n}case cg:if(e==="trail")return n;case il:case up:case lp:case fg:case Qy:case Jy:case ev:case Zy:{const i=Uh(t[r]);return i&&!i.aggregate&&n.push(at(i,{})),n}}},[])}function eZt(e){const{tooltip:t,...n}=e;if(!t)return{filteredEncoding:n};let r,i;if(je(t)){for(const s of t)s.aggregate?(r||(r=[]),r.push(s)):(i||(i=[]),i.push(s));r&&(n.tooltip=r)}else t.aggregate?n.tooltip=t:i=t;return je(i)&&i.length===1&&(i=i[0]),{customTooltipWithoutAggregatedField:i,filteredEncoding:n}}function mq(e,t,n,r=!0){if("tooltip"in n)return{tooltip:n.tooltip};const i=e.map(({fieldPrefix:o,titlePrefix:a})=>{const u=r?` of ${jre(t)}`:"";return{field:o+t.field,type:t.type,title:Rt(a)?{signal:`${a}"${escape(u)}"`}:a+u}}),s=JJt(n).map(MJt);return{tooltip:[...i,...sh(s,Vn)]}}function jre(e){const{title:t,field:n}=e;return fs(t,n)}function Bre(e,t,n,r,i){const{scale:s,axis:o}=n;return({partName:a,mark:u,positionPrefix:l,endPositionPrefix:c=void 0,extraEncoding:f={}})=>{const d=jre(n);return xFe(e,a,i,{mark:u,encoding:{[t]:{field:`${l}_${n.field}`,type:n.type,...d!==void 0?{title:d}:{},...s!==void 0?{scale:s}:{},...o!==void 0?{axis:o}:{}},...mt(c)?{[`${t}2`]:{field:`${c}_${n.field}`}}:{},...r,...f}})}}function xFe(e,t,n,r){const{clip:i,color:s,opacity:o}=e,a=e.type;return e[t]||e[t]===void 0&&n[t]?[{...r,mark:{...n[t],...i?{clip:i}:{},...s?{color:s}:{},...o?{opacity:o}:{},...Bh(r.mark)?r.mark:{type:r.mark},style:`${a}-${String(t)}`,...Gy(e[t])?{}:e[t]}}]:[]}function SFe(e,t,n){const{encoding:r}=e,i=t==="vertical"?"y":"x",s=r[i],o=r[`${i}2`],a=r[`${i}Error`],u=r[`${i}Error2`];return{continuousAxisChannelDef:LD(s,n),continuousAxisChannelDef2:LD(o,n),continuousAxisChannelDefError:LD(a,n),continuousAxisChannelDefError2:LD(u,n),continuousAxis:i}}function LD(e,t){if(e!=null&&e.aggregate){const{aggregate:n,...r}=e;return n!==t&&Ze(xQt(n,t)),r}else return e}function TFe(e,t){const{mark:n,encoding:r}=e,{x:i,y:s}=r;if(Bh(n)&&n.orient)return n.orient;if(c0(i)){if(c0(s)){const o=et(i)&&i.aggregate,a=et(s)&&s.aggregate;if(!o&&a===t)return"vertical";if(!a&&o===t)return"horizontal";if(o===t&&a===t)throw new Error("Both x and y cannot have aggregate");return Fx(s)&&!Fx(i)?"horizontal":"vertical"}return"horizontal"}else{if(c0(s))return"vertical";throw new Error(`Need a valid continuous axis for ${t}s`)}}const WM="boxplot",tZt=["box","median","outliers","rule","ticks"],nZt=new c5(WM,AFe);function CFe(e){return lr(e)?"tukey":e}function AFe(e,{config:t}){e={...e,encoding:f5(e.encoding,t)};const{mark:n,encoding:r,params:i,projection:s,...o}=e,a=Bh(n)?n:{type:n};i&&Ze(x4e("boxplot"));const u=a.extent??t.boxplot.extent,l=wr("size",a,t),c=a.invalid,f=CFe(u),{bins:d,timeUnits:h,transform:p,continuousAxisChannelDef:m,continuousAxis:g,groupby:y,aggregate:v,encodingWithoutContinuousAxis:b,ticksOrient:w,boxOrient:E,customTooltipWithoutAggregatedField:T}=rZt(e,u,t),S=eT(m.field),{color:C,size:A,...k}=b,N=ke=>Bre(a,g,m,ke,t.boxplot),O=N(k),P=N(b),$=(gt(t.boxplot.box)?t.boxplot.box.color:t.mark.color)||"#4c78a8",F=N({...k,...A?{size:A}:{},color:{condition:{test:`datum['lower_box_${m.field}'] >= datum['upper_box_${m.field}']`,...C||{value:$}}}}),M=mq([{fieldPrefix:f==="min-max"?"upper_whisker_":"max_",titlePrefix:"Max"},{fieldPrefix:"upper_box_",titlePrefix:"Q3"},{fieldPrefix:"mid_box_",titlePrefix:"Median"},{fieldPrefix:"lower_box_",titlePrefix:"Q1"},{fieldPrefix:f==="min-max"?"lower_whisker_":"min_",titlePrefix:"Min"}],m,b),B={type:"tick",color:"black",opacity:1,orient:w,invalid:c,aria:!1},U=f==="min-max"?M:mq([{fieldPrefix:"upper_whisker_",titlePrefix:"Upper Whisker"},{fieldPrefix:"lower_whisker_",titlePrefix:"Lower Whisker"}],m,b),H=[...O({partName:"rule",mark:{type:"rule",invalid:c,aria:!1},positionPrefix:"lower_whisker",endPositionPrefix:"lower_box",extraEncoding:U}),...O({partName:"rule",mark:{type:"rule",invalid:c,aria:!1},positionPrefix:"upper_box",endPositionPrefix:"upper_whisker",extraEncoding:U}),...O({partName:"ticks",mark:B,positionPrefix:"lower_whisker",extraEncoding:U}),...O({partName:"ticks",mark:B,positionPrefix:"upper_whisker",extraEncoding:U})],D=[...f!=="tukey"?H:[],...P({partName:"box",mark:{type:"bar",...l?{size:l}:{},orient:E,invalid:c,ariaRoleDescription:"box"},positionPrefix:"lower_box",endPositionPrefix:"upper_box",extraEncoding:M}),...F({partName:"median",mark:{type:"tick",invalid:c,...gt(t.boxplot.median)&&t.boxplot.median.color?{color:t.boxplot.median.color}:{},...l?{size:l}:{},orient:w,aria:!1},positionPrefix:"mid_box",extraEncoding:M})];if(f==="min-max")return{...o,transform:(o.transform??[]).concat(p),layer:D};const z=`datum["lower_box_${m.field}"]`,W=`datum["upper_box_${m.field}"]`,j=`(${W} - ${z})`,q=`${z} - ${u} * ${j}`,G=`${W} + ${u} * ${j}`,ne=`datum["${m.field}"]`,ce={joinaggregate:IFe(m.field),groupby:y},de={transform:[{filter:`(${q} <= ${ne}) && (${ne} <= ${G})`},{aggregate:[{op:"min",field:m.field,as:`lower_whisker_${S}`},{op:"max",field:m.field,as:`upper_whisker_${S}`},{op:"min",field:`lower_box_${m.field}`,as:`lower_box_${S}`},{op:"max",field:`upper_box_${m.field}`,as:`upper_box_${S}`},...v],groupby:y}],layer:H},{tooltip:he,...ve}=k,{scale:Ie,axis:be}=m,Ke=jre(m),Ue=Gu(be,["title"]),yt=xFe(a,"outliers",t.boxplot,{transform:[{filter:`(${ne} < ${q}) || (${ne} > ${G})`}],mark:"point",encoding:{[g]:{field:m.field,type:m.type,...Ke!==void 0?{title:Ke}:{},...Ie!==void 0?{scale:Ie}:{},...jr(Ue)?{}:{axis:Ue}},...ve,...C?{color:C}:{},...T?{tooltip:T}:{}}})[0];let it;const _e=[...d,...h,ce];return yt?it={transform:_e,layer:[yt,de]}:(it=de,it.transform.unshift(..._e)),{...o,layer:[it,{transform:p,layer:D}]}}function IFe(e){const t=eT(e);return[{op:"q1",field:e,as:`lower_box_${t}`},{op:"q3",field:e,as:`upper_box_${t}`}]}function rZt(e,t,n){const r=TFe(e,WM),{continuousAxisChannelDef:i,continuousAxis:s}=SFe(e,r,WM),o=i.field,a=eT(o),u=CFe(t),l=[...IFe(o),{op:"median",field:o,as:`mid_box_${a}`},{op:"min",field:o,as:(u==="min-max"?"lower_whisker_":"min_")+a},{op:"max",field:o,as:(u==="min-max"?"upper_whisker_":"max_")+a}],c=u==="min-max"||u==="tukey"?[]:[{calculate:`datum["upper_box_${a}"] - datum["lower_box_${a}"]`,as:`iqr_${a}`},{calculate:`min(datum["upper_box_${a}"] + datum["iqr_${a}"] * ${t}, datum["max_${a}"])`,as:`upper_whisker_${a}`},{calculate:`max(datum["lower_box_${a}"] - datum["iqr_${a}"] * ${t}, datum["min_${a}"])`,as:`lower_whisker_${a}`}],{[s]:f,...d}=e.encoding,{customTooltipWithoutAggregatedField:h,filteredEncoding:p}=eZt(d),{bins:m,timeUnits:g,aggregate:y,groupby:v,encoding:b}=wFe(p,n),w=r==="vertical"?"horizontal":"vertical",E=r,T=[...m,...g,{aggregate:[...y,...l],groupby:v},...c];return{bins:m,timeUnits:g,transform:T,groupby:v,aggregate:y,continuousAxisChannelDef:i,continuousAxis:s,encodingWithoutContinuousAxis:b,ticksOrient:w,boxOrient:E,customTooltipWithoutAggregatedField:h}}const Ure="errorbar",iZt=["ticks","rule"],sZt=new c5(Ure,kFe);function kFe(e,{config:t}){e={...e,encoding:f5(e.encoding,t)};const{transform:n,continuousAxisChannelDef:r,continuousAxis:i,encodingWithoutContinuousAxis:s,ticksOrient:o,markDef:a,outerSpec:u,tooltipEncoding:l}=RFe(e,Ure,t);delete s.size;const c=Bre(a,i,r,s,t.errorbar),f=a.thickness,d=a.size,h={type:"tick",orient:o,aria:!1,...f!==void 0?{thickness:f}:{},...d!==void 0?{size:d}:{}},p=[...c({partName:"ticks",mark:h,positionPrefix:"lower",extraEncoding:l}),...c({partName:"ticks",mark:h,positionPrefix:"upper",extraEncoding:l}),...c({partName:"rule",mark:{type:"rule",ariaRoleDescription:"errorbar",...f!==void 0?{size:f}:{}},positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:l})];return{...u,transform:n,...p.length>1?{layer:p}:{...p[0]}}}function oZt(e,t){const{encoding:n}=e;if(aZt(n))return{orient:TFe(e,t),inputType:"raw"};const r=uZt(n),i=lZt(n),s=n.x,o=n.y;if(r){if(i)throw new Error(`${t} cannot be both type aggregated-upper-lower and aggregated-error`);const a=n.x2,u=n.y2;if(ln(a)&&ln(u))throw new Error(`${t} cannot have both x2 and y2`);if(ln(a)){if(c0(s))return{orient:"horizontal",inputType:"aggregated-upper-lower"};throw new Error(`Both x and x2 have to be quantitative in ${t}`)}else if(ln(u)){if(c0(o))return{orient:"vertical",inputType:"aggregated-upper-lower"};throw new Error(`Both y and y2 have to be quantitative in ${t}`)}throw new Error("No ranged axis")}else{const a=n.xError,u=n.xError2,l=n.yError,c=n.yError2;if(ln(u)&&!ln(a))throw new Error(`${t} cannot have xError2 without xError`);if(ln(c)&&!ln(l))throw new Error(`${t} cannot have yError2 without yError`);if(ln(a)&&ln(l))throw new Error(`${t} cannot have both xError and yError with both are quantiative`);if(ln(a)){if(c0(s))return{orient:"horizontal",inputType:"aggregated-error"};throw new Error("All x, xError, and xError2 (if exist) have to be quantitative")}else if(ln(l)){if(c0(o))return{orient:"vertical",inputType:"aggregated-error"};throw new Error("All y, yError, and yError2 (if exist) have to be quantitative")}throw new Error("No ranged axis")}}function aZt(e){return(ln(e.x)||ln(e.y))&&!ln(e.x2)&&!ln(e.y2)&&!ln(e.xError)&&!ln(e.xError2)&&!ln(e.yError)&&!ln(e.yError2)}function uZt(e){return ln(e.x2)||ln(e.y2)}function lZt(e){return ln(e.xError)||ln(e.xError2)||ln(e.yError)||ln(e.yError2)}function RFe(e,t,n){const{mark:r,encoding:i,params:s,projection:o,...a}=e,u=Bh(r)?r:{type:r};s&&Ze(x4e(t));const{orient:l,inputType:c}=oZt(e,t),{continuousAxisChannelDef:f,continuousAxisChannelDef2:d,continuousAxisChannelDefError:h,continuousAxisChannelDefError2:p,continuousAxis:m}=SFe(e,l,t),{errorBarSpecificAggregate:g,postAggregateCalculates:y,tooltipSummary:v,tooltipTitleWithFieldName:b}=cZt(u,f,d,h,p,c,t,n),{[m]:w,[m==="x"?"x2":"y2"]:E,[m==="x"?"xError":"yError"]:T,[m==="x"?"xError2":"yError2"]:S,...C}=i,{bins:A,timeUnits:k,aggregate:N,groupby:O,encoding:P}=wFe(C,n),$=[...N,...g],F=c!=="raw"?[]:O,M=mq(v,f,P,b);return{transform:[...a.transform??[],...A,...k,...$.length===0?[]:[{aggregate:$,groupby:F}],...y],groupby:F,continuousAxisChannelDef:f,continuousAxis:m,encodingWithoutContinuousAxis:P,ticksOrient:l==="vertical"?"horizontal":"vertical",markDef:u,outerSpec:a,tooltipEncoding:M}}function cZt(e,t,n,r,i,s,o,a){let u=[],l=[];const c=t.field;let f,d=!1;if(s==="raw"){const h=e.center?e.center:e.extent?e.extent==="iqr"?"median":"mean":a.errorbar.center,p=e.extent?e.extent:h==="mean"?"stderr":"iqr";if(h==="median"!=(p==="iqr")&&Ze(EQt(h,p,o)),p==="stderr"||p==="stdev")u=[{op:p,field:c,as:`extent_${c}`},{op:h,field:c,as:`center_${c}`}],l=[{calculate:`datum["center_${c}"] + datum["extent_${c}"]`,as:`upper_${c}`},{calculate:`datum["center_${c}"] - datum["extent_${c}"]`,as:`lower_${c}`}],f=[{fieldPrefix:"center_",titlePrefix:$R(h)},{fieldPrefix:"upper_",titlePrefix:Hge(h,p,"+")},{fieldPrefix:"lower_",titlePrefix:Hge(h,p,"-")}],d=!0;else{let m,g,y;p==="ci"?(m="mean",g="ci0",y="ci1"):(m="median",g="q1",y="q3"),u=[{op:g,field:c,as:`lower_${c}`},{op:y,field:c,as:`upper_${c}`},{op:m,field:c,as:`center_${c}`}],f=[{fieldPrefix:"upper_",titlePrefix:wE({field:c,aggregate:y,type:"quantitative"},a,{allowDisabling:!1})},{fieldPrefix:"lower_",titlePrefix:wE({field:c,aggregate:g,type:"quantitative"},a,{allowDisabling:!1})},{fieldPrefix:"center_",titlePrefix:wE({field:c,aggregate:m,type:"quantitative"},a,{allowDisabling:!1})}]}}else{(e.center||e.extent)&&Ze(wQt(e.center,e.extent)),s==="aggregated-upper-lower"?(f=[],l=[{calculate:`datum["${n.field}"]`,as:`upper_${c}`},{calculate:`datum["${c}"]`,as:`lower_${c}`}]):s==="aggregated-error"&&(f=[{fieldPrefix:"",titlePrefix:c}],l=[{calculate:`datum["${c}"] + datum["${r.field}"]`,as:`upper_${c}`}],i?l.push({calculate:`datum["${c}"] + datum["${i.field}"]`,as:`lower_${c}`}):l.push({calculate:`datum["${c}"] - datum["${r.field}"]`,as:`lower_${c}`}));for(const h of l)f.push({fieldPrefix:h.as.substring(0,6),titlePrefix:vb(vb(h.calculate,'datum["',""),'"]',"")})}return{postAggregateCalculates:l,errorBarSpecificAggregate:u,tooltipSummary:f,tooltipTitleWithFieldName:d}}function Hge(e,t,n){return`${$R(e)} ${n} ${t}`}const zre="errorband",fZt=["band","borders"],dZt=new c5(zre,NFe);function NFe(e,{config:t}){e={...e,encoding:f5(e.encoding,t)};const{transform:n,continuousAxisChannelDef:r,continuousAxis:i,encodingWithoutContinuousAxis:s,markDef:o,outerSpec:a,tooltipEncoding:u}=RFe(e,zre,t),l=o,c=Bre(l,i,r,s,t.errorband),f=e.encoding.x!==void 0&&e.encoding.y!==void 0;let d={type:f?"area":"rect"},h={type:f?"line":"rule"};const p={...l.interpolate?{interpolate:l.interpolate}:{},...l.tension&&l.interpolate?{tension:l.tension}:{}};return f?(d={...d,...p,ariaRoleDescription:"errorband"},h={...h,...p,aria:!1}):l.interpolate?Ze($ge("interpolate")):l.tension&&Ze($ge("tension")),{...a,transform:n,layer:[...c({partName:"band",mark:d,positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:u}),...c({partName:"borders",mark:h,positionPrefix:"lower",extraEncoding:u}),...c({partName:"borders",mark:h,positionPrefix:"upper",extraEncoding:u})]}}const DFe={};function Vre(e,t,n){const r=new c5(e,t);DFe[e]={normalizer:r,parts:n}}function hZt(){return Ye(DFe)}Vre(WM,AFe,tZt);Vre(Ure,kFe,iZt);Vre(zre,NFe,fZt);const pZt=["gradientHorizontalMaxLength","gradientHorizontalMinLength","gradientVerticalMaxLength","gradientVerticalMinLength","unselectedOpacity"],PFe={titleAlign:"align",titleAnchor:"anchor",titleAngle:"angle",titleBaseline:"baseline",titleColor:"color",titleFont:"font",titleFontSize:"fontSize",titleFontStyle:"fontStyle",titleFontWeight:"fontWeight",titleLimit:"limit",titleLineHeight:"lineHeight",titleOrient:"orient",titlePadding:"offset"},OFe={labelAlign:"align",labelAnchor:"anchor",labelAngle:"angle",labelBaseline:"baseline",labelColor:"color",labelFont:"font",labelFontSize:"fontSize",labelFontStyle:"fontStyle",labelFontWeight:"fontWeight",labelLimit:"limit",labelLineHeight:"lineHeight",labelOrient:"orient",labelPadding:"offset"},mZt=Ye(PFe),gZt=Ye(OFe),yZt={header:1,headerRow:1,headerColumn:1,headerFacet:1},$Fe=Ye(yZt),MFe=["size","shape","fill","stroke","strokeDash","strokeWidth","opacity"],vZt={gradientHorizontalMaxLength:200,gradientHorizontalMinLength:100,gradientVerticalMaxLength:200,gradientVerticalMinLength:64,unselectedOpacity:.35},bZt={aria:1,clipHeight:1,columnPadding:1,columns:1,cornerRadius:1,description:1,direction:1,fillColor:1,format:1,formatType:1,gradientLength:1,gradientOpacity:1,gradientStrokeColor:1,gradientStrokeWidth:1,gradientThickness:1,gridAlign:1,labelAlign:1,labelBaseline:1,labelColor:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labelSeparation:1,legendX:1,legendY:1,offset:1,orient:1,padding:1,rowPadding:1,strokeColor:1,symbolDash:1,symbolDashOffset:1,symbolFillColor:1,symbolLimit:1,symbolOffset:1,symbolOpacity:1,symbolSize:1,symbolStrokeColor:1,symbolStrokeWidth:1,symbolType:1,tickCount:1,tickMinStep:1,title:1,titleAlign:1,titleAnchor:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titleOrient:1,titlePadding:1,type:1,values:1,zindex:1},id="_vgsid_",_Zt={point:{on:"click",fields:[id],toggle:"event.shiftKey",resolve:"global",clear:"dblclick"},interval:{on:"[pointerdown, window:pointerup] > window:pointermove!",encodings:["x","y"],translate:"[pointerdown, window:pointerup] > window:pointermove!",zoom:"wheel!",mark:{fill:"#333",fillOpacity:.125,stroke:"white"},resolve:"global",clear:"dblclick"}};function Hre(e){return e==="legend"||!!(e!=null&&e.legend)}function TB(e){return Hre(e)&&gt(e)}function qre(e){return!!(e!=null&&e.select)}function LFe(e){const t=[];for(const n of e||[]){if(qre(n))continue;const{expr:r,bind:i,...s}=n;if(i&&r){const o={...s,bind:i,init:r};t.push(o)}else{const o={...s,...r?{update:r}:{},...i?{bind:i}:{}};t.push(o)}}return t}function wZt(e){return d5(e)||Gre(e)||Wre(e)}function Wre(e){return"concat"in e}function d5(e){return"vconcat"in e}function Gre(e){return"hconcat"in e}function FFe({step:e,offsetIsDiscrete:t}){return t?e.for??"offset":"position"}function zh(e){return gt(e)&&e.step!==void 0}function qge(e){return e.view||e.width||e.height}const Wge=20,EZt={align:1,bounds:1,center:1,columns:1,spacing:1},xZt=Ye(EZt);function SZt(e,t,n){const r=n[t],i={},{spacing:s,columns:o}=r;s!==void 0&&(i.spacing=s),o!==void 0&&(s5(e)&&!zR(e.facet)||Wre(e))&&(i.columns=o),d5(e)&&(i.columns=1);for(const a of xZt)if(e[a]!==void 0)if(a==="spacing"){const u=e[a];i[a]=lr(u)?u:{row:u.row??s,column:u.column??s}}else i[a]=e[a];return i}function gq(e,t){return e[t]??e[t==="width"?"continuousWidth":"continuousHeight"]}function GM(e,t){const n=YM(e,t);return zh(n)?n.step:jFe}function YM(e,t){const n=e[t]??e[t==="width"?"discreteWidth":"discreteHeight"];return fs(n,{step:e.step})}const jFe=20,TZt={continuousWidth:200,continuousHeight:200,step:jFe},CZt={background:"white",padding:5,timeFormat:"%b %d, %Y",countTitle:"Count of Records",view:TZt,mark:TJt,arc:{},area:{},bar:IJt,circle:{},geoshape:{},image:{},line:{},point:{},rect:kJt,rule:{color:"black"},square:{},text:{color:"black"},tick:RJt,trail:{},boxplot:{size:14,extent:1.5,box:{},median:{color:"white"},outliers:{},rule:{},ticks:null},errorbar:{center:"mean",rule:!0,ticks:!1},errorband:{band:{opacity:.3},borders:!1},scale:eJt,projection:{},legend:vZt,header:{titlePadding:10,labelPadding:10},headerColumn:{},headerRow:{},headerFacet:{},selection:_Zt,style:{},title:{},facet:{spacing:Wge},concat:{spacing:Wge},normalizedNumberFormat:".0%"},Sp=["#4c78a8","#f58518","#e45756","#72b7b2","#54a24b","#eeca3b","#b279a2","#ff9da6","#9d755d","#bab0ac"],Gge={text:11,guideLabel:10,guideTitle:11,groupTitle:13,groupSubtitle:12},Yge={blue:Sp[0],orange:Sp[1],red:Sp[2],teal:Sp[3],green:Sp[4],yellow:Sp[5],purple:Sp[6],pink:Sp[7],brown:Sp[8],gray0:"#000",gray1:"#111",gray2:"#222",gray3:"#333",gray4:"#444",gray5:"#555",gray6:"#666",gray7:"#777",gray8:"#888",gray9:"#999",gray10:"#aaa",gray11:"#bbb",gray12:"#ccc",gray13:"#ddd",gray14:"#eee",gray15:"#fff"};function AZt(e={}){return{signals:[{name:"color",value:gt(e)?{...Yge,...e}:Yge}],mark:{color:{signal:"color.blue"}},rule:{color:{signal:"color.gray0"}},text:{color:{signal:"color.gray0"}},style:{"guide-label":{fill:{signal:"color.gray0"}},"guide-title":{fill:{signal:"color.gray0"}},"group-title":{fill:{signal:"color.gray0"}},"group-subtitle":{fill:{signal:"color.gray0"}},cell:{stroke:{signal:"color.gray8"}}},axis:{domainColor:{signal:"color.gray13"},gridColor:{signal:"color.gray8"},tickColor:{signal:"color.gray13"}},range:{category:[{signal:"color.blue"},{signal:"color.orange"},{signal:"color.red"},{signal:"color.teal"},{signal:"color.green"},{signal:"color.yellow"},{signal:"color.purple"},{signal:"color.pink"},{signal:"color.brown"},{signal:"color.grey8"}]}}}function IZt(e){return{signals:[{name:"fontSize",value:gt(e)?{...Gge,...e}:Gge}],text:{fontSize:{signal:"fontSize.text"}},style:{"guide-label":{fontSize:{signal:"fontSize.guideLabel"}},"guide-title":{fontSize:{signal:"fontSize.guideTitle"}},"group-title":{fontSize:{signal:"fontSize.groupTitle"}},"group-subtitle":{fontSize:{signal:"fontSize.groupSubtitle"}}}}}function kZt(e){return{text:{font:e},style:{"guide-label":{font:e},"guide-title":{font:e},"group-title":{font:e},"group-subtitle":{font:e}}}}function BFe(e){const t=Ye(e||{}),n={};for(const r of t){const i=e[r];n[r]=qR(i)?g4e(i):wl(i)}return n}function RZt(e){const t=Ye(e),n={};for(const r of t)n[r]=BFe(e[r]);return n}const NZt=[...nFe,...vFe,...$Fe,"background","padding","legend","lineBreak","scale","style","title","view"];function UFe(e={}){const{color:t,font:n,fontSize:r,selection:i,...s}=e,o=VS({},nn(CZt),n?kZt(n):{},t?AZt(t):{},r?IZt(r):{},s||{});i&&HS(o,"selection",i,!0);const a=Gu(o,NZt);for(const u of["background","lineBreak","padding"])o[u]&&(a[u]=wl(o[u]));for(const u of nFe)o[u]&&(a[u]=ku(o[u]));for(const u of vFe)o[u]&&(a[u]=BFe(o[u]));for(const u of $Fe)o[u]&&(a[u]=ku(o[u]));return o.legend&&(a.legend=ku(o.legend)),o.scale&&(a.scale=ku(o.scale)),o.style&&(a.style=RZt(o.style)),o.title&&(a.title=ku(o.title)),o.view&&(a.view=ku(o.view)),a}const DZt=new Set(["view",...bJt]),PZt=["color","fontSize","background","padding","facet","concat","numberFormat","numberFormatType","normalizedNumberFormat","normalizedNumberFormatType","timeFormat","countTitle","header","axisQuantitative","axisTemporal","axisDiscrete","axisPoint","axisXBand","axisXPoint","axisXDiscrete","axisXQuantitative","axisXTemporal","axisYBand","axisYPoint","axisYDiscrete","axisYQuantitative","axisYTemporal","scale","selection","overlay"],OZt={view:["continuousWidth","continuousHeight","discreteWidth","discreteHeight","step"],...SJt};function $Zt(e){e=nn(e);for(const t of PZt)delete e[t];if(e.axis)for(const t in e.axis)qR(e.axis[t])&&delete e.axis[t];if(e.legend)for(const t of pZt)delete e.legend[t];if(e.mark){for(const t of Fge)delete e.mark[t];e.mark.tooltip&&gt(e.mark.tooltip)&&delete e.mark.tooltip}e.params&&(e.signals=(e.signals||[]).concat(LFe(e.params)),delete e.params);for(const t of DZt){for(const r of Fge)delete e[t][r];const n=OZt[t];if(n)for(const r of n)delete e[t][r];LZt(e,t)}for(const t of hZt())delete e[t];MZt(e);for(const t in e)gt(e[t])&&jr(e[t])&&delete e[t];return jr(e)?void 0:e}function MZt(e){const{titleMarkConfig:t,subtitleMarkConfig:n,subtitle:r}=m4e(e.title);jr(t)||(e.style["group-title"]={...e.style["group-title"],...t}),jr(n)||(e.style["group-subtitle"]={...e.style["group-subtitle"],...n}),jr(r)?delete e.title:e.title=r}function LZt(e,t,n,r){const i=e[t];t==="view"&&(n="cell");const s={...i,...e.style[n??t]};jr(s)||(e.style[n??t]=s),delete e[t]}function h5(e){return"layer"in e}function FZt(e){return"repeat"in e}function jZt(e){return!je(e.repeat)&&e.repeat.layer}class Yre{map(t,n){return s5(t)?this.mapFacet(t,n):FZt(t)?this.mapRepeat(t,n):Gre(t)?this.mapHConcat(t,n):d5(t)?this.mapVConcat(t,n):Wre(t)?this.mapConcat(t,n):this.mapLayerOrUnit(t,n)}mapLayerOrUnit(t,n){if(h5(t))return this.mapLayer(t,n);if(hg(t))return this.mapUnit(t,n);throw new Error(cre(t))}mapLayer(t,n){return{...t,layer:t.layer.map(r=>this.mapLayerOrUnit(r,n))}}mapHConcat(t,n){return{...t,hconcat:t.hconcat.map(r=>this.map(r,n))}}mapVConcat(t,n){return{...t,vconcat:t.vconcat.map(r=>this.map(r,n))}}mapConcat(t,n){const{concat:r,...i}=t;return{...i,concat:r.map(s=>this.map(s,n))}}mapFacet(t,n){return{...t,spec:this.map(t.spec,n)}}mapRepeat(t,n){return{...t,spec:this.map(t.spec,n)}}}const BZt={zero:1,center:1,normalize:1};function UZt(e){return e in BZt}const zZt=new Set([Z4e,t5,e5,UM,r5,Rre,Nre,n5,eFe,kre]),VZt=new Set([t5,e5,Z4e]);function Y_(e){return et(e)&&Mx(e)==="quantitative"&&!e.bin}function Kge(e,t,{orient:n,type:r}){const i=t==="x"?"y":"radius",s=t==="x"&&["bar","area"].includes(r),o=e[t],a=e[i];if(et(o)&&et(a))if(Y_(o)&&Y_(a)){if(o.stack)return t;if(a.stack)return i;const u=et(o)&&!!o.aggregate,l=et(a)&&!!a.aggregate;if(u!==l)return u?t:i;if(s){if(n==="vertical")return i;if(n==="horizontal")return t}}else{if(Y_(o))return t;if(Y_(a))return i}else{if(Y_(o))return s&&n==="vertical"?void 0:t;if(Y_(a))return s&&n==="horizontal"?void 0:i}}function HZt(e){switch(e){case"x":return"y";case"y":return"x";case"theta":return"radius";case"radius":return"theta"}}function zFe(e,t){var m,g;const n=Bh(e)?e:{type:e},r=n.type;if(!zZt.has(r))return null;const i=Kge(t,"x",n)||Kge(t,"theta",n);if(!i)return null;const s=t[i],o=et(s)?at(s,{}):void 0,a=HZt(i),u=[],l=new Set;if(t[a]){const y=t[a],v=et(y)?at(y,{}):void 0;v&&v!==o&&(u.push(a),l.add(v))}const c=a==="x"?"xOffset":"yOffset",f=t[c],d=et(f)?at(f,{}):void 0;d&&d!==o&&(u.push(c),l.add(d));const h=rXt.reduce((y,v)=>{if(v!=="tooltip"&&P1(t,v)){const b=t[v];for(const w of pt(b)){const E=Uh(w);if(E.aggregate)continue;const T=at(E,{});(!T||!l.has(T))&&y.push({channel:v,fieldDef:E})}}return y},[]);let p;return s.stack!==void 0?Gy(s.stack)?p=s.stack?"zero":null:p=s.stack:VZt.has(r)&&(p="zero"),!p||!UZt(p)||Lre(t)&&h.length===0?null:((m=s==null?void 0:s.scale)!=null&&m.type&&((g=s==null?void 0:s.scale)==null?void 0:g.type)!==Yu.LINEAR&&s!=null&&s.stack&&Ze(vQt(s.scale.type)),ln(t[cp(i)])?(s.stack!==void 0&&Ze(yQt(i)),null):(et(s)&&s.aggregate&&!mXt.has(s.aggregate)&&Ze(bQt(s.aggregate)),{groupbyChannels:u,groupbyFields:l,fieldChannel:i,impute:s.impute===null?!1:p_(r),stackBy:h,offset:p}))}function VFe(e,t,n){const r=ku(e),i=wr("orient",r,n);if(r.orient=YZt(r.type,t,i),i!==void 0&&i!==r.orient&&Ze(tQt(r.orient,i)),r.type==="bar"&&r.orient){const u=wr("cornerRadiusEnd",r,n);if(u!==void 0){const l=r.orient==="horizontal"&&t.x2||r.orient==="vertical"&&t.y2?["cornerRadius"]:AJt[r.orient];for(const c of l)r[c]=u;r.cornerRadiusEnd!==void 0&&delete r.cornerRadiusEnd}}const s=wr("opacity",r,n),o=wr("fillOpacity",r,n);return s===void 0&&o===void 0&&(r.opacity=WZt(r.type,t)),wr("cursor",r,n)===void 0&&(r.cursor=qZt(r,t,n)),r}function qZt(e,t,n){return t.href||e.href||wr("href",e,n)?"pointer":e.cursor}function WZt(e,t){if(Hn([r5,kre,Rre,Nre],e)&&!Lre(t))return .7}function GZt(e,t,{graticule:n}){if(n)return!1;const r=Um("filled",e,t),i=e.type;return fs(r,i!==r5&&i!==n5&&i!==UM)}function YZt(e,t,n){switch(e){case r5:case Rre:case Nre:case eFe:case yJt:case gJt:return}const{x:r,y:i,x2:s,y2:o}=t;switch(e){case t5:if(et(r)&&(Co(r.bin)||et(i)&&i.aggregate&&!r.aggregate))return"vertical";if(et(i)&&(Co(i.bin)||et(r)&&r.aggregate&&!i.aggregate))return"horizontal";if(o||s){if(n)return n;if(!s)return(et(r)&&r.type===wb&&!si(r.bin)||zM(r))&&et(i)&&Co(i.bin)?"horizontal":"vertical";if(!o)return(et(i)&&i.type===wb&&!si(i.bin)||zM(i))&&et(r)&&Co(r.bin)?"vertical":"horizontal"}case UM:if(s&&!(et(r)&&Co(r.bin))&&o&&!(et(i)&&Co(i.bin)))return;case e5:if(o)return et(i)&&Co(i.bin)?"horizontal":"vertical";if(s)return et(r)&&Co(r.bin)?"vertical":"horizontal";if(e===UM){if(r&&!i)return"vertical";if(i&&!r)return"horizontal"}case n5:case kre:{const a=Uge(r),u=Uge(i);if(n)return n;if(a&&!u)return e!=="tick"?"horizontal":"vertical";if(!a&&u)return e!=="tick"?"vertical":"horizontal";if(a&&u)return"vertical";{const l=ru(r)&&r.type===Ox,c=ru(i)&&i.type===Ox;if(l&&!c)return"vertical";if(!l&&c)return"horizontal"}return}}return"vertical"}function KZt(e){const{point:t,line:n,...r}=e;return Ye(r).length>1?r:r.type}function XZt(e){for(const t of["line","area","rule","trail"])e[t]&&(e={...e,[t]:Gu(e[t],["point","line"])});return e}function CB(e,t={},n){return e.point==="transparent"?{opacity:0}:e.point?gt(e.point)?e.point:{}:e.point!==void 0?null:t.point||n.shape?gt(t.point)?t.point:{}:void 0}function Xge(e,t={}){return e.line?e.line===!0?{}:e.line:e.line!==void 0?null:t.line?t.line===!0?{}:t.line:void 0}class QZt{constructor(){this.name="path-overlay"}hasMatchingType(t,n){if(hg(t)){const{mark:r,encoding:i}=t,s=Bh(r)?r:{type:r};switch(s.type){case"line":case"rule":case"trail":return!!CB(s,n[s.type],i);case"area":return!!CB(s,n[s.type],i)||!!Xge(s,n[s.type])}}return!1}run(t,n,r){const{config:i}=n,{params:s,projection:o,mark:a,name:u,encoding:l,...c}=t,f=f5(l,i),d=Bh(a)?a:{type:a},h=CB(d,i[d.type],f),p=d.type==="area"&&Xge(d,i[d.type]),m=[{name:u,...s?{params:s}:{},mark:KZt({...d.type==="area"&&d.opacity===void 0&&d.fillOpacity===void 0?{opacity:.7}:{},...d}),encoding:Gu(f,["shape"])}],g=zFe(VFe(d,f,i),f);let y=f;if(g){const{fieldChannel:v,offset:b}=g;y={...f,[v]:{...f[v],...b?{stack:b}:{}}}}return y=Gu(y,["y2","x2"]),p&&m.push({...o?{projection:o}:{},mark:{type:"line",...Rx(d,["clip","interpolate","tension","tooltip"]),...p},encoding:y}),h&&m.push({...o?{projection:o}:{},mark:{type:"point",opacity:1,filled:!0,...Rx(d,["clip","tooltip"]),...h},encoding:y}),r({...c,layer:m},{...n,config:XZt(i)})}}function JZt(e,t){return t?zR(e)?qFe(e,t):HFe(e,t):e}function AB(e,t){return t?qFe(e,t):e}function yq(e,t,n){const r=t[e];if(OJt(r)){if(r.repeat in n)return{...t,[e]:n[r.repeat]};Ze($Xt(r.repeat));return}return t}function HFe(e,t){if(e=yq("field",e,t),e!==void 0){if(e===null)return null;if(Pre(e)&&wh(e.sort)){const n=yq("field",e.sort,t);e={...e,...n?{sort:n}:{}}}return e}}function Qge(e,t){if(et(e))return HFe(e,t);{const n=yq("datum",e,t);return n!==e&&!n.type&&(n.type="nominal"),n}}function Jge(e,t){if(ln(e)){const n=Qge(e,t);if(n)return n;if(o5(e))return{condition:e.condition}}else{if(VR(e)){const n=Qge(e.condition,t);if(n)return{...e,condition:n};{const{condition:r,...i}=e;return i}}return e}}function qFe(e,t){const n={};for(const r in e)if(jt(e,r)){const i=e[r];if(je(i))n[r]=i.map(s=>Jge(s,t)).filter(s=>s);else{const s=Jge(i,t);s!==void 0&&(n[r]=s)}}return n}class ZZt{constructor(){this.name="RuleForRangedLine"}hasMatchingType(t){if(hg(t)){const{encoding:n,mark:r}=t;if(r==="line"||Bh(r)&&r.type==="line")for(const i of eXt){const s=c_(i),o=n[s];if(n[i]&&(et(o)&&!Co(o.bin)||dp(o)))return!0}}return!1}run(t,n,r){const{encoding:i,mark:s}=t;return Ze(eQt(!!i.x2,!!i.y2)),r({...t,mark:gt(s)?{...s,type:"rule"}:"rule"},n)}}class een extends Yre{constructor(){super(...arguments),this.nonFacetUnitNormalizers=[nZt,sZt,dZt,new QZt,new ZZt]}map(t,n){if(hg(t)){const r=P1(t.encoding,cm),i=P1(t.encoding,fm),s=P1(t.encoding,HF);if(r||i||s)return this.mapFacetedUnit(t,n)}return super.map(t,n)}mapUnit(t,n){const{parentEncoding:r,parentProjection:i}=n,s=AB(t.encoding,n.repeater),o={...t,...t.name?{name:[n.repeaterPrefix,t.name].filter(u=>u).join("_")}:{},...s?{encoding:s}:{}};if(r||i)return this.mapUnitWithParentEncodingOrProjection(o,n);const a=this.mapLayerOrUnit.bind(this);for(const u of this.nonFacetUnitNormalizers)if(u.hasMatchingType(o,n.config))return u.run(o,n,a);return o}mapRepeat(t,n){return jZt(t)?this.mapLayerRepeat(t,n):this.mapNonLayerRepeat(t,n)}mapLayerRepeat(t,n){const{repeat:r,spec:i,...s}=t,{row:o,column:a,layer:u}=r,{repeater:l={},repeaterPrefix:c=""}=n;return o||a?this.mapRepeat({...t,repeat:{...o?{row:o}:{},...a?{column:a}:{}},spec:{repeat:{layer:u},spec:i}},n):{...s,layer:u.map(f=>{const d={...l,layer:f},h=`${(i.name?`${i.name}_`:"")+c}child__layer_${Ci(f)}`,p=this.mapLayerOrUnit(i,{...n,repeater:d,repeaterPrefix:h});return p.name=h,p})}}mapNonLayerRepeat(t,n){const{repeat:r,spec:i,data:s,...o}=t;!je(r)&&t.columns&&(t=Gu(t,["columns"]),Ze(Nge("repeat")));const a=[],{repeater:u={},repeaterPrefix:l=""}=n,c=!je(r)&&r.row||[u?u.row:null],f=!je(r)&&r.column||[u?u.column:null],d=je(r)&&r||[u?u.repeat:null];for(const p of d)for(const m of c)for(const g of f){const y={repeat:p,row:m,column:g,layer:u.layer},v=(i.name?`${i.name}_`:"")+l+"child__"+(je(r)?`${Ci(p)}`:(r.row?`row_${Ci(m)}`:"")+(r.column?`column_${Ci(g)}`:"")),b=this.map(i,{...n,repeater:y,repeaterPrefix:v});b.name=v,a.push(Gu(b,["data"]))}const h=je(r)?t.columns:r.column?r.column.length:1;return{data:i.data??s,align:"all",...o,columns:h,concat:a}}mapFacet(t,n){const{facet:r}=t;return zR(r)&&t.columns&&(t=Gu(t,["columns"]),Ze(Nge("facet"))),super.mapFacet(t,n)}mapUnitWithParentEncodingOrProjection(t,n){const{encoding:r,projection:i}=t,{parentEncoding:s,parentProjection:o,config:a}=n,u=e0e({parentProjection:o,projection:i}),l=Zge({parentEncoding:s,encoding:AB(r,n.repeater)});return this.mapUnit({...t,...u?{projection:u}:{},...l?{encoding:l}:{}},{config:a})}mapFacetedUnit(t,n){const{row:r,column:i,facet:s,...o}=t.encoding,{mark:a,width:u,projection:l,height:c,view:f,params:d,encoding:h,...p}=t,{facetMapping:m,layout:g}=this.getFacetMappingAndLayout({row:r,column:i,facet:s},n),y=AB(o,n.repeater);return this.mapFacet({...p,...g,facet:m,spec:{...u?{width:u}:{},...c?{height:c}:{},...f?{view:f}:{},...l?{projection:l}:{},mark:a,encoding:y,...d?{params:d}:{}}},n)}getFacetMappingAndLayout(t,n){const{row:r,column:i,facet:s}=t;if(r||i){s&&Ze(JXt([...r?[cm]:[],...i?[fm]:[]]));const o={},a={};for(const u of[cm,fm]){const l=t[u];if(l){const{align:c,center:f,spacing:d,columns:h,...p}=l;o[u]=p;for(const m of["align","center","spacing"])l[m]!==void 0&&(a[m]??(a[m]={}),a[m][u]=l[m])}}return{facetMapping:o,layout:a}}else{const{align:o,center:a,spacing:u,columns:l,...c}=s;return{facetMapping:JZt(c,n.repeater),layout:{...o?{align:o}:{},...a?{center:a}:{},...u?{spacing:u}:{},...l?{columns:l}:{}}}}}mapLayer(t,{parentEncoding:n,parentProjection:r,...i}){const{encoding:s,projection:o,...a}=t,u={...i,parentEncoding:Zge({parentEncoding:n,encoding:s,layer:!0}),parentProjection:e0e({parentProjection:r,projection:o})};return super.mapLayer({...a,...t.name?{name:[u.repeaterPrefix,t.name].filter(l=>l).join("_")}:{}},u)}}function Zge({parentEncoding:e,encoding:t={},layer:n}){let r={};if(e){const i=new Set([...Ye(e),...Ye(t)]);for(const s of i){const o=t[s],a=e[s];if(ln(o)){const u={...a,...o};r[s]=u}else VR(o)?r[s]={...o,condition:{...a,...o.condition}}:o||o===null?r[s]=o:(n||rd(a)||Rt(a)||ln(a)||je(a))&&(r[s]=a)}}else r=t;return!r||jr(r)?void 0:r}function e0e(e){const{parentProjection:t,projection:n}=e;return t&&n&&Ze(UXt({parentProjection:t,projection:n})),n??t}function Kre(e){return"filter"in e}function ten(e){return(e==null?void 0:e.stop)!==void 0}function WFe(e){return"lookup"in e}function nen(e){return"data"in e}function ren(e){return"param"in e}function ien(e){return"pivot"in e}function sen(e){return"density"in e}function oen(e){return"quantile"in e}function aen(e){return"regression"in e}function uen(e){return"loess"in e}function len(e){return"sample"in e}function cen(e){return"window"in e}function fen(e){return"joinaggregate"in e}function den(e){return"flatten"in e}function hen(e){return"calculate"in e}function GFe(e){return"bin"in e}function pen(e){return"impute"in e}function men(e){return"timeUnit"in e}function gen(e){return"aggregate"in e}function yen(e){return"stack"in e}function ven(e){return"fold"in e}function ben(e){return"extent"in e&&!("density"in e)&&!("regression"in e)}function _en(e){return e.map(t=>Kre(t)?{filter:bE(t.filter,GQt)}:t)}class wen extends Yre{map(t,n){return n.emptySelections??(n.emptySelections={}),n.selectionPredicates??(n.selectionPredicates={}),t=t0e(t,n),super.map(t,n)}mapLayerOrUnit(t,n){if(t=t0e(t,n),t.encoding){const r={};for(const[i,s]of yy(t.encoding))r[i]=YFe(s,n);t={...t,encoding:r}}return super.mapLayerOrUnit(t,n)}mapUnit(t,n){const{selection:r,...i}=t;return r?{...i,params:yy(r).map(([s,o])=>{const{init:a,bind:u,empty:l,...c}=o;c.type==="single"?(c.type="point",c.toggle=!1):c.type==="multi"&&(c.type="point"),n.emptySelections[s]=l!=="none";for(const f of Mo(n.selectionPredicates[s]??{}))f.empty=l!=="none";return{name:s,value:a,select:c,bind:u}})}:t}}function t0e(e,t){const{transform:n,...r}=e;if(n){const i=n.map(s=>{if(Kre(s))return{filter:vq(s,t)};if(GFe(s)&&f_(s.bin))return{...s,bin:KFe(s.bin)};if(WFe(s)){const{selection:o,...a}=s.from;return o?{...s,from:{param:o,...a}}:s}return s});return{...r,transform:i}}return e}function YFe(e,t){var r,i;const n=nn(e);if(et(n)&&f_(n.bin)&&(n.bin=KFe(n.bin)),m_(n)&&((i=(r=n.scale)==null?void 0:r.domain)!=null&&i.selection)){const{selection:s,...o}=n.scale.domain;n.scale.domain={...o,...s?{param:s}:{}}}if(o5(n))if(je(n.condition))n.condition=n.condition.map(s=>{const{selection:o,param:a,test:u,...l}=s;return a?s:{...l,test:vq(s,t)}});else{const{selection:s,param:o,test:a,...u}=YFe(n.condition,t);n.condition=o?n.condition:{...u,test:vq(n.condition,t)}}return n}function KFe(e){const t=e.extent;if(t!=null&&t.selection){const{selection:n,...r}=t;return{...e,extent:{...r,param:n}}}return e}function vq(e,t){const n=r=>bE(r,i=>{var s;const o=t.emptySelections[i]??!0,a={param:i,empty:o};return(s=t.selectionPredicates)[i]??(s[i]=[]),t.selectionPredicates[i].push(a),a});return e.selection?n(e.selection):bE(e.test||e.filter,r=>r.selection?n(r.selection):r)}class bq extends Yre{map(t,n){const r=n.selections??[];if(t.params&&!hg(t)){const i=[];for(const s of t.params)qre(s)?r.push(s):i.push(s);t.params=i}return n.selections=r,super.map(t,n)}mapUnit(t,n){const r=n.selections;if(!r||!r.length)return t;const i=(n.path??[]).concat(t.name),s=[];for(const o of r)if(!o.views||!o.views.length)s.push(o);else for(const a of o.views)(mt(a)&&(a===t.name||i.includes(a))||je(a)&&a.map(u=>i.indexOf(u)).every((u,l,c)=>u!==-1&&(l===0||u>c[l-1])))&&s.push(o);return s.length&&(t.params=s),t}}for(const e of["mapFacet","mapRepeat","mapHConcat","mapVConcat","mapLayer"]){const t=bq.prototype[e];bq.prototype[e]=function(n,r){return t.call(this,n,Een(n,r))}}function Een(e,t){return e.name?{...t,path:(t.path??[]).concat(e.name)}:t}function XFe(e,t){t===void 0&&(t=UFe(e.config));const n=Cen(e,t),{width:r,height:i}=e,s=Aen(n,{width:r,height:i,autosize:e.autosize},t);return{...n,...s?{autosize:s}:{}}}const xen=new een,Sen=new wen,Ten=new bq;function Cen(e,t={}){const n={config:t};return Ten.map(xen.map(Sen.map(e,n),n),n)}function n0e(e){return mt(e)?{type:e}:e??{}}function Aen(e,t,n){let{width:r,height:i}=t;const s=hg(e)||h5(e),o={};s?r=="container"&&i=="container"?(o.type="fit",o.contains="padding"):r=="container"?(o.type="fit-x",o.contains="padding"):i=="container"&&(o.type="fit-y",o.contains="padding"):(r=="container"&&(Ze(Age("width")),r=void 0),i=="container"&&(Ze(Age("height")),i=void 0));const a={type:"pad",...o,...n?n0e(n.autosize):{},...n0e(e.autosize)};if(a.type==="fit"&&!s&&(Ze(SXt),a.type="pad"),r=="container"&&!(a.type=="fit"||a.type=="fit-x")&&Ze(Ige("width")),i=="container"&&!(a.type=="fit"||a.type=="fit-y")&&Ze(Ige("height")),!kl(a,{type:"pad"}))return a}function Ien(e){return e==="fit"||e==="fit-x"||e==="fit-y"}function ken(e){return e?`fit-${KF(e)}`:"fit"}const Ren=["background","padding"];function r0e(e,t){const n={};for(const r of Ren)e&&e[r]!==void 0&&(n[r]=wl(e[r]));return t&&(n.params=e.params),n}class pg{constructor(t={},n={}){this.explicit=t,this.implicit=n}clone(){return new pg(nn(this.explicit),nn(this.implicit))}combine(){return{...this.explicit,...this.implicit}}get(t){return fs(this.explicit[t],this.implicit[t])}getWithExplicit(t){return this.explicit[t]!==void 0?{explicit:!0,value:this.explicit[t]}:this.implicit[t]!==void 0?{explicit:!1,value:this.implicit[t]}:{explicit:!1,value:void 0}}setWithExplicit(t,{value:n,explicit:r}){n!==void 0&&this.set(t,n,r)}set(t,n,r){return delete this[r?"implicit":"explicit"][t],this[r?"explicit":"implicit"][t]=n,this}copyKeyFromSplit(t,{explicit:n,implicit:r}){n[t]!==void 0?this.set(t,n[t],!0):r[t]!==void 0&&this.set(t,r[t],!1)}copyKeyFromObject(t,n){n[t]!==void 0&&this.set(t,n[t],!0)}copyAll(t){for(const n of Ye(t.combine())){const r=t.getWithExplicit(n);this.setWithExplicit(n,r)}}}function Ld(e){return{explicit:!0,value:e}}function hl(e){return{explicit:!1,value:e}}function QFe(e){return(t,n,r,i)=>{const s=e(t.value,n.value);return s>0?t:s<0?n:p5(t,n,r,i)}}function p5(e,t,n,r){return e.explicit&&t.explicit&&Ze(cQt(n,r,e.value,t.value)),e}function _y(e,t,n,r,i=p5){return e===void 0||e.value===void 0?t:e.explicit&&!t.explicit?e:t.explicit&&!e.explicit?t:kl(e.value,t.value)?e:i(e,t,n,r)}class Nen extends pg{constructor(t={},n={},r=!1){super(t,n),this.explicit=t,this.implicit=n,this.parseNothing=r}clone(){const t=super.clone();return t.parseNothing=this.parseNothing,t}}function jx(e){return"url"in e}function YI(e){return"values"in e}function JFe(e){return"name"in e&&!jx(e)&&!YI(e)&&!$0(e)}function $0(e){return e&&(ZFe(e)||e5e(e)||Xre(e))}function ZFe(e){return"sequence"in e}function e5e(e){return"sphere"in e}function Xre(e){return"graticule"in e}var Ei;(function(e){e[e.Raw=0]="Raw",e[e.Main=1]="Main",e[e.Row=2]="Row",e[e.Column=3]="Column",e[e.Lookup=4]="Lookup"})(Ei||(Ei={}));function t5e(e){const{signals:t,hasLegend:n,index:r,...i}=e;return i.field=Uc(i.field),i}function Sb(e,t=!0,n=xa){if(je(e)){const r=e.map(i=>Sb(i,t,n));return t?`[${r.join(", ")}]`:r}else if(d_(e))return n(t?_b(e):$Qt(e));return t?n(Br(e)):e}function Den(e,t){for(const n of Mo(e.component.selection??{})){const r=n.name;let i=`${r}${Ey}, ${n.resolve==="global"?"true":`{unit: ${O1(e)}}`}`;for(const s of v5)s.defined(n)&&(s.signals&&(t=s.signals(e,n,t)),s.modifyExpr&&(i=s.modifyExpr(e,n,i)));t.push({name:r+ctn,on:[{events:{signal:n.name+Ey},update:`modify(${rt(n.name+Tb)}, ${i})`}]})}return Qre(t)}function Pen(e,t){if(e.component.selection&&Ye(e.component.selection).length){const n=rt(e.getName("cell"));t.unshift({name:"facet",value:{},on:[{events:Ky("pointermove","scope"),update:`isTuple(facet) ? facet : group(${n}).datum`}]})}return Qre(t)}function Oen(e,t){let n=!1;for(const r of Mo(e.component.selection??{})){const i=r.name,s=rt(i+Tb);if(t.filter(a=>a.name===i).length===0){const a=r.resolve==="global"?"union":r.resolve,u=r.type==="point"?", true, true)":")";t.push({name:r.name,update:`${b5e}(${s}, ${rt(a)}${u}`})}n=!0;for(const a of v5)a.defined(r)&&a.topLevelSignals&&(t=a.topLevelSignals(e,r,t))}return n&&t.filter(i=>i.name==="unit").length===0&&t.unshift({name:"unit",value:{},on:[{events:"pointermove",update:"isTuple(group()) ? group() : unit"}]}),Qre(t)}function $en(e,t){const n=[...t],r=O1(e,{escape:!1});for(const i of Mo(e.component.selection??{})){const s={name:i.name+Tb};if(i.project.hasSelectionId&&(s.transform=[{type:"collect",sort:{field:id}}]),i.init){const a=i.project.items.map(t5e);s.values=i.project.hasSelectionId?i.init.map(u=>({unit:r,[id]:Sb(u,!1)[0]})):i.init.map(u=>({unit:r,fields:a,values:Sb(u,!1)}))}n.filter(a=>a.name===i.name+Tb).length||n.push(s)}return n}function n5e(e,t){for(const n of Mo(e.component.selection??{}))for(const r of v5)r.defined(n)&&r.marks&&(t=r.marks(e,n,t));return t}function Men(e,t){for(const n of e.children)Wi(n)&&(t=n5e(n,t));return t}function Len(e,t,n,r){const i=S5e(e,t.param,t);return{signal:Yl(n.get("type"))&&je(r)&&r[0]>r[1]?`isValid(${i}) && reverse(${i})`:i}}function Qre(e){return e.map(t=>(t.on&&!t.on.length&&delete t.on,t))}class Mr{constructor(t,n){this.debugName=n,this._children=[],this._parent=null,t&&(this.parent=t)}clone(){throw new Error("Cannot clone node")}get parent(){return this._parent}set parent(t){this._parent=t,t&&t.addChild(this)}get children(){return this._children}numChildren(){return this._children.length}addChild(t,n){if(this._children.includes(t)){Ze(FXt);return}n!==void 0?this._children.splice(n,0,t):this._children.push(t)}removeChild(t){const n=this._children.indexOf(t);return this._children.splice(n,1),n}remove(){let t=this._parent.removeChild(this);for(const n of this._children)n._parent=this._parent,this._parent.addChild(n,t++)}insertAsParentOf(t){const n=t.parent;n.removeChild(this),this.parent=n,t.parent=this}swapWithParent(){const t=this._parent,n=t.parent;for(const i of this._children)i.parent=t;this._children=[],t.removeChild(this);const r=t.parent.removeChild(t);this._parent=n,n.addChild(this,r),t.parent=this}}class Ku extends Mr{clone(){const t=new this.constructor;return t.debugName=`clone_${this.debugName}`,t._source=this._source,t._name=`clone_${this._name}`,t.type=this.type,t.refCounts=this.refCounts,t.refCounts[t._name]=0,t}constructor(t,n,r,i){super(t,n),this.type=r,this.refCounts=i,this._source=this._name=n,this.refCounts&&!(this._name in this.refCounts)&&(this.refCounts[this._name]=0)}dependentFields(){return new Set}producedFields(){return new Set}hash(){return this._hash===void 0&&(this._hash=`Output ${J6e()}`),this._hash}getSource(){return this.refCounts[this._name]++,this._source}isRequired(){return!!this.refCounts[this._name]}setSource(t){this._source=t}}function IB(e){return e.as!==void 0}function i0e(e){return`${e}_end`}class Eh extends Mr{clone(){return new Eh(null,nn(this.timeUnits))}constructor(t,n){super(t),this.timeUnits=n}static makeFromEncoding(t,n){const r=n.reduceFieldDef((i,s,o)=>{const{field:a,timeUnit:u}=s;if(u){let l;if(h_(u)){if(Wi(n)){const{mark:c,markDef:f,config:d}=n,h=by({fieldDef:s,markDef:f,config:d});(GI(c)||h)&&(l={timeUnit:lo(u),field:a})}}else l={as:at(s,{forAs:!0}),field:a,timeUnit:u};if(Wi(n)){const{mark:c,markDef:f,config:d}=n,h=by({fieldDef:s,markDef:f,config:d});GI(c)&&ds(o)&&h!==.5&&(l.rectBandPosition=h)}l&&(i[Vn(l)]=l)}return i},{});return jr(r)?null:new Eh(t,r)}static makeFromTransform(t,n){const{timeUnit:r,...i}={...n},s=lo(r),o={...i,timeUnit:s};return new Eh(t,{[Vn(o)]:o})}merge(t){this.timeUnits={...this.timeUnits};for(const n in t.timeUnits)this.timeUnits[n]||(this.timeUnits[n]=t.timeUnits[n]);for(const n of t.children)t.removeChild(n),n.parent=this;t.remove()}removeFormulas(t){const n={};for(const[r,i]of yy(this.timeUnits)){const s=IB(i)?i.as:`${i.field}_end`;t.has(s)||(n[r]=i)}this.timeUnits=n}producedFields(){return new Set(Mo(this.timeUnits).map(t=>IB(t)?t.as:i0e(t.field)))}dependentFields(){return new Set(Mo(this.timeUnits).map(t=>t.field))}hash(){return`TimeUnit ${Vn(this.timeUnits)}`}assemble(){const t=[];for(const n of Mo(this.timeUnits)){const{rectBandPosition:r}=n,i=lo(n.timeUnit);if(IB(n)){const{field:s,as:o}=n,{unit:a,utc:u,...l}=i,c=[o,`${o}_end`];t.push({field:Uc(s),type:"timeunit",...a?{units:ZF(a)}:{},...u?{timezone:"utc"}:{},...l,as:c}),t.push(...s0e(c,r,i))}else if(n){const{field:s}=n,o=s.replaceAll("\\.","."),a=r5e({timeUnit:i,field:o}),u=i0e(o);t.push({type:"formula",expr:a,as:u}),t.push(...s0e([o,u],r,i))}}return t}}const m5="offsetted_rect_start",g5="offsetted_rect_end";function r5e({timeUnit:e,field:t,reverse:n}){const{unit:r,utc:i}=e,s=O4e(r),{part:o,step:a}=F4e(s,e.step);return`${i?"utcOffset":"timeOffset"}('${o}', datum['${t}'], ${n?-a:a})`}function s0e([e,t],n,r){if(n!==void 0&&n!==.5){const i=`datum['${e}']`,s=`datum['${t}']`;return[{type:"formula",expr:o0e([r5e({timeUnit:r,field:e,reverse:!0}),i],n+.5),as:`${e}_${m5}`},{type:"formula",expr:o0e([i,s],n+.5),as:`${e}_${g5}`}]}return[]}function o0e([e,t],n){return`${1-n} * ${e} + ${n} * ${t}`}const WR="_tuple_fields";class Fen{constructor(...t){this.items=t,this.hasChannel={},this.hasField={},this.hasSelectionId=!1}}const jen={defined:()=>!0,parse:(e,t,n)=>{const r=t.name,i=t.project??(t.project=new Fen),s={},o={},a=new Set,u=(p,m)=>{const g=m==="visual"?p.channel:p.field;let y=Ci(`${r}_${g}`);for(let v=1;a.has(y);v++)y=Ci(`${r}_${g}_${v}`);return a.add(y),{[m]:y}},l=t.type,c=e.config.selection[l],f=n.value!==void 0?pt(n.value):null;let{fields:d,encodings:h}=gt(n.select)?n.select:{};if(!d&&!h&&f){for(const p of f)if(gt(p))for(const m of Ye(p))ZKt(m)?(h||(h=[])).push(m):l==="interval"?(Ze(OXt),h=c.encodings):(d??(d=[])).push(m)}!d&&!h&&(h=c.encodings,"fields"in c&&(d=c.fields));for(const p of h??[]){const m=e.fieldDef(p);if(m){let g=m.field;if(m.aggregate){Ze(TXt(p,m.aggregate));continue}else if(!g){Ze(Rge(p));continue}if(m.timeUnit&&!h_(m.timeUnit)){g=e.vgField(p);const y={timeUnit:m.timeUnit,as:g,field:m.field};o[Vn(y)]=y}if(!s[g]){const y=l==="interval"&&dg(p)&&Yl(e.getScaleComponent(p).get("type"))?"R":m.bin?"R-RE":"E",v={field:g,channel:p,type:y,index:i.items.length};v.signals={...u(v,"data"),...u(v,"visual")},i.items.push(s[g]=v),i.hasField[g]=s[g],i.hasSelectionId=i.hasSelectionId||g===id,i4e(p)?(v.geoChannel=p,v.channel=r4e(p),i.hasChannel[v.channel]=s[g]):i.hasChannel[p]=s[g]}}else Ze(Rge(p))}for(const p of d??[]){if(i.hasField[p])continue;const m={type:"E",field:p,index:i.items.length};m.signals={...u(m,"data")},i.items.push(m),i.hasField[p]=m,i.hasSelectionId=i.hasSelectionId||p===id}f&&(t.init=f.map(p=>i.items.map(m=>gt(p)?p[m.geoChannel||m.channel]!==void 0?p[m.geoChannel||m.channel]:p[m.field]:p))),jr(o)||(i.timeUnit=new Eh(null,o))},signals:(e,t,n)=>{const r=t.name+WR;return n.filter(s=>s.name===r).length>0||t.project.hasSelectionId?n:n.concat({name:r,value:t.project.items.map(t5e)})}},dm={defined:e=>e.type==="interval"&&e.resolve==="global"&&e.bind&&e.bind==="scales",parse:(e,t)=>{const n=t.scales=[];for(const r of t.project.items){const i=r.channel;if(!dg(i))continue;const s=e.getScaleComponent(i),o=s?s.get("type"):void 0;if(o=="sequential"&&Ze(kXt),!s||!Yl(o)){Ze(IXt);continue}s.set("selectionExtent",{param:t.name,field:r.field},!0),n.push(r)}},topLevelSignals:(e,t,n)=>{const r=t.scales.filter(o=>n.filter(a=>a.name===o.signals.data).length===0);if(!e.parent||a0e(e)||r.length===0)return n;const i=n.filter(o=>o.name===t.name)[0];let s=i.update;if(s.indexOf(b5e)>=0)i.update=`{${r.map(o=>`${rt(Uc(o.field))}: ${o.signals.data}`).join(", ")}}`;else{for(const o of r){const a=`${rt(Uc(o.field))}: ${o.signals.data}`;s.includes(a)||(s=`${s.substring(0,s.length-1)}, ${a}}`)}i.update=s}return n.concat(r.map(o=>({name:o.signals.data})))},signals:(e,t,n)=>{if(e.parent&&!a0e(e))for(const r of t.scales){const i=n.find(s=>s.name===r.signals.data);i.push="outer",delete i.value,delete i.update}return n}};function _q(e,t){return`domain(${rt(e.scaleName(t))})`}function a0e(e){return e.parent&&aT(e.parent)&&!e.parent.parent}const EE="_brush",i5e="_scale_trigger",o2="geo_interval_init_tick",s5e="_init",Ben="_center",Uen={defined:e=>e.type==="interval",parse:(e,t,n)=>{var r;if(e.hasProjection){const i={...gt(n.select)?n.select:{}};i.fields=[id],i.encodings||(i.encodings=n.value?Ye(n.value):[yd,gd]),n.select={type:"interval",...i}}if(t.translate&&!dm.defined(t)){const i=`!event.item || event.item.mark.name !== ${rt(t.name+EE)}`;for(const s of t.events){if(!s.between){Ze(`${s} is not an ordered event stream for interval selections.`);continue}const o=pt((r=s.between[0]).filter??(r.filter=[]));o.indexOf(i)<0&&o.push(i)}}},signals:(e,t,n)=>{const r=t.name,i=r+Ey,s=Mo(t.project.hasChannel).filter(a=>a.channel===Ai||a.channel===po),o=t.init?t.init[0]:null;if(n.push(...s.reduce((a,u)=>a.concat(zen(e,t,u,o&&o[u.index])),[])),e.hasProjection){const a=rt(e.projectionName()),u=e.projectionName()+Ben,{x:l,y:c}=t.project.hasChannel,f=l&&l.signals.visual,d=c&&c.signals.visual,h=l?o&&o[l.index]:`${u}[0]`,p=c?o&&o[c.index]:`${u}[1]`,m=E=>e.getSizeSignalRef(E).signal,g=`[[${f?f+"[0]":"0"}, ${d?d+"[0]":"0"}],[${f?f+"[1]":m("width")}, ${d?d+"[1]":m("height")}]]`;o&&(n.unshift({name:r+s5e,init:`[scale(${a}, [${l?h[0]:h}, ${c?p[0]:p}]), scale(${a}, [${l?h[1]:h}, ${c?p[1]:p}])]`}),(!l||!c)&&(n.find(T=>T.name===u)||n.unshift({name:u,update:`invert(${a}, [${m("width")}/2, ${m("height")}/2])`})));const y=`intersect(${g}, {markname: ${rt(e.getName("marks"))}}, unit.mark)`,v=`{unit: ${O1(e)}}`,b=`vlSelectionTuples(${y}, ${v})`,w=s.map(E=>E.signals.visual);return n.concat({name:i,on:[{events:[...w.length?[{signal:w.join(" || ")}]:[],...o?[{signal:o2}]:[]],update:b}]})}else{if(!dm.defined(t)){const l=r+i5e,c=s.map(f=>{const d=f.channel,{data:h,visual:p}=f.signals,m=rt(e.scaleName(d)),g=e.getScaleComponent(d).get("type"),y=Yl(g)?"+":"";return`(!isArray(${h}) || (${y}invert(${m}, ${p})[0] === ${y}${h}[0] && ${y}invert(${m}, ${p})[1] === ${y}${h}[1]))`});c.length&&n.push({name:l,value:{},on:[{events:s.map(f=>({scale:e.scaleName(f.channel)})),update:c.join(" && ")+` ? ${l} : {}`}]})}const a=s.map(l=>l.signals.data),u=`unit: ${O1(e)}, fields: ${r+WR}, values`;return n.concat({name:i,...o?{init:`{${u}: ${Sb(o)}}`}:{},...a.length?{on:[{events:[{signal:a.join(" || ")}],update:`${a.join(" && ")} ? {${u}: [${a}]} : null`}]}:{}})}},topLevelSignals:(e,t,n)=>(Wi(e)&&e.hasProjection&&t.init&&(n.filter(i=>i.name===o2).length||n.unshift({name:o2,value:null,on:[{events:"timer{1}",update:`${o2} === null ? {} : ${o2}`}]})),n),marks:(e,t,n)=>{const r=t.name,{x:i,y:s}=t.project.hasChannel,o=i==null?void 0:i.signals.visual,a=s==null?void 0:s.signals.visual,u=`data(${rt(t.name+Tb)})`;if(dm.defined(t)||!i&&!s)return n;const l={x:i!==void 0?{signal:`${o}[0]`}:{value:0},y:s!==void 0?{signal:`${a}[0]`}:{value:0},x2:i!==void 0?{signal:`${o}[1]`}:{field:{group:"width"}},y2:s!==void 0?{signal:`${a}[1]`}:{field:{group:"height"}}};if(t.resolve==="global")for(const g of Ye(l))l[g]=[{test:`${u}.length && ${u}[0].unit === ${O1(e)}`,...l[g]},{value:0}];const{fill:c,fillOpacity:f,cursor:d,...h}=t.mark,p=Ye(h).reduce((g,y)=>(g[y]=[{test:[i!==void 0&&`${o}[0] !== ${o}[1]`,s!==void 0&&`${a}[0] !== ${a}[1]`].filter(v=>v).join(" && "),value:h[y]},{value:null}],g),{}),m=d??(t.translate?"move":null);return[{name:`${r+EE}_bg`,type:"rect",clip:!0,encode:{enter:{fill:{value:c},fillOpacity:{value:f}},update:l}},...n,{name:r+EE,type:"rect",clip:!0,encode:{enter:{...m?{cursor:{value:m}}:{},fill:{value:"transparent"}},update:{...l,...p}}}]}};function zen(e,t,n,r){const i=!e.hasProjection,s=n.channel,o=n.signals.visual,a=rt(i?e.scaleName(s):e.projectionName()),u=d=>`scale(${a}, ${d})`,l=e.getSizeSignalRef(s===Ai?"width":"height").signal,c=`${s}(unit)`,f=t.events.reduce((d,h)=>[...d,{events:h.between[0],update:`[${c}, ${c}]`},{events:h,update:`[${o}[0], clamp(${c}, 0, ${l})]`}],[]);if(i){const d=n.signals.data,h=dm.defined(t),p=e.getScaleComponent(s),m=p?p.get("type"):void 0,g=r?{init:Sb(r,!0,u)}:{value:[]};return f.push({events:{signal:t.name+i5e},update:Yl(m)?`[${u(`${d}[0]`)}, ${u(`${d}[1]`)}]`:"[0, 0]"}),h?[{name:d,on:[]}]:[{name:o,...g,on:f},{name:d,...r?{init:Sb(r)}:{},on:[{events:{signal:o},update:`${o}[0] === ${o}[1] ? null : invert(${a}, ${o})`}]}]}else{const d=s===Ai?0:1,h=t.name+s5e,p=r?{init:`[${h}[0][${d}], ${h}[1][${d}]]`}:{value:[]};return[{name:o,...p,on:f}]}}const Ven={defined:e=>e.type==="point",signals:(e,t,n)=>{const r=t.name,i=r+WR,s=t.project,o="(item().isVoronoi ? datum.datum : datum)",a=Mo(e.component.selection??{}).reduce((f,d)=>d.type==="interval"?f.concat(d.name+EE):f,[]).map(f=>`indexof(item().mark.name, '${f}') < 0`).join(" && "),u=`datum && item().mark.marktype !== 'group' && indexof(item().mark.role, 'legend') < 0${a?` && ${a}`:""}`;let l=`unit: ${O1(e)}, `;if(t.project.hasSelectionId)l+=`${id}: ${o}[${rt(id)}]`;else{const f=s.items.map(d=>{const h=e.fieldDef(d.channel);return h!=null&&h.bin?`[${o}[${rt(e.vgField(d.channel,{}))}], ${o}[${rt(e.vgField(d.channel,{binSuffix:"end"}))}]]`:`${o}[${rt(d.field)}]`}).join(", ");l+=`fields: ${i}, values: [${f}]`}const c=t.events;return n.concat([{name:r+Ey,on:c?[{events:c,update:`${u} ? {${l}} : null`,force:!0}]:[]}])}};function rT(e,t,n,r){const i=o5(t)&&t.condition,s=r(t);if(i){const a=pt(i).map(u=>{const l=r(u);if(PJt(u)){const{param:c,empty:f}=u;return{test:x5e(e,{param:c,empty:f}),...l}}else return{test:QM(e,u.test),...l}});return{[n]:[...a,...s!==void 0?[s]:[]]}}else return s!==void 0?{[n]:s}:{}}function Jre(e,t="text"){const n=e.encoding[t];return rT(e,n,t,r=>y5(r,e.config))}function y5(e,t,n="datum"){if(e){if(rd(e))return di(e.value);if(ln(e)){const{format:r,formatType:i}=HM(e);return Ire({fieldOrDatumDef:e,format:r,formatType:i,expr:n,config:t})}}}function o5e(e,t={}){const{encoding:n,markDef:r,config:i,stack:s}=e,o=n.tooltip;if(je(o))return{tooltip:u0e({tooltip:o},s,i,t)};{const a=t.reactiveGeom?"datum.datum":"datum";return rT(e,o,"tooltip",u=>{const l=y5(u,i,a);if(l)return l;if(u===null)return;let c=wr("tooltip",r,i);if(c===!0&&(c={content:"encoding"}),mt(c))return{value:c};if(gt(c))return Rt(c)?c:c.content==="encoding"?u0e(n,s,i,t):{signal:a}})}}function a5e(e,t,n,{reactiveGeom:r}={}){const i={...n,...n.tooltipFormat},s={},o=r?"datum.datum":"datum",a=[];function u(c,f){const d=c_(f),h=ru(c)?c:{...c,type:e[d].type},p=h.title||$re(h,i),m=pt(p).join(", ").replaceAll(/"/g,'\\"');let g;if(ds(f)){const y=f==="x"?"x2":"y2",v=Uh(e[y]);if(Co(h.bin)&&v){const b=at(h,{expr:o}),w=at(v,{expr:o}),{format:E,formatType:T}=HM(h);g=UR(b,w,E,T,i),s[y]=!0}}if((ds(f)||f===Jc||f===md)&&t&&t.fieldChannel===f&&t.offset==="normalize"){const{format:y,formatType:v}=HM(h);g=Ire({fieldOrDatumDef:h,format:y,formatType:v,expr:o,config:i,normalizeStack:!0}).signal}g??(g=y5(h,i,o).signal),a.push({channel:f,key:m,value:g})}Fre(e,(c,f)=>{et(c)?u(c,f):a5(c)&&u(c.condition,f)});const l={};for(const{channel:c,key:f,value:d}of a)!s[c]&&!l[f]&&(l[f]=d);return l}function u0e(e,t,n,{reactiveGeom:r}={}){const i=a5e(e,t,n,{reactiveGeom:r}),s=yy(i).map(([o,a])=>`"${o}": ${a}`);return s.length>0?{signal:`{${s.join(", ")}}`}:void 0}function Hen(e){const{markDef:t,config:n}=e,r=wr("aria",t,n);return r===!1?{}:{...r?{aria:r}:{},...qen(e),...Wen(e)}}function qen(e){const{mark:t,markDef:n,config:r}=e;if(r.aria===!1)return{};const i=wr("ariaRoleDescription",n,r);return i!=null?{ariaRoleDescription:{value:i}}:t in wXt?{}:{ariaRoleDescription:{value:t}}}function Wen(e){const{encoding:t,markDef:n,config:r,stack:i}=e,s=t.description;if(s)return rT(e,s,"description",u=>y5(u,e.config));const o=wr("description",n,r);if(o!=null)return{description:di(o)};if(r.aria===!1)return{};const a=a5e(t,i,r);if(!jr(a))return{description:{signal:yy(a).map(([u,l],c)=>`"${c>0?"; ":""}${u}: " + (${l})`).join(" + ")}}}function eo(e,t,n={}){const{markDef:r,encoding:i,config:s}=t,{vgChannel:o}=n;let{defaultRef:a,defaultValue:u}=n;a===void 0&&(u??(u=wr(e,r,s,{vgChannel:o,ignoreVgConfig:!0})),u!==void 0&&(a=di(u)));const l=i[e];return rT(t,l,o??e,c=>Are({channel:e,channelDef:c,markDef:r,config:s,scaleName:t.scaleName(e),scale:t.getScaleComponent(e),stack:null,defaultRef:a}))}function u5e(e,t={filled:void 0}){const{markDef:n,encoding:r,config:i}=e,{type:s}=n,o=t.filled??wr("filled",n,i),a=Hn(["bar","point","circle","square","geoshape"],s)?"transparent":void 0,u=wr(o===!0?"color":void 0,n,i,{vgChannel:"fill"})??i.mark[o===!0&&"color"]??a,l=wr(o===!1?"color":void 0,n,i,{vgChannel:"stroke"})??i.mark[o===!1&&"color"],c=o?"fill":"stroke",f={...u?{fill:di(u)}:{},...l?{stroke:di(l)}:{}};return n.color&&(o?n.fill:n.stroke)&&Ze(T4e("property",{fill:"fill"in n,stroke:"stroke"in n})),{...f,...eo("color",e,{vgChannel:c,defaultValue:o?u:l}),...eo("fill",e,{defaultValue:r.fill?u:void 0}),...eo("stroke",e,{defaultValue:r.stroke?l:void 0})}}function Gen(e){const{encoding:t,mark:n}=e,r=t.order;return!p_(n)&&rd(r)?rT(e,r,"zindex",i=>di(i.value)):{}}function Bx({channel:e,markDef:t,encoding:n={},model:r,bandPosition:i}){const s=`${e}Offset`,o=t[s],a=n[s];if((s==="xOffset"||s==="yOffset")&&a)return{offsetType:"encoding",offset:Are({channel:s,channelDef:a,markDef:t,config:r==null?void 0:r.config,scaleName:r.scaleName(s),scale:r.getScaleComponent(s),stack:null,defaultRef:di(o),bandPosition:i})};const u=t[s];return u?{offsetType:"visual",offset:u}:{}}function pa(e,t,{defaultPos:n,vgChannel:r}){const{encoding:i,markDef:s,config:o,stack:a}=t,u=i[e],l=i[cp(e)],c=t.scaleName(e),f=t.getScaleComponent(e),{offset:d,offsetType:h}=Bx({channel:e,markDef:s,encoding:i,model:t,bandPosition:.5}),p=Zre({model:t,defaultPos:n,channel:e,scaleName:c,scale:f}),m=!u&&ds(e)&&(i.latitude||i.longitude)?{field:t.getName(e)}:Yen({channel:e,channelDef:u,channel2Def:l,markDef:s,config:o,scaleName:c,scale:f,stack:a,offset:d,defaultRef:p,bandPosition:h==="encoding"?0:void 0});return m?{[r||e]:m}:void 0}function Yen(e){const{channel:t,channelDef:n,scaleName:r,stack:i,offset:s,markDef:o}=e;if(ln(n)&&i&&t===i.fieldChannel){if(et(n)){let a=n.bandPosition;if(a===void 0&&o.type==="text"&&(t==="radius"||t==="theta")&&(a=.5),a!==void 0)return BM({scaleName:r,fieldOrDatumDef:n,startSuffix:"start",bandPosition:a,offset:s})}return D1(n,r,{suffix:"end"},{offset:s})}return Tre(e)}function Zre({model:e,defaultPos:t,channel:n,scaleName:r,scale:i}){const{markDef:s,config:o}=e;return()=>{const a=c_(n),u=vy(n),l=wr(n,s,o,{vgChannel:u});if(l!==void 0)return rA(n,l);switch(t){case"zeroOrMin":case"zeroOrMax":if(r){const c=i.get("type");if(!Hn([Yu.LOG,Yu.TIME,Yu.UTC],c)){if(i.domainDefinitelyIncludesZero())return{scale:r,value:0}}}if(t==="zeroOrMin")return a==="y"?{field:{group:"height"}}:{value:0};switch(a){case"radius":return{signal:`min(${e.width.signal},${e.height.signal})/2`};case"theta":return{signal:"2*PI"};case"x":return{field:{group:"width"}};case"y":return{value:0}}break;case"mid":return{...e[ol(n)],mult:.5}}}}const Ken={left:"x",center:"xc",right:"x2"},Xen={top:"y",middle:"yc",bottom:"y2"};function l5e(e,t,n,r="middle"){if(e==="radius"||e==="theta")return vy(e);const i=e==="x"?"align":"baseline",s=wr(i,t,n);let o;return Rt(s)?(Ze(ZXt(i)),o=void 0):o=s,e==="x"?Ken[o||(r==="top"?"left":"center")]:Xen[o||r]}function KM(e,t,{defaultPos:n,defaultPos2:r,range:i}){return i?c5e(e,t,{defaultPos:n,defaultPos2:r}):pa(e,t,{defaultPos:n})}function c5e(e,t,{defaultPos:n,defaultPos2:r}){const{markDef:i,config:s}=t,o=cp(e),a=ol(e),u=Qen(t,r,o),l=u[a]?l5e(e,i,s):vy(e);return{...pa(e,t,{defaultPos:n,vgChannel:l}),...u}}function Qen(e,t,n){const{encoding:r,mark:i,markDef:s,stack:o,config:a}=e,u=c_(n),l=ol(n),c=vy(n),f=r[u],d=e.scaleName(u),h=e.getScaleComponent(u),{offset:p}=n in r||n in s?Bx({channel:n,markDef:s,encoding:r,model:e}):Bx({channel:u,markDef:s,encoding:r,model:e});if(!f&&(n==="x2"||n==="y2")&&(r.latitude||r.longitude)){const g=ol(n),y=e.markDef[g];return y!=null?{[g]:{value:y}}:{[c]:{field:e.getName(n)}}}const m=Jen({channel:n,channelDef:f,channel2Def:r[n],markDef:s,config:a,scaleName:d,scale:h,stack:o,offset:p,defaultRef:void 0});return m!==void 0?{[c]:m}:FD(n,s)||FD(n,{[n]:FM(n,s,a.style),[l]:FM(l,s,a.style)})||FD(n,a[i])||FD(n,a.mark)||{[c]:Zre({model:e,defaultPos:t,channel:n,scaleName:d,scale:h})()}}function Jen({channel:e,channelDef:t,channel2Def:n,markDef:r,config:i,scaleName:s,scale:o,stack:a,offset:u,defaultRef:l}){return ln(t)&&a&&e.charAt(0)===a.fieldChannel.charAt(0)?D1(t,s,{suffix:"start"},{offset:u}):Tre({channel:e,channelDef:n,scaleName:s,scale:o,stack:a,markDef:r,config:i,offset:u,defaultRef:l})}function FD(e,t){const n=ol(e),r=vy(e);if(t[r]!==void 0)return{[r]:rA(e,t[r])};if(t[e]!==void 0)return{[r]:rA(e,t[e])};if(t[n]){const i=t[n];if(xb(i))Ze(GXt(n));else return{[n]:rA(e,i)}}}function wy(e,t){const{config:n,encoding:r,markDef:i}=e,s=i.type,o=cp(t),a=ol(t),u=r[t],l=r[o],c=e.getScaleComponent(t),f=c?c.get("type"):void 0,d=i.orient,h=r[a]??r.size??wr("size",i,n,{vgChannel:a}),p=u4e(t),m=s==="bar"&&(t==="x"?d==="vertical":d==="horizontal");return et(u)&&(si(u.bin)||Co(u.bin)||u.timeUnit&&!l)&&!(h&&!xb(h))&&!r[p]&&!co(f)?ttn({fieldDef:u,fieldDef2:l,channel:t,model:e}):(ln(u)&&co(f)||m)&&!l?etn(u,t,e):c5e(t,e,{defaultPos:"zeroOrMax",defaultPos2:"zeroOrMin"})}function Zen(e,t,n,r,i,s,o){if(xb(i))if(n){const u=n.get("type");if(u==="band"){let l=`bandwidth('${t}')`;i.band!==1&&(l=`${i.band} * ${l}`);const c=Um("minBandSize",{type:o},r);return{signal:c?`max(${Of(c)}, ${l})`:l}}else i.band!==1&&(Ze(rQt(u)),i=void 0)}else return{mult:i.band,field:{group:e}};else{if(Rt(i))return i;if(i)return{value:i}}if(n){const u=n.get("range");if(nv(u)&&lr(u.step))return{value:u.step-2}}if(!s){const{bandPaddingInner:u,barBandPaddingInner:l,rectBandPaddingInner:c}=r.scale,f=fs(u,o==="bar"?l:c);if(Rt(f))return{signal:`(1 - (${f.signal})) * ${e}`};if(lr(f))return{signal:`${1-f} * ${e}`}}return{value:GM(r.view,e)-2}}function etn(e,t,n){var A,k;const{markDef:r,encoding:i,config:s,stack:o}=n,a=r.orient,u=n.scaleName(t),l=n.getScaleComponent(t),c=ol(t),f=cp(t),d=u4e(t),h=n.scaleName(d),p=n.getScaleComponent(sre(t)),m=a==="horizontal"&&t==="y"||a==="vertical"&&t==="x";let g;(i.size||r.size)&&(m?g=eo("size",n,{vgChannel:c,defaultRef:di(r.size)}):Ze(aQt(r.type)));const y=!!g,v=oFe({channel:t,fieldDef:e,markDef:r,config:s,scaleType:(A=l||p)==null?void 0:A.get("type"),useVlSizeChannel:m});g=g||{[c]:Zen(c,h||u,p||l,s,v,!!e,r.type)};const b=((k=l||p)==null?void 0:k.get("type"))==="band"&&xb(v)&&!y?"top":"middle",w=l5e(t,r,s,b),E=w==="xc"||w==="yc",{offset:T,offsetType:S}=Bx({channel:t,markDef:r,encoding:i,model:n,bandPosition:E?.5:0}),C=Tre({channel:t,channelDef:e,markDef:r,config:s,scaleName:u,scale:l,stack:o,offset:T,defaultRef:Zre({model:n,defaultPos:"mid",channel:t,scaleName:u,scale:l}),bandPosition:E?S==="encoding"?0:.5:Rt(v)?{signal:`(1-${v})/2`}:xb(v)?(1-v.band)/2:0});if(c)return{[w]:C,...g};{const N=vy(f),O=g[c],P=T?{...O,offset:T}:O;return{[w]:C,[N]:je(C)?[C[0],{...C[1],offset:P}]:{...C,offset:P}}}}function l0e(e,t,n,r,i,s,o){if(n4e(e))return 0;const a=e==="x"||e==="y2",u=a?-t/2:t/2;if(Rt(n)||Rt(i)||Rt(r)||s){const l=Of(n),c=Of(i),f=Of(r),d=Of(s),p=s?`(${o} < ${d} ? ${a?"":"-"}0.5 * (${d} - (${o})) : ${u})`:u,m=f?`${f} + `:"",g=l?`(${l} ? -1 : 1) * `:"",y=c?`(${c} + ${p})`:p;return{signal:m+g+y}}else return i=i||0,r+(n?-i-u:+i+u)}function ttn({fieldDef:e,fieldDef2:t,channel:n,model:r}){var k;const{config:i,markDef:s,encoding:o}=r,a=r.getScaleComponent(n),u=r.scaleName(n),l=a?a.get("type"):void 0,c=a.get("reverse"),f=oFe({channel:n,fieldDef:e,markDef:s,config:i,scaleType:l}),d=(k=r.component.axes[n])==null?void 0:k[0],h=(d==null?void 0:d.get("translate"))??.5,p=ds(n)?wr("binSpacing",s,i)??0:0,m=cp(n),g=vy(n),y=vy(m),v=Um("minBandSize",s,i),{offset:b}=Bx({channel:n,markDef:s,encoding:o,model:r,bandPosition:0}),{offset:w}=Bx({channel:m,markDef:s,encoding:o,model:r,bandPosition:0}),E=dJt({fieldDef:e,scaleName:u}),T=l0e(n,p,c,h,b,v,E),S=l0e(m,p,c,h,w??b,v,E),C=Rt(f)?{signal:`(1-${f.signal})/2`}:xb(f)?(1-f.band)/2:.5,A=by({fieldDef:e,fieldDef2:t,markDef:s,config:i});if(si(e.bin)||e.timeUnit){const N=e.timeUnit&&A!==.5;return{[y]:c0e({fieldDef:e,scaleName:u,bandPosition:C,offset:S,useRectOffsetField:N}),[g]:c0e({fieldDef:e,scaleName:u,bandPosition:Rt(C)?{signal:`1-${C.signal}`}:1-C,offset:T,useRectOffsetField:N})}}else if(Co(e.bin)){const N=D1(e,u,{},{offset:S});if(et(t))return{[y]:N,[g]:D1(t,u,{},{offset:T})};if(f_(e.bin)&&e.bin.step)return{[y]:N,[g]:{signal:`scale("${u}", ${at(e,{expr:"datum"})} + ${e.bin.step})`,offset:T}}}Ze(I4e(m))}function c0e({fieldDef:e,scaleName:t,bandPosition:n,offset:r,useRectOffsetField:i}){return BM({scaleName:t,fieldOrDatumDef:e,bandPosition:n,offset:r,...i?{startSuffix:m5,endSuffix:g5}:{}})}const ntn=new Set(["aria","width","height"]);function Zc(e,t){const{fill:n=void 0,stroke:r=void 0}=t.color==="include"?u5e(e):{};return{...rtn(e.markDef,t),...f0e(e,"fill",n),...f0e(e,"stroke",r),...eo("opacity",e),...eo("fillOpacity",e),...eo("strokeOpacity",e),...eo("strokeWidth",e),...eo("strokeDash",e),...Gen(e),...o5e(e),...Jre(e,"href"),...Hen(e)}}function f0e(e,t,n){const{config:r,mark:i,markDef:s}=e;if(wr("invalid",s,r)==="hide"&&n&&!p_(i)){const a=itn(e,{invalid:!0,channels:XF});if(a)return{[t]:[{test:a,value:null},...pt(n)]}}return n?{[t]:n}:{}}function rtn(e,t){return _Xt.reduce((n,r)=>(!ntn.has(r)&&e[r]!==void 0&&t[r]!=="ignore"&&(n[r]=di(e[r])),n),{})}function itn(e,{invalid:t=!1,channels:n}){const r=n.reduce((s,o)=>{const a=e.getScaleComponent(o);if(a){const u=a.get("type"),l=e.vgField(o,{expr:"datum"});l&&Yl(u)&&(s[l]=!0)}return s},{}),i=Ye(r);if(i.length>0){const s=t?"||":"&&";return i.map(o=>Cre(o,t)).join(` ${s} `)}}function eie(e){const{config:t,markDef:n}=e;if(wr("invalid",n,t)){const i=stn(e,{channels:fp});if(i)return{defined:{signal:i}}}return{}}function stn(e,{invalid:t=!1,channels:n}){const r=n.reduce((s,o)=>{var u;const a=e.getScaleComponent(o);if(a){const l=a.get("type"),c=e.vgField(o,{expr:"datum",binSuffix:(u=e.stack)!=null&&u.impute?"mid":void 0});c&&Yl(l)&&(s[c]=!0)}return s},{}),i=Ye(r);if(i.length>0){const s=t?"||":"&&";return i.map(o=>Cre(o,t)).join(` ${s} `)}}function d0e(e,t){if(t!==void 0)return{[e]:di(t)}}const kB="voronoi",f5e={defined:e=>e.type==="point"&&e.nearest,parse:(e,t)=>{if(t.events)for(const n of t.events)n.markname=e.getName(kB)},marks:(e,t,n)=>{const{x:r,y:i}=t.project.hasChannel,s=e.mark;if(p_(s))return Ze(CXt(s)),n;const o={name:e.getName(kB),type:"path",interactive:!0,from:{data:e.getName("marks")},encode:{update:{fill:{value:"transparent"},strokeWidth:{value:.35},stroke:{value:"transparent"},isVoronoi:{value:!0},...o5e(e,{reactiveGeom:!0})}},transform:[{type:"voronoi",x:{expr:r||!i?"datum.datum.x || 0":"0"},y:{expr:i||!r?"datum.datum.y || 0":"0"},size:[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]}]};let a=0,u=!1;return n.forEach((l,c)=>{const f=l.name??"";f===e.component.mark[0].name?a=c:f.indexOf(kB)>=0&&(u=!0)}),u||n.splice(a+1,0,o),n}},d5e={defined:e=>e.type==="point"&&e.resolve==="global"&&e.bind&&e.bind!=="scales"&&!Hre(e.bind),parse:(e,t,n)=>_5e(t,n),topLevelSignals:(e,t,n)=>{const r=t.name,i=t.project,s=t.bind,o=t.init&&t.init[0],a=f5e.defined(t)?"(item().isVoronoi ? datum.datum : datum)":"datum";return i.items.forEach((u,l)=>{const c=Ci(`${r}_${u.field}`);n.filter(d=>d.name===c).length||n.unshift({name:c,...o?{init:Sb(o[l])}:{value:null},on:t.events?[{events:t.events,update:`datum && item().mark.marktype !== 'group' ? ${a}[${rt(u.field)}] : null`}]:[],bind:s[u.field]??s[u.channel]??s})}),n},signals:(e,t,n)=>{const r=t.name,i=t.project,s=n.filter(l=>l.name===r+Ey)[0],o=r+WR,a=i.items.map(l=>Ci(`${r}_${l.field}`)),u=a.map(l=>`${l} !== null`).join(" && ");return a.length&&(s.update=`${u} ? {fields: ${o}, values: [${a.join(", ")}]} : null`),delete s.value,delete s.on,n}},XM="_toggle",h5e={defined:e=>e.type==="point"&&!!e.toggle,signals:(e,t,n)=>n.concat({name:t.name+XM,value:!1,on:[{events:t.events,update:t.toggle}]}),modifyExpr:(e,t)=>{const n=t.name+Ey,r=t.name+XM;return`${r} ? null : ${n}, `+(t.resolve==="global"?`${r} ? null : true, `:`${r} ? null : {unit: ${O1(e)}}, `)+`${r} ? ${n} : null`}},otn={defined:e=>e.clear!==void 0&&e.clear!==!1,parse:(e,t)=>{t.clear&&(t.clear=mt(t.clear)?Ky(t.clear,"view"):t.clear)},topLevelSignals:(e,t,n)=>{if(d5e.defined(t))for(const r of t.project.items){const i=n.findIndex(s=>s.name===Ci(`${t.name}_${r.field}`));i!==-1&&n[i].on.push({events:t.clear,update:"null"})}return n},signals:(e,t,n)=>{function r(i,s){i!==-1&&n[i].on&&n[i].on.push({events:t.clear,update:s})}if(t.type==="interval")for(const i of t.project.items){const s=n.findIndex(o=>o.name===i.signals.visual);if(r(s,"[0, 0]"),s===-1){const o=n.findIndex(a=>a.name===i.signals.data);r(o,"null")}}else{let i=n.findIndex(s=>s.name===t.name+Ey);r(i,"null"),h5e.defined(t)&&(i=n.findIndex(s=>s.name===t.name+XM),r(i,"false"))}return n}},p5e={defined:e=>{const t=e.resolve==="global"&&e.bind&&Hre(e.bind),n=e.project.items.length===1&&e.project.items[0].field!==id;return t&&!n&&Ze(RXt),t&&n},parse:(e,t,n)=>{const r=nn(n);if(r.select=mt(r.select)?{type:r.select,toggle:t.toggle}:{...r.select,toggle:t.toggle},_5e(t,r),gt(n.select)&&(n.select.on||n.select.clear)){const o='event.item && indexof(event.item.mark.role, "legend") < 0';for(const a of t.events)a.filter=pt(a.filter??[]),a.filter.includes(o)||a.filter.push(o)}const i=TB(t.bind)?t.bind.legend:"click",s=mt(i)?Ky(i,"view"):pt(i);t.bind={legend:{merge:s}}},topLevelSignals:(e,t,n)=>{const r=t.name,i=TB(t.bind)&&t.bind.legend,s=o=>a=>{const u=nn(a);return u.markname=o,u};for(const o of t.project.items){if(!o.hasLegend)continue;const a=`${Ci(o.field)}_legend`,u=`${r}_${a}`;if(n.filter(c=>c.name===u).length===0){const c=i.merge.map(s(`${a}_symbols`)).concat(i.merge.map(s(`${a}_labels`))).concat(i.merge.map(s(`${a}_entries`)));n.unshift({name:u,...t.init?{}:{value:null},on:[{events:c,update:"isDefined(datum.value) ? datum.value : item().items[0].items[0].datum.value",force:!0},{events:i.merge,update:`!event.item || !datum ? null : ${u}`,force:!0}]})}}return n},signals:(e,t,n)=>{const r=t.name,i=t.project,s=n.find(d=>d.name===r+Ey),o=r+WR,a=i.items.filter(d=>d.hasLegend).map(d=>Ci(`${r}_${Ci(d.field)}_legend`)),l=`${a.map(d=>`${d} !== null`).join(" && ")} ? {fields: ${o}, values: [${a.join(", ")}]} : null`;t.events&&a.length>0?s.on.push({events:a.map(d=>({signal:d})),update:l}):a.length>0&&(s.update=l,delete s.value,delete s.on);const c=n.find(d=>d.name===r+XM),f=TB(t.bind)&&t.bind.legend;return c&&(t.events?c.on.push({...c.on[0],events:f}):c.on[0].events=f),n}};function atn(e,t,n){var i;const r=(i=e.fieldDef(t))==null?void 0:i.field;for(const s of Mo(e.component.selection??{})){const o=s.project.hasField[r]??s.project.hasChannel[t];if(o&&p5e.defined(s)){const a=n.get("selections")??[];a.push(s.name),n.set("selections",a,!1),o.hasLegend=!0}}}const m5e="_translate_anchor",g5e="_translate_delta",utn={defined:e=>e.type==="interval"&&e.translate,signals:(e,t,n)=>{const r=t.name,i=dm.defined(t),s=r+m5e,{x:o,y:a}=t.project.hasChannel;let u=Ky(t.translate,"scope");return i||(u=u.map(l=>(l.between[0].markname=r+EE,l))),n.push({name:s,value:{},on:[{events:u.map(l=>l.between[0]),update:"{x: x(unit), y: y(unit)"+(o!==void 0?`, extent_x: ${i?_q(e,Ai):`slice(${o.signals.visual})`}`:"")+(a!==void 0?`, extent_y: ${i?_q(e,po):`slice(${a.signals.visual})`}`:"")+"}"}]},{name:r+g5e,value:{},on:[{events:u,update:`{x: ${s}.x - x(unit), y: ${s}.y - y(unit)}`}]}),o!==void 0&&h0e(e,t,o,"width",n),a!==void 0&&h0e(e,t,a,"height",n),n}};function h0e(e,t,n,r,i){const s=t.name,o=s+m5e,a=s+g5e,u=n.channel,l=dm.defined(t),c=i.filter(E=>E.name===n.signals[l?"data":"visual"])[0],f=e.getSizeSignalRef(r).signal,d=e.getScaleComponent(u),h=d&&d.get("type"),p=d&&d.get("reverse"),m=l?u===Ai?p?"":"-":p?"-":"":"",g=`${o}.extent_${u}`,y=`${m}${a}.${u} / ${l?`${f}`:`span(${g})`}`,v=!l||!d?"panLinear":h==="log"?"panLog":h==="symlog"?"panSymlog":h==="pow"?"panPow":"panLinear",b=l?h==="pow"?`, ${d.get("exponent")??1}`:h==="symlog"?`, ${d.get("constant")??1}`:"":"",w=`${v}(${g}, ${y}${b})`;c.on.push({events:{signal:a},update:l?w:`clampRange(${w}, 0, ${f})`})}const y5e="_zoom_anchor",v5e="_zoom_delta",ltn={defined:e=>e.type==="interval"&&e.zoom,signals:(e,t,n)=>{const r=t.name,i=dm.defined(t),s=r+v5e,{x:o,y:a}=t.project.hasChannel,u=rt(e.scaleName(Ai)),l=rt(e.scaleName(po));let c=Ky(t.zoom,"scope");return i||(c=c.map(f=>(f.markname=r+EE,f))),n.push({name:r+y5e,on:[{events:c,update:i?"{"+[u?`x: invert(${u}, x(unit))`:"",l?`y: invert(${l}, y(unit))`:""].filter(f=>f).join(", ")+"}":"{x: x(unit), y: y(unit)}"}]},{name:s,on:[{events:c,force:!0,update:"pow(1.001, event.deltaY * pow(16, event.deltaMode))"}]}),o!==void 0&&p0e(e,t,o,"width",n),a!==void 0&&p0e(e,t,a,"height",n),n}};function p0e(e,t,n,r,i){const s=t.name,o=n.channel,a=dm.defined(t),u=i.filter(v=>v.name===n.signals[a?"data":"visual"])[0],l=e.getSizeSignalRef(r).signal,c=e.getScaleComponent(o),f=c&&c.get("type"),d=a?_q(e,o):u.name,h=s+v5e,p=`${s}${y5e}.${o}`,m=!a||!c?"zoomLinear":f==="log"?"zoomLog":f==="symlog"?"zoomSymlog":f==="pow"?"zoomPow":"zoomLinear",g=a?f==="pow"?`, ${c.get("exponent")??1}`:f==="symlog"?`, ${c.get("constant")??1}`:"":"",y=`${m}(${d}, ${p}, ${h}${g})`;u.on.push({events:{signal:h},update:a?y:`clampRange(${y}, 0, ${l})`})}const Tb="_store",Ey="_tuple",ctn="_modify",b5e="vlSelectionResolve",v5=[Ven,Uen,jen,h5e,d5e,dm,p5e,otn,utn,ltn,f5e];function ftn(e){let t=e.parent;for(;t&&!Ol(t);)t=t.parent;return t}function O1(e,{escape:t}={escape:!0}){let n=t?rt(e.name):e.name;const r=ftn(e);if(r){const{facet:i}=r;for(const s of Cc)i[s]&&(n+=` + '__facet_${s}_' + (facet[${rt(r.vgField(s))}])`)}return n}function tie(e){return Mo(e.component.selection??{}).reduce((t,n)=>t||n.project.hasSelectionId,!1)}function _5e(e,t){(mt(t.select)||!t.select.on)&&delete e.events,(mt(t.select)||!t.select.clear)&&delete e.clear,(mt(t.select)||!t.select.toggle)&&delete e.toggle}function wq(e){const t=[];return e.type==="Identifier"?[e.name]:e.type==="Literal"?[e.value]:(e.type==="MemberExpression"&&(t.push(...wq(e.object)),t.push(...wq(e.property))),t)}function w5e(e){return e.object.type==="MemberExpression"?w5e(e.object):e.object.name==="datum"}function E5e(e){const t=wne(e),n=new Set;return t.visit(r=>{r.type==="MemberExpression"&&w5e(r)&&n.add(wq(r).slice(1).join("."))}),n}class iT extends Mr{clone(){return new iT(null,this.model,nn(this.filter))}constructor(t,n,r){super(t),this.model=n,this.filter=r,this.expr=QM(this.model,this.filter,this),this._dependentFields=E5e(this.expr)}dependentFields(){return this._dependentFields}producedFields(){return new Set}assemble(){return{type:"filter",expr:this.expr}}hash(){return`Filter ${this.expr}`}}function dtn(e,t){const n={},r=e.config.selection;if(!t||!t.length)return n;for(const i of t){const s=Ci(i.name),o=i.select,a=mt(o)?o:o.type,u=gt(o)?nn(o):{type:a},l=r[a];for(const d in l)d==="fields"||d==="encodings"||(d==="mark"&&(u[d]={...l[d],...u[d]}),(u[d]===void 0||u[d]===!0)&&(u[d]=nn(l[d]??u[d])));const c=n[s]={...u,name:s,type:a,init:i.value,bind:i.bind,events:mt(u.on)?Ky(u.on,"scope"):pt(nn(u.on))},f=nn(i);for(const d of v5)d.defined(c)&&d.parse&&d.parse(e,c,f)}return n}function x5e(e,t,n,r="datum"){const i=mt(t)?t:t.param,s=Ci(i),o=rt(s+Tb);let a;try{a=e.getSelectionComponent(s,i)}catch{return`!!${s}`}if(a.project.timeUnit){const d=n??e.component.data.raw,h=a.project.timeUnit.clone();d.parent?h.insertAsParentOf(d):d.parent=h}const u=a.project.hasSelectionId?"vlSelectionIdTest(":"vlSelectionTest(",l=a.resolve==="global"?")":`, ${rt(a.resolve)})`,c=`${u}${o}, ${r}${l}`,f=`length(data(${o}))`;return t.empty===!1?`${f} && ${c}`:`!${f} || ${c}`}function S5e(e,t,n){const r=Ci(t),i=n.encoding;let s=n.field,o;try{o=e.getSelectionComponent(r,t)}catch{return r}if(!i&&!s)s=o.project.items[0].field,o.project.items.length>1&&Ze(`A "field" or "encoding" must be specified when using a selection as a scale domain. Using "field": ${rt(s)}.`);else if(i&&!s){const a=o.project.items.filter(u=>u.channel===i);!a.length||a.length>1?(s=o.project.items[0].field,Ze((a.length?"Multiple ":"No ")+`matching ${rt(i)} encoding found for selection ${rt(n.param)}. Using "field": ${rt(s)}.`)):s=a[0].field}return`${o.name}[${rt(Uc(s))}]`}function htn(e,t){for(const[n,r]of yy(e.component.selection??{})){const i=e.getName(`lookup_${n}`);e.component.data.outputNodes[i]=r.materialized=new Ku(new iT(t,e,{param:n}),i,Ei.Lookup,e.component.data.outputNodeRefCounts)}}function QM(e,t,n){return nA(t,r=>mt(r)?r:HQt(r)?x5e(e,r,n):B4e(r))}function ptn(e,t){if(e)return je(e)&&!Fg(e)?e.map(n=>$re(n,t)).join(", "):e}function RB(e,t,n,r){var i,s;e.encode??(e.encode={}),(i=e.encode)[t]??(i[t]={}),(s=e.encode[t]).update??(s.update={}),e.encode[t].update[n]=r}function nC(e,t,n,r={header:!1}){var f,d;const{disable:i,orient:s,scale:o,labelExpr:a,title:u,zindex:l,...c}=e.combine();if(!i){for(const h in c){const p=GJt[h],m=c[h];if(p&&p!==t&&p!=="both")delete c[h];else if(qR(m)){const{condition:g,...y}=m,v=pt(g),b=zge[h];if(b){const{vgProp:w,part:E}=b,T=[...v.map(S=>{const{test:C,...A}=S;return{test:QM(null,C),...A}}),y];RB(c,E,w,T),delete c[h]}else if(b===null){const w={signal:v.map(E=>{const{test:T,...S}=E;return`${QM(null,T)} ? ${Cge(S)} : `}).join("")+Cge(y)};c[h]=w}}else if(Rt(m)){const g=zge[h];if(g){const{vgProp:y,part:v}=g;RB(c,v,y,m),delete c[h]}}Hn(["labelAlign","labelBaseline"],h)&&c[h]===null&&delete c[h]}if(t==="grid"){if(!c.grid)return;if(c.encode){const{grid:h}=c.encode;c.encode={...h?{grid:h}:{}},jr(c.encode)&&delete c.encode}return{scale:o,orient:s,...c,domain:!1,labels:!1,aria:!1,maxExtent:0,minExtent:0,ticks:!1,zindex:fs(l,0)}}else{if(!r.header&&e.mainExtracted)return;if(a!==void 0){let p=a;(d=(f=c.encode)==null?void 0:f.labels)!=null&&d.update&&Rt(c.encode.labels.update.text)&&(p=vb(a,"datum.label",c.encode.labels.update.text.signal)),RB(c,"labels","text",{signal:p})}if(c.labelAlign===null&&delete c.labelAlign,c.encode){for(const p of gFe)e.hasAxisPart(p)||delete c.encode[p];jr(c.encode)&&delete c.encode}const h=ptn(u,n);return{scale:o,orient:s,grid:!1,...h?{title:h}:{},...c,...n.aria===!1?{aria:!1}:{},zindex:fs(l,0)}}}}function T5e(e){const{axes:t}=e.component,n=[];for(const r of fp)if(t[r]){for(const i of t[r])if(!i.get("disable")&&!i.get("gridScale")){const s=r==="x"?"height":"width",o=e.getSizeSignalRef(s).signal;s!==o&&n.push({name:s,update:o})}}return n}function mtn(e,t){const{x:n=[],y:r=[]}=e;return[...n.map(i=>nC(i,"grid",t)),...r.map(i=>nC(i,"grid",t)),...n.map(i=>nC(i,"main",t)),...r.map(i=>nC(i,"main",t))].filter(i=>i)}function m0e(e,t,n,r){return Object.assign.apply(null,[{},...e.map(i=>{if(i==="axisOrient"){const s=n==="x"?"bottom":"left",o=t[n==="x"?"axisBottom":"axisLeft"]||{},a=t[n==="x"?"axisTop":"axisRight"]||{},u=new Set([...Ye(o),...Ye(a)]),l={};for(const c of u.values())l[c]={signal:`${r.signal} === "${s}" ? ${Of(o[c])} : ${Of(a[c])}`};return l}return t[i]})])}function gtn(e,t,n,r){const i=t==="band"?["axisDiscrete","axisBand"]:t==="point"?["axisDiscrete","axisPoint"]:H4e(t)?["axisQuantitative"]:t==="time"||t==="utc"?["axisTemporal"]:[],s=e==="x"?"axisX":"axisY",o=Rt(n)?"axisOrient":`axis${$R(n)}`,a=[...i,...i.map(l=>s+l.substr(4))],u=["axis",o,s];return{vlOnlyAxisConfig:m0e(a,r,e,n),vgAxisConfig:m0e(u,r,e,n),axisConfigStyle:ytn([...u,...a],r)}}function ytn(e,t){var r;const n=[{}];for(const i of e){let s=(r=t[i])==null?void 0:r.style;if(s){s=pt(s);for(const o of s)n.push(t.style[o])}}return Object.assign.apply(null,n)}function Eq(e,t,n,r={}){var s;const i=v4e(e,n,t);if(i!==void 0)return{configFrom:"style",configValue:i};for(const o of["vlOnlyAxisConfig","vgAxisConfig","axisConfigStyle"])if(((s=r[o])==null?void 0:s[e])!==void 0)return{configFrom:o,configValue:r[o][e]};return{}}const g0e={scale:({model:e,channel:t})=>e.scaleName(t),format:({format:e})=>e,formatType:({formatType:e})=>e,grid:({fieldOrDatumDef:e,axis:t,scaleType:n})=>t.grid??vtn(n,e),gridScale:({model:e,channel:t})=>btn(e,t),labelAlign:({axis:e,labelAngle:t,orient:n,channel:r})=>e.labelAlign||A5e(t,n,r),labelAngle:({labelAngle:e})=>e,labelBaseline:({axis:e,labelAngle:t,orient:n,channel:r})=>e.labelBaseline||C5e(t,n,r),labelFlush:({axis:e,fieldOrDatumDef:t,channel:n})=>e.labelFlush??wtn(t.type,n),labelOverlap:({axis:e,fieldOrDatumDef:t,scaleType:n})=>e.labelOverlap??Etn(t.type,n,et(t)&&!!t.timeUnit,et(t)?t.sort:void 0),orient:({orient:e})=>e,tickCount:({channel:e,model:t,axis:n,fieldOrDatumDef:r,scaleType:i})=>{const s=e==="x"?"width":e==="y"?"height":void 0,o=s?t.getSizeSignalRef(s):void 0;return n.tickCount??Stn({fieldOrDatumDef:r,scaleType:i,size:o,values:n.values})},tickMinStep:Ttn,title:({axis:e,model:t,channel:n})=>{if(e.title!==void 0)return e.title;const r=I5e(t,n);if(r!==void 0)return r;const i=t.typedFieldDef(n),s=n==="x"?"x2":"y2",o=t.fieldDef(s);return _4e(i?[Bge(i)]:[],et(o)?[Bge(o)]:[])},values:({axis:e,fieldOrDatumDef:t})=>Ctn(e,t),zindex:({axis:e,fieldOrDatumDef:t,mark:n})=>e.zindex??Atn(n,t)};function vtn(e,t){return!co(e)&&et(t)&&!si(t==null?void 0:t.bin)&&!Co(t==null?void 0:t.bin)}function btn(e,t){const n=t==="x"?"y":"x";if(e.getScaleComponent(n))return e.scaleName(n)}function _tn(e,t,n,r,i){const s=t==null?void 0:t.labelAngle;if(s!==void 0)return Rt(s)?s:WI(s);{const{configValue:o}=Eq("labelAngle",r,t==null?void 0:t.style,i);return o!==void 0?WI(o):n===Ai&&Hn([Sre,xre],e.type)&&!(et(e)&&e.timeUnit)?270:void 0}}function xq(e){return`(((${e.signal} % 360) + 360) % 360)`}function C5e(e,t,n,r){if(e!==void 0)if(n==="x"){if(Rt(e)){const i=xq(e),s=Rt(t)?`(${t.signal} === "top")`:t==="top";return{signal:`(45 < ${i} && ${i} < 135) || (225 < ${i} && ${i} < 315) ? "middle" :(${i} <= 45 || 315 <= ${i}) === ${s} ? "bottom" : "top"`}}if(45<e&&e<135||225<e&&e<315)return"middle";if(Rt(t)){const i=e<=45||315<=e?"===":"!==";return{signal:`${t.signal} ${i} "top" ? "bottom" : "top"`}}return(e<=45||315<=e)==(t==="top")?"bottom":"top"}else{if(Rt(e)){const i=xq(e),s=Rt(t)?`(${t.signal} === "left")`:t==="left";return{signal:`${i} <= 45 || 315 <= ${i} || (135 <= ${i} && ${i} <= 225) ? ${r?'"middle"':"null"} : (45 <= ${i} && ${i} <= 135) === ${s} ? "top" : "bottom"`}}if(e<=45||315<=e||135<=e&&e<=225)return r?"middle":null;if(Rt(t)){const i=45<=e&&e<=135?"===":"!==";return{signal:`${t.signal} ${i} "left" ? "top" : "bottom"`}}return(45<=e&&e<=135)==(t==="left")?"top":"bottom"}}function A5e(e,t,n){if(e===void 0)return;const r=n==="x",i=r?0:90,s=r?"bottom":"left";if(Rt(e)){const o=xq(e),a=Rt(t)?`(${t.signal} === "${s}")`:t===s;return{signal:`(${i?`(${o} + 90)`:o} % 180 === 0) ? ${r?null:'"center"'} :(${i} < ${o} && ${o} < ${180+i}) === ${a} ? "left" : "right"`}}if((e+i)%180===0)return r?null:"center";if(Rt(t)){const o=i<e&&e<180+i?"===":"!==";return{signal:`${`${t.signal} ${o} "${s}"`} ? "left" : "right"`}}return(i<e&&e<180+i)==(t===s)?"left":"right"}function wtn(e,t){if(t==="x"&&Hn(["quantitative","temporal"],e))return!0}function Etn(e,t,n,r){if(n&&!gt(r)||e!=="nominal"&&e!=="ordinal")return t==="log"||t==="symlog"?"greedy":!0}function xtn(e){return e==="x"?"bottom":"left"}function Stn({fieldOrDatumDef:e,scaleType:t,size:n,values:r}){var i;if(!r&&!co(t)&&t!=="log"){if(et(e)){if(si(e.bin))return{signal:`ceil(${n.signal}/10)`};if(e.timeUnit&&Hn(["month","hours","day","quarter"],(i=lo(e.timeUnit))==null?void 0:i.unit))return}return{signal:`ceil(${n.signal}/40)`}}}function Ttn({format:e,fieldOrDatumDef:t}){if(e==="d")return 1;if(et(t)){const{timeUnit:n}=t;if(n){const r=L4e(n);if(r)return{signal:r}}}}function I5e(e,t){const n=t==="x"?"x2":"y2",r=e.fieldDef(t),i=e.fieldDef(n),s=r?r.title:void 0,o=i?i.title:void 0;if(s&&o)return w4e(s,o);if(s)return s;if(o)return o;if(s!==void 0)return s;if(o!==void 0)return o}function Ctn(e,t){const n=e.values;if(je(n))return mFe(t,n);if(Rt(n))return n}function Atn(e,t){return e==="rect"&&VM(t)?1:0}class Ux extends Mr{clone(){return new Ux(null,nn(this.transform))}constructor(t,n){super(t),this.transform=n,this._dependentFields=E5e(this.transform.calculate)}static parseAllForSortIndex(t,n){return n.forEachFieldDef((r,i)=>{if(m_(r)&&sFe(r.sort)){const{field:s,timeUnit:o}=r,a=r.sort,u=a.map((l,c)=>`${B4e({field:s,timeUnit:o,equal:l})} ? ${c} : `).join("")+a.length;t=new Ux(t,{calculate:u,as:zx(r,i,{forAs:!0})})}}),t}producedFields(){return new Set([this.transform.as])}dependentFields(){return this._dependentFields}assemble(){return{type:"formula",expr:this.transform.calculate,as:this.transform.as}}hash(){return`Calculate ${Vn(this.transform)}`}}function zx(e,t,n){return at(e,{prefix:t,suffix:"sort_index",...n})}function b5(e,t){return Hn(["top","bottom"],t)?"column":Hn(["left","right"],t)||e==="row"?"row":"column"}function Vx(e,t,n,r){const i=r==="row"?n.headerRow:r==="column"?n.headerColumn:n.headerFacet;return fs((t||{})[e],i[e],n.header[e])}function _5(e,t,n,r){const i={};for(const s of e){const o=Vx(s,t||{},n,r);o!==void 0&&(i[s]=o)}return i}const nie=["row","column"],rie=["header","footer"];function Itn(e,t){const n=e.component.layoutHeaders[t].title,r=e.config?e.config:void 0,i=e.component.layoutHeaders[t].facetFieldDef?e.component.layoutHeaders[t].facetFieldDef:void 0,{titleAnchor:s,titleAngle:o,titleOrient:a}=_5(["titleAnchor","titleAngle","titleOrient"],i.header,r,t),u=b5(t,a),l=WI(o);return{name:`${t}-title`,type:"group",role:`${u}-title`,title:{text:n,...t==="row"?{orient:"left"}:{},style:"guide-title",...R5e(l,u),...k5e(u,l,s),...N5e(r,i,t,mZt,PFe)}}}function k5e(e,t,n="middle"){switch(n){case"start":return{align:"left"};case"end":return{align:"right"}}const r=A5e(t,e==="row"?"left":"top",e==="row"?"y":"x");return r?{align:r}:{}}function R5e(e,t){const n=C5e(e,t==="row"?"left":"top",t==="row"?"y":"x",!0);return n?{baseline:n}:{}}function ktn(e,t){const n=e.component.layoutHeaders[t],r=[];for(const i of rie)if(n[i])for(const s of n[i]){const o=Ntn(e,t,i,n,s);o!=null&&r.push(o)}return r}function Rtn(e,t){const{sort:n}=e;return wh(n)?{field:at(n,{expr:"datum"}),order:n.order??"ascending"}:je(n)?{field:zx(e,t,{expr:"datum"}),order:"ascending"}:{field:at(e,{expr:"datum"}),order:n??"ascending"}}function Sq(e,t,n){const{format:r,formatType:i,labelAngle:s,labelAnchor:o,labelOrient:a,labelExpr:u}=_5(["format","formatType","labelAngle","labelAnchor","labelOrient","labelExpr"],e.header,n,t),l=Ire({fieldOrDatumDef:e,format:r,formatType:i,expr:"parent",config:n}).signal,c=b5(t,a);return{text:{signal:u?vb(vb(u,"datum.label",l),"datum.value",at(e,{expr:"parent"})):l},...t==="row"?{orient:"left"}:{},style:"guide-label",frame:"group",...R5e(s,c),...k5e(c,s,o),...N5e(n,e,t,gZt,OFe)}}function Ntn(e,t,n,r,i){if(i){let s=null;const{facetFieldDef:o}=r,a=e.config?e.config:void 0;if(o&&i.labels){const{labelOrient:f}=_5(["labelOrient"],o.header,a,t);(t==="row"&&!Hn(["top","bottom"],f)||t==="column"&&!Hn(["left","right"],f))&&(s=Sq(o,t,a))}const u=Ol(e)&&!zR(e.facet),l=i.axes,c=(l==null?void 0:l.length)>0;if(s||c){const f=t==="row"?"height":"width";return{name:e.getName(`${t}_${n}`),type:"group",role:`${t}-${n}`,...r.facetFieldDef?{from:{data:e.getName(`${t}_domain`)},sort:Rtn(o,t)}:{},...c&&u?{from:{data:e.getName(`facet_domain_${t}`)}}:{},...s?{title:s}:{},...i.sizeSignal?{encode:{update:{[f]:i.sizeSignal}}}:{},...c?{axes:l}:{}}}}return null}const Dtn={column:{start:0,end:1},row:{start:1,end:0}};function Ptn(e,t){return Dtn[t][e]}function Otn(e,t){const n={};for(const r of Cc){const i=e[r];if(i!=null&&i.facetFieldDef){const{titleAnchor:s,titleOrient:o}=_5(["titleAnchor","titleOrient"],i.facetFieldDef.header,t,r),a=b5(r,o),u=Ptn(s,a);u!==void 0&&(n[a]=u)}}return jr(n)?void 0:n}function N5e(e,t,n,r,i){const s={};for(const o of r){if(!i[o])continue;const a=Vx(o,t==null?void 0:t.header,e,n);a!==void 0&&(s[i[o]]=a)}return s}function iie(e){return[...jD(e,"width"),...jD(e,"height"),...jD(e,"childWidth"),...jD(e,"childHeight")]}function jD(e,t){const n=t==="width"?"x":"y",r=e.component.layoutSize.get(t);if(!r||r==="merged")return[];const i=e.getSizeSignalRef(t).signal;if(r==="step"){const s=e.getScaleComponent(n);if(s){const o=s.get("type"),a=s.get("range");if(co(o)&&nv(a)){const u=e.scaleName(n);return Ol(e.parent)&&e.parent.component.resolve.scale[n]==="independent"?[y0e(u,a)]:[y0e(u,a),{name:i,update:D5e(u,s,`domain('${u}').length`)}]}}throw new Error("layout size is step although width/height is not step.")}else if(r=="container"){const s=i.endsWith("width"),o=s?"containerSize()[0]":"containerSize()[1]",a=gq(e.config.view,s?"width":"height"),u=`isFinite(${o}) ? ${o} : ${a}`;return[{name:i,init:u,on:[{update:u,events:"window:resize"}]}]}else return[{name:i,value:r}]}function y0e(e,t){const n=`${e}_step`;return Rt(t.step)?{name:n,update:t.step.signal}:{name:n,value:t.step}}function D5e(e,t,n){const r=t.get("type"),i=t.get("padding"),s=fs(t.get("paddingOuter"),i);let o=t.get("paddingInner");return o=r==="band"?o!==void 0?o:i:1,`bandspace(${n}, ${Of(o)}, ${Of(s)}) * ${e}_step`}function P5e(e){return e==="childWidth"?"width":e==="childHeight"?"height":e}function O5e(e,t){return Ye(e).reduce((n,r)=>{const i=e[r];return{...n,...rT(t,i,r,s=>di(s.value))}},{})}function $5e(e,t){if(Ol(t))return e==="theta"?"independent":"shared";if(aT(t))return"shared";if(fie(t))return ds(e)||e==="theta"||e==="radius"?"independent":"shared";throw new Error("invalid model type for resolve")}function sie(e,t){const n=e.scale[t],r=ds(t)?"axis":"legend";return n==="independent"?(e[r][t]==="shared"&&Ze(dQt(t)),"independent"):e[r][t]||"shared"}const $tn={...bZt,disable:1,labelExpr:1,selections:1,opacity:1,shape:1,stroke:1,fill:1,size:1,strokeWidth:1,strokeDash:1,encode:1},M5e=Ye($tn);class Mtn extends pg{}const v0e={symbols:Ltn,gradient:Ftn,labels:jtn,entries:Btn};function Ltn(e,{fieldOrDatumDef:t,model:n,channel:r,legendCmpt:i,legendType:s}){if(s!=="symbol")return;const{markDef:o,encoding:a,config:u,mark:l}=n,c=o.filled&&l!=="trail";let f={...xXt({},n,EJt),...u5e(n,{filled:c})};const d=i.get("symbolOpacity")??u.legend.symbolOpacity,h=i.get("symbolFillColor")??u.legend.symbolFillColor,p=i.get("symbolStrokeColor")??u.legend.symbolStrokeColor,m=d===void 0?L5e(a.opacity)??o.opacity:void 0;if(f.fill){if(r==="fill"||c&&r===il)delete f.fill;else if(f.fill.field)h?delete f.fill:(f.fill=di(u.legend.symbolBaseFillColor??"black"),f.fillOpacity=di(m??1));else if(je(f.fill)){const g=Tq(a.fill??a.color)??o.fill??(c&&o.color);g&&(f.fill=di(g))}}if(f.stroke){if(r==="stroke"||!c&&r===il)delete f.stroke;else if(f.stroke.field||p)delete f.stroke;else if(je(f.stroke)){const g=fs(Tq(a.stroke||a.color),o.stroke,c?o.color:void 0);g&&(f.stroke={value:g})}}if(r!==fg){const g=et(t)&&j5e(n,i,t);g?f.opacity=[{test:g,...di(m??1)},di(u.legend.unselectedOpacity)]:m&&(f.opacity=di(m))}return f={...f,...e},jr(f)?void 0:f}function Ftn(e,{model:t,legendType:n,legendCmpt:r}){if(n!=="gradient")return;const{config:i,markDef:s,encoding:o}=t;let a={};const l=(r.get("gradientOpacity")??i.legend.gradientOpacity)===void 0?L5e(o.opacity)||s.opacity:void 0;return l&&(a.opacity=di(l)),a={...a,...e},jr(a)?void 0:a}function jtn(e,{fieldOrDatumDef:t,model:n,channel:r,legendCmpt:i}){const s=n.legend(r)||{},o=n.config,a=et(t)?j5e(n,i,t):void 0,u=a?[{test:a,value:1},{value:o.legend.unselectedOpacity}]:void 0,{format:l,formatType:c}=s;let f;Eb(c)?f=Mf({fieldOrDatumDef:t,field:"datum.value",format:l,formatType:c,config:o}):l===void 0&&c===void 0&&o.customFormatTypes&&(t.type==="quantitative"&&o.numberFormatType?f=Mf({fieldOrDatumDef:t,field:"datum.value",format:o.numberFormat,formatType:o.numberFormatType,config:o}):t.type==="temporal"&&o.timeFormatType&&et(t)&&t.timeUnit===void 0&&(f=Mf({fieldOrDatumDef:t,field:"datum.value",format:o.timeFormat,formatType:o.timeFormatType,config:o})));const d={...u?{opacity:u}:{},...f?{text:f}:{},...e};return jr(d)?void 0:d}function Btn(e,{legendCmpt:t}){const n=t.get("selections");return n!=null&&n.length?{...e,fill:{value:"transparent"}}:e}function L5e(e){return F5e(e,(t,n)=>Math.max(t,n.value))}function Tq(e){return F5e(e,(t,n)=>fs(t,n.value))}function F5e(e,t){if($Jt(e))return pt(e.condition).reduce(t,e.value);if(rd(e))return e.value}function j5e(e,t,n){const r=t.get("selections");if(!(r!=null&&r.length))return;const i=rt(n.field);return r.map(s=>`(!length(data(${rt(Ci(s)+Tb)})) || (${s}[${i}] && indexof(${s}[${i}], datum.value) >= 0))`).join(" || ")}const b0e={direction:({direction:e})=>e,format:({fieldOrDatumDef:e,legend:t,config:n})=>{const{format:r,formatType:i}=t;return X4e(e,e.type,r,i,n,!1)},formatType:({legend:e,fieldOrDatumDef:t,scaleType:n})=>{const{formatType:r}=e;return Q4e(r,t,n)},gradientLength:e=>{const{legend:t,legendConfig:n}=e;return t.gradientLength??n.gradientLength??Gtn(e)},labelOverlap:({legend:e,legendConfig:t,scaleType:n})=>e.labelOverlap??t.labelOverlap??Ytn(n),symbolType:({legend:e,markDef:t,channel:n,encoding:r})=>e.symbolType??ztn(t.type,n,r.shape,t.shape),title:({fieldOrDatumDef:e,config:t})=>wE(e,t,{allowDisabling:!0}),type:({legendType:e,scaleType:t,channel:n})=>{if(_E(n)&&$f(t)){if(e==="gradient")return}else if(e==="symbol")return;return e},values:({fieldOrDatumDef:e,legend:t})=>Utn(t,e)};function Utn(e,t){const n=e.values;if(je(n))return mFe(t,n);if(Rt(n))return n}function ztn(e,t,n,r){if(t!=="shape"){const i=Tq(n)??r;if(i)return i}switch(e){case"bar":case"rect":case"image":case"square":return"square";case"line":case"trail":case"rule":return"stroke";case"arc":case"point":case"circle":case"tick":case"geoshape":case"area":case"text":return"circle"}}function Vtn(e){const{legend:t}=e;return fs(t.type,Htn(e))}function Htn({channel:e,timeUnit:t,scaleType:n}){if(_E(e)){if(Hn(["quarter","month","day"],t))return"symbol";if($f(n))return"gradient"}return"symbol"}function qtn({legendConfig:e,legendType:t,orient:n,legend:r}){return r.direction??e[t?"gradientDirection":"symbolDirection"]??Wtn(n,t)}function Wtn(e,t){switch(e){case"top":case"bottom":return"horizontal";case"left":case"right":case"none":case void 0:return;default:return t==="gradient"?"horizontal":void 0}}function Gtn({legendConfig:e,model:t,direction:n,orient:r,scaleType:i}){const{gradientHorizontalMaxLength:s,gradientHorizontalMinLength:o,gradientVerticalMaxLength:a,gradientVerticalMinLength:u}=e;if($f(i))return n==="horizontal"?r==="top"||r==="bottom"?_0e(t,"width",o,s):o:_0e(t,"height",u,a)}function _0e(e,t,n,r){return{signal:`clamp(${e.getSizeSignalRef(t).signal}, ${n}, ${r})`}}function Ytn(e){if(Hn(["quantile","threshold","log","symlog"],e))return"greedy"}function B5e(e){const t=Wi(e)?Ktn(e):Ztn(e);return e.component.legends=t,t}function Ktn(e){const{encoding:t}=e,n={};for(const r of[il,...MFe]){const i=Ms(t[r]);!i||!e.getScaleComponent(r)||r===sl&&et(i)&&i.type===nT||(n[r]=Jtn(e,r))}return n}function Xtn(e,t){const n=e.scaleName(t);if(e.mark==="trail"){if(t==="color")return{stroke:n};if(t==="size")return{strokeWidth:n}}return t==="color"?e.markDef.filled?{fill:n}:{stroke:n}:{[t]:n}}function Qtn(e,t,n,r){switch(t){case"disable":return n!==void 0;case"values":return!!(n!=null&&n.values);case"title":if(t==="title"&&e===(r==null?void 0:r.title))return!0}return e===(n||{})[t]}function Jtn(e,t){var w;let n=e.legend(t);const{markDef:r,encoding:i,config:s}=e,o=s.legend,a=new Mtn({},Xtn(e,t));atn(e,t,a);const u=n!==void 0?!n:o.disable;if(a.set("disable",u,n!==void 0),u)return a;n=n||{};const l=e.getScaleComponent(t).get("type"),c=Ms(i[t]),f=et(c)?(w=lo(c.timeUnit))==null?void 0:w.unit:void 0,d=n.orient||s.legend.orient||"right",h=Vtn({legend:n,channel:t,timeUnit:f,scaleType:l}),p=qtn({legend:n,legendType:h,orient:d,legendConfig:o}),m={legend:n,channel:t,model:e,markDef:r,encoding:i,fieldOrDatumDef:c,legendConfig:o,config:s,scaleType:l,orient:d,legendType:h,direction:p};for(const E of M5e){if(h==="gradient"&&E.startsWith("symbol")||h==="symbol"&&E.startsWith("gradient"))continue;const T=E in b0e?b0e[E](m):n[E];if(T!==void 0){const S=Qtn(T,E,n,e.fieldDef(t));(S||s.legend[E]===void 0)&&a.set(E,T,S)}}const g=(n==null?void 0:n.encoding)??{},y=a.get("selections"),v={},b={fieldOrDatumDef:c,model:e,channel:t,legendCmpt:a,legendType:h};for(const E of["labels","legend","title","symbols","gradient","entries"]){const T=O5e(g[E]??{},e),S=E in v0e?v0e[E](T,b):T;S!==void 0&&!jr(S)&&(v[E]={...y!=null&&y.length&&et(c)?{name:`${Ci(c.field)}_legend_${E}`}:{},...y!=null&&y.length?{interactive:!!y}:{},update:S})}return jr(v)||a.set("encode",v,!!(n!=null&&n.encoding)),a}function Ztn(e){const{legends:t,resolve:n}=e.component;for(const r of e.children){B5e(r);for(const i of Ye(r.component.legends))n.legend[i]=sie(e.component.resolve,i),n.legend[i]==="shared"&&(t[i]=U5e(t[i],r.component.legends[i]),t[i]||(n.legend[i]="independent",delete t[i]))}for(const r of Ye(t))for(const i of e.children)i.component.legends[r]&&n.legend[r]==="shared"&&delete i.component.legends[r];return t}function U5e(e,t){var s,o,a,u;if(!e)return t.clone();const n=e.getWithExplicit("orient"),r=t.getWithExplicit("orient");if(n.explicit&&r.explicit&&n.value!==r.value)return;let i=!1;for(const l of M5e){const c=_y(e.getWithExplicit(l),t.getWithExplicit(l),l,"legend",(f,d)=>{switch(l){case"symbolType":return enn(f,d);case"title":return E4e(f,d);case"type":return i=!0,hl("symbol")}return p5(f,d,l,"legend")});e.setWithExplicit(l,c)}return i&&((o=(s=e.implicit)==null?void 0:s.encode)!=null&&o.gradient&&LM(e.implicit,["encode","gradient"]),(u=(a=e.explicit)==null?void 0:a.encode)!=null&&u.gradient&&LM(e.explicit,["encode","gradient"])),e}function enn(e,t){return t.value==="circle"?t:e}function tnn(e,t,n,r){var i,s;e.encode??(e.encode={}),(i=e.encode)[t]??(i[t]={}),(s=e.encode[t]).update??(s.update={}),e.encode[t].update[n]=r}function z5e(e){const t=e.component.legends,n={};for(const i of Ye(t)){const s=e.getScaleComponent(i),o=Br(s.get("domains"));if(n[o])for(const a of n[o])U5e(a,t[i])||n[o].push(t[i]);else n[o]=[t[i].clone()]}return Mo(n).flat().map(i=>nnn(i,e.config)).filter(i=>i!==void 0)}function nnn(e,t){var o,a,u;const{disable:n,labelExpr:r,selections:i,...s}=e.combine();if(!n){if(t.aria===!1&&s.aria==null&&(s.aria=!1),(o=s.encode)!=null&&o.symbols){const l=s.encode.symbols.update;l.fill&&l.fill.value!=="transparent"&&!l.stroke&&!s.stroke&&(l.stroke={value:"transparent"});for(const c of MFe)s[c]&&delete l[c]}if(s.title||delete s.title,r!==void 0){let l=r;(u=(a=s.encode)==null?void 0:a.labels)!=null&&u.update&&Rt(s.encode.labels.update.text)&&(l=vb(r,"datum.label",s.encode.labels.update.text.signal)),tnn(s,"labels","text",{signal:l})}return s}}function rnn(e){return aT(e)||fie(e)?inn(e):V5e(e)}function inn(e){return e.children.reduce((t,n)=>t.concat(n.assembleProjections()),V5e(e))}function V5e(e){const t=e.component.projection;if(!t||t.merged)return[];const n=t.combine(),{name:r}=n;if(t.data){const i={signal:`[${t.size.map(o=>o.signal).join(", ")}]`},s=t.data.reduce((o,a)=>{const u=Rt(a)?a.signal:`data('${e.lookupDataSource(a)}')`;return Hn(o,u)||o.push(u),o},[]);if(s.length<=0)throw new Error("Projection's fit didn't find any data sources");return[{name:r,size:i,fit:{signal:s.length>1?`[${s.join(", ")}]`:s[0]},...n}]}else return[{name:r,translate:{signal:"[width / 2, height / 2]"},...n}]}const snn=["type","clipAngle","clipExtent","center","rotate","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];class H5e extends pg{constructor(t,n,r,i){super({...n},{name:t}),this.specifiedProjection=n,this.size=r,this.data=i,this.merged=!1}get isFit(){return!!this.data}}function q5e(e){e.component.projection=Wi(e)?onn(e):lnn(e)}function onn(e){if(e.hasProjection){const t=ku(e.specifiedProjection),n=!(t&&(t.scale!=null||t.translate!=null)),r=n?[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]:void 0,i=n?ann(e):void 0,s=new H5e(e.projectionName(!0),{...ku(e.config.projection),...t},r,i);return s.get("type")||s.set("type","equalEarth",!1),s}}function ann(e){const t=[],{encoding:n}=e;for(const r of[[yd,gd],[zc,vd]])(Ms(n[r[0]])||Ms(n[r[1]]))&&t.push({signal:e.getName(`geojson_${t.length}`)});return e.channelHasField(sl)&&e.typedFieldDef(sl).type===nT&&t.push({signal:e.getName(`geojson_${t.length}`)}),t.length===0&&t.push(e.requestDataName(Ei.Main)),t}function unn(e,t){const n=Jne(snn,i=>!!(!jt(e.explicit,i)&&!jt(t.explicit,i)||jt(e.explicit,i)&&jt(t.explicit,i)&&kl(e.get(i),t.get(i))));if(kl(e.size,t.size)){if(n)return e;if(kl(e.explicit,{}))return t;if(kl(t.explicit,{}))return e}return null}function lnn(e){if(e.children.length===0)return;let t;for(const r of e.children)q5e(r);const n=Jne(e.children,r=>{const i=r.component.projection;if(i)if(t){const s=unn(t,i);return s&&(t=s),!!s}else return t=i,!0;else return!0});if(t&&n){const r=e.projectionName(!0),i=new H5e(r,t.specifiedProjection,t.size,nn(t.data));for(const s of e.children){const o=s.component.projection;o&&(o.isFit&&i.data.push(...s.component.projection.data),s.renameProjection(o.get("name"),r),o.merged=!0)}return i}}function cnn(e,t,n,r){if(HR(t,n)){const i=Wi(e)?e.axis(n)??e.legend(n)??{}:{},s=at(t,{expr:"datum"}),o=at(t,{expr:"datum",binSuffix:"end"});return{formulaAs:at(t,{binSuffix:"range",forAs:!0}),formula:UR(s,o,i.format,i.formatType,r)}}return{}}function W5e(e,t){return`${p4e(e)}_${t}`}function fnn(e,t){return{signal:e.getName(`${t}_bins`),extentSignal:e.getName(`${t}_extent`)}}function oie(e,t,n){const r=u5(n,void 0)??{},i=W5e(r,t);return e.getName(`${i}_bins`)}function dnn(e){return"as"in e}function w0e(e,t,n){let r,i;dnn(e)?r=mt(e.as)?[e.as,`${e.as}_end`]:[e.as[0],e.as[1]]:r=[at(e,{forAs:!0}),at(e,{binSuffix:"end",forAs:!0})];const s={...u5(t,void 0)},o=W5e(s,e.field),{signal:a,extentSignal:u}=fnn(n,o);if(QF(s.extent)){const c=s.extent;i=S5e(n,c.param,c),delete s.extent}const l={bin:s,field:e.field,as:[r],...a?{signal:a}:{},...u?{extentSignal:u}:{},...i?{span:i}:{}};return{key:o,binComponent:l}}class xh extends Mr{clone(){return new xh(null,nn(this.bins))}constructor(t,n){super(t),this.bins=n}static makeFromEncoding(t,n){const r=n.reduceFieldDef((i,s,o)=>{if(ru(s)&&si(s.bin)){const{key:a,binComponent:u}=w0e(s,s.bin,n);i[a]={...u,...i[a],...cnn(n,s,o,n.config)}}return i},{});return jr(r)?null:new xh(t,r)}static makeFromTransform(t,n,r){const{key:i,binComponent:s}=w0e(n,n.bin,r);return new xh(t,{[i]:s})}merge(t,n){for(const r of Ye(t.bins))r in this.bins?(n(t.bins[r].signal,this.bins[r].signal),this.bins[r].as=sh([...this.bins[r].as,...t.bins[r].as],Vn)):this.bins[r]=t.bins[r];for(const r of t.children)t.removeChild(r),r.parent=this;t.remove()}producedFields(){return new Set(Mo(this.bins).map(t=>t.as).flat(2))}dependentFields(){return new Set(Mo(this.bins).map(t=>t.field))}hash(){return`Bin ${Vn(this.bins)}`}assemble(){return Mo(this.bins).flatMap(t=>{const n=[],[r,...i]=t.as,{extent:s,...o}=t.bin,a={type:"bin",field:Uc(t.field),as:r,signal:t.signal,...QF(s)?{extent:null}:{extent:s},...t.span?{span:{signal:`span(${t.span})`}}:{},...o};!s&&t.extentSignal&&(n.push({type:"extent",field:Uc(t.field),signal:t.extentSignal}),a.extent={signal:t.extentSignal}),n.push(a);for(const u of i)for(let l=0;l<2;l++)n.push({type:"formula",expr:at({field:r[l]},{expr:"datum"}),as:u[l]});return t.formula&&n.push({type:"formula",expr:t.formula,as:t.formulaAs}),n})}}function hnn(e,t,n,r){var s;const i=Wi(r)?r.encoding[cp(t)]:void 0;if(ru(n)&&Wi(r)&&aFe(n,i,r.markDef,r.config)){e.add(at(n,{})),e.add(at(n,{suffix:"end"}));const{mark:o,markDef:a,config:u}=r,l=by({fieldDef:n,markDef:a,config:u});GI(o)&&l!==.5&&ds(t)&&(e.add(at(n,{suffix:m5})),e.add(at(n,{suffix:g5}))),n.bin&&HR(n,t)&&e.add(at(n,{binSuffix:"range"}))}else if(i4e(t)){const o=r4e(t);e.add(r.getName(o))}else e.add(at(n));return m_(n)&&rJt((s=n.scale)==null?void 0:s.range)&&e.add(n.scale.range.field),e}function pnn(e,t){for(const n of Ye(t)){const r=t[n];for(const i of Ye(r))n in e?e[n][i]=new Set([...e[n][i]??[],...r[i]]):e[n]={[i]:r[i]}}}class qf extends Mr{clone(){return new qf(null,new Set(this.dimensions),nn(this.measures))}constructor(t,n,r){super(t),this.dimensions=n,this.measures=r}get groupBy(){return this.dimensions}static makeFromEncoding(t,n){let r=!1;n.forEachFieldDef(o=>{o.aggregate&&(r=!0)});const i={},s=new Set;return!r||(n.forEachFieldDef((o,a)=>{const{aggregate:u,field:l}=o;if(u)if(u==="count")i["*"]??(i["*"]={}),i["*"].count=new Set([at(o,{forAs:!0})]);else{if(Bm(u)||tv(u)){const c=Bm(u)?"argmin":"argmax",f=u[c];i[f]??(i[f]={}),i[f][c]=new Set([at({op:c,field:f},{forAs:!0})])}else i[l]??(i[l]={}),i[l][u]=new Set([at(o,{forAs:!0})]);dg(a)&&n.scaleDomain(a)==="unaggregated"&&(i[l]??(i[l]={}),i[l].min=new Set([at({field:l,aggregate:"min"},{forAs:!0})]),i[l].max=new Set([at({field:l,aggregate:"max"},{forAs:!0})]))}else hnn(s,a,o,n)}),s.size+Ye(i).length===0)?null:new qf(t,s,i)}static makeFromTransform(t,n){const r=new Set,i={};for(const s of n.aggregate){const{op:o,field:a,as:u}=s;o&&(o==="count"?(i["*"]??(i["*"]={}),i["*"].count=new Set([u||at(s,{forAs:!0})])):(i[a]??(i[a]={}),i[a][o]=new Set([u||at(s,{forAs:!0})])))}for(const s of n.groupby??[])r.add(s);return r.size+Ye(i).length===0?null:new qf(t,r,i)}merge(t){return K6e(this.dimensions,t.dimensions)?(pnn(this.measures,t.measures),!0):(IQt("different dimensions, cannot merge"),!1)}addDimensions(t){t.forEach(this.dimensions.add,this.dimensions)}dependentFields(){return new Set([...this.dimensions,...Ye(this.measures)])}producedFields(){const t=new Set;for(const n of Ye(this.measures))for(const r of Ye(this.measures[n])){const i=this.measures[n][r];i.size===0?t.add(`${r}_${n}`):i.forEach(t.add,t)}return t}hash(){return`Aggregate ${Vn({dimensions:this.dimensions,measures:this.measures})}`}assemble(){const t=[],n=[],r=[];for(const s of Ye(this.measures))for(const o of Ye(this.measures[s]))for(const a of this.measures[s][o])r.push(a),t.push(o),n.push(s==="*"?null:Uc(s));return{type:"aggregate",groupby:[...this.dimensions].map(Uc),ops:t,fields:n,as:r}}}class sT extends Mr{constructor(t,n,r,i){super(t),this.model=n,this.name=r,this.data=i;for(const s of Cc){const o=n.facet[s];if(o){const{bin:a,sort:u}=o;this[s]={name:n.getName(`${s}_domain`),fields:[at(o),...si(a)?[at(o,{binSuffix:"end"})]:[]],...wh(u)?{sortField:u}:je(u)?{sortIndexField:zx(o,s)}:{}}}}this.childModel=n.child}hash(){let t="Facet";for(const n of Cc)this[n]&&(t+=` ${n.charAt(0)}:${Vn(this[n])}`);return t}get fields(){var n;const t=[];for(const r of Cc)(n=this[r])!=null&&n.fields&&t.push(...this[r].fields);return t}dependentFields(){const t=new Set(this.fields);for(const n of Cc)this[n]&&(this[n].sortField&&t.add(this[n].sortField.field),this[n].sortIndexField&&t.add(this[n].sortIndexField));return t}producedFields(){return new Set}getSource(){return this.name}getChildIndependentFieldsWithStep(){const t={};for(const n of fp){const r=this.childModel.component.scales[n];if(r&&!r.merged){const i=r.get("type"),s=r.get("range");if(co(i)&&nv(s)){const o=w5(this.childModel,n),a=cie(o);a?t[n]=a:Ze(fre(n))}}}return t}assembleRowColumnHeaderData(t,n,r){const i={row:"y",column:"x",facet:void 0}[t],s=[],o=[],a=[];i&&r&&r[i]&&(n?(s.push(`distinct_${r[i]}`),o.push("max")):(s.push(r[i]),o.push("distinct")),a.push(`distinct_${r[i]}`));const{sortField:u,sortIndexField:l}=this[t];if(u){const{op:c=i5,field:f}=u;s.push(f),o.push(c),a.push(at(u,{forAs:!0}))}else l&&(s.push(l),o.push("max"),a.push(l));return{name:this[t].name,source:n??this.data,transform:[{type:"aggregate",groupby:this[t].fields,...s.length?{fields:s,ops:o,as:a}:{}}]}}assembleFacetHeaderData(t){var u;const{columns:n}=this.model.layout,{layoutHeaders:r}=this.model.component,i=[],s={};for(const l of nie){for(const c of rie){const f=(r[l]&&r[l][c])??[];for(const d of f)if(((u=d.axes)==null?void 0:u.length)>0){s[l]=!0;break}}if(s[l]){const c=`length(data("${this.facet.name}"))`,f=l==="row"?n?{signal:`ceil(${c} / ${n})`}:1:n?{signal:`min(${c}, ${n})`}:{signal:c};i.push({name:`${this.facet.name}_${l}`,transform:[{type:"sequence",start:0,stop:f}]})}}const{row:o,column:a}=s;return(o||a)&&i.unshift(this.assembleRowColumnHeaderData("facet",null,t)),i}assemble(){const t=[];let n=null;const r=this.getChildIndependentFieldsWithStep(),{column:i,row:s,facet:o}=this;if(i&&s&&(r.x||r.y)){n=`cross_${this.column.name}_${this.row.name}`;const a=[].concat(r.x??[],r.y??[]),u=a.map(()=>"distinct");t.push({name:n,source:this.data,transform:[{type:"aggregate",groupby:this.fields,fields:a,ops:u}]})}for(const a of[fm,cm])this[a]&&t.push(this.assembleRowColumnHeaderData(a,n,r));if(o){const a=this.assembleFacetHeaderData(r);a&&t.push(...a)}return t}}function E0e(e){return e.startsWith("'")&&e.endsWith("'")||e.startsWith('"')&&e.endsWith('"')?e.slice(1,-1):e}function mnn(e,t){const n=tre(e);if(t==="number")return`toNumber(${n})`;if(t==="boolean")return`toBoolean(${n})`;if(t==="string")return`toString(${n})`;if(t==="date")return`toDate(${n})`;if(t==="flatten")return n;if(t.startsWith("date:")){const r=E0e(t.slice(5,t.length));return`timeParse(${n},'${r}')`}else if(t.startsWith("utc:")){const r=E0e(t.slice(4,t.length));return`utcParse(${n},'${r}')`}else return Ze(LXt(t)),null}function gnn(e){const t={};return hO(e.filter,n=>{if(j4e(n)){let r=null;mre(n)?r=wl(n.equal):yre(n)?r=wl(n.lte):gre(n)?r=wl(n.lt):vre(n)?r=wl(n.gt):bre(n)?r=wl(n.gte):_re(n)?r=n.range[0]:wre(n)&&(r=(n.oneOf??n.in)[0]),r&&(d_(r)?t[n.field]="date":lr(r)?t[n.field]="number":mt(r)&&(t[n.field]="string")),n.timeUnit&&(t[n.field]="date")}}),t}function ynn(e){const t={};function n(r){Fx(r)?t[r.field]="date":r.type==="quantitative"&&pXt(r.aggregate)?t[r.field]="number":Nx(r.field)>1?r.field in t||(t[r.field]="flatten"):m_(r)&&wh(r.sort)&&Nx(r.sort.field)>1&&(r.sort.field in t||(t[r.sort.field]="flatten"))}if((Wi(e)||Ol(e))&&e.forEachFieldDef((r,i)=>{if(ru(r))n(r);else{const s=c_(i),o=e.fieldDef(s);n({...r,type:o.type})}}),Wi(e)){const{mark:r,markDef:i,encoding:s}=e;if(p_(r)&&!e.encoding.order){const o=i.orient==="horizontal"?"y":"x",a=s[o];et(a)&&a.type==="quantitative"&&!(a.field in t)&&(t[a.field]="number")}}return t}function vnn(e){const t={};if(Wi(e)&&e.component.selection)for(const n of Ye(e.component.selection)){const r=e.component.selection[n];for(const i of r.project.items)!i.channel&&Nx(i.field)>1&&(t[i.field]="flatten")}return t}class ma extends Mr{clone(){return new ma(null,nn(this._parse))}constructor(t,n){super(t),this._parse=n}hash(){return`Parse ${Vn(this._parse)}`}static makeExplicit(t,n,r){var o;let i={};const s=n.data;return!$0(s)&&((o=s==null?void 0:s.format)!=null&&o.parse)&&(i=s.format.parse),this.makeWithAncestors(t,i,{},r)}static makeWithAncestors(t,n,r,i){for(const a of Ye(r)){const u=i.getWithExplicit(a);u.value!==void 0&&(u.explicit||u.value===r[a]||u.value==="derived"||r[a]==="flatten"?delete r[a]:Ze(Dge(a,r[a],u.value)))}for(const a of Ye(n)){const u=i.get(a);u!==void 0&&(u===n[a]?delete n[a]:Ze(Dge(a,n[a],u)))}const s=new pg(n,r);i.copyAll(s);const o={};for(const a of Ye(s.combine())){const u=s.get(a);u!==null&&(o[a]=u)}return Ye(o).length===0||i.parseNothing?null:new ma(t,o)}get parse(){return this._parse}merge(t){this._parse={...this._parse,...t.parse},t.remove()}assembleFormatParse(){const t={};for(const n of Ye(this._parse)){const r=this._parse[n];Nx(n)===1&&(t[n]=r)}return t}producedFields(){return new Set(Ye(this._parse))}dependentFields(){return new Set(Ye(this._parse))}assembleTransforms(t=!1){return Ye(this._parse).filter(n=>t?Nx(n)>1:!0).map(n=>{const r=mnn(n,this._parse[n]);return r?{type:"formula",expr:r,as:eT(n)}:null}).filter(n=>n!==null)}}class xy extends Mr{clone(){return new xy(null)}constructor(t){super(t)}dependentFields(){return new Set}producedFields(){return new Set([id])}hash(){return"Identifier"}assemble(){return{type:"identifier",as:id}}}class GR extends Mr{clone(){return new GR(null,this.params)}constructor(t,n){super(t),this.params=n}dependentFields(){return new Set}producedFields(){}hash(){return`Graticule ${Vn(this.params)}`}assemble(){return{type:"graticule",...this.params===!0?{}:this.params}}}class YR extends Mr{clone(){return new YR(null,this.params)}constructor(t,n){super(t),this.params=n}dependentFields(){return new Set}producedFields(){return new Set([this.params.as??"data"])}hash(){return`Hash ${Vn(this.params)}`}assemble(){return{type:"sequence",...this.params}}}class Cb extends Mr{constructor(t){super(null),t??(t={name:"source"});let n;if($0(t)||(n=t.format?{...Gu(t.format,["parse"])}:{}),YI(t))this._data={values:t.values};else if(jx(t)){if(this._data={url:t.url},!n.type){let r=/(?:\.([^.]+))?$/.exec(t.url)[1];Hn(["json","csv","tsv","dsv","topojson"],r)||(r="json"),n.type=r}}else e5e(t)?this._data={values:[{type:"Sphere"}]}:(JFe(t)||$0(t))&&(this._data={});this._generator=$0(t),t.name&&(this._name=t.name),n&&!jr(n)&&(this._data.format=n)}dependentFields(){return new Set}producedFields(){}get data(){return this._data}hasName(){return!!this._name}get isGenerator(){return this._generator}get dataName(){return this._name}set dataName(t){this._name=t}set parent(t){throw new Error("Source nodes have to be roots.")}remove(){throw new Error("Source nodes are roots and cannot be removed.")}hash(){throw new Error("Cannot hash sources")}assemble(){return{name:this._name,...this._data,transform:[]}}}var x0e=function(e,t,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(e,n):i?i.value=n:t.set(e,n),n},bnn=function(e,t,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(e):r?r.value:t.get(e)},rC;function aie(e){return e instanceof Cb||e instanceof GR||e instanceof YR}class uie{constructor(){rC.set(this,void 0),x0e(this,rC,!1,"f")}setModified(){x0e(this,rC,!0,"f")}get modifiedFlag(){return bnn(this,rC,"f")}}rC=new WeakMap;class g_ extends uie{getNodeDepths(t,n,r){r.set(t,n);for(const i of t.children)this.getNodeDepths(i,n+1,r);return r}optimize(t){const r=[...this.getNodeDepths(t,0,new Map).entries()].sort((i,s)=>s[1]-i[1]);for(const i of r)this.run(i[0]);return this.modifiedFlag}}class lie extends uie{optimize(t){this.run(t);for(const n of t.children)this.optimize(n);return this.modifiedFlag}}class _nn extends lie{mergeNodes(t,n){const r=n.shift();for(const i of n)t.removeChild(i),i.parent=r,i.remove()}run(t){const n=t.children.map(i=>i.hash()),r={};for(let i=0;i<n.length;i++)r[n[i]]===void 0?r[n[i]]=[t.children[i]]:r[n[i]].push(t.children[i]);for(const i of Ye(r))r[i].length>1&&(this.setModified(),this.mergeNodes(t,r[i]))}}class wnn extends lie{constructor(t){super(),this.requiresSelectionId=t&&tie(t)}run(t){t instanceof xy&&(this.requiresSelectionId&&(aie(t.parent)||t.parent instanceof qf||t.parent instanceof ma)||(this.setModified(),t.remove()))}}class Enn extends uie{optimize(t){return this.run(t,new Set),this.modifiedFlag}run(t,n){let r=new Set;t instanceof Eh&&(r=t.producedFields(),Zne(r,n)&&(this.setModified(),t.removeFormulas(n),t.producedFields.length===0&&t.remove()));for(const i of t.children)this.run(i,new Set([...n,...r]))}}class xnn extends lie{constructor(){super()}run(t){t instanceof Ku&&!t.isRequired()&&(this.setModified(),t.remove())}}class Snn extends g_{run(t){if(!aie(t)&&!(t.numChildren()>1)){for(const n of t.children)if(n instanceof ma)if(t instanceof ma)this.setModified(),t.merge(n);else{if(ere(t.producedFields(),n.dependentFields()))continue;this.setModified(),n.swapWithParent()}}}}class Tnn extends g_{run(t){const n=[...t.children],r=t.children.filter(i=>i instanceof ma);if(t.numChildren()>1&&r.length>=1){const i={},s=new Set;for(const o of r){const a=o.parse;for(const u of Ye(a))u in i?i[u]!==a[u]&&s.add(u):i[u]=a[u]}for(const o of s)delete i[o];if(!jr(i)){this.setModified();const o=new ma(t,i);for(const a of n){if(a instanceof ma)for(const u of Ye(i))delete a.parse[u];t.removeChild(a),a.parent=o,a instanceof ma&&Ye(a.parse).length===0&&a.remove()}}}}}class Cnn extends g_{run(t){t instanceof Ku||t.numChildren()>0||t instanceof sT||t instanceof Cb||(this.setModified(),t.remove())}}class Ann extends g_{run(t){const n=t.children.filter(i=>i instanceof Eh),r=n.pop();for(const i of n)this.setModified(),r.merge(i)}}class Inn extends g_{run(t){const n=t.children.filter(i=>i instanceof qf),r={};for(const i of n){const s=Vn(i.groupBy);s in r||(r[s]=[]),r[s].push(i)}for(const i of Ye(r)){const s=r[i];if(s.length>1){const o=s.pop();for(const a of s)o.merge(a)&&(t.removeChild(a),a.parent=o,a.remove(),this.setModified())}}}}class knn extends g_{constructor(t){super(),this.model=t}run(t){const n=!(aie(t)||t instanceof iT||t instanceof ma||t instanceof xy),r=[],i=[];for(const s of t.children)s instanceof xh&&(n&&!ere(t.producedFields(),s.dependentFields())?r.push(s):i.push(s));if(r.length>0){const s=r.pop();for(const o of r)s.merge(o,this.model.renameSignal.bind(this.model));this.setModified(),t instanceof xh?t.merge(s,this.model.renameSignal.bind(this.model)):s.swapWithParent()}if(i.length>1){const s=i.pop();for(const o of i)s.merge(o,this.model.renameSignal.bind(this.model));this.setModified()}}}class Rnn extends g_{run(t){const n=[...t.children];if(!yb(n,o=>o instanceof Ku)||t.numChildren()<=1)return;const i=[];let s;for(const o of n)if(o instanceof Ku){let a=o;for(;a.numChildren()===1;){const[u]=a.children;if(u instanceof Ku)a=u;else break}i.push(...a.children),s?(t.removeChild(o),o.parent=s.parent,s.parent.removeChild(s),s.parent=a,this.setModified()):s=a}else i.push(o);if(i.length){this.setModified();for(const o of i)o.parent.removeChild(o),o.parent=s}}}class y_ extends Mr{clone(){return new y_(null,nn(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=sh(this.transform.groupby.concat(t),n=>n)}dependentFields(){const t=new Set;return this.transform.groupby&&this.transform.groupby.forEach(t.add,t),this.transform.joinaggregate.map(n=>n.field).filter(n=>n!==void 0).forEach(t.add,t),t}producedFields(){return new Set(this.transform.joinaggregate.map(this.getDefaultName))}getDefaultName(t){return t.as??at(t)}hash(){return`JoinAggregateTransform ${Vn(this.transform)}`}assemble(){const t=[],n=[],r=[];for(const s of this.transform.joinaggregate)n.push(s.op),r.push(this.getDefaultName(s)),t.push(s.field===void 0?null:s.field);const i=this.transform.groupby;return{type:"joinaggregate",as:r,ops:n,fields:t,...i!==void 0?{groupby:i}:{}}}}function Nnn(e){return e.stack.stackBy.reduce((t,n)=>{const r=n.fieldDef,i=at(r);return i&&t.push(i),t},[])}function Dnn(e){return je(e)&&e.every(t=>mt(t))&&e.length>1}class hm extends Mr{clone(){return new hm(null,nn(this._stack))}constructor(t,n){super(t),this._stack=n}static makeFromTransform(t,n){const{stack:r,groupby:i,as:s,offset:o="zero"}=n,a=[],u=[];if(n.sort!==void 0)for(const f of n.sort)a.push(f.field),u.push(fs(f.order,"ascending"));const l={field:a,order:u};let c;return Dnn(s)?c=s:mt(s)?c=[s,`${s}_end`]:c=[`${n.stack}_start`,`${n.stack}_end`],new hm(t,{dimensionFieldDefs:[],stackField:r,groupby:i,offset:o,sort:l,facetby:[],as:c})}static makeFromEncoding(t,n){const r=n.stack,{encoding:i}=n;if(!r)return null;const{groupbyChannels:s,fieldChannel:o,offset:a,impute:u}=r,l=s.map(h=>{const p=i[h];return Uh(p)}).filter(h=>!!h),c=Nnn(n),f=n.encoding.order;let d;if(je(f)||et(f))d=b4e(f);else{const h=uFe(f)?f.sort:o==="y"?"descending":"ascending";d=c.reduce((p,m)=>(p.field.includes(m)||(p.field.push(m),p.order.push(h)),p),{field:[],order:[]})}return new hm(t,{dimensionFieldDefs:l,stackField:n.vgField(o),facetby:[],stackby:c,sort:d,offset:a,impute:u,as:[n.vgField(o,{suffix:"start",forAs:!0}),n.vgField(o,{suffix:"end",forAs:!0})]})}get stack(){return this._stack}addDimensions(t){this._stack.facetby.push(...t)}dependentFields(){const t=new Set;return t.add(this._stack.stackField),this.getGroupbyFields().forEach(t.add,t),this._stack.facetby.forEach(t.add,t),this._stack.sort.field.forEach(t.add,t),t}producedFields(){return new Set(this._stack.as)}hash(){return`Stack ${Vn(this._stack)}`}getGroupbyFields(){const{dimensionFieldDefs:t,impute:n,groupby:r}=this._stack;return t.length>0?t.map(i=>i.bin?n?[at(i,{binSuffix:"mid"})]:[at(i,{}),at(i,{binSuffix:"end"})]:[at(i)]).flat():r??[]}assemble(){const t=[],{facetby:n,dimensionFieldDefs:r,stackField:i,stackby:s,sort:o,offset:a,impute:u,as:l}=this._stack;if(u)for(const c of r){const{bandPosition:f=.5,bin:d}=c;if(d){const h=at(c,{expr:"datum"}),p=at(c,{expr:"datum",binSuffix:"end"});t.push({type:"formula",expr:`${f}*${h}+${1-f}*${p}`,as:at(c,{binSuffix:"mid",forAs:!0})})}t.push({type:"impute",field:i,groupby:[...s,...n],key:at(c,{binSuffix:"mid"}),method:"value",value:0})}return t.push({type:"stack",groupby:[...this.getGroupbyFields(),...n],field:i,sort:o,as:l,offset:a}),t}}class oT extends Mr{clone(){return new oT(null,nn(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=sh(this.transform.groupby.concat(t),n=>n)}dependentFields(){const t=new Set;return(this.transform.groupby??[]).forEach(t.add,t),(this.transform.sort??[]).forEach(n=>t.add(n.field)),this.transform.window.map(n=>n.field).filter(n=>n!==void 0).forEach(t.add,t),t}producedFields(){return new Set(this.transform.window.map(this.getDefaultName))}getDefaultName(t){return t.as??at(t)}hash(){return`WindowTransform ${Vn(this.transform)}`}assemble(){const t=[],n=[],r=[],i=[];for(const f of this.transform.window)n.push(f.op),r.push(this.getDefaultName(f)),i.push(f.param===void 0?null:f.param),t.push(f.field===void 0?null:f.field);const s=this.transform.frame,o=this.transform.groupby;if(s&&s[0]===null&&s[1]===null&&n.every(f=>lre(f)))return{type:"joinaggregate",as:r,ops:n,fields:t,...o!==void 0?{groupby:o}:{}};const a=[],u=[];if(this.transform.sort!==void 0)for(const f of this.transform.sort)a.push(f.field),u.push(f.order??"ascending");const l={field:a,order:u},c=this.transform.ignorePeers;return{type:"window",params:i,as:r,ops:n,fields:t,sort:l,...c!==void 0?{ignorePeers:c}:{},...o!==void 0?{groupby:o}:{},...s!==void 0?{frame:s}:{}}}}function Pnn(e){function t(n){if(!(n instanceof sT)){const r=n.clone();if(r instanceof Ku){const i=Aq+r.getSource();r.setSource(i),e.model.component.data.outputNodes[i]=r}else(r instanceof qf||r instanceof hm||r instanceof oT||r instanceof y_)&&r.addDimensions(e.fields);for(const i of n.children.flatMap(t))i.parent=r;return[r]}return n.children.flatMap(t)}return t}function Cq(e){if(e instanceof sT)if(e.numChildren()===1&&!(e.children[0]instanceof Ku)){const t=e.children[0];(t instanceof qf||t instanceof hm||t instanceof oT||t instanceof y_)&&t.addDimensions(e.fields),t.swapWithParent(),Cq(e)}else{const t=e.model.component.data.main;G5e(t);const n=Pnn(e),r=e.children.map(n).flat();for(const i of r)i.parent=t}else e.children.map(Cq)}function G5e(e){if(e instanceof Ku&&e.type===Ei.Main&&e.numChildren()===1){const t=e.children[0];t instanceof sT||(t.swapWithParent(),G5e(e))}}const Aq="scale_",BD=5;function Iq(e){for(const t of e){for(const n of t.children)if(n.parent!==t)return!1;if(!Iq(t.children))return!1}return!0}function sf(e,t){let n=!1;for(const r of t)n=e.optimize(r)||n;return n}function S0e(e,t,n){let r=e.sources,i=!1;return i=sf(new xnn,r)||i,i=sf(new wnn(t),r)||i,r=r.filter(s=>s.numChildren()>0),i=sf(new Cnn,r)||i,r=r.filter(s=>s.numChildren()>0),n||(i=sf(new Snn,r)||i,i=sf(new knn(t),r)||i,i=sf(new Enn,r)||i,i=sf(new Tnn,r)||i,i=sf(new Inn,r)||i,i=sf(new Ann,r)||i,i=sf(new _nn,r)||i,i=sf(new Rnn,r)||i),e.sources=r,i}function Onn(e,t){Iq(e.sources);let n=0,r=0;for(let i=0;i<BD&&S0e(e,t,!0);i++)n++;e.sources.map(Cq);for(let i=0;i<BD&&S0e(e,t,!1);i++)r++;Iq(e.sources),Math.max(n,r)===BD&&Ze(`Maximum optimization runs(${BD}) reached.`)}class Js{constructor(t){Object.defineProperty(this,"signal",{enumerable:!0,get:t})}static fromName(t,n){return new Js(()=>t(n))}}function Y5e(e){Wi(e)?$nn(e):Mnn(e)}function $nn(e){const t=e.component.scales;for(const n of Ye(t)){const r=Fnn(e,n);if(t[n].setWithExplicit("domains",r),Bnn(e,n),e.component.data.isFaceted){let s=e;for(;!Ol(s)&&s.parent;)s=s.parent;if(s.component.resolve.scale[n]==="shared")for(const a of r.value)tm(a)&&(a.data=Aq+a.data.replace(Aq,""))}}}function Mnn(e){for(const n of e.children)Y5e(n);const t=e.component.scales;for(const n of Ye(t)){let r,i=null;for(const s of e.children){const o=s.component.scales[n];if(o){r===void 0?r=o.getWithExplicit("domains"):r=_y(r,o.getWithExplicit("domains"),"domains","scale",kq);const a=o.get("selectionExtent");i&&a&&i.param!==a.param&&Ze(PXt),i=a}}t[n].setWithExplicit("domains",r),i&&t[n].set("selectionExtent",i,!0)}}function Lnn(e,t,n,r){if(e==="unaggregated"){const{valid:i,reason:s}=T0e(t,n);if(!i){Ze(s);return}}else if(e===void 0&&r.useUnaggregatedDomain){const{valid:i}=T0e(t,n);if(i)return"unaggregated"}return e}function Fnn(e,t){const n=e.getScaleComponent(t).get("type"),{encoding:r}=e,i=Lnn(e.scaleDomain(t),e.typedFieldDef(t),n,e.config.scale);return i!==e.scaleDomain(t)&&(e.specifiedScales[t]={...e.specifiedScales[t],domain:i}),t==="x"&&Ms(r.x2)?Ms(r.x)?_y(Ig(n,i,e,"x"),Ig(n,i,e,"x2"),"domain","scale",kq):Ig(n,i,e,"x2"):t==="y"&&Ms(r.y2)?Ms(r.y)?_y(Ig(n,i,e,"y"),Ig(n,i,e,"y2"),"domain","scale",kq):Ig(n,i,e,"y2"):Ig(n,i,e,t)}function jnn(e,t,n){return e.map(r=>({signal:`{data: ${l5(r,{timeUnit:n,type:t})}}`}))}function NB(e,t,n){var i;const r=(i=lo(n))==null?void 0:i.unit;return t==="temporal"||r?jnn(e,t,r):[e]}function Ig(e,t,n,r){const{encoding:i,markDef:s,mark:o,config:a,stack:u}=n,l=Ms(i[r]),{type:c}=l,f=l.timeUnit;if(nJt(t)){const p=Ig(e,void 0,n,r),m=NB(t.unionWith,c,f);return Ld([...m,...p.value])}else{if(Rt(t))return Ld([t]);if(t&&t!=="unaggregated"&&!W4e(t))return Ld(NB(t,c,f))}if(u&&r===u.fieldChannel){if(u.offset==="normalize")return hl([[0,1]]);const p=n.requestDataName(Ei.Main);return hl([{data:p,field:n.vgField(r,{suffix:"start"})},{data:p,field:n.vgField(r,{suffix:"end"})}])}const d=dg(r)&&et(l)?Unn(n,r,e):void 0;if(dp(l)){const p=NB([l.datum],c,f);return hl(p)}const h=l;if(t==="unaggregated"){const p=n.requestDataName(Ei.Main),{field:m}=l;return hl([{data:p,field:at({field:m,aggregate:"min"})},{data:p,field:at({field:m,aggregate:"max"})}])}else if(si(h.bin)){if(co(e))return hl(e==="bin-ordinal"?[]:[{data:qI(d)?n.requestDataName(Ei.Main):n.requestDataName(Ei.Raw),field:n.vgField(r,HR(h,r)?{binSuffix:"range"}:{}),sort:d===!0||!gt(d)?{field:n.vgField(r,{}),op:"min"}:d}]);{const{bin:p}=h;if(si(p)){const m=oie(n,h.field,p);return hl([new Js(()=>{const g=n.getSignalName(m);return`[${g}.start, ${g}.stop]`})])}else return hl([{data:n.requestDataName(Ei.Main),field:n.vgField(r,{})}])}}else if(h.timeUnit&&Hn(["time","utc"],e)){const p=i[cp(r)];if(aFe(h,p,s,a)){const m=n.requestDataName(Ei.Main),g=by({fieldDef:h,fieldDef2:p,markDef:s,config:a}),y=GI(o)&&g!==.5&&ds(r);return hl([{data:m,field:n.vgField(r,y?{suffix:m5}:{})},{data:m,field:n.vgField(r,{suffix:y?g5:"end"})}])}}return hl(d?[{data:qI(d)?n.requestDataName(Ei.Main):n.requestDataName(Ei.Raw),field:n.vgField(r),sort:d}]:[{data:n.requestDataName(Ei.Main),field:n.vgField(r)}])}function DB(e,t){const{op:n,field:r,order:i}=e;return{op:n??(t?"sum":i5),...r?{field:Uc(r)}:{},...i?{order:i}:{}}}function Bnn(e,t){var a;const n=e.component.scales[t],r=e.specifiedScales[t].domain,i=(a=e.fieldDef(t))==null?void 0:a.bin,s=W4e(r)&&r,o=f_(i)&&QF(i.extent)&&i.extent;(s||o)&&n.set("selectionExtent",s??o,!0)}function Unn(e,t,n){if(!co(n))return;const r=e.fieldDef(t),i=r.sort;if(sFe(i))return{op:"min",field:zx(r,t),order:"ascending"};const{stack:s}=e,o=s?new Set([...s.groupbyFields,...s.stackBy.map(a=>a.fieldDef.field)]):void 0;if(wh(i)){const a=s&&!o.has(i.field);return DB(i,a)}else if(iFe(i)){const{encoding:a,order:u}=i,l=e.fieldDef(a),{aggregate:c,field:f}=l,d=s&&!o.has(f);if(Bm(c)||tv(c))return DB({field:at(l),order:u},d);if(lre(c)||!c)return DB({op:c,field:f,order:u},d)}else{if(i==="descending")return{op:"min",field:e.vgField(t),order:"descending"};if(Hn(["ascending",void 0],i))return!0}}function T0e(e,t){const{aggregate:n,type:r}=e;return n?mt(n)&&!gXt.has(n)?{valid:!1,reason:sQt(n)}:r==="quantitative"&&t==="log"?{valid:!1,reason:oQt(e)}:{valid:!0}:{valid:!1,reason:iQt(e)}}function kq(e,t,n,r){return e.explicit&&t.explicit&&Ze(fQt(n,r,e.value,t.value)),{explicit:e.explicit,value:[...e.value,...t.value]}}function znn(e){const t=sh(e.map(o=>{if(tm(o)){const{sort:a,...u}=o;return u}return o}),Vn),n=sh(e.map(o=>{if(tm(o)){const a=o.sort;return a!==void 0&&!qI(a)&&("op"in a&&a.op==="count"&&delete a.field,a.order==="ascending"&&delete a.order),a}}).filter(o=>o!==void 0),Vn);if(t.length===0)return;if(t.length===1){const o=e[0];if(tm(o)&&n.length>0){let a=n[0];if(n.length>1){Ze(Oge);const u=n.filter(l=>gt(l)&&"op"in l&&l.op!=="min");n.every(l=>gt(l)&&"op"in l)&&u.length===1?a=u[0]:a=!0}else if(gt(a)&&"field"in a){const u=a.field;o.field===u&&(a=a.order?{order:a.order}:!0)}return{...o,sort:a}}return o}const r=sh(n.map(o=>qI(o)||!("op"in o)||mt(o.op)&&o.op in dXt?o:(Ze(hQt(o)),!0)),Vn);let i;r.length===1?i=r[0]:r.length>1&&(Ze(Oge),i=!0);const s=sh(e.map(o=>tm(o)?o.data:null),o=>o);return s.length===1&&s[0]!==null?{data:s[0],fields:t.map(a=>a.field),...i?{sort:i}:{}}:{fields:t,...i?{sort:i}:{}}}function cie(e){if(tm(e)&&mt(e.field))return e.field;if(yXt(e)){let t;for(const n of e.fields)if(tm(n)&&mt(n.field)){if(!t)t=n.field;else if(t!==n.field)return Ze(pQt),t}return Ze(mQt),t}else if(vXt(e)){Ze(gQt);const t=e.fields[0];return mt(t)?t:void 0}}function w5(e,t){const r=e.component.scales[t].get("domains").map(i=>(tm(i)&&(i.data=e.lookupDataSource(i.data)),i));return znn(r)}function K5e(e){return aT(e)||fie(e)?e.children.reduce((t,n)=>t.concat(K5e(n)),C0e(e)):C0e(e)}function C0e(e){return Ye(e.component.scales).reduce((t,n)=>{const r=e.component.scales[n];if(r.merged)return t;const i=r.combine(),{name:s,type:o,selectionExtent:a,domains:u,range:l,reverse:c,...f}=i,d=Vnn(i.range,s,n,e),h=w5(e,n),p=a?Len(e,a,r,h):null;return t.push({name:s,type:o,...h?{domain:h}:{},...p?{domainRaw:p}:{},range:d,...c!==void 0?{reverse:c}:{},...f}),t},[])}function Vnn(e,t,n,r){if(ds(n)){if(nv(e))return{step:{signal:`${t}_step`}}}else if(gt(e)&&tm(e))return{...e,data:r.lookupDataSource(e.data)};return e}class X5e extends pg{constructor(t,n){super({},{name:t}),this.merged=!1,this.setWithExplicit("type",n)}domainDefinitelyIncludesZero(){return this.get("zero")!==!1?!0:yb(this.get("domains"),t=>je(t)&&t.length===2&&lr(t[0])&&t[0]<=0&&lr(t[1])&&t[1]>=0)}}const Hnn=["range","scheme"];function qnn(e){const t=e.component.scales;for(const n of XF){const r=t[n];if(!r)continue;const i=Wnn(n,e);r.setWithExplicit("range",i)}}function A0e(e,t){const n=e.fieldDef(t);if(n!=null&&n.bin){const{bin:r,field:i}=n,s=ol(t),o=e.getName(s);if(gt(r)&&r.binned&&r.step!==void 0)return new Js(()=>{const a=e.scaleName(t),u=`(domain("${a}")[1] - domain("${a}")[0]) / ${r.step}`;return`${e.getSignalName(o)} / (${u})`});if(si(r)){const a=oie(e,i,r);return new Js(()=>{const u=e.getSignalName(a),l=`(${u}.stop - ${u}.start) / ${u}.step`;return`${e.getSignalName(o)} / (${l})`})}}}function Wnn(e,t){const n=t.specifiedScales[e],{size:r}=t,s=t.getScaleComponent(e).get("type");for(const f of Hnn)if(n[f]!==void 0){const d=hq(s,f),h=G4e(e,f);if(!d)Ze(C4e(s,f,e));else if(h)Ze(h);else switch(f){case"range":{const p=n.range;if(je(p)){if(ds(e))return Ld(p.map(m=>{if(m==="width"||m==="height"){const g=t.getName(m),y=t.getSignalName.bind(t);return Js.fromName(y,g)}return m}))}else if(gt(p))return Ld({data:t.requestDataName(Ei.Main),field:p.field,sort:{op:"min",field:t.vgField(e)}});return Ld(p)}case"scheme":return Ld(Gnn(n[f]))}}const o=e===Ai||e==="xOffset"?"width":"height",a=r[o];if(zh(a)){if(ds(e))if(co(s)){const f=J5e(a,t,e);if(f)return Ld({step:f})}else Ze(A4e(o));else if(FR(e)){const f=e===Xy?"x":"y";if(t.getScaleComponent(f).get("type")==="band"){const p=Z5e(a,s);if(p)return Ld(p)}}}const{rangeMin:u,rangeMax:l}=n,c=Ynn(e,t);return(u!==void 0||l!==void 0)&&hq(s,"rangeMin")&&je(c)&&c.length===2?Ld([u??c[0],l??c[1]]):hl(c)}function Gnn(e){return tJt(e)?{scheme:e.name,...Gu(e,["name"])}:{scheme:e}}function Q5e(e,t,n,{center:r}={}){const i=ol(e),s=t.getName(i),o=t.getSignalName.bind(t);return e===po&&Yl(n)?r?[Js.fromName(a=>`${o(a)}/2`,s),Js.fromName(a=>`-${o(a)}/2`,s)]:[Js.fromName(o,s),0]:r?[Js.fromName(a=>`-${o(a)}/2`,s),Js.fromName(a=>`${o(a)}/2`,s)]:[0,Js.fromName(o,s)]}function Ynn(e,t){const{size:n,config:r,mark:i,encoding:s}=t,{type:o}=Ms(s[e]),u=t.getScaleComponent(e).get("type"),{domain:l,domainMid:c}=t.specifiedScales[e];switch(e){case Ai:case po:{if(Hn(["point","band"],u)){const f=eje(e,n,r.view);if(zh(f))return{step:J5e(f,t,e)}}return Q5e(e,t,u)}case Xy:case tT:return Knn(e,t,u);case cg:{const f=t.component.scales[e].get("zero"),d=tje(i,f,r),h=Jnn(i,n,t,r);return $x(u)?Qnn(d,h,Xnn(u,r,l,e)):[d,h]}case Jc:return[0,Math.PI*2];case l_:return[0,360];case md:return[0,new Js(()=>{const f=t.getSignalName(Ol(t.parent)?"child_width":"width"),d=t.getSignalName(Ol(t.parent)?"child_height":"height");return`min(${f},${d})/2`})];case Zy:return[r.scale.minStrokeWidth,r.scale.maxStrokeWidth];case ev:return[[1,0],[4,2],[2,1],[1,1],[1,2,4,2]];case sl:return"symbol";case il:case up:case lp:return u==="ordinal"?o==="nominal"?"category":"ordinal":c!==void 0?"diverging":i==="rect"||i==="geoshape"?"heatmap":"ramp";case fg:case Qy:case Jy:return[r.scale.minOpacity,r.scale.maxOpacity]}}function J5e(e,t,n){const{encoding:r}=t,i=t.getScaleComponent(n),s=sre(n),o=r[s];if(FFe({step:e,offsetIsDiscrete:ln(o)&&U4e(o.type)})==="offset"&&bFe(r,s)){const u=t.getScaleComponent(s);let c=`domain('${t.scaleName(s)}').length`;if(u.get("type")==="band"){const d=u.get("paddingInner")??u.get("padding")??0,h=u.get("paddingOuter")??u.get("padding")??0;c=`bandspace(${c}, ${d}, ${h})`}const f=i.get("paddingInner")??i.get("padding");return{signal:`${e.step} * ${c} / (1-${EXt(f)})`}}else return e.step}function Z5e(e,t){if(FFe({step:e,offsetIsDiscrete:co(t)})==="offset")return{step:e.step}}function Knn(e,t,n){const r=e===Xy?"x":"y",i=t.getScaleComponent(r);if(!i)return Q5e(r,t,n,{center:!0});const s=i.get("type"),o=t.scaleName(r),{markDef:a,config:u}=t;if(s==="band"){const l=eje(r,t.size,t.config.view);if(zh(l)){const c=Z5e(l,n);if(c)return c}return[0,{signal:`bandwidth('${o}')`}]}else{const l=t.encoding[r];if(et(l)&&l.timeUnit){const c=L4e(l.timeUnit,p=>`scale('${o}', ${p})`),f=t.config.scale.bandWithNestedOffsetPaddingInner,d=by({fieldDef:l,markDef:a,config:u})-.5,h=d!==0?` + ${d}`:"";if(f){const p=Rt(f)?`${f.signal}/2`+h:`${f/2+d}`,m=Rt(f)?`(1 - ${f.signal}/2)`+h:`${1-f/2+d}`;return[{signal:`${p} * (${c})`},{signal:`${m} * (${c})`}]}return[0,{signal:c}]}return G6e(`Cannot use ${e} scale if ${r} scale is not discrete.`)}}function eje(e,t,n){const r=e===Ai?"width":"height",i=t[r];return i||YM(n,r)}function Xnn(e,t,n,r){switch(e){case"quantile":return t.scale.quantileCount;case"quantize":return t.scale.quantizeCount;case"threshold":return n!==void 0&&je(n)?n.length+1:(Ze(TQt(r)),3)}}function Qnn(e,t,n){const r=()=>{const i=Of(t),s=Of(e),o=`(${i} - ${s}) / (${n} - 1)`;return`sequence(${s}, ${i} + ${o}, ${o})`};return Rt(t)?new Js(r):{signal:r()}}function tje(e,t,n){if(t)return Rt(t)?{signal:`${t.signal} ? 0 : ${tje(e,!1,n)}`}:0;switch(e){case"bar":case"tick":return n.scale.minBandSize;case"line":case"trail":case"rule":return n.scale.minStrokeWidth;case"text":return n.scale.minFontSize;case"point":case"square":case"circle":return n.scale.minSize}throw new Error(JF("size",e))}const I0e=.95;function Jnn(e,t,n,r){const i={x:A0e(n,"x"),y:A0e(n,"y")};switch(e){case"bar":case"tick":{if(r.scale.maxBandSize!==void 0)return r.scale.maxBandSize;const s=k0e(t,i,r.view);return lr(s)?s-1:new Js(()=>`${s.signal} - 1`)}case"line":case"trail":case"rule":return r.scale.maxStrokeWidth;case"text":return r.scale.maxFontSize;case"point":case"square":case"circle":{if(r.scale.maxSize)return r.scale.maxSize;const s=k0e(t,i,r.view);return lr(s)?Math.pow(I0e*s,2):new Js(()=>`pow(${I0e} * ${s.signal}, 2)`)}}throw new Error(JF("size",e))}function k0e(e,t,n){const r=zh(e.width)?e.width.step:GM(n,"width"),i=zh(e.height)?e.height.step:GM(n,"height");return t.x||t.y?new Js(()=>`min(${[t.x?t.x.signal:r,t.y?t.y.signal:i].join(", ")})`):Math.min(r,i)}function nje(e,t){Wi(e)?Znn(e,t):ije(e,t)}function Znn(e,t){const n=e.component.scales,{config:r,encoding:i,markDef:s,specifiedScales:o}=e;for(const a of Ye(n)){const u=o[a],l=n[a],c=e.getScaleComponent(a),f=Ms(i[a]),d=u[t],h=c.get("type"),p=c.get("padding"),m=c.get("paddingInner"),g=hq(h,t),y=G4e(a,t);if(d!==void 0&&(g?y&&Ze(y):Ze(C4e(h,t,a))),g&&y===void 0)if(d!==void 0){const v=f.timeUnit,b=f.type;switch(t){case"domainMax":case"domainMin":d_(u[t])||b==="temporal"||v?l.set(t,{signal:l5(u[t],{type:b,timeUnit:v})},!0):l.set(t,u[t],!0);break;default:l.copyKeyFromObject(t,u)}}else{const v=t in R0e?R0e[t]({model:e,channel:a,fieldOrDatumDef:f,scaleType:h,scalePadding:p,scalePaddingInner:m,domain:u.domain,domainMin:u.domainMin,domainMax:u.domainMax,markDef:s,config:r,hasNestedOffsetScale:_Fe(i,a),hasSecondaryRangeChannel:!!i[cp(a)]}):r.scale[t];v!==void 0&&l.set(t,v,!1)}}}const R0e={bins:({model:e,fieldOrDatumDef:t})=>et(t)?ern(e,t):void 0,interpolate:({channel:e,fieldOrDatumDef:t})=>trn(e,t.type),nice:({scaleType:e,channel:t,domain:n,domainMin:r,domainMax:i,fieldOrDatumDef:s})=>nrn(e,t,n,r,i,s),padding:({channel:e,scaleType:t,fieldOrDatumDef:n,markDef:r,config:i})=>rrn(e,t,i.scale,n,r,i.bar),paddingInner:({scalePadding:e,channel:t,markDef:n,scaleType:r,config:i,hasNestedOffsetScale:s})=>irn(e,t,n.type,r,i.scale,s),paddingOuter:({scalePadding:e,channel:t,scaleType:n,scalePaddingInner:r,config:i,hasNestedOffsetScale:s})=>srn(e,t,n,r,i.scale,s),reverse:({fieldOrDatumDef:e,scaleType:t,channel:n,config:r})=>{const i=et(e)?e.sort:void 0;return orn(t,i,n,r.scale)},zero:({channel:e,fieldOrDatumDef:t,domain:n,markDef:r,scaleType:i,config:s,hasSecondaryRangeChannel:o})=>arn(e,t,n,r,i,s.scale,o)};function rje(e){Wi(e)?qnn(e):ije(e,"range")}function ije(e,t){const n=e.component.scales;for(const r of e.children)t==="range"?rje(r):nje(r,t);for(const r of Ye(n)){let i;for(const s of e.children){const o=s.component.scales[r];if(o){const a=o.getWithExplicit(t);i=_y(i,a,t,"scale",QFe((u,l)=>{switch(t){case"range":return u.step&&l.step?u.step-l.step:0}return 0}))}}n[r].setWithExplicit(t,i)}}function ern(e,t){const n=t.bin;if(si(n)){const r=oie(e,t.field,n);return new Js(()=>e.getSignalName(r))}else if(Co(n)&&f_(n)&&n.step!==void 0)return{step:n.step}}function trn(e,t){if(Hn([il,up,lp],e)&&t!=="nominal")return"hcl"}function nrn(e,t,n,r,i,s){var o;if(!((o=Uh(s))!=null&&o.bin||je(n)||i!=null||r!=null||Hn([Yu.TIME,Yu.UTC],e)))return ds(t)?!0:void 0}function rrn(e,t,n,r,i,s){if(ds(e)){if($f(t)){if(n.continuousPadding!==void 0)return n.continuousPadding;const{type:o,orient:a}=i;if(o==="bar"&&!(et(r)&&(r.bin||r.timeUnit))&&(a==="vertical"&&e==="x"||a==="horizontal"&&e==="y"))return s.continuousBandSize}if(t===Yu.POINT)return n.pointPadding}}function irn(e,t,n,r,i,s=!1){if(e===void 0){if(ds(t)){const{bandPaddingInner:o,barBandPaddingInner:a,rectBandPaddingInner:u,bandWithNestedOffsetPaddingInner:l}=i;return s?l:fs(o,n==="bar"?a:u)}else if(FR(t)&&r===Yu.BAND)return i.offsetBandPaddingInner}}function srn(e,t,n,r,i,s=!1){if(e===void 0){if(ds(t)){const{bandPaddingOuter:o,bandWithNestedOffsetPaddingOuter:a}=i;if(s)return a;if(n===Yu.BAND)return fs(o,Rt(r)?{signal:`${r.signal}/2`}:r/2)}else if(FR(t)){if(n===Yu.POINT)return .5;if(n===Yu.BAND)return i.offsetBandPaddingOuter}}}function orn(e,t,n,r){if(n==="x"&&r.xReverse!==void 0)return Yl(e)&&t==="descending"?Rt(r.xReverse)?{signal:`!${r.xReverse.signal}`}:!r.xReverse:r.xReverse;if(Yl(e)&&t==="descending")return!0}function arn(e,t,n,r,i,s,o){if(!!n&&n!=="unaggregated"&&Yl(i)){if(je(n)){const u=n[0],l=n[n.length-1];if(lr(u)&&u<=0&&lr(l)&&l>=0)return!0}return!1}if(e==="size"&&t.type==="quantitative"&&!$x(i))return!0;if(!(et(t)&&t.bin)&&Hn([...fp,...iXt],e)){const{orient:u,type:l}=r;return Hn(["bar","area","line","trail"],l)&&(u==="horizontal"&&e==="y"||u==="vertical"&&e==="x")?!1:Hn(["bar","area"],l)&&!o?!0:s==null?void 0:s.zero}return!1}function urn(e,t,n,r,i=!1){const s=lrn(t,n,r,i),{type:o}=e;return dg(t)?o!==void 0?uJt(t,o)?et(n)&&!aJt(o,n.type)?(Ze(lQt(o,s)),s):o:(Ze(uQt(t,o,s)),s):s:null}function lrn(e,t,n,r){var i;switch(t.type){case"nominal":case"ordinal":{if(_E(e)||xB(e)==="discrete")return e==="shape"&&t.type==="ordinal"&&Ze(SB(e,"ordinal")),"ordinal";if(ds(e)||FR(e)){if(Hn(["rect","bar","image","rule"],n.type)||r)return"band"}else if(n.type==="arc"&&e in ure)return"band";const s=n[ol(e)];return xb(s)||Lx(t)&&((i=t.axis)!=null&&i.tickBand)?"band":"point"}case"temporal":return _E(e)?"time":xB(e)==="discrete"?(Ze(SB(e,"temporal")),"ordinal"):et(t)&&t.timeUnit&&lo(t.timeUnit).utc?"utc":"time";case"quantitative":return _E(e)?et(t)&&si(t.bin)?"bin-ordinal":"linear":xB(e)==="discrete"?(Ze(SB(e,"quantitative")),"ordinal"):"linear";case"geojson":return}throw new Error(S4e(t.type))}function crn(e,{ignoreRange:t}={}){sje(e),Y5e(e);for(const n of oJt)nje(e,n);t||rje(e)}function sje(e){Wi(e)?e.component.scales=frn(e):e.component.scales=hrn(e)}function frn(e){const{encoding:t,mark:n,markDef:r}=e,i={};for(const s of XF){const o=Ms(t[s]);if(o&&n===tFe&&s===sl&&o.type===nT)continue;let a=o&&o.scale;if(o&&a!==null&&a!==!1){a??(a={});const u=_Fe(t,s),l=urn(a,s,o,r,u);i[s]=new X5e(e.scaleName(`${s}`,!0),{value:l,explicit:a.type===l})}}return i}const drn=QFe((e,t)=>Mge(e)-Mge(t));function hrn(e){var t;const n=e.component.scales={},r={},i=e.component.resolve;for(const s of e.children){sje(s);for(const o of Ye(s.component.scales))if((t=i.scale)[o]??(t[o]=$5e(o,e)),i.scale[o]==="shared"){const a=r[o],u=s.component.scales[o].getWithExplicit("type");a?XQt(a.value,u.value)?r[o]=_y(a,u,"type","scale",drn):(i.scale[o]="independent",delete r[o]):r[o]=u}}for(const s of Ye(r)){const o=e.scaleName(s,!0),a=r[s];n[s]=new X5e(o,a);for(const u of e.children){const l=u.component.scales[s];l&&(u.renameScale(l.get("name"),o),l.merged=!0)}}return n}class PB{constructor(){this.nameMap={}}rename(t,n){this.nameMap[t]=n}has(t){return this.nameMap[t]!==void 0}get(t){for(;this.nameMap[t]&&t!==this.nameMap[t];)t=this.nameMap[t];return t}}function Wi(e){return(e==null?void 0:e.type)==="unit"}function Ol(e){return(e==null?void 0:e.type)==="facet"}function fie(e){return(e==null?void 0:e.type)==="concat"}function aT(e){return(e==null?void 0:e.type)==="layer"}class die{constructor(t,n,r,i,s,o,a){this.type=n,this.parent=r,this.config=s,this.correctDataNames=u=>{var l,c,f;return(l=u.from)!=null&&l.data&&(u.from.data=this.lookupDataSource(u.from.data)),(f=(c=u.from)==null?void 0:c.facet)!=null&&f.data&&(u.from.facet.data=this.lookupDataSource(u.from.facet.data)),u},this.parent=r,this.config=s,this.view=ku(a),this.name=t.name??i,this.title=Fg(t.title)?{text:t.title}:t.title?ku(t.title):void 0,this.scaleNameMap=r?r.scaleNameMap:new PB,this.projectionNameMap=r?r.projectionNameMap:new PB,this.signalNameMap=r?r.signalNameMap:new PB,this.data=t.data,this.description=t.description,this.transforms=_en(t.transform??[]),this.layout=n==="layer"||n==="unit"?{}:SZt(t,n,s),this.component={data:{sources:r?r.component.data.sources:[],outputNodes:r?r.component.data.outputNodes:{},outputNodeRefCounts:r?r.component.data.outputNodeRefCounts:{},isFaceted:s5(t)||(r==null?void 0:r.component.data.isFaceted)&&t.data===void 0},layoutSize:new pg,layoutHeaders:{row:{},column:{},facet:{}},mark:null,resolve:{scale:{},axis:{},legend:{},...o?nn(o):{}},selection:null,scales:null,projection:null,axes:{},legends:{}}}get width(){return this.getSizeSignalRef("width")}get height(){return this.getSizeSignalRef("height")}parse(){this.parseScale(),this.parseLayoutSize(),this.renameTopLevelLayoutSizeSignal(),this.parseSelections(),this.parseProjection(),this.parseData(),this.parseAxesAndHeaders(),this.parseLegends(),this.parseMarkGroup()}parseScale(){crn(this)}parseProjection(){q5e(this)}renameTopLevelLayoutSizeSignal(){this.getName("width")!=="width"&&this.renameSignal(this.getName("width"),"width"),this.getName("height")!=="height"&&this.renameSignal(this.getName("height"),"height")}parseLegends(){B5e(this)}assembleEncodeFromView(t){const{style:n,...r}=t,i={};for(const s of Ye(r)){const o=r[s];o!==void 0&&(i[s]=di(o))}return i}assembleGroupEncodeEntry(t){let n={};return this.view&&(n=this.assembleEncodeFromView(this.view)),!t&&(this.description&&(n.description=di(this.description)),this.type==="unit"||this.type==="layer")?{width:this.getSizeSignalRef("width"),height:this.getSizeSignalRef("height"),...n}:jr(n)?void 0:n}assembleLayout(){if(!this.layout)return;const{spacing:t,...n}=this.layout,{component:r,config:i}=this,s=Otn(r.layoutHeaders,i);return{padding:t,...this.assembleDefaultLayout(),...n,...s?{titleBand:s}:{}}}assembleDefaultLayout(){return{}}assembleHeaderMarks(){const{layoutHeaders:t}=this.component;let n=[];for(const r of Cc)t[r].title&&n.push(Itn(this,r));for(const r of nie)n=n.concat(ktn(this,r));return n}assembleAxes(){return mtn(this.component.axes,this.config)}assembleLegends(){return z5e(this)}assembleProjections(){return rnn(this)}assembleTitle(){const{encoding:t,...n}=this.title??{},r={...m4e(this.config.title).nonMarkTitleProperties,...n,...t?{encode:{update:t}}:{}};if(r.text)return Hn(["unit","layer"],this.type)?Hn(["middle",void 0],r.anchor)&&(r.frame??(r.frame="group")):r.anchor??(r.anchor="start"),jr(r)?void 0:r}assembleGroup(t=[]){const n={};t=t.concat(this.assembleSignals()),t.length>0&&(n.signals=t);const r=this.assembleLayout();r&&(n.layout=r),n.marks=[].concat(this.assembleHeaderMarks(),this.assembleMarks());const i=!this.parent||Ol(this.parent)?K5e(this):[];i.length>0&&(n.scales=i);const s=this.assembleAxes();s.length>0&&(n.axes=s);const o=this.assembleLegends();return o.length>0&&(n.legends=o),n}getName(t){return Ci((this.name?`${this.name}_`:"")+t)}getDataName(t){return this.getName(Ei[t].toLowerCase())}requestDataName(t){const n=this.getDataName(t),r=this.component.data.outputNodeRefCounts;return r[n]=(r[n]||0)+1,n}getSizeSignalRef(t){if(Ol(this.parent)){const n=P5e(t),r=KF(n),i=this.component.scales[r];if(i&&!i.merged){const s=i.get("type"),o=i.get("range");if(co(s)&&nv(o)){const a=i.get("name"),u=w5(this,r),l=cie(u);if(l){const c=at({aggregate:"distinct",field:l},{expr:"datum"});return{signal:D5e(a,i,c)}}else return Ze(fre(r)),null}}}return{signal:this.signalNameMap.get(this.getName(t))}}lookupDataSource(t){const n=this.component.data.outputNodes[t];return n?n.getSource():t}getSignalName(t){return this.signalNameMap.get(t)}renameSignal(t,n){this.signalNameMap.rename(t,n)}renameScale(t,n){this.scaleNameMap.rename(t,n)}renameProjection(t,n){this.projectionNameMap.rename(t,n)}scaleName(t,n){if(n)return this.getName(t);if(o4e(t)&&dg(t)&&this.component.scales[t]||this.scaleNameMap.has(this.getName(t)))return this.scaleNameMap.get(this.getName(t))}projectionName(t){if(t)return this.getName("projection");if(this.component.projection&&!this.component.projection.merged||this.projectionNameMap.has(this.getName("projection")))return this.projectionNameMap.get(this.getName("projection"))}getScaleComponent(t){if(!this.component.scales)throw new Error("getScaleComponent cannot be called before parseScale(). Make sure you have called parseScale or use parseUnitModelWithScale().");const n=this.component.scales[t];return n&&!n.merged?n:this.parent?this.parent.getScaleComponent(t):void 0}getSelectionComponent(t,n){let r=this.component.selection[t];if(!r&&this.parent&&(r=this.parent.getSelectionComponent(t,n)),!r)throw new Error(AXt(n));return r}hasAxisOrientSignalRef(){var t,n;return((t=this.component.axes.x)==null?void 0:t.some(r=>r.hasOrientSignalRef()))||((n=this.component.axes.y)==null?void 0:n.some(r=>r.hasOrientSignalRef()))}}class oje extends die{vgField(t,n={}){const r=this.fieldDef(t);if(r)return at(r,n)}reduceFieldDef(t,n){return ZJt(this.getMapping(),(r,i,s)=>{const o=Uh(i);return o?t(r,o,s):r},n)}forEachFieldDef(t,n){Fre(this.getMapping(),(r,i)=>{const s=Uh(r);s&&t(s,i)},n)}}class E5 extends Mr{clone(){return new E5(null,nn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=nn(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"value",r[1]??"density"];const i=this.transform.resolve??"shared";this.transform.resolve=i}dependentFields(){return new Set([this.transform.density,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`DensityTransform ${Vn(this.transform)}`}assemble(){const{density:t,...n}=this.transform,r={type:"kde",field:t,...n};return r.resolve=this.transform.resolve,r}}class x5 extends Mr{clone(){return new x5(null,nn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=nn(n)}dependentFields(){return new Set([this.transform.extent])}producedFields(){return new Set([])}hash(){return`ExtentTransform ${Vn(this.transform)}`}assemble(){const{extent:t,param:n}=this.transform;return{type:"extent",field:t,signal:n}}}class KI extends Mr{clone(){return new KI(null,{...this.filter})}constructor(t,n){super(t),this.filter=n}static make(t,n){const{config:r,mark:i,markDef:s}=n;if(wr("invalid",s,r)!=="filter")return null;const a=n.reduceFieldDef((u,l,c)=>{const f=dg(c)&&n.getScaleComponent(c);if(f){const d=f.get("type");Yl(d)&&l.aggregate!=="count"&&!p_(i)&&(u[l.field]=l)}return u},{});return Ye(a).length?new KI(t,a):null}dependentFields(){return new Set(Ye(this.filter))}producedFields(){return new Set}hash(){return`FilterInvalid ${Vn(this.filter)}`}assemble(){const t=Ye(this.filter).reduce((n,r)=>{const i=this.filter[r],s=at(i,{expr:"datum"});return i!==null&&(i.type==="temporal"?n.push(`(isDate(${s}) || (isValid(${s}) && isFinite(+${s})))`):i.type==="quantitative"&&(n.push(`isValid(${s})`),n.push(`isFinite(+${s})`))),n},[]);return t.length>0?{type:"filter",expr:t.join(" && ")}:null}}class S5 extends Mr{clone(){return new S5(this.parent,nn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=nn(n);const{flatten:r,as:i=[]}=this.transform;this.transform.as=r.map((s,o)=>i[o]??s)}dependentFields(){return new Set(this.transform.flatten)}producedFields(){return new Set(this.transform.as)}hash(){return`FlattenTransform ${Vn(this.transform)}`}assemble(){const{flatten:t,as:n}=this.transform;return{type:"flatten",fields:t,as:n}}}class T5 extends Mr{clone(){return new T5(null,nn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=nn(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"key",r[1]??"value"]}dependentFields(){return new Set(this.transform.fold)}producedFields(){return new Set(this.transform.as)}hash(){return`FoldTransform ${Vn(this.transform)}`}assemble(){const{fold:t,as:n}=this.transform;return{type:"fold",fields:t,as:n}}}class xE extends Mr{clone(){return new xE(null,nn(this.fields),this.geojson,this.signal)}static parseAll(t,n){if(n.component.projection&&!n.component.projection.isFit)return t;let r=0;for(const i of[[yd,gd],[zc,vd]]){const s=i.map(o=>{const a=Ms(n.encoding[o]);return et(a)?a.field:dp(a)?{expr:`${a.datum}`}:rd(a)?{expr:`${a.value}`}:void 0});(s[0]||s[1])&&(t=new xE(t,s,null,n.getName(`geojson_${r++}`)))}if(n.channelHasField(sl)){const i=n.typedFieldDef(sl);i.type===nT&&(t=new xE(t,null,i.field,n.getName(`geojson_${r++}`)))}return t}constructor(t,n,r,i){super(t),this.fields=n,this.geojson=r,this.signal=i}dependentFields(){const t=(this.fields??[]).filter(mt);return new Set([...this.geojson?[this.geojson]:[],...t])}producedFields(){return new Set}hash(){return`GeoJSON ${this.geojson} ${this.signal} ${Vn(this.fields)}`}assemble(){return[...this.geojson?[{type:"filter",expr:`isValid(datum["${this.geojson}"])`}]:[],{type:"geojson",...this.fields?{fields:this.fields}:{},...this.geojson?{geojson:this.geojson}:{},signal:this.signal}]}}class XI extends Mr{clone(){return new XI(null,this.projection,nn(this.fields),nn(this.as))}constructor(t,n,r,i){super(t),this.projection=n,this.fields=r,this.as=i}static parseAll(t,n){if(!n.projectionName())return t;for(const r of[[yd,gd],[zc,vd]]){const i=r.map(o=>{const a=Ms(n.encoding[o]);return et(a)?a.field:dp(a)?{expr:`${a.datum}`}:rd(a)?{expr:`${a.value}`}:void 0}),s=r[0]===zc?"2":"";(i[0]||i[1])&&(t=new XI(t,n.projectionName(),i,[n.getName(`x${s}`),n.getName(`y${s}`)]))}return t}dependentFields(){return new Set(this.fields.filter(mt))}producedFields(){return new Set(this.as)}hash(){return`Geopoint ${this.projection} ${Vn(this.fields)} ${Vn(this.as)}`}assemble(){return{type:"geopoint",projection:this.projection,fields:this.fields,as:this.as}}}class $1 extends Mr{clone(){return new $1(null,nn(this.transform))}constructor(t,n){super(t),this.transform=n}dependentFields(){return new Set([this.transform.impute,this.transform.key,...this.transform.groupby??[]])}producedFields(){return new Set([this.transform.impute])}processSequence(t){const{start:n=0,stop:r,step:i}=t;return{signal:`sequence(${[n,r,...i?[i]:[]].join(",")})`}}static makeFromTransform(t,n){return new $1(t,n)}static makeFromEncoding(t,n){const r=n.encoding,i=r.x,s=r.y;if(et(i)&&et(s)){const o=i.impute?i:s.impute?s:void 0;if(o===void 0)return;const a=i.impute?s:s.impute?i:void 0,{method:u,value:l,frame:c,keyvals:f}=o.impute,d=EFe(n.mark,r);return new $1(t,{impute:o.field,key:a.field,...u?{method:u}:{},...l!==void 0?{value:l}:{},...c?{frame:c}:{},...f!==void 0?{keyvals:f}:{},...d.length?{groupby:d}:{}})}return null}hash(){return`Impute ${Vn(this.transform)}`}assemble(){const{impute:t,key:n,keyvals:r,method:i,groupby:s,value:o,frame:a=[null,null]}=this.transform,u={type:"impute",field:t,key:n,...r?{keyvals:ten(r)?this.processSequence(r):r}:{},method:"value",...s?{groupby:s}:{},value:!i||i==="value"?o:null};if(i&&i!=="value"){const l={type:"window",as:[`imputed_${t}_value`],ops:[i],fields:[t],frame:a,ignorePeers:!1,...s?{groupby:s}:{}},c={type:"formula",expr:`datum.${t} === null ? datum.imputed_${t}_value : datum.${t}`,as:t};return[u,l,c]}else return[u]}}class C5 extends Mr{clone(){return new C5(null,nn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=nn(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??n.on,r[1]??n.loess]}dependentFields(){return new Set([this.transform.loess,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`LoessTransform ${Vn(this.transform)}`}assemble(){const{loess:t,on:n,...r}=this.transform;return{type:"loess",x:n,y:t,...r}}}class QI extends Mr{clone(){return new QI(null,nn(this.transform),this.secondary)}constructor(t,n,r){super(t),this.transform=n,this.secondary=r}static make(t,n,r,i){const s=n.component.data.sources,{from:o}=r;let a=null;if(nen(o)){let u=lje(o.data,s);u||(u=new Cb(o.data),s.push(u));const l=n.getName(`lookup_${i}`);a=new Ku(u,l,Ei.Lookup,n.component.data.outputNodeRefCounts),n.component.data.outputNodes[l]=a}else if(ren(o)){const u=o.param;r={as:u,...r};let l;try{l=n.getSelectionComponent(Ci(u),u)}catch{throw new Error(NXt(u))}if(a=l.materialized,!a)throw new Error(DXt(u))}return new QI(t,r,a.getSource())}dependentFields(){return new Set([this.transform.lookup])}producedFields(){return new Set(this.transform.as?pt(this.transform.as):this.transform.from.fields)}hash(){return`Lookup ${Vn({transform:this.transform,secondary:this.secondary})}`}assemble(){let t;if(this.transform.from.fields)t={values:this.transform.from.fields,...this.transform.as?{as:pt(this.transform.as)}:{}};else{let n=this.transform.as;mt(n)||(Ze(BXt),n="_lookup"),t={as:[n]}}return{type:"lookup",from:this.secondary,key:this.transform.from.key,fields:[this.transform.lookup],...t,...this.transform.default?{default:this.transform.default}:{}}}}class A5 extends Mr{clone(){return new A5(null,nn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=nn(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"prob",r[1]??"value"]}dependentFields(){return new Set([this.transform.quantile,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`QuantileTransform ${Vn(this.transform)}`}assemble(){const{quantile:t,...n}=this.transform;return{type:"quantile",field:t,...n}}}class I5 extends Mr{clone(){return new I5(null,nn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=nn(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??n.on,r[1]??n.regression]}dependentFields(){return new Set([this.transform.regression,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`RegressionTransform ${Vn(this.transform)}`}assemble(){const{regression:t,on:n,...r}=this.transform;return{type:"regression",x:n,y:t,...r}}}class k5 extends Mr{clone(){return new k5(null,nn(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=sh((this.transform.groupby??[]).concat(t),n=>n)}producedFields(){}dependentFields(){return new Set([this.transform.pivot,this.transform.value,...this.transform.groupby??[]])}hash(){return`PivotTransform ${Vn(this.transform)}`}assemble(){const{pivot:t,value:n,groupby:r,limit:i,op:s}=this.transform;return{type:"pivot",field:t,value:n,...i!==void 0?{limit:i}:{},...s!==void 0?{op:s}:{},...r!==void 0?{groupby:r}:{}}}}class R5 extends Mr{clone(){return new R5(null,nn(this.transform))}constructor(t,n){super(t),this.transform=n}dependentFields(){return new Set}producedFields(){return new Set}hash(){return`SampleTransform ${Vn(this.transform)}`}assemble(){return{type:"sample",size:this.transform.sample}}}function aje(e){let t=0;function n(r,i){if(r instanceof Cb&&!r.isGenerator&&!jx(r.data)&&(e.push(i),i={name:null,source:i.name,transform:[]}),r instanceof ma&&(r.parent instanceof Cb&&!i.source?(i.format={...i.format,parse:r.assembleFormatParse()},i.transform.push(...r.assembleTransforms(!0))):i.transform.push(...r.assembleTransforms())),r instanceof sT){i.name||(i.name=`data_${t++}`),!i.source||i.transform.length>0?(e.push(i),r.data=i.name):r.data=i.source,e.push(...r.assemble());return}switch((r instanceof GR||r instanceof YR||r instanceof KI||r instanceof iT||r instanceof Ux||r instanceof XI||r instanceof qf||r instanceof QI||r instanceof oT||r instanceof y_||r instanceof T5||r instanceof S5||r instanceof E5||r instanceof C5||r instanceof A5||r instanceof I5||r instanceof xy||r instanceof R5||r instanceof k5||r instanceof x5)&&i.transform.push(r.assemble()),(r instanceof xh||r instanceof Eh||r instanceof $1||r instanceof hm||r instanceof xE)&&i.transform.push(...r.assemble()),r instanceof Ku&&(i.source&&i.transform.length===0?r.setSource(i.source):r.parent instanceof Ku?r.setSource(i.name):(i.name||(i.name=`data_${t++}`),r.setSource(i.name),r.numChildren()===1&&(e.push(i),i={name:null,source:i.name,transform:[]}))),r.numChildren()){case 0:r instanceof Ku&&(!i.source||i.transform.length>0)&&e.push(i);break;case 1:n(r.children[0],i);break;default:{i.name||(i.name=`data_${t++}`);let s=i.name;!i.source||i.transform.length>0?e.push(i):s=i.source;for(const o of r.children)n(o,{name:null,source:s,transform:[]});break}}}return n}function prn(e){const t=[],n=aje(t);for(const r of e.children)n(r,{source:e.name,name:null,transform:[]});return t}function mrn(e,t){const n=[],r=aje(n);let i=0;for(const o of e.sources){o.hasName()||(o.dataName=`source_${i++}`);const a=o.assemble();r(o,a)}for(const o of n)o.transform.length===0&&delete o.transform;let s=0;for(const[o,a]of n.entries())(a.transform??[]).length===0&&!a.source&&n.splice(s++,0,n.splice(o,1)[0]);for(const o of n)for(const a of o.transform??[])a.type==="lookup"&&(a.from=e.outputNodes[a.from].getSource());for(const o of n)o.name in t&&(o.values=t[o.name]);return n}function grn(e){return e==="top"||e==="left"||Rt(e)?"header":"footer"}function yrn(e){for(const t of Cc)vrn(e,t);N0e(e,"x"),N0e(e,"y")}function vrn(e,t){var o;const{facet:n,config:r,child:i,component:s}=e;if(e.channelHasField(t)){const a=n[t],u=Vx("title",null,r,t);let l=wE(a,r,{allowDisabling:!0,includeDefault:u===void 0||!!u});i.component.layoutHeaders[t].title&&(l=je(l)?l.join(", "):l,l+=` / ${i.component.layoutHeaders[t].title}`,i.component.layoutHeaders[t].title=null);const c=Vx("labelOrient",a.header,r,t),f=a.header!==null?fs((o=a.header)==null?void 0:o.labels,r.header.labels,!0):!1,d=Hn(["bottom","right"],c)?"footer":"header";s.layoutHeaders[t]={title:a.header!==null?l:null,facetFieldDef:a,[d]:t==="facet"?[]:[uje(e,t,f)]}}}function uje(e,t,n){const r=t==="row"?"height":"width";return{labels:n,sizeSignal:e.child.component.layoutSize.get(r)?e.child.getSizeSignalRef(r):void 0,axes:[]}}function N0e(e,t){const{child:n}=e;if(n.component.axes[t]){const{layoutHeaders:r,resolve:i}=e.component;if(i.axis[t]=sie(i,t),i.axis[t]==="shared"){const s=t==="x"?"column":"row",o=r[s];for(const a of n.component.axes[t]){const u=grn(a.get("orient"));o[u]??(o[u]=[uje(e,s,!1)]);const l=nC(a,"main",e.config,{header:!0});l&&o[u][0].axes.push(l),a.mainExtracted=!0}}}}function brn(e){hie(e),JM(e,"width"),JM(e,"height")}function _rn(e){hie(e);const t=e.layout.columns===1?"width":"childWidth",n=e.layout.columns===void 0?"height":"childHeight";JM(e,t),JM(e,n)}function hie(e){for(const t of e.children)t.parseLayoutSize()}function JM(e,t){const n=P5e(t),r=KF(n),i=e.component.resolve,s=e.component.layoutSize;let o;for(const a of e.children){const u=a.component.layoutSize.getWithExplicit(n),l=i.scale[r]??$5e(r,e);if(l==="independent"&&u.value==="step"){o=void 0;break}if(o){if(l==="independent"&&o.value!==u.value){o=void 0;break}o=_y(o,u,n,"")}else o=u}if(o){for(const a of e.children)e.renameSignal(a.getName(n),e.getName(t)),a.component.layoutSize.set(n,"merged",!1);s.setWithExplicit(t,o)}else s.setWithExplicit(t,{explicit:!1,value:void 0})}function wrn(e){const{size:t,component:n}=e;for(const r of fp){const i=ol(r);if(t[i]){const s=t[i];n.layoutSize.set(i,zh(s)?"step":s,!0)}else{const s=Ern(e,i);n.layoutSize.set(i,s,!1)}}}function Ern(e,t){const n=t==="width"?"x":"y",r=e.config,i=e.getScaleComponent(n);if(i){const s=i.get("type"),o=i.get("range");if(co(s)){const a=YM(r.view,t);return nv(o)||zh(a)?"step":a}else return gq(r.view,t)}else{if(e.hasProjection||e.mark==="arc")return gq(r.view,t);{const s=YM(r.view,t);return zh(s)?s.step:s}}}function Rq(e,t,n){return at(t,{suffix:`by_${at(e)}`,...n})}class iA extends oje{constructor(t,n,r,i){super(t,"facet",n,r,i,t.resolve),this.child=vie(t.spec,this,this.getName("child"),void 0,i),this.children=[this.child],this.facet=this.initFacet(t.facet)}initFacet(t){if(!zR(t))return{facet:this.initFacetFieldDef(t,"facet")};const n=Ye(t),r={};for(const i of n){if(![cm,fm].includes(i)){Ze(JF(i,"facet"));break}const s=t[i];if(s.field===void 0){Ze(fq(s,i));break}r[i]=this.initFacetFieldDef(s,i)}return r}initFacetFieldDef(t,n){const r=Mre(t,n);return r.header?r.header=ku(r.header):r.header===null&&(r.header=null),r}channelHasField(t){return!!this.facet[t]}fieldDef(t){return this.facet[t]}parseData(){this.component.data=N5(this),this.child.parseData()}parseLayoutSize(){hie(this)}parseSelections(){this.child.parseSelections(),this.component.selection=this.child.component.selection}parseMarkGroup(){this.child.parseMarkGroup()}parseAxesAndHeaders(){this.child.parseAxesAndHeaders(),yrn(this)}assembleSelectionTopLevelSignals(t){return this.child.assembleSelectionTopLevelSignals(t)}assembleSignals(){return this.child.assembleSignals(),[]}assembleSelectionData(t){return this.child.assembleSelectionData(t)}getHeaderLayoutMixins(){const t={};for(const n of Cc)for(const r of rie){const i=this.component.layoutHeaders[n],s=i[r],{facetFieldDef:o}=i;if(o){const a=Vx("titleOrient",o.header,this.config,n);if(["right","bottom"].includes(a)){const u=b5(n,a);t.titleAnchor??(t.titleAnchor={}),t.titleAnchor[u]="end"}}if(s!=null&&s[0]){const a=n==="row"?"height":"width",u=r==="header"?"headerBand":"footerBand";n!=="facet"&&!this.child.component.layoutSize.get(a)&&(t[u]??(t[u]={}),t[u][n]=.5),i.title&&(t.offset??(t.offset={}),t.offset[n==="row"?"rowTitle":"columnTitle"]=10)}}return t}assembleDefaultLayout(){const{column:t,row:n}=this.facet,r=t?this.columnDistinctSignal():n?1:void 0;let i="all";return(!n&&this.component.resolve.scale.x==="independent"||!t&&this.component.resolve.scale.y==="independent")&&(i="none"),{...this.getHeaderLayoutMixins(),...r?{columns:r}:{},bounds:"full",align:i}}assembleLayoutSignals(){return this.child.assembleLayoutSignals()}columnDistinctSignal(){if(!(this.parent&&this.parent instanceof iA))return{signal:`length(data('${this.getName("column_domain")}'))`}}assembleGroupStyle(){}assembleGroup(t){return this.parent&&this.parent instanceof iA?{...this.channelHasField("column")?{encode:{update:{columns:{field:at(this.facet.column,{prefix:"distinct"})}}}}:{},...super.assembleGroup(t)}:super.assembleGroup(t)}getCardinalityAggregateForChild(){const t=[],n=[],r=[];if(this.child instanceof iA){if(this.child.channelHasField("column")){const i=at(this.child.facet.column);t.push(i),n.push("distinct"),r.push(`distinct_${i}`)}}else for(const i of fp){const s=this.child.component.scales[i];if(s&&!s.merged){const o=s.get("type"),a=s.get("range");if(co(o)&&nv(a)){const u=w5(this.child,i),l=cie(u);l?(t.push(l),n.push("distinct"),r.push(`distinct_${l}`)):Ze(fre(i))}}}return{fields:t,ops:n,as:r}}assembleFacet(){const{name:t,data:n}=this.component.data.facetRoot,{row:r,column:i}=this.facet,{fields:s,ops:o,as:a}=this.getCardinalityAggregateForChild(),u=[];for(const c of Cc){const f=this.facet[c];if(f){u.push(at(f));const{bin:d,sort:h}=f;if(si(d)&&u.push(at(f,{binSuffix:"end"})),wh(h)){const{field:p,op:m=i5}=h,g=Rq(f,h);r&&i?(s.push(g),o.push("max"),a.push(g)):(s.push(p),o.push(m),a.push(g))}else if(je(h)){const p=zx(f,c);s.push(p),o.push("max"),a.push(p)}}}const l=!!r&&!!i;return{name:t,data:n,groupby:u,...l||s.length>0?{aggregate:{...l?{cross:l}:{},...s.length?{fields:s,ops:o,as:a}:{}}}:{}}}facetSortFields(t){const{facet:n}=this,r=n[t];return r?wh(r.sort)?[Rq(r,r.sort,{expr:"datum"})]:je(r.sort)?[zx(r,t,{expr:"datum"})]:[at(r,{expr:"datum"})]:[]}facetSortOrder(t){const{facet:n}=this,r=n[t];if(r){const{sort:i}=r;return[(wh(i)?i.order:!je(i)&&i)||"ascending"]}return[]}assembleLabelTitle(){var i;const{facet:t,config:n}=this;if(t.facet)return Sq(t.facet,"facet",n);const r={row:["top","bottom"],column:["left","right"]};for(const s of nie)if(t[s]){const o=Vx("labelOrient",(i=t[s])==null?void 0:i.header,n,s);if(r[s].includes(o))return Sq(t[s],s,n)}}assembleMarks(){const{child:t}=this,n=this.component.data.facetRoot,r=prn(n),i=t.assembleGroupEncodeEntry(!1),s=this.assembleLabelTitle()||t.assembleTitle(),o=t.assembleGroupStyle();return[{name:this.getName("cell"),type:"group",...s?{title:s}:{},...o?{style:o}:{},from:{facet:this.assembleFacet()},sort:{field:Cc.map(u=>this.facetSortFields(u)).flat(),order:Cc.map(u=>this.facetSortOrder(u)).flat()},...r.length>0?{data:r}:{},...i?{encode:{update:i}}:{},...t.assembleGroup(Pen(this,[]))}]}getMapping(){return this.facet}}function xrn(e,t){const{row:n,column:r}=t;if(n&&r){let i=null;for(const s of[n,r])if(wh(s.sort)){const{field:o,op:a=i5}=s.sort;e=i=new y_(e,{joinaggregate:[{op:a,field:o,as:Rq(s,s.sort,{forAs:!0})}],groupby:[at(s)]})}return i}return null}function lje(e,t){var n,r,i,s;for(const o of t){const a=o.data;if(e.name&&o.hasName()&&e.name!==o.dataName)continue;const u=(n=e.format)==null?void 0:n.mesh,l=(r=a.format)==null?void 0:r.feature;if(u&&l)continue;const c=(i=e.format)==null?void 0:i.feature;if((c||l)&&c!==l)continue;const f=(s=a.format)==null?void 0:s.mesh;if(!((u||f)&&u!==f)){if(YI(e)&&YI(a)){if(kl(e.values,a.values))return o}else if(jx(e)&&jx(a)){if(e.url===a.url)return o}else if(JFe(e)&&e.name===o.dataName)return o}}return null}function Srn(e,t){if(e.data||!e.parent){if(e.data===null){const r=new Cb({values:[]});return t.push(r),r}const n=lje(e.data,t);if(n)return $0(e.data)||(n.data.format=Y6e({},e.data.format,n.data.format)),!n.hasName()&&e.data.name&&(n.dataName=e.data.name),n;{const r=new Cb(e.data);return t.push(r),r}}else return e.parent.component.data.facetRoot?e.parent.component.data.facetRoot:e.parent.component.data.main}function Trn(e,t,n){let r=0;for(const i of t.transforms){let s,o;if(hen(i))o=e=new Ux(e,i),s="derived";else if(Kre(i)){const a=gnn(i);o=e=ma.makeWithAncestors(e,{},a,n)??e,e=new iT(e,t,i.filter)}else if(GFe(i))o=e=xh.makeFromTransform(e,i,t),s="number";else if(men(i))s="date",n.getWithExplicit(i.field).value===void 0&&(e=new ma(e,{[i.field]:s}),n.set(i.field,s,!1)),o=e=Eh.makeFromTransform(e,i);else if(gen(i))o=e=qf.makeFromTransform(e,i),s="number",tie(t)&&(e=new xy(e));else if(WFe(i))o=e=QI.make(e,t,i,r++),s="derived";else if(cen(i))o=e=new oT(e,i),s="number";else if(fen(i))o=e=new y_(e,i),s="number";else if(yen(i))o=e=hm.makeFromTransform(e,i),s="derived";else if(ven(i))o=e=new T5(e,i),s="derived";else if(ben(i))o=e=new x5(e,i),s="derived";else if(den(i))o=e=new S5(e,i),s="derived";else if(ien(i))o=e=new k5(e,i),s="derived";else if(len(i))e=new R5(e,i);else if(pen(i))o=e=$1.makeFromTransform(e,i),s="derived";else if(sen(i))o=e=new E5(e,i),s="derived";else if(oen(i))o=e=new A5(e,i),s="derived";else if(aen(i))o=e=new I5(e,i),s="derived";else if(uen(i))o=e=new C5(e,i),s="derived";else{Ze(jXt(i));continue}if(o&&s!==void 0)for(const a of o.producedFields()??[])n.set(a,s,!1)}return e}function N5(e){var h;let t=Srn(e,e.component.data.sources);const{outputNodes:n,outputNodeRefCounts:r}=e.component.data,i=e.data,o=!(i&&($0(i)||jx(i)||YI(i)))&&e.parent?e.parent.component.data.ancestorParse.clone():new Nen;$0(i)?(ZFe(i)?t=new YR(t,i.sequence):Xre(i)&&(t=new GR(t,i.graticule)),o.parseNothing=!0):((h=i==null?void 0:i.format)==null?void 0:h.parse)===null&&(o.parseNothing=!0),t=ma.makeExplicit(t,e,o)??t,t=new xy(t);const a=e.parent&&aT(e.parent);(Wi(e)||Ol(e))&&a&&(t=xh.makeFromEncoding(t,e)??t),e.transforms.length>0&&(t=Trn(t,e,o));const u=vnn(e),l=ynn(e);t=ma.makeWithAncestors(t,{},{...u,...l},o)??t,Wi(e)&&(t=xE.parseAll(t,e),t=XI.parseAll(t,e)),(Wi(e)||Ol(e))&&(a||(t=xh.makeFromEncoding(t,e)??t),t=Eh.makeFromEncoding(t,e)??t,t=Ux.parseAllForSortIndex(t,e));const c=t=D0e(Ei.Raw,e,t);if(Wi(e)){const p=qf.makeFromEncoding(t,e);p&&(t=p,tie(e)&&(t=new xy(t))),t=$1.makeFromEncoding(t,e)??t,t=hm.makeFromEncoding(t,e)??t}Wi(e)&&(t=KI.make(t,e)??t);const f=t=D0e(Ei.Main,e,t);Wi(e)&&htn(e,f);let d=null;if(Ol(e)){const p=e.getName("facet");t=xrn(t,e.facet)??t,d=new sT(t,e,p,f.getSource()),n[p]=d}return{...e.component.data,outputNodes:n,outputNodeRefCounts:r,raw:c,main:f,facetRoot:d,ancestorParse:o}}function D0e(e,t,n){const{outputNodes:r,outputNodeRefCounts:i}=t.component.data,s=t.getDataName(e),o=new Ku(n,s,e,i);return r[s]=o,o}class Crn extends die{constructor(t,n,r,i){var s,o,a,u;super(t,"concat",n,r,i,t.resolve),(((o=(s=t.resolve)==null?void 0:s.axis)==null?void 0:o.x)==="shared"||((u=(a=t.resolve)==null?void 0:a.axis)==null?void 0:u.y)==="shared")&&Ze(MXt),this.children=this.getChildren(t).map((l,c)=>vie(l,this,this.getName(`concat_${c}`),void 0,i))}parseData(){this.component.data=N5(this);for(const t of this.children)t.parseData()}parseSelections(){this.component.selection={};for(const t of this.children){t.parseSelections();for(const n of Ye(t.component.selection))this.component.selection[n]=t.component.selection[n]}}parseMarkGroup(){for(const t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){for(const t of this.children)t.parseAxesAndHeaders()}getChildren(t){return d5(t)?t.vconcat:Gre(t)?t.hconcat:t.concat}parseLayoutSize(){_rn(this)}parseAxisGroup(){return null}assembleSelectionTopLevelSignals(t){return this.children.reduce((n,r)=>r.assembleSelectionTopLevelSignals(n),t)}assembleSignals(){return this.children.forEach(t=>t.assembleSignals()),[]}assembleLayoutSignals(){const t=iie(this);for(const n of this.children)t.push(...n.assembleLayoutSignals());return t}assembleSelectionData(t){return this.children.reduce((n,r)=>r.assembleSelectionData(n),t)}assembleMarks(){return this.children.map(t=>{const n=t.assembleTitle(),r=t.assembleGroupStyle(),i=t.assembleGroupEncodeEntry(!1);return{type:"group",name:t.getName("group"),...n?{title:n}:{},...r?{style:r}:{},...i?{encode:{update:i}}:{},...t.assembleGroup()}})}assembleGroupStyle(){}assembleDefaultLayout(){const t=this.layout.columns;return{...t!=null?{columns:t}:{},bounds:"full",align:"each"}}}function Arn(e){return e===!1||e===null}const Irn={disable:1,gridScale:1,scale:1,...yFe,labelExpr:1,encode:1},cje=Ye(Irn);class pie extends pg{constructor(t={},n={},r=!1){super(),this.explicit=t,this.implicit=n,this.mainExtracted=r}clone(){return new pie(nn(this.explicit),nn(this.implicit),this.mainExtracted)}hasAxisPart(t){return t==="axis"?!0:t==="grid"||t==="title"?!!this.get(t):!Arn(this.get(t))}hasOrientSignalRef(){return Rt(this.explicit.orient)}}function krn(e,t,n){const{encoding:r,config:i}=e,s=Ms(r[t])??Ms(r[cp(t)]),o=e.axis(t)||{},{format:a,formatType:u}=o;if(Eb(u))return{text:Mf({fieldOrDatumDef:s,field:"datum.value",format:a,formatType:u,config:i}),...n};if(a===void 0&&u===void 0&&i.customFormatTypes){if(Mx(s)==="quantitative"){if(Lx(s)&&s.stack==="normalize"&&i.normalizedNumberFormatType)return{text:Mf({fieldOrDatumDef:s,field:"datum.value",format:i.normalizedNumberFormat,formatType:i.normalizedNumberFormatType,config:i}),...n};if(i.numberFormatType)return{text:Mf({fieldOrDatumDef:s,field:"datum.value",format:i.numberFormat,formatType:i.numberFormatType,config:i}),...n}}if(Mx(s)==="temporal"&&i.timeFormatType&&et(s)&&!s.timeUnit)return{text:Mf({fieldOrDatumDef:s,field:"datum.value",format:i.timeFormat,formatType:i.timeFormatType,config:i}),...n}}return n}function Rrn(e){return fp.reduce((t,n)=>(e.component.scales[n]&&(t[n]=[Lrn(n,e)]),t),{})}const Nrn={bottom:"top",top:"bottom",left:"right",right:"left"};function Drn(e){const{axes:t,resolve:n}=e.component,r={top:0,bottom:0,right:0,left:0};for(const i of e.children){i.parseAxesAndHeaders();for(const s of Ye(i.component.axes))n.axis[s]=sie(e.component.resolve,s),n.axis[s]==="shared"&&(t[s]=Prn(t[s],i.component.axes[s]),t[s]||(n.axis[s]="independent",delete t[s]))}for(const i of fp){for(const s of e.children)if(s.component.axes[i]){if(n.axis[i]==="independent"){t[i]=(t[i]??[]).concat(s.component.axes[i]);for(const o of s.component.axes[i]){const{value:a,explicit:u}=o.getWithExplicit("orient");if(!Rt(a)){if(r[a]>0&&!u){const l=Nrn[a];r[a]>r[l]&&o.set("orient",l,!1)}r[a]++}}}delete s.component.axes[i]}if(n.axis[i]==="independent"&&t[i]&&t[i].length>1)for(const[s,o]of(t[i]||[]).entries())s>0&&o.get("grid")&&!o.explicit.grid&&(o.implicit.grid=!1)}}function Prn(e,t){if(e){if(e.length!==t.length)return;const n=e.length;for(let r=0;r<n;r++){const i=e[r],s=t[r];if(!!i!=!!s)return;if(i&&s){const o=i.getWithExplicit("orient"),a=s.getWithExplicit("orient");if(o.explicit&&a.explicit&&o.value!==a.value)return;e[r]=Orn(i,s)}}}else return t.map(n=>n.clone());return e}function Orn(e,t){for(const n of cje){const r=_y(e.getWithExplicit(n),t.getWithExplicit(n),n,"axis",(i,s)=>{switch(n){case"title":return E4e(i,s);case"gridScale":return{explicit:i.explicit,value:fs(i.value,s.value)}}return p5(i,s,n,"axis")});e.setWithExplicit(n,r)}return e}function $rn(e,t,n,r,i){if(t==="disable")return n!==void 0;switch(n=n||{},t){case"titleAngle":case"labelAngle":return e===(Rt(n.labelAngle)?n.labelAngle:WI(n.labelAngle));case"values":return!!n.values;case"encode":return!!n.encoding||!!n.labelAngle;case"title":if(e===I5e(r,i))return!0}return e===n[t]}const Mrn=new Set(["grid","translate","format","formatType","orient","labelExpr","tickCount","position","tickMinStep"]);function Lrn(e,t){var y,v;let n=t.axis(e);const r=new pie,i=Ms(t.encoding[e]),{mark:s,config:o}=t,a=(n==null?void 0:n.orient)||((y=o[e==="x"?"axisX":"axisY"])==null?void 0:y.orient)||((v=o.axis)==null?void 0:v.orient)||xtn(e),u=t.getScaleComponent(e).get("type"),l=gtn(e,u,a,t.config),c=n!==void 0?!n:Eq("disable",o.style,n==null?void 0:n.style,l).configValue;if(r.set("disable",c,n!==void 0),c)return r;n=n||{};const f=_tn(i,n,e,o.style,l),d=Q4e(n.formatType,i,u),h=X4e(i,i.type,n.format,n.formatType,o,!0),p={fieldOrDatumDef:i,axis:n,channel:e,model:t,scaleType:u,orient:a,labelAngle:f,format:h,formatType:d,mark:s,config:o};for(const b of cje){const w=b in g0e?g0e[b](p):Vge(b)?n[b]:void 0,E=w!==void 0,T=$rn(w,b,n,t,e);if(E&&T)r.set(b,w,T);else{const{configValue:S=void 0,configFrom:C=void 0}=Vge(b)&&b!=="values"?Eq(b,o.style,n.style,l):{},A=S!==void 0;E&&!A?r.set(b,w,T):(C!=="vgAxisConfig"||Mrn.has(b)&&A||qR(S)||Rt(S))&&r.set(b,S,!1)}}const m=n.encoding??{},g=gFe.reduce((b,w)=>{if(!r.hasAxisPart(w))return b;const E=O5e(m[w]??{},t),T=w==="labels"?krn(t,e,E):E;return T!==void 0&&!jr(T)&&(b[w]={update:T}),b},{});return jr(g)||r.set("encode",g,!!n.encoding||n.labelAngle!==void 0),r}function Frn({encoding:e,size:t}){for(const n of fp){const r=ol(n);zh(t[r])&&c0(e[n])&&(delete t[r],Ze(A4e(r)))}return t}const jrn={vgMark:"arc",encodeEntry:e=>({...Zc(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...pa("x",e,{defaultPos:"mid"}),...pa("y",e,{defaultPos:"mid"}),...wy(e,"radius"),...wy(e,"theta")})},Brn={vgMark:"area",encodeEntry:e=>({...Zc(e,{align:"ignore",baseline:"ignore",color:"include",orient:"include",size:"ignore",theta:"ignore"}),...KM("x",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="horizontal"}),...KM("y",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="vertical"}),...eie(e)})},Urn={vgMark:"rect",encodeEntry:e=>({...Zc(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...wy(e,"x"),...wy(e,"y")})},zrn={vgMark:"shape",encodeEntry:e=>({...Zc(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"})}),postEncodingTransform:e=>{const{encoding:t}=e,n=t.shape;return[{type:"geoshape",projection:e.projectionName(),...n&&et(n)&&n.type===nT?{field:at(n,{expr:"datum"})}:{}}]}},Vrn={vgMark:"image",encodeEntry:e=>({...Zc(e,{align:"ignore",baseline:"ignore",color:"ignore",orient:"ignore",size:"ignore",theta:"ignore"}),...wy(e,"x"),...wy(e,"y"),...Jre(e,"url")})},Hrn={vgMark:"line",encodeEntry:e=>({...Zc(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...pa("x",e,{defaultPos:"mid"}),...pa("y",e,{defaultPos:"mid"}),...eo("size",e,{vgChannel:"strokeWidth"}),...eie(e)})},qrn={vgMark:"trail",encodeEntry:e=>({...Zc(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...pa("x",e,{defaultPos:"mid"}),...pa("y",e,{defaultPos:"mid"}),...eo("size",e),...eie(e)})};function mie(e,t){const{config:n}=e;return{...Zc(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...pa("x",e,{defaultPos:"mid"}),...pa("y",e,{defaultPos:"mid"}),...eo("size",e),...eo("angle",e),...Wrn(e,n,t)}}function Wrn(e,t,n){return n?{shape:{value:n}}:eo("shape",e)}const Grn={vgMark:"symbol",encodeEntry:e=>mie(e)},Yrn={vgMark:"symbol",encodeEntry:e=>mie(e,"circle")},Krn={vgMark:"symbol",encodeEntry:e=>mie(e,"square")},Xrn={vgMark:"rect",encodeEntry:e=>({...Zc(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...wy(e,"x"),...wy(e,"y")})},Qrn={vgMark:"rule",encodeEntry:e=>{const{markDef:t}=e,n=t.orient;return!e.encoding.x&&!e.encoding.y&&!e.encoding.latitude&&!e.encoding.longitude?{}:{...Zc(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...KM("x",e,{defaultPos:n==="horizontal"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="vertical"}),...KM("y",e,{defaultPos:n==="vertical"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="horizontal"}),...eo("size",e,{vgChannel:"strokeWidth"})}}},Jrn={vgMark:"text",encodeEntry:e=>{const{config:t,encoding:n}=e;return{...Zc(e,{align:"include",baseline:"include",color:"include",size:"ignore",orient:"ignore",theta:"include"}),...pa("x",e,{defaultPos:"mid"}),...pa("y",e,{defaultPos:"mid"}),...Jre(e),...eo("size",e,{vgChannel:"fontSize"}),...eo("angle",e),...d0e("align",Zrn(e.markDef,n,t)),...d0e("baseline",ein(e.markDef,n,t)),...pa("radius",e,{defaultPos:null}),...pa("theta",e,{defaultPos:null})}}};function Zrn(e,t,n){if(wr("align",e,n)===void 0)return"center"}function ein(e,t,n){if(wr("baseline",e,n)===void 0)return"middle"}const tin={vgMark:"rect",encodeEntry:e=>{const{config:t,markDef:n}=e,r=n.orient,i=r==="horizontal"?"width":"height",s=r==="horizontal"?"height":"width";return{...Zc(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...pa("x",e,{defaultPos:"mid",vgChannel:"xc"}),...pa("y",e,{defaultPos:"mid",vgChannel:"yc"}),...eo("size",e,{defaultValue:nin(e),vgChannel:i}),[s]:di(wr("thickness",n,t))}}};function nin(e){const{config:t,markDef:n}=e,{orient:r}=n,i=r==="horizontal"?"width":"height",s=e.getScaleComponent(r==="horizontal"?"x":"y"),o=wr("size",n,t,{vgChannel:i})??t.tick.bandSize;if(o!==void 0)return o;{const a=s?s.get("range"):void 0;return a&&nv(a)&&lr(a.step)?a.step*3/4:GM(t.view,i)*3/4}}const UD={arc:jrn,area:Brn,bar:Urn,circle:Yrn,geoshape:zrn,image:Vrn,line:Hrn,point:Grn,rect:Xrn,rule:Qrn,square:Krn,text:Jrn,tick:tin,trail:qrn};function rin(e){if(Hn([n5,e5,vJt],e.mark)){const t=EFe(e.mark,e.encoding);if(t.length>0)return iin(e,t)}else if(e.mark===t5){const t=cq.some(n=>wr(n,e.markDef,e.config));if(e.stack&&!e.fieldDef("size")&&t)return sin(e)}return gie(e)}const P0e="faceted_path_";function iin(e,t){return[{name:e.getName("pathgroup"),type:"group",from:{facet:{name:P0e+e.requestDataName(Ei.Main),data:e.requestDataName(Ei.Main),groupby:t}},encode:{update:{width:{field:{group:"width"}},height:{field:{group:"height"}}}},marks:gie(e,{fromPrefix:P0e})}]}const O0e="stack_group_";function sin(e){var l;const[t]=gie(e,{fromPrefix:O0e}),n=e.scaleName(e.stack.fieldChannel),r=(c={})=>e.vgField(e.stack.fieldChannel,c),i=(c,f)=>{const d=[r({prefix:"min",suffix:"start",expr:f}),r({prefix:"max",suffix:"start",expr:f}),r({prefix:"min",suffix:"end",expr:f}),r({prefix:"max",suffix:"end",expr:f})];return`${c}(${d.map(h=>`scale('${n}',${h})`).join(",")})`};let s,o;e.stack.fieldChannel==="x"?(s={...Rx(t.encode.update,["y","yc","y2","height",...cq]),x:{signal:i("min","datum")},x2:{signal:i("max","datum")},clip:{value:!0}},o={x:{field:{group:"x"},mult:-1},height:{field:{group:"height"}}},t.encode.update={...Gu(t.encode.update,["y","yc","y2"]),height:{field:{group:"height"}}}):(s={...Rx(t.encode.update,["x","xc","x2","width"]),y:{signal:i("min","datum")},y2:{signal:i("max","datum")},clip:{value:!0}},o={y:{field:{group:"y"},mult:-1},width:{field:{group:"width"}}},t.encode.update={...Gu(t.encode.update,["x","xc","x2"]),width:{field:{group:"width"}}});for(const c of cq){const f=Um(c,e.markDef,e.config);t.encode.update[c]?(s[c]=t.encode.update[c],delete t.encode.update[c]):f&&(s[c]=di(f)),f&&(t.encode.update[c]={value:0})}const a=[];if(((l=e.stack.groupbyChannels)==null?void 0:l.length)>0)for(const c of e.stack.groupbyChannels){const f=e.fieldDef(c),d=at(f);d&&a.push(d),(f!=null&&f.bin||f!=null&&f.timeUnit)&&a.push(at(f,{binSuffix:"end"}))}return s=["stroke","strokeWidth","strokeJoin","strokeCap","strokeDash","strokeDashOffset","strokeMiterLimit","strokeOpacity"].reduce((c,f)=>{if(t.encode.update[f])return{...c,[f]:t.encode.update[f]};{const d=Um(f,e.markDef,e.config);return d!==void 0?{...c,[f]:di(d)}:c}},s),s.stroke&&(s.strokeForeground={value:!0},s.strokeOffset={value:0}),[{type:"group",from:{facet:{data:e.requestDataName(Ei.Main),name:O0e+e.requestDataName(Ei.Main),groupby:a,aggregate:{fields:[r({suffix:"start"}),r({suffix:"start"}),r({suffix:"end"}),r({suffix:"end"})],ops:["min","max","min","max"]}}},encode:{update:s},marks:[{type:"group",encode:{update:o},marks:[t]}]}]}function oin(e){var a;const{encoding:t,stack:n,mark:r,markDef:i,config:s}=e,o=t.order;if(!(!je(o)&&rd(o)&&uq(o.value)||!o&&uq(wr("order",i,s)))){if((je(o)||et(o))&&!n)return b4e(o,{expr:"datum"});if(p_(r)){const u=i.orient==="horizontal"?"y":"x",l=t[u];if(et(l)){const c=l.sort;if(je(c))return{field:at(l,{prefix:u,suffix:"sort_index",expr:"datum"})};if(wh(c))return{field:at({aggregate:Lre(e.encoding)?c.op:void 0,field:c.field},{expr:"datum"})};if(iFe(c)){const f=e.fieldDef(c.encoding);return{field:at(f,{expr:"datum"}),order:c.order}}else return c===null?void 0:{field:at(l,{binSuffix:(a=e.stack)!=null&&a.impute?"mid":void 0,expr:"datum"})}}return}}}function gie(e,t={fromPrefix:""}){const{mark:n,markDef:r,encoding:i,config:s}=e,o=fs(r.clip,ain(e),uin(e)),a=y4e(r),u=i.key,l=oin(e),c=lin(e),f=wr("aria",r,s),d=UD[n].postEncodingTransform?UD[n].postEncodingTransform(e):null;return[{name:e.getName("marks"),type:UD[n].vgMark,...o?{clip:o}:{},...a?{style:a}:{},...u?{key:u.field}:{},...l?{sort:l}:{},...c||{},...f===!1?{aria:f}:{},from:{data:t.fromPrefix+e.requestDataName(Ei.Main)},encode:{update:UD[n].encodeEntry(e)},...d?{transform:d}:{}}]}function ain(e){const t=e.getScaleComponent("x"),n=e.getScaleComponent("y");return t!=null&&t.get("selectionExtent")||n!=null&&n.get("selectionExtent")?!0:void 0}function uin(e){const t=e.component.projection;return t&&!t.isFit?!0:void 0}function lin(e){if(!e.component.selection)return null;const t=Ye(e.component.selection).length;let n=t,r=e.parent;for(;r&&n===0;)n=Ye(r.component.selection).length,r=r.parent;return n?{interactive:t>0||e.mark==="geoshape"||!!e.encoding.tooltip||!!e.markDef.tooltip}:null}class fje extends oje{constructor(t,n,r,i={},s){super(t,"unit",n,r,s,void 0,qge(t)?t.view:void 0),this.specifiedScales={},this.specifiedAxes={},this.specifiedLegends={},this.specifiedProjection={},this.selection=[],this.children=[];const o=Bh(t.mark)?{...t.mark}:{type:t.mark},a=o.type;o.filled===void 0&&(o.filled=GZt(o,s,{graticule:t.data&&Xre(t.data)}));const u=this.encoding=QJt(t.encoding||{},a,o.filled,s);this.markDef=VFe(o,u,s),this.size=Frn({encoding:u,size:qge(t)?{...i,...t.width?{width:t.width}:{},...t.height?{height:t.height}:{}}:i}),this.stack=zFe(this.markDef,u),this.specifiedScales=this.initScales(a,u),this.specifiedAxes=this.initAxes(u),this.specifiedLegends=this.initLegends(u),this.specifiedProjection=t.projection,this.selection=(t.params??[]).filter(l=>qre(l))}get hasProjection(){const{encoding:t}=this,n=this.mark===tFe,r=t&&KKt.some(i=>ln(t[i]));return n||r}scaleDomain(t){const n=this.specifiedScales[t];return n?n.domain:void 0}axis(t){return this.specifiedAxes[t]}legend(t){return this.specifiedLegends[t]}initScales(t,n){return XF.reduce((r,i)=>{const s=Ms(n[i]);return s&&(r[i]=this.initScale(s.scale??{})),r},{})}initScale(t){const{domain:n,range:r}=t,i=ku(t);return je(n)&&(i.domain=n.map(wl)),je(r)&&(i.range=r.map(wl)),i}initAxes(t){return fp.reduce((n,r)=>{const i=t[r];if(ln(i)||r===Ai&&ln(t.x2)||r===po&&ln(t.y2)){const s=ln(i)?i.axis:void 0;n[r]=s&&this.initAxis({...s})}return n},{})}initAxis(t){const n=Ye(t),r={};for(const i of n){const s=t[i];r[i]=qR(s)?g4e(s):wl(s)}return r}initLegends(t){return sXt.reduce((n,r)=>{const i=Ms(t[r]);if(i&&aXt(r)){const s=i.legend;n[r]=s&&ku(s)}return n},{})}parseData(){this.component.data=N5(this)}parseLayoutSize(){wrn(this)}parseSelections(){this.component.selection=dtn(this,this.selection)}parseMarkGroup(){this.component.mark=rin(this)}parseAxesAndHeaders(){this.component.axes=Rrn(this)}assembleSelectionTopLevelSignals(t){return Oen(this,t)}assembleSignals(){return[...T5e(this),...Den(this,[])]}assembleSelectionData(t){return $en(this,t)}assembleLayout(){return null}assembleLayoutSignals(){return iie(this)}assembleMarks(){let t=this.component.mark??[];return(!this.parent||!aT(this.parent))&&(t=n5e(this,t)),t.map(this.correctDataNames)}assembleGroupStyle(){const{style:t}=this.view||{};return t!==void 0?t:this.encoding.x||this.encoding.y?"cell":"view"}getMapping(){return this.encoding}get mark(){return this.markDef.type}channelHasField(t){return P1(this.encoding,t)}fieldDef(t){const n=this.encoding[t];return Uh(n)}typedFieldDef(t){const n=this.fieldDef(t);return ru(n)?n:null}}class yie extends die{constructor(t,n,r,i,s){super(t,"layer",n,r,s,t.resolve,t.view);const o={...i,...t.width?{width:t.width}:{},...t.height?{height:t.height}:{}};this.children=t.layer.map((a,u)=>{if(h5(a))return new yie(a,this,this.getName(`layer_${u}`),o,s);if(hg(a))return new fje(a,this,this.getName(`layer_${u}`),o,s);throw new Error(cre(a))})}parseData(){this.component.data=N5(this);for(const t of this.children)t.parseData()}parseLayoutSize(){brn(this)}parseSelections(){this.component.selection={};for(const t of this.children){t.parseSelections();for(const n of Ye(t.component.selection))this.component.selection[n]=t.component.selection[n]}}parseMarkGroup(){for(const t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){Drn(this)}assembleSelectionTopLevelSignals(t){return this.children.reduce((n,r)=>r.assembleSelectionTopLevelSignals(n),t)}assembleSignals(){return this.children.reduce((t,n)=>t.concat(n.assembleSignals()),T5e(this))}assembleLayoutSignals(){return this.children.reduce((t,n)=>t.concat(n.assembleLayoutSignals()),iie(this))}assembleSelectionData(t){return this.children.reduce((n,r)=>r.assembleSelectionData(n),t)}assembleGroupStyle(){const t=new Set;for(const r of this.children)for(const i of pt(r.assembleGroupStyle()))t.add(i);const n=Array.from(t);return n.length>1?n:n.length===1?n[0]:void 0}assembleTitle(){let t=super.assembleTitle();if(t)return t;for(const n of this.children)if(t=n.assembleTitle(),t)return t}assembleLayout(){return null}assembleMarks(){return Men(this,this.children.flatMap(t=>t.assembleMarks()))}assembleLegends(){return this.children.reduce((t,n)=>t.concat(n.assembleLegends()),z5e(this))}}function vie(e,t,n,r,i){if(s5(e))return new iA(e,t,n,i);if(h5(e))return new yie(e,t,n,r,i);if(hg(e))return new fje(e,t,n,r,i);if(wZt(e))return new Crn(e,t,n,i);throw new Error(cre(e))}function cin(e,t={}){t.logger&&CQt(t.logger),t.fieldTitle&&hFe(t.fieldTitle);try{const n=UFe(VS(t.config,e.config)),r=XFe(e,n),i=vie(r,null,"",void 0,n);return i.parse(),Onn(i.component.data,i),{spec:din(i,fin(e,r.autosize,n,i),e.datasets,e.usermeta),normalized:r}}finally{t.logger&&AQt(),t.fieldTitle&&zJt()}}function fin(e,t,n,r){const i=r.component.layoutSize.get("width"),s=r.component.layoutSize.get("height");if(t===void 0?(t={type:"pad"},r.hasAxisOrientSignalRef()&&(t.resize=!0)):mt(t)&&(t={type:t}),i&&s&&Ien(t.type)){if(i==="step"&&s==="step")Ze(kge()),t.type="pad";else if(i==="step"||s==="step"){const o=i==="step"?"width":"height";Ze(kge(KF(o)));const a=o==="width"?"height":"width";t.type=ken(a)}}return{...Ye(t).length===1&&t.type?t.type==="pad"?{}:{autosize:t.type}:{autosize:t},...r0e(n,!1),...r0e(e,!0)}}function din(e,t,n={},r){const i=e.config?$Zt(e.config):void 0,s=[].concat(e.assembleSelectionData([]),mrn(e.component.data,n)),o=e.assembleProjections(),a=e.assembleTitle(),u=e.assembleGroupStyle(),l=e.assembleGroupEncodeEntry(!0);let c=e.assembleLayoutSignals();c=c.filter(h=>(h.name==="width"||h.name==="height")&&h.value!==void 0?(t[h.name]=+h.value,!1):!0);const{params:f,...d}=t;return{$schema:"https://vega.github.io/schema/vega/v5.json",...e.description?{description:e.description}:{},...d,...a?{title:a}:{},...u?{style:u}:{},...l?{encode:{update:l}}:{},data:s,...o.length>0?{projections:o}:{},...e.assembleGroup([...c,...e.assembleSelectionTopLevelSignals([]),...LFe(f)]),...i?{config:i}:{},...r?{usermeta:r}:{}}}const hin=VKt.version,pin=Object.freeze(Object.defineProperty({__proto__:null,accessPathDepth:Nx,accessPathWithDatum:tre,compile:cin,contains:Hn,deepEqual:kl,deleteNestedProperty:LM,duplicate:nn,entries:yy,every:Jne,fieldIntersection:ere,flatAccessWithDatum:X6e,getFirstDefined:fs,hasIntersection:Zne,hash:Vn,internalField:Z6e,isBoolean:qI,isEmpty:jr,isEqual:qKt,isInternalField:e4e,isNullOrFalse:uq,isNumeric:VF,keys:Ye,logicalExpr:nA,mergeDeep:Y6e,never:G6e,normalize:XFe,normalizeAngle:WI,omit:Gu,pick:Rx,prefixGenerator:lq,removePathFromField:eT,replaceAll:vb,replacePathInField:Uc,resetIdCounter:GKt,setEqual:K6e,some:yb,stringify:Br,titleCase:$R,unique:sh,uniqueId:J6e,vals:Mo,varName:Ci,version:hin},Symbol.toStringTag,{value:"Module"}));function dje(e){const[t,n]=/schema\/([\w-]+)\/([\w\.\-]+)\.json$/g.exec(e).slice(1,3);return{library:t,version:n}}var min="vega-themes",gin="2.15.0",yin="Themes for stylized Vega and Vega-Lite visualizations.",vin=["vega","vega-lite","themes","style"],bin="BSD-3-Clause",_in={name:"UW Interactive Data Lab",url:"https://idl.cs.washington.edu"},win=[{name:"Emily Gu",url:"https://github.com/emilygu"},{name:"Arvind Satyanarayan",url:"http://arvindsatya.com"},{name:"Jeffrey Heer",url:"https://idl.cs.washington.edu"},{name:"Dominik Moritz",url:"https://www.domoritz.de"}],Ein="build/vega-themes.js",bie="build/vega-themes.module.js",xin="build/vega-themes.min.js",Sin="build/vega-themes.min.js",Tin="build/vega-themes.module.d.ts",Cin={type:"git",url:"https://github.com/vega/vega-themes.git"},Ain=["src","build"],Iin={prebuild:"yarn clean",build:"rollup -c",clean:"rimraf build && rimraf examples/build","copy:data":"rsync -r node_modules/vega-datasets/data/* examples/data","copy:build":"rsync -r build/* examples/build","deploy:gh":"yarn build && mkdir -p examples/build && rsync -r build/* examples/build && gh-pages -d examples",preversion:"yarn lint",serve:"browser-sync start -s -f build examples --serveStatic examples",start:"yarn build && concurrently --kill-others -n Server,Rollup 'yarn serve' 'rollup -c -w'",format:"eslint . --fix",lint:"eslint .",release:"release-it"},kin={"@babel/core":"^7.24.6","@babel/plugin-transform-runtime":"^7.24.6","@babel/preset-env":"^7.24.6","@babel/preset-typescript":"^7.24.6","@release-it/conventional-changelog":"^8.0.1","@rollup/plugin-json":"^6.1.0","@rollup/plugin-node-resolve":"^15.2.3","@rollup/plugin-terser":"^0.4.4","@typescript-eslint/eslint-plugin":"^7.11.0","@typescript-eslint/parser":"^7.11.0","browser-sync":"^3.0.2",concurrently:"^8.2.2",eslint:"^8.45.0","eslint-config-prettier":"^9.1.0","eslint-plugin-prettier":"^5.1.3","gh-pages":"^6.1.1",prettier:"^3.2.5","release-it":"^17.3.0",rollup:"^4.18.0","rollup-plugin-bundle-size":"^1.0.3","rollup-plugin-ts":"^3.4.5",typescript:"^5.4.5",vega:"^5.25.0","vega-lite":"^5.9.3"},Rin={vega:"*","vega-lite":"*"},Nin={},Din={name:min,version:gin,description:yin,keywords:vin,license:bin,author:_in,contributors:win,main:Ein,module:bie,unpkg:xin,jsdelivr:Sin,types:Tin,repository:Cin,files:Ain,scripts:Iin,devDependencies:kin,peerDependencies:Rin,dependencies:Nin};const K_="#fff",$0e="#888",Pin={background:"#333",view:{stroke:$0e},title:{color:K_,subtitleColor:K_},style:{"guide-label":{fill:K_},"guide-title":{fill:K_}},axis:{domainColor:K_,gridColor:$0e,tickColor:K_}},gv="#4572a7",Oin={background:"#fff",arc:{fill:gv},area:{fill:gv},line:{stroke:gv,strokeWidth:2},path:{stroke:gv},rect:{fill:gv},shape:{stroke:gv},symbol:{fill:gv,strokeWidth:1.5,size:50},axis:{bandPosition:.5,grid:!0,gridColor:"#000000",gridOpacity:1,gridWidth:.5,labelPadding:10,tickSize:5,tickWidth:.5},axisBand:{grid:!1,tickExtra:!0},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:50,symbolType:"square"},range:{category:["#4572a7","#aa4643","#8aa453","#71598e","#4598ae","#d98445","#94aace","#d09393","#b9cc98","#a99cbc"]}},yv="#30a2da",OB="#cbcbcb",$in="#999",Min="#333",M0e="#f0f0f0",L0e="#333",Lin={arc:{fill:yv},area:{fill:yv},axis:{domainColor:OB,grid:!0,gridColor:OB,gridWidth:1,labelColor:$in,labelFontSize:10,titleColor:Min,tickColor:OB,tickSize:10,titleFontSize:14,titlePadding:10,labelPadding:4},axisBand:{grid:!1},background:M0e,group:{fill:M0e},legend:{labelColor:L0e,labelFontSize:11,padding:1,symbolSize:30,symbolType:"square",titleColor:L0e,titleFontSize:14,titlePadding:10},line:{stroke:yv,strokeWidth:2},path:{stroke:yv,strokeWidth:.5},rect:{fill:yv},range:{category:["#30a2da","#fc4f30","#e5ae38","#6d904f","#8b8b8b","#b96db8","#ff9e27","#56cc60","#52d2ca","#52689e","#545454","#9fe4f8"],diverging:["#cc0020","#e77866","#f6e7e1","#d6e8ed","#91bfd9","#1d78b5"],heatmap:["#d6e8ed","#cee0e5","#91bfd9","#549cc6","#1d78b5"]},point:{filled:!0,shape:"circle"},shape:{stroke:yv},bar:{binSpacing:2,fill:yv,stroke:null},title:{anchor:"start",fontSize:24,fontWeight:600,offset:20}},vv="#000",Fin={group:{fill:"#e5e5e5"},arc:{fill:vv},area:{fill:vv},line:{stroke:vv},path:{stroke:vv},rect:{fill:vv},shape:{stroke:vv},symbol:{fill:vv,size:40},axis:{domain:!1,grid:!0,gridColor:"#FFFFFF",gridOpacity:1,labelColor:"#7F7F7F",labelPadding:4,tickColor:"#7F7F7F",tickSize:5.67,titleFontSize:16,titleFontWeight:"normal"},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:40},range:{category:["#000000","#7F7F7F","#1A1A1A","#999999","#333333","#B0B0B0","#4D4D4D","#C9C9C9","#666666","#DCDCDC"]}},jin=22,Bin="normal",F0e="Benton Gothic, sans-serif",j0e=11.5,Uin="normal",bv="#82c6df",$B="Benton Gothic Bold, sans-serif",B0e="normal",U0e=13,a2={"category-6":["#ec8431","#829eb1","#c89d29","#3580b1","#adc839","#ab7fb4"],"fire-7":["#fbf2c7","#f9e39c","#f8d36e","#f4bb6a","#e68a4f","#d15a40","#ab4232"],"fireandice-6":["#e68a4f","#f4bb6a","#f9e39c","#dadfe2","#a6b7c6","#849eae"],"ice-7":["#edefee","#dadfe2","#c4ccd2","#a6b7c6","#849eae","#607785","#47525d"]},zin={background:"#ffffff",title:{anchor:"start",color:"#000000",font:$B,fontSize:jin,fontWeight:Bin},arc:{fill:bv},area:{fill:bv},line:{stroke:bv,strokeWidth:2},path:{stroke:bv},rect:{fill:bv},shape:{stroke:bv},symbol:{fill:bv,size:30},axis:{labelFont:F0e,labelFontSize:j0e,labelFontWeight:Uin,titleFont:$B,titleFontSize:U0e,titleFontWeight:B0e},axisX:{labelAngle:0,labelPadding:4,tickSize:3},axisY:{labelBaseline:"middle",maxExtent:45,minExtent:45,tickSize:2,titleAlign:"left",titleAngle:0,titleX:-45,titleY:-11},legend:{labelFont:F0e,labelFontSize:j0e,symbolType:"square",titleFont:$B,titleFontSize:U0e,titleFontWeight:B0e},range:{category:a2["category-6"],diverging:a2["fireandice-6"],heatmap:a2["fire-7"],ordinal:a2["fire-7"],ramp:a2["fire-7"]}},_v="#ab5787",zD="#979797",Vin={background:"#f9f9f9",arc:{fill:_v},area:{fill:_v},line:{stroke:_v},path:{stroke:_v},rect:{fill:_v},shape:{stroke:_v},symbol:{fill:_v,size:30},axis:{domainColor:zD,domainWidth:.5,gridWidth:.2,labelColor:zD,tickColor:zD,tickWidth:.2,titleColor:zD},axisBand:{grid:!1},axisX:{grid:!0,tickSize:10},axisY:{domain:!1,grid:!0,tickSize:0},legend:{labelFontSize:11,padding:1,symbolSize:30,symbolType:"square"},range:{category:["#ab5787","#51b2e5","#703c5c","#168dd9","#d190b6","#00609f","#d365ba","#154866","#666666","#c4c4c4"]}},wv="#3e5c69",Hin={background:"#fff",arc:{fill:wv},area:{fill:wv},line:{stroke:wv},path:{stroke:wv},rect:{fill:wv},shape:{stroke:wv},symbol:{fill:wv},axis:{domainWidth:.5,grid:!0,labelPadding:2,tickSize:5,tickWidth:.5,titleFontWeight:"normal"},axisBand:{grid:!1},axisX:{gridWidth:.2},axisY:{gridDash:[3],gridWidth:.4},legend:{labelFontSize:11,padding:1,symbolType:"square"},range:{category:["#3e5c69","#6793a6","#182429","#0570b0","#3690c0","#74a9cf","#a6bddb","#e2ddf2"]}},uc="#1696d2",z0e="#000000",qin="#FFFFFF",VD="Lato",MB="Lato",Win="Lato",Gin="#DEDDDD",Yin=18,u2={"main-colors":["#1696d2","#d2d2d2","#000000","#fdbf11","#ec008b","#55b748","#5c5859","#db2b27"],"shades-blue":["#CFE8F3","#A2D4EC","#73BFE2","#46ABDB","#1696D2","#12719E","#0A4C6A","#062635"],"shades-gray":["#F5F5F5","#ECECEC","#E3E3E3","#DCDBDB","#D2D2D2","#9D9D9D","#696969","#353535"],"shades-yellow":["#FFF2CF","#FCE39E","#FDD870","#FCCB41","#FDBF11","#E88E2D","#CA5800","#843215"],"shades-magenta":["#F5CBDF","#EB99C2","#E46AA7","#E54096","#EC008B","#AF1F6B","#761548","#351123"],"shades-green":["#DCEDD9","#BCDEB4","#98CF90","#78C26D","#55B748","#408941","#2C5C2D","#1A2E19"],"shades-black":["#D5D5D4","#ADABAC","#848081","#5C5859","#332D2F","#262223","#1A1717","#0E0C0D"],"shades-red":["#F8D5D4","#F1AAA9","#E9807D","#E25552","#DB2B27","#A4201D","#6E1614","#370B0A"],"one-group":["#1696d2","#000000"],"two-groups-cat-1":["#1696d2","#000000"],"two-groups-cat-2":["#1696d2","#fdbf11"],"two-groups-cat-3":["#1696d2","#db2b27"],"two-groups-seq":["#a2d4ec","#1696d2"],"three-groups-cat":["#1696d2","#fdbf11","#000000"],"three-groups-seq":["#a2d4ec","#1696d2","#0a4c6a"],"four-groups-cat-1":["#000000","#d2d2d2","#fdbf11","#1696d2"],"four-groups-cat-2":["#1696d2","#ec0008b","#fdbf11","#5c5859"],"four-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a"],"five-groups-cat-1":["#1696d2","#fdbf11","#d2d2d2","#ec008b","#000000"],"five-groups-cat-2":["#1696d2","#0a4c6a","#d2d2d2","#fdbf11","#332d2f"],"five-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a","#000000"],"six-groups-cat-1":["#1696d2","#ec008b","#fdbf11","#000000","#d2d2d2","#55b748"],"six-groups-cat-2":["#1696d2","#d2d2d2","#ec008b","#fdbf11","#332d2f","#0a4c6a"],"six-groups-seq":["#cfe8f3","#a2d4ec","#73bfe2","#46abdb","#1696d2","#12719e"],"diverging-colors":["#ca5800","#fdbf11","#fdd870","#fff2cf","#cfe8f3","#73bfe2","#1696d2","#0a4c6a"]},Kin={background:qin,title:{anchor:"start",fontSize:Yin,font:VD},axisX:{domain:!0,domainColor:z0e,domainWidth:1,grid:!1,labelFontSize:12,labelFont:MB,labelAngle:0,tickColor:z0e,tickSize:5,titleFontSize:12,titlePadding:10,titleFont:VD},axisY:{domain:!1,domainWidth:1,grid:!0,gridColor:Gin,gridWidth:1,labelFontSize:12,labelFont:MB,labelPadding:8,ticks:!1,titleFontSize:12,titlePadding:10,titleFont:VD,titleAngle:0,titleY:-10,titleX:18},legend:{labelFontSize:12,labelFont:MB,symbolSize:100,titleFontSize:12,titlePadding:10,titleFont:VD,orient:"right",offset:10},view:{stroke:"transparent"},range:{category:u2["six-groups-cat-1"],diverging:u2["diverging-colors"],heatmap:u2["diverging-colors"],ordinal:u2["six-groups-seq"],ramp:u2["shades-blue"]},area:{fill:uc},rect:{fill:uc},line:{color:uc,stroke:uc,strokeWidth:5},trail:{color:uc,stroke:uc,strokeWidth:0,size:1},path:{stroke:uc,strokeWidth:.5},point:{filled:!0},text:{font:Win,color:uc,fontSize:11,align:"center",fontWeight:400,size:11},style:{bar:{fill:uc,stroke:null}},arc:{fill:uc},shape:{stroke:uc},symbol:{fill:uc,size:30}},Ev="#3366CC",V0e="#ccc",HD="Arial, sans-serif",Xin={arc:{fill:Ev},area:{fill:Ev},path:{stroke:Ev},rect:{fill:Ev},shape:{stroke:Ev},symbol:{stroke:Ev},circle:{fill:Ev},background:"#fff",padding:{top:10,right:10,bottom:10,left:10},style:{"guide-label":{font:HD,fontSize:12},"guide-title":{font:HD,fontSize:12},"group-title":{font:HD,fontSize:12}},title:{font:HD,fontSize:14,fontWeight:"bold",dy:-3,anchor:"start"},axis:{gridColor:V0e,tickColor:V0e,domain:!1,grid:!0},range:{category:["#4285F4","#DB4437","#F4B400","#0F9D58","#AB47BC","#00ACC1","#FF7043","#9E9D24","#5C6BC0","#F06292","#00796B","#C2185B"],heatmap:["#c6dafc","#5e97f6","#2a56c6"]}},_ie=e=>e*(1/3+1),H0e=_ie(9),q0e=_ie(10),W0e=_ie(12),l2="Segoe UI",G0e="wf_standard-font, helvetica, arial, sans-serif",Y0e="#252423",c2="#605E5C",K0e="transparent",Qin="#C8C6C4",cf="#118DFF",Jin="#12239E",Zin="#E66C37",esn="#6B007B",tsn="#E044A7",nsn="#744EC2",rsn="#D9B300",isn="#D64550",hje=cf,pje="#DEEFFF",X0e=[pje,hje],ssn=[pje,"#c7e4ff","#b0d9ff","#9aceff","#83c3ff","#6cb9ff","#55aeff","#3fa3ff","#2898ff",hje],osn={view:{stroke:K0e},background:K0e,font:l2,header:{titleFont:G0e,titleFontSize:W0e,titleColor:Y0e,labelFont:l2,labelFontSize:q0e,labelColor:c2},axis:{ticks:!1,grid:!1,domain:!1,labelColor:c2,labelFontSize:H0e,titleFont:G0e,titleColor:Y0e,titleFontSize:W0e,titleFontWeight:"normal"},axisQuantitative:{tickCount:3,grid:!0,gridColor:Qin,gridDash:[1,5],labelFlush:!1},axisBand:{tickExtra:!0},axisX:{labelPadding:5},axisY:{labelPadding:10},bar:{fill:cf},line:{stroke:cf,strokeWidth:3,strokeCap:"round",strokeJoin:"round"},text:{font:l2,fontSize:H0e,fill:c2},arc:{fill:cf},area:{fill:cf,line:!0,opacity:.6},path:{stroke:cf},rect:{fill:cf},point:{fill:cf,filled:!0,size:75},shape:{stroke:cf},symbol:{fill:cf,strokeWidth:1.5,size:50},legend:{titleFont:l2,titleFontWeight:"bold",titleColor:c2,labelFont:l2,labelFontSize:q0e,labelColor:c2,symbolType:"circle",symbolSize:75},range:{category:[cf,Jin,Zin,esn,tsn,nsn,rsn,isn],diverging:X0e,heatmap:X0e,ordinal:ssn}},LB='IBM Plex Sans,system-ui,-apple-system,BlinkMacSystemFont,".sfnstext-regular",sans-serif',asn='IBM Plex Sans Condensed, system-ui, -apple-system, BlinkMacSystemFont, ".SFNSText-Regular", sans-serif',FB=400,qD={textPrimary:{g90:"#f4f4f4",g100:"#f4f4f4",white:"#161616",g10:"#161616"},textSecondary:{g90:"#c6c6c6",g100:"#c6c6c6",white:"#525252",g10:"#525252"},layerAccent01:{white:"#e0e0e0",g10:"#e0e0e0",g90:"#525252",g100:"#393939"},gridBg:{white:"#ffffff",g10:"#ffffff",g90:"#161616",g100:"#161616"}},usn=["#8a3ffc","#33b1ff","#007d79","#ff7eb6","#fa4d56","#fff1f1","#6fdc8c","#4589ff","#d12771","#d2a106","#08bdba","#bae6ff","#ba4e00","#d4bbff"],lsn=["#6929c4","#1192e8","#005d5d","#9f1853","#fa4d56","#570408","#198038","#002d9c","#ee538b","#b28600","#009d9a","#012749","#8a3800","#a56eff"];function D5({theme:e,background:t}){const n=["white","g10"].includes(e)?"light":"dark",r=qD.gridBg[e],i=qD.textPrimary[e],s=qD.textSecondary[e],o=n==="dark"?usn:lsn,a=n==="dark"?"#d4bbff":"#6929c4";return{background:t,arc:{fill:a},area:{fill:a},path:{stroke:a},rect:{fill:a},shape:{stroke:a},symbol:{stroke:a},circle:{fill:a},view:{fill:r,stroke:r},group:{fill:r},title:{color:i,anchor:"start",dy:-15,fontSize:16,font:LB,fontWeight:600},axis:{labelColor:s,labelFontSize:12,labelFont:asn,labelFontWeight:FB,titleColor:i,titleFontWeight:600,titleFontSize:12,grid:!0,gridColor:qD.layerAccent01[e],labelAngle:0},axisX:{titlePadding:10},axisY:{titlePadding:2.5},style:{"guide-label":{font:LB,fill:s,fontWeight:FB},"guide-title":{font:LB,fill:s,fontWeight:FB}},range:{category:o,diverging:["#750e13","#a2191f","#da1e28","#fa4d56","#ff8389","#ffb3b8","#ffd7d9","#fff1f1","#e5f6ff","#bae6ff","#82cfff","#33b1ff","#1192e8","#0072c3","#00539a","#003a6d"],heatmap:["#f6f2ff","#e8daff","#d4bbff","#be95ff","#a56eff","#8a3ffc","#6929c4","#491d8b","#31135e","#1c0f30"]}}}const csn=D5({theme:"white",background:"#ffffff"}),fsn=D5({theme:"g10",background:"#f4f4f4"}),dsn=D5({theme:"g90",background:"#262626"}),hsn=D5({theme:"g100",background:"#161616"}),psn=Din.version,msn=Object.freeze(Object.defineProperty({__proto__:null,carbong10:fsn,carbong100:hsn,carbong90:dsn,carbonwhite:csn,dark:Pin,excel:Oin,fivethirtyeight:Lin,ggplot2:Fin,googlecharts:Xin,latimes:zin,powerbi:osn,quartz:Vin,urbaninstitute:Kin,version:psn,vox:Hin},Symbol.toStringTag,{value:"Module"}));function gsn(e,t,n,r){if(je(e))return`[${e.map(i=>t(mt(i)?i:Q0e(i,n))).join(", ")}]`;if(gt(e)){let i="";const{title:s,image:o,...a}=e;s&&(i+=`<h2>${t(s)}</h2>`),o&&(i+=`<img src="${new URL(t(o),r||location.href).href}">`);const u=Object.keys(a);if(u.length>0){i+="<table>";for(const l of u){let c=a[l];c!==void 0&&(gt(c)&&(c=Q0e(c,n)),i+=`<tr><td class="key">${t(l)}</td><td class="value">${t(c)}</td></tr>`)}i+="</table>"}return i||"{}"}return t(e)}function ysn(e){const t=[];return function(n,r){if(typeof r!="object"||r===null)return r;const i=t.indexOf(this)+1;return t.length=i,t.length>e?"[Object]":t.indexOf(r)>=0?"[Circular]":(t.push(r),r)}}function Q0e(e,t){return JSON.stringify(e,ysn(t))}var vsn=`#vg-tooltip-element {
  visibility: hidden;
  padding: 8px;
  position: fixed;
  z-index: 1000;
  font-family: sans-serif;
  font-size: 11px;
  border-radius: 3px;
  box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
  /* The default theme is the light theme. */
  background-color: rgba(255, 255, 255, 0.95);
  border: 1px solid #d9d9d9;
  color: black;
}
#vg-tooltip-element.visible {
  visibility: visible;
}
#vg-tooltip-element h2 {
  margin-top: 0;
  margin-bottom: 10px;
  font-size: 13px;
}
#vg-tooltip-element table {
  border-spacing: 0;
}
#vg-tooltip-element table tr {
  border: none;
}
#vg-tooltip-element table tr td {
  overflow: hidden;
  text-overflow: ellipsis;
  padding-top: 2px;
  padding-bottom: 2px;
}
#vg-tooltip-element table tr td.key {
  color: #808080;
  max-width: 150px;
  text-align: right;
  padding-right: 4px;
}
#vg-tooltip-element table tr td.value {
  display: block;
  max-width: 300px;
  max-height: 7em;
  text-align: left;
}
#vg-tooltip-element.dark-theme {
  background-color: rgba(32, 32, 32, 0.9);
  border: 1px solid #f5f5f5;
  color: white;
}
#vg-tooltip-element.dark-theme td.key {
  color: #bfbfbf;
}
`;const mje="vg-tooltip-element",bsn={offsetX:10,offsetY:10,id:mje,styleId:"vega-tooltip-style",theme:"light",disableDefaultStyle:!1,sanitize:_sn,maxDepth:2,formatTooltip:gsn,baseURL:""};function _sn(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;")}function wsn(e){if(!/^[A-Za-z]+[-:.\w]*$/.test(e))throw new Error("Invalid HTML ID");return vsn.toString().replace(mje,e)}function Esn(e,t,n,r){let i=e.clientX+n;i+t.width>window.innerWidth&&(i=+e.clientX-n-t.width);let s=e.clientY+r;return s+t.height>window.innerHeight&&(s=+e.clientY-r-t.height),{x:i,y:s}}class xsn{constructor(t){this.options={...bsn,...t};const n=this.options.id;if(this.el=null,this.call=this.tooltipHandler.bind(this),!this.options.disableDefaultStyle&&!document.getElementById(this.options.styleId)){const r=document.createElement("style");r.setAttribute("id",this.options.styleId),r.innerHTML=wsn(n);const i=document.head;i.childNodes.length>0?i.insertBefore(r,i.childNodes[0]):i.appendChild(r)}}tooltipHandler(t,n,r,i){if(this.el=document.getElementById(this.options.id),this.el||(this.el=document.createElement("div"),this.el.setAttribute("id",this.options.id),this.el.classList.add("vg-tooltip"),(document.fullscreenElement??document.body).appendChild(this.el)),i==null||i===""){this.el.classList.remove("visible",`${this.options.theme}-theme`);return}this.el.innerHTML=this.options.formatTooltip(i,this.options.sanitize,this.options.maxDepth,this.options.baseURL),this.el.classList.add("visible",`${this.options.theme}-theme`);const{x:s,y:o}=Esn(n,this.el.getBoundingClientRect(),this.options.offsetX,this.options.offsetY);this.el.style.top=`${o}px`,this.el.style.left=`${s}px`}}var jB={};function Ssn(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var BB,J0e;function Tsn(){return J0e||(J0e=1,BB=function(e){e.prototype[Symbol.iterator]=function*(){for(let t=this.head;t;t=t.next)yield t.value}}),BB}var Csn=yr;yr.Node=Ab;yr.create=yr;function yr(e){var t=this;if(t instanceof yr||(t=new yr),t.tail=null,t.head=null,t.length=0,e&&typeof e.forEach=="function")e.forEach(function(i){t.push(i)});else if(arguments.length>0)for(var n=0,r=arguments.length;n<r;n++)t.push(arguments[n]);return t}yr.prototype.removeNode=function(e){if(e.list!==this)throw new Error("removing node which does not belong to this list");var t=e.next,n=e.prev;return t&&(t.prev=n),n&&(n.next=t),e===this.head&&(this.head=t),e===this.tail&&(this.tail=n),e.list.length--,e.next=null,e.prev=null,e.list=null,t};yr.prototype.unshiftNode=function(e){if(e!==this.head){e.list&&e.list.removeNode(e);var t=this.head;e.list=this,e.next=t,t&&(t.prev=e),this.head=e,this.tail||(this.tail=e),this.length++}};yr.prototype.pushNode=function(e){if(e!==this.tail){e.list&&e.list.removeNode(e);var t=this.tail;e.list=this,e.prev=t,t&&(t.next=e),this.tail=e,this.head||(this.head=e),this.length++}};yr.prototype.push=function(){for(var e=0,t=arguments.length;e<t;e++)Isn(this,arguments[e]);return this.length};yr.prototype.unshift=function(){for(var e=0,t=arguments.length;e<t;e++)ksn(this,arguments[e]);return this.length};yr.prototype.pop=function(){if(this.tail){var e=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,e}};yr.prototype.shift=function(){if(this.head){var e=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,e}};yr.prototype.forEach=function(e,t){t=t||this;for(var n=this.head,r=0;n!==null;r++)e.call(t,n.value,r,this),n=n.next};yr.prototype.forEachReverse=function(e,t){t=t||this;for(var n=this.tail,r=this.length-1;n!==null;r--)e.call(t,n.value,r,this),n=n.prev};yr.prototype.get=function(e){for(var t=0,n=this.head;n!==null&&t<e;t++)n=n.next;if(t===e&&n!==null)return n.value};yr.prototype.getReverse=function(e){for(var t=0,n=this.tail;n!==null&&t<e;t++)n=n.prev;if(t===e&&n!==null)return n.value};yr.prototype.map=function(e,t){t=t||this;for(var n=new yr,r=this.head;r!==null;)n.push(e.call(t,r.value,this)),r=r.next;return n};yr.prototype.mapReverse=function(e,t){t=t||this;for(var n=new yr,r=this.tail;r!==null;)n.push(e.call(t,r.value,this)),r=r.prev;return n};yr.prototype.reduce=function(e,t){var n,r=this.head;if(arguments.length>1)n=t;else if(this.head)r=this.head.next,n=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=0;r!==null;i++)n=e(n,r.value,i),r=r.next;return n};yr.prototype.reduceReverse=function(e,t){var n,r=this.tail;if(arguments.length>1)n=t;else if(this.tail)r=this.tail.prev,n=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=this.length-1;r!==null;i--)n=e(n,r.value,i),r=r.prev;return n};yr.prototype.toArray=function(){for(var e=new Array(this.length),t=0,n=this.head;n!==null;t++)e[t]=n.value,n=n.next;return e};yr.prototype.toArrayReverse=function(){for(var e=new Array(this.length),t=0,n=this.tail;n!==null;t++)e[t]=n.value,n=n.prev;return e};yr.prototype.slice=function(e,t){t=t||this.length,t<0&&(t+=this.length),e=e||0,e<0&&(e+=this.length);var n=new yr;if(t<e||t<0)return n;e<0&&(e=0),t>this.length&&(t=this.length);for(var r=0,i=this.head;i!==null&&r<e;r++)i=i.next;for(;i!==null&&r<t;r++,i=i.next)n.push(i.value);return n};yr.prototype.sliceReverse=function(e,t){t=t||this.length,t<0&&(t+=this.length),e=e||0,e<0&&(e+=this.length);var n=new yr;if(t<e||t<0)return n;e<0&&(e=0),t>this.length&&(t=this.length);for(var r=this.length,i=this.tail;i!==null&&r>t;r--)i=i.prev;for(;i!==null&&r>e;r--,i=i.prev)n.push(i.value);return n};yr.prototype.splice=function(e,t,...n){e>this.length&&(e=this.length-1),e<0&&(e=this.length+e);for(var r=0,i=this.head;i!==null&&r<e;r++)i=i.next;for(var s=[],r=0;i&&r<t;r++)s.push(i.value),i=this.removeNode(i);i===null&&(i=this.tail),i!==this.head&&i!==this.tail&&(i=i.prev);for(var r=0;r<n.length;r++)i=Asn(this,i,n[r]);return s};yr.prototype.reverse=function(){for(var e=this.head,t=this.tail,n=e;n!==null;n=n.prev){var r=n.prev;n.prev=n.next,n.next=r}return this.head=t,this.tail=e,this};function Asn(e,t,n){var r=t===e.head?new Ab(n,null,t,e):new Ab(n,t,t.next,e);return r.next===null&&(e.tail=r),r.prev===null&&(e.head=r),e.length++,r}function Isn(e,t){e.tail=new Ab(t,e.tail,null,e),e.head||(e.head=e.tail),e.length++}function ksn(e,t){e.head=new Ab(t,null,e.head,e),e.tail||(e.tail=e.head),e.length++}function Ab(e,t,n,r){if(!(this instanceof Ab))return new Ab(e,t,n,r);this.list=r,this.value=e,t?(t.next=this,this.prev=t):this.prev=null,n?(n.prev=this,this.next=n):this.next=null}try{Tsn()(yr)}catch{}const Rsn=Csn,Jv=Symbol("max"),Mp=Symbol("length"),X_=Symbol("lengthCalculator"),sA=Symbol("allowStale"),b1=Symbol("maxAge"),Np=Symbol("dispose"),Z0e=Symbol("noDisposeOnSet"),Gs=Symbol("lruList"),df=Symbol("cache"),gje=Symbol("updateAgeOnGet"),UB=()=>1;class Nsn{constructor(t){if(typeof t=="number"&&(t={max:t}),t||(t={}),t.max&&(typeof t.max!="number"||t.max<0))throw new TypeError("max must be a non-negative number");this[Jv]=t.max||1/0;const n=t.length||UB;if(this[X_]=typeof n!="function"?UB:n,this[sA]=t.stale||!1,t.maxAge&&typeof t.maxAge!="number")throw new TypeError("maxAge must be a number");this[b1]=t.maxAge||0,this[Np]=t.dispose,this[Z0e]=t.noDisposeOnSet||!1,this[gje]=t.updateAgeOnGet||!1,this.reset()}set max(t){if(typeof t!="number"||t<0)throw new TypeError("max must be a non-negative number");this[Jv]=t||1/0,f2(this)}get max(){return this[Jv]}set allowStale(t){this[sA]=!!t}get allowStale(){return this[sA]}set maxAge(t){if(typeof t!="number")throw new TypeError("maxAge must be a non-negative number");this[b1]=t,f2(this)}get maxAge(){return this[b1]}set lengthCalculator(t){typeof t!="function"&&(t=UB),t!==this[X_]&&(this[X_]=t,this[Mp]=0,this[Gs].forEach(n=>{n.length=this[X_](n.value,n.key),this[Mp]+=n.length})),f2(this)}get lengthCalculator(){return this[X_]}get length(){return this[Mp]}get itemCount(){return this[Gs].length}rforEach(t,n){n=n||this;for(let r=this[Gs].tail;r!==null;){const i=r.prev;eye(this,t,r,n),r=i}}forEach(t,n){n=n||this;for(let r=this[Gs].head;r!==null;){const i=r.next;eye(this,t,r,n),r=i}}keys(){return this[Gs].toArray().map(t=>t.key)}values(){return this[Gs].toArray().map(t=>t.value)}reset(){this[Np]&&this[Gs]&&this[Gs].length&&this[Gs].forEach(t=>this[Np](t.key,t.value)),this[df]=new Map,this[Gs]=new Rsn,this[Mp]=0}dump(){return this[Gs].map(t=>ZM(this,t)?!1:{k:t.key,v:t.value,e:t.now+(t.maxAge||0)}).toArray().filter(t=>t)}dumpLru(){return this[Gs]}set(t,n,r){if(r=r||this[b1],r&&typeof r!="number")throw new TypeError("maxAge must be a number");const i=r?Date.now():0,s=this[X_](n,t);if(this[df].has(t)){if(s>this[Jv])return SE(this,this[df].get(t)),!1;const u=this[df].get(t).value;return this[Np]&&(this[Z0e]||this[Np](t,u.value)),u.now=i,u.maxAge=r,u.value=n,this[Mp]+=s-u.length,u.length=s,this.get(t),f2(this),!0}const o=new Dsn(t,n,s,i,r);return o.length>this[Jv]?(this[Np]&&this[Np](t,n),!1):(this[Mp]+=o.length,this[Gs].unshift(o),this[df].set(t,this[Gs].head),f2(this),!0)}has(t){if(!this[df].has(t))return!1;const n=this[df].get(t).value;return!ZM(this,n)}get(t){return zB(this,t,!0)}peek(t){return zB(this,t,!1)}pop(){const t=this[Gs].tail;return t?(SE(this,t),t.value):null}del(t){SE(this,this[df].get(t))}load(t){this.reset();const n=Date.now();for(let r=t.length-1;r>=0;r--){const i=t[r],s=i.e||0;if(s===0)this.set(i.k,i.v);else{const o=s-n;o>0&&this.set(i.k,i.v,o)}}}prune(){this[df].forEach((t,n)=>zB(this,n,!1))}}const zB=(e,t,n)=>{const r=e[df].get(t);if(r){const i=r.value;if(ZM(e,i)){if(SE(e,r),!e[sA])return}else n&&(e[gje]&&(r.value.now=Date.now()),e[Gs].unshiftNode(r));return i.value}},ZM=(e,t)=>{if(!t||!t.maxAge&&!e[b1])return!1;const n=Date.now()-t.now;return t.maxAge?n>t.maxAge:e[b1]&&n>e[b1]},f2=e=>{if(e[Mp]>e[Jv])for(let t=e[Gs].tail;e[Mp]>e[Jv]&&t!==null;){const n=t.prev;SE(e,t),t=n}},SE=(e,t)=>{if(t){const n=t.value;e[Np]&&e[Np](n.key,n.value),e[Mp]-=n.length,e[df].delete(n.key),e[Gs].removeNode(t)}};class Dsn{constructor(t,n,r,i,s){this.key=t,this.value=n,this.length=r,this.now=i,this.maxAge=s||0}}const eye=(e,t,n,r)=>{let i=n.value;ZM(e,i)&&(SE(e,n),e[sA]||(i=void 0)),i&&t.call(r,i.value,i.key,e)};var Psn=Nsn;const Osn=Object.freeze({loose:!0}),$sn=Object.freeze({}),Msn=e=>e?typeof e!="object"?Osn:e:$sn;var wie=Msn,Nq={exports:{}};const Lsn="2.0.0",yje=256,Fsn=Number.MAX_SAFE_INTEGER||9007199254740991,jsn=16,Bsn=yje-6,Usn=["major","premajor","minor","preminor","patch","prepatch","prerelease"];var Eie={MAX_LENGTH:yje,MAX_SAFE_COMPONENT_LENGTH:jsn,MAX_SAFE_BUILD_LENGTH:Bsn,MAX_SAFE_INTEGER:Fsn,RELEASE_TYPES:Usn,SEMVER_SPEC_VERSION:Lsn,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2};const zsn=typeof process=="object"&&jB&&jB.NODE_DEBUG&&/\bsemver\b/i.test(jB.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};var P5=zsn;(function(e,t){const{MAX_SAFE_COMPONENT_LENGTH:n,MAX_SAFE_BUILD_LENGTH:r,MAX_LENGTH:i}=Eie,s=P5;t=e.exports={};const o=t.re=[],a=t.safeRe=[],u=t.src=[],l=t.t={};let c=0;const f="[a-zA-Z0-9-]",d=[["\\s",1],["\\d",i],[f,r]],h=m=>{for(const[g,y]of d)m=m.split(`${g}*`).join(`${g}{0,${y}}`).split(`${g}+`).join(`${g}{1,${y}}`);return m},p=(m,g,y)=>{const v=h(g),b=c++;s(m,b,g),l[m]=b,u[b]=g,o[b]=new RegExp(g,y?"g":void 0),a[b]=new RegExp(v,y?"g":void 0)};p("NUMERICIDENTIFIER","0|[1-9]\\d*"),p("NUMERICIDENTIFIERLOOSE","\\d+"),p("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${f}*`),p("MAINVERSION",`(${u[l.NUMERICIDENTIFIER]})\\.(${u[l.NUMERICIDENTIFIER]})\\.(${u[l.NUMERICIDENTIFIER]})`),p("MAINVERSIONLOOSE",`(${u[l.NUMERICIDENTIFIERLOOSE]})\\.(${u[l.NUMERICIDENTIFIERLOOSE]})\\.(${u[l.NUMERICIDENTIFIERLOOSE]})`),p("PRERELEASEIDENTIFIER",`(?:${u[l.NUMERICIDENTIFIER]}|${u[l.NONNUMERICIDENTIFIER]})`),p("PRERELEASEIDENTIFIERLOOSE",`(?:${u[l.NUMERICIDENTIFIERLOOSE]}|${u[l.NONNUMERICIDENTIFIER]})`),p("PRERELEASE",`(?:-(${u[l.PRERELEASEIDENTIFIER]}(?:\\.${u[l.PRERELEASEIDENTIFIER]})*))`),p("PRERELEASELOOSE",`(?:-?(${u[l.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${u[l.PRERELEASEIDENTIFIERLOOSE]})*))`),p("BUILDIDENTIFIER",`${f}+`),p("BUILD",`(?:\\+(${u[l.BUILDIDENTIFIER]}(?:\\.${u[l.BUILDIDENTIFIER]})*))`),p("FULLPLAIN",`v?${u[l.MAINVERSION]}${u[l.PRERELEASE]}?${u[l.BUILD]}?`),p("FULL",`^${u[l.FULLPLAIN]}$`),p("LOOSEPLAIN",`[v=\\s]*${u[l.MAINVERSIONLOOSE]}${u[l.PRERELEASELOOSE]}?${u[l.BUILD]}?`),p("LOOSE",`^${u[l.LOOSEPLAIN]}$`),p("GTLT","((?:<|>)?=?)"),p("XRANGEIDENTIFIERLOOSE",`${u[l.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),p("XRANGEIDENTIFIER",`${u[l.NUMERICIDENTIFIER]}|x|X|\\*`),p("XRANGEPLAIN",`[v=\\s]*(${u[l.XRANGEIDENTIFIER]})(?:\\.(${u[l.XRANGEIDENTIFIER]})(?:\\.(${u[l.XRANGEIDENTIFIER]})(?:${u[l.PRERELEASE]})?${u[l.BUILD]}?)?)?`),p("XRANGEPLAINLOOSE",`[v=\\s]*(${u[l.XRANGEIDENTIFIERLOOSE]})(?:\\.(${u[l.XRANGEIDENTIFIERLOOSE]})(?:\\.(${u[l.XRANGEIDENTIFIERLOOSE]})(?:${u[l.PRERELEASELOOSE]})?${u[l.BUILD]}?)?)?`),p("XRANGE",`^${u[l.GTLT]}\\s*${u[l.XRANGEPLAIN]}$`),p("XRANGELOOSE",`^${u[l.GTLT]}\\s*${u[l.XRANGEPLAINLOOSE]}$`),p("COERCEPLAIN",`(^|[^\\d])(\\d{1,${n}})(?:\\.(\\d{1,${n}}))?(?:\\.(\\d{1,${n}}))?`),p("COERCE",`${u[l.COERCEPLAIN]}(?:$|[^\\d])`),p("COERCEFULL",u[l.COERCEPLAIN]+`(?:${u[l.PRERELEASE]})?(?:${u[l.BUILD]})?(?:$|[^\\d])`),p("COERCERTL",u[l.COERCE],!0),p("COERCERTLFULL",u[l.COERCEFULL],!0),p("LONETILDE","(?:~>?)"),p("TILDETRIM",`(\\s*)${u[l.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",p("TILDE",`^${u[l.LONETILDE]}${u[l.XRANGEPLAIN]}$`),p("TILDELOOSE",`^${u[l.LONETILDE]}${u[l.XRANGEPLAINLOOSE]}$`),p("LONECARET","(?:\\^)"),p("CARETTRIM",`(\\s*)${u[l.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",p("CARET",`^${u[l.LONECARET]}${u[l.XRANGEPLAIN]}$`),p("CARETLOOSE",`^${u[l.LONECARET]}${u[l.XRANGEPLAINLOOSE]}$`),p("COMPARATORLOOSE",`^${u[l.GTLT]}\\s*(${u[l.LOOSEPLAIN]})$|^$`),p("COMPARATOR",`^${u[l.GTLT]}\\s*(${u[l.FULLPLAIN]})$|^$`),p("COMPARATORTRIM",`(\\s*)${u[l.GTLT]}\\s*(${u[l.LOOSEPLAIN]}|${u[l.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",p("HYPHENRANGE",`^\\s*(${u[l.XRANGEPLAIN]})\\s+-\\s+(${u[l.XRANGEPLAIN]})\\s*$`),p("HYPHENRANGELOOSE",`^\\s*(${u[l.XRANGEPLAINLOOSE]})\\s+-\\s+(${u[l.XRANGEPLAINLOOSE]})\\s*$`),p("STAR","(<|>)?=?\\s*\\*"),p("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),p("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})(Nq,Nq.exports);var xie=Nq.exports;const tye=/^[0-9]+$/,vje=(e,t)=>{const n=tye.test(e),r=tye.test(t);return n&&r&&(e=+e,t=+t),e===t?0:n&&!r?-1:r&&!n?1:e<t?-1:1},Vsn=(e,t)=>vje(t,e);var Hsn={compareIdentifiers:vje,rcompareIdentifiers:Vsn};const WD=P5,{MAX_LENGTH:nye,MAX_SAFE_INTEGER:GD}=Eie,{safeRe:rye,t:iye}=xie,qsn=wie,{compareIdentifiers:Q_}=Hsn;let Wsn=class Id{constructor(t,n){if(n=qsn(n),t instanceof Id){if(t.loose===!!n.loose&&t.includePrerelease===!!n.includePrerelease)return t;t=t.version}else if(typeof t!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof t}".`);if(t.length>nye)throw new TypeError(`version is longer than ${nye} characters`);WD("SemVer",t,n),this.options=n,this.loose=!!n.loose,this.includePrerelease=!!n.includePrerelease;const r=t.trim().match(n.loose?rye[iye.LOOSE]:rye[iye.FULL]);if(!r)throw new TypeError(`Invalid Version: ${t}`);if(this.raw=t,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>GD||this.major<0)throw new TypeError("Invalid major version");if(this.minor>GD||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>GD||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map(i=>{if(/^[0-9]+$/.test(i)){const s=+i;if(s>=0&&s<GD)return s}return i}):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(t){if(WD("SemVer.compare",this.version,this.options,t),!(t instanceof Id)){if(typeof t=="string"&&t===this.version)return 0;t=new Id(t,this.options)}return t.version===this.version?0:this.compareMain(t)||this.comparePre(t)}compareMain(t){return t instanceof Id||(t=new Id(t,this.options)),Q_(this.major,t.major)||Q_(this.minor,t.minor)||Q_(this.patch,t.patch)}comparePre(t){if(t instanceof Id||(t=new Id(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;let n=0;do{const r=this.prerelease[n],i=t.prerelease[n];if(WD("prerelease compare",n,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return Q_(r,i)}while(++n)}compareBuild(t){t instanceof Id||(t=new Id(t,this.options));let n=0;do{const r=this.build[n],i=t.build[n];if(WD("prerelease compare",n,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return Q_(r,i)}while(++n)}inc(t,n,r){switch(t){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",n,r);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",n,r);break;case"prepatch":this.prerelease.length=0,this.inc("patch",n,r),this.inc("pre",n,r);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",n,r),this.inc("pre",n,r);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const i=Number(r)?1:0;if(!n&&r===!1)throw new Error("invalid increment argument: identifier is empty");if(this.prerelease.length===0)this.prerelease=[i];else{let s=this.prerelease.length;for(;--s>=0;)typeof this.prerelease[s]=="number"&&(this.prerelease[s]++,s=-2);if(s===-1){if(n===this.prerelease.join(".")&&r===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(i)}}if(n){let s=[n,i];r===!1&&(s=[n]),Q_(this.prerelease[0],n)===0?isNaN(this.prerelease[1])&&(this.prerelease=s):this.prerelease=s}break}default:throw new Error(`invalid increment argument: ${t}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};var Sie=Wsn;const sye=Sie,Gsn=(e,t,n)=>new sye(e,n).compare(new sye(t,n));var uT=Gsn;const Ysn=uT,Ksn=(e,t,n)=>Ysn(e,t,n)===0;var Xsn=Ksn;const Qsn=uT,Jsn=(e,t,n)=>Qsn(e,t,n)!==0;var Zsn=Jsn;const eon=uT,ton=(e,t,n)=>eon(e,t,n)>0;var non=ton;const ron=uT,ion=(e,t,n)=>ron(e,t,n)>=0;var son=ion;const oon=uT,aon=(e,t,n)=>oon(e,t,n)<0;var uon=aon;const lon=uT,con=(e,t,n)=>lon(e,t,n)<=0;var fon=con;const don=Xsn,hon=Zsn,pon=non,mon=son,gon=uon,yon=fon,von=(e,t,n,r)=>{switch(t){case"===":return typeof e=="object"&&(e=e.version),typeof n=="object"&&(n=n.version),e===n;case"!==":return typeof e=="object"&&(e=e.version),typeof n=="object"&&(n=n.version),e!==n;case"":case"=":case"==":return don(e,n,r);case"!=":return hon(e,n,r);case">":return pon(e,n,r);case">=":return mon(e,n,r);case"<":return gon(e,n,r);case"<=":return yon(e,n,r);default:throw new TypeError(`Invalid operator: ${t}`)}};var bon=von,VB,oye;function _on(){if(oye)return VB;oye=1;const e=Symbol("SemVer ANY");class t{static get ANY(){return e}constructor(c,f){if(f=n(f),c instanceof t){if(c.loose===!!f.loose)return c;c=c.value}c=c.trim().split(/\s+/).join(" "),o("comparator",c,f),this.options=f,this.loose=!!f.loose,this.parse(c),this.semver===e?this.value="":this.value=this.operator+this.semver.version,o("comp",this)}parse(c){const f=this.options.loose?r[i.COMPARATORLOOSE]:r[i.COMPARATOR],d=c.match(f);if(!d)throw new TypeError(`Invalid comparator: ${c}`);this.operator=d[1]!==void 0?d[1]:"",this.operator==="="&&(this.operator=""),d[2]?this.semver=new a(d[2],this.options.loose):this.semver=e}toString(){return this.value}test(c){if(o("Comparator.test",c,this.options.loose),this.semver===e||c===e)return!0;if(typeof c=="string")try{c=new a(c,this.options)}catch{return!1}return s(c,this.operator,this.semver,this.options)}intersects(c,f){if(!(c instanceof t))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new u(c.value,f).test(this.value):c.operator===""?c.value===""?!0:new u(this.value,f).test(c.semver):(f=n(f),f.includePrerelease&&(this.value==="<0.0.0-0"||c.value==="<0.0.0-0")||!f.includePrerelease&&(this.value.startsWith("<0.0.0")||c.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&c.operator.startsWith(">")||this.operator.startsWith("<")&&c.operator.startsWith("<")||this.semver.version===c.semver.version&&this.operator.includes("=")&&c.operator.includes("=")||s(this.semver,"<",c.semver,f)&&this.operator.startsWith(">")&&c.operator.startsWith("<")||s(this.semver,">",c.semver,f)&&this.operator.startsWith("<")&&c.operator.startsWith(">")))}}VB=t;const n=wie,{safeRe:r,t:i}=xie,s=bon,o=P5,a=Sie,u=bje();return VB}var HB,aye;function bje(){if(aye)return HB;aye=1;class e{constructor($,F){if(F=r(F),$ instanceof e)return $.loose===!!F.loose&&$.includePrerelease===!!F.includePrerelease?$:new e($.raw,F);if($ instanceof i)return this.raw=$.value,this.set=[[$]],this.format(),this;if(this.options=F,this.loose=!!F.loose,this.includePrerelease=!!F.includePrerelease,this.raw=$.trim().split(/\s+/).join(" "),this.set=this.raw.split("||").map(M=>this.parseRange(M.trim())).filter(M=>M.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const M=this.set[0];if(this.set=this.set.filter(B=>!p(B[0])),this.set.length===0)this.set=[M];else if(this.set.length>1){for(const B of this.set)if(B.length===1&&m(B[0])){this.set=[B];break}}}this.format()}format(){return this.range=this.set.map($=>$.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange($){const M=((this.options.includePrerelease&&d)|(this.options.loose&&h))+":"+$,B=n.get(M);if(B)return B;const U=this.options.loose,H=U?a[u.HYPHENRANGELOOSE]:a[u.HYPHENRANGE];$=$.replace(H,N(this.options.includePrerelease)),s("hyphen replace",$),$=$.replace(a[u.COMPARATORTRIM],l),s("comparator trim",$),$=$.replace(a[u.TILDETRIM],c),s("tilde trim",$),$=$.replace(a[u.CARETTRIM],f),s("caret trim",$);let D=$.split(" ").map(q=>y(q,this.options)).join(" ").split(/\s+/).map(q=>k(q,this.options));U&&(D=D.filter(q=>(s("loose invalid filter",q,this.options),!!q.match(a[u.COMPARATORLOOSE])))),s("range list",D);const z=new Map,W=D.map(q=>new i(q,this.options));for(const q of W){if(p(q))return[q];z.set(q.value,q)}z.size>1&&z.has("")&&z.delete("");const j=[...z.values()];return n.set(M,j),j}intersects($,F){if(!($ instanceof e))throw new TypeError("a Range is required");return this.set.some(M=>g(M,F)&&$.set.some(B=>g(B,F)&&M.every(U=>B.every(H=>U.intersects(H,F)))))}test($){if(!$)return!1;if(typeof $=="string")try{$=new o($,this.options)}catch{return!1}for(let F=0;F<this.set.length;F++)if(O(this.set[F],$,this.options))return!0;return!1}}HB=e;const t=Psn,n=new t({max:1e3}),r=wie,i=_on(),s=P5,o=Sie,{safeRe:a,t:u,comparatorTrimReplace:l,tildeTrimReplace:c,caretTrimReplace:f}=xie,{FLAG_INCLUDE_PRERELEASE:d,FLAG_LOOSE:h}=Eie,p=P=>P.value==="<0.0.0-0",m=P=>P.value==="",g=(P,$)=>{let F=!0;const M=P.slice();let B=M.pop();for(;F&&M.length;)F=M.every(U=>B.intersects(U,$)),B=M.pop();return F},y=(P,$)=>(s("comp",P,$),P=E(P,$),s("caret",P),P=b(P,$),s("tildes",P),P=S(P,$),s("xrange",P),P=A(P,$),s("stars",P),P),v=P=>!P||P.toLowerCase()==="x"||P==="*",b=(P,$)=>P.trim().split(/\s+/).map(F=>w(F,$)).join(" "),w=(P,$)=>{const F=$.loose?a[u.TILDELOOSE]:a[u.TILDE];return P.replace(F,(M,B,U,H,D)=>{s("tilde",P,M,B,U,H,D);let z;return v(B)?z="":v(U)?z=`>=${B}.0.0 <${+B+1}.0.0-0`:v(H)?z=`>=${B}.${U}.0 <${B}.${+U+1}.0-0`:D?(s("replaceTilde pr",D),z=`>=${B}.${U}.${H}-${D} <${B}.${+U+1}.0-0`):z=`>=${B}.${U}.${H} <${B}.${+U+1}.0-0`,s("tilde return",z),z})},E=(P,$)=>P.trim().split(/\s+/).map(F=>T(F,$)).join(" "),T=(P,$)=>{s("caret",P,$);const F=$.loose?a[u.CARETLOOSE]:a[u.CARET],M=$.includePrerelease?"-0":"";return P.replace(F,(B,U,H,D,z)=>{s("caret",P,B,U,H,D,z);let W;return v(U)?W="":v(H)?W=`>=${U}.0.0${M} <${+U+1}.0.0-0`:v(D)?U==="0"?W=`>=${U}.${H}.0${M} <${U}.${+H+1}.0-0`:W=`>=${U}.${H}.0${M} <${+U+1}.0.0-0`:z?(s("replaceCaret pr",z),U==="0"?H==="0"?W=`>=${U}.${H}.${D}-${z} <${U}.${H}.${+D+1}-0`:W=`>=${U}.${H}.${D}-${z} <${U}.${+H+1}.0-0`:W=`>=${U}.${H}.${D}-${z} <${+U+1}.0.0-0`):(s("no pr"),U==="0"?H==="0"?W=`>=${U}.${H}.${D}${M} <${U}.${H}.${+D+1}-0`:W=`>=${U}.${H}.${D}${M} <${U}.${+H+1}.0-0`:W=`>=${U}.${H}.${D} <${+U+1}.0.0-0`),s("caret return",W),W})},S=(P,$)=>(s("replaceXRanges",P,$),P.split(/\s+/).map(F=>C(F,$)).join(" ")),C=(P,$)=>{P=P.trim();const F=$.loose?a[u.XRANGELOOSE]:a[u.XRANGE];return P.replace(F,(M,B,U,H,D,z)=>{s("xRange",P,M,B,U,H,D,z);const W=v(U),j=W||v(H),q=j||v(D),G=q;return B==="="&&G&&(B=""),z=$.includePrerelease?"-0":"",W?B===">"||B==="<"?M="<0.0.0-0":M="*":B&&G?(j&&(H=0),D=0,B===">"?(B=">=",j?(U=+U+1,H=0,D=0):(H=+H+1,D=0)):B==="<="&&(B="<",j?U=+U+1:H=+H+1),B==="<"&&(z="-0"),M=`${B+U}.${H}.${D}${z}`):j?M=`>=${U}.0.0${z} <${+U+1}.0.0-0`:q&&(M=`>=${U}.${H}.0${z} <${U}.${+H+1}.0-0`),s("xRange return",M),M})},A=(P,$)=>(s("replaceStars",P,$),P.trim().replace(a[u.STAR],"")),k=(P,$)=>(s("replaceGTE0",P,$),P.trim().replace(a[$.includePrerelease?u.GTE0PRE:u.GTE0],"")),N=P=>($,F,M,B,U,H,D,z,W,j,q,G,ne)=>(v(M)?F="":v(B)?F=`>=${M}.0.0${P?"-0":""}`:v(U)?F=`>=${M}.${B}.0${P?"-0":""}`:H?F=`>=${F}`:F=`>=${F}${P?"-0":""}`,v(W)?z="":v(j)?z=`<${+W+1}.0.0-0`:v(q)?z=`<${W}.${+j+1}.0-0`:G?z=`<=${W}.${j}.${q}-${G}`:P?z=`<${W}.${j}.${+q+1}-0`:z=`<=${z}`,`${F} ${z}`.trim()),O=(P,$,F)=>{for(let M=0;M<P.length;M++)if(!P[M].test($))return!1;if($.prerelease.length&&!F.includePrerelease){for(let M=0;M<P.length;M++)if(s(P[M].semver),P[M].semver!==i.ANY&&P[M].semver.prerelease.length>0){const B=P[M].semver;if(B.major===$.major&&B.minor===$.minor&&B.patch===$.patch)return!0}return!1}return!0};return HB}const won=bje(),Eon=(e,t,n)=>{try{t=new won(t,n)}catch{return!1}return t.test(e)};var xon=Eon,_je=Ssn(xon);function Son(e,t,n){const r=e.open(t),i=1e4,s=250,{origin:o}=new URL(t);let a=~~(i/s);function u(c){c.source===r&&(a=0,e.removeEventListener("message",u,!1))}e.addEventListener("message",u,!1);function l(){a<=0||(r.postMessage(n,o),setTimeout(l,s),a-=1)}setTimeout(l,s)}var Ton=`.vega-embed {
  position: relative;
  display: inline-block;
  box-sizing: border-box;
}
.vega-embed.has-actions {
  padding-right: 38px;
}
.vega-embed details:not([open]) > :not(summary) {
  display: none !important;
}
.vega-embed summary {
  list-style: none;
  position: absolute;
  top: 0;
  right: 0;
  padding: 6px;
  z-index: 1000;
  background: white;
  box-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1);
  color: #1b1e23;
  border: 1px solid #aaa;
  border-radius: 999px;
  opacity: 0.2;
  transition: opacity 0.4s ease-in;
  cursor: pointer;
  line-height: 0px;
}
.vega-embed summary::-webkit-details-marker {
  display: none;
}
.vega-embed summary:active {
  box-shadow: #aaa 0px 0px 0px 1px inset;
}
.vega-embed summary svg {
  width: 14px;
  height: 14px;
}
.vega-embed details[open] summary {
  opacity: 0.7;
}
.vega-embed:hover summary, .vega-embed:focus-within summary {
  opacity: 1 !important;
  transition: opacity 0.2s ease;
}
.vega-embed .vega-actions {
  position: absolute;
  z-index: 1001;
  top: 35px;
  right: -9px;
  display: flex;
  flex-direction: column;
  padding-bottom: 8px;
  padding-top: 8px;
  border-radius: 4px;
  box-shadow: 0 2px 8px 0 rgba(0, 0, 0, 0.2);
  border: 1px solid #d9d9d9;
  background: white;
  animation-duration: 0.15s;
  animation-name: scale-in;
  animation-timing-function: cubic-bezier(0.2, 0, 0.13, 1.5);
  text-align: left;
}
.vega-embed .vega-actions a {
  padding: 8px 16px;
  font-family: sans-serif;
  font-size: 14px;
  font-weight: 600;
  white-space: nowrap;
  color: #434a56;
  text-decoration: none;
}
.vega-embed .vega-actions a:hover, .vega-embed .vega-actions a:focus {
  background-color: #f7f7f9;
  color: black;
}
.vega-embed .vega-actions::before, .vega-embed .vega-actions::after {
  content: "";
  display: inline-block;
  position: absolute;
}
.vega-embed .vega-actions::before {
  left: auto;
  right: 14px;
  top: -16px;
  border: 8px solid rgba(0, 0, 0, 0);
  border-bottom-color: #d9d9d9;
}
.vega-embed .vega-actions::after {
  left: auto;
  right: 15px;
  top: -14px;
  border: 7px solid rgba(0, 0, 0, 0);
  border-bottom-color: #fff;
}
.vega-embed .chart-wrapper.fit-x {
  width: 100%;
}
.vega-embed .chart-wrapper.fit-y {
  height: 100%;
}

.vega-embed-wrapper {
  max-width: 100%;
  overflow: auto;
  padding-right: 14px;
}

@keyframes scale-in {
  from {
    opacity: 0;
    transform: scale(0.6);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}
`;function wje(e,...t){for(const n of t)Con(e,n);return e}function Con(e,t){for(const n of Object.keys(t))HS(e,n,t[n],!0)}const pf=lKt;let JI=pin;const YD=typeof window<"u"?window:void 0;var gye;JI===void 0&&((gye=YD==null?void 0:YD.vl)!=null&&gye.compile)&&(JI=YD.vl);const Aon={export:{svg:!0,png:!0},source:!0,compiled:!0,editor:!0},Ion={CLICK_TO_VIEW_ACTIONS:"Click to view actions",COMPILED_ACTION:"View Compiled Vega",EDITOR_ACTION:"Open in Vega Editor",PNG_ACTION:"Save as PNG",SOURCE_ACTION:"View Source",SVG_ACTION:"Save as SVG"},iC={vega:"Vega","vega-lite":"Vega-Lite"},eL={vega:pf.version,"vega-lite":JI?JI.version:"not available"},kon={vega:e=>e,"vega-lite":(e,t)=>JI.compile(e,{config:t}).spec},Ron=`
<svg viewBox="0 0 16 16" fill="currentColor" stroke="none" stroke-width="1" stroke-linecap="round" stroke-linejoin="round">
  <circle r="2" cy="8" cx="2"></circle>
  <circle r="2" cy="8" cx="8"></circle>
  <circle r="2" cy="8" cx="14"></circle>
</svg>`,Non="chart-wrapper";function Don(e){return typeof e=="function"}function uye(e,t,n,r){const i=`<html><head>${t}</head><body><pre><code class="json">`,s=`</code></pre>${n}</body></html>`,o=window.open("");o.document.write(i+e+s),o.document.title=`${iC[r]} JSON Source`}function Pon(e,t){if(e.$schema){const n=dje(e.$schema);t&&t!==n.library&&console.warn(`The given visualization spec is written in ${iC[n.library]}, but mode argument sets ${iC[t]??t}.`);const r=n.library;return _je(eL[r],`^${n.version.slice(1)}`)||console.warn(`The input spec uses ${iC[r]} ${n.version}, but the current version of ${iC[r]} is v${eL[r]}.`),r}return"mark"in e||"encoding"in e||"layer"in e||"hconcat"in e||"vconcat"in e||"facet"in e||"repeat"in e?"vega-lite":"marks"in e||"signals"in e||"scales"in e||"axes"in e?"vega":t??"vega"}function Eje(e){return!!(e&&"load"in e)}function lye(e){return Eje(e)?e:pf.loader(e)}function Oon(e){var n;const t=((n=e.usermeta)==null?void 0:n.embedOptions)??{};return mt(t.defaultStyle)&&(t.defaultStyle=!1),t}async function $on(e,t,n={}){let r,i;mt(t)?(i=lye(n.loader),r=JSON.parse(await i.load(t))):r=t;const s=Oon(r),o=s.loader;(!i||o)&&(i=lye(n.loader??o));const a=await cye(s,i),u=await cye(n,i),l={...wje(u,a),config:VS(u.config??{},a.config??{})};return await Lon(e,r,l,i)}async function cye(e,t){const n=mt(e.config)?JSON.parse(await t.load(e.config)):e.config??{},r=mt(e.patch)?JSON.parse(await t.load(e.patch)):e.patch;return{...e,...r?{patch:r}:{},...n?{config:n}:{}}}function Mon(e){const t=e.getRootNode?e.getRootNode():document;return t instanceof ShadowRoot?{root:t,rootContainer:t}:{root:document,rootContainer:document.head??document.body}}async function Lon(e,t,n={},r){const i=n.theme?VS(msn[n.theme],n.config??{}):n.config,s=Gy(n.actions)?n.actions:wje({},Aon,n.actions??{}),o={...Ion,...n.i18n},a=n.renderer??"canvas",u=n.logLevel??pf.Warn,l=n.downloadFileName??"visualization",c=typeof e=="string"?document.querySelector(e):e;if(!c)throw new Error(`${e} does not exist`);if(n.defaultStyle!==!1){const E="vega-embed-style",{root:T,rootContainer:S}=Mon(c);if(!T.getElementById(E)){const C=document.createElement("style");C.id=E,C.innerHTML=n.defaultStyle===void 0||n.defaultStyle===!0?Ton.toString():n.defaultStyle,S.appendChild(C)}}const f=Pon(t,n.mode);let d=kon[f](t,i);if(f==="vega-lite"&&d.$schema){const E=dje(d.$schema);_je(eL.vega,`^${E.version.slice(1)}`)||console.warn(`The compiled spec uses Vega ${E.version}, but current version is v${eL.vega}.`)}c.classList.add("vega-embed"),s&&c.classList.add("has-actions"),c.innerHTML="";let h=c;if(s){const E=document.createElement("div");E.classList.add(Non),c.appendChild(E),h=E}const p=n.patch;if(p&&(d=p instanceof Function?p(d):Y4(d,p,!0,!1).newDocument),n.formatLocale&&pf.formatLocale(n.formatLocale),n.timeFormatLocale&&pf.timeFormatLocale(n.timeFormatLocale),n.expressionFunctions)for(const E in n.expressionFunctions){const T=n.expressionFunctions[E];"fn"in T?pf.expressionFunction(E,T.fn,T.visitor):T instanceof Function&&pf.expressionFunction(E,T)}const{ast:m}=n,g=pf.parse(d,f==="vega-lite"?{}:i,{ast:m}),y=new(n.viewClass||pf.View)(g,{loader:r,logLevel:u,renderer:a,...m?{expr:pf.expressionInterpreter??n.expr??bKt}:{}});if(y.addSignalListener("autosize",(E,T)=>{const{type:S}=T;S=="fit-x"?(h.classList.add("fit-x"),h.classList.remove("fit-y")):S=="fit-y"?(h.classList.remove("fit-x"),h.classList.add("fit-y")):S=="fit"?h.classList.add("fit-x","fit-y"):h.classList.remove("fit-x","fit-y")}),n.tooltip!==!1){const{loader:E,tooltip:T}=n,S=E&&!Eje(E)?E==null?void 0:E.baseURL:void 0,C=Don(T)?T:new xsn({baseURL:S,...T===!0?{}:T}).call;y.tooltip(C)}let{hover:v}=n;if(v===void 0&&(v=f==="vega"),v){const{hoverSet:E,updateSet:T}=typeof v=="boolean"?{}:v;y.hover(E,T)}n&&(n.width!=null&&y.width(n.width),n.height!=null&&y.height(n.height),n.padding!=null&&y.padding(n.padding)),await y.initialize(h,n.bind).runAsync();let b;if(s!==!1){let E=c;if(n.defaultStyle!==!1||n.forceActionsMenu){const S=document.createElement("details");S.title=o.CLICK_TO_VIEW_ACTIONS,c.append(S),E=S;const C=document.createElement("summary");C.innerHTML=Ron,S.append(C),b=A=>{S.contains(A.target)||S.removeAttribute("open")},document.addEventListener("click",b)}const T=document.createElement("div");if(E.append(T),T.classList.add("vega-actions"),s===!0||s.export!==!1){for(const S of["svg","png"])if(s===!0||s.export===!0||s.export[S]){const C=o[`${S.toUpperCase()}_ACTION`],A=document.createElement("a"),k=gt(n.scaleFactor)?n.scaleFactor[S]:n.scaleFactor;A.text=C,A.href="#",A.target="_blank",A.download=`${l}.${S}`,A.addEventListener("mousedown",async function(N){N.preventDefault();const O=await y.toImageURL(S,k);this.href=O}),T.append(A)}}if(s===!0||s.source!==!1){const S=document.createElement("a");S.text=o.SOURCE_ACTION,S.href="#",S.addEventListener("click",function(C){uye(q9(t),n.sourceHeader??"",n.sourceFooter??"",f),C.preventDefault()}),T.append(S)}if(f==="vega-lite"&&(s===!0||s.compiled!==!1)){const S=document.createElement("a");S.text=o.COMPILED_ACTION,S.href="#",S.addEventListener("click",function(C){uye(q9(d),n.sourceHeader??"",n.sourceFooter??"","vega"),C.preventDefault()}),T.append(S)}if(s===!0||s.editor!==!1){const S=n.editorUrl??"https://vega.github.io/editor/",C=document.createElement("a");C.text=o.EDITOR_ACTION,C.href="#",C.addEventListener("click",function(A){Son(window,S,{config:i,mode:f,renderer:a,spec:q9(t)}),A.preventDefault()}),T.append(C)}}function w(){b&&document.removeEventListener("click",b),y.finalize()}return{view:y,spec:t,vgSpec:d,finalize:w,embedOptions:n}}function Fon(e){return!!e&&{}.toString.call(e)==="[object Function]"}function jon(e,t,n){n&&(Fon(n)?n(e.data(t)):e.change(t,pf.changeset().remove(()=>!0).insert(n)))}function Bon(e,t){Object.keys(t).forEach(n=>{jon(e,n,t[n])})}function xje(e){const t=new Set;return e.forEach(n=>{Object.keys(n).forEach(r=>{t.add(r)})}),t}const Sje=()=>{};function qB(e,t){const n=Object.keys(t);return n.forEach(r=>{try{e.addSignalListener(r,t[r])}catch(i){console.warn("Cannot add invalid signal listener.",i)}}),n.length>0}function Uon(e,t){if(e===t)return!1;const n={width:!1,height:!1,isExpensive:!1},r=xje([e,t]);return r.has("width")&&(!("width"in e)||!("width"in t)||e.width!==t.width)&&("width"in e&&typeof e.width=="number"?n.width=e.width:n.isExpensive=!0),r.has("height")&&(!("height"in e)||!("height"in t)||e.height!==t.height)&&("height"in e&&typeof e.height=="number"?n.height=e.height:n.isExpensive=!0),r.delete("width"),r.delete("height"),[...r].some(i=>!(i in e)||!(i in t)||!gP(e[i],t[i]))&&(n.isExpensive=!0),n.width!==!1||n.height!==!1||n.isExpensive?n:!1}function fye(e,t){const n=Object.keys(t);return n.forEach(r=>{try{e.removeSignalListener(r,t[r])}catch(i){console.warn("Cannot remove invalid signal listener.",i)}}),n.length>0}function WB(e){const{spec:t,width:n,height:r}=e;return typeof n<"u"&&typeof r<"u"?{...t,width:n,height:r}:typeof n<"u"?{...t,width:n}:typeof r<"u"?{...t,height:r}:t}function sC(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class Tje extends _r.PureComponent{constructor(){super(...arguments),sC(this,"containerRef",_r.createRef()),sC(this,"resultPromise",void 0),sC(this,"handleError",t=>{const{onError:n=Sje}=this.props;n(t,this.containerRef.current),console.warn(t)}),sC(this,"modifyView",t=>{this.resultPromise&&this.resultPromise.then(n=>(n&&t(n.view),!0)).catch(this.handleError)})}componentDidMount(){this.createView()}componentDidUpdate(t){const n=xje([this.props,t]);if(n.delete("className"),n.delete("signalListeners"),n.delete("spec"),n.delete("style"),n.delete("width"),n.delete("height"),Array.from(n).some(r=>this.props[r]!==t[r]))this.clearView(),this.createView();else{const r=Uon(WB(this.props),WB(t)),{signalListeners:i}=this.props,{signalListeners:s}=t;if(r)if(r.isExpensive)this.clearView(),this.createView();else{const o=!rH(i,s);this.modifyView(a=>{r.width!==!1&&a.width(r.width),r.height!==!1&&a.height(r.height),o&&(s&&fye(a,s),i&&qB(a,i)),a.run()})}else rH(i,s)||this.modifyView(o=>{s&&fye(o,s),i&&qB(o,i),o.run()})}}componentWillUnmount(){this.clearView()}createView(){const{spec:t,onNewView:n,signalListeners:r={},width:i,height:s,...o}=this.props;if(this.containerRef.current){const a=WB(this.props);this.resultPromise=$on(this.containerRef.current,a,o).then(u=>{if(u){const{view:l}=u;qB(l,r)&&l.run()}return u}).catch(this.handleError),n&&this.modifyView(n)}}clearView(){return this.resultPromise&&this.resultPromise.then(t=>{t&&t.finalize()}).catch(this.handleError),this.resultPromise=void 0,this}render(){const{className:t,style:n}=this.props;return _r.createElement("div",{ref:this.containerRef,className:t,style:n})}}sC(Tje,"propTypes",{className:rae.string,onError:rae.func});function Dq(){return Dq=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Dq.apply(this,arguments)}function Pq(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const zon={};class Cje extends _r.PureComponent{constructor(){super(...arguments),Pq(this,"vegaEmbed",_r.createRef()),Pq(this,"handleNewView",t=>{this.update();const{onNewView:n=Sje}=this.props;n(t)})}componentDidMount(){this.update()}componentDidUpdate(t){rH(this.props.data,t.data)||this.update()}update(){const{data:t}=this.props;this.vegaEmbed.current&&t&&Object.keys(t).length>0&&this.vegaEmbed.current.modifyView(n=>{Bon(n,t),n.resize().run()})}render(){const{data:t,...n}=this.props;return _r.createElement(Tje,Dq({ref:this.vegaEmbed},n,{onNewView:this.handleNewView}))}}Pq(Cje,"defaultProps",{data:zon});function Oq(){return Oq=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Oq.apply(this,arguments)}function $q(e){return _r.createElement(Cje,Oq({},e,{mode:"vega-lite"}))}function Von({response:e,participantData:t,trialId:n,trialConfig:r}){const[i,{toggle:s}]=wL(!0),[o,a]=E1(),u=I.useMemo(()=>e.type==="metadata"?[]:t.map(d=>Object.entries(d.answers).filter(([h])=>h.slice(0,h.lastIndexOf("_"))===n)).map(d=>d.map(([,h])=>h.answer)).flat(),[t,e.type,n]),l=I.useMemo(()=>{var d;return e.type==="metadata"||(d=r.correctAnswer)==null?void 0:d.find(h=>h.id===e.id)},[e.id,e.type,r.correctAnswer]),c=I.useMemo(()=>{const f={height:"container",width:"container"};if(e.type==="shortText"||e.type==="longText")return{};if(e.type==="metadata"){const h=t.map(m=>Object.entries(m.answers).filter(([g])=>g.slice(0,g.lastIndexOf("_"))===n)).map(m=>m.map(([g,y])=>(y.endTime-y.startTime)/1e3)).flat();return{...f,data:{values:h},mark:"bar",encoding:{x:{field:"data",bin:!0,type:"quantitative",title:"Time (s)"},y:{aggregate:"count",type:"quantitative",title:"Count"}}}}const d={params:[{name:"correctAnswer",value:l==null?void 0:l.answer},{name:"variable",value:e.id}],transform:[{calculate:"datum[variable] === correctAnswer ? 'correct' : 'incorrect'",as:"result"},{calculate:"if(datum.result === 'correct', 0, if(datum.result === 'incorrect', 1, 2))",as:"order"}],color:{field:"result",type:"nominal",scale:{domain:["correct","incorrect"],range:["#69DB7C","#ADB5BD"]}},order:{field:"order"}};if(e.type==="numerical"||e.type==="slider"||e.type==="likert"){let h,p;return e.type==="numerical"&&(h=e.min,p=e.max),e.type==="slider"&&(h=Math.min(...e.options.map(g=>g.value)),p=Math.max(...e.options.map(g=>g.value))),e.type==="likert"&&(h=1,p=e.numItems),{...f,data:{values:u},mark:"bar",params:l!==void 0?d.params:void 0,transform:[{bin:e.type==="likert"?{step:1}:{maxbins:10},field:e.id,as:"bins"},...l!==void 0?d.transform:[]],encoding:{x:{field:"bins",scale:h!==void 0&&p!==void 0?{domain:[h,p]}:void 0,type:"quantitative",title:"Answer"},x2:{field:"bins_end"},y:{aggregate:"count",type:"quantitative",title:"Count",stack:!0},color:l!==void 0?d.color:void 0,order:l!==void 0?d.order:void 0}}}if(e.type==="radio"||e.type==="dropdown"||e.type==="checkbox")return{...f,data:{values:u},mark:"bar",params:l!==void 0?d.params:void 0,transform:l!==void 0?d.transform:void 0,encoding:{x:{field:e.id,type:"ordinal",title:"Answer"},y:{aggregate:"count",type:"quantitative",title:"Count"},color:l!==void 0?d.color:void 0}}},[t,u,e.id,e.max,e.min,e.numItems,e.options,e.type,n,l]);return _.jsxs(Pb,{p:"lg",withBorder:!0,ref:o,children:[_.jsxs(Nt,{direction:"row",justify:"space-between",onClick:s,children:[_.jsxs(Nt,{align:"center",children:[e.type==="metadata"&&_.jsx(dQe,{size:20}),e.type==="numerical"&&_.jsx(wQe,{size:20}),(e.type==="shortText"||e.type==="longText")&&_.jsx(aQe,{size:20}),e.type==="likert"&&_.jsx(mQe,{size:20}),e.type==="dropdown"&&_.jsx(IQe,{size:20}),e.type==="slider"&&_.jsx(nQe,{size:20}),e.type==="radio"&&_.jsx(SQe,{size:20}),e.type==="checkbox"&&_.jsx(kQe,{size:20}),e.type==="iframe"&&_.jsx(vQe,{size:20}),_.jsx(ui,{order:5,ml:4,children:e.id})]}),_.jsx(fQe,{style:{rotate:i?"180deg":"none",transition:"rotate 200ms"}})]}),_.jsxs(xL,{in:i,mah:400,children:[_.jsx(pe,{style:{top:0,position:"sticky",backgroundColor:"white",zIndex:2},py:"md",children:_.jsx(LE,{})}),_.jsxs(pY,{cols:2,h:360,children:[_.jsx(vm,{mih:200,children:e.type!=="metadata"&&e.type!=="shortText"&&e.type!=="longText"&&e.type!=="iframe"?_.jsx($q,{spec:c,actions:!1,height:270,width:a.width/2-60-(l===void 0?0:60),padding:0,style:{justifySelf:"center"},renderer:"svg"}):_.jsxs(Nt,{direction:"column",gap:"xs",style:{overflowX:"clip"},children:[e.type==="metadata"&&_.jsx(gC,{block:!0,children:`${JSON.stringify(r,null,2)}`}),e.type!=="metadata"&&_.jsxs(_.Fragment,{children:[_.jsx(Xe,{fw:700,children:"Response Values: "}),u.map((f,d)=>_.jsx(Nt,{align:"center",gap:"xs",children:_.jsx(Xe,{children:f[e.id]})},d))]})]})}),_.jsx(vm,{mih:200,children:e.type==="metadata"?_.jsx($q,{spec:c,actions:!1,width:a.width/2-60,height:270,padding:0,style:{justifySelf:"center"}}):_.jsxs(_.Fragment,{children:[_.jsx(Xe,{fw:700,children:"Response Specification: "}),_.jsx(gC,{block:!0,children:JSON.stringify(e,null,2)}),_.jsx("br",{}),l&&_.jsxs(_.Fragment,{children:[_.jsx(Xe,{fw:700,children:"Correct Answer: "}),_.jsx(gC,{block:!0,children:JSON.stringify(l,null,2)})]})]})})]})]})]})}function Hon({participantData:e,studyConfig:t,trialId:n}){const r=n&&n!=="end"&&mNe(t.components[n],t),i=I.useMemo(()=>[{id:"Config and Timing",type:"metadata"},...r?r.response:[]],[r]);return r?_.jsx(Nt,{w:"100%",direction:"column",gap:"xs",children:i.map(s=>_.jsx(Von,{response:s,participantData:e,trialId:n,trialConfig:r},s.id))}):_.jsx(Nt,{justify:"center",align:"center",pt:"lg",pb:"md",w:"100%",children:_.jsx(Xe,{children:n!=="end"?"No trial selected":"The end component has no data."})})}function qon({studyConfig:e,inprogress:t,completed:n,rejected:r}){const[i,s]=I.useState([...n]),o=I.useCallback(l=>{const c=[];l.includes("completed")&&c.push(...n),l.includes("inprogress")&&c.push(...t),l.includes("rejected")&&c.push(...r),s(c)},[n,t,r]),a=I.useMemo(()=>{let l=E0(e.sequence);return l=sK(l,"root"),l.components.push("end"),l},[e.sequence]),{trialId:u}=wm();return _.jsxs(Pb,{shadow:"sm",p:"md",withBorder:!0,children:[_.jsx(Nt,{direction:"row",justify:"space-between",children:_.jsx(Sl.Group,{defaultValue:["completed"],onChange:o,mb:"xs",mt:8,ml:"xs",children:_.jsxs(ls,{children:[_.jsx(Sl,{value:"completed",label:"Completed"}),_.jsx(Sl,{value:"inprogress",label:"In Progress"}),_.jsx(Sl,{value:"rejected",label:"Rejected"})]})})}),_.jsx(LE,{my:"xs"}),i.length===0?_.jsx(Nt,{justify:"center",align:"center",pt:"lg",pb:"md",children:_.jsx(Xe,{children:"No data available."})}):_.jsxs(Nt,{direction:"row",children:[_.jsx(pe,{w:340,children:_.jsx(V$,{configSequence:a,participantSequence:a,fullSequence:a,participantView:!1,studyConfig:e,analysisNavigation:!0})}),_.jsx(LE,{orientation:"vertical",mx:"md"}),_.jsx(Hon,{participantData:i,studyConfig:e,trialId:u})]})]})}function Won({globalConfig:e}){const{studyId:t}=wm(),[n,r]=I.useState([]),[i,s]=I.useState(void 0),[o,a]=I.useState(!1),{storageEngine:u}=Cs(),l=Gh(),{tab:c}=wm(),{user:f}=n_(),d=I.useCallback(async()=>{if(a(!0),t){const g=await E4(t,e);if(!g||!u)return;await u.initializeStudyDb(t,g);const y=await u.getAllParticipantsData();r(y),s(g),a(!1)}},[e,u,t]);I.useEffect(()=>{d()},[e,u,t,d]);const[h,p,m]=I.useMemo(()=>{const g=n.filter(b=>!b.rejected&&b.completed),y=n.filter(b=>!b.rejected&&!b.completed),v=n.filter(b=>b.rejected);return[g,y,v]},[n]);return _.jsxs(_.Fragment,{children:[_.jsx(KC,{studyIds:e.configsList}),_.jsx(pi.Main,{children:_.jsxs(Oc,{fluid:!0,style:{height:"100%",position:"relative"},children:[_.jsx(Ll,{visible:o}),_.jsxs(Nt,{direction:"row",align:"center",children:[_.jsx(ui,{order:5,children:t}),_.jsx(cOe,{completed:h.length,inProgress:p.length,rejected:m.length})]}),_.jsx(Nl,{h:"xs"}),_.jsxs(ns,{variant:"outline",value:c,onChange:g=>l(`/analysis/stats/${t}/${g}`),style:{height:"100%"},children:[_.jsxs(ns.List,{children:[_.jsx(ns.Tab,{value:"table",leftSection:_.jsx(RQe,{size:16}),children:"Table View"}),_.jsx(ns.Tab,{value:"stats",leftSection:_.jsx(lQe,{size:16}),children:"Trial Stats"}),_.jsx(ai,{label:"Coming soon",position:"bottom",children:_.jsx(ns.Tab,{value:"replay",leftSection:_.jsx(xQe,{size:16}),disabled:!0,children:"Participant Replay"})}),_.jsx(ns.Tab,{value:"manage",leftSection:_.jsx(Owe,{size:16}),disabled:!f.isAdmin,children:"Manage"})]}),_.jsx(ns.Panel,{value:"table",pt:"xs",children:i&&_.jsx(t4t,{completed:h,inProgress:p,rejected:m,studyConfig:i,refresh:d})}),_.jsx(ns.Panel,{value:"stats",pt:"xs",children:i&&_.jsx(qon,{studyConfig:i,completed:h,inprogress:p,rejected:m})}),_.jsx(ns.Panel,{value:"replay",pt:"xs",children:"Replay Tab Content"}),_.jsx(ns.Panel,{value:"manage",pt:"xs",children:t&&f.isAdmin?_.jsx(l4t,{studyId:t,refresh:d}):_.jsx(Oc,{mt:20,children:_.jsx(Zx,{title:"Unauthorized Access",variant:"light",color:"red",icon:_.jsx(Dwe,{}),children:"You are not authorized to manage the data for this study."})})})]})]})})]})}function dye({children:e,paramToCheck:t,paramCallback:n}){const{user:r,verifyAdminStatus:i,logout:s}=n_(),{storageEngine:o}=Cs(),[a,u]=I.useState(!1),l=wm();return I.useEffect(()=>{(async()=>{if(a===!1)if(t&&n&&l[t]){const f=await n(l[t]);f&&u(f)}else u(!0);if(a)try{r&&await i(r)||s()}catch(f){s(),console.warn(f)}})()},[r.isAdmin,a]),r.determiningStatus||!o?_.jsx(Ll,{visible:r.determiningStatus||!(o!=null&&o.getEngine())}):a&&!r.isAdmin&&!r.determiningStatus?_.jsx(kY,{to:"/login"}):_.jsx(_.Fragment,{children:e})}async function Aje(e,t){if(e instanceof vc){t(!0);const n=new Vp,r=Q$();try{await qPt(r,n,oDe)}catch(i){oM({title:"Error",message:i.message,color:"red"})}finally{t(!1)}return r.currentUser}return null}function Gon(){const{user:e}=n_(),[t,n]=I.useState(!1),{storageEngine:r}=Cs();return I.useEffect(()=>{!e.determiningStatus&&!e.isAdmin&&e.adminVerification&&oM({title:"Unauthorized",message:"You are not authorized to use this application.",color:"red"})},[e.adminVerification]),!e.determiningStatus&&e.isAdmin?_.jsx(kY,{to:"/"}):_.jsx(Oc,{children:_.jsx(Lb,{padding:"lg",children:_.jsxs(Nt,{align:"center",direction:"column",justify:"center",children:[_.jsx(Dy,{maw:200,mt:50,mb:100,src:`${Vu}revisitAssets/revisitLogoSquare.svg`,alt:"Revisit Logo"}),_.jsxs(_.Fragment,{children:[_.jsx(Xe,{mb:20,children:"To access admin settings, please sign in using your Google account."}),_.jsx(fn,{onClick:()=>Aje(r,n),leftSection:_.jsx(NQe,{}),variant:"filled",children:"Sign In With Google"})]}),_.jsx(Ll,{visible:t})]})})})}var Ije={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(to,function(){var n=1e3,r=6e4,i=36e5,s="millisecond",o="second",a="minute",u="hour",l="day",c="week",f="month",d="quarter",h="year",p="date",m="Invalid Date",g=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,y=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,v={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function($){var F=["th","st","nd","rd"],M=$%100;return"["+$+(F[(M-20)%10]||F[M]||F[0])+"]"}},b=function($,F,M){var B=String($);return!B||B.length>=F?$:""+Array(F+1-B.length).join(M)+$},w={s:b,z:function($){var F=-$.utcOffset(),M=Math.abs(F),B=Math.floor(M/60),U=M%60;return(F<=0?"+":"-")+b(B,2,"0")+":"+b(U,2,"0")},m:function $(F,M){if(F.date()<M.date())return-$(M,F);var B=12*(M.year()-F.year())+(M.month()-F.month()),U=F.clone().add(B,f),H=M-U<0,D=F.clone().add(B+(H?-1:1),f);return+(-(B+(M-U)/(H?U-D:D-U))||0)},a:function($){return $<0?Math.ceil($)||0:Math.floor($)},p:function($){return{M:f,y:h,w:c,d:l,D:p,h:u,m:a,s:o,ms:s,Q:d}[$]||String($||"").toLowerCase().replace(/s$/,"")},u:function($){return $===void 0}},E="en",T={};T[E]=v;var S="$isDayjsObject",C=function($){return $ instanceof O||!(!$||!$[S])},A=function $(F,M,B){var U;if(!F)return E;if(typeof F=="string"){var H=F.toLowerCase();T[H]&&(U=H),M&&(T[H]=M,U=H);var D=F.split("-");if(!U&&D.length>1)return $(D[0])}else{var z=F.name;T[z]=F,U=z}return!B&&U&&(E=U),U||!B&&E},k=function($,F){if(C($))return $.clone();var M=typeof F=="object"?F:{};return M.date=$,M.args=arguments,new O(M)},N=w;N.l=A,N.i=C,N.w=function($,F){return k($,{locale:F.$L,utc:F.$u,x:F.$x,$offset:F.$offset})};var O=function(){function $(M){this.$L=A(M.locale,null,!0),this.parse(M),this.$x=this.$x||M.x||{},this[S]=!0}var F=$.prototype;return F.parse=function(M){this.$d=function(B){var U=B.date,H=B.utc;if(U===null)return new Date(NaN);if(N.u(U))return new Date;if(U instanceof Date)return new Date(U);if(typeof U=="string"&&!/Z$/i.test(U)){var D=U.match(g);if(D){var z=D[2]-1||0,W=(D[7]||"0").substring(0,3);return H?new Date(Date.UTC(D[1],z,D[3]||1,D[4]||0,D[5]||0,D[6]||0,W)):new Date(D[1],z,D[3]||1,D[4]||0,D[5]||0,D[6]||0,W)}}return new Date(U)}(M),this.init()},F.init=function(){var M=this.$d;this.$y=M.getFullYear(),this.$M=M.getMonth(),this.$D=M.getDate(),this.$W=M.getDay(),this.$H=M.getHours(),this.$m=M.getMinutes(),this.$s=M.getSeconds(),this.$ms=M.getMilliseconds()},F.$utils=function(){return N},F.isValid=function(){return this.$d.toString()!==m},F.isSame=function(M,B){var U=k(M);return this.startOf(B)<=U&&U<=this.endOf(B)},F.isAfter=function(M,B){return k(M)<this.startOf(B)},F.isBefore=function(M,B){return this.endOf(B)<k(M)},F.$g=function(M,B,U){return N.u(M)?this[B]:this.set(U,M)},F.unix=function(){return Math.floor(this.valueOf()/1e3)},F.valueOf=function(){return this.$d.getTime()},F.startOf=function(M,B){var U=this,H=!!N.u(B)||B,D=N.p(M),z=function(he,ve){var Ie=N.w(U.$u?Date.UTC(U.$y,ve,he):new Date(U.$y,ve,he),U);return H?Ie:Ie.endOf(l)},W=function(he,ve){return N.w(U.toDate()[he].apply(U.toDate("s"),(H?[0,0,0,0]:[23,59,59,999]).slice(ve)),U)},j=this.$W,q=this.$M,G=this.$D,ne="set"+(this.$u?"UTC":"");switch(D){case h:return H?z(1,0):z(31,11);case f:return H?z(1,q):z(0,q+1);case c:var ce=this.$locale().weekStart||0,de=(j<ce?j+7:j)-ce;return z(H?G-de:G+(6-de),q);case l:case p:return W(ne+"Hours",0);case u:return W(ne+"Minutes",1);case a:return W(ne+"Seconds",2);case o:return W(ne+"Milliseconds",3);default:return this.clone()}},F.endOf=function(M){return this.startOf(M,!1)},F.$set=function(M,B){var U,H=N.p(M),D="set"+(this.$u?"UTC":""),z=(U={},U[l]=D+"Date",U[p]=D+"Date",U[f]=D+"Month",U[h]=D+"FullYear",U[u]=D+"Hours",U[a]=D+"Minutes",U[o]=D+"Seconds",U[s]=D+"Milliseconds",U)[H],W=H===l?this.$D+(B-this.$W):B;if(H===f||H===h){var j=this.clone().set(p,1);j.$d[z](W),j.init(),this.$d=j.set(p,Math.min(this.$D,j.daysInMonth())).$d}else z&&this.$d[z](W);return this.init(),this},F.set=function(M,B){return this.clone().$set(M,B)},F.get=function(M){return this[N.p(M)]()},F.add=function(M,B){var U,H=this;M=Number(M);var D=N.p(B),z=function(q){var G=k(H);return N.w(G.date(G.date()+Math.round(q*M)),H)};if(D===f)return this.set(f,this.$M+M);if(D===h)return this.set(h,this.$y+M);if(D===l)return z(1);if(D===c)return z(7);var W=(U={},U[a]=r,U[u]=i,U[o]=n,U)[D]||1,j=this.$d.getTime()+M*W;return N.w(j,this)},F.subtract=function(M,B){return this.add(-1*M,B)},F.format=function(M){var B=this,U=this.$locale();if(!this.isValid())return U.invalidDate||m;var H=M||"YYYY-MM-DDTHH:mm:ssZ",D=N.z(this),z=this.$H,W=this.$m,j=this.$M,q=U.weekdays,G=U.months,ne=U.meridiem,ce=function(ve,Ie,be,Ke){return ve&&(ve[Ie]||ve(B,H))||be[Ie].slice(0,Ke)},de=function(ve){return N.s(z%12||12,ve,"0")},he=ne||function(ve,Ie,be){var Ke=ve<12?"AM":"PM";return be?Ke.toLowerCase():Ke};return H.replace(y,function(ve,Ie){return Ie||function(be){switch(be){case"YY":return String(B.$y).slice(-2);case"YYYY":return N.s(B.$y,4,"0");case"M":return j+1;case"MM":return N.s(j+1,2,"0");case"MMM":return ce(U.monthsShort,j,G,3);case"MMMM":return ce(G,j);case"D":return B.$D;case"DD":return N.s(B.$D,2,"0");case"d":return String(B.$W);case"dd":return ce(U.weekdaysMin,B.$W,q,2);case"ddd":return ce(U.weekdaysShort,B.$W,q,3);case"dddd":return q[B.$W];case"H":return String(z);case"HH":return N.s(z,2,"0");case"h":return de(1);case"hh":return de(2);case"a":return he(z,W,!0);case"A":return he(z,W,!1);case"m":return String(W);case"mm":return N.s(W,2,"0");case"s":return String(B.$s);case"ss":return N.s(B.$s,2,"0");case"SSS":return N.s(B.$ms,3,"0");case"Z":return D}return null}(ve)||D.replace(":","")})},F.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},F.diff=function(M,B,U){var H,D=this,z=N.p(B),W=k(M),j=(W.utcOffset()-this.utcOffset())*r,q=this-W,G=function(){return N.m(D,W)};switch(z){case h:H=G()/12;break;case f:H=G();break;case d:H=G()/3;break;case c:H=(q-j)/6048e5;break;case l:H=(q-j)/864e5;break;case u:H=q/i;break;case a:H=q/r;break;case o:H=q/n;break;default:H=q}return U?H:N.a(H)},F.daysInMonth=function(){return this.endOf(f).$D},F.$locale=function(){return T[this.$L]},F.locale=function(M,B){if(!M)return this.$L;var U=this.clone(),H=A(M,B,!0);return H&&(U.$L=H),U},F.clone=function(){return N.w(this.$d,this)},F.toDate=function(){return new Date(this.valueOf())},F.toJSON=function(){return this.isValid()?this.toISOString():null},F.toISOString=function(){return this.$d.toISOString()},F.toString=function(){return this.$d.toUTCString()},$}(),P=O.prototype;return k.prototype=P,[["$ms",s],["$s",o],["$m",a],["$H",u],["$W",l],["$M",f],["$y",h],["$D",p]].forEach(function($){P[$[1]]=function(F){return this.$g(F,$[0],$[1])}}),k.extend=function($,F){return $.$i||($(F,O,k),$.$i=!0),k},k.locale=A,k.isDayjs=C,k.unix=function($){return k(1e3*$)},k.en=T[E],k.Ls=T,k.p={},k})})(Ije);var Yon=Ije.exports;const Tt=Kl(Yon);function Kon({type:e,date:t,locale:n,format:r,labelSeparator:i}){const s=o=>Tt(o).locale(n).format(r);return e==="default"?t===null?"":s(t):e==="multiple"?t.map(s).join(", "):e==="range"&&Array.isArray(t)?t[0]&&t[1]?`${s(t[0])} ${i} ${s(t[1])}`:t[0]?`${s(t[0])} ${i} `:"":""}function Xon({formatter:e,...t}){return(e||Kon)(t)}function Qon({direction:e,levelIndex:t,rowIndex:n,cellIndex:r,size:i}){switch(e){case"up":return t===0&&n===0?null:n===0?{levelIndex:t-1,rowIndex:r<=i[t-1][i[t-1].length-1]-1?i[t-1].length-1:i[t-1].length-2,cellIndex:r}:{levelIndex:t,rowIndex:n-1,cellIndex:r};case"down":return n===i[t].length-1?{levelIndex:t+1,rowIndex:0,cellIndex:r}:n===i[t].length-2&&r>=i[t][i[t].length-1]?{levelIndex:t+1,rowIndex:0,cellIndex:r}:{levelIndex:t,rowIndex:n+1,cellIndex:r};case"left":return t===0&&n===0&&r===0?null:n===0&&r===0?{levelIndex:t-1,rowIndex:i[t-1].length-1,cellIndex:i[t-1][i[t-1].length-1]-1}:r===0?{levelIndex:t,rowIndex:n-1,cellIndex:i[t][n-1]-1}:{levelIndex:t,rowIndex:n,cellIndex:r-1};case"right":return n===i[t].length-1&&r===i[t][n]-1?{levelIndex:t+1,rowIndex:0,cellIndex:0}:r===i[t][n]-1?{levelIndex:t,rowIndex:n+1,cellIndex:0}:{levelIndex:t,rowIndex:n,cellIndex:r+1};default:return{levelIndex:t,rowIndex:n,cellIndex:r}}}function kje({controlsRef:e,direction:t,levelIndex:n,rowIndex:r,cellIndex:i,size:s}){var u,l,c;const o=Qon({direction:t,size:s,rowIndex:r,cellIndex:i,levelIndex:n});if(!o)return;const a=(c=(l=(u=e.current)==null?void 0:u[o.levelIndex])==null?void 0:l[o.rowIndex])==null?void 0:c[o.cellIndex];a&&(a.disabled||a.getAttribute("data-hidden")||a.getAttribute("data-outside")?kje({controlsRef:e,direction:t,levelIndex:o.levelIndex,cellIndex:o.cellIndex,rowIndex:o.rowIndex,size:s}):a.focus())}function Jon(e){switch(e){case"ArrowDown":return"down";case"ArrowUp":return"up";case"ArrowRight":return"right";case"ArrowLeft":return"left";default:return null}}function Zon(e){var t;return(t=e.current)==null?void 0:t.map(n=>n.map(r=>r.length))}function Tie({controlsRef:e,levelIndex:t,rowIndex:n,cellIndex:r,event:i}){const s=Jon(i.key);if(s){i.preventDefault();const o=Zon(e);kje({controlsRef:e,direction:s,levelIndex:t,rowIndex:n,cellIndex:r,size:o})}}var Rje={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(to,function(){var n={year:0,month:1,day:2,hour:3,minute:4,second:5},r={};return function(i,s,o){var a,u=function(d,h,p){p===void 0&&(p={});var m=new Date(d),g=function(y,v){v===void 0&&(v={});var b=v.timeZoneName||"short",w=y+"|"+b,E=r[w];return E||(E=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:y,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",timeZoneName:b}),r[w]=E),E}(h,p);return g.formatToParts(m)},l=function(d,h){for(var p=u(d,h),m=[],g=0;g<p.length;g+=1){var y=p[g],v=y.type,b=y.value,w=n[v];w>=0&&(m[w]=parseInt(b,10))}var E=m[3],T=E===24?0:E,S=m[0]+"-"+m[1]+"-"+m[2]+" "+T+":"+m[4]+":"+m[5]+":000",C=+d;return(o.utc(S).valueOf()-(C-=C%1e3))/6e4},c=s.prototype;c.tz=function(d,h){d===void 0&&(d=a);var p=this.utcOffset(),m=this.toDate(),g=m.toLocaleString("en-US",{timeZone:d}),y=Math.round((m-new Date(g))/1e3/60),v=o(g,{locale:this.$L}).$set("millisecond",this.$ms).utcOffset(15*-Math.round(m.getTimezoneOffset()/15)-y,!0);if(h){var b=v.utcOffset();v=v.add(p-b,"minute")}return v.$x.$timezone=d,v},c.offsetName=function(d){var h=this.$x.$timezone||o.tz.guess(),p=u(this.valueOf(),h,{timeZoneName:d}).find(function(m){return m.type.toLowerCase()==="timezonename"});return p&&p.value};var f=c.startOf;c.startOf=function(d,h){if(!this.$x||!this.$x.$timezone)return f.call(this,d,h);var p=o(this.format("YYYY-MM-DD HH:mm:ss:SSS"),{locale:this.$L});return f.call(p,d,h).tz(this.$x.$timezone,!0)},o.tz=function(d,h,p){var m=p&&h,g=p||h||a,y=l(+o(),g);if(typeof d!="string")return o(d).tz(g);var v=function(T,S,C){var A=T-60*S*1e3,k=l(A,C);if(S===k)return[A,S];var N=l(A-=60*(k-S)*1e3,C);return k===N?[A,k]:[T-60*Math.min(k,N)*1e3,Math.max(k,N)]}(o.utc(d,m).valueOf(),y,g),b=v[0],w=v[1],E=o(b).utcOffset(w);return E.$x.$timezone=g,E},o.tz.guess=function(){return Intl.DateTimeFormat().resolvedOptions().timeZone},o.tz.setDefault=function(d){a=d}}})})(Rje);var ean=Rje.exports;const tan=Kl(ean);var Nje={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(to,function(){var n="minute",r=/[+-]\d\d(?::?\d\d)?/g,i=/([+-]|\d\d)/g;return function(s,o,a){var u=o.prototype;a.utc=function(m){var g={date:m,utc:!0,args:arguments};return new o(g)},u.utc=function(m){var g=a(this.toDate(),{locale:this.$L,utc:!0});return m?g.add(this.utcOffset(),n):g},u.local=function(){return a(this.toDate(),{locale:this.$L,utc:!1})};var l=u.parse;u.parse=function(m){m.utc&&(this.$u=!0),this.$utils().u(m.$offset)||(this.$offset=m.$offset),l.call(this,m)};var c=u.init;u.init=function(){if(this.$u){var m=this.$d;this.$y=m.getUTCFullYear(),this.$M=m.getUTCMonth(),this.$D=m.getUTCDate(),this.$W=m.getUTCDay(),this.$H=m.getUTCHours(),this.$m=m.getUTCMinutes(),this.$s=m.getUTCSeconds(),this.$ms=m.getUTCMilliseconds()}else c.call(this)};var f=u.utcOffset;u.utcOffset=function(m,g){var y=this.$utils().u;if(y(m))return this.$u?0:y(this.$offset)?f.call(this):this.$offset;if(typeof m=="string"&&(m=function(E){E===void 0&&(E="");var T=E.match(r);if(!T)return null;var S=(""+T[0]).match(i)||["-",0,0],C=S[0],A=60*+S[1]+ +S[2];return A===0?0:C==="+"?A:-A}(m),m===null))return this;var v=Math.abs(m)<=16?60*m:m,b=this;if(g)return b.$offset=v,b.$u=m===0,b;if(m!==0){var w=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(b=this.local().add(v+w,n)).$offset=v,b.$x.$localOffset=w}else b=this.utc();return b};var d=u.format;u.format=function(m){var g=m||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return d.call(this,g)},u.valueOf=function(){var m=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*m},u.isUTC=function(){return!!this.$u},u.toISOString=function(){return this.toDate().toISOString()},u.toString=function(){return this.toDate().toUTCString()};var h=u.toDate;u.toDate=function(m){return m==="s"&&this.$offset?a(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():h.call(this)};var p=u.diff;u.diff=function(m,g,y){if(m&&this.$u===m.$u)return p.call(this,m,g,y);var v=this.local(),b=a(m).local();return p.call(v,b,g,y)}}})})(Nje);var nan=Nje.exports;const ran=Kl(nan);Tt.extend(ran);Tt.extend(tan);function ian(e,t){return t?Tt(e).tz(t).utcOffset()+e.getTimezoneOffset():0}const hye=(e,t,n)=>{if(!e)return null;if(!t)return e;let r=ian(e,t);return n==="remove"&&(r*=-1),Tt(e).add(r,"minutes").toDate()};function M0(e,t,n,r){return r||!t?t:Array.isArray(t)?t.map(i=>hye(i,n,e)):hye(t,n,e)}function san({minDate:e,maxDate:t,timezone:n}){const r=M0("add",new Date,n);return!e&&!t?r:e&&Tt(r).isBefore(e)?e:t&&Tt(r).isAfter(t)?t:r}const oan={locale:"en",timezone:null,firstDayOfWeek:1,weekendDays:[0,6],labelSeparator:"",consistentWeeks:!1},aan=I.createContext(oan);function ec(){const e=I.useContext(aan),t=I.useCallback(o=>o||e.locale,[e.locale]),n=I.useCallback(o=>o||e.timezone||void 0,[e.timezone]),r=I.useCallback(o=>typeof o=="number"?o:e.firstDayOfWeek,[e.firstDayOfWeek]),i=I.useCallback(o=>Array.isArray(o)?o:e.weekendDays,[e.weekendDays]),s=I.useCallback(o=>typeof o=="string"?o:e.labelSeparator,[e.labelSeparator]);return{...e,getLocale:t,getTimezone:n,getFirstDayOfWeek:r,getWeekendDays:i,getLabelSeparator:s}}function uan(e,t){if(t==="range"&&Array.isArray(e)){const[n,r]=e;return n?r?`${n.toISOString()}  ${r.toISOString()}`:`${n.toISOString()} `:""}return t==="multiple"&&Array.isArray(e)?e.map(n=>n==null?void 0:n.toISOString()).filter(Boolean).join(", "):!Array.isArray(e)&&e?e.toISOString():""}function Dje({value:e,type:t,name:n,form:r}){return _.jsx("input",{type:"hidden",value:uan(e,t),name:n,form:r})}Dje.displayName="@mantine/dates/HiddenDatesInput";var Pje={day:"m_396ce5cb"};const lan={},can=(e,{size:t})=>({day:{"--day-size":tn(t,"day-size")}}),Cie=Me((e,t)=>{const n=xe("Day",lan,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,date:l,disabled:c,__staticSelector:f,weekend:d,outside:h,selected:p,renderDay:m,inRange:g,firstInRange:y,lastInRange:v,hidden:b,static:w,...E}=n,T=dt({name:f||"Day",classes:Pje,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:can,rootSelector:"day"}),S=ec();return _.jsx(xs,{...T("day",{style:b?{display:"none"}:void 0}),component:w?"div":"button",ref:t,disabled:c,"data-today":Tt(l).isSame(M0("add",new Date,S.getTimezone()),"day")||void 0,"data-hidden":b||void 0,"data-disabled":c||void 0,"data-weekend":!c&&!h&&d||void 0,"data-outside":!c&&h||void 0,"data-selected":!c&&p||void 0,"data-in-range":g&&!c||void 0,"data-first-in-range":y&&!c||void 0,"data-last-in-range":v&&!c||void 0,"data-static":w||void 0,unstyled:a,...E,children:(m==null?void 0:m(l))||l.getDate()})});Cie.classes=Pje;Cie.displayName="@mantine/dates/Day";function fan({locale:e,format:t="dd",firstDayOfWeek:n=1}){const r=Tt().day(n),i=[];for(let s=0;s<7;s+=1)typeof t=="string"?i.push(Tt(r).add(s,"days").locale(e).format(t)):i.push(t(Tt(r).add(s,"days").toDate()));return i}var Oje={weekday:"m_18a3eca"};const dan={},han=(e,{size:t})=>({weekdaysRow:{"--wr-fz":uo(t),"--wr-spacing":as(t)}}),Aie=Me((e,t)=>{const n=xe("WeekdaysRow",dan,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,locale:l,firstDayOfWeek:c,weekdayFormat:f,cellComponent:d="th",__staticSelector:h,...p}=n,m=dt({name:h||"WeekdaysRow",classes:Oje,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:han,rootSelector:"weekdaysRow"}),g=ec(),y=fan({locale:g.getLocale(l),format:f,firstDayOfWeek:g.getFirstDayOfWeek(c)}).map((v,b)=>_.jsx(d,{...m("weekday"),children:v},b));return _.jsx(pe,{component:"tr",ref:t,...m("weekdaysRow"),...p,children:y})});Aie.classes=Oje;Aie.displayName="@mantine/dates/WeekdaysRow";function pan(e,t=1){const n=new Date(e),r=t===0?6:t-1;for(;n.getDay()!==r;)n.setDate(n.getDate()+1);return n}function man(e,t=1){const n=new Date(e);for(;n.getDay()!==t;)n.setDate(n.getDate()-1);return n}function gan({month:e,firstDayOfWeek:t=1,consistentWeeks:n}){const r=e.getMonth(),i=new Date(e.getFullYear(),r,1),s=new Date(e.getFullYear(),e.getMonth()+1,0),o=pan(s,t),a=man(i,t),u=[];for(;a<=o;){const l=[];for(let c=0;c<7;c+=1)l.push(new Date(a)),a.setDate(a.getDate()+1);u.push(l)}if(n&&u.length<6){const l=u[u.length-1],c=l[l.length-1],f=new Date(c);for(f.setDate(f.getDate()+1);u.length<6;){const d=[];for(let h=0;h<7;h+=1)d.push(new Date(f)),f.setDate(f.getDate()+1);u.push(d)}}return u}function $je(e,t){return e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()}function Mje(e,t){return t instanceof Date?Tt(e).isAfter(Tt(t).subtract(1,"day"),"day"):!0}function Lje(e,t){return t instanceof Date?Tt(e).isBefore(Tt(t).add(1,"day"),"day"):!0}function yan(e,t,n,r,i,s,o){const a=e.flat().filter(c=>{var f;return Lje(c,n)&&Mje(c,t)&&!(i!=null&&i(c))&&!((f=r==null?void 0:r(c))!=null&&f.disabled)&&(!s||$je(c,o))}),u=a.find(c=>{var f;return(f=r==null?void 0:r(c))==null?void 0:f.selected});if(u)return u;const l=a.find(c=>Tt().isSame(c,"date"));return l||a[0]}var Fje={month:"m_cc9820d3",monthCell:"m_8f457cd5"};const van={withCellSpacing:!0},O5=Me((e,t)=>{const n=xe("Month",van,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,__staticSelector:l,locale:c,firstDayOfWeek:f,weekdayFormat:d,month:h,weekendDays:p,getDayProps:m,excludeDate:g,minDate:y,maxDate:v,renderDay:b,hideOutsideDates:w,hideWeekdays:E,getDayAriaLabel:T,static:S,__getDayRef:C,__onDayKeyDown:A,__onDayClick:k,__onDayMouseEnter:N,__preventFocus:O,__stopPropagation:P,withCellSpacing:$,size:F,...M}=n,B=dt({name:l||"Month",classes:Fje,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,rootSelector:"month"}),U=ec(),H=gan({month:h,firstDayOfWeek:U.getFirstDayOfWeek(f),consistentWeeks:U.consistentWeeks}),D=yan(H,y,v,m,g,w,h),{resolvedClassNames:z,resolvedStyles:W}=Vm({classNames:r,styles:o,props:n}),j=H.map((q,G)=>{const ne=q.map((ce,de)=>{const he=!$je(ce,h),ve=(T==null?void 0:T(ce))||Tt(ce).locale(c||U.locale).format("D MMMM YYYY"),Ie=m==null?void 0:m(ce),be=Tt(ce).isSame(D,"date");return _.jsx("td",{...B("monthCell"),"data-with-spacing":$||void 0,children:_.jsx(Cie,{__staticSelector:l||"Month",classNames:z,styles:W,unstyled:a,"data-mantine-stop-propagation":P||void 0,renderDay:b,date:ce,size:F,weekend:U.getWeekendDays(p).includes(ce.getDay()),outside:he,hidden:w?he:!1,"aria-label":ve,static:S,disabled:(g==null?void 0:g(ce))||!Lje(ce,v)||!Mje(ce,y),ref:Ke=>C==null?void 0:C(G,de,Ke),...Ie,onKeyDown:Ke=>{var Ue;(Ue=Ie==null?void 0:Ie.onKeyDown)==null||Ue.call(Ie,Ke),A==null||A(Ke,{rowIndex:G,cellIndex:de,date:ce})},onMouseEnter:Ke=>{var Ue;(Ue=Ie==null?void 0:Ie.onMouseEnter)==null||Ue.call(Ie,Ke),N==null||N(Ke,ce)},onClick:Ke=>{var Ue;(Ue=Ie==null?void 0:Ie.onClick)==null||Ue.call(Ie,Ke),k==null||k(Ke,ce)},onMouseDown:Ke=>{var Ue;(Ue=Ie==null?void 0:Ie.onMouseDown)==null||Ue.call(Ie,Ke),O&&Ke.preventDefault()},tabIndex:O||!be?-1:0})},ce.toString())});return _.jsx("tr",{...B("monthRow"),children:ne},G)});return _.jsxs(pe,{component:"table",...B("month"),size:F,ref:t,...M,children:[!E&&_.jsx("thead",{...B("monthThead"),children:_.jsx(Aie,{__staticSelector:l||"Month",locale:c,firstDayOfWeek:f,weekdayFormat:d,size:F,classNames:z,styles:W,unstyled:a})}),_.jsx("tbody",{...B("monthTbody"),children:j})]})});O5.classes=Fje;O5.displayName="@mantine/dates/Month";var jje={pickerControl:"m_dc6a3c71"};const ban={},_an=(e,{size:t})=>({pickerControl:{"--dpc-fz":uo(t),"--dpc-size":tn(t,"dpc-size")}}),$5=Me((e,t)=>{const n=xe("PickerControl",ban,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,firstInRange:l,lastInRange:c,inRange:f,__staticSelector:d,selected:h,disabled:p,...m}=n,g=dt({name:d||"PickerControl",classes:jje,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:_an,rootSelector:"pickerControl"});return _.jsx(xs,{...g("pickerControl"),ref:t,unstyled:a,"data-picker-control":!0,"data-selected":h&&!p||void 0,"data-disabled":p||void 0,"data-in-range":f&&!p&&!h||void 0,"data-first-in-range":l&&!p||void 0,"data-last-in-range":c&&!p||void 0,disabled:p,...m})});$5.classes=jje;$5.displayName="@mantine/dates/PickerControl";function Bje(e,t,n){return!t&&!n?!1:!!(t&&Tt(e).isBefore(t,"year")||n&&Tt(e).isAfter(n,"year"))}function wan(e,t,n,r){const i=e.flat().filter(a=>{var u;return!Bje(a,t,n)&&!((u=r==null?void 0:r(a))!=null&&u.disabled)}),s=i.find(a=>{var u;return(u=r==null?void 0:r(a))==null?void 0:u.selected});if(s)return s;const o=i.find(a=>Tt().isSame(a,"year"));return o||i[0]}function Uje(e){const t=e.getFullYear(),n=t-t%10;let r=0;const i=[[],[],[],[]];for(let s=0;s<4;s+=1){const o=s===3?1:3;for(let a=0;a<o;a+=1)i[s].push(new Date(n+r,0)),r+=1}return i}var zje={yearsList:"m_9206547b",yearsListCell:"m_c5a19c7d"};const Ean={yearsListFormat:"YYYY",withCellSpacing:!0},M5=Me((e,t)=>{const n=xe("YearsList",Ean,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,decade:l,yearsListFormat:c,locale:f,minDate:d,maxDate:h,getYearControlProps:p,__staticSelector:m,__getControlRef:g,__onControlKeyDown:y,__onControlClick:v,__onControlMouseEnter:b,__preventFocus:w,__stopPropagation:E,withCellSpacing:T,size:S,...C}=n,A=dt({name:m||"YearsList",classes:zje,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,rootSelector:"yearsList"}),k=ec(),N=Uje(l),O=wan(N,d,h,p),P=N.map(($,F)=>{const M=$.map((B,U)=>{const H=p==null?void 0:p(B),D=Tt(B).isSame(O,"year");return _.jsx("td",{...A("yearsListCell"),"data-with-spacing":T||void 0,children:_.jsx($5,{...A("yearsListControl"),size:S,unstyled:a,"data-mantine-stop-propagation":E||void 0,disabled:Bje(B,d,h),ref:z=>g==null?void 0:g(F,U,z),...H,onKeyDown:z=>{var W;(W=H==null?void 0:H.onKeyDown)==null||W.call(H,z),y==null||y(z,{rowIndex:F,cellIndex:U,date:B})},onClick:z=>{var W;(W=H==null?void 0:H.onClick)==null||W.call(H,z),v==null||v(z,B)},onMouseEnter:z=>{var W;(W=H==null?void 0:H.onMouseEnter)==null||W.call(H,z),b==null||b(z,B)},onMouseDown:z=>{var W;(W=H==null?void 0:H.onMouseDown)==null||W.call(H,z),w&&z.preventDefault()},tabIndex:w||!D?-1:0,children:Tt(B).locale(k.getLocale(f)).format(c)})},U)});return _.jsx("tr",{...A("yearsListRow"),children:M},F)});return _.jsx(pe,{component:"table",ref:t,size:S,...A("yearsList"),...C,children:_.jsx("tbody",{children:P})})});M5.classes=zje;M5.displayName="@mantine/dates/YearsList";function Vje(e,t,n){return!t&&!n?!1:!!(t&&Tt(e).isBefore(t,"month")||n&&Tt(e).isAfter(n,"month"))}function xan(e,t,n,r){const i=e.flat().filter(a=>{var u;return!Vje(a,t,n)&&!((u=r==null?void 0:r(a))!=null&&u.disabled)}),s=i.find(a=>{var u;return(u=r==null?void 0:r(a))==null?void 0:u.selected});if(s)return s;const o=i.find(a=>Tt().isSame(a,"month"));return o||i[0]}function San(e){const t=Tt(e).startOf("year").toDate(),n=[[],[],[],[]];let r=0;for(let i=0;i<4;i+=1)for(let s=0;s<3;s+=1)n[i].push(Tt(t).add(r,"months").toDate()),r+=1;return n}var Hje={monthsList:"m_2a6c32d",monthsListCell:"m_fe27622f"};const Tan={monthsListFormat:"MMM",withCellSpacing:!0},L5=Me((e,t)=>{const n=xe("MonthsList",Tan,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,__staticSelector:l,year:c,monthsListFormat:f,locale:d,minDate:h,maxDate:p,getMonthControlProps:m,__getControlRef:g,__onControlKeyDown:y,__onControlClick:v,__onControlMouseEnter:b,__preventFocus:w,__stopPropagation:E,withCellSpacing:T,size:S,...C}=n,A=dt({name:l||"MonthsList",classes:Hje,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,rootSelector:"monthsList"}),k=ec(),N=San(c),O=xan(N,h,p,m),P=N.map(($,F)=>{const M=$.map((B,U)=>{const H=m==null?void 0:m(B),D=Tt(B).isSame(O,"month");return _.jsx("td",{...A("monthsListCell"),"data-with-spacing":T||void 0,children:_.jsx($5,{...A("monthsListControl"),size:S,unstyled:a,__staticSelector:l||"MonthsList","data-mantine-stop-propagation":E||void 0,disabled:Vje(B,h,p),ref:z=>g==null?void 0:g(F,U,z),...H,onKeyDown:z=>{var W;(W=H==null?void 0:H.onKeyDown)==null||W.call(H,z),y==null||y(z,{rowIndex:F,cellIndex:U,date:B})},onClick:z=>{var W;(W=H==null?void 0:H.onClick)==null||W.call(H,z),v==null||v(z,B)},onMouseEnter:z=>{var W;(W=H==null?void 0:H.onMouseEnter)==null||W.call(H,z),b==null||b(z,B)},onMouseDown:z=>{var W;(W=H==null?void 0:H.onMouseDown)==null||W.call(H,z),w&&z.preventDefault()},tabIndex:w||!D?-1:0,children:Tt(B).locale(k.getLocale(d)).format(f)})},U)});return _.jsx("tr",{...A("monthsListRow"),children:M},F)});return _.jsx(pe,{component:"table",ref:t,size:S,...A("monthsList"),...C,children:_.jsx("tbody",{children:P})})});L5.classes=Hje;L5.displayName="@mantine/dates/MonthsList";var qje={calendarHeader:"m_730a79ed",calendarHeaderLevel:"m_f6645d97",calendarHeaderControl:"m_2351eeb0",calendarHeaderControlIcon:"m_367dc749"};const Can={nextDisabled:!1,previousDisabled:!1,hasNextLevel:!0,withNext:!0,withPrevious:!0},Aan=(e,{size:t})=>({calendarHeader:{"--dch-control-size":tn(t,"dch-control-size"),"--dch-fz":uo(t)}}),rv=Me((e,t)=>{const n=xe("CalendarHeader",Can,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,nextIcon:l,previousIcon:c,nextLabel:f,previousLabel:d,onNext:h,onPrevious:p,onLevelClick:m,label:g,nextDisabled:y,previousDisabled:v,hasNextLevel:b,levelControlAriaLabel:w,withNext:E,withPrevious:T,__staticSelector:S,__preventFocus:C,__stopPropagation:A,...k}=n,N=dt({name:S||"CalendarHeader",classes:qje,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:Aan,rootSelector:"calendarHeader"}),O=C?P=>P.preventDefault():void 0;return _.jsxs(pe,{...N("calendarHeader"),ref:t,...k,children:[T&&_.jsx(xs,{...N("calendarHeaderControl"),"data-direction":"previous","aria-label":d,onClick:p,unstyled:a,onMouseDown:O,disabled:v,"data-disabled":v||void 0,tabIndex:C||v?-1:0,"data-mantine-stop-propagation":A||void 0,children:c||_.jsx($E,{...N("calendarHeaderControlIcon"),"data-direction":"previous",size:"45%"})}),_.jsx(xs,{component:b?"button":"div",...N("calendarHeaderLevel"),onClick:b?m:void 0,unstyled:a,onMouseDown:b?O:void 0,disabled:!b,"data-static":!b||void 0,"aria-label":w,tabIndex:C||!b?-1:0,"data-mantine-stop-propagation":A||void 0,children:g}),E&&_.jsx(xs,{...N("calendarHeaderControl"),"data-direction":"next","aria-label":f,onClick:h,unstyled:a,onMouseDown:O,disabled:y,"data-disabled":y||void 0,tabIndex:C||y?-1:0,"data-mantine-stop-propagation":A||void 0,children:l||_.jsx($E,{...N("calendarHeaderControlIcon"),"data-direction":"next",size:"45%"})})]})});rv.classes=qje;rv.displayName="@mantine/dates/CalendarHeader";function Ian(e){const t=Uje(e);return[t[0][0],t[3][0]]}const kan={decadeLabelFormat:"YYYY"},F5=Me((e,t)=>{const n=xe("DecadeLevel",kan,e),{decade:r,locale:i,minDate:s,maxDate:o,yearsListFormat:a,getYearControlProps:u,__getControlRef:l,__onControlKeyDown:c,__onControlClick:f,__onControlMouseEnter:d,withCellSpacing:h,__preventFocus:p,nextIcon:m,previousIcon:g,nextLabel:y,previousLabel:v,onNext:b,onPrevious:w,nextDisabled:E,previousDisabled:T,levelControlAriaLabel:S,withNext:C,withPrevious:A,decadeLabelFormat:k,classNames:N,styles:O,unstyled:P,__staticSelector:$,__stopPropagation:F,size:M,...B}=n,U=ec(),[H,D]=Ian(r),z={__staticSelector:$||"DecadeLevel",classNames:N,styles:O,unstyled:P,size:M},W=typeof E=="boolean"?E:o?!Tt(D).endOf("year").isBefore(o):!1,j=typeof T=="boolean"?T:s?!Tt(H).startOf("year").isAfter(s):!1,q=(G,ne)=>Tt(G).locale(i||U.locale).format(ne);return _.jsxs(pe,{"data-decade-level":!0,size:M,ref:t,...B,children:[_.jsx(rv,{label:typeof k=="function"?k(H,D):`${q(H,k)}  ${q(D,k)}`,__preventFocus:p,__stopPropagation:F,nextIcon:m,previousIcon:g,nextLabel:y,previousLabel:v,onNext:b,onPrevious:w,nextDisabled:W,previousDisabled:j,hasNextLevel:!1,levelControlAriaLabel:S,withNext:C,withPrevious:A,...z}),_.jsx(M5,{decade:r,locale:i,minDate:s,maxDate:o,yearsListFormat:a,getYearControlProps:u,__getControlRef:l,__onControlKeyDown:c,__onControlClick:f,__onControlMouseEnter:d,__preventFocus:p,__stopPropagation:F,withCellSpacing:h,...z})]})});F5.classes={...M5.classes,...rv.classes};F5.displayName="@mantine/dates/DecadeLevel";const Ran={yearLabelFormat:"YYYY"},j5=Me((e,t)=>{const n=xe("YearLevel",Ran,e),{year:r,locale:i,minDate:s,maxDate:o,monthsListFormat:a,getMonthControlProps:u,__getControlRef:l,__onControlKeyDown:c,__onControlClick:f,__onControlMouseEnter:d,withCellSpacing:h,__preventFocus:p,nextIcon:m,previousIcon:g,nextLabel:y,previousLabel:v,onNext:b,onPrevious:w,onLevelClick:E,nextDisabled:T,previousDisabled:S,hasNextLevel:C,levelControlAriaLabel:A,withNext:k,withPrevious:N,yearLabelFormat:O,__staticSelector:P,__stopPropagation:$,size:F,classNames:M,styles:B,unstyled:U,...H}=n,D=ec(),z={__staticSelector:P||"YearLevel",classNames:M,styles:B,unstyled:U,size:F},W=typeof T=="boolean"?T:o?!Tt(r).endOf("year").isBefore(o):!1,j=typeof S=="boolean"?S:s?!Tt(r).startOf("year").isAfter(s):!1;return _.jsxs(pe,{"data-year-level":!0,size:F,ref:t,...H,children:[_.jsx(rv,{label:typeof O=="function"?O(r):Tt(r).locale(i||D.locale).format(O),__preventFocus:p,__stopPropagation:$,nextIcon:m,previousIcon:g,nextLabel:y,previousLabel:v,onNext:b,onPrevious:w,onLevelClick:E,nextDisabled:W,previousDisabled:j,hasNextLevel:C,levelControlAriaLabel:A,withNext:k,withPrevious:N,...z}),_.jsx(L5,{year:r,locale:i,minDate:s,maxDate:o,monthsListFormat:a,getMonthControlProps:u,__getControlRef:l,__onControlKeyDown:c,__onControlClick:f,__onControlMouseEnter:d,__preventFocus:p,__stopPropagation:$,withCellSpacing:h,...z})]})});j5.classes={...rv.classes,...L5.classes};j5.displayName="@mantine/dates/YearLevel";const Nan={monthLabelFormat:"MMMM YYYY"},B5=Me((e,t)=>{const n=xe("MonthLevel",Nan,e),{month:r,locale:i,firstDayOfWeek:s,weekdayFormat:o,weekendDays:a,getDayProps:u,excludeDate:l,minDate:c,maxDate:f,renderDay:d,hideOutsideDates:h,hideWeekdays:p,getDayAriaLabel:m,__getDayRef:g,__onDayKeyDown:y,__onDayClick:v,__onDayMouseEnter:b,withCellSpacing:w,__preventFocus:E,__stopPropagation:T,nextIcon:S,previousIcon:C,nextLabel:A,previousLabel:k,onNext:N,onPrevious:O,onLevelClick:P,nextDisabled:$,previousDisabled:F,hasNextLevel:M,levelControlAriaLabel:B,withNext:U,withPrevious:H,monthLabelFormat:D,classNames:z,styles:W,unstyled:j,__staticSelector:q,size:G,static:ne,...ce}=n,de=ec(),he={__staticSelector:q||"MonthLevel",classNames:z,styles:W,unstyled:j,size:G},ve=typeof $=="boolean"?$:f?!Tt(r).endOf("month").isBefore(f):!1,Ie=typeof F=="boolean"?F:c?!Tt(r).startOf("month").isAfter(c):!1;return _.jsxs(pe,{"data-month-level":!0,size:G,ref:t,...ce,children:[_.jsx(rv,{label:typeof D=="function"?D(r):Tt(r).locale(i||de.locale).format(D),__preventFocus:E,__stopPropagation:T,nextIcon:S,previousIcon:C,nextLabel:A,previousLabel:k,onNext:N,onPrevious:O,onLevelClick:P,nextDisabled:ve,previousDisabled:Ie,hasNextLevel:M,levelControlAriaLabel:B,withNext:U,withPrevious:H,...he}),_.jsx(O5,{month:r,locale:i,firstDayOfWeek:s,weekdayFormat:o,weekendDays:a,getDayProps:u,excludeDate:l,minDate:c,maxDate:f,renderDay:d,hideOutsideDates:h,hideWeekdays:p,getDayAriaLabel:m,__getDayRef:g,__onDayKeyDown:y,__onDayClick:v,__onDayMouseEnter:b,__preventFocus:E,__stopPropagation:T,static:ne,withCellSpacing:w,...he})]})});B5.classes={...O5.classes,...rv.classes};B5.displayName="@mantine/dates/MonthLevel";var Wje={levelsGroup:"m_30b26e33"};const Dan={},iv=Me((e,t)=>{const n=xe("LevelsGroup",Dan,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,__staticSelector:l,...c}=n,f=dt({name:l||"LevelsGroup",classes:Wje,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,rootSelector:"levelsGroup"});return _.jsx(pe,{ref:t,...f("levelsGroup"),...c})});iv.classes=Wje;iv.displayName="@mantine/dates/LevelsGroup";const Pan={numberOfColumns:1},U5=Me((e,t)=>{const n=xe("DecadeLevelGroup",Pan,e),{decade:r,locale:i,minDate:s,maxDate:o,yearsListFormat:a,getYearControlProps:u,__onControlClick:l,__onControlMouseEnter:c,withCellSpacing:f,__preventFocus:d,nextIcon:h,previousIcon:p,nextLabel:m,previousLabel:g,onNext:y,onPrevious:v,nextDisabled:b,previousDisabled:w,classNames:E,styles:T,unstyled:S,__staticSelector:C,__stopPropagation:A,numberOfColumns:k,levelControlAriaLabel:N,decadeLabelFormat:O,size:P,vars:$,...F}=n,M=I.useRef([]),B=Array(k).fill(0).map((U,H)=>{const D=Tt(r).add(H*10,"years").toDate();return _.jsx(F5,{size:P,yearsListFormat:a,decade:D,withNext:H===k-1,withPrevious:H===0,decadeLabelFormat:O,__onControlClick:l,__onControlMouseEnter:c,__onControlKeyDown:(z,W)=>Tie({levelIndex:H,rowIndex:W.rowIndex,cellIndex:W.cellIndex,event:z,controlsRef:M}),__getControlRef:(z,W,j)=>{Array.isArray(M.current[H])||(M.current[H]=[]),Array.isArray(M.current[H][z])||(M.current[H][z]=[]),M.current[H][z][W]=j},levelControlAriaLabel:typeof N=="function"?N(D):N,locale:i,minDate:s,maxDate:o,__preventFocus:d,__stopPropagation:A,nextIcon:h,previousIcon:p,nextLabel:m,previousLabel:g,onNext:y,onPrevious:v,nextDisabled:b,previousDisabled:w,getYearControlProps:u,__staticSelector:C||"DecadeLevelGroup",classNames:E,styles:T,unstyled:S,withCellSpacing:f},H)});return _.jsx(iv,{classNames:E,styles:T,__staticSelector:C||"DecadeLevelGroup",ref:t,size:P,unstyled:S,...F,children:B})});U5.classes={...iv.classes,...F5.classes};U5.displayName="@mantine/dates/DecadeLevelGroup";const Oan={numberOfColumns:1},z5=Me((e,t)=>{const n=xe("YearLevelGroup",Oan,e),{year:r,locale:i,minDate:s,maxDate:o,monthsListFormat:a,getMonthControlProps:u,__onControlClick:l,__onControlMouseEnter:c,withCellSpacing:f,__preventFocus:d,nextIcon:h,previousIcon:p,nextLabel:m,previousLabel:g,onNext:y,onPrevious:v,onLevelClick:b,nextDisabled:w,previousDisabled:E,hasNextLevel:T,classNames:S,styles:C,unstyled:A,__staticSelector:k,__stopPropagation:N,numberOfColumns:O,levelControlAriaLabel:P,yearLabelFormat:$,size:F,vars:M,...B}=n,U=I.useRef([]),H=Array(O).fill(0).map((D,z)=>{const W=Tt(r).add(z,"years").toDate();return _.jsx(j5,{size:F,monthsListFormat:a,year:W,withNext:z===O-1,withPrevious:z===0,yearLabelFormat:$,__stopPropagation:N,__onControlClick:l,__onControlMouseEnter:c,__onControlKeyDown:(j,q)=>Tie({levelIndex:z,rowIndex:q.rowIndex,cellIndex:q.cellIndex,event:j,controlsRef:U}),__getControlRef:(j,q,G)=>{Array.isArray(U.current[z])||(U.current[z]=[]),Array.isArray(U.current[z][j])||(U.current[z][j]=[]),U.current[z][j][q]=G},levelControlAriaLabel:typeof P=="function"?P(W):P,locale:i,minDate:s,maxDate:o,__preventFocus:d,nextIcon:h,previousIcon:p,nextLabel:m,previousLabel:g,onNext:y,onPrevious:v,onLevelClick:b,nextDisabled:w,previousDisabled:E,hasNextLevel:T,getMonthControlProps:u,classNames:S,styles:C,unstyled:A,__staticSelector:k||"YearLevelGroup",withCellSpacing:f},z)});return _.jsx(iv,{classNames:S,styles:C,__staticSelector:k||"YearLevelGroup",ref:t,size:F,unstyled:A,...B,children:H})});z5.classes={...j5.classes,...iv.classes};z5.displayName="@mantine/dates/YearLevelGroup";const $an={numberOfColumns:1},V5=Me((e,t)=>{const n=xe("MonthLevelGroup",$an,e),{month:r,locale:i,firstDayOfWeek:s,weekdayFormat:o,weekendDays:a,getDayProps:u,excludeDate:l,minDate:c,maxDate:f,renderDay:d,hideOutsideDates:h,hideWeekdays:p,getDayAriaLabel:m,__onDayClick:g,__onDayMouseEnter:y,withCellSpacing:v,__preventFocus:b,nextIcon:w,previousIcon:E,nextLabel:T,previousLabel:S,onNext:C,onPrevious:A,onLevelClick:k,nextDisabled:N,previousDisabled:O,hasNextLevel:P,classNames:$,styles:F,unstyled:M,numberOfColumns:B,levelControlAriaLabel:U,monthLabelFormat:H,__staticSelector:D,__stopPropagation:z,size:W,static:j,vars:q,...G}=n,ne=I.useRef([]),ce=Array(B).fill(0).map((de,he)=>{const ve=Tt(r).add(he,"months").toDate();return _.jsx(B5,{month:ve,withNext:he===B-1,withPrevious:he===0,monthLabelFormat:H,__stopPropagation:z,__onDayClick:g,__onDayMouseEnter:y,__onDayKeyDown:(Ie,be)=>Tie({levelIndex:he,rowIndex:be.rowIndex,cellIndex:be.cellIndex,event:Ie,controlsRef:ne}),__getDayRef:(Ie,be,Ke)=>{Array.isArray(ne.current[he])||(ne.current[he]=[]),Array.isArray(ne.current[he][Ie])||(ne.current[he][Ie]=[]),ne.current[he][Ie][be]=Ke},levelControlAriaLabel:typeof U=="function"?U(ve):U,locale:i,firstDayOfWeek:s,weekdayFormat:o,weekendDays:a,getDayProps:u,excludeDate:l,minDate:c,maxDate:f,renderDay:d,hideOutsideDates:h,hideWeekdays:p,getDayAriaLabel:m,__preventFocus:b,nextIcon:w,previousIcon:E,nextLabel:T,previousLabel:S,onNext:C,onPrevious:A,onLevelClick:k,nextDisabled:N,previousDisabled:O,hasNextLevel:P,classNames:$,styles:F,unstyled:M,__staticSelector:D||"MonthLevelGroup",size:W,static:j,withCellSpacing:v},he)});return _.jsx(iv,{classNames:$,styles:F,__staticSelector:D||"MonthLevelGroup",ref:t,size:W,...G,children:ce})});V5.classes={...iv.classes,...B5.classes};V5.displayName="@mantine/dates/MonthLevelGroup";var Gje={input:"m_6fa5e2aa"};const Man={},H5=Me((e,t)=>{const{inputProps:n,wrapperProps:r,placeholder:i,classNames:s,styles:o,unstyled:a,popoverProps:u,modalProps:l,dropdownType:c,children:f,formattedValue:d,dropdownHandlers:h,dropdownOpened:p,onClick:m,clearable:g,onClear:y,clearButtonProps:v,rightSection:b,shouldClear:w,readOnly:E,disabled:T,value:S,name:C,form:A,type:k,...N}=Gbe("PickerInputBase",Man,e),O=b||(g&&w&&!E&&!T?_.jsx(Wm,{variant:"transparent",onClick:y,unstyled:a,size:n.size||"sm",...v}):null),P=()=>{k==="range"&&Array.isArray(S)&&S[0]&&!S[1]&&y(),h.close()};return _.jsxs(_.Fragment,{children:[c==="modal"&&!E&&_.jsx(Yi,{opened:p,onClose:P,withCloseButton:!1,size:"auto","data-dates-modal":!0,unstyled:a,...l,children:f}),_.jsx(mi.Wrapper,{...r,children:_.jsxs(Do,{position:"bottom-start",opened:p,trapFocus:!0,returnFocus:!0,unstyled:a,...u,disabled:(u==null?void 0:u.disabled)||c==="modal"||E,onClose:()=>{var $;($=u==null?void 0:u.onClose)==null||$.call(u),P()},children:[_.jsx(Do.Target,{children:_.jsx(mi,{"aria-label":d||i,"data-dates-input":!0,"data-read-only":E||void 0,disabled:T,component:"button",type:"button",multiline:!0,onClick:$=>{m==null||m($),h.toggle()},rightSection:O,...n,ref:t,classNames:{...s,input:Xi(Gje.input,s==null?void 0:s.input)},...N,children:d||_.jsx(mi.Placeholder,{error:n.error,unstyled:a,className:s==null?void 0:s.placeholder,style:o==null?void 0:o.placeholder,children:i})})}),_.jsx(Do.Dropdown,{"data-dates-dropdown":!0,children:f})]})}),_.jsx(Dje,{value:S,name:C,form:A,type:k})]})});H5.classes=Gje;H5.displayName="@mantine/dates/PickerInputBase";const pye=e=>e==="range"?[null,null]:e==="multiple"?[]:null;function Iie({type:e,value:t,defaultValue:n,onChange:r,applyTimezone:i=!0}){const s=I.useRef(e),o=ec(),[a,u,l]=Ss({value:M0("add",t,o.getTimezone(),!i),defaultValue:M0("add",n,o.getTimezone(),!i),finalValue:pye(e),onChange:f=>{r==null||r(M0("remove",f,o.getTimezone(),!i))}});let c=a;return s.current!==e&&(s.current=e,t===void 0&&(c=n!==void 0?n:pye(e),u(c))),[c,u,l]}function GB(e,t){return e?e==="month"?0:e==="year"?1:2:t||0}function Lan(e){return e===0?"month":e===1?"year":"decade"}function d2(e,t,n){return Lan(Zd(GB(e,0),GB(t,0),GB(n,2)))}const Fan={maxLevel:"decade",minLevel:"month",__updateDateOnYearSelect:!0,__updateDateOnMonthSelect:!0},q5=Me((e,t)=>{const n=xe("Calendar",Fan,e),{vars:r,maxLevel:i,minLevel:s,defaultLevel:o,level:a,onLevelChange:u,date:l,defaultDate:c,onDateChange:f,numberOfColumns:d,columnsToScroll:h,ariaLabels:p,onYearSelect:m,onMonthSelect:g,onYearMouseEnter:y,onMonthMouseEnter:v,__updateDateOnYearSelect:b,__updateDateOnMonthSelect:w,firstDayOfWeek:E,weekdayFormat:T,weekendDays:S,getDayProps:C,excludeDate:A,renderDay:k,hideOutsideDates:N,hideWeekdays:O,getDayAriaLabel:P,monthLabelFormat:$,nextIcon:F,previousIcon:M,__onDayClick:B,__onDayMouseEnter:U,withCellSpacing:H,monthsListFormat:D,getMonthControlProps:z,yearLabelFormat:W,yearsListFormat:j,getYearControlProps:q,decadeLabelFormat:G,classNames:ne,styles:ce,unstyled:de,minDate:he,maxDate:ve,locale:Ie,__staticSelector:be,size:Ke,__preventFocus:Ue,__stopPropagation:yt,onNextDecade:it,onPreviousDecade:_e,onNextYear:ke,onPreviousYear:ze,onNextMonth:ct,onPreviousMonth:Ot,static:We,__timezoneApplied:ge,...ht}=n,{resolvedClassNames:vt,resolvedStyles:me}=Vm({classNames:ne,styles:ce,props:n}),[Ae,He]=Ss({value:a?d2(a,s,i):void 0,defaultValue:o?d2(o,s,i):void 0,finalValue:d2(void 0,s,i),onChange:u}),[ut,_t]=Iie({type:"default",value:l,defaultValue:c,onChange:f,applyTimezone:!ge}),Ln={__staticSelector:be||"Calendar",styles:me,classNames:vt,unstyled:de,size:Ke},Cr=ec(),Fn=h||d||1,cr=ut||M0("add",new Date,Cr.getTimezone()),gn=()=>{const In=Tt(cr).add(Fn,"month").toDate();ct==null||ct(In),_t(In)},An=()=>{const In=Tt(cr).subtract(Fn,"month").toDate();Ot==null||Ot(In),_t(In)},nr=()=>{const In=Tt(cr).add(Fn,"year").toDate();ke==null||ke(In),_t(In)},rr=()=>{const In=Tt(cr).subtract(Fn,"year").toDate();ze==null||ze(In),_t(In)},zo=()=>{const In=Tt(cr).add(10*Fn,"year").toDate();it==null||it(In),_t(In)},$i=()=>{const In=Tt(cr).subtract(10*Fn,"year").toDate();_e==null||_e(In),_t(In)};return _.jsxs(pe,{ref:t,size:Ke,"data-calendar":!0,...ht,children:[Ae==="month"&&_.jsx(V5,{month:cr,minDate:he,maxDate:ve,firstDayOfWeek:E,weekdayFormat:T,weekendDays:S,getDayProps:C,excludeDate:A,renderDay:k,hideOutsideDates:N,hideWeekdays:O,getDayAriaLabel:P,onNext:gn,onPrevious:An,hasNextLevel:i!=="month",onLevelClick:()=>He("year"),numberOfColumns:d,locale:Ie,levelControlAriaLabel:p==null?void 0:p.monthLevelControl,nextLabel:p==null?void 0:p.nextMonth,nextIcon:F,previousLabel:p==null?void 0:p.previousMonth,previousIcon:M,monthLabelFormat:$,__onDayClick:B,__onDayMouseEnter:U,__preventFocus:Ue,__stopPropagation:yt,static:We,withCellSpacing:H,...Ln}),Ae==="year"&&_.jsx(z5,{year:cr,numberOfColumns:d,minDate:he,maxDate:ve,monthsListFormat:D,getMonthControlProps:z,locale:Ie,onNext:nr,onPrevious:rr,hasNextLevel:i!=="month"&&i!=="year",onLevelClick:()=>He("decade"),levelControlAriaLabel:p==null?void 0:p.yearLevelControl,nextLabel:p==null?void 0:p.nextYear,nextIcon:F,previousLabel:p==null?void 0:p.previousYear,previousIcon:M,yearLabelFormat:W,__onControlMouseEnter:v,__onControlClick:(In,Mi)=>{w&&_t(Mi),He(d2("month",s,i)),g==null||g(Mi)},__preventFocus:Ue,__stopPropagation:yt,withCellSpacing:H,...Ln}),Ae==="decade"&&_.jsx(U5,{decade:cr,minDate:he,maxDate:ve,yearsListFormat:j,getYearControlProps:q,locale:Ie,onNext:zo,onPrevious:$i,numberOfColumns:d,nextLabel:p==null?void 0:p.nextDecade,nextIcon:F,previousLabel:p==null?void 0:p.previousDecade,previousIcon:M,decadeLabelFormat:G,__onControlMouseEnter:y,__onControlClick:(In,Mi)=>{b&&_t(Mi),He(d2("year",s,i)),m==null||m(Mi)},__preventFocus:Ue,__stopPropagation:yt,withCellSpacing:H,...Ln})]})});q5.classes={...U5.classes,...z5.classes,...V5.classes};q5.displayName="@mantine/dates/Calendar";function jan(e){const{maxLevel:t,minLevel:n,defaultLevel:r,level:i,onLevelChange:s,nextIcon:o,previousIcon:a,date:u,defaultDate:l,onDateChange:c,numberOfColumns:f,columnsToScroll:d,ariaLabels:h,onYearSelect:p,onMonthSelect:m,onYearMouseEnter:g,onMonthMouseEnter:y,onNextMonth:v,onPreviousMonth:b,onNextYear:w,onPreviousYear:E,onNextDecade:T,onPreviousDecade:S,withCellSpacing:C,__updateDateOnYearSelect:A,__updateDateOnMonthSelect:k,firstDayOfWeek:N,weekdayFormat:O,weekendDays:P,getDayProps:$,excludeDate:F,renderDay:M,hideOutsideDates:B,hideWeekdays:U,getDayAriaLabel:H,monthLabelFormat:D,monthsListFormat:z,getMonthControlProps:W,yearLabelFormat:j,yearsListFormat:q,getYearControlProps:G,decadeLabelFormat:ne,allowSingleDateInRange:ce,allowDeselect:de,minDate:he,maxDate:ve,locale:Ie,...be}=e;return{calendarProps:{maxLevel:t,minLevel:n,defaultLevel:r,level:i,onLevelChange:s,nextIcon:o,previousIcon:a,date:u,defaultDate:l,onDateChange:c,numberOfColumns:f,columnsToScroll:d,ariaLabels:h,onYearSelect:p,onMonthSelect:m,onYearMouseEnter:g,onMonthMouseEnter:y,onNextMonth:v,onPreviousMonth:b,onNextYear:w,onPreviousYear:E,onNextDecade:T,onPreviousDecade:S,withCellSpacing:C,__updateDateOnYearSelect:A,__updateDateOnMonthSelect:k,firstDayOfWeek:N,weekdayFormat:O,weekendDays:P,getDayProps:$,excludeDate:F,renderDay:M,hideOutsideDates:B,hideWeekdays:U,getDayAriaLabel:H,monthLabelFormat:D,monthsListFormat:z,getMonthControlProps:W,yearLabelFormat:j,yearsListFormat:q,getYearControlProps:G,decadeLabelFormat:ne,allowSingleDateInRange:ce,allowDeselect:de,minDate:he,maxDate:ve,locale:Ie},others:be}}function mye(e,t){const n=[...t].sort((r,i)=>r.getTime()-i.getTime());return Tt(n[0]).startOf("day").subtract(1,"ms").isBefore(e)&&Tt(n[1]).endOf("day").add(1,"ms").isAfter(e)}function Ban({type:e,level:t,value:n,defaultValue:r,onChange:i,allowSingleDateInRange:s,allowDeselect:o,onMouseLeave:a,applyTimezone:u=!0}){const[l,c]=Iie({type:e,value:n,defaultValue:r,onChange:i,applyTimezone:u}),[f,d]=I.useState(e==="range"&&l[0]&&!l[1]?l[0]:null),[h,p]=I.useState(null),m=T=>{if(e==="range"){if(f instanceof Date&&!l[1]){if(Tt(T).isSame(f,t)&&!s){d(null),p(null),c([null,null]);return}const S=[T,f];S.sort((C,A)=>C.getTime()-A.getTime()),c(S),p(null),d(null);return}if(l[0]&&!l[1]&&Tt(T).isSame(l[0],t)&&!s){d(null),p(null),c([null,null]);return}c([T,null]),p(null),d(T);return}if(e==="multiple"){l.some(S=>Tt(S).isSame(T,t))?c(l.filter(S=>!Tt(S).isSame(T,t))):c([...l,T]);return}l&&o&&Tt(T).isSame(l,t)?c(null):c(T)},g=T=>f instanceof Date&&h instanceof Date?mye(T,[h,f]):l[0]instanceof Date&&l[1]instanceof Date?mye(T,l):!1,y=e==="range"?T=>{a==null||a(T),p(null)}:a,v=T=>l[0]instanceof Date&&Tt(T).isSame(l[0],t)?!(h&&Tt(h).isBefore(l[0])):!1,b=T=>l[1]instanceof Date?Tt(T).isSame(l[1],t):!(l[0]instanceof Date)||!h?!1:Tt(h).isBefore(l[0])&&Tt(T).isSame(l[0],t),w=T=>{if(e==="range")return{selected:l.some(C=>C&&Tt(C).isSame(T,t)),inRange:g(T),firstInRange:v(T),lastInRange:b(T),"data-autofocus":!!l[0]&&Tt(l[0]).isSame(T,t)||void 0};if(e==="multiple")return{selected:l.some(C=>C&&Tt(C).isSame(T,t)),"data-autofocus":!!l[0]&&Tt(l[0]).isSame(T,t)||void 0};const S=Tt(l).isSame(T,t);return{selected:S,"data-autofocus":S||void 0}},E=e==="range"&&f?p:()=>{};return I.useEffect(()=>{e==="range"&&!l[0]&&!l[1]&&d(null)},[n]),{onDateChange:m,onRootMouseLeave:y,onHoveredDateChange:E,getControlProps:w,_value:l,setValue:c}}const Uan={type:"default",defaultLevel:"month",numberOfColumns:1},W5=Me((e,t)=>{const n=xe("DatePicker",Uan,e),{classNames:r,styles:i,vars:s,type:o,defaultValue:a,value:u,onChange:l,__staticSelector:c,getDayProps:f,allowSingleDateInRange:d,allowDeselect:h,onMouseLeave:p,numberOfColumns:m,hideOutsideDates:g,__onDayMouseEnter:y,__onDayClick:v,__timezoneApplied:b,...w}=n,{onDateChange:E,onRootMouseLeave:T,onHoveredDateChange:S,getControlProps:C}=Ban({type:o,level:"day",allowDeselect:h,allowSingleDateInRange:d,value:u,defaultValue:a,onChange:l,onMouseLeave:p,applyTimezone:!b}),{resolvedClassNames:A,resolvedStyles:k}=Vm({classNames:r,styles:i,props:n}),N=ec();return _.jsx(q5,{ref:t,minLevel:"month",classNames:A,styles:k,__staticSelector:c||"DatePicker",onMouseLeave:T,numberOfColumns:m,hideOutsideDates:g??m!==1,__onDayMouseEnter:(O,P)=>{S(P),y==null||y(O,P)},__onDayClick:(O,P)=>{E(P),v==null||v(O,P)},getDayProps:O=>({...C(O),...f==null?void 0:f(O)}),...w,date:M0("add",w.date,N.getTimezone(),b),__timezoneApplied:!0})});W5.classes=q5.classes;W5.displayName="@mantine/dates/DatePicker";function zan({type:e,value:t,defaultValue:n,onChange:r,locale:i,format:s,closeOnChange:o,sortDates:a,labelSeparator:u,valueFormatter:l}){const c=ec(),[f,d]=wL(!1),[h,p]=Iie({type:e,value:t,defaultValue:n,onChange:r}),m=Xon({type:e,date:h,locale:c.getLocale(i),format:s,labelSeparator:c.getLabelSeparator(u),formatter:l}),g=b=>{o&&(e==="default"&&d.close(),e==="range"&&b[0]&&b[1]&&d.close()),p(a&&e==="multiple"?[...b].sort((w,E)=>w.getTime()-E.getTime()):b)},y=()=>g(e==="range"?[null,null]:e==="multiple"?[]:null),v=e==="range"?!!h[0]:e==="multiple"?h.length>0:h!==null;return{_value:h,setValue:g,onClear:y,shouldClear:v,formattedValue:m,dropdownOpened:f,dropdownHandlers:d}}const Van={type:"default",valueFormat:"MMMM D, YYYY",closeOnChange:!0,sortDates:!0,dropdownType:"popover"},kie=Me((e,t)=>{const n=xe("DatePickerInput",Van,e),{type:r,value:i,defaultValue:s,onChange:o,valueFormat:a,labelSeparator:u,locale:l,classNames:c,styles:f,unstyled:d,closeOnChange:h,size:p,variant:m,dropdownType:g,sortDates:y,minDate:v,maxDate:b,vars:w,defaultDate:E,valueFormatter:T,...S}=n,{resolvedClassNames:C,resolvedStyles:A}=Vm({classNames:c,styles:f,props:n}),{calendarProps:k,others:N}=jan(S),{_value:O,setValue:P,formattedValue:$,dropdownHandlers:F,dropdownOpened:M,onClear:B,shouldClear:U}=zan({type:r,value:i,defaultValue:s,onChange:o,locale:l,format:a,labelSeparator:u,closeOnChange:h,sortDates:y,valueFormatter:T}),H=Array.isArray(O)?O[0]||E:O||E,D=ec();return _.jsx(H5,{formattedValue:$,dropdownOpened:M,dropdownHandlers:F,classNames:C,styles:A,unstyled:d,ref:t,onClear:B,shouldClear:U,value:O,size:p,variant:m,dropdownType:g,...N,type:r,__staticSelector:"DatePickerInput",children:_.jsx(W5,{...k,size:p,variant:m,type:r,value:O,defaultDate:H||san({maxDate:b,minDate:v,timezone:D.getTimezone()}),onChange:P,locale:l,classNames:C,styles:A,unstyled:d,__staticSelector:"DatePickerInput",__stopPropagation:g==="popover",minDate:v,maxDate:b,date:M0("add",k.date,D.getTimezone()),__timezoneApplied:!0})})});kie.classes={...H5.classes,...W5.classes};kie.displayName="@mantine/dates/DatePickerInput";function Han(e,t){const n=Object.values(e).map(r=>[r.startTime,r.endTime]).flat();return t[0]===null||t[1]===null?!1:Math.min(...n)>=t[0].getTime()&&Math.max(...n)<=t[1].getTime()}function qan({studyId:e,allParticipants:t}){const n=Gh(),[r,i]=E1(),s=t.filter(p=>p.completed).map(p=>Math.max(...Object.values(p.answers).map(m=>m.endTime).filter(m=>m!==void 0))).filter(p=>Number.isFinite(p)),[o,a]=I.useState([new Date(new Date(Math.min(...s.length>0?s:[new Date().getTime()])).setHours(0,0,0,0)),new Date(new Date(Math.max(...s.length>0?s:[new Date().getTime()])).setHours(24,0,0,0))]),[u,l,c,f]=I.useMemo(()=>{const p=t.filter(y=>!y.rejected&&y.completed),m=t.filter(y=>!y.rejected&&!y.completed),g=t.filter(y=>y.rejected);return[p,m,g,p.filter(y=>Han(y.answers,o))]},[t,o]),d=I.useMemo(()=>{var p,m;return f.length>0?[{Date:(p=o[0])==null?void 0:p.getTime(),Participants:0},...f.map(g=>Math.max(...Object.values(g.answers).map(y=>y.endTime).flat())).sort((g,y)=>g-y).map((g,y)=>({Date:g,Participants:y})),{Date:(m=o[1])==null?void 0:m.getTime(),Participants:f.length}]:[]},[f,o]),h=I.useMemo(()=>{var p,m;return{width:i.width-40-8,height:200,mark:{type:"line",interpolate:"step-before"},encoding:{x:{field:"Date",type:"temporal",scale:{domain:[(p=o[0])==null?void 0:p.getTime(),(m=o[1])==null?void 0:m.getTime()]}},y:{field:"Participants",type:"quantitative"}},data:{values:d}}},[i.width,o,d]);return _.jsx(Oc,{children:_.jsxs(Lb,{ref:r,padding:"lg",shadow:"md",withBorder:!0,children:[_.jsxs(Nt,{align:"center",mb:"xs",justify:"space-between",children:[_.jsxs(Nt,{direction:"row",align:"center",children:[_.jsx(ui,{order:5,children:e}),_.jsx(cOe,{completed:u.length,inProgress:l.length,rejected:c.length,filteredCompleted:f.length})]}),_.jsxs(ls,{children:[_.jsx(jZ,{allParticipants:t,studyId:e}),_.jsx(ai,{label:"Analyze and manage study data",children:_.jsx(fn,{onClick:p=>{!p.ctrlKey&&!p.metaKey&&(p.preventDefault(),n(`/analysis/stats/${e}`))},px:4,component:"a",href:`${Vu}analysis/stats/${e}`,children:_.jsx(cQe,{})})})]})]}),_.jsx(kie,{type:"range",label:"Time Filter",placeholder:"Select a date range",value:o,onChange:a}),d.length>0?_.jsxs(_.Fragment,{children:[_.jsx(Xe,{mt:16,children:"Finished Participants"}),_.jsx($q,{spec:h,actions:!1})]}):_.jsx(pe,{h:293.4,children:_.jsx(Pc,{style:{height:"100%"},children:_.jsx(Xe,{children:"Not enough participants for chart"})})})]})})}function Wan({globalConfig:e}){const[t,n]=I.useState(!1),[r,i]=I.useState({}),[s,o]=I.useState({}),{storageEngine:a}=Cs(),{user:u}=n_();I.useEffect(()=>{(async()=>{n(!0);const f={},d={},h=async m=>{const g=await E4(m,e);if(a){if(f[m]=await a.getAllParticipantsDataByStudy(m),g===null)return;if(a instanceof vc){const y=await a.getModes(m);d[m]=y.analyticsInterfacePubliclyAccessible}}};await(async()=>{const m=e.configsList.map(g=>h(g));try{await Promise.all(m),i(f),o(d)}catch(g){console.error("Error fetching data:",g)}finally{n(!1)}})()})()},[e,a]);const l=e.configsList.map(c=>r[c]&&((s[c]||u.isAdmin)&&!e.configs[c].test?_.jsx(Ha.Col,{span:{md:12,xl:6},children:_.jsx(qan,{studyId:c,allParticipants:r[c]})},`${c}-panel`):null));return _.jsxs(_.Fragment,{children:[_.jsx(KC,{studyIds:e.configsList}),_.jsx(pi.Main,{children:_.jsx(Oc,{fluid:!0,children:_.jsxs(pe,{children:[_.jsx(ui,{mb:20,order:4,children:"Your Studies:"}),_.jsxs(Ha,{children:[l.length>0?l:_.jsx(Oc,{mt:100,children:_.jsx(Xe,{children:"No studies to show. If you believe that this is in error, make sure that you are logged in."})}),_.jsx(Ll,{visible:t})]})]})})})]})}function Gan(){const{user:e,triggerAuth:t}=n_(),{storageEngine:n}=Cs(),[r,i]=I.useState(!1),[s,o]=I.useState([]),[a,u]=I.useState(!1),[l,c]=I.useState(!1),[f,d]=I.useState(!1),[h,p]=I.useState(!1),[m,g]=I.useState(!1),[y,v]=I.useState(""),[b,w]=I.useState(null),E=jxe({initialValues:{email:""},validate:{email:fat("Invalid email")}});I.useEffect(()=>{(async()=>{if(u(!0),n instanceof vc){const P=await(n==null?void 0:n.getUserManagementData("authentication"));i(P==null?void 0:P.isEnabled);const $=await(n==null?void 0:n.getUserManagementData("adminUsers"));$&&$.adminUsersList&&o($==null?void 0:$.adminUsersList.map(F=>F.email))}else i(!1);u(!1)})()},[n]);const T=async()=>{if(u(!0),n instanceof vc){const O=await Aje(n,u);O&&O.email?(w({email:O.email,uid:O.uid}),p(!0)):g(!0)}u(!1)},S=async O=>{u(!0),n instanceof vc&&O&&(await n.changeAuth(!0),await n.addAdminUser(O),o([O.email]),i(!0),t()),p(!1),u(!1)},C=async()=>{if(u(!0),n instanceof vc){await n.addAdminUser({email:E.values.email,uid:null});const O=await n.getUserManagementData("adminUsers");o(O==null?void 0:O.adminUsersList.map(P=>P.email))}u(!1),c(!1),E.setValues({email:""})},A=O=>{d(!0),v(O)},k=async()=>{if(u(!0),n instanceof vc){await n.removeAdminUser(y);const O=await n.getUserManagementData("adminUsers");o(O==null?void 0:O.adminUsersList.map(P=>P.email))}d(!1),u(!1)},N=I.useMemo(()=>n instanceof vc,[n]);return _.jsxs(_.Fragment,{children:[_.jsx(Oc,{children:_.jsxs(Lb,{withBorder:!0,style:{backgroundColor:"#FAFAFA"},children:[_.jsx(ui,{mb:20,order:3,children:"Authentication"}),r?_.jsx(Nt,{children:_.jsx(Xe,{children:"Authentication is enabled."})}):_.jsxs(Nt,{justify:"space-between",children:[_.jsx(pe,{children:_.jsx(Xe,{children:"Authentication is currently disabled."})}),_.jsx(ai,{label:"You can only enable auth when using Firebase",disabled:N,children:_.jsx(fn,{onClick:O=>N?T():O.preventDefault(),color:"green","data-disabled":N?void 0:!0,style:{"&[dataDisabled]":{pointerEvents:"all"}},children:"Enable Authentication"})})]}),r?_.jsxs(Nt,{mt:40,direction:"column",children:[_.jsxs(Nt,{style:{borderBottom:"1px solid #dedede"},direction:"row",justify:"space-between",mb:15,pb:15,children:[_.jsx(ui,{order:6,children:"Enabled Users"}),_.jsx(DY,{style:{cursor:"pointer"},onClick:()=>c(!0)})]}),s.length>0?s.map(O=>{var P;return _.jsxs(Nt,{justify:"space-between",mb:10,children:[_.jsx(Xe,{children:O}),O===((P=e.user)==null?void 0:P.email)?_.jsx(Xe,{color:"blue",size:"xs",children:"You"}):_.jsx($b,{variant:"subtle",onClick:()=>A(O),children:_.jsx(Mwe,{color:"red"})})]},O)}):null]}):null]})}),_.jsx(Yi,{opened:l,onClose:()=>c(!1),title:"Add Admin User",children:_.jsxs(pe,{component:"form",onSubmit:E.onSubmit(()=>C()),children:[_.jsx(Qg,{leftSection:_.jsx(sQe,{}),placeholder:"User Gmail Account",...E.getInputProps("email")}),_.jsxs(Nt,{mt:30,justify:"right",children:[_.jsx(fn,{mr:5,variant:"subtle",color:"red",onClick:()=>c(!1),children:"Cancel"}),_.jsx(fn,{type:"submit",children:"Save"})]})]})}),_.jsxs(Yi,{opened:f,size:"large",onClose:()=>d(!1),title:_.jsxs(Xe,{fw:700,children:["Remove",y,"?"]}),children:[_.jsxs(Xe,{mt:40,children:["Are you sure you want to remove",_.jsx("b",{children:y})," ","as an administrator?"]}),_.jsxs(Nt,{mt:40,justify:"right",children:[_.jsx(fn,{mr:5,variant:"subtle",color:"red",onClick:()=>d(!1),children:"Cancel"}),_.jsx(fn,{onClick:()=>k(),children:"Yes, I'm sure."})]})]}),_.jsxs(Yi,{opened:h,size:"md",onClose:()=>p(!1),title:_.jsx(Xe,{fw:700,children:"Enable Authentication?"}),children:[_.jsxs(Xe,{mt:40,children:["User"," ",_.jsx("b",{children:b==null?void 0:b.email})," ","will be added as an administrator to this application. After enabling authentication, you'll be able to add additional users below. This action cannot be undone."]}),_.jsxs(Nt,{mt:40,justify:"right",children:[_.jsx(fn,{mr:5,variant:"subtle",color:"red",onClick:()=>p(!1),children:"Cancel"}),_.jsx(fn,{onClick:()=>S(b),children:"Yes, I'm sure."})]})]}),_.jsxs(Yi,{opened:m,size:"md",onClose:()=>g(!1),title:_.jsx(Xe,{fw:700,children:"An Error Occurred."}),children:[_.jsxs(Xe,{mt:40,children:["An error has occurred when trying to enable authentication. Please consult the"," ",_.jsx("a",{href:"https://revisit.dev/docs/data-and-deployment/authentication-authorization/adding-removing-ui/",target:"_blank",rel:"noreferrer",children:"documentation"})," ","for more information."]}),_.jsx(Nt,{mt:40,justify:"right",children:_.jsx(fn,{mr:5,onClick:()=>g(!1),children:"Okay"})})]}),_.jsx(Ll,{visible:a})]})}class Yan extends uOe{constructor(){super("localStorage");hu(this,"studyDatabase");hu(this,"studyId")}async connect(){this.connected=!0}async initializeStudyDb(n,r){this.studyId=n,this.studyDatabase=await fw.createInstance({name:n});const i=await this.getCurrentConfigHash(),s=await sM(JSON.stringify(r));i&&i!==s&&(await this.studyDatabase.removeItem("sequenceArray"),await this.clearCurrentParticipantId()),this.studyDatabase.setItem("currentConfigHash",s);const o=await this.studyDatabase.getItem("configs");await this.studyDatabase.setItem("configs",{...o,[s]:r})}async initializeParticipantSession(n,r,i,s,o){var f;if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");if(await this.getCurrentParticipantId(o),!this.currentParticipantId)throw new Error("Participant not initialized");const a=await this.studyDatabase.getItem(this.currentParticipantId);if(a)return a;const u=await this.getModes(n),l=await sM(JSON.stringify(i)),c={participantId:this.currentParticipantId,participantConfigHash:l,sequence:await this.getSequence(),answers:{},searchParams:r,metadata:s,completed:!1,rejected:!1};return u.dataCollectionEnabled&&await((f=this.studyDatabase)==null?void 0:f.setItem(this.currentParticipantId,c)),c}async getCurrentConfigHash(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");return await this.studyDatabase.getItem("currentConfigHash")}async getAllConfigsFromHash(n,r){return await fw.createInstance({name:r}).getItem("configs")||{}}async getCurrentParticipantId(n){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const r=await this.studyDatabase.getItem("currentParticipant");if(n)return this.currentParticipantId=n,await this.studyDatabase.setItem("currentParticipant",n),n;if(r)return this.currentParticipantId=r,r;const i=iM();return await this.studyDatabase.setItem("currentParticipant",i),this.currentParticipantId=i,i}async clearCurrentParticipantId(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");await this.studyDatabase.removeItem("currentParticipant")}async saveAnswers(n){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");if(!this.currentParticipantId)throw new Error("Participant not initialized");const r=await this.studyDatabase.getItem(this.currentParticipantId);if(!r)throw new Error("Participant not initialized");r.answers=n,await this.studyDatabase.setItem(this.currentParticipantId,r)}async setSequenceArray(n){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");this.studyDatabase.setItem("sequenceArray",n)}async getSequence(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=await this.studyDatabase.getItem("sequenceArray");if(!n)throw new Error("Latin square not initialized");if(!this.studyId)throw new Error("Study ID not initialized");const r=await this.getModes(this.studyId),i=r.dataCollectionEnabled?n.pop():n[Math.floor(Math.random()*n.length-1)];if(!i)throw new Error("Latin square is empty");return r.dataCollectionEnabled&&await this.studyDatabase.setItem("sequenceArray",n),i}async getSequenceArray(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");return await this.studyDatabase.getItem("sequenceArray")}async getAllParticipantsData(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=[];return await this.studyDatabase.iterate((r,i)=>{i!=="config"&&i!=="currentParticipant"&&i!=="sequenceArray"&&i!=="configs"&&i!=="currentConfigHash"&&i!=="modes"&&n.push(r)}),n}async getAllParticipantsDataByStudy(n){const r=fw.createInstance({name:n}),i=[];return await r.iterate((s,o)=>{o!=="config"&&o!=="currentParticipant"&&o!=="sequenceArray"&&o!=="configs"&&o!=="currentConfigHash"&&o!=="modes"&&i.push(s)}),i}async getParticipantData(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=await this.studyDatabase.getItem("currentParticipant");return n?await this.studyDatabase.getItem(n):null}async nextParticipant(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=iM();this.studyDatabase.setItem("currentParticipant",n)}async verifyCompletion(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=await this.getParticipantData();if(!n)throw new Error("Participant not initialized");return n.completed=!0,await this.studyDatabase.setItem(this.currentParticipantId,n),!0}async validateUser(n){return!0}async rejectParticipant(n,r){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const i=await this.studyDatabase.getItem(r);if(!i)throw new Error("Participant not found");if(i.rejected)return;i.rejected=!0;const s=await this.studyDatabase.getItem("sequenceArray");s&&(s.unshift(i.sequence),this.setSequenceArray(s)),await this.studyDatabase.setItem(r,i)}async setMode(n,r,i){this.studyDatabase=await fw.createInstance({name:n});const s=await this.studyDatabase.getItem("modes");if(!s)throw new Error("Modes not initialized");s[r]=i,this.studyDatabase.setItem("modes",s)}async getModes(n){this.studyDatabase=await fw.createInstance({name:n});const r=await this.studyDatabase.getItem("modes");if(r)return r;const i={dataCollectionEnabled:!0,studyNavigatorEnabled:!0,analyticsInterfacePubliclyAccessible:!0};return this.studyDatabase.setItem("modes",i),i}_verifyStudyDatabase(n){return n!==void 0}}async function Kan(){let e,t=!1;{const n=new vc;await n.connect(),n.isConnected()?e=n:t=!0}if(t){const n=new Yan;await n.connect(),e=n}return e}function J_({title:e}){const t=Py();return I.useEffect(()=>{document.title=e},[t,e]),null}async function Xan(){const t=await(await fetch(`${Vu}global.json`)).text();return ARt(t)}function Qan(){const[e,t]=I.useState(null),[n,r]=I.useState({});I.useEffect(()=>{async function a(){e&&r(await ZRt(e))}a()},[e]),I.useEffect(()=>{e||Xan().then(a=>{t(a)})},[e]);const{storageEngine:i,setStorageEngine:s}=Cs();I.useEffect(()=>{if(i!==void 0)return;async function a(){const u=await Kan();s(u)}a()},[s,i]);const o=async a=>i instanceof vc?!(await i.getModes(a)).analyticsInterfacePubliclyAccessible:!1;return e?_.jsx(YXe,{basename:Vu,children:_.jsx(J6t,{children:_.jsx(eQe,{children:_.jsx(pi,{padding:"md",header:{height:70},children:_.jsxs(HXe,{children:[_.jsx(Tp,{path:"/",element:_.jsxs(_.Fragment,{children:[_.jsx(J_,{title:"ReVISit | Home"}),_.jsx(KC,{studyIds:e.configsList}),_.jsx(yst,{globalConfig:e,studyConfigs:n})]})}),_.jsx(Tp,{path:"/:studyId/*",element:_.jsxs(_.Fragment,{children:[_.jsx(J_,{title:"ReVISit | Study"}),_.jsx(eNt,{globalConfig:e})]})}),_.jsx(Tp,{path:"/analysis/dashboard",element:_.jsxs(_.Fragment,{children:[_.jsx(J_,{title:"ReVISit | Analysis"}),_.jsx(Wan,{globalConfig:e})]})}),_.jsx(Tp,{path:"/analysis",element:_.jsx(kV,{to:"/analysis/dashboard"})}),_.jsx(Tp,{path:"/analysis/stats/:studyId/:tab/:trialId?",element:_.jsxs(_.Fragment,{children:[_.jsx(J_,{title:"ReVISit | Analysis"}),_.jsx(dye,{paramToCheck:"studyId",paramCallback:o,children:_.jsx(Won,{globalConfig:e})})]})}),_.jsx(Tp,{path:"/analysis/stats/:studyId",element:_.jsx(kV,{to:"./table",replace:!0})}),_.jsx(Tp,{path:"/settings",element:_.jsxs(dye,{children:[_.jsx(J_,{title:"ReVISit | Settings"}),_.jsx(KC,{studyIds:e.configsList}),_.jsx(pi.Main,{children:_.jsx(Gan,{})})]})}),_.jsx(Tp,{path:"/login",element:_.jsxs(_.Fragment,{children:[_.jsx(J_,{title:"ReVISit | Login"}),_.jsx(KC,{studyIds:e.configsList}),_.jsx(pi.Main,{children:_.jsx(Gon,{})})]})})]})})})})}):null}YB.createRoot(document.getElementById("root")).render(_.jsx(_r.StrictMode,{children:_.jsx(eXe,{children:_.jsxs(Q1e,{children:[_.jsx(Qm,{}),_.jsx(Qan,{})]})})}))});export default Jan();
