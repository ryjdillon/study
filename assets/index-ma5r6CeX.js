var KRe=Object.defineProperty;var XRe=(e,t,n)=>t in e?KRe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var QRe=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var ia=(e,t,n)=>(XRe(e,typeof t!="symbol"?t+"":t,n),n);var W7t=QRe((jUt,vX)=>{function JRe(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in e)){const o=Object.getOwnPropertyDescriptor(r,i);o&&Object.defineProperty(e,i,o.get?o:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();var so=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ku(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function ZRe(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var i=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return e[r]}})}),n}var ble={exports:{}},VP={},_le={exports:{}},yn={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var MS=Symbol.for("react.element"),eNe=Symbol.for("react.portal"),tNe=Symbol.for("react.fragment"),nNe=Symbol.for("react.strict_mode"),rNe=Symbol.for("react.profiler"),iNe=Symbol.for("react.provider"),oNe=Symbol.for("react.context"),sNe=Symbol.for("react.forward_ref"),aNe=Symbol.for("react.suspense"),uNe=Symbol.for("react.memo"),lNe=Symbol.for("react.lazy"),zX=Symbol.iterator;function cNe(e){return e===null||typeof e!="object"?null:(e=zX&&e[zX]||e["@@iterator"],typeof e=="function"?e:null)}var wle={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Ele=Object.assign,xle={};function i_(e,t,n){this.props=e,this.context=t,this.refs=xle,this.updater=n||wle}i_.prototype.isReactComponent={};i_.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};i_.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Tle(){}Tle.prototype=i_.prototype;function uB(e,t,n){this.props=e,this.context=t,this.refs=xle,this.updater=n||wle}var lB=uB.prototype=new Tle;lB.constructor=uB;Ele(lB,i_.prototype);lB.isPureReactComponent=!0;var VX=Array.isArray,Sle=Object.prototype.hasOwnProperty,cB={current:null},Cle={key:!0,ref:!0,__self:!0,__source:!0};function Ale(e,t,n){var r,i={},o=null,s=null;if(t!=null)for(r in t.ref!==void 0&&(s=t.ref),t.key!==void 0&&(o=""+t.key),t)Sle.call(t,r)&&!Cle.hasOwnProperty(r)&&(i[r]=t[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var u=Array(a),l=0;l<a;l++)u[l]=arguments[l+2];i.children=u}if(e&&e.defaultProps)for(r in a=e.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:MS,type:e,key:o,ref:s,props:i,_owner:cB.current}}function fNe(e,t){return{$$typeof:MS,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function fB(e){return typeof e=="object"&&e!==null&&e.$$typeof===MS}function dNe(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var HX=/\/+/g;function _M(e,t){return typeof e=="object"&&e!==null&&e.key!=null?dNe(""+e.key):t.toString(36)}function yk(e,t,n,r,i){var o=typeof e;(o==="undefined"||o==="boolean")&&(e=null);var s=!1;if(e===null)s=!0;else switch(o){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case MS:case eNe:s=!0}}if(s)return s=e,i=i(s),e=r===""?"."+_M(s,0):r,VX(i)?(n="",e!=null&&(n=e.replace(HX,"$&/")+"/"),yk(i,t,n,"",function(l){return l})):i!=null&&(fB(i)&&(i=fNe(i,n+(!i.key||s&&s.key===i.key?"":(""+i.key).replace(HX,"$&/")+"/")+e)),t.push(i)),1;if(s=0,r=r===""?".":r+":",VX(e))for(var a=0;a<e.length;a++){o=e[a];var u=r+_M(o,a);s+=yk(o,t,n,u,i)}else if(u=cNe(e),typeof u=="function")for(e=u.call(e),a=0;!(o=e.next()).done;)o=o.value,u=r+_M(o,a++),s+=yk(o,t,n,u,i);else if(o==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return s}function DA(e,t,n){if(e==null)return e;var r=[],i=0;return yk(e,r,"","",function(o){return t.call(n,o,i++)}),r}function hNe(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Xs={current:null},vk={transition:null},pNe={ReactCurrentDispatcher:Xs,ReactCurrentBatchConfig:vk,ReactCurrentOwner:cB};function kle(){throw Error("act(...) is not supported in production builds of React.")}yn.Children={map:DA,forEach:function(e,t,n){DA(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return DA(e,function(){t++}),t},toArray:function(e){return DA(e,function(t){return t})||[]},only:function(e){if(!fB(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};yn.Component=i_;yn.Fragment=tNe;yn.Profiler=rNe;yn.PureComponent=uB;yn.StrictMode=nNe;yn.Suspense=aNe;yn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=pNe;yn.act=kle;yn.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=Ele({},e.props),i=e.key,o=e.ref,s=e._owner;if(t!=null){if(t.ref!==void 0&&(o=t.ref,s=cB.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(u in t)Sle.call(t,u)&&!Cle.hasOwnProperty(u)&&(r[u]=t[u]===void 0&&a!==void 0?a[u]:t[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){a=Array(u);for(var l=0;l<u;l++)a[l]=arguments[l+2];r.children=a}return{$$typeof:MS,type:e.type,key:i,ref:o,props:r,_owner:s}};yn.createContext=function(e){return e={$$typeof:oNe,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:iNe,_context:e},e.Consumer=e};yn.createElement=Ale;yn.createFactory=function(e){var t=Ale.bind(null,e);return t.type=e,t};yn.createRef=function(){return{current:null}};yn.forwardRef=function(e){return{$$typeof:sNe,render:e}};yn.isValidElement=fB;yn.lazy=function(e){return{$$typeof:lNe,_payload:{_status:-1,_result:e},_init:hNe}};yn.memo=function(e,t){return{$$typeof:uNe,type:e,compare:t===void 0?null:t}};yn.startTransition=function(e){var t=vk.transition;vk.transition={};try{e()}finally{vk.transition=t}};yn.unstable_act=kle;yn.useCallback=function(e,t){return Xs.current.useCallback(e,t)};yn.useContext=function(e){return Xs.current.useContext(e)};yn.useDebugValue=function(){};yn.useDeferredValue=function(e){return Xs.current.useDeferredValue(e)};yn.useEffect=function(e,t){return Xs.current.useEffect(e,t)};yn.useId=function(){return Xs.current.useId()};yn.useImperativeHandle=function(e,t,n){return Xs.current.useImperativeHandle(e,t,n)};yn.useInsertionEffect=function(e,t){return Xs.current.useInsertionEffect(e,t)};yn.useLayoutEffect=function(e,t){return Xs.current.useLayoutEffect(e,t)};yn.useMemo=function(e,t){return Xs.current.useMemo(e,t)};yn.useReducer=function(e,t,n){return Xs.current.useReducer(e,t,n)};yn.useRef=function(e){return Xs.current.useRef(e)};yn.useState=function(e){return Xs.current.useState(e)};yn.useSyncExternalStore=function(e,t,n){return Xs.current.useSyncExternalStore(e,t,n)};yn.useTransition=function(){return Xs.current.useTransition()};yn.version="18.3.1";_le.exports=yn;var k=_le.exports;const Yn=ku(k),kI=JRe({__proto__:null,default:Yn},[k]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mNe=k,gNe=Symbol.for("react.element"),yNe=Symbol.for("react.fragment"),vNe=Object.prototype.hasOwnProperty,bNe=mNe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,_Ne={key:!0,ref:!0,__self:!0,__source:!0};function Ile(e,t,n){var r,i={},o=null,s=null;n!==void 0&&(o=""+n),t.key!==void 0&&(o=""+t.key),t.ref!==void 0&&(s=t.ref);for(r in t)vNe.call(t,r)&&!_Ne.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)i[r]===void 0&&(i[r]=t[r]);return{$$typeof:gNe,type:e,key:o,ref:s,props:i,_owner:bNe.current}}VP.Fragment=yNe;VP.jsx=Ile;VP.jsxs=Ile;ble.exports=VP;var b=ble.exports,Q4={},Rle={exports:{}},Iu={},Nle={exports:{}},Ple={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(U,H){var P=U.length;U.push(H);e:for(;0<P;){var z=P-1>>>1,W=U[z];if(0<i(W,H))U[z]=H,U[P]=W,P=z;else break e}}function n(U){return U.length===0?null:U[0]}function r(U){if(U.length===0)return null;var H=U[0],P=U.pop();if(P!==H){U[0]=P;e:for(var z=0,W=U.length,j=W>>>1;z<j;){var q=2*(z+1)-1,G=U[q],te=q+1,pe=U[te];if(0>i(G,P))te<W&&0>i(pe,G)?(U[z]=pe,U[te]=P,z=te):(U[z]=G,U[q]=P,z=q);else if(te<W&&0>i(pe,P))U[z]=pe,U[te]=P,z=te;else break e}}return H}function i(U,H){var P=U.sortIndex-H.sortIndex;return P!==0?P:U.id-H.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var s=Date,a=s.now();e.unstable_now=function(){return s.now()-a}}var u=[],l=[],c=1,f=null,d=3,h=!1,p=!1,m=!1,g=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function _(U){for(var H=n(l);H!==null;){if(H.callback===null)r(l);else if(H.startTime<=U)r(l),H.sortIndex=H.expirationTime,t(u,H);else break;H=n(l)}}function w(U){if(m=!1,_(U),!p)if(n(u)!==null)p=!0,L(E);else{var H=n(l);H!==null&&B(w,H.startTime-U)}}function E(U,H){p=!1,m&&(m=!1,y(C),C=-1),h=!0;var P=d;try{for(_(H),f=n(u);f!==null&&(!(f.expirationTime>H)||U&&!N());){var z=f.callback;if(typeof z=="function"){f.callback=null,d=f.priorityLevel;var W=z(f.expirationTime<=H);H=e.unstable_now(),typeof W=="function"?f.callback=W:f===n(u)&&r(u),_(H)}else r(u);f=n(u)}if(f!==null)var j=!0;else{var q=n(l);q!==null&&B(w,q.startTime-H),j=!1}return j}finally{f=null,d=P,h=!1}}var S=!1,T=null,C=-1,A=5,R=-1;function N(){return!(e.unstable_now()-R<A)}function O(){if(T!==null){var U=e.unstable_now();R=U;var H=!0;try{H=T(!0,U)}finally{H?D():(S=!1,T=null)}}else S=!1}var D;if(typeof v=="function")D=function(){v(O)};else if(typeof MessageChannel<"u"){var M=new MessageChannel,F=M.port2;M.port1.onmessage=O,D=function(){F.postMessage(null)}}else D=function(){g(O,0)};function L(U){T=U,S||(S=!0,D())}function B(U,H){C=g(function(){U(e.unstable_now())},H)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(U){U.callback=null},e.unstable_continueExecution=function(){p||h||(p=!0,L(E))},e.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<U?Math.floor(1e3/U):5},e.unstable_getCurrentPriorityLevel=function(){return d},e.unstable_getFirstCallbackNode=function(){return n(u)},e.unstable_next=function(U){switch(d){case 1:case 2:case 3:var H=3;break;default:H=d}var P=d;d=H;try{return U()}finally{d=P}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(U,H){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var P=d;d=U;try{return H()}finally{d=P}},e.unstable_scheduleCallback=function(U,H,P){var z=e.unstable_now();switch(typeof P=="object"&&P!==null?(P=P.delay,P=typeof P=="number"&&0<P?z+P:z):P=z,U){case 1:var W=-1;break;case 2:W=250;break;case 5:W=1073741823;break;case 4:W=1e4;break;default:W=5e3}return W=P+W,U={id:c++,callback:H,priorityLevel:U,startTime:P,expirationTime:W,sortIndex:-1},P>z?(U.sortIndex=P,t(l,U),n(u)===null&&U===n(l)&&(m?(y(C),C=-1):m=!0,B(w,P-z))):(U.sortIndex=W,t(u,U),p||h||(p=!0,L(E))),U},e.unstable_shouldYield=N,e.unstable_wrapCallback=function(U){var H=d;return function(){var P=d;d=H;try{return U.apply(this,arguments)}finally{d=P}}}})(Ple);Nle.exports=Ple;var wNe=Nle.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ENe=k,pu=wNe;function Je(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Dle=new Set,nT={};function py(e,t){X1(e,t),X1(e+"Capture",t)}function X1(e,t){for(nT[e]=t,e=0;e<t.length;e++)Dle.add(t[e])}var Gd=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),J4=Object.prototype.hasOwnProperty,xNe=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,qX={},WX={};function TNe(e){return J4.call(WX,e)?!0:J4.call(qX,e)?!1:xNe.test(e)?WX[e]=!0:(qX[e]=!0,!1)}function SNe(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function CNe(e,t,n,r){if(t===null||typeof t>"u"||SNe(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Qs(e,t,n,r,i,o,s){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=s}var Bo={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Bo[e]=new Qs(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Bo[t]=new Qs(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Bo[e]=new Qs(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Bo[e]=new Qs(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Bo[e]=new Qs(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Bo[e]=new Qs(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Bo[e]=new Qs(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Bo[e]=new Qs(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Bo[e]=new Qs(e,5,!1,e.toLowerCase(),null,!1,!1)});var dB=/[\-:]([a-z])/g;function hB(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(dB,hB);Bo[t]=new Qs(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(dB,hB);Bo[t]=new Qs(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(dB,hB);Bo[t]=new Qs(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Bo[e]=new Qs(e,1,!1,e.toLowerCase(),null,!1,!1)});Bo.xlinkHref=new Qs("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Bo[e]=new Qs(e,1,!1,e.toLowerCase(),null,!0,!0)});function pB(e,t,n,r){var i=Bo.hasOwnProperty(t)?Bo[t]:null;(i!==null?i.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(CNe(t,n,i,r)&&(n=null),r||i===null?TNe(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=n===null?i.type===3?!1:"":n:(t=i.attributeName,r=i.attributeNamespace,n===null?e.removeAttribute(t):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var mh=ENe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,OA=Symbol.for("react.element"),Wv=Symbol.for("react.portal"),Gv=Symbol.for("react.fragment"),mB=Symbol.for("react.strict_mode"),Z4=Symbol.for("react.profiler"),Ole=Symbol.for("react.provider"),$le=Symbol.for("react.context"),gB=Symbol.for("react.forward_ref"),eF=Symbol.for("react.suspense"),tF=Symbol.for("react.suspense_list"),yB=Symbol.for("react.memo"),Yh=Symbol.for("react.lazy"),Mle=Symbol.for("react.offscreen"),GX=Symbol.iterator;function vw(e){return e===null||typeof e!="object"?null:(e=GX&&e[GX]||e["@@iterator"],typeof e=="function"?e:null)}var Xr=Object.assign,wM;function mE(e){if(wM===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);wM=t&&t[1]||""}return`
`+wM+e}var EM=!1;function xM(e,t){if(!e||EM)return"";EM=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(l){var r=l}Reflect.construct(e,[],t)}else{try{t.call()}catch(l){r=l}e.call(t.prototype)}else{try{throw Error()}catch(l){r=l}e()}}catch(l){if(l&&r&&typeof l.stack=="string"){for(var i=l.stack.split(`
`),o=r.stack.split(`
`),s=i.length-1,a=o.length-1;1<=s&&0<=a&&i[s]!==o[a];)a--;for(;1<=s&&0<=a;s--,a--)if(i[s]!==o[a]){if(s!==1||a!==1)do if(s--,a--,0>a||i[s]!==o[a]){var u=`
`+i[s].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}while(1<=s&&0<=a);break}}}finally{EM=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?mE(e):""}function ANe(e){switch(e.tag){case 5:return mE(e.type);case 16:return mE("Lazy");case 13:return mE("Suspense");case 19:return mE("SuspenseList");case 0:case 2:case 15:return e=xM(e.type,!1),e;case 11:return e=xM(e.type.render,!1),e;case 1:return e=xM(e.type,!0),e;default:return""}}function nF(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Gv:return"Fragment";case Wv:return"Portal";case Z4:return"Profiler";case mB:return"StrictMode";case eF:return"Suspense";case tF:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case $le:return(e.displayName||"Context")+".Consumer";case Ole:return(e._context.displayName||"Context")+".Provider";case gB:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case yB:return t=e.displayName||null,t!==null?t:nF(e.type)||"Memo";case Yh:t=e._payload,e=e._init;try{return nF(e(t))}catch{}}return null}function kNe(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return nF(t);case 8:return t===mB?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Jp(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Lle(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function INe(e){var t=Lle(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(s){r=""+s,o.call(this,s)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(s){r=""+s},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function $A(e){e._valueTracker||(e._valueTracker=INe(e))}function Fle(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Lle(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function II(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function rF(e,t){var n=t.checked;return Xr({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function YX(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=Jp(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function jle(e,t){t=t.checked,t!=null&&pB(e,"checked",t,!1)}function iF(e,t){jle(e,t);var n=Jp(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?oF(e,t.type,n):t.hasOwnProperty("defaultValue")&&oF(e,t.type,Jp(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function KX(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function oF(e,t,n){(t!=="number"||II(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var gE=Array.isArray;function m1(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Jp(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,r&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function sF(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Je(91));return Xr({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function XX(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(Je(92));if(gE(n)){if(1<n.length)throw Error(Je(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:Jp(n)}}function Ble(e,t){var n=Jp(t.value),r=Jp(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function QX(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Ule(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function aF(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Ule(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var MA,zle=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(MA=MA||document.createElement("div"),MA.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=MA.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function rT(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var ix={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},RNe=["Webkit","ms","Moz","O"];Object.keys(ix).forEach(function(e){RNe.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),ix[t]=ix[e]})});function Vle(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||ix.hasOwnProperty(e)&&ix[e]?(""+t).trim():t+"px"}function Hle(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=Vle(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}var NNe=Xr({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function uF(e,t){if(t){if(NNe[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Je(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Je(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(Je(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Je(62))}}function lF(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var cF=null;function vB(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var fF=null,g1=null,y1=null;function JX(e){if(e=jS(e)){if(typeof fF!="function")throw Error(Je(280));var t=e.stateNode;t&&(t=YP(t),fF(e.stateNode,e.type,t))}}function qle(e){g1?y1?y1.push(e):y1=[e]:g1=e}function Wle(){if(g1){var e=g1,t=y1;if(y1=g1=null,JX(e),t)for(e=0;e<t.length;e++)JX(t[e])}}function Gle(e,t){return e(t)}function Yle(){}var TM=!1;function Kle(e,t,n){if(TM)return e(t,n);TM=!0;try{return Gle(e,t,n)}finally{TM=!1,(g1!==null||y1!==null)&&(Yle(),Wle())}}function iT(e,t){var n=e.stateNode;if(n===null)return null;var r=YP(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(Je(231,t,typeof n));return n}var dF=!1;if(Gd)try{var bw={};Object.defineProperty(bw,"passive",{get:function(){dF=!0}}),window.addEventListener("test",bw,bw),window.removeEventListener("test",bw,bw)}catch{dF=!1}function PNe(e,t,n,r,i,o,s,a,u){var l=Array.prototype.slice.call(arguments,3);try{t.apply(n,l)}catch(c){this.onError(c)}}var ox=!1,RI=null,NI=!1,hF=null,DNe={onError:function(e){ox=!0,RI=e}};function ONe(e,t,n,r,i,o,s,a,u){ox=!1,RI=null,PNe.apply(DNe,arguments)}function $Ne(e,t,n,r,i,o,s,a,u){if(ONe.apply(this,arguments),ox){if(ox){var l=RI;ox=!1,RI=null}else throw Error(Je(198));NI||(NI=!0,hF=l)}}function my(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function Xle(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function ZX(e){if(my(e)!==e)throw Error(Je(188))}function MNe(e){var t=e.alternate;if(!t){if(t=my(e),t===null)throw Error(Je(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(i===null)break;var o=i.alternate;if(o===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return ZX(i),e;if(o===r)return ZX(i),t;o=o.sibling}throw Error(Je(188))}if(n.return!==r.return)n=i,r=o;else{for(var s=!1,a=i.child;a;){if(a===n){s=!0,n=i,r=o;break}if(a===r){s=!0,r=i,n=o;break}a=a.sibling}if(!s){for(a=o.child;a;){if(a===n){s=!0,n=o,r=i;break}if(a===r){s=!0,r=o,n=i;break}a=a.sibling}if(!s)throw Error(Je(189))}}if(n.alternate!==r)throw Error(Je(190))}if(n.tag!==3)throw Error(Je(188));return n.stateNode.current===n?e:t}function Qle(e){return e=MNe(e),e!==null?Jle(e):null}function Jle(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Jle(e);if(t!==null)return t;e=e.sibling}return null}var Zle=pu.unstable_scheduleCallback,eQ=pu.unstable_cancelCallback,LNe=pu.unstable_shouldYield,FNe=pu.unstable_requestPaint,vi=pu.unstable_now,jNe=pu.unstable_getCurrentPriorityLevel,bB=pu.unstable_ImmediatePriority,ece=pu.unstable_UserBlockingPriority,PI=pu.unstable_NormalPriority,BNe=pu.unstable_LowPriority,tce=pu.unstable_IdlePriority,HP=null,ef=null;function UNe(e){if(ef&&typeof ef.onCommitFiberRoot=="function")try{ef.onCommitFiberRoot(HP,e,void 0,(e.current.flags&128)===128)}catch{}}var Jl=Math.clz32?Math.clz32:HNe,zNe=Math.log,VNe=Math.LN2;function HNe(e){return e>>>=0,e===0?32:31-(zNe(e)/VNe|0)|0}var LA=64,FA=4194304;function yE(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function DI(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,i=e.suspendedLanes,o=e.pingedLanes,s=n&268435455;if(s!==0){var a=s&~i;a!==0?r=yE(a):(o&=s,o!==0&&(r=yE(o)))}else s=n&~i,s!==0?r=yE(s):o!==0&&(r=yE(o));if(r===0)return 0;if(t!==0&&t!==r&&!(t&i)&&(i=r&-r,o=t&-t,i>=o||i===16&&(o&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-Jl(t),i=1<<n,r|=e[n],t&=~i;return r}function qNe(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function WNe(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,o=e.pendingLanes;0<o;){var s=31-Jl(o),a=1<<s,u=i[s];u===-1?(!(a&n)||a&r)&&(i[s]=qNe(a,t)):u<=t&&(e.expiredLanes|=a),o&=~a}}function pF(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function nce(){var e=LA;return LA<<=1,!(LA&4194240)&&(LA=64),e}function SM(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function LS(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Jl(t),e[t]=n}function GNe(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-Jl(n),o=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~o}}function _B(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Jl(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var or=0;function rce(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var ice,wB,oce,sce,ace,mF=!1,jA=[],Ap=null,kp=null,Ip=null,oT=new Map,sT=new Map,np=[],YNe="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function tQ(e,t){switch(e){case"focusin":case"focusout":Ap=null;break;case"dragenter":case"dragleave":kp=null;break;case"mouseover":case"mouseout":Ip=null;break;case"pointerover":case"pointerout":oT.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":sT.delete(t.pointerId)}}function _w(e,t,n,r,i,o){return e===null||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},t!==null&&(t=jS(t),t!==null&&wB(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function KNe(e,t,n,r,i){switch(t){case"focusin":return Ap=_w(Ap,e,t,n,r,i),!0;case"dragenter":return kp=_w(kp,e,t,n,r,i),!0;case"mouseover":return Ip=_w(Ip,e,t,n,r,i),!0;case"pointerover":var o=i.pointerId;return oT.set(o,_w(oT.get(o)||null,e,t,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,sT.set(o,_w(sT.get(o)||null,e,t,n,r,i)),!0}return!1}function uce(e){var t=Xg(e.target);if(t!==null){var n=my(t);if(n!==null){if(t=n.tag,t===13){if(t=Xle(n),t!==null){e.blockedOn=t,ace(e.priority,function(){oce(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function bk(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=gF(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);cF=r,n.target.dispatchEvent(r),cF=null}else return t=jS(n),t!==null&&wB(t),e.blockedOn=n,!1;t.shift()}return!0}function nQ(e,t,n){bk(e)&&n.delete(t)}function XNe(){mF=!1,Ap!==null&&bk(Ap)&&(Ap=null),kp!==null&&bk(kp)&&(kp=null),Ip!==null&&bk(Ip)&&(Ip=null),oT.forEach(nQ),sT.forEach(nQ)}function ww(e,t){e.blockedOn===t&&(e.blockedOn=null,mF||(mF=!0,pu.unstable_scheduleCallback(pu.unstable_NormalPriority,XNe)))}function aT(e){function t(i){return ww(i,e)}if(0<jA.length){ww(jA[0],e);for(var n=1;n<jA.length;n++){var r=jA[n];r.blockedOn===e&&(r.blockedOn=null)}}for(Ap!==null&&ww(Ap,e),kp!==null&&ww(kp,e),Ip!==null&&ww(Ip,e),oT.forEach(t),sT.forEach(t),n=0;n<np.length;n++)r=np[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<np.length&&(n=np[0],n.blockedOn===null);)uce(n),n.blockedOn===null&&np.shift()}var v1=mh.ReactCurrentBatchConfig,OI=!0;function QNe(e,t,n,r){var i=or,o=v1.transition;v1.transition=null;try{or=1,EB(e,t,n,r)}finally{or=i,v1.transition=o}}function JNe(e,t,n,r){var i=or,o=v1.transition;v1.transition=null;try{or=4,EB(e,t,n,r)}finally{or=i,v1.transition=o}}function EB(e,t,n,r){if(OI){var i=gF(e,t,n,r);if(i===null)$M(e,t,r,$I,n),tQ(e,r);else if(KNe(i,e,t,n,r))r.stopPropagation();else if(tQ(e,r),t&4&&-1<YNe.indexOf(e)){for(;i!==null;){var o=jS(i);if(o!==null&&ice(o),o=gF(e,t,n,r),o===null&&$M(e,t,r,$I,n),o===i)break;i=o}i!==null&&r.stopPropagation()}else $M(e,t,r,null,n)}}var $I=null;function gF(e,t,n,r){if($I=null,e=vB(r),e=Xg(e),e!==null)if(t=my(e),t===null)e=null;else if(n=t.tag,n===13){if(e=Xle(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return $I=e,null}function lce(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(jNe()){case bB:return 1;case ece:return 4;case PI:case BNe:return 16;case tce:return 536870912;default:return 16}default:return 16}}var dp=null,xB=null,_k=null;function cce(){if(_k)return _k;var e,t=xB,n=t.length,r,i="value"in dp?dp.value:dp.textContent,o=i.length;for(e=0;e<n&&t[e]===i[e];e++);var s=n-e;for(r=1;r<=s&&t[n-r]===i[o-r];r++);return _k=i.slice(e,1<r?1-r:void 0)}function wk(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function BA(){return!0}function rQ(){return!1}function Ru(e){function t(n,r,i,o,s){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=o,this.target=s,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(n=e[a],this[a]=n?n(o):o[a]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?BA:rQ,this.isPropagationStopped=rQ,this}return Xr(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=BA)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=BA)},persist:function(){},isPersistent:BA}),t}var o_={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},TB=Ru(o_),FS=Xr({},o_,{view:0,detail:0}),ZNe=Ru(FS),CM,AM,Ew,qP=Xr({},FS,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:SB,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Ew&&(Ew&&e.type==="mousemove"?(CM=e.screenX-Ew.screenX,AM=e.screenY-Ew.screenY):AM=CM=0,Ew=e),CM)},movementY:function(e){return"movementY"in e?e.movementY:AM}}),iQ=Ru(qP),ePe=Xr({},qP,{dataTransfer:0}),tPe=Ru(ePe),nPe=Xr({},FS,{relatedTarget:0}),kM=Ru(nPe),rPe=Xr({},o_,{animationName:0,elapsedTime:0,pseudoElement:0}),iPe=Ru(rPe),oPe=Xr({},o_,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),sPe=Ru(oPe),aPe=Xr({},o_,{data:0}),oQ=Ru(aPe),uPe={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},lPe={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},cPe={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function fPe(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=cPe[e])?!!t[e]:!1}function SB(){return fPe}var dPe=Xr({},FS,{key:function(e){if(e.key){var t=uPe[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=wk(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?lPe[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:SB,charCode:function(e){return e.type==="keypress"?wk(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?wk(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),hPe=Ru(dPe),pPe=Xr({},qP,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),sQ=Ru(pPe),mPe=Xr({},FS,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:SB}),gPe=Ru(mPe),yPe=Xr({},o_,{propertyName:0,elapsedTime:0,pseudoElement:0}),vPe=Ru(yPe),bPe=Xr({},qP,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),_Pe=Ru(bPe),wPe=[9,13,27,32],CB=Gd&&"CompositionEvent"in window,sx=null;Gd&&"documentMode"in document&&(sx=document.documentMode);var EPe=Gd&&"TextEvent"in window&&!sx,fce=Gd&&(!CB||sx&&8<sx&&11>=sx),aQ=" ",uQ=!1;function dce(e,t){switch(e){case"keyup":return wPe.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function hce(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Yv=!1;function xPe(e,t){switch(e){case"compositionend":return hce(t);case"keypress":return t.which!==32?null:(uQ=!0,aQ);case"textInput":return e=t.data,e===aQ&&uQ?null:e;default:return null}}function TPe(e,t){if(Yv)return e==="compositionend"||!CB&&dce(e,t)?(e=cce(),_k=xB=dp=null,Yv=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return fce&&t.locale!=="ko"?null:t.data;default:return null}}var SPe={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function lQ(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!SPe[e.type]:t==="textarea"}function pce(e,t,n,r){qle(r),t=MI(t,"onChange"),0<t.length&&(n=new TB("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var ax=null,uT=null;function CPe(e){Sce(e,0)}function WP(e){var t=Qv(e);if(Fle(t))return e}function APe(e,t){if(e==="change")return t}var mce=!1;if(Gd){var IM;if(Gd){var RM="oninput"in document;if(!RM){var cQ=document.createElement("div");cQ.setAttribute("oninput","return;"),RM=typeof cQ.oninput=="function"}IM=RM}else IM=!1;mce=IM&&(!document.documentMode||9<document.documentMode)}function fQ(){ax&&(ax.detachEvent("onpropertychange",gce),uT=ax=null)}function gce(e){if(e.propertyName==="value"&&WP(uT)){var t=[];pce(t,uT,e,vB(e)),Kle(CPe,t)}}function kPe(e,t,n){e==="focusin"?(fQ(),ax=t,uT=n,ax.attachEvent("onpropertychange",gce)):e==="focusout"&&fQ()}function IPe(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return WP(uT)}function RPe(e,t){if(e==="click")return WP(t)}function NPe(e,t){if(e==="input"||e==="change")return WP(t)}function PPe(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var sc=typeof Object.is=="function"?Object.is:PPe;function lT(e,t){if(sc(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!J4.call(t,i)||!sc(e[i],t[i]))return!1}return!0}function dQ(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function hQ(e,t){var n=dQ(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=dQ(n)}}function yce(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?yce(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function vce(){for(var e=window,t=II();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=II(e.document)}return t}function AB(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function DPe(e){var t=vce(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&yce(n.ownerDocument.documentElement,n)){if(r!==null&&AB(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=r.end===void 0?o:Math.min(r.end,i),!e.extend&&o>r&&(i=r,r=o,o=i),i=hQ(n,o);var s=hQ(n,r);i&&s&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==s.node||e.focusOffset!==s.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),o>r?(e.addRange(t),e.extend(s.node,s.offset)):(t.setEnd(s.node,s.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var OPe=Gd&&"documentMode"in document&&11>=document.documentMode,Kv=null,yF=null,ux=null,vF=!1;function pQ(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;vF||Kv==null||Kv!==II(r)||(r=Kv,"selectionStart"in r&&AB(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),ux&&lT(ux,r)||(ux=r,r=MI(yF,"onSelect"),0<r.length&&(t=new TB("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Kv)))}function UA(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Xv={animationend:UA("Animation","AnimationEnd"),animationiteration:UA("Animation","AnimationIteration"),animationstart:UA("Animation","AnimationStart"),transitionend:UA("Transition","TransitionEnd")},NM={},bce={};Gd&&(bce=document.createElement("div").style,"AnimationEvent"in window||(delete Xv.animationend.animation,delete Xv.animationiteration.animation,delete Xv.animationstart.animation),"TransitionEvent"in window||delete Xv.transitionend.transition);function GP(e){if(NM[e])return NM[e];if(!Xv[e])return e;var t=Xv[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in bce)return NM[e]=t[n];return e}var _ce=GP("animationend"),wce=GP("animationiteration"),Ece=GP("animationstart"),xce=GP("transitionend"),Tce=new Map,mQ="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Rm(e,t){Tce.set(e,t),py(t,[e])}for(var PM=0;PM<mQ.length;PM++){var DM=mQ[PM],$Pe=DM.toLowerCase(),MPe=DM[0].toUpperCase()+DM.slice(1);Rm($Pe,"on"+MPe)}Rm(_ce,"onAnimationEnd");Rm(wce,"onAnimationIteration");Rm(Ece,"onAnimationStart");Rm("dblclick","onDoubleClick");Rm("focusin","onFocus");Rm("focusout","onBlur");Rm(xce,"onTransitionEnd");X1("onMouseEnter",["mouseout","mouseover"]);X1("onMouseLeave",["mouseout","mouseover"]);X1("onPointerEnter",["pointerout","pointerover"]);X1("onPointerLeave",["pointerout","pointerover"]);py("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));py("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));py("onBeforeInput",["compositionend","keypress","textInput","paste"]);py("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));py("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));py("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var vE="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),LPe=new Set("cancel close invalid load scroll toggle".split(" ").concat(vE));function gQ(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,$Ne(r,t,void 0,e),e.currentTarget=null}function Sce(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var s=r.length-1;0<=s;s--){var a=r[s],u=a.instance,l=a.currentTarget;if(a=a.listener,u!==o&&i.isPropagationStopped())break e;gQ(i,a,l),o=u}else for(s=0;s<r.length;s++){if(a=r[s],u=a.instance,l=a.currentTarget,a=a.listener,u!==o&&i.isPropagationStopped())break e;gQ(i,a,l),o=u}}}if(NI)throw e=hF,NI=!1,hF=null,e}function Ar(e,t){var n=t[xF];n===void 0&&(n=t[xF]=new Set);var r=e+"__bubble";n.has(r)||(Cce(t,e,2,!1),n.add(r))}function OM(e,t,n){var r=0;t&&(r|=4),Cce(n,e,r,t)}var zA="_reactListening"+Math.random().toString(36).slice(2);function cT(e){if(!e[zA]){e[zA]=!0,Dle.forEach(function(n){n!=="selectionchange"&&(LPe.has(n)||OM(n,!1,e),OM(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[zA]||(t[zA]=!0,OM("selectionchange",!1,t))}}function Cce(e,t,n,r){switch(lce(t)){case 1:var i=QNe;break;case 4:i=JNe;break;default:i=EB}n=i.bind(null,t,n,e),i=void 0,!dF||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),r?i!==void 0?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):i!==void 0?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function $M(e,t,n,r,i){var o=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var s=r.tag;if(s===3||s===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(s===4)for(s=r.return;s!==null;){var u=s.tag;if((u===3||u===4)&&(u=s.stateNode.containerInfo,u===i||u.nodeType===8&&u.parentNode===i))return;s=s.return}for(;a!==null;){if(s=Xg(a),s===null)return;if(u=s.tag,u===5||u===6){r=o=s;continue e}a=a.parentNode}}r=r.return}Kle(function(){var l=o,c=vB(n),f=[];e:{var d=Tce.get(e);if(d!==void 0){var h=TB,p=e;switch(e){case"keypress":if(wk(n)===0)break e;case"keydown":case"keyup":h=hPe;break;case"focusin":p="focus",h=kM;break;case"focusout":p="blur",h=kM;break;case"beforeblur":case"afterblur":h=kM;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=iQ;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=tPe;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=gPe;break;case _ce:case wce:case Ece:h=iPe;break;case xce:h=vPe;break;case"scroll":h=ZNe;break;case"wheel":h=_Pe;break;case"copy":case"cut":case"paste":h=sPe;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=sQ}var m=(t&4)!==0,g=!m&&e==="scroll",y=m?d!==null?d+"Capture":null:d;m=[];for(var v=l,_;v!==null;){_=v;var w=_.stateNode;if(_.tag===5&&w!==null&&(_=w,y!==null&&(w=iT(v,y),w!=null&&m.push(fT(v,w,_)))),g)break;v=v.return}0<m.length&&(d=new h(d,p,null,n,c),f.push({event:d,listeners:m}))}}if(!(t&7)){e:{if(d=e==="mouseover"||e==="pointerover",h=e==="mouseout"||e==="pointerout",d&&n!==cF&&(p=n.relatedTarget||n.fromElement)&&(Xg(p)||p[Yd]))break e;if((h||d)&&(d=c.window===c?c:(d=c.ownerDocument)?d.defaultView||d.parentWindow:window,h?(p=n.relatedTarget||n.toElement,h=l,p=p?Xg(p):null,p!==null&&(g=my(p),p!==g||p.tag!==5&&p.tag!==6)&&(p=null)):(h=null,p=l),h!==p)){if(m=iQ,w="onMouseLeave",y="onMouseEnter",v="mouse",(e==="pointerout"||e==="pointerover")&&(m=sQ,w="onPointerLeave",y="onPointerEnter",v="pointer"),g=h==null?d:Qv(h),_=p==null?d:Qv(p),d=new m(w,v+"leave",h,n,c),d.target=g,d.relatedTarget=_,w=null,Xg(c)===l&&(m=new m(y,v+"enter",p,n,c),m.target=_,m.relatedTarget=g,w=m),g=w,h&&p)t:{for(m=h,y=p,v=0,_=m;_;_=uv(_))v++;for(_=0,w=y;w;w=uv(w))_++;for(;0<v-_;)m=uv(m),v--;for(;0<_-v;)y=uv(y),_--;for(;v--;){if(m===y||y!==null&&m===y.alternate)break t;m=uv(m),y=uv(y)}m=null}else m=null;h!==null&&yQ(f,d,h,m,!1),p!==null&&g!==null&&yQ(f,g,p,m,!0)}}e:{if(d=l?Qv(l):window,h=d.nodeName&&d.nodeName.toLowerCase(),h==="select"||h==="input"&&d.type==="file")var E=APe;else if(lQ(d))if(mce)E=NPe;else{E=IPe;var S=kPe}else(h=d.nodeName)&&h.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(E=RPe);if(E&&(E=E(e,l))){pce(f,E,n,c);break e}S&&S(e,d,l),e==="focusout"&&(S=d._wrapperState)&&S.controlled&&d.type==="number"&&oF(d,"number",d.value)}switch(S=l?Qv(l):window,e){case"focusin":(lQ(S)||S.contentEditable==="true")&&(Kv=S,yF=l,ux=null);break;case"focusout":ux=yF=Kv=null;break;case"mousedown":vF=!0;break;case"contextmenu":case"mouseup":case"dragend":vF=!1,pQ(f,n,c);break;case"selectionchange":if(OPe)break;case"keydown":case"keyup":pQ(f,n,c)}var T;if(CB)e:{switch(e){case"compositionstart":var C="onCompositionStart";break e;case"compositionend":C="onCompositionEnd";break e;case"compositionupdate":C="onCompositionUpdate";break e}C=void 0}else Yv?dce(e,n)&&(C="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(C="onCompositionStart");C&&(fce&&n.locale!=="ko"&&(Yv||C!=="onCompositionStart"?C==="onCompositionEnd"&&Yv&&(T=cce()):(dp=c,xB="value"in dp?dp.value:dp.textContent,Yv=!0)),S=MI(l,C),0<S.length&&(C=new oQ(C,e,null,n,c),f.push({event:C,listeners:S}),T?C.data=T:(T=hce(n),T!==null&&(C.data=T)))),(T=EPe?xPe(e,n):TPe(e,n))&&(l=MI(l,"onBeforeInput"),0<l.length&&(c=new oQ("onBeforeInput","beforeinput",null,n,c),f.push({event:c,listeners:l}),c.data=T))}Sce(f,t)})}function fT(e,t,n){return{instance:e,listener:t,currentTarget:n}}function MI(e,t){for(var n=t+"Capture",r=[];e!==null;){var i=e,o=i.stateNode;i.tag===5&&o!==null&&(i=o,o=iT(e,n),o!=null&&r.unshift(fT(e,o,i)),o=iT(e,t),o!=null&&r.push(fT(e,o,i))),e=e.return}return r}function uv(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function yQ(e,t,n,r,i){for(var o=t._reactName,s=[];n!==null&&n!==r;){var a=n,u=a.alternate,l=a.stateNode;if(u!==null&&u===r)break;a.tag===5&&l!==null&&(a=l,i?(u=iT(n,o),u!=null&&s.unshift(fT(n,u,a))):i||(u=iT(n,o),u!=null&&s.push(fT(n,u,a)))),n=n.return}s.length!==0&&e.push({event:t,listeners:s})}var FPe=/\r\n?/g,jPe=/\u0000|\uFFFD/g;function vQ(e){return(typeof e=="string"?e:""+e).replace(FPe,`
`).replace(jPe,"")}function VA(e,t,n){if(t=vQ(t),vQ(e)!==t&&n)throw Error(Je(425))}function LI(){}var bF=null,_F=null;function wF(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var EF=typeof setTimeout=="function"?setTimeout:void 0,BPe=typeof clearTimeout=="function"?clearTimeout:void 0,bQ=typeof Promise=="function"?Promise:void 0,UPe=typeof queueMicrotask=="function"?queueMicrotask:typeof bQ<"u"?function(e){return bQ.resolve(null).then(e).catch(zPe)}:EF;function zPe(e){setTimeout(function(){throw e})}function MM(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){e.removeChild(i),aT(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);aT(t)}function Rp(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function _Q(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var s_=Math.random().toString(36).slice(2),Uc="__reactFiber$"+s_,dT="__reactProps$"+s_,Yd="__reactContainer$"+s_,xF="__reactEvents$"+s_,VPe="__reactListeners$"+s_,HPe="__reactHandles$"+s_;function Xg(e){var t=e[Uc];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Yd]||n[Uc]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=_Q(e);e!==null;){if(n=e[Uc])return n;e=_Q(e)}return t}e=n,n=e.parentNode}return null}function jS(e){return e=e[Uc]||e[Yd],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Qv(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Je(33))}function YP(e){return e[dT]||null}var TF=[],Jv=-1;function Nm(e){return{current:e}}function Dr(e){0>Jv||(e.current=TF[Jv],TF[Jv]=null,Jv--)}function Er(e,t){Jv++,TF[Jv]=e.current,e.current=t}var Zp={},vs=Nm(Zp),Ca=Nm(!1),T0=Zp;function Q1(e,t){var n=e.type.contextTypes;if(!n)return Zp;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i={},o;for(o in n)i[o]=t[o];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function Aa(e){return e=e.childContextTypes,e!=null}function FI(){Dr(Ca),Dr(vs)}function wQ(e,t,n){if(vs.current!==Zp)throw Error(Je(168));Er(vs,t),Er(Ca,n)}function Ace(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in t))throw Error(Je(108,kNe(e)||"Unknown",i));return Xr({},n,r)}function jI(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Zp,T0=vs.current,Er(vs,e),Er(Ca,Ca.current),!0}function EQ(e,t,n){var r=e.stateNode;if(!r)throw Error(Je(169));n?(e=Ace(e,t,T0),r.__reactInternalMemoizedMergedChildContext=e,Dr(Ca),Dr(vs),Er(vs,e)):Dr(Ca),Er(Ca,n)}var md=null,KP=!1,LM=!1;function kce(e){md===null?md=[e]:md.push(e)}function qPe(e){KP=!0,kce(e)}function Pm(){if(!LM&&md!==null){LM=!0;var e=0,t=or;try{var n=md;for(or=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}md=null,KP=!1}catch(i){throw md!==null&&(md=md.slice(e+1)),Zle(bB,Pm),i}finally{or=t,LM=!1}}return null}var Zv=[],e1=0,BI=null,UI=0,Uu=[],zu=0,S0=null,Ed=1,xd="";function Sg(e,t){Zv[e1++]=UI,Zv[e1++]=BI,BI=e,UI=t}function Ice(e,t,n){Uu[zu++]=Ed,Uu[zu++]=xd,Uu[zu++]=S0,S0=e;var r=Ed;e=xd;var i=32-Jl(r)-1;r&=~(1<<i),n+=1;var o=32-Jl(t)+i;if(30<o){var s=i-i%5;o=(r&(1<<s)-1).toString(32),r>>=s,i-=s,Ed=1<<32-Jl(t)+i|n<<i|r,xd=o+e}else Ed=1<<o|n<<i|r,xd=e}function kB(e){e.return!==null&&(Sg(e,1),Ice(e,1,0))}function IB(e){for(;e===BI;)BI=Zv[--e1],Zv[e1]=null,UI=Zv[--e1],Zv[e1]=null;for(;e===S0;)S0=Uu[--zu],Uu[zu]=null,xd=Uu[--zu],Uu[zu]=null,Ed=Uu[--zu],Uu[zu]=null}var lu=null,tu=null,Br=!1,Ll=null;function Rce(e,t){var n=Yu(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function xQ(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,lu=e,tu=Rp(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,lu=e,tu=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=S0!==null?{id:Ed,overflow:xd}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Yu(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,lu=e,tu=null,!0):!1;default:return!1}}function SF(e){return(e.mode&1)!==0&&(e.flags&128)===0}function CF(e){if(Br){var t=tu;if(t){var n=t;if(!xQ(e,t)){if(SF(e))throw Error(Je(418));t=Rp(n.nextSibling);var r=lu;t&&xQ(e,t)?Rce(r,n):(e.flags=e.flags&-4097|2,Br=!1,lu=e)}}else{if(SF(e))throw Error(Je(418));e.flags=e.flags&-4097|2,Br=!1,lu=e}}}function TQ(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;lu=e}function HA(e){if(e!==lu)return!1;if(!Br)return TQ(e),Br=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!wF(e.type,e.memoizedProps)),t&&(t=tu)){if(SF(e))throw Nce(),Error(Je(418));for(;t;)Rce(e,t),t=Rp(t.nextSibling)}if(TQ(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Je(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){tu=Rp(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}tu=null}}else tu=lu?Rp(e.stateNode.nextSibling):null;return!0}function Nce(){for(var e=tu;e;)e=Rp(e.nextSibling)}function J1(){tu=lu=null,Br=!1}function RB(e){Ll===null?Ll=[e]:Ll.push(e)}var WPe=mh.ReactCurrentBatchConfig;function xw(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Je(309));var r=n.stateNode}if(!r)throw Error(Je(147,e));var i=r,o=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===o?t.ref:(t=function(s){var a=i.refs;s===null?delete a[o]:a[o]=s},t._stringRef=o,t)}if(typeof e!="string")throw Error(Je(284));if(!n._owner)throw Error(Je(290,e))}return e}function qA(e,t){throw e=Object.prototype.toString.call(t),Error(Je(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function SQ(e){var t=e._init;return t(e._payload)}function Pce(e){function t(y,v){if(e){var _=y.deletions;_===null?(y.deletions=[v],y.flags|=16):_.push(v)}}function n(y,v){if(!e)return null;for(;v!==null;)t(y,v),v=v.sibling;return null}function r(y,v){for(y=new Map;v!==null;)v.key!==null?y.set(v.key,v):y.set(v.index,v),v=v.sibling;return y}function i(y,v){return y=Op(y,v),y.index=0,y.sibling=null,y}function o(y,v,_){return y.index=_,e?(_=y.alternate,_!==null?(_=_.index,_<v?(y.flags|=2,v):_):(y.flags|=2,v)):(y.flags|=1048576,v)}function s(y){return e&&y.alternate===null&&(y.flags|=2),y}function a(y,v,_,w){return v===null||v.tag!==6?(v=HM(_,y.mode,w),v.return=y,v):(v=i(v,_),v.return=y,v)}function u(y,v,_,w){var E=_.type;return E===Gv?c(y,v,_.props.children,w,_.key):v!==null&&(v.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===Yh&&SQ(E)===v.type)?(w=i(v,_.props),w.ref=xw(y,v,_),w.return=y,w):(w=kk(_.type,_.key,_.props,null,y.mode,w),w.ref=xw(y,v,_),w.return=y,w)}function l(y,v,_,w){return v===null||v.tag!==4||v.stateNode.containerInfo!==_.containerInfo||v.stateNode.implementation!==_.implementation?(v=qM(_,y.mode,w),v.return=y,v):(v=i(v,_.children||[]),v.return=y,v)}function c(y,v,_,w,E){return v===null||v.tag!==7?(v=c0(_,y.mode,w,E),v.return=y,v):(v=i(v,_),v.return=y,v)}function f(y,v,_){if(typeof v=="string"&&v!==""||typeof v=="number")return v=HM(""+v,y.mode,_),v.return=y,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case OA:return _=kk(v.type,v.key,v.props,null,y.mode,_),_.ref=xw(y,null,v),_.return=y,_;case Wv:return v=qM(v,y.mode,_),v.return=y,v;case Yh:var w=v._init;return f(y,w(v._payload),_)}if(gE(v)||vw(v))return v=c0(v,y.mode,_,null),v.return=y,v;qA(y,v)}return null}function d(y,v,_,w){var E=v!==null?v.key:null;if(typeof _=="string"&&_!==""||typeof _=="number")return E!==null?null:a(y,v,""+_,w);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case OA:return _.key===E?u(y,v,_,w):null;case Wv:return _.key===E?l(y,v,_,w):null;case Yh:return E=_._init,d(y,v,E(_._payload),w)}if(gE(_)||vw(_))return E!==null?null:c(y,v,_,w,null);qA(y,_)}return null}function h(y,v,_,w,E){if(typeof w=="string"&&w!==""||typeof w=="number")return y=y.get(_)||null,a(v,y,""+w,E);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case OA:return y=y.get(w.key===null?_:w.key)||null,u(v,y,w,E);case Wv:return y=y.get(w.key===null?_:w.key)||null,l(v,y,w,E);case Yh:var S=w._init;return h(y,v,_,S(w._payload),E)}if(gE(w)||vw(w))return y=y.get(_)||null,c(v,y,w,E,null);qA(v,w)}return null}function p(y,v,_,w){for(var E=null,S=null,T=v,C=v=0,A=null;T!==null&&C<_.length;C++){T.index>C?(A=T,T=null):A=T.sibling;var R=d(y,T,_[C],w);if(R===null){T===null&&(T=A);break}e&&T&&R.alternate===null&&t(y,T),v=o(R,v,C),S===null?E=R:S.sibling=R,S=R,T=A}if(C===_.length)return n(y,T),Br&&Sg(y,C),E;if(T===null){for(;C<_.length;C++)T=f(y,_[C],w),T!==null&&(v=o(T,v,C),S===null?E=T:S.sibling=T,S=T);return Br&&Sg(y,C),E}for(T=r(y,T);C<_.length;C++)A=h(T,y,C,_[C],w),A!==null&&(e&&A.alternate!==null&&T.delete(A.key===null?C:A.key),v=o(A,v,C),S===null?E=A:S.sibling=A,S=A);return e&&T.forEach(function(N){return t(y,N)}),Br&&Sg(y,C),E}function m(y,v,_,w){var E=vw(_);if(typeof E!="function")throw Error(Je(150));if(_=E.call(_),_==null)throw Error(Je(151));for(var S=E=null,T=v,C=v=0,A=null,R=_.next();T!==null&&!R.done;C++,R=_.next()){T.index>C?(A=T,T=null):A=T.sibling;var N=d(y,T,R.value,w);if(N===null){T===null&&(T=A);break}e&&T&&N.alternate===null&&t(y,T),v=o(N,v,C),S===null?E=N:S.sibling=N,S=N,T=A}if(R.done)return n(y,T),Br&&Sg(y,C),E;if(T===null){for(;!R.done;C++,R=_.next())R=f(y,R.value,w),R!==null&&(v=o(R,v,C),S===null?E=R:S.sibling=R,S=R);return Br&&Sg(y,C),E}for(T=r(y,T);!R.done;C++,R=_.next())R=h(T,y,C,R.value,w),R!==null&&(e&&R.alternate!==null&&T.delete(R.key===null?C:R.key),v=o(R,v,C),S===null?E=R:S.sibling=R,S=R);return e&&T.forEach(function(O){return t(y,O)}),Br&&Sg(y,C),E}function g(y,v,_,w){if(typeof _=="object"&&_!==null&&_.type===Gv&&_.key===null&&(_=_.props.children),typeof _=="object"&&_!==null){switch(_.$$typeof){case OA:e:{for(var E=_.key,S=v;S!==null;){if(S.key===E){if(E=_.type,E===Gv){if(S.tag===7){n(y,S.sibling),v=i(S,_.props.children),v.return=y,y=v;break e}}else if(S.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===Yh&&SQ(E)===S.type){n(y,S.sibling),v=i(S,_.props),v.ref=xw(y,S,_),v.return=y,y=v;break e}n(y,S);break}else t(y,S);S=S.sibling}_.type===Gv?(v=c0(_.props.children,y.mode,w,_.key),v.return=y,y=v):(w=kk(_.type,_.key,_.props,null,y.mode,w),w.ref=xw(y,v,_),w.return=y,y=w)}return s(y);case Wv:e:{for(S=_.key;v!==null;){if(v.key===S)if(v.tag===4&&v.stateNode.containerInfo===_.containerInfo&&v.stateNode.implementation===_.implementation){n(y,v.sibling),v=i(v,_.children||[]),v.return=y,y=v;break e}else{n(y,v);break}else t(y,v);v=v.sibling}v=qM(_,y.mode,w),v.return=y,y=v}return s(y);case Yh:return S=_._init,g(y,v,S(_._payload),w)}if(gE(_))return p(y,v,_,w);if(vw(_))return m(y,v,_,w);qA(y,_)}return typeof _=="string"&&_!==""||typeof _=="number"?(_=""+_,v!==null&&v.tag===6?(n(y,v.sibling),v=i(v,_),v.return=y,y=v):(n(y,v),v=HM(_,y.mode,w),v.return=y,y=v),s(y)):n(y,v)}return g}var Z1=Pce(!0),Dce=Pce(!1),zI=Nm(null),VI=null,t1=null,NB=null;function PB(){NB=t1=VI=null}function DB(e){var t=zI.current;Dr(zI),e._currentValue=t}function AF(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function b1(e,t){VI=e,NB=t1=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(_a=!0),e.firstContext=null)}function rl(e){var t=e._currentValue;if(NB!==e)if(e={context:e,memoizedValue:t,next:null},t1===null){if(VI===null)throw Error(Je(308));t1=e,VI.dependencies={lanes:0,firstContext:e}}else t1=t1.next=e;return t}var Qg=null;function OB(e){Qg===null?Qg=[e]:Qg.push(e)}function Oce(e,t,n,r){var i=t.interleaved;return i===null?(n.next=n,OB(t)):(n.next=i.next,i.next=n),t.interleaved=n,Kd(e,r)}function Kd(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Kh=!1;function $B(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function $ce(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Od(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Np(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,Fn&2){var i=r.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Kd(e,n)}return i=r.interleaved,i===null?(t.next=t,OB(r)):(t.next=i.next,i.next=t),r.interleaved=t,Kd(e,n)}function Ek(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,_B(e,n)}}function CQ(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?i=o=s:o=o.next=s,n=n.next}while(n!==null);o===null?i=o=t:o=o.next=t}else i=o=t;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function HI(e,t,n,r){var i=e.updateQueue;Kh=!1;var o=i.firstBaseUpdate,s=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var u=a,l=u.next;u.next=null,s===null?o=l:s.next=l,s=u;var c=e.alternate;c!==null&&(c=c.updateQueue,a=c.lastBaseUpdate,a!==s&&(a===null?c.firstBaseUpdate=l:a.next=l,c.lastBaseUpdate=u))}if(o!==null){var f=i.baseState;s=0,c=l=u=null,a=o;do{var d=a.lane,h=a.eventTime;if((r&d)===d){c!==null&&(c=c.next={eventTime:h,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=e,m=a;switch(d=t,h=n,m.tag){case 1:if(p=m.payload,typeof p=="function"){f=p.call(h,f,d);break e}f=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=m.payload,d=typeof p=="function"?p.call(h,f,d):p,d==null)break e;f=Xr({},f,d);break e;case 2:Kh=!0}}a.callback!==null&&a.lane!==0&&(e.flags|=64,d=i.effects,d===null?i.effects=[a]:d.push(a))}else h={eventTime:h,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},c===null?(l=c=h,u=f):c=c.next=h,s|=d;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;d=a,a=d.next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}while(!0);if(c===null&&(u=f),i.baseState=u,i.firstBaseUpdate=l,i.lastBaseUpdate=c,t=i.shared.interleaved,t!==null){i=t;do s|=i.lane,i=i.next;while(i!==t)}else o===null&&(i.shared.lanes=0);A0|=s,e.lanes=s,e.memoizedState=f}}function AQ(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(Je(191,i));i.call(r)}}}var BS={},tf=Nm(BS),hT=Nm(BS),pT=Nm(BS);function Jg(e){if(e===BS)throw Error(Je(174));return e}function MB(e,t){switch(Er(pT,t),Er(hT,e),Er(tf,BS),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:aF(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=aF(t,e)}Dr(tf),Er(tf,t)}function eb(){Dr(tf),Dr(hT),Dr(pT)}function Mce(e){Jg(pT.current);var t=Jg(tf.current),n=aF(t,e.type);t!==n&&(Er(hT,e),Er(tf,n))}function LB(e){hT.current===e&&(Dr(tf),Dr(hT))}var Yr=Nm(0);function qI(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var FM=[];function FB(){for(var e=0;e<FM.length;e++)FM[e]._workInProgressVersionPrimary=null;FM.length=0}var xk=mh.ReactCurrentDispatcher,jM=mh.ReactCurrentBatchConfig,C0=0,Kr=null,Mi=null,no=null,WI=!1,lx=!1,mT=0,GPe=0;function Xo(){throw Error(Je(321))}function jB(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!sc(e[n],t[n]))return!1;return!0}function BB(e,t,n,r,i,o){if(C0=o,Kr=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,xk.current=e===null||e.memoizedState===null?QPe:JPe,e=n(r,i),lx){o=0;do{if(lx=!1,mT=0,25<=o)throw Error(Je(301));o+=1,no=Mi=null,t.updateQueue=null,xk.current=ZPe,e=n(r,i)}while(lx)}if(xk.current=GI,t=Mi!==null&&Mi.next!==null,C0=0,no=Mi=Kr=null,WI=!1,t)throw Error(Je(300));return e}function UB(){var e=mT!==0;return mT=0,e}function $c(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return no===null?Kr.memoizedState=no=e:no=no.next=e,no}function il(){if(Mi===null){var e=Kr.alternate;e=e!==null?e.memoizedState:null}else e=Mi.next;var t=no===null?Kr.memoizedState:no.next;if(t!==null)no=t,Mi=e;else{if(e===null)throw Error(Je(310));Mi=e,e={memoizedState:Mi.memoizedState,baseState:Mi.baseState,baseQueue:Mi.baseQueue,queue:Mi.queue,next:null},no===null?Kr.memoizedState=no=e:no=no.next=e}return no}function gT(e,t){return typeof t=="function"?t(e):t}function BM(e){var t=il(),n=t.queue;if(n===null)throw Error(Je(311));n.lastRenderedReducer=e;var r=Mi,i=r.baseQueue,o=n.pending;if(o!==null){if(i!==null){var s=i.next;i.next=o.next,o.next=s}r.baseQueue=i=o,n.pending=null}if(i!==null){o=i.next,r=r.baseState;var a=s=null,u=null,l=o;do{var c=l.lane;if((C0&c)===c)u!==null&&(u=u.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:e(r,l.action);else{var f={lane:c,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};u===null?(a=u=f,s=r):u=u.next=f,Kr.lanes|=c,A0|=c}l=l.next}while(l!==null&&l!==o);u===null?s=r:u.next=a,sc(r,t.memoizedState)||(_a=!0),t.memoizedState=r,t.baseState=s,t.baseQueue=u,n.lastRenderedState=r}if(e=n.interleaved,e!==null){i=e;do o=i.lane,Kr.lanes|=o,A0|=o,i=i.next;while(i!==e)}else i===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function UM(e){var t=il(),n=t.queue;if(n===null)throw Error(Je(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(i!==null){n.pending=null;var s=i=i.next;do o=e(o,s.action),s=s.next;while(s!==i);sc(o,t.memoizedState)||(_a=!0),t.memoizedState=o,t.baseQueue===null&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Lce(){}function Fce(e,t){var n=Kr,r=il(),i=t(),o=!sc(r.memoizedState,i);if(o&&(r.memoizedState=i,_a=!0),r=r.queue,zB(Uce.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||no!==null&&no.memoizedState.tag&1){if(n.flags|=2048,yT(9,Bce.bind(null,n,r,i,t),void 0,null),ho===null)throw Error(Je(349));C0&30||jce(n,t,i)}return i}function jce(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Kr.updateQueue,t===null?(t={lastEffect:null,stores:null},Kr.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function Bce(e,t,n,r){t.value=n,t.getSnapshot=r,zce(t)&&Vce(e)}function Uce(e,t,n){return n(function(){zce(t)&&Vce(e)})}function zce(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!sc(e,n)}catch{return!0}}function Vce(e){var t=Kd(e,1);t!==null&&Zl(t,e,1,-1)}function kQ(e){var t=$c();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:gT,lastRenderedState:e},t.queue=e,e=e.dispatch=XPe.bind(null,Kr,e),[t.memoizedState,e]}function yT(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Kr.updateQueue,t===null?(t={lastEffect:null,stores:null},Kr.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function Hce(){return il().memoizedState}function Tk(e,t,n,r){var i=$c();Kr.flags|=e,i.memoizedState=yT(1|t,n,void 0,r===void 0?null:r)}function XP(e,t,n,r){var i=il();r=r===void 0?null:r;var o=void 0;if(Mi!==null){var s=Mi.memoizedState;if(o=s.destroy,r!==null&&jB(r,s.deps)){i.memoizedState=yT(t,n,o,r);return}}Kr.flags|=e,i.memoizedState=yT(1|t,n,o,r)}function IQ(e,t){return Tk(8390656,8,e,t)}function zB(e,t){return XP(2048,8,e,t)}function qce(e,t){return XP(4,2,e,t)}function Wce(e,t){return XP(4,4,e,t)}function Gce(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Yce(e,t,n){return n=n!=null?n.concat([e]):null,XP(4,4,Gce.bind(null,t,e),n)}function VB(){}function Kce(e,t){var n=il();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&jB(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Xce(e,t){var n=il();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&jB(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Qce(e,t,n){return C0&21?(sc(n,t)||(n=nce(),Kr.lanes|=n,A0|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,_a=!0),e.memoizedState=n)}function YPe(e,t){var n=or;or=n!==0&&4>n?n:4,e(!0);var r=jM.transition;jM.transition={};try{e(!1),t()}finally{or=n,jM.transition=r}}function Jce(){return il().memoizedState}function KPe(e,t,n){var r=Dp(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Zce(e))efe(t,n);else if(n=Oce(e,t,n,r),n!==null){var i=Us();Zl(n,e,r,i),tfe(n,t,r)}}function XPe(e,t,n){var r=Dp(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Zce(e))efe(t,i);else{var o=e.alternate;if(e.lanes===0&&(o===null||o.lanes===0)&&(o=t.lastRenderedReducer,o!==null))try{var s=t.lastRenderedState,a=o(s,n);if(i.hasEagerState=!0,i.eagerState=a,sc(a,s)){var u=t.interleaved;u===null?(i.next=i,OB(t)):(i.next=u.next,u.next=i),t.interleaved=i;return}}catch{}finally{}n=Oce(e,t,i,r),n!==null&&(i=Us(),Zl(n,e,r,i),tfe(n,t,r))}}function Zce(e){var t=e.alternate;return e===Kr||t!==null&&t===Kr}function efe(e,t){lx=WI=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function tfe(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,_B(e,n)}}var GI={readContext:rl,useCallback:Xo,useContext:Xo,useEffect:Xo,useImperativeHandle:Xo,useInsertionEffect:Xo,useLayoutEffect:Xo,useMemo:Xo,useReducer:Xo,useRef:Xo,useState:Xo,useDebugValue:Xo,useDeferredValue:Xo,useTransition:Xo,useMutableSource:Xo,useSyncExternalStore:Xo,useId:Xo,unstable_isNewReconciler:!1},QPe={readContext:rl,useCallback:function(e,t){return $c().memoizedState=[e,t===void 0?null:t],e},useContext:rl,useEffect:IQ,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Tk(4194308,4,Gce.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Tk(4194308,4,e,t)},useInsertionEffect:function(e,t){return Tk(4,2,e,t)},useMemo:function(e,t){var n=$c();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=$c();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=KPe.bind(null,Kr,e),[r.memoizedState,e]},useRef:function(e){var t=$c();return e={current:e},t.memoizedState=e},useState:kQ,useDebugValue:VB,useDeferredValue:function(e){return $c().memoizedState=e},useTransition:function(){var e=kQ(!1),t=e[0];return e=YPe.bind(null,e[1]),$c().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Kr,i=$c();if(Br){if(n===void 0)throw Error(Je(407));n=n()}else{if(n=t(),ho===null)throw Error(Je(349));C0&30||jce(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,IQ(Uce.bind(null,r,o,e),[e]),r.flags|=2048,yT(9,Bce.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=$c(),t=ho.identifierPrefix;if(Br){var n=xd,r=Ed;n=(r&~(1<<32-Jl(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=mT++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=GPe++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},JPe={readContext:rl,useCallback:Kce,useContext:rl,useEffect:zB,useImperativeHandle:Yce,useInsertionEffect:qce,useLayoutEffect:Wce,useMemo:Xce,useReducer:BM,useRef:Hce,useState:function(){return BM(gT)},useDebugValue:VB,useDeferredValue:function(e){var t=il();return Qce(t,Mi.memoizedState,e)},useTransition:function(){var e=BM(gT)[0],t=il().memoizedState;return[e,t]},useMutableSource:Lce,useSyncExternalStore:Fce,useId:Jce,unstable_isNewReconciler:!1},ZPe={readContext:rl,useCallback:Kce,useContext:rl,useEffect:zB,useImperativeHandle:Yce,useInsertionEffect:qce,useLayoutEffect:Wce,useMemo:Xce,useReducer:UM,useRef:Hce,useState:function(){return UM(gT)},useDebugValue:VB,useDeferredValue:function(e){var t=il();return Mi===null?t.memoizedState=e:Qce(t,Mi.memoizedState,e)},useTransition:function(){var e=UM(gT)[0],t=il().memoizedState;return[e,t]},useMutableSource:Lce,useSyncExternalStore:Fce,useId:Jce,unstable_isNewReconciler:!1};function Pl(e,t){if(e&&e.defaultProps){t=Xr({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function kF(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Xr({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var QP={isMounted:function(e){return(e=e._reactInternals)?my(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Us(),i=Dp(e),o=Od(r,i);o.payload=t,n!=null&&(o.callback=n),t=Np(e,o,i),t!==null&&(Zl(t,e,i,r),Ek(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Us(),i=Dp(e),o=Od(r,i);o.tag=1,o.payload=t,n!=null&&(o.callback=n),t=Np(e,o,i),t!==null&&(Zl(t,e,i,r),Ek(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Us(),r=Dp(e),i=Od(n,r);i.tag=2,t!=null&&(i.callback=t),t=Np(e,i,r),t!==null&&(Zl(t,e,r,n),Ek(t,e,r))}};function RQ(e,t,n,r,i,o,s){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,o,s):t.prototype&&t.prototype.isPureReactComponent?!lT(n,r)||!lT(i,o):!0}function nfe(e,t,n){var r=!1,i=Zp,o=t.contextType;return typeof o=="object"&&o!==null?o=rl(o):(i=Aa(t)?T0:vs.current,r=t.contextTypes,o=(r=r!=null)?Q1(e,i):Zp),t=new t(n,o),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=QP,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),t}function NQ(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&QP.enqueueReplaceState(t,t.state,null)}function IF(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},$B(e);var o=t.contextType;typeof o=="object"&&o!==null?i.context=rl(o):(o=Aa(t)?T0:vs.current,i.context=Q1(e,o)),i.state=e.memoizedState,o=t.getDerivedStateFromProps,typeof o=="function"&&(kF(e,t,o,n),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&QP.enqueueReplaceState(i,i.state,null),HI(e,n,i,r),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function tb(e,t){try{var n="",r=t;do n+=ANe(r),r=r.return;while(r);var i=n}catch(o){i=`
Error generating stack: `+o.message+`
`+o.stack}return{value:e,source:t,stack:i,digest:null}}function zM(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function RF(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var eDe=typeof WeakMap=="function"?WeakMap:Map;function rfe(e,t,n){n=Od(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){KI||(KI=!0,BF=r),RF(e,t)},n}function ife(e,t,n){n=Od(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){RF(e,t)}}var o=e.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){RF(e,t),typeof r!="function"&&(Pp===null?Pp=new Set([this]):Pp.add(this));var s=t.stack;this.componentDidCatch(t.value,{componentStack:s!==null?s:""})}),n}function PQ(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new eDe;var i=new Set;r.set(t,i)}else i=r.get(t),i===void 0&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=pDe.bind(null,e,t,n),t.then(e,e))}function DQ(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function OQ(e,t,n,r,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Od(-1,1),t.tag=2,Np(n,t,1))),n.lanes|=1),e)}var tDe=mh.ReactCurrentOwner,_a=!1;function Ps(e,t,n,r){t.child=e===null?Dce(t,null,n,r):Z1(t,e.child,n,r)}function $Q(e,t,n,r,i){n=n.render;var o=t.ref;return b1(t,i),r=BB(e,t,n,r,o,i),n=UB(),e!==null&&!_a?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Xd(e,t,i)):(Br&&n&&kB(t),t.flags|=1,Ps(e,t,r,i),t.child)}function MQ(e,t,n,r,i){if(e===null){var o=n.type;return typeof o=="function"&&!QB(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=o,ofe(e,t,o,r,i)):(e=kk(n.type,null,r,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(o=e.child,!(e.lanes&i)){var s=o.memoizedProps;if(n=n.compare,n=n!==null?n:lT,n(s,r)&&e.ref===t.ref)return Xd(e,t,i)}return t.flags|=1,e=Op(o,r),e.ref=t.ref,e.return=t,t.child=e}function ofe(e,t,n,r,i){if(e!==null){var o=e.memoizedProps;if(lT(o,r)&&e.ref===t.ref)if(_a=!1,t.pendingProps=r=o,(e.lanes&i)!==0)e.flags&131072&&(_a=!0);else return t.lanes=e.lanes,Xd(e,t,i)}return NF(e,t,n,r,i)}function sfe(e,t,n){var r=t.pendingProps,i=r.children,o=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Er(r1,Xa),Xa|=n;else{if(!(n&1073741824))return e=o!==null?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Er(r1,Xa),Xa|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:n,Er(r1,Xa),Xa|=r}else o!==null?(r=o.baseLanes|n,t.memoizedState=null):r=n,Er(r1,Xa),Xa|=r;return Ps(e,t,i,n),t.child}function afe(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function NF(e,t,n,r,i){var o=Aa(n)?T0:vs.current;return o=Q1(t,o),b1(t,i),n=BB(e,t,n,r,o,i),r=UB(),e!==null&&!_a?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Xd(e,t,i)):(Br&&r&&kB(t),t.flags|=1,Ps(e,t,n,i),t.child)}function LQ(e,t,n,r,i){if(Aa(n)){var o=!0;jI(t)}else o=!1;if(b1(t,i),t.stateNode===null)Sk(e,t),nfe(t,n,r),IF(t,n,r,i),r=!0;else if(e===null){var s=t.stateNode,a=t.memoizedProps;s.props=a;var u=s.context,l=n.contextType;typeof l=="object"&&l!==null?l=rl(l):(l=Aa(n)?T0:vs.current,l=Q1(t,l));var c=n.getDerivedStateFromProps,f=typeof c=="function"||typeof s.getSnapshotBeforeUpdate=="function";f||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==r||u!==l)&&NQ(t,s,r,l),Kh=!1;var d=t.memoizedState;s.state=d,HI(t,r,s,i),u=t.memoizedState,a!==r||d!==u||Ca.current||Kh?(typeof c=="function"&&(kF(t,n,c,r),u=t.memoizedState),(a=Kh||RQ(t,n,a,r,d,u,l))?(f||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(t.flags|=4194308)):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=u),s.props=r,s.state=u,s.context=l,r=a):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{s=t.stateNode,$ce(e,t),a=t.memoizedProps,l=t.type===t.elementType?a:Pl(t.type,a),s.props=l,f=t.pendingProps,d=s.context,u=n.contextType,typeof u=="object"&&u!==null?u=rl(u):(u=Aa(n)?T0:vs.current,u=Q1(t,u));var h=n.getDerivedStateFromProps;(c=typeof h=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==f||d!==u)&&NQ(t,s,r,u),Kh=!1,d=t.memoizedState,s.state=d,HI(t,r,s,i);var p=t.memoizedState;a!==f||d!==p||Ca.current||Kh?(typeof h=="function"&&(kF(t,n,h,r),p=t.memoizedState),(l=Kh||RQ(t,n,l,r,d,p,u)||!1)?(c||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(r,p,u),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(r,p,u)),typeof s.componentDidUpdate=="function"&&(t.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof s.componentDidUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),s.props=r,s.state=p,s.context=u,r=l):(typeof s.componentDidUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return PF(e,t,n,r,o,i)}function PF(e,t,n,r,i,o){afe(e,t);var s=(t.flags&128)!==0;if(!r&&!s)return i&&EQ(t,n,!1),Xd(e,t,o);r=t.stateNode,tDe.current=t;var a=s&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&s?(t.child=Z1(t,e.child,null,o),t.child=Z1(t,null,a,o)):Ps(e,t,a,o),t.memoizedState=r.state,i&&EQ(t,n,!0),t.child}function ufe(e){var t=e.stateNode;t.pendingContext?wQ(e,t.pendingContext,t.pendingContext!==t.context):t.context&&wQ(e,t.context,!1),MB(e,t.containerInfo)}function FQ(e,t,n,r,i){return J1(),RB(i),t.flags|=256,Ps(e,t,n,r),t.child}var DF={dehydrated:null,treeContext:null,retryLane:0};function OF(e){return{baseLanes:e,cachePool:null,transitions:null}}function lfe(e,t,n){var r=t.pendingProps,i=Yr.current,o=!1,s=(t.flags&128)!==0,a;if((a=s)||(a=e!==null&&e.memoizedState===null?!1:(i&2)!==0),a?(o=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),Er(Yr,i&1),e===null)return CF(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(s=r.children,e=r.fallback,o?(r=t.mode,o=t.child,s={mode:"hidden",children:s},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=s):o=eD(s,r,0,null),e=c0(e,r,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=OF(n),t.memoizedState=DF,e):HB(t,s));if(i=e.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return nDe(e,t,s,r,a,i,n);if(o){o=r.fallback,s=t.mode,i=e.child,a=i.sibling;var u={mode:"hidden",children:r.children};return!(s&1)&&t.child!==i?(r=t.child,r.childLanes=0,r.pendingProps=u,t.deletions=null):(r=Op(i,u),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?o=Op(a,o):(o=c0(o,s,n,null),o.flags|=2),o.return=t,r.return=t,r.sibling=o,t.child=r,r=o,o=t.child,s=e.child.memoizedState,s=s===null?OF(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},o.memoizedState=s,o.childLanes=e.childLanes&~n,t.memoizedState=DF,r}return o=e.child,e=o.sibling,r=Op(o,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function HB(e,t){return t=eD({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function WA(e,t,n,r){return r!==null&&RB(r),Z1(t,e.child,null,n),e=HB(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function nDe(e,t,n,r,i,o,s){if(n)return t.flags&256?(t.flags&=-257,r=zM(Error(Je(422))),WA(e,t,s,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=eD({mode:"visible",children:r.children},i,0,null),o=c0(o,i,s,null),o.flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,t.mode&1&&Z1(t,e.child,null,s),t.child.memoizedState=OF(s),t.memoizedState=DF,o);if(!(t.mode&1))return WA(e,t,s,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,o=Error(Je(419)),r=zM(o,r,void 0),WA(e,t,s,r)}if(a=(s&e.childLanes)!==0,_a||a){if(r=ho,r!==null){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|s)?0:i,i!==0&&i!==o.retryLane&&(o.retryLane=i,Kd(e,i),Zl(r,e,i,-1))}return XB(),r=zM(Error(Je(421))),WA(e,t,s,r)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=mDe.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,tu=Rp(i.nextSibling),lu=t,Br=!0,Ll=null,e!==null&&(Uu[zu++]=Ed,Uu[zu++]=xd,Uu[zu++]=S0,Ed=e.id,xd=e.overflow,S0=t),t=HB(t,r.children),t.flags|=4096,t)}function jQ(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),AF(e.return,t,n)}function VM(e,t,n,r,i){var o=e.memoizedState;o===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function cfe(e,t,n){var r=t.pendingProps,i=r.revealOrder,o=r.tail;if(Ps(e,t,r.children,n),r=Yr.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&jQ(e,n,t);else if(e.tag===19)jQ(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Er(Yr,r),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&qI(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),VM(t,!1,i,n,o);break;case"backwards":for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&qI(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}VM(t,!0,n,null,o);break;case"together":VM(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Sk(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Xd(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),A0|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(Je(153));if(t.child!==null){for(e=t.child,n=Op(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Op(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function rDe(e,t,n){switch(t.tag){case 3:ufe(t),J1();break;case 5:Mce(t);break;case 1:Aa(t.type)&&jI(t);break;case 4:MB(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Er(zI,r._currentValue),r._currentValue=i;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(Er(Yr,Yr.current&1),t.flags|=128,null):n&t.child.childLanes?lfe(e,t,n):(Er(Yr,Yr.current&1),e=Xd(e,t,n),e!==null?e.sibling:null);Er(Yr,Yr.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return cfe(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Er(Yr,Yr.current),r)break;return null;case 22:case 23:return t.lanes=0,sfe(e,t,n)}return Xd(e,t,n)}var ffe,$F,dfe,hfe;ffe=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};$F=function(){};dfe=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Jg(tf.current);var o=null;switch(n){case"input":i=rF(e,i),r=rF(e,r),o=[];break;case"select":i=Xr({},i,{value:void 0}),r=Xr({},r,{value:void 0}),o=[];break;case"textarea":i=sF(e,i),r=sF(e,r),o=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=LI)}uF(n,r);var s;n=null;for(l in i)if(!r.hasOwnProperty(l)&&i.hasOwnProperty(l)&&i[l]!=null)if(l==="style"){var a=i[l];for(s in a)a.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else l!=="dangerouslySetInnerHTML"&&l!=="children"&&l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(nT.hasOwnProperty(l)?o||(o=[]):(o=o||[]).push(l,null));for(l in r){var u=r[l];if(a=i!=null?i[l]:void 0,r.hasOwnProperty(l)&&u!==a&&(u!=null||a!=null))if(l==="style")if(a){for(s in a)!a.hasOwnProperty(s)||u&&u.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in u)u.hasOwnProperty(s)&&a[s]!==u[s]&&(n||(n={}),n[s]=u[s])}else n||(o||(o=[]),o.push(l,n)),n=u;else l==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,a=a?a.__html:void 0,u!=null&&a!==u&&(o=o||[]).push(l,u)):l==="children"?typeof u!="string"&&typeof u!="number"||(o=o||[]).push(l,""+u):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&(nT.hasOwnProperty(l)?(u!=null&&l==="onScroll"&&Ar("scroll",e),o||a===u||(o=[])):(o=o||[]).push(l,u))}n&&(o=o||[]).push("style",n);var l=o;(t.updateQueue=l)&&(t.flags|=4)}};hfe=function(e,t,n,r){n!==r&&(t.flags|=4)};function Tw(e,t){if(!Br)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Qo(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function iDe(e,t,n){var r=t.pendingProps;switch(IB(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Qo(t),null;case 1:return Aa(t.type)&&FI(),Qo(t),null;case 3:return r=t.stateNode,eb(),Dr(Ca),Dr(vs),FB(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(HA(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Ll!==null&&(VF(Ll),Ll=null))),$F(e,t),Qo(t),null;case 5:LB(t);var i=Jg(pT.current);if(n=t.type,e!==null&&t.stateNode!=null)dfe(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(Je(166));return Qo(t),null}if(e=Jg(tf.current),HA(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[Uc]=t,r[dT]=o,e=(t.mode&1)!==0,n){case"dialog":Ar("cancel",r),Ar("close",r);break;case"iframe":case"object":case"embed":Ar("load",r);break;case"video":case"audio":for(i=0;i<vE.length;i++)Ar(vE[i],r);break;case"source":Ar("error",r);break;case"img":case"image":case"link":Ar("error",r),Ar("load",r);break;case"details":Ar("toggle",r);break;case"input":YX(r,o),Ar("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Ar("invalid",r);break;case"textarea":XX(r,o),Ar("invalid",r)}uF(n,o),i=null;for(var s in o)if(o.hasOwnProperty(s)){var a=o[s];s==="children"?typeof a=="string"?r.textContent!==a&&(o.suppressHydrationWarning!==!0&&VA(r.textContent,a,e),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(o.suppressHydrationWarning!==!0&&VA(r.textContent,a,e),i=["children",""+a]):nT.hasOwnProperty(s)&&a!=null&&s==="onScroll"&&Ar("scroll",r)}switch(n){case"input":$A(r),KX(r,o,!0);break;case"textarea":$A(r),QX(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=LI)}r=i,t.updateQueue=r,r!==null&&(t.flags|=4)}else{s=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Ule(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=s.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=s.createElement(n,{is:r.is}):(e=s.createElement(n),n==="select"&&(s=e,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):e=s.createElementNS(e,n),e[Uc]=t,e[dT]=r,ffe(e,t,!1,!1),t.stateNode=e;e:{switch(s=lF(n,r),n){case"dialog":Ar("cancel",e),Ar("close",e),i=r;break;case"iframe":case"object":case"embed":Ar("load",e),i=r;break;case"video":case"audio":for(i=0;i<vE.length;i++)Ar(vE[i],e);i=r;break;case"source":Ar("error",e),i=r;break;case"img":case"image":case"link":Ar("error",e),Ar("load",e),i=r;break;case"details":Ar("toggle",e),i=r;break;case"input":YX(e,r),i=rF(e,r),Ar("invalid",e);break;case"option":i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=Xr({},r,{value:void 0}),Ar("invalid",e);break;case"textarea":XX(e,r),i=sF(e,r),Ar("invalid",e);break;default:i=r}uF(n,i),a=i;for(o in a)if(a.hasOwnProperty(o)){var u=a[o];o==="style"?Hle(e,u):o==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&zle(e,u)):o==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&rT(e,u):typeof u=="number"&&rT(e,""+u):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(nT.hasOwnProperty(o)?u!=null&&o==="onScroll"&&Ar("scroll",e):u!=null&&pB(e,o,u,s))}switch(n){case"input":$A(e),KX(e,r,!1);break;case"textarea":$A(e),QX(e);break;case"option":r.value!=null&&e.setAttribute("value",""+Jp(r.value));break;case"select":e.multiple=!!r.multiple,o=r.value,o!=null?m1(e,!!r.multiple,o,!1):r.defaultValue!=null&&m1(e,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=LI)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Qo(t),null;case 6:if(e&&t.stateNode!=null)hfe(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(Je(166));if(n=Jg(pT.current),Jg(tf.current),HA(t)){if(r=t.stateNode,n=t.memoizedProps,r[Uc]=t,(o=r.nodeValue!==n)&&(e=lu,e!==null))switch(e.tag){case 3:VA(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&VA(r.nodeValue,n,(e.mode&1)!==0)}o&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Uc]=t,t.stateNode=r}return Qo(t),null;case 13:if(Dr(Yr),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Br&&tu!==null&&t.mode&1&&!(t.flags&128))Nce(),J1(),t.flags|=98560,o=!1;else if(o=HA(t),r!==null&&r.dehydrated!==null){if(e===null){if(!o)throw Error(Je(318));if(o=t.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(Je(317));o[Uc]=t}else J1(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Qo(t),o=!1}else Ll!==null&&(VF(Ll),Ll=null),o=!0;if(!o)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||Yr.current&1?Bi===0&&(Bi=3):XB())),t.updateQueue!==null&&(t.flags|=4),Qo(t),null);case 4:return eb(),$F(e,t),e===null&&cT(t.stateNode.containerInfo),Qo(t),null;case 10:return DB(t.type._context),Qo(t),null;case 17:return Aa(t.type)&&FI(),Qo(t),null;case 19:if(Dr(Yr),o=t.memoizedState,o===null)return Qo(t),null;if(r=(t.flags&128)!==0,s=o.rendering,s===null)if(r)Tw(o,!1);else{if(Bi!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(s=qI(e),s!==null){for(t.flags|=128,Tw(o,!1),r=s.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)o=n,e=r,o.flags&=14680066,s=o.alternate,s===null?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,e=s.dependencies,o.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Er(Yr,Yr.current&1|2),t.child}e=e.sibling}o.tail!==null&&vi()>nb&&(t.flags|=128,r=!0,Tw(o,!1),t.lanes=4194304)}else{if(!r)if(e=qI(s),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Tw(o,!0),o.tail===null&&o.tailMode==="hidden"&&!s.alternate&&!Br)return Qo(t),null}else 2*vi()-o.renderingStartTime>nb&&n!==1073741824&&(t.flags|=128,r=!0,Tw(o,!1),t.lanes=4194304);o.isBackwards?(s.sibling=t.child,t.child=s):(n=o.last,n!==null?n.sibling=s:t.child=s,o.last=s)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=vi(),t.sibling=null,n=Yr.current,Er(Yr,r?n&1|2:n&1),t):(Qo(t),null);case 22:case 23:return KB(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?Xa&1073741824&&(Qo(t),t.subtreeFlags&6&&(t.flags|=8192)):Qo(t),null;case 24:return null;case 25:return null}throw Error(Je(156,t.tag))}function oDe(e,t){switch(IB(t),t.tag){case 1:return Aa(t.type)&&FI(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return eb(),Dr(Ca),Dr(vs),FB(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return LB(t),null;case 13:if(Dr(Yr),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(Je(340));J1()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Dr(Yr),null;case 4:return eb(),null;case 10:return DB(t.type._context),null;case 22:case 23:return KB(),null;case 24:return null;default:return null}}var GA=!1,as=!1,sDe=typeof WeakSet=="function"?WeakSet:Set,wt=null;function n1(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){oi(e,t,r)}else n.current=null}function MF(e,t,n){try{n()}catch(r){oi(e,t,r)}}var BQ=!1;function aDe(e,t){if(bF=OI,e=vce(),AB(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var s=0,a=-1,u=-1,l=0,c=0,f=e,d=null;t:for(;;){for(var h;f!==n||i!==0&&f.nodeType!==3||(a=s+i),f!==o||r!==0&&f.nodeType!==3||(u=s+r),f.nodeType===3&&(s+=f.nodeValue.length),(h=f.firstChild)!==null;)d=f,f=h;for(;;){if(f===e)break t;if(d===n&&++l===i&&(a=s),d===o&&++c===r&&(u=s),(h=f.nextSibling)!==null)break;f=d,d=f.parentNode}f=h}n=a===-1||u===-1?null:{start:a,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(_F={focusedElem:e,selectionRange:n},OI=!1,wt=t;wt!==null;)if(t=wt,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,wt=e;else for(;wt!==null;){t=wt;try{var p=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var m=p.memoizedProps,g=p.memoizedState,y=t.stateNode,v=y.getSnapshotBeforeUpdate(t.elementType===t.type?m:Pl(t.type,m),g);y.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var _=t.stateNode.containerInfo;_.nodeType===1?_.textContent="":_.nodeType===9&&_.documentElement&&_.removeChild(_.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Je(163))}}catch(w){oi(t,t.return,w)}if(e=t.sibling,e!==null){e.return=t.return,wt=e;break}wt=t.return}return p=BQ,BQ=!1,p}function cx(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&e)===e){var o=i.destroy;i.destroy=void 0,o!==void 0&&MF(t,n,o)}i=i.next}while(i!==r)}}function JP(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function LF(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function pfe(e){var t=e.alternate;t!==null&&(e.alternate=null,pfe(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Uc],delete t[dT],delete t[xF],delete t[VPe],delete t[HPe])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function mfe(e){return e.tag===5||e.tag===3||e.tag===4}function UQ(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||mfe(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function FF(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=LI));else if(r!==4&&(e=e.child,e!==null))for(FF(e,t,n),e=e.sibling;e!==null;)FF(e,t,n),e=e.sibling}function jF(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(jF(e,t,n),e=e.sibling;e!==null;)jF(e,t,n),e=e.sibling}var Ao=null,Ol=!1;function Lh(e,t,n){for(n=n.child;n!==null;)gfe(e,t,n),n=n.sibling}function gfe(e,t,n){if(ef&&typeof ef.onCommitFiberUnmount=="function")try{ef.onCommitFiberUnmount(HP,n)}catch{}switch(n.tag){case 5:as||n1(n,t);case 6:var r=Ao,i=Ol;Ao=null,Lh(e,t,n),Ao=r,Ol=i,Ao!==null&&(Ol?(e=Ao,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Ao.removeChild(n.stateNode));break;case 18:Ao!==null&&(Ol?(e=Ao,n=n.stateNode,e.nodeType===8?MM(e.parentNode,n):e.nodeType===1&&MM(e,n),aT(e)):MM(Ao,n.stateNode));break;case 4:r=Ao,i=Ol,Ao=n.stateNode.containerInfo,Ol=!0,Lh(e,t,n),Ao=r,Ol=i;break;case 0:case 11:case 14:case 15:if(!as&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var o=i,s=o.destroy;o=o.tag,s!==void 0&&(o&2||o&4)&&MF(n,t,s),i=i.next}while(i!==r)}Lh(e,t,n);break;case 1:if(!as&&(n1(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){oi(n,t,a)}Lh(e,t,n);break;case 21:Lh(e,t,n);break;case 22:n.mode&1?(as=(r=as)||n.memoizedState!==null,Lh(e,t,n),as=r):Lh(e,t,n);break;default:Lh(e,t,n)}}function zQ(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new sDe),t.forEach(function(r){var i=gDe.bind(null,e,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Tl(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,s=t,a=s;e:for(;a!==null;){switch(a.tag){case 5:Ao=a.stateNode,Ol=!1;break e;case 3:Ao=a.stateNode.containerInfo,Ol=!0;break e;case 4:Ao=a.stateNode.containerInfo,Ol=!0;break e}a=a.return}if(Ao===null)throw Error(Je(160));gfe(o,s,i),Ao=null,Ol=!1;var u=i.alternate;u!==null&&(u.return=null),i.return=null}catch(l){oi(i,t,l)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)yfe(t,e),t=t.sibling}function yfe(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Tl(t,e),Ic(e),r&4){try{cx(3,e,e.return),JP(3,e)}catch(m){oi(e,e.return,m)}try{cx(5,e,e.return)}catch(m){oi(e,e.return,m)}}break;case 1:Tl(t,e),Ic(e),r&512&&n!==null&&n1(n,n.return);break;case 5:if(Tl(t,e),Ic(e),r&512&&n!==null&&n1(n,n.return),e.flags&32){var i=e.stateNode;try{rT(i,"")}catch(m){oi(e,e.return,m)}}if(r&4&&(i=e.stateNode,i!=null)){var o=e.memoizedProps,s=n!==null?n.memoizedProps:o,a=e.type,u=e.updateQueue;if(e.updateQueue=null,u!==null)try{a==="input"&&o.type==="radio"&&o.name!=null&&jle(i,o),lF(a,s);var l=lF(a,o);for(s=0;s<u.length;s+=2){var c=u[s],f=u[s+1];c==="style"?Hle(i,f):c==="dangerouslySetInnerHTML"?zle(i,f):c==="children"?rT(i,f):pB(i,c,f,l)}switch(a){case"input":iF(i,o);break;case"textarea":Ble(i,o);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var h=o.value;h!=null?m1(i,!!o.multiple,h,!1):d!==!!o.multiple&&(o.defaultValue!=null?m1(i,!!o.multiple,o.defaultValue,!0):m1(i,!!o.multiple,o.multiple?[]:"",!1))}i[dT]=o}catch(m){oi(e,e.return,m)}}break;case 6:if(Tl(t,e),Ic(e),r&4){if(e.stateNode===null)throw Error(Je(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(m){oi(e,e.return,m)}}break;case 3:if(Tl(t,e),Ic(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{aT(t.containerInfo)}catch(m){oi(e,e.return,m)}break;case 4:Tl(t,e),Ic(e);break;case 13:Tl(t,e),Ic(e),i=e.child,i.flags&8192&&(o=i.memoizedState!==null,i.stateNode.isHidden=o,!o||i.alternate!==null&&i.alternate.memoizedState!==null||(GB=vi())),r&4&&zQ(e);break;case 22:if(c=n!==null&&n.memoizedState!==null,e.mode&1?(as=(l=as)||c,Tl(t,e),as=l):Tl(t,e),Ic(e),r&8192){if(l=e.memoizedState!==null,(e.stateNode.isHidden=l)&&!c&&e.mode&1)for(wt=e,c=e.child;c!==null;){for(f=wt=c;wt!==null;){switch(d=wt,h=d.child,d.tag){case 0:case 11:case 14:case 15:cx(4,d,d.return);break;case 1:n1(d,d.return);var p=d.stateNode;if(typeof p.componentWillUnmount=="function"){r=d,n=d.return;try{t=r,p.props=t.memoizedProps,p.state=t.memoizedState,p.componentWillUnmount()}catch(m){oi(r,n,m)}}break;case 5:n1(d,d.return);break;case 22:if(d.memoizedState!==null){HQ(f);continue}}h!==null?(h.return=d,wt=h):HQ(f)}c=c.sibling}e:for(c=null,f=e;;){if(f.tag===5){if(c===null){c=f;try{i=f.stateNode,l?(o=i.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(a=f.stateNode,u=f.memoizedProps.style,s=u!=null&&u.hasOwnProperty("display")?u.display:null,a.style.display=Vle("display",s))}catch(m){oi(e,e.return,m)}}}else if(f.tag===6){if(c===null)try{f.stateNode.nodeValue=l?"":f.memoizedProps}catch(m){oi(e,e.return,m)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;c===f&&(c=null),f=f.return}c===f&&(c=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Tl(t,e),Ic(e),r&4&&zQ(e);break;case 21:break;default:Tl(t,e),Ic(e)}}function Ic(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(mfe(n)){var r=n;break e}n=n.return}throw Error(Je(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(rT(i,""),r.flags&=-33);var o=UQ(e);jF(e,o,i);break;case 3:case 4:var s=r.stateNode.containerInfo,a=UQ(e);FF(e,a,s);break;default:throw Error(Je(161))}}catch(u){oi(e,e.return,u)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function uDe(e,t,n){wt=e,vfe(e)}function vfe(e,t,n){for(var r=(e.mode&1)!==0;wt!==null;){var i=wt,o=i.child;if(i.tag===22&&r){var s=i.memoizedState!==null||GA;if(!s){var a=i.alternate,u=a!==null&&a.memoizedState!==null||as;a=GA;var l=as;if(GA=s,(as=u)&&!l)for(wt=i;wt!==null;)s=wt,u=s.child,s.tag===22&&s.memoizedState!==null?qQ(i):u!==null?(u.return=s,wt=u):qQ(i);for(;o!==null;)wt=o,vfe(o),o=o.sibling;wt=i,GA=a,as=l}VQ(e)}else i.subtreeFlags&8772&&o!==null?(o.return=i,wt=o):VQ(e)}}function VQ(e){for(;wt!==null;){var t=wt;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:as||JP(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!as)if(n===null)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:Pl(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;o!==null&&AQ(t,o,r);break;case 3:var s=t.updateQueue;if(s!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}AQ(t,s,n)}break;case 5:var a=t.stateNode;if(n===null&&t.flags&4){n=a;var u=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var l=t.alternate;if(l!==null){var c=l.memoizedState;if(c!==null){var f=c.dehydrated;f!==null&&aT(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Je(163))}as||t.flags&512&&LF(t)}catch(d){oi(t,t.return,d)}}if(t===e){wt=null;break}if(n=t.sibling,n!==null){n.return=t.return,wt=n;break}wt=t.return}}function HQ(e){for(;wt!==null;){var t=wt;if(t===e){wt=null;break}var n=t.sibling;if(n!==null){n.return=t.return,wt=n;break}wt=t.return}}function qQ(e){for(;wt!==null;){var t=wt;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{JP(4,t)}catch(u){oi(t,n,u)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var i=t.return;try{r.componentDidMount()}catch(u){oi(t,i,u)}}var o=t.return;try{LF(t)}catch(u){oi(t,o,u)}break;case 5:var s=t.return;try{LF(t)}catch(u){oi(t,s,u)}}}catch(u){oi(t,t.return,u)}if(t===e){wt=null;break}var a=t.sibling;if(a!==null){a.return=t.return,wt=a;break}wt=t.return}}var lDe=Math.ceil,YI=mh.ReactCurrentDispatcher,qB=mh.ReactCurrentOwner,el=mh.ReactCurrentBatchConfig,Fn=0,ho=null,Ri=null,Oo=0,Xa=0,r1=Nm(0),Bi=0,vT=null,A0=0,ZP=0,WB=0,fx=null,ha=null,GB=0,nb=1/0,dd=null,KI=!1,BF=null,Pp=null,YA=!1,hp=null,XI=0,dx=0,UF=null,Ck=-1,Ak=0;function Us(){return Fn&6?vi():Ck!==-1?Ck:Ck=vi()}function Dp(e){return e.mode&1?Fn&2&&Oo!==0?Oo&-Oo:WPe.transition!==null?(Ak===0&&(Ak=nce()),Ak):(e=or,e!==0||(e=window.event,e=e===void 0?16:lce(e.type)),e):1}function Zl(e,t,n,r){if(50<dx)throw dx=0,UF=null,Error(Je(185));LS(e,n,r),(!(Fn&2)||e!==ho)&&(e===ho&&(!(Fn&2)&&(ZP|=n),Bi===4&&rp(e,Oo)),ka(e,r),n===1&&Fn===0&&!(t.mode&1)&&(nb=vi()+500,KP&&Pm()))}function ka(e,t){var n=e.callbackNode;WNe(e,t);var r=DI(e,e===ho?Oo:0);if(r===0)n!==null&&eQ(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&eQ(n),t===1)e.tag===0?qPe(WQ.bind(null,e)):kce(WQ.bind(null,e)),UPe(function(){!(Fn&6)&&Pm()}),n=null;else{switch(rce(r)){case 1:n=bB;break;case 4:n=ece;break;case 16:n=PI;break;case 536870912:n=tce;break;default:n=PI}n=Cfe(n,bfe.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function bfe(e,t){if(Ck=-1,Ak=0,Fn&6)throw Error(Je(327));var n=e.callbackNode;if(_1()&&e.callbackNode!==n)return null;var r=DI(e,e===ho?Oo:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=QI(e,r);else{t=r;var i=Fn;Fn|=2;var o=wfe();(ho!==e||Oo!==t)&&(dd=null,nb=vi()+500,l0(e,t));do try{dDe();break}catch(a){_fe(e,a)}while(!0);PB(),YI.current=o,Fn=i,Ri!==null?t=0:(ho=null,Oo=0,t=Bi)}if(t!==0){if(t===2&&(i=pF(e),i!==0&&(r=i,t=zF(e,i))),t===1)throw n=vT,l0(e,0),rp(e,r),ka(e,vi()),n;if(t===6)rp(e,r);else{if(i=e.current.alternate,!(r&30)&&!cDe(i)&&(t=QI(e,r),t===2&&(o=pF(e),o!==0&&(r=o,t=zF(e,o))),t===1))throw n=vT,l0(e,0),rp(e,r),ka(e,vi()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(Je(345));case 2:Cg(e,ha,dd);break;case 3:if(rp(e,r),(r&130023424)===r&&(t=GB+500-vi(),10<t)){if(DI(e,0)!==0)break;if(i=e.suspendedLanes,(i&r)!==r){Us(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=EF(Cg.bind(null,e,ha,dd),t);break}Cg(e,ha,dd);break;case 4:if(rp(e,r),(r&4194240)===r)break;for(t=e.eventTimes,i=-1;0<r;){var s=31-Jl(r);o=1<<s,s=t[s],s>i&&(i=s),r&=~o}if(r=i,r=vi()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*lDe(r/1960))-r,10<r){e.timeoutHandle=EF(Cg.bind(null,e,ha,dd),r);break}Cg(e,ha,dd);break;case 5:Cg(e,ha,dd);break;default:throw Error(Je(329))}}}return ka(e,vi()),e.callbackNode===n?bfe.bind(null,e):null}function zF(e,t){var n=fx;return e.current.memoizedState.isDehydrated&&(l0(e,t).flags|=256),e=QI(e,t),e!==2&&(t=ha,ha=n,t!==null&&VF(t)),e}function VF(e){ha===null?ha=e:ha.push.apply(ha,e)}function cDe(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!sc(o(),i))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function rp(e,t){for(t&=~WB,t&=~ZP,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Jl(t),r=1<<n;e[n]=-1,t&=~r}}function WQ(e){if(Fn&6)throw Error(Je(327));_1();var t=DI(e,0);if(!(t&1))return ka(e,vi()),null;var n=QI(e,t);if(e.tag!==0&&n===2){var r=pF(e);r!==0&&(t=r,n=zF(e,r))}if(n===1)throw n=vT,l0(e,0),rp(e,t),ka(e,vi()),n;if(n===6)throw Error(Je(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Cg(e,ha,dd),ka(e,vi()),null}function YB(e,t){var n=Fn;Fn|=1;try{return e(t)}finally{Fn=n,Fn===0&&(nb=vi()+500,KP&&Pm())}}function k0(e){hp!==null&&hp.tag===0&&!(Fn&6)&&_1();var t=Fn;Fn|=1;var n=el.transition,r=or;try{if(el.transition=null,or=1,e)return e()}finally{or=r,el.transition=n,Fn=t,!(Fn&6)&&Pm()}}function KB(){Xa=r1.current,Dr(r1)}function l0(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,BPe(n)),Ri!==null)for(n=Ri.return;n!==null;){var r=n;switch(IB(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&FI();break;case 3:eb(),Dr(Ca),Dr(vs),FB();break;case 5:LB(r);break;case 4:eb();break;case 13:Dr(Yr);break;case 19:Dr(Yr);break;case 10:DB(r.type._context);break;case 22:case 23:KB()}n=n.return}if(ho=e,Ri=e=Op(e.current,null),Oo=Xa=t,Bi=0,vT=null,WB=ZP=A0=0,ha=fx=null,Qg!==null){for(t=0;t<Qg.length;t++)if(n=Qg[t],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,o=n.pending;if(o!==null){var s=o.next;o.next=i,r.next=s}n.pending=r}Qg=null}return e}function _fe(e,t){do{var n=Ri;try{if(PB(),xk.current=GI,WI){for(var r=Kr.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}WI=!1}if(C0=0,no=Mi=Kr=null,lx=!1,mT=0,qB.current=null,n===null||n.return===null){Bi=1,vT=t,Ri=null;break}e:{var o=e,s=n.return,a=n,u=t;if(t=Oo,a.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var l=u,c=a,f=c.tag;if(!(c.mode&1)&&(f===0||f===11||f===15)){var d=c.alternate;d?(c.updateQueue=d.updateQueue,c.memoizedState=d.memoizedState,c.lanes=d.lanes):(c.updateQueue=null,c.memoizedState=null)}var h=DQ(s);if(h!==null){h.flags&=-257,OQ(h,s,a,o,t),h.mode&1&&PQ(o,l,t),t=h,u=l;var p=t.updateQueue;if(p===null){var m=new Set;m.add(u),t.updateQueue=m}else p.add(u);break e}else{if(!(t&1)){PQ(o,l,t),XB();break e}u=Error(Je(426))}}else if(Br&&a.mode&1){var g=DQ(s);if(g!==null){!(g.flags&65536)&&(g.flags|=256),OQ(g,s,a,o,t),RB(tb(u,a));break e}}o=u=tb(u,a),Bi!==4&&(Bi=2),fx===null?fx=[o]:fx.push(o),o=s;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t;var y=rfe(o,u,t);CQ(o,y);break e;case 1:a=u;var v=o.type,_=o.stateNode;if(!(o.flags&128)&&(typeof v.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(Pp===null||!Pp.has(_)))){o.flags|=65536,t&=-t,o.lanes|=t;var w=ife(o,a,t);CQ(o,w);break e}}o=o.return}while(o!==null)}xfe(n)}catch(E){t=E,Ri===n&&n!==null&&(Ri=n=n.return);continue}break}while(!0)}function wfe(){var e=YI.current;return YI.current=GI,e===null?GI:e}function XB(){(Bi===0||Bi===3||Bi===2)&&(Bi=4),ho===null||!(A0&268435455)&&!(ZP&268435455)||rp(ho,Oo)}function QI(e,t){var n=Fn;Fn|=2;var r=wfe();(ho!==e||Oo!==t)&&(dd=null,l0(e,t));do try{fDe();break}catch(i){_fe(e,i)}while(!0);if(PB(),Fn=n,YI.current=r,Ri!==null)throw Error(Je(261));return ho=null,Oo=0,Bi}function fDe(){for(;Ri!==null;)Efe(Ri)}function dDe(){for(;Ri!==null&&!LNe();)Efe(Ri)}function Efe(e){var t=Sfe(e.alternate,e,Xa);e.memoizedProps=e.pendingProps,t===null?xfe(e):Ri=t,qB.current=null}function xfe(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=oDe(n,t),n!==null){n.flags&=32767,Ri=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Bi=6,Ri=null;return}}else if(n=iDe(n,t,Xa),n!==null){Ri=n;return}if(t=t.sibling,t!==null){Ri=t;return}Ri=t=e}while(t!==null);Bi===0&&(Bi=5)}function Cg(e,t,n){var r=or,i=el.transition;try{el.transition=null,or=1,hDe(e,t,n,r)}finally{el.transition=i,or=r}return null}function hDe(e,t,n,r){do _1();while(hp!==null);if(Fn&6)throw Error(Je(327));n=e.finishedWork;var i=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(Je(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(GNe(e,o),e===ho&&(Ri=ho=null,Oo=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||YA||(YA=!0,Cfe(PI,function(){return _1(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=el.transition,el.transition=null;var s=or;or=1;var a=Fn;Fn|=4,qB.current=null,aDe(e,n),yfe(n,e),DPe(_F),OI=!!bF,_F=bF=null,e.current=n,uDe(n),FNe(),Fn=a,or=s,el.transition=o}else e.current=n;if(YA&&(YA=!1,hp=e,XI=i),o=e.pendingLanes,o===0&&(Pp=null),UNe(n.stateNode),ka(e,vi()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(KI)throw KI=!1,e=BF,BF=null,e;return XI&1&&e.tag!==0&&_1(),o=e.pendingLanes,o&1?e===UF?dx++:(dx=0,UF=e):dx=0,Pm(),null}function _1(){if(hp!==null){var e=rce(XI),t=el.transition,n=or;try{if(el.transition=null,or=16>e?16:e,hp===null)var r=!1;else{if(e=hp,hp=null,XI=0,Fn&6)throw Error(Je(331));var i=Fn;for(Fn|=4,wt=e.current;wt!==null;){var o=wt,s=o.child;if(wt.flags&16){var a=o.deletions;if(a!==null){for(var u=0;u<a.length;u++){var l=a[u];for(wt=l;wt!==null;){var c=wt;switch(c.tag){case 0:case 11:case 15:cx(8,c,o)}var f=c.child;if(f!==null)f.return=c,wt=f;else for(;wt!==null;){c=wt;var d=c.sibling,h=c.return;if(pfe(c),c===l){wt=null;break}if(d!==null){d.return=h,wt=d;break}wt=h}}}var p=o.alternate;if(p!==null){var m=p.child;if(m!==null){p.child=null;do{var g=m.sibling;m.sibling=null,m=g}while(m!==null)}}wt=o}}if(o.subtreeFlags&2064&&s!==null)s.return=o,wt=s;else e:for(;wt!==null;){if(o=wt,o.flags&2048)switch(o.tag){case 0:case 11:case 15:cx(9,o,o.return)}var y=o.sibling;if(y!==null){y.return=o.return,wt=y;break e}wt=o.return}}var v=e.current;for(wt=v;wt!==null;){s=wt;var _=s.child;if(s.subtreeFlags&2064&&_!==null)_.return=s,wt=_;else e:for(s=v;wt!==null;){if(a=wt,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:JP(9,a)}}catch(E){oi(a,a.return,E)}if(a===s){wt=null;break e}var w=a.sibling;if(w!==null){w.return=a.return,wt=w;break e}wt=a.return}}if(Fn=i,Pm(),ef&&typeof ef.onPostCommitFiberRoot=="function")try{ef.onPostCommitFiberRoot(HP,e)}catch{}r=!0}return r}finally{or=n,el.transition=t}}return!1}function GQ(e,t,n){t=tb(n,t),t=rfe(e,t,1),e=Np(e,t,1),t=Us(),e!==null&&(LS(e,1,t),ka(e,t))}function oi(e,t,n){if(e.tag===3)GQ(e,e,n);else for(;t!==null;){if(t.tag===3){GQ(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Pp===null||!Pp.has(r))){e=tb(n,e),e=ife(t,e,1),t=Np(t,e,1),e=Us(),t!==null&&(LS(t,1,e),ka(t,e));break}}t=t.return}}function pDe(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=Us(),e.pingedLanes|=e.suspendedLanes&n,ho===e&&(Oo&n)===n&&(Bi===4||Bi===3&&(Oo&130023424)===Oo&&500>vi()-GB?l0(e,0):WB|=n),ka(e,t)}function Tfe(e,t){t===0&&(e.mode&1?(t=FA,FA<<=1,!(FA&130023424)&&(FA=4194304)):t=1);var n=Us();e=Kd(e,t),e!==null&&(LS(e,t,n),ka(e,n))}function mDe(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),Tfe(e,n)}function gDe(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(Je(314))}r!==null&&r.delete(t),Tfe(e,n)}var Sfe;Sfe=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Ca.current)_a=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return _a=!1,rDe(e,t,n);_a=!!(e.flags&131072)}else _a=!1,Br&&t.flags&1048576&&Ice(t,UI,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Sk(e,t),e=t.pendingProps;var i=Q1(t,vs.current);b1(t,n),i=BB(null,t,r,e,i,n);var o=UB();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Aa(r)?(o=!0,jI(t)):o=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,$B(t),i.updater=QP,t.stateNode=i,i._reactInternals=t,IF(t,r,e,n),t=PF(null,t,r,!0,o,n)):(t.tag=0,Br&&o&&kB(t),Ps(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Sk(e,t),e=t.pendingProps,i=r._init,r=i(r._payload),t.type=r,i=t.tag=vDe(r),e=Pl(r,e),i){case 0:t=NF(null,t,r,e,n);break e;case 1:t=LQ(null,t,r,e,n);break e;case 11:t=$Q(null,t,r,e,n);break e;case 14:t=MQ(null,t,r,Pl(r.type,e),n);break e}throw Error(Je(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Pl(r,i),NF(e,t,r,i,n);case 1:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Pl(r,i),LQ(e,t,r,i,n);case 3:e:{if(ufe(t),e===null)throw Error(Je(387));r=t.pendingProps,o=t.memoizedState,i=o.element,$ce(e,t),HI(t,r,null,n);var s=t.memoizedState;if(r=s.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=o,t.memoizedState=o,t.flags&256){i=tb(Error(Je(423)),t),t=FQ(e,t,r,n,i);break e}else if(r!==i){i=tb(Error(Je(424)),t),t=FQ(e,t,r,n,i);break e}else for(tu=Rp(t.stateNode.containerInfo.firstChild),lu=t,Br=!0,Ll=null,n=Dce(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(J1(),r===i){t=Xd(e,t,n);break e}Ps(e,t,r,n)}t=t.child}return t;case 5:return Mce(t),e===null&&CF(t),r=t.type,i=t.pendingProps,o=e!==null?e.memoizedProps:null,s=i.children,wF(r,i)?s=null:o!==null&&wF(r,o)&&(t.flags|=32),afe(e,t),Ps(e,t,s,n),t.child;case 6:return e===null&&CF(t),null;case 13:return lfe(e,t,n);case 4:return MB(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Z1(t,null,r,n):Ps(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Pl(r,i),$Q(e,t,r,i,n);case 7:return Ps(e,t,t.pendingProps,n),t.child;case 8:return Ps(e,t,t.pendingProps.children,n),t.child;case 12:return Ps(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,s=i.value,Er(zI,r._currentValue),r._currentValue=s,o!==null)if(sc(o.value,s)){if(o.children===i.children&&!Ca.current){t=Xd(e,t,n);break e}}else for(o=t.child,o!==null&&(o.return=t);o!==null;){var a=o.dependencies;if(a!==null){s=o.child;for(var u=a.firstContext;u!==null;){if(u.context===r){if(o.tag===1){u=Od(-1,n&-n),u.tag=2;var l=o.updateQueue;if(l!==null){l=l.shared;var c=l.pending;c===null?u.next=u:(u.next=c.next,c.next=u),l.pending=u}}o.lanes|=n,u=o.alternate,u!==null&&(u.lanes|=n),AF(o.return,n,t),a.lanes|=n;break}u=u.next}}else if(o.tag===10)s=o.type===t.type?null:o.child;else if(o.tag===18){if(s=o.return,s===null)throw Error(Je(341));s.lanes|=n,a=s.alternate,a!==null&&(a.lanes|=n),AF(s,n,t),s=o.sibling}else s=o.child;if(s!==null)s.return=o;else for(s=o;s!==null;){if(s===t){s=null;break}if(o=s.sibling,o!==null){o.return=s.return,s=o;break}s=s.return}o=s}Ps(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,b1(t,n),i=rl(i),r=r(i),t.flags|=1,Ps(e,t,r,n),t.child;case 14:return r=t.type,i=Pl(r,t.pendingProps),i=Pl(r.type,i),MQ(e,t,r,i,n);case 15:return ofe(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Pl(r,i),Sk(e,t),t.tag=1,Aa(r)?(e=!0,jI(t)):e=!1,b1(t,n),nfe(t,r,i),IF(t,r,i,n),PF(null,t,r,!0,e,n);case 19:return cfe(e,t,n);case 22:return sfe(e,t,n)}throw Error(Je(156,t.tag))};function Cfe(e,t){return Zle(e,t)}function yDe(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Yu(e,t,n,r){return new yDe(e,t,n,r)}function QB(e){return e=e.prototype,!(!e||!e.isReactComponent)}function vDe(e){if(typeof e=="function")return QB(e)?1:0;if(e!=null){if(e=e.$$typeof,e===gB)return 11;if(e===yB)return 14}return 2}function Op(e,t){var n=e.alternate;return n===null?(n=Yu(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function kk(e,t,n,r,i,o){var s=2;if(r=e,typeof e=="function")QB(e)&&(s=1);else if(typeof e=="string")s=5;else e:switch(e){case Gv:return c0(n.children,i,o,t);case mB:s=8,i|=8;break;case Z4:return e=Yu(12,n,t,i|2),e.elementType=Z4,e.lanes=o,e;case eF:return e=Yu(13,n,t,i),e.elementType=eF,e.lanes=o,e;case tF:return e=Yu(19,n,t,i),e.elementType=tF,e.lanes=o,e;case Mle:return eD(n,i,o,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Ole:s=10;break e;case $le:s=9;break e;case gB:s=11;break e;case yB:s=14;break e;case Yh:s=16,r=null;break e}throw Error(Je(130,e==null?e:typeof e,""))}return t=Yu(s,n,t,i),t.elementType=e,t.type=r,t.lanes=o,t}function c0(e,t,n,r){return e=Yu(7,e,r,t),e.lanes=n,e}function eD(e,t,n,r){return e=Yu(22,e,r,t),e.elementType=Mle,e.lanes=n,e.stateNode={isHidden:!1},e}function HM(e,t,n){return e=Yu(6,e,null,t),e.lanes=n,e}function qM(e,t,n){return t=Yu(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function bDe(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=SM(0),this.expirationTimes=SM(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=SM(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function JB(e,t,n,r,i,o,s,a,u){return e=new bDe(e,t,n,a,u),t===1?(t=1,o===!0&&(t|=8)):t=0,o=Yu(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},$B(o),e}function _De(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Wv,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function Afe(e){if(!e)return Zp;e=e._reactInternals;e:{if(my(e)!==e||e.tag!==1)throw Error(Je(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Aa(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(Je(171))}if(e.tag===1){var n=e.type;if(Aa(n))return Ace(e,n,t)}return t}function kfe(e,t,n,r,i,o,s,a,u){return e=JB(n,r,!0,e,i,o,s,a,u),e.context=Afe(null),n=e.current,r=Us(),i=Dp(n),o=Od(r,i),o.callback=t??null,Np(n,o,i),e.current.lanes=i,LS(e,i,r),ka(e,r),e}function tD(e,t,n,r){var i=t.current,o=Us(),s=Dp(i);return n=Afe(n),t.context===null?t.context=n:t.pendingContext=n,t=Od(o,s),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=Np(i,t,s),e!==null&&(Zl(e,i,s,o),Ek(e,i,s)),s}function JI(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function YQ(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function ZB(e,t){YQ(e,t),(e=e.alternate)&&YQ(e,t)}function wDe(){return null}var Ife=typeof reportError=="function"?reportError:function(e){console.error(e)};function e7(e){this._internalRoot=e}nD.prototype.render=e7.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(Je(409));tD(e,t,null,null)};nD.prototype.unmount=e7.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;k0(function(){tD(null,e,null,null)}),t[Yd]=null}};function nD(e){this._internalRoot=e}nD.prototype.unstable_scheduleHydration=function(e){if(e){var t=sce();e={blockedOn:null,target:e,priority:t};for(var n=0;n<np.length&&t!==0&&t<np[n].priority;n++);np.splice(n,0,e),n===0&&uce(e)}};function t7(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function rD(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function KQ(){}function EDe(e,t,n,r,i){if(i){if(typeof r=="function"){var o=r;r=function(){var l=JI(s);o.call(l)}}var s=kfe(t,r,e,0,null,!1,!1,"",KQ);return e._reactRootContainer=s,e[Yd]=s.current,cT(e.nodeType===8?e.parentNode:e),k0(),s}for(;i=e.lastChild;)e.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var l=JI(u);a.call(l)}}var u=JB(e,0,!1,null,null,!1,!1,"",KQ);return e._reactRootContainer=u,e[Yd]=u.current,cT(e.nodeType===8?e.parentNode:e),k0(function(){tD(t,u,n,r)}),u}function iD(e,t,n,r,i){var o=n._reactRootContainer;if(o){var s=o;if(typeof i=="function"){var a=i;i=function(){var u=JI(s);a.call(u)}}tD(t,s,e,i)}else s=EDe(n,t,e,i,r);return JI(s)}ice=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=yE(t.pendingLanes);n!==0&&(_B(t,n|1),ka(t,vi()),!(Fn&6)&&(nb=vi()+500,Pm()))}break;case 13:k0(function(){var r=Kd(e,1);if(r!==null){var i=Us();Zl(r,e,1,i)}}),ZB(e,1)}};wB=function(e){if(e.tag===13){var t=Kd(e,134217728);if(t!==null){var n=Us();Zl(t,e,134217728,n)}ZB(e,134217728)}};oce=function(e){if(e.tag===13){var t=Dp(e),n=Kd(e,t);if(n!==null){var r=Us();Zl(n,e,t,r)}ZB(e,t)}};sce=function(){return or};ace=function(e,t){var n=or;try{return or=e,t()}finally{or=n}};fF=function(e,t,n){switch(t){case"input":if(iF(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=YP(r);if(!i)throw Error(Je(90));Fle(r),iF(r,i)}}}break;case"textarea":Ble(e,n);break;case"select":t=n.value,t!=null&&m1(e,!!n.multiple,t,!1)}};Gle=YB;Yle=k0;var xDe={usingClientEntryPoint:!1,Events:[jS,Qv,YP,qle,Wle,YB]},Sw={findFiberByHostInstance:Xg,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},TDe={bundleType:Sw.bundleType,version:Sw.version,rendererPackageName:Sw.rendererPackageName,rendererConfig:Sw.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:mh.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Qle(e),e===null?null:e.stateNode},findFiberByHostInstance:Sw.findFiberByHostInstance||wDe,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var KA=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!KA.isDisabled&&KA.supportsFiber)try{HP=KA.inject(TDe),ef=KA}catch{}}Iu.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=xDe;Iu.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!t7(t))throw Error(Je(200));return _De(e,t,null,n)};Iu.createRoot=function(e,t){if(!t7(e))throw Error(Je(299));var n=!1,r="",i=Ife;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=JB(e,1,!1,null,null,n,!1,r,i),e[Yd]=t.current,cT(e.nodeType===8?e.parentNode:e),new e7(t)};Iu.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(Je(188)):(e=Object.keys(e).join(","),Error(Je(268,e)));return e=Qle(t),e=e===null?null:e.stateNode,e};Iu.flushSync=function(e){return k0(e)};Iu.hydrate=function(e,t,n){if(!rD(t))throw Error(Je(200));return iD(null,e,t,!0,n)};Iu.hydrateRoot=function(e,t,n){if(!t7(e))throw Error(Je(405));var r=n!=null&&n.hydratedSources||null,i=!1,o="",s=Ife;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(s=n.onRecoverableError)),t=kfe(t,null,e,1,n??null,i,!1,o,s),e[Yd]=t.current,cT(e),r)for(e=0;e<r.length;e++)n=r[e],i=n._getVersion,i=i(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new nD(t)};Iu.render=function(e,t,n){if(!rD(t))throw Error(Je(200));return iD(null,e,t,!1,n)};Iu.unmountComponentAtNode=function(e){if(!rD(e))throw Error(Je(40));return e._reactRootContainer?(k0(function(){iD(null,null,e,!1,function(){e._reactRootContainer=null,e[Yd]=null})}),!0):!1};Iu.unstable_batchedUpdates=YB;Iu.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!rD(n))throw Error(Je(200));if(e==null||e._reactInternals===void 0)throw Error(Je(38));return iD(e,t,n,!1,r)};Iu.version="18.3.1-next-f1338f8080-20240426";function Rfe(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Rfe)}catch(e){console.error(e)}}Rfe(),Rle.exports=Iu;var US=Rle.exports;const bE=ku(US);var XQ=US;Q4.createRoot=XQ.createRoot,Q4.hydrateRoot=XQ.hydrateRoot;var zc=function(){return zc=Object.assign||function(t){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},zc.apply(this,arguments)};function zS(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}function SDe(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,o;r<i;r++)(o||!(r in t))&&(o||(o=Array.prototype.slice.call(t,0,r)),o[r]=t[r]);return e.concat(o||Array.prototype.slice.call(t))}var Ik="right-scroll-bar-position",Rk="width-before-scroll-bar",CDe="with-scroll-bars-hidden",ADe="--removed-body-scroll-bar-size";function WM(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function kDe(e,t){var n=k.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(r){var i=n.value;i!==r&&(n.value=r,n.callback(r,i))}}}})[0];return n.callback=t,n.facade}var IDe=typeof window<"u"?k.useLayoutEffect:k.useEffect,QQ=new WeakMap;function RDe(e,t){var n=kDe(null,function(r){return e.forEach(function(i){return WM(i,r)})});return IDe(function(){var r=QQ.get(n);if(r){var i=new Set(r),o=new Set(e),s=n.current;i.forEach(function(a){o.has(a)||WM(a,null)}),o.forEach(function(a){i.has(a)||WM(a,s)})}QQ.set(n,e)},[e]),n}function NDe(e){return e}function PDe(e,t){t===void 0&&(t=NDe);var n=[],r=!1,i={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(o){var s=t(o,r);return n.push(s),function(){n=n.filter(function(a){return a!==s})}},assignSyncMedium:function(o){for(r=!0;n.length;){var s=n;n=[],s.forEach(o)}n={push:function(a){return o(a)},filter:function(){return n}}},assignMedium:function(o){r=!0;var s=[];if(n.length){var a=n;n=[],a.forEach(o),s=n}var u=function(){var c=s;s=[],c.forEach(o)},l=function(){return Promise.resolve().then(u)};l(),n={push:function(c){s.push(c),l()},filter:function(c){return s=s.filter(c),n}}}};return i}function DDe(e){e===void 0&&(e={});var t=PDe(null);return t.options=zc({async:!0,ssr:!1},e),t}var Nfe=function(e){var t=e.sideCar,n=zS(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=t.read();if(!r)throw new Error("Sidecar medium not found");return k.createElement(r,zc({},n))};Nfe.isSideCarExport=!0;function ODe(e,t){return e.useMedium(t),Nfe}var Pfe=DDe(),GM=function(){},oD=k.forwardRef(function(e,t){var n=k.useRef(null),r=k.useState({onScrollCapture:GM,onWheelCapture:GM,onTouchMoveCapture:GM}),i=r[0],o=r[1],s=e.forwardProps,a=e.children,u=e.className,l=e.removeScrollBar,c=e.enabled,f=e.shards,d=e.sideCar,h=e.noIsolation,p=e.inert,m=e.allowPinchZoom,g=e.as,y=g===void 0?"div":g,v=e.gapMode,_=zS(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),w=d,E=RDe([n,t]),S=zc(zc({},_),i);return k.createElement(k.Fragment,null,c&&k.createElement(w,{sideCar:Pfe,removeScrollBar:l,shards:f,noIsolation:h,inert:p,setCallbacks:o,allowPinchZoom:!!m,lockRef:n,gapMode:v}),s?k.cloneElement(k.Children.only(a),zc(zc({},S),{ref:E})):k.createElement(y,zc({},S,{className:u,ref:E}),a))});oD.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};oD.classNames={fullWidth:Rk,zeroRight:Ik};var $De=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function MDe(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=$De();return t&&e.setAttribute("nonce",t),e}function LDe(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function FDe(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var jDe=function(){var e=0,t=null;return{add:function(n){e==0&&(t=MDe())&&(LDe(t,n),FDe(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},BDe=function(){var e=jDe();return function(t,n){k.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},Dfe=function(){var e=BDe(),t=function(n){var r=n.styles,i=n.dynamic;return e(r,i),null};return t},UDe={left:0,top:0,right:0,gap:0},YM=function(e){return parseInt(e||"",10)||0},zDe=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],r=t[e==="padding"?"paddingTop":"marginTop"],i=t[e==="padding"?"paddingRight":"marginRight"];return[YM(n),YM(r),YM(i)]},VDe=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return UDe;var t=zDe(e),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-n+t[2]-t[0])}},HDe=Dfe(),w1="data-scroll-locked",qDe=function(e,t,n,r){var i=e.left,o=e.top,s=e.right,a=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(CDe,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(a,"px ").concat(r,`;
  }
  body[`).concat(w1,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(o,`px;
    padding-right: `).concat(s,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(a,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Ik,` {
    right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(Rk,` {
    margin-right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(Ik," .").concat(Ik,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(Rk," .").concat(Rk,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(w1,`] {
    `).concat(ADe,": ").concat(a,`px;
  }
`)},JQ=function(){var e=parseInt(document.body.getAttribute(w1)||"0",10);return isFinite(e)?e:0},WDe=function(){k.useEffect(function(){return document.body.setAttribute(w1,(JQ()+1).toString()),function(){var e=JQ()-1;e<=0?document.body.removeAttribute(w1):document.body.setAttribute(w1,e.toString())}},[])},GDe=function(e){var t=e.noRelative,n=e.noImportant,r=e.gapMode,i=r===void 0?"margin":r;WDe();var o=k.useMemo(function(){return VDe(i)},[i]);return k.createElement(HDe,{styles:qDe(o,!t,i,n?"":"!important")})},HF=!1;if(typeof window<"u")try{var XA=Object.defineProperty({},"passive",{get:function(){return HF=!0,!0}});window.addEventListener("test",XA,XA),window.removeEventListener("test",XA,XA)}catch{HF=!1}var lv=HF?{passive:!1}:!1,YDe=function(e){return e.tagName==="TEXTAREA"},Ofe=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!YDe(e)&&n[t]==="visible")},KDe=function(e){return Ofe(e,"overflowY")},XDe=function(e){return Ofe(e,"overflowX")},ZQ=function(e,t){var n=t.ownerDocument,r=t;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var i=$fe(e,r);if(i){var o=Mfe(e,r),s=o[1],a=o[2];if(s>a)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},QDe=function(e){var t=e.scrollTop,n=e.scrollHeight,r=e.clientHeight;return[t,n,r]},JDe=function(e){var t=e.scrollLeft,n=e.scrollWidth,r=e.clientWidth;return[t,n,r]},$fe=function(e,t){return e==="v"?KDe(t):XDe(t)},Mfe=function(e,t){return e==="v"?QDe(t):JDe(t)},ZDe=function(e,t){return e==="h"&&t==="rtl"?-1:1},eOe=function(e,t,n,r,i){var o=ZDe(e,window.getComputedStyle(t).direction),s=o*r,a=n.target,u=t.contains(a),l=!1,c=s>0,f=0,d=0;do{var h=Mfe(e,a),p=h[0],m=h[1],g=h[2],y=m-g-o*p;(p||y)&&$fe(e,a)&&(f+=y,d+=p),a instanceof ShadowRoot?a=a.host:a=a.parentNode}while(!u&&a!==document.body||u&&(t.contains(a)||t===a));return(c&&(Math.abs(f)<1||!i)||!c&&(Math.abs(d)<1||!i))&&(l=!0),l},QA=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},eJ=function(e){return[e.deltaX,e.deltaY]},tJ=function(e){return e&&"current"in e?e.current:e},tOe=function(e,t){return e[0]===t[0]&&e[1]===t[1]},nOe=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},rOe=0,cv=[];function iOe(e){var t=k.useRef([]),n=k.useRef([0,0]),r=k.useRef(),i=k.useState(rOe++)[0],o=k.useState(Dfe)[0],s=k.useRef(e);k.useEffect(function(){s.current=e},[e]),k.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(i));var m=SDe([e.lockRef.current],(e.shards||[]).map(tJ),!0).filter(Boolean);return m.forEach(function(g){return g.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),m.forEach(function(g){return g.classList.remove("allow-interactivity-".concat(i))})}}},[e.inert,e.lockRef.current,e.shards]);var a=k.useCallback(function(m,g){if("touches"in m&&m.touches.length===2)return!s.current.allowPinchZoom;var y=QA(m),v=n.current,_="deltaX"in m?m.deltaX:v[0]-y[0],w="deltaY"in m?m.deltaY:v[1]-y[1],E,S=m.target,T=Math.abs(_)>Math.abs(w)?"h":"v";if("touches"in m&&T==="h"&&S.type==="range")return!1;var C=ZQ(T,S);if(!C)return!0;if(C?E=T:(E=T==="v"?"h":"v",C=ZQ(T,S)),!C)return!1;if(!r.current&&"changedTouches"in m&&(_||w)&&(r.current=E),!E)return!0;var A=r.current||E;return eOe(A,g,m,A==="h"?_:w,!0)},[]),u=k.useCallback(function(m){var g=m;if(!(!cv.length||cv[cv.length-1]!==o)){var y="deltaY"in g?eJ(g):QA(g),v=t.current.filter(function(E){return E.name===g.type&&(E.target===g.target||g.target===E.shadowParent)&&tOe(E.delta,y)})[0];if(v&&v.should){g.cancelable&&g.preventDefault();return}if(!v){var _=(s.current.shards||[]).map(tJ).filter(Boolean).filter(function(E){return E.contains(g.target)}),w=_.length>0?a(g,_[0]):!s.current.noIsolation;w&&g.cancelable&&g.preventDefault()}}},[]),l=k.useCallback(function(m,g,y,v){var _={name:m,delta:g,target:y,should:v,shadowParent:oOe(y)};t.current.push(_),setTimeout(function(){t.current=t.current.filter(function(w){return w!==_})},1)},[]),c=k.useCallback(function(m){n.current=QA(m),r.current=void 0},[]),f=k.useCallback(function(m){l(m.type,eJ(m),m.target,a(m,e.lockRef.current))},[]),d=k.useCallback(function(m){l(m.type,QA(m),m.target,a(m,e.lockRef.current))},[]);k.useEffect(function(){return cv.push(o),e.setCallbacks({onScrollCapture:f,onWheelCapture:f,onTouchMoveCapture:d}),document.addEventListener("wheel",u,lv),document.addEventListener("touchmove",u,lv),document.addEventListener("touchstart",c,lv),function(){cv=cv.filter(function(m){return m!==o}),document.removeEventListener("wheel",u,lv),document.removeEventListener("touchmove",u,lv),document.removeEventListener("touchstart",c,lv)}},[]);var h=e.removeScrollBar,p=e.inert;return k.createElement(k.Fragment,null,p?k.createElement(o,{styles:nOe(i)}):null,h?k.createElement(GDe,{gapMode:e.gapMode}):null)}function oOe(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const sOe=ODe(Pfe,iOe);var sD=k.forwardRef(function(e,t){return k.createElement(oD,zc({},e,{ref:t,sideCar:sOe}))});sD.classNames=oD.classNames;function yr(e){return Object.keys(e)}function KM(e){return e&&typeof e=="object"&&!Array.isArray(e)}function n7(e,t){const n={...e},r=t;return KM(e)&&KM(t)&&Object.keys(t).forEach(i=>{KM(r[i])&&i in e?n[i]=n7(n[i],r[i]):n[i]=r[i]}),n}function aOe(e){return e.replace(/[A-Z]/g,t=>`-${t.toLowerCase()}`)}function uOe(e){var t;return typeof e!="string"||!e.includes("var(--mantine-scale)")?e:(t=e.match(/^calc\((.*?)\)$/))==null?void 0:t[1].split("*")[0].trim()}function bT(e){const t=uOe(e);return typeof t=="number"?t:typeof t=="string"?t.includes("calc")||t.includes("var")?t:t.includes("px")?Number(t.replace("px","")):t.includes("rem")?Number(t.replace("rem",""))*16:t.includes("em")?Number(t.replace("em",""))*16:Number(t):NaN}function XM(e){return e==="0rem"?"0rem":`calc(${e} * var(--mantine-scale))`}function Lfe(e,{shouldScale:t=!1}={}){function n(r){if(r===0||r==="0")return`0${e}`;if(typeof r=="number"){const i=`${r/16}${e}`;return t?XM(i):i}if(typeof r=="string"){if(r===""||r.startsWith("calc(")||r.startsWith("clamp(")||r.includes("rgba("))return r;if(r.includes(","))return r.split(",").map(o=>n(o)).join(",");if(r.includes(" "))return r.split(" ").map(o=>n(o)).join(" ");if(r.includes(e))return t?XM(r):r;const i=r.replace("px","");if(!Number.isNaN(Number(i))){const o=`${Number(i)/16}${e}`;return t?XM(o):o}}return r}return n}const we=Lfe("rem",{shouldScale:!0}),ZI=Lfe("em");function Dm(e){return Object.keys(e).reduce((t,n)=>(e[n]!==void 0&&(t[n]=e[n]),t),{})}function Ffe(e){return typeof e=="number"?!0:typeof e=="string"?e.startsWith("calc(")||e.startsWith("var(")||e.includes(" ")&&e.trim()!==""?!0:/[0-9]/.test(e.trim().replace("-","")[0]):!1}function Om(e){return Array.isArray(e)||e===null?!1:typeof e=="object"?e.type!==k.Fragment:!1}function go(e){const t=k.createContext(null);return[({children:i,value:o})=>b.jsx(t.Provider,{value:o,children:i}),()=>{const i=k.useContext(t);if(i===null)throw new Error(e);return i}]}function a_(e=null){const t=k.createContext(e);return[({children:i,value:o})=>b.jsx(t.Provider,{value:o,children:i}),()=>k.useContext(t)]}function eR(e,t){return n=>{if(typeof n!="string"||n.trim().length===0)throw new Error(t);return`${e}-${n}`}}function tR(e,t){let n=e;for(;(n=n.parentElement)&&!n.matches(t););return n}function lOe(e,t,n){for(let r=e-1;r>=0;r-=1)if(!t[r].disabled)return r;if(n){for(let r=t.length-1;r>-1;r-=1)if(!t[r].disabled)return r}return e}function cOe(e,t,n){for(let r=e+1;r<t.length;r+=1)if(!t[r].disabled)return r;if(n){for(let r=0;r<t.length;r+=1)if(!t[r].disabled)return r}return e}function fOe(e,t,n){return tR(e,n)===tR(t,n)}function r7({parentSelector:e,siblingSelector:t,onKeyDown:n,loop:r=!0,activateOnFocus:i=!1,dir:o="rtl",orientation:s}){return a=>{var p;n==null||n(a);const u=Array.from(((p=tR(a.currentTarget,e))==null?void 0:p.querySelectorAll(t))||[]).filter(m=>fOe(a.currentTarget,m,e)),l=u.findIndex(m=>a.currentTarget===m),c=cOe(l,u,r),f=lOe(l,u,r),d=o==="rtl"?f:c,h=o==="rtl"?c:f;switch(a.key){case"ArrowRight":{s==="horizontal"&&(a.stopPropagation(),a.preventDefault(),u[d].focus(),i&&u[d].click());break}case"ArrowLeft":{s==="horizontal"&&(a.stopPropagation(),a.preventDefault(),u[h].focus(),i&&u[h].click());break}case"ArrowUp":{s==="vertical"&&(a.stopPropagation(),a.preventDefault(),u[f].focus(),i&&u[f].click());break}case"ArrowDown":{s==="vertical"&&(a.stopPropagation(),a.preventDefault(),u[c].focus(),i&&u[c].click());break}case"Home":{a.stopPropagation(),a.preventDefault(),!u[0].disabled&&u[0].focus();break}case"End":{a.stopPropagation(),a.preventDefault();const m=u.length-1;!u[m].disabled&&u[m].focus();break}}}}const dOe={app:100,modal:200,popover:300,overlay:400,max:9999};function Nu(e){return dOe[e]}const hOe=()=>{};function pOe(e,t={active:!0}){return typeof e!="function"||!t.active?t.onKeyDown||hOe:n=>{var r;n.key==="Escape"&&(e(n),(r=t.onTrigger)==null||r.call(t))}}function Wt(e,t="size",n=!0){if(e!==void 0)return Ffe(e)?n?we(e):e:`var(--${t}-${e})`}function _i(e){return Wt(e,"mantine-spacing")}function vr(e){return e===void 0?"var(--mantine-radius-default)":Wt(e,"mantine-radius")}function $o(e){return Wt(e,"mantine-font-size")}function jfe(e){return Wt(e,"mantine-line-height",!1)}function i7(e){if(e)return Wt(e,"mantine-shadow",!1)}function Td(e,t){return n=>{e==null||e(n),t==null||t(n)}}function o7(e,t){return e in t.breakpoints?bT(t.breakpoints[e]):bT(e)}function _T(e,t){const n=e.map(r=>({value:r,px:o7(r,t)}));return n.sort((r,i)=>r.px-i.px),n}function ql(e){return typeof e=="object"&&e!==null?"base"in e?e.base:void 0:e}function mOe(e,t,n){var r;return n?Array.from(((r=tR(n,t))==null?void 0:r.querySelectorAll(e))||[]).findIndex(i=>i===n):null}function gOe(){const[e,t]=k.useState(-1);return[e,{setHovered:t,resetHovered:()=>t(-1)}]}function Yc(e,t,n){return t===void 0&&n===void 0?e:t!==void 0&&n===void 0?Math.max(e,t):Math.min(t===void 0&&n!==void 0?e:Math.max(e,t),n)}function E1(){return`mantine-${Math.random().toString(36).slice(2,11)}`}function Lg(e){const t=k.useRef(e);return k.useEffect(()=>{t.current=e}),k.useMemo(()=>(...n)=>{var r;return(r=t.current)==null?void 0:r.call(t,...n)},[])}function aD(e,t){const n=Lg(e),r=k.useRef(0);return k.useEffect(()=>()=>window.clearTimeout(r.current),[]),k.useCallback((...i)=>{window.clearTimeout(r.current),r.current=window.setTimeout(()=>n(...i),t)},[n,t])}const nJ=["mousedown","touchstart"];function yOe(e,t,n){const r=k.useRef();return k.useEffect(()=>{const i=o=>{const{target:s}=o??{};if(Array.isArray(n)){const a=(s==null?void 0:s.hasAttribute("data-ignore-outside-clicks"))||!document.body.contains(s)&&s.tagName!=="HTML";n.every(l=>!!l&&!o.composedPath().includes(l))&&!a&&e()}else r.current&&!r.current.contains(s)&&e()};return(t||nJ).forEach(o=>document.addEventListener(o,i)),()=>{(t||nJ).forEach(o=>document.removeEventListener(o,i))}},[r,e,n]),r}function vOe(e,t){try{return e.addEventListener("change",t),()=>e.removeEventListener("change",t)}catch{return e.addListener(t),()=>e.removeListener(t)}}function bOe(e,t){return typeof window<"u"&&"matchMedia"in window?window.matchMedia(e).matches:!1}function _Oe(e,t,{getInitialValueInEffect:n}={getInitialValueInEffect:!0}){const[r,i]=k.useState(n?t:bOe(e)),o=k.useRef();return k.useEffect(()=>{if("matchMedia"in window)return o.current=window.matchMedia(e),i(o.current.matches),vOe(o.current,s=>i(s.matches))},[e]),r}const gy=typeof document<"u"?k.useLayoutEffect:k.useEffect;function vf(e,t){const n=k.useRef(!1);k.useEffect(()=>()=>{n.current=!1},[]),k.useEffect(()=>{if(n.current)return e();n.current=!0},t)}function Bfe({opened:e,shouldReturnFocus:t=!0}){const n=k.useRef(),r=()=>{var i;n.current&&"focus"in n.current&&typeof n.current.focus=="function"&&((i=n.current)==null||i.focus({preventScroll:!0}))};return vf(()=>{let i=-1;const o=s=>{s.key==="Tab"&&window.clearTimeout(i)};return document.addEventListener("keydown",o),e?n.current=document.activeElement:t&&(i=window.setTimeout(r,10)),()=>{window.clearTimeout(i),document.removeEventListener("keydown",o)}},[e,t]),r}function wOe(e,t="body > :not(script)"){const n=E1(),r=Array.from(document.querySelectorAll(t)).map(i=>{var u;if((u=i==null?void 0:i.shadowRoot)!=null&&u.contains(e)||i.contains(e))return;const o=i.getAttribute("aria-hidden"),s=i.getAttribute("data-hidden"),a=i.getAttribute("data-focus-id");return i.setAttribute("data-focus-id",n),o===null||o==="false"?i.setAttribute("aria-hidden","true"):!s&&!a&&i.setAttribute("data-hidden",o),{node:i,ariaHidden:s||null}});return()=>{r.forEach(i=>{!i||n!==i.node.getAttribute("data-focus-id")||(i.ariaHidden===null?i.node.removeAttribute("aria-hidden"):i.node.setAttribute("aria-hidden",i.ariaHidden),i.node.removeAttribute("data-focus-id"),i.node.removeAttribute("data-hidden"))})}}const EOe=/input|select|textarea|button|object/,Ufe="a, input, select, textarea, button, object, [tabindex]";function xOe(e){return e.style.display==="none"}function TOe(e){if(e.getAttribute("aria-hidden")||e.getAttribute("hidden")||e.getAttribute("type")==="hidden")return!1;let n=e;for(;n&&!(n===document.body||n.nodeType===11);){if(xOe(n))return!1;n=n.parentNode}return!0}function zfe(e){let t=e.getAttribute("tabindex");return t===null&&(t=void 0),parseInt(t,10)}function qF(e){const t=e.nodeName.toLowerCase(),n=!Number.isNaN(zfe(e));return(EOe.test(t)&&!e.disabled||e instanceof HTMLAnchorElement&&e.href||n)&&TOe(e)}function Vfe(e){const t=zfe(e);return(Number.isNaN(t)||t>=0)&&qF(e)}function SOe(e){return Array.from(e.querySelectorAll(Ufe)).filter(Vfe)}function COe(e,t){const n=SOe(e);if(!n.length){t.preventDefault();return}const r=n[t.shiftKey?0:n.length-1],i=e.getRootNode();let o=r===i.activeElement||e===i.activeElement;const s=i.activeElement;if(s.tagName==="INPUT"&&s.getAttribute("type")==="radio"&&(o=n.filter(c=>c.getAttribute("type")==="radio"&&c.getAttribute("name")===s.getAttribute("name")).includes(r)),!o)return;t.preventDefault();const u=n[t.shiftKey?n.length-1:0];u&&u.focus()}function AOe(e=!0){const t=k.useRef(),n=k.useRef(null),r=o=>{let s=o.querySelector("[data-autofocus]");if(!s){const a=Array.from(o.querySelectorAll(Ufe));s=a.find(Vfe)||a.find(qF)||null,!s&&qF(o)&&(s=o)}s&&s.focus({preventScroll:!0})},i=k.useCallback(o=>{if(e){if(o===null){n.current&&(n.current(),n.current=null);return}n.current=wOe(o),t.current!==o&&(o?(setTimeout(()=>{o.getRootNode()&&r(o)}),t.current=o):t.current=null)}},[e]);return k.useEffect(()=>{if(!e)return;t.current&&setTimeout(()=>r(t.current));const o=s=>{s.key==="Tab"&&t.current&&COe(t.current,s)};return document.addEventListener("keydown",o),()=>{document.removeEventListener("keydown",o),n.current&&n.current()}},[e]),i}const kOe=e=>(e+1)%1e6;function IOe(){const[,e]=k.useReducer(kOe,0);return e}const ROe=Yn.useId||(()=>{});function NOe(){const e=ROe();return e?`mantine-${e.replace(/:/g,"")}`:""}function Js(e){const t=NOe(),[n,r]=k.useState(t);return gy(()=>{r(E1())},[]),typeof e=="string"?e:typeof window>"u"?t:n}function Hfe(e,t,n){k.useEffect(()=>(window.addEventListener(e,t,n),()=>window.removeEventListener(e,t,n)),[e,t])}function s7(e,t){typeof e=="function"?e(t):typeof e=="object"&&e!==null&&"current"in e&&(e.current=t)}function qfe(...e){return t=>{e.forEach(n=>s7(n,t))}}function Gi(...e){return k.useCallback(qfe(...e),e)}function Wfe(e,t,n="ltr"){const r=k.useRef(null),i=k.useRef(!1),o=k.useRef(!1),s=k.useRef(0),[a,u]=k.useState(!1);return k.useEffect(()=>{i.current=!0},[]),k.useEffect(()=>{var v,_;const l=({x:w,y:E})=>{cancelAnimationFrame(s.current),s.current=requestAnimationFrame(()=>{if(i.current&&r.current){r.current.style.userSelect="none";const S=r.current.getBoundingClientRect();if(S.width&&S.height){const T=Yc((w-S.left)/S.width,0,1);e({x:n==="ltr"?T:1-T,y:Yc((E-S.top)/S.height,0,1)})}}})},c=()=>{document.addEventListener("mousemove",m),document.addEventListener("mouseup",h),document.addEventListener("touchmove",y),document.addEventListener("touchend",h)},f=()=>{document.removeEventListener("mousemove",m),document.removeEventListener("mouseup",h),document.removeEventListener("touchmove",y),document.removeEventListener("touchend",h)},d=()=>{!o.current&&i.current&&(o.current=!0,typeof(t==null?void 0:t.onScrubStart)=="function"&&t.onScrubStart(),u(!0),c())},h=()=>{o.current&&i.current&&(o.current=!1,u(!1),f(),setTimeout(()=>{typeof(t==null?void 0:t.onScrubEnd)=="function"&&t.onScrubEnd()},0))},p=w=>{d(),w.preventDefault(),m(w)},m=w=>l({x:w.clientX,y:w.clientY}),g=w=>{w.cancelable&&w.preventDefault(),d(),y(w)},y=w=>{w.cancelable&&w.preventDefault(),l({x:w.changedTouches[0].clientX,y:w.changedTouches[0].clientY})};return(v=r.current)==null||v.addEventListener("mousedown",p),(_=r.current)==null||_.addEventListener("touchstart",g,{passive:!1}),()=>{r.current&&(r.current.removeEventListener("mousedown",p),r.current.removeEventListener("touchstart",g))}},[n,e]),{ref:r,active:a}}function Wi({value:e,defaultValue:t,finalValue:n,onChange:r=()=>{}}){const[i,o]=k.useState(t!==void 0?t:n),s=(a,...u)=>{o(a),r==null||r(a,...u)};return e!==void 0?[e,r,!0]:[i,s,!1]}function uD(e,t){return _Oe("(prefers-reduced-motion: reduce)",e,t)}const POe={x:0,y:0,width:0,height:0,top:0,left:0,bottom:0,right:0};function a7(e){const t=k.useRef(0),n=k.useRef(null),[r,i]=k.useState(POe),o=k.useMemo(()=>typeof window<"u"?new ResizeObserver(s=>{const a=s[0];a&&(cancelAnimationFrame(t.current),t.current=requestAnimationFrame(()=>{n.current&&i(a.contentRect)}))}):null,[]);return k.useEffect(()=>(n.current&&(o==null||o.observe(n.current,e)),()=>{o==null||o.disconnect(),t.current&&cancelAnimationFrame(t.current)}),[n.current]),[n,r]}function DOe(e){const[t,{width:n,height:r}]=a7(e);return{ref:t,width:n,height:r}}function lD(e=!1,t){const{onOpen:n,onClose:r}={},[i,o]=k.useState(e),s=k.useCallback(()=>{o(l=>l||(n==null||n(),!0))},[n]),a=k.useCallback(()=>{o(l=>l&&(r==null||r(),!1))},[r]),u=k.useCallback(()=>{i?a():s()},[a,s,i]);return[i,{open:s,close:a,toggle:u}]}function OOe(e,t){window.dispatchEvent(new CustomEvent(e,{detail:t}))}function $Oe(e){function t(r){const i=Object.keys(r).reduce((o,s)=>(o[`${e}:${s}`]=a=>r[s](a.detail),o),{});gy(()=>(Object.keys(i).forEach(o=>{window.removeEventListener(o,i[o]),window.addEventListener(o,i[o])}),()=>Object.keys(i).forEach(o=>{window.removeEventListener(o,i[o])})),[i])}function n(r){return(...i)=>OOe(`${e}:${String(r)}`,i[0])}return[t,n]}var MOe={};function LOe(){return typeof process<"u"&&MOe?"production":"development"}function Gfe(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(n=Gfe(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function fi(){for(var e,t,n=0,r="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=Gfe(e))&&(r&&(r+=" "),r+=t);return r}const FOe={};function jOe(e){const t={};return e.forEach(n=>{Object.entries(n).forEach(([r,i])=>{t[r]?t[r]=fi(t[r],i):t[r]=i})}),t}function cD({theme:e,classNames:t,props:n,stylesCtx:r}){const o=(Array.isArray(t)?t:[t]).map(s=>typeof s=="function"?s(e,n,r):s||FOe);return jOe(o)}function nR({theme:e,styles:t,props:n,stylesCtx:r}){return(Array.isArray(t)?t:[t]).reduce((o,s)=>typeof s=="function"?{...o,...s(e,n,r)}:{...o,...s},{})}const Yfe=k.createContext(null);function $m(){const e=k.useContext(Yfe);if(!e)throw new Error("[@mantine/core] MantineProvider was not found in tree");return e}function BOe(){return $m().cssVariablesResolver}function UOe(){return $m().classNamesPrefix}function u7(){return $m().getStyleNonce}function zOe(){return $m().withStaticClasses}function VOe(){return $m().headless}function HOe(){var e;return(e=$m().stylesTransform)==null?void 0:e.sx}function qOe(){var e;return(e=$m().stylesTransform)==null?void 0:e.styles}function WOe(e){return/^#?([0-9A-F]{3}){1,2}([0-9A-F]{2})?$/i.test(e)}function GOe(e){let t=e.replace("#","");if(t.length===3){const s=t.split("");t=[s[0],s[0],s[1],s[1],s[2],s[2]].join("")}if(t.length===8){const s=parseInt(t.slice(6,8),16)/255;return{r:parseInt(t.slice(0,2),16),g:parseInt(t.slice(2,4),16),b:parseInt(t.slice(4,6),16),a:s}}const n=parseInt(t,16),r=n>>16&255,i=n>>8&255,o=n&255;return{r,g:i,b:o,a:1}}function YOe(e){const[t,n,r,i]=e.replace(/[^0-9,./]/g,"").split(/[/,]/).map(Number);return{r:t,g:n,b:r,a:i||1}}function KOe(e){const t=/^hsla?\(\s*(\d+)\s*,\s*(\d+%)\s*,\s*(\d+%)\s*(,\s*(0?\.\d+|\d+(\.\d+)?))?\s*\)$/i,n=e.match(t);if(!n)return{r:0,g:0,b:0,a:1};const r=parseInt(n[1],10),i=parseInt(n[2],10)/100,o=parseInt(n[3],10)/100,s=n[5]?parseFloat(n[5]):void 0,a=(1-Math.abs(2*o-1))*i,u=r/60,l=a*(1-Math.abs(u%2-1)),c=o-a/2;let f,d,h;return u>=0&&u<1?(f=a,d=l,h=0):u>=1&&u<2?(f=l,d=a,h=0):u>=2&&u<3?(f=0,d=a,h=l):u>=3&&u<4?(f=0,d=l,h=a):u>=4&&u<5?(f=l,d=0,h=a):(f=a,d=0,h=l),{r:Math.round((f+c)*255),g:Math.round((d+c)*255),b:Math.round((h+c)*255),a:s||1}}function l7(e){return WOe(e)?GOe(e):e.startsWith("rgb")?YOe(e):e.startsWith("hsl")?KOe(e):{r:0,g:0,b:0,a:1}}function JA(e,t){if(e.startsWith("var("))return`color-mix(in srgb, ${e}, black ${t*100}%)`;const{r:n,g:r,b:i,a:o}=l7(e),s=1-t,a=u=>Math.round(u*s);return`rgba(${a(n)}, ${a(r)}, ${a(i)}, ${o})`}function wT(e,t){return typeof e.primaryShade=="number"?e.primaryShade:t==="dark"?e.primaryShade.dark:e.primaryShade.light}function QM(e){return e<=.03928?e/12.92:((e+.055)/1.055)**2.4}function XOe(e){const t=e.match(/oklch\((.*?)%\s/);return t?parseFloat(t[1]):null}function QOe(e){if(e.startsWith("oklch("))return(XOe(e)||0)/100;const{r:t,g:n,b:r}=l7(e),i=t/255,o=n/255,s=r/255,a=QM(i),u=QM(o),l=QM(s);return .2126*a+.7152*u+.0722*l}function Cw(e,t=.179){return e.startsWith("var(")?!1:QOe(e)>t}function Nf({color:e,theme:t,colorScheme:n}){if(typeof e!="string")throw new Error(`[@mantine/core] Failed to parse color. Expected color to be a string, instead got ${typeof e}`);if(e==="bright")return{color:e,value:n==="dark"?t.white:t.black,shade:void 0,isThemeColor:!1,isLight:Cw(n==="dark"?t.white:t.black,t.luminanceThreshold),variable:"--mantine-color-bright"};if(e==="dimmed")return{color:e,value:n==="dark"?t.colors.dark[2]:t.colors.gray[7],shade:void 0,isThemeColor:!1,isLight:Cw(n==="dark"?t.colors.dark[2]:t.colors.gray[6],t.luminanceThreshold),variable:"--mantine-color-dimmed"};if(e==="white"||e==="black")return{color:e,value:e==="white"?t.white:t.black,shade:void 0,isThemeColor:!1,isLight:Cw(e==="white"?t.white:t.black,t.luminanceThreshold),variable:`--mantine-color-${e}`};const[r,i]=e.split("."),o=i?Number(i):void 0,s=r in t.colors;if(s){const a=o!==void 0?t.colors[r][o]:t.colors[r][wT(t,n||"light")];return{color:r,value:a,shade:o,isThemeColor:s,isLight:Cw(a,t.luminanceThreshold),variable:i?`--mantine-color-${r}-${o}`:`--mantine-color-${r}-filled`}}return{color:e,value:e,isThemeColor:s,isLight:Cw(e,t.luminanceThreshold),shade:o,variable:void 0}}function ar(e,t){const n=Nf({color:e||t.primaryColor,theme:t});return n.variable?`var(${n.variable})`:e}function WF(e,t){const n={from:(e==null?void 0:e.from)||t.defaultGradient.from,to:(e==null?void 0:e.to)||t.defaultGradient.to,deg:(e==null?void 0:e.deg)||t.defaultGradient.deg||0},r=ar(n.from,t),i=ar(n.to,t);return`linear-gradient(${n.deg}deg, ${r} 0%, ${i} 100%)`}function Mc(e,t){if(typeof e!="string"||t>1||t<0)return"rgba(0, 0, 0, 1)";if(e.startsWith("var(")){const o=(1-t)*100;return`color-mix(in srgb, ${e}, transparent ${o}%)`}if(e.startsWith("oklch"))return e.includes("/")?e.replace(/\/\s*[\d.]+\s*\)/,`/ ${t})`):e.replace(")",` / ${t})`);const{r:n,g:r,b:i}=l7(e);return`rgba(${n}, ${r}, ${i}, ${t})`}const fv=Mc,JOe=({color:e,theme:t,variant:n,gradient:r,autoContrast:i})=>{const o=Nf({color:e,theme:t}),s=typeof i=="boolean"?i:t.autoContrast;if(n==="filled"){const a=s&&o.isLight?"var(--mantine-color-black)":"var(--mantine-color-white)";return o.isThemeColor?o.shade===void 0?{background:`var(--mantine-color-${e}-filled)`,hover:`var(--mantine-color-${e}-filled-hover)`,color:a,border:`${we(1)} solid transparent`}:{background:`var(--mantine-color-${o.color}-${o.shade})`,hover:`var(--mantine-color-${o.color}-${o.shade===9?8:o.shade+1})`,color:a,border:`${we(1)} solid transparent`}:{background:e,hover:JA(e,.1),color:a,border:`${we(1)} solid transparent`}}if(n==="light"){if(o.isThemeColor){if(o.shade===void 0)return{background:`var(--mantine-color-${e}-light)`,hover:`var(--mantine-color-${e}-light-hover)`,color:`var(--mantine-color-${e}-light-color)`,border:`${we(1)} solid transparent`};const a=t.colors[o.color][o.shade];return{background:Mc(a,.1),hover:Mc(a,.12),color:`var(--mantine-color-${o.color}-${Math.min(o.shade,6)})`,border:`${we(1)} solid transparent`}}return{background:Mc(e,.1),hover:Mc(e,.12),color:e,border:`${we(1)} solid transparent`}}if(n==="outline")return o.isThemeColor?o.shade===void 0?{background:"transparent",hover:`var(--mantine-color-${e}-outline-hover)`,color:`var(--mantine-color-${e}-outline)`,border:`${we(1)} solid var(--mantine-color-${e}-outline)`}:{background:"transparent",hover:Mc(t.colors[o.color][o.shade],.05),color:`var(--mantine-color-${o.color}-${o.shade})`,border:`${we(1)} solid var(--mantine-color-${o.color}-${o.shade})`}:{background:"transparent",hover:Mc(e,.05),color:e,border:`${we(1)} solid ${e}`};if(n==="subtle"){if(o.isThemeColor){if(o.shade===void 0)return{background:"transparent",hover:`var(--mantine-color-${e}-light-hover)`,color:`var(--mantine-color-${e}-light-color)`,border:`${we(1)} solid transparent`};const a=t.colors[o.color][o.shade];return{background:"transparent",hover:Mc(a,.12),color:`var(--mantine-color-${o.color}-${Math.min(o.shade,6)})`,border:`${we(1)} solid transparent`}}return{background:"transparent",hover:Mc(e,.12),color:e,border:`${we(1)} solid transparent`}}return n==="transparent"?o.isThemeColor?o.shade===void 0?{background:"transparent",hover:"transparent",color:`var(--mantine-color-${e}-light-color)`,border:`${we(1)} solid transparent`}:{background:"transparent",hover:"transparent",color:`var(--mantine-color-${o.color}-${Math.min(o.shade,6)})`,border:`${we(1)} solid transparent`}:{background:"transparent",hover:"transparent",color:e,border:`${we(1)} solid transparent`}:n==="white"?o.isThemeColor?o.shade===void 0?{background:"var(--mantine-color-white)",hover:JA(t.white,.01),color:`var(--mantine-color-${e}-filled)`,border:`${we(1)} solid transparent`}:{background:"var(--mantine-color-white)",hover:JA(t.white,.01),color:`var(--mantine-color-${o.color}-${o.shade})`,border:`${we(1)} solid transparent`}:{background:"var(--mantine-color-white)",hover:JA(t.white,.01),color:e,border:`${we(1)} solid transparent`}:n==="gradient"?{background:WF(r,t),hover:WF(r,t),color:"var(--mantine-color-white)",border:"none"}:n==="default"?{background:"var(--mantine-color-default)",hover:"var(--mantine-color-default-hover)",color:"var(--mantine-color-default-color)",border:`${we(1)} solid var(--mantine-color-default-border)`}:{}},ZOe={dark:["#C9C9C9","#b8b8b8","#828282","#696969","#424242","#3b3b3b","#2e2e2e","#242424","#1f1f1f","#141414"],gray:["#f8f9fa","#f1f3f5","#e9ecef","#dee2e6","#ced4da","#adb5bd","#868e96","#495057","#343a40","#212529"],red:["#fff5f5","#ffe3e3","#ffc9c9","#ffa8a8","#ff8787","#ff6b6b","#fa5252","#f03e3e","#e03131","#c92a2a"],pink:["#fff0f6","#ffdeeb","#fcc2d7","#faa2c1","#f783ac","#f06595","#e64980","#d6336c","#c2255c","#a61e4d"],grape:["#f8f0fc","#f3d9fa","#eebefa","#e599f7","#da77f2","#cc5de8","#be4bdb","#ae3ec9","#9c36b5","#862e9c"],violet:["#f3f0ff","#e5dbff","#d0bfff","#b197fc","#9775fa","#845ef7","#7950f2","#7048e8","#6741d9","#5f3dc4"],indigo:["#edf2ff","#dbe4ff","#bac8ff","#91a7ff","#748ffc","#5c7cfa","#4c6ef5","#4263eb","#3b5bdb","#364fc7"],blue:["#e7f5ff","#d0ebff","#a5d8ff","#74c0fc","#4dabf7","#339af0","#228be6","#1c7ed6","#1971c2","#1864ab"],cyan:["#e3fafc","#c5f6fa","#99e9f2","#66d9e8","#3bc9db","#22b8cf","#15aabf","#1098ad","#0c8599","#0b7285"],teal:["#e6fcf5","#c3fae8","#96f2d7","#63e6be","#38d9a9","#20c997","#12b886","#0ca678","#099268","#087f5b"],green:["#ebfbee","#d3f9d8","#b2f2bb","#8ce99a","#69db7c","#51cf66","#40c057","#37b24d","#2f9e44","#2b8a3e"],lime:["#f4fce3","#e9fac8","#d8f5a2","#c0eb75","#a9e34b","#94d82d","#82c91e","#74b816","#66a80f","#5c940d"],yellow:["#fff9db","#fff3bf","#ffec99","#ffe066","#ffd43b","#fcc419","#fab005","#f59f00","#f08c00","#e67700"],orange:["#fff4e6","#ffe8cc","#ffd8a8","#ffc078","#ffa94d","#ff922b","#fd7e14","#f76707","#e8590c","#d9480f"]},rJ="-apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Helvetica, Arial, sans-serif, Apple Color Emoji, Segoe UI Emoji",c7={scale:1,fontSmoothing:!0,focusRing:"auto",white:"#fff",black:"#000",colors:ZOe,primaryShade:{light:6,dark:8},primaryColor:"blue",variantColorResolver:JOe,autoContrast:!1,luminanceThreshold:.3,fontFamily:rJ,fontFamilyMonospace:"ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, Liberation Mono, Courier New, monospace",respectReducedMotion:!1,cursorType:"default",defaultGradient:{from:"blue",to:"cyan",deg:45},defaultRadius:"sm",activeClassName:"mantine-active",focusClassName:"",headings:{fontFamily:rJ,fontWeight:"700",textWrap:"wrap",sizes:{h1:{fontSize:we(34),lineHeight:"1.3"},h2:{fontSize:we(26),lineHeight:"1.35"},h3:{fontSize:we(22),lineHeight:"1.4"},h4:{fontSize:we(18),lineHeight:"1.45"},h5:{fontSize:we(16),lineHeight:"1.5"},h6:{fontSize:we(14),lineHeight:"1.5"}}},fontSizes:{xs:we(12),sm:we(14),md:we(16),lg:we(18),xl:we(20)},lineHeights:{xs:"1.4",sm:"1.45",md:"1.55",lg:"1.6",xl:"1.65"},radius:{xs:we(2),sm:we(4),md:we(8),lg:we(16),xl:we(32)},spacing:{xs:we(10),sm:we(12),md:we(16),lg:we(20),xl:we(32)},breakpoints:{xs:"36em",sm:"48em",md:"62em",lg:"75em",xl:"88em"},shadows:{xs:`0 ${we(1)} ${we(3)} rgba(0, 0, 0, 0.05), 0 ${we(1)} ${we(2)} rgba(0, 0, 0, 0.1)`,sm:`0 ${we(1)} ${we(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${we(10)} ${we(15)} ${we(-5)}, rgba(0, 0, 0, 0.04) 0 ${we(7)} ${we(7)} ${we(-5)}`,md:`0 ${we(1)} ${we(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${we(20)} ${we(25)} ${we(-5)}, rgba(0, 0, 0, 0.04) 0 ${we(10)} ${we(10)} ${we(-5)}`,lg:`0 ${we(1)} ${we(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${we(28)} ${we(23)} ${we(-7)}, rgba(0, 0, 0, 0.04) 0 ${we(12)} ${we(12)} ${we(-7)}`,xl:`0 ${we(1)} ${we(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${we(36)} ${we(28)} ${we(-7)}, rgba(0, 0, 0, 0.04) 0 ${we(17)} ${we(17)} ${we(-7)}`},other:{},components:{}};function iJ(e){return e==="auto"||e==="dark"||e==="light"}function e$e({key:e="mantine-color-scheme-value"}={}){let t;return{get:n=>{if(typeof window>"u")return n;try{const r=window.localStorage.getItem(e);return iJ(r)?r:n}catch{return n}},set:n=>{try{window.localStorage.setItem(e,n)}catch(r){console.warn("[@mantine/core] Local storage color scheme manager was unable to save color scheme.",r)}},subscribe:n=>{t=r=>{r.storageArea===window.localStorage&&r.key===e&&iJ(r.newValue)&&n(r.newValue)},window.addEventListener("storage",t)},unsubscribe:()=>{window.removeEventListener("storage",t)},clear:()=>{window.localStorage.removeItem(e)}}}const t$e="[@mantine/core] MantineProvider: Invalid theme.primaryColor, it accepts only key of theme.colors, learn more  https://mantine.dev/theming/colors/#primary-color",oJ="[@mantine/core] MantineProvider: Invalid theme.primaryShade, it accepts only 0-9 integers or an object { light: 0-9, dark: 0-9 }";function JM(e){return e<0||e>9?!1:parseInt(e.toString(),10)===e}function sJ(e){if(!(e.primaryColor in e.colors))throw new Error(t$e);if(typeof e.primaryShade=="object"&&(!JM(e.primaryShade.dark)||!JM(e.primaryShade.light)))throw new Error(oJ);if(typeof e.primaryShade=="number"&&!JM(e.primaryShade))throw new Error(oJ)}function n$e(e,t){var r;if(!t)return sJ(e),e;const n=n7(e,t);return t.fontFamily&&!((r=t.headings)!=null&&r.fontFamily)&&(n.headings.fontFamily=t.fontFamily),sJ(n),n}const f7=k.createContext(null),r$e=()=>k.useContext(f7)||c7;function Oi(){const e=k.useContext(f7);if(!e)throw new Error("@mantine/core: MantineProvider was not found in component tree, make sure you have it in your app");return e}function Kfe({theme:e,children:t,inherit:n=!0}){const r=r$e(),i=k.useMemo(()=>n$e(n?r:c7,e),[e,r,n]);return b.jsx(f7.Provider,{value:i,children:t})}Kfe.displayName="@mantine/core/MantineThemeProvider";function i$e(){const e=Oi(),t=u7(),n=yr(e.breakpoints).reduce((r,i)=>{const o=e.breakpoints[i].includes("px"),s=bT(e.breakpoints[i]),a=o?`${s-.1}px`:ZI(s-.1),u=o?`${s}px`:ZI(s);return`${r}@media (max-width: ${a}) {.mantine-visible-from-${i} {display: none !important;}}@media (min-width: ${u}) {.mantine-hidden-from-${i} {display: none !important;}}`},"");return b.jsx("style",{"data-mantine-styles":"classes",nonce:t==null?void 0:t(),dangerouslySetInnerHTML:{__html:n}})}function ZM(e){return Object.entries(e).map(([t,n])=>`${t}: ${n};`).join("")}function eL(e,t){return(Array.isArray(e)?e:[e]).reduce((r,i)=>`${i}{${r}}`,t)}function o$e(e,t){const n=ZM(e.variables),r=n?eL(t,n):"",i=ZM(e.dark),o=i?eL(`${t}[data-mantine-color-scheme="dark"]`,i):"",s=ZM(e.light),a=s?eL(`${t}[data-mantine-color-scheme="light"]`,s):"";return`${r}${o}${a}`}function yy({color:e,theme:t,autoContrast:n}){return(typeof n=="boolean"?n:t.autoContrast)&&Nf({color:e||t.primaryColor,theme:t}).isLight?"var(--mantine-color-black)":"var(--mantine-color-white)"}function aJ(e,t){return yy({color:e.colors[e.primaryColor][wT(e,t)],theme:e,autoContrast:null})}function ZA({theme:e,color:t,colorScheme:n,name:r=t,withColorValues:i=!0}){if(!e.colors[t])return{};if(n==="light"){const a=wT(e,"light"),u={[`--mantine-color-${r}-text`]:`var(--mantine-color-${r}-filled)`,[`--mantine-color-${r}-filled`]:`var(--mantine-color-${r}-${a})`,[`--mantine-color-${r}-filled-hover`]:`var(--mantine-color-${r}-${a===9?8:a+1})`,[`--mantine-color-${r}-light`]:fv(e.colors[t][a],.1),[`--mantine-color-${r}-light-hover`]:fv(e.colors[t][a],.12),[`--mantine-color-${r}-light-color`]:`var(--mantine-color-${r}-${a})`,[`--mantine-color-${r}-outline`]:`var(--mantine-color-${r}-${a})`,[`--mantine-color-${r}-outline-hover`]:fv(e.colors[t][a],.05)};return i?{[`--mantine-color-${r}-0`]:e.colors[t][0],[`--mantine-color-${r}-1`]:e.colors[t][1],[`--mantine-color-${r}-2`]:e.colors[t][2],[`--mantine-color-${r}-3`]:e.colors[t][3],[`--mantine-color-${r}-4`]:e.colors[t][4],[`--mantine-color-${r}-5`]:e.colors[t][5],[`--mantine-color-${r}-6`]:e.colors[t][6],[`--mantine-color-${r}-7`]:e.colors[t][7],[`--mantine-color-${r}-8`]:e.colors[t][8],[`--mantine-color-${r}-9`]:e.colors[t][9],...u}:u}const o=wT(e,"dark"),s={[`--mantine-color-${r}-text`]:`var(--mantine-color-${r}-4)`,[`--mantine-color-${r}-filled`]:`var(--mantine-color-${r}-${o})`,[`--mantine-color-${r}-filled-hover`]:`var(--mantine-color-${r}-${o===9?8:o+1})`,[`--mantine-color-${r}-light`]:fv(e.colors[t][Math.max(0,o-2)],.15),[`--mantine-color-${r}-light-hover`]:fv(e.colors[t][Math.max(0,o-2)],.2),[`--mantine-color-${r}-light-color`]:`var(--mantine-color-${r}-${Math.max(o-5,0)})`,[`--mantine-color-${r}-outline`]:`var(--mantine-color-${r}-${Math.max(o-4,0)})`,[`--mantine-color-${r}-outline-hover`]:fv(e.colors[t][Math.max(o-4,0)],.05)};return i?{[`--mantine-color-${r}-0`]:e.colors[t][0],[`--mantine-color-${r}-1`]:e.colors[t][1],[`--mantine-color-${r}-2`]:e.colors[t][2],[`--mantine-color-${r}-3`]:e.colors[t][3],[`--mantine-color-${r}-4`]:e.colors[t][4],[`--mantine-color-${r}-5`]:e.colors[t][5],[`--mantine-color-${r}-6`]:e.colors[t][6],[`--mantine-color-${r}-7`]:e.colors[t][7],[`--mantine-color-${r}-8`]:e.colors[t][8],[`--mantine-color-${r}-9`]:e.colors[t][9],...s}:s}function s$e(e){return Array.isArray(e)?e:Array(10).fill(e)}function a$e(e){return!!e&&typeof e=="object"&&"mantine-virtual-color"in e}function dv(e,t,n){yr(t).forEach(r=>Object.assign(e,{[`--mantine-${n}-${r}`]:t[r]}))}const Xfe=e=>{const t=wT(e,"light"),n=e.defaultRadius in e.radius?e.radius[e.defaultRadius]:we(e.defaultRadius),r={variables:{"--mantine-scale":e.scale.toString(),"--mantine-cursor-type":e.cursorType,"--mantine-color-scheme":"light dark","--mantine-webkit-font-smoothing":e.fontSmoothing?"antialiased":"unset","--mantine-moz-font-smoothing":e.fontSmoothing?"grayscale":"unset","--mantine-color-white":e.white,"--mantine-color-black":e.black,"--mantine-line-height":e.lineHeights.md,"--mantine-font-family":e.fontFamily,"--mantine-font-family-monospace":e.fontFamilyMonospace,"--mantine-font-family-headings":e.headings.fontFamily,"--mantine-heading-font-weight":e.headings.fontWeight,"--mantine-heading-text-wrap":e.headings.textWrap,"--mantine-radius-default":n,"--mantine-primary-color-filled":`var(--mantine-color-${e.primaryColor}-filled)`,"--mantine-primary-color-filled-hover":`var(--mantine-color-${e.primaryColor}-filled-hover)`,"--mantine-primary-color-light":`var(--mantine-color-${e.primaryColor}-light)`,"--mantine-primary-color-light-hover":`var(--mantine-color-${e.primaryColor}-light-hover)`,"--mantine-primary-color-light-color":`var(--mantine-color-${e.primaryColor}-light-color)`},light:{"--mantine-primary-color-contrast":aJ(e,"light"),"--mantine-color-bright":"var(--mantine-color-black)","--mantine-color-text":e.black,"--mantine-color-body":e.white,"--mantine-color-error":"var(--mantine-color-red-6)","--mantine-color-placeholder":"var(--mantine-color-gray-5)","--mantine-color-anchor":`var(--mantine-color-${e.primaryColor}-${t})`,"--mantine-color-default":"var(--mantine-color-white)","--mantine-color-default-hover":"var(--mantine-color-gray-0)","--mantine-color-default-color":"var(--mantine-color-black)","--mantine-color-default-border":"var(--mantine-color-gray-4)","--mantine-color-dimmed":"var(--mantine-color-gray-6)"},dark:{"--mantine-primary-color-contrast":aJ(e,"dark"),"--mantine-color-bright":"var(--mantine-color-white)","--mantine-color-text":"var(--mantine-color-dark-0)","--mantine-color-body":"var(--mantine-color-dark-7)","--mantine-color-error":"var(--mantine-color-red-8)","--mantine-color-placeholder":"var(--mantine-color-dark-3)","--mantine-color-anchor":`var(--mantine-color-${e.primaryColor}-4)`,"--mantine-color-default":"var(--mantine-color-dark-6)","--mantine-color-default-hover":"var(--mantine-color-dark-5)","--mantine-color-default-color":"var(--mantine-color-white)","--mantine-color-default-border":"var(--mantine-color-dark-4)","--mantine-color-dimmed":"var(--mantine-color-dark-2)"}};dv(r.variables,e.breakpoints,"breakpoint"),dv(r.variables,e.spacing,"spacing"),dv(r.variables,e.fontSizes,"font-size"),dv(r.variables,e.lineHeights,"line-height"),dv(r.variables,e.shadows,"shadow"),dv(r.variables,e.radius,"radius"),e.colors[e.primaryColor].forEach((o,s)=>{r.variables[`--mantine-primary-color-${s}`]=`var(--mantine-color-${e.primaryColor}-${s})`}),yr(e.colors).forEach(o=>{const s=e.colors[o];if(a$e(s)){Object.assign(r.light,ZA({theme:e,name:s.name,color:s.light,colorScheme:"light",withColorValues:!0})),Object.assign(r.dark,ZA({theme:e,name:s.name,color:s.dark,colorScheme:"dark",withColorValues:!0}));return}s.forEach((a,u)=>{r.variables[`--mantine-color-${o}-${u}`]=a}),Object.assign(r.light,ZA({theme:e,color:o,colorScheme:"light",withColorValues:!1})),Object.assign(r.dark,ZA({theme:e,color:o,colorScheme:"dark",withColorValues:!1}))});const i=e.headings.sizes;return yr(i).forEach(o=>{r.variables[`--mantine-${o}-font-size`]=i[o].fontSize,r.variables[`--mantine-${o}-line-height`]=i[o].lineHeight,r.variables[`--mantine-${o}-font-weight`]=i[o].fontWeight||e.headings.fontWeight}),r};function u$e({theme:e,generator:t}){const n=Xfe(e),r=t==null?void 0:t(e);return r?n7(n,r):n}const tL=Xfe(c7);function l$e(e){const t={variables:{},light:{},dark:{}};return yr(e.variables).forEach(n=>{tL.variables[n]!==e.variables[n]&&(t.variables[n]=e.variables[n])}),yr(e.light).forEach(n=>{tL.light[n]!==e.light[n]&&(t.light[n]=e.light[n])}),yr(e.dark).forEach(n=>{tL.dark[n]!==e.dark[n]&&(t.dark[n]=e.dark[n])}),t}function c$e(e){return`
  ${e}[data-mantine-color-scheme="dark"] { --mantine-color-scheme: dark; }
  ${e}[data-mantine-color-scheme="light"] { --mantine-color-scheme: light; }
`}function Qfe({cssVariablesSelector:e,deduplicateCssVariables:t}){const n=Oi(),r=u7(),i=BOe(),o=u$e({theme:n,generator:i}),s=e===":root"&&t,a=s?l$e(o):o,u=o$e(a,e);return u?b.jsx("style",{"data-mantine-styles":!0,nonce:r==null?void 0:r(),dangerouslySetInnerHTML:{__html:`${u}${s?"":c$e(e)}`}}):null}Qfe.displayName="@mantine/CssVariables";function f$e(){const e=console.error;console.error=(...t)=>{t.length>1&&typeof t[0]=="string"&&t[0].toLowerCase().includes("extra attributes from the server")&&typeof t[1]=="string"&&t[1].toLowerCase().includes("data-mantine-color-scheme")||e(...t)}}function hv(e,t){var r;const n=e!=="auto"?e:window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";(r=t())==null||r.setAttribute("data-mantine-color-scheme",n)}function d$e({manager:e,defaultColorScheme:t,getRootElement:n,forceColorScheme:r}){const i=k.useRef(),[o,s]=k.useState(()=>e.get(t)),a=r||o,u=k.useCallback(c=>{r||(hv(c,n),s(c),e.set(c))},[e.set,a,r]),l=k.useCallback(()=>{s(t),hv(t,n),e.clear()},[e.clear,t]);return k.useEffect(()=>(e.subscribe(u),e.unsubscribe),[e.subscribe,e.unsubscribe]),gy(()=>{hv(e.get(t),n)},[]),k.useEffect(()=>{var f;if(r)return hv(r,n),()=>{};r===void 0&&hv(o,n),i.current=window.matchMedia("(prefers-color-scheme: dark)");const c=d=>{o==="auto"&&hv(d.matches?"dark":"light",n)};return(f=i.current)==null||f.addEventListener("change",c),()=>{var d;return(d=i.current)==null?void 0:d.removeEventListener("change",c)}},[o,r]),{colorScheme:a,setColorScheme:u,clearColorScheme:l}}function h$e({respectReducedMotion:e,getRootElement:t}){gy(()=>{var n;e&&((n=t())==null||n.setAttribute("data-respect-reduced-motion","true"))},[e])}f$e();function Jfe({theme:e,children:t,getStyleNonce:n,withStaticClasses:r=!0,withGlobalClasses:i=!0,deduplicateCssVariables:o=!0,withCssVariables:s=!0,cssVariablesSelector:a=":root",classNamesPrefix:u="mantine",colorSchemeManager:l=e$e(),defaultColorScheme:c="light",getRootElement:f=()=>document.documentElement,cssVariablesResolver:d,forceColorScheme:h,stylesTransform:p}){const{colorScheme:m,setColorScheme:g,clearColorScheme:y}=d$e({defaultColorScheme:c,forceColorScheme:h,manager:l,getRootElement:f});return h$e({respectReducedMotion:(e==null?void 0:e.respectReducedMotion)||!1,getRootElement:f}),b.jsx(Yfe.Provider,{value:{colorScheme:m,setColorScheme:g,clearColorScheme:y,getRootElement:f,classNamesPrefix:u,getStyleNonce:n,cssVariablesResolver:d,cssVariablesSelector:a,withStaticClasses:r,stylesTransform:p},children:b.jsxs(Kfe,{theme:e,children:[s&&b.jsx(Qfe,{cssVariablesSelector:a,deduplicateCssVariables:o}),i&&b.jsx(i$e,{}),t]})})}Jfe.displayName="@mantine/core/MantineProvider";function gh({classNames:e,styles:t,props:n,stylesCtx:r}){const i=Oi();return{resolvedClassNames:cD({theme:i,classNames:e,props:n,stylesCtx:r||void 0}),resolvedStyles:nR({theme:i,styles:t,props:n,stylesCtx:r||void 0})}}const p$e={always:"mantine-focus-always",auto:"mantine-focus-auto",never:"mantine-focus-never"};function m$e({theme:e,options:t,unstyled:n}){return fi((t==null?void 0:t.focusable)&&!n&&(e.focusClassName||p$e[e.focusRing]),(t==null?void 0:t.active)&&!n&&e.activeClassName)}function g$e({selector:e,stylesCtx:t,options:n,props:r,theme:i}){return cD({theme:i,classNames:n==null?void 0:n.classNames,props:(n==null?void 0:n.props)||r,stylesCtx:t})[e]}function uJ({selector:e,stylesCtx:t,theme:n,classNames:r,props:i}){return cD({theme:n,classNames:r,props:i,stylesCtx:t})[e]}function y$e({rootSelector:e,selector:t,className:n}){return e===t?n:void 0}function v$e({selector:e,classes:t,unstyled:n}){return n?void 0:t[e]}function b$e({themeName:e,classNamesPrefix:t,selector:n,withStaticClass:r}){return r===!1?[]:e.map(i=>`${t}-${i}-${n}`)}function _$e({themeName:e,theme:t,selector:n,props:r,stylesCtx:i}){return e.map(o=>{var s,a;return(a=cD({theme:t,classNames:(s=t.components[o])==null?void 0:s.classNames,props:r,stylesCtx:i}))==null?void 0:a[n]})}function w$e({options:e,classes:t,selector:n,unstyled:r}){return e!=null&&e.variant&&!r?t[`${n}--${e.variant}`]:void 0}function E$e({theme:e,options:t,themeName:n,selector:r,classNamesPrefix:i,classNames:o,classes:s,unstyled:a,className:u,rootSelector:l,props:c,stylesCtx:f,withStaticClasses:d,headless:h,transformedStyles:p}){return fi(m$e({theme:e,options:t,unstyled:a||h}),_$e({theme:e,themeName:n,selector:r,props:c,stylesCtx:f}),w$e({options:t,classes:s,selector:r,unstyled:a}),uJ({selector:r,stylesCtx:f,theme:e,classNames:o,props:c}),uJ({selector:r,stylesCtx:f,theme:e,classNames:p,props:c}),g$e({selector:r,stylesCtx:f,options:t,props:c,theme:e}),y$e({rootSelector:l,selector:r,className:u}),v$e({selector:r,classes:s,unstyled:a||h}),d&&!h&&b$e({themeName:n,classNamesPrefix:i,selector:r,withStaticClass:t==null?void 0:t.withStaticClass}),t==null?void 0:t.className)}function x$e({theme:e,themeName:t,props:n,stylesCtx:r,selector:i}){return t.map(o=>{var s;return nR({theme:e,styles:(s=e.components[o])==null?void 0:s.styles,props:n,stylesCtx:r})[i]}).reduce((o,s)=>({...o,...s}),{})}function GF({style:e,theme:t}){return Array.isArray(e)?[...e].reduce((n,r)=>({...n,...GF({style:r,theme:t})}),{}):typeof e=="function"?e(t):e??{}}function T$e(e){return e.reduce((t,n)=>(n&&Object.keys(n).forEach(r=>{t[r]={...t[r],...Dm(n[r])}}),t),{})}function S$e({vars:e,varsResolver:t,theme:n,props:r,stylesCtx:i,selector:o,themeName:s,headless:a}){var u;return(u=T$e([a?{}:t==null?void 0:t(n,r,i),...s.map(l=>{var c,f,d;return(d=(f=(c=n.components)==null?void 0:c[l])==null?void 0:f.vars)==null?void 0:d.call(f,n,r,i)}),e==null?void 0:e(n,r,i)]))==null?void 0:u[o]}function C$e({theme:e,themeName:t,selector:n,options:r,props:i,stylesCtx:o,rootSelector:s,styles:a,style:u,vars:l,varsResolver:c,headless:f,withStylesTransform:d}){return{...!d&&x$e({theme:e,themeName:t,props:i,stylesCtx:o,selector:n}),...!d&&nR({theme:e,styles:a,props:i,stylesCtx:o})[n],...!d&&nR({theme:e,styles:r==null?void 0:r.styles,props:(r==null?void 0:r.props)||i,stylesCtx:o})[n],...S$e({theme:e,props:i,stylesCtx:o,vars:l,varsResolver:c,selector:n,themeName:t,headless:f}),...s===n?GF({style:u,theme:e}):null,...GF({style:r==null?void 0:r.style,theme:e})}}function A$e({props:e,stylesCtx:t,themeName:n}){var s;const r=Oi(),i=(s=qOe())==null?void 0:s();return{getTransformedStyles:a=>i?[...a.map(l=>i(l,{props:e,theme:r,ctx:t})),...n.map(l=>{var c;return i((c=r.components[l])==null?void 0:c.styles,{props:e,theme:r,ctx:t})})].filter(Boolean):[],withStylesTransform:!!i}}function pt({name:e,classes:t,props:n,stylesCtx:r,className:i,style:o,rootSelector:s="root",unstyled:a,classNames:u,styles:l,vars:c,varsResolver:f}){const d=Oi(),h=UOe(),p=zOe(),m=VOe(),g=(Array.isArray(e)?e:[e]).filter(_=>_),{withStylesTransform:y,getTransformedStyles:v}=A$e({props:n,stylesCtx:r,themeName:g});return(_,w)=>({className:E$e({theme:d,options:w,themeName:g,selector:_,classNamesPrefix:h,classNames:u,classes:t,unstyled:a,className:i,rootSelector:s,props:n,stylesCtx:r,withStaticClasses:p,headless:m,transformedStyles:v([w==null?void 0:w.styles,l])}),style:C$e({theme:d,themeName:g,selector:_,options:w,props:n,stylesCtx:r,rootSelector:s,styles:l,style:o,vars:c,varsResolver:f,headless:m,withStylesTransform:y})})}function u_(e,t){return typeof e=="boolean"?e:t.autoContrast}function _e(e,t,n){var s;const r=Oi(),i=(s=r.components[e])==null?void 0:s.defaultProps,o=typeof i=="function"?i(r):i;return{...t,...o,...Dm(n)}}function nL(e){return yr(e).reduce((t,n)=>e[n]!==void 0?`${t}${aOe(n)}:${e[n]};`:t,"").trim()}function k$e({selector:e,styles:t,media:n,container:r}){const i=t?nL(t):"",o=Array.isArray(n)?n.map(a=>`@media${a.query}{${e}{${nL(a.styles)}}}`):[],s=Array.isArray(r)?r.map(a=>`@container ${a.query}{${e}{${nL(a.styles)}}}`):[];return`${i?`${e}{${i}}`:""}${o.join("")}${s.join("")}`.trim()}function vy(e){const t=u7();return b.jsx("style",{"data-mantine-styles":"inline",nonce:t==null?void 0:t(),dangerouslySetInnerHTML:{__html:k$e(e)}})}function by(e){const{m:t,mx:n,my:r,mt:i,mb:o,ml:s,mr:a,me:u,ms:l,p:c,px:f,py:d,pt:h,pb:p,pl:m,pr:g,pe:y,ps:v,bd:_,bg:w,c:E,opacity:S,ff:T,fz:C,fw:A,lts:R,ta:N,lh:O,fs:D,tt:M,td:F,w:L,miw:B,maw:U,h:H,mih:P,mah:z,bgsz:W,bgp:j,bgr:q,bga:G,pos:te,top:pe,left:be,bottom:le,right:me,inset:Se,display:ge,flex:tt,hiddenFrom:Ue,visibleFrom:mt,lightHidden:it,darkHidden:Re,sx:$e,...Ge}=e;return{styleProps:Dm({m:t,mx:n,my:r,mt:i,mb:o,ml:s,mr:a,me:u,ms:l,p:c,px:f,py:d,pt:h,pb:p,pl:m,pr:g,pe:y,ps:v,bd:_,bg:w,c:E,opacity:S,ff:T,fz:C,fw:A,lts:R,ta:N,lh:O,fs:D,tt:M,td:F,w:L,miw:B,maw:U,h:H,mih:P,mah:z,bgsz:W,bgp:j,bgr:q,bga:G,pos:te,top:pe,left:be,bottom:le,right:me,inset:Se,display:ge,flex:tt,hiddenFrom:Ue,visibleFrom:mt,lightHidden:it,darkHidden:Re,sx:$e}),rest:Ge}}const I$e={m:{type:"spacing",property:"margin"},mt:{type:"spacing",property:"marginTop"},mb:{type:"spacing",property:"marginBottom"},ml:{type:"spacing",property:"marginLeft"},mr:{type:"spacing",property:"marginRight"},ms:{type:"spacing",property:"marginInlineStart"},me:{type:"spacing",property:"marginInlineEnd"},mx:{type:"spacing",property:"marginInline"},my:{type:"spacing",property:"marginBlock"},p:{type:"spacing",property:"padding"},pt:{type:"spacing",property:"paddingTop"},pb:{type:"spacing",property:"paddingBottom"},pl:{type:"spacing",property:"paddingLeft"},pr:{type:"spacing",property:"paddingRight"},ps:{type:"spacing",property:"paddingInlineStart"},pe:{type:"spacing",property:"paddingInlineEnd"},px:{type:"spacing",property:"paddingInline"},py:{type:"spacing",property:"paddingBlock"},bd:{type:"border",property:"border"},bg:{type:"color",property:"background"},c:{type:"textColor",property:"color"},opacity:{type:"identity",property:"opacity"},ff:{type:"fontFamily",property:"fontFamily"},fz:{type:"fontSize",property:"fontSize"},fw:{type:"identity",property:"fontWeight"},lts:{type:"size",property:"letterSpacing"},ta:{type:"identity",property:"textAlign"},lh:{type:"lineHeight",property:"lineHeight"},fs:{type:"identity",property:"fontStyle"},tt:{type:"identity",property:"textTransform"},td:{type:"identity",property:"textDecoration"},w:{type:"spacing",property:"width"},miw:{type:"spacing",property:"minWidth"},maw:{type:"spacing",property:"maxWidth"},h:{type:"spacing",property:"height"},mih:{type:"spacing",property:"minHeight"},mah:{type:"spacing",property:"maxHeight"},bgsz:{type:"size",property:"backgroundSize"},bgp:{type:"identity",property:"backgroundPosition"},bgr:{type:"identity",property:"backgroundRepeat"},bga:{type:"identity",property:"backgroundAttachment"},pos:{type:"identity",property:"position"},top:{type:"identity",property:"top"},left:{type:"size",property:"left"},bottom:{type:"size",property:"bottom"},right:{type:"size",property:"right"},inset:{type:"size",property:"inset"},display:{type:"identity",property:"display"},flex:{type:"identity",property:"flex"}};function d7(e,t){const n=Nf({color:e,theme:t});return n.color==="dimmed"?"var(--mantine-color-dimmed)":n.color==="bright"?"var(--mantine-color-bright)":n.variable?`var(${n.variable})`:n.color}function R$e(e,t){const n=Nf({color:e,theme:t});return n.isThemeColor&&n.shade===void 0?`var(--mantine-color-${n.color}-text)`:d7(e,t)}function N$e(e,t){if(typeof e=="number")return we(e);if(typeof e=="string"){const[n,r,...i]=e.split(" ").filter(s=>s.trim()!=="");let o=`${we(n)}`;return r&&(o+=` ${r}`),s$e.length>0&&(o+=` ${d7(i.join(" "),t)}`),o.trim()}return e}const lJ={text:"var(--mantine-font-family)",mono:"var(--mantine-font-family-monospace)",monospace:"var(--mantine-font-family-monospace)",heading:"var(--mantine-font-family-headings)",headings:"var(--mantine-font-family-headings)"};function P$e(e){return typeof e=="string"&&e in lJ?lJ[e]:e}const D$e=["h1","h2","h3","h4","h5","h6"];function O$e(e,t){return typeof e=="string"&&e in t.fontSizes?`var(--mantine-font-size-${e})`:typeof e=="string"&&D$e.includes(e)?`var(--mantine-${e}-font-size)`:typeof e=="number"||typeof e=="string"?we(e):e}function $$e(e){return e}const M$e=["h1","h2","h3","h4","h5","h6"];function L$e(e,t){return typeof e=="string"&&e in t.lineHeights?`var(--mantine-line-height-${e})`:typeof e=="string"&&M$e.includes(e)?`var(--mantine-${e}-line-height)`:e}function F$e(e){return typeof e=="number"?we(e):e}function j$e(e,t){if(typeof e=="number")return we(e);if(typeof e=="string"){const n=e.replace("-","");if(!(n in t.spacing))return we(e);const r=`--mantine-spacing-${n}`;return e.startsWith("-")?`calc(var(${r}) * -1)`:`var(${r})`}return e}const rL={color:d7,textColor:R$e,fontSize:O$e,spacing:j$e,identity:$$e,size:F$e,lineHeight:L$e,fontFamily:P$e,border:N$e};function cJ(e){return e.replace("(min-width: ","").replace("em)","")}function B$e({media:e,...t}){const r=Object.keys(e).sort((i,o)=>Number(cJ(i))-Number(cJ(o))).map(i=>({query:i,styles:e[i]}));return{...t,media:r}}function U$e(e){if(typeof e!="object"||e===null)return!1;const t=Object.keys(e);return!(t.length===1&&t[0]==="base")}function z$e(e){return typeof e=="object"&&e!==null?"base"in e?e.base:void 0:e}function V$e(e){return typeof e=="object"&&e!==null?yr(e).filter(t=>t!=="base"):[]}function H$e(e,t){return typeof e=="object"&&e!==null&&t in e?e[t]:e}function Zfe({styleProps:e,data:t,theme:n}){return B$e(yr(e).reduce((r,i)=>{if(i==="hiddenFrom"||i==="visibleFrom"||i==="sx")return r;const o=t[i],s=Array.isArray(o.property)?o.property:[o.property],a=z$e(e[i]);if(!U$e(e[i]))return s.forEach(l=>{r.inlineStyles[l]=rL[o.type](a,n)}),r;r.hasResponsiveStyles=!0;const u=V$e(e[i]);return s.forEach(l=>{a&&(r.styles[l]=rL[o.type](a,n)),u.forEach(c=>{const f=`(min-width: ${n.breakpoints[c]})`;r.media[f]={...r.media[f],[l]:rL[o.type](H$e(e[i],c),n)}})}),r},{hasResponsiveStyles:!1,styles:{},inlineStyles:{},media:{}}))}function VS(){return`__m__-${k.useId().replace(/:/g,"")}`}function h7(e,t){return Array.isArray(e)?[...e].reduce((n,r)=>({...n,...h7(r,t)}),{}):typeof e=="function"?e(t):e??{}}function ede(e){return e.startsWith("data-")?e:`data-${e}`}function q$e(e){return Object.keys(e).reduce((t,n)=>{const r=e[n];return r===void 0||r===""||r===!1||r===null||(t[ede(n)]=e[n]),t},{})}function tde(e){return e?typeof e=="string"?{[ede(e)]:!0}:Array.isArray(e)?[...e].reduce((t,n)=>({...t,...tde(n)}),{}):q$e(e):null}function YF(e,t){return Array.isArray(e)?[...e].reduce((n,r)=>({...n,...YF(r,t)}),{}):typeof e=="function"?e(t):e??{}}function W$e({theme:e,style:t,vars:n,styleProps:r}){const i=YF(t,e),o=YF(n,e);return{...i,...o,...r}}const nde=k.forwardRef(({component:e,style:t,__vars:n,className:r,variant:i,mod:o,size:s,hiddenFrom:a,visibleFrom:u,lightHidden:l,darkHidden:c,renderRoot:f,__size:d,...h},p)=>{var C;const m=Oi(),g=e||"div",{styleProps:y,rest:v}=by(h),_=HOe(),w=(C=_==null?void 0:_())==null?void 0:C(y.sx),E=VS(),S=Zfe({styleProps:y,theme:m,data:I$e}),T={ref:p,style:W$e({theme:m,style:t,vars:n,styleProps:S.inlineStyles}),className:fi(r,w,{[E]:S.hasResponsiveStyles,"mantine-light-hidden":l,"mantine-dark-hidden":c,[`mantine-hidden-from-${a}`]:a,[`mantine-visible-from-${u}`]:u}),"data-variant":i,"data-size":Ffe(s)?void 0:s||void 0,size:d,...tde(o),...v};return b.jsxs(b.Fragment,{children:[S.hasResponsiveStyles&&b.jsx(vy,{selector:`.${E}`,styles:S.styles,media:S.media}),typeof f=="function"?f(T):b.jsx(g,{...T})]})});nde.displayName="@mantine/core/Box";const he=nde;function rde(e){return e}function Oe(e){const t=k.forwardRef(e);return t.extend=rde,t}function Yi(e){const t=k.forwardRef(e);return t.extend=rde,t}const G$e=k.createContext({dir:"ltr",toggleDirection:()=>{},setDirection:()=>{}});function Pf(){return k.useContext(G$e)}function Y$e(e){if(!e||typeof e=="string")return 0;const t=e/36;return Math.round((4+15*t**.25+t/5)*10)}function iL(e){return e!=null&&e.current?e.current.scrollHeight:"auto"}const Aw=typeof window<"u"&&window.requestAnimationFrame;function K$e({transitionDuration:e,transitionTimingFunction:t="ease",onTransitionEnd:n=()=>{},opened:r}){const i=k.useRef(null),o=0,s={display:"none",height:0,overflow:"hidden"},[a,u]=k.useState(r?{}:s),l=p=>{US.flushSync(()=>u(p))},c=p=>{l(m=>({...m,...p}))};function f(p){const m=e||Y$e(p);return{transition:`height ${m}ms ${t}, opacity ${m}ms ${t}`}}vf(()=>{typeof Aw=="function"&&Aw(r?()=>{c({willChange:"height",display:"block",overflow:"hidden"}),Aw(()=>{const p=iL(i);c({...f(p),height:p})})}:()=>{const p=iL(i);c({...f(p),willChange:"height",height:p}),Aw(()=>c({height:o,overflow:"hidden"}))})},[r]);const d=p=>{if(!(p.target!==i.current||p.propertyName!=="height"))if(r){const m=iL(i);m===a.height?l({}):c({height:m}),n()}else a.height===o&&(l(s),n())};function h({style:p={},refKey:m="ref",...g}={}){const y=g[m];return{"aria-hidden":!r,...g,[m]:qfe(i,y),onTransitionEnd:d,style:{boxSizing:"border-box",...p,...a}}}return h}const X$e={transitionDuration:200,transitionTimingFunction:"ease",animateOpacity:!0},fD=Oe((e,t)=>{const{children:n,in:r,transitionDuration:i,transitionTimingFunction:o,style:s,onTransitionEnd:a,animateOpacity:u,...l}=_e("Collapse",X$e,e),c=Oi(),f=uD(),h=(c.respectReducedMotion?f:!1)?0:i,p=K$e({opened:r,transitionDuration:h,transitionTimingFunction:o,onTransitionEnd:a});return h===0?r?b.jsx(he,{...l,children:n}):null:b.jsx(he,{...p({style:{opacity:r||!u?1:0,transition:u?`opacity ${h}ms ${o}`:"none",...h7(s,c)},ref:t,...l}),children:n})});fD.displayName="@mantine/core/Collapse";const[Q$e,pl]=go("ScrollArea.Root component was not found in tree");function rb(e,t){const n=Lg(t);gy(()=>{let r=0;if(e){const i=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return i.observe(e),()=>{window.cancelAnimationFrame(r),i.unobserve(e)}}},[e,n])}const J$e=k.forwardRef((e,t)=>{const{style:n,...r}=e,i=pl(),[o,s]=k.useState(0),[a,u]=k.useState(0),l=!!(o&&a);return rb(i.scrollbarX,()=>{var f;const c=((f=i.scrollbarX)==null?void 0:f.offsetHeight)||0;i.onCornerHeightChange(c),u(c)}),rb(i.scrollbarY,()=>{var f;const c=((f=i.scrollbarY)==null?void 0:f.offsetWidth)||0;i.onCornerWidthChange(c),s(c)}),l?b.jsx("div",{...r,ref:t,style:{...n,width:o,height:a}}):null}),Z$e=k.forwardRef((e,t)=>{const n=pl(),r=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&r?b.jsx(J$e,{...e,ref:t}):null}),e3e={scrollHideDelay:1e3,type:"hover"},ide=k.forwardRef((e,t)=>{const n=_e("ScrollAreaRoot",e3e,e),{type:r,scrollHideDelay:i,scrollbars:o,...s}=n,[a,u]=k.useState(null),[l,c]=k.useState(null),[f,d]=k.useState(null),[h,p]=k.useState(null),[m,g]=k.useState(null),[y,v]=k.useState(0),[_,w]=k.useState(0),[E,S]=k.useState(!1),[T,C]=k.useState(!1),A=Gi(t,R=>u(R));return b.jsx(Q$e,{value:{type:r,scrollHideDelay:i,scrollArea:a,viewport:l,onViewportChange:c,content:f,onContentChange:d,scrollbarX:h,onScrollbarXChange:p,scrollbarXEnabled:E,onScrollbarXEnabledChange:S,scrollbarY:m,onScrollbarYChange:g,scrollbarYEnabled:T,onScrollbarYEnabledChange:C,onCornerWidthChange:v,onCornerHeightChange:w},children:b.jsx(he,{...s,ref:A,__vars:{"--sa-corner-width":o!=="xy"?"0px":`${y}px`,"--sa-corner-height":o!=="xy"?"0px":`${_}px`}})})});ide.displayName="@mantine/core/ScrollAreaRoot";function ode(e,t){const n=e/t;return Number.isNaN(n)?0:n}function dD(e){const t=ode(e.viewport,e.content),n=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,r=(e.scrollbar.size-n)*t;return Math.max(r,18)}function sde(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}function t3e(e,[t,n]){return Math.min(n,Math.max(t,e))}function fJ(e,t,n="ltr"){const r=dD(t),i=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,o=t.scrollbar.size-i,s=t.content-t.viewport,a=o-r,u=n==="ltr"?[0,s]:[s*-1,0],l=t3e(e,u);return sde([0,s],[0,a])(l)}function n3e(e,t,n,r="ltr"){const i=dD(n),o=i/2,s=t||o,a=i-s,u=n.scrollbar.paddingStart+s,l=n.scrollbar.size-n.scrollbar.paddingEnd-a,c=n.content-n.viewport,f=r==="ltr"?[0,c]:[c*-1,0];return sde([u,l],f)(e)}function ade(e,t){return e>0&&e<t}function rR(e){return e?parseInt(e,10):0}function f0(e,t,{checkForDefaultPrevented:n=!0}={}){return r=>{e==null||e(r),(n===!1||!r.defaultPrevented)&&(t==null||t(r))}}const[r3e,ude]=go("ScrollAreaScrollbar was not found in tree"),lde=k.forwardRef((e,t)=>{const{sizes:n,hasThumb:r,onThumbChange:i,onThumbPointerUp:o,onThumbPointerDown:s,onThumbPositionChange:a,onDragScroll:u,onWheelScroll:l,onResize:c,...f}=e,d=pl(),[h,p]=k.useState(null),m=Gi(t,C=>p(C)),g=k.useRef(null),y=k.useRef(""),{viewport:v}=d,_=n.content-n.viewport,w=Lg(l),E=Lg(a),S=aD(c,10),T=C=>{if(g.current){const A=C.clientX-g.current.left,R=C.clientY-g.current.top;u({x:A,y:R})}};return k.useEffect(()=>{const C=A=>{const R=A.target;(h==null?void 0:h.contains(R))&&w(A,_)};return document.addEventListener("wheel",C,{passive:!1}),()=>document.removeEventListener("wheel",C,{passive:!1})},[v,h,_,w]),k.useEffect(E,[n,E]),rb(h,S),rb(d.content,S),b.jsx(r3e,{value:{scrollbar:h,hasThumb:r,onThumbChange:Lg(i),onThumbPointerUp:Lg(o),onThumbPositionChange:E,onThumbPointerDown:Lg(s)},children:b.jsx("div",{...f,ref:m,style:{position:"absolute",...f.style},onPointerDown:f0(e.onPointerDown,C=>{C.button===0&&(C.target.setPointerCapture(C.pointerId),g.current=h.getBoundingClientRect(),y.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",T(C))}),onPointerMove:f0(e.onPointerMove,T),onPointerUp:f0(e.onPointerUp,C=>{const A=C.target;A.hasPointerCapture(C.pointerId)&&A.releasePointerCapture(C.pointerId),document.body.style.webkitUserSelect=y.current,g.current=null})})})}),i3e=k.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,style:i,...o}=e,s=pl(),[a,u]=k.useState(),l=k.useRef(null),c=Gi(t,l,s.onScrollbarXChange);return k.useEffect(()=>{l.current&&u(getComputedStyle(l.current))},[l]),b.jsx(lde,{"data-orientation":"horizontal",...o,ref:c,sizes:n,style:{...i,"--sa-thumb-width":`${dD(n)}px`},onThumbPointerDown:f=>e.onThumbPointerDown(f.x),onDragScroll:f=>e.onDragScroll(f.x),onWheelScroll:(f,d)=>{if(s.viewport){const h=s.viewport.scrollLeft+f.deltaX;e.onWheelScroll(h),ade(h,d)&&f.preventDefault()}},onResize:()=>{l.current&&s.viewport&&a&&r({content:s.viewport.scrollWidth,viewport:s.viewport.offsetWidth,scrollbar:{size:l.current.clientWidth,paddingStart:rR(a.paddingLeft),paddingEnd:rR(a.paddingRight)}})}})}),o3e=k.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,style:i,...o}=e,s=pl(),[a,u]=k.useState(),l=k.useRef(null),c=Gi(t,l,s.onScrollbarYChange);return k.useEffect(()=>{l.current&&u(window.getComputedStyle(l.current))},[]),b.jsx(lde,{...o,"data-orientation":"vertical",ref:c,sizes:n,style:{"--sa-thumb-height":`${dD(n)}px`,...i},onThumbPointerDown:f=>e.onThumbPointerDown(f.y),onDragScroll:f=>e.onDragScroll(f.y),onWheelScroll:(f,d)=>{if(s.viewport){const h=s.viewport.scrollTop+f.deltaY;e.onWheelScroll(h),ade(h,d)&&f.preventDefault()}},onResize:()=>{l.current&&s.viewport&&a&&r({content:s.viewport.scrollHeight,viewport:s.viewport.offsetHeight,scrollbar:{size:l.current.clientHeight,paddingStart:rR(a.paddingTop),paddingEnd:rR(a.paddingBottom)}})}})}),p7=k.forwardRef((e,t)=>{const{orientation:n="vertical",...r}=e,{dir:i}=Pf(),o=pl(),s=k.useRef(null),a=k.useRef(0),[u,l]=k.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),c=ode(u.viewport,u.content),f={...r,sizes:u,onSizesChange:l,hasThumb:c>0&&c<1,onThumbChange:h=>{s.current=h},onThumbPointerUp:()=>{a.current=0},onThumbPointerDown:h=>{a.current=h}},d=(h,p)=>n3e(h,a.current,u,p);return n==="horizontal"?b.jsx(i3e,{...f,ref:t,onThumbPositionChange:()=>{if(o.viewport&&s.current){const h=o.viewport.scrollLeft,p=fJ(h,u,i);s.current.style.transform=`translate3d(${p}px, 0, 0)`}},onWheelScroll:h=>{o.viewport&&(o.viewport.scrollLeft=h)},onDragScroll:h=>{o.viewport&&(o.viewport.scrollLeft=d(h,i))}}):n==="vertical"?b.jsx(o3e,{...f,ref:t,onThumbPositionChange:()=>{if(o.viewport&&s.current){const h=o.viewport.scrollTop,p=fJ(h,u);u.scrollbar.size===0?s.current.style.opacity="0":s.current.style.opacity="1",s.current.style.transform=`translate3d(0, ${p}px, 0)`}},onWheelScroll:h=>{o.viewport&&(o.viewport.scrollTop=h)},onDragScroll:h=>{o.viewport&&(o.viewport.scrollTop=d(h))}}):null}),cde=k.forwardRef((e,t)=>{const n=pl(),{forceMount:r,...i}=e,[o,s]=k.useState(!1),a=e.orientation==="horizontal",u=aD(()=>{if(n.viewport){const l=n.viewport.offsetWidth<n.viewport.scrollWidth,c=n.viewport.offsetHeight<n.viewport.scrollHeight;s(a?l:c)}},10);return rb(n.viewport,u),rb(n.content,u),r||o?b.jsx(p7,{"data-state":o?"visible":"hidden",...i,ref:t}):null}),s3e=k.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=pl(),[o,s]=k.useState(!1);return k.useEffect(()=>{const{scrollArea:a}=i;let u=0;if(a){const l=()=>{window.clearTimeout(u),s(!0)},c=()=>{u=window.setTimeout(()=>s(!1),i.scrollHideDelay)};return a.addEventListener("pointerenter",l),a.addEventListener("pointerleave",c),()=>{window.clearTimeout(u),a.removeEventListener("pointerenter",l),a.removeEventListener("pointerleave",c)}}},[i.scrollArea,i.scrollHideDelay]),n||o?b.jsx(cde,{"data-state":o?"visible":"hidden",...r,ref:t}):null}),a3e=k.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=pl(),o=e.orientation==="horizontal",[s,a]=k.useState("hidden"),u=aD(()=>a("idle"),100);return k.useEffect(()=>{if(s==="idle"){const l=window.setTimeout(()=>a("hidden"),i.scrollHideDelay);return()=>window.clearTimeout(l)}},[s,i.scrollHideDelay]),k.useEffect(()=>{const{viewport:l}=i,c=o?"scrollLeft":"scrollTop";if(l){let f=l[c];const d=()=>{const h=l[c];f!==h&&(a("scrolling"),u()),f=h};return l.addEventListener("scroll",d),()=>l.removeEventListener("scroll",d)}},[i.viewport,o,u]),n||s!=="hidden"?b.jsx(p7,{"data-state":s==="hidden"?"hidden":"visible",...r,ref:t,onPointerEnter:f0(e.onPointerEnter,()=>a("interacting")),onPointerLeave:f0(e.onPointerLeave,()=>a("idle"))}):null}),dJ=k.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=pl(),{onScrollbarXEnabledChange:o,onScrollbarYEnabledChange:s}=i,a=e.orientation==="horizontal";return k.useEffect(()=>(a?o(!0):s(!0),()=>{a?o(!1):s(!1)}),[a,o,s]),i.type==="hover"?b.jsx(s3e,{...r,ref:t,forceMount:n}):i.type==="scroll"?b.jsx(a3e,{...r,ref:t,forceMount:n}):i.type==="auto"?b.jsx(cde,{...r,ref:t,forceMount:n}):i.type==="always"?b.jsx(p7,{...r,ref:t}):null});function u3e(e,t=()=>{}){let n={left:e.scrollLeft,top:e.scrollTop},r=0;return function i(){const o={left:e.scrollLeft,top:e.scrollTop},s=n.left!==o.left,a=n.top!==o.top;(s||a)&&t(),n=o,r=window.requestAnimationFrame(i)}(),()=>window.cancelAnimationFrame(r)}const l3e=k.forwardRef((e,t)=>{const{style:n,...r}=e,i=pl(),o=ude(),{onThumbPositionChange:s}=o,a=Gi(t,c=>o.onThumbChange(c)),u=k.useRef(),l=aD(()=>{u.current&&(u.current(),u.current=void 0)},100);return k.useEffect(()=>{const{viewport:c}=i;if(c){const f=()=>{if(l(),!u.current){const d=u3e(c,s);u.current=d,s()}};return s(),c.addEventListener("scroll",f),()=>c.removeEventListener("scroll",f)}},[i.viewport,l,s]),b.jsx("div",{"data-state":o.hasThumb?"visible":"hidden",...r,ref:a,style:{width:"var(--sa-thumb-width)",height:"var(--sa-thumb-height)",...n},onPointerDownCapture:f0(e.onPointerDownCapture,c=>{const d=c.target.getBoundingClientRect(),h=c.clientX-d.left,p=c.clientY-d.top;o.onThumbPointerDown({x:h,y:p})}),onPointerUp:f0(e.onPointerUp,o.onThumbPointerUp)})}),hJ=k.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=ude();return n||i.hasThumb?b.jsx(l3e,{ref:t,...r}):null}),fde=k.forwardRef(({children:e,style:t,...n},r)=>{const i=pl(),o=Gi(r,i.onViewportChange);return b.jsx(he,{...n,ref:o,style:{overflowX:i.scrollbarXEnabled?"scroll":"hidden",overflowY:i.scrollbarYEnabled?"scroll":"hidden",...t},children:b.jsx("div",{style:{minWidth:"100%",display:"table"},ref:i.onContentChange,children:e})})});fde.displayName="@mantine/core/ScrollAreaViewport";var m7={root:"m_d57069b5",viewport:"m_c0783ff9",viewportInner:"m_f8f631dd",scrollbar:"m_c44ba933",thumb:"m_d8b5e363",corner:"m_21657268"};const dde={scrollHideDelay:1e3,type:"hover",scrollbars:"xy"},c3e=(e,{scrollbarSize:t})=>({root:{"--scrollarea-scrollbar-size":we(t)}}),Qd=Oe((e,t)=>{const n=_e("ScrollArea",dde,e),{classNames:r,className:i,style:o,styles:s,unstyled:a,scrollbarSize:u,vars:l,type:c,scrollHideDelay:f,viewportProps:d,viewportRef:h,onScrollPositionChange:p,children:m,offsetScrollbars:g,scrollbars:y,...v}=n,[_,w]=k.useState(!1),E=pt({name:"ScrollArea",props:n,classes:m7,className:i,style:o,classNames:r,styles:s,unstyled:a,vars:l,varsResolver:c3e});return b.jsxs(ide,{type:c==="never"?"always":c,scrollHideDelay:f,ref:t,scrollbars:y,...E("root"),...v,children:[b.jsx(fde,{...d,...E("viewport",{style:d==null?void 0:d.style}),ref:h,"data-offset-scrollbars":g===!0?"xy":g||void 0,"data-scrollbars":y||void 0,onScroll:S=>{var T;(T=d==null?void 0:d.onScroll)==null||T.call(d,S),p==null||p({x:S.currentTarget.scrollLeft,y:S.currentTarget.scrollTop})},children:m}),(y==="xy"||y==="x")&&b.jsx(dJ,{...E("scrollbar"),orientation:"horizontal","data-hidden":c==="never"||void 0,forceMount:!0,onMouseEnter:()=>w(!0),onMouseLeave:()=>w(!1),children:b.jsx(hJ,{...E("thumb")})}),(y==="xy"||y==="y")&&b.jsx(dJ,{...E("scrollbar"),orientation:"vertical","data-hidden":c==="never"||void 0,forceMount:!0,onMouseEnter:()=>w(!0),onMouseLeave:()=>w(!1),children:b.jsx(hJ,{...E("thumb")})}),b.jsx(Z$e,{...E("corner"),"data-hovered":_||void 0,"data-hidden":c==="never"||void 0})]})});Qd.displayName="@mantine/core/ScrollArea";const g7=Oe((e,t)=>{const{children:n,classNames:r,styles:i,scrollbarSize:o,scrollHideDelay:s,type:a,dir:u,offsetScrollbars:l,viewportRef:c,onScrollPositionChange:f,unstyled:d,variant:h,viewportProps:p,scrollbars:m,style:g,vars:y,...v}=_e("ScrollAreaAutosize",dde,e);return b.jsx(he,{...v,ref:t,style:[{display:"flex",overflow:"auto"},g],children:b.jsx(he,{style:{display:"flex",flexDirection:"column",flex:1},children:b.jsx(Qd,{classNames:r,styles:i,scrollHideDelay:s,scrollbarSize:o,type:a,dir:u,offsetScrollbars:l,viewportRef:c,onScrollPositionChange:f,unstyled:d,variant:h,viewportProps:p,vars:y,scrollbars:m,children:n})})})});Qd.classes=m7;g7.displayName="@mantine/core/ScrollAreaAutosize";g7.classes=m7;Qd.Autosize=g7;var hde={root:"m_87cf2631"};const f3e={__staticSelector:"UnstyledButton"},Pi=Yi((e,t)=>{const n=_e("UnstyledButton",f3e,e),{className:r,component:i="button",__staticSelector:o,unstyled:s,classNames:a,styles:u,style:l,...c}=n,f=pt({name:o,props:n,classes:hde,className:r,style:l,classNames:a,styles:u,unstyled:s});return b.jsx(he,{...f("root",{focusable:!0}),component:i,ref:t,type:i==="button"?"button":void 0,...c})});Pi.classes=hde;Pi.displayName="@mantine/core/UnstyledButton";var pde={root:"m_515a97f8"};const d3e={},y7=Oe((e,t)=>{const n=_e("VisuallyHidden",d3e,e),{classNames:r,className:i,style:o,styles:s,unstyled:a,vars:u,...l}=n,c=pt({name:"VisuallyHidden",classes:pde,props:n,className:i,style:o,classNames:r,styles:s,unstyled:a});return b.jsx(he,{component:"span",ref:t,...c("root"),...l})});y7.classes=pde;y7.displayName="@mantine/core/VisuallyHidden";var mde={root:"m_1b7284a3"};const h3e={},p3e=(e,{radius:t,shadow:n})=>({root:{"--paper-radius":t===void 0?void 0:vr(t),"--paper-shadow":i7(n)}}),_y=Yi((e,t)=>{const n=_e("Paper",h3e,e),{classNames:r,className:i,style:o,styles:s,unstyled:a,withBorder:u,vars:l,radius:c,shadow:f,variant:d,mod:h,...p}=n,m=pt({name:"Paper",props:n,classes:mde,className:i,style:o,classNames:r,styles:s,unstyled:a,vars:l,varsResolver:p3e});return b.jsx(he,{ref:t,mod:[{"data-with-border":u},h],...m("root"),variant:d,...p})});_y.classes=mde;_y.displayName="@mantine/core/Paper";function l_(e){return gde(e)?(e.nodeName||"").toLowerCase():"#document"}function Ia(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function yh(e){var t;return(t=(gde(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function gde(e){return e instanceof Node||e instanceof Ia(e).Node}function Ur(e){return e instanceof Element||e instanceof Ia(e).Element}function mu(e){return e instanceof HTMLElement||e instanceof Ia(e).HTMLElement}function KF(e){return typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof Ia(e).ShadowRoot}function HS(e){const{overflow:t,overflowX:n,overflowY:r,display:i}=ol(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!["inline","contents"].includes(i)}function m3e(e){return["table","td","th"].includes(l_(e))}function v7(e){const t=b7(),n=ol(e);return n.transform!=="none"||n.perspective!=="none"||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||["transform","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function g3e(e){let t=Jd(e);for(;mu(t)&&!em(t);){if(v7(t))return t;t=Jd(t)}return null}function b7(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function em(e){return["html","body","#document"].includes(l_(e))}function ol(e){return Ia(e).getComputedStyle(e)}function hD(e){return Ur(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function Jd(e){if(l_(e)==="html")return e;const t=e.assignedSlot||e.parentNode||KF(e)&&e.host||yh(e);return KF(t)?t.host:t}function yde(e){const t=Jd(e);return em(t)?e.ownerDocument?e.ownerDocument.body:e.body:mu(t)&&HS(t)?t:yde(t)}function $d(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const i=yde(e),o=i===((r=e.ownerDocument)==null?void 0:r.body),s=Ia(i);return o?t.concat(s,s.visualViewport||[],HS(i)?i:[],s.frameElement&&n?$d(s.frameElement):[]):t.concat(i,$d(i,[],n))}function pJ(e){let t=e.activeElement;for(;((n=t)==null||(n=n.shadowRoot)==null?void 0:n.activeElement)!=null;){var n;t=t.shadowRoot.activeElement}return t}function ET(e,t){if(!e||!t)return!1;const n=t.getRootNode==null?void 0:t.getRootNode();if(e.contains(t))return!0;if(n&&KF(n)){let r=t;for(;r;){if(e===r)return!0;r=r.parentNode||r.host}}return!1}function vde(){const e=navigator.userAgentData;return e!=null&&e.platform?e.platform:navigator.platform}function bde(){const e=navigator.userAgentData;return e&&Array.isArray(e.brands)?e.brands.map(t=>{let{brand:n,version:r}=t;return n+"/"+r}).join(" "):navigator.userAgent}function y3e(e){return _3e()?!1:!mJ()&&e.width===0&&e.height===0||mJ()&&e.width===1&&e.height===1&&e.pressure===0&&e.detail===0&&e.pointerType==="mouse"||e.width<1&&e.height<1&&e.pressure===0&&e.detail===0&&e.pointerType==="touch"}function v3e(){return/apple/i.test(navigator.vendor)}function mJ(){const e=/android/i;return e.test(vde())||e.test(bde())}function b3e(){return vde().toLowerCase().startsWith("mac")&&!navigator.maxTouchPoints}function _3e(){return bde().includes("jsdom/")}function XF(e,t){const n=["mouse","pen"];return n.push("",void 0),n.includes(e)}function w3e(e){return"nativeEvent"in e}function E3e(e){return e.matches("html,body")}function Zg(e){return(e==null?void 0:e.ownerDocument)||document}function oL(e,t){if(t==null)return!1;if("composedPath"in e)return e.composedPath().includes(t);const n=e;return n.target!=null&&t.contains(n.target)}function Mv(e){return"composedPath"in e?e.composedPath()[0]:e.target}const x3e="input:not([type='hidden']):not([disabled]),[contenteditable]:not([contenteditable='false']),textarea:not([disabled])";function T3e(e){return mu(e)&&e.matches(x3e)}const nu=Math.min,us=Math.max,iR=Math.round,e2=Math.floor,tm=e=>({x:e,y:e}),S3e={left:"right",right:"left",bottom:"top",top:"bottom"},C3e={start:"end",end:"start"};function QF(e,t,n){return us(e,nu(t,n))}function Zd(e,t){return typeof e=="function"?e(t):e}function ac(e){return e.split("-")[0]}function c_(e){return e.split("-")[1]}function _7(e){return e==="x"?"y":"x"}function w7(e){return e==="y"?"height":"width"}function wy(e){return["top","bottom"].includes(ac(e))?"y":"x"}function E7(e){return _7(wy(e))}function A3e(e,t,n){n===void 0&&(n=!1);const r=c_(e),i=E7(e),o=w7(i);let s=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[o]>t.floating[o]&&(s=oR(s)),[s,oR(s)]}function k3e(e){const t=oR(e);return[JF(e),t,JF(t)]}function JF(e){return e.replace(/start|end/g,t=>C3e[t])}function I3e(e,t,n){const r=["left","right"],i=["right","left"],o=["top","bottom"],s=["bottom","top"];switch(e){case"top":case"bottom":return n?t?i:r:t?r:i;case"left":case"right":return t?o:s;default:return[]}}function R3e(e,t,n,r){const i=c_(e);let o=I3e(ac(e),n==="start",r);return i&&(o=o.map(s=>s+"-"+i),t&&(o=o.concat(o.map(JF)))),o}function oR(e){return e.replace(/left|right|bottom|top/g,t=>S3e[t])}function N3e(e){return{top:0,right:0,bottom:0,left:0,...e}}function x7(e){return typeof e!="number"?N3e(e):{top:e,right:e,bottom:e,left:e}}function ib(e){const{x:t,y:n,width:r,height:i}=e;return{width:r,height:i,top:n,left:t,right:t+r,bottom:n+i,x:t,y:n}}function gJ(e,t,n){let{reference:r,floating:i}=e;const o=wy(t),s=E7(t),a=w7(s),u=ac(t),l=o==="y",c=r.x+r.width/2-i.width/2,f=r.y+r.height/2-i.height/2,d=r[a]/2-i[a]/2;let h;switch(u){case"top":h={x:c,y:r.y-i.height};break;case"bottom":h={x:c,y:r.y+r.height};break;case"right":h={x:r.x+r.width,y:f};break;case"left":h={x:r.x-i.width,y:f};break;default:h={x:r.x,y:r.y}}switch(c_(t)){case"start":h[s]-=d*(n&&l?-1:1);break;case"end":h[s]+=d*(n&&l?-1:1);break}return h}const P3e=async(e,t,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:o=[],platform:s}=n,a=o.filter(Boolean),u=await(s.isRTL==null?void 0:s.isRTL(t));let l=await s.getElementRects({reference:e,floating:t,strategy:i}),{x:c,y:f}=gJ(l,r,u),d=r,h={},p=0;for(let m=0;m<a.length;m++){const{name:g,fn:y}=a[m],{x:v,y:_,data:w,reset:E}=await y({x:c,y:f,initialPlacement:r,placement:d,strategy:i,middlewareData:h,rects:l,platform:s,elements:{reference:e,floating:t}});c=v??c,f=_??f,h={...h,[g]:{...h[g],...w}},E&&p<=50&&(p++,typeof E=="object"&&(E.placement&&(d=E.placement),E.rects&&(l=E.rects===!0?await s.getElementRects({reference:e,floating:t,strategy:i}):E.rects),{x:c,y:f}=gJ(l,d,u)),m=-1)}return{x:c,y:f,placement:d,strategy:i,middlewareData:h}};async function T7(e,t){var n;t===void 0&&(t={});const{x:r,y:i,platform:o,rects:s,elements:a,strategy:u}=e,{boundary:l="clippingAncestors",rootBoundary:c="viewport",elementContext:f="floating",altBoundary:d=!1,padding:h=0}=Zd(t,e),p=x7(h),g=a[d?f==="floating"?"reference":"floating":f],y=ib(await o.getClippingRect({element:(n=await(o.isElement==null?void 0:o.isElement(g)))==null||n?g:g.contextElement||await(o.getDocumentElement==null?void 0:o.getDocumentElement(a.floating)),boundary:l,rootBoundary:c,strategy:u})),v=f==="floating"?{x:r,y:i,width:s.floating.width,height:s.floating.height}:s.reference,_=await(o.getOffsetParent==null?void 0:o.getOffsetParent(a.floating)),w=await(o.isElement==null?void 0:o.isElement(_))?await(o.getScale==null?void 0:o.getScale(_))||{x:1,y:1}:{x:1,y:1},E=ib(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:v,offsetParent:_,strategy:u}):v);return{top:(y.top-E.top+p.top)/w.y,bottom:(E.bottom-y.bottom+p.bottom)/w.y,left:(y.left-E.left+p.left)/w.x,right:(E.right-y.right+p.right)/w.x}}const D3e=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:i,rects:o,platform:s,elements:a,middlewareData:u}=t,{element:l,padding:c=0}=Zd(e,t)||{};if(l==null)return{};const f=x7(c),d={x:n,y:r},h=E7(i),p=w7(h),m=await s.getDimensions(l),g=h==="y",y=g?"top":"left",v=g?"bottom":"right",_=g?"clientHeight":"clientWidth",w=o.reference[p]+o.reference[h]-d[h]-o.floating[p],E=d[h]-o.reference[h],S=await(s.getOffsetParent==null?void 0:s.getOffsetParent(l));let T=S?S[_]:0;(!T||!await(s.isElement==null?void 0:s.isElement(S)))&&(T=a.floating[_]||o.floating[p]);const C=w/2-E/2,A=T/2-m[p]/2-1,R=nu(f[y],A),N=nu(f[v],A),O=R,D=T-m[p]-N,M=T/2-m[p]/2+C,F=QF(O,M,D),L=!u.arrow&&c_(i)!=null&&M!==F&&o.reference[p]/2-(M<O?R:N)-m[p]/2<0,B=L?M<O?M-O:M-D:0;return{[h]:d[h]+B,data:{[h]:F,centerOffset:M-F-B,...L&&{alignmentOffset:B}},reset:L}}}),O3e=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:i,middlewareData:o,rects:s,initialPlacement:a,platform:u,elements:l}=t,{mainAxis:c=!0,crossAxis:f=!0,fallbackPlacements:d,fallbackStrategy:h="bestFit",fallbackAxisSideDirection:p="none",flipAlignment:m=!0,...g}=Zd(e,t);if((n=o.arrow)!=null&&n.alignmentOffset)return{};const y=ac(i),v=ac(a)===a,_=await(u.isRTL==null?void 0:u.isRTL(l.floating)),w=d||(v||!m?[oR(a)]:k3e(a));!d&&p!=="none"&&w.push(...R3e(a,m,p,_));const E=[a,...w],S=await T7(t,g),T=[];let C=((r=o.flip)==null?void 0:r.overflows)||[];if(c&&T.push(S[y]),f){const O=A3e(i,s,_);T.push(S[O[0]],S[O[1]])}if(C=[...C,{placement:i,overflows:T}],!T.every(O=>O<=0)){var A,R;const O=(((A=o.flip)==null?void 0:A.index)||0)+1,D=E[O];if(D)return{data:{index:O,overflows:C},reset:{placement:D}};let M=(R=C.filter(F=>F.overflows[0]<=0).sort((F,L)=>F.overflows[1]-L.overflows[1])[0])==null?void 0:R.placement;if(!M)switch(h){case"bestFit":{var N;const F=(N=C.map(L=>[L.placement,L.overflows.filter(B=>B>0).reduce((B,U)=>B+U,0)]).sort((L,B)=>L[1]-B[1])[0])==null?void 0:N[0];F&&(M=F);break}case"initialPlacement":M=a;break}if(i!==M)return{reset:{placement:M}}}return{}}}};function _de(e){const t=nu(...e.map(o=>o.left)),n=nu(...e.map(o=>o.top)),r=us(...e.map(o=>o.right)),i=us(...e.map(o=>o.bottom));return{x:t,y:n,width:r-t,height:i-n}}function $3e(e){const t=e.slice().sort((i,o)=>i.y-o.y),n=[];let r=null;for(let i=0;i<t.length;i++){const o=t[i];!r||o.y-r.y>r.height/2?n.push([o]):n[n.length-1].push(o),r=o}return n.map(i=>ib(_de(i)))}const M3e=function(e){return e===void 0&&(e={}),{name:"inline",options:e,async fn(t){const{placement:n,elements:r,rects:i,platform:o,strategy:s}=t,{padding:a=2,x:u,y:l}=Zd(e,t),c=Array.from(await(o.getClientRects==null?void 0:o.getClientRects(r.reference))||[]),f=$3e(c),d=ib(_de(c)),h=x7(a);function p(){if(f.length===2&&f[0].left>f[1].right&&u!=null&&l!=null)return f.find(g=>u>g.left-h.left&&u<g.right+h.right&&l>g.top-h.top&&l<g.bottom+h.bottom)||d;if(f.length>=2){if(wy(n)==="y"){const R=f[0],N=f[f.length-1],O=ac(n)==="top",D=R.top,M=N.bottom,F=O?R.left:N.left,L=O?R.right:N.right,B=L-F,U=M-D;return{top:D,bottom:M,left:F,right:L,width:B,height:U,x:F,y:D}}const g=ac(n)==="left",y=us(...f.map(R=>R.right)),v=nu(...f.map(R=>R.left)),_=f.filter(R=>g?R.left===v:R.right===y),w=_[0].top,E=_[_.length-1].bottom,S=v,T=y,C=T-S,A=E-w;return{top:w,bottom:E,left:S,right:T,width:C,height:A,x:S,y:w}}return d}const m=await o.getElementRects({reference:{getBoundingClientRect:p},floating:r.floating,strategy:s});return i.reference.x!==m.reference.x||i.reference.y!==m.reference.y||i.reference.width!==m.reference.width||i.reference.height!==m.reference.height?{reset:{rects:m}}:{}}}};async function L3e(e,t){const{placement:n,platform:r,elements:i}=e,o=await(r.isRTL==null?void 0:r.isRTL(i.floating)),s=ac(n),a=c_(n),u=wy(n)==="y",l=["left","top"].includes(s)?-1:1,c=o&&u?-1:1,f=Zd(t,e);let{mainAxis:d,crossAxis:h,alignmentAxis:p}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...f};return a&&typeof p=="number"&&(h=a==="end"?p*-1:p),u?{x:h*c,y:d*l}:{x:d*l,y:h*c}}const F3e=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:i,y:o,placement:s,middlewareData:a}=t,u=await L3e(t,e);return s===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:i+u.x,y:o+u.y,data:{...u,placement:s}}}}},j3e=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:i}=t,{mainAxis:o=!0,crossAxis:s=!1,limiter:a={fn:g=>{let{x:y,y:v}=g;return{x:y,y:v}}},...u}=Zd(e,t),l={x:n,y:r},c=await T7(t,u),f=wy(ac(i)),d=_7(f);let h=l[d],p=l[f];if(o){const g=d==="y"?"top":"left",y=d==="y"?"bottom":"right",v=h+c[g],_=h-c[y];h=QF(v,h,_)}if(s){const g=f==="y"?"top":"left",y=f==="y"?"bottom":"right",v=p+c[g],_=p-c[y];p=QF(v,p,_)}const m=a.fn({...t,[d]:h,[f]:p});return{...m,data:{x:m.x-n,y:m.y-r}}}}},B3e=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:r,placement:i,rects:o,middlewareData:s}=t,{offset:a=0,mainAxis:u=!0,crossAxis:l=!0}=Zd(e,t),c={x:n,y:r},f=wy(i),d=_7(f);let h=c[d],p=c[f];const m=Zd(a,t),g=typeof m=="number"?{mainAxis:m,crossAxis:0}:{mainAxis:0,crossAxis:0,...m};if(u){const _=d==="y"?"height":"width",w=o.reference[d]-o.floating[_]+g.mainAxis,E=o.reference[d]+o.reference[_]-g.mainAxis;h<w?h=w:h>E&&(h=E)}if(l){var y,v;const _=d==="y"?"width":"height",w=["top","left"].includes(ac(i)),E=o.reference[f]-o.floating[_]+(w&&((y=s.offset)==null?void 0:y[f])||0)+(w?0:g.crossAxis),S=o.reference[f]+o.reference[_]+(w?0:((v=s.offset)==null?void 0:v[f])||0)-(w?g.crossAxis:0);p<E?p=E:p>S&&(p=S)}return{[d]:h,[f]:p}}}},U3e=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){const{placement:n,rects:r,platform:i,elements:o}=t,{apply:s=()=>{},...a}=Zd(e,t),u=await T7(t,a),l=ac(n),c=c_(n),f=wy(n)==="y",{width:d,height:h}=r.floating;let p,m;l==="top"||l==="bottom"?(p=l,m=c===(await(i.isRTL==null?void 0:i.isRTL(o.floating))?"start":"end")?"left":"right"):(m=l,p=c==="end"?"top":"bottom");const g=h-u.top-u.bottom,y=d-u.left-u.right,v=nu(h-u[p],g),_=nu(d-u[m],y),w=!t.middlewareData.shift;let E=v,S=_;if(f?S=c||w?nu(_,y):y:E=c||w?nu(v,g):g,w&&!c){const C=us(u.left,0),A=us(u.right,0),R=us(u.top,0),N=us(u.bottom,0);f?S=d-2*(C!==0||A!==0?C+A:us(u.left,u.right)):E=h-2*(R!==0||N!==0?R+N:us(u.top,u.bottom))}await s({...t,availableWidth:S,availableHeight:E});const T=await i.getDimensions(o.floating);return d!==T.width||h!==T.height?{reset:{rects:!0}}:{}}}};function wde(e){const t=ol(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const i=mu(e),o=i?e.offsetWidth:n,s=i?e.offsetHeight:r,a=iR(n)!==o||iR(r)!==s;return a&&(n=o,r=s),{width:n,height:r,$:a}}function S7(e){return Ur(e)?e:e.contextElement}function x1(e){const t=S7(e);if(!mu(t))return tm(1);const n=t.getBoundingClientRect(),{width:r,height:i,$:o}=wde(t);let s=(o?iR(n.width):n.width)/r,a=(o?iR(n.height):n.height)/i;return(!s||!Number.isFinite(s))&&(s=1),(!a||!Number.isFinite(a))&&(a=1),{x:s,y:a}}const z3e=tm(0);function Ede(e){const t=Ia(e);return!b7()||!t.visualViewport?z3e:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function V3e(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==Ia(e)?!1:t}function I0(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const i=e.getBoundingClientRect(),o=S7(e);let s=tm(1);t&&(r?Ur(r)&&(s=x1(r)):s=x1(e));const a=V3e(o,n,r)?Ede(o):tm(0);let u=(i.left+a.x)/s.x,l=(i.top+a.y)/s.y,c=i.width/s.x,f=i.height/s.y;if(o){const d=Ia(o),h=r&&Ur(r)?Ia(r):r;let p=d,m=p.frameElement;for(;m&&r&&h!==p;){const g=x1(m),y=m.getBoundingClientRect(),v=ol(m),_=y.left+(m.clientLeft+parseFloat(v.paddingLeft))*g.x,w=y.top+(m.clientTop+parseFloat(v.paddingTop))*g.y;u*=g.x,l*=g.y,c*=g.x,f*=g.y,u+=_,l+=w,p=Ia(m),m=p.frameElement}}return ib({width:c,height:f,x:u,y:l})}const H3e=[":popover-open",":modal"];function C7(e){return H3e.some(t=>{try{return e.matches(t)}catch{return!1}})}function q3e(e){let{elements:t,rect:n,offsetParent:r,strategy:i}=e;const o=i==="fixed",s=yh(r),a=t?C7(t.floating):!1;if(r===s||a&&o)return n;let u={scrollLeft:0,scrollTop:0},l=tm(1);const c=tm(0),f=mu(r);if((f||!f&&!o)&&((l_(r)!=="body"||HS(s))&&(u=hD(r)),mu(r))){const d=I0(r);l=x1(r),c.x=d.x+r.clientLeft,c.y=d.y+r.clientTop}return{width:n.width*l.x,height:n.height*l.y,x:n.x*l.x-u.scrollLeft*l.x+c.x,y:n.y*l.y-u.scrollTop*l.y+c.y}}function W3e(e){return Array.from(e.getClientRects())}function xde(e){return I0(yh(e)).left+hD(e).scrollLeft}function G3e(e){const t=yh(e),n=hD(e),r=e.ownerDocument.body,i=us(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),o=us(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let s=-n.scrollLeft+xde(e);const a=-n.scrollTop;return ol(r).direction==="rtl"&&(s+=us(t.clientWidth,r.clientWidth)-i),{width:i,height:o,x:s,y:a}}function Y3e(e,t){const n=Ia(e),r=yh(e),i=n.visualViewport;let o=r.clientWidth,s=r.clientHeight,a=0,u=0;if(i){o=i.width,s=i.height;const l=b7();(!l||l&&t==="fixed")&&(a=i.offsetLeft,u=i.offsetTop)}return{width:o,height:s,x:a,y:u}}function K3e(e,t){const n=I0(e,!0,t==="fixed"),r=n.top+e.clientTop,i=n.left+e.clientLeft,o=mu(e)?x1(e):tm(1),s=e.clientWidth*o.x,a=e.clientHeight*o.y,u=i*o.x,l=r*o.y;return{width:s,height:a,x:u,y:l}}function yJ(e,t,n){let r;if(t==="viewport")r=Y3e(e,n);else if(t==="document")r=G3e(yh(e));else if(Ur(t))r=K3e(t,n);else{const i=Ede(e);r={...t,x:t.x-i.x,y:t.y-i.y}}return ib(r)}function Tde(e,t){const n=Jd(e);return n===t||!Ur(n)||em(n)?!1:ol(n).position==="fixed"||Tde(n,t)}function X3e(e,t){const n=t.get(e);if(n)return n;let r=$d(e,[],!1).filter(a=>Ur(a)&&l_(a)!=="body"),i=null;const o=ol(e).position==="fixed";let s=o?Jd(e):e;for(;Ur(s)&&!em(s);){const a=ol(s),u=v7(s);!u&&a.position==="fixed"&&(i=null),(o?!u&&!i:!u&&a.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||HS(s)&&!u&&Tde(e,s))?r=r.filter(c=>c!==s):i=a,s=Jd(s)}return t.set(e,r),r}function Q3e(e){let{element:t,boundary:n,rootBoundary:r,strategy:i}=e;const s=[...n==="clippingAncestors"?C7(t)?[]:X3e(t,this._c):[].concat(n),r],a=s[0],u=s.reduce((l,c)=>{const f=yJ(t,c,i);return l.top=us(f.top,l.top),l.right=nu(f.right,l.right),l.bottom=nu(f.bottom,l.bottom),l.left=us(f.left,l.left),l},yJ(t,a,i));return{width:u.right-u.left,height:u.bottom-u.top,x:u.left,y:u.top}}function J3e(e){const{width:t,height:n}=wde(e);return{width:t,height:n}}function Z3e(e,t,n){const r=mu(t),i=yh(t),o=n==="fixed",s=I0(e,!0,o,t);let a={scrollLeft:0,scrollTop:0};const u=tm(0);if(r||!r&&!o)if((l_(t)!=="body"||HS(i))&&(a=hD(t)),r){const f=I0(t,!0,o,t);u.x=f.x+t.clientLeft,u.y=f.y+t.clientTop}else i&&(u.x=xde(i));const l=s.left+a.scrollLeft-u.x,c=s.top+a.scrollTop-u.y;return{x:l,y:c,width:s.width,height:s.height}}function sL(e){return ol(e).position==="static"}function vJ(e,t){return!mu(e)||ol(e).position==="fixed"?null:t?t(e):e.offsetParent}function Sde(e,t){const n=Ia(e);if(C7(e))return n;if(!mu(e)){let i=Jd(e);for(;i&&!em(i);){if(Ur(i)&&!sL(i))return i;i=Jd(i)}return n}let r=vJ(e,t);for(;r&&m3e(r)&&sL(r);)r=vJ(r,t);return r&&em(r)&&sL(r)&&!v7(r)?n:r||g3e(e)||n}const eMe=async function(e){const t=this.getOffsetParent||Sde,n=this.getDimensions,r=await n(e.floating);return{reference:Z3e(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function tMe(e){return ol(e).direction==="rtl"}const nMe={convertOffsetParentRelativeRectToViewportRelativeRect:q3e,getDocumentElement:yh,getClippingRect:Q3e,getOffsetParent:Sde,getElementRects:eMe,getClientRects:W3e,getDimensions:J3e,getScale:x1,isElement:Ur,isRTL:tMe};function rMe(e,t){let n=null,r;const i=yh(e);function o(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function s(a,u){a===void 0&&(a=!1),u===void 0&&(u=1),o();const{left:l,top:c,width:f,height:d}=e.getBoundingClientRect();if(a||t(),!f||!d)return;const h=e2(c),p=e2(i.clientWidth-(l+f)),m=e2(i.clientHeight-(c+d)),g=e2(l),v={rootMargin:-h+"px "+-p+"px "+-m+"px "+-g+"px",threshold:us(0,nu(1,u))||1};let _=!0;function w(E){const S=E[0].intersectionRatio;if(S!==u){if(!_)return s();S?s(!1,S):r=setTimeout(()=>{s(!1,1e-7)},1e3)}_=!1}try{n=new IntersectionObserver(w,{...v,root:i.ownerDocument})}catch{n=new IntersectionObserver(w,v)}n.observe(e)}return s(!0),o}function iMe(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:o=!0,elementResize:s=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:u=!1}=r,l=S7(e),c=i||o?[...l?$d(l):[],...$d(t)]:[];c.forEach(y=>{i&&y.addEventListener("scroll",n,{passive:!0}),o&&y.addEventListener("resize",n)});const f=l&&a?rMe(l,n):null;let d=-1,h=null;s&&(h=new ResizeObserver(y=>{let[v]=y;v&&v.target===l&&h&&(h.unobserve(t),cancelAnimationFrame(d),d=requestAnimationFrame(()=>{var _;(_=h)==null||_.observe(t)})),n()}),l&&!u&&h.observe(l),h.observe(t));let p,m=u?I0(e):null;u&&g();function g(){const y=I0(e);m&&(y.x!==m.x||y.y!==m.y||y.width!==m.width||y.height!==m.height)&&n(),m=y,p=requestAnimationFrame(g)}return n(),()=>{var y;c.forEach(v=>{i&&v.removeEventListener("scroll",n),o&&v.removeEventListener("resize",n)}),f==null||f(),(y=h)==null||y.disconnect(),h=null,u&&cancelAnimationFrame(p)}}const oMe=F3e,sMe=j3e,aMe=O3e,uMe=U3e,bJ=D3e,lMe=M3e,cMe=B3e,fMe=(e,t,n)=>{const r=new Map,i={platform:nMe,...n},o={...i.platform,_c:r};return P3e(e,t,{...i,platform:o})};var Nk=typeof document<"u"?k.useLayoutEffect:k.useEffect;function sR(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,i;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!sR(e[r],t[r]))return!1;return!0}if(i=Object.keys(e),n=i.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,i[r]))return!1;for(r=n;r--!==0;){const o=i[r];if(!(o==="_owner"&&e.$$typeof)&&!sR(e[o],t[o]))return!1}return!0}return e!==e&&t!==t}function Cde(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function _J(e,t){const n=Cde(e);return Math.round(t*n)/n}function wJ(e){const t=k.useRef(e);return Nk(()=>{t.current=e}),t}function dMe(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:i,elements:{reference:o,floating:s}={},transform:a=!0,whileElementsMounted:u,open:l}=e,[c,f]=k.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[d,h]=k.useState(r);sR(d,r)||h(r);const[p,m]=k.useState(null),[g,y]=k.useState(null),v=k.useCallback(B=>{B!==S.current&&(S.current=B,m(B))},[]),_=k.useCallback(B=>{B!==T.current&&(T.current=B,y(B))},[]),w=o||p,E=s||g,S=k.useRef(null),T=k.useRef(null),C=k.useRef(c),A=u!=null,R=wJ(u),N=wJ(i),O=k.useCallback(()=>{if(!S.current||!T.current)return;const B={placement:t,strategy:n,middleware:d};N.current&&(B.platform=N.current),fMe(S.current,T.current,B).then(U=>{const H={...U,isPositioned:!0};D.current&&!sR(C.current,H)&&(C.current=H,US.flushSync(()=>{f(H)}))})},[d,t,n,N]);Nk(()=>{l===!1&&C.current.isPositioned&&(C.current.isPositioned=!1,f(B=>({...B,isPositioned:!1})))},[l]);const D=k.useRef(!1);Nk(()=>(D.current=!0,()=>{D.current=!1}),[]),Nk(()=>{if(w&&(S.current=w),E&&(T.current=E),w&&E){if(R.current)return R.current(w,E,O);O()}},[w,E,O,R,A]);const M=k.useMemo(()=>({reference:S,floating:T,setReference:v,setFloating:_}),[v,_]),F=k.useMemo(()=>({reference:w,floating:E}),[w,E]),L=k.useMemo(()=>{const B={position:n,left:0,top:0};if(!F.floating)return B;const U=_J(F.floating,c.x),H=_J(F.floating,c.y);return a?{...B,transform:"translate("+U+"px, "+H+"px)",...Cde(F.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:U,top:H}},[n,a,F.floating,c.x,c.y]);return k.useMemo(()=>({...c,update:O,refs:M,elements:F,floatingStyles:L}),[c,O,M,F,L])}const hMe=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:r,padding:i}=typeof e=="function"?e(n):e;return r&&t(r)?r.current!=null?bJ({element:r.current,padding:i}).fn(n):{}:r?bJ({element:r,padding:i}).fn(n):{}}}},Ade=(e,t)=>({...oMe(e),options:[e,t]}),A7=(e,t)=>({...sMe(e),options:[e,t]}),EJ=(e,t)=>({...cMe(e),options:[e,t]}),ZF=(e,t)=>({...aMe(e),options:[e,t]}),pMe=(e,t)=>({...uMe(e),options:[e,t]}),e5=(e,t)=>({...lMe(e),options:[e,t]}),kde=(e,t)=>({...hMe(e),options:[e,t]}),Ide={...kI},mMe=Ide.useInsertionEffect,gMe=mMe||(e=>e());function ip(e){const t=k.useRef(()=>{});return gMe(()=>{t.current=e}),k.useCallback(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return t.current==null?void 0:t.current(...r)},[])}var nf=typeof document<"u"?k.useLayoutEffect:k.useEffect;let xJ=!1,yMe=0;const TJ=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+yMe++;function vMe(){const[e,t]=k.useState(()=>xJ?TJ():void 0);return nf(()=>{e==null&&t(TJ())},[]),k.useEffect(()=>{xJ=!0},[]),e}const bMe=Ide.useId,Rde=bMe||vMe;function _Me(){const e=new Map;return{emit(t,n){var r;(r=e.get(t))==null||r.forEach(i=>i(n))},on(t,n){e.set(t,[...e.get(t)||[],n])},off(t,n){var r;e.set(t,((r=e.get(t))==null?void 0:r.filter(i=>i!==n))||[])}}}const wMe=k.createContext(null),EMe=k.createContext(null),k7=()=>{var e;return((e=k.useContext(wMe))==null?void 0:e.id)||null},I7=()=>k.useContext(EMe);function R7(e){return"data-floating-ui-"+e}function SJ(e){const t=k.useRef(e);return nf(()=>{t.current=e}),t}const CJ=R7("safe-polygon");function Pk(e,t,n){return n&&!XF(n)?0:typeof e=="number"?e:e==null?void 0:e[t]}function xMe(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,dataRef:i,events:o,elements:{domReference:s,floating:a}}=e,{enabled:u=!0,delay:l=0,handleClose:c=null,mouseOnly:f=!1,restMs:d=0,move:h=!0}=t,p=I7(),m=k7(),g=SJ(c),y=SJ(l),v=k.useRef(),_=k.useRef(-1),w=k.useRef(),E=k.useRef(-1),S=k.useRef(!0),T=k.useRef(!1),C=k.useRef(()=>{}),A=k.useCallback(()=>{var D;const M=(D=i.current.openEvent)==null?void 0:D.type;return(M==null?void 0:M.includes("mouse"))&&M!=="mousedown"},[i]);k.useEffect(()=>{if(!u)return;function D(M){let{open:F}=M;F||(clearTimeout(_.current),clearTimeout(E.current),S.current=!0)}return o.on("openchange",D),()=>{o.off("openchange",D)}},[u,o]),k.useEffect(()=>{if(!u||!g.current||!n)return;function D(F){A()&&r(!1,F,"hover")}const M=Zg(a).documentElement;return M.addEventListener("mouseleave",D),()=>{M.removeEventListener("mouseleave",D)}},[a,n,r,u,g,A]);const R=k.useCallback(function(D,M,F){M===void 0&&(M=!0),F===void 0&&(F="hover");const L=Pk(y.current,"close",v.current);L&&!w.current?(clearTimeout(_.current),_.current=window.setTimeout(()=>r(!1,D,F),L)):M&&(clearTimeout(_.current),r(!1,D,F))},[y,r]),N=ip(()=>{C.current(),w.current=void 0}),O=ip(()=>{if(T.current){const D=Zg(a).body;D.style.pointerEvents="",D.removeAttribute(CJ),T.current=!1}});return k.useEffect(()=>{if(!u)return;function D(){return i.current.openEvent?["click","mousedown"].includes(i.current.openEvent.type):!1}function M(B){if(clearTimeout(_.current),S.current=!1,f&&!XF(v.current)||d>0&&!Pk(y.current,"open"))return;const U=Pk(y.current,"open",v.current);U?_.current=window.setTimeout(()=>{r(!0,B,"hover")},U):r(!0,B,"hover")}function F(B){if(D())return;C.current();const U=Zg(a);if(clearTimeout(E.current),g.current&&i.current.floatingContext){n||clearTimeout(_.current),w.current=g.current({...i.current.floatingContext,tree:p,x:B.clientX,y:B.clientY,onClose(){O(),N(),R(B,!0,"safe-polygon")}});const P=w.current;U.addEventListener("mousemove",P),C.current=()=>{U.removeEventListener("mousemove",P)};return}(v.current==="touch"?!ET(a,B.relatedTarget):!0)&&R(B)}function L(B){D()||i.current.floatingContext&&(g.current==null||g.current({...i.current.floatingContext,tree:p,x:B.clientX,y:B.clientY,onClose(){O(),N(),R(B)}})(B))}if(Ur(s)){const B=s;return n&&B.addEventListener("mouseleave",L),a==null||a.addEventListener("mouseleave",L),h&&B.addEventListener("mousemove",M,{once:!0}),B.addEventListener("mouseenter",M),B.addEventListener("mouseleave",F),()=>{n&&B.removeEventListener("mouseleave",L),a==null||a.removeEventListener("mouseleave",L),h&&B.removeEventListener("mousemove",M),B.removeEventListener("mouseenter",M),B.removeEventListener("mouseleave",F)}}},[s,a,u,e,f,d,h,R,N,O,r,n,p,y,g,i]),nf(()=>{var D;if(u&&n&&(D=g.current)!=null&&D.__options.blockPointerEvents&&A()){const F=Zg(a).body;if(F.setAttribute(CJ,""),F.style.pointerEvents="none",T.current=!0,Ur(s)&&a){var M;const L=s,B=p==null||(M=p.nodesRef.current.find(U=>U.id===m))==null||(M=M.context)==null?void 0:M.elements.floating;return B&&(B.style.pointerEvents=""),L.style.pointerEvents="auto",a.style.pointerEvents="auto",()=>{L.style.pointerEvents="",a.style.pointerEvents=""}}}},[u,n,m,a,s,p,g,A]),nf(()=>{n||(v.current=void 0,N(),O())},[n,N,O]),k.useEffect(()=>()=>{N(),clearTimeout(_.current),clearTimeout(E.current),O()},[u,s,N,O]),k.useMemo(()=>{if(!u)return{};function D(M){v.current=M.pointerType}return{reference:{onPointerDown:D,onPointerEnter:D,onMouseMove(M){function F(){S.current||r(!0,M.nativeEvent,"hover")}f&&!XF(v.current)||n||d===0||(clearTimeout(E.current),v.current==="touch"?F():E.current=window.setTimeout(F,d))}},floating:{onMouseEnter(){clearTimeout(_.current)},onMouseLeave(M){R(M.nativeEvent,!1)}}}},[u,f,n,d,r,R])}const t5=()=>{},Nde=k.createContext({delay:0,initialDelay:0,timeoutMs:0,currentId:null,setCurrentId:t5,setState:t5,isInstantPhase:!1}),Pde=()=>k.useContext(Nde);function TMe(e){const{children:t,delay:n,timeoutMs:r=0}=e,[i,o]=k.useReducer((u,l)=>({...u,...l}),{delay:n,timeoutMs:r,initialDelay:n,currentId:null,isInstantPhase:!1}),s=k.useRef(null),a=k.useCallback(u=>{o({currentId:u})},[]);return nf(()=>{i.currentId?s.current===null?s.current=i.currentId:i.isInstantPhase||o({isInstantPhase:!0}):(i.isInstantPhase&&o({isInstantPhase:!1}),s.current=null)},[i.currentId,i.isInstantPhase]),k.createElement(Nde.Provider,{value:k.useMemo(()=>({...i,setState:o,setCurrentId:a}),[i,a])},t)}function SMe(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,floatingId:i}=e,{id:o}=t,s=o??i,a=Pde(),{currentId:u,setCurrentId:l,initialDelay:c,setState:f,timeoutMs:d}=a;return nf(()=>{u&&(f({delay:{open:1,close:Pk(c,"close")}}),u!==s&&r(!1))},[s,r,f,u,c]),nf(()=>{function h(){r(!1),f({delay:c,currentId:null})}if(u&&!n&&u===s){if(d){const p=window.setTimeout(h,d);return()=>{clearTimeout(p)}}h()}},[n,f,u,s,r,c,d]),nf(()=>{l===t5||!n||l(s)},[n,l,s]),a}function aL(e,t){let n=e.filter(i=>{var o;return i.parentId===t&&((o=i.context)==null?void 0:o.open)}),r=n;for(;r.length;)r=e.filter(i=>{var o;return(o=r)==null?void 0:o.some(s=>{var a;return i.parentId===s.id&&((a=i.context)==null?void 0:a.open)})}),n=n.concat(r);return n}const CMe={pointerdown:"onPointerDown",mousedown:"onMouseDown",click:"onClick"},AMe={pointerdown:"onPointerDownCapture",mousedown:"onMouseDownCapture",click:"onClickCapture"},AJ=e=>{var t,n;return{escapeKey:typeof e=="boolean"?e:(t=e==null?void 0:e.escapeKey)!=null?t:!1,outsidePress:typeof e=="boolean"?e:(n=e==null?void 0:e.outsidePress)!=null?n:!0}};function kMe(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,elements:{reference:i,domReference:o,floating:s},dataRef:a}=e,{enabled:u=!0,escapeKey:l=!0,outsidePress:c=!0,outsidePressEvent:f="pointerdown",referencePress:d=!1,referencePressEvent:h="pointerdown",ancestorScroll:p=!1,bubbles:m,capture:g}=t,y=I7(),v=ip(typeof c=="function"?c:()=>!1),_=typeof c=="function"?v:c,w=k.useRef(!1),E=k.useRef(!1),{escapeKey:S,outsidePress:T}=AJ(m),{escapeKey:C,outsidePress:A}=AJ(g),R=ip(M=>{var F;if(!n||!u||!l||M.key!=="Escape")return;const L=(F=a.current.floatingContext)==null?void 0:F.nodeId,B=y?aL(y.nodesRef.current,L):[];if(!S&&(M.stopPropagation(),B.length>0)){let U=!0;if(B.forEach(H=>{var P;if((P=H.context)!=null&&P.open&&!H.context.dataRef.current.__escapeKeyBubbles){U=!1;return}}),!U)return}r(!1,w3e(M)?M.nativeEvent:M,"escape-key")}),N=ip(M=>{var F;const L=()=>{var B;R(M),(B=Mv(M))==null||B.removeEventListener("keydown",L)};(F=Mv(M))==null||F.addEventListener("keydown",L)}),O=ip(M=>{var F;const L=w.current;w.current=!1;const B=E.current;if(E.current=!1,f==="click"&&B||L||typeof _=="function"&&!_(M))return;const U=Mv(M),H="["+R7("inert")+"]",P=Zg(s).querySelectorAll(H);let z=Ur(U)?U:null;for(;z&&!em(z);){const G=Jd(z);if(em(G)||!Ur(G))break;z=G}if(P.length&&Ur(U)&&!E3e(U)&&!ET(U,s)&&Array.from(P).every(G=>!ET(z,G)))return;if(mu(U)&&s){const G=U.clientWidth>0&&U.scrollWidth>U.clientWidth,te=U.clientHeight>0&&U.scrollHeight>U.clientHeight;let pe=te&&M.offsetX>U.clientWidth;if(te&&ol(U).direction==="rtl"&&(pe=M.offsetX<=U.offsetWidth-U.clientWidth),pe||G&&M.offsetY>U.clientHeight)return}const W=(F=a.current.floatingContext)==null?void 0:F.nodeId,j=y&&aL(y.nodesRef.current,W).some(G=>{var te;return oL(M,(te=G.context)==null?void 0:te.elements.floating)});if(oL(M,s)||oL(M,o)||j)return;const q=y?aL(y.nodesRef.current,W):[];if(q.length>0){let G=!0;if(q.forEach(te=>{var pe;if((pe=te.context)!=null&&pe.open&&!te.context.dataRef.current.__outsidePressBubbles){G=!1;return}}),!G)return}r(!1,M,"outside-press")}),D=ip(M=>{var F;const L=()=>{var B;O(M),(B=Mv(M))==null||B.removeEventListener(f,L)};(F=Mv(M))==null||F.addEventListener(f,L)});return k.useEffect(()=>{if(!n||!u)return;a.current.__escapeKeyBubbles=S,a.current.__outsidePressBubbles=T;function M(B){r(!1,B,"ancestor-scroll")}const F=Zg(s);l&&F.addEventListener("keydown",C?N:R,C),_&&F.addEventListener(f,A?D:O,A);let L=[];return p&&(Ur(o)&&(L=$d(o)),Ur(s)&&(L=L.concat($d(s))),!Ur(i)&&i&&i.contextElement&&(L=L.concat($d(i.contextElement)))),L=L.filter(B=>{var U;return B!==((U=F.defaultView)==null?void 0:U.visualViewport)}),L.forEach(B=>{B.addEventListener("scroll",M,{passive:!0})}),()=>{l&&F.removeEventListener("keydown",C?N:R,C),_&&F.removeEventListener(f,A?D:O,A),L.forEach(B=>{B.removeEventListener("scroll",M)})}},[a,s,o,i,l,_,f,n,r,p,u,S,T,R,C,N,O,A,D]),k.useEffect(()=>{w.current=!1},[_,f]),k.useMemo(()=>u?{reference:{onKeyDown:R,[CMe[h]]:M=>{d&&r(!1,M.nativeEvent,"reference-press")}},floating:{onKeyDown:R,onMouseDown(){E.current=!0},onMouseUp(){E.current=!0},[AMe[f]]:()=>{w.current=!0}}}:{},[u,d,f,h,r,R])}function IMe(e){const{open:t=!1,onOpenChange:n,elements:r}=e,i=Rde(),o=k.useRef({}),[s]=k.useState(()=>_Me()),a=k7()!=null,[u,l]=k.useState(r.reference),c=ip((h,p,m)=>{o.current.openEvent=h?p:void 0,s.emit("openchange",{open:h,event:p,reason:m,nested:a}),n==null||n(h,p,m)}),f=k.useMemo(()=>({setPositionReference:l}),[]),d=k.useMemo(()=>({reference:u||r.reference||null,floating:r.floating||null,domReference:r.reference}),[u,r.reference,r.floating]);return k.useMemo(()=>({dataRef:o,open:t,onOpenChange:c,elements:d,events:s,floatingId:i,refs:f}),[t,c,d,s,i,f])}function N7(e){e===void 0&&(e={});const{nodeId:t}=e,n=IMe({...e,elements:{reference:null,floating:null,...e.elements}}),r=e.rootContext||n,i=r.elements,[o,s]=k.useState(null),[a,u]=k.useState(null),c=(i==null?void 0:i.reference)||o,f=k.useRef(null),d=I7();nf(()=>{c&&(f.current=c)},[c]);const h=dMe({...e,elements:{...i,...a&&{reference:a}}}),p=k.useCallback(_=>{const w=Ur(_)?{getBoundingClientRect:()=>_.getBoundingClientRect(),contextElement:_}:_;u(w),h.refs.setReference(w)},[h.refs]),m=k.useCallback(_=>{(Ur(_)||_===null)&&(f.current=_,s(_)),(Ur(h.refs.reference.current)||h.refs.reference.current===null||_!==null&&!Ur(_))&&h.refs.setReference(_)},[h.refs]),g=k.useMemo(()=>({...h.refs,setReference:m,setPositionReference:p,domReference:f}),[h.refs,m,p]),y=k.useMemo(()=>({...h.elements,domReference:c}),[h.elements,c]),v=k.useMemo(()=>({...h,...r,refs:g,elements:y,nodeId:t}),[h,g,y,t,r]);return nf(()=>{r.dataRef.current.floatingContext=v;const _=d==null?void 0:d.nodesRef.current.find(w=>w.id===t);_&&(_.context=v)}),k.useMemo(()=>({...h,context:v,refs:g,elements:y}),[h,g,y,v])}function RMe(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,events:i,dataRef:o,elements:{domReference:s}}=e,{enabled:a=!0,visibleOnly:u=!0}=t,l=k.useRef(!1),c=k.useRef(),f=k.useRef(!0);return k.useEffect(()=>{if(!a)return;const d=Ia(s);function h(){!n&&mu(s)&&s===pJ(Zg(s))&&(l.current=!0)}function p(){f.current=!0}return d.addEventListener("blur",h),d.addEventListener("keydown",p,!0),()=>{d.removeEventListener("blur",h),d.removeEventListener("keydown",p,!0)}},[s,n,a]),k.useEffect(()=>{if(!a)return;function d(h){let{reason:p}=h;(p==="reference-press"||p==="escape-key")&&(l.current=!0)}return i.on("openchange",d),()=>{i.off("openchange",d)}},[i,a]),k.useEffect(()=>()=>{clearTimeout(c.current)},[]),k.useMemo(()=>a?{reference:{onPointerDown(d){y3e(d.nativeEvent)||(f.current=!1)},onMouseLeave(){l.current=!1},onFocus(d){if(l.current)return;const h=Mv(d.nativeEvent);if(u&&Ur(h))try{if(v3e()&&b3e())throw Error();if(!h.matches(":focus-visible"))return}catch{if(!f.current&&!T3e(h))return}r(!0,d.nativeEvent,"focus")},onBlur(d){l.current=!1;const h=d.relatedTarget,p=Ur(h)&&h.hasAttribute(R7("focus-guard"))&&h.getAttribute("data-type")==="outside";c.current=window.setTimeout(()=>{var m;const g=pJ(s?s.ownerDocument:document);!h&&g===s||ET((m=o.current.floatingContext)==null?void 0:m.refs.floating.current,g)||ET(s,g)||p||r(!1,d.nativeEvent,"focus")})}}}:{},[a,u,o,s,r])}const kJ="active",IJ="selected";function uL(e,t,n){const r=new Map,i=n==="item";let o=e;if(i&&e){const{[kJ]:s,[IJ]:a,...u}=e;o=u}return{...n==="floating"&&{tabIndex:-1},...o,...t.map(s=>{const a=s?s[n]:null;return typeof a=="function"?e?a(e):null:a}).concat(e).reduce((s,a)=>(a&&Object.entries(a).forEach(u=>{let[l,c]=u;if(!(i&&[kJ,IJ].includes(l)))if(l.indexOf("on")===0){if(r.has(l)||r.set(l,[]),typeof c=="function"){var f;(f=r.get(l))==null||f.push(c),s[l]=function(){for(var d,h=arguments.length,p=new Array(h),m=0;m<h;m++)p[m]=arguments[m];return(d=r.get(l))==null?void 0:d.map(g=>g(...p)).find(g=>g!==void 0)}}}else s[l]=c}),s),{})}}function NMe(e){e===void 0&&(e=[]);const t=e,n=k.useCallback(o=>uL(o,e,"reference"),t),r=k.useCallback(o=>uL(o,e,"floating"),t),i=k.useCallback(o=>uL(o,e,"item"),e.map(o=>o==null?void 0:o.item));return k.useMemo(()=>({getReferenceProps:n,getFloatingProps:r,getItemProps:i}),[n,r,i])}const PMe=new Map([["select","listbox"],["combobox","listbox"],["label",!1]]);function DMe(e,t){var n;t===void 0&&(t={});const{open:r,floatingId:i}=e,{enabled:o=!0,role:s="dialog"}=t,a=(n=PMe.get(s))!=null?n:s,u=Rde(),c=k7()!=null;return k.useMemo(()=>{if(!o)return{};const f={id:i,...a&&{role:a}};return a==="tooltip"||s==="label"?{reference:{["aria-"+(s==="label"?"labelledby":"describedby")]:r?i:void 0},floating:f}:{reference:{"aria-expanded":r?"true":"false","aria-haspopup":a==="alertdialog"?"dialog":a,"aria-controls":r?i:void 0,...a==="listbox"&&{role:"combobox"},...a==="menu"&&{id:u},...a==="menu"&&c&&{role:"menuitem"},...s==="select"&&{"aria-autocomplete":"none"},...s==="combobox"&&{"aria-autocomplete":"list"}},floating:{...f,...a==="menu"&&{"aria-labelledby":u}},item(d){let{active:h,selected:p}=d;const m={role:"option",...h&&{id:i+"-option"}};switch(s){case"select":return{...m,"aria-selected":h&&p};case"combobox":return{...m,...h&&{"aria-selected":!0}}}return{}}}},[o,s,a,r,i,u,c])}function Dde(e,t){if(e==="rtl"&&(t.includes("right")||t.includes("left"))){const[n,r]=t.split("-"),i=n==="right"?"left":"right";return r===void 0?i:`${i}-${r}`}return t}function RJ(e,t,n,r){return e==="center"||r==="center"?{top:t}:e==="end"?{bottom:n}:e==="start"?{top:n}:{}}function NJ(e,t,n,r,i){return e==="center"||r==="center"?{left:t}:e==="end"?{[i==="ltr"?"right":"left"]:n}:e==="start"?{[i==="ltr"?"left":"right"]:n}:{}}const OMe={bottom:"borderTopLeftRadius",left:"borderTopRightRadius",right:"borderBottomLeftRadius",top:"borderBottomRightRadius"};function $Me({position:e,arrowSize:t,arrowOffset:n,arrowRadius:r,arrowPosition:i,arrowX:o,arrowY:s,dir:a}){const[u,l="center"]=e.split("-"),c={width:we(t),height:we(t),transform:"rotate(45deg)",position:"absolute",[OMe[u]]:we(r)},f=we(-t/2);return u==="left"?{...c,...RJ(l,s,n,i),right:f,borderLeftColor:"transparent",borderBottomColor:"transparent"}:u==="right"?{...c,...RJ(l,s,n,i),left:f,borderRightColor:"transparent",borderTopColor:"transparent"}:u==="top"?{...c,...NJ(l,o,n,i,a),bottom:f,borderTopColor:"transparent",borderLeftColor:"transparent"}:u==="bottom"?{...c,...NJ(l,o,n,i,a),top:f,borderBottomColor:"transparent",borderRightColor:"transparent"}:{}}const P7=k.forwardRef(({position:e,arrowSize:t,arrowOffset:n,arrowRadius:r,arrowPosition:i,visible:o,arrowX:s,arrowY:a,style:u,...l},c)=>{const{dir:f}=Pf();return o?b.jsx("div",{...l,ref:c,style:{...u,...$Me({position:e,arrowSize:t,arrowOffset:n,arrowRadius:r,arrowPosition:i,dir:f,arrowX:s,arrowY:a})}}):null});P7.displayName="@mantine/core/FloatingArrow";const[MMe,Ode]=go("Popover component was not found in the tree");function pD({children:e,active:t=!0,refProp:n="ref"}){const r=AOe(t),i=Gi(r,e==null?void 0:e.ref);return Om(e)?k.cloneElement(e,{[n]:i}):e}function $de(e){return b.jsx(y7,{tabIndex:-1,"data-autofocus":!0,...e})}pD.displayName="@mantine/core/FocusTrap";$de.displayName="@mantine/core/FocusTrapInitialFocus";pD.InitialFocus=$de;function LMe(e){const t=document.createElement("div");return t.setAttribute("data-portal","true"),typeof e.className=="string"&&t.classList.add(...e.className.split(" ").filter(Boolean)),typeof e.style=="object"&&Object.assign(t.style,e.style),typeof e.id=="string"&&t.setAttribute("id",e.id),t}const FMe={},Mde=k.forwardRef((e,t)=>{const{children:n,target:r,...i}=_e("Portal",FMe,e),[o,s]=k.useState(!1),a=k.useRef(null);return gy(()=>(s(!0),a.current=r?typeof r=="string"?document.querySelector(r):r:LMe(i),s7(t,a.current),!r&&a.current&&document.body.appendChild(a.current),()=>{!r&&a.current&&document.body.removeChild(a.current)}),[r]),!o||!a.current?null:US.createPortal(b.jsx(b.Fragment,{children:n}),a.current)});Mde.displayName="@mantine/core/Portal";function f_({withinPortal:e=!0,children:t,...n}){return e?b.jsx(Mde,{...n,children:t}):b.jsx(b.Fragment,{children:t})}f_.displayName="@mantine/core/OptionalPortal";const kw=e=>({in:{opacity:1,transform:"scale(1)"},out:{opacity:0,transform:`scale(.9) translateY(${we(e==="bottom"?10:-10)})`},transitionProperty:"transform, opacity"}),t2={fade:{in:{opacity:1},out:{opacity:0},transitionProperty:"opacity"},"fade-up":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:`translateY(${we(30)}`},transitionProperty:"opacity, transform"},"fade-down":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:`translateY(${we(-30)}`},transitionProperty:"opacity, transform"},"fade-left":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:`translateX(${we(30)}`},transitionProperty:"opacity, transform"},"fade-right":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:`translateX(${we(-30)}`},transitionProperty:"opacity, transform"},scale:{in:{opacity:1,transform:"scale(1)"},out:{opacity:0,transform:"scale(0)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"scale-y":{in:{opacity:1,transform:"scaleY(1)"},out:{opacity:0,transform:"scaleY(0)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"scale-x":{in:{opacity:1,transform:"scaleX(1)"},out:{opacity:0,transform:"scaleX(0)"},common:{transformOrigin:"left"},transitionProperty:"transform, opacity"},"skew-up":{in:{opacity:1,transform:"translateY(0) skew(0deg, 0deg)"},out:{opacity:0,transform:`translateY(${we(-20)}) skew(-10deg, -5deg)`},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"skew-down":{in:{opacity:1,transform:"translateY(0) skew(0deg, 0deg)"},out:{opacity:0,transform:`translateY(${we(20)}) skew(-10deg, -5deg)`},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"rotate-left":{in:{opacity:1,transform:"translateY(0) rotate(0deg)"},out:{opacity:0,transform:`translateY(${we(20)}) rotate(-5deg)`},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"rotate-right":{in:{opacity:1,transform:"translateY(0) rotate(0deg)"},out:{opacity:0,transform:`translateY(${we(20)}) rotate(5deg)`},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"slide-down":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(-100%)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"slide-up":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(100%)"},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"slide-left":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(100%)"},common:{transformOrigin:"left"},transitionProperty:"transform, opacity"},"slide-right":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(-100%)"},common:{transformOrigin:"right"},transitionProperty:"transform, opacity"},pop:{...kw("bottom"),common:{transformOrigin:"center center"}},"pop-bottom-left":{...kw("bottom"),common:{transformOrigin:"bottom left"}},"pop-bottom-right":{...kw("bottom"),common:{transformOrigin:"bottom right"}},"pop-top-left":{...kw("top"),common:{transformOrigin:"top left"}},"pop-top-right":{...kw("top"),common:{transformOrigin:"top right"}}},PJ={entering:"in",entered:"in",exiting:"out",exited:"out","pre-exiting":"out","pre-entering":"out"};function jMe({transition:e,state:t,duration:n,timingFunction:r}){const i={transitionDuration:`${n}ms`,transitionTimingFunction:r};return typeof e=="string"?e in t2?{transitionProperty:t2[e].transitionProperty,...i,...t2[e].common,...t2[e][PJ[t]]}:{}:{transitionProperty:e.transitionProperty,...i,...e.common,...e[PJ[t]]}}function BMe({duration:e,exitDuration:t,timingFunction:n,mounted:r,onEnter:i,onExit:o,onEntered:s,onExited:a}){const u=Oi(),l=uD(),c=u.respectReducedMotion?l:!1,[f,d]=k.useState(c?0:e),[h,p]=k.useState(r?"entered":"exited"),m=k.useRef(-1),g=k.useRef(-1),y=v=>{const _=v?i:o,w=v?s:a;window.clearTimeout(m.current);const E=c?0:v?e:t;d(E),E===0?(typeof _=="function"&&_(),typeof w=="function"&&w(),p(v?"entered":"exited")):g.current=requestAnimationFrame(()=>{bE.flushSync(()=>{p(v?"pre-entering":"pre-exiting")}),g.current=requestAnimationFrame(()=>{typeof _=="function"&&_(),p(v?"entering":"exiting"),m.current=window.setTimeout(()=>{typeof w=="function"&&w(),p(v?"entered":"exited")},E)})})};return vf(()=>{y(r)},[r]),k.useEffect(()=>()=>{window.clearTimeout(m.current),cancelAnimationFrame(g.current)},[]),{transitionDuration:f,transitionStatus:h,transitionTimingFunction:n||"ease"}}function vh({keepMounted:e,transition:t="fade",duration:n=250,exitDuration:r=n,mounted:i,children:o,timingFunction:s="ease",onExit:a,onEntered:u,onEnter:l,onExited:c}){const{transitionDuration:f,transitionStatus:d,transitionTimingFunction:h}=BMe({mounted:i,exitDuration:r,duration:n,timingFunction:s,onExit:a,onEntered:u,onEnter:l,onExited:c});return f===0?i?b.jsx(b.Fragment,{children:o({})}):e?o({display:"none"}):null:d==="exited"?e?o({display:"none"}):null:b.jsx(b.Fragment,{children:o(jMe({transition:t,duration:f,state:d,timingFunction:h}))})}vh.displayName="@mantine/core/Transition";var Lde={dropdown:"m_38a85659",arrow:"m_a31dc6c1"};const UMe={},D7=Oe((e,t)=>{var g,y,v,_;const n=_e("PopoverDropdown",UMe,e),{className:r,style:i,vars:o,children:s,onKeyDownCapture:a,variant:u,classNames:l,styles:c,...f}=n,d=Ode(),h=Bfe({opened:d.opened,shouldReturnFocus:d.returnFocus}),p=d.withRoles?{"aria-labelledby":d.getTargetId(),id:d.getDropdownId(),role:"dialog",tabIndex:-1}:{},m=Gi(t,d.floating);return d.disabled?null:b.jsx(f_,{...d.portalProps,withinPortal:d.withinPortal,children:b.jsx(vh,{mounted:d.opened,...d.transitionProps,transition:((g=d.transitionProps)==null?void 0:g.transition)||"fade",duration:((y=d.transitionProps)==null?void 0:y.duration)??150,keepMounted:d.keepMounted,exitDuration:typeof((v=d.transitionProps)==null?void 0:v.exitDuration)=="number"?d.transitionProps.exitDuration:(_=d.transitionProps)==null?void 0:_.duration,children:w=>b.jsx(pD,{active:d.trapFocus,children:b.jsxs(he,{...p,...f,variant:u,ref:m,onKeyDownCapture:pOe(d.onClose,{active:d.closeOnEscape,onTrigger:h,onKeyDown:a}),"data-position":d.placement,...d.getStyles("dropdown",{className:r,props:n,classNames:l,styles:c,style:[{...w,zIndex:d.zIndex,top:d.y??0,left:d.x??0,width:d.width==="target"?void 0:we(d.width)},i]}),children:[s,b.jsx(P7,{ref:d.arrowRef,arrowX:d.arrowX,arrowY:d.arrowY,visible:d.withArrow,position:d.placement,arrowSize:d.arrowSize,arrowRadius:d.arrowRadius,arrowOffset:d.arrowOffset,arrowPosition:d.arrowPosition,...d.getStyles("arrow",{props:n,classNames:l,styles:c})})]})})})})});D7.classes=Lde;D7.displayName="@mantine/core/PopoverDropdown";const zMe={refProp:"ref",popupType:"dialog"},Fde=Oe((e,t)=>{const{children:n,refProp:r,popupType:i,...o}=_e("PopoverTarget",zMe,e);if(!Om(n))throw new Error("Popover.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const s=o,a=Ode(),u=Gi(a.reference,n.ref,t),l=a.withRoles?{"aria-haspopup":i,"aria-expanded":a.opened,"aria-controls":a.getDropdownId(),id:a.getTargetId()}:{};return k.cloneElement(n,{...s,...l,...a.targetProps,className:fi(a.targetProps.className,s.className,n.props.className),[r]:u,...a.controlled?null:{onClick:a.onToggle}})});Fde.displayName="@mantine/core/PopoverTarget";function jde({opened:e,floating:t,position:n,positionDependencies:r}){const[i,o]=k.useState(0);k.useEffect(()=>{if(t.refs.reference.current&&t.refs.floating.current)return iMe(t.refs.reference.current,t.refs.floating.current,t.update)},[t.refs.reference.current,t.refs.floating.current,e,i,n]),vf(()=>{t.update()},r),vf(()=>{o(s=>s+1)},[e])}function VMe(e){if(e===void 0)return{shift:!0,flip:!0};const t={...e};return e.shift===void 0&&(t.shift=!0),e.flip===void 0&&(t.flip=!0),t}function HMe(e,t){const n=VMe(e.middlewares),r=[Ade(e.offset)];return n.shift&&r.push(A7(typeof n.shift=="boolean"?{limiter:EJ(),padding:5}:{limiter:EJ(),padding:5,...n.shift})),n.flip&&r.push(typeof n.flip=="boolean"?ZF():ZF(n.flip)),n.inline&&r.push(typeof n.inline=="boolean"?e5():e5(n.inline)),r.push(kde({element:e.arrowRef,padding:e.arrowOffset})),(n.size||e.width==="target")&&r.push(pMe({...typeof n.size=="boolean"?{}:n.size,apply({rects:i,availableWidth:o,availableHeight:s}){var l;const u=((l=t().refs.floating.current)==null?void 0:l.style)??{};n.size&&Object.assign(u,{maxWidth:`${o}px`,maxHeight:`${s}px`}),e.width==="target"&&Object.assign(u,{width:`${i.reference.width}px`})}})),r}function qMe(e){const[t,n]=Wi({value:e.opened,defaultValue:e.defaultOpened,finalValue:!1,onChange:e.onChange}),r=()=>{var s;t&&((s=e.onClose)==null||s.call(e),n(!1))},i=()=>{var s,a;t?((s=e.onClose)==null||s.call(e),n(!1)):((a=e.onOpen)==null||a.call(e),n(!0))},o=N7({strategy:e.strategy,placement:e.position,middleware:HMe(e,()=>o)});return jde({opened:e.opened,position:e.position,positionDependencies:e.positionDependencies||[],floating:o}),vf(()=>{var s;(s=e.onPositionChange)==null||s.call(e,o.placement)},[o.placement]),vf(()=>{var s,a;e.opened?(a=e.onOpen)==null||a.call(e):(s=e.onClose)==null||s.call(e)},[e.opened]),{floating:o,controlled:typeof e.opened=="boolean",opened:t,onClose:r,onToggle:i}}const WMe={position:"bottom",offset:8,positionDependencies:[],transitionProps:{transition:"fade",duration:150},middlewares:{flip:!0,shift:!0,inline:!1},arrowSize:7,arrowOffset:5,arrowRadius:0,arrowPosition:"side",closeOnClickOutside:!0,withinPortal:!0,closeOnEscape:!0,trapFocus:!1,withRoles:!0,returnFocus:!1,clickOutsideEvents:["mousedown","touchstart"],zIndex:Nu("popover"),__staticSelector:"Popover",width:"max-content"},GMe=(e,{radius:t,shadow:n})=>({dropdown:{"--popover-radius":t===void 0?void 0:vr(t),"--popover-shadow":i7(n)}});function Mo(e){var Re,$e,Ge,dt,Nt,He;const t=_e("Popover",WMe,e),{children:n,position:r,offset:i,onPositionChange:o,positionDependencies:s,opened:a,transitionProps:u,width:l,middlewares:c,withArrow:f,arrowSize:d,arrowOffset:h,arrowRadius:p,arrowPosition:m,unstyled:g,classNames:y,styles:v,closeOnClickOutside:_,withinPortal:w,portalProps:E,closeOnEscape:S,clickOutsideEvents:T,trapFocus:C,onClose:A,onOpen:R,onChange:N,zIndex:O,radius:D,shadow:M,id:F,defaultOpened:L,__staticSelector:B,withRoles:U,disabled:H,returnFocus:P,variant:z,keepMounted:W,vars:j,floatingStrategy:q,...G}=t,te=pt({name:B,props:t,classes:Lde,classNames:y,styles:v,unstyled:g,rootSelector:"dropdown",vars:j,varsResolver:GMe}),pe=k.useRef(null),[be,le]=k.useState(null),[me,Se]=k.useState(null),{dir:ge}=Pf(),tt=Js(F),Ue=qMe({middlewares:c,width:l,position:Dde(ge,r),offset:typeof i=="number"?i+(f?d/2:0):i,arrowRef:pe,arrowOffset:h,onPositionChange:o,positionDependencies:s,opened:a,defaultOpened:L,onChange:N,onOpen:R,onClose:A,strategy:q});yOe(()=>_&&Ue.onClose(),T,[be,me]);const mt=k.useCallback(fe=>{le(fe),Ue.floating.refs.setReference(fe)},[Ue.floating.refs.setReference]),it=k.useCallback(fe=>{Se(fe),Ue.floating.refs.setFloating(fe)},[Ue.floating.refs.setFloating]);return b.jsx(MMe,{value:{returnFocus:P,disabled:H,controlled:Ue.controlled,reference:mt,floating:it,x:Ue.floating.x,y:Ue.floating.y,arrowX:(Ge=($e=(Re=Ue.floating)==null?void 0:Re.middlewareData)==null?void 0:$e.arrow)==null?void 0:Ge.x,arrowY:(He=(Nt=(dt=Ue.floating)==null?void 0:dt.middlewareData)==null?void 0:Nt.arrow)==null?void 0:He.y,opened:Ue.opened,arrowRef:pe,transitionProps:u,width:l,withArrow:f,arrowSize:d,arrowOffset:h,arrowRadius:p,arrowPosition:m,placement:Ue.floating.placement,trapFocus:C,withinPortal:w,portalProps:E,zIndex:O,radius:D,shadow:M,closeOnEscape:S,onClose:Ue.onClose,onToggle:Ue.onToggle,getTargetId:()=>`${tt}-target`,getDropdownId:()=>`${tt}-dropdown`,withRoles:U,targetProps:G,__staticSelector:B,classNames:y,styles:v,unstyled:g,variant:z,keepMounted:W,getStyles:te},children:n})}Mo.Target=Fde;Mo.Dropdown=D7;Mo.displayName="@mantine/core/Popover";Mo.extend=e=>e;var Wl={root:"m_5ae2e3c",barsLoader:"m_7a2bd4cd",bar:"m_870bb79","bars-loader-animation":"m_5d2b3b9d",dotsLoader:"m_4e3f22d7",dot:"m_870c4af","loader-dots-animation":"m_aac34a1",ovalLoader:"m_b34414df","oval-loader-animation":"m_f8e89c4b"};const YMe=k.forwardRef(({className:e,...t},n)=>b.jsxs(he,{component:"span",className:fi(Wl.barsLoader,e),...t,ref:n,children:[b.jsx("span",{className:Wl.bar}),b.jsx("span",{className:Wl.bar}),b.jsx("span",{className:Wl.bar})]})),KMe=k.forwardRef(({className:e,...t},n)=>b.jsxs(he,{component:"span",className:fi(Wl.dotsLoader,e),...t,ref:n,children:[b.jsx("span",{className:Wl.dot}),b.jsx("span",{className:Wl.dot}),b.jsx("span",{className:Wl.dot})]})),XMe=k.forwardRef(({className:e,...t},n)=>b.jsx(he,{component:"span",className:fi(Wl.ovalLoader,e),...t,ref:n})),Bde={bars:YMe,oval:XMe,dots:KMe},QMe={loaders:Bde,type:"oval"},JMe=(e,{size:t,color:n})=>({root:{"--loader-size":Wt(t,"loader-size"),"--loader-color":n?ar(n,e):void 0}}),bh=Oe((e,t)=>{const n=_e("Loader",QMe,e),{size:r,color:i,type:o,vars:s,className:a,style:u,classNames:l,styles:c,unstyled:f,loaders:d,variant:h,children:p,...m}=n,g=pt({name:"Loader",props:n,classes:Wl,className:a,style:u,classNames:l,styles:c,unstyled:f,vars:s,varsResolver:JMe});return p?b.jsx(he,{...g("root"),ref:t,...m,children:p}):b.jsx(he,{...g("root"),ref:t,component:d[o],variant:h,size:r,...m})});bh.defaultLoaders=Bde;bh.classes=Wl;bh.displayName="@mantine/core/Loader";var mD={root:"m_8d3f4000",icon:"m_8d3afb97",loader:"m_302b9fb1",group:"m_1a0f1b21"};const DJ={orientation:"horizontal"},ZMe=(e,{borderWidth:t})=>({group:{"--ai-border-width":we(t)}}),O7=Oe((e,t)=>{const n=_e("ActionIconGroup",DJ,e),{className:r,style:i,classNames:o,styles:s,unstyled:a,orientation:u,vars:l,borderWidth:c,variant:f,mod:d,...h}=_e("ActionIconGroup",DJ,e),p=pt({name:"ActionIconGroup",props:n,classes:mD,className:r,style:i,classNames:o,styles:s,unstyled:a,vars:l,varsResolver:ZMe,rootSelector:"group"});return b.jsx(he,{...p("group"),ref:t,variant:f,mod:[{"data-orientation":u},d],role:"group",...h})});O7.classes=mD;O7.displayName="@mantine/core/ActionIconGroup";const eLe={},tLe=(e,{size:t,radius:n,variant:r,gradient:i,color:o,autoContrast:s})=>{const a=e.variantColorResolver({color:o||e.primaryColor,theme:e,gradient:i,variant:r||"filled",autoContrast:s});return{root:{"--ai-size":Wt(t,"ai-size"),"--ai-radius":n===void 0?void 0:vr(n),"--ai-bg":o||r?a.background:void 0,"--ai-hover":o||r?a.hover:void 0,"--ai-hover-color":o||r?a.hoverColor:void 0,"--ai-color":a.color,"--ai-bd":o||r?a.border:void 0}}},Ey=Yi((e,t)=>{const n=_e("ActionIcon",eLe,e),{className:r,unstyled:i,variant:o,classNames:s,styles:a,style:u,loading:l,loaderProps:c,size:f,color:d,radius:h,__staticSelector:p,gradient:m,vars:g,children:y,disabled:v,"data-disabled":_,autoContrast:w,mod:E,...S}=n,T=pt({name:["ActionIcon",p],props:n,className:r,style:u,classes:mD,classNames:s,styles:a,unstyled:i,vars:g,varsResolver:tLe});return b.jsxs(Pi,{...T("root",{active:!v&&!l&&!_}),...S,unstyled:i,variant:o,size:f,disabled:v||l,ref:t,mod:[{loading:l,disabled:v||_},E],children:[b.jsx(vh,{mounted:!!l,transition:"slide-down",duration:150,children:C=>b.jsx(he,{component:"span",...T("loader",{style:C}),"aria-hidden":!0,children:b.jsx(bh,{color:"var(--ai-color)",size:"calc(var(--ai-size) * 0.55)",...c})})}),b.jsx(he,{component:"span",mod:{loading:l},...T("icon"),children:y})]})});Ey.classes=mD;Ey.displayName="@mantine/core/ActionIcon";Ey.Group=O7;const Ude=k.forwardRef(({size:e="var(--cb-icon-size, 70%)",style:t,...n},r)=>b.jsx("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{...t,width:e,height:e},ref:r,...n,children:b.jsx("path",{d:"M11.7816 4.03157C12.0062 3.80702 12.0062 3.44295 11.7816 3.2184C11.5571 2.99385 11.193 2.99385 10.9685 3.2184L7.50005 6.68682L4.03164 3.2184C3.80708 2.99385 3.44301 2.99385 3.21846 3.2184C2.99391 3.44295 2.99391 3.80702 3.21846 4.03157L6.68688 7.49999L3.21846 10.9684C2.99391 11.193 2.99391 11.557 3.21846 11.7816C3.44301 12.0061 3.80708 12.0061 4.03164 11.7816L7.50005 8.31316L10.9685 11.7816C11.193 12.0061 11.5571 12.0061 11.7816 11.7816C12.0062 11.557 12.0062 11.193 11.7816 10.9684L8.31322 7.49999L11.7816 4.03157Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})}));Ude.displayName="@mantine/core/CloseIcon";var zde={root:"m_86a44da5","root--subtle":"m_220c80f2"};const nLe={variant:"subtle"},rLe=(e,{size:t,radius:n,iconSize:r})=>({root:{"--cb-size":Wt(t,"cb-size"),"--cb-radius":n===void 0?void 0:vr(n),"--cb-icon-size":we(r)}}),_h=Yi((e,t)=>{const n=_e("CloseButton",nLe,e),{iconSize:r,children:i,vars:o,radius:s,className:a,classNames:u,style:l,styles:c,unstyled:f,"data-disabled":d,disabled:h,variant:p,icon:m,mod:g,...y}=n,v=pt({name:"CloseButton",props:n,className:a,style:l,classes:zde,classNames:u,styles:c,unstyled:f,vars:o,varsResolver:rLe});return b.jsxs(Pi,{ref:t,...y,unstyled:f,variant:p,disabled:h,mod:[{disabled:h||d},g],...v("root",{variant:p,active:!h&&!d}),children:[m||b.jsx(Ude,{}),i]})});_h.classes=zde;_h.displayName="@mantine/core/CloseButton";function iLe(e){return k.Children.toArray(e).filter(Boolean)}var Vde={root:"m_4081bf90"};const oLe={preventGrowOverflow:!0,gap:"md",align:"center",justify:"flex-start",wrap:"wrap"},sLe=(e,{grow:t,preventGrowOverflow:n,gap:r,align:i,justify:o,wrap:s},{childWidth:a})=>({root:{"--group-child-width":t&&n?a:void 0,"--group-gap":_i(r),"--group-align":i,"--group-justify":o,"--group-wrap":s}}),qs=Oe((e,t)=>{const n=_e("Group",oLe,e),{classNames:r,className:i,style:o,styles:s,unstyled:a,children:u,gap:l,align:c,justify:f,wrap:d,grow:h,preventGrowOverflow:p,vars:m,variant:g,__size:y,mod:v,..._}=n,w=iLe(u),E=w.length,S=_i(l??"md"),C={childWidth:`calc(${100/E}% - (${S} - ${S} / ${E}))`},A=pt({name:"Group",props:n,stylesCtx:C,className:i,style:o,classes:Vde,classNames:r,styles:s,unstyled:a,vars:m,varsResolver:sLe});return b.jsx(he,{...A("root"),ref:t,variant:g,mod:[{grow:h},v],size:y,..._,children:w})});qs.classes=Vde;qs.displayName="@mantine/core/Group";var Hde={root:"m_9814e45f"};const aLe={zIndex:Nu("modal")},uLe=(e,{gradient:t,color:n,backgroundOpacity:r,blur:i,radius:o,zIndex:s})=>({root:{"--overlay-bg":t||(n!==void 0||r!==void 0)&&Mc(n||"#000",r??.6)||void 0,"--overlay-filter":i?`blur(${we(i)})`:void 0,"--overlay-radius":o===void 0?void 0:vr(o),"--overlay-z-index":s==null?void 0:s.toString()}}),xT=Yi((e,t)=>{const n=_e("Overlay",aLe,e),{classNames:r,className:i,style:o,styles:s,unstyled:a,vars:u,fixed:l,center:c,children:f,radius:d,zIndex:h,gradient:p,blur:m,color:g,backgroundOpacity:y,mod:v,..._}=n,w=pt({name:"Overlay",props:n,classes:Hde,className:i,style:o,classNames:r,styles:s,unstyled:a,vars:u,varsResolver:uLe});return b.jsx(he,{ref:t,...w("root"),mod:[{center:c,fixed:l},v],..._,children:f})});xT.classes=Hde;xT.displayName="@mantine/core/Overlay";const[lLe,wh]=go("ModalBase component was not found in tree");function cLe({opened:e,transitionDuration:t}){const[n,r]=k.useState(e),i=k.useRef(),s=uD()?0:t;return k.useEffect(()=>(e?(r(!0),window.clearTimeout(i.current)):s===0?r(!1):i.current=window.setTimeout(()=>r(!1),s),()=>window.clearTimeout(i.current)),[e,s]),n}function fLe({id:e,transitionProps:t,opened:n,trapFocus:r,closeOnEscape:i,onClose:o,returnFocus:s}){const a=Js(e),[u,l]=k.useState(!1),[c,f]=k.useState(!1),d=typeof(t==null?void 0:t.duration)=="number"?t==null?void 0:t.duration:200,h=cLe({opened:n,transitionDuration:d});return Hfe("keydown",p=>{var m;p.key==="Escape"&&i&&n&&((m=p.target)==null?void 0:m.getAttribute("data-mantine-stop-propagation"))!=="true"&&o()},{capture:!0}),Bfe({opened:n,shouldReturnFocus:r&&s}),{_id:a,titleMounted:u,bodyMounted:c,shouldLockScroll:h,setTitleMounted:l,setBodyMounted:f}}const qde=k.forwardRef(({keepMounted:e,opened:t,onClose:n,id:r,transitionProps:i,trapFocus:o,closeOnEscape:s,returnFocus:a,closeOnClickOutside:u,withinPortal:l,portalProps:c,lockScroll:f,children:d,zIndex:h,shadow:p,padding:m,__vars:g,unstyled:y,removeScrollProps:v,..._},w)=>{const{_id:E,titleMounted:S,bodyMounted:T,shouldLockScroll:C,setTitleMounted:A,setBodyMounted:R}=fLe({id:r,transitionProps:i,opened:t,trapFocus:o,closeOnEscape:s,onClose:n,returnFocus:a});return b.jsx(f_,{...c,withinPortal:l,children:b.jsx(lLe,{value:{opened:t,onClose:n,closeOnClickOutside:u,transitionProps:{...i,keepMounted:e},getTitleId:()=>`${E}-title`,getBodyId:()=>`${E}-body`,titleMounted:S,bodyMounted:T,setTitleMounted:A,setBodyMounted:R,trapFocus:o,closeOnEscape:s,zIndex:h,unstyled:y},children:b.jsx(sD,{enabled:C&&f,...v,children:b.jsx(he,{ref:w,..._,__vars:{...g,"--mb-z-index":(h||Nu("modal")).toString(),"--mb-shadow":i7(p),"--mb-padding":_i(m)},children:d})})})})});function dLe(){const e=wh();return k.useEffect(()=>(e.setBodyMounted(!0),()=>e.setBodyMounted(!1)),[]),e.getBodyId()}var ob={title:"m_615af6c9",header:"m_b5489c3c",inner:"m_60c222c7",content:"m_fd1ab0aa",close:"m_606cb269",body:"m_5df29311"};const $7=k.forwardRef(({className:e,...t},n)=>{const r=dLe(),i=wh();return b.jsx(he,{ref:n,...t,id:r,className:fi({[ob.body]:!i.unstyled},e)})});$7.displayName="@mantine/core/ModalBaseBody";const M7=k.forwardRef(({className:e,onClick:t,...n},r)=>{const i=wh();return b.jsx(_h,{ref:r,...n,onClick:o=>{i.onClose(),t==null||t(o)},className:fi({[ob.close]:!i.unstyled},e),unstyled:i.unstyled})});M7.displayName="@mantine/core/ModalBaseCloseButton";const Wde=k.forwardRef(({transitionProps:e,className:t,innerProps:n,onKeyDown:r,style:i,...o},s)=>{const a=wh();return b.jsx(vh,{mounted:a.opened,transition:"pop",...a.transitionProps,...e,children:u=>b.jsx("div",{...n,className:fi({[ob.inner]:!a.unstyled},n.className),children:b.jsx(pD,{active:a.opened&&a.trapFocus,children:b.jsx(_y,{...o,component:"section",role:"dialog",tabIndex:-1,"aria-modal":!0,"aria-describedby":a.bodyMounted?a.getBodyId():void 0,"aria-labelledby":a.titleMounted?a.getTitleId():void 0,ref:s,style:[i,u],className:fi({[ob.content]:!a.unstyled},t),unstyled:a.unstyled,children:o.children})})})})}),L7=k.forwardRef(({className:e,...t},n)=>{const r=wh();return b.jsx(he,{component:"header",ref:n,className:fi({[ob.header]:!r.unstyled},e),...t})});L7.displayName="@mantine/core/ModalBaseHeader";const hLe={duration:200,timingFunction:"ease",transition:"fade"};function pLe(e){const t=wh();return{...hLe,...t.transitionProps,...e}}const F7=k.forwardRef(({onClick:e,transitionProps:t,style:n,...r},i)=>{const o=wh(),s=pLe(t);return b.jsx(vh,{mounted:o.opened,...s,transition:"fade",children:a=>b.jsx(xT,{ref:i,fixed:!0,style:[n,a],zIndex:o.zIndex,unstyled:o.unstyled,onClick:u=>{e==null||e(u),o.closeOnClickOutside&&o.onClose()},...r})})});F7.displayName="@mantine/core/ModalBaseOverlay";function mLe(){const e=wh();return k.useEffect(()=>(e.setTitleMounted(!0),()=>e.setTitleMounted(!1)),[]),e.getTitleId()}const j7=k.forwardRef(({className:e,...t},n)=>{const r=mLe(),i=wh();return b.jsx(he,{component:"h2",ref:n,className:fi({[ob.title]:!i.unstyled},e),...t,id:r})});j7.displayName="@mantine/core/ModalBaseTitle";function Gde({children:e}){return b.jsx(b.Fragment,{children:e})}const[gLe,d_]=a_({offsetBottom:!1,offsetTop:!1,describedBy:void 0,getStyles:null,inputId:void 0,labelId:void 0});var ml={wrapper:"m_6c018570",input:"m_8fb7ebe7",section:"m_82577fc2",placeholder:"m_88bacfd0",root:"m_46b77525",label:"m_8fdc1311",required:"m_78a94662",error:"m_8f816625",description:"m_fe47ce59"};const OJ={},yLe=(e,{size:t})=>({description:{"--input-description-size":t===void 0?void 0:`calc(${$o(t)} - ${we(2)})`}}),gD=Oe((e,t)=>{const n=_e("InputDescription",OJ,e),{classNames:r,className:i,style:o,styles:s,unstyled:a,vars:u,size:l,__staticSelector:c,__inheritStyles:f=!0,variant:d,...h}=_e("InputDescription",OJ,n),p=d_(),m=pt({name:["InputWrapper",c],props:n,classes:ml,className:i,style:o,classNames:r,styles:s,unstyled:a,rootSelector:"description",vars:u,varsResolver:yLe}),g=f&&(p==null?void 0:p.getStyles)||m;return b.jsx(he,{component:"p",ref:t,variant:d,size:l,...g("description",p!=null&&p.getStyles?{className:i,style:o}:void 0),...h})});gD.classes=ml;gD.displayName="@mantine/core/InputDescription";const vLe={},bLe=(e,{size:t})=>({error:{"--input-error-size":t===void 0?void 0:`calc(${$o(t)} - ${we(2)})`}}),yD=Oe((e,t)=>{const n=_e("InputError",vLe,e),{classNames:r,className:i,style:o,styles:s,unstyled:a,vars:u,size:l,__staticSelector:c,__inheritStyles:f=!0,variant:d,...h}=n,p=pt({name:["InputWrapper",c],props:n,classes:ml,className:i,style:o,classNames:r,styles:s,unstyled:a,rootSelector:"error",vars:u,varsResolver:bLe}),m=d_(),g=f&&(m==null?void 0:m.getStyles)||p;return b.jsx(he,{component:"p",ref:t,variant:d,size:l,...g("error",m!=null&&m.getStyles?{className:i,style:o}:void 0),...h})});yD.classes=ml;yD.displayName="@mantine/core/InputError";const $J={labelElement:"label"},_Le=(e,{size:t})=>({label:{"--input-label-size":$o(t),"--input-asterisk-color":void 0}}),vD=Oe((e,t)=>{const n=_e("InputLabel",$J,e),{classNames:r,className:i,style:o,styles:s,unstyled:a,vars:u,labelElement:l,size:c,required:f,htmlFor:d,onMouseDown:h,children:p,__staticSelector:m,variant:g,mod:y,...v}=_e("InputLabel",$J,n),_=pt({name:["InputWrapper",m],props:n,classes:ml,className:i,style:o,classNames:r,styles:s,unstyled:a,rootSelector:"label",vars:u,varsResolver:_Le}),w=d_(),E=(w==null?void 0:w.getStyles)||_;return b.jsxs(he,{...E("label",w!=null&&w.getStyles?{className:i,style:o}:void 0),component:l,variant:g,size:c,ref:t,htmlFor:l==="label"?d:void 0,mod:[{required:f},y],onMouseDown:S=>{h==null||h(S),!S.defaultPrevented&&S.detail>1&&S.preventDefault()},...v,children:[p,f&&b.jsx("span",{...E("required"),"aria-hidden":!0,children:" *"})]})});vD.classes=ml;vD.displayName="@mantine/core/InputLabel";const MJ={},B7=Oe((e,t)=>{const n=_e("InputPlaceholder",MJ,e),{classNames:r,className:i,style:o,styles:s,unstyled:a,vars:u,__staticSelector:l,variant:c,error:f,mod:d,...h}=_e("InputPlaceholder",MJ,n),p=pt({name:["InputPlaceholder",l],props:n,classes:ml,className:i,style:o,classNames:r,styles:s,unstyled:a,rootSelector:"placeholder"});return b.jsx(he,{...p("placeholder"),mod:[{error:!!f},d],component:"span",variant:c,ref:t,...h})});B7.classes=ml;B7.displayName="@mantine/core/InputPlaceholder";function wLe(e,{hasDescription:t,hasError:n}){const r=e.findIndex(u=>u==="input"),i=e.slice(0,r),o=e.slice(r+1),s=t&&i.includes("description")||n&&i.includes("error");return{offsetBottom:t&&o.includes("description")||n&&o.includes("error"),offsetTop:s}}const ELe={labelElement:"label",inputContainer:e=>e,inputWrapperOrder:["label","description","input","error"]},xLe=(e,{size:t})=>({label:{"--input-label-size":$o(t),"--input-asterisk-color":void 0},error:{"--input-error-size":t===void 0?void 0:`calc(${$o(t)} - ${we(2)})`},description:{"--input-description-size":t===void 0?void 0:`calc(${$o(t)} - ${we(2)})`}}),U7=Oe((e,t)=>{const n=_e("InputWrapper",ELe,e),{classNames:r,className:i,style:o,styles:s,unstyled:a,vars:u,size:l,variant:c,__staticSelector:f,inputContainer:d,inputWrapperOrder:h,label:p,error:m,description:g,labelProps:y,descriptionProps:v,errorProps:_,labelElement:w,children:E,withAsterisk:S,id:T,required:C,__stylesApiProps:A,mod:R,...N}=n,O=pt({name:["InputWrapper",f],props:A||n,classes:ml,className:i,style:o,classNames:r,styles:s,unstyled:a,vars:u,varsResolver:xLe}),D={size:l,variant:c,__staticSelector:f},M=Js(T),F=typeof S=="boolean"?S:C,L=(_==null?void 0:_.id)||`${M}-error`,B=(v==null?void 0:v.id)||`${M}-description`,U=M,H=!!m&&typeof m!="boolean",P=!!g,z=`${H?L:""} ${P?B:""}`,W=z.trim().length>0?z.trim():void 0,j=(y==null?void 0:y.id)||`${M}-label`,q=p&&b.jsx(vD,{labelElement:w,id:j,htmlFor:U,required:F,...D,...y,children:p},"label"),G=P&&b.jsx(gD,{...v,...D,size:(v==null?void 0:v.size)||D.size,id:(v==null?void 0:v.id)||B,children:g},"description"),te=b.jsx(k.Fragment,{children:d(E)},"input"),pe=H&&k.createElement(yD,{..._,...D,size:(_==null?void 0:_.size)||D.size,key:"error",id:(_==null?void 0:_.id)||L},m),be=h.map(le=>{switch(le){case"label":return q;case"input":return te;case"description":return G;case"error":return pe;default:return null}});return b.jsx(gLe,{value:{getStyles:O,describedBy:W,inputId:U,labelId:j,...wLe(h,{hasDescription:P,hasError:H})},children:b.jsx(he,{ref:t,variant:c,size:l,mod:[{error:!!m},R],...O("root"),...N,children:be})})});U7.classes=ml;U7.displayName="@mantine/core/InputWrapper";const TLe={variant:"default",leftSectionPointerEvents:"none",rightSectionPointerEvents:"none",withAria:!0,withErrorStyles:!0},SLe=(e,t,n)=>({wrapper:{"--input-margin-top":n.offsetTop?"calc(var(--mantine-spacing-xs) / 2)":void 0,"--input-margin-bottom":n.offsetBottom?"calc(var(--mantine-spacing-xs) / 2)":void 0,"--input-height":Wt(t.size,"input-height"),"--input-fz":$o(t.size),"--input-radius":t.radius===void 0?void 0:vr(t.radius),"--input-left-section-width":t.leftSectionWidth!==void 0?we(t.leftSectionWidth):void 0,"--input-right-section-width":t.rightSectionWidth!==void 0?we(t.rightSectionWidth):void 0,"--input-padding-y":t.multiline?Wt(t.size,"input-padding-y"):void 0,"--input-left-section-pointer-events":t.leftSectionPointerEvents,"--input-right-section-pointer-events":t.rightSectionPointerEvents}}),$r=Yi((e,t)=>{const n=_e("Input",TLe,e),{classNames:r,className:i,style:o,styles:s,unstyled:a,required:u,__staticSelector:l,__stylesApiProps:c,size:f,wrapperProps:d,error:h,disabled:p,leftSection:m,leftSectionProps:g,leftSectionWidth:y,rightSection:v,rightSectionProps:_,rightSectionWidth:w,rightSectionPointerEvents:E,leftSectionPointerEvents:S,variant:T,vars:C,pointer:A,multiline:R,radius:N,id:O,withAria:D,withErrorStyles:M,mod:F,inputSize:L,...B}=n,{styleProps:U,rest:H}=by(B),P=d_(),z={offsetBottom:P==null?void 0:P.offsetBottom,offsetTop:P==null?void 0:P.offsetTop},W=pt({name:["Input",l],props:c||n,classes:ml,className:i,style:o,classNames:r,styles:s,unstyled:a,stylesCtx:z,rootSelector:"wrapper",vars:C,varsResolver:SLe}),j=D?{required:u,disabled:p,"aria-invalid":!!h,"aria-describedby":P==null?void 0:P.describedBy,id:(P==null?void 0:P.inputId)||O}:{};return b.jsxs(he,{...W("wrapper"),...U,...d,mod:[{error:!!h&&M,pointer:A,disabled:p,multiline:R,"data-with-right-section":!!v,"data-with-left-section":!!m},F],variant:T,size:f,children:[m&&b.jsx("div",{...g,"data-position":"left",...W("section",{className:g==null?void 0:g.className,style:g==null?void 0:g.style}),children:m}),b.jsx(he,{component:"input",...H,...j,ref:t,required:u,mod:{disabled:p,error:!!h&&M},variant:T,__size:L,...W("input")}),v&&b.jsx("div",{..._,"data-position":"right",...W("section",{className:_==null?void 0:_.className,style:_==null?void 0:_.style}),children:v})]})});$r.classes=ml;$r.Wrapper=U7;$r.Label=vD;$r.Error=yD;$r.Description=gD;$r.Placeholder=B7;$r.displayName="@mantine/core/Input";function Yde(e,t,n){const r=_e(e,t,n),{label:i,description:o,error:s,required:a,classNames:u,styles:l,className:c,unstyled:f,__staticSelector:d,__stylesApiProps:h,errorProps:p,labelProps:m,descriptionProps:g,wrapperProps:y,id:v,size:_,style:w,inputContainer:E,inputWrapperOrder:S,withAsterisk:T,variant:C,vars:A,mod:R,...N}=r,{styleProps:O,rest:D}=by(N),M={label:i,description:o,error:s,required:a,classNames:u,className:c,__staticSelector:d,__stylesApiProps:h||r,errorProps:p,labelProps:m,descriptionProps:g,unstyled:f,styles:l,size:_,style:w,inputContainer:E,inputWrapperOrder:S,withAsterisk:T,variant:C,id:v,mod:R,...y};return{...D,classNames:u,styles:l,unstyled:f,wrapperProps:{...M,...O},inputProps:{required:a,classNames:u,styles:l,unstyled:f,size:_,__staticSelector:d,__stylesApiProps:h||r,error:s,variant:C,id:v}}}const CLe={__staticSelector:"InputBase",withAria:!0},gl=Yi((e,t)=>{const{inputProps:n,wrapperProps:r,...i}=Yde("InputBase",CLe,e);return b.jsx($r.Wrapper,{...r,children:b.jsx($r,{...n,...i,ref:t})})});gl.classes={...$r.classes,...$r.Wrapper.classes};gl.displayName="@mantine/core/InputBase";const ALe={gap:{type:"spacing",property:"gap"},rowGap:{type:"spacing",property:"rowGap"},columnGap:{type:"spacing",property:"columnGap"},align:{type:"identity",property:"alignItems"},justify:{type:"identity",property:"justifyContent"},wrap:{type:"identity",property:"flexWrap"},direction:{type:"identity",property:"flexDirection"}};var Kde={root:"m_8bffd616"};const kLe={},kt=Yi((e,t)=>{const n=_e("Flex",kLe,e),{classNames:r,className:i,style:o,styles:s,unstyled:a,vars:u,gap:l,rowGap:c,columnGap:f,align:d,justify:h,wrap:p,direction:m,...g}=n,y=pt({name:"Flex",classes:Kde,props:n,className:i,style:o,classNames:r,styles:s,unstyled:a,vars:u}),v=Oi(),_=VS(),w=Zfe({styleProps:{gap:l,rowGap:c,columnGap:f,align:d,justify:h,wrap:p,direction:m},theme:v,data:ALe});return b.jsxs(b.Fragment,{children:[w.hasResponsiveStyles&&b.jsx(vy,{selector:`.${_}`,styles:w.styles,media:w.media}),b.jsx(he,{ref:t,...y("root",{className:_,style:Dm(w.inlineStyles)}),...g})]})});kt.classes=Kde;kt.displayName="@mantine/core/Flex";const[ILe,z7]=go("Accordion component was not found in the tree");function sb({style:e,size:t=16,...n}){return b.jsx("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{...e,width:we(t),height:we(t),display:"block"},...n,children:b.jsx("path",{d:"M3.13523 6.15803C3.3241 5.95657 3.64052 5.94637 3.84197 6.13523L7.5 9.56464L11.158 6.13523C11.3595 5.94637 11.6759 5.95657 11.8648 6.15803C12.0536 6.35949 12.0434 6.67591 11.842 6.86477L7.84197 10.6148C7.64964 10.7951 7.35036 10.7951 7.15803 10.6148L3.15803 6.86477C2.95657 6.67591 2.94637 6.35949 3.13523 6.15803Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}sb.displayName="@mantine/core/AccordionChevron";const[RLe,Xde]=go("Accordion.Item component was not found in the tree");var qS={root:"m_9bdbb667",panel:"m_df78851f",content:"m_4ba554d4",itemTitle:"m_8fa820a0",control:"m_4ba585b8","control--default":"m_6939a5e9","control--contained":"m_4271d21b",label:"m_df3ffa0f",chevron:"m_3f35ae96",icon:"m_9bd771fe",item:"m_9bd7b098","item--default":"m_fe19b709","item--contained":"m_1f921b3b","item--filled":"m_2cdf939a","item--separated":"m_9f59b069"};const NLe={},V7=Oe((e,t)=>{const{classNames:n,className:r,style:i,styles:o,vars:s,chevron:a,icon:u,onClick:l,onKeyDown:c,children:f,disabled:d,mod:h,...p}=_e("AccordionControl",NLe,e),{value:m}=Xde(),g=z7(),y=g.isItemActive(m),v=typeof g.order=="number",_=`h${g.order}`,w=b.jsxs(Pi,{...p,...g.getStyles("control",{className:r,classNames:n,style:i,styles:o,variant:g.variant}),unstyled:g.unstyled,mod:["accordion-control",{active:y,"chevron-position":g.chevronPosition,disabled:d},h],ref:t,onClick:E=>{l==null||l(E),g.onChange(m)},type:"button",disabled:d,"aria-expanded":y,"aria-controls":g.getRegionId(m),id:g.getControlId(m),onKeyDown:r7({siblingSelector:"[data-accordion-control]",parentSelector:"[data-accordion]",activateOnFocus:!1,loop:g.loop,orientation:"vertical",onKeyDown:c}),children:[b.jsx(he,{component:"span",mod:{rotate:!g.disableChevronRotation&&y,position:g.chevronPosition},...g.getStyles("chevron",{classNames:n,styles:o}),children:a||g.chevron}),b.jsx("span",{...g.getStyles("label",{classNames:n,styles:o}),children:f}),u&&b.jsx(he,{component:"span",mod:{"chevron-position":g.chevronPosition},...g.getStyles("icon",{classNames:n,styles:o}),children:u})]});return v?b.jsx(_,{...g.getStyles("itemTitle",{classNames:n,styles:o}),children:w}):w});V7.displayName="@mantine/core/AccordionControl";V7.classes=qS;const PLe={},H7=Oe((e,t)=>{const{classNames:n,className:r,style:i,styles:o,vars:s,value:a,mod:u,...l}=_e("AccordionItem",PLe,e),c=z7();return b.jsx(RLe,{value:{value:a},children:b.jsx(he,{ref:t,mod:[{active:c.isItemActive(a)},u],...c.getStyles("item",{className:r,classNames:n,styles:o,style:i,variant:c.variant}),...l})})});H7.displayName="@mantine/core/AccordionItem";H7.classes=qS;const DLe={},q7=Oe((e,t)=>{const{classNames:n,className:r,style:i,styles:o,vars:s,children:a,...u}=_e("AccordionPanel",DLe,e),{value:l}=Xde(),c=z7();return b.jsx(fD,{ref:t,...c.getStyles("panel",{className:r,classNames:n,style:i,styles:o}),...u,in:c.isItemActive(l),transitionDuration:c.transitionDuration??200,role:"region",id:c.getRegionId(l),"aria-labelledby":c.getControlId(l),children:b.jsx("div",{...c.getStyles("content",{classNames:n,styles:o}),children:a})})});q7.displayName="@mantine/core/AccordionPanel";q7.classes=qS;const OLe={multiple:!1,disableChevronRotation:!1,chevronPosition:"right",variant:"default",chevron:b.jsx(sb,{})},$Le=(e,{transitionDuration:t,chevronSize:n,radius:r})=>({root:{"--accordion-transition-duration":t===void 0?void 0:`${t}ms`,"--accordion-chevron-size":n===void 0?void 0:we(n),"--accordion-radius":r===void 0?void 0:vr(r)}});function fa(e){const t=_e("Accordion",OLe,e),{classNames:n,className:r,style:i,styles:o,unstyled:s,vars:a,children:u,multiple:l,value:c,defaultValue:f,onChange:d,id:h,loop:p,transitionDuration:m,disableChevronRotation:g,chevronPosition:y,chevronSize:v,order:_,chevron:w,variant:E,radius:S,...T}=t,C=Js(h),[A,R]=Wi({value:c,defaultValue:f,finalValue:l?[]:null,onChange:d}),N=M=>Array.isArray(A)?A.includes(M):M===A,O=M=>{const F=Array.isArray(A)?A.includes(M)?A.filter(L=>L!==M):[...A,M]:M===A?null:M;R(F)},D=pt({name:"Accordion",classes:qS,props:t,className:r,style:i,classNames:n,styles:o,unstyled:s,vars:a,varsResolver:$Le});return b.jsx(ILe,{value:{isItemActive:N,onChange:O,getControlId:eR(`${C}-control`,"Accordion.Item component was rendered with invalid value or without value"),getRegionId:eR(`${C}-panel`,"Accordion.Item component was rendered with invalid value or without value"),transitionDuration:m,disableChevronRotation:g,chevronPosition:y,order:_,chevron:w,loop:p,getStyles:D,variant:E,unstyled:s},children:b.jsx(he,{...D("root"),id:C,...T,variant:E,"data-accordion":!0,children:u})})}const MLe=e=>e;fa.extend=MLe;fa.classes=qS;fa.displayName="@mantine/core/Accordion";fa.Item=H7;fa.Panel=q7;fa.Control=V7;fa.Chevron=sb;var Qde={root:"m_66836ed3",wrapper:"m_a5d60502",body:"m_667c2793",title:"m_6a03f287",label:"m_698f4f23",icon:"m_667f2a6a",message:"m_7fa78076",closeButton:"m_87f54839"};const LLe={},FLe=(e,{radius:t,color:n,variant:r,autoContrast:i})=>{const o=e.variantColorResolver({color:n||e.primaryColor,theme:e,variant:r||"light",autoContrast:i});return{root:{"--alert-radius":t===void 0?void 0:vr(t),"--alert-bg":n||r?o.background:void 0,"--alert-color":o.color,"--alert-bd":n||r?o.border:void 0}}},h_=Oe((e,t)=>{const n=_e("Alert",LLe,e),{classNames:r,className:i,style:o,styles:s,unstyled:a,vars:u,radius:l,color:c,title:f,children:d,id:h,icon:p,withCloseButton:m,onClose:g,closeButtonLabel:y,variant:v,autoContrast:_,...w}=n,E=pt({name:"Alert",classes:Qde,props:n,className:i,style:o,classNames:r,styles:s,unstyled:a,vars:u,varsResolver:FLe}),S=Js(h),T=f&&`${S}-title`||void 0,C=`${S}-body`;return b.jsx(he,{id:S,...E("root",{variant:v}),variant:v,ref:t,...w,role:"alert","aria-describedby":C,"aria-labelledby":T,children:b.jsxs("div",{...E("wrapper"),children:[p&&b.jsx("div",{...E("icon"),children:p}),b.jsxs("div",{...E("body"),children:[f&&b.jsx("div",{...E("title"),"data-with-close-button":m||void 0,children:b.jsx("span",{id:T,...E("label"),children:f})}),d&&b.jsx("div",{id:C,...E("message"),"data-variant":v,children:d})]}),m&&b.jsx(_h,{...E("closeButton"),onClick:g,variant:"transparent",size:16,iconSize:16,"aria-label":y,unstyled:a})]})})});h_.classes=Qde;h_.displayName="@mantine/core/Alert";var Jde={root:"m_b6d8b162"};function jLe(e){if(e==="start")return"start";if(e==="end"||e)return"end"}const BLe={inherit:!1},ULe=(e,{variant:t,lineClamp:n,gradient:r,size:i,color:o})=>({root:{"--text-fz":$o(i),"--text-lh":jfe(i),"--text-gradient":t==="gradient"?WF(r,e):void 0,"--text-line-clamp":typeof n=="number"?n.toString():void 0,"--text-color":o?ar(o,e):void 0}}),je=Yi((e,t)=>{const n=_e("Text",BLe,e),{lineClamp:r,truncate:i,inline:o,inherit:s,gradient:a,span:u,__staticSelector:l,vars:c,className:f,style:d,classNames:h,styles:p,unstyled:m,variant:g,mod:y,size:v,..._}=n,w=pt({name:["Text",l],props:n,classes:Jde,className:f,style:d,classNames:h,styles:p,unstyled:m,vars:c,varsResolver:ULe});return b.jsx(he,{...w("root",{focusable:!0}),ref:t,component:u?"span":"p",variant:g,mod:[{"data-truncate":jLe(i),"data-line-clamp":typeof r=="number","data-inline":o,"data-inherit":s},y],size:v,..._})});je.classes=Jde;je.displayName="@mantine/core/Text";var Zde={root:"m_849cf0da"};const zLe={underline:"hover"},Mm=Yi((e,t)=>{const{underline:n,className:r,unstyled:i,mod:o,...s}=_e("Anchor",zLe,e);return b.jsx(je,{component:"a",ref:t,className:fi({[Zde.root]:!i},r),...s,mod:[{underline:n},o],__staticSelector:"Anchor",unstyled:i})});Mm.classes=Zde;Mm.displayName="@mantine/core/Anchor";const[VLe,p_]=go("AppShell was not found in tree");var Lm={root:"m_89ab340",navbar:"m_45252eee",aside:"m_9cdde9a",header:"m_3b16f56b",main:"m_8983817",footer:"m_3840c879",section:"m_6dcfc7c7"};const HLe={},W7=Oe((e,t)=>{const n=_e("AppShellAside",HLe,e),{classNames:r,className:i,style:o,styles:s,unstyled:a,vars:u,withBorder:l,zIndex:c,mod:f,...d}=n,h=p_();return h.disabled?null:b.jsx(he,{component:"aside",ref:t,mod:[{"with-border":l??h.withBorder},f],...h.getStyles("aside",{className:i,classNames:r,styles:s,style:o}),...d,__vars:{"--app-shell-aside-z-index":`calc(${c??h.zIndex} + 1)`}})});W7.classes=Lm;W7.displayName="@mantine/core/AppShellAside";const qLe={},G7=Oe((e,t)=>{var p;const n=_e("AppShellFooter",qLe,e),{classNames:r,className:i,style:o,styles:s,unstyled:a,vars:u,withBorder:l,zIndex:c,mod:f,...d}=n,h=p_();return h.disabled?null:b.jsx(he,{component:"footer",ref:t,mod:[{"with-border":l??h.withBorder},f],...h.getStyles("footer",{className:fi({[sD.classNames.zeroRight]:h.offsetScrollbars},i),classNames:r,styles:s,style:o}),...d,__vars:{"--app-shell-footer-z-index":(p=c??h.zIndex)==null?void 0:p.toString()}})});G7.classes=Lm;G7.displayName="@mantine/core/AppShellFooter";const WLe={},Y7=Oe((e,t)=>{var p;const n=_e("AppShellHeader",WLe,e),{classNames:r,className:i,style:o,styles:s,unstyled:a,vars:u,withBorder:l,zIndex:c,mod:f,...d}=n,h=p_();return h.disabled?null:b.jsx(he,{component:"header",ref:t,mod:[{"with-border":l??h.withBorder},f],...h.getStyles("header",{className:fi({[sD.classNames.zeroRight]:h.offsetScrollbars},i),classNames:r,styles:s,style:o}),...d,__vars:{"--app-shell-header-z-index":(p=c??h.zIndex)==null?void 0:p.toString()}})});Y7.classes=Lm;Y7.displayName="@mantine/core/AppShellHeader";const GLe={},K7=Oe((e,t)=>{const n=_e("AppShellMain",GLe,e),{classNames:r,className:i,style:o,styles:s,vars:a,...u}=n,l=p_();return b.jsx(he,{component:"main",ref:t,...l.getStyles("main",{className:i,style:o,classNames:r,styles:s}),...u})});K7.classes=Lm;K7.displayName="@mantine/core/AppShellMain";function WS(e){return typeof e=="object"?e.base:e}function GS(e){const t=typeof e=="object"&&e!==null&&typeof e.base<"u"&&Object.keys(e).length===1;return typeof e=="number"||typeof e=="string"||t}function YS(e){return!(typeof e!="object"||e===null||Object.keys(e).length===1&&"base"in e)}function YLe({baseStyles:e,minMediaStyles:t,maxMediaStyles:n,aside:r,theme:i}){var u,l,c;const o=r==null?void 0:r.width,s="translateX(var(--app-shell-aside-width))",a="translateX(calc(var(--app-shell-aside-width) * -1))";if(r!=null&&r.breakpoint&&!((u=r==null?void 0:r.collapsed)!=null&&u.mobile)&&(n[r==null?void 0:r.breakpoint]=n[r==null?void 0:r.breakpoint]||{},n[r==null?void 0:r.breakpoint]["--app-shell-aside-width"]="100%",n[r==null?void 0:r.breakpoint]["--app-shell-aside-offset"]="0px"),GS(o)){const f=we(WS(o));e["--app-shell-aside-width"]=f,e["--app-shell-aside-offset"]=f}if(YS(o)&&(typeof o.base<"u"&&(e["--app-shell-aside-width"]=we(o.base),e["--app-shell-aside-offset"]=we(o.base)),yr(o).forEach(f=>{f!=="base"&&(t[f]=t[f]||{},t[f]["--app-shell-aside-width"]=we(o[f]),t[f]["--app-shell-aside-offset"]=we(o[f]))})),(l=r==null?void 0:r.collapsed)!=null&&l.desktop){const f=r.breakpoint;t[f]=t[f]||{},t[f]["--app-shell-aside-transform"]=s,t[f]["--app-shell-aside-transform-rtl"]=a,t[f]["--app-shell-aside-offset"]="0px !important"}if((c=r==null?void 0:r.collapsed)!=null&&c.mobile){const f=o7(r.breakpoint,i)-.1;n[f]=n[f]||{},n[f]["--app-shell-aside-width"]="100%",n[f]["--app-shell-aside-offset"]="0px",n[f]["--app-shell-aside-transform"]=s,n[f]["--app-shell-aside-transform-rtl"]=a}}function KLe({baseStyles:e,minMediaStyles:t,footer:n}){const r=n==null?void 0:n.height,i="translateY(var(--app-shell-footer-height))",o=(n==null?void 0:n.offset)??!0;if(GS(r)){const s=we(WS(r));e["--app-shell-footer-height"]=s,o&&(e["--app-shell-footer-offset"]=s)}YS(r)&&(typeof r.base<"u"&&(e["--app-shell-footer-height"]=we(r.base),o&&(e["--app-shell-footer-offset"]=we(r.base))),yr(r).forEach(s=>{s!=="base"&&(t[s]=t[s]||{},t[s]["--app-shell-footer-height"]=we(r[s]),o&&(t[s]["--app-shell-footer-offset"]=we(r[s])))})),n!=null&&n.collapsed&&(e["--app-shell-footer-transform"]=i,e["--app-shell-footer-offset"]="0px !important")}function XLe({baseStyles:e,minMediaStyles:t,header:n}){const r=n==null?void 0:n.height,i="translateY(calc(var(--app-shell-header-height) * -1))",o=(n==null?void 0:n.offset)??!0;if(GS(r)){const s=we(WS(r));e["--app-shell-header-height"]=s,o&&(e["--app-shell-header-offset"]=s)}YS(r)&&(typeof r.base<"u"&&(e["--app-shell-header-height"]=we(r.base),o&&(e["--app-shell-header-offset"]=we(r.base))),yr(r).forEach(s=>{s!=="base"&&(t[s]=t[s]||{},t[s]["--app-shell-header-height"]=we(r[s]),o&&(t[s]["--app-shell-header-offset"]=we(r[s])))})),n!=null&&n.collapsed&&(e["--app-shell-header-transform"]=i,e["--app-shell-header-offset"]="0px !important")}function QLe({baseStyles:e,minMediaStyles:t,maxMediaStyles:n,navbar:r,theme:i}){var u,l,c;const o=r==null?void 0:r.width,s="translateX(calc(var(--app-shell-navbar-width) * -1))",a="translateX(var(--app-shell-navbar-width))";if(r!=null&&r.breakpoint&&!((u=r==null?void 0:r.collapsed)!=null&&u.mobile)&&(n[r==null?void 0:r.breakpoint]=n[r==null?void 0:r.breakpoint]||{},n[r==null?void 0:r.breakpoint]["--app-shell-navbar-width"]="100%",n[r==null?void 0:r.breakpoint]["--app-shell-navbar-offset"]="0px"),GS(o)){const f=we(WS(o));e["--app-shell-navbar-width"]=f,e["--app-shell-navbar-offset"]=f}if(YS(o)&&(typeof o.base<"u"&&(e["--app-shell-navbar-width"]=we(o.base),e["--app-shell-navbar-offset"]=we(o.base)),yr(o).forEach(f=>{f!=="base"&&(t[f]=t[f]||{},t[f]["--app-shell-navbar-width"]=we(o[f]),t[f]["--app-shell-navbar-offset"]=we(o[f]))})),(l=r==null?void 0:r.collapsed)!=null&&l.desktop){const f=r.breakpoint;t[f]=t[f]||{},t[f]["--app-shell-navbar-transform"]=s,t[f]["--app-shell-navbar-transform-rtl"]=a,t[f]["--app-shell-navbar-offset"]="0px !important"}if((c=r==null?void 0:r.collapsed)!=null&&c.mobile){const f=o7(r.breakpoint,i)-.1;n[f]=n[f]||{},n[f]["--app-shell-navbar-width"]="100%",n[f]["--app-shell-navbar-offset"]="0px",n[f]["--app-shell-navbar-transform"]=s,n[f]["--app-shell-navbar-transform-rtl"]=a}}function lL(e){return Number(e)===0?"0px":_i(e)}function JLe({padding:e,baseStyles:t,minMediaStyles:n}){GS(e)&&(t["--app-shell-padding"]=lL(WS(e))),YS(e)&&(e.base&&(t["--app-shell-padding"]=lL(e.base)),yr(e).forEach(r=>{r!=="base"&&(n[r]=n[r]||{},n[r]["--app-shell-padding"]=lL(e[r]))}))}function ZLe({navbar:e,header:t,footer:n,aside:r,padding:i,theme:o}){const s={},a={},u={};QLe({baseStyles:u,minMediaStyles:s,maxMediaStyles:a,navbar:e,theme:o}),YLe({baseStyles:u,minMediaStyles:s,maxMediaStyles:a,aside:r,theme:o}),XLe({baseStyles:u,minMediaStyles:s,header:t}),KLe({baseStyles:u,minMediaStyles:s,footer:n}),JLe({baseStyles:u,minMediaStyles:s,padding:i});const l=_T(yr(s),o).map(d=>({query:`(min-width: ${ZI(d.px)})`,styles:s[d.value]})),c=_T(yr(a),o).map(d=>({query:`(max-width: ${ZI(d.px)})`,styles:a[d.value]})),f=[...l,...c];return{baseStyles:u,media:f}}function e6e({navbar:e,header:t,aside:n,footer:r,padding:i}){const o=Oi(),s=$m(),{media:a,baseStyles:u}=ZLe({navbar:e,header:t,footer:r,aside:n,padding:i,theme:o});return b.jsx(vy,{media:a,styles:u,selector:s.cssVariablesSelector})}const t6e={},X7=Oe((e,t)=>{const n=_e("AppShellNavbar",t6e,e),{classNames:r,className:i,style:o,styles:s,unstyled:a,vars:u,withBorder:l,zIndex:c,mod:f,...d}=n,h=p_();return h.disabled?null:b.jsx(he,{component:"nav",ref:t,mod:[{"with-border":l??h.withBorder},f],...h.getStyles("navbar",{className:i,classNames:r,styles:s,style:o}),...d,__vars:{"--app-shell-navbar-z-index":`calc(${c??h.zIndex} + 1)`}})});X7.classes=Lm;X7.displayName="@mantine/core/AppShellNavbar";const n6e={},Q7=Yi((e,t)=>{const n=_e("AppShellSection",n6e,e),{classNames:r,className:i,style:o,styles:s,vars:a,grow:u,mod:l,...c}=n,f=p_();return b.jsx(he,{ref:t,mod:[{grow:u},l],...f.getStyles("section",{className:i,style:o,classNames:r,styles:s}),...c})});Q7.classes=Lm;Q7.displayName="@mantine/core/AppShellSection";function r6e({transitionDuration:e,disabled:t}){const[n,r]=k.useState(!0),i=k.useRef(),o=k.useRef();return Hfe("resize",()=>{r(!0),clearTimeout(i.current),i.current=window.setTimeout(()=>r(!1),200)}),gy(()=>{k.startTransition(()=>{r(!0),clearTimeout(o.current),o.current=window.setTimeout(()=>r(!1),e||0)})},[t,e]),n}const i6e={withBorder:!0,offsetScrollbars:!0,padding:0,transitionDuration:200,transitionTimingFunction:"ease",zIndex:Nu("app")},o6e=(e,{transitionDuration:t,transitionTimingFunction:n})=>({root:{"--app-shell-transition-duration":`${t}ms`,"--app-shell-transition-timing-function":n}}),Or=Oe((e,t)=>{const n=_e("AppShell",i6e,e),{classNames:r,className:i,style:o,styles:s,unstyled:a,vars:u,navbar:l,withBorder:c,padding:f,transitionDuration:d,transitionTimingFunction:h,header:p,zIndex:m,layout:g,disabled:y,aside:v,footer:_,offsetScrollbars:w,mod:E,...S}=n,T=pt({name:"AppShell",classes:Lm,props:n,className:i,style:o,classNames:r,styles:s,unstyled:a,vars:u,varsResolver:o6e}),C=r6e({disabled:y,transitionDuration:d});return b.jsxs(VLe,{value:{getStyles:T,withBorder:c,zIndex:m,disabled:y,offsetScrollbars:w},children:[b.jsx(e6e,{navbar:l,header:p,aside:v,footer:_,padding:f}),b.jsx(he,{ref:t,...T("root"),mod:[{resizing:C,layout:g,disabled:y},E],...S})]})});Or.classes=Lm;Or.displayName="@mantine/core/AppShell";Or.Navbar=X7;Or.Header=Y7;Or.Main=K7;Or.Aside=W7;Or.Footer=G7;Or.Section=Q7;function ehe(e){return typeof e=="string"?{value:e,label:e}:"value"in e&&!("label"in e)?{value:e.value,label:e.value,disabled:e.disabled}:typeof e=="number"?{value:e.toString(),label:e.toString()}:"group"in e?{group:e.group,items:e.items.map(t=>ehe(t))}:e}function the(e){return e?e.map(t=>ehe(t)):[]}function J7(e){return e.reduce((t,n)=>"group"in n?{...t,...J7(n.items)}:(t[n.value]=n,t),{})}var La={dropdown:"m_88b62a41",options:"m_b2821a6e",option:"m_92253aa5",search:"m_985517d8",empty:"m_2530cd1d",header:"m_858f94bd",footer:"m_82b967cb",group:"m_254f3e4f",groupLabel:"m_2bb2e9e5",chevron:"m_2943220b",optionsDropdownOption:"m_390b5f4",optionsDropdownCheckIcon:"m_8ee53fc2"};const s6e={error:null},a6e=(e,{size:t})=>({chevron:{"--combobox-chevron-size":Wt(t,"combobox-chevron-size")}}),Z7=Oe((e,t)=>{const n=_e("ComboboxChevron",s6e,e),{size:r,error:i,style:o,className:s,classNames:a,styles:u,unstyled:l,vars:c,mod:f,...d}=n,h=pt({name:"ComboboxChevron",classes:La,props:n,style:o,className:s,classNames:a,styles:u,unstyled:l,vars:c,varsResolver:a6e,rootSelector:"chevron"});return b.jsx(he,{component:"svg",...d,...h("chevron"),size:r,viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",mod:["combobox-chevron",{error:i},f],ref:t,children:b.jsx("path",{d:"M4.93179 5.43179C4.75605 5.60753 4.75605 5.89245 4.93179 6.06819C5.10753 6.24392 5.39245 6.24392 5.56819 6.06819L7.49999 4.13638L9.43179 6.06819C9.60753 6.24392 9.89245 6.24392 10.0682 6.06819C10.2439 5.89245 10.2439 5.60753 10.0682 5.43179L7.81819 3.18179C7.73379 3.0974 7.61933 3.04999 7.49999 3.04999C7.38064 3.04999 7.26618 3.0974 7.18179 3.18179L4.93179 5.43179ZM10.0682 9.56819C10.2439 9.39245 10.2439 9.10753 10.0682 8.93179C9.89245 8.75606 9.60753 8.75606 9.43179 8.93179L7.49999 10.8636L5.56819 8.93179C5.39245 8.75606 5.10753 8.75606 4.93179 8.93179C4.75605 9.10753 4.75605 9.39245 4.93179 9.56819L7.18179 11.8182C7.35753 11.9939 7.64245 11.9939 7.81819 11.8182L10.0682 9.56819Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})});Z7.classes=La;Z7.displayName="@mantine/core/ComboboxChevron";const[u6e,yl]=go("Combobox component was not found in tree"),nhe=k.forwardRef(({size:e,onMouseDown:t,onClick:n,onClear:r,...i},o)=>b.jsx(_h,{ref:o,size:e||"sm",variant:"transparent",tabIndex:-1,"aria-hidden":!0,...i,onMouseDown:s=>{s.preventDefault(),t==null||t(s)},onClick:s=>{r(),n==null||n(s)}}));nhe.displayName="@mantine/core/ComboboxClearButton";const l6e={},eU=Oe((e,t)=>{const{classNames:n,styles:r,className:i,style:o,hidden:s,...a}=_e("ComboboxDropdown",l6e,e),u=yl();return b.jsx(Mo.Dropdown,{...a,ref:t,role:"presentation","data-hidden":s||void 0,...u.getStyles("dropdown",{className:i,style:o,classNames:n,styles:r})})});eU.classes=La;eU.displayName="@mantine/core/ComboboxDropdown";const c6e={refProp:"ref"},rhe=Oe((e,t)=>{const{children:n,refProp:r}=_e("ComboboxDropdownTarget",c6e,e);if(yl(),!Om(n))throw new Error("Combobox.DropdownTarget component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");return b.jsx(Mo.Target,{ref:t,refProp:r,children:n})});rhe.displayName="@mantine/core/ComboboxDropdownTarget";const f6e={},tU=Oe((e,t)=>{const{classNames:n,className:r,style:i,styles:o,vars:s,...a}=_e("ComboboxEmpty",f6e,e),u=yl();return b.jsx(he,{ref:t,...u.getStyles("empty",{className:r,classNames:n,styles:o,style:i}),...a})});tU.classes=La;tU.displayName="@mantine/core/ComboboxEmpty";function nU({onKeyDown:e,withKeyboardNavigation:t,withAriaAttributes:n,withExpandedAttribute:r,targetType:i,autoComplete:o}){const s=yl(),[a,u]=k.useState(null),l=f=>{if(e==null||e(f),!s.readOnly&&t){if(f.nativeEvent.isComposing)return;if(f.nativeEvent.code==="ArrowDown"&&(f.preventDefault(),s.store.dropdownOpened?u(s.store.selectNextOption()):(s.store.openDropdown("keyboard"),u(s.store.selectActiveOption()))),f.nativeEvent.code==="ArrowUp"&&(f.preventDefault(),s.store.dropdownOpened?u(s.store.selectPreviousOption()):(s.store.openDropdown("keyboard"),u(s.store.selectActiveOption()))),f.nativeEvent.code==="Enter"||f.nativeEvent.code==="NumpadEnter"){if(f.nativeEvent.keyCode===229)return;const d=s.store.getSelectedOptionIndex();s.store.dropdownOpened&&d!==-1?(f.preventDefault(),s.store.clickSelectedOption()):i==="button"&&(f.preventDefault(),s.store.openDropdown("keyboard"))}f.nativeEvent.code==="Escape"&&s.store.closeDropdown("keyboard"),f.nativeEvent.code==="Space"&&i==="button"&&(f.preventDefault(),s.store.toggleDropdown("keyboard"))}};return{...n?{"aria-haspopup":"listbox","aria-expanded":r&&!!(s.store.listId&&s.store.dropdownOpened)||void 0,"aria-controls":s.store.listId,"aria-activedescendant":s.store.dropdownOpened&&a||void 0,autoComplete:o,"data-expanded":s.store.dropdownOpened||void 0,"data-mantine-stop-propagation":s.store.dropdownOpened||void 0}:{},onKeyDown:l}}const d6e={refProp:"ref",targetType:"input",withKeyboardNavigation:!0,withAriaAttributes:!0,withExpandedAttribute:!1,autoComplete:"off"},ihe=Oe((e,t)=>{const{children:n,refProp:r,withKeyboardNavigation:i,withAriaAttributes:o,withExpandedAttribute:s,targetType:a,autoComplete:u,...l}=_e("ComboboxEventsTarget",d6e,e);if(!Om(n))throw new Error("Combobox.EventsTarget component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const c=yl(),f=nU({targetType:a,withAriaAttributes:o,withKeyboardNavigation:i,withExpandedAttribute:s,onKeyDown:n.props.onKeyDown,autoComplete:u});return k.cloneElement(n,{...f,...l,[r]:Gi(t,c.store.targetRef,n==null?void 0:n.ref)})});ihe.displayName="@mantine/core/ComboboxEventsTarget";const h6e={},rU=Oe((e,t)=>{const{classNames:n,className:r,style:i,styles:o,vars:s,...a}=_e("ComboboxFooter",h6e,e),u=yl();return b.jsx(he,{ref:t,...u.getStyles("footer",{className:r,classNames:n,style:i,styles:o}),...a})});rU.classes=La;rU.displayName="@mantine/core/ComboboxFooter";const p6e={},iU=Oe((e,t)=>{const{classNames:n,className:r,style:i,styles:o,vars:s,children:a,label:u,...l}=_e("ComboboxGroup",p6e,e),c=yl();return b.jsxs(he,{ref:t,...c.getStyles("group",{className:r,classNames:n,style:i,styles:o}),...l,children:[u&&b.jsx("div",{...c.getStyles("groupLabel",{classNames:n,styles:o}),children:u}),a]})});iU.classes=La;iU.displayName="@mantine/core/ComboboxGroup";const m6e={},oU=Oe((e,t)=>{const{classNames:n,className:r,style:i,styles:o,vars:s,...a}=_e("ComboboxHeader",m6e,e),u=yl();return b.jsx(he,{ref:t,...u.getStyles("header",{className:r,classNames:n,style:i,styles:o}),...a})});oU.classes=La;oU.displayName="@mantine/core/ComboboxHeader";function ohe({value:e,valuesDivider:t=",",...n}){return b.jsx("input",{type:"hidden",value:Array.isArray(e)?e.join(t):e||"",...n})}ohe.displayName="@mantine/core/ComboboxHiddenInput";const g6e={},sU=Oe((e,t)=>{const n=_e("ComboboxOption",g6e,e),{classNames:r,className:i,style:o,styles:s,vars:a,onClick:u,id:l,active:c,onMouseDown:f,onMouseOver:d,disabled:h,selected:p,mod:m,...g}=n,y=yl(),v=k.useId(),_=l||v;return b.jsx(he,{...y.getStyles("option",{className:i,classNames:r,styles:s,style:o}),...g,ref:t,id:_,mod:["combobox-option",{"combobox-active":c,"combobox-disabled":h,"combobox-selected":p},m],role:"option",onClick:w=>{var E;h?w.preventDefault():((E=y.onOptionSubmit)==null||E.call(y,n.value,n),u==null||u(w))},onMouseDown:w=>{w.preventDefault(),f==null||f(w)},onMouseOver:w=>{y.resetSelectionOnOptionHover&&y.store.resetSelectedOption(),d==null||d(w)}})});sU.classes=La;sU.displayName="@mantine/core/ComboboxOption";const y6e={},aU=Oe((e,t)=>{const n=_e("ComboboxOptions",y6e,e),{classNames:r,className:i,style:o,styles:s,id:a,onMouseDown:u,labelledBy:l,...c}=n,f=yl(),d=Js(a);return k.useEffect(()=>{f.store.setListId(d)},[d]),b.jsx(he,{ref:t,...f.getStyles("options",{className:i,style:o,classNames:r,styles:s}),...c,id:d,role:"listbox","aria-labelledby":l,onMouseDown:h=>{h.preventDefault(),u==null||u(h)}})});aU.classes=La;aU.displayName="@mantine/core/ComboboxOptions";const v6e={withAriaAttributes:!0,withKeyboardNavigation:!0},uU=Oe((e,t)=>{const n=_e("ComboboxSearch",v6e,e),{classNames:r,styles:i,unstyled:o,vars:s,withAriaAttributes:a,onKeyDown:u,withKeyboardNavigation:l,size:c,...f}=n,d=yl(),h=d.getStyles("search"),p=nU({targetType:"input",withAriaAttributes:a,withKeyboardNavigation:l,withExpandedAttribute:!1,onKeyDown:u,autoComplete:"off"});return b.jsx($r,{ref:Gi(t,d.store.searchRef),classNames:[{input:h.className},r],styles:[{input:h.style},i],size:c||d.size,...p,...f,__staticSelector:"Combobox"})});uU.classes=La;uU.displayName="@mantine/core/ComboboxSearch";const b6e={refProp:"ref",targetType:"input",withKeyboardNavigation:!0,withAriaAttributes:!0,withExpandedAttribute:!1,autoComplete:"off"},she=Oe((e,t)=>{const{children:n,refProp:r,withKeyboardNavigation:i,withAriaAttributes:o,withExpandedAttribute:s,targetType:a,autoComplete:u,...l}=_e("ComboboxTarget",b6e,e);if(!Om(n))throw new Error("Combobox.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const c=yl(),f=nU({targetType:a,withAriaAttributes:o,withKeyboardNavigation:i,withExpandedAttribute:s,onKeyDown:n.props.onKeyDown,autoComplete:u}),d=k.cloneElement(n,{...f,...l});return b.jsx(Mo.Target,{ref:Gi(t,c.store.targetRef),children:d})});she.displayName="@mantine/core/ComboboxTarget";function _6e(e,t,n){for(let r=e-1;r>=0;r-=1)if(!t[r].hasAttribute("data-combobox-disabled"))return r;if(n){for(let r=t.length-1;r>-1;r-=1)if(!t[r].hasAttribute("data-combobox-disabled"))return r}return e}function w6e(e,t,n){for(let r=e+1;r<t.length;r+=1)if(!t[r].hasAttribute("data-combobox-disabled"))return r;if(n){for(let r=0;r<t.length;r+=1)if(!t[r].hasAttribute("data-combobox-disabled"))return r}return e}function E6e(e){for(let t=0;t<e.length;t+=1)if(!e[t].hasAttribute("data-combobox-disabled"))return t;return-1}function lU({defaultOpened:e,opened:t,onOpenedChange:n,onDropdownClose:r,onDropdownOpen:i,loop:o=!0,scrollBehavior:s="instant"}={}){const[a,u]=Wi({value:t,defaultValue:e,finalValue:!1,onChange:n}),l=k.useRef(null),c=k.useRef(-1),f=k.useRef(null),d=k.useRef(null),h=k.useRef(-1),p=k.useRef(-1),m=k.useRef(-1),g=k.useCallback((L="unknown")=>{a||(u(!0),i==null||i(L))},[u,i,a]),y=k.useCallback((L="unknown")=>{a&&(u(!1),r==null||r(L))},[u,r,a]),v=k.useCallback((L="unknown")=>{a?y(L):g(L)},[y,g,a]),_=k.useCallback(()=>{const L=document.querySelector(`#${l.current} [data-combobox-selected]`);L==null||L.removeAttribute("data-combobox-selected"),L==null||L.removeAttribute("aria-selected")},[]),w=k.useCallback(L=>{const B=document.getElementById(l.current),U=B==null?void 0:B.querySelectorAll("[data-combobox-option]");if(!U)return null;const H=L>=U.length?0:L<0?U.length-1:L;return c.current=H,U!=null&&U[H]&&!U[H].hasAttribute("data-combobox-disabled")?(_(),U[H].setAttribute("data-combobox-selected","true"),U[H].setAttribute("aria-selected","true"),U[H].scrollIntoView({block:"nearest",behavior:s}),U[H].id):null},[s,_]),E=k.useCallback(()=>{const L=document.querySelector(`#${l.current} [data-combobox-active]`);if(L){const B=document.querySelectorAll(`#${l.current} [data-combobox-option]`),U=Array.from(B).findIndex(H=>H===L);return w(U)}return w(0)},[w]),S=k.useCallback(()=>w(w6e(c.current,document.querySelectorAll(`#${l.current} [data-combobox-option]`),o)),[w,o]),T=k.useCallback(()=>w(_6e(c.current,document.querySelectorAll(`#${l.current} [data-combobox-option]`),o)),[w,o]),C=k.useCallback(()=>w(E6e(document.querySelectorAll(`#${l.current} [data-combobox-option]`))),[w]),A=k.useCallback((L="selected",B)=>{m.current=window.setTimeout(()=>{var P;const U=document.querySelectorAll(`#${l.current} [data-combobox-option]`),H=Array.from(U).findIndex(z=>z.hasAttribute(`data-combobox-${L}`));c.current=H,B!=null&&B.scrollIntoView&&((P=U[H])==null||P.scrollIntoView({block:"nearest",behavior:s}))},0)},[]),R=k.useCallback(()=>{c.current=-1,_()},[_]),N=k.useCallback(()=>{const L=document.querySelectorAll(`#${l.current} [data-combobox-option]`),B=L==null?void 0:L[c.current];B==null||B.click()},[]),O=k.useCallback(L=>{l.current=L},[]),D=k.useCallback(()=>{h.current=window.setTimeout(()=>f.current.focus(),0)},[]),M=k.useCallback(()=>{p.current=window.setTimeout(()=>d.current.focus(),0)},[]),F=k.useCallback(()=>c.current,[]);return k.useEffect(()=>()=>{window.clearTimeout(h.current),window.clearTimeout(p.current),window.clearTimeout(m.current)},[]),{dropdownOpened:a,openDropdown:g,closeDropdown:y,toggleDropdown:v,selectedOptionIndex:c.current,getSelectedOptionIndex:F,selectOption:w,selectFirstOption:C,selectActiveOption:E,selectNextOption:S,selectPreviousOption:T,resetSelectedOption:R,updateSelectedOptionIndex:A,listId:l.current,setListId:O,clickSelectedOption:N,searchRef:f,focusSearchInput:D,targetRef:d,focusTarget:M}}const x6e={keepMounted:!0,withinPortal:!0,resetSelectionOnOptionHover:!1,width:"target",transitionProps:{transition:"fade",duration:0}},T6e=(e,{size:t,dropdownPadding:n})=>({options:{"--combobox-option-fz":$o(t),"--combobox-option-padding":Wt(t,"combobox-option-padding")},dropdown:{"--combobox-padding":n===void 0?void 0:we(n),"--combobox-option-fz":$o(t),"--combobox-option-padding":Wt(t,"combobox-option-padding")}});function An(e){const t=_e("Combobox",x6e,e),{classNames:n,styles:r,unstyled:i,children:o,store:s,vars:a,onOptionSubmit:u,onClose:l,size:c,dropdownPadding:f,resetSelectionOnOptionHover:d,__staticSelector:h,readOnly:p,...m}=t,g=lU(),y=s||g,v=pt({name:h||"Combobox",classes:La,props:t,classNames:n,styles:r,unstyled:i,vars:a,varsResolver:T6e}),_=()=>{l==null||l(),y.closeDropdown()};return b.jsx(u6e,{value:{getStyles:v,store:y,onOptionSubmit:u,size:c,resetSelectionOnOptionHover:d,readOnly:p},children:b.jsx(Mo,{opened:y.dropdownOpened,...m,onClose:_,withRoles:!1,unstyled:i,children:o})})}const S6e=e=>e;An.extend=S6e;An.classes=La;An.displayName="@mantine/core/Combobox";An.Target=she;An.Dropdown=eU;An.Options=aU;An.Option=sU;An.Search=uU;An.Empty=tU;An.Chevron=Z7;An.Footer=rU;An.Header=oU;An.EventsTarget=ihe;An.DropdownTarget=rhe;An.Group=iU;An.ClearButton=nhe;An.HiddenInput=ohe;var ahe={root:"m_5f75b09e",body:"m_5f6e695e",labelWrapper:"m_d3ea56bb",label:"m_8ee546b8",description:"m_328f68c0",error:"m_8e8a99cc"};const uhe=ahe,bD=k.forwardRef(({__staticSelector:e,__stylesApiProps:t,className:n,classNames:r,styles:i,unstyled:o,children:s,label:a,description:u,id:l,disabled:c,error:f,size:d,labelPosition:h="left",bodyElement:p="div",labelElement:m="label",variant:g,style:y,vars:v,mod:_,...w},E)=>{const S=pt({name:e,props:t,className:n,style:y,classes:ahe,classNames:r,styles:i,unstyled:o});return b.jsx(he,{...S("root"),ref:E,__vars:{"--label-fz":$o(d),"--label-lh":Wt(d,"label-lh")},mod:[{"label-position":h},_],variant:g,size:d,...w,children:b.jsxs(he,{component:p,htmlFor:p==="label"?l:void 0,...S("body"),children:[s,b.jsxs("div",{...S("labelWrapper"),"data-disabled":c||void 0,children:[a&&b.jsx(he,{component:m,htmlFor:m==="label"?l:void 0,...S("label"),"data-disabled":c||void 0,children:a}),u&&b.jsx($r.Description,{size:d,__inheritStyles:!1,...S("description"),children:u}),f&&typeof f!="boolean"&&b.jsx($r.Error,{size:d,__inheritStyles:!1,...S("error"),children:f})]})]})})});bD.displayName="@mantine/core/InlineInput";const lhe=k.createContext(null),C6e=lhe.Provider,che=()=>k.useContext(lhe),[A6e,k6e]=a_();var fhe={card:"m_26775b0a"};const I6e={withBorder:!0},R6e=(e,{radius:t})=>({card:{"--card-radius":vr(t)}}),cU=Oe((e,t)=>{const n=_e("CheckboxCard",I6e,e),{classNames:r,className:i,style:o,styles:s,unstyled:a,vars:u,checked:l,mod:c,withBorder:f,value:d,onClick:h,...p}=n,m=pt({name:"CheckboxCard",classes:fhe,props:n,className:i,style:o,classNames:r,styles:s,unstyled:a,vars:u,varsResolver:R6e,rootSelector:"card"}),g=che(),y=typeof l=="boolean"?l:(g==null?void 0:g.value.includes(d||""))||!1;return b.jsx(A6e,{value:{checked:y},children:b.jsx(Pi,{ref:t,mod:[{"with-border":f,checked:y},c],...m("card"),...p,role:"checkbox","aria-checked":y,onClick:v=>{h==null||h(v),g==null||g.onChange(d||"")}})})});cU.displayName="@mantine/core/CheckboxCard";cU.classes=fhe;function fU({children:e,role:t}){const n=d_();return n?b.jsx("div",{role:t,"aria-labelledby":n.labelId,"aria-describedby":n.describedBy,children:e}):b.jsx(b.Fragment,{children:e})}const N6e={},dU=Oe((e,t)=>{const{value:n,defaultValue:r,onChange:i,size:o,wrapperProps:s,children:a,readOnly:u,...l}=_e("CheckboxGroup",N6e,e),[c,f]=Wi({value:n,defaultValue:r,finalValue:[],onChange:i}),d=h=>{const p=typeof h=="string"?h:h.currentTarget.value;!u&&f(c.includes(p)?c.filter(m=>m!==p):[...c,p])};return b.jsx(C6e,{value:{value:c,onChange:d,size:o},children:b.jsx($r.Wrapper,{size:o,ref:t,...s,...l,labelElement:"div",__staticSelector:"CheckboxGroup",children:b.jsx(fU,{role:"group",children:a})})})});dU.classes=$r.Wrapper.classes;dU.displayName="@mantine/core/CheckboxGroup";function dhe({size:e,style:t,...n}){const r=e!==void 0?{width:we(e),height:we(e),...t}:t;return b.jsx("svg",{viewBox:"0 0 10 7",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:r,"aria-hidden":!0,...n,children:b.jsx("path",{d:"M4 4.586L1.707 2.293A1 1 0 1 0 .293 3.707l3 3a.997.997 0 0 0 1.414 0l5-5A1 1 0 1 0 8.293.293L4 4.586z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}function hhe({indeterminate:e,...t}){return e?b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 32 6","aria-hidden":!0,...t,children:b.jsx("rect",{width:"32",height:"6",fill:"currentColor",rx:"3"})}):b.jsx(dhe,{...t})}var phe={indicator:"m_5e5256ee",icon:"m_1b1c543a","indicator--outline":"m_76e20374"};const P6e={icon:hhe},D6e=(e,{radius:t,color:n,size:r,iconColor:i,variant:o,autoContrast:s})=>{const a=Nf({color:n||e.primaryColor,theme:e}),u=a.isThemeColor&&a.shade===void 0?`var(--mantine-color-${a.color}-outline)`:a.color;return{indicator:{"--checkbox-size":Wt(r,"checkbox-size"),"--checkbox-radius":t===void 0?void 0:vr(t),"--checkbox-color":o==="outline"?u:ar(n,e),"--checkbox-icon-color":i?ar(i,e):u_(s,e)?yy({color:n,theme:e,autoContrast:s}):void 0}}},hU=Oe((e,t)=>{const n=_e("CheckboxIndicator",P6e,e),{classNames:r,className:i,style:o,styles:s,unstyled:a,vars:u,icon:l,indeterminate:c,radius:f,color:d,iconColor:h,autoContrast:p,checked:m,mod:g,variant:y,disabled:v,..._}=n,w=l,E=pt({name:"CheckboxIndicator",classes:phe,props:n,className:i,style:o,classNames:r,styles:s,unstyled:a,vars:u,varsResolver:D6e,rootSelector:"indicator"}),S=k6e(),T=typeof m=="boolean"||typeof c=="boolean"?m||c:(S==null?void 0:S.checked)||!1;return b.jsx(he,{ref:t,...E("indicator",{variant:y}),variant:y,mod:[{checked:T,disabled:v},g],..._,children:b.jsx(w,{indeterminate:c,...E("icon")})})});hU.displayName="@mantine/core/CheckboxIndicator";hU.classes=phe;var mhe={root:"m_bf2d988c",inner:"m_26062bec",input:"m_26063560",icon:"m_bf295423","input--outline":"m_215c4542"};const O6e={labelPosition:"right",icon:hhe},$6e=(e,{radius:t,color:n,size:r,iconColor:i,variant:o,autoContrast:s})=>{const a=Nf({color:n||e.primaryColor,theme:e}),u=a.isThemeColor&&a.shade===void 0?`var(--mantine-color-${a.color}-outline)`:a.color;return{root:{"--checkbox-size":Wt(r,"checkbox-size"),"--checkbox-radius":t===void 0?void 0:vr(t),"--checkbox-color":o==="outline"?u:ar(n,e),"--checkbox-icon-color":i?ar(i,e):u_(s,e)?yy({color:n,theme:e,autoContrast:s}):void 0}}},ru=Oe((e,t)=>{const n=_e("Checkbox",O6e,e),{classNames:r,className:i,style:o,styles:s,unstyled:a,vars:u,color:l,label:c,id:f,size:d,radius:h,wrapperProps:p,children:m,checked:g,labelPosition:y,description:v,error:_,disabled:w,variant:E,indeterminate:S,icon:T,rootRef:C,iconColor:A,onChange:R,autoContrast:N,mod:O,...D}=n,M=che(),F=d||(M==null?void 0:M.size),L=T,B=pt({name:"Checkbox",props:n,classes:mhe,className:i,style:o,classNames:r,styles:s,unstyled:a,vars:u,varsResolver:$6e}),{styleProps:U,rest:H}=by(D),P=Js(f),z=M?{checked:M.value.includes(H.value),onChange:W=>{M.onChange(W),R==null||R(W)}}:{};return b.jsx(bD,{...B("root"),__staticSelector:"Checkbox",__stylesApiProps:n,id:P,size:F,labelPosition:y,label:c,description:v,error:_,disabled:w,classNames:r,styles:s,unstyled:a,"data-checked":z.checked||g||void 0,variant:E,ref:C,mod:O,...U,...p,children:b.jsxs(he,{...B("inner"),mod:{"data-label-position":y},children:[b.jsx(he,{component:"input",id:P,ref:t,checked:g,disabled:w,mod:{error:!!_,indeterminate:S},...B("input",{focusable:!0,variant:E}),onChange:R,...H,...z,type:"checkbox"}),b.jsx(L,{indeterminate:S,...B("icon")})]})})});ru.classes={...mhe,...uhe};ru.displayName="@mantine/core/Checkbox";ru.Group=dU;ru.Indicator=hU;ru.Card=cU;function ab(e){return"group"in e}function ghe({options:e,search:t,limit:n}){const r=t.trim().toLowerCase(),i=[];for(let o=0;o<e.length;o+=1){const s=e[o];if(i.length===n)return i;ab(s)&&i.push({group:s.group,items:ghe({options:s.items,search:t,limit:n-i.length})}),ab(s)||s.label.toLowerCase().includes(r)&&i.push(s)}return i}function M6e(e){if(e.length===0)return!0;for(const t of e)if(!("group"in t)||t.items.length>0)return!1;return!0}function yhe(e,t=new Set){if(Array.isArray(e))for(const n of e)if(ab(n))yhe(n.items,t);else{if(typeof n.value>"u")throw new Error("[@mantine/core] Each option must have value property");if(typeof n.value!="string")throw new Error(`[@mantine/core] Option value must be a string, other data formats are not supported, got ${typeof n.value}`);if(t.has(n.value))throw new Error(`[@mantine/core] Duplicate options are not supported. Option with value "${n.value}" was provided more than once`);t.add(n.value)}}function L6e(e,t){return Array.isArray(e)?e.includes(t):e===t}function vhe({data:e,withCheckIcon:t,value:n,checkIconPosition:r,unstyled:i,renderOption:o}){if(!ab(e)){const a=L6e(n,e.value),u=t&&a&&b.jsx(dhe,{className:La.optionsDropdownCheckIcon}),l=b.jsxs(b.Fragment,{children:[r==="left"&&u,b.jsx("span",{children:e.label}),r==="right"&&u]});return b.jsx(An.Option,{value:e.value,disabled:e.disabled,className:fi({[La.optionsDropdownOption]:!i}),"data-reverse":r==="right"||void 0,"data-checked":a||void 0,"aria-selected":a,active:a,children:typeof o=="function"?o({option:e,checked:a}):l})}const s=e.items.map(a=>b.jsx(vhe,{data:a,value:n,unstyled:i,withCheckIcon:t,checkIconPosition:r,renderOption:o},a.value));return b.jsx(An.Group,{label:e.group,children:s})}function bhe({data:e,hidden:t,hiddenWhenEmpty:n,filter:r,search:i,limit:o,maxDropdownHeight:s,withScrollArea:a=!0,filterOptions:u=!0,withCheckIcon:l=!1,value:c,checkIconPosition:f,nothingFoundMessage:d,unstyled:h,labelId:p,renderOption:m,scrollAreaProps:g,"aria-label":y}){yhe(e);const _=typeof i=="string"?(r||ghe)({options:e,search:u?i:"",limit:o??1/0}):e,w=M6e(_),E=_.map(S=>b.jsx(vhe,{data:S,withCheckIcon:l,value:c,checkIconPosition:f,unstyled:h,renderOption:m},ab(S)?S.group:S.value));return b.jsx(An.Dropdown,{hidden:t||n&&w,children:b.jsxs(An.Options,{labelledBy:p,"aria-label":y,children:[a?b.jsx(Qd.Autosize,{mah:s??220,type:"scroll",scrollbarSize:"var(--combobox-padding)",offsetScrollbars:"y",...g,children:E}):E,w&&d&&b.jsx(An.Empty,{children:d})]})})}var _he={root:"m_347db0ec","root--dot":"m_fbd81e3d",label:"m_5add502a",section:"m_91fdda9b"};const F6e={},j6e=(e,{radius:t,color:n,gradient:r,variant:i,size:o,autoContrast:s})=>{const a=e.variantColorResolver({color:n||e.primaryColor,theme:e,gradient:r,variant:i||"filled",autoContrast:s});return{root:{"--badge-height":Wt(o,"badge-height"),"--badge-padding-x":Wt(o,"badge-padding-x"),"--badge-fz":Wt(o,"badge-fz"),"--badge-radius":t===void 0?void 0:vr(t),"--badge-bg":n||i?a.background:void 0,"--badge-color":n||i?a.color:void 0,"--badge-bd":n||i?a.border:void 0,"--badge-dot-color":i==="dot"?ar(n,e):void 0}}},$p=Yi((e,t)=>{const n=_e("Badge",F6e,e),{classNames:r,className:i,style:o,styles:s,unstyled:a,vars:u,radius:l,color:c,gradient:f,leftSection:d,rightSection:h,children:p,variant:m,fullWidth:g,autoContrast:y,circle:v,mod:_,...w}=n,E=pt({name:"Badge",props:n,classes:_he,className:i,style:o,classNames:r,styles:s,unstyled:a,vars:u,varsResolver:j6e});return b.jsxs(he,{variant:m,mod:[{block:g,circle:v},_],...E("root",{variant:m}),ref:t,...w,children:[d&&b.jsx("span",{...E("section"),"data-position":"left",children:d}),b.jsx("span",{...E("label"),children:p}),h&&b.jsx("span",{...E("section"),"data-position":"right",children:h})]})});$p.classes=_he;$p.displayName="@mantine/core/Badge";var whe={root:"m_fea6bf1a",burger:"m_d4fb9cad"};const B6e={},U6e=(e,{color:t,size:n,transitionDuration:r,transitionTimingFunction:i})=>({root:{"--burger-color":t?ar(t,e):void 0,"--burger-size":Wt(n,"burger-size"),"--burger-transition-duration":r===void 0?void 0:`${r}ms`,"--burger-transition-timing-function":i}}),pU=Oe((e,t)=>{const n=_e("Burger",B6e,e),{classNames:r,className:i,style:o,styles:s,unstyled:a,vars:u,opened:l,children:c,transitionDuration:f,transitionTimingFunction:d,...h}=n,p=pt({name:"Burger",classes:whe,props:n,className:i,style:o,classNames:r,styles:s,unstyled:a,vars:u,varsResolver:U6e});return b.jsxs(Pi,{...p("root"),ref:t,...h,children:[b.jsx(he,{mod:["reduce-motion",{opened:l}],...p("burger")}),c]})});pU.classes=whe;pU.displayName="@mantine/core/Burger";var _D={root:"m_77c9d27d",inner:"m_80f1301b",label:"m_811560b9",section:"m_a74036a",loader:"m_a25b86ee",group:"m_80d6d844"};const LJ={orientation:"horizontal"},z6e=(e,{borderWidth:t})=>({group:{"--button-border-width":we(t)}}),mU=Oe((e,t)=>{const n=_e("ButtonGroup",LJ,e),{className:r,style:i,classNames:o,styles:s,unstyled:a,orientation:u,vars:l,borderWidth:c,variant:f,mod:d,...h}=_e("ButtonGroup",LJ,e),p=pt({name:"ButtonGroup",props:n,classes:_D,className:r,style:i,classNames:o,styles:s,unstyled:a,vars:l,varsResolver:z6e,rootSelector:"group"});return b.jsx(he,{...p("group"),ref:t,variant:f,mod:[{"data-orientation":u},d],role:"group",...h})});mU.classes=_D;mU.displayName="@mantine/core/ButtonGroup";const V6e={in:{opacity:1,transform:`translate(-50%, calc(-50% + ${we(1)}))`},out:{opacity:0,transform:"translate(-50%, -200%)"},common:{transformOrigin:"center"},transitionProperty:"transform, opacity"},H6e={},q6e=(e,{radius:t,color:n,gradient:r,variant:i,size:o,justify:s,autoContrast:a})=>{const u=e.variantColorResolver({color:n||e.primaryColor,theme:e,gradient:r,variant:i||"filled",autoContrast:a});return{root:{"--button-justify":s,"--button-height":Wt(o,"button-height"),"--button-padding-x":Wt(o,"button-padding-x"),"--button-fz":o!=null&&o.includes("compact")?$o(o.replace("compact-","")):$o(o),"--button-radius":t===void 0?void 0:vr(t),"--button-bg":n||i?u.background:void 0,"--button-hover":n||i?u.hover:void 0,"--button-color":u.color,"--button-bd":n||i?u.border:void 0,"--button-hover-color":n||i?u.hoverColor:void 0}}},on=Yi((e,t)=>{const n=_e("Button",H6e,e),{style:r,vars:i,className:o,color:s,disabled:a,children:u,leftSection:l,rightSection:c,fullWidth:f,variant:d,radius:h,loading:p,loaderProps:m,gradient:g,classNames:y,styles:v,unstyled:_,"data-disabled":w,autoContrast:E,mod:S,...T}=n,C=pt({name:"Button",props:n,classes:_D,className:o,style:r,classNames:y,styles:v,unstyled:_,vars:i,varsResolver:q6e}),A=!!l,R=!!c;return b.jsxs(Pi,{ref:t,...C("root",{active:!a&&!p&&!w}),unstyled:_,variant:d,disabled:a||p,mod:[{disabled:a||w,loading:p,block:f,"with-left-section":A,"with-right-section":R},S],...T,children:[b.jsx(vh,{mounted:!!p,transition:V6e,duration:150,children:N=>b.jsx(he,{component:"span",...C("loader",{style:N}),"aria-hidden":!0,children:b.jsx(bh,{color:"var(--button-color)",size:"calc(var(--button-height) / 1.8)",...m})})}),b.jsxs("span",{...C("inner"),children:[l&&b.jsx(he,{component:"span",...C("section"),mod:{position:"left"},children:l}),b.jsx(he,{component:"span",mod:{loading:p},...C("label"),children:u}),c&&b.jsx(he,{component:"span",...C("section"),mod:{position:"right"},children:c})]})]})});on.classes=_D;on.displayName="@mantine/core/Button";on.Group=mU;const[W6e,G6e]=go("Card component was not found in tree");var gU={root:"m_e615b15f",section:"m_599a2148"};const Y6e={},wD=Yi((e,t)=>{const n=_e("CardSection",Y6e,e),{classNames:r,className:i,style:o,styles:s,vars:a,withBorder:u,inheritPadding:l,mod:c,...f}=n,d=G6e();return b.jsx(he,{ref:t,mod:[{"with-border":u,"inherit-padding":l},c],...d.getStyles("section",{className:i,style:o,styles:s,classNames:r}),...f})});wD.classes=gU;wD.displayName="@mantine/core/CardSection";const K6e={},X6e=(e,{padding:t})=>({root:{"--card-padding":_i(t)}}),xy=Yi((e,t)=>{const n=_e("Card",K6e,e),{classNames:r,className:i,style:o,styles:s,unstyled:a,vars:u,children:l,padding:c,...f}=n,d=pt({name:"Card",props:n,classes:gU,className:i,style:o,classNames:r,styles:s,unstyled:a,vars:u,varsResolver:X6e}),h=k.Children.toArray(l),p=h.map((m,g)=>typeof m=="object"&&m&&"type"in m&&m.type===wD?k.cloneElement(m,{"data-first-section":g===0||void 0,"data-last-section":g===h.length-1||void 0}):m);return b.jsx(W6e,{value:{getStyles:d},children:b.jsx(_y,{ref:t,unstyled:a,...d("root"),...f,children:p})})});xy.classes=gU;xy.displayName="@mantine/core/Card";xy.Section=wD;var Ehe={root:"m_4451eb3a"};const Q6e={},nm=Yi((e,t)=>{const n=_e("Center",Q6e,e),{classNames:r,className:i,style:o,styles:s,unstyled:a,vars:u,inline:l,mod:c,...f}=n,d=pt({name:"Center",props:n,classes:Ehe,className:i,style:o,classNames:r,styles:s,unstyled:a,vars:u});return b.jsx(he,{ref:t,mod:[{inline:l},c],...d("root"),...f})});nm.classes=Ehe;nm.displayName="@mantine/core/Center";var xhe={root:"m_b183c0a2"};const J6e={},Z6e=(e,{color:t})=>({root:{"--code-bg":t?ar(t,e):void 0}}),hx=Oe((e,t)=>{const n=_e("Code",J6e,e),{classNames:r,className:i,style:o,styles:s,unstyled:a,vars:u,color:l,block:c,variant:f,mod:d,...h}=n,p=pt({name:"Code",props:n,classes:xhe,className:i,style:o,classNames:r,styles:s,unstyled:a,vars:u,varsResolver:Z6e});return b.jsx(he,{component:c?"pre":"code",variant:f,ref:t,mod:[{block:c},d],...p("root"),...h,dir:"ltr"})});hx.classes=xhe;hx.displayName="@mantine/core/Code";var The={root:"m_7485cace"};const e4e={},t4e=(e,{size:t,fluid:n})=>({root:{"--container-size":n?void 0:Wt(t,"container-size")}}),sl=Oe((e,t)=>{const n=_e("Container",e4e,e),{classNames:r,className:i,style:o,styles:s,unstyled:a,vars:u,fluid:l,mod:c,...f}=n,d=pt({name:"Container",classes:The,props:n,className:i,style:o,classNames:r,styles:s,unstyled:a,vars:u,varsResolver:t4e});return b.jsx(he,{ref:t,mod:[{fluid:l},c],...d("root"),...f})});sl.classes=The;sl.displayName="@mantine/core/Container";var She={root:"m_3eebeb36",label:"m_9e365f20"};const n4e={orientation:"horizontal"},r4e=(e,{color:t,variant:n,size:r})=>({root:{"--divider-color":t?ar(t,e):void 0,"--divider-border-style":n,"--divider-size":Wt(r,"divider-size")}}),ub=Oe((e,t)=>{const n=_e("Divider",n4e,e),{classNames:r,className:i,style:o,styles:s,unstyled:a,vars:u,color:l,orientation:c,label:f,labelPosition:d,mod:h,...p}=n,m=pt({name:"Divider",classes:She,props:n,className:i,style:o,classNames:r,styles:s,unstyled:a,vars:u,varsResolver:r4e});return b.jsx(he,{ref:t,mod:[{orientation:c,"with-label":!!f},h],...m("root"),...p,role:"separator",children:f&&b.jsx(he,{component:"span",mod:{position:d},...m("label"),children:f})})});ub.classes=She;ub.displayName="@mantine/core/Divider";const[i4e,m_]=go("Drawer component was not found in tree");var Eh={root:"m_f11b401e",header:"m_5a7c2c9",content:"m_b8a05bbd",inner:"m_31cd769a"};const o4e={},ED=Oe((e,t)=>{const n=_e("DrawerBody",o4e,e),{classNames:r,className:i,style:o,styles:s,vars:a,...u}=n,l=m_();return b.jsx($7,{ref:t,...l.getStyles("body",{classNames:r,style:o,styles:s,className:i}),...u})});ED.classes=Eh;ED.displayName="@mantine/core/DrawerBody";const s4e={},xD=Oe((e,t)=>{const n=_e("DrawerCloseButton",s4e,e),{classNames:r,className:i,style:o,styles:s,vars:a,...u}=n,l=m_();return b.jsx(M7,{ref:t,...l.getStyles("close",{classNames:r,style:o,styles:s,className:i}),...u})});xD.classes=Eh;xD.displayName="@mantine/core/DrawerCloseButton";const a4e={},TD=Oe((e,t)=>{const n=_e("DrawerContent",a4e,e),{classNames:r,className:i,style:o,styles:s,vars:a,children:u,radius:l,...c}=n,f=m_(),d=f.scrollAreaComponent||Gde;return b.jsx(Wde,{...f.getStyles("content",{className:i,style:o,styles:s,classNames:r}),innerProps:f.getStyles("inner",{className:i,style:o,styles:s,classNames:r}),ref:t,...c,radius:l||f.radius||0,children:b.jsx(d,{style:{height:"100vh"},children:u})})});TD.classes=Eh;TD.displayName="@mantine/core/DrawerContent";const u4e={},SD=Oe((e,t)=>{const n=_e("DrawerHeader",u4e,e),{classNames:r,className:i,style:o,styles:s,vars:a,...u}=n,l=m_();return b.jsx(L7,{ref:t,...l.getStyles("header",{classNames:r,style:o,styles:s,className:i}),...u})});SD.classes=Eh;SD.displayName="@mantine/core/DrawerHeader";const l4e={},CD=Oe((e,t)=>{const n=_e("DrawerOverlay",l4e,e),{classNames:r,className:i,style:o,styles:s,vars:a,...u}=n,l=m_();return b.jsx(F7,{ref:t,...l.getStyles("overlay",{classNames:r,style:o,styles:s,className:i}),...u})});CD.classes=Eh;CD.displayName="@mantine/core/DrawerOverlay";function c4e(e){switch(e){case"top":return"flex-start";case"bottom":return"flex-end";default:return}}function f4e(e){if(e==="top"||e==="bottom")return"0 0 calc(100% - var(--drawer-offset, 0rem) * 2)"}const d4e={top:"slide-down",bottom:"slide-up",left:"slide-right",right:"slide-left"},h4e={top:"slide-down",bottom:"slide-up",right:"slide-right",left:"slide-left"},p4e={closeOnClickOutside:!0,withinPortal:!0,lockScroll:!0,trapFocus:!0,returnFocus:!0,closeOnEscape:!0,keepMounted:!1,zIndex:Nu("modal"),position:"left"},m4e=(e,{position:t,size:n,offset:r})=>({root:{"--drawer-size":Wt(n,"drawer-size"),"--drawer-flex":f4e(t),"--drawer-height":t==="left"||t==="right"?void 0:"var(--drawer-size)","--drawer-align":c4e(t),"--drawer-justify":t==="right"?"flex-end":void 0,"--drawer-offset":we(r)}}),AD=Oe((e,t)=>{const n=_e("DrawerRoot",p4e,e),{classNames:r,className:i,style:o,styles:s,unstyled:a,vars:u,scrollAreaComponent:l,position:c,transitionProps:f,radius:d,...h}=n,{dir:p}=Pf(),m=pt({name:"Drawer",classes:Eh,props:n,className:i,style:o,classNames:r,styles:s,unstyled:a,vars:u,varsResolver:m4e}),g=(p==="rtl"?h4e:d4e)[c];return b.jsx(i4e,{value:{scrollAreaComponent:l,getStyles:m,radius:d},children:b.jsx(qde,{ref:t,...m("root"),transitionProps:{transition:g,...f},unstyled:a,...h})})});AD.classes=Eh;AD.displayName="@mantine/core/DrawerRoot";const g4e={},kD=Oe((e,t)=>{const n=_e("DrawerTitle",g4e,e),{classNames:r,className:i,style:o,styles:s,vars:a,...u}=n,l=m_();return b.jsx(j7,{ref:t,...l.getStyles("title",{classNames:r,style:o,styles:s,className:i}),...u})});kD.classes=Eh;kD.displayName="@mantine/core/DrawerTitle";const y4e={closeOnClickOutside:!0,withinPortal:!0,lockScroll:!0,trapFocus:!0,returnFocus:!0,closeOnEscape:!0,keepMounted:!1,zIndex:Nu("modal"),withOverlay:!0,withCloseButton:!0},Df=Oe((e,t)=>{const{title:n,withOverlay:r,overlayProps:i,withCloseButton:o,closeButtonProps:s,children:a,...u}=_e("Drawer",y4e,e),l=!!n||o;return b.jsxs(AD,{ref:t,...u,children:[r&&b.jsx(CD,{...i}),b.jsxs(TD,{children:[l&&b.jsxs(SD,{children:[n&&b.jsx(kD,{children:n}),o&&b.jsx(xD,{...s})]}),b.jsx(ED,{children:a})]})]})});Df.classes=Eh;Df.displayName="@mantine/core/Drawer";Df.Root=AD;Df.Overlay=CD;Df.Content=TD;Df.Body=ED;Df.Header=SD;Df.Title=kD;Df.CloseButton=xD;function v4e({open:e,close:t,openDelay:n,closeDelay:r}){const i=k.useRef(-1),o=k.useRef(-1),s=()=>{window.clearTimeout(i.current),window.clearTimeout(o.current)},a=()=>{s(),n===0||n===void 0?e():i.current=window.setTimeout(e,n)},u=()=>{s(),r===0||r===void 0?t():o.current=window.setTimeout(t,r)};return k.useEffect(()=>s,[]),{openDropdown:a,closeDropdown:u}}const[b4e,Che]=go("Grid component was not found in tree"),n5=(e,t)=>e==="content"?"auto":e==="auto"?"0rem":e?`${100/(t/e)}%`:void 0,FJ=(e,t,n)=>n||e==="auto"?"100%":e==="content"?"unset":n5(e,t),jJ=(e,t)=>{if(e)return e==="auto"||t?"1":"auto"},BJ=(e,t)=>e===0?"0":e?`${100/(t/e)}%`:void 0;function _4e({span:e,order:t,offset:n,selector:r}){var d;const i=Oi(),o=Che(),a=ql(e)===void 0?12:ql(e),u=Dm({"--col-order":(d=ql(t))==null?void 0:d.toString(),"--col-flex-grow":jJ(a,o.grow),"--col-flex-basis":n5(a,o.columns),"--col-width":a==="content"?"auto":void 0,"--col-max-width":FJ(a,o.columns,o.grow),"--col-offset":BJ(ql(n),o.columns)}),l=yr(i.breakpoints).reduce((h,p)=>{var m;return h[p]||(h[p]={}),typeof t=="object"&&t[p]!==void 0&&(h[p]["--col-order"]=(m=t[p])==null?void 0:m.toString()),typeof e=="object"&&e[p]!==void 0&&(h[p]["--col-flex-grow"]=jJ(e[p],o.grow),h[p]["--col-flex-basis"]=n5(e[p],o.columns),h[p]["--col-width"]=e[p]==="content"?"auto":void 0,h[p]["--col-max-width"]=FJ(e[p],o.columns,o.grow)),typeof n=="object"&&n[p]!==void 0&&(h[p]["--col-offset"]=BJ(n[p],o.columns)),h},{}),f=_T(yr(l),i).filter(h=>yr(l[h.value]).length>0).map(h=>({query:`(min-width: ${i.breakpoints[h.value]})`,styles:l[h.value]}));return b.jsx(vy,{styles:u,media:f,selector:r})}var yU={root:"m_410352e9",inner:"m_dee7bd2f",col:"m_96bdd299"};const w4e={span:12},vU=Oe((e,t)=>{const n=_e("GridCol",w4e,e),{classNames:r,className:i,style:o,styles:s,vars:a,span:u,order:l,offset:c,...f}=n,d=Che(),h=VS();return b.jsxs(b.Fragment,{children:[b.jsx(_4e,{selector:`.${h}`,span:u,order:l,offset:c}),b.jsx(he,{ref:t,...d.getStyles("col",{className:fi(i,h),style:o,classNames:r,styles:s}),...f})]})});vU.classes=yU;vU.displayName="@mantine/core/GridCol";function E4e({gutter:e,selector:t}){const n=Oi(),r=Dm({"--grid-gutter":_i(ql(e))}),i=yr(n.breakpoints).reduce((a,u)=>(a[u]||(a[u]={}),typeof e=="object"&&e[u]!==void 0&&(a[u]["--grid-gutter"]=_i(e[u])),a),{}),s=_T(yr(i),n).filter(a=>yr(i[a.value]).length>0).map(a=>({query:`(min-width: ${n.breakpoints[a.value]})`,styles:i[a.value]}));return b.jsx(vy,{styles:r,media:s,selector:t})}const x4e={gutter:"md",grow:!1,columns:12},T4e=(e,{justify:t,align:n,overflow:r})=>({root:{"--grid-justify":t,"--grid-align":n,"--grid-overflow":r}}),Ku=Oe((e,t)=>{const n=_e("Grid",x4e,e),{classNames:r,className:i,style:o,styles:s,unstyled:a,vars:u,grow:l,gutter:c,columns:f,align:d,justify:h,children:p,...m}=n,g=pt({name:"Grid",classes:yU,props:n,className:i,style:o,classNames:r,styles:s,unstyled:a,vars:u,varsResolver:T4e}),y=VS();return b.jsxs(b4e,{value:{getStyles:g,grow:l,columns:f},children:[b.jsx(E4e,{selector:`.${y}`,...n}),b.jsx(he,{ref:t,...g("root",{className:y}),...m,children:b.jsx("div",{...g("inner"),children:p})})]})});Ku.classes=yU;Ku.displayName="@mantine/core/Grid";Ku.Col=vU;var Ahe={root:"m_9e117634"};const S4e={},C4e=(e,{radius:t,fit:n})=>({root:{"--image-radius":t===void 0?void 0:vr(t),"--image-object-fit":n}}),Fm=Yi((e,t)=>{const n=_e("Image",S4e,e),{classNames:r,className:i,style:o,styles:s,unstyled:a,vars:u,onError:l,src:c,radius:f,fit:d,fallbackSrc:h,mod:p,...m}=n,[g,y]=k.useState(!c);k.useEffect(()=>y(!c),[c]);const v=pt({name:"Image",classes:Ahe,props:n,className:i,style:o,classNames:r,styles:s,unstyled:a,vars:u,varsResolver:C4e});return g&&h?b.jsx(he,{component:"img",ref:t,src:h,...v("root"),onError:l,mod:["fallback",p],...m}):b.jsx(he,{component:"img",ref:t,...v("root"),src:c,onError:_=>{l==null||l(_),y(!0)},mod:p,...m})});Fm.classes=Ahe;Fm.displayName="@mantine/core/Image";function aR(){return aR=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},aR.apply(null,arguments)}function bU(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}var A4e=k.useLayoutEffect,k4e=function(t){var n=k.useRef(t);return A4e(function(){n.current=t}),n},UJ=function(t,n){if(typeof t=="function"){t(n);return}t.current=n},I4e=function(t,n){var r=k.useRef();return k.useCallback(function(i){t.current=i,r.current&&UJ(r.current,null),r.current=n,n&&UJ(n,i)},[n])},zJ={"min-height":"0","max-height":"none",height:"0",visibility:"hidden",overflow:"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0"},R4e=function(t){Object.keys(zJ).forEach(function(n){t.style.setProperty(n,zJ[n],"important")})},VJ=R4e,As=null,HJ=function(t,n){var r=t.scrollHeight;return n.sizingStyle.boxSizing==="border-box"?r+n.borderSize:r-n.paddingSize};function N4e(e,t,n,r){n===void 0&&(n=1),r===void 0&&(r=1/0),As||(As=document.createElement("textarea"),As.setAttribute("tabindex","-1"),As.setAttribute("aria-hidden","true"),VJ(As)),As.parentNode===null&&document.body.appendChild(As);var i=e.paddingSize,o=e.borderSize,s=e.sizingStyle,a=s.boxSizing;Object.keys(s).forEach(function(d){var h=d;As.style[h]=s[h]}),VJ(As),As.value=t;var u=HJ(As,e);As.value=t,u=HJ(As,e),As.value="x";var l=As.scrollHeight-i,c=l*n;a==="border-box"&&(c=c+i+o),u=Math.max(c,u);var f=l*r;return a==="border-box"&&(f=f+i+o),u=Math.min(f,u),[u,l]}var qJ=function(){},P4e=function(t,n){return t.reduce(function(r,i){return r[i]=n[i],r},{})},D4e=["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth","boxSizing","fontFamily","fontSize","fontStyle","fontWeight","letterSpacing","lineHeight","paddingBottom","paddingLeft","paddingRight","paddingTop","tabSize","textIndent","textRendering","textTransform","width","wordBreak"],O4e=!!document.documentElement.currentStyle,$4e=function(t){var n=window.getComputedStyle(t);if(n===null)return null;var r=P4e(D4e,n),i=r.boxSizing;if(i==="")return null;O4e&&i==="border-box"&&(r.width=parseFloat(r.width)+parseFloat(r.borderRightWidth)+parseFloat(r.borderLeftWidth)+parseFloat(r.paddingRight)+parseFloat(r.paddingLeft)+"px");var o=parseFloat(r.paddingBottom)+parseFloat(r.paddingTop),s=parseFloat(r.borderBottomWidth)+parseFloat(r.borderTopWidth);return{sizingStyle:r,paddingSize:o,borderSize:s}},M4e=$4e;function khe(e,t,n){var r=k4e(n);k.useLayoutEffect(function(){var i=function(s){return r.current(s)};if(e)return e.addEventListener(t,i),function(){return e.removeEventListener(t,i)}},[])}var L4e=function(t){khe(window,"resize",t)},F4e=function(t){khe(document.fonts,"loadingdone",t)},j4e=["cacheMeasurements","maxRows","minRows","onChange","onHeightChange"],B4e=function(t,n){var r=t.cacheMeasurements,i=t.maxRows,o=t.minRows,s=t.onChange,a=s===void 0?qJ:s,u=t.onHeightChange,l=u===void 0?qJ:u,c=bU(t,j4e),f=c.value!==void 0,d=k.useRef(null),h=I4e(d,n),p=k.useRef(0),m=k.useRef(),g=function(){var _=d.current,w=r&&m.current?m.current:M4e(_);if(w){m.current=w;var E=N4e(w,_.value||_.placeholder||"x",o,i),S=E[0],T=E[1];p.current!==S&&(p.current=S,_.style.setProperty("height",S+"px","important"),l(S,{rowHeight:T}))}},y=function(_){f||g(),a(_)};return k.useLayoutEffect(g),L4e(g),F4e(g),k.createElement("textarea",aR({},c,{onChange:y,ref:h}))},U4e=k.forwardRef(B4e);const z4e={},_U=Oe((e,t)=>{const{autosize:n,maxRows:r,minRows:i,__staticSelector:o,resize:s,...a}=_e("Textarea",z4e,e),u=n&&LOe()!=="test",l=u?{maxRows:r,minRows:i}:{};return b.jsx(gl,{component:u?U4e:"textarea",ref:t,...a,__staticSelector:o||"Textarea",multiline:!0,"data-no-overflow":n&&r===void 0||void 0,__vars:{"--input-resize":s},...l})});_U.classes=gl.classes;_U.displayName="@mantine/core/Textarea";const[V4e,H4e]=go("List component was not found in tree");var wU={root:"m_abbac491",item:"m_abb6bec2",itemWrapper:"m_75cd9f71",itemIcon:"m_60f83e5b"};const q4e={},EU=Oe((e,t)=>{const n=_e("ListItem",q4e,e),{classNames:r,className:i,style:o,styles:s,vars:a,icon:u,children:l,mod:c,...f}=n,d=H4e(),h=u||d.icon,p={classNames:r,styles:s};return b.jsx(he,{...d.getStyles("item",{...p,className:i,style:o}),component:"li",mod:[{"with-icon":!!h,centered:d.center},c],ref:t,...f,children:b.jsxs("div",{...d.getStyles("itemWrapper",p),children:[h&&b.jsx("span",{...d.getStyles("itemIcon",p),children:h}),b.jsx("span",{...d.getStyles("itemLabel",p),children:l})]})})});EU.classes=wU;EU.displayName="@mantine/core/ListItem";const W4e={type:"unordered"},G4e=(e,{size:t,spacing:n})=>({root:{"--list-fz":$o(t),"--list-lh":jfe(t),"--list-spacing":_i(n)}}),ec=Oe((e,t)=>{const n=_e("List",W4e,e),{classNames:r,className:i,style:o,styles:s,unstyled:a,vars:u,children:l,type:c,withPadding:f,icon:d,spacing:h,center:p,listStyleType:m,mod:g,...y}=n,v=pt({name:"List",classes:wU,props:n,className:i,style:o,classNames:r,styles:s,unstyled:a,vars:u,varsResolver:G4e});return b.jsx(V4e,{value:{center:p,icon:d,getStyles:v},children:b.jsx(he,{...v("root",{style:{listStyleType:m}}),component:c==="unordered"?"ul":"ol",mod:[{"with-padding":f},g],ref:t,...y,children:l})})});ec.classes=wU;ec.displayName="@mantine/core/List";ec.Item=EU;var Ihe={root:"m_6e45937b",loader:"m_e8eb006c",overlay:"m_df587f17"};const WJ={transitionProps:{transition:"fade",duration:0},overlayProps:{backgroundOpacity:.75},zIndex:Nu("overlay")},Y4e=(e,{zIndex:t})=>({root:{"--lo-z-index":t==null?void 0:t.toString()}}),gu=Oe((e,t)=>{const n=_e("LoadingOverlay",WJ,e),{classNames:r,className:i,style:o,styles:s,unstyled:a,vars:u,transitionProps:l,loaderProps:c,overlayProps:f,visible:d,zIndex:h,...p}=n,m=Oi(),g=pt({name:"LoadingOverlay",classes:Ihe,props:n,className:i,style:o,classNames:r,styles:s,unstyled:a,vars:u,varsResolver:Y4e}),y={...WJ.overlayProps,...f};return b.jsx(vh,{transition:"fade",...l,mounted:!!d,children:v=>b.jsxs(he,{...g("root",{style:v}),ref:t,...p,children:[b.jsx(bh,{...g("loader"),unstyled:a,...c}),b.jsx(xT,{...y,...g("overlay"),darkHidden:!0,unstyled:a,color:(f==null?void 0:f.color)||m.white}),b.jsx(xT,{...y,...g("overlay"),lightHidden:!0,unstyled:a,color:(f==null?void 0:f.color)||m.colors.dark[5]})]})})});gu.classes=Ihe;gu.displayName="@mantine/core/LoadingOverlay";const[K4e,KS]=go("Menu component was not found in the tree");var g_={dropdown:"m_dc9b7c9f",label:"m_9bfac126",divider:"m_efdf90cb",item:"m_99ac2aa1",itemLabel:"m_5476e0d3",itemSection:"m_8b75e504"};const X4e={},xU=Oe((e,t)=>{const{classNames:n,className:r,style:i,styles:o,vars:s,...a}=_e("MenuDivider",X4e,e),u=KS();return b.jsx(he,{ref:t,...u.getStyles("divider",{className:r,style:i,styles:o,classNames:n}),...a})});xU.classes=g_;xU.displayName="@mantine/core/MenuDivider";const Q4e={},TU=Oe((e,t)=>{const{classNames:n,className:r,style:i,styles:o,vars:s,onMouseEnter:a,onMouseLeave:u,children:l,...c}=_e("MenuDropdown",Q4e,e),f=k.useRef(null),d=KS(),h=g=>{var y,v;(g.key==="ArrowUp"||g.key==="ArrowDown")&&(g.preventDefault(),(v=(y=f.current)==null?void 0:y.querySelectorAll("[data-menu-item]:not(:disabled)")[0])==null||v.focus())},p=Td(a,()=>(d.trigger==="hover"||d.trigger==="click-hover")&&d.openDropdown()),m=Td(u,()=>(d.trigger==="hover"||d.trigger==="click-hover")&&d.closeDropdown());return b.jsxs(Mo.Dropdown,{...c,onMouseEnter:p,onMouseLeave:m,role:"menu","aria-orientation":"vertical",ref:Gi(t,f),...d.getStyles("dropdown",{className:r,style:i,styles:o,classNames:n,withStaticClass:!1}),tabIndex:-1,"data-menu-dropdown":!0,onKeyDown:h,children:[b.jsx("div",{tabIndex:-1,"data-autofocus":!0,"aria-hidden":!0,style:{outline:0}}),l]})});TU.classes=g_;TU.displayName="@mantine/core/MenuDropdown";const J4e={},SU=Yi((e,t)=>{const{classNames:n,className:r,style:i,styles:o,vars:s,color:a,closeMenuOnClick:u,leftSection:l,rightSection:c,children:f,disabled:d,...h}=_e("MenuItem",J4e,e),p=KS(),m=Oi(),{dir:g}=Pf(),y=k.useRef(),v=p.getItemIndex(y.current),_=h,w=Td(_.onMouseLeave,()=>p.setHovered(-1)),E=Td(_.onMouseEnter,()=>p.setHovered(p.getItemIndex(y.current))),S=Td(_.onClick,()=>{typeof u=="boolean"?u&&p.closeDropdownImmediately():p.closeOnItemClick&&p.closeDropdownImmediately()}),T=Td(_.onFocus,()=>p.setHovered(p.getItemIndex(y.current))),C=a?m.variantColorResolver({color:a,theme:m,variant:"light"}):void 0,A=a?Nf({color:a,theme:m}):null;return b.jsxs(Pi,{...h,unstyled:p.unstyled,tabIndex:p.menuItemTabIndex,onFocus:T,...p.getStyles("item",{className:r,style:i,styles:o,classNames:n}),ref:Gi(y,t),role:"menuitem",disabled:d,"data-menu-item":!0,"data-disabled":d||void 0,"data-hovered":p.hovered===v?!0:void 0,onMouseEnter:E,onMouseLeave:w,onClick:S,onKeyDown:r7({siblingSelector:"[data-menu-item]",parentSelector:"[data-menu-dropdown]",activateOnFocus:!1,loop:p.loop,dir:g,orientation:"vertical",onKeyDown:_.onKeydown}),__vars:{"--menu-item-color":A!=null&&A.isThemeColor&&(A==null?void 0:A.shade)===void 0?`var(--mantine-color-${A.color}-6)`:C==null?void 0:C.color,"--menu-item-hover":C==null?void 0:C.hover},children:[l&&b.jsx("div",{...p.getStyles("itemSection",{styles:o,classNames:n}),"data-position":"left",children:l}),f&&b.jsx("div",{...p.getStyles("itemLabel",{styles:o,classNames:n}),children:f}),c&&b.jsx("div",{...p.getStyles("itemSection",{styles:o,classNames:n}),"data-position":"right",children:c})]})});SU.classes=g_;SU.displayName="@mantine/core/MenuItem";const Z4e={},CU=Oe((e,t)=>{const{classNames:n,className:r,style:i,styles:o,vars:s,...a}=_e("MenuLabel",Z4e,e),u=KS();return b.jsx(he,{ref:t,...u.getStyles("label",{className:r,style:i,styles:o,classNames:n}),...a})});CU.classes=g_;CU.displayName="@mantine/core/MenuLabel";const eFe={refProp:"ref"},Rhe=k.forwardRef((e,t)=>{const{children:n,refProp:r,...i}=_e("MenuTarget",eFe,e);if(!Om(n))throw new Error("Menu.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const o=KS(),s=Td(n.props.onClick,()=>{o.trigger==="click"?o.toggleDropdown():o.trigger==="click-hover"&&(o.setOpenedViaClick(!0),o.opened||o.openDropdown())}),a=Td(n.props.onMouseEnter,()=>(o.trigger==="hover"||o.trigger==="click-hover")&&o.openDropdown()),u=Td(n.props.onMouseLeave,()=>{(o.trigger==="hover"||o.trigger==="click-hover"&&!o.openedViaClick)&&o.closeDropdown()});return b.jsx(Mo.Target,{refProp:r,popupType:"menu",ref:t,...i,children:k.cloneElement(n,{onClick:s,onMouseEnter:a,onMouseLeave:u,"data-expanded":o.opened?!0:void 0})})});Rhe.displayName="@mantine/core/MenuTarget";const tFe={trapFocus:!0,closeOnItemClick:!0,clickOutsideEvents:["mousedown","touchstart","keydown"],loop:!0,trigger:"click",openDelay:0,closeDelay:100,menuItemTabIndex:-1};function pa(e){const t=_e("Menu",tFe,e),{children:n,onOpen:r,onClose:i,opened:o,defaultOpened:s,trapFocus:a,onChange:u,closeOnItemClick:l,loop:c,closeOnEscape:f,trigger:d,openDelay:h,closeDelay:p,classNames:m,styles:g,unstyled:y,variant:v,vars:_,menuItemTabIndex:w,keepMounted:E,...S}=t,T=pt({name:"Menu",classes:g_,props:t,classNames:m,styles:g,unstyled:y}),[C,{setHovered:A,resetHovered:R}]=gOe(),[N,O]=Wi({value:o,defaultValue:s,finalValue:!1,onChange:u}),[D,M]=k.useState(!1),F=()=>{O(!1),M(!1),N&&(i==null||i())},L=()=>{O(!0),!N&&(r==null||r())},B=()=>{N?F():L()},{openDropdown:U,closeDropdown:H}=v4e({open:L,close:F,closeDelay:p,openDelay:h}),P=j=>mOe("[data-menu-item]","[data-menu-dropdown]",j),{resolvedClassNames:z,resolvedStyles:W}=gh({classNames:m,styles:g,props:t});return vf(()=>{R()},[N]),b.jsx(K4e,{value:{getStyles:T,opened:N,toggleDropdown:B,getItemIndex:P,hovered:C,setHovered:A,openedViaClick:D,setOpenedViaClick:M,closeOnItemClick:l,closeDropdown:d==="click"?F:H,openDropdown:d==="click"?L:U,closeDropdownImmediately:F,loop:c,trigger:d,unstyled:y,menuItemTabIndex:w},children:b.jsx(Mo,{...S,opened:N,onChange:B,defaultOpened:s,trapFocus:E?!1:a,closeOnEscape:f,__staticSelector:"Menu",classNames:z,styles:W,unstyled:y,variant:v,keepMounted:E,children:n})})}pa.extend=e=>e;pa.classes=g_;pa.displayName="@mantine/core/Menu";pa.Item=SU;pa.Label=CU;pa.Dropdown=TU;pa.Target=Rhe;pa.Divider=xU;const[nFe,y_]=go("Modal component was not found in tree");var xh={root:"m_9df02822",content:"m_54c44539",inner:"m_1f958f16",header:"m_d0e2b9cd"};const rFe={},ID=Oe((e,t)=>{const n=_e("ModalBody",rFe,e),{classNames:r,className:i,style:o,styles:s,vars:a,...u}=n,l=y_();return b.jsx($7,{ref:t,...l.getStyles("body",{classNames:r,style:o,styles:s,className:i}),...u})});ID.classes=xh;ID.displayName="@mantine/core/ModalBody";const iFe={},RD=Oe((e,t)=>{const n=_e("ModalCloseButton",iFe,e),{classNames:r,className:i,style:o,styles:s,vars:a,...u}=n,l=y_();return b.jsx(M7,{ref:t,...l.getStyles("close",{classNames:r,style:o,styles:s,className:i}),...u})});RD.classes=xh;RD.displayName="@mantine/core/ModalCloseButton";const oFe={},ND=Oe((e,t)=>{const n=_e("ModalContent",oFe,e),{classNames:r,className:i,style:o,styles:s,vars:a,children:u,...l}=n,c=y_(),f=c.scrollAreaComponent||Gde;return b.jsx(Wde,{...c.getStyles("content",{className:i,style:o,styles:s,classNames:r}),innerProps:c.getStyles("inner",{className:i,style:o,styles:s,classNames:r}),"data-full-screen":c.fullScreen||void 0,"data-modal-content":!0,ref:t,...l,children:b.jsx(f,{style:{maxHeight:c.fullScreen?"100dvh":`calc(100dvh - (${we(c.yOffset)} * 2))`},children:u})})});ND.classes=xh;ND.displayName="@mantine/core/ModalContent";const sFe={},PD=Oe((e,t)=>{const n=_e("ModalHeader",sFe,e),{classNames:r,className:i,style:o,styles:s,vars:a,...u}=n,l=y_();return b.jsx(L7,{ref:t,...l.getStyles("header",{classNames:r,style:o,styles:s,className:i}),...u})});PD.classes=xh;PD.displayName="@mantine/core/ModalHeader";const aFe={},DD=Oe((e,t)=>{const n=_e("ModalOverlay",aFe,e),{classNames:r,className:i,style:o,styles:s,vars:a,...u}=n,l=y_();return b.jsx(F7,{ref:t,...l.getStyles("overlay",{classNames:r,style:o,styles:s,className:i}),...u})});DD.classes=xh;DD.displayName="@mantine/core/ModalOverlay";const uFe={__staticSelector:"Modal",closeOnClickOutside:!0,withinPortal:!0,lockScroll:!0,trapFocus:!0,returnFocus:!0,closeOnEscape:!0,keepMounted:!1,zIndex:Nu("modal"),transitionProps:{duration:200,transition:"pop"},yOffset:"5dvh"},lFe=(e,{radius:t,size:n,yOffset:r,xOffset:i})=>({root:{"--modal-radius":t===void 0?void 0:vr(t),"--modal-size":Wt(n,"modal-size"),"--modal-y-offset":we(r),"--modal-x-offset":we(i)}}),OD=Oe((e,t)=>{const n=_e("ModalRoot",uFe,e),{classNames:r,className:i,style:o,styles:s,unstyled:a,vars:u,yOffset:l,scrollAreaComponent:c,radius:f,fullScreen:d,centered:h,xOffset:p,__staticSelector:m,...g}=n,y=pt({name:m,classes:xh,props:n,className:i,style:o,classNames:r,styles:s,unstyled:a,vars:u,varsResolver:lFe});return b.jsx(nFe,{value:{yOffset:l,scrollAreaComponent:c,getStyles:y,fullScreen:d},children:b.jsx(qde,{ref:t,...y("root"),"data-full-screen":d||void 0,"data-centered":h||void 0,unstyled:a,...g})})});OD.classes=xh;OD.displayName="@mantine/core/ModalRoot";const cFe={},$D=Oe((e,t)=>{const n=_e("ModalTitle",cFe,e),{classNames:r,className:i,style:o,styles:s,vars:a,...u}=n,l=y_();return b.jsx(j7,{ref:t,...l.getStyles("title",{classNames:r,style:o,styles:s,className:i}),...u})});$D.classes=xh;$D.displayName="@mantine/core/ModalTitle";const fFe={closeOnClickOutside:!0,withinPortal:!0,lockScroll:!0,trapFocus:!0,returnFocus:!0,closeOnEscape:!0,keepMounted:!1,zIndex:Nu("modal"),transitionProps:{duration:200,transition:"fade-down"},withOverlay:!0,withCloseButton:!0},li=Oe((e,t)=>{const{title:n,withOverlay:r,overlayProps:i,withCloseButton:o,closeButtonProps:s,children:a,radius:u,...l}=_e("Modal",fFe,e),c=!!n||o;return b.jsxs(OD,{ref:t,radius:u,...l,children:[r&&b.jsx(DD,{...i}),b.jsxs(ND,{radius:u,children:[c&&b.jsxs(PD,{children:[n&&b.jsx($D,{children:n}),o&&b.jsx(RD,{...s})]}),b.jsx(ID,{children:a})]})]})});li.classes=xh;li.displayName="@mantine/core/Modal";li.Root=OD;li.Overlay=DD;li.Content=ND;li.Body=ID;li.Header=PD;li.Title=$D;li.CloseButton=RD;const[dFe,AU]=a_(),[hFe,pFe]=a_();var MD={root:"m_7cda1cd6","root--default":"m_44da308b","root--contrast":"m_e3a01f8",label:"m_1e0e6180",remove:"m_ae386778",group:"m_1dcfd90b"};const mFe={},gFe=(e,{gap:t},{size:n})=>({group:{"--pg-gap":t!==void 0?Wt(t):Wt(n,"pg-gap")}}),kU=Oe((e,t)=>{const n=_e("PillGroup",mFe,e),{classNames:r,className:i,style:o,styles:s,unstyled:a,vars:u,size:l,disabled:c,...f}=n,d=AU(),h=(d==null?void 0:d.size)||l||void 0,p=pt({name:"PillGroup",classes:MD,props:n,className:i,style:o,classNames:r,styles:s,unstyled:a,vars:u,varsResolver:gFe,stylesCtx:{size:h},rootSelector:"group"});return b.jsx(hFe,{value:{size:h,disabled:c},children:b.jsx(he,{ref:t,size:h,...p("group"),...f})})});kU.classes=MD;kU.displayName="@mantine/core/PillGroup";const yFe={variant:"default"},vFe=(e,{radius:t},{size:n})=>({root:{"--pill-fz":Wt(n,"pill-fz"),"--pill-height":Wt(n,"pill-height"),"--pill-radius":t===void 0?void 0:vr(t)}}),TT=Oe((e,t)=>{const n=_e("Pill",yFe,e),{classNames:r,className:i,style:o,styles:s,unstyled:a,vars:u,variant:l,children:c,withRemoveButton:f,onRemove:d,removeButtonProps:h,radius:p,size:m,disabled:g,mod:y,...v}=n,_=pFe(),w=AU(),E=m||(_==null?void 0:_.size)||void 0,S=(w==null?void 0:w.variant)==="filled"?"contrast":l||"default",T=pt({name:"Pill",classes:MD,props:n,className:i,style:o,classNames:r,styles:s,unstyled:a,vars:u,varsResolver:vFe,stylesCtx:{size:E}});return b.jsxs(he,{component:"span",ref:t,variant:S,size:E,...T("root",{variant:S}),mod:[{"with-remove":f&&!g,disabled:g||(_==null?void 0:_.disabled)},y],...v,children:[b.jsx("span",{...T("label"),children:c}),f&&b.jsx(_h,{variant:"transparent",radius:p,tabIndex:-1,"aria-hidden":!0,unstyled:a,...h,...T("remove",{className:h==null?void 0:h.className,style:h==null?void 0:h.style}),onMouseDown:C=>{var A;C.preventDefault(),C.stopPropagation(),(A=h==null?void 0:h.onMouseDown)==null||A.call(h,C)},onClick:C=>{var A;C.stopPropagation(),d==null||d(),(A=h==null?void 0:h.onClick)==null||A.call(h,C)}})]})});TT.classes=MD;TT.displayName="@mantine/core/Pill";TT.Group=kU;var Nhe={field:"m_45c4369d"};const bFe={type:"visible"},IU=Oe((e,t)=>{const n=_e("PillsInputField",bFe,e),{classNames:r,className:i,style:o,styles:s,unstyled:a,vars:u,type:l,disabled:c,id:f,pointer:d,mod:h,...p}=n,m=AU(),g=d_(),y=pt({name:"PillsInputField",classes:Nhe,props:n,className:i,style:o,classNames:r,styles:s,unstyled:a,rootSelector:"field"}),v=c||(m==null?void 0:m.disabled);return b.jsx(he,{component:"input",ref:Gi(t,m==null?void 0:m.fieldRef),"data-type":l,disabled:v,mod:[{disabled:v,pointer:d},h],...y("field"),...p,id:(g==null?void 0:g.inputId)||f,"aria-invalid":m==null?void 0:m.hasError,"aria-describedby":g==null?void 0:g.describedBy,type:"text",onMouseDown:_=>!d&&_.stopPropagation()})});IU.classes=Nhe;IU.displayName="@mantine/core/PillsInputField";const _Fe={},uR=Oe((e,t)=>{const n=_e("PillsInput",_Fe,e),{children:r,onMouseDown:i,onClick:o,size:s,disabled:a,__staticSelector:u,error:l,variant:c,...f}=n,d=k.useRef();return b.jsx(dFe,{value:{fieldRef:d,size:s,disabled:a,hasError:!!l,variant:c},children:b.jsx(gl,{size:s,error:l,variant:c,component:"div",ref:t,onMouseDown:h=>{var p;h.preventDefault(),i==null||i(h),(p=d.current)==null||p.focus()},onClick:h=>{var p;h.preventDefault(),o==null||o(h),(p=d.current)==null||p.focus()},...f,multiline:!0,disabled:a,__staticSelector:u||"PillsInput",withAria:!1,children:r})})});uR.displayName="@mantine/core/PillsInput";uR.Field=IU;function wFe({data:e,value:t}){const n=t.map(i=>i.trim().toLowerCase());return e.reduce((i,o)=>(ab(o)?i.push({group:o.group,items:o.items.filter(s=>n.indexOf(s.value.toLowerCase().trim())===-1)}):n.indexOf(o.value.toLowerCase().trim())===-1&&i.push(o),i),[])}const EFe={maxValues:1/0,withCheckIcon:!0,checkIconPosition:"left",hiddenInputValuesDivider:","},RU=Oe((e,t)=>{const n=_e("MultiSelect",EFe,e),{classNames:r,className:i,style:o,styles:s,unstyled:a,vars:u,size:l,value:c,defaultValue:f,onChange:d,onKeyDown:h,variant:p,data:m,dropdownOpened:g,defaultDropdownOpened:y,onDropdownOpen:v,onDropdownClose:_,selectFirstOptionOnChange:w,onOptionSubmit:E,comboboxProps:S,filter:T,limit:C,withScrollArea:A,maxDropdownHeight:R,searchValue:N,defaultSearchValue:O,onSearchChange:D,readOnly:M,disabled:F,onFocus:L,onBlur:B,onPaste:U,radius:H,rightSection:P,rightSectionWidth:z,rightSectionPointerEvents:W,rightSectionProps:j,leftSection:q,leftSectionWidth:G,leftSectionPointerEvents:te,leftSectionProps:pe,inputContainer:be,inputWrapperOrder:le,withAsterisk:me,labelProps:Se,descriptionProps:ge,errorProps:tt,wrapperProps:Ue,description:mt,label:it,error:Re,maxValues:$e,searchable:Ge,nothingFoundMessage:dt,withCheckIcon:Nt,checkIconPosition:He,hidePickedOptions:fe,withErrorStyles:lt,name:gt,form:ce,id:Te,clearable:ze,clearButtonProps:st,hiddenInputProps:vt,placeholder:vn,hiddenInputValuesDivider:Zn,required:bn,mod:Bn,renderOption:Zt,onRemove:an,onClear:Dn,scrollAreaProps:On,...Ho}=n,Jr=Js(Te),un=the(m),Zr=J7(un),er=lU({opened:g,defaultOpened:y,onDropdownOpen:v,onDropdownClose:()=>{_==null||_(),er.resetSelectedOption()}}),{styleProps:Si,rest:{type:ed,autoComplete:Wa,...Cc}}=by(Ho),[Qn,qr]=Wi({value:c,defaultValue:f,finalValue:[],onChange:d}),[br,ta]=Wi({value:N,defaultValue:O,finalValue:"",onChange:D}),Ts=pt({name:"MultiSelect",classes:{},props:n,classNames:r,styles:s,unstyled:a}),{resolvedClassNames:Ss,resolvedStyles:ie}=gh({props:n,styles:s,classNames:r}),Z=rt=>{h==null||h(rt),rt.key===" "&&!Ge&&(rt.preventDefault(),er.toggleDropdown()),rt.key==="Backspace"&&br.length===0&&Qn.length>0&&(an==null||an(Qn[Qn.length-1]),qr(Qn.slice(0,Qn.length-1)))},oe=Qn.map((rt,Et)=>{var Bt,mn;return b.jsx(TT,{withRemoveButton:!M&&!((Bt=Zr[rt])!=null&&Bt.disabled),onRemove:()=>{qr(Qn.filter(_n=>rt!==_n)),an==null||an(rt)},unstyled:a,disabled:F,...Ts("pill"),children:((mn=Zr[rt])==null?void 0:mn.label)||rt},`${rt}-${Et}`)});k.useEffect(()=>{w&&er.selectFirstOption()},[w,Qn]);const xe=ze&&Qn.length>0&&!F&&!M&&b.jsx(An.ClearButton,{size:l,...st,onClear:()=>{Dn==null||Dn(),qr([]),ta("")}}),Ee=wFe({data:un,value:Qn});return b.jsxs(b.Fragment,{children:[b.jsxs(An,{store:er,classNames:Ss,styles:ie,unstyled:a,size:l,readOnly:M,__staticSelector:"MultiSelect",onOptionSubmit:rt=>{E==null||E(rt),ta(""),er.updateSelectedOptionIndex("selected"),Qn.includes(Zr[rt].value)?(qr(Qn.filter(Et=>Et!==Zr[rt].value)),an==null||an(Zr[rt].value)):Qn.length<$e&&qr([...Qn,Zr[rt].value])},...S,children:[b.jsx(An.DropdownTarget,{children:b.jsx(uR,{...Si,__staticSelector:"MultiSelect",classNames:Ss,styles:ie,unstyled:a,size:l,className:i,style:o,variant:p,disabled:F,radius:H,rightSection:P||xe||b.jsx(An.Chevron,{size:l,error:Re,unstyled:a}),rightSectionPointerEvents:W||(xe?"all":"none"),rightSectionWidth:z,rightSectionProps:j,leftSection:q,leftSectionWidth:G,leftSectionPointerEvents:te,leftSectionProps:pe,inputContainer:be,inputWrapperOrder:le,withAsterisk:me,labelProps:Se,descriptionProps:ge,errorProps:tt,wrapperProps:Ue,description:mt,label:it,error:Re,multiline:!0,withErrorStyles:lt,__stylesApiProps:{...n,rightSectionPointerEvents:W||(xe?"all":"none"),multiline:!0},pointer:!Ge,onClick:()=>Ge?er.openDropdown():er.toggleDropdown(),"data-expanded":er.dropdownOpened||void 0,id:Jr,required:bn,mod:Bn,children:b.jsxs(TT.Group,{disabled:F,unstyled:a,...Ts("pillsList"),children:[oe,b.jsx(An.EventsTarget,{autoComplete:Wa,children:b.jsx(uR.Field,{...Cc,ref:t,id:Jr,placeholder:vn,type:!Ge&&!vn?"hidden":"visible",...Ts("inputField"),unstyled:a,onFocus:rt=>{L==null||L(rt),Ge&&er.openDropdown()},onBlur:rt=>{B==null||B(rt),er.closeDropdown(),ta("")},onKeyDown:Z,value:br,onChange:rt=>{ta(rt.currentTarget.value),Ge&&er.openDropdown(),w&&er.selectFirstOption()},disabled:F,readOnly:M||!Ge,pointer:!Ge})})]})})}),b.jsx(bhe,{data:fe?Ee:un,hidden:M||F,filter:T,search:br,limit:C,hiddenWhenEmpty:!Ge||!dt||fe&&Ee.length===0&&br.trim().length===0,withScrollArea:A,maxDropdownHeight:R,filterOptions:Ge,value:Qn,checkIconPosition:He,withCheckIcon:Nt,nothingFoundMessage:dt,unstyled:a,labelId:it?`${Jr}-label`:void 0,"aria-label":it?void 0:Ho["aria-label"],renderOption:Zt,scrollAreaProps:On})]}),b.jsx(An.HiddenInput,{name:gt,valuesDivider:Zn,value:Qn,form:ce,disabled:F,...vt})]})});RU.classes={...gl.classes,...An.classes};RU.displayName="@mantine/core/MultiSelect";var Phe={root:"m_f0824112",description:"m_57492dcc",section:"m_690090b5",label:"m_1f6ac4c4",body:"m_f07af9d2",children:"m_e17b862f",chevron:"m_1fd8a00b"};const xFe={},TFe=(e,{variant:t,color:n,childrenOffset:r,autoContrast:i})=>{const o=e.variantColorResolver({color:n||e.primaryColor,theme:e,variant:t||"light",autoContrast:i});return{root:{"--nl-bg":n||t?o.background:void 0,"--nl-hover":n||t?o.hover:void 0,"--nl-color":n||t?o.color:void 0},children:{"--nl-offset":_i(r)}}},LD=Yi((e,t)=>{const n=_e("NavLink",xFe,e),{classNames:r,className:i,style:o,styles:s,unstyled:a,vars:u,opened:l,defaultOpened:c,onChange:f,children:d,onClick:h,active:p,disabled:m,leftSection:g,rightSection:y,label:v,description:_,disableRightSectionRotation:w,noWrap:E,childrenOffset:S,onKeyDown:T,autoContrast:C,mod:A,...R}=n,N=pt({name:"NavLink",props:n,classes:Phe,className:i,style:o,classNames:r,styles:s,unstyled:a,vars:u,varsResolver:TFe}),[O,D]=Wi({value:l,defaultValue:c,finalValue:!1,onChange:f}),M=!!d,F=L=>{h==null||h(L),M&&(L.preventDefault(),D(!O))};return b.jsxs(b.Fragment,{children:[b.jsxs(Pi,{...N("root"),component:"a",ref:t,onClick:F,onKeyDown:L=>{T==null||T(L),L.nativeEvent.code==="Space"&&M&&(L.preventDefault(),D(!O))},unstyled:a,mod:[{disabled:m,active:p,expanded:O},A],...R,children:[g&&b.jsx(he,{component:"span",...N("section"),mod:{position:"left"},children:g}),b.jsxs(he,{...N("body"),mod:{"no-wrap":E},children:[b.jsx(he,{component:"span",...N("label"),children:v}),b.jsx(he,{component:"span",mod:{active:p},...N("description"),children:_})]}),(M||y)&&b.jsx(he,{...N("section"),component:"span",mod:{rotate:O&&!w,position:"right"},children:M?y||b.jsx(sb,{...N("chevron")}):y})]}),b.jsx(fD,{in:O,...N("collapse"),children:b.jsx("div",{...N("children"),children:d})})]})});LD.classes=Phe;LD.displayName="@mantine/core/NavLink";var Dhe={root:"m_a513464",icon:"m_a4ceffb",loader:"m_b0920b15",body:"m_a49ed24",title:"m_3feedf16",description:"m_3d733a3a",closeButton:"m_919a4d88"};const SFe={withCloseButton:!0},CFe=(e,{radius:t,color:n})=>({root:{"--notification-radius":t===void 0?void 0:vr(t),"--notification-color":n?ar(n,e):void 0}}),NU=Oe((e,t)=>{const n=_e("Notification",SFe,e),{className:r,color:i,radius:o,loading:s,withCloseButton:a,withBorder:u,title:l,icon:c,children:f,onClose:d,closeButtonProps:h,classNames:p,style:m,styles:g,unstyled:y,variant:v,vars:_,mod:w,...E}=n,S=pt({name:"Notification",classes:Dhe,props:n,className:r,style:m,classNames:p,styles:g,unstyled:y,vars:_,varsResolver:CFe});return b.jsxs(he,{...S("root"),mod:[{"data-with-icon":!!c||s,"data-with-border":u},w],ref:t,variant:v,...E,role:"alert",children:[c&&!s&&b.jsx("div",{...S("icon"),children:c}),s&&b.jsx(bh,{size:28,color:i,...S("loader")}),b.jsxs("div",{...S("body"),children:[l&&b.jsx("div",{...S("title"),children:l}),b.jsx(he,{...S("description"),mod:{"data-with-title":!!l},children:f})]}),a&&b.jsx(_h,{iconSize:16,color:"gray",...h,unstyled:y,onClick:d,...S("closeButton")})]})});NU.classes=Dhe;NU.displayName="@mantine/core/Notification";function Ohe(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}var ST;(function(e){e.event="event",e.props="prop"})(ST||(ST={}));function op(){}function AFe(e){var t,n=void 0;return function(){for(var r=[],i=arguments.length;i--;)r[i]=arguments[i];return t&&r.length===t.length&&r.every(function(o,s){return o===t[s]})||(t=r,n=e.apply(void 0,r)),n}}function CT(e){return!!(e||"").match(/\d/)}function T1(e){return e==null}function kFe(e){return typeof e=="number"&&isNaN(e)}function $he(e){return T1(e)||kFe(e)||typeof e=="number"&&!isFinite(e)}function Mhe(e){return e.replace(/[-[\]/{}()*+?.\\^$|]/g,"\\$&")}function IFe(e){switch(e){case"lakh":return/(\d+?)(?=(\d\d)+(\d)(?!\d))(\.\d+)?/g;case"wan":return/(\d)(?=(\d{4})+(?!\d))/g;case"thousand":default:return/(\d)(?=(\d{3})+(?!\d))/g}}function RFe(e,t,n){var r=IFe(n),i=e.search(/[1-9]/);return i=i===-1?e.length:i,e.substring(0,i)+e.substring(i,e.length).replace(r,"$1"+t)}function NFe(e){var t=k.useRef(e);t.current=e;var n=k.useRef(function(){for(var r=[],i=arguments.length;i--;)r[i]=arguments[i];return t.current.apply(t,r)});return n.current}function PU(e,t){t===void 0&&(t=!0);var n=e[0]==="-",r=n&&t;e=e.replace("-","");var i=e.split("."),o=i[0],s=i[1]||"";return{beforeDecimal:o,afterDecimal:s,hasNegation:n,addNegation:r}}function PFe(e){if(!e)return e;var t=e[0]==="-";t&&(e=e.substring(1,e.length));var n=e.split("."),r=n[0].replace(/^0+/,"")||"0",i=n[1]||"";return(t?"-":"")+r+(i?"."+i:"")}function Lhe(e,t,n){for(var r="",i=n?"0":"",o=0;o<=t-1;o++)r+=e[o]||i;return r}function GJ(e,t){return Array(t+1).join(e)}function Fhe(e){var t=e+"",n=t[0]==="-"?"-":"";n&&(t=t.substring(1));var r=t.split(/[eE]/g),i=r[0],o=r[1];if(o=Number(o),!o)return n+i;i=i.replace(".","");var s=1+o,a=i.length;return s<0?i="0."+GJ("0",Math.abs(s))+i:s>=a?i=i+GJ("0",s-a):i=(i.substring(0,s)||"0")+"."+i.substring(s),n+i}function YJ(e,t,n){if(["","-"].indexOf(e)!==-1)return e;var r=(e.indexOf(".")!==-1||n)&&t,i=PU(e),o=i.beforeDecimal,s=i.afterDecimal,a=i.hasNegation,u=parseFloat("0."+(s||"0")),l=s.length<=t?"0."+s:u.toFixed(t),c=l.split("."),f=o;o&&Number(c[0])&&(f=o.split("").reverse().reduce(function(m,g,y){return m.length>y?(Number(m[0])+Number(g)).toString()+m.substring(1,m.length):g+m},c[0]));var d=Lhe(c[1]||"",t,n),h=a?"-":"",p=r?".":"";return""+h+f+p+d}function Fg(e,t){if(e.value=e.value,e!==null){if(e.createTextRange){var n=e.createTextRange();return n.move("character",t),n.select(),!0}return e.selectionStart||e.selectionStart===0?(e.focus(),e.setSelectionRange(t,t),!0):(e.focus(),!1)}}var jhe=AFe(function(e,t){for(var n=0,r=0,i=e.length,o=t.length;e[n]===t[n]&&n<i;)n++;for(;e[i-1-r]===t[o-1-r]&&o-r>n&&i-r>n;)r++;return{from:{start:n,end:i-r},to:{start:n,end:o-r}}}),DFe=function(e,t){var n=Math.min(e.selectionStart,t);return{from:{start:n,end:e.selectionEnd},to:{start:n,end:t}}};function OFe(e,t,n){return Math.min(Math.max(e,t),n)}function cL(e){return Math.max(e.selectionStart,e.selectionEnd)}function $Fe(){return typeof navigator<"u"&&!(navigator.platform&&/iPhone|iPod/.test(navigator.platform))}function MFe(e){return{from:{start:0,end:0},to:{start:0,end:e.length},lastValue:""}}function LFe(e){var t=e.currentValue,n=e.formattedValue,r=e.currentValueIndex,i=e.formattedValueIndex;return t[r]===n[i]}function FFe(e,t,n,r,i,o,s){s===void 0&&(s=LFe);var a=i.findIndex(function(w){return w}),u=e.slice(0,a);!t&&!n.startsWith(u)&&(t=u,n=u+n,r=r+u.length);for(var l=n.length,c=e.length,f={},d=new Array(l),h=0;h<l;h++){d[h]=-1;for(var p=0,m=c;p<m;p++){var g=s({currentValue:n,lastValue:t,formattedValue:e,currentValueIndex:h,formattedValueIndex:p});if(g&&f[p]!==!0){d[h]=p,f[p]=!0;break}}}for(var y=r;y<l&&(d[y]===-1||!o(n[y]));)y++;var v=y===l||d[y]===-1?c:d[y];for(y=r-1;y>0&&d[y]===-1;)y--;var _=y===-1||d[y]===-1?0:d[y]+1;return _>v?v:r-_<v-r?_:v}function KJ(e,t,n,r){var i=e.length;if(t=OFe(t,0,i),r==="left"){for(;t>=0&&!n[t];)t--;t===-1&&(t=n.indexOf(!0))}else{for(;t<=i&&!n[t];)t++;t>i&&(t=n.lastIndexOf(!0))}return t===-1&&(t=i),t}function jFe(e){for(var t=Array.from({length:e.length+1}).map(function(){return!0}),n=0,r=t.length;n<r;n++)t[n]=!!(CT(e[n])||CT(e[n-1]));return t}function Bhe(e,t,n,r,i,o){o===void 0&&(o=op);var s=NFe(function(p,m){var g,y;return $he(p)?(y="",g=""):typeof p=="number"||m?(y=typeof p=="number"?Fhe(p):p,g=r(y)):(y=i(p,void 0),g=r(y)),{formattedValue:g,numAsString:y}}),a=k.useState(function(){return s(T1(e)?t:e,n)}),u=a[0],l=a[1],c=function(p,m){p.formattedValue!==u.formattedValue&&l({formattedValue:p.formattedValue,numAsString:p.value}),o(p,m)},f=e,d=n;T1(e)&&(f=u.numAsString,d=!0);var h=s(f,d);return k.useMemo(function(){l(h)},[h.formattedValue]),[u,c]}function BFe(e){return e.replace(/[^0-9]/g,"")}function UFe(e){return e}function zFe(e){var t=e.type;t===void 0&&(t="text");var n=e.displayType;n===void 0&&(n="input");var r=e.customInput,i=e.renderText,o=e.getInputRef,s=e.format;s===void 0&&(s=UFe);var a=e.removeFormatting;a===void 0&&(a=BFe);var u=e.defaultValue,l=e.valueIsNumericString,c=e.onValueChange,f=e.isAllowed,d=e.onChange;d===void 0&&(d=op);var h=e.onKeyDown;h===void 0&&(h=op);var p=e.onMouseUp;p===void 0&&(p=op);var m=e.onFocus;m===void 0&&(m=op);var g=e.onBlur;g===void 0&&(g=op);var y=e.value,v=e.getCaretBoundary;v===void 0&&(v=jFe);var _=e.isValidInputCharacter;_===void 0&&(_=CT);var w=e.isCharacterSame,E=Ohe(e,["type","displayType","customInput","renderText","getInputRef","format","removeFormatting","defaultValue","valueIsNumericString","onValueChange","isAllowed","onChange","onKeyDown","onMouseUp","onFocus","onBlur","value","getCaretBoundary","isValidInputCharacter","isCharacterSame"]),S=Bhe(y,u,!!l,s,a,c),T=S[0],C=T.formattedValue,A=T.numAsString,R=S[1],N=k.useRef(),O=k.useRef({formattedValue:C,numAsString:A}),D=function(Re,$e){O.current={formattedValue:Re.formattedValue,numAsString:Re.value},R(Re,$e)},M=k.useState(!1),F=M[0],L=M[1],B=k.useRef(null),U=k.useRef({setCaretTimeout:null,focusTimeout:null});k.useEffect(function(){return L(!0),function(){clearTimeout(U.current.setCaretTimeout),clearTimeout(U.current.focusTimeout)}},[]);var H=s,P=function(Re,$e){var Ge=parseFloat($e);return{formattedValue:Re,value:$e,floatValue:isNaN(Ge)?void 0:Ge}},z=function(Re,$e,Ge){Re.selectionStart===0&&Re.selectionEnd===Re.value.length||(Fg(Re,$e),U.current.setCaretTimeout=setTimeout(function(){Re.value===Ge&&Re.selectionStart!==$e&&Fg(Re,$e)},0))},W=function(Re,$e,Ge){return KJ(Re,$e,v(Re),Ge)},j=function(Re,$e,Ge){var dt=v($e),Nt=FFe($e,C,Re,Ge,dt,_,w);return Nt=KJ($e,Nt,dt),Nt},q=function(Re){var $e=Re.formattedValue;$e===void 0&&($e="");var Ge=Re.input,dt=Re.source,Nt=Re.event,He=Re.numAsString,fe;if(Ge){var lt=Re.inputValue||Ge.value,gt=cL(Ge);Ge.value=$e,fe=j(lt,$e,gt),fe!==void 0&&z(Ge,fe,$e)}$e!==C&&D(P($e,He),{event:Nt,source:dt})};k.useEffect(function(){var Re=O.current,$e=Re.formattedValue,Ge=Re.numAsString;(C!==$e||A!==Ge)&&D(P(C,A),{event:void 0,source:ST.props})},[C,A]);var G=B.current?cL(B.current):void 0,te=typeof window<"u"?k.useLayoutEffect:k.useEffect;te(function(){var Re=B.current;if(C!==O.current.formattedValue&&Re){var $e=j(O.current.formattedValue,C,G);Re.value=C,z(Re,$e,C)}},[C]);var pe=function(Re,$e,Ge){var dt=$e.target,Nt=N.current?DFe(N.current,dt.selectionEnd):jhe(C,Re),He=Object.assign(Object.assign({},Nt),{lastValue:C}),fe=a(Re,He),lt=H(fe);if(fe=a(lt,void 0),f&&!f(P(lt,fe))){var gt=$e.target,ce=cL(gt),Te=j(Re,C,ce);return gt.value=C,z(gt,Te,C),!1}return q({formattedValue:lt,numAsString:fe,inputValue:Re,event:$e,source:Ge,input:$e.target}),!0},be=function(Re,$e){$e===void 0&&($e=0);var Ge=Re.selectionStart,dt=Re.selectionEnd;N.current={selectionStart:Ge,selectionEnd:dt+$e}},le=function(Re){var $e=Re.target,Ge=$e.value,dt=pe(Ge,Re,ST.event);dt&&d(Re),N.current=void 0},me=function(Re){var $e=Re.target,Ge=Re.key,dt=$e.selectionStart,Nt=$e.selectionEnd,He=$e.value;He===void 0&&(He="");var fe;Ge==="ArrowLeft"||Ge==="Backspace"?fe=Math.max(dt-1,0):Ge==="ArrowRight"?fe=Math.min(dt+1,He.length):Ge==="Delete"&&(fe=dt);var lt=0;Ge==="Delete"&&dt===Nt&&(lt=1);var gt=Ge==="ArrowLeft"||Ge==="ArrowRight";if(fe===void 0||dt!==Nt&&!gt){h(Re),be($e,lt);return}var ce=fe;if(gt){var Te=Ge==="ArrowLeft"?"left":"right";ce=W(He,fe,Te),ce!==fe&&Re.preventDefault()}else Ge==="Delete"&&!_(He[fe])?ce=W(He,fe,"right"):Ge==="Backspace"&&!_(He[fe])&&(ce=W(He,fe,"left"));ce!==fe&&z($e,ce,He),h(Re),be($e,lt)},Se=function(Re){var $e=Re.target,Ge=function(){var dt=$e.selectionStart,Nt=$e.selectionEnd,He=$e.value;if(He===void 0&&(He=""),dt===Nt){var fe=W(He,dt);fe!==dt&&z($e,fe,He)}};Ge(),requestAnimationFrame(function(){Ge()}),p(Re),be($e)},ge=function(Re){Re.persist&&Re.persist();var $e=Re.target,Ge=Re.currentTarget;B.current=$e,U.current.focusTimeout=setTimeout(function(){var dt=$e.selectionStart,Nt=$e.selectionEnd,He=$e.value;He===void 0&&(He="");var fe=W(He,dt);fe!==dt&&!(dt===0&&Nt===He.length)&&z($e,fe,He),m(Object.assign(Object.assign({},Re),{currentTarget:Ge}))},0)},tt=function(Re){B.current=null,clearTimeout(U.current.focusTimeout),clearTimeout(U.current.setCaretTimeout),g(Re)},Ue=F&&$Fe()?"numeric":void 0,mt=Object.assign({inputMode:Ue},E,{type:t,value:C,onChange:le,onKeyDown:me,onMouseUp:Se,onFocus:ge,onBlur:tt});if(n==="text")return i?Yn.createElement(Yn.Fragment,null,i(C,E)||null):Yn.createElement("span",Object.assign({},E,{ref:o}),C);if(r){var it=r;return Yn.createElement(it,Object.assign({},mt,{ref:o}))}return Yn.createElement("input",Object.assign({},mt,{ref:o}))}function XJ(e,t){var n=t.decimalScale,r=t.fixedDecimalScale,i=t.prefix;i===void 0&&(i="");var o=t.suffix;o===void 0&&(o="");var s=t.allowNegative,a=t.thousandsGroupStyle;if(a===void 0&&(a="thousand"),e===""||e==="-")return e;var u=FD(t),l=u.thousandSeparator,c=u.decimalSeparator,f=n!==0&&e.indexOf(".")!==-1||n&&r,d=PU(e,s),h=d.beforeDecimal,p=d.afterDecimal,m=d.addNegation;return n!==void 0&&(p=Lhe(p,n,!!r)),l&&(h=RFe(h,l,a)),i&&(h=i+h),o&&(p=p+o),m&&(h="-"+h),e=h+(f&&c||"")+p,e}function FD(e){var t=e.decimalSeparator;t===void 0&&(t=".");var n=e.thousandSeparator,r=e.allowedDecimalSeparators;return n===!0&&(n=","),r||(r=[t,"."]),{decimalSeparator:t,thousandSeparator:n,allowedDecimalSeparators:r}}function VFe(e,t){e===void 0&&(e="");var n=new RegExp("(-)"),r=new RegExp("(-)(.)*(-)"),i=n.test(e),o=r.test(e);return e=e.replace(/-/g,""),i&&!o&&t&&(e="-"+e),e}function HFe(e,t){return new RegExp("(^-)|[0-9]|"+Mhe(e),"g")}function qFe(e,t,n){return e===""?!0:!(t!=null&&t.match(/\d/))&&!(n!=null&&n.match(/\d/))&&typeof e=="string"&&!isNaN(Number(e))}function WFe(e,t,n){var r;t===void 0&&(t=MFe(e));var i=n.allowNegative,o=n.prefix;o===void 0&&(o="");var s=n.suffix;s===void 0&&(s="");var a=n.decimalScale,u=t.from,l=t.to,c=l.start,f=l.end,d=FD(n),h=d.allowedDecimalSeparators,p=d.decimalSeparator,m=e[f]===p;if(CT(e)&&(e===o||e===s)&&t.lastValue==="")return e;if(f-c===1&&h.indexOf(e[c])!==-1){var g=a===0?"":p;e=e.substring(0,c)+g+e.substring(c+1,e.length)}var y=function(B,U,H){var P=!1,z=!1;o.startsWith("-")?P=!1:B.startsWith("--")?(P=!1,z=!0):s.startsWith("-")&&B.length===s.length?P=!1:B[0]==="-"&&(P=!0);var W=P?1:0;return z&&(W=2),W&&(B=B.substring(W),U-=W,H-=W),{value:B,start:U,end:H,hasNegation:P}},v=y(e,c,f),_=v.hasNegation;r=v,e=r.value,c=r.start,f=r.end;var w=y(t.lastValue,u.start,u.end),E=w.start,S=w.end,T=w.value,C=e.substring(c,f);e.length&&T.length&&(E>T.length-s.length||S<o.length)&&!(C&&s.startsWith(C))&&(e=T);var A=0;e.startsWith(o)?A+=o.length:c<o.length&&(A=c),e=e.substring(A),f-=A;var R=e.length,N=e.length-s.length;e.endsWith(s)?R=N:(f>N||f>e.length-s.length)&&(R=f),e=e.substring(0,R),e=VFe(_?"-"+e:e,i),e=(e.match(HFe(p))||[]).join("");var O=e.indexOf(p);e=e.replace(new RegExp(Mhe(p),"g"),function(B,U){return U===O?".":""});var D=PU(e,i),M=D.beforeDecimal,F=D.afterDecimal,L=D.addNegation;return l.end-l.start<u.end-u.start&&M===""&&m&&!parseFloat(F)&&(e=L?"-":""),e}function GFe(e,t){var n=t.prefix;n===void 0&&(n="");var r=t.suffix;r===void 0&&(r="");var i=Array.from({length:e.length+1}).map(function(){return!0}),o=e[0]==="-";i.fill(!1,0,n.length+(o?1:0));var s=e.length;return i.fill(!1,s-r.length+1,s+1),i}function YFe(e){var t=FD(e),n=t.thousandSeparator,r=t.decimalSeparator,i=e.prefix;i===void 0&&(i="");var o=e.allowNegative;if(o===void 0&&(o=!0),n===r)throw new Error(`
        Decimal separator can't be same as thousand separator.
        thousandSeparator: `+n+` (thousandSeparator = {true} is same as thousandSeparator = ",")
        decimalSeparator: `+r+` (default value for decimalSeparator is .)
     `);return i.startsWith("-")&&o&&(console.error(`
      Prefix can't start with '-' when allowNegative is true.
      prefix: `+i+`
      allowNegative: `+o+`
    `),o=!1),Object.assign(Object.assign({},e),{allowNegative:o})}function KFe(e){e=YFe(e),e.decimalSeparator,e.allowedDecimalSeparators,e.thousandsGroupStyle;var t=e.suffix,n=e.allowNegative,r=e.allowLeadingZeros,i=e.onKeyDown;i===void 0&&(i=op);var o=e.onBlur;o===void 0&&(o=op);var s=e.thousandSeparator,a=e.decimalScale,u=e.fixedDecimalScale,l=e.prefix;l===void 0&&(l="");var c=e.defaultValue,f=e.value,d=e.valueIsNumericString,h=e.onValueChange,p=Ohe(e,["decimalSeparator","allowedDecimalSeparators","thousandsGroupStyle","suffix","allowNegative","allowLeadingZeros","onKeyDown","onBlur","thousandSeparator","decimalScale","fixedDecimalScale","prefix","defaultValue","value","valueIsNumericString","onValueChange"]),m=FD(e),g=m.decimalSeparator,y=m.allowedDecimalSeparators,v=function(L){return XJ(L,e)},_=function(L,B){return WFe(L,B,e)},w=T1(f)?c:f,E=d??qFe(w,l,t);T1(f)?T1(c)||(E=E||typeof c=="number"):E=E||typeof f=="number";var S=function(L){return $he(L)?L:(typeof L=="number"&&(L=Fhe(L)),E&&typeof a=="number"?YJ(L,a,!!u):L)},T=Bhe(S(f),S(c),!!E,v,_,h),C=T[0],A=C.numAsString,R=C.formattedValue,N=T[1],O=function(L){var B=L.target,U=L.key,H=B.selectionStart,P=B.selectionEnd,z=B.value;if(z===void 0&&(z=""),(U==="Backspace"||U==="Delete")&&P<l.length){L.preventDefault();return}if(H!==P){i(L);return}U==="Backspace"&&z[0]==="-"&&H===l.length+1&&n&&Fg(B,1),a&&u&&(U==="Backspace"&&z[H-1]===g?(Fg(B,H-1),L.preventDefault()):U==="Delete"&&z[H]===g&&L.preventDefault()),y!=null&&y.includes(U)&&z[H]===g&&Fg(B,H+1);var W=s===!0?",":s;U==="Backspace"&&z[H-1]===W&&Fg(B,H-1),U==="Delete"&&z[H]===W&&Fg(B,H+1),i(L)},D=function(L){var B=A;if(B.match(/\d/g)||(B=""),r||(B=PFe(B)),u&&a&&(B=YJ(B,a,u)),B!==A){var U=XJ(B,e);N({formattedValue:U,value:B,floatValue:parseFloat(B)},{event:L,source:ST.event})}o(L)},M=function(L){return L===g?!0:CT(L)},F=function(L){var B=L.currentValue,U=L.lastValue,H=L.formattedValue,P=L.currentValueIndex,z=L.formattedValueIndex,W=B[P],j=H[z],q=jhe(U,B),G=q.to;return P>=G.start&&P<G.end&&y&&y.includes(W)&&j===g?!0:W===j};return Object.assign(Object.assign({},p),{value:R,valueIsNumericString:!1,isValidInputCharacter:M,isCharacterSame:F,onValueChange:N,format:v,removeFormatting:_,getCaretBoundary:function(L){return GFe(L,e)},onKeyDown:O,onBlur:D})}function XFe(e){var t=KFe(e);return Yn.createElement(zFe,Object.assign({},t))}function QJ({direction:e,style:t,...n}){return b.jsx("svg",{style:{width:"var(--ni-chevron-size)",height:"var(--ni-chevron-size)",transform:e==="up"?"rotate(180deg)":void 0,...t},viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...n,children:b.jsx("path",{d:"M3.13523 6.15803C3.3241 5.95657 3.64052 5.94637 3.84197 6.13523L7.5 9.56464L11.158 6.13523C11.3595 5.94637 11.6759 5.95657 11.8648 6.15803C12.0536 6.35949 12.0434 6.67591 11.842 6.86477L7.84197 10.6148C7.64964 10.7951 7.35036 10.7951 7.15803 10.6148L3.15803 6.86477C2.95657 6.67591 2.94637 6.35949 3.13523 6.15803Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}var r5={root:"m_e2f5cd4e",controls:"m_95e17d22",control:"m_80b4b171"};const QFe=/^(0\.0*|-0(\.0*)?)$/,JFe=/^-?0\d+(\.\d+)?\.?$/;function ZFe(e){return(typeof e=="number"?e<Number.MAX_SAFE_INTEGER:!Number.isNaN(Number(e)))&&!Number.isNaN(e)}function JJ(e,t,n){if(e===void 0)return!0;const r=t===void 0||e>=t,i=n===void 0||e<=n;return r&&i}const e5e={step:1,clampBehavior:"blur",allowDecimal:!0,allowNegative:!0,withKeyboardEvents:!0,allowLeadingZeros:!0,trimLeadingZeroesOnBlur:!0,startValue:0},t5e=(e,{size:t})=>({controls:{"--ni-chevron-size":Wt(t,"ni-chevron-size")}}),Ty=Oe((e,t)=>{const n=_e("NumberInput",e5e,e),{className:r,classNames:i,styles:o,unstyled:s,vars:a,onChange:u,onValueChange:l,value:c,defaultValue:f,max:d,min:h,step:p,hideControls:m,rightSection:g,isAllowed:y,clampBehavior:v,onBlur:_,allowDecimal:w,decimalScale:E,onKeyDown:S,onKeyDownCapture:T,handlersRef:C,startValue:A,disabled:R,rightSectionPointerEvents:N,allowNegative:O,readOnly:D,size:M,rightSectionWidth:F,stepHoldInterval:L,stepHoldDelay:B,allowLeadingZeros:U,withKeyboardEvents:H,trimLeadingZeroesOnBlur:P,...z}=n,W=pt({name:"NumberInput",classes:r5,props:n,classNames:i,styles:o,unstyled:s,vars:a,varsResolver:t5e}),{resolvedClassNames:j,resolvedStyles:q}=gh({classNames:i,styles:o,props:n}),[G,te]=Wi({value:c,defaultValue:f,onChange:u}),pe=B!==void 0&&L!==void 0,be=k.useRef(null),le=k.useRef(null),me=k.useRef(0),Se=(fe,lt)=>{lt.source==="event"&&te(ZFe(fe.floatValue)&&!QFe.test(fe.value)&&!(U&&JFe.test(fe.value))?fe.floatValue:fe.value),l==null||l(fe,lt)},ge=fe=>{const lt=String(fe).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return lt?Math.max(0,(lt[1]?lt[1].length:0)-(lt[2]?+lt[2]:0)):0},tt=fe=>{be.current&&typeof fe<"u"&&be.current.setSelectionRange(fe,fe)},Ue=k.useRef();Ue.current=()=>{let fe;const lt=ge(G),gt=ge(p),ce=Math.max(lt,gt),Te=10**ce;if(typeof G!="number"||Number.isNaN(G))fe=Yc(A,h,d);else if(d!==void 0){const st=(Math.round(G*Te)+Math.round(p*Te))/Te;fe=st<=d?st:d}else fe=(Math.round(G*Te)+Math.round(p*Te))/Te;const ze=fe.toFixed(ce);te(parseFloat(ze)),l==null||l({floatValue:parseFloat(ze),formattedValue:ze,value:ze},{source:"increment"}),setTimeout(()=>{var st;return tt((st=be.current)==null?void 0:st.value.length)},0)};const mt=k.useRef();mt.current=()=>{let fe;const lt=h!==void 0?h:O?Number.MIN_SAFE_INTEGER:0,gt=ge(G),ce=ge(p),Te=Math.max(gt,ce),ze=10**Te;if(typeof G!="number"||Number.isNaN(G))fe=Yc(A,lt,d);else{const vt=(Math.round(G*ze)-Math.round(p*ze))/ze;fe=lt!==void 0&&vt<lt?lt:vt}const st=fe.toFixed(Te);te(parseFloat(st)),l==null||l({floatValue:parseFloat(st),formattedValue:st,value:st},{source:"decrement"}),setTimeout(()=>{var vt;return tt((vt=be.current)==null?void 0:vt.value.length)},0)};const it=fe=>{S==null||S(fe),!(D||!H)&&(fe.key==="ArrowUp"&&(fe.preventDefault(),Ue.current()),fe.key==="ArrowDown"&&(fe.preventDefault(),mt.current()))},Re=fe=>{if(T==null||T(fe),fe.key==="Backspace"){const lt=be.current;lt.selectionStart===0&&lt.selectionStart===lt.selectionEnd&&(fe.preventDefault(),window.setTimeout(()=>tt(0),0))}};s7(C,{increment:Ue.current,decrement:mt.current});const $e=fe=>{fe?Ue.current():mt.current(),me.current+=1},Ge=fe=>{if($e(fe),pe){const lt=typeof L=="number"?L:L(me.current);le.current=window.setTimeout(()=>Ge(fe),lt)}},dt=(fe,lt)=>{var gt;fe.preventDefault(),(gt=be.current)==null||gt.focus(),$e(lt),pe&&(le.current=window.setTimeout(()=>Ge(lt),B))},Nt=()=>{le.current&&window.clearTimeout(le.current),le.current=null,me.current=0},He=b.jsxs("div",{...W("controls"),children:[b.jsx(Pi,{...W("control"),tabIndex:-1,"aria-hidden":!0,disabled:R||typeof G=="number"&&d!==void 0&&G>=d,mod:{direction:"up"},onMouseDown:fe=>fe.preventDefault(),onPointerDown:fe=>{dt(fe,!0)},onPointerUp:Nt,onPointerLeave:Nt,children:b.jsx(QJ,{direction:"up"})}),b.jsx(Pi,{...W("control"),tabIndex:-1,"aria-hidden":!0,disabled:R||typeof G=="number"&&h!==void 0&&G<=h,mod:{direction:"down"},onMouseDown:fe=>fe.preventDefault(),onPointerDown:fe=>{dt(fe,!1)},onPointerUp:Nt,onPointerLeave:Nt,children:b.jsx(QJ,{direction:"down"})})]});return b.jsx(gl,{component:XFe,allowNegative:O,className:fi(r5.root,r),size:M,...z,readOnly:D,disabled:R,value:G,getInputRef:Gi(t,be),onValueChange:Se,rightSection:m||D?g:g||He,classNames:j,styles:q,unstyled:s,__staticSelector:"NumberInput",decimalScale:w?E:0,onKeyDown:it,onKeyDownCapture:Re,rightSectionPointerEvents:N??(R?"none":void 0),rightSectionWidth:F??`var(--ni-right-section-width-${M||"sm"})`,allowLeadingZeros:U,onBlur:fe=>{if(_==null||_(fe),v==="blur"&&typeof G=="number"&&Yc(G,h,d)!==G&&te(Yc(G,h,d)),P&&typeof G=="string"){const lt=G.replace(/^0+/,""),gt=parseFloat(lt);te(Number.isNaN(gt)?lt:gt)}},isAllowed:fe=>v==="strict"?y?y(fe)&&JJ(fe.floatValue,h,d):JJ(fe.floatValue,h,d):y?y(fe):!0})});Ty.classes={...gl.classes,...r5};Ty.displayName="@mantine/core/NumberInput";const[n5e,Uhe]=go("Progress.Root component was not found in tree");var XS={root:"m_db6d6462",section:"m_2242eb65","stripes-animation":"m_81a374bd",label:"m_91e40b74"};const r5e={},DU=Oe((e,t)=>{const{classNames:n,className:r,style:i,styles:o,vars:s,...a}=_e("ProgressLabel",r5e,e),u=Uhe();return b.jsx(he,{ref:t,...u.getStyles("label",{className:r,style:i,classNames:n,styles:o}),...a})});DU.classes=XS;DU.displayName="@mantine/core/ProgressLabel";const i5e={},o5e=(e,{size:t,radius:n,transitionDuration:r})=>({root:{"--progress-size":Wt(t,"progress-size"),"--progress-radius":n===void 0?void 0:vr(n),"--progress-transition-duration":typeof r=="number"?`${r}ms`:void 0}}),jD=Oe((e,t)=>{const n=_e("ProgressRoot",i5e,e),{classNames:r,className:i,style:o,styles:s,unstyled:a,vars:u,autoContrast:l,transitionDuration:c,...f}=n,d=pt({name:"Progress",classes:XS,props:n,className:i,style:o,classNames:r,styles:s,unstyled:a,vars:u,varsResolver:o5e});return b.jsx(n5e,{value:{getStyles:d,autoContrast:l},children:b.jsx(he,{ref:t,...d("root"),...f})})});jD.classes=XS;jD.displayName="@mantine/core/ProgressRoot";const s5e={withAria:!0},BD=Oe((e,t)=>{const{classNames:n,className:r,style:i,styles:o,vars:s,value:a,withAria:u,color:l,striped:c,animated:f,mod:d,...h}=_e("ProgressSection",s5e,e),p=Uhe(),m=Oi(),g=u?{role:"progressbar","aria-valuemax":100,"aria-valuemin":0,"aria-valuenow":a,"aria-valuetext":`${a}%`}:{};return b.jsx(he,{ref:t,...p.getStyles("section",{className:r,classNames:n,styles:o,style:i}),...h,...g,mod:[{striped:c||f,animated:f},d],__vars:{"--progress-section-width":`${a}%`,"--progress-section-color":ar(l,m),"--progress-label-color":u_(p.autoContrast,m)?yy({color:l,theme:m,autoContrast:p.autoContrast}):void 0}})});BD.classes=XS;BD.displayName="@mantine/core/ProgressSection";const a5e={},v_=Oe((e,t)=>{const n=_e("Progress",a5e,e),{value:r,classNames:i,styles:o,vars:s,color:a,striped:u,animated:l,"aria-label":c,...f}=n,{resolvedClassNames:d,resolvedStyles:h}=gh({classNames:i,styles:o,props:n});return b.jsx(jD,{ref:t,classNames:d,styles:h,vars:s,...f,children:b.jsx(BD,{value:r,color:a,striped:u,animated:l,"aria-label":c})})});v_.classes=XS;v_.displayName="@mantine/core/Progress";v_.Section=BD;v_.Root=jD;v_.Label=DU;const[u5e,zhe]=a_(),[l5e,c5e]=a_();var Vhe={card:"m_9dc8ae12"};const f5e={withBorder:!0},d5e=(e,{radius:t})=>({card:{"--card-radius":vr(t)}}),OU=Oe((e,t)=>{const n=_e("RadioCard",f5e,e),{classNames:r,className:i,style:o,styles:s,unstyled:a,vars:u,checked:l,mod:c,withBorder:f,value:d,onClick:h,name:p,onKeyDown:m,...g}=n,y=pt({name:"RadioCard",classes:Vhe,props:n,className:i,style:o,classNames:r,styles:s,unstyled:a,vars:u,varsResolver:d5e,rootSelector:"card"}),{dir:v}=Pf(),_=zhe(),w=typeof l=="boolean"?l:(_==null?void 0:_.value)===d||!1,E=p||(_==null?void 0:_.name),S=T=>{if(m==null||m(T),["ArrowDown","ArrowUp","ArrowLeft","ArrowRight"].includes(T.nativeEvent.code)){T.preventDefault();const C=Array.from(document.querySelectorAll(`[role="radio"][name="${E||"__mantine"}"]`)),A=C.findIndex(O=>O===T.target),R=A+1>=C.length?0:A+1,N=A-1<0?C.length-1:A-1;T.nativeEvent.code==="ArrowDown"&&(C[R].focus(),C[R].click()),T.nativeEvent.code==="ArrowUp"&&(C[N].focus(),C[N].click()),T.nativeEvent.code==="ArrowLeft"&&(C[v==="ltr"?N:R].focus(),C[v==="ltr"?N:R].click()),T.nativeEvent.code==="ArrowRight"&&(C[v==="ltr"?R:N].focus(),C[v==="ltr"?R:N].click())}};return b.jsx(l5e,{value:{checked:w},children:b.jsx(Pi,{ref:t,mod:[{"with-border":f,checked:w},c],...y("card"),...g,role:"radio","aria-checked":w,name:E,onClick:T=>{h==null||h(T),_==null||_.onChange(d||"")},onKeyDown:S})})});OU.displayName="@mantine/core/RadioCard";OU.classes=Vhe;const h5e={},$U=Oe((e,t)=>{const{value:n,defaultValue:r,onChange:i,size:o,wrapperProps:s,children:a,name:u,readOnly:l,...c}=_e("RadioGroup",h5e,e),f=Js(u),[d,h]=Wi({value:n,defaultValue:r,finalValue:"",onChange:i}),p=m=>!l&&h(typeof m=="string"?m:m.currentTarget.value);return b.jsx(u5e,{value:{value:d,onChange:p,size:o,name:f},children:b.jsx($r.Wrapper,{size:o,ref:t,...s,...c,labelElement:"div",__staticSelector:"RadioGroup",children:b.jsx(fU,{role:"radiogroup",children:a})})})});$U.classes=$r.Wrapper.classes;$U.displayName="@mantine/core/RadioGroup";function Hhe({size:e,style:t,...n}){return b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 5 5",style:{width:we(e),height:we(e),...t},"aria-hidden":!0,...n,children:b.jsx("circle",{cx:"2.5",cy:"2.5",r:"2.5",fill:"currentColor"})})}var qhe={indicator:"m_717d7ff6",icon:"m_3e4da632","indicator--outline":"m_2980836c"};const p5e={icon:Hhe},m5e=(e,{radius:t,color:n,size:r,iconColor:i,variant:o,autoContrast:s})=>{const a=Nf({color:n||e.primaryColor,theme:e}),u=a.isThemeColor&&a.shade===void 0?`var(--mantine-color-${a.color}-outline)`:a.color;return{indicator:{"--radio-size":Wt(r,"radio-size"),"--radio-radius":t===void 0?void 0:vr(t),"--radio-color":o==="outline"?u:ar(n,e),"--radio-icon-size":Wt(r,"radio-icon-size"),"--radio-icon-color":i?ar(i,e):u_(s,e)?yy({color:n,theme:e,autoContrast:s}):void 0}}},MU=Oe((e,t)=>{const n=_e("RadioIndicator",p5e,e),{classNames:r,className:i,style:o,styles:s,unstyled:a,vars:u,icon:l,radius:c,color:f,iconColor:d,autoContrast:h,checked:p,mod:m,variant:g,disabled:y,...v}=n,_=l,w=pt({name:"RadioIndicator",classes:qhe,props:n,className:i,style:o,classNames:r,styles:s,unstyled:a,vars:u,varsResolver:m5e,rootSelector:"indicator"}),E=c5e(),S=typeof p=="boolean"?p:(E==null?void 0:E.checked)||!1;return b.jsx(he,{ref:t,...w("indicator",{variant:g}),variant:g,mod:[{checked:S,disabled:y},m],...v,children:b.jsx(_,{...w("icon")})})});MU.displayName="@mantine/core/RadioIndicator";MU.classes=qhe;var Whe={root:"m_f3f1af94",inner:"m_89c4f5e4",icon:"m_f3ed6b2b",radio:"m_8a3dbb89","radio--outline":"m_1bfe9d39"};const g5e={labelPosition:"right"},y5e=(e,{size:t,radius:n,color:r,iconColor:i,variant:o,autoContrast:s})=>{const a=Nf({color:r||e.primaryColor,theme:e}),u=a.isThemeColor&&a.shade===void 0?`var(--mantine-color-${a.color}-outline)`:a.color;return{root:{"--radio-size":Wt(t,"radio-size"),"--radio-radius":n===void 0?void 0:vr(n),"--radio-color":o==="outline"?u:ar(r,e),"--radio-icon-color":i?ar(i,e):u_(s,e)?yy({color:r,theme:e,autoContrast:s}):void 0,"--radio-icon-size":Wt(t,"radio-icon-size")}}},R0=Oe((e,t)=>{const n=_e("Radio",g5e,e),{classNames:r,className:i,style:o,styles:s,unstyled:a,vars:u,id:l,size:c,label:f,labelPosition:d,description:h,error:p,radius:m,color:g,variant:y,disabled:v,wrapperProps:_,icon:w=Hhe,rootRef:E,iconColor:S,onChange:T,mod:C,...A}=n,R=pt({name:"Radio",classes:Whe,props:n,className:i,style:o,classNames:r,styles:s,unstyled:a,vars:u,varsResolver:y5e}),N=zhe(),O=(N==null?void 0:N.size)??c,D=n.size?c:O,{styleProps:M,rest:F}=by(A),L=Js(l),B=N?{checked:N.value===F.value,name:F.name??N.name,onChange:U=>{N.onChange(U),T==null||T(U)}}:{};return b.jsx(bD,{...R("root"),__staticSelector:"Radio",__stylesApiProps:n,id:L,size:D,labelPosition:d,label:f,description:h,error:p,disabled:v,classNames:r,styles:s,unstyled:a,"data-checked":B.checked||void 0,variant:y,ref:E,mod:C,...M,..._,children:b.jsxs(he,{...R("inner"),mod:{"label-position":d},children:[b.jsx(he,{...R("radio",{focusable:!0,variant:y}),onChange:T,...F,...B,component:"input",mod:{error:!!p},ref:t,id:L,disabled:v,type:"radio"}),b.jsx(w,{...R("icon"),"aria-hidden":!0})]})})});R0.classes=Whe;R0.displayName="@mantine/core/Radio";R0.Group=$U;R0.Card=OU;R0.Indicator=MU;const v5e={duration:100,transition:"fade"};function b5e(e,t){return{...v5e,...t,...e}}function _5e({offset:e,position:t}){const[n,r]=k.useState(!1),i=k.useRef(),{x:o,y:s,elements:a,refs:u,update:l,placement:c}=N7({placement:t,middleware:[A7({crossAxis:!0,padding:5,rootBoundary:"document"})]}),f=c.includes("right")?e:t.includes("left")?e*-1:0,d=c.includes("bottom")?e:t.includes("top")?e*-1:0,h=k.useCallback(({clientX:p,clientY:m})=>{u.setPositionReference({getBoundingClientRect(){return{width:0,height:0,x:p,y:m,left:p+f,top:m+d,right:p,bottom:m}}})},[a.reference]);return k.useEffect(()=>{if(u.floating.current){const p=i.current;p.addEventListener("mousemove",h);const m=$d(u.floating.current);return m.forEach(g=>{g.addEventListener("scroll",l)}),()=>{p.removeEventListener("mousemove",h),m.forEach(g=>{g.removeEventListener("scroll",l)})}}},[a.reference,u.floating.current,l,h,n]),{handleMouseMove:h,x:o,y:s,opened:n,setOpened:r,boundaryRef:i,floating:u.setFloating}}var UD={tooltip:"m_1b3c8819",arrow:"m_f898399f"};const w5e={refProp:"ref",withinPortal:!0,offset:10,position:"right",zIndex:Nu("popover")},E5e=(e,{radius:t,color:n})=>({tooltip:{"--tooltip-radius":t===void 0?void 0:vr(t),"--tooltip-bg":n?ar(n,e):void 0,"--tooltip-color":n?"var(--mantine-color-white)":void 0}}),LU=Oe((e,t)=>{const n=_e("TooltipFloating",w5e,e),{children:r,refProp:i,withinPortal:o,style:s,className:a,classNames:u,styles:l,unstyled:c,radius:f,color:d,label:h,offset:p,position:m,multiline:g,zIndex:y,disabled:v,variant:_,vars:w,portalProps:E,...S}=n,T=Oi(),C=pt({name:"TooltipFloating",props:n,classes:UD,className:a,style:s,classNames:u,styles:l,unstyled:c,rootSelector:"tooltip",vars:w,varsResolver:E5e}),{handleMouseMove:A,x:R,y:N,opened:O,boundaryRef:D,floating:M,setOpened:F}=_5e({offset:p,position:m});if(!Om(r))throw new Error("[@mantine/core] Tooltip.Floating component children should be an element or a component that accepts ref, fragments, strings, numbers and other primitive values are not supported");const L=Gi(D,r.ref,t),B=H=>{var P,z;(z=(P=r.props).onMouseEnter)==null||z.call(P,H),A(H),F(!0)},U=H=>{var P,z;(z=(P=r.props).onMouseLeave)==null||z.call(P,H),F(!1)};return b.jsxs(b.Fragment,{children:[b.jsx(f_,{...E,withinPortal:o,children:b.jsx(he,{...S,...C("tooltip",{style:{...h7(s,T),zIndex:y,display:!v&&O?"block":"none",top:(N&&Math.round(N))??"",left:(R&&Math.round(R))??""}}),variant:_,ref:M,mod:{multiline:g},children:h})}),k.cloneElement(r,{...r.props,[i]:L,onMouseEnter:B,onMouseLeave:U})]})});LU.classes=UD;LU.displayName="@mantine/core/TooltipFloating";const Ghe=k.createContext(!1),x5e=Ghe.Provider,T5e=()=>k.useContext(Ghe),S5e={openDelay:0,closeDelay:0};function Yhe(e){const{openDelay:t,closeDelay:n,children:r}=_e("TooltipGroup",S5e,e);return b.jsx(x5e,{value:!0,children:b.jsx(TMe,{delay:{open:t,close:n},children:r})})}Yhe.displayName="@mantine/core/TooltipGroup";function C5e(e){var S,T,C;const[t,n]=k.useState(!1),i=typeof e.opened=="boolean"?e.opened:t,o=T5e(),s=Js(),{delay:a,currentId:u,setCurrentId:l}=Pde(),c=k.useCallback(A=>{n(A),A&&l(s)},[l,s]),{x:f,y:d,context:h,refs:p,update:m,placement:g,middlewareData:{arrow:{x:y,y:v}={}}}=N7({strategy:e.strategy,placement:e.position,open:i,onOpenChange:c,middleware:[Ade(e.offset),A7({padding:8}),ZF(),kde({element:e.arrowRef,padding:e.arrowOffset}),...e.inline?[e5()]:[]]}),{getReferenceProps:_,getFloatingProps:w}=NMe([xMe(h,{enabled:(S=e.events)==null?void 0:S.hover,delay:o?a:{open:e.openDelay,close:e.closeDelay},mouseOnly:!((T=e.events)!=null&&T.touch)}),RMe(h,{enabled:(C=e.events)==null?void 0:C.focus,visibleOnly:!0}),DMe(h,{role:"tooltip"}),kMe(h,{enabled:typeof e.opened>"u"}),SMe(h,{id:s})]);jde({opened:i,position:e.position,positionDependencies:e.positionDependencies,floating:{refs:p,update:m}}),vf(()=>{var A;(A=e.onPositionChange)==null||A.call(e,g)},[g]);const E=i&&u&&u!==s;return{x:f,y:d,arrowX:y,arrowY:v,reference:p.setReference,floating:p.setFloating,getFloatingProps:w,getReferenceProps:_,isGroupPhase:E,opened:i,placement:g}}const ZJ={position:"top",refProp:"ref",withinPortal:!0,inline:!1,arrowSize:4,arrowOffset:5,arrowRadius:0,arrowPosition:"side",offset:5,transitionProps:{duration:100,transition:"fade"},events:{hover:!0,focus:!1,touch:!1},zIndex:Nu("popover"),positionDependencies:[]},A5e=(e,{radius:t,color:n})=>({tooltip:{"--tooltip-radius":t===void 0?void 0:vr(t),"--tooltip-bg":n?ar(n,e):void 0,"--tooltip-color":n?"var(--mantine-color-white)":void 0}}),zr=Oe((e,t)=>{const n=_e("Tooltip",ZJ,e),{children:r,position:i,refProp:o,label:s,openDelay:a,closeDelay:u,onPositionChange:l,opened:c,withinPortal:f,radius:d,color:h,classNames:p,styles:m,unstyled:g,style:y,className:v,withArrow:_,arrowSize:w,arrowOffset:E,arrowRadius:S,arrowPosition:T,offset:C,transitionProps:A,multiline:R,events:N,zIndex:O,disabled:D,positionDependencies:M,onClick:F,onMouseEnter:L,onMouseLeave:B,inline:U,variant:H,keepMounted:P,vars:z,portalProps:W,mod:j,floatingStrategy:q,...G}=_e("Tooltip",ZJ,n),{dir:te}=Pf(),pe=k.useRef(null),be=C5e({position:Dde(te,i),closeDelay:u,openDelay:a,onPositionChange:l,opened:c,events:N,arrowRef:pe,arrowOffset:E,offset:typeof C=="number"?C+(_?w/2:0):C,positionDependencies:[...M,r],inline:U,strategy:q}),le=pt({name:"Tooltip",props:n,classes:UD,className:v,style:y,classNames:p,styles:m,unstyled:g,rootSelector:"tooltip",vars:z,varsResolver:A5e});if(!Om(r))throw new Error("[@mantine/core] Tooltip component children should be an element or a component that accepts ref, fragments, strings, numbers and other primitive values are not supported");const me=Gi(be.reference,r.ref,t),Se=b5e(A,{duration:100,transition:"fade"});return b.jsxs(b.Fragment,{children:[b.jsx(f_,{...W,withinPortal:f,children:b.jsx(vh,{...Se,keepMounted:P,mounted:!D&&!!be.opened,duration:be.isGroupPhase?10:Se.duration,children:ge=>b.jsxs(he,{...G,variant:H,mod:[{multiline:R},j],...be.getFloatingProps({ref:be.floating,className:le("tooltip").className,style:{...le("tooltip").style,...ge,zIndex:O,top:be.y??0,left:be.x??0}}),children:[s,b.jsx(P7,{ref:pe,arrowX:be.arrowX,arrowY:be.arrowY,visible:_,position:be.placement,arrowSize:w,arrowOffset:E,arrowRadius:S,arrowPosition:T,...le("arrow")})]})})}),k.cloneElement(r,be.getReferenceProps({onClick:F,onMouseEnter:L,onMouseLeave:B,onMouseMove:n.onMouseMove,onPointerDown:n.onPointerDown,onPointerEnter:n.onPointerEnter,[o]:me,className:fi(v,r.props.className),...r.props}))]})});zr.classes=UD;zr.displayName="@mantine/core/Tooltip";zr.Floating=LU;zr.Group=Yhe;const k5e={searchable:!1,withCheckIcon:!0,allowDeselect:!0,checkIconPosition:"left"},QS=Oe((e,t)=>{const n=_e("Select",k5e,e),{classNames:r,styles:i,unstyled:o,vars:s,dropdownOpened:a,defaultDropdownOpened:u,onDropdownClose:l,onDropdownOpen:c,onFocus:f,onBlur:d,onClick:h,onChange:p,data:m,value:g,defaultValue:y,selectFirstOptionOnChange:v,onOptionSubmit:_,comboboxProps:w,readOnly:E,disabled:S,filter:T,limit:C,withScrollArea:A,maxDropdownHeight:R,size:N,searchable:O,rightSection:D,checkIconPosition:M,withCheckIcon:F,nothingFoundMessage:L,name:B,form:U,searchValue:H,defaultSearchValue:P,onSearchChange:z,allowDeselect:W,error:j,rightSectionPointerEvents:q,id:G,clearable:te,clearButtonProps:pe,hiddenInputProps:be,renderOption:le,onClear:me,autoComplete:Se,scrollAreaProps:ge,...tt}=n,Ue=k.useMemo(()=>the(m),[m]),mt=k.useMemo(()=>J7(Ue),[Ue]),it=Js(G),[Re,$e,Ge]=Wi({value:g,defaultValue:y,finalValue:null,onChange:p}),dt=typeof Re=="string"?mt[Re]:void 0,[Nt,He]=Wi({value:H,defaultValue:P,finalValue:dt?dt.label:"",onChange:z}),fe=lU({opened:a,defaultOpened:u,onDropdownOpen:()=>{c==null||c(),fe.updateSelectedOptionIndex("active",{scrollIntoView:!0})},onDropdownClose:()=>{l==null||l(),fe.resetSelectedOption()}}),{resolvedClassNames:lt,resolvedStyles:gt}=gh({props:n,styles:i,classNames:r});k.useEffect(()=>{v&&fe.selectFirstOption()},[v,Re]),k.useEffect(()=>{g===null&&He(""),typeof g=="string"&&dt&&He(dt.label)},[g,dt]);const ce=te&&!!Re&&!S&&!E&&b.jsx(An.ClearButton,{size:N,...pe,onClear:()=>{$e(null,null),He(""),me==null||me()}});return b.jsxs(b.Fragment,{children:[b.jsxs(An,{store:fe,__staticSelector:"Select",classNames:lt,styles:gt,unstyled:o,readOnly:E,onOptionSubmit:Te=>{_==null||_(Te);const ze=W&&mt[Te].value===Re?null:mt[Te],st=ze?ze.value:null;$e(st,ze),!Ge&&He(typeof st=="string"&&(ze==null?void 0:ze.label)||""),fe.closeDropdown()},size:N,...w,children:[b.jsx(An.Target,{targetType:O?"input":"button",autoComplete:Se,children:b.jsx(gl,{id:it,ref:t,rightSection:D||ce||b.jsx(An.Chevron,{size:N,error:j,unstyled:o}),rightSectionPointerEvents:q||(ce?"all":"none"),...tt,size:N,__staticSelector:"Select",disabled:S,readOnly:E||!O,value:Nt,onChange:Te=>{He(Te.currentTarget.value),fe.openDropdown(),v&&fe.selectFirstOption()},onFocus:Te=>{O&&fe.openDropdown(),f==null||f(Te)},onBlur:Te=>{var ze;O&&fe.closeDropdown(),He(Re!=null&&((ze=mt[Re])==null?void 0:ze.label)||""),d==null||d(Te)},onClick:Te=>{O?fe.openDropdown():fe.toggleDropdown(),h==null||h(Te)},classNames:lt,styles:gt,unstyled:o,pointer:!O,error:j})}),b.jsx(bhe,{data:Ue,hidden:E||S,filter:T,search:Nt,limit:C,hiddenWhenEmpty:!O||!L,withScrollArea:A,maxDropdownHeight:R,filterOptions:O&&(dt==null?void 0:dt.label)!==Nt,value:Re,checkIconPosition:M,withCheckIcon:F,nothingFoundMessage:L,unstyled:o,labelId:tt.label?`${it}-label`:void 0,"aria-label":tt.label?void 0:tt["aria-label"],renderOption:le,scrollAreaProps:ge})]}),b.jsx(An.HiddenInput,{value:Re,name:B,form:U,disabled:S,...be})]})});QS.classes={...gl.classes,...An.classes};QS.displayName="@mantine/core/Select";function I5e({spacing:e,verticalSpacing:t,cols:n,selector:r}){var c;const i=Oi(),o=t===void 0?e:t,s=Dm({"--sg-spacing-x":_i(ql(e)),"--sg-spacing-y":_i(ql(o)),"--sg-cols":(c=ql(n))==null?void 0:c.toString()}),a=yr(i.breakpoints).reduce((f,d)=>(f[d]||(f[d]={}),typeof e=="object"&&e[d]!==void 0&&(f[d]["--sg-spacing-x"]=_i(e[d])),typeof o=="object"&&o[d]!==void 0&&(f[d]["--sg-spacing-y"]=_i(o[d])),typeof n=="object"&&n[d]!==void 0&&(f[d]["--sg-cols"]=n[d]),f),{}),l=_T(yr(a),i).filter(f=>yr(a[f.value]).length>0).map(f=>({query:`(min-width: ${i.breakpoints[f.value]})`,styles:a[f.value]}));return b.jsx(vy,{styles:s,media:l,selector:r})}function fL(e){return typeof e=="object"&&e!==null?yr(e):[]}function R5e(e){return e.sort((t,n)=>bT(t)-bT(n))}function N5e({spacing:e,verticalSpacing:t,cols:n}){const r=Array.from(new Set([...fL(e),...fL(t),...fL(n)]));return R5e(r)}function P5e({spacing:e,verticalSpacing:t,cols:n,selector:r}){var l;const i=t===void 0?e:t,o=Dm({"--sg-spacing-x":_i(ql(e)),"--sg-spacing-y":_i(ql(i)),"--sg-cols":(l=ql(n))==null?void 0:l.toString()}),s=N5e({spacing:e,verticalSpacing:t,cols:n}),a=s.reduce((c,f)=>(c[f]||(c[f]={}),typeof e=="object"&&e[f]!==void 0&&(c[f]["--sg-spacing-x"]=_i(e[f])),typeof i=="object"&&i[f]!==void 0&&(c[f]["--sg-spacing-y"]=_i(i[f])),typeof n=="object"&&n[f]!==void 0&&(c[f]["--sg-cols"]=n[f]),c),{}),u=s.map(c=>({query:`simple-grid (min-width: ${c})`,styles:a[c]}));return b.jsx(vy,{styles:o,container:u,selector:r})}var Khe={container:"m_925c2d2c",root:"m_2415a157"};const D5e={cols:1,spacing:"md",type:"media"},FU=Oe((e,t)=>{const n=_e("SimpleGrid",D5e,e),{classNames:r,className:i,style:o,styles:s,unstyled:a,vars:u,cols:l,verticalSpacing:c,spacing:f,type:d,...h}=n,p=pt({name:"SimpleGrid",classes:Khe,props:n,className:i,style:o,classNames:r,styles:s,unstyled:a,vars:u}),m=VS();return d==="container"?b.jsxs(b.Fragment,{children:[b.jsx(P5e,{...n,selector:`.${m}`}),b.jsx("div",{...p("container"),children:b.jsx(he,{ref:t,...p("root",{className:m}),...h})})]}):b.jsxs(b.Fragment,{children:[b.jsx(I5e,{...n,selector:`.${m}`}),b.jsx(he,{ref:t,...p("root",{className:m}),...h})]})});FU.classes=Khe;FU.displayName="@mantine/core/SimpleGrid";const[Xhe,zD]=go("SliderProvider was not found in tree"),jU=k.forwardRef(({size:e,disabled:t,variant:n,color:r,thumbSize:i,radius:o,...s},a)=>{const{getStyles:u}=zD();return b.jsx(he,{tabIndex:-1,variant:n,size:e,ref:a,...u("root"),...s})});jU.displayName="@mantine/core/SliderRoot";const lR=k.forwardRef(({max:e,min:t,value:n,position:r,label:i,dragging:o,onMouseDown:s,onKeyDownCapture:a,labelTransitionProps:u,labelAlwaysOn:l,thumbLabel:c,onFocus:f,onBlur:d,showLabelOnHover:h,isHovered:p,children:m=null,disabled:g},y)=>{const{getStyles:v}=zD(),[_,w]=k.useState(!1),E=l||o||_||h&&p;return b.jsxs(he,{tabIndex:0,role:"slider","aria-label":c,"aria-valuemax":e,"aria-valuemin":t,"aria-valuenow":n,ref:y,__vars:{"--slider-thumb-offset":`${r}%`},...v("thumb",{focusable:!0}),mod:{dragging:o,disabled:g},onFocus:()=>{w(!0),typeof f=="function"&&f()},onBlur:()=>{w(!1),typeof d=="function"&&d()},onTouchStart:s,onMouseDown:s,onKeyDownCapture:a,onClick:S=>S.stopPropagation(),children:[m,b.jsx(vh,{mounted:i!=null&&!!E,transition:"fade",duration:0,...u,children:S=>b.jsx("div",{...v("label",{style:S}),children:i})})]})});lR.displayName="@mantine/core/SliderThumb";function cR({value:e,min:t,max:n}){const r=(e-t)/(n-t)*100;return Math.min(Math.max(r,0),100)}function O5e({mark:e,offset:t,value:n,inverted:r=!1}){return r?typeof t=="number"&&e.value<=t||e.value>=n:typeof t=="number"?e.value>=t&&e.value<=n:e.value<=n}function Qhe({marks:e,min:t,max:n,disabled:r,value:i,offset:o,inverted:s}){const{getStyles:a}=zD();if(!e)return null;const u=e.map((l,c)=>k.createElement(he,{...a("markWrapper"),__vars:{"--mark-offset":`${cR({value:l.value,min:t,max:n})}%`},key:c},b.jsx(he,{...a("mark"),mod:{filled:O5e({mark:l,value:i,offset:o,inverted:s}),disabled:r}}),l.label&&b.jsx("div",{...a("markLabel"),children:l.label})));return b.jsx("div",{children:u})}Qhe.displayName="@mantine/core/SliderMarks";function BU({filled:e,children:t,offset:n,disabled:r,marksOffset:i,inverted:o,containerProps:s,...a}){const{getStyles:u}=zD();return b.jsx(b.Fragment,{children:b.jsx(he,{...u("trackContainer"),mod:{disabled:r},...s,children:b.jsxs(he,{...u("track"),mod:{inverted:o,disabled:r},children:[b.jsx(he,{mod:{inverted:o,disabled:r},__vars:{"--slider-bar-width":`calc(${e}% + var(--slider-size))`,"--slider-bar-offset":`calc(${n}% - var(--slider-size))`},...u("bar")}),t,b.jsx(Qhe,{...a,offset:i,disabled:r,inverted:o})]})})})}BU.displayName="@mantine/core/SliderTrack";function i5({value:e,containerWidth:t,min:n,max:r,step:i,precision:o}){const a=(t?Math.min(Math.max(e,0),t)/t:e)*(r-n),u=(a!==0?Math.round(a/i)*i:0)+n,l=Math.max(u,n);return o!==void 0?Number(l.toFixed(o)):l}function Fu(e,t){return parseFloat(e.toFixed(t))}function Jhe(e){if(!e)return 0;const t=e.toString().split(".");return t.length>1?t[1].length:0}var VD={root:"m_dd36362e",label:"m_c9357328",thumb:"m_c9a9a60a",trackContainer:"m_a8645c2",track:"m_c9ade57f",bar:"m_38aeed47",markWrapper:"m_b7b0423a",mark:"m_dd33bc19",markLabel:"m_68c77a5b"};const $5e={radius:"xl",min:0,max:100,step:1,marks:[],label:e=>e,labelTransitionProps:{transition:"fade",duration:0},labelAlwaysOn:!1,thumbLabel:"",showLabelOnHover:!0,disabled:!1,scale:e=>e},M5e=(e,{size:t,color:n,thumbSize:r,radius:i})=>({root:{"--slider-size":Wt(t,"slider-size"),"--slider-color":n?ar(n,e):void 0,"--slider-radius":i===void 0?void 0:vr(i),"--slider-thumb-size":r!==void 0?we(r):"calc(var(--slider-size) * 2)"}}),HD=Oe((e,t)=>{const n=_e("Slider",$5e,e),{classNames:r,styles:i,value:o,onChange:s,onChangeEnd:a,size:u,min:l,max:c,step:f,precision:d,defaultValue:h,name:p,marks:m,label:g,labelTransitionProps:y,labelAlwaysOn:v,thumbLabel:_,showLabelOnHover:w,thumbChildren:E,disabled:S,unstyled:T,scale:C,inverted:A,className:R,style:N,vars:O,hiddenInputProps:D,...M}=n,F=pt({name:"Slider",props:n,classes:VD,classNames:r,className:R,styles:i,style:N,vars:O,varsResolver:M5e,unstyled:T}),{dir:L}=Pf(),[B,U]=k.useState(!1),[H,P]=Wi({value:typeof o=="number"?Yc(o,l,c):o,defaultValue:typeof h=="number"?Yc(h,l,c):h,finalValue:Yc(0,l,c),onChange:s}),z=k.useRef(H),W=k.useRef(),j=k.useRef(),q=cR({value:H,min:l,max:c}),G=C(H),te=typeof g=="function"?g(G):g,pe=d??Jhe(f),be=k.useCallback(({x:ge})=>{if(!S){const tt=i5({value:ge,min:l,max:c,step:f,precision:pe});P(tt),z.current=tt}},[S,l,c,f,pe,P]),{ref:le,active:me}=Wfe(be,{onScrubEnd:()=>a==null?void 0:a(z.current)},L),Se=ge=>{var tt,Ue,mt,it,Re,$e;if(!S)switch(ge.key){case"ArrowUp":{ge.preventDefault(),(tt=j.current)==null||tt.focus();const Ge=Fu(Math.min(Math.max(H+f,l),c),pe);P(Ge),a==null||a(Ge);break}case"ArrowRight":{ge.preventDefault(),(Ue=j.current)==null||Ue.focus();const Ge=Fu(Math.min(Math.max(L==="rtl"?H-f:H+f,l),c),pe);P(Ge),a==null||a(Ge);break}case"ArrowDown":{ge.preventDefault(),(mt=j.current)==null||mt.focus();const Ge=Fu(Math.min(Math.max(H-f,l),c),pe);P(Ge),a==null||a(Ge);break}case"ArrowLeft":{ge.preventDefault(),(it=j.current)==null||it.focus();const Ge=Fu(Math.min(Math.max(L==="rtl"?H+f:H-f,l),c),pe);P(Ge),a==null||a(Ge);break}case"Home":{ge.preventDefault(),(Re=j.current)==null||Re.focus(),P(l),a==null||a(l);break}case"End":{ge.preventDefault(),($e=j.current)==null||$e.focus(),P(c),a==null||a(c);break}}};return b.jsx(Xhe,{value:{getStyles:F},children:b.jsxs(jU,{...M,ref:Gi(t,W),onKeyDownCapture:Se,onMouseDownCapture:()=>{var ge;return(ge=W.current)==null?void 0:ge.focus()},size:u,disabled:S,children:[b.jsx(BU,{inverted:A,offset:0,filled:q,marks:m,min:l,max:c,value:G,disabled:S,containerProps:{ref:le,onMouseEnter:w?()=>U(!0):void 0,onMouseLeave:w?()=>U(!1):void 0},children:b.jsx(lR,{max:c,min:l,value:G,position:q,dragging:me,label:te,ref:j,labelTransitionProps:y,labelAlwaysOn:v,thumbLabel:_,showLabelOnHover:w,isHovered:B,disabled:S,children:E})}),b.jsx("input",{type:"hidden",name:p,value:G,...D})]})})});HD.classes=VD;HD.displayName="@mantine/core/Slider";function L5e(e){return"TouchEvent"in window&&e instanceof window.TouchEvent?e.touches[0].clientX:e.clientX}const F5e=(e,{size:t,color:n,thumbSize:r,radius:i})=>({root:{"--slider-size":Wt(t,"slider-size"),"--slider-color":n?ar(n,e):void 0,"--slider-radius":i===void 0?void 0:vr(i),"--slider-thumb-size":r!==void 0?we(r):"calc(var(--slider-size) * 2)"}}),j5e={min:0,max:100,minRange:10,step:1,marks:[],label:e=>e,labelTransitionProps:{transition:"fade",duration:0},labelAlwaysOn:!1,showLabelOnHover:!0,disabled:!1,scale:e=>e},UU=Oe((e,t)=>{const n=_e("RangeSlider",j5e,e),{classNames:r,styles:i,value:o,onChange:s,onChangeEnd:a,size:u,min:l,max:c,minRange:f,maxRange:d,step:h,precision:p,defaultValue:m,name:g,marks:y,label:v,labelTransitionProps:_,labelAlwaysOn:w,thumbFromLabel:E,thumbToLabel:S,showLabelOnHover:T,thumbChildren:C,disabled:A,unstyled:R,scale:N,inverted:O,className:D,style:M,vars:F,hiddenInputProps:L,...B}=n,U=pt({name:"Slider",props:n,classes:VD,classNames:r,className:D,styles:i,style:M,vars:F,varsResolver:F5e,unstyled:R}),{dir:H}=Pf(),[P,z]=k.useState(-1),[W,j]=k.useState(!1),[q,G]=Wi({value:o,defaultValue:m,finalValue:[l,c],onChange:s}),te=k.useRef(q),pe=k.useRef([]),be=k.useRef(void 0),le=[cR({value:q[0],min:l,max:c}),cR({value:q[1],min:l,max:c})],me=p??Jhe(h),Se=He=>{G(He),te.current=He};k.useEffect(()=>{Array.isArray(o)&&(te.current=o)},Array.isArray(o)?[o[0],o[1]]:[null,null]);const ge=(He,fe,lt)=>{const gt=[...te.current];gt[fe]=He,fe===0&&(He>gt[1]-(f-1e-9)&&(gt[1]=Math.min(He+f,c)),He>(c-(f-1e-9)||l)&&(gt[fe]=te.current[fe]),gt[1]-He>d&&(gt[1]=He+d)),fe===1&&(He<gt[0]+f&&(gt[0]=Math.max(He-f,l)),He<gt[0]+f&&(gt[fe]=te.current[fe]),He-gt[0]>d&&(gt[0]=He-d)),gt[0]=Fu(gt[0],me),gt[1]=Fu(gt[1],me),Se(gt),lt&&(a==null||a(te.current))},tt=He=>{if(!A){const fe=i5({value:He,min:l,max:c,step:h,precision:me});ge(fe,be.current,!1)}},{ref:Ue,active:mt}=Wfe(({x:He})=>tt(He),{onScrubEnd:()=>a==null?void 0:a(te.current)},H);function it(He){be.current=He}const Re=He=>{Ue.current.focus();const fe=Ue.current.getBoundingClientRect(),lt=L5e(He.nativeEvent),gt=i5({value:lt-fe.left,max:c,min:l,step:h,containerWidth:fe.width}),ce=Math.abs(q[0]-gt)>Math.abs(q[1]-gt)?1:0,Te=H==="ltr"?ce:ce===1?0:1;be.current=Te},$e=()=>P!==1&&P!==0?(z(0),0):P,Ge=He=>{if(!A)switch(He.key){case"ArrowUp":{He.preventDefault();const fe=$e();pe.current[fe].focus(),ge(Fu(Math.min(Math.max(te.current[fe]+h,l),c),me),fe,!0);break}case"ArrowRight":{He.preventDefault();const fe=$e();pe.current[fe].focus(),ge(Fu(Math.min(Math.max(H==="rtl"?te.current[fe]-h:te.current[fe]+h,l),c),me),fe,!0);break}case"ArrowDown":{He.preventDefault();const fe=$e();pe.current[fe].focus(),ge(Fu(Math.min(Math.max(te.current[fe]-h,l),c),me),fe,!0);break}case"ArrowLeft":{He.preventDefault();const fe=$e();pe.current[fe].focus(),ge(Fu(Math.min(Math.max(H==="rtl"?te.current[fe]+h:te.current[fe]-h,l),c),me),fe,!0);break}}},dt={max:c,min:l,size:u,labelTransitionProps:_,labelAlwaysOn:w,onBlur:()=>z(-1)},Nt=Array.isArray(C);return b.jsx(Xhe,{value:{getStyles:U},children:b.jsxs(jU,{...B,size:u,ref:t,disabled:A,children:[b.jsxs(BU,{offset:le[0],marksOffset:q[0],filled:le[1]-le[0],marks:y,inverted:O,min:l,max:c,value:q[1],disabled:A,containerProps:{ref:Ue,onMouseEnter:T?()=>j(!0):void 0,onMouseLeave:T?()=>j(!1):void 0,onTouchStartCapture:Re,onTouchEndCapture:()=>{be.current=-1},onMouseDownCapture:Re,onMouseUpCapture:()=>{be.current=-1},onKeyDownCapture:Ge},children:[b.jsx(lR,{...dt,value:N(q[0]),position:le[0],dragging:mt,label:typeof v=="function"?v(Fu(N(q[0]),me)):v,ref:He=>{pe.current[0]=He},thumbLabel:E,onMouseDown:()=>it(0),onFocus:()=>z(0),showLabelOnHover:T,isHovered:W,disabled:A,children:Nt?C[0]:C}),b.jsx(lR,{...dt,thumbLabel:S,value:N(q[1]),position:le[1],dragging:mt,label:typeof v=="function"?v(Fu(N(q[1]),me)):v,ref:He=>{pe.current[1]=He},onMouseDown:()=>it(1),onFocus:()=>z(1),showLabelOnHover:T,isHovered:W,disabled:A,children:Nt?C[1]:C})]}),b.jsx("input",{type:"hidden",name:`${g}_from`,value:q[0],...L}),b.jsx("input",{type:"hidden",name:`${g}_to`,value:q[1],...L})]})})});UU.classes=VD;UU.displayName="@mantine/core/RangeSlider";const B5e={},cu=Oe((e,t)=>{const{w:n,h:r,miw:i,mih:o,...s}=_e("Space",B5e,e);return b.jsx(he,{ref:t,...s,w:n,miw:i??n,h:r,mih:o??r})});cu.displayName="@mantine/core/Space";var Zhe={root:"m_559cce2d",content:"m_b912df4e",control:"m_b9131032"};const U5e={maxHeight:100,initialState:!1},z5e=(e,{transitionDuration:t})=>({root:{"--spoiler-transition-duration":t!==void 0?`${t}ms`:void 0}}),zU=Oe((e,t)=>{const n=_e("Spoiler",U5e,e),{classNames:r,className:i,style:o,styles:s,unstyled:a,vars:u,initialState:l,maxHeight:c,hideLabel:f,showLabel:d,children:h,controlRef:p,transitionDuration:m,id:g,...y}=n,v=pt({name:"Spoiler",classes:Zhe,props:n,className:i,style:o,classNames:r,styles:s,unstyled:a,vars:u,varsResolver:z5e}),_=Js(g),w=`${_}-region`,[E,S]=k.useState(l),{ref:T,height:C}=DOe(),A=E?f:d,R=A!==null&&c<C;return b.jsxs(he,{...v("root"),id:_,ref:t,"data-has-spoiler":R||void 0,...y,children:[R&&b.jsx(Mm,{component:"button",type:"button",ref:p,onClick:()=>S(N=>!N),"aria-expanded":E,"aria-controls":w,...v("control"),children:A}),b.jsx("div",{...v("content",{style:{maxHeight:E?C?we(C):void 0:we(c)}}),"data-reduce-motion":!0,role:"region",id:w,children:b.jsx("div",{ref:T,children:h})})]})});zU.classes=Zhe;zU.displayName="@mantine/core/Spoiler";var epe={root:"m_6d731127"};const V5e={gap:"md",align:"stretch",justify:"flex-start"},H5e=(e,{gap:t,align:n,justify:r})=>({root:{"--stack-gap":_i(t),"--stack-align":n,"--stack-justify":r}}),b_=Oe((e,t)=>{const n=_e("Stack",V5e,e),{classNames:r,className:i,style:o,styles:s,unstyled:a,vars:u,align:l,justify:c,gap:f,variant:d,...h}=n,p=pt({name:"Stack",props:n,classes:epe,className:i,style:o,classNames:r,styles:s,unstyled:a,vars:u,varsResolver:H5e});return b.jsx(he,{ref:t,...p("root"),variant:d,...h})});b_.classes=epe;b_.displayName="@mantine/core/Stack";const tpe=k.createContext(null),q5e=tpe.Provider,W5e=()=>k.useContext(tpe),G5e={},VU=Oe((e,t)=>{const{value:n,defaultValue:r,onChange:i,size:o,wrapperProps:s,children:a,readOnly:u,...l}=_e("SwitchGroup",G5e,e),[c,f]=Wi({value:n,defaultValue:r,finalValue:[],onChange:i}),d=h=>{const p=h.currentTarget.value;!u&&f(c.includes(p)?c.filter(m=>m!==p):[...c,p])};return b.jsx(q5e,{value:{value:c,onChange:d,size:o},children:b.jsx($r.Wrapper,{size:o,ref:t,...s,...l,labelElement:"div",__staticSelector:"SwitchGroup",children:b.jsx(fU,{role:"group",children:a})})})});VU.classes=$r.Wrapper.classes;VU.displayName="@mantine/core/SwitchGroup";var npe={root:"m_5f93f3bb",input:"m_926b4011",track:"m_9307d992",thumb:"m_93039a1d",trackLabel:"m_8277e082"};const Y5e={labelPosition:"right"},K5e=(e,{radius:t,color:n,size:r})=>({root:{"--switch-radius":t===void 0?void 0:vr(t),"--switch-height":Wt(r,"switch-height"),"--switch-width":Wt(r,"switch-width"),"--switch-thumb-size":Wt(r,"switch-thumb-size"),"--switch-label-font-size":Wt(r,"switch-label-font-size"),"--switch-track-label-padding":Wt(r,"switch-track-label-padding"),"--switch-color":n?ar(n,e):void 0}}),S1=Oe((e,t)=>{const n=_e("Switch",Y5e,e),{classNames:r,className:i,style:o,styles:s,unstyled:a,vars:u,color:l,label:c,offLabel:f,onLabel:d,id:h,size:p,radius:m,wrapperProps:g,children:y,thumbIcon:v,checked:_,defaultChecked:w,onChange:E,labelPosition:S,description:T,error:C,disabled:A,variant:R,rootRef:N,mod:O,...D}=n,M=W5e(),F=p||(M==null?void 0:M.size),L=pt({name:"Switch",props:n,classes:npe,className:i,style:o,classNames:r,styles:s,unstyled:a,vars:u,varsResolver:K5e}),{styleProps:B,rest:U}=by(D),H=Js(h),P=M?{checked:M.value.includes(U.value),onChange:M.onChange}:{},[z,W]=Wi({value:P.checked??_,defaultValue:w,finalValue:!1});return b.jsxs(bD,{...L("root"),__staticSelector:"Switch",__stylesApiProps:n,id:H,size:F,labelPosition:S,label:c,description:T,error:C,disabled:A,bodyElement:"label",labelElement:"span",classNames:r,styles:s,unstyled:a,"data-checked":P.checked||void 0,variant:R,ref:N,mod:O,...B,...g,children:[b.jsx("input",{...U,disabled:A,checked:z,onChange:j=>{var q;M?(q=P.onChange)==null||q.call(P,j):E==null||E(j),W(j.currentTarget.checked)},id:H,ref:t,type:"checkbox",role:"switch",...L("input")}),b.jsxs(he,{"aria-hidden":"true",mod:{error:C,"label-position":S},...L("track"),children:[b.jsx(he,{component:"span",mod:"reduce-motion",...L("thumb"),children:v}),b.jsx("span",{...L("trackLabel"),children:z?d:f})]})]})});S1.classes={...npe,...uhe};S1.displayName="@mantine/core/Switch";S1.Group=VU;const[X5e,Q5e]=go("Table component was not found in the tree");var JS={table:"m_b23fa0ef",th:"m_4e7aa4f3",tr:"m_4e7aa4fd",td:"m_4e7aa4ef",tbody:"m_b2404537",thead:"m_b242d975",caption:"m_9e5a3ac7",scrollContainer:"m_a100c15",scrollContainerInner:"m_62259741"};function J5e(e,t){if(!t)return;const n={};return t.columnBorder&&e.withColumnBorders&&(n["data-with-column-border"]=!0),t.rowBorder&&e.withRowBorders&&(n["data-with-row-border"]=!0),t.striped&&e.striped&&(n["data-striped"]=e.striped),t.highlightOnHover&&e.highlightOnHover&&(n["data-hover"]=!0),t.captionSide&&e.captionSide&&(n["data-side"]=e.captionSide),t.stickyHeader&&e.stickyHeader&&(n["data-sticky"]=!0),n}function Sy(e,t){const n=`Table${e.charAt(0).toUpperCase()}${e.slice(1)}`,r=Oe((i,o)=>{const s=_e(n,{},i),{classNames:a,className:u,style:l,styles:c,...f}=s,d=Q5e();return b.jsx(he,{component:e,ref:o,...J5e(d,t),...d.getStyles(e,{className:u,classNames:a,style:l,styles:c,props:s}),...f})});return r.displayName=`@mantine/core/${n}`,r.classes=JS,r}const o5=Sy("th",{columnBorder:!0}),rpe=Sy("td",{columnBorder:!0}),Dk=Sy("tr",{rowBorder:!0,striped:!0,highlightOnHover:!0}),ipe=Sy("thead",{stickyHeader:!0}),ope=Sy("tbody"),spe=Sy("tfoot"),ape=Sy("caption",{captionSide:!0});function HU({data:e}){return b.jsxs(b.Fragment,{children:[e.caption&&b.jsx(ape,{children:e.caption}),e.head&&b.jsx(ipe,{children:b.jsx(Dk,{children:e.head.map((t,n)=>b.jsx(o5,{children:t},n))})}),e.body&&b.jsx(ope,{children:e.body.map((t,n)=>b.jsx(Dk,{children:t.map((r,i)=>b.jsx(rpe,{children:r},i))},n))}),e.foot&&b.jsx(spe,{children:b.jsx(Dk,{children:e.foot.map((t,n)=>b.jsx(o5,{children:t},n))})})]})}HU.displayName="@mantine/core/TableDataRenderer";const Z5e={type:"scrollarea"},eje=(e,{minWidth:t,type:n})=>({scrollContainer:{"--table-min-width":we(t),"--table-overflow":n==="native"?"auto":void 0}}),qU=Oe((e,t)=>{const n=_e("TableScrollContainer",Z5e,e),{classNames:r,className:i,style:o,styles:s,unstyled:a,vars:u,children:l,minWidth:c,type:f,...d}=n,h=pt({name:"TableScrollContainer",classes:JS,props:n,className:i,style:o,classNames:r,styles:s,unstyled:a,vars:u,varsResolver:eje,rootSelector:"scrollContainer"});return b.jsx(he,{component:f==="scrollarea"?Qd:"div",...f==="scrollarea"?{offsetScrollbars:"x"}:{},ref:t,...h("scrollContainer"),...d,children:b.jsx("div",{...h("scrollContainerInner"),children:l})})});qU.classes=JS;qU.displayName="@mantine/core/TableScrollContainer";const tje={withRowBorders:!0,verticalSpacing:7},nje=(e,{layout:t,captionSide:n,horizontalSpacing:r,verticalSpacing:i,borderColor:o,stripedColor:s,highlightOnHoverColor:a,striped:u,highlightOnHover:l,stickyHeaderOffset:c,stickyHeader:f})=>({table:{"--table-layout":t,"--table-caption-side":n,"--table-horizontal-spacing":_i(r),"--table-vertical-spacing":_i(i),"--table-border-color":o?ar(o,e):void 0,"--table-striped-color":u&&s?ar(s,e):void 0,"--table-highlight-on-hover-color":l&&a?ar(a,e):void 0,"--table-sticky-header-offset":f?we(c):void 0}}),Ut=Oe((e,t)=>{const n=_e("Table",tje,e),{classNames:r,className:i,style:o,styles:s,unstyled:a,vars:u,horizontalSpacing:l,verticalSpacing:c,captionSide:f,stripedColor:d,highlightOnHoverColor:h,striped:p,highlightOnHover:m,withColumnBorders:g,withRowBorders:y,withTableBorder:v,borderColor:_,layout:w,variant:E,data:S,children:T,stickyHeader:C,stickyHeaderOffset:A,mod:R,...N}=n,O=pt({name:"Table",props:n,className:i,style:o,classes:JS,classNames:r,styles:s,unstyled:a,rootSelector:"table",vars:u,varsResolver:nje});return b.jsx(X5e,{value:{getStyles:O,stickyHeader:C,striped:p===!0?"odd":p||void 0,highlightOnHover:m,withColumnBorders:g,withRowBorders:y,captionSide:f||"bottom"},children:b.jsx(he,{component:"table",variant:E,ref:t,mod:[{"data-with-table-border":v},R],...O("table"),...N,children:T||!!S&&b.jsx(HU,{data:S})})})});Ut.classes=JS;Ut.displayName="@mantine/core/Table";Ut.Td=rpe;Ut.Th=o5;Ut.Tr=Dk;Ut.Thead=ipe;Ut.Tbody=ope;Ut.Tfoot=spe;Ut.Caption=ape;Ut.ScrollContainer=qU;Ut.DataRenderer=HU;const[rje,WU]=go("Tabs component was not found in the tree");var ZS={root:"m_89d60db1","list--default":"m_576c9d4",list:"m_89d33d6d",panel:"m_b0c91715",tab:"m_4ec4dce6",tabSection:"m_fc420b1f","tab--default":"m_539e827b","list--outline":"m_6772fbd5","tab--outline":"m_b59ab47c","tab--pills":"m_c3381914"};const ije={},GU=Oe((e,t)=>{const n=_e("TabsList",ije,e),{children:r,className:i,grow:o,justify:s,classNames:a,styles:u,style:l,mod:c,...f}=n,d=WU();return b.jsx(he,{...f,...d.getStyles("list",{className:i,style:l,classNames:a,styles:u,props:n,variant:d.variant}),ref:t,role:"tablist",variant:d.variant,mod:[{grow:o,orientation:d.orientation,placement:d.orientation==="vertical"&&d.placement,inverted:d.inverted},c],"aria-orientation":d.orientation,__vars:{"--tabs-justify":s},children:r})});GU.classes=ZS;GU.displayName="@mantine/core/TabsList";const oje={},YU=Oe((e,t)=>{const n=_e("TabsPanel",oje,e),{children:r,className:i,value:o,classNames:s,styles:a,style:u,mod:l,...c}=n,f=WU(),d=f.value===o,h=f.keepMounted||n.keepMounted||d?r:null;return b.jsx(he,{...c,...f.getStyles("panel",{className:i,classNames:s,styles:a,style:[u,d?void 0:{display:"none"}],props:n}),ref:t,mod:[{orientation:f.orientation},l],role:"tabpanel",id:f.getPanelId(o),"aria-labelledby":f.getTabId(o),children:h})});YU.classes=ZS;YU.displayName="@mantine/core/TabsPanel";const sje={},KU=Oe((e,t)=>{const n=_e("TabsTab",sje,e),{className:r,children:i,rightSection:o,leftSection:s,value:a,onClick:u,onKeyDown:l,disabled:c,color:f,style:d,classNames:h,styles:p,vars:m,mod:g,...y}=n,v=Oi(),{dir:_}=Pf(),w=WU(),E=a===w.value,S=C=>{w.onChange(w.allowTabDeactivation&&a===w.value?null:a),u==null||u(C)},T={classNames:h,styles:p,props:n};return b.jsxs(Pi,{...y,...w.getStyles("tab",{className:r,style:d,variant:w.variant,...T}),disabled:c,unstyled:w.unstyled,variant:w.variant,mod:[{active:E,disabled:c,orientation:w.orientation,inverted:w.inverted,placement:w.orientation==="vertical"&&w.placement},g],ref:t,role:"tab",id:w.getTabId(a),"aria-selected":E,tabIndex:E||w.value===null?0:-1,"aria-controls":w.getPanelId(a),onClick:S,__vars:{"--tabs-color":f?ar(f,v):void 0},onKeyDown:r7({siblingSelector:'[role="tab"]',parentSelector:'[role="tablist"]',activateOnFocus:w.activateTabWithKeyboard,loop:w.loop,orientation:w.orientation||"horizontal",dir:_,onKeyDown:l}),children:[s&&b.jsx("span",{...w.getStyles("tabSection",T),"data-position":"left",children:s}),i&&b.jsx("span",{...w.getStyles("tabLabel",T),children:i}),o&&b.jsx("span",{...w.getStyles("tabSection",T),"data-position":"right",children:o})]})});KU.classes=ZS;KU.displayName="@mantine/core/TabsTab";const eZ="Tabs.Tab or Tabs.Panel component was rendered with invalid value or without value",aje={keepMounted:!0,orientation:"horizontal",loop:!0,activateTabWithKeyboard:!0,allowTabDeactivation:!1,unstyled:!1,inverted:!1,variant:"default",placement:"left"},uje=(e,{radius:t,color:n,autoContrast:r})=>({root:{"--tabs-radius":vr(t),"--tabs-color":ar(n,e),"--tabs-text-color":u_(r,e)?yy({color:n,theme:e,autoContrast:r}):void 0}}),gi=Oe((e,t)=>{const n=_e("Tabs",aje,e),{defaultValue:r,value:i,onChange:o,orientation:s,children:a,loop:u,id:l,activateTabWithKeyboard:c,allowTabDeactivation:f,variant:d,color:h,radius:p,inverted:m,placement:g,keepMounted:y,classNames:v,styles:_,unstyled:w,className:E,style:S,vars:T,autoContrast:C,mod:A,...R}=n,N=Js(l),[O,D]=Wi({value:i,defaultValue:r,finalValue:null,onChange:o}),M=pt({name:"Tabs",props:n,classes:ZS,className:E,style:S,classNames:v,styles:_,unstyled:w,vars:T,varsResolver:uje});return b.jsx(rje,{value:{placement:g,value:O,orientation:s,id:N,loop:u,activateTabWithKeyboard:c,getTabId:eR(`${N}-tab`,eZ),getPanelId:eR(`${N}-panel`,eZ),onChange:D,allowTabDeactivation:f,variant:d,color:h,radius:p,inverted:m,keepMounted:y,unstyled:w,getStyles:M},children:b.jsx(he,{ref:t,id:N,variant:d,mod:[{orientation:s,inverted:s==="horizontal"&&m,placement:s==="vertical"&&g},A],...M("root"),...R,children:a})})});gi.classes=ZS;gi.displayName="@mantine/core/Tabs";gi.Tab=KU;gi.Panel=YU;gi.List=GU;const lje={},pp=Oe((e,t)=>{const n=_e("TextInput",lje,e);return b.jsx(gl,{component:"input",ref:t,...n,__staticSelector:"TextInput"})});pp.classes=gl.classes;pp.displayName="@mantine/core/TextInput";const cje=["h1","h2","h3","h4","h5","h6"];function fje(e,t){const n=t!==void 0?t:`h${e}`;return cje.includes(n)?{fontSize:`var(--mantine-${n}-font-size)`,fontWeight:`var(--mantine-${n}-font-weight)`,lineHeight:`var(--mantine-${n}-line-height)`}:{fontSize:we(n),fontWeight:`var(--mantine-h${e}-font-weight)`,lineHeight:`var(--mantine-h${e}-line-height)`}}var upe={root:"m_8a5d1357"};const dje={order:1},hje=(e,{order:t,size:n,lineClamp:r,textWrap:i})=>{const o=fje(t,n);return{root:{"--title-fw":o.fontWeight,"--title-lh":o.lineHeight,"--title-fz":o.fontSize,"--title-line-clamp":typeof r=="number"?r.toString():void 0,"--title-text-wrap":i}}},kr=Oe((e,t)=>{const n=_e("Title",dje,e),{classNames:r,className:i,style:o,styles:s,unstyled:a,order:u,vars:l,size:c,variant:f,lineClamp:d,textWrap:h,mod:p,...m}=n,g=pt({name:"Title",props:n,classes:upe,className:i,style:o,classNames:r,styles:s,unstyled:a,vars:l,varsResolver:hje});return[1,2,3,4,5,6].includes(u)?b.jsx(he,{...g("root"),component:`h${u}`,variant:f,ref:t,mod:[{order:u,"data-line-clamp":typeof d=="number"},p],size:c,...m}):null});kr.classes=upe;kr.displayName="@mantine/core/Title";function pje(e){let t=e,n=!1;const r=new Set;return{getState(){return t},updateState(i){t=typeof i=="function"?i(t):i},setState(i){this.updateState(i),r.forEach(o=>o(t))},initialize(i){n||(t=i,n=!0)},subscribe(i){return r.add(i),()=>r.delete(i)}}}function mje(e){return k.useSyncExternalStore(e.subscribe,()=>e.getState(),()=>e.getState())}function gje(e,t,n){const r=[],i=[],o={};for(const s of e){const a=s.position||t;o[a]=o[a]||0,o[a]+=1,o[a]<=n?i.push(s):r.push(s)}return{notifications:i,queue:r}}const yje=()=>pje({notifications:[],queue:[],defaultPosition:"bottom-right",limit:5}),Cy=yje(),vje=(e=Cy)=>mje(e);function __(e,t){const n=e.getState(),r=t([...n.notifications,...n.queue]),i=gje(r,n.defaultPosition,n.limit);e.setState({notifications:i.notifications,queue:i.queue,limit:n.limit,defaultPosition:n.defaultPosition})}function bje(e,t=Cy){const n=e.id||E1();return __(t,r=>e.id&&r.some(i=>i.id===e.id)?r:[...r,{...e,id:n}]),n}function lpe(e,t=Cy){return __(t,n=>n.filter(r=>{var i;return r.id===e?((i=r.onClose)==null||i.call(r,r),!1):!0})),e}function _je(e,t=Cy){return __(t,n=>n.map(r=>r.id===e.id?{...r,...e}:r)),e.id}function wje(e=Cy){__(e,()=>[])}function Eje(e=Cy){__(e,t=>t.slice(0,e.getState().limit))}const Ay={show:bje,hide:lpe,update:_je,clean:wje,cleanQueue:Eje,updateState:__};function s5(e,t){return s5=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},s5(e,t)}function cpe(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,s5(e,t)}var fpe={exports:{}},xje="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",Tje=xje,Sje=Tje;function dpe(){}function hpe(){}hpe.resetWarningCache=dpe;var Cje=function(){function e(r,i,o,s,a,u){if(u!==Sje){var l=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw l.name="Invariant Violation",l}}e.isRequired=e;function t(){return e}var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:hpe,resetWarningCache:dpe};return n.PropTypes=n,n};fpe.exports=Cje();var Aje=fpe.exports;const tZ=ku(Aje),nZ={disabled:!1},fR=Yn.createContext(null);var kje=function(t){return t.scrollTop},_E="unmounted",Ag="exited",kg="entering",Lv="entered",a5="exiting",Th=function(e){cpe(t,e);function t(r,i){var o;o=e.call(this,r,i)||this;var s=i,a=s&&!s.isMounting?r.enter:r.appear,u;return o.appearStatus=null,r.in?a?(u=Ag,o.appearStatus=kg):u=Lv:r.unmountOnExit||r.mountOnEnter?u=_E:u=Ag,o.state={status:u},o.nextCallback=null,o}t.getDerivedStateFromProps=function(i,o){var s=i.in;return s&&o.status===_E?{status:Ag}:null};var n=t.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(i){var o=null;if(i!==this.props){var s=this.state.status;this.props.in?s!==kg&&s!==Lv&&(o=kg):(s===kg||s===Lv)&&(o=a5)}this.updateStatus(!1,o)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var i=this.props.timeout,o,s,a;return o=s=a=i,i!=null&&typeof i!="number"&&(o=i.exit,s=i.enter,a=i.appear!==void 0?i.appear:s),{exit:o,enter:s,appear:a}},n.updateStatus=function(i,o){if(i===void 0&&(i=!1),o!==null)if(this.cancelNextCallback(),o===kg){if(this.props.unmountOnExit||this.props.mountOnEnter){var s=this.props.nodeRef?this.props.nodeRef.current:bE.findDOMNode(this);s&&kje(s)}this.performEnter(i)}else this.performExit();else this.props.unmountOnExit&&this.state.status===Ag&&this.setState({status:_E})},n.performEnter=function(i){var o=this,s=this.props.enter,a=this.context?this.context.isMounting:i,u=this.props.nodeRef?[a]:[bE.findDOMNode(this),a],l=u[0],c=u[1],f=this.getTimeouts(),d=a?f.appear:f.enter;if(!i&&!s||nZ.disabled){this.safeSetState({status:Lv},function(){o.props.onEntered(l)});return}this.props.onEnter(l,c),this.safeSetState({status:kg},function(){o.props.onEntering(l,c),o.onTransitionEnd(d,function(){o.safeSetState({status:Lv},function(){o.props.onEntered(l,c)})})})},n.performExit=function(){var i=this,o=this.props.exit,s=this.getTimeouts(),a=this.props.nodeRef?void 0:bE.findDOMNode(this);if(!o||nZ.disabled){this.safeSetState({status:Ag},function(){i.props.onExited(a)});return}this.props.onExit(a),this.safeSetState({status:a5},function(){i.props.onExiting(a),i.onTransitionEnd(s.exit,function(){i.safeSetState({status:Ag},function(){i.props.onExited(a)})})})},n.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(i,o){o=this.setNextCallback(o),this.setState(i,o)},n.setNextCallback=function(i){var o=this,s=!0;return this.nextCallback=function(a){s&&(s=!1,o.nextCallback=null,i(a))},this.nextCallback.cancel=function(){s=!1},this.nextCallback},n.onTransitionEnd=function(i,o){this.setNextCallback(o);var s=this.props.nodeRef?this.props.nodeRef.current:bE.findDOMNode(this),a=i==null&&!this.props.addEndListener;if(!s||a){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var u=this.props.nodeRef?[this.nextCallback]:[s,this.nextCallback],l=u[0],c=u[1];this.props.addEndListener(l,c)}i!=null&&setTimeout(this.nextCallback,i)},n.render=function(){var i=this.state.status;if(i===_E)return null;var o=this.props,s=o.children;o.in,o.mountOnEnter,o.unmountOnExit,o.appear,o.enter,o.exit,o.timeout,o.addEndListener,o.onEnter,o.onEntering,o.onEntered,o.onExit,o.onExiting,o.onExited,o.nodeRef;var a=bU(o,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return Yn.createElement(fR.Provider,{value:null},typeof s=="function"?s(i,a):Yn.cloneElement(Yn.Children.only(s),a))},t}(Yn.Component);Th.contextType=fR;Th.propTypes={};function pv(){}Th.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:pv,onEntering:pv,onEntered:pv,onExit:pv,onExiting:pv,onExited:pv};Th.UNMOUNTED=_E;Th.EXITED=Ag;Th.ENTERING=kg;Th.ENTERED=Lv;Th.EXITING=a5;function Ije(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function XU(e,t){var n=function(o){return t&&k.isValidElement(o)?t(o):o},r=Object.create(null);return e&&k.Children.map(e,function(i){return i}).forEach(function(i){r[i.key]=n(i)}),r}function Rje(e,t){e=e||{},t=t||{};function n(c){return c in t?t[c]:e[c]}var r=Object.create(null),i=[];for(var o in e)o in t?i.length&&(r[o]=i,i=[]):i.push(o);var s,a={};for(var u in t){if(r[u])for(s=0;s<r[u].length;s++){var l=r[u][s];a[r[u][s]]=n(l)}a[u]=n(u)}for(s=0;s<i.length;s++)a[i[s]]=n(i[s]);return a}function e0(e,t,n){return n[t]!=null?n[t]:e.props[t]}function Nje(e,t){return XU(e.children,function(n){return k.cloneElement(n,{onExited:t.bind(null,n),in:!0,appear:e0(n,"appear",e),enter:e0(n,"enter",e),exit:e0(n,"exit",e)})})}function Pje(e,t,n){var r=XU(e.children),i=Rje(t,r);return Object.keys(i).forEach(function(o){var s=i[o];if(k.isValidElement(s)){var a=o in t,u=o in r,l=t[o],c=k.isValidElement(l)&&!l.props.in;u&&(!a||c)?i[o]=k.cloneElement(s,{onExited:n.bind(null,s),in:!0,exit:e0(s,"exit",e),enter:e0(s,"enter",e)}):!u&&a&&!c?i[o]=k.cloneElement(s,{in:!1}):u&&a&&k.isValidElement(l)&&(i[o]=k.cloneElement(s,{onExited:n.bind(null,s),in:l.props.in,exit:e0(s,"exit",e),enter:e0(s,"enter",e)}))}}),i}var Dje=Object.values||function(e){return Object.keys(e).map(function(t){return e[t]})},Oje={component:"div",childFactory:function(t){return t}},Xh=function(e){cpe(t,e);function t(r,i){var o;o=e.call(this,r,i)||this;var s=o.handleExited.bind(Ije(o));return o.state={contextValue:{isMounting:!0},handleExited:s,firstRender:!0},o}var n=t.prototype;return n.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},n.componentWillUnmount=function(){this.mounted=!1},t.getDerivedStateFromProps=function(i,o){var s=o.children,a=o.handleExited,u=o.firstRender;return{children:u?Nje(i,a):Pje(i,s,a),firstRender:!1}},n.handleExited=function(i,o){var s=XU(this.props.children);i.key in s||(i.props.onExited&&i.props.onExited(o),this.mounted&&this.setState(function(a){var u=aR({},a.children);return delete u[i.key],{children:u}}))},n.render=function(){var i=this.props,o=i.component,s=i.childFactory,a=bU(i,["component","childFactory"]),u=this.state.contextValue,l=Dje(this.state.children).map(s);return delete a.appear,delete a.enter,delete a.exit,o===null?Yn.createElement(fR.Provider,{value:u},l):Yn.createElement(fR.Provider,{value:u},Yn.createElement(o,a,l))},t}(Yn.Component);Xh.propTypes={};Xh.defaultProps=Oje;const ppe=["bottom-center","bottom-left","bottom-right","top-center","top-left","top-right"];function $je(e,t){return e.reduce((n,r)=>(n[r.position||t].push(r),n),ppe.reduce((n,r)=>(n[r]=[],n),{}))}const rZ={left:"translateX(-100%)",right:"translateX(100%)","top-center":"translateY(-100%)","bottom-center":"translateY(100%)"},Mje={left:"translateX(0)",right:"translateX(0)","top-center":"translateY(0)","bottom-center":"translateY(0)"};function Lje({state:e,maxHeight:t,position:n,transitionDuration:r}){const[i,o]=n.split("-"),s=o==="center"?`${i}-center`:o,a={opacity:0,maxHeight:t,transform:rZ[s],transitionDuration:`${r}ms, ${r}ms, ${r}ms`,transitionTimingFunction:"cubic-bezier(.51,.3,0,1.21), cubic-bezier(.51,.3,0,1.21), linear",transitionProperty:"opacity, transform, max-height"},u={opacity:1,transform:Mje[s]},l={opacity:0,maxHeight:0,transform:rZ[s]};return{...a,...{entering:u,entered:u,exiting:l,exited:l}[e]}}function Fje(e,t){return typeof t=="number"?t:t===!1||e===!1?!1:e}const mpe=k.forwardRef(({data:e,onHide:t,autoClose:n,...r},i)=>{const{autoClose:o,message:s,...a}=e,u=Fje(n,e.autoClose),l=k.useRef(),c=()=>window.clearTimeout(l.current),f=()=>{t(e.id),c()},d=()=>{typeof u=="number"&&(l.current=window.setTimeout(f,u))};return k.useEffect(()=>{var h;(h=e.onOpen)==null||h.call(e,e)},[]),k.useEffect(()=>(d(),c),[u]),b.jsx(NU,{...r,...a,onClose:f,ref:i,onMouseEnter:c,onMouseLeave:d,children:s})});mpe.displayName="@mantine/notifications/NotificationContainer";var gpe={root:"m_b37d9ac7",notification:"m_5ed0edd0"};const jje=Th,Bje={position:"bottom-right",autoClose:4e3,transitionDuration:250,containerWidth:440,notificationMaxHeight:200,limit:5,zIndex:Nu("overlay"),store:Cy,withinPortal:!0},Uje=(e,{zIndex:t,containerWidth:n})=>({root:{"--notifications-z-index":t==null?void 0:t.toString(),"--notifications-container-width":we(n)}}),Sh=Oe((e,t)=>{const n=_e("Notifications",Bje,e),{classNames:r,className:i,style:o,styles:s,unstyled:a,vars:u,position:l,autoClose:c,transitionDuration:f,containerWidth:d,notificationMaxHeight:h,limit:p,zIndex:m,store:g,portalProps:y,withinPortal:v,..._}=n,w=Oi(),E=vje(g),S=IOe(),T=uD(),C=k.useRef({}),A=k.useRef(0),N=(w.respectReducedMotion?T:!1)?1:f,O=pt({name:"Notifications",classes:gpe,props:n,className:i,style:o,classNames:r,styles:s,unstyled:a,vars:u,varsResolver:Uje});k.useEffect(()=>{g==null||g.updateState(F=>({...F,limit:p||5,defaultPosition:l}))},[p,l]),vf(()=>{E.notifications.length>A.current&&setTimeout(()=>S(),0),A.current=E.notifications.length},[E.notifications]);const D=$je(E.notifications,l),M=ppe.reduce((F,L)=>(F[L]=D[L].map(({style:B,...U})=>b.jsx(jje,{timeout:N,onEnter:()=>C.current[U.id].offsetHeight,nodeRef:{current:C.current[U.id]},children:H=>b.jsx(mpe,{ref:P=>{C.current[U.id]=P},data:U,onHide:P=>lpe(P,g),autoClose:c,...O("notification",{style:{...Lje({state:H,position:L,transitionDuration:N,maxHeight:h}),...B}})})},U.id)),F),{});return b.jsxs(f_,{withinPortal:v,...y,children:[b.jsx(he,{...O("root"),"data-position":"top-center",ref:t,..._,children:b.jsx(Xh,{children:M["top-center"]})}),b.jsx(he,{...O("root"),"data-position":"top-left",..._,children:b.jsx(Xh,{children:M["top-left"]})}),b.jsx(he,{...O("root"),"data-position":"top-right",..._,children:b.jsx(Xh,{children:M["top-right"]})}),b.jsx(he,{...O("root"),"data-position":"bottom-right",..._,children:b.jsx(Xh,{children:M["bottom-right"]})}),b.jsx(he,{...O("root"),"data-position":"bottom-left",..._,children:b.jsx(Xh,{children:M["bottom-left"]})}),b.jsx(he,{...O("root"),"data-position":"bottom-center",..._,children:b.jsx(Xh,{children:M["bottom-center"]})})]})});Sh.classes=gpe;Sh.displayName="@mantine/notifications/Notifications";Sh.show=Ay.show;Sh.hide=Ay.hide;Sh.update=Ay.update;Sh.clean=Ay.clean;Sh.cleanQueue=Ay.cleanQueue;Sh.updateState=Ay.updateState;const ype=k.createContext({storageEngine:void 0,setStorageEngine:()=>{}}),$i=()=>k.useContext(ype);function zje({children:e}){const[t,n]=Yn.useState(void 0),r=Yn.useMemo(()=>({storageEngine:t,setStorageEngine:n}),[t]);return b.jsx(ype.Provider,{value:r,children:e})}/**
 * @remix-run/router v1.16.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function AT(){return AT=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},AT.apply(this,arguments)}var mp;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(mp||(mp={}));const iZ="popstate";function Vje(e){e===void 0&&(e={});function t(r,i){let{pathname:o,search:s,hash:a}=r.location;return u5("",{pathname:o,search:s,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:bpe(i)}return qje(t,n,null,e)}function wi(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function vpe(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function Hje(){return Math.random().toString(36).substr(2,8)}function oZ(e,t){return{usr:e.state,key:e.key,idx:t}}function u5(e,t,n,r){return n===void 0&&(n=null),AT({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?w_(t):t,{state:n,key:t&&t.key||r||Hje()})}function bpe(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function w_(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function qje(e,t,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:o=!1}=r,s=i.history,a=mp.Pop,u=null,l=c();l==null&&(l=0,s.replaceState(AT({},s.state,{idx:l}),""));function c(){return(s.state||{idx:null}).idx}function f(){a=mp.Pop;let g=c(),y=g==null?null:g-l;l=g,u&&u({action:a,location:m.location,delta:y})}function d(g,y){a=mp.Push;let v=u5(m.location,g,y);l=c()+1;let _=oZ(v,l),w=m.createHref(v);try{s.pushState(_,"",w)}catch(E){if(E instanceof DOMException&&E.name==="DataCloneError")throw E;i.location.assign(w)}o&&u&&u({action:a,location:m.location,delta:1})}function h(g,y){a=mp.Replace;let v=u5(m.location,g,y);l=c();let _=oZ(v,l),w=m.createHref(v);s.replaceState(_,"",w),o&&u&&u({action:a,location:m.location,delta:0})}function p(g){let y=i.location.origin!=="null"?i.location.origin:i.location.href,v=typeof g=="string"?g:bpe(g);return v=v.replace(/ $/,"%20"),wi(y,"No window.location.(origin|href) available to create URL for href: "+v),new URL(v,y)}let m={get action(){return a},get location(){return e(i,s)},listen(g){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(iZ,f),u=g,()=>{i.removeEventListener(iZ,f),u=null}},createHref(g){return t(i,g)},createURL:p,encodeLocation(g){let y=p(g);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:d,replace:h,go(g){return s.go(g)}};return m}var sZ;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(sZ||(sZ={}));function Wje(e,t,n){n===void 0&&(n="/");let r=typeof t=="string"?w_(t):t,i=Epe(r.pathname||"/",n);if(i==null)return null;let o=_pe(e);Gje(o);let s=null;for(let a=0;s==null&&a<o.length;++a){let u=o9e(i);s=n9e(o[a],u)}return s}function _pe(e,t,n,r){t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(o,s,a)=>{let u={relativePath:a===void 0?o.path||"":a,caseSensitive:o.caseSensitive===!0,childrenIndex:s,route:o};u.relativePath.startsWith("/")&&(wi(u.relativePath.startsWith(r),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(r.length));let l=Mp([r,u.relativePath]),c=n.concat(u);o.children&&o.children.length>0&&(wi(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+l+'".')),_pe(o.children,t,c,l)),!(o.path==null&&!o.index)&&t.push({path:l,score:e9e(l,o.index),routesMeta:c})};return e.forEach((o,s)=>{var a;if(o.path===""||!((a=o.path)!=null&&a.includes("?")))i(o,s);else for(let u of wpe(o.path))i(o,s,u)}),t}function wpe(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,i=n.endsWith("?"),o=n.replace(/\?$/,"");if(r.length===0)return i?[o,""]:[o];let s=wpe(r.join("/")),a=[];return a.push(...s.map(u=>u===""?o:[o,u].join("/"))),i&&a.push(...s),a.map(u=>e.startsWith("/")&&u===""?"/":u)}function Gje(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:t9e(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const Yje=/^:[\w-]+$/,Kje=3,Xje=2,Qje=1,Jje=10,Zje=-2,aZ=e=>e==="*";function e9e(e,t){let n=e.split("/"),r=n.length;return n.some(aZ)&&(r+=Zje),t&&(r+=Xje),n.filter(i=>!aZ(i)).reduce((i,o)=>i+(Yje.test(o)?Kje:o===""?Qje:Jje),r)}function t9e(e,t){return e.length===t.length&&e.slice(0,-1).every((r,i)=>r===t[i])?e[e.length-1]-t[t.length-1]:0}function n9e(e,t){let{routesMeta:n}=e,r={},i="/",o=[];for(let s=0;s<n.length;++s){let a=n[s],u=s===n.length-1,l=i==="/"?t:t.slice(i.length)||"/",c=r9e({path:a.relativePath,caseSensitive:a.caseSensitive,end:u},l);if(!c)return null;Object.assign(r,c.params);let f=a.route;o.push({params:r,pathname:Mp([i,c.pathname]),pathnameBase:l9e(Mp([i,c.pathnameBase])),route:f}),c.pathnameBase!=="/"&&(i=Mp([i,c.pathnameBase]))}return o}function r9e(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=i9e(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let o=i[0],s=o.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((l,c,f)=>{let{paramName:d,isOptional:h}=c;if(d==="*"){let m=a[f]||"";s=o.slice(0,o.length-m.length).replace(/(.)\/+$/,"$1")}const p=a[f];return h&&!p?l[d]=void 0:l[d]=(p||"").replace(/%2F/g,"/"),l},{}),pathname:o,pathnameBase:s,pattern:e}}function i9e(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),vpe(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(s,a,u)=>(r.push({paramName:a,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),i+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":e!==""&&e!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),r]}function o9e(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return vpe(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function Epe(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function s9e(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:i=""}=typeof e=="string"?w_(e):e;return{pathname:n?n.startsWith("/")?n:a9e(n,t):t,search:c9e(r),hash:f9e(i)}}function a9e(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function dL(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function u9e(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function QU(e,t){let n=u9e(e);return t?n.map((r,i)=>i===e.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function JU(e,t,n,r){r===void 0&&(r=!1);let i;typeof e=="string"?i=w_(e):(i=AT({},e),wi(!i.pathname||!i.pathname.includes("?"),dL("?","pathname","search",i)),wi(!i.pathname||!i.pathname.includes("#"),dL("#","pathname","hash",i)),wi(!i.search||!i.search.includes("#"),dL("#","search","hash",i)));let o=e===""||i.pathname==="",s=o?"/":i.pathname,a;if(s==null)a=n;else{let f=t.length-1;if(!r&&s.startsWith("..")){let d=s.split("/");for(;d[0]==="..";)d.shift(),f-=1;i.pathname=d.join("/")}a=f>=0?t[f]:"/"}let u=s9e(i,a),l=s&&s!=="/"&&s.endsWith("/"),c=(o||s===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(l||c)&&(u.pathname+="/"),u}const Mp=e=>e.join("/").replace(/\/\/+/g,"/"),l9e=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),c9e=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,f9e=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function d9e(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const xpe=["post","put","patch","delete"];new Set(xpe);const h9e=["get",...xpe];new Set(h9e);/**
 * React Router v6.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function kT(){return kT=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},kT.apply(this,arguments)}const ZU=k.createContext(null),p9e=k.createContext(null),ky=k.createContext(null),qD=k.createContext(null),Of=k.createContext({outlet:null,matches:[],isDataRoute:!1}),Tpe=k.createContext(null);function Spe(e,t){let{relative:n}={};E_()||wi(!1);let{basename:r,navigator:i}=k.useContext(ky),{hash:o,pathname:s,search:a}=v9e(e,{relative:n}),u=s;return r!=="/"&&(u=s==="/"?r:Mp([r,s])),i.createHref({pathname:u,search:a,hash:o})}function E_(){return k.useContext(qD)!=null}function jm(){return E_()||wi(!1),k.useContext(qD).location}function Cpe(e){k.useContext(ky).static||k.useLayoutEffect(e)}function $f(){let{isDataRoute:e}=k.useContext(Of);return e?I9e():m9e()}function m9e(){E_()||wi(!1);let e=k.useContext(ZU),{basename:t,future:n,navigator:r}=k.useContext(ky),{matches:i}=k.useContext(Of),{pathname:o}=jm(),s=JSON.stringify(QU(i,n.v7_relativeSplatPath)),a=k.useRef(!1);return Cpe(()=>{a.current=!0}),k.useCallback(function(l,c){if(c===void 0&&(c={}),!a.current)return;if(typeof l=="number"){r.go(l);return}let f=JU(l,JSON.parse(s),o,c.relative==="path");e==null&&t!=="/"&&(f.pathname=f.pathname==="/"?t:Mp([t,f.pathname])),(c.replace?r.replace:r.push)(f,c.state,c)},[t,r,s,o,e])}const g9e=k.createContext(null);function y9e(e){let t=k.useContext(Of).outlet;return t&&k.createElement(g9e.Provider,{value:e},t)}function eh(){let{matches:e}=k.useContext(Of),t=e[e.length-1];return t?t.params:{}}function v9e(e,t){let{relative:n}=t===void 0?{}:t,{future:r}=k.useContext(ky),{matches:i}=k.useContext(Of),{pathname:o}=jm(),s=JSON.stringify(QU(i,r.v7_relativeSplatPath));return k.useMemo(()=>JU(e,JSON.parse(s),o,n==="path"),[e,s,o,n])}function Ape(e,t){return b9e(e,t)}function b9e(e,t,n,r){E_()||wi(!1);let{navigator:i}=k.useContext(ky),{matches:o}=k.useContext(Of),s=o[o.length-1],a=s?s.params:{};s&&s.pathname;let u=s?s.pathnameBase:"/";s&&s.route;let l=jm(),c;if(t){var f;let g=typeof t=="string"?w_(t):t;u==="/"||(f=g.pathname)!=null&&f.startsWith(u)||wi(!1),c=g}else c=l;let d=c.pathname||"/",h=d;if(u!=="/"){let g=u.replace(/^\//,"").split("/");h="/"+d.replace(/^\//,"").split("/").slice(g.length).join("/")}let p=Wje(e,{pathname:h}),m=T9e(p&&p.map(g=>Object.assign({},g,{params:Object.assign({},a,g.params),pathname:Mp([u,i.encodeLocation?i.encodeLocation(g.pathname).pathname:g.pathname]),pathnameBase:g.pathnameBase==="/"?u:Mp([u,i.encodeLocation?i.encodeLocation(g.pathnameBase).pathname:g.pathnameBase])})),o,n,r);return t&&m?k.createElement(qD.Provider,{value:{location:kT({pathname:"/",search:"",hash:"",state:null,key:"default"},c),navigationType:mp.Pop}},m):m}function _9e(){let e=k9e(),t=d9e(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return k.createElement(k.Fragment,null,k.createElement("h2",null,"Unexpected Application Error!"),k.createElement("h3",{style:{fontStyle:"italic"}},t),n?k.createElement("pre",{style:i},n):null,null)}const w9e=k.createElement(_9e,null);class E9e extends k.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?k.createElement(Of.Provider,{value:this.props.routeContext},k.createElement(Tpe.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function x9e(e){let{routeContext:t,match:n,children:r}=e,i=k.useContext(ZU);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),k.createElement(Of.Provider,{value:t},r)}function T9e(e,t,n,r){var i;if(t===void 0&&(t=[]),n===void 0&&(n=null),r===void 0&&(r=null),e==null){var o;if((o=n)!=null&&o.errors)e=n.matches;else return null}let s=e,a=(i=n)==null?void 0:i.errors;if(a!=null){let c=s.findIndex(f=>f.route.id&&(a==null?void 0:a[f.route.id])!==void 0);c>=0||wi(!1),s=s.slice(0,Math.min(s.length,c+1))}let u=!1,l=-1;if(n&&r&&r.v7_partialHydration)for(let c=0;c<s.length;c++){let f=s[c];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(l=c),f.route.id){let{loaderData:d,errors:h}=n,p=f.route.loader&&d[f.route.id]===void 0&&(!h||h[f.route.id]===void 0);if(f.route.lazy||p){u=!0,l>=0?s=s.slice(0,l+1):s=[s[0]];break}}}return s.reduceRight((c,f,d)=>{let h,p=!1,m=null,g=null;n&&(h=a&&f.route.id?a[f.route.id]:void 0,m=f.route.errorElement||w9e,u&&(l<0&&d===0?(p=!0,g=null):l===d&&(p=!0,g=f.route.hydrateFallbackElement||null)));let y=t.concat(s.slice(0,d+1)),v=()=>{let _;return h?_=m:p?_=g:f.route.Component?_=k.createElement(f.route.Component,null):f.route.element?_=f.route.element:_=c,k.createElement(x9e,{match:f,routeContext:{outlet:c,matches:y,isDataRoute:n!=null},children:_})};return n&&(f.route.ErrorBoundary||f.route.errorElement||d===0)?k.createElement(E9e,{location:n.location,revalidation:n.revalidation,component:m,error:h,children:v(),routeContext:{outlet:null,matches:y,isDataRoute:!0}}):v()},null)}var kpe=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(kpe||{}),dR=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(dR||{});function S9e(e){let t=k.useContext(ZU);return t||wi(!1),t}function C9e(e){let t=k.useContext(p9e);return t||wi(!1),t}function A9e(e){let t=k.useContext(Of);return t||wi(!1),t}function Ipe(e){let t=A9e(),n=t.matches[t.matches.length-1];return n.route.id||wi(!1),n.route.id}function k9e(){var e;let t=k.useContext(Tpe),n=C9e(dR.UseRouteError),r=Ipe(dR.UseRouteError);return t!==void 0?t:(e=n.errors)==null?void 0:e[r]}function I9e(){let{router:e}=S9e(kpe.UseNavigateStable),t=Ipe(dR.UseNavigateStable),n=k.useRef(!1);return Cpe(()=>{n.current=!0}),k.useCallback(function(i,o){o===void 0&&(o={}),n.current&&(typeof i=="number"?e.navigate(i):e.navigate(i,kT({fromRouteId:t},o)))},[e,t])}function ez(e){let{to:t,replace:n,state:r,relative:i}=e;E_()||wi(!1);let{future:o,static:s}=k.useContext(ky),{matches:a}=k.useContext(Of),{pathname:u}=jm(),l=$f(),c=JU(t,QU(a,o.v7_relativeSplatPath),u,i==="path"),f=JSON.stringify(c);return k.useEffect(()=>l(JSON.parse(f),{replace:n,state:r,relative:i}),[l,f,i,n,r]),null}function R9e(e){return y9e(e.context)}function fd(e){wi(!1)}function N9e(e){let{basename:t="/",children:n=null,location:r,navigationType:i=mp.Pop,navigator:o,static:s=!1,future:a}=e;E_()&&wi(!1);let u=t.replace(/^\/*/,"/"),l=k.useMemo(()=>({basename:u,navigator:o,static:s,future:kT({v7_relativeSplatPath:!1},a)}),[u,a,o,s]);typeof r=="string"&&(r=w_(r));let{pathname:c="/",search:f="",hash:d="",state:h=null,key:p="default"}=r,m=k.useMemo(()=>{let g=Epe(c,u);return g==null?null:{location:{pathname:g,search:f,hash:d,state:h,key:p},navigationType:i}},[u,c,f,d,h,p,i]);return m==null?null:k.createElement(ky.Provider,{value:l},k.createElement(qD.Provider,{children:n,value:m}))}function P9e(e){let{children:t,location:n}=e;return Ape(l5(t),n)}new Promise(()=>{});function l5(e,t){t===void 0&&(t=[]);let n=[];return k.Children.forEach(e,(r,i)=>{if(!k.isValidElement(r))return;let o=[...t,i];if(r.type===k.Fragment){n.push.apply(n,l5(r.props.children,o));return}r.type!==fd&&wi(!1),!r.props.index||!r.props.children||wi(!1);let s={id:r.props.id||o.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(s.children=l5(r.props.children,o)),n.push(s)}),n}/**
 * React Router DOM v6.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function c5(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,n)=>{let r=e[n];return t.concat(Array.isArray(r)?r.map(i=>[n,i]):[[n,r]])},[]))}function D9e(e,t){let n=c5(e);return t&&t.forEach((r,i)=>{n.has(i)||t.getAll(i).forEach(o=>{n.append(i,o)})}),n}const O9e="6";try{window.__reactRouterVersion=O9e}catch{}const $9e="startTransition",uZ=kI[$9e];function M9e(e){let{basename:t,children:n,future:r,window:i}=e,o=k.useRef();o.current==null&&(o.current=Vje({window:i,v5Compat:!0}));let s=o.current,[a,u]=k.useState({action:s.action,location:s.location}),{v7_startTransition:l}=r||{},c=k.useCallback(f=>{l&&uZ?uZ(()=>u(f)):u(f)},[u,l]);return k.useLayoutEffect(()=>s.listen(c),[s,c]),k.createElement(N9e,{basename:t,children:n,location:a.location,navigationType:a.action,navigator:s,future:r})}var lZ;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(lZ||(lZ={}));var cZ;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(cZ||(cZ={}));function tz(e){let t=k.useRef(c5(e)),n=k.useRef(!1),r=jm(),i=k.useMemo(()=>D9e(r.search,n.current?null:t.current),[r.search]),o=$f(),s=k.useCallback((a,u)=>{const l=c5(typeof a=="function"?a(i):a);n.current=!0,o("?"+l,u)},[o,i]);return[i,s]}const nz=k.createContext(null);nz.displayName="@mantine/modals/ModalsContext";function L9e(){const e=k.useContext(nz);if(!e)throw new Error("[@mantine/modals] useModals hook was called outside of context, wrap your app with ModalsProvider component");return e}function F9e({id:e,cancelProps:t,confirmProps:n,labels:r={cancel:"",confirm:""},closeOnConfirm:i=!0,closeOnCancel:o=!0,groupProps:s,onCancel:a,onConfirm:u,children:l}){const{cancel:c,confirm:f}=r,d=L9e(),h=m=>{typeof(t==null?void 0:t.onClick)=="function"&&(t==null||t.onClick(m)),typeof a=="function"&&a(),o&&d.closeModal(e)},p=m=>{typeof(n==null?void 0:n.onClick)=="function"&&(n==null||n.onClick(m)),typeof u=="function"&&u(),i&&d.closeModal(e)};return b.jsxs(b.Fragment,{children:[l&&b.jsx(he,{mb:"md",children:l}),b.jsxs(qs,{justify:"flex-end",...s,children:[b.jsx(on,{variant:"default",...t,onClick:h,children:(t==null?void 0:t.children)||c}),b.jsx(on,{...n,onClick:p,children:(n==null?void 0:n.children)||f})]})]})}const[j9e,WD]=$Oe("mantine-modals");WD("openModal");WD("closeModal");WD("closeAllModals");const f5=WD("openConfirmModal");function fZ(e,t){var n,r,i,o;t&&e.type==="confirm"&&((r=(n=e.props).onCancel)==null||r.call(n)),(o=(i=e.props).onClose)==null||o.call(i)}function B9e(e,t){switch(t.type){case"OPEN":return{current:t.modal,modals:[...e.modals,t.modal]};case"CLOSE":{const n=e.modals.find(i=>i.id===t.modalId);if(!n)return e;fZ(n,t.canceled);const r=e.modals.filter(i=>i.id!==t.modalId);return{current:r[r.length-1]||e.current,modals:r}}case"CLOSE_ALL":return e.modals.length?(e.modals.concat().reverse().forEach(n=>{fZ(n,t.canceled)}),{current:e.current,modals:[]}):e;default:return e}}function U9e(e){if(!e)return{confirmProps:{},modalProps:{}};const{id:t,children:n,onCancel:r,onConfirm:i,closeOnConfirm:o,closeOnCancel:s,cancelProps:a,confirmProps:u,groupProps:l,labels:c,...f}=e;return{confirmProps:{id:t,children:n,onCancel:r,onConfirm:i,closeOnConfirm:o,closeOnCancel:s,cancelProps:a,confirmProps:u,groupProps:l,labels:c},modalProps:{id:t,...f}}}function z9e({children:e,modalProps:t,labels:n,modals:r}){const[i,o]=k.useReducer(B9e,{modals:[],current:null}),s=k.useRef(i);s.current=i;const a=k.useCallback(g=>{o({type:"CLOSE_ALL",canceled:g})},[s,o]),u=k.useCallback(({modalId:g,...y})=>{const v=g||E1();return o({type:"OPEN",modal:{id:v,type:"content",props:y}}),v},[o]),l=k.useCallback(({modalId:g,...y})=>{const v=g||E1();return o({type:"OPEN",modal:{id:v,type:"confirm",props:y}}),v},[o]),c=k.useCallback((g,{modalId:y,...v})=>{const _=y||E1();return o({type:"OPEN",modal:{id:_,type:"context",props:v,ctx:g}}),_},[o]),f=k.useCallback((g,y)=>{o({type:"CLOSE",modalId:g,canceled:y})},[s,o]);j9e({openModal:u,openConfirmModal:l,openContextModal:({modal:g,...y})=>c(g,y),closeModal:f,closeContextModal:f,closeAllModals:a});const d={modals:i.modals,openModal:u,openConfirmModal:l,openContextModal:c,closeModal:f,closeContextModal:f,closeAll:a},h=()=>{const g=s.current.current;switch(g==null?void 0:g.type){case"context":{const{innerProps:y,...v}=g.props,_=r[g.ctx];return{modalProps:v,content:b.jsx(_,{innerProps:y,context:d,id:g.id})}}case"confirm":{const{modalProps:y,confirmProps:v}=U9e(g.props);return{modalProps:y,content:b.jsx(F9e,{...v,id:g.id,labels:g.props.labels||n})}}case"content":{const{children:y,...v}=g.props;return{modalProps:v,content:b.jsx(b.Fragment,{children:y})}}default:return{modalProps:{},content:null}}},{modalProps:p,content:m}=h();return b.jsxs(nz.Provider,{value:d,children:[b.jsx(li,{zIndex:Nu("modal")+1,...t,...p,opened:i.modals.length>0,onClose:()=>{var g;return f((g=i.current)==null?void 0:g.id)},children:m}),e]})}/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var V9e={outline:{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"},filled:{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"currentColor",stroke:"none"}};/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const fn=(e,t,n,r)=>{const i=k.forwardRef(({color:o="currentColor",size:s=24,stroke:a=2,className:u,children:l,...c},f)=>k.createElement("svg",{ref:f,...V9e[e],width:s,height:s,className:["tabler-icon",`tabler-icon-${t}`,u].join(" "),...e==="filled"?{fill:o}:{strokeWidth:a,stroke:o},...c},[...r.map(([d,h])=>k.createElement(d,h)),...Array.isArray(l)?l:[l]]));return i.displayName=`${n}`,i};/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var H9e=fn("outline","adjustments-horizontal","IconAdjustmentsHorizontal",[["path",{d:"M14 6m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0",key:"svg-0"}],["path",{d:"M4 6l8 0",key:"svg-1"}],["path",{d:"M16 6l4 0",key:"svg-2"}],["path",{d:"M8 12m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0",key:"svg-3"}],["path",{d:"M4 12l2 0",key:"svg-4"}],["path",{d:"M10 12l10 0",key:"svg-5"}],["path",{d:"M17 18m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0",key:"svg-6"}],["path",{d:"M4 18l11 0",key:"svg-7"}],["path",{d:"M19 18l1 0",key:"svg-8"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var q9e=fn("outline","alert-circle","IconAlertCircle",[["path",{d:"M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0",key:"svg-0"}],["path",{d:"M12 8v4",key:"svg-1"}],["path",{d:"M12 16h.01",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var dZ=fn("outline","alert-triangle","IconAlertTriangle",[["path",{d:"M12 9v4",key:"svg-0"}],["path",{d:"M10.363 3.591l-8.106 13.534a1.914 1.914 0 0 0 1.636 2.871h16.214a1.914 1.914 0 0 0 1.636 -2.87l-8.106 -13.536a1.914 1.914 0 0 0 -3.274 0z",key:"svg-1"}],["path",{d:"M12 16h.01",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var W9e=fn("outline","arrows-shuffle","IconArrowsShuffle",[["path",{d:"M18 4l3 3l-3 3",key:"svg-0"}],["path",{d:"M18 20l3 -3l-3 -3",key:"svg-1"}],["path",{d:"M3 7h3a5 5 0 0 1 5 5a5 5 0 0 0 5 5h5",key:"svg-2"}],["path",{d:"M21 7h-5a4.978 4.978 0 0 0 -3 1m-4 8a4.984 4.984 0 0 1 -3 1h-3",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var G9e=fn("outline","at","IconAt",[["path",{d:"M12 12m-4 0a4 4 0 1 0 8 0a4 4 0 1 0 -8 0",key:"svg-0"}],["path",{d:"M16 12v1.5a2.5 2.5 0 0 0 5 0v-1.5a9 9 0 1 0 -5.5 8.28",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Y9e=fn("outline","brain","IconBrain",[["path",{d:"M15.5 13a3.5 3.5 0 0 0 -3.5 3.5v1a3.5 3.5 0 0 0 7 0v-1.8",key:"svg-0"}],["path",{d:"M8.5 13a3.5 3.5 0 0 1 3.5 3.5v1a3.5 3.5 0 0 1 -7 0v-1.8",key:"svg-1"}],["path",{d:"M17.5 16a3.5 3.5 0 0 0 0 -7h-.5",key:"svg-2"}],["path",{d:"M19 9.3v-2.8a3.5 3.5 0 0 0 -7 0",key:"svg-3"}],["path",{d:"M6.5 16a3.5 3.5 0 0 1 0 -7h.5",key:"svg-4"}],["path",{d:"M5 9.3v-2.8a3.5 3.5 0 0 1 7 0v10",key:"svg-5"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var K9e=fn("outline","bubble-text","IconBubbleText",[["path",{d:"M7 10h10",key:"svg-0"}],["path",{d:"M9 14h5",key:"svg-1"}],["path",{d:"M12.4 3a5.34 5.34 0 0 1 4.906 3.239a5.333 5.333 0 0 1 -1.195 10.6a4.26 4.26 0 0 1 -5.28 1.863l-3.831 2.298v-3.134a2.668 2.668 0 0 1 -1.795 -3.773a4.8 4.8 0 0 1 2.908 -8.933a5.33 5.33 0 0 1 4.287 -2.16",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var X9e=fn("outline","chart-bar","IconChartBar",[["path",{d:"M3 13a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v6a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z",key:"svg-0"}],["path",{d:"M15 9a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v10a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z",key:"svg-1"}],["path",{d:"M9 5a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v14a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z",key:"svg-2"}],["path",{d:"M4 20h14",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Q9e=fn("outline","chart-donut-2","IconChartDonut2",[["path",{d:"M12 3v5m4 4h5",key:"svg-0"}],["path",{d:"M12 12m-4 0a4 4 0 1 0 8 0a4 4 0 1 0 -8 0",key:"svg-1"}],["path",{d:"M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var J9e=fn("outline","chart-histogram","IconChartHistogram",[["path",{d:"M3 3v18h18",key:"svg-0"}],["path",{d:"M20 18v3",key:"svg-1"}],["path",{d:"M16 16v5",key:"svg-2"}],["path",{d:"M12 13v8",key:"svg-3"}],["path",{d:"M8 16v5",key:"svg-4"}],["path",{d:"M3 11c6 0 5 -5 9 -5s3 5 9 5",key:"svg-5"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Rpe=fn("outline","check","IconCheck",[["path",{d:"M5 12l5 5l10 -10",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Z9e=fn("outline","chevron-down","IconChevronDown",[["path",{d:"M6 9l6 6l6 -6",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var e8e=fn("outline","code-plus","IconCodePlus",[["path",{d:"M9 12h6",key:"svg-0"}],["path",{d:"M12 9v6",key:"svg-1"}],["path",{d:"M6 19a2 2 0 0 1 -2 -2v-4l-1 -1l1 -1v-4a2 2 0 0 1 2 -2",key:"svg-2"}],["path",{d:"M18 19a2 2 0 0 0 2 -2v-4l1 -1l-1 -1v-4a2 2 0 0 0 -2 -2",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var t8e=fn("outline","database-export","IconDatabaseExport",[["path",{d:"M4 6c0 1.657 3.582 3 8 3s8 -1.343 8 -3s-3.582 -3 -8 -3s-8 1.343 -8 3",key:"svg-0"}],["path",{d:"M4 6v6c0 1.657 3.582 3 8 3c1.118 0 2.183 -.086 3.15 -.241",key:"svg-1"}],["path",{d:"M20 12v-6",key:"svg-2"}],["path",{d:"M4 12v6c0 1.657 3.582 3 8 3c.157 0 .312 -.002 .466 -.005",key:"svg-3"}],["path",{d:"M16 19h6",key:"svg-4"}],["path",{d:"M19 16l3 3l-3 3",key:"svg-5"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var n8e=fn("outline","dots-vertical","IconDotsVertical",[["path",{d:"M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-0"}],["path",{d:"M12 19m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-1"}],["path",{d:"M12 5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var r8e=fn("outline","dots","IconDots",[["path",{d:"M5 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-0"}],["path",{d:"M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-1"}],["path",{d:"M19 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var i8e=fn("outline","external-link","IconExternalLink",[["path",{d:"M12 6h-6a2 2 0 0 0 -2 2v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-6",key:"svg-0"}],["path",{d:"M11 13l9 -9",key:"svg-1"}],["path",{d:"M15 4h5v5",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var o8e=fn("outline","file-lambda","IconFileLambda",[["path",{d:"M14 3v4a1 1 0 0 0 1 1h4",key:"svg-0"}],["path",{d:"M17 21h-10a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2z",key:"svg-1"}],["path",{d:"M10 17l2 -3",key:"svg-2"}],["path",{d:"M15 17c-2.5 0 -2.5 -6 -5 -6",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var s8e=fn("outline","html","IconHtml",[["path",{d:"M13 16v-8l2 5l2 -5v8",key:"svg-0"}],["path",{d:"M1 16v-8",key:"svg-1"}],["path",{d:"M5 8v8",key:"svg-2"}],["path",{d:"M1 12h4",key:"svg-3"}],["path",{d:"M7 8h4",key:"svg-4"}],["path",{d:"M9 8v8",key:"svg-5"}],["path",{d:"M20 8v8h3",key:"svg-6"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Npe=fn("outline","info-circle","IconInfoCircle",[["path",{d:"M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0",key:"svg-0"}],["path",{d:"M12 9h.01",key:"svg-1"}],["path",{d:"M11 12h1v4h1",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var a8e=fn("outline","layout-columns","IconLayoutColumns",[["path",{d:"M4 4m0 2a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v12a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2z",key:"svg-0"}],["path",{d:"M12 4l0 16",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var u8e=fn("outline","mail","IconMail",[["path",{d:"M3 7a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v10a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2v-10z",key:"svg-0"}],["path",{d:"M3 7l9 6l9 -6",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var l8e=fn("outline","number-123","IconNumber123",[["path",{d:"M3 10l2 -2v8",key:"svg-0"}],["path",{d:"M9 8h3a1 1 0 0 1 1 1v2a1 1 0 0 1 -1 1h-2a1 1 0 0 0 -1 1v2a1 1 0 0 0 1 1h3",key:"svg-1"}],["path",{d:"M17 8h2.5a1.5 1.5 0 0 1 1.5 1.5v1a1.5 1.5 0 0 1 -1.5 1.5h-1.5h1.5a1.5 1.5 0 0 1 1.5 1.5v1a1.5 1.5 0 0 1 -1.5 1.5h-2.5",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var c8e=fn("outline","pencil","IconPencil",[["path",{d:"M4 20h4l10.5 -10.5a2.828 2.828 0 1 0 -4 -4l-10.5 10.5v4",key:"svg-0"}],["path",{d:"M13.5 6.5l4 4",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var f8e=fn("outline","player-play","IconPlayerPlay",[["path",{d:"M7 4v16l13 -8z",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Ppe=fn("outline","progress","IconProgress",[["path",{d:"M10 20.777a8.942 8.942 0 0 1 -2.48 -.969",key:"svg-0"}],["path",{d:"M14 3.223a9.003 9.003 0 0 1 0 17.554",key:"svg-1"}],["path",{d:"M4.579 17.093a8.961 8.961 0 0 1 -1.227 -2.592",key:"svg-2"}],["path",{d:"M3.124 10.5c.16 -.95 .468 -1.85 .9 -2.675l.169 -.305",key:"svg-3"}],["path",{d:"M6.907 4.579a8.954 8.954 0 0 1 3.093 -1.356",key:"svg-4"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var d8e=fn("outline","radio","IconRadio",[["path",{d:"M14 3l-9.371 3.749a1 1 0 0 0 -.629 .928v11.323a1 1 0 0 0 1 1h14a1 1 0 0 0 1 -1v-11a1 1 0 0 0 -1 -1h-14.5",key:"svg-0"}],["path",{d:"M4 12h16",key:"svg-1"}],["path",{d:"M7 12v-2",key:"svg-2"}],["path",{d:"M17 16v.01",key:"svg-3"}],["path",{d:"M13 16v.01",key:"svg-4"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var h8e=fn("outline","refresh","IconRefresh",[["path",{d:"M20 11a8.1 8.1 0 0 0 -15.5 -2m-.5 -4v4h4",key:"svg-0"}],["path",{d:"M4 13a8.1 8.1 0 0 0 15.5 2m.5 4v-4h-4",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var p8e=fn("outline","schema","IconSchema",[["path",{d:"M5 2h5v4h-5z",key:"svg-0"}],["path",{d:"M15 10h5v4h-5z",key:"svg-1"}],["path",{d:"M5 18h5v4h-5z",key:"svg-2"}],["path",{d:"M5 10h5v4h-5z",key:"svg-3"}],["path",{d:"M10 12h5",key:"svg-4"}],["path",{d:"M7.5 6v4",key:"svg-5"}],["path",{d:"M7.5 14v4",key:"svg-6"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var m8e=fn("outline","search","IconSearch",[["path",{d:"M10 10m-7 0a7 7 0 1 0 14 0a7 7 0 1 0 -14 0",key:"svg-0"}],["path",{d:"M21 21l-6 -6",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var g8e=fn("outline","select","IconSelect",[["path",{d:"M3 3m0 2a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v14a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2z",key:"svg-0"}],["path",{d:"M9 11l3 3l3 -3",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Dpe=fn("outline","settings","IconSettings",[["path",{d:"M10.325 4.317c.426 -1.756 2.924 -1.756 3.35 0a1.724 1.724 0 0 0 2.573 1.066c1.543 -.94 3.31 .826 2.37 2.37a1.724 1.724 0 0 0 1.065 2.572c1.756 .426 1.756 2.924 0 3.35a1.724 1.724 0 0 0 -1.066 2.573c.94 1.543 -.826 3.31 -2.37 2.37a1.724 1.724 0 0 0 -2.572 1.065c-.426 1.756 -2.924 1.756 -3.35 0a1.724 1.724 0 0 0 -2.573 -1.066c-1.543 .94 -3.31 -.826 -2.37 -2.37a1.724 1.724 0 0 0 -1.065 -2.572c-1.756 -.426 -1.756 -2.924 0 -3.35a1.724 1.724 0 0 0 1.066 -2.573c-.94 -1.543 .826 -3.31 2.37 -2.37c1 .608 2.296 .07 2.572 -1.065z",key:"svg-0"}],["path",{d:"M9 12a3 3 0 1 0 6 0a3 3 0 0 0 -6 0",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var y8e=fn("outline","squares","IconSquares",[["path",{d:"M8 10a2 2 0 0 1 2 -2h9a2 2 0 0 1 2 2v9a2 2 0 0 1 -2 2h-9a2 2 0 0 1 -2 -2z",key:"svg-0"}],["path",{d:"M16 8v-3a2 2 0 0 0 -2 -2h-9a2 2 0 0 0 -2 2v9a2 2 0 0 0 2 2h3",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Ope=fn("outline","table-export","IconTableExport",[["path",{d:"M12.5 21h-7.5a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v7.5",key:"svg-0"}],["path",{d:"M3 10h18",key:"svg-1"}],["path",{d:"M10 3v18",key:"svg-2"}],["path",{d:"M16 19h6",key:"svg-3"}],["path",{d:"M19 16l3 3l-3 3",key:"svg-4"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var v8e=fn("outline","table","IconTable",[["path",{d:"M3 5a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v14a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2v-14z",key:"svg-0"}],["path",{d:"M3 10h18",key:"svg-1"}],["path",{d:"M10 3v18",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var $pe=fn("outline","trash-x","IconTrashX",[["path",{d:"M4 7h16",key:"svg-0"}],["path",{d:"M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12",key:"svg-1"}],["path",{d:"M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3",key:"svg-2"}],["path",{d:"M10 12l4 4m0 -4l-4 4",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var rz=fn("outline","user-plus","IconUserPlus",[["path",{d:"M8 7a4 4 0 1 0 8 0a4 4 0 0 0 -8 0",key:"svg-0"}],["path",{d:"M16 19h6",key:"svg-1"}],["path",{d:"M19 16v6",key:"svg-2"}],["path",{d:"M6 21v-2a4 4 0 0 1 4 -4h4",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var iz=fn("outline","x","IconX",[["path",{d:"M18 6l-12 12",key:"svg-0"}],["path",{d:"M6 6l12 12",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var b8e=fn("filled","brand-google-filled","IconBrandGoogleFilled",[["path",{d:"M12 2a9.96 9.96 0 0 1 6.29 2.226a1 1 0 0 1 .04 1.52l-1.51 1.362a1 1 0 0 1 -1.265 .06a6 6 0 1 0 2.103 6.836l.001 -.004h-3.66a1 1 0 0 1 -.992 -.883l-.007 -.117v-2a1 1 0 0 1 1 -1h6.945a1 1 0 0 1 .994 .89c.04 .367 .061 .737 .061 1.11c0 5.523 -4.477 10 -10 10s-10 -4.477 -10 -10s4.477 -10 10 -10z",key:"svg-0"}]]);function Mpe(e){const t=e.split("/")||[];return t[t.length-1].replace(/\.[^\.]+$/,"").replace(".","_").replace(" ","_").replace("/","_")}const Ra="/study/";function hZ(e){const t=[],n=String(e||"");let r=n.indexOf(","),i=0,o=!1;for(;!o;){r===-1&&(r=n.length,o=!0);const s=n.slice(i,r).trim();(s||!o)&&t.push(s),i=r+1,r=n.indexOf(",",i)}return t}function Lpe(e,t){const n={};return(e[e.length-1]===""?[...e,""]:e).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}const _8e=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,w8e=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,E8e={};function pZ(e,t){return(E8e.jsx?w8e:_8e).test(e)}const x8e=/[ \t\n\f\r]/g;function T8e(e){return typeof e=="object"?e.type==="text"?mZ(e.value):!1:mZ(e)}function mZ(e){return e.replace(x8e,"")===""}class eC{constructor(t,n,r){this.property=t,this.normal=n,r&&(this.space=r)}}eC.prototype.property={};eC.prototype.normal={};eC.prototype.space=null;function Fpe(e,t){const n={},r={};let i=-1;for(;++i<e.length;)Object.assign(n,e[i].property),Object.assign(r,e[i].normal);return new eC(n,r,t)}function IT(e){return e.toLowerCase()}let vl=class{constructor(t,n){this.property=t,this.attribute=n}};vl.prototype.space=null;vl.prototype.boolean=!1;vl.prototype.booleanish=!1;vl.prototype.overloadedBoolean=!1;vl.prototype.number=!1;vl.prototype.commaSeparated=!1;vl.prototype.spaceSeparated=!1;vl.prototype.commaOrSpaceSeparated=!1;vl.prototype.mustUseProperty=!1;vl.prototype.defined=!1;let S8e=0;const en=Iy(),ki=Iy(),jpe=Iy(),Ze=Iy(),wr=Iy(),C1=Iy(),Ya=Iy();function Iy(){return 2**++S8e}const d5=Object.freeze(Object.defineProperty({__proto__:null,boolean:en,booleanish:ki,commaOrSpaceSeparated:Ya,commaSeparated:C1,number:Ze,overloadedBoolean:jpe,spaceSeparated:wr},Symbol.toStringTag,{value:"Module"})),hL=Object.keys(d5);class oz extends vl{constructor(t,n,r,i){let o=-1;if(super(t,n),gZ(this,"space",i),typeof r=="number")for(;++o<hL.length;){const s=hL[o];gZ(this,hL[o],(r&d5[s])===d5[s])}}}oz.prototype.defined=!0;function gZ(e,t,n){n&&(e[t]=n)}const C8e={}.hasOwnProperty;function x_(e){const t={},n={};let r;for(r in e.properties)if(C8e.call(e.properties,r)){const i=e.properties[r],o=new oz(r,e.transform(e.attributes||{},r),i,e.space);e.mustUseProperty&&e.mustUseProperty.includes(r)&&(o.mustUseProperty=!0),t[r]=o,n[IT(r)]=r,n[IT(o.attribute)]=r}return new eC(t,n,e.space)}const Bpe=x_({space:"xlink",transform(e,t){return"xlink:"+t.slice(5).toLowerCase()},properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null}}),Upe=x_({space:"xml",transform(e,t){return"xml:"+t.slice(3).toLowerCase()},properties:{xmlLang:null,xmlBase:null,xmlSpace:null}});function zpe(e,t){return t in e?e[t]:t}function Vpe(e,t){return zpe(e,t.toLowerCase())}const Hpe=x_({space:"xmlns",attributes:{xmlnsxlink:"xmlns:xlink"},transform:Vpe,properties:{xmlns:null,xmlnsXLink:null}}),qpe=x_({transform(e,t){return t==="role"?t:"aria-"+t.slice(4).toLowerCase()},properties:{ariaActiveDescendant:null,ariaAtomic:ki,ariaAutoComplete:null,ariaBusy:ki,ariaChecked:ki,ariaColCount:Ze,ariaColIndex:Ze,ariaColSpan:Ze,ariaControls:wr,ariaCurrent:null,ariaDescribedBy:wr,ariaDetails:null,ariaDisabled:ki,ariaDropEffect:wr,ariaErrorMessage:null,ariaExpanded:ki,ariaFlowTo:wr,ariaGrabbed:ki,ariaHasPopup:null,ariaHidden:ki,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:wr,ariaLevel:Ze,ariaLive:null,ariaModal:ki,ariaMultiLine:ki,ariaMultiSelectable:ki,ariaOrientation:null,ariaOwns:wr,ariaPlaceholder:null,ariaPosInSet:Ze,ariaPressed:ki,ariaReadOnly:ki,ariaRelevant:null,ariaRequired:ki,ariaRoleDescription:wr,ariaRowCount:Ze,ariaRowIndex:Ze,ariaRowSpan:Ze,ariaSelected:ki,ariaSetSize:Ze,ariaSort:null,ariaValueMax:Ze,ariaValueMin:Ze,ariaValueNow:Ze,ariaValueText:null,role:null}}),A8e=x_({space:"html",attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},transform:Vpe,mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:C1,acceptCharset:wr,accessKey:wr,action:null,allow:null,allowFullScreen:en,allowPaymentRequest:en,allowUserMedia:en,alt:null,as:null,async:en,autoCapitalize:null,autoComplete:wr,autoFocus:en,autoPlay:en,blocking:wr,capture:null,charSet:null,checked:en,cite:null,className:wr,cols:Ze,colSpan:null,content:null,contentEditable:ki,controls:en,controlsList:wr,coords:Ze|C1,crossOrigin:null,data:null,dateTime:null,decoding:null,default:en,defer:en,dir:null,dirName:null,disabled:en,download:jpe,draggable:ki,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:en,formTarget:null,headers:wr,height:Ze,hidden:en,high:Ze,href:null,hrefLang:null,htmlFor:wr,httpEquiv:wr,id:null,imageSizes:null,imageSrcSet:null,inert:en,inputMode:null,integrity:null,is:null,isMap:en,itemId:null,itemProp:wr,itemRef:wr,itemScope:en,itemType:wr,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:en,low:Ze,manifest:null,max:null,maxLength:Ze,media:null,method:null,min:null,minLength:Ze,multiple:en,muted:en,name:null,nonce:null,noModule:en,noValidate:en,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:en,optimum:Ze,pattern:null,ping:wr,placeholder:null,playsInline:en,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:en,referrerPolicy:null,rel:wr,required:en,reversed:en,rows:Ze,rowSpan:Ze,sandbox:wr,scope:null,scoped:en,seamless:en,selected:en,shadowRootClonable:en,shadowRootDelegatesFocus:en,shadowRootMode:null,shape:null,size:Ze,sizes:null,slot:null,span:Ze,spellCheck:ki,src:null,srcDoc:null,srcLang:null,srcSet:null,start:Ze,step:null,style:null,tabIndex:Ze,target:null,title:null,translate:null,type:null,typeMustMatch:en,useMap:null,value:ki,width:Ze,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:wr,axis:null,background:null,bgColor:null,border:Ze,borderColor:null,bottomMargin:Ze,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:en,declare:en,event:null,face:null,frame:null,frameBorder:null,hSpace:Ze,leftMargin:Ze,link:null,longDesc:null,lowSrc:null,marginHeight:Ze,marginWidth:Ze,noResize:en,noHref:en,noShade:en,noWrap:en,object:null,profile:null,prompt:null,rev:null,rightMargin:Ze,rules:null,scheme:null,scrolling:ki,standby:null,summary:null,text:null,topMargin:Ze,valueType:null,version:null,vAlign:null,vLink:null,vSpace:Ze,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:en,disableRemotePlayback:en,prefix:null,property:null,results:Ze,security:null,unselectable:null}}),k8e=x_({space:"svg",attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},transform:zpe,properties:{about:Ya,accentHeight:Ze,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:Ze,amplitude:Ze,arabicForm:null,ascent:Ze,attributeName:null,attributeType:null,azimuth:Ze,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:Ze,by:null,calcMode:null,capHeight:Ze,className:wr,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:Ze,diffuseConstant:Ze,direction:null,display:null,dur:null,divisor:Ze,dominantBaseline:null,download:en,dx:null,dy:null,edgeMode:null,editable:null,elevation:Ze,enableBackground:null,end:null,event:null,exponent:Ze,externalResourcesRequired:null,fill:null,fillOpacity:Ze,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:C1,g2:C1,glyphName:C1,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:Ze,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:Ze,horizOriginX:Ze,horizOriginY:Ze,id:null,ideographic:Ze,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:Ze,k:Ze,k1:Ze,k2:Ze,k3:Ze,k4:Ze,kernelMatrix:Ya,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:Ze,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:Ze,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:Ze,overlineThickness:Ze,paintOrder:null,panose1:null,path:null,pathLength:Ze,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:wr,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:Ze,pointsAtY:Ze,pointsAtZ:Ze,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:Ya,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:Ya,rev:Ya,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:Ya,requiredFeatures:Ya,requiredFonts:Ya,requiredFormats:Ya,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:Ze,specularExponent:Ze,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:Ze,strikethroughThickness:Ze,string:null,stroke:null,strokeDashArray:Ya,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:Ze,strokeOpacity:Ze,strokeWidth:null,style:null,surfaceScale:Ze,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:Ya,tabIndex:Ze,tableValues:null,target:null,targetX:Ze,targetY:Ze,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:Ya,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:Ze,underlineThickness:Ze,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:Ze,values:null,vAlphabetic:Ze,vMathematical:Ze,vectorEffect:null,vHanging:Ze,vIdeographic:Ze,version:null,vertAdvY:Ze,vertOriginX:Ze,vertOriginY:Ze,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:Ze,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null}}),I8e=/^data[-\w.:]+$/i,yZ=/-[a-z]/g,R8e=/[A-Z]/g;function GD(e,t){const n=IT(t);let r=t,i=vl;if(n in e.normal)return e.property[e.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&I8e.test(t)){if(t.charAt(4)==="-"){const o=t.slice(5).replace(yZ,P8e);r="data"+o.charAt(0).toUpperCase()+o.slice(1)}else{const o=t.slice(4);if(!yZ.test(o)){let s=o.replace(R8e,N8e);s.charAt(0)!=="-"&&(s="-"+s),t="data"+s}}i=oz}return new i(r,t)}function N8e(e){return"-"+e.toLowerCase()}function P8e(e){return e.charAt(1).toUpperCase()}const D8e={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},tC=Fpe([Upe,Bpe,Hpe,qpe,A8e],"html"),Bm=Fpe([Upe,Bpe,Hpe,qpe,k8e],"svg");function vZ(e){const t=String(e||"").trim();return t?t.split(/[ \t\n\r\f]+/g):[]}function Wpe(e){return e.join(" ").trim()}var Gpe={},bZ=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,O8e=/\n/g,$8e=/^\s*/,M8e=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,L8e=/^:\s*/,F8e=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,j8e=/^[;\s]*/,B8e=/^\s+|\s+$/g,U8e=`
`,_Z="/",wZ="*",jg="",z8e="comment",V8e="declaration",H8e=function(e,t){if(typeof e!="string")throw new TypeError("First argument must be a string");if(!e)return[];t=t||{};var n=1,r=1;function i(p){var m=p.match(O8e);m&&(n+=m.length);var g=p.lastIndexOf(U8e);r=~g?p.length-g:r+p.length}function o(){var p={line:n,column:r};return function(m){return m.position=new s(p),l(),m}}function s(p){this.start=p,this.end={line:n,column:r},this.source=t.source}s.prototype.content=e;function a(p){var m=new Error(t.source+":"+n+":"+r+": "+p);if(m.reason=p,m.filename=t.source,m.line=n,m.column=r,m.source=e,!t.silent)throw m}function u(p){var m=p.exec(e);if(m){var g=m[0];return i(g),e=e.slice(g.length),m}}function l(){u($8e)}function c(p){var m;for(p=p||[];m=f();)m!==!1&&p.push(m);return p}function f(){var p=o();if(!(_Z!=e.charAt(0)||wZ!=e.charAt(1))){for(var m=2;jg!=e.charAt(m)&&(wZ!=e.charAt(m)||_Z!=e.charAt(m+1));)++m;if(m+=2,jg===e.charAt(m-1))return a("End of comment missing");var g=e.slice(2,m-2);return r+=2,i(g),e=e.slice(m),r+=2,p({type:z8e,comment:g})}}function d(){var p=o(),m=u(M8e);if(m){if(f(),!u(L8e))return a("property missing ':'");var g=u(F8e),y=p({type:V8e,property:EZ(m[0].replace(bZ,jg)),value:g?EZ(g[0].replace(bZ,jg)):jg});return u(j8e),y}}function h(){var p=[];c(p);for(var m;m=d();)m!==!1&&(p.push(m),c(p));return p}return l(),h()};function EZ(e){return e?e.replace(B8e,jg):jg}var q8e=so&&so.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Gpe,"__esModule",{value:!0});var W8e=q8e(H8e);function G8e(e,t){var n=null;if(!e||typeof e!="string")return n;var r=(0,W8e.default)(e),i=typeof t=="function";return r.forEach(function(o){if(o.type==="declaration"){var s=o.property,a=o.value;i?t(s,a,o):a&&(n=n||{},n[s]=a)}}),n}var xZ=Gpe.default=G8e;const Y8e=xZ.default||xZ,YD=Ype("end"),Mf=Ype("start");function Ype(e){return t;function t(n){const r=n&&n.position&&n.position[e]||{};if(typeof r.line=="number"&&r.line>0&&typeof r.column=="number"&&r.column>0)return{line:r.line,column:r.column,offset:typeof r.offset=="number"&&r.offset>-1?r.offset:void 0}}}function K8e(e){const t=Mf(e),n=YD(e);if(t&&n)return{start:t,end:n}}function px(e){return!e||typeof e!="object"?"":"position"in e||"type"in e?TZ(e.position):"start"in e||"end"in e?TZ(e):"line"in e||"column"in e?h5(e):""}function h5(e){return SZ(e&&e.line)+":"+SZ(e&&e.column)}function TZ(e){return h5(e&&e.start)+"-"+h5(e&&e.end)}function SZ(e){return e&&typeof e=="number"?e:1}class Es extends Error{constructor(t,n,r){super(),typeof n=="string"&&(r=n,n=void 0);let i="",o={},s=!1;if(n&&("line"in n&&"column"in n?o={place:n}:"start"in n&&"end"in n?o={place:n}:"type"in n?o={ancestors:[n],place:n.position}:o={...n}),typeof t=="string"?i=t:!o.cause&&t&&(s=!0,i=t.message,o.cause=t),!o.ruleId&&!o.source&&typeof r=="string"){const u=r.indexOf(":");u===-1?o.ruleId=r:(o.source=r.slice(0,u),o.ruleId=r.slice(u+1))}if(!o.place&&o.ancestors&&o.ancestors){const u=o.ancestors[o.ancestors.length-1];u&&(o.place=u.position)}const a=o.place&&"start"in o.place?o.place.start:o.place;this.ancestors=o.ancestors||void 0,this.cause=o.cause||void 0,this.column=a?a.column:void 0,this.fatal=void 0,this.file,this.message=i,this.line=a?a.line:void 0,this.name=px(o.place)||"1:1",this.place=o.place||void 0,this.reason=this.message,this.ruleId=o.ruleId||void 0,this.source=o.source||void 0,this.stack=s&&o.cause&&typeof o.cause.stack=="string"?o.cause.stack:"",this.actual,this.expected,this.note,this.url}}Es.prototype.file="";Es.prototype.name="";Es.prototype.reason="";Es.prototype.message="";Es.prototype.stack="";Es.prototype.column=void 0;Es.prototype.line=void 0;Es.prototype.ancestors=void 0;Es.prototype.cause=void 0;Es.prototype.fatal=void 0;Es.prototype.place=void 0;Es.prototype.ruleId=void 0;Es.prototype.source=void 0;const sz={}.hasOwnProperty,X8e=new Map,Q8e=/[A-Z]/g,J8e=/-([a-z])/g,Z8e=new Set(["table","tbody","thead","tfoot","tr"]),eBe=new Set(["td","th"]),Kpe="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function tBe(e,t){if(!t||t.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const n=t.filePath||void 0;let r;if(t.development){if(typeof t.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");r=lBe(n,t.jsxDEV)}else{if(typeof t.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof t.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");r=uBe(n,t.jsx,t.jsxs)}const i={Fragment:t.Fragment,ancestors:[],components:t.components||{},create:r,elementAttributeNameCase:t.elementAttributeNameCase||"react",evaluater:t.createEvaluater?t.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:t.ignoreInvalidStyle||!1,passKeys:t.passKeys!==!1,passNode:t.passNode||!1,schema:t.space==="svg"?Bm:tC,stylePropertyNameCase:t.stylePropertyNameCase||"dom",tableCellAlignToStyle:t.tableCellAlignToStyle!==!1},o=Xpe(i,e,void 0);return o&&typeof o!="string"?o:i.create(e,i.Fragment,{children:o||void 0},void 0)}function Xpe(e,t,n){if(t.type==="element")return nBe(e,t,n);if(t.type==="mdxFlowExpression"||t.type==="mdxTextExpression")return rBe(e,t);if(t.type==="mdxJsxFlowElement"||t.type==="mdxJsxTextElement")return oBe(e,t,n);if(t.type==="mdxjsEsm")return iBe(e,t);if(t.type==="root")return sBe(e,t,n);if(t.type==="text")return aBe(e,t)}function nBe(e,t,n){const r=e.schema;let i=r;t.tagName.toLowerCase()==="svg"&&r.space==="html"&&(i=Bm,e.schema=i),e.ancestors.push(t);const o=Jpe(e,t.tagName,!1),s=cBe(e,t);let a=uz(e,t);return Z8e.has(t.tagName)&&(a=a.filter(function(u){return typeof u=="string"?!T8e(u):!0})),Qpe(e,s,o,t),az(s,a),e.ancestors.pop(),e.schema=r,e.create(t,o,s,n)}function rBe(e,t){if(t.data&&t.data.estree&&e.evaluater){const r=t.data.estree.body[0];return r.type,e.evaluater.evaluateExpression(r.expression)}RT(e,t.position)}function iBe(e,t){if(t.data&&t.data.estree&&e.evaluater)return e.evaluater.evaluateProgram(t.data.estree);RT(e,t.position)}function oBe(e,t,n){const r=e.schema;let i=r;t.name==="svg"&&r.space==="html"&&(i=Bm,e.schema=i),e.ancestors.push(t);const o=t.name===null?e.Fragment:Jpe(e,t.name,!0),s=fBe(e,t),a=uz(e,t);return Qpe(e,s,o,t),az(s,a),e.ancestors.pop(),e.schema=r,e.create(t,o,s,n)}function sBe(e,t,n){const r={};return az(r,uz(e,t)),e.create(t,e.Fragment,r,n)}function aBe(e,t){return t.value}function Qpe(e,t,n,r){typeof n!="string"&&n!==e.Fragment&&e.passNode&&(t.node=r)}function az(e,t){if(t.length>0){const n=t.length>1?t:t[0];n&&(e.children=n)}}function uBe(e,t,n){return r;function r(i,o,s,a){const l=Array.isArray(s.children)?n:t;return a?l(o,s,a):l(o,s)}}function lBe(e,t){return n;function n(r,i,o,s){const a=Array.isArray(o.children),u=Mf(r);return t(i,o,s,a,{columnNumber:u?u.column-1:void 0,fileName:e,lineNumber:u?u.line:void 0},void 0)}}function cBe(e,t){const n={};let r,i;for(i in t.properties)if(i!=="children"&&sz.call(t.properties,i)){const o=dBe(e,i,t.properties[i]);if(o){const[s,a]=o;e.tableCellAlignToStyle&&s==="align"&&typeof a=="string"&&eBe.has(t.tagName)?r=a:n[s]=a}}if(r){const o=n.style||(n.style={});o[e.stylePropertyNameCase==="css"?"text-align":"textAlign"]=r}return n}function fBe(e,t){const n={};for(const r of t.attributes)if(r.type==="mdxJsxExpressionAttribute")if(r.data&&r.data.estree&&e.evaluater){const o=r.data.estree.body[0];o.type;const s=o.expression;s.type;const a=s.properties[0];a.type,Object.assign(n,e.evaluater.evaluateExpression(a.argument))}else RT(e,t.position);else{const i=r.name;let o;if(r.value&&typeof r.value=="object")if(r.value.data&&r.value.data.estree&&e.evaluater){const a=r.value.data.estree.body[0];a.type,o=e.evaluater.evaluateExpression(a.expression)}else RT(e,t.position);else o=r.value===null?!0:r.value;n[i]=o}return n}function uz(e,t){const n=[];let r=-1;const i=e.passKeys?new Map:X8e;for(;++r<t.children.length;){const o=t.children[r];let s;if(e.passKeys){const u=o.type==="element"?o.tagName:o.type==="mdxJsxFlowElement"||o.type==="mdxJsxTextElement"?o.name:void 0;if(u){const l=i.get(u)||0;s=u+"-"+l,i.set(u,l+1)}}const a=Xpe(e,o,s);a!==void 0&&n.push(a)}return n}function dBe(e,t,n){const r=GD(e.schema,t);if(!(n==null||typeof n=="number"&&Number.isNaN(n))){if(Array.isArray(n)&&(n=r.commaSeparated?Lpe(n):Wpe(n)),r.property==="style"){let i=typeof n=="object"?n:hBe(e,String(n));return e.stylePropertyNameCase==="css"&&(i=pBe(i)),["style",i]}return[e.elementAttributeNameCase==="react"&&r.space?D8e[r.property]||r.property:r.attribute,n]}}function hBe(e,t){const n={};try{Y8e(t,r)}catch(i){if(!e.ignoreInvalidStyle){const o=i,s=new Es("Cannot parse `style` attribute",{ancestors:e.ancestors,cause:o,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw s.file=e.filePath||void 0,s.url=Kpe+"#cannot-parse-style-attribute",s}}return n;function r(i,o){let s=i;s.slice(0,2)!=="--"&&(s.slice(0,4)==="-ms-"&&(s="ms-"+s.slice(4)),s=s.replace(J8e,gBe)),n[s]=o}}function Jpe(e,t,n){let r;if(!n)r={type:"Literal",value:t};else if(t.includes(".")){const i=t.split(".");let o=-1,s;for(;++o<i.length;){const a=pZ(i[o])?{type:"Identifier",name:i[o]}:{type:"Literal",value:i[o]};s=s?{type:"MemberExpression",object:s,property:a,computed:!!(o&&a.type==="Literal"),optional:!1}:a}r=s}else r=pZ(t)&&!/^[a-z]/.test(t)?{type:"Identifier",name:t}:{type:"Literal",value:t};if(r.type==="Literal"){const i=r.value;return sz.call(e.components,i)?e.components[i]:i}if(e.evaluater)return e.evaluater.evaluateExpression(r);RT(e)}function RT(e,t){const n=new Es("Cannot handle MDX estrees without `createEvaluater`",{ancestors:e.ancestors,place:t,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=e.filePath||void 0,n.url=Kpe+"#cannot-handle-mdx-estrees-without-createevaluater",n}function pBe(e){const t={};let n;for(n in e)sz.call(e,n)&&(t[mBe(n)]=e[n]);return t}function mBe(e){let t=e.replace(Q8e,yBe);return t.slice(0,3)==="ms-"&&(t="-"+t),t}function gBe(e,t){return t.toUpperCase()}function yBe(e){return"-"+e.toLowerCase()}const pL={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},vBe={};function bBe(e,t){const n=vBe,r=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,i=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return Zpe(e,r,i)}function Zpe(e,t,n){if(_Be(e)){if("value"in e)return e.type==="html"&&!n?"":e.value;if(t&&"alt"in e&&e.alt)return e.alt;if("children"in e)return CZ(e.children,t,n)}return Array.isArray(e)?CZ(e,t,n):""}function CZ(e,t,n){const r=[];let i=-1;for(;++i<e.length;)r[i]=Zpe(e[i],t,n);return r.join("")}function _Be(e){return!!(e&&typeof e=="object")}const AZ=document.createElement("i");function lz(e){const t="&"+e+";";AZ.innerHTML=t;const n=AZ.textContent;return n.charCodeAt(n.length-1)===59&&e!=="semi"||n===t?!1:n}function th(e,t,n,r){const i=e.length;let o=0,s;if(t<0?t=-t>i?0:i+t:t=t>i?i:t,n=n>0?n:0,r.length<1e4)s=Array.from(r),s.unshift(t,n),e.splice(...s);else for(n&&e.splice(t,n);o<r.length;)s=r.slice(o,o+1e4),s.unshift(t,0),e.splice(...s),o+=1e4,t+=1e4}function Vu(e,t){return e.length>0?(th(e,e.length,0,t),e):t}const kZ={}.hasOwnProperty;function wBe(e){const t={};let n=-1;for(;++n<e.length;)EBe(t,e[n]);return t}function EBe(e,t){let n;for(n in t){const i=(kZ.call(e,n)?e[n]:void 0)||(e[n]={}),o=t[n];let s;if(o)for(s in o){kZ.call(i,s)||(i[s]=[]);const a=o[s];xBe(i[s],Array.isArray(a)?a:a?[a]:[])}}}function xBe(e,t){let n=-1;const r=[];for(;++n<t.length;)(t[n].add==="after"?e:r).push(t[n]);th(e,0,0,r)}function eme(e,t){const n=Number.parseInt(e,t);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"":String.fromCodePoint(n)}function A1(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const Vc=Um(/[A-Za-z]/),iu=Um(/[\dA-Za-z]/),TBe=Um(/[#-'*+\--9=?A-Z^-~]/);function p5(e){return e!==null&&(e<32||e===127)}const m5=Um(/\d/),SBe=Um(/[\dA-Fa-f]/),CBe=Um(/[!-/:-@[-`{-~]/);function zt(e){return e!==null&&e<-2}function Na(e){return e!==null&&(e<0||e===32)}function Gn(e){return e===-2||e===-1||e===32}const ABe=Um(new RegExp("\\p{P}|\\p{S}","u")),kBe=Um(/\s/);function Um(e){return t;function t(n){return n!==null&&n>-1&&e.test(String.fromCharCode(n))}}function T_(e){const t=[];let n=-1,r=0,i=0;for(;++n<e.length;){const o=e.charCodeAt(n);let s="";if(o===37&&iu(e.charCodeAt(n+1))&&iu(e.charCodeAt(n+2)))i=2;else if(o<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(o))||(s=String.fromCharCode(o));else if(o>55295&&o<57344){const a=e.charCodeAt(n+1);o<56320&&a>56319&&a<57344?(s=String.fromCharCode(o,a),i=1):s=""}else s=String.fromCharCode(o);s&&(t.push(e.slice(r,n),encodeURIComponent(s)),r=n+i+1,s=""),i&&(n+=i,i=0)}return t.join("")+e.slice(r)}function xr(e,t,n,r){const i=r?r-1:Number.POSITIVE_INFINITY;let o=0;return s;function s(u){return Gn(u)?(e.enter(n),a(u)):t(u)}function a(u){return Gn(u)&&o++<i?(e.consume(u),a):(e.exit(n),t(u))}}const IBe={tokenize:RBe};function RBe(e){const t=e.attempt(this.parser.constructs.contentInitial,r,i);let n;return t;function r(a){if(a===null){e.consume(a);return}return e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),xr(e,t,"linePrefix")}function i(a){return e.enter("paragraph"),o(a)}function o(a){const u=e.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=u),n=u,s(a)}function s(a){if(a===null){e.exit("chunkText"),e.exit("paragraph"),e.consume(a);return}return zt(a)?(e.consume(a),e.exit("chunkText"),o):(e.consume(a),s)}}const NBe={tokenize:PBe},IZ={tokenize:DBe};function PBe(e){const t=this,n=[];let r=0,i,o,s;return a;function a(_){if(r<n.length){const w=n[r];return t.containerState=w[1],e.attempt(w[0].continuation,u,l)(_)}return l(_)}function u(_){if(r++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,i&&v();const w=t.events.length;let E=w,S;for(;E--;)if(t.events[E][0]==="exit"&&t.events[E][1].type==="chunkFlow"){S=t.events[E][1].end;break}y(r);let T=w;for(;T<t.events.length;)t.events[T][1].end=Object.assign({},S),T++;return th(t.events,E+1,0,t.events.slice(w)),t.events.length=T,l(_)}return a(_)}function l(_){if(r===n.length){if(!i)return d(_);if(i.currentConstruct&&i.currentConstruct.concrete)return p(_);t.interrupt=!!(i.currentConstruct&&!i._gfmTableDynamicInterruptHack)}return t.containerState={},e.check(IZ,c,f)(_)}function c(_){return i&&v(),y(r),d(_)}function f(_){return t.parser.lazy[t.now().line]=r!==n.length,s=t.now().offset,p(_)}function d(_){return t.containerState={},e.attempt(IZ,h,p)(_)}function h(_){return r++,n.push([t.currentConstruct,t.containerState]),d(_)}function p(_){if(_===null){i&&v(),y(0),e.consume(_);return}return i=i||t.parser.flow(t.now()),e.enter("chunkFlow",{contentType:"flow",previous:o,_tokenizer:i}),m(_)}function m(_){if(_===null){g(e.exit("chunkFlow"),!0),y(0),e.consume(_);return}return zt(_)?(e.consume(_),g(e.exit("chunkFlow")),r=0,t.interrupt=void 0,a):(e.consume(_),m)}function g(_,w){const E=t.sliceStream(_);if(w&&E.push(null),_.previous=o,o&&(o.next=_),o=_,i.defineSkip(_.start),i.write(E),t.parser.lazy[_.start.line]){let S=i.events.length;for(;S--;)if(i.events[S][1].start.offset<s&&(!i.events[S][1].end||i.events[S][1].end.offset>s))return;const T=t.events.length;let C=T,A,R;for(;C--;)if(t.events[C][0]==="exit"&&t.events[C][1].type==="chunkFlow"){if(A){R=t.events[C][1].end;break}A=!0}for(y(r),S=T;S<t.events.length;)t.events[S][1].end=Object.assign({},R),S++;th(t.events,C+1,0,t.events.slice(T)),t.events.length=S}}function y(_){let w=n.length;for(;w-- >_;){const E=n[w];t.containerState=E[1],E[0].exit.call(t,e)}n.length=_}function v(){i.write([null]),o=void 0,i=void 0,t.containerState._closeFlow=void 0}}function DBe(e,t,n){return xr(e,e.attempt(this.parser.constructs.document,t,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function RZ(e){if(e===null||Na(e)||kBe(e))return 1;if(ABe(e))return 2}function cz(e,t,n){const r=[];let i=-1;for(;++i<e.length;){const o=e[i].resolveAll;o&&!r.includes(o)&&(t=o(t,n),r.push(o))}return t}const g5={name:"attention",tokenize:$Be,resolveAll:OBe};function OBe(e,t){let n=-1,r,i,o,s,a,u,l,c;for(;++n<e.length;)if(e[n][0]==="enter"&&e[n][1].type==="attentionSequence"&&e[n][1]._close){for(r=n;r--;)if(e[r][0]==="exit"&&e[r][1].type==="attentionSequence"&&e[r][1]._open&&t.sliceSerialize(e[r][1]).charCodeAt(0)===t.sliceSerialize(e[n][1]).charCodeAt(0)){if((e[r][1]._close||e[n][1]._open)&&(e[n][1].end.offset-e[n][1].start.offset)%3&&!((e[r][1].end.offset-e[r][1].start.offset+e[n][1].end.offset-e[n][1].start.offset)%3))continue;u=e[r][1].end.offset-e[r][1].start.offset>1&&e[n][1].end.offset-e[n][1].start.offset>1?2:1;const f=Object.assign({},e[r][1].end),d=Object.assign({},e[n][1].start);NZ(f,-u),NZ(d,u),s={type:u>1?"strongSequence":"emphasisSequence",start:f,end:Object.assign({},e[r][1].end)},a={type:u>1?"strongSequence":"emphasisSequence",start:Object.assign({},e[n][1].start),end:d},o={type:u>1?"strongText":"emphasisText",start:Object.assign({},e[r][1].end),end:Object.assign({},e[n][1].start)},i={type:u>1?"strong":"emphasis",start:Object.assign({},s.start),end:Object.assign({},a.end)},e[r][1].end=Object.assign({},s.start),e[n][1].start=Object.assign({},a.end),l=[],e[r][1].end.offset-e[r][1].start.offset&&(l=Vu(l,[["enter",e[r][1],t],["exit",e[r][1],t]])),l=Vu(l,[["enter",i,t],["enter",s,t],["exit",s,t],["enter",o,t]]),l=Vu(l,cz(t.parser.constructs.insideSpan.null,e.slice(r+1,n),t)),l=Vu(l,[["exit",o,t],["enter",a,t],["exit",a,t],["exit",i,t]]),e[n][1].end.offset-e[n][1].start.offset?(c=2,l=Vu(l,[["enter",e[n][1],t],["exit",e[n][1],t]])):c=0,th(e,r-1,n-r+3,l),n=r+l.length-c-2;break}}for(n=-1;++n<e.length;)e[n][1].type==="attentionSequence"&&(e[n][1].type="data");return e}function $Be(e,t){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,i=RZ(r);let o;return s;function s(u){return o=u,e.enter("attentionSequence"),a(u)}function a(u){if(u===o)return e.consume(u),a;const l=e.exit("attentionSequence"),c=RZ(u),f=!c||c===2&&i||n.includes(u),d=!i||i===2&&c||n.includes(r);return l._open=!!(o===42?f:f&&(i||!d)),l._close=!!(o===42?d:d&&(c||!f)),t(u)}}function NZ(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}const MBe={name:"autolink",tokenize:LBe};function LBe(e,t,n){let r=0;return i;function i(h){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(h),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),o}function o(h){return Vc(h)?(e.consume(h),s):h===64?n(h):l(h)}function s(h){return h===43||h===45||h===46||iu(h)?(r=1,a(h)):l(h)}function a(h){return h===58?(e.consume(h),r=0,u):(h===43||h===45||h===46||iu(h))&&r++<32?(e.consume(h),a):(r=0,l(h))}function u(h){return h===62?(e.exit("autolinkProtocol"),e.enter("autolinkMarker"),e.consume(h),e.exit("autolinkMarker"),e.exit("autolink"),t):h===null||h===32||h===60||p5(h)?n(h):(e.consume(h),u)}function l(h){return h===64?(e.consume(h),c):TBe(h)?(e.consume(h),l):n(h)}function c(h){return iu(h)?f(h):n(h)}function f(h){return h===46?(e.consume(h),r=0,c):h===62?(e.exit("autolinkProtocol").type="autolinkEmail",e.enter("autolinkMarker"),e.consume(h),e.exit("autolinkMarker"),e.exit("autolink"),t):d(h)}function d(h){if((h===45||iu(h))&&r++<63){const p=h===45?d:f;return e.consume(h),p}return n(h)}}const KD={tokenize:FBe,partial:!0};function FBe(e,t,n){return r;function r(o){return Gn(o)?xr(e,i,"linePrefix")(o):i(o)}function i(o){return o===null||zt(o)?t(o):n(o)}}const tme={name:"blockQuote",tokenize:jBe,continuation:{tokenize:BBe},exit:UBe};function jBe(e,t,n){const r=this;return i;function i(s){if(s===62){const a=r.containerState;return a.open||(e.enter("blockQuote",{_container:!0}),a.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(s),e.exit("blockQuoteMarker"),o}return n(s)}function o(s){return Gn(s)?(e.enter("blockQuotePrefixWhitespace"),e.consume(s),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(s))}}function BBe(e,t,n){const r=this;return i;function i(s){return Gn(s)?xr(e,o,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(s):o(s)}function o(s){return e.attempt(tme,t,n)(s)}}function UBe(e){e.exit("blockQuote")}const nme={name:"characterEscape",tokenize:zBe};function zBe(e,t,n){return r;function r(o){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(o),e.exit("escapeMarker"),i}function i(o){return CBe(o)?(e.enter("characterEscapeValue"),e.consume(o),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):n(o)}}const rme={name:"characterReference",tokenize:VBe};function VBe(e,t,n){const r=this;let i=0,o,s;return a;function a(f){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(f),e.exit("characterReferenceMarker"),u}function u(f){return f===35?(e.enter("characterReferenceMarkerNumeric"),e.consume(f),e.exit("characterReferenceMarkerNumeric"),l):(e.enter("characterReferenceValue"),o=31,s=iu,c(f))}function l(f){return f===88||f===120?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(f),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),o=6,s=SBe,c):(e.enter("characterReferenceValue"),o=7,s=m5,c(f))}function c(f){if(f===59&&i){const d=e.exit("characterReferenceValue");return s===iu&&!lz(r.sliceSerialize(d))?n(f):(e.enter("characterReferenceMarker"),e.consume(f),e.exit("characterReferenceMarker"),e.exit("characterReference"),t)}return s(f)&&i++<o?(e.consume(f),c):n(f)}}const PZ={tokenize:qBe,partial:!0},DZ={name:"codeFenced",tokenize:HBe,concrete:!0};function HBe(e,t,n){const r=this,i={tokenize:E,partial:!0};let o=0,s=0,a;return u;function u(S){return l(S)}function l(S){const T=r.events[r.events.length-1];return o=T&&T[1].type==="linePrefix"?T[2].sliceSerialize(T[1],!0).length:0,a=S,e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),c(S)}function c(S){return S===a?(s++,e.consume(S),c):s<3?n(S):(e.exit("codeFencedFenceSequence"),Gn(S)?xr(e,f,"whitespace")(S):f(S))}function f(S){return S===null||zt(S)?(e.exit("codeFencedFence"),r.interrupt?t(S):e.check(PZ,m,w)(S)):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),d(S))}function d(S){return S===null||zt(S)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),f(S)):Gn(S)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),xr(e,h,"whitespace")(S)):S===96&&S===a?n(S):(e.consume(S),d)}function h(S){return S===null||zt(S)?f(S):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),p(S))}function p(S){return S===null||zt(S)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),f(S)):S===96&&S===a?n(S):(e.consume(S),p)}function m(S){return e.attempt(i,w,g)(S)}function g(S){return e.enter("lineEnding"),e.consume(S),e.exit("lineEnding"),y}function y(S){return o>0&&Gn(S)?xr(e,v,"linePrefix",o+1)(S):v(S)}function v(S){return S===null||zt(S)?e.check(PZ,m,w)(S):(e.enter("codeFlowValue"),_(S))}function _(S){return S===null||zt(S)?(e.exit("codeFlowValue"),v(S)):(e.consume(S),_)}function w(S){return e.exit("codeFenced"),t(S)}function E(S,T,C){let A=0;return R;function R(F){return S.enter("lineEnding"),S.consume(F),S.exit("lineEnding"),N}function N(F){return S.enter("codeFencedFence"),Gn(F)?xr(S,O,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(F):O(F)}function O(F){return F===a?(S.enter("codeFencedFenceSequence"),D(F)):C(F)}function D(F){return F===a?(A++,S.consume(F),D):A>=s?(S.exit("codeFencedFenceSequence"),Gn(F)?xr(S,M,"whitespace")(F):M(F)):C(F)}function M(F){return F===null||zt(F)?(S.exit("codeFencedFence"),T(F)):C(F)}}}function qBe(e,t,n){const r=this;return i;function i(s){return s===null?n(s):(e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),o)}function o(s){return r.parser.lazy[r.now().line]?n(s):t(s)}}const mL={name:"codeIndented",tokenize:GBe},WBe={tokenize:YBe,partial:!0};function GBe(e,t,n){const r=this;return i;function i(l){return e.enter("codeIndented"),xr(e,o,"linePrefix",5)(l)}function o(l){const c=r.events[r.events.length-1];return c&&c[1].type==="linePrefix"&&c[2].sliceSerialize(c[1],!0).length>=4?s(l):n(l)}function s(l){return l===null?u(l):zt(l)?e.attempt(WBe,s,u)(l):(e.enter("codeFlowValue"),a(l))}function a(l){return l===null||zt(l)?(e.exit("codeFlowValue"),s(l)):(e.consume(l),a)}function u(l){return e.exit("codeIndented"),t(l)}}function YBe(e,t,n){const r=this;return i;function i(s){return r.parser.lazy[r.now().line]?n(s):zt(s)?(e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),i):xr(e,o,"linePrefix",5)(s)}function o(s){const a=r.events[r.events.length-1];return a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?t(s):zt(s)?i(s):n(s)}}const KBe={name:"codeText",tokenize:JBe,resolve:XBe,previous:QBe};function XBe(e){let t=e.length-4,n=3,r,i;if((e[n][1].type==="lineEnding"||e[n][1].type==="space")&&(e[t][1].type==="lineEnding"||e[t][1].type==="space")){for(r=n;++r<t;)if(e[r][1].type==="codeTextData"){e[n][1].type="codeTextPadding",e[t][1].type="codeTextPadding",n+=2,t-=2;break}}for(r=n-1,t++;++r<=t;)i===void 0?r!==t&&e[r][1].type!=="lineEnding"&&(i=r):(r===t||e[r][1].type==="lineEnding")&&(e[i][1].type="codeTextData",r!==i+2&&(e[i][1].end=e[r-1][1].end,e.splice(i+2,r-i-2),t-=r-i-2,r=i+2),i=void 0);return e}function QBe(e){return e!==96||this.events[this.events.length-1][1].type==="characterEscape"}function JBe(e,t,n){let r=0,i,o;return s;function s(f){return e.enter("codeText"),e.enter("codeTextSequence"),a(f)}function a(f){return f===96?(e.consume(f),r++,a):(e.exit("codeTextSequence"),u(f))}function u(f){return f===null?n(f):f===32?(e.enter("space"),e.consume(f),e.exit("space"),u):f===96?(o=e.enter("codeTextSequence"),i=0,c(f)):zt(f)?(e.enter("lineEnding"),e.consume(f),e.exit("lineEnding"),u):(e.enter("codeTextData"),l(f))}function l(f){return f===null||f===32||f===96||zt(f)?(e.exit("codeTextData"),u(f)):(e.consume(f),l)}function c(f){return f===96?(e.consume(f),i++,c):i===r?(e.exit("codeTextSequence"),e.exit("codeText"),t(f)):(o.type="codeTextData",l(f))}}class ZBe{constructor(t){this.left=t?[...t]:[],this.right=[]}get(t){if(t<0||t>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+t+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return t<this.left.length?this.left[t]:this.right[this.right.length-t+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(t,n){const r=n??Number.POSITIVE_INFINITY;return r<this.left.length?this.left.slice(t,r):t>this.left.length?this.right.slice(this.right.length-r+this.left.length,this.right.length-t+this.left.length).reverse():this.left.slice(t).concat(this.right.slice(this.right.length-r+this.left.length).reverse())}splice(t,n,r){const i=n||0;this.setCursor(Math.trunc(t));const o=this.right.splice(this.right.length-i,Number.POSITIVE_INFINITY);return r&&Iw(this.left,r),o.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(t){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(t)}pushMany(t){this.setCursor(Number.POSITIVE_INFINITY),Iw(this.left,t)}unshift(t){this.setCursor(0),this.right.push(t)}unshiftMany(t){this.setCursor(0),Iw(this.right,t.reverse())}setCursor(t){if(!(t===this.left.length||t>this.left.length&&this.right.length===0||t<0&&this.left.length===0))if(t<this.left.length){const n=this.left.splice(t,Number.POSITIVE_INFINITY);Iw(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-t,Number.POSITIVE_INFINITY);Iw(this.left,n.reverse())}}}function Iw(e,t){let n=0;if(t.length<1e4)e.push(...t);else for(;n<t.length;)e.push(...t.slice(n,n+1e4)),n+=1e4}function ime(e){const t={};let n=-1,r,i,o,s,a,u,l;const c=new ZBe(e);for(;++n<c.length;){for(;n in t;)n=t[n];if(r=c.get(n),n&&r[1].type==="chunkFlow"&&c.get(n-1)[1].type==="listItemPrefix"&&(u=r[1]._tokenizer.events,o=0,o<u.length&&u[o][1].type==="lineEndingBlank"&&(o+=2),o<u.length&&u[o][1].type==="content"))for(;++o<u.length&&u[o][1].type!=="content";)u[o][1].type==="chunkText"&&(u[o][1]._isInFirstContentOfListItem=!0,o++);if(r[0]==="enter")r[1].contentType&&(Object.assign(t,e7e(c,n)),n=t[n],l=!0);else if(r[1]._container){for(o=n,i=void 0;o--&&(s=c.get(o),s[1].type==="lineEnding"||s[1].type==="lineEndingBlank");)s[0]==="enter"&&(i&&(c.get(i)[1].type="lineEndingBlank"),s[1].type="lineEnding",i=o);i&&(r[1].end=Object.assign({},c.get(i)[1].start),a=c.slice(i,n),a.unshift(r),c.splice(i,n-i+1,a))}}return th(e,0,Number.POSITIVE_INFINITY,c.slice(0)),!l}function e7e(e,t){const n=e.get(t)[1],r=e.get(t)[2];let i=t-1;const o=[],s=n._tokenizer||r.parser[n.contentType](n.start),a=s.events,u=[],l={};let c,f,d=-1,h=n,p=0,m=0;const g=[m];for(;h;){for(;e.get(++i)[1]!==h;);o.push(i),h._tokenizer||(c=r.sliceStream(h),h.next||c.push(null),f&&s.defineSkip(h.start),h._isInFirstContentOfListItem&&(s._gfmTasklistFirstContentOfListItem=!0),s.write(c),h._isInFirstContentOfListItem&&(s._gfmTasklistFirstContentOfListItem=void 0)),f=h,h=h.next}for(h=n;++d<a.length;)a[d][0]==="exit"&&a[d-1][0]==="enter"&&a[d][1].type===a[d-1][1].type&&a[d][1].start.line!==a[d][1].end.line&&(m=d+1,g.push(m),h._tokenizer=void 0,h.previous=void 0,h=h.next);for(s.events=[],h?(h._tokenizer=void 0,h.previous=void 0):g.pop(),d=g.length;d--;){const y=a.slice(g[d],g[d+1]),v=o.pop();u.push([v,v+y.length-1]),e.splice(v,2,y)}for(u.reverse(),d=-1;++d<u.length;)l[p+u[d][0]]=p+u[d][1],p+=u[d][1]-u[d][0]-1;return l}const t7e={tokenize:i7e,resolve:r7e},n7e={tokenize:o7e,partial:!0};function r7e(e){return ime(e),e}function i7e(e,t){let n;return r;function r(a){return e.enter("content"),n=e.enter("chunkContent",{contentType:"content"}),i(a)}function i(a){return a===null?o(a):zt(a)?e.check(n7e,s,o)(a):(e.consume(a),i)}function o(a){return e.exit("chunkContent"),e.exit("content"),t(a)}function s(a){return e.consume(a),e.exit("chunkContent"),n.next=e.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,i}}function o7e(e,t,n){const r=this;return i;function i(s){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),xr(e,o,"linePrefix")}function o(s){if(s===null||zt(s))return n(s);const a=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?t(s):e.interrupt(r.parser.constructs.flow,n,t)(s)}}function ome(e,t,n,r,i,o,s,a,u){const l=u||Number.POSITIVE_INFINITY;let c=0;return f;function f(y){return y===60?(e.enter(r),e.enter(i),e.enter(o),e.consume(y),e.exit(o),d):y===null||y===32||y===41||p5(y)?n(y):(e.enter(r),e.enter(s),e.enter(a),e.enter("chunkString",{contentType:"string"}),m(y))}function d(y){return y===62?(e.enter(o),e.consume(y),e.exit(o),e.exit(i),e.exit(r),t):(e.enter(a),e.enter("chunkString",{contentType:"string"}),h(y))}function h(y){return y===62?(e.exit("chunkString"),e.exit(a),d(y)):y===null||y===60||zt(y)?n(y):(e.consume(y),y===92?p:h)}function p(y){return y===60||y===62||y===92?(e.consume(y),h):h(y)}function m(y){return!c&&(y===null||y===41||Na(y))?(e.exit("chunkString"),e.exit(a),e.exit(s),e.exit(r),t(y)):c<l&&y===40?(e.consume(y),c++,m):y===41?(e.consume(y),c--,m):y===null||y===32||y===40||p5(y)?n(y):(e.consume(y),y===92?g:m)}function g(y){return y===40||y===41||y===92?(e.consume(y),m):m(y)}}function sme(e,t,n,r,i,o){const s=this;let a=0,u;return l;function l(h){return e.enter(r),e.enter(i),e.consume(h),e.exit(i),e.enter(o),c}function c(h){return a>999||h===null||h===91||h===93&&!u||h===94&&!a&&"_hiddenFootnoteSupport"in s.parser.constructs?n(h):h===93?(e.exit(o),e.enter(i),e.consume(h),e.exit(i),e.exit(r),t):zt(h)?(e.enter("lineEnding"),e.consume(h),e.exit("lineEnding"),c):(e.enter("chunkString",{contentType:"string"}),f(h))}function f(h){return h===null||h===91||h===93||zt(h)||a++>999?(e.exit("chunkString"),c(h)):(e.consume(h),u||(u=!Gn(h)),h===92?d:f)}function d(h){return h===91||h===92||h===93?(e.consume(h),a++,f):f(h)}}function ame(e,t,n,r,i,o){let s;return a;function a(d){return d===34||d===39||d===40?(e.enter(r),e.enter(i),e.consume(d),e.exit(i),s=d===40?41:d,u):n(d)}function u(d){return d===s?(e.enter(i),e.consume(d),e.exit(i),e.exit(r),t):(e.enter(o),l(d))}function l(d){return d===s?(e.exit(o),u(s)):d===null?n(d):zt(d)?(e.enter("lineEnding"),e.consume(d),e.exit("lineEnding"),xr(e,l,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),c(d))}function c(d){return d===s||d===null||zt(d)?(e.exit("chunkString"),l(d)):(e.consume(d),d===92?f:c)}function f(d){return d===s||d===92?(e.consume(d),c):c(d)}}function mx(e,t){let n;return r;function r(i){return zt(i)?(e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),n=!0,r):Gn(i)?xr(e,r,n?"linePrefix":"lineSuffix")(i):t(i)}}const s7e={name:"definition",tokenize:u7e},a7e={tokenize:l7e,partial:!0};function u7e(e,t,n){const r=this;let i;return o;function o(h){return e.enter("definition"),s(h)}function s(h){return sme.call(r,e,a,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(h)}function a(h){return i=A1(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),h===58?(e.enter("definitionMarker"),e.consume(h),e.exit("definitionMarker"),u):n(h)}function u(h){return Na(h)?mx(e,l)(h):l(h)}function l(h){return ome(e,c,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(h)}function c(h){return e.attempt(a7e,f,f)(h)}function f(h){return Gn(h)?xr(e,d,"whitespace")(h):d(h)}function d(h){return h===null||zt(h)?(e.exit("definition"),r.parser.defined.push(i),t(h)):n(h)}}function l7e(e,t,n){return r;function r(a){return Na(a)?mx(e,i)(a):n(a)}function i(a){return ame(e,o,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(a)}function o(a){return Gn(a)?xr(e,s,"whitespace")(a):s(a)}function s(a){return a===null||zt(a)?t(a):n(a)}}const c7e={name:"hardBreakEscape",tokenize:f7e};function f7e(e,t,n){return r;function r(o){return e.enter("hardBreakEscape"),e.consume(o),i}function i(o){return zt(o)?(e.exit("hardBreakEscape"),t(o)):n(o)}}const d7e={name:"headingAtx",tokenize:p7e,resolve:h7e};function h7e(e,t){let n=e.length-2,r=3,i,o;return e[r][1].type==="whitespace"&&(r+=2),n-2>r&&e[n][1].type==="whitespace"&&(n-=2),e[n][1].type==="atxHeadingSequence"&&(r===n-1||n-4>r&&e[n-2][1].type==="whitespace")&&(n-=r+1===n?2:4),n>r&&(i={type:"atxHeadingText",start:e[r][1].start,end:e[n][1].end},o={type:"chunkText",start:e[r][1].start,end:e[n][1].end,contentType:"text"},th(e,r,n-r+1,[["enter",i,t],["enter",o,t],["exit",o,t],["exit",i,t]])),e}function p7e(e,t,n){let r=0;return i;function i(c){return e.enter("atxHeading"),o(c)}function o(c){return e.enter("atxHeadingSequence"),s(c)}function s(c){return c===35&&r++<6?(e.consume(c),s):c===null||Na(c)?(e.exit("atxHeadingSequence"),a(c)):n(c)}function a(c){return c===35?(e.enter("atxHeadingSequence"),u(c)):c===null||zt(c)?(e.exit("atxHeading"),t(c)):Gn(c)?xr(e,a,"whitespace")(c):(e.enter("atxHeadingText"),l(c))}function u(c){return c===35?(e.consume(c),u):(e.exit("atxHeadingSequence"),a(c))}function l(c){return c===null||c===35||Na(c)?(e.exit("atxHeadingText"),a(c)):(e.consume(c),l)}}const m7e=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],OZ=["pre","script","style","textarea"],g7e={name:"htmlFlow",tokenize:_7e,resolveTo:b7e,concrete:!0},y7e={tokenize:E7e,partial:!0},v7e={tokenize:w7e,partial:!0};function b7e(e){let t=e.length;for(;t--&&!(e[t][0]==="enter"&&e[t][1].type==="htmlFlow"););return t>1&&e[t-2][1].type==="linePrefix"&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2)),e}function _7e(e,t,n){const r=this;let i,o,s,a,u;return l;function l(j){return c(j)}function c(j){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(j),f}function f(j){return j===33?(e.consume(j),d):j===47?(e.consume(j),o=!0,m):j===63?(e.consume(j),i=3,r.interrupt?t:P):Vc(j)?(e.consume(j),s=String.fromCharCode(j),g):n(j)}function d(j){return j===45?(e.consume(j),i=2,h):j===91?(e.consume(j),i=5,a=0,p):Vc(j)?(e.consume(j),i=4,r.interrupt?t:P):n(j)}function h(j){return j===45?(e.consume(j),r.interrupt?t:P):n(j)}function p(j){const q="CDATA[";return j===q.charCodeAt(a++)?(e.consume(j),a===q.length?r.interrupt?t:O:p):n(j)}function m(j){return Vc(j)?(e.consume(j),s=String.fromCharCode(j),g):n(j)}function g(j){if(j===null||j===47||j===62||Na(j)){const q=j===47,G=s.toLowerCase();return!q&&!o&&OZ.includes(G)?(i=1,r.interrupt?t(j):O(j)):m7e.includes(s.toLowerCase())?(i=6,q?(e.consume(j),y):r.interrupt?t(j):O(j)):(i=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(j):o?v(j):_(j))}return j===45||iu(j)?(e.consume(j),s+=String.fromCharCode(j),g):n(j)}function y(j){return j===62?(e.consume(j),r.interrupt?t:O):n(j)}function v(j){return Gn(j)?(e.consume(j),v):R(j)}function _(j){return j===47?(e.consume(j),R):j===58||j===95||Vc(j)?(e.consume(j),w):Gn(j)?(e.consume(j),_):R(j)}function w(j){return j===45||j===46||j===58||j===95||iu(j)?(e.consume(j),w):E(j)}function E(j){return j===61?(e.consume(j),S):Gn(j)?(e.consume(j),E):_(j)}function S(j){return j===null||j===60||j===61||j===62||j===96?n(j):j===34||j===39?(e.consume(j),u=j,T):Gn(j)?(e.consume(j),S):C(j)}function T(j){return j===u?(e.consume(j),u=null,A):j===null||zt(j)?n(j):(e.consume(j),T)}function C(j){return j===null||j===34||j===39||j===47||j===60||j===61||j===62||j===96||Na(j)?E(j):(e.consume(j),C)}function A(j){return j===47||j===62||Gn(j)?_(j):n(j)}function R(j){return j===62?(e.consume(j),N):n(j)}function N(j){return j===null||zt(j)?O(j):Gn(j)?(e.consume(j),N):n(j)}function O(j){return j===45&&i===2?(e.consume(j),L):j===60&&i===1?(e.consume(j),B):j===62&&i===4?(e.consume(j),z):j===63&&i===3?(e.consume(j),P):j===93&&i===5?(e.consume(j),H):zt(j)&&(i===6||i===7)?(e.exit("htmlFlowData"),e.check(y7e,W,D)(j)):j===null||zt(j)?(e.exit("htmlFlowData"),D(j)):(e.consume(j),O)}function D(j){return e.check(v7e,M,W)(j)}function M(j){return e.enter("lineEnding"),e.consume(j),e.exit("lineEnding"),F}function F(j){return j===null||zt(j)?D(j):(e.enter("htmlFlowData"),O(j))}function L(j){return j===45?(e.consume(j),P):O(j)}function B(j){return j===47?(e.consume(j),s="",U):O(j)}function U(j){if(j===62){const q=s.toLowerCase();return OZ.includes(q)?(e.consume(j),z):O(j)}return Vc(j)&&s.length<8?(e.consume(j),s+=String.fromCharCode(j),U):O(j)}function H(j){return j===93?(e.consume(j),P):O(j)}function P(j){return j===62?(e.consume(j),z):j===45&&i===2?(e.consume(j),P):O(j)}function z(j){return j===null||zt(j)?(e.exit("htmlFlowData"),W(j)):(e.consume(j),z)}function W(j){return e.exit("htmlFlow"),t(j)}}function w7e(e,t,n){const r=this;return i;function i(s){return zt(s)?(e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),o):n(s)}function o(s){return r.parser.lazy[r.now().line]?n(s):t(s)}}function E7e(e,t,n){return r;function r(i){return e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),e.attempt(KD,t,n)}}const x7e={name:"htmlText",tokenize:T7e};function T7e(e,t,n){const r=this;let i,o,s;return a;function a(P){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(P),u}function u(P){return P===33?(e.consume(P),l):P===47?(e.consume(P),E):P===63?(e.consume(P),_):Vc(P)?(e.consume(P),C):n(P)}function l(P){return P===45?(e.consume(P),c):P===91?(e.consume(P),o=0,p):Vc(P)?(e.consume(P),v):n(P)}function c(P){return P===45?(e.consume(P),h):n(P)}function f(P){return P===null?n(P):P===45?(e.consume(P),d):zt(P)?(s=f,B(P)):(e.consume(P),f)}function d(P){return P===45?(e.consume(P),h):f(P)}function h(P){return P===62?L(P):P===45?d(P):f(P)}function p(P){const z="CDATA[";return P===z.charCodeAt(o++)?(e.consume(P),o===z.length?m:p):n(P)}function m(P){return P===null?n(P):P===93?(e.consume(P),g):zt(P)?(s=m,B(P)):(e.consume(P),m)}function g(P){return P===93?(e.consume(P),y):m(P)}function y(P){return P===62?L(P):P===93?(e.consume(P),y):m(P)}function v(P){return P===null||P===62?L(P):zt(P)?(s=v,B(P)):(e.consume(P),v)}function _(P){return P===null?n(P):P===63?(e.consume(P),w):zt(P)?(s=_,B(P)):(e.consume(P),_)}function w(P){return P===62?L(P):_(P)}function E(P){return Vc(P)?(e.consume(P),S):n(P)}function S(P){return P===45||iu(P)?(e.consume(P),S):T(P)}function T(P){return zt(P)?(s=T,B(P)):Gn(P)?(e.consume(P),T):L(P)}function C(P){return P===45||iu(P)?(e.consume(P),C):P===47||P===62||Na(P)?A(P):n(P)}function A(P){return P===47?(e.consume(P),L):P===58||P===95||Vc(P)?(e.consume(P),R):zt(P)?(s=A,B(P)):Gn(P)?(e.consume(P),A):L(P)}function R(P){return P===45||P===46||P===58||P===95||iu(P)?(e.consume(P),R):N(P)}function N(P){return P===61?(e.consume(P),O):zt(P)?(s=N,B(P)):Gn(P)?(e.consume(P),N):A(P)}function O(P){return P===null||P===60||P===61||P===62||P===96?n(P):P===34||P===39?(e.consume(P),i=P,D):zt(P)?(s=O,B(P)):Gn(P)?(e.consume(P),O):(e.consume(P),M)}function D(P){return P===i?(e.consume(P),i=void 0,F):P===null?n(P):zt(P)?(s=D,B(P)):(e.consume(P),D)}function M(P){return P===null||P===34||P===39||P===60||P===61||P===96?n(P):P===47||P===62||Na(P)?A(P):(e.consume(P),M)}function F(P){return P===47||P===62||Na(P)?A(P):n(P)}function L(P){return P===62?(e.consume(P),e.exit("htmlTextData"),e.exit("htmlText"),t):n(P)}function B(P){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(P),e.exit("lineEnding"),U}function U(P){return Gn(P)?xr(e,H,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(P):H(P)}function H(P){return e.enter("htmlTextData"),s(P)}}const fz={name:"labelEnd",tokenize:R7e,resolveTo:I7e,resolveAll:k7e},S7e={tokenize:N7e},C7e={tokenize:P7e},A7e={tokenize:D7e};function k7e(e){let t=-1;for(;++t<e.length;){const n=e[t][1];(n.type==="labelImage"||n.type==="labelLink"||n.type==="labelEnd")&&(e.splice(t+1,n.type==="labelImage"?4:2),n.type="data",t++)}return e}function I7e(e,t){let n=e.length,r=0,i,o,s,a;for(;n--;)if(i=e[n][1],o){if(i.type==="link"||i.type==="labelLink"&&i._inactive)break;e[n][0]==="enter"&&i.type==="labelLink"&&(i._inactive=!0)}else if(s){if(e[n][0]==="enter"&&(i.type==="labelImage"||i.type==="labelLink")&&!i._balanced&&(o=n,i.type!=="labelLink")){r=2;break}}else i.type==="labelEnd"&&(s=n);const u={type:e[o][1].type==="labelLink"?"link":"image",start:Object.assign({},e[o][1].start),end:Object.assign({},e[e.length-1][1].end)},l={type:"label",start:Object.assign({},e[o][1].start),end:Object.assign({},e[s][1].end)},c={type:"labelText",start:Object.assign({},e[o+r+2][1].end),end:Object.assign({},e[s-2][1].start)};return a=[["enter",u,t],["enter",l,t]],a=Vu(a,e.slice(o+1,o+r+3)),a=Vu(a,[["enter",c,t]]),a=Vu(a,cz(t.parser.constructs.insideSpan.null,e.slice(o+r+4,s-3),t)),a=Vu(a,[["exit",c,t],e[s-2],e[s-1],["exit",l,t]]),a=Vu(a,e.slice(s+1)),a=Vu(a,[["exit",u,t]]),th(e,o,e.length,a),e}function R7e(e,t,n){const r=this;let i=r.events.length,o,s;for(;i--;)if((r.events[i][1].type==="labelImage"||r.events[i][1].type==="labelLink")&&!r.events[i][1]._balanced){o=r.events[i][1];break}return a;function a(d){return o?o._inactive?f(d):(s=r.parser.defined.includes(A1(r.sliceSerialize({start:o.end,end:r.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(d),e.exit("labelMarker"),e.exit("labelEnd"),u):n(d)}function u(d){return d===40?e.attempt(S7e,c,s?c:f)(d):d===91?e.attempt(C7e,c,s?l:f)(d):s?c(d):f(d)}function l(d){return e.attempt(A7e,c,f)(d)}function c(d){return t(d)}function f(d){return o._balanced=!0,n(d)}}function N7e(e,t,n){return r;function r(f){return e.enter("resource"),e.enter("resourceMarker"),e.consume(f),e.exit("resourceMarker"),i}function i(f){return Na(f)?mx(e,o)(f):o(f)}function o(f){return f===41?c(f):ome(e,s,a,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(f)}function s(f){return Na(f)?mx(e,u)(f):c(f)}function a(f){return n(f)}function u(f){return f===34||f===39||f===40?ame(e,l,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(f):c(f)}function l(f){return Na(f)?mx(e,c)(f):c(f)}function c(f){return f===41?(e.enter("resourceMarker"),e.consume(f),e.exit("resourceMarker"),e.exit("resource"),t):n(f)}}function P7e(e,t,n){const r=this;return i;function i(a){return sme.call(r,e,o,s,"reference","referenceMarker","referenceString")(a)}function o(a){return r.parser.defined.includes(A1(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?t(a):n(a)}function s(a){return n(a)}}function D7e(e,t,n){return r;function r(o){return e.enter("reference"),e.enter("referenceMarker"),e.consume(o),e.exit("referenceMarker"),i}function i(o){return o===93?(e.enter("referenceMarker"),e.consume(o),e.exit("referenceMarker"),e.exit("reference"),t):n(o)}}const O7e={name:"labelStartImage",tokenize:$7e,resolveAll:fz.resolveAll};function $7e(e,t,n){const r=this;return i;function i(a){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(a),e.exit("labelImageMarker"),o}function o(a){return a===91?(e.enter("labelMarker"),e.consume(a),e.exit("labelMarker"),e.exit("labelImage"),s):n(a)}function s(a){return a===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(a):t(a)}}const M7e={name:"labelStartLink",tokenize:L7e,resolveAll:fz.resolveAll};function L7e(e,t,n){const r=this;return i;function i(s){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(s),e.exit("labelMarker"),e.exit("labelLink"),o}function o(s){return s===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(s):t(s)}}const gL={name:"lineEnding",tokenize:F7e};function F7e(e,t){return n;function n(r){return e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),xr(e,t,"linePrefix")}}const Ok={name:"thematicBreak",tokenize:j7e};function j7e(e,t,n){let r=0,i;return o;function o(l){return e.enter("thematicBreak"),s(l)}function s(l){return i=l,a(l)}function a(l){return l===i?(e.enter("thematicBreakSequence"),u(l)):r>=3&&(l===null||zt(l))?(e.exit("thematicBreak"),t(l)):n(l)}function u(l){return l===i?(e.consume(l),r++,u):(e.exit("thematicBreakSequence"),Gn(l)?xr(e,a,"whitespace")(l):a(l))}}const aa={name:"list",tokenize:z7e,continuation:{tokenize:V7e},exit:q7e},B7e={tokenize:W7e,partial:!0},U7e={tokenize:H7e,partial:!0};function z7e(e,t,n){const r=this,i=r.events[r.events.length-1];let o=i&&i[1].type==="linePrefix"?i[2].sliceSerialize(i[1],!0).length:0,s=0;return a;function a(h){const p=r.containerState.type||(h===42||h===43||h===45?"listUnordered":"listOrdered");if(p==="listUnordered"?!r.containerState.marker||h===r.containerState.marker:m5(h)){if(r.containerState.type||(r.containerState.type=p,e.enter(p,{_container:!0})),p==="listUnordered")return e.enter("listItemPrefix"),h===42||h===45?e.check(Ok,n,l)(h):l(h);if(!r.interrupt||h===49)return e.enter("listItemPrefix"),e.enter("listItemValue"),u(h)}return n(h)}function u(h){return m5(h)&&++s<10?(e.consume(h),u):(!r.interrupt||s<2)&&(r.containerState.marker?h===r.containerState.marker:h===41||h===46)?(e.exit("listItemValue"),l(h)):n(h)}function l(h){return e.enter("listItemMarker"),e.consume(h),e.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||h,e.check(KD,r.interrupt?n:c,e.attempt(B7e,d,f))}function c(h){return r.containerState.initialBlankLine=!0,o++,d(h)}function f(h){return Gn(h)?(e.enter("listItemPrefixWhitespace"),e.consume(h),e.exit("listItemPrefixWhitespace"),d):n(h)}function d(h){return r.containerState.size=o+r.sliceSerialize(e.exit("listItemPrefix"),!0).length,t(h)}}function V7e(e,t,n){const r=this;return r.containerState._closeFlow=void 0,e.check(KD,i,o);function i(a){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,xr(e,t,"listItemIndent",r.containerState.size+1)(a)}function o(a){return r.containerState.furtherBlankLines||!Gn(a)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,s(a)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,e.attempt(U7e,t,s)(a))}function s(a){return r.containerState._closeFlow=!0,r.interrupt=void 0,xr(e,e.attempt(aa,t,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(a)}}function H7e(e,t,n){const r=this;return xr(e,i,"listItemIndent",r.containerState.size+1);function i(o){const s=r.events[r.events.length-1];return s&&s[1].type==="listItemIndent"&&s[2].sliceSerialize(s[1],!0).length===r.containerState.size?t(o):n(o)}}function q7e(e){e.exit(this.containerState.type)}function W7e(e,t,n){const r=this;return xr(e,i,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function i(o){const s=r.events[r.events.length-1];return!Gn(o)&&s&&s[1].type==="listItemPrefixWhitespace"?t(o):n(o)}}const $Z={name:"setextUnderline",tokenize:Y7e,resolveTo:G7e};function G7e(e,t){let n=e.length,r,i,o;for(;n--;)if(e[n][0]==="enter"){if(e[n][1].type==="content"){r=n;break}e[n][1].type==="paragraph"&&(i=n)}else e[n][1].type==="content"&&e.splice(n,1),!o&&e[n][1].type==="definition"&&(o=n);const s={type:"setextHeading",start:Object.assign({},e[i][1].start),end:Object.assign({},e[e.length-1][1].end)};return e[i][1].type="setextHeadingText",o?(e.splice(i,0,["enter",s,t]),e.splice(o+1,0,["exit",e[r][1],t]),e[r][1].end=Object.assign({},e[o][1].end)):e[r][1]=s,e.push(["exit",s,t]),e}function Y7e(e,t,n){const r=this;let i;return o;function o(l){let c=r.events.length,f;for(;c--;)if(r.events[c][1].type!=="lineEnding"&&r.events[c][1].type!=="linePrefix"&&r.events[c][1].type!=="content"){f=r.events[c][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||f)?(e.enter("setextHeadingLine"),i=l,s(l)):n(l)}function s(l){return e.enter("setextHeadingLineSequence"),a(l)}function a(l){return l===i?(e.consume(l),a):(e.exit("setextHeadingLineSequence"),Gn(l)?xr(e,u,"lineSuffix")(l):u(l))}function u(l){return l===null||zt(l)?(e.exit("setextHeadingLine"),t(l)):n(l)}}const K7e={tokenize:X7e};function X7e(e){const t=this,n=e.attempt(KD,r,e.attempt(this.parser.constructs.flowInitial,i,xr(e,e.attempt(this.parser.constructs.flow,i,e.attempt(t7e,i)),"linePrefix")));return n;function r(o){if(o===null){e.consume(o);return}return e.enter("lineEndingBlank"),e.consume(o),e.exit("lineEndingBlank"),t.currentConstruct=void 0,n}function i(o){if(o===null){e.consume(o);return}return e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),t.currentConstruct=void 0,n}}const Q7e={resolveAll:lme()},J7e=ume("string"),Z7e=ume("text");function ume(e){return{tokenize:t,resolveAll:lme(e==="text"?eUe:void 0)};function t(n){const r=this,i=this.parser.constructs[e],o=n.attempt(i,s,a);return s;function s(c){return l(c)?o(c):a(c)}function a(c){if(c===null){n.consume(c);return}return n.enter("data"),n.consume(c),u}function u(c){return l(c)?(n.exit("data"),o(c)):(n.consume(c),u)}function l(c){if(c===null)return!0;const f=i[c];let d=-1;if(f)for(;++d<f.length;){const h=f[d];if(!h.previous||h.previous.call(r,r.previous))return!0}return!1}}}function lme(e){return t;function t(n,r){let i=-1,o;for(;++i<=n.length;)o===void 0?n[i]&&n[i][1].type==="data"&&(o=i,i++):(!n[i]||n[i][1].type!=="data")&&(i!==o+2&&(n[o][1].end=n[i-1][1].end,n.splice(o+2,i-o-2),i=o+2),o=void 0);return e?e(n,r):n}}function eUe(e,t){let n=0;for(;++n<=e.length;)if((n===e.length||e[n][1].type==="lineEnding")&&e[n-1][1].type==="data"){const r=e[n-1][1],i=t.sliceStream(r);let o=i.length,s=-1,a=0,u;for(;o--;){const l=i[o];if(typeof l=="string"){for(s=l.length;l.charCodeAt(s-1)===32;)a++,s--;if(s)break;s=-1}else if(l===-2)u=!0,a++;else if(l!==-1){o++;break}}if(a){const l={type:n===e.length||u||a<2?"lineSuffix":"hardBreakTrailing",start:{line:r.end.line,column:r.end.column-a,offset:r.end.offset-a,_index:r.start._index+o,_bufferIndex:o?s:r.start._bufferIndex+s},end:Object.assign({},r.end)};r.end=Object.assign({},l.start),r.start.offset===r.end.offset?Object.assign(r,l):(e.splice(n,0,["enter",l,t],["exit",l,t]),n+=2)}n++}return e}function tUe(e,t,n){let r=Object.assign(n?Object.assign({},n):{line:1,column:1,offset:0},{_index:0,_bufferIndex:-1});const i={},o=[];let s=[],a=[];const u={consume:v,enter:_,exit:w,attempt:T(E),check:T(S),interrupt:T(S,{interrupt:!0})},l={previous:null,code:null,containerState:{},events:[],parser:e,sliceStream:h,sliceSerialize:d,now:p,defineSkip:m,write:f};let c=t.tokenize.call(l,u);return t.resolveAll&&o.push(t),l;function f(N){return s=Vu(s,N),g(),s[s.length-1]!==null?[]:(C(t,0),l.events=cz(o,l.events,l),l.events)}function d(N,O){return rUe(h(N),O)}function h(N){return nUe(s,N)}function p(){const{line:N,column:O,offset:D,_index:M,_bufferIndex:F}=r;return{line:N,column:O,offset:D,_index:M,_bufferIndex:F}}function m(N){i[N.line]=N.column,R()}function g(){let N;for(;r._index<s.length;){const O=s[r._index];if(typeof O=="string")for(N=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===N&&r._bufferIndex<O.length;)y(O.charCodeAt(r._bufferIndex));else y(O)}}function y(N){c=c(N)}function v(N){zt(N)?(r.line++,r.column=1,r.offset+=N===-3?2:1,R()):N!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===s[r._index].length&&(r._bufferIndex=-1,r._index++)),l.previous=N}function _(N,O){const D=O||{};return D.type=N,D.start=p(),l.events.push(["enter",D,l]),a.push(D),D}function w(N){const O=a.pop();return O.end=p(),l.events.push(["exit",O,l]),O}function E(N,O){C(N,O.from)}function S(N,O){O.restore()}function T(N,O){return D;function D(M,F,L){let B,U,H,P;return Array.isArray(M)?W(M):"tokenize"in M?W([M]):z(M);function z(te){return pe;function pe(be){const le=be!==null&&te[be],me=be!==null&&te.null,Se=[...Array.isArray(le)?le:le?[le]:[],...Array.isArray(me)?me:me?[me]:[]];return W(Se)(be)}}function W(te){return B=te,U=0,te.length===0?L:j(te[U])}function j(te){return pe;function pe(be){return P=A(),H=te,te.partial||(l.currentConstruct=te),te.name&&l.parser.constructs.disable.null.includes(te.name)?G():te.tokenize.call(O?Object.assign(Object.create(l),O):l,u,q,G)(be)}}function q(te){return N(H,P),F}function G(te){return P.restore(),++U<B.length?j(B[U]):L}}}function C(N,O){N.resolveAll&&!o.includes(N)&&o.push(N),N.resolve&&th(l.events,O,l.events.length-O,N.resolve(l.events.slice(O),l)),N.resolveTo&&(l.events=N.resolveTo(l.events,l))}function A(){const N=p(),O=l.previous,D=l.currentConstruct,M=l.events.length,F=Array.from(a);return{restore:L,from:M};function L(){r=N,l.previous=O,l.currentConstruct=D,l.events.length=M,a=F,R()}}function R(){r.line in i&&r.column<2&&(r.column=i[r.line],r.offset+=i[r.line]-1)}}function nUe(e,t){const n=t.start._index,r=t.start._bufferIndex,i=t.end._index,o=t.end._bufferIndex;let s;if(n===i)s=[e[n].slice(r,o)];else{if(s=e.slice(n,i),r>-1){const a=s[0];typeof a=="string"?s[0]=a.slice(r):s.shift()}o>0&&s.push(e[i].slice(0,o))}return s}function rUe(e,t){let n=-1;const r=[];let i;for(;++n<e.length;){const o=e[n];let s;if(typeof o=="string")s=o;else switch(o){case-5:{s="\r";break}case-4:{s=`
`;break}case-3:{s=`\r
`;break}case-2:{s=t?" ":"	";break}case-1:{if(!t&&i)continue;s=" ";break}default:s=String.fromCharCode(o)}i=o===-2,r.push(s)}return r.join("")}const iUe={42:aa,43:aa,45:aa,48:aa,49:aa,50:aa,51:aa,52:aa,53:aa,54:aa,55:aa,56:aa,57:aa,62:tme},oUe={91:s7e},sUe={[-2]:mL,[-1]:mL,32:mL},aUe={35:d7e,42:Ok,45:[$Z,Ok],60:g7e,61:$Z,95:Ok,96:DZ,126:DZ},uUe={38:rme,92:nme},lUe={[-5]:gL,[-4]:gL,[-3]:gL,33:O7e,38:rme,42:g5,60:[MBe,x7e],91:M7e,92:[c7e,nme],93:fz,95:g5,96:KBe},cUe={null:[g5,Q7e]},fUe={null:[42,95]},dUe={null:[]},hUe=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:fUe,contentInitial:oUe,disable:dUe,document:iUe,flow:aUe,flowInitial:sUe,insideSpan:cUe,string:uUe,text:lUe},Symbol.toStringTag,{value:"Module"}));function pUe(e){const n=wBe([hUe,...(e||{}).extensions||[]]),r={defined:[],lazy:{},constructs:n,content:i(IBe),document:i(NBe),flow:i(K7e),string:i(J7e),text:i(Z7e)};return r;function i(o){return s;function s(a){return tUe(r,o,a)}}}function mUe(e){for(;!ime(e););return e}const MZ=/[\0\t\n\r]/g;function gUe(){let e=1,t="",n=!0,r;return i;function i(o,s,a){const u=[];let l,c,f,d,h;for(o=t+(typeof o=="string"?o.toString():new TextDecoder(s||void 0).decode(o)),f=0,t="",n&&(o.charCodeAt(0)===65279&&f++,n=void 0);f<o.length;){if(MZ.lastIndex=f,l=MZ.exec(o),d=l&&l.index!==void 0?l.index:o.length,h=o.charCodeAt(d),!l){t=o.slice(f);break}if(h===10&&f===d&&r)u.push(-3),r=void 0;else switch(r&&(u.push(-5),r=void 0),f<d&&(u.push(o.slice(f,d)),e+=d-f),h){case 0:{u.push(65533),e++;break}case 9:{for(c=Math.ceil(e/4)*4,u.push(-2);e++<c;)u.push(-1);break}case 10:{u.push(-4),e=1;break}default:r=!0,e=1}f=d+1}return a&&(r&&u.push(-5),t&&u.push(t),u.push(null)),u}}const yUe=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function vUe(e){return e.replace(yUe,bUe)}function bUe(e,t,n){if(t)return t;if(n.charCodeAt(0)===35){const i=n.charCodeAt(1),o=i===120||i===88;return eme(n.slice(o?2:1),o?16:10)}return lz(n)||e}const cme={}.hasOwnProperty;function _Ue(e,t,n){return typeof t!="string"&&(n=t,t=void 0),wUe(n)(mUe(pUe(n).document().write(gUe()(e,t,!0))))}function wUe(e){const t={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:o(Ge),autolinkProtocol:A,autolinkEmail:A,atxHeading:o(mt),blockQuote:o(me),characterEscape:A,characterReference:A,codeFenced:o(Se),codeFencedFenceInfo:s,codeFencedFenceMeta:s,codeIndented:o(Se,s),codeText:o(ge,s),codeTextData:A,data:A,codeFlowValue:A,definition:o(tt),definitionDestinationString:s,definitionLabelString:s,definitionTitleString:s,emphasis:o(Ue),hardBreakEscape:o(it),hardBreakTrailing:o(it),htmlFlow:o(Re,s),htmlFlowData:A,htmlText:o(Re,s),htmlTextData:A,image:o($e),label:s,link:o(Ge),listItem:o(Nt),listItemValue:d,listOrdered:o(dt,f),listUnordered:o(dt),paragraph:o(He),reference:j,referenceString:s,resourceDestinationString:s,resourceTitleString:s,setextHeading:o(mt),strong:o(fe),thematicBreak:o(gt)},exit:{atxHeading:u(),atxHeadingSequence:E,autolink:u(),autolinkEmail:le,autolinkProtocol:be,blockQuote:u(),characterEscapeValue:R,characterReferenceMarkerHexadecimal:G,characterReferenceMarkerNumeric:G,characterReferenceValue:te,characterReference:pe,codeFenced:u(g),codeFencedFence:m,codeFencedFenceInfo:h,codeFencedFenceMeta:p,codeFlowValue:R,codeIndented:u(y),codeText:u(F),codeTextData:R,data:R,definition:u(),definitionDestinationString:w,definitionLabelString:v,definitionTitleString:_,emphasis:u(),hardBreakEscape:u(O),hardBreakTrailing:u(O),htmlFlow:u(D),htmlFlowData:R,htmlText:u(M),htmlTextData:R,image:u(B),label:H,labelText:U,lineEnding:N,link:u(L),listItem:u(),listOrdered:u(),listUnordered:u(),paragraph:u(),referenceString:q,resourceDestinationString:P,resourceTitleString:z,resource:W,setextHeading:u(C),setextHeadingLineSequence:T,setextHeadingText:S,strong:u(),thematicBreak:u()}};fme(t,(e||{}).mdastExtensions||[]);const n={};return r;function r(ce){let Te={type:"root",children:[]};const ze={stack:[Te],tokenStack:[],config:t,enter:a,exit:l,buffer:s,resume:c,data:n},st=[];let vt=-1;for(;++vt<ce.length;)if(ce[vt][1].type==="listOrdered"||ce[vt][1].type==="listUnordered")if(ce[vt][0]==="enter")st.push(vt);else{const vn=st.pop();vt=i(ce,vn,vt)}for(vt=-1;++vt<ce.length;){const vn=t[ce[vt][0]];cme.call(vn,ce[vt][1].type)&&vn[ce[vt][1].type].call(Object.assign({sliceSerialize:ce[vt][2].sliceSerialize},ze),ce[vt][1])}if(ze.tokenStack.length>0){const vn=ze.tokenStack[ze.tokenStack.length-1];(vn[1]||LZ).call(ze,void 0,vn[0])}for(Te.position={start:Fh(ce.length>0?ce[0][1].start:{line:1,column:1,offset:0}),end:Fh(ce.length>0?ce[ce.length-2][1].end:{line:1,column:1,offset:0})},vt=-1;++vt<t.transforms.length;)Te=t.transforms[vt](Te)||Te;return Te}function i(ce,Te,ze){let st=Te-1,vt=-1,vn=!1,Zn,bn,Bn,Zt;for(;++st<=ze;){const an=ce[st];switch(an[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{an[0]==="enter"?vt++:vt--,Zt=void 0;break}case"lineEndingBlank":{an[0]==="enter"&&(Zn&&!Zt&&!vt&&!Bn&&(Bn=st),Zt=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:Zt=void 0}if(!vt&&an[0]==="enter"&&an[1].type==="listItemPrefix"||vt===-1&&an[0]==="exit"&&(an[1].type==="listUnordered"||an[1].type==="listOrdered")){if(Zn){let Dn=st;for(bn=void 0;Dn--;){const On=ce[Dn];if(On[1].type==="lineEnding"||On[1].type==="lineEndingBlank"){if(On[0]==="exit")continue;bn&&(ce[bn][1].type="lineEndingBlank",vn=!0),On[1].type="lineEnding",bn=Dn}else if(!(On[1].type==="linePrefix"||On[1].type==="blockQuotePrefix"||On[1].type==="blockQuotePrefixWhitespace"||On[1].type==="blockQuoteMarker"||On[1].type==="listItemIndent"))break}Bn&&(!bn||Bn<bn)&&(Zn._spread=!0),Zn.end=Object.assign({},bn?ce[bn][1].start:an[1].end),ce.splice(bn||st,0,["exit",Zn,an[2]]),st++,ze++}if(an[1].type==="listItemPrefix"){const Dn={type:"listItem",_spread:!1,start:Object.assign({},an[1].start),end:void 0};Zn=Dn,ce.splice(st,0,["enter",Dn,an[2]]),st++,ze++,Bn=void 0,Zt=!0}}}return ce[Te][1]._spread=vn,ze}function o(ce,Te){return ze;function ze(st){a.call(this,ce(st),st),Te&&Te.call(this,st)}}function s(){this.stack.push({type:"fragment",children:[]})}function a(ce,Te,ze){this.stack[this.stack.length-1].children.push(ce),this.stack.push(ce),this.tokenStack.push([Te,ze]),ce.position={start:Fh(Te.start),end:void 0}}function u(ce){return Te;function Te(ze){ce&&ce.call(this,ze),l.call(this,ze)}}function l(ce,Te){const ze=this.stack.pop(),st=this.tokenStack.pop();if(st)st[0].type!==ce.type&&(Te?Te.call(this,ce,st[0]):(st[1]||LZ).call(this,ce,st[0]));else throw new Error("Cannot close `"+ce.type+"` ("+px({start:ce.start,end:ce.end})+"): its not open");ze.position.end=Fh(ce.end)}function c(){return bBe(this.stack.pop())}function f(){this.data.expectingFirstListItemValue=!0}function d(ce){if(this.data.expectingFirstListItemValue){const Te=this.stack[this.stack.length-2];Te.start=Number.parseInt(this.sliceSerialize(ce),10),this.data.expectingFirstListItemValue=void 0}}function h(){const ce=this.resume(),Te=this.stack[this.stack.length-1];Te.lang=ce}function p(){const ce=this.resume(),Te=this.stack[this.stack.length-1];Te.meta=ce}function m(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function g(){const ce=this.resume(),Te=this.stack[this.stack.length-1];Te.value=ce.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function y(){const ce=this.resume(),Te=this.stack[this.stack.length-1];Te.value=ce.replace(/(\r?\n|\r)$/g,"")}function v(ce){const Te=this.resume(),ze=this.stack[this.stack.length-1];ze.label=Te,ze.identifier=A1(this.sliceSerialize(ce)).toLowerCase()}function _(){const ce=this.resume(),Te=this.stack[this.stack.length-1];Te.title=ce}function w(){const ce=this.resume(),Te=this.stack[this.stack.length-1];Te.url=ce}function E(ce){const Te=this.stack[this.stack.length-1];if(!Te.depth){const ze=this.sliceSerialize(ce).length;Te.depth=ze}}function S(){this.data.setextHeadingSlurpLineEnding=!0}function T(ce){const Te=this.stack[this.stack.length-1];Te.depth=this.sliceSerialize(ce).codePointAt(0)===61?1:2}function C(){this.data.setextHeadingSlurpLineEnding=void 0}function A(ce){const ze=this.stack[this.stack.length-1].children;let st=ze[ze.length-1];(!st||st.type!=="text")&&(st=lt(),st.position={start:Fh(ce.start),end:void 0},ze.push(st)),this.stack.push(st)}function R(ce){const Te=this.stack.pop();Te.value+=this.sliceSerialize(ce),Te.position.end=Fh(ce.end)}function N(ce){const Te=this.stack[this.stack.length-1];if(this.data.atHardBreak){const ze=Te.children[Te.children.length-1];ze.position.end=Fh(ce.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&t.canContainEols.includes(Te.type)&&(A.call(this,ce),R.call(this,ce))}function O(){this.data.atHardBreak=!0}function D(){const ce=this.resume(),Te=this.stack[this.stack.length-1];Te.value=ce}function M(){const ce=this.resume(),Te=this.stack[this.stack.length-1];Te.value=ce}function F(){const ce=this.resume(),Te=this.stack[this.stack.length-1];Te.value=ce}function L(){const ce=this.stack[this.stack.length-1];if(this.data.inReference){const Te=this.data.referenceType||"shortcut";ce.type+="Reference",ce.referenceType=Te,delete ce.url,delete ce.title}else delete ce.identifier,delete ce.label;this.data.referenceType=void 0}function B(){const ce=this.stack[this.stack.length-1];if(this.data.inReference){const Te=this.data.referenceType||"shortcut";ce.type+="Reference",ce.referenceType=Te,delete ce.url,delete ce.title}else delete ce.identifier,delete ce.label;this.data.referenceType=void 0}function U(ce){const Te=this.sliceSerialize(ce),ze=this.stack[this.stack.length-2];ze.label=vUe(Te),ze.identifier=A1(Te).toLowerCase()}function H(){const ce=this.stack[this.stack.length-1],Te=this.resume(),ze=this.stack[this.stack.length-1];if(this.data.inReference=!0,ze.type==="link"){const st=ce.children;ze.children=st}else ze.alt=Te}function P(){const ce=this.resume(),Te=this.stack[this.stack.length-1];Te.url=ce}function z(){const ce=this.resume(),Te=this.stack[this.stack.length-1];Te.title=ce}function W(){this.data.inReference=void 0}function j(){this.data.referenceType="collapsed"}function q(ce){const Te=this.resume(),ze=this.stack[this.stack.length-1];ze.label=Te,ze.identifier=A1(this.sliceSerialize(ce)).toLowerCase(),this.data.referenceType="full"}function G(ce){this.data.characterReferenceType=ce.type}function te(ce){const Te=this.sliceSerialize(ce),ze=this.data.characterReferenceType;let st;ze?(st=eme(Te,ze==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):st=lz(Te);const vt=this.stack[this.stack.length-1];vt.value+=st}function pe(ce){const Te=this.stack.pop();Te.position.end=Fh(ce.end)}function be(ce){R.call(this,ce);const Te=this.stack[this.stack.length-1];Te.url=this.sliceSerialize(ce)}function le(ce){R.call(this,ce);const Te=this.stack[this.stack.length-1];Te.url="mailto:"+this.sliceSerialize(ce)}function me(){return{type:"blockquote",children:[]}}function Se(){return{type:"code",lang:null,meta:null,value:""}}function ge(){return{type:"inlineCode",value:""}}function tt(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function Ue(){return{type:"emphasis",children:[]}}function mt(){return{type:"heading",depth:0,children:[]}}function it(){return{type:"break"}}function Re(){return{type:"html",value:""}}function $e(){return{type:"image",title:null,url:"",alt:null}}function Ge(){return{type:"link",title:null,url:"",children:[]}}function dt(ce){return{type:"list",ordered:ce.type==="listOrdered",start:null,spread:ce._spread,children:[]}}function Nt(ce){return{type:"listItem",spread:ce._spread,checked:null,children:[]}}function He(){return{type:"paragraph",children:[]}}function fe(){return{type:"strong",children:[]}}function lt(){return{type:"text",value:""}}function gt(){return{type:"thematicBreak"}}}function Fh(e){return{line:e.line,column:e.column,offset:e.offset}}function fme(e,t){let n=-1;for(;++n<t.length;){const r=t[n];Array.isArray(r)?fme(e,r):EUe(e,r)}}function EUe(e,t){let n;for(n in t)if(cme.call(t,n))switch(n){case"canContainEols":{const r=t[n];r&&e[n].push(...r);break}case"transforms":{const r=t[n];r&&e[n].push(...r);break}case"enter":case"exit":{const r=t[n];r&&Object.assign(e[n],r);break}}}function LZ(e,t){throw e?new Error("Cannot close `"+e.type+"` ("+px({start:e.start,end:e.end})+"): a different token (`"+t.type+"`, "+px({start:t.start,end:t.end})+") is open"):new Error("Cannot close document, a token (`"+t.type+"`, "+px({start:t.start,end:t.end})+") is still open")}function xUe(e){const t=this;t.parser=n;function n(r){return _Ue(r,{...t.data("settings"),...e,extensions:t.data("micromarkExtensions")||[],mdastExtensions:t.data("fromMarkdownExtensions")||[]})}}function TUe(e,t){const n={type:"element",tagName:"blockquote",properties:{},children:e.wrap(e.all(t),!0)};return e.patch(t,n),e.applyData(t,n)}function SUe(e,t){const n={type:"element",tagName:"br",properties:{},children:[]};return e.patch(t,n),[e.applyData(t,n),{type:"text",value:`
`}]}function CUe(e,t){const n=t.value?t.value+`
`:"",r={};t.lang&&(r.className=["language-"+t.lang]);let i={type:"element",tagName:"code",properties:r,children:[{type:"text",value:n}]};return t.meta&&(i.data={meta:t.meta}),e.patch(t,i),i=e.applyData(t,i),i={type:"element",tagName:"pre",properties:{},children:[i]},e.patch(t,i),i}function AUe(e,t){const n={type:"element",tagName:"del",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function kUe(e,t){const n={type:"element",tagName:"em",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function IUe(e,t){const n=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",r=String(t.identifier).toUpperCase(),i=T_(r.toLowerCase()),o=e.footnoteOrder.indexOf(r);let s,a=e.footnoteCounts.get(r);a===void 0?(a=0,e.footnoteOrder.push(r),s=e.footnoteOrder.length):s=o+1,a+=1,e.footnoteCounts.set(r,a);const u={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+i,id:n+"fnref-"+i+(a>1?"-"+a:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(s)}]};e.patch(t,u);const l={type:"element",tagName:"sup",properties:{},children:[u]};return e.patch(t,l),e.applyData(t,l)}function RUe(e,t){const n={type:"element",tagName:"h"+t.depth,properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function NUe(e,t){if(e.options.allowDangerousHtml){const n={type:"raw",value:t.value};return e.patch(t,n),e.applyData(t,n)}}function dme(e,t){const n=t.referenceType;let r="]";if(n==="collapsed"?r+="[]":n==="full"&&(r+="["+(t.label||t.identifier)+"]"),t.type==="imageReference")return[{type:"text",value:"!["+t.alt+r}];const i=e.all(t),o=i[0];o&&o.type==="text"?o.value="["+o.value:i.unshift({type:"text",value:"["});const s=i[i.length-1];return s&&s.type==="text"?s.value+=r:i.push({type:"text",value:r}),i}function PUe(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return dme(e,t);const i={src:T_(r.url||""),alt:t.alt};r.title!==null&&r.title!==void 0&&(i.title=r.title);const o={type:"element",tagName:"img",properties:i,children:[]};return e.patch(t,o),e.applyData(t,o)}function DUe(e,t){const n={src:T_(t.url)};t.alt!==null&&t.alt!==void 0&&(n.alt=t.alt),t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"img",properties:n,children:[]};return e.patch(t,r),e.applyData(t,r)}function OUe(e,t){const n={type:"text",value:t.value.replace(/\r?\n|\r/g," ")};e.patch(t,n);const r={type:"element",tagName:"code",properties:{},children:[n]};return e.patch(t,r),e.applyData(t,r)}function $Ue(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return dme(e,t);const i={href:T_(r.url||"")};r.title!==null&&r.title!==void 0&&(i.title=r.title);const o={type:"element",tagName:"a",properties:i,children:e.all(t)};return e.patch(t,o),e.applyData(t,o)}function MUe(e,t){const n={href:T_(t.url)};t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"a",properties:n,children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function LUe(e,t,n){const r=e.all(t),i=n?FUe(n):hme(t),o={},s=[];if(typeof t.checked=="boolean"){const c=r[0];let f;c&&c.type==="element"&&c.tagName==="p"?f=c:(f={type:"element",tagName:"p",properties:{},children:[]},r.unshift(f)),f.children.length>0&&f.children.unshift({type:"text",value:" "}),f.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:t.checked,disabled:!0},children:[]}),o.className=["task-list-item"]}let a=-1;for(;++a<r.length;){const c=r[a];(i||a!==0||c.type!=="element"||c.tagName!=="p")&&s.push({type:"text",value:`
`}),c.type==="element"&&c.tagName==="p"&&!i?s.push(...c.children):s.push(c)}const u=r[r.length-1];u&&(i||u.type!=="element"||u.tagName!=="p")&&s.push({type:"text",value:`
`});const l={type:"element",tagName:"li",properties:o,children:s};return e.patch(t,l),e.applyData(t,l)}function FUe(e){let t=!1;if(e.type==="list"){t=e.spread||!1;const n=e.children;let r=-1;for(;!t&&++r<n.length;)t=hme(n[r])}return t}function hme(e){const t=e.spread;return t??e.children.length>1}function jUe(e,t){const n={},r=e.all(t);let i=-1;for(typeof t.start=="number"&&t.start!==1&&(n.start=t.start);++i<r.length;){const s=r[i];if(s.type==="element"&&s.tagName==="li"&&s.properties&&Array.isArray(s.properties.className)&&s.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const o={type:"element",tagName:t.ordered?"ol":"ul",properties:n,children:e.wrap(r,!0)};return e.patch(t,o),e.applyData(t,o)}function BUe(e,t){const n={type:"element",tagName:"p",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function UUe(e,t){const n={type:"root",children:e.wrap(e.all(t))};return e.patch(t,n),e.applyData(t,n)}function zUe(e,t){const n={type:"element",tagName:"strong",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function VUe(e,t){const n=e.all(t),r=n.shift(),i=[];if(r){const s={type:"element",tagName:"thead",properties:{},children:e.wrap([r],!0)};e.patch(t.children[0],s),i.push(s)}if(n.length>0){const s={type:"element",tagName:"tbody",properties:{},children:e.wrap(n,!0)},a=Mf(t.children[1]),u=YD(t.children[t.children.length-1]);a&&u&&(s.position={start:a,end:u}),i.push(s)}const o={type:"element",tagName:"table",properties:{},children:e.wrap(i,!0)};return e.patch(t,o),e.applyData(t,o)}function HUe(e,t,n){const r=n?n.children:void 0,o=(r?r.indexOf(t):1)===0?"th":"td",s=n&&n.type==="table"?n.align:void 0,a=s?s.length:t.children.length;let u=-1;const l=[];for(;++u<a;){const f=t.children[u],d={},h=s?s[u]:void 0;h&&(d.align=h);let p={type:"element",tagName:o,properties:d,children:[]};f&&(p.children=e.all(f),e.patch(f,p),p=e.applyData(f,p)),l.push(p)}const c={type:"element",tagName:"tr",properties:{},children:e.wrap(l,!0)};return e.patch(t,c),e.applyData(t,c)}function qUe(e,t){const n={type:"element",tagName:"td",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}const FZ=9,jZ=32;function WUe(e){const t=String(e),n=/\r?\n|\r/g;let r=n.exec(t),i=0;const o=[];for(;r;)o.push(BZ(t.slice(i,r.index),i>0,!0),r[0]),i=r.index+r[0].length,r=n.exec(t);return o.push(BZ(t.slice(i),i>0,!1)),o.join("")}function BZ(e,t,n){let r=0,i=e.length;if(t){let o=e.codePointAt(r);for(;o===FZ||o===jZ;)r++,o=e.codePointAt(r)}if(n){let o=e.codePointAt(i-1);for(;o===FZ||o===jZ;)i--,o=e.codePointAt(i-1)}return i>r?e.slice(r,i):""}function GUe(e,t){const n={type:"text",value:WUe(String(t.value))};return e.patch(t,n),e.applyData(t,n)}function YUe(e,t){const n={type:"element",tagName:"hr",properties:{},children:[]};return e.patch(t,n),e.applyData(t,n)}const KUe={blockquote:TUe,break:SUe,code:CUe,delete:AUe,emphasis:kUe,footnoteReference:IUe,heading:RUe,html:NUe,imageReference:PUe,image:DUe,inlineCode:OUe,linkReference:$Ue,link:MUe,listItem:LUe,list:jUe,paragraph:BUe,root:UUe,strong:zUe,table:VUe,tableCell:qUe,tableRow:HUe,text:GUe,thematicBreak:YUe,toml:n2,yaml:n2,definition:n2,footnoteDefinition:n2};function n2(){}const pme=-1,XD=0,hR=1,pR=2,dz=3,hz=4,pz=5,mz=6,mme=7,gme=8,UZ=typeof self=="object"?self:globalThis,XUe=(e,t)=>{const n=(i,o)=>(e.set(o,i),i),r=i=>{if(e.has(i))return e.get(i);const[o,s]=t[i];switch(o){case XD:case pme:return n(s,i);case hR:{const a=n([],i);for(const u of s)a.push(r(u));return a}case pR:{const a=n({},i);for(const[u,l]of s)a[r(u)]=r(l);return a}case dz:return n(new Date(s),i);case hz:{const{source:a,flags:u}=s;return n(new RegExp(a,u),i)}case pz:{const a=n(new Map,i);for(const[u,l]of s)a.set(r(u),r(l));return a}case mz:{const a=n(new Set,i);for(const u of s)a.add(r(u));return a}case mme:{const{name:a,message:u}=s;return n(new UZ[a](u),i)}case gme:return n(BigInt(s),i);case"BigInt":return n(Object(BigInt(s)),i)}return n(new UZ[o](s),i)};return r},zZ=e=>XUe(new Map,e)(0),mv="",{toString:QUe}={},{keys:JUe}=Object,Rw=e=>{const t=typeof e;if(t!=="object"||!e)return[XD,t];const n=QUe.call(e).slice(8,-1);switch(n){case"Array":return[hR,mv];case"Object":return[pR,mv];case"Date":return[dz,mv];case"RegExp":return[hz,mv];case"Map":return[pz,mv];case"Set":return[mz,mv]}return n.includes("Array")?[hR,n]:n.includes("Error")?[mme,n]:[pR,n]},r2=([e,t])=>e===XD&&(t==="function"||t==="symbol"),ZUe=(e,t,n,r)=>{const i=(s,a)=>{const u=r.push(s)-1;return n.set(a,u),u},o=s=>{if(n.has(s))return n.get(s);let[a,u]=Rw(s);switch(a){case XD:{let c=s;switch(u){case"bigint":a=gme,c=s.toString();break;case"function":case"symbol":if(e)throw new TypeError("unable to serialize "+u);c=null;break;case"undefined":return i([pme],s)}return i([a,c],s)}case hR:{if(u)return i([u,[...s]],s);const c=[],f=i([a,c],s);for(const d of s)c.push(o(d));return f}case pR:{if(u)switch(u){case"BigInt":return i([u,s.toString()],s);case"Boolean":case"Number":case"String":return i([u,s.valueOf()],s)}if(t&&"toJSON"in s)return o(s.toJSON());const c=[],f=i([a,c],s);for(const d of JUe(s))(e||!r2(Rw(s[d])))&&c.push([o(d),o(s[d])]);return f}case dz:return i([a,s.toISOString()],s);case hz:{const{source:c,flags:f}=s;return i([a,{source:c,flags:f}],s)}case pz:{const c=[],f=i([a,c],s);for(const[d,h]of s)(e||!(r2(Rw(d))||r2(Rw(h))))&&c.push([o(d),o(h)]);return f}case mz:{const c=[],f=i([a,c],s);for(const d of s)(e||!r2(Rw(d)))&&c.push(o(d));return f}}const{message:l}=s;return i([a,{name:u,message:l}],s)};return o},VZ=(e,{json:t,lossy:n}={})=>{const r=[];return ZUe(!(t||n),!!t,new Map,r)(e),r},lb=typeof structuredClone=="function"?(e,t)=>t&&("json"in t||"lossy"in t)?zZ(VZ(e,t)):structuredClone(e):(e,t)=>zZ(VZ(e,t));function eze(e,t){const n=[{type:"text",value:""}];return t>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(t)}]}),n}function tze(e,t){return"Back to reference "+(e+1)+(t>1?"-"+t:"")}function nze(e){const t=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",n=e.options.footnoteBackContent||eze,r=e.options.footnoteBackLabel||tze,i=e.options.footnoteLabel||"Footnotes",o=e.options.footnoteLabelTagName||"h2",s=e.options.footnoteLabelProperties||{className:["sr-only"]},a=[];let u=-1;for(;++u<e.footnoteOrder.length;){const l=e.footnoteById.get(e.footnoteOrder[u]);if(!l)continue;const c=e.all(l),f=String(l.identifier).toUpperCase(),d=T_(f.toLowerCase());let h=0;const p=[],m=e.footnoteCounts.get(f);for(;m!==void 0&&++h<=m;){p.length>0&&p.push({type:"text",value:" "});let v=typeof n=="string"?n:n(u,h);typeof v=="string"&&(v={type:"text",value:v}),p.push({type:"element",tagName:"a",properties:{href:"#"+t+"fnref-"+d+(h>1?"-"+h:""),dataFootnoteBackref:"",ariaLabel:typeof r=="string"?r:r(u,h),className:["data-footnote-backref"]},children:Array.isArray(v)?v:[v]})}const g=c[c.length-1];if(g&&g.type==="element"&&g.tagName==="p"){const v=g.children[g.children.length-1];v&&v.type==="text"?v.value+=" ":g.children.push({type:"text",value:" "}),g.children.push(...p)}else c.push(...p);const y={type:"element",tagName:"li",properties:{id:t+"fn-"+d},children:e.wrap(c,!0)};e.patch(l,y),a.push(y)}if(a.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:o,properties:{...lb(s),id:"footnote-label"},children:[{type:"text",value:i}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:e.wrap(a,!0)},{type:"text",value:`
`}]}}const yme=function(e){if(e==null)return sze;if(typeof e=="function")return QD(e);if(typeof e=="object")return Array.isArray(e)?rze(e):ize(e);if(typeof e=="string")return oze(e);throw new Error("Expected function, string, or object as test")};function rze(e){const t=[];let n=-1;for(;++n<e.length;)t[n]=yme(e[n]);return QD(r);function r(...i){let o=-1;for(;++o<t.length;)if(t[o].apply(this,i))return!0;return!1}}function ize(e){const t=e;return QD(n);function n(r){const i=r;let o;for(o in e)if(i[o]!==t[o])return!1;return!0}}function oze(e){return QD(t);function t(n){return n&&n.type===e}}function QD(e){return t;function t(n,r,i){return!!(aze(n)&&e.call(this,n,typeof r=="number"?r:void 0,i||void 0))}}function sze(){return!0}function aze(e){return e!==null&&typeof e=="object"&&"type"in e}const vme=[],uze=!0,HZ=!1,lze="skip";function cze(e,t,n,r){let i;typeof t=="function"&&typeof n!="function"?(r=n,n=t):i=t;const o=yme(i),s=r?-1:1;a(e,void 0,[])();function a(u,l,c){const f=u&&typeof u=="object"?u:{};if(typeof f.type=="string"){const h=typeof f.tagName=="string"?f.tagName:typeof f.name=="string"?f.name:void 0;Object.defineProperty(d,"name",{value:"node ("+(u.type+(h?"<"+h+">":""))+")"})}return d;function d(){let h=vme,p,m,g;if((!t||o(u,l,c[c.length-1]||void 0))&&(h=fze(n(u,c)),h[0]===HZ))return h;if("children"in u&&u.children){const y=u;if(y.children&&h[0]!==lze)for(m=(r?y.children.length:-1)+s,g=c.concat(y);m>-1&&m<y.children.length;){const v=y.children[m];if(p=a(v,m,g)(),p[0]===HZ)return p;m=typeof p[1]=="number"?p[1]:m+s}}return h}}}function fze(e){return Array.isArray(e)?e:typeof e=="number"?[uze,e]:e==null?vme:[e]}function gz(e,t,n,r){let i,o,s;typeof t=="function"&&typeof n!="function"?(o=void 0,s=t,i=n):(o=t,s=n,i=r),cze(e,o,a,i);function a(u,l){const c=l[l.length-1],f=c?c.children.indexOf(u):void 0;return s(u,f,c)}}const y5={}.hasOwnProperty,dze={};function hze(e,t){const n=t||dze,r=new Map,i=new Map,o=new Map,s={...KUe,...n.handlers},a={all:l,applyData:mze,definitionById:r,footnoteById:i,footnoteCounts:o,footnoteOrder:[],handlers:s,one:u,options:n,patch:pze,wrap:yze};return gz(e,function(c){if(c.type==="definition"||c.type==="footnoteDefinition"){const f=c.type==="definition"?r:i,d=String(c.identifier).toUpperCase();f.has(d)||f.set(d,c)}}),a;function u(c,f){const d=c.type,h=a.handlers[d];if(y5.call(a.handlers,d)&&h)return h(a,c,f);if(a.options.passThrough&&a.options.passThrough.includes(d)){if("children"in c){const{children:m,...g}=c,y=lb(g);return y.children=a.all(c),y}return lb(c)}return(a.options.unknownHandler||gze)(a,c,f)}function l(c){const f=[];if("children"in c){const d=c.children;let h=-1;for(;++h<d.length;){const p=a.one(d[h],c);if(p){if(h&&d[h-1].type==="break"&&(!Array.isArray(p)&&p.type==="text"&&(p.value=qZ(p.value)),!Array.isArray(p)&&p.type==="element")){const m=p.children[0];m&&m.type==="text"&&(m.value=qZ(m.value))}Array.isArray(p)?f.push(...p):f.push(p)}}}return f}}function pze(e,t){e.position&&(t.position=K8e(e))}function mze(e,t){let n=t;if(e&&e.data){const r=e.data.hName,i=e.data.hChildren,o=e.data.hProperties;if(typeof r=="string")if(n.type==="element")n.tagName=r;else{const s="children"in n?n.children:[n];n={type:"element",tagName:r,properties:{},children:s}}n.type==="element"&&o&&Object.assign(n.properties,lb(o)),"children"in n&&n.children&&i!==null&&i!==void 0&&(n.children=i)}return n}function gze(e,t){const n=t.data||{},r="value"in t&&!(y5.call(n,"hProperties")||y5.call(n,"hChildren"))?{type:"text",value:t.value}:{type:"element",tagName:"div",properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function yze(e,t){const n=[];let r=-1;for(t&&n.push({type:"text",value:`
`});++r<e.length;)r&&n.push({type:"text",value:`
`}),n.push(e[r]);return t&&e.length>0&&n.push({type:"text",value:`
`}),n}function qZ(e){let t=0,n=e.charCodeAt(t);for(;n===9||n===32;)t++,n=e.charCodeAt(t);return e.slice(t)}function WZ(e,t){const n=hze(e,t),r=n.one(e,void 0),i=nze(n),o=Array.isArray(r)?{type:"root",children:r}:r||{type:"root",children:[]};return i&&o.children.push({type:"text",value:`
`},i),o}function vze(e,t){return e&&"run"in e?async function(n,r){const i=WZ(n,{file:r,...t});await e.run(i,r)}:function(n,r){return WZ(n,{file:r,...t||e})}}function GZ(e){if(e)throw e}var $k=Object.prototype.hasOwnProperty,bme=Object.prototype.toString,YZ=Object.defineProperty,KZ=Object.getOwnPropertyDescriptor,XZ=function(t){return typeof Array.isArray=="function"?Array.isArray(t):bme.call(t)==="[object Array]"},QZ=function(t){if(!t||bme.call(t)!=="[object Object]")return!1;var n=$k.call(t,"constructor"),r=t.constructor&&t.constructor.prototype&&$k.call(t.constructor.prototype,"isPrototypeOf");if(t.constructor&&!n&&!r)return!1;var i;for(i in t);return typeof i>"u"||$k.call(t,i)},JZ=function(t,n){YZ&&n.name==="__proto__"?YZ(t,n.name,{enumerable:!0,configurable:!0,value:n.newValue,writable:!0}):t[n.name]=n.newValue},ZZ=function(t,n){if(n==="__proto__")if($k.call(t,n)){if(KZ)return KZ(t,n).value}else return;return t[n]},bze=function e(){var t,n,r,i,o,s,a=arguments[0],u=1,l=arguments.length,c=!1;for(typeof a=="boolean"&&(c=a,a=arguments[1]||{},u=2),(a==null||typeof a!="object"&&typeof a!="function")&&(a={});u<l;++u)if(t=arguments[u],t!=null)for(n in t)r=ZZ(a,n),i=ZZ(t,n),a!==i&&(c&&i&&(QZ(i)||(o=XZ(i)))?(o?(o=!1,s=r&&XZ(r)?r:[]):s=r&&QZ(r)?r:{},JZ(a,{name:n,newValue:e(c,s,i)})):typeof i<"u"&&JZ(a,{name:n,newValue:i}));return a};const yL=ku(bze);function v5(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function _ze(){const e=[],t={run:n,use:r};return t;function n(...i){let o=-1;const s=i.pop();if(typeof s!="function")throw new TypeError("Expected function as last argument, not "+s);a(null,...i);function a(u,...l){const c=e[++o];let f=-1;if(u){s(u);return}for(;++f<i.length;)(l[f]===null||l[f]===void 0)&&(l[f]=i[f]);i=l,c?wze(c,a)(...l):s(null,...l)}}function r(i){if(typeof i!="function")throw new TypeError("Expected `middelware` to be a function, not "+i);return e.push(i),t}}function wze(e,t){let n;return r;function r(...s){const a=e.length>s.length;let u;a&&s.push(i);try{u=e.apply(this,s)}catch(l){const c=l;if(a&&n)throw c;return i(c)}a||(u&&u.then&&typeof u.then=="function"?u.then(o,i):u instanceof Error?i(u):o(u))}function i(s,...a){n||(n=!0,t(s,...a))}function o(s){i(null,s)}}const Lc={basename:Eze,dirname:xze,extname:Tze,join:Sze,sep:"/"};function Eze(e,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');nC(e);let n=0,r=-1,i=e.length,o;if(t===void 0||t.length===0||t.length>e.length){for(;i--;)if(e.codePointAt(i)===47){if(o){n=i+1;break}}else r<0&&(o=!0,r=i+1);return r<0?"":e.slice(n,r)}if(t===e)return"";let s=-1,a=t.length-1;for(;i--;)if(e.codePointAt(i)===47){if(o){n=i+1;break}}else s<0&&(o=!0,s=i+1),a>-1&&(e.codePointAt(i)===t.codePointAt(a--)?a<0&&(r=i):(a=-1,r=s));return n===r?r=s:r<0&&(r=e.length),e.slice(n,r)}function xze(e){if(nC(e),e.length===0)return".";let t=-1,n=e.length,r;for(;--n;)if(e.codePointAt(n)===47){if(r){t=n;break}}else r||(r=!0);return t<0?e.codePointAt(0)===47?"/":".":t===1&&e.codePointAt(0)===47?"//":e.slice(0,t)}function Tze(e){nC(e);let t=e.length,n=-1,r=0,i=-1,o=0,s;for(;t--;){const a=e.codePointAt(t);if(a===47){if(s){r=t+1;break}continue}n<0&&(s=!0,n=t+1),a===46?i<0?i=t:o!==1&&(o=1):i>-1&&(o=-1)}return i<0||n<0||o===0||o===1&&i===n-1&&i===r+1?"":e.slice(i,n)}function Sze(...e){let t=-1,n;for(;++t<e.length;)nC(e[t]),e[t]&&(n=n===void 0?e[t]:n+"/"+e[t]);return n===void 0?".":Cze(n)}function Cze(e){nC(e);const t=e.codePointAt(0)===47;let n=Aze(e,!t);return n.length===0&&!t&&(n="."),n.length>0&&e.codePointAt(e.length-1)===47&&(n+="/"),t?"/"+n:n}function Aze(e,t){let n="",r=0,i=-1,o=0,s=-1,a,u;for(;++s<=e.length;){if(s<e.length)a=e.codePointAt(s);else{if(a===47)break;a=47}if(a===47){if(!(i===s-1||o===1))if(i!==s-1&&o===2){if(n.length<2||r!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(u=n.lastIndexOf("/"),u!==n.length-1){u<0?(n="",r=0):(n=n.slice(0,u),r=n.length-1-n.lastIndexOf("/")),i=s,o=0;continue}}else if(n.length>0){n="",r=0,i=s,o=0;continue}}t&&(n=n.length>0?n+"/..":"..",r=2)}else n.length>0?n+="/"+e.slice(i+1,s):n=e.slice(i+1,s),r=s-i-1;i=s,o=0}else a===46&&o>-1?o++:o=-1}return n}function nC(e){if(typeof e!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}const kze={cwd:Ize};function Ize(){return"/"}function b5(e){return!!(e!==null&&typeof e=="object"&&"href"in e&&e.href&&"protocol"in e&&e.protocol&&e.auth===void 0)}function Rze(e){if(typeof e=="string")e=new URL(e);else if(!b5(e)){const t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if(e.protocol!=="file:"){const t=new TypeError("The URL must be of scheme file");throw t.code="ERR_INVALID_URL_SCHEME",t}return Nze(e)}function Nze(e){if(e.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const t=e.pathname;let n=-1;for(;++n<t.length;)if(t.codePointAt(n)===37&&t.codePointAt(n+1)===50){const r=t.codePointAt(n+2);if(r===70||r===102){const i=new TypeError("File URL path must not include encoded / characters");throw i.code="ERR_INVALID_FILE_URL_PATH",i}}return decodeURIComponent(t)}const vL=["history","path","basename","stem","extname","dirname"];class _me{constructor(t){let n;t?b5(t)?n={path:t}:typeof t=="string"||Pze(t)?n={value:t}:n=t:n={},this.cwd=kze.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let r=-1;for(;++r<vL.length;){const o=vL[r];o in n&&n[o]!==void 0&&n[o]!==null&&(this[o]=o==="history"?[...n[o]]:n[o])}let i;for(i in n)vL.includes(i)||(this[i]=n[i])}get basename(){return typeof this.path=="string"?Lc.basename(this.path):void 0}set basename(t){_L(t,"basename"),bL(t,"basename"),this.path=Lc.join(this.dirname||"",t)}get dirname(){return typeof this.path=="string"?Lc.dirname(this.path):void 0}set dirname(t){eee(this.basename,"dirname"),this.path=Lc.join(t||"",this.basename)}get extname(){return typeof this.path=="string"?Lc.extname(this.path):void 0}set extname(t){if(bL(t,"extname"),eee(this.dirname,"extname"),t){if(t.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(t.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=Lc.join(this.dirname,this.stem+(t||""))}get path(){return this.history[this.history.length-1]}set path(t){b5(t)&&(t=Rze(t)),_L(t,"path"),this.path!==t&&this.history.push(t)}get stem(){return typeof this.path=="string"?Lc.basename(this.path,this.extname):void 0}set stem(t){_L(t,"stem"),bL(t,"stem"),this.path=Lc.join(this.dirname||"",t+(this.extname||""))}fail(t,n,r){const i=this.message(t,n,r);throw i.fatal=!0,i}info(t,n,r){const i=this.message(t,n,r);return i.fatal=void 0,i}message(t,n,r){const i=new Es(t,n,r);return this.path&&(i.name=this.path+":"+i.name,i.file=this.path),i.fatal=!1,this.messages.push(i),i}toString(t){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(t||void 0).decode(this.value)}}function bL(e,t){if(e&&e.includes(Lc.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+Lc.sep+"`")}function _L(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function eee(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}function Pze(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const Dze=function(e){const r=this.constructor.prototype,i=r[e],o=function(){return i.apply(o,arguments)};Object.setPrototypeOf(o,r);const s=Object.getOwnPropertyNames(i);for(const a of s){const u=Object.getOwnPropertyDescriptor(i,a);u&&Object.defineProperty(o,a,u)}return o},Oze={}.hasOwnProperty;class yz extends Dze{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=_ze()}copy(){const t=new yz;let n=-1;for(;++n<this.attachers.length;){const r=this.attachers[n];t.use(...r)}return t.data(yL(!0,{},this.namespace)),t}data(t,n){return typeof t=="string"?arguments.length===2?(xL("data",this.frozen),this.namespace[t]=n,this):Oze.call(this.namespace,t)&&this.namespace[t]||void 0:t?(xL("data",this.frozen),this.namespace=t,this):this.namespace}freeze(){if(this.frozen)return this;const t=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...r]=this.attachers[this.freezeIndex];if(r[0]===!1)continue;r[0]===!0&&(r[0]=void 0);const i=n.call(t,...r);typeof i=="function"&&this.transformers.use(i)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(t){this.freeze();const n=i2(t),r=this.parser||this.Parser;return wL("parse",r),r(String(n),n)}process(t,n){const r=this;return this.freeze(),wL("process",this.parser||this.Parser),EL("process",this.compiler||this.Compiler),n?i(void 0,n):new Promise(i);function i(o,s){const a=i2(t),u=r.parse(a);r.run(u,a,function(c,f,d){if(c||!f||!d)return l(c);const h=f,p=r.stringify(h,d);Lze(p)?d.value=p:d.result=p,l(c,d)});function l(c,f){c||!f?s(c):o?o(f):n(void 0,f)}}}processSync(t){let n=!1,r;return this.freeze(),wL("processSync",this.parser||this.Parser),EL("processSync",this.compiler||this.Compiler),this.process(t,i),nee("processSync","process",n),r;function i(o,s){n=!0,GZ(o),r=s}}run(t,n,r){tee(t),this.freeze();const i=this.transformers;return!r&&typeof n=="function"&&(r=n,n=void 0),r?o(void 0,r):new Promise(o);function o(s,a){const u=i2(n);i.run(t,u,l);function l(c,f,d){const h=f||t;c?a(c):s?s(h):r(void 0,h,d)}}}runSync(t,n){let r=!1,i;return this.run(t,n,o),nee("runSync","run",r),i;function o(s,a){GZ(s),i=a,r=!0}}stringify(t,n){this.freeze();const r=i2(n),i=this.compiler||this.Compiler;return EL("stringify",i),tee(t),i(t,r)}use(t,...n){const r=this.attachers,i=this.namespace;if(xL("use",this.frozen),t!=null)if(typeof t=="function")u(t,n);else if(typeof t=="object")Array.isArray(t)?a(t):s(t);else throw new TypeError("Expected usable value, not `"+t+"`");return this;function o(l){if(typeof l=="function")u(l,[]);else if(typeof l=="object")if(Array.isArray(l)){const[c,...f]=l;u(c,f)}else s(l);else throw new TypeError("Expected usable value, not `"+l+"`")}function s(l){if(!("plugins"in l)&&!("settings"in l))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");a(l.plugins),l.settings&&(i.settings=yL(!0,i.settings,l.settings))}function a(l){let c=-1;if(l!=null)if(Array.isArray(l))for(;++c<l.length;){const f=l[c];o(f)}else throw new TypeError("Expected a list of plugins, not `"+l+"`")}function u(l,c){let f=-1,d=-1;for(;++f<r.length;)if(r[f][0]===l){d=f;break}if(d===-1)r.push([l,...c]);else if(c.length>0){let[h,...p]=c;const m=r[d][1];v5(m)&&v5(h)&&(h=yL(!0,m,h)),r[d]=[l,h,...p]}}}}const $ze=new yz().freeze();function wL(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `parser`")}function EL(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `compiler`")}function xL(e,t){if(t)throw new Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function tee(e){if(!v5(e)||typeof e.type!="string")throw new TypeError("Expected node, got `"+e+"`")}function nee(e,t,n){if(!n)throw new Error("`"+e+"` finished async. Use `"+t+"` instead")}function i2(e){return Mze(e)?e:new _me(e)}function Mze(e){return!!(e&&typeof e=="object"&&"message"in e&&"messages"in e)}function Lze(e){return typeof e=="string"||Fze(e)}function Fze(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const jze="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",ree=[],iee={allowDangerousHtml:!0},Bze=/^(https?|ircs?|mailto|xmpp)$/i,Uze=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function zze(e){const t=e.allowedElements,n=e.allowElement,r=e.children||"",i=e.className,o=e.components,s=e.disallowedElements,a=e.rehypePlugins||ree,u=e.remarkPlugins||ree,l=e.remarkRehypeOptions?{...e.remarkRehypeOptions,...iee}:iee,c=e.skipHtml,f=e.unwrapDisallowed,d=e.urlTransform||Vze,h=$ze().use(xUe).use(u).use(vze,l).use(a),p=new _me;typeof r=="string"&&(p.value=r);for(const v of Uze)Object.hasOwn(e,v.from)&&(""+v.from+(v.to?"use `"+v.to+"` instead":"remove it")+jze+v.id,void 0);const m=h.parse(p);let g=h.runSync(m,p);return i&&(g={type:"element",tagName:"div",properties:{className:i},children:g.type==="root"?g.children:[g]}),gz(g,y),tBe(g,{Fragment:b.Fragment,components:o,ignoreInvalidStyle:!0,jsx:b.jsx,jsxs:b.jsxs,passKeys:!0,passNode:!0});function y(v,_,w){if(v.type==="raw"&&w&&typeof _=="number")return c?w.children.splice(_,1):w.children[_]={type:"text",value:v.value},_;if(v.type==="element"){let E;for(E in pL)if(Object.hasOwn(pL,E)&&Object.hasOwn(v.properties,E)){const S=v.properties[E],T=pL[E];(T===null||T.includes(v.tagName))&&(v.properties[E]=d(String(S||""),E,v))}}if(v.type==="element"){let E=t?!t.includes(v.tagName):s?s.includes(v.tagName):!1;if(!E&&n&&typeof _=="number"&&(E=!n(v,_,w)),E&&w&&typeof _=="number")return f&&v.children?w.children.splice(_,1,...v.children):w.children.splice(_,1),_}}}function Vze(e){const t=e.indexOf(":"),n=e.indexOf("?"),r=e.indexOf("#"),i=e.indexOf("/");return t<0||i>-1&&t>i||n>-1&&t>n||r>-1&&t>r||Bze.test(e.slice(0,t))?e:""}const oee=/[#.]/g;function Hze(e,t){const n=e||"",r={};let i=0,o,s;for(;i<n.length;){oee.lastIndex=i;const a=oee.exec(n),u=n.slice(i,a?a.index:n.length);u&&(o?o==="#"?r.id=u:Array.isArray(r.className)?r.className.push(u):r.className=[u]:s=u,i+=u.length),a&&(o=a[0],i++)}return{type:"element",tagName:s||t||"div",properties:r,children:[]}}const qze=new Set(["button","menu","reset","submit"]),_5={}.hasOwnProperty;function wme(e,t,n){const r=n&&Kze(n);function i(o,s,...a){let u=-1,l;if(o==null){l={type:"root",children:[]};const c=s;a.unshift(c)}else if(l=Hze(o,t),l.tagName=l.tagName.toLowerCase(),r&&_5.call(r,l.tagName)&&(l.tagName=r[l.tagName]),Wze(s,l.tagName)){let c;for(c in s)_5.call(s,c)&&Gze(e,l.properties,c,s[c])}else a.unshift(s);for(;++u<a.length;)w5(l.children,a[u]);return l.type==="element"&&l.tagName==="template"&&(l.content={type:"root",children:l.children},l.children=[]),l}return i}function Wze(e,t){return e==null||typeof e!="object"||Array.isArray(e)?!1:t==="input"||!e.type||typeof e.type!="string"?!0:"children"in e&&Array.isArray(e.children)?!1:t==="button"?qze.has(e.type.toLowerCase()):!("value"in e)}function Gze(e,t,n,r){const i=GD(e,n);let o=-1,s;if(r!=null){if(typeof r=="number"){if(Number.isNaN(r))return;s=r}else typeof r=="boolean"?s=r:typeof r=="string"?i.spaceSeparated?s=vZ(r):i.commaSeparated?s=hZ(r):i.commaOrSpaceSeparated?s=vZ(hZ(r).join(" ")):s=see(i,i.property,r):Array.isArray(r)?s=r.concat():s=i.property==="style"?Yze(r):String(r);if(Array.isArray(s)){const a=[];for(;++o<s.length;){const u=see(i,i.property,s[o]);a[o]=u}s=a}if(i.property==="className"&&Array.isArray(t.className)){const a=s;s=t.className.concat(a)}t[i.property]=s}}function w5(e,t){let n=-1;if(t!=null)if(typeof t=="string"||typeof t=="number")e.push({type:"text",value:String(t)});else if(Array.isArray(t))for(;++n<t.length;)w5(e,t[n]);else if(typeof t=="object"&&"type"in t)t.type==="root"?w5(e,t.children):e.push(t);else throw new Error("Expected node, nodes, or string, got `"+t+"`")}function see(e,t,n){if(typeof n=="string"){if(e.number&&n&&!Number.isNaN(Number(n)))return Number(n);if((e.boolean||e.overloadedBoolean)&&(n===""||IT(n)===IT(t)))return!0}return n}function Yze(e){const t=[];let n;for(n in e)_5.call(e,n)&&t.push([n,e[n]].join(": "));return t.join("; ")}function Kze(e){const t={};let n=-1;for(;++n<e.length;)t[e[n].toLowerCase()]=e[n];return t}const Xze=["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","solidColor","textArea","textPath"],Qze=wme(tC,"div"),Jze=wme(Bm,"g",Xze),TL=/\r?\n|\r/g;function Zze(e){const t=String(e),n=[];for(TL.lastIndex=0;TL.test(t);)n.push(TL.lastIndex);return n.push(t.length+1),{toPoint:r,toOffset:i};function r(o){let s=-1;if(typeof o=="number"&&o>-1&&o<n[n.length-1]){for(;++s<n.length;)if(n[s]>o)return{line:s+1,column:o-(s>0?n[s-1]:0)+1,offset:o}}}function i(o){const s=o&&o.line,a=o&&o.column;if(typeof s=="number"&&typeof a=="number"&&!Number.isNaN(s)&&!Number.isNaN(a)&&s-1 in n){const u=(n[s-2]||0)+a-1||0;if(u>-1&&u<n[n.length-1])return u}}}const t0={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},Eme={}.hasOwnProperty,eVe=Object.prototype;function tVe(e,t){const n=t||{};return vz({file:n.file||void 0,location:!1,schema:n.space==="svg"?Bm:tC,verbose:n.verbose||!1},e)}function vz(e,t){let n;switch(t.nodeName){case"#comment":{const r=t;return n={type:"comment",value:r.data},Mk(e,r,n),n}case"#document":case"#document-fragment":{const r=t,i="mode"in r?r.mode==="quirks"||r.mode==="limited-quirks":!1;if(n={type:"root",children:xme(e,t.childNodes),data:{quirksMode:i}},e.file&&e.location){const o=String(e.file),s=Zze(o),a=s.toPoint(0),u=s.toPoint(o.length);n.position={start:a,end:u}}return n}case"#documentType":{const r=t;return n={type:"doctype"},Mk(e,r,n),n}case"#text":{const r=t;return n={type:"text",value:r.value},Mk(e,r,n),n}default:return n=nVe(e,t),n}}function xme(e,t){let n=-1;const r=[];for(;++n<t.length;){const i=vz(e,t[n]);r.push(i)}return r}function nVe(e,t){const n=e.schema;e.schema=t.namespaceURI===t0.svg?Bm:tC;let r=-1;const i={};for(;++r<t.attrs.length;){const a=t.attrs[r],u=(a.prefix?a.prefix+":":"")+a.name;Eme.call(eVe,u)||(i[u]=a.value)}const s=(e.schema.space==="svg"?Jze:Qze)(t.tagName,i,xme(e,t.childNodes));if(Mk(e,t,s),s.tagName==="template"){const a=t,u=a.sourceCodeLocation,l=u&&u.startTag&&i1(u.startTag),c=u&&u.endTag&&i1(u.endTag),f=vz(e,a.content);l&&c&&e.file&&(f.position={start:l.end,end:c.start}),s.content=f}return e.schema=n,s}function Mk(e,t,n){if("sourceCodeLocation"in t&&t.sourceCodeLocation&&e.file){const r=rVe(e,n,t.sourceCodeLocation);r&&(e.location=!0,n.position=r)}}function rVe(e,t,n){const r=i1(n);if(t.type==="element"){const i=t.children[t.children.length-1];if(r&&!n.endTag&&i&&i.position&&i.position.end&&(r.end=Object.assign({},i.position.end)),e.verbose){const o={};let s;if(n.attrs)for(s in n.attrs)Eme.call(n.attrs,s)&&(o[GD(e.schema,s).property]=i1(n.attrs[s]));n.startTag;const a=i1(n.startTag),u=n.endTag?i1(n.endTag):void 0,l={opening:a};u&&(l.closing=u),l.properties=o,t.data={position:l}}}return r}function i1(e){const t=aee({line:e.startLine,column:e.startCol,offset:e.startOffset}),n=aee({line:e.endLine,column:e.endCol,offset:e.endOffset});return t||n?{start:t,end:n}:void 0}function aee(e){return e.line&&e.column?e:void 0}const uee={}.hasOwnProperty;function Tme(e,t){const n=t||{};function r(i,...o){let s=r.invalid;const a=r.handlers;if(i&&uee.call(i,e)){const u=String(i[e]);s=uee.call(a,u)?a[u]:r.unknown}if(s)return s.call(this,i,...o)}return r.handlers=n.handlers||{},r.invalid=n.invalid,r.unknown=n.unknown,r}const iVe={},oVe={}.hasOwnProperty,Sme=Tme("type",{handlers:{root:aVe,element:dVe,text:cVe,comment:fVe,doctype:lVe}});function sVe(e,t){const r=(t||iVe).space;return Sme(e,r==="svg"?Bm:tC)}function aVe(e,t){const n={nodeName:"#document",mode:(e.data||{}).quirksMode?"quirks":"no-quirks",childNodes:[]};return n.childNodes=bz(e.children,n,t),S_(e,n),n}function uVe(e,t){const n={nodeName:"#document-fragment",childNodes:[]};return n.childNodes=bz(e.children,n,t),S_(e,n),n}function lVe(e){const t={nodeName:"#documentType",name:"html",publicId:"",systemId:"",parentNode:null};return S_(e,t),t}function cVe(e){const t={nodeName:"#text",value:e.value,parentNode:null};return S_(e,t),t}function fVe(e){const t={nodeName:"#comment",data:e.value,parentNode:null};return S_(e,t),t}function dVe(e,t){const n=t;let r=n;e.type==="element"&&e.tagName.toLowerCase()==="svg"&&n.space==="html"&&(r=Bm);const i=[];let o;if(e.properties){for(o in e.properties)if(o!=="children"&&oVe.call(e.properties,o)){const u=hVe(r,o,e.properties[o]);u&&i.push(u)}}const s=r.space,a={nodeName:e.tagName,tagName:e.tagName,attrs:i,namespaceURI:t0[s],childNodes:[],parentNode:null};return a.childNodes=bz(e.children,a,r),S_(e,a),e.tagName==="template"&&e.content&&(a.content=uVe(e.content,r)),a}function hVe(e,t,n){const r=GD(e,t);if(n===!1||n===null||n===void 0||typeof n=="number"&&Number.isNaN(n)||!n&&r.boolean)return;Array.isArray(n)&&(n=r.commaSeparated?Lpe(n):Wpe(n));const i={name:r.attribute,value:n===!0?"":String(n)};if(r.space&&r.space!=="html"&&r.space!=="svg"){const o=i.name.indexOf(":");o<0?i.prefix="":(i.name=i.name.slice(o+1),i.prefix=r.attribute.slice(0,o)),i.namespace=t0[r.space]}return i}function bz(e,t,n){let r=-1;const i=[];if(e)for(;++r<e.length;){const o=Sme(e[r],n);o.parentNode=t,i.push(o)}return i}function S_(e,t){const n=e.position;n&&n.start&&n.end&&(n.start.offset,n.end.offset,t.sourceCodeLocation={startLine:n.start.line,startCol:n.start.column,startOffset:n.start.offset,endLine:n.end.line,endCol:n.end.column,endOffset:n.end.offset})}const pVe=["area","base","basefont","bgsound","br","col","command","embed","frame","hr","image","img","input","keygen","link","meta","param","source","track","wbr"],mVe=new Set([65534,65535,131070,131071,196606,196607,262142,262143,327678,327679,393214,393215,458750,458751,524286,524287,589822,589823,655358,655359,720894,720895,786430,786431,851966,851967,917502,917503,983038,983039,1048574,1048575,1114110,1114111]),Mr="";var K;(function(e){e[e.EOF=-1]="EOF",e[e.NULL=0]="NULL",e[e.TABULATION=9]="TABULATION",e[e.CARRIAGE_RETURN=13]="CARRIAGE_RETURN",e[e.LINE_FEED=10]="LINE_FEED",e[e.FORM_FEED=12]="FORM_FEED",e[e.SPACE=32]="SPACE",e[e.EXCLAMATION_MARK=33]="EXCLAMATION_MARK",e[e.QUOTATION_MARK=34]="QUOTATION_MARK",e[e.NUMBER_SIGN=35]="NUMBER_SIGN",e[e.AMPERSAND=38]="AMPERSAND",e[e.APOSTROPHE=39]="APOSTROPHE",e[e.HYPHEN_MINUS=45]="HYPHEN_MINUS",e[e.SOLIDUS=47]="SOLIDUS",e[e.DIGIT_0=48]="DIGIT_0",e[e.DIGIT_9=57]="DIGIT_9",e[e.SEMICOLON=59]="SEMICOLON",e[e.LESS_THAN_SIGN=60]="LESS_THAN_SIGN",e[e.EQUALS_SIGN=61]="EQUALS_SIGN",e[e.GREATER_THAN_SIGN=62]="GREATER_THAN_SIGN",e[e.QUESTION_MARK=63]="QUESTION_MARK",e[e.LATIN_CAPITAL_A=65]="LATIN_CAPITAL_A",e[e.LATIN_CAPITAL_F=70]="LATIN_CAPITAL_F",e[e.LATIN_CAPITAL_X=88]="LATIN_CAPITAL_X",e[e.LATIN_CAPITAL_Z=90]="LATIN_CAPITAL_Z",e[e.RIGHT_SQUARE_BRACKET=93]="RIGHT_SQUARE_BRACKET",e[e.GRAVE_ACCENT=96]="GRAVE_ACCENT",e[e.LATIN_SMALL_A=97]="LATIN_SMALL_A",e[e.LATIN_SMALL_F=102]="LATIN_SMALL_F",e[e.LATIN_SMALL_X=120]="LATIN_SMALL_X",e[e.LATIN_SMALL_Z=122]="LATIN_SMALL_Z",e[e.REPLACEMENT_CHARACTER=65533]="REPLACEMENT_CHARACTER"})(K=K||(K={}));const oa={DASH_DASH:"--",CDATA_START:"[CDATA[",DOCTYPE:"doctype",SCRIPT:"script",PUBLIC:"public",SYSTEM:"system"};function Cme(e){return e>=55296&&e<=57343}function gVe(e){return e>=56320&&e<=57343}function yVe(e,t){return(e-55296)*1024+9216+t}function Ame(e){return e!==32&&e!==10&&e!==13&&e!==9&&e!==12&&e>=1&&e<=31||e>=127&&e<=159}function kme(e){return e>=64976&&e<=65007||mVe.has(e)}var Ae;(function(e){e.controlCharacterInInputStream="control-character-in-input-stream",e.noncharacterInInputStream="noncharacter-in-input-stream",e.surrogateInInputStream="surrogate-in-input-stream",e.nonVoidHtmlElementStartTagWithTrailingSolidus="non-void-html-element-start-tag-with-trailing-solidus",e.endTagWithAttributes="end-tag-with-attributes",e.endTagWithTrailingSolidus="end-tag-with-trailing-solidus",e.unexpectedSolidusInTag="unexpected-solidus-in-tag",e.unexpectedNullCharacter="unexpected-null-character",e.unexpectedQuestionMarkInsteadOfTagName="unexpected-question-mark-instead-of-tag-name",e.invalidFirstCharacterOfTagName="invalid-first-character-of-tag-name",e.unexpectedEqualsSignBeforeAttributeName="unexpected-equals-sign-before-attribute-name",e.missingEndTagName="missing-end-tag-name",e.unexpectedCharacterInAttributeName="unexpected-character-in-attribute-name",e.unknownNamedCharacterReference="unknown-named-character-reference",e.missingSemicolonAfterCharacterReference="missing-semicolon-after-character-reference",e.unexpectedCharacterAfterDoctypeSystemIdentifier="unexpected-character-after-doctype-system-identifier",e.unexpectedCharacterInUnquotedAttributeValue="unexpected-character-in-unquoted-attribute-value",e.eofBeforeTagName="eof-before-tag-name",e.eofInTag="eof-in-tag",e.missingAttributeValue="missing-attribute-value",e.missingWhitespaceBetweenAttributes="missing-whitespace-between-attributes",e.missingWhitespaceAfterDoctypePublicKeyword="missing-whitespace-after-doctype-public-keyword",e.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers="missing-whitespace-between-doctype-public-and-system-identifiers",e.missingWhitespaceAfterDoctypeSystemKeyword="missing-whitespace-after-doctype-system-keyword",e.missingQuoteBeforeDoctypePublicIdentifier="missing-quote-before-doctype-public-identifier",e.missingQuoteBeforeDoctypeSystemIdentifier="missing-quote-before-doctype-system-identifier",e.missingDoctypePublicIdentifier="missing-doctype-public-identifier",e.missingDoctypeSystemIdentifier="missing-doctype-system-identifier",e.abruptDoctypePublicIdentifier="abrupt-doctype-public-identifier",e.abruptDoctypeSystemIdentifier="abrupt-doctype-system-identifier",e.cdataInHtmlContent="cdata-in-html-content",e.incorrectlyOpenedComment="incorrectly-opened-comment",e.eofInScriptHtmlCommentLikeText="eof-in-script-html-comment-like-text",e.eofInDoctype="eof-in-doctype",e.nestedComment="nested-comment",e.abruptClosingOfEmptyComment="abrupt-closing-of-empty-comment",e.eofInComment="eof-in-comment",e.incorrectlyClosedComment="incorrectly-closed-comment",e.eofInCdata="eof-in-cdata",e.absenceOfDigitsInNumericCharacterReference="absence-of-digits-in-numeric-character-reference",e.nullCharacterReference="null-character-reference",e.surrogateCharacterReference="surrogate-character-reference",e.characterReferenceOutsideUnicodeRange="character-reference-outside-unicode-range",e.controlCharacterReference="control-character-reference",e.noncharacterCharacterReference="noncharacter-character-reference",e.missingWhitespaceBeforeDoctypeName="missing-whitespace-before-doctype-name",e.missingDoctypeName="missing-doctype-name",e.invalidCharacterSequenceAfterDoctypeName="invalid-character-sequence-after-doctype-name",e.duplicateAttribute="duplicate-attribute",e.nonConformingDoctype="non-conforming-doctype",e.missingDoctype="missing-doctype",e.misplacedDoctype="misplaced-doctype",e.endTagWithoutMatchingOpenElement="end-tag-without-matching-open-element",e.closingOfElementWithOpenChildElements="closing-of-element-with-open-child-elements",e.disallowedContentInNoscriptInHead="disallowed-content-in-noscript-in-head",e.openElementsLeftAfterEof="open-elements-left-after-eof",e.abandonedHeadElementChild="abandoned-head-element-child",e.misplacedStartTagForHeadElement="misplaced-start-tag-for-head-element",e.nestedNoscriptInHead="nested-noscript-in-head",e.eofInElementThatCanContainOnlyText="eof-in-element-that-can-contain-only-text"})(Ae=Ae||(Ae={}));const vVe=65536;class bVe{constructor(t){this.handler=t,this.html="",this.pos=-1,this.lastGapPos=-2,this.gapStack=[],this.skipNextNewLine=!1,this.lastChunkWritten=!1,this.endOfChunkHit=!1,this.bufferWaterline=vVe,this.isEol=!1,this.lineStartPos=0,this.droppedBufferSize=0,this.line=1,this.lastErrOffset=-1}get col(){return this.pos-this.lineStartPos+ +(this.lastGapPos!==this.pos)}get offset(){return this.droppedBufferSize+this.pos}getError(t){const{line:n,col:r,offset:i}=this;return{code:t,startLine:n,endLine:n,startCol:r,endCol:r,startOffset:i,endOffset:i}}_err(t){this.handler.onParseError&&this.lastErrOffset!==this.offset&&(this.lastErrOffset=this.offset,this.handler.onParseError(this.getError(t)))}_addGap(){this.gapStack.push(this.lastGapPos),this.lastGapPos=this.pos}_processSurrogate(t){if(this.pos!==this.html.length-1){const n=this.html.charCodeAt(this.pos+1);if(gVe(n))return this.pos++,this._addGap(),yVe(t,n)}else if(!this.lastChunkWritten)return this.endOfChunkHit=!0,K.EOF;return this._err(Ae.surrogateInInputStream),t}willDropParsedChunk(){return this.pos>this.bufferWaterline}dropParsedChunk(){this.willDropParsedChunk()&&(this.html=this.html.substring(this.pos),this.lineStartPos-=this.pos,this.droppedBufferSize+=this.pos,this.pos=0,this.lastGapPos=-2,this.gapStack.length=0)}write(t,n){this.html.length>0?this.html+=t:this.html=t,this.endOfChunkHit=!1,this.lastChunkWritten=n}insertHtmlAtCurrentPos(t){this.html=this.html.substring(0,this.pos+1)+t+this.html.substring(this.pos+1),this.endOfChunkHit=!1}startsWith(t,n){if(this.pos+t.length>this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,!1;if(n)return this.html.startsWith(t,this.pos);for(let r=0;r<t.length;r++)if((this.html.charCodeAt(this.pos+r)|32)!==t.charCodeAt(r))return!1;return!0}peek(t){const n=this.pos+t;if(n>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,K.EOF;const r=this.html.charCodeAt(n);return r===K.CARRIAGE_RETURN?K.LINE_FEED:r}advance(){if(this.pos++,this.isEol&&(this.isEol=!1,this.line++,this.lineStartPos=this.pos),this.pos>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,K.EOF;let t=this.html.charCodeAt(this.pos);return t===K.CARRIAGE_RETURN?(this.isEol=!0,this.skipNextNewLine=!0,K.LINE_FEED):t===K.LINE_FEED&&(this.isEol=!0,this.skipNextNewLine)?(this.line--,this.skipNextNewLine=!1,this._addGap(),this.advance()):(this.skipNextNewLine=!1,Cme(t)&&(t=this._processSurrogate(t)),this.handler.onParseError===null||t>31&&t<127||t===K.LINE_FEED||t===K.CARRIAGE_RETURN||t>159&&t<64976||this._checkForProblematicCharacters(t),t)}_checkForProblematicCharacters(t){Ame(t)?this._err(Ae.controlCharacterInInputStream):kme(t)&&this._err(Ae.noncharacterInInputStream)}retreat(t){for(this.pos-=t;this.pos<this.lastGapPos;)this.lastGapPos=this.gapStack.pop(),this.pos--;this.isEol=!1}}var ln;(function(e){e[e.CHARACTER=0]="CHARACTER",e[e.NULL_CHARACTER=1]="NULL_CHARACTER",e[e.WHITESPACE_CHARACTER=2]="WHITESPACE_CHARACTER",e[e.START_TAG=3]="START_TAG",e[e.END_TAG=4]="END_TAG",e[e.COMMENT=5]="COMMENT",e[e.DOCTYPE=6]="DOCTYPE",e[e.EOF=7]="EOF",e[e.HIBERNATION=8]="HIBERNATION"})(ln=ln||(ln={}));function Ime(e,t){for(let n=e.attrs.length-1;n>=0;n--)if(e.attrs[n].name===t)return e.attrs[n].value;return null}const Vh=new Uint16Array('<\0\0\0\0\0\0EMabcfglmnoprstu\\bfmsligP&cutereve;iyx}rc;r;ravepha;acr;d;gpon;f;plyFunction;ingcsr;ign;ildemlaceforsucrkslash;;ed;y;crtause;noullis;a;r;pf;eve;cmpeq;HOacdefhilorsucy;PYcpyute;;italDifferentialD;leys;aeioron;dilrc;nint;ot;dnilla;terDot;i;rcleDMPTot;inus;lus;imes;ocskwiseContourIntegral;eCurlyDQoubleQuote;uote;lnpuon;e;gitruent;nt;ourIntegral;fr;oduct;nterClockwiseContourIntegral;oss;cr;p;Cap;DJSZacefios;otrahd;cy;cy;cy;grsger;r;hv;ayron;;l;ta;r;afcmriticalADGTcute;o;bleAcute;rave;ilde;ond;ferentialD;\0\0\0\0f;;DEot;qual;bleCDLRUVontourIntegrao\0\0nArrow;eoftARTrrow;ightArrow;engLReftARrrow;ightArrow;ightArrow;ightATrrow;ee;p\0\0rrow;ownArrow;erticalBar;nABLRTarrow;BUar;pArrow;reve;eft\0\0ightVector;eeVector;ector;Bar;ight\0eeVector;ector;Bar;ee;Arrow;ctr;rok;NTacdfglmopqstuxG;Hcuteaiyron;rc;ot;r;raveement;apcr;ty\0\0mallSquare;erySmallSquare;gpon;f;silon;uail;Tilde;librium;cir;m;a;mlipsts;onentialE;cfiosy;r;lled\0\0mallSquare;erySmallSquare;\0\0\0f;All;riertrf;cJTabcdfgorstcy;>mma;d;reve;eiydil;rc;;ot;r;;pf;eaterEFGLSTqual;Less;ullEqual;reater;ess;lantEqual;ilde;cr;;AacfiosuRDcy;ctek;;irc;r;lbertSpace;\0f;izontalLine;ctrok;mpownHumqual;EJOacdfgmnostucy;lig;cy;cuteiyrc;ot;r;rave;apcgr;inaryI;lie\0;egrral;section;isibleCTomma;imes;gpton;f;a;cr;ilde;\0cy;lcfosuiyrc;;r;pf;\0r;rcy;kcy;HJacfoscy;cy;ppa;eydil;;r;pf;cr;JTaceflmostcy;<cmnprute;bda;g;lacetrf;r;aeyron;dil;;fstACDFRTUVarnrgleBracket;row;BRar;ightArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ightAVrrow;ector;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;ightsEFGLSTqualGreater;ullEqual;reater;ess;lantEqual;ilde;r;;eftarrow;idot;npwgLRlreftARrrow;ightArrow;ightArrow;eftarightightf;erLReftArrow;ightArrow;cht;rok;;acefiosup;y;dliumSpace;lintrf;r;nusPlus;pf;c;Jacefostucy;cute;aeyron;dil;;gswativeMTVediumSpace;hicneryThitedGLreaterGreateessLesLine;r;Bnptreak;BreakingSpace;f;;CDEGHLNPRSTVoungruent;pCap;oubleVerticalBar;lqxement;ual;Tilde;ists;reater;EFGLSTqual;ullEqual;reater;ess;lantEqual;ilde;umpownHump;qual;efstTriangle;BEar;qual;s;EGLSTqual;reater;ess;lantEqual;ilde;estedGLreaterGreater;essLess;recedes;ESqual;lantEqual;eiverseElement;ghtTriangle;BEar;qual;quuareSubpset;Equal;erset;Equal;bcpset;Equal;ceeds;ESTqual;lantEqual;ilde;erset;Equal;ilde;EFTqual;ullEqual;ilde;erticalBar;cr;ilde;Eacdfgmoprstuvlig;cuteiyrc;blac;r;raveaeicr;ga;cron;pf;enCurlyDQoubleQuote;uote;;clr;ashidees;mlerBParr;acek;et;arenthesis;acfhilorsrtialD;y;r;i;;usMinus;ipncareplanf;;eiocedes;ESTqual;lantEqual;ilde;me;dpuct;ortion;al;cir;;UfosOT"r;pf;cr;BEacefhiorsuarr;Gcnrute;g;r;tl;aeyron;dil;;;verseEUlqement;uilibrium;pEquilibrium;ro;ghtACDFTUVanrgleBracket;row;BLar;eftArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;puf;ndImplies;ightarrow;chr;;leDelayed;HOacfhimoqstuCcHcy;y;FTcy;cute;;aeiyron;dil;rc;;r;ortDLRUownArroweftArrowightArrowpArrow;gma;allCircle;pf;\0\0t;are;ISUntersection;ubpset;Equal;erset;Equal;nion;cr;ar;bcmp;set;Equal;cheeds;ESTqual;lantEqual;ilde;Th;;esrset;Equal;etHRSacfhiorsORNADE;Hccy;y;bu;;aeyron;dil;;r;ei\0efore;a;cnkSpace;Space;lde;EFTqual;ullEqual;ilde;pf;ipleDot;ctr;rok;\0\0\0\0\0\0\0cruter;ocir;r\0y;ve;iyrc;blac;r;raveacr;dierBParr;acek;et;arenthesis;on;Plus;gpon;f;ADETadpsrrow;BDar;ownArrow;ownArrow;quilibrium;ee;Arrow;ownerLReftArrow;ightArrow;i;lon;ing;cr;ilde;mlDbcdefosvash;ar;y;ash;l;er;btyar;;icalBLSTar;ine;eparator;ilde;ThinSpace;r;pf;cr;dash;cefosirc;dge;r;pf;cr;fiosr;;pf;cr;AIUacfosucy;cy;cy;cuteiyrc;;r;pf;cr;ml;Hacdefoscy;cute;ayron;;ot;\0oWidta;r;pf;cr;\0\0\0\0\0\0\0cutereve;;Ediuy;;rcte;lig;r;raveepfpsym;ha;apcclr;g;\0\0;adsvnd;;lope;;;elmrsz;esd;a;;;;;;;;t;vb;d;pth;arr;gpon;f;;Eaeiop;cir;;d;s;rox;eingctyr;;mp;eildemlcioninnt;Nabcdefiklnoprsuot;crkcepsong;psilon;rime;im;eq;ee;ed;gerk;tbrk;oy;quo;cmprtaus;eptyv;snoahw;;een;r;gcostuvwaiurc;pdptot;lus;imes;\0\0cup;ar;riangleduown;p;plus;earow;akocnklstozenge;riangle;dlrown;eft;ight;k;\0\0;;4;ck;eo;q=uiv;t;ptwxf;;tomtie;DHUVbdhmptuvLRlr;;;;;DUdu;;;;LRlr;;;;;HLRhlr;;;;;;ox;LRlr;;;;;DUdu;;;;inus;lus;imes;LRlr;;;;;HLRhlr;;;;;;evbarceior;mi;m;el;bh;sub;l;etp;Ee;;q\0\0\0\0\0\0\0\0\0\0cprute;;abcdsnd;rcup;aup;p;ot;;eot;aeiu\0s;on;dilrc;ps;sm;ot;dmnilptyv;t;err;ceiy;ck;mark;r;Ecefms;;elq;e\0\0rrowlreft;ight;RSacd;st;irc;ash;nint;id;cir;ubs;uit\0on;e;q\0\0a;t;;flemxente\0;dot;nfry;o;sr;aorr;ss;cur;bp;e;;e;dot;delprvwarrlr;;\0\0r;c;arr;p;;bcdosrcap;aup;p;ot;r;;alrvrr;m;yevwq\0\0reuee;edge;enearrowlreftightecioninnt;lcty;AHabcdefhijlorstuwzrar;glrsger;eth;h;varow;aayron;;;aogrr;tseq;glmta;ptyv;irsht;;arlraegsvm;osnd;suit;amma;in;;iode;ontimes;ncy;c\0\0rn;op;lptuwlar;f;;empsq;dot;inus;lus;quare;blebarwedgnadhownarrowarpoonlrefighkaro\0\0rn;op;cotry;;l;rok;drot;i;fahraangle;ciy;grarr;DacdefglmnopqrstuxDoocsuteter;aioyron;r;clon;;ot;Drot;;;rsave;dot;;ilsnters;;;dot;apscr;ty;svetp1;;;gs;p;gpon;f;alsr;sl;us;i;lvon;csuviorc\0\0antgltressaeils;st;v;DD;parsl;Daot;rr;cdir;oah;mrlo;cipl;seoctationential\0\0\0\0\0\0\0llingdotsey;male;ilrlig;\0\0g;ig;;lig;lig;fjaltt;ig;ns;of;\0f;ak;v;artint;aocs\0\0;;;;\0;;\0\0;;5;\0;;8;l;wn;cr;Eabcdefgijlnorstv;l;cmpute;ma;d;reve;iyrc;;ot;;lqs;qslan;cdlc;ot;o;l;;es;r;;gmel;cy;;Eaj;;;Eaes;p;prox;q;qim;pf;cir;m;el;;>;cdlqrci;r;ot;Par;uest;adels\0pror;qlqlesienrtneqq;Aabcefkosyrilmrrsfildrcy;;cwir;;ar;irc;alrrts;uitlip;con;r;sewarow;arow;amoprrr;tht;klreftarrow;ightarrow;f;bar;cltr;asrok;bpull;hen\0\0\0\0\0\0cute;iyrc;cxy;clfr;rave;inoinnt;t;fin;ta;lig;aopcgtr;elpinarh;f;ed;;cfotare;in;tie;do;celpal;grerarhk;rod;cgpty;on;f;a;uestcir;n;Edsv;ot;;v;;ilde;\0cy;lcfmosuiyrc;;r;ath;pf;\0r;rcy;kcy;acfghjosppa;v;eydil;;r;reen;cy;cy;pf;cr;ABEHabcdefghjlmnoprstuvartrail;arr;;g;ar;\0\0\0\0\0\0\0\0\0ute;mptyv;rabda;g;dl;;uor;bfhlpst;fs;s;p;l;im;l;;aeil;;s;abrrr;rk;akcek;;es;ldu;;aeuyron;diil;;cqrsa;uo;rduhar;shar;h;;fgqstahlrtrrow;taarpoonduownpeftarrows;ightahsrrow;sarpoonquigarrohreetimes;;qslan;cdgsc;ot;o;r;;es;adegspproot;qgqgtiilrsht;;;E;rdu;l;lk;cy;;achtrorneard;ri;iodot;ust;acheEaes;p;prox;q;qim;abnoptwznrg;r;rglmreftarightapsto;ightparrowlrefight;aflr;;us;imes;st;;efngear;lt;achmtrornear;d;;ri;achiqtquo;r;m;eg;;buo;r;rok;<;cdhilqrci;r;remes;arr;uest;Piar;;efrdushar;har;enrtneqq;DacdefhilnopsuDot;clprret;;ese;sto;dluowefker;oymma;;ash;asuredangler;o;cdnro;acdsir;otus;bd;u;p;dpels;f;ctr;pos;lmtimap;GLRVabcdefghijlmoprstuvwgt;;veltftarrrow;ightarrow;;;vightarrow;Ddash;ash;bcnptlaute;g;;Eiop;d;s;rour;al;s\0pmp;eaeouy\0;on;dil;ng;dot;p;;ash;;Aadqsxrr;rhrk;;oot;uieiar;ist;sr;Eest;qs;qslani;rAaprrr;ar;;sv;d;cy;AEadestr;rr;r;;fqstarrroightarro;qslan;si;ri;eiptf;;inn;Edv;ot;;;i;v;;aorr;astllel;;lint;;ceu;c;eAaitrrr;cw;;ghtarrowri;echimpqu;ceru;ort\0\0arm;e;qsubpbcp;Ees;et;eq;qc;e;Ees;et;eq;qgilrldeianglelreft;eight;e;m;esro;p;DHadgilrsash;arr;p;ash;et;;>nfin;Aetrr;;;r<ie;Atrr;rie;im;Aanrr;rhrk;;oear;\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0csuteiyr;c;abioslac;v;old;lig;crir;;\0\0\0n;ave;bmar;acitrirr;oss;n;aeicr;ga;cdnron;;pf;aelr;rp;;adiosvr;efmr;ofgof;r;lope;;cloashl;idees;as;mlbar;\0\0\0\0\0\0\0\0\0r;ast;lle\0\0m;;y;rcimptnt;od;il;enk;r;imo;v;mane;;tvchfork;aunckk;h;s;abcdemstcir;ir;ou;;nim;wo;ipuntint;f;nd;Eaceinosu;p;u;c;acenspprourlyeaespprox;qq;im;ime;sEasdfpalslar;ine;urf;;trel;cir;;ncsp;fiopsur;pf;rime;cr;aeoteirnionnt;st;eABHabcdefhilmnoprstuxartrail;arar;cdenqrteu;te;imptyv;g;del;;uor;abcfhlpstwp;;fs;;s;l;im;l;;aiil;o;nalabrrrk;akcek;;es;ldu;;aeuyron;diil;;clqsa;dhar;uo;rh;acgl;ipsnart;ilrsht;;aordu;l;;v;gnshtahlrstrrow;taarpoonduowpeftahrrowarpoonightarrows;quigarrohreetimes;g;ingdotseahmra;oust;achemid;abptnrg;r;raflr;;us;imes;apr;gt;olint;arachqquo;r;buo;rhirremes;i;efltri;luhar;;\0\0\0\0\0\0\0cute;qu;Eaceinpsy;\0;on;u;dil;rc;Eas;p;im;olint;i;ot;be;Aacmstxrr;rhr;oti;war;minnut;r;oacoyrp;hycy;;rt\0\0iaragmma;fv;;deglnprot;;q;E;;E;e;lus;arr;araeitlslsetmhp;parsl;dle;;e;s;flptcy;;b;ar;f;adres;uitcsuaup;s;p;s;ubp;eset;e;eset;e;afrarcemtr;tmiararr;fanighteppsilohsbcmnp;Edemnprs;ot;;dot;ult;Ee;;lus;arr;eiut;enq;qeq;qm;bp;;c;acenspprourlyeaespproqg;123;Edehlmnps;ost;ub;;dot;soul;b;arr;ult;Ee;;lus;eiut;enq;qeq;qm;bp;;Aanrr;rhr;owar;lig\0\0\0\0\0\0\0\0\0\0\0\0get;;raeyron;dil;;lrec;r;eiko\0e4fa;svym;cnkaspproimsasrnes;bd;ar;;eps;bcfot;ir;;ork;rime;aipdadempstngle;dlqrowneft;e;ight;eot;inus;lus;b;ime;ezium;chtry;;cy;rok;ioxheadlreftarroightarrowAHabcdfghlmoprstuwrar;cruter\0y;ve;iyrc;abhrlac;airsht;;raverlrlk;ct\0\0rn;erop;ri;alcr;gpon;f;adhlsuownarpoonlrefighi;hlonparrows;cit\0\0rn;erop;ng;ri;cr;dirot;lde;i;famrlangle;ABDacdeflnoprszrar;v;asnrgrt;eknprstappothinhirop;hiugmbpsetneq;q;setneq;q;hretianglelreftighty;ashelr;bear;q;lip;btar;trsubppf;rotrcur;bpnEenEeigzag;cefoprsirc;dibgar;e;q;erp;r;pf;;eatcr;\0\0\0\0\0\0\0trr;Aarr;Aarrais;dptfl;imAarrcqr;ptracefiosucuyte;iyrc;;nr;cy;pf;cr;cmy;lacdefhioswcute;ayron;;ot;ettra;r;cy;grarr;pf;cr;jn;j;'.split("").map(e=>e.charCodeAt(0))),_Ve=new Uint16Array("aglq	\x1B\0\0p;os;t;t;uot;".split("").map(e=>e.charCodeAt(0)));var SL;const wVe=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]),EVe=(SL=String.fromCodePoint)!==null&&SL!==void 0?SL:function(e){let t="";return e>65535&&(e-=65536,t+=String.fromCharCode(e>>>10&1023|55296),e=56320|e&1023),t+=String.fromCharCode(e),t};function xVe(e){var t;return e>=55296&&e<=57343||e>1114111?65533:(t=wVe.get(e))!==null&&t!==void 0?t:e}var io;(function(e){e[e.NUM=35]="NUM",e[e.SEMI=59]="SEMI",e[e.EQUALS=61]="EQUALS",e[e.ZERO=48]="ZERO",e[e.NINE=57]="NINE",e[e.LOWER_A=97]="LOWER_A",e[e.LOWER_F=102]="LOWER_F",e[e.LOWER_X=120]="LOWER_X",e[e.LOWER_Z=122]="LOWER_Z",e[e.UPPER_A=65]="UPPER_A",e[e.UPPER_F=70]="UPPER_F",e[e.UPPER_Z=90]="UPPER_Z"})(io||(io={}));const TVe=32;var Kc;(function(e){e[e.VALUE_LENGTH=49152]="VALUE_LENGTH",e[e.BRANCH_LENGTH=16256]="BRANCH_LENGTH",e[e.JUMP_TABLE=127]="JUMP_TABLE"})(Kc||(Kc={}));function E5(e){return e>=io.ZERO&&e<=io.NINE}function SVe(e){return e>=io.UPPER_A&&e<=io.UPPER_F||e>=io.LOWER_A&&e<=io.LOWER_F}function CVe(e){return e>=io.UPPER_A&&e<=io.UPPER_Z||e>=io.LOWER_A&&e<=io.LOWER_Z||E5(e)}function AVe(e){return e===io.EQUALS||CVe(e)}var Zi;(function(e){e[e.EntityStart=0]="EntityStart",e[e.NumericStart=1]="NumericStart",e[e.NumericDecimal=2]="NumericDecimal",e[e.NumericHex=3]="NumericHex",e[e.NamedEntity=4]="NamedEntity"})(Zi||(Zi={}));var Bg;(function(e){e[e.Legacy=0]="Legacy",e[e.Strict=1]="Strict",e[e.Attribute=2]="Attribute"})(Bg||(Bg={}));class kVe{constructor(t,n,r){this.decodeTree=t,this.emitCodePoint=n,this.errors=r,this.state=Zi.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=Bg.Strict}startEntity(t){this.decodeMode=t,this.state=Zi.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1}write(t,n){switch(this.state){case Zi.EntityStart:return t.charCodeAt(n)===io.NUM?(this.state=Zi.NumericStart,this.consumed+=1,this.stateNumericStart(t,n+1)):(this.state=Zi.NamedEntity,this.stateNamedEntity(t,n));case Zi.NumericStart:return this.stateNumericStart(t,n);case Zi.NumericDecimal:return this.stateNumericDecimal(t,n);case Zi.NumericHex:return this.stateNumericHex(t,n);case Zi.NamedEntity:return this.stateNamedEntity(t,n)}}stateNumericStart(t,n){return n>=t.length?-1:(t.charCodeAt(n)|TVe)===io.LOWER_X?(this.state=Zi.NumericHex,this.consumed+=1,this.stateNumericHex(t,n+1)):(this.state=Zi.NumericDecimal,this.stateNumericDecimal(t,n))}addToNumericResult(t,n,r,i){if(n!==r){const o=r-n;this.result=this.result*Math.pow(i,o)+parseInt(t.substr(n,o),i),this.consumed+=o}}stateNumericHex(t,n){const r=n;for(;n<t.length;){const i=t.charCodeAt(n);if(E5(i)||SVe(i))n+=1;else return this.addToNumericResult(t,r,n,16),this.emitNumericEntity(i,3)}return this.addToNumericResult(t,r,n,16),-1}stateNumericDecimal(t,n){const r=n;for(;n<t.length;){const i=t.charCodeAt(n);if(E5(i))n+=1;else return this.addToNumericResult(t,r,n,10),this.emitNumericEntity(i,2)}return this.addToNumericResult(t,r,n,10),-1}emitNumericEntity(t,n){var r;if(this.consumed<=n)return(r=this.errors)===null||r===void 0||r.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(t===io.SEMI)this.consumed+=1;else if(this.decodeMode===Bg.Strict)return 0;return this.emitCodePoint(xVe(this.result),this.consumed),this.errors&&(t!==io.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed}stateNamedEntity(t,n){const{decodeTree:r}=this;let i=r[this.treeIndex],o=(i&Kc.VALUE_LENGTH)>>14;for(;n<t.length;n++,this.excess++){const s=t.charCodeAt(n);if(this.treeIndex=Nme(r,i,this.treeIndex+Math.max(1,o),s),this.treeIndex<0)return this.result===0||this.decodeMode===Bg.Attribute&&(o===0||AVe(s))?0:this.emitNotTerminatedNamedEntity();if(i=r[this.treeIndex],o=(i&Kc.VALUE_LENGTH)>>14,o!==0){if(s===io.SEMI)return this.emitNamedEntityData(this.treeIndex,o,this.consumed+this.excess);this.decodeMode!==Bg.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1}emitNotTerminatedNamedEntity(){var t;const{result:n,decodeTree:r}=this,i=(r[n]&Kc.VALUE_LENGTH)>>14;return this.emitNamedEntityData(n,i,this.consumed),(t=this.errors)===null||t===void 0||t.missingSemicolonAfterCharacterReference(),this.consumed}emitNamedEntityData(t,n,r){const{decodeTree:i}=this;return this.emitCodePoint(n===1?i[t]&~Kc.VALUE_LENGTH:i[t+1],r),n===3&&this.emitCodePoint(i[t+2],r),r}end(){var t;switch(this.state){case Zi.NamedEntity:return this.result!==0&&(this.decodeMode!==Bg.Attribute||this.result===this.treeIndex)?this.emitNotTerminatedNamedEntity():0;case Zi.NumericDecimal:return this.emitNumericEntity(0,2);case Zi.NumericHex:return this.emitNumericEntity(0,3);case Zi.NumericStart:return(t=this.errors)===null||t===void 0||t.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case Zi.EntityStart:return 0}}}function Rme(e){let t="";const n=new kVe(e,r=>t+=EVe(r));return function(i,o){let s=0,a=0;for(;(a=i.indexOf("&",a))>=0;){t+=i.slice(s,a),n.startEntity(o);const l=n.write(i,a+1);if(l<0){s=a+n.end();break}s=a+l,a=l===0?s+1:s}const u=t+i.slice(s);return t="",u}}function Nme(e,t,n,r){const i=(t&Kc.BRANCH_LENGTH)>>7,o=t&Kc.JUMP_TABLE;if(i===0)return o!==0&&r===o?n:-1;if(o){const u=r-o;return u<0||u>=i?-1:e[n+u]-1}let s=n,a=s+i-1;for(;s<=a;){const u=s+a>>>1,l=e[u];if(l<r)s=u+1;else if(l>r)a=u-1;else return e[u+i]}return-1}Rme(Vh);Rme(_Ve);var Me;(function(e){e.HTML="http://www.w3.org/1999/xhtml",e.MATHML="http://www.w3.org/1998/Math/MathML",e.SVG="http://www.w3.org/2000/svg",e.XLINK="http://www.w3.org/1999/xlink",e.XML="http://www.w3.org/XML/1998/namespace",e.XMLNS="http://www.w3.org/2000/xmlns/"})(Me=Me||(Me={}));var Lp;(function(e){e.TYPE="type",e.ACTION="action",e.ENCODING="encoding",e.PROMPT="prompt",e.NAME="name",e.COLOR="color",e.FACE="face",e.SIZE="size"})(Lp=Lp||(Lp={}));var Ja;(function(e){e.NO_QUIRKS="no-quirks",e.QUIRKS="quirks",e.LIMITED_QUIRKS="limited-quirks"})(Ja=Ja||(Ja={}));var ve;(function(e){e.A="a",e.ADDRESS="address",e.ANNOTATION_XML="annotation-xml",e.APPLET="applet",e.AREA="area",e.ARTICLE="article",e.ASIDE="aside",e.B="b",e.BASE="base",e.BASEFONT="basefont",e.BGSOUND="bgsound",e.BIG="big",e.BLOCKQUOTE="blockquote",e.BODY="body",e.BR="br",e.BUTTON="button",e.CAPTION="caption",e.CENTER="center",e.CODE="code",e.COL="col",e.COLGROUP="colgroup",e.DD="dd",e.DESC="desc",e.DETAILS="details",e.DIALOG="dialog",e.DIR="dir",e.DIV="div",e.DL="dl",e.DT="dt",e.EM="em",e.EMBED="embed",e.FIELDSET="fieldset",e.FIGCAPTION="figcaption",e.FIGURE="figure",e.FONT="font",e.FOOTER="footer",e.FOREIGN_OBJECT="foreignObject",e.FORM="form",e.FRAME="frame",e.FRAMESET="frameset",e.H1="h1",e.H2="h2",e.H3="h3",e.H4="h4",e.H5="h5",e.H6="h6",e.HEAD="head",e.HEADER="header",e.HGROUP="hgroup",e.HR="hr",e.HTML="html",e.I="i",e.IMG="img",e.IMAGE="image",e.INPUT="input",e.IFRAME="iframe",e.KEYGEN="keygen",e.LABEL="label",e.LI="li",e.LINK="link",e.LISTING="listing",e.MAIN="main",e.MALIGNMARK="malignmark",e.MARQUEE="marquee",e.MATH="math",e.MENU="menu",e.META="meta",e.MGLYPH="mglyph",e.MI="mi",e.MO="mo",e.MN="mn",e.MS="ms",e.MTEXT="mtext",e.NAV="nav",e.NOBR="nobr",e.NOFRAMES="noframes",e.NOEMBED="noembed",e.NOSCRIPT="noscript",e.OBJECT="object",e.OL="ol",e.OPTGROUP="optgroup",e.OPTION="option",e.P="p",e.PARAM="param",e.PLAINTEXT="plaintext",e.PRE="pre",e.RB="rb",e.RP="rp",e.RT="rt",e.RTC="rtc",e.RUBY="ruby",e.S="s",e.SCRIPT="script",e.SECTION="section",e.SELECT="select",e.SOURCE="source",e.SMALL="small",e.SPAN="span",e.STRIKE="strike",e.STRONG="strong",e.STYLE="style",e.SUB="sub",e.SUMMARY="summary",e.SUP="sup",e.TABLE="table",e.TBODY="tbody",e.TEMPLATE="template",e.TEXTAREA="textarea",e.TFOOT="tfoot",e.TD="td",e.TH="th",e.THEAD="thead",e.TITLE="title",e.TR="tr",e.TRACK="track",e.TT="tt",e.U="u",e.UL="ul",e.SVG="svg",e.VAR="var",e.WBR="wbr",e.XMP="xmp"})(ve=ve||(ve={}));var I;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.A=1]="A",e[e.ADDRESS=2]="ADDRESS",e[e.ANNOTATION_XML=3]="ANNOTATION_XML",e[e.APPLET=4]="APPLET",e[e.AREA=5]="AREA",e[e.ARTICLE=6]="ARTICLE",e[e.ASIDE=7]="ASIDE",e[e.B=8]="B",e[e.BASE=9]="BASE",e[e.BASEFONT=10]="BASEFONT",e[e.BGSOUND=11]="BGSOUND",e[e.BIG=12]="BIG",e[e.BLOCKQUOTE=13]="BLOCKQUOTE",e[e.BODY=14]="BODY",e[e.BR=15]="BR",e[e.BUTTON=16]="BUTTON",e[e.CAPTION=17]="CAPTION",e[e.CENTER=18]="CENTER",e[e.CODE=19]="CODE",e[e.COL=20]="COL",e[e.COLGROUP=21]="COLGROUP",e[e.DD=22]="DD",e[e.DESC=23]="DESC",e[e.DETAILS=24]="DETAILS",e[e.DIALOG=25]="DIALOG",e[e.DIR=26]="DIR",e[e.DIV=27]="DIV",e[e.DL=28]="DL",e[e.DT=29]="DT",e[e.EM=30]="EM",e[e.EMBED=31]="EMBED",e[e.FIELDSET=32]="FIELDSET",e[e.FIGCAPTION=33]="FIGCAPTION",e[e.FIGURE=34]="FIGURE",e[e.FONT=35]="FONT",e[e.FOOTER=36]="FOOTER",e[e.FOREIGN_OBJECT=37]="FOREIGN_OBJECT",e[e.FORM=38]="FORM",e[e.FRAME=39]="FRAME",e[e.FRAMESET=40]="FRAMESET",e[e.H1=41]="H1",e[e.H2=42]="H2",e[e.H3=43]="H3",e[e.H4=44]="H4",e[e.H5=45]="H5",e[e.H6=46]="H6",e[e.HEAD=47]="HEAD",e[e.HEADER=48]="HEADER",e[e.HGROUP=49]="HGROUP",e[e.HR=50]="HR",e[e.HTML=51]="HTML",e[e.I=52]="I",e[e.IMG=53]="IMG",e[e.IMAGE=54]="IMAGE",e[e.INPUT=55]="INPUT",e[e.IFRAME=56]="IFRAME",e[e.KEYGEN=57]="KEYGEN",e[e.LABEL=58]="LABEL",e[e.LI=59]="LI",e[e.LINK=60]="LINK",e[e.LISTING=61]="LISTING",e[e.MAIN=62]="MAIN",e[e.MALIGNMARK=63]="MALIGNMARK",e[e.MARQUEE=64]="MARQUEE",e[e.MATH=65]="MATH",e[e.MENU=66]="MENU",e[e.META=67]="META",e[e.MGLYPH=68]="MGLYPH",e[e.MI=69]="MI",e[e.MO=70]="MO",e[e.MN=71]="MN",e[e.MS=72]="MS",e[e.MTEXT=73]="MTEXT",e[e.NAV=74]="NAV",e[e.NOBR=75]="NOBR",e[e.NOFRAMES=76]="NOFRAMES",e[e.NOEMBED=77]="NOEMBED",e[e.NOSCRIPT=78]="NOSCRIPT",e[e.OBJECT=79]="OBJECT",e[e.OL=80]="OL",e[e.OPTGROUP=81]="OPTGROUP",e[e.OPTION=82]="OPTION",e[e.P=83]="P",e[e.PARAM=84]="PARAM",e[e.PLAINTEXT=85]="PLAINTEXT",e[e.PRE=86]="PRE",e[e.RB=87]="RB",e[e.RP=88]="RP",e[e.RT=89]="RT",e[e.RTC=90]="RTC",e[e.RUBY=91]="RUBY",e[e.S=92]="S",e[e.SCRIPT=93]="SCRIPT",e[e.SECTION=94]="SECTION",e[e.SELECT=95]="SELECT",e[e.SOURCE=96]="SOURCE",e[e.SMALL=97]="SMALL",e[e.SPAN=98]="SPAN",e[e.STRIKE=99]="STRIKE",e[e.STRONG=100]="STRONG",e[e.STYLE=101]="STYLE",e[e.SUB=102]="SUB",e[e.SUMMARY=103]="SUMMARY",e[e.SUP=104]="SUP",e[e.TABLE=105]="TABLE",e[e.TBODY=106]="TBODY",e[e.TEMPLATE=107]="TEMPLATE",e[e.TEXTAREA=108]="TEXTAREA",e[e.TFOOT=109]="TFOOT",e[e.TD=110]="TD",e[e.TH=111]="TH",e[e.THEAD=112]="THEAD",e[e.TITLE=113]="TITLE",e[e.TR=114]="TR",e[e.TRACK=115]="TRACK",e[e.TT=116]="TT",e[e.U=117]="U",e[e.UL=118]="UL",e[e.SVG=119]="SVG",e[e.VAR=120]="VAR",e[e.WBR=121]="WBR",e[e.XMP=122]="XMP"})(I=I||(I={}));const IVe=new Map([[ve.A,I.A],[ve.ADDRESS,I.ADDRESS],[ve.ANNOTATION_XML,I.ANNOTATION_XML],[ve.APPLET,I.APPLET],[ve.AREA,I.AREA],[ve.ARTICLE,I.ARTICLE],[ve.ASIDE,I.ASIDE],[ve.B,I.B],[ve.BASE,I.BASE],[ve.BASEFONT,I.BASEFONT],[ve.BGSOUND,I.BGSOUND],[ve.BIG,I.BIG],[ve.BLOCKQUOTE,I.BLOCKQUOTE],[ve.BODY,I.BODY],[ve.BR,I.BR],[ve.BUTTON,I.BUTTON],[ve.CAPTION,I.CAPTION],[ve.CENTER,I.CENTER],[ve.CODE,I.CODE],[ve.COL,I.COL],[ve.COLGROUP,I.COLGROUP],[ve.DD,I.DD],[ve.DESC,I.DESC],[ve.DETAILS,I.DETAILS],[ve.DIALOG,I.DIALOG],[ve.DIR,I.DIR],[ve.DIV,I.DIV],[ve.DL,I.DL],[ve.DT,I.DT],[ve.EM,I.EM],[ve.EMBED,I.EMBED],[ve.FIELDSET,I.FIELDSET],[ve.FIGCAPTION,I.FIGCAPTION],[ve.FIGURE,I.FIGURE],[ve.FONT,I.FONT],[ve.FOOTER,I.FOOTER],[ve.FOREIGN_OBJECT,I.FOREIGN_OBJECT],[ve.FORM,I.FORM],[ve.FRAME,I.FRAME],[ve.FRAMESET,I.FRAMESET],[ve.H1,I.H1],[ve.H2,I.H2],[ve.H3,I.H3],[ve.H4,I.H4],[ve.H5,I.H5],[ve.H6,I.H6],[ve.HEAD,I.HEAD],[ve.HEADER,I.HEADER],[ve.HGROUP,I.HGROUP],[ve.HR,I.HR],[ve.HTML,I.HTML],[ve.I,I.I],[ve.IMG,I.IMG],[ve.IMAGE,I.IMAGE],[ve.INPUT,I.INPUT],[ve.IFRAME,I.IFRAME],[ve.KEYGEN,I.KEYGEN],[ve.LABEL,I.LABEL],[ve.LI,I.LI],[ve.LINK,I.LINK],[ve.LISTING,I.LISTING],[ve.MAIN,I.MAIN],[ve.MALIGNMARK,I.MALIGNMARK],[ve.MARQUEE,I.MARQUEE],[ve.MATH,I.MATH],[ve.MENU,I.MENU],[ve.META,I.META],[ve.MGLYPH,I.MGLYPH],[ve.MI,I.MI],[ve.MO,I.MO],[ve.MN,I.MN],[ve.MS,I.MS],[ve.MTEXT,I.MTEXT],[ve.NAV,I.NAV],[ve.NOBR,I.NOBR],[ve.NOFRAMES,I.NOFRAMES],[ve.NOEMBED,I.NOEMBED],[ve.NOSCRIPT,I.NOSCRIPT],[ve.OBJECT,I.OBJECT],[ve.OL,I.OL],[ve.OPTGROUP,I.OPTGROUP],[ve.OPTION,I.OPTION],[ve.P,I.P],[ve.PARAM,I.PARAM],[ve.PLAINTEXT,I.PLAINTEXT],[ve.PRE,I.PRE],[ve.RB,I.RB],[ve.RP,I.RP],[ve.RT,I.RT],[ve.RTC,I.RTC],[ve.RUBY,I.RUBY],[ve.S,I.S],[ve.SCRIPT,I.SCRIPT],[ve.SECTION,I.SECTION],[ve.SELECT,I.SELECT],[ve.SOURCE,I.SOURCE],[ve.SMALL,I.SMALL],[ve.SPAN,I.SPAN],[ve.STRIKE,I.STRIKE],[ve.STRONG,I.STRONG],[ve.STYLE,I.STYLE],[ve.SUB,I.SUB],[ve.SUMMARY,I.SUMMARY],[ve.SUP,I.SUP],[ve.TABLE,I.TABLE],[ve.TBODY,I.TBODY],[ve.TEMPLATE,I.TEMPLATE],[ve.TEXTAREA,I.TEXTAREA],[ve.TFOOT,I.TFOOT],[ve.TD,I.TD],[ve.TH,I.TH],[ve.THEAD,I.THEAD],[ve.TITLE,I.TITLE],[ve.TR,I.TR],[ve.TRACK,I.TRACK],[ve.TT,I.TT],[ve.U,I.U],[ve.UL,I.UL],[ve.SVG,I.SVG],[ve.VAR,I.VAR],[ve.WBR,I.WBR],[ve.XMP,I.XMP]]);function C_(e){var t;return(t=IVe.get(e))!==null&&t!==void 0?t:I.UNKNOWN}const Ke=I,RVe={[Me.HTML]:new Set([Ke.ADDRESS,Ke.APPLET,Ke.AREA,Ke.ARTICLE,Ke.ASIDE,Ke.BASE,Ke.BASEFONT,Ke.BGSOUND,Ke.BLOCKQUOTE,Ke.BODY,Ke.BR,Ke.BUTTON,Ke.CAPTION,Ke.CENTER,Ke.COL,Ke.COLGROUP,Ke.DD,Ke.DETAILS,Ke.DIR,Ke.DIV,Ke.DL,Ke.DT,Ke.EMBED,Ke.FIELDSET,Ke.FIGCAPTION,Ke.FIGURE,Ke.FOOTER,Ke.FORM,Ke.FRAME,Ke.FRAMESET,Ke.H1,Ke.H2,Ke.H3,Ke.H4,Ke.H5,Ke.H6,Ke.HEAD,Ke.HEADER,Ke.HGROUP,Ke.HR,Ke.HTML,Ke.IFRAME,Ke.IMG,Ke.INPUT,Ke.LI,Ke.LINK,Ke.LISTING,Ke.MAIN,Ke.MARQUEE,Ke.MENU,Ke.META,Ke.NAV,Ke.NOEMBED,Ke.NOFRAMES,Ke.NOSCRIPT,Ke.OBJECT,Ke.OL,Ke.P,Ke.PARAM,Ke.PLAINTEXT,Ke.PRE,Ke.SCRIPT,Ke.SECTION,Ke.SELECT,Ke.SOURCE,Ke.STYLE,Ke.SUMMARY,Ke.TABLE,Ke.TBODY,Ke.TD,Ke.TEMPLATE,Ke.TEXTAREA,Ke.TFOOT,Ke.TH,Ke.THEAD,Ke.TITLE,Ke.TR,Ke.TRACK,Ke.UL,Ke.WBR,Ke.XMP]),[Me.MATHML]:new Set([Ke.MI,Ke.MO,Ke.MN,Ke.MS,Ke.MTEXT,Ke.ANNOTATION_XML]),[Me.SVG]:new Set([Ke.TITLE,Ke.FOREIGN_OBJECT,Ke.DESC]),[Me.XLINK]:new Set,[Me.XML]:new Set,[Me.XMLNS]:new Set};function Pme(e){return e===Ke.H1||e===Ke.H2||e===Ke.H3||e===Ke.H4||e===Ke.H5||e===Ke.H6}ve.STYLE,ve.SCRIPT,ve.XMP,ve.IFRAME,ve.NOEMBED,ve.NOFRAMES,ve.PLAINTEXT;const NVe=new Map([[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]);var Q;(function(e){e[e.DATA=0]="DATA",e[e.RCDATA=1]="RCDATA",e[e.RAWTEXT=2]="RAWTEXT",e[e.SCRIPT_DATA=3]="SCRIPT_DATA",e[e.PLAINTEXT=4]="PLAINTEXT",e[e.TAG_OPEN=5]="TAG_OPEN",e[e.END_TAG_OPEN=6]="END_TAG_OPEN",e[e.TAG_NAME=7]="TAG_NAME",e[e.RCDATA_LESS_THAN_SIGN=8]="RCDATA_LESS_THAN_SIGN",e[e.RCDATA_END_TAG_OPEN=9]="RCDATA_END_TAG_OPEN",e[e.RCDATA_END_TAG_NAME=10]="RCDATA_END_TAG_NAME",e[e.RAWTEXT_LESS_THAN_SIGN=11]="RAWTEXT_LESS_THAN_SIGN",e[e.RAWTEXT_END_TAG_OPEN=12]="RAWTEXT_END_TAG_OPEN",e[e.RAWTEXT_END_TAG_NAME=13]="RAWTEXT_END_TAG_NAME",e[e.SCRIPT_DATA_LESS_THAN_SIGN=14]="SCRIPT_DATA_LESS_THAN_SIGN",e[e.SCRIPT_DATA_END_TAG_OPEN=15]="SCRIPT_DATA_END_TAG_OPEN",e[e.SCRIPT_DATA_END_TAG_NAME=16]="SCRIPT_DATA_END_TAG_NAME",e[e.SCRIPT_DATA_ESCAPE_START=17]="SCRIPT_DATA_ESCAPE_START",e[e.SCRIPT_DATA_ESCAPE_START_DASH=18]="SCRIPT_DATA_ESCAPE_START_DASH",e[e.SCRIPT_DATA_ESCAPED=19]="SCRIPT_DATA_ESCAPED",e[e.SCRIPT_DATA_ESCAPED_DASH=20]="SCRIPT_DATA_ESCAPED_DASH",e[e.SCRIPT_DATA_ESCAPED_DASH_DASH=21]="SCRIPT_DATA_ESCAPED_DASH_DASH",e[e.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN=22]="SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN",e[e.SCRIPT_DATA_ESCAPED_END_TAG_OPEN=23]="SCRIPT_DATA_ESCAPED_END_TAG_OPEN",e[e.SCRIPT_DATA_ESCAPED_END_TAG_NAME=24]="SCRIPT_DATA_ESCAPED_END_TAG_NAME",e[e.SCRIPT_DATA_DOUBLE_ESCAPE_START=25]="SCRIPT_DATA_DOUBLE_ESCAPE_START",e[e.SCRIPT_DATA_DOUBLE_ESCAPED=26]="SCRIPT_DATA_DOUBLE_ESCAPED",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_DASH=27]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH=28]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN=29]="SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN",e[e.SCRIPT_DATA_DOUBLE_ESCAPE_END=30]="SCRIPT_DATA_DOUBLE_ESCAPE_END",e[e.BEFORE_ATTRIBUTE_NAME=31]="BEFORE_ATTRIBUTE_NAME",e[e.ATTRIBUTE_NAME=32]="ATTRIBUTE_NAME",e[e.AFTER_ATTRIBUTE_NAME=33]="AFTER_ATTRIBUTE_NAME",e[e.BEFORE_ATTRIBUTE_VALUE=34]="BEFORE_ATTRIBUTE_VALUE",e[e.ATTRIBUTE_VALUE_DOUBLE_QUOTED=35]="ATTRIBUTE_VALUE_DOUBLE_QUOTED",e[e.ATTRIBUTE_VALUE_SINGLE_QUOTED=36]="ATTRIBUTE_VALUE_SINGLE_QUOTED",e[e.ATTRIBUTE_VALUE_UNQUOTED=37]="ATTRIBUTE_VALUE_UNQUOTED",e[e.AFTER_ATTRIBUTE_VALUE_QUOTED=38]="AFTER_ATTRIBUTE_VALUE_QUOTED",e[e.SELF_CLOSING_START_TAG=39]="SELF_CLOSING_START_TAG",e[e.BOGUS_COMMENT=40]="BOGUS_COMMENT",e[e.MARKUP_DECLARATION_OPEN=41]="MARKUP_DECLARATION_OPEN",e[e.COMMENT_START=42]="COMMENT_START",e[e.COMMENT_START_DASH=43]="COMMENT_START_DASH",e[e.COMMENT=44]="COMMENT",e[e.COMMENT_LESS_THAN_SIGN=45]="COMMENT_LESS_THAN_SIGN",e[e.COMMENT_LESS_THAN_SIGN_BANG=46]="COMMENT_LESS_THAN_SIGN_BANG",e[e.COMMENT_LESS_THAN_SIGN_BANG_DASH=47]="COMMENT_LESS_THAN_SIGN_BANG_DASH",e[e.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH=48]="COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH",e[e.COMMENT_END_DASH=49]="COMMENT_END_DASH",e[e.COMMENT_END=50]="COMMENT_END",e[e.COMMENT_END_BANG=51]="COMMENT_END_BANG",e[e.DOCTYPE=52]="DOCTYPE",e[e.BEFORE_DOCTYPE_NAME=53]="BEFORE_DOCTYPE_NAME",e[e.DOCTYPE_NAME=54]="DOCTYPE_NAME",e[e.AFTER_DOCTYPE_NAME=55]="AFTER_DOCTYPE_NAME",e[e.AFTER_DOCTYPE_PUBLIC_KEYWORD=56]="AFTER_DOCTYPE_PUBLIC_KEYWORD",e[e.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER=57]="BEFORE_DOCTYPE_PUBLIC_IDENTIFIER",e[e.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED=58]="DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED",e[e.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED=59]="DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED",e[e.AFTER_DOCTYPE_PUBLIC_IDENTIFIER=60]="AFTER_DOCTYPE_PUBLIC_IDENTIFIER",e[e.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS=61]="BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS",e[e.AFTER_DOCTYPE_SYSTEM_KEYWORD=62]="AFTER_DOCTYPE_SYSTEM_KEYWORD",e[e.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER=63]="BEFORE_DOCTYPE_SYSTEM_IDENTIFIER",e[e.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED=64]="DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED",e[e.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED=65]="DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED",e[e.AFTER_DOCTYPE_SYSTEM_IDENTIFIER=66]="AFTER_DOCTYPE_SYSTEM_IDENTIFIER",e[e.BOGUS_DOCTYPE=67]="BOGUS_DOCTYPE",e[e.CDATA_SECTION=68]="CDATA_SECTION",e[e.CDATA_SECTION_BRACKET=69]="CDATA_SECTION_BRACKET",e[e.CDATA_SECTION_END=70]="CDATA_SECTION_END",e[e.CHARACTER_REFERENCE=71]="CHARACTER_REFERENCE",e[e.NAMED_CHARACTER_REFERENCE=72]="NAMED_CHARACTER_REFERENCE",e[e.AMBIGUOUS_AMPERSAND=73]="AMBIGUOUS_AMPERSAND",e[e.NUMERIC_CHARACTER_REFERENCE=74]="NUMERIC_CHARACTER_REFERENCE",e[e.HEXADEMICAL_CHARACTER_REFERENCE_START=75]="HEXADEMICAL_CHARACTER_REFERENCE_START",e[e.HEXADEMICAL_CHARACTER_REFERENCE=76]="HEXADEMICAL_CHARACTER_REFERENCE",e[e.DECIMAL_CHARACTER_REFERENCE=77]="DECIMAL_CHARACTER_REFERENCE",e[e.NUMERIC_CHARACTER_REFERENCE_END=78]="NUMERIC_CHARACTER_REFERENCE_END"})(Q||(Q={}));const bi={DATA:Q.DATA,RCDATA:Q.RCDATA,RAWTEXT:Q.RAWTEXT,SCRIPT_DATA:Q.SCRIPT_DATA,PLAINTEXT:Q.PLAINTEXT,CDATA_SECTION:Q.CDATA_SECTION};function gx(e){return e>=K.DIGIT_0&&e<=K.DIGIT_9}function wE(e){return e>=K.LATIN_CAPITAL_A&&e<=K.LATIN_CAPITAL_Z}function PVe(e){return e>=K.LATIN_SMALL_A&&e<=K.LATIN_SMALL_Z}function Hh(e){return PVe(e)||wE(e)}function x5(e){return Hh(e)||gx(e)}function Dme(e){return e>=K.LATIN_CAPITAL_A&&e<=K.LATIN_CAPITAL_F}function Ome(e){return e>=K.LATIN_SMALL_A&&e<=K.LATIN_SMALL_F}function DVe(e){return gx(e)||Dme(e)||Ome(e)}function o2(e){return e+32}function $me(e){return e===K.SPACE||e===K.LINE_FEED||e===K.TABULATION||e===K.FORM_FEED}function OVe(e){return e===K.EQUALS_SIGN||x5(e)}function lee(e){return $me(e)||e===K.SOLIDUS||e===K.GREATER_THAN_SIGN}class $Ve{constructor(t,n){this.options=t,this.handler=n,this.paused=!1,this.inLoop=!1,this.inForeignNode=!1,this.lastStartTagName="",this.active=!1,this.state=Q.DATA,this.returnState=Q.DATA,this.charRefCode=-1,this.consumedAfterSnapshot=-1,this.currentCharacterToken=null,this.currentToken=null,this.currentAttr={name:"",value:""},this.preprocessor=new bVe(n),this.currentLocation=this.getCurrentLocation(-1)}_err(t){var n,r;(r=(n=this.handler).onParseError)===null||r===void 0||r.call(n,this.preprocessor.getError(t))}getCurrentLocation(t){return this.options.sourceCodeLocationInfo?{startLine:this.preprocessor.line,startCol:this.preprocessor.col-t,startOffset:this.preprocessor.offset-t,endLine:-1,endCol:-1,endOffset:-1}:null}_runParsingLoop(){if(!this.inLoop){for(this.inLoop=!0;this.active&&!this.paused;){this.consumedAfterSnapshot=0;const t=this._consume();this._ensureHibernation()||this._callState(t)}this.inLoop=!1}}pause(){this.paused=!0}resume(t){if(!this.paused)throw new Error("Parser was already resumed");this.paused=!1,!this.inLoop&&(this._runParsingLoop(),this.paused||t==null||t())}write(t,n,r){this.active=!0,this.preprocessor.write(t,n),this._runParsingLoop(),this.paused||r==null||r()}insertHtmlAtCurrentPos(t){this.active=!0,this.preprocessor.insertHtmlAtCurrentPos(t),this._runParsingLoop()}_ensureHibernation(){return this.preprocessor.endOfChunkHit?(this._unconsume(this.consumedAfterSnapshot),this.active=!1,!0):!1}_consume(){return this.consumedAfterSnapshot++,this.preprocessor.advance()}_unconsume(t){this.consumedAfterSnapshot-=t,this.preprocessor.retreat(t)}_reconsumeInState(t,n){this.state=t,this._callState(n)}_advanceBy(t){this.consumedAfterSnapshot+=t;for(let n=0;n<t;n++)this.preprocessor.advance()}_consumeSequenceIfMatch(t,n){return this.preprocessor.startsWith(t,n)?(this._advanceBy(t.length-1),!0):!1}_createStartTagToken(){this.currentToken={type:ln.START_TAG,tagName:"",tagID:I.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(1)}}_createEndTagToken(){this.currentToken={type:ln.END_TAG,tagName:"",tagID:I.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(2)}}_createCommentToken(t){this.currentToken={type:ln.COMMENT,data:"",location:this.getCurrentLocation(t)}}_createDoctypeToken(t){this.currentToken={type:ln.DOCTYPE,name:t,forceQuirks:!1,publicId:null,systemId:null,location:this.currentLocation}}_createCharacterToken(t,n){this.currentCharacterToken={type:t,chars:n,location:this.currentLocation}}_createAttr(t){this.currentAttr={name:t,value:""},this.currentLocation=this.getCurrentLocation(0)}_leaveAttrName(){var t,n;const r=this.currentToken;if(Ime(r,this.currentAttr.name)===null){if(r.attrs.push(this.currentAttr),r.location&&this.currentLocation){const i=(t=(n=r.location).attrs)!==null&&t!==void 0?t:n.attrs=Object.create(null);i[this.currentAttr.name]=this.currentLocation,this._leaveAttrValue()}}else this._err(Ae.duplicateAttribute)}_leaveAttrValue(){this.currentLocation&&(this.currentLocation.endLine=this.preprocessor.line,this.currentLocation.endCol=this.preprocessor.col,this.currentLocation.endOffset=this.preprocessor.offset)}prepareToken(t){this._emitCurrentCharacterToken(t.location),this.currentToken=null,t.location&&(t.location.endLine=this.preprocessor.line,t.location.endCol=this.preprocessor.col+1,t.location.endOffset=this.preprocessor.offset+1),this.currentLocation=this.getCurrentLocation(-1)}emitCurrentTagToken(){const t=this.currentToken;this.prepareToken(t),t.tagID=C_(t.tagName),t.type===ln.START_TAG?(this.lastStartTagName=t.tagName,this.handler.onStartTag(t)):(t.attrs.length>0&&this._err(Ae.endTagWithAttributes),t.selfClosing&&this._err(Ae.endTagWithTrailingSolidus),this.handler.onEndTag(t)),this.preprocessor.dropParsedChunk()}emitCurrentComment(t){this.prepareToken(t),this.handler.onComment(t),this.preprocessor.dropParsedChunk()}emitCurrentDoctype(t){this.prepareToken(t),this.handler.onDoctype(t),this.preprocessor.dropParsedChunk()}_emitCurrentCharacterToken(t){if(this.currentCharacterToken){switch(t&&this.currentCharacterToken.location&&(this.currentCharacterToken.location.endLine=t.startLine,this.currentCharacterToken.location.endCol=t.startCol,this.currentCharacterToken.location.endOffset=t.startOffset),this.currentCharacterToken.type){case ln.CHARACTER:{this.handler.onCharacter(this.currentCharacterToken);break}case ln.NULL_CHARACTER:{this.handler.onNullCharacter(this.currentCharacterToken);break}case ln.WHITESPACE_CHARACTER:{this.handler.onWhitespaceCharacter(this.currentCharacterToken);break}}this.currentCharacterToken=null}}_emitEOFToken(){const t=this.getCurrentLocation(0);t&&(t.endLine=t.startLine,t.endCol=t.startCol,t.endOffset=t.startOffset),this._emitCurrentCharacterToken(t),this.handler.onEof({type:ln.EOF,location:t}),this.active=!1}_appendCharToCurrentCharacterToken(t,n){if(this.currentCharacterToken)if(this.currentCharacterToken.type!==t)this.currentLocation=this.getCurrentLocation(0),this._emitCurrentCharacterToken(this.currentLocation),this.preprocessor.dropParsedChunk();else{this.currentCharacterToken.chars+=n;return}this._createCharacterToken(t,n)}_emitCodePoint(t){const n=$me(t)?ln.WHITESPACE_CHARACTER:t===K.NULL?ln.NULL_CHARACTER:ln.CHARACTER;this._appendCharToCurrentCharacterToken(n,String.fromCodePoint(t))}_emitChars(t){this._appendCharToCurrentCharacterToken(ln.CHARACTER,t)}_matchNamedCharacterReference(t){let n=null,r=0,i=!1;for(let o=0,s=Vh[0];o>=0&&(o=Nme(Vh,s,o+1,t),!(o<0));t=this._consume()){r+=1,s=Vh[o];const a=s&Kc.VALUE_LENGTH;if(a){const u=(a>>14)-1;if(t!==K.SEMICOLON&&this._isCharacterReferenceInAttribute()&&OVe(this.preprocessor.peek(1))?(n=[K.AMPERSAND],o+=u):(n=u===0?[Vh[o]&~Kc.VALUE_LENGTH]:u===1?[Vh[++o]]:[Vh[++o],Vh[++o]],r=0,i=t!==K.SEMICOLON),u===0){this._consume();break}}}return this._unconsume(r),i&&!this.preprocessor.endOfChunkHit&&this._err(Ae.missingSemicolonAfterCharacterReference),this._unconsume(1),n}_isCharacterReferenceInAttribute(){return this.returnState===Q.ATTRIBUTE_VALUE_DOUBLE_QUOTED||this.returnState===Q.ATTRIBUTE_VALUE_SINGLE_QUOTED||this.returnState===Q.ATTRIBUTE_VALUE_UNQUOTED}_flushCodePointConsumedAsCharacterReference(t){this._isCharacterReferenceInAttribute()?this.currentAttr.value+=String.fromCodePoint(t):this._emitCodePoint(t)}_callState(t){switch(this.state){case Q.DATA:{this._stateData(t);break}case Q.RCDATA:{this._stateRcdata(t);break}case Q.RAWTEXT:{this._stateRawtext(t);break}case Q.SCRIPT_DATA:{this._stateScriptData(t);break}case Q.PLAINTEXT:{this._statePlaintext(t);break}case Q.TAG_OPEN:{this._stateTagOpen(t);break}case Q.END_TAG_OPEN:{this._stateEndTagOpen(t);break}case Q.TAG_NAME:{this._stateTagName(t);break}case Q.RCDATA_LESS_THAN_SIGN:{this._stateRcdataLessThanSign(t);break}case Q.RCDATA_END_TAG_OPEN:{this._stateRcdataEndTagOpen(t);break}case Q.RCDATA_END_TAG_NAME:{this._stateRcdataEndTagName(t);break}case Q.RAWTEXT_LESS_THAN_SIGN:{this._stateRawtextLessThanSign(t);break}case Q.RAWTEXT_END_TAG_OPEN:{this._stateRawtextEndTagOpen(t);break}case Q.RAWTEXT_END_TAG_NAME:{this._stateRawtextEndTagName(t);break}case Q.SCRIPT_DATA_LESS_THAN_SIGN:{this._stateScriptDataLessThanSign(t);break}case Q.SCRIPT_DATA_END_TAG_OPEN:{this._stateScriptDataEndTagOpen(t);break}case Q.SCRIPT_DATA_END_TAG_NAME:{this._stateScriptDataEndTagName(t);break}case Q.SCRIPT_DATA_ESCAPE_START:{this._stateScriptDataEscapeStart(t);break}case Q.SCRIPT_DATA_ESCAPE_START_DASH:{this._stateScriptDataEscapeStartDash(t);break}case Q.SCRIPT_DATA_ESCAPED:{this._stateScriptDataEscaped(t);break}case Q.SCRIPT_DATA_ESCAPED_DASH:{this._stateScriptDataEscapedDash(t);break}case Q.SCRIPT_DATA_ESCAPED_DASH_DASH:{this._stateScriptDataEscapedDashDash(t);break}case Q.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN:{this._stateScriptDataEscapedLessThanSign(t);break}case Q.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:{this._stateScriptDataEscapedEndTagOpen(t);break}case Q.SCRIPT_DATA_ESCAPED_END_TAG_NAME:{this._stateScriptDataEscapedEndTagName(t);break}case Q.SCRIPT_DATA_DOUBLE_ESCAPE_START:{this._stateScriptDataDoubleEscapeStart(t);break}case Q.SCRIPT_DATA_DOUBLE_ESCAPED:{this._stateScriptDataDoubleEscaped(t);break}case Q.SCRIPT_DATA_DOUBLE_ESCAPED_DASH:{this._stateScriptDataDoubleEscapedDash(t);break}case Q.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH:{this._stateScriptDataDoubleEscapedDashDash(t);break}case Q.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN:{this._stateScriptDataDoubleEscapedLessThanSign(t);break}case Q.SCRIPT_DATA_DOUBLE_ESCAPE_END:{this._stateScriptDataDoubleEscapeEnd(t);break}case Q.BEFORE_ATTRIBUTE_NAME:{this._stateBeforeAttributeName(t);break}case Q.ATTRIBUTE_NAME:{this._stateAttributeName(t);break}case Q.AFTER_ATTRIBUTE_NAME:{this._stateAfterAttributeName(t);break}case Q.BEFORE_ATTRIBUTE_VALUE:{this._stateBeforeAttributeValue(t);break}case Q.ATTRIBUTE_VALUE_DOUBLE_QUOTED:{this._stateAttributeValueDoubleQuoted(t);break}case Q.ATTRIBUTE_VALUE_SINGLE_QUOTED:{this._stateAttributeValueSingleQuoted(t);break}case Q.ATTRIBUTE_VALUE_UNQUOTED:{this._stateAttributeValueUnquoted(t);break}case Q.AFTER_ATTRIBUTE_VALUE_QUOTED:{this._stateAfterAttributeValueQuoted(t);break}case Q.SELF_CLOSING_START_TAG:{this._stateSelfClosingStartTag(t);break}case Q.BOGUS_COMMENT:{this._stateBogusComment(t);break}case Q.MARKUP_DECLARATION_OPEN:{this._stateMarkupDeclarationOpen(t);break}case Q.COMMENT_START:{this._stateCommentStart(t);break}case Q.COMMENT_START_DASH:{this._stateCommentStartDash(t);break}case Q.COMMENT:{this._stateComment(t);break}case Q.COMMENT_LESS_THAN_SIGN:{this._stateCommentLessThanSign(t);break}case Q.COMMENT_LESS_THAN_SIGN_BANG:{this._stateCommentLessThanSignBang(t);break}case Q.COMMENT_LESS_THAN_SIGN_BANG_DASH:{this._stateCommentLessThanSignBangDash(t);break}case Q.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:{this._stateCommentLessThanSignBangDashDash(t);break}case Q.COMMENT_END_DASH:{this._stateCommentEndDash(t);break}case Q.COMMENT_END:{this._stateCommentEnd(t);break}case Q.COMMENT_END_BANG:{this._stateCommentEndBang(t);break}case Q.DOCTYPE:{this._stateDoctype(t);break}case Q.BEFORE_DOCTYPE_NAME:{this._stateBeforeDoctypeName(t);break}case Q.DOCTYPE_NAME:{this._stateDoctypeName(t);break}case Q.AFTER_DOCTYPE_NAME:{this._stateAfterDoctypeName(t);break}case Q.AFTER_DOCTYPE_PUBLIC_KEYWORD:{this._stateAfterDoctypePublicKeyword(t);break}case Q.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER:{this._stateBeforeDoctypePublicIdentifier(t);break}case Q.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED:{this._stateDoctypePublicIdentifierDoubleQuoted(t);break}case Q.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED:{this._stateDoctypePublicIdentifierSingleQuoted(t);break}case Q.AFTER_DOCTYPE_PUBLIC_IDENTIFIER:{this._stateAfterDoctypePublicIdentifier(t);break}case Q.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS:{this._stateBetweenDoctypePublicAndSystemIdentifiers(t);break}case Q.AFTER_DOCTYPE_SYSTEM_KEYWORD:{this._stateAfterDoctypeSystemKeyword(t);break}case Q.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER:{this._stateBeforeDoctypeSystemIdentifier(t);break}case Q.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED:{this._stateDoctypeSystemIdentifierDoubleQuoted(t);break}case Q.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED:{this._stateDoctypeSystemIdentifierSingleQuoted(t);break}case Q.AFTER_DOCTYPE_SYSTEM_IDENTIFIER:{this._stateAfterDoctypeSystemIdentifier(t);break}case Q.BOGUS_DOCTYPE:{this._stateBogusDoctype(t);break}case Q.CDATA_SECTION:{this._stateCdataSection(t);break}case Q.CDATA_SECTION_BRACKET:{this._stateCdataSectionBracket(t);break}case Q.CDATA_SECTION_END:{this._stateCdataSectionEnd(t);break}case Q.CHARACTER_REFERENCE:{this._stateCharacterReference(t);break}case Q.NAMED_CHARACTER_REFERENCE:{this._stateNamedCharacterReference(t);break}case Q.AMBIGUOUS_AMPERSAND:{this._stateAmbiguousAmpersand(t);break}case Q.NUMERIC_CHARACTER_REFERENCE:{this._stateNumericCharacterReference(t);break}case Q.HEXADEMICAL_CHARACTER_REFERENCE_START:{this._stateHexademicalCharacterReferenceStart(t);break}case Q.HEXADEMICAL_CHARACTER_REFERENCE:{this._stateHexademicalCharacterReference(t);break}case Q.DECIMAL_CHARACTER_REFERENCE:{this._stateDecimalCharacterReference(t);break}case Q.NUMERIC_CHARACTER_REFERENCE_END:{this._stateNumericCharacterReferenceEnd(t);break}default:throw new Error("Unknown state")}}_stateData(t){switch(t){case K.LESS_THAN_SIGN:{this.state=Q.TAG_OPEN;break}case K.AMPERSAND:{this.returnState=Q.DATA,this.state=Q.CHARACTER_REFERENCE;break}case K.NULL:{this._err(Ae.unexpectedNullCharacter),this._emitCodePoint(t);break}case K.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateRcdata(t){switch(t){case K.AMPERSAND:{this.returnState=Q.RCDATA,this.state=Q.CHARACTER_REFERENCE;break}case K.LESS_THAN_SIGN:{this.state=Q.RCDATA_LESS_THAN_SIGN;break}case K.NULL:{this._err(Ae.unexpectedNullCharacter),this._emitChars(Mr);break}case K.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateRawtext(t){switch(t){case K.LESS_THAN_SIGN:{this.state=Q.RAWTEXT_LESS_THAN_SIGN;break}case K.NULL:{this._err(Ae.unexpectedNullCharacter),this._emitChars(Mr);break}case K.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptData(t){switch(t){case K.LESS_THAN_SIGN:{this.state=Q.SCRIPT_DATA_LESS_THAN_SIGN;break}case K.NULL:{this._err(Ae.unexpectedNullCharacter),this._emitChars(Mr);break}case K.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_statePlaintext(t){switch(t){case K.NULL:{this._err(Ae.unexpectedNullCharacter),this._emitChars(Mr);break}case K.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateTagOpen(t){if(Hh(t))this._createStartTagToken(),this.state=Q.TAG_NAME,this._stateTagName(t);else switch(t){case K.EXCLAMATION_MARK:{this.state=Q.MARKUP_DECLARATION_OPEN;break}case K.SOLIDUS:{this.state=Q.END_TAG_OPEN;break}case K.QUESTION_MARK:{this._err(Ae.unexpectedQuestionMarkInsteadOfTagName),this._createCommentToken(1),this.state=Q.BOGUS_COMMENT,this._stateBogusComment(t);break}case K.EOF:{this._err(Ae.eofBeforeTagName),this._emitChars("<"),this._emitEOFToken();break}default:this._err(Ae.invalidFirstCharacterOfTagName),this._emitChars("<"),this.state=Q.DATA,this._stateData(t)}}_stateEndTagOpen(t){if(Hh(t))this._createEndTagToken(),this.state=Q.TAG_NAME,this._stateTagName(t);else switch(t){case K.GREATER_THAN_SIGN:{this._err(Ae.missingEndTagName),this.state=Q.DATA;break}case K.EOF:{this._err(Ae.eofBeforeTagName),this._emitChars("</"),this._emitEOFToken();break}default:this._err(Ae.invalidFirstCharacterOfTagName),this._createCommentToken(2),this.state=Q.BOGUS_COMMENT,this._stateBogusComment(t)}}_stateTagName(t){const n=this.currentToken;switch(t){case K.SPACE:case K.LINE_FEED:case K.TABULATION:case K.FORM_FEED:{this.state=Q.BEFORE_ATTRIBUTE_NAME;break}case K.SOLIDUS:{this.state=Q.SELF_CLOSING_START_TAG;break}case K.GREATER_THAN_SIGN:{this.state=Q.DATA,this.emitCurrentTagToken();break}case K.NULL:{this._err(Ae.unexpectedNullCharacter),n.tagName+=Mr;break}case K.EOF:{this._err(Ae.eofInTag),this._emitEOFToken();break}default:n.tagName+=String.fromCodePoint(wE(t)?o2(t):t)}}_stateRcdataLessThanSign(t){t===K.SOLIDUS?this.state=Q.RCDATA_END_TAG_OPEN:(this._emitChars("<"),this.state=Q.RCDATA,this._stateRcdata(t))}_stateRcdataEndTagOpen(t){Hh(t)?(this.state=Q.RCDATA_END_TAG_NAME,this._stateRcdataEndTagName(t)):(this._emitChars("</"),this.state=Q.RCDATA,this._stateRcdata(t))}handleSpecialEndTag(t){if(!this.preprocessor.startsWith(this.lastStartTagName,!1))return!this._ensureHibernation();this._createEndTagToken();const n=this.currentToken;switch(n.tagName=this.lastStartTagName,this.preprocessor.peek(this.lastStartTagName.length)){case K.SPACE:case K.LINE_FEED:case K.TABULATION:case K.FORM_FEED:return this._advanceBy(this.lastStartTagName.length),this.state=Q.BEFORE_ATTRIBUTE_NAME,!1;case K.SOLIDUS:return this._advanceBy(this.lastStartTagName.length),this.state=Q.SELF_CLOSING_START_TAG,!1;case K.GREATER_THAN_SIGN:return this._advanceBy(this.lastStartTagName.length),this.emitCurrentTagToken(),this.state=Q.DATA,!1;default:return!this._ensureHibernation()}}_stateRcdataEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=Q.RCDATA,this._stateRcdata(t))}_stateRawtextLessThanSign(t){t===K.SOLIDUS?this.state=Q.RAWTEXT_END_TAG_OPEN:(this._emitChars("<"),this.state=Q.RAWTEXT,this._stateRawtext(t))}_stateRawtextEndTagOpen(t){Hh(t)?(this.state=Q.RAWTEXT_END_TAG_NAME,this._stateRawtextEndTagName(t)):(this._emitChars("</"),this.state=Q.RAWTEXT,this._stateRawtext(t))}_stateRawtextEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=Q.RAWTEXT,this._stateRawtext(t))}_stateScriptDataLessThanSign(t){switch(t){case K.SOLIDUS:{this.state=Q.SCRIPT_DATA_END_TAG_OPEN;break}case K.EXCLAMATION_MARK:{this.state=Q.SCRIPT_DATA_ESCAPE_START,this._emitChars("<!");break}default:this._emitChars("<"),this.state=Q.SCRIPT_DATA,this._stateScriptData(t)}}_stateScriptDataEndTagOpen(t){Hh(t)?(this.state=Q.SCRIPT_DATA_END_TAG_NAME,this._stateScriptDataEndTagName(t)):(this._emitChars("</"),this.state=Q.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=Q.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscapeStart(t){t===K.HYPHEN_MINUS?(this.state=Q.SCRIPT_DATA_ESCAPE_START_DASH,this._emitChars("-")):(this.state=Q.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscapeStartDash(t){t===K.HYPHEN_MINUS?(this.state=Q.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-")):(this.state=Q.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscaped(t){switch(t){case K.HYPHEN_MINUS:{this.state=Q.SCRIPT_DATA_ESCAPED_DASH,this._emitChars("-");break}case K.LESS_THAN_SIGN:{this.state=Q.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case K.NULL:{this._err(Ae.unexpectedNullCharacter),this._emitChars(Mr);break}case K.EOF:{this._err(Ae.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptDataEscapedDash(t){switch(t){case K.HYPHEN_MINUS:{this.state=Q.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-");break}case K.LESS_THAN_SIGN:{this.state=Q.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case K.NULL:{this._err(Ae.unexpectedNullCharacter),this.state=Q.SCRIPT_DATA_ESCAPED,this._emitChars(Mr);break}case K.EOF:{this._err(Ae.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=Q.SCRIPT_DATA_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataEscapedDashDash(t){switch(t){case K.HYPHEN_MINUS:{this._emitChars("-");break}case K.LESS_THAN_SIGN:{this.state=Q.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case K.GREATER_THAN_SIGN:{this.state=Q.SCRIPT_DATA,this._emitChars(">");break}case K.NULL:{this._err(Ae.unexpectedNullCharacter),this.state=Q.SCRIPT_DATA_ESCAPED,this._emitChars(Mr);break}case K.EOF:{this._err(Ae.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=Q.SCRIPT_DATA_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataEscapedLessThanSign(t){t===K.SOLIDUS?this.state=Q.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:Hh(t)?(this._emitChars("<"),this.state=Q.SCRIPT_DATA_DOUBLE_ESCAPE_START,this._stateScriptDataDoubleEscapeStart(t)):(this._emitChars("<"),this.state=Q.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataEscapedEndTagOpen(t){Hh(t)?(this.state=Q.SCRIPT_DATA_ESCAPED_END_TAG_NAME,this._stateScriptDataEscapedEndTagName(t)):(this._emitChars("</"),this.state=Q.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataEscapedEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=Q.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataDoubleEscapeStart(t){if(this.preprocessor.startsWith(oa.SCRIPT,!1)&&lee(this.preprocessor.peek(oa.SCRIPT.length))){this._emitCodePoint(t);for(let n=0;n<oa.SCRIPT.length;n++)this._emitCodePoint(this._consume());this.state=Q.SCRIPT_DATA_DOUBLE_ESCAPED}else this._ensureHibernation()||(this.state=Q.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataDoubleEscaped(t){switch(t){case K.HYPHEN_MINUS:{this.state=Q.SCRIPT_DATA_DOUBLE_ESCAPED_DASH,this._emitChars("-");break}case K.LESS_THAN_SIGN:{this.state=Q.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case K.NULL:{this._err(Ae.unexpectedNullCharacter),this._emitChars(Mr);break}case K.EOF:{this._err(Ae.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedDash(t){switch(t){case K.HYPHEN_MINUS:{this.state=Q.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH,this._emitChars("-");break}case K.LESS_THAN_SIGN:{this.state=Q.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case K.NULL:{this._err(Ae.unexpectedNullCharacter),this.state=Q.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(Mr);break}case K.EOF:{this._err(Ae.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=Q.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedDashDash(t){switch(t){case K.HYPHEN_MINUS:{this._emitChars("-");break}case K.LESS_THAN_SIGN:{this.state=Q.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case K.GREATER_THAN_SIGN:{this.state=Q.SCRIPT_DATA,this._emitChars(">");break}case K.NULL:{this._err(Ae.unexpectedNullCharacter),this.state=Q.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(Mr);break}case K.EOF:{this._err(Ae.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=Q.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedLessThanSign(t){t===K.SOLIDUS?(this.state=Q.SCRIPT_DATA_DOUBLE_ESCAPE_END,this._emitChars("/")):(this.state=Q.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(t))}_stateScriptDataDoubleEscapeEnd(t){if(this.preprocessor.startsWith(oa.SCRIPT,!1)&&lee(this.preprocessor.peek(oa.SCRIPT.length))){this._emitCodePoint(t);for(let n=0;n<oa.SCRIPT.length;n++)this._emitCodePoint(this._consume());this.state=Q.SCRIPT_DATA_ESCAPED}else this._ensureHibernation()||(this.state=Q.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(t))}_stateBeforeAttributeName(t){switch(t){case K.SPACE:case K.LINE_FEED:case K.TABULATION:case K.FORM_FEED:break;case K.SOLIDUS:case K.GREATER_THAN_SIGN:case K.EOF:{this.state=Q.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(t);break}case K.EQUALS_SIGN:{this._err(Ae.unexpectedEqualsSignBeforeAttributeName),this._createAttr("="),this.state=Q.ATTRIBUTE_NAME;break}default:this._createAttr(""),this.state=Q.ATTRIBUTE_NAME,this._stateAttributeName(t)}}_stateAttributeName(t){switch(t){case K.SPACE:case K.LINE_FEED:case K.TABULATION:case K.FORM_FEED:case K.SOLIDUS:case K.GREATER_THAN_SIGN:case K.EOF:{this._leaveAttrName(),this.state=Q.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(t);break}case K.EQUALS_SIGN:{this._leaveAttrName(),this.state=Q.BEFORE_ATTRIBUTE_VALUE;break}case K.QUOTATION_MARK:case K.APOSTROPHE:case K.LESS_THAN_SIGN:{this._err(Ae.unexpectedCharacterInAttributeName),this.currentAttr.name+=String.fromCodePoint(t);break}case K.NULL:{this._err(Ae.unexpectedNullCharacter),this.currentAttr.name+=Mr;break}default:this.currentAttr.name+=String.fromCodePoint(wE(t)?o2(t):t)}}_stateAfterAttributeName(t){switch(t){case K.SPACE:case K.LINE_FEED:case K.TABULATION:case K.FORM_FEED:break;case K.SOLIDUS:{this.state=Q.SELF_CLOSING_START_TAG;break}case K.EQUALS_SIGN:{this.state=Q.BEFORE_ATTRIBUTE_VALUE;break}case K.GREATER_THAN_SIGN:{this.state=Q.DATA,this.emitCurrentTagToken();break}case K.EOF:{this._err(Ae.eofInTag),this._emitEOFToken();break}default:this._createAttr(""),this.state=Q.ATTRIBUTE_NAME,this._stateAttributeName(t)}}_stateBeforeAttributeValue(t){switch(t){case K.SPACE:case K.LINE_FEED:case K.TABULATION:case K.FORM_FEED:break;case K.QUOTATION_MARK:{this.state=Q.ATTRIBUTE_VALUE_DOUBLE_QUOTED;break}case K.APOSTROPHE:{this.state=Q.ATTRIBUTE_VALUE_SINGLE_QUOTED;break}case K.GREATER_THAN_SIGN:{this._err(Ae.missingAttributeValue),this.state=Q.DATA,this.emitCurrentTagToken();break}default:this.state=Q.ATTRIBUTE_VALUE_UNQUOTED,this._stateAttributeValueUnquoted(t)}}_stateAttributeValueDoubleQuoted(t){switch(t){case K.QUOTATION_MARK:{this.state=Q.AFTER_ATTRIBUTE_VALUE_QUOTED;break}case K.AMPERSAND:{this.returnState=Q.ATTRIBUTE_VALUE_DOUBLE_QUOTED,this.state=Q.CHARACTER_REFERENCE;break}case K.NULL:{this._err(Ae.unexpectedNullCharacter),this.currentAttr.value+=Mr;break}case K.EOF:{this._err(Ae.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAttributeValueSingleQuoted(t){switch(t){case K.APOSTROPHE:{this.state=Q.AFTER_ATTRIBUTE_VALUE_QUOTED;break}case K.AMPERSAND:{this.returnState=Q.ATTRIBUTE_VALUE_SINGLE_QUOTED,this.state=Q.CHARACTER_REFERENCE;break}case K.NULL:{this._err(Ae.unexpectedNullCharacter),this.currentAttr.value+=Mr;break}case K.EOF:{this._err(Ae.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAttributeValueUnquoted(t){switch(t){case K.SPACE:case K.LINE_FEED:case K.TABULATION:case K.FORM_FEED:{this._leaveAttrValue(),this.state=Q.BEFORE_ATTRIBUTE_NAME;break}case K.AMPERSAND:{this.returnState=Q.ATTRIBUTE_VALUE_UNQUOTED,this.state=Q.CHARACTER_REFERENCE;break}case K.GREATER_THAN_SIGN:{this._leaveAttrValue(),this.state=Q.DATA,this.emitCurrentTagToken();break}case K.NULL:{this._err(Ae.unexpectedNullCharacter),this.currentAttr.value+=Mr;break}case K.QUOTATION_MARK:case K.APOSTROPHE:case K.LESS_THAN_SIGN:case K.EQUALS_SIGN:case K.GRAVE_ACCENT:{this._err(Ae.unexpectedCharacterInUnquotedAttributeValue),this.currentAttr.value+=String.fromCodePoint(t);break}case K.EOF:{this._err(Ae.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAfterAttributeValueQuoted(t){switch(t){case K.SPACE:case K.LINE_FEED:case K.TABULATION:case K.FORM_FEED:{this._leaveAttrValue(),this.state=Q.BEFORE_ATTRIBUTE_NAME;break}case K.SOLIDUS:{this._leaveAttrValue(),this.state=Q.SELF_CLOSING_START_TAG;break}case K.GREATER_THAN_SIGN:{this._leaveAttrValue(),this.state=Q.DATA,this.emitCurrentTagToken();break}case K.EOF:{this._err(Ae.eofInTag),this._emitEOFToken();break}default:this._err(Ae.missingWhitespaceBetweenAttributes),this.state=Q.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(t)}}_stateSelfClosingStartTag(t){switch(t){case K.GREATER_THAN_SIGN:{const n=this.currentToken;n.selfClosing=!0,this.state=Q.DATA,this.emitCurrentTagToken();break}case K.EOF:{this._err(Ae.eofInTag),this._emitEOFToken();break}default:this._err(Ae.unexpectedSolidusInTag),this.state=Q.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(t)}}_stateBogusComment(t){const n=this.currentToken;switch(t){case K.GREATER_THAN_SIGN:{this.state=Q.DATA,this.emitCurrentComment(n);break}case K.EOF:{this.emitCurrentComment(n),this._emitEOFToken();break}case K.NULL:{this._err(Ae.unexpectedNullCharacter),n.data+=Mr;break}default:n.data+=String.fromCodePoint(t)}}_stateMarkupDeclarationOpen(t){this._consumeSequenceIfMatch(oa.DASH_DASH,!0)?(this._createCommentToken(oa.DASH_DASH.length+1),this.state=Q.COMMENT_START):this._consumeSequenceIfMatch(oa.DOCTYPE,!1)?(this.currentLocation=this.getCurrentLocation(oa.DOCTYPE.length+1),this.state=Q.DOCTYPE):this._consumeSequenceIfMatch(oa.CDATA_START,!0)?this.inForeignNode?this.state=Q.CDATA_SECTION:(this._err(Ae.cdataInHtmlContent),this._createCommentToken(oa.CDATA_START.length+1),this.currentToken.data="[CDATA[",this.state=Q.BOGUS_COMMENT):this._ensureHibernation()||(this._err(Ae.incorrectlyOpenedComment),this._createCommentToken(2),this.state=Q.BOGUS_COMMENT,this._stateBogusComment(t))}_stateCommentStart(t){switch(t){case K.HYPHEN_MINUS:{this.state=Q.COMMENT_START_DASH;break}case K.GREATER_THAN_SIGN:{this._err(Ae.abruptClosingOfEmptyComment),this.state=Q.DATA;const n=this.currentToken;this.emitCurrentComment(n);break}default:this.state=Q.COMMENT,this._stateComment(t)}}_stateCommentStartDash(t){const n=this.currentToken;switch(t){case K.HYPHEN_MINUS:{this.state=Q.COMMENT_END;break}case K.GREATER_THAN_SIGN:{this._err(Ae.abruptClosingOfEmptyComment),this.state=Q.DATA,this.emitCurrentComment(n);break}case K.EOF:{this._err(Ae.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="-",this.state=Q.COMMENT,this._stateComment(t)}}_stateComment(t){const n=this.currentToken;switch(t){case K.HYPHEN_MINUS:{this.state=Q.COMMENT_END_DASH;break}case K.LESS_THAN_SIGN:{n.data+="<",this.state=Q.COMMENT_LESS_THAN_SIGN;break}case K.NULL:{this._err(Ae.unexpectedNullCharacter),n.data+=Mr;break}case K.EOF:{this._err(Ae.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+=String.fromCodePoint(t)}}_stateCommentLessThanSign(t){const n=this.currentToken;switch(t){case K.EXCLAMATION_MARK:{n.data+="!",this.state=Q.COMMENT_LESS_THAN_SIGN_BANG;break}case K.LESS_THAN_SIGN:{n.data+="<";break}default:this.state=Q.COMMENT,this._stateComment(t)}}_stateCommentLessThanSignBang(t){t===K.HYPHEN_MINUS?this.state=Q.COMMENT_LESS_THAN_SIGN_BANG_DASH:(this.state=Q.COMMENT,this._stateComment(t))}_stateCommentLessThanSignBangDash(t){t===K.HYPHEN_MINUS?this.state=Q.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:(this.state=Q.COMMENT_END_DASH,this._stateCommentEndDash(t))}_stateCommentLessThanSignBangDashDash(t){t!==K.GREATER_THAN_SIGN&&t!==K.EOF&&this._err(Ae.nestedComment),this.state=Q.COMMENT_END,this._stateCommentEnd(t)}_stateCommentEndDash(t){const n=this.currentToken;switch(t){case K.HYPHEN_MINUS:{this.state=Q.COMMENT_END;break}case K.EOF:{this._err(Ae.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="-",this.state=Q.COMMENT,this._stateComment(t)}}_stateCommentEnd(t){const n=this.currentToken;switch(t){case K.GREATER_THAN_SIGN:{this.state=Q.DATA,this.emitCurrentComment(n);break}case K.EXCLAMATION_MARK:{this.state=Q.COMMENT_END_BANG;break}case K.HYPHEN_MINUS:{n.data+="-";break}case K.EOF:{this._err(Ae.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="--",this.state=Q.COMMENT,this._stateComment(t)}}_stateCommentEndBang(t){const n=this.currentToken;switch(t){case K.HYPHEN_MINUS:{n.data+="--!",this.state=Q.COMMENT_END_DASH;break}case K.GREATER_THAN_SIGN:{this._err(Ae.incorrectlyClosedComment),this.state=Q.DATA,this.emitCurrentComment(n);break}case K.EOF:{this._err(Ae.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="--!",this.state=Q.COMMENT,this._stateComment(t)}}_stateDoctype(t){switch(t){case K.SPACE:case K.LINE_FEED:case K.TABULATION:case K.FORM_FEED:{this.state=Q.BEFORE_DOCTYPE_NAME;break}case K.GREATER_THAN_SIGN:{this.state=Q.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(t);break}case K.EOF:{this._err(Ae.eofInDoctype),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ae.missingWhitespaceBeforeDoctypeName),this.state=Q.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(t)}}_stateBeforeDoctypeName(t){if(wE(t))this._createDoctypeToken(String.fromCharCode(o2(t))),this.state=Q.DOCTYPE_NAME;else switch(t){case K.SPACE:case K.LINE_FEED:case K.TABULATION:case K.FORM_FEED:break;case K.NULL:{this._err(Ae.unexpectedNullCharacter),this._createDoctypeToken(Mr),this.state=Q.DOCTYPE_NAME;break}case K.GREATER_THAN_SIGN:{this._err(Ae.missingDoctypeName),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=Q.DATA;break}case K.EOF:{this._err(Ae.eofInDoctype),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._createDoctypeToken(String.fromCodePoint(t)),this.state=Q.DOCTYPE_NAME}}_stateDoctypeName(t){const n=this.currentToken;switch(t){case K.SPACE:case K.LINE_FEED:case K.TABULATION:case K.FORM_FEED:{this.state=Q.AFTER_DOCTYPE_NAME;break}case K.GREATER_THAN_SIGN:{this.state=Q.DATA,this.emitCurrentDoctype(n);break}case K.NULL:{this._err(Ae.unexpectedNullCharacter),n.name+=Mr;break}case K.EOF:{this._err(Ae.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.name+=String.fromCodePoint(wE(t)?o2(t):t)}}_stateAfterDoctypeName(t){const n=this.currentToken;switch(t){case K.SPACE:case K.LINE_FEED:case K.TABULATION:case K.FORM_FEED:break;case K.GREATER_THAN_SIGN:{this.state=Q.DATA,this.emitCurrentDoctype(n);break}case K.EOF:{this._err(Ae.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._consumeSequenceIfMatch(oa.PUBLIC,!1)?this.state=Q.AFTER_DOCTYPE_PUBLIC_KEYWORD:this._consumeSequenceIfMatch(oa.SYSTEM,!1)?this.state=Q.AFTER_DOCTYPE_SYSTEM_KEYWORD:this._ensureHibernation()||(this._err(Ae.invalidCharacterSequenceAfterDoctypeName),n.forceQuirks=!0,this.state=Q.BOGUS_DOCTYPE,this._stateBogusDoctype(t))}}_stateAfterDoctypePublicKeyword(t){const n=this.currentToken;switch(t){case K.SPACE:case K.LINE_FEED:case K.TABULATION:case K.FORM_FEED:{this.state=Q.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER;break}case K.QUOTATION_MARK:{this._err(Ae.missingWhitespaceAfterDoctypePublicKeyword),n.publicId="",this.state=Q.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break}case K.APOSTROPHE:{this._err(Ae.missingWhitespaceAfterDoctypePublicKeyword),n.publicId="",this.state=Q.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break}case K.GREATER_THAN_SIGN:{this._err(Ae.missingDoctypePublicIdentifier),n.forceQuirks=!0,this.state=Q.DATA,this.emitCurrentDoctype(n);break}case K.EOF:{this._err(Ae.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ae.missingQuoteBeforeDoctypePublicIdentifier),n.forceQuirks=!0,this.state=Q.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBeforeDoctypePublicIdentifier(t){const n=this.currentToken;switch(t){case K.SPACE:case K.LINE_FEED:case K.TABULATION:case K.FORM_FEED:break;case K.QUOTATION_MARK:{n.publicId="",this.state=Q.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break}case K.APOSTROPHE:{n.publicId="",this.state=Q.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break}case K.GREATER_THAN_SIGN:{this._err(Ae.missingDoctypePublicIdentifier),n.forceQuirks=!0,this.state=Q.DATA,this.emitCurrentDoctype(n);break}case K.EOF:{this._err(Ae.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ae.missingQuoteBeforeDoctypePublicIdentifier),n.forceQuirks=!0,this.state=Q.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateDoctypePublicIdentifierDoubleQuoted(t){const n=this.currentToken;switch(t){case K.QUOTATION_MARK:{this.state=Q.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break}case K.NULL:{this._err(Ae.unexpectedNullCharacter),n.publicId+=Mr;break}case K.GREATER_THAN_SIGN:{this._err(Ae.abruptDoctypePublicIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=Q.DATA;break}case K.EOF:{this._err(Ae.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.publicId+=String.fromCodePoint(t)}}_stateDoctypePublicIdentifierSingleQuoted(t){const n=this.currentToken;switch(t){case K.APOSTROPHE:{this.state=Q.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break}case K.NULL:{this._err(Ae.unexpectedNullCharacter),n.publicId+=Mr;break}case K.GREATER_THAN_SIGN:{this._err(Ae.abruptDoctypePublicIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=Q.DATA;break}case K.EOF:{this._err(Ae.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.publicId+=String.fromCodePoint(t)}}_stateAfterDoctypePublicIdentifier(t){const n=this.currentToken;switch(t){case K.SPACE:case K.LINE_FEED:case K.TABULATION:case K.FORM_FEED:{this.state=Q.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS;break}case K.GREATER_THAN_SIGN:{this.state=Q.DATA,this.emitCurrentDoctype(n);break}case K.QUOTATION_MARK:{this._err(Ae.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),n.systemId="",this.state=Q.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case K.APOSTROPHE:{this._err(Ae.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),n.systemId="",this.state=Q.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case K.EOF:{this._err(Ae.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ae.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=Q.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBetweenDoctypePublicAndSystemIdentifiers(t){const n=this.currentToken;switch(t){case K.SPACE:case K.LINE_FEED:case K.TABULATION:case K.FORM_FEED:break;case K.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=Q.DATA;break}case K.QUOTATION_MARK:{n.systemId="",this.state=Q.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case K.APOSTROPHE:{n.systemId="",this.state=Q.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case K.EOF:{this._err(Ae.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ae.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=Q.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateAfterDoctypeSystemKeyword(t){const n=this.currentToken;switch(t){case K.SPACE:case K.LINE_FEED:case K.TABULATION:case K.FORM_FEED:{this.state=Q.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER;break}case K.QUOTATION_MARK:{this._err(Ae.missingWhitespaceAfterDoctypeSystemKeyword),n.systemId="",this.state=Q.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case K.APOSTROPHE:{this._err(Ae.missingWhitespaceAfterDoctypeSystemKeyword),n.systemId="",this.state=Q.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case K.GREATER_THAN_SIGN:{this._err(Ae.missingDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=Q.DATA,this.emitCurrentDoctype(n);break}case K.EOF:{this._err(Ae.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ae.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=Q.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBeforeDoctypeSystemIdentifier(t){const n=this.currentToken;switch(t){case K.SPACE:case K.LINE_FEED:case K.TABULATION:case K.FORM_FEED:break;case K.QUOTATION_MARK:{n.systemId="",this.state=Q.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case K.APOSTROPHE:{n.systemId="",this.state=Q.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case K.GREATER_THAN_SIGN:{this._err(Ae.missingDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=Q.DATA,this.emitCurrentDoctype(n);break}case K.EOF:{this._err(Ae.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ae.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=Q.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateDoctypeSystemIdentifierDoubleQuoted(t){const n=this.currentToken;switch(t){case K.QUOTATION_MARK:{this.state=Q.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break}case K.NULL:{this._err(Ae.unexpectedNullCharacter),n.systemId+=Mr;break}case K.GREATER_THAN_SIGN:{this._err(Ae.abruptDoctypeSystemIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=Q.DATA;break}case K.EOF:{this._err(Ae.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.systemId+=String.fromCodePoint(t)}}_stateDoctypeSystemIdentifierSingleQuoted(t){const n=this.currentToken;switch(t){case K.APOSTROPHE:{this.state=Q.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break}case K.NULL:{this._err(Ae.unexpectedNullCharacter),n.systemId+=Mr;break}case K.GREATER_THAN_SIGN:{this._err(Ae.abruptDoctypeSystemIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=Q.DATA;break}case K.EOF:{this._err(Ae.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.systemId+=String.fromCodePoint(t)}}_stateAfterDoctypeSystemIdentifier(t){const n=this.currentToken;switch(t){case K.SPACE:case K.LINE_FEED:case K.TABULATION:case K.FORM_FEED:break;case K.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=Q.DATA;break}case K.EOF:{this._err(Ae.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ae.unexpectedCharacterAfterDoctypeSystemIdentifier),this.state=Q.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBogusDoctype(t){const n=this.currentToken;switch(t){case K.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=Q.DATA;break}case K.NULL:{this._err(Ae.unexpectedNullCharacter);break}case K.EOF:{this.emitCurrentDoctype(n),this._emitEOFToken();break}}}_stateCdataSection(t){switch(t){case K.RIGHT_SQUARE_BRACKET:{this.state=Q.CDATA_SECTION_BRACKET;break}case K.EOF:{this._err(Ae.eofInCdata),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateCdataSectionBracket(t){t===K.RIGHT_SQUARE_BRACKET?this.state=Q.CDATA_SECTION_END:(this._emitChars("]"),this.state=Q.CDATA_SECTION,this._stateCdataSection(t))}_stateCdataSectionEnd(t){switch(t){case K.GREATER_THAN_SIGN:{this.state=Q.DATA;break}case K.RIGHT_SQUARE_BRACKET:{this._emitChars("]");break}default:this._emitChars("]]"),this.state=Q.CDATA_SECTION,this._stateCdataSection(t)}}_stateCharacterReference(t){t===K.NUMBER_SIGN?this.state=Q.NUMERIC_CHARACTER_REFERENCE:x5(t)?(this.state=Q.NAMED_CHARACTER_REFERENCE,this._stateNamedCharacterReference(t)):(this._flushCodePointConsumedAsCharacterReference(K.AMPERSAND),this._reconsumeInState(this.returnState,t))}_stateNamedCharacterReference(t){const n=this._matchNamedCharacterReference(t);if(!this._ensureHibernation())if(n){for(let r=0;r<n.length;r++)this._flushCodePointConsumedAsCharacterReference(n[r]);this.state=this.returnState}else this._flushCodePointConsumedAsCharacterReference(K.AMPERSAND),this.state=Q.AMBIGUOUS_AMPERSAND}_stateAmbiguousAmpersand(t){x5(t)?this._flushCodePointConsumedAsCharacterReference(t):(t===K.SEMICOLON&&this._err(Ae.unknownNamedCharacterReference),this._reconsumeInState(this.returnState,t))}_stateNumericCharacterReference(t){this.charRefCode=0,t===K.LATIN_SMALL_X||t===K.LATIN_CAPITAL_X?this.state=Q.HEXADEMICAL_CHARACTER_REFERENCE_START:gx(t)?(this.state=Q.DECIMAL_CHARACTER_REFERENCE,this._stateDecimalCharacterReference(t)):(this._err(Ae.absenceOfDigitsInNumericCharacterReference),this._flushCodePointConsumedAsCharacterReference(K.AMPERSAND),this._flushCodePointConsumedAsCharacterReference(K.NUMBER_SIGN),this._reconsumeInState(this.returnState,t))}_stateHexademicalCharacterReferenceStart(t){DVe(t)?(this.state=Q.HEXADEMICAL_CHARACTER_REFERENCE,this._stateHexademicalCharacterReference(t)):(this._err(Ae.absenceOfDigitsInNumericCharacterReference),this._flushCodePointConsumedAsCharacterReference(K.AMPERSAND),this._flushCodePointConsumedAsCharacterReference(K.NUMBER_SIGN),this._unconsume(2),this.state=this.returnState)}_stateHexademicalCharacterReference(t){Dme(t)?this.charRefCode=this.charRefCode*16+t-55:Ome(t)?this.charRefCode=this.charRefCode*16+t-87:gx(t)?this.charRefCode=this.charRefCode*16+t-48:t===K.SEMICOLON?this.state=Q.NUMERIC_CHARACTER_REFERENCE_END:(this._err(Ae.missingSemicolonAfterCharacterReference),this.state=Q.NUMERIC_CHARACTER_REFERENCE_END,this._stateNumericCharacterReferenceEnd(t))}_stateDecimalCharacterReference(t){gx(t)?this.charRefCode=this.charRefCode*10+t-48:t===K.SEMICOLON?this.state=Q.NUMERIC_CHARACTER_REFERENCE_END:(this._err(Ae.missingSemicolonAfterCharacterReference),this.state=Q.NUMERIC_CHARACTER_REFERENCE_END,this._stateNumericCharacterReferenceEnd(t))}_stateNumericCharacterReferenceEnd(t){if(this.charRefCode===K.NULL)this._err(Ae.nullCharacterReference),this.charRefCode=K.REPLACEMENT_CHARACTER;else if(this.charRefCode>1114111)this._err(Ae.characterReferenceOutsideUnicodeRange),this.charRefCode=K.REPLACEMENT_CHARACTER;else if(Cme(this.charRefCode))this._err(Ae.surrogateCharacterReference),this.charRefCode=K.REPLACEMENT_CHARACTER;else if(kme(this.charRefCode))this._err(Ae.noncharacterCharacterReference);else if(Ame(this.charRefCode)||this.charRefCode===K.CARRIAGE_RETURN){this._err(Ae.controlCharacterReference);const n=NVe.get(this.charRefCode);n!==void 0&&(this.charRefCode=n)}this._flushCodePointConsumedAsCharacterReference(this.charRefCode),this._reconsumeInState(this.returnState,t)}}const Mme=new Set([I.DD,I.DT,I.LI,I.OPTGROUP,I.OPTION,I.P,I.RB,I.RP,I.RT,I.RTC]),cee=new Set([...Mme,I.CAPTION,I.COLGROUP,I.TBODY,I.TD,I.TFOOT,I.TH,I.THEAD,I.TR]),s2=new Map([[I.APPLET,Me.HTML],[I.CAPTION,Me.HTML],[I.HTML,Me.HTML],[I.MARQUEE,Me.HTML],[I.OBJECT,Me.HTML],[I.TABLE,Me.HTML],[I.TD,Me.HTML],[I.TEMPLATE,Me.HTML],[I.TH,Me.HTML],[I.ANNOTATION_XML,Me.MATHML],[I.MI,Me.MATHML],[I.MN,Me.MATHML],[I.MO,Me.MATHML],[I.MS,Me.MATHML],[I.MTEXT,Me.MATHML],[I.DESC,Me.SVG],[I.FOREIGN_OBJECT,Me.SVG],[I.TITLE,Me.SVG]]),MVe=[I.H1,I.H2,I.H3,I.H4,I.H5,I.H6],LVe=[I.TR,I.TEMPLATE,I.HTML],FVe=[I.TBODY,I.TFOOT,I.THEAD,I.TEMPLATE,I.HTML],jVe=[I.TABLE,I.TEMPLATE,I.HTML],BVe=[I.TD,I.TH];class UVe{get currentTmplContentOrNode(){return this._isInTemplate()?this.treeAdapter.getTemplateContent(this.current):this.current}constructor(t,n,r){this.treeAdapter=n,this.handler=r,this.items=[],this.tagIDs=[],this.stackTop=-1,this.tmplCount=0,this.currentTagId=I.UNKNOWN,this.current=t}_indexOf(t){return this.items.lastIndexOf(t,this.stackTop)}_isInTemplate(){return this.currentTagId===I.TEMPLATE&&this.treeAdapter.getNamespaceURI(this.current)===Me.HTML}_updateCurrentElement(){this.current=this.items[this.stackTop],this.currentTagId=this.tagIDs[this.stackTop]}push(t,n){this.stackTop++,this.items[this.stackTop]=t,this.current=t,this.tagIDs[this.stackTop]=n,this.currentTagId=n,this._isInTemplate()&&this.tmplCount++,this.handler.onItemPush(t,n,!0)}pop(){const t=this.current;this.tmplCount>0&&this._isInTemplate()&&this.tmplCount--,this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(t,!0)}replace(t,n){const r=this._indexOf(t);this.items[r]=n,r===this.stackTop&&(this.current=n)}insertAfter(t,n,r){const i=this._indexOf(t)+1;this.items.splice(i,0,n),this.tagIDs.splice(i,0,r),this.stackTop++,i===this.stackTop&&this._updateCurrentElement(),this.handler.onItemPush(this.current,this.currentTagId,i===this.stackTop)}popUntilTagNamePopped(t){let n=this.stackTop+1;do n=this.tagIDs.lastIndexOf(t,n-1);while(n>0&&this.treeAdapter.getNamespaceURI(this.items[n])!==Me.HTML);this.shortenToLength(n<0?0:n)}shortenToLength(t){for(;this.stackTop>=t;){const n=this.current;this.tmplCount>0&&this._isInTemplate()&&(this.tmplCount-=1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(n,this.stackTop<t)}}popUntilElementPopped(t){const n=this._indexOf(t);this.shortenToLength(n<0?0:n)}popUntilPopped(t,n){const r=this._indexOfTagNames(t,n);this.shortenToLength(r<0?0:r)}popUntilNumberedHeaderPopped(){this.popUntilPopped(MVe,Me.HTML)}popUntilTableCellPopped(){this.popUntilPopped(BVe,Me.HTML)}popAllUpToHtmlElement(){this.tmplCount=0,this.shortenToLength(1)}_indexOfTagNames(t,n){for(let r=this.stackTop;r>=0;r--)if(t.includes(this.tagIDs[r])&&this.treeAdapter.getNamespaceURI(this.items[r])===n)return r;return-1}clearBackTo(t,n){const r=this._indexOfTagNames(t,n);this.shortenToLength(r+1)}clearBackToTableContext(){this.clearBackTo(jVe,Me.HTML)}clearBackToTableBodyContext(){this.clearBackTo(FVe,Me.HTML)}clearBackToTableRowContext(){this.clearBackTo(LVe,Me.HTML)}remove(t){const n=this._indexOf(t);n>=0&&(n===this.stackTop?this.pop():(this.items.splice(n,1),this.tagIDs.splice(n,1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(t,!1)))}tryPeekProperlyNestedBodyElement(){return this.stackTop>=1&&this.tagIDs[1]===I.BODY?this.items[1]:null}contains(t){return this._indexOf(t)>-1}getCommonAncestor(t){const n=this._indexOf(t)-1;return n>=0?this.items[n]:null}isRootHtmlElementCurrent(){return this.stackTop===0&&this.tagIDs[0]===I.HTML}hasInScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n],i=this.treeAdapter.getNamespaceURI(this.items[n]);if(r===t&&i===Me.HTML)return!0;if(s2.get(r)===i)return!1}return!0}hasNumberedHeaderInScope(){for(let t=this.stackTop;t>=0;t--){const n=this.tagIDs[t],r=this.treeAdapter.getNamespaceURI(this.items[t]);if(Pme(n)&&r===Me.HTML)return!0;if(s2.get(n)===r)return!1}return!0}hasInListItemScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n],i=this.treeAdapter.getNamespaceURI(this.items[n]);if(r===t&&i===Me.HTML)return!0;if((r===I.UL||r===I.OL)&&i===Me.HTML||s2.get(r)===i)return!1}return!0}hasInButtonScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n],i=this.treeAdapter.getNamespaceURI(this.items[n]);if(r===t&&i===Me.HTML)return!0;if(r===I.BUTTON&&i===Me.HTML||s2.get(r)===i)return!1}return!0}hasInTableScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n];if(this.treeAdapter.getNamespaceURI(this.items[n])===Me.HTML){if(r===t)return!0;if(r===I.TABLE||r===I.TEMPLATE||r===I.HTML)return!1}}return!0}hasTableBodyContextInTableScope(){for(let t=this.stackTop;t>=0;t--){const n=this.tagIDs[t];if(this.treeAdapter.getNamespaceURI(this.items[t])===Me.HTML){if(n===I.TBODY||n===I.THEAD||n===I.TFOOT)return!0;if(n===I.TABLE||n===I.HTML)return!1}}return!0}hasInSelectScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n];if(this.treeAdapter.getNamespaceURI(this.items[n])===Me.HTML){if(r===t)return!0;if(r!==I.OPTION&&r!==I.OPTGROUP)return!1}}return!0}generateImpliedEndTags(){for(;Mme.has(this.currentTagId);)this.pop()}generateImpliedEndTagsThoroughly(){for(;cee.has(this.currentTagId);)this.pop()}generateImpliedEndTagsWithExclusion(t){for(;this.currentTagId!==t&&cee.has(this.currentTagId);)this.pop()}}const CL=3;var Fl;(function(e){e[e.Marker=0]="Marker",e[e.Element=1]="Element"})(Fl=Fl||(Fl={}));const fee={type:Fl.Marker};class zVe{constructor(t){this.treeAdapter=t,this.entries=[],this.bookmark=null}_getNoahArkConditionCandidates(t,n){const r=[],i=n.length,o=this.treeAdapter.getTagName(t),s=this.treeAdapter.getNamespaceURI(t);for(let a=0;a<this.entries.length;a++){const u=this.entries[a];if(u.type===Fl.Marker)break;const{element:l}=u;if(this.treeAdapter.getTagName(l)===o&&this.treeAdapter.getNamespaceURI(l)===s){const c=this.treeAdapter.getAttrList(l);c.length===i&&r.push({idx:a,attrs:c})}}return r}_ensureNoahArkCondition(t){if(this.entries.length<CL)return;const n=this.treeAdapter.getAttrList(t),r=this._getNoahArkConditionCandidates(t,n);if(r.length<CL)return;const i=new Map(n.map(s=>[s.name,s.value]));let o=0;for(let s=0;s<r.length;s++){const a=r[s];a.attrs.every(u=>i.get(u.name)===u.value)&&(o+=1,o>=CL&&this.entries.splice(a.idx,1))}}insertMarker(){this.entries.unshift(fee)}pushElement(t,n){this._ensureNoahArkCondition(t),this.entries.unshift({type:Fl.Element,element:t,token:n})}insertElementAfterBookmark(t,n){const r=this.entries.indexOf(this.bookmark);this.entries.splice(r,0,{type:Fl.Element,element:t,token:n})}removeEntry(t){const n=this.entries.indexOf(t);n>=0&&this.entries.splice(n,1)}clearToLastMarker(){const t=this.entries.indexOf(fee);t>=0?this.entries.splice(0,t+1):this.entries.length=0}getElementEntryInScopeWithTagName(t){const n=this.entries.find(r=>r.type===Fl.Marker||this.treeAdapter.getTagName(r.element)===t);return n&&n.type===Fl.Element?n:null}getElementEntry(t){return this.entries.find(n=>n.type===Fl.Element&&n.element===t)}}function dee(e){return{nodeName:"#text",value:e,parentNode:null}}const Fv={createDocument(){return{nodeName:"#document",mode:Ja.NO_QUIRKS,childNodes:[]}},createDocumentFragment(){return{nodeName:"#document-fragment",childNodes:[]}},createElement(e,t,n){return{nodeName:e,tagName:e,attrs:n,namespaceURI:t,childNodes:[],parentNode:null}},createCommentNode(e){return{nodeName:"#comment",data:e,parentNode:null}},appendChild(e,t){e.childNodes.push(t),t.parentNode=e},insertBefore(e,t,n){const r=e.childNodes.indexOf(n);e.childNodes.splice(r,0,t),t.parentNode=e},setTemplateContent(e,t){e.content=t},getTemplateContent(e){return e.content},setDocumentType(e,t,n,r){const i=e.childNodes.find(o=>o.nodeName==="#documentType");if(i)i.name=t,i.publicId=n,i.systemId=r;else{const o={nodeName:"#documentType",name:t,publicId:n,systemId:r,parentNode:null};Fv.appendChild(e,o)}},setDocumentMode(e,t){e.mode=t},getDocumentMode(e){return e.mode},detachNode(e){if(e.parentNode){const t=e.parentNode.childNodes.indexOf(e);e.parentNode.childNodes.splice(t,1),e.parentNode=null}},insertText(e,t){if(e.childNodes.length>0){const n=e.childNodes[e.childNodes.length-1];if(Fv.isTextNode(n)){n.value+=t;return}}Fv.appendChild(e,dee(t))},insertTextBefore(e,t,n){const r=e.childNodes[e.childNodes.indexOf(n)-1];r&&Fv.isTextNode(r)?r.value+=t:Fv.insertBefore(e,dee(t),n)},adoptAttributes(e,t){const n=new Set(e.attrs.map(r=>r.name));for(let r=0;r<t.length;r++)n.has(t[r].name)||e.attrs.push(t[r])},getFirstChild(e){return e.childNodes[0]},getChildNodes(e){return e.childNodes},getParentNode(e){return e.parentNode},getAttrList(e){return e.attrs},getTagName(e){return e.tagName},getNamespaceURI(e){return e.namespaceURI},getTextNodeContent(e){return e.value},getCommentNodeContent(e){return e.data},getDocumentTypeNodeName(e){return e.name},getDocumentTypeNodePublicId(e){return e.publicId},getDocumentTypeNodeSystemId(e){return e.systemId},isTextNode(e){return e.nodeName==="#text"},isCommentNode(e){return e.nodeName==="#comment"},isDocumentTypeNode(e){return e.nodeName==="#documentType"},isElementNode(e){return Object.prototype.hasOwnProperty.call(e,"tagName")},setNodeSourceCodeLocation(e,t){e.sourceCodeLocation=t},getNodeSourceCodeLocation(e){return e.sourceCodeLocation},updateNodeSourceCodeLocation(e,t){e.sourceCodeLocation={...e.sourceCodeLocation,...t}}},Lme="html",VVe="about:legacy-compat",HVe="http://www.ibm.com/data/dtd/v11/ibmxhtml1-transitional.dtd",Fme=["+//silmaril//dtd html pro v0r11 19970101//","-//as//dtd html 3.0 aswedit + extensions//","-//advasoft ltd//dtd html 3.0 aswedit + extensions//","-//ietf//dtd html 2.0 level 1//","-//ietf//dtd html 2.0 level 2//","-//ietf//dtd html 2.0 strict level 1//","-//ietf//dtd html 2.0 strict level 2//","-//ietf//dtd html 2.0 strict//","-//ietf//dtd html 2.0//","-//ietf//dtd html 2.1e//","-//ietf//dtd html 3.0//","-//ietf//dtd html 3.2 final//","-//ietf//dtd html 3.2//","-//ietf//dtd html 3//","-//ietf//dtd html level 0//","-//ietf//dtd html level 1//","-//ietf//dtd html level 2//","-//ietf//dtd html level 3//","-//ietf//dtd html strict level 0//","-//ietf//dtd html strict level 1//","-//ietf//dtd html strict level 2//","-//ietf//dtd html strict level 3//","-//ietf//dtd html strict//","-//ietf//dtd html//","-//metrius//dtd metrius presentational//","-//microsoft//dtd internet explorer 2.0 html strict//","-//microsoft//dtd internet explorer 2.0 html//","-//microsoft//dtd internet explorer 2.0 tables//","-//microsoft//dtd internet explorer 3.0 html strict//","-//microsoft//dtd internet explorer 3.0 html//","-//microsoft//dtd internet explorer 3.0 tables//","-//netscape comm. corp.//dtd html//","-//netscape comm. corp.//dtd strict html//","-//o'reilly and associates//dtd html 2.0//","-//o'reilly and associates//dtd html extended 1.0//","-//o'reilly and associates//dtd html extended relaxed 1.0//","-//sq//dtd html 2.0 hotmetal + extensions//","-//softquad software//dtd hotmetal pro 6.0::19990601::extensions to html 4.0//","-//softquad//dtd hotmetal pro 4.0::19971010::extensions to html 4.0//","-//spyglass//dtd html 2.0 extended//","-//sun microsystems corp.//dtd hotjava html//","-//sun microsystems corp.//dtd hotjava strict html//","-//w3c//dtd html 3 1995-03-24//","-//w3c//dtd html 3.2 draft//","-//w3c//dtd html 3.2 final//","-//w3c//dtd html 3.2//","-//w3c//dtd html 3.2s draft//","-//w3c//dtd html 4.0 frameset//","-//w3c//dtd html 4.0 transitional//","-//w3c//dtd html experimental 19960712//","-//w3c//dtd html experimental 970421//","-//w3c//dtd w3 html//","-//w3o//dtd w3 html 3.0//","-//webtechs//dtd mozilla html 2.0//","-//webtechs//dtd mozilla html//"],qVe=[...Fme,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"],WVe=new Set(["-//w3o//dtd w3 html strict 3.0//en//","-/w3c/dtd html 4.0 transitional/en","html"]),jme=["-//w3c//dtd xhtml 1.0 frameset//","-//w3c//dtd xhtml 1.0 transitional//"],GVe=[...jme,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"];function hee(e,t){return t.some(n=>e.startsWith(n))}function YVe(e){return e.name===Lme&&e.publicId===null&&(e.systemId===null||e.systemId===VVe)}function KVe(e){if(e.name!==Lme)return Ja.QUIRKS;const{systemId:t}=e;if(t&&t.toLowerCase()===HVe)return Ja.QUIRKS;let{publicId:n}=e;if(n!==null){if(n=n.toLowerCase(),WVe.has(n))return Ja.QUIRKS;let r=t===null?qVe:Fme;if(hee(n,r))return Ja.QUIRKS;if(r=t===null?jme:GVe,hee(n,r))return Ja.LIMITED_QUIRKS}return Ja.NO_QUIRKS}const pee={TEXT_HTML:"text/html",APPLICATION_XML:"application/xhtml+xml"},XVe="definitionurl",QVe="definitionURL",JVe=new Map(["attributeName","attributeType","baseFrequency","baseProfile","calcMode","clipPathUnits","diffuseConstant","edgeMode","filterUnits","glyphRef","gradientTransform","gradientUnits","kernelMatrix","kernelUnitLength","keyPoints","keySplines","keyTimes","lengthAdjust","limitingConeAngle","markerHeight","markerUnits","markerWidth","maskContentUnits","maskUnits","numOctaves","pathLength","patternContentUnits","patternTransform","patternUnits","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","refX","refY","repeatCount","repeatDur","requiredExtensions","requiredFeatures","specularConstant","specularExponent","spreadMethod","startOffset","stdDeviation","stitchTiles","surfaceScale","systemLanguage","tableValues","targetX","targetY","textLength","viewBox","viewTarget","xChannelSelector","yChannelSelector","zoomAndPan"].map(e=>[e.toLowerCase(),e])),ZVe=new Map([["xlink:actuate",{prefix:"xlink",name:"actuate",namespace:Me.XLINK}],["xlink:arcrole",{prefix:"xlink",name:"arcrole",namespace:Me.XLINK}],["xlink:href",{prefix:"xlink",name:"href",namespace:Me.XLINK}],["xlink:role",{prefix:"xlink",name:"role",namespace:Me.XLINK}],["xlink:show",{prefix:"xlink",name:"show",namespace:Me.XLINK}],["xlink:title",{prefix:"xlink",name:"title",namespace:Me.XLINK}],["xlink:type",{prefix:"xlink",name:"type",namespace:Me.XLINK}],["xml:base",{prefix:"xml",name:"base",namespace:Me.XML}],["xml:lang",{prefix:"xml",name:"lang",namespace:Me.XML}],["xml:space",{prefix:"xml",name:"space",namespace:Me.XML}],["xmlns",{prefix:"",name:"xmlns",namespace:Me.XMLNS}],["xmlns:xlink",{prefix:"xmlns",name:"xlink",namespace:Me.XMLNS}]]),eHe=new Map(["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","textPath"].map(e=>[e.toLowerCase(),e])),tHe=new Set([I.B,I.BIG,I.BLOCKQUOTE,I.BODY,I.BR,I.CENTER,I.CODE,I.DD,I.DIV,I.DL,I.DT,I.EM,I.EMBED,I.H1,I.H2,I.H3,I.H4,I.H5,I.H6,I.HEAD,I.HR,I.I,I.IMG,I.LI,I.LISTING,I.MENU,I.META,I.NOBR,I.OL,I.P,I.PRE,I.RUBY,I.S,I.SMALL,I.SPAN,I.STRONG,I.STRIKE,I.SUB,I.SUP,I.TABLE,I.TT,I.U,I.UL,I.VAR]);function nHe(e){const t=e.tagID;return t===I.FONT&&e.attrs.some(({name:r})=>r===Lp.COLOR||r===Lp.SIZE||r===Lp.FACE)||tHe.has(t)}function Bme(e){for(let t=0;t<e.attrs.length;t++)if(e.attrs[t].name===XVe){e.attrs[t].name=QVe;break}}function Ume(e){for(let t=0;t<e.attrs.length;t++){const n=JVe.get(e.attrs[t].name);n!=null&&(e.attrs[t].name=n)}}function _z(e){for(let t=0;t<e.attrs.length;t++){const n=ZVe.get(e.attrs[t].name);n&&(e.attrs[t].prefix=n.prefix,e.attrs[t].name=n.name,e.attrs[t].namespace=n.namespace)}}function rHe(e){const t=eHe.get(e.tagName);t!=null&&(e.tagName=t,e.tagID=C_(e.tagName))}function iHe(e,t){return t===Me.MATHML&&(e===I.MI||e===I.MO||e===I.MN||e===I.MS||e===I.MTEXT)}function oHe(e,t,n){if(t===Me.MATHML&&e===I.ANNOTATION_XML){for(let r=0;r<n.length;r++)if(n[r].name===Lp.ENCODING){const i=n[r].value.toLowerCase();return i===pee.TEXT_HTML||i===pee.APPLICATION_XML}}return t===Me.SVG&&(e===I.FOREIGN_OBJECT||e===I.DESC||e===I.TITLE)}function sHe(e,t,n,r){return(!r||r===Me.HTML)&&oHe(e,t,n)||(!r||r===Me.MATHML)&&iHe(e,t)}const aHe="hidden",uHe=8,lHe=3;var ne;(function(e){e[e.INITIAL=0]="INITIAL",e[e.BEFORE_HTML=1]="BEFORE_HTML",e[e.BEFORE_HEAD=2]="BEFORE_HEAD",e[e.IN_HEAD=3]="IN_HEAD",e[e.IN_HEAD_NO_SCRIPT=4]="IN_HEAD_NO_SCRIPT",e[e.AFTER_HEAD=5]="AFTER_HEAD",e[e.IN_BODY=6]="IN_BODY",e[e.TEXT=7]="TEXT",e[e.IN_TABLE=8]="IN_TABLE",e[e.IN_TABLE_TEXT=9]="IN_TABLE_TEXT",e[e.IN_CAPTION=10]="IN_CAPTION",e[e.IN_COLUMN_GROUP=11]="IN_COLUMN_GROUP",e[e.IN_TABLE_BODY=12]="IN_TABLE_BODY",e[e.IN_ROW=13]="IN_ROW",e[e.IN_CELL=14]="IN_CELL",e[e.IN_SELECT=15]="IN_SELECT",e[e.IN_SELECT_IN_TABLE=16]="IN_SELECT_IN_TABLE",e[e.IN_TEMPLATE=17]="IN_TEMPLATE",e[e.AFTER_BODY=18]="AFTER_BODY",e[e.IN_FRAMESET=19]="IN_FRAMESET",e[e.AFTER_FRAMESET=20]="AFTER_FRAMESET",e[e.AFTER_AFTER_BODY=21]="AFTER_AFTER_BODY",e[e.AFTER_AFTER_FRAMESET=22]="AFTER_AFTER_FRAMESET"})(ne||(ne={}));const cHe={startLine:-1,startCol:-1,startOffset:-1,endLine:-1,endCol:-1,endOffset:-1},zme=new Set([I.TABLE,I.TBODY,I.TFOOT,I.THEAD,I.TR]),mee={scriptingEnabled:!0,sourceCodeLocationInfo:!1,treeAdapter:Fv,onParseError:null};class gee{constructor(t,n,r=null,i=null){this.fragmentContext=r,this.scriptHandler=i,this.currentToken=null,this.stopped=!1,this.insertionMode=ne.INITIAL,this.originalInsertionMode=ne.INITIAL,this.headElement=null,this.formElement=null,this.currentNotInHTML=!1,this.tmplInsertionModeStack=[],this.pendingCharacterTokens=[],this.hasNonWhitespacePendingCharacterToken=!1,this.framesetOk=!0,this.skipNextNewLine=!1,this.fosterParentingEnabled=!1,this.options={...mee,...t},this.treeAdapter=this.options.treeAdapter,this.onParseError=this.options.onParseError,this.onParseError&&(this.options.sourceCodeLocationInfo=!0),this.document=n??this.treeAdapter.createDocument(),this.tokenizer=new $Ve(this.options,this),this.activeFormattingElements=new zVe(this.treeAdapter),this.fragmentContextID=r?C_(this.treeAdapter.getTagName(r)):I.UNKNOWN,this._setContextModes(r??this.document,this.fragmentContextID),this.openElements=new UVe(this.document,this.treeAdapter,this)}static parse(t,n){const r=new this(n);return r.tokenizer.write(t,!0),r.document}static getFragmentParser(t,n){const r={...mee,...n};t??(t=r.treeAdapter.createElement(ve.TEMPLATE,Me.HTML,[]));const i=r.treeAdapter.createElement("documentmock",Me.HTML,[]),o=new this(r,i,t);return o.fragmentContextID===I.TEMPLATE&&o.tmplInsertionModeStack.unshift(ne.IN_TEMPLATE),o._initTokenizerForFragmentParsing(),o._insertFakeRootElement(),o._resetInsertionMode(),o._findFormInFragmentContext(),o}getFragment(){const t=this.treeAdapter.getFirstChild(this.document),n=this.treeAdapter.createDocumentFragment();return this._adoptNodes(t,n),n}_err(t,n,r){var i;if(!this.onParseError)return;const o=(i=t.location)!==null&&i!==void 0?i:cHe,s={code:n,startLine:o.startLine,startCol:o.startCol,startOffset:o.startOffset,endLine:r?o.startLine:o.endLine,endCol:r?o.startCol:o.endCol,endOffset:r?o.startOffset:o.endOffset};this.onParseError(s)}onItemPush(t,n,r){var i,o;(o=(i=this.treeAdapter).onItemPush)===null||o===void 0||o.call(i,t),r&&this.openElements.stackTop>0&&this._setContextModes(t,n)}onItemPop(t,n){var r,i;if(this.options.sourceCodeLocationInfo&&this._setEndLocation(t,this.currentToken),(i=(r=this.treeAdapter).onItemPop)===null||i===void 0||i.call(r,t,this.openElements.current),n){let o,s;this.openElements.stackTop===0&&this.fragmentContext?(o=this.fragmentContext,s=this.fragmentContextID):{current:o,currentTagId:s}=this.openElements,this._setContextModes(o,s)}}_setContextModes(t,n){const r=t===this.document||this.treeAdapter.getNamespaceURI(t)===Me.HTML;this.currentNotInHTML=!r,this.tokenizer.inForeignNode=!r&&!this._isIntegrationPoint(n,t)}_switchToTextParsing(t,n){this._insertElement(t,Me.HTML),this.tokenizer.state=n,this.originalInsertionMode=this.insertionMode,this.insertionMode=ne.TEXT}switchToPlaintextParsing(){this.insertionMode=ne.TEXT,this.originalInsertionMode=ne.IN_BODY,this.tokenizer.state=bi.PLAINTEXT}_getAdjustedCurrentElement(){return this.openElements.stackTop===0&&this.fragmentContext?this.fragmentContext:this.openElements.current}_findFormInFragmentContext(){let t=this.fragmentContext;for(;t;){if(this.treeAdapter.getTagName(t)===ve.FORM){this.formElement=t;break}t=this.treeAdapter.getParentNode(t)}}_initTokenizerForFragmentParsing(){if(!(!this.fragmentContext||this.treeAdapter.getNamespaceURI(this.fragmentContext)!==Me.HTML))switch(this.fragmentContextID){case I.TITLE:case I.TEXTAREA:{this.tokenizer.state=bi.RCDATA;break}case I.STYLE:case I.XMP:case I.IFRAME:case I.NOEMBED:case I.NOFRAMES:case I.NOSCRIPT:{this.tokenizer.state=bi.RAWTEXT;break}case I.SCRIPT:{this.tokenizer.state=bi.SCRIPT_DATA;break}case I.PLAINTEXT:{this.tokenizer.state=bi.PLAINTEXT;break}}}_setDocumentType(t){const n=t.name||"",r=t.publicId||"",i=t.systemId||"";if(this.treeAdapter.setDocumentType(this.document,n,r,i),t.location){const s=this.treeAdapter.getChildNodes(this.document).find(a=>this.treeAdapter.isDocumentTypeNode(a));s&&this.treeAdapter.setNodeSourceCodeLocation(s,t.location)}}_attachElementToTree(t,n){if(this.options.sourceCodeLocationInfo){const r=n&&{...n,startTag:n};this.treeAdapter.setNodeSourceCodeLocation(t,r)}if(this._shouldFosterParentOnInsertion())this._fosterParentElement(t);else{const r=this.openElements.currentTmplContentOrNode;this.treeAdapter.appendChild(r,t)}}_appendElement(t,n){const r=this.treeAdapter.createElement(t.tagName,n,t.attrs);this._attachElementToTree(r,t.location)}_insertElement(t,n){const r=this.treeAdapter.createElement(t.tagName,n,t.attrs);this._attachElementToTree(r,t.location),this.openElements.push(r,t.tagID)}_insertFakeElement(t,n){const r=this.treeAdapter.createElement(t,Me.HTML,[]);this._attachElementToTree(r,null),this.openElements.push(r,n)}_insertTemplate(t){const n=this.treeAdapter.createElement(t.tagName,Me.HTML,t.attrs),r=this.treeAdapter.createDocumentFragment();this.treeAdapter.setTemplateContent(n,r),this._attachElementToTree(n,t.location),this.openElements.push(n,t.tagID),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(r,null)}_insertFakeRootElement(){const t=this.treeAdapter.createElement(ve.HTML,Me.HTML,[]);this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(t,null),this.treeAdapter.appendChild(this.openElements.current,t),this.openElements.push(t,I.HTML)}_appendCommentNode(t,n){const r=this.treeAdapter.createCommentNode(t.data);this.treeAdapter.appendChild(n,r),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(r,t.location)}_insertCharacters(t){let n,r;if(this._shouldFosterParentOnInsertion()?({parent:n,beforeElement:r}=this._findFosterParentingLocation(),r?this.treeAdapter.insertTextBefore(n,t.chars,r):this.treeAdapter.insertText(n,t.chars)):(n=this.openElements.currentTmplContentOrNode,this.treeAdapter.insertText(n,t.chars)),!t.location)return;const i=this.treeAdapter.getChildNodes(n),o=r?i.lastIndexOf(r):i.length,s=i[o-1];if(this.treeAdapter.getNodeSourceCodeLocation(s)){const{endLine:u,endCol:l,endOffset:c}=t.location;this.treeAdapter.updateNodeSourceCodeLocation(s,{endLine:u,endCol:l,endOffset:c})}else this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(s,t.location)}_adoptNodes(t,n){for(let r=this.treeAdapter.getFirstChild(t);r;r=this.treeAdapter.getFirstChild(t))this.treeAdapter.detachNode(r),this.treeAdapter.appendChild(n,r)}_setEndLocation(t,n){if(this.treeAdapter.getNodeSourceCodeLocation(t)&&n.location){const r=n.location,i=this.treeAdapter.getTagName(t),o=n.type===ln.END_TAG&&i===n.tagName?{endTag:{...r},endLine:r.endLine,endCol:r.endCol,endOffset:r.endOffset}:{endLine:r.startLine,endCol:r.startCol,endOffset:r.startOffset};this.treeAdapter.updateNodeSourceCodeLocation(t,o)}}shouldProcessStartTagTokenInForeignContent(t){if(!this.currentNotInHTML)return!1;let n,r;return this.openElements.stackTop===0&&this.fragmentContext?(n=this.fragmentContext,r=this.fragmentContextID):{current:n,currentTagId:r}=this.openElements,t.tagID===I.SVG&&this.treeAdapter.getTagName(n)===ve.ANNOTATION_XML&&this.treeAdapter.getNamespaceURI(n)===Me.MATHML?!1:this.tokenizer.inForeignNode||(t.tagID===I.MGLYPH||t.tagID===I.MALIGNMARK)&&!this._isIntegrationPoint(r,n,Me.HTML)}_processToken(t){switch(t.type){case ln.CHARACTER:{this.onCharacter(t);break}case ln.NULL_CHARACTER:{this.onNullCharacter(t);break}case ln.COMMENT:{this.onComment(t);break}case ln.DOCTYPE:{this.onDoctype(t);break}case ln.START_TAG:{this._processStartTag(t);break}case ln.END_TAG:{this.onEndTag(t);break}case ln.EOF:{this.onEof(t);break}case ln.WHITESPACE_CHARACTER:{this.onWhitespaceCharacter(t);break}}}_isIntegrationPoint(t,n,r){const i=this.treeAdapter.getNamespaceURI(n),o=this.treeAdapter.getAttrList(n);return sHe(t,i,o,r)}_reconstructActiveFormattingElements(){const t=this.activeFormattingElements.entries.length;if(t){const n=this.activeFormattingElements.entries.findIndex(i=>i.type===Fl.Marker||this.openElements.contains(i.element)),r=n<0?t-1:n-1;for(let i=r;i>=0;i--){const o=this.activeFormattingElements.entries[i];this._insertElement(o.token,this.treeAdapter.getNamespaceURI(o.element)),o.element=this.openElements.current}}}_closeTableCell(){this.openElements.generateImpliedEndTags(),this.openElements.popUntilTableCellPopped(),this.activeFormattingElements.clearToLastMarker(),this.insertionMode=ne.IN_ROW}_closePElement(){this.openElements.generateImpliedEndTagsWithExclusion(I.P),this.openElements.popUntilTagNamePopped(I.P)}_resetInsertionMode(){for(let t=this.openElements.stackTop;t>=0;t--)switch(t===0&&this.fragmentContext?this.fragmentContextID:this.openElements.tagIDs[t]){case I.TR:{this.insertionMode=ne.IN_ROW;return}case I.TBODY:case I.THEAD:case I.TFOOT:{this.insertionMode=ne.IN_TABLE_BODY;return}case I.CAPTION:{this.insertionMode=ne.IN_CAPTION;return}case I.COLGROUP:{this.insertionMode=ne.IN_COLUMN_GROUP;return}case I.TABLE:{this.insertionMode=ne.IN_TABLE;return}case I.BODY:{this.insertionMode=ne.IN_BODY;return}case I.FRAMESET:{this.insertionMode=ne.IN_FRAMESET;return}case I.SELECT:{this._resetInsertionModeForSelect(t);return}case I.TEMPLATE:{this.insertionMode=this.tmplInsertionModeStack[0];return}case I.HTML:{this.insertionMode=this.headElement?ne.AFTER_HEAD:ne.BEFORE_HEAD;return}case I.TD:case I.TH:{if(t>0){this.insertionMode=ne.IN_CELL;return}break}case I.HEAD:{if(t>0){this.insertionMode=ne.IN_HEAD;return}break}}this.insertionMode=ne.IN_BODY}_resetInsertionModeForSelect(t){if(t>0)for(let n=t-1;n>0;n--){const r=this.openElements.tagIDs[n];if(r===I.TEMPLATE)break;if(r===I.TABLE){this.insertionMode=ne.IN_SELECT_IN_TABLE;return}}this.insertionMode=ne.IN_SELECT}_isElementCausesFosterParenting(t){return zme.has(t)}_shouldFosterParentOnInsertion(){return this.fosterParentingEnabled&&this._isElementCausesFosterParenting(this.openElements.currentTagId)}_findFosterParentingLocation(){for(let t=this.openElements.stackTop;t>=0;t--){const n=this.openElements.items[t];switch(this.openElements.tagIDs[t]){case I.TEMPLATE:{if(this.treeAdapter.getNamespaceURI(n)===Me.HTML)return{parent:this.treeAdapter.getTemplateContent(n),beforeElement:null};break}case I.TABLE:{const r=this.treeAdapter.getParentNode(n);return r?{parent:r,beforeElement:n}:{parent:this.openElements.items[t-1],beforeElement:null}}}}return{parent:this.openElements.items[0],beforeElement:null}}_fosterParentElement(t){const n=this._findFosterParentingLocation();n.beforeElement?this.treeAdapter.insertBefore(n.parent,t,n.beforeElement):this.treeAdapter.appendChild(n.parent,t)}_isSpecialElement(t,n){const r=this.treeAdapter.getNamespaceURI(t);return RVe[r].has(n)}onCharacter(t){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){Bqe(this,t);return}switch(this.insertionMode){case ne.INITIAL:{Nw(this,t);break}case ne.BEFORE_HTML:{yx(this,t);break}case ne.BEFORE_HEAD:{vx(this,t);break}case ne.IN_HEAD:{bx(this,t);break}case ne.IN_HEAD_NO_SCRIPT:{_x(this,t);break}case ne.AFTER_HEAD:{wx(this,t);break}case ne.IN_BODY:case ne.IN_CAPTION:case ne.IN_CELL:case ne.IN_TEMPLATE:{Hme(this,t);break}case ne.TEXT:case ne.IN_SELECT:case ne.IN_SELECT_IN_TABLE:{this._insertCharacters(t);break}case ne.IN_TABLE:case ne.IN_TABLE_BODY:case ne.IN_ROW:{AL(this,t);break}case ne.IN_TABLE_TEXT:{Xme(this,t);break}case ne.IN_COLUMN_GROUP:{mR(this,t);break}case ne.AFTER_BODY:{gR(this,t);break}case ne.AFTER_AFTER_BODY:{Lk(this,t);break}}}onNullCharacter(t){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){jqe(this,t);return}switch(this.insertionMode){case ne.INITIAL:{Nw(this,t);break}case ne.BEFORE_HTML:{yx(this,t);break}case ne.BEFORE_HEAD:{vx(this,t);break}case ne.IN_HEAD:{bx(this,t);break}case ne.IN_HEAD_NO_SCRIPT:{_x(this,t);break}case ne.AFTER_HEAD:{wx(this,t);break}case ne.TEXT:{this._insertCharacters(t);break}case ne.IN_TABLE:case ne.IN_TABLE_BODY:case ne.IN_ROW:{AL(this,t);break}case ne.IN_COLUMN_GROUP:{mR(this,t);break}case ne.AFTER_BODY:{gR(this,t);break}case ne.AFTER_AFTER_BODY:{Lk(this,t);break}}}onComment(t){if(this.skipNextNewLine=!1,this.currentNotInHTML){T5(this,t);return}switch(this.insertionMode){case ne.INITIAL:case ne.BEFORE_HTML:case ne.BEFORE_HEAD:case ne.IN_HEAD:case ne.IN_HEAD_NO_SCRIPT:case ne.AFTER_HEAD:case ne.IN_BODY:case ne.IN_TABLE:case ne.IN_CAPTION:case ne.IN_COLUMN_GROUP:case ne.IN_TABLE_BODY:case ne.IN_ROW:case ne.IN_CELL:case ne.IN_SELECT:case ne.IN_SELECT_IN_TABLE:case ne.IN_TEMPLATE:case ne.IN_FRAMESET:case ne.AFTER_FRAMESET:{T5(this,t);break}case ne.IN_TABLE_TEXT:{Pw(this,t);break}case ne.AFTER_BODY:{yHe(this,t);break}case ne.AFTER_AFTER_BODY:case ne.AFTER_AFTER_FRAMESET:{vHe(this,t);break}}}onDoctype(t){switch(this.skipNextNewLine=!1,this.insertionMode){case ne.INITIAL:{bHe(this,t);break}case ne.BEFORE_HEAD:case ne.IN_HEAD:case ne.IN_HEAD_NO_SCRIPT:case ne.AFTER_HEAD:{this._err(t,Ae.misplacedDoctype);break}case ne.IN_TABLE_TEXT:{Pw(this,t);break}}}onStartTag(t){this.skipNextNewLine=!1,this.currentToken=t,this._processStartTag(t),t.selfClosing&&!t.ackSelfClosing&&this._err(t,Ae.nonVoidHtmlElementStartTagWithTrailingSolidus)}_processStartTag(t){this.shouldProcessStartTagTokenInForeignContent(t)?Uqe(this,t):this._startTagOutsideForeignContent(t)}_startTagOutsideForeignContent(t){switch(this.insertionMode){case ne.INITIAL:{Nw(this,t);break}case ne.BEFORE_HTML:{_He(this,t);break}case ne.BEFORE_HEAD:{EHe(this,t);break}case ne.IN_HEAD:{mc(this,t);break}case ne.IN_HEAD_NO_SCRIPT:{SHe(this,t);break}case ne.AFTER_HEAD:{AHe(this,t);break}case ne.IN_BODY:{xs(this,t);break}case ne.IN_TABLE:{cb(this,t);break}case ne.IN_TABLE_TEXT:{Pw(this,t);break}case ne.IN_CAPTION:{xqe(this,t);break}case ne.IN_COLUMN_GROUP:{xz(this,t);break}case ne.IN_TABLE_BODY:{eO(this,t);break}case ne.IN_ROW:{tO(this,t);break}case ne.IN_CELL:{Cqe(this,t);break}case ne.IN_SELECT:{Zme(this,t);break}case ne.IN_SELECT_IN_TABLE:{kqe(this,t);break}case ne.IN_TEMPLATE:{Rqe(this,t);break}case ne.AFTER_BODY:{Pqe(this,t);break}case ne.IN_FRAMESET:{Dqe(this,t);break}case ne.AFTER_FRAMESET:{$qe(this,t);break}case ne.AFTER_AFTER_BODY:{Lqe(this,t);break}case ne.AFTER_AFTER_FRAMESET:{Fqe(this,t);break}}}onEndTag(t){this.skipNextNewLine=!1,this.currentToken=t,this.currentNotInHTML?zqe(this,t):this._endTagOutsideForeignContent(t)}_endTagOutsideForeignContent(t){switch(this.insertionMode){case ne.INITIAL:{Nw(this,t);break}case ne.BEFORE_HTML:{wHe(this,t);break}case ne.BEFORE_HEAD:{xHe(this,t);break}case ne.IN_HEAD:{THe(this,t);break}case ne.IN_HEAD_NO_SCRIPT:{CHe(this,t);break}case ne.AFTER_HEAD:{kHe(this,t);break}case ne.IN_BODY:{ZD(this,t);break}case ne.TEXT:{hqe(this,t);break}case ne.IN_TABLE:{NT(this,t);break}case ne.IN_TABLE_TEXT:{Pw(this,t);break}case ne.IN_CAPTION:{Tqe(this,t);break}case ne.IN_COLUMN_GROUP:{Sqe(this,t);break}case ne.IN_TABLE_BODY:{S5(this,t);break}case ne.IN_ROW:{Jme(this,t);break}case ne.IN_CELL:{Aqe(this,t);break}case ne.IN_SELECT:{ege(this,t);break}case ne.IN_SELECT_IN_TABLE:{Iqe(this,t);break}case ne.IN_TEMPLATE:{Nqe(this,t);break}case ne.AFTER_BODY:{nge(this,t);break}case ne.IN_FRAMESET:{Oqe(this,t);break}case ne.AFTER_FRAMESET:{Mqe(this,t);break}case ne.AFTER_AFTER_BODY:{Lk(this,t);break}}}onEof(t){switch(this.insertionMode){case ne.INITIAL:{Nw(this,t);break}case ne.BEFORE_HTML:{yx(this,t);break}case ne.BEFORE_HEAD:{vx(this,t);break}case ne.IN_HEAD:{bx(this,t);break}case ne.IN_HEAD_NO_SCRIPT:{_x(this,t);break}case ne.AFTER_HEAD:{wx(this,t);break}case ne.IN_BODY:case ne.IN_TABLE:case ne.IN_CAPTION:case ne.IN_COLUMN_GROUP:case ne.IN_TABLE_BODY:case ne.IN_ROW:case ne.IN_CELL:case ne.IN_SELECT:case ne.IN_SELECT_IN_TABLE:{Yme(this,t);break}case ne.TEXT:{pqe(this,t);break}case ne.IN_TABLE_TEXT:{Pw(this,t);break}case ne.IN_TEMPLATE:{tge(this,t);break}case ne.AFTER_BODY:case ne.IN_FRAMESET:case ne.AFTER_FRAMESET:case ne.AFTER_AFTER_BODY:case ne.AFTER_AFTER_FRAMESET:{Ez(this,t);break}}}onWhitespaceCharacter(t){if(this.skipNextNewLine&&(this.skipNextNewLine=!1,t.chars.charCodeAt(0)===K.LINE_FEED)){if(t.chars.length===1)return;t.chars=t.chars.substr(1)}if(this.tokenizer.inForeignNode){this._insertCharacters(t);return}switch(this.insertionMode){case ne.IN_HEAD:case ne.IN_HEAD_NO_SCRIPT:case ne.AFTER_HEAD:case ne.TEXT:case ne.IN_COLUMN_GROUP:case ne.IN_SELECT:case ne.IN_SELECT_IN_TABLE:case ne.IN_FRAMESET:case ne.AFTER_FRAMESET:{this._insertCharacters(t);break}case ne.IN_BODY:case ne.IN_CAPTION:case ne.IN_CELL:case ne.IN_TEMPLATE:case ne.AFTER_BODY:case ne.AFTER_AFTER_BODY:case ne.AFTER_AFTER_FRAMESET:{Vme(this,t);break}case ne.IN_TABLE:case ne.IN_TABLE_BODY:case ne.IN_ROW:{AL(this,t);break}case ne.IN_TABLE_TEXT:{Kme(this,t);break}}}}function fHe(e,t){let n=e.activeFormattingElements.getElementEntryInScopeWithTagName(t.tagName);return n?e.openElements.contains(n.element)?e.openElements.hasInScope(t.tagID)||(n=null):(e.activeFormattingElements.removeEntry(n),n=null):Gme(e,t),n}function dHe(e,t){let n=null,r=e.openElements.stackTop;for(;r>=0;r--){const i=e.openElements.items[r];if(i===t.element)break;e._isSpecialElement(i,e.openElements.tagIDs[r])&&(n=i)}return n||(e.openElements.shortenToLength(r<0?0:r),e.activeFormattingElements.removeEntry(t)),n}function hHe(e,t,n){let r=t,i=e.openElements.getCommonAncestor(t);for(let o=0,s=i;s!==n;o++,s=i){i=e.openElements.getCommonAncestor(s);const a=e.activeFormattingElements.getElementEntry(s),u=a&&o>=lHe;!a||u?(u&&e.activeFormattingElements.removeEntry(a),e.openElements.remove(s)):(s=pHe(e,a),r===t&&(e.activeFormattingElements.bookmark=a),e.treeAdapter.detachNode(r),e.treeAdapter.appendChild(s,r),r=s)}return r}function pHe(e,t){const n=e.treeAdapter.getNamespaceURI(t.element),r=e.treeAdapter.createElement(t.token.tagName,n,t.token.attrs);return e.openElements.replace(t.element,r),t.element=r,r}function mHe(e,t,n){const r=e.treeAdapter.getTagName(t),i=C_(r);if(e._isElementCausesFosterParenting(i))e._fosterParentElement(n);else{const o=e.treeAdapter.getNamespaceURI(t);i===I.TEMPLATE&&o===Me.HTML&&(t=e.treeAdapter.getTemplateContent(t)),e.treeAdapter.appendChild(t,n)}}function gHe(e,t,n){const r=e.treeAdapter.getNamespaceURI(n.element),{token:i}=n,o=e.treeAdapter.createElement(i.tagName,r,i.attrs);e._adoptNodes(t,o),e.treeAdapter.appendChild(t,o),e.activeFormattingElements.insertElementAfterBookmark(o,i),e.activeFormattingElements.removeEntry(n),e.openElements.remove(n.element),e.openElements.insertAfter(t,o,i.tagID)}function wz(e,t){for(let n=0;n<uHe;n++){const r=fHe(e,t);if(!r)break;const i=dHe(e,r);if(!i)break;e.activeFormattingElements.bookmark=r;const o=hHe(e,i,r.element),s=e.openElements.getCommonAncestor(r.element);e.treeAdapter.detachNode(o),s&&mHe(e,s,o),gHe(e,i,r)}}function T5(e,t){e._appendCommentNode(t,e.openElements.currentTmplContentOrNode)}function yHe(e,t){e._appendCommentNode(t,e.openElements.items[0])}function vHe(e,t){e._appendCommentNode(t,e.document)}function Ez(e,t){if(e.stopped=!0,t.location){const n=e.fragmentContext?0:2;for(let r=e.openElements.stackTop;r>=n;r--)e._setEndLocation(e.openElements.items[r],t);if(!e.fragmentContext&&e.openElements.stackTop>=0){const r=e.openElements.items[0],i=e.treeAdapter.getNodeSourceCodeLocation(r);if(i&&!i.endTag&&(e._setEndLocation(r,t),e.openElements.stackTop>=1)){const o=e.openElements.items[1],s=e.treeAdapter.getNodeSourceCodeLocation(o);s&&!s.endTag&&e._setEndLocation(o,t)}}}}function bHe(e,t){e._setDocumentType(t);const n=t.forceQuirks?Ja.QUIRKS:KVe(t);YVe(t)||e._err(t,Ae.nonConformingDoctype),e.treeAdapter.setDocumentMode(e.document,n),e.insertionMode=ne.BEFORE_HTML}function Nw(e,t){e._err(t,Ae.missingDoctype,!0),e.treeAdapter.setDocumentMode(e.document,Ja.QUIRKS),e.insertionMode=ne.BEFORE_HTML,e._processToken(t)}function _He(e,t){t.tagID===I.HTML?(e._insertElement(t,Me.HTML),e.insertionMode=ne.BEFORE_HEAD):yx(e,t)}function wHe(e,t){const n=t.tagID;(n===I.HTML||n===I.HEAD||n===I.BODY||n===I.BR)&&yx(e,t)}function yx(e,t){e._insertFakeRootElement(),e.insertionMode=ne.BEFORE_HEAD,e._processToken(t)}function EHe(e,t){switch(t.tagID){case I.HTML:{xs(e,t);break}case I.HEAD:{e._insertElement(t,Me.HTML),e.headElement=e.openElements.current,e.insertionMode=ne.IN_HEAD;break}default:vx(e,t)}}function xHe(e,t){const n=t.tagID;n===I.HEAD||n===I.BODY||n===I.HTML||n===I.BR?vx(e,t):e._err(t,Ae.endTagWithoutMatchingOpenElement)}function vx(e,t){e._insertFakeElement(ve.HEAD,I.HEAD),e.headElement=e.openElements.current,e.insertionMode=ne.IN_HEAD,e._processToken(t)}function mc(e,t){switch(t.tagID){case I.HTML:{xs(e,t);break}case I.BASE:case I.BASEFONT:case I.BGSOUND:case I.LINK:case I.META:{e._appendElement(t,Me.HTML),t.ackSelfClosing=!0;break}case I.TITLE:{e._switchToTextParsing(t,bi.RCDATA);break}case I.NOSCRIPT:{e.options.scriptingEnabled?e._switchToTextParsing(t,bi.RAWTEXT):(e._insertElement(t,Me.HTML),e.insertionMode=ne.IN_HEAD_NO_SCRIPT);break}case I.NOFRAMES:case I.STYLE:{e._switchToTextParsing(t,bi.RAWTEXT);break}case I.SCRIPT:{e._switchToTextParsing(t,bi.SCRIPT_DATA);break}case I.TEMPLATE:{e._insertTemplate(t),e.activeFormattingElements.insertMarker(),e.framesetOk=!1,e.insertionMode=ne.IN_TEMPLATE,e.tmplInsertionModeStack.unshift(ne.IN_TEMPLATE);break}case I.HEAD:{e._err(t,Ae.misplacedStartTagForHeadElement);break}default:bx(e,t)}}function THe(e,t){switch(t.tagID){case I.HEAD:{e.openElements.pop(),e.insertionMode=ne.AFTER_HEAD;break}case I.BODY:case I.BR:case I.HTML:{bx(e,t);break}case I.TEMPLATE:{Ry(e,t);break}default:e._err(t,Ae.endTagWithoutMatchingOpenElement)}}function Ry(e,t){e.openElements.tmplCount>0?(e.openElements.generateImpliedEndTagsThoroughly(),e.openElements.currentTagId!==I.TEMPLATE&&e._err(t,Ae.closingOfElementWithOpenChildElements),e.openElements.popUntilTagNamePopped(I.TEMPLATE),e.activeFormattingElements.clearToLastMarker(),e.tmplInsertionModeStack.shift(),e._resetInsertionMode()):e._err(t,Ae.endTagWithoutMatchingOpenElement)}function bx(e,t){e.openElements.pop(),e.insertionMode=ne.AFTER_HEAD,e._processToken(t)}function SHe(e,t){switch(t.tagID){case I.HTML:{xs(e,t);break}case I.BASEFONT:case I.BGSOUND:case I.HEAD:case I.LINK:case I.META:case I.NOFRAMES:case I.STYLE:{mc(e,t);break}case I.NOSCRIPT:{e._err(t,Ae.nestedNoscriptInHead);break}default:_x(e,t)}}function CHe(e,t){switch(t.tagID){case I.NOSCRIPT:{e.openElements.pop(),e.insertionMode=ne.IN_HEAD;break}case I.BR:{_x(e,t);break}default:e._err(t,Ae.endTagWithoutMatchingOpenElement)}}function _x(e,t){const n=t.type===ln.EOF?Ae.openElementsLeftAfterEof:Ae.disallowedContentInNoscriptInHead;e._err(t,n),e.openElements.pop(),e.insertionMode=ne.IN_HEAD,e._processToken(t)}function AHe(e,t){switch(t.tagID){case I.HTML:{xs(e,t);break}case I.BODY:{e._insertElement(t,Me.HTML),e.framesetOk=!1,e.insertionMode=ne.IN_BODY;break}case I.FRAMESET:{e._insertElement(t,Me.HTML),e.insertionMode=ne.IN_FRAMESET;break}case I.BASE:case I.BASEFONT:case I.BGSOUND:case I.LINK:case I.META:case I.NOFRAMES:case I.SCRIPT:case I.STYLE:case I.TEMPLATE:case I.TITLE:{e._err(t,Ae.abandonedHeadElementChild),e.openElements.push(e.headElement,I.HEAD),mc(e,t),e.openElements.remove(e.headElement);break}case I.HEAD:{e._err(t,Ae.misplacedStartTagForHeadElement);break}default:wx(e,t)}}function kHe(e,t){switch(t.tagID){case I.BODY:case I.HTML:case I.BR:{wx(e,t);break}case I.TEMPLATE:{Ry(e,t);break}default:e._err(t,Ae.endTagWithoutMatchingOpenElement)}}function wx(e,t){e._insertFakeElement(ve.BODY,I.BODY),e.insertionMode=ne.IN_BODY,JD(e,t)}function JD(e,t){switch(t.type){case ln.CHARACTER:{Hme(e,t);break}case ln.WHITESPACE_CHARACTER:{Vme(e,t);break}case ln.COMMENT:{T5(e,t);break}case ln.START_TAG:{xs(e,t);break}case ln.END_TAG:{ZD(e,t);break}case ln.EOF:{Yme(e,t);break}}}function Vme(e,t){e._reconstructActiveFormattingElements(),e._insertCharacters(t)}function Hme(e,t){e._reconstructActiveFormattingElements(),e._insertCharacters(t),e.framesetOk=!1}function IHe(e,t){e.openElements.tmplCount===0&&e.treeAdapter.adoptAttributes(e.openElements.items[0],t.attrs)}function RHe(e,t){const n=e.openElements.tryPeekProperlyNestedBodyElement();n&&e.openElements.tmplCount===0&&(e.framesetOk=!1,e.treeAdapter.adoptAttributes(n,t.attrs))}function NHe(e,t){const n=e.openElements.tryPeekProperlyNestedBodyElement();e.framesetOk&&n&&(e.treeAdapter.detachNode(n),e.openElements.popAllUpToHtmlElement(),e._insertElement(t,Me.HTML),e.insertionMode=ne.IN_FRAMESET)}function PHe(e,t){e.openElements.hasInButtonScope(I.P)&&e._closePElement(),e._insertElement(t,Me.HTML)}function DHe(e,t){e.openElements.hasInButtonScope(I.P)&&e._closePElement(),Pme(e.openElements.currentTagId)&&e.openElements.pop(),e._insertElement(t,Me.HTML)}function OHe(e,t){e.openElements.hasInButtonScope(I.P)&&e._closePElement(),e._insertElement(t,Me.HTML),e.skipNextNewLine=!0,e.framesetOk=!1}function $He(e,t){const n=e.openElements.tmplCount>0;(!e.formElement||n)&&(e.openElements.hasInButtonScope(I.P)&&e._closePElement(),e._insertElement(t,Me.HTML),n||(e.formElement=e.openElements.current))}function MHe(e,t){e.framesetOk=!1;const n=t.tagID;for(let r=e.openElements.stackTop;r>=0;r--){const i=e.openElements.tagIDs[r];if(n===I.LI&&i===I.LI||(n===I.DD||n===I.DT)&&(i===I.DD||i===I.DT)){e.openElements.generateImpliedEndTagsWithExclusion(i),e.openElements.popUntilTagNamePopped(i);break}if(i!==I.ADDRESS&&i!==I.DIV&&i!==I.P&&e._isSpecialElement(e.openElements.items[r],i))break}e.openElements.hasInButtonScope(I.P)&&e._closePElement(),e._insertElement(t,Me.HTML)}function LHe(e,t){e.openElements.hasInButtonScope(I.P)&&e._closePElement(),e._insertElement(t,Me.HTML),e.tokenizer.state=bi.PLAINTEXT}function FHe(e,t){e.openElements.hasInScope(I.BUTTON)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(I.BUTTON)),e._reconstructActiveFormattingElements(),e._insertElement(t,Me.HTML),e.framesetOk=!1}function jHe(e,t){const n=e.activeFormattingElements.getElementEntryInScopeWithTagName(ve.A);n&&(wz(e,t),e.openElements.remove(n.element),e.activeFormattingElements.removeEntry(n)),e._reconstructActiveFormattingElements(),e._insertElement(t,Me.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function BHe(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,Me.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function UHe(e,t){e._reconstructActiveFormattingElements(),e.openElements.hasInScope(I.NOBR)&&(wz(e,t),e._reconstructActiveFormattingElements()),e._insertElement(t,Me.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function zHe(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,Me.HTML),e.activeFormattingElements.insertMarker(),e.framesetOk=!1}function VHe(e,t){e.treeAdapter.getDocumentMode(e.document)!==Ja.QUIRKS&&e.openElements.hasInButtonScope(I.P)&&e._closePElement(),e._insertElement(t,Me.HTML),e.framesetOk=!1,e.insertionMode=ne.IN_TABLE}function qme(e,t){e._reconstructActiveFormattingElements(),e._appendElement(t,Me.HTML),e.framesetOk=!1,t.ackSelfClosing=!0}function Wme(e){const t=Ime(e,Lp.TYPE);return t!=null&&t.toLowerCase()===aHe}function HHe(e,t){e._reconstructActiveFormattingElements(),e._appendElement(t,Me.HTML),Wme(t)||(e.framesetOk=!1),t.ackSelfClosing=!0}function qHe(e,t){e._appendElement(t,Me.HTML),t.ackSelfClosing=!0}function WHe(e,t){e.openElements.hasInButtonScope(I.P)&&e._closePElement(),e._appendElement(t,Me.HTML),e.framesetOk=!1,t.ackSelfClosing=!0}function GHe(e,t){t.tagName=ve.IMG,t.tagID=I.IMG,qme(e,t)}function YHe(e,t){e._insertElement(t,Me.HTML),e.skipNextNewLine=!0,e.tokenizer.state=bi.RCDATA,e.originalInsertionMode=e.insertionMode,e.framesetOk=!1,e.insertionMode=ne.TEXT}function KHe(e,t){e.openElements.hasInButtonScope(I.P)&&e._closePElement(),e._reconstructActiveFormattingElements(),e.framesetOk=!1,e._switchToTextParsing(t,bi.RAWTEXT)}function XHe(e,t){e.framesetOk=!1,e._switchToTextParsing(t,bi.RAWTEXT)}function yee(e,t){e._switchToTextParsing(t,bi.RAWTEXT)}function QHe(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,Me.HTML),e.framesetOk=!1,e.insertionMode=e.insertionMode===ne.IN_TABLE||e.insertionMode===ne.IN_CAPTION||e.insertionMode===ne.IN_TABLE_BODY||e.insertionMode===ne.IN_ROW||e.insertionMode===ne.IN_CELL?ne.IN_SELECT_IN_TABLE:ne.IN_SELECT}function JHe(e,t){e.openElements.currentTagId===I.OPTION&&e.openElements.pop(),e._reconstructActiveFormattingElements(),e._insertElement(t,Me.HTML)}function ZHe(e,t){e.openElements.hasInScope(I.RUBY)&&e.openElements.generateImpliedEndTags(),e._insertElement(t,Me.HTML)}function eqe(e,t){e.openElements.hasInScope(I.RUBY)&&e.openElements.generateImpliedEndTagsWithExclusion(I.RTC),e._insertElement(t,Me.HTML)}function tqe(e,t){e._reconstructActiveFormattingElements(),Bme(t),_z(t),t.selfClosing?e._appendElement(t,Me.MATHML):e._insertElement(t,Me.MATHML),t.ackSelfClosing=!0}function nqe(e,t){e._reconstructActiveFormattingElements(),Ume(t),_z(t),t.selfClosing?e._appendElement(t,Me.SVG):e._insertElement(t,Me.SVG),t.ackSelfClosing=!0}function vee(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,Me.HTML)}function xs(e,t){switch(t.tagID){case I.I:case I.S:case I.B:case I.U:case I.EM:case I.TT:case I.BIG:case I.CODE:case I.FONT:case I.SMALL:case I.STRIKE:case I.STRONG:{BHe(e,t);break}case I.A:{jHe(e,t);break}case I.H1:case I.H2:case I.H3:case I.H4:case I.H5:case I.H6:{DHe(e,t);break}case I.P:case I.DL:case I.OL:case I.UL:case I.DIV:case I.DIR:case I.NAV:case I.MAIN:case I.MENU:case I.ASIDE:case I.CENTER:case I.FIGURE:case I.FOOTER:case I.HEADER:case I.HGROUP:case I.DIALOG:case I.DETAILS:case I.ADDRESS:case I.ARTICLE:case I.SECTION:case I.SUMMARY:case I.FIELDSET:case I.BLOCKQUOTE:case I.FIGCAPTION:{PHe(e,t);break}case I.LI:case I.DD:case I.DT:{MHe(e,t);break}case I.BR:case I.IMG:case I.WBR:case I.AREA:case I.EMBED:case I.KEYGEN:{qme(e,t);break}case I.HR:{WHe(e,t);break}case I.RB:case I.RTC:{ZHe(e,t);break}case I.RT:case I.RP:{eqe(e,t);break}case I.PRE:case I.LISTING:{OHe(e,t);break}case I.XMP:{KHe(e,t);break}case I.SVG:{nqe(e,t);break}case I.HTML:{IHe(e,t);break}case I.BASE:case I.LINK:case I.META:case I.STYLE:case I.TITLE:case I.SCRIPT:case I.BGSOUND:case I.BASEFONT:case I.TEMPLATE:{mc(e,t);break}case I.BODY:{RHe(e,t);break}case I.FORM:{$He(e,t);break}case I.NOBR:{UHe(e,t);break}case I.MATH:{tqe(e,t);break}case I.TABLE:{VHe(e,t);break}case I.INPUT:{HHe(e,t);break}case I.PARAM:case I.TRACK:case I.SOURCE:{qHe(e,t);break}case I.IMAGE:{GHe(e,t);break}case I.BUTTON:{FHe(e,t);break}case I.APPLET:case I.OBJECT:case I.MARQUEE:{zHe(e,t);break}case I.IFRAME:{XHe(e,t);break}case I.SELECT:{QHe(e,t);break}case I.OPTION:case I.OPTGROUP:{JHe(e,t);break}case I.NOEMBED:{yee(e,t);break}case I.FRAMESET:{NHe(e,t);break}case I.TEXTAREA:{YHe(e,t);break}case I.NOSCRIPT:{e.options.scriptingEnabled?yee(e,t):vee(e,t);break}case I.PLAINTEXT:{LHe(e,t);break}case I.COL:case I.TH:case I.TD:case I.TR:case I.HEAD:case I.FRAME:case I.TBODY:case I.TFOOT:case I.THEAD:case I.CAPTION:case I.COLGROUP:break;default:vee(e,t)}}function rqe(e,t){if(e.openElements.hasInScope(I.BODY)&&(e.insertionMode=ne.AFTER_BODY,e.options.sourceCodeLocationInfo)){const n=e.openElements.tryPeekProperlyNestedBodyElement();n&&e._setEndLocation(n,t)}}function iqe(e,t){e.openElements.hasInScope(I.BODY)&&(e.insertionMode=ne.AFTER_BODY,nge(e,t))}function oqe(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n))}function sqe(e){const t=e.openElements.tmplCount>0,{formElement:n}=e;t||(e.formElement=null),(n||t)&&e.openElements.hasInScope(I.FORM)&&(e.openElements.generateImpliedEndTags(),t?e.openElements.popUntilTagNamePopped(I.FORM):n&&e.openElements.remove(n))}function aqe(e){e.openElements.hasInButtonScope(I.P)||e._insertFakeElement(ve.P,I.P),e._closePElement()}function uqe(e){e.openElements.hasInListItemScope(I.LI)&&(e.openElements.generateImpliedEndTagsWithExclusion(I.LI),e.openElements.popUntilTagNamePopped(I.LI))}function lqe(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTagsWithExclusion(n),e.openElements.popUntilTagNamePopped(n))}function cqe(e){e.openElements.hasNumberedHeaderInScope()&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilNumberedHeaderPopped())}function fqe(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n),e.activeFormattingElements.clearToLastMarker())}function dqe(e){e._reconstructActiveFormattingElements(),e._insertFakeElement(ve.BR,I.BR),e.openElements.pop(),e.framesetOk=!1}function Gme(e,t){const n=t.tagName,r=t.tagID;for(let i=e.openElements.stackTop;i>0;i--){const o=e.openElements.items[i],s=e.openElements.tagIDs[i];if(r===s&&(r!==I.UNKNOWN||e.treeAdapter.getTagName(o)===n)){e.openElements.generateImpliedEndTagsWithExclusion(r),e.openElements.stackTop>=i&&e.openElements.shortenToLength(i);break}if(e._isSpecialElement(o,s))break}}function ZD(e,t){switch(t.tagID){case I.A:case I.B:case I.I:case I.S:case I.U:case I.EM:case I.TT:case I.BIG:case I.CODE:case I.FONT:case I.NOBR:case I.SMALL:case I.STRIKE:case I.STRONG:{wz(e,t);break}case I.P:{aqe(e);break}case I.DL:case I.UL:case I.OL:case I.DIR:case I.DIV:case I.NAV:case I.PRE:case I.MAIN:case I.MENU:case I.ASIDE:case I.BUTTON:case I.CENTER:case I.FIGURE:case I.FOOTER:case I.HEADER:case I.HGROUP:case I.DIALOG:case I.ADDRESS:case I.ARTICLE:case I.DETAILS:case I.SECTION:case I.SUMMARY:case I.LISTING:case I.FIELDSET:case I.BLOCKQUOTE:case I.FIGCAPTION:{oqe(e,t);break}case I.LI:{uqe(e);break}case I.DD:case I.DT:{lqe(e,t);break}case I.H1:case I.H2:case I.H3:case I.H4:case I.H5:case I.H6:{cqe(e);break}case I.BR:{dqe(e);break}case I.BODY:{rqe(e,t);break}case I.HTML:{iqe(e,t);break}case I.FORM:{sqe(e);break}case I.APPLET:case I.OBJECT:case I.MARQUEE:{fqe(e,t);break}case I.TEMPLATE:{Ry(e,t);break}default:Gme(e,t)}}function Yme(e,t){e.tmplInsertionModeStack.length>0?tge(e,t):Ez(e,t)}function hqe(e,t){var n;t.tagID===I.SCRIPT&&((n=e.scriptHandler)===null||n===void 0||n.call(e,e.openElements.current)),e.openElements.pop(),e.insertionMode=e.originalInsertionMode}function pqe(e,t){e._err(t,Ae.eofInElementThatCanContainOnlyText),e.openElements.pop(),e.insertionMode=e.originalInsertionMode,e.onEof(t)}function AL(e,t){if(zme.has(e.openElements.currentTagId))switch(e.pendingCharacterTokens.length=0,e.hasNonWhitespacePendingCharacterToken=!1,e.originalInsertionMode=e.insertionMode,e.insertionMode=ne.IN_TABLE_TEXT,t.type){case ln.CHARACTER:{Xme(e,t);break}case ln.WHITESPACE_CHARACTER:{Kme(e,t);break}}else rC(e,t)}function mqe(e,t){e.openElements.clearBackToTableContext(),e.activeFormattingElements.insertMarker(),e._insertElement(t,Me.HTML),e.insertionMode=ne.IN_CAPTION}function gqe(e,t){e.openElements.clearBackToTableContext(),e._insertElement(t,Me.HTML),e.insertionMode=ne.IN_COLUMN_GROUP}function yqe(e,t){e.openElements.clearBackToTableContext(),e._insertFakeElement(ve.COLGROUP,I.COLGROUP),e.insertionMode=ne.IN_COLUMN_GROUP,xz(e,t)}function vqe(e,t){e.openElements.clearBackToTableContext(),e._insertElement(t,Me.HTML),e.insertionMode=ne.IN_TABLE_BODY}function bqe(e,t){e.openElements.clearBackToTableContext(),e._insertFakeElement(ve.TBODY,I.TBODY),e.insertionMode=ne.IN_TABLE_BODY,eO(e,t)}function _qe(e,t){e.openElements.hasInTableScope(I.TABLE)&&(e.openElements.popUntilTagNamePopped(I.TABLE),e._resetInsertionMode(),e._processStartTag(t))}function wqe(e,t){Wme(t)?e._appendElement(t,Me.HTML):rC(e,t),t.ackSelfClosing=!0}function Eqe(e,t){!e.formElement&&e.openElements.tmplCount===0&&(e._insertElement(t,Me.HTML),e.formElement=e.openElements.current,e.openElements.pop())}function cb(e,t){switch(t.tagID){case I.TD:case I.TH:case I.TR:{bqe(e,t);break}case I.STYLE:case I.SCRIPT:case I.TEMPLATE:{mc(e,t);break}case I.COL:{yqe(e,t);break}case I.FORM:{Eqe(e,t);break}case I.TABLE:{_qe(e,t);break}case I.TBODY:case I.TFOOT:case I.THEAD:{vqe(e,t);break}case I.INPUT:{wqe(e,t);break}case I.CAPTION:{mqe(e,t);break}case I.COLGROUP:{gqe(e,t);break}default:rC(e,t)}}function NT(e,t){switch(t.tagID){case I.TABLE:{e.openElements.hasInTableScope(I.TABLE)&&(e.openElements.popUntilTagNamePopped(I.TABLE),e._resetInsertionMode());break}case I.TEMPLATE:{Ry(e,t);break}case I.BODY:case I.CAPTION:case I.COL:case I.COLGROUP:case I.HTML:case I.TBODY:case I.TD:case I.TFOOT:case I.TH:case I.THEAD:case I.TR:break;default:rC(e,t)}}function rC(e,t){const n=e.fosterParentingEnabled;e.fosterParentingEnabled=!0,JD(e,t),e.fosterParentingEnabled=n}function Kme(e,t){e.pendingCharacterTokens.push(t)}function Xme(e,t){e.pendingCharacterTokens.push(t),e.hasNonWhitespacePendingCharacterToken=!0}function Pw(e,t){let n=0;if(e.hasNonWhitespacePendingCharacterToken)for(;n<e.pendingCharacterTokens.length;n++)rC(e,e.pendingCharacterTokens[n]);else for(;n<e.pendingCharacterTokens.length;n++)e._insertCharacters(e.pendingCharacterTokens[n]);e.insertionMode=e.originalInsertionMode,e._processToken(t)}const Qme=new Set([I.CAPTION,I.COL,I.COLGROUP,I.TBODY,I.TD,I.TFOOT,I.TH,I.THEAD,I.TR]);function xqe(e,t){const n=t.tagID;Qme.has(n)?e.openElements.hasInTableScope(I.CAPTION)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(I.CAPTION),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=ne.IN_TABLE,cb(e,t)):xs(e,t)}function Tqe(e,t){const n=t.tagID;switch(n){case I.CAPTION:case I.TABLE:{e.openElements.hasInTableScope(I.CAPTION)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(I.CAPTION),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=ne.IN_TABLE,n===I.TABLE&&NT(e,t));break}case I.BODY:case I.COL:case I.COLGROUP:case I.HTML:case I.TBODY:case I.TD:case I.TFOOT:case I.TH:case I.THEAD:case I.TR:break;default:ZD(e,t)}}function xz(e,t){switch(t.tagID){case I.HTML:{xs(e,t);break}case I.COL:{e._appendElement(t,Me.HTML),t.ackSelfClosing=!0;break}case I.TEMPLATE:{mc(e,t);break}default:mR(e,t)}}function Sqe(e,t){switch(t.tagID){case I.COLGROUP:{e.openElements.currentTagId===I.COLGROUP&&(e.openElements.pop(),e.insertionMode=ne.IN_TABLE);break}case I.TEMPLATE:{Ry(e,t);break}case I.COL:break;default:mR(e,t)}}function mR(e,t){e.openElements.currentTagId===I.COLGROUP&&(e.openElements.pop(),e.insertionMode=ne.IN_TABLE,e._processToken(t))}function eO(e,t){switch(t.tagID){case I.TR:{e.openElements.clearBackToTableBodyContext(),e._insertElement(t,Me.HTML),e.insertionMode=ne.IN_ROW;break}case I.TH:case I.TD:{e.openElements.clearBackToTableBodyContext(),e._insertFakeElement(ve.TR,I.TR),e.insertionMode=ne.IN_ROW,tO(e,t);break}case I.CAPTION:case I.COL:case I.COLGROUP:case I.TBODY:case I.TFOOT:case I.THEAD:{e.openElements.hasTableBodyContextInTableScope()&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=ne.IN_TABLE,cb(e,t));break}default:cb(e,t)}}function S5(e,t){const n=t.tagID;switch(t.tagID){case I.TBODY:case I.TFOOT:case I.THEAD:{e.openElements.hasInTableScope(n)&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=ne.IN_TABLE);break}case I.TABLE:{e.openElements.hasTableBodyContextInTableScope()&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=ne.IN_TABLE,NT(e,t));break}case I.BODY:case I.CAPTION:case I.COL:case I.COLGROUP:case I.HTML:case I.TD:case I.TH:case I.TR:break;default:NT(e,t)}}function tO(e,t){switch(t.tagID){case I.TH:case I.TD:{e.openElements.clearBackToTableRowContext(),e._insertElement(t,Me.HTML),e.insertionMode=ne.IN_CELL,e.activeFormattingElements.insertMarker();break}case I.CAPTION:case I.COL:case I.COLGROUP:case I.TBODY:case I.TFOOT:case I.THEAD:case I.TR:{e.openElements.hasInTableScope(I.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=ne.IN_TABLE_BODY,eO(e,t));break}default:cb(e,t)}}function Jme(e,t){switch(t.tagID){case I.TR:{e.openElements.hasInTableScope(I.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=ne.IN_TABLE_BODY);break}case I.TABLE:{e.openElements.hasInTableScope(I.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=ne.IN_TABLE_BODY,S5(e,t));break}case I.TBODY:case I.TFOOT:case I.THEAD:{(e.openElements.hasInTableScope(t.tagID)||e.openElements.hasInTableScope(I.TR))&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=ne.IN_TABLE_BODY,S5(e,t));break}case I.BODY:case I.CAPTION:case I.COL:case I.COLGROUP:case I.HTML:case I.TD:case I.TH:break;default:NT(e,t)}}function Cqe(e,t){const n=t.tagID;Qme.has(n)?(e.openElements.hasInTableScope(I.TD)||e.openElements.hasInTableScope(I.TH))&&(e._closeTableCell(),tO(e,t)):xs(e,t)}function Aqe(e,t){const n=t.tagID;switch(n){case I.TD:case I.TH:{e.openElements.hasInTableScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=ne.IN_ROW);break}case I.TABLE:case I.TBODY:case I.TFOOT:case I.THEAD:case I.TR:{e.openElements.hasInTableScope(n)&&(e._closeTableCell(),Jme(e,t));break}case I.BODY:case I.CAPTION:case I.COL:case I.COLGROUP:case I.HTML:break;default:ZD(e,t)}}function Zme(e,t){switch(t.tagID){case I.HTML:{xs(e,t);break}case I.OPTION:{e.openElements.currentTagId===I.OPTION&&e.openElements.pop(),e._insertElement(t,Me.HTML);break}case I.OPTGROUP:{e.openElements.currentTagId===I.OPTION&&e.openElements.pop(),e.openElements.currentTagId===I.OPTGROUP&&e.openElements.pop(),e._insertElement(t,Me.HTML);break}case I.INPUT:case I.KEYGEN:case I.TEXTAREA:case I.SELECT:{e.openElements.hasInSelectScope(I.SELECT)&&(e.openElements.popUntilTagNamePopped(I.SELECT),e._resetInsertionMode(),t.tagID!==I.SELECT&&e._processStartTag(t));break}case I.SCRIPT:case I.TEMPLATE:{mc(e,t);break}}}function ege(e,t){switch(t.tagID){case I.OPTGROUP:{e.openElements.stackTop>0&&e.openElements.currentTagId===I.OPTION&&e.openElements.tagIDs[e.openElements.stackTop-1]===I.OPTGROUP&&e.openElements.pop(),e.openElements.currentTagId===I.OPTGROUP&&e.openElements.pop();break}case I.OPTION:{e.openElements.currentTagId===I.OPTION&&e.openElements.pop();break}case I.SELECT:{e.openElements.hasInSelectScope(I.SELECT)&&(e.openElements.popUntilTagNamePopped(I.SELECT),e._resetInsertionMode());break}case I.TEMPLATE:{Ry(e,t);break}}}function kqe(e,t){const n=t.tagID;n===I.CAPTION||n===I.TABLE||n===I.TBODY||n===I.TFOOT||n===I.THEAD||n===I.TR||n===I.TD||n===I.TH?(e.openElements.popUntilTagNamePopped(I.SELECT),e._resetInsertionMode(),e._processStartTag(t)):Zme(e,t)}function Iqe(e,t){const n=t.tagID;n===I.CAPTION||n===I.TABLE||n===I.TBODY||n===I.TFOOT||n===I.THEAD||n===I.TR||n===I.TD||n===I.TH?e.openElements.hasInTableScope(n)&&(e.openElements.popUntilTagNamePopped(I.SELECT),e._resetInsertionMode(),e.onEndTag(t)):ege(e,t)}function Rqe(e,t){switch(t.tagID){case I.BASE:case I.BASEFONT:case I.BGSOUND:case I.LINK:case I.META:case I.NOFRAMES:case I.SCRIPT:case I.STYLE:case I.TEMPLATE:case I.TITLE:{mc(e,t);break}case I.CAPTION:case I.COLGROUP:case I.TBODY:case I.TFOOT:case I.THEAD:{e.tmplInsertionModeStack[0]=ne.IN_TABLE,e.insertionMode=ne.IN_TABLE,cb(e,t);break}case I.COL:{e.tmplInsertionModeStack[0]=ne.IN_COLUMN_GROUP,e.insertionMode=ne.IN_COLUMN_GROUP,xz(e,t);break}case I.TR:{e.tmplInsertionModeStack[0]=ne.IN_TABLE_BODY,e.insertionMode=ne.IN_TABLE_BODY,eO(e,t);break}case I.TD:case I.TH:{e.tmplInsertionModeStack[0]=ne.IN_ROW,e.insertionMode=ne.IN_ROW,tO(e,t);break}default:e.tmplInsertionModeStack[0]=ne.IN_BODY,e.insertionMode=ne.IN_BODY,xs(e,t)}}function Nqe(e,t){t.tagID===I.TEMPLATE&&Ry(e,t)}function tge(e,t){e.openElements.tmplCount>0?(e.openElements.popUntilTagNamePopped(I.TEMPLATE),e.activeFormattingElements.clearToLastMarker(),e.tmplInsertionModeStack.shift(),e._resetInsertionMode(),e.onEof(t)):Ez(e,t)}function Pqe(e,t){t.tagID===I.HTML?xs(e,t):gR(e,t)}function nge(e,t){var n;if(t.tagID===I.HTML){if(e.fragmentContext||(e.insertionMode=ne.AFTER_AFTER_BODY),e.options.sourceCodeLocationInfo&&e.openElements.tagIDs[0]===I.HTML){e._setEndLocation(e.openElements.items[0],t);const r=e.openElements.items[1];r&&!(!((n=e.treeAdapter.getNodeSourceCodeLocation(r))===null||n===void 0)&&n.endTag)&&e._setEndLocation(r,t)}}else gR(e,t)}function gR(e,t){e.insertionMode=ne.IN_BODY,JD(e,t)}function Dqe(e,t){switch(t.tagID){case I.HTML:{xs(e,t);break}case I.FRAMESET:{e._insertElement(t,Me.HTML);break}case I.FRAME:{e._appendElement(t,Me.HTML),t.ackSelfClosing=!0;break}case I.NOFRAMES:{mc(e,t);break}}}function Oqe(e,t){t.tagID===I.FRAMESET&&!e.openElements.isRootHtmlElementCurrent()&&(e.openElements.pop(),!e.fragmentContext&&e.openElements.currentTagId!==I.FRAMESET&&(e.insertionMode=ne.AFTER_FRAMESET))}function $qe(e,t){switch(t.tagID){case I.HTML:{xs(e,t);break}case I.NOFRAMES:{mc(e,t);break}}}function Mqe(e,t){t.tagID===I.HTML&&(e.insertionMode=ne.AFTER_AFTER_FRAMESET)}function Lqe(e,t){t.tagID===I.HTML?xs(e,t):Lk(e,t)}function Lk(e,t){e.insertionMode=ne.IN_BODY,JD(e,t)}function Fqe(e,t){switch(t.tagID){case I.HTML:{xs(e,t);break}case I.NOFRAMES:{mc(e,t);break}}}function jqe(e,t){t.chars=Mr,e._insertCharacters(t)}function Bqe(e,t){e._insertCharacters(t),e.framesetOk=!1}function rge(e){for(;e.treeAdapter.getNamespaceURI(e.openElements.current)!==Me.HTML&&!e._isIntegrationPoint(e.openElements.currentTagId,e.openElements.current);)e.openElements.pop()}function Uqe(e,t){if(nHe(t))rge(e),e._startTagOutsideForeignContent(t);else{const n=e._getAdjustedCurrentElement(),r=e.treeAdapter.getNamespaceURI(n);r===Me.MATHML?Bme(t):r===Me.SVG&&(rHe(t),Ume(t)),_z(t),t.selfClosing?e._appendElement(t,r):e._insertElement(t,r),t.ackSelfClosing=!0}}function zqe(e,t){if(t.tagID===I.P||t.tagID===I.BR){rge(e),e._endTagOutsideForeignContent(t);return}for(let n=e.openElements.stackTop;n>0;n--){const r=e.openElements.items[n];if(e.treeAdapter.getNamespaceURI(r)===Me.HTML){e._endTagOutsideForeignContent(t);break}const i=e.treeAdapter.getTagName(r);if(i.toLowerCase()===t.tagName){t.tagName=i,e.openElements.shortenToLength(n);break}}}ve.AREA,ve.BASE,ve.BASEFONT,ve.BGSOUND,ve.BR,ve.COL,ve.EMBED,ve.FRAME,ve.HR,ve.IMG,ve.INPUT,ve.KEYGEN,ve.LINK,ve.META,ve.PARAM,ve.SOURCE,ve.TRACK,ve.WBR;const Vqe=new Set(["mdxFlowExpression","mdxJsxFlowElement","mdxJsxTextElement","mdxTextExpression","mdxjsEsm"]),bee={sourceCodeLocationInfo:!0,scriptingEnabled:!1};function ige(e,t){const n=Zqe(e),r=Tme("type",{handlers:{root:Hqe,element:qqe,text:Wqe,comment:sge,doctype:Gqe,raw:Kqe},unknown:Xqe}),i={parser:n?new gee(bee):gee.getFragmentParser(void 0,bee),handle(a){r(a,i)},stitches:!1,options:t||{}};r(e,i),A_(i,Mf());const o=n?i.parser.document:i.parser.getFragment(),s=tVe(o,{file:i.options.file});return i.stitches&&gz(s,"comment",function(a,u,l){const c=a;if(c.value.stitch&&l&&u!==void 0){const f=l.children;return f[u]=c.value.stitch,u}}),s.type==="root"&&s.children.length===1&&s.children[0].type===e.type?s.children[0]:s}function oge(e,t){let n=-1;if(e)for(;++n<e.length;)t.handle(e[n])}function Hqe(e,t){oge(e.children,t)}function qqe(e,t){Qqe(e,t),oge(e.children,t),Jqe(e,t)}function Wqe(e,t){const n={type:ln.CHARACTER,chars:e.value,location:iC(e)};A_(t,Mf(e)),t.parser.currentToken=n,t.parser._processToken(t.parser.currentToken)}function Gqe(e,t){const n={type:ln.DOCTYPE,name:"html",forceQuirks:!1,publicId:"",systemId:"",location:iC(e)};A_(t,Mf(e)),t.parser.currentToken=n,t.parser._processToken(t.parser.currentToken)}function Yqe(e,t){t.stitches=!0;const n=eWe(e);if("children"in e&&"children"in n){const r=ige({type:"root",children:e.children},t.options);n.children=r.children}sge({type:"comment",value:{stitch:n}},t)}function sge(e,t){const n=e.value,r={type:ln.COMMENT,data:n,location:iC(e)};A_(t,Mf(e)),t.parser.currentToken=r,t.parser._processToken(t.parser.currentToken)}function Kqe(e,t){if(t.parser.tokenizer.preprocessor.html="",t.parser.tokenizer.preprocessor.pos=-1,t.parser.tokenizer.preprocessor.lastGapPos=-2,t.parser.tokenizer.preprocessor.gapStack=[],t.parser.tokenizer.preprocessor.skipNextNewLine=!1,t.parser.tokenizer.preprocessor.lastChunkWritten=!1,t.parser.tokenizer.preprocessor.endOfChunkHit=!1,t.parser.tokenizer.preprocessor.isEol=!1,age(t,Mf(e)),t.parser.tokenizer.write(e.value,!1),t.parser.tokenizer._runParsingLoop(),t.parser.tokenizer.state===72||t.parser.tokenizer.state===78){t.parser.tokenizer.preprocessor.lastChunkWritten=!0;const n=t.parser.tokenizer._consume();t.parser.tokenizer._callState(n)}}function Xqe(e,t){const n=e;if(t.options.passThrough&&t.options.passThrough.includes(n.type))Yqe(n,t);else{let r="";throw Vqe.has(n.type)&&(r=". It looks like you are using MDX nodes with `hast-util-raw` (or `rehype-raw`). If you use this because you are using remark or rehype plugins that inject `'html'` nodes, then please raise an issue with that plugin, as its a bad and slow idea. If you use this because you are using markdown syntax, then you have to configure this utility (or plugin) to pass through these nodes (see `passThrough` in docs), but you can also migrate to use the MDX syntax"),new Error("Cannot compile `"+n.type+"` node"+r)}}function A_(e,t){age(e,t);const n=e.parser.tokenizer.currentCharacterToken;n&&n.location&&(n.location.endLine=e.parser.tokenizer.preprocessor.line,n.location.endCol=e.parser.tokenizer.preprocessor.col+1,n.location.endOffset=e.parser.tokenizer.preprocessor.offset+1,e.parser.currentToken=n,e.parser._processToken(e.parser.currentToken)),e.parser.tokenizer.paused=!1,e.parser.tokenizer.inLoop=!1,e.parser.tokenizer.active=!1,e.parser.tokenizer.returnState=bi.DATA,e.parser.tokenizer.charRefCode=-1,e.parser.tokenizer.consumedAfterSnapshot=-1,e.parser.tokenizer.currentLocation=null,e.parser.tokenizer.currentCharacterToken=null,e.parser.tokenizer.currentToken=null,e.parser.tokenizer.currentAttr={name:"",value:""}}function age(e,t){if(t&&t.offset!==void 0){const n={startLine:t.line,startCol:t.column,startOffset:t.offset,endLine:-1,endCol:-1,endOffset:-1};e.parser.tokenizer.preprocessor.lineStartPos=-t.column+1,e.parser.tokenizer.preprocessor.droppedBufferSize=t.offset,e.parser.tokenizer.preprocessor.line=t.line,e.parser.tokenizer.currentLocation=n}}function Qqe(e,t){const n=e.tagName.toLowerCase();if(t.parser.tokenizer.state===bi.PLAINTEXT)return;A_(t,Mf(e));const r=t.parser.openElements.current;let i="namespaceURI"in r?r.namespaceURI:t0.html;i===t0.html&&n==="svg"&&(i=t0.svg);const o=sVe({...e,children:[]},{space:i===t0.svg?"svg":"html"}),s={type:ln.START_TAG,tagName:n,tagID:C_(n),selfClosing:!1,ackSelfClosing:!1,attrs:"attrs"in o?o.attrs:[],location:iC(e)};t.parser.currentToken=s,t.parser._processToken(t.parser.currentToken),t.parser.tokenizer.lastStartTagName=n}function Jqe(e,t){const n=e.tagName.toLowerCase();if(!t.parser.tokenizer.inForeignNode&&pVe.includes(n)||t.parser.tokenizer.state===bi.PLAINTEXT)return;A_(t,YD(e));const r={type:ln.END_TAG,tagName:n,tagID:C_(n),selfClosing:!1,ackSelfClosing:!1,attrs:[],location:iC(e)};t.parser.currentToken=r,t.parser._processToken(t.parser.currentToken),n===t.parser.tokenizer.lastStartTagName&&(t.parser.tokenizer.state===bi.RCDATA||t.parser.tokenizer.state===bi.RAWTEXT||t.parser.tokenizer.state===bi.SCRIPT_DATA)&&(t.parser.tokenizer.state=bi.DATA)}function Zqe(e){const t=e.type==="root"?e.children[0]:e;return!!(t&&(t.type==="doctype"||t.type==="element"&&t.tagName.toLowerCase()==="html"))}function iC(e){const t=Mf(e)||{line:void 0,column:void 0,offset:void 0},n=YD(e)||{line:void 0,column:void 0,offset:void 0};return{startLine:t.line,startCol:t.column,startOffset:t.offset,endLine:n.line,endCol:n.column,endOffset:n.offset}}function eWe(e){return"children"in e?lb({...e,children:[]}):lb(e)}function tWe(e){return function(t,n){return ige(t,{...e,file:n})}}function Ws({text:e,required:t}){const n={img({node:i,width:o,height:s,...a}){return b.jsx(Fm,{...a,h:s,w:o,ref:void 0})},p({node:i,...o}){return b.jsx(je,{...o,size:"xl",pb:8,fw:"inherit",ref:void 0})},h1({node:i,...o}){return b.jsx(kr,{...o,order:1,...o,pb:12})},h2({node:i,...o}){return b.jsx(kr,{...o,order:2,...o,pb:12})},h3({node:i,...o}){return b.jsx(kr,{...o,order:3,...o,pb:12})},h4({node:i,...o}){return b.jsx(kr,{...o,order:4,...o,pb:12})},h5({node:i,...o}){return b.jsx(kr,{...o,order:5,...o,pb:12})},h6({node:i,...o}){return b.jsx(kr,{...o,order:6,...o,pb:12})},a({node:i,...o}){return b.jsx(Mm,{...o,ref:void 0})},ul({node:i,...o}){return b.jsx(ec,{withPadding:!0,...o,pb:8})},ol({node:i,type:o,...s}){return b.jsx(ec,{type:"ordered",withPadding:!0,...s,pb:8})}};return b.jsx(zze,{components:n,rehypePlugins:[tWe],children:e+(t?'<span style="color: #fa5252; margin-left: 4px">*</span>':"")})}function C5({issues:e,type:t}){const n=`
    ${t==="error"?"There was an issue loading the study config. Please check the following issues:":"There were some warnings while loading the study config. Please check the following warnings:"}

    ${e.map(r=>`- You have an error at ${r.instancePath||"root"}: ${r.message} - ${JSON.stringify(r.params)}  `).join(`
`)}
  `.replace(/\n\s+/g,`
`);return b.jsx(Ws,{text:n})}const nWe="https://github.com/revisit-studies/study/tree/main/public/";function rWe({globalConfig:e,studyConfigs:t}){const{configsList:n}=e,r=$f();return b.jsx(Or.Main,{children:b.jsxs(sl,{size:"xs",px:"xs",children:[b.jsx(Fm,{maw:150,mx:"auto",mb:"xl",radius:"md",src:`${Ra}revisitAssets/revisitLogoSquare.svg`,alt:"reVISit"}),b.jsx(je,{children:"Select an experiment to launch:"}),n.map(i=>{const o=t[i];if(!o)return null;const s=Mpe(i);return b.jsx(Pi,{onClick:a=>{a.preventDefault(),r(`/${s}`)},my:"sm",style:{width:"100%"},children:b.jsxs(xy,{shadow:"sm",radius:"md",withBorder:!0,children:[o.errors.length>0?b.jsxs(b.Fragment,{children:[b.jsx(je,{fw:"bold",children:i}),b.jsxs(kt,{align:"center",direction:"row",children:[b.jsx(dZ,{color:"red"}),b.jsx(je,{fw:"bold",ml:8,color:"red",children:"Errors"})]}),b.jsx(C5,{issues:o.errors,type:"error"})]}):b.jsxs(b.Fragment,{children:[b.jsxs(kt,{direction:"row",justify:"space-between",children:[b.jsx(je,{fw:"bold",children:o.studyMetadata.title}),b.jsx(Ey,{onClick:a=>{a.stopPropagation()},variant:"transparent",size:20,style:{float:"right"},component:"a",href:`${Ra}${s}`,children:b.jsx(i8e,{style:{paddingTop:4}})})]}),b.jsxs(je,{c:"dimmed",children:[b.jsx(je,{span:!0,fw:500,children:"Authors: "}),o.studyMetadata.authors]}),b.jsx(je,{c:"dimmed",children:o.studyMetadata.description}),b.jsx(je,{c:"dimmed",ta:"right",style:{paddingRight:5},children:b.jsxs(Mm,{target:"_blank",onClick:a=>a.stopPropagation(),href:`${nWe}${s}`,children:["View source:"," ",s]})})]}),o.warnings.length>0&&b.jsxs(b.Fragment,{children:[b.jsxs(kt,{align:"center",direction:"row",children:[b.jsx(dZ,{color:"orange"}),b.jsx(je,{fw:"bold",ml:8,color:"orange",children:"Warnings"})]}),b.jsx(C5,{issues:o.warnings,type:"warning"})]})]})},i)})]})})}var uge={exports:{}},lge={};/**
 * @license React
 * use-sync-external-store-with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var oC=k;function iWe(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var oWe=typeof Object.is=="function"?Object.is:iWe,sWe=oC.useSyncExternalStore,aWe=oC.useRef,uWe=oC.useEffect,lWe=oC.useMemo,cWe=oC.useDebugValue;lge.useSyncExternalStoreWithSelector=function(e,t,n,r,i){var o=aWe(null);if(o.current===null){var s={hasValue:!1,value:null};o.current=s}else s=o.current;o=lWe(function(){function u(h){if(!l){if(l=!0,c=h,h=r(h),i!==void 0&&s.hasValue){var p=s.value;if(i(p,h))return f=p}return f=h}if(p=f,oWe(c,h))return p;var m=r(h);return i!==void 0&&i(p,m)?p:(c=h,f=m)}var l=!1,c,f,d=n===void 0?null:n;return[function(){return u(t())},d===null?void 0:function(){return u(d())}]},[t,n,r,i]);var a=sWe(e,o[0],o[1]);return uWe(function(){s.hasValue=!0,s.value=a},[a]),cWe(a),a};uge.exports=lge;var fWe=uge.exports,ou="default"in kI?Yn:kI,_ee=Symbol.for("react-redux-context"),wee=typeof globalThis<"u"?globalThis:{};function dWe(){if(!ou.createContext)return{};const e=wee[_ee]??(wee[_ee]=new Map);let t=e.get(ou.createContext);return t||(t=ou.createContext(null),e.set(ou.createContext,t)),t}var rm=dWe(),hWe=()=>{throw new Error("uSES not initialized!")};function Tz(e=rm){return function(){return ou.useContext(e)}}var cge=Tz(),fge=hWe,pWe=e=>{fge=e},mWe=(e,t)=>e===t;function gWe(e=rm){const t=e===rm?cge:Tz(e),n=(r,i={})=>{const{equalityFn:o=mWe,devModeChecks:s={}}=typeof i=="function"?{equalityFn:i}:i,{store:a,subscription:u,getServerState:l,stabilityCheck:c,identityFunctionCheck:f}=t();ou.useRef(!0);const d=ou.useCallback({[r.name](p){return r(p)}}[r.name],[r,c,s.stabilityCheck]),h=fge(u.addNestedSub,a.getState,l||a.getState,d,o);return ou.useDebugValue(h),h};return Object.assign(n,{withTypes:()=>n}),n}var yWe=gWe();function vWe(e){e()}function bWe(){let e=null,t=null;return{clear(){e=null,t=null},notify(){vWe(()=>{let n=e;for(;n;)n.callback(),n=n.next})},get(){const n=[];let r=e;for(;r;)n.push(r),r=r.next;return n},subscribe(n){let r=!0;const i=t={callback:n,next:null,prev:t};return i.prev?i.prev.next=i:e=i,function(){!r||e===null||(r=!1,i.next?i.next.prev=i.prev:t=i.prev,i.prev?i.prev.next=i.next:e=i.next)}}}}var Eee={notify(){},get:()=>[]};function _We(e,t){let n,r=Eee,i=0,o=!1;function s(m){c();const g=r.subscribe(m);let y=!1;return()=>{y||(y=!0,g(),f())}}function a(){r.notify()}function u(){p.onStateChange&&p.onStateChange()}function l(){return o}function c(){i++,n||(n=e.subscribe(u),r=bWe())}function f(){i--,n&&i===0&&(n(),n=void 0,r.clear(),r=Eee)}function d(){o||(o=!0,c())}function h(){o&&(o=!1,f())}const p={addNestedSub:s,notifyNestedSubs:a,handleChangeWrapper:u,isSubscribed:l,trySubscribe:d,tryUnsubscribe:h,getListeners:()=>r};return p}var wWe=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",EWe=typeof navigator<"u"&&navigator.product==="ReactNative",xWe=wWe||EWe?ou.useLayoutEffect:ou.useEffect;function TWe({store:e,context:t,children:n,serverState:r,stabilityCheck:i="once",identityFunctionCheck:o="once"}){const s=ou.useMemo(()=>{const l=_We(e);return{store:e,subscription:l,getServerState:r?()=>r:void 0,stabilityCheck:i,identityFunctionCheck:o}},[e,r,i,o]),a=ou.useMemo(()=>e.getState(),[e]);xWe(()=>{const{subscription:l}=s;return l.onStateChange=l.notifyNestedSubs,l.trySubscribe(),a!==e.getState()&&l.notifyNestedSubs(),()=>{l.tryUnsubscribe(),l.onStateChange=void 0}},[s,a]);const u=t||rm;return ou.createElement(u.Provider,{value:s},n)}var SWe=TWe;function dge(e=rm){const t=e===rm?cge:Tz(e),n=()=>{const{store:r}=t();return r};return Object.assign(n,{withTypes:()=>n}),n}var CWe=dge();function AWe(e=rm){const t=e===rm?CWe:dge(e),n=()=>t().dispatch;return Object.assign(n,{withTypes:()=>n}),n}var hge=AWe();pWe(fWe.useSyncExternalStoreWithSelector);function Co(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var kWe=typeof Symbol=="function"&&Symbol.observable||"@@observable",xee=kWe,kL=()=>Math.random().toString(36).substring(7).split("").join("."),IWe={INIT:`@@redux/INIT${kL()}`,REPLACE:`@@redux/REPLACE${kL()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${kL()}`},yR=IWe;function Sz(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function pge(e,t,n){if(typeof e!="function")throw new Error(Co(2));if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(Co(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(Co(1));return n(pge)(e,t)}let r=e,i=t,o=new Map,s=o,a=0,u=!1;function l(){s===o&&(s=new Map,o.forEach((g,y)=>{s.set(y,g)}))}function c(){if(u)throw new Error(Co(3));return i}function f(g){if(typeof g!="function")throw new Error(Co(4));if(u)throw new Error(Co(5));let y=!0;l();const v=a++;return s.set(v,g),function(){if(y){if(u)throw new Error(Co(6));y=!1,l(),s.delete(v),o=null}}}function d(g){if(!Sz(g))throw new Error(Co(7));if(typeof g.type>"u")throw new Error(Co(8));if(typeof g.type!="string")throw new Error(Co(17));if(u)throw new Error(Co(9));try{u=!0,i=r(i,g)}finally{u=!1}return(o=s).forEach(v=>{v()}),g}function h(g){if(typeof g!="function")throw new Error(Co(10));r=g,d({type:yR.REPLACE})}function p(){const g=f;return{subscribe(y){if(typeof y!="object"||y===null)throw new Error(Co(11));function v(){const w=y;w.next&&w.next(c())}return v(),{unsubscribe:g(v)}},[xee](){return this}}}return d({type:yR.INIT}),{dispatch:d,subscribe:f,getState:c,replaceReducer:h,[xee]:p}}function RWe(e){Object.keys(e).forEach(t=>{const n=e[t];if(typeof n(void 0,{type:yR.INIT})>"u")throw new Error(Co(12));if(typeof n(void 0,{type:yR.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Co(13))})}function NWe(e){const t=Object.keys(e),n={};for(let o=0;o<t.length;o++){const s=t[o];typeof e[s]=="function"&&(n[s]=e[s])}const r=Object.keys(n);let i;try{RWe(n)}catch(o){i=o}return function(s={},a){if(i)throw i;let u=!1;const l={};for(let c=0;c<r.length;c++){const f=r[c],d=n[f],h=s[f],p=d(h,a);if(typeof p>"u")throw a&&a.type,new Error(Co(14));l[f]=p,u=u||p!==h}return u=u||r.length!==Object.keys(s).length,u?l:s}}function vR(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,n)=>(...r)=>t(n(...r)))}function PWe(...e){return t=>(n,r)=>{const i=t(n,r);let o=()=>{throw new Error(Co(15))};const s={getState:i.getState,dispatch:(u,...l)=>o(u,...l)},a=e.map(u=>u(s));return o=vR(...a)(i.dispatch),{...i,dispatch:o}}}function DWe(e){return Sz(e)&&"type"in e&&typeof e.type=="string"}var mge=Symbol.for("immer-nothing"),Tee=Symbol.for("immer-draftable"),yu=Symbol.for("immer-state");function Bl(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var fb=Object.getPrototypeOf;function im(e){return!!e&&!!e[yu]}function nh(e){var t;return e?gge(e)||Array.isArray(e)||!!e[Tee]||!!((t=e.constructor)!=null&&t[Tee])||rO(e)||iO(e):!1}var OWe=Object.prototype.constructor.toString();function gge(e){if(!e||typeof e!="object")return!1;const t=fb(e);if(t===null)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object?!0:typeof n=="function"&&Function.toString.call(n)===OWe}function bR(e,t){nO(e)===0?Reflect.ownKeys(e).forEach(n=>{t(n,e[n],e)}):e.forEach((n,r)=>t(r,n,e))}function nO(e){const t=e[yu];return t?t.type_:Array.isArray(e)?1:rO(e)?2:iO(e)?3:0}function A5(e,t){return nO(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function yge(e,t,n){const r=nO(e);r===2?e.set(t,n):r===3?e.add(n):e[t]=n}function $We(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function rO(e){return e instanceof Map}function iO(e){return e instanceof Set}function Ig(e){return e.copy_||e.base_}function k5(e,t){if(rO(e))return new Map(e);if(iO(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const n=gge(e);if(t===!0||t==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(e);delete r[yu];let i=Reflect.ownKeys(r);for(let o=0;o<i.length;o++){const s=i[o],a=r[s];a.writable===!1&&(a.writable=!0,a.configurable=!0),(a.get||a.set)&&(r[s]={configurable:!0,writable:!0,enumerable:a.enumerable,value:e[s]})}return Object.create(fb(e),r)}else{const r=fb(e);if(r!==null&&n)return{...e};const i=Object.create(r);return Object.assign(i,e)}}function Cz(e,t=!1){return oO(e)||im(e)||!nh(e)||(nO(e)>1&&(e.set=e.add=e.clear=e.delete=MWe),Object.freeze(e),t&&Object.entries(e).forEach(([n,r])=>Cz(r,!0))),e}function MWe(){Bl(2)}function oO(e){return Object.isFrozen(e)}var LWe={};function N0(e){const t=LWe[e];return t||Bl(0,e),t}var PT;function vge(){return PT}function FWe(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function See(e,t){t&&(N0("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function I5(e){R5(e),e.drafts_.forEach(jWe),e.drafts_=null}function R5(e){e===PT&&(PT=e.parent_)}function Cee(e){return PT=FWe(PT,e)}function jWe(e){const t=e[yu];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function Aee(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return e!==void 0&&e!==n?(n[yu].modified_&&(I5(t),Bl(4)),nh(e)&&(e=_R(t,e),t.parent_||wR(t,e)),t.patches_&&N0("Patches").generateReplacementPatches_(n[yu].base_,e,t.patches_,t.inversePatches_)):e=_R(t,n,[]),I5(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==mge?e:void 0}function _R(e,t,n){if(oO(t))return t;const r=t[yu];if(!r)return bR(t,(i,o)=>kee(e,r,t,i,o,n)),t;if(r.scope_!==e)return t;if(!r.modified_)return wR(e,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const i=r.copy_;let o=i,s=!1;r.type_===3&&(o=new Set(i),i.clear(),s=!0),bR(o,(a,u)=>kee(e,r,i,a,u,n,s)),wR(e,i,!1),n&&e.patches_&&N0("Patches").generatePatches_(r,n,e.patches_,e.inversePatches_)}return r.copy_}function kee(e,t,n,r,i,o,s){if(im(i)){const a=o&&t&&t.type_!==3&&!A5(t.assigned_,r)?o.concat(r):void 0,u=_R(e,i,a);if(yge(n,r,u),im(u))e.canAutoFreeze_=!1;else return}else s&&n.add(i);if(nh(i)&&!oO(i)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;_R(e,i),(!t||!t.scope_.parent_)&&typeof r!="symbol"&&Object.prototype.propertyIsEnumerable.call(n,r)&&wR(e,i)}}function wR(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&Cz(t,n)}function BWe(e,t){const n=Array.isArray(e),r={type_:n?1:0,scope_:t?t.scope_:vge(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=r,o=Az;n&&(i=[r],o=DT);const{revoke:s,proxy:a}=Proxy.revocable(i,o);return r.draft_=a,r.revoke_=s,a}var Az={get(e,t){if(t===yu)return e;const n=Ig(e);if(!A5(n,t))return UWe(e,n,t);const r=n[t];return e.finalized_||!nh(r)?r:r===IL(e.base_,t)?(RL(e),e.copy_[t]=P5(r,e)):r},has(e,t){return t in Ig(e)},ownKeys(e){return Reflect.ownKeys(Ig(e))},set(e,t,n){const r=bge(Ig(e),t);if(r!=null&&r.set)return r.set.call(e.draft_,n),!0;if(!e.modified_){const i=IL(Ig(e),t),o=i==null?void 0:i[yu];if(o&&o.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if($We(n,i)&&(n!==void 0||A5(e.base_,t)))return!0;RL(e),N5(e)}return e.copy_[t]===n&&(n!==void 0||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty(e,t){return IL(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,RL(e),N5(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const n=Ig(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty(){Bl(11)},getPrototypeOf(e){return fb(e.base_)},setPrototypeOf(){Bl(12)}},DT={};bR(Az,(e,t)=>{DT[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});DT.deleteProperty=function(e,t){return DT.set.call(this,e,t,void 0)};DT.set=function(e,t,n){return Az.set.call(this,e[0],t,n,e[0])};function IL(e,t){const n=e[yu];return(n?Ig(n):e)[t]}function UWe(e,t,n){var i;const r=bge(t,n);return r?"value"in r?r.value:(i=r.get)==null?void 0:i.call(e.draft_):void 0}function bge(e,t){if(!(t in e))return;let n=fb(e);for(;n;){const r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=fb(n)}}function N5(e){e.modified_||(e.modified_=!0,e.parent_&&N5(e.parent_))}function RL(e){e.copy_||(e.copy_=k5(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var zWe=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,n,r)=>{if(typeof t=="function"&&typeof n!="function"){const o=n;n=t;const s=this;return function(u=o,...l){return s.produce(u,c=>n.call(this,c,...l))}}typeof n!="function"&&Bl(6),r!==void 0&&typeof r!="function"&&Bl(7);let i;if(nh(t)){const o=Cee(this),s=P5(t,void 0);let a=!0;try{i=n(s),a=!1}finally{a?I5(o):R5(o)}return See(o,r),Aee(i,o)}else if(!t||typeof t!="object"){if(i=n(t),i===void 0&&(i=t),i===mge&&(i=void 0),this.autoFreeze_&&Cz(i,!0),r){const o=[],s=[];N0("Patches").generateReplacementPatches_(t,i,o,s),r(o,s)}return i}else Bl(1,t)},this.produceWithPatches=(t,n)=>{if(typeof t=="function")return(s,...a)=>this.produceWithPatches(s,u=>t(u,...a));let r,i;return[this.produce(t,n,(s,a)=>{r=s,i=a}),r,i]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){nh(e)||Bl(8),im(e)&&(e=_ge(e));const t=Cee(this),n=P5(e,void 0);return n[yu].isManual_=!0,R5(t),n}finishDraft(e,t){const n=e&&e[yu];(!n||!n.isManual_)&&Bl(9);const{scope_:r}=n;return See(r,t),Aee(void 0,r)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const i=t[n];if(i.path.length===0&&i.op==="replace"){e=i.value;break}}n>-1&&(t=t.slice(n+1));const r=N0("Patches").applyPatches_;return im(e)?r(e,t):this.produce(e,i=>r(i,t))}};function P5(e,t){const n=rO(e)?N0("MapSet").proxyMap_(e,t):iO(e)?N0("MapSet").proxySet_(e,t):BWe(e,t);return(t?t.scope_:vge()).drafts_.push(n),n}function _ge(e){return im(e)||Bl(10,e),wge(e)}function wge(e){if(!nh(e)||oO(e))return e;const t=e[yu];let n;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=k5(e,t.scope_.immer_.useStrictShallowCopy_)}else n=k5(e,!0);return bR(n,(r,i)=>{yge(n,r,wge(i))}),t&&(t.finalized_=!1),n}var vu=new zWe,Ege=vu.produce;vu.produceWithPatches.bind(vu);vu.setAutoFreeze.bind(vu);vu.setUseStrictShallowCopy.bind(vu);vu.applyPatches.bind(vu);vu.createDraft.bind(vu);vu.finishDraft.bind(vu);function VWe(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function HWe(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function qWe(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(n=>typeof n=="function")){const n=e.map(r=>typeof r=="function"?`function ${r.name||"unnamed"}()`:typeof r).join(", ");throw new TypeError(`${t}[${n}]`)}}var Iee=e=>Array.isArray(e)?e:[e];function WWe(e){const t=Array.isArray(e[0])?e[0]:e;return qWe(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function GWe(e,t){const n=[],{length:r}=e;for(let i=0;i<r;i++)n.push(e[i].apply(null,t));return n}var YWe=class{constructor(e){this.value=e}deref(){return this.value}},KWe=typeof WeakRef<"u"?WeakRef:YWe,XWe=0,Ree=1;function a2(){return{s:XWe,v:void 0,o:null,p:null}}function kz(e,t={}){let n=a2();const{resultEqualityCheck:r}=t;let i,o=0;function s(){var f;let a=n;const{length:u}=arguments;for(let d=0,h=u;d<h;d++){const p=arguments[d];if(typeof p=="function"||typeof p=="object"&&p!==null){let m=a.o;m===null&&(a.o=m=new WeakMap);const g=m.get(p);g===void 0?(a=a2(),m.set(p,a)):a=g}else{let m=a.p;m===null&&(a.p=m=new Map);const g=m.get(p);g===void 0?(a=a2(),m.set(p,a)):a=g}}const l=a;let c;if(a.s===Ree)c=a.v;else if(c=e.apply(null,arguments),o++,r){const d=((f=i==null?void 0:i.deref)==null?void 0:f.call(i))??i;d!=null&&r(d,c)&&(c=d,o!==0&&o--),i=typeof c=="object"&&c!==null||typeof c=="function"?new KWe(c):c}return l.s=Ree,l.v=c,c}return s.clearCache=()=>{n=a2(),s.resetResultsCount()},s.resultsCount=()=>o,s.resetResultsCount=()=>{o=0},s}function xge(e,...t){const n=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,r=(...i)=>{let o=0,s=0,a,u={},l=i.pop();typeof l=="object"&&(u=l,l=i.pop()),VWe(l,`createSelector expects an output function after the inputs, but received: [${typeof l}]`);const c={...n,...u},{memoize:f,memoizeOptions:d=[],argsMemoize:h=kz,argsMemoizeOptions:p=[],devModeChecks:m={}}=c,g=Iee(d),y=Iee(p),v=WWe(i),_=f(function(){return o++,l.apply(null,arguments)},...g),w=h(function(){s++;const S=GWe(v,arguments);return a=_.apply(null,S),a},...y);return Object.assign(w,{resultFunc:l,memoizedResultFunc:_,dependencies:v,dependencyRecomputations:()=>s,resetDependencyRecomputations:()=>{s=0},lastResult:()=>a,recomputations:()=>o,resetRecomputations:()=>{o=0},memoize:f,argsMemoize:h})};return Object.assign(r,{withTypes:()=>r}),r}var QWe=xge(kz),JWe=Object.assign((e,t=QWe)=>{HWe(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const n=Object.keys(e),r=n.map(o=>e[o]);return t(r,(...o)=>o.reduce((s,a,u)=>(s[n[u]]=a,s),{}))},{withTypes:()=>JWe});function Tge(e){return({dispatch:n,getState:r})=>i=>o=>typeof o=="function"?o(n,r,e):i(o)}var ZWe=Tge(),eGe=Tge,tGe=(...e)=>{const t=xge(...e),n=Object.assign((...r)=>{const i=t(...r),o=(s,...a)=>i(im(s)?_ge(s):s,...a);return Object.assign(o,i),o},{withTypes:()=>n});return n};tGe(kz);var nGe=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?vR:vR.apply(null,arguments)};function db(e,t){function n(...r){if(t){let i=t(...r);if(!i)throw new Error(Pa(0));return{type:e,payload:i.payload,..."meta"in i&&{meta:i.meta},..."error"in i&&{error:i.error}}}return{type:e,payload:r[0]}}return n.toString=()=>`${e}`,n.type=e,n.match=r=>DWe(r)&&r.type===e,n}var Sge=class EE extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,EE.prototype)}static get[Symbol.species](){return EE}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new EE(...t[0].concat(this)):new EE(...t.concat(this))}};function Nee(e){return nh(e)?Ege(e,()=>{}):e}function Pee(e,t,n){if(e.has(t)){let i=e.get(t);return n.update&&(i=n.update(i,t,e),e.set(t,i)),i}if(!n.insert)throw new Error(Pa(10));const r=n.insert(t,e);return e.set(t,r),r}function rGe(e){return typeof e=="boolean"}var iGe=()=>function(t){const{thunk:n=!0,immutableCheck:r=!0,serializableCheck:i=!0,actionCreatorCheck:o=!0}=t??{};let s=new Sge;return n&&(rGe(n)?s.push(ZWe):s.push(eGe(n.extraArgument))),s},oGe="RTK_autoBatch",Cge=e=>t=>{setTimeout(t,e)},sGe=typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:Cge(10),aGe=(e={type:"raf"})=>t=>(...n)=>{const r=t(...n);let i=!0,o=!1,s=!1;const a=new Set,u=e.type==="tick"?queueMicrotask:e.type==="raf"?sGe:e.type==="callback"?e.queueNotification:Cge(e.timeout),l=()=>{s=!1,o&&(o=!1,a.forEach(c=>c()))};return Object.assign({},r,{subscribe(c){const f=()=>i&&c(),d=r.subscribe(f);return a.add(c),()=>{d(),a.delete(c)}},dispatch(c){var f;try{return i=!((f=c==null?void 0:c.meta)!=null&&f[oGe]),o=!i,o&&(s||(s=!0,u(l))),r.dispatch(c)}finally{i=!0}}})},uGe=e=>function(n){const{autoBatch:r=!0}=n??{};let i=new Sge(e);return r&&i.push(aGe(typeof r=="object"?r:void 0)),i},lGe=!0;function cGe(e){const t=iGe(),{reducer:n=void 0,middleware:r,devTools:i=!0,preloadedState:o=void 0,enhancers:s=void 0}=e||{};let a;if(typeof n=="function")a=n;else if(Sz(n))a=NWe(n);else throw new Error(Pa(1));let u;typeof r=="function"?u=r(t):u=t();let l=vR;i&&(l=nGe({trace:!lGe,...typeof i=="object"&&i}));const c=PWe(...u),f=uGe(c);let d=typeof s=="function"?s(f):f();const h=l(...d);return pge(a,o,h)}function Age(e){const t={},n=[];let r;const i={addCase(o,s){const a=typeof o=="string"?o:o.type;if(!a)throw new Error(Pa(28));if(a in t)throw new Error(Pa(29));return t[a]=s,i},addMatcher(o,s){return n.push({matcher:o,reducer:s}),i},addDefaultCase(o){return r=o,i}};return e(i),[t,n,r]}function fGe(e){return typeof e=="function"}function dGe(e,t){let[n,r,i]=Age(t),o;if(fGe(e))o=()=>Nee(e());else{const a=Nee(e);o=()=>a}function s(a=o(),u){let l=[n[u.type],...r.filter(({matcher:c})=>c(u)).map(({reducer:c})=>c)];return l.filter(c=>!!c).length===0&&(l=[i]),l.reduce((c,f)=>{if(f)if(im(c)){const h=f(c,u);return h===void 0?c:h}else{if(nh(c))return Ege(c,d=>f(d,u));{const d=f(c,u);if(d===void 0){if(c===null)return c;throw new Error(Pa(9))}return d}}return c},a)}return s.getInitialState=o,s}var hGe="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",pGe=(e=21)=>{let t="",n=e;for(;n--;)t+=hGe[Math.random()*64|0];return t},mGe=Symbol.for("rtk-slice-createasyncthunk");function gGe(e,t){return`${e}/${t}`}function yGe({creators:e}={}){var n;const t=(n=e==null?void 0:e.asyncThunk)==null?void 0:n[mGe];return function(i){const{name:o,reducerPath:s=o}=i;if(!o)throw new Error(Pa(11));typeof process<"u";const a=(typeof i.reducers=="function"?i.reducers(_Ge()):i.reducers)||{},u=Object.keys(a),l={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},c={addCase(_,w){const E=typeof _=="string"?_:_.type;if(!E)throw new Error(Pa(12));if(E in l.sliceCaseReducersByType)throw new Error(Pa(13));return l.sliceCaseReducersByType[E]=w,c},addMatcher(_,w){return l.sliceMatchers.push({matcher:_,reducer:w}),c},exposeAction(_,w){return l.actionCreators[_]=w,c},exposeCaseReducer(_,w){return l.sliceCaseReducersByName[_]=w,c}};u.forEach(_=>{const w=a[_],E={reducerName:_,type:gGe(o,_),createNotation:typeof i.reducers=="function"};EGe(w)?TGe(E,w,c,t):wGe(E,w,c)});function f(){const[_={},w=[],E=void 0]=typeof i.extraReducers=="function"?Age(i.extraReducers):[i.extraReducers],S={..._,...l.sliceCaseReducersByType};return dGe(i.initialState,T=>{for(let C in S)T.addCase(C,S[C]);for(let C of l.sliceMatchers)T.addMatcher(C.matcher,C.reducer);for(let C of w)T.addMatcher(C.matcher,C.reducer);E&&T.addDefaultCase(E)})}const d=_=>_,h=new Map;let p;function m(_,w){return p||(p=f()),p(_,w)}function g(){return p||(p=f()),p.getInitialState()}function y(_,w=!1){function E(T){let C=T[_];return typeof C>"u"&&w&&(C=g()),C}function S(T=d){const C=Pee(h,w,{insert:()=>new WeakMap});return Pee(C,T,{insert:()=>{const A={};for(const[R,N]of Object.entries(i.selectors??{}))A[R]=vGe(N,T,g,w);return A}})}return{reducerPath:_,getSelectors:S,get selectors(){return S(E)},selectSlice:E}}const v={name:o,reducer:m,actions:l.actionCreators,caseReducers:l.sliceCaseReducersByName,getInitialState:g,...y(s),injectInto(_,{reducerPath:w,...E}={}){const S=w??s;return _.inject({reducerPath:S,reducer:m},E),{...v,...y(S,!0)}}};return v}}function vGe(e,t,n,r){function i(o,...s){let a=t(o);return typeof a>"u"&&r&&(a=n()),e(a,...s)}return i.unwrapped=e,i}var bGe=yGe();function _Ge(){function e(t,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...n}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...n){return t(...n)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:n}},asyncThunk:e}}function wGe({type:e,reducerName:t,createNotation:n},r,i){let o,s;if("reducer"in r){if(n&&!xGe(r))throw new Error(Pa(17));o=r.reducer,s=r.prepare}else o=r;i.addCase(e,o).exposeCaseReducer(t,o).exposeAction(t,s?db(e,s):db(e))}function EGe(e){return e._reducerDefinitionType==="asyncThunk"}function xGe(e){return e._reducerDefinitionType==="reducerWithPrepare"}function TGe({type:e,reducerName:t},n,r,i){if(!i)throw new Error(Pa(18));const{payloadCreator:o,fulfilled:s,pending:a,rejected:u,settled:l,options:c}=n,f=i(e,o,c);r.exposeAction(t,f),s&&r.addCase(f.fulfilled,s),a&&r.addCase(f.pending,a),u&&r.addCase(f.rejected,u),l&&r.addMatcher(f.settled,l),r.exposeCaseReducer(t,{fulfilled:s||u2,pending:a||u2,rejected:u||u2,settled:l||u2})}function u2(){}var SGe=(e,t)=>{if(typeof e!="function")throw new Error(Pa(32))},Iz="listenerMiddleware",CGe=e=>{let{type:t,actionCreator:n,matcher:r,predicate:i,effect:o}=e;if(t)i=db(t).match;else if(n)t=n.type,i=n.match;else if(r)i=r;else if(!i)throw new Error(Pa(21));return SGe(o),{predicate:i,type:t,effect:o}},AGe=Object.assign(e=>{const{type:t,predicate:n,effect:r}=CGe(e);return{id:pGe(),effect:r,type:t,predicate:n,pending:new Set,unsubscribe:()=>{throw new Error(Pa(22))}}},{withTypes:()=>AGe}),kGe=Object.assign(db(`${Iz}/add`),{withTypes:()=>kGe});db(`${Iz}/removeAll`);var IGe=Object.assign(db(`${Iz}/remove`),{withTypes:()=>IGe});function Pa(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}function rh(e){return e.components.flatMap(t=>typeof t=="string"?t:rh(t))}function kge(e){var t;return[...e.components.flatMap(n=>typeof n=="string"?n:kge(n)),...((t=e.interruptions)==null?void 0:t.flatMap(n=>n.components))||[]]}function Ige(e,t,n){let r=0;for(let i=0;i<e.components.length;i+=1){const o=e.components[i];if(typeof o=="string"){if(typeof t=="number"&&t===n+r)return[{currentBlock:e,firstIndex:n,lastIndex:n+rh(e).length-1}];if(typeof t=="string"&&e.orderPath===t)return[{currentBlock:e,firstIndex:n,lastIndex:n+rh(e).length-1}];r+=1}else{const s=Ige(o,t,n+r);if(typeof s=="number")r+=s;else{const a={currentBlock:e,firstIndex:n,lastIndex:s[0].lastIndex};return[...s,a]}}}return r}function Rge(e,t){const n=Ige(e,t,0);return typeof n=="number"?null:n}function Nge(e,t,n){if(e.id===t)return{found:!0,distance:n};let r=0;for(let i=0;i<e.components.length;i+=1){const o=e.components[i];if(typeof o=="string")r+=1;else{const s=Nge(o,t,n+r);if(s.found)return s;r+=s.distance}}return{found:!1,distance:r}}function RGe(e,t){const n=Nge(e,t,0);return n.found?n.distance:-1}function Pge(e,t="root"){const n=[],r={};return e.components.forEach((i,o)=>{typeof i=="string"?(n.push({componentName:i,orderPath:t,timesSeenInBlock:r[i]||0}),r[i]=r[i]?r[i]+1:1):n.push(...Pge(i,`${t}-${o}`))}),n}function Rz(e,t){return typeof e=="string"?e:{...e,orderPath:t,components:e.components.map((n,r)=>Rz(n,`${t}-${r}`))}}async function NGe(e,t,n,r,i){const o=rh(n),s=Object.fromEntries(o.filter(d=>d!=="end").map((d,h)=>[`${d}_${h}`,{answer:{}}])),a=Object.assign({},...o.map((d,h)=>({[`${d}_${h}`]:{aboveStimulus:{valid:!1,values:{}},belowStimulus:{valid:!1,values:{}},sidebar:{valid:!1,values:{}}}}))),u=Object.assign({},...o.map((d,h)=>({[`${d}_${h}`]:{aboveStimulus:!0,belowStimulus:!0,sidebar:!0,values:{}}}))),l={studyId:e,answers:Object.keys(i).length>0?i:s,sequence:n,config:t,showStudyBrowser:!0,showHelpText:!1,alertModal:{show:!1,message:""},trialValidation:i?u:a,iframeAnswers:{},iframeProvenance:null,metadata:r},c=bGe({name:"storeSlice",initialState:l,reducers:{setConfig(d,h){d.config=h.payload},toggleStudyBrowser:d=>{d.showStudyBrowser=!d.showStudyBrowser},toggleShowHelpText:d=>{d.showHelpText=!d.showHelpText},setAlertModal:(d,h)=>{d.alertModal=h.payload},setIframeAnswers:(d,h)=>{d.iframeAnswers=h.payload},setIframeProvenance:(d,h)=>{d.iframeProvenance=h.payload},updateResponseBlockValidation:(d,{payload:h})=>{d.trialValidation[h.identifier]||(d.trialValidation[h.identifier]={aboveStimulus:{valid:!1,values:{}},belowStimulus:{valid:!1,values:{}},sidebar:{valid:!1,values:{}},provenanceGraph:void 0}),d.trialValidation[h.identifier][h.location]={valid:h.status,values:h.values},h.provenanceGraph&&(d.trialValidation[h.identifier].provenanceGraph=h.provenanceGraph)},saveTrialAnswer(d,{payload:h}){const{identifier:p,answer:m,startTime:g,endTime:y,provenanceGraph:v,windowEvents:_}=h;d.answers[p]={answer:m,startTime:g,endTime:y,provenanceGraph:v,windowEvents:_}}}});return{store:cGe({reducer:c.reducer,preloadedState:l}),actions:c.actions}}const Dge=k.createContext(null);function Lf(){return k.useContext(Dge).actions}const Ff=hge,bl=yWe;function PGe(e){return bl(t=>{if(e.includes("reviewer-"))return!0;const n=Object.values(t.trialValidation[e]).every(r=>typeof r=="object"&&"valid"in r?r.valid:!0);return n?Object.values(n).every(r=>r):!1})}function Nz(){return bl(e=>rh(e.sequence))}function Ny(){const{studyId:e}=eh();return`${e}`}function Ch(){const{index:e}=eh(),t=parseInt(e||"0",10);return Number.isNaN(t)?e:t}function Py(){const e=Ch(),t=Nz();return typeof e=="number"?t[e]:e.replace("reviewer-","")}var ER={exports:{}};ER.exports;(function(e,t){var n=200,r="__lodash_hash_undefined__",i=800,o=16,s=9007199254740991,a="[object Arguments]",u="[object Array]",l="[object AsyncFunction]",c="[object Boolean]",f="[object Date]",d="[object Error]",h="[object Function]",p="[object GeneratorFunction]",m="[object Map]",g="[object Number]",y="[object Null]",v="[object Object]",_="[object Proxy]",w="[object RegExp]",E="[object Set]",S="[object String]",T="[object Undefined]",C="[object WeakMap]",A="[object ArrayBuffer]",R="[object DataView]",N="[object Float32Array]",O="[object Float64Array]",D="[object Int8Array]",M="[object Int16Array]",F="[object Int32Array]",L="[object Uint8Array]",B="[object Uint8ClampedArray]",U="[object Uint16Array]",H="[object Uint32Array]",P=/[\\^$.*+?()[\]{}|]/g,z=/^\[object .+?Constructor\]$/,W=/^(?:0|[1-9]\d*)$/,j={};j[N]=j[O]=j[D]=j[M]=j[F]=j[L]=j[B]=j[U]=j[H]=!0,j[a]=j[u]=j[A]=j[c]=j[R]=j[f]=j[d]=j[h]=j[m]=j[g]=j[v]=j[w]=j[E]=j[S]=j[C]=!1;var q=typeof so=="object"&&so&&so.Object===Object&&so,G=typeof self=="object"&&self&&self.Object===Object&&self,te=q||G||Function("return this")(),pe=t&&!t.nodeType&&t,be=pe&&!0&&e&&!e.nodeType&&e,le=be&&be.exports===pe,me=le&&q.process,Se=function(){try{var ee=be&&be.require&&be.require("util").types;return ee||me&&me.binding&&me.binding("util")}catch{}}(),ge=Se&&Se.isTypedArray;function tt(ee,se,Ce){switch(Ce.length){case 0:return ee.call(se);case 1:return ee.call(se,Ce[0]);case 2:return ee.call(se,Ce[0],Ce[1]);case 3:return ee.call(se,Ce[0],Ce[1],Ce[2])}return ee.apply(se,Ce)}function Ue(ee,se){for(var Ce=-1,Tt=Array(ee);++Ce<ee;)Tt[Ce]=se(Ce);return Tt}function mt(ee){return function(se){return ee(se)}}function it(ee,se){return ee==null?void 0:ee[se]}function Re(ee,se){return function(Ce){return ee(se(Ce))}}var $e=Array.prototype,Ge=Function.prototype,dt=Object.prototype,Nt=te["__core-js_shared__"],He=Ge.toString,fe=dt.hasOwnProperty,lt=function(){var ee=/[^.]+$/.exec(Nt&&Nt.keys&&Nt.keys.IE_PROTO||"");return ee?"Symbol(src)_1."+ee:""}(),gt=dt.toString,ce=He.call(Object),Te=RegExp("^"+He.call(fe).replace(P,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ze=le?te.Buffer:void 0,st=te.Symbol,vt=te.Uint8Array;ze&&ze.allocUnsafe;var vn=Re(Object.getPrototypeOf,Object),Zn=Object.create,bn=dt.propertyIsEnumerable,Bn=$e.splice,Zt=st?st.toStringTag:void 0,an=function(){try{var ee=Ve(Object,"defineProperty");return ee({},"",{}),ee}catch{}}(),Dn=ze?ze.isBuffer:void 0,On=Math.max,Ho=Date.now,Jr=Ve(te,"Map"),un=Ve(Object,"create"),Zr=function(){function ee(){}return function(se){if(!id(se))return{};if(Zn)return Zn(se);ee.prototype=se;var Ce=new ee;return ee.prototype=void 0,Ce}}();function er(ee){var se=-1,Ce=ee==null?0:ee.length;for(this.clear();++se<Ce;){var Tt=ee[se];this.set(Tt[0],Tt[1])}}function Si(){this.__data__=un?un(null):{},this.size=0}function ed(ee){var se=this.has(ee)&&delete this.__data__[ee];return this.size-=se?1:0,se}function Wa(ee){var se=this.__data__;if(un){var Ce=se[ee];return Ce===r?void 0:Ce}return fe.call(se,ee)?se[ee]:void 0}function Cc(ee){var se=this.__data__;return un?se[ee]!==void 0:fe.call(se,ee)}function Qn(ee,se){var Ce=this.__data__;return this.size+=this.has(ee)?0:1,Ce[ee]=un&&se===void 0?r:se,this}er.prototype.clear=Si,er.prototype.delete=ed,er.prototype.get=Wa,er.prototype.has=Cc,er.prototype.set=Qn;function qr(ee){var se=-1,Ce=ee==null?0:ee.length;for(this.clear();++se<Ce;){var Tt=ee[se];this.set(Tt[0],Tt[1])}}function br(){this.__data__=[],this.size=0}function ta(ee){var se=this.__data__,Ce=Rn(se,ee);if(Ce<0)return!1;var Tt=se.length-1;return Ce==Tt?se.pop():Bn.call(se,Ce,1),--this.size,!0}function Ts(ee){var se=this.__data__,Ce=Rn(se,ee);return Ce<0?void 0:se[Ce][1]}function Ss(ee){return Rn(this.__data__,ee)>-1}function ie(ee,se){var Ce=this.__data__,Tt=Rn(Ce,ee);return Tt<0?(++this.size,Ce.push([ee,se])):Ce[Tt][1]=se,this}qr.prototype.clear=br,qr.prototype.delete=ta,qr.prototype.get=Ts,qr.prototype.has=Ss,qr.prototype.set=ie;function Z(ee){var se=-1,Ce=ee==null?0:ee.length;for(this.clear();++se<Ce;){var Tt=ee[se];this.set(Tt[0],Tt[1])}}function oe(){this.size=0,this.__data__={hash:new er,map:new(Jr||qr),string:new er}}function xe(ee){var se=Be(this,ee).delete(ee);return this.size-=se?1:0,se}function Ee(ee){return Be(this,ee).get(ee)}function rt(ee){return Be(this,ee).has(ee)}function Et(ee,se){var Ce=Be(this,ee),Tt=Ce.size;return Ce.set(ee,se),this.size+=Ce.size==Tt?0:1,this}Z.prototype.clear=oe,Z.prototype.delete=xe,Z.prototype.get=Ee,Z.prototype.has=rt,Z.prototype.set=Et;function Bt(ee){var se=this.__data__=new qr(ee);this.size=se.size}function mn(){this.__data__=new qr,this.size=0}function _n(ee){var se=this.__data__,Ce=se.delete(ee);return this.size=se.size,Ce}function Qt(ee){return this.__data__.get(ee)}function $n(ee){return this.__data__.has(ee)}function tr(ee,se){var Ce=this.__data__;if(Ce instanceof qr){var Tt=Ce.__data__;if(!Jr||Tt.length<n-1)return Tt.push([ee,se]),this.size=++Ce.size,this;Ce=this.__data__=new Z(Tt)}return Ce.set(ee,se),this.size=Ce.size,this}Bt.prototype.clear=mn,Bt.prototype.delete=_n,Bt.prototype.get=Qt,Bt.prototype.has=$n,Bt.prototype.set=tr;function jt(ee,se){var Ce=nd(ee),Tt=!Ce&&na(ee),gn=!Ce&&!Tt&&rd(ee),Jn=!Ce&&!Tt&&!gn&&SA(ee),dr=Ce||Tt||gn||Jn,En=dr?Ue(ee.length,String):[],hr=En.length;for(var pi in ee)dr&&(pi=="length"||gn&&(pi=="offset"||pi=="parent")||Jn&&(pi=="buffer"||pi=="byteLength"||pi=="byteOffset")||_t(pi,hr))||En.push(pi);return En}function Mn(ee,se,Ce){(Ce!==void 0&&!Ou(ee[se],Ce)||Ce===void 0&&!(se in ee))&&Wr(ee,se,Ce)}function fr(ee,se,Ce){var Tt=ee[se];(!(fe.call(ee,se)&&Ou(Tt,Ce))||Ce===void 0&&!(se in ee))&&Wr(ee,se,Ce)}function Rn(ee,se){for(var Ce=ee.length;Ce--;)if(Ou(ee[Ce][0],se))return Ce;return-1}function Wr(ee,se,Ce){se=="__proto__"&&an?an(ee,se,{configurable:!0,enumerable:!0,value:Ce,writable:!0}):ee[se]=Ce}var Qi=Ne();function _r(ee){return ee==null?ee===void 0?T:y:Zt&&Zt in Object(ee)?qe(ee):Wo(ee)}function bo(ee){return ra(ee)&&_r(ee)==a}function ei(ee){if(!id(ee)||wn(ee))return!1;var se=gw(ee)?Te:z;return se.test(EA(ee))}function ti(ee){return ra(ee)&&TA(ee.length)&&!!j[_r(ee)]}function qo(ee){if(!id(ee))return rr(ee);var se=nr(ee),Ce=[];for(var Tt in ee)Tt=="constructor"&&(se||!fe.call(ee,Tt))||Ce.push(Tt);return Ce}function Cs(ee,se,Ce,Tt,gn){ee!==se&&Qi(se,function(Jn,dr){if(gn||(gn=new Bt),id(Jn))Ji(ee,se,dr,Ce,Cs,Tt,gn);else{var En=Tt?Tt(td(ee,dr),Jn,dr+"",ee,se,gn):void 0;En===void 0&&(En=Jn),Mn(ee,dr,En)}},lg)}function Ji(ee,se,Ce,Tt,gn,Jn,dr){var En=td(ee,Ce),hr=td(se,Ce),pi=dr.get(hr);if(pi){Mn(ee,Ce,pi);return}var Go=Jn?Jn(En,hr,Ce+"",ee,se,dr):void 0,fg=Go===void 0;if(fg){var od=nd(hr),iv=!od&&rd(hr),ov=!od&&!iv&&SA(hr);Go=hr,od||iv||ov?nd(En)?Go=En:xA(En)?Go=ue(En):iv?(fg=!1,Go=Y(hr)):ov?(fg=!1,Go=J(hr)):Go=[]:gM(hr)||na(hr)?(Go=En,na(En)?Go=ug(En):(!id(En)||gw(En))&&(Go=nt(hr))):fg=!1}fg&&(dr.set(hr,Go),gn(Go,hr,Tt,Jn,dr),dr.delete(hr)),Mn(ee,Ce,Go)}function Du(ee,se){return mw(kc(ee,se,Mh),ee+"")}var Ac=an?function(ee,se){return an(ee,"toString",{configurable:!0,enumerable:!1,value:cg(se),writable:!0})}:Mh;function Y(ee,se){return ee.slice()}function re(ee){var se=new ee.constructor(ee.byteLength);return new vt(se).set(new vt(ee)),se}function J(ee,se){var Ce=re(ee.buffer);return new ee.constructor(Ce,ee.byteOffset,ee.length)}function ue(ee,se){var Ce=-1,Tt=ee.length;for(se||(se=Array(Tt));++Ce<Tt;)se[Ce]=ee[Ce];return se}function de(ee,se,Ce,Tt){var gn=!Ce;Ce||(Ce={});for(var Jn=-1,dr=se.length;++Jn<dr;){var En=se[Jn],hr=void 0;hr===void 0&&(hr=ee[En]),gn?Wr(Ce,En,hr):fr(Ce,En,hr)}return Ce}function ae(ee){return Du(function(se,Ce){var Tt=-1,gn=Ce.length,Jn=gn>1?Ce[gn-1]:void 0,dr=gn>2?Ce[2]:void 0;for(Jn=ee.length>3&&typeof Jn=="function"?(gn--,Jn):void 0,dr&&Jt(Ce[0],Ce[1],dr)&&(Jn=gn<3?void 0:Jn,gn=1),se=Object(se);++Tt<gn;){var En=Ce[Tt];En&&ee(se,En,Tt,Jn)}return se})}function Ne(ee){return function(se,Ce,Tt){for(var gn=-1,Jn=Object(se),dr=Tt(se),En=dr.length;En--;){var hr=dr[++gn];if(Ce(Jn[hr],hr,Jn)===!1)break}return se}}function Be(ee,se){var Ce=ee.__data__;return It(se)?Ce[typeof se=="string"?"string":"hash"]:Ce.map}function Ve(ee,se){var Ce=it(ee,se);return ei(Ce)?Ce:void 0}function qe(ee){var se=fe.call(ee,Zt),Ce=ee[Zt];try{ee[Zt]=void 0;var Tt=!0}catch{}var gn=gt.call(ee);return Tt&&(se?ee[Zt]=Ce:delete ee[Zt]),gn}function nt(ee){return typeof ee.constructor=="function"&&!nr(ee)?Zr(vn(ee)):{}}function _t(ee,se){var Ce=typeof ee;return se=se??s,!!se&&(Ce=="number"||Ce!="symbol"&&W.test(ee))&&ee>-1&&ee%1==0&&ee<se}function Jt(ee,se,Ce){if(!id(Ce))return!1;var Tt=typeof se;return(Tt=="number"?rv(Ce)&&_t(se,Ce.length):Tt=="string"&&se in Ce)?Ou(Ce[se],ee):!1}function It(ee){var se=typeof ee;return se=="string"||se=="number"||se=="symbol"||se=="boolean"?ee!=="__proto__":ee===null}function wn(ee){return!!lt&&lt in ee}function nr(ee){var se=ee&&ee.constructor,Ce=typeof se=="function"&&se.prototype||dt;return ee===Ce}function rr(ee){var se=[];if(ee!=null)for(var Ce in Object(ee))se.push(Ce);return se}function Wo(ee){return gt.call(ee)}function kc(ee,se,Ce){return se=On(se===void 0?ee.length-1:se,0),function(){for(var Tt=arguments,gn=-1,Jn=On(Tt.length-se,0),dr=Array(Jn);++gn<Jn;)dr[gn]=Tt[se+gn];gn=-1;for(var En=Array(se+1);++gn<se;)En[gn]=Tt[gn];return En[se]=Ce(dr),tt(ee,this,En)}}function td(ee,se){if(!(se==="constructor"&&typeof ee[se]=="function")&&se!="__proto__")return ee[se]}var mw=ag(Ac);function ag(ee){var se=0,Ce=0;return function(){var Tt=Ho(),gn=o-(Tt-Ce);if(Ce=Tt,gn>0){if(++se>=i)return arguments[0]}else se=0;return ee.apply(void 0,arguments)}}function EA(ee){if(ee!=null){try{return He.call(ee)}catch{}try{return ee+""}catch{}}return""}function Ou(ee,se){return ee===se||ee!==ee&&se!==se}var na=bo(function(){return arguments}())?bo:function(ee){return ra(ee)&&fe.call(ee,"callee")&&!bn.call(ee,"callee")},nd=Array.isArray;function rv(ee){return ee!=null&&TA(ee.length)&&!gw(ee)}function xA(ee){return ra(ee)&&rv(ee)}var rd=Dn||AA;function gw(ee){if(!id(ee))return!1;var se=_r(ee);return se==h||se==p||se==l||se==_}function TA(ee){return typeof ee=="number"&&ee>-1&&ee%1==0&&ee<=s}function id(ee){var se=typeof ee;return ee!=null&&(se=="object"||se=="function")}function ra(ee){return ee!=null&&typeof ee=="object"}function gM(ee){if(!ra(ee)||_r(ee)!=v)return!1;var se=vn(ee);if(se===null)return!0;var Ce=fe.call(se,"constructor")&&se.constructor;return typeof Ce=="function"&&Ce instanceof Ce&&He.call(Ce)==ce}var SA=ge?mt(ge):ti;function ug(ee){return de(ee,lg(ee))}function lg(ee){return rv(ee)?jt(ee):qo(ee)}var CA=ae(function(ee,se,Ce){Cs(ee,se,Ce)});function cg(ee){return function(){return ee}}function Mh(ee){return ee}function AA(){return!1}e.exports=CA})(ER,ER.exports);var DGe=ER.exports;const Pz=ku(DGe);function Fp(e){return structuredClone(e)}function Dz(){const{answers:e}=bl(i=>i),t=Ch(),r=`${Py()}_${t}`;return e[r]}const Oge=k.createContext(null);function OGe(){const e=k.useContext(Oge);if(!e)throw new Error("useWindowEvents must be used within a WindowEventsProvider");return e}function om(){return bl(e=>e.config)}function Dee(e,t,n,r){const i=t.slice(0,t.lastIndexOf("_")),o=Object.entries(r.components).find(([a])=>a===i),s=o?o[1]:null;if(!s)throw new Error(`Component ${i} could not be found in the study components.`);return s.correctAnswer?s.correctAnswer.every(a=>e[a.id]===a.answer):!0}function $Ge(){const e=Ch(),t=Nz(),r=`${Py()}_${e}`,{trialValidation:i,sequence:o,answers:s}=bl(S=>S),a=Ff(),{saveTrialAnswer:u,setIframeAnswers:l}=Lf(),{storageEngine:c}=$i(),f=Ny(),[d,h]=k.useState(!0);k.useEffect(()=>{(async()=>{if(c){const T=await c.getModes(f);h(T.dataCollectionEnabled)}})()},[c,f]);const p=PGe(r),m=typeof e!="number"||!p,g=Dz(),y=$f(),v=om(),_=k.useMemo(()=>Date.now(),[]),w=OGe(),E=k.useCallback(()=>{if(typeof e!="number")return;const S=Fp(i[r]),T=Object.values(S).reduce((F,L)=>Object.hasOwn(L,"values")?{...F,...L.values}:F,{}),{provenanceGraph:C}=S,A=Date.now(),R=w&&"current"in w&&w.current?w.current.splice(0,w.current.length):[];d&&!g.endTime&&(a(u({identifier:r,answer:T,startTime:_,endTime:A,provenanceGraph:C,windowEvents:R})),c&&c.saveAnswers({...s,[r]:{answer:T,startTime:_,endTime:A,provenanceGraph:C,windowEvents:R}}),a(l({})));let N=e+1;const O=Rge(o,e),D=O!==null&&O.some(F=>Object.hasOwn(F.currentBlock,"skip")&&F.currentBlock.skip!==void 0),M={...s,[r]:{answer:T,startTime:_,endTime:A,provenanceGraph:C,windowEvents:R}};D&&[...O.flatMap(L=>L.currentBlock.skip?L.currentBlock.skip.map(B=>({...B,firstIndex:L.firstIndex,lastIndex:L.lastIndex})):[])].some(L=>{let B=!1;const U=Object.fromEntries(Object.entries(M).filter(([P])=>{const z=parseInt(P.slice(P.lastIndexOf("_")+1),10);return z>=L.firstIndex&&z<=e})),H=L.check!=="block"?Object.entries(U).filter(([P])=>P.slice(0,P.lastIndexOf("_"))===L.name):Object.entries(U);if(H.length===0)return!1;if(H.some(([P,z])=>!z))throw new Error(`There are components with missing response objects for the skip condition: ${JSON.stringify(L,null,2)}`);if(L.check==="response"||L.check==="responses"){const[P,z]=H[0];L.check==="response"?B=L.comparison==="equal"?L.value===z.answer[L.responseId]:L.value!==z.answer[L.responseId]:B=!Dee(z.answer,P,v.components[P.slice(0,P.lastIndexOf("_"))],v)}else if(L.check==="block"||L.check==="repeatedComponent"){if(H.length<L.value)return!1;const P=H.map(([j,q])=>Dee(q.answer,j,v.components[j.slice(0,j.lastIndexOf("_"))],v)),z=P.filter(j=>j).length,W=P.length-z;B=L.condition==="numCorrect"&&z===L.value||L.condition==="numIncorrect"&&W===L.value}if(B){const P=t.indexOf(L.to),z=P===-1?RGe(o,L.to):-1;return N=P===-1?z:P,!0}return!1}),y(`/${f}/${N}${window.location.search}`)},[e,i,r,w,d,g.endTime,o,s,_,y,f,a,u,c,l,v,t]);return{isNextDisabled:m,goToNextStep:E}}function MGe({label:e="Next",disabled:t=!1,onClick:n}){const{isNextDisabled:r,goToNextStep:i}=$Ge(),o=k.useCallback(()=>{n&&n(),i()},[i,n]);return b.jsx(on,{type:"submit",disabled:t||r,onClick:o,children:e})}function LGe(e){if(!/^[0-9a-zA-Z-]+$/.test(e))throw new Error(`[@mantine/use-form] Form name "${e}" is invalid, it should contain only letters, numbers and dashes`)}const FGe=typeof window<"u"?k.useLayoutEffect:k.useEffect;function wo(e,t){FGe(()=>{if(e)return window.addEventListener(e,t),()=>window.removeEventListener(e,t)},[e])}function jGe(e,t){e&&LGe(e),wo(`mantine-form:${e}:set-field-value`,n=>t.setFieldValue(n.detail.path,n.detail.value)),wo(`mantine-form:${e}:set-values`,n=>t.setValues(n.detail)),wo(`mantine-form:${e}:set-initial-values`,n=>t.setInitialValues(n.detail)),wo(`mantine-form:${e}:set-errors`,n=>t.setErrors(n.detail)),wo(`mantine-form:${e}:set-field-error`,n=>t.setFieldError(n.detail.path,n.detail.error)),wo(`mantine-form:${e}:clear-field-error`,n=>t.clearFieldError(n.detail)),wo(`mantine-form:${e}:clear-errors`,t.clearErrors),wo(`mantine-form:${e}:reset`,t.reset),wo(`mantine-form:${e}:validate`,t.validate),wo(`mantine-form:${e}:validate-field`,n=>t.validateField(n.detail)),wo(`mantine-form:${e}:reorder-list-item`,n=>t.reorderListItem(n.detail.path,n.detail.payload)),wo(`mantine-form:${e}:remove-list-item`,n=>t.removeListItem(n.detail.path,n.detail.index)),wo(`mantine-form:${e}:insert-list-item`,n=>t.insertListItem(n.detail.path,n.detail.item,n.detail.index)),wo(`mantine-form:${e}:set-dirty`,n=>t.setDirty(n.detail)),wo(`mantine-form:${e}:set-touched`,n=>t.setTouched(n.detail)),wo(`mantine-form:${e}:reset-dirty`,n=>t.resetDirty(n.detail)),wo(`mantine-form:${e}:reset-touched`,t.resetTouched)}function BGe(e){return t=>{if(!t)e(t);else if(typeof t=="function")e(t);else if(typeof t=="object"&&"nativeEvent"in t){const{currentTarget:n}=t;n instanceof HTMLInputElement?n.type==="checkbox"?e(n.checked):e(n.value):(n instanceof HTMLTextAreaElement||n instanceof HTMLSelectElement)&&e(n.value)}else e(t)}}function D5(e){return e===null||typeof e!="object"?{}:Object.keys(e).reduce((t,n)=>{const r=e[n];return r!=null&&r!==!1&&(t[n]=r),t},{})}function UGe(e){const[t,n]=k.useState(D5(e)),r=k.useRef(t),i=k.useCallback(u=>{n(l=>{const c=D5(typeof u=="function"?u(l):u);return r.current=c,c})},[]),o=k.useCallback(()=>i({}),[]),s=k.useCallback(u=>{r.current[u]!==void 0&&i(l=>{const c={...l};return delete c[u],c})},[t]),a=k.useCallback((u,l)=>{l==null||l===!1?s(u):r.current[u]!==l&&i(c=>({...c,[u]:l}))},[t]);return{errorsState:t,setErrors:i,clearErrors:o,setFieldError:a,clearFieldError:s}}function $ge(e,t){if(t===null||typeof t!="object")return{};const n={...t};return Object.keys(t).forEach(r=>{r.includes(`${String(e)}.`)&&delete n[r]}),n}function Oee(e,t){const n=e.substring(t.length+1).split(".")[0];return parseInt(n,10)}function $ee(e,t,n,r){if(t===void 0)return n;const i=`${String(e)}`;let o=n;r===-1&&(o=$ge(`${i}.${t}`,o));const s={...o},a=new Set;return Object.entries(o).filter(([u])=>{if(!u.startsWith(`${i}.`))return!1;const l=Oee(u,i);return Number.isNaN(l)?!1:l>=t}).forEach(([u,l])=>{const c=Oee(u,i),f=u.replace(`${i}.${c}`,`${i}.${c+r}`);s[f]=l,a.add(f),a.has(u)||delete s[u]}),s}function zGe(e,{from:t,to:n},r){const i=`${e}.${t}`,o=`${e}.${n}`,s={...r};return Object.keys(r).every(a=>{let u,l;if(a.startsWith(i)&&(u=a,l=a.replace(i,o)),a.startsWith(o)&&(u=a.replace(o,i),l=a),u&&l){const c=s[u],f=s[l];return f===void 0?delete s[u]:s[u]=f,c===void 0?delete s[l]:s[l]=c,!1}return!0}),s}function Mee(e,t,n){typeof n.value=="object"&&(n.value=o1(n.value)),!n.enumerable||n.get||n.set||!n.configurable||!n.writable||t==="__proto__"?Object.defineProperty(e,t,n):e[t]=n.value}function o1(e){if(typeof e!="object")return e;var t=0,n,r,i,o=Object.prototype.toString.call(e);if(o==="[object Object]"?i=Object.create(e.__proto__||null):o==="[object Array]"?i=Array(e.length):o==="[object Set]"?(i=new Set,e.forEach(function(s){i.add(o1(s))})):o==="[object Map]"?(i=new Map,e.forEach(function(s,a){i.set(o1(a),o1(s))})):o==="[object Date]"?i=new Date(+e):o==="[object RegExp]"?i=new RegExp(e.source,e.flags):o==="[object DataView]"?i=new e.constructor(o1(e.buffer)):o==="[object ArrayBuffer]"?i=e.slice(0):o.slice(-6)==="Array]"&&(i=new e.constructor(e)),i){for(r=Object.getOwnPropertySymbols(e);t<r.length;t++)Mee(i,r[t],Object.getOwnPropertyDescriptor(e,r[t]));for(t=0,r=Object.getOwnPropertyNames(e);t<r.length;t++)Object.hasOwnProperty.call(i,n=r[t])&&i[n]===e[n]||Mee(i,n,Object.getOwnPropertyDescriptor(e,n))}return i||e}function Mge(e){return typeof e!="string"?[]:e.split(".")}function wa(e,t){const n=Mge(e);if(n.length===0||typeof t!="object"||t===null)return;let r=t[n[0]];for(let i=1;i<n.length&&r!==void 0;i+=1)r=r[n[i]];return r}function sO(e,t,n){const r=Mge(e);if(r.length===0)return n;const i=o1(n);if(r.length===1)return i[r[0]]=t,i;let o=i[r[0]];for(let s=1;s<r.length-1;s+=1){if(o===void 0)return i;o=o[r[s]]}return o[r[r.length-1]]=t,i}function VGe(e,{from:t,to:n},r){const i=wa(e,r);if(!Array.isArray(i))return r;const o=[...i],s=i[t];return o.splice(t,1),o.splice(n,0,s),sO(e,o,r)}function HGe(e,t,n,r){const i=wa(e,r);if(!Array.isArray(i))return r;const o=[...i];return o.splice(typeof n=="number"?n:o.length,0,t),sO(e,o,r)}function qGe(e,t,n){const r=wa(e,n);return Array.isArray(r)?sO(e,r.filter((i,o)=>o!==t),n):n}function WGe({$values:e,$errors:t,$status:n}){const r=k.useCallback((s,a)=>{n.clearFieldDirty(s),t.setErrors(u=>zGe(s,a,u)),e.setValues({values:VGe(s,a,e.refValues.current),updateState:!0})},[]),i=k.useCallback((s,a)=>{n.clearFieldDirty(s),t.setErrors(u=>$ee(s,a,u,-1)),e.setValues({values:qGe(s,a,e.refValues.current),updateState:!0})},[]),o=k.useCallback((s,a,u)=>{n.clearFieldDirty(s),t.setErrors(l=>$ee(s,u,l,1)),e.setValues({values:HGe(s,a,u,e.refValues.current),updateState:!0})},[]);return{reorderListItem:r,removeListItem:i,insertListItem:o}}var Oz=function e(t,n){if(t===n)return!0;if(t&&n&&typeof t=="object"&&typeof n=="object"){if(t.constructor!==n.constructor)return!1;var r,i,o;if(Array.isArray(t)){if(r=t.length,r!=n.length)return!1;for(i=r;i--!==0;)if(!e(t[i],n[i]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if(o=Object.keys(t),r=o.length,r!==Object.keys(n).length)return!1;for(i=r;i--!==0;)if(!Object.prototype.hasOwnProperty.call(n,o[i]))return!1;for(i=r;i--!==0;){var s=o[i];if(!e(t[s],n[s]))return!1}return!0}return t!==t&&n!==n};const Fk=ku(Oz);function l2(e,t){const n=Object.keys(e);if(typeof t=="string"){const r=n.filter(i=>i.startsWith(`${t}.`));return e[t]||r.some(i=>e[i])||!1}return n.some(r=>e[r])}function GGe({initialDirty:e,initialTouched:t,mode:n,$values:r}){const[i,o]=k.useState(t),[s,a]=k.useState(e),u=k.useRef(t),l=k.useRef(e),c=k.useCallback(E=>{const S=typeof E=="function"?E(u.current):E;u.current=S,n==="controlled"&&o(S)},[]),f=k.useCallback(E=>{const S=typeof E=="function"?E(l.current):E;l.current=S,n==="controlled"&&a(S)},[]),d=k.useCallback(()=>c({}),[]),h=E=>{const S=E?{...E,...r.refValues.current}:r.refValues.current;r.setValuesSnapshot(S),f({})},p=k.useCallback((E,S)=>{c(T=>l2(T,E)===S?T:{...T,[E]:S})},[]),m=k.useCallback((E,S)=>{f(T=>l2(T,E)===S?T:{...T,[E]:S})},[]),g=k.useCallback(E=>l2(u.current,E),[]),y=k.useCallback(E=>f(S=>{if(typeof E!="string")return S;const T=$ge(E,S);return delete T[E],Fk(T,S)?S:T}),[]),v=k.useCallback(E=>{if(E){const T=wa(E,l.current);if(typeof T=="boolean")return T;const C=wa(E,r.refValues.current),A=wa(E,r.valuesSnapshot.current);return!Fk(C,A)}return Object.keys(l.current).length>0?l2(l.current):!Fk(r.refValues.current,r.valuesSnapshot.current)},[]),_=k.useCallback(()=>l.current,[]),w=k.useCallback(()=>u.current,[]);return{touchedState:i,dirtyState:s,touchedRef:u,dirtyRef:l,setTouched:c,setDirty:f,resetDirty:h,resetTouched:d,isTouched:g,setFieldTouched:p,setFieldDirty:m,setTouchedState:o,setDirtyState:a,clearFieldDirty:y,isDirty:v,getDirty:_,getTouched:w}}function YGe({initialValues:e,onValuesChange:t,mode:n}){const r=k.useRef(!1),[i,o]=k.useState(e||{}),s=k.useRef(i),a=k.useRef(i),u=k.useCallback(({values:p,subscribers:m,updateState:g=!0,mergeWithPreviousValues:y=!0})=>{const v=s.current,_=p instanceof Function?p(s.current):p,w=y?{...v,..._}:_;s.current=w,g&&o(w),t==null||t(w,v),m==null||m.filter(Boolean).forEach(E=>E({updatedValues:w,previousValues:v}))},[t]),l=k.useCallback(p=>{var y;const m=wa(p.path,s.current),g=p.value instanceof Function?p.value(m):p.value;if(m!==g){const v=s.current,_=sO(p.path,g,s.current);u({values:_,updateState:p.updateState}),(y=p.subscribers)==null||y.filter(Boolean).forEach(w=>w({path:p.path,updatedValues:_,previousValues:v}))}},[]),c=k.useCallback(p=>{a.current=p},[]),f=k.useCallback((p,m)=>{r.current||(r.current=!0,u({values:p,updateState:n==="controlled"}),c(p),m())},[]),d=k.useCallback(()=>{u({values:a.current,updateState:!0,mergeWithPreviousValues:!1})},[]),h=k.useCallback(()=>s.current,[]);return{initialized:r,stateValues:i,refValues:s,valuesSnapshot:a,setValues:u,setFieldValue:l,resetValues:d,setValuesSnapshot:c,initialize:f,getValues:h}}function KGe({$status:e}){const t=k.useRef({}),n=k.useCallback((i,o)=>{k.useEffect(()=>(t.current[i]=t.current[i]||[],t.current[i].push(o),()=>{t.current[i]=t.current[i].filter(s=>s!==o)}),[o])},[]),r=k.useCallback(i=>t.current[i]?t.current[i].map(o=>s=>o({previousValue:wa(i,s.previousValues),value:wa(i,s.updatedValues),touched:e.isTouched(i),dirty:e.isDirty(i)})):[],[]);return{subscribers:t,watch:n,getFieldSubscribers:r}}function Lee(e,t){return e?`${e}-${t.toString()}`:t.toString()}function Fee(e){const t=D5(e);return{hasErrors:Object.keys(t).length>0,errors:t}}function O5(e,t,n="",r={}){return typeof e!="object"||e===null?r:Object.keys(e).reduce((i,o)=>{const s=e[o],a=`${n===""?"":`${n}.`}${o}`,u=wa(a,t);let l=!1;return typeof s=="function"&&(i[a]=s(u,t,a)),typeof s=="object"&&Array.isArray(u)&&(l=!0,u.forEach((c,f)=>O5(s,t,`${a}.${f}`,i))),typeof s=="object"&&typeof u=="object"&&u!==null&&(l||O5(s,t,a,i)),i},r)}function $5(e,t){return Fee(typeof e=="function"?e(t):O5(e,t))}function c2(e,t,n){if(typeof e!="string")return{hasError:!1,error:null};const r=$5(t,n),i=Object.keys(r.errors).find(o=>e.split(".").every((s,a)=>s===o.split(".")[a]));return{hasError:!!i,error:i?r.errors[i]:null}}const XGe="__MANTINE_FORM_INDEX__";function jee(e,t){return t?typeof t=="boolean"?t:Array.isArray(t)?t.includes(e.replace(/[.][0-9]/g,`.${XGe}`)):!1:!1}function Lge({name:e,mode:t="controlled",initialValues:n,initialErrors:r={},initialDirty:i={},initialTouched:o={},clearInputErrorOnChange:s=!0,validateInputOnChange:a=!1,validateInputOnBlur:u=!1,onValuesChange:l,transformValues:c=h=>h,enhanceGetInputProps:f,validate:d}={}){const h=UGe(r),p=YGe({initialValues:n,onValuesChange:l,mode:t}),m=GGe({initialDirty:i,initialTouched:o,$values:p,mode:t}),g=WGe({$values:p,$errors:h,$status:m}),y=KGe({$status:m}),[v,_]=k.useState(0),[w,E]=k.useState({}),S=k.useCallback(()=>{p.resetValues(),h.clearErrors(),m.resetDirty(),m.resetTouched(),t==="uncontrolled"&&_(P=>P+1)},[]),T=k.useCallback(P=>{p.initialize(P,()=>t==="uncontrolled"&&_(z=>z+1))},[]),C=k.useCallback((P,z,W)=>{const j=jee(P,a);m.clearFieldDirty(P),m.setFieldTouched(P,!0),!j&&s&&h.clearFieldError(P),p.setFieldValue({path:P,value:z,updateState:t==="controlled",subscribers:[...y.getFieldSubscribers(P),j?q=>{const G=c2(P,d,q.updatedValues);G.hasError?h.setFieldError(P,G.error):h.clearFieldError(P)}:null,(W==null?void 0:W.forceUpdate)!==!1&&t!=="controlled"?()=>E(q=>({...q,[P]:(q[P]||0)+1})):null]})},[l,d]),A=k.useCallback(P=>{const z=p.refValues.current;p.setValues({values:P,updateState:t==="controlled"}),s&&h.clearErrors(),t==="uncontrolled"&&_(W=>W+1),Object.keys(y.subscribers.current).forEach(W=>{const j=wa(W,p.refValues.current),q=wa(W,z);j!==q&&y.getFieldSubscribers(W).forEach(G=>G({previousValues:z,updatedValues:p.refValues.current}))})},[l,s]),R=k.useCallback(()=>{const P=$5(d,p.refValues.current);return h.setErrors(P.errors),P},[d]),N=k.useCallback(P=>{const z=c2(P,d,p.refValues.current);return z.hasError?h.setFieldError(P,z.error):h.clearFieldError(P),z},[d]),O=(P,{type:z="input",withError:W=!0,withFocus:j=!0,...q}={})=>{const te={onChange:BGe(pe=>C(P,pe,{forceUpdate:!1})),"data-path":Lee(e,P)};return W&&(te.error=h.errorsState[P]),z==="checkbox"?te[t==="controlled"?"checked":"defaultChecked"]=wa(P,p.refValues.current):te[t==="controlled"?"value":"defaultValue"]=wa(P,p.refValues.current),j&&(te.onFocus=()=>m.setFieldTouched(P,!0),te.onBlur=()=>{if(jee(P,u)){const pe=c2(P,d,p.refValues.current);pe.hasError?h.setFieldError(P,pe.error):h.clearFieldError(P)}}),Object.assign(te,f==null?void 0:f({inputProps:te,field:P,options:{type:z,withError:W,withFocus:j,...q},form:H}))},D=(P,z)=>W=>{W==null||W.preventDefault();const j=R();j.hasErrors?z==null||z(j.errors,p.refValues.current,W):P==null||P(c(p.refValues.current),W)},M=P=>c(P||p.refValues.current),F=k.useCallback(P=>{P.preventDefault(),S()},[]),L=k.useCallback(P=>P?!c2(P,d,p.refValues.current).hasError:!$5(d,p.refValues.current).hasErrors,[d]),B=P=>`${v}-${P}-${w[P]||0}`,U=k.useCallback(P=>document.querySelector(`[data-path="${Lee(e,P)}"]`),[]),H={watch:y.watch,initialized:p.initialized.current,values:p.stateValues,getValues:p.getValues,setInitialValues:p.setValuesSnapshot,initialize:T,setValues:A,setFieldValue:C,errors:h.errorsState,setErrors:h.setErrors,setFieldError:h.setFieldError,clearFieldError:h.clearFieldError,clearErrors:h.clearErrors,resetDirty:m.resetDirty,setTouched:m.setTouched,setDirty:m.setDirty,isTouched:m.isTouched,resetTouched:m.resetTouched,isDirty:m.isDirty,getTouched:m.getTouched,getDirty:m.getDirty,reorderListItem:g.reorderListItem,insertListItem:g.insertListItem,removeListItem:g.removeListItem,reset:S,validate:R,validateField:N,getInputProps:O,onSubmit:D,onReset:F,isValid:L,getTransformedValues:M,key:B,getInputNode:U};return jGe(e,H),H}function QGe(e,t){const n=t||!0;return r=>typeof r!="string"?n:e.test(r)?null:n}function JGe(e){return QGe(/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/,e)}function Fge(e,t){if(e.type==="checkbox"){const n=e,r=n.minSelections&&t.length<n.minSelections,i=n.maxSelections&&t.length>n.maxSelections;if(r&&i)return`Please select between ${n.minSelections} and ${n.maxSelections} options`;if(r)return`Please select at least ${n.minSelections} options`;if(i)return`Please select at most ${n.maxSelections} options`}return null}const ZGe=new URLSearchParams(window.location.search),eYe=(e,t)=>{let n={};return e.forEach(r=>{const i=t?t[r.id]:{};if(i)n={...n,[r.id]:i};else{const o=r.paramCapture?ZGe.get(r.paramCapture):"";n={...n,[r.id]:r.type==="iframe"?[]:o}}}),{...n}},tYe=e=>{let t={};return e.forEach(n=>{n.required&&(t={...t,[n.id]:r=>{if(Array.isArray(r)){if(n.requiredValue!=null&&!Array.isArray(n.requiredValue))return"Incorrect required value. Contact study administrator.";if(n.requiredValue!=null&&Array.isArray(n.requiredValue)){if(n.requiredValue.length!==r.length)return"Incorrect input";const i=[...n.requiredValue].sort(),o=[...r].sort();return i.every((s,a)=>s===o[a])?null:"Incorrect input"}return n.type==="checkbox"?Fge(n,r):r.length===0?"Empty input":null}return n.required&&n.requiredValue!=null&&r!=null?r.toString()!==n.requiredValue.toString()?"Incorrect input":null:n.required?r==null||r===""?"Empty input":null:r===null?"Empty input":null}})}),t};function nYe(e,t,n){const[r,i]=k.useState(null),o=Lge({initialValues:eYe(e,n),validate:tYe(e)});return k.useEffect(()=>{r!==t&&(i(t),o.reset())},[r,o,t]),o}function Dy(e,t,n){var s;const{requiredValue:r,requiredLabel:i}=e;let o="";return t.checked&&Array.isArray(r)?o=r&&[...r].sort().toString()!==[...t.checked].sort().toString()?`Please ${n?"select":"enter"} ${i||r.toString()} to continue.`:null:t.checked&&e.required?o=Fge(e,t.checked):o=t.value&&r&&r.toString()!==t.value.toString()?`Please ${n?"select":"enter"} ${i||(n?(s=n.find(a=>a.value===r))==null?void 0:s.label:r.toString())} to continue.`:null,o}function rYe({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{prompt:o,required:s,options:a,secondaryText:u}=e,l=a.map(c=>typeof c=="string"?{value:c,label:c}:c);return b.jsx(ru.Group,{label:b.jsxs(kt,{direction:"row",wrap:"nowrap",gap:4,children:[i&&b.jsx(he,{style:{minWidth:"fit-content"},children:`${r}. `}),b.jsx(he,{style:{display:"block"},className:"no-last-child-bottom-padding",children:b.jsx(Ws,{text:o,required:s})})]}),description:u,...n,error:Dy(e,n,l),style:{"--input-description-size":"calc(var(--mantine-font-size-md) - calc(0.125rem * var(--mantine-scale)))"},children:b.jsx(qs,{mt:"xs",children:l.map(c=>b.jsx(ru,{disabled:t,value:c.value,label:c.label},c.value))})})}function iYe({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{placeholder:o,prompt:s,required:a,options:u,secondaryText:l}=e,c=u.map(f=>typeof f=="string"?{value:f,label:f}:f);return b.jsx(QS,{disabled:t,label:b.jsxs(kt,{direction:"row",wrap:"nowrap",gap:4,children:[i&&b.jsx(he,{style:{minWidth:"fit-content"},children:`${r}. `}),b.jsx(he,{style:{display:"block"},className:"no-last-child-bottom-padding",children:b.jsx(Ws,{text:s,required:a})})]}),description:l,placeholder:o,data:c,radius:"md",size:"md",...n,error:Dy(e,n,c)})}function oYe({response:e,answer:t,index:n,enumerateQuestions:r}){const{prompt:i,required:o,secondaryText:s}=e;return b.jsx($r.Wrapper,{label:b.jsxs(kt,{direction:"row",wrap:"nowrap",gap:4,children:[r&&b.jsx(he,{style:{minWidth:"fit-content"},children:`${n}. `}),b.jsx(he,{style:{display:"block"},className:"no-last-child-bottom-padding",children:b.jsx(Ws,{text:i,required:o})})]}),description:s,size:"md",children:b.jsx(ec,{children:Array.isArray(t.value)?t.value.map(a=>b.jsx(ec.Item,{children:a},a)):b.jsx(ec.Item,{children:t.value})})})}function jge({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{prompt:o,required:s,options:a,leftLabel:u,rightLabel:l,secondaryText:c}=e,f=a.map(d=>typeof d=="string"?{value:d,label:d}:d);return b.jsx(R0.Group,{name:`radioInput${e.id}`,label:b.jsxs(kt,{direction:"row",wrap:"nowrap",gap:4,children:[i&&b.jsx(he,{style:{minWidth:"fit-content"},children:`${r}. `}),b.jsx(he,{style:{display:"block"},className:"no-last-child-bottom-padding",children:b.jsx(Ws,{text:o,required:s})})]}),description:c,...n,error:Dy(e,n,f),style:{"--input-description-size":"calc(var(--mantine-font-size-md) - calc(0.125rem * var(--mantine-scale)))"},children:b.jsxs(qs,{mt:"xs",children:[u?b.jsx(je,{style:{textAlign:"center"},children:u}):null,f.map(d=>b.jsx(R0,{size:"xl",disabled:t,value:d.value,label:d.label},d.label)),b.jsx(je,{children:l})]})},e.id)}function sYe({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{numItems:o}=e,s=[];for(let u=1;u<=+o;u+=1)s.push({label:`${u}`,value:`${u}`});const a={...e,type:"radio",options:s};return b.jsx(jge,{disabled:t,response:a,answer:n,index:r,enumerateQuestions:i})}function aYe({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{prompt:o,required:s,min:a,max:u,placeholder:l,secondaryText:c}=e;return b.jsx(Ty,{disabled:t,placeholder:l,label:b.jsxs(kt,{direction:"row",wrap:"nowrap",gap:4,children:[i&&b.jsx(he,{style:{minWidth:"fit-content"},children:`${r}. `}),b.jsx(he,{style:{display:"block"},className:"no-last-child-bottom-padding",children:b.jsx(Ws,{text:o,required:s})})]}),description:c,radius:"md",size:"md",min:a,max:u,...n,error:Dy(e,n)})}function uYe({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{prompt:o,required:s,options:a,secondaryText:u}=e,l=Dy(e,n);return b.jsx($r.Wrapper,{label:b.jsxs(kt,{direction:"row",wrap:"nowrap",gap:4,children:[i&&b.jsx(he,{style:{minWidth:"fit-content"},children:`${r}. `}),b.jsx(he,{style:{display:"block"},className:"no-last-child-bottom-padding",children:b.jsx(Ws,{text:o,required:s})})]}),description:u,error:l,style:{"--input-description-size":"calc(var(--mantine-font-size-md) - calc(0.125rem * var(--mantine-scale)))"},children:b.jsx(HD,{disabled:t,marks:a,...n,h:40})})}function lYe({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{placeholder:o,prompt:s,required:a,secondaryText:u}=e;return b.jsx(pp,{disabled:t,placeholder:o,label:b.jsxs(kt,{direction:"row",wrap:"nowrap",gap:4,children:[i&&b.jsx(he,{style:{minWidth:"fit-content"},children:`${r}. `}),b.jsx(he,{style:{display:"block"},className:"no-last-child-bottom-padding",children:b.jsx(Ws,{text:s,required:a})})]}),description:u,radius:"md",size:"md",...n,value:n.value||"",error:Dy(e,n)})}function cYe({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{placeholder:o,prompt:s,required:a,secondaryText:u}=e;return b.jsx(_U,{disabled:t,placeholder:o,label:b.jsxs(kt,{direction:"row",wrap:"nowrap",gap:4,children:[i&&b.jsx(he,{style:{minWidth:"fit-content"},children:`${r}. `}),b.jsx(he,{style:{display:"block"},className:"no-last-child-bottom-padding",children:b.jsx(Ws,{text:s,required:a})})]}),description:u,radius:"md",size:"md",...n,value:n.value||"",error:Dy(e,n)})}function fYe({response:e,answer:t,storedAnswer:n,index:r}){const i=(n?{value:n}:t)||{value:void 0},o=!!n,[s]=tz(),u=om().uiConfig.enumerateQuestions??!1,l=k.useMemo(()=>{if(e.paramCapture){const c=s.get(e.paramCapture);return o||!!c}return o},[o,e.paramCapture,s]);return b.jsxs(he,{mb:"md",children:[e.type==="numerical"&&b.jsx(aYe,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="shortText"&&b.jsx(lYe,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="longText"&&b.jsx(cYe,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="likert"&&b.jsx(sYe,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="dropdown"&&b.jsx(iYe,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="slider"&&b.jsx(uYe,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="radio"&&b.jsx(jge,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="checkbox"&&b.jsx(rYe,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="iframe"&&b.jsx(oYe,{response:e,answer:i,index:r,enumerateQuestions:u})]})}function xR({config:e,location:t,status:n,style:r}){var M;const i=Ff(),{updateResponseBlockValidation:o,toggleShowHelpText:s}=Lf(),a=Ch(),u=Py(),l=n==null?void 0:n.answer,c=$f(),f=e,d=k.useMemo(()=>{var F;return((F=f==null?void 0:f.response)==null?void 0:F.filter(L=>L.location?L.location===t:t==="belowStimulus"))||[]},[f==null?void 0:f.response,t]),h=nYe(d,a,l||{}),[p,m]=k.useState(void 0),{iframeAnswers:g,iframeProvenance:y}=bl(F=>F),v=(f==null?void 0:f.provideFeedback)&&(((M=f==null?void 0:f.correctAnswer)==null?void 0:M.length)||0)>0,_=(f==null?void 0:f.allowFailedTraining)===void 0?!0:f.allowFailedTraining,[w,E]=k.useState(0),S=(f==null?void 0:f.trainingAttempts)||2,[T,C]=k.useState(!1),A=t===((f==null?void 0:f.nextButtonLocation)||"belowStimulus");k.useEffect(()=>{const F=d.find(L=>L.type==="iframe");if(g&&F){const L=F.id;h.setValues({...h.values,[L]:g[L]})}},[g]),k.useEffect(()=>{y&&m(y)},[y]),k.useEffect(()=>{i(o({location:t,identifier:`${u}_${a}`,status:h.isValid(),values:Fp(h.values),provenanceGraph:p}))},[h.values,u,a,t,i,o,p]);const[R,N]=k.useState(Object.fromEntries(d.map(F=>[F.id,{visible:!1,title:"Correct Answer",message:"The correct answer is: ",color:"green"}]))),O=(F,L,B,U,H)=>{N(P=>({...P,[F]:{visible:L,title:B,message:U,color:H}}))},D=()=>{const F=w+1;E(F);const L=Object.fromEntries(d.map(B=>{var P,z;const U=(z=(P=f.correctAnswer)==null?void 0:P.find(W=>W.id===B.id))==null?void 0:z.answer,H=h.values[B.id];return[B.id,Array.isArray(H)?typeof U=="string"?H.length===1&&U===H[0]:H.length===U.length&&H.every(W=>U.includes(W)):U===H]}));v&&(d.forEach(B=>{var U;if(L[B.id]&&!((U=R[B.id])!=null&&U.message.includes("You've failed to answer this question correctly")))O(B.id,!0,"Correct Answer","You have answered the question correctly.","green");else{let H="";F>=S?(H=`You didn't answer this question correctly after ${S} attempts. ${_?"You can continue to the next question.":"Unfortunately you have not met the criteria for continuing this study."}`,_||setTimeout(()=>{c("./__trainingFailed")},5e3)):S-F===1?H="Please try again. You have 1 attempt left.":H=`Please try again. You have ${S-F} attempts left.`,O(B.id,!0,"Incorrect Answer",H,"red")}}),C(_&&F>=S||Object.values(L).every(B=>B)&&F<=S))};return b.jsxs("div",{style:r,children:[d.map((F,L)=>{var U,H;const B=(H=(U=f.correctAnswer)==null?void 0:U.find(P=>P.id===F.id))==null?void 0:H.answer;return b.jsx(Yn.Fragment,{children:F.hidden?"":b.jsxs(b.Fragment,{children:[b.jsx(fYe,{storedAnswer:l?l[F.id]:void 0,answer:{...h.getInputProps(F.id,{type:F.type==="checkbox"?"checkbox":"input"})},response:F,index:L+1}),R[F.id].visible&&b.jsxs(h_,{mb:"md",title:R[F.id].title,color:R[F.id].color,children:[R[F.id].message," ",R[F.id].message.includes("Please try again")&&b.jsxs(b.Fragment,{children:["Please"," ",b.jsx(Mm,{style:{fontSize:14},onClick:()=>i(s()),children:"click here"})," ","and read the help text carefully."]}),b.jsx("br",{}),b.jsx("br",{}),w>=S&&B&&` The correct answer was: ${B}.`]})]})},`${F.id}-${a}`)}),b.jsxs(qs,{justify:"right",gap:"xs",children:[v&&A&&b.jsx(on,{onClick:()=>D(),disabled:!h.isValid(),children:"Check Answer"}),A&&b.jsx(MGe,{disabled:v&&!T||!h.isValid(),label:f.nextButtonText||"Next"})]})]})}const Dw="@REVISIT_COMMS",dYe={minHeight:"500px",width:"100%",border:0};function hYe({currentConfig:e}){const{setIframeAnswers:t,setIframeProvenance:n}=Lf(),r=Ff(),i=hge(),o=k.useRef(null),s=k.useMemo(()=>crypto.randomUUID?crypto.randomUUID():`testID-${Date.now()}`,[]),a=Py(),u=$f(),l=k.useCallback((c,f)=>{var d,h;(h=(d=o.current)==null?void 0:d.contentWindow)==null||h.postMessage({error:!1,type:`${Dw}/${c}`,iframeId:s,message:f},"*")},[o,s]);return k.useEffect(()=>{const c=f=>{const{data:d}=f;if(typeof d=="object"&&s===d.iframeId)switch(d.type){case`${Dw}/WINDOW_READY`:e.parameters&&l("STUDY_DATA",e.parameters);break;case`${Dw}/READY`:o.current&&(o.current.style.height=`${d.message.documentHeight}px`);break;case`${Dw}/ANSWERS`:r(t(d.message));break;case`${Dw}/PROVENANCE`:r(n(d.message));break}};return window.addEventListener("message",c),()=>window.removeEventListener("message",c)},[r,i,s,u,e,l,t,n]),b.jsx("iframe",{ref:o,src:`${Ra}${e.path}?trialid=${a}&id=${s}`,style:dYe})}async function $z(e){const n=await(await fetch(`${Ra}${e}`)).text();if(!n.includes("<title>reVISit</title>"))return n}function P0({email:e,path:t}){const n=jm();return b.jsxs(sl,{fluid:!0,my:50,maw:800,mx:"auto",children:[b.jsx(kr,{order:2,children:b.jsx(je,{span:!0,c:"orange",children:"404"})}),b.jsxs(je,{children:[b.jsx(je,{span:!0,fw:700,children:t||n.pathname})," ","not Found."]}),b.jsx(cu,{h:"lg"}),b.jsxs(ec,{children:[b.jsx(ec.Item,{children:b.jsx(je,{children:"If you're trying to access your study please check the URL and verify that the global config file is correctly configured. Then try again."})}),b.jsx(ec.Item,{children:b.jsxs(je,{children:["If you're a participant, please contact the study administrator"," ",e&&b.jsxs(b.Fragment,{children:["at"," ",b.jsxs(Mm,{c:"blue",href:`mailto:${e}`,children:[e," "]})]}),"."]})})]})]})}const pYe={maxWidth:"100%"};function mYe({currentConfig:e}){const t={...pYe,...e.style},[n,r]=k.useState(!0),[i,o]=k.useState(!1);return k.useEffect(()=>{async function s(){const a=await $z(e.path);o(!!a),r(!1)}s()},[e]),n||i?b.jsx(Fm,{mx:"auto",src:`${Ra}${e.path}`,style:t}):b.jsx(P0,{path:e.path})}function Md(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function gYe(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function k_(e){let t,n,r;e.length!==2?(t=Md,n=(a,u)=>Md(e(a),u),r=(a,u)=>e(a)-u):(t=e===Md||e===gYe?e:yYe,n=e,r=e);function i(a,u,l=0,c=a.length){if(l<c){if(t(u,u)!==0)return c;do{const f=l+c>>>1;n(a[f],u)<0?l=f+1:c=f}while(l<c)}return l}function o(a,u,l=0,c=a.length){if(l<c){if(t(u,u)!==0)return c;do{const f=l+c>>>1;n(a[f],u)<=0?l=f+1:c=f}while(l<c)}return l}function s(a,u,l=0,c=a.length){const f=i(a,u,l,c-1);return f>l&&r(a[f-1],u)>-r(a[f],u)?f-1:f}return{left:i,center:s,right:o}}function yYe(){return 0}function Bge(e){return e===null?NaN:+e}function*vYe(e,t){if(t===void 0)for(let n of e)n!=null&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)(r=t(r,++n,e))!=null&&(r=+r)>=r&&(yield r)}}const Uge=k_(Md),sm=Uge.right,bYe=Uge.left;k_(Bge).center;function _Ye(e,t){let n=0,r,i=0,o=0;if(t===void 0)for(let s of e)s!=null&&(s=+s)>=s&&(r=s-i,i+=r/++n,o+=r*(s-i));else{let s=-1;for(let a of e)(a=t(a,++s,e))!=null&&(a=+a)>=a&&(r=a-i,i+=r/++n,o+=r*(a-i))}if(n>1)return o/(n-1)}function wYe(e,t){const n=_Ye(e,t);return n&&Math.sqrt(n)}function EYe(e,t){let n,r;for(const i of e)i!=null&&(n===void 0?i>=i&&(n=r=i):(n>i&&(n=i),r<i&&(r=i)));return[n,r]}class zs{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const n=this._partials;let r=0;for(let i=0;i<this._n&&i<32;i++){const o=n[i],s=t+o,a=Math.abs(t)<Math.abs(o)?t-(s-o):o-(s-t);a&&(n[r++]=a),t=s}return n[r]=t,this._n=r+1,this}valueOf(){const t=this._partials;let n=this._n,r,i,o,s=0;if(n>0){for(s=t[--n];n>0&&(r=s,i=t[--n],s=r+i,o=i-(s-r),!o););n>0&&(o<0&&t[n-1]<0||o>0&&t[n-1]>0)&&(i=o*2,r=s+i,i==r-s&&(s=r))}return s}}class M5 extends Map{constructor(t,n=Hge){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,i]of t)this.set(r,i)}get(t){return super.get(L5(this,t))}has(t){return super.has(L5(this,t))}set(t,n){return super.set(zge(this,t),n)}delete(t){return super.delete(Vge(this,t))}}class TR extends Set{constructor(t,n=Hge){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const r of t)this.add(r)}has(t){return super.has(L5(this,t))}add(t){return super.add(zge(this,t))}delete(t){return super.delete(Vge(this,t))}}function L5({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function zge({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function Vge({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function Hge(e){return e!==null&&typeof e=="object"?e.valueOf():e}function xYe(e){return e}function TYe(e,t,...n){return SYe(e,xYe,t,n)}function SYe(e,t,n,r){return function i(o,s){if(s>=r.length)return n(o);const a=new M5,u=r[s++];let l=-1;for(const c of o){const f=u(c,++l,o),d=a.get(f);d?d.push(c):a.set(f,[c])}for(const[c,f]of a)a.set(c,i(f,s));return t(a)}(e,0)}function CYe(e,t){return Array.from(t,n=>e[n])}function AYe(e=Md){if(e===Md)return qge;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const r=e(t,n);return r||r===0?r:(e(n,n)===0)-(e(t,t)===0)}}function qge(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const kYe=Math.sqrt(50),IYe=Math.sqrt(10),RYe=Math.sqrt(2);function SR(e,t,n){const r=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(r)),o=r/Math.pow(10,i),s=o>=kYe?10:o>=IYe?5:o>=RYe?2:1;let a,u,l;return i<0?(l=Math.pow(10,-i)/s,a=Math.round(e*l),u=Math.round(t*l),a/l<e&&++a,u/l>t&&--u,l=-l):(l=Math.pow(10,i)*s,a=Math.round(e/l),u=Math.round(t/l),a*l<e&&++a,u*l>t&&--u),u<a&&.5<=n&&n<2?SR(e,t,n*2):[a,u,l]}function F5(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const r=t<e,[i,o,s]=r?SR(t,e,n):SR(e,t,n);if(!(o>=i))return[];const a=o-i+1,u=new Array(a);if(r)if(s<0)for(let l=0;l<a;++l)u[l]=(o-l)/-s;else for(let l=0;l<a;++l)u[l]=(o-l)*s;else if(s<0)for(let l=0;l<a;++l)u[l]=(i+l)/-s;else for(let l=0;l<a;++l)u[l]=(i+l)*s;return u}function j5(e,t,n){return t=+t,e=+e,n=+n,SR(e,t,n)[2]}function am(e,t,n){t=+t,e=+e,n=+n;const r=t<e,i=r?j5(t,e,n):j5(e,t,n);return(r?-1:1)*(i<0?1/-i:i)}function Ld(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function CR(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n>i||n===void 0&&i>=i)&&(n=i)}return n}function Wge(e,t,n=0,r=1/0,i){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(e.length-1,r)),!(n<=t&&t<=r))return e;for(i=i===void 0?qge:AYe(i);r>n;){if(r-n>600){const u=r-n+1,l=t-n+1,c=Math.log(u),f=.5*Math.exp(2*c/3),d=.5*Math.sqrt(c*f*(u-f)/u)*(l-u/2<0?-1:1),h=Math.max(n,Math.floor(t-l*f/u+d)),p=Math.min(r,Math.floor(t+(u-l)*f/u+d));Wge(e,t,h,p,i)}const o=e[t];let s=n,a=r;for(Ow(e,n,t),i(e[r],o)>0&&Ow(e,n,r);s<a;){for(Ow(e,s,a),++s,--a;i(e[s],o)<0;)++s;for(;i(e[a],o)>0;)--a}i(e[n],o)===0?Ow(e,n,a):(++a,Ow(e,a,r)),a<=t&&(n=a+1),t<=a&&(r=a-1)}return e}function Ow(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function OT(e,t,n){if(e=Float64Array.from(vYe(e,n)),!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return CR(e);if(t>=1)return Ld(e);var r,i=(r-1)*t,o=Math.floor(i),s=Ld(Wge(e,o).subarray(0,o+1)),a=CR(e.subarray(o+1));return s+(a-s)*(i-o)}}function Gge(e,t,n=Bge){if(!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,o=Math.floor(i),s=+n(e[o],o,e),a=+n(e[o+1],o+1,e);return s+(a-s)*(i-o)}}function Yge(e,t){let n=0,r=0;if(t===void 0)for(let i of e)i!=null&&(i=+i)>=i&&(++n,r+=i);else{let i=-1;for(let o of e)(o=t(o,++i,e))!=null&&(o=+o)>=o&&(++n,r+=o)}if(n)return r/n}function Kge(e,t){return OT(e,.5,t)}function*NYe(e){for(const t of e)yield*t}function Xge(e){return Array.from(NYe(e))}function Ea(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((t-e)/n))|0,o=new Array(i);++r<i;)o[r]=e+r*n;return o}function Qge(e,t){let n=0;for(let r of e)(r=+r)&&(n+=r);return n}function PYe(e,...t){e=new TR(e),t=t.map(DYe);e:for(const n of e)for(const r of t)if(!r.has(n)){e.delete(n);continue e}return e}function DYe(e){return e instanceof TR?e:new TR(e)}function OYe(...e){const t=new TR;for(const n of e)for(const r of n)t.add(r);return t}function $Ye(e){return e}var NL=1,PL=2,B5=3,xE=4,Bee=1e-6;function MYe(e){return"translate("+e+",0)"}function LYe(e){return"translate(0,"+e+")"}function FYe(e){return t=>+e(t)}function jYe(e,t){return t=Math.max(0,e.bandwidth()-t*2)/2,e.round()&&(t=Math.round(t)),n=>+e(n)+t}function BYe(){return!this.__axis}function Jge(e,t){var n=[],r=null,i=null,o=6,s=6,a=3,u=typeof window<"u"&&window.devicePixelRatio>1?0:.5,l=e===NL||e===xE?-1:1,c=e===xE||e===PL?"x":"y",f=e===NL||e===B5?MYe:LYe;function d(h){var p=r??(t.ticks?t.ticks.apply(t,n):t.domain()),m=i??(t.tickFormat?t.tickFormat.apply(t,n):$Ye),g=Math.max(o,0)+a,y=t.range(),v=+y[0]+u,_=+y[y.length-1]+u,w=(t.bandwidth?jYe:FYe)(t.copy(),u),E=h.selection?h.selection():h,S=E.selectAll(".domain").data([null]),T=E.selectAll(".tick").data(p,t).order(),C=T.exit(),A=T.enter().append("g").attr("class","tick"),R=T.select("line"),N=T.select("text");S=S.merge(S.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),T=T.merge(A),R=R.merge(A.append("line").attr("stroke","currentColor").attr(c+"2",l*o)),N=N.merge(A.append("text").attr("fill","currentColor").attr(c,l*g).attr("dy",e===NL?"0em":e===B5?"0.71em":"0.32em")),h!==E&&(S=S.transition(h),T=T.transition(h),R=R.transition(h),N=N.transition(h),C=C.transition(h).attr("opacity",Bee).attr("transform",function(O){return isFinite(O=w(O))?f(O+u):this.getAttribute("transform")}),A.attr("opacity",Bee).attr("transform",function(O){var D=this.parentNode.__axis;return f((D&&isFinite(D=D(O))?D:w(O))+u)})),C.remove(),S.attr("d",e===xE||e===PL?s?"M"+l*s+","+v+"H"+u+"V"+_+"H"+l*s:"M"+u+","+v+"V"+_:s?"M"+v+","+l*s+"V"+u+"H"+_+"V"+l*s:"M"+v+","+u+"H"+_),T.attr("opacity",1).attr("transform",function(O){return f(w(O)+u)}),R.attr(c+"2",l*o),N.attr(c,l*g).text(m),E.filter(BYe).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",e===PL?"start":e===xE?"end":"middle"),E.each(function(){this.__axis=w})}return d.scale=function(h){return arguments.length?(t=h,d):t},d.ticks=function(){return n=Array.from(arguments),d},d.tickArguments=function(h){return arguments.length?(n=h==null?[]:Array.from(h),d):n.slice()},d.tickValues=function(h){return arguments.length?(r=h==null?null:Array.from(h),d):r&&r.slice()},d.tickFormat=function(h){return arguments.length?(i=h,d):i},d.tickSize=function(h){return arguments.length?(o=s=+h,d):o},d.tickSizeInner=function(h){return arguments.length?(o=+h,d):o},d.tickSizeOuter=function(h){return arguments.length?(s=+h,d):s},d.tickPadding=function(h){return arguments.length?(a=+h,d):a},d.offset=function(h){return arguments.length?(u=+h,d):u},d}function UYe(e){return Jge(B5,e)}function zYe(e){return Jge(xE,e)}var VYe={value:()=>{}};function Mz(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new jk(n)}function jk(e){this._=e}function HYe(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}jk.prototype=Mz.prototype={constructor:jk,on:function(e,t){var n=this._,r=HYe(e+"",n),i,o=-1,s=r.length;if(arguments.length<2){for(;++o<s;)if((i=(e=r[o]).type)&&(i=qYe(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++o<s;)if(i=(e=r[o]).type)n[i]=Uee(n[i],e.name,t);else if(t==null)for(i in n)n[i]=Uee(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new jk(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,o;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(o=this._[e],r=0,i=o.length;r<i;++r)o[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,o=r.length;i<o;++i)r[i].value.apply(t,n)}};function qYe(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function Uee(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=VYe,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var U5="http://www.w3.org/1999/xhtml";const zee={svg:"http://www.w3.org/2000/svg",xhtml:U5,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function aO(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),zee.hasOwnProperty(t)?{space:zee[t],local:e}:e}function WYe(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===U5&&t.documentElement.namespaceURI===U5?t.createElement(e):t.createElementNS(n,e)}}function GYe(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Zge(e){var t=aO(e);return(t.local?GYe:WYe)(t)}function YYe(){}function Lz(e){return e==null?YYe:function(){return this.querySelector(e)}}function KYe(e){typeof e!="function"&&(e=Lz(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o=t[i],s=o.length,a=r[i]=new Array(s),u,l,c=0;c<s;++c)(u=o[c])&&(l=e.call(u,u.__data__,c,o))&&("__data__"in u&&(l.__data__=u.__data__),a[c]=l);return new bu(r,this._parents)}function XYe(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function QYe(){return[]}function e0e(e){return e==null?QYe:function(){return this.querySelectorAll(e)}}function JYe(e){return function(){return XYe(e.apply(this,arguments))}}function ZYe(e){typeof e=="function"?e=JYe(e):e=e0e(e);for(var t=this._groups,n=t.length,r=[],i=[],o=0;o<n;++o)for(var s=t[o],a=s.length,u,l=0;l<a;++l)(u=s[l])&&(r.push(e.call(u,u.__data__,l,s)),i.push(u));return new bu(r,i)}function t0e(e){return function(){return this.matches(e)}}function n0e(e){return function(t){return t.matches(e)}}var eKe=Array.prototype.find;function tKe(e){return function(){return eKe.call(this.children,e)}}function nKe(){return this.firstElementChild}function rKe(e){return this.select(e==null?nKe:tKe(typeof e=="function"?e:n0e(e)))}var iKe=Array.prototype.filter;function oKe(){return Array.from(this.children)}function sKe(e){return function(){return iKe.call(this.children,e)}}function aKe(e){return this.selectAll(e==null?oKe:sKe(typeof e=="function"?e:n0e(e)))}function uKe(e){typeof e!="function"&&(e=t0e(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o=t[i],s=o.length,a=r[i]=[],u,l=0;l<s;++l)(u=o[l])&&e.call(u,u.__data__,l,o)&&a.push(u);return new bu(r,this._parents)}function r0e(e){return new Array(e.length)}function lKe(){return new bu(this._enter||this._groups.map(r0e),this._parents)}function AR(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}AR.prototype={constructor:AR,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function cKe(e){return function(){return e}}function fKe(e,t,n,r,i,o){for(var s=0,a,u=t.length,l=o.length;s<l;++s)(a=t[s])?(a.__data__=o[s],r[s]=a):n[s]=new AR(e,o[s]);for(;s<u;++s)(a=t[s])&&(i[s]=a)}function dKe(e,t,n,r,i,o,s){var a,u,l=new Map,c=t.length,f=o.length,d=new Array(c),h;for(a=0;a<c;++a)(u=t[a])&&(d[a]=h=s.call(u,u.__data__,a,t)+"",l.has(h)?i[a]=u:l.set(h,u));for(a=0;a<f;++a)h=s.call(e,o[a],a,o)+"",(u=l.get(h))?(r[a]=u,u.__data__=o[a],l.delete(h)):n[a]=new AR(e,o[a]);for(a=0;a<c;++a)(u=t[a])&&l.get(d[a])===u&&(i[a]=u)}function hKe(e){return e.__data__}function pKe(e,t){if(!arguments.length)return Array.from(this,hKe);var n=t?dKe:fKe,r=this._parents,i=this._groups;typeof e!="function"&&(e=cKe(e));for(var o=i.length,s=new Array(o),a=new Array(o),u=new Array(o),l=0;l<o;++l){var c=r[l],f=i[l],d=f.length,h=mKe(e.call(c,c&&c.__data__,l,r)),p=h.length,m=a[l]=new Array(p),g=s[l]=new Array(p),y=u[l]=new Array(d);n(c,f,m,g,y,h,t);for(var v=0,_=0,w,E;v<p;++v)if(w=m[v]){for(v>=_&&(_=v+1);!(E=g[_])&&++_<p;);w._next=E||null}}return s=new bu(s,r),s._enter=a,s._exit=u,s}function mKe(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function gKe(){return new bu(this._exit||this._groups.map(r0e),this._parents)}function yKe(e,t,n){var r=this.enter(),i=this,o=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),n==null?o.remove():n(o),r&&i?r.merge(i).order():i}function vKe(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,i=n.length,o=r.length,s=Math.min(i,o),a=new Array(i),u=0;u<s;++u)for(var l=n[u],c=r[u],f=l.length,d=a[u]=new Array(f),h,p=0;p<f;++p)(h=l[p]||c[p])&&(d[p]=h);for(;u<i;++u)a[u]=n[u];return new bu(a,this._parents)}function bKe(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],i=r.length-1,o=r[i],s;--i>=0;)(s=r[i])&&(o&&s.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(s,o),o=s);return this}function _Ke(e){e||(e=wKe);function t(f,d){return f&&d?e(f.__data__,d.__data__):!f-!d}for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o){for(var s=n[o],a=s.length,u=i[o]=new Array(a),l,c=0;c<a;++c)(l=s[c])&&(u[c]=l);u.sort(t)}return new bu(i,this._parents).order()}function wKe(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function EKe(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function xKe(){return Array.from(this)}function TKe(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,o=r.length;i<o;++i){var s=r[i];if(s)return s}return null}function SKe(){let e=0;for(const t of this)++e;return e}function CKe(){return!this.node()}function AKe(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i=t[n],o=0,s=i.length,a;o<s;++o)(a=i[o])&&e.call(a,a.__data__,o,i);return this}function kKe(e){return function(){this.removeAttribute(e)}}function IKe(e){return function(){this.removeAttributeNS(e.space,e.local)}}function RKe(e,t){return function(){this.setAttribute(e,t)}}function NKe(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function PKe(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function DKe(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function OKe(e,t){var n=aO(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?IKe:kKe:typeof t=="function"?n.local?DKe:PKe:n.local?NKe:RKe)(n,t))}function i0e(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function $Ke(e){return function(){this.style.removeProperty(e)}}function MKe(e,t,n){return function(){this.style.setProperty(e,t,n)}}function LKe(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function FKe(e,t,n){return arguments.length>1?this.each((t==null?$Ke:typeof t=="function"?LKe:MKe)(e,t,n??"")):hb(this.node(),e)}function hb(e,t){return e.style.getPropertyValue(t)||i0e(e).getComputedStyle(e,null).getPropertyValue(t)}function jKe(e){return function(){delete this[e]}}function BKe(e,t){return function(){this[e]=t}}function UKe(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function zKe(e,t){return arguments.length>1?this.each((t==null?jKe:typeof t=="function"?UKe:BKe)(e,t)):this.node()[e]}function o0e(e){return e.trim().split(/^|\s+/)}function Fz(e){return e.classList||new s0e(e)}function s0e(e){this._node=e,this._names=o0e(e.getAttribute("class")||"")}s0e.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function a0e(e,t){for(var n=Fz(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function u0e(e,t){for(var n=Fz(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function VKe(e){return function(){a0e(this,e)}}function HKe(e){return function(){u0e(this,e)}}function qKe(e,t){return function(){(t.apply(this,arguments)?a0e:u0e)(this,e)}}function WKe(e,t){var n=o0e(e+"");if(arguments.length<2){for(var r=Fz(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?qKe:t?VKe:HKe)(n,t))}function GKe(){this.textContent=""}function YKe(e){return function(){this.textContent=e}}function KKe(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function XKe(e){return arguments.length?this.each(e==null?GKe:(typeof e=="function"?KKe:YKe)(e)):this.node().textContent}function QKe(){this.innerHTML=""}function JKe(e){return function(){this.innerHTML=e}}function ZKe(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function eXe(e){return arguments.length?this.each(e==null?QKe:(typeof e=="function"?ZKe:JKe)(e)):this.node().innerHTML}function tXe(){this.nextSibling&&this.parentNode.appendChild(this)}function nXe(){return this.each(tXe)}function rXe(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function iXe(){return this.each(rXe)}function oXe(e){var t=typeof e=="function"?e:Zge(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function sXe(){return null}function aXe(e,t){var n=typeof e=="function"?e:Zge(e),r=t==null?sXe:typeof t=="function"?t:Lz(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function uXe(){var e=this.parentNode;e&&e.removeChild(this)}function lXe(){return this.each(uXe)}function cXe(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function fXe(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function dXe(e){return this.select(e?fXe:cXe)}function hXe(e){return arguments.length?this.property("__data__",e):this.node().__data__}function pXe(e){return function(t){e.call(this,t,this.__data__)}}function mXe(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function gXe(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,i=t.length,o;n<i;++n)o=t[n],(!e.type||o.type===e.type)&&o.name===e.name?this.removeEventListener(o.type,o.listener,o.options):t[++r]=o;++r?t.length=r:delete this.__on}}}function yXe(e,t,n){return function(){var r=this.__on,i,o=pXe(t);if(r){for(var s=0,a=r.length;s<a;++s)if((i=r[s]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=o,i.options=n),i.value=t;return}}this.addEventListener(e.type,o,n),i={type:e.type,name:e.name,value:t,listener:o,options:n},r?r.push(i):this.__on=[i]}}function vXe(e,t,n){var r=mXe(e+""),i,o=r.length,s;if(arguments.length<2){var a=this.node().__on;if(a){for(var u=0,l=a.length,c;u<l;++u)for(i=0,c=a[u];i<o;++i)if((s=r[i]).type===c.type&&s.name===c.name)return c.value}return}for(a=t?yXe:gXe,i=0;i<o;++i)this.each(a(r[i],t,n));return this}function l0e(e,t,n){var r=i0e(e),i=r.CustomEvent;typeof i=="function"?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function bXe(e,t){return function(){return l0e(this,e,t)}}function _Xe(e,t){return function(){return l0e(this,e,t.apply(this,arguments))}}function wXe(e,t){return this.each((typeof t=="function"?_Xe:bXe)(e,t))}function*EXe(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,o=r.length,s;i<o;++i)(s=r[i])&&(yield s)}var c0e=[null];function bu(e,t){this._groups=e,this._parents=t}function sC(){return new bu([[document.documentElement]],c0e)}function xXe(){return this}bu.prototype=sC.prototype={constructor:bu,select:KYe,selectAll:ZYe,selectChild:rKe,selectChildren:aKe,filter:uKe,data:pKe,enter:lKe,exit:gKe,join:yKe,merge:vKe,selection:xXe,order:bKe,sort:_Ke,call:EKe,nodes:xKe,node:TKe,size:SKe,empty:CKe,each:AKe,attr:OKe,style:FKe,property:zKe,classed:WKe,text:XKe,html:eXe,raise:nXe,lower:iXe,append:oXe,insert:aXe,remove:lXe,clone:dXe,datum:hXe,on:vXe,dispatch:wXe,[Symbol.iterator]:EXe};function Ex(e){return typeof e=="string"?new bu([[document.querySelector(e)]],[document.documentElement]):new bu([[e]],c0e)}function TXe(e){let t;for(;t=e.sourceEvent;)e=t;return e}function SXe(e,t){if(e=TXe(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}function I_(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function aC(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function zm(){}var D0=.7,pb=1/D0,k1="\\s*([+-]?\\d+)\\s*",$T="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",rf="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",CXe=/^#([0-9a-f]{3,8})$/,AXe=new RegExp(`^rgb\\(${k1},${k1},${k1}\\)$`),kXe=new RegExp(`^rgb\\(${rf},${rf},${rf}\\)$`),IXe=new RegExp(`^rgba\\(${k1},${k1},${k1},${$T}\\)$`),RXe=new RegExp(`^rgba\\(${rf},${rf},${rf},${$T}\\)$`),NXe=new RegExp(`^hsl\\(${$T},${rf},${rf}\\)$`),PXe=new RegExp(`^hsla\\(${$T},${rf},${rf},${$T}\\)$`),Vee={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};I_(zm,O0,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Hee,formatHex:Hee,formatHex8:DXe,formatHsl:OXe,formatRgb:qee,toString:qee});function Hee(){return this.rgb().formatHex()}function DXe(){return this.rgb().formatHex8()}function OXe(){return f0e(this).formatHsl()}function qee(){return this.rgb().formatRgb()}function O0(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=CXe.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?Wee(t):n===3?new ao(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?f2(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?f2(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=AXe.exec(e))?new ao(t[1],t[2],t[3],1):(t=kXe.exec(e))?new ao(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=IXe.exec(e))?f2(t[1],t[2],t[3],t[4]):(t=RXe.exec(e))?f2(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=NXe.exec(e))?Kee(t[1],t[2]/100,t[3]/100,1):(t=PXe.exec(e))?Kee(t[1],t[2]/100,t[3]/100,t[4]):Vee.hasOwnProperty(e)?Wee(Vee[e]):e==="transparent"?new ao(NaN,NaN,NaN,0):null}function Wee(e){return new ao(e>>16&255,e>>8&255,e&255,1)}function f2(e,t,n,r){return r<=0&&(e=t=n=NaN),new ao(e,t,n,r)}function jz(e){return e instanceof zm||(e=O0(e)),e?(e=e.rgb(),new ao(e.r,e.g,e.b,e.opacity)):new ao}function um(e,t,n,r){return arguments.length===1?jz(e):new ao(e,t,n,r??1)}function ao(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}I_(ao,um,aC(zm,{brighter(e){return e=e==null?pb:Math.pow(pb,e),new ao(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?D0:Math.pow(D0,e),new ao(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new ao(d0(this.r),d0(this.g),d0(this.b),kR(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Gee,formatHex:Gee,formatHex8:$Xe,formatRgb:Yee,toString:Yee}));function Gee(){return`#${n0(this.r)}${n0(this.g)}${n0(this.b)}`}function $Xe(){return`#${n0(this.r)}${n0(this.g)}${n0(this.b)}${n0((isNaN(this.opacity)?1:this.opacity)*255)}`}function Yee(){const e=kR(this.opacity);return`${e===1?"rgb(":"rgba("}${d0(this.r)}, ${d0(this.g)}, ${d0(this.b)}${e===1?")":`, ${e})`}`}function kR(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function d0(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function n0(e){return e=d0(e),(e<16?"0":"")+e.toString(16)}function Kee(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Ul(e,t,n,r)}function f0e(e){if(e instanceof Ul)return new Ul(e.h,e.s,e.l,e.opacity);if(e instanceof zm||(e=O0(e)),!e)return new Ul;if(e instanceof Ul)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),o=Math.max(t,n,r),s=NaN,a=o-i,u=(o+i)/2;return a?(t===o?s=(n-r)/a+(n<r)*6:n===o?s=(r-t)/a+2:s=(t-n)/a+4,a/=u<.5?o+i:2-o-i,s*=60):a=u>0&&u<1?0:s,new Ul(s,a,u,e.opacity)}function IR(e,t,n,r){return arguments.length===1?f0e(e):new Ul(e,t,n,r??1)}function Ul(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}I_(Ul,IR,aC(zm,{brighter(e){return e=e==null?pb:Math.pow(pb,e),new Ul(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?D0:Math.pow(D0,e),new Ul(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new ao(DL(e>=240?e-240:e+120,i,r),DL(e,i,r),DL(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new Ul(Xee(this.h),d2(this.s),d2(this.l),kR(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=kR(this.opacity);return`${e===1?"hsl(":"hsla("}${Xee(this.h)}, ${d2(this.s)*100}%, ${d2(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Xee(e){return e=(e||0)%360,e<0?e+360:e}function d2(e){return Math.max(0,Math.min(1,e||0))}function DL(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const d0e=Math.PI/180,h0e=180/Math.PI,RR=18,p0e=.96422,m0e=1,g0e=.82521,y0e=4/29,I1=6/29,v0e=3*I1*I1,MXe=I1*I1*I1;function b0e(e){if(e instanceof of)return new of(e.l,e.a,e.b,e.opacity);if(e instanceof Sd)return _0e(e);e instanceof ao||(e=jz(e));var t=LL(e.r),n=LL(e.g),r=LL(e.b),i=OL((.2225045*t+.7168786*n+.0606169*r)/m0e),o,s;return t===n&&n===r?o=s=i:(o=OL((.4360747*t+.3850649*n+.1430804*r)/p0e),s=OL((.0139322*t+.0971045*n+.7141733*r)/g0e)),new of(116*i-16,500*(o-i),200*(i-s),e.opacity)}function NR(e,t,n,r){return arguments.length===1?b0e(e):new of(e,t,n,r??1)}function of(e,t,n,r){this.l=+e,this.a=+t,this.b=+n,this.opacity=+r}I_(of,NR,aC(zm,{brighter(e){return new of(this.l+RR*(e??1),this.a,this.b,this.opacity)},darker(e){return new of(this.l-RR*(e??1),this.a,this.b,this.opacity)},rgb(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return t=p0e*$L(t),e=m0e*$L(e),n=g0e*$L(n),new ao(ML(3.1338561*t-1.6168667*e-.4906146*n),ML(-.9787684*t+1.9161415*e+.033454*n),ML(.0719453*t-.2289914*e+1.4052427*n),this.opacity)}}));function OL(e){return e>MXe?Math.pow(e,1/3):e/v0e+y0e}function $L(e){return e>I1?e*e*e:v0e*(e-y0e)}function ML(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function LL(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function LXe(e){if(e instanceof Sd)return new Sd(e.h,e.c,e.l,e.opacity);if(e instanceof of||(e=b0e(e)),e.a===0&&e.b===0)return new Sd(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*h0e;return new Sd(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function PR(e,t,n,r){return arguments.length===1?LXe(e):new Sd(e,t,n,r??1)}function Sd(e,t,n,r){this.h=+e,this.c=+t,this.l=+n,this.opacity=+r}function _0e(e){if(isNaN(e.h))return new of(e.l,0,0,e.opacity);var t=e.h*d0e;return new of(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}I_(Sd,PR,aC(zm,{brighter(e){return new Sd(this.h,this.c,this.l+RR*(e??1),this.opacity)},darker(e){return new Sd(this.h,this.c,this.l-RR*(e??1),this.opacity)},rgb(){return _0e(this).rgb()}}));var w0e=-.14861,Bz=1.78277,Uz=-.29227,uO=-.90649,MT=1.97294,Qee=MT*uO,Jee=MT*Bz,Zee=Bz*Uz-uO*w0e;function FXe(e){if(e instanceof h0)return new h0(e.h,e.s,e.l,e.opacity);e instanceof ao||(e=jz(e));var t=e.r/255,n=e.g/255,r=e.b/255,i=(Zee*r+Qee*t-Jee*n)/(Zee+Qee-Jee),o=r-i,s=(MT*(n-i)-Uz*o)/uO,a=Math.sqrt(s*s+o*o)/(MT*i*(1-i)),u=a?Math.atan2(s,o)*h0e-120:NaN;return new h0(u<0?u+360:u,a,i,e.opacity)}function z5(e,t,n,r){return arguments.length===1?FXe(e):new h0(e,t,n,r??1)}function h0(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}I_(h0,z5,aC(zm,{brighter(e){return e=e==null?pb:Math.pow(pb,e),new h0(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?D0:Math.pow(D0,e),new h0(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=isNaN(this.h)?0:(this.h+120)*d0e,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),r=Math.cos(e),i=Math.sin(e);return new ao(255*(t+n*(w0e*r+Bz*i)),255*(t+n*(Uz*r+uO*i)),255*(t+n*(MT*r)),this.opacity)}}));function E0e(e,t,n,r,i){var o=e*e,s=o*e;return((1-3*e+3*o-s)*t+(4-6*o+3*s)*n+(1+3*e+3*o-3*s)*r+s*i)/6}function x0e(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),i=e[r],o=e[r+1],s=r>0?e[r-1]:2*i-o,a=r<t-1?e[r+2]:2*o-i;return E0e((n-r/t)*t,s,i,o,a)}}function T0e(e){var t=e.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*t),i=e[(r+t-1)%t],o=e[r%t],s=e[(r+1)%t],a=e[(r+2)%t];return E0e((n-r/t)*t,i,o,s,a)}}const lO=e=>()=>e;function S0e(e,t){return function(n){return e+n*t}}function jXe(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function cO(e,t){var n=t-e;return n?S0e(e,n>180||n<-180?n-360*Math.round(n/360):n):lO(isNaN(e)?t:e)}function BXe(e){return(e=+e)==1?uo:function(t,n){return n-t?jXe(t,n,e):lO(isNaN(t)?n:t)}}function uo(e,t){var n=t-e;return n?S0e(e,n):lO(isNaN(e)?t:e)}const LT=function e(t){var n=BXe(t);function r(i,o){var s=n((i=um(i)).r,(o=um(o)).r),a=n(i.g,o.g),u=n(i.b,o.b),l=uo(i.opacity,o.opacity);return function(c){return i.r=s(c),i.g=a(c),i.b=u(c),i.opacity=l(c),i+""}}return r.gamma=e,r}(1);function C0e(e){return function(t){var n=t.length,r=new Array(n),i=new Array(n),o=new Array(n),s,a;for(s=0;s<n;++s)a=um(t[s]),r[s]=a.r||0,i[s]=a.g||0,o[s]=a.b||0;return r=e(r),i=e(i),o=e(o),a.opacity=1,function(u){return a.r=r(u),a.g=i(u),a.b=o(u),a+""}}}var UXe=C0e(x0e),zXe=C0e(T0e);function zz(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(o){for(i=0;i<n;++i)r[i]=e[i]*(1-o)+t[i]*o;return r}}function A0e(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function VXe(e,t){return(A0e(t)?zz:k0e)(e,t)}function k0e(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),o=new Array(n),s;for(s=0;s<r;++s)i[s]=Vm(e[s],t[s]);for(;s<n;++s)o[s]=t[s];return function(a){for(s=0;s<r;++s)o[s]=i[s](a);return o}}function I0e(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function Hu(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function R0e(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=Vm(e[i],t[i]):r[i]=t[i];return function(o){for(i in n)r[i]=n[i](o);return r}}var V5=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,FL=new RegExp(V5.source,"g");function HXe(e){return function(){return e}}function qXe(e){return function(t){return e(t)+""}}function Vz(e,t){var n=V5.lastIndex=FL.lastIndex=0,r,i,o,s=-1,a=[],u=[];for(e=e+"",t=t+"";(r=V5.exec(e))&&(i=FL.exec(t));)(o=i.index)>n&&(o=t.slice(n,o),a[s]?a[s]+=o:a[++s]=o),(r=r[0])===(i=i[0])?a[s]?a[s]+=i:a[++s]=i:(a[++s]=null,u.push({i:s,x:Hu(r,i)})),n=FL.lastIndex;return n<t.length&&(o=t.slice(n),a[s]?a[s]+=o:a[++s]=o),a.length<2?u[0]?qXe(u[0].x):HXe(t):(t=u.length,function(l){for(var c=0,f;c<t;++c)a[(f=u[c]).i]=f.x(l);return a.join("")})}function Vm(e,t){var n=typeof t,r;return t==null||n==="boolean"?lO(t):(n==="number"?Hu:n==="string"?(r=O0(t))?(t=r,LT):Vz:t instanceof O0?LT:t instanceof Date?I0e:A0e(t)?zz:Array.isArray(t)?k0e:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?R0e:Hu)(e,t)}function WXe(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}}function GXe(e,t){var n=cO(+e,+t);return function(r){var i=n(r);return i-360*Math.floor(i/360)}}function uC(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var ete=180/Math.PI,H5={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function N0e(e,t,n,r,i,o){var s,a,u;return(s=Math.sqrt(e*e+t*t))&&(e/=s,t/=s),(u=e*n+t*r)&&(n-=e*u,r-=t*u),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,u/=a),e*r<t*n&&(e=-e,t=-t,u=-u,s=-s),{translateX:i,translateY:o,rotate:Math.atan2(t,e)*ete,skewX:Math.atan(u)*ete,scaleX:s,scaleY:a}}var h2;function YXe(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?H5:N0e(t.a,t.b,t.c,t.d,t.e,t.f)}function KXe(e){return e==null||(h2||(h2=document.createElementNS("http://www.w3.org/2000/svg","g")),h2.setAttribute("transform",e),!(e=h2.transform.baseVal.consolidate()))?H5:(e=e.matrix,N0e(e.a,e.b,e.c,e.d,e.e,e.f))}function P0e(e,t,n,r){function i(l){return l.length?l.pop()+" ":""}function o(l,c,f,d,h,p){if(l!==f||c!==d){var m=h.push("translate(",null,t,null,n);p.push({i:m-4,x:Hu(l,f)},{i:m-2,x:Hu(c,d)})}else(f||d)&&h.push("translate("+f+t+d+n)}function s(l,c,f,d){l!==c?(l-c>180?c+=360:c-l>180&&(l+=360),d.push({i:f.push(i(f)+"rotate(",null,r)-2,x:Hu(l,c)})):c&&f.push(i(f)+"rotate("+c+r)}function a(l,c,f,d){l!==c?d.push({i:f.push(i(f)+"skewX(",null,r)-2,x:Hu(l,c)}):c&&f.push(i(f)+"skewX("+c+r)}function u(l,c,f,d,h,p){if(l!==f||c!==d){var m=h.push(i(h)+"scale(",null,",",null,")");p.push({i:m-4,x:Hu(l,f)},{i:m-2,x:Hu(c,d)})}else(f!==1||d!==1)&&h.push(i(h)+"scale("+f+","+d+")")}return function(l,c){var f=[],d=[];return l=e(l),c=e(c),o(l.translateX,l.translateY,c.translateX,c.translateY,f,d),s(l.rotate,c.rotate,f,d),a(l.skewX,c.skewX,f,d),u(l.scaleX,l.scaleY,c.scaleX,c.scaleY,f,d),l=c=null,function(h){for(var p=-1,m=d.length,g;++p<m;)f[(g=d[p]).i]=g.x(h);return f.join("")}}}var D0e=P0e(YXe,"px, ","px)","deg)"),O0e=P0e(KXe,", ",")",")"),XXe=1e-12;function tte(e){return((e=Math.exp(e))+1/e)/2}function QXe(e){return((e=Math.exp(e))-1/e)/2}function JXe(e){return((e=Math.exp(2*e))-1)/(e+1)}const ZXe=function e(t,n,r){function i(o,s){var a=o[0],u=o[1],l=o[2],c=s[0],f=s[1],d=s[2],h=c-a,p=f-u,m=h*h+p*p,g,y;if(m<XXe)y=Math.log(d/l)/t,g=function(T){return[a+T*h,u+T*p,l*Math.exp(t*T*y)]};else{var v=Math.sqrt(m),_=(d*d-l*l+r*m)/(2*l*n*v),w=(d*d-l*l-r*m)/(2*d*n*v),E=Math.log(Math.sqrt(_*_+1)-_),S=Math.log(Math.sqrt(w*w+1)-w);y=(S-E)/t,g=function(T){var C=T*y,A=tte(E),R=l/(n*v)*(A*JXe(t*C+E)-QXe(E));return[a+R*h,u+R*p,l*A/tte(t*C+E)]}}return g.duration=y*1e3*t/Math.SQRT2,g}return i.rho=function(o){var s=Math.max(.001,+o),a=s*s,u=a*a;return e(s,a,u)},i}(Math.SQRT2,2,4);function $0e(e){return function(t,n){var r=e((t=IR(t)).h,(n=IR(n)).h),i=uo(t.s,n.s),o=uo(t.l,n.l),s=uo(t.opacity,n.opacity);return function(a){return t.h=r(a),t.s=i(a),t.l=o(a),t.opacity=s(a),t+""}}}const eQe=$0e(cO);var tQe=$0e(uo);function nQe(e,t){var n=uo((e=NR(e)).l,(t=NR(t)).l),r=uo(e.a,t.a),i=uo(e.b,t.b),o=uo(e.opacity,t.opacity);return function(s){return e.l=n(s),e.a=r(s),e.b=i(s),e.opacity=o(s),e+""}}function M0e(e){return function(t,n){var r=e((t=PR(t)).h,(n=PR(n)).h),i=uo(t.c,n.c),o=uo(t.l,n.l),s=uo(t.opacity,n.opacity);return function(a){return t.h=r(a),t.c=i(a),t.l=o(a),t.opacity=s(a),t+""}}}const rQe=M0e(cO);var iQe=M0e(uo);function L0e(e){return function t(n){n=+n;function r(i,o){var s=e((i=z5(i)).h,(o=z5(o)).h),a=uo(i.s,o.s),u=uo(i.l,o.l),l=uo(i.opacity,o.opacity);return function(c){return i.h=s(c),i.s=a(c),i.l=u(Math.pow(c,n)),i.opacity=l(c),i+""}}return r.gamma=t,r}(1)}const oQe=L0e(cO);var sQe=L0e(uo);function Hz(e,t){t===void 0&&(t=e,e=Vm);for(var n=0,r=t.length-1,i=t[0],o=new Array(r<0?0:r);n<r;)o[n]=e(i,i=t[++n]);return function(s){var a=Math.max(0,Math.min(r-1,Math.floor(s*=r)));return o[a](s-a)}}function aQe(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e(r/(t-1));return n}const uQe=Object.freeze(Object.defineProperty({__proto__:null,interpolate:Vm,interpolateArray:VXe,interpolateBasis:x0e,interpolateBasisClosed:T0e,interpolateCubehelix:oQe,interpolateCubehelixLong:sQe,interpolateDate:I0e,interpolateDiscrete:WXe,interpolateHcl:rQe,interpolateHclLong:iQe,interpolateHsl:eQe,interpolateHslLong:tQe,interpolateHue:GXe,interpolateLab:nQe,interpolateNumber:Hu,interpolateNumberArray:zz,interpolateObject:R0e,interpolateRgb:LT,interpolateRgbBasis:UXe,interpolateRgbBasisClosed:zXe,interpolateRound:uC,interpolateString:Vz,interpolateTransformCss:D0e,interpolateTransformSvg:O0e,interpolateZoom:ZXe,piecewise:Hz,quantize:aQe},Symbol.toStringTag,{value:"Module"}));var mb=0,TE=0,$w=0,F0e=1e3,DR,SE,OR=0,$0=0,fO=0,FT=typeof performance=="object"&&performance.now?performance:Date,j0e=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function dO(){return $0||(j0e(lQe),$0=FT.now()+fO)}function lQe(){$0=0}function jT(){this._call=this._time=this._next=null}jT.prototype=qz.prototype={constructor:jT,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?dO():+n)+(t==null?0:+t),!this._next&&SE!==this&&(SE?SE._next=this:DR=this,SE=this),this._call=e,this._time=n,q5()},stop:function(){this._call&&(this._call=null,this._time=1/0,q5())}};function qz(e,t,n){var r=new jT;return r.restart(e,t,n),r}function cQe(){dO(),++mb;for(var e=DR,t;e;)(t=$0-e._time)>=0&&e._call.call(void 0,t),e=e._next;--mb}function nte(){$0=(OR=FT.now())+fO,mb=TE=0;try{cQe()}finally{mb=0,dQe(),$0=0}}function fQe(){var e=FT.now(),t=e-OR;t>F0e&&(fO-=t,OR=e)}function dQe(){for(var e,t=DR,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:DR=n);SE=e,q5(r)}function q5(e){if(!mb){TE&&(TE=clearTimeout(TE));var t=e-$0;t>24?(e<1/0&&(TE=setTimeout(nte,e-FT.now()-fO)),$w&&($w=clearInterval($w))):($w||(OR=FT.now(),$w=setInterval(fQe,F0e)),mb=1,j0e(nte))}}function rte(e,t,n){var r=new jT;return t=t==null?0:+t,r.restart(i=>{r.stop(),e(i+t)},t,n),r}function hQe(e,t,n){var r=new jT,i=t;return t==null?(r.restart(e,t,n),r):(r._restart=r.restart,r.restart=function(o,s,a){s=+s,a=a==null?dO():+a,r._restart(function u(l){l+=i,r._restart(u,i+=s,a),o(l)},s,a)},r.restart(e,t,n),r)}var pQe=Mz("start","end","cancel","interrupt"),mQe=[],B0e=0,ite=1,W5=2,Bk=3,ote=4,G5=5,Uk=6;function hO(e,t,n,r,i,o){var s=e.__transition;if(!s)e.__transition={};else if(n in s)return;gQe(e,n,{name:t,index:r,group:i,on:pQe,tween:mQe,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:B0e})}function Wz(e,t){var n=gc(e,t);if(n.state>B0e)throw new Error("too late; already scheduled");return n}function jf(e,t){var n=gc(e,t);if(n.state>Bk)throw new Error("too late; already running");return n}function gc(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function gQe(e,t,n){var r=e.__transition,i;r[t]=n,n.timer=qz(o,0,n.time);function o(l){n.state=ite,n.timer.restart(s,n.delay,n.time),n.delay<=l&&s(l-n.delay)}function s(l){var c,f,d,h;if(n.state!==ite)return u();for(c in r)if(h=r[c],h.name===n.name){if(h.state===Bk)return rte(s);h.state===ote?(h.state=Uk,h.timer.stop(),h.on.call("interrupt",e,e.__data__,h.index,h.group),delete r[c]):+c<t&&(h.state=Uk,h.timer.stop(),h.on.call("cancel",e,e.__data__,h.index,h.group),delete r[c])}if(rte(function(){n.state===Bk&&(n.state=ote,n.timer.restart(a,n.delay,n.time),a(l))}),n.state=W5,n.on.call("start",e,e.__data__,n.index,n.group),n.state===W5){for(n.state=Bk,i=new Array(d=n.tween.length),c=0,f=-1;c<d;++c)(h=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(i[++f]=h);i.length=f+1}}function a(l){for(var c=l<n.duration?n.ease.call(null,l/n.duration):(n.timer.restart(u),n.state=G5,1),f=-1,d=i.length;++f<d;)i[f].call(e,c);n.state===G5&&(n.on.call("end",e,e.__data__,n.index,n.group),u())}function u(){n.state=Uk,n.timer.stop(),delete r[t];for(var l in r)return;delete e.__transition}}function yQe(e,t){var n=e.__transition,r,i,o=!0,s;if(n){t=t==null?null:t+"";for(s in n){if((r=n[s]).name!==t){o=!1;continue}i=r.state>W5&&r.state<G5,r.state=Uk,r.timer.stop(),r.on.call(i?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[s]}o&&delete e.__transition}}function vQe(e){return this.each(function(){yQe(this,e)})}function bQe(e,t){var n,r;return function(){var i=jf(this,e),o=i.tween;if(o!==n){r=n=o;for(var s=0,a=r.length;s<a;++s)if(r[s].name===t){r=r.slice(),r.splice(s,1);break}}i.tween=r}}function _Qe(e,t,n){var r,i;if(typeof n!="function")throw new Error;return function(){var o=jf(this,e),s=o.tween;if(s!==r){i=(r=s).slice();for(var a={name:t,value:n},u=0,l=i.length;u<l;++u)if(i[u].name===t){i[u]=a;break}u===l&&i.push(a)}o.tween=i}}function wQe(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=gc(this.node(),n).tween,i=0,o=r.length,s;i<o;++i)if((s=r[i]).name===e)return s.value;return null}return this.each((t==null?bQe:_Qe)(n,e,t))}function Gz(e,t,n){var r=e._id;return e.each(function(){var i=jf(this,r);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return gc(i,r).value[t]}}function U0e(e,t){var n;return(typeof t=="number"?Hu:t instanceof O0?LT:(n=O0(t))?(t=n,LT):Vz)(e,t)}function EQe(e){return function(){this.removeAttribute(e)}}function xQe(e){return function(){this.removeAttributeNS(e.space,e.local)}}function TQe(e,t,n){var r,i=n+"",o;return function(){var s=this.getAttribute(e);return s===i?null:s===r?o:o=t(r=s,n)}}function SQe(e,t,n){var r,i=n+"",o;return function(){var s=this.getAttributeNS(e.space,e.local);return s===i?null:s===r?o:o=t(r=s,n)}}function CQe(e,t,n){var r,i,o;return function(){var s,a=n(this),u;return a==null?void this.removeAttribute(e):(s=this.getAttribute(e),u=a+"",s===u?null:s===r&&u===i?o:(i=u,o=t(r=s,a)))}}function AQe(e,t,n){var r,i,o;return function(){var s,a=n(this),u;return a==null?void this.removeAttributeNS(e.space,e.local):(s=this.getAttributeNS(e.space,e.local),u=a+"",s===u?null:s===r&&u===i?o:(i=u,o=t(r=s,a)))}}function kQe(e,t){var n=aO(e),r=n==="transform"?O0e:U0e;return this.attrTween(e,typeof t=="function"?(n.local?AQe:CQe)(n,r,Gz(this,"attr."+e,t)):t==null?(n.local?xQe:EQe)(n):(n.local?SQe:TQe)(n,r,t))}function IQe(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function RQe(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function NQe(e,t){var n,r;function i(){var o=t.apply(this,arguments);return o!==r&&(n=(r=o)&&RQe(e,o)),n}return i._value=t,i}function PQe(e,t){var n,r;function i(){var o=t.apply(this,arguments);return o!==r&&(n=(r=o)&&IQe(e,o)),n}return i._value=t,i}function DQe(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=aO(e);return this.tween(n,(r.local?NQe:PQe)(r,t))}function OQe(e,t){return function(){Wz(this,e).delay=+t.apply(this,arguments)}}function $Qe(e,t){return t=+t,function(){Wz(this,e).delay=t}}function MQe(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?OQe:$Qe)(t,e)):gc(this.node(),t).delay}function LQe(e,t){return function(){jf(this,e).duration=+t.apply(this,arguments)}}function FQe(e,t){return t=+t,function(){jf(this,e).duration=t}}function jQe(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?LQe:FQe)(t,e)):gc(this.node(),t).duration}function BQe(e,t){if(typeof t!="function")throw new Error;return function(){jf(this,e).ease=t}}function UQe(e){var t=this._id;return arguments.length?this.each(BQe(t,e)):gc(this.node(),t).ease}function zQe(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;jf(this,e).ease=n}}function VQe(e){if(typeof e!="function")throw new Error;return this.each(zQe(this._id,e))}function HQe(e){typeof e!="function"&&(e=t0e(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o=t[i],s=o.length,a=r[i]=[],u,l=0;l<s;++l)(u=o[l])&&e.call(u,u.__data__,l,o)&&a.push(u);return new ih(r,this._parents,this._name,this._id)}function qQe(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,o=Math.min(r,i),s=new Array(r),a=0;a<o;++a)for(var u=t[a],l=n[a],c=u.length,f=s[a]=new Array(c),d,h=0;h<c;++h)(d=u[h]||l[h])&&(f[h]=d);for(;a<r;++a)s[a]=t[a];return new ih(s,this._parents,this._name,this._id)}function WQe(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function GQe(e,t,n){var r,i,o=WQe(t)?Wz:jf;return function(){var s=o(this,e),a=s.on;a!==r&&(i=(r=a).copy()).on(t,n),s.on=i}}function YQe(e,t){var n=this._id;return arguments.length<2?gc(this.node(),n).on.on(e):this.each(GQe(n,e,t))}function KQe(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function XQe(){return this.on("end.remove",KQe(this._id))}function QQe(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Lz(e));for(var r=this._groups,i=r.length,o=new Array(i),s=0;s<i;++s)for(var a=r[s],u=a.length,l=o[s]=new Array(u),c,f,d=0;d<u;++d)(c=a[d])&&(f=e.call(c,c.__data__,d,a))&&("__data__"in c&&(f.__data__=c.__data__),l[d]=f,hO(l[d],t,n,d,l,gc(c,n)));return new ih(o,this._parents,t,n)}function JQe(e){var t=this._name,n=this._id;typeof e!="function"&&(e=e0e(e));for(var r=this._groups,i=r.length,o=[],s=[],a=0;a<i;++a)for(var u=r[a],l=u.length,c,f=0;f<l;++f)if(c=u[f]){for(var d=e.call(c,c.__data__,f,u),h,p=gc(c,n),m=0,g=d.length;m<g;++m)(h=d[m])&&hO(h,t,n,m,d,p);o.push(d),s.push(c)}return new ih(o,s,t,n)}var ZQe=sC.prototype.constructor;function eJe(){return new ZQe(this._groups,this._parents)}function tJe(e,t){var n,r,i;return function(){var o=hb(this,e),s=(this.style.removeProperty(e),hb(this,e));return o===s?null:o===n&&s===r?i:i=t(n=o,r=s)}}function z0e(e){return function(){this.style.removeProperty(e)}}function nJe(e,t,n){var r,i=n+"",o;return function(){var s=hb(this,e);return s===i?null:s===r?o:o=t(r=s,n)}}function rJe(e,t,n){var r,i,o;return function(){var s=hb(this,e),a=n(this),u=a+"";return a==null&&(u=a=(this.style.removeProperty(e),hb(this,e))),s===u?null:s===r&&u===i?o:(i=u,o=t(r=s,a))}}function iJe(e,t){var n,r,i,o="style."+t,s="end."+o,a;return function(){var u=jf(this,e),l=u.on,c=u.value[o]==null?a||(a=z0e(t)):void 0;(l!==n||i!==c)&&(r=(n=l).copy()).on(s,i=c),u.on=r}}function oJe(e,t,n){var r=(e+="")=="transform"?D0e:U0e;return t==null?this.styleTween(e,tJe(e,r)).on("end.style."+e,z0e(e)):typeof t=="function"?this.styleTween(e,rJe(e,r,Gz(this,"style."+e,t))).each(iJe(this._id,e)):this.styleTween(e,nJe(e,r,t),n).on("end.style."+e,null)}function sJe(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function aJe(e,t,n){var r,i;function o(){var s=t.apply(this,arguments);return s!==i&&(r=(i=s)&&sJe(e,s,n)),r}return o._value=t,o}function uJe(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,aJe(e,t,n??""))}function lJe(e){return function(){this.textContent=e}}function cJe(e){return function(){var t=e(this);this.textContent=t??""}}function fJe(e){return this.tween("text",typeof e=="function"?cJe(Gz(this,"text",e)):lJe(e==null?"":e+""))}function dJe(e){return function(t){this.textContent=e.call(this,t)}}function hJe(e){var t,n;function r(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&dJe(i)),t}return r._value=e,r}function pJe(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,hJe(e))}function mJe(){for(var e=this._name,t=this._id,n=V0e(),r=this._groups,i=r.length,o=0;o<i;++o)for(var s=r[o],a=s.length,u,l=0;l<a;++l)if(u=s[l]){var c=gc(u,t);hO(u,e,n,l,s,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new ih(r,this._parents,e,n)}function gJe(){var e,t,n=this,r=n._id,i=n.size();return new Promise(function(o,s){var a={value:s},u={value:function(){--i===0&&o()}};n.each(function(){var l=jf(this,r),c=l.on;c!==e&&(t=(e=c).copy(),t._.cancel.push(a),t._.interrupt.push(a),t._.end.push(u)),l.on=t}),i===0&&o()})}var yJe=0;function ih(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function V0e(){return++yJe}var sd=sC.prototype;ih.prototype={constructor:ih,select:QQe,selectAll:JQe,selectChild:sd.selectChild,selectChildren:sd.selectChildren,filter:HQe,merge:qQe,selection:eJe,transition:mJe,call:sd.call,nodes:sd.nodes,node:sd.node,size:sd.size,empty:sd.empty,each:sd.each,on:YQe,attr:kQe,attrTween:DQe,style:oJe,styleTween:uJe,text:fJe,textTween:pJe,remove:XQe,tween:wQe,delay:MQe,duration:jQe,ease:UQe,easeVarying:VQe,end:gJe,[Symbol.iterator]:sd[Symbol.iterator]};const vJe=e=>+e;function bJe(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var _Je={time:null,delay:0,duration:250,ease:bJe};function wJe(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function EJe(e){var t,n;e instanceof ih?(t=e._id,e=e._name):(t=V0e(),(n=_Je).time=dO(),e=e==null?null:e+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var s=r[o],a=s.length,u,l=0;l<a;++l)(u=s[l])&&hO(u,e,t,l,s,n||wJe(u,t));return new ih(r,this._parents,e,t)}sC.prototype.interrupt=vQe;sC.prototype.transition=EJe;const Y5=Math.PI,K5=2*Y5,Rg=1e-6,xJe=K5-Rg;function H0e(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function TJe(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return H0e;const n=10**t;return function(r){this._+=r[0];for(let i=1,o=r.length;i<o;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}let Yz=class{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?H0e:TJe(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,r,i){this._append`Q${+t},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(t,n,r,i,o,s){this._append`C${+t},${+n},${+r},${+i},${this._x1=+o},${this._y1=+s}`}arcTo(t,n,r,i,o){if(t=+t,n=+n,r=+r,i=+i,o=+o,o<0)throw new Error(`negative radius: ${o}`);let s=this._x1,a=this._y1,u=r-t,l=i-n,c=s-t,f=a-n,d=c*c+f*f;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(d>Rg)if(!(Math.abs(f*u-l*c)>Rg)||!o)this._append`L${this._x1=t},${this._y1=n}`;else{let h=r-s,p=i-a,m=u*u+l*l,g=h*h+p*p,y=Math.sqrt(m),v=Math.sqrt(d),_=o*Math.tan((Y5-Math.acos((m+d-g)/(2*y*v)))/2),w=_/v,E=_/y;Math.abs(w-1)>Rg&&this._append`L${t+w*c},${n+w*f}`,this._append`A${o},${o},0,0,${+(f*h>c*p)},${this._x1=t+E*u},${this._y1=n+E*l}`}}arc(t,n,r,i,o,s){if(t=+t,n=+n,r=+r,s=!!s,r<0)throw new Error(`negative radius: ${r}`);let a=r*Math.cos(i),u=r*Math.sin(i),l=t+a,c=n+u,f=1^s,d=s?i-o:o-i;this._x1===null?this._append`M${l},${c}`:(Math.abs(this._x1-l)>Rg||Math.abs(this._y1-c)>Rg)&&this._append`L${l},${c}`,r&&(d<0&&(d=d%K5+K5),d>xJe?this._append`A${r},${r},0,1,${f},${t-a},${n-u}A${r},${r},0,1,${f},${this._x1=l},${this._y1=c}`:d>Rg&&this._append`A${r},${r},0,${+(d>=Y5)},${f},${this._x1=t+r*Math.cos(o)},${this._y1=n+r*Math.sin(o)}`)}rect(t,n,r,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}};function pO(){return new Yz}pO.prototype=Yz.prototype;const Fd=11102230246251565e-32,Jo=134217729,SJe=(3+8*Fd)*Fd;function jL(e,t,n,r,i){let o,s,a,u,l=t[0],c=r[0],f=0,d=0;c>l==c>-l?(o=l,l=t[++f]):(o=c,c=r[++d]);let h=0;if(f<e&&d<n)for(c>l==c>-l?(s=l+o,a=o-(s-l),l=t[++f]):(s=c+o,a=o-(s-c),c=r[++d]),o=s,a!==0&&(i[h++]=a);f<e&&d<n;)c>l==c>-l?(s=o+l,u=s-o,a=o-(s-u)+(l-u),l=t[++f]):(s=o+c,u=s-o,a=o-(s-u)+(c-u),c=r[++d]),o=s,a!==0&&(i[h++]=a);for(;f<e;)s=o+l,u=s-o,a=o-(s-u)+(l-u),l=t[++f],o=s,a!==0&&(i[h++]=a);for(;d<n;)s=o+c,u=s-o,a=o-(s-u)+(c-u),c=r[++d],o=s,a!==0&&(i[h++]=a);return(o!==0||h===0)&&(i[h++]=o),h}function CJe(e,t){let n=t[0];for(let r=1;r<e;r++)n+=t[r];return n}function lC(e){return new Float64Array(e)}const AJe=(3+16*Fd)*Fd,kJe=(2+12*Fd)*Fd,IJe=(9+64*Fd)*Fd*Fd,gv=lC(4),ste=lC(8),ate=lC(12),ute=lC(16),ks=lC(4);function RJe(e,t,n,r,i,o,s){let a,u,l,c,f,d,h,p,m,g,y,v,_,w,E,S,T,C;const A=e-i,R=n-i,N=t-o,O=r-o;w=A*O,d=Jo*A,h=d-(d-A),p=A-h,d=Jo*O,m=d-(d-O),g=O-m,E=p*g-(w-h*m-p*m-h*g),S=N*R,d=Jo*N,h=d-(d-N),p=N-h,d=Jo*R,m=d-(d-R),g=R-m,T=p*g-(S-h*m-p*m-h*g),y=E-T,f=E-y,gv[0]=E-(y+f)+(f-T),v=w+y,f=v-w,_=w-(v-f)+(y-f),y=_-S,f=_-y,gv[1]=_-(y+f)+(f-S),C=v+y,f=C-v,gv[2]=v-(C-f)+(y-f),gv[3]=C;let D=CJe(4,gv),M=kJe*s;if(D>=M||-D>=M||(f=e-A,a=e-(A+f)+(f-i),f=n-R,l=n-(R+f)+(f-i),f=t-N,u=t-(N+f)+(f-o),f=r-O,c=r-(O+f)+(f-o),a===0&&u===0&&l===0&&c===0)||(M=IJe*s+SJe*Math.abs(D),D+=A*c+O*a-(N*l+R*u),D>=M||-D>=M))return D;w=a*O,d=Jo*a,h=d-(d-a),p=a-h,d=Jo*O,m=d-(d-O),g=O-m,E=p*g-(w-h*m-p*m-h*g),S=u*R,d=Jo*u,h=d-(d-u),p=u-h,d=Jo*R,m=d-(d-R),g=R-m,T=p*g-(S-h*m-p*m-h*g),y=E-T,f=E-y,ks[0]=E-(y+f)+(f-T),v=w+y,f=v-w,_=w-(v-f)+(y-f),y=_-S,f=_-y,ks[1]=_-(y+f)+(f-S),C=v+y,f=C-v,ks[2]=v-(C-f)+(y-f),ks[3]=C;const F=jL(4,gv,4,ks,ste);w=A*c,d=Jo*A,h=d-(d-A),p=A-h,d=Jo*c,m=d-(d-c),g=c-m,E=p*g-(w-h*m-p*m-h*g),S=N*l,d=Jo*N,h=d-(d-N),p=N-h,d=Jo*l,m=d-(d-l),g=l-m,T=p*g-(S-h*m-p*m-h*g),y=E-T,f=E-y,ks[0]=E-(y+f)+(f-T),v=w+y,f=v-w,_=w-(v-f)+(y-f),y=_-S,f=_-y,ks[1]=_-(y+f)+(f-S),C=v+y,f=C-v,ks[2]=v-(C-f)+(y-f),ks[3]=C;const L=jL(F,ste,4,ks,ate);w=a*c,d=Jo*a,h=d-(d-a),p=a-h,d=Jo*c,m=d-(d-c),g=c-m,E=p*g-(w-h*m-p*m-h*g),S=u*l,d=Jo*u,h=d-(d-u),p=u-h,d=Jo*l,m=d-(d-l),g=l-m,T=p*g-(S-h*m-p*m-h*g),y=E-T,f=E-y,ks[0]=E-(y+f)+(f-T),v=w+y,f=v-w,_=w-(v-f)+(y-f),y=_-S,f=_-y,ks[1]=_-(y+f)+(f-S),C=v+y,f=C-v,ks[2]=v-(C-f)+(y-f),ks[3]=C;const B=jL(L,ate,4,ks,ute);return ute[B-1]}function p2(e,t,n,r,i,o){const s=(t-o)*(n-i),a=(e-i)*(r-o),u=s-a,l=Math.abs(s+a);return Math.abs(u)>=AJe*l?u:-RJe(e,t,n,r,i,o,l)}const lte=Math.pow(2,-52),m2=new Uint32Array(512);class $R{static from(t,n=$Je,r=MJe){const i=t.length,o=new Float64Array(i*2);for(let s=0;s<i;s++){const a=t[s];o[2*s]=n(a),o[2*s+1]=r(a)}return new $R(o)}constructor(t){const n=t.length>>1;if(n>0&&typeof t[0]!="number")throw new Error("Expected coords to contain numbers.");this.coords=t;const r=Math.max(2*n-5,0);this._triangles=new Uint32Array(r*3),this._halfedges=new Int32Array(r*3),this._hashSize=Math.ceil(Math.sqrt(n)),this._hullPrev=new Uint32Array(n),this._hullNext=new Uint32Array(n),this._hullTri=new Uint32Array(n),this._hullHash=new Int32Array(this._hashSize),this._ids=new Uint32Array(n),this._dists=new Float64Array(n),this.update()}update(){const{coords:t,_hullPrev:n,_hullNext:r,_hullTri:i,_hullHash:o}=this,s=t.length>>1;let a=1/0,u=1/0,l=-1/0,c=-1/0;for(let A=0;A<s;A++){const R=t[2*A],N=t[2*A+1];R<a&&(a=R),N<u&&(u=N),R>l&&(l=R),N>c&&(c=N),this._ids[A]=A}const f=(a+l)/2,d=(u+c)/2;let h,p,m;for(let A=0,R=1/0;A<s;A++){const N=BL(f,d,t[2*A],t[2*A+1]);N<R&&(h=A,R=N)}const g=t[2*h],y=t[2*h+1];for(let A=0,R=1/0;A<s;A++){if(A===h)continue;const N=BL(g,y,t[2*A],t[2*A+1]);N<R&&N>0&&(p=A,R=N)}let v=t[2*p],_=t[2*p+1],w=1/0;for(let A=0;A<s;A++){if(A===h||A===p)continue;const R=DJe(g,y,v,_,t[2*A],t[2*A+1]);R<w&&(m=A,w=R)}let E=t[2*m],S=t[2*m+1];if(w===1/0){for(let N=0;N<s;N++)this._dists[N]=t[2*N]-t[0]||t[2*N+1]-t[1];s1(this._ids,this._dists,0,s-1);const A=new Uint32Array(s);let R=0;for(let N=0,O=-1/0;N<s;N++){const D=this._ids[N],M=this._dists[D];M>O&&(A[R++]=D,O=M)}this.hull=A.subarray(0,R),this.triangles=new Uint32Array(0),this.halfedges=new Uint32Array(0);return}if(p2(g,y,v,_,E,S)<0){const A=p,R=v,N=_;p=m,v=E,_=S,m=A,E=R,S=N}const T=OJe(g,y,v,_,E,S);this._cx=T.x,this._cy=T.y;for(let A=0;A<s;A++)this._dists[A]=BL(t[2*A],t[2*A+1],T.x,T.y);s1(this._ids,this._dists,0,s-1),this._hullStart=h;let C=3;r[h]=n[m]=p,r[p]=n[h]=m,r[m]=n[p]=h,i[h]=0,i[p]=1,i[m]=2,o.fill(-1),o[this._hashKey(g,y)]=h,o[this._hashKey(v,_)]=p,o[this._hashKey(E,S)]=m,this.trianglesLen=0,this._addTriangle(h,p,m,-1,-1,-1);for(let A=0,R,N;A<this._ids.length;A++){const O=this._ids[A],D=t[2*O],M=t[2*O+1];if(A>0&&Math.abs(D-R)<=lte&&Math.abs(M-N)<=lte||(R=D,N=M,O===h||O===p||O===m))continue;let F=0;for(let P=0,z=this._hashKey(D,M);P<this._hashSize&&(F=o[(z+P)%this._hashSize],!(F!==-1&&F!==r[F]));P++);F=n[F];let L=F,B;for(;B=r[L],p2(D,M,t[2*L],t[2*L+1],t[2*B],t[2*B+1])>=0;)if(L=B,L===F){L=-1;break}if(L===-1)continue;let U=this._addTriangle(L,O,r[L],-1,-1,i[L]);i[O]=this._legalize(U+2),i[L]=U,C++;let H=r[L];for(;B=r[H],p2(D,M,t[2*H],t[2*H+1],t[2*B],t[2*B+1])<0;)U=this._addTriangle(H,O,B,i[O],-1,i[H]),i[O]=this._legalize(U+2),r[H]=H,C--,H=B;if(L===F)for(;B=n[L],p2(D,M,t[2*B],t[2*B+1],t[2*L],t[2*L+1])<0;)U=this._addTriangle(B,O,L,-1,i[L],i[B]),this._legalize(U+2),i[B]=U,r[L]=L,C--,L=B;this._hullStart=n[O]=L,r[L]=n[H]=O,r[O]=H,o[this._hashKey(D,M)]=O,o[this._hashKey(t[2*L],t[2*L+1])]=L}this.hull=new Uint32Array(C);for(let A=0,R=this._hullStart;A<C;A++)this.hull[A]=R,R=r[R];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(t,n){return Math.floor(NJe(t-this._cx,n-this._cy)*this._hashSize)%this._hashSize}_legalize(t){const{_triangles:n,_halfedges:r,coords:i}=this;let o=0,s=0;for(;;){const a=r[t],u=t-t%3;if(s=u+(t+2)%3,a===-1){if(o===0)break;t=m2[--o];continue}const l=a-a%3,c=u+(t+1)%3,f=l+(a+2)%3,d=n[s],h=n[t],p=n[c],m=n[f];if(PJe(i[2*d],i[2*d+1],i[2*h],i[2*h+1],i[2*p],i[2*p+1],i[2*m],i[2*m+1])){n[t]=m,n[a]=d;const y=r[f];if(y===-1){let _=this._hullStart;do{if(this._hullTri[_]===f){this._hullTri[_]=t;break}_=this._hullPrev[_]}while(_!==this._hullStart)}this._link(t,y),this._link(a,r[s]),this._link(s,f);const v=l+(a+1)%3;o<m2.length&&(m2[o++]=v)}else{if(o===0)break;t=m2[--o]}}return s}_link(t,n){this._halfedges[t]=n,n!==-1&&(this._halfedges[n]=t)}_addTriangle(t,n,r,i,o,s){const a=this.trianglesLen;return this._triangles[a]=t,this._triangles[a+1]=n,this._triangles[a+2]=r,this._link(a,i),this._link(a+1,o),this._link(a+2,s),this.trianglesLen+=3,a}}function NJe(e,t){const n=e/(Math.abs(e)+Math.abs(t));return(t>0?3-n:1+n)/4}function BL(e,t,n,r){const i=e-n,o=t-r;return i*i+o*o}function PJe(e,t,n,r,i,o,s,a){const u=e-s,l=t-a,c=n-s,f=r-a,d=i-s,h=o-a,p=u*u+l*l,m=c*c+f*f,g=d*d+h*h;return u*(f*g-m*h)-l*(c*g-m*d)+p*(c*h-f*d)<0}function DJe(e,t,n,r,i,o){const s=n-e,a=r-t,u=i-e,l=o-t,c=s*s+a*a,f=u*u+l*l,d=.5/(s*l-a*u),h=(l*c-a*f)*d,p=(s*f-u*c)*d;return h*h+p*p}function OJe(e,t,n,r,i,o){const s=n-e,a=r-t,u=i-e,l=o-t,c=s*s+a*a,f=u*u+l*l,d=.5/(s*l-a*u),h=e+(l*c-a*f)*d,p=t+(s*f-u*c)*d;return{x:h,y:p}}function s1(e,t,n,r){if(r-n<=20)for(let i=n+1;i<=r;i++){const o=e[i],s=t[o];let a=i-1;for(;a>=n&&t[e[a]]>s;)e[a+1]=e[a--];e[a+1]=o}else{const i=n+r>>1;let o=n+1,s=r;Mw(e,i,o),t[e[n]]>t[e[r]]&&Mw(e,n,r),t[e[o]]>t[e[r]]&&Mw(e,o,r),t[e[n]]>t[e[o]]&&Mw(e,n,o);const a=e[o],u=t[a];for(;;){do o++;while(t[e[o]]<u);do s--;while(t[e[s]]>u);if(s<o)break;Mw(e,o,s)}e[n+1]=e[s],e[s]=a,r-o+1>=s-n?(s1(e,t,o,r),s1(e,t,n,s-1)):(s1(e,t,n,s-1),s1(e,t,o,r))}}function Mw(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function $Je(e){return e[0]}function MJe(e){return e[1]}const cte=1e-6;class r0{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(t,n){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(t,n){this._+=`L${this._x1=+t},${this._y1=+n}`}arc(t,n,r){t=+t,n=+n,r=+r;const i=t+r,o=n;if(r<0)throw new Error("negative radius");this._x1===null?this._+=`M${i},${o}`:(Math.abs(this._x1-i)>cte||Math.abs(this._y1-o)>cte)&&(this._+="L"+i+","+o),r&&(this._+=`A${r},${r},0,1,1,${t-r},${n}A${r},${r},0,1,1,${this._x1=i},${this._y1=o}`)}rect(t,n,r,i){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${+r}v${+i}h${-r}Z`}value(){return this._||null}}class X5{constructor(){this._=[]}moveTo(t,n){this._.push([t,n])}closePath(){this._.push(this._[0].slice())}lineTo(t,n){this._.push([t,n])}value(){return this._.length?this._:null}}let LJe=class{constructor(t,[n,r,i,o]=[0,0,960,500]){if(!((i=+i)>=(n=+n))||!((o=+o)>=(r=+r)))throw new Error("invalid bounds");this.delaunay=t,this._circumcenters=new Float64Array(t.points.length*2),this.vectors=new Float64Array(t.points.length*2),this.xmax=i,this.xmin=n,this.ymax=o,this.ymin=r,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points:t,hull:n,triangles:r},vectors:i}=this;let o,s;const a=this.circumcenters=this._circumcenters.subarray(0,r.length/3*2);for(let m=0,g=0,y=r.length,v,_;m<y;m+=3,g+=2){const w=r[m]*2,E=r[m+1]*2,S=r[m+2]*2,T=t[w],C=t[w+1],A=t[E],R=t[E+1],N=t[S],O=t[S+1],D=A-T,M=R-C,F=N-T,L=O-C,B=(D*L-M*F)*2;if(Math.abs(B)<1e-9){if(o===void 0){o=s=0;for(const H of n)o+=t[H*2],s+=t[H*2+1];o/=n.length,s/=n.length}const U=1e9*Math.sign((o-T)*L-(s-C)*F);v=(T+N)/2-U*L,_=(C+O)/2+U*F}else{const U=1/B,H=D*D+M*M,P=F*F+L*L;v=T+(L*H-M*P)*U,_=C+(D*P-F*H)*U}a[g]=v,a[g+1]=_}let u=n[n.length-1],l,c=u*4,f,d=t[2*u],h,p=t[2*u+1];i.fill(0);for(let m=0;m<n.length;++m)u=n[m],l=c,f=d,h=p,c=u*4,d=t[2*u],p=t[2*u+1],i[l+2]=i[c]=h-p,i[l+3]=i[c+1]=d-f}render(t){const n=t==null?t=new r0:void 0,{delaunay:{halfedges:r,inedges:i,hull:o},circumcenters:s,vectors:a}=this;if(o.length<=1)return null;for(let c=0,f=r.length;c<f;++c){const d=r[c];if(d<c)continue;const h=Math.floor(c/3)*2,p=Math.floor(d/3)*2,m=s[h],g=s[h+1],y=s[p],v=s[p+1];this._renderSegment(m,g,y,v,t)}let u,l=o[o.length-1];for(let c=0;c<o.length;++c){u=l,l=o[c];const f=Math.floor(i[l]/3)*2,d=s[f],h=s[f+1],p=u*4,m=this._project(d,h,a[p+2],a[p+3]);m&&this._renderSegment(d,h,m[0],m[1],t)}return n&&n.value()}renderBounds(t){const n=t==null?t=new r0:void 0;return t.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),n&&n.value()}renderCell(t,n){const r=n==null?n=new r0:void 0,i=this._clip(t);if(i===null||!i.length)return;n.moveTo(i[0],i[1]);let o=i.length;for(;i[0]===i[o-2]&&i[1]===i[o-1]&&o>1;)o-=2;for(let s=2;s<o;s+=2)(i[s]!==i[s-2]||i[s+1]!==i[s-1])&&n.lineTo(i[s],i[s+1]);return n.closePath(),r&&r.value()}*cellPolygons(){const{delaunay:{points:t}}=this;for(let n=0,r=t.length/2;n<r;++n){const i=this.cellPolygon(n);i&&(i.index=n,yield i)}}cellPolygon(t){const n=new X5;return this.renderCell(t,n),n.value()}_renderSegment(t,n,r,i,o){let s;const a=this._regioncode(t,n),u=this._regioncode(r,i);a===0&&u===0?(o.moveTo(t,n),o.lineTo(r,i)):(s=this._clipSegment(t,n,r,i,a,u))&&(o.moveTo(s[0],s[1]),o.lineTo(s[2],s[3]))}contains(t,n,r){return n=+n,n!==n||(r=+r,r!==r)?!1:this.delaunay._step(t,n,r)===t}*neighbors(t){const n=this._clip(t);if(n)for(const r of this.delaunay.neighbors(t)){const i=this._clip(r);if(i){e:for(let o=0,s=n.length;o<s;o+=2)for(let a=0,u=i.length;a<u;a+=2)if(n[o]===i[a]&&n[o+1]===i[a+1]&&n[(o+2)%s]===i[(a+u-2)%u]&&n[(o+3)%s]===i[(a+u-1)%u]){yield r;break e}}}}_cell(t){const{circumcenters:n,delaunay:{inedges:r,halfedges:i,triangles:o}}=this,s=r[t];if(s===-1)return null;const a=[];let u=s;do{const l=Math.floor(u/3);if(a.push(n[l*2],n[l*2+1]),u=u%3===2?u-2:u+1,o[u]!==t)break;u=i[u]}while(u!==s&&u!==-1);return a}_clip(t){if(t===0&&this.delaunay.hull.length===1)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const n=this._cell(t);if(n===null)return null;const{vectors:r}=this,i=t*4;return this._simplify(r[i]||r[i+1]?this._clipInfinite(t,n,r[i],r[i+1],r[i+2],r[i+3]):this._clipFinite(t,n))}_clipFinite(t,n){const r=n.length;let i=null,o,s,a=n[r-2],u=n[r-1],l,c=this._regioncode(a,u),f,d=0;for(let h=0;h<r;h+=2)if(o=a,s=u,a=n[h],u=n[h+1],l=c,c=this._regioncode(a,u),l===0&&c===0)f=d,d=0,i?i.push(a,u):i=[a,u];else{let p,m,g,y,v;if(l===0){if((p=this._clipSegment(o,s,a,u,l,c))===null)continue;[m,g,y,v]=p}else{if((p=this._clipSegment(a,u,o,s,c,l))===null)continue;[y,v,m,g]=p,f=d,d=this._edgecode(m,g),f&&d&&this._edge(t,f,d,i,i.length),i?i.push(m,g):i=[m,g]}f=d,d=this._edgecode(y,v),f&&d&&this._edge(t,f,d,i,i.length),i?i.push(y,v):i=[y,v]}if(i)f=d,d=this._edgecode(i[0],i[1]),f&&d&&this._edge(t,f,d,i,i.length);else if(this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return i}_clipSegment(t,n,r,i,o,s){const a=o<s;for(a&&([t,n,r,i,o,s]=[r,i,t,n,s,o]);;){if(o===0&&s===0)return a?[r,i,t,n]:[t,n,r,i];if(o&s)return null;let u,l,c=o||s;c&8?(u=t+(r-t)*(this.ymax-n)/(i-n),l=this.ymax):c&4?(u=t+(r-t)*(this.ymin-n)/(i-n),l=this.ymin):c&2?(l=n+(i-n)*(this.xmax-t)/(r-t),u=this.xmax):(l=n+(i-n)*(this.xmin-t)/(r-t),u=this.xmin),o?(t=u,n=l,o=this._regioncode(t,n)):(r=u,i=l,s=this._regioncode(r,i))}}_clipInfinite(t,n,r,i,o,s){let a=Array.from(n),u;if((u=this._project(a[0],a[1],r,i))&&a.unshift(u[0],u[1]),(u=this._project(a[a.length-2],a[a.length-1],o,s))&&a.push(u[0],u[1]),a=this._clipFinite(t,a))for(let l=0,c=a.length,f,d=this._edgecode(a[c-2],a[c-1]);l<c;l+=2)f=d,d=this._edgecode(a[l],a[l+1]),f&&d&&(l=this._edge(t,f,d,a,l),c=a.length);else this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(a=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return a}_edge(t,n,r,i,o){for(;n!==r;){let s,a;switch(n){case 5:n=4;continue;case 4:n=6,s=this.xmax,a=this.ymin;break;case 6:n=2;continue;case 2:n=10,s=this.xmax,a=this.ymax;break;case 10:n=8;continue;case 8:n=9,s=this.xmin,a=this.ymax;break;case 9:n=1;continue;case 1:n=5,s=this.xmin,a=this.ymin;break}(i[o]!==s||i[o+1]!==a)&&this.contains(t,s,a)&&(i.splice(o,0,s,a),o+=2)}return o}_project(t,n,r,i){let o=1/0,s,a,u;if(i<0){if(n<=this.ymin)return null;(s=(this.ymin-n)/i)<o&&(u=this.ymin,a=t+(o=s)*r)}else if(i>0){if(n>=this.ymax)return null;(s=(this.ymax-n)/i)<o&&(u=this.ymax,a=t+(o=s)*r)}if(r>0){if(t>=this.xmax)return null;(s=(this.xmax-t)/r)<o&&(a=this.xmax,u=n+(o=s)*i)}else if(r<0){if(t<=this.xmin)return null;(s=(this.xmin-t)/r)<o&&(a=this.xmin,u=n+(o=s)*i)}return[a,u]}_edgecode(t,n){return(t===this.xmin?1:t===this.xmax?2:0)|(n===this.ymin?4:n===this.ymax?8:0)}_regioncode(t,n){return(t<this.xmin?1:t>this.xmax?2:0)|(n<this.ymin?4:n>this.ymax?8:0)}_simplify(t){if(t&&t.length>4){for(let n=0;n<t.length;n+=2){const r=(n+2)%t.length,i=(n+4)%t.length;(t[n]===t[r]&&t[r]===t[i]||t[n+1]===t[r+1]&&t[r+1]===t[i+1])&&(t.splice(r,2),n-=2)}t.length||(t=null)}return t}};const FJe=2*Math.PI,yv=Math.pow;function jJe(e){return e[0]}function BJe(e){return e[1]}function UJe(e){const{triangles:t,coords:n}=e;for(let r=0;r<t.length;r+=3){const i=2*t[r],o=2*t[r+1],s=2*t[r+2];if((n[s]-n[i])*(n[o+1]-n[i+1])-(n[o]-n[i])*(n[s+1]-n[i+1])>1e-10)return!1}return!0}function zJe(e,t,n){return[e+Math.sin(e+t)*n,t+Math.cos(e-t)*n]}class Kz{static from(t,n=jJe,r=BJe,i){return new Kz("length"in t?VJe(t,n,r,i):Float64Array.from(HJe(t,n,r,i)))}constructor(t){this._delaunator=new $R(t),this.inedges=new Int32Array(t.length/2),this._hullIndex=new Int32Array(t.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const t=this._delaunator,n=this.points;if(t.hull&&t.hull.length>2&&UJe(t)){this.collinear=Int32Array.from({length:n.length/2},(d,h)=>h).sort((d,h)=>n[2*d]-n[2*h]||n[2*d+1]-n[2*h+1]);const u=this.collinear[0],l=this.collinear[this.collinear.length-1],c=[n[2*u],n[2*u+1],n[2*l],n[2*l+1]],f=1e-8*Math.hypot(c[3]-c[1],c[2]-c[0]);for(let d=0,h=n.length/2;d<h;++d){const p=zJe(n[2*d],n[2*d+1],f);n[2*d]=p[0],n[2*d+1]=p[1]}this._delaunator=new $R(n)}else delete this.collinear;const r=this.halfedges=this._delaunator.halfedges,i=this.hull=this._delaunator.hull,o=this.triangles=this._delaunator.triangles,s=this.inedges.fill(-1),a=this._hullIndex.fill(-1);for(let u=0,l=r.length;u<l;++u){const c=o[u%3===2?u-2:u+1];(r[u]===-1||s[c]===-1)&&(s[c]=u)}for(let u=0,l=i.length;u<l;++u)a[i[u]]=u;i.length<=2&&i.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=i[0],s[i[0]]=1,i.length===2&&(s[i[1]]=0,this.triangles[1]=i[1],this.triangles[2]=i[1]))}voronoi(t){return new LJe(this,t)}*neighbors(t){const{inedges:n,hull:r,_hullIndex:i,halfedges:o,triangles:s,collinear:a}=this;if(a){const f=a.indexOf(t);f>0&&(yield a[f-1]),f<a.length-1&&(yield a[f+1]);return}const u=n[t];if(u===-1)return;let l=u,c=-1;do{if(yield c=s[l],l=l%3===2?l-2:l+1,s[l]!==t)return;if(l=o[l],l===-1){const f=r[(i[t]+1)%r.length];f!==c&&(yield f);return}}while(l!==u)}find(t,n,r=0){if(t=+t,t!==t||(n=+n,n!==n))return-1;const i=r;let o;for(;(o=this._step(r,t,n))>=0&&o!==r&&o!==i;)r=o;return o}_step(t,n,r){const{inedges:i,hull:o,_hullIndex:s,halfedges:a,triangles:u,points:l}=this;if(i[t]===-1||!l.length)return(t+1)%(l.length>>1);let c=t,f=yv(n-l[t*2],2)+yv(r-l[t*2+1],2);const d=i[t];let h=d;do{let p=u[h];const m=yv(n-l[p*2],2)+yv(r-l[p*2+1],2);if(m<f&&(f=m,c=p),h=h%3===2?h-2:h+1,u[h]!==t)break;if(h=a[h],h===-1){if(h=o[(s[t]+1)%o.length],h!==p&&yv(n-l[h*2],2)+yv(r-l[h*2+1],2)<f)return h;break}}while(h!==d);return c}render(t){const n=t==null?t=new r0:void 0,{points:r,halfedges:i,triangles:o}=this;for(let s=0,a=i.length;s<a;++s){const u=i[s];if(u<s)continue;const l=o[s]*2,c=o[u]*2;t.moveTo(r[l],r[l+1]),t.lineTo(r[c],r[c+1])}return this.renderHull(t),n&&n.value()}renderPoints(t,n){n===void 0&&(!t||typeof t.moveTo!="function")&&(n=t,t=null),n=n==null?2:+n;const r=t==null?t=new r0:void 0,{points:i}=this;for(let o=0,s=i.length;o<s;o+=2){const a=i[o],u=i[o+1];t.moveTo(a+n,u),t.arc(a,u,n,0,FJe)}return r&&r.value()}renderHull(t){const n=t==null?t=new r0:void 0,{hull:r,points:i}=this,o=r[0]*2,s=r.length;t.moveTo(i[o],i[o+1]);for(let a=1;a<s;++a){const u=2*r[a];t.lineTo(i[u],i[u+1])}return t.closePath(),n&&n.value()}hullPolygon(){const t=new X5;return this.renderHull(t),t.value()}renderTriangle(t,n){const r=n==null?n=new r0:void 0,{points:i,triangles:o}=this,s=o[t*=3]*2,a=o[t+1]*2,u=o[t+2]*2;return n.moveTo(i[s],i[s+1]),n.lineTo(i[a],i[a+1]),n.lineTo(i[u],i[u+1]),n.closePath(),r&&r.value()}*trianglePolygons(){const{triangles:t}=this;for(let n=0,r=t.length/3;n<r;++n)yield this.trianglePolygon(n)}trianglePolygon(t){const n=new X5;return this.renderTriangle(t,n),n.value()}}function VJe(e,t,n,r){const i=e.length,o=new Float64Array(i*2);for(let s=0;s<i;++s){const a=e[s];o[s*2]=t.call(r,a,s,e),o[s*2+1]=n.call(r,a,s,e)}return o}function*HJe(e,t,n,r){let i=0;for(const o of e)yield t.call(r,o,i,e),yield n.call(r,o,i,e),++i}var fte={},UL={},zL=34,Lw=10,VL=13;function q0e(e){return new Function("d","return {"+e.map(function(t,n){return JSON.stringify(t)+": d["+n+'] || ""'}).join(",")+"}")}function qJe(e,t){var n=q0e(e);return function(r,i){return t(n(r),i,e)}}function dte(e){var t=Object.create(null),n=[];return e.forEach(function(r){for(var i in r)i in t||n.push(t[i]=i)}),n}function ua(e,t){var n=e+"",r=n.length;return r<t?new Array(t-r+1).join(0)+n:n}function WJe(e){return e<0?"-"+ua(-e,6):e>9999?"+"+ua(e,6):ua(e,4)}function GJe(e){var t=e.getUTCHours(),n=e.getUTCMinutes(),r=e.getUTCSeconds(),i=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":WJe(e.getUTCFullYear())+"-"+ua(e.getUTCMonth()+1,2)+"-"+ua(e.getUTCDate(),2)+(i?"T"+ua(t,2)+":"+ua(n,2)+":"+ua(r,2)+"."+ua(i,3)+"Z":r?"T"+ua(t,2)+":"+ua(n,2)+":"+ua(r,2)+"Z":n||t?"T"+ua(t,2)+":"+ua(n,2)+"Z":"")}function W0e(e){var t=new RegExp('["'+e+`
\r]`),n=e.charCodeAt(0);function r(f,d){var h,p,m=i(f,function(g,y){if(h)return h(g,y-1);p=g,h=d?qJe(g,d):q0e(g)});return m.columns=p||[],m}function i(f,d){var h=[],p=f.length,m=0,g=0,y,v=p<=0,_=!1;f.charCodeAt(p-1)===Lw&&--p,f.charCodeAt(p-1)===VL&&--p;function w(){if(v)return UL;if(_)return _=!1,fte;var S,T=m,C;if(f.charCodeAt(T)===zL){for(;m++<p&&f.charCodeAt(m)!==zL||f.charCodeAt(++m)===zL;);return(S=m)>=p?v=!0:(C=f.charCodeAt(m++))===Lw?_=!0:C===VL&&(_=!0,f.charCodeAt(m)===Lw&&++m),f.slice(T+1,S-1).replace(/""/g,'"')}for(;m<p;){if((C=f.charCodeAt(S=m++))===Lw)_=!0;else if(C===VL)_=!0,f.charCodeAt(m)===Lw&&++m;else if(C!==n)continue;return f.slice(T,S)}return v=!0,f.slice(T,p)}for(;(y=w())!==UL;){for(var E=[];y!==fte&&y!==UL;)E.push(y),y=w();d&&(E=d(E,g++))==null||h.push(E)}return h}function o(f,d){return f.map(function(h){return d.map(function(p){return c(h[p])}).join(e)})}function s(f,d){return d==null&&(d=dte(f)),[d.map(c).join(e)].concat(o(f,d)).join(`
`)}function a(f,d){return d==null&&(d=dte(f)),o(f,d).join(`
`)}function u(f){return f.map(l).join(`
`)}function l(f){return f.map(c).join(e)}function c(f){return f==null?"":f instanceof Date?GJe(f):t.test(f+="")?'"'+f.replace(/"/g,'""')+'"':f}return{parse:r,parseRows:i,format:s,formatBody:a,formatRows:u,formatRow:l,formatValue:c}}var YJe=W0e(","),KJe=YJe.parse;function XJe(e){if(!e.ok)throw new Error(e.status+" "+e.statusText);return e.text()}function QJe(e,t){return fetch(e,t).then(XJe)}function JJe(e){return function(t,n,r){return arguments.length===2&&typeof n=="function"&&(r=n,n=void 0),QJe(t,n).then(function(i){return e(i,r)})}}var G0e=JJe(KJe);function ZJe(e,t){var n,r=1;e==null&&(e=0),t==null&&(t=0);function i(){var o,s=n.length,a,u=0,l=0;for(o=0;o<s;++o)a=n[o],u+=a.x,l+=a.y;for(u=(u/s-e)*r,l=(l/s-t)*r,o=0;o<s;++o)a=n[o],a.x-=u,a.y-=l}return i.initialize=function(o){n=o},i.x=function(o){return arguments.length?(e=+o,i):e},i.y=function(o){return arguments.length?(t=+o,i):t},i.strength=function(o){return arguments.length?(r=+o,i):r},i}function eZe(e){const t=+this._x.call(null,e),n=+this._y.call(null,e);return Y0e(this.cover(t,n),t,n,e)}function Y0e(e,t,n,r){if(isNaN(t)||isNaN(n))return e;var i,o=e._root,s={data:r},a=e._x0,u=e._y0,l=e._x1,c=e._y1,f,d,h,p,m,g,y,v;if(!o)return e._root=s,e;for(;o.length;)if((m=t>=(f=(a+l)/2))?a=f:l=f,(g=n>=(d=(u+c)/2))?u=d:c=d,i=o,!(o=o[y=g<<1|m]))return i[y]=s,e;if(h=+e._x.call(null,o.data),p=+e._y.call(null,o.data),t===h&&n===p)return s.next=o,i?i[y]=s:e._root=s,e;do i=i?i[y]=new Array(4):e._root=new Array(4),(m=t>=(f=(a+l)/2))?a=f:l=f,(g=n>=(d=(u+c)/2))?u=d:c=d;while((y=g<<1|m)===(v=(p>=d)<<1|h>=f));return i[v]=o,i[y]=s,e}function tZe(e){var t,n,r=e.length,i,o,s=new Array(r),a=new Array(r),u=1/0,l=1/0,c=-1/0,f=-1/0;for(n=0;n<r;++n)isNaN(i=+this._x.call(null,t=e[n]))||isNaN(o=+this._y.call(null,t))||(s[n]=i,a[n]=o,i<u&&(u=i),i>c&&(c=i),o<l&&(l=o),o>f&&(f=o));if(u>c||l>f)return this;for(this.cover(u,l).cover(c,f),n=0;n<r;++n)Y0e(this,s[n],a[n],e[n]);return this}function nZe(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var n=this._x0,r=this._y0,i=this._x1,o=this._y1;if(isNaN(n))i=(n=Math.floor(e))+1,o=(r=Math.floor(t))+1;else{for(var s=i-n||1,a=this._root,u,l;n>e||e>=i||r>t||t>=o;)switch(l=(t<r)<<1|e<n,u=new Array(4),u[l]=a,a=u,s*=2,l){case 0:i=n+s,o=r+s;break;case 1:n=i-s,o=r+s;break;case 2:i=n+s,r=o-s;break;case 3:n=i-s,r=o-s;break}this._root&&this._root.length&&(this._root=a)}return this._x0=n,this._y0=r,this._x1=i,this._y1=o,this}function rZe(){var e=[];return this.visit(function(t){if(!t.length)do e.push(t.data);while(t=t.next)}),e}function iZe(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function Fs(e,t,n,r,i){this.node=e,this.x0=t,this.y0=n,this.x1=r,this.y1=i}function oZe(e,t,n){var r,i=this._x0,o=this._y0,s,a,u,l,c=this._x1,f=this._y1,d=[],h=this._root,p,m;for(h&&d.push(new Fs(h,i,o,c,f)),n==null?n=1/0:(i=e-n,o=t-n,c=e+n,f=t+n,n*=n);p=d.pop();)if(!(!(h=p.node)||(s=p.x0)>c||(a=p.y0)>f||(u=p.x1)<i||(l=p.y1)<o))if(h.length){var g=(s+u)/2,y=(a+l)/2;d.push(new Fs(h[3],g,y,u,l),new Fs(h[2],s,y,g,l),new Fs(h[1],g,a,u,y),new Fs(h[0],s,a,g,y)),(m=(t>=y)<<1|e>=g)&&(p=d[d.length-1],d[d.length-1]=d[d.length-1-m],d[d.length-1-m]=p)}else{var v=e-+this._x.call(null,h.data),_=t-+this._y.call(null,h.data),w=v*v+_*_;if(w<n){var E=Math.sqrt(n=w);i=e-E,o=t-E,c=e+E,f=t+E,r=h.data}}return r}function sZe(e){if(isNaN(c=+this._x.call(null,e))||isNaN(f=+this._y.call(null,e)))return this;var t,n=this._root,r,i,o,s=this._x0,a=this._y0,u=this._x1,l=this._y1,c,f,d,h,p,m,g,y;if(!n)return this;if(n.length)for(;;){if((p=c>=(d=(s+u)/2))?s=d:u=d,(m=f>=(h=(a+l)/2))?a=h:l=h,t=n,!(n=n[g=m<<1|p]))return this;if(!n.length)break;(t[g+1&3]||t[g+2&3]||t[g+3&3])&&(r=t,y=g)}for(;n.data!==e;)if(i=n,!(n=n.next))return this;return(o=n.next)&&delete n.next,i?(o?i.next=o:delete i.next,this):t?(o?t[g]=o:delete t[g],(n=t[0]||t[1]||t[2]||t[3])&&n===(t[3]||t[2]||t[1]||t[0])&&!n.length&&(r?r[y]=n:this._root=n),this):(this._root=o,this)}function aZe(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this}function uZe(){return this._root}function lZe(){var e=0;return this.visit(function(t){if(!t.length)do++e;while(t=t.next)}),e}function cZe(e){var t=[],n,r=this._root,i,o,s,a,u;for(r&&t.push(new Fs(r,this._x0,this._y0,this._x1,this._y1));n=t.pop();)if(!e(r=n.node,o=n.x0,s=n.y0,a=n.x1,u=n.y1)&&r.length){var l=(o+a)/2,c=(s+u)/2;(i=r[3])&&t.push(new Fs(i,l,c,a,u)),(i=r[2])&&t.push(new Fs(i,o,c,l,u)),(i=r[1])&&t.push(new Fs(i,l,s,a,c)),(i=r[0])&&t.push(new Fs(i,o,s,l,c))}return this}function fZe(e){var t=[],n=[],r;for(this._root&&t.push(new Fs(this._root,this._x0,this._y0,this._x1,this._y1));r=t.pop();){var i=r.node;if(i.length){var o,s=r.x0,a=r.y0,u=r.x1,l=r.y1,c=(s+u)/2,f=(a+l)/2;(o=i[0])&&t.push(new Fs(o,s,a,c,f)),(o=i[1])&&t.push(new Fs(o,c,a,u,f)),(o=i[2])&&t.push(new Fs(o,s,f,c,l)),(o=i[3])&&t.push(new Fs(o,c,f,u,l))}n.push(r)}for(;r=n.pop();)e(r.node,r.x0,r.y0,r.x1,r.y1);return this}function dZe(e){return e[0]}function hZe(e){return arguments.length?(this._x=e,this):this._x}function pZe(e){return e[1]}function mZe(e){return arguments.length?(this._y=e,this):this._y}function Xz(e,t,n){var r=new Qz(t??dZe,n??pZe,NaN,NaN,NaN,NaN);return e==null?r:r.addAll(e)}function Qz(e,t,n,r,i,o){this._x=e,this._y=t,this._x0=n,this._y0=r,this._x1=i,this._y1=o,this._root=void 0}function hte(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}var Zs=Xz.prototype=Qz.prototype;Zs.copy=function(){var e=new Qz(this._x,this._y,this._x0,this._y0,this._x1,this._y1),t=this._root,n,r;if(!t)return e;if(!t.length)return e._root=hte(t),e;for(n=[{source:t,target:e._root=new Array(4)}];t=n.pop();)for(var i=0;i<4;++i)(r=t.source[i])&&(r.length?n.push({source:r,target:t.target[i]=new Array(4)}):t.target[i]=hte(r));return e};Zs.add=eZe;Zs.addAll=tZe;Zs.cover=nZe;Zs.data=rZe;Zs.extent=iZe;Zs.find=oZe;Zs.remove=sZe;Zs.removeAll=aZe;Zs.root=uZe;Zs.size=lZe;Zs.visit=cZe;Zs.visitAfter=fZe;Zs.x=hZe;Zs.y=mZe;function js(e){return function(){return e}}function gp(e){return(e()-.5)*1e-6}function gZe(e){return e.x+e.vx}function yZe(e){return e.y+e.vy}function vZe(e){var t,n,r,i=1,o=1;typeof e!="function"&&(e=js(e==null?1:+e));function s(){for(var l,c=t.length,f,d,h,p,m,g,y=0;y<o;++y)for(f=Xz(t,gZe,yZe).visitAfter(a),l=0;l<c;++l)d=t[l],m=n[d.index],g=m*m,h=d.x+d.vx,p=d.y+d.vy,f.visit(v);function v(_,w,E,S,T){var C=_.data,A=_.r,R=m+A;if(C){if(C.index>d.index){var N=h-C.x-C.vx,O=p-C.y-C.vy,D=N*N+O*O;D<R*R&&(N===0&&(N=gp(r),D+=N*N),O===0&&(O=gp(r),D+=O*O),D=(R-(D=Math.sqrt(D)))/D*i,d.vx+=(N*=D)*(R=(A*=A)/(g+A)),d.vy+=(O*=D)*R,C.vx-=N*(R=1-R),C.vy-=O*R)}return}return w>h+R||S<h-R||E>p+R||T<p-R}}function a(l){if(l.data)return l.r=n[l.data.index];for(var c=l.r=0;c<4;++c)l[c]&&l[c].r>l.r&&(l.r=l[c].r)}function u(){if(t){var l,c=t.length,f;for(n=new Array(c),l=0;l<c;++l)f=t[l],n[f.index]=+e(f,l,t)}}return s.initialize=function(l,c){t=l,r=c,u()},s.iterations=function(l){return arguments.length?(o=+l,s):o},s.strength=function(l){return arguments.length?(i=+l,s):i},s.radius=function(l){return arguments.length?(e=typeof l=="function"?l:js(+l),u(),s):e},s}function bZe(e){return e.index}function pte(e,t){var n=e.get(t);if(!n)throw new Error("node not found: "+t);return n}function _Ze(e){var t=bZe,n=f,r,i=js(30),o,s,a,u,l,c=1;e==null&&(e=[]);function f(g){return 1/Math.min(a[g.source.index],a[g.target.index])}function d(g){for(var y=0,v=e.length;y<c;++y)for(var _=0,w,E,S,T,C,A,R;_<v;++_)w=e[_],E=w.source,S=w.target,T=S.x+S.vx-E.x-E.vx||gp(l),C=S.y+S.vy-E.y-E.vy||gp(l),A=Math.sqrt(T*T+C*C),A=(A-o[_])/A*g*r[_],T*=A,C*=A,S.vx-=T*(R=u[_]),S.vy-=C*R,E.vx+=T*(R=1-R),E.vy+=C*R}function h(){if(s){var g,y=s.length,v=e.length,_=new Map(s.map((E,S)=>[t(E,S,s),E])),w;for(g=0,a=new Array(y);g<v;++g)w=e[g],w.index=g,typeof w.source!="object"&&(w.source=pte(_,w.source)),typeof w.target!="object"&&(w.target=pte(_,w.target)),a[w.source.index]=(a[w.source.index]||0)+1,a[w.target.index]=(a[w.target.index]||0)+1;for(g=0,u=new Array(v);g<v;++g)w=e[g],u[g]=a[w.source.index]/(a[w.source.index]+a[w.target.index]);r=new Array(v),p(),o=new Array(v),m()}}function p(){if(s)for(var g=0,y=e.length;g<y;++g)r[g]=+n(e[g],g,e)}function m(){if(s)for(var g=0,y=e.length;g<y;++g)o[g]=+i(e[g],g,e)}return d.initialize=function(g,y){s=g,l=y,h()},d.links=function(g){return arguments.length?(e=g,h(),d):e},d.id=function(g){return arguments.length?(t=g,d):t},d.iterations=function(g){return arguments.length?(c=+g,d):c},d.strength=function(g){return arguments.length?(n=typeof g=="function"?g:js(+g),p(),d):n},d.distance=function(g){return arguments.length?(i=typeof g=="function"?g:js(+g),m(),d):i},d}const wZe=1664525,EZe=1013904223,mte=4294967296;function xZe(){let e=1;return()=>(e=(wZe*e+EZe)%mte)/mte}function TZe(e){return e.x}function SZe(e){return e.y}var CZe=10,AZe=Math.PI*(3-Math.sqrt(5));function kZe(e){var t,n=1,r=.001,i=1-Math.pow(r,1/300),o=0,s=.6,a=new Map,u=qz(f),l=Mz("tick","end"),c=xZe();e==null&&(e=[]);function f(){d(),l.call("tick",t),n<r&&(u.stop(),l.call("end",t))}function d(m){var g,y=e.length,v;m===void 0&&(m=1);for(var _=0;_<m;++_)for(n+=(o-n)*i,a.forEach(function(w){w(n)}),g=0;g<y;++g)v=e[g],v.fx==null?v.x+=v.vx*=s:(v.x=v.fx,v.vx=0),v.fy==null?v.y+=v.vy*=s:(v.y=v.fy,v.vy=0);return t}function h(){for(var m=0,g=e.length,y;m<g;++m){if(y=e[m],y.index=m,y.fx!=null&&(y.x=y.fx),y.fy!=null&&(y.y=y.fy),isNaN(y.x)||isNaN(y.y)){var v=CZe*Math.sqrt(.5+m),_=m*AZe;y.x=v*Math.cos(_),y.y=v*Math.sin(_)}(isNaN(y.vx)||isNaN(y.vy))&&(y.vx=y.vy=0)}}function p(m){return m.initialize&&m.initialize(e,c),m}return h(),t={tick:d,restart:function(){return u.restart(f),t},stop:function(){return u.stop(),t},nodes:function(m){return arguments.length?(e=m,h(),a.forEach(p),t):e},alpha:function(m){return arguments.length?(n=+m,t):n},alphaMin:function(m){return arguments.length?(r=+m,t):r},alphaDecay:function(m){return arguments.length?(i=+m,t):+i},alphaTarget:function(m){return arguments.length?(o=+m,t):o},velocityDecay:function(m){return arguments.length?(s=1-m,t):1-s},randomSource:function(m){return arguments.length?(c=m,a.forEach(p),t):c},force:function(m,g){return arguments.length>1?(g==null?a.delete(m):a.set(m,p(g)),t):a.get(m)},find:function(m,g,y){var v=0,_=e.length,w,E,S,T,C;for(y==null?y=1/0:y*=y,v=0;v<_;++v)T=e[v],w=m-T.x,E=g-T.y,S=w*w+E*E,S<y&&(C=T,y=S);return C},on:function(m,g){return arguments.length>1?(l.on(m,g),t):l.on(m)}}}function IZe(){var e,t,n,r,i=js(-30),o,s=1,a=1/0,u=.81;function l(h){var p,m=e.length,g=Xz(e,TZe,SZe).visitAfter(f);for(r=h,p=0;p<m;++p)t=e[p],g.visit(d)}function c(){if(e){var h,p=e.length,m;for(o=new Array(p),h=0;h<p;++h)m=e[h],o[m.index]=+i(m,h,e)}}function f(h){var p=0,m,g,y=0,v,_,w;if(h.length){for(v=_=w=0;w<4;++w)(m=h[w])&&(g=Math.abs(m.value))&&(p+=m.value,y+=g,v+=g*m.x,_+=g*m.y);h.x=v/y,h.y=_/y}else{m=h,m.x=m.data.x,m.y=m.data.y;do p+=o[m.data.index];while(m=m.next)}h.value=p}function d(h,p,m,g){if(!h.value)return!0;var y=h.x-t.x,v=h.y-t.y,_=g-p,w=y*y+v*v;if(_*_/u<w)return w<a&&(y===0&&(y=gp(n),w+=y*y),v===0&&(v=gp(n),w+=v*v),w<s&&(w=Math.sqrt(s*w)),t.vx+=y*h.value*r/w,t.vy+=v*h.value*r/w),!0;if(h.length||w>=a)return;(h.data!==t||h.next)&&(y===0&&(y=gp(n),w+=y*y),v===0&&(v=gp(n),w+=v*v),w<s&&(w=Math.sqrt(s*w)));do h.data!==t&&(_=o[h.data.index]*r/w,t.vx+=y*_,t.vy+=v*_);while(h=h.next)}return l.initialize=function(h,p){e=h,n=p,c()},l.strength=function(h){return arguments.length?(i=typeof h=="function"?h:js(+h),c(),l):i},l.distanceMin=function(h){return arguments.length?(s=h*h,l):Math.sqrt(s)},l.distanceMax=function(h){return arguments.length?(a=h*h,l):Math.sqrt(a)},l.theta=function(h){return arguments.length?(u=h*h,l):Math.sqrt(u)},l}function RZe(e){var t=js(.1),n,r,i;typeof e!="function"&&(e=js(e==null?0:+e));function o(a){for(var u=0,l=n.length,c;u<l;++u)c=n[u],c.vx+=(i[u]-c.x)*r[u]*a}function s(){if(n){var a,u=n.length;for(r=new Array(u),i=new Array(u),a=0;a<u;++a)r[a]=isNaN(i[a]=+e(n[a],a,n))?0:+t(n[a],a,n)}}return o.initialize=function(a){n=a,s()},o.strength=function(a){return arguments.length?(t=typeof a=="function"?a:js(+a),s(),o):t},o.x=function(a){return arguments.length?(e=typeof a=="function"?a:js(+a),s(),o):e},o}function NZe(e){var t=js(.1),n,r,i;typeof e!="function"&&(e=js(e==null?0:+e));function o(a){for(var u=0,l=n.length,c;u<l;++u)c=n[u],c.vy+=(i[u]-c.y)*r[u]*a}function s(){if(n){var a,u=n.length;for(r=new Array(u),i=new Array(u),a=0;a<u;++a)r[a]=isNaN(i[a]=+e(n[a],a,n))?0:+t(n[a],a,n)}}return o.initialize=function(a){n=a,s()},o.strength=function(a){return arguments.length?(t=typeof a=="function"?a:js(+a),s(),o):t},o.y=function(a){return arguments.length?(e=typeof a=="function"?a:js(+a),s(),o):e},o}function PZe(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function MR(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function gb(e){return e=MR(Math.abs(e)),e?e[1]:NaN}function DZe(e,t){return function(n,r){for(var i=n.length,o=[],s=0,a=e[0],u=0;i>0&&a>0&&(u+a+1>r&&(a=Math.max(1,r-u)),o.push(n.substring(i-=a,i+a)),!((u+=a+1)>r));)a=e[s=(s+1)%e.length];return o.reverse().join(t)}}function OZe(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var $Ze=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function M0(e){if(!(t=$Ze.exec(e)))throw new Error("invalid format: "+e);var t;return new Jz({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}M0.prototype=Jz.prototype;function Jz(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}Jz.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function MZe(e){e:for(var t=e.length,n=1,r=-1,i;n<t;++n)switch(e[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(i+1):e}var K0e;function LZe(e,t){var n=MR(e,t);if(!n)return e+"";var r=n[0],i=n[1],o=i-(K0e=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,s=r.length;return o===s?r:o>s?r+new Array(o-s+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+MR(e,Math.max(0,t+o-1))[0]}function gte(e,t){var n=MR(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const yte={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:PZe,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>gte(e*100,t),r:gte,s:LZe,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function vte(e){return e}var bte=Array.prototype.map,_te=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function X0e(e){var t=e.grouping===void 0||e.thousands===void 0?vte:DZe(bte.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",o=e.numerals===void 0?vte:OZe(bte.call(e.numerals,String)),s=e.percent===void 0?"%":e.percent+"",a=e.minus===void 0?"":e.minus+"",u=e.nan===void 0?"NaN":e.nan+"";function l(f){f=M0(f);var d=f.fill,h=f.align,p=f.sign,m=f.symbol,g=f.zero,y=f.width,v=f.comma,_=f.precision,w=f.trim,E=f.type;E==="n"?(v=!0,E="g"):yte[E]||(_===void 0&&(_=12),w=!0,E="g"),(g||d==="0"&&h==="=")&&(g=!0,d="0",h="=");var S=m==="$"?n:m==="#"&&/[boxX]/.test(E)?"0"+E.toLowerCase():"",T=m==="$"?r:/[%p]/.test(E)?s:"",C=yte[E],A=/[defgprs%]/.test(E);_=_===void 0?6:/[gprs]/.test(E)?Math.max(1,Math.min(21,_)):Math.max(0,Math.min(20,_));function R(N){var O=S,D=T,M,F,L;if(E==="c")D=C(N)+D,N="";else{N=+N;var B=N<0||1/N<0;if(N=isNaN(N)?u:C(Math.abs(N),_),w&&(N=MZe(N)),B&&+N==0&&p!=="+"&&(B=!1),O=(B?p==="("?p:a:p==="-"||p==="("?"":p)+O,D=(E==="s"?_te[8+K0e/3]:"")+D+(B&&p==="("?")":""),A){for(M=-1,F=N.length;++M<F;)if(L=N.charCodeAt(M),48>L||L>57){D=(L===46?i+N.slice(M+1):N.slice(M))+D,N=N.slice(0,M);break}}}v&&!g&&(N=t(N,1/0));var U=O.length+N.length+D.length,H=U<y?new Array(y-U+1).join(d):"";switch(v&&g&&(N=t(H+N,H.length?y-D.length:1/0),H=""),h){case"<":N=O+N+D+H;break;case"=":N=O+H+N+D;break;case"^":N=H.slice(0,U=H.length>>1)+O+N+D+H.slice(U);break;default:N=H+O+N+D;break}return o(N)}return R.toString=function(){return f+""},R}function c(f,d){var h=l((f=M0(f),f.type="f",f)),p=Math.max(-8,Math.min(8,Math.floor(gb(d)/3)))*3,m=Math.pow(10,-p),g=_te[8+p/3];return function(y){return h(m*y)+g}}return{format:l,formatPrefix:c}}var g2,R_,Zz;FZe({thousands:",",grouping:[3],currency:["$",""]});function FZe(e){return g2=X0e(e),R_=g2.format,Zz=g2.formatPrefix,g2}function Q0e(e){return Math.max(0,-gb(Math.abs(e)))}function J0e(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(gb(t)/3)))*3-gb(Math.abs(e)))}function Z0e(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,gb(t)-gb(e))+1}var Mt=1e-6,LR=1e-12,hn=Math.PI,ui=hn/2,FR=hn/4,Gs=hn*2,yi=180/hn,cn=hn/180,kn=Math.abs,N_=Math.atan,al=Math.atan2,Ft=Math.cos,y2=Math.ceil,eye=Math.exp,Q5=Math.hypot,jR=Math.log,HL=Math.pow,Ot=Math.sin,Xu=Math.sign||function(e){return e>0?1:e<0?-1:0},Ys=Math.sqrt,eV=Math.tan;function tye(e){return e>1?0:e<-1?hn:Math.acos(e)}function Fa(e){return e>1?ui:e<-1?-ui:Math.asin(e)}function Po(){}function BR(e,t){e&&Ete.hasOwnProperty(e.type)&&Ete[e.type](e,t)}var wte={Feature:function(e,t){BR(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,i=n.length;++r<i;)BR(n[r].geometry,t)}},Ete={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)e=n[r],t.point(e[0],e[1],e[2])},LineString:function(e,t){J5(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)J5(n[r],t,0)},Polygon:function(e,t){xte(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)xte(n[r],t)},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,i=n.length;++r<i;)BR(n[r],t)}};function J5(e,t,n){var r=-1,i=e.length-n,o;for(t.lineStart();++r<i;)o=e[r],t.point(o[0],o[1],o[2]);t.lineEnd()}function xte(e,t){var n=-1,r=e.length;for(t.polygonStart();++n<r;)J5(e[n],t,1);t.polygonEnd()}function bd(e,t){e&&wte.hasOwnProperty(e.type)?wte[e.type](e,t):BR(e,t)}var UR=new zs,zR=new zs,nye,rye,Z5,ej,tj,bf={point:Po,lineStart:Po,lineEnd:Po,polygonStart:function(){UR=new zs,bf.lineStart=jZe,bf.lineEnd=BZe},polygonEnd:function(){var e=+UR;zR.add(e<0?Gs+e:e),this.lineStart=this.lineEnd=this.point=Po},sphere:function(){zR.add(Gs)}};function jZe(){bf.point=UZe}function BZe(){iye(nye,rye)}function UZe(e,t){bf.point=iye,nye=e,rye=t,e*=cn,t*=cn,Z5=e,ej=Ft(t=t/2+FR),tj=Ot(t)}function iye(e,t){e*=cn,t*=cn,t=t/2+FR;var n=e-Z5,r=n>=0?1:-1,i=r*n,o=Ft(t),s=Ot(t),a=tj*s,u=ej*o+a*Ft(i),l=a*r*Ot(i);UR.add(al(l,u)),Z5=e,ej=o,tj=s}function zZe(e){return zR=new zs,bd(e,bf),zR*2}function VR(e){return[al(e[1],e[0]),Fa(e[2])]}function L0(e){var t=e[0],n=e[1],r=Ft(n);return[r*Ft(t),r*Ot(t),Ot(n)]}function v2(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function yb(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function qL(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function b2(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function HR(e){var t=Ys(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}var Gr,ma,ni,Za,Ng,oye,sye,R1,xx,Qh,oh,gd={point:nj,lineStart:Tte,lineEnd:Ste,polygonStart:function(){gd.point=uye,gd.lineStart=VZe,gd.lineEnd=HZe,xx=new zs,bf.polygonStart()},polygonEnd:function(){bf.polygonEnd(),gd.point=nj,gd.lineStart=Tte,gd.lineEnd=Ste,UR<0?(Gr=-(ni=180),ma=-(Za=90)):xx>Mt?Za=90:xx<-Mt&&(ma=-90),oh[0]=Gr,oh[1]=ni},sphere:function(){Gr=-(ni=180),ma=-(Za=90)}};function nj(e,t){Qh.push(oh=[Gr=e,ni=e]),t<ma&&(ma=t),t>Za&&(Za=t)}function aye(e,t){var n=L0([e*cn,t*cn]);if(R1){var r=yb(R1,n),i=[r[1],-r[0],0],o=yb(i,r);HR(o),o=VR(o);var s=e-Ng,a=s>0?1:-1,u=o[0]*yi*a,l,c=kn(s)>180;c^(a*Ng<u&&u<a*e)?(l=o[1]*yi,l>Za&&(Za=l)):(u=(u+360)%360-180,c^(a*Ng<u&&u<a*e)?(l=-o[1]*yi,l<ma&&(ma=l)):(t<ma&&(ma=t),t>Za&&(Za=t))),c?e<Ng?Qa(Gr,e)>Qa(Gr,ni)&&(ni=e):Qa(e,ni)>Qa(Gr,ni)&&(Gr=e):ni>=Gr?(e<Gr&&(Gr=e),e>ni&&(ni=e)):e>Ng?Qa(Gr,e)>Qa(Gr,ni)&&(ni=e):Qa(e,ni)>Qa(Gr,ni)&&(Gr=e)}else Qh.push(oh=[Gr=e,ni=e]);t<ma&&(ma=t),t>Za&&(Za=t),R1=n,Ng=e}function Tte(){gd.point=aye}function Ste(){oh[0]=Gr,oh[1]=ni,gd.point=nj,R1=null}function uye(e,t){if(R1){var n=e-Ng;xx.add(kn(n)>180?n+(n>0?360:-360):n)}else oye=e,sye=t;bf.point(e,t),aye(e,t)}function VZe(){bf.lineStart()}function HZe(){uye(oye,sye),bf.lineEnd(),kn(xx)>Mt&&(Gr=-(ni=180)),oh[0]=Gr,oh[1]=ni,R1=null}function Qa(e,t){return(t-=e)<0?t+360:t}function qZe(e,t){return e[0]-t[0]}function Cte(e,t){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}function WZe(e){var t,n,r,i,o,s,a;if(Za=ni=-(Gr=ma=1/0),Qh=[],bd(e,gd),n=Qh.length){for(Qh.sort(qZe),t=1,r=Qh[0],o=[r];t<n;++t)i=Qh[t],Cte(r,i[0])||Cte(r,i[1])?(Qa(r[0],i[1])>Qa(r[0],r[1])&&(r[1]=i[1]),Qa(i[0],r[1])>Qa(r[0],r[1])&&(r[0]=i[0])):o.push(r=i);for(s=-1/0,n=o.length-1,t=0,r=o[n];t<=n;r=i,++t)i=o[t],(a=Qa(r[1],i[0]))>s&&(s=a,Gr=i[0],ni=r[1])}return Qh=oh=null,Gr===1/0||ma===1/0?[[NaN,NaN],[NaN,NaN]]:[[Gr,ma],[ni,Za]]}var CE,qR,WR,GR,YR,KR,XR,QR,rj,ij,oj,lye,cye,$s,Ms,Ls,Gl={sphere:Po,point:tV,lineStart:Ate,lineEnd:kte,polygonStart:function(){Gl.lineStart=KZe,Gl.lineEnd=XZe},polygonEnd:function(){Gl.lineStart=Ate,Gl.lineEnd=kte}};function tV(e,t){e*=cn,t*=cn;var n=Ft(t);cC(n*Ft(e),n*Ot(e),Ot(t))}function cC(e,t,n){++CE,WR+=(e-WR)/CE,GR+=(t-GR)/CE,YR+=(n-YR)/CE}function Ate(){Gl.point=GZe}function GZe(e,t){e*=cn,t*=cn;var n=Ft(t);$s=n*Ft(e),Ms=n*Ot(e),Ls=Ot(t),Gl.point=YZe,cC($s,Ms,Ls)}function YZe(e,t){e*=cn,t*=cn;var n=Ft(t),r=n*Ft(e),i=n*Ot(e),o=Ot(t),s=al(Ys((s=Ms*o-Ls*i)*s+(s=Ls*r-$s*o)*s+(s=$s*i-Ms*r)*s),$s*r+Ms*i+Ls*o);qR+=s,KR+=s*($s+($s=r)),XR+=s*(Ms+(Ms=i)),QR+=s*(Ls+(Ls=o)),cC($s,Ms,Ls)}function kte(){Gl.point=tV}function KZe(){Gl.point=QZe}function XZe(){fye(lye,cye),Gl.point=tV}function QZe(e,t){lye=e,cye=t,e*=cn,t*=cn,Gl.point=fye;var n=Ft(t);$s=n*Ft(e),Ms=n*Ot(e),Ls=Ot(t),cC($s,Ms,Ls)}function fye(e,t){e*=cn,t*=cn;var n=Ft(t),r=n*Ft(e),i=n*Ot(e),o=Ot(t),s=Ms*o-Ls*i,a=Ls*r-$s*o,u=$s*i-Ms*r,l=Q5(s,a,u),c=Fa(l),f=l&&-c/l;rj.add(f*s),ij.add(f*a),oj.add(f*u),qR+=c,KR+=c*($s+($s=r)),XR+=c*(Ms+(Ms=i)),QR+=c*(Ls+(Ls=o)),cC($s,Ms,Ls)}function JZe(e){CE=qR=WR=GR=YR=KR=XR=QR=0,rj=new zs,ij=new zs,oj=new zs,bd(e,Gl);var t=+rj,n=+ij,r=+oj,i=Q5(t,n,r);return i<LR&&(t=KR,n=XR,r=QR,qR<Mt&&(t=WR,n=GR,r=YR),i=Q5(t,n,r),i<LR)?[NaN,NaN]:[al(n,t)*yi,Fa(r/i)*yi]}function sj(e,t){function n(r,i){return r=e(r,i),t(r[0],r[1])}return e.invert&&t.invert&&(n.invert=function(r,i){return r=t.invert(r,i),r&&e.invert(r[0],r[1])}),n}function aj(e,t){return kn(e)>hn&&(e-=Math.round(e/Gs)*Gs),[e,t]}aj.invert=aj;function dye(e,t,n){return(e%=Gs)?t||n?sj(Rte(e),Nte(t,n)):Rte(e):t||n?Nte(t,n):aj}function Ite(e){return function(t,n){return t+=e,kn(t)>hn&&(t-=Math.round(t/Gs)*Gs),[t,n]}}function Rte(e){var t=Ite(e);return t.invert=Ite(-e),t}function Nte(e,t){var n=Ft(e),r=Ot(e),i=Ft(t),o=Ot(t);function s(a,u){var l=Ft(u),c=Ft(a)*l,f=Ot(a)*l,d=Ot(u),h=d*n+c*r;return[al(f*i-h*o,c*n-d*r),Fa(h*i+f*o)]}return s.invert=function(a,u){var l=Ft(u),c=Ft(a)*l,f=Ot(a)*l,d=Ot(u),h=d*i-f*o;return[al(f*i+d*o,c*n+h*r),Fa(h*n-c*r)]},s}function ZZe(e){e=dye(e[0]*cn,e[1]*cn,e.length>2?e[2]*cn:0);function t(n){return n=e(n[0]*cn,n[1]*cn),n[0]*=yi,n[1]*=yi,n}return t.invert=function(n){return n=e.invert(n[0]*cn,n[1]*cn),n[0]*=yi,n[1]*=yi,n},t}function eet(e,t,n,r,i,o){if(n){var s=Ft(t),a=Ot(t),u=r*n;i==null?(i=t+r*Gs,o=t-u/2):(i=Pte(s,i),o=Pte(s,o),(r>0?i<o:i>o)&&(i+=r*Gs));for(var l,c=i;r>0?c>o:c<o;c-=u)l=VR([s,-a*Ft(c),-a*Ot(c)]),e.point(l[0],l[1])}}function Pte(e,t){t=L0(t),t[0]-=e,HR(t);var n=tye(-t[1]);return((-t[2]<0?-n:n)+Gs-Mt)%Gs}function hye(){var e=[],t;return{point:function(n,r,i){t.push([n,r,i])},lineStart:function(){e.push(t=[])},lineEnd:Po,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function zk(e,t){return kn(e[0]-t[0])<Mt&&kn(e[1]-t[1])<Mt}function _2(e,t,n,r){this.x=e,this.z=t,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function pye(e,t,n,r,i){var o=[],s=[],a,u;if(e.forEach(function(p){if(!((m=p.length-1)<=0)){var m,g=p[0],y=p[m],v;if(zk(g,y)){if(!g[2]&&!y[2]){for(i.lineStart(),a=0;a<m;++a)i.point((g=p[a])[0],g[1]);i.lineEnd();return}y[0]+=2*Mt}o.push(v=new _2(g,p,null,!0)),s.push(v.o=new _2(g,null,v,!1)),o.push(v=new _2(y,p,null,!1)),s.push(v.o=new _2(y,null,v,!0))}}),!!o.length){for(s.sort(t),Dte(o),Dte(s),a=0,u=s.length;a<u;++a)s[a].e=n=!n;for(var l=o[0],c,f;;){for(var d=l,h=!0;d.v;)if((d=d.n)===l)return;c=d.z,i.lineStart();do{if(d.v=d.o.v=!0,d.e){if(h)for(a=0,u=c.length;a<u;++a)i.point((f=c[a])[0],f[1]);else r(d.x,d.n.x,1,i);d=d.n}else{if(h)for(c=d.p.z,a=c.length-1;a>=0;--a)i.point((f=c[a])[0],f[1]);else r(d.x,d.p.x,-1,i);d=d.p}d=d.o,c=d.z,h=!h}while(!d.v);i.lineEnd()}}}function Dte(e){if(t=e.length){for(var t,n=0,r=e[0],i;++n<t;)r.n=i=e[n],i.p=r,r=i;r.n=i=e[0],i.p=r}}function WL(e){return kn(e[0])<=hn?e[0]:Xu(e[0])*((kn(e[0])+hn)%Gs-hn)}function tet(e,t){var n=WL(t),r=t[1],i=Ot(r),o=[Ot(n),-Ft(n),0],s=0,a=0,u=new zs;i===1?r=ui+Mt:i===-1&&(r=-ui-Mt);for(var l=0,c=e.length;l<c;++l)if(d=(f=e[l]).length)for(var f,d,h=f[d-1],p=WL(h),m=h[1]/2+FR,g=Ot(m),y=Ft(m),v=0;v<d;++v,p=w,g=S,y=T,h=_){var _=f[v],w=WL(_),E=_[1]/2+FR,S=Ot(E),T=Ft(E),C=w-p,A=C>=0?1:-1,R=A*C,N=R>hn,O=g*S;if(u.add(al(O*A*Ot(R),y*T+O*Ft(R))),s+=N?C+A*Gs:C,N^p>=n^w>=n){var D=yb(L0(h),L0(_));HR(D);var M=yb(o,D);HR(M);var F=(N^C>=0?-1:1)*Fa(M[2]);(r>F||r===F&&(D[0]||D[1]))&&(a+=N^C>=0?1:-1)}}return(s<-Mt||s<Mt&&u<-LR)^a&1}function mye(e,t,n,r){return function(i){var o=t(i),s=hye(),a=t(s),u=!1,l,c,f,d={point:h,lineStart:m,lineEnd:g,polygonStart:function(){d.point=y,d.lineStart=v,d.lineEnd=_,c=[],l=[]},polygonEnd:function(){d.point=h,d.lineStart=m,d.lineEnd=g,c=Xge(c);var w=tet(l,r);c.length?(u||(i.polygonStart(),u=!0),pye(c,ret,w,n,i)):w&&(u||(i.polygonStart(),u=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),u&&(i.polygonEnd(),u=!1),c=l=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function h(w,E){e(w,E)&&i.point(w,E)}function p(w,E){o.point(w,E)}function m(){d.point=p,o.lineStart()}function g(){d.point=h,o.lineEnd()}function y(w,E){f.push([w,E]),a.point(w,E)}function v(){a.lineStart(),f=[]}function _(){y(f[0][0],f[0][1]),a.lineEnd();var w=a.clean(),E=s.result(),S,T=E.length,C,A,R;if(f.pop(),l.push(f),f=null,!!T){if(w&1){if(A=E[0],(C=A.length-1)>0){for(u||(i.polygonStart(),u=!0),i.lineStart(),S=0;S<C;++S)i.point((R=A[S])[0],R[1]);i.lineEnd()}return}T>1&&w&2&&E.push(E.pop().concat(E.shift())),c.push(E.filter(net))}}return d}}function net(e){return e.length>1}function ret(e,t){return((e=e.x)[0]<0?e[1]-ui-Mt:ui-e[1])-((t=t.x)[0]<0?t[1]-ui-Mt:ui-t[1])}const Ote=mye(function(){return!0},iet,set,[-hn,-ui]);function iet(e){var t=NaN,n=NaN,r=NaN,i;return{lineStart:function(){e.lineStart(),i=1},point:function(o,s){var a=o>0?hn:-hn,u=kn(o-t);kn(u-hn)<Mt?(e.point(t,n=(n+s)/2>0?ui:-ui),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(a,n),e.point(o,n),i=0):r!==a&&u>=hn&&(kn(t-r)<Mt&&(t-=r*Mt),kn(o-a)<Mt&&(o-=a*Mt),n=oet(t,n,o,s),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(a,n),i=0),e.point(t=o,n=s),r=a},lineEnd:function(){e.lineEnd(),t=n=NaN},clean:function(){return 2-i}}}function oet(e,t,n,r){var i,o,s=Ot(e-n);return kn(s)>Mt?N_((Ot(t)*(o=Ft(r))*Ot(n)-Ot(r)*(i=Ft(t))*Ot(e))/(i*o*s)):(t+r)/2}function set(e,t,n,r){var i;if(e==null)i=n*ui,r.point(-hn,i),r.point(0,i),r.point(hn,i),r.point(hn,0),r.point(hn,-i),r.point(0,-i),r.point(-hn,-i),r.point(-hn,0),r.point(-hn,i);else if(kn(e[0]-t[0])>Mt){var o=e[0]<t[0]?hn:-hn;i=n*o/2,r.point(-o,i),r.point(0,i),r.point(o,i)}else r.point(t[0],t[1])}function aet(e){var t=Ft(e),n=2*cn,r=t>0,i=kn(t)>Mt;function o(c,f,d,h){eet(h,e,n,d,c,f)}function s(c,f){return Ft(c)*Ft(f)>t}function a(c){var f,d,h,p,m;return{lineStart:function(){p=h=!1,m=1},point:function(g,y){var v=[g,y],_,w=s(g,y),E=r?w?0:l(g,y):w?l(g+(g<0?hn:-hn),y):0;if(!f&&(p=h=w)&&c.lineStart(),w!==h&&(_=u(f,v),(!_||zk(f,_)||zk(v,_))&&(v[2]=1)),w!==h)m=0,w?(c.lineStart(),_=u(v,f),c.point(_[0],_[1])):(_=u(f,v),c.point(_[0],_[1],2),c.lineEnd()),f=_;else if(i&&f&&r^w){var S;!(E&d)&&(S=u(v,f,!0))&&(m=0,r?(c.lineStart(),c.point(S[0][0],S[0][1]),c.point(S[1][0],S[1][1]),c.lineEnd()):(c.point(S[1][0],S[1][1]),c.lineEnd(),c.lineStart(),c.point(S[0][0],S[0][1],3)))}w&&(!f||!zk(f,v))&&c.point(v[0],v[1]),f=v,h=w,d=E},lineEnd:function(){h&&c.lineEnd(),f=null},clean:function(){return m|(p&&h)<<1}}}function u(c,f,d){var h=L0(c),p=L0(f),m=[1,0,0],g=yb(h,p),y=v2(g,g),v=g[0],_=y-v*v;if(!_)return!d&&c;var w=t*y/_,E=-t*v/_,S=yb(m,g),T=b2(m,w),C=b2(g,E);qL(T,C);var A=S,R=v2(T,A),N=v2(A,A),O=R*R-N*(v2(T,T)-1);if(!(O<0)){var D=Ys(O),M=b2(A,(-R-D)/N);if(qL(M,T),M=VR(M),!d)return M;var F=c[0],L=f[0],B=c[1],U=f[1],H;L<F&&(H=F,F=L,L=H);var P=L-F,z=kn(P-hn)<Mt,W=z||P<Mt;if(!z&&U<B&&(H=B,B=U,U=H),W?z?B+U>0^M[1]<(kn(M[0]-F)<Mt?B:U):B<=M[1]&&M[1]<=U:P>hn^(F<=M[0]&&M[0]<=L)){var j=b2(A,(-R+D)/N);return qL(j,T),[M,VR(j)]}}}function l(c,f){var d=r?e:hn-e,h=0;return c<-d?h|=1:c>d&&(h|=2),f<-d?h|=4:f>d&&(h|=8),h}return mye(s,a,o,r?[0,-e]:[-hn,e-hn])}function uet(e,t,n,r,i,o){var s=e[0],a=e[1],u=t[0],l=t[1],c=0,f=1,d=u-s,h=l-a,p;if(p=n-s,!(!d&&p>0)){if(p/=d,d<0){if(p<c)return;p<f&&(f=p)}else if(d>0){if(p>f)return;p>c&&(c=p)}if(p=i-s,!(!d&&p<0)){if(p/=d,d<0){if(p>f)return;p>c&&(c=p)}else if(d>0){if(p<c)return;p<f&&(f=p)}if(p=r-a,!(!h&&p>0)){if(p/=h,h<0){if(p<c)return;p<f&&(f=p)}else if(h>0){if(p>f)return;p>c&&(c=p)}if(p=o-a,!(!h&&p<0)){if(p/=h,h<0){if(p>f)return;p>c&&(c=p)}else if(h>0){if(p<c)return;p<f&&(f=p)}return c>0&&(e[0]=s+c*d,e[1]=a+c*h),f<1&&(t[0]=s+f*d,t[1]=a+f*h),!0}}}}}var AE=1e9,w2=-AE;function gye(e,t,n,r){function i(l,c){return e<=l&&l<=n&&t<=c&&c<=r}function o(l,c,f,d){var h=0,p=0;if(l==null||(h=s(l,f))!==(p=s(c,f))||u(l,c)<0^f>0)do d.point(h===0||h===3?e:n,h>1?r:t);while((h=(h+f+4)%4)!==p);else d.point(c[0],c[1])}function s(l,c){return kn(l[0]-e)<Mt?c>0?0:3:kn(l[0]-n)<Mt?c>0?2:1:kn(l[1]-t)<Mt?c>0?1:0:c>0?3:2}function a(l,c){return u(l.x,c.x)}function u(l,c){var f=s(l,1),d=s(c,1);return f!==d?f-d:f===0?c[1]-l[1]:f===1?l[0]-c[0]:f===2?l[1]-c[1]:c[0]-l[0]}return function(l){var c=l,f=hye(),d,h,p,m,g,y,v,_,w,E,S,T={point:C,lineStart:O,lineEnd:D,polygonStart:R,polygonEnd:N};function C(F,L){i(F,L)&&c.point(F,L)}function A(){for(var F=0,L=0,B=h.length;L<B;++L)for(var U=h[L],H=1,P=U.length,z=U[0],W,j,q=z[0],G=z[1];H<P;++H)W=q,j=G,z=U[H],q=z[0],G=z[1],j<=r?G>r&&(q-W)*(r-j)>(G-j)*(e-W)&&++F:G<=r&&(q-W)*(r-j)<(G-j)*(e-W)&&--F;return F}function R(){c=f,d=[],h=[],S=!0}function N(){var F=A(),L=S&&F,B=(d=Xge(d)).length;(L||B)&&(l.polygonStart(),L&&(l.lineStart(),o(null,null,1,l),l.lineEnd()),B&&pye(d,a,F,o,l),l.polygonEnd()),c=l,d=h=p=null}function O(){T.point=M,h&&h.push(p=[]),E=!0,w=!1,v=_=NaN}function D(){d&&(M(m,g),y&&w&&f.rejoin(),d.push(f.result())),T.point=C,w&&c.lineEnd()}function M(F,L){var B=i(F,L);if(h&&p.push([F,L]),E)m=F,g=L,y=B,E=!1,B&&(c.lineStart(),c.point(F,L));else if(B&&w)c.point(F,L);else{var U=[v=Math.max(w2,Math.min(AE,v)),_=Math.max(w2,Math.min(AE,_))],H=[F=Math.max(w2,Math.min(AE,F)),L=Math.max(w2,Math.min(AE,L))];uet(U,H,e,t,n,r)?(w||(c.lineStart(),c.point(U[0],U[1])),c.point(H[0],H[1]),B||c.lineEnd(),S=!1):B&&(c.lineStart(),c.point(F,L),S=!1)}v=F,_=L,w=B}return T}}function $te(e,t,n){var r=Ea(e,t-Mt,n).concat(t);return function(i){return r.map(function(o){return[i,o]})}}function Mte(e,t,n){var r=Ea(e,t-Mt,n).concat(t);return function(i){return r.map(function(o){return[o,i]})}}function cet(){var e,t,n,r,i,o,s,a,u=10,l=u,c=90,f=360,d,h,p,m,g=2.5;function y(){return{type:"MultiLineString",coordinates:v()}}function v(){return Ea(y2(r/c)*c,n,c).map(p).concat(Ea(y2(a/f)*f,s,f).map(m)).concat(Ea(y2(t/u)*u,e,u).filter(function(_){return kn(_%c)>Mt}).map(d)).concat(Ea(y2(o/l)*l,i,l).filter(function(_){return kn(_%f)>Mt}).map(h))}return y.lines=function(){return v().map(function(_){return{type:"LineString",coordinates:_}})},y.outline=function(){return{type:"Polygon",coordinates:[p(r).concat(m(s).slice(1),p(n).reverse().slice(1),m(a).reverse().slice(1))]}},y.extent=function(_){return arguments.length?y.extentMajor(_).extentMinor(_):y.extentMinor()},y.extentMajor=function(_){return arguments.length?(r=+_[0][0],n=+_[1][0],a=+_[0][1],s=+_[1][1],r>n&&(_=r,r=n,n=_),a>s&&(_=a,a=s,s=_),y.precision(g)):[[r,a],[n,s]]},y.extentMinor=function(_){return arguments.length?(t=+_[0][0],e=+_[1][0],o=+_[0][1],i=+_[1][1],t>e&&(_=t,t=e,e=_),o>i&&(_=o,o=i,i=_),y.precision(g)):[[t,o],[e,i]]},y.step=function(_){return arguments.length?y.stepMajor(_).stepMinor(_):y.stepMinor()},y.stepMajor=function(_){return arguments.length?(c=+_[0],f=+_[1],y):[c,f]},y.stepMinor=function(_){return arguments.length?(u=+_[0],l=+_[1],y):[u,l]},y.precision=function(_){return arguments.length?(g=+_,d=$te(o,i,90),h=Mte(t,e,g),p=$te(a,s,90),m=Mte(r,n,g),y):g},y.extentMajor([[-180,-90+Mt],[180,90-Mt]]).extentMinor([[-180,-80-Mt],[180,80+Mt]])}const BT=e=>e;var GL=new zs,uj=new zs,yye,vye,lj,cj,_d={point:Po,lineStart:Po,lineEnd:Po,polygonStart:function(){_d.lineStart=fet,_d.lineEnd=het},polygonEnd:function(){_d.lineStart=_d.lineEnd=_d.point=Po,GL.add(kn(uj)),uj=new zs},result:function(){var e=GL/2;return GL=new zs,e}};function fet(){_d.point=det}function det(e,t){_d.point=bye,yye=lj=e,vye=cj=t}function bye(e,t){uj.add(cj*e-lj*t),lj=e,cj=t}function het(){bye(yye,vye)}var vb=1/0,JR=vb,UT=-vb,ZR=UT,eN={point:pet,lineStart:Po,lineEnd:Po,polygonStart:Po,polygonEnd:Po,result:function(){var e=[[vb,JR],[UT,ZR]];return UT=ZR=-(JR=vb=1/0),e}};function pet(e,t){e<vb&&(vb=e),e>UT&&(UT=e),t<JR&&(JR=t),t>ZR&&(ZR=t)}var fj=0,dj=0,kE=0,tN=0,nN=0,a1=0,hj=0,pj=0,IE=0,_ye,wye,Hc,qc,Gu={point:F0,lineStart:Lte,lineEnd:Fte,polygonStart:function(){Gu.lineStart=yet,Gu.lineEnd=vet},polygonEnd:function(){Gu.point=F0,Gu.lineStart=Lte,Gu.lineEnd=Fte},result:function(){var e=IE?[hj/IE,pj/IE]:a1?[tN/a1,nN/a1]:kE?[fj/kE,dj/kE]:[NaN,NaN];return fj=dj=kE=tN=nN=a1=hj=pj=IE=0,e}};function F0(e,t){fj+=e,dj+=t,++kE}function Lte(){Gu.point=met}function met(e,t){Gu.point=get,F0(Hc=e,qc=t)}function get(e,t){var n=e-Hc,r=t-qc,i=Ys(n*n+r*r);tN+=i*(Hc+e)/2,nN+=i*(qc+t)/2,a1+=i,F0(Hc=e,qc=t)}function Fte(){Gu.point=F0}function yet(){Gu.point=bet}function vet(){Eye(_ye,wye)}function bet(e,t){Gu.point=Eye,F0(_ye=Hc=e,wye=qc=t)}function Eye(e,t){var n=e-Hc,r=t-qc,i=Ys(n*n+r*r);tN+=i*(Hc+e)/2,nN+=i*(qc+t)/2,a1+=i,i=qc*e-Hc*t,hj+=i*(Hc+e),pj+=i*(qc+t),IE+=i*3,F0(Hc=e,qc=t)}function xye(e){this._context=e}xye.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._context.moveTo(e,t),this._point=1;break}case 1:{this._context.lineTo(e,t);break}default:{this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,Gs);break}}},result:Po};var mj=new zs,YL,Tye,Sye,RE,NE,zT={point:Po,lineStart:function(){zT.point=_et},lineEnd:function(){YL&&Cye(Tye,Sye),zT.point=Po},polygonStart:function(){YL=!0},polygonEnd:function(){YL=null},result:function(){var e=+mj;return mj=new zs,e}};function _et(e,t){zT.point=Cye,Tye=RE=e,Sye=NE=t}function Cye(e,t){RE-=e,NE-=t,mj.add(Ys(RE*RE+NE*NE)),RE=e,NE=t}let jte,rN,Bte,Ute;class zte{constructor(t){this._append=t==null?Aye:wet(t),this._radius=4.5,this._=""}pointRadius(t){return this._radius=+t,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(t,n){switch(this._point){case 0:{this._append`M${t},${n}`,this._point=1;break}case 1:{this._append`L${t},${n}`;break}default:{if(this._append`M${t},${n}`,this._radius!==Bte||this._append!==rN){const r=this._radius,i=this._;this._="",this._append`m0,${r}a${r},${r} 0 1,1 0,${-2*r}a${r},${r} 0 1,1 0,${2*r}z`,Bte=r,rN=this._append,Ute=this._,this._=i}this._+=Ute;break}}}result(){const t=this._;return this._="",t.length?t:null}}function Aye(e){let t=1;this._+=e[0];for(const n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function wet(e){const t=Math.floor(e);if(!(t>=0))throw new RangeError(`invalid digits: ${e}`);if(t>15)return Aye;if(t!==jte){const n=10**t;jte=t,rN=function(i){let o=1;this._+=i[0];for(const s=i.length;o<s;++o)this._+=Math.round(arguments[o]*n)/n+i[o]}}return rN}function kye(e,t){let n=3,r=4.5,i,o;function s(a){return a&&(typeof r=="function"&&o.pointRadius(+r.apply(this,arguments)),bd(a,i(o))),o.result()}return s.area=function(a){return bd(a,i(_d)),_d.result()},s.measure=function(a){return bd(a,i(zT)),zT.result()},s.bounds=function(a){return bd(a,i(eN)),eN.result()},s.centroid=function(a){return bd(a,i(Gu)),Gu.result()},s.projection=function(a){return arguments.length?(i=a==null?(e=null,BT):(e=a).stream,s):e},s.context=function(a){return arguments.length?(o=a==null?(t=null,new zte(n)):new xye(t=a),typeof r!="function"&&o.pointRadius(r),s):t},s.pointRadius=function(a){return arguments.length?(r=typeof a=="function"?a:(o.pointRadius(+a),+a),s):r},s.digits=function(a){if(!arguments.length)return n;if(a==null)n=null;else{const u=Math.floor(a);if(!(u>=0))throw new RangeError(`invalid digits: ${a}`);n=u}return t===null&&(o=new zte(n)),s},s.projection(e).digits(n).context(t)}function mO(e){return function(t){var n=new gj;for(var r in e)n[r]=e[r];return n.stream=t,n}}function gj(){}gj.prototype={constructor:gj,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function nV(e,t,n){var r=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),r!=null&&e.clipExtent(null),bd(n,e.stream(eN)),t(eN.result()),r!=null&&e.clipExtent(r),e}function gO(e,t,n){return nV(e,function(r){var i=t[1][0]-t[0][0],o=t[1][1]-t[0][1],s=Math.min(i/(r[1][0]-r[0][0]),o/(r[1][1]-r[0][1])),a=+t[0][0]+(i-s*(r[1][0]+r[0][0]))/2,u=+t[0][1]+(o-s*(r[1][1]+r[0][1]))/2;e.scale(150*s).translate([a,u])},n)}function rV(e,t,n){return gO(e,[[0,0],t],n)}function iV(e,t,n){return nV(e,function(r){var i=+t,o=i/(r[1][0]-r[0][0]),s=(i-o*(r[1][0]+r[0][0]))/2,a=-o*r[0][1];e.scale(150*o).translate([s,a])},n)}function oV(e,t,n){return nV(e,function(r){var i=+t,o=i/(r[1][1]-r[0][1]),s=-o*r[0][0],a=(i-o*(r[1][1]+r[0][1]))/2;e.scale(150*o).translate([s,a])},n)}var Vte=16,Eet=Ft(30*cn);function Hte(e,t){return+t?Tet(e,t):xet(e)}function xet(e){return mO({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}function Tet(e,t){function n(r,i,o,s,a,u,l,c,f,d,h,p,m,g){var y=l-r,v=c-i,_=y*y+v*v;if(_>4*t&&m--){var w=s+d,E=a+h,S=u+p,T=Ys(w*w+E*E+S*S),C=Fa(S/=T),A=kn(kn(S)-1)<Mt||kn(o-f)<Mt?(o+f)/2:al(E,w),R=e(A,C),N=R[0],O=R[1],D=N-r,M=O-i,F=v*D-y*M;(F*F/_>t||kn((y*D+v*M)/_-.5)>.3||s*d+a*h+u*p<Eet)&&(n(r,i,o,s,a,u,N,O,A,w/=T,E/=T,S,m,g),g.point(N,O),n(N,O,A,w,E,S,l,c,f,d,h,p,m,g))}}return function(r){var i,o,s,a,u,l,c,f,d,h,p,m,g={point:y,lineStart:v,lineEnd:w,polygonStart:function(){r.polygonStart(),g.lineStart=E},polygonEnd:function(){r.polygonEnd(),g.lineStart=v}};function y(C,A){C=e(C,A),r.point(C[0],C[1])}function v(){f=NaN,g.point=_,r.lineStart()}function _(C,A){var R=L0([C,A]),N=e(C,A);n(f,d,c,h,p,m,f=N[0],d=N[1],c=C,h=R[0],p=R[1],m=R[2],Vte,r),r.point(f,d)}function w(){g.point=y,r.lineEnd()}function E(){v(),g.point=S,g.lineEnd=T}function S(C,A){_(i=C,A),o=f,s=d,a=h,u=p,l=m,g.point=_}function T(){n(f,d,c,h,p,m,o,s,i,a,u,l,Vte,r),g.lineEnd=w,w()}return g}}var Cet=mO({point:function(e,t){this.stream.point(e*cn,t*cn)}});function Aet(e){return mO({point:function(t,n){var r=e(t,n);return this.stream.point(r[0],r[1])}})}function ket(e,t,n,r,i){function o(s,a){return s*=r,a*=i,[t+e*s,n-e*a]}return o.invert=function(s,a){return[(s-t)/e*r,(n-a)/e*i]},o}function qte(e,t,n,r,i,o){if(!o)return ket(e,t,n,r,i);var s=Ft(o),a=Ot(o),u=s*e,l=a*e,c=s/e,f=a/e,d=(a*n-s*t)/e,h=(a*t+s*n)/e;function p(m,g){return m*=r,g*=i,[u*m-l*g+t,n-l*m-u*g]}return p.invert=function(m,g){return[r*(c*m-f*g+d),i*(h-f*m-c*g)]},p}function Bf(e){return Iye(function(){return e})()}function Iye(e){var t,n=150,r=480,i=250,o=0,s=0,a=0,u=0,l=0,c,f=0,d=1,h=1,p=null,m=Ote,g=null,y,v,_,w=BT,E=.5,S,T,C,A,R;function N(F){return C(F[0]*cn,F[1]*cn)}function O(F){return F=C.invert(F[0],F[1]),F&&[F[0]*yi,F[1]*yi]}N.stream=function(F){return A&&R===F?A:A=Cet(Aet(c)(m(S(w(R=F)))))},N.preclip=function(F){return arguments.length?(m=F,p=void 0,M()):m},N.postclip=function(F){return arguments.length?(w=F,g=y=v=_=null,M()):w},N.clipAngle=function(F){return arguments.length?(m=+F?aet(p=F*cn):(p=null,Ote),M()):p*yi},N.clipExtent=function(F){return arguments.length?(w=F==null?(g=y=v=_=null,BT):gye(g=+F[0][0],y=+F[0][1],v=+F[1][0],_=+F[1][1]),M()):g==null?null:[[g,y],[v,_]]},N.scale=function(F){return arguments.length?(n=+F,D()):n},N.translate=function(F){return arguments.length?(r=+F[0],i=+F[1],D()):[r,i]},N.center=function(F){return arguments.length?(o=F[0]%360*cn,s=F[1]%360*cn,D()):[o*yi,s*yi]},N.rotate=function(F){return arguments.length?(a=F[0]%360*cn,u=F[1]%360*cn,l=F.length>2?F[2]%360*cn:0,D()):[a*yi,u*yi,l*yi]},N.angle=function(F){return arguments.length?(f=F%360*cn,D()):f*yi},N.reflectX=function(F){return arguments.length?(d=F?-1:1,D()):d<0},N.reflectY=function(F){return arguments.length?(h=F?-1:1,D()):h<0},N.precision=function(F){return arguments.length?(S=Hte(T,E=F*F),M()):Ys(E)},N.fitExtent=function(F,L){return gO(N,F,L)},N.fitSize=function(F,L){return rV(N,F,L)},N.fitWidth=function(F,L){return iV(N,F,L)},N.fitHeight=function(F,L){return oV(N,F,L)};function D(){var F=qte(n,0,0,d,h,f).apply(null,t(o,s)),L=qte(n,r-F[0],i-F[1],d,h,f);return c=dye(a,u,l),T=sj(t,L),C=sj(c,T),S=Hte(T,E),M()}function M(){return A=R=null,N}return function(){return t=e.apply(this,arguments),N.invert=t.invert&&O,D()}}function sV(e){var t=0,n=hn/3,r=Iye(e),i=r(t,n);return i.parallels=function(o){return arguments.length?r(t=o[0]*cn,n=o[1]*cn):[t*yi,n*yi]},i}function Iet(e){var t=Ft(e);function n(r,i){return[r*t,Ot(i)/t]}return n.invert=function(r,i){return[r/t,Fa(i*t)]},n}function Ret(e,t){var n=Ot(e),r=(n+Ot(t))/2;if(kn(r)<Mt)return Iet(e);var i=1+n*(2*r-n),o=Ys(i)/r;function s(a,u){var l=Ys(i-2*r*Ot(u))/r;return[l*Ot(a*=r),o-l*Ft(a)]}return s.invert=function(a,u){var l=o-u,c=al(a,kn(l))*Xu(l);return l*r<0&&(c-=hn*Xu(a)*Xu(l)),[c/r,Fa((i-(a*a+l*l)*r*r)/(2*r))]},s}function iN(){return sV(Ret).scale(155.424).center([0,33.6442])}function Rye(){return iN().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function Net(e){var t=e.length;return{point:function(n,r){for(var i=-1;++i<t;)e[i].point(n,r)},sphere:function(){for(var n=-1;++n<t;)e[n].sphere()},lineStart:function(){for(var n=-1;++n<t;)e[n].lineStart()},lineEnd:function(){for(var n=-1;++n<t;)e[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<t;)e[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<t;)e[n].polygonEnd()}}}function Pet(){var e,t,n=Rye(),r,i=iN().rotate([154,0]).center([-2,58.5]).parallels([55,65]),o,s=iN().rotate([157,0]).center([-3,19.9]).parallels([8,18]),a,u,l={point:function(d,h){u=[d,h]}};function c(d){var h=d[0],p=d[1];return u=null,r.point(h,p),u||(o.point(h,p),u)||(a.point(h,p),u)}c.invert=function(d){var h=n.scale(),p=n.translate(),m=(d[0]-p[0])/h,g=(d[1]-p[1])/h;return(g>=.12&&g<.234&&m>=-.425&&m<-.214?i:g>=.166&&g<.234&&m>=-.214&&m<-.115?s:n).invert(d)},c.stream=function(d){return e&&t===d?e:e=Net([n.stream(t=d),i.stream(d),s.stream(d)])},c.precision=function(d){return arguments.length?(n.precision(d),i.precision(d),s.precision(d),f()):n.precision()},c.scale=function(d){return arguments.length?(n.scale(d),i.scale(d*.35),s.scale(d),c.translate(n.translate())):n.scale()},c.translate=function(d){if(!arguments.length)return n.translate();var h=n.scale(),p=+d[0],m=+d[1];return r=n.translate(d).clipExtent([[p-.455*h,m-.238*h],[p+.455*h,m+.238*h]]).stream(l),o=i.translate([p-.307*h,m+.201*h]).clipExtent([[p-.425*h+Mt,m+.12*h+Mt],[p-.214*h-Mt,m+.234*h-Mt]]).stream(l),a=s.translate([p-.205*h,m+.212*h]).clipExtent([[p-.214*h+Mt,m+.166*h+Mt],[p-.115*h-Mt,m+.234*h-Mt]]).stream(l),f()},c.fitExtent=function(d,h){return gO(c,d,h)},c.fitSize=function(d,h){return rV(c,d,h)},c.fitWidth=function(d,h){return iV(c,d,h)},c.fitHeight=function(d,h){return oV(c,d,h)};function f(){return e=t=null,c}return c.scale(1070)}function Nye(e){return function(t,n){var r=Ft(t),i=Ft(n),o=e(r*i);return o===1/0?[2,0]:[o*i*Ot(t),o*Ot(n)]}}function fC(e){return function(t,n){var r=Ys(t*t+n*n),i=e(r),o=Ot(i),s=Ft(i);return[al(t*o,r*s),Fa(r&&n*o/r)]}}var Pye=Nye(function(e){return Ys(2/(1+e))});Pye.invert=fC(function(e){return 2*Fa(e/2)});function Det(){return Bf(Pye).scale(124.75).clipAngle(180-.001)}var Dye=Nye(function(e){return(e=tye(e))&&e/Ot(e)});Dye.invert=fC(function(e){return e});function Oet(){return Bf(Dye).scale(79.4188).clipAngle(180-.001)}function yO(e,t){return[e,jR(eV((ui+t)/2))]}yO.invert=function(e,t){return[e,2*N_(eye(t))-ui]};function $et(){return Oye(yO).scale(961/Gs)}function Oye(e){var t=Bf(e),n=t.center,r=t.scale,i=t.translate,o=t.clipExtent,s=null,a,u,l;t.scale=function(f){return arguments.length?(r(f),c()):r()},t.translate=function(f){return arguments.length?(i(f),c()):i()},t.center=function(f){return arguments.length?(n(f),c()):n()},t.clipExtent=function(f){return arguments.length?(f==null?s=a=u=l=null:(s=+f[0][0],a=+f[0][1],u=+f[1][0],l=+f[1][1]),c()):s==null?null:[[s,a],[u,l]]};function c(){var f=hn*r(),d=t(ZZe(t.rotate()).invert([0,0]));return o(s==null?[[d[0]-f,d[1]-f],[d[0]+f,d[1]+f]]:e===yO?[[Math.max(d[0]-f,s),a],[Math.min(d[0]+f,u),l]]:[[s,Math.max(d[1]-f,a)],[u,Math.min(d[1]+f,l)]])}return c()}function E2(e){return eV((ui+e)/2)}function Met(e,t){var n=Ft(e),r=e===t?Ot(e):jR(n/Ft(t))/jR(E2(t)/E2(e)),i=n*HL(E2(e),r)/r;if(!r)return yO;function o(s,a){i>0?a<-ui+Mt&&(a=-ui+Mt):a>ui-Mt&&(a=ui-Mt);var u=i/HL(E2(a),r);return[u*Ot(r*s),i-u*Ft(r*s)]}return o.invert=function(s,a){var u=i-a,l=Xu(r)*Ys(s*s+u*u),c=al(s,kn(u))*Xu(u);return u*r<0&&(c-=hn*Xu(s)*Xu(u)),[c/r,2*N_(HL(i/l,1/r))-ui]},o}function Let(){return sV(Met).scale(109.5).parallels([30,30])}function oN(e,t){return[e,t]}oN.invert=oN;function Fet(){return Bf(oN).scale(152.63)}function jet(e,t){var n=Ft(e),r=e===t?Ot(e):(n-Ft(t))/(t-e),i=n/r+e;if(kn(r)<Mt)return oN;function o(s,a){var u=i-a,l=r*s;return[u*Ot(l),i-u*Ft(l)]}return o.invert=function(s,a){var u=i-a,l=al(s,kn(u))*Xu(u);return u*r<0&&(l-=hn*Xu(s)*Xu(u)),[l/r,i-Xu(r)*Ys(s*s+u*u)]},o}function Bet(){return sV(jet).scale(131.154).center([0,13.9389])}var Tx=1.340264,Sx=-.081106,Cx=893e-6,Ax=.003796,sN=Ys(3)/2,Uet=12;function $ye(e,t){var n=Fa(sN*Ot(t)),r=n*n,i=r*r*r;return[e*Ft(n)/(sN*(Tx+3*Sx*r+i*(7*Cx+9*Ax*r))),n*(Tx+Sx*r+i*(Cx+Ax*r))]}$ye.invert=function(e,t){for(var n=t,r=n*n,i=r*r*r,o=0,s,a,u;o<Uet&&(a=n*(Tx+Sx*r+i*(Cx+Ax*r))-t,u=Tx+3*Sx*r+i*(7*Cx+9*Ax*r),n-=s=a/u,r=n*n,i=r*r*r,!(kn(s)<LR));++o);return[sN*e*(Tx+3*Sx*r+i*(7*Cx+9*Ax*r))/Ft(n),Fa(Ot(n)/sN)]};function zet(){return Bf($ye).scale(177.158)}function Mye(e,t){var n=Ft(t),r=Ft(e)*n;return[n*Ot(e)/r,Ot(t)/r]}Mye.invert=fC(N_);function Vet(){return Bf(Mye).scale(144.049).clipAngle(60)}function Het(){var e=1,t=0,n=0,r=1,i=1,o=0,s,a,u=null,l,c,f,d=1,h=1,p=mO({point:function(w,E){var S=_([w,E]);this.stream.point(S[0],S[1])}}),m=BT,g,y;function v(){return d=e*r,h=e*i,g=y=null,_}function _(w){var E=w[0]*d,S=w[1]*h;if(o){var T=S*s-E*a;E=E*s+S*a,S=T}return[E+t,S+n]}return _.invert=function(w){var E=w[0]-t,S=w[1]-n;if(o){var T=S*s+E*a;E=E*s-S*a,S=T}return[E/d,S/h]},_.stream=function(w){return g&&y===w?g:g=p(m(y=w))},_.postclip=function(w){return arguments.length?(m=w,u=l=c=f=null,v()):m},_.clipExtent=function(w){return arguments.length?(m=w==null?(u=l=c=f=null,BT):gye(u=+w[0][0],l=+w[0][1],c=+w[1][0],f=+w[1][1]),v()):u==null?null:[[u,l],[c,f]]},_.scale=function(w){return arguments.length?(e=+w,v()):e},_.translate=function(w){return arguments.length?(t=+w[0],n=+w[1],v()):[t,n]},_.angle=function(w){return arguments.length?(o=w%360*cn,a=Ot(o),s=Ft(o),v()):o*yi},_.reflectX=function(w){return arguments.length?(r=w?-1:1,v()):r<0},_.reflectY=function(w){return arguments.length?(i=w?-1:1,v()):i<0},_.fitExtent=function(w,E){return gO(_,w,E)},_.fitSize=function(w,E){return rV(_,w,E)},_.fitWidth=function(w,E){return iV(_,w,E)},_.fitHeight=function(w,E){return oV(_,w,E)},_}function Lye(e,t){var n=t*t,r=n*n;return[e*(.8707-.131979*n+r*(-.013791+r*(.003971*n-.001529*r))),t*(1.007226+n*(.015085+r*(-.044475+.028874*n-.005916*r)))]}Lye.invert=function(e,t){var n=t,r=25,i;do{var o=n*n,s=o*o;n-=i=(n*(1.007226+o*(.015085+s*(-.044475+.028874*o-.005916*s)))-t)/(1.007226+o*(.015085*3+s*(-.044475*7+.028874*9*o-.005916*11*s)))}while(kn(i)>Mt&&--r>0);return[e/(.8707+(o=n*n)*(-.131979+o*(-.013791+o*o*o*(.003971-.001529*o)))),n]};function qet(){return Bf(Lye).scale(175.295)}function Fye(e,t){return[Ft(t)*Ot(e),Ot(t)]}Fye.invert=fC(Fa);function Wet(){return Bf(Fye).scale(249.5).clipAngle(90+Mt)}function jye(e,t){var n=Ft(t),r=1+Ft(e)*n;return[n*Ot(e)/r,Ot(t)/r]}jye.invert=fC(function(e){return 2*N_(e)});function Get(){return Bf(jye).scale(250).clipAngle(142)}function Bye(e,t){return[jR(eV((ui+t)/2)),-e]}Bye.invert=function(e,t){return[-t,2*N_(eye(e))-ui]};function Yet(){var e=Oye(Bye),t=e.center,n=e.rotate;return e.center=function(r){return arguments.length?t([-r[1],r[0]]):(r=t(),[r[1],-r[0]])},e.rotate=function(r){return arguments.length?n([r[0],r[1],r.length>2?r[2]+90:90]):(r=n(),[r[0],r[1],r[2]-90])},n([0,0,90]).scale(159.155)}function Ket(e,t){return e.parent===t.parent?1:2}function Xet(e){return e.reduce(Qet,0)/e.length}function Qet(e,t){return e+t.x}function Jet(e){return 1+e.reduce(Zet,0)}function Zet(e,t){return Math.max(e,t.y)}function ett(e){for(var t;t=e.children;)e=t[0];return e}function ttt(e){for(var t;t=e.children;)e=t[t.length-1];return e}function ntt(){var e=Ket,t=1,n=1,r=!1;function i(o){var s,a=0;o.eachAfter(function(d){var h=d.children;h?(d.x=Xet(h),d.y=Jet(h)):(d.x=s?a+=e(d,s):0,d.y=0,s=d)});var u=ett(o),l=ttt(o),c=u.x-e(u,l)/2,f=l.x+e(l,u)/2;return o.eachAfter(r?function(d){d.x=(d.x-o.x)*t,d.y=(o.y-d.y)*n}:function(d){d.x=(d.x-c)/(f-c)*t,d.y=(1-(o.y?d.y/o.y:1))*n})}return i.separation=function(o){return arguments.length?(e=o,i):e},i.size=function(o){return arguments.length?(r=!1,t=+o[0],n=+o[1],i):r?null:[t,n]},i.nodeSize=function(o){return arguments.length?(r=!0,t=+o[0],n=+o[1],i):r?[t,n]:null},i}function rtt(e){var t=0,n=e.children,r=n&&n.length;if(!r)t=1;else for(;--r>=0;)t+=n[r].value;e.value=t}function itt(){return this.eachAfter(rtt)}function ott(e,t){let n=-1;for(const r of this)e.call(t,r,++n,this);return this}function stt(e,t){for(var n=this,r=[n],i,o,s=-1;n=r.pop();)if(e.call(t,n,++s,this),i=n.children)for(o=i.length-1;o>=0;--o)r.push(i[o]);return this}function att(e,t){for(var n=this,r=[n],i=[],o,s,a,u=-1;n=r.pop();)if(i.push(n),o=n.children)for(s=0,a=o.length;s<a;++s)r.push(o[s]);for(;n=i.pop();)e.call(t,n,++u,this);return this}function utt(e,t){let n=-1;for(const r of this)if(e.call(t,r,++n,this))return r}function ltt(e){return this.eachAfter(function(t){for(var n=+e(t.data)||0,r=t.children,i=r&&r.length;--i>=0;)n+=r[i].value;t.value=n})}function ctt(e){return this.eachBefore(function(t){t.children&&t.children.sort(e)})}function ftt(e){for(var t=this,n=dtt(t,e),r=[t];t!==n;)t=t.parent,r.push(t);for(var i=r.length;e!==n;)r.splice(i,0,e),e=e.parent;return r}function dtt(e,t){if(e===t)return e;var n=e.ancestors(),r=t.ancestors(),i=null;for(e=n.pop(),t=r.pop();e===t;)i=e,e=n.pop(),t=r.pop();return i}function htt(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t}function ptt(){return Array.from(this)}function mtt(){var e=[];return this.eachBefore(function(t){t.children||e.push(t)}),e}function gtt(){var e=this,t=[];return e.each(function(n){n!==e&&t.push({source:n.parent,target:n})}),t}function*ytt(){var e=this,t,n=[e],r,i,o;do for(t=n.reverse(),n=[];e=t.pop();)if(yield e,r=e.children)for(i=0,o=r.length;i<o;++i)n.push(r[i]);while(n.length)}function vO(e,t){e instanceof Map?(e=[void 0,e],t===void 0&&(t=_tt)):t===void 0&&(t=btt);for(var n=new bb(e),r,i=[n],o,s,a,u;r=i.pop();)if((s=t(r.data))&&(u=(s=Array.from(s)).length))for(r.children=s,a=u-1;a>=0;--a)i.push(o=s[a]=new bb(s[a])),o.parent=r,o.depth=r.depth+1;return n.eachBefore(Uye)}function vtt(){return vO(this).eachBefore(wtt)}function btt(e){return e.children}function _tt(e){return Array.isArray(e)?e[1]:null}function wtt(e){e.data.value!==void 0&&(e.value=e.data.value),e.data=e.data.data}function Uye(e){var t=0;do e.height=t;while((e=e.parent)&&e.height<++t)}function bb(e){this.data=e,this.depth=this.height=0,this.parent=null}bb.prototype=vO.prototype={constructor:bb,count:itt,each:ott,eachAfter:att,eachBefore:stt,find:utt,sum:ltt,sort:ctt,path:ftt,ancestors:htt,descendants:ptt,leaves:mtt,links:gtt,copy:vtt,[Symbol.iterator]:ytt};function Vk(e){return e==null?null:zye(e)}function zye(e){if(typeof e!="function")throw new Error;return e}function Ug(){return 0}function jv(e){return function(){return e}}const Ett=1664525,xtt=1013904223,Wte=4294967296;function Ttt(){let e=1;return()=>(e=(Ett*e+xtt)%Wte)/Wte}function Stt(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Ctt(e,t){let n=e.length,r,i;for(;n;)i=t()*n--|0,r=e[n],e[n]=e[i],e[i]=r;return e}function Att(e,t){for(var n=0,r=(e=Ctt(Array.from(e),t)).length,i=[],o,s;n<r;)o=e[n],s&&Vye(s,o)?++n:(s=Itt(i=ktt(i,o)),n=0);return s}function ktt(e,t){var n,r;if(KL(t,e))return[t];for(n=0;n<e.length;++n)if(x2(t,e[n])&&KL(PE(e[n],t),e))return[e[n],t];for(n=0;n<e.length-1;++n)for(r=n+1;r<e.length;++r)if(x2(PE(e[n],e[r]),t)&&x2(PE(e[n],t),e[r])&&x2(PE(e[r],t),e[n])&&KL(Hye(e[n],e[r],t),e))return[e[n],e[r],t];throw new Error}function x2(e,t){var n=e.r-t.r,r=t.x-e.x,i=t.y-e.y;return n<0||n*n<r*r+i*i}function Vye(e,t){var n=e.r-t.r+Math.max(e.r,t.r,1)*1e-9,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function KL(e,t){for(var n=0;n<t.length;++n)if(!Vye(e,t[n]))return!1;return!0}function Itt(e){switch(e.length){case 1:return Rtt(e[0]);case 2:return PE(e[0],e[1]);case 3:return Hye(e[0],e[1],e[2])}}function Rtt(e){return{x:e.x,y:e.y,r:e.r}}function PE(e,t){var n=e.x,r=e.y,i=e.r,o=t.x,s=t.y,a=t.r,u=o-n,l=s-r,c=a-i,f=Math.sqrt(u*u+l*l);return{x:(n+o+u/f*c)/2,y:(r+s+l/f*c)/2,r:(f+i+a)/2}}function Hye(e,t,n){var r=e.x,i=e.y,o=e.r,s=t.x,a=t.y,u=t.r,l=n.x,c=n.y,f=n.r,d=r-s,h=r-l,p=i-a,m=i-c,g=u-o,y=f-o,v=r*r+i*i-o*o,_=v-s*s-a*a+u*u,w=v-l*l-c*c+f*f,E=h*p-d*m,S=(p*w-m*_)/(E*2)-r,T=(m*g-p*y)/E,C=(h*_-d*w)/(E*2)-i,A=(d*y-h*g)/E,R=T*T+A*A-1,N=2*(o+S*T+C*A),O=S*S+C*C-o*o,D=-(Math.abs(R)>1e-6?(N+Math.sqrt(N*N-4*R*O))/(2*R):O/N);return{x:r+S+T*D,y:i+C+A*D,r:D}}function Gte(e,t,n){var r=e.x-t.x,i,o,s=e.y-t.y,a,u,l=r*r+s*s;l?(o=t.r+n.r,o*=o,u=e.r+n.r,u*=u,o>u?(i=(l+u-o)/(2*l),a=Math.sqrt(Math.max(0,u/l-i*i)),n.x=e.x-i*r-a*s,n.y=e.y-i*s+a*r):(i=(l+o-u)/(2*l),a=Math.sqrt(Math.max(0,o/l-i*i)),n.x=t.x+i*r-a*s,n.y=t.y+i*s+a*r)):(n.x=t.x+n.r,n.y=t.y)}function Yte(e,t){var n=e.r+t.r-1e-6,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function Kte(e){var t=e._,n=e.next._,r=t.r+n.r,i=(t.x*n.r+n.x*t.r)/r,o=(t.y*n.r+n.y*t.r)/r;return i*i+o*o}function T2(e){this._=e,this.next=null,this.previous=null}function Ntt(e,t){if(!(o=(e=Stt(e)).length))return 0;var n,r,i,o,s,a,u,l,c,f,d;if(n=e[0],n.x=0,n.y=0,!(o>1))return n.r;if(r=e[1],n.x=-r.r,r.x=n.r,r.y=0,!(o>2))return n.r+r.r;Gte(r,n,i=e[2]),n=new T2(n),r=new T2(r),i=new T2(i),n.next=i.previous=r,r.next=n.previous=i,i.next=r.previous=n;e:for(u=3;u<o;++u){Gte(n._,r._,i=e[u]),i=new T2(i),l=r.next,c=n.previous,f=r._.r,d=n._.r;do if(f<=d){if(Yte(l._,i._)){r=l,n.next=r,r.previous=n,--u;continue e}f+=l._.r,l=l.next}else{if(Yte(c._,i._)){n=c,n.next=r,r.previous=n,--u;continue e}d+=c._.r,c=c.previous}while(l!==c.next);for(i.previous=n,i.next=r,n.next=r.previous=r=i,s=Kte(n);(i=i.next)!==r;)(a=Kte(i))<s&&(n=i,s=a);r=n.next}for(n=[r._],i=r;(i=i.next)!==r;)n.push(i._);for(i=Att(n,t),u=0;u<o;++u)n=e[u],n.x-=i.x,n.y-=i.y;return i.r}function Ptt(e){return Math.sqrt(e.value)}function qye(){var e=null,t=1,n=1,r=Ug;function i(o){const s=Ttt();return o.x=t/2,o.y=n/2,e?o.eachBefore(Xte(e)).eachAfter(XL(r,.5,s)).eachBefore(Qte(1)):o.eachBefore(Xte(Ptt)).eachAfter(XL(Ug,1,s)).eachAfter(XL(r,o.r/Math.min(t,n),s)).eachBefore(Qte(Math.min(t,n)/(2*o.r))),o}return i.radius=function(o){return arguments.length?(e=Vk(o),i):e},i.size=function(o){return arguments.length?(t=+o[0],n=+o[1],i):[t,n]},i.padding=function(o){return arguments.length?(r=typeof o=="function"?o:jv(+o),i):r},i}function Xte(e){return function(t){t.children||(t.r=Math.max(0,+e(t)||0))}}function XL(e,t,n){return function(r){if(i=r.children){var i,o,s=i.length,a=e(r)*t||0,u;if(a)for(o=0;o<s;++o)i[o].r+=a;if(u=Ntt(i,n),a)for(o=0;o<s;++o)i[o].r-=a;r.r=u+a}}}function Qte(e){return function(t){var n=t.parent;t.r*=e,n&&(t.x=n.x+e*t.x,t.y=n.y+e*t.y)}}function Wye(e){e.x0=Math.round(e.x0),e.y0=Math.round(e.y0),e.x1=Math.round(e.x1),e.y1=Math.round(e.y1)}function dC(e,t,n,r,i){for(var o=e.children,s,a=-1,u=o.length,l=e.value&&(r-t)/e.value;++a<u;)s=o[a],s.y0=n,s.y1=i,s.x0=t,s.x1=t+=s.value*l}function Dtt(){var e=1,t=1,n=0,r=!1;function i(s){var a=s.height+1;return s.x0=s.y0=n,s.x1=e,s.y1=t/a,s.eachBefore(o(t,a)),r&&s.eachBefore(Wye),s}function o(s,a){return function(u){u.children&&dC(u,u.x0,s*(u.depth+1)/a,u.x1,s*(u.depth+2)/a);var l=u.x0,c=u.y0,f=u.x1-n,d=u.y1-n;f<l&&(l=f=(l+f)/2),d<c&&(c=d=(c+d)/2),u.x0=l,u.y0=c,u.x1=f,u.y1=d}}return i.round=function(s){return arguments.length?(r=!!s,i):r},i.size=function(s){return arguments.length?(e=+s[0],t=+s[1],i):[e,t]},i.padding=function(s){return arguments.length?(n=+s,i):n},i}var Ott={depth:-1},Jte={},QL={};function $tt(e){return e.id}function Mtt(e){return e.parentId}function Zte(){var e=$tt,t=Mtt,n;function r(i){var o=Array.from(i),s=e,a=t,u,l,c,f,d,h,p,m,g=new Map;if(n!=null){const y=o.map((w,E)=>Ltt(n(w,E,i))),v=y.map(ene),_=new Set(y).add("");for(const w of v)_.has(w)||(_.add(w),y.push(w),v.push(ene(w)),o.push(QL));s=(w,E)=>y[E],a=(w,E)=>v[E]}for(c=0,u=o.length;c<u;++c)l=o[c],h=o[c]=new bb(l),(p=s(l,c,i))!=null&&(p+="")&&(m=h.id=p,g.set(m,g.has(m)?Jte:h)),(p=a(l,c,i))!=null&&(p+="")&&(h.parent=p);for(c=0;c<u;++c)if(h=o[c],p=h.parent){if(d=g.get(p),!d)throw new Error("missing: "+p);if(d===Jte)throw new Error("ambiguous: "+p);d.children?d.children.push(h):d.children=[h],h.parent=d}else{if(f)throw new Error("multiple roots");f=h}if(!f)throw new Error("no root");if(n!=null){for(;f.data===QL&&f.children.length===1;)f=f.children[0],--u;for(let y=o.length-1;y>=0&&(h=o[y],h.data===QL);--y)h.data=null}if(f.parent=Ott,f.eachBefore(function(y){y.depth=y.parent.depth+1,--u}).eachBefore(Uye),f.parent=null,u>0)throw new Error("cycle");return f}return r.id=function(i){return arguments.length?(e=Vk(i),r):e},r.parentId=function(i){return arguments.length?(t=Vk(i),r):t},r.path=function(i){return arguments.length?(n=Vk(i),r):n},r}function Ltt(e){e=`${e}`;let t=e.length;return yj(e,t-1)&&!yj(e,t-2)&&(e=e.slice(0,-1)),e[0]==="/"?e:`/${e}`}function ene(e){let t=e.length;if(t<2)return"";for(;--t>1&&!yj(e,t););return e.slice(0,t)}function yj(e,t){if(e[t]==="/"){let n=0;for(;t>0&&e[--t]==="\\";)++n;if(!(n&1))return!0}return!1}function Ftt(e,t){return e.parent===t.parent?1:2}function JL(e){var t=e.children;return t?t[0]:e.t}function ZL(e){var t=e.children;return t?t[t.length-1]:e.t}function jtt(e,t,n){var r=n/(t.i-e.i);t.c-=r,t.s+=n,e.c+=r,t.z+=n,t.m+=n}function Btt(e){for(var t=0,n=0,r=e.children,i=r.length,o;--i>=0;)o=r[i],o.z+=t,o.m+=t,t+=o.s+(n+=o.c)}function Utt(e,t,n){return e.a.parent===t.parent?e.a:n}function Hk(e,t){this._=e,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=t}Hk.prototype=Object.create(bb.prototype);function ztt(e){for(var t=new Hk(e,0),n,r=[t],i,o,s,a;n=r.pop();)if(o=n._.children)for(n.children=new Array(a=o.length),s=a-1;s>=0;--s)r.push(i=n.children[s]=new Hk(o[s],s)),i.parent=n;return(t.parent=new Hk(null,0)).children=[t],t}function Vtt(){var e=Ftt,t=1,n=1,r=null;function i(l){var c=ztt(l);if(c.eachAfter(o),c.parent.m=-c.z,c.eachBefore(s),r)l.eachBefore(u);else{var f=l,d=l,h=l;l.eachBefore(function(v){v.x<f.x&&(f=v),v.x>d.x&&(d=v),v.depth>h.depth&&(h=v)});var p=f===d?1:e(f,d)/2,m=p-f.x,g=t/(d.x+p+m),y=n/(h.depth||1);l.eachBefore(function(v){v.x=(v.x+m)*g,v.y=v.depth*y})}return l}function o(l){var c=l.children,f=l.parent.children,d=l.i?f[l.i-1]:null;if(c){Btt(l);var h=(c[0].z+c[c.length-1].z)/2;d?(l.z=d.z+e(l._,d._),l.m=l.z-h):l.z=h}else d&&(l.z=d.z+e(l._,d._));l.parent.A=a(l,d,l.parent.A||f[0])}function s(l){l._.x=l.z+l.parent.m,l.m+=l.parent.m}function a(l,c,f){if(c){for(var d=l,h=l,p=c,m=d.parent.children[0],g=d.m,y=h.m,v=p.m,_=m.m,w;p=ZL(p),d=JL(d),p&&d;)m=JL(m),h=ZL(h),h.a=l,w=p.z+v-d.z-g+e(p._,d._),w>0&&(jtt(Utt(p,l,f),l,w),g+=w,y+=w),v+=p.m,g+=d.m,_+=m.m,y+=h.m;p&&!ZL(h)&&(h.t=p,h.m+=v-y),d&&!JL(m)&&(m.t=d,m.m+=g-_,f=l)}return f}function u(l){l.x*=t,l.y=l.depth*n}return i.separation=function(l){return arguments.length?(e=l,i):e},i.size=function(l){return arguments.length?(r=!1,t=+l[0],n=+l[1],i):r?null:[t,n]},i.nodeSize=function(l){return arguments.length?(r=!0,t=+l[0],n=+l[1],i):r?[t,n]:null},i}function bO(e,t,n,r,i){for(var o=e.children,s,a=-1,u=o.length,l=e.value&&(i-n)/e.value;++a<u;)s=o[a],s.x0=t,s.x1=r,s.y0=n,s.y1=n+=s.value*l}var Gye=(1+Math.sqrt(5))/2;function Yye(e,t,n,r,i,o){for(var s=[],a=t.children,u,l,c=0,f=0,d=a.length,h,p,m=t.value,g,y,v,_,w,E,S;c<d;){h=i-n,p=o-r;do g=a[f++].value;while(!g&&f<d);for(y=v=g,E=Math.max(p/h,h/p)/(m*e),S=g*g*E,w=Math.max(v/S,S/y);f<d;++f){if(g+=l=a[f].value,l<y&&(y=l),l>v&&(v=l),S=g*g*E,_=Math.max(v/S,S/y),_>w){g-=l;break}w=_}s.push(u={value:g,dice:h<p,children:a.slice(c,f)}),u.dice?dC(u,n,r,i,m?r+=p*g/m:o):bO(u,n,r,m?n+=h*g/m:i,o),m-=g,c=f}return s}const Kye=function e(t){function n(r,i,o,s,a){Yye(t,r,i,o,s,a)}return n.ratio=function(r){return e((r=+r)>1?r:1)},n}(Gye);function Htt(){var e=Kye,t=!1,n=1,r=1,i=[0],o=Ug,s=Ug,a=Ug,u=Ug,l=Ug;function c(d){return d.x0=d.y0=0,d.x1=n,d.y1=r,d.eachBefore(f),i=[0],t&&d.eachBefore(Wye),d}function f(d){var h=i[d.depth],p=d.x0+h,m=d.y0+h,g=d.x1-h,y=d.y1-h;g<p&&(p=g=(p+g)/2),y<m&&(m=y=(m+y)/2),d.x0=p,d.y0=m,d.x1=g,d.y1=y,d.children&&(h=i[d.depth+1]=o(d)/2,p+=l(d)-h,m+=s(d)-h,g-=a(d)-h,y-=u(d)-h,g<p&&(p=g=(p+g)/2),y<m&&(m=y=(m+y)/2),e(d,p,m,g,y))}return c.round=function(d){return arguments.length?(t=!!d,c):t},c.size=function(d){return arguments.length?(n=+d[0],r=+d[1],c):[n,r]},c.tile=function(d){return arguments.length?(e=zye(d),c):e},c.padding=function(d){return arguments.length?c.paddingInner(d).paddingOuter(d):c.paddingInner()},c.paddingInner=function(d){return arguments.length?(o=typeof d=="function"?d:jv(+d),c):o},c.paddingOuter=function(d){return arguments.length?c.paddingTop(d).paddingRight(d).paddingBottom(d).paddingLeft(d):c.paddingTop()},c.paddingTop=function(d){return arguments.length?(s=typeof d=="function"?d:jv(+d),c):s},c.paddingRight=function(d){return arguments.length?(a=typeof d=="function"?d:jv(+d),c):a},c.paddingBottom=function(d){return arguments.length?(u=typeof d=="function"?d:jv(+d),c):u},c.paddingLeft=function(d){return arguments.length?(l=typeof d=="function"?d:jv(+d),c):l},c}function qtt(e,t,n,r,i){var o=e.children,s,a=o.length,u,l=new Array(a+1);for(l[0]=u=s=0;s<a;++s)l[s+1]=u+=o[s].value;c(0,a,e.value,t,n,r,i);function c(f,d,h,p,m,g,y){if(f>=d-1){var v=o[f];v.x0=p,v.y0=m,v.x1=g,v.y1=y;return}for(var _=l[f],w=h/2+_,E=f+1,S=d-1;E<S;){var T=E+S>>>1;l[T]<w?E=T+1:S=T}w-l[E-1]<l[E]-w&&f+1<E&&--E;var C=l[E]-_,A=h-C;if(g-p>y-m){var R=h?(p*A+g*C)/h:g;c(f,E,C,p,m,R,y),c(E,d,A,R,m,g,y)}else{var N=h?(m*A+y*C)/h:y;c(f,E,C,p,m,g,N),c(E,d,A,p,N,g,y)}}}function Wtt(e,t,n,r,i){(e.depth&1?bO:dC)(e,t,n,r,i)}const Gtt=function e(t){function n(r,i,o,s,a){if((u=r._squarify)&&u.ratio===t)for(var u,l,c,f,d=-1,h,p=u.length,m=r.value;++d<p;){for(l=u[d],c=l.children,f=l.value=0,h=c.length;f<h;++f)l.value+=c[f].value;l.dice?dC(l,i,o,s,m?o+=(a-o)*l.value/m:a):bO(l,i,o,m?i+=(s-i)*l.value/m:s,a),m-=l.value}else r._squarify=u=Yye(t,r,i,o,s,a),u.ratio=t}return n.ratio=function(r){return e((r=+r)>1?r:1)},n}(Gye);function yc(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function Hm(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const vj=Symbol("implicit");function hC(){var e=new M5,t=[],n=[],r=vj;function i(o){let s=e.get(o);if(s===void 0){if(r!==vj)return r;e.set(o,s=t.push(o)-1)}return n[s%n.length]}return i.domain=function(o){if(!arguments.length)return t.slice();t=[],e=new M5;for(const s of o)e.has(s)||e.set(s,t.push(s)-1);return i},i.range=function(o){return arguments.length?(n=Array.from(o),i):n.slice()},i.unknown=function(o){return arguments.length?(r=o,i):r},i.copy=function(){return hC(t,n).unknown(r)},yc.apply(i,arguments),i}function pC(){var e=hC().unknown(void 0),t=e.domain,n=e.range,r=0,i=1,o,s,a=!1,u=0,l=0,c=.5;delete e.unknown;function f(){var d=t().length,h=i<r,p=h?i:r,m=h?r:i;o=(m-p)/Math.max(1,d-u+l*2),a&&(o=Math.floor(o)),p+=(m-p-o*(d-u))*c,s=o*(1-u),a&&(p=Math.round(p),s=Math.round(s));var g=Ea(d).map(function(y){return p+o*y});return n(h?g.reverse():g)}return e.domain=function(d){return arguments.length?(t(d),f()):t()},e.range=function(d){return arguments.length?([r,i]=d,r=+r,i=+i,f()):[r,i]},e.rangeRound=function(d){return[r,i]=d,r=+r,i=+i,a=!0,f()},e.bandwidth=function(){return s},e.step=function(){return o},e.round=function(d){return arguments.length?(a=!!d,f()):a},e.padding=function(d){return arguments.length?(u=Math.min(1,l=+d),f()):u},e.paddingInner=function(d){return arguments.length?(u=Math.min(1,d),f()):u},e.paddingOuter=function(d){return arguments.length?(l=+d,f()):l},e.align=function(d){return arguments.length?(c=Math.max(0,Math.min(1,d)),f()):c},e.copy=function(){return pC(t(),[r,i]).round(a).paddingInner(u).paddingOuter(l).align(c)},yc.apply(f(),arguments)}function Ytt(e){return function(){return e}}function bj(e){return+e}var tne=[0,1];function xa(e){return e}function _j(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:Ytt(isNaN(t)?NaN:.5)}function Ktt(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function Xtt(e,t,n){var r=e[0],i=e[1],o=t[0],s=t[1];return i<r?(r=_j(i,r),o=n(s,o)):(r=_j(r,i),o=n(o,s)),function(a){return o(r(a))}}function Qtt(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),o=new Array(r),s=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++s<r;)i[s]=_j(e[s],e[s+1]),o[s]=n(t[s],t[s+1]);return function(a){var u=sm(e,a,1,r)-1;return o[u](i[u](a))}}function mC(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function _O(){var e=tne,t=tne,n=Vm,r,i,o,s=xa,a,u,l;function c(){var d=Math.min(e.length,t.length);return s!==xa&&(s=Ktt(e[0],e[d-1])),a=d>2?Qtt:Xtt,u=l=null,f}function f(d){return d==null||isNaN(d=+d)?o:(u||(u=a(e.map(r),t,n)))(r(s(d)))}return f.invert=function(d){return s(i((l||(l=a(t,e.map(r),Hu)))(d)))},f.domain=function(d){return arguments.length?(e=Array.from(d,bj),c()):e.slice()},f.range=function(d){return arguments.length?(t=Array.from(d),c()):t.slice()},f.rangeRound=function(d){return t=Array.from(d),n=uC,c()},f.clamp=function(d){return arguments.length?(s=d?!0:xa,c()):s!==xa},f.interpolate=function(d){return arguments.length?(n=d,c()):n},f.unknown=function(d){return arguments.length?(o=d,f):o},function(d,h){return r=d,i=h,c()}}function Xye(){return _O()(xa,xa)}function Qye(e,t,n,r){var i=am(e,t,n),o;switch(r=M0(r??",f"),r.type){case"s":{var s=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(o=J0e(i,s))&&(r.precision=o),Zz(r,s)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(o=Z0e(i,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=o-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(o=Q0e(i))&&(r.precision=o-(r.type==="%")*2);break}}return R_(r)}function Oy(e){var t=e.domain;return e.ticks=function(n){var r=t();return F5(r[0],r[r.length-1],n??10)},e.tickFormat=function(n,r){var i=t();return Qye(i[0],i[i.length-1],n??10,r)},e.nice=function(n){n==null&&(n=10);var r=t(),i=0,o=r.length-1,s=r[i],a=r[o],u,l,c=10;for(a<s&&(l=s,s=a,a=l,l=i,i=o,o=l);c-- >0;){if(l=j5(s,a,n),l===u)return r[i]=s,r[o]=a,t(r);if(l>0)s=Math.floor(s/l)*l,a=Math.ceil(a/l)*l;else if(l<0)s=Math.ceil(s*l)/l,a=Math.floor(a*l)/l;else break;u=l}return e},e}function qm(){var e=Xye();return e.copy=function(){return mC(e,qm())},yc.apply(e,arguments),Oy(e)}function Jye(e){var t;function n(r){return r==null||isNaN(r=+r)?t:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(e=Array.from(r,bj),n):e.slice()},n.unknown=function(r){return arguments.length?(t=r,n):t},n.copy=function(){return Jye(e).unknown(t)},e=arguments.length?Array.from(e,bj):[0,1],Oy(n)}function Zye(e,t){e=e.slice();var n=0,r=e.length-1,i=e[n],o=e[r],s;return o<i&&(s=n,n=r,r=s,s=i,i=o,o=s),e[n]=t.floor(i),e[r]=t.ceil(o),e}function nne(e){return Math.log(e)}function rne(e){return Math.exp(e)}function Jtt(e){return-Math.log(-e)}function Ztt(e){return-Math.exp(-e)}function ent(e){return isFinite(e)?+("1e"+e):e<0?0:e}function tnt(e){return e===10?ent:e===Math.E?Math.exp:t=>Math.pow(e,t)}function nnt(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function ine(e){return(t,n)=>-e(-t,n)}function aV(e){const t=e(nne,rne),n=t.domain;let r=10,i,o;function s(){return i=nnt(r),o=tnt(r),n()[0]<0?(i=ine(i),o=ine(o),e(Jtt,Ztt)):e(nne,rne),t}return t.base=function(a){return arguments.length?(r=+a,s()):r},t.domain=function(a){return arguments.length?(n(a),s()):n()},t.ticks=a=>{const u=n();let l=u[0],c=u[u.length-1];const f=c<l;f&&([l,c]=[c,l]);let d=i(l),h=i(c),p,m;const g=a==null?10:+a;let y=[];if(!(r%1)&&h-d<g){if(d=Math.floor(d),h=Math.ceil(h),l>0){for(;d<=h;++d)for(p=1;p<r;++p)if(m=d<0?p/o(-d):p*o(d),!(m<l)){if(m>c)break;y.push(m)}}else for(;d<=h;++d)for(p=r-1;p>=1;--p)if(m=d>0?p/o(-d):p*o(d),!(m<l)){if(m>c)break;y.push(m)}y.length*2<g&&(y=F5(l,c,g))}else y=F5(d,h,Math.min(h-d,g)).map(o);return f?y.reverse():y},t.tickFormat=(a,u)=>{if(a==null&&(a=10),u==null&&(u=r===10?"s":","),typeof u!="function"&&(!(r%1)&&(u=M0(u)).precision==null&&(u.trim=!0),u=R_(u)),a===1/0)return u;const l=Math.max(1,r*a/t.ticks().length);return c=>{let f=c/o(Math.round(i(c)));return f*r<r-.5&&(f*=r),f<=l?u(c):""}},t.nice=()=>n(Zye(n(),{floor:a=>o(Math.floor(i(a))),ceil:a=>o(Math.ceil(i(a)))})),t}function eve(){const e=aV(_O()).domain([1,10]);return e.copy=()=>mC(e,eve()).base(e.base()),yc.apply(e,arguments),e}function one(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function sne(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function uV(e){var t=1,n=e(one(t),sne(t));return n.constant=function(r){return arguments.length?e(one(t=+r),sne(t)):t},Oy(n)}function tve(){var e=uV(_O());return e.copy=function(){return mC(e,tve()).constant(e.constant())},yc.apply(e,arguments)}function ane(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function rnt(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function int(e){return e<0?-e*e:e*e}function lV(e){var t=e(xa,xa),n=1;function r(){return n===1?e(xa,xa):n===.5?e(rnt,int):e(ane(n),ane(1/n))}return t.exponent=function(i){return arguments.length?(n=+i,r()):n},Oy(t)}function cV(){var e=lV(_O());return e.copy=function(){return mC(e,cV()).exponent(e.exponent())},yc.apply(e,arguments),e}function ont(){return cV.apply(null,arguments).exponent(.5)}function nve(){var e=[],t=[],n=[],r;function i(){var s=0,a=Math.max(1,t.length);for(n=new Array(a-1);++s<a;)n[s-1]=Gge(e,s/a);return o}function o(s){return s==null||isNaN(s=+s)?r:t[sm(n,s)]}return o.invertExtent=function(s){var a=t.indexOf(s);return a<0?[NaN,NaN]:[a>0?n[a-1]:e[0],a<n.length?n[a]:e[e.length-1]]},o.domain=function(s){if(!arguments.length)return e.slice();e=[];for(let a of s)a!=null&&!isNaN(a=+a)&&e.push(a);return e.sort(Md),i()},o.range=function(s){return arguments.length?(t=Array.from(s),i()):t.slice()},o.unknown=function(s){return arguments.length?(r=s,o):r},o.quantiles=function(){return n.slice()},o.copy=function(){return nve().domain(e).range(t).unknown(r)},yc.apply(o,arguments)}function rve(){var e=0,t=1,n=1,r=[.5],i=[0,1],o;function s(u){return u!=null&&u<=u?i[sm(r,u,0,n)]:o}function a(){var u=-1;for(r=new Array(n);++u<n;)r[u]=((u+1)*t-(u-n)*e)/(n+1);return s}return s.domain=function(u){return arguments.length?([e,t]=u,e=+e,t=+t,a()):[e,t]},s.range=function(u){return arguments.length?(n=(i=Array.from(u)).length-1,a()):i.slice()},s.invertExtent=function(u){var l=i.indexOf(u);return l<0?[NaN,NaN]:l<1?[e,r[0]]:l>=n?[r[n-1],t]:[r[l-1],r[l]]},s.unknown=function(u){return arguments.length&&(o=u),s},s.thresholds=function(){return r.slice()},s.copy=function(){return rve().domain([e,t]).range(i).unknown(o)},yc.apply(Oy(s),arguments)}function ive(){var e=[.5],t=[0,1],n,r=1;function i(o){return o!=null&&o<=o?t[sm(e,o,0,r)]:n}return i.domain=function(o){return arguments.length?(e=Array.from(o),r=Math.min(e.length,t.length-1),i):e.slice()},i.range=function(o){return arguments.length?(t=Array.from(o),r=Math.min(e.length,t.length-1),i):t.slice()},i.invertExtent=function(o){var s=t.indexOf(o);return[e[s-1],e[s]]},i.unknown=function(o){return arguments.length?(n=o,i):n},i.copy=function(){return ive().domain(e).range(t).unknown(n)},yc.apply(i,arguments)}const e6=new Date,t6=new Date;function Ki(e,t,n,r){function i(o){return e(o=arguments.length===0?new Date:new Date(+o)),o}return i.floor=o=>(e(o=new Date(+o)),o),i.ceil=o=>(e(o=new Date(o-1)),t(o,1),e(o),o),i.round=o=>{const s=i(o),a=i.ceil(o);return o-s<a-o?s:a},i.offset=(o,s)=>(t(o=new Date(+o),s==null?1:Math.floor(s)),o),i.range=(o,s,a)=>{const u=[];if(o=i.ceil(o),a=a==null?1:Math.floor(a),!(o<s)||!(a>0))return u;let l;do u.push(l=new Date(+o)),t(o,a),e(o);while(l<o&&o<s);return u},i.filter=o=>Ki(s=>{if(s>=s)for(;e(s),!o(s);)s.setTime(s-1)},(s,a)=>{if(s>=s)if(a<0)for(;++a<=0;)for(;t(s,-1),!o(s););else for(;--a>=0;)for(;t(s,1),!o(s););}),n&&(i.count=(o,s)=>(e6.setTime(+o),t6.setTime(+s),e(e6),e(t6),Math.floor(n(e6,t6))),i.every=o=>(o=Math.floor(o),!isFinite(o)||!(o>0)?null:o>1?i.filter(r?s=>r(s)%o===0:s=>i.count(0,s)%o===0):i)),i}const _b=Ki(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);_b.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?Ki(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):_b);_b.range;const Cd=1e3,Qu=Cd*60,Ad=Qu*60,sh=Ad*24,fV=sh*7,une=sh*30,n6=sh*365,kd=Ki(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Cd)},(e,t)=>(t-e)/Cd,e=>e.getUTCSeconds());kd.range;const wO=Ki(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Cd)},(e,t)=>{e.setTime(+e+t*Qu)},(e,t)=>(t-e)/Qu,e=>e.getMinutes());wO.range;const EO=Ki(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Qu)},(e,t)=>(t-e)/Qu,e=>e.getUTCMinutes());EO.range;const xO=Ki(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Cd-e.getMinutes()*Qu)},(e,t)=>{e.setTime(+e+t*Ad)},(e,t)=>(t-e)/Ad,e=>e.getHours());xO.range;const TO=Ki(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*Ad)},(e,t)=>(t-e)/Ad,e=>e.getUTCHours());TO.range;const jd=Ki(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Qu)/sh,e=>e.getDate()-1);jd.range;const jp=Ki(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/sh,e=>e.getUTCDate()-1);jp.range;const ove=Ki(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/sh,e=>Math.floor(e/sh));ove.range;function $y(e){return Ki(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*Qu)/fV)}const P_=$y(0),aN=$y(1),snt=$y(2),ant=$y(3),wb=$y(4),unt=$y(5),lnt=$y(6);P_.range;aN.range;snt.range;ant.range;wb.range;unt.range;lnt.range;function My(e){return Ki(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/fV)}const D_=My(0),uN=My(1),cnt=My(2),fnt=My(3),Eb=My(4),dnt=My(5),hnt=My(6);D_.range;uN.range;cnt.range;fnt.range;Eb.range;dnt.range;hnt.range;const VT=Ki(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());VT.range;const HT=Ki(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());HT.range;const _f=Ki(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());_f.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Ki(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});_f.range;const wf=Ki(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());wf.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Ki(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});wf.range;function sve(e,t,n,r,i,o){const s=[[kd,1,Cd],[kd,5,5*Cd],[kd,15,15*Cd],[kd,30,30*Cd],[o,1,Qu],[o,5,5*Qu],[o,15,15*Qu],[o,30,30*Qu],[i,1,Ad],[i,3,3*Ad],[i,6,6*Ad],[i,12,12*Ad],[r,1,sh],[r,2,2*sh],[n,1,fV],[t,1,une],[t,3,3*une],[e,1,n6]];function a(l,c,f){const d=c<l;d&&([l,c]=[c,l]);const h=f&&typeof f.range=="function"?f:u(l,c,f),p=h?h.range(l,+c+1):[];return d?p.reverse():p}function u(l,c,f){const d=Math.abs(c-l)/f,h=k_(([,,g])=>g).right(s,d);if(h===s.length)return e.every(am(l/n6,c/n6,f));if(h===0)return _b.every(Math.max(am(l,c,f),1));const[p,m]=s[d/s[h-1][2]<s[h][2]/d?h-1:h];return p.every(m)}return[a,u]}const[pnt,mnt]=sve(wf,HT,D_,ove,TO,EO),[gnt,ynt]=sve(_f,VT,P_,jd,xO,wO);function r6(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function i6(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Fw(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function ave(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,o=e.days,s=e.shortDays,a=e.months,u=e.shortMonths,l=jw(i),c=Bw(i),f=jw(o),d=Bw(o),h=jw(s),p=Bw(s),m=jw(a),g=Bw(a),y=jw(u),v=Bw(u),_={a:B,A:U,b:H,B:P,c:null,d:pne,e:pne,f:Bnt,g:Xnt,G:Jnt,H:Lnt,I:Fnt,j:jnt,L:uve,m:Unt,M:znt,p:z,q:W,Q:yne,s:vne,S:Vnt,u:Hnt,U:qnt,V:Wnt,w:Gnt,W:Ynt,x:null,X:null,y:Knt,Y:Qnt,Z:Znt,"%":gne},w={a:j,A:q,b:G,B:te,c:null,d:mne,e:mne,f:rrt,g:hrt,G:mrt,H:ert,I:trt,j:nrt,L:cve,m:irt,M:ort,p:pe,q:be,Q:yne,s:vne,S:srt,u:art,U:urt,V:lrt,w:crt,W:frt,x:null,X:null,y:drt,Y:prt,Z:grt,"%":gne},E={a:R,A:N,b:O,B:D,c:M,d:dne,e:dne,f:Dnt,g:fne,G:cne,H:hne,I:hne,j:Int,L:Pnt,m:knt,M:Rnt,p:A,q:Ant,Q:$nt,s:Mnt,S:Nnt,u:Ent,U:xnt,V:Tnt,w:wnt,W:Snt,x:F,X:L,y:fne,Y:cne,Z:Cnt,"%":Ont};_.x=S(n,_),_.X=S(r,_),_.c=S(t,_),w.x=S(n,w),w.X=S(r,w),w.c=S(t,w);function S(le,me){return function(Se){var ge=[],tt=-1,Ue=0,mt=le.length,it,Re,$e;for(Se instanceof Date||(Se=new Date(+Se));++tt<mt;)le.charCodeAt(tt)===37&&(ge.push(le.slice(Ue,tt)),(Re=lne[it=le.charAt(++tt)])!=null?it=le.charAt(++tt):Re=it==="e"?" ":"0",($e=me[it])&&(it=$e(Se,Re)),ge.push(it),Ue=tt+1);return ge.push(le.slice(Ue,tt)),ge.join("")}}function T(le,me){return function(Se){var ge=Fw(1900,void 0,1),tt=C(ge,le,Se+="",0),Ue,mt;if(tt!=Se.length)return null;if("Q"in ge)return new Date(ge.Q);if("s"in ge)return new Date(ge.s*1e3+("L"in ge?ge.L:0));if(me&&!("Z"in ge)&&(ge.Z=0),"p"in ge&&(ge.H=ge.H%12+ge.p*12),ge.m===void 0&&(ge.m="q"in ge?ge.q:0),"V"in ge){if(ge.V<1||ge.V>53)return null;"w"in ge||(ge.w=1),"Z"in ge?(Ue=i6(Fw(ge.y,0,1)),mt=Ue.getUTCDay(),Ue=mt>4||mt===0?uN.ceil(Ue):uN(Ue),Ue=jp.offset(Ue,(ge.V-1)*7),ge.y=Ue.getUTCFullYear(),ge.m=Ue.getUTCMonth(),ge.d=Ue.getUTCDate()+(ge.w+6)%7):(Ue=r6(Fw(ge.y,0,1)),mt=Ue.getDay(),Ue=mt>4||mt===0?aN.ceil(Ue):aN(Ue),Ue=jd.offset(Ue,(ge.V-1)*7),ge.y=Ue.getFullYear(),ge.m=Ue.getMonth(),ge.d=Ue.getDate()+(ge.w+6)%7)}else("W"in ge||"U"in ge)&&("w"in ge||(ge.w="u"in ge?ge.u%7:"W"in ge?1:0),mt="Z"in ge?i6(Fw(ge.y,0,1)).getUTCDay():r6(Fw(ge.y,0,1)).getDay(),ge.m=0,ge.d="W"in ge?(ge.w+6)%7+ge.W*7-(mt+5)%7:ge.w+ge.U*7-(mt+6)%7);return"Z"in ge?(ge.H+=ge.Z/100|0,ge.M+=ge.Z%100,i6(ge)):r6(ge)}}function C(le,me,Se,ge){for(var tt=0,Ue=me.length,mt=Se.length,it,Re;tt<Ue;){if(ge>=mt)return-1;if(it=me.charCodeAt(tt++),it===37){if(it=me.charAt(tt++),Re=E[it in lne?me.charAt(tt++):it],!Re||(ge=Re(le,Se,ge))<0)return-1}else if(it!=Se.charCodeAt(ge++))return-1}return ge}function A(le,me,Se){var ge=l.exec(me.slice(Se));return ge?(le.p=c.get(ge[0].toLowerCase()),Se+ge[0].length):-1}function R(le,me,Se){var ge=h.exec(me.slice(Se));return ge?(le.w=p.get(ge[0].toLowerCase()),Se+ge[0].length):-1}function N(le,me,Se){var ge=f.exec(me.slice(Se));return ge?(le.w=d.get(ge[0].toLowerCase()),Se+ge[0].length):-1}function O(le,me,Se){var ge=y.exec(me.slice(Se));return ge?(le.m=v.get(ge[0].toLowerCase()),Se+ge[0].length):-1}function D(le,me,Se){var ge=m.exec(me.slice(Se));return ge?(le.m=g.get(ge[0].toLowerCase()),Se+ge[0].length):-1}function M(le,me,Se){return C(le,t,me,Se)}function F(le,me,Se){return C(le,n,me,Se)}function L(le,me,Se){return C(le,r,me,Se)}function B(le){return s[le.getDay()]}function U(le){return o[le.getDay()]}function H(le){return u[le.getMonth()]}function P(le){return a[le.getMonth()]}function z(le){return i[+(le.getHours()>=12)]}function W(le){return 1+~~(le.getMonth()/3)}function j(le){return s[le.getUTCDay()]}function q(le){return o[le.getUTCDay()]}function G(le){return u[le.getUTCMonth()]}function te(le){return a[le.getUTCMonth()]}function pe(le){return i[+(le.getUTCHours()>=12)]}function be(le){return 1+~~(le.getUTCMonth()/3)}return{format:function(le){var me=S(le+="",_);return me.toString=function(){return le},me},parse:function(le){var me=T(le+="",!1);return me.toString=function(){return le},me},utcFormat:function(le){var me=S(le+="",w);return me.toString=function(){return le},me},utcParse:function(le){var me=T(le+="",!0);return me.toString=function(){return le},me}}}var lne={"-":"",_:" ",0:"0"},yo=/^\s*\d+/,vnt=/^%/,bnt=/[\\^$*+?|[\]().{}]/g;function Vn(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",o=i.length;return r+(o<n?new Array(n-o+1).join(t)+i:i)}function _nt(e){return e.replace(bnt,"\\$&")}function jw(e){return new RegExp("^(?:"+e.map(_nt).join("|")+")","i")}function Bw(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function wnt(e,t,n){var r=yo.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function Ent(e,t,n){var r=yo.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function xnt(e,t,n){var r=yo.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function Tnt(e,t,n){var r=yo.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function Snt(e,t,n){var r=yo.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function cne(e,t,n){var r=yo.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function fne(e,t,n){var r=yo.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function Cnt(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function Ant(e,t,n){var r=yo.exec(t.slice(n,n+1));return r?(e.q=r[0]*3-3,n+r[0].length):-1}function knt(e,t,n){var r=yo.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function dne(e,t,n){var r=yo.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function Int(e,t,n){var r=yo.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function hne(e,t,n){var r=yo.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function Rnt(e,t,n){var r=yo.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function Nnt(e,t,n){var r=yo.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function Pnt(e,t,n){var r=yo.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function Dnt(e,t,n){var r=yo.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function Ont(e,t,n){var r=vnt.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function $nt(e,t,n){var r=yo.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function Mnt(e,t,n){var r=yo.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function pne(e,t){return Vn(e.getDate(),t,2)}function Lnt(e,t){return Vn(e.getHours(),t,2)}function Fnt(e,t){return Vn(e.getHours()%12||12,t,2)}function jnt(e,t){return Vn(1+jd.count(_f(e),e),t,3)}function uve(e,t){return Vn(e.getMilliseconds(),t,3)}function Bnt(e,t){return uve(e,t)+"000"}function Unt(e,t){return Vn(e.getMonth()+1,t,2)}function znt(e,t){return Vn(e.getMinutes(),t,2)}function Vnt(e,t){return Vn(e.getSeconds(),t,2)}function Hnt(e){var t=e.getDay();return t===0?7:t}function qnt(e,t){return Vn(P_.count(_f(e)-1,e),t,2)}function lve(e){var t=e.getDay();return t>=4||t===0?wb(e):wb.ceil(e)}function Wnt(e,t){return e=lve(e),Vn(wb.count(_f(e),e)+(_f(e).getDay()===4),t,2)}function Gnt(e){return e.getDay()}function Ynt(e,t){return Vn(aN.count(_f(e)-1,e),t,2)}function Knt(e,t){return Vn(e.getFullYear()%100,t,2)}function Xnt(e,t){return e=lve(e),Vn(e.getFullYear()%100,t,2)}function Qnt(e,t){return Vn(e.getFullYear()%1e4,t,4)}function Jnt(e,t){var n=e.getDay();return e=n>=4||n===0?wb(e):wb.ceil(e),Vn(e.getFullYear()%1e4,t,4)}function Znt(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Vn(t/60|0,"0",2)+Vn(t%60,"0",2)}function mne(e,t){return Vn(e.getUTCDate(),t,2)}function ert(e,t){return Vn(e.getUTCHours(),t,2)}function trt(e,t){return Vn(e.getUTCHours()%12||12,t,2)}function nrt(e,t){return Vn(1+jp.count(wf(e),e),t,3)}function cve(e,t){return Vn(e.getUTCMilliseconds(),t,3)}function rrt(e,t){return cve(e,t)+"000"}function irt(e,t){return Vn(e.getUTCMonth()+1,t,2)}function ort(e,t){return Vn(e.getUTCMinutes(),t,2)}function srt(e,t){return Vn(e.getUTCSeconds(),t,2)}function art(e){var t=e.getUTCDay();return t===0?7:t}function urt(e,t){return Vn(D_.count(wf(e)-1,e),t,2)}function fve(e){var t=e.getUTCDay();return t>=4||t===0?Eb(e):Eb.ceil(e)}function lrt(e,t){return e=fve(e),Vn(Eb.count(wf(e),e)+(wf(e).getUTCDay()===4),t,2)}function crt(e){return e.getUTCDay()}function frt(e,t){return Vn(uN.count(wf(e)-1,e),t,2)}function drt(e,t){return Vn(e.getUTCFullYear()%100,t,2)}function hrt(e,t){return e=fve(e),Vn(e.getUTCFullYear()%100,t,2)}function prt(e,t){return Vn(e.getUTCFullYear()%1e4,t,4)}function mrt(e,t){var n=e.getUTCDay();return e=n>=4||n===0?Eb(e):Eb.ceil(e),Vn(e.getUTCFullYear()%1e4,t,4)}function grt(){return"+0000"}function gne(){return"%"}function yne(e){return+e}function vne(e){return Math.floor(+e/1e3)}var vv,dV,hV,O_,dve;yrt({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function yrt(e){return vv=ave(e),dV=vv.format,hV=vv.parse,O_=vv.utcFormat,dve=vv.utcParse,vv}function vrt(e){return new Date(e)}function brt(e){return e instanceof Date?+e:+new Date(+e)}function pV(e,t,n,r,i,o,s,a,u,l){var c=Xye(),f=c.invert,d=c.domain,h=l(".%L"),p=l(":%S"),m=l("%I:%M"),g=l("%I %p"),y=l("%a %d"),v=l("%b %d"),_=l("%B"),w=l("%Y");function E(S){return(u(S)<S?h:a(S)<S?p:s(S)<S?m:o(S)<S?g:r(S)<S?i(S)<S?y:v:n(S)<S?_:w)(S)}return c.invert=function(S){return new Date(f(S))},c.domain=function(S){return arguments.length?d(Array.from(S,brt)):d().map(vrt)},c.ticks=function(S){var T=d();return e(T[0],T[T.length-1],S??10)},c.tickFormat=function(S,T){return T==null?E:l(T)},c.nice=function(S){var T=d();return(!S||typeof S.range!="function")&&(S=t(T[0],T[T.length-1],S??10)),S?d(Zye(T,S)):c},c.copy=function(){return mC(c,pV(e,t,n,r,i,o,s,a,u,l))},c}function lN(){return yc.apply(pV(gnt,ynt,_f,VT,P_,jd,xO,wO,kd,dV).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function _rt(){return yc.apply(pV(pnt,mnt,wf,HT,D_,jp,TO,EO,kd,O_).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function SO(){var e=0,t=1,n,r,i,o,s=xa,a=!1,u;function l(f){return f==null||isNaN(f=+f)?u:s(i===0?.5:(f=(o(f)-n)*i,a?Math.max(0,Math.min(1,f)):f))}l.domain=function(f){return arguments.length?([e,t]=f,n=o(e=+e),r=o(t=+t),i=n===r?0:1/(r-n),l):[e,t]},l.clamp=function(f){return arguments.length?(a=!!f,l):a},l.interpolator=function(f){return arguments.length?(s=f,l):s};function c(f){return function(d){var h,p;return arguments.length?([h,p]=d,s=f(h,p),l):[s(0),s(1)]}}return l.range=c(Vm),l.rangeRound=c(uC),l.unknown=function(f){return arguments.length?(u=f,l):u},function(f){return o=f,n=f(e),r=f(t),i=n===r?0:1/(r-n),l}}function Wm(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function mV(){var e=Oy(SO()(xa));return e.copy=function(){return Wm(e,mV())},Hm.apply(e,arguments)}function hve(){var e=aV(SO()).domain([1,10]);return e.copy=function(){return Wm(e,hve()).base(e.base())},Hm.apply(e,arguments)}function pve(){var e=uV(SO());return e.copy=function(){return Wm(e,pve()).constant(e.constant())},Hm.apply(e,arguments)}function gV(){var e=lV(SO());return e.copy=function(){return Wm(e,gV()).exponent(e.exponent())},Hm.apply(e,arguments)}function wrt(){return gV.apply(null,arguments).exponent(.5)}function CO(){var e=0,t=.5,n=1,r=1,i,o,s,a,u,l=xa,c,f=!1,d;function h(m){return isNaN(m=+m)?d:(m=.5+((m=+c(m))-o)*(r*m<r*o?a:u),l(f?Math.max(0,Math.min(1,m)):m))}h.domain=function(m){return arguments.length?([e,t,n]=m,i=c(e=+e),o=c(t=+t),s=c(n=+n),a=i===o?0:.5/(o-i),u=o===s?0:.5/(s-o),r=o<i?-1:1,h):[e,t,n]},h.clamp=function(m){return arguments.length?(f=!!m,h):f},h.interpolator=function(m){return arguments.length?(l=m,h):l};function p(m){return function(g){var y,v,_;return arguments.length?([y,v,_]=g,l=Hz(m,[y,v,_]),h):[l(0),l(.5),l(1)]}}return h.range=p(Vm),h.rangeRound=p(uC),h.unknown=function(m){return arguments.length?(d=m,h):d},function(m){return c=m,i=m(e),o=m(t),s=m(n),a=i===o?0:.5/(o-i),u=o===s?0:.5/(s-o),r=o<i?-1:1,h}}function mve(){var e=Oy(CO()(xa));return e.copy=function(){return Wm(e,mve())},Hm.apply(e,arguments)}function gve(){var e=aV(CO()).domain([.1,1,10]);return e.copy=function(){return Wm(e,gve()).base(e.base())},Hm.apply(e,arguments)}function yve(){var e=uV(CO());return e.copy=function(){return Wm(e,yve()).constant(e.constant())},Hm.apply(e,arguments)}function yV(){var e=lV(CO());return e.copy=function(){return Wm(e,yV()).exponent(e.exponent())},Hm.apply(e,arguments)}function Ert(){return yV.apply(null,arguments).exponent(.5)}function Uf(e){for(var t=e.length/6|0,n=new Array(t),r=0;r<t;)n[r]="#"+e.slice(r*6,++r*6);return n}const xrt=Uf("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),Trt=Uf("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),Srt=Uf("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),Crt=Uf("4269d0efb118ff725c6cc5b03ca951ff8ab7a463f297bbf59c6b4e9498a0"),Art=Uf("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),krt=Uf("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),Irt=Uf("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),Rrt=Uf("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),Nrt=Uf("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),Prt=Uf("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f");function sn(e){return function(){return e}}const bne=Math.abs,Zo=Math.atan2,hg=Math.cos,Drt=Math.max,o6=Math.min,Rc=Math.sin,i0=Math.sqrt,rs=1e-12,xb=Math.PI,cN=xb/2,kx=2*xb;function Ort(e){return e>1?0:e<-1?xb:Math.acos(e)}function _ne(e){return e>=1?cN:e<=-1?-cN:Math.asin(e)}function AO(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);t=r}return e},()=>new Yz(t)}function $rt(e){return e.innerRadius}function Mrt(e){return e.outerRadius}function Lrt(e){return e.startAngle}function Frt(e){return e.endAngle}function jrt(e){return e&&e.padAngle}function Brt(e,t,n,r,i,o,s,a){var u=n-e,l=r-t,c=s-i,f=a-o,d=f*u-c*l;if(!(d*d<rs))return d=(c*(t-o)-f*(e-i))/d,[e+d*u,t+d*l]}function S2(e,t,n,r,i,o,s){var a=e-n,u=t-r,l=(s?o:-o)/i0(a*a+u*u),c=l*u,f=-l*a,d=e+c,h=t+f,p=n+c,m=r+f,g=(d+p)/2,y=(h+m)/2,v=p-d,_=m-h,w=v*v+_*_,E=i-o,S=d*m-p*h,T=(_<0?-1:1)*i0(Drt(0,E*E*w-S*S)),C=(S*_-v*T)/w,A=(-S*v-_*T)/w,R=(S*_+v*T)/w,N=(-S*v+_*T)/w,O=C-g,D=A-y,M=R-g,F=N-y;return O*O+D*D>M*M+F*F&&(C=R,A=N),{cx:C,cy:A,x01:-c,y01:-f,x11:C*(i/E-1),y11:A*(i/E-1)}}function qT(){var e=$rt,t=Mrt,n=sn(0),r=null,i=Lrt,o=Frt,s=jrt,a=null,u=AO(l);function l(){var c,f,d=+e.apply(this,arguments),h=+t.apply(this,arguments),p=i.apply(this,arguments)-cN,m=o.apply(this,arguments)-cN,g=bne(m-p),y=m>p;if(a||(a=c=u()),h<d&&(f=h,h=d,d=f),!(h>rs))a.moveTo(0,0);else if(g>kx-rs)a.moveTo(h*hg(p),h*Rc(p)),a.arc(0,0,h,p,m,!y),d>rs&&(a.moveTo(d*hg(m),d*Rc(m)),a.arc(0,0,d,m,p,y));else{var v=p,_=m,w=p,E=m,S=g,T=g,C=s.apply(this,arguments)/2,A=C>rs&&(r?+r.apply(this,arguments):i0(d*d+h*h)),R=o6(bne(h-d)/2,+n.apply(this,arguments)),N=R,O=R,D,M;if(A>rs){var F=_ne(A/d*Rc(C)),L=_ne(A/h*Rc(C));(S-=F*2)>rs?(F*=y?1:-1,w+=F,E-=F):(S=0,w=E=(p+m)/2),(T-=L*2)>rs?(L*=y?1:-1,v+=L,_-=L):(T=0,v=_=(p+m)/2)}var B=h*hg(v),U=h*Rc(v),H=d*hg(E),P=d*Rc(E);if(R>rs){var z=h*hg(_),W=h*Rc(_),j=d*hg(w),q=d*Rc(w),G;if(g<xb)if(G=Brt(B,U,j,q,z,W,H,P)){var te=B-G[0],pe=U-G[1],be=z-G[0],le=W-G[1],me=1/Rc(Ort((te*be+pe*le)/(i0(te*te+pe*pe)*i0(be*be+le*le)))/2),Se=i0(G[0]*G[0]+G[1]*G[1]);N=o6(R,(d-Se)/(me-1)),O=o6(R,(h-Se)/(me+1))}else N=O=0}T>rs?O>rs?(D=S2(j,q,B,U,h,O,y),M=S2(z,W,H,P,h,O,y),a.moveTo(D.cx+D.x01,D.cy+D.y01),O<R?a.arc(D.cx,D.cy,O,Zo(D.y01,D.x01),Zo(M.y01,M.x01),!y):(a.arc(D.cx,D.cy,O,Zo(D.y01,D.x01),Zo(D.y11,D.x11),!y),a.arc(0,0,h,Zo(D.cy+D.y11,D.cx+D.x11),Zo(M.cy+M.y11,M.cx+M.x11),!y),a.arc(M.cx,M.cy,O,Zo(M.y11,M.x11),Zo(M.y01,M.x01),!y))):(a.moveTo(B,U),a.arc(0,0,h,v,_,!y)):a.moveTo(B,U),!(d>rs)||!(S>rs)?a.lineTo(H,P):N>rs?(D=S2(H,P,z,W,d,-N,y),M=S2(B,U,j,q,d,-N,y),a.lineTo(D.cx+D.x01,D.cy+D.y01),N<R?a.arc(D.cx,D.cy,N,Zo(D.y01,D.x01),Zo(M.y01,M.x01),!y):(a.arc(D.cx,D.cy,N,Zo(D.y01,D.x01),Zo(D.y11,D.x11),!y),a.arc(0,0,d,Zo(D.cy+D.y11,D.cx+D.x11),Zo(M.cy+M.y11,M.cx+M.x11),y),a.arc(M.cx,M.cy,N,Zo(M.y11,M.x11),Zo(M.y01,M.x01),!y))):a.arc(0,0,d,E,w,y)}if(a.closePath(),c)return a=null,c+""||null}return l.centroid=function(){var c=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,f=(+i.apply(this,arguments)+ +o.apply(this,arguments))/2-xb/2;return[hg(f)*c,Rc(f)*c]},l.innerRadius=function(c){return arguments.length?(e=typeof c=="function"?c:sn(+c),l):e},l.outerRadius=function(c){return arguments.length?(t=typeof c=="function"?c:sn(+c),l):t},l.cornerRadius=function(c){return arguments.length?(n=typeof c=="function"?c:sn(+c),l):n},l.padRadius=function(c){return arguments.length?(r=c==null?null:typeof c=="function"?c:sn(+c),l):r},l.startAngle=function(c){return arguments.length?(i=typeof c=="function"?c:sn(+c),l):i},l.endAngle=function(c){return arguments.length?(o=typeof c=="function"?c:sn(+c),l):o},l.padAngle=function(c){return arguments.length?(s=typeof c=="function"?c:sn(+c),l):s},l.context=function(c){return arguments.length?(a=c??null,l):a},l}function kO(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function vve(e){this._context=e}vve.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function vV(e){return new vve(e)}function bve(e){return e[0]}function _ve(e){return e[1]}function bV(e,t){var n=sn(!0),r=null,i=vV,o=null,s=AO(a);e=typeof e=="function"?e:e===void 0?bve:sn(e),t=typeof t=="function"?t:t===void 0?_ve:sn(t);function a(u){var l,c=(u=kO(u)).length,f,d=!1,h;for(r==null&&(o=i(h=s())),l=0;l<=c;++l)!(l<c&&n(f=u[l],l,u))===d&&((d=!d)?o.lineStart():o.lineEnd()),d&&o.point(+e(f,l,u),+t(f,l,u));if(h)return o=null,h+""||null}return a.x=function(u){return arguments.length?(e=typeof u=="function"?u:sn(+u),a):e},a.y=function(u){return arguments.length?(t=typeof u=="function"?u:sn(+u),a):t},a.defined=function(u){return arguments.length?(n=typeof u=="function"?u:sn(!!u),a):n},a.curve=function(u){return arguments.length?(i=u,r!=null&&(o=i(r)),a):i},a.context=function(u){return arguments.length?(u==null?r=o=null:o=i(r=u),a):r},a}function wve(e,t,n){var r=null,i=sn(!0),o=null,s=vV,a=null,u=AO(l);e=typeof e=="function"?e:e===void 0?bve:sn(+e),t=typeof t=="function"?t:sn(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?_ve:sn(+n);function l(f){var d,h,p,m=(f=kO(f)).length,g,y=!1,v,_=new Array(m),w=new Array(m);for(o==null&&(a=s(v=u())),d=0;d<=m;++d){if(!(d<m&&i(g=f[d],d,f))===y)if(y=!y)h=d,a.areaStart(),a.lineStart();else{for(a.lineEnd(),a.lineStart(),p=d-1;p>=h;--p)a.point(_[p],w[p]);a.lineEnd(),a.areaEnd()}y&&(_[d]=+e(g,d,f),w[d]=+t(g,d,f),a.point(r?+r(g,d,f):_[d],n?+n(g,d,f):w[d]))}if(v)return a=null,v+""||null}function c(){return bV().defined(i).curve(s).context(o)}return l.x=function(f){return arguments.length?(e=typeof f=="function"?f:sn(+f),r=null,l):e},l.x0=function(f){return arguments.length?(e=typeof f=="function"?f:sn(+f),l):e},l.x1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:sn(+f),l):r},l.y=function(f){return arguments.length?(t=typeof f=="function"?f:sn(+f),n=null,l):t},l.y0=function(f){return arguments.length?(t=typeof f=="function"?f:sn(+f),l):t},l.y1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:sn(+f),l):n},l.lineX0=l.lineY0=function(){return c().x(e).y(t)},l.lineY1=function(){return c().x(e).y(n)},l.lineX1=function(){return c().x(r).y(t)},l.defined=function(f){return arguments.length?(i=typeof f=="function"?f:sn(!!f),l):i},l.curve=function(f){return arguments.length?(s=f,o!=null&&(a=s(o)),l):s},l.context=function(f){return arguments.length?(f==null?o=a=null:a=s(o=f),l):o},l}function Urt(e,t){return t<e?-1:t>e?1:t>=e?0:NaN}function zrt(e){return e}function _V(){var e=zrt,t=Urt,n=null,r=sn(0),i=sn(kx),o=sn(0);function s(a){var u,l=(a=kO(a)).length,c,f,d=0,h=new Array(l),p=new Array(l),m=+r.apply(this,arguments),g=Math.min(kx,Math.max(-kx,i.apply(this,arguments)-m)),y,v=Math.min(Math.abs(g)/l,o.apply(this,arguments)),_=v*(g<0?-1:1),w;for(u=0;u<l;++u)(w=p[h[u]=u]=+e(a[u],u,a))>0&&(d+=w);for(t!=null?h.sort(function(E,S){return t(p[E],p[S])}):n!=null&&h.sort(function(E,S){return n(a[E],a[S])}),u=0,f=d?(g-l*_)/d:0;u<l;++u,m=y)c=h[u],w=p[c],y=m+(w>0?w*f:0)+_,p[c]={data:a[c],index:u,value:w,startAngle:m,endAngle:y,padAngle:v};return p}return s.value=function(a){return arguments.length?(e=typeof a=="function"?a:sn(+a),s):e},s.sortValues=function(a){return arguments.length?(t=a,n=null,s):t},s.sort=function(a){return arguments.length?(n=a,t=null,s):n},s.startAngle=function(a){return arguments.length?(r=typeof a=="function"?a:sn(+a),s):r},s.endAngle=function(a){return arguments.length?(i=typeof a=="function"?a:sn(+a),s):i},s.padAngle=function(a){return arguments.length?(o=typeof a=="function"?a:sn(+a),s):o},s}const Vrt={draw(e,t){const n=i0(t/xb);e.moveTo(n,0),e.arc(0,0,n,0,kx)}};function Hrt(e,t){let n=null,r=AO(i);e=typeof e=="function"?e:sn(e||Vrt),t=typeof t=="function"?t:sn(t===void 0?64:+t);function i(){let o;if(n||(n=o=r()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),o)return n=null,o+""||null}return i.type=function(o){return arguments.length?(e=typeof o=="function"?o:sn(o),i):e},i.size=function(o){return arguments.length?(t=typeof o=="function"?o:sn(+o),i):t},i.context=function(o){return arguments.length?(n=o??null,i):n},i}function lm(){}function fN(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function IO(e){this._context=e}IO.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:fN(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:fN(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Eve(e){return new IO(e)}function xve(e){this._context=e}xve.prototype={areaStart:lm,areaEnd:lm,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:fN(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function qrt(e){return new xve(e)}function Tve(e){this._context=e}Tve.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:fN(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Wrt(e){return new Tve(e)}function Sve(e,t){this._basis=new IO(e),this._beta=t}Sve.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,n=e.length-1;if(n>0)for(var r=e[0],i=t[0],o=e[n]-r,s=t[n]-i,a=-1,u;++a<=n;)u=a/n,this._basis.point(this._beta*e[a]+(1-this._beta)*(r+u*o),this._beta*t[a]+(1-this._beta)*(i+u*s));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}};const Grt=function e(t){function n(r){return t===1?new IO(r):new Sve(r,t)}return n.beta=function(r){return e(+r)},n}(.85);function dN(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function wV(e,t){this._context=e,this._k=(1-t)/6}wV.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:dN(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:dN(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Yrt=function e(t){function n(r){return new wV(r,t)}return n.tension=function(r){return e(+r)},n}(0);function EV(e,t){this._context=e,this._k=(1-t)/6}EV.prototype={areaStart:lm,areaEnd:lm,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:dN(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Krt=function e(t){function n(r){return new EV(r,t)}return n.tension=function(r){return e(+r)},n}(0);function xV(e,t){this._context=e,this._k=(1-t)/6}xV.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:dN(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Xrt=function e(t){function n(r){return new xV(r,t)}return n.tension=function(r){return e(+r)},n}(0);function TV(e,t,n){var r=e._x1,i=e._y1,o=e._x2,s=e._y2;if(e._l01_a>rs){var a=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,u=3*e._l01_a*(e._l01_a+e._l12_a);r=(r*a-e._x0*e._l12_2a+e._x2*e._l01_2a)/u,i=(i*a-e._y0*e._l12_2a+e._y2*e._l01_2a)/u}if(e._l23_a>rs){var l=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,c=3*e._l23_a*(e._l23_a+e._l12_a);o=(o*l+e._x1*e._l23_2a-t*e._l12_2a)/c,s=(s*l+e._y1*e._l23_2a-n*e._l12_2a)/c}e._context.bezierCurveTo(r,i,o,s,e._x2,e._y2)}function Cve(e,t){this._context=e,this._alpha=t}Cve.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:TV(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Qrt=function e(t){function n(r){return t?new Cve(r,t):new wV(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function Ave(e,t){this._context=e,this._alpha=t}Ave.prototype={areaStart:lm,areaEnd:lm,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:TV(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Jrt=function e(t){function n(r){return t?new Ave(r,t):new EV(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function kve(e,t){this._context=e,this._alpha=t}kve.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:TV(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Zrt=function e(t){function n(r){return t?new kve(r,t):new xV(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function Ive(e){this._context=e}Ive.prototype={areaStart:lm,areaEnd:lm,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function eit(e){return new Ive(e)}function wne(e){return e<0?-1:1}function Ene(e,t,n){var r=e._x1-e._x0,i=t-e._x1,o=(e._y1-e._y0)/(r||i<0&&-0),s=(n-e._y1)/(i||r<0&&-0),a=(o*i+s*r)/(r+i);return(wne(o)+wne(s))*Math.min(Math.abs(o),Math.abs(s),.5*Math.abs(a))||0}function xne(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function s6(e,t,n){var r=e._x0,i=e._y0,o=e._x1,s=e._y1,a=(o-r)/3;e._context.bezierCurveTo(r+a,i+a*t,o-a,s-a*n,o,s)}function hN(e){this._context=e}hN.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:s6(this,this._t0,xne(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,s6(this,xne(this,n=Ene(this,e,t)),n);break;default:s6(this,this._t0,n=Ene(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function Rve(e){this._context=new Nve(e)}(Rve.prototype=Object.create(hN.prototype)).point=function(e,t){hN.prototype.point.call(this,t,e)};function Nve(e){this._context=e}Nve.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,i,o){this._context.bezierCurveTo(t,e,r,n,o,i)}};function tit(e){return new hN(e)}function nit(e){return new Rve(e)}function Pve(e){this._context=e}Pve.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var r=Tne(e),i=Tne(t),o=0,s=1;s<n;++o,++s)this._context.bezierCurveTo(r[0][o],i[0][o],r[1][o],i[1][o],e[s],t[s]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function Tne(e){var t,n=e.length-1,r,i=new Array(n),o=new Array(n),s=new Array(n);for(i[0]=0,o[0]=2,s[0]=e[0]+2*e[1],t=1;t<n-1;++t)i[t]=1,o[t]=4,s[t]=4*e[t]+2*e[t+1];for(i[n-1]=2,o[n-1]=7,s[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)r=i[t]/o[t-1],o[t]-=r,s[t]-=r*s[t-1];for(i[n-1]=s[n-1]/o[n-1],t=n-2;t>=0;--t)i[t]=(s[t]-i[t+1])/o[t];for(o[n-1]=(e[n]+i[n-1])/2,t=0;t<n-1;++t)o[t]=2*e[t+1]-i[t+1];return[i,o]}function rit(e){return new Pve(e)}function RO(e,t){this._context=e,this._t=t}RO.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function iit(e){return new RO(e,.5)}function oit(e){return new RO(e,0)}function sit(e){return new RO(e,1)}function Sne(e,t){if((s=e.length)>1)for(var n=1,r,i,o=e[t[0]],s,a=o.length;n<s;++n)for(i=o,o=e[t[n]],r=0;r<a;++r)o[r][1]+=o[r][0]=isNaN(i[r][1])?i[r][0]:i[r][1]}function Cne(e){for(var t=e.length,n=new Array(t);--t>=0;)n[t]=t;return n}function ait(e,t){return e[t]}function uit(e){const t=[];return t.key=e,t}function lit(){var e=sn([]),t=Cne,n=Sne,r=ait;function i(o){var s=Array.from(e.apply(this,arguments),uit),a,u=s.length,l=-1,c;for(const f of o)for(a=0,++l;a<u;++a)(s[a][l]=[0,+r(f,s[a].key,l,o)]).data=f;for(a=0,c=kO(t(s));a<u;++a)s[c[a]].index=a;return n(s,c),s}return i.keys=function(o){return arguments.length?(e=typeof o=="function"?o:sn(Array.from(o)),i):e},i.value=function(o){return arguments.length?(r=typeof o=="function"?o:sn(+o),i):r},i.order=function(o){return arguments.length?(t=o==null?Cne:typeof o=="function"?o:sn(Array.from(o)),i):t},i.offset=function(o){return arguments.length?(n=o??Sne,i):n},i}function DE(e,t,n){this.k=e,this.x=t,this.y=n}DE.prototype={constructor:DE,scale:function(e){return e===1?this:new DE(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new DE(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};DE.prototype;const Ane=e=>{const t={...e,marginTop:e.marginTop||10,marginRight:e.marginRight||10,marginBottom:e.marginBottom||40,marginLeft:e.marginLeft||75};return{...t,boundedHeight:t.height?Math.max(t.height-t.marginTop-t.marginBottom,0):0,boundedWidth:t.width?Math.max(t.width-t.marginLeft-t.marginRight,0):0}},$_=e=>{const t=k.useRef(null),n=Ane(e),[r,i]=k.useState(0),[o,s]=k.useState(0);k.useEffect(()=>{const u=t.current;if(u){const l=new ResizeObserver(c=>{if(!Array.isArray(c)||!c.length)return;const f=c[0];r!==f.contentRect.width&&i(f.contentRect.width),o!==f.contentRect.height&&s(f.contentRect.height)});return l.observe(u),()=>l.unobserve(u)}return()=>null},[o,r]);const a=Ane({...n,width:n.width||r,height:n.height||o});return[t,a]},cit=Object.freeze(Object.defineProperty({__proto__:null,useChartDimensions:$_},Symbol.toStringTag,{value:"Module"}));function Dve({data:e,xScale:t,yScale:n,height:r}){return b.jsx("g",{children:e.map((i,o)=>b.jsx("rect",{x:t(i.name),y:n(i.value),width:t.bandwidth(),height:r-n(i.value),fill:"transparent",stroke:"currentColor"},o))})}const fit=Object.freeze(Object.defineProperty({__proto__:null,Bars:Dve},Symbol.toStringTag,{value:"Module"}));function SV({domain:e=[0,100],range:t=[10,100],withTick:n=!0,tickLen:r=5,tickFilter:i=o=>o}){const o=k.useMemo(()=>{const s=qm().domain(e).range(t),a=t[1]-t[0],l=Math.max(1,Math.floor(a/30));return i(s.ticks(l).map(c=>({value:c,xOffset:s(c)})))},[e,t,i]);return b.jsxs("g",{children:[b.jsx("path",{d:["M",0,t[0],"h",r,"V",t[1],"h",-r].join(" "),fill:"none",stroke:"currentColor"}),n&&o.map(({value:s,xOffset:a})=>b.jsxs("g",{transform:`translate(0,${a})`,children:[b.jsx("line",{x2:`${r}`,stroke:"currentColor"}),b.jsx("text",{style:{fontSize:"10px",textAnchor:"middle",transform:"translateX(-10px)"},children:s},s)]},s))]})}const dit=Object.freeze(Object.defineProperty({__proto__:null,NumericAxisV:SV},Symbol.toStringTag,{value:"Module"}));function Ove({domain:e=["A","B","C","D","E"],range:t=[10,100],withTick:n=!0,tickLen:r=5,tickFilter:i=o=>o}){const o=k.useMemo(()=>{const s=pC().domain(e).range(t).padding(.2);return i(e.map(a=>({value:a,xOffset:(s(a)||0)+s.bandwidth()/2-5})))},[e,t,i]);return b.jsxs("g",{children:[b.jsx("path",{d:["M",t[0],r,"v",-r,"H",t[1],"v",r].join(" "),fill:"none",stroke:"currentColor"}),n&&o.map(({value:s,xOffset:a})=>b.jsx("g",{transform:`translate(${a}, 10)`,children:b.jsx("circle",{r:2,cx:0,cy:0,children:s},s)},s))]})}const hit=Object.freeze(Object.defineProperty({__proto__:null,OrdinalAxisHWithDotMarks:Ove},Symbol.toStringTag,{value:"Module"})),pit={marginBottom:40,marginLeft:40,marginTop:15,marginRight:15,width:400,height:400};function mit({parameters:e}){const[n,r]=$_(pit),i=pC().domain(e.data.map(u=>u.name)).range([0,r.boundedWidth]).padding(.2),o=qm().domain([100,0]).range([0,r.boundedHeight]),s=u=>u.filter((l,c)=>c===0||c===u.length-1),a=u=>u.filter((l,c)=>e.selectedIndices.includes(c));return b.jsx("div",{className:"Chart__wrapper",ref:n,style:{height:400},children:b.jsx("svg",{width:r.width,height:r.height,children:b.jsxs("g",{transform:`translate(${[r.marginLeft,r.marginTop].join(",")})`,children:[b.jsx("g",{transform:`translate(${[6,r.boundedHeight].join(",")})`,children:b.jsx(Ove,{domain:i.domain(),range:i.range(),withTick:!0,tickLen:0,tickFilter:a})}),b.jsx("g",{transform:`translate(${[0,0].join(",")})`,children:b.jsx(SV,{domain:o.domain(),range:o.range(),withTick:!0,tickLen:6,tickFilter:s})}),b.jsx("g",{transform:`translate(${[0,0].join(",")})`,children:b.jsx(Dve,{data:e.data,xScale:i,yScale:o,height:r.boundedHeight})})]})})})}const git=Object.freeze(Object.defineProperty({__proto__:null,default:mit},Symbol.toStringTag,{value:"Module"}));function $ve({data:e}){return b.jsx("g",{children:e.map(({bubble:t},n)=>b.jsx("circle",{cx:t.x,cy:t.y,r:t.r,fill:"transparent",stroke:"currentColor"},n))})}const yit=Object.freeze(Object.defineProperty({__proto__:null,Bubbles:$ve},Symbol.toStringTag,{value:"Module"}));function CV({positions:e}){return b.jsx("g",{children:e.map((t,n)=>b.jsx("circle",{cx:t.x,cy:t.y,r:2,fill:"black",stroke:"currentColor"},n))})}const vit=Object.freeze(Object.defineProperty({__proto__:null,DotMarks:CV},Symbol.toStringTag,{value:"Module"})),bit={marginBottom:40,marginLeft:40,marginTop:15,marginRight:15,height:400,width:400},_it=({data:e},t=100,n=100)=>{const i={children:e.map(a=>+a.value).map(a=>({value:a}))},o=qye().size([t-10,n-10]).padding(1.5),s=vO(i).sum(a=>a.value);return o(s).descendants().filter(a=>!a.children).map((a,u)=>({bubble:a,data:e[u]}))},wit=(e,t)=>e.filter((n,r)=>t.includes(r)).map(({bubble:n})=>({x:n.x,y:n.y}));function Eit({parameters:e}){const[t,n]=$_(bit),r=_it(e,n.width,n.height),i=wit(r,e.selectedIndices);return b.jsx("div",{className:"Chart__wrapper",ref:t,style:{height:"400px"},children:b.jsx("svg",{width:n.width,height:n.height,children:b.jsxs("g",{transform:`translate(${[n.marginLeft/2,n.marginTop/2].join(",")})`,children:[b.jsx($ve,{data:r}),b.jsx(CV,{positions:i})]})})})}const xit=Object.freeze(Object.defineProperty({__proto__:null,default:Eit},Symbol.toStringTag,{value:"Module"}));function Mve({arcs:e}){return b.jsx("g",{children:e.map((t,n)=>b.jsx("path",{d:t(),fill:"transparent",stroke:"currentColor"},n))})}const Tit=Object.freeze(Object.defineProperty({__proto__:null,Slices:Mve},Symbol.toStringTag,{value:"Module"}));function Lve({positions:e}){return b.jsx("g",{children:e.map((t,n)=>b.jsx("g",{transform:`translate(${t.centroid()})`,children:b.jsx("circle",{r:2,cx:0,cy:0},n)},n))})}const Sit=Object.freeze(Object.defineProperty({__proto__:null,SlicesDotMarks:Lve},Symbol.toStringTag,{value:"Module"})),Cit={marginBottom:40,marginLeft:40,marginTop:15,marginRight:15,height:400,width:500},Ait=_V().value(e=>e.value),Uw=150;function kit({parameters:e}){const[t,n]=$_(Cit),r=Ait(e.data),i=r.map(s=>qT().innerRadius(0).outerRadius(Uw).startAngle(s.startAngle).endAngle(s.endAngle)),o=r.map(s=>qT().outerRadius(Uw+10).innerRadius(Uw+10).startAngle(s.startAngle).endAngle(s.endAngle)).filter((s,a)=>e.selectedIndices.includes(a));return b.jsx("div",{className:"Chart__wrapper",ref:t,style:{height:400},children:b.jsx("svg",{width:n.width,height:n.height,children:b.jsxs("g",{transform:`translate(${[n.marginLeft+Uw,n.marginTop+Uw].join(",")})`,children:[b.jsx(Mve,{arcs:i}),b.jsx(Lve,{positions:o})]})})})}const Iit=Object.freeze(Object.defineProperty({__proto__:null,default:kit},Symbol.toStringTag,{value:"Module"}));function Fve({domain:e=[0,100],range:t=[10,100],withTick:n=!0,tickLen:r=5,tickFilter:i=o=>o}){const o=k.useMemo(()=>{const s=qm().domain(e).range(t),a=t[1]-t[0],l=Math.max(1,Math.floor(a/30));return i(s.ticks(l).map(c=>({value:c,xOffset:s(c)})))},[e,t,i]);return b.jsxs("g",{children:[b.jsx("path",{d:["M",t[0],r,"v",-r,"H",t[1],"v",r].join(" "),fill:"none",stroke:"currentColor"}),n&&o.map(({value:s,xOffset:a})=>b.jsxs("g",{transform:`translate(${a}, 0)`,children:[b.jsx("line",{y2:`${r}`,stroke:"currentColor"}),b.jsx("text",{style:{fontSize:"10px",textAnchor:"middle",transform:"translateY(20px)"},children:s},s)]},s))]})}const Rit=Object.freeze(Object.defineProperty({__proto__:null,NumericAxisH:Fve},Symbol.toStringTag,{value:"Module"}));function jve({data:e,barWidth:t,yScale:n}){return b.jsx("g",{children:e.map((r,i)=>b.jsx("rect",{x:t/2,y:n(r[0][1]),width:t,height:n(r[0][0])-n(r[0][1]),fill:"transparent",stroke:"currentColor"},i))})}const Nit=Object.freeze(Object.defineProperty({__proto__:null,StackedBars:jve},Symbol.toStringTag,{value:"Module"})),Pit={marginBottom:40,marginLeft:40,marginTop:15,marginRight:15,height:400,width:400};function Dit({parameters:e}){const[n,r]=$_(Pit),i=pC().domain(e.data.map(h=>h.name)).range([0,r.boundedWidth]).padding(.2),o=qm().domain([100,0]).range([0,r.boundedWidth]),s=h=>h.filter((p,m)=>m===0||m===h.length-1),a=h=>h.filter((p,m)=>e.selectedIndices.includes(m)),u=h=>{const p=h.map(_=>+_.value),g=p.reduce((_,w)=>Number(_)+Number(w))/100,y={};p.forEach((_,w)=>{y[String.fromCharCode(w+65)]=_/g});const v=[y];return lit().keys(e.data.map(_=>_.name))(v)},l=(h,p,m)=>h.filter((y,v)=>p.includes(v)).map(y=>({x:m,y:o(y[0][1])+.5*(o(y[0][0])-o(y[0][1]))})),c=u(e.data),f=Math.min(r.width,r.height)/2-20,d=l(c,e.selectedIndices,f);return b.jsx("div",{className:"Chart__wrapper",ref:n,style:{height:"400"},children:b.jsx("svg",{width:r.width,height:r.height,children:b.jsxs("g",{transform:`translate(${[r.marginLeft,r.marginTop].join(",")})`,children:[b.jsx("g",{transform:`translate(${[6,r.boundedHeight].join(",")})`,children:b.jsx(Fve,{domain:i.domain(),range:i.range(),withTick:!0,tickLen:0,tickFilter:a})}),b.jsx("g",{transform:"translate(0, 0)",children:b.jsx(SV,{domain:o.domain(),range:o.range(),withTick:!0,tickLen:6,tickFilter:s})}),b.jsxs("g",{transform:"translate(0, 0)",children:[b.jsx(jve,{data:c,barWidth:f,yScale:o}),b.jsx(CV,{positions:d})]})]})})})}const Oit=Object.freeze(Object.defineProperty({__proto__:null,default:Dit},Symbol.toStringTag,{value:"Module"}));function zl(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Error("[Immer] minified error nr: "+e+(n.length?" "+n.map(function(i){return"'"+i+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function cm(e){return!!e&&!!e[Fr]}function ah(e){var t;return!!e&&(function(n){if(!n||typeof n!="object")return!1;var r=Object.getPrototypeOf(n);if(r===null)return!0;var i=Object.hasOwnProperty.call(r,"constructor")&&r.constructor;return i===Object||typeof i=="function"&&Function.toString.call(i)===Vit}(e)||Array.isArray(e)||!!e[One]||!!(!((t=e.constructor)===null||t===void 0)&&t[One])||AV(e)||kV(e))}function j0(e,t,n){n===void 0&&(n=!1),M_(e)===0?(n?Object.keys:P1)(e).forEach(function(r){n&&typeof r=="symbol"||t(r,e[r],e)}):e.forEach(function(r,i){return t(i,r,e)})}function M_(e){var t=e[Fr];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:AV(e)?2:kV(e)?3:0}function N1(e,t){return M_(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function $it(e,t){return M_(e)===2?e.get(t):e[t]}function Bve(e,t,n){var r=M_(e);r===2?e.set(t,n):r===3?e.add(n):e[t]=n}function Uve(e,t){return e===t?e!==0||1/e==1/t:e!=e&&t!=t}function AV(e){return Uit&&e instanceof Map}function kV(e){return zit&&e instanceof Set}function Pg(e){return e.o||e.t}function IV(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=Vve(e);delete t[Fr];for(var n=P1(t),r=0;r<n.length;r++){var i=n[r],o=t[i];o.writable===!1&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(t[i]={configurable:!0,writable:!0,enumerable:o.enumerable,value:e[i]})}return Object.create(Object.getPrototypeOf(e),t)}function RV(e,t){return t===void 0&&(t=!1),NV(e)||cm(e)||!ah(e)||(M_(e)>1&&(e.set=e.add=e.clear=e.delete=Mit),Object.freeze(e),t&&j0(e,function(n,r){return RV(r,!0)},!0)),e}function Mit(){zl(2)}function NV(e){return e==null||typeof e!="object"||Object.isFrozen(e)}function sf(e){var t=Tj[e];return t||zl(18,e),t}function Lit(e,t){Tj[e]||(Tj[e]=t)}function wj(){return WT}function a6(e,t){t&&(sf("Patches"),e.u=[],e.s=[],e.v=t)}function pN(e){Ej(e),e.p.forEach(Fit),e.p=null}function Ej(e){e===WT&&(WT=e.l)}function kne(e){return WT={p:[],l:WT,h:e,m:!0,_:0}}function Fit(e){var t=e[Fr];t.i===0||t.i===1?t.j():t.g=!0}function u6(e,t){t._=t.p.length;var n=t.p[0],r=e!==void 0&&e!==n;return t.h.O||sf("ES5").S(t,e,r),r?(n[Fr].P&&(pN(t),zl(4)),ah(e)&&(e=mN(t,e),t.l||gN(t,e)),t.u&&sf("Patches").M(n[Fr].t,e,t.u,t.s)):e=mN(t,n,[]),pN(t),t.u&&t.v(t.u,t.s),e!==zve?e:void 0}function mN(e,t,n){if(NV(t))return t;var r=t[Fr];if(!r)return j0(t,function(a,u){return Ine(e,r,t,a,u,n)},!0),t;if(r.A!==e)return t;if(!r.P)return gN(e,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var i=r.i===4||r.i===5?r.o=IV(r.k):r.o,o=i,s=!1;r.i===3&&(o=new Set(i),i.clear(),s=!0),j0(o,function(a,u){return Ine(e,r,i,a,u,n,s)}),gN(e,i,!1),n&&e.u&&sf("Patches").N(r,n,e.u,e.s)}return r.o}function Ine(e,t,n,r,i,o,s){if(cm(i)){var a=mN(e,i,o&&t&&t.i!==3&&!N1(t.R,r)?o.concat(r):void 0);if(Bve(n,r,a),!cm(a))return;e.m=!1}else s&&n.add(i);if(ah(i)&&!NV(i)){if(!e.h.D&&e._<1)return;mN(e,i),t&&t.A.l||gN(e,i)}}function gN(e,t,n){n===void 0&&(n=!1),!e.l&&e.h.D&&e.m&&RV(t,n)}function l6(e,t){var n=e[Fr];return(n?Pg(n):e)[t]}function Rne(e,t){if(t in e)for(var n=Object.getPrototypeOf(e);n;){var r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Object.getPrototypeOf(n)}}function sp(e){e.P||(e.P=!0,e.l&&sp(e.l))}function c6(e){e.o||(e.o=IV(e.t))}function xj(e,t,n){var r=AV(t)?sf("MapSet").F(t,n):kV(t)?sf("MapSet").T(t,n):e.O?function(i,o){var s=Array.isArray(i),a={i:s?1:0,A:o?o.A:wj(),P:!1,I:!1,R:{},l:o,t:i,k:null,o:null,j:null,C:!1},u=a,l=GT;s&&(u=[a],l=OE);var c=Proxy.revocable(u,l),f=c.revoke,d=c.proxy;return a.k=d,a.j=f,d}(t,n):sf("ES5").J(t,n);return(n?n.A:wj()).p.push(r),r}function jit(e){return cm(e)||zl(22,e),function t(n){if(!ah(n))return n;var r,i=n[Fr],o=M_(n);if(i){if(!i.P&&(i.i<4||!sf("ES5").K(i)))return i.t;i.I=!0,r=Nne(n,o),i.I=!1}else r=Nne(n,o);return j0(r,function(s,a){i&&$it(i.t,s)===a||Bve(r,s,t(a))}),o===3?new Set(r):r}(e)}function Nne(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return IV(e)}function Bit(){function e(o,s){var a=i[o];return a?a.enumerable=s:i[o]=a={configurable:!0,enumerable:s,get:function(){var u=this[Fr];return GT.get(u,o)},set:function(u){var l=this[Fr];GT.set(l,o,u)}},a}function t(o){for(var s=o.length-1;s>=0;s--){var a=o[s][Fr];if(!a.P)switch(a.i){case 5:r(a)&&sp(a);break;case 4:n(a)&&sp(a)}}}function n(o){for(var s=o.t,a=o.k,u=P1(a),l=u.length-1;l>=0;l--){var c=u[l];if(c!==Fr){var f=s[c];if(f===void 0&&!N1(s,c))return!0;var d=a[c],h=d&&d[Fr];if(h?h.t!==f:!Uve(d,f))return!0}}var p=!!s[Fr];return u.length!==P1(s).length+(p?0:1)}function r(o){var s=o.k;if(s.length!==o.t.length)return!0;var a=Object.getOwnPropertyDescriptor(s,s.length-1);if(a&&!a.get)return!0;for(var u=0;u<s.length;u++)if(!s.hasOwnProperty(u))return!0;return!1}var i={};Lit("ES5",{J:function(o,s){var a=Array.isArray(o),u=function(c,f){if(c){for(var d=Array(f.length),h=0;h<f.length;h++)Object.defineProperty(d,""+h,e(h,!0));return d}var p=Vve(f);delete p[Fr];for(var m=P1(p),g=0;g<m.length;g++){var y=m[g];p[y]=e(y,c||!!p[y].enumerable)}return Object.create(Object.getPrototypeOf(f),p)}(a,o),l={i:a?5:4,A:s?s.A:wj(),P:!1,I:!1,R:{},l:s,t:o,k:u,o:null,g:!1,C:!1};return Object.defineProperty(u,Fr,{value:l,writable:!0}),u},S:function(o,s,a){a?cm(s)&&s[Fr].A===o&&t(o.p):(o.u&&function u(l){if(l&&typeof l=="object"){var c=l[Fr];if(c){var f=c.t,d=c.k,h=c.R,p=c.i;if(p===4)j0(d,function(_){_!==Fr&&(f[_]!==void 0||N1(f,_)?h[_]||u(d[_]):(h[_]=!0,sp(c)))}),j0(f,function(_){d[_]!==void 0||N1(d,_)||(h[_]=!1,sp(c))});else if(p===5){if(r(c)&&(sp(c),h.length=!0),d.length<f.length)for(var m=d.length;m<f.length;m++)h[m]=!1;else for(var g=f.length;g<d.length;g++)h[g]=!0;for(var y=Math.min(d.length,f.length),v=0;v<y;v++)d.hasOwnProperty(v)||(h[v]=!0),h[v]===void 0&&u(d[v])}}}}(o.p[0]),t(o.p))},K:function(o){return o.i===4?n(o):r(o)}})}var Pne,WT,PV=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",Uit=typeof Map<"u",zit=typeof Set<"u",Dne=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",zve=PV?Symbol.for("immer-nothing"):((Pne={})["immer-nothing"]=!0,Pne),One=PV?Symbol.for("immer-draftable"):"__$immer_draftable",Fr=PV?Symbol.for("immer-state"):"__$immer_state",Vit=""+Object.prototype.constructor,P1=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,Vve=Object.getOwnPropertyDescriptors||function(e){var t={};return P1(e).forEach(function(n){t[n]=Object.getOwnPropertyDescriptor(e,n)}),t},Tj={},GT={get:function(e,t){if(t===Fr)return e;var n=Pg(e);if(!N1(n,t))return function(i,o,s){var a,u=Rne(o,s);return u?"value"in u?u.value:(a=u.get)===null||a===void 0?void 0:a.call(i.k):void 0}(e,n,t);var r=n[t];return e.I||!ah(r)?r:r===l6(e.t,t)?(c6(e),e.o[t]=xj(e.A.h,r,e)):r},has:function(e,t){return t in Pg(e)},ownKeys:function(e){return Reflect.ownKeys(Pg(e))},set:function(e,t,n){var r=Rne(Pg(e),t);if(r!=null&&r.set)return r.set.call(e.k,n),!0;if(!e.P){var i=l6(Pg(e),t),o=i==null?void 0:i[Fr];if(o&&o.t===n)return e.o[t]=n,e.R[t]=!1,!0;if(Uve(n,i)&&(n!==void 0||N1(e.t,t)))return!0;c6(e),sp(e)}return e.o[t]===n&&(n!==void 0||t in e.o)||Number.isNaN(n)&&Number.isNaN(e.o[t])||(e.o[t]=n,e.R[t]=!0),!0},deleteProperty:function(e,t){return l6(e.t,t)!==void 0||t in e.t?(e.R[t]=!1,c6(e),sp(e)):delete e.R[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var n=Pg(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.i!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty:function(){zl(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){zl(12)}},OE={};j0(GT,function(e,t){OE[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),OE.deleteProperty=function(e,t){return OE.set.call(this,e,t,void 0)},OE.set=function(e,t,n){return GT.set.call(this,e[0],t,n,e[0])};var Hit=function(){function e(n){var r=this;this.O=Dne,this.D=!0,this.produce=function(i,o,s){if(typeof i=="function"&&typeof o!="function"){var a=o;o=i;var u=r;return function(m){var g=this;m===void 0&&(m=a);for(var y=arguments.length,v=Array(y>1?y-1:0),_=1;_<y;_++)v[_-1]=arguments[_];return u.produce(m,function(w){var E;return(E=o).call.apply(E,[g,w].concat(v))})}}var l;if(typeof o!="function"&&zl(6),s!==void 0&&typeof s!="function"&&zl(7),ah(i)){var c=kne(r),f=xj(r,i,void 0),d=!0;try{l=o(f),d=!1}finally{d?pN(c):Ej(c)}return typeof Promise<"u"&&l instanceof Promise?l.then(function(m){return a6(c,s),u6(m,c)},function(m){throw pN(c),m}):(a6(c,s),u6(l,c))}if(!i||typeof i!="object"){if((l=o(i))===void 0&&(l=i),l===zve&&(l=void 0),r.D&&RV(l,!0),s){var h=[],p=[];sf("Patches").M(i,l,h,p),s(h,p)}return l}zl(21,i)},this.produceWithPatches=function(i,o){if(typeof i=="function")return function(l){for(var c=arguments.length,f=Array(c>1?c-1:0),d=1;d<c;d++)f[d-1]=arguments[d];return r.produceWithPatches(l,function(h){return i.apply(void 0,[h].concat(f))})};var s,a,u=r.produce(i,o,function(l,c){s=l,a=c});return typeof Promise<"u"&&u instanceof Promise?u.then(function(l){return[l,s,a]}):[u,s,a]},typeof(n==null?void 0:n.useProxies)=="boolean"&&this.setUseProxies(n.useProxies),typeof(n==null?void 0:n.autoFreeze)=="boolean"&&this.setAutoFreeze(n.autoFreeze)}var t=e.prototype;return t.createDraft=function(n){ah(n)||zl(8),cm(n)&&(n=jit(n));var r=kne(this),i=xj(this,n,void 0);return i[Fr].C=!0,Ej(r),i},t.finishDraft=function(n,r){var i=n&&n[Fr],o=i.A;return a6(o,r),u6(void 0,o)},t.setAutoFreeze=function(n){this.D=n},t.setUseProxies=function(n){n&&!Dne&&zl(20),this.O=n},t.applyPatches=function(n,r){var i;for(i=r.length-1;i>=0;i--){var o=r[i];if(o.path.length===0&&o.op==="replace"){n=o.value;break}}i>-1&&(r=r.slice(i+1));var s=sf("Patches").$;return cm(n)?s(n,r):this.produce(n,function(a){return s(a,r)})},e}(),_u=new Hit,qit=_u.produce;_u.produceWithPatches.bind(_u);_u.setAutoFreeze.bind(_u);_u.setUseProxies.bind(_u);_u.applyPatches.bind(_u);_u.createDraft.bind(_u);_u.finishDraft.bind(_u);const Hve=qit;function YT(e){"@babel/helpers - typeof";return YT=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},YT(e)}function Wit(e,t){if(YT(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(YT(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Git(e){var t=Wit(e,"string");return YT(t)=="symbol"?t:t+""}function Yit(e,t,n){return(t=Git(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function $ne(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Mne(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?$ne(Object(n),!0).forEach(function(r){Yit(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$ne(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function os(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var Lne=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),f6=function(){return Math.random().toString(36).substring(7).split("").join(".")},yN={INIT:"@@redux/INIT"+f6(),REPLACE:"@@redux/REPLACE"+f6(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+f6()}};function Kit(e){if(typeof e!="object"||e===null)return!1;for(var t=e;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function qve(e,t,n){var r;if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(os(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(os(1));return n(qve)(e,t)}if(typeof e!="function")throw new Error(os(2));var i=e,o=t,s=[],a=s,u=!1;function l(){a===s&&(a=s.slice())}function c(){if(u)throw new Error(os(3));return o}function f(m){if(typeof m!="function")throw new Error(os(4));if(u)throw new Error(os(5));var g=!0;return l(),a.push(m),function(){if(g){if(u)throw new Error(os(6));g=!1,l();var v=a.indexOf(m);a.splice(v,1),s=null}}}function d(m){if(!Kit(m))throw new Error(os(7));if(typeof m.type>"u")throw new Error(os(8));if(u)throw new Error(os(9));try{u=!0,o=i(o,m)}finally{u=!1}for(var g=s=a,y=0;y<g.length;y++){var v=g[y];v()}return m}function h(m){if(typeof m!="function")throw new Error(os(10));i=m,d({type:yN.REPLACE})}function p(){var m,g=f;return m={subscribe:function(v){if(typeof v!="object"||v===null)throw new Error(os(11));function _(){v.next&&v.next(c())}_();var w=g(_);return{unsubscribe:w}}},m[Lne]=function(){return this},m}return d({type:yN.INIT}),r={dispatch:d,subscribe:f,getState:c,replaceReducer:h},r[Lne]=p,r}function Xit(e){Object.keys(e).forEach(function(t){var n=e[t],r=n(void 0,{type:yN.INIT});if(typeof r>"u")throw new Error(os(12));if(typeof n(void 0,{type:yN.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(os(13))})}function Qit(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++){var i=t[r];typeof e[i]=="function"&&(n[i]=e[i])}var o=Object.keys(n),s;try{Xit(n)}catch(a){s=a}return function(u,l){if(u===void 0&&(u={}),s)throw s;for(var c=!1,f={},d=0;d<o.length;d++){var h=o[d],p=n[h],m=u[h],g=p(m,l);if(typeof g>"u")throw l&&l.type,new Error(os(14));f[h]=g,c=c||g!==m}return c=c||o.length!==Object.keys(u).length,c?f:u}}function vN(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.length===0?function(r){return r}:t.length===1?t[0]:t.reduce(function(r,i){return function(){return r(i.apply(void 0,arguments))}})}function Jit(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(r){return function(){var i=r.apply(void 0,arguments),o=function(){throw new Error(os(15))},s={getState:i.getState,dispatch:function(){return o.apply(void 0,arguments)}},a=t.map(function(u){return u(s)});return o=vN.apply(void 0,a)(i.dispatch),Mne(Mne({},i),{},{dispatch:o})}}}function Wve(e){var t=function(r){var i=r.dispatch,o=r.getState;return function(s){return function(a){return typeof a=="function"?a(i,o,e):s(a)}}};return t}var Sj=Wve();Sj.withExtraArgument=Wve;var Gve=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),gC=function(e,t){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(l){return function(c){return u([l,c])}}function u(l){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(o=l[0]&2?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,o&&(l=[l[0]&2,o.value]),l[0]){case 0:case 1:o=l;break;case 4:return n.label++,{value:l[1],done:!1};case 5:n.label++,i=l[1],l=[0];continue;case 7:l=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(l[0]===6||l[0]===2)){n=0;continue}if(l[0]===3&&(!o||l[1]>o[0]&&l[1]<o[3])){n.label=l[1];break}if(l[0]===6&&n.label<o[1]){n.label=o[1],o=l;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(l);break}o[2]&&n.ops.pop(),n.trys.pop();continue}l=t.call(e,n)}catch(c){l=[6,c],i=0}finally{r=o=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}},B0=function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e},Zit=Object.defineProperty,eot=Object.defineProperties,tot=Object.getOwnPropertyDescriptors,Fne=Object.getOwnPropertySymbols,not=Object.prototype.hasOwnProperty,rot=Object.prototype.propertyIsEnumerable,jne=function(e,t,n){return t in e?Zit(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},Bp=function(e,t){for(var n in t||(t={}))not.call(t,n)&&jne(e,n,t[n]);if(Fne)for(var r=0,i=Fne(t);r<i.length;r++){var n=i[r];rot.call(t,n)&&jne(e,n,t[n])}return e},d6=function(e,t){return eot(e,tot(t))},yC=function(e,t,n){return new Promise(function(r,i){var o=function(u){try{a(n.next(u))}catch(l){i(l)}},s=function(u){try{a(n.throw(u))}catch(l){i(l)}},a=function(u){return u.done?r(u.value):Promise.resolve(u.value).then(o,s)};a((n=n.apply(e,t)).next())})},iot=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?vN:vN.apply(null,arguments)};function Yve(e){if(typeof e!="object"||e===null)return!1;var t=Object.getPrototypeOf(e);if(t===null)return!0;for(var n=t;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return t===n}var oot=function(e){return e&&typeof e.match=="function"};function af(e,t){function n(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];if(t){var o=t.apply(void 0,r);if(!o)throw new Error("prepareAction did not return an object");return Bp(Bp({type:e,payload:o.payload},"meta"in o&&{meta:o.meta}),"error"in o&&{error:o.error})}return{type:e,payload:r[0]}}return n.toString=function(){return""+e},n.type=e,n.match=function(r){return r.type===e},n}function sot(e){return Yve(e)&&"type"in e}var aot=function(e){Gve(t,e);function t(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=e.apply(this,n)||this;return Object.setPrototypeOf(i,t.prototype),i}return Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return e.prototype.concat.apply(this,n)},t.prototype.prepend=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return n.length===1&&Array.isArray(n[0])?new(t.bind.apply(t,B0([void 0],n[0].concat(this)))):new(t.bind.apply(t,B0([void 0],n.concat(this))))},t}(Array),uot=function(e){Gve(t,e);function t(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=e.apply(this,n)||this;return Object.setPrototypeOf(i,t.prototype),i}return Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return e.prototype.concat.apply(this,n)},t.prototype.prepend=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return n.length===1&&Array.isArray(n[0])?new(t.bind.apply(t,B0([void 0],n[0].concat(this)))):new(t.bind.apply(t,B0([void 0],n.concat(this))))},t}(Array);function Cj(e){return ah(e)?Hve(e,function(){}):e}function lot(e){return typeof e=="boolean"}function cot(){return function(t){return fot(t)}}function fot(e){e===void 0&&(e={});var t=e.thunk,n=t===void 0?!0:t;e.immutableCheck,e.serializableCheck,e.actionCreatorCheck;var r=new aot;return n&&(lot(n)?r.push(Sj):r.push(Sj.withExtraArgument(n.extraArgument))),r}var dot=!0;function hot(e){var t=cot(),n=e||{},r=n.reducer,i=r===void 0?void 0:r,o=n.middleware,s=o===void 0?t():o,a=n.devTools,u=a===void 0?!0:a,l=n.preloadedState,c=l===void 0?void 0:l,f=n.enhancers,d=f===void 0?void 0:f,h;if(typeof i=="function")h=i;else if(Yve(i))h=Qit(i);else throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');var p=s;typeof p=="function"&&(p=p(t));var m=Jit.apply(void 0,p),g=vN;u&&(g=iot(Bp({trace:!dot},typeof u=="object"&&u)));var y=new uot(m),v=y;Array.isArray(d)?v=B0([m],d):typeof d=="function"&&(v=d(y));var _=g.apply(void 0,v);return qve(h,c,_)}function Kve(e){var t={},n=[],r,i={addCase:function(o,s){var a=typeof o=="string"?o:o.type;if(!a)throw new Error("`builder.addCase` cannot be called with an empty action type");if(a in t)throw new Error("`builder.addCase` cannot be called with two reducers for the same action type");return t[a]=s,i},addMatcher:function(o,s){return n.push({matcher:o,reducer:s}),i},addDefaultCase:function(o){return r=o,i}};return e(i),[t,n,r]}function pot(e){return typeof e=="function"}function mot(e,t,n,r){n===void 0&&(n=[]);var i=typeof t=="function"?Kve(t):[t,n,r],o=i[0],s=i[1],a=i[2],u;if(pot(e))u=function(){return Cj(e())};else{var l=Cj(e);u=function(){return l}}function c(f,d){f===void 0&&(f=u());var h=B0([o[d.type]],s.filter(function(p){var m=p.matcher;return m(d)}).map(function(p){var m=p.reducer;return m}));return h.filter(function(p){return!!p}).length===0&&(h=[a]),h.reduce(function(p,m){if(m)if(cm(p)){var g=p,y=m(g,d);return y===void 0?p:y}else{if(ah(p))return Hve(p,function(v){return m(v,d)});var y=m(p,d);if(y===void 0){if(p===null)return p;throw Error("A case reducer on a non-draftable value must not return undefined")}return y}return p},f)}return c.getInitialState=u,c}function got(e,t){return e+"/"+t}function yot(e){var t=e.name;if(!t)throw new Error("`name` is a required option for createSlice");typeof process<"u";var n=typeof e.initialState=="function"?e.initialState:Cj(e.initialState),r=e.reducers||{},i=Object.keys(r),o={},s={},a={};i.forEach(function(c){var f=r[c],d=got(t,c),h,p;"reducer"in f?(h=f.reducer,p=f.prepare):h=f,o[c]=h,s[d]=h,a[c]=p?af(d,p):af(d)});function u(){var c=typeof e.extraReducers=="function"?Kve(e.extraReducers):[e.extraReducers],f=c[0],d=f===void 0?{}:f,h=c[1],p=h===void 0?[]:h,m=c[2],g=m===void 0?void 0:m,y=Bp(Bp({},d),s);return mot(n,function(v){for(var _ in y)v.addCase(_,y[_]);for(var w=0,E=p;w<E.length;w++){var S=E[w];v.addMatcher(S.matcher,S.reducer)}g&&v.addDefaultCase(g)})}var l;return{name:t,reducer:function(c,f){return l||(l=u()),l(c,f)},actions:a,caseReducers:o,getInitialState:function(){return l||(l=u()),l.getInitialState()}}}var vot="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",Xve=function(e){e===void 0&&(e=21);for(var t="",n=e;n--;)t+=vot[Math.random()*64|0];return t},bot=["name","message","stack","code"],h6=function(){function e(t,n){this.payload=t,this.meta=n}return e}(),Bne=function(){function e(t,n){this.payload=t,this.meta=n}return e}(),_ot=function(e){if(typeof e=="object"&&e!==null){for(var t={},n=0,r=bot;n<r.length;n++){var i=r[n];typeof e[i]=="string"&&(t[i]=e[i])}return t}return{message:String(e)}};(function(){function e(t,n,r){var i=af(t+"/fulfilled",function(l,c,f,d){return{payload:l,meta:d6(Bp({},d||{}),{arg:f,requestId:c,requestStatus:"fulfilled"})}}),o=af(t+"/pending",function(l,c,f){return{payload:void 0,meta:d6(Bp({},f||{}),{arg:c,requestId:l,requestStatus:"pending"})}}),s=af(t+"/rejected",function(l,c,f,d,h){return{payload:d,error:(r&&r.serializeError||_ot)(l||"Rejected"),meta:d6(Bp({},h||{}),{arg:f,requestId:c,rejectedWithValue:!!d,requestStatus:"rejected",aborted:(l==null?void 0:l.name)==="AbortError",condition:(l==null?void 0:l.name)==="ConditionError"})}}),a=typeof AbortController<"u"?AbortController:function(){function l(){this.signal={aborted:!1,addEventListener:function(){},dispatchEvent:function(){return!1},onabort:function(){},removeEventListener:function(){},reason:void 0,throwIfAborted:function(){}}}return l.prototype.abort=function(){},l}();function u(l){return function(c,f,d){var h=r!=null&&r.idGenerator?r.idGenerator(l):Xve(),p=new a,m;function g(v){m=v,p.abort()}var y=function(){return yC(this,null,function(){var v,_,w,E,S,T,C;return gC(this,function(A){switch(A.label){case 0:return A.trys.push([0,4,,5]),E=(v=r==null?void 0:r.condition)==null?void 0:v.call(r,l,{getState:f,extra:d}),Eot(E)?[4,E]:[3,2];case 1:E=A.sent(),A.label=2;case 2:if(E===!1||p.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};return S=new Promise(function(R,N){return p.signal.addEventListener("abort",function(){return N({name:"AbortError",message:m||"Aborted"})})}),c(o(h,l,(_=r==null?void 0:r.getPendingMeta)==null?void 0:_.call(r,{requestId:h,arg:l},{getState:f,extra:d}))),[4,Promise.race([S,Promise.resolve(n(l,{dispatch:c,getState:f,extra:d,requestId:h,signal:p.signal,abort:g,rejectWithValue:function(R,N){return new h6(R,N)},fulfillWithValue:function(R,N){return new Bne(R,N)}})).then(function(R){if(R instanceof h6)throw R;return R instanceof Bne?i(R.payload,h,l,R.meta):i(R,h,l)})])];case 3:return w=A.sent(),[3,5];case 4:return T=A.sent(),w=T instanceof h6?s(null,h,l,T.payload,T.meta):s(T,h,l),[3,5];case 5:return C=r&&!r.dispatchConditionRejection&&s.match(w)&&w.meta.condition,C||c(w),[2,w]}})})}();return Object.assign(y,{abort:g,requestId:h,arg:l,unwrap:function(){return y.then(wot)}})}}return Object.assign(u,{pending:o,rejected:s,fulfilled:i,typePrefix:t})}return e.withTypes=function(){return e},e})();function wot(e){if(e.meta&&e.meta.rejectedWithValue)throw e.payload;if(e.error)throw e.error;return e.payload}function Eot(e){return e!==null&&typeof e=="object"&&typeof e.then=="function"}var xot=function(e,t){return oot(e)?e.match(t):e(t)};function Une(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(n){return e.some(function(r){return xot(r,n)})}}var DV=function(e,t){if(typeof e!="function")throw new TypeError(t+" is not a function")},Aj=function(){},Qve=function(e,t){return t===void 0&&(t=Aj),e.catch(t),e},Jve=function(e,t){return e.addEventListener("abort",t,{once:!0}),function(){return e.removeEventListener("abort",t)}},D1=function(e,t){var n=e.signal;n.aborted||("reason"in n||Object.defineProperty(n,"reason",{enumerable:!0,value:t,configurable:!0,writable:!0}),e.abort(t))},Tot="task",Zve="listener",e1e="completed",OV="cancelled",Sot="task-"+OV,Cot="task-"+e1e,t1e=Zve+"-"+OV,Aot=Zve+"-"+e1e,NO=function(){function e(t){this.code=t,this.name="TaskAbortError",this.message=Tot+" "+OV+" (reason: "+t+")"}return e}(),O1=function(e){if(e.aborted)throw new NO(e.reason)};function n1e(e,t){var n=Aj;return new Promise(function(r,i){var o=function(){return i(new NO(e.reason))};if(e.aborted){o();return}n=Jve(e,o),t.finally(function(){return n()}).then(r,i)}).finally(function(){n=Aj})}var kot=function(e,t){return yC(void 0,null,function(){var n,r;return gC(this,function(i){switch(i.label){case 0:return i.trys.push([0,3,4,5]),[4,Promise.resolve()];case 1:return i.sent(),[4,e()];case 2:return n=i.sent(),[2,{status:"ok",value:n}];case 3:return r=i.sent(),[2,{status:r instanceof NO?"cancelled":"rejected",error:r}];case 4:return t==null||t(),[7];case 5:return[2]}})})},bN=function(e){return function(t){return Qve(n1e(e,t).then(function(n){return O1(e),n}))}},r1e=function(e){var t=bN(e);return function(n){return t(new Promise(function(r){return setTimeout(r,n)}))}},Iot=Object.assign,zne={},vC="listenerMiddleware",Rot=function(e,t){var n=function(r){return Jve(e,function(){return D1(r,e.reason)})};return function(r,i){DV(r,"taskExecutor");var o=new AbortController;n(o);var s=kot(function(){return yC(void 0,null,function(){var a;return gC(this,function(u){switch(u.label){case 0:return O1(e),O1(o.signal),[4,r({pause:bN(o.signal),delay:r1e(o.signal),signal:o.signal})];case 1:return a=u.sent(),O1(o.signal),[2,a]}})})},function(){return D1(o,Cot)});return i!=null&&i.autoJoin&&t.push(s),{result:bN(e)(s),cancel:function(){D1(o,Sot)}}}},Not=function(e,t){var n=function(r,i){return yC(void 0,null,function(){var o,s,a,u;return gC(this,function(l){switch(l.label){case 0:O1(t),o=function(){},s=new Promise(function(c,f){var d=e({predicate:r,effect:function(h,p){p.unsubscribe(),c([h,p.getState(),p.getOriginalState()])}});o=function(){d(),f()}}),a=[s],i!=null&&a.push(new Promise(function(c){return setTimeout(c,i,null)})),l.label=1;case 1:return l.trys.push([1,,3,4]),[4,n1e(t,Promise.race(a))];case 2:return u=l.sent(),O1(t),[2,u];case 3:return o(),[7];case 4:return[2]}})})};return function(r,i){return Qve(n(r,i))}},i1e=function(e){var t=e.type,n=e.actionCreator,r=e.matcher,i=e.predicate,o=e.effect;if(t)i=af(t).match;else if(n)t=n.type,i=n.match;else if(r)i=r;else if(!i)throw new Error("Creating or removing a listener requires one of the known fields for matching an action");return DV(o,"options.listener"),{predicate:i,type:t,effect:o}},Pot=function(e){var t=i1e(e),n=t.type,r=t.predicate,i=t.effect,o=Xve(),s={id:o,effect:i,type:n,predicate:r,pending:new Set,unsubscribe:function(){throw new Error("Unsubscribe not initialized")}};return s},kj=function(e){e.pending.forEach(function(t){D1(t,t1e)})},Dot=function(e){return function(){e.forEach(kj),e.clear()}},Vne=function(e,t,n){try{e(t,n)}catch(r){setTimeout(function(){throw r},0)}},Oot=af(vC+"/add"),$ot=af(vC+"/removeAll"),Mot=af(vC+"/remove"),Lot=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];console.error.apply(console,B0([vC+"/error"],e))};function Fot(e){var t=this;e===void 0&&(e={});var n=new Map,r=e.extra,i=e.onError,o=i===void 0?Lot:i;DV(o,"onError");var s=function(h){return h.unsubscribe=function(){return n.delete(h.id)},n.set(h.id,h),function(p){h.unsubscribe(),p!=null&&p.cancelActive&&kj(h)}},a=function(h){for(var p=0,m=Array.from(n.values());p<m.length;p++){var g=m[p];if(h(g))return g}},u=function(h){var p=a(function(m){return m.effect===h.effect});return p||(p=Pot(h)),s(p)},l=function(h){var p=i1e(h),m=p.type,g=p.effect,y=p.predicate,v=a(function(_){var w=typeof m=="string"?_.type===m:_.predicate===y;return w&&_.effect===g});return v&&(v.unsubscribe(),h.cancelActive&&kj(v)),!!v},c=function(h,p,m,g){return yC(t,null,function(){var y,v,_,w;return gC(this,function(E){switch(E.label){case 0:y=new AbortController,v=Not(u,y.signal),_=[],E.label=1;case 1:return E.trys.push([1,3,4,6]),h.pending.add(y),[4,Promise.resolve(h.effect(p,Iot({},m,{getOriginalState:g,condition:function(S,T){return v(S,T).then(Boolean)},take:v,delay:r1e(y.signal),pause:bN(y.signal),extra:r,signal:y.signal,fork:Rot(y.signal,_),unsubscribe:h.unsubscribe,subscribe:function(){n.set(h.id,h)},cancelActiveListeners:function(){h.pending.forEach(function(S,T,C){S!==y&&(D1(S,t1e),C.delete(S))})}})))];case 2:return E.sent(),[3,6];case 3:return w=E.sent(),w instanceof NO||Vne(o,w,{raisedBy:"effect"}),[3,6];case 4:return[4,Promise.allSettled(_)];case 5:return E.sent(),D1(y,Aot),h.pending.delete(y),[7];case 6:return[2]}})})},f=Dot(n),d=function(h){return function(p){return function(m){if(!sot(m))return p(m);if(Oot.match(m))return u(m.payload);if($ot.match(m)){f();return}if(Mot.match(m))return l(m.payload);var g=h.getState(),y=function(){if(g===zne)throw new Error(vC+": getOriginalState can only be called synchronously");return g},v;try{if(v=p(m),n.size>0)for(var _=h.getState(),w=Array.from(n.values()),E=0,S=w;E<S.length;E++){var T=S[E],C=!1;try{C=T.predicate(m,_,g)}catch(A){C=!1,Vne(o,A,{raisedBy:"predicate"})}C&&c(T,m,h,y)}}finally{g=zne}return v}}};return{middleware:d,startListening:u,stopListening:l,clearListeners:f}}var Hne;typeof queueMicrotask=="function"&&queueMicrotask.bind(typeof window<"u"?window:typeof global<"u"?global:globalThis);Bit();function jot(){const e=new Map;return{listen(t,n){return e.has(t)||e.set(t,[]),e.get(t).push(n),()=>{e.set(t,(e.get(t)||[]).filter(r=>r!==n))}},fire(t,n){const r=e.get(t);r&&r.forEach(i=>i(n))}}}let C2;const Bot=new Uint8Array(16);function Uot(){if(!C2&&(C2=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!C2))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return C2(Bot)}const xo=[];for(let e=0;e<256;++e)xo.push((e+256).toString(16).slice(1));function zot(e,t=0){return(xo[e[t+0]]+xo[e[t+1]]+xo[e[t+2]]+xo[e[t+3]]+"-"+xo[e[t+4]]+xo[e[t+5]]+"-"+xo[e[t+6]]+xo[e[t+7]]+"-"+xo[e[t+8]]+xo[e[t+9]]+"-"+xo[e[t+10]]+xo[e[t+11]]+xo[e[t+12]]+xo[e[t+13]]+xo[e[t+14]]+xo[e[t+15]]).toLowerCase()}const Vot=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),qne={randomUUID:Vot};function Wne(e,t,n){if(qne.randomUUID&&!t&&!e)return qne.randomUUID();e=e||{};const r=e.random||(e.rng||Uot)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,zot(r)}class uf{static get(){let t=Wne();for(;this.ids.has(t);)t=Wne();return this.ids.set(t,!0),t}}uf.ids=new Map;function lf(e){return"parent"in e}function Hot(e){const{label:t=void 0,state:n,initialArtifact:r,initialMetadata:i}=e,o={annotation:[],bookmark:[]},s=Object.keys(i||{}).reduce((u,l)=>(u[l]=[],i&&i[l]&&u[l].push({type:l,id:uf.get(),val:i[l],createdOn:Date.now()}),u),o),a=r?[{id:uf.get(),createdOn:Date.now(),val:r}]:[];return{id:uf.get(),label:t||"Root",event:"Root",children:[],level:0,createdOn:Date.now(),meta:s,artifacts:a,state:{type:"checkpoint",val:n}}}function qot({parent:e,state:t,label:n,sideEffects:r={do:[],undo:[]},initialMetadata:i,initialArtifact:o,event:s}){const a={annotation:[],bookmark:[]},u=Object.keys(i||{}).reduce((c,f)=>(c[f]=[],i&&i[f]&&c[f].push({type:f,id:uf.get(),val:i[f],createdOn:Date.now()}),c),a),l=o?[{id:uf.get(),createdOn:Date.now(),val:o}]:[];return{id:uf.get(),label:n,event:s,children:[],parent:e.id,createdOn:Date.now(),meta:u,artifacts:l,sideEffects:r,state:t,level:e.level+1}}function si(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if({}.NODE_ENV!=="production"){var i=est[e],o=i?typeof i=="function"?i.apply(null,n):i:"unknown error nr: "+e;throw Error("[Immer] "+o)}throw Error("[Immer] minified error nr: "+e+(n.length?" "+n.map(function(s){return"'"+s+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function U0(e){return!!e&&!!e[wu]}function fm(e){var t;return!!e&&(function(n){if(!n||typeof n!="object")return!1;var r=Object.getPrototypeOf(n);if(r===null)return!0;var i=Object.hasOwnProperty.call(r,"constructor")&&r.constructor;return i===Object||typeof i=="function"&&Function.toString.call(i)===tst}(e)||Array.isArray(e)||!!e[Ix]||!!(!((t=e.constructor)===null||t===void 0)&&t[Ix])||PO(e)||DO(e))}function Tb(e,t,n){n===void 0&&(n=!1),dm(e)===0?(n?Object.keys:BV)(e).forEach(function(r){n&&typeof r=="symbol"||t(r,e[r],e)}):e.forEach(function(r,i){return t(i,r,e)})}function dm(e){var t=e[wu];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:PO(e)?2:DO(e)?3:0}function KT(e,t){return dm(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function qk(e,t){return dm(e)===2?e.get(t):e[t]}function o1e(e,t,n){var r=dm(e);r===2?e.set(t,n):r===3?(e.delete(t),e.add(n)):e[t]=n}function Wot(e,t){return e===t?e!==0||1/e==1/t:e!=e&&t!=t}function PO(e){return Jot&&e instanceof Map}function DO(e){return Zot&&e instanceof Set}function Dg(e){return e.o||e.t}function $V(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=nst(e);delete t[wu];for(var n=BV(t),r=0;r<n.length;r++){var i=n[r],o=t[i];o.writable===!1&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(t[i]={configurable:!0,writable:!0,enumerable:o.enumerable,value:e[i]})}return Object.create(Object.getPrototypeOf(e),t)}function MV(e,t){return t===void 0&&(t=!1),LV(e)||U0(e)||!fm(e)||(dm(e)>1&&(e.set=e.add=e.clear=e.delete=Got),Object.freeze(e),t&&Tb(e,function(n,r){return MV(r,!0)},!0)),e}function Got(){si(2)}function LV(e){return e==null||typeof e!="object"||Object.isFrozen(e)}function cf(e){var t=Pj[e];return t||si(18,e),t}function Yot(e,t){Pj[e]||(Pj[e]=t)}function Gne(){return{}.NODE_ENV==="production"||Sb||si(0),Sb}function p6(e,t){t&&(cf("Patches"),e.u=[],e.s=[],e.v=t)}function _N(e){Ij(e),e.p.forEach(Kot),e.p=null}function Ij(e){e===Sb&&(Sb=e.l)}function Yne(e){return Sb={p:[],l:Sb,h:e,m:!0,_:0}}function Kot(e){var t=e[wu];t.i===0||t.i===1?t.j():t.O=!0}function m6(e,t){t._=t.p.length;var n=t.p[0],r=e!==void 0&&e!==n;return t.h.g||cf("ES5").S(t,e,r),r?(n[wu].P&&(_N(t),si(4)),fm(e)&&(e=wN(t,e),t.l||EN(t,e)),t.u&&cf("Patches").M(n[wu].t,e,t.u,t.s)):e=wN(t,n,[]),_N(t),t.u&&t.v(t.u,t.s),e!==jV?e:void 0}function wN(e,t,n){if(LV(t))return t;var r=t[wu];if(!r)return Tb(t,function(o,s){return Kne(e,r,t,o,s,n)},!0),t;if(r.A!==e)return t;if(!r.P)return EN(e,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var i=r.i===4||r.i===5?r.o=$V(r.k):r.o;Tb(r.i===3?new Set(i):i,function(o,s){return Kne(e,r,i,o,s,n)}),EN(e,i,!1),n&&e.u&&cf("Patches").R(r,n,e.u,e.s)}return r.o}function Kne(e,t,n,r,i,o){if({}.NODE_ENV!=="production"&&i===n&&si(5),U0(i)){var s=wN(e,i,o&&t&&t.i!==3&&!KT(t.D,r)?o.concat(r):void 0);if(o1e(n,r,s),!U0(s))return;e.m=!1}if(fm(i)&&!LV(i)){if(!e.h.F&&e._<1)return;wN(e,i),t&&t.A.l||EN(e,i)}}function EN(e,t,n){n===void 0&&(n=!1),e.h.F&&e.m&&MV(t,n)}function g6(e,t){var n=e[wu];return(n?Dg(n):e)[t]}function Xne(e,t){if(t in e)for(var n=Object.getPrototypeOf(e);n;){var r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Object.getPrototypeOf(n)}}function Rj(e){e.P||(e.P=!0,e.l&&Rj(e.l))}function y6(e){e.o||(e.o=$V(e.t))}function Nj(e,t,n){var r=PO(t)?cf("MapSet").N(t,n):DO(t)?cf("MapSet").T(t,n):e.g?function(i,o){var s=Array.isArray(i),a={i:s?1:0,A:o?o.A:Gne(),P:!1,I:!1,D:{},l:o,t:i,k:null,o:null,j:null,C:!1},u=a,l=Dj;s&&(u=[a],l=$E);var c=Proxy.revocable(u,l),f=c.revoke,d=c.proxy;return a.k=d,a.j=f,d}(t,n):cf("ES5").J(t,n);return(n?n.A:Gne()).p.push(r),r}function Xot(e){return U0(e)||si(22,e),function t(n){if(!fm(n))return n;var r,i=n[wu],o=dm(n);if(i){if(!i.P&&(i.i<4||!cf("ES5").K(i)))return i.t;i.I=!0,r=Qne(n,o),i.I=!1}else r=Qne(n,o);return Tb(r,function(s,a){i&&qk(i.t,s)===a||o1e(r,s,t(a))}),o===3?new Set(r):r}(e)}function Qne(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return $V(e)}function Qot(){function e(r){if(!fm(r))return r;if(Array.isArray(r))return r.map(e);if(PO(r))return new Map(Array.from(r.entries()).map(function(s){return[s[0],e(s[1])]}));if(DO(r))return new Set(Array.from(r).map(e));var i=Object.create(Object.getPrototypeOf(r));for(var o in r)i[o]=e(r[o]);return KT(r,Ix)&&(i[Ix]=r[Ix]),i}function t(r){return U0(r)?e(r):r}var n="add";Yot("Patches",{$:function(r,i){return i.forEach(function(o){for(var s=o.path,a=o.op,u=r,l=0;l<s.length-1;l++){var c=dm(u),f=""+s[l];c!==0&&c!==1||f!=="__proto__"&&f!=="constructor"||si(24),typeof u=="function"&&f==="prototype"&&si(24),typeof(u=qk(u,f))!="object"&&si(15,s.join("/"))}var d=dm(u),h=e(o.value),p=s[s.length-1];switch(a){case"replace":switch(d){case 2:return u.set(p,h);case 3:si(16);default:return u[p]=h}case n:switch(d){case 1:return p==="-"?u.push(h):u.splice(p,0,h);case 2:return u.set(p,h);case 3:return u.add(h);default:return u[p]=h}case"remove":switch(d){case 1:return u.splice(p,1);case 2:return u.delete(p);case 3:return u.delete(o.value);default:return delete u[p]}default:si(17,a)}}),r},R:function(r,i,o,s){switch(r.i){case 0:case 4:case 2:return function(a,u,l,c){var f=a.t,d=a.o;Tb(a.D,function(h,p){var m=qk(f,h),g=qk(d,h),y=p?KT(f,h)?"replace":n:"remove";if(m!==g||y!=="replace"){var v=u.concat(h);l.push(y==="remove"?{op:y,path:v}:{op:y,path:v,value:g}),c.push(y===n?{op:"remove",path:v}:y==="remove"?{op:n,path:v,value:t(m)}:{op:"replace",path:v,value:t(m)})}})}(r,i,o,s);case 5:case 1:return function(a,u,l,c){var f=a.t,d=a.D,h=a.o;if(h.length<f.length){var p=[h,f];f=p[0],h=p[1];var m=[c,l];l=m[0],c=m[1]}for(var g=0;g<f.length;g++)if(d[g]&&h[g]!==f[g]){var y=u.concat([g]);l.push({op:"replace",path:y,value:t(h[g])}),c.push({op:"replace",path:y,value:t(f[g])})}for(var v=f.length;v<h.length;v++){var _=u.concat([v]);l.push({op:n,path:_,value:t(h[v])})}f.length<h.length&&c.push({op:"replace",path:u.concat(["length"]),value:f.length})}(r,i,o,s);case 3:return function(a,u,l,c){var f=a.t,d=a.o,h=0;f.forEach(function(p){if(!d.has(p)){var m=u.concat([h]);l.push({op:"remove",path:m,value:p}),c.unshift({op:n,path:m,value:p})}h++}),h=0,d.forEach(function(p){if(!f.has(p)){var m=u.concat([h]);l.push({op:n,path:m,value:p}),c.unshift({op:"remove",path:m,value:p})}h++})}(r,i,o,s)}},M:function(r,i,o,s){o.push({op:"replace",path:[],value:i===jV?void 0:i}),s.push({op:"replace",path:[],value:r})}})}var Jne,Sb,FV=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",Jot=typeof Map<"u",Zot=typeof Set<"u",Zne=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",jV=FV?Symbol.for("immer-nothing"):((Jne={})["immer-nothing"]=!0,Jne),Ix=FV?Symbol.for("immer-draftable"):"__$immer_draftable",wu=FV?Symbol.for("immer-state"):"__$immer_state",est={0:"Illegal state",1:"Immer drafts cannot have computed properties",2:"This object has been frozen and should not be mutated",3:function(e){return"Cannot use a proxy that has been revoked. Did you pass an object from inside an immer function to an async process? "+e},4:"An immer producer returned a new value *and* modified its draft. Either return a new value *or* modify the draft.",5:"Immer forbids circular references",6:"The first or second argument to `produce` must be a function",7:"The third argument to `produce` must be a function or undefined",8:"First argument to `createDraft` must be a plain object, an array, or an immerable object",9:"First argument to `finishDraft` must be a draft returned by `createDraft`",10:"The given draft is already finalized",11:"Object.defineProperty() cannot be used on an Immer draft",12:"Object.setPrototypeOf() cannot be used on an Immer draft",13:"Immer only supports deleting array indices",14:"Immer only supports setting array indices and the 'length' property",15:function(e){return"Cannot apply patch, path doesn't resolve: "+e},16:'Sets cannot have "replace" patches.',17:function(e){return"Unsupported patch operation: "+e},18:function(e){return"The plugin for '"+e+"' has not been loaded into Immer. To enable the plugin, import and call `enable"+e+"()` when initializing your application."},20:"Cannot use proxies if Proxy, Proxy.revocable or Reflect are not available",21:function(e){return"produce can only be called on things that are draftable: plain objects, arrays, Map, Set or classes that are marked with '[immerable]: true'. Got '"+e+"'"},22:function(e){return"'current' expects a draft, got: "+e},23:function(e){return"'original' expects a draft, got: "+e},24:"Patching reserved attributes like __proto__, prototype and constructor is not allowed"},tst=""+Object.prototype.constructor,BV=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,nst=Object.getOwnPropertyDescriptors||function(e){var t={};return BV(e).forEach(function(n){t[n]=Object.getOwnPropertyDescriptor(e,n)}),t},Pj={},Dj={get:function(e,t){if(t===wu)return e;var n=Dg(e);if(!KT(n,t))return function(i,o,s){var a,u=Xne(o,s);return u?"value"in u?u.value:(a=u.get)===null||a===void 0?void 0:a.call(i.k):void 0}(e,n,t);var r=n[t];return e.I||!fm(r)?r:r===g6(e.t,t)?(y6(e),e.o[t]=Nj(e.A.h,r,e)):r},has:function(e,t){return t in Dg(e)},ownKeys:function(e){return Reflect.ownKeys(Dg(e))},set:function(e,t,n){var r=Xne(Dg(e),t);if(r!=null&&r.set)return r.set.call(e.k,n),!0;if(!e.P){var i=g6(Dg(e),t),o=i==null?void 0:i[wu];if(o&&o.t===n)return e.o[t]=n,e.D[t]=!1,!0;if(Wot(n,i)&&(n!==void 0||KT(e.t,t)))return!0;y6(e),Rj(e)}return e.o[t]===n&&typeof n!="number"&&(n!==void 0||t in e.o)||(e.o[t]=n,e.D[t]=!0,!0)},deleteProperty:function(e,t){return g6(e.t,t)!==void 0||t in e.t?(e.D[t]=!1,y6(e),Rj(e)):delete e.D[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var n=Dg(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.i!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty:function(){si(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){si(12)}},$E={};Tb(Dj,function(e,t){$E[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),$E.deleteProperty=function(e,t){return{}.NODE_ENV!=="production"&&isNaN(parseInt(t))&&si(13),$E.set.call(this,e,t,void 0)},$E.set=function(e,t,n){return{}.NODE_ENV!=="production"&&t!=="length"&&isNaN(parseInt(t))&&si(14),Dj.set.call(this,e[0],t,n,e[0])};var rst=function(){function e(n){var r=this;this.g=Zne,this.F=!0,this.produce=function(i,o,s){if(typeof i=="function"&&typeof o!="function"){var a=o;o=i;var u=r;return function(m){var g=this;m===void 0&&(m=a);for(var y=arguments.length,v=Array(y>1?y-1:0),_=1;_<y;_++)v[_-1]=arguments[_];return u.produce(m,function(w){var E;return(E=o).call.apply(E,[g,w].concat(v))})}}var l;if(typeof o!="function"&&si(6),s!==void 0&&typeof s!="function"&&si(7),fm(i)){var c=Yne(r),f=Nj(r,i,void 0),d=!0;try{l=o(f),d=!1}finally{d?_N(c):Ij(c)}return typeof Promise<"u"&&l instanceof Promise?l.then(function(m){return p6(c,s),m6(m,c)},function(m){throw _N(c),m}):(p6(c,s),m6(l,c))}if(!i||typeof i!="object"){if((l=o(i))===void 0&&(l=i),l===jV&&(l=void 0),r.F&&MV(l,!0),s){var h=[],p=[];cf("Patches").M(i,l,h,p),s(h,p)}return l}si(21,i)},this.produceWithPatches=function(i,o){if(typeof i=="function")return function(l){for(var c=arguments.length,f=Array(c>1?c-1:0),d=1;d<c;d++)f[d-1]=arguments[d];return r.produceWithPatches(l,function(h){return i.apply(void 0,[h].concat(f))})};var s,a,u=r.produce(i,o,function(l,c){s=l,a=c});return typeof Promise<"u"&&u instanceof Promise?u.then(function(l){return[l,s,a]}):[u,s,a]},typeof(n==null?void 0:n.useProxies)=="boolean"&&this.setUseProxies(n.useProxies),typeof(n==null?void 0:n.autoFreeze)=="boolean"&&this.setAutoFreeze(n.autoFreeze)}var t=e.prototype;return t.createDraft=function(n){fm(n)||si(8),U0(n)&&(n=Xot(n));var r=Yne(this),i=Nj(this,n,void 0);return i[wu].C=!0,Ij(r),i},t.finishDraft=function(n,r){var i=n&&n[wu];({}).NODE_ENV!=="production"&&(i&&i.C||si(9),i.I&&si(10));var o=i.A;return p6(o,r),m6(void 0,o)},t.setAutoFreeze=function(n){this.F=n},t.setUseProxies=function(n){n&&!Zne&&si(20),this.g=n},t.applyPatches=function(n,r){var i;for(i=r.length-1;i>=0;i--){var o=r[i];if(o.path.length===0&&o.op==="replace"){n=o.value;break}}i>-1&&(r=r.slice(i+1));var s=cf("Patches").$;return U0(n)?s(n,r):this.produce(n,function(a){return s(a,r)})},e}(),Eu=new rst,ist=Eu.produce;Eu.produceWithPatches.bind(Eu);Eu.setAutoFreeze.bind(Eu);Eu.setUseProxies.bind(Eu);Eu.applyPatches.bind(Eu);Eu.createDraft.bind(Eu);Eu.finishDraft.bind(Eu);function ost(e,t={}){const{artifact:n=void 0,metadata:r=void 0,rootLabel:i="Root"}=t,o=Hot({state:e,label:i,initialArtifact:n,initialMetadata:r}),s={nodes:{[o.id]:o},root:o.id,current:o.id};return yot({name:"provenance-graph",initialState:s,reducers:{addMetadata(a,u){const{id:l,meta:c}=u.payload,f=a.nodes[l].meta,d=Object.keys(c).reduce((h,p)=>(h[p]||(h[p]=[]),h[p].push({type:p,id:uf.get(),val:c[p],createdOn:Date.now()}),h),f);a.nodes[u.payload.id].meta=d},addArtifact(a,u){a.nodes[u.payload.id].artifacts.push({id:uf.get(),createdOn:Date.now(),val:u.payload.artifact})},changeCurrent(a,u){a.current=u.payload},addNode(a,{payload:u}){a.nodes[u.id]=u,a.nodes[u.parent].children.push(u.id),a.current=u.id},load(a,{payload:u}){return u}}})}function sst(e){const t=new Map,{reducer:n,actions:r,getInitialState:i}=ost(e),o=Fot();o.startListening({matcher:Une(r.changeCurrent,r.addNode),effect:(a,u)=>{u.cancelActiveListeners(),t.forEach(l=>{const c=Une(r.addNode)(a),{skipOnNew:f}=l.config;f&&c||l.func(c?"new":"traversal")})}});const s=hot({reducer:n,middleware:a=>a().prepend(o.middleware)});return{initialState:i(),get backend(){return s.getState()},get current(){return s.getState().nodes[s.getState().current]},get root(){return s.getState().nodes[s.getState().root]},currentChange(a,u){const l={id:uf.get(),func:a,config:u};return t.set(l.id,l),()=>t.delete(l.id)},update:s.dispatch,...r}}/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2022 Joachim Wester
 * MIT licensed
 */var ast=globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},e(t,n)};return function(t,n){e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),ust=Object.prototype.hasOwnProperty;function Oj(e,t){return ust.call(e,t)}function $j(e){if(Array.isArray(e)){for(var t=new Array(e.length),n=0;n<t.length;n++)t[n]=""+n;return t}if(Object.keys)return Object.keys(e);var r=[];for(var i in e)Oj(e,i)&&r.push(i);return r}function Ta(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}}function Mj(e){for(var t=0,n=e.length,r;t<n;){if(r=e.charCodeAt(t),r>=48&&r<=57){t++;continue}return!1}return!0}function Og(e){return e.indexOf("/")===-1&&e.indexOf("~")===-1?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function s1e(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function Lj(e){if(e===void 0)return!0;if(e){if(Array.isArray(e)){for(var t=0,n=e.length;t<n;t++)if(Lj(e[t]))return!0}else if(typeof e=="object"){for(var r=$j(e),i=r.length,o=0;o<i;o++)if(Lj(e[r[o]]))return!0}}return!1}function ere(e,t){var n=[e];for(var r in t){var i=typeof t[r]=="object"?JSON.stringify(t[r],null,2):t[r];typeof i<"u"&&n.push(r+": "+i)}return n.join(`
`)}var a1e=function(e){ast(t,e);function t(n,r,i,o,s){var a=this.constructor,u=e.call(this,ere(n,{name:r,index:i,operation:o,tree:s}))||this;return u.name=r,u.index=i,u.operation=o,u.tree=s,Object.setPrototypeOf(u,a.prototype),u.message=ere(n,{name:r,index:i,operation:o,tree:s}),u}return t}(Error),ri=a1e,lst=Ta,u1={add:function(e,t,n){return e[t]=this.value,{newDocument:n}},remove:function(e,t,n){var r=e[t];return delete e[t],{newDocument:n,removed:r}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:function(e,t,n){var r=xN(n,this.path);r&&(r=Ta(r));var i=p0(n,{op:"remove",path:this.from}).removed;return p0(n,{op:"add",path:this.path,value:i}),{newDocument:n,removed:r}},copy:function(e,t,n){var r=xN(n,this.from);return p0(n,{op:"add",path:this.path,value:Ta(r)}),{newDocument:n}},test:function(e,t,n){return{newDocument:n,test:XT(e[t],this.value)}},_get:function(e,t,n){return this.value=e[t],{newDocument:n}}},cst={add:function(e,t,n){return Mj(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:n,index:t}},remove:function(e,t,n){var r=e.splice(t,1);return{newDocument:n,removed:r[0]}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:u1.move,copy:u1.copy,test:u1.test,_get:u1._get};function xN(e,t){if(t=="")return e;var n={op:"_get",path:t};return p0(e,n),n.value}function p0(e,t,n,r,i,o){if(n===void 0&&(n=!1),r===void 0&&(r=!0),i===void 0&&(i=!0),o===void 0&&(o=0),n&&(typeof n=="function"?n(t,0,e,t.path):TN(t,0)),t.path===""){var s={newDocument:e};if(t.op==="add")return s.newDocument=t.value,s;if(t.op==="replace")return s.newDocument=t.value,s.removed=e,s;if(t.op==="move"||t.op==="copy")return s.newDocument=xN(e,t.from),t.op==="move"&&(s.removed=e),s;if(t.op==="test"){if(s.test=XT(e,t.value),s.test===!1)throw new ri("Test operation failed","TEST_OPERATION_FAILED",o,t,e);return s.newDocument=e,s}else{if(t.op==="remove")return s.removed=e,s.newDocument=null,s;if(t.op==="_get")return t.value=e,s;if(n)throw new ri("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",o,t,e);return s}}else{r||(e=Ta(e));var a=t.path||"",u=a.split("/"),l=e,c=1,f=u.length,d=void 0,h=void 0,p=void 0;for(typeof n=="function"?p=n:p=TN;;){if(h=u[c],h&&h.indexOf("~")!=-1&&(h=s1e(h)),i&&(h=="__proto__"||h=="prototype"&&c>0&&u[c-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&d===void 0&&(l[h]===void 0?d=u.slice(0,c).join("/"):c==f-1&&(d=t.path),d!==void 0&&p(t,0,e,d)),c++,Array.isArray(l)){if(h==="-")h=l.length;else{if(n&&!Mj(h))throw new ri("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",o,t,e);Mj(h)&&(h=~~h)}if(c>=f){if(n&&t.op==="add"&&h>l.length)throw new ri("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",o,t,e);var s=cst[t.op].call(t,l,h,e);if(s.test===!1)throw new ri("Test operation failed","TEST_OPERATION_FAILED",o,t,e);return s}}else if(c>=f){var s=u1[t.op].call(t,l,h,e);if(s.test===!1)throw new ri("Test operation failed","TEST_OPERATION_FAILED",o,t,e);return s}if(l=l[h],n&&c<f&&(!l||typeof l!="object"))throw new ri("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",o,t,e)}}}function OO(e,t,n,r,i){if(r===void 0&&(r=!0),i===void 0&&(i=!0),n&&!Array.isArray(t))throw new ri("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");r||(e=Ta(e));for(var o=new Array(t.length),s=0,a=t.length;s<a;s++)o[s]=p0(e,t[s],n,!0,i,s),e=o[s].newDocument;return o.newDocument=e,o}function fst(e,t,n){var r=p0(e,t);if(r.test===!1)throw new ri("Test operation failed","TEST_OPERATION_FAILED",n,t,e);return r.newDocument}function TN(e,t,n,r){if(typeof e!="object"||e===null||Array.isArray(e))throw new ri("Operation is not an object","OPERATION_NOT_AN_OBJECT",t,e,n);if(u1[e.op]){if(typeof e.path!="string")throw new ri("Operation `path` property is not a string","OPERATION_PATH_INVALID",t,e,n);if(e.path.indexOf("/")!==0&&e.path.length>0)throw new ri('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",t,e,n);if((e.op==="move"||e.op==="copy")&&typeof e.from!="string")throw new ri("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&e.value===void 0)throw new ri("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&Lj(e.value))throw new ri("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",t,e,n);if(n){if(e.op=="add"){var i=e.path.split("/").length,o=r.split("/").length;if(i!==o+1&&i!==o)throw new ri("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",t,e,n)}else if(e.op==="replace"||e.op==="remove"||e.op==="_get"){if(e.path!==r)throw new ri("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",t,e,n)}else if(e.op==="move"||e.op==="copy"){var s={op:"_get",path:e.from,value:void 0},a=u1e([s],n);if(a&&a.name==="OPERATION_PATH_UNRESOLVABLE")throw new ri("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",t,e,n)}}}else throw new ri("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",t,e,n)}function u1e(e,t,n){try{if(!Array.isArray(e))throw new ri("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)OO(Ta(t),Ta(e),n||!0);else{n=n||TN;for(var r=0;r<e.length;r++)n(e[r],r,t,void 0)}}catch(i){if(i instanceof ri)return i;throw i}}function XT(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){var n=Array.isArray(e),r=Array.isArray(t),i,o,s;if(n&&r){if(o=e.length,o!=t.length)return!1;for(i=o;i--!==0;)if(!XT(e[i],t[i]))return!1;return!0}if(n!=r)return!1;var a=Object.keys(e);if(o=a.length,o!==Object.keys(t).length)return!1;for(i=o;i--!==0;)if(!t.hasOwnProperty(a[i]))return!1;for(i=o;i--!==0;)if(s=a[i],!XT(e[s],t[s]))return!1;return!0}return e!==e&&t!==t}const dst=Object.freeze(Object.defineProperty({__proto__:null,JsonPatchError:ri,_areEquals:XT,applyOperation:p0,applyPatch:OO,applyReducer:fst,deepClone:lst,getValueByPointer:xN,validate:u1e,validator:TN},Symbol.toStringTag,{value:"Module"}));/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2021 Joachim Wester
 * MIT license
 */var UV=new WeakMap,hst=function(){function e(t){this.observers=new Map,this.obj=t}return e}(),pst=function(){function e(t,n){this.callback=t,this.observer=n}return e}();function mst(e){return UV.get(e)}function gst(e,t){return e.observers.get(t)}function yst(e,t){e.observers.delete(t.callback)}function vst(e,t){t.unobserve()}function bst(e,t){var n=[],r,i=mst(e);if(!i)i=new hst(e),UV.set(e,i);else{var o=gst(i,t);r=o&&o.observer}if(r)return r;if(r={},i.value=Ta(e),t){r.callback=t,r.next=null;var s=function(){Fj(r)},a=function(){clearTimeout(r.next),r.next=setTimeout(s)};typeof window<"u"&&(window.addEventListener("mouseup",a),window.addEventListener("keyup",a),window.addEventListener("mousedown",a),window.addEventListener("keydown",a),window.addEventListener("change",a))}return r.patches=n,r.object=e,r.unobserve=function(){Fj(r),clearTimeout(r.next),yst(i,r),typeof window<"u"&&(window.removeEventListener("mouseup",a),window.removeEventListener("keyup",a),window.removeEventListener("mousedown",a),window.removeEventListener("keydown",a),window.removeEventListener("change",a))},i.observers.set(t,new pst(t,r)),r}function Fj(e,t){t===void 0&&(t=!1);var n=UV.get(e.object);zV(n.value,e.object,e.patches,"",t),e.patches.length&&OO(n.value,e.patches);var r=e.patches;return r.length>0&&(e.patches=[],e.callback&&e.callback(r)),r}function zV(e,t,n,r,i){if(t!==e){typeof t.toJSON=="function"&&(t=t.toJSON());for(var o=$j(t),s=$j(e),a=!1,u=s.length-1;u>=0;u--){var l=s[u],c=e[l];if(Oj(t,l)&&!(t[l]===void 0&&c!==void 0&&Array.isArray(t)===!1)){var f=t[l];typeof c=="object"&&c!=null&&typeof f=="object"&&f!=null&&Array.isArray(c)===Array.isArray(f)?zV(c,f,n,r+"/"+Og(l),i):c!==f&&(i&&n.push({op:"test",path:r+"/"+Og(l),value:Ta(c)}),n.push({op:"replace",path:r+"/"+Og(l),value:Ta(f)}))}else Array.isArray(e)===Array.isArray(t)?(i&&n.push({op:"test",path:r+"/"+Og(l),value:Ta(c)}),n.push({op:"remove",path:r+"/"+Og(l)}),a=!0):(i&&n.push({op:"test",path:r,value:e}),n.push({op:"replace",path:r,value:t}))}if(!(!a&&o.length==s.length))for(var u=0;u<o.length;u++){var l=o[u];!Oj(e,l)&&t[l]!==void 0&&n.push({op:"add",path:r+"/"+Og(l),value:Ta(t[l])})}}}function l1e(e,t,n){n===void 0&&(n=!1);var r=[];return zV(e,t,r,"",n),r}const _st=Object.freeze(Object.defineProperty({__proto__:null,compare:l1e,generate:Fj,observe:bst,unobserve:vst},Symbol.toStringTag,{value:"Module"}));Object.assign({},dst,_st,{JsonPatchError:a1e,deepClone:Ta,escapePathComponent:Og,unescapePathComponent:s1e});var ME=(e=>(e.TRAVERSAL_START="Traversal_Start",e.TRAVERSAL_END="Traversal_End",e))(ME||{});function Wk(e,t){const n=e.state;if(n.type==="checkpoint")return n.val;const{checkpointRef:r}=n,i=t[r],o=f1e(i,e,t);o.shift();const s=o.map(u=>t[u]).map(u=>u.state.val).reduce((u,l)=>[...u,...l],[]),a=Wk(i,t);return OO(a,Ta(s),!0,!1).newDocument}function wst(e,t){const n=Object.keys(e).length;return new Set(t.map(r=>r.path.split("/")[0])).size<n/2?"patch":"checkpoint"}function c1e({registry:e,initialState:t}){let n=!1;const r=jot(),i=sst(t);function o(c){return i.backend.nodes[c]}r.listen(ME.TRAVERSAL_START,()=>{n=!0}),r.listen(ME.TRAVERSAL_END,()=>{n=!1});const s={add(c,f=i.current.id){i.update(i.addMetadata({id:f,meta:c}))},latestOfType(c,f=i.current.id){var d;return(d=i.backend.nodes[f].meta[c])==null?void 0:d.at(-1)},allOfType(c,f=i.current.id){return i.backend.nodes[f].meta[c]},latest(c=i.current.id){const f=i.backend.nodes[c].meta,d=Object.keys(f).reduce((h,p)=>{const m=f[p].at(-1);return m&&(h[p]=m),h},{});return Object.keys(d).length>0?d:void 0},all(c=i.current.id){return i.backend.nodes[c].meta},types(c=i.current.id){return Object.keys(i.backend.nodes[c].meta)}},a={add(c,f=i.current.id){i.update(i.addArtifact({id:f,artifact:c}))},latest(c=i.current.id){return i.backend.nodes[c].artifacts.at(-1)},all(c=i.current.id){return i.backend.nodes[c].artifacts}},u={add(c,f=i.current.id){s.add({annotation:c},f)},latest(c=i.current.id){var f;return(f=s.latestOfType("annotation",c))==null?void 0:f.val},all(c=i.current.id){var f;return(f=s.allOfType("annotation",c))==null?void 0:f.map(d=>d.val)}},l={add(c=i.current.id){s.add({bookmark:!0},c)},remove(c=i.current.id){s.add({bookmark:!1},c)},is(c=i.current.id){var f;return!!((f=s.latestOfType("bookmark",c))!=null&&f.val)},toggle(c=i.current.id){l.is(c)?l.remove(c):l.add(c)}};return{registry:e,get isTraversing(){return n},getState(c=i.current){return Wk(c,i.backend.nodes)},graph:i,get current(){return i.current},get root(){return i.root},record({label:c,state:f,sideEffects:d,eventType:h,onlySideEffects:p=!1}){let m=null,g=null;const y=Wk(this.current,this.graph.backend.nodes);if(p)g={type:"checkpoint",val:f};else{const v=l1e(y,f);if(wst(f,v)==="checkpoint")g={type:"checkpoint",val:f};else{const _=this.current.state.type==="checkpoint"?this.current.id:this.current.state.checkpointRef;g={type:"patch",val:v,checkpointRef:_}}}if(!g)throw new Error(`Could not calculate new state. Previous state is: ${JSON.stringify(this.current.state,null,2)}`);if(m=qot({label:c,state:g,parent:this.current,sideEffects:d,event:h}),!m)throw new Error("State Node creation failed!");i.update(i.addNode(m))},async apply(c,f){const d=e.get(f.type),h=Wk(this.current,this.graph.backend.nodes);if(d.config.hasSideEffects){const{do:p=f,undo:m}=d.func(f.payload);this.record({label:c,state:h,sideEffects:{do:[p],undo:[m]},eventType:d.config.eventType})}else{const p=d.func(h,f.payload);this.record({label:c,state:p,sideEffects:{do:[],undo:[]},eventType:d.config.eventType})}},async to(c){r.fire(ME.TRAVERSAL_START);const f=f1e(i.current,i.backend.nodes[c],i.backend.nodes),d=[];for(let h=0;h<f.length-1;++h){const p=o(f[h]),m=o(f[h+1]);xst(p,m)?lf(p)&&d.push(...p.sideEffects.undo):lf(m)&&d.push(...m.sideEffects.do)}for(const h of d){const p=e.get(h.type).func;await p(h.payload)}i.update(i.changeCurrent(c)),r.fire(ME.TRAVERSAL_END)},undo(){const{current:c}=i;return lf(c)?this.to(c.parent):Promise.resolve(console.warn("Already at root!"))},redo(c="latest"){const{current:f}=i;return f.children.length>0?this.to(f.children[c==="oldest"?0:f.children.length-1]):Promise.resolve(console.warn("Already at latest in this branch!"))},currentChange(c,f=!1){return i.currentChange(c,{skipOnNew:f})},done(){console.log("Setup later for URL sharing.")},tree(){return d1e(i.root,i.backend.nodes)},on(c,f){r.listen(c,f)},export(){return JSON.stringify(i.backend)},exportObject(){return JSON.parse(JSON.stringify(i.backend))},import(c){const f=JSON.parse(c),d=f.current;f.current=f.root,i.update(i.load(f)),this.to(d)},importObject(c){const f=c.current;c.current=c.root,i.update(i.load(c)),this.to(f)},metadata:s,artifact:a,annotations:u,bookmarks:l}}function Est(e,t,n){let[r,i]=[e,t];r.level>i.level&&([r,i]=[i,r]);let o=i.level-r.level;for(;lf(i)&&o!==0;)i=n[i.parent],o-=1;if(r.id===i.id)return r.id;for(;r.id!==i.id;)lf(r)&&(r=n[r.parent]),lf(i)&&(i=n[i.parent]);return r.id}function f1e(e,t,n){const r=Est(e,t,n),i=n[r],o=[],s=[];let[a,u]=[e,t];for(;a.id!==i.id;)o.push(a),lf(a)&&(a=n[a.parent]);for(o.push(a);u.id!==i.id;)s.push(u),lf(u)&&(u=n[u.parent]);const l=s.reverse();return[...o,...l].map(c=>c.id)}function xst(e,t){if(lf(e)&&e.parent===t.id)return!0;if(lf(t)&&t.parent===e.id)return!1;throw new Error("Incorrect use of function. Nodes are not connected to each other.")}function d1e(e,t){return{...e,children:e.children.map(n=>d1e(t[n],t)),name:`${e.label}`}}Qot();function Tst(e){return e.length===2?ist(e):e}class $O{static create(){return new $O}constructor(){this.registry=new Map}has(t){return this.registry.has(t)}register(t,n,r){const i=n.length===2;if(n.length>2)throw new Error("Incorrect action function signature. Action function can only have two arguments at most!");if(this.has(t))throw new Error(`Already registered: ${t}`);const{label:o=t,eventType:s=t}=r||{};return this.registry.set(t,{func:Tst(n),config:{hasSideEffects:!i,label:typeof o=="string"?()=>o:o,eventType:s}}),af(t)}get(t){const n=this.registry.get(t);if(!n)throw new Error(`Not registered: ${t}`);return n}}const Sst={marginBottom:40,marginLeft:40,marginTop:15,marginRight:15,height:650,width:850};function Cst({parameters:e,setAnswer:t}){const[n,r]=$_(Sst),[i,o]=k.useState(100),[s,a]=k.useState(100),[u,l]=k.useState(300),{taskid:c}=e,{actions:f,trrack:d}=k.useMemo(()=>{const p=$O.create(),m=p.register("click",(y,v)=>(y.clickX=v.clickX,y.clickY=v.clickY,y.distance=v.distance,y)),g=c1e({registry:p,initialState:{distance:0,speed:10,clickX:0,clickY:0}});return{actions:{clickAction:m},trrack:g}},[]),h=k.useCallback(p=>{const m=Ex("#movingCircle"),g=Ex("#clickAccuracySvg"),y=SXe(p,g.node()),v=[+m.attr("cx"),+m.attr("cy")],_=`${Math.round(Math.sqrt((y[0]-v[0])**2+(y[1]-v[1])**2))}px`;d.apply("Clicked",f.clickAction({distance:+_,clickX:y[0],clickY:y[1]})),t({status:!0,provenanceGraph:d.graph.backend,answers:{[c]:_}})},[f,t,c,d]);return k.useEffect(()=>{const p=Math.random()*800,m=Math.random()*600,y=Math.sqrt((p-i)**2+(m-s)**2)/u*1e3;Ex(n.current).select("circle").transition().duration(y).ease(vJe).attr("cx",p).attr("cy",m).on("end",()=>{o(p),a(m)})},[n,u,i,s]),b.jsxs(b.Fragment,{children:[b.jsx("div",{className:"Chart__wrapper",ref:n,onClick:h,style:{height:"650px"},children:b.jsx("svg",{id:"clickAccuracySvg",width:r.width,height:r.height,children:b.jsxs("g",{transform:`translate(${[r.marginLeft/2,r.marginTop/2].join(",")})`,children:[b.jsx("rect",{width:"800",height:"600",stroke:"black",strokeWidth:"5",fill:"none"}),b.jsx("circle",{id:"movingCircle",cx:"100",cy:"100",r:"10"})]})})}),b.jsxs(he,{children:["Adjust speed (px/s):",b.jsx(HD,{w:800,min:10,max:1e3,value:u,onChange:l})]})]})}const Ast=Object.freeze(Object.defineProperty({__proto__:null,default:Cst},Symbol.toStringTag,{value:"Module"})),kst={Public:"#1f77b4",Private:"#ff7f0e",Foreign:"#2ca02c",Other:"#d62728",Proprietary:"#9467bd"};function tre({parameters:e}){const[t,n]=k.useState(null),[r]=k.useState(e.dataset),[i,o]=k.useState(null);return k.useEffect(()=>{G0e(`./data/${r}.csv`).then(s=>{if(s.length===0){console.warn("Empty data received for",r);return}n(s)})},[r]),k.useEffect(()=>{if(t){const s=Ex(i);s.selectAll("*").remove();const a={top:20,right:30,bottom:60,left:60},u=800-a.left-a.right,l=400-a.top-a.bottom,c=s.append("g").attr("transform",`translate(${a.left},${a.top})`),f=pC().domain(t.map(h=>h[e.y])).range([0,u]).padding(.1),d=qm().domain([0,Ld(t,h=>+h[e.x])||0]).nice().range([l,0]);c.append("g").attr("transform",`translate(0,${l})`).call(UYe(f).tickSize(5)),c.append("g").call(zYe(d)),c.append("text").attr("fill","#000").attr("transform","rotate(-90)").attr("y",-a.left+15).attr("x",-(l/2)).attr("text-anchor","middle").attr("font-size","12px").text(`${e.x} (Billion USD)`),c.selectAll(".bar").data(t).enter().append("rect").attr("class","bar").attr("x",h=>f(h[e.y])||0).attr("y",h=>d(+h[e.x])).attr("width",f.bandwidth()).attr("height",h=>l-d(+h[e.x])).attr("fill",h=>kst[h[e.y]]||"#ccc")}},[t,i,e]),b.jsxs(b_,{children:[b.jsxs(_y,{shadow:"md",radius:"md",p:"md",withBorder:!0,children:[b.jsx(kr,{order:3,children:"Debt by School Type"}),b.jsx("svg",{ref:o,width:800,height:400})]}),t===null&&b.jsx(bh,{})]})}const Ist=Object.freeze(Object.defineProperty({__proto__:null,Bar:tre,default:tre},Symbol.toStringTag,{value:"Module"})),Rst=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"})),Eo={Purple:"#6D3E91",DarkOrange:"#C05917",LightTeal:"#58AC8C",Blue:"#286BBB",Maroon:"#883039",Camel:"#BC8E5A",MidnightBlue:"#00295B",DustyCoral:"#C15065",DarkOliveGreen:"#18470F",DarkCopper:"#9A5129",Peach:"#E56E5A",Mauve:"#A2559C",Turquoise:"#38AABA",OliveGreen:"#578145",Cherry:"#970046",Teal:"#00847E",RustyOrange:"#B13507",Denim:"#4C6A9C",Fuchsia:"#CF0A66",TealishGreen:"#00875E",Copper:"#B16214",DarkMauve:"#8C4569",Lime:"#3B8E1D",Coral:"#D73C50"},bv={DarkOrangeDarker:"#BE5915",PeachDarker:"#C4523E",LightTealDarker:"#2C8465",TurquoiseDarker:"#008291",CamelDarker:"#996D39",LimeDarker:"#338711"},h1e=[Eo.DustyCoral,bv.LightTealDarker,bv.DarkOrangeDarker,Eo.Purple,Eo.DarkOliveGreen,Eo.Blue,Eo.Maroon,bv.CamelDarker,Eo.MidnightBlue,Eo.DarkCopper,bv.PeachDarker,Eo.Mauve,bv.TurquoiseDarker,Eo.OliveGreen,Eo.Cherry,Eo.Teal,Eo.RustyOrange,Eo.Denim,Eo.TealishGreen,Eo.Copper,Eo.DarkMauve,bv.LimeDarker,Eo.Coral],Nst=Object.freeze(Object.defineProperty({__proto__:null,OwidDistinctLinesPalette:h1e},Symbol.toStringTag,{value:"Module"}));var Pst="Expected a function",nre=NaN,Dst="[object Symbol]",Ost=/^\s+|\s+$/g,$st=/^[-+]0x[0-9a-f]+$/i,Mst=/^0b[01]+$/i,Lst=/^0o[0-7]+$/i,Fst=parseInt,jst=typeof so=="object"&&so&&so.Object===Object&&so,Bst=typeof self=="object"&&self&&self.Object===Object&&self,Ust=jst||Bst||Function("return this")(),zst=Object.prototype,Vst=zst.toString,Hst=Math.max,qst=Math.min,v6=function(){return Ust.Date.now()};function Wst(e,t,n){var r,i,o,s,a,u,l=0,c=!1,f=!1,d=!0;if(typeof e!="function")throw new TypeError(Pst);t=rre(t)||0,jj(n)&&(c=!!n.leading,f="maxWait"in n,o=f?Hst(rre(n.maxWait)||0,t):o,d="trailing"in n?!!n.trailing:d);function h(S){var T=r,C=i;return r=i=void 0,l=S,s=e.apply(C,T),s}function p(S){return l=S,a=setTimeout(y,t),c?h(S):s}function m(S){var T=S-u,C=S-l,A=t-T;return f?qst(A,o-C):A}function g(S){var T=S-u,C=S-l;return u===void 0||T>=t||T<0||f&&C>=o}function y(){var S=v6();if(g(S))return v(S);a=setTimeout(y,m(S))}function v(S){return a=void 0,d&&r?h(S):(r=i=void 0,s)}function _(){a!==void 0&&clearTimeout(a),l=0,r=u=i=a=void 0}function w(){return a===void 0?s:v(v6())}function E(){var S=v6(),T=g(S);if(r=arguments,i=this,u=S,T){if(a===void 0)return p(u);if(f)return a=setTimeout(y,t),h(u)}return a===void 0&&(a=setTimeout(y,t)),s}return E.cancel=_,E.flush=w,E}function jj(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}function Gst(e){return!!e&&typeof e=="object"}function Yst(e){return typeof e=="symbol"||Gst(e)&&Vst.call(e)==Dst}function rre(e){if(typeof e=="number")return e;if(Yst(e))return nre;if(jj(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=jj(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=e.replace(Ost,"");var n=Mst.test(e);return n||Lst.test(e)?Fst(e.slice(2),n?2:8):$st.test(e)?nre:+e}var Kst=Wst;const Pc=ku(Kst);function Bj({xScale:e,yRange:t,vertPosition:n,ticks:r,isDate:i=!1,showLines:o=!0}){const s=k.useMemo(()=>r.length>1?Math.abs(r[1].offset-r[0].offset):e.range()[0]-e.range()[1],[r,e]),a=u=>{const l=O_("%b %e, %Y");return i?l(u).toString():R_(".2s")(parseFloat(String(u)))};return b.jsxs(b.Fragment,{children:[o&&b.jsx("path",{transform:`translate(0, ${t[1]})`,d:["M",e.range()[0],0,"H",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}),r.map(({value:u,offset:l})=>b.jsxs("g",{transform:`translate(${l}, ${n})`,children:[b.jsx("line",{y2:"6",stroke:"currentColor"}),o&&b.jsx("line",{y2:`${-(t[0]-t[1])}`,stroke:"lightgray"}),b.jsx("foreignObject",{x:0-s/2,y:10,width:s,height:20,children:b.jsx(nm,{children:b.jsx(zr,{withinPortal:!0,label:String(u),children:b.jsxs(je,{px:2,size:"xs",style:{textAlign:"center",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"},children:[a(i?new Date(u):u)," "]})})})})]},`${u}tick`))]})}const Xst=Object.freeze(Object.defineProperty({__proto__:null,XAxis:Bj,default:Bj},Symbol.toStringTag,{value:"Module"}));function p1e({yScale:e,xRange:t,horizontalPosition:n,label:r}){const i=k.useMemo(()=>e.ticks(5).map(s=>({value:s,yOffset:e(s)})),[e]),o=k.useMemo(()=>R_(".2s"),[]);return b.jsxs(b.Fragment,{children:[b.jsx("g",{transform:`translate(${n-60}, ${e.range()[0]}) rotate(-90)`,children:b.jsx("foreignObject",{width:Math.abs(e.range()[1]-e.range()[0]),height:20,children:b.jsx(nm,{children:b.jsx(qs,{gap:3,children:b.jsx(je,{size:"14px",style:{color:"#878E95"},children:r})})})})}),b.jsx("path",{transform:`translate(${n}, 0)`,d:["M",0,e.range()[0],"V",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}),b.jsx("path",{transform:`translate(${t[1]}, 0)`,d:["M",0,e.range()[0],"V",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}),i.map(({value:s,yOffset:a})=>b.jsxs("g",{transform:`translate(${n}, ${a})`,children:[b.jsx("line",{x2:"-6",stroke:"currentColor"}),b.jsx("line",{x2:`${t[1]-t[0]}`,stroke:`${s===0?"black":"lightgray"}`}),b.jsx("text",{style:{dominantBaseline:"middle",fontSize:"10px",textAnchor:"end",transform:"translateX(-8px)",fill:"black",font:"Roboto"},children:o(s)},s)]},s))]})}const Qst=Object.freeze(Object.defineProperty({__proto__:null,YAxis:p1e},Symbol.toStringTag,{value:"Module"})),es={top:30,left:100,right:110,bottom:80};function Uj({parameters:e,data:t,dataname:n,items:r,selection:i,range:o,guardrail:s}){const a=k.useMemo(()=>{const v=r.filter(_=>i==null?void 0:i.includes(_.name)).map(_=>_.group);return r.filter(_=>v.includes(_.group)&&!(i!=null&&i.includes(_.name))).map(_=>_.name)},[i,r]),u=k.useMemo(()=>{const v=r.map(E=>E.group),_=t.filter(E=>v.includes(String(E[e.group_var]))),w=TYe(_,E=>({mean:Yge(E,S=>+S[e.y_var]),upperq:OT(E,.75,S=>+S[e.y_var]),lowerq:OT(E,.25,S=>+S[e.y_var])}),E=>E[e.x_var]);return Array.from(w,([E,S])=>({date:E,mean:S.mean,upperq:S.upperq,lowerq:S.lowerq}))},[t,e,r]),l=n==="clean_data"?800-es.left-es.right-60:800-es.left-es.right,c=400-es.top-es.bottom,{yMin:f,yMax:d}=k.useMemo(()=>{let v=[];switch(s){case"super_data":v=(i==null?void 0:i.concat(a))??[];break;default:v=i??[];break}const _=t.filter(C=>v.includes(String(C[e.cat_var]))).map(C=>+C[e.y_var]).filter(C=>C!==null),[w,E]=EYe(_),S=CR(u,C=>C.lowerq)??w,T=Ld(u,C=>C.upperq)??E;return{yMin:s==="super_summ"?Math.min(w,S):w,yMax:s==="super_summ"?Math.max(E,T):E}},[t,i,s,u,a,e]),h=k.useMemo(()=>o?lN().range([es.left,l+es.left]).domain(o):lN().range([es.left,l+es.left]).domain([new Date(e.start_date),new Date(e.end_date)]),[l,o,e]),p=k.useMemo(()=>qm().range([c+es.top,es.top]).domain([f,d]).nice(),[c,d,f]),m=k.useMemo(()=>{const v=Array.from(new Set(t.map(_=>String(_[e.cat_var]))));return hC(h1e).domain(v)},[t,e]),g=k.useMemo(()=>{if(!h||!p)return[];const v=bV().x(_=>h(hV("%Y-%m-%d")(String(_[e.x_var])))).y(_=>p(+_[e.y_var])).curve(Eve);return i==null?void 0:i.map(_=>({GroupOne:_,path:v(t.filter(w=>w[e.cat_var]===_))}))},[t,h,p,i,e]),y=k.useMemo(()=>h.ticks(6).map(v=>({value:O_("%b %e, %Y")(v),offset:h(v)})),[h]);return(i==null?void 0:i.length)===0?b.jsx(nm,{style:{width:"800px",height:"400px"},children:b.jsx(je,{fs:"italic",c:"dimmed",children:"Select an item to view the chart."})}):b.jsxs("svg",{style:{height:"400px",width:"800px"},children:[b.jsxs("g",{id:"axes",children:[b.jsx(Bj,{isDate:!0,xScale:h,yRange:p.range(),vertPosition:c+es.top,ticks:y}),b.jsx(p1e,{label:"loan balance",yScale:p,horizontalPosition:es.left,xRange:h.range()})]}),g==null?void 0:g.map(v=>b.jsx("g",{children:b.jsx("path",{id:`${v.GroupOne}`,fill:"none",stroke:m(v.GroupOne),strokeWidth:2,d:v.path})},`${v.GroupOne}_g`)),b.jsx("g",{transform:`translate(${l+es.left+20}, ${es.top})`,children:Array.from(new Set(t.map(v=>v[e.cat_var]))).map((v,_)=>b.jsxs("g",{transform:`translate(0, ${_*20})`,children:[b.jsx("rect",{width:15,height:15,fill:m(String(v))}),b.jsx("text",{x:20,y:15,style:{fontSize:"12px",fill:"black"},children:v})]},v))})]})}const Jst=Object.freeze(Object.defineProperty({__proto__:null,LineChart:Uj,default:Uj},Symbol.toStringTag,{value:"Module"}));function zj({parameters:e,setRange:t,trackRange:n}){const r=lN().domain([new Date(e.start_date),new Date(e.end_date)]).range([0,100]);function i(l){return r.invert(l)}function o(l){const c=i(l);return O_("%b %e, %Y")(c)}const s={marginTop:"20px",marginBottom:"20px"},a={marginBottom:"5px",fontWeight:"bold",color:"#4a5568"},u={paddingLeft:"30px"};return b.jsxs(he,{style:u,children:[b.jsx(je,{style:[a,{marginBottom:30}],children:"Select Date Range:"}),b.jsx(UU,{style:s,defaultValue:[0,100],label:l=>o(l),labelAlwaysOn:!0,step:1,min:0,max:100,disabled:!e.allow_time_slider,onChange:([l,c])=>{const f=[i(l),i(c)];t(f),n(f)},thumbSize:16,thumbToLabel:"Date Range",marks:[{value:0,label:o(0)},{value:100,label:o(100)}]})]})}const Zst=Object.freeze(Object.defineProperty({__proto__:null,RangeSelector:zj,default:zj},Symbol.toStringTag,{value:"Module"}));function ire({parameters:e}){const[t,n]=k.useState(null),[r]=k.useState(e.dataset),[i]=k.useState(e.initial_selection),[o,s]=k.useState(null),[a,u]=k.useState([new Date(e.start_date),new Date(e.end_date)]),[l]=k.useState(e.guardrail);k.useEffect(()=>{G0e(`./data/${r}.csv`).then(m=>{n(m),s(Array.from(new Set(m.map(g=>JSON.stringify({name:g[e.cat_var],group:g[e.group_var]})))).map(g=>JSON.parse(g)))})},[r,e]);const c=k.useMemo(()=>t&&a?t.filter(m=>{const g=new Date(m[e.x_var]);return g.getTime()>=a[0].getTime()&&g.getTime()<=a[1].getTime()}):null,[t,a,e.x_var]),{actions:f,trrack:d}=k.useMemo(()=>{const m=$O.create(),g=m.register("selection",(_,w)=>(_.selection=w,_)),y=m.register("range",(_,w)=>(_.range=w,_)),v=c1e({registry:m,initialState:{selection:[],range:[e.start_date,e.end_date]}});return{actions:{selection:g,range:y},trrack:v}},[e.end_date,e.start_date]),h=k.useCallback(m=>{d.apply("Change daterange",f.range([m[0].toISOString().slice(0,10),m[1].toISOString().slice(0,10)]))},[d,f]),p=k.useMemo(()=>Pc(h,200),[h]);return c&&o&&a&&i?b.jsx("div",{children:b.jsxs("div",{children:[b.jsx("div",{children:b.jsx("h3",{children:"Loan Balance over Time"})}),b.jsxs("div",{children:[b.jsx(Uj,{parameters:e,data:c,dataname:r,items:o,selection:i,range:a,guardrail:l}),e.allow_time_slider&&b.jsx("div",{style:{width:"700px"},children:b.jsx(zj,{parameters:e,setRange:u,trackRange:p})})]})]})}):b.jsx("div",{children:"Loading..."})}const eat=Object.freeze(Object.defineProperty({__proto__:null,DataExplorer:ire,default:ire},Symbol.toStringTag,{value:"Module"})),tat={chartContainer:{height:"400px",width:"50em",display:"flex",flexDirection:"column",alignItems:"flex-start",position:"relative"}};function ore(e){return(e.flatMap(i=>i*12/6e4).reduce((i,o)=>i+o)/e.length*100).toPrecision(3)}function MO({data:e}){return b.jsxs("div",{style:tat.chartContainer,children:[b.jsx("h1",{children:" Congratulations! Your loan is paid off."}),b.jsxs(je,{fz:"xl",lh:"lg",children:["It took you"," ",e.length," ","years to pay off your loan. On average, you spent"," "," "," ",ore(e),"% of your income a year to pay off the loan."]}),parseFloat(ore(e))>10?b.jsx(je,{fz:"xl",lh:"lg",children:"This percentage is greater than the recommended 10% allocation of gross income. It may be difficult to afford this repayment plan"}):b.jsxs(b.Fragment,{children:[b.jsx("br",{}),b.jsx(je,{fz:"xl",lh:"lg",children:" This percentage is less than the recommended 10% allocation of gross income."})]}),b.jsxs(je,{fz:"xl",lh:"lg",children:["To learn more about budgeting student loans, you can"," ",b.jsx(Mm,{fz:"xl",lh:"lg",href:"https://www.consumerfinance.gov/consumer-tools/student-loans/",children:"search here"}),"."]}),b.jsx("br",{}),b.jsx(je,{fz:"xl",lh:"lg",td:"underline",fw:"500",children:"Please press submit in the sidebar to complete the experiment."})]})}const nat=Object.freeze(Object.defineProperty({__proto__:null,default:MO},Symbol.toStringTag,{value:"Module"})),sre=e=>{const t={...e,marginTop:e.marginTop||10,marginRight:e.marginRight||10,marginBottom:e.marginBottom||40,marginLeft:e.marginLeft||75};return{...t,boundedHeight:t.height?Math.max(t.height-t.marginTop-t.marginBottom,0):0,boundedWidth:t.width?Math.max(t.width-t.marginLeft-t.marginRight,0):0}},LO=e=>{const t=k.useRef(null),n=sre(e),[r,i]=k.useState(0),[o,s]=k.useState(0);k.useEffect(()=>{const u=t.current;if(u){const l=new ResizeObserver(c=>{if(!Array.isArray(c)||!c.length)return;const f=c[0];r!==f.contentRect.width&&i(f.contentRect.width),o!==f.contentRect.height&&s(f.contentRect.height)});return l.observe(u),()=>l.unobserve(u)}return()=>null},[o,r]);const a=sre({...n,width:n.width||r,height:n.height||o});return[t,a]},rat=Object.freeze(Object.defineProperty({__proto__:null,useChartDimensions:LO},Symbol.toStringTag,{value:"Module"}));function m1e({data:e,barHeight:t,barWidth:n,colors:r}){const{totalPaid:i=0,remainingBalance:o=0}=e[0]||{},s=i+o,a=s?i/s*n:0,u=s?o/s*n:0,l=s?Math.round(i/s*100):0,c=y=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(y),[f,d]=k.useState(null),[h,p]=k.useState(null),m=(y,v,_,w)=>{p(w),d({content:_,x:y+2,y:v-10})},g=()=>{d(null),p(null)};return e.length===0?null:b.jsxs("svg",{width:n+500,height:t+600,style:{border:"1px solid #ddd"},children:[b.jsxs("g",{transform:"translate(20, 20)",children:[b.jsx("rect",{x:0,y:50,width:n-10,height:t-10,fill:h==="remaining"?"#46A3CA":r[1],onMouseEnter:()=>m(a+u/2,t/2,[`Remaining Percent: ${Math.round(o/s*100)}%`],"remaining"),onMouseLeave:g,style:{transition:"fill 0.3s ease",cursor:"pointer"},rx:20,ry:20}),b.jsx("rect",{x:0,y:50,width:a-10,height:t-10,fill:h==="paid"?"#2DB681":r[0],onMouseEnter:()=>m(a/2,t/2,[`Paid Percent: ${l}%`],"paid"),onMouseLeave:g,style:{transition:"fill 0.3s ease",cursor:"pointer"},rx:20,ry:20,stroke:"white",strokeWidth:2}),b.jsx("text",{children:b.jsx("tspan",{x:10,y:t/2+50,fill:"white",style:{fontSize:we(16),fontWeight:600},children:c(i)})}),b.jsx("text",{children:b.jsx("tspan",{x:10+a,y:t/2+50,fill:"black",style:{fontSize:we(16),fontWeight:600},children:c(o)})})]}),f&&b.jsx("text",{x:f.x,y:f.y,fill:"black",fontSize:"13",textAnchor:"middle",children:f.content.map((y,v)=>b.jsx("tspan",{x:f.x,dy:v===0?"0":"15",children:y},v))})]})}const iat=Object.freeze(Object.defineProperty({__proto__:null,default:m1e},Symbol.toStringTag,{value:"Module"}));function L_({size:e,data:t}){const n=[{label:"loan",value:t.valueOf(),color:"#06945D"},{label:"other",value:5e3-t.valueOf(),color:"#0077a9"}],r=_V().value(s=>s.value).sort(null),i=qT().innerRadius(0).outerRadius(e/4),o=r(n);return b.jsx("svg",{width:e,height:e/2,viewBox:`0 0 ${e} ${e/2}`,children:b.jsxs("g",{transform:`translate(${e/8}, 0)`,children:[b.jsxs("g",{id:"sidebarpie",transform:`translate(${e/4}, ${e/4})`,children:[o.map((s,a)=>b.jsx("path",{d:i(s)||void 0,fill:n[a].color},a)),o.map((s,a)=>{const[u,l]=i.centroid(s);return b.jsx("text",{alignmentBaseline:"middle",textAnchor:"middle",style:{fontSize:"1em"},fill:"white",transform:`translate(${u+3},${l-10})`,children:s.data.label==="loan"?`${Math.round(s.data.value/5e3*100)}%`:""},a)})]}),b.jsxs("g",{id:"legend",transform:`translate(${2.5*e/4}, ${e/8})`,children:[b.jsx("circle",{cy:0,r:10,fill:"#06945D"}),b.jsx("text",{x:15,y:4,children:"Loan"}),b.jsx("circle",{cy:30,r:10,fill:"#0077a9"}),b.jsx("text",{x:15,y:34,children:"Other"})]})]})})}const oat=Object.freeze(Object.defineProperty({__proto__:null,default:L_},Symbol.toStringTag,{value:"Module"})),are="answer-array",Bu={chartContainer:{display:"flex",flexDirection:"row",alignItems:"center",position:"relative"},chartWrapper:{display:"flex",flexDirection:"column",alignItems:"center",marginBottom:"50px"},extraPaymentOptions:{marginTop:"10px",textAlign:"center",display:"flex",flexDirection:"row",justifyContent:"center",gap:"20px"},radioLabel:{fontSize:"16px",cursor:"pointer",display:"flex",alignItems:"center",gap:"6px",padding:"8px 8px",borderRadius:"8px",border:"1px solid #4e79a7",backgroundColor:"#f9f9f9",transition:"background-color 0.3s ease"},radioButton:{width:"18px",height:"18px",cursor:"pointer"},nextYearButton:{marginTop:"15px",padding:"8px 20px",cursor:"pointer",backgroundColor:"#0077A9",color:"white",border:"none",borderRadius:"8px",fontSize:"16px",boxShadow:"0px 4px 6px rgba(0, 0, 0, 0.1)",transition:"background-color 0.3s ease, transform 0.2s ease"},disabledButton:{marginTop:"15px",padding:"8px 20px",cursor:"not-allowed",backgroundColor:"#cccccc",color:"white",border:"none",borderRadius:"8px"},paidOffMessage:{fontSize:"20px",fontWeight:"bold",marginTop:"20px"},submitButton:{marginTop:"15px",padding:"8px 20px",cursor:"pointer",backgroundColor:"#28a745",color:"white",border:"none",borderRadius:"8px",fontSize:"16px",boxShadow:"0px 4px 6px rgba(0, 0, 0, 0.1)",transition:"background-color 0.3s ease, transform 0.2s ease"},overBudget:{color:"red",fontWeight:"bold"},underBudget:{color:"black",fontWeight:"bold"},labelContainer:{display:"flex",flexDirection:"row",justifyContent:"space-between",width:"100%",marginBottom:"10px"},label:{fontSize:"16px",fontWeight:"bold",color:"#333"},input:{width:"100%",padding:"10px",fontSize:"16px",borderRadius:"5px",border:"1px solid #ccc"},span:{fontSize:"16px",fontWeight:"bold",color:"#333"}};let _v=!1;const A2=[];function sat({extraPayment:e,setExtraPayment:t}){const i=e+341,o=(i/5e3*100).toFixed(2);return b.jsxs("div",{children:[b.jsxs("div",{style:Bu.labelContainer,children:[b.jsx("label",{style:Bu.span,children:"Total Monthly Payment:"}),b.jsxs("span",{style:Bu.span,children:["$",i]}),b.jsx("label",{style:Bu.span,children:"Percent of Income:"}),b.jsxs("span",{style:Number(o)>10?Bu.overBudget:Bu.underBudget,children:[o,"%"]})]}),b.jsxs("div",{style:Bu.extraPaymentOptions,children:[b.jsx("h3",{children:"How much do you want to pay each month?"}),b.jsx("input",{type:"number",value:341+e,min:341,max:5e3,onChange:s=>{let a=Math.max(parseFloat(s.target.value),341);a=Math.min(a,5e3),t(a-341)}})]})]})}function aat({setAnswer:e}){const[s,a]=k.useState([]),[u,l]=k.useState(0),[c,f]=k.useState(Array(10).fill(0)),[d,h]=LO({marginBottom:0,marginLeft:0,marginTop:0,marginRight:0,height:100,width:800});k.useEffect(()=>{a((()=>{const E=[];let S=3e4,T=0;for(let C=2025;C<2035&&!(S<=0);C+=1){const A=S*.065,N=4173.14+c[C-2025]*12,O=Math.min(S+A,N);S=Math.max(0,S+A-O),T+=O,E.push({year:C,totalPaid:T,remainingBalance:S,interest:A,total_payment:T})}return E})())},[c]);function p(){e({status:!0,answers:{[are]:A2}}),_v=!0}function m(){A2[u]=c[u];const w=u+1,S=(s[u]||{remainingBalance:0}).remainingBalance??0,T=(c[u]??0)*12;(w>=10||typeof S=="number"&&typeof T=="number"&&S+T<=4100)&&(e({status:!0,answers:{[are]:A2}}),_v=!0),l(w)}const g=s[u]||{remainingBalance:0},y=c[u]??0,v=g.remainingBalance??0,_=typeof u=="number"&&u>=s.length||typeof v=="number"&&typeof y=="number"&&v+y*12<=0;return k.useEffect(()=>{_&&u!==0&&!_v&&p()},[_]),b.jsx("div",{style:Bu.chartContainer,children:b.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-start"},children:[!_v,_v?b.jsx("div",{children:b.jsx(MO,{data:A2})}):b.jsxs("div",{style:{display:"flex",flexDirection:"row"},children:[b.jsxs("div",{ref:d,style:Bu.chartWrapper,children:[b.jsx("div",{style:{textAlign:"center"},children:b.jsxs("h2",{children:["Year:"," ",u+2025]})}),b.jsxs("svg",{width:h.width+100,height:h.height+100,style:Bu.chartWrapper,children:[b.jsxs("g",{transform:"translate(200, 200)",children:[b.jsx("rect",{x:620,y:0,width:15,height:15,fill:"#06945D"}),b.jsx("text",{x:640,y:12,fontSize:"12",fill:"black",children:"Total Paid"}),b.jsx("rect",{x:700,y:0,width:15,height:15,fill:"#0077A9"}),b.jsx("text",{x:720,y:12,fontSize:"12",fill:"black",children:"Remaining Balance"})]}),b.jsx("g",{children:s.length>0&&u<s.length?b.jsx(m1e,{data:[s[u]],barWidth:h.width,barHeight:h.height,colors:["#06945D","#e5e5e5"]}):b.jsx("text",{children:"No data available for this year."})})]}),b.jsx(sat,{extraPayment:c[u],setExtraPayment:w=>{const E=[...c],S=typeof w=="function"?w(E[u]):w;E[u]=S,f(E)}}),b.jsx("button",{type:"button",style:_?Bu.disabledButton:Bu.nextYearButton,onClick:m,disabled:_v,children:"Next Year"})]}),b.jsxs("div",{style:{justifyContent:"top",alignItems:"flex-start"},children:[b.jsx("h3",{children:"Budget Post Taxes: $5,000"}),b.jsx(L_,{size:350,data:c[u]})]})]})]})})}const uat=Object.freeze(Object.defineProperty({__proto__:null,default:aat},Symbol.toStringTag,{value:"Module"}));function VV({data:e,radius:t,colors:n,year:r}){const i=k.useRef(null);return k.useEffect(()=>{if(e.length===0)return;const{totalPaid:o=0,remainingBalance:s=0}=e[0]||{},a=o+s,u=[{value:o,color:n[0],label:"Paid"},{value:s,color:n[1],label:"Remaining"}],l=_V().sort(null).value(p=>p.value),c=qT().innerRadius(t/2).outerRadius(t),f=Ex(i.current);f.selectAll("*").remove();const d=f.append("g").attr("transform",`translate(${t}, ${t})`),h=d.selectAll("arc").data(l(u)).enter().append("g").attr("class","arc");h.append("path").attr("d",c).attr("fill",p=>p.data.color),h.append("text").attr("transform",p=>`translate(${c.centroid(p)})`).attr("text-anchor","middle").attr("alignment-baseline","middle").attr("fill","white").style("font-size","16px").text(p=>p.data.label==="Paid"?`${(p.data.value/a*100).toFixed(0)}%`:""),d.append("text").attr("x",0).attr("y",7).attr("text-anchor","middle").attr("font-size","26px").text(`${r}`)},[e,t,n,r]),b.jsx("svg",{ref:i,width:t*2+100,height:t*2+100})}const lat=Object.freeze(Object.defineProperty({__proto__:null,default:VV},Symbol.toStringTag,{value:"Module"})),Ln={chartContainer:{height:"80%",width:"100%",display:"flex",flexDirection:"column",alignItems:"center",marginTop:"20px"},contentContainer:{display:"flex",flexDirection:"row",width:"100%",justifyContent:"center"},column:{display:"flex",flex:1,height:"100%",flexDirection:"column",alignItems:"center",justifyContent:"center"},paymentOptions:{display:"flex",flexDirection:"column",gap:"0px",alignItems:"center"},nextYearButton:{marginTop:"0.25em",marginLeft:"0.5em",padding:"8px 20px",cursor:"pointer",backgroundColor:"#0077A9",color:"white",border:"none",borderRadius:"8px",fontSize:"16px",height:"50%",boxShadow:"0px 4px 6px rgba(0, 0, 0, 0.1)",transition:"background-color 0.3s ease, transform 0.2s ease"},disabledButton:{marginTop:"0.25em",marginLeft:"0.5em",padding:"8px 20px",cursor:"not-allowed",backgroundColor:"#cccccc",color:"white",border:"none",borderRadius:"8px",fontSize:"16px",height:"50%"},body:{display:"flex",flexFlow:"column",justifyContent:"center",alignContent:"center",alignItems:"center",marginLeft:"12%",marginRight:"12%",fontFamily:'-apple-system, system-ui, BlinkMacSystemFont, "Segoe UI", Roboto, Ubuntu'},p:{fontSize:"x-large"},label:{fontSize:"x-large"},inputWrapper:{display:"flex",width:"150px"},dollarSign:{position:"absolute",left:"10px",color:"#555",fontSize:"17px",pointerEvents:"none"},dollarInput:{width:"100%",padding:"5px",boxSizing:"border-box",paddingLeft:"25px"},header:{textAlign:"center"},year:{textAlign:"center",marginTop:"0",marginBottom:"20px",whiteSpace:"pre"},leftAlignText:{textAlign:"left",marginBottom:"12px"},boldText:{fontWeight:"700"}},cat=Object.freeze(Object.defineProperty({__proto__:null,default:Ln},Symbol.toStringTag,{value:"Module"})),fat="attn-check";let ure=-1;function dat({payment:e,setPayment:t}){return b.jsx("div",{style:{...Ln.PaymentOptions,display:"flex",flexDirection:"column",gap:"0px",alignItems:"center"},children:b.jsx("div",{style:Ln.inputWrapper,children:b.jsx(Ty,{min:341,max:5e3,size:"lg",prefix:"$",clampBehavior:"blur",value:e,onChange:i=>t(i),hideControls:!0})})})}function hat({setAnswer:e}){var f;const[i,o]=k.useState([]),s=0,[a,u]=k.useState(Array(1).fill("")),[l,c]=LO({marginBottom:0,marginLeft:0,marginTop:0,marginRight:0,height:360,width:700});return k.useEffect(()=>{o((()=>{const h=[];let p=3e4,m=0;for(let g=2025;g<2026&&!(p<=0);g+=1){const y=p*.065,v=a[g-2025]*12,_=Math.min(p+y,v);p=Math.max(0,p+y-_),m+=_,ure=a[g-2025],h.push({year:g,totalPaid:m,remainingBalance:p,interest:y,total_payment:m})}return h})()),e({status:!0,answers:{[fat]:ure}})},[a]),b.jsxs("div",{style:Ln.chartContainer,children:[b.jsx("div",{ref:l,style:Ln.chartWrapper,children:b.jsxs("div",{style:{display:"flex",flexDirection:"row",gap:"4em",justifyContent:"top"},children:[b.jsx("div",{style:Ln.visWrapper,children:b.jsxs("div",{style:{marginTop:"0px",alignItems:"flex-start"},children:[b.jsx("h2",{style:{textAlign:"center"},children:"Loan Payoff"}),b.jsx("svg",{width:c.width*.5,height:c.height,children:b.jsx("g",{transform:"translate(0, 0)",children:i.length>0&&s<i.length?b.jsx(VV,{data:[i[s]],radius:175,colors:["#06945D","#e5e5e5"],year:s+2025}):b.jsx("text",{children:"No data available for this year."})})})]})}),b.jsxs("div",{style:{marginLeft:"1em",justifyContent:"top",alignItems:"flex-start"},children:[b.jsx("h2",{style:{textAlign:"center"},children:"Budget: $5,000"}),b.jsx(L_,{size:370,data:a[s]}),b.jsxs("div",{style:{textAlign:"center",marginTop:"3em"},children:[b.jsx("h2",{children:"EOY Loan Balance"}),b.jsx("h2",{style:{marginTop:"1px",fontSize:"36px",fontWeight:"300"},children:new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format((f=i[s])==null?void 0:f.remainingBalance)})]})]})]})}),b.jsx("h2",{style:{paddingTop:"10px",fontWeight:"normal"},children:"Please enter 1000 to show you understand the directions."}),b.jsx("div",{style:{display:"flex"},children:b.jsx(dat,{payment:a[s],setPayment:d=>{const h=[...a],p=typeof d=="function"?d(h[s]):d;h[s]=p,u(h)}})})]})}const pat=Object.freeze(Object.defineProperty({__proto__:null,default:hat},Symbol.toStringTag,{value:"Module"})),mat="attn-check";let lre=-1;function gat({payment:e,setPayment:t}){return b.jsx("div",{style:{...Ln.PaymentOptions,display:"flex",flexDirection:"column",gap:"0px",alignItems:"center"},children:b.jsx("div",{style:Ln.inputWrapper,children:b.jsx(Ty,{min:341,max:5e3,size:"lg",prefix:"$",clampBehavior:"blur",value:e,onChange:i=>t(i),hideControls:!0})})})}function yat({setAnswer:e}){var c,f,d,h,p,m;const[i,o]=k.useState([]),s=0,[a,u]=k.useState(Array(1).fill(""));k.useEffect(()=>{o((()=>{const y=[];let v=3e4,_=0;for(let w=2025;w<2026&&!(v<=0);w+=1){const E=v*.065,S=a[w-2025]*12,T=Math.min(v+E,S);v=Math.max(0,v+E-T),_+=T,lre=a[w-2025],y.push({year:w,totalPaid:_,remainingBalance:v,interest:E,total_payment:_})}return y})()),e({status:!0,answers:{[mat]:lre}})},[a]);function l(g){return Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(g)}return b.jsxs("div",{style:Ln.chartContainer,children:[b.jsxs("div",{style:Ln.contentContainer,children:[b.jsxs("div",{style:{...Ln.column},children:[b.jsx("h2",{style:Ln.header,children:"Loan Payoff"}),b.jsxs("h3",{style:Ln.year,children:["Year:",s+2025]}),b.jsxs("div",{id:"option-1",children:[b.jsxs(je,{size:"xl",style:{marginBottom:"12px"},children:["Percent Paid:",b.jsx(je,{fw:700,component:"span",children:((c=i[s])==null?void 0:c.totalPaid)<=0?" 0%":` ${((((f=i[s])==null?void 0:f.totalPaid)??0)/((((d=i[s])==null?void 0:d.totalPaid)??0)+(((h=i[s])==null?void 0:h.remainingBalance)??0))*100).toFixed(0)}%`})]}),b.jsxs(je,{size:"xl",style:{marginBottom:"12px"},children:["Current Loan Balance:",b.jsx(je,{fw:700,component:"span",children:` ${l(((p=i[s-1])==null?void 0:p.remainingBalance)??3e4)}`})]}),b.jsxs(je,{size:"xl",style:{marginBottom:"12px"},children:["EOY Loan Balance:",b.jsx(je,{fw:700,component:"span",children:` ${l((m=i[s])==null?void 0:m.remainingBalance)} `})]})]})]}),b.jsxs("div",{style:{...Ln.column},children:[b.jsx("h2",{style:Ln.header,children:"Budget: $5,000"}),b.jsx(L_,{size:370,data:a[s]})]})]}),b.jsx("h2",{style:{paddingTop:"10px",fontWeight:"normal"},children:"Please enter 1000 to show you understand the directions."}),b.jsx("div",{style:{display:"flex"},children:b.jsx(gat,{payment:a[s],setPayment:g=>{const y=[...a],v=typeof g=="function"?g(y[s]):g;y[s]=v,u(y)}})})]})}const vat=Object.freeze(Object.defineProperty({__proto__:null,default:yat},Symbol.toStringTag,{value:"Module"}));let k2=!1;const b6=[],bat="answer-array",_6=341,cre=5e3;function _at({payment:e,setPayment:t}){const n=r=>{const i=typeof r=="string"?parseFloat(r):r;t(i??_6)};return b.jsx("div",{style:Ln.paymentOptions,children:b.jsx("div",{style:Ln.inputWrapper,children:b.jsx(Ty,{error:e<_6||e>cre?"Invalid input.":"",min:_6,max:cre,size:"lg",prefix:"$",clampBehavior:"blur",value:e,onChange:n,hideControls:!0})})})}function wat({setAnswer:e}){var _;const[i,o]=k.useState(Array(10).fill({})),[s,a]=k.useState(0),[u,l]=k.useState(Array(10).fill("")),[c,f]=LO({marginBottom:0,marginLeft:0,marginTop:0,marginRight:0,height:360,width:700});k.useEffect(()=>{o((()=>{const E=[];let S=3e4,T=0;for(let C=2025;C<2035&&!(S<=0);C+=1){const A=S*.065,R=u[C-2025]*12,N=Math.min(S+A,R);S=Math.max(0,S+A-N),T+=N,E.push({year:C,totalPaid:T,remainingBalance:S,yearlyInterest:A})}return E})())},[u]);function d(){e({status:!0,answers:{[bat]:b6}}),k2=!0}const h=()=>{b6[s]=u[s];const w=s+1,S=(i[s]||{remainingBalance:0}).remainingBalance??0;w>=10||S<=4100?d():a(w)},p=i[s]||{remainingBalance:0},m=u[s]??0,g=p.remainingBalance??0,y=s>=i.length||g+m*12<=0,v=m<341||m>5e3;return k.useEffect(()=>{y&&s!==0&&!k2&&d()},[y]),b.jsxs("div",{style:Ln.chartContainer,children:[b.jsx("div",{style:{alignSelf:"center"}}),!k2,k2?b.jsx("div",{children:b.jsx(MO,{data:b6})}):b.jsxs(b.Fragment,{children:[b.jsx("div",{ref:c,style:Ln.chartWrapper,children:b.jsxs("div",{style:{display:"flex",flexDirection:"row",gap:"4em",justifyContent:"top"},children:[b.jsx("div",{style:Ln.visWrapper,children:b.jsxs("div",{style:{marginTop:"0px",alignItems:"flex-start"},children:[b.jsx("h2",{style:{textAlign:"center"},children:"Loan Payoff"}),b.jsx("svg",{width:f.width*.5,height:f.height,children:b.jsx("g",{transform:"translate(0, 0)",children:i.length>0&&s<i.length?b.jsx(VV,{data:[i[s]],radius:175,colors:["#06945D","#e5e5e5"],year:s+2025}):b.jsx("text",{children:"No data available for this year."})})})]})}),b.jsxs("div",{style:{marginLeft:"1em",justifyContent:"top",alignItems:"flex-start"},children:[b.jsx("h2",{style:{textAlign:"center"},children:"Budget: $5,000"}),b.jsx(L_,{size:370,data:u[s]}),b.jsxs("div",{style:{textAlign:"center",marginTop:"3em"},children:[b.jsx("h2",{children:"EOY Loan Balance"}),b.jsx("h2",{style:{marginTop:"1px",fontSize:"36px",fontWeight:"300"},children:new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format((_=i[s])==null?void 0:_.remainingBalance)})]})]})]})}),b.jsx("h2",{style:{paddingTop:"10px",fontWeight:"normal"},children:"How much do you want to pay each month?"}),b.jsxs("div",{style:{display:"flex"},children:[b.jsx(_at,{payment:u[s],setPayment:w=>{const E=[...u],S=typeof w=="function"?w(E[s]):w;E[s]=S,l(E)}}),b.jsx("button",{type:"button",style:y||v?Ln.disabledButton:Ln.nextYearButton,onClick:h,disabled:y||v,children:"Next Year"})]})]})]})}const Eat=Object.freeze(Object.defineProperty({__proto__:null,default:wat},Symbol.toStringTag,{value:"Module"})),xat=function(){return b.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",paddingBottom:"4%"},children:b.jsxs("video",{width:"1000",controls:!0,children:[b.jsx("source",{src:"./assets/pie_instruction.mp4",type:"video/mp4"}),"Your browser does not support the video tag."]})})},Tat=Object.freeze(Object.defineProperty({__proto__:null,default:xat},Symbol.toStringTag,{value:"Module"})),Sat=function(){return b.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",paddingBottom:"4%"},children:b.jsxs("video",{width:"1000",controls:!0,children:[b.jsx("source",{src:"./assets/text_instruction.mp4",type:"video/mp4"}),"Your browser does not support the video tag."]})})},Cat=Object.freeze(Object.defineProperty({__proto__:null,default:Sat},Symbol.toStringTag,{value:"Module"}));let w6=!1;const E6=[],Aat="answer-array",Gk=341,Vj=5e3;function kat({payment:e,setPayment:t}){const n=r=>{const i=typeof r=="string"?parseFloat(r):r;t(i??Gk)};return b.jsx("div",{style:Ln.paymentOptions,children:b.jsx("div",{style:Ln.inputWrapper,children:b.jsx(Ty,{error:e<Gk||e>Vj?"Invalid input.":"",min:Gk,max:Vj,size:"lg",prefix:"$",clampBehavior:"blur",value:e,onChange:n,hideControls:!0})})})}function Iat({setAnswer:e}){var v,_,w,E,S,T;const[i,o]=k.useState(Array(10).fill({})),[s,a]=k.useState(0),[u,l]=k.useState(Array(10).fill(""));k.useEffect(()=>{o((()=>{const A=[];let R=3e4,N=0;for(let O=2025;O<2035&&!(R<=0);O+=1){const D=R*.065,M=u[O-2025]*12,F=Math.min(R+D,M);R=Math.max(0,R+D-F),N+=F,A.push({year:O,totalPaid:N,remainingBalance:R,yearlyInterest:D})}return A})())},[u]);const c=()=>{e({status:!0,answers:{[Aat]:E6}}),w6=!0},f=()=>{E6[s]=u[s];const C=s+1,R=(i[s]||{remainingBalance:0}).remainingBalance??0;C>=10||R<=4100?c():a(C)},d=i[s]||{remainingBalance:0},h=u[s]??0,p=d.remainingBalance??0,m=s>=i.length||p+h*12<=0,g=h<Gk||h>Vj,y=C=>Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(C);return k.useEffect(()=>{m&&s!==0&&!w6&&c()},[m]),b.jsx("div",{style:Ln.chartContainer,children:w6?b.jsx(MO,{data:E6}):b.jsxs(b.Fragment,{children:[b.jsxs("div",{style:Ln.contentContainer,children:[b.jsxs("div",{style:Ln.column,children:[b.jsx("h2",{style:Ln.header,children:"Loan Payoff"}),b.jsxs("h3",{style:Ln.year,children:["Year:",s+2025]}),b.jsxs("div",{id:"option-1",children:[b.jsxs(je,{size:"xl",style:{marginBottom:"12px"},children:["Percent Paid:",b.jsx(je,{fw:700,component:"span",children:((v=i[s])==null?void 0:v.totalPaid)<=0?" 0%":` ${((((_=i[s])==null?void 0:_.totalPaid)??0)/((((w=i[s])==null?void 0:w.totalPaid)??0)+(((E=i[s])==null?void 0:E.remainingBalance)??0))*100).toFixed(0)}%`})]}),b.jsxs(je,{size:"xl",style:{marginBottom:"12px"},children:["Current Loan Balance:",b.jsx(je,{fw:700,component:"span",children:` ${y(((S=i[s-1])==null?void 0:S.remainingBalance)??3e4)}`})]}),b.jsxs(je,{size:"xl",style:{marginBottom:"12px"},children:["EOY Loan Balance:",b.jsx(je,{fw:700,component:"span",children:` ${y((T=i[s])==null?void 0:T.remainingBalance)}`})]})]})]}),b.jsxs("div",{style:Ln.column,children:[b.jsx("h2",{style:Ln.header,children:"Budget: $5,000"}),b.jsx(L_,{size:370,data:u[s]})]})]}),b.jsx("h2",{style:{paddingTop:"10px",fontWeight:"normal"},children:"How much do you want to pay each month?"}),b.jsxs("div",{style:{display:"flex"},children:[b.jsx(kat,{payment:u[s],setPayment:C=>{const A=[...u];A[s]=typeof C=="function"?C(u[s]):C,l(A)}}),b.jsx("button",{type:"button",style:m||g?Ln.disabledButton:Ln.nextYearButton,onClick:f,disabled:m||g,children:"Next Year"})]})]})})}const Rat=Object.freeze(Object.defineProperty({__proto__:null,default:Iat},Symbol.toStringTag,{value:"Module"})),fre=Object.assign({"../public/demo-cleveland/assets/BarChart.tsx":git,"../public/demo-cleveland/assets/BubbleChart.tsx":xit,"../public/demo-cleveland/assets/PieChart.tsx":Iit,"../public/demo-cleveland/assets/StackedBarChart.tsx":Oit,"../public/demo-cleveland/assets/chartcomponents/Bars.tsx":fit,"../public/demo-cleveland/assets/chartcomponents/Bubbles.tsx":yit,"../public/demo-cleveland/assets/chartcomponents/DotMarks.tsx":vit,"../public/demo-cleveland/assets/chartcomponents/NumericAxisH.tsx":Rit,"../public/demo-cleveland/assets/chartcomponents/NumericAxisV.tsx":dit,"../public/demo-cleveland/assets/chartcomponents/OrdinalAxisHWithDotMarks.tsx":hit,"../public/demo-cleveland/assets/chartcomponents/Slices.tsx":Tit,"../public/demo-cleveland/assets/chartcomponents/SlicesDotMarks.tsx":Sit,"../public/demo-cleveland/assets/chartcomponents/StackedBars.tsx":Nit,"../public/demo-cleveland/assets/hooks/useChartDimensions.tsx":cit,"../public/demo-click-accuracy-test/assets/ClickAccuracyTest.tsx":Ast,"../public/demo-mqp-study/assets/Bar.tsx":Ist,"../public/demo-mqp-study/assets/ChartParam.ts":Rst,"../public/demo-mqp-study/assets/Color.tsx":Nst,"../public/demo-mqp-study/assets/DataExplorer.tsx":eat,"../public/demo-mqp-study/assets/LineChart.tsx":Jst,"../public/demo-mqp-study/assets/RangeSelector.tsx":Zst,"../public/demo-mqp-study/assets/Results.tsx":nat,"../public/demo-mqp-study/assets/StackedBarChart.tsx":uat,"../public/demo-mqp-study/assets/XAxis.tsx":Xst,"../public/demo-mqp-study/assets/YAxis.tsx":Qst,"../public/demo-mqp-study/assets/attCheckPie.tsx":pat,"../public/demo-mqp-study/assets/attCheckText.tsx":vat,"../public/demo-mqp-study/assets/chartcomponents/PieChart.tsx":lat,"../public/demo-mqp-study/assets/chartcomponents/SideBarPie.tsx":oat,"../public/demo-mqp-study/assets/chartcomponents/StackedBars.tsx":iat,"../public/demo-mqp-study/assets/hooks/useChartDimensions.tsx":rat,"../public/demo-mqp-study/assets/pieChartStudy.tsx":Eat,"../public/demo-mqp-study/assets/pieInstructionVideo.tsx":Tat,"../public/demo-mqp-study/assets/styles.ts":cat,"../public/demo-mqp-study/assets/textInstructionVideo.tsx":Cat,"../public/demo-mqp-study/assets/textStudy.tsx":Rat});function Nat({currentConfig:e}){const t=Ch(),n=Py(),r=`../public/${e.path}`,i=r in fre?fre[r].default:null,o=Ff(),{updateResponseBlockValidation:s,setIframeAnswers:a}=Lf();function u({status:l,provenanceGraph:c,answers:f}){o(s({location:"sidebar",identifier:`${n}_${t}`,status:l,values:f,provenanceGraph:c})),o(a(f))}return b.jsx(k.Suspense,{fallback:b.jsx("div",{children:"Loading..."}),children:i?b.jsx(i,{parameters:e.parameters,setAnswer:u}):b.jsx(P0,{path:e.path})})}function Pat({currentConfig:e}){const[t,n]=k.useState(""),[r,i]=k.useState(!0);return k.useEffect(()=>{async function o(){const s=await $z(e.path);s!==void 0&&n(s),i(!1)}o()},[e.path]),r||t?b.jsx(Ws,{text:t}):b.jsx(P0,{path:e.path})}const Dat={},Oat=Object.freeze(Object.defineProperty({__proto__:null,default:Dat},Symbol.toStringTag,{value:"Module"})),$at=ZRe(Oat);var Mat=$at;function Lat(e,t){var n,r="",i=0,o=!0,s=0,a;function u(){return a=e.charAt(s),s++,a}for(u(),a==="-"&&(r="-",u());a>="0"&&a<="9";)o&&(a=="0"?i++:o=!1),r+=a,u();if(o&&i--,a===".")for(r+=".";u()&&a>="0"&&a<="9";)r+=a;if(a==="e"||a==="E")for(r+=a,u(),(a==="-"||a==="+")&&(r+=a,u());a>="0"&&a<="9";)r+=a,u();for(;a&&a<=" ";)u();if(t&&(a===","||a==="}"||a==="]"||a==="#"||a==="/"&&(e[s]==="/"||e[s]==="*"))&&(a=0),n=+r,!(a||i||!isFinite(n)))return n}function Fat(e,t){return Object.defineProperty&&Object.defineProperty(e,"__COMMENTS__",{enumerable:!1,writable:!0}),e.__COMMENTS__=t||{}}function jat(e){Object.defineProperty(e,"__COMMENTS__",{value:void 0})}function Bat(e){return e.__COMMENTS__}function Uat(e){if(!e)return"";var t=e.split(`
`),n,r,i,o;for(i=0;i<t.length;i++)for(n=t[i],o=n.length,r=0;r<o;r++){var s=n[r];if(s==="#")break;if(s==="/"&&(n[r+1]==="/"||n[r+1]==="*")){n[r+1]==="*"&&(i=t.length);break}else if(s>" "){t[i]="# "+n;break}}return t.join(`
`)}var FO={EOL:Mat.EOL||`
`,tryParseNumber:Lat,createComment:Fat,removeComment:jat,getComment:Bat,forceComment:Uat},zat="3.2.1";function Vat(e,t){if(Object.prototype.toString.apply(e)!=="[object Array]"){if(e)throw new Error("dsf option must contain an array!");return dre}else if(e.length===0)return dre;var n=[];function r(i){return{}.toString.call(i)==="[object Function]"}return e.forEach(function(i){if(!i.name||!r(i.parse)||!r(i.stringify))throw new Error("extension does not match the DSF interface");n.push(function(){try{if(t=="parse")return i.parse.apply(null,arguments);if(t=="stringify"){var o=i.stringify.apply(null,arguments);if(o!==void 0&&(typeof o!="string"||o.length===0||o[0]==='"'||[].some.call(o,function(s){return qat(s)})))throw new Error("value may not be empty, start with a quote or contain a punctuator character except colon: "+o);return o}else throw new Error("Invalid type")}catch(s){throw new Error("DSF-"+i.name+" failed; "+s.message)}})}),Hat.bind(null,n)}function Hat(e,t){if(e)for(var n=0;n<e.length;n++){var r=e[n](t);if(r!==void 0)return r}}function dre(){}function qat(e){return e==="{"||e==="}"||e==="["||e==="]"||e===","}function g1e(){return{name:"math",parse:function(e){switch(e){case"+inf":case"inf":case"+Inf":case"Inf":return 1/0;case"-inf":case"-Inf":return-1/0;case"nan":case"NaN":return NaN}},stringify:function(e){if(typeof e=="number"){if(1/e===-1/0)return"-0";if(e===1/0)return"Inf";if(e===-1/0)return"-Inf";if(isNaN(e))return"NaN"}}}}g1e.description="support for Inf/inf, -Inf/-inf, Nan/naN and -0";function y1e(e){var t=e&&e.out;return{name:"hex",parse:function(n){if(/^0x[0-9A-Fa-f]+$/.test(n))return parseInt(n,16)},stringify:function(n){if(t&&Number.isInteger(n))return"0x"+n.toString(16)}}}y1e.description="parse hexadecimal numbers prefixed with 0x";function v1e(){return{name:"date",parse:function(e){if(/^\d{4}-\d{2}-\d{2}$/.test(e)||/^\d{4}-\d{2}-\d{2}T\d{2}\:\d{2}\:\d{2}(?:.\d+)(?:Z|[+-]\d{2}:\d{2})$/.test(e)){var t=Date.parse(e);if(!isNaN(t))return new Date(t)}},stringify:function(e){if(Object.prototype.toString.call(e)==="[object Date]"){var t=e.toISOString();return t.indexOf("T00:00:00.000Z",t.length-14)!==-1?t.substr(0,10):t}}}}v1e.description="support ISO dates";var HV={loadDsf:Vat,std:{math:g1e,hex:y1e,date:v1e}},Wat=function(e,t){var n=FO,r=HV,i,o,s,a={'"':'"',"'":"'","\\":"\\","/":"/",b:"\b",f:"\f",n:`
`,r:"\r",t:"	"},u,l;function c(){o=0,s=" "}function f(M){return M==="{"||M==="}"||M==="["||M==="]"||M===","||M===":"}function d(M){var F,L=0,B=1;for(F=o-1;F>0&&i[F]!==`
`;F--,L++);for(;F>0;F--)i[F]===`
`&&B++;throw new Error(M+" at line "+B+","+L+" >>>"+i.substr(o-L,20)+" ...")}function h(){return s=i.charAt(o),o++,s}function p(M){return i.charAt(o+M)}function m(M){for(var F="",L=s;h();){if(s===L)return h(),M&&L==="'"&&s==="'"&&F.length===0?(h(),g()):F;if(s==="\\")if(h(),s==="u"){for(var B=0,U=0;U<4;U++){h();var H=s.charCodeAt(0),P;s>="0"&&s<="9"?P=H-48:s>="a"&&s<="f"?P=H-97+10:s>="A"&&s<="F"?P=H-65+10:d("Bad \\u char "+s),B=B*16+P}F+=String.fromCharCode(B)}else if(typeof a[s]=="string")F+=a[s];else break;else s===`
`||s==="\r"?d("Bad string containing newline"):F+=s}d("Bad string")}function g(){for(var M="",F=0,L=0;;){var B=p(-L-5);if(!B||B===`
`)break;L++}function U(){for(var H=L;s&&s<=" "&&s!==`
`&&H-- >0;)h()}for(;s&&s<=" "&&s!==`
`;)h();for(s===`
`&&(h(),U());;){if(!s)d("Bad multiline string");else if(s==="'"){if(F++,h(),F===3)return M.slice(-1)===`
`&&(M=M.slice(0,-1)),M;continue}else for(;F>0;)M+="'",F--;s===`
`?(M+=`
`,h(),U()):(s!=="\r"&&(M+=s),h())}}function y(){if(s==='"'||s==="'")return m(!1);for(var M="",F=o,L=-1;;){if(s===":")return M?L>=0&&L!==M.length&&(o=F+L,d("Found whitespace in your key name (use quotes to include)")):d("Found ':' but no key name (for an empty key name use quotes)"),M;s<=" "?s?L<0&&(L=M.length):d("Found EOF while looking for a key name (check your syntax)"):f(s)?d("Found '"+s+"' where a key name was expected (check your syntax or use quotes if the key name includes {}[],: or whitespace)"):M+=s,h()}}function v(){for(;s;){for(;s&&s<=" ";)h();if(s==="#"||s==="/"&&p(0)==="/")for(;s&&s!==`
`;)h();else if(s==="/"&&p(0)==="*"){for(h(),h();s&&!(s==="*"&&p(0)==="/");)h();s&&(h(),h())}else break}}function _(){var M=s;for(f(s)&&d("Found a punctuator character '"+s+"' when expecting a quoteless string (check your syntax)");;){h();var F=s==="\r"||s===`
`||s==="";if(F||s===","||s==="}"||s==="]"||s==="#"||s==="/"&&(p(0)==="/"||p(0)==="*")){var L=M[0];switch(L){case"f":if(M.trim()==="false")return!1;break;case"n":if(M.trim()==="null")return null;break;case"t":if(M.trim()==="true")return!0;break;default:if(L==="-"||L>="0"&&L<="9"){var B=n.tryParseNumber(M);if(B!==void 0)return B}}if(F){M=M.trim();var U=l(M);return U!==void 0?U:M}}M+=s}}function w(M,F){var L;for(M--,L=o-2;L>M&&i[L]<=" "&&i[L]!==`
`;L--);i[L]===`
`&&L--,i[L]==="\r"&&L--;var B=i.substr(M,L-M+1);for(L=0;L<B.length;L++)if(B[L]>" "){var U=B.indexOf(`
`);if(U>=0){var H=[B.substr(0,U),B.substr(U+1)];return F&&H[0].trim().length===0&&H.shift(),H}else return[B]}return[]}function E(M){function F(B,U){var H,P,z,W;switch(typeof B){case"string":B.indexOf(U)>=0&&(W=B);break;case"object":if(Object.prototype.toString.apply(B)==="[object Array]")for(H=0,z=B.length;H<z;H++)W=F(B[H],U)||W;else for(P in B)Object.prototype.hasOwnProperty.call(B,P)&&(W=F(B[P],U)||W)}return W}function L(B){var U=F(M,B);return U?"found '"+B+`' in a string value, your mistake could be with:
  > `+U+`
  (unquoted strings contain everything up to the next line!)`:""}return L("}")||L("]")}function S(){var M=[],F,L,B;try{if(u&&(F=n.createComment(M,{a:[]})),h(),L=o,v(),F&&(B=w(L,!0).join(`
`)),s==="]")return h(),F&&(F.e=[B]),M;for(;s;){if(M.push(C()),L=o,v(),s===","&&(h(),L=o,v()),F){var U=w(L);F.a.push([B||"",U[0]||""]),B=U[1]}if(s==="]")return h(),F&&(F.a[F.a.length-1][1]+=B||""),M;v()}d("End of input while parsing an array (missing ']')")}catch(H){throw H.hint=H.hint||E(M),H}}function T(M){var F="",L={},B,U,H;try{if(u&&(B=n.createComment(L,{c:{},o:[]})),M?U=1:(h(),U=o),v(),B&&(H=w(U,!0).join(`
`)),s==="}"&&!M)return B&&(B.e=[H]),h(),L;for(;s;){if(F=y(),v(),s!==":"&&d("Expected ':' instead of '"+s+"'"),h(),L[F]=C(),U=o,v(),s===","&&(h(),U=o,v()),B){var P=w(U);B.c[F]=[H||"",P[0]||""],H=P[1],B.o.push(F)}if(s==="}"&&!M)return h(),B&&(B.c[F][1]+=H||""),L;v()}if(M)return L;d("End of input while parsing an object (missing '}')")}catch(z){throw z.hint=z.hint||E(L),z}}function C(){switch(v(),s){case"{":return T();case"[":return S();case"'":case'"':return m(!0);default:return _()}}function A(M,F){var L=o;if(v(),s&&d("Syntax error, found trailing characters"),u){var B=F.join(`
`),U=w(L).join(`
`);if(U||B){var H=n.createComment(M,n.getComment(M));H.r=[B,U]}}return M}function R(){v();var M=u?w(1):null;switch(s){case"{":return A(T(),M);case"[":return A(S(),M);default:return A(C(),M)}}function N(){v();var M=u?w(1):null;switch(s){case"{":return A(T(),M);case"[":return A(S(),M)}try{return A(T(!0),M)}catch(F){c();try{return A(C(),M)}catch{throw F}}}if(typeof e!="string")throw new Error("source is not a string");var O=null,D=!0;return t&&typeof t=="object"&&(u=t.keepWsc,O=t.dsf,D=t.legacyRoot!==!1),l=r.loadDsf(O,"parse"),i=e,c(),D?N():R()},Gat=function(e,t){var n=FO,r=HV,i={obj:["{","}"],arr:["[","]"],key:["",""],qkey:['"','"'],col:[":",""],com:[",",""],str:["",""],qstr:['"','"'],mstr:["'''","'''"],num:["",""],lit:["",""],dsf:["",""],esc:["\\",""],uni:["\\u",""],rem:["",""]},o=n.EOL,s="  ",a=!1,u=!1,l=!1,c=!1,f=0,d=1,h="",p=null,m=!1,g=i;if(t&&typeof t=="object"){t.quotes=t.quotes==="always"?"strings":t.quotes,(t.eol===`
`||t.eol===`\r
`)&&(o=t.eol),a=t.keepWsc,f=t.condense||0,u=t.bracesSameLine,l=t.quotes==="all"||t.quotes==="keys",c=t.quotes==="all"||t.quotes==="strings"||t.separator===!0,c||t.multiline=="off"?d=0:d=t.multiline=="no-tabs"?2:1,h=t.separator===!0?g.com[0]:"",p=t.dsf,m=t.sortProps,typeof t.space=="number"?s=new Array(t.space+1).join(" "):typeof t.space=="string"&&(s=t.space),t.colors===!0&&(g={obj:["\x1B[37m{\x1B[0m","\x1B[37m}\x1B[0m"],arr:["\x1B[37m[\x1B[0m","\x1B[37m]\x1B[0m"],key:["\x1B[33m","\x1B[0m"],qkey:['\x1B[33m"','"\x1B[0m'],col:["\x1B[37m:\x1B[0m",""],com:["\x1B[37m,\x1B[0m",""],str:["\x1B[37;1m","\x1B[0m"],qstr:['\x1B[37;1m"','"\x1B[0m'],mstr:["\x1B[37;1m'''","'''\x1B[0m"],num:["\x1B[36;1m","\x1B[0m"],lit:["\x1B[36m","\x1B[0m"],dsf:["\x1B[37m","\x1B[0m"],esc:["\x1B[31m\\","\x1B[0m"],uni:["\x1B[31m\\u","\x1B[0m"],rem:["\x1B[35m","\x1B[0m"]});var y,v=Object.keys(i);for(y=v.length-1;y>=0;y--){var _=v[y];g[_].push(i[_][0].length,i[_][1].length)}}var w,E="---\u2028--\uFEFF-",S=new RegExp('[\\\\\\"\0-'+E+"]","g"),T=new RegExp(`^\\s|^"|^'|^#|^\\/\\*|^\\/\\/|^\\{|^\\}|^\\[|^\\]|^:|^,|\\s$|[\0-`+E+"]","g"),C=new RegExp("'''|^[\\s]+$|[\0-"+(d===2?"	":"\b")+"\v\f-"+E+"]","g"),A=new RegExp("^(true|false|null)\\s*((,|\\]|\\}|#|//|/\\*).*)?$"),R={"\b":"b","	":"t","\n":"n","\f":"f","\r":"r",'"':'"',"\\":"\\"},N=/[,\{\[\}\]\s:#"']|\/\/|\/\*/,O="",D=0;function M(W,j){return D+=W[0].length+W[1].length-W[2]-W[3],W[0]+j+W[1]}function F(W){return W.replace(S,function(j){var q=R[j];return typeof q=="string"?M(g.esc,q):M(g.uni,("0000"+j.charCodeAt(0).toString(16)).slice(-4))})}function L(W,j,q,G){return W?(T.lastIndex=0,A.lastIndex=0,c||q||T.test(W)||n.tryParseNumber(W,!0)!==void 0||A.test(W)?(S.lastIndex=0,C.lastIndex=0,S.test(W)?!C.test(W)&&!G&&d?B(W,j):M(g.qstr,F(W)):M(g.qstr,W)):M(g.str,W)):M(g.qstr,"")}function B(W,j){var q,G=W.replace(/\r/g,"").split(`
`);if(j+=s,G.length===1)return M(g.mstr,G[0]);var te=o+j+g.mstr[0];for(q=0;q<G.length;q++)te+=o,G[q]&&(te+=j+G[q]);return te+o+j+g.mstr[1]}function U(W){return W?l||N.test(W)?(S.lastIndex=0,M(g.qkey,S.test(W)?F(W):W)):M(g.key,W):'""'}function H(W,j,q,G){function te(Zt){return Zt&&Zt[Zt[0]==="\r"?1:0]===`
`}function pe(Zt){return Zt&&!te(Zt)}function be(Zt,an,Dn){if(!Zt)return"";Zt=n.forceComment(Zt);var On,Ho=Zt.length;for(On=0;On<Ho&&Zt[On]<=" ";On++);return Dn&&On>0&&(Zt=Zt.substr(On)),On<Ho?an+M(g.rem,Zt):Zt}var le=w(W);if(le!==void 0)return M(g.dsf,le);switch(typeof W){case"string":return L(W,O,j,G);case"number":return isFinite(W)?M(g.num,String(W)):M(g.lit,"null");case"boolean":return M(g.lit,String(W));case"object":if(!W)return M(g.lit,"null");var me;a&&(me=n.getComment(W));var Se=Object.prototype.toString.apply(W)==="[object Array]",ge=O;O+=s;var tt=o+ge,Ue=o+O,mt=q||u?"":tt,it=[],Re,$e=f?[]:null,Ge=c,dt=d,Nt=h?"":g.com[0],He=0,fe,lt,gt,ce,Te,ze,st,vt,vn;if(Se){for(fe=0,lt=W.length;fe<lt;fe++){if(Re=fe<lt-1,me?(ze=me.a[fe]||[],st=pe(ze[1]),it.push(be(ze[0],`
`)+Ue),$e&&(ze[0]||ze[1]||st)&&($e=null)):it.push(Ue),D=0,ce=W[fe],it.push(H(ce,me?st:!1,!0)+(Re?h:"")),$e){switch(typeof ce){case"string":D=0,c=!0,d=0,$e.push(H(ce,!1,!0)+(Re?g.com[0]:"")),c=Ge,d=dt;break;case"object":if(ce){$e=null;break}default:$e.push(it[it.length-1]+(Re?Nt:""));break}Re&&(D+=g.com[0].length-g.com[2]),He+=D}me&&ze[1]&&it.push(be(ze[1],st?" ":`
`,st))}lt===0?me&&me.e&&it.push(be(me.e[0],`
`)+tt):it.push(tt),it.length===0?vt=M(g.arr,""):(vt=mt+M(g.arr,it.join("")),$e&&(vn=$e.join(" "),vn.length-He<=f&&(vt=M(g.arr,vn))))}else{var Zn=me?me.o.slice():[],bn=[];for(gt in W)Object.prototype.hasOwnProperty.call(W,gt)&&Zn.indexOf(gt)<0&&bn.push(gt);m&&bn.sort();var Bn=Zn.concat(bn);for(fe=0,lt=Bn.length;fe<lt;fe++)if(Re=fe<lt-1,gt=Bn[fe],me?(ze=me.c[gt]||[],st=pe(ze[1]),it.push(be(ze[0],`
`)+Ue),$e&&(ze[0]||ze[1]||st)&&($e=null)):it.push(Ue),D=0,ce=W[gt],Te=H(ce,me&&st),it.push(U(gt)+g.col[0]+(te(Te)?"":" ")+Te+(Re?h:"")),me&&ze[1]&&it.push(be(ze[1],st?" ":`
`,st)),$e){switch(typeof ce){case"string":D=0,c=!0,d=0,Te=H(ce,!1),c=Ge,d=dt,$e.push(U(gt)+g.col[0]+" "+Te+(Re?g.com[0]:""));break;case"object":if(ce){$e=null;break}default:$e.push(it[it.length-1]+(Re?Nt:""));break}D+=g.col[0].length-g.col[2],Re&&(D+=g.com[0].length-g.com[2]),He+=D}lt===0?me&&me.e&&it.push(be(me.e[0],`
`)+tt):it.push(tt),it.length===0?vt=M(g.obj,""):(vt=mt+M(g.obj,it.join("")),$e&&(vn=$e.join(" "),vn.length-He<=f&&(vt=M(g.obj,vn))))}return O=ge,vt}}w=r.loadDsf(p,"stringify");var P="",z=a?z=(n.getComment(e)||{}).r:null;return z&&z[0]&&(P=z[0]+`
`),P+=H(e,null,!0,!0),z&&(P+=z[1]||""),P},$1=FO;function Rx(e,t,n){var r;return e&&(r={b:e}),t&&((r=r||{}).a=t),n&&((r=r||{}).x=n),r}function Hj(e,t){if(!(e===null||typeof e!="object")){var n=$1.getComment(e);n&&$1.removeComment(e);var r,i,o,s;if(Object.prototype.toString.apply(e)==="[object Array]"){for(s={a:{}},r=0,i=e.length;r<i;r++)hre(s.a,r,n.a[r],Hj(e[r]))&&(o=!0);!o&&n.e&&(s.e=Rx(n.e[0],n.e[1]),o=!0)}else{s={s:{}};var a,u=Object.keys(e);for(n&&n.o?(a=[],n.o.concat(u).forEach(function(c){Object.prototype.hasOwnProperty.call(e,c)&&a.indexOf(c)<0&&a.push(c)})):a=u,s.o=a,r=0,i=a.length;r<i;r++){var l=a[r];hre(s.s,l,n.c[l],Hj(e[l]))&&(o=!0)}!o&&n.e&&(s.e=Rx(n.e[0],n.e[1]),o=!0)}return t&&n&&n.r&&(s.r=Rx(n.r[0],n.r[1])),o?s:void 0}}function Yat(){var e="";return[].forEach.call(arguments,function(t){t&&t.trim()!==""&&(e&&(e+="; "),e+=t.trim())}),e}function Kat(e,t){var n=[];if(qj(e,t,n,[]),n.length>0){var r=SN(t,null,1);r+=`
# Orphaned comments:
`,n.forEach(function(i){r+=("# "+i.path.join("/")+": "+Yat(i.b,i.a,i.e)).replace(`
`,"\\n ")+`
`}),SN(t,r,1)}}function hre(e,t,n,r){var i=Rx(n?n[0]:void 0,n?n[1]:void 0,r);return i&&(e[t]=i),i}function Nx(e,t){var n=Rx(t.b,t.a);return n.path=e,n}function Px(e,t,n){if(e){var r,i;if(e.a)for(r=0,i=e.a.length;r<i;r++){var o=n.slice().concat([r]),s=e.a[r];s&&(t.push(Nx(o,s)),Px(s.x,t,o))}else e.o&&e.o.forEach(function(a){var u=n.slice().concat([a]),l=e.s[a];l&&(t.push(Nx(u,l)),Px(l.x,t,u))});e.e&&t.push(Nx(n,e.e))}}function qj(e,t,n,r){if(e){if(t===null||typeof t!="object"){Px(e,n,r);return}var i,o=$1.createComment(t);if(r.length===0&&e.r&&(o.r=[e.r.b,e.r.a]),Object.prototype.toString.apply(t)==="[object Array]"){o.a=[];var s=e.a||{};for(var a in s)if(s.hasOwnProperty(a)){i=parseInt(a);var u=e.a[a];if(u){var l=r.slice().concat([i]);i<t.length?(o.a[i]=[u.b,u.a],qj(u.x,t[i],n,l)):(n.push(Nx(l,u)),Px(u.x,n,l))}}i===0&&e.e&&(o.e=[e.e.b,e.e.a])}else o.c={},o.o=[],(e.o||[]).forEach(function(c){var f=r.slice().concat([c]),d=e.s[c];Object.prototype.hasOwnProperty.call(t,c)?(o.o.push(c),d&&(o.c[c]=[d.b,d.a],qj(d.x,t[c],n,f))):d&&(n.push(Nx(f,d)),Px(d.x,n,f))}),e.e&&(o.e=[e.e.b,e.e.a])}}function SN(e,t,n){var r=$1.createComment(e,$1.getComment(e));return r.r||(r.r=["",""]),(t||t==="")&&(r.r[n]=$1.forceComment(t)),r.r[n]||""}var Xat={extract:function(e){return Hj(e,!0)},merge:Kat,header:function(e,t){return SN(e,t,0)},footer:function(e,t){return SN(e,t,1)}};/*!
 * Hjson v3.2.1
 * https://hjson.github.io
 *
 * Copyright 2014-2017 Christian Zangl, MIT license
 * Details and documentation:
 * https://github.com/hjson/hjson-js
 *
 * This code is based on the the JSON version by Douglas Crockford:
 * https://github.com/douglascrockford/JSON-js (json_parse.js, json2.js)
 */var pre=FO,Qat=zat,mre=Wat,gre=Gat,Jat=Xat,Zat=HV,qV={parse:mre,stringify:gre,endOfLine:function(){return pre.EOL},setEndOfLine:function(e){(e===`
`||e===`\r
`)&&(pre.EOL=e)},version:Qat,rt:{parse:function(e,t){return(t=t||{}).keepWsc=!0,mre(e,t)},stringify:function(e,t){return(t=t||{}).keepWsc=!0,gre(e,t)}},comments:Jat,dsf:Zat.std},Wj={exports:{}},b1e={},tc={},Cb={},bC={},pn={},QT={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.regexpCode=e.getEsmExportName=e.getProperty=e.safeStringify=e.stringify=e.strConcat=e.addCodeArg=e.str=e._=e.nil=e._Code=e.Name=e.IDENTIFIER=e._CodeOrName=void 0;class t{}e._CodeOrName=t,e.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;class n extends t{constructor(v){if(super(),!e.IDENTIFIER.test(v))throw new Error("CodeGen: name must be a valid identifier");this.str=v}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}}e.Name=n;class r extends t{constructor(v){super(),this._items=typeof v=="string"?[v]:v}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;const v=this._items[0];return v===""||v==='""'}get str(){var v;return(v=this._str)!==null&&v!==void 0?v:this._str=this._items.reduce((_,w)=>`${_}${w}`,"")}get names(){var v;return(v=this._names)!==null&&v!==void 0?v:this._names=this._items.reduce((_,w)=>(w instanceof n&&(_[w.str]=(_[w.str]||0)+1),_),{})}}e._Code=r,e.nil=new r("");function i(y,...v){const _=[y[0]];let w=0;for(;w<v.length;)a(_,v[w]),_.push(y[++w]);return new r(_)}e._=i;const o=new r("+");function s(y,...v){const _=[h(y[0])];let w=0;for(;w<v.length;)_.push(o),a(_,v[w]),_.push(o,h(y[++w]));return u(_),new r(_)}e.str=s;function a(y,v){v instanceof r?y.push(...v._items):v instanceof n?y.push(v):y.push(f(v))}e.addCodeArg=a;function u(y){let v=1;for(;v<y.length-1;){if(y[v]===o){const _=l(y[v-1],y[v+1]);if(_!==void 0){y.splice(v-1,3,_);continue}y[v++]="+"}v++}}function l(y,v){if(v==='""')return y;if(y==='""')return v;if(typeof y=="string")return v instanceof n||y[y.length-1]!=='"'?void 0:typeof v!="string"?`${y.slice(0,-1)}${v}"`:v[0]==='"'?y.slice(0,-1)+v.slice(1):void 0;if(typeof v=="string"&&v[0]==='"'&&!(y instanceof n))return`"${y}${v.slice(1)}`}function c(y,v){return v.emptyStr()?y:y.emptyStr()?v:s`${y}${v}`}e.strConcat=c;function f(y){return typeof y=="number"||typeof y=="boolean"||y===null?y:h(Array.isArray(y)?y.join(","):y)}function d(y){return new r(h(y))}e.stringify=d;function h(y){return JSON.stringify(y).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}e.safeStringify=h;function p(y){return typeof y=="string"&&e.IDENTIFIER.test(y)?new r(`.${y}`):i`[${y}]`}e.getProperty=p;function m(y){if(typeof y=="string"&&e.IDENTIFIER.test(y))return new r(`${y}`);throw new Error(`CodeGen: invalid export name: ${y}, use explicit $id name mapping`)}e.getEsmExportName=m;function g(y){return new r(y.toString())}e.regexpCode=g})(QT);var Gj={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ValueScope=e.ValueScopeName=e.Scope=e.varKinds=e.UsedValueState=void 0;const t=QT;class n extends Error{constructor(l){super(`CodeGen: "code" for ${l} not defined`),this.value=l.value}}var r;(function(u){u[u.Started=0]="Started",u[u.Completed=1]="Completed"})(r||(e.UsedValueState=r={})),e.varKinds={const:new t.Name("const"),let:new t.Name("let"),var:new t.Name("var")};class i{constructor({prefixes:l,parent:c}={}){this._names={},this._prefixes=l,this._parent=c}toName(l){return l instanceof t.Name?l:this.name(l)}name(l){return new t.Name(this._newName(l))}_newName(l){const c=this._names[l]||this._nameGroup(l);return`${l}${c.index++}`}_nameGroup(l){var c,f;if(!((f=(c=this._parent)===null||c===void 0?void 0:c._prefixes)===null||f===void 0)&&f.has(l)||this._prefixes&&!this._prefixes.has(l))throw new Error(`CodeGen: prefix "${l}" is not allowed in this scope`);return this._names[l]={prefix:l,index:0}}}e.Scope=i;class o extends t.Name{constructor(l,c){super(c),this.prefix=l}setValue(l,{property:c,itemIndex:f}){this.value=l,this.scopePath=(0,t._)`.${new t.Name(c)}[${f}]`}}e.ValueScopeName=o;const s=(0,t._)`\n`;class a extends i{constructor(l){super(l),this._values={},this._scope=l.scope,this.opts={...l,_n:l.lines?s:t.nil}}get(){return this._scope}name(l){return new o(l,this._newName(l))}value(l,c){var f;if(c.ref===void 0)throw new Error("CodeGen: ref must be passed in value");const d=this.toName(l),{prefix:h}=d,p=(f=c.key)!==null&&f!==void 0?f:c.ref;let m=this._values[h];if(m){const v=m.get(p);if(v)return v}else m=this._values[h]=new Map;m.set(p,d);const g=this._scope[h]||(this._scope[h]=[]),y=g.length;return g[y]=c.ref,d.setValue(c,{property:h,itemIndex:y}),d}getValue(l,c){const f=this._values[l];if(f)return f.get(c)}scopeRefs(l,c=this._values){return this._reduceValues(c,f=>{if(f.scopePath===void 0)throw new Error(`CodeGen: name "${f}" has no value`);return(0,t._)`${l}${f.scopePath}`})}scopeCode(l=this._values,c,f){return this._reduceValues(l,d=>{if(d.value===void 0)throw new Error(`CodeGen: name "${d}" has no value`);return d.value.code},c,f)}_reduceValues(l,c,f={},d){let h=t.nil;for(const p in l){const m=l[p];if(!m)continue;const g=f[p]=f[p]||new Map;m.forEach(y=>{if(g.has(y))return;g.set(y,r.Started);let v=c(y);if(v){const _=this.opts.es5?e.varKinds.var:e.varKinds.const;h=(0,t._)`${h}${_} ${y} = ${v};${this.opts._n}`}else if(v=d==null?void 0:d(y))h=(0,t._)`${h}${v}${this.opts._n}`;else throw new n(y);g.set(y,r.Completed)})}return h}}e.ValueScope=a})(Gj);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.or=e.and=e.not=e.CodeGen=e.operators=e.varKinds=e.ValueScopeName=e.ValueScope=e.Scope=e.Name=e.regexpCode=e.stringify=e.getProperty=e.nil=e.strConcat=e.str=e._=void 0;const t=QT,n=Gj;var r=QT;Object.defineProperty(e,"_",{enumerable:!0,get:function(){return r._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return r.str}}),Object.defineProperty(e,"strConcat",{enumerable:!0,get:function(){return r.strConcat}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return r.nil}}),Object.defineProperty(e,"getProperty",{enumerable:!0,get:function(){return r.getProperty}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return r.stringify}}),Object.defineProperty(e,"regexpCode",{enumerable:!0,get:function(){return r.regexpCode}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return r.Name}});var i=Gj;Object.defineProperty(e,"Scope",{enumerable:!0,get:function(){return i.Scope}}),Object.defineProperty(e,"ValueScope",{enumerable:!0,get:function(){return i.ValueScope}}),Object.defineProperty(e,"ValueScopeName",{enumerable:!0,get:function(){return i.ValueScopeName}}),Object.defineProperty(e,"varKinds",{enumerable:!0,get:function(){return i.varKinds}}),e.operators={GT:new t._Code(">"),GTE:new t._Code(">="),LT:new t._Code("<"),LTE:new t._Code("<="),EQ:new t._Code("==="),NEQ:new t._Code("!=="),NOT:new t._Code("!"),OR:new t._Code("||"),AND:new t._Code("&&"),ADD:new t._Code("+")};class o{optimizeNodes(){return this}optimizeNames(q,G){return this}}class s extends o{constructor(q,G,te){super(),this.varKind=q,this.name=G,this.rhs=te}render({es5:q,_n:G}){const te=q?n.varKinds.var:this.varKind,pe=this.rhs===void 0?"":` = ${this.rhs}`;return`${te} ${this.name}${pe};`+G}optimizeNames(q,G){if(q[this.name.str])return this.rhs&&(this.rhs=M(this.rhs,q,G)),this}get names(){return this.rhs instanceof t._CodeOrName?this.rhs.names:{}}}class a extends o{constructor(q,G,te){super(),this.lhs=q,this.rhs=G,this.sideEffects=te}render({_n:q}){return`${this.lhs} = ${this.rhs};`+q}optimizeNames(q,G){if(!(this.lhs instanceof t.Name&&!q[this.lhs.str]&&!this.sideEffects))return this.rhs=M(this.rhs,q,G),this}get names(){const q=this.lhs instanceof t.Name?{}:{...this.lhs.names};return D(q,this.rhs)}}class u extends a{constructor(q,G,te,pe){super(q,te,pe),this.op=G}render({_n:q}){return`${this.lhs} ${this.op}= ${this.rhs};`+q}}class l extends o{constructor(q){super(),this.label=q,this.names={}}render({_n:q}){return`${this.label}:`+q}}class c extends o{constructor(q){super(),this.label=q,this.names={}}render({_n:q}){return`break${this.label?` ${this.label}`:""};`+q}}class f extends o{constructor(q){super(),this.error=q}render({_n:q}){return`throw ${this.error};`+q}get names(){return this.error.names}}class d extends o{constructor(q){super(),this.code=q}render({_n:q}){return`${this.code};`+q}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(q,G){return this.code=M(this.code,q,G),this}get names(){return this.code instanceof t._CodeOrName?this.code.names:{}}}class h extends o{constructor(q=[]){super(),this.nodes=q}render(q){return this.nodes.reduce((G,te)=>G+te.render(q),"")}optimizeNodes(){const{nodes:q}=this;let G=q.length;for(;G--;){const te=q[G].optimizeNodes();Array.isArray(te)?q.splice(G,1,...te):te?q[G]=te:q.splice(G,1)}return q.length>0?this:void 0}optimizeNames(q,G){const{nodes:te}=this;let pe=te.length;for(;pe--;){const be=te[pe];be.optimizeNames(q,G)||(F(q,be.names),te.splice(pe,1))}return te.length>0?this:void 0}get names(){return this.nodes.reduce((q,G)=>O(q,G.names),{})}}class p extends h{render(q){return"{"+q._n+super.render(q)+"}"+q._n}}class m extends h{}class g extends p{}g.kind="else";class y extends p{constructor(q,G){super(G),this.condition=q}render(q){let G=`if(${this.condition})`+super.render(q);return this.else&&(G+="else "+this.else.render(q)),G}optimizeNodes(){super.optimizeNodes();const q=this.condition;if(q===!0)return this.nodes;let G=this.else;if(G){const te=G.optimizeNodes();G=this.else=Array.isArray(te)?new g(te):te}if(G)return q===!1?G instanceof y?G:G.nodes:this.nodes.length?this:new y(L(q),G instanceof y?[G]:G.nodes);if(!(q===!1||!this.nodes.length))return this}optimizeNames(q,G){var te;if(this.else=(te=this.else)===null||te===void 0?void 0:te.optimizeNames(q,G),!!(super.optimizeNames(q,G)||this.else))return this.condition=M(this.condition,q,G),this}get names(){const q=super.names;return D(q,this.condition),this.else&&O(q,this.else.names),q}}y.kind="if";class v extends p{}v.kind="for";class _ extends v{constructor(q){super(),this.iteration=q}render(q){return`for(${this.iteration})`+super.render(q)}optimizeNames(q,G){if(super.optimizeNames(q,G))return this.iteration=M(this.iteration,q,G),this}get names(){return O(super.names,this.iteration.names)}}class w extends v{constructor(q,G,te,pe){super(),this.varKind=q,this.name=G,this.from=te,this.to=pe}render(q){const G=q.es5?n.varKinds.var:this.varKind,{name:te,from:pe,to:be}=this;return`for(${G} ${te}=${pe}; ${te}<${be}; ${te}++)`+super.render(q)}get names(){const q=D(super.names,this.from);return D(q,this.to)}}class E extends v{constructor(q,G,te,pe){super(),this.loop=q,this.varKind=G,this.name=te,this.iterable=pe}render(q){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(q)}optimizeNames(q,G){if(super.optimizeNames(q,G))return this.iterable=M(this.iterable,q,G),this}get names(){return O(super.names,this.iterable.names)}}class S extends p{constructor(q,G,te){super(),this.name=q,this.args=G,this.async=te}render(q){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(q)}}S.kind="func";class T extends h{render(q){return"return "+super.render(q)}}T.kind="return";class C extends p{render(q){let G="try"+super.render(q);return this.catch&&(G+=this.catch.render(q)),this.finally&&(G+=this.finally.render(q)),G}optimizeNodes(){var q,G;return super.optimizeNodes(),(q=this.catch)===null||q===void 0||q.optimizeNodes(),(G=this.finally)===null||G===void 0||G.optimizeNodes(),this}optimizeNames(q,G){var te,pe;return super.optimizeNames(q,G),(te=this.catch)===null||te===void 0||te.optimizeNames(q,G),(pe=this.finally)===null||pe===void 0||pe.optimizeNames(q,G),this}get names(){const q=super.names;return this.catch&&O(q,this.catch.names),this.finally&&O(q,this.finally.names),q}}class A extends p{constructor(q){super(),this.error=q}render(q){return`catch(${this.error})`+super.render(q)}}A.kind="catch";class R extends p{render(q){return"finally"+super.render(q)}}R.kind="finally";class N{constructor(q,G={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...G,_n:G.lines?`
`:""},this._extScope=q,this._scope=new n.Scope({parent:q}),this._nodes=[new m]}toString(){return this._root.render(this.opts)}name(q){return this._scope.name(q)}scopeName(q){return this._extScope.name(q)}scopeValue(q,G){const te=this._extScope.value(q,G);return(this._values[te.prefix]||(this._values[te.prefix]=new Set)).add(te),te}getScopeValue(q,G){return this._extScope.getValue(q,G)}scopeRefs(q){return this._extScope.scopeRefs(q,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(q,G,te,pe){const be=this._scope.toName(G);return te!==void 0&&pe&&(this._constants[be.str]=te),this._leafNode(new s(q,be,te)),be}const(q,G,te){return this._def(n.varKinds.const,q,G,te)}let(q,G,te){return this._def(n.varKinds.let,q,G,te)}var(q,G,te){return this._def(n.varKinds.var,q,G,te)}assign(q,G,te){return this._leafNode(new a(q,G,te))}add(q,G){return this._leafNode(new u(q,e.operators.ADD,G))}code(q){return typeof q=="function"?q():q!==t.nil&&this._leafNode(new d(q)),this}object(...q){const G=["{"];for(const[te,pe]of q)G.length>1&&G.push(","),G.push(te),(te!==pe||this.opts.es5)&&(G.push(":"),(0,t.addCodeArg)(G,pe));return G.push("}"),new t._Code(G)}if(q,G,te){if(this._blockNode(new y(q)),G&&te)this.code(G).else().code(te).endIf();else if(G)this.code(G).endIf();else if(te)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(q){return this._elseNode(new y(q))}else(){return this._elseNode(new g)}endIf(){return this._endBlockNode(y,g)}_for(q,G){return this._blockNode(q),G&&this.code(G).endFor(),this}for(q,G){return this._for(new _(q),G)}forRange(q,G,te,pe,be=this.opts.es5?n.varKinds.var:n.varKinds.let){const le=this._scope.toName(q);return this._for(new w(be,le,G,te),()=>pe(le))}forOf(q,G,te,pe=n.varKinds.const){const be=this._scope.toName(q);if(this.opts.es5){const le=G instanceof t.Name?G:this.var("_arr",G);return this.forRange("_i",0,(0,t._)`${le}.length`,me=>{this.var(be,(0,t._)`${le}[${me}]`),te(be)})}return this._for(new E("of",pe,be,G),()=>te(be))}forIn(q,G,te,pe=this.opts.es5?n.varKinds.var:n.varKinds.const){if(this.opts.ownProperties)return this.forOf(q,(0,t._)`Object.keys(${G})`,te);const be=this._scope.toName(q);return this._for(new E("in",pe,be,G),()=>te(be))}endFor(){return this._endBlockNode(v)}label(q){return this._leafNode(new l(q))}break(q){return this._leafNode(new c(q))}return(q){const G=new T;if(this._blockNode(G),this.code(q),G.nodes.length!==1)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(T)}try(q,G,te){if(!G&&!te)throw new Error('CodeGen: "try" without "catch" and "finally"');const pe=new C;if(this._blockNode(pe),this.code(q),G){const be=this.name("e");this._currNode=pe.catch=new A(be),G(be)}return te&&(this._currNode=pe.finally=new R,this.code(te)),this._endBlockNode(A,R)}throw(q){return this._leafNode(new f(q))}block(q,G){return this._blockStarts.push(this._nodes.length),q&&this.code(q).endBlock(G),this}endBlock(q){const G=this._blockStarts.pop();if(G===void 0)throw new Error("CodeGen: not in self-balancing block");const te=this._nodes.length-G;if(te<0||q!==void 0&&te!==q)throw new Error(`CodeGen: wrong number of nodes: ${te} vs ${q} expected`);return this._nodes.length=G,this}func(q,G=t.nil,te,pe){return this._blockNode(new S(q,G,te)),pe&&this.code(pe).endFunc(),this}endFunc(){return this._endBlockNode(S)}optimize(q=1){for(;q-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(q){return this._currNode.nodes.push(q),this}_blockNode(q){this._currNode.nodes.push(q),this._nodes.push(q)}_endBlockNode(q,G){const te=this._currNode;if(te instanceof q||G&&te instanceof G)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${G?`${q.kind}/${G.kind}`:q.kind}"`)}_elseNode(q){const G=this._currNode;if(!(G instanceof y))throw new Error('CodeGen: "else" without "if"');return this._currNode=G.else=q,this}get _root(){return this._nodes[0]}get _currNode(){const q=this._nodes;return q[q.length-1]}set _currNode(q){const G=this._nodes;G[G.length-1]=q}}e.CodeGen=N;function O(j,q){for(const G in q)j[G]=(j[G]||0)+(q[G]||0);return j}function D(j,q){return q instanceof t._CodeOrName?O(j,q.names):j}function M(j,q,G){if(j instanceof t.Name)return te(j);if(!pe(j))return j;return new t._Code(j._items.reduce((be,le)=>(le instanceof t.Name&&(le=te(le)),le instanceof t._Code?be.push(...le._items):be.push(le),be),[]));function te(be){const le=G[be.str];return le===void 0||q[be.str]!==1?be:(delete q[be.str],le)}function pe(be){return be instanceof t._Code&&be._items.some(le=>le instanceof t.Name&&q[le.str]===1&&G[le.str]!==void 0)}}function F(j,q){for(const G in q)j[G]=(j[G]||0)-(q[G]||0)}function L(j){return typeof j=="boolean"||typeof j=="number"||j===null?!j:(0,t._)`!${W(j)}`}e.not=L;const B=z(e.operators.AND);function U(...j){return j.reduce(B)}e.and=U;const H=z(e.operators.OR);function P(...j){return j.reduce(H)}e.or=P;function z(j){return(q,G)=>q===t.nil?G:G===t.nil?q:(0,t._)`${W(q)} ${j} ${W(G)}`}function W(j){return j instanceof t.Name?j:(0,t._)`(${j})`}})(pn);var bt={};Object.defineProperty(bt,"__esModule",{value:!0});bt.checkStrictMode=bt.getErrorPath=bt.Type=bt.useFunc=bt.setEvaluated=bt.evaluatedPropsToName=bt.mergeEvaluated=bt.eachItem=bt.unescapeJsonPointer=bt.escapeJsonPointer=bt.escapeFragment=bt.unescapeFragment=bt.schemaRefOrVal=bt.schemaHasRulesButRef=bt.schemaHasRules=bt.checkUnknownRules=bt.alwaysValidSchema=bt.toHash=void 0;const mr=pn,eut=QT;function tut(e){const t={};for(const n of e)t[n]=!0;return t}bt.toHash=tut;function nut(e,t){return typeof t=="boolean"?t:Object.keys(t).length===0?!0:(_1e(e,t),!w1e(t,e.self.RULES.all))}bt.alwaysValidSchema=nut;function _1e(e,t=e.schema){const{opts:n,self:r}=e;if(!n.strictSchema||typeof t=="boolean")return;const i=r.RULES.keywords;for(const o in t)i[o]||T1e(e,`unknown keyword: "${o}"`)}bt.checkUnknownRules=_1e;function w1e(e,t){if(typeof e=="boolean")return!e;for(const n in e)if(t[n])return!0;return!1}bt.schemaHasRules=w1e;function rut(e,t){if(typeof e=="boolean")return!e;for(const n in e)if(n!=="$ref"&&t.all[n])return!0;return!1}bt.schemaHasRulesButRef=rut;function iut({topSchemaRef:e,schemaPath:t},n,r,i){if(!i){if(typeof n=="number"||typeof n=="boolean")return n;if(typeof n=="string")return(0,mr._)`${n}`}return(0,mr._)`${e}${t}${(0,mr.getProperty)(r)}`}bt.schemaRefOrVal=iut;function out(e){return E1e(decodeURIComponent(e))}bt.unescapeFragment=out;function sut(e){return encodeURIComponent(WV(e))}bt.escapeFragment=sut;function WV(e){return typeof e=="number"?`${e}`:e.replace(/~/g,"~0").replace(/\//g,"~1")}bt.escapeJsonPointer=WV;function E1e(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}bt.unescapeJsonPointer=E1e;function aut(e,t){if(Array.isArray(e))for(const n of e)t(n);else t(e)}bt.eachItem=aut;function yre({mergeNames:e,mergeToName:t,mergeValues:n,resultToName:r}){return(i,o,s,a)=>{const u=s===void 0?o:s instanceof mr.Name?(o instanceof mr.Name?e(i,o,s):t(i,o,s),s):o instanceof mr.Name?(t(i,s,o),o):n(o,s);return a===mr.Name&&!(u instanceof mr.Name)?r(i,u):u}}bt.mergeEvaluated={props:yre({mergeNames:(e,t,n)=>e.if((0,mr._)`${n} !== true && ${t} !== undefined`,()=>{e.if((0,mr._)`${t} === true`,()=>e.assign(n,!0),()=>e.assign(n,(0,mr._)`${n} || {}`).code((0,mr._)`Object.assign(${n}, ${t})`))}),mergeToName:(e,t,n)=>e.if((0,mr._)`${n} !== true`,()=>{t===!0?e.assign(n,!0):(e.assign(n,(0,mr._)`${n} || {}`),GV(e,n,t))}),mergeValues:(e,t)=>e===!0?!0:{...e,...t},resultToName:x1e}),items:yre({mergeNames:(e,t,n)=>e.if((0,mr._)`${n} !== true && ${t} !== undefined`,()=>e.assign(n,(0,mr._)`${t} === true ? true : ${n} > ${t} ? ${n} : ${t}`)),mergeToName:(e,t,n)=>e.if((0,mr._)`${n} !== true`,()=>e.assign(n,t===!0?!0:(0,mr._)`${n} > ${t} ? ${n} : ${t}`)),mergeValues:(e,t)=>e===!0?!0:Math.max(e,t),resultToName:(e,t)=>e.var("items",t)})};function x1e(e,t){if(t===!0)return e.var("props",!0);const n=e.var("props",(0,mr._)`{}`);return t!==void 0&&GV(e,n,t),n}bt.evaluatedPropsToName=x1e;function GV(e,t,n){Object.keys(n).forEach(r=>e.assign((0,mr._)`${t}${(0,mr.getProperty)(r)}`,!0))}bt.setEvaluated=GV;const vre={};function uut(e,t){return e.scopeValue("func",{ref:t,code:vre[t.code]||(vre[t.code]=new eut._Code(t.code))})}bt.useFunc=uut;var Yj;(function(e){e[e.Num=0]="Num",e[e.Str=1]="Str"})(Yj||(bt.Type=Yj={}));function lut(e,t,n){if(e instanceof mr.Name){const r=t===Yj.Num;return n?r?(0,mr._)`"[" + ${e} + "]"`:(0,mr._)`"['" + ${e} + "']"`:r?(0,mr._)`"/" + ${e}`:(0,mr._)`"/" + ${e}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return n?(0,mr.getProperty)(e).toString():"/"+WV(e)}bt.getErrorPath=lut;function T1e(e,t,n=e.opts.strictSchema){if(n){if(t=`strict mode: ${t}`,n===!0)throw new Error(t);e.self.logger.warn(t)}}bt.checkStrictMode=T1e;var zf={};Object.defineProperty(zf,"__esModule",{value:!0});const ts=pn,cut={data:new ts.Name("data"),valCxt:new ts.Name("valCxt"),instancePath:new ts.Name("instancePath"),parentData:new ts.Name("parentData"),parentDataProperty:new ts.Name("parentDataProperty"),rootData:new ts.Name("rootData"),dynamicAnchors:new ts.Name("dynamicAnchors"),vErrors:new ts.Name("vErrors"),errors:new ts.Name("errors"),this:new ts.Name("this"),self:new ts.Name("self"),scope:new ts.Name("scope"),json:new ts.Name("json"),jsonPos:new ts.Name("jsonPos"),jsonLen:new ts.Name("jsonLen"),jsonPart:new ts.Name("jsonPart")};zf.default=cut;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.extendErrors=e.resetErrorsCount=e.reportExtraError=e.reportError=e.keyword$DataError=e.keywordError=void 0;const t=pn,n=bt,r=zf;e.keywordError={message:({keyword:g})=>(0,t.str)`must pass "${g}" keyword validation`},e.keyword$DataError={message:({keyword:g,schemaType:y})=>y?(0,t.str)`"${g}" keyword must be ${y} ($data)`:(0,t.str)`"${g}" keyword is invalid ($data)`};function i(g,y=e.keywordError,v,_){const{it:w}=g,{gen:E,compositeRule:S,allErrors:T}=w,C=f(g,y,v);_??(S||T)?u(E,C):l(w,(0,t._)`[${C}]`)}e.reportError=i;function o(g,y=e.keywordError,v){const{it:_}=g,{gen:w,compositeRule:E,allErrors:S}=_,T=f(g,y,v);u(w,T),E||S||l(_,r.default.vErrors)}e.reportExtraError=o;function s(g,y){g.assign(r.default.errors,y),g.if((0,t._)`${r.default.vErrors} !== null`,()=>g.if(y,()=>g.assign((0,t._)`${r.default.vErrors}.length`,y),()=>g.assign(r.default.vErrors,null)))}e.resetErrorsCount=s;function a({gen:g,keyword:y,schemaValue:v,data:_,errsCount:w,it:E}){if(w===void 0)throw new Error("ajv implementation error");const S=g.name("err");g.forRange("i",w,r.default.errors,T=>{g.const(S,(0,t._)`${r.default.vErrors}[${T}]`),g.if((0,t._)`${S}.instancePath === undefined`,()=>g.assign((0,t._)`${S}.instancePath`,(0,t.strConcat)(r.default.instancePath,E.errorPath))),g.assign((0,t._)`${S}.schemaPath`,(0,t.str)`${E.errSchemaPath}/${y}`),E.opts.verbose&&(g.assign((0,t._)`${S}.schema`,v),g.assign((0,t._)`${S}.data`,_))})}e.extendErrors=a;function u(g,y){const v=g.const("err",y);g.if((0,t._)`${r.default.vErrors} === null`,()=>g.assign(r.default.vErrors,(0,t._)`[${v}]`),(0,t._)`${r.default.vErrors}.push(${v})`),g.code((0,t._)`${r.default.errors}++`)}function l(g,y){const{gen:v,validateName:_,schemaEnv:w}=g;w.$async?v.throw((0,t._)`new ${g.ValidationError}(${y})`):(v.assign((0,t._)`${_}.errors`,y),v.return(!1))}const c={keyword:new t.Name("keyword"),schemaPath:new t.Name("schemaPath"),params:new t.Name("params"),propertyName:new t.Name("propertyName"),message:new t.Name("message"),schema:new t.Name("schema"),parentSchema:new t.Name("parentSchema")};function f(g,y,v){const{createErrors:_}=g.it;return _===!1?(0,t._)`{}`:d(g,y,v)}function d(g,y,v={}){const{gen:_,it:w}=g,E=[h(w,v),p(g,v)];return m(g,y,E),_.object(...E)}function h({errorPath:g},{instancePath:y}){const v=y?(0,t.str)`${g}${(0,n.getErrorPath)(y,n.Type.Str)}`:g;return[r.default.instancePath,(0,t.strConcat)(r.default.instancePath,v)]}function p({keyword:g,it:{errSchemaPath:y}},{schemaPath:v,parentSchema:_}){let w=_?y:(0,t.str)`${y}/${g}`;return v&&(w=(0,t.str)`${w}${(0,n.getErrorPath)(v,n.Type.Str)}`),[c.schemaPath,w]}function m(g,{params:y,message:v},_){const{keyword:w,data:E,schemaValue:S,it:T}=g,{opts:C,propertyName:A,topSchemaRef:R,schemaPath:N}=T;_.push([c.keyword,w],[c.params,typeof y=="function"?y(g):y||(0,t._)`{}`]),C.messages&&_.push([c.message,typeof v=="function"?v(g):v]),C.verbose&&_.push([c.schema,S],[c.parentSchema,(0,t._)`${R}${N}`],[r.default.data,E]),A&&_.push([c.propertyName,A])}})(bC);Object.defineProperty(Cb,"__esModule",{value:!0});Cb.boolOrEmptySchema=Cb.topBoolOrEmptySchema=void 0;const fut=bC,dut=pn,hut=zf,put={message:"boolean schema is false"};function mut(e){const{gen:t,schema:n,validateName:r}=e;n===!1?S1e(e,!1):typeof n=="object"&&n.$async===!0?t.return(hut.default.data):(t.assign((0,dut._)`${r}.errors`,null),t.return(!0))}Cb.topBoolOrEmptySchema=mut;function gut(e,t){const{gen:n,schema:r}=e;r===!1?(n.var(t,!1),S1e(e)):n.var(t,!0)}Cb.boolOrEmptySchema=gut;function S1e(e,t){const{gen:n,data:r}=e,i={gen:n,keyword:"false schema",data:r,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:e};(0,fut.reportError)(i,put,void 0,t)}var Li={},z0={};Object.defineProperty(z0,"__esModule",{value:!0});z0.getRules=z0.isJSONType=void 0;const yut=["string","number","integer","boolean","null","object","array"],vut=new Set(yut);function but(e){return typeof e=="string"&&vut.has(e)}z0.isJSONType=but;function _ut(){const e={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...e,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},e.number,e.string,e.array,e.object],post:{rules:[]},all:{},keywords:{}}}z0.getRules=_ut;var Bd={};Object.defineProperty(Bd,"__esModule",{value:!0});Bd.shouldUseRule=Bd.shouldUseGroup=Bd.schemaHasRulesForType=void 0;function wut({schema:e,self:t},n){const r=t.RULES.types[n];return r&&r!==!0&&C1e(e,r)}Bd.schemaHasRulesForType=wut;function C1e(e,t){return t.rules.some(n=>A1e(e,n))}Bd.shouldUseGroup=C1e;function A1e(e,t){var n;return e[t.keyword]!==void 0||((n=t.definition.implements)===null||n===void 0?void 0:n.some(r=>e[r]!==void 0))}Bd.shouldUseRule=A1e;Object.defineProperty(Li,"__esModule",{value:!0});Li.reportTypeError=Li.checkDataTypes=Li.checkDataType=Li.coerceAndCheckDataType=Li.getJSONTypes=Li.getSchemaTypes=Li.DataType=void 0;const Eut=z0,xut=Bd,Tut=bC,rn=pn,k1e=bt;var M1;(function(e){e[e.Correct=0]="Correct",e[e.Wrong=1]="Wrong"})(M1||(Li.DataType=M1={}));function Sut(e){const t=I1e(e.type);if(t.includes("null")){if(e.nullable===!1)throw new Error("type: null contradicts nullable: false")}else{if(!t.length&&e.nullable!==void 0)throw new Error('"nullable" cannot be used without "type"');e.nullable===!0&&t.push("null")}return t}Li.getSchemaTypes=Sut;function I1e(e){const t=Array.isArray(e)?e:e?[e]:[];if(t.every(Eut.isJSONType))return t;throw new Error("type must be JSONType or JSONType[]: "+t.join(","))}Li.getJSONTypes=I1e;function Cut(e,t){const{gen:n,data:r,opts:i}=e,o=Aut(t,i.coerceTypes),s=t.length>0&&!(o.length===0&&t.length===1&&(0,xut.schemaHasRulesForType)(e,t[0]));if(s){const a=YV(t,r,i.strictNumbers,M1.Wrong);n.if(a,()=>{o.length?kut(e,t,o):KV(e)})}return s}Li.coerceAndCheckDataType=Cut;const R1e=new Set(["string","number","integer","boolean","null"]);function Aut(e,t){return t?e.filter(n=>R1e.has(n)||t==="array"&&n==="array"):[]}function kut(e,t,n){const{gen:r,data:i,opts:o}=e,s=r.let("dataType",(0,rn._)`typeof ${i}`),a=r.let("coerced",(0,rn._)`undefined`);o.coerceTypes==="array"&&r.if((0,rn._)`${s} == 'object' && Array.isArray(${i}) && ${i}.length == 1`,()=>r.assign(i,(0,rn._)`${i}[0]`).assign(s,(0,rn._)`typeof ${i}`).if(YV(t,i,o.strictNumbers),()=>r.assign(a,i))),r.if((0,rn._)`${a} !== undefined`);for(const l of n)(R1e.has(l)||l==="array"&&o.coerceTypes==="array")&&u(l);r.else(),KV(e),r.endIf(),r.if((0,rn._)`${a} !== undefined`,()=>{r.assign(i,a),Iut(e,a)});function u(l){switch(l){case"string":r.elseIf((0,rn._)`${s} == "number" || ${s} == "boolean"`).assign(a,(0,rn._)`"" + ${i}`).elseIf((0,rn._)`${i} === null`).assign(a,(0,rn._)`""`);return;case"number":r.elseIf((0,rn._)`${s} == "boolean" || ${i} === null
              || (${s} == "string" && ${i} && ${i} == +${i})`).assign(a,(0,rn._)`+${i}`);return;case"integer":r.elseIf((0,rn._)`${s} === "boolean" || ${i} === null
              || (${s} === "string" && ${i} && ${i} == +${i} && !(${i} % 1))`).assign(a,(0,rn._)`+${i}`);return;case"boolean":r.elseIf((0,rn._)`${i} === "false" || ${i} === 0 || ${i} === null`).assign(a,!1).elseIf((0,rn._)`${i} === "true" || ${i} === 1`).assign(a,!0);return;case"null":r.elseIf((0,rn._)`${i} === "" || ${i} === 0 || ${i} === false`),r.assign(a,null);return;case"array":r.elseIf((0,rn._)`${s} === "string" || ${s} === "number"
              || ${s} === "boolean" || ${i} === null`).assign(a,(0,rn._)`[${i}]`)}}}function Iut({gen:e,parentData:t,parentDataProperty:n},r){e.if((0,rn._)`${t} !== undefined`,()=>e.assign((0,rn._)`${t}[${n}]`,r))}function Kj(e,t,n,r=M1.Correct){const i=r===M1.Correct?rn.operators.EQ:rn.operators.NEQ;let o;switch(e){case"null":return(0,rn._)`${t} ${i} null`;case"array":o=(0,rn._)`Array.isArray(${t})`;break;case"object":o=(0,rn._)`${t} && typeof ${t} == "object" && !Array.isArray(${t})`;break;case"integer":o=s((0,rn._)`!(${t} % 1) && !isNaN(${t})`);break;case"number":o=s();break;default:return(0,rn._)`typeof ${t} ${i} ${e}`}return r===M1.Correct?o:(0,rn.not)(o);function s(a=rn.nil){return(0,rn.and)((0,rn._)`typeof ${t} == "number"`,a,n?(0,rn._)`isFinite(${t})`:rn.nil)}}Li.checkDataType=Kj;function YV(e,t,n,r){if(e.length===1)return Kj(e[0],t,n,r);let i;const o=(0,k1e.toHash)(e);if(o.array&&o.object){const s=(0,rn._)`typeof ${t} != "object"`;i=o.null?s:(0,rn._)`!${t} || ${s}`,delete o.null,delete o.array,delete o.object}else i=rn.nil;o.number&&delete o.integer;for(const s in o)i=(0,rn.and)(i,Kj(s,t,n,r));return i}Li.checkDataTypes=YV;const Rut={message:({schema:e})=>`must be ${e}`,params:({schema:e,schemaValue:t})=>typeof e=="string"?(0,rn._)`{type: ${e}}`:(0,rn._)`{type: ${t}}`};function KV(e){const t=Nut(e);(0,Tut.reportError)(t,Rut)}Li.reportTypeError=KV;function Nut(e){const{gen:t,data:n,schema:r}=e,i=(0,k1e.schemaRefOrVal)(e,r,"type");return{gen:t,keyword:"type",data:n,schema:r.type,schemaCode:i,schemaValue:i,parentSchema:r,params:{},it:e}}var jO={};Object.defineProperty(jO,"__esModule",{value:!0});jO.assignDefaults=void 0;const wv=pn,Put=bt;function Dut(e,t){const{properties:n,items:r}=e.schema;if(t==="object"&&n)for(const i in n)bre(e,i,n[i].default);else t==="array"&&Array.isArray(r)&&r.forEach((i,o)=>bre(e,o,i.default))}jO.assignDefaults=Dut;function bre(e,t,n){const{gen:r,compositeRule:i,data:o,opts:s}=e;if(n===void 0)return;const a=(0,wv._)`${o}${(0,wv.getProperty)(t)}`;if(i){(0,Put.checkStrictMode)(e,`default is ignored for: ${a}`);return}let u=(0,wv._)`${a} === undefined`;s.useDefaults==="empty"&&(u=(0,wv._)`${u} || ${a} === null || ${a} === ""`),r.if(u,(0,wv._)`${a} = ${(0,wv.stringify)(n)}`)}var Xc={},dn={};Object.defineProperty(dn,"__esModule",{value:!0});dn.validateUnion=dn.validateArray=dn.usePattern=dn.callValidateCode=dn.schemaProperties=dn.allSchemaProperties=dn.noPropertyInData=dn.propertyInData=dn.isOwnProperty=dn.hasPropFunc=dn.reportMissingProp=dn.checkMissingProp=dn.checkReportMissingProp=void 0;const Ir=pn,XV=bt,jh=zf,Out=bt;function $ut(e,t){const{gen:n,data:r,it:i}=e;n.if(JV(n,r,t,i.opts.ownProperties),()=>{e.setParams({missingProperty:(0,Ir._)`${t}`},!0),e.error()})}dn.checkReportMissingProp=$ut;function Mut({gen:e,data:t,it:{opts:n}},r,i){return(0,Ir.or)(...r.map(o=>(0,Ir.and)(JV(e,t,o,n.ownProperties),(0,Ir._)`${i} = ${o}`)))}dn.checkMissingProp=Mut;function Lut(e,t){e.setParams({missingProperty:t},!0),e.error()}dn.reportMissingProp=Lut;function N1e(e){return e.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,Ir._)`Object.prototype.hasOwnProperty`})}dn.hasPropFunc=N1e;function QV(e,t,n){return(0,Ir._)`${N1e(e)}.call(${t}, ${n})`}dn.isOwnProperty=QV;function Fut(e,t,n,r){const i=(0,Ir._)`${t}${(0,Ir.getProperty)(n)} !== undefined`;return r?(0,Ir._)`${i} && ${QV(e,t,n)}`:i}dn.propertyInData=Fut;function JV(e,t,n,r){const i=(0,Ir._)`${t}${(0,Ir.getProperty)(n)} === undefined`;return r?(0,Ir.or)(i,(0,Ir.not)(QV(e,t,n))):i}dn.noPropertyInData=JV;function P1e(e){return e?Object.keys(e).filter(t=>t!=="__proto__"):[]}dn.allSchemaProperties=P1e;function jut(e,t){return P1e(t).filter(n=>!(0,XV.alwaysValidSchema)(e,t[n]))}dn.schemaProperties=jut;function But({schemaCode:e,data:t,it:{gen:n,topSchemaRef:r,schemaPath:i,errorPath:o},it:s},a,u,l){const c=l?(0,Ir._)`${e}, ${t}, ${r}${i}`:t,f=[[jh.default.instancePath,(0,Ir.strConcat)(jh.default.instancePath,o)],[jh.default.parentData,s.parentData],[jh.default.parentDataProperty,s.parentDataProperty],[jh.default.rootData,jh.default.rootData]];s.opts.dynamicRef&&f.push([jh.default.dynamicAnchors,jh.default.dynamicAnchors]);const d=(0,Ir._)`${c}, ${n.object(...f)}`;return u!==Ir.nil?(0,Ir._)`${a}.call(${u}, ${d})`:(0,Ir._)`${a}(${d})`}dn.callValidateCode=But;const Uut=(0,Ir._)`new RegExp`;function zut({gen:e,it:{opts:t}},n){const r=t.unicodeRegExp?"u":"",{regExp:i}=t.code,o=i(n,r);return e.scopeValue("pattern",{key:o.toString(),ref:o,code:(0,Ir._)`${i.code==="new RegExp"?Uut:(0,Out.useFunc)(e,i)}(${n}, ${r})`})}dn.usePattern=zut;function Vut(e){const{gen:t,data:n,keyword:r,it:i}=e,o=t.name("valid");if(i.allErrors){const a=t.let("valid",!0);return s(()=>t.assign(a,!1)),a}return t.var(o,!0),s(()=>t.break()),o;function s(a){const u=t.const("len",(0,Ir._)`${n}.length`);t.forRange("i",0,u,l=>{e.subschema({keyword:r,dataProp:l,dataPropType:XV.Type.Num},o),t.if((0,Ir.not)(o),a)})}}dn.validateArray=Vut;function Hut(e){const{gen:t,schema:n,keyword:r,it:i}=e;if(!Array.isArray(n))throw new Error("ajv implementation error");if(n.some(u=>(0,XV.alwaysValidSchema)(i,u))&&!i.opts.unevaluated)return;const s=t.let("valid",!1),a=t.name("_valid");t.block(()=>n.forEach((u,l)=>{const c=e.subschema({keyword:r,schemaProp:l,compositeRule:!0},a);t.assign(s,(0,Ir._)`${s} || ${a}`),e.mergeValidEvaluated(c,a)||t.if((0,Ir.not)(s))})),e.result(s,()=>e.reset(),()=>e.error(!0))}dn.validateUnion=Hut;Object.defineProperty(Xc,"__esModule",{value:!0});Xc.validateKeywordUsage=Xc.validSchemaType=Xc.funcKeywordCode=Xc.macroKeywordCode=void 0;const Ds=pn,zg=zf,qut=dn,Wut=bC;function Gut(e,t){const{gen:n,keyword:r,schema:i,parentSchema:o,it:s}=e,a=t.macro.call(s.self,i,o,s),u=D1e(n,r,a);s.opts.validateSchema!==!1&&s.self.validateSchema(a,!0);const l=n.name("valid");e.subschema({schema:a,schemaPath:Ds.nil,errSchemaPath:`${s.errSchemaPath}/${r}`,topSchemaRef:u,compositeRule:!0},l),e.pass(l,()=>e.error(!0))}Xc.macroKeywordCode=Gut;function Yut(e,t){var n;const{gen:r,keyword:i,schema:o,parentSchema:s,$data:a,it:u}=e;Xut(u,t);const l=!a&&t.compile?t.compile.call(u.self,o,s,u):t.validate,c=D1e(r,i,l),f=r.let("valid");e.block$data(f,d),e.ok((n=t.valid)!==null&&n!==void 0?n:f);function d(){if(t.errors===!1)m(),t.modifying&&_re(e),g(()=>e.error());else{const y=t.async?h():p();t.modifying&&_re(e),g(()=>Kut(e,y))}}function h(){const y=r.let("ruleErrs",null);return r.try(()=>m((0,Ds._)`await `),v=>r.assign(f,!1).if((0,Ds._)`${v} instanceof ${u.ValidationError}`,()=>r.assign(y,(0,Ds._)`${v}.errors`),()=>r.throw(v))),y}function p(){const y=(0,Ds._)`${c}.errors`;return r.assign(y,null),m(Ds.nil),y}function m(y=t.async?(0,Ds._)`await `:Ds.nil){const v=u.opts.passContext?zg.default.this:zg.default.self,_=!("compile"in t&&!a||t.schema===!1);r.assign(f,(0,Ds._)`${y}${(0,qut.callValidateCode)(e,c,v,_)}`,t.modifying)}function g(y){var v;r.if((0,Ds.not)((v=t.valid)!==null&&v!==void 0?v:f),y)}}Xc.funcKeywordCode=Yut;function _re(e){const{gen:t,data:n,it:r}=e;t.if(r.parentData,()=>t.assign(n,(0,Ds._)`${r.parentData}[${r.parentDataProperty}]`))}function Kut(e,t){const{gen:n}=e;n.if((0,Ds._)`Array.isArray(${t})`,()=>{n.assign(zg.default.vErrors,(0,Ds._)`${zg.default.vErrors} === null ? ${t} : ${zg.default.vErrors}.concat(${t})`).assign(zg.default.errors,(0,Ds._)`${zg.default.vErrors}.length`),(0,Wut.extendErrors)(e)},()=>e.error())}function Xut({schemaEnv:e},t){if(t.async&&!e.$async)throw new Error("async keyword in sync schema")}function D1e(e,t,n){if(n===void 0)throw new Error(`keyword "${t}" failed to compile`);return e.scopeValue("keyword",typeof n=="function"?{ref:n}:{ref:n,code:(0,Ds.stringify)(n)})}function Qut(e,t,n=!1){return!t.length||t.some(r=>r==="array"?Array.isArray(e):r==="object"?e&&typeof e=="object"&&!Array.isArray(e):typeof e==r||n&&typeof e>"u")}Xc.validSchemaType=Qut;function Jut({schema:e,opts:t,self:n,errSchemaPath:r},i,o){if(Array.isArray(i.keyword)?!i.keyword.includes(o):i.keyword!==o)throw new Error("ajv implementation error");const s=i.dependencies;if(s!=null&&s.some(a=>!Object.prototype.hasOwnProperty.call(e,a)))throw new Error(`parent schema must have dependencies of ${o}: ${s.join(",")}`);if(i.validateSchema&&!i.validateSchema(e[o])){const u=`keyword "${o}" value is invalid at path "${r}": `+n.errorsText(i.validateSchema.errors);if(t.validateSchema==="log")n.logger.error(u);else throw new Error(u)}}Xc.validateKeywordUsage=Jut;var Up={};Object.defineProperty(Up,"__esModule",{value:!0});Up.extendSubschemaMode=Up.extendSubschemaData=Up.getSubschema=void 0;const Wc=pn,O1e=bt;function Zut(e,{keyword:t,schemaProp:n,schema:r,schemaPath:i,errSchemaPath:o,topSchemaRef:s}){if(t!==void 0&&r!==void 0)throw new Error('both "keyword" and "schema" passed, only one allowed');if(t!==void 0){const a=e.schema[t];return n===void 0?{schema:a,schemaPath:(0,Wc._)`${e.schemaPath}${(0,Wc.getProperty)(t)}`,errSchemaPath:`${e.errSchemaPath}/${t}`}:{schema:a[n],schemaPath:(0,Wc._)`${e.schemaPath}${(0,Wc.getProperty)(t)}${(0,Wc.getProperty)(n)}`,errSchemaPath:`${e.errSchemaPath}/${t}/${(0,O1e.escapeFragment)(n)}`}}if(r!==void 0){if(i===void 0||o===void 0||s===void 0)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:r,schemaPath:i,topSchemaRef:s,errSchemaPath:o}}throw new Error('either "keyword" or "schema" must be passed')}Up.getSubschema=Zut;function elt(e,t,{dataProp:n,dataPropType:r,data:i,dataTypes:o,propertyName:s}){if(i!==void 0&&n!==void 0)throw new Error('both "data" and "dataProp" passed, only one allowed');const{gen:a}=t;if(n!==void 0){const{errorPath:l,dataPathArr:c,opts:f}=t,d=a.let("data",(0,Wc._)`${t.data}${(0,Wc.getProperty)(n)}`,!0);u(d),e.errorPath=(0,Wc.str)`${l}${(0,O1e.getErrorPath)(n,r,f.jsPropertySyntax)}`,e.parentDataProperty=(0,Wc._)`${n}`,e.dataPathArr=[...c,e.parentDataProperty]}if(i!==void 0){const l=i instanceof Wc.Name?i:a.let("data",i,!0);u(l),s!==void 0&&(e.propertyName=s)}o&&(e.dataTypes=o);function u(l){e.data=l,e.dataLevel=t.dataLevel+1,e.dataTypes=[],t.definedProperties=new Set,e.parentData=t.data,e.dataNames=[...t.dataNames,l]}}Up.extendSubschemaData=elt;function tlt(e,{jtdDiscriminator:t,jtdMetadata:n,compositeRule:r,createErrors:i,allErrors:o}){r!==void 0&&(e.compositeRule=r),i!==void 0&&(e.createErrors=i),o!==void 0&&(e.allErrors=o),e.jtdDiscriminator=t,e.jtdMetadata=n}Up.extendSubschemaMode=tlt;var Ro={},$1e={exports:{}},yp=$1e.exports=function(e,t,n){typeof t=="function"&&(n=t,t={}),n=t.cb||n;var r=typeof n=="function"?n:n.pre||function(){},i=n.post||function(){};Yk(t,r,i,e,"",e)};yp.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0};yp.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0};yp.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0};yp.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function Yk(e,t,n,r,i,o,s,a,u,l){if(r&&typeof r=="object"&&!Array.isArray(r)){t(r,i,o,s,a,u,l);for(var c in r){var f=r[c];if(Array.isArray(f)){if(c in yp.arrayKeywords)for(var d=0;d<f.length;d++)Yk(e,t,n,f[d],i+"/"+c+"/"+d,o,i,c,r,d)}else if(c in yp.propsKeywords){if(f&&typeof f=="object")for(var h in f)Yk(e,t,n,f[h],i+"/"+c+"/"+nlt(h),o,i,c,r,h)}else(c in yp.keywords||e.allKeys&&!(c in yp.skipKeywords))&&Yk(e,t,n,f,i+"/"+c,o,i,c,r)}n(r,i,o,s,a,u,l)}}function nlt(e){return e.replace(/~/g,"~0").replace(/\//g,"~1")}var rlt=$1e.exports;Object.defineProperty(Ro,"__esModule",{value:!0});Ro.getSchemaRefs=Ro.resolveUrl=Ro.normalizeId=Ro._getFullPath=Ro.getFullPath=Ro.inlineRef=void 0;const ilt=bt,olt=Oz,slt=rlt,alt=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function ult(e,t=!0){return typeof e=="boolean"?!0:t===!0?!Xj(e):t?M1e(e)<=t:!1}Ro.inlineRef=ult;const llt=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function Xj(e){for(const t in e){if(llt.has(t))return!0;const n=e[t];if(Array.isArray(n)&&n.some(Xj)||typeof n=="object"&&Xj(n))return!0}return!1}function M1e(e){let t=0;for(const n in e){if(n==="$ref")return 1/0;if(t++,!alt.has(n)&&(typeof e[n]=="object"&&(0,ilt.eachItem)(e[n],r=>t+=M1e(r)),t===1/0))return 1/0}return t}function L1e(e,t="",n){n!==!1&&(t=L1(t));const r=e.parse(t);return F1e(e,r)}Ro.getFullPath=L1e;function F1e(e,t){return e.serialize(t).split("#")[0]+"#"}Ro._getFullPath=F1e;const clt=/#\/?$/;function L1(e){return e?e.replace(clt,""):""}Ro.normalizeId=L1;function flt(e,t,n){return n=L1(n),e.resolve(t,n)}Ro.resolveUrl=flt;const dlt=/^[a-z_][-a-z0-9._]*$/i;function hlt(e,t){if(typeof e=="boolean")return{};const{schemaId:n,uriResolver:r}=this.opts,i=L1(e[n]||t),o={"":i},s=L1e(r,i,!1),a={},u=new Set;return slt(e,{allKeys:!0},(f,d,h,p)=>{if(p===void 0)return;const m=s+d;let g=o[p];typeof f[n]=="string"&&(g=y.call(this,f[n])),v.call(this,f.$anchor),v.call(this,f.$dynamicAnchor),o[d]=g;function y(_){const w=this.opts.uriResolver.resolve;if(_=L1(g?w(g,_):_),u.has(_))throw c(_);u.add(_);let E=this.refs[_];return typeof E=="string"&&(E=this.refs[E]),typeof E=="object"?l(f,E.schema,_):_!==L1(m)&&(_[0]==="#"?(l(f,a[_],_),a[_]=f):this.refs[_]=m),_}function v(_){if(typeof _=="string"){if(!dlt.test(_))throw new Error(`invalid anchor "${_}"`);y.call(this,`#${_}`)}}}),a;function l(f,d,h){if(d!==void 0&&!olt(f,d))throw c(h)}function c(f){return new Error(`reference "${f}" resolves to more than one schema`)}}Ro.getSchemaRefs=hlt;Object.defineProperty(tc,"__esModule",{value:!0});tc.getData=tc.KeywordCxt=tc.validateFunctionCode=void 0;const j1e=Cb,wre=Li,ZV=Bd,CN=Li,plt=jO,Dx=Xc,x6=Up,Rt=pn,Ht=zf,mlt=Ro,Ud=bt,zw=bC;function glt(e){if(z1e(e)&&(V1e(e),U1e(e))){blt(e);return}B1e(e,()=>(0,j1e.topBoolOrEmptySchema)(e))}tc.validateFunctionCode=glt;function B1e({gen:e,validateName:t,schema:n,schemaEnv:r,opts:i},o){i.code.es5?e.func(t,(0,Rt._)`${Ht.default.data}, ${Ht.default.valCxt}`,r.$async,()=>{e.code((0,Rt._)`"use strict"; ${Ere(n,i)}`),vlt(e,i),e.code(o)}):e.func(t,(0,Rt._)`${Ht.default.data}, ${ylt(i)}`,r.$async,()=>e.code(Ere(n,i)).code(o))}function ylt(e){return(0,Rt._)`{${Ht.default.instancePath}="", ${Ht.default.parentData}, ${Ht.default.parentDataProperty}, ${Ht.default.rootData}=${Ht.default.data}${e.dynamicRef?(0,Rt._)`, ${Ht.default.dynamicAnchors}={}`:Rt.nil}}={}`}function vlt(e,t){e.if(Ht.default.valCxt,()=>{e.var(Ht.default.instancePath,(0,Rt._)`${Ht.default.valCxt}.${Ht.default.instancePath}`),e.var(Ht.default.parentData,(0,Rt._)`${Ht.default.valCxt}.${Ht.default.parentData}`),e.var(Ht.default.parentDataProperty,(0,Rt._)`${Ht.default.valCxt}.${Ht.default.parentDataProperty}`),e.var(Ht.default.rootData,(0,Rt._)`${Ht.default.valCxt}.${Ht.default.rootData}`),t.dynamicRef&&e.var(Ht.default.dynamicAnchors,(0,Rt._)`${Ht.default.valCxt}.${Ht.default.dynamicAnchors}`)},()=>{e.var(Ht.default.instancePath,(0,Rt._)`""`),e.var(Ht.default.parentData,(0,Rt._)`undefined`),e.var(Ht.default.parentDataProperty,(0,Rt._)`undefined`),e.var(Ht.default.rootData,Ht.default.data),t.dynamicRef&&e.var(Ht.default.dynamicAnchors,(0,Rt._)`{}`)})}function blt(e){const{schema:t,opts:n,gen:r}=e;B1e(e,()=>{n.$comment&&t.$comment&&q1e(e),Tlt(e),r.let(Ht.default.vErrors,null),r.let(Ht.default.errors,0),n.unevaluated&&_lt(e),H1e(e),Alt(e)})}function _lt(e){const{gen:t,validateName:n}=e;e.evaluated=t.const("evaluated",(0,Rt._)`${n}.evaluated`),t.if((0,Rt._)`${e.evaluated}.dynamicProps`,()=>t.assign((0,Rt._)`${e.evaluated}.props`,(0,Rt._)`undefined`)),t.if((0,Rt._)`${e.evaluated}.dynamicItems`,()=>t.assign((0,Rt._)`${e.evaluated}.items`,(0,Rt._)`undefined`))}function Ere(e,t){const n=typeof e=="object"&&e[t.schemaId];return n&&(t.code.source||t.code.process)?(0,Rt._)`/*# sourceURL=${n} */`:Rt.nil}function wlt(e,t){if(z1e(e)&&(V1e(e),U1e(e))){Elt(e,t);return}(0,j1e.boolOrEmptySchema)(e,t)}function U1e({schema:e,self:t}){if(typeof e=="boolean")return!e;for(const n in e)if(t.RULES.all[n])return!0;return!1}function z1e(e){return typeof e.schema!="boolean"}function Elt(e,t){const{schema:n,gen:r,opts:i}=e;i.$comment&&n.$comment&&q1e(e),Slt(e),Clt(e);const o=r.const("_errs",Ht.default.errors);H1e(e,o),r.var(t,(0,Rt._)`${o} === ${Ht.default.errors}`)}function V1e(e){(0,Ud.checkUnknownRules)(e),xlt(e)}function H1e(e,t){if(e.opts.jtd)return xre(e,[],!1,t);const n=(0,wre.getSchemaTypes)(e.schema),r=(0,wre.coerceAndCheckDataType)(e,n);xre(e,n,!r,t)}function xlt(e){const{schema:t,errSchemaPath:n,opts:r,self:i}=e;t.$ref&&r.ignoreKeywordsWithRef&&(0,Ud.schemaHasRulesButRef)(t,i.RULES)&&i.logger.warn(`$ref: keywords ignored in schema at path "${n}"`)}function Tlt(e){const{schema:t,opts:n}=e;t.default!==void 0&&n.useDefaults&&n.strictSchema&&(0,Ud.checkStrictMode)(e,"default is ignored in the schema root")}function Slt(e){const t=e.schema[e.opts.schemaId];t&&(e.baseId=(0,mlt.resolveUrl)(e.opts.uriResolver,e.baseId,t))}function Clt(e){if(e.schema.$async&&!e.schemaEnv.$async)throw new Error("async schema in sync schema")}function q1e({gen:e,schemaEnv:t,schema:n,errSchemaPath:r,opts:i}){const o=n.$comment;if(i.$comment===!0)e.code((0,Rt._)`${Ht.default.self}.logger.log(${o})`);else if(typeof i.$comment=="function"){const s=(0,Rt.str)`${r}/$comment`,a=e.scopeValue("root",{ref:t.root});e.code((0,Rt._)`${Ht.default.self}.opts.$comment(${o}, ${s}, ${a}.schema)`)}}function Alt(e){const{gen:t,schemaEnv:n,validateName:r,ValidationError:i,opts:o}=e;n.$async?t.if((0,Rt._)`${Ht.default.errors} === 0`,()=>t.return(Ht.default.data),()=>t.throw((0,Rt._)`new ${i}(${Ht.default.vErrors})`)):(t.assign((0,Rt._)`${r}.errors`,Ht.default.vErrors),o.unevaluated&&klt(e),t.return((0,Rt._)`${Ht.default.errors} === 0`))}function klt({gen:e,evaluated:t,props:n,items:r}){n instanceof Rt.Name&&e.assign((0,Rt._)`${t}.props`,n),r instanceof Rt.Name&&e.assign((0,Rt._)`${t}.items`,r)}function xre(e,t,n,r){const{gen:i,schema:o,data:s,allErrors:a,opts:u,self:l}=e,{RULES:c}=l;if(o.$ref&&(u.ignoreKeywordsWithRef||!(0,Ud.schemaHasRulesButRef)(o,c))){i.block(()=>Y1e(e,"$ref",c.all.$ref.definition));return}u.jtd||Ilt(e,t),i.block(()=>{for(const d of c.rules)f(d);f(c.post)});function f(d){(0,ZV.shouldUseGroup)(o,d)&&(d.type?(i.if((0,CN.checkDataType)(d.type,s,u.strictNumbers)),Tre(e,d),t.length===1&&t[0]===d.type&&n&&(i.else(),(0,CN.reportTypeError)(e)),i.endIf()):Tre(e,d),a||i.if((0,Rt._)`${Ht.default.errors} === ${r||0}`))}}function Tre(e,t){const{gen:n,schema:r,opts:{useDefaults:i}}=e;i&&(0,plt.assignDefaults)(e,t.type),n.block(()=>{for(const o of t.rules)(0,ZV.shouldUseRule)(r,o)&&Y1e(e,o.keyword,o.definition,t.type)})}function Ilt(e,t){e.schemaEnv.meta||!e.opts.strictTypes||(Rlt(e,t),e.opts.allowUnionTypes||Nlt(e,t),Plt(e,e.dataTypes))}function Rlt(e,t){if(t.length){if(!e.dataTypes.length){e.dataTypes=t;return}t.forEach(n=>{W1e(e.dataTypes,n)||eH(e,`type "${n}" not allowed by context "${e.dataTypes.join(",")}"`)}),Olt(e,t)}}function Nlt(e,t){t.length>1&&!(t.length===2&&t.includes("null"))&&eH(e,"use allowUnionTypes to allow union type keyword")}function Plt(e,t){const n=e.self.RULES.all;for(const r in n){const i=n[r];if(typeof i=="object"&&(0,ZV.shouldUseRule)(e.schema,i)){const{type:o}=i.definition;o.length&&!o.some(s=>Dlt(t,s))&&eH(e,`missing type "${o.join(",")}" for keyword "${r}"`)}}}function Dlt(e,t){return e.includes(t)||t==="number"&&e.includes("integer")}function W1e(e,t){return e.includes(t)||t==="integer"&&e.includes("number")}function Olt(e,t){const n=[];for(const r of e.dataTypes)W1e(t,r)?n.push(r):t.includes("integer")&&r==="number"&&n.push("integer");e.dataTypes=n}function eH(e,t){const n=e.schemaEnv.baseId+e.errSchemaPath;t+=` at "${n}" (strictTypes)`,(0,Ud.checkStrictMode)(e,t,e.opts.strictTypes)}class G1e{constructor(t,n,r){if((0,Dx.validateKeywordUsage)(t,n,r),this.gen=t.gen,this.allErrors=t.allErrors,this.keyword=r,this.data=t.data,this.schema=t.schema[r],this.$data=n.$data&&t.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,Ud.schemaRefOrVal)(t,this.schema,r,this.$data),this.schemaType=n.schemaType,this.parentSchema=t.schema,this.params={},this.it=t,this.def=n,this.$data)this.schemaCode=t.gen.const("vSchema",K1e(this.$data,t));else if(this.schemaCode=this.schemaValue,!(0,Dx.validSchemaType)(this.schema,n.schemaType,n.allowUndefined))throw new Error(`${r} value must be ${JSON.stringify(n.schemaType)}`);("code"in n?n.trackErrors:n.errors!==!1)&&(this.errsCount=t.gen.const("_errs",Ht.default.errors))}result(t,n,r){this.failResult((0,Rt.not)(t),n,r)}failResult(t,n,r){this.gen.if(t),r?r():this.error(),n?(this.gen.else(),n(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(t,n){this.failResult((0,Rt.not)(t),void 0,n)}fail(t){if(t===void 0){this.error(),this.allErrors||this.gen.if(!1);return}this.gen.if(t),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(t){if(!this.$data)return this.fail(t);const{schemaCode:n}=this;this.fail((0,Rt._)`${n} !== undefined && (${(0,Rt.or)(this.invalid$data(),t)})`)}error(t,n,r){if(n){this.setParams(n),this._error(t,r),this.setParams({});return}this._error(t,r)}_error(t,n){(t?zw.reportExtraError:zw.reportError)(this,this.def.error,n)}$dataError(){(0,zw.reportError)(this,this.def.$dataError||zw.keyword$DataError)}reset(){if(this.errsCount===void 0)throw new Error('add "trackErrors" to keyword definition');(0,zw.resetErrorsCount)(this.gen,this.errsCount)}ok(t){this.allErrors||this.gen.if(t)}setParams(t,n){n?Object.assign(this.params,t):this.params=t}block$data(t,n,r=Rt.nil){this.gen.block(()=>{this.check$data(t,r),n()})}check$data(t=Rt.nil,n=Rt.nil){if(!this.$data)return;const{gen:r,schemaCode:i,schemaType:o,def:s}=this;r.if((0,Rt.or)((0,Rt._)`${i} === undefined`,n)),t!==Rt.nil&&r.assign(t,!0),(o.length||s.validateSchema)&&(r.elseIf(this.invalid$data()),this.$dataError(),t!==Rt.nil&&r.assign(t,!1)),r.else()}invalid$data(){const{gen:t,schemaCode:n,schemaType:r,def:i,it:o}=this;return(0,Rt.or)(s(),a());function s(){if(r.length){if(!(n instanceof Rt.Name))throw new Error("ajv implementation error");const u=Array.isArray(r)?r:[r];return(0,Rt._)`${(0,CN.checkDataTypes)(u,n,o.opts.strictNumbers,CN.DataType.Wrong)}`}return Rt.nil}function a(){if(i.validateSchema){const u=t.scopeValue("validate$data",{ref:i.validateSchema});return(0,Rt._)`!${u}(${n})`}return Rt.nil}}subschema(t,n){const r=(0,x6.getSubschema)(this.it,t);(0,x6.extendSubschemaData)(r,this.it,t),(0,x6.extendSubschemaMode)(r,t);const i={...this.it,...r,items:void 0,props:void 0};return wlt(i,n),i}mergeEvaluated(t,n){const{it:r,gen:i}=this;r.opts.unevaluated&&(r.props!==!0&&t.props!==void 0&&(r.props=Ud.mergeEvaluated.props(i,t.props,r.props,n)),r.items!==!0&&t.items!==void 0&&(r.items=Ud.mergeEvaluated.items(i,t.items,r.items,n)))}mergeValidEvaluated(t,n){const{it:r,gen:i}=this;if(r.opts.unevaluated&&(r.props!==!0||r.items!==!0))return i.if(n,()=>this.mergeEvaluated(t,Rt.Name)),!0}}tc.KeywordCxt=G1e;function Y1e(e,t,n,r){const i=new G1e(e,n,t);"code"in n?n.code(i,r):i.$data&&n.validate?(0,Dx.funcKeywordCode)(i,n):"macro"in n?(0,Dx.macroKeywordCode)(i,n):(n.compile||n.validate)&&(0,Dx.funcKeywordCode)(i,n)}const $lt=/^\/(?:[^~]|~0|~1)*$/,Mlt=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function K1e(e,{dataLevel:t,dataNames:n,dataPathArr:r}){let i,o;if(e==="")return Ht.default.rootData;if(e[0]==="/"){if(!$lt.test(e))throw new Error(`Invalid JSON-pointer: ${e}`);i=e,o=Ht.default.rootData}else{const l=Mlt.exec(e);if(!l)throw new Error(`Invalid JSON-pointer: ${e}`);const c=+l[1];if(i=l[2],i==="#"){if(c>=t)throw new Error(u("property/index",c));return r[t-c]}if(c>t)throw new Error(u("data",c));if(o=n[t-c],!i)return o}let s=o;const a=i.split("/");for(const l of a)l&&(o=(0,Rt._)`${o}${(0,Rt.getProperty)((0,Ud.unescapeJsonPointer)(l))}`,s=(0,Rt._)`${s} && ${o}`);return s;function u(l,c){return`Cannot access ${l} ${c} levels up, current level is ${t}`}}tc.getData=K1e;var _C={};Object.defineProperty(_C,"__esModule",{value:!0});class Llt extends Error{constructor(t){super("validation failed"),this.errors=t,this.ajv=this.validation=!0}}_C.default=Llt;var F_={};Object.defineProperty(F_,"__esModule",{value:!0});const T6=Ro;class Flt extends Error{constructor(t,n,r,i){super(i||`can't resolve reference ${r} from id ${n}`),this.missingRef=(0,T6.resolveUrl)(t,n,r),this.missingSchema=(0,T6.normalizeId)((0,T6.getFullPath)(t,this.missingRef))}}F_.default=Flt;var ya={};Object.defineProperty(ya,"__esModule",{value:!0});ya.resolveSchema=ya.getCompilingSchema=ya.resolveRef=ya.compileSchema=ya.SchemaEnv=void 0;const Sl=pn,jlt=_C,pg=zf,Vl=Ro,Sre=bt,Blt=tc;class BO{constructor(t){var n;this.refs={},this.dynamicAnchors={};let r;typeof t.schema=="object"&&(r=t.schema),this.schema=t.schema,this.schemaId=t.schemaId,this.root=t.root||this,this.baseId=(n=t.baseId)!==null&&n!==void 0?n:(0,Vl.normalizeId)(r==null?void 0:r[t.schemaId||"$id"]),this.schemaPath=t.schemaPath,this.localRefs=t.localRefs,this.meta=t.meta,this.$async=r==null?void 0:r.$async,this.refs={}}}ya.SchemaEnv=BO;function tH(e){const t=X1e.call(this,e);if(t)return t;const n=(0,Vl.getFullPath)(this.opts.uriResolver,e.root.baseId),{es5:r,lines:i}=this.opts.code,{ownProperties:o}=this.opts,s=new Sl.CodeGen(this.scope,{es5:r,lines:i,ownProperties:o});let a;e.$async&&(a=s.scopeValue("Error",{ref:jlt.default,code:(0,Sl._)`require("ajv/dist/runtime/validation_error").default`}));const u=s.scopeName("validate");e.validateName=u;const l={gen:s,allErrors:this.opts.allErrors,data:pg.default.data,parentData:pg.default.parentData,parentDataProperty:pg.default.parentDataProperty,dataNames:[pg.default.data],dataPathArr:[Sl.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:s.scopeValue("schema",this.opts.code.source===!0?{ref:e.schema,code:(0,Sl.stringify)(e.schema)}:{ref:e.schema}),validateName:u,ValidationError:a,schema:e.schema,schemaEnv:e,rootId:n,baseId:e.baseId||n,schemaPath:Sl.nil,errSchemaPath:e.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,Sl._)`""`,opts:this.opts,self:this};let c;try{this._compilations.add(e),(0,Blt.validateFunctionCode)(l),s.optimize(this.opts.code.optimize);const f=s.toString();c=`${s.scopeRefs(pg.default.scope)}return ${f}`,this.opts.code.process&&(c=this.opts.code.process(c,e));const h=new Function(`${pg.default.self}`,`${pg.default.scope}`,c)(this,this.scope.get());if(this.scope.value(u,{ref:h}),h.errors=null,h.schema=e.schema,h.schemaEnv=e,e.$async&&(h.$async=!0),this.opts.code.source===!0&&(h.source={validateName:u,validateCode:f,scopeValues:s._values}),this.opts.unevaluated){const{props:p,items:m}=l;h.evaluated={props:p instanceof Sl.Name?void 0:p,items:m instanceof Sl.Name?void 0:m,dynamicProps:p instanceof Sl.Name,dynamicItems:m instanceof Sl.Name},h.source&&(h.source.evaluated=(0,Sl.stringify)(h.evaluated))}return e.validate=h,e}catch(f){throw delete e.validate,delete e.validateName,c&&this.logger.error("Error compiling schema, function code:",c),f}finally{this._compilations.delete(e)}}ya.compileSchema=tH;function Ult(e,t,n){var r;n=(0,Vl.resolveUrl)(this.opts.uriResolver,t,n);const i=e.refs[n];if(i)return i;let o=Hlt.call(this,e,n);if(o===void 0){const s=(r=e.localRefs)===null||r===void 0?void 0:r[n],{schemaId:a}=this.opts;s&&(o=new BO({schema:s,schemaId:a,root:e,baseId:t}))}if(o!==void 0)return e.refs[n]=zlt.call(this,o)}ya.resolveRef=Ult;function zlt(e){return(0,Vl.inlineRef)(e.schema,this.opts.inlineRefs)?e.schema:e.validate?e:tH.call(this,e)}function X1e(e){for(const t of this._compilations)if(Vlt(t,e))return t}ya.getCompilingSchema=X1e;function Vlt(e,t){return e.schema===t.schema&&e.root===t.root&&e.baseId===t.baseId}function Hlt(e,t){let n;for(;typeof(n=this.refs[t])=="string";)t=n;return n||this.schemas[t]||UO.call(this,e,t)}function UO(e,t){const n=this.opts.uriResolver.parse(t),r=(0,Vl._getFullPath)(this.opts.uriResolver,n);let i=(0,Vl.getFullPath)(this.opts.uriResolver,e.baseId,void 0);if(Object.keys(e.schema).length>0&&r===i)return S6.call(this,n,e);const o=(0,Vl.normalizeId)(r),s=this.refs[o]||this.schemas[o];if(typeof s=="string"){const a=UO.call(this,e,s);return typeof(a==null?void 0:a.schema)!="object"?void 0:S6.call(this,n,a)}if(typeof(s==null?void 0:s.schema)=="object"){if(s.validate||tH.call(this,s),o===(0,Vl.normalizeId)(t)){const{schema:a}=s,{schemaId:u}=this.opts,l=a[u];return l&&(i=(0,Vl.resolveUrl)(this.opts.uriResolver,i,l)),new BO({schema:a,schemaId:u,root:e,baseId:i})}return S6.call(this,n,s)}}ya.resolveSchema=UO;const qlt=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function S6(e,{baseId:t,schema:n,root:r}){var i;if(((i=e.fragment)===null||i===void 0?void 0:i[0])!=="/")return;for(const a of e.fragment.slice(1).split("/")){if(typeof n=="boolean")return;const u=n[(0,Sre.unescapeFragment)(a)];if(u===void 0)return;n=u;const l=typeof n=="object"&&n[this.opts.schemaId];!qlt.has(a)&&l&&(t=(0,Vl.resolveUrl)(this.opts.uriResolver,t,l))}let o;if(typeof n!="boolean"&&n.$ref&&!(0,Sre.schemaHasRulesButRef)(n,this.RULES)){const a=(0,Vl.resolveUrl)(this.opts.uriResolver,t,n.$ref);o=UO.call(this,r,a)}const{schemaId:s}=this.opts;if(o=o||new BO({schema:n,schemaId:s,root:r,baseId:t}),o.schema!==o.root.schema)return o}const Wlt="https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",Glt="Meta-schema for $data reference (JSON AnySchema extension proposal)",Ylt="object",Klt=["$data"],Xlt={$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},Qlt=!1,Jlt={$id:Wlt,description:Glt,type:Ylt,required:Klt,properties:Xlt,additionalProperties:Qlt};var nH={},Qj={exports:{}};/** @license URI.js v4.4.1 (c) 2011 Gary Court. License: http://github.com/garycourt/uri-js */(function(e,t){(function(n,r){r(t)})(so,function(n){function r(){for(var ie=arguments.length,Z=Array(ie),oe=0;oe<ie;oe++)Z[oe]=arguments[oe];if(Z.length>1){Z[0]=Z[0].slice(0,-1);for(var xe=Z.length-1,Ee=1;Ee<xe;++Ee)Z[Ee]=Z[Ee].slice(1,-1);return Z[xe]=Z[xe].slice(1),Z.join("")}else return Z[0]}function i(ie){return"(?:"+ie+")"}function o(ie){return ie===void 0?"undefined":ie===null?"null":Object.prototype.toString.call(ie).split(" ").pop().split("]").shift().toLowerCase()}function s(ie){return ie.toUpperCase()}function a(ie){return ie!=null?ie instanceof Array?ie:typeof ie.length!="number"||ie.split||ie.setInterval||ie.call?[ie]:Array.prototype.slice.call(ie):[]}function u(ie,Z){var oe=ie;if(Z)for(var xe in Z)oe[xe]=Z[xe];return oe}function l(ie){var Z="[A-Za-z]",oe="[0-9]",xe=r(oe,"[A-Fa-f]"),Ee=i(i("%[EFef]"+xe+"%"+xe+xe+"%"+xe+xe)+"|"+i("%[89A-Fa-f]"+xe+"%"+xe+xe)+"|"+i("%"+xe+xe)),rt="[\\:\\/\\?\\#\\[\\]\\@]",Et="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",Bt=r(rt,Et),mn=ie?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]",_n=ie?"[\\uE000-\\uF8FF]":"[]",Qt=r(Z,oe,"[\\-\\.\\_\\~]",mn);i(Z+r(Z,oe,"[\\+\\-\\.]")+"*"),i(i(Ee+"|"+r(Qt,Et,"[\\:]"))+"*");var $n=i(i("25[0-5]")+"|"+i("2[0-4]"+oe)+"|"+i("1"+oe+oe)+"|"+i("0?[1-9]"+oe)+"|0?0?"+oe),tr=i($n+"\\."+$n+"\\."+$n+"\\."+$n),jt=i(xe+"{1,4}"),Mn=i(i(jt+"\\:"+jt)+"|"+tr),fr=i(i(jt+"\\:")+"{6}"+Mn),Rn=i("\\:\\:"+i(jt+"\\:")+"{5}"+Mn),Wr=i(i(jt)+"?\\:\\:"+i(jt+"\\:")+"{4}"+Mn),Qi=i(i(i(jt+"\\:")+"{0,1}"+jt)+"?\\:\\:"+i(jt+"\\:")+"{3}"+Mn),_r=i(i(i(jt+"\\:")+"{0,2}"+jt)+"?\\:\\:"+i(jt+"\\:")+"{2}"+Mn),bo=i(i(i(jt+"\\:")+"{0,3}"+jt)+"?\\:\\:"+jt+"\\:"+Mn),ei=i(i(i(jt+"\\:")+"{0,4}"+jt)+"?\\:\\:"+Mn),ti=i(i(i(jt+"\\:")+"{0,5}"+jt)+"?\\:\\:"+jt),qo=i(i(i(jt+"\\:")+"{0,6}"+jt)+"?\\:\\:"),Cs=i([fr,Rn,Wr,Qi,_r,bo,ei,ti,qo].join("|")),Ji=i(i(Qt+"|"+Ee)+"+");i("[vV]"+xe+"+\\."+r(Qt,Et,"[\\:]")+"+"),i(i(Ee+"|"+r(Qt,Et))+"*");var Du=i(Ee+"|"+r(Qt,Et,"[\\:\\@]"));return i(i(Ee+"|"+r(Qt,Et,"[\\@]"))+"+"),i(i(Du+"|"+r("[\\/\\?]",_n))+"*"),{NOT_SCHEME:new RegExp(r("[^]",Z,oe,"[\\+\\-\\.]"),"g"),NOT_USERINFO:new RegExp(r("[^\\%\\:]",Qt,Et),"g"),NOT_HOST:new RegExp(r("[^\\%\\[\\]\\:]",Qt,Et),"g"),NOT_PATH:new RegExp(r("[^\\%\\/\\:\\@]",Qt,Et),"g"),NOT_PATH_NOSCHEME:new RegExp(r("[^\\%\\/\\@]",Qt,Et),"g"),NOT_QUERY:new RegExp(r("[^\\%]",Qt,Et,"[\\:\\@\\/\\?]",_n),"g"),NOT_FRAGMENT:new RegExp(r("[^\\%]",Qt,Et,"[\\:\\@\\/\\?]"),"g"),ESCAPE:new RegExp(r("[^]",Qt,Et),"g"),UNRESERVED:new RegExp(Qt,"g"),OTHER_CHARS:new RegExp(r("[^\\%]",Qt,Bt),"g"),PCT_ENCODED:new RegExp(Ee,"g"),IPV4ADDRESS:new RegExp("^("+tr+")$"),IPV6ADDRESS:new RegExp("^\\[?("+Cs+")"+i(i("\\%25|\\%(?!"+xe+"{2})")+"("+Ji+")")+"?\\]?$")}}var c=l(!1),f=l(!0),d=function(){function ie(Z,oe){var xe=[],Ee=!0,rt=!1,Et=void 0;try{for(var Bt=Z[Symbol.iterator](),mn;!(Ee=(mn=Bt.next()).done)&&(xe.push(mn.value),!(oe&&xe.length===oe));Ee=!0);}catch(_n){rt=!0,Et=_n}finally{try{!Ee&&Bt.return&&Bt.return()}finally{if(rt)throw Et}}return xe}return function(Z,oe){if(Array.isArray(Z))return Z;if(Symbol.iterator in Object(Z))return ie(Z,oe);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),h=function(ie){if(Array.isArray(ie)){for(var Z=0,oe=Array(ie.length);Z<ie.length;Z++)oe[Z]=ie[Z];return oe}else return Array.from(ie)},p=2147483647,m=36,g=1,y=26,v=38,_=700,w=72,E=128,S="-",T=/^xn--/,C=/[^\0-\x7E]/,A=/[\x2E\u3002\uFF0E\uFF61]/g,R={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},N=m-g,O=Math.floor,D=String.fromCharCode;function M(ie){throw new RangeError(R[ie])}function F(ie,Z){for(var oe=[],xe=ie.length;xe--;)oe[xe]=Z(ie[xe]);return oe}function L(ie,Z){var oe=ie.split("@"),xe="";oe.length>1&&(xe=oe[0]+"@",ie=oe[1]),ie=ie.replace(A,".");var Ee=ie.split("."),rt=F(Ee,Z).join(".");return xe+rt}function B(ie){for(var Z=[],oe=0,xe=ie.length;oe<xe;){var Ee=ie.charCodeAt(oe++);if(Ee>=55296&&Ee<=56319&&oe<xe){var rt=ie.charCodeAt(oe++);(rt&64512)==56320?Z.push(((Ee&1023)<<10)+(rt&1023)+65536):(Z.push(Ee),oe--)}else Z.push(Ee)}return Z}var U=function(Z){return String.fromCodePoint.apply(String,h(Z))},H=function(Z){return Z-48<10?Z-22:Z-65<26?Z-65:Z-97<26?Z-97:m},P=function(Z,oe){return Z+22+75*(Z<26)-((oe!=0)<<5)},z=function(Z,oe,xe){var Ee=0;for(Z=xe?O(Z/_):Z>>1,Z+=O(Z/oe);Z>N*y>>1;Ee+=m)Z=O(Z/N);return O(Ee+(N+1)*Z/(Z+v))},W=function(Z){var oe=[],xe=Z.length,Ee=0,rt=E,Et=w,Bt=Z.lastIndexOf(S);Bt<0&&(Bt=0);for(var mn=0;mn<Bt;++mn)Z.charCodeAt(mn)>=128&&M("not-basic"),oe.push(Z.charCodeAt(mn));for(var _n=Bt>0?Bt+1:0;_n<xe;){for(var Qt=Ee,$n=1,tr=m;;tr+=m){_n>=xe&&M("invalid-input");var jt=H(Z.charCodeAt(_n++));(jt>=m||jt>O((p-Ee)/$n))&&M("overflow"),Ee+=jt*$n;var Mn=tr<=Et?g:tr>=Et+y?y:tr-Et;if(jt<Mn)break;var fr=m-Mn;$n>O(p/fr)&&M("overflow"),$n*=fr}var Rn=oe.length+1;Et=z(Ee-Qt,Rn,Qt==0),O(Ee/Rn)>p-rt&&M("overflow"),rt+=O(Ee/Rn),Ee%=Rn,oe.splice(Ee++,0,rt)}return String.fromCodePoint.apply(String,oe)},j=function(Z){var oe=[];Z=B(Z);var xe=Z.length,Ee=E,rt=0,Et=w,Bt=!0,mn=!1,_n=void 0;try{for(var Qt=Z[Symbol.iterator](),$n;!(Bt=($n=Qt.next()).done);Bt=!0){var tr=$n.value;tr<128&&oe.push(D(tr))}}catch(Ne){mn=!0,_n=Ne}finally{try{!Bt&&Qt.return&&Qt.return()}finally{if(mn)throw _n}}var jt=oe.length,Mn=jt;for(jt&&oe.push(S);Mn<xe;){var fr=p,Rn=!0,Wr=!1,Qi=void 0;try{for(var _r=Z[Symbol.iterator](),bo;!(Rn=(bo=_r.next()).done);Rn=!0){var ei=bo.value;ei>=Ee&&ei<fr&&(fr=ei)}}catch(Ne){Wr=!0,Qi=Ne}finally{try{!Rn&&_r.return&&_r.return()}finally{if(Wr)throw Qi}}var ti=Mn+1;fr-Ee>O((p-rt)/ti)&&M("overflow"),rt+=(fr-Ee)*ti,Ee=fr;var qo=!0,Cs=!1,Ji=void 0;try{for(var Du=Z[Symbol.iterator](),Ac;!(qo=(Ac=Du.next()).done);qo=!0){var Y=Ac.value;if(Y<Ee&&++rt>p&&M("overflow"),Y==Ee){for(var re=rt,J=m;;J+=m){var ue=J<=Et?g:J>=Et+y?y:J-Et;if(re<ue)break;var de=re-ue,ae=m-ue;oe.push(D(P(ue+de%ae,0))),re=O(de/ae)}oe.push(D(P(re,0))),Et=z(rt,ti,Mn==jt),rt=0,++Mn}}}catch(Ne){Cs=!0,Ji=Ne}finally{try{!qo&&Du.return&&Du.return()}finally{if(Cs)throw Ji}}++rt,++Ee}return oe.join("")},q=function(Z){return L(Z,function(oe){return T.test(oe)?W(oe.slice(4).toLowerCase()):oe})},G=function(Z){return L(Z,function(oe){return C.test(oe)?"xn--"+j(oe):oe})},te={version:"2.1.0",ucs2:{decode:B,encode:U},decode:W,encode:j,toASCII:G,toUnicode:q},pe={};function be(ie){var Z=ie.charCodeAt(0),oe=void 0;return Z<16?oe="%0"+Z.toString(16).toUpperCase():Z<128?oe="%"+Z.toString(16).toUpperCase():Z<2048?oe="%"+(Z>>6|192).toString(16).toUpperCase()+"%"+(Z&63|128).toString(16).toUpperCase():oe="%"+(Z>>12|224).toString(16).toUpperCase()+"%"+(Z>>6&63|128).toString(16).toUpperCase()+"%"+(Z&63|128).toString(16).toUpperCase(),oe}function le(ie){for(var Z="",oe=0,xe=ie.length;oe<xe;){var Ee=parseInt(ie.substr(oe+1,2),16);if(Ee<128)Z+=String.fromCharCode(Ee),oe+=3;else if(Ee>=194&&Ee<224){if(xe-oe>=6){var rt=parseInt(ie.substr(oe+4,2),16);Z+=String.fromCharCode((Ee&31)<<6|rt&63)}else Z+=ie.substr(oe,6);oe+=6}else if(Ee>=224){if(xe-oe>=9){var Et=parseInt(ie.substr(oe+4,2),16),Bt=parseInt(ie.substr(oe+7,2),16);Z+=String.fromCharCode((Ee&15)<<12|(Et&63)<<6|Bt&63)}else Z+=ie.substr(oe,9);oe+=9}else Z+=ie.substr(oe,3),oe+=3}return Z}function me(ie,Z){function oe(xe){var Ee=le(xe);return Ee.match(Z.UNRESERVED)?Ee:xe}return ie.scheme&&(ie.scheme=String(ie.scheme).replace(Z.PCT_ENCODED,oe).toLowerCase().replace(Z.NOT_SCHEME,"")),ie.userinfo!==void 0&&(ie.userinfo=String(ie.userinfo).replace(Z.PCT_ENCODED,oe).replace(Z.NOT_USERINFO,be).replace(Z.PCT_ENCODED,s)),ie.host!==void 0&&(ie.host=String(ie.host).replace(Z.PCT_ENCODED,oe).toLowerCase().replace(Z.NOT_HOST,be).replace(Z.PCT_ENCODED,s)),ie.path!==void 0&&(ie.path=String(ie.path).replace(Z.PCT_ENCODED,oe).replace(ie.scheme?Z.NOT_PATH:Z.NOT_PATH_NOSCHEME,be).replace(Z.PCT_ENCODED,s)),ie.query!==void 0&&(ie.query=String(ie.query).replace(Z.PCT_ENCODED,oe).replace(Z.NOT_QUERY,be).replace(Z.PCT_ENCODED,s)),ie.fragment!==void 0&&(ie.fragment=String(ie.fragment).replace(Z.PCT_ENCODED,oe).replace(Z.NOT_FRAGMENT,be).replace(Z.PCT_ENCODED,s)),ie}function Se(ie){return ie.replace(/^0*(.*)/,"$1")||"0"}function ge(ie,Z){var oe=ie.match(Z.IPV4ADDRESS)||[],xe=d(oe,2),Ee=xe[1];return Ee?Ee.split(".").map(Se).join("."):ie}function tt(ie,Z){var oe=ie.match(Z.IPV6ADDRESS)||[],xe=d(oe,3),Ee=xe[1],rt=xe[2];if(Ee){for(var Et=Ee.toLowerCase().split("::").reverse(),Bt=d(Et,2),mn=Bt[0],_n=Bt[1],Qt=_n?_n.split(":").map(Se):[],$n=mn.split(":").map(Se),tr=Z.IPV4ADDRESS.test($n[$n.length-1]),jt=tr?7:8,Mn=$n.length-jt,fr=Array(jt),Rn=0;Rn<jt;++Rn)fr[Rn]=Qt[Rn]||$n[Mn+Rn]||"";tr&&(fr[jt-1]=ge(fr[jt-1],Z));var Wr=fr.reduce(function(ti,qo,Cs){if(!qo||qo==="0"){var Ji=ti[ti.length-1];Ji&&Ji.index+Ji.length===Cs?Ji.length++:ti.push({index:Cs,length:1})}return ti},[]),Qi=Wr.sort(function(ti,qo){return qo.length-ti.length})[0],_r=void 0;if(Qi&&Qi.length>1){var bo=fr.slice(0,Qi.index),ei=fr.slice(Qi.index+Qi.length);_r=bo.join(":")+"::"+ei.join(":")}else _r=fr.join(":");return rt&&(_r+="%"+rt),_r}else return ie}var Ue=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[^\/?#\]]+\]|[^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i,mt="".match(/(){0}/)[1]===void 0;function it(ie){var Z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},oe={},xe=Z.iri!==!1?f:c;Z.reference==="suffix"&&(ie=(Z.scheme?Z.scheme+":":"")+"//"+ie);var Ee=ie.match(Ue);if(Ee){mt?(oe.scheme=Ee[1],oe.userinfo=Ee[3],oe.host=Ee[4],oe.port=parseInt(Ee[5],10),oe.path=Ee[6]||"",oe.query=Ee[7],oe.fragment=Ee[8],isNaN(oe.port)&&(oe.port=Ee[5])):(oe.scheme=Ee[1]||void 0,oe.userinfo=ie.indexOf("@")!==-1?Ee[3]:void 0,oe.host=ie.indexOf("//")!==-1?Ee[4]:void 0,oe.port=parseInt(Ee[5],10),oe.path=Ee[6]||"",oe.query=ie.indexOf("?")!==-1?Ee[7]:void 0,oe.fragment=ie.indexOf("#")!==-1?Ee[8]:void 0,isNaN(oe.port)&&(oe.port=ie.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?Ee[4]:void 0)),oe.host&&(oe.host=tt(ge(oe.host,xe),xe)),oe.scheme===void 0&&oe.userinfo===void 0&&oe.host===void 0&&oe.port===void 0&&!oe.path&&oe.query===void 0?oe.reference="same-document":oe.scheme===void 0?oe.reference="relative":oe.fragment===void 0?oe.reference="absolute":oe.reference="uri",Z.reference&&Z.reference!=="suffix"&&Z.reference!==oe.reference&&(oe.error=oe.error||"URI is not a "+Z.reference+" reference.");var rt=pe[(Z.scheme||oe.scheme||"").toLowerCase()];if(!Z.unicodeSupport&&(!rt||!rt.unicodeSupport)){if(oe.host&&(Z.domainHost||rt&&rt.domainHost))try{oe.host=te.toASCII(oe.host.replace(xe.PCT_ENCODED,le).toLowerCase())}catch(Et){oe.error=oe.error||"Host's domain name can not be converted to ASCII via punycode: "+Et}me(oe,c)}else me(oe,xe);rt&&rt.parse&&rt.parse(oe,Z)}else oe.error=oe.error||"URI can not be parsed.";return oe}function Re(ie,Z){var oe=Z.iri!==!1?f:c,xe=[];return ie.userinfo!==void 0&&(xe.push(ie.userinfo),xe.push("@")),ie.host!==void 0&&xe.push(tt(ge(String(ie.host),oe),oe).replace(oe.IPV6ADDRESS,function(Ee,rt,Et){return"["+rt+(Et?"%25"+Et:"")+"]"})),(typeof ie.port=="number"||typeof ie.port=="string")&&(xe.push(":"),xe.push(String(ie.port))),xe.length?xe.join(""):void 0}var $e=/^\.\.?\//,Ge=/^\/\.(\/|$)/,dt=/^\/\.\.(\/|$)/,Nt=/^\/?(?:.|\n)*?(?=\/|$)/;function He(ie){for(var Z=[];ie.length;)if(ie.match($e))ie=ie.replace($e,"");else if(ie.match(Ge))ie=ie.replace(Ge,"/");else if(ie.match(dt))ie=ie.replace(dt,"/"),Z.pop();else if(ie==="."||ie==="..")ie="";else{var oe=ie.match(Nt);if(oe){var xe=oe[0];ie=ie.slice(xe.length),Z.push(xe)}else throw new Error("Unexpected dot segment condition")}return Z.join("")}function fe(ie){var Z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},oe=Z.iri?f:c,xe=[],Ee=pe[(Z.scheme||ie.scheme||"").toLowerCase()];if(Ee&&Ee.serialize&&Ee.serialize(ie,Z),ie.host&&!oe.IPV6ADDRESS.test(ie.host)){if(Z.domainHost||Ee&&Ee.domainHost)try{ie.host=Z.iri?te.toUnicode(ie.host):te.toASCII(ie.host.replace(oe.PCT_ENCODED,le).toLowerCase())}catch(Bt){ie.error=ie.error||"Host's domain name can not be converted to "+(Z.iri?"Unicode":"ASCII")+" via punycode: "+Bt}}me(ie,oe),Z.reference!=="suffix"&&ie.scheme&&(xe.push(ie.scheme),xe.push(":"));var rt=Re(ie,Z);if(rt!==void 0&&(Z.reference!=="suffix"&&xe.push("//"),xe.push(rt),ie.path&&ie.path.charAt(0)!=="/"&&xe.push("/")),ie.path!==void 0){var Et=ie.path;!Z.absolutePath&&(!Ee||!Ee.absolutePath)&&(Et=He(Et)),rt===void 0&&(Et=Et.replace(/^\/\//,"/%2F")),xe.push(Et)}return ie.query!==void 0&&(xe.push("?"),xe.push(ie.query)),ie.fragment!==void 0&&(xe.push("#"),xe.push(ie.fragment)),xe.join("")}function lt(ie,Z){var oe=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},xe=arguments[3],Ee={};return xe||(ie=it(fe(ie,oe),oe),Z=it(fe(Z,oe),oe)),oe=oe||{},!oe.tolerant&&Z.scheme?(Ee.scheme=Z.scheme,Ee.userinfo=Z.userinfo,Ee.host=Z.host,Ee.port=Z.port,Ee.path=He(Z.path||""),Ee.query=Z.query):(Z.userinfo!==void 0||Z.host!==void 0||Z.port!==void 0?(Ee.userinfo=Z.userinfo,Ee.host=Z.host,Ee.port=Z.port,Ee.path=He(Z.path||""),Ee.query=Z.query):(Z.path?(Z.path.charAt(0)==="/"?Ee.path=He(Z.path):((ie.userinfo!==void 0||ie.host!==void 0||ie.port!==void 0)&&!ie.path?Ee.path="/"+Z.path:ie.path?Ee.path=ie.path.slice(0,ie.path.lastIndexOf("/")+1)+Z.path:Ee.path=Z.path,Ee.path=He(Ee.path)),Ee.query=Z.query):(Ee.path=ie.path,Z.query!==void 0?Ee.query=Z.query:Ee.query=ie.query),Ee.userinfo=ie.userinfo,Ee.host=ie.host,Ee.port=ie.port),Ee.scheme=ie.scheme),Ee.fragment=Z.fragment,Ee}function gt(ie,Z,oe){var xe=u({scheme:"null"},oe);return fe(lt(it(ie,xe),it(Z,xe),xe,!0),xe)}function ce(ie,Z){return typeof ie=="string"?ie=fe(it(ie,Z),Z):o(ie)==="object"&&(ie=it(fe(ie,Z),Z)),ie}function Te(ie,Z,oe){return typeof ie=="string"?ie=fe(it(ie,oe),oe):o(ie)==="object"&&(ie=fe(ie,oe)),typeof Z=="string"?Z=fe(it(Z,oe),oe):o(Z)==="object"&&(Z=fe(Z,oe)),ie===Z}function ze(ie,Z){return ie&&ie.toString().replace(!Z||!Z.iri?c.ESCAPE:f.ESCAPE,be)}function st(ie,Z){return ie&&ie.toString().replace(!Z||!Z.iri?c.PCT_ENCODED:f.PCT_ENCODED,le)}var vt={scheme:"http",domainHost:!0,parse:function(Z,oe){return Z.host||(Z.error=Z.error||"HTTP URIs must have a host."),Z},serialize:function(Z,oe){var xe=String(Z.scheme).toLowerCase()==="https";return(Z.port===(xe?443:80)||Z.port==="")&&(Z.port=void 0),Z.path||(Z.path="/"),Z}},vn={scheme:"https",domainHost:vt.domainHost,parse:vt.parse,serialize:vt.serialize};function Zn(ie){return typeof ie.secure=="boolean"?ie.secure:String(ie.scheme).toLowerCase()==="wss"}var bn={scheme:"ws",domainHost:!0,parse:function(Z,oe){var xe=Z;return xe.secure=Zn(xe),xe.resourceName=(xe.path||"/")+(xe.query?"?"+xe.query:""),xe.path=void 0,xe.query=void 0,xe},serialize:function(Z,oe){if((Z.port===(Zn(Z)?443:80)||Z.port==="")&&(Z.port=void 0),typeof Z.secure=="boolean"&&(Z.scheme=Z.secure?"wss":"ws",Z.secure=void 0),Z.resourceName){var xe=Z.resourceName.split("?"),Ee=d(xe,2),rt=Ee[0],Et=Ee[1];Z.path=rt&&rt!=="/"?rt:void 0,Z.query=Et,Z.resourceName=void 0}return Z.fragment=void 0,Z}},Bn={scheme:"wss",domainHost:bn.domainHost,parse:bn.parse,serialize:bn.serialize},Zt={},an="[A-Za-z0-9\\-\\.\\_\\~\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]",Dn="[0-9A-Fa-f]",On=i(i("%[EFef]"+Dn+"%"+Dn+Dn+"%"+Dn+Dn)+"|"+i("%[89A-Fa-f]"+Dn+"%"+Dn+Dn)+"|"+i("%"+Dn+Dn)),Ho="[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]",Jr="[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\<\\>A-Z\\x5E-\\x7E]",un=r(Jr,'[\\"\\\\]'),Zr="[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]",er=new RegExp(an,"g"),Si=new RegExp(On,"g"),ed=new RegExp(r("[^]",Ho,"[\\.]",'[\\"]',un),"g"),Wa=new RegExp(r("[^]",an,Zr),"g"),Cc=Wa;function Qn(ie){var Z=le(ie);return Z.match(er)?Z:ie}var qr={scheme:"mailto",parse:function(Z,oe){var xe=Z,Ee=xe.to=xe.path?xe.path.split(","):[];if(xe.path=void 0,xe.query){for(var rt=!1,Et={},Bt=xe.query.split("&"),mn=0,_n=Bt.length;mn<_n;++mn){var Qt=Bt[mn].split("=");switch(Qt[0]){case"to":for(var $n=Qt[1].split(","),tr=0,jt=$n.length;tr<jt;++tr)Ee.push($n[tr]);break;case"subject":xe.subject=st(Qt[1],oe);break;case"body":xe.body=st(Qt[1],oe);break;default:rt=!0,Et[st(Qt[0],oe)]=st(Qt[1],oe);break}}rt&&(xe.headers=Et)}xe.query=void 0;for(var Mn=0,fr=Ee.length;Mn<fr;++Mn){var Rn=Ee[Mn].split("@");if(Rn[0]=st(Rn[0]),oe.unicodeSupport)Rn[1]=st(Rn[1],oe).toLowerCase();else try{Rn[1]=te.toASCII(st(Rn[1],oe).toLowerCase())}catch(Wr){xe.error=xe.error||"Email address's domain name can not be converted to ASCII via punycode: "+Wr}Ee[Mn]=Rn.join("@")}return xe},serialize:function(Z,oe){var xe=Z,Ee=a(Z.to);if(Ee){for(var rt=0,Et=Ee.length;rt<Et;++rt){var Bt=String(Ee[rt]),mn=Bt.lastIndexOf("@"),_n=Bt.slice(0,mn).replace(Si,Qn).replace(Si,s).replace(ed,be),Qt=Bt.slice(mn+1);try{Qt=oe.iri?te.toUnicode(Qt):te.toASCII(st(Qt,oe).toLowerCase())}catch(Mn){xe.error=xe.error||"Email address's domain name can not be converted to "+(oe.iri?"Unicode":"ASCII")+" via punycode: "+Mn}Ee[rt]=_n+"@"+Qt}xe.path=Ee.join(",")}var $n=Z.headers=Z.headers||{};Z.subject&&($n.subject=Z.subject),Z.body&&($n.body=Z.body);var tr=[];for(var jt in $n)$n[jt]!==Zt[jt]&&tr.push(jt.replace(Si,Qn).replace(Si,s).replace(Wa,be)+"="+$n[jt].replace(Si,Qn).replace(Si,s).replace(Cc,be));return tr.length&&(xe.query=tr.join("&")),xe}},br=/^([^\:]+)\:(.*)/,ta={scheme:"urn",parse:function(Z,oe){var xe=Z.path&&Z.path.match(br),Ee=Z;if(xe){var rt=oe.scheme||Ee.scheme||"urn",Et=xe[1].toLowerCase(),Bt=xe[2],mn=rt+":"+(oe.nid||Et),_n=pe[mn];Ee.nid=Et,Ee.nss=Bt,Ee.path=void 0,_n&&(Ee=_n.parse(Ee,oe))}else Ee.error=Ee.error||"URN can not be parsed.";return Ee},serialize:function(Z,oe){var xe=oe.scheme||Z.scheme||"urn",Ee=Z.nid,rt=xe+":"+(oe.nid||Ee),Et=pe[rt];Et&&(Z=Et.serialize(Z,oe));var Bt=Z,mn=Z.nss;return Bt.path=(Ee||oe.nid)+":"+mn,Bt}},Ts=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/,Ss={scheme:"urn:uuid",parse:function(Z,oe){var xe=Z;return xe.uuid=xe.nss,xe.nss=void 0,!oe.tolerant&&(!xe.uuid||!xe.uuid.match(Ts))&&(xe.error=xe.error||"UUID is not valid."),xe},serialize:function(Z,oe){var xe=Z;return xe.nss=(Z.uuid||"").toLowerCase(),xe}};pe[vt.scheme]=vt,pe[vn.scheme]=vn,pe[bn.scheme]=bn,pe[Bn.scheme]=Bn,pe[qr.scheme]=qr,pe[ta.scheme]=ta,pe[Ss.scheme]=Ss,n.SCHEMES=pe,n.pctEncChar=be,n.pctDecChars=le,n.parse=it,n.removeDotSegments=He,n.serialize=fe,n.resolveComponents=lt,n.resolve=gt,n.normalize=ce,n.equal=Te,n.escapeComponent=ze,n.unescapeComponent=st,Object.defineProperty(n,"__esModule",{value:!0})})})(Qj,Qj.exports);var Zlt=Qj.exports;Object.defineProperty(nH,"__esModule",{value:!0});const Q1e=Zlt;Q1e.code='require("ajv/dist/runtime/uri").default';nH.default=Q1e;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.CodeGen=e.Name=e.nil=e.stringify=e.str=e._=e.KeywordCxt=void 0;var t=tc;Object.defineProperty(e,"KeywordCxt",{enumerable:!0,get:function(){return t.KeywordCxt}});var n=pn;Object.defineProperty(e,"_",{enumerable:!0,get:function(){return n._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return n.str}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return n.stringify}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return n.nil}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return n.Name}}),Object.defineProperty(e,"CodeGen",{enumerable:!0,get:function(){return n.CodeGen}});const r=_C,i=F_,o=z0,s=ya,a=pn,u=Ro,l=Li,c=bt,f=Jlt,d=nH,h=(P,z)=>new RegExp(P,z);h.code="new RegExp";const p=["removeAdditional","useDefaults","coerceTypes"],m=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),g={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},y={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},v=200;function _(P){var z,W,j,q,G,te,pe,be,le,me,Se,ge,tt,Ue,mt,it,Re,$e,Ge,dt,Nt,He,fe,lt,gt;const ce=P.strict,Te=(z=P.code)===null||z===void 0?void 0:z.optimize,ze=Te===!0||Te===void 0?1:Te||0,st=(j=(W=P.code)===null||W===void 0?void 0:W.regExp)!==null&&j!==void 0?j:h,vt=(q=P.uriResolver)!==null&&q!==void 0?q:d.default;return{strictSchema:(te=(G=P.strictSchema)!==null&&G!==void 0?G:ce)!==null&&te!==void 0?te:!0,strictNumbers:(be=(pe=P.strictNumbers)!==null&&pe!==void 0?pe:ce)!==null&&be!==void 0?be:!0,strictTypes:(me=(le=P.strictTypes)!==null&&le!==void 0?le:ce)!==null&&me!==void 0?me:"log",strictTuples:(ge=(Se=P.strictTuples)!==null&&Se!==void 0?Se:ce)!==null&&ge!==void 0?ge:"log",strictRequired:(Ue=(tt=P.strictRequired)!==null&&tt!==void 0?tt:ce)!==null&&Ue!==void 0?Ue:!1,code:P.code?{...P.code,optimize:ze,regExp:st}:{optimize:ze,regExp:st},loopRequired:(mt=P.loopRequired)!==null&&mt!==void 0?mt:v,loopEnum:(it=P.loopEnum)!==null&&it!==void 0?it:v,meta:(Re=P.meta)!==null&&Re!==void 0?Re:!0,messages:($e=P.messages)!==null&&$e!==void 0?$e:!0,inlineRefs:(Ge=P.inlineRefs)!==null&&Ge!==void 0?Ge:!0,schemaId:(dt=P.schemaId)!==null&&dt!==void 0?dt:"$id",addUsedSchema:(Nt=P.addUsedSchema)!==null&&Nt!==void 0?Nt:!0,validateSchema:(He=P.validateSchema)!==null&&He!==void 0?He:!0,validateFormats:(fe=P.validateFormats)!==null&&fe!==void 0?fe:!0,unicodeRegExp:(lt=P.unicodeRegExp)!==null&&lt!==void 0?lt:!0,int32range:(gt=P.int32range)!==null&&gt!==void 0?gt:!0,uriResolver:vt}}class w{constructor(z={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,z=this.opts={...z,..._(z)};const{es5:W,lines:j}=this.opts.code;this.scope=new a.ValueScope({scope:{},prefixes:m,es5:W,lines:j}),this.logger=O(z.logger);const q=z.validateFormats;z.validateFormats=!1,this.RULES=(0,o.getRules)(),E.call(this,g,z,"NOT SUPPORTED"),E.call(this,y,z,"DEPRECATED","warn"),this._metaOpts=R.call(this),z.formats&&C.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),z.keywords&&A.call(this,z.keywords),typeof z.meta=="object"&&this.addMetaSchema(z.meta),T.call(this),z.validateFormats=q}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){const{$data:z,meta:W,schemaId:j}=this.opts;let q=f;j==="id"&&(q={...f},q.id=q.$id,delete q.$id),W&&z&&this.addMetaSchema(q,q[j],!1)}defaultMeta(){const{meta:z,schemaId:W}=this.opts;return this.opts.defaultMeta=typeof z=="object"?z[W]||z:void 0}validate(z,W){let j;if(typeof z=="string"){if(j=this.getSchema(z),!j)throw new Error(`no schema with key or ref "${z}"`)}else j=this.compile(z);const q=j(W);return"$async"in j||(this.errors=j.errors),q}compile(z,W){const j=this._addSchema(z,W);return j.validate||this._compileSchemaEnv(j)}compileAsync(z,W){if(typeof this.opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");const{loadSchema:j}=this.opts;return q.call(this,z,W);async function q(me,Se){await G.call(this,me.$schema);const ge=this._addSchema(me,Se);return ge.validate||te.call(this,ge)}async function G(me){me&&!this.getSchema(me)&&await q.call(this,{$ref:me},!0)}async function te(me){try{return this._compileSchemaEnv(me)}catch(Se){if(!(Se instanceof i.default))throw Se;return pe.call(this,Se),await be.call(this,Se.missingSchema),te.call(this,me)}}function pe({missingSchema:me,missingRef:Se}){if(this.refs[me])throw new Error(`AnySchema ${me} is loaded but ${Se} cannot be resolved`)}async function be(me){const Se=await le.call(this,me);this.refs[me]||await G.call(this,Se.$schema),this.refs[me]||this.addSchema(Se,me,W)}async function le(me){const Se=this._loading[me];if(Se)return Se;try{return await(this._loading[me]=j(me))}finally{delete this._loading[me]}}}addSchema(z,W,j,q=this.opts.validateSchema){if(Array.isArray(z)){for(const te of z)this.addSchema(te,void 0,j,q);return this}let G;if(typeof z=="object"){const{schemaId:te}=this.opts;if(G=z[te],G!==void 0&&typeof G!="string")throw new Error(`schema ${te} must be string`)}return W=(0,u.normalizeId)(W||G),this._checkUnique(W),this.schemas[W]=this._addSchema(z,j,W,q,!0),this}addMetaSchema(z,W,j=this.opts.validateSchema){return this.addSchema(z,W,!0,j),this}validateSchema(z,W){if(typeof z=="boolean")return!0;let j;if(j=z.$schema,j!==void 0&&typeof j!="string")throw new Error("$schema must be a string");if(j=j||this.opts.defaultMeta||this.defaultMeta(),!j)return this.logger.warn("meta-schema not available"),this.errors=null,!0;const q=this.validate(j,z);if(!q&&W){const G="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(G);else throw new Error(G)}return q}getSchema(z){let W;for(;typeof(W=S.call(this,z))=="string";)z=W;if(W===void 0){const{schemaId:j}=this.opts,q=new s.SchemaEnv({schema:{},schemaId:j});if(W=s.resolveSchema.call(this,q,z),!W)return;this.refs[z]=W}return W.validate||this._compileSchemaEnv(W)}removeSchema(z){if(z instanceof RegExp)return this._removeAllSchemas(this.schemas,z),this._removeAllSchemas(this.refs,z),this;switch(typeof z){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{const W=S.call(this,z);return typeof W=="object"&&this._cache.delete(W.schema),delete this.schemas[z],delete this.refs[z],this}case"object":{const W=z;this._cache.delete(W);let j=z[this.opts.schemaId];return j&&(j=(0,u.normalizeId)(j),delete this.schemas[j],delete this.refs[j]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(z){for(const W of z)this.addKeyword(W);return this}addKeyword(z,W){let j;if(typeof z=="string")j=z,typeof W=="object"&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),W.keyword=j);else if(typeof z=="object"&&W===void 0){if(W=z,j=W.keyword,Array.isArray(j)&&!j.length)throw new Error("addKeywords: keyword must be string or non-empty array")}else throw new Error("invalid addKeywords parameters");if(M.call(this,j,W),!W)return(0,c.eachItem)(j,G=>F.call(this,G)),this;B.call(this,W);const q={...W,type:(0,l.getJSONTypes)(W.type),schemaType:(0,l.getJSONTypes)(W.schemaType)};return(0,c.eachItem)(j,q.type.length===0?G=>F.call(this,G,q):G=>q.type.forEach(te=>F.call(this,G,q,te))),this}getKeyword(z){const W=this.RULES.all[z];return typeof W=="object"?W.definition:!!W}removeKeyword(z){const{RULES:W}=this;delete W.keywords[z],delete W.all[z];for(const j of W.rules){const q=j.rules.findIndex(G=>G.keyword===z);q>=0&&j.rules.splice(q,1)}return this}addFormat(z,W){return typeof W=="string"&&(W=new RegExp(W)),this.formats[z]=W,this}errorsText(z=this.errors,{separator:W=", ",dataVar:j="data"}={}){return!z||z.length===0?"No errors":z.map(q=>`${j}${q.instancePath} ${q.message}`).reduce((q,G)=>q+W+G)}$dataMetaSchema(z,W){const j=this.RULES.all;z=JSON.parse(JSON.stringify(z));for(const q of W){const G=q.split("/").slice(1);let te=z;for(const pe of G)te=te[pe];for(const pe in j){const be=j[pe];if(typeof be!="object")continue;const{$data:le}=be.definition,me=te[pe];le&&me&&(te[pe]=H(me))}}return z}_removeAllSchemas(z,W){for(const j in z){const q=z[j];(!W||W.test(j))&&(typeof q=="string"?delete z[j]:q&&!q.meta&&(this._cache.delete(q.schema),delete z[j]))}}_addSchema(z,W,j,q=this.opts.validateSchema,G=this.opts.addUsedSchema){let te;const{schemaId:pe}=this.opts;if(typeof z=="object")te=z[pe];else{if(this.opts.jtd)throw new Error("schema must be object");if(typeof z!="boolean")throw new Error("schema must be object or boolean")}let be=this._cache.get(z);if(be!==void 0)return be;j=(0,u.normalizeId)(te||j);const le=u.getSchemaRefs.call(this,z,j);return be=new s.SchemaEnv({schema:z,schemaId:pe,meta:W,baseId:j,localRefs:le}),this._cache.set(be.schema,be),G&&!j.startsWith("#")&&(j&&this._checkUnique(j),this.refs[j]=be),q&&this.validateSchema(z,!0),be}_checkUnique(z){if(this.schemas[z]||this.refs[z])throw new Error(`schema with key or id "${z}" already exists`)}_compileSchemaEnv(z){if(z.meta?this._compileMetaSchema(z):s.compileSchema.call(this,z),!z.validate)throw new Error("ajv implementation error");return z.validate}_compileMetaSchema(z){const W=this.opts;this.opts=this._metaOpts;try{s.compileSchema.call(this,z)}finally{this.opts=W}}}w.ValidationError=r.default,w.MissingRefError=i.default,e.default=w;function E(P,z,W,j="error"){for(const q in P){const G=q;G in z&&this.logger[j](`${W}: option ${q}. ${P[G]}`)}}function S(P){return P=(0,u.normalizeId)(P),this.schemas[P]||this.refs[P]}function T(){const P=this.opts.schemas;if(P)if(Array.isArray(P))this.addSchema(P);else for(const z in P)this.addSchema(P[z],z)}function C(){for(const P in this.opts.formats){const z=this.opts.formats[P];z&&this.addFormat(P,z)}}function A(P){if(Array.isArray(P)){this.addVocabulary(P);return}this.logger.warn("keywords option as map is deprecated, pass array");for(const z in P){const W=P[z];W.keyword||(W.keyword=z),this.addKeyword(W)}}function R(){const P={...this.opts};for(const z of p)delete P[z];return P}const N={log(){},warn(){},error(){}};function O(P){if(P===!1)return N;if(P===void 0)return console;if(P.log&&P.warn&&P.error)return P;throw new Error("logger must implement log, warn and error methods")}const D=/^[a-z_$][a-z0-9_$:-]*$/i;function M(P,z){const{RULES:W}=this;if((0,c.eachItem)(P,j=>{if(W.keywords[j])throw new Error(`Keyword ${j} is already defined`);if(!D.test(j))throw new Error(`Keyword ${j} has invalid name`)}),!!z&&z.$data&&!("code"in z||"validate"in z))throw new Error('$data keyword must have "code" or "validate" function')}function F(P,z,W){var j;const q=z==null?void 0:z.post;if(W&&q)throw new Error('keyword with "post" flag cannot have "type"');const{RULES:G}=this;let te=q?G.post:G.rules.find(({type:be})=>be===W);if(te||(te={type:W,rules:[]},G.rules.push(te)),G.keywords[P]=!0,!z)return;const pe={keyword:P,definition:{...z,type:(0,l.getJSONTypes)(z.type),schemaType:(0,l.getJSONTypes)(z.schemaType)}};z.before?L.call(this,te,pe,z.before):te.rules.push(pe),G.all[P]=pe,(j=z.implements)===null||j===void 0||j.forEach(be=>this.addKeyword(be))}function L(P,z,W){const j=P.rules.findIndex(q=>q.keyword===W);j>=0?P.rules.splice(j,0,z):(P.rules.push(z),this.logger.warn(`rule ${W} is not defined`))}function B(P){let{metaSchema:z}=P;z!==void 0&&(P.$data&&this.opts.$data&&(z=H(z)),P.validateSchema=this.compile(z,!0))}const U={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function H(P){return{anyOf:[P,U]}}})(b1e);var rH={},iH={},oH={};Object.defineProperty(oH,"__esModule",{value:!0});const ect={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};oH.default=ect;var V0={};Object.defineProperty(V0,"__esModule",{value:!0});V0.callRef=V0.getValidate=void 0;const tct=F_,Cre=dn,la=pn,Ev=zf,Are=ya,I2=bt,nct={keyword:"$ref",schemaType:"string",code(e){const{gen:t,schema:n,it:r}=e,{baseId:i,schemaEnv:o,validateName:s,opts:a,self:u}=r,{root:l}=o;if((n==="#"||n==="#/")&&i===l.baseId)return f();const c=Are.resolveRef.call(u,l,i,n);if(c===void 0)throw new tct.default(r.opts.uriResolver,i,n);if(c instanceof Are.SchemaEnv)return d(c);return h(c);function f(){if(o===l)return Kk(e,s,o,o.$async);const p=t.scopeValue("root",{ref:l});return Kk(e,(0,la._)`${p}.validate`,l,l.$async)}function d(p){const m=J1e(e,p);Kk(e,m,p,p.$async)}function h(p){const m=t.scopeValue("schema",a.code.source===!0?{ref:p,code:(0,la.stringify)(p)}:{ref:p}),g=t.name("valid"),y=e.subschema({schema:p,dataTypes:[],schemaPath:la.nil,topSchemaRef:m,errSchemaPath:n},g);e.mergeEvaluated(y),e.ok(g)}}};function J1e(e,t){const{gen:n}=e;return t.validate?n.scopeValue("validate",{ref:t.validate}):(0,la._)`${n.scopeValue("wrapper",{ref:t})}.validate`}V0.getValidate=J1e;function Kk(e,t,n,r){const{gen:i,it:o}=e,{allErrors:s,schemaEnv:a,opts:u}=o,l=u.passContext?Ev.default.this:la.nil;r?c():f();function c(){if(!a.$async)throw new Error("async schema referenced by sync schema");const p=i.let("valid");i.try(()=>{i.code((0,la._)`await ${(0,Cre.callValidateCode)(e,t,l)}`),h(t),s||i.assign(p,!0)},m=>{i.if((0,la._)`!(${m} instanceof ${o.ValidationError})`,()=>i.throw(m)),d(m),s||i.assign(p,!1)}),e.ok(p)}function f(){e.result((0,Cre.callValidateCode)(e,t,l),()=>h(t),()=>d(t))}function d(p){const m=(0,la._)`${p}.errors`;i.assign(Ev.default.vErrors,(0,la._)`${Ev.default.vErrors} === null ? ${m} : ${Ev.default.vErrors}.concat(${m})`),i.assign(Ev.default.errors,(0,la._)`${Ev.default.vErrors}.length`)}function h(p){var m;if(!o.opts.unevaluated)return;const g=(m=n==null?void 0:n.validate)===null||m===void 0?void 0:m.evaluated;if(o.props!==!0)if(g&&!g.dynamicProps)g.props!==void 0&&(o.props=I2.mergeEvaluated.props(i,g.props,o.props));else{const y=i.var("props",(0,la._)`${p}.evaluated.props`);o.props=I2.mergeEvaluated.props(i,y,o.props,la.Name)}if(o.items!==!0)if(g&&!g.dynamicItems)g.items!==void 0&&(o.items=I2.mergeEvaluated.items(i,g.items,o.items));else{const y=i.var("items",(0,la._)`${p}.evaluated.items`);o.items=I2.mergeEvaluated.items(i,y,o.items,la.Name)}}}V0.callRef=Kk;V0.default=nct;Object.defineProperty(iH,"__esModule",{value:!0});const rct=oH,ict=V0,oct=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",rct.default,ict.default];iH.default=oct;var sH={},aH={};Object.defineProperty(aH,"__esModule",{value:!0});const AN=pn,Bh=AN.operators,kN={maximum:{okStr:"<=",ok:Bh.LTE,fail:Bh.GT},minimum:{okStr:">=",ok:Bh.GTE,fail:Bh.LT},exclusiveMaximum:{okStr:"<",ok:Bh.LT,fail:Bh.GTE},exclusiveMinimum:{okStr:">",ok:Bh.GT,fail:Bh.LTE}},sct={message:({keyword:e,schemaCode:t})=>(0,AN.str)`must be ${kN[e].okStr} ${t}`,params:({keyword:e,schemaCode:t})=>(0,AN._)`{comparison: ${kN[e].okStr}, limit: ${t}}`},act={keyword:Object.keys(kN),type:"number",schemaType:"number",$data:!0,error:sct,code(e){const{keyword:t,data:n,schemaCode:r}=e;e.fail$data((0,AN._)`${n} ${kN[t].fail} ${r} || isNaN(${n})`)}};aH.default=act;var uH={};Object.defineProperty(uH,"__esModule",{value:!0});const Ox=pn,uct={message:({schemaCode:e})=>(0,Ox.str)`must be multiple of ${e}`,params:({schemaCode:e})=>(0,Ox._)`{multipleOf: ${e}}`},lct={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:uct,code(e){const{gen:t,data:n,schemaCode:r,it:i}=e,o=i.opts.multipleOfPrecision,s=t.let("res"),a=o?(0,Ox._)`Math.abs(Math.round(${s}) - ${s}) > 1e-${o}`:(0,Ox._)`${s} !== parseInt(${s})`;e.fail$data((0,Ox._)`(${r} === 0 || (${s} = ${n}/${r}, ${a}))`)}};uH.default=lct;var lH={},cH={};Object.defineProperty(cH,"__esModule",{value:!0});function Z1e(e){const t=e.length;let n=0,r=0,i;for(;r<t;)n++,i=e.charCodeAt(r++),i>=55296&&i<=56319&&r<t&&(i=e.charCodeAt(r),(i&64512)===56320&&r++);return n}cH.default=Z1e;Z1e.code='require("ajv/dist/runtime/ucs2length").default';Object.defineProperty(lH,"__esModule",{value:!0});const Vg=pn,cct=bt,fct=cH,dct={message({keyword:e,schemaCode:t}){const n=e==="maxLength"?"more":"fewer";return(0,Vg.str)`must NOT have ${n} than ${t} characters`},params:({schemaCode:e})=>(0,Vg._)`{limit: ${e}}`},hct={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:dct,code(e){const{keyword:t,data:n,schemaCode:r,it:i}=e,o=t==="maxLength"?Vg.operators.GT:Vg.operators.LT,s=i.opts.unicode===!1?(0,Vg._)`${n}.length`:(0,Vg._)`${(0,cct.useFunc)(e.gen,fct.default)}(${n})`;e.fail$data((0,Vg._)`${s} ${o} ${r}`)}};lH.default=hct;var fH={};Object.defineProperty(fH,"__esModule",{value:!0});const pct=dn,IN=pn,mct={message:({schemaCode:e})=>(0,IN.str)`must match pattern "${e}"`,params:({schemaCode:e})=>(0,IN._)`{pattern: ${e}}`},gct={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:mct,code(e){const{data:t,$data:n,schema:r,schemaCode:i,it:o}=e,s=o.opts.unicodeRegExp?"u":"",a=n?(0,IN._)`(new RegExp(${i}, ${s}))`:(0,pct.usePattern)(e,r);e.fail$data((0,IN._)`!${a}.test(${t})`)}};fH.default=gct;var dH={};Object.defineProperty(dH,"__esModule",{value:!0});const $x=pn,yct={message({keyword:e,schemaCode:t}){const n=e==="maxProperties"?"more":"fewer";return(0,$x.str)`must NOT have ${n} than ${t} properties`},params:({schemaCode:e})=>(0,$x._)`{limit: ${e}}`},vct={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:yct,code(e){const{keyword:t,data:n,schemaCode:r}=e,i=t==="maxProperties"?$x.operators.GT:$x.operators.LT;e.fail$data((0,$x._)`Object.keys(${n}).length ${i} ${r}`)}};dH.default=vct;var hH={};Object.defineProperty(hH,"__esModule",{value:!0});const Vw=dn,Mx=pn,bct=bt,_ct={message:({params:{missingProperty:e}})=>(0,Mx.str)`must have required property '${e}'`,params:({params:{missingProperty:e}})=>(0,Mx._)`{missingProperty: ${e}}`},wct={keyword:"required",type:"object",schemaType:"array",$data:!0,error:_ct,code(e){const{gen:t,schema:n,schemaCode:r,data:i,$data:o,it:s}=e,{opts:a}=s;if(!o&&n.length===0)return;const u=n.length>=a.loopRequired;if(s.allErrors?l():c(),a.strictRequired){const h=e.parentSchema.properties,{definedProperties:p}=e.it;for(const m of n)if((h==null?void 0:h[m])===void 0&&!p.has(m)){const g=s.schemaEnv.baseId+s.errSchemaPath,y=`required property "${m}" is not defined at "${g}" (strictRequired)`;(0,bct.checkStrictMode)(s,y,s.opts.strictRequired)}}function l(){if(u||o)e.block$data(Mx.nil,f);else for(const h of n)(0,Vw.checkReportMissingProp)(e,h)}function c(){const h=t.let("missing");if(u||o){const p=t.let("valid",!0);e.block$data(p,()=>d(h,p)),e.ok(p)}else t.if((0,Vw.checkMissingProp)(e,n,h)),(0,Vw.reportMissingProp)(e,h),t.else()}function f(){t.forOf("prop",r,h=>{e.setParams({missingProperty:h}),t.if((0,Vw.noPropertyInData)(t,i,h,a.ownProperties),()=>e.error())})}function d(h,p){e.setParams({missingProperty:h}),t.forOf(h,r,()=>{t.assign(p,(0,Vw.propertyInData)(t,i,h,a.ownProperties)),t.if((0,Mx.not)(p),()=>{e.error(),t.break()})},Mx.nil)}}};hH.default=wct;var pH={};Object.defineProperty(pH,"__esModule",{value:!0});const Lx=pn,Ect={message({keyword:e,schemaCode:t}){const n=e==="maxItems"?"more":"fewer";return(0,Lx.str)`must NOT have ${n} than ${t} items`},params:({schemaCode:e})=>(0,Lx._)`{limit: ${e}}`},xct={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:Ect,code(e){const{keyword:t,data:n,schemaCode:r}=e,i=t==="maxItems"?Lx.operators.GT:Lx.operators.LT;e.fail$data((0,Lx._)`${n}.length ${i} ${r}`)}};pH.default=xct;var mH={},wC={};Object.defineProperty(wC,"__esModule",{value:!0});const ebe=Oz;ebe.code='require("ajv/dist/runtime/equal").default';wC.default=ebe;Object.defineProperty(mH,"__esModule",{value:!0});const C6=Li,So=pn,Tct=bt,Sct=wC,Cct={message:({params:{i:e,j:t}})=>(0,So.str)`must NOT have duplicate items (items ## ${t} and ${e} are identical)`,params:({params:{i:e,j:t}})=>(0,So._)`{i: ${e}, j: ${t}}`},Act={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:Cct,code(e){const{gen:t,data:n,$data:r,schema:i,parentSchema:o,schemaCode:s,it:a}=e;if(!r&&!i)return;const u=t.let("valid"),l=o.items?(0,C6.getSchemaTypes)(o.items):[];e.block$data(u,c,(0,So._)`${s} === false`),e.ok(u);function c(){const p=t.let("i",(0,So._)`${n}.length`),m=t.let("j");e.setParams({i:p,j:m}),t.assign(u,!0),t.if((0,So._)`${p} > 1`,()=>(f()?d:h)(p,m))}function f(){return l.length>0&&!l.some(p=>p==="object"||p==="array")}function d(p,m){const g=t.name("item"),y=(0,C6.checkDataTypes)(l,g,a.opts.strictNumbers,C6.DataType.Wrong),v=t.const("indices",(0,So._)`{}`);t.for((0,So._)`;${p}--;`,()=>{t.let(g,(0,So._)`${n}[${p}]`),t.if(y,(0,So._)`continue`),l.length>1&&t.if((0,So._)`typeof ${g} == "string"`,(0,So._)`${g} += "_"`),t.if((0,So._)`typeof ${v}[${g}] == "number"`,()=>{t.assign(m,(0,So._)`${v}[${g}]`),e.error(),t.assign(u,!1).break()}).code((0,So._)`${v}[${g}] = ${p}`)})}function h(p,m){const g=(0,Tct.useFunc)(t,Sct.default),y=t.name("outer");t.label(y).for((0,So._)`;${p}--;`,()=>t.for((0,So._)`${m} = ${p}; ${m}--;`,()=>t.if((0,So._)`${g}(${n}[${p}], ${n}[${m}])`,()=>{e.error(),t.assign(u,!1).break(y)})))}}};mH.default=Act;var gH={};Object.defineProperty(gH,"__esModule",{value:!0});const Jj=pn,kct=bt,Ict=wC,Rct={message:"must be equal to constant",params:({schemaCode:e})=>(0,Jj._)`{allowedValue: ${e}}`},Nct={keyword:"const",$data:!0,error:Rct,code(e){const{gen:t,data:n,$data:r,schemaCode:i,schema:o}=e;r||o&&typeof o=="object"?e.fail$data((0,Jj._)`!${(0,kct.useFunc)(t,Ict.default)}(${n}, ${i})`):e.fail((0,Jj._)`${o} !== ${n}`)}};gH.default=Nct;var yH={};Object.defineProperty(yH,"__esModule",{value:!0});const LE=pn,Pct=bt,Dct=wC,Oct={message:"must be equal to one of the allowed values",params:({schemaCode:e})=>(0,LE._)`{allowedValues: ${e}}`},$ct={keyword:"enum",schemaType:"array",$data:!0,error:Oct,code(e){const{gen:t,data:n,$data:r,schema:i,schemaCode:o,it:s}=e;if(!r&&i.length===0)throw new Error("enum must have non-empty array");const a=i.length>=s.opts.loopEnum;let u;const l=()=>u??(u=(0,Pct.useFunc)(t,Dct.default));let c;if(a||r)c=t.let("valid"),e.block$data(c,f);else{if(!Array.isArray(i))throw new Error("ajv implementation error");const h=t.const("vSchema",o);c=(0,LE.or)(...i.map((p,m)=>d(h,m)))}e.pass(c);function f(){t.assign(c,!1),t.forOf("v",o,h=>t.if((0,LE._)`${l()}(${n}, ${h})`,()=>t.assign(c,!0).break()))}function d(h,p){const m=i[p];return typeof m=="object"&&m!==null?(0,LE._)`${l()}(${n}, ${h}[${p}])`:(0,LE._)`${n} === ${m}`}}};yH.default=$ct;Object.defineProperty(sH,"__esModule",{value:!0});const Mct=aH,Lct=uH,Fct=lH,jct=fH,Bct=dH,Uct=hH,zct=pH,Vct=mH,Hct=gH,qct=yH,Wct=[Mct.default,Lct.default,Fct.default,jct.default,Bct.default,Uct.default,zct.default,Vct.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},Hct.default,qct.default];sH.default=Wct;var vH={},j_={};Object.defineProperty(j_,"__esModule",{value:!0});j_.validateAdditionalItems=void 0;const Hg=pn,Zj=bt,Gct={message:({params:{len:e}})=>(0,Hg.str)`must NOT have more than ${e} items`,params:({params:{len:e}})=>(0,Hg._)`{limit: ${e}}`},Yct={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:Gct,code(e){const{parentSchema:t,it:n}=e,{items:r}=t;if(!Array.isArray(r)){(0,Zj.checkStrictMode)(n,'"additionalItems" is ignored when "items" is not an array of schemas');return}tbe(e,r)}};function tbe(e,t){const{gen:n,schema:r,data:i,keyword:o,it:s}=e;s.items=!0;const a=n.const("len",(0,Hg._)`${i}.length`);if(r===!1)e.setParams({len:t.length}),e.pass((0,Hg._)`${a} <= ${t.length}`);else if(typeof r=="object"&&!(0,Zj.alwaysValidSchema)(s,r)){const l=n.var("valid",(0,Hg._)`${a} <= ${t.length}`);n.if((0,Hg.not)(l),()=>u(l)),e.ok(l)}function u(l){n.forRange("i",t.length,a,c=>{e.subschema({keyword:o,dataProp:c,dataPropType:Zj.Type.Num},l),s.allErrors||n.if((0,Hg.not)(l),()=>n.break())})}}j_.validateAdditionalItems=tbe;j_.default=Yct;var bH={},B_={};Object.defineProperty(B_,"__esModule",{value:!0});B_.validateTuple=void 0;const kre=pn,Xk=bt,Kct=dn,Xct={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(e){const{schema:t,it:n}=e;if(Array.isArray(t))return nbe(e,"additionalItems",t);n.items=!0,!(0,Xk.alwaysValidSchema)(n,t)&&e.ok((0,Kct.validateArray)(e))}};function nbe(e,t,n=e.schema){const{gen:r,parentSchema:i,data:o,keyword:s,it:a}=e;c(i),a.opts.unevaluated&&n.length&&a.items!==!0&&(a.items=Xk.mergeEvaluated.items(r,n.length,a.items));const u=r.name("valid"),l=r.const("len",(0,kre._)`${o}.length`);n.forEach((f,d)=>{(0,Xk.alwaysValidSchema)(a,f)||(r.if((0,kre._)`${l} > ${d}`,()=>e.subschema({keyword:s,schemaProp:d,dataProp:d},u)),e.ok(u))});function c(f){const{opts:d,errSchemaPath:h}=a,p=n.length,m=p===f.minItems&&(p===f.maxItems||f[t]===!1);if(d.strictTuples&&!m){const g=`"${s}" is ${p}-tuple, but minItems or maxItems/${t} are not specified or different at path "${h}"`;(0,Xk.checkStrictMode)(a,g,d.strictTuples)}}}B_.validateTuple=nbe;B_.default=Xct;Object.defineProperty(bH,"__esModule",{value:!0});const Qct=B_,Jct={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:e=>(0,Qct.validateTuple)(e,"items")};bH.default=Jct;var _H={};Object.defineProperty(_H,"__esModule",{value:!0});const Ire=pn,Zct=bt,eft=dn,tft=j_,nft={message:({params:{len:e}})=>(0,Ire.str)`must NOT have more than ${e} items`,params:({params:{len:e}})=>(0,Ire._)`{limit: ${e}}`},rft={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:nft,code(e){const{schema:t,parentSchema:n,it:r}=e,{prefixItems:i}=n;r.items=!0,!(0,Zct.alwaysValidSchema)(r,t)&&(i?(0,tft.validateAdditionalItems)(e,i):e.ok((0,eft.validateArray)(e)))}};_H.default=rft;var wH={};Object.defineProperty(wH,"__esModule",{value:!0});const ju=pn,R2=bt,ift={message:({params:{min:e,max:t}})=>t===void 0?(0,ju.str)`must contain at least ${e} valid item(s)`:(0,ju.str)`must contain at least ${e} and no more than ${t} valid item(s)`,params:({params:{min:e,max:t}})=>t===void 0?(0,ju._)`{minContains: ${e}}`:(0,ju._)`{minContains: ${e}, maxContains: ${t}}`},oft={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:ift,code(e){const{gen:t,schema:n,parentSchema:r,data:i,it:o}=e;let s,a;const{minContains:u,maxContains:l}=r;o.opts.next?(s=u===void 0?1:u,a=l):s=1;const c=t.const("len",(0,ju._)`${i}.length`);if(e.setParams({min:s,max:a}),a===void 0&&s===0){(0,R2.checkStrictMode)(o,'"minContains" == 0 without "maxContains": "contains" keyword ignored');return}if(a!==void 0&&s>a){(0,R2.checkStrictMode)(o,'"minContains" > "maxContains" is always invalid'),e.fail();return}if((0,R2.alwaysValidSchema)(o,n)){let m=(0,ju._)`${c} >= ${s}`;a!==void 0&&(m=(0,ju._)`${m} && ${c} <= ${a}`),e.pass(m);return}o.items=!0;const f=t.name("valid");a===void 0&&s===1?h(f,()=>t.if(f,()=>t.break())):s===0?(t.let(f,!0),a!==void 0&&t.if((0,ju._)`${i}.length > 0`,d)):(t.let(f,!1),d()),e.result(f,()=>e.reset());function d(){const m=t.name("_valid"),g=t.let("count",0);h(m,()=>t.if(m,()=>p(g)))}function h(m,g){t.forRange("i",0,c,y=>{e.subschema({keyword:"contains",dataProp:y,dataPropType:R2.Type.Num,compositeRule:!0},m),g()})}function p(m){t.code((0,ju._)`${m}++`),a===void 0?t.if((0,ju._)`${m} >= ${s}`,()=>t.assign(f,!0).break()):(t.if((0,ju._)`${m} > ${a}`,()=>t.assign(f,!1).break()),s===1?t.assign(f,!0):t.if((0,ju._)`${m} >= ${s}`,()=>t.assign(f,!0)))}}};wH.default=oft;var rbe={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.validateSchemaDeps=e.validatePropertyDeps=e.error=void 0;const t=pn,n=bt,r=dn;e.error={message:({params:{property:u,depsCount:l,deps:c}})=>{const f=l===1?"property":"properties";return(0,t.str)`must have ${f} ${c} when property ${u} is present`},params:({params:{property:u,depsCount:l,deps:c,missingProperty:f}})=>(0,t._)`{property: ${u},
    missingProperty: ${f},
    depsCount: ${l},
    deps: ${c}}`};const i={keyword:"dependencies",type:"object",schemaType:"object",error:e.error,code(u){const[l,c]=o(u);s(u,l),a(u,c)}};function o({schema:u}){const l={},c={};for(const f in u){if(f==="__proto__")continue;const d=Array.isArray(u[f])?l:c;d[f]=u[f]}return[l,c]}function s(u,l=u.schema){const{gen:c,data:f,it:d}=u;if(Object.keys(l).length===0)return;const h=c.let("missing");for(const p in l){const m=l[p];if(m.length===0)continue;const g=(0,r.propertyInData)(c,f,p,d.opts.ownProperties);u.setParams({property:p,depsCount:m.length,deps:m.join(", ")}),d.allErrors?c.if(g,()=>{for(const y of m)(0,r.checkReportMissingProp)(u,y)}):(c.if((0,t._)`${g} && (${(0,r.checkMissingProp)(u,m,h)})`),(0,r.reportMissingProp)(u,h),c.else())}}e.validatePropertyDeps=s;function a(u,l=u.schema){const{gen:c,data:f,keyword:d,it:h}=u,p=c.name("valid");for(const m in l)(0,n.alwaysValidSchema)(h,l[m])||(c.if((0,r.propertyInData)(c,f,m,h.opts.ownProperties),()=>{const g=u.subschema({keyword:d,schemaProp:m},p);u.mergeValidEvaluated(g,p)},()=>c.var(p,!0)),u.ok(p))}e.validateSchemaDeps=a,e.default=i})(rbe);var EH={};Object.defineProperty(EH,"__esModule",{value:!0});const ibe=pn,sft=bt,aft={message:"property name must be valid",params:({params:e})=>(0,ibe._)`{propertyName: ${e.propertyName}}`},uft={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:aft,code(e){const{gen:t,schema:n,data:r,it:i}=e;if((0,sft.alwaysValidSchema)(i,n))return;const o=t.name("valid");t.forIn("key",r,s=>{e.setParams({propertyName:s}),e.subschema({keyword:"propertyNames",data:s,dataTypes:["string"],propertyName:s,compositeRule:!0},o),t.if((0,ibe.not)(o),()=>{e.error(!0),i.allErrors||t.break()})}),e.ok(o)}};EH.default=uft;var zO={};Object.defineProperty(zO,"__esModule",{value:!0});const N2=dn,kl=pn,lft=zf,P2=bt,cft={message:"must NOT have additional properties",params:({params:e})=>(0,kl._)`{additionalProperty: ${e.additionalProperty}}`},fft={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:cft,code(e){const{gen:t,schema:n,parentSchema:r,data:i,errsCount:o,it:s}=e;if(!o)throw new Error("ajv implementation error");const{allErrors:a,opts:u}=s;if(s.props=!0,u.removeAdditional!=="all"&&(0,P2.alwaysValidSchema)(s,n))return;const l=(0,N2.allSchemaProperties)(r.properties),c=(0,N2.allSchemaProperties)(r.patternProperties);f(),e.ok((0,kl._)`${o} === ${lft.default.errors}`);function f(){t.forIn("key",i,g=>{!l.length&&!c.length?p(g):t.if(d(g),()=>p(g))})}function d(g){let y;if(l.length>8){const v=(0,P2.schemaRefOrVal)(s,r.properties,"properties");y=(0,N2.isOwnProperty)(t,v,g)}else l.length?y=(0,kl.or)(...l.map(v=>(0,kl._)`${g} === ${v}`)):y=kl.nil;return c.length&&(y=(0,kl.or)(y,...c.map(v=>(0,kl._)`${(0,N2.usePattern)(e,v)}.test(${g})`))),(0,kl.not)(y)}function h(g){t.code((0,kl._)`delete ${i}[${g}]`)}function p(g){if(u.removeAdditional==="all"||u.removeAdditional&&n===!1){h(g);return}if(n===!1){e.setParams({additionalProperty:g}),e.error(),a||t.break();return}if(typeof n=="object"&&!(0,P2.alwaysValidSchema)(s,n)){const y=t.name("valid");u.removeAdditional==="failing"?(m(g,y,!1),t.if((0,kl.not)(y),()=>{e.reset(),h(g)})):(m(g,y),a||t.if((0,kl.not)(y),()=>t.break()))}}function m(g,y,v){const _={keyword:"additionalProperties",dataProp:g,dataPropType:P2.Type.Str};v===!1&&Object.assign(_,{compositeRule:!0,createErrors:!1,allErrors:!1}),e.subschema(_,y)}}};zO.default=fft;var xH={};Object.defineProperty(xH,"__esModule",{value:!0});const dft=tc,Rre=dn,A6=bt,Nre=zO,hft={keyword:"properties",type:"object",schemaType:"object",code(e){const{gen:t,schema:n,parentSchema:r,data:i,it:o}=e;o.opts.removeAdditional==="all"&&r.additionalProperties===void 0&&Nre.default.code(new dft.KeywordCxt(o,Nre.default,"additionalProperties"));const s=(0,Rre.allSchemaProperties)(n);for(const f of s)o.definedProperties.add(f);o.opts.unevaluated&&s.length&&o.props!==!0&&(o.props=A6.mergeEvaluated.props(t,(0,A6.toHash)(s),o.props));const a=s.filter(f=>!(0,A6.alwaysValidSchema)(o,n[f]));if(a.length===0)return;const u=t.name("valid");for(const f of a)l(f)?c(f):(t.if((0,Rre.propertyInData)(t,i,f,o.opts.ownProperties)),c(f),o.allErrors||t.else().var(u,!0),t.endIf()),e.it.definedProperties.add(f),e.ok(u);function l(f){return o.opts.useDefaults&&!o.compositeRule&&n[f].default!==void 0}function c(f){e.subschema({keyword:"properties",schemaProp:f,dataProp:f},u)}}};xH.default=hft;var TH={};Object.defineProperty(TH,"__esModule",{value:!0});const Pre=dn,D2=pn,Dre=bt,Ore=bt,pft={keyword:"patternProperties",type:"object",schemaType:"object",code(e){const{gen:t,schema:n,data:r,parentSchema:i,it:o}=e,{opts:s}=o,a=(0,Pre.allSchemaProperties)(n),u=a.filter(m=>(0,Dre.alwaysValidSchema)(o,n[m]));if(a.length===0||u.length===a.length&&(!o.opts.unevaluated||o.props===!0))return;const l=s.strictSchema&&!s.allowMatchingProperties&&i.properties,c=t.name("valid");o.props!==!0&&!(o.props instanceof D2.Name)&&(o.props=(0,Ore.evaluatedPropsToName)(t,o.props));const{props:f}=o;d();function d(){for(const m of a)l&&h(m),o.allErrors?p(m):(t.var(c,!0),p(m),t.if(c))}function h(m){for(const g in l)new RegExp(m).test(g)&&(0,Dre.checkStrictMode)(o,`property ${g} matches pattern ${m} (use allowMatchingProperties)`)}function p(m){t.forIn("key",r,g=>{t.if((0,D2._)`${(0,Pre.usePattern)(e,m)}.test(${g})`,()=>{const y=u.includes(m);y||e.subschema({keyword:"patternProperties",schemaProp:m,dataProp:g,dataPropType:Ore.Type.Str},c),o.opts.unevaluated&&f!==!0?t.assign((0,D2._)`${f}[${g}]`,!0):!y&&!o.allErrors&&t.if((0,D2.not)(c),()=>t.break())})})}}};TH.default=pft;var SH={};Object.defineProperty(SH,"__esModule",{value:!0});const mft=bt,gft={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(e){const{gen:t,schema:n,it:r}=e;if((0,mft.alwaysValidSchema)(r,n)){e.fail();return}const i=t.name("valid");e.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},i),e.failResult(i,()=>e.reset(),()=>e.error())},error:{message:"must NOT be valid"}};SH.default=gft;var CH={};Object.defineProperty(CH,"__esModule",{value:!0});const yft=dn,vft={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:yft.validateUnion,error:{message:"must match a schema in anyOf"}};CH.default=vft;var AH={};Object.defineProperty(AH,"__esModule",{value:!0});const Qk=pn,bft=bt,_ft={message:"must match exactly one schema in oneOf",params:({params:e})=>(0,Qk._)`{passingSchemas: ${e.passing}}`},wft={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:_ft,code(e){const{gen:t,schema:n,parentSchema:r,it:i}=e;if(!Array.isArray(n))throw new Error("ajv implementation error");if(i.opts.discriminator&&r.discriminator)return;const o=n,s=t.let("valid",!1),a=t.let("passing",null),u=t.name("_valid");e.setParams({passing:a}),t.block(l),e.result(s,()=>e.reset(),()=>e.error(!0));function l(){o.forEach((c,f)=>{let d;(0,bft.alwaysValidSchema)(i,c)?t.var(u,!0):d=e.subschema({keyword:"oneOf",schemaProp:f,compositeRule:!0},u),f>0&&t.if((0,Qk._)`${u} && ${s}`).assign(s,!1).assign(a,(0,Qk._)`[${a}, ${f}]`).else(),t.if(u,()=>{t.assign(s,!0),t.assign(a,f),d&&e.mergeEvaluated(d,Qk.Name)})})}}};AH.default=wft;var kH={};Object.defineProperty(kH,"__esModule",{value:!0});const Eft=bt,xft={keyword:"allOf",schemaType:"array",code(e){const{gen:t,schema:n,it:r}=e;if(!Array.isArray(n))throw new Error("ajv implementation error");const i=t.name("valid");n.forEach((o,s)=>{if((0,Eft.alwaysValidSchema)(r,o))return;const a=e.subschema({keyword:"allOf",schemaProp:s},i);e.ok(i),e.mergeEvaluated(a)})}};kH.default=xft;var IH={};Object.defineProperty(IH,"__esModule",{value:!0});const RN=pn,obe=bt,Tft={message:({params:e})=>(0,RN.str)`must match "${e.ifClause}" schema`,params:({params:e})=>(0,RN._)`{failingKeyword: ${e.ifClause}}`},Sft={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:Tft,code(e){const{gen:t,parentSchema:n,it:r}=e;n.then===void 0&&n.else===void 0&&(0,obe.checkStrictMode)(r,'"if" without "then" and "else" is ignored');const i=$re(r,"then"),o=$re(r,"else");if(!i&&!o)return;const s=t.let("valid",!0),a=t.name("_valid");if(u(),e.reset(),i&&o){const c=t.let("ifClause");e.setParams({ifClause:c}),t.if(a,l("then",c),l("else",c))}else i?t.if(a,l("then")):t.if((0,RN.not)(a),l("else"));e.pass(s,()=>e.error(!0));function u(){const c=e.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},a);e.mergeEvaluated(c)}function l(c,f){return()=>{const d=e.subschema({keyword:c},a);t.assign(s,a),e.mergeValidEvaluated(d,s),f?t.assign(f,(0,RN._)`${c}`):e.setParams({ifClause:c})}}}};function $re(e,t){const n=e.schema[t];return n!==void 0&&!(0,obe.alwaysValidSchema)(e,n)}IH.default=Sft;var RH={};Object.defineProperty(RH,"__esModule",{value:!0});const Cft=bt,Aft={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:e,parentSchema:t,it:n}){t.if===void 0&&(0,Cft.checkStrictMode)(n,`"${e}" without "if" is ignored`)}};RH.default=Aft;Object.defineProperty(vH,"__esModule",{value:!0});const kft=j_,Ift=bH,Rft=B_,Nft=_H,Pft=wH,Dft=rbe,Oft=EH,$ft=zO,Mft=xH,Lft=TH,Fft=SH,jft=CH,Bft=AH,Uft=kH,zft=IH,Vft=RH;function Hft(e=!1){const t=[Fft.default,jft.default,Bft.default,Uft.default,zft.default,Vft.default,Oft.default,$ft.default,Dft.default,Mft.default,Lft.default];return e?t.push(Ift.default,Nft.default):t.push(kft.default,Rft.default),t.push(Pft.default),t}vH.default=Hft;var NH={},PH={};Object.defineProperty(PH,"__esModule",{value:!0});const mi=pn,qft={message:({schemaCode:e})=>(0,mi.str)`must match format "${e}"`,params:({schemaCode:e})=>(0,mi._)`{format: ${e}}`},Wft={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:qft,code(e,t){const{gen:n,data:r,$data:i,schema:o,schemaCode:s,it:a}=e,{opts:u,errSchemaPath:l,schemaEnv:c,self:f}=a;if(!u.validateFormats)return;i?d():h();function d(){const p=n.scopeValue("formats",{ref:f.formats,code:u.code.formats}),m=n.const("fDef",(0,mi._)`${p}[${s}]`),g=n.let("fType"),y=n.let("format");n.if((0,mi._)`typeof ${m} == "object" && !(${m} instanceof RegExp)`,()=>n.assign(g,(0,mi._)`${m}.type || "string"`).assign(y,(0,mi._)`${m}.validate`),()=>n.assign(g,(0,mi._)`"string"`).assign(y,m)),e.fail$data((0,mi.or)(v(),_()));function v(){return u.strictSchema===!1?mi.nil:(0,mi._)`${s} && !${y}`}function _(){const w=c.$async?(0,mi._)`(${m}.async ? await ${y}(${r}) : ${y}(${r}))`:(0,mi._)`${y}(${r})`,E=(0,mi._)`(typeof ${y} == "function" ? ${w} : ${y}.test(${r}))`;return(0,mi._)`${y} && ${y} !== true && ${g} === ${t} && !${E}`}}function h(){const p=f.formats[o];if(!p){v();return}if(p===!0)return;const[m,g,y]=_(p);m===t&&e.pass(w());function v(){if(u.strictSchema===!1){f.logger.warn(E());return}throw new Error(E());function E(){return`unknown format "${o}" ignored in schema at path "${l}"`}}function _(E){const S=E instanceof RegExp?(0,mi.regexpCode)(E):u.code.formats?(0,mi._)`${u.code.formats}${(0,mi.getProperty)(o)}`:void 0,T=n.scopeValue("formats",{key:o,ref:E,code:S});return typeof E=="object"&&!(E instanceof RegExp)?[E.type||"string",E.validate,(0,mi._)`${T}.validate`]:["string",E,T]}function w(){if(typeof p=="object"&&!(p instanceof RegExp)&&p.async){if(!c.$async)throw new Error("async format in sync schema");return(0,mi._)`await ${y}(${r})`}return typeof g=="function"?(0,mi._)`${y}(${r})`:(0,mi._)`${y}.test(${r})`}}}};PH.default=Wft;Object.defineProperty(NH,"__esModule",{value:!0});const Gft=PH,Yft=[Gft.default];NH.default=Yft;var Ab={};Object.defineProperty(Ab,"__esModule",{value:!0});Ab.contentVocabulary=Ab.metadataVocabulary=void 0;Ab.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"];Ab.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"];Object.defineProperty(rH,"__esModule",{value:!0});const Kft=iH,Xft=sH,Qft=vH,Jft=NH,Mre=Ab,Zft=[Kft.default,Xft.default,(0,Qft.default)(),Jft.default,Mre.metadataVocabulary,Mre.contentVocabulary];rH.default=Zft;var DH={},VO={};Object.defineProperty(VO,"__esModule",{value:!0});VO.DiscrError=void 0;var Lre;(function(e){e.Tag="tag",e.Mapping="mapping"})(Lre||(VO.DiscrError=Lre={}));Object.defineProperty(DH,"__esModule",{value:!0});const Bv=pn,e9=VO,Fre=ya,edt=F_,tdt=bt,ndt={message:({params:{discrError:e,tagName:t}})=>e===e9.DiscrError.Tag?`tag "${t}" must be string`:`value of tag "${t}" must be in oneOf`,params:({params:{discrError:e,tag:t,tagName:n}})=>(0,Bv._)`{error: ${e}, tag: ${n}, tagValue: ${t}}`},rdt={keyword:"discriminator",type:"object",schemaType:"object",error:ndt,code(e){const{gen:t,data:n,schema:r,parentSchema:i,it:o}=e,{oneOf:s}=i;if(!o.opts.discriminator)throw new Error("discriminator: requires discriminator option");const a=r.propertyName;if(typeof a!="string")throw new Error("discriminator: requires propertyName");if(r.mapping)throw new Error("discriminator: mapping is not supported");if(!s)throw new Error("discriminator: requires oneOf keyword");const u=t.let("valid",!1),l=t.const("tag",(0,Bv._)`${n}${(0,Bv.getProperty)(a)}`);t.if((0,Bv._)`typeof ${l} == "string"`,()=>c(),()=>e.error(!1,{discrError:e9.DiscrError.Tag,tag:l,tagName:a})),e.ok(u);function c(){const h=d();t.if(!1);for(const p in h)t.elseIf((0,Bv._)`${l} === ${p}`),t.assign(u,f(h[p]));t.else(),e.error(!1,{discrError:e9.DiscrError.Mapping,tag:l,tagName:a}),t.endIf()}function f(h){const p=t.name("valid"),m=e.subschema({keyword:"oneOf",schemaProp:h},p);return e.mergeEvaluated(m,Bv.Name),p}function d(){var h;const p={},m=y(i);let g=!0;for(let w=0;w<s.length;w++){let E=s[w];if(E!=null&&E.$ref&&!(0,tdt.schemaHasRulesButRef)(E,o.self.RULES)){const T=E.$ref;if(E=Fre.resolveRef.call(o.self,o.schemaEnv.root,o.baseId,T),E instanceof Fre.SchemaEnv&&(E=E.schema),E===void 0)throw new edt.default(o.opts.uriResolver,o.baseId,T)}const S=(h=E==null?void 0:E.properties)===null||h===void 0?void 0:h[a];if(typeof S!="object")throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${a}"`);g=g&&(m||y(E)),v(S,w)}if(!g)throw new Error(`discriminator: "${a}" must be required`);return p;function y({required:w}){return Array.isArray(w)&&w.includes(a)}function v(w,E){if(w.const)_(w.const,E);else if(w.enum)for(const S of w.enum)_(S,E);else throw new Error(`discriminator: "properties/${a}" must have "const" or "enum"`)}function _(w,E){if(typeof w!="string"||w in p)throw new Error(`discriminator: "${a}" values must be unique strings`);p[w]=E}}}};DH.default=rdt;const idt="http://json-schema.org/draft-07/schema#",odt="http://json-schema.org/draft-07/schema#",sdt="Core schema meta-schema",adt={schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},udt=["object","boolean"],ldt={$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},cdt={$schema:idt,$id:odt,title:sdt,definitions:adt,type:udt,properties:ldt,default:!0};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.MissingRefError=t.ValidationError=t.CodeGen=t.Name=t.nil=t.stringify=t.str=t._=t.KeywordCxt=t.Ajv=void 0;const n=b1e,r=rH,i=DH,o=cdt,s=["/properties"],a="http://json-schema.org/draft-07/schema";class u extends n.default{_addVocabularies(){super._addVocabularies(),r.default.forEach(p=>this.addVocabulary(p)),this.opts.discriminator&&this.addKeyword(i.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;const p=this.opts.$data?this.$dataMetaSchema(o,s):o;this.addMetaSchema(p,a,!1),this.refs["http://json-schema.org/schema"]=a}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(a)?a:void 0)}}t.Ajv=u,e.exports=t=u,e.exports.Ajv=u,Object.defineProperty(t,"__esModule",{value:!0}),t.default=u;var l=tc;Object.defineProperty(t,"KeywordCxt",{enumerable:!0,get:function(){return l.KeywordCxt}});var c=pn;Object.defineProperty(t,"_",{enumerable:!0,get:function(){return c._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return c.str}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return c.stringify}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return c.nil}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return c.Name}}),Object.defineProperty(t,"CodeGen",{enumerable:!0,get:function(){return c.CodeGen}});var f=_C;Object.defineProperty(t,"ValidationError",{enumerable:!0,get:function(){return f.default}});var d=F_;Object.defineProperty(t,"MissingRefError",{enumerable:!0,get:function(){return d.default}})})(Wj,Wj.exports);var fdt=Wj.exports;const sbe=ku(fdt),ddt="#/definitions/StudyConfig",hdt="http://json-schema.org/draft-07/schema#",pdt={Answer:{additionalProperties:!1,description:`The Answer interface is used to define the properties of an answer. Answers are used to define the correct answer for a task. These are generally used in training tasks or if skip logic is required based on the answer.

Answers are used to defined correct answers for a task. These are generally used in training tasks or if skip logic is required based on the answer. The answer field is used to define the correct answer to the question. The acceptableLow and acceptableHigh fields are used to define a range of acceptable answers (these are currently only used for training). For example, if the correct answer is 5, and the acceptableLow is 4 and the acceptableHigh is 6, then any answer between 4 and 6 will be considered correct.

Here's an example of how to use the Answer interface to define the correct answer to a question:

\`\`\`js { "type": "markdown", "path": "<study-name>/assets/question.md", "response": [  {    "id": "response1",    "prompt": "What is 2 + 2?",    "required": true,    "location": "belowStimulus",    "type": "numerical"  } ] "correctAnswer": [{  "id": "response1",  "answer": 4 }] } \`\`\`

In this example, the correct answer to the question "What is 2 + 2?" is 4. If the participant answers 4, they will be considered correct. If they answer anything other than 4, they will be considered incorrect.`,properties:{acceptableHigh:{description:"The acceptable high value for the answer. This is used to define a range of acceptable answers.",type:"number"},acceptableLow:{description:"The acceptable low value for the answer. This is used to define a range of acceptable answers.",type:"number"},answer:{description:"The correct answer to the question."},id:{description:"The id of the answer. This is used to identify the answer in the data file.",type:"string"}},required:["id","answer"],type:"object"},BaseComponents:{additionalProperties:{additionalProperties:!1,properties:{allowFailedTraining:{description:"Controls whether the component should allow failed training. If not provided, the default is true.",type:"boolean"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},parameters:{anyOf:[{additionalProperties:{},description:"The parameters that are passed to the react component. These can be used within your react component to render different things.",type:"object"},{additionalProperties:{},description:"The parameters that are passed to the website (iframe). These can be used within your website to render different things.",type:"object"}],description:"The parameters that are passed to the react component. These can be used within your react component to render different things."},path:{anyOf:[{description:"The path to the markdown file. This should be a relative path from the public folder.",type:"string"},{description:"The path to the react component. This should be a relative path from the src/public folder.",type:"string"},{description:"The path to the image. This should be a relative path from the public folder.",type:"string"},{description:"The path to the website. This should be a relative path from the public folder or could be an external website.",type:"string"}],description:"The path to the markdown file. This should be a relative path from the public folder."},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},style:{additionalProperties:{type:"string"},description:"The style of the image. This is an object with css properties as keys and css values as values.",type:"object"},trainingAttempts:{description:"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.",type:"number"},type:{enum:["markdown","react-component","image","website","questionnaire"],type:"string"}},type:"object"},description:'The baseComponents is an optional set of components which can help template other components. For example, suppose you have a single HTML file that you want to display to the user several times. Instead of having the same component twice in the `components` list, you can have a single baseComponent with all the information that the two HTML components will share. A great example is showing the same HTML component but with two different questions;\n\n Using baseComponents:\n\n```js "baseComponents": { "my-image-component": { "instructionLocation": "sidebar", "nextButtonLocation": "sidebar", "path": "<study-name>/assets/my-image.jpg", "response": [   {     "id": "my-image-id",     "options": ["Europe", "Japan", "USA"],     "prompt": "Your Selected Answer:",     "type": "dropdown"   } ], "type": "image" } } ``` In the above code snippet, we have a single base component which holds the information about the type of component, the path to the image, and the response (which is a dropdown containing three choices). Any component which contains the `"baseComponent":"my-image-component"` key-value pair will inherit each of these properties. Thus, if we have three different questions which have the same choices and are concerning the same image, we can define our components like below: ```js "components": { "q1": { "baseComponent": "my-image-component", "description": "Choosing section with largest GDP", "instruction": "Which region has the largest GDP?" }, "q2": { "baseComponent": "my-image-component", "description": "Choosing section with lowest GDP", "instruction": "Which region has the lowest GDP?" }, "q3": { "baseComponent": "my-image-component", "description": "Choosing section with highest exports of Wheat", "instruction": "Which region had the most Wheat exported in 2022?" } } ```',type:"object"},CheckboxResponse:{additionalProperties:!1,description:'The CheckboxResponse interface is used to define the properties of a checkbox response. CheckboxResponses render as a checkbox input with user specified options.\n\n```js { "id": "q7", "prompt": "Checkbox example (not required)", "required": false, "location": "aboveStimulus", "type": "checkbox", "options": ["Option 1", "Option 2", "Option 3"] } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},maxSelections:{description:"The maximum number of selections that are required.",type:"number"},minSelections:{description:"The minimum number of selections that are required.",type:"number"},options:{description:"The options that are displayed as checkboxes, provided as an array of objects, with label and value fields.",items:{anyOf:[{$ref:"#/definitions/StringOption"},{type:"string"}]},type:"array"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"checkbox",type:"string"}},required:["id","options","prompt","required","type"],type:"object"},ComponentBlock:{additionalProperties:!1,description:'The ComponentBlock interface is used to define order properties within the sequence. This is used to define the order of components in a study and the skip logic. It supports random assignment of trials using a pure random assignment and a [latin square](https://en.wikipedia.org/wiki/Latin_square).\n\nThe pure random assignment is a random assignment with no guarantees. For example, one component _could_ show up in the first position 10 times in a row. However, this situation is unlikely.\n\nHere\'s a snippet that shows how to use the random order:\n\n```js { "order": "random", "components": [ "component1", "component2", "component3" ] } ``` This snippet would produce a random order of the components in the sequence array. For example, the resulting sequence array could be :\n\n```js [ ["component2", "component3", "component1"], ["component1", "component3", "component2"], ["component3", "component1", "component2"], ... ] ```\n\nThe latin square assignment is a random assignment with some guarantees. It ensures that each component is shown an equal number of times in each position. Here\'s a snippet that shows how to use the latin square order:\n\n```js { "order": "latinSquare", "components": [ "component1", "component2", "component3" ] } ```\n\nThis snippet would produce a latin square order of the components in the sequence array. Since the latin square guarantees that each component is shown an equal number of times in each position, the resulting sequence array could be:\n\n```js [ ["component1", "component2", "component3"], ["component2", "component3", "component1"], ["component3", "component1", "component2"], ... ] ```\n\nThe fixed assignment is a fixed assignment of components. This is used when you want to show the components in a specific order. Here\'s a snippet that shows how to use the fixed order:\n\n```js { "order": "fixed", "components": [ "component1", "component2", "component3" ] } ```\n\nThis snippet would produce a fixed order of the components in the sequence array. The resulting sequence array would be:\n\n```js [ ["component1", "component2", "component3"], ["component1", "component2", "component3"], ["component1", "component2", "component3"], ... ] ```\n\nIn addition to the order property, the ComponentBlock interface also includes the `"numSamples"` property. This is used to reduce the number of components shown to a participant. This property respects the order property and the guarantees provided by the order property. For example, if you have three components in the components array and you set `"numSamples"` to 2, you would randomize across the three components while only showing a participant two of them. Here\'s a snippet that shows how to use the numSamples property:\n\n```js { "order": "latinSquare", "components": [ "component1", "component2", "component3" ], "numSamples": 2 } ```\n\nThis snippet would produce a latin square order of the components in the sequence array. Since the latin square guarantees that each component is shown an equal number of times in each position, the resulting sequence array could be:\n\n```js [ ["component1", "component2"], ["component2", "component3"], ["component3", "component1"], ... ] ```\n\nThe interruptions property specifies an array of interruptions. These can be used for breaks or attention checks. Interruptions can be deterministic or random. Please see [InterruptionBlock](../../type-aliases/InterruptionBlock) for more specific information.\n\nThe skip property is used to define skip conditions. This is used to skip to a different component or block based on the response to a component or the number of correct or incorrect responses in a block. Please see [SkipConditions](../../type-aliases/SkipConditions) for more specific information.',properties:{components:{description:"The components that are included in the order.",items:{anyOf:[{type:"string"},{$ref:"#/definitions/ComponentBlock"}]},type:"array"},id:{description:"The id of the block. This is used to identify the block in the SkipConditions and is only required if you want to refer to the whole block in the condition.to property.",type:"string"},interruptions:{description:"The interruptions property specifies an array of interruptions. These can be used for breaks or attention checks.",items:{$ref:"#/definitions/InterruptionBlock"},type:"array"},numSamples:{description:"The number of samples to use for the random assignments. This means you can randomize across 3 components while only showing a participant 2 at a time.",type:"number"},order:{description:"The type of order. This can be random (pure random), latinSquare (random with some guarantees), or fixed.",enum:["random","latinSquare","fixed"],type:"string"},skip:{$ref:"#/definitions/SkipConditions",description:"The skip conditions for the block."}},required:["order","components"],type:"object"},ComponentBlockCondition:{additionalProperties:!1,description:`The ComponentBlockCondition interface is used to define a SkipCondition based on the number of correct or incorrect components in a block. All answers on all components in the block are checked.

Answers are checked against the correct answers defined in the IndividualComponent's [CorrectAnswer](../Answer). If no correct answers are defined, the component is considered correct by default.

You might use this if a participant answers two questions in a block incorrectly. Here's an example of how to use the ComponentBlockCondition:

\`\`\`js { ... "skip": [ {   "check": "block",   "condition": "numIncorrect",   "value": 2,   "to": "end" } ] ... } \`\`\`

In this example, when the number of components with incorrect responses in the block is two, the participant will be redirected to the end of the study. If the number of incorrect responses is less than two, the participant will continue to the next component in the sequence.

When the condition is met, the participant will immediately be redirected to the component or block specified in the \`"to"\` property. If no conditions are met, the participant will continue to the next component in the sequence.`,properties:{check:{const:"block",description:"The check we'll perform.",type:"string"},condition:{description:"The condition to check.",enum:["numCorrect","numIncorrect"],type:"string"},to:{description:"The id of the component or block to skip to",type:"string"},value:{description:"The number of correct or incorrect responses to check for.",type:"number"}},required:["check","condition","value","to"],type:"object"},DeterministicInterruption:{additionalProperties:!1,description:`The DeterministicInterruption interface is used to define an interruption that will be shown at a specific location in the block.

For example, if you want to show an interruption after the second component in the block, you would set firstLocation to 2. If you want to show an interruption after every 3 components, you would set spacing to 3. If you want to show an interruption after the second component and then every 3 components, you would set firstLocation to 2 and spacing to 3.

The components property is an array of the components that will be inserted at the location specified by firstLocation and spacing. These components should reference components in the StudyConfig.components section of the config.

Here's an example of how to use the DeterministicInterruption:

\`\`\`js { "order": "fixed", "components": [ "component1", "component2", "component3", "component4", "component5", "component6" ], "interruptions": [ {   "firstLocation": 2,   "spacing": 3,   "components": [     "interruption1",     "interruption2"   ] } ] } \`\`\`

The resulting sequence array could be:

\`\`\`js [ ["component1", "component2", "interruption1", "component3", "component4", "component5", "interruption2", "component6"], ["component1", "component2", "interruption1", "component3", "component4", "component5", "interruption2", "component6"], ["component1", "component2", "interruption1", "component3", "component4", "component5", "interruption2", "component6"], ... ] \`\`\``,properties:{components:{description:"The components that are included in the interruption. These reference components in the StudyConfig.components section of the config.",items:{type:"string"},type:"array"},firstLocation:{description:"The Location of the first instance of the interruption. If this is set to 2, the interruption will be shown after the second component (inserted at index 2).",type:"number"},spacing:{description:"The number of components between breaks.",type:"number"}},required:["firstLocation","spacing","components"],type:"object"},DropdownResponse:{additionalProperties:!1,description:'The DropdownResponse interface is used to define the properties of a dropdown response. DropdownResponses render as a select input with user specified options.\n\nExample: ```js { "id": "q-color", "prompt": "What is your favorite color?", "required": true, "location": "aboveStimulus", "type": "dropdown", "placeholder": "Please choose your favorite color", "options": ["Red", "Blue"] } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},options:{description:"The options that are displayed in the dropdown.",items:{anyOf:[{$ref:"#/definitions/StringOption"},{type:"string"}]},type:"array"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},placeholder:{description:"The placeholder text that is displayed in the input.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"dropdown",type:"string"}},required:["id","options","prompt","required","type"],type:"object"},IFrameResponse:{additionalProperties:!1,description:"The IFrameResponse interface is used to define the properties of an iframe response. IFrameResponses render as a list, that is connected to a WebsiteComponent. When data is sent from the WebsiteComponent, it is displayed in the list.",properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"iframe",type:"string"}},required:["id","prompt","required","type"],type:"object"},ImageComponent:{additionalProperties:!1,description:'The ImageComponent interface is used to define the properties of an image component. This component is used to render an image with optional styling.\n\nFor example, to render an image with a path of `path/to/study/assets/image.jpg` and a max width of 50%, you would use the following snippet: ```js { "type": "image", "path": "<study-name>/assets/image.jpg", "style": { "maxWidth": "50%" } } ```',properties:{allowFailedTraining:{description:"Controls whether the component should allow failed training. If not provided, the default is true.",type:"boolean"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},path:{description:"The path to the image. This should be a relative path from the public folder.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},style:{additionalProperties:{type:"string"},description:"The style of the image. This is an object with css properties as keys and css values as values.",type:"object"},trainingAttempts:{description:"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.",type:"number"},type:{const:"image",type:"string"}},required:["path","response","type"],type:"object"},IndividualComponent:{anyOf:[{$ref:"#/definitions/MarkdownComponent"},{$ref:"#/definitions/ReactComponent"},{$ref:"#/definitions/ImageComponent"},{$ref:"#/definitions/WebsiteComponent"},{$ref:"#/definitions/QuestionnaireComponent"}]},IndividualComponentAllResponsesCondition:{additionalProperties:!1,description:`The IndividualComponentAllResponsesCondition interface is used to define a SkipCondition based on all answers to a specific component. The skip logic will be checked for every component in the block that has the specified name.

:::info

If you need to check all instances of a repeated component, you should use the RepeatedComponentBlockCondition.

:::


Here's an example of how to use the IndividualComponentAllResponsesCondition:

\`\`\`js { ... "skip": [ {   "name": "attentionCheck",   "check": "responses",   "to": "end" } ] ... } \`\`\`

In this example, if all responses to the component with the ID "attentionCheck" are correct, the participant will be redirected to the end of the study. If any response is incorrect, the participant will continue to the next component in the sequence.`,properties:{check:{const:"responses",description:"The check we'll perform.",type:"string"},name:{description:"The name of the component to check.",type:"string"},to:{description:"The id of the component or block to skip to",type:"string"}},required:["name","check","to"],type:"object"},IndividualComponentSingleResponseCondition:{additionalProperties:!1,description:`The IndividualComponentSingleResponseCondition interface is used to define a SkipCondition based on a single answer to a specific component. The skip logic will be checked for every component in the block that has the specified name.

:::info

If you need to check all instances of a repeated component, you should use the RepeatedComponentBlockCondition.

:::

For example, if you want to skip to a different component based on a response to a specific component, you would use the IndividualComponentSingleResponseCondition. Here's an example of how to use the IndividualComponentSingleResponseCondition:

\`\`\`js { ... "skip": [ {   "name": "attentionCheck",   "check": "response",   "responseId": "attentionCheckResponse",   "value": "the right answer",   "comparison": "equal",   "to": "end" } ] ... } \`\`\`

In this example, we assign our skip logic to the component whose ID is "attentionCheck". If the answer given to the response "attentionCheckResponse" is equal to "the right answer", then the user will be redirected to the end of the study. If the response is _not_ equal to "the right answer", then the participant will continue to the next component in the sequence.`,properties:{check:{const:"response",description:"The check we'll perform.",type:"string"},comparison:{description:"The comparison to use.",enum:["equal","notEqual"],type:"string"},name:{description:"The name of the component to check.",type:"string"},responseId:{description:"The response id to check.",type:"string"},to:{description:"The id of the component or block to skip to",type:"string"},value:{description:"The value to check.",type:["string","number"]}},required:["name","check","responseId","value","comparison","to"],type:"object"},InheritedComponent:{additionalProperties:!1,description:"An InheritedComponent is a component that inherits properties from a baseComponent. This is used to avoid repeating properties in components. This also means that components in the baseComponents object can be partially defined, while components in the components object can inherit from them and must be fully defined and include all properties (after potentially merging with a base component).",properties:{allowFailedTraining:{description:"Controls whether the component should allow failed training. If not provided, the default is true.",type:"boolean"},baseComponent:{type:"string"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},parameters:{anyOf:[{additionalProperties:{},description:"The parameters that are passed to the react component. These can be used within your react component to render different things.",type:"object"},{additionalProperties:{},description:"The parameters that are passed to the website (iframe). These can be used within your website to render different things.",type:"object"}],description:"The parameters that are passed to the react component. These can be used within your react component to render different things."},path:{anyOf:[{description:"The path to the markdown file. This should be a relative path from the public folder.",type:"string"},{description:"The path to the react component. This should be a relative path from the src/public folder.",type:"string"},{description:"The path to the image. This should be a relative path from the public folder.",type:"string"},{description:"The path to the website. This should be a relative path from the public folder or could be an external website.",type:"string"}],description:"The path to the markdown file. This should be a relative path from the public folder."},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},style:{additionalProperties:{type:"string"},description:"The style of the image. This is an object with css properties as keys and css values as values.",type:"object"},trainingAttempts:{description:"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.",type:"number"},type:{enum:["markdown","react-component","image","website","questionnaire"],type:"string"}},required:["baseComponent"],type:"object"},InterruptionBlock:{anyOf:[{$ref:"#/definitions/DeterministicInterruption"},{$ref:"#/definitions/RandomInterruption"}],description:"The InterruptionBlock interface is used to define interruptions in a block. These can be used for breaks or attention checks. Interruptions can be deterministic or random."},LikertResponse:{additionalProperties:!1,description:`The LikertResponse interface is used to define the properties of a likert response. LikertResponses render as radio buttons with a user specified number of options, which can be controlled through the numItems. For example, numItems: 5 will render 5 radio buttons, and numItems: 7 will render 7 radio buttons. LikertResponses can also have a description, and left and right labels. The left and right labels are used to label the left and right ends of the likert scale with values such as 'Strongly Disagree' and 'Strongly Agree'.

Example for a five-point Likert Scale:

\`\`\`js { "id": "q-satisfaction", "prompt": "Rate your satisfaction from 1 (not enjoyable) to 5 (very enjoyable).", "required": true, "location": "aboveStimulus", "type": "likert", "leftLabel": "Not Enjoyable", "rightLabel": "Very Enjoyable", "numItems": 5 } \`\`\``,properties:{desc:{description:"The description of the likert scale.",type:"string"},hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},leftLabel:{description:"The left label of the likert scale. E.g Strongly Disagree",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},numItems:{description:"The number of options to render.",type:"number"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},rightLabel:{description:"The right label of the likert scale. E.g Strongly Agree",type:"string"},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"likert",type:"string"}},required:["id","numItems","prompt","required","type"],type:"object"},LongTextResponse:{additionalProperties:!1,description:'The LongTextResponse interface is used to define the properties of a long text response. LongTextResponses render as a text area that accepts any text and can optionally have a placeholder. ```js { "id": "q-name", "prompt": "What is your first name?", "required": true, "location": "aboveStimulus", "type": "longText", "placeholder": "Please enter your first name" } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},placeholder:{description:"The placeholder text that is displayed in the input.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"longText",type:"string"}},required:["id","prompt","required","type"],type:"object"},MarkdownComponent:{additionalProperties:!1,description:'The MarkdownComponent interface is used to define the properties of a markdown component. The components can be used to render many different things, such as consent forms, instructions, and debriefs. Additionally, you can use the markdown component to render images, videos, and other media, with supporting text. Markdown components can have responses (e.g. in a consent form), or no responses (e.g. in a help text file). Here\'s an example with no responses for a simple help text file:\n\n```js { "type": "markdown", "path": "<study-name>/assets/help.md", "response": [] } ```',properties:{allowFailedTraining:{description:"Controls whether the component should allow failed training. If not provided, the default is true.",type:"boolean"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},path:{description:"The path to the markdown file. This should be a relative path from the public folder.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},trainingAttempts:{description:"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.",type:"number"},type:{const:"markdown",type:"string"}},required:["path","response","type"],type:"object"},NumberOption:{additionalProperties:!1,description:"The NumberOption interface is used to define the options for a slider response. The label is the text that is displayed to the user, and the value is the value that is stored in the data file.",properties:{label:{description:"The label displayed to participants.",type:"string"},value:{description:"The value stored in the participant's data.",type:"number"}},required:["label","value"],type:"object"},NumericalResponse:{additionalProperties:!1,description:'The NumericalResponse interface is used to define the properties of a numerical response. NumericalResponses render as a text input that only accepts numbers, and can optionally have a min and max value, or a placeholder.\n\nExample: ```js { "id": "q-numerical", "prompt": "Numerical example", "required": true, "location": "aboveStimulus", "type": "numerical", "placeholder": "Enter your age, range from 0 - 120", "max": 120, "min": 0 } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},max:{description:"The maximum value that is accepted in the input.",type:"number"},min:{description:"The minimum value that is accepted in the input.",type:"number"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},placeholder:{description:"The placeholder text that is displayed in the input.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"numerical",type:"string"}},required:["id","prompt","required","type"],type:"object"},QuestionnaireComponent:{additionalProperties:!1,description:'A QuestionnaireComponent is used to render simple questions that require a response. The main use case of this component type is to ask participants questions when you don\'t need to render a stimulus. Please note, that even though we\'re not using a stimulus, the responses still require a `location`. For example this could be used to collect demographic information from a participant using the following snippet:\n\n```js { "type": "questionnaire", "response": [  {    "id": "gender",    "prompt": "Gender:",    "required": true,    "location": "belowStimulus",    "type": "checkbox",    "options": ["Man", "Woman", "Genderqueer", "Third-gender", ...]  } ] } ```',properties:{allowFailedTraining:{description:"Controls whether the component should allow failed training. If not provided, the default is true.",type:"boolean"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},trainingAttempts:{description:"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.",type:"number"},type:{const:"questionnaire",type:"string"}},required:["response","type"],type:"object"},RadioResponse:{additionalProperties:!1,description:'The RadioResponse interface is used to define the properties of a radio response. Radios have only one allowable selection. RadioResponses render as a radio input with user specified options, and optionally left and right labels.\n\nExample: ```js { "id": "q-radio", "prompt": "Radio button example", "required": true, "location": "aboveStimulus", "type": "radio", "options": ["Option 1", "Option 2"] } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},leftLabel:{description:"The left label of the radio group. Used in Likert scales for example",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},options:{description:"The options that are displayed as checkboxes, provided as an array of objects, with label and value fields.",items:{anyOf:[{$ref:"#/definitions/StringOption"},{type:"string"}]},type:"array"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},rightLabel:{description:"The right label of the radio group. Used in Likert scales for example",type:"string"},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"radio",type:"string"}},required:["id","options","prompt","required","type"],type:"object"},RandomInterruption:{additionalProperties:!1,description:'The RandomInterruption interface is used to define an interruption that will be shown randomly in the block.\n\nFor example, if you want to show a single interruption randomly in the block, you would set `"spacing"` to "random" and `"numInterruptions"` to 1. If you want to show 3 interruptions randomly in the block, you would set `"spacing"` to "random" and `"numInterruptions"` to 3.\n\nThe components property is an array of the components that will be inserted randomly in the block. These components should reference components in the StudyConfig.components section of the config.\n\nHere\'s an example of how to use the RandomInterruption:\n\n```js { "order": "fixed", "components": [ "component1", "component2", "component3", "component4", "component5", "component6" ], "interruptions": [ {   "spacing": "random",   "numInterruptions": 3,   "components": [     "interruption1",     "interruption2"   ] } ] } ```\n\nThe resulting sequence array could be:\n\n```js [ ["component1", "interruption1", "interruption2", "component2", "interruption1", "interruption2", "component3", "component4", "component5", "interruption1", "interruption2", "component6], ["component1", "interruption1", "interruption2", "component2", "interruption1", "interruption2", "component3", "component4", "interruption1", "interruption2", "component5", "component6], ["component1", "component2" "interruption1", "interruption2", "component3", "interruption1", "interruption2", "component4", "component5", "interruption1", "interruption2", "component6], ... ] ```',properties:{components:{description:"The components that are included in the interruption. These reference components in the StudyConfig.components section of the config.",items:{type:"string"},type:"array"},numInterruptions:{description:"The number of times the interruption will be randomly added",type:"number"},spacing:{const:"random",description:"If spacing is set to random, reVISit will add interruptions randomly. These interruptions will not ever be displayed as the first component in the block.",type:"string"}},required:["spacing","numInterruptions","components"],type:"object"},ReactComponent:{additionalProperties:!1,description:"The ReactComponent interface is used to define the properties of a react component. This component is used to render react code with certain parameters. These parameters can be used within your react code to render different things.\n\nUnlike other types of components, the path for a React component is relative to the `src/public/` folder. Similar to our standard assets, we suggest creating a folder named `src/public/{studyName}/assets` to house all of the React component assets for a particular study. Your React component which you link to in the path must be default exported from its file.\n\nReact components created this way have a generic prop type passed to the component on render, `<StimulusParams<T>>`, which has the following types.\n\n```ts { parameters: T; setAnswer: ({ status, provenanceGraph, answers }: { status: boolean, provenanceGraph?: TrrackedProvenance, answers: Record<string, any> }) => void } ```\n\nparameters is the same object passed in from the ReactComponent type below, allowing you to pass options in from the config to your component. setAnswer is a callback function allowing the creator of the ReactComponent to programmatically set the answer, as well as the provenance graph. This can be useful if you don't use the default answer interface, and instead have something more unique.\n\nSo, for example, if I had the following ReactComponent in my config ```js { type: 'react-component'; path: 'my_study/CoolComponent.tsx'; parameters: {  name: 'Zach';  age: 26; } } ```\n\nMy react component, CoolComponent.tsx, would exist in src/public/my_study/assets, and look something like this\n\n```ts export default function CoolComponent({ parameters, setAnswer }: StimulusParams<{name: string, age: number}>) { // render something } ```\n\nFor in depth examples, see the following studies, and their associated codebases. https://revisit.dev/study/demo-click-accuracy-test (https://github.com/revisit-studies/study/tree/v1.0.3/src/public/demo-click-accuracy-test/assets) https://revisit.dev/study/demo-brush-interactions (https://github.com/revisit-studies/study/tree/v1.0.3/src/public/demo-brush-interactions/assets)",properties:{allowFailedTraining:{description:"Controls whether the component should allow failed training. If not provided, the default is true.",type:"boolean"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},parameters:{additionalProperties:{},description:"The parameters that are passed to the react component. These can be used within your react component to render different things.",type:"object"},path:{description:"The path to the react component. This should be a relative path from the src/public folder.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},trainingAttempts:{description:"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.",type:"number"},type:{const:"react-component",type:"string"}},required:["path","response","type"],type:"object"},RepeatedComponentBlockCondition:{additionalProperties:!1,description:`The RepeatedComponentBlockCondition interface is used to define a SkipCondition based on the number of correct or incorrect repeated components. You might use this if you need to check if an attention check was failed multiple times. This is similar to the [ComponentBlockCondition](../ComponentBlockCondition), but it only checks a specific repeated component.

Here's an example of how to use the RepeatedComponentBlockCondition:

\`\`\`js { ... "skip": [ {   "name": "attentionCheck",   "check": "repeatedComponent",   "condition": "numIncorrect",   "value": 2,   "to": "end" } ] ... } \`\`\`

In this example, when the number of incorrect responses to the repeated component with the name "attentionCheck" is two, the participant will be redirected to the end of the study. If the number of incorrect responses is less than two, the participant will continue to the next component in the sequence.`,properties:{check:{const:"repeatedComponent",description:"The check we'll perform.",type:"string"},condition:{description:"The condition to check.",enum:["numCorrect","numIncorrect"],type:"string"},name:{description:"The name of the repeated component to check (e.g. attentionCheck).",type:"string"},to:{description:"The id of the component or block to skip to",type:"string"},value:{description:"The number of correct or incorrect responses to check for.",type:"number"}},required:["name","check","condition","value","to"],type:"object"},Response:{anyOf:[{$ref:"#/definitions/NumericalResponse"},{$ref:"#/definitions/ShortTextResponse"},{$ref:"#/definitions/LongTextResponse"},{$ref:"#/definitions/LikertResponse"},{$ref:"#/definitions/DropdownResponse"},{$ref:"#/definitions/SliderResponse"},{$ref:"#/definitions/RadioResponse"},{$ref:"#/definitions/CheckboxResponse"},{$ref:"#/definitions/IFrameResponse"}]},ResponseBlockLocation:{enum:["sidebar","aboveStimulus","belowStimulus"],type:"string"},ShortTextResponse:{additionalProperties:!1,description:'The ShortTextResponse interface is used to define the properties of a short text response. ShortTextResponses render as a text input that accepts any text and can optionally have a placeholder.\n\n```js { "id": "q-short-text", "prompt": "Short text example", "required": true, "location": "aboveStimulus", "type": "shortText", "placeholder": "Enter your answer here" } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},placeholder:{description:"The placeholder text that is displayed in the input.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"shortText",type:"string"}},required:["id","prompt","required","type"],type:"object"},SkipConditions:{description:`The SkipConditions interface is used to define skip conditions. This is used to skip to a different component/block based on the response to a component or based on the number of correct/incorrect responses in a block. Skip conditions work recursively: if you have a nested block, the parent blocks' skip conditions will be considered when computing the skip logic.

Skip conditions are evaluated in the order they are defined in the array. If a condition is met, the participant will be redirected to the component or block specified in the \`"to"\` property. If no conditions are met, the participant will continue to the next component in the sequence.

Skip conditions allow you to jump to a different component or block. If you intend to skip to a block, you should specify a block id in the sequence. If you intend to skip to a component, you should specify a component id. Skipping backwards is not supported. Skipping to a repeated component will skip to the first instance of the component after the component that triggered the skip.

Please see the interface definitions for more specific information on the different types of skip conditions.`,items:{anyOf:[{$ref:"#/definitions/IndividualComponentSingleResponseCondition"},{$ref:"#/definitions/IndividualComponentAllResponsesCondition"},{$ref:"#/definitions/ComponentBlockCondition"},{$ref:"#/definitions/RepeatedComponentBlockCondition"}]},type:"array"},SliderResponse:{additionalProperties:!1,description:'The SliderResponse interface is used to define the properties of a slider response. SliderResponses render as a slider input with user specified steps. For example, you could have steps of 0, 50, and 100.\n\nExample: ```js { "id": "q-slider", "prompt": "How are you feeling?", "location": "aboveStimulus", "required": true, "type": "slider", "options": [  {    "label": "Bad",    "value": 0  },  {    "label": "OK",    "value": 50  },  {    "label": "Good",    "value": 100  } ] } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},options:{description:"This defines the steps in the slider and the extent of the slider as an array of objects that have a label and a value.",items:{$ref:"#/definitions/NumberOption"},type:"array"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"slider",type:"string"}},required:["id","options","prompt","required","type"],type:"object"},StringOption:{additionalProperties:!1,description:"The StringOption interface is used to define the options for a dropdown, radio, or checkbox response. The label is the text that is displayed to the user, and the value is the value that is stored in the data file.",properties:{label:{description:"The label displayed to participants.",type:"string"},value:{description:"The value stored in the participant's data.",type:"string"}},required:["label","value"],type:"object"},StudyConfig:{additionalProperties:!1,description:'The StudyConfig interface is used to define the properties of a study configuration. This is a JSON object with four main components: the StudyMetadata, the UIConfig, the Components, and the Sequence. Below is the general template that should be followed when constructing a Study configuration file.\n\n```js { "$schema": "https://raw.githubusercontent.com/revisit-studies/study/v1.0.3/src/parser/StudyConfigSchema.json", "studyMetadata": {  ... }, "uiConfig": {  ... }, "components": {  ... }, "sequence": {  ... } } ```\n\n:::info For information about each of the individual pieces of the study configuration file, you can visit the documentation for each one individually. ::: <br/>\n\nThe `$schema` line is used to verify the schema. If you\'re using VSCode (or other similar IDEs), including this line will allow for autocomplete and helpful suggestions when writing the study configuration.',properties:{$schema:{description:"A required json schema property. This should point to the github link for the version of the schema you would like. The `$schema` line is used to verify the schema. If you're using VSCode (or other similar IDEs), including this line will allow for autocomplete and helpful suggestions when writing the study configuration. See examples for more information",type:"string"},baseComponents:{$ref:"#/definitions/BaseComponents",description:"The base components that are used in the study. These components can be used to template other components. See [BaseComponents](../../type-aliases/BaseComponents) for more information."},components:{additionalProperties:{anyOf:[{$ref:"#/definitions/IndividualComponent"},{$ref:"#/definitions/InheritedComponent"}]},description:"The components that are used in the study. They must be fully defined here with all properties. Some properties may be inherited from baseComponents.",type:"object"},sequence:{$ref:"#/definitions/ComponentBlock",description:"The order of the components in the study. This might include some randomness."},studyMetadata:{$ref:"#/definitions/StudyMetadata",description:"The metadata for the study. This is used to identify the study and version in the data file."},uiConfig:{$ref:"#/definitions/UIConfig",description:"The UI configuration for the study. This is used to configure the UI of the app."}},required:["$schema","studyMetadata","uiConfig","components","sequence"],type:"object"},StudyMetadata:{additionalProperties:!1,description:'The StudyMetadata is used to describe certain properties of a study. Some of this data is displayed on the landing page when running the app, such as the title and description. Below is an example of a StudyMetadata entry in your study configuration file:\n\n```js "studyMetadata" : { "title": "My New Study", "version": "pilot", "authors": [  "Jane Doe",  "John Doe" ], "date": "2024-04-01", "description": "This study is meant to test your ability.", "organizations": [  "The reVISit Team",  "The Other Team" ] } ```',properties:{authors:{description:"The authors of your study.",items:{type:"string"},type:"array"},date:{description:"The date of your study, may be useful for the researcher.",type:"string"},description:{description:"The description of your study, shown on the landing page.",type:"string"},organizations:{description:"The organizations that are associated with your study.",items:{type:"string"},type:"array"},title:{description:"The title of your study, shown on the landing page.",type:"string"},version:{description:"The version of your study. When you change a configuration file after a study has already been distributed to participants, you can change the version number so that the participants who see this new configuration file can be identified.",type:"string"}},required:["title","version","authors","date","description","organizations"],type:"object"},UIConfig:{additionalProperties:!1,description:'The UIConfig is used to configure the UI of the app. This includes the logo, contact email, and whether to show a progress bar. The UIConfig is also used to configure the sidebar, which can be used to display the task instructions and capture responses. Below is an example of how the UI Config would look in your study configuration (note, there are optional fields that are not shown here): ```js uiConfig:{ "contactEmail": "contact@revisit.dev", "helpTextPath": "<study-name>/assets/help.md", "logoPath": "<study-name>/assets/logo.jpg", "withProgressBar": true, "autoDownloadStudy": true "autoDownloadTime": 5000, "studyEndMsg": "Thank you for completing this study. You\'re the best!", "sidebar": true, "windowEventDebounceTime": 500, "urlParticipantIdParam": "PROLIFIC_ID", "numSequences": 500 } ``` In the above, the `path/to/assets/` path is referring to the path to your individual study assets. It is common practice to have your study directory contain an `assets` directory where all components and images relevant to your study reside. Note that this path is relative to the `public` folder of the repository - as is all other paths you define in reVISit (aside from React components whose paths are relative to `src/public`.)',properties:{autoDownloadStudy:{description:"Controls whether the study data is automatically downloaded at the end of the study.",type:"boolean"},autoDownloadTime:{description:"The time in milliseconds to wait before automatically downloading the study data.",type:"number"},contactEmail:{description:"The email address that used during the study if a participant clicks contact.",type:"string"},enumerateQuestions:{description:"Whether to prepend questions with their index (+ 1). This should only be used when all questions are in the same location, e.g. all are in the side bar.",type:"boolean"},helpTextPath:{description:"The path to the help text file. This is displayed when a participant clicks help. Markdown is supported.",type:"string"},logoPath:{description:"The path to the logo image. This is displayed on the landing page and the header.",type:"string"},numSequences:{description:"The number of sequences to generate for the study. This is used to generate the random sequences for the study. The default is 1000.",type:"number"},sidebar:{description:"Controls whether the left sidebar is rendered at all. Required to be true if your response's location is set to sidebar for any question.",type:"boolean"},sidebarWidth:{description:"The width of the left sidebar. Defaults to 300.",type:"number"},studyEndMsg:{description:"The message to display when the study ends.",type:"string"},urlParticipantIdParam:{description:"If the participant ID is passed in the URL, this is the name of the querystring parameter that is used to capture the participant ID (e.g. PROLIFIC_ID). This will allow a user to continue a study on different devices and browsers.",type:"string"},windowEventDebounceTime:{description:"Debounce time in milliseconds for automatically tracked window events. Defaults to 100. E.g 100 here means 1000ms / 100ms = 10 times a second, 200 here means 1000ms / 200ms = 5 times per second",type:"number"},withProgressBar:{description:"Controls whether the progress bar is rendered in the study.",type:"boolean"}},required:["contactEmail","logoPath","withProgressBar","sidebar"],type:"object"},WebsiteComponent:{additionalProperties:!1,description:'The WebsiteComponent interface is used to define the properties of a website component. A WebsiteComponent is used to render an iframe with a website inside of it. This can be used to display an external website or an html file that is located in the public folder.\n\n```js { "type": "website", "path": "<study-name>/assets/website.html", } ```\n\nTo pass a data from the config to the website, you can use the `parameters` field as below:\n\n```js { "type": "website", "path": "<study-name>/website.html", "parameters": {  "barData": [0.32, 0.01, 1.2, 1.3, 0.82, 0.4, 0.3] } "response": [  {    "id": "barChart",    "prompt": "Your selected answer:",    "required": true,    "location": "belowStimulus",    "type": "iframe"  } ], } ``` In the `website.html` file, by including `revisit-communicate.js`, you can use the `Revisit.onDataReceive` method to retrieve the data, and `Revisit.postAnswers` to send the user\'s responses back to the reVISit as shown in the example below:\n\n```html <script src="../../revisitUtilities/revisit-communicate.js"><\/script> <script> Revisit.onDataReceive((data) => {  const barData = data[\'barData\'];  ... });\n\n// Call out that \'barChart\' needs to match ID in \'response\' object Revisit.postAnswers({ barChart: userAnswer }); <\/script> ```\n\n If the html website implements Trrack library for provenance tracking, you can send the provenance graph back to reVISit by calling `Revisit.postProvenanceGraph` as shown in the example below. You need to call this each time the Trrack state is updated so that reVISit is kept aware of the changes in the provenance graph.\n\n```js const trrack = initializeTrrack({ initialState, registry });\n\n... Revisit.postProvenance(trrack.graph.backend); ```',properties:{allowFailedTraining:{description:"Controls whether the component should allow failed training. If not provided, the default is true.",type:"boolean"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},parameters:{additionalProperties:{},description:"The parameters that are passed to the website (iframe). These can be used within your website to render different things.",type:"object"},path:{description:"The path to the website. This should be a relative path from the public folder or could be an external website.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},trainingAttempts:{description:"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.",type:"number"},type:{const:"website",type:"string"}},required:["path","response","type"],type:"object"}},mdt={$ref:ddt,$schema:hdt,definitions:pdt},gdt="#/definitions/GlobalConfig",ydt="http://json-schema.org/draft-07/schema#",vdt={GlobalConfig:{additionalProperties:!1,description:"The GlobalConfig is used to generate the list of available studies in the UI. This list is displayed on the landing page when running the app.",properties:{$schema:{description:"A required json schema property. This should point to the github link for the version of the schema you would like. See examples in the public folder for more information",type:"string"},configs:{additionalProperties:{additionalProperties:!1,description:"The key is used to identify the study config file. This key is used in the configList property.",properties:{path:{description:"The path to the study config file. This should be a relative path from the public folder.",type:"string"},test:{description:"Indicates whether the study is a test study. This is used to hide the study from the landing page.",type:"boolean"}},required:["path"],type:"object"},description:"A required property that specifies the options for the configList property.",type:"object"},configsList:{description:"A required property that is used to generate the list of available studies in the UI. This list is displayed on the landing page when running the app.",items:{type:"string"},type:"array"}},required:["$schema","configs","configsList"],type:"object"}},bdt={$ref:gdt,$schema:ydt,definitions:vdt},abe=new sbe;abe.addSchema(bdt);const jre=abe.getSchema("#/definitions/GlobalConfig"),ube=new sbe;ube.addSchema(mdt);const k6=ube.getSchema("#/definitions/StudyConfig");function _dt(e){const t=[];return[e.configsList.every(r=>e.configs[r]===void 0?(t.push({message:`Config ${r} is not defined in configs object, but is present in configsList`}),!1):!0),t]}function HO(e){return e.baseComponent!==void 0}function wdt(e){const t=qV.parse(e),n=jre(t),r=_dt(t);if(n&&r[0])return t;throw console.error("Global config parsing errors",[...jre.errors||[],...r[1]]),Error("There was an issue validating your file global.json")}function lbe(e,t,n=[]){if(e.components.length===0){n.push({message:"Sequence has an empty components array",instancePath:"/sequence/",params:{action:"remove empty components block"}});return}e.id&&t.map((i,o)=>i===e.id?o:null).forEach(i=>{i!==null&&t.splice(i,1)}),e.components.forEach(r=>{typeof r=="string"?t.includes(r)&&t.map((o,s)=>o===r?s:null).forEach(o=>{o!==null&&t.splice(o,1)}):lbe(r,t,n)}),e.skip&&t.push(...e.skip.map(r=>r.to).filter(r=>r!=="end"))}function Edt(e){const t=[],n=[];Object.entries(e.components).forEach(([o,s])=>{var a;HO(s)&&!((a=e.baseComponents)!=null&&a[s.baseComponent])&&t.push({message:`Base component \`${s.baseComponent}\` is not defined in baseComponents object`,instancePath:`/components/${o}`,params:{action:"add the base component to the baseComponents object"}})});const r=kge(e.sequence);r.forEach(o=>{var s;e.components[o]||t.push({message:(s=e.baseComponents)!=null&&s[o]?`Component \`${o}\` is a base component and cannot be used in the sequence`:`Component \`${o}\` is not defined in components object`,instancePath:"/sequence/",params:{action:"add the component to the components object"}})}),Object.keys(e.components).filter(o=>!r.includes(o)).forEach(o=>{n.push({message:`Component \`${o}\` is defined in components object but not used in the sequence`,instancePath:"/components/",params:{action:"remove the component from the components object or add it to the sequence"}})});const i=[];return lbe(e.sequence,i),i.forEach(o=>{t.push({message:`Skip target \`${o}\` does not occur after the skip block it is used in`,instancePath:"/sequence/",params:{action:"add the target to the sequence after the skip block"}})}),{errors:t,warnings:n}}function xdt(e){let t=!1,n;try{n=qV.parse(e),t=k6(n)}catch{t=!1}let r=[],i=[];if(t){const{errors:o,warnings:s}=Edt(n);r=[...k6.errors||[],...o],i=s}else r=k6.errors||[{message:"There was an issue validating your config file",instancePath:"root",params:{action:"fix the errors in your file or make sure the global config references the right file path"}}];return{...n,errors:r,warnings:i}}function cbe(){const e=Ch(),{setAlertModal:t}=Lf(),n=Ff();k.useEffect(()=>{window.history.pushState(null,"",window.location.href),window.onpopstate=()=>{window.history.pushState(null,"",window.location.href),n(t({show:!0,message:"Using the browser's back button is prohibited during the study."}))}},[e,t,n])}var Bre=Object.prototype.hasOwnProperty;function Ure(e,t,n){for(n of e.keys())if(Fx(n,t))return n}function Fx(e,t){var n,r,i;if(e===t)return!0;if(e&&t&&(n=e.constructor)===t.constructor){if(n===Date)return e.getTime()===t.getTime();if(n===RegExp)return e.toString()===t.toString();if(n===Array){if((r=e.length)===t.length)for(;r--&&Fx(e[r],t[r]););return r===-1}if(n===Set){if(e.size!==t.size)return!1;for(r of e)if(i=r,i&&typeof i=="object"&&(i=Ure(t,i),!i)||!t.has(i))return!1;return!0}if(n===Map){if(e.size!==t.size)return!1;for(r of e)if(i=r[0],i&&typeof i=="object"&&(i=Ure(t,i),!i)||!Fx(r[1],t.get(i)))return!1;return!0}if(n===ArrayBuffer)e=new Uint8Array(e),t=new Uint8Array(t);else if(n===DataView){if((r=e.byteLength)===t.byteLength)for(;r--&&e.getInt8(r)===t.getInt8(r););return r===-1}if(ArrayBuffer.isView(e)){if((r=e.byteLength)===t.byteLength)for(;r--&&e[r]===t[r];);return r===-1}if(!n||typeof e=="object"){r=0;for(n in e)if(Bre.call(e,n)&&++r&&!Bre.call(t,n)||!(n in t)||!Fx(e[n],t[n]))return!1;return Object.keys(t).length===r}}return e!==e&&t!==t}function Tdt(e){var t=k.useRef(e),n=k.useRef(0);return Fx(e,t.current)||(t.current=e,n.current+=1),k.useMemo(function(){return t.current},[n.current])}function Sdt(e,t){return k.useEffect(e,Tdt(t))}const Cdt=(e,t=null)=>{const[n,r]=k.useState("idle"),[i,o]=k.useState(null),[s,a]=k.useState(null),u=k.useRef(),l=k.useRef(!1);k.useEffect(()=>(l.current=!0,()=>{l.current=!1}),[]);const c=k.useCallback((...f)=>{r("pending"),a(null);const d=Promise.resolve(e(...f)).then(h=>(l.current&&d===u.current&&(o(h),r("success")),h)).catch(h=>{throw l.current&&d===u.current&&(o(null),a(h),r("error")),h});return u.current=d,d},[e]);return Sdt(()=>{if(t)try{c(...t)}catch{}},[c,t]),{execute:c,status:n,value:i,error:s}},zre=["status","percentComplete","description","instruction","responsePrompt","answer","correctAnswer","responseMin","responseMax","startTime","endTime","duration","meta","configHash"],fbe=["participantId","trialId","trialOrder","responseId"];function OH(e,t){const n=`data:text/json;charset=utf-8,${encodeURIComponent(e)}`,r=document.createElement("a");r.setAttribute("href",n),r.setAttribute("download",t),document.body.appendChild(r),r.click(),r.remove()}function Adt(e,t,n){const r=(Object.entries(e.answers).filter(([i,o])=>o.endTime!==void 0).length/(rh(e.sequence).length-1)*100).toFixed(2);return Object.entries(e.answers).map(([i,o])=>{const s=i.split("_").slice(0,-1).join("_"),a=parseInt(`${i.split("_").at(-1)}`,10),u=n.components[s],l=HO(u)&&u.baseComponent&&n.baseComponents?Pz({},n.baseComponents[u.baseComponent],u):u,c=o.endTime-o.startTime;return Object.entries(o.answer).map(([d,h])=>{var g,y;const p={participantId:e.participantId,trialId:s,trialOrder:a,responseId:d},m=l.response.find(v=>v.id===d);if(t.includes("status")&&(p.status=e.rejected?"rejected":e.completed?"completed":"in progress"),t.includes("configHash")&&(p.configHash=e.participantConfigHash),t.includes("percentComplete")&&(p.percentComplete=r),t.includes("description")&&(p.description=l.description),t.includes("instruction")&&(p.instruction=l.instruction),t.includes("responsePrompt")&&(p.responsePrompt=m==null?void 0:m.prompt),t.includes("answer")&&(p.answer=h),t.includes("correctAnswer")){const v=(y=(g=l.correctAnswer)==null?void 0:g.find(_=>_.id===d))==null?void 0:y.answer;p.correctAnswer=typeof v=="object"?JSON.stringify(v):v}return t.includes("responseMin")&&(p.responseMin=(m==null?void 0:m.type)==="numerical"?m.min:void 0),t.includes("responseMax")&&(p.responseMax=(m==null?void 0:m.type)==="numerical"?m.max:void 0),t.includes("startTime")&&(p.startTime=new Date(o.startTime).toISOString()),t.includes("endTime")&&(p.endTime=new Date(o.endTime).toISOString()),t.includes("duration")&&(p.duration=c),t.includes("meta")&&(p.meta=JSON.stringify(l.meta,null,2)),p}).flat()}).flat()}async function kdt(e,t,n,r){if(!n)return{header:[],rows:[]};const i=[...fbe,...e],o=[...new Set(t.map(c=>c.participantConfigHash))],s=await n.getAllConfigsFromHash(o,r),a=i,l=(await Promise.all(t.map(async c=>await Adt(c,i,s[c.participantConfigHash])))).flat().sort((c,f)=>c!==f?c.participantId.localeCompare(f.participantId):c.trialOrder-f.trialOrder);return{header:a,rows:l}}function Idt({opened:e,close:t,filename:n,data:r,studyId:i}){const[o,s]=k.useState([...zre].filter(h=>h!=="meta")),a=$i(),{value:u,status:l,error:c}=Cdt(kdt,[o,r,a.storageEngine,i]),f=k.useCallback(()=>{if(!u)return;const h=[u.header.join(","),...u.rows.map(p=>u.header.map(m=>`"${`${p[m]}`.replace(/"/g,'""')}"`).join(","))].join(`
`);OH(h,n)},[n,u]),d=k.useMemo(()=>{if(!u)return"";const h=u.rows.length>5?5:u.rows.length,p=h===1?"":"s";return`This is a preview of the first ${p?h:""} row${p} of the CSV. The full CSV contains ${u.rows.length} row${p}.`},[u]);return b.jsxs(li,{opened:e,size:"90%",onClose:t,title:"Tidy CSV Exporter",centered:!0,withCloseButton:!1,children:[b.jsx(RU,{searchable:!0,nothingFoundMessage:"Property not found",data:[...zre],value:o,onChange:h=>s(h),label:"Included optional columns:",leftSection:b.jsx(a8e,{}),variant:"filled"}),b.jsx(cu,{h:"md"}),b.jsxs(he,{mih:300,style:{width:"100%",overflow:"scroll"},children:[l==="success"&&u?b.jsxs(Ut,{striped:!0,captionSide:"bottom",withTableBorder:!0,children:[b.jsx(Ut.Thead,{children:b.jsx(Ut.Tr,{children:u.header.map(h=>b.jsx(Ut.Th,{style:{whiteSpace:"nowrap",minWidth:["description","instruction","participantId"].includes(h)?200:void 0},children:b.jsxs(kt,{direction:"row",justify:"space-between",align:"center",children:[h,!fbe.includes(h)&&b.jsx(Ey,{onClick:()=>s(o.filter(p=>p!==h)),style:{marginBottom:-3,marginLeft:8},variant:"subtle",color:"gray",children:b.jsx(iz,{size:16})})]})},h))})}),b.jsx(Ut.Tbody,{children:u.rows.slice(0,5).map((h,p)=>b.jsx(Ut.Tr,{children:u.header.map(m=>b.jsx(Ut.Td,{style:{whiteSpace:["description","instruction","participantId"].includes(m)?"normal":"nowrap"},children:h[m]},`${p}-${m}`))},p))})]}):l==="error"&&c?b.jsx(h_,{variant:"light",children:c.message}):null,b.jsx(gu,{visible:l==="pending"||l==="idle"})]}),b.jsx(cu,{h:"sm"}),b.jsx(kt,{justify:"center",fz:"sm",c:"dimmed",children:b.jsx(je,{children:d})}),b.jsx(cu,{h:"md"}),b.jsxs(qs,{justify:"right",children:[b.jsx(on,{onClick:t,color:"dark",variant:"subtle",children:"Close"}),b.jsx(on,{leftSection:b.jsx(Ope,{}),onClick:()=>f(),"data-autofocus":!0,children:"Download"})]})]})}function Rdt(){const e=om(),{storageEngine:t}=$i(),{answers:n}=bl(v=>v),[r,i]=k.useState(!1);k.useEffect(()=>{const v=setInterval(async()=>{await t.verifyCompletion(n)&&(i(!0),clearInterval(v))},1e3)},[]),cbe();const[o,s]=k.useState(),[a,u]=k.useState(""),l=e.studyMetadata.title.replace(" ","_");k.useEffect(()=>{async function v(){if(t){const _=await t.getCurrentParticipantId(),w=await t.getParticipantData();u(_),s(w)}}v()},[t]);const c=k.useCallback(async()=>{OH(JSON.stringify(o,null,2),`${l}_${a}.json`)},[l,o,a]),f=e.uiConfig.autoDownloadStudy||!1,d=f&&e.uiConfig.autoDownloadTime||-1,[h,p]=k.useState(Math.floor(d/1e3));k.useEffect(()=>{if(r){const v=setInterval(()=>{p(_=>_-1)},1e3);return h<=0?(f&&c(),clearInterval(v),()=>clearInterval(v)):()=>clearInterval(v)}return()=>{}},[f,r,h,c]);const m=Ny(),[g,y]=k.useState(!1);return k.useEffect(()=>{(async()=>{if(t){const _=await t.getModes(m);y(_.dataCollectionEnabled)}})()},[t,m]),b.jsx(nm,{style:{height:"100%"},children:b.jsx(kt,{direction:"column",children:r||!g?b.jsx(je,{size:"xl",display:"block",children:e.uiConfig.studyEndMsg?b.jsx(Ws,{text:e.uiConfig.studyEndMsg}):"Thank you for completing the study. You may close this window now."}):b.jsxs(b.Fragment,{children:[b.jsx(je,{size:"xl",display:"block",children:"Please wait while your answers are uploaded."}),b.jsx(cu,{h:"lg"}),b.jsx(nm,{children:b.jsx(bh,{color:"blue"})})]})})})}function Ndt(){return b.jsx(je,{children:"Thank you for participating. Unfortunately you have didn't answer the training correctly, which means you are not eligible to participate in the study. You may close this window now."})}function Pdt(){var d;const e=om(),t=Ch(),n=Py()||"Notfound",r=e.components[n],i=Dz();cbe();const{storageEngine:o}=$i(),s=Ff(),{setAlertModal:a}=Lf();if(k.useEffect(()=>{(o==null?void 0:o.getEngine())!=="firebase"&&s(a({show:!0,message:"There was an issue connecting to the firebase database. This could be caused by a network issue or your adblocker. If you are using an adblocker, please disable it for this website and refresh."}))},[a,o,s]),n==="end")return b.jsx(Rdt,{});if(n==="__trainingFailed")return b.jsx(Ndt,{});if(n==="Notfound")return b.jsx(P0,{email:e.uiConfig.contactEmail});const u=HO(r)&&e.baseComponents?Pz({},(d=e.baseComponents)==null?void 0:d[r.baseComponent],r):r,l=u.instruction||"",{instructionLocation:c}=u,f=e.uiConfig.sidebar&&(c==="sidebar"||c===void 0);return b.jsxs(b.Fragment,{children:[c==="aboveStimulus"&&b.jsx(Ws,{text:l}),b.jsx(xR,{status:i,config:u,location:"aboveStimulus"},`${t}-above-response-block`),b.jsxs(k.Suspense,{fallback:b.jsx("div",{children:"Loading..."}),children:[u.type==="markdown"&&b.jsx(Pat,{currentConfig:u}),u.type==="website"&&b.jsx(hYe,{currentConfig:u}),u.type==="image"&&b.jsx(mYe,{currentConfig:u}),u.type==="react-component"&&b.jsx(Nat,{currentConfig:u})]},`${t}-stimulus`),(c==="belowStimulus"||c===void 0&&!f)&&b.jsx(Ws,{text:l}),b.jsx(xR,{status:i,config:u,location:"belowStimulus"},`${t}-below-response-block`)]})}function t9(e){const[t]=tz();return b.jsx(ez,{...e,to:{pathname:e.to,search:t.toString()}})}function dbe(e,t,n,r){let i=0;for(let o=0;o<e.components.length;o+=1){const s=e.components[o];if(typeof s=="string"){if(r===e.orderPath&&s===t&&o>=n)break;i+=1}else if(i+=dbe(s,t,n,r),r.includes(s.orderPath))break}return i}function hbe(e,t){let n=0;return t.components.forEach(r=>{var i;if(typeof r=="string"&&((i=e.interruptions)!=null&&i.flatMap(o=>o.components).includes(r)))n+=1;else if(typeof r!="string"){const o=e.components.find(s=>typeof s!="string"&&s.orderPath===r.orderPath);n+=hbe(o,r)}}),n}function Ddt(e,t){const n=[];return t.forEach(r=>{const i=e.findIndex(o=>typeof o=="string"?o===r:typeof r!="string"&&o.orderPath===r.orderPath);i!==-1&&(n.push(e[i]),e.splice(i,1)),i===-1&&typeof r=="string"&&n.push(r)}),n.push(...e),n}function Odt({step:e,disabled:t,fullSequence:n,startIndex:r,interruption:i,participantView:o,studyConfig:s,subSequence:a,analysisNavigation:u}){const l=Ny(),c=$f(),f=Ch(),[d,{close:h,open:p}]=lD(!1),m=e in s.components&&s.components[e],g=a&&a.components.slice(r).includes(e)?dbe(n,e,r,a.orderPath):-1,{trialId:y}=eh(),v=y===e,_=o?f===g:f===`reviewer-${e}`,w=u?v:_,E=k.useCallback(()=>c(y?`./../${e}`:`./${e}`),[c,e,y]),T=u?E:()=>c(o?`/${l}/${g}`:`/${l}/reviewer-${e}`);return b.jsxs(Mo,{withinPortal:!0,position:"left",withArrow:!0,arrowSize:10,shadow:"md",opened:d,offset:20,children:[b.jsx(Mo.Target,{children:b.jsx(he,{onMouseEnter:p,onMouseLeave:h,children:b.jsx(LD,{active:w,style:{lineHeight:"32px",height:"32px"},label:b.jsxs(he,{children:[i&&b.jsx(Y9e,{size:16,style:{marginRight:4,marginBottom:-2},color:"orange"}),w?b.jsx(je,{size:"sm",span:!0,fw:"700",display:"inline",children:e}):b.jsx(je,{size:"sm",display:"inline",children:e})]}),onClick:T,disabled:t})})}),m&&(m.description||m.meta)&&b.jsx(Mo.Dropdown,{onMouseLeave:h,children:b.jsx(je,{size:"sm",children:b.jsxs(he,{children:[m.description&&b.jsxs(he,{children:[b.jsx(je,{fw:900,display:"inline-block",mr:2,children:"Description:"}),b.jsx(je,{fw:400,component:"span",children:m.description})]}),m.meta&&b.jsxs(je,{children:[b.jsx(je,{fw:"900",component:"span",children:"Task Meta: "}),b.jsx(je,{component:"pre",style:{margin:0,padding:0},children:`${JSON.stringify(m.meta,null,2)}`})]})]})})})]})}function NN({configSequence:e,fullSequence:t,participantSequence:n,participantView:r,studyConfig:i,analysisNavigation:o}){var a;let s=Fp(e.components);return n&&r&&(s=Ddt(Fp(e.components),Fp(n.components))),r||(s=[...((a=e.interruptions)==null?void 0:a.flatMap(u=>u.components))||[],...s]),b.jsx(b.Fragment,{children:s.map((u,l)=>{if(typeof u=="string")return b.jsx(Odt,{step:u,disabled:r&&(n==null?void 0:n.components[l])!==u,fullSequence:t,startIndex:l,interruption:e.interruptions&&e.interruptions.findIndex(h=>h.components.includes(u))>-1||!1,participantView:r,studyConfig:i,subSequence:n,analysisNavigation:o},l);const c=n==null?void 0:n.components.find(h=>typeof h!="string"&&h.orderPath===u.orderPath),f=c?rh(c).length-hbe(u,c):0,d=rh(u);return b.jsx(LD,{label:b.jsxs(he,{style:{opacity:f>0?1:.5},children:[b.jsx(je,{size:"sm",display:"inline",children:u.order}),u.order==="random"||u.order==="latinSquare"?b.jsx(W9e,{size:"15",opacity:.5,style:{marginLeft:"5px",verticalAlign:"middle"}}):null,r&&b.jsxs($p,{ml:5,variant:"light",children:[f,"/",d.length]}),r&&u.interruptions&&b.jsx($p,{ml:5,color:"orange",variant:"light",children:(c==null?void 0:c.components.filter(h=>{var p;return typeof h=="string"&&((p=u.interruptions)==null?void 0:p.flatMap(m=>m.components).includes(h))}).length)||0})]}),defaultOpened:!0,childrenOffset:32,style:{lineHeight:"32px",height:"32px"},children:b.jsx(he,{style:{borderLeft:"1px solid #e9ecef"},children:b.jsx(NN,{configSequence:u,participantSequence:c,fullSequence:t,participantView:r,studyConfig:i,analysisNavigation:o})})},l)})})}function pbe(e,t,n,r){e==null||e.nextParticipant().then(()=>{window.location.href=r}).catch(i=>{console.error(i)})}function Vre({text:e}){return b.jsx(zr,{label:e,multiline:!0,w:200,style:{whiteSpace:"normal"},withinPortal:!0,position:"bottom",children:b.jsx(Npe,{size:16,style:{marginBottom:-3,marginLeft:4}})})}function $dt(){const{sequence:e,metadata:t}=bl(f=>f),{toggleStudyBrowser:n}=Lf(),r=om(),i=Ff(),o=Ny(),s=Spe(`/${o}`),{storageEngine:a}=$i(),u=k.useMemo(()=>{let f=Fp(r.sequence);return f=Rz(f,"root"),f.components.push("end"),f},[r.sequence]),[l,c]=k.useState("participant");return b.jsxs(Or.Aside,{p:"0",children:[b.jsx(Or.Section,{children:b.jsxs(kt,{direction:"row",p:"sm",justify:"space-between",pb:"xs",children:[b.jsx(je,{size:"md",fw:700,pt:3,children:"Study Browser"}),b.jsx(on,{variant:"light",leftSection:b.jsx(rz,{size:14}),onClick:()=>pbe(a,r,t,s),size:"xs",disabled:l==="allTrials",children:"Next Participant"}),b.jsx(_h,{onClick:()=>i(n()),mt:1})]})}),b.jsx(Or.Section,{grow:!0,component:Qd,p:"xs",pt:0,children:b.jsxs(gi,{value:l,onChange:c,children:[b.jsx(he,{style:{position:"sticky",top:0,backgroundColor:"white",zIndex:1},children:b.jsxs(gi.List,{grow:!0,children:[b.jsxs(gi.Tab,{value:"participant",children:["Participant View",b.jsx(Vre,{text:"The Participants View shows items just as a participants would see them, considering randomization, omissions, etc. You can navigate between multiple participants using the next participant button."})]}),b.jsxs(gi.Tab,{value:"allTrials",children:["All Trials View",b.jsx(Vre,{text:"The All Trials View shows all items in the order defined in the config."})]})]})}),b.jsx(gi.Panel,{value:"participant",children:b.jsx(NN,{configSequence:u,participantSequence:e,fullSequence:e,participantView:!0,studyConfig:r})}),b.jsx(gi.Panel,{value:"allTrials",children:b.jsx(NN,{configSequence:u,participantSequence:e,fullSequence:e,participantView:!1,studyConfig:r})})]})})]})}function Mdt({studyNavigatorEnabled:e,dataCollectionEnabled:t}){const{config:n,metadata:r}=bl(E=>E),i=Nz(),o=Ff(),{toggleShowHelpText:s,toggleStudyBrowser:a}=Lf(),{storageEngine:u}=$i(),l=Ch(),c=i.length-1,f=typeof l=="number"?l/c*100:0,[d,h]=k.useState(!1),p=n==null?void 0:n.uiConfig.logoPath,m=n==null?void 0:n.uiConfig.withProgressBar,g=Ny(),y=Spe(`/${g}`),v=k.useRef(null),[_,w]=k.useState(!1);return k.useEffect(()=>{const E=v.current;E&&w(E.scrollWidth>E.offsetWidth)},[n]),b.jsx(Or.Header,{p:"md",children:b.jsxs(Ku,{mt:-7,align:"center",children:[b.jsx(Ku.Col,{span:4,children:b.jsxs(kt,{align:"center",children:[b.jsx(Fm,{w:40,src:`${Ra}${p}`,alt:"Study Logo"}),b.jsx(cu,{w:"md"}),b.jsx(kr,{ref:v,order:4,style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},title:_?n==null?void 0:n.studyMetadata.title:void 0,children:n==null?void 0:n.studyMetadata.title})]})}),b.jsx(Ku.Col,{span:4,children:m&&b.jsx(v_,{radius:"md",size:"lg",value:f})}),b.jsx(Ku.Col,{span:4,children:b.jsxs(qs,{wrap:"nowrap",justify:"right",children:[!t&&b.jsx(zr,{multiline:!0,withArrow:!0,arrowSize:6,w:300,label:"This is a demo version of the study, were not collecting any data.",children:b.jsx($p,{size:"lg",color:"orange",children:"Demo Mode"})}),(n==null?void 0:n.uiConfig.helpTextPath)!==void 0&&b.jsx(on,{variant:"outline",onClick:()=>o(s()),children:"Help"}),b.jsxs(pa,{shadow:"md",width:200,withinPortal:!0,opened:d,onChange:h,children:[b.jsx(pa.Target,{children:b.jsx(Ey,{size:"lg",className:"studyBrowserMenuDropdown",variant:"subtle",color:"gray",children:b.jsx(n8e,{})})}),b.jsxs(pa.Dropdown,{children:[e&&b.jsx(pa.Item,{leftSection:b.jsx(p8e,{size:14}),onClick:()=>o(a()),children:"Study Browser"}),b.jsx(pa.Item,{component:"a",href:n!==null?`mailto:${n.uiConfig.contactEmail}`:void 0,leftSection:b.jsx(u8e,{size:14}),children:"Contact"}),e&&b.jsx(pa.Item,{leftSection:b.jsx(rz,{size:14}),onClick:()=>pbe(u,n,r,y),children:"Next Participant"})]})]})]})})]})})}function mbe(e,t){var n;return HO(e)&&t.baseComponents?Pz({},(n=t.baseComponents)==null?void 0:n[e.baseComponent],e):e}function Ldt(){var u;const e=(u=om())==null?void 0:u.uiConfig.sidebar,t=om(),n=Py(),r=t.components[n],i=k.useMemo(()=>r?mbe(r,t):null,[r,t]),o=Dz(),s=(i==null?void 0:i.instruction)||"",a=(i==null?void 0:i.instructionLocation)==="sidebar"||(i==null?void 0:i.instructionLocation)===void 0;return e&&i?b.jsxs(Or.Navbar,{bg:"gray.1",display:"block",style:{zIndex:0,overflowY:"scroll"},children:[a&&s!==""&&b.jsx(Or.Section,{bg:"gray.3",p:"md",children:b.jsxs(je,{c:"gray.9",children:[b.jsx(je,{span:!0,c:"orange.8",fw:700,inherit:!0,children:"Task:"}),b.jsx(Ws,{text:s})]})}),b.jsx(Or.Section,{p:"md",children:b.jsx(xR,{status:o,config:i,location:"sidebar"},`${n}-sidebar-response-block`)})]}):b.jsx(Or.Navbar,{bg:"gray.1",display:"block",style:{zIndex:0,overflowY:"scroll"},children:b.jsx(xR,{status:o,config:i,location:"sidebar",style:{display:"hidden"}},`${n}-sidebar-response-block`)})}function Fdt(){const{showHelpText:e,config:t}=bl(u=>u),n=Ff(),{toggleShowHelpText:r}=Lf(),[i,o]=k.useState(""),[s,a]=k.useState(!0);return k.useEffect(()=>{async function u(){const l=await $z(t.uiConfig.helpTextPath);l!==void 0&&o(l),a(!1)}u()},[t.uiConfig.helpTextPath]),b.jsx(li,{size:"70%",opened:e,withCloseButton:!1,onClose:()=>n(r()),children:s||i?b.jsx(Ws,{text:i}):b.jsx(P0,{path:t.uiConfig.helpTextPath})})}function jdt(){const{alertModal:e}=bl(s=>s),{setAlertModal:t}=Lf(),n=Ff(),[r,i]=k.useState(e.show),o=k.useCallback(()=>n(t({...e,show:!1})),[e,t,n]);return k.useEffect(()=>i(e.show),[e.show]),b.jsx(li,{opened:r,centered:!0,size:"lg",withCloseButton:!1,onClose:o,children:b.jsxs(h_,{color:"red",radius:"xs",title:"Alert",icon:b.jsx(q9e,{}),onClose:o,styles:{root:{backgroundColor:"unset"}},children:[b.jsx(je,{my:"md",children:e.message}),b.jsx(qs,{w:"100%",justify:"end",children:b.jsx(on,{onClick:o,color:"red",variant:"filled",m:"xs",children:"Continue Study"})})]})})}function Bdt(){const e=k.useRef([]),t=om(),n=t.uiConfig.windowEventDebounceTime??100,r=bl(d=>d.showStudyBrowser);k.useEffect(()=>{const d=Pc(E=>{e.current.push([Date.now(),"focus",E.target instanceof HTMLElement?E.target.tagName:""])},n,{maxWait:n}),h=Pc(E=>{e.current.push([Date.now(),"input",E.data??""])},n,{maxWait:n}),p=Pc(E=>{e.current.push([Date.now(),"keypress",E.key])},n,{maxWait:n}),m=Pc(E=>{e.current.push([Date.now(),"mousedown",[E.clientX,E.clientY]])},n,{maxWait:n}),g=Pc(E=>{e.current.push([Date.now(),"mouseup",[E.clientX,E.clientY]])},n,{maxWait:n}),y=Pc(()=>{e.current.push([Date.now(),"resize",[window.innerWidth,window.innerHeight]])},n,{maxWait:n}),v=Pc(E=>{e.current.push([Date.now(),"mousemove",[E.clientX,E.clientY]])},n,{maxWait:n}),_=Pc(()=>{e.current.push([Date.now(),"scroll",[window.scrollX,window.scrollY]])},n,{maxWait:n}),w=Pc(()=>{e.current.push([Date.now(),"visibility",document.visibilityState])},n,{maxWait:n});return window.addEventListener("focus",d,!0),window.addEventListener("input",h),window.addEventListener("keypress",p),window.addEventListener("mousedown",m),window.addEventListener("mouseup",g),window.addEventListener("resize",y),window.addEventListener("mousemove",v),window.addEventListener("scroll",_),document.addEventListener("visibilitychange",w),()=>{window.removeEventListener("focus",d,!0),window.removeEventListener("input",h),window.removeEventListener("keypress",p),window.addEventListener("mousedown",m),window.addEventListener("mouseup",g),window.removeEventListener("resize",y),window.removeEventListener("mousemove",v),window.removeEventListener("scroll",_),document.removeEventListener("visibilitychange",w)}},[]);const i=t.uiConfig.sidebarWidth??300,{storageEngine:o}=$i(),s=Ny(),[a,u]=k.useState(!1),[l,c]=k.useState(!1);k.useEffect(()=>{(async()=>{if(o){const h=await o.getModes(s);u(h.studyNavigatorEnabled),c(h.dataCollectionEnabled)}})()},[o,s]);const f=k.useMemo(()=>a&&r,[a,r]);return b.jsx(Oge.Provider,{value:e,children:b.jsxs(Or,{padding:"md",header:{height:70},navbar:{width:i,breakpoint:"xs",collapsed:{desktop:!t.uiConfig.sidebar,mobile:!t.uiConfig.sidebar}},aside:{width:360,breakpoint:"xs",collapsed:{desktop:!f,mobile:!f}},children:[b.jsx(Ldt,{}),b.jsx($dt,{}),b.jsx(Mdt,{studyNavigatorEnabled:a,dataCollectionEnabled:l}),b.jsx(Fdt,{}),b.jsx(jdt,{}),b.jsx(Or.Main,{children:b.jsx(R9e,{})})]})})}function Udt(e,t=!1){return typeof e=="number"?Hre(e,t):Hre(e.length,t).map(r=>r.map(i=>e[i]))}function Hre(e,t){if(e<0)throw new Error("Latin square size must be > 0");if(e==0)return[];if(e==1)return[[0]];let n=new Array(e);for(let o=0;o<e;o++)o<2?n[o]=o:o%2==0?n[o]=e-o/2:n[o]=Math.floor(o/2)+1;let r=[n],i=n;for(let o=1;o<e;o+=1){let s=i.map(a=>(a+1)%e);r.push(s),i=s}if(t&&e%2>0)for(let o=0;o<e;o+=1)r.push(r[o].slice().reverse());return r}function gbe(e,t,n){let r=e.components;e.order==="random"?r=e.components.sort(()=>.5-Math.random()):e.order==="latinSquare"&&t&&(r=t[n].pop().map(i=>i.startsWith("_componentBlock")?e.components[+i.slice(15)]:i)),r=r.slice(0,e.numSamples);for(let i=0;i<r.length;i+=1){const o=r[i];if(typeof o!="string"&&!Array.isArray(o)){const s=e.components.indexOf(o);r[i]=gbe(o,t,`${n}-${s}`)}}return e.interruptions&&e.interruptions.forEach(i=>{const o=[];if(i.spacing!=="random")for(let s=0;s<r.length;s+=1)(s===i.firstLocation||s>i.firstLocation&&s%i.spacing===0)&&o.push(i.components),o.push(r[s]);if(i.spacing==="random"){const s=new Set;if(i.numInterruptions>r.length-1)throw new Error("Number of interruptions cannot be greater than the number of components");for(;s.size<i.numInterruptions;){const l=Math.floor(Math.random()*r.length-1)+1;s.add(l)}const a=Array.from(s).sort((l,c)=>l-c);let u=0;for(let l=0;l<r.length;l+=1)l===a[u]&&(o.push(i.components),u+=1),o.push(r[l])}r=o}),{id:e.id,orderPath:n,components:r.flat(),skip:e.skip}}function zdt(e,t){const n=Fp(e);return gbe(n,t,"root")}function ybe(e,t,n,r=0){const i=n.length>0?`${n}-${r}`:"root";e.order==="latinSquare"&&t.push(i),e.components.forEach((o,s)=>{typeof o!="string"&&ybe(o,t,i,s)})}function Vdt(e){const t=[];return ybe(e,t,"",0),t}function qre(e,t){const n=t.split("-");let r={};n.forEach(s=>{s==="root"?r=e.sequence:r=r.components[+s]});const i=r.components.map((s,a)=>typeof s=="string"?s:`_componentBlock${a}`);return Udt(i.sort(()=>.5-Math.random()),!0)}function Hdt(e){const n=Vdt(e.sequence).map(o=>({[o]:qre(e,o)})).reduce((o,s)=>({...o,...s}),{}),r=e.uiConfig.numSequences||1e3,i=[];return Array.from({length:r}).forEach(()=>{const o=zdt(e.sequence,n);o.components.push("end"),i.push(o),Object.entries(n).forEach(([s,a])=>{a.length===0&&(n[s]=qre(e,s))})}),i}var qdt={VITE_BASE_PATH:"/study/",VITE_FIREBASE_CONFIG:`
{
  apiKey: "AIzaSyBR5snEuMQodNBn3tFkZ9VZtVha81rSiUs",
  authDomain: "mock-mqp.firebaseapp.com",
  projectId: "mock-mqp",
  storageBucket: "mock-mqp.appspot.com",
  messagingSenderId: "810459265279",
  appId: "1:810459265279:web:1f321cea4ef5376865f4ca",
  measurementId: "G-EFGFSXZL35"
}
`,VITE_STORAGE_ENGINE:"firebase",VITE_RECAPTCHAV3TOKEN:"6LfADT8qAAAAAAi4qNf-NQaCV0RXzIqKvBrxNjx2",BASE_URL:"/study/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};async function Wdt(e){const t=await(await fetch(`${Ra}${e}`)).text();return xdt(t)}async function qO(e,t){const n=t.configsList.find(r=>Mpe(r)===e);if(n){const r=t.configs[n];return await Wdt(`${r.path}`)}return null}async function Gdt(e){const t={},n=e.configsList.filter(i=>qdt.VITE_CI==="true"?!0:!e.configs[i].test).map(async i=>qO(i,e)),r=await Promise.all(n);return e.configsList.forEach((i,o)=>{t[i]=r[o]}),t}function Ydt({globalConfig:e}){const t=Ny(),[n,r]=k.useState(null),i=e.configsList.includes(t);k.useEffect(()=>{qO(t,e).then(h=>{r(h)})},[e,t]);const[o,s]=k.useState([]),[a,u]=k.useState(null),{storageEngine:l}=$i(),[c]=tz();k.useEffect(()=>{async function h(){if(!l||!n||!t)return;await l.initializeStudyDb(t,n),await l.getSequenceArray()||await l.setSequenceArray(await Hdt(n));const m=n.uiConfig.urlParticipantIdParam&&c.get(n.uiConfig.urlParticipantIdParam)||void 0,g=Object.fromEntries(c.entries()),y=await fetch("https://api.ipify.org?format=json").catch(S=>""),v=y instanceof Response?await y.json():{ip:""},_={language:navigator.language,userAgent:navigator.userAgent,resolution:{width:window.screen.width,height:window.screen.height,availHeight:window.screen.availHeight,availWidth:window.screen.availWidth,colorDepth:window.screen.colorDepth,orientation:window.screen.orientation.type,pixelDepth:window.screen.pixelDepth},ip:v.ip},w=await l.initializeParticipantSession(t,g,n,_,m),E=await NGe(t,n,w.sequence,_,w.answers);u(E),s([{element:b.jsx(Bdt,{}),children:[{path:"/",element:b.jsx(t9,{to:"0",replace:!0})},{path:"/:index",element:n.errors.length>0?b.jsxs(b.Fragment,{children:[b.jsx(kr,{order:2,mb:8,children:"Error loading config"}),b.jsx(C5,{issues:n.errors,type:"error"})]}):b.jsx(Pdt,{})}]}])}h()},[l,n,t,c]);const f=Ape(o);let d=null;return i?o.length===0?d=b.jsx(gu,{visible:!0}):d=f&&a?b.jsx(Dge.Provider,{value:a,children:b.jsx(SWe,{store:a.store,children:f})}):b.jsx(P0,{}):d=b.jsx(P0,{}),d}var Wre={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vbe=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=i&63|128):(i&64512)===55296&&r+1<e.length&&(e.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(e.charCodeAt(++r)&1023),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=i&63|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=i&63|128)}return t},Kdt=function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const o=e[n++];t[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){const o=e[n++],s=e[n++],a=e[n++],u=((i&7)<<18|(o&63)<<12|(s&63)<<6|a&63)-65536;t[r++]=String.fromCharCode(55296+(u>>10)),t[r++]=String.fromCharCode(56320+(u&1023))}else{const o=e[n++],s=e[n++];t[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return t.join("")},$H={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const o=e[i],s=i+1<e.length,a=s?e[i+1]:0,u=i+2<e.length,l=u?e[i+2]:0,c=o>>2,f=(o&3)<<4|a>>4;let d=(a&15)<<2|l>>6,h=l&63;u||(h=64,s||(d=64)),r.push(n[c],n[f],n[d],n[h])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(vbe(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):Kdt(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const o=n[e.charAt(i++)],a=i<e.length?n[e.charAt(i)]:0;++i;const l=i<e.length?n[e.charAt(i)]:64;++i;const f=i<e.length?n[e.charAt(i)]:64;if(++i,o==null||a==null||l==null||f==null)throw new Xdt;const d=o<<2|a>>4;if(r.push(d),l!==64){const h=a<<4&240|l>>2;if(r.push(h),f!==64){const p=l<<6&192|f;r.push(p)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class Xdt extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Qdt=function(e){const t=vbe(e);return $H.encodeByteArray(t,!0)},PN=function(e){return Qdt(e).replace(/\./g,"")},bbe=function(e){try{return $H.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _be(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jdt=()=>_be().__FIREBASE_DEFAULTS__,Zdt=()=>{if(typeof process>"u"||typeof Wre>"u")return;const e=Wre.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},eht=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&bbe(e[1]);return t&&JSON.parse(t)},WO=()=>{try{return Jdt()||Zdt()||eht()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},wbe=e=>{var t,n;return(n=(t=WO())===null||t===void 0?void 0:t.emulatorHosts)===null||n===void 0?void 0:n[e]},tht=e=>{const t=wbe(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),r]:[t.substring(0,n),r]},Ebe=()=>{var e;return(e=WO())===null||e===void 0?void 0:e.config},xbe=e=>{var t;return(t=WO())===null||t===void 0?void 0:t[`_${e}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JT{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nht(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=t||"demo-project",i=e.iat||0,o=e.sub||e.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},e);return[PN(JSON.stringify(n)),PN(JSON.stringify(s)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uo(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function rht(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Uo())}function iht(){var e;const t=(e=WO())===null||e===void 0?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function oht(){const e=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof e=="object"&&e.id!==void 0}function sht(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function aht(){const e=Uo();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function uht(){return!iht()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function MH(){try{return typeof indexedDB=="object"}catch{return!1}}function lht(){return new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var o;t(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(n){t(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cht="FirebaseError";class Vf extends Error{constructor(t,n,r){super(n),this.code=t,this.customData=r,this.name=cht,Object.setPrototypeOf(this,Vf.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,U_.prototype.create)}}class U_{constructor(t,n,r){this.service=t,this.serviceName=n,this.errors=r}create(t,...n){const r=n[0]||{},i=`${this.service}/${t}`,o=this.errors[t],s=o?fht(o,r):"Error",a=`${this.serviceName}: ${s} (${i}).`;return new Vf(i,a,r)}}function fht(e,t){return e.replace(dht,(n,r)=>{const i=t[r];return i!=null?String(i):`<${r}?>`})}const dht=/\{\$([^}]+)}/g;function hht(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function ZT(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const o=e[i],s=t[i];if(Gre(o)&&Gre(s)){if(!ZT(o,s))return!1}else if(o!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function Gre(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EC(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(i=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function pht(e,t){const n=new mht(e,t);return n.subscribe.bind(n)}class mht{constructor(t,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{t(this)}).catch(r=>{this.error(r)})}next(t){this.forEachObserver(n=>{n.next(t)})}error(t){this.forEachObserver(n=>{n.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,n,r){let i;if(t===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");ght(t,["next","error","complete"])?i=t:i={next:t,error:n,complete:r},i.next===void 0&&(i.next=I6),i.error===void 0&&(i.error=I6),i.complete===void 0&&(i.complete=I6);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,t)}sendOne(t,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{n(this.observers[t])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function ght(e,t){if(typeof e!="object"||e===null)return!1;for(const n of t)if(n in e&&typeof e[n]=="function")return!0;return!1}function I6(){}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yht=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{const t=Math.random()*16|0;return(e==="x"?t:t&3|8).toString(16)})};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vht=1e3,bht=2,_ht=4*60*60*1e3,wht=.5;function Eht(e,t=vht,n=bht){const r=t*Math.pow(n,e),i=Math.round(wht*r*(Math.random()-.5)*2);return Math.min(_ht,r+i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sr(e){return e&&e._delegate?e._delegate:e}class Ef{constructor(t,n,r){this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $g="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xht{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const r=new JT;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){var n;const r=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),i=(n=t==null?void 0:t.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(Sht(t))try{this.getOrInitializeService({instanceIdentifier:$g})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(t=$g){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=$g){return this.instances.has(t)}getOptions(t=$g){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,r=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[o,s]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(o);r===a&&s.resolve(i)}return i}onInit(t,n){var r;const i=this.normalizeInstanceIdentifier(n),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(t),this.onInitCallbacks.set(i,o);const s=this.instances.get(i);return s&&t(s,i),()=>{o.delete(t)}}invokeOnInitCallbacks(t,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Tht(t),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch{}return r||null}normalizeInstanceIdentifier(t=$g){return this.component?this.component.multipleInstances?t:$g:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Tht(e){return e===$g?void 0:e}function Sht(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cht{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new xht(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Cn;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(Cn||(Cn={}));const Aht={debug:Cn.DEBUG,verbose:Cn.VERBOSE,info:Cn.INFO,warn:Cn.WARN,error:Cn.ERROR,silent:Cn.SILENT},kht=Cn.INFO,Iht={[Cn.DEBUG]:"log",[Cn.VERBOSE]:"log",[Cn.INFO]:"info",[Cn.WARN]:"warn",[Cn.ERROR]:"error"},Rht=(e,t,...n)=>{if(t<e.logLevel)return;const r=new Date().toISOString(),i=Iht[t];if(i)console[i](`[${r}]  ${e.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class GO{constructor(t){this.name=t,this._logLevel=kht,this._logHandler=Rht,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Cn))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?Aht[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Cn.DEBUG,...t),this._logHandler(this,Cn.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Cn.VERBOSE,...t),this._logHandler(this,Cn.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Cn.INFO,...t),this._logHandler(this,Cn.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Cn.WARN,...t),this._logHandler(this,Cn.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Cn.ERROR,...t),this._logHandler(this,Cn.ERROR,...t)}}const Nht=(e,t)=>t.some(n=>e instanceof n);let Yre,Kre;function Pht(){return Yre||(Yre=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Dht(){return Kre||(Kre=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Tbe=new WeakMap,n9=new WeakMap,Sbe=new WeakMap,R6=new WeakMap,LH=new WeakMap;function Oht(e){const t=new Promise((n,r)=>{const i=()=>{e.removeEventListener("success",o),e.removeEventListener("error",s)},o=()=>{n(zp(e.result)),i()},s=()=>{r(e.error),i()};e.addEventListener("success",o),e.addEventListener("error",s)});return t.then(n=>{n instanceof IDBCursor&&Tbe.set(n,e)}).catch(()=>{}),LH.set(t,e),t}function $ht(e){if(n9.has(e))return;const t=new Promise((n,r)=>{const i=()=>{e.removeEventListener("complete",o),e.removeEventListener("error",s),e.removeEventListener("abort",s)},o=()=>{n(),i()},s=()=>{r(e.error||new DOMException("AbortError","AbortError")),i()};e.addEventListener("complete",o),e.addEventListener("error",s),e.addEventListener("abort",s)});n9.set(e,t)}let r9={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return n9.get(e);if(t==="objectStoreNames")return e.objectStoreNames||Sbe.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return zp(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function Mht(e){r9=e(r9)}function Lht(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const r=e.call(N6(this),t,...n);return Sbe.set(r,t.sort?t.sort():[t]),zp(r)}:Dht().includes(e)?function(...t){return e.apply(N6(this),t),zp(Tbe.get(this))}:function(...t){return zp(e.apply(N6(this),t))}}function Fht(e){return typeof e=="function"?Lht(e):(e instanceof IDBTransaction&&$ht(e),Nht(e,Pht())?new Proxy(e,r9):e)}function zp(e){if(e instanceof IDBRequest)return Oht(e);if(R6.has(e))return R6.get(e);const t=Fht(e);return t!==e&&(R6.set(e,t),LH.set(t,e)),t}const N6=e=>LH.get(e);function jht(e,t,{blocked:n,upgrade:r,blocking:i,terminated:o}={}){const s=indexedDB.open(e,t),a=zp(s);return r&&s.addEventListener("upgradeneeded",u=>{r(zp(s.result),u.oldVersion,u.newVersion,zp(s.transaction),u)}),n&&s.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),a.then(u=>{o&&u.addEventListener("close",()=>o()),i&&u.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}const Bht=["get","getKey","getAll","getAllKeys","count"],Uht=["put","add","delete","clear"],P6=new Map;function Xre(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(P6.get(t))return P6.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=Uht.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||Bht.includes(n)))return;const o=async function(s,...a){const u=this.transaction(s,i?"readwrite":"readonly");let l=u.store;return r&&(l=l.index(a.shift())),(await Promise.all([l[n](...a),i&&u.done]))[0]};return P6.set(t,o),o}Mht(e=>({...e,get:(t,n,r)=>Xre(t,n)||e.get(t,n,r),has:(t,n)=>!!Xre(t,n)||e.has(t,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zht{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Vht(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function Vht(e){const t=e.getComponent();return(t==null?void 0:t.type)==="VERSION"}const i9="@firebase/app",Qre="0.10.5";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H0=new GO("@firebase/app"),Hht="@firebase/app-compat",qht="@firebase/analytics-compat",Wht="@firebase/analytics",Ght="@firebase/app-check-compat",Yht="@firebase/app-check",Kht="@firebase/auth",Xht="@firebase/auth-compat",Qht="@firebase/database",Jht="@firebase/database-compat",Zht="@firebase/functions",ept="@firebase/functions-compat",tpt="@firebase/installations",npt="@firebase/installations-compat",rpt="@firebase/messaging",ipt="@firebase/messaging-compat",opt="@firebase/performance",spt="@firebase/performance-compat",apt="@firebase/remote-config",upt="@firebase/remote-config-compat",lpt="@firebase/storage",cpt="@firebase/storage-compat",fpt="@firebase/firestore",dpt="@firebase/vertexai-preview",hpt="@firebase/firestore-compat",ppt="firebase",mpt="10.12.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o9="[DEFAULT]",gpt={[i9]:"fire-core",[Hht]:"fire-core-compat",[Wht]:"fire-analytics",[qht]:"fire-analytics-compat",[Yht]:"fire-app-check",[Ght]:"fire-app-check-compat",[Kht]:"fire-auth",[Xht]:"fire-auth-compat",[Qht]:"fire-rtdb",[Jht]:"fire-rtdb-compat",[Zht]:"fire-fn",[ept]:"fire-fn-compat",[tpt]:"fire-iid",[npt]:"fire-iid-compat",[rpt]:"fire-fcm",[ipt]:"fire-fcm-compat",[opt]:"fire-perf",[spt]:"fire-perf-compat",[apt]:"fire-rc",[upt]:"fire-rc-compat",[lpt]:"fire-gcs",[cpt]:"fire-gcs-compat",[fpt]:"fire-fst",[hpt]:"fire-fst-compat",[dpt]:"fire-vertex","fire-js":"fire-js",[ppt]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DN=new Map,ypt=new Map,s9=new Map;function Jre(e,t){try{e.container.addComponent(t)}catch(n){H0.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function uh(e){const t=e.name;if(s9.has(t))return H0.debug(`There were multiple attempts to register component ${t}.`),!1;s9.set(t,e);for(const n of DN.values())Jre(n,e);for(const n of ypt.values())Jre(n,e);return!0}function z_(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function Qc(e){return e.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vpt={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Vp=new U_("app","Firebase",vpt);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bpt{constructor(t,n,r){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ef("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Vp.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ly=mpt;function Cbe(e,t={}){let n=e;typeof t!="object"&&(t={name:t});const r=Object.assign({name:o9,automaticDataCollectionEnabled:!1},t),i=r.name;if(typeof i!="string"||!i)throw Vp.create("bad-app-name",{appName:String(i)});if(n||(n=Ebe()),!n)throw Vp.create("no-options");const o=DN.get(i);if(o){if(ZT(n,o.options)&&ZT(r,o.config))return o;throw Vp.create("duplicate-app",{appName:i})}const s=new Cht(i);for(const u of s9.values())s.addComponent(u);const a=new bpt(n,r,s);return DN.set(i,a),a}function FH(e=o9){const t=DN.get(e);if(!t&&e===o9&&Ebe())return Cbe();if(!t)throw Vp.create("no-app",{appName:e});return t}function nc(e,t,n){var r;let i=(r=gpt[e])!==null&&r!==void 0?r:e;n&&(i+=`-${n}`);const o=i.match(/\s|\//),s=t.match(/\s|\//);if(o||s){const a=[`Unable to register library "${i}" with version "${t}":`];o&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&s&&a.push("and"),s&&a.push(`version name "${t}" contains illegal characters (whitespace or "/")`),H0.warn(a.join(" "));return}uh(new Ef(`${i}-version`,()=>({library:i,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _pt="firebase-heartbeat-database",wpt=1,eS="firebase-heartbeat-store";let D6=null;function Abe(){return D6||(D6=jht(_pt,wpt,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(eS)}catch(n){console.warn(n)}}}}).catch(e=>{throw Vp.create("idb-open",{originalErrorMessage:e.message})})),D6}async function Ept(e){try{const n=(await Abe()).transaction(eS),r=await n.objectStore(eS).get(kbe(e));return await n.done,r}catch(t){if(t instanceof Vf)H0.warn(t.message);else{const n=Vp.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});H0.warn(n.message)}}}async function Zre(e,t){try{const r=(await Abe()).transaction(eS,"readwrite");await r.objectStore(eS).put(t,kbe(e)),await r.done}catch(n){if(n instanceof Vf)H0.warn(n.message);else{const r=Vp.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});H0.warn(r.message)}}}function kbe(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xpt=1024,Tpt=30*24*60*60*1e3;class Spt{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Apt(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var t,n;const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=eie();if(!(((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(s=>s.date===o)))return this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(s=>{const a=new Date(s.date).valueOf();return Date.now()-a<=Tpt}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var t;if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=eie(),{heartbeatsToSend:r,unsentEntries:i}=Cpt(this._heartbeatsCache.heartbeats),o=PN(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}}function eie(){return new Date().toISOString().substring(0,10)}function Cpt(e,t=xpt){const n=[];let r=e.slice();for(const i of e){const o=n.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),tie(n)>t){o.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),tie(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class Apt{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return MH()?lht().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await Ept(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Zre(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Zre(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...t.heartbeats]})}else return}}function tie(e){return PN(JSON.stringify({version:2,heartbeats:e})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kpt(e){uh(new Ef("platform-logger",t=>new zht(t),"PRIVATE")),uh(new Ef("heartbeat",t=>new Spt(t),"PRIVATE")),nc(i9,Qre,e),nc(i9,Qre,"esm2017"),nc("fire-js","")}kpt("");function Ibe(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Ipt=Ibe,Rbe=new U_("auth","Firebase",Ibe());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ON=new GO("@firebase/auth");function Rpt(e,...t){ON.logLevel<=Cn.WARN&&ON.warn(`Auth (${Ly}): ${e}`,...t)}function Jk(e,...t){ON.logLevel<=Cn.ERROR&&ON.error(`Auth (${Ly}): ${e}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xf(e,...t){throw BH(e,...t)}function rc(e,...t){return BH(e,...t)}function jH(e,t,n){const r=Object.assign(Object.assign({},Ipt()),{[t]:n});return new U_("auth","Firebase",r).create(t,{appName:e.name})}function Hp(e){return jH(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Npt(e,t,n){const r=n;if(!(t instanceof r))throw r.name!==t.constructor.name&&xf(e,"argument-error"),jH(e,"argument-error",`Type of ${t.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function BH(e,...t){if(typeof e!="string"){const n=t[0],r=[...t.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(n,...r)}return Rbe.create(e,...t)}function qt(e,t,...n){if(!e)throw BH(t,...n)}function Id(e){const t="INTERNAL ASSERTION FAILED: "+e;throw Jk(t),new Error(t)}function lh(e,t){e||Id(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a9(){var e;return typeof self<"u"&&((e=self.location)===null||e===void 0?void 0:e.href)||""}function Ppt(){return nie()==="http:"||nie()==="https:"}function nie(){var e;return typeof self<"u"&&((e=self.location)===null||e===void 0?void 0:e.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dpt(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Ppt()||oht()||"connection"in navigator)?navigator.onLine:!0}function Opt(){if(typeof navigator>"u")return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xC{constructor(t,n){this.shortDelay=t,this.longDelay=n,lh(n>t,"Short delay should be less than long delay!"),this.isMobile=rht()||sht()}get(){return Dpt()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UH(e,t){lh(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nbe{static initialize(t,n,r){this.fetchImpl=t,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Id("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Id("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Id("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $pt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mpt=new xC(3e4,6e4);function YO(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function V_(e,t,n,r,i={}){return Pbe(e,i,async()=>{let o={},s={};r&&(t==="GET"?s=r:o={body:JSON.stringify(r)});const a=EC(Object.assign({key:e.config.apiKey},s)).slice(1),u=await e._getAdditionalHeaders();return u["Content-Type"]="application/json",e.languageCode&&(u["X-Firebase-Locale"]=e.languageCode),Nbe.fetch()(Obe(e,e.config.apiHost,n,a),Object.assign({method:t,headers:u,referrerPolicy:"no-referrer"},o))})}async function Pbe(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},$pt),t);try{const i=new Lpt(e),o=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const s=await o.json();if("needConfirmation"in s)throw O2(e,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{const a=o.ok?s.errorMessage:s.error.message,[u,l]=a.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw O2(e,"credential-already-in-use",s);if(u==="EMAIL_EXISTS")throw O2(e,"email-already-in-use",s);if(u==="USER_DISABLED")throw O2(e,"user-disabled",s);const c=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw jH(e,c,l);xf(e,c)}}catch(i){if(i instanceof Vf)throw i;xf(e,"network-request-failed",{message:String(i)})}}async function Dbe(e,t,n,r,i={}){const o=await V_(e,t,n,r,i);return"mfaPendingCredential"in o&&xf(e,"multi-factor-auth-required",{_serverResponse:o}),o}function Obe(e,t,n,r){const i=`${t}${n}?${r}`;return e.config.emulator?UH(e.config,i):`${e.config.apiScheme}://${i}`}class Lpt{constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(rc(this.auth,"network-request-failed")),Mpt.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function O2(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=rc(e,t,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fpt(e,t){return V_(e,"POST","/v1/accounts:delete",t)}async function $be(e,t){return V_(e,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jx(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function jpt(e,t=!1){const n=Sr(e),r=await n.getIdToken(t),i=zH(r);qt(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const o=typeof i.firebase=="object"?i.firebase:void 0,s=o==null?void 0:o.sign_in_provider;return{claims:i,token:r,authTime:jx(O6(i.auth_time)),issuedAtTime:jx(O6(i.iat)),expirationTime:jx(O6(i.exp)),signInProvider:s||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function O6(e){return Number(e)*1e3}function zH(e){const[t,n,r]=e.split(".");if(t===void 0||n===void 0||r===void 0)return Jk("JWT malformed, contained fewer than 3 sections"),null;try{const i=bbe(n);return i?JSON.parse(i):(Jk("Failed to decode base64 JWT payload"),null)}catch(i){return Jk("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function rie(e){const t=zH(e);return qt(t,"internal-error"),qt(typeof t.exp<"u","internal-error"),qt(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tS(e,t,n=!1){if(n)return t;try{return await t}catch(r){throw r instanceof Vf&&Bpt(r)&&e.auth.currentUser===e&&await e.auth.signOut(),r}}function Bpt({code:e}){return e==="auth/user-disabled"||e==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Upt{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){var n;if(t){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(t=!1){if(!this.isRunning)return;const n=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){(t==null?void 0:t.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u9{constructor(t,n){this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=jx(this.lastLoginAt),this.creationTime=jx(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $N(e){var t;const n=e.auth,r=await e.getIdToken(),i=await tS(e,$be(n,{idToken:r}));qt(i==null?void 0:i.users.length,n,"internal-error");const o=i.users[0];e._notifyReloadListener(o);const s=!((t=o.providerUserInfo)===null||t===void 0)&&t.length?Mbe(o.providerUserInfo):[],a=Vpt(e.providerData,s),u=e.isAnonymous,l=!(e.email&&o.passwordHash)&&!(a!=null&&a.length),c=u?l:!1,f={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new u9(o.createdAt,o.lastLoginAt),isAnonymous:c};Object.assign(e,f)}async function zpt(e){const t=Sr(e);await $N(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function Vpt(e,t){return[...e.filter(r=>!t.some(i=>i.providerId===r.providerId)),...t]}function Mbe(e){return e.map(t=>{var{providerId:n}=t,r=zS(t,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hpt(e,t){const n=await Pbe(e,{},async()=>{const r=EC({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:i,apiKey:o}=e.config,s=Obe(e,i,"/v1/token",`key=${o}`),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",Nbe.fetch()(s,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function qpt(e,t){return V_(e,"POST","/v2/accounts:revokeToken",YO(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F1{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){qt(t.idToken,"internal-error"),qt(typeof t.idToken<"u","internal-error"),qt(typeof t.refreshToken<"u","internal-error");const n="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):rie(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,n)}updateFromIdToken(t){qt(t.length!==0,"internal-error");const n=rie(t);this.updateTokensAndExpiration(t,null,n)}async getToken(t,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(qt(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,n){const{accessToken:r,refreshToken:i,expiresIn:o}=await Hpt(t,n);this.updateTokensAndExpiration(r,i,Number(o))}updateTokensAndExpiration(t,n,r){this.refreshToken=n||null,this.accessToken=t||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(t,n){const{refreshToken:r,accessToken:i,expirationTime:o}=n,s=new F1;return r&&(qt(typeof r=="string","internal-error",{appName:t}),s.refreshToken=r),i&&(qt(typeof i=="string","internal-error",{appName:t}),s.accessToken=i),o&&(qt(typeof o=="number","internal-error",{appName:t}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new F1,this.toJSON())}_performRefresh(){return Id("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uh(e,t){qt(typeof e=="string"||typeof e>"u","internal-error",{appName:t})}class Rd{constructor(t){var{uid:n,auth:r,stsTokenManager:i}=t,o=zS(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Upt(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new u9(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(t){const n=await tS(this,this.stsTokenManager.getToken(this.auth,t));return qt(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(t){return jpt(this,t)}reload(){return zpt(this)}_assign(t){this!==t&&(qt(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(n=>Object.assign({},n)),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const n=new Rd(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(t){qt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,n=!1){let r=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),n&&await $N(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Qc(this.auth.app))return Promise.reject(Hp(this.auth));const t=await this.getIdToken();return await tS(this,Fpt(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>Object.assign({},t)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,n){var r,i,o,s,a,u,l,c;const f=(r=n.displayName)!==null&&r!==void 0?r:void 0,d=(i=n.email)!==null&&i!==void 0?i:void 0,h=(o=n.phoneNumber)!==null&&o!==void 0?o:void 0,p=(s=n.photoURL)!==null&&s!==void 0?s:void 0,m=(a=n.tenantId)!==null&&a!==void 0?a:void 0,g=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,y=(l=n.createdAt)!==null&&l!==void 0?l:void 0,v=(c=n.lastLoginAt)!==null&&c!==void 0?c:void 0,{uid:_,emailVerified:w,isAnonymous:E,providerData:S,stsTokenManager:T}=n;qt(_&&T,t,"internal-error");const C=F1.fromJSON(this.name,T);qt(typeof _=="string",t,"internal-error"),Uh(f,t.name),Uh(d,t.name),qt(typeof w=="boolean",t,"internal-error"),qt(typeof E=="boolean",t,"internal-error"),Uh(h,t.name),Uh(p,t.name),Uh(m,t.name),Uh(g,t.name),Uh(y,t.name),Uh(v,t.name);const A=new Rd({uid:_,auth:t,email:d,emailVerified:w,displayName:f,isAnonymous:E,photoURL:p,phoneNumber:h,tenantId:m,stsTokenManager:C,createdAt:y,lastLoginAt:v});return S&&Array.isArray(S)&&(A.providerData=S.map(R=>Object.assign({},R))),g&&(A._redirectEventId=g),A}static async _fromIdTokenResponse(t,n,r=!1){const i=new F1;i.updateFromServerResponse(n);const o=new Rd({uid:n.localId,auth:t,stsTokenManager:i,isAnonymous:r});return await $N(o),o}static async _fromGetAccountInfoResponse(t,n,r){const i=n.users[0];qt(i.localId!==void 0,"internal-error");const o=i.providerUserInfo!==void 0?Mbe(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!(o!=null&&o.length),a=new F1;a.updateFromIdToken(r);const u=new Rd({uid:i.localId,auth:t,stsTokenManager:a,isAnonymous:s}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new u9(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(o!=null&&o.length)};return Object.assign(u,l),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iie=new Map;function Nd(e){lh(e instanceof Function,"Expected a class definition");let t=iie.get(e);return t?(lh(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,iie.set(e,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lbe{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,n){this.storage[t]=n}async _get(t){const n=this.storage[t];return n===void 0?null:n}async _remove(t){delete this.storage[t]}_addListener(t,n){}_removeListener(t,n){}}Lbe.type="NONE";const oie=Lbe;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zk(e,t,n){return`firebase:${e}:${t}:${n}`}class j1{constructor(t,n,r){this.persistence=t,this.auth=n,this.userKey=r;const{config:i,name:o}=this.auth;this.fullUserKey=Zk(this.userKey,i.apiKey,o),this.fullPersistenceKey=Zk("persistence",i.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);return t?Rd._fromJSON(this.auth,t):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,n,r="authUser"){if(!n.length)return new j1(Nd(oie),t,r);const i=(await Promise.all(n.map(async l=>{if(await l._isAvailable())return l}))).filter(l=>l);let o=i[0]||Nd(oie);const s=Zk(r,t.config.apiKey,t.name);let a=null;for(const l of n)try{const c=await l._get(s);if(c){const f=Rd._fromJSON(t,c);l!==o&&(a=f),o=l;break}}catch{}const u=i.filter(l=>l._shouldAllowMigration);return!o._shouldAllowMigration||!u.length?new j1(o,t,r):(o=u[0],a&&await o._set(s,a.toJSON()),await Promise.all(n.map(async l=>{if(l!==o)try{await l._remove(s)}catch{}})),new j1(o,t,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sie(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(Bbe(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Fbe(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(zbe(t))return"Blackberry";if(Vbe(t))return"Webos";if(VH(t))return"Safari";if((t.includes("chrome/")||jbe(t))&&!t.includes("edge/"))return"Chrome";if(Ube(t))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=e.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function Fbe(e=Uo()){return/firefox\//i.test(e)}function VH(e=Uo()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function jbe(e=Uo()){return/crios\//i.test(e)}function Bbe(e=Uo()){return/iemobile/i.test(e)}function Ube(e=Uo()){return/android/i.test(e)}function zbe(e=Uo()){return/blackberry/i.test(e)}function Vbe(e=Uo()){return/webos/i.test(e)}function KO(e=Uo()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function Wpt(e=Uo()){var t;return KO(e)&&!!(!((t=window.navigator)===null||t===void 0)&&t.standalone)}function Gpt(){return aht()&&document.documentMode===10}function Hbe(e=Uo()){return KO(e)||Ube(e)||Vbe(e)||zbe(e)||/windows phone/i.test(e)||Bbe(e)}function Ypt(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qbe(e,t=[]){let n;switch(e){case"Browser":n=sie(Uo());break;case"Worker":n=`${sie(Uo())}-${e}`;break;default:n=e}const r=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${Ly}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kpt{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,n){const r=o=>new Promise((s,a)=>{try{const u=t(o);s(u)}catch(u){a(u)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const n=[];try{for(const r of this.queue)await r(t),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xpt(e,t={}){return V_(e,"GET","/v2/passwordPolicy",YO(e,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qpt=6;class Jpt{constructor(t){var n,r,i,o;const s=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=s.minPasswordLength)!==null&&n!==void 0?n:Qpt,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),s.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),s.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),s.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),s.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=t.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(o=t.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=t.schemaVersion}validatePassword(t){var n,r,i,o,s,a;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,u),this.validatePasswordCharacterOptions(t,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(o=u.containsUppercaseLetter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(s=u.containsNumericCharacter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(a=u.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),u}validatePasswordLengthOptions(t,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=t.length>=r),i&&(n.meetsMaxPasswordLength=t.length<=i)}validatePasswordCharacterOptions(t,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<t.length;i++)r=t.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(t,n,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zpt{constructor(t,n,r,i){this.app=t,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new aie(this),this.idTokenSubscription=new aie(this),this.beforeStateQueue=new Kpt(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Rbe,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(t,n){return n&&(this._popupRedirectResolver=Nd(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await j1.create(this,t),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const n=await $be(this,{idToken:t}),r=await Rd._fromGetAccountInfoResponse(this,n,t);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){var n;if(Qc(this.app)){const s=this.app.settings.authIdToken;return s?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,o=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const s=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,u=await this.tryRedirectSignIn(t);(!s||s===a)&&(u!=null&&u.user)&&(i=u.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(i)}catch(s){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return qt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(t){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(t){try{await $N(t)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=Opt()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(Qc(this.app))return Promise.reject(Hp(this));const n=t?Sr(t):null;return n&&qt(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(t,n=!1){if(!this._deleted)return t&&qt(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return Qc(this.app)?Promise.reject(Hp(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return Qc(this.app)?Promise.reject(Hp(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Nd(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await Xpt(this),n=new Jpt(t);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(t){this._errorFactory=new U_("auth","Firebase",t())}onAuthStateChanged(t,n,r){return this.registerStateListener(this.authStateSubscription,t,n,r)}beforeAuthStateChanged(t,n){return this.beforeStateQueue.pushCallback(t,n)}onIdTokenChanged(t,n,r){return this.registerStateListener(this.idTokenSubscription,t,n,r)}authStateReady(){return new Promise((t,n)=>{if(this.currentUser)t();else{const r=this.onAuthStateChanged(()=>{r(),t()},n)}})}async revokeAccessToken(t){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await qpt(this,r)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)===null||t===void 0?void 0:t.toJSON()}}async _setRedirectUser(t,n){const r=await this.getOrInitRedirectPersistenceManager(n);return t===null?r.removeCurrentUser():r.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const n=t&&Nd(t)||this._popupRedirectResolver;qt(n,this,"argument-error"),this.redirectPersistenceManager=await j1.create(this,[Nd(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===t?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(t=this.currentUser)===null||t===void 0?void 0:t.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,n,r,i){if(this._deleted)return()=>{};const o=typeof n=="function"?n:n.next.bind(n);let s=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(qt(a,this,"internal-error"),a.then(()=>{s||o(this.currentUser)}),typeof n=="function"){const u=t.addObserver(n,r,i);return()=>{s=!0,u()}}else{const u=t.addObserver(n);return()=>{s=!0,u()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return qt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=qbe(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var t;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((t=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var t;const n=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getToken());return n!=null&&n.error&&Rpt(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function TC(e){return Sr(e)}class aie{constructor(t){this.auth=t,this.observer=null,this.addObserver=pht(n=>this.observer=n)}get next(){return qt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let HH={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function emt(e){HH=e}function tmt(e){return HH.loadJS(e)}function nmt(){return HH.gapiScript}function rmt(e){return`__${e}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function imt(e,t){const n=z_(e,"auth");if(n.isInitialized()){const i=n.getImmediate(),o=n.getOptions();if(ZT(o,t??{}))return i;xf(i,"already-initialized")}return n.initialize({options:t})}function omt(e,t){const n=(t==null?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Nd);t!=null&&t.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,t==null?void 0:t.popupRedirectResolver)}function smt(e,t,n){const r=TC(e);qt(r._canInitEmulator,r,"emulator-config-failed"),qt(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!1,o=Wbe(t),{host:s,port:a}=amt(t),u=a===null?"":`:${a}`;r.config.emulator={url:`${o}//${s}${u}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:s,port:a,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})}),umt()}function Wbe(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function amt(e){const t=Wbe(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const o=i[1];return{host:o,port:uie(r.substr(o.length+1))}}else{const[o,s]=r.split(":");return{host:o,port:uie(s)}}}function uie(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}function umt(){function e(){const t=document.createElement("p"),n=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",e):e())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gbe{constructor(t,n){this.providerId=t,this.signInMethod=n}toJSON(){return Id("not implemented")}_getIdTokenResponse(t){return Id("not implemented")}_linkToIdToken(t,n){return Id("not implemented")}_getReauthenticationResolver(t){return Id("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function B1(e,t){return Dbe(e,"POST","/v1/accounts:signInWithIdp",YO(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lmt="http://localhost";class q0 extends Gbe{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const n=new q0(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(n.idToken=t.idToken),t.accessToken&&(n.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(n.nonce=t.nonce),t.pendingToken&&(n.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(n.accessToken=t.oauthToken,n.secret=t.oauthTokenSecret):xf("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t,{providerId:r,signInMethod:i}=n,o=zS(n,["providerId","signInMethod"]);if(!r||!i)return null;const s=new q0(r,i);return s.idToken=o.idToken||void 0,s.accessToken=o.accessToken||void 0,s.secret=o.secret,s.nonce=o.nonce,s.pendingToken=o.pendingToken||null,s}_getIdTokenResponse(t){const n=this.buildRequest();return B1(t,n)}_linkToIdToken(t,n){const r=this.buildRequest();return r.idToken=n,B1(t,r)}_getReauthenticationResolver(t){const n=this.buildRequest();return n.autoCreate=!1,B1(t,n)}buildRequest(){const t={requestUri:lmt,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),t.postBody=EC(n)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qH{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SC extends qH{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ap extends SC{constructor(){super("facebook.com")}static credential(t){return q0._fromParams({providerId:ap.PROVIDER_ID,signInMethod:ap.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return ap.credentialFromTaggedObject(t)}static credentialFromError(t){return ap.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return ap.credential(t.oauthAccessToken)}catch{return null}}}ap.FACEBOOK_SIGN_IN_METHOD="facebook.com";ap.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wd extends SC{constructor(){super("google.com"),this.addScope("profile")}static credential(t,n){return q0._fromParams({providerId:wd.PROVIDER_ID,signInMethod:wd.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:n})}static credentialFromResult(t){return wd.credentialFromTaggedObject(t)}static credentialFromError(t){return wd.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return wd.credential(n,r)}catch{return null}}}wd.GOOGLE_SIGN_IN_METHOD="google.com";wd.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class up extends SC{constructor(){super("github.com")}static credential(t){return q0._fromParams({providerId:up.PROVIDER_ID,signInMethod:up.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return up.credentialFromTaggedObject(t)}static credentialFromError(t){return up.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return up.credential(t.oauthAccessToken)}catch{return null}}}up.GITHUB_SIGN_IN_METHOD="github.com";up.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lp extends SC{constructor(){super("twitter.com")}static credential(t,n){return q0._fromParams({providerId:lp.PROVIDER_ID,signInMethod:lp.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:n})}static credentialFromResult(t){return lp.credentialFromTaggedObject(t)}static credentialFromError(t){return lp.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return lp.credential(n,r)}catch{return null}}}lp.TWITTER_SIGN_IN_METHOD="twitter.com";lp.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cmt(e,t){return Dbe(e,"POST","/v1/accounts:signUp",YO(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hm{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,n,r,i=!1){const o=await Rd._fromIdTokenResponse(t,r,i),s=lie(r);return new hm({user:o,providerId:s,_tokenResponse:r,operationType:n})}static async _forOperation(t,n,r){await t._updateTokensIfNecessary(r,!0);const i=lie(r);return new hm({user:t,providerId:i,_tokenResponse:r,operationType:n})}}function lie(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fmt(e){var t;if(Qc(e.app))return Promise.reject(Hp(e));const n=TC(e);if(await n._initializationPromise,!((t=n.currentUser)===null||t===void 0)&&t.isAnonymous)return new hm({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await cmt(n,{returnSecureToken:!0}),i=await hm._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MN extends Vf{constructor(t,n,r,i){var o;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,MN.prototype),this.customData={appName:t.name,tenantId:(o=t.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(t,n,r,i){return new MN(t,n,r,i)}}function Ybe(e,t,n,r){return(t==="reauthenticate"?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?MN._fromErrorAndOperation(e,o,t,r):o})}async function dmt(e,t,n=!1){const r=await tS(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return hm._forOperation(e,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hmt(e,t,n=!1){const{auth:r}=e;if(Qc(r.app))return Promise.reject(Hp(r));const i="reauthenticate";try{const o=await tS(e,Ybe(r,i,t,e),n);qt(o.idToken,r,"internal-error");const s=zH(o.idToken);qt(s,r,"internal-error");const{sub:a}=s;return qt(e.uid===a,r,"user-mismatch"),hm._forOperation(e,i,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&xf(r,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pmt(e,t,n=!1){if(Qc(e.app))return Promise.reject(Hp(e));const r="signIn",i=await Ybe(e,r,t),o=await hm._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(o.user),o}function mmt(e,t,n,r){return Sr(e).onIdTokenChanged(t,n,r)}function gmt(e,t,n){return Sr(e).beforeAuthStateChanged(t,n)}function ymt(e,t,n,r){return Sr(e).onAuthStateChanged(t,n,r)}function vmt(e){return Sr(e).signOut()}const LN="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kbe{constructor(t,n){this.storageRetriever=t,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(LN,"1"),this.storage.removeItem(LN),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,n){return this.storage.setItem(t,JSON.stringify(n)),Promise.resolve()}_get(t){const n=this.storage.getItem(t);return Promise.resolve(n?JSON.parse(n):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bmt(){const e=Uo();return VH(e)||KO(e)}const _mt=1e3,wmt=10;class Xbe extends Kbe{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,n)=>this.onStorageEvent(t,n),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=bmt()&&Ypt(),this.fallbackToPolling=Hbe(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&t(n,i,r)}}onStorageEvent(t,n=!1){if(!t.key){this.forAllChangedKeys((s,a,u)=>{this.notifyListeners(s,u)});return}const r=t.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const s=this.storage.getItem(r);if(t.newValue!==s)t.newValue!==null?this.storage.setItem(r,t.newValue):this.storage.removeItem(r);else if(this.localCache[r]===t.newValue&&!n)return}const i=()=>{const s=this.storage.getItem(r);!n&&this.localCache[r]===s||this.notifyListeners(r,s)},o=this.storage.getItem(r);Gpt()&&o!==t.newValue&&t.newValue!==t.oldValue?setTimeout(i,wmt):i()}notifyListeners(t,n){this.localCache[t]=n;const r=this.listeners[t];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)})},_mt)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,n){await super._set(t,n),this.localCache[t]=JSON.stringify(n)}async _get(t){const n=await super._get(t);return this.localCache[t]=JSON.stringify(n),n}async _remove(t){await super._remove(t),delete this.localCache[t]}}Xbe.type="LOCAL";const Emt=Xbe;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qbe extends Kbe{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,n){}_removeListener(t,n){}}Qbe.type="SESSION";const Jbe=Qbe;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xmt(e){return Promise.all(e.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XO{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const n=this.receivers.find(i=>i.isListeningto(t));if(n)return n;const r=new XO(t);return this.receivers.push(r),r}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const n=t,{eventId:r,eventType:i,data:o}=n.data,s=this.handlersMap[i];if(!(s!=null&&s.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(s).map(async l=>l(n.origin,o)),u=await xmt(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:u})}_subscribe(t,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(n)}_unsubscribe(t,n){this.handlersMap[t]&&n&&this.handlersMap[t].delete(n),(!n||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}XO.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WH(e="",t=10){let n="";for(let r=0;r<t;r++)n+=Math.floor(Math.random()*10);return e+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tmt{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,s;return new Promise((a,u)=>{const l=WH("",20);i.port1.start();const c=setTimeout(()=>{u(new Error("unsupported_event"))},r);s={messageChannel:i,onMessage(f){const d=f;if(d.data.eventId===l)switch(d.data.status){case"ack":clearTimeout(c),o=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),a(d.data.response);break;default:clearTimeout(c),clearTimeout(o),u(new Error("invalid_response"));break}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:t,eventId:l,data:n},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ff(){return window}function Smt(e){ff().location.href=e}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zbe(){return typeof ff().WorkerGlobalScope<"u"&&typeof ff().importScripts=="function"}async function Cmt(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Amt(){var e;return((e=navigator==null?void 0:navigator.serviceWorker)===null||e===void 0?void 0:e.controller)||null}function kmt(){return Zbe()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e_e="firebaseLocalStorageDb",Imt=1,FN="firebaseLocalStorage",t_e="fbase_key";class CC{constructor(t){this.request=t}toPromise(){return new Promise((t,n)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function QO(e,t){return e.transaction([FN],t?"readwrite":"readonly").objectStore(FN)}function Rmt(){const e=indexedDB.deleteDatabase(e_e);return new CC(e).toPromise()}function l9(){const e=indexedDB.open(e_e,Imt);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const r=e.result;try{r.createObjectStore(FN,{keyPath:t_e})}catch(i){n(i)}}),e.addEventListener("success",async()=>{const r=e.result;r.objectStoreNames.contains(FN)?t(r):(r.close(),await Rmt(),t(await l9()))})})}async function cie(e,t,n){const r=QO(e,!0).put({[t_e]:t,value:n});return new CC(r).toPromise()}async function Nmt(e,t){const n=QO(e,!1).get(t),r=await new CC(n).toPromise();return r===void 0?null:r.value}function fie(e,t){const n=QO(e,!0).delete(t);return new CC(n).toPromise()}const Pmt=800,Dmt=3;class n_e{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await l9(),this.db)}async _withRetries(t){let n=0;for(;;)try{const r=await this._openDb();return await t(r)}catch(r){if(n++>Dmt)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Zbe()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=XO._getInstance(kmt()),this.receiver._subscribe("keyChanged",async(t,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(t,n)=>["keyChanged"])}async initializeSender(){var t,n;if(this.activeServiceWorker=await Cmt(),!this.activeServiceWorker)return;this.sender=new Tmt(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((t=r[0])===null||t===void 0)&&t.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||Amt()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await l9();return await cie(t,LN,"1"),await fie(t,LN),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>cie(r,t,n)),this.localCache[t]=n,this.notifyServiceWorker(t)))}async _get(t){const n=await this._withRetries(r=>Nmt(r,t));return this.localCache[t]=n,n}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(n=>fie(n,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(i=>{const o=QO(i,!1).getAll();return new CC(o).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(t.length!==0)for(const{fbase_key:i,value:o}of t)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(o)&&(this.notifyListeners(i,o),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(t,n){this.localCache[t]=n;const r=this.listeners[t];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Pmt)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}n_e.type="LOCAL";const Omt=n_e;new xC(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r_e(e,t){return t?Nd(t):(qt(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GH extends Gbe{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return B1(t,this._buildIdpRequest())}_linkToIdToken(t,n){return B1(t,this._buildIdpRequest(n))}_getReauthenticationResolver(t){return B1(t,this._buildIdpRequest())}_buildIdpRequest(t){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(n.idToken=t),n}}function $mt(e){return pmt(e.auth,new GH(e),e.bypassAuthState)}function Mmt(e){const{auth:t,user:n}=e;return qt(n,t,"internal-error"),hmt(n,new GH(e),e.bypassAuthState)}async function Lmt(e){const{auth:t,user:n}=e;return qt(n,t,"internal-error"),dmt(n,new GH(e),e.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i_e{constructor(t,n,r,i,o=!1){this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(t,n)=>{this.pendingPromise={resolve:t,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(t){const{urlResponse:n,sessionId:r,postBody:i,tenantId:o,error:s,type:a}=t;if(s){this.reject(s);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(u))}catch(l){this.reject(l)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return $mt;case"linkViaPopup":case"linkViaRedirect":return Lmt;case"reauthViaPopup":case"reauthViaRedirect":return Mmt;default:xf(this.auth,"internal-error")}}resolve(t){lh(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){lh(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fmt=new xC(2e3,1e4);async function jmt(e,t,n){if(Qc(e.app))return Promise.reject(rc(e,"operation-not-supported-in-this-environment"));const r=TC(e);Npt(e,t,qH);const i=r_e(r,n);return new o0(r,"signInViaPopup",t,i).executeNotNull()}class o0 extends i_e{constructor(t,n,r,i,o){super(t,n,i,o),this.provider=r,this.authWindow=null,this.pollId=null,o0.currentPopupAction&&o0.currentPopupAction.cancel(),o0.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return qt(t,this.auth,"internal-error"),t}async onExecution(){lh(this.filter.length===1,"Popup operations only handle one event");const t=WH();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(rc(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)===null||t===void 0?void 0:t.associatedEvent)||null}cancel(){this.reject(rc(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,o0.currentPopupAction=null}pollUserCancellation(){const t=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(rc(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,Fmt.get())};t()}}o0.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bmt="pendingRedirect",eI=new Map;class Umt extends i_e{constructor(t,n,r=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let t=eI.get(this.auth._key());if(!t){try{const r=await zmt(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(r)}catch(n){t=()=>Promise.reject(n)}eI.set(this.auth._key(),t)}return this.bypassAuthState||eI.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const n=await this.auth._redirectUserForId(t.eventId);if(n)return this.user=n,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function zmt(e,t){const n=qmt(t),r=Hmt(e);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function Vmt(e,t){eI.set(e._key(),t)}function Hmt(e){return Nd(e._redirectPersistence)}function qmt(e){return Zk(Bmt,e.config.apiKey,e.name)}async function Wmt(e,t,n=!1){if(Qc(e.app))return Promise.reject(Hp(e));const r=TC(e),i=r_e(r,t),s=await new Umt(r,i,n).execute();return s&&!n&&(delete s.user._redirectEventId,await r._persistUserIfCurrent(s.user),await r._setRedirectUser(null,t)),s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gmt=10*60*1e3;class Ymt{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(t,r)&&(n=!0,this.sendToConsumer(t,r),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!Kmt(t)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=t,n=!0)),n}sendToConsumer(t,n){var r;if(t.error&&!o_e(t)){const i=((r=t.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(rc(this.auth,i))}else n.onAuthEvent(t)}isEventForConsumer(t,n){const r=n.eventId===null||!!t.eventId&&t.eventId===n.eventId;return n.filter.includes(t.type)&&r}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=Gmt&&this.cachedEventUids.clear(),this.cachedEventUids.has(die(t))}saveEventToCache(t){this.cachedEventUids.add(die(t)),this.lastProcessedEventTime=Date.now()}}function die(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(t=>t).join("-")}function o_e({type:e,error:t}){return e==="unknown"&&(t==null?void 0:t.code)==="auth/no-auth-event"}function Kmt(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return o_e(e);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xmt(e,t={}){return V_(e,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qmt=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Jmt=/^https?/;async function Zmt(e){if(e.config.emulator)return;const{authorizedDomains:t}=await Xmt(e);for(const n of t)try{if(egt(n))return}catch{}xf(e,"unauthorized-domain")}function egt(e){const t=a9(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const s=new URL(e);return s.hostname===""&&r===""?n==="chrome-extension:"&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):n==="chrome-extension:"&&s.hostname===r}if(!Jmt.test(n))return!1;if(Qmt.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tgt=new xC(3e4,6e4);function hie(){const e=ff().___jsl;if(e!=null&&e.H){for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}}function ngt(e){return new Promise((t,n)=>{var r,i,o;function s(){hie(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{hie(),n(rc(e,"network-request-failed"))},timeout:tgt.get()})}if(!((i=(r=ff().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)t(gapi.iframes.getContext());else if(!((o=ff().gapi)===null||o===void 0)&&o.load)s();else{const a=rmt("iframefcb");return ff()[a]=()=>{gapi.load?s():n(rc(e,"network-request-failed"))},tmt(`${nmt()}?onload=${a}`).catch(u=>n(u))}}).catch(t=>{throw tI=null,t})}let tI=null;function rgt(e){return tI=tI||ngt(e),tI}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const igt=new xC(5e3,15e3),ogt="__/auth/iframe",sgt="emulator/auth/iframe",agt={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},ugt=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function lgt(e){const t=e.config;qt(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?UH(t,sgt):`https://${e.config.authDomain}/${ogt}`,r={apiKey:t.apiKey,appName:e.name,v:Ly},i=ugt.get(e.config.apiHost);i&&(r.eid=i);const o=e._getFrameworks();return o.length&&(r.fw=o.join(",")),`${n}?${EC(r).slice(1)}`}async function cgt(e){const t=await rgt(e),n=ff().gapi;return qt(n,e,"internal-error"),t.open({where:document.body,url:lgt(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:agt,dontclear:!0},r=>new Promise(async(i,o)=>{await r.restyle({setHideOnLeave:!1});const s=rc(e,"network-request-failed"),a=ff().setTimeout(()=>{o(s)},igt.get());function u(){ff().clearTimeout(a),i(r)}r.ping(u).then(u,()=>{o(s)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fgt={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},dgt=500,hgt=600,pgt="_blank",mgt="http://localhost";class pie{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function ggt(e,t,n,r=dgt,i=hgt){const o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const u=Object.assign(Object.assign({},fgt),{width:r.toString(),height:i.toString(),top:o,left:s}),l=Uo().toLowerCase();n&&(a=jbe(l)?pgt:n),Fbe(l)&&(t=t||mgt,u.scrollbars="yes");const c=Object.entries(u).reduce((d,[h,p])=>`${d}${h}=${p},`,"");if(Wpt(l)&&a!=="_self")return ygt(t||"",a),new pie(null);const f=window.open(t||"",a,c);qt(f,e,"popup-blocked");try{f.focus()}catch{}return new pie(f)}function ygt(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vgt="__/auth/handler",bgt="emulator/auth/handler",_gt=encodeURIComponent("fac");async function mie(e,t,n,r,i,o){qt(e.config.authDomain,e,"auth-domain-config-required"),qt(e.config.apiKey,e,"invalid-api-key");const s={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:Ly,eventId:i};if(t instanceof qH){t.setDefaultLanguage(e.languageCode),s.providerId=t.providerId||"",hht(t.getCustomParameters())||(s.customParameters=JSON.stringify(t.getCustomParameters()));for(const[c,f]of Object.entries({}))s[c]=f}if(t instanceof SC){const c=t.getScopes().filter(f=>f!=="");c.length>0&&(s.scopes=c.join(","))}e.tenantId&&(s.tid=e.tenantId);const a=s;for(const c of Object.keys(a))a[c]===void 0&&delete a[c];const u=await e._getAppCheckToken(),l=u?`#${_gt}=${encodeURIComponent(u)}`:"";return`${wgt(e)}?${EC(a).slice(1)}${l}`}function wgt({config:e}){return e.emulator?UH(e,bgt):`https://${e.authDomain}/${vgt}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $6="webStorageSupport";class Egt{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Jbe,this._completeRedirectFn=Wmt,this._overrideRedirectResult=Vmt}async _openPopup(t,n,r,i){var o;lh((o=this.eventManagers[t._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");const s=await mie(t,n,r,a9(),i);return ggt(t,s,WH())}async _openRedirect(t,n,r,i){await this._originValidation(t);const o=await mie(t,n,r,a9(),i);return Smt(o),new Promise(()=>{})}_initialize(t){const n=t._key();if(this.eventManagers[n]){const{manager:i,promise:o}=this.eventManagers[n];return i?Promise.resolve(i):(lh(o,"If manager is not set, promise should be"),o)}const r=this.initAndGetManager(t);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(t){const n=await cgt(t),r=new Ymt(t);return n.register("authEvent",i=>(qt(i==null?void 0:i.authEvent,t,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,r}_isIframeWebStorageSupported(t,n){this.iframes[t._key()].send($6,{type:$6},i=>{var o;const s=(o=i==null?void 0:i[0])===null||o===void 0?void 0:o[$6];s!==void 0&&n(!!s),xf(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const n=t._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=Zmt(t)),this.originValidationPromises[n]}get _shouldInitProactively(){return Hbe()||VH()||KO()}}const s_e=Egt;var gie="@firebase/auth",yie="1.7.4";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xgt{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)===null||t===void 0?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const n=this.auth.onIdTokenChanged(r=>{t((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(t,n),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const n=this.internalListeners.get(t);n&&(this.internalListeners.delete(t),n(),this.updateProactiveRefresh())}assertAuthConfigured(){qt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tgt(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Sgt(e){uh(new Ef("auth",(t,{options:n})=>{const r=t.getProvider("app").getImmediate(),i=t.getProvider("heartbeat"),o=t.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=r.options;qt(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:s,authDomain:a,clientPlatform:e,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:qbe(e)},l=new Zpt(r,i,o,u);return omt(l,n),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,n,r)=>{t.getProvider("auth-internal").initialize()})),uh(new Ef("auth-internal",t=>{const n=TC(t.getProvider("auth").getImmediate());return(r=>new xgt(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),nc(gie,yie,Tgt(e)),nc(gie,yie,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cgt=5*60,Agt=xbe("authIdTokenMaxAge")||Cgt;let vie=null;const kgt=e=>async t=>{const n=t&&await t.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>Agt)return;const i=n==null?void 0:n.token;vie!==i&&(vie=i,await fetch(e,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function jN(e=FH()){const t=z_(e,"auth");if(t.isInitialized())return t.getImmediate();const n=imt(e,{popupRedirectResolver:s_e,persistence:[Omt,Emt,Jbe]}),r=xbe("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(r,location.origin);if(location.origin===o.origin){const s=kgt(o.toString());gmt(n,s,()=>s(n.currentUser)),mmt(n,a=>s(a))}}const i=wbe("auth");return i&&smt(n,`http://${i}`),n}function Igt(){var e,t;return(t=(e=document.getElementsByTagName("head"))===null||e===void 0?void 0:e[0])!==null&&t!==void 0?t:document}emt({loadJS(e){return new Promise((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=i=>{const o=rc("internal-error");o.customData=i,n(o)},r.type="text/javascript",r.charset="UTF-8",Igt().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Sgt("Browser");var Rgt="firebase",Ngt="10.12.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */nc(Rgt,Ngt,"app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a_e="firebasestorage.googleapis.com",u_e="storageBucket",Pgt=2*60*1e3,Dgt=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hi extends Vf{constructor(t,n,r=0){super(M6(t),`Firebase Storage: ${n} (${M6(t)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,hi.prototype)}get status(){return this.status_}set status(t){this.status_=t}_codeEquals(t){return M6(t)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(t){this.customData.serverResponse=t,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var di;(function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(di||(di={}));function M6(e){return"storage/"+e}function YH(){const e="An unknown error occurred, please check the error payload for server response.";return new hi(di.UNKNOWN,e)}function Ogt(e){return new hi(di.OBJECT_NOT_FOUND,"Object '"+e+"' does not exist.")}function $gt(e){return new hi(di.QUOTA_EXCEEDED,"Quota for bucket '"+e+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function Mgt(){const e="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new hi(di.UNAUTHENTICATED,e)}function Lgt(){return new hi(di.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function Fgt(e){return new hi(di.UNAUTHORIZED,"User does not have permission to access '"+e+"'.")}function jgt(){return new hi(di.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Bgt(){return new hi(di.CANCELED,"User canceled the upload/download.")}function Ugt(e){return new hi(di.INVALID_URL,"Invalid URL '"+e+"'.")}function zgt(e){return new hi(di.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+e+"'.")}function Vgt(){return new hi(di.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+u_e+"' property when initializing the app?")}function Hgt(){return new hi(di.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function qgt(){return new hi(di.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function Wgt(e){return new hi(di.UNSUPPORTED_ENVIRONMENT,`${e} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function c9(e){return new hi(di.INVALID_ARGUMENT,e)}function l_e(){return new hi(di.APP_DELETED,"The Firebase app was deleted.")}function Ggt(e){return new hi(di.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Bx(e,t){return new hi(di.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function Hw(e){throw new hi(di.INTERNAL_ERROR,"Internal error: "+e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bs{constructor(t,n){this.bucket=t,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(t,n){let r;try{r=Bs.makeFromUrl(t,n)}catch{return new Bs(t,"")}if(r.path==="")return r;throw zgt(t)}static makeFromUrl(t,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function o(w){w.path.charAt(w.path.length-1)==="/"&&(w.path_=w.path_.slice(0,-1))}const s="(/(.*))?$",a=new RegExp("^gs://"+i+s,"i"),u={bucket:1,path:3};function l(w){w.path_=decodeURIComponent(w.path)}const c="v[A-Za-z0-9_]+",f=n.replace(/[.]/g,"\\."),d="(/([^?#]*).*)?$",h=new RegExp(`^https?://${f}/${c}/b/${i}/o${d}`,"i"),p={bucket:1,path:3},m=n===a_e?"(?:storage.googleapis.com|storage.cloud.google.com)":n,g="([^?#]*)",y=new RegExp(`^https?://${m}/${i}/${g}`,"i"),_=[{regex:a,indices:u,postModify:o},{regex:h,indices:p,postModify:l},{regex:y,indices:{bucket:1,path:2},postModify:l}];for(let w=0;w<_.length;w++){const E=_[w],S=E.regex.exec(t);if(S){const T=S[E.indices.bucket];let C=S[E.indices.path];C||(C=""),r=new Bs(T,C),E.postModify(r);break}}if(r==null)throw Ugt(t);return r}}class Ygt{constructor(t){this.promise_=Promise.reject(t)}getPromise(){return this.promise_}cancel(t=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kgt(e,t,n){let r=1,i=null,o=null,s=!1,a=0;function u(){return a===2}let l=!1;function c(...g){l||(l=!0,t.apply(null,g))}function f(g){i=setTimeout(()=>{i=null,e(h,u())},g)}function d(){o&&clearTimeout(o)}function h(g,...y){if(l){d();return}if(g){d(),c.call(null,g,...y);return}if(u()||s){d(),c.call(null,g,...y);return}r<64&&(r*=2);let _;a===1?(a=2,_=0):_=(r+Math.random())*1e3,f(_)}let p=!1;function m(g){p||(p=!0,d(),!l&&(i!==null?(g||(a=2),clearTimeout(i),f(0)):g||(a=1)))}return f(0),o=setTimeout(()=>{s=!0,m(!0)},n),m}function Xgt(e){e(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qgt(e){return e!==void 0}function Jgt(e){return typeof e=="object"&&!Array.isArray(e)}function KH(e){return typeof e=="string"||e instanceof String}function bie(e){return XH()&&e instanceof Blob}function XH(){return typeof Blob<"u"}function f9(e,t,n,r){if(r<t)throw c9(`Invalid value for '${e}'. Expected ${t} or greater.`);if(r>n)throw c9(`Invalid value for '${e}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AC(e,t,n){let r=t;return n==null&&(r=`https://${t}`),`${n}://${r}/v0${e}`}function c_e(e){const t=encodeURIComponent;let n="?";for(const r in e)if(e.hasOwnProperty(r)){const i=t(r)+"="+t(e[r]);n=n+i+"&"}return n=n.slice(0,-1),n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var m0;(function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"})(m0||(m0={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zgt(e,t){const n=e>=500&&e<600,i=[408,429].indexOf(e)!==-1,o=t.indexOf(e)!==-1;return n||i||o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e0t{constructor(t,n,r,i,o,s,a,u,l,c,f,d=!0){this.url_=t,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=o,this.additionalRetryCodes_=s,this.callback_=a,this.errorCallback_=u,this.timeout_=l,this.progressCallback_=c,this.connectionFactory_=f,this.retry=d,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((h,p)=>{this.resolve_=h,this.reject_=p,this.start_()})}start_(){const t=(r,i)=>{if(i){r(!1,new $2(!1,null,!0));return}const o=this.connectionFactory_();this.pendingConnection_=o;const s=a=>{const u=a.loaded,l=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(u,l)};this.progressCallback_!==null&&o.addUploadProgressListener(s),o.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&o.removeUploadProgressListener(s),this.pendingConnection_=null;const a=o.getErrorCode()===m0.NO_ERROR,u=o.getStatus();if(!a||Zgt(u,this.additionalRetryCodes_)&&this.retry){const c=o.getErrorCode()===m0.ABORT;r(!1,new $2(!1,null,c));return}const l=this.successCodes_.indexOf(u)!==-1;r(!0,new $2(l,o))})},n=(r,i)=>{const o=this.resolve_,s=this.reject_,a=i.connection;if(i.wasSuccessCode)try{const u=this.callback_(a,a.getResponse());Qgt(u)?o(u):o()}catch(u){s(u)}else if(a!==null){const u=YH();u.serverResponse=a.getErrorText(),this.errorCallback_?s(this.errorCallback_(a,u)):s(u)}else if(i.canceled){const u=this.appDelete_?l_e():Bgt();s(u)}else{const u=jgt();s(u)}};this.canceled_?n(!1,new $2(!1,null,!0)):this.backoffId_=Kgt(t,n,this.timeout_)}getPromise(){return this.promise_}cancel(t){this.canceled_=!0,this.appDelete_=t||!1,this.backoffId_!==null&&Xgt(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class $2{constructor(t,n,r){this.wasSuccessCode=t,this.connection=n,this.canceled=!!r}}function t0t(e,t){t!==null&&t.length>0&&(e.Authorization="Firebase "+t)}function n0t(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(t??"AppManager")}function r0t(e,t){t&&(e["X-Firebase-GMPID"]=t)}function i0t(e,t){t!==null&&(e["X-Firebase-AppCheck"]=t)}function o0t(e,t,n,r,i,o,s=!0){const a=c_e(e.urlParams),u=e.url+a,l=Object.assign({},e.headers);return r0t(l,t),t0t(l,n),n0t(l,o),i0t(l,r),new e0t(u,e.method,l,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s0t(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function a0t(...e){const t=s0t();if(t!==void 0){const n=new t;for(let r=0;r<e.length;r++)n.append(e[r]);return n.getBlob()}else{if(XH())return new Blob(e);throw new hi(di.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function u0t(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l0t(e){if(typeof atob>"u")throw Wgt("base-64");return atob(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jc={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class L6{constructor(t,n){this.data=t,this.contentType=n||null}}function c0t(e,t){switch(e){case Jc.RAW:return new L6(f_e(t));case Jc.BASE64:case Jc.BASE64URL:return new L6(d_e(e,t));case Jc.DATA_URL:return new L6(d0t(t),h0t(t))}throw YH()}function f_e(e){const t=[];for(let n=0;n<e.length;n++){let r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<e.length-1&&(e.charCodeAt(n+1)&64512)===56320))t.push(239,191,189);else{const o=r,s=e.charCodeAt(++n);r=65536|(o&1023)<<10|s&1023,t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(t)}function f0t(e){let t;try{t=decodeURIComponent(e)}catch{throw Bx(Jc.DATA_URL,"Malformed data URL.")}return f_e(t)}function d_e(e,t){switch(e){case Jc.BASE64:{const i=t.indexOf("-")!==-1,o=t.indexOf("_")!==-1;if(i||o)throw Bx(e,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case Jc.BASE64URL:{const i=t.indexOf("+")!==-1,o=t.indexOf("/")!==-1;if(i||o)throw Bx(e,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=l0t(t)}catch(i){throw i.message.includes("polyfill")?i:Bx(e,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class h_e{constructor(t){this.base64=!1,this.contentType=null;const n=t.match(/^data:([^,]+)?,/);if(n===null)throw Bx(Jc.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=p0t(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=t.substring(t.indexOf(",")+1)}}function d0t(e){const t=new h_e(e);return t.base64?d_e(Jc.BASE64,t.rest):f0t(t.rest)}function h0t(e){return new h_e(e).contentType}function p0t(e,t){return e.length>=t.length?e.substring(e.length-t.length)===t:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cp{constructor(t,n){let r=0,i="";bie(t)?(this.data_=t,r=t.size,i=t.type):t instanceof ArrayBuffer?(n?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),r=this.data_.length):t instanceof Uint8Array&&(n?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),r=t.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(t,n){if(bie(this.data_)){const r=this.data_,i=u0t(r,t,n);return i===null?null:new cp(i)}else{const r=new Uint8Array(this.data_.buffer,t,n-t);return new cp(r,!0)}}static getBlob(...t){if(XH()){const n=t.map(r=>r instanceof cp?r.data_:r);return new cp(a0t.apply(null,n))}else{const n=t.map(s=>KH(s)?c0t(Jc.RAW,s).data:s.data_);let r=0;n.forEach(s=>{r+=s.byteLength});const i=new Uint8Array(r);let o=0;return n.forEach(s=>{for(let a=0;a<s.length;a++)i[o++]=s[a]}),new cp(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QH(e){let t;try{t=JSON.parse(e)}catch{return null}return Jgt(t)?t:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m0t(e){if(e.length===0)return null;const t=e.lastIndexOf("/");return t===-1?"":e.slice(0,t)}function g0t(e,t){const n=t.split("/").filter(r=>r.length>0).join("/");return e.length===0?n:e+"/"+n}function p_e(e){const t=e.lastIndexOf("/",e.length-2);return t===-1?e:e.slice(t+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y0t(e,t){return t}class Is{constructor(t,n,r,i){this.server=t,this.local=n||t,this.writable=!!r,this.xform=i||y0t}}let M2=null;function v0t(e){return!KH(e)||e.length<2?e:p_e(e)}function m_e(){if(M2)return M2;const e=[];e.push(new Is("bucket")),e.push(new Is("generation")),e.push(new Is("metageneration")),e.push(new Is("name","fullPath",!0));function t(o,s){return v0t(s)}const n=new Is("name");n.xform=t,e.push(n);function r(o,s){return s!==void 0?Number(s):s}const i=new Is("size");return i.xform=r,e.push(i),e.push(new Is("timeCreated")),e.push(new Is("updated")),e.push(new Is("md5Hash",null,!0)),e.push(new Is("cacheControl",null,!0)),e.push(new Is("contentDisposition",null,!0)),e.push(new Is("contentEncoding",null,!0)),e.push(new Is("contentLanguage",null,!0)),e.push(new Is("contentType",null,!0)),e.push(new Is("metadata","customMetadata",!0)),M2=e,M2}function b0t(e,t){function n(){const r=e.bucket,i=e.fullPath,o=new Bs(r,i);return t._makeStorageReference(o)}Object.defineProperty(e,"ref",{get:n})}function _0t(e,t,n){const r={};r.type="file";const i=n.length;for(let o=0;o<i;o++){const s=n[o];r[s.local]=s.xform(r,t[s.server])}return b0t(r,e),r}function g_e(e,t,n){const r=QH(t);return r===null?null:_0t(e,r,n)}function w0t(e,t,n,r){const i=QH(t);if(i===null||!KH(i.downloadTokens))return null;const o=i.downloadTokens;if(o.length===0)return null;const s=encodeURIComponent;return o.split(",").map(l=>{const c=e.bucket,f=e.fullPath,d="/b/"+s(c)+"/o/"+s(f),h=AC(d,n,r),p=c_e({alt:"media",token:l});return h+p})[0]}function E0t(e,t){const n={},r=t.length;for(let i=0;i<r;i++){const o=t[i];o.writable&&(n[o.server]=e[o.local])}return JSON.stringify(n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _ie="prefixes",wie="items";function x0t(e,t,n){const r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[_ie])for(const i of n[_ie]){const o=i.replace(/\/$/,""),s=e._makeStorageReference(new Bs(t,o));r.prefixes.push(s)}if(n[wie])for(const i of n[wie]){const o=e._makeStorageReference(new Bs(t,i.name));r.items.push(o)}return r}function T0t(e,t,n){const r=QH(n);return r===null?null:x0t(e,t,r)}class JO{constructor(t,n,r,i){this.url=t,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JH(e){if(!e)throw YH()}function S0t(e,t){function n(r,i){const o=g_e(e,i,t);return JH(o!==null),o}return n}function C0t(e,t){function n(r,i){const o=T0t(e,t,i);return JH(o!==null),o}return n}function A0t(e,t){function n(r,i){const o=g_e(e,i,t);return JH(o!==null),w0t(o,i,e.host,e._protocol)}return n}function ZH(e){function t(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=Lgt():i=Mgt():n.getStatus()===402?i=$gt(e.bucket):n.getStatus()===403?i=Fgt(e.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return t}function y_e(e){const t=ZH(e);function n(r,i){let o=t(r,i);return r.getStatus()===404&&(o=Ogt(e.path)),o.serverResponse=i.serverResponse,o}return n}function k0t(e,t,n,r,i){const o={};t.isRoot?o.prefix="":o.prefix=t.path+"/",n.length>0&&(o.delimiter=n),r&&(o.pageToken=r),i&&(o.maxResults=i);const s=t.bucketOnlyServerUrl(),a=AC(s,e.host,e._protocol),u="GET",l=e.maxOperationRetryTime,c=new JO(a,u,C0t(e,t.bucket),l);return c.urlParams=o,c.errorHandler=ZH(t),c}function I0t(e,t,n){const r=t.fullServerUrl(),i=AC(r,e.host,e._protocol),o="GET",s=e.maxOperationRetryTime,a=new JO(i,o,A0t(e,n),s);return a.errorHandler=y_e(t),a}function R0t(e,t){const n=t.fullServerUrl(),r=AC(n,e.host,e._protocol),i="DELETE",o=e.maxOperationRetryTime;function s(u,l){}const a=new JO(r,i,s,o);return a.successCodes=[200,204],a.errorHandler=y_e(t),a}function N0t(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}function P0t(e,t,n){const r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=N0t(null,t)),r}function D0t(e,t,n,r,i){const o=t.bucketOnlyServerUrl(),s={"X-Goog-Upload-Protocol":"multipart"};function a(){let _="";for(let w=0;w<2;w++)_=_+Math.random().toString().slice(2);return _}const u=a();s["Content-Type"]="multipart/related; boundary="+u;const l=P0t(t,r,i),c=E0t(l,n),f="--"+u+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+c+`\r
--`+u+`\r
Content-Type: `+l.contentType+`\r
\r
`,d=`\r
--`+u+"--",h=cp.getBlob(f,r,d);if(h===null)throw Hgt();const p={name:l.fullPath},m=AC(o,e.host,e._protocol),g="POST",y=e.maxUploadRetryTime,v=new JO(m,g,S0t(e,n),y);return v.urlParams=p,v.headers=s,v.body=h.uploadData(),v.errorHandler=ZH(t),v}class O0t{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=m0.NO_ERROR,this.sendPromise_=new Promise(t=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=m0.ABORT,t()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=m0.NETWORK_ERROR,t()}),this.xhr_.addEventListener("load",()=>{t()})})}send(t,n,r,i){if(this.sent_)throw Hw("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,t,!0),i!==void 0)for(const o in i)i.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,i[o].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Hw("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Hw("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Hw("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Hw("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(t){return this.xhr_.getResponseHeader(t)}addUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",t)}removeUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",t)}}class $0t extends O0t{initXhr(){this.xhr_.responseType="text"}}function ZO(){return new $0t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W0{constructor(t,n){this._service=t,n instanceof Bs?this._location=n:this._location=Bs.makeFromUrl(n,t.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(t,n){return new W0(t,n)}get root(){const t=new Bs(this._location.bucket,"");return this._newRef(this._service,t)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return p_e(this._location.path)}get storage(){return this._service}get parent(){const t=m0t(this._location.path);if(t===null)return null;const n=new Bs(this._location.bucket,t);return new W0(this._service,n)}_throwIfRoot(t){if(this._location.path==="")throw Ggt(t)}}function M0t(e,t,n){e._throwIfRoot("uploadBytes");const r=D0t(e.storage,e._location,m_e(),new cp(t,!0),n);return e.storage.makeRequestWithTokens(r,ZO).then(i=>({metadata:i,ref:e}))}function L0t(e){const t={prefixes:[],items:[]};return v_e(e,t).then(()=>t)}async function v_e(e,t,n){const i=await F0t(e,{pageToken:n});t.prefixes.push(...i.prefixes),t.items.push(...i.items),i.nextPageToken!=null&&await v_e(e,t,i.nextPageToken)}function F0t(e,t){t!=null&&typeof t.maxResults=="number"&&f9("options.maxResults",1,1e3,t.maxResults);const n=t||{},r=k0t(e.storage,e._location,"/",n.pageToken,n.maxResults);return e.storage.makeRequestWithTokens(r,ZO)}function j0t(e){e._throwIfRoot("getDownloadURL");const t=I0t(e.storage,e._location,m_e());return e.storage.makeRequestWithTokens(t,ZO).then(n=>{if(n===null)throw qgt();return n})}function B0t(e){e._throwIfRoot("deleteObject");const t=R0t(e.storage,e._location);return e.storage.makeRequestWithTokens(t,ZO)}function U0t(e,t){const n=g0t(e._location.path,t),r=new Bs(e._location.bucket,n);return new W0(e.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z0t(e){return/^[A-Za-z]+:\/\//.test(e)}function V0t(e,t){return new W0(e,t)}function b_e(e,t){if(e instanceof eq){const n=e;if(n._bucket==null)throw Vgt();const r=new W0(n,n._bucket);return t!=null?b_e(r,t):r}else return t!==void 0?U0t(e,t):e}function H0t(e,t){if(t&&z0t(t)){if(e instanceof eq)return V0t(e,t);throw c9("To use ref(service, url), the first argument must be a Storage instance.")}else return b_e(e,t)}function Eie(e,t){const n=t==null?void 0:t[u_e];return n==null?null:Bs.makeFromBucketSpec(n,e)}function q0t(e,t,n,r={}){e.host=`${t}:${n}`,e._protocol="http";const{mockUserToken:i}=r;i&&(e._overrideAuthToken=typeof i=="string"?i:nht(i,e.app.options.projectId))}class eq{constructor(t,n,r,i,o){this.app=t,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=o,this._bucket=null,this._host=a_e,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=Pgt,this._maxUploadRetryTime=Dgt,this._requests=new Set,i!=null?this._bucket=Bs.makeFromBucketSpec(i,this._host):this._bucket=Eie(this._host,this.app.options)}get host(){return this._host}set host(t){this._host=t,this._url!=null?this._bucket=Bs.makeFromBucketSpec(this._url,t):this._bucket=Eie(t,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(t){f9("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(t){f9("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const t=this._authProvider.getImmediate({optional:!0});if(t){const n=await t.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const t=this._appCheckProvider.getImmediate({optional:!0});return t?(await t.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(t=>t.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(t){return new W0(this,t)}_makeRequest(t,n,r,i,o=!0){if(this._deleted)return new Ygt(l_e());{const s=o0t(t,this._appId,r,i,n,this._firebaseVersion,o);return this._requests.add(s),s.getPromise().then(()=>this._requests.delete(s),()=>this._requests.delete(s)),s}}async makeRequestWithTokens(t,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(t,n,r,i).getPromise()}}const xie="@firebase/storage",Tie="0.12.5";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const __e="storage";function F6(e,t,n){return e=Sr(e),M0t(e,t,n)}function qw(e){return e=Sr(e),L0t(e)}function j6(e){return e=Sr(e),j0t(e)}function Sie(e){return e=Sr(e),B0t(e)}function $u(e,t){return e=Sr(e),H0t(e,t)}function W0t(e=FH(),t){e=Sr(e);const r=z_(e,__e).getImmediate({identifier:t}),i=tht("storage");return i&&G0t(r,...i),r}function G0t(e,t,n,r={}){q0t(e,t,n,r)}function Y0t(e,{instanceIdentifier:t}){const n=e.getProvider("app").getImmediate(),r=e.getProvider("auth-internal"),i=e.getProvider("app-check-internal");return new eq(n,r,i,t,Ly)}function K0t(){uh(new Ef(__e,Y0t,"PUBLIC").setMultipleInstances(!0)),nc(xie,Tie,""),nc(xie,Tie,"esm2017")}K0t();var Cie=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var g0,w_e;(function(){var e;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(T,C){function A(){}A.prototype=C.prototype,T.D=C.prototype,T.prototype=new A,T.prototype.constructor=T,T.C=function(R,N,O){for(var D=Array(arguments.length-2),M=2;M<arguments.length;M++)D[M-2]=arguments[M];return C.prototype[N].apply(R,D)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(T,C,A){A||(A=0);var R=Array(16);if(typeof C=="string")for(var N=0;16>N;++N)R[N]=C.charCodeAt(A++)|C.charCodeAt(A++)<<8|C.charCodeAt(A++)<<16|C.charCodeAt(A++)<<24;else for(N=0;16>N;++N)R[N]=C[A++]|C[A++]<<8|C[A++]<<16|C[A++]<<24;C=T.g[0],A=T.g[1],N=T.g[2];var O=T.g[3],D=C+(O^A&(N^O))+R[0]+3614090360&4294967295;C=A+(D<<7&4294967295|D>>>25),D=O+(N^C&(A^N))+R[1]+3905402710&4294967295,O=C+(D<<12&4294967295|D>>>20),D=N+(A^O&(C^A))+R[2]+606105819&4294967295,N=O+(D<<17&4294967295|D>>>15),D=A+(C^N&(O^C))+R[3]+3250441966&4294967295,A=N+(D<<22&4294967295|D>>>10),D=C+(O^A&(N^O))+R[4]+4118548399&4294967295,C=A+(D<<7&4294967295|D>>>25),D=O+(N^C&(A^N))+R[5]+1200080426&4294967295,O=C+(D<<12&4294967295|D>>>20),D=N+(A^O&(C^A))+R[6]+2821735955&4294967295,N=O+(D<<17&4294967295|D>>>15),D=A+(C^N&(O^C))+R[7]+4249261313&4294967295,A=N+(D<<22&4294967295|D>>>10),D=C+(O^A&(N^O))+R[8]+1770035416&4294967295,C=A+(D<<7&4294967295|D>>>25),D=O+(N^C&(A^N))+R[9]+2336552879&4294967295,O=C+(D<<12&4294967295|D>>>20),D=N+(A^O&(C^A))+R[10]+4294925233&4294967295,N=O+(D<<17&4294967295|D>>>15),D=A+(C^N&(O^C))+R[11]+2304563134&4294967295,A=N+(D<<22&4294967295|D>>>10),D=C+(O^A&(N^O))+R[12]+1804603682&4294967295,C=A+(D<<7&4294967295|D>>>25),D=O+(N^C&(A^N))+R[13]+4254626195&4294967295,O=C+(D<<12&4294967295|D>>>20),D=N+(A^O&(C^A))+R[14]+2792965006&4294967295,N=O+(D<<17&4294967295|D>>>15),D=A+(C^N&(O^C))+R[15]+1236535329&4294967295,A=N+(D<<22&4294967295|D>>>10),D=C+(N^O&(A^N))+R[1]+4129170786&4294967295,C=A+(D<<5&4294967295|D>>>27),D=O+(A^N&(C^A))+R[6]+3225465664&4294967295,O=C+(D<<9&4294967295|D>>>23),D=N+(C^A&(O^C))+R[11]+643717713&4294967295,N=O+(D<<14&4294967295|D>>>18),D=A+(O^C&(N^O))+R[0]+3921069994&4294967295,A=N+(D<<20&4294967295|D>>>12),D=C+(N^O&(A^N))+R[5]+3593408605&4294967295,C=A+(D<<5&4294967295|D>>>27),D=O+(A^N&(C^A))+R[10]+38016083&4294967295,O=C+(D<<9&4294967295|D>>>23),D=N+(C^A&(O^C))+R[15]+3634488961&4294967295,N=O+(D<<14&4294967295|D>>>18),D=A+(O^C&(N^O))+R[4]+3889429448&4294967295,A=N+(D<<20&4294967295|D>>>12),D=C+(N^O&(A^N))+R[9]+568446438&4294967295,C=A+(D<<5&4294967295|D>>>27),D=O+(A^N&(C^A))+R[14]+3275163606&4294967295,O=C+(D<<9&4294967295|D>>>23),D=N+(C^A&(O^C))+R[3]+4107603335&4294967295,N=O+(D<<14&4294967295|D>>>18),D=A+(O^C&(N^O))+R[8]+1163531501&4294967295,A=N+(D<<20&4294967295|D>>>12),D=C+(N^O&(A^N))+R[13]+2850285829&4294967295,C=A+(D<<5&4294967295|D>>>27),D=O+(A^N&(C^A))+R[2]+4243563512&4294967295,O=C+(D<<9&4294967295|D>>>23),D=N+(C^A&(O^C))+R[7]+1735328473&4294967295,N=O+(D<<14&4294967295|D>>>18),D=A+(O^C&(N^O))+R[12]+2368359562&4294967295,A=N+(D<<20&4294967295|D>>>12),D=C+(A^N^O)+R[5]+4294588738&4294967295,C=A+(D<<4&4294967295|D>>>28),D=O+(C^A^N)+R[8]+2272392833&4294967295,O=C+(D<<11&4294967295|D>>>21),D=N+(O^C^A)+R[11]+1839030562&4294967295,N=O+(D<<16&4294967295|D>>>16),D=A+(N^O^C)+R[14]+4259657740&4294967295,A=N+(D<<23&4294967295|D>>>9),D=C+(A^N^O)+R[1]+2763975236&4294967295,C=A+(D<<4&4294967295|D>>>28),D=O+(C^A^N)+R[4]+1272893353&4294967295,O=C+(D<<11&4294967295|D>>>21),D=N+(O^C^A)+R[7]+4139469664&4294967295,N=O+(D<<16&4294967295|D>>>16),D=A+(N^O^C)+R[10]+3200236656&4294967295,A=N+(D<<23&4294967295|D>>>9),D=C+(A^N^O)+R[13]+681279174&4294967295,C=A+(D<<4&4294967295|D>>>28),D=O+(C^A^N)+R[0]+3936430074&4294967295,O=C+(D<<11&4294967295|D>>>21),D=N+(O^C^A)+R[3]+3572445317&4294967295,N=O+(D<<16&4294967295|D>>>16),D=A+(N^O^C)+R[6]+76029189&4294967295,A=N+(D<<23&4294967295|D>>>9),D=C+(A^N^O)+R[9]+3654602809&4294967295,C=A+(D<<4&4294967295|D>>>28),D=O+(C^A^N)+R[12]+3873151461&4294967295,O=C+(D<<11&4294967295|D>>>21),D=N+(O^C^A)+R[15]+530742520&4294967295,N=O+(D<<16&4294967295|D>>>16),D=A+(N^O^C)+R[2]+3299628645&4294967295,A=N+(D<<23&4294967295|D>>>9),D=C+(N^(A|~O))+R[0]+4096336452&4294967295,C=A+(D<<6&4294967295|D>>>26),D=O+(A^(C|~N))+R[7]+1126891415&4294967295,O=C+(D<<10&4294967295|D>>>22),D=N+(C^(O|~A))+R[14]+2878612391&4294967295,N=O+(D<<15&4294967295|D>>>17),D=A+(O^(N|~C))+R[5]+4237533241&4294967295,A=N+(D<<21&4294967295|D>>>11),D=C+(N^(A|~O))+R[12]+1700485571&4294967295,C=A+(D<<6&4294967295|D>>>26),D=O+(A^(C|~N))+R[3]+2399980690&4294967295,O=C+(D<<10&4294967295|D>>>22),D=N+(C^(O|~A))+R[10]+4293915773&4294967295,N=O+(D<<15&4294967295|D>>>17),D=A+(O^(N|~C))+R[1]+2240044497&4294967295,A=N+(D<<21&4294967295|D>>>11),D=C+(N^(A|~O))+R[8]+1873313359&4294967295,C=A+(D<<6&4294967295|D>>>26),D=O+(A^(C|~N))+R[15]+4264355552&4294967295,O=C+(D<<10&4294967295|D>>>22),D=N+(C^(O|~A))+R[6]+2734768916&4294967295,N=O+(D<<15&4294967295|D>>>17),D=A+(O^(N|~C))+R[13]+1309151649&4294967295,A=N+(D<<21&4294967295|D>>>11),D=C+(N^(A|~O))+R[4]+4149444226&4294967295,C=A+(D<<6&4294967295|D>>>26),D=O+(A^(C|~N))+R[11]+3174756917&4294967295,O=C+(D<<10&4294967295|D>>>22),D=N+(C^(O|~A))+R[2]+718787259&4294967295,N=O+(D<<15&4294967295|D>>>17),D=A+(O^(N|~C))+R[9]+3951481745&4294967295,T.g[0]=T.g[0]+C&4294967295,T.g[1]=T.g[1]+(N+(D<<21&4294967295|D>>>11))&4294967295,T.g[2]=T.g[2]+N&4294967295,T.g[3]=T.g[3]+O&4294967295}r.prototype.u=function(T,C){C===void 0&&(C=T.length);for(var A=C-this.blockSize,R=this.B,N=this.h,O=0;O<C;){if(N==0)for(;O<=A;)i(this,T,O),O+=this.blockSize;if(typeof T=="string"){for(;O<C;)if(R[N++]=T.charCodeAt(O++),N==this.blockSize){i(this,R),N=0;break}}else for(;O<C;)if(R[N++]=T[O++],N==this.blockSize){i(this,R),N=0;break}}this.h=N,this.o+=C},r.prototype.v=function(){var T=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);T[0]=128;for(var C=1;C<T.length-8;++C)T[C]=0;var A=8*this.o;for(C=T.length-8;C<T.length;++C)T[C]=A&255,A/=256;for(this.u(T),T=Array(16),C=A=0;4>C;++C)for(var R=0;32>R;R+=8)T[A++]=this.g[C]>>>R&255;return T};function o(T,C){var A=a;return Object.prototype.hasOwnProperty.call(A,T)?A[T]:A[T]=C(T)}function s(T,C){this.h=C;for(var A=[],R=!0,N=T.length-1;0<=N;N--){var O=T[N]|0;R&&O==C||(A[N]=O,R=!1)}this.g=A}var a={};function u(T){return-128<=T&&128>T?o(T,function(C){return new s([C|0],0>C?-1:0)}):new s([T|0],0>T?-1:0)}function l(T){if(isNaN(T)||!isFinite(T))return f;if(0>T)return g(l(-T));for(var C=[],A=1,R=0;T>=A;R++)C[R]=T/A|0,A*=4294967296;return new s(C,0)}function c(T,C){if(T.length==0)throw Error("number format error: empty string");if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(T.charAt(0)=="-")return g(c(T.substring(1),C));if(0<=T.indexOf("-"))throw Error('number format error: interior "-" character');for(var A=l(Math.pow(C,8)),R=f,N=0;N<T.length;N+=8){var O=Math.min(8,T.length-N),D=parseInt(T.substring(N,N+O),C);8>O?(O=l(Math.pow(C,O)),R=R.j(O).add(l(D))):(R=R.j(A),R=R.add(l(D)))}return R}var f=u(0),d=u(1),h=u(16777216);e=s.prototype,e.m=function(){if(m(this))return-g(this).m();for(var T=0,C=1,A=0;A<this.g.length;A++){var R=this.i(A);T+=(0<=R?R:4294967296+R)*C,C*=4294967296}return T},e.toString=function(T){if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(p(this))return"0";if(m(this))return"-"+g(this).toString(T);for(var C=l(Math.pow(T,6)),A=this,R="";;){var N=w(A,C).g;A=y(A,N.j(C));var O=((0<A.g.length?A.g[0]:A.h)>>>0).toString(T);if(A=N,p(A))return O+R;for(;6>O.length;)O="0"+O;R=O+R}},e.i=function(T){return 0>T?0:T<this.g.length?this.g[T]:this.h};function p(T){if(T.h!=0)return!1;for(var C=0;C<T.g.length;C++)if(T.g[C]!=0)return!1;return!0}function m(T){return T.h==-1}e.l=function(T){return T=y(this,T),m(T)?-1:p(T)?0:1};function g(T){for(var C=T.g.length,A=[],R=0;R<C;R++)A[R]=~T.g[R];return new s(A,~T.h).add(d)}e.abs=function(){return m(this)?g(this):this},e.add=function(T){for(var C=Math.max(this.g.length,T.g.length),A=[],R=0,N=0;N<=C;N++){var O=R+(this.i(N)&65535)+(T.i(N)&65535),D=(O>>>16)+(this.i(N)>>>16)+(T.i(N)>>>16);R=D>>>16,O&=65535,D&=65535,A[N]=D<<16|O}return new s(A,A[A.length-1]&-2147483648?-1:0)};function y(T,C){return T.add(g(C))}e.j=function(T){if(p(this)||p(T))return f;if(m(this))return m(T)?g(this).j(g(T)):g(g(this).j(T));if(m(T))return g(this.j(g(T)));if(0>this.l(h)&&0>T.l(h))return l(this.m()*T.m());for(var C=this.g.length+T.g.length,A=[],R=0;R<2*C;R++)A[R]=0;for(R=0;R<this.g.length;R++)for(var N=0;N<T.g.length;N++){var O=this.i(R)>>>16,D=this.i(R)&65535,M=T.i(N)>>>16,F=T.i(N)&65535;A[2*R+2*N]+=D*F,v(A,2*R+2*N),A[2*R+2*N+1]+=O*F,v(A,2*R+2*N+1),A[2*R+2*N+1]+=D*M,v(A,2*R+2*N+1),A[2*R+2*N+2]+=O*M,v(A,2*R+2*N+2)}for(R=0;R<C;R++)A[R]=A[2*R+1]<<16|A[2*R];for(R=C;R<2*C;R++)A[R]=0;return new s(A,0)};function v(T,C){for(;(T[C]&65535)!=T[C];)T[C+1]+=T[C]>>>16,T[C]&=65535,C++}function _(T,C){this.g=T,this.h=C}function w(T,C){if(p(C))throw Error("division by zero");if(p(T))return new _(f,f);if(m(T))return C=w(g(T),C),new _(g(C.g),g(C.h));if(m(C))return C=w(T,g(C)),new _(g(C.g),C.h);if(30<T.g.length){if(m(T)||m(C))throw Error("slowDivide_ only works with positive integers.");for(var A=d,R=C;0>=R.l(T);)A=E(A),R=E(R);var N=S(A,1),O=S(R,1);for(R=S(R,2),A=S(A,2);!p(R);){var D=O.add(R);0>=D.l(T)&&(N=N.add(A),O=D),R=S(R,1),A=S(A,1)}return C=y(T,N.j(C)),new _(N,C)}for(N=f;0<=T.l(C);){for(A=Math.max(1,Math.floor(T.m()/C.m())),R=Math.ceil(Math.log(A)/Math.LN2),R=48>=R?1:Math.pow(2,R-48),O=l(A),D=O.j(C);m(D)||0<D.l(T);)A-=R,O=l(A),D=O.j(C);p(O)&&(O=d),N=N.add(O),T=y(T,D)}return new _(N,T)}e.A=function(T){return w(this,T).h},e.and=function(T){for(var C=Math.max(this.g.length,T.g.length),A=[],R=0;R<C;R++)A[R]=this.i(R)&T.i(R);return new s(A,this.h&T.h)},e.or=function(T){for(var C=Math.max(this.g.length,T.g.length),A=[],R=0;R<C;R++)A[R]=this.i(R)|T.i(R);return new s(A,this.h|T.h)},e.xor=function(T){for(var C=Math.max(this.g.length,T.g.length),A=[],R=0;R<C;R++)A[R]=this.i(R)^T.i(R);return new s(A,this.h^T.h)};function E(T){for(var C=T.g.length+1,A=[],R=0;R<C;R++)A[R]=T.i(R)<<1|T.i(R-1)>>>31;return new s(A,T.h)}function S(T,C){var A=C>>5;C%=32;for(var R=T.g.length-A,N=[],O=0;O<R;O++)N[O]=0<C?T.i(O+A)>>>C|T.i(O+A+1)<<32-C:T.i(O+A);return new s(N,T.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,w_e=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=l,s.fromString=c,g0=s}).apply(typeof Cie<"u"?Cie:typeof self<"u"?self:typeof window<"u"?window:{});var L2=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var E_e,x_e,FE,T_e,nI,d9,S_e,C_e,A_e;(function(){var e,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(x,$,V){return x==Array.prototype||x==Object.prototype||(x[$]=V.value),x};function n(x){x=[typeof globalThis=="object"&&globalThis,x,typeof window=="object"&&window,typeof self=="object"&&self,typeof L2=="object"&&L2];for(var $=0;$<x.length;++$){var V=x[$];if(V&&V.Math==Math)return V}throw Error("Cannot find global object")}var r=n(this);function i(x,$){if($)e:{var V=r;x=x.split(".");for(var X=0;X<x.length-1;X++){var ye=x[X];if(!(ye in V))break e;V=V[ye]}x=x[x.length-1],X=V[x],$=$(X),$!=X&&$!=null&&t(V,x,{configurable:!0,writable:!0,value:$})}}function o(x,$){x instanceof String&&(x+="");var V=0,X=!1,ye={next:function(){if(!X&&V<x.length){var Ie=V++;return{value:$(Ie,x[Ie]),done:!1}}return X=!0,{done:!0,value:void 0}}};return ye[Symbol.iterator]=function(){return ye},ye}i("Array.prototype.values",function(x){return x||function(){return o(this,function($,V){return V})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var s=s||{},a=this||self;function u(x){var $=typeof x;return $=$!="object"?$:x?Array.isArray(x)?"array":$:"null",$=="array"||$=="object"&&typeof x.length=="number"}function l(x){var $=typeof x;return $=="object"&&x!=null||$=="function"}function c(x,$,V){return x.call.apply(x.bind,arguments)}function f(x,$,V){if(!x)throw Error();if(2<arguments.length){var X=Array.prototype.slice.call(arguments,2);return function(){var ye=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(ye,X),x.apply($,ye)}}return function(){return x.apply($,arguments)}}function d(x,$,V){return d=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?c:f,d.apply(null,arguments)}function h(x,$){var V=Array.prototype.slice.call(arguments,1);return function(){var X=V.slice();return X.push.apply(X,arguments),x.apply(this,X)}}function p(x,$){function V(){}V.prototype=$.prototype,x.aa=$.prototype,x.prototype=new V,x.prototype.constructor=x,x.Qb=function(X,ye,Ie){for(var ut=Array(arguments.length-2),pr=2;pr<arguments.length;pr++)ut[pr-2]=arguments[pr];return $.prototype[ye].apply(X,ut)}}function m(x){const $=x.length;if(0<$){const V=Array($);for(let X=0;X<$;X++)V[X]=x[X];return V}return[]}function g(x,$){for(let V=1;V<arguments.length;V++){const X=arguments[V];if(u(X)){const ye=x.length||0,Ie=X.length||0;x.length=ye+Ie;for(let ut=0;ut<Ie;ut++)x[ye+ut]=X[ut]}else x.push(X)}}class y{constructor($,V){this.i=$,this.j=V,this.h=0,this.g=null}get(){let $;return 0<this.h?(this.h--,$=this.g,this.g=$.next,$.next=null):$=this.i(),$}}function v(x){return/^[\s\xa0]*$/.test(x)}function _(){var x=a.navigator;return x&&(x=x.userAgent)?x:""}function w(x){return w[" "](x),x}w[" "]=function(){};var E=_().indexOf("Gecko")!=-1&&!(_().toLowerCase().indexOf("webkit")!=-1&&_().indexOf("Edge")==-1)&&!(_().indexOf("Trident")!=-1||_().indexOf("MSIE")!=-1)&&_().indexOf("Edge")==-1;function S(x,$,V){for(const X in x)$.call(V,x[X],X,x)}function T(x,$){for(const V in x)$.call(void 0,x[V],V,x)}function C(x){const $={};for(const V in x)$[V]=x[V];return $}const A="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function R(x,$){let V,X;for(let ye=1;ye<arguments.length;ye++){X=arguments[ye];for(V in X)x[V]=X[V];for(let Ie=0;Ie<A.length;Ie++)V=A[Ie],Object.prototype.hasOwnProperty.call(X,V)&&(x[V]=X[V])}}function N(x){var $=1;x=x.split(":");const V=[];for(;0<$&&x.length;)V.push(x.shift()),$--;return x.length&&V.push(x.join(":")),V}function O(x){a.setTimeout(()=>{throw x},0)}function D(){var x=H;let $=null;return x.g&&($=x.g,x.g=x.g.next,x.g||(x.h=null),$.next=null),$}class M{constructor(){this.h=this.g=null}add($,V){const X=F.get();X.set($,V),this.h?this.h.next=X:this.g=X,this.h=X}}var F=new y(()=>new L,x=>x.reset());class L{constructor(){this.next=this.g=this.h=null}set($,V){this.h=$,this.g=V,this.next=null}reset(){this.next=this.g=this.h=null}}let B,U=!1,H=new M,P=()=>{const x=a.Promise.resolve(void 0);B=()=>{x.then(z)}};var z=()=>{for(var x;x=D();){try{x.h.call(x.g)}catch(V){O(V)}var $=F;$.j(x),100>$.h&&($.h++,x.next=$.g,$.g=x)}U=!1};function W(){this.s=this.s,this.C=this.C}W.prototype.s=!1,W.prototype.ma=function(){this.s||(this.s=!0,this.N())},W.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function j(x,$){this.type=x,this.g=this.target=$,this.defaultPrevented=!1}j.prototype.h=function(){this.defaultPrevented=!0};var q=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var x=!1,$=Object.defineProperty({},"passive",{get:function(){x=!0}});try{const V=()=>{};a.addEventListener("test",V,$),a.removeEventListener("test",V,$)}catch{}return x}();function G(x,$){if(j.call(this,x?x.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,x){var V=this.type=x.type,X=x.changedTouches&&x.changedTouches.length?x.changedTouches[0]:null;if(this.target=x.target||x.srcElement,this.g=$,$=x.relatedTarget){if(E){e:{try{w($.nodeName);var ye=!0;break e}catch{}ye=!1}ye||($=null)}}else V=="mouseover"?$=x.fromElement:V=="mouseout"&&($=x.toElement);this.relatedTarget=$,X?(this.clientX=X.clientX!==void 0?X.clientX:X.pageX,this.clientY=X.clientY!==void 0?X.clientY:X.pageY,this.screenX=X.screenX||0,this.screenY=X.screenY||0):(this.clientX=x.clientX!==void 0?x.clientX:x.pageX,this.clientY=x.clientY!==void 0?x.clientY:x.pageY,this.screenX=x.screenX||0,this.screenY=x.screenY||0),this.button=x.button,this.key=x.key||"",this.ctrlKey=x.ctrlKey,this.altKey=x.altKey,this.shiftKey=x.shiftKey,this.metaKey=x.metaKey,this.pointerId=x.pointerId||0,this.pointerType=typeof x.pointerType=="string"?x.pointerType:te[x.pointerType]||"",this.state=x.state,this.i=x,x.defaultPrevented&&G.aa.h.call(this)}}p(G,j);var te={2:"touch",3:"pen",4:"mouse"};G.prototype.h=function(){G.aa.h.call(this);var x=this.i;x.preventDefault?x.preventDefault():x.returnValue=!1};var pe="closure_listenable_"+(1e6*Math.random()|0),be=0;function le(x,$,V,X,ye){this.listener=x,this.proxy=null,this.src=$,this.type=V,this.capture=!!X,this.ha=ye,this.key=++be,this.da=this.fa=!1}function me(x){x.da=!0,x.listener=null,x.proxy=null,x.src=null,x.ha=null}function Se(x){this.src=x,this.g={},this.h=0}Se.prototype.add=function(x,$,V,X,ye){var Ie=x.toString();x=this.g[Ie],x||(x=this.g[Ie]=[],this.h++);var ut=tt(x,$,X,ye);return-1<ut?($=x[ut],V||($.fa=!1)):($=new le($,this.src,Ie,!!X,ye),$.fa=V,x.push($)),$};function ge(x,$){var V=$.type;if(V in x.g){var X=x.g[V],ye=Array.prototype.indexOf.call(X,$,void 0),Ie;(Ie=0<=ye)&&Array.prototype.splice.call(X,ye,1),Ie&&(me($),x.g[V].length==0&&(delete x.g[V],x.h--))}}function tt(x,$,V,X){for(var ye=0;ye<x.length;++ye){var Ie=x[ye];if(!Ie.da&&Ie.listener==$&&Ie.capture==!!V&&Ie.ha==X)return ye}return-1}var Ue="closure_lm_"+(1e6*Math.random()|0),mt={};function it(x,$,V,X,ye){if(Array.isArray($)){for(var Ie=0;Ie<$.length;Ie++)it(x,$[Ie],V,X,ye);return null}return V=gt(V),x&&x[pe]?x.K($,V,l(X)?!!X.capture:!!X,ye):Re(x,$,V,!1,X,ye)}function Re(x,$,V,X,ye,Ie){if(!$)throw Error("Invalid event type");var ut=l(ye)?!!ye.capture:!!ye,pr=fe(x);if(pr||(x[Ue]=pr=new Se(x)),V=pr.add($,V,X,ut,Ie),V.proxy)return V;if(X=$e(),V.proxy=X,X.src=x,X.listener=V,x.addEventListener)q||(ye=ut),ye===void 0&&(ye=!1),x.addEventListener($.toString(),X,ye);else if(x.attachEvent)x.attachEvent(Nt($.toString()),X);else if(x.addListener&&x.removeListener)x.addListener(X);else throw Error("addEventListener and attachEvent are unavailable.");return V}function $e(){function x(V){return $.call(x.src,x.listener,V)}const $=He;return x}function Ge(x,$,V,X,ye){if(Array.isArray($))for(var Ie=0;Ie<$.length;Ie++)Ge(x,$[Ie],V,X,ye);else X=l(X)?!!X.capture:!!X,V=gt(V),x&&x[pe]?(x=x.i,$=String($).toString(),$ in x.g&&(Ie=x.g[$],V=tt(Ie,V,X,ye),-1<V&&(me(Ie[V]),Array.prototype.splice.call(Ie,V,1),Ie.length==0&&(delete x.g[$],x.h--)))):x&&(x=fe(x))&&($=x.g[$.toString()],x=-1,$&&(x=tt($,V,X,ye)),(V=-1<x?$[x]:null)&&dt(V))}function dt(x){if(typeof x!="number"&&x&&!x.da){var $=x.src;if($&&$[pe])ge($.i,x);else{var V=x.type,X=x.proxy;$.removeEventListener?$.removeEventListener(V,X,x.capture):$.detachEvent?$.detachEvent(Nt(V),X):$.addListener&&$.removeListener&&$.removeListener(X),(V=fe($))?(ge(V,x),V.h==0&&(V.src=null,$[Ue]=null)):me(x)}}}function Nt(x){return x in mt?mt[x]:mt[x]="on"+x}function He(x,$){if(x.da)x=!0;else{$=new G($,this);var V=x.listener,X=x.ha||x.src;x.fa&&dt(x),x=V.call(X,$)}return x}function fe(x){return x=x[Ue],x instanceof Se?x:null}var lt="__closure_events_fn_"+(1e9*Math.random()>>>0);function gt(x){return typeof x=="function"?x:(x[lt]||(x[lt]=function($){return x.handleEvent($)}),x[lt])}function ce(){W.call(this),this.i=new Se(this),this.M=this,this.F=null}p(ce,W),ce.prototype[pe]=!0,ce.prototype.removeEventListener=function(x,$,V,X){Ge(this,x,$,V,X)};function Te(x,$){var V,X=x.F;if(X)for(V=[];X;X=X.F)V.push(X);if(x=x.M,X=$.type||$,typeof $=="string")$=new j($,x);else if($ instanceof j)$.target=$.target||x;else{var ye=$;$=new j(X,x),R($,ye)}if(ye=!0,V)for(var Ie=V.length-1;0<=Ie;Ie--){var ut=$.g=V[Ie];ye=ze(ut,X,!0,$)&&ye}if(ut=$.g=x,ye=ze(ut,X,!0,$)&&ye,ye=ze(ut,X,!1,$)&&ye,V)for(Ie=0;Ie<V.length;Ie++)ut=$.g=V[Ie],ye=ze(ut,X,!1,$)&&ye}ce.prototype.N=function(){if(ce.aa.N.call(this),this.i){var x=this.i,$;for($ in x.g){for(var V=x.g[$],X=0;X<V.length;X++)me(V[X]);delete x.g[$],x.h--}}this.F=null},ce.prototype.K=function(x,$,V,X){return this.i.add(String(x),$,!1,V,X)},ce.prototype.L=function(x,$,V,X){return this.i.add(String(x),$,!0,V,X)};function ze(x,$,V,X){if($=x.i.g[String($)],!$)return!0;$=$.concat();for(var ye=!0,Ie=0;Ie<$.length;++Ie){var ut=$[Ie];if(ut&&!ut.da&&ut.capture==V){var pr=ut.listener,_o=ut.ha||ut.src;ut.fa&&ge(x.i,ut),ye=pr.call(_o,X)!==!1&&ye}}return ye&&!X.defaultPrevented}function st(x,$,V){if(typeof x=="function")V&&(x=d(x,V));else if(x&&typeof x.handleEvent=="function")x=d(x.handleEvent,x);else throw Error("Invalid listener argument");return 2147483647<Number($)?-1:a.setTimeout(x,$||0)}function vt(x){x.g=st(()=>{x.g=null,x.i&&(x.i=!1,vt(x))},x.l);const $=x.h;x.h=null,x.m.apply(null,$)}class vn extends W{constructor($,V){super(),this.m=$,this.l=V,this.h=null,this.i=!1,this.g=null}j($){this.h=arguments,this.g?this.i=!0:vt(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Zn(x){W.call(this),this.h=x,this.g={}}p(Zn,W);var bn=[];function Bn(x){S(x.g,function($,V){this.g.hasOwnProperty(V)&&dt($)},x),x.g={}}Zn.prototype.N=function(){Zn.aa.N.call(this),Bn(this)},Zn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Zt=a.JSON.stringify,an=a.JSON.parse,Dn=class{stringify(x){return a.JSON.stringify(x,void 0)}parse(x){return a.JSON.parse(x,void 0)}};function On(){}On.prototype.h=null;function Ho(x){return x.h||(x.h=x.i())}function Jr(){}var un={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Zr(){j.call(this,"d")}p(Zr,j);function er(){j.call(this,"c")}p(er,j);var Si={},ed=null;function Wa(){return ed=ed||new ce}Si.La="serverreachability";function Cc(x){j.call(this,Si.La,x)}p(Cc,j);function Qn(x){const $=Wa();Te($,new Cc($))}Si.STAT_EVENT="statevent";function qr(x,$){j.call(this,Si.STAT_EVENT,x),this.stat=$}p(qr,j);function br(x){const $=Wa();Te($,new qr($,x))}Si.Ma="timingevent";function ta(x,$){j.call(this,Si.Ma,x),this.size=$}p(ta,j);function Ts(x,$){if(typeof x!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){x()},$)}function Ss(){this.g=!0}Ss.prototype.xa=function(){this.g=!1};function ie(x,$,V,X,ye,Ie){x.info(function(){if(x.g)if(Ie)for(var ut="",pr=Ie.split("&"),_o=0;_o<pr.length;_o++){var Un=pr[_o].split("=");if(1<Un.length){var Yo=Un[0];Un=Un[1];var Ko=Yo.split("_");ut=2<=Ko.length&&Ko[1]=="type"?ut+(Yo+"="+Un+"&"):ut+(Yo+"=redacted&")}}else ut=null;else ut=Ie;return"XMLHTTP REQ ("+X+") [attempt "+ye+"]: "+$+`
`+V+`
`+ut})}function Z(x,$,V,X,ye,Ie,ut){x.info(function(){return"XMLHTTP RESP ("+X+") [ attempt "+ye+"]: "+$+`
`+V+`
`+Ie+" "+ut})}function oe(x,$,V,X){x.info(function(){return"XMLHTTP TEXT ("+$+"): "+Ee(x,V)+(X?" "+X:"")})}function xe(x,$){x.info(function(){return"TIMEOUT: "+$})}Ss.prototype.info=function(){};function Ee(x,$){if(!x.g)return $;if(!$)return null;try{var V=JSON.parse($);if(V){for(x=0;x<V.length;x++)if(Array.isArray(V[x])){var X=V[x];if(!(2>X.length)){var ye=X[1];if(Array.isArray(ye)&&!(1>ye.length)){var Ie=ye[0];if(Ie!="noop"&&Ie!="stop"&&Ie!="close")for(var ut=1;ut<ye.length;ut++)ye[ut]=""}}}}return Zt(V)}catch{return $}}var rt={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Et={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Bt;function mn(){}p(mn,On),mn.prototype.g=function(){return new XMLHttpRequest},mn.prototype.i=function(){return{}},Bt=new mn;function _n(x,$,V,X){this.j=x,this.i=$,this.l=V,this.R=X||1,this.U=new Zn(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Qt}function Qt(){this.i=null,this.g="",this.h=!1}var $n={},tr={};function jt(x,$,V){x.L=1,x.v=wn(qe($)),x.m=V,x.P=!0,Mn(x,null)}function Mn(x,$){x.F=Date.now(),Wr(x),x.A=qe(x.v);var V=x.A,X=x.R;Array.isArray(X)||(X=[String(X)]),xA(V.i,"t",X),x.C=0,V=x.j.J,x.h=new Qt,x.g=FX(x.j,V?$:null,!x.m),0<x.O&&(x.M=new vn(d(x.Y,x,x.g),x.O)),$=x.U,V=x.g,X=x.ca;var ye="readystatechange";Array.isArray(ye)||(ye&&(bn[0]=ye.toString()),ye=bn);for(var Ie=0;Ie<ye.length;Ie++){var ut=it(V,ye[Ie],X||$.handleEvent,!1,$.h||$);if(!ut)break;$.g[ut.key]=ut}$=x.H?C(x.H):{},x.m?(x.u||(x.u="POST"),$["Content-Type"]="application/x-www-form-urlencoded",x.g.ea(x.A,x.u,x.m,$)):(x.u="GET",x.g.ea(x.A,x.u,null,$)),Qn(),ie(x.i,x.u,x.A,x.l,x.R,x.m)}_n.prototype.ca=function(x){x=x.target;const $=this.M;$&&pi(x)==3?$.j():this.Y(x)},_n.prototype.Y=function(x){try{if(x==this.g)e:{const Ko=pi(this.g);var $=this.g.Ba();const av=this.g.Z();if(!(3>Ko)&&(Ko!=3||this.g&&(this.h.h||this.g.oa()||Go(this.g)))){this.J||Ko!=4||$==7||($==8||0>=av?Qn(3):Qn(2)),_r(this);var V=this.g.Z();this.X=V;t:if(fr(this)){var X=Go(this.g);x="";var ye=X.length,Ie=pi(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ei(this),bo(this);var ut="";break t}this.h.i=new a.TextDecoder}for($=0;$<ye;$++)this.h.h=!0,x+=this.h.i.decode(X[$],{stream:!(Ie&&$==ye-1)});X.length=0,this.h.g+=x,this.C=0,ut=this.h.g}else ut=this.g.oa();if(this.o=V==200,Z(this.i,this.u,this.A,this.l,this.R,Ko,V),this.o){if(this.T&&!this.K){t:{if(this.g){var pr,_o=this.g;if((pr=_o.g?_o.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!v(pr)){var Un=pr;break t}}Un=null}if(V=Un)oe(this.i,this.l,V,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ti(this,V);else{this.o=!1,this.s=3,br(12),ei(this),bo(this);break e}}if(this.P){V=!0;let xl;for(;!this.J&&this.C<ut.length;)if(xl=Rn(this,ut),xl==tr){Ko==4&&(this.s=4,br(14),V=!1),oe(this.i,this.l,null,"[Incomplete Response]");break}else if(xl==$n){this.s=4,br(15),oe(this.i,this.l,ut,"[Invalid Chunk]"),V=!1;break}else oe(this.i,this.l,xl,null),ti(this,xl);if(fr(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ko!=4||ut.length!=0||this.h.h||(this.s=1,br(16),V=!1),this.o=this.o&&V,!V)oe(this.i,this.l,ut,"[Invalid Chunked Response]"),ei(this),bo(this);else if(0<ut.length&&!this.W){this.W=!0;var Yo=this.j;Yo.g==this&&Yo.ba&&!Yo.M&&(Yo.j.info("Great, no buffering proxy detected. Bytes received: "+ut.length),vM(Yo),Yo.M=!0,br(11))}}else oe(this.i,this.l,ut,null),ti(this,ut);Ko==4&&ei(this),this.o&&!this.J&&(Ko==4?OX(this.j,this):(this.o=!1,Wr(this)))}else fg(this.g),V==400&&0<ut.indexOf("Unknown SID")?(this.s=3,br(12)):(this.s=0,br(13)),ei(this),bo(this)}}}catch{}finally{}};function fr(x){return x.g?x.u=="GET"&&x.L!=2&&x.j.Ca:!1}function Rn(x,$){var V=x.C,X=$.indexOf(`
`,V);return X==-1?tr:(V=Number($.substring(V,X)),isNaN(V)?$n:(X+=1,X+V>$.length?tr:($=$.slice(X,X+V),x.C=X+V,$)))}_n.prototype.cancel=function(){this.J=!0,ei(this)};function Wr(x){x.S=Date.now()+x.I,Qi(x,x.I)}function Qi(x,$){if(x.B!=null)throw Error("WatchDog timer not null");x.B=Ts(d(x.ba,x),$)}function _r(x){x.B&&(a.clearTimeout(x.B),x.B=null)}_n.prototype.ba=function(){this.B=null;const x=Date.now();0<=x-this.S?(xe(this.i,this.A),this.L!=2&&(Qn(),br(17)),ei(this),this.s=2,bo(this)):Qi(this,this.S-x)};function bo(x){x.j.G==0||x.J||OX(x.j,x)}function ei(x){_r(x);var $=x.M;$&&typeof $.ma=="function"&&$.ma(),x.M=null,Bn(x.U),x.g&&($=x.g,x.g=null,$.abort(),$.ma())}function ti(x,$){try{var V=x.j;if(V.G!=0&&(V.g==x||Ac(V.h,x))){if(!x.K&&Ac(V.h,x)&&V.G==3){try{var X=V.Da.g.parse($)}catch{X=null}if(Array.isArray(X)&&X.length==3){var ye=X;if(ye[0]==0){e:if(!V.u){if(V.g)if(V.g.F+3e3<x.F)RA(V),kA(V);else break e;yM(V),br(18)}}else V.za=ye[1],0<V.za-V.T&&37500>ye[2]&&V.F&&V.v==0&&!V.C&&(V.C=Ts(d(V.Za,V),6e3));if(1>=Du(V.h)&&V.ca){try{V.ca()}catch{}V.ca=void 0}}else dg(V,11)}else if((x.K||V.g==x)&&RA(V),!v($))for(ye=V.Da.g.parse($),$=0;$<ye.length;$++){let Un=ye[$];if(V.T=Un[0],Un=Un[1],V.G==2)if(Un[0]=="c"){V.K=Un[1],V.ia=Un[2];const Yo=Un[3];Yo!=null&&(V.la=Yo,V.j.info("VER="+V.la));const Ko=Un[4];Ko!=null&&(V.Aa=Ko,V.j.info("SVER="+V.Aa));const av=Un[5];av!=null&&typeof av=="number"&&0<av&&(X=1.5*av,V.L=X,V.j.info("backChannelRequestTimeoutMs_="+X)),X=V;const xl=x.g;if(xl){const PA=xl.g?xl.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(PA){var Ie=X.h;Ie.g||PA.indexOf("spdy")==-1&&PA.indexOf("quic")==-1&&PA.indexOf("h2")==-1||(Ie.j=Ie.l,Ie.g=new Set,Ie.h&&(Y(Ie,Ie.h),Ie.h=null))}if(X.D){const bM=xl.g?xl.g.getResponseHeader("X-HTTP-Session-Id"):null;bM&&(X.ya=bM,It(X.I,X.D,bM))}}V.G=3,V.l&&V.l.ua(),V.ba&&(V.R=Date.now()-x.F,V.j.info("Handshake RTT: "+V.R+"ms")),X=V;var ut=x;if(X.qa=LX(X,X.J?X.ia:null,X.W),ut.K){re(X.h,ut);var pr=ut,_o=X.L;_o&&(pr.I=_o),pr.B&&(_r(pr),Wr(pr)),X.g=ut}else PX(X);0<V.i.length&&IA(V)}else Un[0]!="stop"&&Un[0]!="close"||dg(V,7);else V.G==3&&(Un[0]=="stop"||Un[0]=="close"?Un[0]=="stop"?dg(V,7):ov(V):Un[0]!="noop"&&V.l&&V.l.ta(Un),V.v=0)}}Qn(4)}catch{}}var qo=class{constructor(x,$){this.g=x,this.map=$}};function Cs(x){this.l=x||10,a.PerformanceNavigationTiming?(x=a.performance.getEntriesByType("navigation"),x=0<x.length&&(x[0].nextHopProtocol=="hq"||x[0].nextHopProtocol=="h2")):x=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=x?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Ji(x){return x.h?!0:x.g?x.g.size>=x.j:!1}function Du(x){return x.h?1:x.g?x.g.size:0}function Ac(x,$){return x.h?x.h==$:x.g?x.g.has($):!1}function Y(x,$){x.g?x.g.add($):x.h=$}function re(x,$){x.h&&x.h==$?x.h=null:x.g&&x.g.has($)&&x.g.delete($)}Cs.prototype.cancel=function(){if(this.i=J(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const x of this.g.values())x.cancel();this.g.clear()}};function J(x){if(x.h!=null)return x.i.concat(x.h.D);if(x.g!=null&&x.g.size!==0){let $=x.i;for(const V of x.g.values())$=$.concat(V.D);return $}return m(x.i)}function ue(x){if(x.V&&typeof x.V=="function")return x.V();if(typeof Map<"u"&&x instanceof Map||typeof Set<"u"&&x instanceof Set)return Array.from(x.values());if(typeof x=="string")return x.split("");if(u(x)){for(var $=[],V=x.length,X=0;X<V;X++)$.push(x[X]);return $}$=[],V=0;for(X in x)$[V++]=x[X];return $}function de(x){if(x.na&&typeof x.na=="function")return x.na();if(!x.V||typeof x.V!="function"){if(typeof Map<"u"&&x instanceof Map)return Array.from(x.keys());if(!(typeof Set<"u"&&x instanceof Set)){if(u(x)||typeof x=="string"){var $=[];x=x.length;for(var V=0;V<x;V++)$.push(V);return $}$=[],V=0;for(const X in x)$[V++]=X;return $}}}function ae(x,$){if(x.forEach&&typeof x.forEach=="function")x.forEach($,void 0);else if(u(x)||typeof x=="string")Array.prototype.forEach.call(x,$,void 0);else for(var V=de(x),X=ue(x),ye=X.length,Ie=0;Ie<ye;Ie++)$.call(void 0,X[Ie],V&&V[Ie],x)}var Ne=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Be(x,$){if(x){x=x.split("&");for(var V=0;V<x.length;V++){var X=x[V].indexOf("="),ye=null;if(0<=X){var Ie=x[V].substring(0,X);ye=x[V].substring(X+1)}else Ie=x[V];$(Ie,ye?decodeURIComponent(ye.replace(/\+/g," ")):"")}}}function Ve(x){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,x instanceof Ve){this.h=x.h,nt(this,x.j),this.o=x.o,this.g=x.g,_t(this,x.s),this.l=x.l;var $=x.i,V=new Ou;V.i=$.i,$.g&&(V.g=new Map($.g),V.h=$.h),Jt(this,V),this.m=x.m}else x&&($=String(x).match(Ne))?(this.h=!1,nt(this,$[1]||"",!0),this.o=nr($[2]||""),this.g=nr($[3]||"",!0),_t(this,$[4]),this.l=nr($[5]||"",!0),Jt(this,$[6]||"",!0),this.m=nr($[7]||"")):(this.h=!1,this.i=new Ou(null,this.h))}Ve.prototype.toString=function(){var x=[],$=this.j;$&&x.push(rr($,kc,!0),":");var V=this.g;return(V||$=="file")&&(x.push("//"),($=this.o)&&x.push(rr($,kc,!0),"@"),x.push(encodeURIComponent(String(V)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),V=this.s,V!=null&&x.push(":",String(V))),(V=this.l)&&(this.g&&V.charAt(0)!="/"&&x.push("/"),x.push(rr(V,V.charAt(0)=="/"?mw:td,!0))),(V=this.i.toString())&&x.push("?",V),(V=this.m)&&x.push("#",rr(V,EA)),x.join("")};function qe(x){return new Ve(x)}function nt(x,$,V){x.j=V?nr($,!0):$,x.j&&(x.j=x.j.replace(/:$/,""))}function _t(x,$){if($){if($=Number($),isNaN($)||0>$)throw Error("Bad port number "+$);x.s=$}else x.s=null}function Jt(x,$,V){$ instanceof Ou?(x.i=$,gw(x.i,x.h)):(V||($=rr($,ag)),x.i=new Ou($,x.h))}function It(x,$,V){x.i.set($,V)}function wn(x){return It(x,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),x}function nr(x,$){return x?$?decodeURI(x.replace(/%25/g,"%2525")):decodeURIComponent(x):""}function rr(x,$,V){return typeof x=="string"?(x=encodeURI(x).replace($,Wo),V&&(x=x.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),x):null}function Wo(x){return x=x.charCodeAt(0),"%"+(x>>4&15).toString(16)+(x&15).toString(16)}var kc=/[#\/\?@]/g,td=/[#\?:]/g,mw=/[#\?]/g,ag=/[#\?@]/g,EA=/#/g;function Ou(x,$){this.h=this.g=null,this.i=x||null,this.j=!!$}function na(x){x.g||(x.g=new Map,x.h=0,x.i&&Be(x.i,function($,V){x.add(decodeURIComponent($.replace(/\+/g," ")),V)}))}e=Ou.prototype,e.add=function(x,$){na(this),this.i=null,x=rd(this,x);var V=this.g.get(x);return V||this.g.set(x,V=[]),V.push($),this.h+=1,this};function nd(x,$){na(x),$=rd(x,$),x.g.has($)&&(x.i=null,x.h-=x.g.get($).length,x.g.delete($))}function rv(x,$){return na(x),$=rd(x,$),x.g.has($)}e.forEach=function(x,$){na(this),this.g.forEach(function(V,X){V.forEach(function(ye){x.call($,ye,X,this)},this)},this)},e.na=function(){na(this);const x=Array.from(this.g.values()),$=Array.from(this.g.keys()),V=[];for(let X=0;X<$.length;X++){const ye=x[X];for(let Ie=0;Ie<ye.length;Ie++)V.push($[X])}return V},e.V=function(x){na(this);let $=[];if(typeof x=="string")rv(this,x)&&($=$.concat(this.g.get(rd(this,x))));else{x=Array.from(this.g.values());for(let V=0;V<x.length;V++)$=$.concat(x[V])}return $},e.set=function(x,$){return na(this),this.i=null,x=rd(this,x),rv(this,x)&&(this.h-=this.g.get(x).length),this.g.set(x,[$]),this.h+=1,this},e.get=function(x,$){return x?(x=this.V(x),0<x.length?String(x[0]):$):$};function xA(x,$,V){nd(x,$),0<V.length&&(x.i=null,x.g.set(rd(x,$),m(V)),x.h+=V.length)}e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const x=[],$=Array.from(this.g.keys());for(var V=0;V<$.length;V++){var X=$[V];const Ie=encodeURIComponent(String(X)),ut=this.V(X);for(X=0;X<ut.length;X++){var ye=Ie;ut[X]!==""&&(ye+="="+encodeURIComponent(String(ut[X]))),x.push(ye)}}return this.i=x.join("&")};function rd(x,$){return $=String($),x.j&&($=$.toLowerCase()),$}function gw(x,$){$&&!x.j&&(na(x),x.i=null,x.g.forEach(function(V,X){var ye=X.toLowerCase();X!=ye&&(nd(this,X),xA(this,ye,V))},x)),x.j=$}function TA(x,$){const V=new Ss;if(a.Image){const X=new Image;X.onload=h(ra,V,"TestLoadImage: loaded",!0,$,X),X.onerror=h(ra,V,"TestLoadImage: error",!1,$,X),X.onabort=h(ra,V,"TestLoadImage: abort",!1,$,X),X.ontimeout=h(ra,V,"TestLoadImage: timeout",!1,$,X),a.setTimeout(function(){X.ontimeout&&X.ontimeout()},1e4),X.src=x}else $(!1)}function id(x,$){const V=new Ss,X=new AbortController,ye=setTimeout(()=>{X.abort(),ra(V,"TestPingServer: timeout",!1,$)},1e4);fetch(x,{signal:X.signal}).then(Ie=>{clearTimeout(ye),Ie.ok?ra(V,"TestPingServer: ok",!0,$):ra(V,"TestPingServer: server error",!1,$)}).catch(()=>{clearTimeout(ye),ra(V,"TestPingServer: error",!1,$)})}function ra(x,$,V,X,ye){try{ye&&(ye.onload=null,ye.onerror=null,ye.onabort=null,ye.ontimeout=null),X(V)}catch{}}function gM(){this.g=new Dn}function SA(x,$,V){const X=V||"";try{ae(x,function(ye,Ie){let ut=ye;l(ye)&&(ut=Zt(ye)),$.push(X+Ie+"="+encodeURIComponent(ut))})}catch(ye){throw $.push(X+"type="+encodeURIComponent("_badmap")),ye}}function ug(x){this.l=x.Ub||null,this.j=x.eb||!1}p(ug,On),ug.prototype.g=function(){return new lg(this.l,this.j)},ug.prototype.i=function(x){return function(){return x}}({});function lg(x,$){ce.call(this),this.D=x,this.o=$,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}p(lg,ce),e=lg.prototype,e.open=function(x,$){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=x,this.A=$,this.readyState=1,Mh(this)},e.send=function(x){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const $={headers:this.u,method:this.B,credentials:this.m,cache:void 0};x&&($.body=x),(this.D||a).fetch(new Request(this.A,$)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,cg(this)),this.readyState=0},e.Sa=function(x){if(this.g&&(this.l=x,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=x.headers,this.readyState=2,Mh(this)),this.g&&(this.readyState=3,Mh(this),this.g)))if(this.responseType==="arraybuffer")x.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in x){if(this.j=x.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;CA(this)}else x.text().then(this.Ra.bind(this),this.ga.bind(this))};function CA(x){x.j.read().then(x.Pa.bind(x)).catch(x.ga.bind(x))}e.Pa=function(x){if(this.g){if(this.o&&x.value)this.response.push(x.value);else if(!this.o){var $=x.value?x.value:new Uint8Array(0);($=this.v.decode($,{stream:!x.done}))&&(this.response=this.responseText+=$)}x.done?cg(this):Mh(this),this.readyState==3&&CA(this)}},e.Ra=function(x){this.g&&(this.response=this.responseText=x,cg(this))},e.Qa=function(x){this.g&&(this.response=x,cg(this))},e.ga=function(){this.g&&cg(this)};function cg(x){x.readyState=4,x.l=null,x.j=null,x.v=null,Mh(x)}e.setRequestHeader=function(x,$){this.u.append(x,$)},e.getResponseHeader=function(x){return this.h&&this.h.get(x.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const x=[],$=this.h.entries();for(var V=$.next();!V.done;)V=V.value,x.push(V[0]+": "+V[1]),V=$.next();return x.join(`\r
`)};function Mh(x){x.onreadystatechange&&x.onreadystatechange.call(x)}Object.defineProperty(lg.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(x){this.m=x?"include":"same-origin"}});function AA(x){let $="";return S(x,function(V,X){$+=X,$+=":",$+=V,$+=`\r
`}),$}function ee(x,$,V){e:{for(X in V){var X=!1;break e}X=!0}X||(V=AA(V),typeof x=="string"?V!=null&&encodeURIComponent(String(V)):It(x,$,V))}function se(x){ce.call(this),this.headers=new Map,this.o=x||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}p(se,ce);var Ce=/^https?$/i,Tt=["POST","PUT"];e=se.prototype,e.Ha=function(x){this.J=x},e.ea=function(x,$,V,X){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+x);$=$?$.toUpperCase():"GET",this.D=x,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Bt.g(),this.v=this.o?Ho(this.o):Ho(Bt),this.g.onreadystatechange=d(this.Ea,this);try{this.B=!0,this.g.open($,String(x),!0),this.B=!1}catch(Ie){gn(this,Ie);return}if(x=V||"",V=new Map(this.headers),X)if(Object.getPrototypeOf(X)===Object.prototype)for(var ye in X)V.set(ye,X[ye]);else if(typeof X.keys=="function"&&typeof X.get=="function")for(const Ie of X.keys())V.set(Ie,X.get(Ie));else throw Error("Unknown input type for opt_headers: "+String(X));X=Array.from(V.keys()).find(Ie=>Ie.toLowerCase()=="content-type"),ye=a.FormData&&x instanceof a.FormData,!(0<=Array.prototype.indexOf.call(Tt,$,void 0))||X||ye||V.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Ie,ut]of V)this.g.setRequestHeader(Ie,ut);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{hr(this),this.u=!0,this.g.send(x),this.u=!1}catch(Ie){gn(this,Ie)}};function gn(x,$){x.h=!1,x.g&&(x.j=!0,x.g.abort(),x.j=!1),x.l=$,x.m=5,Jn(x),En(x)}function Jn(x){x.A||(x.A=!0,Te(x,"complete"),Te(x,"error"))}e.abort=function(x){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=x||7,Te(this,"complete"),Te(this,"abort"),En(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),En(this,!0)),se.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?dr(this):this.bb())},e.bb=function(){dr(this)};function dr(x){if(x.h&&typeof s<"u"&&(!x.v[1]||pi(x)!=4||x.Z()!=2)){if(x.u&&pi(x)==4)st(x.Ea,0,x);else if(Te(x,"readystatechange"),pi(x)==4){x.h=!1;try{const ut=x.Z();e:switch(ut){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var $=!0;break e;default:$=!1}var V;if(!(V=$)){var X;if(X=ut===0){var ye=String(x.D).match(Ne)[1]||null;!ye&&a.self&&a.self.location&&(ye=a.self.location.protocol.slice(0,-1)),X=!Ce.test(ye?ye.toLowerCase():"")}V=X}if(V)Te(x,"complete"),Te(x,"success");else{x.m=6;try{var Ie=2<pi(x)?x.g.statusText:""}catch{Ie=""}x.l=Ie+" ["+x.Z()+"]",Jn(x)}}finally{En(x)}}}}function En(x,$){if(x.g){hr(x);const V=x.g,X=x.v[0]?()=>{}:null;x.g=null,x.v=null,$||Te(x,"ready");try{V.onreadystatechange=X}catch{}}}function hr(x){x.I&&(a.clearTimeout(x.I),x.I=null)}e.isActive=function(){return!!this.g};function pi(x){return x.g?x.g.readyState:0}e.Z=function(){try{return 2<pi(this)?this.g.status:-1}catch{return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},e.Oa=function(x){if(this.g){var $=this.g.responseText;return x&&$.indexOf(x)==0&&($=$.substring(x.length)),an($)}};function Go(x){try{if(!x.g)return null;if("response"in x.g)return x.g.response;switch(x.H){case"":case"text":return x.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in x.g)return x.g.mozResponseArrayBuffer}return null}catch{return null}}function fg(x){const $={};x=(x.g&&2<=pi(x)&&x.g.getAllResponseHeaders()||"").split(`\r
`);for(let X=0;X<x.length;X++){if(v(x[X]))continue;var V=N(x[X]);const ye=V[0];if(V=V[1],typeof V!="string")continue;V=V.trim();const Ie=$[ye]||[];$[ye]=Ie,Ie.push(V)}T($,function(X){return X.join(", ")})}e.Ba=function(){return this.m},e.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function od(x,$,V){return V&&V.internalChannelParams&&V.internalChannelParams[x]||$}function iv(x){this.Aa=0,this.i=[],this.j=new Ss,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=od("failFast",!1,x),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=od("baseRetryDelayMs",5e3,x),this.cb=od("retryDelaySeedMs",1e4,x),this.Wa=od("forwardChannelMaxRetries",2,x),this.wa=od("forwardChannelRequestTimeoutMs",2e4,x),this.pa=x&&x.xmlHttpFactory||void 0,this.Xa=x&&x.Tb||void 0,this.Ca=x&&x.useFetchStreams||!1,this.L=void 0,this.J=x&&x.supportsCrossDomainXhr||!1,this.K="",this.h=new Cs(x&&x.concurrentRequestLimit),this.Da=new gM,this.P=x&&x.fastHandshake||!1,this.O=x&&x.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=x&&x.Rb||!1,x&&x.xa&&this.j.xa(),x&&x.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&x&&x.detectBufferingProxy||!1,this.ja=void 0,x&&x.longPollingTimeout&&0<x.longPollingTimeout&&(this.ja=x.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}e=iv.prototype,e.la=8,e.G=1,e.connect=function(x,$,V,X){br(0),this.W=x,this.H=$||{},V&&X!==void 0&&(this.H.OSID=V,this.H.OAID=X),this.F=this.X,this.I=LX(this,null,this.W),IA(this)};function ov(x){if(IX(x),x.G==3){var $=x.U++,V=qe(x.I);if(It(V,"SID",x.K),It(V,"RID",$),It(V,"TYPE","terminate"),yw(x,V),$=new _n(x,x.j,$),$.L=2,$.v=wn(qe(V)),V=!1,a.navigator&&a.navigator.sendBeacon)try{V=a.navigator.sendBeacon($.v.toString(),"")}catch{}!V&&a.Image&&(new Image().src=$.v,V=!0),V||($.g=FX($.j,null),$.g.ea($.v)),$.F=Date.now(),Wr($)}MX(x)}function kA(x){x.g&&(vM(x),x.g.cancel(),x.g=null)}function IX(x){kA(x),x.u&&(a.clearTimeout(x.u),x.u=null),RA(x),x.h.cancel(),x.s&&(typeof x.s=="number"&&a.clearTimeout(x.s),x.s=null)}function IA(x){if(!Ji(x.h)&&!x.s){x.s=!0;var $=x.Ga;B||P(),U||(B(),U=!0),H.add($,x),x.B=0}}function YRe(x,$){return Du(x.h)>=x.h.j-(x.s?1:0)?!1:x.s?(x.i=$.D.concat(x.i),!0):x.G==1||x.G==2||x.B>=(x.Va?0:x.Wa)?!1:(x.s=Ts(d(x.Ga,x,$),$X(x,x.B)),x.B++,!0)}e.Ga=function(x){if(this.s)if(this.s=null,this.G==1){if(!x){this.U=Math.floor(1e5*Math.random()),x=this.U++;const ye=new _n(this,this.j,x);let Ie=this.o;if(this.S&&(Ie?(Ie=C(Ie),R(Ie,this.S)):Ie=this.S),this.m!==null||this.O||(ye.H=Ie,Ie=null),this.P)e:{for(var $=0,V=0;V<this.i.length;V++){t:{var X=this.i[V];if("__data__"in X.map&&(X=X.map.__data__,typeof X=="string")){X=X.length;break t}X=void 0}if(X===void 0)break;if($+=X,4096<$){$=V;break e}if($===4096||V===this.i.length-1){$=V+1;break e}}$=1e3}else $=1e3;$=NX(this,ye,$),V=qe(this.I),It(V,"RID",x),It(V,"CVER",22),this.D&&It(V,"X-HTTP-Session-Id",this.D),yw(this,V),Ie&&(this.O?$="headers="+encodeURIComponent(String(AA(Ie)))+"&"+$:this.m&&ee(V,this.m,Ie)),Y(this.h,ye),this.Ua&&It(V,"TYPE","init"),this.P?(It(V,"$req",$),It(V,"SID","null"),ye.T=!0,jt(ye,V,null)):jt(ye,V,$),this.G=2}}else this.G==3&&(x?RX(this,x):this.i.length==0||Ji(this.h)||RX(this))};function RX(x,$){var V;$?V=$.l:V=x.U++;const X=qe(x.I);It(X,"SID",x.K),It(X,"RID",V),It(X,"AID",x.T),yw(x,X),x.m&&x.o&&ee(X,x.m,x.o),V=new _n(x,x.j,V,x.B+1),x.m===null&&(V.H=x.o),$&&(x.i=$.D.concat(x.i)),$=NX(x,V,1e3),V.I=Math.round(.5*x.wa)+Math.round(.5*x.wa*Math.random()),Y(x.h,V),jt(V,X,$)}function yw(x,$){x.H&&S(x.H,function(V,X){It($,X,V)}),x.l&&ae({},function(V,X){It($,X,V)})}function NX(x,$,V){V=Math.min(x.i.length,V);var X=x.l?d(x.l.Na,x.l,x):null;e:{var ye=x.i;let Ie=-1;for(;;){const ut=["count="+V];Ie==-1?0<V?(Ie=ye[0].g,ut.push("ofs="+Ie)):Ie=0:ut.push("ofs="+Ie);let pr=!0;for(let _o=0;_o<V;_o++){let Un=ye[_o].g;const Yo=ye[_o].map;if(Un-=Ie,0>Un)Ie=Math.max(0,ye[_o].g-100),pr=!1;else try{SA(Yo,ut,"req"+Un+"_")}catch{X&&X(Yo)}}if(pr){X=ut.join("&");break e}}}return x=x.i.splice(0,V),$.D=x,X}function PX(x){if(!x.g&&!x.u){x.Y=1;var $=x.Fa;B||P(),U||(B(),U=!0),H.add($,x),x.v=0}}function yM(x){return x.g||x.u||3<=x.v?!1:(x.Y++,x.u=Ts(d(x.Fa,x),$X(x,x.v)),x.v++,!0)}e.Fa=function(){if(this.u=null,DX(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var x=2*this.R;this.j.info("BP detection timer enabled: "+x),this.A=Ts(d(this.ab,this),x)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,br(10),kA(this),DX(this))};function vM(x){x.A!=null&&(a.clearTimeout(x.A),x.A=null)}function DX(x){x.g=new _n(x,x.j,"rpc",x.Y),x.m===null&&(x.g.H=x.o),x.g.O=0;var $=qe(x.qa);It($,"RID","rpc"),It($,"SID",x.K),It($,"AID",x.T),It($,"CI",x.F?"0":"1"),!x.F&&x.ja&&It($,"TO",x.ja),It($,"TYPE","xmlhttp"),yw(x,$),x.m&&x.o&&ee($,x.m,x.o),x.L&&(x.g.I=x.L);var V=x.g;x=x.ia,V.L=1,V.v=wn(qe($)),V.m=null,V.P=!0,Mn(V,x)}e.Za=function(){this.C!=null&&(this.C=null,kA(this),yM(this),br(19))};function RA(x){x.C!=null&&(a.clearTimeout(x.C),x.C=null)}function OX(x,$){var V=null;if(x.g==$){RA(x),vM(x),x.g=null;var X=2}else if(Ac(x.h,$))V=$.D,re(x.h,$),X=1;else return;if(x.G!=0){if($.o)if(X==1){V=$.m?$.m.length:0,$=Date.now()-$.F;var ye=x.B;X=Wa(),Te(X,new ta(X,V)),IA(x)}else PX(x);else if(ye=$.s,ye==3||ye==0&&0<$.X||!(X==1&&YRe(x,$)||X==2&&yM(x)))switch(V&&0<V.length&&($=x.h,$.i=$.i.concat(V)),ye){case 1:dg(x,5);break;case 4:dg(x,10);break;case 3:dg(x,6);break;default:dg(x,2)}}}function $X(x,$){let V=x.Ta+Math.floor(Math.random()*x.cb);return x.isActive()||(V*=2),V*$}function dg(x,$){if(x.j.info("Error code "+$),$==2){var V=d(x.fb,x),X=x.Xa;const ye=!X;X=new Ve(X||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||nt(X,"https"),wn(X),ye?TA(X.toString(),V):id(X.toString(),V)}else br(2);x.G=0,x.l&&x.l.sa($),MX(x),IX(x)}e.fb=function(x){x?(this.j.info("Successfully pinged google.com"),br(2)):(this.j.info("Failed to ping google.com"),br(1))};function MX(x){if(x.G=0,x.ka=[],x.l){const $=J(x.h);($.length!=0||x.i.length!=0)&&(g(x.ka,$),g(x.ka,x.i),x.h.i.length=0,m(x.i),x.i.length=0),x.l.ra()}}function LX(x,$,V){var X=V instanceof Ve?qe(V):new Ve(V);if(X.g!="")$&&(X.g=$+"."+X.g),_t(X,X.s);else{var ye=a.location;X=ye.protocol,$=$?$+"."+ye.hostname:ye.hostname,ye=+ye.port;var Ie=new Ve(null);X&&nt(Ie,X),$&&(Ie.g=$),ye&&_t(Ie,ye),V&&(Ie.l=V),X=Ie}return V=x.D,$=x.ya,V&&$&&It(X,V,$),It(X,"VER",x.la),yw(x,X),X}function FX(x,$,V){if($&&!x.J)throw Error("Can't create secondary domain capable XhrIo object.");return $=x.Ca&&!x.pa?new se(new ug({eb:V})):new se(x.pa),$.Ha(x.J),$}e.isActive=function(){return!!this.l&&this.l.isActive(this)};function jX(){}e=jX.prototype,e.ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){};function NA(){}NA.prototype.g=function(x,$){return new Ga(x,$)};function Ga(x,$){ce.call(this),this.g=new iv($),this.l=x,this.h=$&&$.messageUrlParams||null,x=$&&$.messageHeaders||null,$&&$.clientProtocolHeaderRequired&&(x?x["X-Client-Protocol"]="webchannel":x={"X-Client-Protocol":"webchannel"}),this.g.o=x,x=$&&$.initMessageHeaders||null,$&&$.messageContentType&&(x?x["X-WebChannel-Content-Type"]=$.messageContentType:x={"X-WebChannel-Content-Type":$.messageContentType}),$&&$.va&&(x?x["X-WebChannel-Client-Profile"]=$.va:x={"X-WebChannel-Client-Profile":$.va}),this.g.S=x,(x=$&&$.Sb)&&!v(x)&&(this.g.m=x),this.v=$&&$.supportsCrossDomainXhr||!1,this.u=$&&$.sendRawJson||!1,($=$&&$.httpSessionIdParam)&&!v($)&&(this.g.D=$,x=this.h,x!==null&&$ in x&&(x=this.h,$ in x&&delete x[$])),this.j=new sv(this)}p(Ga,ce),Ga.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Ga.prototype.close=function(){ov(this.g)},Ga.prototype.o=function(x){var $=this.g;if(typeof x=="string"){var V={};V.__data__=x,x=V}else this.u&&(V={},V.__data__=Zt(x),x=V);$.i.push(new qo($.Ya++,x)),$.G==3&&IA($)},Ga.prototype.N=function(){this.g.l=null,delete this.j,ov(this.g),delete this.g,Ga.aa.N.call(this)};function BX(x){Zr.call(this),x.__headers__&&(this.headers=x.__headers__,this.statusCode=x.__status__,delete x.__headers__,delete x.__status__);var $=x.__sm__;if($){e:{for(const V in $){x=V;break e}x=void 0}(this.i=x)&&(x=this.i,$=$!==null&&x in $?$[x]:void 0),this.data=$}else this.data=x}p(BX,Zr);function UX(){er.call(this),this.status=1}p(UX,er);function sv(x){this.g=x}p(sv,jX),sv.prototype.ua=function(){Te(this.g,"a")},sv.prototype.ta=function(x){Te(this.g,new BX(x))},sv.prototype.sa=function(x){Te(this.g,new UX)},sv.prototype.ra=function(){Te(this.g,"b")},NA.prototype.createWebChannel=NA.prototype.g,Ga.prototype.send=Ga.prototype.o,Ga.prototype.open=Ga.prototype.m,Ga.prototype.close=Ga.prototype.close,A_e=function(){return new NA},C_e=function(){return Wa()},S_e=Si,d9={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},rt.NO_ERROR=0,rt.TIMEOUT=8,rt.HTTP_ERROR=6,nI=rt,Et.COMPLETE="complete",T_e=Et,Jr.EventType=un,un.OPEN="a",un.CLOSE="b",un.ERROR="c",un.MESSAGE="d",ce.prototype.listen=ce.prototype.K,FE=Jr,x_e=ug,se.prototype.listenOnce=se.prototype.L,se.prototype.getLastError=se.prototype.Ka,se.prototype.getLastErrorCode=se.prototype.Ba,se.prototype.getStatus=se.prototype.Z,se.prototype.getResponseJson=se.prototype.Oa,se.prototype.getResponseText=se.prototype.oa,se.prototype.send=se.prototype.ea,se.prototype.setWithCredentials=se.prototype.Ha,E_e=se}).apply(typeof L2<"u"?L2:typeof self<"u"?self:typeof window<"u"?window:{});const Aie="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ca{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}ca.UNAUTHENTICATED=new ca(null),ca.GOOGLE_CREDENTIALS=new ca("google-credentials-uid"),ca.FIRST_PARTY=new ca("first-party-uid"),ca.MOCK_USER=new ca("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let H_="10.12.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G0=new GO("@firebase/firestore");function Ww(){return G0.logLevel}function St(e,...t){if(G0.logLevel<=Cn.DEBUG){const n=t.map(tq);G0.debug(`Firestore (${H_}): ${e}`,...n)}}function ch(e,...t){if(G0.logLevel<=Cn.ERROR){const n=t.map(tq);G0.error(`Firestore (${H_}): ${e}`,...n)}}function nS(e,...t){if(G0.logLevel<=Cn.WARN){const n=t.map(tq);G0.warn(`Firestore (${H_}): ${e}`,...n)}}function tq(e){if(typeof e=="string")return e;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(e)}catch{return e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gt(e="Unexpected state"){const t=`FIRESTORE (${H_}) INTERNAL ASSERTION FAILED: `+e;throw ch(t),new Error(t)}function Tr(e,t){e||Gt()}function Xt(e,t){return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class yt extends Vf{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zd{constructor(){this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X0t{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class Q0t{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable(()=>n(ca.UNAUTHENTICATED))}shutdown(){}}class J0t{constructor(t){this.t=t,this.currentUser=ca.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){let r=this.i;const i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let o=new zd;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new zd,t.enqueueRetryable(()=>i(this.currentUser))};const s=()=>{const u=o;t.enqueueRetryable(async()=>{await u.promise,await i(this.currentUser)})},a=u=>{St("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.auth.addAuthTokenListener(this.o),s()};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?a(u):(St("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new zd)}},0),s()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==t?(St("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Tr(typeof r.accessToken=="string"),new X0t(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const t=this.auth&&this.auth.getUid();return Tr(t===null||typeof t=="string"),new ca(t)}}class Z0t{constructor(t,n,r){this.l=t,this.h=n,this.P=r,this.type="FirstParty",this.user=ca.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const t=this.T();return t&&this.I.set("Authorization",t),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class eyt{constructor(t,n,r){this.l=t,this.h=n,this.P=r}getToken(){return Promise.resolve(new Z0t(this.l,this.h,this.P))}start(t,n){t.enqueueRetryable(()=>n(ca.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class tyt{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class nyt{constructor(t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(t,n){const r=o=>{o.error!=null&&St("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const s=o.token!==this.R;return this.R=o.token,St("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?n(o.token):Promise.resolve()};this.o=o=>{t.enqueueRetryable(()=>r(o))};const i=o=>{St("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){const o=this.A.getImmediate({optional:!0});o?i(o):St("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(n=>n?(Tr(typeof n.token=="string"),this.R=n.token,new tyt(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ryt(e){const t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k_e{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/t.length)*t.length;let r="";for(;r.length<20;){const i=ryt(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<n&&(r+=t.charAt(i[o]%t.length))}return r}}function Wn(e,t){return e<t?-1:e>t?1:0}function kb(e,t,n){return e.length===t.length&&e.every((r,i)=>n(r,t[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vi{constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new yt(Fe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new yt(Fe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new yt(Fe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new yt(Fe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return Vi.fromMillis(Date.now())}static fromDate(t){return Vi.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),r=Math.floor(1e6*(t-1e3*n));return new Vi(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?Wn(this.nanoseconds,t.nanoseconds):Wn(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kt{constructor(t){this.timestamp=t}static fromTimestamp(t){return new Kt(t)}static min(){return new Kt(new Vi(0,0))}static max(){return new Kt(new Vi(253402300799,999999999))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rS{constructor(t,n,r){n===void 0?n=0:n>t.length&&Gt(),r===void 0?r=t.length-n:r>t.length-n&&Gt(),this.segments=t,this.offset=n,this.len=r}get length(){return this.len}isEqual(t){return rS.comparator(this,t)===0}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof rS?t.forEach(r=>{n.push(r)}):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,r=this.limit();n<r;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const r=Math.min(t.length,n.length);for(let i=0;i<r;i++){const o=t.get(i),s=n.get(i);if(o<s)return-1;if(o>s)return 1}return t.length<n.length?-1:t.length>n.length?1:0}}class Rr extends rS{construct(t,n,r){return new Rr(t,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const n=[];for(const r of t){if(r.indexOf("//")>=0)throw new yt(Fe.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new Rr(n)}static emptyPath(){return new Rr([])}}const iyt=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class No extends rS{construct(t,n,r){return new No(t,n,r)}static isValidIdentifier(t){return iyt.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),No.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new No(["__name__"])}static fromServerFormat(t){const n=[];let r="",i=0;const o=()=>{if(r.length===0)throw new yt(Fe.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let s=!1;for(;i<t.length;){const a=t[i];if(a==="\\"){if(i+1===t.length)throw new yt(Fe.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const u=t[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new yt(Fe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new yt(Fe.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new No(n)}static emptyPath(){return new No([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lt{constructor(t){this.path=t}static fromPath(t){return new Lt(Rr.fromString(t))}static fromName(t){return new Lt(Rr.fromString(t).popFirst(5))}static empty(){return new Lt(Rr.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&Rr.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return Rr.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new Lt(new Rr(t.slice()))}}function oyt(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=Kt.fromTimestamp(r===1e9?new Vi(n+1,0):new Vi(n,r));return new pm(i,Lt.empty(),t)}function syt(e){return new pm(e.readTime,e.key,-1)}class pm{constructor(t,n,r){this.readTime=t,this.documentKey=n,this.largestBatchId=r}static min(){return new pm(Kt.min(),Lt.empty(),-1)}static max(){return new pm(Kt.max(),Lt.empty(),-1)}}function ayt(e,t){let n=e.readTime.compareTo(t.readTime);return n!==0?n:(n=Lt.comparator(e.documentKey,t.documentKey),n!==0?n:Wn(e.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uyt="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class lyt{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kC(e){if(e.code!==Fe.FAILED_PRECONDITION||e.message!==uyt)throw e;St("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ye{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&Gt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new Ye((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(t,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(n,o).next(r,i)}})}toPromise(){return new Promise((t,n)=>{this.next(t,n)})}wrapUserFunction(t){try{const n=t();return n instanceof Ye?n:Ye.resolve(n)}catch(n){return Ye.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction(()=>t(n)):Ye.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction(()=>t(n)):Ye.reject(n)}static resolve(t){return new Ye((n,r)=>{n(t)})}static reject(t){return new Ye((n,r)=>{r(t)})}static waitFor(t){return new Ye((n,r)=>{let i=0,o=0,s=!1;t.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&n()},u=>r(u))}),s=!0,o===i&&n()})}static or(t){let n=Ye.resolve(!1);for(const r of t)n=n.next(i=>i?Ye.resolve(i):r());return n}static forEach(t,n){const r=[];return t.forEach((i,o)=>{r.push(n.call(this,i,o))}),this.waitFor(r)}static mapArray(t,n){return new Ye((r,i)=>{const o=t.length,s=new Array(o);let a=0;for(let u=0;u<o;u++){const l=u;n(t[l]).next(c=>{s[l]=c,++a,a===o&&r(s)},c=>i(c))}})}static doWhile(t,n){return new Ye((r,i)=>{const o=()=>{t()===!0?n().next(()=>{o()},i):r()};o()})}}function cyt(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function IC(e){return e.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nq{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.se&&this.se(t),t}}nq.oe=-1;function e$(e){return e==null}function BN(e){return e===0&&1/e==-1/0}function fyt(e){return typeof e=="number"&&Number.isInteger(e)&&!BN(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kie(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Fy(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function I_e(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qr{constructor(t,n){this.comparator=t,this.root=n||ko.EMPTY}insert(t,n){return new Qr(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,ko.BLACK,null,null))}remove(t){return new Qr(this.comparator,this.root.remove(t,this.comparator).copy(null,null,ko.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(t,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(t){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(t,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((n,r)=>(t(n,r),!1))}toString(){const t=[];return this.inorderTraversal((n,r)=>(t.push(`${n}:${r}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new F2(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new F2(this.root,t,this.comparator,!1)}getReverseIterator(){return new F2(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new F2(this.root,t,this.comparator,!0)}}class F2{constructor(t,n,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!t.isEmpty();)if(o=n?r(t.key,n):1,n&&i&&(o*=-1),o<0)t=this.isReverse?t.left:t.right;else{if(o===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class ko{constructor(t,n,r,i,o){this.key=t,this.value=n,this.color=r??ko.RED,this.left=i??ko.EMPTY,this.right=o??ko.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,r,i,o){return new ko(t??this.key,n??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,r){let i=this;const o=r(t,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(t,n,r),null):o===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(t,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return ko.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(t,i.key)===0){if(i.right.isEmpty())return ko.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,ko.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,ko.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Gt();const t=this.left.check();if(t!==this.right.check())throw Gt();return t+(this.isRed()?0:1)}}ko.EMPTY=null,ko.RED=!0,ko.BLACK=!1;ko.EMPTY=new class{constructor(){this.size=0}get key(){throw Gt()}get value(){throw Gt()}get color(){throw Gt()}get left(){throw Gt()}get right(){throw Gt()}copy(t,n,r,i,o){return this}insert(t,n,r){return new ko(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lo{constructor(t){this.comparator=t,this.data=new Qr(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((n,r)=>(t(n),!1))}forEachInRange(t,n){const r=this.data.getIteratorFrom(t[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,t[1])>=0)return;n(i.key)}}forEachWhile(t,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!t(r.getNext().key))return}firstAfterOrEqual(t){const n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new Iie(this.data.getIterator())}getIteratorFrom(t){return new Iie(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach(r=>{n=n.add(r)}),n}isEqual(t){if(!(t instanceof Lo)||this.size!==t.size)return!1;const n=this.data.getIterator(),r=t.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(n=>{t.push(n)}),t}toString(){const t=[];return this.forEach(n=>t.push(n)),"SortedSet("+t.toString()+")"}copy(t){const n=new Lo(this.comparator);return n.data=t,n}}class Iie{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class su{constructor(t){this.fields=t,t.sort(No.comparator)}static empty(){return new su([])}unionWith(t){let n=new Lo(No.comparator);for(const r of this.fields)n=n.add(r);for(const r of t)n=n.add(r);return new su(n.toArray())}covers(t){for(const n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return kb(this.fields,t.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R_e extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bs{constructor(t){this.binaryString=t}static fromBase64String(t){const n=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new R_e("Invalid base64 string: "+o):o}}(t);return new bs(n)}static fromUint8Array(t){const n=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(t);return new bs(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Wn(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}bs.EMPTY_BYTE_STRING=new bs("");const dyt=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function mm(e){if(Tr(!!e),typeof e=="string"){let t=0;const n=dyt.exec(e);if(Tr(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),t=Number(i)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:Ii(e.seconds),nanos:Ii(e.nanos)}}function Ii(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function Y0(e){return typeof e=="string"?bs.fromBase64String(e):bs.fromUint8Array(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rq(e){var t,n;return((n=(((t=e==null?void 0:e.mapValue)===null||t===void 0?void 0:t.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function iq(e){const t=e.mapValue.fields.__previous_value__;return rq(t)?iq(t):t}function iS(e){const t=mm(e.mapValue.fields.__local_write_time__.timestampValue);return new Vi(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hyt{constructor(t,n,r,i,o,s,a,u,l){this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=l}}class oS{constructor(t,n){this.projectId=t,this.database=n||"(default)"}static empty(){return new oS("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(t){return t instanceof oS&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j2={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function K0(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?rq(e)?4:pyt(e)?9007199254740991:10:Gt()}function Tf(e,t){if(e===t)return!0;const n=K0(e);if(n!==K0(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return iS(e).isEqual(iS(t));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;const s=mm(i.timestampValue),a=mm(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(i,o){return Y0(i.bytesValue).isEqual(Y0(o.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(i,o){return Ii(i.geoPointValue.latitude)===Ii(o.geoPointValue.latitude)&&Ii(i.geoPointValue.longitude)===Ii(o.geoPointValue.longitude)}(e,t);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return Ii(i.integerValue)===Ii(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){const s=Ii(i.doubleValue),a=Ii(o.doubleValue);return s===a?BN(s)===BN(a):isNaN(s)&&isNaN(a)}return!1}(e,t);case 9:return kb(e.arrayValue.values||[],t.arrayValue.values||[],Tf);case 10:return function(i,o){const s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(kie(s)!==kie(a))return!1;for(const u in s)if(s.hasOwnProperty(u)&&(a[u]===void 0||!Tf(s[u],a[u])))return!1;return!0}(e,t);default:return Gt()}}function sS(e,t){return(e.values||[]).find(n=>Tf(n,t))!==void 0}function Ib(e,t){if(e===t)return 0;const n=K0(e),r=K0(t);if(n!==r)return Wn(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Wn(e.booleanValue,t.booleanValue);case 2:return function(o,s){const a=Ii(o.integerValue||o.doubleValue),u=Ii(s.integerValue||s.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(e,t);case 3:return Rie(e.timestampValue,t.timestampValue);case 4:return Rie(iS(e),iS(t));case 5:return Wn(e.stringValue,t.stringValue);case 6:return function(o,s){const a=Y0(o),u=Y0(s);return a.compareTo(u)}(e.bytesValue,t.bytesValue);case 7:return function(o,s){const a=o.split("/"),u=s.split("/");for(let l=0;l<a.length&&l<u.length;l++){const c=Wn(a[l],u[l]);if(c!==0)return c}return Wn(a.length,u.length)}(e.referenceValue,t.referenceValue);case 8:return function(o,s){const a=Wn(Ii(o.latitude),Ii(s.latitude));return a!==0?a:Wn(Ii(o.longitude),Ii(s.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(o,s){const a=o.values||[],u=s.values||[];for(let l=0;l<a.length&&l<u.length;++l){const c=Ib(a[l],u[l]);if(c)return c}return Wn(a.length,u.length)}(e.arrayValue,t.arrayValue);case 10:return function(o,s){if(o===j2.mapValue&&s===j2.mapValue)return 0;if(o===j2.mapValue)return 1;if(s===j2.mapValue)return-1;const a=o.fields||{},u=Object.keys(a),l=s.fields||{},c=Object.keys(l);u.sort(),c.sort();for(let f=0;f<u.length&&f<c.length;++f){const d=Wn(u[f],c[f]);if(d!==0)return d;const h=Ib(a[u[f]],l[c[f]]);if(h!==0)return h}return Wn(u.length,c.length)}(e.mapValue,t.mapValue);default:throw Gt()}}function Rie(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return Wn(e,t);const n=mm(e),r=mm(t),i=Wn(n.seconds,r.seconds);return i!==0?i:Wn(n.nanos,r.nanos)}function Rb(e){return h9(e)}function h9(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(n){const r=mm(n);return`time(${r.seconds},${r.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(n){return Y0(n).toBase64()}(e.bytesValue):"referenceValue"in e?function(n){return Lt.fromName(n).toString()}(e.referenceValue):"geoPointValue"in e?function(n){return`geo(${n.latitude},${n.longitude})`}(e.geoPointValue):"arrayValue"in e?function(n){let r="[",i=!0;for(const o of n.values||[])i?i=!1:r+=",",r+=h9(o);return r+"]"}(e.arrayValue):"mapValue"in e?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",o=!0;for(const s of r)o?o=!1:i+=",",i+=`${s}:${h9(n.fields[s])}`;return i+"}"}(e.mapValue):Gt()}function Nie(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function p9(e){return!!e&&"integerValue"in e}function oq(e){return!!e&&"arrayValue"in e}function Pie(e){return!!e&&"nullValue"in e}function Die(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function rI(e){return!!e&&"mapValue"in e}function Ux(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return Fy(e.mapValue.fields,(n,r)=>t.mapValue.fields[n]=Ux(r)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Ux(e.arrayValue.values[n]);return t}return Object.assign({},e)}function pyt(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class va{constructor(t){this.value=t}static empty(){return new va({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let r=0;r<t.length-1;++r)if(n=(n.mapValue.fields||{})[t.get(r)],!rI(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=Ux(n)}setAll(t){let n=No.emptyPath(),r={},i=[];t.forEach((s,a)=>{if(!n.isImmediateParentOf(a)){const u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=a.popLast()}s?r[a.lastSegment()]=Ux(s):i.push(a.lastSegment())});const o=this.getFieldsMap(n);this.applyChanges(o,r,i)}delete(t){const n=this.field(t.popLast());rI(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return Tf(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<t.length;++r){let i=n.mapValue.fields[t.get(r)];rI(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[t.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(t,n,r){Fy(n,(i,o)=>t[i]=o);for(const i of r)delete t[i]}clone(){return new va(Ux(this.value))}}function N_e(e){const t=[];return Fy(e.fields,(n,r)=>{const i=new No([n]);if(rI(r)){const o=N_e(r.mapValue).fields;if(o.length===0)t.push(i);else for(const s of o)t.push(i.child(s))}else t.push(i)}),new su(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ls{constructor(t,n,r,i,o,s,a){this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(t){return new ls(t,0,Kt.min(),Kt.min(),Kt.min(),va.empty(),0)}static newFoundDocument(t,n,r,i){return new ls(t,1,n,Kt.min(),r,i,0)}static newNoDocument(t,n){return new ls(t,2,n,Kt.min(),Kt.min(),va.empty(),0)}static newUnknownDocument(t,n){return new ls(t,3,n,Kt.min(),Kt.min(),va.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual(Kt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=va.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=va.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Kt.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof ls&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new ls(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let UN=class{constructor(t,n){this.position=t,this.inclusive=n}};function Oie(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const o=t[i],s=e.position[i];if(o.field.isKeyField()?r=Lt.comparator(Lt.fromName(s.referenceValue),n.key):r=Ib(s,n.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function $ie(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Tf(e.position[n],t.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aS{constructor(t,n="asc"){this.field=t,this.dir=n}}function myt(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let P_e=class{};class Ni extends P_e{constructor(t,n,r){super(),this.field=t,this.op=n,this.value=r}static create(t,n,r){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,r):new yyt(t,n,r):n==="array-contains"?new _yt(t,r):n==="in"?new wyt(t,r):n==="not-in"?new Eyt(t,r):n==="array-contains-any"?new xyt(t,r):new Ni(t,n,r)}static createKeyFieldInFilter(t,n,r){return n==="in"?new vyt(t,r):new byt(t,r)}matches(t){const n=t.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Ib(n,this.value)):n!==null&&K0(this.value)===K0(n)&&this.matchesComparison(Ib(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return Gt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class uc extends P_e{constructor(t,n){super(),this.filters=t,this.op=n,this.ae=null}static create(t,n){return new uc(t,n)}matches(t){return D_e(this)?this.filters.find(n=>!n.matches(t))===void 0:this.filters.find(n=>n.matches(t))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((t,n)=>t.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function D_e(e){return e.op==="and"}function O_e(e){return gyt(e)&&D_e(e)}function gyt(e){for(const t of e.filters)if(t instanceof uc)return!1;return!0}function m9(e){if(e instanceof Ni)return e.field.canonicalString()+e.op.toString()+Rb(e.value);if(O_e(e))return e.filters.map(t=>m9(t)).join(",");{const t=e.filters.map(n=>m9(n)).join(",");return`${e.op}(${t})`}}function $_e(e,t){return e instanceof Ni?function(r,i){return i instanceof Ni&&r.op===i.op&&r.field.isEqual(i.field)&&Tf(r.value,i.value)}(e,t):e instanceof uc?function(r,i){return i instanceof uc&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&$_e(s,i.filters[a]),!0):!1}(e,t):void Gt()}function M_e(e){return e instanceof Ni?function(n){return`${n.field.canonicalString()} ${n.op} ${Rb(n.value)}`}(e):e instanceof uc?function(n){return n.op.toString()+" {"+n.getFilters().map(M_e).join(" ,")+"}"}(e):"Filter"}class yyt extends Ni{constructor(t,n,r){super(t,n,r),this.key=Lt.fromName(r.referenceValue)}matches(t){const n=Lt.comparator(t.key,this.key);return this.matchesComparison(n)}}class vyt extends Ni{constructor(t,n){super(t,"in",n),this.keys=L_e("in",n)}matches(t){return this.keys.some(n=>n.isEqual(t.key))}}class byt extends Ni{constructor(t,n){super(t,"not-in",n),this.keys=L_e("not-in",n)}matches(t){return!this.keys.some(n=>n.isEqual(t.key))}}function L_e(e,t){var n;return(((n=t.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>Lt.fromName(r.referenceValue))}class _yt extends Ni{constructor(t,n){super(t,"array-contains",n)}matches(t){const n=t.data.field(this.field);return oq(n)&&sS(n.arrayValue,this.value)}}class wyt extends Ni{constructor(t,n){super(t,"in",n)}matches(t){const n=t.data.field(this.field);return n!==null&&sS(this.value.arrayValue,n)}}class Eyt extends Ni{constructor(t,n){super(t,"not-in",n)}matches(t){if(sS(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=t.data.field(this.field);return n!==null&&!sS(this.value.arrayValue,n)}}class xyt extends Ni{constructor(t,n){super(t,"array-contains-any",n)}matches(t){const n=t.data.field(this.field);return!(!oq(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>sS(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tyt{constructor(t,n=null,r=[],i=[],o=null,s=null,a=null){this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.ue=null}}function Mie(e,t=null,n=[],r=[],i=null,o=null,s=null){return new Tyt(e,t,n,r,i,o,s)}function sq(e){const t=Xt(e);if(t.ue===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map(r=>m9(r)).join(","),n+="|ob:",n+=t.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),e$(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map(r=>Rb(r)).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map(r=>Rb(r)).join(",")),t.ue=n}return t.ue}function aq(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!myt(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!$_e(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!$ie(e.startAt,t.startAt)&&$ie(e.endAt,t.endAt)}function g9(e){return Lt.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q_{constructor(t,n=null,r=[],i=[],o=null,s="F",a=null,u=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function Syt(e,t,n,r,i,o,s,a){return new q_(e,t,n,r,i,o,s,a)}function uq(e){return new q_(e)}function Lie(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function F_e(e){return e.collectionGroup!==null}function zx(e){const t=Xt(e);if(t.ce===null){t.ce=[];const n=new Set;for(const o of t.explicitOrderBy)t.ce.push(o),n.add(o.field.canonicalString());const r=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new Lo(No.comparator);return s.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(t).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||t.ce.push(new aS(o,r))}),n.has(No.keyField().canonicalString())||t.ce.push(new aS(No.keyField(),r))}return t.ce}function df(e){const t=Xt(e);return t.le||(t.le=Cyt(t,zx(e))),t.le}function Cyt(e,t){if(e.limitType==="F")return Mie(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(i=>{const o=i.dir==="desc"?"asc":"desc";return new aS(i.field,o)});const n=e.endAt?new UN(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new UN(e.startAt.position,e.startAt.inclusive):null;return Mie(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function y9(e,t){const n=e.filters.concat([t]);return new q_(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function v9(e,t,n){return new q_(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function t$(e,t){return aq(df(e),df(t))&&e.limitType===t.limitType}function j_e(e){return`${sq(df(e))}|lt:${e.limitType}`}function Uv(e){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>M_e(i)).join(", ")}]`),e$(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Rb(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Rb(i)).join(",")),`Target(${r})`}(df(e))}; limitType=${e.limitType})`}function n$(e,t){return t.isFoundDocument()&&function(r,i){const o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):Lt.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(e,t)&&function(r,i){for(const o of zx(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(e,t)&&function(r,i){for(const o of r.filters)if(!o.matches(i))return!1;return!0}(e,t)&&function(r,i){return!(r.startAt&&!function(s,a,u){const l=Oie(s,a,u);return s.inclusive?l<=0:l<0}(r.startAt,zx(r),i)||r.endAt&&!function(s,a,u){const l=Oie(s,a,u);return s.inclusive?l>=0:l>0}(r.endAt,zx(r),i))}(e,t)}function Ayt(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function B_e(e){return(t,n)=>{let r=!1;for(const i of zx(e)){const o=kyt(i,t,n);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function kyt(e,t,n){const r=e.field.isKeyField()?Lt.comparator(t.key,n.key):function(o,s,a){const u=s.data.field(o),l=a.data.field(o);return u!==null&&l!==null?Ib(u,l):Gt()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Gt()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W_{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r!==void 0){for(const[i,o]of r)if(this.equalsFn(i,t))return o}}has(t){return this.get(t)!==void 0}set(t,n){const r=this.mapKeyFn(t),i=this.inner[r];if(i===void 0)return this.inner[r]=[[t,n]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],t))return void(i[o]=[t,n]);i.push([t,n]),this.innerSize++}delete(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(t){Fy(this.inner,(n,r)=>{for(const[i,o]of r)t(i,o)})}isEmpty(){return I_e(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iyt=new Qr(Lt.comparator);function fh(){return Iyt}const U_e=new Qr(Lt.comparator);function jE(...e){let t=U_e;for(const n of e)t=t.insert(n.key,n);return t}function z_e(e){let t=U_e;return e.forEach((n,r)=>t=t.insert(n,r.overlayedDocument)),t}function s0(){return Vx()}function V_e(){return Vx()}function Vx(){return new W_(e=>e.toString(),(e,t)=>e.isEqual(t))}const Ryt=new Qr(Lt.comparator),Nyt=new Lo(Lt.comparator);function xn(...e){let t=Nyt;for(const n of e)t=t.add(n);return t}const Pyt=new Lo(Wn);function Dyt(){return Pyt}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H_e(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:BN(t)?"-0":t}}function q_e(e){return{integerValue:""+e}}function Oyt(e,t){return fyt(t)?q_e(t):H_e(e,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r${constructor(){this._=void 0}}function $yt(e,t,n){return e instanceof uS?function(i,o){const s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&rq(o)&&(o=iq(o)),o&&(s.fields.__previous_value__=o),{mapValue:s}}(n,t):e instanceof lS?G_e(e,t):e instanceof cS?Y_e(e,t):function(i,o){const s=W_e(i,o),a=Fie(s)+Fie(i.Pe);return p9(s)&&p9(i.Pe)?q_e(a):H_e(i.serializer,a)}(e,t)}function Myt(e,t,n){return e instanceof lS?G_e(e,t):e instanceof cS?Y_e(e,t):n}function W_e(e,t){return e instanceof zN?function(r){return p9(r)||function(o){return!!o&&"doubleValue"in o}(r)}(t)?t:{integerValue:0}:null}class uS extends r${}class lS extends r${constructor(t){super(),this.elements=t}}function G_e(e,t){const n=K_e(t);for(const r of e.elements)n.some(i=>Tf(i,r))||n.push(r);return{arrayValue:{values:n}}}class cS extends r${constructor(t){super(),this.elements=t}}function Y_e(e,t){let n=K_e(t);for(const r of e.elements)n=n.filter(i=>!Tf(i,r));return{arrayValue:{values:n}}}class zN extends r${constructor(t,n){super(),this.serializer=t,this.Pe=n}}function Fie(e){return Ii(e.integerValue||e.doubleValue)}function K_e(e){return oq(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lyt{constructor(t,n){this.field=t,this.transform=n}}function Fyt(e,t){return e.field.isEqual(t.field)&&function(r,i){return r instanceof lS&&i instanceof lS||r instanceof cS&&i instanceof cS?kb(r.elements,i.elements,Tf):r instanceof zN&&i instanceof zN?Tf(r.Pe,i.Pe):r instanceof uS&&i instanceof uS}(e.transform,t.transform)}class jyt{constructor(t,n){this.version=t,this.transformResults=n}}class Da{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new Da}static exists(t){return new Da(void 0,t)}static updateTime(t){return new Da(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function iI(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}class i${}function X_e(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new o$(e.key,Da.none()):new RC(e.key,e.data,Da.none());{const n=e.data,r=va.empty();let i=new Lo(No.comparator);for(let o of t.fields)if(!i.has(o)){let s=n.field(o);s===null&&o.length>1&&(o=o.popLast(),s=n.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new Gm(e.key,r,new su(i.toArray()),Da.none())}}function Byt(e,t,n){e instanceof RC?function(i,o,s){const a=i.value.clone(),u=Bie(i.fieldTransforms,o,s.transformResults);a.setAll(u),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(e,t,n):e instanceof Gm?function(i,o,s){if(!iI(i.precondition,o))return void o.convertToUnknownDocument(s.version);const a=Bie(i.fieldTransforms,o,s.transformResults),u=o.data;u.setAll(Q_e(i)),u.setAll(a),o.convertToFoundDocument(s.version,u).setHasCommittedMutations()}(e,t,n):function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,t,n)}function Hx(e,t,n,r){return e instanceof RC?function(o,s,a,u){if(!iI(o.precondition,s))return a;const l=o.value.clone(),c=Uie(o.fieldTransforms,u,s);return l.setAll(c),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null}(e,t,n,r):e instanceof Gm?function(o,s,a,u){if(!iI(o.precondition,s))return a;const l=Uie(o.fieldTransforms,u,s),c=s.data;return c.setAll(Q_e(o)),c.setAll(l),s.convertToFoundDocument(s.version,c).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(f=>f.field))}(e,t,n,r):function(o,s,a){return iI(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a}(e,t,n)}function Uyt(e,t){let n=null;for(const r of e.fieldTransforms){const i=t.data.field(r.field),o=W_e(r.transform,i||null);o!=null&&(n===null&&(n=va.empty()),n.set(r.field,o))}return n||null}function jie(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&kb(r,i,(o,s)=>Fyt(o,s))}(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class RC extends i${constructor(t,n,r,i=[]){super(),this.key=t,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Gm extends i${constructor(t,n,r,i,o=[]){super(),this.key=t,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function Q_e(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function Bie(e,t,n){const r=new Map;Tr(e.length===n.length);for(let i=0;i<n.length;i++){const o=e[i],s=o.transform,a=t.data.field(o.field);r.set(o.field,Myt(s,a,n[i]))}return r}function Uie(e,t,n){const r=new Map;for(const i of e){const o=i.transform,s=n.data.field(i.field);r.set(i.field,$yt(o,s,t))}return r}class o$ extends i${constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class zyt extends i${constructor(t,n){super(),this.key=t,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vyt{constructor(t,n,r,i){this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(t,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const o=this.mutations[i];o.key.isEqual(t.key)&&Byt(o,t,r[i])}}applyToLocalView(t,n){for(const r of this.baseMutations)r.key.isEqual(t.key)&&(n=Hx(r,t,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(t.key)&&(n=Hx(r,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){const r=V_e();return this.mutations.forEach(i=>{const o=t.get(i.key),s=o.overlayedDocument;let a=this.applyToLocalView(s,o.mutatedFields);a=n.has(i.key)?null:a;const u=X_e(s,a);u!==null&&r.set(i.key,u),s.isValidDocument()||s.convertToNoDocument(Kt.min())}),r}keys(){return this.mutations.reduce((t,n)=>t.add(n.key),xn())}isEqual(t){return this.batchId===t.batchId&&kb(this.mutations,t.mutations,(n,r)=>jie(n,r))&&kb(this.baseMutations,t.baseMutations,(n,r)=>jie(n,r))}}class lq{constructor(t,n,r,i){this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(t,n,r){Tr(t.mutations.length===r.length);let i=function(){return Ryt}();const o=t.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new lq(t,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hyt{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qyt{constructor(t,n){this.count=t,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ai,Nn;function Wyt(e){switch(e){default:return Gt();case Fe.CANCELLED:case Fe.UNKNOWN:case Fe.DEADLINE_EXCEEDED:case Fe.RESOURCE_EXHAUSTED:case Fe.INTERNAL:case Fe.UNAVAILABLE:case Fe.UNAUTHENTICATED:return!1;case Fe.INVALID_ARGUMENT:case Fe.NOT_FOUND:case Fe.ALREADY_EXISTS:case Fe.PERMISSION_DENIED:case Fe.FAILED_PRECONDITION:case Fe.ABORTED:case Fe.OUT_OF_RANGE:case Fe.UNIMPLEMENTED:case Fe.DATA_LOSS:return!0}}function J_e(e){if(e===void 0)return ch("GRPC error has no .code"),Fe.UNKNOWN;switch(e){case Ai.OK:return Fe.OK;case Ai.CANCELLED:return Fe.CANCELLED;case Ai.UNKNOWN:return Fe.UNKNOWN;case Ai.DEADLINE_EXCEEDED:return Fe.DEADLINE_EXCEEDED;case Ai.RESOURCE_EXHAUSTED:return Fe.RESOURCE_EXHAUSTED;case Ai.INTERNAL:return Fe.INTERNAL;case Ai.UNAVAILABLE:return Fe.UNAVAILABLE;case Ai.UNAUTHENTICATED:return Fe.UNAUTHENTICATED;case Ai.INVALID_ARGUMENT:return Fe.INVALID_ARGUMENT;case Ai.NOT_FOUND:return Fe.NOT_FOUND;case Ai.ALREADY_EXISTS:return Fe.ALREADY_EXISTS;case Ai.PERMISSION_DENIED:return Fe.PERMISSION_DENIED;case Ai.FAILED_PRECONDITION:return Fe.FAILED_PRECONDITION;case Ai.ABORTED:return Fe.ABORTED;case Ai.OUT_OF_RANGE:return Fe.OUT_OF_RANGE;case Ai.UNIMPLEMENTED:return Fe.UNIMPLEMENTED;case Ai.DATA_LOSS:return Fe.DATA_LOSS;default:return Gt()}}(Nn=Ai||(Ai={}))[Nn.OK=0]="OK",Nn[Nn.CANCELLED=1]="CANCELLED",Nn[Nn.UNKNOWN=2]="UNKNOWN",Nn[Nn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Nn[Nn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Nn[Nn.NOT_FOUND=5]="NOT_FOUND",Nn[Nn.ALREADY_EXISTS=6]="ALREADY_EXISTS",Nn[Nn.PERMISSION_DENIED=7]="PERMISSION_DENIED",Nn[Nn.UNAUTHENTICATED=16]="UNAUTHENTICATED",Nn[Nn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Nn[Nn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Nn[Nn.ABORTED=10]="ABORTED",Nn[Nn.OUT_OF_RANGE=11]="OUT_OF_RANGE",Nn[Nn.UNIMPLEMENTED=12]="UNIMPLEMENTED",Nn[Nn.INTERNAL=13]="INTERNAL",Nn[Nn.UNAVAILABLE=14]="UNAVAILABLE",Nn[Nn.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gyt(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yyt=new g0([4294967295,4294967295],0);function zie(e){const t=Gyt().encode(e),n=new w_e;return n.update(t),new Uint8Array(n.digest())}function Vie(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),o=t.getUint32(12,!0);return[new g0([n,r],0),new g0([i,o],0)]}class cq{constructor(t,n,r){if(this.bitmap=t,this.padding=n,this.hashCount=r,n<0||n>=8)throw new BE(`Invalid padding: ${n}`);if(r<0)throw new BE(`Invalid hash count: ${r}`);if(t.length>0&&this.hashCount===0)throw new BE(`Invalid hash count: ${r}`);if(t.length===0&&n!==0)throw new BE(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*t.length-n,this.Te=g0.fromNumber(this.Ie)}Ee(t,n,r){let i=t.add(n.multiply(g0.fromNumber(r)));return i.compare(Yyt)===1&&(i=new g0([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(t){return(this.bitmap[Math.floor(t/8)]&1<<t%8)!=0}mightContain(t){if(this.Ie===0)return!1;const n=zie(t),[r,i]=Vie(n);for(let o=0;o<this.hashCount;o++){const s=this.Ee(r,i,o);if(!this.de(s))return!1}return!0}static create(t,n,r){const i=t%8==0?0:8-t%8,o=new Uint8Array(Math.ceil(t/8)),s=new cq(o,i,n);return r.forEach(a=>s.insert(a)),s}insert(t){if(this.Ie===0)return;const n=zie(t),[r,i]=Vie(n);for(let o=0;o<this.hashCount;o++){const s=this.Ee(r,i,o);this.Ae(s)}}Ae(t){const n=Math.floor(t/8),r=t%8;this.bitmap[n]|=1<<r}}class BE extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s${constructor(t,n,r,i,o){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(t,n,r){const i=new Map;return i.set(t,NC.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new s$(Kt.min(),i,new Qr(Wn),fh(),xn())}}class NC{constructor(t,n,r,i,o){this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(t,n,r){return new NC(r,n,xn(),xn(),xn())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oI{constructor(t,n,r,i){this.Re=t,this.removedTargetIds=n,this.key=r,this.Ve=i}}class Z_e{constructor(t,n){this.targetId=t,this.me=n}}class ewe{constructor(t,n,r=bs.EMPTY_BYTE_STRING,i=null){this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i}}class Hie{constructor(){this.fe=0,this.ge=Wie(),this.pe=bs.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(t){t.approximateByteSize()>0&&(this.we=!0,this.pe=t)}Ce(){let t=xn(),n=xn(),r=xn();return this.ge.forEach((i,o)=>{switch(o){case 0:t=t.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:Gt()}}),new NC(this.pe,this.ye,t,n,r)}ve(){this.we=!1,this.ge=Wie()}Fe(t,n){this.we=!0,this.ge=this.ge.insert(t,n)}Me(t){this.we=!0,this.ge=this.ge.remove(t)}xe(){this.fe+=1}Oe(){this.fe-=1,Tr(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class Kyt{constructor(t){this.Le=t,this.Be=new Map,this.ke=fh(),this.qe=qie(),this.Qe=new Qr(Wn)}Ke(t){for(const n of t.Re)t.Ve&&t.Ve.isFoundDocument()?this.$e(n,t.Ve):this.Ue(n,t.key,t.Ve);for(const n of t.removedTargetIds)this.Ue(n,t.key,t.Ve)}We(t){this.forEachTarget(t,n=>{const r=this.Ge(n);switch(t.state){case 0:this.ze(n)&&r.De(t.resumeToken);break;case 1:r.Oe(),r.Se||r.ve(),r.De(t.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(t.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(t.resumeToken));break;default:Gt()}})}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(t){const n=t.targetId,r=t.me.count,i=this.Je(n);if(i){const o=i.target;if(g9(o))if(r===0){const s=new Lt(o.path);this.Ue(n,s,ls.newNoDocument(s,Kt.min()))}else Tr(r===1);else{const s=this.Ye(n);if(s!==r){const a=this.Ze(t),u=a?this.Xe(a,t,s):1;if(u!==0){this.je(n);const l=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,l)}}}}}Ze(t){const n=t.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=n;let s,a;try{s=Y0(r).toUint8Array()}catch(u){if(u instanceof R_e)return nS("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new cq(s,i,o)}catch(u){return nS(u instanceof BE?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.Ie===0?null:a}Xe(t,n,r){return n.me.count===r-this.nt(t,n.targetId)?0:2}nt(t,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(o=>{const s=this.Le.tt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;t.mightContain(a)||(this.Ue(n,o,null),i++)}),i}rt(t){const n=new Map;this.Be.forEach((o,s)=>{const a=this.Je(s);if(a){if(o.current&&g9(a.target)){const u=new Lt(a.target.path);this.ke.get(u)!==null||this.it(s,u)||this.Ue(s,u,ls.newNoDocument(u,t))}o.be&&(n.set(s,o.Ce()),o.ve())}});let r=xn();this.qe.forEach((o,s)=>{let a=!0;s.forEachWhile(u=>{const l=this.Je(u);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.ke.forEach((o,s)=>s.setReadTime(t));const i=new s$(t,n,this.Qe,this.ke,r);return this.ke=fh(),this.qe=qie(),this.Qe=new Qr(Wn),i}$e(t,n){if(!this.ze(t))return;const r=this.it(t,n.key)?2:0;this.Ge(t).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(t))}Ue(t,n,r){if(!this.ze(t))return;const i=this.Ge(t);this.it(t,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(t)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(t){this.Be.delete(t)}Ye(t){const n=this.Ge(t).Ce();return this.Le.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}xe(t){this.Ge(t).xe()}Ge(t){let n=this.Be.get(t);return n||(n=new Hie,this.Be.set(t,n)),n}st(t){let n=this.qe.get(t);return n||(n=new Lo(Wn),this.qe=this.qe.insert(t,n)),n}ze(t){const n=this.Je(t)!==null;return n||St("WatchChangeAggregator","Detected inactive target",t),n}Je(t){const n=this.Be.get(t);return n&&n.Se?null:this.Le.ot(t)}je(t){this.Be.set(t,new Hie),this.Le.getRemoteKeysForTarget(t).forEach(n=>{this.Ue(t,n,null)})}it(t,n){return this.Le.getRemoteKeysForTarget(t).has(n)}}function qie(){return new Qr(Lt.comparator)}function Wie(){return new Qr(Lt.comparator)}const Xyt={asc:"ASCENDING",desc:"DESCENDING"},Qyt={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Jyt={and:"AND",or:"OR"};class Zyt{constructor(t,n){this.databaseId=t,this.useProto3Json=n}}function b9(e,t){return e.useProto3Json||e$(t)?t:{value:t}}function VN(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function twe(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function evt(e,t){return VN(e,t.toTimestamp())}function hf(e){return Tr(!!e),Kt.fromTimestamp(function(n){const r=mm(n);return new Vi(r.seconds,r.nanos)}(e))}function fq(e,t){return _9(e,t).canonicalString()}function _9(e,t){const n=function(i){return new Rr(["projects",i.projectId,"databases",i.database])}(e).child("documents");return t===void 0?n:n.child(t)}function nwe(e){const t=Rr.fromString(e);return Tr(awe(t)),t}function w9(e,t){return fq(e.databaseId,t.path)}function B6(e,t){const n=nwe(t);if(n.get(1)!==e.databaseId.projectId)throw new yt(Fe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new yt(Fe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Lt(iwe(n))}function rwe(e,t){return fq(e.databaseId,t)}function tvt(e){const t=nwe(e);return t.length===4?Rr.emptyPath():iwe(t)}function E9(e){return new Rr(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function iwe(e){return Tr(e.length>4&&e.get(4)==="documents"),e.popFirst(5)}function Gie(e,t,n){return{name:w9(e,t),fields:n.value.mapValue.fields}}function nvt(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:Gt()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],o=function(l,c){return l.useProto3Json?(Tr(c===void 0||typeof c=="string"),bs.fromBase64String(c||"")):(Tr(c===void 0||c instanceof Buffer||c instanceof Uint8Array),bs.fromUint8Array(c||new Uint8Array))}(e,t.targetChange.resumeToken),s=t.targetChange.cause,a=s&&function(l){const c=l.code===void 0?Fe.UNKNOWN:J_e(l.code);return new yt(c,l.message||"")}(s);n=new ewe(r,i,o,a||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=B6(e,r.document.name),o=hf(r.document.updateTime),s=r.document.createTime?hf(r.document.createTime):Kt.min(),a=new va({mapValue:{fields:r.document.fields}}),u=ls.newFoundDocument(i,o,s,a),l=r.targetIds||[],c=r.removedTargetIds||[];n=new oI(l,c,u.key,u)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=B6(e,r.document),o=r.readTime?hf(r.readTime):Kt.min(),s=ls.newNoDocument(i,o),a=r.removedTargetIds||[];n=new oI([],a,s.key,s)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=B6(e,r.document),o=r.removedTargetIds||[];n=new oI([],o,i,null)}else{if(!("filter"in t))return Gt();{t.filter;const r=t.filter;r.targetId;const{count:i=0,unchangedNames:o}=r,s=new qyt(i,o),a=r.targetId;n=new Z_e(a,s)}}return n}function rvt(e,t){let n;if(t instanceof RC)n={update:Gie(e,t.key,t.value)};else if(t instanceof o$)n={delete:w9(e,t.key)};else if(t instanceof Gm)n={update:Gie(e,t.key,t.data),updateMask:dvt(t.fieldMask)};else{if(!(t instanceof zyt))return Gt();n={verify:w9(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(r=>function(o,s){const a=s.transform;if(a instanceof uS)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof lS)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof cS)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof zN)return{fieldPath:s.field.canonicalString(),increment:a.Pe};throw Gt()}(0,r))),t.precondition.isNone||(n.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:evt(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:Gt()}(e,t.precondition)),n}function ivt(e,t){return e&&e.length>0?(Tr(t!==void 0),e.map(n=>function(i,o){let s=i.updateTime?hf(i.updateTime):hf(o);return s.isEqual(Kt.min())&&(s=hf(o)),new jyt(s,i.transformResults||[])}(n,t))):[]}function ovt(e,t){return{documents:[rwe(e,t.path)]}}function svt(e,t){const n={structuredQuery:{}},r=t.path;let i;t.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=rwe(e,i);const o=function(l){if(l.length!==0)return swe(uc.create(l,"and"))}(t.filters);o&&(n.structuredQuery.where=o);const s=function(l){if(l.length!==0)return l.map(c=>function(d){return{field:zv(d.field),direction:lvt(d.dir)}}(c))}(t.orderBy);s&&(n.structuredQuery.orderBy=s);const a=b9(e,t.limit);return a!==null&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(t.endAt)),{_t:n,parent:i}}function avt(e){let t=tvt(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Tr(r===1);const c=n.from[0];c.allDescendants?i=c.collectionId:t=t.child(c.collectionId)}let o=[];n.where&&(o=function(f){const d=owe(f);return d instanceof uc&&O_e(d)?d.getFilters():[d]}(n.where));let s=[];n.orderBy&&(s=function(f){return f.map(d=>function(p){return new aS(Vv(p.field),function(g){switch(g){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(p.direction))}(d))}(n.orderBy));let a=null;n.limit&&(a=function(f){let d;return d=typeof f=="object"?f.value:f,e$(d)?null:d}(n.limit));let u=null;n.startAt&&(u=function(f){const d=!!f.before,h=f.values||[];return new UN(h,d)}(n.startAt));let l=null;return n.endAt&&(l=function(f){const d=!f.before,h=f.values||[];return new UN(h,d)}(n.endAt)),Syt(t,i,s,o,a,"F",u,l)}function uvt(e,t){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Gt()}}(t.purpose);return n==null?null:{"goog-listen-tags":n}}function owe(e){return e.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Vv(n.unaryFilter.field);return Ni.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Vv(n.unaryFilter.field);return Ni.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=Vv(n.unaryFilter.field);return Ni.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=Vv(n.unaryFilter.field);return Ni.create(s,"!=",{nullValue:"NULL_VALUE"});default:return Gt()}}(e):e.fieldFilter!==void 0?function(n){return Ni.create(Vv(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Gt()}}(n.fieldFilter.op),n.fieldFilter.value)}(e):e.compositeFilter!==void 0?function(n){return uc.create(n.compositeFilter.filters.map(r=>owe(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Gt()}}(n.compositeFilter.op))}(e):Gt()}function lvt(e){return Xyt[e]}function cvt(e){return Qyt[e]}function fvt(e){return Jyt[e]}function zv(e){return{fieldPath:e.canonicalString()}}function Vv(e){return No.fromServerFormat(e.fieldPath)}function swe(e){return e instanceof Ni?function(n){if(n.op==="=="){if(Die(n.value))return{unaryFilter:{field:zv(n.field),op:"IS_NAN"}};if(Pie(n.value))return{unaryFilter:{field:zv(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Die(n.value))return{unaryFilter:{field:zv(n.field),op:"IS_NOT_NAN"}};if(Pie(n.value))return{unaryFilter:{field:zv(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:zv(n.field),op:cvt(n.op),value:n.value}}}(e):e instanceof uc?function(n){const r=n.getFilters().map(i=>swe(i));return r.length===1?r[0]:{compositeFilter:{op:fvt(n.op),filters:r}}}(e):Gt()}function dvt(e){const t=[];return e.fields.forEach(n=>t.push(n.canonicalString())),{fieldPaths:t}}function awe(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vp{constructor(t,n,r,i,o=Kt.min(),s=Kt.min(),a=bs.EMPTY_BYTE_STRING,u=null){this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(t){return new vp(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new vp(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new vp(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new vp(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hvt{constructor(t){this.ct=t}}function pvt(e){const t=avt({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?v9(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mvt{constructor(){this._n=new gvt}addToCollectionParentIndex(t,n){return this._n.add(n),Ye.resolve()}getCollectionParents(t,n){return Ye.resolve(this._n.getEntries(n))}addFieldIndex(t,n){return Ye.resolve()}deleteFieldIndex(t,n){return Ye.resolve()}deleteAllFieldIndexes(t){return Ye.resolve()}createTargetIndexes(t,n){return Ye.resolve()}getDocumentsMatchingTarget(t,n){return Ye.resolve(null)}getIndexType(t,n){return Ye.resolve(0)}getFieldIndexes(t,n){return Ye.resolve([])}getNextCollectionGroupToUpdate(t){return Ye.resolve(null)}getMinOffset(t,n){return Ye.resolve(pm.min())}getMinOffsetFromCollectionGroup(t,n){return Ye.resolve(pm.min())}updateCollectionGroup(t,n,r){return Ye.resolve()}updateIndexEntries(t,n){return Ye.resolve()}}class gvt{constructor(){this.index={}}add(t){const n=t.lastSegment(),r=t.popLast(),i=this.index[n]||new Lo(Rr.comparator),o=!i.has(r);return this.index[n]=i.add(r),o}has(t){const n=t.lastSegment(),r=t.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(t){return(this.index[t]||new Lo(Rr.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nb{constructor(t){this.On=t}next(){return this.On+=2,this.On}static Nn(){return new Nb(0)}static Ln(){return new Nb(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yvt{constructor(){this.changes=new W_(t=>t.toString(),(t,n)=>t.isEqual(n)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,ls.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?Ye.resolve(r):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vvt{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bvt{constructor(t,n,r,i){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(t,n){let r=null;return this.documentOverlayCache.getOverlay(t,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(t,n))).next(i=>(r!==null&&Hx(r.mutation,i,su.empty(),Vi.now()),i))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next(r=>this.getLocalViewOfDocuments(t,r,xn()).next(()=>r))}getLocalViewOfDocuments(t,n,r=xn()){const i=s0();return this.populateOverlays(t,i,n).next(()=>this.computeViews(t,n,i,r).next(o=>{let s=jE();return o.forEach((a,u)=>{s=s.insert(a,u.overlayedDocument)}),s}))}getOverlayedDocuments(t,n){const r=s0();return this.populateOverlays(t,r,n).next(()=>this.computeViews(t,n,r,xn()))}populateOverlays(t,n,r){const i=[];return r.forEach(o=>{n.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(t,i).next(o=>{o.forEach((s,a)=>{n.set(s,a)})})}computeViews(t,n,r,i){let o=fh();const s=Vx(),a=function(){return Vx()}();return n.forEach((u,l)=>{const c=r.get(l.key);i.has(l.key)&&(c===void 0||c.mutation instanceof Gm)?o=o.insert(l.key,l):c!==void 0?(s.set(l.key,c.mutation.getFieldMask()),Hx(c.mutation,l,c.mutation.getFieldMask(),Vi.now())):s.set(l.key,su.empty())}),this.recalculateAndSaveOverlays(t,o).next(u=>(u.forEach((l,c)=>s.set(l,c)),n.forEach((l,c)=>{var f;return a.set(l,new vvt(c,(f=s.get(l))!==null&&f!==void 0?f:null))}),a))}recalculateAndSaveOverlays(t,n){const r=Vx();let i=new Qr((s,a)=>s-a),o=xn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next(s=>{for(const a of s)a.keys().forEach(u=>{const l=n.get(u);if(l===null)return;let c=r.get(u)||su.empty();c=a.applyToLocalView(l,c),r.set(u,c);const f=(i.get(a.batchId)||xn()).add(u);i=i.insert(a.batchId,f)})}).next(()=>{const s=[],a=i.getReverseIterator();for(;a.hasNext();){const u=a.getNext(),l=u.key,c=u.value,f=V_e();c.forEach(d=>{if(!o.has(d)){const h=X_e(n.get(d),r.get(d));h!==null&&f.set(d,h),o=o.add(d)}}),s.push(this.documentOverlayCache.saveOverlays(t,l,f))}return Ye.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next(r=>this.recalculateAndSaveOverlays(t,r))}getDocumentsMatchingQuery(t,n,r,i){return function(s){return Lt.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):F_e(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,r,i):this.getDocumentsMatchingCollectionQuery(t,n,r,i)}getNextDocuments(t,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,r,i).next(o=>{const s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,r.largestBatchId,i-o.size):Ye.resolve(s0());let a=-1,u=o;return s.next(l=>Ye.forEach(l,(c,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),o.get(c)?Ye.resolve():this.remoteDocumentCache.getEntry(t,c).next(d=>{u=u.insert(c,d)}))).next(()=>this.populateOverlays(t,l,o)).next(()=>this.computeViews(t,u,l,xn())).next(c=>({batchId:a,changes:z_e(c)})))})}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new Lt(n)).next(r=>{let i=jE();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(t,n,r,i){const o=n.collectionGroup;let s=jE();return this.indexManager.getCollectionParents(t,o).next(a=>Ye.forEach(a,u=>{const l=function(f,d){return new q_(d,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,u.child(o));return this.getDocumentsMatchingCollectionQuery(t,l,r,i).next(c=>{c.forEach((f,d)=>{s=s.insert(f,d)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(t,n,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,r,o,i))).next(s=>{o.forEach((u,l)=>{const c=l.getKey();s.get(c)===null&&(s=s.insert(c,ls.newInvalidDocument(c)))});let a=jE();return s.forEach((u,l)=>{const c=o.get(u);c!==void 0&&Hx(c.mutation,l,su.empty(),Vi.now()),n$(n,l)&&(a=a.insert(u,l))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _vt{constructor(t){this.serializer=t,this.cr=new Map,this.lr=new Map}getBundleMetadata(t,n){return Ye.resolve(this.cr.get(n))}saveBundleMetadata(t,n){return this.cr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:hf(i.createTime)}}(n)),Ye.resolve()}getNamedQuery(t,n){return Ye.resolve(this.lr.get(n))}saveNamedQuery(t,n){return this.lr.set(n.name,function(i){return{name:i.name,query:pvt(i.bundledQuery),readTime:hf(i.readTime)}}(n)),Ye.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wvt{constructor(){this.overlays=new Qr(Lt.comparator),this.hr=new Map}getOverlay(t,n){return Ye.resolve(this.overlays.get(n))}getOverlays(t,n){const r=s0();return Ye.forEach(n,i=>this.getOverlay(t,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(t,n,r){return r.forEach((i,o)=>{this.ht(t,n,o)}),Ye.resolve()}removeOverlaysForBatchId(t,n,r){const i=this.hr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.hr.delete(r)),Ye.resolve()}getOverlaysForCollection(t,n,r){const i=s0(),o=n.length+1,s=new Lt(n.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){const u=a.getNext().value,l=u.getKey();if(!n.isPrefixOf(l.path))break;l.path.length===o&&u.largestBatchId>r&&i.set(u.getKey(),u)}return Ye.resolve(i)}getOverlaysForCollectionGroup(t,n,r,i){let o=new Qr((l,c)=>l-c);const s=this.overlays.getIterator();for(;s.hasNext();){const l=s.getNext().value;if(l.getKey().getCollectionGroup()===n&&l.largestBatchId>r){let c=o.get(l.largestBatchId);c===null&&(c=s0(),o=o.insert(l.largestBatchId,c)),c.set(l.getKey(),l)}}const a=s0(),u=o.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,c)=>a.set(l,c)),!(a.size()>=i)););return Ye.resolve(a)}ht(t,n,r){const i=this.overlays.get(r.key);if(i!==null){const s=this.hr.get(i.largestBatchId).delete(r.key);this.hr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new Hyt(n,r));let o=this.hr.get(n);o===void 0&&(o=xn(),this.hr.set(n,o)),this.hr.set(n,o.add(r.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dq{constructor(){this.Pr=new Lo(to.Ir),this.Tr=new Lo(to.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(t,n){const r=new to(t,n);this.Pr=this.Pr.add(r),this.Tr=this.Tr.add(r)}dr(t,n){t.forEach(r=>this.addReference(r,n))}removeReference(t,n){this.Ar(new to(t,n))}Rr(t,n){t.forEach(r=>this.removeReference(r,n))}Vr(t){const n=new Lt(new Rr([])),r=new to(n,t),i=new to(n,t+1),o=[];return this.Tr.forEachInRange([r,i],s=>{this.Ar(s),o.push(s.key)}),o}mr(){this.Pr.forEach(t=>this.Ar(t))}Ar(t){this.Pr=this.Pr.delete(t),this.Tr=this.Tr.delete(t)}gr(t){const n=new Lt(new Rr([])),r=new to(n,t),i=new to(n,t+1);let o=xn();return this.Tr.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(t){const n=new to(t,0),r=this.Pr.firstAfterOrEqual(n);return r!==null&&t.isEqual(r.key)}}class to{constructor(t,n){this.key=t,this.pr=n}static Ir(t,n){return Lt.comparator(t.key,n.key)||Wn(t.pr,n.pr)}static Er(t,n){return Wn(t.pr,n.pr)||Lt.comparator(t.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Evt{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.yr=1,this.wr=new Lo(to.Ir)}checkEmpty(t){return Ye.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,r,i){const o=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new Vyt(o,n,r,i);this.mutationQueue.push(s);for(const a of i)this.wr=this.wr.add(new to(a.key,o)),this.indexManager.addToCollectionParentIndex(t,a.key.path.popLast());return Ye.resolve(s)}lookupMutationBatch(t,n){return Ye.resolve(this.Sr(n))}getNextMutationBatchAfterBatchId(t,n){const r=n+1,i=this.br(r),o=i<0?0:i;return Ye.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return Ye.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(t){return Ye.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){const r=new to(n,0),i=new to(n,Number.POSITIVE_INFINITY),o=[];return this.wr.forEachInRange([r,i],s=>{const a=this.Sr(s.pr);o.push(a)}),Ye.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(t,n){let r=new Lo(Wn);return n.forEach(i=>{const o=new to(i,0),s=new to(i,Number.POSITIVE_INFINITY);this.wr.forEachInRange([o,s],a=>{r=r.add(a.pr)})}),Ye.resolve(this.Dr(r))}getAllMutationBatchesAffectingQuery(t,n){const r=n.path,i=r.length+1;let o=r;Lt.isDocumentKey(o)||(o=o.child(""));const s=new to(new Lt(o),0);let a=new Lo(Wn);return this.wr.forEachWhile(u=>{const l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(u.pr)),!0)},s),Ye.resolve(this.Dr(a))}Dr(t){const n=[];return t.forEach(r=>{const i=this.Sr(r);i!==null&&n.push(i)}),n}removeMutationBatch(t,n){Tr(this.Cr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.wr;return Ye.forEach(n.mutations,i=>{const o=new to(i.key,n.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(t,i.key)}).next(()=>{this.wr=r})}Mn(t){}containsKey(t,n){const r=new to(n,0),i=this.wr.firstAfterOrEqual(r);return Ye.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(t){return this.mutationQueue.length,Ye.resolve()}Cr(t,n){return this.br(t)}br(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Sr(t){const n=this.br(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xvt{constructor(t){this.vr=t,this.docs=function(){return new Qr(Lt.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){const r=n.key,i=this.docs.get(r),o=i?i.size:0,s=this.vr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(t,r.path.popLast())}removeEntry(t){const n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){const r=this.docs.get(n);return Ye.resolve(r?r.document.mutableCopy():ls.newInvalidDocument(n))}getEntries(t,n){let r=fh();return n.forEach(i=>{const o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():ls.newInvalidDocument(i))}),Ye.resolve(r)}getDocumentsMatchingQuery(t,n,r,i){let o=fh();const s=n.path,a=new Lt(s.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){const{key:l,value:{document:c}}=u.getNext();if(!s.isPrefixOf(l.path))break;l.path.length>s.length+1||ayt(syt(c),r)<=0||(i.has(c.key)||n$(n,c))&&(o=o.insert(c.key,c.mutableCopy()))}return Ye.resolve(o)}getAllFromCollectionGroup(t,n,r,i){Gt()}Fr(t,n){return Ye.forEach(this.docs,r=>n(r))}newChangeBuffer(t){return new Tvt(this)}getSize(t){return Ye.resolve(this.size)}}class Tvt extends yvt{constructor(t){super(),this.ar=t}applyChanges(t){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.ar.addEntry(t,i)):this.ar.removeEntry(r)}),Ye.waitFor(n)}getFromCache(t,n){return this.ar.getEntry(t,n)}getAllFromCache(t,n){return this.ar.getEntries(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Svt{constructor(t){this.persistence=t,this.Mr=new W_(n=>sq(n),aq),this.lastRemoteSnapshotVersion=Kt.min(),this.highestTargetId=0,this.Or=0,this.Nr=new dq,this.targetCount=0,this.Lr=Nb.Nn()}forEachTarget(t,n){return this.Mr.forEach((r,i)=>n(i)),Ye.resolve()}getLastRemoteSnapshotVersion(t){return Ye.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return Ye.resolve(this.Or)}allocateTargetId(t){return this.highestTargetId=this.Lr.next(),Ye.resolve(this.highestTargetId)}setTargetsMetadata(t,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Or&&(this.Or=n),Ye.resolve()}qn(t){this.Mr.set(t.target,t);const n=t.targetId;n>this.highestTargetId&&(this.Lr=new Nb(n),this.highestTargetId=n),t.sequenceNumber>this.Or&&(this.Or=t.sequenceNumber)}addTargetData(t,n){return this.qn(n),this.targetCount+=1,Ye.resolve()}updateTargetData(t,n){return this.qn(n),Ye.resolve()}removeTargetData(t,n){return this.Mr.delete(n.target),this.Nr.Vr(n.targetId),this.targetCount-=1,Ye.resolve()}removeTargets(t,n,r){let i=0;const o=[];return this.Mr.forEach((s,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Mr.delete(s),o.push(this.removeMatchingKeysForTargetId(t,a.targetId)),i++)}),Ye.waitFor(o).next(()=>i)}getTargetCount(t){return Ye.resolve(this.targetCount)}getTargetData(t,n){const r=this.Mr.get(n)||null;return Ye.resolve(r)}addMatchingKeys(t,n,r){return this.Nr.dr(n,r),Ye.resolve()}removeMatchingKeys(t,n,r){this.Nr.Rr(n,r);const i=this.persistence.referenceDelegate,o=[];return i&&n.forEach(s=>{o.push(i.markPotentiallyOrphaned(t,s))}),Ye.waitFor(o)}removeMatchingKeysForTargetId(t,n){return this.Nr.Vr(n),Ye.resolve()}getMatchingKeysForTargetId(t,n){const r=this.Nr.gr(n);return Ye.resolve(r)}containsKey(t,n){return Ye.resolve(this.Nr.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cvt{constructor(t,n){this.Br={},this.overlays={},this.kr=new nq(0),this.qr=!1,this.qr=!0,this.referenceDelegate=t(this),this.Qr=new Svt(this),this.indexManager=new mvt,this.remoteDocumentCache=function(i){return new xvt(i)}(r=>this.referenceDelegate.Kr(r)),this.serializer=new hvt(n),this.$r=new _vt(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new wvt,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let r=this.Br[t.toKey()];return r||(r=new Evt(n,this.referenceDelegate),this.Br[t.toKey()]=r),r}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(t,n,r){St("MemoryPersistence","Starting transaction:",t);const i=new Avt(this.kr.next());return this.referenceDelegate.Ur(),r(i).next(o=>this.referenceDelegate.Wr(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Gr(t,n){return Ye.or(Object.values(this.Br).map(r=>()=>r.containsKey(t,n)))}}class Avt extends lyt{constructor(t){super(),this.currentSequenceNumber=t}}class hq{constructor(t){this.persistence=t,this.zr=new dq,this.jr=null}static Hr(t){return new hq(t)}get Jr(){if(this.jr)return this.jr;throw Gt()}addReference(t,n,r){return this.zr.addReference(r,n),this.Jr.delete(r.toString()),Ye.resolve()}removeReference(t,n,r){return this.zr.removeReference(r,n),this.Jr.add(r.toString()),Ye.resolve()}markPotentiallyOrphaned(t,n){return this.Jr.add(n.toString()),Ye.resolve()}removeTarget(t,n){this.zr.Vr(n.targetId).forEach(i=>this.Jr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,n.targetId).next(i=>{i.forEach(o=>this.Jr.add(o.toString()))}).next(()=>r.removeTargetData(t,n))}Ur(){this.jr=new Set}Wr(t){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ye.forEach(this.Jr,r=>{const i=Lt.fromPath(r);return this.Yr(t,i).next(o=>{o||n.removeEntry(i,Kt.min())})}).next(()=>(this.jr=null,n.apply(t)))}updateLimboDocument(t,n){return this.Yr(t,n).next(r=>{r?this.Jr.delete(n.toString()):this.Jr.add(n.toString())})}Kr(t){return 0}Yr(t,n){return Ye.or([()=>Ye.resolve(this.zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.Gr(t,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pq{constructor(t,n,r,i){this.targetId=t,this.fromCache=n,this.qi=r,this.Qi=i}static Ki(t,n){let r=xn(),i=xn();for(const o of n.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new pq(t,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kvt{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ivt{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=function(){return uht()?8:cyt(Uo())>0?6:4}()}initialize(t,n){this.zi=t,this.indexManager=n,this.$i=!0}getDocumentsMatchingQuery(t,n,r,i){const o={result:null};return this.ji(t,n).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.Hi(t,n,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;const s=new kvt;return this.Ji(t,n,s).next(a=>{if(o.result=a,this.Ui)return this.Yi(t,n,s,a.size)})}).next(()=>o.result)}Yi(t,n,r,i){return r.documentReadCount<this.Wi?(Ww()<=Cn.DEBUG&&St("QueryEngine","SDK will not create cache indexes for query:",Uv(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),Ye.resolve()):(Ww()<=Cn.DEBUG&&St("QueryEngine","Query:",Uv(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Gi*i?(Ww()<=Cn.DEBUG&&St("QueryEngine","The SDK decides to create cache indexes for query:",Uv(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,df(n))):Ye.resolve())}ji(t,n){if(Lie(n))return Ye.resolve(null);let r=df(n);return this.indexManager.getIndexType(t,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=v9(n,null,"F"),r=df(n)),this.indexManager.getDocumentsMatchingTarget(t,r).next(o=>{const s=xn(...o);return this.zi.getDocuments(t,s).next(a=>this.indexManager.getMinOffset(t,r).next(u=>{const l=this.Zi(n,a);return this.Xi(n,l,s,u.readTime)?this.ji(t,v9(n,null,"F")):this.es(t,l,n,u)}))})))}Hi(t,n,r,i){return Lie(n)||i.isEqual(Kt.min())?Ye.resolve(null):this.zi.getDocuments(t,r).next(o=>{const s=this.Zi(n,o);return this.Xi(n,s,r,i)?Ye.resolve(null):(Ww()<=Cn.DEBUG&&St("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Uv(n)),this.es(t,s,n,oyt(i,-1)).next(a=>a))})}Zi(t,n){let r=new Lo(B_e(t));return n.forEach((i,o)=>{n$(t,o)&&(r=r.add(o))}),r}Xi(t,n,r,i){if(t.limit===null)return!1;if(r.size!==n.size)return!0;const o=t.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Ji(t,n,r){return Ww()<=Cn.DEBUG&&St("QueryEngine","Using full collection scan to execute query:",Uv(n)),this.zi.getDocumentsMatchingQuery(t,n,pm.min(),r)}es(t,n,r,i){return this.zi.getDocumentsMatchingQuery(t,r,i).next(o=>(n.forEach(s=>{o=o.insert(s.key,s)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rvt{constructor(t,n,r,i){this.persistence=t,this.ts=n,this.serializer=i,this.ns=new Qr(Wn),this.rs=new W_(o=>sq(o),aq),this.ss=new Map,this.os=t.getRemoteDocumentCache(),this.Qr=t.getTargetCache(),this.$r=t.getBundleCache(),this._s(r)}_s(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new bvt(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>t.collect(n,this.ns))}}function Nvt(e,t,n,r){return new Rvt(e,t,n,r)}async function uwe(e,t){const n=Xt(e);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,n._s(t),n.mutationQueue.getAllMutationBatches(r))).next(o=>{const s=[],a=[];let u=xn();for(const l of i){s.push(l.batchId);for(const c of l.mutations)u=u.add(c.key)}for(const l of o){a.push(l.batchId);for(const c of l.mutations)u=u.add(c.key)}return n.localDocuments.getDocuments(r,u).next(l=>({us:l,removedBatchIds:s,addedBatchIds:a}))})})}function Pvt(e,t){const n=Xt(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=t.batch.keys(),o=n.os.newChangeBuffer({trackRemovals:!0});return function(a,u,l,c){const f=l.batch,d=f.keys();let h=Ye.resolve();return d.forEach(p=>{h=h.next(()=>c.getEntry(u,p)).next(m=>{const g=l.docVersions.get(p);Tr(g!==null),m.version.compareTo(g)<0&&(f.applyToRemoteDocument(m,l),m.isValidDocument()&&(m.setReadTime(l.commitVersion),c.addEntry(m)))})}),h.next(()=>a.mutationQueue.removeMutationBatch(u,f))}(n,r,t,o).next(()=>o.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=xn();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(u=u.add(a.batch.mutations[l].key));return u}(t))).next(()=>n.localDocuments.getDocuments(r,i))})}function lwe(e){const t=Xt(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",n=>t.Qr.getLastRemoteSnapshotVersion(n))}function Dvt(e,t){const n=Xt(e),r=t.snapshotVersion;let i=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const s=n.os.newChangeBuffer({trackRemovals:!0});i=n.ns;const a=[];t.targetChanges.forEach((c,f)=>{const d=i.get(f);if(!d)return;a.push(n.Qr.removeMatchingKeys(o,c.removedDocuments,f).next(()=>n.Qr.addMatchingKeys(o,c.addedDocuments,f)));let h=d.withSequenceNumber(o.currentSequenceNumber);t.targetMismatches.get(f)!==null?h=h.withResumeToken(bs.EMPTY_BYTE_STRING,Kt.min()).withLastLimboFreeSnapshotVersion(Kt.min()):c.resumeToken.approximateByteSize()>0&&(h=h.withResumeToken(c.resumeToken,r)),i=i.insert(f,h),function(m,g,y){return m.resumeToken.approximateByteSize()===0||g.snapshotVersion.toMicroseconds()-m.snapshotVersion.toMicroseconds()>=3e8?!0:y.addedDocuments.size+y.modifiedDocuments.size+y.removedDocuments.size>0}(d,h,c)&&a.push(n.Qr.updateTargetData(o,h))});let u=fh(),l=xn();if(t.documentUpdates.forEach(c=>{t.resolvedLimboDocuments.has(c)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(o,c))}),a.push(Ovt(o,s,t.documentUpdates).next(c=>{u=c.cs,l=c.ls})),!r.isEqual(Kt.min())){const c=n.Qr.getLastRemoteSnapshotVersion(o).next(f=>n.Qr.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(c)}return Ye.waitFor(a).next(()=>s.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,u,l)).next(()=>u)}).then(o=>(n.ns=i,o))}function Ovt(e,t,n){let r=xn(),i=xn();return n.forEach(o=>r=r.add(o)),t.getEntries(e,r).next(o=>{let s=fh();return n.forEach((a,u)=>{const l=o.get(a);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(Kt.min())?(t.removeEntry(a,u.readTime),s=s.insert(a,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(t.addEntry(u),s=s.insert(a,u)):St("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",u.version)}),{cs:s,ls:i}})}function $vt(e,t){const n=Xt(e);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(t===void 0&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,t)))}function Mvt(e,t){const n=Xt(e);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Qr.getTargetData(r,t).next(o=>o?(i=o,Ye.resolve(i)):n.Qr.allocateTargetId(r).next(s=>(i=new vp(t,s,"TargetPurposeListen",r.currentSequenceNumber),n.Qr.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.ns.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.ns=n.ns.insert(r.targetId,r),n.rs.set(t,r.targetId)),r})}async function x9(e,t,n){const r=Xt(e),i=r.ns.get(t),o=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i))}catch(s){if(!IC(s))throw s;St("LocalStore",`Failed to update sequence numbers for target ${t}: ${s}`)}r.ns=r.ns.remove(t),r.rs.delete(i.target)}function Yie(e,t,n){const r=Xt(e);let i=Kt.min(),o=xn();return r.persistence.runTransaction("Execute query","readwrite",s=>function(u,l,c){const f=Xt(u),d=f.rs.get(c);return d!==void 0?Ye.resolve(f.ns.get(d)):f.Qr.getTargetData(l,c)}(r,s,df(t)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(s,a.targetId).next(u=>{o=u})}).next(()=>r.ts.getDocumentsMatchingQuery(s,t,n?i:Kt.min(),n?o:xn())).next(a=>(Lvt(r,Ayt(t),a),{documents:a,hs:o})))}function Lvt(e,t,n){let r=e.ss.get(t)||Kt.min();n.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),e.ss.set(t,r)}class Kie{constructor(){this.activeTargetIds=Dyt()}As(t){this.activeTargetIds=this.activeTargetIds.add(t)}Rs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}ds(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class Fvt{constructor(){this.no=new Kie,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,r){}addLocalQueryTarget(t){return this.no.As(t),this.ro[t]||"not-current"}updateQueryState(t,n,r){this.ro[t]=n}removeLocalQueryTarget(t){this.no.Rs(t)}isLocalQueryTarget(t){return this.no.activeTargetIds.has(t)}clearQueryState(t){delete this.ro[t]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(t){return this.no.activeTargetIds.has(t)}start(){return this.no=new Kie,Promise.resolve()}handleUserChange(t,n,r){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jvt{io(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xie{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(t){this.uo.push(t)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){St("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const t of this.uo)t(0)}ao(){St("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const t of this.uo)t(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let B2=null;function U6(){return B2===null?B2=function(){return 268435456+Math.round(2147483648*Math.random())}():B2++,"0x"+B2.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bvt={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uvt{constructor(t){this.lo=t.lo,this.ho=t.ho}Po(t){this.Io=t}To(t){this.Eo=t}Ao(t){this.Ro=t}onMessage(t){this.Vo=t}close(){this.ho()}send(t){this.lo(t)}mo(){this.Io()}fo(){this.Eo()}po(t){this.Ro(t)}yo(t){this.Vo(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ns="WebChannelConnection";class zvt extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.wo=r+"://"+n.host,this.So=`projects/${i}/databases/${o}`,this.bo=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${o}`}get Do(){return!1}Co(n,r,i,o,s){const a=U6(),u=this.vo(n,r.toUriEncodedString());St("RestConnection",`Sending RPC '${n}' ${a}:`,u,i);const l={"google-cloud-resource-prefix":this.So,"x-goog-request-params":this.bo};return this.Fo(l,o,s),this.Mo(n,u,l,i).then(c=>(St("RestConnection",`Received RPC '${n}' ${a}: `,c),c),c=>{throw nS("RestConnection",`RPC '${n}' ${a} failed with error: `,c,"url: ",u,"request:",i),c})}xo(n,r,i,o,s,a){return this.Co(n,r,i,o,s)}Fo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+H_}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((o,s)=>n[s]=o),i&&i.headers.forEach((o,s)=>n[s]=o)}vo(n,r){const i=Bvt[n];return`${this.wo}/v1/${r}:${i}`}terminate(){}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Mo(t,n,r,i){const o=U6();return new Promise((s,a)=>{const u=new E_e;u.setWithCredentials(!0),u.listenOnce(T_e.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case nI.NO_ERROR:const c=u.getResponseJson();St(ns,`XHR for RPC '${t}' ${o} received:`,JSON.stringify(c)),s(c);break;case nI.TIMEOUT:St(ns,`RPC '${t}' ${o} timed out`),a(new yt(Fe.DEADLINE_EXCEEDED,"Request time out"));break;case nI.HTTP_ERROR:const f=u.getStatus();if(St(ns,`RPC '${t}' ${o} failed with status:`,f,"response text:",u.getResponseText()),f>0){let d=u.getResponseJson();Array.isArray(d)&&(d=d[0]);const h=d==null?void 0:d.error;if(h&&h.status&&h.message){const p=function(g){const y=g.toLowerCase().replace(/_/g,"-");return Object.values(Fe).indexOf(y)>=0?y:Fe.UNKNOWN}(h.status);a(new yt(p,h.message))}else a(new yt(Fe.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new yt(Fe.UNAVAILABLE,"Connection failed."));break;default:Gt()}}finally{St(ns,`RPC '${t}' ${o} completed.`)}});const l=JSON.stringify(i);St(ns,`RPC '${t}' ${o} sending request:`,i),u.send(n,"POST",l,r,15)})}Oo(t,n,r){const i=U6(),o=[this.wo,"/","google.firestore.v1.Firestore","/",t,"/channel"],s=A_e(),a=C_e(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.xmlHttpFactory=new x_e({})),this.Fo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const c=o.join("");St(ns,`Creating RPC '${t}' stream ${i}: ${c}`,u);const f=s.createWebChannel(c,u);let d=!1,h=!1;const p=new Uvt({lo:g=>{h?St(ns,`Not sending because RPC '${t}' stream ${i} is closed:`,g):(d||(St(ns,`Opening RPC '${t}' stream ${i} transport.`),f.open(),d=!0),St(ns,`RPC '${t}' stream ${i} sending:`,g),f.send(g))},ho:()=>f.close()}),m=(g,y,v)=>{g.listen(y,_=>{try{v(_)}catch(w){setTimeout(()=>{throw w},0)}})};return m(f,FE.EventType.OPEN,()=>{h||(St(ns,`RPC '${t}' stream ${i} transport opened.`),p.mo())}),m(f,FE.EventType.CLOSE,()=>{h||(h=!0,St(ns,`RPC '${t}' stream ${i} transport closed`),p.po())}),m(f,FE.EventType.ERROR,g=>{h||(h=!0,nS(ns,`RPC '${t}' stream ${i} transport errored:`,g),p.po(new yt(Fe.UNAVAILABLE,"The operation could not be completed")))}),m(f,FE.EventType.MESSAGE,g=>{var y;if(!h){const v=g.data[0];Tr(!!v);const _=v,w=_.error||((y=_[0])===null||y===void 0?void 0:y.error);if(w){St(ns,`RPC '${t}' stream ${i} received error:`,w);const E=w.status;let S=function(A){const R=Ai[A];if(R!==void 0)return J_e(R)}(E),T=w.message;S===void 0&&(S=Fe.INTERNAL,T="Unknown error status: "+E+" with message "+w.message),h=!0,p.po(new yt(S,T)),f.close()}else St(ns,`RPC '${t}' stream ${i} received:`,v),p.yo(v)}}),m(a,S_e.STAT_EVENT,g=>{g.stat===d9.PROXY?St(ns,`RPC '${t}' stream ${i} detected buffering proxy`):g.stat===d9.NOPROXY&&St(ns,`RPC '${t}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{p.fo()},0),p}}function z6(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a$(e){return new Zyt(e,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cwe{constructor(t,n,r=1e3,i=1.5,o=6e4){this.oi=t,this.timerId=n,this.No=r,this.Lo=i,this.Bo=o,this.ko=0,this.qo=null,this.Qo=Date.now(),this.reset()}reset(){this.ko=0}Ko(){this.ko=this.Bo}$o(t){this.cancel();const n=Math.floor(this.ko+this.Uo()),r=Math.max(0,Date.now()-this.Qo),i=Math.max(0,n-r);i>0&&St("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.qo=this.oi.enqueueAfterDelay(this.timerId,i,()=>(this.Qo=Date.now(),t())),this.ko*=this.Lo,this.ko<this.No&&(this.ko=this.No),this.ko>this.Bo&&(this.ko=this.Bo)}Wo(){this.qo!==null&&(this.qo.skipDelay(),this.qo=null)}cancel(){this.qo!==null&&(this.qo.cancel(),this.qo=null)}Uo(){return(Math.random()-.5)*this.ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fwe{constructor(t,n,r,i,o,s,a,u){this.oi=t,this.Go=r,this.zo=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.jo=0,this.Ho=null,this.Jo=null,this.stream=null,this.Yo=new cwe(t,n)}Zo(){return this.state===1||this.state===5||this.Xo()}Xo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.e_()}async stop(){this.Zo()&&await this.close(0)}t_(){this.state=0,this.Yo.reset()}n_(){this.Xo()&&this.Ho===null&&(this.Ho=this.oi.enqueueAfterDelay(this.Go,6e4,()=>this.r_()))}i_(t){this.s_(),this.stream.send(t)}async r_(){if(this.Xo())return this.close(0)}s_(){this.Ho&&(this.Ho.cancel(),this.Ho=null)}o_(){this.Jo&&(this.Jo.cancel(),this.Jo=null)}async close(t,n){this.s_(),this.o_(),this.Yo.cancel(),this.jo++,t!==4?this.Yo.reset():n&&n.code===Fe.RESOURCE_EXHAUSTED?(ch(n.toString()),ch("Using maximum backoff delay to prevent overloading the backend."),this.Yo.Ko()):n&&n.code===Fe.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.__(),this.stream.close(),this.stream=null),this.state=t,await this.listener.Ao(n)}__(){}auth(){this.state=1;const t=this.a_(this.jo),n=this.jo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.jo===n&&this.u_(r,i)},r=>{t(()=>{const i=new yt(Fe.UNKNOWN,"Fetching auth token failed: "+r.message);return this.c_(i)})})}u_(t,n){const r=this.a_(this.jo);this.stream=this.l_(t,n),this.stream.Po(()=>{r(()=>this.listener.Po())}),this.stream.To(()=>{r(()=>(this.state=2,this.Jo=this.oi.enqueueAfterDelay(this.zo,1e4,()=>(this.Xo()&&(this.state=3),Promise.resolve())),this.listener.To()))}),this.stream.Ao(i=>{r(()=>this.c_(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}e_(){this.state=5,this.Yo.$o(async()=>{this.state=0,this.start()})}c_(t){return St("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}a_(t){return n=>{this.oi.enqueueAndForget(()=>this.jo===t?n():(St("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Vvt extends fwe{constructor(t,n,r,i,o,s){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}l_(t,n){return this.connection.Oo("Listen",t,n)}onMessage(t){this.Yo.reset();const n=nvt(this.serializer,t),r=function(o){if(!("targetChange"in o))return Kt.min();const s=o.targetChange;return s.targetIds&&s.targetIds.length?Kt.min():s.readTime?hf(s.readTime):Kt.min()}(t);return this.listener.h_(n,r)}P_(t){const n={};n.database=E9(this.serializer),n.addTarget=function(o,s){let a;const u=s.target;if(a=g9(u)?{documents:ovt(o,u)}:{query:svt(o,u)._t},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=twe(o,s.resumeToken);const l=b9(o,s.expectedCount);l!==null&&(a.expectedCount=l)}else if(s.snapshotVersion.compareTo(Kt.min())>0){a.readTime=VN(o,s.snapshotVersion.toTimestamp());const l=b9(o,s.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,t);const r=uvt(this.serializer,t);r&&(n.labels=r),this.i_(n)}I_(t){const n={};n.database=E9(this.serializer),n.removeTarget=t,this.i_(n)}}class Hvt extends fwe{constructor(t,n,r,i,o,s){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o,this.T_=!1}get E_(){return this.T_}start(){this.T_=!1,this.lastStreamToken=void 0,super.start()}__(){this.T_&&this.d_([])}l_(t,n){return this.connection.Oo("Write",t,n)}onMessage(t){if(Tr(!!t.streamToken),this.lastStreamToken=t.streamToken,this.T_){this.Yo.reset();const n=ivt(t.writeResults,t.commitTime),r=hf(t.commitTime);return this.listener.A_(r,n)}return Tr(!t.writeResults||t.writeResults.length===0),this.T_=!0,this.listener.R_()}V_(){const t={};t.database=E9(this.serializer),this.i_(t)}d_(t){const n={streamToken:this.lastStreamToken,writes:t.map(r=>rvt(this.serializer,r))};this.i_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qvt extends class{}{constructor(t,n,r,i){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.m_=!1}f_(){if(this.m_)throw new yt(Fe.FAILED_PRECONDITION,"The client has already been terminated.")}Co(t,n,r,i){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Co(t,_9(n,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===Fe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new yt(Fe.UNKNOWN,o.toString())})}xo(t,n,r,i,o){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.xo(t,_9(n,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===Fe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new yt(Fe.UNKNOWN,s.toString())})}terminate(){this.m_=!0,this.connection.terminate()}}class Wvt{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.g_=0,this.p_=null,this.y_=!0}w_(){this.g_===0&&(this.S_("Unknown"),this.p_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.p_=null,this.b_("Backend didn't respond within 10 seconds."),this.S_("Offline"),Promise.resolve())))}D_(t){this.state==="Online"?this.S_("Unknown"):(this.g_++,this.g_>=1&&(this.C_(),this.b_(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.S_("Offline")))}set(t){this.C_(),this.g_=0,t==="Online"&&(this.y_=!1),this.S_(t)}S_(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}b_(t){const n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.y_?(ch(n),this.y_=!1):St("OnlineStateTracker",n)}C_(){this.p_!==null&&(this.p_.cancel(),this.p_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gvt{constructor(t,n,r,i,o){this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.v_=[],this.F_=new Map,this.M_=new Set,this.x_=[],this.O_=o,this.O_.io(s=>{r.enqueueAndForget(async()=>{jy(this)&&(St("RemoteStore","Restarting streams for network reachability change."),await async function(u){const l=Xt(u);l.M_.add(4),await DC(l),l.N_.set("Unknown"),l.M_.delete(4),await PC(l)}(this))})}),this.N_=new Wvt(r,i)}}async function PC(e){if(jy(e))for(const t of e.x_)await t(!0)}async function DC(e){for(const t of e.x_)await t(!1)}function dwe(e,t){const n=Xt(e);n.F_.has(t.targetId)||(n.F_.set(t.targetId,t),vq(n)?yq(n):G_(n).Xo()&&gq(n,t))}function mq(e,t){const n=Xt(e),r=G_(n);n.F_.delete(t),r.Xo()&&hwe(n,t),n.F_.size===0&&(r.Xo()?r.n_():jy(n)&&n.N_.set("Unknown"))}function gq(e,t){if(e.L_.xe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Kt.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}G_(e).P_(t)}function hwe(e,t){e.L_.xe(t),G_(e).I_(t)}function yq(e){e.L_=new Kyt({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),ot:t=>e.F_.get(t)||null,tt:()=>e.datastore.serializer.databaseId}),G_(e).start(),e.N_.w_()}function vq(e){return jy(e)&&!G_(e).Zo()&&e.F_.size>0}function jy(e){return Xt(e).M_.size===0}function pwe(e){e.L_=void 0}async function Yvt(e){e.N_.set("Online")}async function Kvt(e){e.F_.forEach((t,n)=>{gq(e,t)})}async function Xvt(e,t){pwe(e),vq(e)?(e.N_.D_(t),yq(e)):e.N_.set("Unknown")}async function Qvt(e,t,n){if(e.N_.set("Online"),t instanceof ewe&&t.state===2&&t.cause)try{await async function(i,o){const s=o.cause;for(const a of o.targetIds)i.F_.has(a)&&(await i.remoteSyncer.rejectListen(a,s),i.F_.delete(a),i.L_.removeTarget(a))}(e,t)}catch(r){St("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),r),await HN(e,r)}else if(t instanceof oI?e.L_.Ke(t):t instanceof Z_e?e.L_.He(t):e.L_.We(t),!n.isEqual(Kt.min()))try{const r=await lwe(e.localStore);n.compareTo(r)>=0&&await function(o,s){const a=o.L_.rt(s);return a.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){const c=o.F_.get(l);c&&o.F_.set(l,c.withResumeToken(u.resumeToken,s))}}),a.targetMismatches.forEach((u,l)=>{const c=o.F_.get(u);if(!c)return;o.F_.set(u,c.withResumeToken(bs.EMPTY_BYTE_STRING,c.snapshotVersion)),hwe(o,u);const f=new vp(c.target,u,l,c.sequenceNumber);gq(o,f)}),o.remoteSyncer.applyRemoteEvent(a)}(e,n)}catch(r){St("RemoteStore","Failed to raise snapshot:",r),await HN(e,r)}}async function HN(e,t,n){if(!IC(t))throw t;e.M_.add(1),await DC(e),e.N_.set("Offline"),n||(n=()=>lwe(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{St("RemoteStore","Retrying IndexedDB access"),await n(),e.M_.delete(1),await PC(e)})}function mwe(e,t){return t().catch(n=>HN(e,n,t))}async function u$(e){const t=Xt(e),n=gm(t);let r=t.v_.length>0?t.v_[t.v_.length-1].batchId:-1;for(;Jvt(t);)try{const i=await $vt(t.localStore,r);if(i===null){t.v_.length===0&&n.n_();break}r=i.batchId,Zvt(t,i)}catch(i){await HN(t,i)}gwe(t)&&ywe(t)}function Jvt(e){return jy(e)&&e.v_.length<10}function Zvt(e,t){e.v_.push(t);const n=gm(e);n.Xo()&&n.E_&&n.d_(t.mutations)}function gwe(e){return jy(e)&&!gm(e).Zo()&&e.v_.length>0}function ywe(e){gm(e).start()}async function e1t(e){gm(e).V_()}async function t1t(e){const t=gm(e);for(const n of e.v_)t.d_(n.mutations)}async function n1t(e,t,n){const r=e.v_.shift(),i=lq.from(r,t,n);await mwe(e,()=>e.remoteSyncer.applySuccessfulWrite(i)),await u$(e)}async function r1t(e,t){t&&gm(e).E_&&await async function(r,i){if(function(s){return Wyt(s)&&s!==Fe.ABORTED}(i.code)){const o=r.v_.shift();gm(r).t_(),await mwe(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),await u$(r)}}(e,t),gwe(e)&&ywe(e)}async function Qie(e,t){const n=Xt(e);n.asyncQueue.verifyOperationInProgress(),St("RemoteStore","RemoteStore received new credentials");const r=jy(n);n.M_.add(3),await DC(n),r&&n.N_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.M_.delete(3),await PC(n)}async function i1t(e,t){const n=Xt(e);t?(n.M_.delete(2),await PC(n)):t||(n.M_.add(2),await DC(n),n.N_.set("Unknown"))}function G_(e){return e.B_||(e.B_=function(n,r,i){const o=Xt(n);return o.f_(),new Vvt(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(e.datastore,e.asyncQueue,{Po:Yvt.bind(null,e),To:Kvt.bind(null,e),Ao:Xvt.bind(null,e),h_:Qvt.bind(null,e)}),e.x_.push(async t=>{t?(e.B_.t_(),vq(e)?yq(e):e.N_.set("Unknown")):(await e.B_.stop(),pwe(e))})),e.B_}function gm(e){return e.k_||(e.k_=function(n,r,i){const o=Xt(n);return o.f_(),new Hvt(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(e.datastore,e.asyncQueue,{Po:()=>Promise.resolve(),To:e1t.bind(null,e),Ao:r1t.bind(null,e),R_:t1t.bind(null,e),A_:n1t.bind(null,e)}),e.x_.push(async t=>{t?(e.k_.t_(),await u$(e)):(await e.k_.stop(),e.v_.length>0&&(St("RemoteStore",`Stopping write stream with ${e.v_.length} pending writes`),e.v_=[]))})),e.k_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bq{constructor(t,n,r,i,o){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new zd,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,n,r,i,o){const s=Date.now()+r,a=new bq(t,n,s,i,o);return a.start(r),a}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new yt(Fe.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function _q(e,t){if(ch("AsyncQueue",`${t}: ${e}`),IC(e))return new yt(Fe.UNAVAILABLE,`${t}: ${e}`);throw e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U1{constructor(t){this.comparator=t?(n,r)=>t(n,r)||Lt.comparator(n.key,r.key):(n,r)=>Lt.comparator(n.key,r.key),this.keyedMap=jE(),this.sortedSet=new Qr(this.comparator)}static emptySet(t){return new U1(t.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((n,r)=>(t(n),!1))}add(t){const n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){const n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof U1)||this.size!==t.size)return!1;const n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){const t=[];return this.forEach(n=>{t.push(n.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){const r=new U1;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jie{constructor(){this.q_=new Qr(Lt.comparator)}track(t){const n=t.doc.key,r=this.q_.get(n);r?t.type!==0&&r.type===3?this.q_=this.q_.insert(n,t):t.type===3&&r.type!==1?this.q_=this.q_.insert(n,{type:r.type,doc:t.doc}):t.type===2&&r.type===2?this.q_=this.q_.insert(n,{type:2,doc:t.doc}):t.type===2&&r.type===0?this.q_=this.q_.insert(n,{type:0,doc:t.doc}):t.type===1&&r.type===0?this.q_=this.q_.remove(n):t.type===1&&r.type===2?this.q_=this.q_.insert(n,{type:1,doc:r.doc}):t.type===0&&r.type===1?this.q_=this.q_.insert(n,{type:2,doc:t.doc}):Gt():this.q_=this.q_.insert(n,t)}Q_(){const t=[];return this.q_.inorderTraversal((n,r)=>{t.push(r)}),t}}class Pb{constructor(t,n,r,i,o,s,a,u,l){this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(t,n,r,i,o){const s=[];return n.forEach(a=>{s.push({type:0,doc:a})}),new Pb(t,n,U1.emptySet(n),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&t$(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const n=this.docChanges,r=t.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o1t{constructor(){this.K_=void 0,this.U_=[]}W_(){return this.U_.some(t=>t.G_())}}class s1t{constructor(){this.queries=new W_(t=>j_e(t),t$),this.onlineState="Unknown",this.z_=new Set}}async function vwe(e,t){const n=Xt(e);let r=3;const i=t.query;let o=n.queries.get(i);o?!o.W_()&&t.G_()&&(r=2):(o=new o1t,r=t.G_()?0:1);try{switch(r){case 0:o.K_=await n.onListen(i,!0);break;case 1:o.K_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(s){const a=_q(s,`Initialization of query '${Uv(t.query)}' failed`);return void t.onError(a)}n.queries.set(i,o),o.U_.push(t),t.j_(n.onlineState),o.K_&&t.H_(o.K_)&&wq(n)}async function bwe(e,t){const n=Xt(e),r=t.query;let i=3;const o=n.queries.get(r);if(o){const s=o.U_.indexOf(t);s>=0&&(o.U_.splice(s,1),o.U_.length===0?i=t.G_()?0:1:!o.W_()&&t.G_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function a1t(e,t){const n=Xt(e);let r=!1;for(const i of t){const o=i.query,s=n.queries.get(o);if(s){for(const a of s.U_)a.H_(i)&&(r=!0);s.K_=i}}r&&wq(n)}function u1t(e,t,n){const r=Xt(e),i=r.queries.get(t);if(i)for(const o of i.U_)o.onError(n);r.queries.delete(t)}function wq(e){e.z_.forEach(t=>{t.next()})}var T9,Zie;(Zie=T9||(T9={})).J_="default",Zie.Cache="cache";class _we{constructor(t,n,r){this.query=t,this.Y_=n,this.Z_=!1,this.X_=null,this.onlineState="Unknown",this.options=r||{}}H_(t){if(!this.options.includeMetadataChanges){const r=[];for(const i of t.docChanges)i.type!==3&&r.push(i);t=new Pb(t.query,t.docs,t.oldDocs,r,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let n=!1;return this.Z_?this.ea(t)&&(this.Y_.next(t),n=!0):this.ta(t,this.onlineState)&&(this.na(t),n=!0),this.X_=t,n}onError(t){this.Y_.error(t)}j_(t){this.onlineState=t;let n=!1;return this.X_&&!this.Z_&&this.ta(this.X_,t)&&(this.na(this.X_),n=!0),n}ta(t,n){if(!t.fromCache||!this.G_())return!0;const r=n!=="Offline";return(!this.options.ra||!r)&&(!t.docs.isEmpty()||t.hasCachedResults||n==="Offline")}ea(t){if(t.docChanges.length>0)return!0;const n=this.X_&&this.X_.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}na(t){t=Pb.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Z_=!0,this.Y_.next(t)}G_(){return this.options.source!==T9.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wwe{constructor(t){this.key=t}}class Ewe{constructor(t){this.key=t}}class l1t{constructor(t,n){this.query=t,this.la=n,this.ha=null,this.hasCachedResults=!1,this.current=!1,this.Pa=xn(),this.mutatedKeys=xn(),this.Ia=B_e(t),this.Ta=new U1(this.Ia)}get Ea(){return this.la}da(t,n){const r=n?n.Aa:new Jie,i=n?n.Ta:this.Ta;let o=n?n.mutatedKeys:this.mutatedKeys,s=i,a=!1;const u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal((c,f)=>{const d=i.get(c),h=n$(this.query,f)?f:null,p=!!d&&this.mutatedKeys.has(d.key),m=!!h&&(h.hasLocalMutations||this.mutatedKeys.has(h.key)&&h.hasCommittedMutations);let g=!1;d&&h?d.data.isEqual(h.data)?p!==m&&(r.track({type:3,doc:h}),g=!0):this.Ra(d,h)||(r.track({type:2,doc:h}),g=!0,(u&&this.Ia(h,u)>0||l&&this.Ia(h,l)<0)&&(a=!0)):!d&&h?(r.track({type:0,doc:h}),g=!0):d&&!h&&(r.track({type:1,doc:d}),g=!0,(u||l)&&(a=!0)),g&&(h?(s=s.add(h),o=m?o.add(c):o.delete(c)):(s=s.delete(c),o=o.delete(c)))}),this.query.limit!==null)for(;s.size>this.query.limit;){const c=this.query.limitType==="F"?s.last():s.first();s=s.delete(c.key),o=o.delete(c.key),r.track({type:1,doc:c})}return{Ta:s,Aa:r,Xi:a,mutatedKeys:o}}Ra(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,r,i){const o=this.Ta;this.Ta=t.Ta,this.mutatedKeys=t.mutatedKeys;const s=t.Aa.Q_();s.sort((c,f)=>function(h,p){const m=g=>{switch(g){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Gt()}};return m(h)-m(p)}(c.type,f.type)||this.Ia(c.doc,f.doc)),this.Va(r),i=i!=null&&i;const a=n&&!i?this.ma():[],u=this.Pa.size===0&&this.current&&!i?1:0,l=u!==this.ha;return this.ha=u,s.length!==0||l?{snapshot:new Pb(this.query,t.Ta,o,s,t.mutatedKeys,u===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),fa:a}:{fa:a}}j_(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({Ta:this.Ta,Aa:new Jie,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{fa:[]}}ga(t){return!this.la.has(t)&&!!this.Ta.has(t)&&!this.Ta.get(t).hasLocalMutations}Va(t){t&&(t.addedDocuments.forEach(n=>this.la=this.la.add(n)),t.modifiedDocuments.forEach(n=>{}),t.removedDocuments.forEach(n=>this.la=this.la.delete(n)),this.current=t.current)}ma(){if(!this.current)return[];const t=this.Pa;this.Pa=xn(),this.Ta.forEach(r=>{this.ga(r.key)&&(this.Pa=this.Pa.add(r.key))});const n=[];return t.forEach(r=>{this.Pa.has(r)||n.push(new Ewe(r))}),this.Pa.forEach(r=>{t.has(r)||n.push(new wwe(r))}),n}pa(t){this.la=t.hs,this.Pa=xn();const n=this.da(t.documents);return this.applyChanges(n,!0)}ya(){return Pb.fromInitialDocuments(this.query,this.Ta,this.mutatedKeys,this.ha===0,this.hasCachedResults)}}class c1t{constructor(t,n,r){this.query=t,this.targetId=n,this.view=r}}class f1t{constructor(t){this.key=t,this.wa=!1}}class d1t{constructor(t,n,r,i,o,s){this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.Sa={},this.ba=new W_(a=>j_e(a),t$),this.Da=new Map,this.Ca=new Set,this.va=new Qr(Lt.comparator),this.Fa=new Map,this.Ma=new dq,this.xa={},this.Oa=new Map,this.Na=Nb.Ln(),this.onlineState="Unknown",this.La=void 0}get isPrimaryClient(){return this.La===!0}}async function h1t(e,t,n=!0){const r=kwe(e);let i;const o=r.ba.get(t);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.ya()):i=await xwe(r,t,n,!0),i}async function p1t(e,t){const n=kwe(e);await xwe(n,t,!0,!1)}async function xwe(e,t,n,r){const i=await Mvt(e.localStore,df(t)),o=i.targetId,s=n?e.sharedClientState.addLocalQueryTarget(o):"not-current";let a;return r&&(a=await m1t(e,t,o,s==="current",i.resumeToken)),e.isPrimaryClient&&n&&dwe(e.remoteStore,i),a}async function m1t(e,t,n,r,i){e.Ba=(f,d,h)=>async function(m,g,y,v){let _=g.view.da(y);_.Xi&&(_=await Yie(m.localStore,g.query,!1).then(({documents:T})=>g.view.da(T,_)));const w=v&&v.targetChanges.get(g.targetId),E=v&&v.targetMismatches.get(g.targetId)!=null,S=g.view.applyChanges(_,m.isPrimaryClient,w,E);return toe(m,g.targetId,S.fa),S.snapshot}(e,f,d,h);const o=await Yie(e.localStore,t,!0),s=new l1t(t,o.hs),a=s.da(o.documents),u=NC.createSynthesizedTargetChangeForCurrentChange(n,r&&e.onlineState!=="Offline",i),l=s.applyChanges(a,e.isPrimaryClient,u);toe(e,n,l.fa);const c=new c1t(t,n,s);return e.ba.set(t,c),e.Da.has(n)?e.Da.get(n).push(t):e.Da.set(n,[t]),l.snapshot}async function g1t(e,t,n){const r=Xt(e),i=r.ba.get(t),o=r.Da.get(i.targetId);if(o.length>1)return r.Da.set(i.targetId,o.filter(s=>!t$(s,t))),void r.ba.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await x9(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&mq(r.remoteStore,i.targetId),S9(r,i.targetId)}).catch(kC)):(S9(r,i.targetId),await x9(r.localStore,i.targetId,!0))}async function y1t(e,t){const n=Xt(e),r=n.ba.get(t),i=n.Da.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),mq(n.remoteStore,r.targetId))}async function v1t(e,t,n){const r=S1t(e);try{const i=await function(s,a){const u=Xt(s),l=Vi.now(),c=a.reduce((h,p)=>h.add(p.key),xn());let f,d;return u.persistence.runTransaction("Locally write mutations","readwrite",h=>{let p=fh(),m=xn();return u.os.getEntries(h,c).next(g=>{p=g,p.forEach((y,v)=>{v.isValidDocument()||(m=m.add(y))})}).next(()=>u.localDocuments.getOverlayedDocuments(h,p)).next(g=>{f=g;const y=[];for(const v of a){const _=Uyt(v,f.get(v.key).overlayedDocument);_!=null&&y.push(new Gm(v.key,_,N_e(_.value.mapValue),Da.exists(!0)))}return u.mutationQueue.addMutationBatch(h,l,y,a)}).next(g=>{d=g;const y=g.applyToLocalDocumentSet(f,m);return u.documentOverlayCache.saveOverlays(h,g.batchId,y)})}).then(()=>({batchId:d.batchId,changes:z_e(f)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(i.batchId),function(s,a,u){let l=s.xa[s.currentUser.toKey()];l||(l=new Qr(Wn)),l=l.insert(a,u),s.xa[s.currentUser.toKey()]=l}(r,i.batchId,n),await OC(r,i.changes),await u$(r.remoteStore)}catch(i){const o=_q(i,"Failed to persist write");n.reject(o)}}async function Twe(e,t){const n=Xt(e);try{const r=await Dvt(n.localStore,t);t.targetChanges.forEach((i,o)=>{const s=n.Fa.get(o);s&&(Tr(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?s.wa=!0:i.modifiedDocuments.size>0?Tr(s.wa):i.removedDocuments.size>0&&(Tr(s.wa),s.wa=!1))}),await OC(n,r,t)}catch(r){await kC(r)}}function eoe(e,t,n){const r=Xt(e);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.ba.forEach((o,s)=>{const a=s.view.j_(t);a.snapshot&&i.push(a.snapshot)}),function(s,a){const u=Xt(s);u.onlineState=a;let l=!1;u.queries.forEach((c,f)=>{for(const d of f.U_)d.j_(a)&&(l=!0)}),l&&wq(u)}(r.eventManager,t),i.length&&r.Sa.h_(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function b1t(e,t,n){const r=Xt(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.Fa.get(t),o=i&&i.key;if(o){let s=new Qr(Lt.comparator);s=s.insert(o,ls.newNoDocument(o,Kt.min()));const a=xn().add(o),u=new s$(Kt.min(),new Map,new Qr(Wn),s,a);await Twe(r,u),r.va=r.va.remove(o),r.Fa.delete(t),Eq(r)}else await x9(r.localStore,t,!1).then(()=>S9(r,t,n)).catch(kC)}async function _1t(e,t){const n=Xt(e),r=t.batch.batchId;try{const i=await Pvt(n.localStore,t);Cwe(n,r,null),Swe(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await OC(n,i)}catch(i){await kC(i)}}async function w1t(e,t,n){const r=Xt(e);try{const i=await function(s,a){const u=Xt(s);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let c;return u.mutationQueue.lookupMutationBatch(l,a).next(f=>(Tr(f!==null),c=f.keys(),u.mutationQueue.removeMutationBatch(l,f))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,c,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,c)).next(()=>u.localDocuments.getDocuments(l,c))})}(r.localStore,t);Cwe(r,t,n),Swe(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await OC(r,i)}catch(i){await kC(i)}}function Swe(e,t){(e.Oa.get(t)||[]).forEach(n=>{n.resolve()}),e.Oa.delete(t)}function Cwe(e,t,n){const r=Xt(e);let i=r.xa[r.currentUser.toKey()];if(i){const o=i.get(t);o&&(n?o.reject(n):o.resolve(),i=i.remove(t)),r.xa[r.currentUser.toKey()]=i}}function S9(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Da.get(t))e.ba.delete(r),n&&e.Sa.ka(r,n);e.Da.delete(t),e.isPrimaryClient&&e.Ma.Vr(t).forEach(r=>{e.Ma.containsKey(r)||Awe(e,r)})}function Awe(e,t){e.Ca.delete(t.path.canonicalString());const n=e.va.get(t);n!==null&&(mq(e.remoteStore,n),e.va=e.va.remove(t),e.Fa.delete(n),Eq(e))}function toe(e,t,n){for(const r of n)r instanceof wwe?(e.Ma.addReference(r.key,t),E1t(e,r)):r instanceof Ewe?(St("SyncEngine","Document no longer in limbo: "+r.key),e.Ma.removeReference(r.key,t),e.Ma.containsKey(r.key)||Awe(e,r.key)):Gt()}function E1t(e,t){const n=t.key,r=n.path.canonicalString();e.va.get(n)||e.Ca.has(r)||(St("SyncEngine","New document in limbo: "+n),e.Ca.add(r),Eq(e))}function Eq(e){for(;e.Ca.size>0&&e.va.size<e.maxConcurrentLimboResolutions;){const t=e.Ca.values().next().value;e.Ca.delete(t);const n=new Lt(Rr.fromString(t)),r=e.Na.next();e.Fa.set(r,new f1t(n)),e.va=e.va.insert(n,r),dwe(e.remoteStore,new vp(df(uq(n.path)),r,"TargetPurposeLimboResolution",nq.oe))}}async function OC(e,t,n){const r=Xt(e),i=[],o=[],s=[];r.ba.isEmpty()||(r.ba.forEach((a,u)=>{s.push(r.Ba(u,t,n).then(l=>{if((l||n)&&r.isPrimaryClient){const c=l&&!l.fromCache;r.sharedClientState.updateQueryState(u.targetId,c?"current":"not-current")}if(l){i.push(l);const c=pq.Ki(u.targetId,l);o.push(c)}}))}),await Promise.all(s),r.Sa.h_(i),await async function(u,l){const c=Xt(u);try{await c.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>Ye.forEach(l,d=>Ye.forEach(d.qi,h=>c.persistence.referenceDelegate.addReference(f,d.targetId,h)).next(()=>Ye.forEach(d.Qi,h=>c.persistence.referenceDelegate.removeReference(f,d.targetId,h)))))}catch(f){if(!IC(f))throw f;St("LocalStore","Failed to update sequence numbers: "+f)}for(const f of l){const d=f.targetId;if(!f.fromCache){const h=c.ns.get(d),p=h.snapshotVersion,m=h.withLastLimboFreeSnapshotVersion(p);c.ns=c.ns.insert(d,m)}}}(r.localStore,o))}async function x1t(e,t){const n=Xt(e);if(!n.currentUser.isEqual(t)){St("SyncEngine","User change. New user:",t.toKey());const r=await uwe(n.localStore,t);n.currentUser=t,function(o,s){o.Oa.forEach(a=>{a.forEach(u=>{u.reject(new yt(Fe.CANCELLED,s))})}),o.Oa.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,r.removedBatchIds,r.addedBatchIds),await OC(n,r.us)}}function T1t(e,t){const n=Xt(e),r=n.Fa.get(t);if(r&&r.wa)return xn().add(r.key);{let i=xn();const o=n.Da.get(t);if(!o)return i;for(const s of o){const a=n.ba.get(s);i=i.unionWith(a.view.Ea)}return i}}function kwe(e){const t=Xt(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Twe.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=T1t.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=b1t.bind(null,t),t.Sa.h_=a1t.bind(null,t.eventManager),t.Sa.ka=u1t.bind(null,t.eventManager),t}function S1t(e){const t=Xt(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=_1t.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=w1t.bind(null,t),t}class noe{constructor(){this.synchronizeTabs=!1}async initialize(t){this.serializer=a$(t.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(t),this.persistence=this.createPersistence(t),await this.persistence.start(),this.localStore=this.createLocalStore(t),this.gcScheduler=this.createGarbageCollectionScheduler(t,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(t,this.localStore)}createGarbageCollectionScheduler(t,n){return null}createIndexBackfillerScheduler(t,n){return null}createLocalStore(t){return Nvt(this.persistence,new Ivt,t.initialUser,this.serializer)}createPersistence(t){return new Cvt(hq.Hr,this.serializer)}createSharedClientState(t){return new Fvt}async terminate(){var t,n;(t=this.gcScheduler)===null||t===void 0||t.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class C1t{async initialize(t,n){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>eoe(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=x1t.bind(null,this.syncEngine),await i1t(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new s1t}()}createDatastore(t){const n=a$(t.databaseInfo.databaseId),r=function(o){return new zvt(o)}(t.databaseInfo);return function(o,s,a,u){return new qvt(o,s,a,u)}(t.authCredentials,t.appCheckCredentials,r,n)}createRemoteStore(t){return function(r,i,o,s,a){return new Gvt(r,i,o,s,a)}(this.localStore,this.datastore,t.asyncQueue,n=>eoe(this.syncEngine,n,0),function(){return Xie.D()?new Xie:new jvt}())}createSyncEngine(t,n){return function(i,o,s,a,u,l,c){const f=new d1t(i,o,s,a,u,l);return c&&(f.La=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}async terminate(){var t;await async function(r){const i=Xt(r);St("RemoteStore","RemoteStore shutting down."),i.M_.add(5),await DC(i),i.O_.shutdown(),i.N_.set("Unknown")}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iwe{constructor(t){this.observer=t,this.muted=!1}next(t){this.observer.next&&this.Ka(this.observer.next,t)}error(t){this.observer.error?this.Ka(this.observer.error,t):ch("Uncaught Error in snapshot listener:",t.toString())}$a(){this.muted=!0}Ka(t,n){this.muted||setTimeout(()=>{this.muted||t(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A1t{constructor(t,n,r,i){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=ca.UNAUTHENTICATED,this.clientId=k_e.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async o=>{St("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(St("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new yt(Fe.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const t=new zd;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){const r=_q(n,"Failed to shutdown persistence");t.reject(r)}}),t.promise}}async function V6(e,t){e.asyncQueue.verifyOperationInProgress(),St("FirestoreClient","Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(async i=>{r.isEqual(i)||(await uwe(t.localStore,i),r=i)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function roe(e,t){e.asyncQueue.verifyOperationInProgress();const n=await Rwe(e);St("FirestoreClient","Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(r=>Qie(t.remoteStore,r)),e.setAppCheckTokenChangeListener((r,i)=>Qie(t.remoteStore,i)),e._onlineComponents=t}function k1t(e){return e.name==="FirebaseError"?e.code===Fe.FAILED_PRECONDITION||e.code===Fe.UNIMPLEMENTED:!(typeof DOMException<"u"&&e instanceof DOMException)||e.code===22||e.code===20||e.code===11}async function Rwe(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){St("FirestoreClient","Using user provided OfflineComponentProvider");try{await V6(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!k1t(n))throw n;nS("Error using user provided cache. Falling back to memory cache: "+n),await V6(e,new noe)}}else St("FirestoreClient","Using default OfflineComponentProvider"),await V6(e,new noe);return e._offlineComponents}async function xq(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(St("FirestoreClient","Using user provided OnlineComponentProvider"),await roe(e,e._uninitializedComponentsProvider._online)):(St("FirestoreClient","Using default OnlineComponentProvider"),await roe(e,new C1t))),e._onlineComponents}function I1t(e){return Rwe(e).then(t=>t.persistence)}function R1t(e){return xq(e).then(t=>t.remoteStore)}function N1t(e){return xq(e).then(t=>t.syncEngine)}async function Nwe(e){const t=await xq(e),n=t.eventManager;return n.onListen=h1t.bind(null,t.syncEngine),n.onUnlisten=g1t.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=p1t.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=y1t.bind(null,t.syncEngine),n}function P1t(e){return e.asyncQueue.enqueue(async()=>{const t=await I1t(e),n=await R1t(e);return t.setNetworkEnabled(!0),function(i){const o=Xt(i);return o.M_.delete(0),PC(o)}(n)})}function D1t(e,t,n={}){const r=new zd;return e.asyncQueue.enqueueAndForget(async()=>function(o,s,a,u,l){const c=new Iwe({next:d=>{s.enqueueAndForget(()=>bwe(o,f));const h=d.docs.has(a);!h&&d.fromCache?l.reject(new yt(Fe.UNAVAILABLE,"Failed to get document because the client is offline.")):h&&d.fromCache&&u&&u.source==="server"?l.reject(new yt(Fe.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(d)},error:d=>l.reject(d)}),f=new _we(uq(a.path),c,{includeMetadataChanges:!0,ra:!0});return vwe(o,f)}(await Nwe(e),e.asyncQueue,t,n,r)),r.promise}function O1t(e,t,n={}){const r=new zd;return e.asyncQueue.enqueueAndForget(async()=>function(o,s,a,u,l){const c=new Iwe({next:d=>{s.enqueueAndForget(()=>bwe(o,f)),d.fromCache&&u.source==="server"?l.reject(new yt(Fe.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(d)},error:d=>l.reject(d)}),f=new _we(a,c,{includeMetadataChanges:!0,ra:!0});return vwe(o,f)}(await Nwe(e),e.asyncQueue,t,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pwe(e){const t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ioe=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dwe(e,t,n){if(!n)throw new yt(Fe.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function $1t(e,t,n,r){if(t===!0&&r===!0)throw new yt(Fe.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function ooe(e){if(!Lt.isDocumentKey(e))throw new yt(Fe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function soe(e){if(Lt.isDocumentKey(e))throw new yt(Fe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function l$(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";{const t=function(r){return r.constructor?r.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return typeof e=="function"?"a function":Gt()}function lc(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new yt(Fe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=l$(e);throw new yt(Fe.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aoe{constructor(t){var n,r;if(t.host===void 0){if(t.ssl!==void 0)throw new yt(Fe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=(n=t.ssl)===null||n===void 0||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<1048576)throw new yt(Fe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}$1t("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Pwe((r=t.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new yt(Fe.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new yt(Fe.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new yt(Fe.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class Tq{constructor(t,n,r,i){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new aoe({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new yt(Fe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(t){if(this._settingsFrozen)throw new yt(Fe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new aoe(t),t.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new Q0t;switch(r.type){case"firstParty":return new eyt(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new yt(Fe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=ioe.get(n);r&&(St("ComponentProvider","Removing Datastore"),ioe.delete(n),r.terminate())}(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class By{constructor(t,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=t}withConverter(t){return new By(this.firestore,t,this._query)}}class Vs{constructor(t,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new qp(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Vs(this.firestore,t,this._key)}}class qp extends By{constructor(t,n,r){super(t,n,uq(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Vs(this.firestore,null,new Lt(t))}withConverter(t){return new qp(this.firestore,t,this._path)}}function Cl(e,t,...n){if(e=Sr(e),Dwe("collection","path",t),e instanceof Tq){const r=Rr.fromString(t,...n);return soe(r),new qp(e,null,r)}{if(!(e instanceof Vs||e instanceof qp))throw new yt(Fe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(Rr.fromString(t,...n));return soe(r),new qp(e.firestore,null,r)}}function Ci(e,t,...n){if(e=Sr(e),arguments.length===1&&(t=k_e.newId()),Dwe("doc","path",t),e instanceof Tq){const r=Rr.fromString(t,...n);return ooe(r),new Vs(e,null,new Lt(r))}{if(!(e instanceof Vs||e instanceof qp))throw new yt(Fe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(Rr.fromString(t,...n));return ooe(r),new Vs(e.firestore,e instanceof qp?e.converter:null,new Lt(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M1t{constructor(){this.iu=Promise.resolve(),this.su=[],this.ou=!1,this._u=[],this.au=null,this.uu=!1,this.cu=!1,this.lu=[],this.Yo=new cwe(this,"async_queue_retry"),this.hu=()=>{const n=z6();n&&St("AsyncQueue","Visibility state changed to "+n.visibilityState),this.Yo.Wo()};const t=z6();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.hu)}get isShuttingDown(){return this.ou}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.Pu(),this.Iu(t)}enterRestrictedMode(t){if(!this.ou){this.ou=!0,this.cu=t||!1;const n=z6();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.hu)}}enqueue(t){if(this.Pu(),this.ou)return new Promise(()=>{});const n=new zd;return this.Iu(()=>this.ou&&this.cu?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.su.push(t),this.Tu()))}async Tu(){if(this.su.length!==0){try{await this.su[0](),this.su.shift(),this.Yo.reset()}catch(t){if(!IC(t))throw t;St("AsyncQueue","Operation failed with retryable error: "+t)}this.su.length>0&&this.Yo.$o(()=>this.Tu())}}Iu(t){const n=this.iu.then(()=>(this.uu=!0,t().catch(r=>{this.au=r,this.uu=!1;const i=function(s){let a=s.message||"";return s.stack&&(a=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),a}(r);throw ch("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.uu=!1,r))));return this.iu=n,n}enqueueAfterDelay(t,n,r){this.Pu(),this.lu.indexOf(t)>-1&&(n=0);const i=bq.createAndSchedule(this,t,n,r,o=>this.Eu(o));return this._u.push(i),i}Pu(){this.au&&Gt()}verifyOperationInProgress(){}async du(){let t;do t=this.iu,await t;while(t!==this.iu)}Au(t){for(const n of this._u)if(n.timerId===t)return!0;return!1}Ru(t){return this.du().then(()=>{this._u.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this._u)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.du()})}Vu(t){this.lu.push(t)}Eu(t){const n=this._u.indexOf(t);this._u.splice(n,1)}}class Ym extends Tq{constructor(t,n,r,i){super(t,n,r,i),this.type="firestore",this._queue=function(){return new M1t}(),this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||Owe(this),this._firestoreClient.terminate()}}function L1t(e,t,n){n||(n="(default)");const r=z_(e,"firestore");if(r.isInitialized(n)){const i=r.getImmediate({identifier:n}),o=r.getOptions(n);if(ZT(o,t))return i;throw new yt(Fe.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(t.cacheSizeBytes!==void 0&&t.localCache!==void 0)throw new yt(Fe.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(t.cacheSizeBytes!==void 0&&t.cacheSizeBytes!==-1&&t.cacheSizeBytes<1048576)throw new yt(Fe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return r.initialize({options:t,instanceIdentifier:n})}function $C(e){return e._firestoreClient||Owe(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function Owe(e){var t,n,r;const i=e._freezeSettings(),o=function(a,u,l,c){return new hyt(a,u,l,c.host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,Pwe(c.experimentalLongPollingOptions),c.useFetchStreams)}(e._databaseId,((t=e._app)===null||t===void 0?void 0:t.options.appId)||"",e._persistenceKey,i);e._firestoreClient=new A1t(e._authCredentials,e._appCheckCredentials,e._queue,o),!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function F1t(e){return P1t($C(e=lc(e,Ym)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Db{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Db(bs.fromBase64String(t))}catch(n){throw new yt(Fe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new Db(bs.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MC{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new yt(Fe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new No(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c${constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Sq=class{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new yt(Fe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new yt(Fe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return Wn(this._lat,t._lat)||Wn(this._long,t._long)}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j1t=/^__.*__$/;class B1t{constructor(t,n,r){this.data=t,this.fieldMask=n,this.fieldTransforms=r}toMutation(t,n){return this.fieldMask!==null?new Gm(t,this.data,this.fieldMask,n,this.fieldTransforms):new RC(t,this.data,n,this.fieldTransforms)}}class $we{constructor(t,n,r){this.data=t,this.fieldMask=n,this.fieldTransforms=r}toMutation(t,n){return new Gm(t,this.data,this.fieldMask,n,this.fieldTransforms)}}function Mwe(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Gt()}}class Cq{constructor(t,n,r,i,o,s){this.settings=t,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.mu(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get fu(){return this.settings.fu}gu(t){return new Cq(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}pu(t){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(t),i=this.gu({path:r,yu:!1});return i.wu(t),i}Su(t){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(t),i=this.gu({path:r,yu:!1});return i.mu(),i}bu(t){return this.gu({path:void 0,yu:!0})}Du(t){return qN(t,this.settings.methodName,this.settings.Cu||!1,this.path,this.settings.vu)}contains(t){return this.fieldMask.find(n=>t.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>t.isPrefixOf(n.field))!==void 0}mu(){if(this.path)for(let t=0;t<this.path.length;t++)this.wu(this.path.get(t))}wu(t){if(t.length===0)throw this.Du("Document fields must not be empty");if(Mwe(this.fu)&&j1t.test(t))throw this.Du('Document fields cannot begin and end with "__"')}}class U1t{constructor(t,n,r){this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=r||a$(t)}Fu(t,n,r,i=!1){return new Cq({fu:t,methodName:n,vu:r,path:No.emptyPath(),yu:!1,Cu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function f$(e){const t=e._freezeSettings(),n=a$(e._databaseId);return new U1t(e._databaseId,!!t.ignoreUndefinedProperties,n)}function Lwe(e,t,n,r,i,o={}){const s=e.Fu(o.merge||o.mergeFields?2:0,t,n,i);kq("Data must be an object, but it was:",s,r);const a=Bwe(r,s);let u,l;if(o.merge)u=new su(s.fieldMask),l=s.fieldTransforms;else if(o.mergeFields){const c=[];for(const f of o.mergeFields){const d=C9(t,f,n);if(!s.contains(d))throw new yt(Fe.INVALID_ARGUMENT,`Field '${d}' is specified in your field mask but missing from your input data.`);zwe(c,d)||c.push(d)}u=new su(c),l=s.fieldTransforms.filter(f=>u.covers(f.field))}else u=null,l=s.fieldTransforms;return new B1t(new va(a),u,l)}class d$ extends c${_toFieldTransform(t){if(t.fu!==2)throw t.fu===1?t.Du(`${this._methodName}() can only appear at the top level of your update data`):t.Du(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof d$}}class Aq extends c${_toFieldTransform(t){return new Lyt(t.path,new uS)}isEqual(t){return t instanceof Aq}}function Fwe(e,t,n,r){const i=e.Fu(1,t,n);kq("Data must be an object, but it was:",i,r);const o=[],s=va.empty();Fy(r,(u,l)=>{const c=Iq(t,u,n);l=Sr(l);const f=i.Su(c);if(l instanceof d$)o.push(c);else{const d=LC(l,f);d!=null&&(o.push(c),s.set(c,d))}});const a=new su(o);return new $we(s,a,i.fieldTransforms)}function jwe(e,t,n,r,i,o){const s=e.Fu(1,t,n),a=[C9(t,r,n)],u=[i];if(o.length%2!=0)throw new yt(Fe.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let d=0;d<o.length;d+=2)a.push(C9(t,o[d])),u.push(o[d+1]);const l=[],c=va.empty();for(let d=a.length-1;d>=0;--d)if(!zwe(l,a[d])){const h=a[d];let p=u[d];p=Sr(p);const m=s.Su(h);if(p instanceof d$)l.push(h);else{const g=LC(p,m);g!=null&&(l.push(h),c.set(h,g))}}const f=new su(l);return new $we(c,f,s.fieldTransforms)}function z1t(e,t,n,r=!1){return LC(n,e.Fu(r?4:3,t))}function LC(e,t){if(Uwe(e=Sr(e)))return kq("Unsupported field value:",t,e),Bwe(e,t);if(e instanceof c$)return function(r,i){if(!Mwe(i.fu))throw i.Du(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Du(`${r._methodName}() is not currently supported inside arrays`);const o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.yu&&t.fu!==4)throw t.Du("Nested arrays are not supported");return function(r,i){const o=[];let s=0;for(const a of r){let u=LC(a,i.bu(s));u==null&&(u={nullValue:"NULL_VALUE"}),o.push(u),s++}return{arrayValue:{values:o}}}(e,t)}return function(r,i){if((r=Sr(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Oyt(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const o=Vi.fromDate(r);return{timestampValue:VN(i.serializer,o)}}if(r instanceof Vi){const o=new Vi(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:VN(i.serializer,o)}}if(r instanceof Sq)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Db)return{bytesValue:twe(i.serializer,r._byteString)};if(r instanceof Vs){const o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.Du(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:fq(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.Du(`Unsupported field value: ${l$(r)}`)}(e,t)}function Bwe(e,t){const n={};return I_e(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Fy(e,(r,i)=>{const o=LC(i,t.pu(r));o!=null&&(n[r]=o)}),{mapValue:{fields:n}}}function Uwe(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof Vi||e instanceof Sq||e instanceof Db||e instanceof Vs||e instanceof c$)}function kq(e,t,n){if(!Uwe(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=l$(n);throw r==="an object"?t.Du(e+" a custom object"):t.Du(e+" "+r)}}function C9(e,t,n){if((t=Sr(t))instanceof MC)return t._internalPath;if(typeof t=="string")return Iq(e,t);throw qN("Field path arguments must be of type string or ",e,!1,void 0,n)}const V1t=new RegExp("[~\\*/\\[\\]]");function Iq(e,t,n){if(t.search(V1t)>=0)throw qN(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new MC(...t.split("."))._internalPath}catch{throw qN(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function qN(e,t,n,r,i){const o=r&&!r.isEmpty(),s=i!==void 0;let a=`Function ${t}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(o||s)&&(u+=" (found",o&&(u+=` in field ${r}`),s&&(u+=` in document ${i}`),u+=")"),new yt(Fe.INVALID_ARGUMENT,a+e+u)}function zwe(e,t){return e.some(n=>n.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vwe{constructor(t,n,r,i,o){this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Vs(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new H1t(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const n=this._document.data.field(h$("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}}class H1t extends Vwe{data(){return super.data()}}function h$(e,t){return typeof t=="string"?Iq(e,t):t instanceof MC?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q1t(e){if(e.limitType==="L"&&e.explicitOrderBy.length===0)throw new yt(Fe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Rq{}class Hwe extends Rq{}function uoe(e,t,...n){let r=[];t instanceof Rq&&r.push(t),r=r.concat(n),function(o){const s=o.filter(u=>u instanceof Nq).length,a=o.filter(u=>u instanceof p$).length;if(s>1||s>0&&a>0)throw new yt(Fe.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)e=i._apply(e);return e}class p$ extends Hwe{constructor(t,n,r){super(),this._field=t,this._op=n,this._value=r,this.type="where"}static _create(t,n,r){return new p$(t,n,r)}_apply(t){const n=this._parse(t);return qwe(t._query,n),new By(t.firestore,t.converter,y9(t._query,n))}_parse(t){const n=f$(t.firestore);return function(o,s,a,u,l,c,f){let d;if(l.isKeyField()){if(c==="array-contains"||c==="array-contains-any")throw new yt(Fe.INVALID_ARGUMENT,`Invalid Query. You can't perform '${c}' queries on documentId().`);if(c==="in"||c==="not-in"){coe(f,c);const h=[];for(const p of f)h.push(loe(u,o,p));d={arrayValue:{values:h}}}else d=loe(u,o,f)}else c!=="in"&&c!=="not-in"&&c!=="array-contains-any"||coe(f,c),d=z1t(a,s,f,c==="in"||c==="not-in");return Ni.create(l,c,d)}(t._query,"where",n,t.firestore._databaseId,this._field,this._op,this._value)}}function W1t(e,t,n){const r=t,i=h$("where",e);return p$._create(i,r,n)}class Nq extends Rq{constructor(t,n){super(),this.type=t,this._queryConstraints=n}static _create(t,n){return new Nq(t,n)}_parse(t){const n=this._queryConstraints.map(r=>r._parse(t)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:uc.create(n,this._getOperator())}_apply(t){const n=this._parse(t);return n.getFilters().length===0?t:(function(i,o){let s=i;const a=o.getFlattenedFilters();for(const u of a)qwe(s,u),s=y9(s,u)}(t._query,n),new By(t.firestore,t.converter,y9(t._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Pq extends Hwe{constructor(t,n){super(),this._field=t,this._direction=n,this.type="orderBy"}static _create(t,n){return new Pq(t,n)}_apply(t){const n=function(i,o,s){if(i.startAt!==null)throw new yt(Fe.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new yt(Fe.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new aS(o,s)}(t._query,this._field,this._direction);return new By(t.firestore,t.converter,function(i,o){const s=i.explicitOrderBy.concat([o]);return new q_(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(t._query,n))}}function G1t(e,t="asc"){const n=t,r=h$("orderBy",e);return Pq._create(r,n)}function loe(e,t,n){if(typeof(n=Sr(n))=="string"){if(n==="")throw new yt(Fe.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!F_e(t)&&n.indexOf("/")!==-1)throw new yt(Fe.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=t.path.child(Rr.fromString(n));if(!Lt.isDocumentKey(r))throw new yt(Fe.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Nie(e,new Lt(r))}if(n instanceof Vs)return Nie(e,n._key);throw new yt(Fe.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${l$(n)}.`)}function coe(e,t){if(!Array.isArray(e)||e.length===0)throw new yt(Fe.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function qwe(e,t){const n=function(i,o){for(const s of i)for(const a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null}(e.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(n!==null)throw n===t.op?new yt(Fe.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new yt(Fe.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}class Y1t{convertValue(t,n="none"){switch(K0(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Ii(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(Y0(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 10:return this.convertObject(t.mapValue,n);default:throw Gt()}}convertObject(t,n){return this.convertObjectMap(t.fields,n)}convertObjectMap(t,n="none"){const r={};return Fy(t,(i,o)=>{r[i]=this.convertValue(o,n)}),r}convertGeoPoint(t){return new Sq(Ii(t.latitude),Ii(t.longitude))}convertArray(t,n){return(t.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(t,n){switch(n){case"previous":const r=iq(t);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(iS(t));default:return null}}convertTimestamp(t){const n=mm(t);return new Vi(n.seconds,n.nanos)}convertDocumentKey(t,n){const r=Rr.fromString(t);Tr(awe(r));const i=new oS(r.get(1),r.get(3)),o=new Lt(r.popFirst(5));return i.isEqual(n)||ch(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wwe(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UE{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class Gwe extends Vwe{constructor(t,n,r,i,o,s){super(t,n,r,i,s),this._firestore=t,this._firestoreImpl=t,this.metadata=o}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const n=new sI(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){const r=this._document.data.field(h$("DocumentSnapshot.get",t));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class sI extends Gwe{data(t={}){return super.data(t)}}class K1t{constructor(t,n,r,i){this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new UE(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const t=[];return this.forEach(n=>t.push(n)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,n){this._snapshot.docs.forEach(r=>{t.call(n,new sI(this._firestore,this._userDataWriter,r.key,r,new UE(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new yt(Fe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{const u=new sI(i._firestore,i._userDataWriter,a.doc.key,a.doc,new UE(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{const u=new sI(i._firestore,i._userDataWriter,a.doc.key,a.doc,new UE(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let l=-1,c=-1;return a.type!==0&&(l=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),c=s.indexOf(a.doc.key)),{type:X1t(a.type),doc:u,oldIndex:l,newIndex:c}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function X1t(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Gt()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H6(e){e=lc(e,Vs);const t=lc(e.firestore,Ym);return D1t($C(t),e._key).then(n=>Z1t(t,e,n))}class Ywe extends Y1t{constructor(t){super(),this.firestore=t}convertBytes(t){return new Db(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new Vs(this.firestore,null,n)}}function Gw(e){e=lc(e,By);const t=lc(e.firestore,Ym),n=$C(t),r=new Ywe(t);return q1t(e._query),O1t(n,e._query).then(i=>new K1t(t,r,e,i))}function sa(e,t,n){e=lc(e,Vs);const r=lc(e.firestore,Ym),i=Wwe(e.converter,t,n);return m$(r,[Lwe(f$(r),"setDoc",e._key,i,e.converter!==null,n).toMutation(e._key,Da.none())])}function Q1t(e,t,n,...r){e=lc(e,Vs);const i=lc(e.firestore,Ym),o=f$(i);let s;return s=typeof(t=Sr(t))=="string"||t instanceof MC?jwe(o,"updateDoc",e._key,t,n,r):Fwe(o,"updateDoc",e._key,t),m$(i,[s.toMutation(e._key,Da.exists(!0))])}function J1t(e){return m$(lc(e.firestore,Ym),[new o$(e._key,Da.none())])}function m$(e,t){return function(r,i){const o=new zd;return r.asyncQueue.enqueueAndForget(async()=>v1t(await N1t(r),i,o)),o.promise}($C(e),t)}function Z1t(e,t,n){const r=n.docs.get(t._key),i=new Ywe(e);return new Gwe(e,i,t._key,r,new UE(n.hasPendingWrites,n.fromCache),t.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ebt{constructor(t,n){this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=f$(t)}set(t,n,r){this._verifyNotCommitted();const i=q6(t,this._firestore),o=Wwe(i.converter,n,r),s=Lwe(this._dataReader,"WriteBatch.set",i._key,o,i.converter!==null,r);return this._mutations.push(s.toMutation(i._key,Da.none())),this}update(t,n,r,...i){this._verifyNotCommitted();const o=q6(t,this._firestore);let s;return s=typeof(n=Sr(n))=="string"||n instanceof MC?jwe(this._dataReader,"WriteBatch.update",o._key,n,r,i):Fwe(this._dataReader,"WriteBatch.update",o._key,n),this._mutations.push(s.toMutation(o._key,Da.exists(!0))),this}delete(t){this._verifyNotCommitted();const n=q6(t,this._firestore);return this._mutations=this._mutations.concat(new o$(n._key,Da.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new yt(Fe.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function q6(e,t){if((e=Sr(e)).firestore!==t)throw new yt(Fe.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}function tbt(){return new Aq("serverTimestamp")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function foe(e){return $C(e=lc(e,Ym)),new ebt(e,t=>m$(e,t))}(function(t,n=!0){(function(i){H_=i})(Ly),uh(new Ef("firestore",(r,{instanceIdentifier:i,options:o})=>{const s=r.getProvider("app").getImmediate(),a=new Ym(new J0t(r.getProvider("auth-internal")),new nyt(r.getProvider("app-check-internal")),function(l,c){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new yt(Fe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new oS(l.options.projectId,c)}(s,i),s);return o=Object.assign({useFetchStreams:n},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),nc(Aie,"4.6.3",t),nc(Aie,"4.6.3","esm2017")})();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A9=new Map,Kwe={activated:!1,tokenObservers:[]},nbt={initialized:!1,enabled:!1};function Hi(e){return A9.get(e)||Object.assign({},Kwe)}function rbt(e,t){return A9.set(e,t),A9.get(e)}function g$(){return nbt}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xwe="https://content-firebaseappcheck.googleapis.com/v1",ibt="exchangeRecaptchaV3Token",obt="exchangeDebugToken",doe={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},sbt=24*60*60*1e3;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class abt{constructor(t,n,r,i,o){if(this.operation=t,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}async process(t){this.stop();try{this.pending=new JT,this.pending.promise.catch(n=>{}),await ubt(this.getNextRun(t)),this.pending.resolve(),await this.pending.promise,this.pending=new JT,this.pending.promise.catch(n=>{}),await this.operation(),this.pending.resolve(),await this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}}getNextRun(t){if(t)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}}function ubt(e){return new Promise(t=>{setTimeout(t,e)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lbt={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},Sa=new U_("appCheck","AppCheck",lbt);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hoe(e=!1){var t;return e?(t=self.grecaptcha)===null||t===void 0?void 0:t.enterprise:self.grecaptcha}function Dq(e){if(!Hi(e).activated)throw Sa.create("use-before-activation",{appName:e.name})}function Qwe(e){const t=Math.round(e/1e3),n=Math.floor(t/(3600*24)),r=Math.floor((t-n*3600*24)/3600),i=Math.floor((t-n*3600*24-r*3600)/60),o=t-n*3600*24-r*3600-i*60;let s="";return n&&(s+=U2(n)+"d:"),r&&(s+=U2(r)+"h:"),s+=U2(i)+"m:"+U2(o)+"s",s}function U2(e){return e===0?"00":e>=10?e.toString():"0"+e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Oq({url:e,body:t},n){const r={"Content-Type":"application/json"},i=n.getImmediate({optional:!0});if(i){const f=await i.getHeartbeatsHeader();f&&(r["X-Firebase-Client"]=f)}const o={method:"POST",body:JSON.stringify(t),headers:r};let s;try{s=await fetch(e,o)}catch(f){throw Sa.create("fetch-network-error",{originalErrorMessage:f==null?void 0:f.message})}if(s.status!==200)throw Sa.create("fetch-status-error",{httpStatus:s.status});let a;try{a=await s.json()}catch(f){throw Sa.create("fetch-parse-error",{originalErrorMessage:f==null?void 0:f.message})}const u=a.ttl.match(/^([\d.]+)(s)$/);if(!u||!u[2]||isNaN(Number(u[1])))throw Sa.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${a.ttl}`});const l=Number(u[1])*1e3,c=Date.now();return{token:a.token,expireTimeMillis:c+l,issuedAtTimeMillis:c}}function cbt(e,t){const{projectId:n,appId:r,apiKey:i}=e.options;return{url:`${Xwe}/projects/${n}/apps/${r}:${ibt}?key=${i}`,body:{recaptcha_v3_token:t}}}function Jwe(e,t){const{projectId:n,appId:r,apiKey:i}=e.options;return{url:`${Xwe}/projects/${n}/apps/${r}:${obt}?key=${i}`,body:{debug_token:t}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fbt="firebase-app-check-database",dbt=1,fS="firebase-app-check-store",Zwe="debug-token";let z2=null;function eEe(){return z2||(z2=new Promise((e,t)=>{try{const n=indexedDB.open(fbt,dbt);n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{var i;t(Sa.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},n.onupgradeneeded=r=>{const i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(fS,{keyPath:"compositeKey"})}}}catch(n){t(Sa.create("storage-open",{originalErrorMessage:n==null?void 0:n.message}))}}),z2)}function hbt(e){return nEe(rEe(e))}function pbt(e,t){return tEe(rEe(e),t)}function mbt(e){return tEe(Zwe,e)}function gbt(){return nEe(Zwe)}async function tEe(e,t){const r=(await eEe()).transaction(fS,"readwrite"),o=r.objectStore(fS).put({compositeKey:e,value:t});return new Promise((s,a)=>{o.onsuccess=u=>{s()},r.onerror=u=>{var l;a(Sa.create("storage-set",{originalErrorMessage:(l=u.target.error)===null||l===void 0?void 0:l.message}))}})}async function nEe(e){const n=(await eEe()).transaction(fS,"readonly"),i=n.objectStore(fS).get(e);return new Promise((o,s)=>{i.onsuccess=a=>{const u=a.target.result;o(u?u.value:void 0)},n.onerror=a=>{var u;s(Sa.create("storage-get",{originalErrorMessage:(u=a.target.error)===null||u===void 0?void 0:u.message}))}})}function rEe(e){return`${e.options.appId}-${e.name}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dS=new GO("@firebase/app-check");/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ybt(e){if(MH()){let t;try{t=await hbt(e)}catch(n){dS.warn(`Failed to read token from IndexedDB. Error: ${n}`)}return t}}function W6(e,t){return MH()?pbt(e,t).catch(n=>{dS.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}async function vbt(){let e;try{e=await gbt()}catch{}if(e)return e;{const t=yht();return mbt(t).catch(n=>dS.warn(`Failed to persist debug token to IndexedDB. Error: ${n}`)),t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $q(){return g$().enabled}async function Mq(){const e=g$();if(e.enabled&&e.token)return e.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)}function bbt(){const e=_be(),t=g$();if(t.initialized=!0,typeof e.FIREBASE_APPCHECK_DEBUG_TOKEN!="string"&&e.FIREBASE_APPCHECK_DEBUG_TOKEN!==!0)return;t.enabled=!0;const n=new JT;t.token=n,typeof e.FIREBASE_APPCHECK_DEBUG_TOKEN=="string"?n.resolve(e.FIREBASE_APPCHECK_DEBUG_TOKEN):n.resolve(vbt())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _bt={error:"UNKNOWN_ERROR"};function wbt(e){return $H.encodeString(JSON.stringify(e),!1)}async function k9(e,t=!1){const n=e.app;Dq(n);const r=Hi(n);let i=r.token,o;if(i&&!l1(i)&&(r.token=void 0,i=void 0),!i){const u=await r.cachedTokenPromise;u&&(l1(u)?i=u:await W6(n,void 0))}if(!t&&i&&l1(i))return{token:i.token};let s=!1;if($q()){r.exchangeTokenPromise||(r.exchangeTokenPromise=Oq(Jwe(n,await Mq()),e.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),s=!0);const u=await r.exchangeTokenPromise;return await W6(n,u),r.token=u,{token:u.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),s=!0),i=await Hi(n).exchangeTokenPromise}catch(u){u.code==="appCheck/throttled"?dS.warn(u.message):dS.error(u),o=u}let a;return i?o?l1(i)?a={token:i.token,internalError:o}:a=moe(o):(a={token:i.token},r.token=i,await W6(n,i)):a=moe(o),s&&sEe(n,a),a}async function Ebt(e){const t=e.app;Dq(t);const{provider:n}=Hi(t);if($q()){const r=await Mq(),{token:i}=await Oq(Jwe(t,r),e.heartbeatServiceProvider);return{token:i}}else{const{token:r}=await n.getToken();return{token:r}}}function iEe(e,t,n,r){const{app:i}=e,o=Hi(i),s={next:n,error:r,type:t};if(o.tokenObservers=[...o.tokenObservers,s],o.token&&l1(o.token)){const a=o.token;Promise.resolve().then(()=>{n({token:a.token}),poe(e)}).catch(()=>{})}o.cachedTokenPromise.then(()=>poe(e))}function oEe(e,t){const n=Hi(e),r=n.tokenObservers.filter(i=>i.next!==t);r.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=r}function poe(e){const{app:t}=e,n=Hi(t);let r=n.tokenRefresher;r||(r=xbt(e),n.tokenRefresher=r),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function xbt(e){const{app:t}=e;return new abt(async()=>{const n=Hi(t);let r;if(n.token?r=await k9(e,!0):r=await k9(e),r.error)throw r.error;if(r.internalError)throw r.internalError},()=>!0,()=>{const n=Hi(t);if(n.token){let r=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5;const i=n.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},doe.RETRIAL_MIN_WAIT,doe.RETRIAL_MAX_WAIT)}function sEe(e,t){const n=Hi(e).tokenObservers;for(const r of n)try{r.type==="EXTERNAL"&&t.error!=null?r.error(t.error):r.next(t)}catch{}}function l1(e){return e.expireTimeMillis-Date.now()>0}function moe(e){return{token:wbt(_bt),error:e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tbt{constructor(t,n){this.app=t,this.heartbeatServiceProvider=n}_delete(){const{tokenObservers:t}=Hi(this.app);for(const n of t)oEe(this.app,n.next);return Promise.resolve()}}function Sbt(e,t){return new Tbt(e,t)}function Cbt(e){return{getToken:t=>k9(e,t),getLimitedUseToken:()=>Ebt(e),addTokenListener:t=>iEe(e,"INTERNAL",t),removeTokenListener:t=>oEe(e.app,t)}}const Abt="@firebase/app-check",kbt="0.8.4";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ibt="https://www.google.com/recaptcha/api.js";function Rbt(e,t){const n=new JT,r=Hi(e);r.reCAPTCHAState={initialized:n};const i=Nbt(e),o=hoe(!1);return o?goe(e,t,o,i,n):Obt(()=>{const s=hoe(!1);if(!s)throw new Error("no recaptcha");goe(e,t,s,i,n)}),n.promise}function goe(e,t,n,r,i){n.ready(()=>{Dbt(e,t,n,r),i.resolve(n)})}function Nbt(e){const t=`fire_app_check_${e.name}`,n=document.createElement("div");return n.id=t,n.style.display="none",document.body.appendChild(n),t}async function Pbt(e){Dq(e);const n=await Hi(e).reCAPTCHAState.initialized.promise;return new Promise((r,i)=>{const o=Hi(e).reCAPTCHAState;n.ready(()=>{r(n.execute(o.widgetId,{action:"fire_app_check"}))})})}function Dbt(e,t,n,r){const i=n.render(r,{sitekey:t,size:"invisible",callback:()=>{Hi(e).reCAPTCHAState.succeeded=!0},"error-callback":()=>{Hi(e).reCAPTCHAState.succeeded=!1}}),o=Hi(e);o.reCAPTCHAState=Object.assign(Object.assign({},o.reCAPTCHAState),{widgetId:i})}function Obt(e){const t=document.createElement("script");t.src=Ibt,t.onload=e,document.head.appendChild(t)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lq{constructor(t){this._siteKey=t,this._throttleData=null}async getToken(){var t,n,r;Mbt(this._throttleData);const i=await Pbt(this._app).catch(s=>{throw Sa.create("recaptcha-error")});if(!(!((t=Hi(this._app).reCAPTCHAState)===null||t===void 0)&&t.succeeded))throw Sa.create("recaptcha-error");let o;try{o=await Oq(cbt(this._app,i),this._heartbeatServiceProvider)}catch(s){throw!((n=s.code)===null||n===void 0)&&n.includes("fetch-status-error")?(this._throttleData=$bt(Number((r=s.customData)===null||r===void 0?void 0:r.httpStatus),this._throttleData),Sa.create("throttled",{time:Qwe(this._throttleData.allowRequestsAfter-Date.now()),httpStatus:this._throttleData.httpStatus})):s}return this._throttleData=null,o}initialize(t){this._app=t,this._heartbeatServiceProvider=z_(t,"heartbeat"),Rbt(t,this._siteKey).catch(()=>{})}isEqual(t){return t instanceof Lq?this._siteKey===t._siteKey:!1}}function $bt(e,t){if(e===404||e===403)return{backoffCount:1,allowRequestsAfter:Date.now()+sbt,httpStatus:e};{const n=t?t.backoffCount:0,r=Eht(n,1e3,2);return{backoffCount:n+1,allowRequestsAfter:Date.now()+r,httpStatus:e}}}function Mbt(e){if(e&&Date.now()-e.allowRequestsAfter<=0)throw Sa.create("throttled",{time:Qwe(e.allowRequestsAfter-Date.now()),httpStatus:e.httpStatus})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lbt(e=FH(),t){e=Sr(e);const n=z_(e,"app-check");if(g$().initialized||bbt(),$q()&&Mq().then(i=>console.log(`App Check debug token: ${i}. You will need to add it to your app's App Check settings in the Firebase console for it to work.`)),n.isInitialized()){const i=n.getImmediate(),o=n.getOptions();if(o.isTokenAutoRefreshEnabled===t.isTokenAutoRefreshEnabled&&o.provider.isEqual(t.provider))return i;throw Sa.create("already-initialized",{appName:e.name})}const r=n.initialize({options:t});return Fbt(e,t.provider,t.isTokenAutoRefreshEnabled),Hi(e).isTokenAutoRefreshEnabled&&iEe(r,"INTERNAL",()=>{}),r}function Fbt(e,t,n){const r=rbt(e,Object.assign({},Kwe));r.activated=!0,r.provider=t,r.cachedTokenPromise=ybt(e).then(i=>(i&&l1(i)&&(r.token=i,sEe(e,{token:i.token})),i)),r.isTokenAutoRefreshEnabled=n===void 0?e.automaticDataCollectionEnabled:n,r.provider.initialize(e)}const jbt="app-check",yoe="app-check-internal";function Bbt(){uh(new Ef(jbt,e=>{const t=e.getProvider("app").getImmediate(),n=e.getProvider("heartbeat");return Sbt(t,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider(yoe).initialize()})),uh(new Ef(yoe,e=>{const t=e.getProvider("app-check").getImmediate();return Cbt(t)},"PUBLIC").setInstantiationMode("EXPLICIT")),nc(Abt,kbt)}Bbt();function V2(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var aEe={exports:{}};/*!
    localForage -- Offline Storage, Improved
    Version 1.10.0
    https://localforage.github.io/localForage
    (c) 2013-2017 Mozilla, Apache License 2.0
*/(function(e,t){(function(n){e.exports=n()})(function(){return function n(r,i,o){function s(l,c){if(!i[l]){if(!r[l]){var f=typeof V2=="function"&&V2;if(!c&&f)return f(l,!0);if(a)return a(l,!0);var d=new Error("Cannot find module '"+l+"'");throw d.code="MODULE_NOT_FOUND",d}var h=i[l]={exports:{}};r[l][0].call(h.exports,function(p){var m=r[l][1][p];return s(m||p)},h,h.exports,n,r,i,o)}return i[l].exports}for(var a=typeof V2=="function"&&V2,u=0;u<o.length;u++)s(o[u]);return s}({1:[function(n,r,i){(function(o){var s=o.MutationObserver||o.WebKitMutationObserver,a;if(s){var u=0,l=new s(p),c=o.document.createTextNode("");l.observe(c,{characterData:!0}),a=function(){c.data=u=++u%2}}else if(!o.setImmediate&&typeof o.MessageChannel<"u"){var f=new o.MessageChannel;f.port1.onmessage=p,a=function(){f.port2.postMessage(0)}}else"document"in o&&"onreadystatechange"in o.document.createElement("script")?a=function(){var g=o.document.createElement("script");g.onreadystatechange=function(){p(),g.onreadystatechange=null,g.parentNode.removeChild(g),g=null},o.document.documentElement.appendChild(g)}:a=function(){setTimeout(p,0)};var d,h=[];function p(){d=!0;for(var g,y,v=h.length;v;){for(y=h,h=[],g=-1;++g<v;)y[g]();v=h.length}d=!1}r.exports=m;function m(g){h.push(g)===1&&!d&&a()}}).call(this,typeof so<"u"?so:typeof self<"u"?self:typeof window<"u"?window:{})},{}],2:[function(n,r,i){var o=n(1);function s(){}var a={},u=["REJECTED"],l=["FULFILLED"],c=["PENDING"];r.exports=f;function f(E){if(typeof E!="function")throw new TypeError("resolver must be a function");this.state=c,this.queue=[],this.outcome=void 0,E!==s&&m(this,E)}f.prototype.catch=function(E){return this.then(null,E)},f.prototype.then=function(E,S){if(typeof E!="function"&&this.state===l||typeof S!="function"&&this.state===u)return this;var T=new this.constructor(s);if(this.state!==c){var C=this.state===l?E:S;h(T,C,this.outcome)}else this.queue.push(new d(T,E,S));return T};function d(E,S,T){this.promise=E,typeof S=="function"&&(this.onFulfilled=S,this.callFulfilled=this.otherCallFulfilled),typeof T=="function"&&(this.onRejected=T,this.callRejected=this.otherCallRejected)}d.prototype.callFulfilled=function(E){a.resolve(this.promise,E)},d.prototype.otherCallFulfilled=function(E){h(this.promise,this.onFulfilled,E)},d.prototype.callRejected=function(E){a.reject(this.promise,E)},d.prototype.otherCallRejected=function(E){h(this.promise,this.onRejected,E)};function h(E,S,T){o(function(){var C;try{C=S(T)}catch(A){return a.reject(E,A)}C===E?a.reject(E,new TypeError("Cannot resolve promise with itself")):a.resolve(E,C)})}a.resolve=function(E,S){var T=g(p,S);if(T.status==="error")return a.reject(E,T.value);var C=T.value;if(C)m(E,C);else{E.state=l,E.outcome=S;for(var A=-1,R=E.queue.length;++A<R;)E.queue[A].callFulfilled(S)}return E},a.reject=function(E,S){E.state=u,E.outcome=S;for(var T=-1,C=E.queue.length;++T<C;)E.queue[T].callRejected(S);return E};function p(E){var S=E&&E.then;if(E&&(typeof E=="object"||typeof E=="function")&&typeof S=="function")return function(){S.apply(E,arguments)}}function m(E,S){var T=!1;function C(O){T||(T=!0,a.reject(E,O))}function A(O){T||(T=!0,a.resolve(E,O))}function R(){S(A,C)}var N=g(R);N.status==="error"&&C(N.value)}function g(E,S){var T={};try{T.value=E(S),T.status="success"}catch(C){T.status="error",T.value=C}return T}f.resolve=y;function y(E){return E instanceof this?E:a.resolve(new this(s),E)}f.reject=v;function v(E){var S=new this(s);return a.reject(S,E)}f.all=_;function _(E){var S=this;if(Object.prototype.toString.call(E)!=="[object Array]")return this.reject(new TypeError("must be an array"));var T=E.length,C=!1;if(!T)return this.resolve([]);for(var A=new Array(T),R=0,N=-1,O=new this(s);++N<T;)D(E[N],N);return O;function D(M,F){S.resolve(M).then(L,function(B){C||(C=!0,a.reject(O,B))});function L(B){A[F]=B,++R===T&&!C&&(C=!0,a.resolve(O,A))}}}f.race=w;function w(E){var S=this;if(Object.prototype.toString.call(E)!=="[object Array]")return this.reject(new TypeError("must be an array"));var T=E.length,C=!1;if(!T)return this.resolve([]);for(var A=-1,R=new this(s);++A<T;)N(E[A]);return R;function N(O){S.resolve(O).then(function(D){C||(C=!0,a.resolve(R,D))},function(D){C||(C=!0,a.reject(R,D))})}}},{1:1}],3:[function(n,r,i){(function(o){typeof o.Promise!="function"&&(o.Promise=n(2))}).call(this,typeof so<"u"?so:typeof self<"u"?self:typeof window<"u"?window:{})},{2:2}],4:[function(n,r,i){var o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Y){return typeof Y}:function(Y){return Y&&typeof Symbol=="function"&&Y.constructor===Symbol&&Y!==Symbol.prototype?"symbol":typeof Y};function s(Y,re){if(!(Y instanceof re))throw new TypeError("Cannot call a class as a function")}function a(){try{if(typeof indexedDB<"u")return indexedDB;if(typeof webkitIndexedDB<"u")return webkitIndexedDB;if(typeof mozIndexedDB<"u")return mozIndexedDB;if(typeof OIndexedDB<"u")return OIndexedDB;if(typeof msIndexedDB<"u")return msIndexedDB}catch{return}}var u=a();function l(){try{if(!u||!u.open)return!1;var Y=typeof openDatabase<"u"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),re=typeof fetch=="function"&&fetch.toString().indexOf("[native code")!==-1;return(!Y||re)&&typeof indexedDB<"u"&&typeof IDBKeyRange<"u"}catch{return!1}}function c(Y,re){Y=Y||[],re=re||{};try{return new Blob(Y,re)}catch(ae){if(ae.name!=="TypeError")throw ae;for(var J=typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder,ue=new J,de=0;de<Y.length;de+=1)ue.append(Y[de]);return ue.getBlob(re.type)}}typeof Promise>"u"&&n(3);var f=Promise;function d(Y,re){re&&Y.then(function(J){re(null,J)},function(J){re(J)})}function h(Y,re,J){typeof re=="function"&&Y.then(re),typeof J=="function"&&Y.catch(J)}function p(Y){return typeof Y!="string"&&(console.warn(Y+" used as a key, but it is not a string."),Y=String(Y)),Y}function m(){if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}var g="local-forage-detect-blob-support",y=void 0,v={},_=Object.prototype.toString,w="readonly",E="readwrite";function S(Y){for(var re=Y.length,J=new ArrayBuffer(re),ue=new Uint8Array(J),de=0;de<re;de++)ue[de]=Y.charCodeAt(de);return J}function T(Y){return new f(function(re){var J=Y.transaction(g,E),ue=c([""]);J.objectStore(g).put(ue,"key"),J.onabort=function(de){de.preventDefault(),de.stopPropagation(),re(!1)},J.oncomplete=function(){var de=navigator.userAgent.match(/Chrome\/(\d+)/),ae=navigator.userAgent.match(/Edge\//);re(ae||!de||parseInt(de[1],10)>=43)}}).catch(function(){return!1})}function C(Y){return typeof y=="boolean"?f.resolve(y):T(Y).then(function(re){return y=re,y})}function A(Y){var re=v[Y.name],J={};J.promise=new f(function(ue,de){J.resolve=ue,J.reject=de}),re.deferredOperations.push(J),re.dbReady?re.dbReady=re.dbReady.then(function(){return J.promise}):re.dbReady=J.promise}function R(Y){var re=v[Y.name],J=re.deferredOperations.pop();if(J)return J.resolve(),J.promise}function N(Y,re){var J=v[Y.name],ue=J.deferredOperations.pop();if(ue)return ue.reject(re),ue.promise}function O(Y,re){return new f(function(J,ue){if(v[Y.name]=v[Y.name]||W(),Y.db)if(re)A(Y),Y.db.close();else return J(Y.db);var de=[Y.name];re&&de.push(Y.version);var ae=u.open.apply(u,de);re&&(ae.onupgradeneeded=function(Ne){var Be=ae.result;try{Be.createObjectStore(Y.storeName),Ne.oldVersion<=1&&Be.createObjectStore(g)}catch(Ve){if(Ve.name==="ConstraintError")console.warn('The database "'+Y.name+'" has been upgraded from version '+Ne.oldVersion+" to version "+Ne.newVersion+', but the storage "'+Y.storeName+'" already exists.');else throw Ve}}),ae.onerror=function(Ne){Ne.preventDefault(),ue(ae.error)},ae.onsuccess=function(){var Ne=ae.result;Ne.onversionchange=function(Be){Be.target.close()},J(Ne),R(Y)}})}function D(Y){return O(Y,!1)}function M(Y){return O(Y,!0)}function F(Y,re){if(!Y.db)return!0;var J=!Y.db.objectStoreNames.contains(Y.storeName),ue=Y.version<Y.db.version,de=Y.version>Y.db.version;if(ue&&(Y.version!==re&&console.warn('The database "'+Y.name+`" can't be downgraded from version `+Y.db.version+" to version "+Y.version+"."),Y.version=Y.db.version),de||J){if(J){var ae=Y.db.version+1;ae>Y.version&&(Y.version=ae)}return!0}return!1}function L(Y){return new f(function(re,J){var ue=new FileReader;ue.onerror=J,ue.onloadend=function(de){var ae=btoa(de.target.result||"");re({__local_forage_encoded_blob:!0,data:ae,type:Y.type})},ue.readAsBinaryString(Y)})}function B(Y){var re=S(atob(Y.data));return c([re],{type:Y.type})}function U(Y){return Y&&Y.__local_forage_encoded_blob}function H(Y){var re=this,J=re._initReady().then(function(){var ue=v[re._dbInfo.name];if(ue&&ue.dbReady)return ue.dbReady});return h(J,Y,Y),J}function P(Y){A(Y);for(var re=v[Y.name],J=re.forages,ue=0;ue<J.length;ue++){var de=J[ue];de._dbInfo.db&&(de._dbInfo.db.close(),de._dbInfo.db=null)}return Y.db=null,D(Y).then(function(ae){return Y.db=ae,F(Y)?M(Y):ae}).then(function(ae){Y.db=re.db=ae;for(var Ne=0;Ne<J.length;Ne++)J[Ne]._dbInfo.db=ae}).catch(function(ae){throw N(Y,ae),ae})}function z(Y,re,J,ue){ue===void 0&&(ue=1);try{var de=Y.db.transaction(Y.storeName,re);J(null,de)}catch(ae){if(ue>0&&(!Y.db||ae.name==="InvalidStateError"||ae.name==="NotFoundError"))return f.resolve().then(function(){if(!Y.db||ae.name==="NotFoundError"&&!Y.db.objectStoreNames.contains(Y.storeName)&&Y.version<=Y.db.version)return Y.db&&(Y.version=Y.db.version+1),M(Y)}).then(function(){return P(Y).then(function(){z(Y,re,J,ue-1)})}).catch(J);J(ae)}}function W(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function j(Y){var re=this,J={db:null};if(Y)for(var ue in Y)J[ue]=Y[ue];var de=v[J.name];de||(de=W(),v[J.name]=de),de.forages.push(re),re._initReady||(re._initReady=re.ready,re.ready=H);var ae=[];function Ne(){return f.resolve()}for(var Be=0;Be<de.forages.length;Be++){var Ve=de.forages[Be];Ve!==re&&ae.push(Ve._initReady().catch(Ne))}var qe=de.forages.slice(0);return f.all(ae).then(function(){return J.db=de.db,D(J)}).then(function(nt){return J.db=nt,F(J,re._defaultConfig.version)?M(J):nt}).then(function(nt){J.db=de.db=nt,re._dbInfo=J;for(var _t=0;_t<qe.length;_t++){var Jt=qe[_t];Jt!==re&&(Jt._dbInfo.db=J.db,Jt._dbInfo.version=J.version)}})}function q(Y,re){var J=this;Y=p(Y);var ue=new f(function(de,ae){J.ready().then(function(){z(J._dbInfo,w,function(Ne,Be){if(Ne)return ae(Ne);try{var Ve=Be.objectStore(J._dbInfo.storeName),qe=Ve.get(Y);qe.onsuccess=function(){var nt=qe.result;nt===void 0&&(nt=null),U(nt)&&(nt=B(nt)),de(nt)},qe.onerror=function(){ae(qe.error)}}catch(nt){ae(nt)}})}).catch(ae)});return d(ue,re),ue}function G(Y,re){var J=this,ue=new f(function(de,ae){J.ready().then(function(){z(J._dbInfo,w,function(Ne,Be){if(Ne)return ae(Ne);try{var Ve=Be.objectStore(J._dbInfo.storeName),qe=Ve.openCursor(),nt=1;qe.onsuccess=function(){var _t=qe.result;if(_t){var Jt=_t.value;U(Jt)&&(Jt=B(Jt));var It=Y(Jt,_t.key,nt++);It!==void 0?de(It):_t.continue()}else de()},qe.onerror=function(){ae(qe.error)}}catch(_t){ae(_t)}})}).catch(ae)});return d(ue,re),ue}function te(Y,re,J){var ue=this;Y=p(Y);var de=new f(function(ae,Ne){var Be;ue.ready().then(function(){return Be=ue._dbInfo,_.call(re)==="[object Blob]"?C(Be.db).then(function(Ve){return Ve?re:L(re)}):re}).then(function(Ve){z(ue._dbInfo,E,function(qe,nt){if(qe)return Ne(qe);try{var _t=nt.objectStore(ue._dbInfo.storeName);Ve===null&&(Ve=void 0);var Jt=_t.put(Ve,Y);nt.oncomplete=function(){Ve===void 0&&(Ve=null),ae(Ve)},nt.onabort=nt.onerror=function(){var It=Jt.error?Jt.error:Jt.transaction.error;Ne(It)}}catch(It){Ne(It)}})}).catch(Ne)});return d(de,J),de}function pe(Y,re){var J=this;Y=p(Y);var ue=new f(function(de,ae){J.ready().then(function(){z(J._dbInfo,E,function(Ne,Be){if(Ne)return ae(Ne);try{var Ve=Be.objectStore(J._dbInfo.storeName),qe=Ve.delete(Y);Be.oncomplete=function(){de()},Be.onerror=function(){ae(qe.error)},Be.onabort=function(){var nt=qe.error?qe.error:qe.transaction.error;ae(nt)}}catch(nt){ae(nt)}})}).catch(ae)});return d(ue,re),ue}function be(Y){var re=this,J=new f(function(ue,de){re.ready().then(function(){z(re._dbInfo,E,function(ae,Ne){if(ae)return de(ae);try{var Be=Ne.objectStore(re._dbInfo.storeName),Ve=Be.clear();Ne.oncomplete=function(){ue()},Ne.onabort=Ne.onerror=function(){var qe=Ve.error?Ve.error:Ve.transaction.error;de(qe)}}catch(qe){de(qe)}})}).catch(de)});return d(J,Y),J}function le(Y){var re=this,J=new f(function(ue,de){re.ready().then(function(){z(re._dbInfo,w,function(ae,Ne){if(ae)return de(ae);try{var Be=Ne.objectStore(re._dbInfo.storeName),Ve=Be.count();Ve.onsuccess=function(){ue(Ve.result)},Ve.onerror=function(){de(Ve.error)}}catch(qe){de(qe)}})}).catch(de)});return d(J,Y),J}function me(Y,re){var J=this,ue=new f(function(de,ae){if(Y<0){de(null);return}J.ready().then(function(){z(J._dbInfo,w,function(Ne,Be){if(Ne)return ae(Ne);try{var Ve=Be.objectStore(J._dbInfo.storeName),qe=!1,nt=Ve.openKeyCursor();nt.onsuccess=function(){var _t=nt.result;if(!_t){de(null);return}Y===0||qe?de(_t.key):(qe=!0,_t.advance(Y))},nt.onerror=function(){ae(nt.error)}}catch(_t){ae(_t)}})}).catch(ae)});return d(ue,re),ue}function Se(Y){var re=this,J=new f(function(ue,de){re.ready().then(function(){z(re._dbInfo,w,function(ae,Ne){if(ae)return de(ae);try{var Be=Ne.objectStore(re._dbInfo.storeName),Ve=Be.openKeyCursor(),qe=[];Ve.onsuccess=function(){var nt=Ve.result;if(!nt){ue(qe);return}qe.push(nt.key),nt.continue()},Ve.onerror=function(){de(Ve.error)}}catch(nt){de(nt)}})}).catch(de)});return d(J,Y),J}function ge(Y,re){re=m.apply(this,arguments);var J=this.config();Y=typeof Y!="function"&&Y||{},Y.name||(Y.name=Y.name||J.name,Y.storeName=Y.storeName||J.storeName);var ue=this,de;if(!Y.name)de=f.reject("Invalid arguments");else{var ae=Y.name===J.name&&ue._dbInfo.db,Ne=ae?f.resolve(ue._dbInfo.db):D(Y).then(function(Be){var Ve=v[Y.name],qe=Ve.forages;Ve.db=Be;for(var nt=0;nt<qe.length;nt++)qe[nt]._dbInfo.db=Be;return Be});Y.storeName?de=Ne.then(function(Be){if(Be.objectStoreNames.contains(Y.storeName)){var Ve=Be.version+1;A(Y);var qe=v[Y.name],nt=qe.forages;Be.close();for(var _t=0;_t<nt.length;_t++){var Jt=nt[_t];Jt._dbInfo.db=null,Jt._dbInfo.version=Ve}var It=new f(function(wn,nr){var rr=u.open(Y.name,Ve);rr.onerror=function(Wo){var kc=rr.result;kc.close(),nr(Wo)},rr.onupgradeneeded=function(){var Wo=rr.result;Wo.deleteObjectStore(Y.storeName)},rr.onsuccess=function(){var Wo=rr.result;Wo.close(),wn(Wo)}});return It.then(function(wn){qe.db=wn;for(var nr=0;nr<nt.length;nr++){var rr=nt[nr];rr._dbInfo.db=wn,R(rr._dbInfo)}}).catch(function(wn){throw(N(Y,wn)||f.resolve()).catch(function(){}),wn})}}):de=Ne.then(function(Be){A(Y);var Ve=v[Y.name],qe=Ve.forages;Be.close();for(var nt=0;nt<qe.length;nt++){var _t=qe[nt];_t._dbInfo.db=null}var Jt=new f(function(It,wn){var nr=u.deleteDatabase(Y.name);nr.onerror=function(){var rr=nr.result;rr&&rr.close(),wn(nr.error)},nr.onblocked=function(){console.warn('dropInstance blocked for database "'+Y.name+'" until all open connections are closed')},nr.onsuccess=function(){var rr=nr.result;rr&&rr.close(),It(rr)}});return Jt.then(function(It){Ve.db=It;for(var wn=0;wn<qe.length;wn++){var nr=qe[wn];R(nr._dbInfo)}}).catch(function(It){throw(N(Y,It)||f.resolve()).catch(function(){}),It})})}return d(de,re),de}var tt={_driver:"asyncStorage",_initStorage:j,_support:l(),iterate:G,getItem:q,setItem:te,removeItem:pe,clear:be,length:le,key:me,keys:Se,dropInstance:ge};function Ue(){return typeof openDatabase=="function"}var mt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",it="~~local_forage_type~",Re=/^~~local_forage_type~([^~]+)~/,$e="__lfsc__:",Ge=$e.length,dt="arbf",Nt="blob",He="si08",fe="ui08",lt="uic8",gt="si16",ce="si32",Te="ur16",ze="ui32",st="fl32",vt="fl64",vn=Ge+dt.length,Zn=Object.prototype.toString;function bn(Y){var re=Y.length*.75,J=Y.length,ue,de=0,ae,Ne,Be,Ve;Y[Y.length-1]==="="&&(re--,Y[Y.length-2]==="="&&re--);var qe=new ArrayBuffer(re),nt=new Uint8Array(qe);for(ue=0;ue<J;ue+=4)ae=mt.indexOf(Y[ue]),Ne=mt.indexOf(Y[ue+1]),Be=mt.indexOf(Y[ue+2]),Ve=mt.indexOf(Y[ue+3]),nt[de++]=ae<<2|Ne>>4,nt[de++]=(Ne&15)<<4|Be>>2,nt[de++]=(Be&3)<<6|Ve&63;return qe}function Bn(Y){var re=new Uint8Array(Y),J="",ue;for(ue=0;ue<re.length;ue+=3)J+=mt[re[ue]>>2],J+=mt[(re[ue]&3)<<4|re[ue+1]>>4],J+=mt[(re[ue+1]&15)<<2|re[ue+2]>>6],J+=mt[re[ue+2]&63];return re.length%3===2?J=J.substring(0,J.length-1)+"=":re.length%3===1&&(J=J.substring(0,J.length-2)+"=="),J}function Zt(Y,re){var J="";if(Y&&(J=Zn.call(Y)),Y&&(J==="[object ArrayBuffer]"||Y.buffer&&Zn.call(Y.buffer)==="[object ArrayBuffer]")){var ue,de=$e;Y instanceof ArrayBuffer?(ue=Y,de+=dt):(ue=Y.buffer,J==="[object Int8Array]"?de+=He:J==="[object Uint8Array]"?de+=fe:J==="[object Uint8ClampedArray]"?de+=lt:J==="[object Int16Array]"?de+=gt:J==="[object Uint16Array]"?de+=Te:J==="[object Int32Array]"?de+=ce:J==="[object Uint32Array]"?de+=ze:J==="[object Float32Array]"?de+=st:J==="[object Float64Array]"?de+=vt:re(new Error("Failed to get type for BinaryArray"))),re(de+Bn(ue))}else if(J==="[object Blob]"){var ae=new FileReader;ae.onload=function(){var Ne=it+Y.type+"~"+Bn(this.result);re($e+Nt+Ne)},ae.readAsArrayBuffer(Y)}else try{re(JSON.stringify(Y))}catch(Ne){console.error("Couldn't convert value into a JSON string: ",Y),re(null,Ne)}}function an(Y){if(Y.substring(0,Ge)!==$e)return JSON.parse(Y);var re=Y.substring(vn),J=Y.substring(Ge,vn),ue;if(J===Nt&&Re.test(re)){var de=re.match(Re);ue=de[1],re=re.substring(de[0].length)}var ae=bn(re);switch(J){case dt:return ae;case Nt:return c([ae],{type:ue});case He:return new Int8Array(ae);case fe:return new Uint8Array(ae);case lt:return new Uint8ClampedArray(ae);case gt:return new Int16Array(ae);case Te:return new Uint16Array(ae);case ce:return new Int32Array(ae);case ze:return new Uint32Array(ae);case st:return new Float32Array(ae);case vt:return new Float64Array(ae);default:throw new Error("Unkown type: "+J)}}var Dn={serialize:Zt,deserialize:an,stringToBuffer:bn,bufferToString:Bn};function On(Y,re,J,ue){Y.executeSql("CREATE TABLE IF NOT EXISTS "+re.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],J,ue)}function Ho(Y){var re=this,J={db:null};if(Y)for(var ue in Y)J[ue]=typeof Y[ue]!="string"?Y[ue].toString():Y[ue];var de=new f(function(ae,Ne){try{J.db=openDatabase(J.name,String(J.version),J.description,J.size)}catch(Be){return Ne(Be)}J.db.transaction(function(Be){On(Be,J,function(){re._dbInfo=J,ae()},function(Ve,qe){Ne(qe)})},Ne)});return J.serializer=Dn,de}function Jr(Y,re,J,ue,de,ae){Y.executeSql(J,ue,de,function(Ne,Be){Be.code===Be.SYNTAX_ERR?Ne.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[re.storeName],function(Ve,qe){qe.rows.length?ae(Ve,Be):On(Ve,re,function(){Ve.executeSql(J,ue,de,ae)},ae)},ae):ae(Ne,Be)},ae)}function un(Y,re){var J=this;Y=p(Y);var ue=new f(function(de,ae){J.ready().then(function(){var Ne=J._dbInfo;Ne.db.transaction(function(Be){Jr(Be,Ne,"SELECT * FROM "+Ne.storeName+" WHERE key = ? LIMIT 1",[Y],function(Ve,qe){var nt=qe.rows.length?qe.rows.item(0).value:null;nt&&(nt=Ne.serializer.deserialize(nt)),de(nt)},function(Ve,qe){ae(qe)})})}).catch(ae)});return d(ue,re),ue}function Zr(Y,re){var J=this,ue=new f(function(de,ae){J.ready().then(function(){var Ne=J._dbInfo;Ne.db.transaction(function(Be){Jr(Be,Ne,"SELECT * FROM "+Ne.storeName,[],function(Ve,qe){for(var nt=qe.rows,_t=nt.length,Jt=0;Jt<_t;Jt++){var It=nt.item(Jt),wn=It.value;if(wn&&(wn=Ne.serializer.deserialize(wn)),wn=Y(wn,It.key,Jt+1),wn!==void 0){de(wn);return}}de()},function(Ve,qe){ae(qe)})})}).catch(ae)});return d(ue,re),ue}function er(Y,re,J,ue){var de=this;Y=p(Y);var ae=new f(function(Ne,Be){de.ready().then(function(){re===void 0&&(re=null);var Ve=re,qe=de._dbInfo;qe.serializer.serialize(re,function(nt,_t){_t?Be(_t):qe.db.transaction(function(Jt){Jr(Jt,qe,"INSERT OR REPLACE INTO "+qe.storeName+" (key, value) VALUES (?, ?)",[Y,nt],function(){Ne(Ve)},function(It,wn){Be(wn)})},function(Jt){if(Jt.code===Jt.QUOTA_ERR){if(ue>0){Ne(er.apply(de,[Y,Ve,J,ue-1]));return}Be(Jt)}})})}).catch(Be)});return d(ae,J),ae}function Si(Y,re,J){return er.apply(this,[Y,re,J,1])}function ed(Y,re){var J=this;Y=p(Y);var ue=new f(function(de,ae){J.ready().then(function(){var Ne=J._dbInfo;Ne.db.transaction(function(Be){Jr(Be,Ne,"DELETE FROM "+Ne.storeName+" WHERE key = ?",[Y],function(){de()},function(Ve,qe){ae(qe)})})}).catch(ae)});return d(ue,re),ue}function Wa(Y){var re=this,J=new f(function(ue,de){re.ready().then(function(){var ae=re._dbInfo;ae.db.transaction(function(Ne){Jr(Ne,ae,"DELETE FROM "+ae.storeName,[],function(){ue()},function(Be,Ve){de(Ve)})})}).catch(de)});return d(J,Y),J}function Cc(Y){var re=this,J=new f(function(ue,de){re.ready().then(function(){var ae=re._dbInfo;ae.db.transaction(function(Ne){Jr(Ne,ae,"SELECT COUNT(key) as c FROM "+ae.storeName,[],function(Be,Ve){var qe=Ve.rows.item(0).c;ue(qe)},function(Be,Ve){de(Ve)})})}).catch(de)});return d(J,Y),J}function Qn(Y,re){var J=this,ue=new f(function(de,ae){J.ready().then(function(){var Ne=J._dbInfo;Ne.db.transaction(function(Be){Jr(Be,Ne,"SELECT key FROM "+Ne.storeName+" WHERE id = ? LIMIT 1",[Y+1],function(Ve,qe){var nt=qe.rows.length?qe.rows.item(0).key:null;de(nt)},function(Ve,qe){ae(qe)})})}).catch(ae)});return d(ue,re),ue}function qr(Y){var re=this,J=new f(function(ue,de){re.ready().then(function(){var ae=re._dbInfo;ae.db.transaction(function(Ne){Jr(Ne,ae,"SELECT key FROM "+ae.storeName,[],function(Be,Ve){for(var qe=[],nt=0;nt<Ve.rows.length;nt++)qe.push(Ve.rows.item(nt).key);ue(qe)},function(Be,Ve){de(Ve)})})}).catch(de)});return d(J,Y),J}function br(Y){return new f(function(re,J){Y.transaction(function(ue){ue.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(de,ae){for(var Ne=[],Be=0;Be<ae.rows.length;Be++)Ne.push(ae.rows.item(Be).name);re({db:Y,storeNames:Ne})},function(de,ae){J(ae)})},function(ue){J(ue)})})}function ta(Y,re){re=m.apply(this,arguments);var J=this.config();Y=typeof Y!="function"&&Y||{},Y.name||(Y.name=Y.name||J.name,Y.storeName=Y.storeName||J.storeName);var ue=this,de;return Y.name?de=new f(function(ae){var Ne;Y.name===J.name?Ne=ue._dbInfo.db:Ne=openDatabase(Y.name,"","",0),Y.storeName?ae({db:Ne,storeNames:[Y.storeName]}):ae(br(Ne))}).then(function(ae){return new f(function(Ne,Be){ae.db.transaction(function(Ve){function qe(It){return new f(function(wn,nr){Ve.executeSql("DROP TABLE IF EXISTS "+It,[],function(){wn()},function(rr,Wo){nr(Wo)})})}for(var nt=[],_t=0,Jt=ae.storeNames.length;_t<Jt;_t++)nt.push(qe(ae.storeNames[_t]));f.all(nt).then(function(){Ne()}).catch(function(It){Be(It)})},function(Ve){Be(Ve)})})}):de=f.reject("Invalid arguments"),d(de,re),de}var Ts={_driver:"webSQLStorage",_initStorage:Ho,_support:Ue(),iterate:Zr,getItem:un,setItem:Si,removeItem:ed,clear:Wa,length:Cc,key:Qn,keys:qr,dropInstance:ta};function Ss(){try{return typeof localStorage<"u"&&"setItem"in localStorage&&!!localStorage.setItem}catch{return!1}}function ie(Y,re){var J=Y.name+"/";return Y.storeName!==re.storeName&&(J+=Y.storeName+"/"),J}function Z(){var Y="_localforage_support_test";try{return localStorage.setItem(Y,!0),localStorage.removeItem(Y),!1}catch{return!0}}function oe(){return!Z()||localStorage.length>0}function xe(Y){var re=this,J={};if(Y)for(var ue in Y)J[ue]=Y[ue];return J.keyPrefix=ie(Y,re._defaultConfig),oe()?(re._dbInfo=J,J.serializer=Dn,f.resolve()):f.reject()}function Ee(Y){var re=this,J=re.ready().then(function(){for(var ue=re._dbInfo.keyPrefix,de=localStorage.length-1;de>=0;de--){var ae=localStorage.key(de);ae.indexOf(ue)===0&&localStorage.removeItem(ae)}});return d(J,Y),J}function rt(Y,re){var J=this;Y=p(Y);var ue=J.ready().then(function(){var de=J._dbInfo,ae=localStorage.getItem(de.keyPrefix+Y);return ae&&(ae=de.serializer.deserialize(ae)),ae});return d(ue,re),ue}function Et(Y,re){var J=this,ue=J.ready().then(function(){for(var de=J._dbInfo,ae=de.keyPrefix,Ne=ae.length,Be=localStorage.length,Ve=1,qe=0;qe<Be;qe++){var nt=localStorage.key(qe);if(nt.indexOf(ae)===0){var _t=localStorage.getItem(nt);if(_t&&(_t=de.serializer.deserialize(_t)),_t=Y(_t,nt.substring(Ne),Ve++),_t!==void 0)return _t}}});return d(ue,re),ue}function Bt(Y,re){var J=this,ue=J.ready().then(function(){var de=J._dbInfo,ae;try{ae=localStorage.key(Y)}catch{ae=null}return ae&&(ae=ae.substring(de.keyPrefix.length)),ae});return d(ue,re),ue}function mn(Y){var re=this,J=re.ready().then(function(){for(var ue=re._dbInfo,de=localStorage.length,ae=[],Ne=0;Ne<de;Ne++){var Be=localStorage.key(Ne);Be.indexOf(ue.keyPrefix)===0&&ae.push(Be.substring(ue.keyPrefix.length))}return ae});return d(J,Y),J}function _n(Y){var re=this,J=re.keys().then(function(ue){return ue.length});return d(J,Y),J}function Qt(Y,re){var J=this;Y=p(Y);var ue=J.ready().then(function(){var de=J._dbInfo;localStorage.removeItem(de.keyPrefix+Y)});return d(ue,re),ue}function $n(Y,re,J){var ue=this;Y=p(Y);var de=ue.ready().then(function(){re===void 0&&(re=null);var ae=re;return new f(function(Ne,Be){var Ve=ue._dbInfo;Ve.serializer.serialize(re,function(qe,nt){if(nt)Be(nt);else try{localStorage.setItem(Ve.keyPrefix+Y,qe),Ne(ae)}catch(_t){(_t.name==="QuotaExceededError"||_t.name==="NS_ERROR_DOM_QUOTA_REACHED")&&Be(_t),Be(_t)}})})});return d(de,J),de}function tr(Y,re){if(re=m.apply(this,arguments),Y=typeof Y!="function"&&Y||{},!Y.name){var J=this.config();Y.name=Y.name||J.name,Y.storeName=Y.storeName||J.storeName}var ue=this,de;return Y.name?de=new f(function(ae){Y.storeName?ae(ie(Y,ue._defaultConfig)):ae(Y.name+"/")}).then(function(ae){for(var Ne=localStorage.length-1;Ne>=0;Ne--){var Be=localStorage.key(Ne);Be.indexOf(ae)===0&&localStorage.removeItem(Be)}}):de=f.reject("Invalid arguments"),d(de,re),de}var jt={_driver:"localStorageWrapper",_initStorage:xe,_support:Ss(),iterate:Et,getItem:rt,setItem:$n,removeItem:Qt,clear:Ee,length:_n,key:Bt,keys:mn,dropInstance:tr},Mn=function(re,J){return re===J||typeof re=="number"&&typeof J=="number"&&isNaN(re)&&isNaN(J)},fr=function(re,J){for(var ue=re.length,de=0;de<ue;){if(Mn(re[de],J))return!0;de++}return!1},Rn=Array.isArray||function(Y){return Object.prototype.toString.call(Y)==="[object Array]"},Wr={},Qi={},_r={INDEXEDDB:tt,WEBSQL:Ts,LOCALSTORAGE:jt},bo=[_r.INDEXEDDB._driver,_r.WEBSQL._driver,_r.LOCALSTORAGE._driver],ei=["dropInstance"],ti=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(ei),qo={description:"",driver:bo.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function Cs(Y,re){Y[re]=function(){var J=arguments;return Y.ready().then(function(){return Y[re].apply(Y,J)})}}function Ji(){for(var Y=1;Y<arguments.length;Y++){var re=arguments[Y];if(re)for(var J in re)re.hasOwnProperty(J)&&(Rn(re[J])?arguments[0][J]=re[J].slice():arguments[0][J]=re[J])}return arguments[0]}var Du=function(){function Y(re){s(this,Y);for(var J in _r)if(_r.hasOwnProperty(J)){var ue=_r[J],de=ue._driver;this[J]=de,Wr[de]||this.defineDriver(ue)}this._defaultConfig=Ji({},qo),this._config=Ji({},this._defaultConfig,re),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return Y.prototype.config=function(J){if((typeof J>"u"?"undefined":o(J))==="object"){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var ue in J){if(ue==="storeName"&&(J[ue]=J[ue].replace(/\W/g,"_")),ue==="version"&&typeof J[ue]!="number")return new Error("Database version must be a number.");this._config[ue]=J[ue]}return"driver"in J&&J.driver?this.setDriver(this._config.driver):!0}else return typeof J=="string"?this._config[J]:this._config},Y.prototype.defineDriver=function(J,ue,de){var ae=new f(function(Ne,Be){try{var Ve=J._driver,qe=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!J._driver){Be(qe);return}for(var nt=ti.concat("_initStorage"),_t=0,Jt=nt.length;_t<Jt;_t++){var It=nt[_t],wn=!fr(ei,It);if((wn||J[It])&&typeof J[It]!="function"){Be(qe);return}}var nr=function(){for(var kc=function(Ou){return function(){var na=new Error("Method "+Ou+" is not implemented by the current driver"),nd=f.reject(na);return d(nd,arguments[arguments.length-1]),nd}},td=0,mw=ei.length;td<mw;td++){var ag=ei[td];J[ag]||(J[ag]=kc(ag))}};nr();var rr=function(kc){Wr[Ve]&&console.info("Redefining LocalForage driver: "+Ve),Wr[Ve]=J,Qi[Ve]=kc,Ne()};"_support"in J?J._support&&typeof J._support=="function"?J._support().then(rr,Be):rr(!!J._support):rr(!0)}catch(Wo){Be(Wo)}});return h(ae,ue,de),ae},Y.prototype.driver=function(){return this._driver||null},Y.prototype.getDriver=function(J,ue,de){var ae=Wr[J]?f.resolve(Wr[J]):f.reject(new Error("Driver not found."));return h(ae,ue,de),ae},Y.prototype.getSerializer=function(J){var ue=f.resolve(Dn);return h(ue,J),ue},Y.prototype.ready=function(J){var ue=this,de=ue._driverSet.then(function(){return ue._ready===null&&(ue._ready=ue._initDriver()),ue._ready});return h(de,J,J),de},Y.prototype.setDriver=function(J,ue,de){var ae=this;Rn(J)||(J=[J]);var Ne=this._getSupportedDrivers(J);function Be(){ae._config.driver=ae.driver()}function Ve(_t){return ae._extend(_t),Be(),ae._ready=ae._initStorage(ae._config),ae._ready}function qe(_t){return function(){var Jt=0;function It(){for(;Jt<_t.length;){var wn=_t[Jt];return Jt++,ae._dbInfo=null,ae._ready=null,ae.getDriver(wn).then(Ve).catch(It)}Be();var nr=new Error("No available storage method found.");return ae._driverSet=f.reject(nr),ae._driverSet}return It()}}var nt=this._driverSet!==null?this._driverSet.catch(function(){return f.resolve()}):f.resolve();return this._driverSet=nt.then(function(){var _t=Ne[0];return ae._dbInfo=null,ae._ready=null,ae.getDriver(_t).then(function(Jt){ae._driver=Jt._driver,Be(),ae._wrapLibraryMethodsWithReady(),ae._initDriver=qe(Ne)})}).catch(function(){Be();var _t=new Error("No available storage method found.");return ae._driverSet=f.reject(_t),ae._driverSet}),h(this._driverSet,ue,de),this._driverSet},Y.prototype.supports=function(J){return!!Qi[J]},Y.prototype._extend=function(J){Ji(this,J)},Y.prototype._getSupportedDrivers=function(J){for(var ue=[],de=0,ae=J.length;de<ae;de++){var Ne=J[de];this.supports(Ne)&&ue.push(Ne)}return ue},Y.prototype._wrapLibraryMethodsWithReady=function(){for(var J=0,ue=ti.length;J<ue;J++)Cs(this,ti[J])},Y.prototype.createInstance=function(J){return new Y(J)},Y}(),Ac=new Du;r.exports=Ac},{3:3}]},{},[4])(4)})})(aEe);var Ubt=aEe.exports;const Hv=ku(Ubt);var To=[];for(var G6=0;G6<256;++G6)To.push((G6+256).toString(16).slice(1));function zbt(e,t=0){return(To[e[t+0]]+To[e[t+1]]+To[e[t+2]]+To[e[t+3]]+"-"+To[e[t+4]]+To[e[t+5]]+"-"+To[e[t+6]]+To[e[t+7]]+"-"+To[e[t+8]]+To[e[t+9]]+"-"+To[e[t+10]]+To[e[t+11]]+To[e[t+12]]+To[e[t+13]]+To[e[t+14]]+To[e[t+15]]).toLowerCase()}var H2,Vbt=new Uint8Array(16);function Hbt(){if(!H2&&(H2=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!H2))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return H2(Vbt)}var qbt=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);const voe={randomUUID:qbt};function WN(e,t,n){if(voe.randomUUID&&!t&&!e)return voe.randomUUID();e=e||{};var r=e.random||(e.rng||Hbt)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,zbt(r)}class uEe{constructor(t){ia(this,"engine");ia(this,"connected",!1);ia(this,"currentParticipantId",null);this.engine=t}isConnected(){return this.connected}getEngine(){return this.engine}}async function GN(e){const t=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",t);return Array.from(new Uint8Array(n)).map(o=>o.toString(16).padStart(2,"0")).join("")}function Yw(e){return e.participantId!==void 0}class qu extends uEe{constructor(){super("firebase");ia(this,"RECAPTCHAV3TOKEN","6LfADT8qAAAAAAi4qNf-NQaCV0RXzIqKvBrxNjx2");ia(this,"firestore");ia(this,"collectionPrefix","prod-");ia(this,"studyCollection");ia(this,"storage");ia(this,"studyId","");ia(this,"localForage",Hv.createInstance({name:"currentParticipantId"}));ia(this,"participantData",null);const n=qV.parse(`
{
  apiKey: "AIzaSyBR5snEuMQodNBn3tFkZ9VZtVha81rSiUs",
  authDomain: "mock-mqp.firebaseapp.com",
  projectId: "mock-mqp",
  storageBucket: "mock-mqp.appspot.com",
  messagingSenderId: "810459265279",
  appId: "1:810459265279:web:1f321cea4ef5376865f4ca",
  measurementId: "G-EFGFSXZL35"
}
`),r=Cbe(n);this.firestore=L1t(r,{}),this.storage=W0t();try{Lbt(r,{provider:new Lq(this.RECAPTCHAV3TOKEN),isTokenAutoRefreshEnabled:!1})}catch{console.warn("Failed to initialize Firebase App Check")}}async connect(){try{await F1t(this.firestore),this.connected=!0}catch{console.warn("Failed to connect to Firebase")}}async initializeStudyDb(n,r){try{const i=jN();if(!i.currentUser&&(await fmt(i),!i.currentUser))throw new Error("Login failed with firebase");const o=await this.getCurrentConfigHash(),s=await GN(JSON.stringify(r));if(this.studyCollection=Cl(this.firestore,`${this.collectionPrefix}${n}`),this.studyId=n,await this._pushToFirebaseStorage(`configs/${s}`,"config",r),o&&o!==s){try{await this._deleteFromFirebaseStorage("","sequenceArray")}catch{}await this.clearCurrentParticipantId()}return await this.localForage.setItem("currentConfigHash",s),Promise.resolve()}catch(i){return console.warn("Failed to connect to Firebase."),Promise.reject(i)}}async initializeParticipantSession(n,r,i,o,s){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(await this.getCurrentParticipantId(s),!this.currentParticipantId)throw new Error("Participant not initialized");const a=await this._getFromFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData"),u=await this.getModes(n);if(Yw(a))return this.participantData=a,a;const l=await GN(JSON.stringify(i));return this.participantData={participantId:this.currentParticipantId,participantConfigHash:l,sequence:await this.getSequence(),answers:{},searchParams:r,metadata:o,completed:!1,rejected:!1},u.dataCollectionEnabled&&await this._pushToFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData",this.participantData),this.participantData}async getCurrentConfigHash(){return await this.localForage.getItem("currentConfigHash")}async getAllConfigsFromHash(n,r){const i=n.map(a=>{const u=$u(this.storage,`${this.collectionPrefix}${r}/configs/${a}_config`);return this._getFromFirebaseStorageByRef(u,"config")}),o=await Promise.all(i),s={};return n.forEach((a,u)=>s[a]=o[u]),s}async getCurrentParticipantId(n){const r=await this.localForage.getItem("currentParticipantId");if(n)return this.currentParticipantId=n,await this.localForage.setItem("currentParticipantId",n),n;if(r)return this.currentParticipantId=r,r;if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");return this.currentParticipantId=WN(),await this.localForage.setItem("currentParticipantId",this.currentParticipantId),this.currentParticipantId}async clearCurrentParticipantId(){return await this.localForage.removeItem("currentParticipantId")}async saveAnswers(n){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(!this.currentParticipantId||this.participantData===null)throw new Error("Participant not initialized");this.participantData={...this.participantData,answers:n},await this._pushToFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData",this.participantData)}async setSequenceArray(n){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");await this._pushToFirebaseStorage("","sequenceArray",n)}async getSequenceArray(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const n=await this._getFromFirebaseStorage("","sequenceArray");return Array.isArray(n)?n:null}async getSequence(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(!this.currentParticipantId)throw new Error("Participant not initialized");const n=await this.getSequenceArray();if(!n)throw new Error("Latin square not initialized");const r=await this.getModes(this.studyId),i=Ci(this.studyCollection,"sequenceAssignment");await sa(i,{});const o=Cl(i,"sequenceAssignment"),s=Ci(o,this.currentParticipantId),a=uoe(o,W1t("participantId","==","")),u=await Gw(a);if(u.docs.length>0){const m=u.docs[0],g=m.data().timestamp;r.dataCollectionEnabled&&(await J1t(m.ref),await sa(s,{participantId:this.currentParticipantId,timestamp:g}))}else r.dataCollectionEnabled&&await sa(s,{participantId:this.currentParticipantId,timestamp:tbt()});const l=uoe(o,G1t("timestamp","asc")),d=(await Gw(l)).docs.map(m=>m.data()).findIndex(m=>m.participantId===this.currentParticipantId)%n.length,h=d===-1?Math.floor(Math.random()*n.length-1):d,p=n[h];if(!p)throw new Error("Latin square is empty");return p}async getAllParticipantsData(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const n=$u(this.storage,`${this.collectionPrefix}${this.studyId}/participants`),r=await qw(n),i=[],o=r.items.map(async s=>{const a=await this._getFromFirebaseStorageByRef(s,"participantData");Yw(a)&&i.push(a)});return await Promise.all(o),i}async getParticipantData(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(this.currentParticipantId===null)throw new Error("Participant not initialized");const n=await this._getFromFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData");return Yw(n)?n:null}async nextParticipant(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const n=WN();await this.localForage.setItem("currentParticipantId",n)}async verifyCompletion(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(!this.currentParticipantId)throw new Error("Participant not initialized");if(await this.getParticipantData(),!this.participantData)throw new Error("Participant not initialized");const n=await this.getModes(this.studyId);return this.participantData.completed=!0,n.dataCollectionEnabled&&await this._pushToFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData",this.participantData),!0}async getUserManagementData(n){const r=Cl(this.firestore,"user-management"),i=await Gw(r),o=Object.fromEntries(i.docs.map(s=>[s.id,s.data()]));return n in o?o[n]:null}async validateUser(n){if(n!=null&&n.user){const r=await this.getUserManagementData("authentication");if(r!=null&&r.isEnabled){const i=await this.getUserManagementData("adminUsers");if(i&&i.adminUsersList){const o=Object.fromEntries(i.adminUsersList.map(a=>[a.email,a.uid]));if(n.user.email&&(o[n.user.email]===n.user.uid||o[n.user.email]===null)){if(n.user.email&&o[n.user.email]===null){const a=i.adminUsersList.find(u=>u.email===n.user.email);a&&(a.uid=n.user.uid),await sa(Ci(this.firestore,"user-management","adminUsers"),{adminUsersList:i.adminUsersList})}return!0}return!1}}return!0}return!1}async changeAuth(n){await sa(Ci(this.firestore,"user-management","authentication"),{isEnabled:n})}async addAdminUser(n){const r=await this.getUserManagementData("adminUsers");if(r!=null&&r.adminUsersList){const i=r.adminUsersList;i.find(s=>s.email===n.email)||(i.push({email:n.email,uid:n.uid}),await sa(Ci(this.firestore,"user-management","adminUsers"),{adminUsersList:i}))}else await sa(Ci(this.firestore,"user-management","adminUsers"),{adminUsersList:[{email:n.email,uid:n.uid}]})}async removeAdminUser(n){const r=await this.getUserManagementData("adminUsers");r!=null&&r.adminUsersList&&r.adminUsersList.length>1&&r.adminUsersList.find(i=>i.email===n)&&(r.adminUsersList=r==null?void 0:r.adminUsersList.filter(i=>i.email!==n),await sa(Ci(this.firestore,"user-management","adminUsers"),{adminUsersList:r==null?void 0:r.adminUsersList}))}async getAllParticipantsDataByStudy(n){const r=$u(this.storage,`${this.collectionPrefix}${n}/participants`),i=await qw(r),o=[],s=i.items.map(async a=>{const u=await this._getFromFirebaseStorageByRef(a,"participantData");Yw(u)&&o.push(u)});return await Promise.all(s),o}async rejectParticipant(n,r){const i=Cl(this.firestore,`${this.collectionPrefix}${n}`),o=$u(this.storage,`${this.collectionPrefix}${n}/participants/${r}_participantData`),s=await this._getFromFirebaseStorageByRef(o,"participantData");try{if(!s||!Yw(s)||s.rejected)return;s.rejected=!0,await this._pushToFirebaseStorageByRef(o,"participantData",s);const a=Ci(i,"sequenceAssignment"),u=Cl(a,"sequenceAssignment"),l=Ci(u,r);await Q1t(l,{participantId:""})}catch{console.warn("Failed to reject the participant.")}}async setMode(n,r,i){const o=Ci(this.firestore,"metadata",`${this.collectionPrefix}${n}`);return await sa(o,{[r]:i},{merge:!0})}async getModes(n){const r=Ci(this.firestore,"metadata",`${this.collectionPrefix}${n}`),i=await H6(r);if(i.exists())return i.data();const o={dataCollectionEnabled:!0,studyNavigatorEnabled:!0,analyticsInterfacePubliclyAccessible:!0};return await sa(r,o),o}async createSnapshot(n,r){const i=`${this.collectionPrefix}${n}`;if(!await this._directoryExists(i))return console.warn(`Source directory ${i} does not exist.`),{status:"FAILED",error:{message:"There is currently no data in your study. A snapshot could not be created.",title:"Failed to Create Snapshot."}};const o=new Date,s=o.getUTCFullYear(),a=(o.getUTCMonth()+1).toString().padStart(2,"0"),u=o.getUTCDate().toString().padStart(2,"0"),l=o.getUTCHours().toString().padStart(2,"0"),c=o.getUTCMinutes().toString().padStart(2,"0"),f=o.getUTCSeconds().toString().padStart(2,"0"),d=`${s}-${a}-${u}T${l}:${c}:${f}`,h=`${this.collectionPrefix}${n}-snapshot-${d}`;await this._copyDirectory(`${i}/configs`,`${h}/configs`),await this._copyDirectory(`${i}/participants`,`${h}/participants`),await this._copyDirectory(i,h),await this._copyCollection(i,h),await this._addDirectoryNameToMetadata(h);const p=[];if(r){const m=await this.removeSnapshotOrLive(i,!1);m.status==="FAILED"?p.push({title:m.error.title,message:m.error.message,color:"red"}):p.push({title:"Success!",message:"Successfully deleted live data.",color:"green"})}return p.push({message:"Successfully created snapshot",title:"Success!",color:"green"}),{status:"SUCCESS",notifications:p}}async removeSnapshotOrLive(n,r){try{const i=n.startsWith(this.collectionPrefix)?n:`${this.collectionPrefix}${n}`;return await this._deleteDirectory(`${i}/configs`),await this._deleteDirectory(`${i}/participants`),await this._deleteDirectory(i),await this._deleteCollection(i),r&&await this._removeNameFromMetadata(i),{status:"SUCCESS",notifications:[{message:"Successfully deleted snapshot or live data.",title:"Success!",color:"green"}]}}catch{return{status:"FAILED",error:{title:"Failed to delete live data or snapshot",message:"There was an unspecified error when trying to remove a snapshot or live data."}}}}async getSnapshots(n){try{const r=Ci(this.firestore,"metadata","collections"),i=await H6(r);if(i.exists()){const o=i.data();return Object.keys(o).filter(u=>u.startsWith(`${this.collectionPrefix}${n}-snapshot`)).map(u=>{const l=o[u];let c;return typeof l=="boolean"?c=u:l&&typeof l=="object"&&l.enabled===!0?c=l.name:c=null,{originalName:u,alternateName:c}}).filter(u=>u.alternateName!==null).sort((u,l)=>u.originalName.localeCompare(l.originalName)).reverse()}return[]}catch(r){throw console.error("Error listing collections with prefix:",r),r}}async restoreSnapshot(n,r){const i=`${this.collectionPrefix}${n}`,o=[];try{const s=await this.createSnapshot(n,!0);return s.status==="FAILED"?(console.warn("No live data to capture."),o.push({title:s.error.title,message:s.error.message,color:"yellow"})):o.push({title:"Success!",message:"Successfully created snapshot of live data.",color:"green"}),await this._copyDirectory(`${r}/configs`,`${i}/configs`),await this._copyDirectory(`${r}/participants`,`${i}/participants`),await this._copyDirectory(r,i),await this._copyCollection(r,i),o.push({message:"Successfully restored snapshot to live data.",title:"Success!",color:"green"}),{status:"SUCCESS",notifications:o}}catch(s){return console.error("Error trying to delete a snapshot",s),{status:"FAILED",error:{title:"Failed to restore a snapshot fully.",message:"There was an unspecified error when trying to restore this snapshot."}}}}async _addDirectoryNameToMetadata(n){try{const r=Ci(this.firestore,"metadata","collections");await sa(r,{[n]:{enabled:!0,name:n}},{merge:!0})}catch(r){throw console.error("Error adding collection to metadata:",r),r}}async renameSnapshot(n,r){try{const i=Ci(this.firestore,"metadata","collections");return await sa(i,{[n]:{enabled:!0,name:r}},{merge:!0}),{status:"SUCCESS",notifications:[{message:"Successfully renamed snapshot.",title:"Success!",color:"green"}]}}catch(i){return console.error("Error renaming collection in metadata",i),{status:"FAILED",error:{title:"Failed to Rename Snapshot.",message:"There was an error when trying to rename the snapshot."}}}}async _removeNameFromMetadata(n){try{const r=Ci(this.firestore,"metadata","collections"),i=await H6(r);if(i.exists()){const o=i.data();o[n]?(delete o[n],await sa(r,o)):console.warn(`${n} does not exist in metadata.`)}else console.warn("No metadata found.")}catch(r){throw console.error("Error removing collection from metadata:",r),r}}async _deleteDirectory(n){try{const r=$u(this.storage,n),o=(await qw(r)).items.map(s=>Sie(s));await Promise.all(o)}catch(r){console.error("Error deleting files in directory:",r)}}async _copyDirectory(n,r){try{const i=$u(this.storage,n),s=(await qw(i)).items.map(a=>{const u=a.fullPath,l=u.replace(n,r);return this._copyFile(u,l)});await Promise.all(s)}catch(i){console.error("Error copying file:",i)}}async _copyFile(n,r){try{const i=$u(this.storage,n),o=$u(this.storage,r),s=await j6(i),u=await(await fetch(s)).blob();await F6(o,u)}catch(i){console.error("Error copying file:",i)}}async _copyCollection(n,r){const i=Cl(this.firestore,n),o=Ci(i,"sequenceAssignment"),s=Cl(o,"sequenceAssignment"),a=Cl(this.firestore,r),u=Ci(a,"sequenceAssignment");await sa(u,{});const l=Cl(u,"sequenceAssignment"),c=await Gw(s),f=foe(this.firestore);c.docs.forEach(d=>{const h=Ci(l,d.id);f.set(h,d.data())}),await f.commit()}async _deleteCollection(n){const r=Cl(this.firestore,n),i=Ci(r,"sequenceAssignment"),o=Cl(i,"sequenceAssignment"),s=await Gw(o),a=foe(this.firestore);s.forEach(u=>{const l=Ci(o,u.id);a.delete(l)}),a.delete(i),await a.commit()}async _directoryExists(n){try{const r=$u(this.storage,n);return(await qw(r)).items.length>0}catch(r){if(r.code==="storage/object-not-found")return!1;throw console.error("Error checking if directory exists:",r),r}}_verifyStudyDatabase(n){return n!==void 0}async _getFromFirebaseStorage(n,r){const i=$u(this.storage,`${this.collectionPrefix}${this.studyId}/${n}_${r}`);let o={};try{const s=await j6(i),u=await(await fetch(s)).text();o=JSON.parse(u)}catch{console.warn(`${n} does not have ${r} for ${this.collectionPrefix}${this.studyId}.`)}return o}async _getFromFirebaseStorageByRef(n,r){let i={};try{const o=await j6(n),a=await(await fetch(o)).text();i=JSON.parse(a)}catch{console.warn(`${n} with type ${r} not found.`)}return i}async _pushToFirebaseStorage(n,r,i){if(Object.keys(i).length>0){const o=$u(this.storage,`${this.collectionPrefix}${this.studyId}/${n}_${r}`),s=new Blob([JSON.stringify(i)],{type:"application/json"});await F6(o,s)}}async _pushToFirebaseStorageByRef(n,r,i){if(Object.keys(i).length>0){const o=new Blob([JSON.stringify(i)],{type:"application/json"});await F6(n,o)}}async _deleteFromFirebaseStorage(n,r){const i=$u(this.storage,`${this.collectionPrefix}${this.studyId}/${n}_${r}`);await Sie(i)}}const lEe=k.createContext({user:{user:null,determiningStatus:!1,isAdmin:!1,adminVerification:!1},logout:async()=>{},triggerAuth:()=>{},verifyAdminStatus:()=>Promise.resolve(!1)}),Uy=()=>k.useContext(lEe);function Wbt({children:e}){const t={user:null,determiningStatus:!0,isAdmin:!1,adminVerification:!1},n={user:null,determiningStatus:!1,isAdmin:!1,adminVerification:!1},r={user:{name:"fakeName",email:"fakeEmail@fake.com",uid:"fakeUid"},determiningStatus:!1,isAdmin:!0,adminVerification:!0},[i,o]=k.useState(t),[s,a]=k.useState(!1),{storageEngine:u}=$i(),l=async()=>{const h=jN();try{await vmt(h)}catch(p){console.error(`There was an issue signing-out the user: ${p.message}`)}finally{o(n)}},c=()=>{a(!0)},f=async h=>u?await u.validateUser(h):!1;k.useEffect(()=>{o(t);let h;if(u instanceof qu)try{h=jN()}catch{console.warn("No firebase store.")}const p=async y=>{if(o(v=>({user:v.user,isAdmin:v.isAdmin,determiningStatus:!0,adminVerification:!1})),y){const v={user:y,determiningStatus:!1,isAdmin:!1,adminVerification:!0},_=await f(v);v.isAdmin=!!_,o(v)}else l()},g=(async()=>{if(u instanceof qu){const y=await(u==null?void 0:u.getUserManagementData("authentication"));if(y!=null&&y.isEnabled){const v=ymt(h,async _=>await p(_));return()=>v()}o(r)}else u&&o(r);return()=>{}})();return()=>{g.then(y=>y())}},[u,s]);const d=k.useMemo(()=>({user:i,triggerAuth:c,logout:l,verifyAdminStatus:f}),[i]);return b.jsx(lEe.Provider,{value:d,children:i.determiningStatus?b.jsx(gu,{visible:!0}):e})}function qx({studyIds:e}){const t=$f(),{studyId:n}=eh(),r=jm(),i=e.map(d=>({value:d,label:d})),{storageEngine:o}=$i(),{user:s,logout:a}=Uy(),[u,l]=k.useState(!1),c=r.pathname.includes("analysis"),f=[{name:"Studies",leftIcon:b.jsx(o8e,{}),href:"",needAdmin:!1},{name:"Analysis",leftIcon:b.jsx(X9e,{}),href:"analysis/dashboard",needAdmin:!1},{name:"Settings",leftIcon:b.jsx(Dpe,{}),href:"settings",needAdmin:!0}];return b.jsx(Or.Header,{p:"md",children:b.jsxs(Ku,{mt:-7,align:"center",children:[b.jsx(Ku.Col,{span:6,children:b.jsxs(kt,{align:"center",onClick:()=>t(c?"/analysis/dashboard":"/"),style:{cursor:"pointer"},children:[b.jsx(Fm,{w:40,src:`${Ra}revisitAssets/revisitLogoSquare.svg`,alt:"Revisit Logo"}),b.jsx(cu,{w:"md"}),b.jsx(kr,{order:4,style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:c?"ReVISit Analytics Platform":"ReVISit Studies"})]})}),b.jsx(Ku.Col,{span:6,children:b.jsxs(kt,{justify:"flex-end",direction:"row",children:[c&&b.jsx(QS,{allowDeselect:!1,placeholder:"Select Study",data:i,value:n,onChange:d=>t(`/analysis/stats/${d}`),mr:16}),b.jsx(pU,{opened:!1,onClick:()=>l(!0),style:{visibility:u?"hidden":void 0}}),b.jsx(Df,{opened:u,onClose:()=>l(!1),position:"right",withCloseButton:!1,children:b.jsxs(kt,{direction:"column",mt:20,children:[b.jsx(je,{ml:15,mb:20,fw:700,size:"lg",children:"Navigation"}),f.map(d=>d.needAdmin?s.isAdmin?b.jsx(on,{leftSection:d.leftIcon,variant:"default",style:{border:"none",display:"flex",justifyContent:"flex-start"},onClick:h=>{h.preventDefault(),t(`/${d.href}`),l(!1)},component:"a",href:`${Ra}${d.href}`,children:d.name},`menu-item-${d.name}`):null:b.jsx(on,{leftSection:d.leftIcon,variant:"default",style:{border:"none",display:"flex",justifyContent:"flex-start"},onClick:h=>{h.preventDefault(),t(`/${d.href}`),l(!1)},component:"a",href:`${Ra}${d.href}`,children:d.name},`menu-item-${d.name}`)),b.jsxs(he,{ml:10,children:[b.jsx(ub,{my:"sm"}),(o==null?void 0:o.getEngine())==="firebase"?s.isAdmin?b.jsx(je,{size:"sm",ml:10,style:{cursor:"pointer"},onClick:()=>{a(),t("/login"),l(!1)},children:"Logout"}):b.jsx(je,{size:"sm",ml:10,style:{cursor:"pointer"},onClick:()=>{t("/login"),l(!1)},children:"Login"}):null]})]})})]})})]})})}function Fq({allParticipants:e,studyId:t,gap:n,fileName:r}){const[i,{open:o,close:s}]=lD(!1),[a,u]=k.useState([]),l=async()=>typeof e=="function"?await e():e,c=async()=>{const d=await l(),h=r?`${r}.json`:`${t}_all.json`;OH(JSON.stringify(d,null,2),h)},f=async()=>{const d=await l();u(d),o()};return b.jsxs(b.Fragment,{children:[b.jsxs(qs,{style:{gap:n},children:[b.jsx(zr,{label:"Download all participants data as JSON",children:b.jsx(on,{variant:"light",disabled:e.length===0&&typeof e!="function",onClick:c,px:4,children:b.jsx(t8e,{})})}),b.jsx(zr,{label:"Download all participants data as a tidy CSV",children:b.jsx(on,{variant:"light",disabled:e.length===0&&typeof e!="function",onClick:f,px:4,children:b.jsx(Ope,{})})})]}),i&&a.length>0&&b.jsx(Idt,{opened:i,close:s,filename:r?`${r}_tidy.csv`:`${t}_all_tidy.csv`,data:a,studyId:t})]})}function Gbt({cellData:e}){return b.jsx(Ut.Td,{children:b.jsx(b_,{miw:100,children:Object.entries(e.answer).map(([t,n])=>b.jsxs(he,{children:[b.jsxs(je,{fw:700,span:!0,children:[" ",`${t}: `]}),b.jsx(je,{span:!0,children:`${n}`})]},`cell-${t}`))})})}function boe({cellData:e}){const t=(e.endTime-e.startTime)/1e3;return b.jsxs(Ut.Td,{children:[t.toFixed(1)," ","s"]})}function Ybt(e){const{metaData:t}=e;return b.jsx(Ut.Td,{children:b.jsx(zU,{w:200,hideLabel:"hide",maxHeight:50,showLabel:"more",children:b.jsxs(b_,{gap:"xs",children:[b.jsxs(he,{children:["IP:"," ",t.ip]}),b.jsxs(he,{children:["Language:"," ",t.language]}),b.jsxs(he,{children:["Resolution:"," ",JSON.stringify(t.resolution)]}),b.jsxs(he,{children:["User Agent:"," ",t.userAgent]})]})})})}function Kbt({completed:e,inProgress:t,rejected:n,studyConfig:r,refresh:i}){const{storageEngine:o}=$i(),{studyId:s}=eh(),{user:a}=Uy(),u=async _=>{o&&s&&(a.isAdmin?(await o.rejectParticipant(s,_),await i()):console.warn("You are not authorized to perform this action."))},[l,c]=k.useState([]),[f,d]=k.useState(!1),h=()=>f5({title:"Confirm rejecting participants",children:b.jsxs(je,{size:"sm",children:["Are you sure you want to reject the selected participants? This action is"," ",b.jsx(je,{span:!0,fw:700,td:"underline",inherit:!0,children:"irreversible"}),", and will return the participants' sequences to the beginning of the sequence array."]}),labels:{confirm:"Reject Participants",cancel:"Cancel"},confirmProps:{color:"red"},cancelProps:{variant:"subtle",color:"dark"},onCancel:()=>{},onConfirm:async()=>{d(!0);const _=l.map(async w=>await u(w));await Promise.all(_),c([]),await i(),d(!1)}}),p=k.useMemo(()=>[...e,...t,...n],[e,t,n]);function m(_){_==="all"?l.length===p.length?c([]):c(p.map(w=>w.participantId)):l.includes(_)?c(l.filter(w=>w!==_)):c([...l,_])}const g=Pge(r.sequence),y=[b.jsx(Ut.Th,{children:b.jsx(kt,{justify:"center",children:b.jsx(ru,{mb:-4,checked:l.length===p.length,onChange:()=>m("all")})})},"action"),b.jsx(Ut.Th,{children:"ID"},"ID"),b.jsx(Ut.Th,{children:"Status"},"status"),b.jsx(Ut.Th,{children:"Meta"},"meta"),...g.flatMap(_=>[b.jsx(Ut.Th,{children:_.componentName},`header-${_.componentName}-${_.timesSeenInBlock}`),b.jsxs(Ut.Th,{children:[b.jsx("span",{style:{whiteSpace:"nowrap"},children:_.componentName})," ","Duration"]},`header-${_.componentName}-${_.timesSeenInBlock}-duration`)]),b.jsx(Ut.Th,{children:"Total Duration"},"total-duration")],v=p.map(_=>b.jsxs(Ut.Tr,{children:[b.jsx(Ut.Td,{children:b.jsx(kt,{justify:"center",children:b.jsx(ru,{mb:-4,checked:l.includes(_.participantId),onChange:()=>m(_.participantId)})})}),b.jsx(Ut.Td,{style:{whiteSpace:"nowrap"},children:_.participantId}),b.jsx(Ut.Td,{children:b.jsxs(kt,{direction:"row",align:"center",children:[_.rejected?b.jsx(zr,{label:"Rejected",children:b.jsx(iz,{size:16,color:"red",style:{marginBottom:-3}})}):_.completed?b.jsx(zr,{label:"Completed",children:b.jsx(Rpe,{size:16,color:"teal",style:{marginBottom:-3}})}):b.jsx(zr,{label:"In Progress",children:b.jsx(Ppe,{size:16,color:"orange",style:{marginBottom:-3}})}),!_.completed&&b.jsxs(je,{size:"sm",mb:-1,ml:4,children:[(Object.entries(_.answers).filter(([w,E])=>E.endTime!==void 0).length/(rh(_.sequence).length-1)*100).toFixed(2),"%"]})]})}),_.metadata?b.jsx(Ybt,{metaData:_.metadata}):b.jsx(Ut.Td,{children:"N/A"}),g.map(w=>{const E=Rge(_.sequence,w.orderPath),S=E&&Object.entries(_.answers).sort((T,C)=>{const A=parseInt(T[0].slice(T[0].lastIndexOf("_")+1),10),R=parseInt(C[0].slice(C[0].lastIndexOf("_")+1),10);return A-R}).filter(([T])=>{const C=T.slice(0,T.lastIndexOf("_")),A=parseInt(T.slice(T.lastIndexOf("_")+1),10);return C===w.componentName&&A<=E[0].lastIndex&&A>=E[0].firstIndex});return S!==null&&S.length>=w.timesSeenInBlock+1?b.jsxs(Yn.Fragment,{children:[b.jsx(Gbt,{cellData:S[w.timesSeenInBlock][1]}),b.jsx(boe,{cellData:S[w.timesSeenInBlock][1]})]},`cellgroup-${_.participantId}-${w.componentName}-${w.timesSeenInBlock}`):b.jsxs(Yn.Fragment,{children:[b.jsx(Ut.Td,{children:"N/A"}),b.jsx(Ut.Td,{children:"N/A"})]},`cellgroup-${_.participantId}-${w.componentName}-${w.timesSeenInBlock}`)}),b.jsx(boe,{cellData:{startTime:Math.min(...Object.values(_.answers).map(w=>w.startTime)),endTime:Math.max(...Object.values(_.answers).map(w=>w.endTime)),answer:{},windowEvents:[]}},`cell-${_.participantId}-total-duration`)]},_.participantId));return p.length>0?b.jsxs(b.Fragment,{children:[b.jsx(gu,{visible:f,overlayProps:{blur:2}}),b.jsxs(kt,{justify:"space-between",mb:8,p:8,children:[b.jsx(qs,{children:b.jsx(QS,{w:350,variant:"filled",placeholder:"Search for a participant ID",data:p.map(_=>({value:_.participantId,label:_.participantId})),searchable:!0,value:null,leftSection:b.jsx(m8e,{size:14}),onChange:_=>_&&m(_)})}),b.jsxs(qs,{children:[b.jsx(Fq,{allParticipants:[...e,...t],studyId:s||""}),b.jsx(on,{disabled:l.length===0||!a.isAdmin,onClick:h,color:"red",children:"Reject Participants"})]})]}),b.jsx(kt,{direction:"column",style:{width:"100%",overflow:"auto"},children:b.jsxs(Ut,{striped:!0,withTableBorder:!0,children:[b.jsx(Ut.Thead,{children:b.jsx(Ut.Tr,{children:y})}),b.jsx(Ut.Tbody,{children:v})]})})]}):b.jsxs(b.Fragment,{children:[b.jsx(cu,{h:"xl"}),b.jsx(kt,{justify:"center",align:"center",children:b.jsx(je,{children:"No data available"})})]})}const Xbt="_root_1spq0_1",Qbt="_description_1spq0_9",Jbt="_title_1spq0_10",Zbt="_closeButton_1spq0_14",e_t={root:Xbt,description:Qbt,title:Jbt,closeButton:Zbt},YN=e=>{const{title:t,message:n,color:r}=e;Ay.show({title:t,message:n,position:"top-center",classNames:e_t,color:r||"blue",autoClose:r==="red"||r==="yellow"?!1:5e3})};function t_t({studyId:e,refresh:t}){const[n,r]=k.useState(!1),[i,o]=k.useState(!1),[s,a]=k.useState(!1),[u,l]=k.useState(!1),[c,f]=k.useState(""),[d,h]=k.useState([]),[p,m]=k.useState(""),[g,y]=k.useState(""),[v,_]=k.useState(!1),[w,E]=k.useState(!1),{storageEngine:S}=$i(),T=S,C=k.useCallback(async()=>{E(!0);const P=await T.getSnapshots(e);h(P),E(!1)},[T,e]);k.useEffect(()=>{C()},[C]);const A=async(P,...z)=>{_(!0);const W=await P(...z);W.status==="SUCCESS"?(C(),_(!1),await t(),W.notifications&&W.notifications.forEach(j=>{YN(j)})):(_(!1),YN({title:W.error.title,message:W.error.message,color:"red"}))},R=async()=>{await A(T.createSnapshot.bind(T),e,!1)},N=async()=>{m(""),r(!1),await A(T.createSnapshot.bind(T),e,!0)},O=async()=>{a(!1),await A(T.renameSnapshot.bind(T),c,g)},D=async P=>{await A(T.restoreSnapshot.bind(T),e,P)},M=async()=>{m(""),o(!1),await A(T.removeSnapshotOrLive.bind(T),c,!0)},F=async()=>{m(""),l(!1),await A(T.removeSnapshotOrLive.bind(T),e,!0)},L=()=>f5({title:"Create a Snapshot",children:b.jsx(je,{mb:30,children:"This will create a snapshot of the live database without impacting the live data."}),labels:{confirm:"Create",cancel:"Cancel"},cancelProps:{variant:"subtle",color:"dark"},onCancel:()=>{},onConfirm:()=>R()}),B=P=>f5({title:"Restore Snapshot",children:b.jsx(je,{mb:30,children:"Restoring this snapshot will perform 2 actions. First, we will create a snapshot of the current live database, then we will restore the selected snapshot into the live database."}),labels:{confirm:"Restore",cancel:"Cancel"},confirmProps:{color:"red"},cancelProps:{variant:"subtle",color:"dark"},onCancel:()=>{},onConfirm:()=>D(P)}),U=P=>{const z=/-snapshot-(.+)$/,W=P.match(z);return W&&W[1]?W[1].replace("T"," "):null},H=async P=>{const z=P.slice(P.indexOf("-")+1);return await T.getAllParticipantsDataByStudy(z)};return b.jsxs(b.Fragment,{children:[b.jsx(gu,{visible:v}),b.jsxs(kt,{justify:"space-between",align:"center",children:[b.jsxs(he,{style:{width:"70%"},children:[b.jsx(kr,{order:5,children:"Create a Snapshot"}),b.jsxs(je,{children:["This will create a snapshot of the live"," ",b.jsx(je,{span:!0,fw:700,children:e})," ","database. It will"," ",b.jsx(je,{span:!0,fw:700,fs:"italic",children:"not"})," ","remove this data from the live database. The current study data can be restored from a snapshot at any time."]})]}),b.jsx(zr,{label:"Create a snapshot",children:b.jsx(on,{onClick:L,children:"Snapshot"})})]}),b.jsx(cu,{h:"lg"}),b.jsxs(kt,{justify:"space-between",align:"center",children:[b.jsxs(he,{style:{width:"70%"},children:[b.jsx(kr,{order:5,children:"Archive Data"}),b.jsxs(je,{children:["This will create a snapshot of the live"," ",b.jsx(je,{span:!0,fw:700,children:e})," ","database. It will then remove this data from the live database. The current study data can be restored from a snapshot at any time."]})]}),b.jsx(zr,{label:"Snapshot and Delete Data",children:b.jsx(on,{color:"red",onClick:()=>r(!0),children:"Archive"})})]}),b.jsx(cu,{h:"lg"}),b.jsxs(kt,{justify:"space-between",align:"center",children:[b.jsxs(he,{style:{width:"70%"},children:[b.jsx(kr,{order:5,children:"Delete Data"}),b.jsxs(je,{children:["This will delete the live"," ",b.jsx(je,{span:!0,fw:700,children:e})," ","database. Since this does not create a snapshot the data will be permanently deleted and cannot be restored."]})]}),b.jsx(zr,{label:"Delete Data",children:b.jsx(on,{color:"red",onClick:()=>l(!0),children:"Delete"})})]}),b.jsx(cu,{h:"xl"}),b.jsxs(kt,{direction:"column",children:[b.jsx(kt,{style:{borderBottom:"1px solid #dedede"},direction:"row",justify:"space-between",mb:"xs",pb:"sm",children:b.jsx(kr,{order:5,children:"Snapshots"})}),b.jsxs(he,{style:{position:"relative"},children:[b.jsx(gu,{visible:w}),d.length>0?b.jsxs(Ut,{children:[b.jsx(Ut.Thead,{children:b.jsxs(Ut.Tr,{children:[b.jsx(Ut.Th,{children:"Snapshot Name"}),b.jsx(Ut.Th,{children:"Date Created"}),b.jsx(Ut.Th,{children:"Actions"})]})}),b.jsx(Ut.Tbody,{children:d.map(P=>b.jsxs(Ut.Tr,{children:[b.jsx(Ut.Td,{children:P.alternateName}),b.jsx(Ut.Td,{children:U(P.originalName)}),b.jsx(Ut.Td,{children:b.jsxs(kt,{children:[b.jsx(zr,{label:"Rename",children:b.jsx(on,{color:"green",variant:"light",px:4,style:{margin:"0px 5px"},onClick:()=>{a(!0),f(P.originalName)},children:b.jsx(c8e,{})})}),b.jsx(zr,{label:"Restore Snapshot",children:b.jsx(on,{color:"blue",variant:"light",px:4,style:{margin:"0px 5px"},onClick:()=>{B(P.originalName)},children:b.jsx(h8e,{})})}),b.jsx(zr,{label:"Delete Snapshot",children:b.jsx(on,{color:"red",px:4,variant:"light",style:{margin:"0px 10px 0px 5px"},onClick:()=>{o(!0),f(P.originalName)},children:b.jsx($pe,{})})}),b.jsx(Fq,{allParticipants:()=>H(P.originalName),studyId:e,gap:"10px",fileName:P.alternateName})]})})]},P.originalName))})]}):b.jsx(je,{children:"No snapshots."})]})]}),b.jsxs(li,{opened:n,onClose:()=>{r(!1),m("")},title:b.jsx(je,{children:"Archive Data"}),children:[b.jsx(je,{mb:"sm",children:"This will create a snapshot of the live database and remove the data from the live database."}),b.jsx(pp,{label:"To archive this data, please enter the name of the study.",placeholder:e,onChange:P=>m(P.target.value)}),b.jsxs(kt,{mt:"sm",justify:"right",children:[b.jsx(on,{mr:5,variant:"subtle",color:"dark",onClick:()=>{r(!1),m("")},children:"Cancel"}),b.jsx(on,{color:"red",onClick:N,disabled:p!==e,children:"Archive"})]})]}),b.jsxs(li,{opened:i,onClose:()=>{o(!1),m("")},title:b.jsx(je,{children:"Delete Snapshot"}),children:[b.jsxs(je,{mb:"sm",children:["This will permanently remove this snapshot. This action is"," ",b.jsx(je,{span:!0,fw:700,children:"irreversible"}),"."]}),b.jsx(pp,{label:"To delete this snapshot, please enter the name of the study.",placeholder:e,onChange:P=>m(P.target.value)}),b.jsxs(kt,{mt:"sm",justify:"right",children:[b.jsx(on,{mr:5,variant:"subtle",color:"dark",onClick:()=>{o(!1),m("")},children:"Cancel"}),b.jsx(on,{color:"red",onClick:M,disabled:p!==e,children:"Delete"})]})]}),b.jsxs(li,{opened:s,onClose:()=>{a(!1),y("")},title:b.jsx(je,{children:"Rename Snapshot"}),children:[b.jsx(pp,{label:"Enter the new name of the snapshot.",placeholder:c,onChange:P=>y(P.target.value)}),b.jsxs(kt,{mt:"sm",justify:"right",children:[b.jsx(on,{mr:5,variant:"subtle",color:"dark",onClick:()=>{a(!1),y("")},children:"Cancel"}),b.jsx(on,{color:"green",onClick:O,disabled:!g||g.length===0,children:"Rename"})]})]}),b.jsxs(li,{opened:u,onClose:()=>{l(!1),m("")},title:b.jsx(je,{children:"Delete Live Data"}),children:[b.jsxs(je,{mb:"sm",children:["This will permanently delete the live"," ",b.jsx(je,{span:!0,fw:700,children:e})," ","data. This action is"," ",b.jsx(je,{span:!0,fw:700,children:"irreversible"}),". Please consider using archive data to create a snapshot of the live data before deleting."]}),b.jsx(pp,{label:"To delete this live data, please enter the name of the study.",placeholder:e,onChange:P=>m(P.target.value)}),b.jsxs(kt,{mt:"sm",justify:"right",children:[b.jsx(on,{mr:5,variant:"subtle",color:"dark",onClick:()=>{l(!1),m("")},children:"Cancel"}),b.jsx(on,{color:"red",onClick:F,disabled:p!==e,children:"Delete"})]})]})]})}function n_t({studyId:e}){const{storageEngine:t}=$i(),[n,r]=k.useState(!1),[i,o]=k.useState(!1),[s,a]=k.useState(!1),[u,l]=k.useState(!1);k.useEffect(()=>{(async()=>{if(t){const d=await t.getModes(e);o(d.dataCollectionEnabled),a(d.studyNavigatorEnabled),l(d.analyticsInterfacePubliclyAccessible),r(!0)}})()},[t,e]);const c=async(f,d)=>{t&&(await t.setMode(e,f,d),f==="dataCollectionEnabled"?o(d):f==="studyNavigatorEnabled"?a(d):f==="analyticsInterfacePubliclyAccessible"&&l(d))};return n&&b.jsxs(b_,{children:[b.jsx(S1,{label:"Data Collection Enabled",checked:i,onChange:f=>c("dataCollectionEnabled",f.currentTarget.checked)}),b.jsx(S1,{label:"Study Navigator Enabled",checked:s,onChange:f=>c("studyNavigatorEnabled",f.currentTarget.checked)}),b.jsx(S1,{label:"Analytics Interface Publicly Accessible",checked:u,onChange:f=>c("analyticsInterfacePubliclyAccessible",f.currentTarget.checked)})]})}function r_t({studyId:e,refresh:t}){const{storageEngine:n}=$i();return b.jsx(sl,{children:b.jsxs(fa,{multiple:!0,variant:"contained",children:[b.jsxs(fa.Item,{value:"ReVISit Modes",children:[b.jsx(fa.Control,{children:b.jsx(kr,{order:5,children:"ReVISit Modes"})}),b.jsx(fa.Panel,{children:b.jsx(n_t,{studyId:e})})]},"modes"),b.jsxs(fa.Item,{value:"Data Management",children:[b.jsx(fa.Control,{disabled:(n==null?void 0:n.getEngine())==="localStorage",children:b.jsx(kr,{order:5,children:"Data Management"})}),b.jsx(fa.Panel,{children:(n==null?void 0:n.getEngine())!=="localStorage"&&b.jsx(t_t,{studyId:e,refresh:t})})]},"dataManagement")]})})}const xv=14;function cEe({completed:e,inProgress:t,rejected:n,filteredCompleted:r}){return b.jsxs(kt,{ml:4,gap:4,children:[b.jsx(zr,{label:"Completed",children:b.jsx($p,{variant:"light",color:"green",leftSection:b.jsx(Rpe,{width:xv,height:xv,style:{paddingTop:1}}),pb:1,children:r&&r!==e?`${r}/${e}`:e})}),b.jsx(zr,{label:"In Progress",children:b.jsx($p,{variant:"light",color:"orange",leftSection:b.jsx(Ppe,{width:xv,height:xv,style:{paddingTop:1}}),pb:1,children:t})}),b.jsx(zr,{label:"Rejected",children:b.jsx($p,{variant:"light",color:"red",leftSection:b.jsx(iz,{width:xv,height:xv,style:{paddingTop:1}}),pb:1,children:n})})]})}const _oe={};function I9(e,t){e===void 0&&(e=_oe),t===void 0&&(t=_oe);const n=Object.keys(e),r=Object.keys(t);return e===t||n.length===r.length&&n.every(i=>e[i]===t[i])}/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2022 Joachim Wester
 * MIT licensed
 */var i_t=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},e(t,n)};return function(t,n){e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),o_t=Object.prototype.hasOwnProperty;function R9(e,t){return o_t.call(e,t)}function N9(e){if(Array.isArray(e)){for(var t=new Array(e.length),n=0;n<t.length;n++)t[n]=""+n;return t}if(Object.keys)return Object.keys(e);var r=[];for(var i in e)R9(e,i)&&r.push(i);return r}function au(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}}function P9(e){for(var t=0,n=e.length,r;t<n;){if(r=e.charCodeAt(t),r>=48&&r<=57){t++;continue}return!1}return!0}function Mg(e){return e.indexOf("/")===-1&&e.indexOf("~")===-1?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function fEe(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function D9(e){if(e===void 0)return!0;if(e){if(Array.isArray(e)){for(var t=0,n=e.length;t<n;t++)if(D9(e[t]))return!0}else if(typeof e=="object"){for(var r=N9(e),i=r.length,o=0;o<i;o++)if(D9(e[r[o]]))return!0}}return!1}function woe(e,t){var n=[e];for(var r in t){var i=typeof t[r]=="object"?JSON.stringify(t[r],null,2):t[r];typeof i<"u"&&n.push(r+": "+i)}return n.join(`
`)}var dEe=function(e){i_t(t,e);function t(n,r,i,o,s){var a=this.constructor,u=e.call(this,woe(n,{name:r,index:i,operation:o,tree:s}))||this;return u.name=r,u.index=i,u.operation=o,u.tree=s,Object.setPrototypeOf(u,a.prototype),u.message=woe(n,{name:r,index:i,operation:o,tree:s}),u}return t}(Error),ii=dEe,s_t=au,c1={add:function(e,t,n){return e[t]=this.value,{newDocument:n}},remove:function(e,t,n){var r=e[t];return delete e[t],{newDocument:n,removed:r}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:function(e,t,n){var r=KN(n,this.path);r&&(r=au(r));var i=y0(n,{op:"remove",path:this.from}).removed;return y0(n,{op:"add",path:this.path,value:i}),{newDocument:n,removed:r}},copy:function(e,t,n){var r=KN(n,this.from);return y0(n,{op:"add",path:this.path,value:au(r)}),{newDocument:n}},test:function(e,t,n){return{newDocument:n,test:hS(e[t],this.value)}},_get:function(e,t,n){return this.value=e[t],{newDocument:n}}},a_t={add:function(e,t,n){return P9(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:n,index:t}},remove:function(e,t,n){var r=e.splice(t,1);return{newDocument:n,removed:r[0]}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:c1.move,copy:c1.copy,test:c1.test,_get:c1._get};function KN(e,t){if(t=="")return e;var n={op:"_get",path:t};return y0(e,n),n.value}function y0(e,t,n,r,i,o){if(n===void 0&&(n=!1),r===void 0&&(r=!0),i===void 0&&(i=!0),o===void 0&&(o=0),n&&(typeof n=="function"?n(t,0,e,t.path):XN(t,0)),t.path===""){var s={newDocument:e};if(t.op==="add")return s.newDocument=t.value,s;if(t.op==="replace")return s.newDocument=t.value,s.removed=e,s;if(t.op==="move"||t.op==="copy")return s.newDocument=KN(e,t.from),t.op==="move"&&(s.removed=e),s;if(t.op==="test"){if(s.test=hS(e,t.value),s.test===!1)throw new ii("Test operation failed","TEST_OPERATION_FAILED",o,t,e);return s.newDocument=e,s}else{if(t.op==="remove")return s.removed=e,s.newDocument=null,s;if(t.op==="_get")return t.value=e,s;if(n)throw new ii("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",o,t,e);return s}}else{r||(e=au(e));var a=t.path||"",u=a.split("/"),l=e,c=1,f=u.length,d=void 0,h=void 0,p=void 0;for(typeof n=="function"?p=n:p=XN;;){if(h=u[c],h&&h.indexOf("~")!=-1&&(h=fEe(h)),i&&(h=="__proto__"||h=="prototype"&&c>0&&u[c-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&d===void 0&&(l[h]===void 0?d=u.slice(0,c).join("/"):c==f-1&&(d=t.path),d!==void 0&&p(t,0,e,d)),c++,Array.isArray(l)){if(h==="-")h=l.length;else{if(n&&!P9(h))throw new ii("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",o,t,e);P9(h)&&(h=~~h)}if(c>=f){if(n&&t.op==="add"&&h>l.length)throw new ii("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",o,t,e);var s=a_t[t.op].call(t,l,h,e);if(s.test===!1)throw new ii("Test operation failed","TEST_OPERATION_FAILED",o,t,e);return s}}else if(c>=f){var s=c1[t.op].call(t,l,h,e);if(s.test===!1)throw new ii("Test operation failed","TEST_OPERATION_FAILED",o,t,e);return s}if(l=l[h],n&&c<f&&(!l||typeof l!="object"))throw new ii("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",o,t,e)}}}function y$(e,t,n,r,i){if(r===void 0&&(r=!0),i===void 0&&(i=!0),n&&!Array.isArray(t))throw new ii("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");r||(e=au(e));for(var o=new Array(t.length),s=0,a=t.length;s<a;s++)o[s]=y0(e,t[s],n,!0,i,s),e=o[s].newDocument;return o.newDocument=e,o}function u_t(e,t,n){var r=y0(e,t);if(r.test===!1)throw new ii("Test operation failed","TEST_OPERATION_FAILED",n,t,e);return r.newDocument}function XN(e,t,n,r){if(typeof e!="object"||e===null||Array.isArray(e))throw new ii("Operation is not an object","OPERATION_NOT_AN_OBJECT",t,e,n);if(c1[e.op]){if(typeof e.path!="string")throw new ii("Operation `path` property is not a string","OPERATION_PATH_INVALID",t,e,n);if(e.path.indexOf("/")!==0&&e.path.length>0)throw new ii('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",t,e,n);if((e.op==="move"||e.op==="copy")&&typeof e.from!="string")throw new ii("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&e.value===void 0)throw new ii("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&D9(e.value))throw new ii("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",t,e,n);if(n){if(e.op=="add"){var i=e.path.split("/").length,o=r.split("/").length;if(i!==o+1&&i!==o)throw new ii("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",t,e,n)}else if(e.op==="replace"||e.op==="remove"||e.op==="_get"){if(e.path!==r)throw new ii("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",t,e,n)}else if(e.op==="move"||e.op==="copy"){var s={op:"_get",path:e.from,value:void 0},a=hEe([s],n);if(a&&a.name==="OPERATION_PATH_UNRESOLVABLE")throw new ii("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",t,e,n)}}}else throw new ii("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",t,e,n)}function hEe(e,t,n){try{if(!Array.isArray(e))throw new ii("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)y$(au(t),au(e),n||!0);else{n=n||XN;for(var r=0;r<e.length;r++)n(e[r],r,t,void 0)}}catch(i){if(i instanceof ii)return i;throw i}}function hS(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){var n=Array.isArray(e),r=Array.isArray(t),i,o,s;if(n&&r){if(o=e.length,o!=t.length)return!1;for(i=o;i--!==0;)if(!hS(e[i],t[i]))return!1;return!0}if(n!=r)return!1;var a=Object.keys(e);if(o=a.length,o!==Object.keys(t).length)return!1;for(i=o;i--!==0;)if(!t.hasOwnProperty(a[i]))return!1;for(i=o;i--!==0;)if(s=a[i],!hS(e[s],t[s]))return!1;return!0}return e!==e&&t!==t}const l_t=Object.freeze(Object.defineProperty({__proto__:null,JsonPatchError:ii,_areEquals:hS,applyOperation:y0,applyPatch:y$,applyReducer:u_t,deepClone:s_t,getValueByPointer:KN,validate:hEe,validator:XN},Symbol.toStringTag,{value:"Module"}));/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2021 Joachim Wester
 * MIT license
 */var jq=new WeakMap,c_t=function(){function e(t){this.observers=new Map,this.obj=t}return e}(),f_t=function(){function e(t,n){this.callback=t,this.observer=n}return e}();function d_t(e){return jq.get(e)}function h_t(e,t){return e.observers.get(t)}function p_t(e,t){e.observers.delete(t.callback)}function m_t(e,t){t.unobserve()}function g_t(e,t){var n=[],r,i=d_t(e);if(!i)i=new c_t(e),jq.set(e,i);else{var o=h_t(i,t);r=o&&o.observer}if(r)return r;if(r={},i.value=au(e),t){r.callback=t,r.next=null;var s=function(){O9(r)},a=function(){clearTimeout(r.next),r.next=setTimeout(s)};typeof window<"u"&&(window.addEventListener("mouseup",a),window.addEventListener("keyup",a),window.addEventListener("mousedown",a),window.addEventListener("keydown",a),window.addEventListener("change",a))}return r.patches=n,r.object=e,r.unobserve=function(){O9(r),clearTimeout(r.next),p_t(i,r),typeof window<"u"&&(window.removeEventListener("mouseup",a),window.removeEventListener("keyup",a),window.removeEventListener("mousedown",a),window.removeEventListener("keydown",a),window.removeEventListener("change",a))},i.observers.set(t,new f_t(t,r)),r}function O9(e,t){t===void 0&&(t=!1);var n=jq.get(e.object);Bq(n.value,e.object,e.patches,"",t),e.patches.length&&y$(n.value,e.patches);var r=e.patches;return r.length>0&&(e.patches=[],e.callback&&e.callback(r)),r}function Bq(e,t,n,r,i){if(t!==e){typeof t.toJSON=="function"&&(t=t.toJSON());for(var o=N9(t),s=N9(e),a=!1,u=s.length-1;u>=0;u--){var l=s[u],c=e[l];if(R9(t,l)&&!(t[l]===void 0&&c!==void 0&&Array.isArray(t)===!1)){var f=t[l];typeof c=="object"&&c!=null&&typeof f=="object"&&f!=null&&Array.isArray(c)===Array.isArray(f)?Bq(c,f,n,r+"/"+Mg(l),i):c!==f&&(i&&n.push({op:"test",path:r+"/"+Mg(l),value:au(c)}),n.push({op:"replace",path:r+"/"+Mg(l),value:au(f)}))}else Array.isArray(e)===Array.isArray(t)?(i&&n.push({op:"test",path:r+"/"+Mg(l),value:au(c)}),n.push({op:"remove",path:r+"/"+Mg(l)}),a=!0):(i&&n.push({op:"test",path:r,value:e}),n.push({op:"replace",path:r,value:t}))}if(!(!a&&o.length==s.length))for(var u=0;u<o.length;u++){var l=o[u];!R9(e,l)&&t[l]!==void 0&&n.push({op:"add",path:r+"/"+Mg(l),value:au(t[l])})}}}function y_t(e,t,n){n===void 0&&(n=!1);var r=[];return Bq(e,t,r,"",n),r}const v_t=Object.freeze(Object.defineProperty({__proto__:null,compare:y_t,generate:O9,observe:g_t,unobserve:m_t},Symbol.toStringTag,{value:"Module"}));Object.assign({},l_t,v_t,{JsonPatchError:dEe,deepClone:au,escapePathComponent:Mg,unescapePathComponent:fEe});var b_t=/("(?:[^\\"]|\\.)*")|[:,]/g,__t=function(t,n){var r,i,o;return n=n||{},r=JSON.stringify([1],void 0,n.indent===void 0?2:n.indent).slice(2,-3),i=r===""?1/0:n.maxLength===void 0?80:n.maxLength,o=n.replacer,function s(a,u,l){var c,f,d,h,p,m,g,y,v,_,w,E;if(a&&typeof a.toJSON=="function"&&(a=a.toJSON()),w=JSON.stringify(a,o),w===void 0)return w;if(g=i-u.length-l,w.length<=g&&(v=w.replace(b_t,function(S,T){return T||S+" "}),v.length<=g))return v;if(o!=null&&(a=JSON.parse(w),o=void 0),typeof a=="object"&&a!==null){if(y=u+r,d=[],f=0,Array.isArray(a))for(_="[",c="]",g=a.length;f<g;f++)d.push(s(a[f],y,f===g-1?0:1)||"null");else for(_="{",c="}",m=Object.keys(a),g=m.length;f<g;f++)h=m[f],p=JSON.stringify(h)+": ",E=s(a[h],y,p.length+(f===g-1?0:1)),E!==void 0&&d.push(p+E);if(d.length>0)return[_,r+d.join(`,
`+y),c].join(`
`+u)}return w}(t,"",0)};const Y6=ku(__t);function Ha(e,t,n){return e.fields=t||[],e.fname=n,e}function ci(e){return e==null?null:e.fname}function ps(e){return e==null?null:e.fields}function pEe(e){return e.length===1?w_t(e[0]):E_t(e)}const w_t=e=>function(t){return t[e]},E_t=e=>{const t=e.length;return function(n){for(let r=0;r<t;++r)n=n[e[r]];return n}};function De(e){throw Error(e)}function Hf(e){const t=[],n=e.length;let r=null,i=0,o="",s,a,u;e=e+"";function l(){t.push(o+e.substring(s,a)),o="",s=a+1}for(s=a=0;a<n;++a)if(u=e[a],u==="\\")o+=e.substring(s,a++),s=a;else if(u===r)l(),r=null,i=-1;else{if(r)continue;s===i&&u==='"'||s===i&&u==="'"?(s=a+1,r=u):u==="."&&!i?a>s?l():s=a+1:u==="["?(a>s&&l(),i=s=a+1):u==="]"&&(i||De("Access path missing open bracket: "+e),i>0&&l(),i=0,s=a+1)}return i&&De("Access path missing closing bracket: "+e),r&&De("Access path missing closing quote: "+e),a>s&&(a++,l()),t}function ul(e,t,n){const r=Hf(e);return e=r.length===1?r[0]:e,Ha((n&&n.get||pEe)(r),[e],t||e)}const FC=ul("id"),_s=Ha(e=>e,[],"identity"),fp=Ha(()=>0,[],"zero"),Y_=Ha(()=>1,[],"one"),ll=Ha(()=>!0,[],"true"),qh=Ha(()=>!1,[],"false");function x_t(e,t,n){const r=[t].concat([].slice.call(n));console[e].apply(console,r)}const mEe=0,Uq=1,zq=2,gEe=3,yEe=4;function Vq(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:x_t,r=e||mEe;return{level(i){return arguments.length?(r=+i,this):r},error(){return r>=Uq&&n(t||"error","ERROR",arguments),this},warn(){return r>=zq&&n(t||"warn","WARN",arguments),this},info(){return r>=gEe&&n(t||"log","INFO",arguments),this},debug(){return r>=yEe&&n(t||"log","DEBUG",arguments),this}}}var Le=Array.isArray;function ht(e){return e===Object(e)}const Eoe=e=>e!=="__proto__";function K_(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((r,i)=>{for(const o in i)if(o==="signals")r.signals=T_t(r.signals,i.signals);else{const s=o==="legend"?{layout:1}:o==="style"?!0:null;X_(r,o,i[o],s)}return r},{})}function X_(e,t,n,r){if(!Eoe(t))return;let i,o;if(ht(n)&&!Le(n)){o=ht(e[t])?e[t]:e[t]={};for(i in n)r&&(r===!0||r[i])?X_(o,i,n[i]):Eoe(i)&&(o[i]=n[i])}else e[t]=n}function T_t(e,t){if(e==null)return t;const n={},r=[];function i(o){n[o.name]||(n[o.name]=1,r.push(o))}return t.forEach(i),e.forEach(i),r}function In(e){return e[e.length-1]}function fs(e){return e==null||e===""?null:+e}const vEe=e=>t=>e*Math.exp(t),bEe=e=>t=>Math.log(e*t),_Ee=e=>t=>Math.sign(t)*Math.log1p(Math.abs(t/e)),wEe=e=>t=>Math.sign(t)*Math.expm1(Math.abs(t))*e,QN=e=>t=>t<0?-Math.pow(-t,e):Math.pow(t,e);function v$(e,t,n,r){const i=n(e[0]),o=n(In(e)),s=(o-i)*t;return[r(i-s),r(o-s)]}function EEe(e,t){return v$(e,t,fs,_s)}function xEe(e,t){var n=Math.sign(e[0]);return v$(e,t,bEe(n),vEe(n))}function TEe(e,t,n){return v$(e,t,QN(n),QN(1/n))}function SEe(e,t,n){return v$(e,t,_Ee(n),wEe(n))}function b$(e,t,n,r,i){const o=r(e[0]),s=r(In(e)),a=t!=null?r(t):(o+s)/2;return[i(a+(o-a)*n),i(a+(s-a)*n)]}function Hq(e,t,n){return b$(e,t,n,fs,_s)}function qq(e,t,n){const r=Math.sign(e[0]);return b$(e,t,n,bEe(r),vEe(r))}function JN(e,t,n,r){return b$(e,t,n,QN(r),QN(1/r))}function Wq(e,t,n,r){return b$(e,t,n,_Ee(r),wEe(r))}function CEe(e){return 1+~~(new Date(e).getMonth()/3)}function AEe(e){return 1+~~(new Date(e).getUTCMonth()/3)}function ct(e){return e!=null?Le(e)?e:[e]:[]}function kEe(e,t,n){let r=e[0],i=e[1],o;return i<r&&(o=i,i=r,r=o),o=i-r,o>=n-t?[t,n]:[r=Math.min(Math.max(r,t),n-o),r+o]}function nn(e){return typeof e=="function"}const S_t="descending";function Gq(e,t,n){n=n||{},t=ct(t)||[];const r=[],i=[],o={},s=n.comparator||C_t;return ct(e).forEach((a,u)=>{a!=null&&(r.push(t[u]===S_t?-1:1),i.push(a=nn(a)?a:ul(a,null,n)),(ps(a)||[]).forEach(l=>o[l]=1))}),i.length===0?null:Ha(s(i,r),Object.keys(o))}const _$=(e,t)=>(e<t||e==null)&&t!=null?-1:(e>t||t==null)&&e!=null?1:(t=t instanceof Date?+t:t,(e=e instanceof Date?+e:e)!==e&&t===t?-1:t!==t&&e===e?1:0),C_t=(e,t)=>e.length===1?A_t(e[0],t[0]):k_t(e,t,e.length),A_t=(e,t)=>function(n,r){return _$(e(n),e(r))*t},k_t=(e,t,n)=>(t.push(0),function(r,i){let o,s=0,a=-1;for(;s===0&&++a<n;)o=e[a],s=_$(o(r),o(i));return s*t[a]});function ws(e){return nn(e)?e:()=>e}function Yq(e,t){let n;return r=>{n&&clearTimeout(n),n=setTimeout(()=>(t(r),n=null),e)}}function tn(e){for(let t,n,r=1,i=arguments.length;r<i;++r){t=arguments[r];for(n in t)e[n]=t[n]}return e}function Sf(e,t){let n=0,r,i,o,s;if(e&&(r=e.length))if(t==null){for(i=e[n];n<r&&(i==null||i!==i);i=e[++n]);for(o=s=i;n<r;++n)i=e[n],i!=null&&(i<o&&(o=i),i>s&&(s=i))}else{for(i=t(e[n]);n<r&&(i==null||i!==i);i=t(e[++n]));for(o=s=i;n<r;++n)i=t(e[n]),i!=null&&(i<o&&(o=i),i>s&&(s=i))}return[o,s]}function IEe(e,t){const n=e.length;let r=-1,i,o,s,a,u;if(t==null){for(;++r<n;)if(o=e[r],o!=null&&o>=o){i=s=o;break}if(r===n)return[-1,-1];for(a=u=r;++r<n;)o=e[r],o!=null&&(i>o&&(i=o,a=r),s<o&&(s=o,u=r))}else{for(;++r<n;)if(o=t(e[r],r,e),o!=null&&o>=o){i=s=o;break}if(r===n)return[-1,-1];for(a=u=r;++r<n;)o=t(e[r],r,e),o!=null&&(i>o&&(i=o,a=r),s<o&&(s=o,u=r))}return[a,u]}const I_t=Object.prototype.hasOwnProperty;function $t(e,t){return I_t.call(e,t)}const q2={};function Q_(e){let t={},n;function r(o){return $t(t,o)&&t[o]!==q2}const i={size:0,empty:0,object:t,has:r,get(o){return r(o)?t[o]:void 0},set(o,s){return r(o)||(++i.size,t[o]===q2&&--i.empty),t[o]=s,this},delete(o){return r(o)&&(--i.size,++i.empty,t[o]=q2),this},clear(){i.size=i.empty=0,i.object=t={}},test(o){return arguments.length?(n=o,i):n},clean(){const o={};let s=0;for(const a in t){const u=t[a];u!==q2&&(!n||!n(u))&&(o[a]=u,++s)}i.size=s,i.empty=0,i.object=t=o}};return e&&Object.keys(e).forEach(o=>{i.set(o,e[o])}),i}function REe(e,t,n,r,i,o){if(!n&&n!==0)return o;const s=+n;let a=e[0],u=In(e),l;u<a&&(l=a,a=u,u=l),l=Math.abs(t-a);const c=Math.abs(u-t);return l<c&&l<=s?r:c<=s?i:o}function at(e,t,n){const r=e.prototype=Object.create(t.prototype);return Object.defineProperty(r,"constructor",{value:e,writable:!0,enumerable:!0,configurable:!0}),tn(r,n)}function f1(e,t,n,r){let i=t[0],o=t[t.length-1],s;return i>o&&(s=i,i=o,o=s),n=n===void 0||n,r=r===void 0||r,(n?i<=e:i<e)&&(r?e<=o:e<o)}function Km(e){return typeof e=="boolean"}function Wp(e){return Object.prototype.toString.call(e)==="[object Date]"}function NEe(e){return e&&nn(e[Symbol.iterator])}function jn(e){return typeof e=="number"}function PEe(e){return Object.prototype.toString.call(e)==="[object RegExp]"}function ft(e){return typeof e=="string"}function Kq(e,t,n){e&&(e=t?ct(e).map(a=>a.replace(/\\(.)/g,"$1")):ct(e));const r=e&&e.length,i=n&&n.get||pEe,o=a=>i(t?[a]:Hf(a));let s;if(!r)s=function(){return""};else if(r===1){const a=o(e[0]);s=function(u){return""+a(u)}}else{const a=e.map(o);s=function(u){let l=""+a[0](u),c=0;for(;++c<r;)l+="|"+a[c](u);return l}}return Ha(s,e,"key")}function DEe(e,t){const n=e[0],r=In(e),i=+t;return i?i===1?r:n+i*(r-n):n}const R_t=1e4;function OEe(e){e=+e||R_t;let t,n,r;const i=()=>{t={},n={},r=0},o=(s,a)=>(++r>e&&(n=t,t={},r=1),t[s]=a);return i(),{clear:i,has:s=>$t(t,s)||$t(n,s),get:s=>$t(t,s)?t[s]:$t(n,s)?o(s,n[s]):void 0,set:(s,a)=>$t(t,s)?t[s]=a:o(s,a)}}function $Ee(e,t,n,r){const i=t.length,o=n.length;if(!o)return t;if(!i)return n;const s=r||new t.constructor(i+o);let a=0,u=0,l=0;for(;a<i&&u<o;++l)s[l]=e(t[a],n[u])>0?n[u++]:t[a++];for(;a<i;++a,++l)s[l]=t[a];for(;u<o;++u,++l)s[l]=n[u];return s}function zE(e,t){let n="";for(;--t>=0;)n+=e;return n}function MEe(e,t,n,r){const i=n||" ",o=e+"",s=t-o.length;return s<=0?o:r==="left"?zE(i,s)+o:r==="center"?zE(i,~~(s/2))+o+zE(i,Math.ceil(s/2)):o+zE(i,s)}function jC(e){return e&&In(e)-e[0]||0}function et(e){return Le(e)?"["+e.map(et)+"]":ht(e)||ft(e)?JSON.stringify(e).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):e}function Xq(e){return e==null||e===""?null:!e||e==="false"||e==="0"?!1:!!e}const N_t=e=>jn(e)||Wp(e)?e:Date.parse(e);function Qq(e,t){return t=t||N_t,e==null||e===""?null:t(e)}function Jq(e){return e==null||e===""?null:e+""}function cc(e){const t={},n=e.length;for(let r=0;r<n;++r)t[e[r]]=!0;return t}function LEe(e,t,n,r){const i=r??"",o=e+"",s=o.length,a=Math.max(0,t-i.length);return s<=t?o:n==="left"?i+o.slice(s-a):n==="center"?o.slice(0,Math.ceil(a/2))+i+o.slice(s-~~(a/2)):o.slice(0,a)+i}function Jh(e,t,n){if(e)if(t){const r=e.length;for(let i=0;i<r;++i){const o=t(e[i]);o&&n(o,i,e)}}else e.forEach(n)}function P_t(e){return e}function D_t(e){if(e==null)return P_t;var t,n,r=e.scale[0],i=e.scale[1],o=e.translate[0],s=e.translate[1];return function(a,u){u||(t=n=0);var l=2,c=a.length,f=new Array(c);for(f[0]=(t+=a[0])*r+o,f[1]=(n+=a[1])*i+s;l<c;)f[l]=a[l],++l;return f}}function O_t(e,t){for(var n,r=e.length,i=r-t;i<--r;)n=e[i],e[i++]=e[r],e[r]=n}function $_t(e,t){return typeof t=="string"&&(t=e.objects[t]),t.type==="GeometryCollection"?{type:"FeatureCollection",features:t.geometries.map(function(n){return xoe(e,n)})}:xoe(e,t)}function xoe(e,t){var n=t.id,r=t.bbox,i=t.properties==null?{}:t.properties,o=FEe(e,t);return n==null&&r==null?{type:"Feature",properties:i,geometry:o}:r==null?{type:"Feature",id:n,properties:i,geometry:o}:{type:"Feature",id:n,bbox:r,properties:i,geometry:o}}function FEe(e,t){var n=D_t(e.transform),r=e.arcs;function i(c,f){f.length&&f.pop();for(var d=r[c<0?~c:c],h=0,p=d.length;h<p;++h)f.push(n(d[h],h));c<0&&O_t(f,p)}function o(c){return n(c)}function s(c){for(var f=[],d=0,h=c.length;d<h;++d)i(c[d],f);return f.length<2&&f.push(f[0]),f}function a(c){for(var f=s(c);f.length<4;)f.push(f[0]);return f}function u(c){return c.map(a)}function l(c){var f=c.type,d;switch(f){case"GeometryCollection":return{type:f,geometries:c.geometries.map(l)};case"Point":d=o(c.coordinates);break;case"MultiPoint":d=c.coordinates.map(o);break;case"LineString":d=s(c.arcs);break;case"MultiLineString":d=c.arcs.map(s);break;case"Polygon":d=u(c.arcs);break;case"MultiPolygon":d=c.arcs.map(u);break;default:return null}return{type:f,coordinates:d}}return l(t)}function M_t(e,t){var n={},r={},i={},o=[],s=-1;t.forEach(function(l,c){var f=e.arcs[l<0?~l:l],d;f.length<3&&!f[1][0]&&!f[1][1]&&(d=t[++s],t[s]=l,t[c]=d)}),t.forEach(function(l){var c=a(l),f=c[0],d=c[1],h,p;if(h=i[f])if(delete i[h.end],h.push(l),h.end=d,p=r[d]){delete r[p.start];var m=p===h?h:h.concat(p);r[m.start=h.start]=i[m.end=p.end]=m}else r[h.start]=i[h.end]=h;else if(h=r[d])if(delete r[h.start],h.unshift(l),h.start=f,p=i[f]){delete i[p.end];var g=p===h?h:p.concat(h);r[g.start=p.start]=i[g.end=h.end]=g}else r[h.start]=i[h.end]=h;else h=[l],r[h.start=f]=i[h.end=d]=h});function a(l){var c=e.arcs[l<0?~l:l],f=c[0],d;return e.transform?(d=[0,0],c.forEach(function(h){d[0]+=h[0],d[1]+=h[1]})):d=c[c.length-1],l<0?[d,f]:[f,d]}function u(l,c){for(var f in l){var d=l[f];delete c[d.start],delete d.start,delete d.end,d.forEach(function(h){n[h<0?~h:h]=1}),o.push(d)}}return u(i,r),u(r,i),t.forEach(function(l){n[l<0?~l:l]||o.push([l])}),o}function L_t(e){return FEe(e,F_t.apply(this,arguments))}function F_t(e,t,n){var r,i,o;if(arguments.length>1)r=j_t(e,t,n);else for(i=0,r=new Array(o=e.arcs.length);i<o;++i)r[i]=i;return{type:"MultiLineString",arcs:M_t(e,r)}}function j_t(e,t,n){var r=[],i=[],o;function s(f){var d=f<0?~f:f;(i[d]||(i[d]=[])).push({i:f,g:o})}function a(f){f.forEach(s)}function u(f){f.forEach(a)}function l(f){f.forEach(u)}function c(f){switch(o=f,f.type){case"GeometryCollection":f.geometries.forEach(c);break;case"LineString":a(f.arcs);break;case"MultiLineString":case"Polygon":u(f.arcs);break;case"MultiPolygon":l(f.arcs);break}}return c(t),i.forEach(n==null?function(f){r.push(f[0].i)}:function(f){n(f[0].g,f[f.length-1].g)&&r.push(f[0].i)}),r}const Fo="year",ja="quarter",ms="month",Ui="week",Ba="date",cs="day",Cf="dayofyear",xu="hours",Tu="minutes",cl="seconds",fc="milliseconds",Zq=[Fo,ja,ms,Ui,Ba,cs,Cf,xu,Tu,cl,fc],K6=Zq.reduce((e,t,n)=>(e[t]=1+n,e),{});function eW(e){const t=ct(e).slice(),n={};return t.length||De("Missing time unit."),t.forEach(i=>{$t(K6,i)?n[i]=1:De(`Invalid time unit: ${i}.`)}),(n[Ui]||n[cs]?1:0)+(n[ja]||n[ms]||n[Ba]?1:0)+(n[Cf]?1:0)>1&&De(`Incompatible time units: ${e}`),t.sort((i,o)=>K6[i]-K6[o]),t}const B_t={[Fo]:"%Y ",[ja]:"Q%q ",[ms]:"%b ",[Ba]:"%d ",[Ui]:"W%U ",[cs]:"%a ",[Cf]:"%j ",[xu]:"%H:00",[Tu]:"00:%M",[cl]:":%S",[fc]:".%L",[`${Fo}-${ms}`]:"%Y-%m ",[`${Fo}-${ms}-${Ba}`]:"%Y-%m-%d ",[`${xu}-${Tu}`]:"%H:%M"};function jEe(e,t){const n=tn({},B_t,t),r=eW(e),i=r.length;let o="",s=0,a,u;for(s=0;s<i;)for(a=r.length;a>s;--a)if(u=r.slice(s,a).join("-"),n[u]!=null){o+=n[u],s=a;break}return o.trim()}const qg=new Date;function tW(e){return qg.setFullYear(e),qg.setMonth(0),qg.setDate(1),qg.setHours(0,0,0,0),qg}function BEe(e){return zEe(new Date(e))}function UEe(e){return $9(new Date(e))}function zEe(e){return jd.count(tW(e.getFullYear())-1,e)}function $9(e){return P_.count(tW(e.getFullYear())-1,e)}function M9(e){return tW(e).getDay()}function U_t(e,t,n,r,i,o,s){if(0<=e&&e<100){const a=new Date(-1,t,n,r,i,o,s);return a.setFullYear(e),a}return new Date(e,t,n,r,i,o,s)}function VEe(e){return qEe(new Date(e))}function HEe(e){return L9(new Date(e))}function qEe(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return jp.count(t-1,e)}function L9(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return D_.count(t-1,e)}function F9(e){return qg.setTime(Date.UTC(e,0,1)),qg.getUTCDay()}function z_t(e,t,n,r,i,o,s){if(0<=e&&e<100){const a=new Date(Date.UTC(-1,t,n,r,i,o,s));return a.setUTCFullYear(n.y),a}return new Date(Date.UTC(e,t,n,r,i,o,s))}function WEe(e,t,n,r,i){const o=t||1,s=In(e),a=(y,v,_)=>(_=_||y,V_t(n[_],r[_],y===s&&o,v)),u=new Date,l=cc(e),c=l[Fo]?a(Fo):ws(2012),f=l[ms]?a(ms):l[ja]?a(ja):fp,d=l[Ui]&&l[cs]?a(cs,1,Ui+cs):l[Ui]?a(Ui,1):l[cs]?a(cs,1):l[Ba]?a(Ba,1):l[Cf]?a(Cf,1):Y_,h=l[xu]?a(xu):fp,p=l[Tu]?a(Tu):fp,m=l[cl]?a(cl):fp,g=l[fc]?a(fc):fp;return function(y){u.setTime(+y);const v=c(u);return i(v,f(u),d(u,v),h(u),p(u),m(u),g(u))}}function V_t(e,t,n,r){const i=n<=1?e:r?(o,s)=>r+n*Math.floor((e(o,s)-r)/n):(o,s)=>n*Math.floor(e(o,s)/n);return t?(o,s)=>t(i(o,s),s):i}function Ob(e,t,n){return t+e*7-(n+6)%7}const H_t={[Fo]:e=>e.getFullYear(),[ja]:e=>Math.floor(e.getMonth()/3),[ms]:e=>e.getMonth(),[Ba]:e=>e.getDate(),[xu]:e=>e.getHours(),[Tu]:e=>e.getMinutes(),[cl]:e=>e.getSeconds(),[fc]:e=>e.getMilliseconds(),[Cf]:e=>zEe(e),[Ui]:e=>$9(e),[Ui+cs]:(e,t)=>Ob($9(e),e.getDay(),M9(t)),[cs]:(e,t)=>Ob(1,e.getDay(),M9(t))},q_t={[ja]:e=>3*e,[Ui]:(e,t)=>Ob(e,0,M9(t))};function GEe(e,t){return WEe(e,t||1,H_t,q_t,U_t)}const W_t={[Fo]:e=>e.getUTCFullYear(),[ja]:e=>Math.floor(e.getUTCMonth()/3),[ms]:e=>e.getUTCMonth(),[Ba]:e=>e.getUTCDate(),[xu]:e=>e.getUTCHours(),[Tu]:e=>e.getUTCMinutes(),[cl]:e=>e.getUTCSeconds(),[fc]:e=>e.getUTCMilliseconds(),[Cf]:e=>qEe(e),[Ui]:e=>L9(e),[cs]:(e,t)=>Ob(1,e.getUTCDay(),F9(t)),[Ui+cs]:(e,t)=>Ob(L9(e),e.getUTCDay(),F9(t))},G_t={[ja]:e=>3*e,[Ui]:(e,t)=>Ob(e,0,F9(t))};function YEe(e,t){return WEe(e,t||1,W_t,G_t,z_t)}const Y_t={[Fo]:_f,[ja]:VT.every(3),[ms]:VT,[Ui]:P_,[Ba]:jd,[cs]:jd,[Cf]:jd,[xu]:xO,[Tu]:wO,[cl]:kd,[fc]:_b},K_t={[Fo]:wf,[ja]:HT.every(3),[ms]:HT,[Ui]:D_,[Ba]:jp,[cs]:jp,[Cf]:jp,[xu]:TO,[Tu]:EO,[cl]:kd,[fc]:_b};function J_(e){return Y_t[e]}function Z_(e){return K_t[e]}function KEe(e,t,n){return e?e.offset(t,n):void 0}function XEe(e,t,n){return KEe(J_(e),t,n)}function QEe(e,t,n){return KEe(Z_(e),t,n)}function JEe(e,t,n,r){return e?e.range(t,n,r):void 0}function ZEe(e,t,n,r){return JEe(J_(e),t,n,r)}function exe(e,t,n,r){return JEe(Z_(e),t,n,r)}const VE=1e3,HE=VE*60,qE=HE*60,w$=qE*24,X_t=w$*7,Toe=w$*30,j9=w$*365,txe=[Fo,ms,Ba,xu,Tu,cl,fc],WE=txe.slice(0,-1),GE=WE.slice(0,-1),YE=GE.slice(0,-1),Q_t=YE.slice(0,-1),J_t=[Fo,Ui],Soe=[Fo,ms],nxe=[Fo],Kw=[[WE,1,VE],[WE,5,5*VE],[WE,15,15*VE],[WE,30,30*VE],[GE,1,HE],[GE,5,5*HE],[GE,15,15*HE],[GE,30,30*HE],[YE,1,qE],[YE,3,3*qE],[YE,6,6*qE],[YE,12,12*qE],[Q_t,1,w$],[J_t,1,X_t],[Soe,1,Toe],[Soe,3,3*Toe],[nxe,1,j9]];function rxe(e){const t=e.extent,n=e.maxbins||40,r=Math.abs(jC(t))/n;let i=k_(a=>a[2]).right(Kw,r),o,s;return i===Kw.length?(o=nxe,s=am(t[0]/j9,t[1]/j9,n)):i?(i=Kw[r/Kw[i-1][2]<Kw[i][2]/r?i-1:i],o=i[0],s=i[1]):(o=txe,s=Math.max(am(t[0],t[1],n),1)),{units:o,step:s}}function KE(e){const t={};return n=>t[n]||(t[n]=e(n))}function Z_t(e,t){return n=>{const r=e(n),i=r.indexOf(t);if(i<0)return r;let o=ewt(r,i);const s=o<r.length?r.slice(o):"";for(;--o>i;)if(r[o]!=="0"){++o;break}return r.slice(0,o)+s}}function ewt(e,t){let n=e.lastIndexOf("e"),r;if(n>0)return n;for(n=e.length;--n>t;)if(r=e.charCodeAt(n),r>=48&&r<=57)return n+1}function ixe(e){const t=KE(e.format),n=e.formatPrefix;return{format:t,formatPrefix:n,formatFloat(r){const i=M0(r||",");if(i.precision==null){switch(i.precision=12,i.type){case"%":i.precision-=2;break;case"e":i.precision-=1;break}return Z_t(t(i),t(".1f")(1)[1])}else return t(i)},formatSpan(r,i,o,s){s=M0(s??",f");const a=am(r,i,o),u=Math.max(Math.abs(r),Math.abs(i));let l;if(s.precision==null)switch(s.type){case"s":return isNaN(l=J0e(a,u))||(s.precision=l),n(s,u);case"":case"e":case"g":case"p":case"r":{isNaN(l=Z0e(a,u))||(s.precision=l-(s.type==="e"));break}case"f":case"%":{isNaN(l=Q0e(a))||(s.precision=l-(s.type==="%")*2);break}}return t(s)}}}let B9;oxe();function oxe(){return B9=ixe({format:R_,formatPrefix:Zz})}function sxe(e){return ixe(X0e(e))}function ZN(e){return arguments.length?B9=sxe(e):B9}function Coe(e,t,n){n=n||{},ht(n)||De(`Invalid time multi-format specifier: ${n}`);const r=t(cl),i=t(Tu),o=t(xu),s=t(Ba),a=t(Ui),u=t(ms),l=t(ja),c=t(Fo),f=e(n[fc]||".%L"),d=e(n[cl]||":%S"),h=e(n[Tu]||"%I:%M"),p=e(n[xu]||"%I %p"),m=e(n[Ba]||n[cs]||"%a %d"),g=e(n[Ui]||"%b %d"),y=e(n[ms]||"%B"),v=e(n[ja]||"%B"),_=e(n[Fo]||"%Y");return w=>(r(w)<w?f:i(w)<w?d:o(w)<w?h:s(w)<w?p:u(w)<w?a(w)<w?m:g:c(w)<w?l(w)<w?y:v:_)(w)}function axe(e){const t=KE(e.format),n=KE(e.utcFormat);return{timeFormat:r=>ft(r)?t(r):Coe(t,J_,r),utcFormat:r=>ft(r)?n(r):Coe(n,Z_,r),timeParse:KE(e.parse),utcParse:KE(e.utcParse)}}let U9;uxe();function uxe(){return U9=axe({format:dV,parse:hV,utcFormat:O_,utcParse:dve})}function lxe(e){return axe(ave(e))}function pS(e){return arguments.length?U9=lxe(e):U9}const z9=(e,t)=>tn({},e,t);function cxe(e,t){const n=e?sxe(e):ZN(),r=t?lxe(t):pS();return z9(n,r)}function nW(e,t){const n=arguments.length;return n&&n!==2&&De("defaultLocale expects either zero or two arguments."),n?z9(ZN(e),pS(t)):z9(ZN(),pS())}function twt(){return oxe(),uxe(),nW()}const nwt=/^(data:|([A-Za-z]+:)?\/\/)/,rwt=/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp|file|data):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,iwt=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,Aoe="file://";function owt(e,t){return n=>({options:n||{},sanitize:awt,load:swt,fileAccess:!!t,file:uwt(t),http:cwt(e)})}async function swt(e,t){const n=await this.sanitize(e,t),r=n.href;return n.localFile?this.file(r):this.http(r,t)}async function awt(e,t){t=tn({},this.options,t);const n=this.fileAccess,r={href:null};let i,o,s;const a=rwt.test(e.replace(iwt,""));(e==null||typeof e!="string"||!a)&&De("Sanitize failure, invalid URI: "+et(e));const u=nwt.test(e);return(s=t.baseURL)&&!u&&(!e.startsWith("/")&&!s.endsWith("/")&&(e="/"+e),e=s+e),o=(i=e.startsWith(Aoe))||t.mode==="file"||t.mode!=="http"&&!u&&n,i?e=e.slice(Aoe.length):e.startsWith("//")&&(t.defaultProtocol==="file"?(e=e.slice(2),o=!0):e=(t.defaultProtocol||"http")+":"+e),Object.defineProperty(r,"localFile",{value:!!o}),r.href=e,t.target&&(r.target=t.target+""),t.rel&&(r.rel=t.rel+""),t.context==="image"&&t.crossOrigin&&(r.crossOrigin=t.crossOrigin+""),r}function uwt(e){return e?t=>new Promise((n,r)=>{e.readFile(t,(i,o)=>{i?r(i):n(o)})}):lwt}async function lwt(){De("No file system access.")}function cwt(e){return e?async function(t,n){const r=tn({},this.options.http,n),i=n&&n.response,o=await e(t,r);return o.ok?nn(o[i])?o[i]():o.text():De(o.status+""+o.statusText)}:fwt}async function fwt(){De("No HTTP fetch method available.")}const dwt=e=>e!=null&&e===e,hwt=e=>e==="true"||e==="false"||e===!0||e===!1,pwt=e=>!Number.isNaN(Date.parse(e)),fxe=e=>!Number.isNaN(+e)&&!(e instanceof Date),mwt=e=>fxe(e)&&Number.isInteger(+e),V9={boolean:Xq,integer:fs,number:fs,date:Qq,string:Jq,unknown:_s},W2=[hwt,mwt,fxe,pwt],gwt=["boolean","integer","number","date"];function dxe(e,t){if(!e||!e.length)return"unknown";const n=e.length,r=W2.length,i=W2.map((o,s)=>s+1);for(let o=0,s=0,a,u;o<n;++o)for(u=t?e[o][t]:e[o],a=0;a<r;++a)if(i[a]&&dwt(u)&&!W2[a](u)&&(i[a]=0,++s,s===W2.length))return"string";return gwt[i.reduce((o,s)=>o===0?s:o,0)-1]}function hxe(e,t){return t.reduce((n,r)=>(n[r]=dxe(e,r),n),{})}function koe(e){const t=function(n,r){const i={delimiter:e};return rW(n,r?tn(r,i):i)};return t.responseType="text",t}function rW(e,t){return t.header&&(e=t.header.map(et).join(t.delimiter)+`
`+e),W0e(t.delimiter).parse(e+"")}rW.responseType="text";function ywt(e){return typeof Buffer=="function"&&nn(Buffer.isBuffer)?Buffer.isBuffer(e):!1}function iW(e,t){const n=t&&t.property?ul(t.property):_s;return ht(e)&&!ywt(e)?vwt(n(e),t):n(JSON.parse(e))}iW.responseType="json";function vwt(e,t){return!Le(e)&&NEe(e)&&(e=[...e]),t&&t.copy?JSON.parse(JSON.stringify(e)):e}const bwt={interior:(e,t)=>e!==t,exterior:(e,t)=>e===t};function pxe(e,t){let n,r,i,o;return e=iW(e,t),t&&t.feature?(n=$_t,i=t.feature):t&&t.mesh?(n=L_t,i=t.mesh,o=bwt[t.filter]):De("Missing TopoJSON feature or mesh parameter."),r=(r=e.objects[i])?n(e,r,o):De("Invalid TopoJSON object: "+i),r&&r.features||[r]}pxe.responseType="json";const aI={dsv:rW,csv:koe(","),tsv:koe("	"),json:iW,topojson:pxe};function oW(e,t){return arguments.length>1?(aI[e]=t,this):$t(aI,e)?aI[e]:null}function mxe(e){const t=oW(e);return t&&t.responseType||"text"}function gxe(e,t,n,r){t=t||{};const i=oW(t.type||"json");return i||De("Unknown data format type: "+t.type),e=i(e,t),t.parse&&_wt(e,t.parse,n,r),$t(e,"columns")&&delete e.columns,e}function _wt(e,t,n,r){if(!e.length)return;const i=pS();n=n||i.timeParse,r=r||i.utcParse;let o=e.columns||Object.keys(e[0]),s,a,u,l,c,f;t==="auto"&&(t=hxe(e,o)),o=Object.keys(t);const d=o.map(h=>{const p=t[h];let m,g;if(p&&(p.startsWith("date:")||p.startsWith("utc:")))return m=p.split(/:(.+)?/,2),g=m[1],(g[0]==="'"&&g[g.length-1]==="'"||g[0]==='"'&&g[g.length-1]==='"')&&(g=g.slice(1,-1)),(m[0]==="utc"?r:n)(g);if(!V9[p])throw Error("Illegal format pattern: "+h+":"+p);return V9[p]});for(u=0,c=e.length,f=o.length;u<c;++u)for(s=e[u],l=0;l<f;++l)a=o[l],s[a]=d[l](s[a])}const E$=owt(typeof fetch<"u"&&fetch,null);function x$(e){const t=e||_s,n=[],r={};return n.add=i=>{const o=t(i);return r[o]||(r[o]=1,n.push(i)),n},n.remove=i=>{const o=t(i);if(r[o]){r[o]=0;const s=n.indexOf(i);s>=0&&n.splice(s,1)}return n},n}async function uI(e,t){try{await t(e)}catch(n){e.error(n)}}const yxe=Symbol("vega_id");let wwt=1;function T$(e){return!!(e&&Dt(e))}function Dt(e){return e[yxe]}function vxe(e,t){return e[yxe]=t,e}function Xn(e){const t=e===Object(e)?e:{data:e};return Dt(t)?t:vxe(t,wwt++)}function sW(e){return S$(e,Xn({}))}function S$(e,t){for(const n in e)t[n]=e[n];return t}function bxe(e,t){return vxe(t,Dt(e))}function zy(e,t){return e?t?(n,r)=>e(n,r)||Dt(t(n))-Dt(t(r)):(n,r)=>e(n,r)||Dt(n)-Dt(r):null}function _xe(e){return e&&e.constructor===Vy}function Vy(){const e=[],t=[],n=[],r=[],i=[];let o=null,s=!1;return{constructor:Vy,insert(a){const u=ct(a),l=u.length;for(let c=0;c<l;++c)e.push(u[c]);return this},remove(a){const u=nn(a)?r:t,l=ct(a),c=l.length;for(let f=0;f<c;++f)u.push(l[f]);return this},modify(a,u,l){const c={field:u,value:ws(l)};return nn(a)?(c.filter=a,i.push(c)):(c.tuple=a,n.push(c)),this},encode(a,u){return nn(a)?i.push({filter:a,field:u}):n.push({tuple:a,field:u}),this},clean(a){return o=a,this},reflow(){return s=!0,this},pulse(a,u){const l={},c={};let f,d,h,p,m,g;for(f=0,d=u.length;f<d;++f)l[Dt(u[f])]=1;for(f=0,d=t.length;f<d;++f)m=t[f],l[Dt(m)]=-1;for(f=0,d=r.length;f<d;++f)p=r[f],u.forEach(v=>{p(v)&&(l[Dt(v)]=-1)});for(f=0,d=e.length;f<d;++f)m=e[f],g=Dt(m),l[g]?l[g]=1:a.add.push(Xn(e[f]));for(f=0,d=u.length;f<d;++f)m=u[f],l[Dt(m)]<0&&a.rem.push(m);function y(v,_,w){w?v[_]=w(v):a.encode=_,s||(c[Dt(v)]=v)}for(f=0,d=n.length;f<d;++f)h=n[f],m=h.tuple,p=h.field,g=l[Dt(m)],g>0&&(y(m,p,h.value),a.modifies(p));for(f=0,d=i.length;f<d;++f)h=i[f],p=h.filter,u.forEach(v=>{p(v)&&l[Dt(v)]>0&&y(v,h.field,h.value)}),a.modifies(h.field);if(s)a.mod=t.length||r.length?u.filter(v=>l[Dt(v)]>0):u.slice();else for(g in c)a.mod.push(c[g]);return(o||o==null&&(t.length||r.length))&&a.clean(!0),a}}}const lI="_:mod:_";function C$(){Object.defineProperty(this,lI,{writable:!0,value:{}})}C$.prototype={set(e,t,n,r){const i=this,o=i[e],s=i[lI];return t!=null&&t>=0?(o[t]!==n||r)&&(o[t]=n,s[t+":"+e]=-1,s[e]=-1):(o!==n||r)&&(i[e]=n,s[e]=Le(n)?1+n.length:-1),i},modified(e,t){const n=this[lI];if(arguments.length){if(Le(e)){for(let r=0;r<e.length;++r)if(n[e[r]])return!0;return!1}}else{for(const r in n)if(n[r])return!0;return!1}return t!=null&&t>=0?t+1<n[e]||!!n[t+":"+e]:!!n[e]},clear(){return this[lI]={},this}};let Ewt=0;const xwt="pulse",Twt=new C$,Swt=1,Cwt=2;function gr(e,t,n,r){this.id=++Ewt,this.value=e,this.stamp=-1,this.rank=-1,this.qrank=-1,this.flags=0,t&&(this._update=t),n&&this.parameters(n,r)}function Ioe(e){return function(t){const n=this.flags;return arguments.length===0?!!(n&e):(this.flags=t?n|e:n&~e,this)}}gr.prototype={targets(){return this._targets||(this._targets=x$(FC))},set(e){return this.value!==e?(this.value=e,1):0},skip:Ioe(Swt),modified:Ioe(Cwt),parameters(e,t,n){t=t!==!1;const r=this._argval=this._argval||new C$,i=this._argops=this._argops||[],o=[];let s,a,u,l;const c=(f,d,h)=>{h instanceof gr?(h!==this&&(t&&h.targets().add(this),o.push(h)),i.push({op:h,name:f,index:d})):r.set(f,d,h)};for(s in e)if(a=e[s],s===xwt)ct(a).forEach(f=>{f instanceof gr?f!==this&&(f.targets().add(this),o.push(f)):De("Pulse parameters must be operator instances.")}),this.source=a;else if(Le(a))for(r.set(s,-1,Array(u=a.length)),l=0;l<u;++l)c(s,l,a[l]);else c(s,-1,a);return this.marshall().clear(),n&&(i.initonly=!0),o},marshall(e){const t=this._argval||Twt,n=this._argops;let r,i,o,s;if(n){const a=n.length;for(i=0;i<a;++i)r=n[i],o=r.op,s=o.modified()&&o.stamp===e,t.set(r.name,r.index,o.value,s);if(n.initonly){for(i=0;i<a;++i)r=n[i],r.op.targets().remove(this);this._argops=null,this._update=null}}return t},detach(){const e=this._argops;let t,n,r,i;if(e)for(t=0,n=e.length;t<n;++t)r=e[t],i=r.op,i._targets&&i._targets.remove(this);this.pulse=null,this.source=null},evaluate(e){const t=this._update;if(t){const n=this.marshall(e.stamp),r=t.call(this,n,e);if(n.clear(),r!==this.value)this.value=r;else if(!this.modified())return e.StopPropagation}},run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?(this.skip(!1),t=0):t=this.evaluate(e),this.pulse=t||e}};function Awt(e,t,n,r){let i=1,o;return e instanceof gr?o=e:e&&e.prototype instanceof gr?o=new e:nn(e)?o=new gr(null,e):(i=0,o=new gr(e,t)),this.rank(o),i&&(r=n,n=t),n&&this.connect(o,o.parameters(n,r)),this.touch(o),o}function kwt(e,t){const n=e.rank,r=t.length;for(let i=0;i<r;++i)if(n<t[i].rank){this.rerank(e);return}}let Iwt=0;function A$(e,t,n){this.id=++Iwt,this.value=null,n&&(this.receive=n),e&&(this._filter=e),t&&(this._apply=t)}function Wh(e,t,n){return new A$(e,t,n)}A$.prototype={_filter:ll,_apply:_s,targets(){return this._targets||(this._targets=x$(FC))},consume(e){return arguments.length?(this._consume=!!e,this):!!this._consume},receive(e){if(this._filter(e)){const t=this.value=this._apply(e),n=this._targets,r=n?n.length:0;for(let i=0;i<r;++i)n[i].receive(t);this._consume&&(e.preventDefault(),e.stopPropagation())}},filter(e){const t=Wh(e);return this.targets().add(t),t},apply(e){const t=Wh(null,e);return this.targets().add(t),t},merge(){const e=Wh();this.targets().add(e);for(let t=0,n=arguments.length;t<n;++t)arguments[t].targets().add(e);return e},throttle(e){let t=-1;return this.filter(()=>{const n=Date.now();return n-t>e?(t=n,1):0})},debounce(e){const t=Wh();return this.targets().add(Wh(null,null,Yq(e,n=>{const r=n.dataflow;t.receive(n),r&&r.run&&r.run()}))),t},between(e,t){let n=!1;return e.targets().add(Wh(null,null,()=>n=!0)),t.targets().add(Wh(null,null,()=>n=!1)),this.filter(()=>n)},detach(){this._filter=ll,this._targets=null}};function Rwt(e,t,n,r){const i=this,o=Wh(n,r),s=function(l){l.dataflow=i;try{o.receive(l)}catch(c){i.error(c)}finally{i.run()}};let a;typeof e=="string"&&typeof document<"u"?a=document.querySelectorAll(e):a=ct(e);const u=a.length;for(let l=0;l<u;++l)a[l].addEventListener(t,s);return o}function Nwt(e,t){const n=this.locale();return gxe(e,t,n.timeParse,n.utcParse)}function Pwt(e,t,n){return t=this.parse(t,n),this.pulse(e,this.changeset().insert(t))}async function Dwt(e,t){const n=this;let r=0,i;try{i=await n.loader().load(e,{context:"dataflow",response:mxe(t&&t.type)});try{i=n.parse(i,t)}catch(o){r=-2,n.warn("Data ingestion failed",e,o)}}catch(o){r=-1,n.warn("Loading failed",e,o)}return{data:i,status:r}}async function Owt(e,t,n){const r=this,i=r._pending||$wt(r);i.requests+=1;const o=await r.request(t,n);return r.pulse(e,r.changeset().remove(ll).insert(o.data||[])),i.done(),o}function $wt(e){let t;const n=new Promise(r=>t=r);return n.requests=0,n.done=()=>{--n.requests===0&&(e._pending=null,t(e))},e._pending=n}const Mwt={skip:!0};function Lwt(e,t,n,r,i){return(e instanceof gr?jwt:Fwt)(this,e,t,n,r,i),this}function Fwt(e,t,n,r,i,o){const s=tn({},o,Mwt);let a,u;nn(n)||(n=ws(n)),r===void 0?a=l=>e.touch(n(l)):nn(r)?(u=new gr(null,r,i,!1),a=l=>{u.evaluate(l);const c=n(l),f=u.value;_xe(f)?e.pulse(c,f,o):e.update(c,f,s)}):a=l=>e.update(n(l),r,s),t.apply(a)}function jwt(e,t,n,r,i,o){if(r===void 0)t.targets().add(n);else{const s=o||{},a=new gr(null,Bwt(n,r),i,!1);a.modified(s.force),a.rank=t.rank,t.targets().add(a),n&&(a.skip(!0),a.value=n.value,a.targets().add(n),e.connect(n,[a]))}}function Bwt(e,t){return t=nn(t)?t:ws(t),e?function(n,r){const i=t(n,r);return e.skip()||(e.skip(i!==this.value).value=i),i}:t}function Uwt(e){e.rank=++this._rank}function zwt(e){const t=[e];let n,r,i;for(;t.length;)if(this.rank(n=t.pop()),r=n._targets)for(i=r.length;--i>=0;)t.push(n=r[i]),n===e&&De("Cycle detected in dataflow graph.")}const eP={},Fc=1,Zh=2,hd=4,Vwt=Fc|Zh,Roe=Fc|hd,Tv=Fc|Zh|hd,Noe=8,Xw=16,Poe=32,Doe=64;function Gp(e,t,n){this.dataflow=e,this.stamp=t??-1,this.add=[],this.rem=[],this.mod=[],this.fields=null,this.encode=n||null}function X6(e,t){const n=[];return Jh(e,t,r=>n.push(r)),n}function Ooe(e,t){const n={};return e.visit(t,r=>{n[Dt(r)]=1}),r=>n[Dt(r)]?null:r}function G2(e,t){return e?(n,r)=>e(n,r)&&t(n,r):t}Gp.prototype={StopPropagation:eP,ADD:Fc,REM:Zh,MOD:hd,ADD_REM:Vwt,ADD_MOD:Roe,ALL:Tv,REFLOW:Noe,SOURCE:Xw,NO_SOURCE:Poe,NO_FIELDS:Doe,fork(e){return new Gp(this.dataflow).init(this,e)},clone(){const e=this.fork(Tv);return e.add=e.add.slice(),e.rem=e.rem.slice(),e.mod=e.mod.slice(),e.source&&(e.source=e.source.slice()),e.materialize(Tv|Xw)},addAll(){let e=this;return!e.source||e.add===e.rem||!e.rem.length&&e.source.length===e.add.length||(e=new Gp(this.dataflow).init(this),e.add=e.source,e.rem=[]),e},init(e,t){const n=this;return n.stamp=e.stamp,n.encode=e.encode,e.fields&&!(t&Doe)&&(n.fields=e.fields),t&Fc?(n.addF=e.addF,n.add=e.add):(n.addF=null,n.add=[]),t&Zh?(n.remF=e.remF,n.rem=e.rem):(n.remF=null,n.rem=[]),t&hd?(n.modF=e.modF,n.mod=e.mod):(n.modF=null,n.mod=[]),t&Poe?(n.srcF=null,n.source=null):(n.srcF=e.srcF,n.source=e.source,e.cleans&&(n.cleans=e.cleans)),n},runAfter(e){this.dataflow.runAfter(e)},changed(e){const t=e||Tv;return t&Fc&&this.add.length||t&Zh&&this.rem.length||t&hd&&this.mod.length},reflow(e){if(e)return this.fork(Tv).reflow();const t=this.add.length,n=this.source&&this.source.length;return n&&n!==t&&(this.mod=this.source,t&&this.filter(hd,Ooe(this,Fc))),this},clean(e){return arguments.length?(this.cleans=!!e,this):this.cleans},modifies(e){const t=this.fields||(this.fields={});return Le(e)?e.forEach(n=>t[n]=!0):t[e]=!0,this},modified(e,t){const n=this.fields;return(t||this.mod.length)&&n?arguments.length?Le(e)?e.some(r=>n[r]):n[e]:!!n:!1},filter(e,t){const n=this;return e&Fc&&(n.addF=G2(n.addF,t)),e&Zh&&(n.remF=G2(n.remF,t)),e&hd&&(n.modF=G2(n.modF,t)),e&Xw&&(n.srcF=G2(n.srcF,t)),n},materialize(e){e=e||Tv;const t=this;return e&Fc&&t.addF&&(t.add=X6(t.add,t.addF),t.addF=null),e&Zh&&t.remF&&(t.rem=X6(t.rem,t.remF),t.remF=null),e&hd&&t.modF&&(t.mod=X6(t.mod,t.modF),t.modF=null),e&Xw&&t.srcF&&(t.source=t.source.filter(t.srcF),t.srcF=null),t},visit(e,t){const n=this,r=t;if(e&Xw)return Jh(n.source,n.srcF,r),n;e&Fc&&Jh(n.add,n.addF,r),e&Zh&&Jh(n.rem,n.remF,r),e&hd&&Jh(n.mod,n.modF,r);const i=n.source;if(e&Noe&&i){const o=n.add.length+n.mod.length;o===i.length||(o?Jh(i,Ooe(n,Roe),r):Jh(i,n.srcF,r))}return n}};function aW(e,t,n,r){const i=this;let o=0;this.dataflow=e,this.stamp=t,this.fields=null,this.encode=r||null,this.pulses=n;for(const s of n)if(s.stamp===t){if(s.fields){const a=i.fields||(i.fields={});for(const u in s.fields)a[u]=1}s.changed(i.ADD)&&(o|=i.ADD),s.changed(i.REM)&&(o|=i.REM),s.changed(i.MOD)&&(o|=i.MOD)}this.changes=o}at(aW,Gp,{fork(e){const t=new Gp(this.dataflow).init(this,e&this.NO_FIELDS);return e!==void 0&&(e&t.ADD&&this.visit(t.ADD,n=>t.add.push(n)),e&t.REM&&this.visit(t.REM,n=>t.rem.push(n)),e&t.MOD&&this.visit(t.MOD,n=>t.mod.push(n))),t},changed(e){return this.changes&e},modified(e){const t=this,n=t.fields;return n&&t.changes&t.MOD?Le(e)?e.some(r=>n[r]):n[e]:0},filter(){De("MultiPulse does not support filtering.")},materialize(){De("MultiPulse does not support materialization.")},visit(e,t){const n=this,r=n.pulses,i=r.length;let o=0;if(e&n.SOURCE)for(;o<i;++o)r[o].visit(e,t);else for(;o<i;++o)r[o].stamp===n.stamp&&r[o].visit(e,t);return n}});async function Hwt(e,t,n){const r=this,i=[];if(r._pulse)return wxe(r);if(r._pending&&await r._pending,t&&await uI(r,t),!r._touched.length)return r.debug("Dataflow invoked, but nothing to do."),r;const o=++r._clock;r._pulse=new Gp(r,o,e),r._touched.forEach(c=>r._enqueue(c,!0)),r._touched=x$(FC);let s=0,a,u,l;try{for(;r._heap.size()>0;){if(a=r._heap.pop(),a.rank!==a.qrank){r._enqueue(a,!0);continue}u=a.run(r._getPulse(a,e)),u.then?u=await u:u.async&&(i.push(u.async),u=eP),u!==eP&&a._targets&&a._targets.forEach(c=>r._enqueue(c)),++s}}catch(c){r._heap.clear(),l=c}if(r._input={},r._pulse=null,r.debug(`Pulse ${o}: ${s} operators`),l&&(r._postrun=[],r.error(l)),r._postrun.length){const c=r._postrun.sort((f,d)=>d.priority-f.priority);r._postrun=[];for(let f=0;f<c.length;++f)await uI(r,c[f].callback)}return n&&await uI(r,n),i.length&&Promise.all(i).then(c=>r.runAsync(null,()=>{c.forEach(f=>{try{f(r)}catch(d){r.error(d)}})})),r}async function qwt(e,t,n){for(;this._running;)await this._running;const r=()=>this._running=null;return(this._running=this.evaluate(e,t,n)).then(r,r),this._running}function Wwt(e,t,n){return this._pulse?wxe(this):(this.evaluate(e,t,n),this)}function Gwt(e,t,n){if(this._pulse||t)this._postrun.push({priority:n||0,callback:e});else try{e(this)}catch(r){this.error(r)}}function wxe(e){return e.error("Dataflow already running. Use runAsync() to chain invocations."),e}function Ywt(e,t){const n=e.stamp<this._clock;n&&(e.stamp=this._clock),(n||t)&&(e.qrank=e.rank,this._heap.push(e))}function Kwt(e,t){const n=e.source,r=this._clock;return n&&Le(n)?new aW(this,r,n.map(i=>i.pulse),t):this._input[e.id]||Xwt(this._pulse,n&&n.pulse)}function Xwt(e,t){return t&&t.stamp===e.stamp?t:(e=e.fork(),t&&t!==eP&&(e.source=t.source),e)}const uW={skip:!1,force:!1};function Qwt(e,t){const n=t||uW;return this._pulse?this._enqueue(e):this._touched.add(e),n.skip&&e.skip(!0),this}function Jwt(e,t,n){const r=n||uW;return(e.set(t)||r.force)&&this.touch(e,r),this}function Zwt(e,t,n){this.touch(e,n||uW);const r=new Gp(this,this._clock+(this._pulse?0:1)),i=e.pulse&&e.pulse.source||[];return r.target=e,this._input[e.id]=t.pulse(r,i),this}function eEt(e){let t=[];return{clear:()=>t=[],size:()=>t.length,peek:()=>t[0],push:n=>(t.push(n),Exe(t,0,t.length-1,e)),pop:()=>{const n=t.pop();let r;return t.length?(r=t[0],t[0]=n,tEt(t,0,e)):r=n,r}}}function Exe(e,t,n,r){let i,o;const s=e[n];for(;n>t;){if(o=n-1>>1,i=e[o],r(s,i)<0){e[n]=i,n=o;continue}break}return e[n]=s}function tEt(e,t,n){const r=t,i=e.length,o=e[t];let s=(t<<1)+1,a;for(;s<i;)a=s+1,a<i&&n(e[s],e[a])>=0&&(s=a),e[t]=e[s],t=s,s=(t<<1)+1;return e[t]=o,Exe(e,r,t,n)}function z1(){this.logger(Vq()),this.logLevel(Uq),this._clock=0,this._rank=0,this._locale=nW();try{this._loader=E$()}catch{}this._touched=x$(FC),this._input={},this._pulse=null,this._heap=eEt((e,t)=>e.qrank-t.qrank),this._postrun=[]}function Qw(e){return function(){return this._log[e].apply(this,arguments)}}z1.prototype={stamp(){return this._clock},loader(e){return arguments.length?(this._loader=e,this):this._loader},locale(e){return arguments.length?(this._locale=e,this):this._locale},logger(e){return arguments.length?(this._log=e,this):this._log},error:Qw("error"),warn:Qw("warn"),info:Qw("info"),debug:Qw("debug"),logLevel:Qw("level"),cleanThreshold:1e4,add:Awt,connect:kwt,rank:Uwt,rerank:zwt,pulse:Zwt,touch:Qwt,update:Jwt,changeset:Vy,ingest:Pwt,parse:Nwt,preload:Owt,request:Dwt,events:Rwt,on:Lwt,evaluate:Hwt,run:Wwt,runAsync:qwt,runAfter:Gwt,_enqueue:Ywt,_getPulse:Kwt};function ke(e,t){gr.call(this,e,null,t)}at(ke,gr,{run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?this.skip(!1):t=this.evaluate(e),t=t||e,t.then?t=t.then(n=>this.pulse=n):t!==e.StopPropagation&&(this.pulse=t),t},evaluate(e){const t=this.marshall(e.stamp),n=this.transform(t,e);return t.clear(),n},transform(){}});const $b={};function xxe(e){const t=Txe(e);return t&&t.Definition||null}function Txe(e){return e=e&&e.toLowerCase(),$t($b,e)?$b[e]:null}function*Sxe(e,t){if(t==null)for(let n of e)n!=null&&n!==""&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)r=t(r,++n,e),r!=null&&r!==""&&(r=+r)>=r&&(yield r)}}function lW(e,t,n){const r=Float64Array.from(Sxe(e,n));return r.sort(Md),t.map(i=>Gge(r,i))}function cW(e,t){return lW(e,[.25,.5,.75],t)}function fW(e,t){const n=e.length,r=wYe(e,t),i=cW(e,t),o=(i[2]-i[0])/1.34;return 1.06*(Math.min(r,o)||r||Math.abs(i[0])||1)*Math.pow(n,-.2)}function Cxe(e){const t=e.maxbins||20,n=e.base||10,r=Math.log(n),i=e.divide||[5,2];let o=e.extent[0],s=e.extent[1],a,u,l,c,f,d;const h=e.span||s-o||Math.abs(o)||1;if(e.step)a=e.step;else if(e.steps){for(c=h/t,f=0,d=e.steps.length;f<d&&e.steps[f]<c;++f);a=e.steps[Math.max(0,f-1)]}else{for(u=Math.ceil(Math.log(t)/r),l=e.minstep||0,a=Math.max(l,Math.pow(n,Math.round(Math.log(h)/r)-u));Math.ceil(h/a)>t;)a*=n;for(f=0,d=i.length;f<d;++f)c=a/i[f],c>=l&&h/c<=t&&(a=c)}c=Math.log(a);const p=c>=0?0:~~(-c/r)+1,m=Math.pow(n,-p-1);return(e.nice||e.nice===void 0)&&(c=Math.floor(o/a+m)*a,o=o<c?c-a:c,s=Math.ceil(s/a)*a),{start:o,stop:s===o?o+a:s,step:a}}var fl=Math.random;function nEt(e){fl=e}function Axe(e,t,n,r){if(!e.length)return[void 0,void 0];const i=Float64Array.from(Sxe(e,r)),o=i.length,s=t;let a,u,l,c;for(l=0,c=Array(s);l<s;++l){for(a=0,u=0;u<o;++u)a+=i[~~(fl()*o)];c[l]=a/o}return c.sort(Md),[OT(c,n/2),OT(c,1-n/2)]}function kxe(e,t,n,r){r=r||(d=>d);const i=e.length,o=new Float64Array(i);let s=0,a=1,u=r(e[0]),l=u,c=u+t,f;for(;a<i;++a){if(f=r(e[a]),f>=c){for(l=(u+l)/2;s<a;++s)o[s]=l;c=f+t,u=f}l=f}for(l=(u+l)/2;s<a;++s)o[s]=l;return n?rEt(o,t+t/4):o}function rEt(e,t){const n=e.length;let r=0,i=1,o,s;for(;e[r]===e[i];)++i;for(;i<n;){for(o=i+1;e[i]===e[o];)++o;if(e[i]-e[i-1]<t){for(s=i+(r+o-i-i>>1);s<i;)e[s++]=e[i];for(;s>i;)e[s--]=e[r]}r=i,i=o}return e}function iEt(e){return function(){return e=(1103515245*e+12345)%2147483647,e/2147483647}}function oEt(e,t){t==null&&(t=e,e=0);let n,r,i;const o={min(s){return arguments.length?(n=s||0,i=r-n,o):n},max(s){return arguments.length?(r=s||0,i=r-n,o):r},sample(){return n+Math.floor(i*fl())},pdf(s){return s===Math.floor(s)&&s>=n&&s<r?1/i:0},cdf(s){const a=Math.floor(s);return a<n?0:a>=r?1:(a-n+1)/i},icdf(s){return s>=0&&s<=1?n-1+Math.floor(s*i):NaN}};return o.min(e).max(t)}const Ixe=Math.sqrt(2*Math.PI),sEt=Math.SQRT2;let Jw=NaN;function k$(e,t){e=e||0,t=t??1;let n=0,r=0,i,o;if(Jw===Jw)n=Jw,Jw=NaN;else{do n=fl()*2-1,r=fl()*2-1,i=n*n+r*r;while(i===0||i>1);o=Math.sqrt(-2*Math.log(i)/i),n*=o,Jw=r*o}return e+n*t}function dW(e,t,n){n=n??1;const r=(e-(t||0))/n;return Math.exp(-.5*r*r)/(n*Ixe)}function I$(e,t,n){t=t||0,n=n??1;const r=(e-t)/n,i=Math.abs(r);let o;if(i>37)o=0;else{const s=Math.exp(-i*i/2);let a;i<7.07106781186547?(a=.0352624965998911*i+.700383064443688,a=a*i+6.37396220353165,a=a*i+33.912866078383,a=a*i+112.079291497871,a=a*i+221.213596169931,a=a*i+220.206867912376,o=s*a,a=.0883883476483184*i+1.75566716318264,a=a*i+16.064177579207,a=a*i+86.7807322029461,a=a*i+296.564248779674,a=a*i+637.333633378831,a=a*i+793.826512519948,a=a*i+440.413735824752,o=o/a):(a=i+.65,a=i+4/a,a=i+3/a,a=i+2/a,a=i+1/a,o=s/a/2.506628274631)}return r>0?1-o:o}function R$(e,t,n){return e<0||e>1?NaN:(t||0)+(n??1)*sEt*aEt(2*e-1)}function aEt(e){let t=-Math.log((1-e)*(1+e)),n;return t<6.25?(t-=3.125,n=-364441206401782e-35,n=-16850591381820166e-35+n*t,n=128584807152564e-32+n*t,n=11157877678025181e-33+n*t,n=-1333171662854621e-31+n*t,n=20972767875968562e-33+n*t,n=6637638134358324e-30+n*t,n=-4054566272975207e-29+n*t,n=-8151934197605472e-29+n*t,n=26335093153082323e-28+n*t,n=-12975133253453532e-27+n*t,n=-5415412054294628e-26+n*t,n=10512122733215323e-25+n*t,n=-4112633980346984e-24+n*t,n=-29070369957882005e-24+n*t,n=42347877827932404e-23+n*t,n=-13654692000834679e-22+n*t,n=-13882523362786469e-21+n*t,n=.00018673420803405714+n*t,n=-.000740702534166267+n*t,n=-.006033670871430149+n*t,n=.24015818242558962+n*t,n=1.6536545626831027+n*t):t<16?(t=Math.sqrt(t)-3.25,n=22137376921775787e-25,n=9075656193888539e-23+n*t,n=-27517406297064545e-23+n*t,n=18239629214389228e-24+n*t,n=15027403968909828e-22+n*t,n=-4013867526981546e-21+n*t,n=29234449089955446e-22+n*t,n=12475304481671779e-21+n*t,n=-47318229009055734e-21+n*t,n=6828485145957318e-20+n*t,n=24031110387097894e-21+n*t,n=-.0003550375203628475+n*t,n=.0009532893797373805+n*t,n=-.0016882755560235047+n*t,n=.002491442096107851+n*t,n=-.003751208507569241+n*t,n=.005370914553590064+n*t,n=1.0052589676941592+n*t,n=3.0838856104922208+n*t):Number.isFinite(t)?(t=Math.sqrt(t)-5,n=-27109920616438573e-27,n=-2555641816996525e-25+n*t,n=15076572693500548e-25+n*t,n=-3789465440126737e-24+n*t,n=761570120807834e-23+n*t,n=-1496002662714924e-23+n*t,n=2914795345090108e-23+n*t,n=-6771199775845234e-23+n*t,n=22900482228026655e-23+n*t,n=-99298272942317e-20+n*t,n=4526062597223154e-21+n*t,n=-1968177810553167e-20+n*t,n=7599527703001776e-20+n*t,n=-.00021503011930044477+n*t,n=-.00013871931833623122+n*t,n=1.0103004648645344+n*t,n=4.849906401408584+n*t):n=1/0,n*e}function hW(e,t){let n,r;const i={mean(o){return arguments.length?(n=o||0,i):n},stdev(o){return arguments.length?(r=o??1,i):r},sample:()=>k$(n,r),pdf:o=>dW(o,n,r),cdf:o=>I$(o,n,r),icdf:o=>R$(o,n,r)};return i.mean(e).stdev(t)}function pW(e,t){const n=hW();let r=0;const i={data(o){return arguments.length?(e=o,r=o?o.length:0,i.bandwidth(t)):e},bandwidth(o){return arguments.length?(t=o,!t&&e&&(t=fW(e)),i):t},sample(){return e[~~(fl()*r)]+t*n.sample()},pdf(o){let s=0,a=0;for(;a<r;++a)s+=n.pdf((o-e[a])/t);return s/t/r},cdf(o){let s=0,a=0;for(;a<r;++a)s+=n.cdf((o-e[a])/t);return s/r},icdf(){throw Error("KDE icdf not supported.")}};return i.data(e)}function mW(e,t){return e=e||0,t=t??1,Math.exp(e+k$()*t)}function gW(e,t,n){if(e<=0)return 0;t=t||0,n=n??1;const r=(Math.log(e)-t)/n;return Math.exp(-.5*r*r)/(n*Ixe*e)}function yW(e,t,n){return I$(Math.log(e),t,n)}function vW(e,t,n){return Math.exp(R$(e,t,n))}function Rxe(e,t){let n,r;const i={mean(o){return arguments.length?(n=o||0,i):n},stdev(o){return arguments.length?(r=o??1,i):r},sample:()=>mW(n,r),pdf:o=>gW(o,n,r),cdf:o=>yW(o,n,r),icdf:o=>vW(o,n,r)};return i.mean(e).stdev(t)}function Nxe(e,t){let n=0,r;function i(s){const a=[];let u=0,l;for(l=0;l<n;++l)u+=a[l]=s[l]==null?1:+s[l];for(l=0;l<n;++l)a[l]/=u;return a}const o={weights(s){return arguments.length?(r=i(t=s||[]),o):t},distributions(s){return arguments.length?(s?(n=s.length,e=s):(n=0,e=[]),o.weights(t)):e},sample(){const s=fl();let a=e[n-1],u=r[0],l=0;for(;l<n-1;u+=r[++l])if(s<u){a=e[l];break}return a.sample()},pdf(s){let a=0,u=0;for(;u<n;++u)a+=r[u]*e[u].pdf(s);return a},cdf(s){let a=0,u=0;for(;u<n;++u)a+=r[u]*e[u].cdf(s);return a},icdf(){throw Error("Mixture icdf not supported.")}};return o.distributions(e).weights(t)}function bW(e,t){return t==null&&(t=e??1,e=0),e+(t-e)*fl()}function _W(e,t,n){return n==null&&(n=t??1,t=0),e>=t&&e<=n?1/(n-t):0}function wW(e,t,n){return n==null&&(n=t??1,t=0),e<t?0:e>n?1:(e-t)/(n-t)}function EW(e,t,n){return n==null&&(n=t??1,t=0),e>=0&&e<=1?t+e*(n-t):NaN}function Pxe(e,t){let n,r;const i={min(o){return arguments.length?(n=o||0,i):n},max(o){return arguments.length?(r=o??1,i):r},sample:()=>bW(n,r),pdf:o=>_W(o,n,r),cdf:o=>wW(o,n,r),icdf:o=>EW(o,n,r)};return t==null&&(t=e??1,e=0),i.min(e).max(t)}function xW(e,t,n){let r=0,i=0;for(const o of e){const s=n(o);t(o)==null||s==null||isNaN(s)||(r+=(s-r)/++i)}return{coef:[r],predict:()=>r,rSquared:0}}function BC(e,t,n,r){const i=r-e*e,o=Math.abs(i)<1e-24?0:(n-e*t)/i;return[t-o*e,o]}function N$(e,t,n,r){e=e.filter(h=>{let p=t(h),m=n(h);return p!=null&&(p=+p)>=p&&m!=null&&(m=+m)>=m}),r&&e.sort((h,p)=>t(h)-t(p));const i=e.length,o=new Float64Array(i),s=new Float64Array(i);let a=0,u=0,l=0,c,f,d;for(d of e)o[a]=c=+t(d),s[a]=f=+n(d),++a,u+=(c-u)/a,l+=(f-l)/a;for(a=0;a<i;++a)o[a]-=u,s[a]-=l;return[o,s,u,l]}function UC(e,t,n,r){let i=-1,o,s;for(const a of e)o=t(a),s=n(a),o!=null&&(o=+o)>=o&&s!=null&&(s=+s)>=s&&r(o,s,++i)}function ew(e,t,n,r,i){let o=0,s=0;return UC(e,t,n,(a,u)=>{const l=u-i(a),c=u-r;o+=l*l,s+=c*c}),1-o/s}function TW(e,t,n){let r=0,i=0,o=0,s=0,a=0;UC(e,t,n,(c,f)=>{++a,r+=(c-r)/a,i+=(f-i)/a,o+=(c*f-o)/a,s+=(c*c-s)/a});const u=BC(r,i,o,s),l=c=>u[0]+u[1]*c;return{coef:u,predict:l,rSquared:ew(e,t,n,i,l)}}function Dxe(e,t,n){let r=0,i=0,o=0,s=0,a=0;UC(e,t,n,(c,f)=>{++a,c=Math.log(c),r+=(c-r)/a,i+=(f-i)/a,o+=(c*f-o)/a,s+=(c*c-s)/a});const u=BC(r,i,o,s),l=c=>u[0]+u[1]*Math.log(c);return{coef:u,predict:l,rSquared:ew(e,t,n,i,l)}}function Oxe(e,t,n){const[r,i,o,s]=N$(e,t,n);let a=0,u=0,l=0,c=0,f=0,d,h,p;UC(e,t,n,(v,_)=>{d=r[f++],h=Math.log(_),p=d*_,a+=(_*h-a)/f,u+=(p-u)/f,l+=(p*h-l)/f,c+=(d*p-c)/f});const[m,g]=BC(u/s,a/s,l/s,c/s),y=v=>Math.exp(m+g*(v-o));return{coef:[Math.exp(m-g*o),g],predict:y,rSquared:ew(e,t,n,s,y)}}function $xe(e,t,n){let r=0,i=0,o=0,s=0,a=0,u=0;UC(e,t,n,(f,d)=>{const h=Math.log(f),p=Math.log(d);++u,r+=(h-r)/u,i+=(p-i)/u,o+=(h*p-o)/u,s+=(h*h-s)/u,a+=(d-a)/u});const l=BC(r,i,o,s),c=f=>l[0]*Math.pow(f,l[1]);return l[0]=Math.exp(l[0]),{coef:l,predict:c,rSquared:ew(e,t,n,a,c)}}function SW(e,t,n){const[r,i,o,s]=N$(e,t,n),a=r.length;let u=0,l=0,c=0,f=0,d=0,h,p,m,g;for(h=0;h<a;)p=r[h],m=i[h++],g=p*p,u+=(g-u)/h,l+=(g*p-l)/h,c+=(g*g-c)/h,f+=(p*m-f)/h,d+=(g*m-d)/h;const y=c-u*u,v=u*y-l*l,_=(d*u-f*l)/v,w=(f*y-d*l)/v,E=-_*u,S=T=>(T=T-o,_*T*T+w*T+E+s);return{coef:[E-w*o+_*o*o+s,w-2*_*o,_],predict:S,rSquared:ew(e,t,n,s,S)}}function Mxe(e,t,n,r){if(r===0)return xW(e,t,n);if(r===1)return TW(e,t,n);if(r===2)return SW(e,t,n);const[i,o,s,a]=N$(e,t,n),u=i.length,l=[],c=[],f=r+1;let d,h,p,m,g;for(d=0;d<f;++d){for(p=0,m=0;p<u;++p)m+=Math.pow(i[p],d)*o[p];for(l.push(m),g=new Float64Array(f),h=0;h<f;++h){for(p=0,m=0;p<u;++p)m+=Math.pow(i[p],d+h);g[h]=m}c.push(g)}c.push(l);const y=lEt(c),v=_=>{_-=s;let w=a+y[0]+y[1]*_+y[2]*_*_;for(d=3;d<f;++d)w+=y[d]*Math.pow(_,d);return w};return{coef:uEt(f,y,-s,a),predict:v,rSquared:ew(e,t,n,a,v)}}function uEt(e,t,n,r){const i=Array(e);let o,s,a,u;for(o=0;o<e;++o)i[o]=0;for(o=e-1;o>=0;--o)for(a=t[o],u=1,i[o]+=a,s=1;s<=o;++s)u*=(o+1-s)/s,i[o-s]+=a*Math.pow(n,s)*u;return i[0]+=r,i}function lEt(e){const t=e.length-1,n=[];let r,i,o,s,a;for(r=0;r<t;++r){for(s=r,i=r+1;i<t;++i)Math.abs(e[r][i])>Math.abs(e[r][s])&&(s=i);for(o=r;o<t+1;++o)a=e[o][r],e[o][r]=e[o][s],e[o][s]=a;for(i=r+1;i<t;++i)for(o=t;o>=r;o--)e[o][i]-=e[o][r]*e[r][i]/e[r][r]}for(i=t-1;i>=0;--i){for(a=0,o=i+1;o<t;++o)a+=e[o][i]*n[o];n[i]=(e[t][i]-a)/e[i][i]}return n}const $oe=2,Moe=1e-12;function Lxe(e,t,n,r){const[i,o,s,a]=N$(e,t,n,!0),u=i.length,l=Math.max(2,~~(r*u)),c=new Float64Array(u),f=new Float64Array(u),d=new Float64Array(u).fill(1);for(let h=-1;++h<=$oe;){const p=[0,l-1];for(let g=0;g<u;++g){const y=i[g],v=p[0],_=p[1],w=y-i[v]>i[_]-y?v:_;let E=0,S=0,T=0,C=0,A=0;const R=1/Math.abs(i[w]-y||1);for(let D=v;D<=_;++D){const M=i[D],F=o[D],L=cEt(Math.abs(y-M)*R)*d[D],B=M*L;E+=L,S+=B,T+=F*L,C+=F*B,A+=M*B}const[N,O]=BC(S/E,T/E,C/E,A/E);c[g]=N+O*y,f[g]=Math.abs(o[g]-c[g]),fEt(i,g+1,p)}if(h===$oe)break;const m=Kge(f);if(Math.abs(m)<Moe)break;for(let g=0,y,v;g<u;++g)y=f[g]/(6*m),d[g]=y>=1?Moe:(v=1-y*y)*v}return dEt(i,c,s,a)}function cEt(e){return(e=1-e*e*e)*e*e}function fEt(e,t,n){const r=e[t];let i=n[0],o=n[1]+1;if(!(o>=e.length))for(;t>i&&e[o]-r<=r-e[i];)n[0]=++i,n[1]=o,++o}function dEt(e,t,n,r){const i=e.length,o=[];let s=0,a=0,u=[],l;for(;s<i;++s)l=e[s]+n,u[0]===l?u[1]+=(t[s]-u[1])/++a:(a=0,u[1]+=r,u=[l,t[s]],o.push(u));return u[1]+=r,o}const hEt=.5*Math.PI/180;function P$(e,t,n,r){n=n||25,r=Math.max(n,r||200);const i=m=>[m,e(m)],o=t[0],s=t[1],a=s-o,u=a/r,l=[i(o)],c=[];if(n===r){for(let m=1;m<r;++m)l.push(i(o+m/n*a));return l.push(i(s)),l}else{c.push(i(s));for(let m=n;--m>0;)c.push(i(o+m/n*a))}let f=l[0],d=c[c.length-1];const h=1/a,p=pEt(f[1],c);for(;d;){const m=i((f[0]+d[0])/2);m[0]-f[0]>=u&&mEt(f,m,d,h,p)>hEt?c.push(m):(f=d,l.push(d),c.pop()),d=c[c.length-1]}return l}function pEt(e,t){let n=e,r=e;const i=t.length;for(let o=0;o<i;++o){const s=t[o][1];s<n&&(n=s),s>r&&(r=s)}return 1/(r-n)}function mEt(e,t,n,r,i){const o=Math.atan2(i*(n[1]-e[1]),r*(n[0]-e[0])),s=Math.atan2(i*(t[1]-e[1]),r*(t[0]-e[0]));return Math.abs(o-s)}function gEt(e){return t=>{const n=e.length;let r=1,i=String(e[0](t));for(;r<n;++r)i+="|"+e[r](t);return i}}function H9(e){return!e||!e.length?function(){return""}:e.length===1?e[0]:gEt(e)}function Fxe(e,t,n){return n||e+(t?"_"+t:"")}const Q6=()=>{},yEt={init:Q6,add:Q6,rem:Q6,idx:0},mS={values:{init:e=>e.cell.store=!0,value:e=>e.cell.data.values(),idx:-1},count:{value:e=>e.cell.num},__count__:{value:e=>e.missing+e.valid},missing:{value:e=>e.missing},valid:{value:e=>e.valid},sum:{init:e=>e.sum=0,value:e=>e.valid?e.sum:void 0,add:(e,t)=>e.sum+=+t,rem:(e,t)=>e.sum-=t},product:{init:e=>e.product=1,value:e=>e.valid?e.product:void 0,add:(e,t)=>e.product*=t,rem:(e,t)=>e.product/=t},mean:{init:e=>e.mean=0,value:e=>e.valid?e.mean:void 0,add:(e,t)=>(e.mean_d=t-e.mean,e.mean+=e.mean_d/e.valid),rem:(e,t)=>(e.mean_d=t-e.mean,e.mean-=e.valid?e.mean_d/e.valid:e.mean)},average:{value:e=>e.valid?e.mean:void 0,req:["mean"],idx:1},variance:{init:e=>e.dev=0,value:e=>e.valid>1?e.dev/(e.valid-1):void 0,add:(e,t)=>e.dev+=e.mean_d*(t-e.mean),rem:(e,t)=>e.dev-=e.mean_d*(t-e.mean),req:["mean"],idx:1},variancep:{value:e=>e.valid>1?e.dev/e.valid:void 0,req:["variance"],idx:2},stdev:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid-1)):void 0,req:["variance"],idx:2},stdevp:{value:e=>e.valid>1?Math.sqrt(e.dev/e.valid):void 0,req:["variance"],idx:2},stderr:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid*(e.valid-1))):void 0,req:["variance"],idx:2},distinct:{value:e=>e.cell.data.distinct(e.get),req:["values"],idx:3},ci0:{value:e=>e.cell.data.ci0(e.get),req:["values"],idx:3},ci1:{value:e=>e.cell.data.ci1(e.get),req:["values"],idx:3},median:{value:e=>e.cell.data.q2(e.get),req:["values"],idx:3},q1:{value:e=>e.cell.data.q1(e.get),req:["values"],idx:3},q3:{value:e=>e.cell.data.q3(e.get),req:["values"],idx:3},min:{init:e=>e.min=void 0,value:e=>e.min=Number.isNaN(e.min)?e.cell.data.min(e.get):e.min,add:(e,t)=>{(t<e.min||e.min===void 0)&&(e.min=t)},rem:(e,t)=>{t<=e.min&&(e.min=NaN)},req:["values"],idx:4},max:{init:e=>e.max=void 0,value:e=>e.max=Number.isNaN(e.max)?e.cell.data.max(e.get):e.max,add:(e,t)=>{(t>e.max||e.max===void 0)&&(e.max=t)},rem:(e,t)=>{t>=e.max&&(e.max=NaN)},req:["values"],idx:4},argmin:{init:e=>e.argmin=void 0,value:e=>e.argmin||e.cell.data.argmin(e.get),add:(e,t,n)=>{t<e.min&&(e.argmin=n)},rem:(e,t)=>{t<=e.min&&(e.argmin=void 0)},req:["min","values"],idx:3},argmax:{init:e=>e.argmax=void 0,value:e=>e.argmax||e.cell.data.argmax(e.get),add:(e,t,n)=>{t>e.max&&(e.argmax=n)},rem:(e,t)=>{t>=e.max&&(e.argmax=void 0)},req:["max","values"],idx:3},exponential:{init:(e,t)=>{e.exp=0,e.exp_r=t},value:e=>e.valid?e.exp*(1-e.exp_r)/(1-e.exp_r**e.valid):void 0,add:(e,t)=>e.exp=e.exp_r*e.exp+t,rem:(e,t)=>e.exp=(e.exp-t/e.exp_r**(e.valid-1))/e.exp_r},exponentialb:{value:e=>e.valid?e.exp*(1-e.exp_r):void 0,req:["exponential"],idx:1}},zC=Object.keys(mS).filter(e=>e!=="__count__");function vEt(e,t){return(n,r)=>tn({name:e,aggregate_param:r,out:n||e},yEt,t)}[...zC,"__count__"].forEach(e=>{mS[e]=vEt(e,mS[e])});function jxe(e,t,n){return mS[e](n,t)}function Bxe(e,t){return e.idx-t.idx}function bEt(e){const t={};e.forEach(r=>t[r.name]=r);const n=r=>{r.req&&r.req.forEach(i=>{t[i]||n(t[i]=mS[i]())})};return e.forEach(n),Object.values(t).sort(Bxe)}function _Et(){this.valid=0,this.missing=0,this._ops.forEach(e=>e.aggregate_param==null?e.init(this):e.init(this,e.aggregate_param))}function wEt(e,t){if(e==null||e===""){++this.missing;return}e===e&&(++this.valid,this._ops.forEach(n=>n.add(this,e,t)))}function EEt(e,t){if(e==null||e===""){--this.missing;return}e===e&&(--this.valid,this._ops.forEach(n=>n.rem(this,e,t)))}function xEt(e){return this._out.forEach(t=>e[t.out]=t.value(this)),e}function Uxe(e,t){const n=t||_s,r=bEt(e),i=e.slice().sort(Bxe);function o(s){this._ops=r,this._out=i,this.cell=s,this.init()}return o.prototype.init=_Et,o.prototype.add=wEt,o.prototype.rem=EEt,o.prototype.set=xEt,o.prototype.get=n,o.fields=e.map(s=>s.out),o}function CW(e){this._key=e?ul(e):Dt,this.reset()}const Vo=CW.prototype;Vo.reset=function(){this._add=[],this._rem=[],this._ext=null,this._get=null,this._q=null};Vo.add=function(e){this._add.push(e)};Vo.rem=function(e){this._rem.push(e)};Vo.values=function(){if(this._get=null,this._rem.length===0)return this._add;const e=this._add,t=this._rem,n=this._key,r=e.length,i=t.length,o=Array(r-i),s={};let a,u,l;for(a=0;a<i;++a)s[n(t[a])]=1;for(a=0,u=0;a<r;++a)s[n(l=e[a])]?s[n(l)]=0:o[u++]=l;return this._rem=[],this._add=o};Vo.distinct=function(e){const t=this.values(),n={};let r=t.length,i=0,o;for(;--r>=0;)o=e(t[r])+"",$t(n,o)||(n[o]=1,++i);return i};Vo.extent=function(e){if(this._get!==e||!this._ext){const t=this.values(),n=IEe(t,e);this._ext=[t[n[0]],t[n[1]]],this._get=e}return this._ext};Vo.argmin=function(e){return this.extent(e)[0]||{}};Vo.argmax=function(e){return this.extent(e)[1]||{}};Vo.min=function(e){const t=this.extent(e)[0];return t!=null?e(t):void 0};Vo.max=function(e){const t=this.extent(e)[1];return t!=null?e(t):void 0};Vo.quartile=function(e){return(this._get!==e||!this._q)&&(this._q=cW(this.values(),e),this._get=e),this._q};Vo.q1=function(e){return this.quartile(e)[0]};Vo.q2=function(e){return this.quartile(e)[1]};Vo.q3=function(e){return this.quartile(e)[2]};Vo.ci=function(e){return(this._get!==e||!this._ci)&&(this._ci=Axe(this.values(),1e3,.05,e),this._get=e),this._ci};Vo.ci0=function(e){return this.ci(e)[0]};Vo.ci1=function(e){return this.ci(e)[1]};function ym(e){ke.call(this,null,e),this._adds=[],this._mods=[],this._alen=0,this._mlen=0,this._drop=!0,this._cross=!1,this._dims=[],this._dnames=[],this._measures=[],this._countOnly=!1,this._counts=null,this._prev=null,this._inputs=null,this._outputs=null}ym.Definition={type:"Aggregate",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:zC},{name:"aggregate_params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"drop",type:"boolean",default:!0},{name:"cross",type:"boolean",default:!1},{name:"key",type:"field"}]};at(ym,ke,{transform(e,t){const n=this,r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.modified();return n.stamp=r.stamp,n.value&&(i||t.modified(n._inputs,!0))?(n._prev=n.value,n.value=i?n.init(e):Object.create(null),t.visit(t.SOURCE,o=>n.add(o))):(n.value=n.value||n.init(e),t.visit(t.REM,o=>n.rem(o)),t.visit(t.ADD,o=>n.add(o))),r.modifies(n._outputs),n._drop=e.drop!==!1,e.cross&&n._dims.length>1&&(n._drop=!1,n.cross()),t.clean()&&n._drop&&r.clean(!0).runAfter(()=>this.clean()),n.changes(r)},cross(){const e=this,t=e.value,n=e._dnames,r=n.map(()=>({})),i=n.length;function o(a){let u,l,c,f;for(u in a)for(c=a[u].tuple,l=0;l<i;++l)r[l][f=c[n[l]]]=f}o(e._prev),o(t);function s(a,u,l){const c=n[l],f=r[l++];for(const d in f){const h=a?a+"|"+d:d;u[c]=f[d],l<i?s(h,u,l):t[h]||e.cell(h,u)}}s("",{},0)},init(e){const t=this._inputs=[],n=this._outputs=[],r={};function i(v){const _=ct(ps(v)),w=_.length;let E=0,S;for(;E<w;++E)r[S=_[E]]||(r[S]=1,t.push(S))}this._dims=ct(e.groupby),this._dnames=this._dims.map(v=>{const _=ci(v);return i(v),n.push(_),_}),this.cellkey=e.key?e.key:H9(this._dims),this._countOnly=!0,this._counts=[],this._measures=[];const o=e.fields||[null],s=e.ops||["count"],a=e.aggregate_params||[null],u=e.as||[],l=o.length,c={};let f,d,h,p,m,g,y;for(l!==s.length&&De("Unmatched number of fields and aggregate ops."),y=0;y<l;++y){if(f=o[y],d=s[y],h=a[y]||null,f==null&&d!=="count"&&De("Null aggregate field specified."),m=ci(f),g=Fxe(d,m,u[y]),n.push(g),d==="count"){this._counts.push(g);continue}p=c[m],p||(i(f),p=c[m]=[],p.field=f,this._measures.push(p)),d!=="count"&&(this._countOnly=!1),p.push(jxe(d,h,g))}return this._measures=this._measures.map(v=>Uxe(v,v.field)),Object.create(null)},cellkey:H9(),cell(e,t){let n=this.value[e];return n?n.num===0&&this._drop&&n.stamp<this.stamp?(n.stamp=this.stamp,this._adds[this._alen++]=n):n.stamp<this.stamp&&(n.stamp=this.stamp,this._mods[this._mlen++]=n):(n=this.value[e]=this.newcell(e,t),this._adds[this._alen++]=n),n},newcell(e,t){const n={key:e,num:0,agg:null,tuple:this.newtuple(t,this._prev&&this._prev[e]),stamp:this.stamp,store:!1};if(!this._countOnly){const r=this._measures,i=r.length;n.agg=Array(i);for(let o=0;o<i;++o)n.agg[o]=new r[o](n)}return n.store&&(n.data=new CW),n},newtuple(e,t){const n=this._dnames,r=this._dims,i=r.length,o={};for(let s=0;s<i;++s)o[n[s]]=r[s](e);return t?bxe(t.tuple,o):Xn(o)},clean(){const e=this.value;for(const t in e)e[t].num===0&&delete e[t]},add(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num+=1,this._countOnly)return;n.store&&n.data.add(e);const r=n.agg;for(let i=0,o=r.length;i<o;++i)r[i].add(r[i].get(e),e)},rem(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num-=1,this._countOnly)return;n.store&&n.data.rem(e);const r=n.agg;for(let i=0,o=r.length;i<o;++i)r[i].rem(r[i].get(e),e)},celltuple(e){const t=e.tuple,n=this._counts;e.store&&e.data.values();for(let r=0,i=n.length;r<i;++r)t[n[r]]=e.num;if(!this._countOnly){const r=e.agg;for(let i=0,o=r.length;i<o;++i)r[i].set(t)}return t},changes(e){const t=this._adds,n=this._mods,r=this._prev,i=this._drop,o=e.add,s=e.rem,a=e.mod;let u,l,c,f;if(r)for(l in r)u=r[l],(!i||u.num)&&s.push(u.tuple);for(c=0,f=this._alen;c<f;++c)o.push(this.celltuple(t[c])),t[c]=null;for(c=0,f=this._mlen;c<f;++c)u=n[c],(u.num===0&&i?s:a).push(this.celltuple(u)),n[c]=null;return this._alen=this._mlen=0,this._prev=null,e}});const TEt=1e-14;function AW(e){ke.call(this,null,e)}AW.Definition={type:"Bin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"anchor",type:"number"},{name:"maxbins",type:"number",default:20},{name:"base",type:"number",default:10},{name:"divide",type:"number",array:!0,default:[5,2]},{name:"extent",type:"number",array:!0,length:2,required:!0},{name:"span",type:"number"},{name:"step",type:"number"},{name:"steps",type:"number",array:!0},{name:"minstep",type:"number",default:0},{name:"nice",type:"boolean",default:!0},{name:"name",type:"string"},{name:"as",type:"string",array:!0,length:2,default:["bin0","bin1"]}]};at(AW,ke,{transform(e,t){const n=e.interval!==!1,r=this._bins(e),i=r.start,o=r.step,s=e.as||["bin0","bin1"],a=s[0],u=s[1];let l;return e.modified()?(t=t.reflow(!0),l=t.SOURCE):l=t.modified(ps(e.field))?t.ADD_MOD:t.ADD,t.visit(l,n?c=>{const f=r(c);c[a]=f,c[u]=f==null?null:i+o*(1+(f-i)/o)}:c=>c[a]=r(c)),t.modifies(n?s:a)},_bins(e){if(this.value&&!e.modified())return this.value;const t=e.field,n=Cxe(e),r=n.step;let i=n.start,o=i+Math.ceil((n.stop-i)/r)*r,s,a;(s=e.anchor)!=null&&(a=s-(i+r*Math.floor((s-i)/r)),i+=a,o+=a);const u=function(l){let c=fs(t(l));return c==null?null:c<i?-1/0:c>o?1/0:(c=Math.max(i,Math.min(c,o-r)),i+r*Math.floor(TEt+(c-i)/r))};return u.start=i,u.stop=n.stop,u.step=r,this.value=Ha(u,ps(t),e.name||"bin_"+ci(t))}});function zxe(e,t,n){const r=e;let i=t||[],o=n||[],s={},a=0;return{add:u=>o.push(u),remove:u=>s[r(u)]=++a,size:()=>i.length,data:(u,l)=>(a&&(i=i.filter(c=>!s[r(c)]),s={},a=0),l&&u&&i.sort(u),o.length&&(i=u?$Ee(u,i,o.sort(u)):i.concat(o),o=[]),i)}}function kW(e){ke.call(this,[],e)}kW.Definition={type:"Collect",metadata:{source:!0},params:[{name:"sort",type:"compare"}]};at(kW,ke,{transform(e,t){const n=t.fork(t.ALL),r=zxe(Dt,this.value,n.materialize(n.ADD).add),i=e.sort,o=t.changed()||i&&(e.modified("sort")||t.modified(i.fields));return n.visit(n.REM,r.remove),this.modified(o),this.value=n.source=r.data(zy(i),o),t.source&&t.source.root&&(this.value.root=t.source.root),n}});function Vxe(e){gr.call(this,null,SEt,e)}at(Vxe,gr);function SEt(e){return this.value&&!e.modified()?this.value:Gq(e.fields,e.orders)}function IW(e){ke.call(this,null,e)}IW.Definition={type:"CountPattern",metadata:{generates:!0,changes:!0},params:[{name:"field",type:"field",required:!0},{name:"case",type:"enum",values:["upper","lower","mixed"],default:"mixed"},{name:"pattern",type:"string",default:'[\\w"]+'},{name:"stopwords",type:"string",default:""},{name:"as",type:"string",array:!0,length:2,default:["text","count"]}]};function CEt(e,t,n){switch(t){case"upper":e=e.toUpperCase();break;case"lower":e=e.toLowerCase();break}return e.match(n)}at(IW,ke,{transform(e,t){const n=f=>d=>{for(var h=CEt(a(d),e.case,o)||[],p,m=0,g=h.length;m<g;++m)s.test(p=h[m])||f(p)},r=this._parameterCheck(e,t),i=this._counts,o=this._match,s=this._stop,a=e.field,u=e.as||["text","count"],l=n(f=>i[f]=1+(i[f]||0)),c=n(f=>i[f]-=1);return r?t.visit(t.SOURCE,l):(t.visit(t.ADD,l),t.visit(t.REM,c)),this._finish(t,u)},_parameterCheck(e,t){let n=!1;return(e.modified("stopwords")||!this._stop)&&(this._stop=new RegExp("^"+(e.stopwords||"")+"$","i"),n=!0),(e.modified("pattern")||!this._match)&&(this._match=new RegExp(e.pattern||"[\\w']+","g"),n=!0),(e.modified("field")||t.modified(e.field.fields))&&(n=!0),n&&(this._counts={}),n},_finish(e,t){const n=this._counts,r=this._tuples||(this._tuples={}),i=t[0],o=t[1],s=e.fork(e.NO_SOURCE|e.NO_FIELDS);let a,u,l;for(a in n)u=r[a],l=n[a]||0,!u&&l?(r[a]=u=Xn({}),u[i]=a,u[o]=l,s.add.push(u)):l===0?(u&&s.rem.push(u),n[a]=null,r[a]=null):u[o]!==l&&(u[o]=l,s.mod.push(u));return s.modifies(t)}});function RW(e){ke.call(this,null,e)}RW.Definition={type:"Cross",metadata:{generates:!0},params:[{name:"filter",type:"expr"},{name:"as",type:"string",array:!0,length:2,default:["a","b"]}]};at(RW,ke,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.as||["a","b"],i=r[0],o=r[1],s=!this.value||t.changed(t.ADD_REM)||e.modified("as")||e.modified("filter");let a=this.value;return s?(a&&(n.rem=a),a=t.materialize(t.SOURCE).source,n.add=this.value=AEt(a,i,o,e.filter||ll)):n.mod=a,n.source=this.value,n.modifies(r)}});function AEt(e,t,n,r){for(var i=[],o={},s=e.length,a=0,u,l;a<s;++a)for(o[t]=l=e[a],u=0;u<s;++u)o[n]=e[u],r(o)&&(i.push(Xn(o)),o={},o[t]=l);return i}const Loe={kde:pW,mixture:Nxe,normal:hW,lognormal:Rxe,uniform:Pxe},kEt="distributions",Foe="function",IEt="field";function Hxe(e,t){const n=e[Foe];$t(Loe,n)||De("Unknown distribution function: "+n);const r=Loe[n]();for(const i in e)i===IEt?r.data((e.from||t()).map(e[i])):i===kEt?r[i](e[i].map(o=>Hxe(o,t))):typeof r[i]===Foe&&r[i](e[i]);return r}function NW(e){ke.call(this,null,e)}const qxe=[{key:{function:"normal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"lognormal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"uniform"},params:[{name:"min",type:"number",default:0},{name:"max",type:"number",default:1}]},{key:{function:"kde"},params:[{name:"field",type:"field",required:!0},{name:"from",type:"data"},{name:"bandwidth",type:"number",default:0}]}],REt={key:{function:"mixture"},params:[{name:"distributions",type:"param",array:!0,params:qxe},{name:"weights",type:"number",array:!0}]};NW.Definition={type:"Density",metadata:{generates:!0},params:[{name:"extent",type:"number",array:!0,length:2},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"method",type:"string",default:"pdf",values:["pdf","cdf"]},{name:"distribution",type:"param",params:qxe.concat(REt)},{name:"as",type:"string",array:!0,default:["value","density"]}]};at(NW,ke,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=Hxe(e.distribution,NEt(t)),i=e.steps||e.minsteps||25,o=e.steps||e.maxsteps||200;let s=e.method||"pdf";s!=="pdf"&&s!=="cdf"&&De("Invalid density method: "+s),!e.extent&&!r.data&&De("Missing density extent parameter."),s=r[s];const a=e.as||["value","density"],u=e.extent||Sf(r.data()),l=P$(s,u,i,o).map(c=>{const f={};return f[a[0]]=c[0],f[a[1]]=c[1],Xn(f)});this.value&&(n.rem=this.value),this.value=n.add=n.source=l}return n}});function NEt(e){return()=>e.materialize(e.SOURCE).source}function Wxe(e,t){return e?e.map((n,r)=>t[r]||ci(n)):null}function PW(e,t,n){const r=[],i=f=>f(u);let o,s,a,u,l,c;if(t==null)r.push(e.map(n));else for(o={},s=0,a=e.length;s<a;++s)u=e[s],l=t.map(i),c=o[l],c||(o[l]=c=[],c.dims=l,r.push(c)),c.push(n(u));return r}const Gxe="bin";function DW(e){ke.call(this,null,e)}DW.Definition={type:"DotBin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"step",type:"number"},{name:"smooth",type:"boolean",default:!1},{name:"as",type:"string",default:Gxe}]};const PEt=(e,t)=>jC(Sf(e,t))/30;at(DW,ke,{transform(e,t){if(this.value&&!(e.modified()||t.changed()))return t;const n=t.materialize(t.SOURCE).source,r=PW(t.source,e.groupby,_s),i=e.smooth||!1,o=e.field,s=e.step||PEt(n,o),a=zy((p,m)=>o(p)-o(m)),u=e.as||Gxe,l=r.length;let c=1/0,f=-1/0,d=0,h;for(;d<l;++d){const p=r[d].sort(a);h=-1;for(const m of kxe(p,s,i,o))m<c&&(c=m),m>f&&(f=m),p[++h][u]=m}return this.value={start:c,stop:f,step:s},t.reflow(!0).modifies(u)}});function Yxe(e){gr.call(this,null,DEt,e),this.modified(!0)}at(Yxe,gr);function DEt(e){const t=e.expr;return this.value&&!e.modified("expr")?this.value:Ha(n=>t(n,e),ps(t),ci(t))}function OW(e){ke.call(this,[void 0,void 0],e)}OW.Definition={type:"Extent",metadata:{},params:[{name:"field",type:"field",required:!0}]};at(OW,ke,{transform(e,t){const n=this.value,r=e.field,i=t.changed()||t.modified(r.fields)||e.modified("field");let o=n[0],s=n[1];if((i||o==null)&&(o=1/0,s=-1/0),t.visit(i?t.SOURCE:t.ADD,a=>{const u=fs(r(a));u!=null&&(u<o&&(o=u),u>s&&(s=u))}),!Number.isFinite(o)||!Number.isFinite(s)){let a=ci(r);a&&(a=` for field "${a}"`),t.dataflow.warn(`Infinite extent${a}: [${o}, ${s}]`),o=s=void 0}this.value=[o,s]}});function $W(e,t){gr.call(this,e),this.parent=t,this.count=0}at($W,gr,{connect(e){return this.detachSubflow=e.detachSubflow,this.targets().add(e),e.source=this},add(e){this.count+=1,this.value.add.push(e)},rem(e){this.count-=1,this.value.rem.push(e)},mod(e){this.value.mod.push(e)},init(e){this.value.init(e,e.NO_SOURCE)},evaluate(){return this.value}});function D$(e){ke.call(this,{},e),this._keys=Q_();const t=this._targets=[];t.active=0,t.forEach=n=>{for(let r=0,i=t.active;r<i;++r)n(t[r],r,t)}}at(D$,ke,{activate(e){this._targets[this._targets.active++]=e},subflow(e,t,n,r){const i=this.value;let o=$t(i,e)&&i[e],s,a;return o?o.value.stamp<n.stamp&&(o.init(n),this.activate(o)):(a=r||(a=this._group[e])&&a.tuple,s=n.dataflow,o=new $W(n.fork(n.NO_SOURCE),this),s.add(o).connect(t(s,e,a)),i[e]=o,this.activate(o)),o},clean(){const e=this.value;let t=0;for(const n in e)if(e[n].count===0){const r=e[n].detachSubflow;r&&r(),delete e[n],++t}if(t){const n=this._targets.filter(r=>r&&r.count>0);this.initTargets(n)}},initTargets(e){const t=this._targets,n=t.length,r=e?e.length:0;let i=0;for(;i<r;++i)t[i]=e[i];for(;i<n&&t[i]!=null;++i)t[i]=null;t.active=r},transform(e,t){const n=t.dataflow,r=e.key,i=e.subflow,o=this._keys,s=e.modified("key"),a=u=>this.subflow(u,i,t);return this._group=e.group||{},this.initTargets(),t.visit(t.REM,u=>{const l=Dt(u),c=o.get(l);c!==void 0&&(o.delete(l),a(c).rem(u))}),t.visit(t.ADD,u=>{const l=r(u);o.set(Dt(u),l),a(l).add(u)}),s||t.modified(r.fields)?t.visit(t.MOD,u=>{const l=Dt(u),c=o.get(l),f=r(u);c===f?a(f).mod(u):(o.set(l,f),a(c).rem(u),a(f).add(u))}):t.changed(t.MOD)&&t.visit(t.MOD,u=>{a(o.get(Dt(u))).mod(u)}),s&&t.visit(t.REFLOW,u=>{const l=Dt(u),c=o.get(l),f=r(u);c!==f&&(o.set(l,f),a(c).rem(u),a(f).add(u))}),t.clean()?n.runAfter(()=>{this.clean(),o.clean()}):o.empty>n.cleanThreshold&&n.runAfter(o.clean),t}});function Kxe(e){gr.call(this,null,OEt,e)}at(Kxe,gr);function OEt(e){return this.value&&!e.modified()?this.value:Le(e.name)?ct(e.name).map(t=>ul(t)):ul(e.name,e.as)}function MW(e){ke.call(this,Q_(),e)}MW.Definition={type:"Filter",metadata:{changes:!0},params:[{name:"expr",type:"expr",required:!0}]};at(MW,ke,{transform(e,t){const n=t.dataflow,r=this.value,i=t.fork(),o=i.add,s=i.rem,a=i.mod,u=e.expr;let l=!0;t.visit(t.REM,f=>{const d=Dt(f);r.has(d)?r.delete(d):s.push(f)}),t.visit(t.ADD,f=>{u(f,e)?o.push(f):r.set(Dt(f),1)});function c(f){const d=Dt(f),h=u(f,e),p=r.get(d);h&&p?(r.delete(d),o.push(f)):!h&&!p?(r.set(d,1),s.push(f)):l&&h&&!p&&a.push(f)}return t.visit(t.MOD,c),e.modified()&&(l=!1,t.visit(t.REFLOW,c)),r.empty>n.cleanThreshold&&n.runAfter(r.clean),i}});function LW(e){ke.call(this,[],e)}LW.Definition={type:"Flatten",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"index",type:"string"},{name:"as",type:"string",array:!0}]};at(LW,ke,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=Wxe(r,e.as||[]),o=e.index||null,s=i.length;return n.rem=this.value,t.visit(t.SOURCE,a=>{const u=r.map(p=>p(a)),l=u.reduce((p,m)=>Math.max(p,m.length),0);let c=0,f,d,h;for(;c<l;++c){for(d=sW(a),f=0;f<s;++f)d[i[f]]=(h=u[f][c])==null?null:h;o&&(d[o]=c),n.add.push(d)}}),this.value=n.source=n.add,o&&n.modifies(o),n.modifies(i)}});function FW(e){ke.call(this,[],e)}FW.Definition={type:"Fold",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0,length:2,default:["key","value"]}]};at(FW,ke,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=r.map(ci),o=e.as||["key","value"],s=o[0],a=o[1],u=r.length;return n.rem=this.value,t.visit(t.SOURCE,l=>{for(let c=0,f;c<u;++c)f=sW(l),f[s]=i[c],f[a]=r[c](l),n.add.push(f)}),this.value=n.source=n.add,n.modifies(o)}});function jW(e){ke.call(this,null,e)}jW.Definition={type:"Formula",metadata:{modifies:!0},params:[{name:"expr",type:"expr",required:!0},{name:"as",type:"string",required:!0},{name:"initonly",type:"boolean"}]};at(jW,ke,{transform(e,t){const n=e.expr,r=e.as,i=e.modified(),o=e.initonly?t.ADD:i?t.SOURCE:t.modified(n.fields)||t.modified(r)?t.ADD_MOD:t.ADD;return i&&(t=t.materialize().reflow(!0)),e.initonly||t.modifies(r),t.visit(o,s=>s[r]=n(s,e))}});function Xxe(e){ke.call(this,[],e)}at(Xxe,ke,{transform(e,t){const n=t.fork(t.ALL),r=e.generator;let i=this.value,o=e.size-i.length,s,a,u;if(o>0){for(s=[];--o>=0;)s.push(u=Xn(r(e))),i.push(u);n.add=n.add.length?n.materialize(n.ADD).add.concat(s):s}else a=i.slice(0,-o),n.rem=n.rem.length?n.materialize(n.REM).rem.concat(a):a,i=i.slice(-o);return n.source=this.value=i,n}});const Y2={value:"value",median:Kge,mean:Yge,min:CR,max:Ld},$Et=[];function BW(e){ke.call(this,[],e)}BW.Definition={type:"Impute",metadata:{changes:!0},params:[{name:"field",type:"field",required:!0},{name:"key",type:"field",required:!0},{name:"keyvals",array:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"enum",default:"value",values:["value","mean","median","max","min"]},{name:"value",default:0}]};function MEt(e){var t=e.method||Y2.value,n;if(Y2[t]==null)De("Unrecognized imputation method: "+t);else return t===Y2.value?(n=e.value!==void 0?e.value:0,()=>n):Y2[t]}function LEt(e){const t=e.field;return n=>n?t(n):NaN}at(BW,ke,{transform(e,t){var n=t.fork(t.ALL),r=MEt(e),i=LEt(e),o=ci(e.field),s=ci(e.key),a=(e.groupby||[]).map(ci),u=FEt(t.source,e.groupby,e.key,e.keyvals),l=[],c=this.value,f=u.domain.length,d,h,p,m,g,y,v,_,w,E;for(g=0,_=u.length;g<_;++g)for(d=u[g],p=d.values,h=NaN,v=0;v<f;++v)if(d[v]==null){for(m=u.domain[v],E={_impute:!0},y=0,w=p.length;y<w;++y)E[a[y]]=p[y];E[s]=m,E[o]=Number.isNaN(h)?h=r(d,i):h,l.push(Xn(E))}return l.length&&(n.add=n.materialize(n.ADD).add.concat(l)),c.length&&(n.rem=n.materialize(n.REM).rem.concat(c)),this.value=l,n}});function FEt(e,t,n,r){var i=y=>y(g),o=[],s=r?r.slice():[],a={},u={},l,c,f,d,h,p,m,g;for(s.forEach((y,v)=>a[y]=v+1),d=0,m=e.length;d<m;++d)g=e[d],p=n(g),h=a[p]||(a[p]=s.push(p)),c=(l=t?t.map(i):$Et)+"",(f=u[c])||(f=u[c]=[],o.push(f),f.values=l),f[h-1]=g;return o.domain=s,o}function UW(e){ym.call(this,e)}UW.Definition={type:"JoinAggregate",metadata:{modifies:!0},params:[{name:"groupby",type:"field",array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"ops",type:"enum",array:!0,values:zC},{name:"as",type:"string",null:!0,array:!0},{name:"key",type:"field"}]};at(UW,ym,{transform(e,t){const n=this,r=e.modified();let i;return n.value&&(r||t.modified(n._inputs,!0))?(i=n.value=r?n.init(e):{},t.visit(t.SOURCE,o=>n.add(o))):(i=n.value=n.value||this.init(e),t.visit(t.REM,o=>n.rem(o)),t.visit(t.ADD,o=>n.add(o))),n.changes(),t.visit(t.SOURCE,o=>{tn(o,i[n.cellkey(o)].tuple)}),t.reflow(r).modifies(this._outputs)},changes(){const e=this._adds,t=this._mods;let n,r;for(n=0,r=this._alen;n<r;++n)this.celltuple(e[n]),e[n]=null;for(n=0,r=this._mlen;n<r;++n)this.celltuple(t[n]),t[n]=null;this._alen=this._mlen=0}});function zW(e){ke.call(this,null,e)}zW.Definition={type:"KDE",metadata:{generates:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"cumulative",type:"boolean",default:!1},{name:"counts",type:"boolean",default:!1},{name:"bandwidth",type:"number",default:0},{name:"extent",type:"number",array:!0,length:2},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"as",type:"string",array:!0,default:["value","density"]}]};at(zW,ke,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=PW(r,e.groupby,e.field),o=(e.groupby||[]).map(ci),s=e.bandwidth,a=e.cumulative?"cdf":"pdf",u=e.as||["value","density"],l=[];let c=e.extent,f=e.steps||e.minsteps||25,d=e.steps||e.maxsteps||200;a!=="pdf"&&a!=="cdf"&&De("Invalid density method: "+a),e.resolve==="shared"&&(c||(c=Sf(r,e.field)),f=d=e.steps||d),i.forEach(h=>{const p=pW(h,s)[a],m=e.counts?h.length:1,g=c||Sf(h);P$(p,g,f,d).forEach(y=>{const v={};for(let _=0;_<o.length;++_)v[o[_]]=h.dims[_];v[u[0]]=y[0],v[u[1]]=y[1]*m,l.push(Xn(v))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=l}return n}});function Qxe(e){gr.call(this,null,jEt,e)}at(Qxe,gr);function jEt(e){return this.value&&!e.modified()?this.value:Kq(e.fields,e.flat)}function Jxe(e){ke.call(this,[],e),this._pending=null}at(Jxe,ke,{transform(e,t){const n=t.dataflow;return this._pending?J6(this,t,this._pending):BEt(e)?t.StopPropagation:e.values?J6(this,t,n.parse(e.values,e.format)):e.async?{async:n.request(e.url,e.format).then(i=>(this._pending=ct(i.data),o=>o.touch(this)))}:n.request(e.url,e.format).then(r=>J6(this,t,ct(r.data)))}});function BEt(e){return e.modified("async")&&!(e.modified("values")||e.modified("url")||e.modified("format"))}function J6(e,t,n){n.forEach(Xn);const r=t.fork(t.NO_FIELDS&t.NO_SOURCE);return r.rem=e.value,e.value=r.source=r.add=n,e._pending=null,r.rem.length&&r.clean(!0),r}function VW(e){ke.call(this,{},e)}VW.Definition={type:"Lookup",metadata:{modifies:!0},params:[{name:"index",type:"index",params:[{name:"from",type:"data",required:!0},{name:"key",type:"field",required:!0}]},{name:"values",type:"field",array:!0},{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0},{name:"default",default:null}]};at(VW,ke,{transform(e,t){const n=e.fields,r=e.index,i=e.values,o=e.default==null?null:e.default,s=e.modified(),a=n.length;let u=s?t.SOURCE:t.ADD,l=t,c=e.as,f,d,h;return i?(d=i.length,a>1&&!c&&De('Multi-field lookup requires explicit "as" parameter.'),c&&c.length!==a*d&&De('The "as" parameter has too few output field names.'),c=c||i.map(ci),f=function(p){for(var m=0,g=0,y,v;m<a;++m)if(v=r.get(n[m](p)),v==null)for(y=0;y<d;++y,++g)p[c[g]]=o;else for(y=0;y<d;++y,++g)p[c[g]]=i[y](v)}):(c||De("Missing output field names."),f=function(p){for(var m=0,g;m<a;++m)g=r.get(n[m](p)),p[c[m]]=g??o}),s?l=t.reflow(!0):(h=n.some(p=>t.modified(p.fields)),u|=h?t.MOD:0),t.visit(u,f),l.modifies(c)}});function Zxe(e){gr.call(this,null,UEt,e)}at(Zxe,gr);function UEt(e){if(this.value&&!e.modified())return this.value;const t=e.extents,n=t.length;let r=1/0,i=-1/0,o,s;for(o=0;o<n;++o)s=t[o],s[0]<r&&(r=s[0]),s[1]>i&&(i=s[1]);return[r,i]}function eTe(e){gr.call(this,null,zEt,e)}at(eTe,gr);function zEt(e){return this.value&&!e.modified()?this.value:e.values.reduce((t,n)=>t.concat(n),[])}function tTe(e){ke.call(this,null,e)}at(tTe,ke,{transform(e,t){return this.modified(e.modified()),this.value=e,t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function HW(e){ym.call(this,e)}HW.Definition={type:"Pivot",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"value",type:"field",required:!0},{name:"op",type:"enum",values:zC,default:"sum"},{name:"limit",type:"number",default:0},{name:"key",type:"field"}]};at(HW,ym,{_transform:ym.prototype.transform,transform(e,t){return this._transform(VEt(e,t),t)}});function VEt(e,t){const n=e.field,r=e.value,i=(e.op==="count"?"__count__":e.op)||"sum",o=ps(n).concat(ps(r)),s=qEt(n,e.limit||0,t);return t.changed()&&e.set("__pivot__",null,null,!0),{key:e.key,groupby:e.groupby,ops:s.map(()=>i),fields:s.map(a=>HEt(a,n,r,o)),as:s.map(a=>a+""),modified:e.modified.bind(e)}}function HEt(e,t,n,r){return Ha(i=>t(i)===e?n(i):NaN,r,e+"")}function qEt(e,t,n){const r={},i=[];return n.visit(n.SOURCE,o=>{const s=e(o);r[s]||(r[s]=1,i.push(s))}),i.sort(_$),t?i.slice(0,t):i}function nTe(e){D$.call(this,e)}at(nTe,D$,{transform(e,t){const n=e.subflow,r=e.field,i=o=>this.subflow(Dt(o),n,t,o);return(e.modified("field")||r&&t.modified(ps(r)))&&De("PreFacet does not support field modification."),this.initTargets(),r?(t.visit(t.MOD,o=>{const s=i(o);r(o).forEach(a=>s.mod(a))}),t.visit(t.ADD,o=>{const s=i(o);r(o).forEach(a=>s.add(Xn(a)))}),t.visit(t.REM,o=>{const s=i(o);r(o).forEach(a=>s.rem(a))})):(t.visit(t.MOD,o=>i(o).mod(o)),t.visit(t.ADD,o=>i(o).add(o)),t.visit(t.REM,o=>i(o).rem(o))),t.clean()&&t.runAfter(()=>this.clean()),t}});function qW(e){ke.call(this,null,e)}qW.Definition={type:"Project",metadata:{generates:!0,changes:!0},params:[{name:"fields",type:"field",array:!0},{name:"as",type:"string",null:!0,array:!0}]};at(qW,ke,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=Wxe(e.fields,e.as||[]),o=r?(a,u)=>WEt(a,u,r,i):S$;let s;return this.value?s=this.value:(t=t.addAll(),s=this.value={}),t.visit(t.REM,a=>{const u=Dt(a);n.rem.push(s[u]),s[u]=null}),t.visit(t.ADD,a=>{const u=o(a,Xn({}));s[Dt(a)]=u,n.add.push(u)}),t.visit(t.MOD,a=>{n.mod.push(o(a,s[Dt(a)]))}),n}});function WEt(e,t,n,r){for(let i=0,o=n.length;i<o;++i)t[r[i]]=n[i](e);return t}function rTe(e){ke.call(this,null,e)}at(rTe,ke,{transform(e,t){return this.value=e.value,e.modified("value")?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});function WW(e){ke.call(this,null,e)}WW.Definition={type:"Quantile",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"probs",type:"number",array:!0},{name:"step",type:"number",default:.01},{name:"as",type:"string",array:!0,default:["prob","value"]}]};const GEt=1e-14;at(WW,ke,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=e.as||["prob","value"];if(this.value&&!e.modified()&&!t.changed())return n.source=this.value,n;const i=t.materialize(t.SOURCE).source,o=PW(i,e.groupby,e.field),s=(e.groupby||[]).map(ci),a=[],u=e.step||.01,l=e.probs||Ea(u/2,1-GEt,u),c=l.length;return o.forEach(f=>{const d=lW(f,l);for(let h=0;h<c;++h){const p={};for(let m=0;m<s.length;++m)p[s[m]]=f.dims[m];p[r[0]]=l[h],p[r[1]]=d[h],a.push(Xn(p))}}),this.value&&(n.rem=this.value),this.value=n.add=n.source=a,n}});function iTe(e){ke.call(this,null,e)}at(iTe,ke,{transform(e,t){let n,r;return this.value?r=this.value:(n=t=t.addAll(),r=this.value={}),e.derive&&(n=t.fork(t.NO_SOURCE),t.visit(t.REM,i=>{const o=Dt(i);n.rem.push(r[o]),r[o]=null}),t.visit(t.ADD,i=>{const o=sW(i);r[Dt(i)]=o,n.add.push(o)}),t.visit(t.MOD,i=>{const o=r[Dt(i)];for(const s in i)o[s]=i[s],n.modifies(s);n.mod.push(o)})),n}});function GW(e){ke.call(this,[],e),this.count=0}GW.Definition={type:"Sample",metadata:{},params:[{name:"size",type:"number",default:1e3}]};at(GW,ke,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.modified("size"),i=e.size,o=this.value.reduce((c,f)=>(c[Dt(f)]=1,c),{});let s=this.value,a=this.count,u=0;function l(c){let f,d;s.length<i?s.push(c):(d=~~((a+1)*fl()),d<s.length&&d>=u&&(f=s[d],o[Dt(f)]&&n.rem.push(f),s[d]=c)),++a}if(t.rem.length&&(t.visit(t.REM,c=>{const f=Dt(c);o[f]&&(o[f]=-1,n.rem.push(c)),--a}),s=s.filter(c=>o[Dt(c)]!==-1)),(t.rem.length||r)&&s.length<i&&t.source&&(u=a=s.length,t.visit(t.SOURCE,c=>{o[Dt(c)]||l(c)}),u=-1),r&&s.length>i){const c=s.length-i;for(let f=0;f<c;++f)o[Dt(s[f])]=-1,n.rem.push(s[f]);s=s.slice(c)}return t.mod.length&&t.visit(t.MOD,c=>{o[Dt(c)]&&n.mod.push(c)}),t.add.length&&t.visit(t.ADD,l),(t.add.length||u<0)&&(n.add=s.filter(c=>!o[Dt(c)])),this.count=a,this.value=n.source=s,n}});function YW(e){ke.call(this,null,e)}YW.Definition={type:"Sequence",metadata:{generates:!0,changes:!0},params:[{name:"start",type:"number",required:!0},{name:"stop",type:"number",required:!0},{name:"step",type:"number",default:1},{name:"as",type:"string",default:"data"}]};at(YW,ke,{transform(e,t){if(this.value&&!e.modified())return;const n=t.materialize().fork(t.MOD),r=e.as||"data";return n.rem=this.value?t.rem.concat(this.value):t.rem,this.value=Ea(e.start,e.stop,e.step||1).map(i=>{const o={};return o[r]=i,Xn(o)}),n.add=t.add.concat(this.value),n}});function oTe(e){ke.call(this,null,e),this.modified(!0)}at(oTe,ke,{transform(e,t){return this.value=t.source,t.changed()?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});function KW(e){ke.call(this,null,e)}const sTe=["unit0","unit1"];KW.Definition={type:"TimeUnit",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"units",type:"enum",values:Zq,array:!0},{name:"step",type:"number",default:1},{name:"maxbins",type:"number",default:40},{name:"extent",type:"date",array:!0},{name:"timezone",type:"enum",default:"local",values:["local","utc"]},{name:"as",type:"string",array:!0,length:2,default:sTe}]};at(KW,ke,{transform(e,t){const n=e.field,r=e.interval!==!1,i=e.timezone==="utc",o=this._floor(e,t),s=(i?Z_:J_)(o.unit).offset,a=e.as||sTe,u=a[0],l=a[1],c=o.step;let f=o.start||1/0,d=o.stop||-1/0,h=t.ADD;return(e.modified()||t.changed(t.REM)||t.modified(ps(n)))&&(t=t.reflow(!0),h=t.SOURCE,f=1/0,d=-1/0),t.visit(h,p=>{const m=n(p);let g,y;m==null?(p[u]=null,r&&(p[l]=null)):(p[u]=g=y=o(m),r&&(p[l]=y=s(g,c)),g<f&&(f=g),y>d&&(d=y))}),o.start=f,o.stop=d,t.modifies(r?a:u)},_floor(e,t){const n=e.timezone==="utc",{units:r,step:i}=e.units?{units:e.units,step:e.step||1}:rxe({extent:e.extent||Sf(t.materialize(t.SOURCE).source,e.field),maxbins:e.maxbins}),o=eW(r),s=this.value||{},a=(n?YEe:GEe)(o,i);return a.unit=In(o),a.units=o,a.step=i,a.start=s.start,a.stop=s.stop,this.value=a}});function aTe(e){ke.call(this,Q_(),e)}at(aTe,ke,{transform(e,t){const n=t.dataflow,r=e.field,i=this.value,o=a=>i.set(r(a),a);let s=!0;return e.modified("field")||t.modified(r.fields)?(i.clear(),t.visit(t.SOURCE,o)):t.changed()?(t.visit(t.REM,a=>i.delete(r(a))),t.visit(t.ADD,o)):s=!1,this.modified(s),i.empty>n.cleanThreshold&&n.runAfter(i.clean),t.fork()}});function uTe(e){ke.call(this,null,e)}at(uTe,ke,{transform(e,t){(!this.value||e.modified("field")||e.modified("sort")||t.changed()||e.sort&&t.modified(e.sort.fields))&&(this.value=(e.sort?t.source.slice().sort(zy(e.sort)):t.source).map(e.field))}});function YEt(e,t,n,r){const i=gS[e](t,n);return{init:i.init||fp,update:function(o,s){s[r]=i.next(o)}}}const gS={row_number:function(){return{next:e=>e.index+1}},rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,r=t.data;return n&&t.compare(r[n-1],r[n])?e=n+1:e}}},dense_rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,r=t.data;return n&&t.compare(r[n-1],r[n])?++e:e}}},percent_rank:function(){const e=gS.rank(),t=e.next;return{init:e.init,next:n=>(t(n)-1)/(n.data.length-1)}},cume_dist:function(){let e;return{init:()=>e=0,next:t=>{const n=t.data,r=t.compare;let i=t.index;if(e<i){for(;i+1<n.length&&!r(n[i],n[i+1]);)++i;e=i}return(1+e)/n.length}}},ntile:function(e,t){t=+t,t>0||De("ntile num must be greater than zero.");const n=gS.cume_dist(),r=n.next;return{init:n.init,next:i=>Math.ceil(t*r(i))}},lag:function(e,t){return t=+t||1,{next:n=>{const r=n.index-t;return r>=0?e(n.data[r]):null}}},lead:function(e,t){return t=+t||1,{next:n=>{const r=n.index+t,i=n.data;return r<i.length?e(i[r]):null}}},first_value:function(e){return{next:t=>e(t.data[t.i0])}},last_value:function(e){return{next:t=>e(t.data[t.i1-1])}},nth_value:function(e,t){return t=+t,t>0||De("nth_value nth must be greater than zero."),{next:n=>{const r=n.i0+(t-1);return r<n.i1?e(n.data[r]):null}}},prev_value:function(e){let t;return{init:()=>t=null,next:n=>{const r=e(n.data[n.index]);return r!=null?t=r:t}}},next_value:function(e){let t,n;return{init:()=>(t=null,n=-1),next:r=>{const i=r.data;return r.index<=n?t:(n=KEt(e,i,r.index))<0?(n=i.length,t=null):t=e(i[n])}}}};function KEt(e,t,n){for(let r=t.length;n<r;++n)if(e(t[n])!=null)return n;return-1}const XEt=Object.keys(gS);function lTe(e){const t=ct(e.ops),n=ct(e.fields),r=ct(e.params),i=ct(e.aggregate_params),o=ct(e.as),s=this.outputs=[],a=this.windows=[],u={},l={},c=[],f=[];let d=!0;function h(p){ct(ps(p)).forEach(m=>u[m]=1)}h(e.sort),t.forEach((p,m)=>{const g=n[m],y=r[m],v=i[m]||null,_=ci(g),w=Fxe(p,_,o[m]);if(h(g),s.push(w),$t(gS,p))a.push(YEt(p,g,y,w));else{if(g==null&&p!=="count"&&De("Null aggregate field specified."),p==="count"){c.push(w);return}d=!1;let E=l[_];E||(E=l[_]=[],E.field=g,f.push(E)),E.push(jxe(p,v,w))}}),(c.length||f.length)&&(this.cell=QEt(f,c,d)),this.inputs=Object.keys(u)}const cTe=lTe.prototype;cTe.init=function(){this.windows.forEach(e=>e.init()),this.cell&&this.cell.init()};cTe.update=function(e,t){const n=this.cell,r=this.windows,i=e.data,o=r&&r.length;let s;if(n){for(s=e.p0;s<e.i0;++s)n.rem(i[s]);for(s=e.p1;s<e.i1;++s)n.add(i[s]);n.set(t)}for(s=0;s<o;++s)r[s].update(e,t)};function QEt(e,t,n){e=e.map(u=>Uxe(u,u.field));const r={num:0,agg:null,store:!1,count:t};if(!n)for(var i=e.length,o=r.agg=Array(i),s=0;s<i;++s)o[s]=new e[s](r);if(r.store)var a=r.data=new CW;return r.add=function(u){if(r.num+=1,!n){a&&a.add(u);for(let l=0;l<i;++l)o[l].add(o[l].get(u),u)}},r.rem=function(u){if(r.num-=1,!n){a&&a.rem(u);for(let l=0;l<i;++l)o[l].rem(o[l].get(u),u)}},r.set=function(u){let l,c;for(a&&a.values(),l=0,c=t.length;l<c;++l)u[t[l]]=r.num;if(!n)for(l=0,c=o.length;l<c;++l)o[l].set(u)},r.init=function(){r.num=0,a&&a.reset();for(let u=0;u<i;++u)o[u].init()},r}function XW(e){ke.call(this,{},e),this._mlen=0,this._mods=[]}XW.Definition={type:"Window",metadata:{modifies:!0},params:[{name:"sort",type:"compare"},{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:XEt.concat(zC)},{name:"params",type:"number",null:!0,array:!0},{name:"aggregate_params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"frame",type:"number",null:!0,array:!0,length:2,default:[null,0]},{name:"ignorePeers",type:"boolean",default:!1}]};at(XW,ke,{transform(e,t){this.stamp=t.stamp;const n=e.modified(),r=zy(e.sort),i=H9(e.groupby),o=a=>this.group(i(a));let s=this.state;(!s||n)&&(s=this.state=new lTe(e)),n||t.modified(s.inputs)?(this.value={},t.visit(t.SOURCE,a=>o(a).add(a))):(t.visit(t.REM,a=>o(a).remove(a)),t.visit(t.ADD,a=>o(a).add(a)));for(let a=0,u=this._mlen;a<u;++a)JEt(this._mods[a],s,r,e);return this._mlen=0,this._mods=[],t.reflow(n).modifies(s.outputs)},group(e){let t=this.value[e];return t||(t=this.value[e]=zxe(Dt),t.stamp=-1),t.stamp<this.stamp&&(t.stamp=this.stamp,this._mods[this._mlen++]=t),t}});function JEt(e,t,n,r){const i=r.sort,o=i&&!r.ignorePeers,s=r.frame||[null,0],a=e.data(n),u=a.length,l=o?k_(i):null,c={i0:0,i1:0,p0:0,p1:0,index:0,data:a,compare:i||ws(-1)};t.init();for(let f=0;f<u;++f)ZEt(c,s,f,u),o&&ext(c,l),t.update(c,a[f])}function ZEt(e,t,n,r){e.p0=e.i0,e.p1=e.i1,e.i0=t[0]==null?0:Math.max(0,n-Math.abs(t[0])),e.i1=t[1]==null?r:Math.min(r,n+Math.abs(t[1])+1),e.index=n}function ext(e,t){const n=e.i0,r=e.i1-1,i=e.compare,o=e.data,s=o.length-1;n>0&&!i(o[n],o[n-1])&&(e.i0=t.left(o,o[n])),r<s&&!i(o[r],o[r+1])&&(e.i1=t.right(o,o[r]))}const txt=Object.freeze(Object.defineProperty({__proto__:null,aggregate:ym,bin:AW,collect:kW,compare:Vxe,countpattern:IW,cross:RW,density:NW,dotbin:DW,expression:Yxe,extent:OW,facet:D$,field:Kxe,filter:MW,flatten:LW,fold:FW,formula:jW,generate:Xxe,impute:BW,joinaggregate:UW,kde:zW,key:Qxe,load:Jxe,lookup:VW,multiextent:Zxe,multivalues:eTe,params:tTe,pivot:HW,prefacet:nTe,project:qW,proxy:rTe,quantile:WW,relay:iTe,sample:GW,sequence:YW,sieve:oTe,subflow:$W,timeunit:KW,tupleindex:aTe,values:uTe,window:XW},Symbol.toStringTag,{value:"Module"}));function Yp(e,t){if(typeof document<"u"&&document.createElement){const n=document.createElement("canvas");if(n&&n.getContext)return n.width=e,n.height=t,n}return null}const nxt=()=>typeof Image<"u"?Image:null;function QW(e,t,n){const r=e-t+n*2;return e?r>0?r:1:0}const rxt="identity",Mb="linear",dh="log",VC="pow",HC="sqrt",O$="symlog",X0="time",Q0="utc",pf="sequential",tw="diverging",Lb="quantile",$$="quantize",M$="threshold",JW="ordinal",q9="point",fTe="band",ZW="bin-ordinal",Xi="continuous",qC="discrete",WC="discretizing",_l="interpolating",eG="temporal";function ixt(e){return function(t){let n=t[0],r=t[1],i;return r<n&&(i=n,n=r,r=i),[e.invert(n),e.invert(r)]}}function oxt(e){return function(t){const n=e.range();let r=t[0],i=t[1],o=-1,s,a,u,l;for(i<r&&(a=r,r=i,i=a),u=0,l=n.length;u<l;++u)n[u]>=r&&n[u]<=i&&(o<0&&(o=u),s=u);if(!(o<0))return r=e.invertExtent(n[o]),i=e.invertExtent(n[s]),[r[0]===void 0?r[1]:r[0],i[1]===void 0?i[0]:i[1]]}}function tG(){const e=hC().unknown(void 0),t=e.domain,n=e.range;let r=[0,1],i,o,s=!1,a=0,u=0,l=.5;delete e.unknown;function c(){const f=t().length,d=r[1]<r[0],h=r[1-d],p=QW(f,a,u);let m=r[d-0];i=(h-m)/(p||1),s&&(i=Math.floor(i)),m+=(h-m-i*(f-a))*l,o=i*(1-a),s&&(m=Math.round(m),o=Math.round(o));const g=Ea(f).map(y=>m+i*y);return n(d?g.reverse():g)}return e.domain=function(f){return arguments.length?(t(f),c()):t()},e.range=function(f){return arguments.length?(r=[+f[0],+f[1]],c()):r.slice()},e.rangeRound=function(f){return r=[+f[0],+f[1]],s=!0,c()},e.bandwidth=function(){return o},e.step=function(){return i},e.round=function(f){return arguments.length?(s=!!f,c()):s},e.padding=function(f){return arguments.length?(u=Math.max(0,Math.min(1,f)),a=u,c()):a},e.paddingInner=function(f){return arguments.length?(a=Math.max(0,Math.min(1,f)),c()):a},e.paddingOuter=function(f){return arguments.length?(u=Math.max(0,Math.min(1,f)),c()):u},e.align=function(f){return arguments.length?(l=Math.max(0,Math.min(1,f)),c()):l},e.invertRange=function(f){if(f[0]==null||f[1]==null)return;const d=r[1]<r[0],h=d?n().reverse():n(),p=h.length-1;let m=+f[0],g=+f[1],y,v,_;if(!(m!==m||g!==g)&&(g<m&&(_=m,m=g,g=_),!(g<h[0]||m>r[1-d])))return y=Math.max(0,sm(h,m)-1),v=m===g?y:sm(h,g)-1,m-h[y]>o+1e-10&&++y,d&&(_=y,y=p-v,v=p-_),y>v?void 0:t().slice(y,v+1)},e.invert=function(f){const d=e.invertRange([f,f]);return d&&d[0]},e.copy=function(){return tG().domain(t()).range(r).round(s).paddingInner(a).paddingOuter(u).align(l)},c()}function dTe(e){const t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,e.copy=function(){return dTe(t())},e}function sxt(){return dTe(tG().paddingInner(1))}var axt=Array.prototype.map;function uxt(e){return axt.call(e,fs)}const lxt=Array.prototype.slice;function hTe(){let e=[],t=[];function n(r){return r==null||r!==r?void 0:t[(sm(e,r)-1)%t.length]}return n.domain=function(r){return arguments.length?(e=uxt(r),n):e.slice()},n.range=function(r){return arguments.length?(t=lxt.call(r),n):t.slice()},n.tickFormat=function(r,i){return Qye(e[0],In(e),r??10,i)},n.copy=function(){return hTe().domain(n.domain()).range(n.range())},n}const tP=new Map,pTe=Symbol("vega_scale");function mTe(e){return e[pTe]=!0,e}function cxt(e){return e&&e[pTe]===!0}function fxt(e,t,n){const r=function(){const o=t();return o.invertRange||(o.invertRange=o.invert?ixt(o):o.invertExtent?oxt(o):void 0),o.type=e,mTe(o)};return r.metadata=cc(ct(n)),r}function Hn(e,t,n){return arguments.length>1?(tP.set(e,fxt(e,t,n)),this):gTe(e)?tP.get(e):void 0}Hn(rxt,Jye);Hn(Mb,qm,Xi);Hn(dh,eve,[Xi,dh]);Hn(VC,cV,Xi);Hn(HC,ont,Xi);Hn(O$,tve,Xi);Hn(X0,lN,[Xi,eG]);Hn(Q0,_rt,[Xi,eG]);Hn(pf,mV,[Xi,_l]);Hn(`${pf}-${Mb}`,mV,[Xi,_l]);Hn(`${pf}-${dh}`,hve,[Xi,_l,dh]);Hn(`${pf}-${VC}`,gV,[Xi,_l]);Hn(`${pf}-${HC}`,wrt,[Xi,_l]);Hn(`${pf}-${O$}`,pve,[Xi,_l]);Hn(`${tw}-${Mb}`,mve,[Xi,_l]);Hn(`${tw}-${dh}`,gve,[Xi,_l,dh]);Hn(`${tw}-${VC}`,yV,[Xi,_l]);Hn(`${tw}-${HC}`,Ert,[Xi,_l]);Hn(`${tw}-${O$}`,yve,[Xi,_l]);Hn(Lb,nve,[WC,Lb]);Hn($$,rve,WC);Hn(M$,ive,WC);Hn(ZW,hTe,[qC,WC]);Hn(JW,hC,qC);Hn(fTe,tG,qC);Hn(q9,sxt,qC);function gTe(e){return tP.has(e)}function Hy(e,t){const n=tP.get(e);return n&&n.metadata[t]}function nG(e){return Hy(e,Xi)}function Fb(e){return Hy(e,qC)}function W9(e){return Hy(e,WC)}function yTe(e){return Hy(e,dh)}function dxt(e){return Hy(e,eG)}function vTe(e){return Hy(e,_l)}function bTe(e){return Hy(e,Lb)}const hxt=["clamp","base","constant","exponent"];function _Te(e,t){const n=t[0],r=In(t)-n;return function(i){return e(n+i*r)}}function L$(e,t,n){return Hz(rG(t||"rgb",n),e)}function wTe(e,t){const n=new Array(t),r=t+1;for(let i=0;i<t;)n[i]=e(++i/r);return n}function ETe(e,t,n){const r=n-t;let i,o,s;return!r||!Number.isFinite(r)?ws(.5):(i=(o=e.type).indexOf("-"),o=i<0?o:o.slice(i+1),s=Hn(o)().domain([t,n]).range([0,1]),hxt.forEach(a=>e[a]?s[a](e[a]()):0),s)}function rG(e,t){const n=uQe[pxt(e)];return t!=null&&n&&n.gamma?n.gamma(t):n}function pxt(e){return"interpolate"+e.toLowerCase().split("-").map(t=>t[0].toUpperCase()+t.slice(1)).join("")}const mxt={blues:"cfe1f2bed8eca8cee58fc1de74b2d75ba3cf4592c63181bd206fb2125ca40a4a90",greens:"d3eecdc0e6baabdda594d3917bc77d60ba6c46ab5e329a512089430e7735036429",greys:"e2e2e2d4d4d4c4c4c4b1b1b19d9d9d8888887575756262624d4d4d3535351e1e1e",oranges:"fdd8b3fdc998fdb87bfda55efc9244f87f2cf06b18e4580bd14904b93d029f3303",purples:"e2e1efd4d4e8c4c5e0b4b3d6a3a0cc928ec3827cb97566ae684ea25c3696501f8c",reds:"fdc9b4fcb49afc9e80fc8767fa7051f6573fec3f2fdc2a25c81b1db21218970b13",blueGreen:"d5efedc1e8e0a7ddd18bd2be70c6a958ba9144ad77319c5d2089460e7736036429",bluePurple:"ccddecbad0e4a8c2dd9ab0d4919cc98d85be8b6db28a55a6873c99822287730f71",greenBlue:"d3eecec5e8c3b1e1bb9bd8bb82cec269c2ca51b2cd3c9fc7288abd1675b10b60a1",orangeRed:"fddcaffdcf9bfdc18afdad77fb9562f67d53ee6545e24932d32d1ebf130da70403",purpleBlue:"dbdaebc8cee4b1c3de97b7d87bacd15b9fc93a90c01e7fb70b70ab056199045281",purpleBlueGreen:"dbd8eac8cee4b0c3de93b7d872acd1549fc83892bb1c88a3097f8702736b016353",purpleRed:"dcc9e2d3b3d7ce9eccd186c0da6bb2e14da0e23189d91e6fc61159ab07498f023a",redPurple:"fccfccfcbec0faa9b8f98faff571a5ec539ddb3695c41b8aa908808d0179700174",yellowGreen:"e4f4acd1eca0b9e2949ed68880c97c62bb6e47aa5e3297502083440e723b036034",yellowOrangeBrown:"feeaa1fedd84fecc63feb746fca031f68921eb7215db5e0bc54c05ab3d038f3204",yellowOrangeRed:"fee087fed16ffebd59fea849fd903efc7335f9522bee3423de1b20ca0b22af0225",blueOrange:"134b852f78b35da2cb9dcae1d2e5eff2f0ebfce0bafbbf74e8932fc5690d994a07",brownBlueGreen:"704108a0651ac79548e3c78af3e6c6eef1eac9e9e48ed1c74da79e187a72025147",purpleGreen:"5b1667834792a67fb6c9aed3e6d6e8eff0efd9efd5aedda971bb75368e490e5e29",purpleOrange:"4114696647968f83b7b9b4d6dadbebf3eeeafce0bafbbf74e8932fc5690d994a07",redBlue:"8c0d25bf363adf745ef4ae91fbdbc9f2efeed2e5ef9dcae15da2cb2f78b3134b85",redGrey:"8c0d25bf363adf745ef4ae91fcdccbfaf4f1e2e2e2c0c0c0969696646464343434",yellowGreenBlue:"eff9bddbf1b4bde5b594d5b969c5be45b4c22c9ec02182b82163aa23479c1c3185",redYellowBlue:"a50026d4322cf16e43fcac64fedd90faf8c1dcf1ecabd6e875abd04a74b4313695",redYellowGreen:"a50026d4322cf16e43fcac63fedd8df9f7aed7ee8ea4d86e64bc6122964f006837",pinkYellowGreen:"8e0152c0267edd72adf0b3d6faddedf5f3efe1f2cab6de8780bb474f9125276419",spectral:"9e0142d13c4bf0704afcac63fedd8dfbf8b0e0f3a1a9dda269bda94288b55e4fa2",viridis:"440154470e61481a6c482575472f7d443a834144873d4e8a39568c35608d31688e2d708e2a788e27818e23888e21918d1f988b1fa08822a8842ab07f35b77943bf7154c56866cc5d7ad1518fd744a5db36bcdf27d2e21be9e51afde725",magma:"0000040404130b0924150e3720114b2c11603b0f704a107957157e651a80721f817f24828c29819a2e80a8327db6377ac43c75d1426fde4968e95462f1605df76f5cfa7f5efc8f65fe9f6dfeaf78febf84fece91fddea0fcedaffcfdbf",inferno:"0000040403130c0826170c3b240c4f330a5f420a68500d6c5d126e6b176e781c6d86216b932667a12b62ae305cbb3755c73e4cd24644dd513ae65c30ed6925f3771af8850ffb9506fca50afcb519fac62df6d645f2e661f3f484fcffa4",plasma:"0d088723069033059742039d5002a25d01a66a00a87801a88405a7900da49c179ea72198b12a90ba3488c33d80cb4779d35171da5a69e16462e76e5bed7953f2834cf68f44fa9a3dfca636fdb32ffec029fcce25f9dc24f5ea27f0f921",cividis:"00205100235800265d002961012b65042e670831690d346b11366c16396d1c3c6e213f6e26426e2c456e31476e374a6e3c4d6e42506e47536d4c566d51586e555b6e5a5e6e5e616e62646f66676f6a6a706e6d717270717573727976737c79747f7c75827f758682768985778c8877908b78938e789691789a94789e9778a19b78a59e77a9a177aea575b2a874b6ab73bbaf71c0b26fc5b66dc9b96acebd68d3c065d8c462ddc85fe2cb5ce7cf58ebd355f0d652f3da4ff7de4cfae249fce647",rainbow:"6e40aa883eb1a43db3bf3cafd83fa4ee4395fe4b83ff576eff6659ff7847ff8c38f3a130e2b72fcfcc36bee044aff05b8ff4576ff65b52f6673af27828ea8d1ddfa319d0b81cbecb23abd82f96e03d82e14c6edb5a5dd0664dbf6e40aa",sinebow:"ff4040fc582af47218e78d0bd5a703bfbf00a7d5038de70b72f41858fc2a40ff402afc5818f4720be78d03d5a700bfbf03a7d50b8de71872f42a58fc4040ff582afc7218f48d0be7a703d5bf00bfd503a7e70b8df41872fc2a58ff4040",turbo:"23171b32204a3e2a71453493493eae4b49c54a53d7485ee44569ee4074f53c7ff8378af93295f72e9ff42ba9ef28b3e926bce125c5d925cdcf27d5c629dcbc2de3b232e9a738ee9d3ff39347f68950f9805afc7765fd6e70fe667cfd5e88fc5795fb51a1f84badf545b9f140c5ec3cd0e637dae034e4d931ecd12ef4c92bfac029ffb626ffad24ffa223ff9821ff8d1fff821dff771cfd6c1af76118f05616e84b14df4111d5380fcb2f0dc0260ab61f07ac1805a313029b0f00950c00910b00",browns:"eedbbdecca96e9b97ae4a865dc9856d18954c7784cc0673fb85536ad44339f3632",tealBlues:"bce4d89dd3d181c3cb65b3c245a2b9368fae347da0306a932c5985",teals:"bbdfdfa2d4d58ac9c975bcbb61b0af4da5a43799982b8b8c1e7f7f127273006667",warmGreys:"dcd4d0cec5c1c0b8b4b3aaa7a59c9998908c8b827f7e7673726866665c5a59504e",goldGreen:"f4d166d5ca60b6c35c98bb597cb25760a6564b9c533f8f4f33834a257740146c36",goldOrange:"f4d166f8be5cf8aa4cf5983bf3852aef701be2621fd65322c54923b142239e3a26",goldRed:"f4d166f6be59f9aa51fc964ef6834bee734ae56249db5247cf4244c43141b71d3e",lightGreyRed:"efe9e6e1dad7d5cbc8c8bdb9bbaea9cd967ddc7b43e15f19df4011dc000b",lightGreyTeal:"e4eaead6dcddc8ced2b7c2c7a6b4bc64b0bf22a6c32295c11f85be1876bc",lightMulti:"e0f1f2c4e9d0b0de9fd0e181f6e072f6c053f3993ef77440ef4a3c",lightOrange:"f2e7daf7d5baf9c499fab184fa9c73f68967ef7860e8645bde515bd43d5b",lightTealBlue:"e3e9e0c0dccf9aceca7abfc859afc0389fb9328dad2f7ca0276b95255988",darkBlue:"3232322d46681a5c930074af008cbf05a7ce25c0dd38daed50f3faffffff",darkGold:"3c3c3c584b37725e348c7631ae8b2bcfa424ecc31ef9de30fff184ffffff",darkGreen:"3a3a3a215748006f4d048942489e4276b340a6c63dd2d836ffeb2cffffaa",darkMulti:"3737371f5287197d8c29a86995ce3fffe800ffffff",darkRed:"3434347036339e3c38cc4037e75d1eec8620eeab29f0ce32ffeb2c"},gxt={accent:Trt,category10:xrt,category20:"1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5",category20b:"393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6",category20c:"3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9",dark2:Srt,observable10:Crt,paired:Art,pastel1:krt,pastel2:Irt,set1:Rrt,set2:Nrt,set3:Prt,tableau10:"4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac",tableau20:"4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5"};function xTe(e){if(Le(e))return e;const t=e.length/6|0,n=new Array(t);for(let r=0;r<t;)n[r]="#"+e.slice(r*6,++r*6);return n}function TTe(e,t){for(const n in e)iG(n,t(e[n]))}const joe={};TTe(gxt,xTe);TTe(mxt,e=>L$(xTe(e)));function iG(e,t){return e=e&&e.toLowerCase(),arguments.length>1?(joe[e]=t,this):joe[e]}const cI="symbol",yxt="discrete",vxt="gradient",bxt=e=>Le(e)?e.map(t=>String(t)):String(e),_xt=(e,t)=>e[1]-t[1],wxt=(e,t)=>t[1]-e[1];function oG(e,t,n){let r;return jn(t)&&(e.bins&&(t=Math.max(t,e.bins.length)),n!=null&&(t=Math.min(t,Math.floor(jC(e.domain())/n||1)+1))),ht(t)&&(r=t.step,t=t.interval),ft(t)&&(t=e.type===X0?J_(t):e.type==Q0?Z_(t):De("Only time and utc scales accept interval strings."),r&&(t=t.every(r))),t}function STe(e,t,n){let r=e.range(),i=r[0],o=In(r),s=_xt;if(i>o&&(r=o,o=i,i=r,s=wxt),i=Math.floor(i),o=Math.ceil(o),t=t.map(a=>[a,e(a)]).filter(a=>i<=a[1]&&a[1]<=o).sort(s).map(a=>a[0]),n>0&&t.length>1){const a=[t[0],In(t)];for(;t.length>n&&t.length>=3;)t=t.filter((u,l)=>!(l%2));t.length<3&&(t=a)}return t}function sG(e,t){return e.bins?STe(e,e.bins,t):e.ticks?e.ticks(t):e.domain()}function CTe(e,t,n,r,i,o){const s=t.type;let a=bxt;if(s===X0||i===X0)a=e.timeFormat(r);else if(s===Q0||i===Q0)a=e.utcFormat(r);else if(yTe(s)){const u=e.formatFloat(r);if(o||t.bins)a=u;else{const l=ATe(t,n,!1);a=c=>l(c)?u(c):""}}else if(t.tickFormat){const u=t.domain();a=e.formatSpan(u[0],u[u.length-1],n,r)}else r&&(a=e.format(r));return a}function ATe(e,t,n){const r=sG(e,t),i=e.base(),o=Math.log(i),s=Math.max(1,i*t/r.length),a=u=>{let l=u/Math.pow(i,Math.round(Math.log(u)/o));return l*i<i-.5&&(l*=i),l<=s};return n?r.filter(a):a}const G9={[Lb]:"quantiles",[$$]:"thresholds",[M$]:"domain"},kTe={[Lb]:"quantiles",[$$]:"domain"};function ITe(e,t){return e.bins?Txt(e.bins):e.type===dh?ATe(e,t,!0):G9[e.type]?xxt(e[G9[e.type]]()):sG(e,t)}function Ext(e,t,n){const r=t[kTe[t.type]](),i=r.length;let o=i>1?r[1]-r[0]:r[0],s;for(s=1;s<i;++s)o=Math.min(o,r[s]-r[s-1]);return e.formatSpan(0,o,3*10,n)}function xxt(e){const t=[-1/0].concat(e);return t.max=1/0,t}function Txt(e){const t=e.slice(0,-1);return t.max=In(e),t}const Sxt=e=>G9[e.type]||e.bins;function RTe(e,t,n,r,i,o,s){const a=kTe[t.type]&&o!==X0&&o!==Q0?Ext(e,t,i):CTe(e,t,n,i,o,s);return r===cI&&Sxt(t)?Cxt(a):r===yxt?Axt(a):kxt(a)}const Cxt=e=>(t,n,r)=>{const i=Boe(r[n+1],Boe(r.max,1/0)),o=Uoe(t,e),s=Uoe(i,e);return o&&s?o+"  "+s:s?"< "+s:" "+o},Boe=(e,t)=>e??t,Axt=e=>(t,n)=>n?e(t):null,kxt=e=>t=>e(t),Uoe=(e,t)=>Number.isFinite(e)?t(e):null;function Ixt(e){const t=e.domain(),n=t.length-1;let r=+t[0],i=+In(t),o=i-r;if(e.type===M$){const s=n?o/n:.1;r-=s,i+=s,o=i-r}return s=>(s-r)/o}function Rxt(e,t,n,r){const i=r||t.type;return ft(n)&&dxt(i)&&(n=n.replace(/%a/g,"%A").replace(/%b/g,"%B")),!n&&i===X0?e.timeFormat("%A, %d %B %Y, %X"):!n&&i===Q0?e.utcFormat("%A, %d %B %Y, %X UTC"):RTe(e,t,5,null,n,r,!0)}function NTe(e,t,n){n=n||{};const r=Math.max(3,n.maxlen||7),i=Rxt(e,t,n.format,n.formatType);if(W9(t.type)){const o=ITe(t).slice(1).map(i),s=o.length;return`${s} boundar${s===1?"y":"ies"}: ${o.join(", ")}`}else if(Fb(t.type)){const o=t.domain(),s=o.length,a=s>r?o.slice(0,r-2).map(i).join(", ")+", ending with "+o.slice(-1).map(i):o.map(i).join(", ");return`${s} value${s===1?"":"s"}: ${a}`}else{const o=t.domain();return`values from ${i(o[0])} to ${i(In(o))}`}}let PTe=0;function Nxt(){PTe=0}const nP="p_";function aG(e){return e&&e.gradient}function DTe(e,t,n){const r=e.gradient;let i=e.id,o=r==="radial"?nP:"";return i||(i=e.id="gradient_"+PTe++,r==="radial"?(e.x1=Nc(e.x1,.5),e.y1=Nc(e.y1,.5),e.r1=Nc(e.r1,0),e.x2=Nc(e.x2,.5),e.y2=Nc(e.y2,.5),e.r2=Nc(e.r2,.5),o=nP):(e.x1=Nc(e.x1,0),e.y1=Nc(e.y1,0),e.x2=Nc(e.x2,1),e.y2=Nc(e.y2,0))),t[i]=e,"url("+(n||"")+"#"+o+i+")"}function Nc(e,t){return e??t}function OTe(e,t){var n=[],r;return r={gradient:"linear",x1:e?e[0]:0,y1:e?e[1]:0,x2:t?t[0]:1,y2:t?t[1]:0,stops:n,stop:function(i,o){return n.push({offset:i,color:o}),r}}}const zoe={basis:{curve:Eve},"basis-closed":{curve:qrt},"basis-open":{curve:Wrt},bundle:{curve:Grt,tension:"beta",value:.85},cardinal:{curve:Yrt,tension:"tension",value:0},"cardinal-open":{curve:Xrt,tension:"tension",value:0},"cardinal-closed":{curve:Krt,tension:"tension",value:0},"catmull-rom":{curve:Qrt,tension:"alpha",value:.5},"catmull-rom-closed":{curve:Jrt,tension:"alpha",value:.5},"catmull-rom-open":{curve:Zrt,tension:"alpha",value:.5},linear:{curve:vV},"linear-closed":{curve:eit},monotone:{horizontal:nit,vertical:tit},natural:{curve:rit},step:{curve:iit},"step-after":{curve:sit},"step-before":{curve:oit}};function uG(e,t,n){var r=$t(zoe,e)&&zoe[e],i=null;return r&&(i=r.curve||r[t||"vertical"],r.tension&&n!=null&&(i=i[r.tension](n))),i}const Pxt={m:2,l:2,h:1,v:1,z:0,c:6,s:4,q:4,t:2,a:7},Dxt=/[mlhvzcsqta]([^mlhvzcsqta]+|$)/gi,Oxt=/^[+-]?(([0-9]*\.[0-9]+)|([0-9]+\.)|([0-9]+))([eE][+-]?[0-9]+)?/,$xt=/^((\s+,?\s*)|(,\s*))/,Mxt=/^[01]/;function jb(e){const t=[];return(e.match(Dxt)||[]).forEach(r=>{let i=r[0];const o=i.toLowerCase(),s=Pxt[o],a=Lxt(o,s,r.slice(1).trim()),u=a.length;if(u<s||u&&u%s!==0)throw Error("Invalid SVG path, incorrect parameter count");if(t.push([i,...a.slice(0,s)]),u!==s){o==="m"&&(i=i==="M"?"L":"l");for(let l=s;l<u;l+=s)t.push([i,...a.slice(l,l+s)])}}),t}function Lxt(e,t,n){const r=[];for(let i=0;t&&i<n.length;)for(let o=0;o<t;++o){const s=e==="a"&&(o===3||o===4)?Mxt:Oxt,a=n.slice(i).match(s);if(a===null)throw Error("Invalid SVG path, incorrect parameter type");i+=a[0].length,r.push(+a[0]);const u=n.slice(i).match($xt);u!==null&&(i+=u[0].length)}return r}const vm=Math.PI/180,Fxt=1e-14,Wg=Math.PI/2,Gc=Math.PI*2,Sv=Math.sqrt(3)/2;var Z6={},e4={},$Te=[].join;function jxt(e,t,n,r,i,o,s,a,u){const l=$Te.call(arguments);if(Z6[l])return Z6[l];const c=s*vm,f=Math.sin(c),d=Math.cos(c);n=Math.abs(n),r=Math.abs(r);const h=d*(a-e)*.5+f*(u-t)*.5,p=d*(u-t)*.5-f*(a-e)*.5;let m=h*h/(n*n)+p*p/(r*r);m>1&&(m=Math.sqrt(m),n*=m,r*=m);const g=d/n,y=f/n,v=-f/r,_=d/r,w=g*a+y*u,E=v*a+_*u,S=g*e+y*t,T=v*e+_*t;let A=1/((S-w)*(S-w)+(T-E)*(T-E))-.25;A<0&&(A=0);let R=Math.sqrt(A);o==i&&(R=-R);const N=.5*(w+S)-R*(T-E),O=.5*(E+T)+R*(S-w),D=Math.atan2(E-O,w-N);let F=Math.atan2(T-O,S-N)-D;F<0&&o===1?F+=Gc:F>0&&o===0&&(F-=Gc);const L=Math.ceil(Math.abs(F/(Wg+.001))),B=[];for(let U=0;U<L;++U){const H=D+U*F/L,P=D+(U+1)*F/L;B[U]=[N,O,H,P,n,r,f,d]}return Z6[l]=B}function Bxt(e){const t=$Te.call(e);if(e4[t])return e4[t];var n=e[0],r=e[1],i=e[2],o=e[3],s=e[4],a=e[5],u=e[6],l=e[7];const c=l*s,f=-u*a,d=u*s,h=l*a,p=Math.cos(i),m=Math.sin(i),g=Math.cos(o),y=Math.sin(o),v=.5*(o-i),_=Math.sin(v*.5),w=8/3*_*_/Math.sin(v),E=n+p-w*m,S=r+m+w*p,T=n+g,C=r+y,A=T+w*y,R=C-w*g;return e4[t]=[c*E+f*S,d*E+h*S,c*A+f*R,d*A+h*R,c*T+f*C,d*T+h*C]}const Mu=["l",0,0,0,0,0,0,0];function Uxt(e,t,n){const r=Mu[0]=e[0];if(r==="a"||r==="A")Mu[1]=t*e[1],Mu[2]=n*e[2],Mu[3]=e[3],Mu[4]=e[4],Mu[5]=e[5],Mu[6]=t*e[6],Mu[7]=n*e[7];else if(r==="h"||r==="H")Mu[1]=t*e[1];else if(r==="v"||r==="V")Mu[1]=n*e[1];else for(var i=1,o=e.length;i<o;++i)Mu[i]=(i%2==1?t:n)*e[i];return Mu}function yS(e,t,n,r,i,o){var s,a=null,u=0,l=0,c=0,f=0,d,h,p,m,g=0,y=0;n==null&&(n=0),r==null&&(r=0),i==null&&(i=1),o==null&&(o=i),e.beginPath&&e.beginPath();for(var v=0,_=t.length;v<_;++v){switch(s=t[v],(i!==1||o!==1)&&(s=Uxt(s,i,o)),s[0]){case"l":u+=s[1],l+=s[2],e.lineTo(u+n,l+r);break;case"L":u=s[1],l=s[2],e.lineTo(u+n,l+r);break;case"h":u+=s[1],e.lineTo(u+n,l+r);break;case"H":u=s[1],e.lineTo(u+n,l+r);break;case"v":l+=s[1],e.lineTo(u+n,l+r);break;case"V":l=s[1],e.lineTo(u+n,l+r);break;case"m":u+=s[1],l+=s[2],g=u,y=l,e.moveTo(u+n,l+r);break;case"M":u=s[1],l=s[2],g=u,y=l,e.moveTo(u+n,l+r);break;case"c":d=u+s[5],h=l+s[6],c=u+s[3],f=l+s[4],e.bezierCurveTo(u+s[1]+n,l+s[2]+r,c+n,f+r,d+n,h+r),u=d,l=h;break;case"C":u=s[5],l=s[6],c=s[3],f=s[4],e.bezierCurveTo(s[1]+n,s[2]+r,c+n,f+r,u+n,l+r);break;case"s":d=u+s[3],h=l+s[4],c=2*u-c,f=2*l-f,e.bezierCurveTo(c+n,f+r,u+s[1]+n,l+s[2]+r,d+n,h+r),c=u+s[1],f=l+s[2],u=d,l=h;break;case"S":d=s[3],h=s[4],c=2*u-c,f=2*l-f,e.bezierCurveTo(c+n,f+r,s[1]+n,s[2]+r,d+n,h+r),u=d,l=h,c=s[1],f=s[2];break;case"q":d=u+s[3],h=l+s[4],c=u+s[1],f=l+s[2],e.quadraticCurveTo(c+n,f+r,d+n,h+r),u=d,l=h;break;case"Q":d=s[3],h=s[4],e.quadraticCurveTo(s[1]+n,s[2]+r,d+n,h+r),u=d,l=h,c=s[1],f=s[2];break;case"t":d=u+s[1],h=l+s[2],a[0].match(/[QqTt]/)===null?(c=u,f=l):a[0]==="t"?(c=2*u-p,f=2*l-m):a[0]==="q"&&(c=2*u-c,f=2*l-f),p=c,m=f,e.quadraticCurveTo(c+n,f+r,d+n,h+r),u=d,l=h,c=u+s[1],f=l+s[2];break;case"T":d=s[1],h=s[2],c=2*u-c,f=2*l-f,e.quadraticCurveTo(c+n,f+r,d+n,h+r),u=d,l=h;break;case"a":Voe(e,u+n,l+r,[s[1],s[2],s[3],s[4],s[5],s[6]+u+n,s[7]+l+r]),u+=s[6],l+=s[7];break;case"A":Voe(e,u+n,l+r,[s[1],s[2],s[3],s[4],s[5],s[6]+n,s[7]+r]),u=s[6],l=s[7];break;case"z":case"Z":u=g,l=y,e.closePath();break}a=s}}function Voe(e,t,n,r){const i=jxt(r[5],r[6],r[0],r[1],r[3],r[4],r[2],t,n);for(let o=0;o<i.length;++o){const s=Bxt(i[o]);e.bezierCurveTo(s[0],s[1],s[2],s[3],s[4],s[5])}}const Hoe=.5773502691896257,qoe={circle:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(n,0),e.arc(0,0,n,0,Gc)}},cross:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/2.5;e.moveTo(-n,-r),e.lineTo(-n,r),e.lineTo(-r,r),e.lineTo(-r,n),e.lineTo(r,n),e.lineTo(r,r),e.lineTo(n,r),e.lineTo(n,-r),e.lineTo(r,-r),e.lineTo(r,-n),e.lineTo(-r,-n),e.lineTo(-r,-r),e.closePath()}},diamond:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(0,-n),e.lineTo(n,0),e.lineTo(0,n),e.closePath()}},square:{draw:function(e,t){var n=Math.sqrt(t),r=-n/2;e.rect(r,r,n,n)}},arrow:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/7,i=n/2.5,o=n/8;e.moveTo(-r,n),e.lineTo(r,n),e.lineTo(r,-o),e.lineTo(i,-o),e.lineTo(0,-n),e.lineTo(-i,-o),e.lineTo(-r,-o),e.closePath()}},wedge:{draw:function(e,t){var n=Math.sqrt(t)/2,r=Sv*n,i=r-n*Hoe,o=n/4;e.moveTo(0,-r-i),e.lineTo(-o,r-i),e.lineTo(o,r-i),e.closePath()}},triangle:{draw:function(e,t){var n=Math.sqrt(t)/2,r=Sv*n,i=r-n*Hoe;e.moveTo(0,-r-i),e.lineTo(-n,r-i),e.lineTo(n,r-i),e.closePath()}},"triangle-up":{draw:function(e,t){var n=Math.sqrt(t)/2,r=Sv*n;e.moveTo(0,-r),e.lineTo(-n,r),e.lineTo(n,r),e.closePath()}},"triangle-down":{draw:function(e,t){var n=Math.sqrt(t)/2,r=Sv*n;e.moveTo(0,r),e.lineTo(-n,-r),e.lineTo(n,-r),e.closePath()}},"triangle-right":{draw:function(e,t){var n=Math.sqrt(t)/2,r=Sv*n;e.moveTo(r,0),e.lineTo(-r,-n),e.lineTo(-r,n),e.closePath()}},"triangle-left":{draw:function(e,t){var n=Math.sqrt(t)/2,r=Sv*n;e.moveTo(-r,0),e.lineTo(r,-n),e.lineTo(r,n),e.closePath()}},stroke:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(n,0)}}};function MTe(e){return $t(qoe,e)?qoe[e]:zxt(e)}var t4={};function zxt(e){if(!$t(t4,e)){const t=jb(e);t4[e]={draw:function(n,r){yS(n,t,0,0,Math.sqrt(r)/2)}}}return t4[e]}const zh=.448084975506;function Vxt(e){return e.x}function Hxt(e){return e.y}function qxt(e){return e.width}function Wxt(e){return e.height}function ad(e){return typeof e=="function"?e:()=>+e}function K2(e,t,n){return Math.max(t,Math.min(e,n))}function LTe(){var e=Vxt,t=Hxt,n=qxt,r=Wxt,i=ad(0),o=i,s=i,a=i,u=null;function l(c,f,d){var h,p=f??+e.call(this,c),m=d??+t.call(this,c),g=+n.call(this,c),y=+r.call(this,c),v=Math.min(g,y)/2,_=K2(+i.call(this,c),0,v),w=K2(+o.call(this,c),0,v),E=K2(+s.call(this,c),0,v),S=K2(+a.call(this,c),0,v);if(u||(u=h=pO()),_<=0&&w<=0&&E<=0&&S<=0)u.rect(p,m,g,y);else{var T=p+g,C=m+y;u.moveTo(p+_,m),u.lineTo(T-w,m),u.bezierCurveTo(T-zh*w,m,T,m+zh*w,T,m+w),u.lineTo(T,C-S),u.bezierCurveTo(T,C-zh*S,T-zh*S,C,T-S,C),u.lineTo(p+E,C),u.bezierCurveTo(p+zh*E,C,p,C-zh*E,p,C-E),u.lineTo(p,m+_),u.bezierCurveTo(p,m+zh*_,p+zh*_,m,p+_,m),u.closePath()}if(h)return u=null,h+""||null}return l.x=function(c){return arguments.length?(e=ad(c),l):e},l.y=function(c){return arguments.length?(t=ad(c),l):t},l.width=function(c){return arguments.length?(n=ad(c),l):n},l.height=function(c){return arguments.length?(r=ad(c),l):r},l.cornerRadius=function(c,f,d,h){return arguments.length?(i=ad(c),o=f!=null?ad(f):i,a=d!=null?ad(d):i,s=h!=null?ad(h):o,l):i},l.context=function(c){return arguments.length?(u=c??null,l):u},l}function FTe(){var e,t,n,r,i=null,o,s,a,u;function l(f,d,h){const p=h/2;if(o){var m=a-d,g=f-s;if(m||g){var y=Math.hypot(m,g),v=(m/=y)*u,_=(g/=y)*u,w=Math.atan2(g,m);i.moveTo(s-v,a-_),i.lineTo(f-m*p,d-g*p),i.arc(f,d,p,w-Math.PI,w),i.lineTo(s+v,a+_),i.arc(s,a,u,w,w+Math.PI)}else i.arc(f,d,p,0,Gc);i.closePath()}else o=1;s=f,a=d,u=p}function c(f){var d,h=f.length,p,m=!1,g;for(i==null&&(i=g=pO()),d=0;d<=h;++d)!(d<h&&r(p=f[d],d,f))===m&&(m=!m)&&(o=0),m&&l(+e(p,d,f),+t(p,d,f),+n(p,d,f));if(g)return i=null,g+""||null}return c.x=function(f){return arguments.length?(e=f,c):e},c.y=function(f){return arguments.length?(t=f,c):t},c.size=function(f){return arguments.length?(n=f,c):n},c.defined=function(f){return arguments.length?(r=f,c):r},c.context=function(f){return arguments.length?(f==null?i=null:i=f,c):i},c}function GC(e,t){return e??t}const YC=e=>e.x||0,KC=e=>e.y||0,Gxt=e=>e.width||0,Yxt=e=>e.height||0,Kxt=e=>(e.x||0)+(e.width||0),Xxt=e=>(e.y||0)+(e.height||0),Qxt=e=>e.startAngle||0,Jxt=e=>e.endAngle||0,Zxt=e=>e.padAngle||0,eTt=e=>e.innerRadius||0,tTt=e=>e.outerRadius||0,nTt=e=>e.cornerRadius||0,rTt=e=>GC(e.cornerRadiusTopLeft,e.cornerRadius)||0,iTt=e=>GC(e.cornerRadiusTopRight,e.cornerRadius)||0,oTt=e=>GC(e.cornerRadiusBottomRight,e.cornerRadius)||0,sTt=e=>GC(e.cornerRadiusBottomLeft,e.cornerRadius)||0,aTt=e=>GC(e.size,64),uTt=e=>e.size||1,F$=e=>e.defined!==!1,lTt=e=>MTe(e.shape||"circle"),cTt=qT().startAngle(Qxt).endAngle(Jxt).padAngle(Zxt).innerRadius(eTt).outerRadius(tTt).cornerRadius(nTt),fTt=wve().x(YC).y1(KC).y0(Xxt).defined(F$),dTt=wve().y(KC).x1(YC).x0(Kxt).defined(F$),hTt=bV().x(YC).y(KC).defined(F$),pTt=LTe().x(YC).y(KC).width(Gxt).height(Yxt).cornerRadius(rTt,iTt,oTt,sTt),mTt=Hrt().type(lTt).size(aTt),gTt=FTe().x(YC).y(KC).defined(F$).size(uTt);function lG(e){return e.cornerRadius||e.cornerRadiusTopLeft||e.cornerRadiusTopRight||e.cornerRadiusBottomRight||e.cornerRadiusBottomLeft}function yTt(e,t){return cTt.context(e)(t)}function vTt(e,t){const n=t[0],r=n.interpolate||"linear";return(n.orient==="horizontal"?dTt:fTt).curve(uG(r,n.orient,n.tension)).context(e)(t)}function bTt(e,t){const n=t[0],r=n.interpolate||"linear";return hTt.curve(uG(r,n.orient,n.tension)).context(e)(t)}function nw(e,t,n,r){return pTt.context(e)(t,n,r)}function _Tt(e,t){return(t.mark.shape||t.shape).context(e)(t)}function wTt(e,t){return mTt.context(e)(t)}function ETt(e,t){return gTt.context(e)(t)}var jTe=1;function BTe(){jTe=1}function cG(e,t,n){var r=t.clip,i=e._defs,o=t.clip_id||(t.clip_id="clip"+jTe++),s=i.clipping[o]||(i.clipping[o]={id:o});return nn(r)?s.path=r(null):lG(n)?s.path=nw(null,n,0,0):(s.width=n.width||0,s.height=n.height||0),"url(#"+o+")"}function Di(e){this.clear(),e&&this.union(e)}Di.prototype={clone(){return new Di(this)},clear(){return this.x1=+Number.MAX_VALUE,this.y1=+Number.MAX_VALUE,this.x2=-Number.MAX_VALUE,this.y2=-Number.MAX_VALUE,this},empty(){return this.x1===+Number.MAX_VALUE&&this.y1===+Number.MAX_VALUE&&this.x2===-Number.MAX_VALUE&&this.y2===-Number.MAX_VALUE},equals(e){return this.x1===e.x1&&this.y1===e.y1&&this.x2===e.x2&&this.y2===e.y2},set(e,t,n,r){return n<e?(this.x2=e,this.x1=n):(this.x1=e,this.x2=n),r<t?(this.y2=t,this.y1=r):(this.y1=t,this.y2=r),this},add(e,t){return e<this.x1&&(this.x1=e),t<this.y1&&(this.y1=t),e>this.x2&&(this.x2=e),t>this.y2&&(this.y2=t),this},expand(e){return this.x1-=e,this.y1-=e,this.x2+=e,this.y2+=e,this},round(){return this.x1=Math.floor(this.x1),this.y1=Math.floor(this.y1),this.x2=Math.ceil(this.x2),this.y2=Math.ceil(this.y2),this},scale(e){return this.x1*=e,this.y1*=e,this.x2*=e,this.y2*=e,this},translate(e,t){return this.x1+=e,this.x2+=e,this.y1+=t,this.y2+=t,this},rotate(e,t,n){const r=this.rotatedPoints(e,t,n);return this.clear().add(r[0],r[1]).add(r[2],r[3]).add(r[4],r[5]).add(r[6],r[7])},rotatedPoints(e,t,n){var{x1:r,y1:i,x2:o,y2:s}=this,a=Math.cos(e),u=Math.sin(e),l=t-t*a+n*u,c=n-t*u-n*a;return[a*r-u*i+l,u*r+a*i+c,a*r-u*s+l,u*r+a*s+c,a*o-u*i+l,u*o+a*i+c,a*o-u*s+l,u*o+a*s+c]},union(e){return e.x1<this.x1&&(this.x1=e.x1),e.y1<this.y1&&(this.y1=e.y1),e.x2>this.x2&&(this.x2=e.x2),e.y2>this.y2&&(this.y2=e.y2),this},intersect(e){return e.x1>this.x1&&(this.x1=e.x1),e.y1>this.y1&&(this.y1=e.y1),e.x2<this.x2&&(this.x2=e.x2),e.y2<this.y2&&(this.y2=e.y2),this},encloses(e){return e&&this.x1<=e.x1&&this.x2>=e.x2&&this.y1<=e.y1&&this.y2>=e.y2},alignsWith(e){return e&&(this.x1==e.x1||this.x2==e.x2||this.y1==e.y1||this.y2==e.y2)},intersects(e){return e&&!(this.x2<e.x1||this.x1>e.x2||this.y2<e.y1||this.y1>e.y2)},contains(e,t){return!(e<this.x1||e>this.x2||t<this.y1||t>this.y2)},width(){return this.x2-this.x1},height(){return this.y2-this.y1}};function j$(e){this.mark=e,this.bounds=this.bounds||new Di}function B$(e){j$.call(this,e),this.items=this.items||[]}at(B$,j$);class UTe{constructor(t){this._pending=0,this._loader=t||E$()}pending(){return this._pending}sanitizeURL(t){const n=this;return Woe(n),n._loader.sanitize(t,{context:"href"}).then(r=>(Zw(n),r)).catch(()=>(Zw(n),null))}loadImage(t){const n=this,r=nxt();return Woe(n),n._loader.sanitize(t,{context:"image"}).then(i=>{const o=i.href;if(!o||!r)throw{url:o};const s=new r,a=$t(i,"crossOrigin")?i.crossOrigin:"anonymous";return a!=null&&(s.crossOrigin=a),s.onload=()=>Zw(n),s.onerror=()=>Zw(n),s.src=o,s}).catch(i=>(Zw(n),{complete:!1,width:0,height:0,src:i&&i.url||""}))}ready(){const t=this;return new Promise(n=>{function r(i){t.pending()?setTimeout(()=>{r(!0)},10):n(i)}r(!1)})}}function Woe(e){e._pending+=1}function Zw(e){e._pending-=1}function Ah(e,t,n){if(t.stroke&&t.opacity!==0&&t.strokeOpacity!==0){const r=t.strokeWidth!=null?+t.strokeWidth:1;e.expand(r+(n?xTt(t,r):0))}return e}function xTt(e,t){return e.strokeJoin&&e.strokeJoin!=="miter"?0:t}const TTt=Gc-1e-8;let U$,fI,dI,a0,Y9,hI,K9,X9;const bp=(e,t)=>U$.add(e,t),pI=(e,t)=>bp(fI=e,dI=t),Goe=e=>bp(e,U$.y1),Yoe=e=>bp(U$.x1,e),Gg=(e,t)=>Y9*e+K9*t,Yg=(e,t)=>hI*e+X9*t,n4=(e,t)=>bp(Gg(e,t),Yg(e,t)),r4=(e,t)=>pI(Gg(e,t),Yg(e,t));function XC(e,t){return U$=e,t?(a0=t*vm,Y9=X9=Math.cos(a0),hI=Math.sin(a0),K9=-hI):(Y9=X9=1,a0=hI=K9=0),STt}const STt={beginPath(){},closePath(){},moveTo:r4,lineTo:r4,rect(e,t,n,r){a0?(n4(e+n,t),n4(e+n,t+r),n4(e,t+r),r4(e,t)):(bp(e+n,t+r),pI(e,t))},quadraticCurveTo(e,t,n,r){const i=Gg(e,t),o=Yg(e,t),s=Gg(n,r),a=Yg(n,r);Koe(fI,i,s,Goe),Koe(dI,o,a,Yoe),pI(s,a)},bezierCurveTo(e,t,n,r,i,o){const s=Gg(e,t),a=Yg(e,t),u=Gg(n,r),l=Yg(n,r),c=Gg(i,o),f=Yg(i,o);Xoe(fI,s,u,c,Goe),Xoe(dI,a,l,f,Yoe),pI(c,f)},arc(e,t,n,r,i,o){if(r+=a0,i+=a0,fI=n*Math.cos(i)+e,dI=n*Math.sin(i)+t,Math.abs(i-r)>TTt)bp(e-n,t-n),bp(e+n,t+n);else{const s=l=>bp(n*Math.cos(l)+e,n*Math.sin(l)+t);let a,u;if(s(r),s(i),i!==r)if(r=r%Gc,r<0&&(r+=Gc),i=i%Gc,i<0&&(i+=Gc),i<r&&(o=!o,a=r,r=i,i=a),o)for(i-=Gc,a=r-r%Wg,u=0;u<4&&a>i;++u,a-=Wg)s(a);else for(a=r-r%Wg+Wg,u=0;u<4&&a<i;++u,a=a+Wg)s(a)}}};function Koe(e,t,n,r){const i=(e-t)/(e+n-2*t);0<i&&i<1&&r(e+(t-e)*i)}function Xoe(e,t,n,r,i){const o=r-e+3*t-3*n,s=e+n-2*t,a=e-t;let u=0,l=0,c;Math.abs(o)>Fxt?(c=s*s+a*o,c>=0&&(c=Math.sqrt(c),u=(-s+c)/o,l=(-s-c)/o)):u=.5*a/s,0<u&&u<1&&i(Qoe(u,e,t,n,r)),0<l&&l<1&&i(Qoe(l,e,t,n,r))}function Qoe(e,t,n,r,i){const o=1-e,s=o*o,a=e*e;return s*o*t+3*s*e*n+3*o*a*r+a*e*i}var Kp=(Kp=Yp(1,1))?Kp.getContext("2d"):null;const Q9=new Di;function fG(e){return function(t,n){if(!Kp)return!0;e(Kp,t),Q9.clear().union(t.bounds).intersect(n).round();const{x1:r,y1:i,x2:o,y2:s}=Q9;for(let a=i;a<=s;++a)for(let u=r;u<=o;++u)if(Kp.isPointInPath(u,a))return!0;return!1}}function dG(e,t){return t.contains(e.x||0,e.y||0)}function zTe(e,t){const n=e.x||0,r=e.y||0,i=e.width||0,o=e.height||0;return t.intersects(Q9.set(n,r,n+i,r+o))}function VTe(e,t){const n=e.x||0,r=e.y||0,i=e.x2!=null?e.x2:n,o=e.y2!=null?e.y2:r;return d1(t,n,r,i,o)}function d1(e,t,n,r,i){const{x1:o,y1:s,x2:a,y2:u}=e,l=r-t,c=i-n;let f=0,d=1,h,p,m,g;for(g=0;g<4;++g){if(g===0&&(h=-l,p=-(o-t)),g===1&&(h=l,p=a-t),g===2&&(h=-c,p=-(s-n)),g===3&&(h=c,p=u-n),Math.abs(h)<1e-10&&p<0)return!1;if(m=p/h,h<0){if(m>d)return!1;m>f&&(f=m)}else if(h>0){if(m<f)return!1;m<d&&(d=m)}}return!0}function Bb(e,t){e.globalCompositeOperation=t.blend||"source-over"}function Il(e,t){return e??t}function Joe(e,t){const n=t.length;for(let r=0;r<n;++r)e.addColorStop(t[r].offset,t[r].color);return e}function CTt(e,t,n){const r=n.width(),i=n.height();let o;if(t.gradient==="radial")o=e.createRadialGradient(n.x1+Il(t.x1,.5)*r,n.y1+Il(t.y1,.5)*i,Math.max(r,i)*Il(t.r1,0),n.x1+Il(t.x2,.5)*r,n.y1+Il(t.y2,.5)*i,Math.max(r,i)*Il(t.r2,.5));else{const s=Il(t.x1,0),a=Il(t.y1,0),u=Il(t.x2,1),l=Il(t.y2,0);if(s===u||a===l||r===i)o=e.createLinearGradient(n.x1+s*r,n.y1+a*i,n.x1+u*r,n.y1+l*i);else{const c=Yp(Math.ceil(r),Math.ceil(i)),f=c.getContext("2d");return f.scale(r,i),f.fillStyle=Joe(f.createLinearGradient(s,a,u,l),t.stops),f.fillRect(0,0,r,i),e.createPattern(c,"no-repeat")}}return Joe(o,t.stops)}function HTe(e,t,n){return aG(n)?CTt(e,n,t.bounds):n}function rP(e,t,n){return n*=t.fillOpacity==null?1:t.fillOpacity,n>0?(e.globalAlpha=n,e.fillStyle=HTe(e,t,t.fill),!0):!1}var ATt=[];function Ub(e,t,n){var r=(r=t.strokeWidth)!=null?r:1;return r<=0?!1:(n*=t.strokeOpacity==null?1:t.strokeOpacity,n>0?(e.globalAlpha=n,e.strokeStyle=HTe(e,t,t.stroke),e.lineWidth=r,e.lineCap=t.strokeCap||"butt",e.lineJoin=t.strokeJoin||"miter",e.miterLimit=t.strokeMiterLimit||10,e.setLineDash&&(e.setLineDash(t.strokeDash||ATt),e.lineDashOffset=t.strokeDashOffset||0),!0):!1)}function kTt(e,t){return e.zindex-t.zindex||e.index-t.index}function hG(e){if(!e.zdirty)return e.zitems;var t=e.items,n=[],r,i,o;for(i=0,o=t.length;i<o;++i)r=t[i],r.index=i,r.zindex&&n.push(r);return e.zdirty=!1,e.zitems=n.sort(kTt)}function dc(e,t){var n=e.items,r,i;if(!n||!n.length)return;const o=hG(e);if(o&&o.length){for(r=0,i=n.length;r<i;++r)n[r].zindex||t(n[r]);n=o}for(r=0,i=n.length;r<i;++r)t(n[r])}function iP(e,t){var n=e.items,r,i;if(!n||!n.length)return null;const o=hG(e);for(o&&o.length&&(n=o),i=n.length;--i>=0;)if(r=t(n[i]))return r;if(n===o){for(n=e.items,i=n.length;--i>=0;)if(!n[i].zindex&&(r=t(n[i])))return r}return null}function pG(e){return function(t,n,r){dc(n,i=>{(!r||r.intersects(i.bounds))&&qTe(e,t,i,i)})}}function ITt(e){return function(t,n,r){n.items.length&&(!r||r.intersects(n.bounds))&&qTe(e,t,n.items[0],n.items)}}function qTe(e,t,n,r){var i=n.opacity==null?1:n.opacity;i!==0&&(e(t,r)||(Bb(t,n),n.fill&&rP(t,n,i)&&t.fill(),n.stroke&&Ub(t,n,i)&&t.stroke()))}function z$(e){return e=e||ll,function(t,n,r,i,o,s){return r*=t.pixelRatio,i*=t.pixelRatio,iP(n,a=>{const u=a.bounds;if(!(u&&!u.contains(o,s)||!u)&&e(t,a,r,i,o,s))return a})}}function QC(e,t){return function(n,r,i,o){var s=Array.isArray(r)?r[0]:r,a=t??s.fill,u=s.stroke&&n.isPointInStroke,l,c;return u&&(l=s.strokeWidth,c=s.strokeCap,n.lineWidth=l??1,n.lineCap=c??"butt"),e(n,r)?!1:a&&n.isPointInPath(i,o)||u&&n.isPointInStroke(i,o)}}function mG(e){return z$(QC(e))}function v0(e,t){return"translate("+e+","+t+")"}function gG(e){return"rotate("+e+")"}function RTt(e,t){return"scale("+e+","+t+")"}function WTe(e){return v0(e.x||0,e.y||0)}function NTt(e){return v0(e.x||0,e.y||0)+(e.angle?" "+gG(e.angle):"")}function PTt(e){return v0(e.x||0,e.y||0)+(e.angle?" "+gG(e.angle):"")+(e.scaleX||e.scaleY?" "+RTt(e.scaleX||1,e.scaleY||1):"")}function yG(e,t,n){function r(s,a){s("transform",NTt(a)),s("d",t(null,a))}function i(s,a){return t(XC(s,a.angle),a),Ah(s,a).translate(a.x||0,a.y||0)}function o(s,a){var u=a.x||0,l=a.y||0,c=a.angle||0;s.translate(u,l),c&&s.rotate(c*=vm),s.beginPath(),t(s,a),c&&s.rotate(-c),s.translate(-u,-l)}return{type:e,tag:"path",nested:!1,attr:r,bound:i,draw:pG(o),pick:mG(o),isect:n||fG(o)}}var DTt=yG("arc",yTt);function OTt(e,t){for(var n=e[0].orient==="horizontal"?t[1]:t[0],r=e[0].orient==="horizontal"?"y":"x",i=e.length,o=1/0,s,a;--i>=0;)e[i].defined!==!1&&(a=Math.abs(e[i][r]-n),a<o&&(o=a,s=e[i]));return s}function $Tt(e,t){for(var n=Math.pow(e[0].strokeWidth||1,2),r=e.length,i,o,s;--r>=0;)if(e[r].defined!==!1&&(i=e[r].x-t[0],o=e[r].y-t[1],s=i*i+o*o,s<n))return e[r];return null}function MTt(e,t){for(var n=e.length,r,i,o;--n>=0;)if(e[n].defined!==!1&&(r=e[n].x-t[0],i=e[n].y-t[1],o=r*r+i*i,r=e[n].size||1,o<r*r))return e[n];return null}function vG(e,t,n){function r(u,l){var c=l.mark.items;c.length&&u("d",t(null,c))}function i(u,l){var c=l.items;return c.length===0?u:(t(XC(u),c),Ah(u,c[0]))}function o(u,l){u.beginPath(),t(u,l)}const s=QC(o);function a(u,l,c,f,d,h){var p=l.items,m=l.bounds;return!p||!p.length||m&&!m.contains(d,h)?null:(c*=u.pixelRatio,f*=u.pixelRatio,s(u,p,c,f)?p[0]:null)}return{type:e,tag:"path",nested:!0,attr:r,bound:i,draw:ITt(o),pick:a,isect:dG,tip:n}}var LTt=vG("area",vTt,OTt);function FTt(e,t){var n=t.clip;e.save(),nn(n)?(e.beginPath(),n(e),e.clip()):GTe(e,t.group)}function GTe(e,t){e.beginPath(),lG(t)?nw(e,t,0,0):e.rect(0,0,t.width||0,t.height||0),e.clip()}function YTe(e){const t=Il(e.strokeWidth,1);return e.strokeOffset!=null?e.strokeOffset:e.stroke&&t>.5&&t<1.5?.5-Math.abs(t-1):0}function jTt(e,t){e("transform",WTe(t))}function KTe(e,t){const n=YTe(t);e("d",nw(null,t,n,n))}function BTt(e,t){e("class","background"),e("aria-hidden",!0),KTe(e,t)}function UTt(e,t){e("class","foreground"),e("aria-hidden",!0),t.strokeForeground?KTe(e,t):e("d","")}function zTt(e,t,n){const r=t.clip?cG(n,t,t):null;e("clip-path",r)}function VTt(e,t){if(!t.clip&&t.items){const n=t.items,r=n.length;for(let i=0;i<r;++i)e.union(n[i].bounds)}return(t.clip||t.width||t.height)&&!t.noBound&&e.add(0,0).add(t.width||0,t.height||0),Ah(e,t),e.translate(t.x||0,t.y||0)}function vS(e,t,n,r){const i=YTe(t);e.beginPath(),nw(e,t,(n||0)+i,(r||0)+i)}const HTt=QC(vS),qTt=QC(vS,!1),WTt=QC(vS,!0);function GTt(e,t,n,r){dc(t,i=>{const o=i.x||0,s=i.y||0,a=i.strokeForeground,u=i.opacity==null?1:i.opacity;(i.stroke||i.fill)&&u&&(vS(e,i,o,s),Bb(e,i),i.fill&&rP(e,i,u)&&e.fill(),i.stroke&&!a&&Ub(e,i,u)&&e.stroke()),e.save(),e.translate(o,s),i.clip&&GTe(e,i),n&&n.translate(-o,-s),dc(i,l=>{(l.marktype==="group"||r==null||r.includes(l.marktype))&&this.draw(e,l,n,r)}),n&&n.translate(o,s),e.restore(),a&&i.stroke&&u&&(vS(e,i,o,s),Bb(e,i),Ub(e,i,u)&&e.stroke())})}function YTt(e,t,n,r,i,o){if(t.bounds&&!t.bounds.contains(i,o)||!t.items)return null;const s=n*e.pixelRatio,a=r*e.pixelRatio;return iP(t,u=>{let l,c,f;const d=u.bounds;if(d&&!d.contains(i,o))return;c=u.x||0,f=u.y||0;const h=c+(u.width||0),p=f+(u.height||0),m=u.clip;if(m&&(i<c||i>h||o<f||o>p))return;if(e.save(),e.translate(c,f),c=i-c,f=o-f,m&&lG(u)&&!WTt(e,u,s,a))return e.restore(),null;const g=u.strokeForeground,y=t.interactive!==!1;return y&&g&&u.stroke&&qTt(e,u,s,a)?(e.restore(),u):(l=iP(u,v=>KTt(v,c,f)?this.pick(v,n,r,c,f):null),!l&&y&&(u.fill||!g&&u.stroke)&&HTt(e,u,s,a)&&(l=u),e.restore(),l||null)})}function KTt(e,t,n){return(e.interactive!==!1||e.marktype==="group")&&e.bounds&&e.bounds.contains(t,n)}var XTt={type:"group",tag:"g",nested:!1,attr:jTt,bound:VTt,draw:GTt,pick:YTt,isect:zTe,content:zTt,background:BTt,foreground:UTt},bS={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1"};function bG(e,t){var n=e.image;return(!n||e.url&&e.url!==n.url)&&(n={complete:!1,width:0,height:0},t.loadImage(e.url).then(r=>{e.image=r,e.image.url=e.url})),n}function _G(e,t){return e.width!=null?e.width:!t||!t.width?0:e.aspect!==!1&&e.height?e.height*t.width/t.height:t.width}function wG(e,t){return e.height!=null?e.height:!t||!t.height?0:e.aspect!==!1&&e.width?e.width*t.height/t.width:t.height}function V$(e,t){return e==="center"?t/2:e==="right"?t:0}function H$(e,t){return e==="middle"?t/2:e==="bottom"?t:0}function QTt(e,t,n){const r=bG(t,n),i=_G(t,r),o=wG(t,r),s=(t.x||0)-V$(t.align,i),a=(t.y||0)-H$(t.baseline,o),u=!r.src&&r.toDataURL?r.toDataURL():r.src||"";e("href",u,bS["xmlns:xlink"],"xlink:href"),e("transform",v0(s,a)),e("width",i),e("height",o),e("preserveAspectRatio",t.aspect===!1?"none":"xMidYMid")}function JTt(e,t){const n=t.image,r=_G(t,n),i=wG(t,n),o=(t.x||0)-V$(t.align,r),s=(t.y||0)-H$(t.baseline,i);return e.set(o,s,o+r,s+i)}function ZTt(e,t,n){dc(t,r=>{if(n&&!n.intersects(r.bounds))return;const i=bG(r,this);let o=_G(r,i),s=wG(r,i);if(o===0||s===0)return;let a=(r.x||0)-V$(r.align,o),u=(r.y||0)-H$(r.baseline,s),l,c,f,d;r.aspect!==!1&&(c=i.width/i.height,f=r.width/r.height,c===c&&f===f&&c!==f&&(f<c?(d=o/c,u+=(s-d)/2,s=d):(d=s*c,a+=(o-d)/2,o=d))),(i.complete||i.toDataURL)&&(Bb(e,r),e.globalAlpha=(l=r.opacity)!=null?l:1,e.imageSmoothingEnabled=r.smooth!==!1,e.drawImage(i,a,u,o,s))})}var eSt={type:"image",tag:"image",nested:!1,attr:QTt,bound:JTt,draw:ZTt,pick:z$(),isect:ll,get:bG,xOffset:V$,yOffset:H$},tSt=vG("line",bTt,$Tt);function nSt(e,t){var n=t.scaleX||1,r=t.scaleY||1;(n!==1||r!==1)&&e("vector-effect","non-scaling-stroke"),e("transform",PTt(t)),e("d",t.path)}function mI(e,t){var n=t.path;if(n==null)return!0;var r=t.x||0,i=t.y||0,o=t.scaleX||1,s=t.scaleY||1,a=(t.angle||0)*vm,u=t.pathCache;(!u||u.path!==n)&&((t.pathCache=u=jb(n)).path=n),a&&e.rotate&&e.translate?(e.translate(r,i),e.rotate(a),yS(e,u,0,0,o,s),e.rotate(-a),e.translate(-r,-i)):yS(e,u,r,i,o,s)}function rSt(e,t){return mI(XC(e,t.angle),t)?e.set(0,0,0,0):Ah(e,t,!0)}var iSt={type:"path",tag:"path",nested:!1,attr:nSt,bound:rSt,draw:pG(mI),pick:mG(mI),isect:fG(mI)};function oSt(e,t){e("d",nw(null,t))}function sSt(e,t){var n,r;return Ah(e.set(n=t.x||0,r=t.y||0,n+t.width||0,r+t.height||0),t)}function Zoe(e,t){e.beginPath(),nw(e,t)}var aSt={type:"rect",tag:"path",nested:!1,attr:oSt,bound:sSt,draw:pG(Zoe),pick:mG(Zoe),isect:zTe};function uSt(e,t){e("transform",WTe(t)),e("x2",t.x2!=null?t.x2-(t.x||0):0),e("y2",t.y2!=null?t.y2-(t.y||0):0)}function lSt(e,t){var n,r;return Ah(e.set(n=t.x||0,r=t.y||0,t.x2!=null?t.x2:n,t.y2!=null?t.y2:r),t)}function XTe(e,t,n){var r,i,o,s;return t.stroke&&Ub(e,t,n)?(r=t.x||0,i=t.y||0,o=t.x2!=null?t.x2:r,s=t.y2!=null?t.y2:i,e.beginPath(),e.moveTo(r,i),e.lineTo(o,s),!0):!1}function cSt(e,t,n){dc(t,r=>{if(!(n&&!n.intersects(r.bounds))){var i=r.opacity==null?1:r.opacity;i&&XTe(e,r,i)&&(Bb(e,r),e.stroke())}})}function fSt(e,t,n,r){return e.isPointInStroke?XTe(e,t,1)&&e.isPointInStroke(n,r):!1}var dSt={type:"rule",tag:"line",nested:!1,attr:uSt,bound:lSt,draw:cSt,pick:z$(fSt),isect:VTe},hSt=yG("shape",_Tt),pSt=yG("symbol",wTt,dG);const ese=OEe();var fu={height:qf,measureWidth:EG,estimateWidth:oP,width:oP,canvas:QTe};QTe(!0);function QTe(e){fu.width=e&&Kp?EG:oP}function oP(e,t){return JTe(_m(e,t),qf(e))}function JTe(e,t){return~~(.8*e.length*t)}function EG(e,t){return qf(e)<=0||!(t=_m(e,t))?0:ZTe(t,q$(e))}function ZTe(e,t){const n=`(${t}) ${e}`;let r=ese.get(n);return r===void 0&&(Kp.font=t,r=Kp.measureText(e).width,ese.set(n,r)),r}function qf(e){return e.fontSize!=null?+e.fontSize||0:11}function bm(e){return e.lineHeight!=null?e.lineHeight:qf(e)+2}function mSt(e){return Le(e)?e.length>1?e:e[0]:e}function JC(e){return mSt(e.lineBreak&&e.text&&!Le(e.text)?e.text.split(e.lineBreak):e.text)}function xG(e){const t=JC(e);return(Le(t)?t.length-1:0)*bm(e)}function _m(e,t){const n=t==null?"":(t+"").trim();return e.limit>0&&n.length?ySt(e,n):n}function gSt(e){if(fu.width===EG){const t=q$(e);return n=>ZTe(n,t)}else if(fu.width===oP){const t=qf(e);return n=>JTe(n,t)}else return t=>fu.width(e,t)}function ySt(e,t){var n=+e.limit,r=gSt(e);if(r(t)<n)return t;var i=e.ellipsis||"",o=e.dir==="rtl",s=0,a=t.length,u;if(n-=r(i),o){for(;s<a;)u=s+a>>>1,r(t.slice(u))>n?s=u+1:a=u;return i+t.slice(s)}else{for(;s<a;)u=1+(s+a>>>1),r(t.slice(0,u))<n?s=u:a=u-1;return t.slice(0,s)+i}}function ZC(e,t){var n=e.font;return(t&&n?String(n).replace(/"/g,"'"):n)||"sans-serif"}function q$(e,t){return(e.fontStyle?e.fontStyle+" ":"")+(e.fontVariant?e.fontVariant+" ":"")+(e.fontWeight?e.fontWeight+" ":"")+qf(e)+"px "+ZC(e,t)}function TG(e){var t=e.baseline,n=qf(e);return Math.round(t==="top"?.79*n:t==="middle"?.3*n:t==="bottom"?-.21*n:t==="line-top"?.29*n+.5*bm(e):t==="line-bottom"?.29*n-.5*bm(e):0)}const vSt={left:"start",center:"middle",right:"end"},Wx=new Di;function W$(e){var t=e.x||0,n=e.y||0,r=e.radius||0,i;return r&&(i=(e.theta||0)-Wg,t+=r*Math.cos(i),n+=r*Math.sin(i)),Wx.x1=t,Wx.y1=n,Wx}function bSt(e,t){var n=t.dx||0,r=(t.dy||0)+TG(t),i=W$(t),o=i.x1,s=i.y1,a=t.angle||0,u;e("text-anchor",vSt[t.align]||"start"),a?(u=v0(o,s)+" "+gG(a),(n||r)&&(u+=" "+v0(n,r))):u=v0(o+n,s+r),e("transform",u)}function SG(e,t,n){var r=fu.height(t),i=t.align,o=W$(t),s=o.x1,a=o.y1,u=t.dx||0,l=(t.dy||0)+TG(t)-Math.round(.8*r),c=JC(t),f;if(Le(c)?(r+=bm(t)*(c.length-1),f=c.reduce((d,h)=>Math.max(d,fu.width(t,h)),0)):f=fu.width(t,c),i==="center"?u-=f/2:i==="right"&&(u-=f),e.set(u+=s,l+=a,u+f,l+r),t.angle&&!n)e.rotate(t.angle*vm,s,a);else if(n===2)return e.rotatedPoints(t.angle*vm,s,a);return e}function _St(e,t,n){dc(t,r=>{var i=r.opacity==null?1:r.opacity,o,s,a,u,l,c,f;if(!(n&&!n.intersects(r.bounds)||i===0||r.fontSize<=0||r.text==null||r.text.length===0)){if(e.font=q$(r),e.textAlign=r.align||"left",o=W$(r),s=o.x1,a=o.y1,r.angle&&(e.save(),e.translate(s,a),e.rotate(r.angle*vm),s=a=0),s+=r.dx||0,a+=(r.dy||0)+TG(r),c=JC(r),Bb(e,r),Le(c))for(l=bm(r),u=0;u<c.length;++u)f=_m(r,c[u]),r.fill&&rP(e,r,i)&&e.fillText(f,s,a),r.stroke&&Ub(e,r,i)&&e.strokeText(f,s,a),a+=l;else f=_m(r,c),r.fill&&rP(e,r,i)&&e.fillText(f,s,a),r.stroke&&Ub(e,r,i)&&e.strokeText(f,s,a);r.angle&&e.restore()}})}function wSt(e,t,n,r,i,o){if(t.fontSize<=0)return!1;if(!t.angle)return!0;var s=W$(t),a=s.x1,u=s.y1,l=SG(Wx,t,1),c=-t.angle*vm,f=Math.cos(c),d=Math.sin(c),h=f*i-d*o+(a-f*a+d*u),p=d*i+f*o+(u-d*a-f*u);return l.contains(h,p)}function ESt(e,t){const n=SG(Wx,e,2);return d1(t,n[0],n[1],n[2],n[3])||d1(t,n[0],n[1],n[4],n[5])||d1(t,n[4],n[5],n[6],n[7])||d1(t,n[2],n[3],n[6],n[7])}var xSt={type:"text",tag:"text",nested:!1,attr:bSt,bound:SG,draw:_St,pick:z$(wSt),isect:ESt},TSt=vG("trail",ETt,MTt),Su={arc:DTt,area:LTt,group:XTt,image:eSt,line:tSt,path:iSt,rect:aSt,rule:dSt,shape:hSt,symbol:pSt,text:xSt,trail:TSt};function J9(e,t,n){var r=Su[e.mark.marktype],i=t||r.bound;return r.nested&&(e=e.mark),i(e.bounds||(e.bounds=new Di),e,n)}var tse={mark:null};function eSe(e,t,n){var r=Su[e.marktype],i=r.bound,o=e.items,s=o&&o.length,a,u,l,c;if(r.nested)return s?l=o[0]:(tse.mark=e,l=tse),c=J9(l,i,n),t=t&&t.union(c)||c,t;if(t=t||e.bounds&&e.bounds.clear()||new Di,s)for(a=0,u=o.length;a<u;++a)t.union(J9(o[a],i,n));return e.bounds=t}const SSt=["marktype","name","role","interactive","clip","items","zindex","x","y","width","height","align","baseline","fill","fillOpacity","opacity","blend","stroke","strokeOpacity","strokeWidth","strokeCap","strokeDash","strokeDashOffset","strokeForeground","strokeOffset","startAngle","endAngle","innerRadius","outerRadius","cornerRadius","padAngle","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight","interpolate","tension","orient","defined","url","aspect","smooth","path","scaleX","scaleY","x2","y2","size","shape","text","angle","theta","radius","dir","dx","dy","ellipsis","limit","lineBreak","lineHeight","font","fontSize","fontWeight","fontStyle","fontVariant","description","aria","ariaRole","ariaRoleDescription"];function tSe(e,t){return JSON.stringify(e,SSt,t)}function nSe(e){const t=typeof e=="string"?JSON.parse(e):e;return rSe(t)}function rSe(e){var t=e.marktype,n=e.items,r,i,o;if(n)for(i=0,o=n.length;i<o;++i)r=t?"mark":"group",n[i][r]=e,n[i].zindex&&(n[i][r].zdirty=!0),(t||r)==="group"&&rSe(n[i]);return t&&eSe(e),e}class iSe{constructor(t){arguments.length?this.root=nSe(t):(this.root=nse({marktype:"group",name:"root",role:"frame"}),this.root.items=[new B$(this.root)])}toJSON(t){return tSe(this.root,t||0)}mark(t,n,r){n=n||this.root.items[0];const i=nse(t,n);return n.items[r]=i,i.zindex&&(i.group.zdirty=!0),i}}function nse(e,t){const n={bounds:new Di,clip:!!e.clip,group:t,interactive:e.interactive!==!1,items:[],marktype:e.marktype,name:e.name||void 0,role:e.role||void 0,zindex:e.zindex||0};return e.aria!=null&&(n.aria=e.aria),e.description&&(n.description=e.description),n}function _p(e,t,n){return!e&&typeof document<"u"&&document.createElement&&(e=document),e?n?e.createElementNS(n,t):e.createElement(t):null}function CG(e,t){t=t.toLowerCase();for(var n=e.childNodes,r=0,i=n.length;r<i;++r)if(n[r].tagName.toLowerCase()===t)return n[r]}function ji(e,t,n,r){var i=e.childNodes[t],o;return(!i||i.tagName.toLowerCase()!==n.toLowerCase())&&(o=i||null,i=_p(e.ownerDocument,n,r),e.insertBefore(i,o)),i}function Wu(e,t){for(var n=e.childNodes,r=n.length;r>t;)e.removeChild(n[--r]);return e}function oSe(e){return"mark-"+e.marktype+(e.role?" role-"+e.role:"")+(e.name?" "+e.name:"")}function G$(e,t){const n=t.getBoundingClientRect();return[e.clientX-n.left-(t.clientLeft||0),e.clientY-n.top-(t.clientTop||0)]}function CSt(e,t,n,r){var i=e&&e.mark,o,s;if(i&&(o=Su[i.marktype]).tip){for(s=G$(t,n),s[0]-=r[0],s[1]-=r[1];e=e.mark.group;)s[0]-=e.x||0,s[1]-=e.y||0;e=o.tip(i.items,s)}return e}let AG=class{constructor(t,n){this._active=null,this._handlers={},this._loader=t||E$(),this._tooltip=n||ASt}initialize(t,n,r){return this._el=t,this._obj=r||null,this.origin(n)}element(){return this._el}canvas(){return this._el&&this._el.firstChild}origin(t){return arguments.length?(this._origin=t||[0,0],this):this._origin.slice()}scene(t){return arguments.length?(this._scene=t,this):this._scene}on(){}off(){}_handlerIndex(t,n,r){for(let i=t?t.length:0;--i>=0;)if(t[i].type===n&&(!r||t[i].handler===r))return i;return-1}handlers(t){const n=this._handlers,r=[];if(t)r.push(...n[this.eventName(t)]);else for(const i in n)r.push(...n[i]);return r}eventName(t){const n=t.indexOf(".");return n<0?t:t.slice(0,n)}handleHref(t,n,r){this._loader.sanitize(r,{context:"href"}).then(i=>{const o=new MouseEvent(t.type,t),s=_p(null,"a");for(const a in i)s.setAttribute(a,i[a]);s.dispatchEvent(o)}).catch(()=>{})}handleTooltip(t,n,r){if(n&&n.tooltip!=null){n=CSt(n,t,this.canvas(),this._origin);const i=r&&n&&n.tooltip||null;this._tooltip.call(this._obj,this,t,n,i)}}getItemBoundingClientRect(t){const n=this.canvas();if(!n)return;const r=n.getBoundingClientRect(),i=this._origin,o=t.bounds,s=o.width(),a=o.height();let u=o.x1+i[0]+r.left,l=o.y1+i[1]+r.top;for(;t.mark&&(t=t.mark.group);)u+=t.x||0,l+=t.y||0;return{x:u,y:l,width:s,height:a,left:u,top:l,right:u+s,bottom:l+a}}};function ASt(e,t,n,r){e.element().setAttribute("title",r||"")}class eA{constructor(t){this._el=null,this._bgcolor=null,this._loader=new UTe(t)}initialize(t,n,r,i,o){return this._el=t,this.resize(n,r,i,o)}element(){return this._el}canvas(){return this._el&&this._el.firstChild}background(t){return arguments.length===0?this._bgcolor:(this._bgcolor=t,this)}resize(t,n,r,i){return this._width=t,this._height=n,this._origin=r||[0,0],this._scale=i||1,this}dirty(){}render(t,n){const r=this;return r._call=function(){r._render(t,n)},r._call(),r._call=null,r}_render(){}renderAsync(t,n){const r=this.render(t,n);return this._ready?this._ready.then(()=>r):Promise.resolve(r)}_load(t,n){var r=this,i=r._loader[t](n);if(!r._ready){const o=r._call;r._ready=r._loader.ready().then(s=>{s&&o(),r._ready=null})}return i}sanitizeURL(t){return this._load("sanitizeURL",t)}loadImage(t){return this._load("loadImage",t)}}const kSt="keydown",ISt="keypress",RSt="keyup",sSe="dragenter",gI="dragleave",aSe="dragover",Z9="pointerdown",NSt="pointerup",sP="pointermove",yI="pointerout",uSe="pointerover",e8="mousedown",PSt="mouseup",lSe="mousemove",aP="mouseout",cSe="mouseover",uP="click",DSt="dblclick",OSt="wheel",fSe="mousewheel",lP="touchstart",cP="touchmove",fP="touchend",$St=[kSt,ISt,RSt,sSe,gI,aSe,Z9,NSt,sP,yI,uSe,e8,PSt,lSe,aP,cSe,uP,DSt,OSt,fSe,lP,cP,fP],t8=sP,Gx=aP,n8=uP;class tA extends AG{constructor(t,n){super(t,n),this._down=null,this._touch=null,this._first=!0,this._events={},this.events=$St,this.pointermove=ise([sP,lSe],[uSe,cSe],[yI,aP]),this.dragover=ise([aSe],[sSe],[gI]),this.pointerout=ose([yI,aP]),this.dragleave=ose([gI])}initialize(t,n,r){return this._canvas=t&&CG(t,"canvas"),[uP,e8,Z9,sP,yI,gI].forEach(i=>rse(this,i)),super.initialize(t,n,r)}canvas(){return this._canvas}context(){return this._canvas.getContext("2d")}DOMMouseScroll(t){this.fire(fSe,t)}pointerdown(t){this._down=this._active,this.fire(Z9,t)}mousedown(t){this._down=this._active,this.fire(e8,t)}click(t){this._down===this._active&&(this.fire(uP,t),this._down=null)}touchstart(t){this._touch=this.pickEvent(t.changedTouches[0]),this._first&&(this._active=this._touch,this._first=!1),this.fire(lP,t,!0)}touchmove(t){this.fire(cP,t,!0)}touchend(t){this.fire(fP,t,!0),this._touch=null}fire(t,n,r){const i=r?this._touch:this._active,o=this._handlers[t];if(n.vegaType=t,t===n8&&i&&i.href?this.handleHref(n,i,i.href):(t===t8||t===Gx)&&this.handleTooltip(n,i,t!==Gx),o)for(let s=0,a=o.length;s<a;++s)o[s].handler.call(this._obj,n,i)}on(t,n){const r=this.eventName(t),i=this._handlers;return this._handlerIndex(i[r],t,n)<0&&(rse(this,t),(i[r]||(i[r]=[])).push({type:t,handler:n})),this}off(t,n){const r=this.eventName(t),i=this._handlers[r],o=this._handlerIndex(i,t,n);return o>=0&&i.splice(o,1),this}pickEvent(t){const n=G$(t,this._canvas),r=this._origin;return this.pick(this._scene,n[0],n[1],n[0]-r[0],n[1]-r[1])}pick(t,n,r,i,o){const s=this.context();return Su[t.marktype].pick.call(this,s,t,n,r,i,o)}}const MSt=e=>e===lP||e===cP||e===fP?[lP,cP,fP]:[e];function rse(e,t){MSt(t).forEach(n=>LSt(e,n))}function LSt(e,t){const n=e.canvas();n&&!e._events[t]&&(e._events[t]=1,n.addEventListener(t,e[t]?r=>e[t](r):r=>e.fire(t,r)))}function XE(e,t,n){t.forEach(r=>e.fire(r,n))}function ise(e,t,n){return function(r){const i=this._active,o=this.pickEvent(r);o===i?XE(this,e,r):((!i||!i.exit)&&XE(this,n,r),this._active=o,XE(this,t,r),XE(this,e,r))}}function ose(e){return function(t){XE(this,e,t),this._active=null}}function FSt(){return typeof window<"u"&&window.devicePixelRatio||1}function jSt(e,t,n,r,i,o){const s=typeof HTMLElement<"u"&&e instanceof HTMLElement&&e.parentNode!=null,a=e.getContext("2d"),u=s?FSt():i;e.width=t*u,e.height=n*u;for(const l in o)a[l]=o[l];return s&&u!==1&&(e.style.width=t+"px",e.style.height=n+"px"),a.pixelRatio=u,a.setTransform(u,0,0,u,u*r[0],u*r[1]),e}class dP extends eA{constructor(t){super(t),this._options={},this._redraw=!1,this._dirty=new Di,this._tempb=new Di}initialize(t,n,r,i,o,s){return this._options=s||{},this._canvas=this._options.externalContext?null:Yp(1,1,this._options.type),t&&this._canvas&&(Wu(t,0).appendChild(this._canvas),this._canvas.setAttribute("class","marks")),super.initialize(t,n,r,i,o)}resize(t,n,r,i){if(super.resize(t,n,r,i),this._canvas)jSt(this._canvas,this._width,this._height,this._origin,this._scale,this._options.context);else{const o=this._options.externalContext;o||De("CanvasRenderer is missing a valid canvas or context"),o.scale(this._scale,this._scale),o.translate(this._origin[0],this._origin[1])}return this._redraw=!0,this}canvas(){return this._canvas}context(){return this._options.externalContext||(this._canvas?this._canvas.getContext("2d"):null)}dirty(t){const n=this._tempb.clear().union(t.bounds);let r=t.mark.group;for(;r;)n.translate(r.x||0,r.y||0),r=r.mark.group;this._dirty.union(n)}_render(t,n){const r=this.context(),i=this._origin,o=this._width,s=this._height,a=this._dirty,u=BSt(i,o,s);r.save();const l=this._redraw||a.empty()?(this._redraw=!1,u.expand(1)):USt(r,u.intersect(a),i);return this.clear(-i[0],-i[1],o,s),this.draw(r,t,l,n),r.restore(),a.clear(),this}draw(t,n,r,i){if(n.marktype!=="group"&&i!=null&&!i.includes(n.marktype))return;const o=Su[n.marktype];n.clip&&FTt(t,n),o.draw.call(this,t,n,r,i),n.clip&&t.restore()}clear(t,n,r,i){const o=this._options,s=this.context();o.type!=="pdf"&&!o.externalContext&&s.clearRect(t,n,r,i),this._bgcolor!=null&&(s.fillStyle=this._bgcolor,s.fillRect(t,n,r,i))}}const BSt=(e,t,n)=>new Di().set(0,0,t,n).translate(-e[0],-e[1]);function USt(e,t,n){return t.expand(1).round(),e.pixelRatio%1&&t.scale(e.pixelRatio).round().scale(1/e.pixelRatio),t.translate(-(n[0]%1),-(n[1]%1)),e.beginPath(),e.rect(t.x1,t.y1,t.width(),t.height()),e.clip(),t}class dSe extends AG{constructor(t,n){super(t,n);const r=this;r._hrefHandler=i4(r,(i,o)=>{o&&o.href&&r.handleHref(i,o,o.href)}),r._tooltipHandler=i4(r,(i,o)=>{r.handleTooltip(i,o,i.type!==Gx)})}initialize(t,n,r){let i=this._svg;return i&&(i.removeEventListener(n8,this._hrefHandler),i.removeEventListener(t8,this._tooltipHandler),i.removeEventListener(Gx,this._tooltipHandler)),this._svg=i=t&&CG(t,"svg"),i&&(i.addEventListener(n8,this._hrefHandler),i.addEventListener(t8,this._tooltipHandler),i.addEventListener(Gx,this._tooltipHandler)),super.initialize(t,n,r)}canvas(){return this._svg}on(t,n){const r=this.eventName(t),i=this._handlers;if(this._handlerIndex(i[r],t,n)<0){const s={type:t,handler:n,listener:i4(this,n)};(i[r]||(i[r]=[])).push(s),this._svg&&this._svg.addEventListener(r,s.listener)}return this}off(t,n){const r=this.eventName(t),i=this._handlers[r],o=this._handlerIndex(i,t,n);return o>=0&&(this._svg&&this._svg.removeEventListener(r,i[o].listener),i.splice(o,1)),this}}const i4=(e,t)=>n=>{let r=n.target.__data__;r=Array.isArray(r)?r[0]:r,n.vegaType=n.type,t.call(e._obj,n,r)},hSe="aria-hidden",kG="aria-label",IG="role",RG="aria-roledescription",pSe="graphics-object",NG="graphics-symbol",mSe=(e,t,n)=>({[IG]:e,[RG]:t,[kG]:n||void 0}),zSt=cc(["axis-domain","axis-grid","axis-label","axis-tick","axis-title","legend-band","legend-entry","legend-gradient","legend-label","legend-title","legend-symbol","title"]),sse={axis:{desc:"axis",caption:qSt},legend:{desc:"legend",caption:WSt},"title-text":{desc:"title",caption:e=>`Title text '${use(e)}'`},"title-subtitle":{desc:"subtitle",caption:e=>`Subtitle text '${use(e)}'`}},ase={ariaRole:IG,ariaRoleDescription:RG,description:kG};function gSe(e,t){const n=t.aria===!1;if(e(hSe,n||void 0),n||t.description==null)for(const r in ase)e(ase[r],void 0);else{const r=t.mark.marktype;e(kG,t.description),e(IG,t.ariaRole||(r==="group"?pSe:NG)),e(RG,t.ariaRoleDescription||`${r} mark`)}}function ySe(e){return e.aria===!1?{[hSe]:!0}:zSt[e.role]?null:sse[e.role]?HSt(e,sse[e.role]):VSt(e)}function VSt(e){const t=e.marktype,n=t==="group"||t==="text"||e.items.some(r=>r.description!=null&&r.aria!==!1);return mSe(n?pSe:NG,`${t} mark container`,e.description)}function HSt(e,t){try{const n=e.items[0],r=t.caption||(()=>"");return mSe(t.role||NG,t.desc,n.description||r(n))}catch{return null}}function use(e){return ct(e.text).join(" ")}function qSt(e){const t=e.datum,n=e.orient,r=t.title?vSe(e):null,i=e.context,o=i.scales[t.scale].value,s=i.dataflow.locale(),a=o.type;return`${n==="left"||n==="right"?"Y":"X"}-axis`+(r?` titled '${r}'`:"")+` for a ${Fb(a)?"discrete":a} scale with ${NTe(s,o,e)}`}function WSt(e){const t=e.datum,n=t.title?vSe(e):null,r=`${t.type||""} legend`.trim(),i=t.scales,o=Object.keys(i),s=e.context,a=s.scales[i[o[0]]].value,u=s.dataflow.locale();return YSt(r)+(n?` titled '${n}'`:"")+` for ${GSt(o)} with ${NTe(u,a,e)}`}function vSe(e){try{return ct(In(e.items).items[0].text).join(" ")}catch{return null}}function GSt(e){return e=e.map(t=>t+(t==="fill"||t==="stroke"?" color":"")),e.length<2?e[0]:e.slice(0,-1).join(", ")+" and "+In(e)}function YSt(e){return e.length?e[0].toUpperCase()+e.slice(1):e}const bSe=e=>(e+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),KSt=e=>bSe(e).replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;");function PG(){let e="",t="",n="";const r=[],i=()=>t=n="",o=u=>{t&&(e+=`${t}>${n}`,i()),r.push(u)},s=(u,l)=>(l!=null&&(t+=` ${u}="${KSt(l)}"`),a),a={open(u){o(u),t="<"+u;for(var l=arguments.length,c=new Array(l>1?l-1:0),f=1;f<l;f++)c[f-1]=arguments[f];for(const d of c)for(const h in d)s(h,d[h]);return a},close(){const u=r.pop();return t?e+=t+(n?`>${n}</${u}>`:"/>"):e+=`</${u}>`,i(),a},attr:s,text:u=>(n+=bSe(u),a),toString:()=>e};return a}const _Se=e=>wSe(PG(),e)+"";function wSe(e,t){if(e.open(t.tagName),t.hasAttributes()){const n=t.attributes,r=n.length;for(let i=0;i<r;++i)e.attr(n[i].name,n[i].value)}if(t.hasChildNodes()){const n=t.childNodes;for(const r of n)r.nodeType===3?e.text(r.nodeValue):wSe(e,r)}return e.close()}const hP={fill:"fill",fillOpacity:"fill-opacity",stroke:"stroke",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",strokeCap:"stroke-linecap",strokeJoin:"stroke-linejoin",strokeDash:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeMiterLimit:"stroke-miterlimit",opacity:"opacity"},pP={blend:"mix-blend-mode"},ESe={fill:"none","stroke-miterlimit":10},eE=0,lse="http://www.w3.org/2000/xmlns/",Fi=bS.xmlns;class DG extends eA{constructor(t){super(t),this._dirtyID=0,this._dirty=[],this._svg=null,this._root=null,this._defs=null}initialize(t,n,r,i,o){return this._defs={},this._clearDefs(),t&&(this._svg=ji(t,0,"svg",Fi),this._svg.setAttributeNS(lse,"xmlns",Fi),this._svg.setAttributeNS(lse,"xmlns:xlink",bS["xmlns:xlink"]),this._svg.setAttribute("version",bS.version),this._svg.setAttribute("class","marks"),Wu(t,1),this._root=ji(this._svg,eE,"g",Fi),wp(this._root,ESe),Wu(this._svg,eE+1)),this.background(this._bgcolor),super.initialize(t,n,r,i,o)}background(t){return arguments.length&&this._svg&&this._svg.style.setProperty("background-color",t),super.background(...arguments)}resize(t,n,r,i){return super.resize(t,n,r,i),this._svg&&(wp(this._svg,{width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}),this._root.setAttribute("transform",`translate(${this._origin})`)),this._dirty=[],this}canvas(){return this._svg}svg(){const t=this._svg,n=this._bgcolor;if(!t)return null;let r;n&&(t.removeAttribute("style"),r=ji(t,eE,"rect",Fi),wp(r,{width:this._width,height:this._height,fill:n}));const i=_Se(t);return n&&(t.removeChild(r),this._svg.style.setProperty("background-color",n)),i}_render(t,n){return this._dirtyCheck()&&(this._dirtyAll&&this._clearDefs(),this.mark(this._root,t,void 0,n),Wu(this._root,1)),this.defs(),this._dirty=[],++this._dirtyID,this}dirty(t){t.dirty!==this._dirtyID&&(t.dirty=this._dirtyID,this._dirty.push(t))}isDirty(t){return this._dirtyAll||!t._svg||!t._svg.ownerSVGElement||t.dirty===this._dirtyID}_dirtyCheck(){this._dirtyAll=!0;const t=this._dirty;if(!t.length||!this._dirtyID)return!0;const n=++this._dirtyID;let r,i,o,s,a,u,l;for(a=0,u=t.length;a<u;++a)if(r=t[a],i=r.mark,i.marktype!==o&&(o=i.marktype,s=Su[o]),i.zdirty&&i.dirty!==n&&(this._dirtyAll=!1,cse(r,n),i.items.forEach(c=>{c.dirty=n})),!i.zdirty){if(r.exit){s.nested&&i.items.length?(l=i.items[0],l._svg&&this._update(s,l._svg,l)):r._svg&&(l=r._svg.parentNode,l&&l.removeChild(r._svg)),r._svg=null;continue}r=s.nested?i.items[0]:r,r._update!==n&&(!r._svg||!r._svg.ownerSVGElement?(this._dirtyAll=!1,cse(r,n)):this._update(s,r._svg,r),r._update=n)}return!this._dirtyAll}mark(t,n,r,i){if(!this.isDirty(n))return n._svg;const o=this._svg,s=n.marktype,a=Su[s],u=n.interactive===!1?"none":null,l=a.tag==="g",c=fse(n,t,r,"g",o);if(s!=="group"&&i!=null&&!i.includes(s))return Wu(c,0),n._svg;c.setAttribute("class",oSe(n));const f=ySe(n);for(const m in f)Ns(c,m,f[m]);l||Ns(c,"pointer-events",u),Ns(c,"clip-path",n.clip?cG(this,n,n.group):null);let d=null,h=0;const p=m=>{const g=this.isDirty(m),y=fse(m,c,d,a.tag,o);g&&(this._update(a,y,m),l&&JSt(this,y,m,i)),d=y,++h};return a.nested?n.items.length&&p(n.items[0]):dc(n,p),Wu(c,h),c}_update(t,n,r){Pd=n,ss=n.__values__,gSe(Yx,r),t.attr(Yx,r,this);const i=eCt[t.type];i&&i.call(this,t,n,r),Pd&&this.style(Pd,r)}style(t,n){if(n!=null){for(const r in hP){let i=r==="font"?ZC(n):n[r];if(i===ss[r])continue;const o=hP[r];i==null?t.removeAttribute(o):(aG(i)&&(i=DTe(i,this._defs.gradient,xSe())),t.setAttribute(o,i+"")),ss[r]=i}for(const r in pP)vI(t,pP[r],n[r])}}defs(){const t=this._svg,n=this._defs;let r=n.el,i=0;for(const o in n.gradient)r||(n.el=r=ji(t,eE+1,"defs",Fi)),i=XSt(r,n.gradient[o],i);for(const o in n.clipping)r||(n.el=r=ji(t,eE+1,"defs",Fi)),i=QSt(r,n.clipping[o],i);r&&(i===0?(t.removeChild(r),n.el=null):Wu(r,i))}_clearDefs(){const t=this._defs;t.gradient={},t.clipping={}}}function cse(e,t){for(;e&&e.dirty!==t;e=e.mark.group)if(e.dirty=t,e.mark&&e.mark.dirty!==t)e.mark.dirty=t;else return}function XSt(e,t,n){let r,i,o;if(t.gradient==="radial"){let s=ji(e,n++,"pattern",Fi);wp(s,{id:nP+t.id,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),s=ji(s,0,"rect",Fi),wp(s,{width:1,height:1,fill:`url(${xSe()}#${t.id})`}),e=ji(e,n++,"radialGradient",Fi),wp(e,{id:t.id,fx:t.x1,fy:t.y1,fr:t.r1,cx:t.x2,cy:t.y2,r:t.r2})}else e=ji(e,n++,"linearGradient",Fi),wp(e,{id:t.id,x1:t.x1,x2:t.x2,y1:t.y1,y2:t.y2});for(r=0,i=t.stops.length;r<i;++r)o=ji(e,r,"stop",Fi),o.setAttribute("offset",t.stops[r].offset),o.setAttribute("stop-color",t.stops[r].color);return Wu(e,r),n}function QSt(e,t,n){let r;return e=ji(e,n,"clipPath",Fi),e.setAttribute("id",t.id),t.path?(r=ji(e,0,"path",Fi),r.setAttribute("d",t.path)):(r=ji(e,0,"rect",Fi),wp(r,{x:0,y:0,width:t.width,height:t.height})),Wu(e,1),n+1}function JSt(e,t,n,r){t=t.lastChild.previousSibling;let i,o=0;dc(n,s=>{i=e.mark(t,s,i,r),++o}),Wu(t,1+o)}function fse(e,t,n,r,i){let o=e._svg,s;if(!o&&(s=t.ownerDocument,o=_p(s,r,Fi),e._svg=o,e.mark&&(o.__data__=e,o.__values__={fill:"default"},r==="g"))){const a=_p(s,"path",Fi);o.appendChild(a),a.__data__=e;const u=_p(s,"g",Fi);o.appendChild(u),u.__data__=e;const l=_p(s,"path",Fi);o.appendChild(l),l.__data__=e,l.__values__={fill:"default"}}return(o.ownerSVGElement!==i||ZSt(o,n))&&t.insertBefore(o,n?n.nextSibling:t.firstChild),o}function ZSt(e,t){return e.parentNode&&e.parentNode.childNodes.length>1&&e.previousSibling!=t}let Pd=null,ss=null;const eCt={group(e,t,n){const r=Pd=t.childNodes[2];ss=r.__values__,e.foreground(Yx,n,this),ss=t.__values__,Pd=t.childNodes[1],e.content(Yx,n,this);const i=Pd=t.childNodes[0];e.background(Yx,n,this);const o=n.mark.interactive===!1?"none":null;if(o!==ss.events&&(Ns(r,"pointer-events",o),Ns(i,"pointer-events",o),ss.events=o),n.strokeForeground&&n.stroke){const s=n.fill;Ns(r,"display",null),this.style(i,n),Ns(i,"stroke",null),s&&(n.fill=null),ss=r.__values__,this.style(r,n),s&&(n.fill=s),Pd=null}else Ns(r,"display","none")},image(e,t,n){n.smooth===!1?(vI(t,"image-rendering","optimizeSpeed"),vI(t,"image-rendering","pixelated")):vI(t,"image-rendering",null)},text(e,t,n){const r=JC(n);let i,o,s,a;Le(r)?(o=r.map(u=>_m(n,u)),i=o.join(`
`),i!==ss.text&&(Wu(t,0),s=t.ownerDocument,a=bm(n),o.forEach((u,l)=>{const c=_p(s,"tspan",Fi);c.__data__=n,c.textContent=u,l&&(c.setAttribute("x",0),c.setAttribute("dy",a)),t.appendChild(c)}),ss.text=i)):(o=_m(n,r),o!==ss.text&&(t.textContent=o,ss.text=o)),Ns(t,"font-family",ZC(n)),Ns(t,"font-size",qf(n)+"px"),Ns(t,"font-style",n.fontStyle),Ns(t,"font-variant",n.fontVariant),Ns(t,"font-weight",n.fontWeight)}};function Yx(e,t,n){t!==ss[e]&&(n?tCt(Pd,e,t,n):Ns(Pd,e,t),ss[e]=t)}function vI(e,t,n){n!==ss[t]&&(n==null?e.style.removeProperty(t):e.style.setProperty(t,n+""),ss[t]=n)}function wp(e,t){for(const n in t)Ns(e,n,t[n])}function Ns(e,t,n){n!=null?e.setAttribute(t,n):e.removeAttribute(t)}function tCt(e,t,n,r){n!=null?e.setAttributeNS(r,t,n):e.removeAttributeNS(r,t)}function xSe(){let e;return typeof window>"u"?"":(e=window.location).hash?e.href.slice(0,-e.hash.length):e.href}class TSe extends eA{constructor(t){super(t),this._text=null,this._defs={gradient:{},clipping:{}}}svg(){return this._text}_render(t){const n=PG();n.open("svg",tn({},bS,{class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}));const r=this._bgcolor;return r&&r!=="transparent"&&r!=="none"&&n.open("rect",{width:this._width,height:this._height,fill:r}).close(),n.open("g",ESe,{transform:"translate("+this._origin+")"}),this.mark(n,t),n.close(),this.defs(n),this._text=n.close()+"",this}mark(t,n){const r=Su[n.marktype],i=r.tag,o=[gSe,r.attr];t.open("g",{class:oSe(n),"clip-path":n.clip?cG(this,n,n.group):null},ySe(n),{"pointer-events":i!=="g"&&n.interactive===!1?"none":null});const s=a=>{const u=this.href(a);if(u&&t.open("a",u),t.open(i,this.attr(n,a,o,i!=="g"?i:null)),i==="text"){const l=JC(a);if(Le(l)){const c={x:0,dy:bm(a)};for(let f=0;f<l.length;++f)t.open("tspan",f?c:null).text(_m(a,l[f])).close()}else t.text(_m(a,l))}else if(i==="g"){const l=a.strokeForeground,c=a.fill,f=a.stroke;l&&f&&(a.stroke=null),t.open("path",this.attr(n,a,r.background,"bgrect")).close(),t.open("g",this.attr(n,a,r.content)),dc(a,d=>this.mark(t,d)),t.close(),l&&f?(c&&(a.fill=null),a.stroke=f,t.open("path",this.attr(n,a,r.foreground,"bgrect")).close(),c&&(a.fill=c)):t.open("path",this.attr(n,a,r.foreground,"bgfore")).close()}t.close(),u&&t.close()};return r.nested?n.items&&n.items.length&&s(n.items[0]):dc(n,s),t.close()}href(t){const n=t.href;let r;if(n){if(r=this._hrefs&&this._hrefs[n])return r;this.sanitizeURL(n).then(i=>{i["xlink:href"]=i.href,i.href=null,(this._hrefs||(this._hrefs={}))[n]=i})}return null}attr(t,n,r,i){const o={},s=(a,u,l,c)=>{o[c||a]=u};return Array.isArray(r)?r.forEach(a=>a(s,n,this)):r(s,n,this),i&&nCt(o,n,t,i,this._defs),o}defs(t){const n=this._defs.gradient,r=this._defs.clipping;if(Object.keys(n).length+Object.keys(r).length!==0){t.open("defs");for(const o in n){const s=n[o],a=s.stops;s.gradient==="radial"?(t.open("pattern",{id:nP+o,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),t.open("rect",{width:"1",height:"1",fill:"url(#"+o+")"}).close(),t.close(),t.open("radialGradient",{id:o,fx:s.x1,fy:s.y1,fr:s.r1,cx:s.x2,cy:s.y2,r:s.r2})):t.open("linearGradient",{id:o,x1:s.x1,x2:s.x2,y1:s.y1,y2:s.y2});for(let u=0;u<a.length;++u)t.open("stop",{offset:a[u].offset,"stop-color":a[u].color}).close();t.close()}for(const o in r){const s=r[o];t.open("clipPath",{id:o}),s.path?t.open("path",{d:s.path}).close():t.open("rect",{x:0,y:0,width:s.width,height:s.height}).close(),t.close()}t.close()}}}function nCt(e,t,n,r,i){let o;if(t==null||(r==="bgrect"&&n.interactive===!1&&(e["pointer-events"]="none"),r==="bgfore"&&(n.interactive===!1&&(e["pointer-events"]="none"),e.display="none",t.fill!==null)))return e;r==="image"&&t.smooth===!1&&(o=["image-rendering: optimizeSpeed;","image-rendering: pixelated;"]),r==="text"&&(e["font-family"]=ZC(t),e["font-size"]=qf(t)+"px",e["font-style"]=t.fontStyle,e["font-variant"]=t.fontVariant,e["font-weight"]=t.fontWeight);for(const s in hP){let a=t[s];const u=hP[s];a==="transparent"&&(u==="fill"||u==="stroke")||a!=null&&(aG(a)&&(a=DTe(a,i.gradient,"")),e[u]=a)}for(const s in pP){const a=t[s];a!=null&&(o=o||[],o.push(`${pP[s]}: ${a};`))}return o&&(e.style=o.join(" ")),e}const $l={svgMarkTypes:["text"],svgOnTop:!0,debug:!1};function rCt(e){$l.svgMarkTypes=e.svgMarkTypes??["text"],$l.svgOnTop=e.svgOnTop??!0,$l.debug=e.debug??!1}class r8 extends eA{constructor(t){super(t),this._svgRenderer=new DG(t),this._canvasRenderer=new dP(t)}initialize(t,n,r,i,o){this._root_el=ji(t,0,"div");const s=ji(this._root_el,0,"div"),a=ji(this._root_el,1,"div");return this._root_el.style.position="relative",$l.debug||(s.style.height="100%",a.style.position="absolute",a.style.top="0",a.style.left="0",a.style.height="100%",a.style.width="100%"),this._svgEl=$l.svgOnTop?a:s,this._canvasEl=$l.svgOnTop?s:a,this._svgEl.style.pointerEvents="none",this._canvasRenderer.initialize(this._canvasEl,n,r,i,o),this._svgRenderer.initialize(this._svgEl,n,r,i,o),super.initialize(t,n,r,i,o)}dirty(t){return $l.svgMarkTypes.includes(t.mark.marktype)?this._svgRenderer.dirty(t):this._canvasRenderer.dirty(t),this}_render(t,n){const i=(n??["arc","area","image","line","path","rect","rule","shape","symbol","text","trail"]).filter(o=>!$l.svgMarkTypes.includes(o));this._svgRenderer.render(t,$l.svgMarkTypes),this._canvasRenderer.render(t,i)}resize(t,n,r,i){return super.resize(t,n,r,i),this._svgRenderer.resize(t,n,r,i),this._canvasRenderer.resize(t,n,r,i),this}background(t){return $l.svgOnTop?this._canvasRenderer.background(t):this._svgRenderer.background(t),this}}class SSe extends tA{constructor(t,n){super(t,n)}initialize(t,n,r){const i=ji(ji(t,0,"div"),$l.svgOnTop?0:1,"div");return super.initialize(i,n,r)}}const CSe="canvas",ASe="hybrid",kSe="png",ISe="svg",RSe="none",Ep={Canvas:CSe,PNG:kSe,SVG:ISe,Hybrid:ASe,None:RSe},J0={};J0[CSe]=J0[kSe]={renderer:dP,headless:dP,handler:tA};J0[ISe]={renderer:DG,headless:TSe,handler:dSe};J0[ASe]={renderer:r8,headless:r8,handler:SSe};J0[RSe]={};function Y$(e,t){return e=String(e||"").toLowerCase(),arguments.length>1?(J0[e]=t,this):J0[e]}function NSe(e,t,n){const r=[],i=new Di().union(t),o=e.marktype;return o?PSe(e,i,n,r):o==="group"?DSe(e,i,n,r):De("Intersect scene must be mark node or group item.")}function PSe(e,t,n,r){if(iCt(e,t,n)){const i=e.items,o=e.marktype,s=i.length;let a=0;if(o==="group")for(;a<s;++a)DSe(i[a],t,n,r);else for(const u=Su[o].isect;a<s;++a){const l=i[a];OSe(l,t,u)&&r.push(l)}}return r}function iCt(e,t,n){return e.bounds&&t.intersects(e.bounds)&&(e.marktype==="group"||e.interactive!==!1&&(!n||n(e)))}function DSe(e,t,n,r){n&&n(e.mark)&&OSe(e,t,Su.group.isect)&&r.push(e);const i=e.items,o=i&&i.length;if(o){const s=e.x||0,a=e.y||0;t.translate(-s,-a);for(let u=0;u<o;++u)PSe(i[u],t,n,r);t.translate(s,a)}return r}function OSe(e,t,n){const r=e.bounds;return t.encloses(r)||t.intersects(r)&&n(e,t)}const o4=new Di;function $Se(e){const t=e.clip;if(nn(t))t(XC(o4.clear()));else if(t)o4.set(0,0,e.group.width,e.group.height);else return;e.bounds.intersect(o4)}const oCt=1e-9;function OG(e,t,n){return e===t?!0:n==="path"?MSe(e,t):e instanceof Date&&t instanceof Date?+e==+t:jn(e)&&jn(t)?Math.abs(e-t)<=oCt:!e||!t||!ht(e)&&!ht(t)?e==t:sCt(e,t)}function MSe(e,t){return OG(jb(e),jb(t))}function sCt(e,t){var n=Object.keys(e),r=Object.keys(t),i,o;if(n.length!==r.length)return!1;for(n.sort(),r.sort(),o=n.length-1;o>=0;o--)if(n[o]!=r[o])return!1;for(o=n.length-1;o>=0;o--)if(i=n[o],!OG(e[i],t[i],i))return!1;return typeof e==typeof t}function aCt(){BTe(),Nxt()}const zb="top",Hl="left",Yl="right",wm="bottom",uCt="top-left",lCt="top-right",cCt="bottom-left",fCt="bottom-right",$G="start",i8="middle",Os="end",dCt="x",hCt="y",K$="group",MG="axis",LG="title",pCt="frame",mCt="scope",FG="legend",LSe="row-header",FSe="row-footer",jSe="row-title",BSe="column-header",USe="column-footer",zSe="column-title",gCt="padding",yCt="symbol",VSe="fit",HSe="fit-x",qSe="fit-y",vCt="pad",jG="none",X2="all",o8="each",BG="flush",xp="column",Tp="row";function WSe(e){ke.call(this,null,e)}at(WSe,ke,{transform(e,t){const n=t.dataflow,r=e.mark,i=r.marktype,o=Su[i],s=o.bound;let a=r.bounds,u;if(o.nested)r.items.length&&n.dirty(r.items[0]),a=Q2(r,s),r.items.forEach(l=>{l.bounds.clear().union(a)});else if(i===K$||e.modified())switch(t.visit(t.MOD,l=>n.dirty(l)),a.clear(),r.items.forEach(l=>a.union(Q2(l,s))),r.role){case MG:case FG:case LG:t.reflow()}else u=t.changed(t.REM),t.visit(t.ADD,l=>{a.union(Q2(l,s))}),t.visit(t.MOD,l=>{u=u||a.alignsWith(l.bounds),n.dirty(l),a.union(Q2(l,s))}),u&&(a.clear(),r.items.forEach(l=>a.union(l.bounds)));return $Se(r),t.modifies("bounds")}});function Q2(e,t,n){return t(e.bounds.clear(),e,n)}const dse=":vega_identifier:";function UG(e){ke.call(this,0,e)}UG.Definition={type:"Identifier",metadata:{modifies:!0},params:[{name:"as",type:"string",required:!0}]};at(UG,ke,{transform(e,t){const n=bCt(t.dataflow),r=e.as;let i=n.value;return t.visit(t.ADD,o=>o[r]=o[r]||++i),n.set(this.value=i),t}});function bCt(e){return e._signals[dse]||(e._signals[dse]=e.add(0))}function GSe(e){ke.call(this,null,e)}at(GSe,ke,{transform(e,t){let n=this.value;n||(n=t.dataflow.scenegraph().mark(e.markdef,_Ct(e),e.index),n.group.context=e.context,e.context.group||(e.context.group=n.group),n.source=this.source,n.clip=e.clip,n.interactive=e.interactive,this.value=n);const r=n.marktype===K$?B$:j$;return t.visit(t.ADD,i=>r.call(i,n)),(e.modified("clip")||e.modified("interactive"))&&(n.clip=e.clip,n.interactive=!!e.interactive,n.zdirty=!0,t.reflow()),n.items=t.source,t}});function _Ct(e){const t=e.groups,n=e.parent;return t&&t.size===1?t.get(Object.keys(t.object)[0]):t&&n?t.lookup(n):null}function YSe(e){ke.call(this,null,e)}const hse={parity:e=>e.filter((t,n)=>n%2?t.opacity=0:1),greedy:(e,t)=>{let n;return e.filter((r,i)=>!i||!KSe(n.bounds,r.bounds,t)?(n=r,1):r.opacity=0)}},KSe=(e,t,n)=>n>Math.max(t.x1-e.x2,e.x1-t.x2,t.y1-e.y2,e.y1-t.y2),pse=(e,t)=>{for(var n=1,r=e.length,i=e[0].bounds,o;n<r;i=o,++n)if(KSe(i,o=e[n].bounds,t))return!0},wCt=e=>{const t=e.bounds;return t.width()>1&&t.height()>1},ECt=(e,t,n)=>{var r=e.range(),i=new Di;return t===zb||t===wm?i.set(r[0],-1/0,r[1],1/0):i.set(-1/0,r[0],1/0,r[1]),i.expand(n||1),o=>i.encloses(o.bounds)},mse=e=>(e.forEach(t=>t.opacity=1),e),gse=(e,t)=>e.reflow(t.modified()).modifies("opacity");at(YSe,ke,{transform(e,t){const n=hse[e.method]||hse.parity,r=e.separation||0;let i=t.materialize(t.SOURCE).source,o,s;if(!i||!i.length)return;if(!e.method)return e.modified("method")&&(mse(i),t=gse(t,e)),t;if(i=i.filter(wCt),!i.length)return;if(e.sort&&(i=i.slice().sort(e.sort)),o=mse(i),t=gse(t,e),o.length>=3&&pse(o,r)){do o=n(o,r);while(o.length>=3&&pse(o,r));o.length<3&&!In(i).opacity&&(o.length>1&&(In(o).opacity=0),In(i).opacity=1)}e.boundScale&&e.boundTolerance>=0&&(s=ECt(e.boundScale,e.boundOrient,+e.boundTolerance),i.forEach(u=>{s(u)||(u.opacity=0)}));const a=o[0].mark.bounds.clear();return i.forEach(u=>{u.opacity&&a.union(u.bounds)}),t}});function XSe(e){ke.call(this,null,e)}at(XSe,ke,{transform(e,t){const n=t.dataflow;if(t.visit(t.ALL,r=>n.dirty(r)),t.fields&&t.fields.zindex){const r=t.source&&t.source[0];r&&(r.mark.zdirty=!0)}}});const is=new Di;function h1(e,t,n){return e[t]===n?0:(e[t]=n,1)}function xCt(e){var t=e.items[0].orient;return t===Hl||t===Yl}function TCt(e){let t=+e.grid;return[e.ticks?t++:-1,e.labels?t++:-1,t+ +e.domain]}function SCt(e,t,n,r){var i=t.items[0],o=i.datum,s=i.translate!=null?i.translate:.5,a=i.orient,u=TCt(o),l=i.range,c=i.offset,f=i.position,d=i.minExtent,h=i.maxExtent,p=o.title&&i.items[u[2]].items[0],m=i.titlePadding,g=i.bounds,y=p&&xG(p),v=0,_=0,w,E;switch(is.clear().union(g),g.clear(),(w=u[0])>-1&&g.union(i.items[w].bounds),(w=u[1])>-1&&g.union(i.items[w].bounds),a){case zb:v=f||0,_=-c,E=Math.max(d,Math.min(h,-g.y1)),g.add(0,-E).add(l,0),p&&J2(e,p,E,m,y,0,-1,g);break;case Hl:v=-c,_=f||0,E=Math.max(d,Math.min(h,-g.x1)),g.add(-E,0).add(0,l),p&&J2(e,p,E,m,y,1,-1,g);break;case Yl:v=n+c,_=f||0,E=Math.max(d,Math.min(h,g.x2)),g.add(0,0).add(E,l),p&&J2(e,p,E,m,y,1,1,g);break;case wm:v=f||0,_=r+c,E=Math.max(d,Math.min(h,g.y2)),g.add(0,0).add(l,E),p&&J2(e,p,E,m,0,0,1,g);break;default:v=i.x,_=i.y}return Ah(g.translate(v,_),i),h1(i,"x",v+s)|h1(i,"y",_+s)&&(i.bounds=is,e.dirty(i),i.bounds=g,e.dirty(i)),i.mark.bounds.clear().union(g)}function J2(e,t,n,r,i,o,s,a){const u=t.bounds;if(t.auto){const l=s*(n+i+r);let c=0,f=0;e.dirty(t),o?c=(t.x||0)-(t.x=l):f=(t.y||0)-(t.y=l),t.mark.bounds.clear().union(u.translate(-c,-f)),e.dirty(t)}a.union(u)}const yse=(e,t)=>Math.floor(Math.min(e,t)),vse=(e,t)=>Math.ceil(Math.max(e,t));function CCt(e){var t=e.items,n=t.length,r=0,i,o;const s={marks:[],rowheaders:[],rowfooters:[],colheaders:[],colfooters:[],rowtitle:null,coltitle:null};for(;r<n;++r)if(i=t[r],o=i.items,i.marktype===K$)switch(i.role){case MG:case FG:case LG:break;case LSe:s.rowheaders.push(...o);break;case FSe:s.rowfooters.push(...o);break;case BSe:s.colheaders.push(...o);break;case USe:s.colfooters.push(...o);break;case jSe:s.rowtitle=o[0];break;case zSe:s.coltitle=o[0];break;default:s.marks.push(...o)}return s}function ACt(e){return new Di().set(0,0,e.width||0,e.height||0)}function kCt(e){const t=e.bounds.clone();return t.empty()?t.set(0,0,0,0):t.translate(-(e.x||0),-(e.y||0))}function Lr(e,t,n){const r=ht(e)?e[t]:e;return r??(n!==void 0?n:0)}function bse(e){return e<0?Math.ceil(-e):0}function QSe(e,t,n){var r=!n.nodirty,i=n.bounds===BG?ACt:kCt,o=is.set(0,0,0,0),s=Lr(n.align,xp),a=Lr(n.align,Tp),u=Lr(n.padding,xp),l=Lr(n.padding,Tp),c=n.columns||t.length,f=c<=0?1:Math.ceil(t.length/c),d=t.length,h=Array(d),p=Array(c),m=0,g=Array(d),y=Array(f),v=0,_=Array(d),w=Array(d),E=Array(d),S,T,C,A,R,N,O,D,M,F,L;for(T=0;T<c;++T)p[T]=0;for(T=0;T<f;++T)y[T]=0;for(T=0;T<d;++T)N=t[T],R=E[T]=i(N),N.x=N.x||0,_[T]=0,N.y=N.y||0,w[T]=0,C=T%c,A=~~(T/c),m=Math.max(m,O=Math.ceil(R.x2)),v=Math.max(v,D=Math.ceil(R.y2)),p[C]=Math.max(p[C],O),y[A]=Math.max(y[A],D),h[T]=u+bse(R.x1),g[T]=l+bse(R.y1),r&&e.dirty(t[T]);for(T=0;T<d;++T)T%c===0&&(h[T]=0),T<c&&(g[T]=0);if(s===o8)for(C=1;C<c;++C){for(L=0,T=C;T<d;T+=c)L<h[T]&&(L=h[T]);for(T=C;T<d;T+=c)h[T]=L+p[C-1]}else if(s===X2){for(L=0,T=0;T<d;++T)T%c&&L<h[T]&&(L=h[T]);for(T=0;T<d;++T)T%c&&(h[T]=L+m)}else for(s=!1,C=1;C<c;++C)for(T=C;T<d;T+=c)h[T]+=p[C-1];if(a===o8)for(A=1;A<f;++A){for(L=0,T=A*c,S=T+c;T<S;++T)L<g[T]&&(L=g[T]);for(T=A*c;T<S;++T)g[T]=L+y[A-1]}else if(a===X2){for(L=0,T=c;T<d;++T)L<g[T]&&(L=g[T]);for(T=c;T<d;++T)g[T]=L+v}else for(a=!1,A=1;A<f;++A)for(T=A*c,S=T+c;T<S;++T)g[T]+=y[A-1];for(M=0,T=0;T<d;++T)M=h[T]+(T%c?M:0),_[T]+=M-t[T].x;for(C=0;C<c;++C)for(F=0,T=C;T<d;T+=c)F+=g[T],w[T]+=F-t[T].y;if(s&&Lr(n.center,xp)&&f>1)for(T=0;T<d;++T)R=s===X2?m:p[T%c],M=R-E[T].x2-t[T].x-_[T],M>0&&(_[T]+=M/2);if(a&&Lr(n.center,Tp)&&c!==1)for(T=0;T<d;++T)R=a===X2?v:y[~~(T/c)],F=R-E[T].y2-t[T].y-w[T],F>0&&(w[T]+=F/2);for(T=0;T<d;++T)o.union(E[T].translate(_[T],w[T]));switch(M=Lr(n.anchor,dCt),F=Lr(n.anchor,hCt),Lr(n.anchor,xp)){case Os:M-=o.width();break;case i8:M-=o.width()/2}switch(Lr(n.anchor,Tp)){case Os:F-=o.height();break;case i8:F-=o.height()/2}for(M=Math.round(M),F=Math.round(F),o.clear(),T=0;T<d;++T)t[T].mark.bounds.clear();for(T=0;T<d;++T)N=t[T],N.x+=_[T]+=M,N.y+=w[T]+=F,o.union(N.mark.bounds.union(N.bounds.translate(_[T],w[T]))),r&&e.dirty(N);return o}function ICt(e,t,n){var r=CCt(t),i=r.marks,o=n.bounds===BG?RCt:NCt,s=n.offset,a=n.columns||i.length,u=a<=0?1:Math.ceil(i.length/a),l=u*a,c,f,d,h,p,m,g;const y=QSe(e,i,n);y.empty()&&y.set(0,0,0,0),r.rowheaders&&(m=Lr(n.headerBand,Tp,null),c=Z2(e,r.rowheaders,i,a,u,-Lr(s,"rowHeader"),yse,0,o,"x1",0,a,1,m)),r.colheaders&&(m=Lr(n.headerBand,xp,null),f=Z2(e,r.colheaders,i,a,a,-Lr(s,"columnHeader"),yse,1,o,"y1",0,1,a,m)),r.rowfooters&&(m=Lr(n.footerBand,Tp,null),d=Z2(e,r.rowfooters,i,a,u,Lr(s,"rowFooter"),vse,0,o,"x2",a-1,a,1,m)),r.colfooters&&(m=Lr(n.footerBand,xp,null),h=Z2(e,r.colfooters,i,a,a,Lr(s,"columnFooter"),vse,1,o,"y2",l-a,1,a,m)),r.rowtitle&&(p=Lr(n.titleAnchor,Tp),g=Lr(s,"rowTitle"),g=p===Os?d+g:c-g,m=Lr(n.titleBand,Tp,.5),_se(e,r.rowtitle,g,0,y,m)),r.coltitle&&(p=Lr(n.titleAnchor,xp),g=Lr(s,"columnTitle"),g=p===Os?h+g:f-g,m=Lr(n.titleBand,xp,.5),_se(e,r.coltitle,g,1,y,m))}function RCt(e,t){return t==="x1"?e.x||0:t==="y1"?e.y||0:t==="x2"?(e.x||0)+(e.width||0):t==="y2"?(e.y||0)+(e.height||0):void 0}function NCt(e,t){return e.bounds[t]}function Z2(e,t,n,r,i,o,s,a,u,l,c,f,d,h){var p=n.length,m=0,g=0,y,v,_,w,E,S,T,C,A;if(!p)return m;for(y=c;y<p;y+=f)n[y]&&(m=s(m,u(n[y],l)));if(!t.length)return m;for(t.length>i&&(e.warn("Grid headers exceed limit: "+i),t=t.slice(0,i)),m+=o,v=0,w=t.length;v<w;++v)e.dirty(t[v]),t[v].mark.bounds.clear();for(y=c,v=0,w=t.length;v<w;++v,y+=f){for(S=t[v],E=S.mark.bounds,_=y;_>=0&&(T=n[_])==null;_-=d);a?(C=h==null?T.x:Math.round(T.bounds.x1+h*T.bounds.width()),A=m):(C=m,A=h==null?T.y:Math.round(T.bounds.y1+h*T.bounds.height())),E.union(S.bounds.translate(C-(S.x||0),A-(S.y||0))),S.x=C,S.y=A,e.dirty(S),g=s(g,E[l])}return g}function _se(e,t,n,r,i,o){if(t){e.dirty(t);var s=n,a=n;r?s=Math.round(i.x1+o*i.width()):a=Math.round(i.y1+o*i.height()),t.bounds.translate(s-(t.x||0),a-(t.y||0)),t.mark.bounds.clear().union(t.bounds),t.x=s,t.y=a,e.dirty(t)}}function PCt(e,t){const n=e[t]||{};return(r,i)=>n[r]!=null?n[r]:e[r]!=null?e[r]:i}function DCt(e,t){let n=-1/0;return e.forEach(r=>{r.offset!=null&&(n=Math.max(n,r.offset))}),n>-1/0?n:t}function OCt(e,t,n,r,i,o,s){const a=PCt(n,t),u=DCt(e,a("offset",0)),l=a("anchor",$G),c=l===Os?1:l===i8?.5:0,f={align:o8,bounds:a("bounds",BG),columns:a("direction")==="vertical"?1:e.length,padding:a("margin",8),center:a("center"),nodirty:!0};switch(t){case Hl:f.anchor={x:Math.floor(r.x1)-u,column:Os,y:c*(s||r.height()+2*r.y1),row:l};break;case Yl:f.anchor={x:Math.ceil(r.x2)+u,y:c*(s||r.height()+2*r.y1),row:l};break;case zb:f.anchor={y:Math.floor(i.y1)-u,row:Os,x:c*(o||i.width()+2*i.x1),column:l};break;case wm:f.anchor={y:Math.ceil(i.y2)+u,x:c*(o||i.width()+2*i.x1),column:l};break;case uCt:f.anchor={x:u,y:u};break;case lCt:f.anchor={x:o-u,y:u,column:Os};break;case cCt:f.anchor={x:u,y:s-u,row:Os};break;case fCt:f.anchor={x:o-u,y:s-u,column:Os,row:Os};break}return f}function $Ct(e,t){var n=t.items[0],r=n.datum,i=n.orient,o=n.bounds,s=n.x,a=n.y,u,l;return n._bounds?n._bounds.clear().union(o):n._bounds=o.clone(),o.clear(),LCt(e,n,n.items[0].items[0]),o=MCt(n,o),u=2*n.padding,l=2*n.padding,o.empty()||(u=Math.ceil(o.width()+u),l=Math.ceil(o.height()+l)),r.type===yCt&&FCt(n.items[0].items[0].items[0].items),i!==jG&&(n.x=s=0,n.y=a=0),n.width=u,n.height=l,Ah(o.set(s,a,s+u,a+l),n),n.mark.bounds.clear().union(o),n}function MCt(e,t){return e.items.forEach(n=>t.union(n.bounds)),t.x1=e.padding,t.y1=e.padding,t}function LCt(e,t,n){var r=t.padding,i=r-n.x,o=r-n.y;if(!t.datum.title)(i||o)&&tE(e,n,i,o);else{var s=t.items[1].items[0],a=s.anchor,u=t.titlePadding||0,l=r-s.x,c=r-s.y;switch(s.orient){case Hl:i+=Math.ceil(s.bounds.width())+u;break;case Yl:case wm:break;default:o+=s.bounds.height()+u}switch((i||o)&&tE(e,n,i,o),s.orient){case Hl:c+=Cv(t,n,s,a,1,1);break;case Yl:l+=Cv(t,n,s,Os,0,0)+u,c+=Cv(t,n,s,a,1,1);break;case wm:l+=Cv(t,n,s,a,0,0),c+=Cv(t,n,s,Os,-1,0,1)+u;break;default:l+=Cv(t,n,s,a,0,0)}(l||c)&&tE(e,s,l,c),(l=Math.round(s.bounds.x1-r))<0&&(tE(e,n,-l,0),tE(e,s,-l,0))}}function Cv(e,t,n,r,i,o,s){const a=e.datum.type!=="symbol",u=n.datum.vgrad,l=a&&(o||!u)&&!s?t.items[0]:t,c=l.bounds[i?"y2":"x2"]-e.padding,f=u&&o?c:0,d=u&&o?0:c,h=i<=0?0:xG(n);return Math.round(r===$G?f:r===Os?d-h:.5*(c-h))}function tE(e,t,n,r){t.x+=n,t.y+=r,t.bounds.translate(n,r),t.mark.bounds.translate(n,r),e.dirty(t)}function FCt(e){const t=e.reduce((n,r)=>(n[r.column]=Math.max(r.bounds.x2-r.x,n[r.column]||0),n),{});e.forEach(n=>{n.width=t[n.column],n.height=n.bounds.y2-n.y})}function jCt(e,t,n,r,i){var o=t.items[0],s=o.frame,a=o.orient,u=o.anchor,l=o.offset,c=o.padding,f=o.items[0].items[0],d=o.items[1]&&o.items[1].items[0],h=a===Hl||a===Yl?r:n,p=0,m=0,g=0,y=0,v=0,_;if(s!==K$?a===Hl?(p=i.y2,h=i.y1):a===Yl?(p=i.y1,h=i.y2):(p=i.x1,h=i.x2):a===Hl&&(p=r,h=0),_=u===$G?p:u===Os?h:(p+h)/2,d&&d.text){switch(a){case zb:case wm:v=f.bounds.height()+c;break;case Hl:y=f.bounds.width()+c;break;case Yl:y=-f.bounds.width()-c;break}is.clear().union(d.bounds),is.translate(y-(d.x||0),v-(d.y||0)),h1(d,"x",y)|h1(d,"y",v)&&(e.dirty(d),d.bounds.clear().union(is),d.mark.bounds.clear().union(is),e.dirty(d)),is.clear().union(d.bounds)}else is.clear();switch(is.union(f.bounds),a){case zb:m=_,g=i.y1-is.height()-l;break;case Hl:m=i.x1-is.width()-l,g=_;break;case Yl:m=i.x2+is.width()+l,g=_;break;case wm:m=_,g=i.y2+l;break;default:m=o.x,g=o.y}return h1(o,"x",m)|h1(o,"y",g)&&(is.translate(m,g),e.dirty(o),o.bounds.clear().union(is),t.bounds.clear().union(is),e.dirty(o)),o.bounds}function JSe(e){ke.call(this,null,e)}at(JSe,ke,{transform(e,t){const n=t.dataflow;return e.mark.items.forEach(r=>{e.layout&&ICt(n,r,e.layout),UCt(n,r,e)}),BCt(e.mark.group)?t.reflow():t}});function BCt(e){return e&&e.mark.role!=="legend-entry"}function UCt(e,t,n){var r=t.items,i=Math.max(0,t.width||0),o=Math.max(0,t.height||0),s=new Di().set(0,0,i,o),a=s.clone(),u=s.clone(),l=[],c,f,d,h,p,m;for(p=0,m=r.length;p<m;++p)switch(f=r[p],f.role){case MG:h=xCt(f)?a:u,h.union(SCt(e,f,i,o));break;case LG:c=f;break;case FG:l.push($Ct(e,f));break;case pCt:case mCt:case LSe:case FSe:case jSe:case BSe:case USe:case zSe:a.union(f.bounds),u.union(f.bounds);break;default:s.union(f.bounds)}if(l.length){const g={};l.forEach(y=>{d=y.orient||Yl,d!==jG&&(g[d]||(g[d]=[])).push(y)});for(const y in g){const v=g[y];QSe(e,v,OCt(v,y,n.legends,a,u,i,o))}l.forEach(y=>{const v=y.bounds;if(v.equals(y._bounds)||(y.bounds=y._bounds,e.dirty(y),y.bounds=v,e.dirty(y)),n.autosize&&(n.autosize.type===VSe||n.autosize.type===HSe||n.autosize.type===qSe))switch(y.orient){case Hl:case Yl:s.add(v.x1,0).add(v.x2,0);break;case zb:case wm:s.add(0,v.y1).add(0,v.y2)}else s.union(v)})}s.union(a).union(u),c&&s.union(jCt(e,c,i,o,s)),t.clip&&s.set(0,0,t.width||0,t.height||0),zCt(e,t,s,n)}function zCt(e,t,n,r){const i=r.autosize||{},o=i.type;if(e._autosize<1||!o)return;let s=e._width,a=e._height,u=Math.max(0,t.width||0),l=Math.max(0,Math.ceil(-n.x1)),c=Math.max(0,t.height||0),f=Math.max(0,Math.ceil(-n.y1));const d=Math.max(0,Math.ceil(n.x2-u)),h=Math.max(0,Math.ceil(n.y2-c));if(i.contains===gCt){const p=e.padding();s-=p.left+p.right,a-=p.top+p.bottom}o===jG?(l=0,f=0,u=s,c=a):o===VSe?(u=Math.max(0,s-l-d),c=Math.max(0,a-f-h)):o===HSe?(u=Math.max(0,s-l-d),a=c+f+h):o===qSe?(s=u+l+d,c=Math.max(0,a-f-h)):o===vCt&&(s=u+l+d,a=c+f+h),e._resizeView(s,a,u,c,[l,f],i.resize)}const VCt=Object.freeze(Object.defineProperty({__proto__:null,bound:WSe,identifier:UG,mark:GSe,overlap:YSe,render:XSe,viewlayout:JSe},Symbol.toStringTag,{value:"Module"}));function ZSe(e){ke.call(this,null,e)}at(ZSe,ke,{transform(e,t){if(this.value&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=this.value,o=e.scale,s=e.count==null?e.values?e.values.length:10:e.count,a=oG(o,s,e.minstep),u=e.format||CTe(n,o,a,e.formatSpecifier,e.formatType,!!e.values),l=e.values?STe(o,e.values,a):sG(o,a);return i&&(r.rem=i),i=l.map((c,f)=>Xn({index:f/(l.length-1||1),value:c,label:u(c)})),e.extra&&i.length&&i.push(Xn({index:-1,extra:{value:i[0].value},label:""})),r.source=i,r.add=i,this.value=i,r}});function eCe(e){ke.call(this,null,e)}function HCt(){return Xn({})}function qCt(e){const t=Q_().test(n=>n.exit);return t.lookup=n=>t.get(e(n)),t}at(eCe,ke,{transform(e,t){var n=t.dataflow,r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.item||HCt,o=e.key||Dt,s=this.value;return Le(r.encode)&&(r.encode=null),s&&(e.modified("key")||t.modified(o))&&De("DataJoin does not support modified key function or fields."),s||(t=t.addAll(),this.value=s=qCt(o)),t.visit(t.ADD,a=>{const u=o(a);let l=s.get(u);l?l.exit?(s.empty--,r.add.push(l)):r.mod.push(l):(l=i(a),s.set(u,l),r.add.push(l)),l.datum=a,l.exit=!1}),t.visit(t.MOD,a=>{const u=o(a),l=s.get(u);l&&(l.datum=a,r.mod.push(l))}),t.visit(t.REM,a=>{const u=o(a),l=s.get(u);a===l.datum&&!l.exit&&(r.rem.push(l),l.exit=!0,++s.empty)}),t.changed(t.ADD_MOD)&&r.modifies("datum"),(t.clean()||e.clean&&s.empty>n.cleanThreshold)&&n.runAfter(s.clean),r}});function tCe(e){ke.call(this,null,e)}at(tCe,ke,{transform(e,t){var n=t.fork(t.ADD_REM),r=e.mod||!1,i=e.encoders,o=t.encode;if(Le(o))if(n.changed()||o.every(f=>i[f]))o=o[0],n.encode=null;else return t.StopPropagation;var s=o==="enter",a=i.update||qh,u=i.enter||qh,l=i.exit||qh,c=(o&&!s?i[o]:a)||qh;if(t.changed(t.ADD)&&(t.visit(t.ADD,f=>{u(f,e),a(f,e)}),n.modifies(u.output),n.modifies(a.output),c!==qh&&c!==a&&(t.visit(t.ADD,f=>{c(f,e)}),n.modifies(c.output))),t.changed(t.REM)&&l!==qh&&(t.visit(t.REM,f=>{l(f,e)}),n.modifies(l.output)),s||c!==qh){const f=t.MOD|(e.modified()?t.REFLOW:0);s?(t.visit(f,d=>{const h=u(d,e)||r;(c(d,e)||h)&&n.mod.push(d)}),n.mod.length&&n.modifies(u.output)):t.visit(f,d=>{(c(d,e)||r)&&n.mod.push(d)}),n.mod.length&&n.modifies(c.output)}return n.changed()?n:t.StopPropagation}});function nCe(e){ke.call(this,[],e)}at(nCe,ke,{transform(e,t){if(this.value!=null&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=this.value,o=e.type||cI,s=e.scale,a=+e.limit,u=oG(s,e.count==null?5:e.count,e.minstep),l=!!e.values||o===cI,c=e.format||RTe(n,s,u,o,e.formatSpecifier,e.formatType,l),f=e.values||ITe(s,u),d,h,p,m,g;return i&&(r.rem=i),o===cI?(a&&f.length>a?(t.dataflow.warn("Symbol legend count exceeds limit, filtering items."),i=f.slice(0,a-1),g=!0):i=f,nn(p=e.size)?(!e.values&&s(i[0])===0&&(i=i.slice(1)),m=i.reduce((y,v)=>Math.max(y,p(v,e)),0)):p=ws(m=p||8),i=i.map((y,v)=>Xn({index:v,label:c(y,v,i),value:y,offset:m,size:p(y,e)})),g&&(g=f[i.length],i.push(Xn({index:i.length,label:`${f.length-i.length} entries`,value:g,offset:m,size:p(g,e)})))):o===vxt?(d=s.domain(),h=ETe(s,d[0],In(d)),f.length<3&&!e.values&&d[0]!==In(d)&&(f=[d[0],In(d)]),i=f.map((y,v)=>Xn({index:v,label:c(y,v,f),value:y,perc:h(y)}))):(p=f.length-1,h=Ixt(s),i=f.map((y,v)=>Xn({index:v,label:c(y,v,f),value:y,perc:v?h(y):0,perc2:v===p?1:h(f[v+1])}))),r.source=i,r.add=i,this.value=i,r}});const WCt=e=>e.source.x,GCt=e=>e.source.y,YCt=e=>e.target.x,KCt=e=>e.target.y;function zG(e){ke.call(this,{},e)}zG.Definition={type:"LinkPath",metadata:{modifies:!0},params:[{name:"sourceX",type:"field",default:"source.x"},{name:"sourceY",type:"field",default:"source.y"},{name:"targetX",type:"field",default:"target.x"},{name:"targetY",type:"field",default:"target.y"},{name:"orient",type:"enum",default:"vertical",values:["horizontal","vertical","radial"]},{name:"shape",type:"enum",default:"line",values:["line","arc","curve","diagonal","orthogonal"]},{name:"require",type:"signal"},{name:"as",type:"string",default:"path"}]};at(zG,ke,{transform(e,t){var n=e.sourceX||WCt,r=e.sourceY||GCt,i=e.targetX||YCt,o=e.targetY||KCt,s=e.as||"path",a=e.orient||"vertical",u=e.shape||"line",l=wse.get(u+"-"+a)||wse.get(u);return l||De("LinkPath unsupported type: "+e.shape+(e.orient?"-"+e.orient:"")),t.visit(t.SOURCE,c=>{c[s]=l(n(c),r(c),i(c),o(c))}),t.reflow(e.modified()).modifies(s)}});const rCe=(e,t,n,r)=>"M"+e+","+t+"L"+n+","+r,XCt=(e,t,n,r)=>rCe(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),iCe=(e,t,n,r)=>{var i=n-e,o=r-t,s=Math.hypot(i,o)/2,a=180*Math.atan2(o,i)/Math.PI;return"M"+e+","+t+"A"+s+","+s+" "+a+" 0 1 "+n+","+r},QCt=(e,t,n,r)=>iCe(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),oCe=(e,t,n,r)=>{const i=n-e,o=r-t,s=.2*(i+o),a=.2*(o-i);return"M"+e+","+t+"C"+(e+s)+","+(t+a)+" "+(n+a)+","+(r-s)+" "+n+","+r},JCt=(e,t,n,r)=>oCe(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),ZCt=(e,t,n,r)=>"M"+e+","+t+"V"+r+"H"+n,eAt=(e,t,n,r)=>"M"+e+","+t+"H"+n+"V"+r,tAt=(e,t,n,r)=>{const i=Math.cos(e),o=Math.sin(e),s=Math.cos(n),a=Math.sin(n),u=Math.abs(n-e)>Math.PI?n<=e:n>e;return"M"+t*i+","+t*o+"A"+t+","+t+" 0 0,"+(u?1:0)+" "+t*s+","+t*a+"L"+r*s+","+r*a},nAt=(e,t,n,r)=>{const i=(e+n)/2;return"M"+e+","+t+"C"+i+","+t+" "+i+","+r+" "+n+","+r},rAt=(e,t,n,r)=>{const i=(t+r)/2;return"M"+e+","+t+"C"+e+","+i+" "+n+","+i+" "+n+","+r},iAt=(e,t,n,r)=>{const i=Math.cos(e),o=Math.sin(e),s=Math.cos(n),a=Math.sin(n),u=(t+r)/2;return"M"+t*i+","+t*o+"C"+u*i+","+u*o+" "+u*s+","+u*a+" "+r*s+","+r*a},wse=Q_({line:rCe,"line-radial":XCt,arc:iCe,"arc-radial":QCt,curve:oCe,"curve-radial":JCt,"orthogonal-horizontal":ZCt,"orthogonal-vertical":eAt,"orthogonal-radial":tAt,"diagonal-horizontal":nAt,"diagonal-vertical":rAt,"diagonal-radial":iAt});function VG(e){ke.call(this,null,e)}VG.Definition={type:"Pie",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"startAngle",type:"number",default:0},{name:"endAngle",type:"number",default:6.283185307179586},{name:"sort",type:"boolean",default:!1},{name:"as",type:"string",array:!0,length:2,default:["startAngle","endAngle"]}]};at(VG,ke,{transform(e,t){var n=e.as||["startAngle","endAngle"],r=n[0],i=n[1],o=e.field||Y_,s=e.startAngle||0,a=e.endAngle!=null?e.endAngle:2*Math.PI,u=t.source,l=u.map(o),c=l.length,f=s,d=(a-s)/Qge(l),h=Ea(c),p,m,g;for(e.sort&&h.sort((y,v)=>l[y]-l[v]),p=0;p<c;++p)g=l[h[p]],m=u[h[p]],m[r]=f,m[i]=f+=g*d;return this.value=l,t.reflow(e.modified()).modifies(n)}});const oAt=5;function sAt(e){const t=e.type;return!e.bins&&(t===Mb||t===VC||t===HC)}function sCe(e){return nG(e)&&e!==pf}const aAt=cc(["set","modified","clear","type","scheme","schemeExtent","schemeCount","domain","domainMin","domainMid","domainMax","domainRaw","domainImplicit","nice","zero","bins","range","rangeStep","round","reverse","interpolate","interpolateGamma"]);function aCe(e){ke.call(this,null,e),this.modified(!0)}at(aCe,ke,{transform(e,t){var n=t.dataflow,r=this.value,i=uAt(e);(!r||i!==r.type)&&(this.value=r=Hn(i)());for(i in e)if(!aAt[i]){if(i==="padding"&&sCe(r.type))continue;nn(r[i])?r[i](e[i]):n.warn("Unsupported scale property: "+i)}return pAt(r,e,hAt(r,e,cAt(r,e,n))),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function uAt(e){var t=e.type,n="",r;return t===pf?pf+"-"+Mb:(lAt(e)&&(r=e.rawDomain?e.rawDomain.length:e.domain?e.domain.length+ +(e.domainMid!=null):0,n=r===2?pf+"-":r===3?tw+"-":""),(n+t||Mb).toLowerCase())}function lAt(e){const t=e.type;return nG(t)&&t!==X0&&t!==Q0&&(e.scheme||e.range&&e.range.length&&e.range.every(ft))}function cAt(e,t,n){const r=fAt(e,t.domainRaw,n);if(r>-1)return r;var i=t.domain,o=e.type,s=t.zero||t.zero===void 0&&sAt(e),a,u;if(!i)return 0;if((s||t.domainMin!=null||t.domainMax!=null||t.domainMid!=null)&&(a=(i=i.slice()).length-1||1,s&&(i[0]>0&&(i[0]=0),i[a]<0&&(i[a]=0)),t.domainMin!=null&&(i[0]=t.domainMin),t.domainMax!=null&&(i[a]=t.domainMax),t.domainMid!=null)){u=t.domainMid;const l=u>i[a]?a+1:u<i[0]?0:a;l!==a&&n.warn("Scale domainMid exceeds domain min or max.",u),i.splice(l,0,u)}return sCe(o)&&t.padding&&i[0]!==In(i)&&(i=dAt(o,i,t.range,t.padding,t.exponent,t.constant)),e.domain(uCe(o,i,n)),o===JW&&e.unknown(t.domainImplicit?vj:void 0),t.nice&&e.nice&&e.nice(t.nice!==!0&&oG(e,t.nice)||null),i.length}function fAt(e,t,n){return t?(e.domain(uCe(e.type,t,n)),t.length):-1}function dAt(e,t,n,r,i,o){var s=Math.abs(In(n)-n[0]),a=s/(s-2*r),u=e===dh?qq(t,null,a):e===HC?JN(t,null,a,.5):e===VC?JN(t,null,a,i||1):e===O$?Wq(t,null,a,o||1):Hq(t,null,a);return t=t.slice(),t[0]=u[0],t[t.length-1]=u[1],t}function uCe(e,t,n){if(yTe(e)){var r=Math.abs(t.reduce((i,o)=>i+(o<0?-1:o>0?1:0),0));r!==t.length&&n.warn("Log scale domain includes zero: "+et(t))}return t}function hAt(e,t,n){let r=t.bins;if(r&&!Le(r)){const i=e.domain(),o=i[0],s=In(i),a=r.step;let u=r.start==null?o:r.start,l=r.stop==null?s:r.stop;a||De("Scale bins parameter missing step property."),u<o&&(u=a*Math.ceil(o/a)),l>s&&(l=a*Math.floor(s/a)),r=Ea(u,l+a/2,a)}return r?e.bins=r:e.bins&&delete e.bins,e.type===ZW&&(r?!t.domain&&!t.domainRaw&&(e.domain(r),n=r.length):e.bins=e.domain()),n}function pAt(e,t,n){var r=e.type,i=t.round||!1,o=t.range;if(t.rangeStep!=null)o=mAt(r,t,n);else if(t.scheme&&(o=gAt(r,t,n),nn(o))){if(e.interpolator)return e.interpolator(o);De(`Scale type ${r} does not support interpolating color schemes.`)}if(o&&vTe(r))return e.interpolator(L$(s8(o,t.reverse),t.interpolate,t.interpolateGamma));o&&t.interpolate&&e.interpolate?e.interpolate(rG(t.interpolate,t.interpolateGamma)):nn(e.round)?e.round(i):nn(e.rangeRound)&&e.interpolate(i?uC:Vm),o&&e.range(s8(o,t.reverse))}function mAt(e,t,n){e!==fTe&&e!==q9&&De("Only band and point scales support rangeStep.");var r=(t.paddingOuter!=null?t.paddingOuter:t.padding)||0,i=e===q9?1:(t.paddingInner!=null?t.paddingInner:t.padding)||0;return[0,t.rangeStep*QW(n,i,r)]}function gAt(e,t,n){var r=t.schemeExtent,i,o;return Le(t.scheme)?o=L$(t.scheme,t.interpolate,t.interpolateGamma):(i=t.scheme.toLowerCase(),o=iG(i),o||De(`Unrecognized scheme name: ${t.scheme}`)),n=e===M$?n+1:e===ZW?n-1:e===Lb||e===$$?+t.schemeCount||oAt:n,vTe(e)?Ese(o,r,t.reverse):nn(o)?wTe(Ese(o,r),n):e===JW?o:o.slice(0,n)}function Ese(e,t,n){return nn(e)&&(t||n)?_Te(e,s8(t||[0,1],n)):e}function s8(e,t){return t?e.slice().reverse():e}function lCe(e){ke.call(this,null,e)}at(lCe,ke,{transform(e,t){const n=e.modified("sort")||t.changed(t.ADD)||t.modified(e.sort.fields)||t.modified("datum");return n&&t.source.sort(zy(e.sort)),this.modified(n),t}});const xse="zero",cCe="center",fCe="normalize",dCe=["y0","y1"];function HG(e){ke.call(this,null,e)}HG.Definition={type:"Stack",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"groupby",type:"field",array:!0},{name:"sort",type:"compare"},{name:"offset",type:"enum",default:xse,values:[xse,cCe,fCe]},{name:"as",type:"string",array:!0,length:2,default:dCe}]};at(HG,ke,{transform(e,t){var n=e.as||dCe,r=n[0],i=n[1],o=zy(e.sort),s=e.field||Y_,a=e.offset===cCe?yAt:e.offset===fCe?vAt:bAt,u,l,c,f;for(u=_At(t.source,e.groupby,o,s),l=0,c=u.length,f=u.max;l<c;++l)a(u[l],f,s,r,i);return t.reflow(e.modified()).modifies(n)}});function yAt(e,t,n,r,i){for(var o=(t-e.sum)/2,s=e.length,a=0,u;a<s;++a)u=e[a],u[r]=o,u[i]=o+=Math.abs(n(u))}function vAt(e,t,n,r,i){for(var o=1/e.sum,s=0,a=e.length,u=0,l=0,c;u<a;++u)c=e[u],c[r]=s,c[i]=s=o*(l+=Math.abs(n(c)))}function bAt(e,t,n,r,i){for(var o=0,s=0,a=e.length,u=0,l,c;u<a;++u)c=e[u],l=+n(c),l<0?(c[r]=s,c[i]=s+=l):(c[r]=o,c[i]=o+=l)}function _At(e,t,n,r){var i=[],o=m=>m(c),s,a,u,l,c,f,d,h,p;if(t==null)i.push(e.slice());else for(s={},a=0,u=e.length;a<u;++a)c=e[a],f=t.map(o),d=s[f],d||(s[f]=d=[],i.push(d)),d.push(c);for(f=0,p=0,l=i.length;f<l;++f){for(d=i[f],a=0,h=0,u=d.length;a<u;++a)h+=Math.abs(r(d[a]));d.sum=h,h>p&&(p=h),n&&d.sort(n)}return i.max=p,i}const wAt=Object.freeze(Object.defineProperty({__proto__:null,axisticks:ZSe,datajoin:eCe,encode:tCe,legendentries:nCe,linkpath:zG,pie:VG,scale:aCe,sortitems:lCe,stack:HG},Symbol.toStringTag,{value:"Module"}));var EAt=Math.abs,a8=Math.cos,mP=Math.sin,xAt=1e-6,hCe=Math.PI,u8=hCe/2,Tse=TAt(2);function Sse(e){return e>1?u8:e<-1?-u8:Math.asin(e)}function TAt(e){return e>0?Math.sqrt(e):0}function SAt(e,t){var n=e*mP(t),r=30,i;do t-=i=(t+mP(t)-n)/(1+a8(t));while(EAt(i)>xAt&&--r>0);return t/2}function CAt(e,t,n){function r(i,o){return[e*i*a8(o=SAt(n,o)),t*mP(o)]}return r.invert=function(i,o){return o=Sse(o/t),[i/(e*a8(o)),Sse((2*o+mP(2*o))/n)]},r}var AAt=CAt(Tse/u8,Tse,hCe);function kAt(){return Bf(AAt).scale(169.529)}const IAt=kye(),l8=["clipAngle","clipExtent","scale","translate","center","rotate","parallels","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];function RAt(e,t){return function n(){const r=t();return r.type=e,r.path=kye().projection(r),r.copy=r.copy||function(){const i=n();return l8.forEach(o=>{r[o]&&i[o](r[o]())}),i.path.pointRadius(r.path.pointRadius()),i},mTe(r)}}function qG(e,t){if(!e||typeof e!="string")throw new Error("Projection type must be a name string.");return e=e.toLowerCase(),arguments.length>1?(gP[e]=RAt(e,t),this):gP[e]||null}function pCe(e){return e&&e.path||IAt}const gP={albers:Rye,albersusa:Pet,azimuthalequalarea:Det,azimuthalequidistant:Oet,conicconformal:Let,conicequalarea:iN,conicequidistant:Bet,equalEarth:zet,equirectangular:Fet,gnomonic:Vet,identity:Het,mercator:$et,mollweide:kAt,naturalEarth1:qet,orthographic:Wet,stereographic:Get,transversemercator:Yet};for(const e in gP)qG(e,gP[e]);function NAt(){}const ud=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function mCe(){var e=1,t=1,n=a;function r(u,l){return l.map(c=>i(u,c))}function i(u,l){var c=[],f=[];return o(u,l,d=>{n(d,u,l),PAt(d)>0?c.push([d]):f.push(d)}),f.forEach(d=>{for(var h=0,p=c.length,m;h<p;++h)if(DAt((m=c[h])[0],d)!==-1){m.push(d);return}}),{type:"MultiPolygon",value:l,coordinates:c}}function o(u,l,c){var f=new Array,d=new Array,h,p,m,g,y,v;for(h=p=-1,g=u[0]>=l,ud[g<<1].forEach(_);++h<e-1;)m=g,g=u[h+1]>=l,ud[m|g<<1].forEach(_);for(ud[g<<0].forEach(_);++p<t-1;){for(h=-1,g=u[p*e+e]>=l,y=u[p*e]>=l,ud[g<<1|y<<2].forEach(_);++h<e-1;)m=g,g=u[p*e+e+h+1]>=l,v=y,y=u[p*e+h+1]>=l,ud[m|g<<1|y<<2|v<<3].forEach(_);ud[g|y<<3].forEach(_)}for(h=-1,y=u[p*e]>=l,ud[y<<2].forEach(_);++h<e-1;)v=y,y=u[p*e+h+1]>=l,ud[y<<2|v<<3].forEach(_);ud[y<<3].forEach(_);function _(w){var E=[w[0][0]+h,w[0][1]+p],S=[w[1][0]+h,w[1][1]+p],T=s(E),C=s(S),A,R;(A=d[T])?(R=f[C])?(delete d[A.end],delete f[R.start],A===R?(A.ring.push(S),c(A.ring)):f[A.start]=d[R.end]={start:A.start,end:R.end,ring:A.ring.concat(R.ring)}):(delete d[A.end],A.ring.push(S),d[A.end=C]=A):(A=f[C])?(R=d[T])?(delete f[A.start],delete d[R.end],A===R?(A.ring.push(S),c(A.ring)):f[R.start]=d[A.end]={start:R.start,end:A.end,ring:R.ring.concat(A.ring)}):(delete f[A.start],A.ring.unshift(E),f[A.start=T]=A):f[T]=d[C]={start:T,end:C,ring:[E,S]}}}function s(u){return u[0]*2+u[1]*(e+1)*4}function a(u,l,c){u.forEach(f=>{var d=f[0],h=f[1],p=d|0,m=h|0,g,y=l[m*e+p];d>0&&d<e&&p===d&&(g=l[m*e+p-1],f[0]=d+(c-g)/(y-g)-.5),h>0&&h<t&&m===h&&(g=l[(m-1)*e+p],f[1]=h+(c-g)/(y-g)-.5)})}return r.contour=i,r.size=function(u){if(!arguments.length)return[e,t];var l=Math.floor(u[0]),c=Math.floor(u[1]);return l>=0&&c>=0||De("invalid size"),e=l,t=c,r},r.smooth=function(u){return arguments.length?(n=u?a:NAt,r):n===a},r}function PAt(e){for(var t=0,n=e.length,r=e[n-1][1]*e[0][0]-e[n-1][0]*e[0][1];++t<n;)r+=e[t-1][1]*e[t][0]-e[t-1][0]*e[t][1];return r}function DAt(e,t){for(var n=-1,r=t.length,i;++n<r;)if(i=OAt(e,t[n]))return i;return 0}function OAt(e,t){for(var n=t[0],r=t[1],i=-1,o=0,s=e.length,a=s-1;o<s;a=o++){var u=e[o],l=u[0],c=u[1],f=e[a],d=f[0],h=f[1];if($At(u,f,t))return 0;c>r!=h>r&&n<(d-l)*(r-c)/(h-c)+l&&(i=-i)}return i}function $At(e,t,n){var r;return MAt(e,t,n)&&LAt(e[r=+(e[0]===t[0])],n[r],t[r])}function MAt(e,t,n){return(t[0]-e[0])*(n[1]-e[1])===(n[0]-e[0])*(t[1]-e[1])}function LAt(e,t,n){return e<=t&&t<=n||n<=t&&t<=e}function gCe(e,t,n){return function(r){var i=Sf(r),o=n?Math.min(i[0],0):i[0],s=i[1],a=s-o,u=t?am(o,s,e):a/(e+1);return Ea(o+u,s,u)}}function WG(e){ke.call(this,null,e)}WG.Definition={type:"Isocontour",metadata:{generates:!0},params:[{name:"field",type:"field"},{name:"thresholds",type:"number",array:!0},{name:"levels",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"zero",type:"boolean",default:!0},{name:"smooth",type:"boolean",default:!0},{name:"scale",type:"number",expr:!0},{name:"translate",type:"number",array:!0,expr:!0},{name:"as",type:"string",null:!0,default:"contour"}]};at(WG,ke,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=t.materialize(t.SOURCE).source,i=e.field||_s,o=mCe().smooth(e.smooth!==!1),s=e.thresholds||FAt(r,i,e),a=e.as===null?null:e.as||"contour",u=[];return r.forEach(l=>{const c=i(l),f=o.size([c.width,c.height])(c.values,Le(s)?s:s(c.values));jAt(f,c,l,e),f.forEach(d=>{u.push(S$(l,Xn(a!=null?{[a]:d}:d)))})}),this.value&&(n.rem=this.value),this.value=n.source=n.add=u,n}});function FAt(e,t,n){const r=gCe(n.levels||10,n.nice,n.zero!==!1);return n.resolve!=="shared"?r:r(e.map(i=>Ld(t(i).values)))}function jAt(e,t,n,r){let i=r.scale||t.scale,o=r.translate||t.translate;if(nn(i)&&(i=i(n,r)),nn(o)&&(o=o(n,r)),(i===1||i==null)&&!o)return;const s=(jn(i)?i:i[0])||1,a=(jn(i)?i:i[1])||1,u=o&&o[0]||0,l=o&&o[1]||0;e.forEach(yCe(t,s,a,u,l))}function yCe(e,t,n,r,i){const o=e.x1||0,s=e.y1||0,a=t*n<0;function u(f){f.forEach(l)}function l(f){a&&f.reverse(),f.forEach(c)}function c(f){f[0]=(f[0]-o)*t+r,f[1]=(f[1]-s)*n+i}return function(f){return f.coordinates.forEach(u),f}}function Cse(e,t,n){const r=e>=0?e:fW(t,n);return Math.round((Math.sqrt(4*r*r+1)-1)/2)}function s4(e){return nn(e)?e:ws(+e)}function vCe(){var e=u=>u[0],t=u=>u[1],n=Y_,r=[-1,-1],i=960,o=500,s=2;function a(u,l){const c=Cse(r[0],u,e)>>s,f=Cse(r[1],u,t)>>s,d=c?c+2:0,h=f?f+2:0,p=2*d+(i>>s),m=2*h+(o>>s),g=new Float32Array(p*m),y=new Float32Array(p*m);let v=g;u.forEach(w=>{const E=d+(+e(w)>>s),S=h+(+t(w)>>s);E>=0&&E<p&&S>=0&&S<m&&(g[E+S*p]+=+n(w))}),c>0&&f>0?(Av(p,m,g,y,c),kv(p,m,y,g,f),Av(p,m,g,y,c),kv(p,m,y,g,f),Av(p,m,g,y,c),kv(p,m,y,g,f)):c>0?(Av(p,m,g,y,c),Av(p,m,y,g,c),Av(p,m,g,y,c),v=y):f>0&&(kv(p,m,g,y,f),kv(p,m,y,g,f),kv(p,m,g,y,f),v=y);const _=l?Math.pow(2,-2*s):1/Qge(v);for(let w=0,E=p*m;w<E;++w)v[w]*=_;return{values:v,scale:1<<s,width:p,height:m,x1:d,y1:h,x2:d+(i>>s),y2:h+(o>>s)}}return a.x=function(u){return arguments.length?(e=s4(u),a):e},a.y=function(u){return arguments.length?(t=s4(u),a):t},a.weight=function(u){return arguments.length?(n=s4(u),a):n},a.size=function(u){if(!arguments.length)return[i,o];var l=+u[0],c=+u[1];return l>=0&&c>=0||De("invalid size"),i=l,o=c,a},a.cellSize=function(u){return arguments.length?((u=+u)>=1||De("invalid cell size"),s=Math.floor(Math.log(u)/Math.LN2),a):1<<s},a.bandwidth=function(u){return arguments.length?(u=ct(u),u.length===1&&(u=[+u[0],+u[0]]),u.length!==2&&De("invalid bandwidth"),r=u,a):r},a}function Av(e,t,n,r,i){const o=(i<<1)+1;for(let s=0;s<t;++s)for(let a=0,u=0;a<e+i;++a)a<e&&(u+=n[a+s*e]),a>=i&&(a>=o&&(u-=n[a-o+s*e]),r[a-i+s*e]=u/Math.min(a+1,e-1+o-a,o))}function kv(e,t,n,r,i){const o=(i<<1)+1;for(let s=0;s<e;++s)for(let a=0,u=0;a<t+i;++a)a<t&&(u+=n[s+a*e]),a>=i&&(a>=o&&(u-=n[s+(a-o)*e]),r[s+(a-i)*e]=u/Math.min(a+1,t-1+o-a,o))}function GG(e){ke.call(this,null,e)}GG.Definition={type:"KDE2D",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"weight",type:"field"},{name:"groupby",type:"field",array:!0},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number",array:!0,length:2},{name:"counts",type:"boolean",default:!1},{name:"as",type:"string",default:"grid"}]};const BAt=["x","y","weight","size","cellSize","bandwidth"];function bCe(e,t){return BAt.forEach(n=>t[n]!=null?e[n](t[n]):0),e}at(GG,ke,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=t.materialize(t.SOURCE).source,i=UAt(r,e.groupby),o=(e.groupby||[]).map(ci),s=bCe(vCe(),e),a=e.as||"grid",u=[];function l(c,f){for(let d=0;d<o.length;++d)c[o[d]]=f[d];return c}return u=i.map(c=>Xn(l({[a]:s(c,e.counts)},c.dims))),this.value&&(n.rem=this.value),this.value=n.source=n.add=u,n}});function UAt(e,t){var n=[],r=c=>c(a),i,o,s,a,u,l;if(t==null)n.push(e);else for(i={},o=0,s=e.length;o<s;++o)a=e[o],u=t.map(r),l=i[u],l||(i[u]=l=[],l.dims=u,n.push(l)),l.push(a);return n}function YG(e){ke.call(this,null,e)}YG.Definition={type:"Contour",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"values",type:"number",array:!0},{name:"x",type:"field"},{name:"y",type:"field"},{name:"weight",type:"field"},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number"},{name:"count",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"thresholds",type:"number",array:!0},{name:"smooth",type:"boolean",default:!0}]};at(YG,ke,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=mCe().smooth(e.smooth!==!1),i=e.values,o=e.thresholds||gCe(e.count||10,e.nice,!!i),s=e.size,a,u;return i||(i=t.materialize(t.SOURCE).source,a=bCe(vCe(),e)(i,!0),u=yCe(a,a.scale||1,a.scale||1,0,0),s=[a.width,a.height],i=a.values),o=Le(o)?o:o(i),i=r.size(s)(i,o),u&&i.forEach(u),this.value&&(n.rem=this.value),this.value=n.source=n.add=(i||[]).map(Xn),n}});const c8="Feature",KG="FeatureCollection",zAt="MultiPoint";function XG(e){ke.call(this,null,e)}XG.Definition={type:"GeoJSON",metadata:{},params:[{name:"fields",type:"field",array:!0,length:2},{name:"geojson",type:"field"}]};at(XG,ke,{transform(e,t){var n=this._features,r=this._points,i=e.fields,o=i&&i[0],s=i&&i[1],a=e.geojson||!i&&_s,u=t.ADD,l;l=e.modified()||t.changed(t.REM)||t.modified(ps(a))||o&&t.modified(ps(o))||s&&t.modified(ps(s)),(!this.value||l)&&(u=t.SOURCE,this._features=n=[],this._points=r=[]),a&&t.visit(u,c=>n.push(a(c))),o&&s&&(t.visit(u,c=>{var f=o(c),d=s(c);f!=null&&d!=null&&(f=+f)===f&&(d=+d)===d&&r.push([f,d])}),n=n.concat({type:c8,geometry:{type:zAt,coordinates:r}})),this.value={type:KG,features:n}}});function QG(e){ke.call(this,null,e)}QG.Definition={type:"GeoPath",metadata:{modifies:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"path"}]};at(QG,ke,{transform(e,t){var n=t.fork(t.ALL),r=this.value,i=e.field||_s,o=e.as||"path",s=n.SOURCE;!r||e.modified()?(this.value=r=pCe(e.projection),n.materialize().reflow()):s=i===_s||t.modified(i.fields)?n.ADD_MOD:n.ADD;const a=VAt(r,e.pointRadius);return n.visit(s,u=>u[o]=r(i(u))),r.pointRadius(a),n.modifies(o)}});function VAt(e,t){const n=e.pointRadius();return e.context(null),t!=null&&e.pointRadius(t),n}function JG(e){ke.call(this,null,e)}JG.Definition={type:"GeoPoint",metadata:{modifies:!0},params:[{name:"projection",type:"projection",required:!0},{name:"fields",type:"field",array:!0,required:!0,length:2},{name:"as",type:"string",array:!0,length:2,default:["x","y"]}]};at(JG,ke,{transform(e,t){var n=e.projection,r=e.fields[0],i=e.fields[1],o=e.as||["x","y"],s=o[0],a=o[1],u;function l(c){const f=n([r(c),i(c)]);f?(c[s]=f[0],c[a]=f[1]):(c[s]=void 0,c[a]=void 0)}return e.modified()?t=t.materialize().reflow(!0).visit(t.SOURCE,l):(u=t.modified(r.fields)||t.modified(i.fields),t.visit(u?t.ADD_MOD:t.ADD,l)),t.modifies(o)}});function ZG(e){ke.call(this,null,e)}ZG.Definition={type:"GeoShape",metadata:{modifies:!0,nomod:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field",default:"datum"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"shape"}]};at(ZG,ke,{transform(e,t){var n=t.fork(t.ALL),r=this.value,i=e.as||"shape",o=n.ADD;return(!r||e.modified())&&(this.value=r=HAt(pCe(e.projection),e.field||ul("datum"),e.pointRadius),n.materialize().reflow(),o=n.SOURCE),n.visit(o,s=>s[i]=r),n.modifies(i)}});function HAt(e,t,n){const r=n==null?i=>e(t(i)):i=>{var o=e.pointRadius(),s=e.pointRadius(n)(t(i));return e.pointRadius(o),s};return r.context=i=>(e.context(i),r),r}function eY(e){ke.call(this,[],e),this.generator=cet()}eY.Definition={type:"Graticule",metadata:{changes:!0,generates:!0},params:[{name:"extent",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMajor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMinor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"step",type:"number",array:!0,length:2},{name:"stepMajor",type:"number",array:!0,length:2,default:[90,360]},{name:"stepMinor",type:"number",array:!0,length:2,default:[10,10]},{name:"precision",type:"number",default:2.5}]};at(eY,ke,{transform(e,t){var n=this.value,r=this.generator,i;if(!n.length||e.modified())for(const o in e)nn(r[o])&&r[o](e[o]);return i=r(),n.length?t.mod.push(bxe(n[0],i)):t.add.push(Xn(i)),n[0]=i,t}});function tY(e){ke.call(this,null,e)}tY.Definition={type:"heatmap",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"color",type:"string",expr:!0},{name:"opacity",type:"number",expr:!0},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"as",type:"string",default:"image"}]};at(tY,ke,{transform(e,t){if(!t.changed()&&!e.modified())return t.StopPropagation;var n=t.materialize(t.SOURCE).source,r=e.resolve==="shared",i=e.field||_s,o=WAt(e.opacity,e),s=qAt(e.color,e),a=e.as||"image",u={$x:0,$y:0,$value:0,$max:r?Ld(n.map(l=>Ld(i(l).values))):0};return n.forEach(l=>{const c=i(l),f=tn({},l,u);r||(f.$max=Ld(c.values||[])),l[a]=GAt(c,f,s.dep?s:ws(s(f)),o.dep?o:ws(o(f)))}),t.reflow(!0).modifies(a)}});function qAt(e,t){let n;return nn(e)?(n=r=>um(e(r,t)),n.dep=_Ce(e)):n=ws(um(e||"#888")),n}function WAt(e,t){let n;return nn(e)?(n=r=>e(r,t),n.dep=_Ce(e)):e?n=ws(e):(n=r=>r.$value/r.$max||0,n.dep=!0),n}function _Ce(e){if(!nn(e))return!1;const t=cc(ps(e));return t.$x||t.$y||t.$value||t.$max}function GAt(e,t,n,r){const i=e.width,o=e.height,s=e.x1||0,a=e.y1||0,u=e.x2||i,l=e.y2||o,c=e.values,f=c?g=>c[g]:fp,d=Yp(u-s,l-a),h=d.getContext("2d"),p=h.getImageData(0,0,u-s,l-a),m=p.data;for(let g=a,y=0;g<l;++g){t.$y=g-a;for(let v=s,_=g*i;v<u;++v,y+=4){t.$x=v-s,t.$value=f(v+_);const w=n(t);m[y+0]=w.r,m[y+1]=w.g,m[y+2]=w.b,m[y+3]=~~(255*r(t))}}return h.putImageData(p,0,0),d}function wCe(e){ke.call(this,null,e),this.modified(!0)}at(wCe,ke,{transform(e,t){let n=this.value;return!n||e.modified("type")?(this.value=n=KAt(e.type),l8.forEach(r=>{e[r]!=null&&Ase(n,r,e[r])})):l8.forEach(r=>{e.modified(r)&&Ase(n,r,e[r])}),e.pointRadius!=null&&n.path.pointRadius(e.pointRadius),e.fit&&YAt(n,e),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function YAt(e,t){const n=XAt(t.fit);t.extent?e.fitExtent(t.extent,n):t.size&&e.fitSize(t.size,n)}function KAt(e){const t=qG((e||"mercator").toLowerCase());return t||De("Unrecognized projection type: "+e),t()}function Ase(e,t,n){nn(e[t])&&e[t](n)}function XAt(e){return e=ct(e),e.length===1?e[0]:{type:KG,features:e.reduce((t,n)=>t.concat(QAt(n)),[])}}function QAt(e){return e.type===KG?e.features:ct(e).filter(t=>t!=null).map(t=>t.type===c8?t:{type:c8,geometry:t})}const JAt=Object.freeze(Object.defineProperty({__proto__:null,contour:YG,geojson:XG,geopath:QG,geopoint:JG,geoshape:ZG,graticule:eY,heatmap:tY,isocontour:WG,kde2d:GG,projection:wCe},Symbol.toStringTag,{value:"Module"})),kse={center:ZJe,collide:vZe,nbody:IZe,link:_Ze,x:RZe,y:NZe},QE="forces",f8=["alpha","alphaMin","alphaTarget","velocityDecay","forces"],ZAt=["static","iterations"],ECe=["x","y","vx","vy"];function nY(e){ke.call(this,null,e)}nY.Definition={type:"Force",metadata:{modifies:!0},params:[{name:"static",type:"boolean",default:!1},{name:"restart",type:"boolean",default:!1},{name:"iterations",type:"number",default:300},{name:"alpha",type:"number",default:1},{name:"alphaMin",type:"number",default:.001},{name:"alphaTarget",type:"number",default:0},{name:"velocityDecay",type:"number",default:.4},{name:"forces",type:"param",array:!0,params:[{key:{force:"center"},params:[{name:"x",type:"number",default:0},{name:"y",type:"number",default:0}]},{key:{force:"collide"},params:[{name:"radius",type:"number",expr:!0},{name:"strength",type:"number",default:.7},{name:"iterations",type:"number",default:1}]},{key:{force:"nbody"},params:[{name:"strength",type:"number",default:-30,expr:!0},{name:"theta",type:"number",default:.9},{name:"distanceMin",type:"number",default:1},{name:"distanceMax",type:"number"}]},{key:{force:"link"},params:[{name:"links",type:"data"},{name:"id",type:"field"},{name:"distance",type:"number",default:30,expr:!0},{name:"strength",type:"number",expr:!0},{name:"iterations",type:"number",default:1}]},{key:{force:"x"},params:[{name:"strength",type:"number",default:.1},{name:"x",type:"field"}]},{key:{force:"y"},params:[{name:"strength",type:"number",default:.1},{name:"y",type:"field"}]}]},{name:"as",type:"string",array:!0,modify:!1,default:ECe}]};at(nY,ke,{transform(e,t){var n=this.value,r=t.changed(t.ADD_REM),i=e.modified(f8),o=e.iterations||300;if(n?(r&&(t.modifies("index"),n.nodes(t.source)),(i||t.changed(t.MOD))&&xCe(n,e,0,t)):(this.value=n=t2t(t.source,e),n.on("tick",e2t(t.dataflow,this)),e.static||(r=!0,n.tick()),t.modifies("index")),i||r||e.modified(ZAt)||t.changed()&&e.restart){if(n.alpha(Math.max(n.alpha(),e.alpha||1)).alphaDecay(1-Math.pow(n.alphaMin(),1/o)),e.static)for(n.stop();--o>=0;)n.tick();else if(n.stopped()&&n.restart(),!r)return t.StopPropagation}return this.finish(e,t)},finish(e,t){const n=t.dataflow;for(let a=this._argops,u=0,l=a.length,c;u<l;++u)if(c=a[u],!(c.name!==QE||c.op._argval.force!=="link")){for(var r=c.op._argops,i=0,o=r.length,s;i<o;++i)if(r[i].name==="links"&&(s=r[i].op.source)){n.pulse(s,n.changeset().reflow());break}}return t.reflow(e.modified()).modifies(ECe)}});function e2t(e,t){return()=>e.touch(t).run()}function t2t(e,t){const n=kZe(e),r=n.stop,i=n.restart;let o=!1;return n.stopped=()=>o,n.restart=()=>(o=!1,i()),n.stop=()=>(o=!0,r()),xCe(n,t,!0).on("end",()=>o=!0)}function xCe(e,t,n,r){var i=ct(t.forces),o,s,a,u;for(o=0,s=f8.length;o<s;++o)a=f8[o],a!==QE&&t.modified(a)&&e[a](t[a]);for(o=0,s=i.length;o<s;++o)u=QE+o,a=n||t.modified(QE,o)?r2t(i[o]):r&&n2t(i[o],r)?e.force(u):null,a&&e.force(u,a);for(s=e.numForces||0;o<s;++o)e.force(QE+o,null);return e.numForces=i.length,e}function n2t(e,t){var n,r;for(n in e)if(nn(r=e[n])&&t.modified(ps(r)))return 1;return 0}function r2t(e){var t,n;$t(kse,e.force)||De("Unrecognized force: "+e.force),t=kse[e.force]();for(n in e)nn(t[n])&&i2t(t[n],e[n],e);return t}function i2t(e,t,n){e(nn(t)?r=>t(r,n):t)}const o2t=Object.freeze(Object.defineProperty({__proto__:null,force:nY},Symbol.toStringTag,{value:"Module"}));function d8(e,t,n){const r={};return e.each(i=>{const o=i.data;n(o)&&(r[t(o)]=i)}),e.lookup=r,e}function rY(e){ke.call(this,null,e)}rY.Definition={type:"Nest",metadata:{treesource:!0,changes:!0},params:[{name:"keys",type:"field",array:!0},{name:"generate",type:"boolean"}]};const s2t=e=>e.values;at(rY,ke,{transform(e,t){t.source||De("Nest transform requires an upstream data source.");var n=e.generate,r=e.modified(),i=t.clone(),o=this.value;return(!o||r||t.changed())&&(o&&o.each(s=>{s.children&&T$(s.data)&&i.rem.push(s.data)}),this.value=o=vO({values:ct(e.keys).reduce((s,a)=>(s.key(a),s),a2t()).entries(i.source)},s2t),n&&o.each(s=>{s.children&&(s=Xn(s.data),i.add.push(s),i.source.push(s))}),d8(o,Dt,Dt)),i.source.root=o,i}});function a2t(){const e=[],t={entries:i=>r(n(i,0),0),key:i=>(e.push(i),t)};function n(i,o){if(o>=e.length)return i;const s=i.length,a=e[o++],u={},l={};let c=-1,f,d,h;for(;++c<s;)f=a(d=i[c])+"",(h=u[f])?h.push(d):u[f]=[d];for(f in u)l[f]=n(u[f],o);return l}function r(i,o){if(++o>e.length)return i;const s=[];for(const a in i)s.push({key:a,values:r(i[a],o)});return s}return t}function kh(e){ke.call(this,null,e)}const u2t=(e,t)=>e.parent===t.parent?1:2;at(kh,ke,{transform(e,t){(!t.source||!t.source.root)&&De(this.constructor.name+" transform requires a backing tree data source.");const n=this.layout(e.method),r=this.fields,i=t.source.root,o=e.as||r;e.field?i.sum(e.field):i.count(),e.sort&&i.sort(zy(e.sort,s=>s.data)),l2t(n,this.params,e),n.separation&&n.separation(e.separation!==!1?u2t:Y_);try{this.value=n(i)}catch(s){De(s)}return i.each(s=>c2t(s,r,o)),t.reflow(e.modified()).modifies(o).modifies("leaf")}});function l2t(e,t,n){for(let r,i=0,o=t.length;i<o;++i)r=t[i],r in n&&e[r](n[r])}function c2t(e,t,n){const r=e.data,i=t.length-1;for(let o=0;o<i;++o)r[n[o]]=e[t[o]];r[n[i]]=e.children?e.children.length:0}const h8=["x","y","r","depth","children"];function iY(e){kh.call(this,e)}iY.Definition={type:"Pack",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"radius",type:"field",default:null},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:h8.length,default:h8}]};at(iY,kh,{layout:qye,params:["radius","size","padding"],fields:h8});const p8=["x0","y0","x1","y1","depth","children"];function oY(e){kh.call(this,e)}oY.Definition={type:"Partition",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:p8.length,default:p8}]};at(oY,kh,{layout:Dtt,params:["size","round","padding"],fields:p8});function sY(e){ke.call(this,null,e)}sY.Definition={type:"Stratify",metadata:{treesource:!0},params:[{name:"key",type:"field",required:!0},{name:"parentKey",type:"field",required:!0}]};at(sY,ke,{transform(e,t){t.source||De("Stratify transform requires an upstream data source.");let n=this.value;const r=e.modified(),i=t.fork(t.ALL).materialize(t.SOURCE),o=!n||r||t.changed(t.ADD_REM)||t.modified(e.key.fields)||t.modified(e.parentKey.fields);return i.source=i.source.slice(),o&&(n=i.source.length?d8(Zte().id(e.key).parentId(e.parentKey)(i.source),e.key,ll):d8(Zte()([{}]),e.key,e.key)),i.source.root=this.value=n,i}});const Ise={tidy:Vtt,cluster:ntt},m8=["x","y","depth","children"];function aY(e){kh.call(this,e)}aY.Definition={type:"Tree",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"tidy",values:["tidy","cluster"]},{name:"size",type:"number",array:!0,length:2},{name:"nodeSize",type:"number",array:!0,length:2},{name:"separation",type:"boolean",default:!0},{name:"as",type:"string",array:!0,length:m8.length,default:m8}]};at(aY,kh,{layout(e){const t=e||"tidy";if($t(Ise,t))return Ise[t]();De("Unrecognized Tree layout method: "+t)},params:["size","nodeSize"],fields:m8});function uY(e){ke.call(this,[],e)}uY.Definition={type:"TreeLinks",metadata:{tree:!0,generates:!0,changes:!0},params:[]};at(uY,ke,{transform(e,t){const n=this.value,r=t.source&&t.source.root,i=t.fork(t.NO_SOURCE),o={};return r||De("TreeLinks transform requires a tree data source."),t.changed(t.ADD_REM)?(i.rem=n,t.visit(t.SOURCE,s=>o[Dt(s)]=1),r.each(s=>{const a=s.data,u=s.parent&&s.parent.data;u&&o[Dt(a)]&&o[Dt(u)]&&i.add.push(Xn({source:u,target:a}))}),this.value=i.add):t.changed(t.MOD)&&(t.visit(t.MOD,s=>o[Dt(s)]=1),n.forEach(s=>{(o[Dt(s.source)]||o[Dt(s.target)])&&i.mod.push(s)})),i}});const Rse={binary:qtt,dice:dC,slice:bO,slicedice:Wtt,squarify:Kye,resquarify:Gtt},g8=["x0","y0","x1","y1","depth","children"];function lY(e){kh.call(this,e)}lY.Definition={type:"Treemap",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"squarify",values:["squarify","resquarify","binary","dice","slice","slicedice"]},{name:"padding",type:"number",default:0},{name:"paddingInner",type:"number",default:0},{name:"paddingOuter",type:"number",default:0},{name:"paddingTop",type:"number",default:0},{name:"paddingRight",type:"number",default:0},{name:"paddingBottom",type:"number",default:0},{name:"paddingLeft",type:"number",default:0},{name:"ratio",type:"number",default:1.618033988749895},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:g8.length,default:g8}]};at(lY,kh,{layout(){const e=Htt();return e.ratio=t=>{const n=e.tile();n.ratio&&e.tile(n.ratio(t))},e.method=t=>{$t(Rse,t)?e.tile(Rse[t]):De("Unrecognized Treemap layout method: "+t)},e},params:["method","ratio","size","round","padding","paddingInner","paddingOuter","paddingTop","paddingRight","paddingBottom","paddingLeft"],fields:g8});const f2t=Object.freeze(Object.defineProperty({__proto__:null,nest:rY,pack:iY,partition:oY,stratify:sY,tree:aY,treelinks:uY,treemap:lY},Symbol.toStringTag,{value:"Module"})),a4=4278190080;function d2t(e,t){const n=e.bitmap();return(t||[]).forEach(r=>n.set(e(r.boundary[0]),e(r.boundary[3]))),[n,void 0]}function h2t(e,t,n,r,i){const o=e.width,s=e.height,a=r||i,u=Yp(o,s).getContext("2d"),l=Yp(o,s).getContext("2d"),c=a&&Yp(o,s).getContext("2d");n.forEach(C=>bI(u,C,!1)),bI(l,t,!1),a&&bI(c,t,!0);const f=u4(u,o,s),d=u4(l,o,s),h=a&&u4(c,o,s),p=e.bitmap(),m=a&&e.bitmap();let g,y,v,_,w,E,S,T;for(y=0;y<s;++y)for(g=0;g<o;++g)w=y*o+g,E=f[w]&a4,T=d[w]&a4,S=a&&h[w]&a4,(E||S||T)&&(v=e(g),_=e(y),!i&&(E||T)&&p.set(v,_),a&&(E||S)&&m.set(v,_));return[p,m]}function u4(e,t,n){return new Uint32Array(e.getImageData(0,0,t,n).data.buffer)}function bI(e,t,n){if(!t.length)return;const r=t[0].mark.marktype;r==="group"?t.forEach(i=>{i.items.forEach(o=>bI(e,o.items,n))}):Su[r].draw(e,{items:n?t.map(p2t):t})}function p2t(e){const t=S$(e,{});return t.stroke&&t.strokeOpacity!==0||t.fill&&t.fillOpacity!==0?{...t,strokeOpacity:1,stroke:"#000",fillOpacity:0}:t}const ld=5,Rs=31,_S=32,ep=new Uint32Array(_S+1),jl=new Uint32Array(_S+1);jl[0]=0;ep[0]=~jl[0];for(let e=1;e<=_S;++e)jl[e]=jl[e-1]<<1|1,ep[e]=~jl[e];function m2t(e,t){const n=new Uint32Array(~~((e*t+_S)/_S));function r(o,s){n[o]|=s}function i(o,s){n[o]&=s}return{array:n,get:(o,s)=>{const a=s*e+o;return n[a>>>ld]&1<<(a&Rs)},set:(o,s)=>{const a=s*e+o;r(a>>>ld,1<<(a&Rs))},clear:(o,s)=>{const a=s*e+o;i(a>>>ld,~(1<<(a&Rs)))},getRange:(o,s,a,u)=>{let l=u,c,f,d,h;for(;l>=s;--l)if(c=l*e+o,f=l*e+a,d=c>>>ld,h=f>>>ld,d===h){if(n[d]&ep[c&Rs]&jl[(f&Rs)+1])return!0}else{if(n[d]&ep[c&Rs]||n[h]&jl[(f&Rs)+1])return!0;for(let p=d+1;p<h;++p)if(n[p])return!0}return!1},setRange:(o,s,a,u)=>{let l,c,f,d,h;for(;s<=u;++s)if(l=s*e+o,c=s*e+a,f=l>>>ld,d=c>>>ld,f===d)r(f,ep[l&Rs]&jl[(c&Rs)+1]);else for(r(f,ep[l&Rs]),r(d,jl[(c&Rs)+1]),h=f+1;h<d;++h)r(h,4294967295)},clearRange:(o,s,a,u)=>{let l,c,f,d,h;for(;s<=u;++s)if(l=s*e+o,c=s*e+a,f=l>>>ld,d=c>>>ld,f===d)i(f,jl[l&Rs]|ep[(c&Rs)+1]);else for(i(f,jl[l&Rs]),i(d,ep[(c&Rs)+1]),h=f+1;h<d;++h)i(h,0)},outOfBounds:(o,s,a,u)=>o<0||s<0||u>=t||a>=e}}function g2t(e,t,n){const r=Math.max(1,Math.sqrt(e*t/1e6)),i=~~((e+2*n+r)/r),o=~~((t+2*n+r)/r),s=a=>~~((a+n)/r);return s.invert=a=>a*r-n,s.bitmap=()=>m2t(i,o),s.ratio=r,s.padding=n,s.width=e,s.height=t,s}function y2t(e,t,n,r){const i=e.width,o=e.height;return function(s){const a=s.datum.datum.items[r].items,u=a.length,l=s.datum.fontSize,c=fu.width(s.datum,s.datum.text);let f=0,d,h,p,m,g,y,v;for(let _=0;_<u;++_)d=a[_].x,p=a[_].y,h=a[_].x2===void 0?d:a[_].x2,m=a[_].y2===void 0?p:a[_].y2,g=(d+h)/2,y=(p+m)/2,v=Math.abs(h-d+m-p),v>=f&&(f=v,s.x=g,s.y=y);return g=c/2,y=l/2,d=s.x-g,h=s.x+g,p=s.y-y,m=s.y+y,s.align="center",d<0&&h<=i?s.align="left":0<=d&&i<h&&(s.align="right"),s.baseline="middle",p<0&&m<=o?s.baseline="top":0<=p&&o<m&&(s.baseline="bottom"),!0}}function yP(e,t,n,r,i,o){let s=n/2;return e-s<0||e+s>i||t-(s=r/2)<0||t+s>o}function Sp(e,t,n,r,i,o,s,a){const u=i*o/(r*2),l=e(t-u),c=e(t+u),f=e(n-(o=o/2)),d=e(n+o);return s.outOfBounds(l,f,c,d)||s.getRange(l,f,c,d)||a&&a.getRange(l,f,c,d)}function v2t(e,t,n,r){const i=e.width,o=e.height,s=t[0],a=t[1];function u(l,c,f,d,h){const p=e.invert(l),m=e.invert(c);let g=f,y=o,v;if(!yP(p,m,d,h,i,o)&&!Sp(e,p,m,h,d,g,s,a)&&!Sp(e,p,m,h,d,h,s,null)){for(;y-g>=1;)v=(g+y)/2,Sp(e,p,m,h,d,v,s,a)?y=v:g=v;if(g>f)return[p,m,g,!0]}}return function(l){const c=l.datum.datum.items[r].items,f=c.length,d=l.datum.fontSize,h=fu.width(l.datum,l.datum.text);let p=n?d:0,m=!1,g=!1,y=0,v,_,w,E,S,T,C,A,R,N,O,D,M,F,L,B,U;for(let H=0;H<f;++H){for(v=c[H].x,w=c[H].y,_=c[H].x2===void 0?v:c[H].x2,E=c[H].y2===void 0?w:c[H].y2,v>_&&(U=v,v=_,_=U),w>E&&(U=w,w=E,E=U),R=e(v),O=e(_),N=~~((R+O)/2),D=e(w),F=e(E),M=~~((D+F)/2),C=N;C>=R;--C)for(A=M;A>=D;--A)B=u(C,A,p,h,d),B&&([l.x,l.y,p,m]=B);for(C=N;C<=O;++C)for(A=M;A<=F;++A)B=u(C,A,p,h,d),B&&([l.x,l.y,p,m]=B);!m&&!n&&(L=Math.abs(_-v+E-w),S=(v+_)/2,T=(w+E)/2,L>=y&&!yP(S,T,h,d,i,o)&&!Sp(e,S,T,d,h,d,s,null)&&(y=L,l.x=S,l.y=T,g=!0))}return m||g?(S=h/2,T=d/2,s.setRange(e(l.x-S),e(l.y-T),e(l.x+S),e(l.y+T)),l.align="center",l.baseline="middle",!0):!1}}const b2t=[-1,-1,1,1],_2t=[-1,1,-1,1];function w2t(e,t,n,r){const i=e.width,o=e.height,s=t[0],a=t[1],u=e.bitmap();return function(l){const c=l.datum.datum.items[r].items,f=c.length,d=l.datum.fontSize,h=fu.width(l.datum,l.datum.text),p=[];let m=n?d:0,g=!1,y=!1,v=0,_,w,E,S,T,C,A,R,N,O,D,M;for(let F=0;F<f;++F){for(_=c[F].x,E=c[F].y,w=c[F].x2===void 0?_:c[F].x2,S=c[F].y2===void 0?E:c[F].y2,p.push([e((_+w)/2),e((E+S)/2)]);p.length;)if([A,R]=p.pop(),!(s.get(A,R)||a.get(A,R)||u.get(A,R))){u.set(A,R);for(let L=0;L<4;++L)T=A+b2t[L],C=R+_2t[L],u.outOfBounds(T,C,T,C)||p.push([T,C]);if(T=e.invert(A),C=e.invert(R),N=m,O=o,!yP(T,C,h,d,i,o)&&!Sp(e,T,C,d,h,N,s,a)&&!Sp(e,T,C,d,h,d,s,null)){for(;O-N>=1;)D=(N+O)/2,Sp(e,T,C,d,h,D,s,a)?O=D:N=D;N>m&&(l.x=T,l.y=C,m=N,g=!0)}}!g&&!n&&(M=Math.abs(w-_+S-E),T=(_+w)/2,C=(E+S)/2,M>=v&&!yP(T,C,h,d,i,o)&&!Sp(e,T,C,d,h,d,s,null)&&(v=M,l.x=T,l.y=C,y=!0))}return g||y?(T=h/2,C=d/2,s.setRange(e(l.x-T),e(l.y-C),e(l.x+T),e(l.y+C)),l.align="center",l.baseline="middle",!0):!1}}const E2t=["right","center","left"],x2t=["bottom","middle","top"];function T2t(e,t,n,r){const i=e.width,o=e.height,s=t[0],a=t[1],u=r.length;return function(l){const c=l.boundary,f=l.datum.fontSize;if(c[2]<0||c[5]<0||c[0]>i||c[3]>o)return!1;let d=l.textWidth??0,h,p,m,g,y,v,_,w,E,S,T,C,A,R,N;for(let O=0;O<u;++O){if(h=(n[O]&3)-1,p=(n[O]>>>2&3)-1,m=h===0&&p===0||r[O]<0,g=h&&p?Math.SQRT1_2:1,y=r[O]<0?-1:1,v=c[1+h]+r[O]*h*g,T=c[4+p]+y*f*p/2+r[O]*p*g,w=T-f/2,E=T+f/2,C=e(v),R=e(w),N=e(E),!d)if(Nse(C,C,R,N,s,a,v,v,w,E,c,m))d=fu.width(l.datum,l.datum.text);else continue;if(S=v+y*d*h/2,v=S-d/2,_=S+d/2,C=e(v),A=e(_),Nse(C,A,R,N,s,a,v,_,w,E,c,m))return l.x=h?h*y<0?_:v:S,l.y=p?p*y<0?E:w:T,l.align=E2t[h*y+1],l.baseline=x2t[p*y+1],s.setRange(C,R,A,N),!0}return!1}}function Nse(e,t,n,r,i,o,s,a,u,l,c,f){return!(i.outOfBounds(e,n,t,r)||(f&&o||i).getRange(e,n,t,r))}const l4=0,c4=4,f4=8,d4=0,h4=1,p4=2,S2t={"top-left":l4+d4,top:l4+h4,"top-right":l4+p4,left:c4+d4,middle:c4+h4,right:c4+p4,"bottom-left":f4+d4,bottom:f4+h4,"bottom-right":f4+p4},C2t={naive:y2t,"reduced-search":v2t,floodfill:w2t};function A2t(e,t,n,r,i,o,s,a,u,l,c){if(!e.length)return e;const f=Math.max(r.length,i.length),d=k2t(r,f),h=I2t(i,f),p=R2t(e[0].datum),m=p==="group"&&e[0].datum.items[u].marktype,g=m==="area",y=N2t(p,m,a,u),v=l===null||l===1/0,_=g&&c==="naive";let w=-1,E=-1;const S=e.map(R=>{const N=v?fu.width(R,R.text):void 0;return w=Math.max(w,N),E=Math.max(E,R.fontSize),{datum:R,opacity:0,x:void 0,y:void 0,align:void 0,baseline:void 0,boundary:y(R),textWidth:N}});l=l===null||l===1/0?Math.max(w,E)+Math.max(...r):l;const T=g2t(t[0],t[1],l);let C;if(!_){n&&S.sort((O,D)=>n(O.datum,D.datum));let R=!1;for(let O=0;O<h.length&&!R;++O)R=h[O]===5||d[O]<0;const N=(p&&s||g)&&e.map(O=>O.datum);C=o.length||N?h2t(T,N||[],o,R,g):d2t(T,s&&S)}const A=g?C2t[c](T,C,s,u):T2t(T,C,h,d);return S.forEach(R=>R.opacity=+A(R)),S}function k2t(e,t){const n=new Float64Array(t),r=e.length;for(let i=0;i<r;++i)n[i]=e[i]||0;for(let i=r;i<t;++i)n[i]=n[r-1];return n}function I2t(e,t){const n=new Int8Array(t),r=e.length;for(let i=0;i<r;++i)n[i]|=S2t[e[i]];for(let i=r;i<t;++i)n[i]=n[r-1];return n}function R2t(e){return e&&e.mark&&e.mark.marktype}function N2t(e,t,n,r){const i=o=>[o.x,o.x,o.x,o.y,o.y,o.y];return e?e==="line"||e==="area"?o=>i(o.datum):t==="line"?o=>{const s=o.datum.items[r].items;return i(s.length?s[n==="start"?0:s.length-1]:{x:NaN,y:NaN})}:o=>{const s=o.datum.bounds;return[s.x1,(s.x1+s.x2)/2,s.x2,s.y1,(s.y1+s.y2)/2,s.y2]}:i}const y8=["x","y","opacity","align","baseline"],TCe=["top-left","left","bottom-left","top","bottom","top-right","right","bottom-right"];function cY(e){ke.call(this,null,e)}cY.Definition={type:"Label",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"sort",type:"compare"},{name:"anchor",type:"string",array:!0,default:TCe},{name:"offset",type:"number",array:!0,default:[1]},{name:"padding",type:"number",default:0,null:!0},{name:"lineAnchor",type:"string",values:["start","end"],default:"end"},{name:"markIndex",type:"number",default:0},{name:"avoidBaseMark",type:"boolean",default:!0},{name:"avoidMarks",type:"data",array:!0},{name:"method",type:"string",default:"naive"},{name:"as",type:"string",array:!0,length:y8.length,default:y8}]};at(cY,ke,{transform(e,t){function n(o){const s=e[o];return nn(s)&&t.modified(s.fields)}const r=e.modified();if(!(r||t.changed(t.ADD_REM)||n("sort")))return;(!e.size||e.size.length!==2)&&De("Size parameter should be specified as a [width, height] array.");const i=e.as||y8;return A2t(t.materialize(t.SOURCE).source||[],e.size,e.sort,ct(e.offset==null?1:e.offset),ct(e.anchor||TCe),e.avoidMarks||[],e.avoidBaseMark!==!1,e.lineAnchor||"end",e.markIndex||0,e.padding===void 0?0:e.padding,e.method||"naive").forEach(o=>{const s=o.datum;s[i[0]]=o.x,s[i[1]]=o.y,s[i[2]]=o.opacity,s[i[3]]=o.align,s[i[4]]=o.baseline}),t.reflow(r).modifies(i)}});const P2t=Object.freeze(Object.defineProperty({__proto__:null,label:cY},Symbol.toStringTag,{value:"Module"}));function SCe(e,t){var n=[],r=function(c){return c(a)},i,o,s,a,u,l;if(t==null)n.push(e);else for(i={},o=0,s=e.length;o<s;++o)a=e[o],u=t.map(r),l=i[u],l||(i[u]=l=[],l.dims=u,n.push(l)),l.push(a);return n}function fY(e){ke.call(this,null,e)}fY.Definition={type:"Loess",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"bandwidth",type:"number",default:.3},{name:"as",type:"string",array:!0}]};at(fY,ke,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=SCe(r,e.groupby),o=(e.groupby||[]).map(ci),s=o.length,a=e.as||[ci(e.x),ci(e.y)],u=[];i.forEach(l=>{Lxe(l,e.x,e.y,e.bandwidth||.3).forEach(c=>{const f={};for(let d=0;d<s;++d)f[o[d]]=l.dims[d];f[a[0]]=c[0],f[a[1]]=c[1],u.push(Xn(f))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=u}return n}});const v8={constant:xW,linear:TW,log:Dxe,exp:Oxe,pow:$xe,quad:SW,poly:Mxe},D2t=(e,t)=>e==="poly"?t:e==="quad"?2:1;function dY(e){ke.call(this,null,e)}dY.Definition={type:"Regression",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"string",default:"linear",values:Object.keys(v8)},{name:"order",type:"number",default:3},{name:"extent",type:"number",array:!0,length:2},{name:"params",type:"boolean",default:!1},{name:"as",type:"string",array:!0}]};at(dY,ke,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=SCe(r,e.groupby),o=(e.groupby||[]).map(ci),s=e.method||"linear",a=e.order==null?3:e.order,u=D2t(s,a),l=e.as||[ci(e.x),ci(e.y)],c=v8[s],f=[];let d=e.extent;$t(v8,s)||De("Invalid regression method: "+s),d!=null&&s==="log"&&d[0]<=0&&(t.dataflow.warn("Ignoring extent with values <= 0 for log regression."),d=null),i.forEach(h=>{if(h.length<=u){t.dataflow.warn("Skipping regression with more parameters than data points.");return}const m=c(h,e.x,e.y,a);if(e.params){f.push(Xn({keys:h.dims,coef:m.coef,rSquared:m.rSquared}));return}const g=d||Sf(h,e.x),y=v=>{const _={};for(let w=0;w<o.length;++w)_[o[w]]=h.dims[w];_[l[0]]=v[0],_[l[1]]=v[1],f.push(Xn(_))};s==="linear"||s==="constant"?g.forEach(v=>y([v,m.predict(v)])):P$(m.predict,g,25,200).forEach(y)}),this.value&&(n.rem=this.value),this.value=n.add=n.source=f}return n}});const O2t=Object.freeze(Object.defineProperty({__proto__:null,loess:fY,regression:dY},Symbol.toStringTag,{value:"Module"}));function hY(e){ke.call(this,null,e)}hY.Definition={type:"Voronoi",metadata:{modifies:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"size",type:"number",array:!0,length:2},{name:"extent",type:"array",array:!0,length:2,default:[[-1e5,-1e5],[1e5,1e5]],content:{type:"number",array:!0,length:2}},{name:"as",type:"string",default:"path"}]};const $2t=[-1e5,-1e5,1e5,1e5];at(hY,ke,{transform(e,t){const n=e.as||"path",r=t.source;if(!r||!r.length)return t;let i=e.size;i=i?[0,0,i[0],i[1]]:(i=e.extent)?[i[0][0],i[0][1],i[1][0],i[1][1]]:$2t;const o=this.value=Kz.from(r,e.x,e.y).voronoi(i);for(let s=0,a=r.length;s<a;++s){const u=o.cellPolygon(s);r[s][n]=u&&!L2t(u)?M2t(u):null}return t.reflow(e.modified()).modifies(n)}});function M2t(e){const t=e[0][0],n=e[0][1];let r=e.length-1;for(;e[r][0]===t&&e[r][1]===n;--r);return"M"+e.slice(0,r+1).join("L")+"Z"}function L2t(e){return e.length===2&&e[0][0]===e[1][0]&&e[0][1]===e[1][1]}const F2t=Object.freeze(Object.defineProperty({__proto__:null,voronoi:hY},Symbol.toStringTag,{value:"Module"}));var m4=Math.PI/180,JE=64,_I=2048;function j2t(){var e=[256,256],t,n,r,i,o,s,a,u=CCe,l=[],c=Math.random,f={};f.layout=function(){for(var p=d(Yp()),m=q2t((e[0]>>5)*e[1]),g=null,y=l.length,v=-1,_=[],w=l.map(S=>({text:t(S),font:n(S),style:i(S),weight:o(S),rotate:s(S),size:~~(r(S)+1e-14),padding:a(S),xoff:0,yoff:0,x1:0,y1:0,x0:0,y0:0,hasText:!1,sprite:null,datum:S})).sort((S,T)=>T.size-S.size);++v<y;){var E=w[v];E.x=e[0]*(c()+.5)>>1,E.y=e[1]*(c()+.5)>>1,B2t(p,E,w,v),E.hasText&&h(m,E,g)&&(_.push(E),g?z2t(g,E):g=[{x:E.x+E.x0,y:E.y+E.y0},{x:E.x+E.x1,y:E.y+E.y1}],E.x-=e[0]>>1,E.y-=e[1]>>1)}return _};function d(p){p.width=p.height=1;var m=Math.sqrt(p.getContext("2d").getImageData(0,0,1,1).data.length>>2);p.width=(JE<<5)/m,p.height=_I/m;var g=p.getContext("2d");return g.fillStyle=g.strokeStyle="red",g.textAlign="center",{context:g,ratio:m}}function h(p,m,g){for(var y=m.x,v=m.y,_=Math.sqrt(e[0]*e[0]+e[1]*e[1]),w=u(e),E=c()<.5?1:-1,S=-E,T,C,A;(T=w(S+=E))&&(C=~~T[0],A=~~T[1],!(Math.min(Math.abs(C),Math.abs(A))>=_));)if(m.x=y+C,m.y=v+A,!(m.x+m.x0<0||m.y+m.y0<0||m.x+m.x1>e[0]||m.y+m.y1>e[1])&&(!g||!U2t(m,p,e[0]))&&(!g||V2t(m,g))){for(var R=m.sprite,N=m.width>>5,O=e[0]>>5,D=m.x-(N<<4),M=D&127,F=32-M,L=m.y1-m.y0,B=(m.y+m.y0)*O+(D>>5),U,H=0;H<L;H++){U=0;for(var P=0;P<=N;P++)p[B+P]|=U<<F|(P<N?(U=R[H*N+P])>>>M:0);B+=O}return m.sprite=null,!0}return!1}return f.words=function(p){return arguments.length?(l=p,f):l},f.size=function(p){return arguments.length?(e=[+p[0],+p[1]],f):e},f.font=function(p){return arguments.length?(n=mg(p),f):n},f.fontStyle=function(p){return arguments.length?(i=mg(p),f):i},f.fontWeight=function(p){return arguments.length?(o=mg(p),f):o},f.rotate=function(p){return arguments.length?(s=mg(p),f):s},f.text=function(p){return arguments.length?(t=mg(p),f):t},f.spiral=function(p){return arguments.length?(u=W2t[p]||p,f):u},f.fontSize=function(p){return arguments.length?(r=mg(p),f):r},f.padding=function(p){return arguments.length?(a=mg(p),f):a},f.random=function(p){return arguments.length?(c=p,f):c},f}function B2t(e,t,n,r){if(!t.sprite){var i=e.context,o=e.ratio;i.clearRect(0,0,(JE<<5)/o,_I/o);var s=0,a=0,u=0,l=n.length,c,f,d,h,p;for(--r;++r<l;){if(t=n[r],i.save(),i.font=t.style+" "+t.weight+" "+~~((t.size+1)/o)+"px "+t.font,c=i.measureText(t.text+"m").width*o,d=t.size<<1,t.rotate){var m=Math.sin(t.rotate*m4),g=Math.cos(t.rotate*m4),y=c*g,v=c*m,_=d*g,w=d*m;c=Math.max(Math.abs(y+w),Math.abs(y-w))+31>>5<<5,d=~~Math.max(Math.abs(v+_),Math.abs(v-_))}else c=c+31>>5<<5;if(d>u&&(u=d),s+c>=JE<<5&&(s=0,a+=u,u=0),a+d>=_I)break;i.translate((s+(c>>1))/o,(a+(d>>1))/o),t.rotate&&i.rotate(t.rotate*m4),i.fillText(t.text,0,0),t.padding&&(i.lineWidth=2*t.padding,i.strokeText(t.text,0,0)),i.restore(),t.width=c,t.height=d,t.xoff=s,t.yoff=a,t.x1=c>>1,t.y1=d>>1,t.x0=-t.x1,t.y0=-t.y1,t.hasText=!0,s+=c}for(var E=i.getImageData(0,0,(JE<<5)/o,_I/o).data,S=[];--r>=0;)if(t=n[r],!!t.hasText){for(c=t.width,f=c>>5,d=t.y1-t.y0,h=0;h<d*f;h++)S[h]=0;if(s=t.xoff,s==null)return;a=t.yoff;var T=0,C=-1;for(p=0;p<d;p++){for(h=0;h<c;h++){var A=f*p+(h>>5),R=E[(a+p)*(JE<<5)+(s+h)<<2]?1<<31-h%32:0;S[A]|=R,T|=R}T?C=p:(t.y0++,d--,p--,a++)}t.y1=t.y0+C,t.sprite=S.slice(0,(t.y1-t.y0)*f)}}}function U2t(e,t,n){n>>=5;for(var r=e.sprite,i=e.width>>5,o=e.x-(i<<4),s=o&127,a=32-s,u=e.y1-e.y0,l=(e.y+e.y0)*n+(o>>5),c,f=0;f<u;f++){c=0;for(var d=0;d<=i;d++)if((c<<a|(d<i?(c=r[f*i+d])>>>s:0))&t[l+d])return!0;l+=n}return!1}function z2t(e,t){var n=e[0],r=e[1];t.x+t.x0<n.x&&(n.x=t.x+t.x0),t.y+t.y0<n.y&&(n.y=t.y+t.y0),t.x+t.x1>r.x&&(r.x=t.x+t.x1),t.y+t.y1>r.y&&(r.y=t.y+t.y1)}function V2t(e,t){return e.x+e.x1>t[0].x&&e.x+e.x0<t[1].x&&e.y+e.y1>t[0].y&&e.y+e.y0<t[1].y}function CCe(e){var t=e[0]/e[1];return function(n){return[t*(n*=.1)*Math.cos(n),n*Math.sin(n)]}}function H2t(e){var t=4,n=t*e[0]/e[1],r=0,i=0;return function(o){var s=o<0?-1:1;switch(Math.sqrt(1+4*s*o)-s&3){case 0:r+=n;break;case 1:i+=t;break;case 2:r-=n;break;default:i-=t;break}return[r,i]}}function q2t(e){for(var t=[],n=-1;++n<e;)t[n]=0;return t}function mg(e){return typeof e=="function"?e:function(){return e}}var W2t={archimedean:CCe,rectangular:H2t};const ACe=["x","y","font","fontSize","fontStyle","fontWeight","angle"],G2t=["text","font","rotate","fontSize","fontStyle","fontWeight"];function pY(e){ke.call(this,j2t(),e)}pY.Definition={type:"Wordcloud",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2},{name:"font",type:"string",expr:!0,default:"sans-serif"},{name:"fontStyle",type:"string",expr:!0,default:"normal"},{name:"fontWeight",type:"string",expr:!0,default:"normal"},{name:"fontSize",type:"number",expr:!0,default:14},{name:"fontSizeRange",type:"number",array:"nullable",default:[10,50]},{name:"rotate",type:"number",expr:!0,default:0},{name:"text",type:"field"},{name:"spiral",type:"string",values:["archimedean","rectangular"]},{name:"padding",type:"number",expr:!0},{name:"as",type:"string",array:!0,length:7,default:ACe}]};at(pY,ke,{transform(e,t){e.size&&!(e.size[0]&&e.size[1])&&De("Wordcloud size dimensions must be non-zero.");function n(p){const m=e[p];return nn(m)&&t.modified(m.fields)}const r=e.modified();if(!(r||t.changed(t.ADD_REM)||G2t.some(n)))return;const i=t.materialize(t.SOURCE).source,o=this.value,s=e.as||ACe;let a=e.fontSize||14,u;if(nn(a)?u=e.fontSizeRange:a=ws(a),u){const p=a,m=Hn("sqrt")().domain(Sf(i,p)).range(u);a=g=>m(p(g))}i.forEach(p=>{p[s[0]]=NaN,p[s[1]]=NaN,p[s[3]]=0});const l=o.words(i).text(e.text).size(e.size||[500,500]).padding(e.padding||1).spiral(e.spiral||"archimedean").rotate(e.rotate||0).font(e.font||"sans-serif").fontStyle(e.fontStyle||"normal").fontWeight(e.fontWeight||"normal").fontSize(a).random(fl).layout(),c=o.size(),f=c[0]>>1,d=c[1]>>1,h=l.length;for(let p=0,m,g;p<h;++p)m=l[p],g=m.datum,g[s[0]]=m.x+f,g[s[1]]=m.y+d,g[s[2]]=m.font,g[s[3]]=m.size,g[s[4]]=m.style,g[s[5]]=m.weight,g[s[6]]=m.rotate;return t.reflow(r).modifies(s)}});const Y2t=Object.freeze(Object.defineProperty({__proto__:null,wordcloud:pY},Symbol.toStringTag,{value:"Module"})),K2t=e=>new Uint8Array(e),X2t=e=>new Uint16Array(e),Kx=e=>new Uint32Array(e);function Q2t(){let e=8,t=[],n=Kx(0),r=ek(0,e),i=ek(0,e);return{data:()=>t,seen:()=>n=J2t(n,t.length),add(o){for(let s=0,a=t.length,u=o.length,l;s<u;++s)l=o[s],l._index=a++,t.push(l)},remove(o,s){const a=t.length,u=Array(a-o),l=t;let c,f,d;for(f=0;!s[f]&&f<a;++f)u[f]=t[f],l[f]=f;for(d=f;f<a;++f)c=t[f],s[f]?l[f]=-1:(l[f]=d,r[d]=r[f],i[d]=i[f],u[d]=c,c._index=d++),r[f]=0;return t=u,l},size:()=>t.length,curr:()=>r,prev:()=>i,reset:o=>i[o]=r[o],all:()=>e<257?255:e<65537?65535:4294967295,set(o,s){r[o]|=s},clear(o,s){r[o]&=~s},resize(o,s){const a=r.length;(o>a||s>e)&&(e=Math.max(s,e),r=ek(o,e,r),i=ek(o,e))}}}function J2t(e,t,n){return e.length>=t?e:(n=n||new e.constructor(t),n.set(e),n)}function ek(e,t,n){const r=(t<257?K2t:t<65537?X2t:Kx)(e);return n&&r.set(n),r}function Pse(e,t,n){const r=1<<t;return{one:r,zero:~r,range:n.slice(),bisect:e.bisect,index:e.index,size:e.size,onAdd(i,o){const s=this,a=s.bisect(s.range,i.value),u=i.index,l=a[0],c=a[1],f=u.length;let d;for(d=0;d<l;++d)o[u[d]]|=r;for(d=c;d<f;++d)o[u[d]]|=r;return s}}}function Dse(){let e=Kx(0),t=[],n=0;function r(a,u,l){if(!u.length)return[];const c=n,f=u.length,d=Kx(f);let h=Array(f),p,m,g;for(g=0;g<f;++g)h[g]=a(u[g]),d[g]=g;if(h=Z2t(h,d),c)p=t,m=e,t=Array(c+f),e=Kx(c+f),ekt(l,p,m,c,h,d,f,t,e);else{if(l>0)for(g=0;g<f;++g)d[g]+=l;t=h,e=d}return n=c+f,{index:d,value:h}}function i(a,u){const l=n;let c,f,d;for(f=0;!u[e[f]]&&f<l;++f);for(d=f;f<l;++f)u[c=e[f]]||(e[d]=c,t[d]=t[f],++d);n=l-a}function o(a){for(let u=0,l=n;u<l;++u)e[u]=a[e[u]]}function s(a,u){let l;return u?l=u.length:(u=t,l=n),[bYe(u,a[0],0,l),sm(u,a[1],0,l)]}return{insert:r,remove:i,bisect:s,reindex:o,index:()=>e,size:()=>n}}function Z2t(e,t){return e.sort.call(t,(n,r)=>{const i=e[n],o=e[r];return i<o?-1:i>o?1:0}),CYe(e,t)}function ekt(e,t,n,r,i,o,s,a,u){let l=0,c=0,f;for(f=0;l<r&&c<s;++f)t[l]<i[c]?(a[f]=t[l],u[f]=n[l++]):(a[f]=i[c],u[f]=o[c++]+e);for(;l<r;++l,++f)a[f]=t[l],u[f]=n[l];for(;c<s;++c,++f)a[f]=i[c],u[f]=o[c]+e}function mY(e){ke.call(this,Q2t(),e),this._indices=null,this._dims=null}mY.Definition={type:"CrossFilter",metadata:{},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"query",type:"array",array:!0,required:!0,content:{type:"number",array:!0,length:2}}]};at(mY,ke,{transform(e,t){if(this._dims){var n=e.modified("fields")||e.fields.some(r=>t.modified(r.fields));return n?this.reinit(e,t):this.eval(e,t)}else return this.init(e,t)},init(e,t){const n=e.fields,r=e.query,i=this._indices={},o=this._dims=[],s=r.length;let a=0,u,l;for(;a<s;++a)u=n[a].fname,l=i[u]||(i[u]=Dse()),o.push(Pse(l,a,r[a]));return this.eval(e,t)},reinit(e,t){const n=t.materialize().fork(),r=e.fields,i=e.query,o=this._indices,s=this._dims,a=this.value,u=a.curr(),l=a.prev(),c=a.all(),f=n.rem=n.add,d=n.mod,h=i.length,p={};let m,g,y,v,_,w,E,S,T;if(l.set(u),t.rem.length&&(_=this.remove(e,t,n)),t.add.length&&a.add(t.add),t.mod.length)for(w={},v=t.mod,E=0,S=v.length;E<S;++E)w[v[E]._index]=1;for(E=0;E<h;++E)T=r[E],(!s[E]||e.modified("fields",E)||t.modified(T.fields))&&(y=T.fname,(m=p[y])||(o[y]=g=Dse(),p[y]=m=g.insert(T,t.source,0)),s[E]=Pse(g,E,i[E]).onAdd(m,u));for(E=0,S=a.data().length;E<S;++E)_[E]||(l[E]!==u[E]?f.push(E):w[E]&&u[E]!==c&&d.push(E));return a.mask=(1<<h)-1,n},eval(e,t){const n=t.materialize().fork(),r=this._dims.length;let i=0;return t.rem.length&&(this.remove(e,t,n),i|=(1<<r)-1),e.modified("query")&&!e.modified("fields")&&(i|=this.update(e,t,n)),t.add.length&&(this.insert(e,t,n),i|=(1<<r)-1),t.mod.length&&(this.modify(t,n),i|=(1<<r)-1),this.value.mask=i,n},insert(e,t,n){const r=t.add,i=this.value,o=this._dims,s=this._indices,a=e.fields,u={},l=n.add,c=i.size()+r.length,f=o.length;let d=i.size(),h,p,m;i.resize(c,f),i.add(r);const g=i.curr(),y=i.prev(),v=i.all();for(h=0;h<f;++h)p=a[h].fname,m=u[p]||(u[p]=s[p].insert(a[h],r,d)),o[h].onAdd(m,g);for(;d<c;++d)y[d]=v,g[d]!==v&&l.push(d)},modify(e,t){const n=t.mod,r=this.value,i=r.curr(),o=r.all(),s=e.mod;let a,u,l;for(a=0,u=s.length;a<u;++a)l=s[a]._index,i[l]!==o&&n.push(l)},remove(e,t,n){const r=this._indices,i=this.value,o=i.curr(),s=i.prev(),a=i.all(),u={},l=n.rem,c=t.rem;let f,d,h,p;for(f=0,d=c.length;f<d;++f)h=c[f]._index,u[h]=1,s[h]=p=o[h],o[h]=a,p!==a&&l.push(h);for(h in r)r[h].remove(d,u);return this.reindex(t,d,u),u},reindex(e,t,n){const r=this._indices,i=this.value;e.runAfter(()=>{const o=i.remove(t,n);for(const s in r)r[s].reindex(o)})},update(e,t,n){const r=this._dims,i=e.query,o=t.stamp,s=r.length;let a=0,u,l;for(n.filters=0,l=0;l<s;++l)e.modified("query",l)&&(u=l,++a);if(a===1)a=r[u].one,this.incrementOne(r[u],i[u],n.add,n.rem);else for(l=0,a=0;l<s;++l)e.modified("query",l)&&(a|=r[l].one,this.incrementAll(r[l],i[l],o,n.add),n.rem=n.add);return a},incrementAll(e,t,n,r){const i=this.value,o=i.seen(),s=i.curr(),a=i.prev(),u=e.index(),l=e.bisect(e.range),c=e.bisect(t),f=c[0],d=c[1],h=l[0],p=l[1],m=e.one;let g,y,v;if(f<h)for(g=f,y=Math.min(h,d);g<y;++g)v=u[g],o[v]!==n&&(a[v]=s[v],o[v]=n,r.push(v)),s[v]^=m;else if(f>h)for(g=h,y=Math.min(f,p);g<y;++g)v=u[g],o[v]!==n&&(a[v]=s[v],o[v]=n,r.push(v)),s[v]^=m;if(d>p)for(g=Math.max(f,p),y=d;g<y;++g)v=u[g],o[v]!==n&&(a[v]=s[v],o[v]=n,r.push(v)),s[v]^=m;else if(d<p)for(g=Math.max(h,d),y=p;g<y;++g)v=u[g],o[v]!==n&&(a[v]=s[v],o[v]=n,r.push(v)),s[v]^=m;e.range=t.slice()},incrementOne(e,t,n,r){const i=this.value,o=i.curr(),s=e.index(),a=e.bisect(e.range),u=e.bisect(t),l=u[0],c=u[1],f=a[0],d=a[1],h=e.one;let p,m,g;if(l<f)for(p=l,m=Math.min(f,c);p<m;++p)g=s[p],o[g]^=h,n.push(g);else if(l>f)for(p=f,m=Math.min(l,d);p<m;++p)g=s[p],o[g]^=h,r.push(g);if(c>d)for(p=Math.max(l,d),m=c;p<m;++p)g=s[p],o[g]^=h,n.push(g);else if(c<d)for(p=Math.max(f,c),m=d;p<m;++p)g=s[p],o[g]^=h,r.push(g);e.range=t.slice()}});function gY(e){ke.call(this,null,e)}gY.Definition={type:"ResolveFilter",metadata:{},params:[{name:"ignore",type:"number",required:!0,description:"A bit mask indicating which filters to ignore."},{name:"filter",type:"object",required:!0,description:"Per-tuple filter bitmaps from a CrossFilter transform."}]};at(gY,ke,{transform(e,t){const n=~(e.ignore||0),r=e.filter,i=r.mask;if(!(i&n))return t.StopPropagation;const o=t.fork(t.ALL),s=r.data(),a=r.curr(),u=r.prev(),l=c=>a[c]&n?null:s[c];return o.filter(o.MOD,l),i&i-1?(o.filter(o.ADD,c=>{const f=a[c]&n;return!f&&f^u[c]&n?s[c]:null}),o.filter(o.REM,c=>{const f=a[c]&n;return f&&!(f^(f^u[c]&n))?s[c]:null})):(o.filter(o.ADD,l),o.filter(o.REM,c=>(a[c]&n)===i?s[c]:null)),o.filter(o.SOURCE,c=>l(c._index))}});const tkt=Object.freeze(Object.defineProperty({__proto__:null,crossfilter:mY,resolvefilter:gY},Symbol.toStringTag,{value:"Module"})),nkt="RawCode",Z0="Literal",rkt="Property",ikt="Identifier",okt="ArrayExpression",skt="BinaryExpression",kCe="CallExpression",akt="ConditionalExpression",ukt="LogicalExpression",lkt="MemberExpression",ckt="ObjectExpression",fkt="UnaryExpression";function vc(e){this.type=e}vc.prototype.visit=function(e){let t,n,r;if(e(this))return 1;for(t=dkt(this),n=0,r=t.length;n<r;++n)if(t[n].visit(e))return 1};function dkt(e){switch(e.type){case okt:return e.elements;case skt:case ukt:return[e.left,e.right];case kCe:return[e.callee].concat(e.arguments);case akt:return[e.test,e.consequent,e.alternate];case lkt:return[e.object,e.property];case ckt:return e.properties;case rkt:return[e.key,e.value];case fkt:return[e.argument];case ikt:case Z0:case nkt:default:return[]}}var Wf,Ct,Pe,gs,ir,X$=1,nA=2,ey=3,Xm=4,Q$=5,qy=6,da=7,rA=8,hkt=9;Wf={};Wf[X$]="Boolean";Wf[nA]="<end>";Wf[ey]="Identifier";Wf[Xm]="Keyword";Wf[Q$]="Null";Wf[qy]="Numeric";Wf[da]="Punctuator";Wf[rA]="String";Wf[hkt]="RegularExpression";var pkt="ArrayExpression",mkt="BinaryExpression",gkt="CallExpression",ykt="ConditionalExpression",ICe="Identifier",vkt="Literal",bkt="LogicalExpression",_kt="MemberExpression",wkt="ObjectExpression",Ekt="Property",xkt="UnaryExpression",lo="Unexpected token %0",Tkt="Unexpected number",Skt="Unexpected string",Ckt="Unexpected identifier",Akt="Unexpected reserved word",kkt="Unexpected end of input",b8="Invalid regular expression",g4="Invalid regular expression: missing /",RCe="Octal literals are not allowed in strict mode.",Ikt="Duplicate data property in object literal not allowed in strict mode",Do="ILLEGAL",wS="Disabled.",Rkt=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),Nkt=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B2\\u08E4-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58\\u0C59\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D60-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA69D\\uA69F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2D\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]");function J$(e,t){if(!e)throw new Error("ASSERT: "+t)}function yd(e){return e>=48&&e<=57}function yY(e){return"0123456789abcdefABCDEF".indexOf(e)>=0}function Xx(e){return"01234567".indexOf(e)>=0}function Pkt(e){return e===32||e===9||e===11||e===12||e===160||e>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(e)>=0}function ES(e){return e===10||e===13||e===8232||e===8233}function iA(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e===92||e>=128&&Rkt.test(String.fromCharCode(e))}function vP(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57||e===92||e>=128&&Nkt.test(String.fromCharCode(e))}const Dkt={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1};function NCe(){for(;Pe<gs;){const e=Ct.charCodeAt(Pe);if(Pkt(e)||ES(e))++Pe;else break}}function _8(e){var t,n,r,i=0;for(n=e==="u"?4:2,t=0;t<n;++t)Pe<gs&&yY(Ct[Pe])?(r=Ct[Pe++],i=i*16+"0123456789abcdef".indexOf(r.toLowerCase())):zn({},lo,Do);return String.fromCharCode(i)}function Okt(){var e,t,n,r;for(e=Ct[Pe],t=0,e==="}"&&zn({},lo,Do);Pe<gs&&(e=Ct[Pe++],!!yY(e));)t=t*16+"0123456789abcdef".indexOf(e.toLowerCase());return(t>1114111||e!=="}")&&zn({},lo,Do),t<=65535?String.fromCharCode(t):(n=(t-65536>>10)+55296,r=(t-65536&1023)+56320,String.fromCharCode(n,r))}function PCe(){var e,t;for(e=Ct.charCodeAt(Pe++),t=String.fromCharCode(e),e===92&&(Ct.charCodeAt(Pe)!==117&&zn({},lo,Do),++Pe,e=_8("u"),(!e||e==="\\"||!iA(e.charCodeAt(0)))&&zn({},lo,Do),t=e);Pe<gs&&(e=Ct.charCodeAt(Pe),!!vP(e));)++Pe,t+=String.fromCharCode(e),e===92&&(t=t.substr(0,t.length-1),Ct.charCodeAt(Pe)!==117&&zn({},lo,Do),++Pe,e=_8("u"),(!e||e==="\\"||!vP(e.charCodeAt(0)))&&zn({},lo,Do),t+=e);return t}function $kt(){var e,t;for(e=Pe++;Pe<gs;){if(t=Ct.charCodeAt(Pe),t===92)return Pe=e,PCe();if(vP(t))++Pe;else break}return Ct.slice(e,Pe)}function Mkt(){var e,t,n;return e=Pe,t=Ct.charCodeAt(Pe)===92?PCe():$kt(),t.length===1?n=ey:Dkt.hasOwnProperty(t)?n=Xm:t==="null"?n=Q$:t==="true"||t==="false"?n=X$:n=ey,{type:n,value:t,start:e,end:Pe}}function y4(){var e=Pe,t=Ct.charCodeAt(Pe),n,r=Ct[Pe],i,o,s;switch(t){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++Pe,{type:da,value:String.fromCharCode(t),start:e,end:Pe};default:if(n=Ct.charCodeAt(Pe+1),n===61)switch(t){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return Pe+=2,{type:da,value:String.fromCharCode(t)+String.fromCharCode(n),start:e,end:Pe};case 33:case 61:return Pe+=2,Ct.charCodeAt(Pe)===61&&++Pe,{type:da,value:Ct.slice(e,Pe),start:e,end:Pe}}}if(s=Ct.substr(Pe,4),s===">>>=")return Pe+=4,{type:da,value:s,start:e,end:Pe};if(o=s.substr(0,3),o===">>>"||o==="<<="||o===">>=")return Pe+=3,{type:da,value:o,start:e,end:Pe};if(i=o.substr(0,2),r===i[1]&&"+-<>&|".indexOf(r)>=0||i==="=>")return Pe+=2,{type:da,value:i,start:e,end:Pe};if(i==="//"&&zn({},lo,Do),"<>=!+-*%&|^/".indexOf(r)>=0)return++Pe,{type:da,value:r,start:e,end:Pe};zn({},lo,Do)}function Lkt(e){let t="";for(;Pe<gs&&yY(Ct[Pe]);)t+=Ct[Pe++];return t.length===0&&zn({},lo,Do),iA(Ct.charCodeAt(Pe))&&zn({},lo,Do),{type:qy,value:parseInt("0x"+t,16),start:e,end:Pe}}function Fkt(e){let t="0"+Ct[Pe++];for(;Pe<gs&&Xx(Ct[Pe]);)t+=Ct[Pe++];return(iA(Ct.charCodeAt(Pe))||yd(Ct.charCodeAt(Pe)))&&zn({},lo,Do),{type:qy,value:parseInt(t,8),octal:!0,start:e,end:Pe}}function Ose(){var e,t,n;if(n=Ct[Pe],J$(yd(n.charCodeAt(0))||n===".","Numeric literal must start with a decimal digit or a decimal point"),t=Pe,e="",n!=="."){if(e=Ct[Pe++],n=Ct[Pe],e==="0"){if(n==="x"||n==="X")return++Pe,Lkt(t);if(Xx(n))return Fkt(t);n&&yd(n.charCodeAt(0))&&zn({},lo,Do)}for(;yd(Ct.charCodeAt(Pe));)e+=Ct[Pe++];n=Ct[Pe]}if(n==="."){for(e+=Ct[Pe++];yd(Ct.charCodeAt(Pe));)e+=Ct[Pe++];n=Ct[Pe]}if(n==="e"||n==="E")if(e+=Ct[Pe++],n=Ct[Pe],(n==="+"||n==="-")&&(e+=Ct[Pe++]),yd(Ct.charCodeAt(Pe)))for(;yd(Ct.charCodeAt(Pe));)e+=Ct[Pe++];else zn({},lo,Do);return iA(Ct.charCodeAt(Pe))&&zn({},lo,Do),{type:qy,value:parseFloat(e),start:t,end:Pe}}function jkt(){var e="",t,n,r,i,o=!1;for(t=Ct[Pe],J$(t==="'"||t==='"',"String literal must starts with a quote"),n=Pe,++Pe;Pe<gs;)if(r=Ct[Pe++],r===t){t="";break}else if(r==="\\")if(r=Ct[Pe++],!r||!ES(r.charCodeAt(0)))switch(r){case"u":case"x":Ct[Pe]==="{"?(++Pe,e+=Okt()):e+=_8(r);break;case"n":e+=`
`;break;case"r":e+="\r";break;case"t":e+="	";break;case"b":e+="\b";break;case"f":e+="\f";break;case"v":e+="\v";break;default:Xx(r)?(i="01234567".indexOf(r),i!==0&&(o=!0),Pe<gs&&Xx(Ct[Pe])&&(o=!0,i=i*8+"01234567".indexOf(Ct[Pe++]),"0123".indexOf(r)>=0&&Pe<gs&&Xx(Ct[Pe])&&(i=i*8+"01234567".indexOf(Ct[Pe++]))),e+=String.fromCharCode(i)):e+=r;break}else r==="\r"&&Ct[Pe]===`
`&&++Pe;else{if(ES(r.charCodeAt(0)))break;e+=r}return t!==""&&zn({},lo,Do),{type:rA,value:e,octal:o,start:n,end:Pe}}function Bkt(e,t){let n=e;t.indexOf("u")>=0&&(n=n.replace(/\\u\{([0-9a-fA-F]+)\}/g,(r,i)=>{if(parseInt(i,16)<=1114111)return"x";zn({},b8)}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{new RegExp(n)}catch{zn({},b8)}try{return new RegExp(e,t)}catch{return null}}function Ukt(){var e,t,n,r,i;for(e=Ct[Pe],J$(e==="/","Regular expression literal must start with a slash"),t=Ct[Pe++],n=!1,r=!1;Pe<gs;)if(e=Ct[Pe++],t+=e,e==="\\")e=Ct[Pe++],ES(e.charCodeAt(0))&&zn({},g4),t+=e;else if(ES(e.charCodeAt(0)))zn({},g4);else if(n)e==="]"&&(n=!1);else if(e==="/"){r=!0;break}else e==="["&&(n=!0);return r||zn({},g4),i=t.substr(1,t.length-2),{value:i,literal:t}}function zkt(){var e,t,n;for(t="",n="";Pe<gs&&(e=Ct[Pe],!!vP(e.charCodeAt(0)));)++Pe,e==="\\"&&Pe<gs?zn({},lo,Do):(n+=e,t+=e);return n.search(/[^gimuy]/g)>=0&&zn({},b8,n),{value:n,literal:t}}function Vkt(){var e,t,n,r;return ir=null,NCe(),e=Pe,t=Ukt(),n=zkt(),r=Bkt(t.value,n.value),{literal:t.literal+n.literal,value:r,regex:{pattern:t.value,flags:n.value},start:e,end:Pe}}function Hkt(e){return e.type===ey||e.type===Xm||e.type===X$||e.type===Q$}function DCe(){if(NCe(),Pe>=gs)return{type:nA,start:Pe,end:Pe};const e=Ct.charCodeAt(Pe);return iA(e)?Mkt():e===40||e===41||e===59?y4():e===39||e===34?jkt():e===46?yd(Ct.charCodeAt(Pe+1))?Ose():y4():yd(e)?Ose():y4()}function ba(){const e=ir;return Pe=e.end,ir=DCe(),Pe=e.end,e}function OCe(){const e=Pe;ir=DCe(),Pe=e}function qkt(e){const t=new vc(pkt);return t.elements=e,t}function $se(e,t,n){const r=new vc(e==="||"||e==="&&"?bkt:mkt);return r.operator=e,r.left=t,r.right=n,r}function Wkt(e,t){const n=new vc(gkt);return n.callee=e,n.arguments=t,n}function Gkt(e,t,n){const r=new vc(ykt);return r.test=e,r.consequent=t,r.alternate=n,r}function vY(e){const t=new vc(ICe);return t.name=e,t}function ZE(e){const t=new vc(vkt);return t.value=e.value,t.raw=Ct.slice(e.start,e.end),e.regex&&(t.raw==="//"&&(t.raw="/(?:)/"),t.regex=e.regex),t}function Mse(e,t,n){const r=new vc(_kt);return r.computed=e==="[",r.object=t,r.property=n,r.computed||(n.member=!0),r}function Ykt(e){const t=new vc(wkt);return t.properties=e,t}function Lse(e,t,n){const r=new vc(Ekt);return r.key=t,r.value=n,r.kind=e,r}function Kkt(e,t){const n=new vc(xkt);return n.operator=e,n.argument=t,n.prefix=!0,n}function zn(e,t){var n,r=Array.prototype.slice.call(arguments,2),i=t.replace(/%(\d)/g,(o,s)=>(J$(s<r.length,"Message reference must be in range"),r[s]));throw n=new Error(i),n.index=Pe,n.description=i,n}function Z$(e){e.type===nA&&zn(e,kkt),e.type===qy&&zn(e,Tkt),e.type===rA&&zn(e,Skt),e.type===ey&&zn(e,Ckt),e.type===Xm&&zn(e,Akt),zn(e,lo,e.value)}function ys(e){const t=ba();(t.type!==da||t.value!==e)&&Z$(t)}function Nr(e){return ir.type===da&&ir.value===e}function v4(e){return ir.type===Xm&&ir.value===e}function Xkt(){const e=[];for(Pe=ir.start,ys("[");!Nr("]");)Nr(",")?(ba(),e.push(null)):(e.push(ty()),Nr("]")||ys(","));return ba(),qkt(e)}function Fse(){Pe=ir.start;const e=ba();return e.type===rA||e.type===qy?(e.octal&&zn(e,RCe),ZE(e)):vY(e.value)}function Qkt(){var e,t,n,r;if(Pe=ir.start,e=ir,e.type===ey)return n=Fse(),ys(":"),r=ty(),Lse("init",n,r);if(e.type===nA||e.type===da)Z$(e);else return t=Fse(),ys(":"),r=ty(),Lse("init",t,r)}function Jkt(){var e=[],t,n,r,i={},o=String;for(Pe=ir.start,ys("{");!Nr("}");)t=Qkt(),t.key.type===ICe?n=t.key.name:n=o(t.key.value),r="$"+n,Object.prototype.hasOwnProperty.call(i,r)?zn({},Ikt):i[r]=!0,e.push(t),Nr("}")||ys(",");return ys("}"),Ykt(e)}function Zkt(){ys("(");const e=bY();return ys(")"),e}const eIt={if:1};function tIt(){var e,t,n;if(Nr("("))return Zkt();if(Nr("["))return Xkt();if(Nr("{"))return Jkt();if(e=ir.type,Pe=ir.start,e===ey||eIt[ir.value])n=vY(ba().value);else if(e===rA||e===qy)ir.octal&&zn(ir,RCe),n=ZE(ba());else{if(e===Xm)throw new Error(wS);e===X$?(t=ba(),t.value=t.value==="true",n=ZE(t)):e===Q$?(t=ba(),t.value=null,n=ZE(t)):Nr("/")||Nr("/=")?(n=ZE(Vkt()),OCe()):Z$(ba())}return n}function nIt(){const e=[];if(ys("("),!Nr(")"))for(;Pe<gs&&(e.push(ty()),!Nr(")"));)ys(",");return ys(")"),e}function rIt(){Pe=ir.start;const e=ba();return Hkt(e)||Z$(e),vY(e.value)}function iIt(){return ys("."),rIt()}function oIt(){ys("[");const e=bY();return ys("]"),e}function sIt(){var e,t,n;for(e=tIt();;)if(Nr("."))n=iIt(),e=Mse(".",e,n);else if(Nr("("))t=nIt(),e=Wkt(e,t);else if(Nr("["))n=oIt(),e=Mse("[",e,n);else break;return e}function jse(){const e=sIt();if(ir.type===da&&(Nr("++")||Nr("--")))throw new Error(wS);return e}function wI(){var e,t;if(ir.type!==da&&ir.type!==Xm)t=jse();else{if(Nr("++")||Nr("--"))throw new Error(wS);if(Nr("+")||Nr("-")||Nr("~")||Nr("!"))e=ba(),t=wI(),t=Kkt(e.value,t);else{if(v4("delete")||v4("void")||v4("typeof"))throw new Error(wS);t=jse()}}return t}function Bse(e){let t=0;if(e.type!==da&&e.type!==Xm)return 0;switch(e.value){case"||":t=1;break;case"&&":t=2;break;case"|":t=3;break;case"^":t=4;break;case"&":t=5;break;case"==":case"!=":case"===":case"!==":t=6;break;case"<":case">":case"<=":case">=":case"instanceof":case"in":t=7;break;case"<<":case">>":case">>>":t=8;break;case"+":case"-":t=9;break;case"*":case"/":case"%":t=11;break}return t}function aIt(){var e,t,n,r,i,o,s,a,u,l;if(e=ir,u=wI(),r=ir,i=Bse(r),i===0)return u;for(r.prec=i,ba(),t=[e,ir],s=wI(),o=[u,r,s];(i=Bse(ir))>0;){for(;o.length>2&&i<=o[o.length-2].prec;)s=o.pop(),a=o.pop().value,u=o.pop(),t.pop(),n=$se(a,u,s),o.push(n);r=ba(),r.prec=i,o.push(r),t.push(ir),n=wI(),o.push(n)}for(l=o.length-1,n=o[l],t.pop();l>1;)t.pop(),n=$se(o[l-1].value,o[l-2],n),l-=2;return n}function ty(){var e,t,n;return e=aIt(),Nr("?")&&(ba(),t=ty(),ys(":"),n=ty(),e=Gkt(e,t,n)),e}function bY(){const e=ty();if(Nr(","))throw new Error(wS);return e}function _Y(e){Ct=e,Pe=0,gs=Ct.length,ir=null,OCe();const t=bY();if(ir.type!==nA)throw new Error("Unexpect token after expression.");return t}var $Ce={NaN:"NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2",MIN_VALUE:"Number.MIN_VALUE",MAX_VALUE:"Number.MAX_VALUE"};function MCe(e){function t(s,a,u,l){let c=e(a[0]);return u&&(c=u+"("+c+")",u.lastIndexOf("new ",0)===0&&(c="("+c+")")),c+"."+s+(l<0?"":l===0?"()":"("+a.slice(1).map(e).join(",")+")")}function n(s,a,u){return l=>t(s,l,a,u)}const r="new Date",i="String",o="RegExp";return{isNaN:"Number.isNaN",isFinite:"Number.isFinite",abs:"Math.abs",acos:"Math.acos",asin:"Math.asin",atan:"Math.atan",atan2:"Math.atan2",ceil:"Math.ceil",cos:"Math.cos",exp:"Math.exp",floor:"Math.floor",hypot:"Math.hypot",log:"Math.log",max:"Math.max",min:"Math.min",pow:"Math.pow",random:"Math.random",round:"Math.round",sin:"Math.sin",sqrt:"Math.sqrt",tan:"Math.tan",clamp:function(s){s.length<3&&De("Missing arguments to clamp function."),s.length>3&&De("Too many arguments to clamp function.");const a=s.map(e);return"Math.max("+a[1]+", Math.min("+a[2]+","+a[0]+"))"},now:"Date.now",utc:"Date.UTC",datetime:r,date:n("getDate",r,0),day:n("getDay",r,0),year:n("getFullYear",r,0),month:n("getMonth",r,0),hours:n("getHours",r,0),minutes:n("getMinutes",r,0),seconds:n("getSeconds",r,0),milliseconds:n("getMilliseconds",r,0),time:n("getTime",r,0),timezoneoffset:n("getTimezoneOffset",r,0),utcdate:n("getUTCDate",r,0),utcday:n("getUTCDay",r,0),utcyear:n("getUTCFullYear",r,0),utcmonth:n("getUTCMonth",r,0),utchours:n("getUTCHours",r,0),utcminutes:n("getUTCMinutes",r,0),utcseconds:n("getUTCSeconds",r,0),utcmilliseconds:n("getUTCMilliseconds",r,0),length:n("length",null,-1),parseFloat:"parseFloat",parseInt:"parseInt",upper:n("toUpperCase",i,0),lower:n("toLowerCase",i,0),substring:n("substring",i),split:n("split",i),trim:n("trim",i,0),regexp:o,test:n("test",o),if:function(s){s.length<3&&De("Missing arguments to if function."),s.length>3&&De("Too many arguments to if function.");const a=s.map(e);return"("+a[0]+"?"+a[1]+":"+a[2]+")"}}}function uIt(e){const t=e&&e.length-1;return t&&(e[0]==='"'&&e[t]==='"'||e[0]==="'"&&e[t]==="'")?e.slice(1,-1):e}function LCe(e){e=e||{};const t=e.allowed?cc(e.allowed):{},n=e.forbidden?cc(e.forbidden):{},r=e.constants||$Ce,i=(e.functions||MCe)(f),o=e.globalvar,s=e.fieldvar,a=nn(o)?o:p=>`${o}["${p}"]`;let u={},l={},c=0;function f(p){if(ft(p))return p;const m=d[p.type];return m==null&&De("Unsupported type: "+p.type),m(p)}const d={Literal:p=>p.raw,Identifier:p=>{const m=p.name;return c>0?m:$t(n,m)?De("Illegal identifier: "+m):$t(r,m)?r[m]:$t(t,m)?m:(u[m]=1,a(m))},MemberExpression:p=>{const m=!p.computed,g=f(p.object);m&&(c+=1);const y=f(p.property);return g===s&&(l[uIt(y)]=1),m&&(c-=1),g+(m?"."+y:"["+y+"]")},CallExpression:p=>{p.callee.type!=="Identifier"&&De("Illegal callee type: "+p.callee.type);const m=p.callee.name,g=p.arguments,y=$t(i,m)&&i[m];return y||De("Unrecognized function: "+m),nn(y)?y(g):y+"("+g.map(f).join(",")+")"},ArrayExpression:p=>"["+p.elements.map(f).join(",")+"]",BinaryExpression:p=>"("+f(p.left)+" "+p.operator+" "+f(p.right)+")",UnaryExpression:p=>"("+p.operator+f(p.argument)+")",ConditionalExpression:p=>"("+f(p.test)+"?"+f(p.consequent)+":"+f(p.alternate)+")",LogicalExpression:p=>"("+f(p.left)+p.operator+f(p.right)+")",ObjectExpression:p=>"{"+p.properties.map(f).join(",")+"}",Property:p=>{c+=1;const m=f(p.key);return c-=1,m+":"+f(p.value)}};function h(p){const m={code:f(p),globals:Object.keys(u),fields:Object.keys(l)};return u={},l={},m}return h.functions=i,h.constants=r,h}const Use=Symbol("vega_selection_getter");function FCe(e){return(!e.getter||!e.getter[Use])&&(e.getter=ul(e.field),e.getter[Use]=!0),e.getter}const wY="intersect",zse="union",lIt="vlMulti",cIt="vlPoint",Vse="or",fIt="and",Bc="_vgsid_",xS=ul(Bc),dIt="E",hIt="R",pIt="R-E",mIt="R-LE",gIt="R-RE",bP="index:unit";function Hse(e,t){for(var n=t.fields,r=t.values,i=n.length,o=0,s,a;o<i;++o)if(a=n[o],s=FCe(a)(e),Wp(s)&&(s=fs(s)),Wp(r[o])&&(r[o]=fs(r[o])),Le(r[o])&&Wp(r[o][0])&&(r[o]=r[o].map(fs)),a.type===dIt){if(Le(r[o])?r[o].indexOf(s)<0:s!==r[o])return!1}else if(a.type===hIt){if(!f1(s,r[o]))return!1}else if(a.type===gIt){if(!f1(s,r[o],!0,!1))return!1}else if(a.type===pIt){if(!f1(s,r[o],!1,!1))return!1}else if(a.type===mIt&&!f1(s,r[o],!1,!0))return!1;return!0}function yIt(e,t,n){for(var r=this.context.data[e],i=r?r.values.value:[],o=r?r[bP]&&r[bP].value:void 0,s=n===wY,a=i.length,u=0,l,c,f,d,h;u<a;++u)if(l=i[u],o&&s){if(c=c||{},f=c[d=l.unit]||0,f===-1)continue;if(h=Hse(t,l),c[d]=h?-1:++f,h&&o.size===1)return!0;if(!h&&f===o.get(d).count)return!1}else if(h=Hse(t,l),s^h)return h;return a&&s}const jCe=k_(xS),vIt=jCe.left,bIt=jCe.right;function _It(e,t,n){const r=this.context.data[e],i=r?r.values.value:[],o=r?r[bP]&&r[bP].value:void 0,s=n===wY,a=xS(t),u=vIt(i,a);if(u===i.length||xS(i[u])!==a)return!1;if(o&&s){if(o.size===1)return!0;if(bIt(i,a)-u<o.size)return!1}return!0}function wIt(e,t){return e.map(n=>tn(t.fields?{values:t.fields.map(r=>FCe(r)(n.datum))}:{[Bc]:xS(n.datum)},t))}function EIt(e,t,n,r){for(var i=this.context.data[e],o=i?i.values.value:[],s={},a={},u={},l,c,f,d,h,p,m,g,y,v,_=o.length,w=0,E,S;w<_;++w)if(l=o[w],d=l.unit,c=l.fields,f=l.values,c&&f){for(E=0,S=c.length;E<S;++E)h=c[E],m=s[h.field]||(s[h.field]={}),g=m[d]||(m[d]=[]),u[h.field]=y=h.type.charAt(0),v=b4[`${y}_union`],m[d]=v(g,ct(f[E]));n&&(g=a[d]||(a[d]=[]),g.push(ct(f).reduce((T,C,A)=>(T[c[A].field]=C,T),{})))}else h=Bc,p=xS(l),m=s[h]||(s[h]={}),g=m[d]||(m[d]=[]),g.push(p),n&&(g=a[d]||(a[d]=[]),g.push({[Bc]:p}));if(t=t||zse,s[Bc]?s[Bc]=b4[`${Bc}_${t}`](...Object.values(s[Bc])):Object.keys(s).forEach(T=>{s[T]=Object.keys(s[T]).map(C=>s[T][C]).reduce((C,A)=>C===void 0?A:b4[`${u[T]}_${t}`](C,A))}),o=Object.keys(a),n&&o.length){const T=r?cIt:lIt;s[T]=t===zse?{[Vse]:o.reduce((C,A)=>(C.push(...a[A]),C),[])}:{[fIt]:o.map(C=>({[Vse]:a[C]}))}}return s}var b4={[`${Bc}_union`]:OYe,[`${Bc}_intersect`]:PYe,E_union:function(e,t){if(!e.length)return t;for(var n=0,r=t.length;n<r;++n)e.indexOf(t[n])<0&&e.push(t[n]);return e},E_intersect:function(e,t){return e.length?e.filter(n=>t.indexOf(n)>=0):t},R_union:function(e,t){var n=fs(t[0]),r=fs(t[1]);return n>r&&(n=t[1],r=t[0]),e.length?(e[0]>n&&(e[0]=n),e[1]<r&&(e[1]=r),e):[n,r]},R_intersect:function(e,t){var n=fs(t[0]),r=fs(t[1]);return n>r&&(n=t[1],r=t[0]),e.length?r<e[0]||e[1]<n?[]:(e[0]<n&&(e[0]=n),e[1]>r&&(e[1]=r),e):[n,r]}};const xIt=":",TIt="@";function EY(e,t,n,r){t[0].type!==Z0&&De("First argument to selection functions must be a string literal.");const i=t[0].value,o=t.length>=2&&In(t).value,s="unit",a=TIt+s,u=xIt+i;o===wY&&!$t(r,a)&&(r[a]=n.getData(i).indataRef(n,s)),$t(r,u)||(r[u]=n.getData(i).tuplesRef())}function BCe(e){const t=this.context.data[e];return t?t.values.value:[]}function SIt(e,t,n){const r=this.context.data[e]["index:"+t],i=r?r.value.get(n):void 0;return i&&i.count}function CIt(e,t){const n=this.context.dataflow,r=this.context.data[e],i=r.input;return n.pulse(i,n.changeset().remove(ll).insert(t)),1}function AIt(e,t,n){if(e){const r=this.context.dataflow,i=e.mark.source;r.pulse(i,r.changeset().encode(e,t))}return n!==void 0?n:e}const oA=e=>function(t,n){return this.context.dataflow.locale()[e](n)(t)},kIt=oA("format"),UCe=oA("timeFormat"),IIt=oA("utcFormat"),RIt=oA("timeParse"),NIt=oA("utcParse"),tk=new Date(2e3,0,1);function e3(e,t,n){return!Number.isInteger(e)||!Number.isInteger(t)?"":(tk.setYear(2e3),tk.setMonth(e),tk.setDate(t),UCe.call(this,tk,n))}function PIt(e){return e3.call(this,e,1,"%B")}function DIt(e){return e3.call(this,e,1,"%b")}function OIt(e){return e3.call(this,0,2+e,"%A")}function $It(e){return e3.call(this,0,2+e,"%a")}const MIt=":",LIt="@",w8="%",zCe="$";function xY(e,t,n,r){t[0].type!==Z0&&De("First argument to data functions must be a string literal.");const i=t[0].value,o=MIt+i;if(!$t(o,r))try{r[o]=n.getData(i).tuplesRef()}catch{}}function FIt(e,t,n,r){t[0].type!==Z0&&De("First argument to indata must be a string literal."),t[1].type!==Z0&&De("Second argument to indata must be a string literal.");const i=t[0].value,o=t[1].value,s=LIt+o;$t(s,r)||(r[s]=n.getData(i).indataRef(n,o))}function Hs(e,t,n,r){if(t[0].type===Z0)qse(n,r,t[0].value);else for(e in n.scales)qse(n,r,e)}function qse(e,t,n){const r=w8+n;if(!$t(t,r))try{t[r]=e.scaleRef(n)}catch{}}function Gf(e,t){if(nn(e))return e;if(ft(e)){const n=t.scales[e];return n&&cxt(n.value)?n.value:void 0}}function jIt(e,t,n){t.__bandwidth=i=>i&&i.bandwidth?i.bandwidth():0,n._bandwidth=Hs,n._range=Hs,n._scale=Hs;const r=i=>"_["+(i.type===Z0?et(w8+i.value):et(w8)+"+"+e(i))+"]";return{_bandwidth:i=>`this.__bandwidth(${r(i[0])})`,_range:i=>`${r(i[0])}.range()`,_scale:i=>`${r(i[0])}(${e(i[1])})`}}function TY(e,t){return function(n,r,i){if(n){const o=Gf(n,(i||this).context);return o&&o.path[e](r)}else return t(r)}}const BIt=TY("area",zZe),UIt=TY("bounds",WZe),zIt=TY("centroid",JZe);function VIt(e,t){const n=Gf(e,(t||this).context);return n&&n.scale()}function HIt(e){const t=this.context.group;let n=!1;if(t)for(;e;){if(e===t){n=!0;break}e=e.mark.group}return n}function SY(e,t,n){try{e[t].apply(e,["EXPRESSION"].concat([].slice.call(n)))}catch(r){e.warn(r)}return n[n.length-1]}function qIt(){return SY(this.context.dataflow,"warn",arguments)}function WIt(){return SY(this.context.dataflow,"info",arguments)}function GIt(){return SY(this.context.dataflow,"debug",arguments)}function _4(e){const t=e/255;return t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)}function E8(e){const t=um(e),n=_4(t.r),r=_4(t.g),i=_4(t.b);return .2126*n+.7152*r+.0722*i}function YIt(e,t){const n=E8(e),r=E8(t),i=Math.max(n,r),o=Math.min(n,r);return(i+.05)/(o+.05)}function KIt(){const e=[].slice.call(arguments);return e.unshift({}),tn(...e)}function VCe(e,t){return e===t||e!==e&&t!==t?!0:Le(e)?Le(t)&&e.length===t.length?XIt(e,t):!1:ht(e)&&ht(t)?HCe(e,t):!1}function XIt(e,t){for(let n=0,r=e.length;n<r;++n)if(!VCe(e[n],t[n]))return!1;return!0}function HCe(e,t){for(const n in e)if(!VCe(e[n],t[n]))return!1;return!0}function Wse(e){return t=>HCe(e,t)}function QIt(e,t,n,r,i,o){const s=this.context.dataflow,a=this.context.data[e],u=a.input,l=s.stamp();let c=a.changes,f,d;if(s._trigger===!1||!(u.value.length||t||r))return 0;if((!c||c.stamp<l)&&(a.changes=c=s.changeset(),c.stamp=l,s.runAfter(()=>{a.modified=!0,s.pulse(u,c).run()},!0,1)),n&&(f=n===!0?ll:Le(n)||T$(n)?n:Wse(n),c.remove(f)),t&&c.insert(t),r&&(f=Wse(r),u.value.some(f)?c.remove(f):c.insert(r)),i)for(d in o)c.modify(i,d,o[d]);return 1}function JIt(e){const t=e.touches,n=t[0].clientX-t[1].clientX,r=t[0].clientY-t[1].clientY;return Math.hypot(n,r)}function ZIt(e){const t=e.touches;return Math.atan2(t[0].clientY-t[1].clientY,t[0].clientX-t[1].clientX)}const Gse={};function eRt(e,t){const n=Gse[t]||(Gse[t]=ul(t));return Le(e)?e.map(n):n(e)}function CY(e){return Le(e)||ArrayBuffer.isView(e)?e:null}function AY(e){return CY(e)||(ft(e)?e:null)}function tRt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return CY(e).join(...n)}function nRt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return AY(e).indexOf(...n)}function rRt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return AY(e).lastIndexOf(...n)}function iRt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return AY(e).slice(...n)}function oRt(e,t,n){return nn(n)&&De("Function argument passed to replace."),String(e).replace(t,n)}function sRt(e){return CY(e).slice().reverse()}function aRt(e,t,n){return QW(e||0,t||0,n||0)}function uRt(e,t){const n=Gf(e,(t||this).context);return n&&n.bandwidth?n.bandwidth():0}function lRt(e,t){const n=Gf(e,(t||this).context);return n?n.copy():void 0}function cRt(e,t){const n=Gf(e,(t||this).context);return n?n.domain():[]}function fRt(e,t,n){const r=Gf(e,(n||this).context);return r?Le(t)?(r.invertRange||r.invert)(t):(r.invert||r.invertExtent)(t):void 0}function dRt(e,t){const n=Gf(e,(t||this).context);return n&&n.range?n.range():[]}function hRt(e,t,n){const r=Gf(e,(n||this).context);return r?r(t):void 0}function pRt(e,t,n,r,i){e=Gf(e,(i||this).context);const o=OTe(t,n);let s=e.domain(),a=s[0],u=In(s),l=_s;return u-a?l=ETe(e,a,u):e=(e.interpolator?Hn("sequential")().interpolator(e.interpolator()):Hn("linear")().interpolate(e.interpolate()).range(e.range())).domain([a=0,u=1]),e.ticks&&(s=e.ticks(+r||15),a!==s[0]&&s.unshift(a),u!==In(s)&&s.push(u)),s.forEach(c=>o.stop(l(c),e(c))),o}function mRt(e,t,n){const r=Gf(e,(n||this).context);return function(i){return r?r.path.context(i)(t):""}}function gRt(e){let t=null;return function(n){return n?yS(n,t=t||jb(e)):e}}const qCe=e=>e.data;function WCe(e,t){const n=BCe.call(t,e);return n.root&&n.root.lookup||{}}function yRt(e,t,n){const r=WCe(e,this),i=r[t],o=r[n];return i&&o?i.path(o).map(qCe):void 0}function vRt(e,t){const n=WCe(e,this)[t];return n?n.ancestors().map(qCe):void 0}const GCe=()=>typeof window<"u"&&window||null;function bRt(){const e=GCe();return e?e.screen:{}}function _Rt(){const e=GCe();return e?[e.innerWidth,e.innerHeight]:[void 0,void 0]}function wRt(){const e=this.context.dataflow,t=e.container&&e.container();return t?[t.clientWidth,t.clientHeight]:[void 0,void 0]}function YCe(e,t,n){if(!e)return[];const[r,i]=e,o=new Di().set(r[0],r[1],i[0],i[1]),s=n||this.context.dataflow.scenegraph().root;return NSe(s,o,ERt(t))}function ERt(e){let t=null;if(e){const n=ct(e.marktype),r=ct(e.markname);t=i=>(!n.length||n.some(o=>i.marktype===o))&&(!r.length||r.some(o=>i.name===o))}return t}function xRt(e,t,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:5;e=ct(e);const i=e[e.length-1];return i===void 0||Math.hypot(i[0]-t,i[1]-n)>r?[...e,[t,n]]:e}function TRt(e){return ct(e).reduce((t,n,r)=>{let[i,o]=n;return t+=r==0?`M ${i},${o} `:r===e.length-1?" Z":`L ${i},${o} `},"")}function SRt(e,t,n){const{x:r,y:i,mark:o}=n,s=new Di().set(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,Number.MIN_SAFE_INTEGER,Number.MIN_SAFE_INTEGER);for(const[u,l]of t)u<s.x1&&(s.x1=u),u>s.x2&&(s.x2=u),l<s.y1&&(s.y1=l),l>s.y2&&(s.y2=l);return s.translate(r,i),YCe([[s.x1,s.y1],[s.x2,s.y2]],e,o).filter(u=>CRt(u.x,u.y,t))}function CRt(e,t,n){let r=0;for(let i=0,o=n.length-1;i<n.length;o=i++){const[s,a]=n[o],[u,l]=n[i];l>t!=a>t&&e<(s-u)*(t-l)/(a-l)+u&&r++}return r&1}const TS={random(){return fl()},cumulativeNormal:I$,cumulativeLogNormal:yW,cumulativeUniform:wW,densityNormal:dW,densityLogNormal:gW,densityUniform:_W,quantileNormal:R$,quantileLogNormal:vW,quantileUniform:EW,sampleNormal:k$,sampleLogNormal:mW,sampleUniform:bW,isArray:Le,isBoolean:Km,isDate:Wp,isDefined(e){return e!==void 0},isNumber:jn,isObject:ht,isRegExp:PEe,isString:ft,isTuple:T$,isValid(e){return e!=null&&e===e},toBoolean:Xq,toDate(e){return Qq(e)},toNumber:fs,toString:Jq,indexof:nRt,join:tRt,lastindexof:rRt,replace:oRt,reverse:sRt,slice:iRt,flush:REe,lerp:DEe,merge:KIt,pad:MEe,peek:In,pluck:eRt,span:jC,inrange:f1,truncate:LEe,rgb:um,lab:NR,hcl:PR,hsl:IR,luminance:E8,contrast:YIt,sequence:Ea,format:kIt,utcFormat:IIt,utcParse:NIt,utcOffset:QEe,utcSequence:exe,timeFormat:UCe,timeParse:RIt,timeOffset:XEe,timeSequence:ZEe,timeUnitSpecifier:jEe,monthFormat:PIt,monthAbbrevFormat:DIt,dayFormat:OIt,dayAbbrevFormat:$It,quarter:CEe,utcquarter:AEe,week:UEe,utcweek:HEe,dayofyear:BEe,utcdayofyear:VEe,warn:qIt,info:WIt,debug:GIt,extent(e){return Sf(e)},inScope:HIt,intersect:YCe,clampRange:kEe,pinchDistance:JIt,pinchAngle:ZIt,screen:bRt,containerSize:wRt,windowSize:_Rt,bandspace:aRt,setdata:CIt,pathShape:gRt,panLinear:EEe,panLog:xEe,panPow:TEe,panSymlog:SEe,zoomLinear:Hq,zoomLog:qq,zoomPow:JN,zoomSymlog:Wq,encode:AIt,modify:QIt,lassoAppend:xRt,lassoPath:TRt,intersectLasso:SRt},ARt=["view","item","group","xy","x","y"],kRt="event.vega.",KCe="this.",kY={},XCe={forbidden:["_"],allowed:["datum","event","item"],fieldvar:"datum",globalvar:e=>`_[${et(zCe+e)}]`,functions:IRt,constants:$Ce,visitors:kY},x8=LCe(XCe);function IRt(e){const t=MCe(e);ARt.forEach(n=>t[n]=kRt+n);for(const n in TS)t[n]=KCe+n;return tn(t,jIt(e,TS,kY)),t}function Ti(e,t,n){return arguments.length===1?TS[e]:(TS[e]=t,n&&(kY[e]=n),x8&&(x8.functions[e]=KCe+e),this)}Ti("bandwidth",uRt,Hs);Ti("copy",lRt,Hs);Ti("domain",cRt,Hs);Ti("range",dRt,Hs);Ti("invert",fRt,Hs);Ti("scale",hRt,Hs);Ti("gradient",pRt,Hs);Ti("geoArea",BIt,Hs);Ti("geoBounds",UIt,Hs);Ti("geoCentroid",zIt,Hs);Ti("geoShape",mRt,Hs);Ti("geoScale",VIt,Hs);Ti("indata",SIt,FIt);Ti("data",BCe,xY);Ti("treePath",yRt,xY);Ti("treeAncestors",vRt,xY);Ti("vlSelectionTest",yIt,EY);Ti("vlSelectionIdTest",_It,EY);Ti("vlSelectionResolve",EIt,EY);Ti("vlSelectionTuples",wIt);function Af(e,t){const n={};let r;try{e=ft(e)?e:et(e)+"",r=_Y(e)}catch{De("Expression parse error: "+e)}r.visit(o=>{if(o.type!==kCe)return;const s=o.callee.name,a=XCe.visitors[s];a&&a(s,o.arguments,t,n)});const i=x8(r);return i.globals.forEach(o=>{const s=zCe+o;!$t(n,s)&&t.getSignal(o)&&(n[s]=t.signalRef(o))}),{$expr:tn({code:i.code},t.options.ast?{ast:r}:null),$fields:i.fields,$params:n}}function RRt(e){const t=this,n=e.operators||[];return e.background&&(t.background=e.background),e.eventConfig&&(t.eventConfig=e.eventConfig),e.locale&&(t.locale=e.locale),n.forEach(r=>t.parseOperator(r)),n.forEach(r=>t.parseOperatorParameters(r)),(e.streams||[]).forEach(r=>t.parseStream(r)),(e.updates||[]).forEach(r=>t.parseUpdate(r)),t.resolve()}const NRt=cc(["rule"]),Yse=cc(["group","image","rect"]);function PRt(e,t){let n="";return NRt[t]||(e.x2&&(e.x?(Yse[t]&&(n+="if(o.x>o.x2)$=o.x,o.x=o.x2,o.x2=$;"),n+="o.width=o.x2-o.x;"):n+="o.x=o.x2-(o.width||0);"),e.xc&&(n+="o.x=o.xc-(o.width||0)/2;"),e.y2&&(e.y?(Yse[t]&&(n+="if(o.y>o.y2)$=o.y,o.y=o.y2,o.y2=$;"),n+="o.height=o.y2-o.y;"):n+="o.y=o.y2-(o.height||0);"),e.yc&&(n+="o.y=o.yc-(o.height||0)/2;")),n}function IY(e){return(e+"").toLowerCase()}function DRt(e){return IY(e)==="operator"}function ORt(e){return IY(e)==="collect"}function nE(e,t,n){n.endsWith(";")||(n="return("+n+");");const r=Function(...t.concat(n));return e&&e.functions?r.bind(e.functions):r}function $Rt(e,t,n,r){return`((u = ${e}) < (v = ${t}) || u == null) && v != null ? ${n}
  : (u > v || v == null) && u != null ? ${r}
  : ((v = v instanceof Date ? +v : v), (u = u instanceof Date ? +u : u)) !== u && v === v ? ${n}
  : v !== v && u === u ? ${r} : `}var MRt={operator:(e,t)=>nE(e,["_"],t.code),parameter:(e,t)=>nE(e,["datum","_"],t.code),event:(e,t)=>nE(e,["event"],t.code),handler:(e,t)=>{const n=`var datum=event.item&&event.item.datum;return ${t.code};`;return nE(e,["_","event"],n)},encode:(e,t)=>{const{marktype:n,channels:r}=t;let i="var o=item,datum=o.datum,m=0,$;";for(const o in r){const s="o["+et(o)+"]";i+=`$=${r[o].code};if(${s}!==$)${s}=$,m=1;`}return i+=PRt(r,n),i+="return m;",nE(e,["item","_"],i)},codegen:{get(e){const t=`[${e.map(et).join("][")}]`,n=Function("_",`return _${t};`);return n.path=t,n},comparator(e,t){let n;const r=(o,s)=>{const a=t[s];let u,l;return o.path?(u=`a${o.path}`,l=`b${o.path}`):((n=n||{})["f"+s]=o,u=`this.f${s}(a)`,l=`this.f${s}(b)`),$Rt(u,l,-a,a)},i=Function("a","b","var u, v; return "+e.map(r).join("")+"0;");return n?i.bind(n):i}}};function LRt(e){const t=this;DRt(e.type)||!e.type?t.operator(e,e.update?t.operatorExpression(e.update):null):t.transform(e,e.type)}function FRt(e){const t=this;if(e.params){const n=t.get(e.id);n||De("Invalid operator id: "+e.id),t.dataflow.connect(n,n.parameters(t.parseParameters(e.params),e.react,e.initonly))}}function jRt(e,t){t=t||{};const n=this;for(const r in e){const i=e[r];t[r]=Le(i)?i.map(o=>Kse(o,n,t)):Kse(i,n,t)}return t}function Kse(e,t,n){if(!e||!ht(e))return e;for(let r=0,i=Xse.length,o;r<i;++r)if(o=Xse[r],$t(e,o.key))return o.parse(e,t,n);return e}var Xse=[{key:"$ref",parse:BRt},{key:"$key",parse:zRt},{key:"$expr",parse:URt},{key:"$field",parse:VRt},{key:"$encode",parse:qRt},{key:"$compare",parse:HRt},{key:"$context",parse:WRt},{key:"$subflow",parse:GRt},{key:"$tupleid",parse:YRt}];function BRt(e,t){return t.get(e.$ref)||De("Operator not defined: "+e.$ref)}function URt(e,t,n){e.$params&&t.parseParameters(e.$params,n);const r="e:"+e.$expr.code;return t.fn[r]||(t.fn[r]=Ha(t.parameterExpression(e.$expr),e.$fields))}function zRt(e,t){const n="k:"+e.$key+"_"+!!e.$flat;return t.fn[n]||(t.fn[n]=Kq(e.$key,e.$flat,t.expr.codegen))}function VRt(e,t){if(!e.$field)return null;const n="f:"+e.$field+"_"+e.$name;return t.fn[n]||(t.fn[n]=ul(e.$field,e.$name,t.expr.codegen))}function HRt(e,t){const n="c:"+e.$compare+"_"+e.$order,r=ct(e.$compare).map(i=>i&&i.$tupleid?Dt:i);return t.fn[n]||(t.fn[n]=Gq(r,e.$order,t.expr.codegen))}function qRt(e,t){const n=e.$encode,r={};for(const i in n){const o=n[i];r[i]=Ha(t.encodeExpression(o.$expr),o.$fields),r[i].output=o.$output}return r}function WRt(e,t){return t}function GRt(e,t){const n=e.$subflow;return function(r,i,o){const s=t.fork().parse(n),a=s.get(n.operators[0].id),u=s.signals.parent;return u&&u.set(o),a.detachSubflow=()=>t.detach(s),a}}function YRt(){return Dt}function KRt(e){var t=this,n=e.filter!=null?t.eventExpression(e.filter):void 0,r=e.stream!=null?t.get(e.stream):void 0,i;e.source?r=t.events(e.source,e.type,n):e.merge&&(i=e.merge.map(o=>t.get(o)),r=i[0].merge.apply(i[0],i.slice(1))),e.between&&(i=e.between.map(o=>t.get(o)),r=r.between(i[0],i[1])),e.filter&&(r=r.filter(n)),e.throttle!=null&&(r=r.throttle(+e.throttle)),e.debounce!=null&&(r=r.debounce(+e.debounce)),r==null&&De("Invalid stream definition: "+JSON.stringify(e)),e.consume&&r.consume(!0),t.stream(e,r)}function XRt(e){var t=this,n=ht(n=e.source)?n.$ref:n,r=t.get(n),i=null,o=e.update,s=void 0;r||De("Source not defined: "+e.source),i=e.target&&e.target.$expr?t.eventExpression(e.target.$expr):t.get(e.target),o&&o.$expr&&(o.$params&&(s=t.parseParameters(o.$params)),o=t.handlerExpression(o.$expr)),t.update(e,r,i,o,s)}const QRt={skip:!0};function JRt(e){var t=this,n={};if(e.signals){var r=n.signals={};Object.keys(t.signals).forEach(o=>{const s=t.signals[o];e.signals(o,s)&&(r[o]=s.value)})}if(e.data){var i=n.data={};Object.keys(t.data).forEach(o=>{const s=t.data[o];e.data(o,s)&&(i[o]=s.input.value)})}return t.subcontext&&e.recurse!==!1&&(n.subcontext=t.subcontext.map(o=>o.getState(e))),n}function ZRt(e){var t=this,n=t.dataflow,r=e.data,i=e.signals;Object.keys(i||{}).forEach(o=>{n.update(t.signals[o],i[o],QRt)}),Object.keys(r||{}).forEach(o=>{n.pulse(t.data[o].input,n.changeset().remove(ll).insert(r[o]))}),(e.subcontext||[]).forEach((o,s)=>{const a=t.subcontext[s];a&&a.setState(o)})}function QCe(e,t,n,r){return new JCe(e,t,n,r)}function JCe(e,t,n,r){this.dataflow=e,this.transforms=t,this.events=e.events.bind(e),this.expr=r||MRt,this.signals={},this.scales={},this.nodes={},this.data={},this.fn={},n&&(this.functions=Object.create(n),this.functions.context=this)}function Qse(e){this.dataflow=e.dataflow,this.transforms=e.transforms,this.events=e.events,this.expr=e.expr,this.signals=Object.create(e.signals),this.scales=Object.create(e.scales),this.nodes=Object.create(e.nodes),this.data=Object.create(e.data),this.fn=Object.create(e.fn),e.functions&&(this.functions=Object.create(e.functions),this.functions.context=this)}JCe.prototype=Qse.prototype={fork(){const e=new Qse(this);return(this.subcontext||(this.subcontext=[])).push(e),e},detach(e){this.subcontext=this.subcontext.filter(n=>n!==e);const t=Object.keys(e.nodes);for(const n of t)e.nodes[n]._targets=null;for(const n of t)e.nodes[n].detach();e.nodes=null},get(e){return this.nodes[e]},set(e,t){return this.nodes[e]=t},add(e,t){const n=this,r=n.dataflow,i=e.value;if(n.set(e.id,t),ORt(e.type)&&i&&(i.$ingest?r.ingest(t,i.$ingest,i.$format):i.$request?r.preload(t,i.$request,i.$format):r.pulse(t,r.changeset().insert(i))),e.root&&(n.root=t),e.parent){let o=n.get(e.parent.$ref);o?(r.connect(o,[t]),t.targets().add(o)):(n.unresolved=n.unresolved||[]).push(()=>{o=n.get(e.parent.$ref),r.connect(o,[t]),t.targets().add(o)})}if(e.signal&&(n.signals[e.signal]=t),e.scale&&(n.scales[e.scale]=t),e.data)for(const o in e.data){const s=n.data[o]||(n.data[o]={});e.data[o].forEach(a=>s[a]=t)}},resolve(){return(this.unresolved||[]).forEach(e=>e()),delete this.unresolved,this},operator(e,t){this.add(e,this.dataflow.add(e.value,t))},transform(e,t){this.add(e,this.dataflow.add(this.transforms[IY(t)]))},stream(e,t){this.set(e.id,t)},update(e,t,n,r,i){this.dataflow.on(t,n,r,i,e.options)},operatorExpression(e){return this.expr.operator(this,e)},parameterExpression(e){return this.expr.parameter(this,e)},eventExpression(e){return this.expr.event(this,e)},handlerExpression(e){return this.expr.handler(this,e)},encodeExpression(e){return this.expr.encode(this,e)},parse:RRt,parseOperator:LRt,parseOperatorParameters:FRt,parseParameters:jRt,parseStream:KRt,parseUpdate:XRt,getState:JRt,setState:ZRt};function eNt(e){const t=e.container();t&&(t.setAttribute("role","graphics-document"),t.setAttribute("aria-roleDescription","visualization"),ZCe(t,e.description()))}function ZCe(e,t){e&&(t==null?e.removeAttribute("aria-label"):e.setAttribute("aria-label",t))}function tNt(e){e.add(null,t=>(e._background=t.bg,e._resize=1,t.bg),{bg:e._signals.background})}const w4="default";function nNt(e){const t=e._signals.cursor||(e._signals.cursor=e.add({user:w4,item:null}));e.on(e.events("view","pointermove"),t,(n,r)=>{const i=t.value,o=i?ft(i)?i:i.user:w4,s=r.item&&r.item.cursor||null;return i&&o===i.user&&s==i.item?i:{user:o,item:s}}),e.add(null,function(n){let r=n.cursor,i=this.value;return ft(r)||(i=r.item,r=r.user),T8(e,r&&r!==w4?r:i||r),i},{cursor:t})}function T8(e,t){const n=e.globalCursor()?typeof document<"u"&&document.body:e.container();if(n)return t==null?n.style.removeProperty("cursor"):n.style.cursor=t}function _P(e,t){var n=e._runtime.data;return $t(n,t)||De("Unrecognized data set: "+t),n[t]}function rNt(e,t){return arguments.length<2?_P(this,e).values.value:t3.call(this,e,Vy().remove(ll).insert(t))}function t3(e,t){_xe(t)||De("Second argument to changes must be a changeset.");const n=_P(this,e);return n.modified=!0,this.pulse(n.input,t)}function iNt(e,t){return t3.call(this,e,Vy().insert(t))}function oNt(e,t){return t3.call(this,e,Vy().remove(t))}function eAe(e){var t=e.padding();return Math.max(0,e._viewWidth+t.left+t.right)}function tAe(e){var t=e.padding();return Math.max(0,e._viewHeight+t.top+t.bottom)}function n3(e){var t=e.padding(),n=e._origin;return[t.left+n[0],t.top+n[1]]}function sNt(e){var t=n3(e),n=eAe(e),r=tAe(e);e._renderer.background(e.background()),e._renderer.resize(n,r,t),e._handler.origin(t),e._resizeListeners.forEach(i=>{try{i(n,r)}catch(o){e.error(o)}})}function aNt(e,t,n){var r=e._renderer,i=r&&r.canvas(),o,s,a;return i&&(a=n3(e),s=t.changedTouches?t.changedTouches[0]:t,o=G$(s,i),o[0]-=a[0],o[1]-=a[1]),t.dataflow=e,t.item=n,t.vega=uNt(e,n,o),t}function uNt(e,t,n){const r=t?t.mark.marktype==="group"?t:t.mark.group:null;function i(s){var a=r,u;if(s){for(u=t;u;u=u.mark.group)if(u.mark.name===s){a=u;break}}return a&&a.mark&&a.mark.interactive?a:{}}function o(s){if(!s)return n;ft(s)&&(s=i(s));const a=n.slice();for(;s;)a[0]-=s.x||0,a[1]-=s.y||0,s=s.mark&&s.mark.group;return a}return{view:ws(e),item:ws(t||{}),group:i,xy:o,x:s=>o(s)[0],y:s=>o(s)[1]}}const Jse="view",lNt="timer",cNt="window",fNt={trap:!1};function dNt(e){const t=tn({defaults:{}},e),n=(r,i)=>{i.forEach(o=>{Le(r[o])&&(r[o]=cc(r[o]))})};return n(t.defaults,["prevent","allow"]),n(t,["view","window","selector"]),t}function nAe(e,t,n,r){e._eventListeners.push({type:n,sources:ct(t),handler:r})}function hNt(e,t){var n=e._eventConfig.defaults,r=n.prevent,i=n.allow;return r===!1||i===!0?!1:r===!0||i===!1?!0:r?r[t]:i?!i[t]:e.preventDefault()}function nk(e,t,n){const r=e._eventConfig&&e._eventConfig[t];return r===!1||ht(r)&&!r[n]?(e.warn(`Blocked ${t} ${n} event listener.`),!1):!0}function pNt(e,t,n){var r=this,i=new A$(n),o=function(l,c){r.runAsync(null,()=>{e===Jse&&hNt(r,t)&&l.preventDefault(),i.receive(aNt(r,l,c))})},s;if(e===lNt)nk(r,"timer",t)&&r.timer(o,t);else if(e===Jse)nk(r,"view",t)&&r.addEventListener(t,o,fNt);else if(e===cNt?nk(r,"window",t)&&typeof window<"u"&&(s=[window]):typeof document<"u"&&nk(r,"selector",t)&&(s=Array.from(document.querySelectorAll(e))),!s)r.warn("Can not resolve event source: "+e);else{for(var a=0,u=s.length;a<u;++a)s[a].addEventListener(t,o);nAe(r,s,t,o)}return i}function Zse(e){return e.item}function eae(e){return e.item.mark.source}function tae(e){return function(t,n){return n.vega.view().changeset().encode(n.item,e)}}function mNt(e,t){return e=[e||"hover"],t=[t||"update",e[0]],this.on(this.events("view","pointerover",Zse),eae,tae(e)),this.on(this.events("view","pointerout",Zse),eae,tae(t)),this}function gNt(){var e=this._tooltip,t=this._timers,n=this._handler.handlers(),r=this._eventListeners,i,o,s,a,u;for(i=t.length;--i>=0;)t[i].stop();for(i=r.length;--i>=0;)for(s=r[i],o=s.sources.length;--o>=0;)s.sources[o].removeEventListener(s.type,s.handler);for(e&&e.call(this,this._handler,null,null,null),i=n.length;--i>=0;)u=n[i].type,a=n[i].handler,this._handler.off(u,a);return this}function du(e,t,n){const r=document.createElement(e);for(const i in t)r.setAttribute(i,t[i]);return n!=null&&(r.textContent=n),r}const yNt="vega-bind",vNt="vega-bind-name",bNt="vega-bind-radio";function _Nt(e,t,n){if(!t)return;const r=n.param;let i=n.state;return i||(i=n.state={elements:null,active:!1,set:null,update:s=>{s!=e.signal(r.signal)&&e.runAsync(null,()=>{i.source=!0,e.signal(r.signal,s)})}},r.debounce&&(i.update=Yq(r.debounce,i.update))),(r.input==null&&r.element?wNt:xNt)(i,t,r,e),i.active||(e.on(e._signals[r.signal],null,()=>{i.source?i.source=!1:i.set(e.signal(r.signal))}),i.active=!0),i}function wNt(e,t,n,r){const i=n.event||"input",o=()=>e.update(t.value);r.signal(n.signal,t.value),t.addEventListener(i,o),nAe(r,t,i,o),e.set=s=>{t.value=s,t.dispatchEvent(ENt(i))}}function ENt(e){return typeof Event<"u"?new Event(e):{type:e}}function xNt(e,t,n,r){const i=r.signal(n.signal),o=du("div",{class:yNt}),s=n.input==="radio"?o:o.appendChild(du("label"));s.appendChild(du("span",{class:vNt},n.name||n.signal)),t.appendChild(o);let a=TNt;switch(n.input){case"checkbox":a=SNt;break;case"select":a=CNt;break;case"radio":a=ANt;break;case"range":a=kNt;break}a(e,s,n,i)}function TNt(e,t,n,r){const i=du("input");for(const o in n)o!=="signal"&&o!=="element"&&i.setAttribute(o==="input"?"type":o,n[o]);i.setAttribute("name",n.signal),i.value=r,t.appendChild(i),i.addEventListener("input",()=>e.update(i.value)),e.elements=[i],e.set=o=>i.value=o}function SNt(e,t,n,r){const i={type:"checkbox",name:n.signal};r&&(i.checked=!0);const o=du("input",i);t.appendChild(o),o.addEventListener("change",()=>e.update(o.checked)),e.elements=[o],e.set=s=>o.checked=!!s||null}function CNt(e,t,n,r){const i=du("select",{name:n.signal}),o=n.labels||[];n.options.forEach((s,a)=>{const u={value:s};wP(s,r)&&(u.selected=!0),i.appendChild(du("option",u,(o[a]||s)+""))}),t.appendChild(i),i.addEventListener("change",()=>{e.update(n.options[i.selectedIndex])}),e.elements=[i],e.set=s=>{for(let a=0,u=n.options.length;a<u;++a)if(wP(n.options[a],s)){i.selectedIndex=a;return}}}function ANt(e,t,n,r){const i=du("span",{class:bNt}),o=n.labels||[];t.appendChild(i),e.elements=n.options.map((s,a)=>{const u={type:"radio",name:n.signal,value:s};wP(s,r)&&(u.checked=!0);const l=du("input",u);l.addEventListener("change",()=>e.update(s));const c=du("label",{},(o[a]||s)+"");return c.prepend(l),i.appendChild(c),l}),e.set=s=>{const a=e.elements,u=a.length;for(let l=0;l<u;++l)wP(a[l].value,s)&&(a[l].checked=!0)}}function kNt(e,t,n,r){r=r!==void 0?r:(+n.max+ +n.min)/2;const i=n.max!=null?n.max:Math.max(100,+r)||100,o=n.min||Math.min(0,i,+r)||0,s=n.step||am(o,i,100),a=du("input",{type:"range",name:n.signal,min:o,max:i,step:s});a.value=r;const u=du("span",{},+r);t.appendChild(a),t.appendChild(u);const l=()=>{u.textContent=a.value,e.update(+a.value)};a.addEventListener("input",l),a.addEventListener("change",l),e.elements=[a],e.set=c=>{a.value=c,u.textContent=c}}function wP(e,t){return e===t||e+""==t+""}function rAe(e,t,n,r,i,o){return t=t||new r(e.loader()),t.initialize(n,eAe(e),tAe(e),n3(e),i,o).background(e.background())}function RY(e,t){return t?function(){try{t.apply(this,arguments)}catch(n){e.error(n)}}:null}function INt(e,t,n,r){const i=new r(e.loader(),RY(e,e.tooltip())).scene(e.scenegraph().root).initialize(n,n3(e),e);return t&&t.handlers().forEach(o=>{i.on(o.type,o.handler)}),i}function RNt(e,t){const n=this,r=n._renderType,i=n._eventConfig.bind,o=Y$(r);e=n._el=e?E4(n,e,!0):null,eNt(n),o||n.error("Unrecognized renderer type: "+r);const s=o.handler||tA,a=e?o.renderer:o.headless;return n._renderer=a?rAe(n,n._renderer,e,a):null,n._handler=INt(n,n._handler,e,s),n._redraw=!0,e&&i!=="none"&&(t=t?n._elBind=E4(n,t,!0):e.appendChild(du("form",{class:"vega-bindings"})),n._bind.forEach(u=>{u.param.element&&i!=="container"&&(u.element=E4(n,u.param.element,!!u.param.input))}),n._bind.forEach(u=>{_Nt(n,u.element||t,u)})),n}function E4(e,t,n){if(typeof t=="string")if(typeof document<"u"){if(t=document.querySelector(t),!t)return e.error("Signal bind element not found: "+t),null}else return e.error("DOM document instance not found."),null;if(t&&n)try{t.textContent=""}catch(r){t=null,e.error(r)}return t}const rE=e=>+e||0,NNt=e=>({top:e,bottom:e,left:e,right:e});function nae(e){return ht(e)?{top:rE(e.top),bottom:rE(e.bottom),left:rE(e.left),right:rE(e.right)}:NNt(rE(e))}async function NY(e,t,n,r){const i=Y$(t),o=i&&i.headless;return o||De("Unrecognized renderer type: "+t),await e.runAsync(),rAe(e,null,null,o,n,r).renderAsync(e._scenegraph.root)}async function PNt(e,t){e!==Ep.Canvas&&e!==Ep.SVG&&e!==Ep.PNG&&De("Unrecognized image type: "+e);const n=await NY(this,e,t);return e===Ep.SVG?DNt(n.svg(),"image/svg+xml"):n.canvas().toDataURL("image/png")}function DNt(e,t){const n=new Blob([e],{type:t});return window.URL.createObjectURL(n)}async function ONt(e,t){return(await NY(this,Ep.Canvas,e,t)).canvas()}async function $Nt(e){return(await NY(this,Ep.SVG,e)).svg()}function MNt(e,t,n){return QCe(e,$b,TS,n).parse(t)}function LNt(e){var t=this._runtime.scales;return $t(t,e)||De("Unrecognized scale or projection: "+e),t[e].value}var iAe="width",oAe="height",PY="padding",rae={skip:!0};function sAe(e,t){var n=e.autosize(),r=e.padding();return t-(n&&n.contains===PY?r.left+r.right:0)}function aAe(e,t){var n=e.autosize(),r=e.padding();return t-(n&&n.contains===PY?r.top+r.bottom:0)}function FNt(e){var t=e._signals,n=t[iAe],r=t[oAe],i=t[PY];function o(){e._autosize=e._resize=1}e._resizeWidth=e.add(null,a=>{e._width=a.size,e._viewWidth=sAe(e,a.size),o()},{size:n}),e._resizeHeight=e.add(null,a=>{e._height=a.size,e._viewHeight=aAe(e,a.size),o()},{size:r});const s=e.add(null,o,{pad:i});e._resizeWidth.rank=n.rank+1,e._resizeHeight.rank=r.rank+1,s.rank=i.rank+1}function jNt(e,t,n,r,i,o){this.runAfter(s=>{let a=0;s._autosize=0,s.width()!==n&&(a=1,s.signal(iAe,n,rae),s._resizeWidth.skip(!0)),s.height()!==r&&(a=1,s.signal(oAe,r,rae),s._resizeHeight.skip(!0)),s._viewWidth!==e&&(s._resize=1,s._viewWidth=e),s._viewHeight!==t&&(s._resize=1,s._viewHeight=t),(s._origin[0]!==i[0]||s._origin[1]!==i[1])&&(s._resize=1,s._origin=i),a&&s.run("enter"),o&&s.runAfter(u=>u.resize())},!1,1)}function BNt(e){return this._runtime.getState(e||{data:UNt,signals:zNt,recurse:!0})}function UNt(e,t){return t.modified&&Le(t.input.value)&&!e.startsWith("_:vega:_")}function zNt(e,t){return!(e==="parent"||t instanceof $b.proxy)}function VNt(e){return this.runAsync(null,t=>{t._trigger=!1,t._runtime.setState(e)},t=>{t._trigger=!0}),this}function HNt(e,t){function n(r){e({timestamp:Date.now(),elapsed:r})}this._timers.push(hQe(n,t))}function qNt(e,t,n,r){const i=e.element();i&&i.setAttribute("title",WNt(r))}function WNt(e){return e==null?"":Le(e)?uAe(e):ht(e)&&!Wp(e)?GNt(e):e+""}function GNt(e){return Object.keys(e).map(t=>{const n=e[t];return t+": "+(Le(n)?uAe(n):lAe(n))}).join(`
`)}function uAe(e){return"["+e.map(lAe).join(", ")+"]"}function lAe(e){return Le(e)?"[]":ht(e)&&!Wp(e)?"{}":e}function YNt(){if(this.renderer()==="canvas"&&this._renderer._canvas){let e=null;const t=()=>{e!=null&&e();const n=matchMedia(`(resolution: ${window.devicePixelRatio}dppx)`);n.addEventListener("change",t),e=()=>{n.removeEventListener("change",t)},this._renderer._canvas.getContext("2d").pixelRatio=window.devicePixelRatio||1,this._redraw=!0,this._resize=1,this.resize().runAsync()};t()}}function cAe(e,t){const n=this;if(t=t||{},z1.call(n),t.loader&&n.loader(t.loader),t.logger&&n.logger(t.logger),t.logLevel!=null&&n.logLevel(t.logLevel),t.locale||e.locale){const o=tn({},e.locale,t.locale);n.locale(cxe(o.number,o.time))}n._el=null,n._elBind=null,n._renderType=t.renderer||Ep.Canvas,n._scenegraph=new iSe;const r=n._scenegraph.root;n._renderer=null,n._tooltip=t.tooltip||qNt,n._redraw=!0,n._handler=new tA().scene(r),n._globalCursor=!1,n._preventDefault=!1,n._timers=[],n._eventListeners=[],n._resizeListeners=[],n._eventConfig=dNt(e.eventConfig),n.globalCursor(n._eventConfig.globalCursor);const i=MNt(n,e,t.expr);n._runtime=i,n._signals=i.signals,n._bind=(e.bindings||[]).map(o=>({state:null,param:tn({},o)})),i.root&&i.root.set(r),r.source=i.data.root.input,n.pulse(i.data.root.input,n.changeset().insert(r.items)),n._width=n.width(),n._height=n.height(),n._viewWidth=sAe(n,n._width),n._viewHeight=aAe(n,n._height),n._origin=[0,0],n._resize=0,n._autosize=1,FNt(n),tNt(n),nNt(n),n.description(e.description),t.hover&&n.hover(),t.container&&n.initialize(t.container,t.bind),t.watchPixelRatio&&n._watchPixelRatio()}function rk(e,t){return $t(e._signals,t)?e._signals[t]:De("Unrecognized signal name: "+et(t))}function fAe(e,t){const n=(e._targets||[]).filter(r=>r._update&&r._update.handler===t);return n.length?n[0]:null}function iae(e,t,n,r){let i=fAe(n,r);return i||(i=RY(e,()=>r(t,n.value)),i.handler=r,e.on(n,null,i)),e}function oae(e,t,n){const r=fAe(t,n);return r&&t._targets.remove(r),e}at(cAe,z1,{async evaluate(e,t,n){if(await z1.prototype.evaluate.call(this,e,t),this._redraw||this._resize)try{this._renderer&&(this._resize&&(this._resize=0,sNt(this)),await this._renderer.renderAsync(this._scenegraph.root)),this._redraw=!1}catch(r){this.error(r)}return n&&uI(this,n),this},dirty(e){this._redraw=!0,this._renderer&&this._renderer.dirty(e)},description(e){if(arguments.length){const t=e!=null?e+"":null;return t!==this._desc&&ZCe(this._el,this._desc=t),this}return this._desc},container(){return this._el},scenegraph(){return this._scenegraph},origin(){return this._origin.slice()},signal(e,t,n){const r=rk(this,e);return arguments.length===1?r.value:this.update(r,t,n)},width(e){return arguments.length?this.signal("width",e):this.signal("width")},height(e){return arguments.length?this.signal("height",e):this.signal("height")},padding(e){return arguments.length?this.signal("padding",nae(e)):nae(this.signal("padding"))},autosize(e){return arguments.length?this.signal("autosize",e):this.signal("autosize")},background(e){return arguments.length?this.signal("background",e):this.signal("background")},renderer(e){return arguments.length?(Y$(e)||De("Unrecognized renderer type: "+e),e!==this._renderType&&(this._renderType=e,this._resetRenderer()),this):this._renderType},tooltip(e){return arguments.length?(e!==this._tooltip&&(this._tooltip=e,this._resetRenderer()),this):this._tooltip},loader(e){return arguments.length?(e!==this._loader&&(z1.prototype.loader.call(this,e),this._resetRenderer()),this):this._loader},resize(){return this._autosize=1,this.touch(rk(this,"autosize"))},_resetRenderer(){this._renderer&&(this._renderer=null,this.initialize(this._el,this._elBind))},_resizeView:jNt,addEventListener(e,t,n){let r=t;return n&&n.trap===!1||(r=RY(this,t),r.raw=t),this._handler.on(e,r),this},removeEventListener(e,t){for(var n=this._handler.handlers(e),r=n.length,i,o;--r>=0;)if(o=n[r].type,i=n[r].handler,e===o&&(t===i||t===i.raw)){this._handler.off(o,i);break}return this},addResizeListener(e){const t=this._resizeListeners;return t.includes(e)||t.push(e),this},removeResizeListener(e){var t=this._resizeListeners,n=t.indexOf(e);return n>=0&&t.splice(n,1),this},addSignalListener(e,t){return iae(this,e,rk(this,e),t)},removeSignalListener(e,t){return oae(this,rk(this,e),t)},addDataListener(e,t){return iae(this,e,_P(this,e).values,t)},removeDataListener(e,t){return oae(this,_P(this,e).values,t)},globalCursor(e){if(arguments.length){if(this._globalCursor!==!!e){const t=T8(this,null);this._globalCursor=!!e,t&&T8(this,t)}return this}else return this._globalCursor},preventDefault(e){return arguments.length?(this._preventDefault=e,this):this._preventDefault},timer:HNt,events:pNt,finalize:gNt,hover:mNt,data:rNt,change:t3,insert:iNt,remove:oNt,scale:LNt,initialize:RNt,toImageURL:PNt,toCanvas:ONt,toSVG:$Nt,getState:BNt,setState:VNt,_watchPixelRatio:YNt});const KNt="view",EP="[",xP="]",dAe="{",hAe="}",XNt=":",pAe=",",QNt="@",JNt=">",ZNt=/[[\]{}]/,ePt={"*":1,arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1};let mAe,gAe;function Qm(e,t,n){return mAe=t||KNt,gAe=n||ePt,yAe(e.trim()).map(S8)}function tPt(e){return gAe[e]}function Qx(e,t,n,r,i){const o=e.length;let s=0,a;for(;t<o;++t){if(a=e[t],!s&&a===n)return t;i&&i.indexOf(a)>=0?--s:r&&r.indexOf(a)>=0&&++s}return t}function yAe(e){const t=[],n=e.length;let r=0,i=0;for(;i<n;)i=Qx(e,i,pAe,EP+dAe,xP+hAe),t.push(e.substring(r,i).trim()),r=++i;if(t.length===0)throw"Empty event selector: "+e;return t}function S8(e){return e[0]==="["?nPt(e):rPt(e)}function nPt(e){const t=e.length;let n=1,r;if(n=Qx(e,n,xP,EP,xP),n===t)throw"Empty between selector: "+e;if(r=yAe(e.substring(1,n)),r.length!==2)throw"Between selector must have two elements: "+e;if(e=e.slice(n+1).trim(),e[0]!==JNt)throw"Expected '>' after between selector: "+e;r=r.map(S8);const i=S8(e.slice(1).trim());return i.between?{between:r,stream:i}:(i.between=r,i)}function rPt(e){const t={source:mAe},n=[];let r=[0,0],i=0,o=0,s=e.length,a=0,u,l;if(e[s-1]===hAe){if(a=e.lastIndexOf(dAe),a>=0){try{r=iPt(e.substring(a+1,s-1))}catch{throw"Invalid throttle specification: "+e}e=e.slice(0,a).trim(),s=e.length}else throw"Unmatched right brace: "+e;a=0}if(!s)throw e;if(e[0]===QNt&&(i=++a),u=Qx(e,a,XNt),u<s&&(n.push(e.substring(o,u).trim()),o=a=++u),a=Qx(e,a,EP),a===s)n.push(e.substring(o,s).trim());else if(n.push(e.substring(o,a).trim()),l=[],o=++a,o===s)throw"Unmatched left bracket: "+e;for(;a<s;){if(a=Qx(e,a,xP),a===s)throw"Unmatched left bracket: "+e;if(l.push(e.substring(o,a).trim()),a<s-1&&e[++a]!==EP)throw"Expected left bracket: "+e;o=++a}if(!(s=n.length)||ZNt.test(n[s-1]))throw"Invalid event selector: "+e;return s>1?(t.type=n[1],i?t.markname=n[0].slice(1):tPt(n[0])?t.marktype=n[0]:t.source=n[0]):t.type=n[0],t.type.slice(-1)==="!"&&(t.consume=!0,t.type=t.type.slice(0,-1)),l!=null&&(t.filter=l),r[0]&&(t.throttle=r[0]),r[1]&&(t.debounce=r[1]),t}function iPt(e){const t=e.split(pAe);if(!e.length||t.length>2)throw e;return t.map(n=>{const r=+n;if(r!==r)throw e;return r})}function oPt(e){return ht(e)?e:{type:e||"pad"}}const iE=e=>+e||0,sPt=e=>({top:e,bottom:e,left:e,right:e});function aPt(e){return ht(e)?e.signal?e:{top:iE(e.top),bottom:iE(e.bottom),left:iE(e.left),right:iE(e.right)}:sPt(iE(e))}const co=e=>ht(e)&&!Le(e)?tn({},e):{value:e};function sae(e,t,n,r){return n!=null?(ht(n)&&!Le(n)||Le(n)&&n.length&&ht(n[0])?e.update[t]=n:e[r||"enter"][t]={value:n},1):0}function zo(e,t,n){for(const r in t)sae(e,r,t[r]);for(const r in n)sae(e,r,n[r],"update")}function rw(e,t,n){for(const r in t)n&&$t(n,r)||(e[r]=tn(e[r]||{},t[r]));return e}function qv(e,t){return t&&(t.enter&&t.enter[e]||t.update&&t.update[e])}const DY="mark",OY="frame",$Y="scope",uPt="axis",lPt="axis-domain",cPt="axis-grid",fPt="axis-label",dPt="axis-tick",hPt="axis-title",pPt="legend",mPt="legend-band",gPt="legend-entry",yPt="legend-gradient",vAe="legend-label",vPt="legend-symbol",bPt="legend-title",_Pt="title",wPt="title-text",EPt="title-subtitle";function xPt(e,t,n,r,i){const o={},s={};let a,u,l,c;u="lineBreak",t==="text"&&i[u]!=null&&!qv(u,e)&&x4(o,u,i[u]),(n=="legend"||String(n).startsWith("axis"))&&(n=null),c=n===OY?i.group:n===DY?tn({},i.mark,i[t]):null;for(u in c)l=qv(u,e)||(u==="fill"||u==="stroke")&&(qv("fill",e)||qv("stroke",e)),l||x4(o,u,c[u]);ct(r).forEach(f=>{const d=i.style&&i.style[f];for(const h in d)qv(h,e)||x4(o,h,d[h])}),e=tn({},e);for(u in o)c=o[u],c.signal?(a=a||{})[u]=c:s[u]=c;return e.enter=tn(s,e.enter),a&&(e.update=tn(a,e.update)),e}function x4(e,t,n){e[t]=n&&n.signal?{signal:n.signal}:{value:n}}const bAe=e=>ft(e)?et(e):e.signal?`(${e.signal})`:_Ae(e);function r3(e){if(e.gradient!=null)return SPt(e);let t=e.signal?`(${e.signal})`:e.color?TPt(e.color):e.field!=null?_Ae(e.field):e.value!==void 0?et(e.value):void 0;return e.scale!=null&&(t=CPt(e,t)),t===void 0&&(t=null),e.exponent!=null&&(t=`pow(${t},${EI(e.exponent)})`),e.mult!=null&&(t+=`*${EI(e.mult)}`),e.offset!=null&&(t+=`+${EI(e.offset)}`),e.round&&(t=`round(${t})`),t}const ik=(e,t,n,r)=>`(${e}(${[t,n,r].map(r3).join(",")})+'')`;function TPt(e){return e.c?ik("hcl",e.h,e.c,e.l):e.h||e.s?ik("hsl",e.h,e.s,e.l):e.l||e.a?ik("lab",e.l,e.a,e.b):e.r||e.g||e.b?ik("rgb",e.r,e.g,e.b):null}function SPt(e){const t=[e.start,e.stop,e.count].map(n=>n==null?null:et(n));for(;t.length&&In(t)==null;)t.pop();return t.unshift(bAe(e.gradient)),`gradient(${t.join(",")})`}function EI(e){return ht(e)?"("+r3(e)+")":e}function _Ae(e){return wAe(ht(e)?e:{datum:e})}function wAe(e){let t,n,r;if(e.signal)t="datum",r=e.signal;else if(e.group||e.parent){for(n=Math.max(1,e.level||1),t="item";n-- >0;)t+=".mark.group";e.parent?(r=e.parent,t+=".datum"):r=e.group}else e.datum?(t="datum",r=e.datum):De("Invalid field reference: "+et(e));return e.signal||(r=ft(r)?Hf(r).map(et).join("]["):wAe(r)),t+"["+r+"]"}function CPt(e,t){const n=bAe(e.scale);return e.range!=null?t=`lerp(_range(${n}), ${+e.range})`:(t!==void 0&&(t=`_scale(${n}, ${t})`),e.band&&(t=(t?t+"+":"")+`_bandwidth(${n})`+(+e.band==1?"":"*"+EI(e.band)),e.extra&&(t=`(datum.extra ? _scale(${n}, datum.extra.value) : ${t})`)),t==null&&(t="0")),t}function APt(e){let t="";return e.forEach(n=>{const r=r3(n);t+=n.test?`(${n.test})?${r}:`:r}),In(t)===":"&&(t+="null"),t}function EAe(e,t,n,r,i,o){const s={};o=o||{},o.encoders={$encode:s},e=xPt(e,t,n,r,i.config);for(const a in e)s[a]=kPt(e[a],t,o,i);return o}function kPt(e,t,n,r){const i={},o={};for(const s in e)e[s]!=null&&(i[s]=RPt(IPt(e[s]),r,n,o));return{$expr:{marktype:t,channels:i},$fields:Object.keys(o),$output:Object.keys(e)}}function IPt(e){return Le(e)?APt(e):r3(e)}function RPt(e,t,n,r){const i=Af(e,t);return i.$fields.forEach(o=>r[o]=1),tn(n,i.$params),i.$expr}const NPt="outer",PPt=["value","update","init","react","bind"];function aae(e,t){De(e+' for "outer" push: '+et(t))}function xAe(e,t){const n=e.name;if(e.push===NPt)t.signals[n]||aae("No prior signal definition",n),PPt.forEach(r=>{e[r]!==void 0&&aae("Invalid property ",r)});else{const r=t.addSignal(n,e.value);e.react===!1&&(r.react=!1),e.bind&&t.addBinding(n,e.bind)}}function C8(e,t,n,r){this.id=-1,this.type=e,this.value=t,this.params=n,r&&(this.parent=r)}function i3(e,t,n,r){return new C8(e,t,n,r)}function TP(e,t){return i3("operator",e,t)}function Pt(e){const t={$ref:e.id};return e.id<0&&(e.refs=e.refs||[]).push(t),t}function SS(e,t){return t?{$field:e,$name:t}:{$field:e}}const A8=SS("key");function uae(e,t){return{$compare:e,$order:t}}function DPt(e,t){const n={$key:e};return t&&(n.$flat=!0),n}const OPt="ascending",$Pt="descending";function MPt(e){return ht(e)?(e.order===$Pt?"-":"+")+o3(e.op,e.field):""}function o3(e,t){return(e&&e.signal?"$"+e.signal:e||"")+(e&&t?"_":"")+(t&&t.signal?"$"+t.signal:t||"")}const MY="scope",k8="view";function qi(e){return e&&e.signal}function LPt(e){return e&&e.expr}function xI(e){if(qi(e))return!0;if(ht(e)){for(const t in e)if(xI(e[t]))return!0}return!1}function Ml(e,t){return e??t}function b0(e){return e&&e.signal||e}const lae="timer";function CS(e,t){return(e.merge?jPt:e.stream?BPt:e.type?UPt:De("Invalid stream specification: "+et(e)))(e,t)}function FPt(e){return e===MY?k8:e||k8}function jPt(e,t){const n=e.merge.map(i=>CS(i,t)),r=LY({merge:n},e,t);return t.addStream(r).id}function BPt(e,t){const n=CS(e.stream,t),r=LY({stream:n},e,t);return t.addStream(r).id}function UPt(e,t){let n;e.type===lae?(n=t.event(lae,e.throttle),e={between:e.between,filter:e.filter}):n=t.event(FPt(e.source),e.type);const r=LY({stream:n},e,t);return Object.keys(r).length===1?n:t.addStream(r).id}function LY(e,t,n){let r=t.between;return r&&(r.length!==2&&De('Stream "between" parameter must have 2 entries: '+et(t)),e.between=[CS(r[0],n),CS(r[1],n)]),r=t.filter?[].concat(t.filter):[],(t.marktype||t.markname||t.markrole)&&r.push(zPt(t.marktype,t.markname,t.markrole)),t.source===MY&&r.push("inScope(event.item)"),r.length&&(e.filter=Af("("+r.join(")&&(")+")",n).$expr),(r=t.throttle)!=null&&(e.throttle=+r),(r=t.debounce)!=null&&(e.debounce=+r),t.consume&&(e.consume=!0),e}function zPt(e,t,n){const r="event.item";return r+(e&&e!=="*"?"&&"+r+".mark.marktype==='"+e+"'":"")+(n?"&&"+r+".mark.role==='"+n+"'":"")+(t?"&&"+r+".mark.name==='"+t+"'":"")}const VPt={code:"_.$value",ast:{type:"Identifier",value:"value"}};function HPt(e,t,n){const r=e.encode,i={target:n};let o=e.events,s=e.update,a=[];o||De("Signal update missing events specification."),ft(o)&&(o=Qm(o,t.isSubscope()?MY:k8)),o=ct(o).filter(u=>u.signal||u.scale?(a.push(u),0):1),a.length>1&&(a=[WPt(a)]),o.length&&a.push(o.length>1?{merge:o}:o[0]),r!=null&&(s&&De("Signal encode and update are mutually exclusive."),s="encode(item(),"+et(r)+")"),i.update=ft(s)?Af(s,t):s.expr!=null?Af(s.expr,t):s.value!=null?s.value:s.signal!=null?{$expr:VPt,$params:{$value:t.signalRef(s.signal)}}:De("Invalid signal update specification."),e.force&&(i.options={force:!0}),a.forEach(u=>t.addUpdate(tn(qPt(u,t),i)))}function qPt(e,t){return{source:e.signal?t.signalRef(e.signal):e.scale?t.scaleRef(e.scale):CS(e,t)}}function WPt(e){return{signal:"["+e.map(t=>t.scale?'scale("'+t.scale+'")':t.signal)+"]"}}function GPt(e,t){const n=t.getSignal(e.name);let r=e.update;e.init&&(r?De("Signals can not include both init and update expressions."):(r=e.init,n.initonly=!0)),r&&(r=Af(r,t),n.update=r.$expr,n.params=r.$params),e.on&&e.on.forEach(i=>HPt(i,t,n.id))}const cr=e=>(t,n,r)=>i3(e,n,t||void 0,r),TAe=cr("aggregate"),YPt=cr("axisticks"),SAe=cr("bound"),bc=cr("collect"),cae=cr("compare"),KPt=cr("datajoin"),CAe=cr("encode"),XPt=cr("expression"),QPt=cr("facet"),JPt=cr("field"),ZPt=cr("key"),eDt=cr("legendentries"),tDt=cr("load"),nDt=cr("mark"),rDt=cr("multiextent"),iDt=cr("multivalues"),oDt=cr("overlap"),sDt=cr("params"),AAe=cr("prefacet"),aDt=cr("projection"),uDt=cr("proxy"),lDt=cr("relay"),kAe=cr("render"),cDt=cr("scale"),Wy=cr("sieve"),fDt=cr("sortitems"),IAe=cr("viewlayout"),dDt=cr("values");let hDt=0;const RAe={min:"min",max:"max",count:"sum"};function pDt(e,t){const n=e.type||"linear";gTe(n)||De("Unrecognized scale type: "+et(n)),t.addScale(e.name,{type:n,domain:void 0})}function mDt(e,t){const n=t.getScale(e.name).params;let r;n.domain=NAe(e.domain,e,t),e.range!=null&&(n.range=DAe(e,t,n)),e.interpolate!=null&&SDt(e.interpolate,n),e.nice!=null&&(n.nice=TDt(e.nice,t)),e.bins!=null&&(n.bins=xDt(e.bins,t));for(r in e)$t(n,r)||r==="name"||(n[r]=Ju(e[r],t))}function Ju(e,t){return ht(e)?e.signal?t.signalRef(e.signal):De("Unsupported object: "+et(e)):e}function TI(e,t){return e.signal?t.signalRef(e.signal):e.map(n=>Ju(n,t))}function s3(e){De("Can not find data set: "+et(e))}function NAe(e,t,n){if(!e){(t.domainMin!=null||t.domainMax!=null)&&De("No scale domain defined for domainMin/domainMax to override.");return}return e.signal?n.signalRef(e.signal):(Le(e)?gDt:e.fields?vDt:yDt)(e,t,n)}function gDt(e,t,n){return e.map(r=>Ju(r,n))}function yDt(e,t,n){const r=n.getData(e.data);return r||s3(e.data),Fb(t.type)?r.valuesRef(n,e.field,PAe(e.sort,!1)):bTe(t.type)?r.domainRef(n,e.field):r.extentRef(n,e.field)}function vDt(e,t,n){const r=e.data,i=e.fields.reduce((o,s)=>(s=ft(s)?{data:r,field:s}:Le(s)||s.signal?bDt(s,n):s,o.push(s),o),[]);return(Fb(t.type)?_Dt:bTe(t.type)?wDt:EDt)(e,n,i)}function bDt(e,t){const n="_:vega:_"+hDt++,r=bc({});if(Le(e))r.value={$ingest:e};else if(e.signal){const i="setdata("+et(n)+","+e.signal+")";r.params.input=t.signalRef(i)}return t.addDataPipeline(n,[r,Wy({})]),{data:n,field:"data"}}function _Dt(e,t,n){const r=PAe(e.sort,!0);let i,o;const s=n.map(l=>{const c=t.getData(l.data);return c||s3(l.data),c.countsRef(t,l.field,r)}),a={groupby:A8,pulse:s};r&&(i=r.op||"count",o=r.field?o3(i,r.field):"count",a.ops=[RAe[i]],a.fields=[t.fieldRef(o)],a.as=[o]),i=t.add(TAe(a));const u=t.add(bc({pulse:Pt(i)}));return o=t.add(dDt({field:A8,sort:t.sortRef(r),pulse:Pt(u)})),Pt(o)}function PAe(e,t){return e&&(!e.field&&!e.op?ht(e)?e.field="key":e={field:"key"}:!e.field&&e.op!=="count"?De("No field provided for sort aggregate op: "+e.op):t&&e.field&&e.op&&!RAe[e.op]&&De("Multiple domain scales can not be sorted using "+e.op)),e}function wDt(e,t,n){const r=n.map(i=>{const o=t.getData(i.data);return o||s3(i.data),o.domainRef(t,i.field)});return Pt(t.add(iDt({values:r})))}function EDt(e,t,n){const r=n.map(i=>{const o=t.getData(i.data);return o||s3(i.data),o.extentRef(t,i.field)});return Pt(t.add(rDt({extents:r})))}function xDt(e,t){return e.signal||Le(e)?TI(e,t):t.objectProperty(e)}function TDt(e,t){return e.signal?t.signalRef(e.signal):ht(e)?{interval:Ju(e.interval),step:Ju(e.step)}:Ju(e)}function SDt(e,t){t.interpolate=Ju(e.type||e),e.gamma!=null&&(t.interpolateGamma=Ju(e.gamma))}function DAe(e,t,n){const r=t.config.range;let i=e.range;if(i.signal)return t.signalRef(i.signal);if(ft(i)){if(r&&$t(r,i))return e=tn({},e,{range:r[i]}),DAe(e,t,n);i==="width"?i=[0,{signal:"width"}]:i==="height"?i=Fb(e.type)?[0,{signal:"height"}]:[{signal:"height"},0]:De("Unrecognized scale range value: "+et(i))}else if(i.scheme){n.scheme=Le(i.scheme)?TI(i.scheme,t):Ju(i.scheme,t),i.extent&&(n.schemeExtent=TI(i.extent,t)),i.count&&(n.schemeCount=Ju(i.count,t));return}else if(i.step){n.rangeStep=Ju(i.step,t);return}else{if(Fb(e.type)&&!Le(i))return NAe(i,e,t);Le(i)||De("Unsupported range type: "+et(i))}return i.map(o=>(Le(o)?TI:Ju)(o,t))}function CDt(e,t){const n=t.config.projection||{},r={};for(const i in e)i!=="name"&&(r[i]=I8(e[i],i,t));for(const i in n)r[i]==null&&(r[i]=I8(n[i],i,t));t.addProjection(e.name,r)}function I8(e,t,n){return Le(e)?e.map(r=>I8(r,t,n)):ht(e)?e.signal?n.signalRef(e.signal):t==="fit"?e:De("Unsupported parameter object: "+et(e)):e}const _c="top",iw="left",ow="right",Em="bottom",OAe="center",ADt="vertical",kDt="start",IDt="middle",RDt="end",R8="index",FY="label",NDt="offset",Vb="perc",PDt="perc2",tl="value",sA="guide-label",jY="guide-title",DDt="group-title",ODt="group-subtitle",fae="symbol",SI="gradient",N8="discrete",P8="size",$Dt="shape",MDt="fill",LDt="stroke",FDt="strokeWidth",jDt="strokeDash",BDt="opacity",BY=[P8,$Dt,MDt,LDt,FDt,jDt,BDt],aA={name:1,style:1,interactive:1},Pn={value:0},nl={value:1},a3="group",$Ae="rect",UY="rule",UDt="symbol",Gy="text";function AS(e){return e.type=a3,e.interactive=e.interactive||!1,e}function qa(e,t){const n=(r,i)=>Ml(e[r],Ml(t[r],i));return n.isVertical=r=>ADt===Ml(e.direction,t.direction||(r?t.symbolDirection:t.gradientDirection)),n.gradientLength=()=>Ml(e.gradientLength,t.gradientLength||t.gradientWidth),n.gradientThickness=()=>Ml(e.gradientThickness,t.gradientThickness||t.gradientHeight),n.entryColumns=()=>Ml(e.columns,Ml(t.columns,+n.isVertical(!0))),n}function MAe(e,t){const n=t&&(t.update&&t.update[e]||t.enter&&t.enter[e]);return n&&n.signal?n:n?n.value:null}function zDt(e,t,n){const r=t.config.style[n];return r&&r[e]}function u3(e,t,n){return`item.anchor === '${kDt}' ? ${e} : item.anchor === '${RDt}' ? ${t} : ${n}`}const zY=u3(et(iw),et(ow),et(OAe));function VDt(e){const t=e("tickBand");let n=e("tickOffset"),r,i;return t?t.signal?(r={signal:`(${t.signal}) === 'extent' ? 1 : 0.5`},i={signal:`(${t.signal}) === 'extent'`},ht(n)||(n={signal:`(${t.signal}) === 'extent' ? 0 : ${n}`})):t==="extent"?(r=1,i=!0,n=0):(r=.5,i=!1):(r=e("bandPosition"),i=e("tickExtra")),{extra:i,band:r,offset:n}}function LAe(e,t){return t?e?ht(e)?Object.assign({},e,{offset:LAe(e.offset,t)}):{value:e,offset:t}:t:e}function Cu(e,t){return t?(e.name=t.name,e.style=t.style||e.style,e.interactive=!!t.interactive,e.encode=rw(e.encode,t,aA)):e.interactive=!1,e}function HDt(e,t,n,r){const i=qa(e,n),o=i.isVertical(),s=i.gradientThickness(),a=i.gradientLength();let u,l,c,f,d;o?(l=[0,1],c=[0,0],f=s,d=a):(l=[0,0],c=[1,0],f=a,d=s);const h={enter:u={opacity:Pn,x:Pn,y:Pn,width:co(f),height:co(d)},update:tn({},u,{opacity:nl,fill:{gradient:t,start:l,stop:c}}),exit:{opacity:Pn}};return zo(h,{stroke:i("gradientStrokeColor"),strokeWidth:i("gradientStrokeWidth")},{opacity:i("gradientOpacity")}),Cu({type:$Ae,role:yPt,encode:h},r)}function qDt(e,t,n,r,i){const o=qa(e,n),s=o.isVertical(),a=o.gradientThickness(),u=o.gradientLength();let l,c,f,d,h="";s?(l="y",f="y2",c="x",d="width",h="1-"):(l="x",f="x2",c="y",d="height");const p={opacity:Pn,fill:{scale:t,field:tl}};p[l]={signal:h+"datum."+Vb,mult:u},p[c]=Pn,p[f]={signal:h+"datum."+PDt,mult:u},p[d]=co(a);const m={enter:p,update:tn({},p,{opacity:nl}),exit:{opacity:Pn}};return zo(m,{stroke:o("gradientStrokeColor"),strokeWidth:o("gradientStrokeWidth")},{opacity:o("gradientOpacity")}),Cu({type:$Ae,role:mPt,key:tl,from:i,encode:m},r)}const WDt=`datum.${Vb}<=0?"${iw}":datum.${Vb}>=1?"${ow}":"${OAe}"`,GDt=`datum.${Vb}<=0?"${Em}":datum.${Vb}>=1?"${_c}":"${IDt}"`;function dae(e,t,n,r){const i=qa(e,t),o=i.isVertical(),s=co(i.gradientThickness()),a=i.gradientLength();let u=i("labelOverlap"),l,c,f,d,h="";const p={enter:l={opacity:Pn},update:c={opacity:nl,text:{field:FY}},exit:{opacity:Pn}};return zo(p,{fill:i("labelColor"),fillOpacity:i("labelOpacity"),font:i("labelFont"),fontSize:i("labelFontSize"),fontStyle:i("labelFontStyle"),fontWeight:i("labelFontWeight"),limit:Ml(e.labelLimit,t.gradientLabelLimit)}),o?(l.align={value:"left"},l.baseline=c.baseline={signal:GDt},f="y",d="x",h="1-"):(l.align=c.align={signal:WDt},l.baseline={value:"top"},f="x",d="y"),l[f]=c[f]={signal:h+"datum."+Vb,mult:a},l[d]=c[d]=s,s.offset=Ml(e.labelOffset,t.gradientLabelOffset)||0,u=u?{separation:i("labelSeparation"),method:u,order:"datum."+R8}:void 0,Cu({type:Gy,role:vAe,style:sA,key:tl,from:r,encode:p,overlap:u},n)}function YDt(e,t,n,r,i){const o=qa(e,t),s=n.entries,a=!!(s&&s.interactive),u=s?s.name:void 0,l=o("clipHeight"),c=o("symbolOffset"),f={data:"value"},d=`(${i}) ? datum.${NDt} : datum.${P8}`,h=l?co(l):{field:P8},p=`datum.${R8}`,m=`max(1, ${i})`;let g,y,v,_,w;h.mult=.5,g={enter:y={opacity:Pn,x:{signal:d,mult:.5,offset:c},y:h},update:v={opacity:nl,x:y.x,y:y.y},exit:{opacity:Pn}};let E=null,S=null;e.fill||(E=t.symbolBaseFillColor,S=t.symbolBaseStrokeColor),zo(g,{fill:o("symbolFillColor",E),shape:o("symbolType"),size:o("symbolSize"),stroke:o("symbolStrokeColor",S),strokeDash:o("symbolDash"),strokeDashOffset:o("symbolDashOffset"),strokeWidth:o("symbolStrokeWidth")},{opacity:o("symbolOpacity")}),BY.forEach(R=>{e[R]&&(v[R]=y[R]={scale:e[R],field:tl})});const T=Cu({type:UDt,role:vPt,key:tl,from:f,clip:l?!0:void 0,encode:g},n.symbols),C=co(c);C.offset=o("labelOffset"),g={enter:y={opacity:Pn,x:{signal:d,offset:C},y:h},update:v={opacity:nl,text:{field:FY},x:y.x,y:y.y},exit:{opacity:Pn}},zo(g,{align:o("labelAlign"),baseline:o("labelBaseline"),fill:o("labelColor"),fillOpacity:o("labelOpacity"),font:o("labelFont"),fontSize:o("labelFontSize"),fontStyle:o("labelFontStyle"),fontWeight:o("labelFontWeight"),limit:o("labelLimit")});const A=Cu({type:Gy,role:vAe,style:sA,key:tl,from:f,encode:g},n.labels);return g={enter:{noBound:{value:!l},width:Pn,height:l?co(l):Pn,opacity:Pn},exit:{opacity:Pn},update:v={opacity:nl,row:{signal:null},column:{signal:null}}},o.isVertical(!0)?(_=`ceil(item.mark.items.length / ${m})`,v.row.signal=`${p}%${_}`,v.column.signal=`floor(${p} / ${_})`,w={field:["row",p]}):(v.row.signal=`floor(${p} / ${m})`,v.column.signal=`${p} % ${m}`,w={field:p}),v.column.signal=`(${i})?${v.column.signal}:${p}`,r={facet:{data:r,name:"value",groupby:R8}},AS({role:$Y,from:r,encode:rw(g,s,aA),marks:[T,A],name:u,interactive:a,sort:w})}function KDt(e,t){const n=qa(e,t);return{align:n("gridAlign"),columns:n.entryColumns(),center:{row:!0,column:!1},padding:{row:n("rowPadding"),column:n("columnPadding")}}}const VY='item.orient === "left"',HY='item.orient === "right"',l3=`(${VY} || ${HY})`,XDt=`datum.vgrad && ${l3}`,QDt=u3('"top"','"bottom"','"middle"'),JDt=u3('"right"','"left"','"center"'),ZDt=`datum.vgrad && ${HY} ? (${JDt}) : (${l3} && !(datum.vgrad && ${VY})) ? "left" : ${zY}`,eOt=`item._anchor || (${l3} ? "middle" : "start")`,tOt=`${XDt} ? (${VY} ? -90 : 90) : 0`,nOt=`${l3} ? (datum.vgrad ? (${HY} ? "bottom" : "top") : ${QDt}) : "top"`;function rOt(e,t,n,r){const i=qa(e,t),o={enter:{opacity:Pn},update:{opacity:nl,x:{field:{group:"padding"}},y:{field:{group:"padding"}}},exit:{opacity:Pn}};return zo(o,{orient:i("titleOrient"),_anchor:i("titleAnchor"),anchor:{signal:eOt},angle:{signal:tOt},align:{signal:ZDt},baseline:{signal:nOt},text:e.title,fill:i("titleColor"),fillOpacity:i("titleOpacity"),font:i("titleFont"),fontSize:i("titleFontSize"),fontStyle:i("titleFontStyle"),fontWeight:i("titleFontWeight"),limit:i("titleLimit"),lineHeight:i("titleLineHeight")},{align:i("titleAlign"),baseline:i("titleBaseline")}),Cu({type:Gy,role:bPt,style:jY,from:r,encode:o},n)}function iOt(e,t){let n;return ht(e)&&(e.signal?n=e.signal:e.path?n="pathShape("+hae(e.path)+")":e.sphere&&(n="geoShape("+hae(e.sphere)+', {type: "Sphere"})')),n?t.signalRef(n):!!e}function hae(e){return ht(e)&&e.signal?e.signal:et(e)}function FAe(e){const t=e.role||"";return t.startsWith("axis")||t.startsWith("legend")||t.startsWith("title")?t:e.type===a3?$Y:t||DY}function oOt(e){return{marktype:e.type,name:e.name||void 0,role:e.role||FAe(e),zindex:+e.zindex||void 0,aria:e.aria,description:e.description}}function sOt(e,t){return e&&e.signal?t.signalRef(e.signal):e!==!1}function qY(e,t){const n=xxe(e.type);n||De("Unrecognized transform type: "+et(e.type));const r=i3(n.type.toLowerCase(),null,jAe(n,e,t));return e.signal&&t.addSignal(e.signal,t.proxy(r)),r.metadata=n.metadata||{},r}function jAe(e,t,n){const r={},i=e.params.length;for(let o=0;o<i;++o){const s=e.params[o];r[s.name]=aOt(s,t,n)}return r}function aOt(e,t,n){const r=e.type,i=t[e.name];if(r==="index")return uOt(e,t,n);if(i===void 0){e.required&&De("Missing required "+et(t.type)+" parameter: "+et(e.name));return}else{if(r==="param")return lOt(e,t,n);if(r==="projection")return n.projectionRef(t[e.name])}return e.array&&!qi(i)?i.map(o=>pae(e,o,n)):pae(e,i,n)}function pae(e,t,n){const r=e.type;if(qi(t))return gae(r)?De("Expression references can not be signals."):T4(r)?n.fieldRef(t):yae(r)?n.compareRef(t):n.signalRef(t.signal);{const i=e.expr||T4(r);return i&&cOt(t)?n.exprRef(t.expr,t.as):i&&fOt(t)?SS(t.field,t.as):gae(r)?Af(t,n):dOt(r)?Pt(n.getData(t).values):T4(r)?SS(t):yae(r)?n.compareRef(t):t}}function uOt(e,t,n){return ft(t.from)||De('Lookup "from" parameter must be a string literal.'),n.getData(t.from).lookupRef(n,t.key)}function lOt(e,t,n){const r=t[e.name];return e.array?(Le(r)||De("Expected an array of sub-parameters. Instead: "+et(r)),r.map(i=>mae(e,i,n))):mae(e,r,n)}function mae(e,t,n){const r=e.params.length;let i;for(let s=0;s<r;++s){i=e.params[s];for(const a in i.key)if(i.key[a]!==t[a]){i=null;break}if(i)break}i||De("Unsupported parameter: "+et(t));const o=tn(jAe(i,t,n),i.key);return Pt(n.add(sDt(o)))}const cOt=e=>e&&e.expr,fOt=e=>e&&e.field,dOt=e=>e==="data",gae=e=>e==="expr",T4=e=>e==="field",yae=e=>e==="compare";function hOt(e,t,n){let r,i,o,s,a;return e?(r=e.facet)&&(t||De("Only group marks can be faceted."),r.field!=null?s=a=CI(r,n):(e.data?a=Pt(n.getData(e.data).aggregate):(o=qY(tn({type:"aggregate",groupby:ct(r.groupby)},r.aggregate),n),o.params.key=n.keyRef(r.groupby),o.params.pulse=CI(r,n),s=a=Pt(n.add(o))),i=n.keyRef(r.groupby,!0))):s=Pt(n.add(bc(null,[{}]))),s||(s=CI(e,n)),{key:i,pulse:s,parent:a}}function CI(e,t){return e.$ref?e:e.data&&e.data.$ref?e.data:Pt(t.getData(e.data).output)}function ny(e,t,n,r,i){this.scope=e,this.input=t,this.output=n,this.values=r,this.aggregate=i,this.index={}}ny.fromEntries=function(e,t){const n=t.length,r=t[n-1],i=t[n-2];let o=t[0],s=null,a=1;for(o&&o.type==="load"&&(o=t[1]),e.add(t[0]);a<n;++a)t[a].params.pulse=Pt(t[a-1]),e.add(t[a]),t[a].type==="aggregate"&&(s=t[a]);return new ny(e,o,i,r,s)};function BAe(e){return ft(e)?e:null}function vae(e,t,n){const r=o3(n.op,n.field);let i;if(t.ops){for(let o=0,s=t.as.length;o<s;++o)if(t.as[o]===r)return}else t.ops=["count"],t.fields=[null],t.as=["count"];n.op&&(t.ops.push((i=n.op.signal)?e.signalRef(i):n.op),t.fields.push(e.fieldRef(n.field)),t.as.push(r))}function oE(e,t,n,r,i,o,s){const a=t[n]||(t[n]={}),u=MPt(o);let l=BAe(i),c,f;if(l!=null&&(e=t.scope,l=l+(u?"|"+u:""),c=a[l]),!c){const d=o?{field:A8,pulse:t.countsRef(e,i,o)}:{field:e.fieldRef(i),pulse:Pt(t.output)};u&&(d.sort=e.sortRef(o)),f=e.add(i3(r,void 0,d)),s&&(t.index[i]=f),c=Pt(f),l!=null&&(a[l]=c)}return c}ny.prototype={countsRef(e,t,n){const r=this,i=r.counts||(r.counts={}),o=BAe(t);let s,a,u;return o!=null&&(e=r.scope,s=i[o]),s?n&&n.field&&vae(e,s.agg.params,n):(u={groupby:e.fieldRef(t,"key"),pulse:Pt(r.output)},n&&n.field&&vae(e,u,n),a=e.add(TAe(u)),s=e.add(bc({pulse:Pt(a)})),s={agg:a,ref:Pt(s)},o!=null&&(i[o]=s)),s.ref},tuplesRef(){return Pt(this.values)},extentRef(e,t){return oE(e,this,"extent","extent",t,!1)},domainRef(e,t){return oE(e,this,"domain","values",t,!1)},valuesRef(e,t,n){return oE(e,this,"vals","values",t,n||!0)},lookupRef(e,t){return oE(e,this,"lookup","tupleindex",t,!1)},indataRef(e,t){return oE(e,this,"indata","tupleindex",t,!0,!0)}};function pOt(e,t,n){const r=e.from.facet,i=r.name,o=CI(r,t);let s;r.name||De("Facet must have a name: "+et(r)),r.data||De("Facet must reference a data set: "+et(r)),r.field?s=t.add(AAe({field:t.fieldRef(r.field),pulse:o})):r.groupby?s=t.add(QPt({key:t.keyRef(r.groupby),group:Pt(t.proxy(n.parent)),pulse:o})):De("Facet must specify groupby or field: "+et(r));const a=t.fork(),u=a.add(bc()),l=a.add(Wy({pulse:Pt(u)}));a.addData(i,new ny(a,u,u,l)),a.addSignal("parent",null),s.params.subflow={$subflow:a.parse(e).toRuntime()}}function mOt(e,t,n){const r=t.add(AAe({pulse:n.pulse})),i=t.fork();i.add(Wy()),i.addSignal("parent",null),r.params.subflow={$subflow:i.parse(e).toRuntime()}}function UAe(e,t,n){const r=e.remove,i=e.insert,o=e.toggle,s=e.modify,a=e.values,u=t.add(TP()),l="if("+e.trigger+',modify("'+n+'",'+[i,r,o,s,a].map(f=>f??"null").join(",")+"),0)",c=Af(l,t);u.update=c.$expr,u.params=c.$params}function c3(e,t){const n=FAe(e),r=e.type===a3,i=e.from&&e.from.facet,o=e.overlap;let s=e.layout||n===$Y||n===OY,a,u,l,c,f,d,h;const p=n===DY||s||i,m=hOt(e.from,r,t);u=t.add(KPt({key:m.key||(e.key?SS(e.key):void 0),pulse:m.pulse,clean:!r}));const g=Pt(u);u=l=t.add(bc({pulse:g})),u=t.add(nDt({markdef:oOt(e),interactive:sOt(e.interactive,t),clip:iOt(e.clip,t),context:{$context:!0},groups:t.lookup(),parent:t.signals.parent?t.signalRef("parent"):null,index:t.markpath(),pulse:Pt(u)}));const y=Pt(u);u=c=t.add(CAe(EAe(e.encode,e.type,n,e.style,t,{mod:!1,pulse:y}))),u.params.parent=t.encode(),e.transform&&e.transform.forEach(S=>{const T=qY(S,t),C=T.metadata;(C.generates||C.changes)&&De("Mark transforms should not generate new data."),C.nomod||(c.params.mod=!0),T.params.pulse=Pt(u),t.add(u=T)}),e.sort&&(u=t.add(fDt({sort:t.compareRef(e.sort),pulse:Pt(u)})));const v=Pt(u);(i||s)&&(s=t.add(IAe({layout:t.objectProperty(e.layout),legends:t.legends,mark:y,pulse:v})),d=Pt(s));const _=t.add(SAe({mark:y,pulse:d||v}));h=Pt(_),r&&(p&&(a=t.operators,a.pop(),s&&a.pop()),t.pushState(v,d||h,g),i?pOt(e,t,m):p?mOt(e,t,m):t.parse(e),t.popState(),p&&(s&&a.push(s),a.push(_))),o&&(h=gOt(o,h,t));const w=t.add(kAe({pulse:h})),E=t.add(Wy({pulse:Pt(w)},void 0,t.parent()));e.name!=null&&(f=e.name,t.addData(f,new ny(t,l,w,E)),e.on&&e.on.forEach(S=>{(S.insert||S.remove||S.toggle)&&De("Marks only support modify triggers."),UAe(S,t,f)}))}function gOt(e,t,n){const r=e.method,i=e.bound,o=e.separation,s={separation:qi(o)?n.signalRef(o.signal):o,method:qi(r)?n.signalRef(r.signal):r,pulse:t};if(e.order&&(s.sort=n.compareRef({field:e.order})),i){const a=i.tolerance;s.boundTolerance=qi(a)?n.signalRef(a.signal):+a,s.boundScale=n.scaleRef(i.scale),s.boundOrient=i.orient}return Pt(n.add(oDt(s)))}function yOt(e,t){const n=t.config.legend,r=e.encode||{},i=qa(e,n),o=r.legend||{},s=o.name||void 0,a=o.interactive,u=o.style,l={};let c=0,f,d,h;BY.forEach(_=>e[_]?(l[_]=e[_],c=c||e[_]):0),c||De("Missing valid scale for legend.");const p=vOt(e,t.scaleType(c)),m={title:e.title!=null,scales:l,type:p,vgrad:p!=="symbol"&&i.isVertical()},g=Pt(t.add(bc(null,[m]))),y={enter:{x:{value:0},y:{value:0}}},v=Pt(t.add(eDt(d={type:p,scale:t.scaleRef(c),count:t.objectProperty(i("tickCount")),limit:t.property(i("symbolLimit")),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)})));return p===SI?(h=[HDt(e,c,n,r.gradient),dae(e,n,r.labels,v)],d.count=d.count||t.signalRef(`max(2,2*floor((${b0(i.gradientLength())})/100))`)):p===N8?h=[qDt(e,c,n,r.gradient,v),dae(e,n,r.labels,v)]:(f=KDt(e,n),h=[YDt(e,n,r,v,b0(f.columns))],d.size=wOt(e,t,h[0].marks)),h=[AS({role:gPt,from:g,encode:y,marks:h,layout:f,interactive:a})],m.title&&h.push(rOt(e,n,r.title,g)),c3(AS({role:pPt,from:g,encode:rw(_Ot(i,e,n),o,aA),marks:h,aria:i("aria"),description:i("description"),zindex:i("zindex"),name:s,interactive:a,style:u}),t)}function vOt(e,t){let n=e.type||fae;return!e.type&&bOt(e)===1&&(e.fill||e.stroke)&&(n=nG(t)?SI:W9(t)?N8:fae),n!==SI?n:W9(t)?N8:SI}function bOt(e){return BY.reduce((t,n)=>t+(e[n]?1:0),0)}function _Ot(e,t,n){const r={enter:{},update:{}};return zo(r,{orient:e("orient"),offset:e("offset"),padding:e("padding"),titlePadding:e("titlePadding"),cornerRadius:e("cornerRadius"),fill:e("fillColor"),stroke:e("strokeColor"),strokeWidth:n.strokeWidth,strokeDash:n.strokeDash,x:e("legendX"),y:e("legendY"),format:t.format,formatType:t.formatType}),r}function wOt(e,t,n){const r=b0(bae("size",e,n)),i=b0(bae("strokeWidth",e,n)),o=b0(EOt(n[1].encode,t,sA));return Af(`max(ceil(sqrt(${r})+${i}),${o})`,t)}function bae(e,t,n){return t[e]?`scale("${t[e]}",datum)`:MAe(e,n[0].encode)}function EOt(e,t,n){return MAe("fontSize",e)||zDt("fontSize",t,n)}const xOt=`item.orient==="${iw}"?-90:item.orient==="${ow}"?90:0`;function TOt(e,t){e=ft(e)?{text:e}:e;const n=qa(e,t.config.title),r=e.encode||{},i=r.group||{},o=i.name||void 0,s=i.interactive,a=i.style,u=[],l={},c=Pt(t.add(bc(null,[l])));return u.push(AOt(e,n,SOt(e),c)),e.subtitle&&u.push(kOt(e,n,r.subtitle,c)),c3(AS({role:_Pt,from:c,encode:COt(n,i),marks:u,aria:n("aria"),description:n("description"),zindex:n("zindex"),name:o,interactive:s,style:a}),t)}function SOt(e){const t=e.encode;return t&&t.title||tn({name:e.name,interactive:e.interactive,style:e.style},t)}function COt(e,t){const n={enter:{},update:{}};return zo(n,{orient:e("orient"),anchor:e("anchor"),align:{signal:zY},angle:{signal:xOt},limit:e("limit"),frame:e("frame"),offset:e("offset")||0,padding:e("subtitlePadding")}),rw(n,t,aA)}function AOt(e,t,n,r){const i={value:0},o=e.text,s={enter:{opacity:i},update:{opacity:{value:1}},exit:{opacity:i}};return zo(s,{text:o,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("color"),font:t("font"),fontSize:t("fontSize"),fontStyle:t("fontStyle"),fontWeight:t("fontWeight"),lineHeight:t("lineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),Cu({type:Gy,role:wPt,style:DDt,from:r,encode:s},n)}function kOt(e,t,n,r){const i={value:0},o=e.subtitle,s={enter:{opacity:i},update:{opacity:{value:1}},exit:{opacity:i}};return zo(s,{text:o,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("subtitleColor"),font:t("subtitleFont"),fontSize:t("subtitleFontSize"),fontStyle:t("subtitleFontStyle"),fontWeight:t("subtitleFontWeight"),lineHeight:t("subtitleLineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),Cu({type:Gy,role:EPt,style:ODt,from:r,encode:s},n)}function IOt(e,t){const n=[];e.transform&&e.transform.forEach(r=>{n.push(qY(r,t))}),e.on&&e.on.forEach(r=>{UAe(r,t,e.name)}),t.addDataPipeline(e.name,ROt(e,t,n))}function ROt(e,t,n){const r=[];let i=null,o=!1,s=!1,a,u,l,c,f;for(e.values?qi(e.values)||xI(e.format)?(r.push(_ae(t,e)),r.push(i=gg())):r.push(i=gg({$ingest:e.values,$format:e.format})):e.url?xI(e.url)||xI(e.format)?(r.push(_ae(t,e)),r.push(i=gg())):r.push(i=gg({$request:e.url,$format:e.format})):e.source&&(i=a=ct(e.source).map(d=>Pt(t.getData(d).output)),r.push(null)),u=0,l=n.length;u<l;++u)c=n[u],f=c.metadata,!i&&!f.source&&r.push(i=gg()),r.push(c),f.generates&&(s=!0),f.modifies&&!s&&(o=!0),f.source?i=c:f.changes&&(i=null);return a&&(l=a.length-1,r[0]=lDt({derive:o,pulse:l?a:a[0]}),(o||l)&&r.splice(1,0,gg())),i||r.push(gg()),r.push(Wy({})),r}function gg(e){const t=bc({},e);return t.metadata={source:!0},t}function _ae(e,t){return tDt({url:t.url?e.property(t.url):void 0,async:t.async?e.property(t.async):void 0,values:t.values?e.property(t.values):void 0,format:e.objectProperty(t.format)})}const zAe=e=>e===Em||e===_c,f3=(e,t,n)=>qi(e)?OOt(e.signal,t,n):e===iw||e===_c?t:n,fo=(e,t,n)=>qi(e)?POt(e.signal,t,n):zAe(e)?t:n,ic=(e,t,n)=>qi(e)?DOt(e.signal,t,n):zAe(e)?n:t,VAe=(e,t,n)=>qi(e)?$Ot(e.signal,t,n):e===_c?{value:t}:{value:n},NOt=(e,t,n)=>qi(e)?MOt(e.signal,t,n):e===ow?{value:t}:{value:n},POt=(e,t,n)=>HAe(`${e} === '${_c}' || ${e} === '${Em}'`,t,n),DOt=(e,t,n)=>HAe(`${e} !== '${_c}' && ${e} !== '${Em}'`,t,n),OOt=(e,t,n)=>WY(`${e} === '${iw}' || ${e} === '${_c}'`,t,n),$Ot=(e,t,n)=>WY(`${e} === '${_c}'`,t,n),MOt=(e,t,n)=>WY(`${e} === '${ow}'`,t,n),HAe=(e,t,n)=>(t=t!=null?co(t):t,n=n!=null?co(n):n,wae(t)&&wae(n)?(t=t?t.signal||et(t.value):null,n=n?n.signal||et(n.value):null,{signal:`${e} ? (${t}) : (${n})`}):[tn({test:e},t)].concat(n||[])),wae=e=>e==null||Object.keys(e).length===1,WY=(e,t,n)=>({signal:`${e} ? (${p1(t)}) : (${p1(n)})`}),LOt=(e,t,n,r,i)=>({signal:(r!=null?`${e} === '${iw}' ? (${p1(r)}) : `:"")+(n!=null?`${e} === '${Em}' ? (${p1(n)}) : `:"")+(i!=null?`${e} === '${ow}' ? (${p1(i)}) : `:"")+(t!=null?`${e} === '${_c}' ? (${p1(t)}) : `:"")+"(null)"}),p1=e=>qi(e)?e.signal:e==null?null:et(e),FOt=(e,t)=>t===0?0:qi(e)?{signal:`(${e.signal}) * ${t}`}:{value:e*t},V1=(e,t)=>{const n=e.signal;return n&&n.endsWith("(null)")?{signal:n.slice(0,-6)+t.signal}:e};function Iv(e,t,n,r){let i;if(t&&$t(t,e))return t[e];if($t(n,e))return n[e];if(e.startsWith("title")){switch(e){case"titleColor":i="fill";break;case"titleFont":case"titleFontSize":case"titleFontWeight":i=e[5].toLowerCase()+e.slice(6)}return r[jY][i]}else if(e.startsWith("label")){switch(e){case"labelColor":i="fill";break;case"labelFont":case"labelFontSize":i=e[5].toLowerCase()+e.slice(6)}return r[sA][i]}return null}function Eae(e){const t={};for(const n of e)if(n)for(const r in n)t[r]=1;return Object.keys(t)}function jOt(e,t){var n=t.config,r=n.style,i=n.axis,o=t.scaleType(e.scale)==="band"&&n.axisBand,s=e.orient,a,u,l;if(qi(s)){const f=Eae([n.axisX,n.axisY]),d=Eae([n.axisTop,n.axisBottom,n.axisLeft,n.axisRight]);a={};for(l of f)a[l]=fo(s,Iv(l,n.axisX,i,r),Iv(l,n.axisY,i,r));u={};for(l of d)u[l]=LOt(s.signal,Iv(l,n.axisTop,i,r),Iv(l,n.axisBottom,i,r),Iv(l,n.axisLeft,i,r),Iv(l,n.axisRight,i,r))}else a=s===_c||s===Em?n.axisX:n.axisY,u=n["axis"+s[0].toUpperCase()+s.slice(1)];return a||u||o?tn({},i,a,u,o):i}function BOt(e,t,n,r){const i=qa(e,t),o=e.orient;let s,a;const u={enter:s={opacity:Pn},update:a={opacity:nl},exit:{opacity:Pn}};zo(u,{stroke:i("domainColor"),strokeCap:i("domainCap"),strokeDash:i("domainDash"),strokeDashOffset:i("domainDashOffset"),strokeWidth:i("domainWidth"),strokeOpacity:i("domainOpacity")});const l=xae(e,0),c=xae(e,1);return s.x=a.x=fo(o,l,Pn),s.x2=a.x2=fo(o,c),s.y=a.y=ic(o,l,Pn),s.y2=a.y2=ic(o,c),Cu({type:UY,role:lPt,from:r,encode:u},n)}function xae(e,t){return{scale:e.scale,range:t}}function UOt(e,t,n,r,i){const o=qa(e,t),s=e.orient,a=e.gridScale,u=f3(s,1,-1),l=zOt(e.offset,u);let c,f,d;const h={enter:c={opacity:Pn},update:d={opacity:nl},exit:f={opacity:Pn}};zo(h,{stroke:o("gridColor"),strokeCap:o("gridCap"),strokeDash:o("gridDash"),strokeDashOffset:o("gridDashOffset"),strokeOpacity:o("gridOpacity"),strokeWidth:o("gridWidth")});const p={scale:e.scale,field:tl,band:i.band,extra:i.extra,offset:i.offset,round:o("tickRound")},m=fo(s,{signal:"height"},{signal:"width"}),g=a?{scale:a,range:0,mult:u,offset:l}:{value:0,offset:l},y=a?{scale:a,range:1,mult:u,offset:l}:tn(m,{mult:u,offset:l});return c.x=d.x=fo(s,p,g),c.y=d.y=ic(s,p,g),c.x2=d.x2=ic(s,y),c.y2=d.y2=fo(s,y),f.x=fo(s,p),f.y=ic(s,p),Cu({type:UY,role:cPt,key:tl,from:r,encode:h},n)}function zOt(e,t){if(t!==1)if(!ht(e))e=qi(t)?{signal:`(${t.signal}) * (${e||0})`}:t*(e||0);else{let n=e=tn({},e);for(;n.mult!=null;)if(ht(n.mult))n=n.mult=tn({},n.mult);else return n.mult=qi(t)?{signal:`(${n.mult}) * (${t.signal})`}:n.mult*t,e;n.mult=t}return e}function VOt(e,t,n,r,i,o){const s=qa(e,t),a=e.orient,u=f3(a,-1,1);let l,c,f;const d={enter:l={opacity:Pn},update:f={opacity:nl},exit:c={opacity:Pn}};zo(d,{stroke:s("tickColor"),strokeCap:s("tickCap"),strokeDash:s("tickDash"),strokeDashOffset:s("tickDashOffset"),strokeOpacity:s("tickOpacity"),strokeWidth:s("tickWidth")});const h=co(i);h.mult=u;const p={scale:e.scale,field:tl,band:o.band,extra:o.extra,offset:o.offset,round:s("tickRound")};return f.y=l.y=fo(a,Pn,p),f.y2=l.y2=fo(a,h),c.x=fo(a,p),f.x=l.x=ic(a,Pn,p),f.x2=l.x2=ic(a,h),c.y=ic(a,p),Cu({type:UY,role:dPt,key:tl,from:r,encode:d},n)}function S4(e,t,n,r,i){return{signal:'flush(range("'+e+'"), scale("'+e+'", datum.value), '+t+","+n+","+r+","+i+")"}}function HOt(e,t,n,r,i,o){const s=qa(e,t),a=e.orient,u=e.scale,l=f3(a,-1,1),c=b0(s("labelFlush")),f=b0(s("labelFlushOffset")),d=s("labelAlign"),h=s("labelBaseline");let p=c===0||!!c,m;const g=co(i);g.mult=l,g.offset=co(s("labelPadding")||0),g.offset.mult=l;const y={scale:u,field:tl,band:.5,offset:LAe(o.offset,s("labelOffset"))},v=fo(a,p?S4(u,c,'"left"','"right"','"center"'):{value:"center"},NOt(a,"left","right")),_=fo(a,VAe(a,"bottom","top"),p?S4(u,c,'"top"','"bottom"','"middle"'):{value:"middle"}),w=S4(u,c,`-(${f})`,f,0);p=p&&f;const E={opacity:Pn,x:fo(a,y,g),y:ic(a,y,g)},S={enter:E,update:m={opacity:nl,text:{field:FY},x:E.x,y:E.y,align:v,baseline:_},exit:{opacity:Pn,x:E.x,y:E.y}};zo(S,{dx:!d&&p?fo(a,w):null,dy:!h&&p?ic(a,w):null}),zo(S,{angle:s("labelAngle"),fill:s("labelColor"),fillOpacity:s("labelOpacity"),font:s("labelFont"),fontSize:s("labelFontSize"),fontWeight:s("labelFontWeight"),fontStyle:s("labelFontStyle"),limit:s("labelLimit"),lineHeight:s("labelLineHeight")},{align:d,baseline:h});const T=s("labelBound");let C=s("labelOverlap");return C=C||T?{separation:s("labelSeparation"),method:C,order:"datum.index",bound:T?{scale:u,orient:a,tolerance:T}:null}:void 0,m.align!==v&&(m.align=V1(m.align,v)),m.baseline!==_&&(m.baseline=V1(m.baseline,_)),Cu({type:Gy,role:fPt,style:sA,key:tl,from:r,encode:S,overlap:C},n)}function qOt(e,t,n,r){const i=qa(e,t),o=e.orient,s=f3(o,-1,1);let a,u;const l={enter:a={opacity:Pn,anchor:co(i("titleAnchor",null)),align:{signal:zY}},update:u=tn({},a,{opacity:nl,text:co(e.title)}),exit:{opacity:Pn}},c={signal:`lerp(range("${e.scale}"), ${u3(0,1,.5)})`};return u.x=fo(o,c),u.y=ic(o,c),a.angle=fo(o,Pn,FOt(s,90)),a.baseline=fo(o,VAe(o,Em,_c),{value:Em}),u.angle=a.angle,u.baseline=a.baseline,zo(l,{fill:i("titleColor"),fillOpacity:i("titleOpacity"),font:i("titleFont"),fontSize:i("titleFontSize"),fontStyle:i("titleFontStyle"),fontWeight:i("titleFontWeight"),limit:i("titleLimit"),lineHeight:i("titleLineHeight")},{align:i("titleAlign"),angle:i("titleAngle"),baseline:i("titleBaseline")}),WOt(i,o,l,n),l.update.align=V1(l.update.align,a.align),l.update.angle=V1(l.update.angle,a.angle),l.update.baseline=V1(l.update.baseline,a.baseline),Cu({type:Gy,role:hPt,style:jY,from:r,encode:l},n)}function WOt(e,t,n,r){const i=(a,u)=>a!=null?(n.update[u]=V1(co(a),n.update[u]),!1):!qv(u,r),o=i(e("titleX"),"x"),s=i(e("titleY"),"y");n.enter.auto=s===o?co(s):fo(t,co(s),co(o))}function GOt(e,t){const n=jOt(e,t),r=e.encode||{},i=r.axis||{},o=i.name||void 0,s=i.interactive,a=i.style,u=qa(e,n),l=VDt(u),c={scale:e.scale,ticks:!!u("ticks"),labels:!!u("labels"),grid:!!u("grid"),domain:!!u("domain"),title:e.title!=null},f=Pt(t.add(bc({},[c]))),d=Pt(t.add(YPt({scale:t.scaleRef(e.scale),extra:t.property(l.extra),count:t.objectProperty(e.tickCount),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)}))),h=[];let p;return c.grid&&h.push(UOt(e,n,r.grid,d,l)),c.ticks&&(p=u("tickSize"),h.push(VOt(e,n,r.ticks,d,p,l))),c.labels&&(p=c.ticks?p:0,h.push(HOt(e,n,r.labels,d,p,l))),c.domain&&h.push(BOt(e,n,r.domain,f)),c.title&&h.push(qOt(e,n,r.title,f)),c3(AS({role:uPt,from:f,encode:rw(YOt(u,e),i,aA),marks:h,aria:u("aria"),description:u("description"),zindex:u("zindex"),name:o,interactive:s,style:a}),t)}function YOt(e,t){const n={enter:{},update:{}};return zo(n,{orient:e("orient"),offset:e("offset")||0,position:Ml(t.position,0),titlePadding:e("titlePadding"),minExtent:e("minExtent"),maxExtent:e("maxExtent"),range:{signal:`abs(span(range("${t.scale}")))`},translate:e("translate"),format:t.format,formatType:t.formatType}),n}function qAe(e,t,n){const r=ct(e.signals),i=ct(e.scales);return n||r.forEach(o=>xAe(o,t)),ct(e.projections).forEach(o=>CDt(o,t)),i.forEach(o=>pDt(o,t)),ct(e.data).forEach(o=>IOt(o,t)),i.forEach(o=>mDt(o,t)),(n||r).forEach(o=>GPt(o,t)),ct(e.axes).forEach(o=>GOt(o,t)),ct(e.marks).forEach(o=>c3(o,t)),ct(e.legends).forEach(o=>yOt(o,t)),e.title&&TOt(e.title,t),t.parseLambdas(),t}const KOt=e=>rw({enter:{x:{value:0},y:{value:0}},update:{width:{signal:"width"},height:{signal:"height"}}},e);function XOt(e,t){const n=t.config,r=Pt(t.root=t.add(TP())),i=QOt(e,n);i.forEach(l=>xAe(l,t)),t.description=e.description||n.description,t.eventConfig=n.events,t.legends=t.objectProperty(n.legend&&n.legend.layout),t.locale=n.locale;const o=t.add(bc()),s=t.add(CAe(EAe(KOt(e.encode),a3,OY,e.style,t,{pulse:Pt(o)}))),a=t.add(IAe({layout:t.objectProperty(e.layout),legends:t.legends,autosize:t.signalRef("autosize"),mark:r,pulse:Pt(s)}));t.operators.pop(),t.pushState(Pt(s),Pt(a),null),qAe(e,t,i),t.operators.push(a);let u=t.add(SAe({mark:r,pulse:Pt(a)}));return u=t.add(kAe({pulse:Pt(u)})),u=t.add(Wy({pulse:Pt(u)})),t.addData("root",new ny(t,o,o,u)),t}function sE(e,t){return t&&t.signal?{name:e,update:t.signal}:{name:e,value:t}}function QOt(e,t){const n=s=>Ml(e[s],t[s]),r=[sE("background",n("background")),sE("autosize",oPt(n("autosize"))),sE("padding",aPt(n("padding"))),sE("width",n("width")||0),sE("height",n("height")||0)],i=r.reduce((s,a)=>(s[a.name]=a,s),{}),o={};return ct(e.signals).forEach(s=>{$t(i,s.name)?s=tn(i[s.name],s):r.push(s),o[s.name]=s}),ct(t.signals).forEach(s=>{!$t(o,s.name)&&!$t(i,s.name)&&r.push(s)}),r}function WAe(e,t){this.config=e||{},this.options=t||{},this.bindings=[],this.field={},this.signals={},this.lambdas={},this.scales={},this.events={},this.data={},this.streams=[],this.updates=[],this.operators=[],this.eventConfig=null,this.locale=null,this._id=0,this._subid=0,this._nextsub=[0],this._parent=[],this._encode=[],this._lookup=[],this._markpath=[]}function Tae(e){this.config=e.config,this.options=e.options,this.legends=e.legends,this.field=Object.create(e.field),this.signals=Object.create(e.signals),this.lambdas=Object.create(e.lambdas),this.scales=Object.create(e.scales),this.events=Object.create(e.events),this.data=Object.create(e.data),this.streams=[],this.updates=[],this.operators=[],this._id=0,this._subid=++e._nextsub[0],this._nextsub=e._nextsub,this._parent=e._parent.slice(),this._encode=e._encode.slice(),this._lookup=e._lookup.slice(),this._markpath=e._markpath}WAe.prototype=Tae.prototype={parse(e){return qAe(e,this)},fork(){return new Tae(this)},isSubscope(){return this._subid>0},toRuntime(){return this.finish(),{description:this.description,operators:this.operators,streams:this.streams,updates:this.updates,bindings:this.bindings,eventConfig:this.eventConfig,locale:this.locale}},id(){return(this._subid?this._subid+":":0)+this._id++},add(e){return this.operators.push(e),e.id=this.id(),e.refs&&(e.refs.forEach(t=>{t.$ref=e.id}),e.refs=null),e},proxy(e){const t=e instanceof C8?Pt(e):e;return this.add(uDt({value:t}))},addStream(e){return this.streams.push(e),e.id=this.id(),e},addUpdate(e){return this.updates.push(e),e},finish(){let e,t;this.root&&(this.root.root=!0);for(e in this.signals)this.signals[e].signal=e;for(e in this.scales)this.scales[e].scale=e;function n(r,i,o){let s,a;r&&(s=r.data||(r.data={}),a=s[i]||(s[i]=[]),a.push(o))}for(e in this.data){t=this.data[e],n(t.input,e,"input"),n(t.output,e,"output"),n(t.values,e,"values");for(const r in t.index)n(t.index[r],e,"index:"+r)}return this},pushState(e,t,n){this._encode.push(Pt(this.add(Wy({pulse:e})))),this._parent.push(t),this._lookup.push(n?Pt(this.proxy(n)):null),this._markpath.push(-1)},popState(){this._encode.pop(),this._parent.pop(),this._lookup.pop(),this._markpath.pop()},parent(){return In(this._parent)},encode(){return In(this._encode)},lookup(){return In(this._lookup)},markpath(){const e=this._markpath;return++e[e.length-1]},fieldRef(e,t){if(ft(e))return SS(e,t);e.signal||De("Unsupported field reference: "+et(e));const n=e.signal;let r=this.field[n];if(!r){const i={name:this.signalRef(n)};t&&(i.as=t),this.field[n]=r=Pt(this.add(JPt(i)))}return r},compareRef(e){let t=!1;const n=o=>qi(o)?(t=!0,this.signalRef(o.signal)):LPt(o)?(t=!0,this.exprRef(o.expr)):o,r=ct(e.field).map(n),i=ct(e.order).map(n);return t?Pt(this.add(cae({fields:r,orders:i}))):uae(r,i)},keyRef(e,t){let n=!1;const r=o=>qi(o)?(n=!0,Pt(i[o.signal])):o,i=this.signals;return e=ct(e).map(r),n?Pt(this.add(ZPt({fields:e,flat:t}))):DPt(e,t)},sortRef(e){if(!e)return e;const t=o3(e.op,e.field),n=e.order||OPt;return n.signal?Pt(this.add(cae({fields:t,orders:this.signalRef(n.signal)}))):uae(t,n)},event(e,t){const n=e+":"+t;if(!this.events[n]){const r=this.id();this.streams.push({id:r,source:e,type:t}),this.events[n]=r}return this.events[n]},hasOwnSignal(e){return $t(this.signals,e)},addSignal(e,t){this.hasOwnSignal(e)&&De("Duplicate signal name: "+et(e));const n=t instanceof C8?t:this.add(TP(t));return this.signals[e]=n},getSignal(e){return this.signals[e]||De("Unrecognized signal name: "+et(e)),this.signals[e]},signalRef(e){return this.signals[e]?Pt(this.signals[e]):($t(this.lambdas,e)||(this.lambdas[e]=this.add(TP(null))),Pt(this.lambdas[e]))},parseLambdas(){const e=Object.keys(this.lambdas);for(let t=0,n=e.length;t<n;++t){const r=e[t],i=Af(r,this),o=this.lambdas[r];o.params=i.$params,o.update=i.$expr}},property(e){return e&&e.signal?this.signalRef(e.signal):e},objectProperty(e){return!e||!ht(e)?e:this.signalRef(e.signal||GY(e))},exprRef(e,t){const n={expr:Af(e,this)};return t&&(n.expr.$name=t),Pt(this.add(XPt(n)))},addBinding(e,t){this.bindings||De("Nested signals do not support binding: "+et(e)),this.bindings.push(tn({signal:e},t))},addScaleProj(e,t){$t(this.scales,e)&&De("Duplicate scale or projection name: "+et(e)),this.scales[e]=this.add(t)},addScale(e,t){this.addScaleProj(e,cDt(t))},addProjection(e,t){this.addScaleProj(e,aDt(t))},getScale(e){return this.scales[e]||De("Unrecognized scale name: "+et(e)),this.scales[e]},scaleRef(e){return Pt(this.getScale(e))},scaleType(e){return this.getScale(e).params.type},projectionRef(e){return this.scaleRef(e)},projectionType(e){return this.scaleType(e)},addData(e,t){return $t(this.data,e)&&De("Duplicate data set name: "+et(e)),this.data[e]=t},getData(e){return this.data[e]||De("Undefined data set name: "+et(e)),this.data[e]},addDataPipeline(e,t){return $t(this.data,e)&&De("Duplicate data set name: "+et(e)),this.addData(e,ny.fromEntries(this,t))}};function GY(e){return(Le(e)?JOt:ZOt)(e)}function JOt(e){const t=e.length;let n="[";for(let r=0;r<t;++r){const i=e[r];n+=(r>0?",":"")+(ht(i)?i.signal||GY(i):et(i))}return n+"]"}function ZOt(e){let t="{",n=0,r,i;for(r in e)i=e[r],t+=(++n>1?",":"")+et(r)+":"+(ht(i)?i.signal||GY(i):et(i));return t+"}"}function e$t(){const e="sans-serif",r="#4c78a8",i="#000",o="#888",s="#ddd";return{description:"Vega visualization",padding:0,autosize:"pad",background:null,events:{defaults:{allow:["wheel"]}},group:null,mark:null,arc:{fill:r},area:{fill:r},image:null,line:{stroke:r,strokeWidth:2},path:{stroke:r},rect:{fill:r},rule:{stroke:i},shape:{stroke:r},symbol:{fill:r,size:64},text:{fill:i,font:e,fontSize:11},trail:{fill:r,size:2},style:{"guide-label":{fill:i,font:e,fontSize:10},"guide-title":{fill:i,font:e,fontSize:11,fontWeight:"bold"},"group-title":{fill:i,font:e,fontSize:13,fontWeight:"bold"},"group-subtitle":{fill:i,font:e,fontSize:12},point:{size:30,strokeWidth:2,shape:"circle"},circle:{size:30,strokeWidth:2},square:{size:30,strokeWidth:2,shape:"square"},cell:{fill:"transparent",stroke:s},view:{fill:"transparent"}},title:{orient:"top",anchor:"middle",offset:4,subtitlePadding:3},axis:{minExtent:0,maxExtent:200,bandPosition:.5,domain:!0,domainWidth:1,domainColor:o,grid:!1,gridWidth:1,gridColor:s,labels:!0,labelAngle:0,labelLimit:180,labelOffset:0,labelPadding:2,ticks:!0,tickColor:o,tickOffset:0,tickRound:!0,tickSize:5,tickWidth:1,titlePadding:4},axisBand:{tickOffset:-.5},projection:{type:"mercator"},legend:{orient:"right",padding:0,gridAlign:"each",columnPadding:10,rowPadding:2,symbolDirection:"vertical",gradientDirection:"vertical",gradientLength:200,gradientThickness:16,gradientStrokeColor:s,gradientStrokeWidth:0,gradientLabelOffset:2,labelAlign:"left",labelBaseline:"middle",labelLimit:160,labelOffset:4,labelOverlap:!0,symbolLimit:30,symbolType:"circle",symbolSize:100,symbolOffset:0,symbolStrokeWidth:1.5,symbolBaseFillColor:"transparent",symbolBaseStrokeColor:o,titleLimit:180,titleOrient:"top",titlePadding:5,layout:{offset:18,direction:"horizontal",left:{direction:"vertical"},right:{direction:"vertical"}}},range:{category:{scheme:"tableau10"},ordinal:{scheme:"blues"},heatmap:{scheme:"yellowgreenblue"},ramp:{scheme:"blues"},diverging:{scheme:"blueorange",extent:[1,0]},symbol:["circle","square","triangle-up","cross","diamond","triangle-right","triangle-down","triangle-left"]}}}function t$t(e,t,n){return ht(e)||De("Input Vega specification must be an object."),t=K_(e$t(),t,e.config),XOt(e,new WAe(t,n)).toRuntime()}var n$t="5.29.0";tn($b,txt,VCt,wAt,JAt,o2t,P2t,f2t,O2t,F2t,Y2t,tkt);const r$t=Object.freeze(Object.defineProperty({__proto__:null,Bounds:Di,CanvasHandler:tA,CanvasRenderer:dP,DATE:Ba,DAY:cs,DAYOFYEAR:Cf,Dataflow:z1,Debug:yEe,Error:Uq,EventStream:A$,Gradient:OTe,GroupItem:B$,HOURS:xu,Handler:AG,HybridHandler:SSe,HybridRenderer:r8,Info:gEe,Item:j$,MILLISECONDS:fc,MINUTES:Tu,MONTH:ms,Marks:Su,MultiPulse:aW,None:mEe,Operator:gr,Parameters:C$,Pulse:Gp,QUARTER:ja,RenderType:Ep,Renderer:eA,ResourceLoader:UTe,SECONDS:cl,SVGHandler:dSe,SVGRenderer:DG,SVGStringRenderer:TSe,Scenegraph:iSe,TIME_UNITS:Zq,Transform:ke,View:cAe,WEEK:Ui,Warn:zq,YEAR:Fo,accessor:Ha,accessorFields:ps,accessorName:ci,array:ct,ascending:_$,bandwidthNRD:fW,bin:Cxe,bootstrapCI:Axe,boundClip:$Se,boundContext:XC,boundItem:J9,boundMark:eSe,boundStroke:Ah,changeset:Vy,clampRange:kEe,codegenExpression:LCe,compare:Gq,constant:ws,cumulativeLogNormal:yW,cumulativeNormal:I$,cumulativeUniform:wW,dayofyear:BEe,debounce:Yq,defaultLocale:nW,definition:xxe,densityLogNormal:gW,densityNormal:dW,densityUniform:_W,domChild:ji,domClear:Wu,domCreate:_p,domFind:CG,dotbin:kxe,error:De,expressionFunction:Ti,extend:tn,extent:Sf,extentIndex:IEe,falsy:qh,fastmap:Q_,field:ul,flush:REe,font:q$,fontFamily:ZC,fontSize:qf,format:aI,formatLocale:ZN,formats:oW,hasOwnProperty:$t,id:FC,identity:_s,inferType:dxe,inferTypes:hxe,ingest:Xn,inherits:at,inrange:f1,interpolate:rG,interpolateColors:L$,interpolateRange:_Te,intersect:NSe,intersectBoxLine:d1,intersectPath:fG,intersectPoint:dG,intersectRule:VTe,isArray:Le,isBoolean:Km,isDate:Wp,isFunction:nn,isIterable:NEe,isNumber:jn,isObject:ht,isRegExp:PEe,isString:ft,isTuple:T$,key:Kq,lerp:DEe,lineHeight:bm,loader:E$,locale:cxe,logger:Vq,lruCache:OEe,markup:PG,merge:$Ee,mergeConfig:K_,multiLineOffset:xG,one:Y_,pad:MEe,panLinear:EEe,panLog:xEe,panPow:TEe,panSymlog:SEe,parse:t$t,parseExpression:_Y,parseSelector:Qm,path:pO,pathCurves:uG,pathEqual:MSe,pathParse:jb,pathRectangle:LTe,pathRender:yS,pathSymbols:MTe,pathTrail:FTe,peek:In,point:G$,projection:qG,quantileLogNormal:vW,quantileNormal:R$,quantileUniform:EW,quantiles:lW,quantizeInterpolator:wTe,quarter:CEe,quartiles:cW,get random(){return fl},randomInteger:oEt,randomKDE:pW,randomLCG:iEt,randomLogNormal:Rxe,randomMixture:Nxe,randomNormal:hW,randomUniform:Pxe,read:gxe,regressionConstant:xW,regressionExp:Oxe,regressionLinear:TW,regressionLoess:Lxe,regressionLog:Dxe,regressionPoly:Mxe,regressionPow:$xe,regressionQuad:SW,renderModule:Y$,repeat:zE,resetDefaultLocale:twt,resetSVGClipId:BTe,resetSVGDefIds:aCt,responseType:mxe,runtimeContext:QCe,sampleCurve:P$,sampleLogNormal:mW,sampleNormal:k$,sampleUniform:bW,scale:Hn,sceneEqual:OG,sceneFromJSON:nSe,scenePickVisit:iP,sceneToJSON:tSe,sceneVisit:dc,sceneZOrder:hG,scheme:iG,serializeXML:_Se,setHybridRendererOptions:rCt,setRandom:nEt,span:jC,splitAccessPath:Hf,stringValue:et,textMetrics:fu,timeBin:rxe,timeFloor:GEe,timeFormatLocale:pS,timeInterval:J_,timeOffset:XEe,timeSequence:ZEe,timeUnitSpecifier:jEe,timeUnits:eW,toBoolean:Xq,toDate:Qq,toNumber:fs,toSet:cc,toString:Jq,transform:Txe,transforms:$b,truncate:LEe,truthy:ll,tupleid:Dt,typeParsers:V9,utcFloor:YEe,utcInterval:Z_,utcOffset:QEe,utcSequence:exe,utcdayofyear:VEe,utcquarter:AEe,utcweek:HEe,version:n$t,visitArray:Jh,week:UEe,writeConfig:X_,zero:fp,zoomLinear:Hq,zoomLog:qq,zoomPow:JN,zoomSymlog:Wq},Symbol.toStringTag,{value:"Module"}));function i$t(e,t,n){let r;t.x2&&(t.x?(n&&e.x>e.x2&&(r=e.x,e.x=e.x2,e.x2=r),e.width=e.x2-e.x):e.x=e.x2-(e.width||0)),t.xc&&(e.x=e.xc-(e.width||0)/2),t.y2&&(t.y?(n&&e.y>e.y2&&(r=e.y,e.y=e.y2,e.y2=r),e.height=e.y2-e.y):e.y=e.y2-(e.height||0)),t.yc&&(e.y=e.yc-(e.height||0)/2)}var o$t={NaN:NaN,E:Math.E,LN2:Math.LN2,LN10:Math.LN10,LOG2E:Math.LOG2E,LOG10E:Math.LOG10E,PI:Math.PI,SQRT1_2:Math.SQRT1_2,SQRT2:Math.SQRT2,MIN_VALUE:Number.MIN_VALUE,MAX_VALUE:Number.MAX_VALUE},s$t={"*":(e,t)=>e*t,"+":(e,t)=>e+t,"-":(e,t)=>e-t,"/":(e,t)=>e/t,"%":(e,t)=>e%t,">":(e,t)=>e>t,"<":(e,t)=>e<t,"<=":(e,t)=>e<=t,">=":(e,t)=>e>=t,"==":(e,t)=>e==t,"!=":(e,t)=>e!=t,"===":(e,t)=>e===t,"!==":(e,t)=>e!==t,"&":(e,t)=>e&t,"|":(e,t)=>e|t,"^":(e,t)=>e^t,"<<":(e,t)=>e<<t,">>":(e,t)=>e>>t,">>>":(e,t)=>e>>>t},a$t={"+":e=>+e,"-":e=>-e,"~":e=>~e,"!":e=>!e};const u$t=Array.prototype.slice,yg=(e,t,n)=>{const r=n?n(t[0]):t[0];return r[e].apply(r,u$t.call(t,1))},l$t=(e,t,n,r,i,o,s)=>new Date(e,t||0,n??1,r||0,i||0,o||0,s||0);var c$t={isNaN:Number.isNaN,isFinite:Number.isFinite,abs:Math.abs,acos:Math.acos,asin:Math.asin,atan:Math.atan,atan2:Math.atan2,ceil:Math.ceil,cos:Math.cos,exp:Math.exp,floor:Math.floor,log:Math.log,max:Math.max,min:Math.min,pow:Math.pow,random:Math.random,round:Math.round,sin:Math.sin,sqrt:Math.sqrt,tan:Math.tan,clamp:(e,t,n)=>Math.max(t,Math.min(n,e)),now:Date.now,utc:Date.UTC,datetime:l$t,date:e=>new Date(e).getDate(),day:e=>new Date(e).getDay(),year:e=>new Date(e).getFullYear(),month:e=>new Date(e).getMonth(),hours:e=>new Date(e).getHours(),minutes:e=>new Date(e).getMinutes(),seconds:e=>new Date(e).getSeconds(),milliseconds:e=>new Date(e).getMilliseconds(),time:e=>new Date(e).getTime(),timezoneoffset:e=>new Date(e).getTimezoneOffset(),utcdate:e=>new Date(e).getUTCDate(),utcday:e=>new Date(e).getUTCDay(),utcyear:e=>new Date(e).getUTCFullYear(),utcmonth:e=>new Date(e).getUTCMonth(),utchours:e=>new Date(e).getUTCHours(),utcminutes:e=>new Date(e).getUTCMinutes(),utcseconds:e=>new Date(e).getUTCSeconds(),utcmilliseconds:e=>new Date(e).getUTCMilliseconds(),length:e=>e.length,join:function(){return yg("join",arguments)},indexof:function(){return yg("indexOf",arguments)},lastindexof:function(){return yg("lastIndexOf",arguments)},slice:function(){return yg("slice",arguments)},reverse:e=>e.slice().reverse(),parseFloat,parseInt,upper:e=>String(e).toUpperCase(),lower:e=>String(e).toLowerCase(),substring:function(){return yg("substring",arguments,String)},split:function(){return yg("split",arguments,String)},replace:function(){return yg("replace",arguments,String)},trim:e=>String(e).trim(),regexp:RegExp,test:(e,t)=>RegExp(e).test(t)};const f$t=["view","item","group","xy","x","y"],D8=new Set([Function,eval,setTimeout,setInterval]);typeof setImmediate=="function"&&D8.add(setImmediate);const d$t={Literal:(e,t)=>t.value,Identifier:(e,t)=>{const n=t.name;return e.memberDepth>0?n:n==="datum"?e.datum:n==="event"?e.event:n==="item"?e.item:o$t[n]||e.params["$"+n]},MemberExpression:(e,t)=>{const n=!t.computed,r=e(t.object);n&&(e.memberDepth+=1);const i=e(t.property);if(n&&(e.memberDepth-=1),D8.has(r[i])){console.error(`Prevented interpretation of member "${i}" which could lead to insecure code execution`);return}return r[i]},CallExpression:(e,t)=>{const n=t.arguments;let r=t.callee.name;return r.startsWith("_")&&(r=r.slice(1)),r==="if"?e(n[0])?e(n[1]):e(n[2]):(e.fn[r]||c$t[r]).apply(e.fn,n.map(e))},ArrayExpression:(e,t)=>t.elements.map(e),BinaryExpression:(e,t)=>s$t[t.operator](e(t.left),e(t.right)),UnaryExpression:(e,t)=>a$t[t.operator](e(t.argument)),ConditionalExpression:(e,t)=>e(t.test)?e(t.consequent):e(t.alternate),LogicalExpression:(e,t)=>t.operator==="&&"?e(t.left)&&e(t.right):e(t.left)||e(t.right),ObjectExpression:(e,t)=>t.properties.reduce((n,r)=>{e.memberDepth+=1;const i=e(r.key);return e.memberDepth-=1,D8.has(e(r.value))?console.error(`Prevented interpretation of property "${i}" which could lead to insecure code execution`):n[i]=e(r.value),n},{})};function aE(e,t,n,r,i,o){const s=a=>d$t[a.type](s,a);return s.memberDepth=0,s.fn=Object.create(t),s.params=n,s.datum=r,s.event=i,s.item=o,f$t.forEach(a=>s.fn[a]=function(){return i.vega[a](...arguments)}),s(e)}var h$t={operator(e,t){const n=t.ast,r=e.functions;return i=>aE(n,r,i)},parameter(e,t){const n=t.ast,r=e.functions;return(i,o)=>aE(n,r,o,i)},event(e,t){const n=t.ast,r=e.functions;return i=>aE(n,r,void 0,void 0,i)},handler(e,t){const n=t.ast,r=e.functions;return(i,o)=>{const s=o.item&&o.item.datum;return aE(n,r,i,s,o)}},encode(e,t){const{marktype:n,channels:r}=t,i=e.functions,o=n==="group"||n==="image"||n==="rect";return(s,a)=>{const u=s.datum;let l=0,c;for(const f in r)c=aE(r[f].ast,i,a,u,void 0,s),s[f]!==c&&(s[f]=c,l=1);return n!=="rule"&&i$t(s,r,o),l}}};const p$t="vega-lite",m$t='Dominik Moritz, Kanit "Ham" Wongsuphasawat, Arvind Satyanarayan, Jeffrey Heer',g$t="5.18.1",y$t=["Kanit Wongsuphasawat (http://kanitw.yellowpigz.com)","Dominik Moritz (https://www.domoritz.de)","Arvind Satyanarayan (https://arvindsatya.com)","Jeffrey Heer (https://jheer.org)"],v$t="https://vega.github.io/vega-lite/",b$t="Vega-Lite is a concise high-level language for interactive visualization.",_$t=["vega","chart","visualization"],w$t="build/vega-lite.js",E$t="build/vega-lite.min.js",x$t="build/vega-lite.min.js",T$t="build/src/index",S$t="build/src/index.d.ts",C$t={vl2pdf:"./bin/vl2pdf",vl2png:"./bin/vl2png",vl2svg:"./bin/vl2svg",vl2vg:"./bin/vl2vg"},A$t=["bin","build","src","vega-lite*","tsconfig.json"],k$t={changelog:"conventional-changelog -p angular -r 2",prebuild:"yarn clean:build",build:"yarn build:only","build:only":"tsc -p tsconfig.build.json && rollup -c","prebuild:examples":"yarn build:only","build:examples":"yarn data && TZ=America/Los_Angeles scripts/build-examples.sh","prebuild:examples-full":"yarn build:only","build:examples-full":"TZ=America/Los_Angeles scripts/build-examples.sh 1","build:example":"TZ=America/Los_Angeles scripts/build-example.sh","build:toc":"yarn build:jekyll && scripts/generate-toc","build:site":"rollup -c site/rollup.config.mjs","build:jekyll":"pushd site && bundle exec jekyll build -q && popd","build:versions":"scripts/update-version.sh",clean:"yarn clean:build && del-cli 'site/data/*' 'examples/compiled/*.png' && find site/examples ! -name 'index.md' ! -name 'data' -type f -delete","clean:build":"del-cli 'build/*' !build/vega-lite-schema.json",data:"rsync -r node_modules/vega-datasets/data/* site/data","build-editor-preview":"scripts/build-editor-preview.sh",schema:"mkdir -p build && ts-json-schema-generator -f tsconfig.json -p src/index.ts -t TopLevelSpec --no-type-check --no-ref-encode > build/vega-lite-schema.json && yarn renameschema && cp build/vega-lite-schema.json site/_data/",renameschema:"scripts/rename-schema.sh",presite:"yarn data && yarn schema && yarn build:site && yarn build:versions && scripts/create-example-pages.sh",site:"yarn site:only","site:only":"pushd site && bundle exec jekyll serve -I -l && popd",prettierbase:"prettier '**/*.{md,css,yml}'",format:"eslint . --fix && yarn prettierbase --write",lint:"eslint . && yarn prettierbase --check",test:"yarn jest test/ && yarn lint && yarn schema && yarn jest examples/ && yarn test:runtime","test:cover":"yarn jest --collectCoverage test/","test:inspect":"node --inspect-brk ./node_modules/.bin/jest --runInBand test","test:runtime":"TZ=America/Los_Angeles npx jest test-runtime/ --config test-runtime/jest-config.json","test:runtime:generate":"yarn build:only && del-cli test-runtime/resources && VL_GENERATE_TESTS=true yarn test:runtime",watch:"tsc -p tsconfig.build.json -w","watch:site":"yarn build:site -w","watch:test":"yarn jest --watch test/","watch:test:runtime":"TZ=America/Los_Angeles npx jest --watch test-runtime/ --config test-runtime/jest-config.json",release:"release-it"},I$t={type:"git",url:"https://github.com/vega/vega-lite.git"},R$t="BSD-3-Clause",N$t={url:"https://github.com/vega/vega-lite/issues"},P$t={"@babel/core":"^7.24.5","@babel/preset-env":"^7.24.5","@babel/preset-typescript":"^7.24.1","@release-it/conventional-changelog":"^8.0.1","@rollup/plugin-alias":"^5.1.0","@rollup/plugin-babel":"^6.0.4","@rollup/plugin-commonjs":"^25.0.7","@rollup/plugin-json":"^6.1.0","@rollup/plugin-node-resolve":"^15.2.3","@rollup/plugin-terser":"^0.4.4","@types/d3":"^7.4.3","@types/jest":"^29.5.12","@types/pako":"^2.0.3","@typescript-eslint/eslint-plugin":"^7.8.0","@typescript-eslint/parser":"^7.8.0",ajv:"^8.13.0","ajv-formats":"^2.1.1",cheerio:"^1.0.0-rc.12","conventional-changelog-cli":"^4.1.0",d3:"^7.9.0","del-cli":"^5.1.0",eslint:"^8.57.0","eslint-config-prettier":"^9.1.0","eslint-plugin-jest":"^27.9.0","eslint-plugin-prettier":"^5.1.3","fast-json-stable-stringify":"~2.1.0","highlight.js":"^11.9.0",jest:"^29.7.0","jest-dev-server":"^10.0.0",mkdirp:"^3.0.1",pako:"^2.1.0",prettier:"^3.2.5",puppeteer:"^15.0.0","release-it":"^17.2.1",rollup:"^4.17.2","rollup-plugin-bundle-size":"^1.0.3",serve:"^14.2.3",terser:"^5.31.0","ts-jest":"^29.1.2","ts-json-schema-generator":"^1.5.0",typescript:"~5.4.5","vega-cli":"^5.28.0","vega-datasets":"^2.8.1","vega-embed":"^6.25.0","vega-tooltip":"^0.34.0","yaml-front-matter":"^4.1.1"},D$t={"json-stringify-pretty-compact":"~3.0.0",tslib:"~2.6.2","vega-event-selector":"~3.0.1","vega-expression":"~5.1.0","vega-util":"~1.17.2",yargs:"~17.7.2"},O$t={vega:"^5.24.0"},$$t={node:">=18"},M$t="yarn@1.22.19",L$t={name:p$t,author:m$t,version:g$t,collaborators:y$t,homepage:v$t,description:b$t,keywords:_$t,main:w$t,unpkg:E$t,jsdelivr:x$t,module:T$t,types:S$t,bin:C$t,files:A$t,scripts:k$t,repository:I$t,license:R$t,bugs:N$t,devDependencies:P$t,dependencies:D$t,peerDependencies:O$t,engines:$$t,packageManager:M$t};function YY(e){return!!e.or}function KY(e){return!!e.and}function XY(e){return!!e.not}function AI(e,t){if(XY(e))AI(e.not,t);else if(KY(e))for(const n of e.and)AI(n,t);else if(YY(e))for(const n of e.or)AI(n,t);else t(e)}function H1(e,t){return XY(e)?{not:H1(e.not,t)}:KY(e)?{and:e.and.map(n=>H1(n,t))}:YY(e)?{or:e.or.map(n=>H1(n,t))}:t(e)}const Vt=structuredClone;function GAe(e){throw new Error(e)}function Hb(e,t){const n={};for(const r of t)$t(e,r)&&(n[r]=e[r]);return n}function Oa(e,t){const n={...e};for(const r of t)delete n[r];return n}Set.prototype.toJSON=function(){return`Set(${[...this].map(e=>lr(e)).join(",")})`};function Tn(e){if(jn(e))return e;const t=ft(e)?e:lr(e);if(t.length<250)return t;let n=0;for(let r=0;r<t.length;r++){const i=t.charCodeAt(r);n=(n<<5)-n+i,n=n&n}return n}function O8(e){return e===!1||e===null}function Sn(e,t){return e.includes(t)}function ry(e,t){let n=0;for(const[r,i]of e.entries())if(t(i,r,n++))return!0;return!1}function QY(e,t){let n=0;for(const[r,i]of e.entries())if(!t(i,r,n++))return!1;return!0}function YAe(e,...t){for(const n of t)F$t(e,n??{});return e}function F$t(e,t){for(const n of We(t))X_(e,n,t[n],!0)}function Zc(e,t){const n=[],r={};let i;for(const o of e)i=t(o),!(i in r)&&(r[i]=1,n.push(o));return n}function j$t(e,t){const n=We(e),r=We(t);if(n.length!==r.length)return!1;for(const i of n)if(e[i]!==t[i])return!1;return!0}function KAe(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}function JY(e,t){for(const n of e)if(t.has(n))return!0;return!1}function $8(e){const t=new Set;for(const n of e){const i=Hf(n).map((s,a)=>a===0?s:`[${s}]`),o=i.map((s,a)=>i.slice(0,a+1).join(""));for(const s of o)t.add(s)}return t}function ZY(e,t){return e===void 0||t===void 0?!0:JY($8(e),$8(t))}function ur(e){return We(e).length===0}const We=Object.keys,jo=Object.values,xm=Object.entries;function kS(e){return e===!0||e===!1}function Vr(e){const t=e.replace(/\W/g,"_");return(e.match(/^\d+/)?"_":"")+t}function Jx(e,t){return XY(e)?`!(${Jx(e.not,t)})`:KY(e)?`(${e.and.map(n=>Jx(n,t)).join(") && (")})`:YY(e)?`(${e.or.map(n=>Jx(n,t)).join(") || (")})`:t(e)}function SP(e,t){if(t.length===0)return!0;const n=t.shift();return n in e&&SP(e[n],t)&&delete e[n],ur(e)}function uA(e){return e.charAt(0).toUpperCase()+e.substr(1)}function eK(e,t="datum"){const n=Hf(e),r=[];for(let i=1;i<=n.length;i++){const o=`[${n.slice(0,i).map(et).join("][")}]`;r.push(`${t}${o}`)}return r.join(" && ")}function XAe(e,t="datum"){return`${t}[${et(Hf(e).join("."))}]`}function B$t(e){return e.replace(/(\[|\]|\.|'|")/g,"\\$1")}function dl(e){return`${Hf(e).map(B$t).join("\\.")}`}function iy(e,t,n){return e.replace(new RegExp(t.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"),"g"),n)}function sw(e){return`${Hf(e).join(".")}`}function qb(e){return e?Hf(e).length:0}function Ei(...e){for(const t of e)if(t!==void 0)return t}let QAe=42;function JAe(e){const t=++QAe;return e?String(e)+t:t}function U$t(){QAe=42}function ZAe(e){return e2e(e)?e:`__${e}`}function e2e(e){return e.startsWith("__")}function IS(e){if(e!==void 0)return(e%360+360)%360}function d3(e){return jn(e)?!0:!isNaN(e)&&!isNaN(parseFloat(e))}const Sae=Object.getPrototypeOf(structuredClone({}));function uu(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor.name!==t.constructor.name)return!1;let n,r;if(Array.isArray(e)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(!uu(e[r],t[r]))return!1;return!0}if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(r of e.entries())if(!t.has(r[0]))return!1;for(r of e.entries())if(!uu(r[1],t.get(r[0])))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(r of e.entries())if(!t.has(r[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(e[r]!==t[r])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf&&e.valueOf!==Sae.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString&&e.toString!==Sae.toString)return e.toString()===t.toString();const i=Object.keys(e);if(n=i.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!Object.prototype.hasOwnProperty.call(t,i[r]))return!1;for(r=n;r--!==0;){const o=i[r];if(!uu(e[o],t[o]))return!1}return!0}return e!==e&&t!==t}function lr(e){const t=[];return function n(r){if(r&&r.toJSON&&typeof r.toJSON=="function"&&(r=r.toJSON()),r===void 0)return;if(typeof r=="number")return isFinite(r)?""+r:"null";if(typeof r!="object")return JSON.stringify(r);let i,o;if(Array.isArray(r)){for(o="[",i=0;i<r.length;i++)i&&(o+=","),o+=n(r[i])||"null";return o+"]"}if(r===null)return"null";if(t.includes(r))throw new TypeError("Converting circular structure to JSON");const s=t.push(r)-1,a=Object.keys(r).sort();for(o="",i=0;i<a.length;i++){const u=a[i],l=n(r[u]);l&&(o&&(o+=","),o+=JSON.stringify(u)+":"+l)}return t.splice(s,1),`{${o}}`}(e)}const Vd="row",Hd="column",h3="facet",Hr="x",vo="y",wc="x2",Yf="y2",Jm="xOffset",aw="yOffset",Ec="radius",Ih="radius2",wl="theta",Rh="theta2",xc="latitude",Tc="longitude",Sc="latitude2",hl="longitude2",Ua="color",Kf="fill",Xf="stroke",za="shape",Nh="size",Yy="angle",Ph="opacity",Zm="fillOpacity",eg="strokeOpacity",tg="strokeWidth",ng="strokeDash",lA="text",Wb="order",cA="detail",p3="key",oy="tooltip",m3="href",g3="url",y3="description",z$t={x:1,y:1,x2:1,y2:1},t2e={theta:1,theta2:1,radius:1,radius2:1};function n2e(e){return e in t2e}const tK={longitude:1,longitude2:1,latitude:1,latitude2:1};function r2e(e){switch(e){case xc:return"y";case Sc:return"y2";case Tc:return"x";case hl:return"x2"}}function i2e(e){return e in tK}const V$t=We(tK),nK={...z$t,...t2e,...tK,xOffset:1,yOffset:1,color:1,fill:1,stroke:1,opacity:1,fillOpacity:1,strokeOpacity:1,strokeWidth:1,strokeDash:1,size:1,angle:1,shape:1,order:1,text:1,detail:1,key:1,tooltip:1,href:1,url:1,description:1};function q1(e){return e===Ua||e===Kf||e===Xf}const o2e={row:1,column:1,facet:1},Zu=We(o2e),rK={...nK,...o2e},H$t=We(rK),{order:iUt,detail:oUt,tooltip:sUt,...q$t}=rK,{row:aUt,column:uUt,facet:lUt,...W$t}=q$t;function G$t(e){return!!W$t[e]}function s2e(e){return!!rK[e]}const Y$t=[wc,Yf,Sc,hl,Rh,Ih];function a2e(e){return Ky(e)!==e}function Ky(e){switch(e){case wc:return Hr;case Yf:return vo;case Sc:return xc;case hl:return Tc;case Rh:return wl;case Ih:return Ec}return e}function Tm(e){if(n2e(e))switch(e){case wl:return"startAngle";case Rh:return"endAngle";case Ec:return"outerRadius";case Ih:return"innerRadius"}return e}function Qf(e){switch(e){case Hr:return wc;case vo:return Yf;case xc:return Sc;case Tc:return hl;case wl:return Rh;case Ec:return Ih}}function Va(e){switch(e){case Hr:case wc:return"width";case vo:case Yf:return"height"}}function u2e(e){switch(e){case Hr:return"xOffset";case vo:return"yOffset";case wc:return"x2Offset";case Yf:return"y2Offset";case wl:return"thetaOffset";case Ec:return"radiusOffset";case Rh:return"theta2Offset";case Ih:return"radius2Offset"}}function iK(e){switch(e){case Hr:return"xOffset";case vo:return"yOffset"}}function K$t(e){switch(e){case"xOffset":return"x";case"yOffset":return"y"}}const X$t=We(nK),{x:cUt,y:fUt,x2:dUt,y2:hUt,xOffset:pUt,yOffset:mUt,latitude:gUt,longitude:yUt,latitude2:vUt,longitude2:bUt,theta:_Ut,theta2:wUt,radius:EUt,radius2:xUt,...oK}=nK,Q$t=We(oK),sK={x:1,y:1},Jf=We(sK);function xi(e){return e in sK}const aK={theta:1,radius:1},J$t=We(aK);function v3(e){return e==="width"?Hr:vo}const l2e={xOffset:1,yOffset:1};function fA(e){return e in l2e}const{text:TUt,tooltip:SUt,href:CUt,url:AUt,description:kUt,detail:IUt,key:RUt,order:NUt,...c2e}=oK,Z$t=We(c2e);function e3t(e){return!!oK[e]}function t3t(e){switch(e){case Ua:case Kf:case Xf:case Nh:case za:case Ph:case tg:case ng:return!0;case Zm:case eg:case Yy:return!1}}const f2e={...sK,...aK,...l2e,...c2e},b3=We(f2e);function Dh(e){return!!f2e[e]}function n3t(e,t){return i3t(e)[t]}const d2e={arc:"always",area:"always",bar:"always",circle:"always",geoshape:"always",image:"always",line:"always",rule:"always",point:"always",rect:"always",square:"always",trail:"always",text:"always",tick:"always"},{geoshape:PUt,...r3t}=d2e;function i3t(e){switch(e){case Ua:case Kf:case Xf:case y3:case cA:case p3:case oy:case m3:case Wb:case Ph:case Zm:case eg:case tg:case h3:case Vd:case Hd:return d2e;case Hr:case vo:case Jm:case aw:case xc:case Tc:return r3t;case wc:case Yf:case Sc:case hl:return{area:"always",bar:"always",image:"always",rect:"always",rule:"always",circle:"binned",point:"binned",square:"binned",tick:"binned",line:"binned",trail:"binned"};case Nh:return{point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",text:"always",line:"always",trail:"always"};case ng:return{line:"always",point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",geoshape:"always"};case za:return{point:"always",geoshape:"always"};case lA:return{text:"always"};case Yy:return{point:"always",square:"always",text:"always"};case g3:return{image:"always"};case wl:return{text:"always",arc:"always"};case Ec:return{text:"always",arc:"always"};case Rh:case Ih:return{arc:"always"}}}function C4(e){switch(e){case Hr:case vo:case wl:case Ec:case Jm:case aw:case Nh:case Yy:case tg:case Ph:case Zm:case eg:case wc:case Yf:case Rh:case Ih:return;case h3:case Vd:case Hd:case za:case ng:case lA:case oy:case m3:case g3:case y3:return"discrete";case Ua:case Kf:case Xf:return"flexible";case xc:case Tc:case Sc:case hl:case cA:case p3:case Wb:return}}const o3t={argmax:1,argmin:1,average:1,count:1,distinct:1,exponential:1,exponentialb:1,product:1,max:1,mean:1,median:1,min:1,missing:1,q1:1,q3:1,ci0:1,ci1:1,stderr:1,stdev:1,stdevp:1,sum:1,valid:1,values:1,variance:1,variancep:1},s3t={count:1,min:1,max:1};function hh(e){return!!e&&!!e.argmin}function rg(e){return!!e&&!!e.argmax}function uK(e){return ft(e)&&!!o3t[e]}const a3t=new Set(["count","valid","missing","distinct"]);function h2e(e){return ft(e)&&a3t.has(e)}function u3t(e){return ft(e)&&Sn(["min","max"],e)}const l3t=new Set(["count","sum","distinct","valid","missing"]),c3t=new Set(["mean","average","median","q1","q3","min","max"]);function p2e(e){return Km(e)&&(e=N3(e,void 0)),"bin"+We(e).map(t=>_3(e[t])?Vr(`_${t}_${xm(e[t])}`):Vr(`_${t}_${e[t]}`)).join("")}function Cr(e){return e===!0||Xy(e)&&!e.binned}function Io(e){return e==="binned"||Xy(e)&&e.binned===!0}function Xy(e){return ht(e)}function _3(e){return e==null?void 0:e.param}function Cae(e){switch(e){case Vd:case Hd:case Nh:case Ua:case Kf:case Xf:case tg:case Ph:case Zm:case eg:case za:return 6;case ng:return 4;default:return 10}}function dA(e){return!!(e!=null&&e.expr)}function ga(e){const t=We(e||{}),n={};for(const r of t)n[r]=eu(e[r]);return n}function m2e(e){const{anchor:t,frame:n,offset:r,orient:i,angle:o,limit:s,color:a,subtitleColor:u,subtitleFont:l,subtitleFontSize:c,subtitleFontStyle:f,subtitleFontWeight:d,subtitleLineHeight:h,subtitlePadding:p,...m}=e,g={...m,...a?{fill:a}:{}},y={...t?{anchor:t}:{},...n?{frame:n}:{},...r?{offset:r}:{},...i?{orient:i}:{},...o!==void 0?{angle:o}:{},...s!==void 0?{limit:s}:{}},v={...u?{subtitleColor:u}:{},...l?{subtitleFont:l}:{},...c?{subtitleFontSize:c}:{},...f?{subtitleFontStyle:f}:{},...d?{subtitleFontWeight:d}:{},...h?{subtitleLineHeight:h}:{},...p?{subtitlePadding:p}:{}},_=Hb(e,["align","baseline","dx","dy","limit"]);return{titleMarkConfig:g,subtitleMarkConfig:_,nonMarkTitleProperties:y,subtitle:v}}function tp(e){return ft(e)||Le(e)&&ft(e[0])}function At(e){return!!(e!=null&&e.signal)}function ig(e){return!!e.step}function f3t(e){return Le(e)?!1:"fields"in e&&!("data"in e)}function d3t(e){return Le(e)?!1:"fields"in e&&"data"in e}function Dd(e){return Le(e)?!1:"field"in e&&"data"in e}const h3t={aria:1,description:1,ariaRole:1,ariaRoleDescription:1,blend:1,opacity:1,fill:1,fillOpacity:1,stroke:1,strokeCap:1,strokeWidth:1,strokeOpacity:1,strokeDash:1,strokeDashOffset:1,strokeJoin:1,strokeOffset:1,strokeMiterLimit:1,startAngle:1,endAngle:1,padAngle:1,innerRadius:1,outerRadius:1,size:1,shape:1,interpolate:1,tension:1,orient:1,align:1,baseline:1,text:1,dir:1,dx:1,dy:1,ellipsis:1,limit:1,radius:1,theta:1,angle:1,font:1,fontSize:1,fontWeight:1,fontStyle:1,lineBreak:1,lineHeight:1,cursor:1,href:1,tooltip:1,cornerRadius:1,cornerRadiusTopLeft:1,cornerRadiusTopRight:1,cornerRadiusBottomLeft:1,cornerRadiusBottomRight:1,aspect:1,width:1,height:1,url:1,smooth:1},p3t=We(h3t),m3t={arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1},M8=["cornerRadius","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight"];function g2e(e){const t=Le(e.condition)?e.condition.map(Aae):Aae(e.condition);return{...eu(e),condition:t}}function eu(e){if(dA(e)){const{expr:t,...n}=e;return{signal:t,...n}}return e}function Aae(e){if(dA(e)){const{expr:t,...n}=e;return{signal:t,...n}}return e}function Pr(e){if(dA(e)){const{expr:t,...n}=e;return{signal:t,...n}}return At(e)?e:e!==void 0?{value:e}:void 0}function g3t(e){return At(e)?e.signal:et(e)}function kae(e){return At(e)?e.signal:et(e.value)}function Kl(e){return At(e)?e.signal:e==null?null:et(e)}function y3t(e,t,n){for(const r of n){const i=ph(r,t.markDef,t.config);i!==void 0&&(e[r]=Pr(i))}return e}function y2e(e){return[].concat(e.type,e.style??[])}function Kn(e,t,n,r={}){const{vgChannel:i,ignoreVgConfig:o}=r;return i&&t[i]!==void 0?t[i]:t[e]!==void 0?t[e]:o&&(!i||i===e)?void 0:ph(e,t,n,r)}function ph(e,t,n,{vgChannel:r}={}){return Ei(r?CP(e,t,n.style):void 0,CP(e,t,n.style),r?n[t.type][r]:void 0,n[t.type][e],r?n.mark[r]:n.mark[e])}function CP(e,t,n){return v2e(e,y2e(t),n)}function v2e(e,t,n){t=ct(t);let r;for(const i of t){const o=n[i];o&&o[e]!==void 0&&(r=o[e])}return r}function b2e(e,t){return ct(e).reduce((n,r)=>(n.field.push(ot(r,t)),n.order.push(r.sort??"ascending"),n),{field:[],order:[]})}function _2e(e,t){const n=[...e];return t.forEach(r=>{for(const i of n)if(uu(i,r))return;n.push(r)}),n}function w2e(e,t){return uu(e,t)||!t?e:e?[...ct(e),...ct(t)].join(", "):t}function E2e(e,t){const n=e.value,r=t.value;if(n==null||r===null)return{explicit:e.explicit,value:null};if((tp(n)||At(n))&&(tp(r)||At(r)))return{explicit:e.explicit,value:w2e(n,r)};if(tp(n)||At(n))return{explicit:e.explicit,value:n};if(tp(r)||At(r))return{explicit:e.explicit,value:r};if(!tp(n)&&!At(n)&&!tp(r)&&!At(r))return{explicit:e.explicit,value:_2e(n,r)};throw new Error("It should never reach here")}function lK(e){return`Invalid specification ${lr(e)}. Make sure the specification includes at least one of the following properties: "mark", "layer", "facet", "hconcat", "vconcat", "concat", or "repeat".`}const v3t='Autosize "fit" only works for single views and layered views.';function Iae(e){return`${e=="width"?"Width":"Height"} "container" only works for single views and layered views.`}function Rae(e){const t=e=="width"?"Width":"Height",n=e=="width"?"x":"y";return`${t} "container" only works well with autosize "fit" or "fit-${n}".`}function Nae(e){return e?`Dropping "fit-${e}" because spec has discrete ${Va(e)}.`:'Dropping "fit" because spec has discrete size.'}function cK(e){return`Unknown field for ${e}. Cannot calculate view size.`}function Pae(e){return`Cannot project a selection on encoding channel "${e}", which has no field.`}function b3t(e,t){return`Cannot project a selection on encoding channel "${e}" as it uses an aggregate function ("${t}").`}function _3t(e){return`The "nearest" transform is not supported for ${e} marks.`}function x2e(e){return`Selection not supported for ${e} yet.`}function w3t(e){return`Cannot find a selection named "${e}".`}const E3t="Scale bindings are currently only supported for scales with unbinned, continuous domains.",x3t="Sequntial scales are deprecated. The available quantitative scale type values are linear, log, pow, sqrt, symlog, time and utc",T3t="Legend bindings are only supported for selections over an individual field or encoding channel.";function S3t(e){return`Lookups can only be performed on selection parameters. "${e}" is a variable parameter.`}function C3t(e){return`Cannot define and lookup the "${e}" selection in the same view. Try moving the lookup into a second, layered view?`}const A3t="The same selection must be used to override scale domains in a layered view.",k3t='Interval selections should be initialized using "x", "y", "longitude", or "latitude" keys.';function I3t(e){return`Unknown repeated value "${e}".`}function Dae(e){return`The "columns" property cannot be used when "${e}" has nested row/column.`}const R3t="Axes cannot be shared in concatenated or repeated views yet (https://github.com/vega/vega-lite/issues/2415).";function N3t(e){return`Unrecognized parse "${e}".`}function Oae(e,t,n){return`An ancestor parsed field "${e}" as ${n} but a child wants to parse the field as ${t}.`}const P3t="Attempt to add the same child twice.";function D3t(e){return`Ignoring an invalid transform: ${lr(e)}.`}const O3t='If "from.fields" is not specified, "as" has to be a string that specifies the key to be used for the data from the secondary source.';function $ae(e){return`Config.customFormatTypes is not true, thus custom format type and format for channel ${e} are dropped.`}function $3t(e){const{parentProjection:t,projection:n}=e;return`Layer's shared projection ${lr(t)} is overridden by a child projection ${lr(n)}.`}const M3t="Arc marks uses theta channel rather than angle, replacing angle with theta.";function L3t(e){return`${e}Offset dropped because ${e} is continuous`}function F3t(e,t,n){return`Channel ${e} is a ${t}. Converted to {value: ${lr(n)}}.`}function T2e(e){return`Invalid field type "${e}".`}function j3t(e,t){return`Invalid field type "${e}" for aggregate: "${t}", using "quantitative" instead.`}function B3t(e){return`Invalid aggregation operator "${e}".`}function S2e(e,t){const{fill:n,stroke:r}=t;return`Dropping color ${e} as the plot also has ${n&&r?"fill and stroke":n?"fill":"stroke"}.`}function U3t(e){return`Position range does not support relative band size for ${e}.`}function L8(e,t){return`Dropping ${lr(e)} from channel "${t}" since it does not contain any data field, datum, value, or signal.`}const z3t="Line marks cannot encode size with a non-groupby field. You may want to use trail marks instead.";function w3(e,t,n){return`${e} dropped as it is incompatible with "${t}".`}function V3t(e){return`${e}-encoding is dropped as ${e} is not a valid encoding channel.`}function H3t(e){return`${e} encoding should be discrete (ordinal / nominal / binned).`}function q3t(e){return`${e} encoding should be discrete (ordinal / nominal / binned) or use a discretizing scale (e.g. threshold).`}function W3t(e){return`Facet encoding dropped as ${e.join(" and ")} ${e.length>1?"are":"is"} also specified.`}function A4(e,t){return`Using discrete channel "${e}" to encode "${t}" field can be misleading as it does not encode ${t==="ordinal"?"order":"magnitude"}.`}function G3t(e){return`The ${e} for range marks cannot be an expression`}function Y3t(e,t){return`Line mark is for continuous lines and thus cannot be used with ${e&&t?"x2 and y2":e?"x2":"y2"}. We will use the rule mark (line segments) instead.`}function K3t(e,t){return`Specified orient "${e}" overridden with "${t}".`}function X3t(e){return`Cannot use the scale property "${e}" with non-color channel.`}function Q3t(e){return`Cannot use the relative band size with ${e} scale.`}function J3t(e){return`Using unaggregated domain with raw field has no effect (${lr(e)}).`}function Z3t(e){return`Unaggregated domain not applicable for "${e}" since it produces values outside the origin domain of the source data.`}function eMt(e){return`Unaggregated domain is currently unsupported for log scale (${lr(e)}).`}function tMt(e){return`Cannot apply size to non-oriented mark "${e}".`}function nMt(e,t,n){return`Channel "${e}" does not work with "${t}" scale. We are using "${n}" scale instead.`}function rMt(e,t){return`FieldDef does not work with "${e}" scale. We are using "${t}" scale instead.`}function C2e(e,t,n){return`${n}-scale's "${t}" is dropped as it does not work with ${e} scale.`}function A2e(e){return`The step for "${e}" is dropped because the ${e==="width"?"x":"y"} is continuous.`}function iMt(e,t,n,r){return`Conflicting ${t.toString()} property "${e.toString()}" (${lr(n)} and ${lr(r)}). Using ${lr(n)}.`}function oMt(e,t,n,r){return`Conflicting ${t.toString()} property "${e.toString()}" (${lr(n)} and ${lr(r)}). Using the union of the two domains.`}function sMt(e){return`Setting the scale to be independent for "${e}" means we also have to set the guide (axis or legend) to be independent.`}function aMt(e){return`Dropping sort property ${lr(e)} as unioned domains only support boolean or op "count", "min", and "max".`}const Mae="Domains that should be unioned has conflicting sort properties. Sort will be set to true.",uMt="Detected faceted independent scales that union domain of multiple fields from different data sources. We will use the first field. The result view size may be incorrect.",lMt="Detected faceted independent scales that union domain of the same fields from different source. We will assume that this is the same field from a different fork of the same data source. However, if this is not the case, the result view size may be incorrect.",cMt="Detected faceted independent scales that union domain of multiple fields from the same data source. We will use the first field. The result view size may be incorrect.";function fMt(e){return`Cannot stack "${e}" if there is already "${e}2".`}function dMt(e){return`Stack is applied to a non-linear scale (${e}).`}function hMt(e){return`Stacking is applied even though the aggregate function is non-summative ("${e}").`}function AP(e,t){return`Invalid ${e}: ${lr(t)}.`}function pMt(e){return`Dropping day from datetime ${lr(e)} as day cannot be combined with other units.`}function mMt(e,t){return`${t?"extent ":""}${t&&e?"and ":""}${e?"center ":""}${t&&e?"are ":"is "}not needed when data are aggregated.`}function gMt(e,t,n){return`${e} is not usually used with ${t} for ${n}.`}function yMt(e,t){return`Continuous axis should not have customized aggregation function ${e}; ${t} already agregates the axis.`}function Lae(e){return`1D error band does not support ${e}.`}function k2e(e){return`Channel ${e} is required for "binned" bin.`}function vMt(e){return`Channel ${e} should not be used with "binned" bin.`}function bMt(e){return`Domain for ${e} is required for threshold scale.`}const I2e=Vq(zq);let Gb=I2e;function _Mt(e){return Gb=e,Gb}function wMt(){return Gb=I2e,Gb}function Xe(...e){Gb.warn(...e)}function EMt(...e){Gb.debug(...e)}function Qy(e){if(e&&ht(e)){for(const t of dK)if(t in e)return!0}return!1}const R2e=["january","february","march","april","may","june","july","august","september","october","november","december"],xMt=R2e.map(e=>e.substr(0,3)),N2e=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],TMt=N2e.map(e=>e.substr(0,3));function SMt(e){if(d3(e)&&(e=+e),jn(e))return e>4&&Xe(AP("quarter",e)),e-1;throw new Error(AP("quarter",e))}function CMt(e){if(d3(e)&&(e=+e),jn(e))return e-1;{const t=e.toLowerCase(),n=R2e.indexOf(t);if(n!==-1)return n;const r=t.substr(0,3),i=xMt.indexOf(r);if(i!==-1)return i;throw new Error(AP("month",e))}}function AMt(e){if(d3(e)&&(e=+e),jn(e))return e%7;{const t=e.toLowerCase(),n=N2e.indexOf(t);if(n!==-1)return n;const r=t.substr(0,3),i=TMt.indexOf(r);if(i!==-1)return i;throw new Error(AP("day",e))}}function fK(e,t){const n=[];if(t&&e.day!==void 0&&We(e).length>1&&(Xe(pMt(e)),e=Vt(e),delete e.day),e.year!==void 0?n.push(e.year):n.push(2012),e.month!==void 0){const r=t?CMt(e.month):e.month;n.push(r)}else if(e.quarter!==void 0){const r=t?SMt(e.quarter):e.quarter;n.push(jn(r)?r*3:`${r}*3`)}else n.push(0);if(e.date!==void 0)n.push(e.date);else if(e.day!==void 0){const r=t?AMt(e.day):e.day;n.push(jn(r)?r+1:`${r}+1`)}else n.push(1);for(const r of["hours","minutes","seconds","milliseconds"]){const i=e[r];n.push(typeof i>"u"?0:i)}return n}function sy(e){const n=fK(e,!0).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}function kMt(e){const n=fK(e,!1).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}function IMt(e){const t=fK(e,!0);return e.utc?+new Date(Date.UTC(...t)):+new Date(...t)}const P2e={year:1,quarter:1,month:1,week:1,day:1,dayofyear:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1},dK=We(P2e);function RMt(e){return!!P2e[e]}function Jy(e){return ht(e)?e.binned:D2e(e)}function D2e(e){return e&&e.startsWith("binned")}function hK(e){return e.startsWith("utc")}function NMt(e){return e.substring(3)}const PMt={"year-month":"%b %Y ","year-month-date":"%b %d, %Y "};function E3(e){return dK.filter(t=>$2e(e,t))}function O2e(e){const t=E3(e);return t[t.length-1]}function $2e(e,t){const n=e.indexOf(t);return!(n<0||n>0&&t==="seconds"&&e.charAt(n-1)==="i"||e.length>n+3&&t==="day"&&e.charAt(n+3)==="o"||n>0&&t==="year"&&e.charAt(n-1)==="f")}function DMt(e,t,{end:n}={end:!1}){const r=eK(t),i=hK(e)?"utc":"";function o(u){return u==="quarter"?`(${i}quarter(${r})-1)`:`${i}${u}(${r})`}let s;const a={};for(const u of dK)$2e(e,u)&&(a[u]=o(u),s=u);return n&&(a[s]+="+1"),kMt(a)}function M2e(e){if(!e)return;const t=E3(e);return`timeUnitSpecifier(${lr(t)}, ${lr(PMt)})`}function OMt(e,t,n){if(!e)return;const r=M2e(e);return`${n||hK(e)?"utc":"time"}Format(${t}, ${r})`}function po(e){if(!e)return;let t;return ft(e)?D2e(e)?t={unit:e.substring(6),binned:!0}:t={unit:e}:ht(e)&&(t={...e,...e.unit?{unit:e.unit}:{}}),hK(t.unit)&&(t.utc=!0,t.unit=NMt(t.unit)),t}function $Mt(e){const{utc:t,...n}=po(e);return n.unit?(t?"utc":"")+We(n).map(r=>Vr(`${r==="unit"?"":`_${r}_`}${n[r]}`)).join(""):(t?"utc":"")+"timeunit"+We(n).map(r=>Vr(`_${r}_${n[r]}`)).join("")}function L2e(e,t=n=>n){const n=po(e),r=O2e(n.unit);if(r&&r!=="day"){const i={year:2001,month:1,date:1,hours:0,minutes:0,seconds:0,milliseconds:0},{step:o,part:s}=F2e(r,n.step),a={...i,[s]:+i[s]+o};return`${t(sy(a))} - ${t(sy(i))}`}}const MMt={year:1,month:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1};function LMt(e){return!!MMt[e]}function F2e(e,t=1){if(LMt(e))return{part:e,step:t};switch(e){case"day":case"dayofyear":return{part:"date",step:t};case"quarter":return{part:"month",step:t*3};case"week":return{part:"date",step:t*7}}}function FMt(e){return e==null?void 0:e.param}function pK(e){return!!(e!=null&&e.field)&&e.equal!==void 0}function mK(e){return!!(e!=null&&e.field)&&e.lt!==void 0}function gK(e){return!!(e!=null&&e.field)&&e.lte!==void 0}function yK(e){return!!(e!=null&&e.field)&&e.gt!==void 0}function vK(e){return!!(e!=null&&e.field)&&e.gte!==void 0}function bK(e){if(e!=null&&e.field){if(Le(e.range)&&e.range.length===2)return!0;if(At(e.range))return!0}return!1}function _K(e){return!!(e!=null&&e.field)&&(Le(e.oneOf)||Le(e.in))}function jMt(e){return!!(e!=null&&e.field)&&e.valid!==void 0}function j2e(e){return _K(e)||pK(e)||bK(e)||mK(e)||yK(e)||gK(e)||vK(e)}function Dc(e,t){return P3(e,{timeUnit:t,wrapTime:!0})}function BMt(e,t){return e.map(n=>Dc(n,t))}function B2e(e,t=!0){const{field:n}=e,r=po(e.timeUnit),{unit:i,binned:o}=r||{},s=ot(e,{expr:"datum"}),a=i?`time(${o?s:DMt(i,n)})`:s;if(pK(e))return`${a}===${Dc(e.equal,i)}`;if(mK(e)){const u=e.lt;return`${a}<${Dc(u,i)}`}else if(yK(e)){const u=e.gt;return`${a}>${Dc(u,i)}`}else if(gK(e)){const u=e.lte;return`${a}<=${Dc(u,i)}`}else if(vK(e)){const u=e.gte;return`${a}>=${Dc(u,i)}`}else{if(_K(e))return`indexof([${BMt(e.oneOf,i).join(",")}], ${a}) !== -1`;if(jMt(e))return wK(a,e.valid);if(bK(e)){const{range:u}=e,l=At(u)?{signal:`${u.signal}[0]`}:u[0],c=At(u)?{signal:`${u.signal}[1]`}:u[1];if(l!==null&&c!==null&&t)return"inrange("+a+", ["+Dc(l,i)+", "+Dc(c,i)+"])";const f=[];return l!==null&&f.push(`${a} >= ${Dc(l,i)}`),c!==null&&f.push(`${a} <= ${Dc(c,i)}`),f.length>0?f.join(" && "):"true"}}throw new Error(`Invalid field predicate: ${lr(e)}`)}function wK(e,t=!0){return t?`isValid(${e}) && isFinite(+${e})`:`!isValid(${e}) || !isFinite(+${e})`}function UMt(e){return j2e(e)&&e.timeUnit?{...e,timeUnit:po(e.timeUnit)}:e}const hA={quantitative:"quantitative",ordinal:"ordinal",temporal:"temporal",nominal:"nominal",geojson:"geojson"};function zMt(e){return e==="quantitative"||e==="temporal"}function U2e(e){return e==="ordinal"||e==="nominal"}const ay=hA.quantitative,EK=hA.ordinal,Yb=hA.temporal,xK=hA.nominal,uw=hA.geojson;function VMt(e){if(e)switch(e=e.toLowerCase(),e){case"q":case ay:return"quantitative";case"t":case Yb:return"temporal";case"o":case EK:return"ordinal";case"n":case xK:return"nominal";case uw:return"geojson"}}const $a={LINEAR:"linear",LOG:"log",POW:"pow",SQRT:"sqrt",SYMLOG:"symlog",IDENTITY:"identity",SEQUENTIAL:"sequential",TIME:"time",UTC:"utc",QUANTILE:"quantile",QUANTIZE:"quantize",THRESHOLD:"threshold",BIN_ORDINAL:"bin-ordinal",ORDINAL:"ordinal",POINT:"point",BAND:"band"},F8={linear:"numeric",log:"numeric",pow:"numeric",sqrt:"numeric",symlog:"numeric",identity:"numeric",sequential:"numeric",time:"time",utc:"time",ordinal:"ordinal","bin-ordinal":"bin-ordinal",point:"ordinal-position",band:"ordinal-position",quantile:"discretizing",quantize:"discretizing",threshold:"discretizing"};function HMt(e,t){const n=F8[e],r=F8[t];return n===r||n==="ordinal-position"&&r==="time"||r==="ordinal-position"&&n==="time"}const qMt={linear:0,log:1,pow:1,sqrt:1,symlog:1,identity:1,sequential:1,time:0,utc:0,point:10,band:11,ordinal:0,"bin-ordinal":0,quantile:0,quantize:0,threshold:0};function Fae(e){return qMt[e]}const z2e=new Set(["linear","log","pow","sqrt","symlog"]),V2e=new Set([...z2e,"time","utc"]);function H2e(e){return z2e.has(e)}const q2e=new Set(["quantile","quantize","threshold"]),WMt=new Set([...V2e,...q2e,"sequential","identity"]),GMt=new Set(["ordinal","bin-ordinal","point","band"]);function mo(e){return GMt.has(e)}function Au(e){return WMt.has(e)}function Xl(e){return V2e.has(e)}function Kb(e){return q2e.has(e)}const YMt={pointPadding:.5,barBandPaddingInner:.1,rectBandPaddingInner:0,bandWithNestedOffsetPaddingInner:.2,bandWithNestedOffsetPaddingOuter:.2,minBandSize:2,minFontSize:8,maxFontSize:40,minOpacity:.3,maxOpacity:.8,minSize:9,minStrokeWidth:1,maxStrokeWidth:4,quantileCount:4,quantizeCount:4,zero:!0};function KMt(e){return!ft(e)&&!!e.name}function W2e(e){return e==null?void 0:e.param}function XMt(e){return e==null?void 0:e.unionWith}function QMt(e){return ht(e)&&"field"in e}const JMt={type:1,domain:1,domainMax:1,domainMin:1,domainMid:1,domainRaw:1,align:1,range:1,rangeMax:1,rangeMin:1,scheme:1,bins:1,reverse:1,round:1,clamp:1,nice:1,base:1,exponent:1,constant:1,interpolate:1,zero:1,padding:1,paddingInner:1,paddingOuter:1},{type:DUt,domain:OUt,range:$Ut,rangeMax:MUt,rangeMin:LUt,scheme:FUt,...ZMt}=JMt,eLt=We(ZMt);function j8(e,t){switch(t){case"type":case"domain":case"reverse":case"range":return!0;case"scheme":case"interpolate":return!["point","band","identity"].includes(e);case"bins":return!["point","band","identity","ordinal"].includes(e);case"round":return Xl(e)||e==="band"||e==="point";case"padding":case"rangeMin":case"rangeMax":return Xl(e)||["point","band"].includes(e);case"paddingOuter":case"align":return["point","band"].includes(e);case"paddingInner":return e==="band";case"domainMax":case"domainMid":case"domainMin":case"domainRaw":case"clamp":return Xl(e);case"nice":return Xl(e)||e==="quantize"||e==="threshold";case"exponent":return e==="pow";case"base":return e==="log";case"constant":return e==="symlog";case"zero":return Au(e)&&!Sn(["log","time","utc","threshold","quantile"],e)}}function G2e(e,t){switch(t){case"interpolate":case"scheme":case"domainMid":return q1(e)?void 0:X3t(t);case"align":case"type":case"bins":case"domain":case"domainMax":case"domainMin":case"domainRaw":case"range":case"base":case"exponent":case"constant":case"nice":case"padding":case"paddingInner":case"paddingOuter":case"rangeMax":case"rangeMin":case"reverse":case"round":case"clamp":case"zero":return}}function tLt(e,t){return Sn([EK,xK],t)?e===void 0||mo(e):t===Yb?Sn([$a.TIME,$a.UTC,void 0],e):t===ay?H2e(e)||Kb(e)||e===void 0:!0}function nLt(e,t,n=!1){if(!Dh(e))return!1;switch(e){case Hr:case vo:case Jm:case aw:case wl:case Ec:return Xl(t)||t==="band"?!0:t==="point"?!n:!1;case Nh:case tg:case Ph:case Zm:case eg:case Yy:return Xl(t)||Kb(t)||Sn(["band","point","ordinal"],t);case Ua:case Kf:case Xf:return t!=="band";case ng:case za:return t==="ordinal"||Kb(t)}}function TK(e){const{channel:t,channelDef:n,markDef:r,scale:i,config:o}=e,s=CK(e);return Qe(n)&&!h2e(n.aggregate)&&i&&Xl(i.get("type"))?rLt({fieldDef:n,channel:t,markDef:r,ref:s,config:o}):s}function rLt({fieldDef:e,channel:t,markDef:n,ref:r,config:i}){return Kn("invalid",n,i)===null?[iLt(e,t),r]:r}function iLt(e,t){const n=SK(e,!0),i=Ky(t)==="y"?{field:{group:"height"}}:{value:0};return{test:n,...i}}function SK(e,t=!0){return wK(ft(e)?e:ot(e,{expr:"datum"}),!t)}function oLt(e){const{datum:t}=e;return Qy(t)?sy(t):`${lr(t)}`}function _0(e,t,n,r){const i={};if(t&&(i.scale=t),Zf(e)){const{datum:o}=e;Qy(o)?i.signal=sy(o):At(o)?i.signal=o.signal:dA(o)?i.signal=o.expr:i.value=o}else i.field=ot(e,n);if(r){const{offset:o,band:s}=r;o&&(i.offset=o),s&&(i.band=s)}return i}function kP({scaleName:e,fieldOrDatumDef:t,fieldOrDatumDef2:n,offset:r,startSuffix:i,endSuffix:o="end",bandPosition:s=.5}){const a=!At(s)&&0<s&&s<1?"datum":void 0,u=ot(t,{expr:a,suffix:i}),l=n!==void 0?ot(n,{expr:a}):ot(t,{suffix:o,expr:a}),c={};if(s===0||s===1){c.scale=e;const f=s===0?u:l;c.field=f}else{const f=At(s)?`(1-${s.signal}) * ${u} + ${s.signal} * ${l}`:`${1-s} * ${u} + ${s} * ${l}`;c.signal=`scale("${e}", ${f})`}return r&&(c.offset=r),c}function sLt({scaleName:e,fieldDef:t}){const n=ot(t,{expr:"datum"}),r=ot(t,{expr:"datum",suffix:"end"});return`abs(scale("${e}", ${r}) - scale("${e}", ${n}))`}function CK({channel:e,channelDef:t,channel2Def:n,markDef:r,config:i,scaleName:o,scale:s,stack:a,offset:u,defaultRef:l,bandPosition:c}){if(t){if(Yt(t)){const f=s==null?void 0:s.get("type");if(Ks(t)){c??(c=Sm({fieldDef:t,fieldDef2:n,markDef:r,config:i}));const{bin:d,timeUnit:h,type:p}=t;if(Cr(d)||c&&h&&p===Yb)return a!=null&&a.impute?_0(t,o,{binSuffix:"mid"},{offset:u}):c&&!mo(f)?kP({scaleName:o,fieldOrDatumDef:t,bandPosition:c,offset:u}):_0(t,o,yA(t,e)?{binSuffix:"range"}:{},{offset:u});if(Io(d)){if(Qe(n))return kP({scaleName:o,fieldOrDatumDef:t,fieldOrDatumDef2:n,bandPosition:c,offset:u});Xe(k2e(e===Hr?wc:Yf))}}return _0(t,o,mo(f)?{binSuffix:"range"}:{},{offset:u,band:f==="band"?c??t.bandPosition??.5:void 0})}else if(hc(t)){const f=t.value,d=u?{offset:u}:{};return{...Zx(e,f),...d}}}return nn(l)&&(l=l()),l&&{...l,...u?{offset:u}:{}}}function Zx(e,t){return Sn(["x","x2"],e)&&t==="width"?{field:{group:"width"}}:Sn(["y","y2"],e)&&t==="height"?{field:{group:"height"}}:Pr(t)}function uy(e){return e&&e!=="number"&&e!=="time"}function Y2e(e,t,n){return`${e}(${t}${n?`, ${lr(n)}`:""})`}const aLt="  ";function AK({fieldOrDatumDef:e,format:t,formatType:n,expr:r,normalizeStack:i,config:o}){var u,l;if(uy(n))return Ql({fieldOrDatumDef:e,format:t,formatType:n,expr:r,config:o});const s=K2e(e,r,i),a=Xb(e);if(t===void 0&&n===void 0&&o.customFormatTypes){if(a==="quantitative"){if(i&&o.normalizedNumberFormatType)return Ql({fieldOrDatumDef:e,format:o.normalizedNumberFormat,formatType:o.normalizedNumberFormatType,expr:r,config:o});if(o.numberFormatType)return Ql({fieldOrDatumDef:e,format:o.numberFormat,formatType:o.numberFormatType,expr:r,config:o})}if(a==="temporal"&&o.timeFormatType&&Qe(e)&&e.timeUnit===void 0)return Ql({fieldOrDatumDef:e,format:o.timeFormat,formatType:o.timeFormatType,expr:r,config:o})}if(Jb(e)){const c=lLt({field:s,timeUnit:Qe(e)?(u=po(e.timeUnit))==null?void 0:u.unit:void 0,format:t,formatType:o.timeFormatType,rawTimeFormat:o.timeFormat,isUTCScale:ev(e)&&((l=e.scale)==null?void 0:l.type)===$a.UTC});return c?{signal:c}:void 0}if(t=B8({type:a,specifiedFormat:t,config:o,normalizeStack:i}),Qe(e)&&Cr(e.bin)){const c=ot(e,{expr:r,binSuffix:"end"});return{signal:pA(s,c,t,n,o)}}else return t||Xb(e)==="quantitative"?{signal:`${J2e(s,t)}`}:{signal:`isValid(${s}) ? ${s} : ""+${s}`}}function K2e(e,t,n){return Qe(e)?n?`${ot(e,{expr:t,suffix:"end"})}-${ot(e,{expr:t,suffix:"start"})}`:ot(e,{expr:t}):oLt(e)}function Ql({fieldOrDatumDef:e,format:t,formatType:n,expr:r,normalizeStack:i,config:o,field:s}){if(s??(s=K2e(e,r,i)),s!=="datum.value"&&Qe(e)&&Cr(e.bin)){const a=ot(e,{expr:r,binSuffix:"end"});return{signal:pA(s,a,t,n,o)}}return{signal:Y2e(n,s,t)}}function X2e(e,t,n,r,i,o){var s;if(!(ft(r)&&uy(r))&&!(n===void 0&&r===void 0&&i.customFormatTypes&&Xb(e)==="quantitative"&&(i.normalizedNumberFormatType&&Qb(e)&&e.stack==="normalize"||i.numberFormatType))){if(Qb(e)&&e.stack==="normalize"&&i.normalizedNumberFormat)return B8({type:"quantitative",config:i,normalizeStack:!0});if(Jb(e)){const a=Qe(e)?(s=po(e.timeUnit))==null?void 0:s.unit:void 0;return a===void 0&&i.customFormatTypes&&i.timeFormatType?void 0:uLt({specifiedFormat:n,timeUnit:a,config:i,omitTimeFormatConfig:o})}return B8({type:t,specifiedFormat:n,config:i})}}function Q2e(e,t,n){var r;if(e&&(At(e)||e==="number"||e==="time"))return e;if(Jb(t)&&n!=="time"&&n!=="utc")return Qe(t)&&((r=po(t==null?void 0:t.timeUnit))!=null&&r.utc)?"utc":"time"}function B8({type:e,specifiedFormat:t,config:n,normalizeStack:r}){if(ft(t))return t;if(e===ay)return r?n.normalizedNumberFormat:n.numberFormat}function uLt({specifiedFormat:e,timeUnit:t,config:n,omitTimeFormatConfig:r}){return e||(t?{signal:M2e(t)}:r?void 0:n.timeFormat)}function J2e(e,t){return`format(${e}, "${t||""}")`}function jae(e,t,n,r){return uy(n)?Y2e(n,e,t):J2e(e,(ft(t)?t:void 0)??r.numberFormat)}function pA(e,t,n,r,i){if(n===void 0&&r===void 0&&i.customFormatTypes&&i.numberFormatType)return pA(e,t,i.numberFormat,i.numberFormatType,i);const o=jae(e,n,r,i),s=jae(t,n,r,i);return`${wK(e,!1)} ? "null" : ${o} + "${aLt}" + ${s}`}function lLt({field:e,timeUnit:t,format:n,formatType:r,rawTimeFormat:i,isUTCScale:o}){return!t||n?!t&&r?`${r}(${e}, '${n}')`:(n=ft(n)?n:i,`${o?"utc":"time"}Format(${e}, '${n}')`):OMt(t,e,o)}const ea={arc:"arc",area:"area",bar:"bar",image:"image",line:"line",point:"point",rect:"rect",rule:"rule",text:"text",tick:"tick",trail:"trail",circle:"circle",square:"square",geoshape:"geoshape"},Z2e=ea.arc,x3=ea.area,T3=ea.bar,cLt=ea.image,S3=ea.line,C3=ea.point,fLt=ea.rect,IP=ea.rule,eke=ea.text,kK=ea.tick,dLt=ea.trail,IK=ea.circle,RK=ea.square,tke=ea.geoshape;function Zy(e){return["line","area","trail"].includes(e)}function RS(e){return["rect","bar","image","arc"].includes(e)}const hLt=new Set(We(ea));function kf(e){return e.type}const pLt=["stroke","strokeWidth","strokeDash","strokeDashOffset","strokeOpacity","strokeJoin","strokeMiterLimit"],mLt=["fill","fillOpacity"],gLt=[...pLt,...mLt],yLt={color:1,filled:1,invalid:1,order:1,radius2:1,theta2:1,timeUnitBandSize:1,timeUnitBandPosition:1},Bae=We(yLt),vLt={area:["line","point"],bar:["binSpacing","continuousBandSize","discreteBandSize","minBandSize"],rect:["binSpacing","continuousBandSize","discreteBandSize","minBandSize"],line:["point"],tick:["bandSize","thickness"]},bLt={color:"#4c78a8",invalid:"filter",timeUnitBandSize:1},_Lt={mark:1,arc:1,area:1,bar:1,circle:1,image:1,line:1,point:1,rect:1,rule:1,square:1,text:1,tick:1,trail:1,geoshape:1},nke=We(_Lt);function ly(e){return e&&e.band!=null}const wLt={horizontal:["cornerRadiusTopRight","cornerRadiusBottomRight"],vertical:["cornerRadiusTopLeft","cornerRadiusTopRight"]},rke=5,ELt={binSpacing:1,continuousBandSize:rke,minBandSize:.25,timeUnitBandPosition:.5},xLt={binSpacing:0,continuousBandSize:rke,minBandSize:.25,timeUnitBandPosition:.5},TLt={thickness:1};function SLt(e){return kf(e)?e.type:e}const A3="min",CLt={x:1,y:1,color:1,fill:1,stroke:1,strokeWidth:1,size:1,shape:1,fillOpacity:1,strokeOpacity:1,opacity:1,text:1};function Uae(e){return e in CLt}function ike(e){return!!(e!=null&&e.encoding)}function mf(e){return e&&(e.op==="count"||!!e.field)}function oke(e){return e&&Le(e)}function mA(e){return"row"in e||"column"in e}function NK(e){return!!e&&"header"in e}function k3(e){return"facet"in e}function ALt(e){return e.param}function kLt(e){return e&&!ft(e)&&"repeat"in e}function zae(e){const{field:t,timeUnit:n,bin:r,aggregate:i}=e;return{...n?{timeUnit:n}:{},...r?{bin:r}:{},...i?{aggregate:i}:{},field:t}}function PK(e){return"sort"in e}function Sm({fieldDef:e,fieldDef2:t,markDef:n,config:r}){if(Yt(e)&&e.bandPosition!==void 0)return e.bandPosition;if(Qe(e)){const{timeUnit:i,bin:o}=e;if(i&&!t)return ph("timeUnitBandPosition",n,r);if(Cr(o))return .5}}function ske({channel:e,fieldDef:t,fieldDef2:n,markDef:r,config:i,scaleType:o,useVlSizeChannel:s}){var l,c,f;const a=Va(e),u=Kn(s?"size":a,r,i,{vgChannel:a});if(u!==void 0)return u;if(Qe(t)){const{timeUnit:d,bin:h}=t;if(d&&!n)return{band:ph("timeUnitBandSize",r,i)};if(Cr(h)&&!mo(o))return{band:1}}if(RS(r.type))return o?mo(o)?((l=i[r.type])==null?void 0:l.discreteBandSize)||{band:1}:(c=i[r.type])==null?void 0:c.continuousBandSize:(f=i[r.type])==null?void 0:f.discreteBandSize}function ake(e,t,n,r){return Cr(e.bin)||e.timeUnit&&Ks(e)&&e.type==="temporal"?Sm({fieldDef:e,fieldDef2:t,markDef:n,config:r})!==void 0:!1}function uke(e){return e&&!!e.sort&&!e.field}function I3(e){return e&&"condition"in e}function R3(e){const t=e==null?void 0:e.condition;return!!t&&!Le(t)&&Qe(t)}function gA(e){const t=e==null?void 0:e.condition;return!!t&&!Le(t)&&Yt(t)}function ILt(e){const t=e==null?void 0:e.condition;return!!t&&(Le(t)||hc(t))}function Qe(e){return e&&(!!e.field||e.aggregate==="count")}function Xb(e){return e==null?void 0:e.type}function Zf(e){return e&&"datum"in e}function Cp(e){return Ks(e)&&!NP(e)||RP(e)}function Vae(e){return Ks(e)&&e.type==="quantitative"&&!e.bin||RP(e)}function RP(e){return Zf(e)&&jn(e.datum)}function Yt(e){return Qe(e)||Zf(e)}function Ks(e){return e&&("field"in e||e.aggregate==="count")&&"type"in e}function hc(e){return e&&"value"in e&&"value"in e}function ev(e){return e&&("scale"in e||"sort"in e)}function Qb(e){return e&&("axis"in e||"stack"in e||"impute"in e)}function lke(e){return e&&"legend"in e}function cke(e){return e&&("format"in e||"formatType"in e)}function RLt(e){return Oa(e,["legend","axis","header","scale"])}function NLt(e){return"op"in e}function ot(e,t={}){let n=e.field;const r=t.prefix;let i=t.suffix,o="";if(DLt(e))n=ZAe("count");else{let s;if(!t.nofn)if(NLt(e))s=e.op;else{const{bin:a,aggregate:u,timeUnit:l}=e;Cr(a)?(s=p2e(a),i=(t.binSuffix??"")+(t.suffix??"")):u?rg(u)?(o=`["${n}"]`,n=`argmax_${u.argmax}`):hh(u)?(o=`["${n}"]`,n=`argmin_${u.argmin}`):s=String(u):l&&!Jy(l)&&(s=$Mt(l),i=(!["range","mid"].includes(t.binSuffix)&&t.binSuffix||"")+(t.suffix??""))}s&&(n=n?`${s}_${n}`:s)}return i&&(n=`${n}_${i}`),r&&(n=`${r}_${n}`),t.forAs?sw(n):t.expr?XAe(n,t.expr)+o:dl(n)+o}function NP(e){switch(e.type){case"nominal":case"ordinal":case"geojson":return!0;case"quantitative":return Qe(e)&&!!e.bin;case"temporal":return!1}throw new Error(T2e(e.type))}function PLt(e){var t;return ev(e)&&Kb((t=e.scale)==null?void 0:t.type)}function DLt(e){return e.aggregate==="count"}function OLt(e,t){var s;const{field:n,bin:r,timeUnit:i,aggregate:o}=e;if(o==="count")return t.countTitle;if(Cr(r))return`${n} (binned)`;if(i&&!Jy(i)){const a=(s=po(i))==null?void 0:s.unit;if(a)return`${n} (${E3(a).join("-")})`}else if(o)return rg(o)?`${n} for max ${o.argmax}`:hh(o)?`${n} for min ${o.argmin}`:`${uA(o)} of ${n}`;return n}function $Lt(e){const{aggregate:t,bin:n,timeUnit:r,field:i}=e;if(rg(t))return`${i} for argmax(${t.argmax})`;if(hh(t))return`${i} for argmin(${t.argmin})`;const o=r&&!Jy(r)?po(r):void 0,s=t||(o==null?void 0:o.unit)||(o==null?void 0:o.maxbins)&&"timeunit"||Cr(n)&&"bin";return s?`${s.toUpperCase()}(${i})`:i}const fke=(e,t)=>{switch(t.fieldTitle){case"plain":return e.field;case"functional":return $Lt(e);default:return OLt(e,t)}};let dke=fke;function hke(e){dke=e}function MLt(){hke(fke)}function W1(e,t,{allowDisabling:n,includeDefault:r=!0}){var a;const i=(a=DK(e))==null?void 0:a.title;if(!Qe(e))return i??e.title;const o=e,s=r?OK(o,t):void 0;return n?Ei(i,o.title,s):i??o.title??s}function DK(e){if(Qb(e)&&e.axis)return e.axis;if(lke(e)&&e.legend)return e.legend;if(NK(e)&&e.header)return e.header}function OK(e,t){return dke(e,t)}function PP(e){if(cke(e)){const{format:t,formatType:n}=e;return{format:t,formatType:n}}else{const t=DK(e)??{},{format:n,formatType:r}=t;return{format:n,formatType:r}}}function LLt(e,t){var o;switch(t){case"latitude":case"longitude":return"quantitative";case"row":case"column":case"facet":case"shape":case"strokeDash":return"nominal";case"order":return"ordinal"}if(PK(e)&&Le(e.sort))return"ordinal";const{aggregate:n,bin:r,timeUnit:i}=e;if(i)return"temporal";if(r||n&&!rg(n)&&!hh(n))return"quantitative";if(ev(e)&&((o=e.scale)!=null&&o.type))switch(F8[e.scale.type]){case"numeric":case"discretizing":return"quantitative";case"time":return"temporal"}return"nominal"}function If(e){if(Qe(e))return e;if(R3(e))return e.condition}function zi(e){if(Yt(e))return e;if(gA(e))return e.condition}function pke(e,t,n,r={}){if(ft(e)||jn(e)||Km(e)){const i=ft(e)?"string":jn(e)?"number":"boolean";return Xe(F3t(t,i,e)),{value:e}}return Yt(e)?DP(e,t,n,r):gA(e)?{...e,condition:DP(e.condition,t,n,r)}:e}function DP(e,t,n,r){if(cke(e)){const{format:i,formatType:o,...s}=e;if(uy(o)&&!n.customFormatTypes)return Xe($ae(t)),DP(s,t,n,r)}else{const i=Qb(e)?"axis":lke(e)?"legend":NK(e)?"header":null;if(i&&e[i]){const{format:o,formatType:s,...a}=e[i];if(uy(s)&&!n.customFormatTypes)return Xe($ae(t)),DP({...e,[i]:a},t,n,r)}}return Qe(e)?$K(e,t,r):FLt(e)}function FLt(e){let t=e.type;if(t)return e;const{datum:n}=e;return t=jn(n)?"quantitative":ft(n)?"nominal":Qy(n)?"temporal":void 0,{...e,type:t}}function $K(e,t,{compositeMark:n=!1}={}){const{aggregate:r,timeUnit:i,bin:o,field:s}=e,a={...e};if(!n&&r&&!uK(r)&&!rg(r)&&!hh(r)&&(Xe(B3t(r)),delete a.aggregate),i&&(a.timeUnit=po(i)),s&&(a.field=`${s}`),Cr(o)&&(a.bin=N3(o,t)),Io(o)&&!xi(t)&&Xe(vMt(t)),Ks(a)){const{type:u}=a,l=VMt(u);u!==l&&(a.type=l),u!=="quantitative"&&h2e(r)&&(Xe(j3t(u,r)),a.type="quantitative")}else if(!a2e(t)){const u=LLt(a,t);a.type=u}if(Ks(a)){const{compatible:u,warning:l}=jLt(a,t)||{};u===!1&&Xe(l)}if(PK(a)&&ft(a.sort)){const{sort:u}=a;if(Uae(u))return{...a,sort:{encoding:u}};const l=u.substr(1);if(u.charAt(0)==="-"&&Uae(l))return{...a,sort:{encoding:l,order:"descending"}}}if(NK(a)){const{header:u}=a;if(u){const{orient:l,...c}=u;if(l)return{...a,header:{...c,labelOrient:u.labelOrient||l,titleOrient:u.titleOrient||l}}}}return a}function N3(e,t){return Km(e)?{maxbins:Cae(t)}:e==="binned"?{binned:!0}:!e.maxbins&&!e.step?{...e,maxbins:Cae(t)}:e}const Rv={compatible:!0};function jLt(e,t){const n=e.type;if(n==="geojson"&&t!=="shape")return{compatible:!1,warning:`Channel ${t} should not be used with a geojson data.`};switch(t){case Vd:case Hd:case h3:return NP(e)?Rv:{compatible:!1,warning:H3t(t)};case Hr:case vo:case Jm:case aw:case Ua:case Kf:case Xf:case lA:case cA:case p3:case oy:case m3:case g3:case Yy:case wl:case Ec:case y3:return Rv;case Tc:case hl:case xc:case Sc:return n!==ay?{compatible:!1,warning:`Channel ${t} should be used with a quantitative field only, not ${e.type} field.`}:Rv;case Ph:case Zm:case eg:case tg:case Nh:case Rh:case Ih:case wc:case Yf:return n==="nominal"&&!e.sort?{compatible:!1,warning:`Channel ${t} should not be used with an unsorted discrete field.`}:Rv;case za:case ng:return!NP(e)&&!PLt(e)?{compatible:!1,warning:q3t(t)}:Rv;case Wb:return e.type==="nominal"&&!("sort"in e)?{compatible:!1,warning:"Channel order is inappropriate for nominal field, which has no inherent order."}:Rv}}function Jb(e){const{formatType:t}=PP(e);return t==="time"||!t&&BLt(e)}function BLt(e){return e&&(e.type==="temporal"||Qe(e)&&!!e.timeUnit)}function P3(e,{timeUnit:t,type:n,wrapTime:r,undefinedIfExprNotRequired:i}){var u;const o=t&&((u=po(t))==null?void 0:u.unit);let s=o||n==="temporal",a;return dA(e)?a=e.expr:At(e)?a=e.signal:Qy(e)?(s=!0,a=sy(e)):(ft(e)||jn(e))&&s&&(a=`datetime(${lr(e)})`,RMt(o)&&(jn(e)&&e<1e4||ft(e)&&isNaN(Date.parse(e)))&&(a=sy({[o]:e}))),a?r&&s?`time(${a})`:a:i?void 0:lr(e)}function mke(e,t){const{type:n}=e;return t.map(r=>{const i=Qe(e)&&!Jy(e.timeUnit)?e.timeUnit:void 0,o=P3(r,{timeUnit:i,type:n,undefinedIfExprNotRequired:!0});return o!==void 0?{signal:o}:r})}function yA(e,t){return Cr(e.bin)?Dh(t)&&["ordinal","nominal"].includes(e.type):(console.warn("Only call this method for binned field defs."),!1)}const Hae={labelAlign:{part:"labels",vgProp:"align"},labelBaseline:{part:"labels",vgProp:"baseline"},labelColor:{part:"labels",vgProp:"fill"},labelFont:{part:"labels",vgProp:"font"},labelFontSize:{part:"labels",vgProp:"fontSize"},labelFontStyle:{part:"labels",vgProp:"fontStyle"},labelFontWeight:{part:"labels",vgProp:"fontWeight"},labelOpacity:{part:"labels",vgProp:"opacity"},labelOffset:null,labelPadding:null,gridColor:{part:"grid",vgProp:"stroke"},gridDash:{part:"grid",vgProp:"strokeDash"},gridDashOffset:{part:"grid",vgProp:"strokeDashOffset"},gridOpacity:{part:"grid",vgProp:"opacity"},gridWidth:{part:"grid",vgProp:"strokeWidth"},tickColor:{part:"ticks",vgProp:"stroke"},tickDash:{part:"ticks",vgProp:"strokeDash"},tickDashOffset:{part:"ticks",vgProp:"strokeDashOffset"},tickOpacity:{part:"ticks",vgProp:"opacity"},tickSize:null,tickWidth:{part:"ticks",vgProp:"strokeWidth"}};function vA(e){return e==null?void 0:e.condition}const gke=["domain","grid","labels","ticks","title"],ULt={grid:"grid",gridCap:"grid",gridColor:"grid",gridDash:"grid",gridDashOffset:"grid",gridOpacity:"grid",gridScale:"grid",gridWidth:"grid",orient:"main",bandPosition:"both",aria:"main",description:"main",domain:"main",domainCap:"main",domainColor:"main",domainDash:"main",domainDashOffset:"main",domainOpacity:"main",domainWidth:"main",format:"main",formatType:"main",labelAlign:"main",labelAngle:"main",labelBaseline:"main",labelBound:"main",labelColor:"main",labelFlush:"main",labelFlushOffset:"main",labelFont:"main",labelFontSize:"main",labelFontStyle:"main",labelFontWeight:"main",labelLimit:"main",labelLineHeight:"main",labelOffset:"main",labelOpacity:"main",labelOverlap:"main",labelPadding:"main",labels:"main",labelSeparation:"main",maxExtent:"main",minExtent:"main",offset:"both",position:"main",tickCap:"main",tickColor:"main",tickDash:"main",tickDashOffset:"main",tickMinStep:"both",tickOffset:"both",tickOpacity:"main",tickRound:"both",ticks:"main",tickSize:"main",tickWidth:"both",title:"main",titleAlign:"main",titleAnchor:"main",titleAngle:"main",titleBaseline:"main",titleColor:"main",titleFont:"main",titleFontSize:"main",titleFontStyle:"main",titleFontWeight:"main",titleLimit:"main",titleLineHeight:"main",titleOpacity:"main",titlePadding:"main",titleX:"main",titleY:"main",encode:"both",scale:"both",tickBand:"both",tickCount:"both",tickExtra:"both",translate:"both",values:"both",zindex:"both"},yke={orient:1,aria:1,bandPosition:1,description:1,domain:1,domainCap:1,domainColor:1,domainDash:1,domainDashOffset:1,domainOpacity:1,domainWidth:1,format:1,formatType:1,grid:1,gridCap:1,gridColor:1,gridDash:1,gridDashOffset:1,gridOpacity:1,gridWidth:1,labelAlign:1,labelAngle:1,labelBaseline:1,labelBound:1,labelColor:1,labelFlush:1,labelFlushOffset:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelLineHeight:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labels:1,labelSeparation:1,maxExtent:1,minExtent:1,offset:1,position:1,tickBand:1,tickCap:1,tickColor:1,tickCount:1,tickDash:1,tickDashOffset:1,tickExtra:1,tickMinStep:1,tickOffset:1,tickOpacity:1,tickRound:1,ticks:1,tickSize:1,tickWidth:1,title:1,titleAlign:1,titleAnchor:1,titleAngle:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titlePadding:1,titleX:1,titleY:1,translate:1,values:1,zindex:1},zLt={...yke,style:1,labelExpr:1,encoding:1};function qae(e){return!!zLt[e]}const VLt={axis:1,axisBand:1,axisBottom:1,axisDiscrete:1,axisLeft:1,axisPoint:1,axisQuantitative:1,axisRight:1,axisTemporal:1,axisTop:1,axisX:1,axisXBand:1,axisXDiscrete:1,axisXPoint:1,axisXQuantitative:1,axisXTemporal:1,axisY:1,axisYBand:1,axisYDiscrete:1,axisYPoint:1,axisYQuantitative:1,axisYTemporal:1},vke=We(VLt);function Oh(e){return"mark"in e}class D3{constructor(t,n){this.name=t,this.run=n}hasMatchingType(t){return Oh(t)?SLt(t.mark)===this.name:!1}}function w0(e,t){const n=e&&e[t];return n?Le(n)?ry(n,r=>!!r.field):Qe(n)||R3(n):!1}function bke(e,t){const n=e&&e[t];return n?Le(n)?ry(n,r=>!!r.field):Qe(n)||Zf(n)||gA(n):!1}function _ke(e,t){if(xi(t)){const n=e[t];if((Qe(n)||Zf(n))&&(U2e(n.type)||Qe(n)&&n.timeUnit)){const r=iK(t);return bke(e,r)}}return!1}function MK(e){return ry(H$t,t=>{if(w0(e,t)){const n=e[t];if(Le(n))return ry(n,r=>!!r.aggregate);{const r=If(n);return r&&!!r.aggregate}}return!1})}function wke(e,t){const n=[],r=[],i=[],o=[],s={};return LK(e,(a,u)=>{if(Qe(a)){const{field:l,aggregate:c,bin:f,timeUnit:d,...h}=a;if(c||d||f){const p=DK(a),m=p==null?void 0:p.title;let g=ot(a,{forAs:!0});const y={...m?[]:{title:W1(a,t,{allowDisabling:!0})},...h,field:g};if(c){let v;if(rg(c)?(v="argmax",g=ot({op:"argmax",field:c.argmax},{forAs:!0}),y.field=`${g}.${l}`):hh(c)?(v="argmin",g=ot({op:"argmin",field:c.argmin},{forAs:!0}),y.field=`${g}.${l}`):c!=="boxplot"&&c!=="errorbar"&&c!=="errorband"&&(v=c),v){const _={op:v,as:g};l&&(_.field=l),o.push(_)}}else if(n.push(g),Ks(a)&&Cr(f)){if(r.push({bin:f,field:l,as:g}),n.push(ot(a,{binSuffix:"end"})),yA(a,u)&&n.push(ot(a,{binSuffix:"range"})),xi(u)){const v={field:`${g}_end`};s[`${u}2`]=v}y.bin="binned",a2e(u)||(y.type=ay)}else if(d&&!Jy(d)){i.push({timeUnit:d,field:l,as:g});const v=Ks(a)&&a.type!==Yb&&"time";v&&(u===lA||u===oy?y.formatType=v:e3t(u)?y.legend={formatType:v,...y.legend}:xi(u)&&(y.axis={formatType:v,...y.axis}))}s[u]=y}else n.push(l),s[u]=e[u]}else s[u]=e[u]}),{bins:r,timeUnits:i,aggregate:o,groupby:n,encoding:s}}function HLt(e,t,n){const r=n3t(t,n);if(r){if(r==="binned"){const i=e[t===wc?Hr:vo];return!!(Qe(i)&&Qe(e[t])&&Io(i.bin))}}else return!1;return!0}function qLt(e,t,n,r){const i={};for(const o of We(e))s2e(o)||Xe(V3t(o));for(let o of X$t){if(!e[o])continue;const s=e[o];if(fA(o)){const a=K$t(o),u=i[a];if(Qe(u)&&zMt(u.type)&&Qe(s)&&!u.timeUnit){Xe(L3t(a));continue}}if(o==="angle"&&t==="arc"&&!e.theta&&(Xe(M3t),o=wl),!HLt(e,o,t)){Xe(w3(o,t));continue}if(o===Nh&&t==="line"){const a=If(e[o]);if(a!=null&&a.aggregate){Xe(z3t);continue}}if(o===Ua&&(n?"fill"in e:"stroke"in e)){Xe(S2e("encoding",{fill:"fill"in e,stroke:"stroke"in e}));continue}if(o===cA||o===Wb&&!Le(s)&&!hc(s)||o===oy&&Le(s)){if(s){if(o===Wb){const a=e[o];if(uke(a)){i[o]=a;continue}}i[o]=ct(s).reduce((a,u)=>(Qe(u)?a.push($K(u,o)):Xe(L8(u,o)),a),[])}}else{if(o===oy&&s===null)i[o]=null;else if(!Qe(s)&&!Zf(s)&&!hc(s)&&!I3(s)&&!At(s)){Xe(L8(s,o));continue}i[o]=pke(s,o,r)}}return i}function O3(e,t){const n={};for(const r of We(e)){const i=pke(e[r],r,t,{compositeMark:!0});n[r]=i}return n}function WLt(e){const t=[];for(const n of We(e))if(w0(e,n)){const r=e[n],i=ct(r);for(const o of i)Qe(o)?t.push(o):R3(o)&&t.push(o.condition)}return t}function LK(e,t,n){if(e)for(const r of We(e)){const i=e[r];if(Le(i))for(const o of i)t.call(n,o,r);else t.call(n,i,r)}}function GLt(e,t,n,r){return e?We(e).reduce((i,o)=>{const s=e[o];return Le(s)?s.reduce((a,u)=>t.call(r,a,u,o),i):t.call(r,i,s,o)},n):n}function Eke(e,t){return We(t).reduce((n,r)=>{switch(r){case Hr:case vo:case m3:case y3:case g3:case wc:case Yf:case Jm:case aw:case wl:case Rh:case Ec:case Ih:case xc:case Tc:case Sc:case hl:case lA:case za:case Yy:case oy:return n;case Wb:if(e==="line"||e==="trail")return n;case cA:case p3:{const i=t[r];if(Le(i)||Qe(i))for(const o of ct(i))o.aggregate||n.push(ot(o,{}));return n}case Nh:if(e==="trail")return n;case Ua:case Kf:case Xf:case Ph:case Zm:case eg:case ng:case tg:{const i=If(t[r]);return i&&!i.aggregate&&n.push(ot(i,{})),n}}},[])}function YLt(e){const{tooltip:t,...n}=e;if(!t)return{filteredEncoding:n};let r,i;if(Le(t)){for(const o of t)o.aggregate?(r||(r=[]),r.push(o)):(i||(i=[]),i.push(o));r&&(n.tooltip=r)}else t.aggregate?n.tooltip=t:i=t;return Le(i)&&i.length===1&&(i=i[0]),{customTooltipWithoutAggregatedField:i,filteredEncoding:n}}function U8(e,t,n,r=!0){if("tooltip"in n)return{tooltip:n.tooltip};const i=e.map(({fieldPrefix:s,titlePrefix:a})=>{const u=r?` of ${FK(t)}`:"";return{field:s+t.field,type:t.type,title:At(a)?{signal:`${a}"${escape(u)}"`}:a+u}}),o=WLt(n).map(RLt);return{tooltip:[...i,...Zc(o,Tn)]}}function FK(e){const{title:t,field:n}=e;return Ei(t,n)}function jK(e,t,n,r,i){const{scale:o,axis:s}=n;return({partName:a,mark:u,positionPrefix:l,endPositionPrefix:c=void 0,extraEncoding:f={}})=>{const d=FK(n);return xke(e,a,i,{mark:u,encoding:{[t]:{field:`${l}_${n.field}`,type:n.type,...d!==void 0?{title:d}:{},...o!==void 0?{scale:o}:{},...s!==void 0?{axis:s}:{}},...ft(c)?{[`${t}2`]:{field:`${c}_${n.field}`}}:{},...r,...f}})}}function xke(e,t,n,r){const{clip:i,color:o,opacity:s}=e,a=e.type;return e[t]||e[t]===void 0&&n[t]?[{...r,mark:{...n[t],...i?{clip:i}:{},...o?{color:o}:{},...s?{opacity:s}:{},...kf(r.mark)?r.mark:{type:r.mark},style:`${a}-${String(t)}`,...Km(e[t])?{}:e[t]}}]:[]}function Tke(e,t,n){const{encoding:r}=e,i=t==="vertical"?"y":"x",o=r[i],s=r[`${i}2`],a=r[`${i}Error`],u=r[`${i}Error2`];return{continuousAxisChannelDef:ok(o,n),continuousAxisChannelDef2:ok(s,n),continuousAxisChannelDefError:ok(a,n),continuousAxisChannelDefError2:ok(u,n),continuousAxis:i}}function ok(e,t){if(e!=null&&e.aggregate){const{aggregate:n,...r}=e;return n!==t&&Xe(yMt(n,t)),r}else return e}function Ske(e,t){const{mark:n,encoding:r}=e,{x:i,y:o}=r;if(kf(n)&&n.orient)return n.orient;if(Cp(i)){if(Cp(o)){const s=Qe(i)&&i.aggregate,a=Qe(o)&&o.aggregate;if(!s&&a===t)return"vertical";if(!a&&s===t)return"horizontal";if(s===t&&a===t)throw new Error("Both x and y cannot have aggregate");return Jb(o)&&!Jb(i)?"horizontal":"vertical"}return"horizontal"}else{if(Cp(o))return"vertical";throw new Error(`Need a valid continuous axis for ${t}s`)}}const OP="boxplot",KLt=["box","median","outliers","rule","ticks"],XLt=new D3(OP,Ake);function Cke(e){return jn(e)?"tukey":e}function Ake(e,{config:t}){e={...e,encoding:O3(e.encoding,t)};const{mark:n,encoding:r,params:i,projection:o,...s}=e,a=kf(n)?n:{type:n};i&&Xe(x2e("boxplot"));const u=a.extent??t.boxplot.extent,l=Kn("size",a,t),c=a.invalid,f=Cke(u),{bins:d,timeUnits:h,transform:p,continuousAxisChannelDef:m,continuousAxis:g,groupby:y,aggregate:v,encodingWithoutContinuousAxis:_,ticksOrient:w,boxOrient:E,customTooltipWithoutAggregatedField:S}=QLt(e,u,t),T=sw(m.field),{color:C,size:A,...R}=_,N=$e=>jK(a,g,m,$e,t.boxplot),O=N(R),D=N(_),M=(ht(t.boxplot.box)?t.boxplot.box.color:t.mark.color)||"#4c78a8",F=N({...R,...A?{size:A}:{},color:{condition:{test:`datum['lower_box_${m.field}'] >= datum['upper_box_${m.field}']`,...C||{value:M}}}}),L=U8([{fieldPrefix:f==="min-max"?"upper_whisker_":"max_",titlePrefix:"Max"},{fieldPrefix:"upper_box_",titlePrefix:"Q3"},{fieldPrefix:"mid_box_",titlePrefix:"Median"},{fieldPrefix:"lower_box_",titlePrefix:"Q1"},{fieldPrefix:f==="min-max"?"lower_whisker_":"min_",titlePrefix:"Min"}],m,_),B={type:"tick",color:"black",opacity:1,orient:w,invalid:c,aria:!1},U=f==="min-max"?L:U8([{fieldPrefix:"upper_whisker_",titlePrefix:"Upper Whisker"},{fieldPrefix:"lower_whisker_",titlePrefix:"Lower Whisker"}],m,_),H=[...O({partName:"rule",mark:{type:"rule",invalid:c,aria:!1},positionPrefix:"lower_whisker",endPositionPrefix:"lower_box",extraEncoding:U}),...O({partName:"rule",mark:{type:"rule",invalid:c,aria:!1},positionPrefix:"upper_box",endPositionPrefix:"upper_whisker",extraEncoding:U}),...O({partName:"ticks",mark:B,positionPrefix:"lower_whisker",extraEncoding:U}),...O({partName:"ticks",mark:B,positionPrefix:"upper_whisker",extraEncoding:U})],P=[...f!=="tukey"?H:[],...D({partName:"box",mark:{type:"bar",...l?{size:l}:{},orient:E,invalid:c,ariaRoleDescription:"box"},positionPrefix:"lower_box",endPositionPrefix:"upper_box",extraEncoding:L}),...F({partName:"median",mark:{type:"tick",invalid:c,...ht(t.boxplot.median)&&t.boxplot.median.color?{color:t.boxplot.median.color}:{},...l?{size:l}:{},orient:w,aria:!1},positionPrefix:"mid_box",extraEncoding:L})];if(f==="min-max")return{...s,transform:(s.transform??[]).concat(p),layer:P};const z=`datum["lower_box_${m.field}"]`,W=`datum["upper_box_${m.field}"]`,j=`(${W} - ${z})`,q=`${z} - ${u} * ${j}`,G=`${W} + ${u} * ${j}`,te=`datum["${m.field}"]`,pe={joinaggregate:kke(m.field),groupby:y},be={transform:[{filter:`(${q} <= ${te}) && (${te} <= ${G})`},{aggregate:[{op:"min",field:m.field,as:`lower_whisker_${T}`},{op:"max",field:m.field,as:`upper_whisker_${T}`},{op:"min",field:`lower_box_${m.field}`,as:`lower_box_${T}`},{op:"max",field:`upper_box_${m.field}`,as:`upper_box_${T}`},...v],groupby:y}],layer:H},{tooltip:le,...me}=R,{scale:Se,axis:ge}=m,tt=FK(m),Ue=Oa(ge,["title"]),mt=xke(a,"outliers",t.boxplot,{transform:[{filter:`(${te} < ${q}) || (${te} > ${G})`}],mark:"point",encoding:{[g]:{field:m.field,type:m.type,...tt!==void 0?{title:tt}:{},...Se!==void 0?{scale:Se}:{},...ur(Ue)?{}:{axis:Ue}},...me,...C?{color:C}:{},...S?{tooltip:S}:{}}})[0];let it;const Re=[...d,...h,pe];return mt?it={transform:Re,layer:[mt,be]}:(it=be,it.transform.unshift(...Re)),{...s,layer:[it,{transform:p,layer:P}]}}function kke(e){const t=sw(e);return[{op:"q1",field:e,as:`lower_box_${t}`},{op:"q3",field:e,as:`upper_box_${t}`}]}function QLt(e,t,n){const r=Ske(e,OP),{continuousAxisChannelDef:i,continuousAxis:o}=Tke(e,r,OP),s=i.field,a=sw(s),u=Cke(t),l=[...kke(s),{op:"median",field:s,as:`mid_box_${a}`},{op:"min",field:s,as:(u==="min-max"?"lower_whisker_":"min_")+a},{op:"max",field:s,as:(u==="min-max"?"upper_whisker_":"max_")+a}],c=u==="min-max"||u==="tukey"?[]:[{calculate:`datum["upper_box_${a}"] - datum["lower_box_${a}"]`,as:`iqr_${a}`},{calculate:`min(datum["upper_box_${a}"] + datum["iqr_${a}"] * ${t}, datum["max_${a}"])`,as:`upper_whisker_${a}`},{calculate:`max(datum["lower_box_${a}"] - datum["iqr_${a}"] * ${t}, datum["min_${a}"])`,as:`lower_whisker_${a}`}],{[o]:f,...d}=e.encoding,{customTooltipWithoutAggregatedField:h,filteredEncoding:p}=YLt(d),{bins:m,timeUnits:g,aggregate:y,groupby:v,encoding:_}=wke(p,n),w=r==="vertical"?"horizontal":"vertical",E=r,S=[...m,...g,{aggregate:[...y,...l],groupby:v},...c];return{bins:m,timeUnits:g,transform:S,groupby:v,aggregate:y,continuousAxisChannelDef:i,continuousAxis:o,encodingWithoutContinuousAxis:_,ticksOrient:w,boxOrient:E,customTooltipWithoutAggregatedField:h}}const BK="errorbar",JLt=["ticks","rule"],ZLt=new D3(BK,Ike);function Ike(e,{config:t}){e={...e,encoding:O3(e.encoding,t)};const{transform:n,continuousAxisChannelDef:r,continuousAxis:i,encodingWithoutContinuousAxis:o,ticksOrient:s,markDef:a,outerSpec:u,tooltipEncoding:l}=Rke(e,BK,t);delete o.size;const c=jK(a,i,r,o,t.errorbar),f=a.thickness,d=a.size,h={type:"tick",orient:s,aria:!1,...f!==void 0?{thickness:f}:{},...d!==void 0?{size:d}:{}},p=[...c({partName:"ticks",mark:h,positionPrefix:"lower",extraEncoding:l}),...c({partName:"ticks",mark:h,positionPrefix:"upper",extraEncoding:l}),...c({partName:"rule",mark:{type:"rule",ariaRoleDescription:"errorbar",...f!==void 0?{size:f}:{}},positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:l})];return{...u,transform:n,...p.length>1?{layer:p}:{...p[0]}}}function e6t(e,t){const{encoding:n}=e;if(t6t(n))return{orient:Ske(e,t),inputType:"raw"};const r=n6t(n),i=r6t(n),o=n.x,s=n.y;if(r){if(i)throw new Error(`${t} cannot be both type aggregated-upper-lower and aggregated-error`);const a=n.x2,u=n.y2;if(Yt(a)&&Yt(u))throw new Error(`${t} cannot have both x2 and y2`);if(Yt(a)){if(Cp(o))return{orient:"horizontal",inputType:"aggregated-upper-lower"};throw new Error(`Both x and x2 have to be quantitative in ${t}`)}else if(Yt(u)){if(Cp(s))return{orient:"vertical",inputType:"aggregated-upper-lower"};throw new Error(`Both y and y2 have to be quantitative in ${t}`)}throw new Error("No ranged axis")}else{const a=n.xError,u=n.xError2,l=n.yError,c=n.yError2;if(Yt(u)&&!Yt(a))throw new Error(`${t} cannot have xError2 without xError`);if(Yt(c)&&!Yt(l))throw new Error(`${t} cannot have yError2 without yError`);if(Yt(a)&&Yt(l))throw new Error(`${t} cannot have both xError and yError with both are quantiative`);if(Yt(a)){if(Cp(o))return{orient:"horizontal",inputType:"aggregated-error"};throw new Error("All x, xError, and xError2 (if exist) have to be quantitative")}else if(Yt(l)){if(Cp(s))return{orient:"vertical",inputType:"aggregated-error"};throw new Error("All y, yError, and yError2 (if exist) have to be quantitative")}throw new Error("No ranged axis")}}function t6t(e){return(Yt(e.x)||Yt(e.y))&&!Yt(e.x2)&&!Yt(e.y2)&&!Yt(e.xError)&&!Yt(e.xError2)&&!Yt(e.yError)&&!Yt(e.yError2)}function n6t(e){return Yt(e.x2)||Yt(e.y2)}function r6t(e){return Yt(e.xError)||Yt(e.xError2)||Yt(e.yError)||Yt(e.yError2)}function Rke(e,t,n){const{mark:r,encoding:i,params:o,projection:s,...a}=e,u=kf(r)?r:{type:r};o&&Xe(x2e(t));const{orient:l,inputType:c}=e6t(e,t),{continuousAxisChannelDef:f,continuousAxisChannelDef2:d,continuousAxisChannelDefError:h,continuousAxisChannelDefError2:p,continuousAxis:m}=Tke(e,l,t),{errorBarSpecificAggregate:g,postAggregateCalculates:y,tooltipSummary:v,tooltipTitleWithFieldName:_}=i6t(u,f,d,h,p,c,t,n),{[m]:w,[m==="x"?"x2":"y2"]:E,[m==="x"?"xError":"yError"]:S,[m==="x"?"xError2":"yError2"]:T,...C}=i,{bins:A,timeUnits:R,aggregate:N,groupby:O,encoding:D}=wke(C,n),M=[...N,...g],F=c!=="raw"?[]:O,L=U8(v,f,D,_);return{transform:[...a.transform??[],...A,...R,...M.length===0?[]:[{aggregate:M,groupby:F}],...y],groupby:F,continuousAxisChannelDef:f,continuousAxis:m,encodingWithoutContinuousAxis:D,ticksOrient:l==="vertical"?"horizontal":"vertical",markDef:u,outerSpec:a,tooltipEncoding:L}}function i6t(e,t,n,r,i,o,s,a){let u=[],l=[];const c=t.field;let f,d=!1;if(o==="raw"){const h=e.center?e.center:e.extent?e.extent==="iqr"?"median":"mean":a.errorbar.center,p=e.extent?e.extent:h==="mean"?"stderr":"iqr";if(h==="median"!=(p==="iqr")&&Xe(gMt(h,p,s)),p==="stderr"||p==="stdev")u=[{op:p,field:c,as:`extent_${c}`},{op:h,field:c,as:`center_${c}`}],l=[{calculate:`datum["center_${c}"] + datum["extent_${c}"]`,as:`upper_${c}`},{calculate:`datum["center_${c}"] - datum["extent_${c}"]`,as:`lower_${c}`}],f=[{fieldPrefix:"center_",titlePrefix:uA(h)},{fieldPrefix:"upper_",titlePrefix:Wae(h,p,"+")},{fieldPrefix:"lower_",titlePrefix:Wae(h,p,"-")}],d=!0;else{let m,g,y;p==="ci"?(m="mean",g="ci0",y="ci1"):(m="median",g="q1",y="q3"),u=[{op:g,field:c,as:`lower_${c}`},{op:y,field:c,as:`upper_${c}`},{op:m,field:c,as:`center_${c}`}],f=[{fieldPrefix:"upper_",titlePrefix:W1({field:c,aggregate:y,type:"quantitative"},a,{allowDisabling:!1})},{fieldPrefix:"lower_",titlePrefix:W1({field:c,aggregate:g,type:"quantitative"},a,{allowDisabling:!1})},{fieldPrefix:"center_",titlePrefix:W1({field:c,aggregate:m,type:"quantitative"},a,{allowDisabling:!1})}]}}else{(e.center||e.extent)&&Xe(mMt(e.center,e.extent)),o==="aggregated-upper-lower"?(f=[],l=[{calculate:`datum["${n.field}"]`,as:`upper_${c}`},{calculate:`datum["${c}"]`,as:`lower_${c}`}]):o==="aggregated-error"&&(f=[{fieldPrefix:"",titlePrefix:c}],l=[{calculate:`datum["${c}"] + datum["${r.field}"]`,as:`upper_${c}`}],i?l.push({calculate:`datum["${c}"] + datum["${i.field}"]`,as:`lower_${c}`}):l.push({calculate:`datum["${c}"] - datum["${r.field}"]`,as:`lower_${c}`}));for(const h of l)f.push({fieldPrefix:h.as.substring(0,6),titlePrefix:iy(iy(h.calculate,'datum["',""),'"]',"")})}return{postAggregateCalculates:l,errorBarSpecificAggregate:u,tooltipSummary:f,tooltipTitleWithFieldName:d}}function Wae(e,t,n){return`${uA(e)} ${n} ${t}`}const UK="errorband",o6t=["band","borders"],s6t=new D3(UK,Nke);function Nke(e,{config:t}){e={...e,encoding:O3(e.encoding,t)};const{transform:n,continuousAxisChannelDef:r,continuousAxis:i,encodingWithoutContinuousAxis:o,markDef:s,outerSpec:a,tooltipEncoding:u}=Rke(e,UK,t),l=s,c=jK(l,i,r,o,t.errorband),f=e.encoding.x!==void 0&&e.encoding.y!==void 0;let d={type:f?"area":"rect"},h={type:f?"line":"rule"};const p={...l.interpolate?{interpolate:l.interpolate}:{},...l.tension&&l.interpolate?{tension:l.tension}:{}};return f?(d={...d,...p,ariaRoleDescription:"errorband"},h={...h,...p,aria:!1}):l.interpolate?Xe(Lae("interpolate")):l.tension&&Xe(Lae("tension")),{...a,transform:n,layer:[...c({partName:"band",mark:d,positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:u}),...c({partName:"borders",mark:h,positionPrefix:"lower",extraEncoding:u}),...c({partName:"borders",mark:h,positionPrefix:"upper",extraEncoding:u})]}}const Pke={};function zK(e,t,n){const r=new D3(e,t);Pke[e]={normalizer:r,parts:n}}function a6t(){return We(Pke)}zK(OP,Ake,KLt);zK(BK,Ike,JLt);zK(UK,Nke,o6t);const u6t=["gradientHorizontalMaxLength","gradientHorizontalMinLength","gradientVerticalMaxLength","gradientVerticalMinLength","unselectedOpacity"],Dke={titleAlign:"align",titleAnchor:"anchor",titleAngle:"angle",titleBaseline:"baseline",titleColor:"color",titleFont:"font",titleFontSize:"fontSize",titleFontStyle:"fontStyle",titleFontWeight:"fontWeight",titleLimit:"limit",titleLineHeight:"lineHeight",titleOrient:"orient",titlePadding:"offset"},Oke={labelAlign:"align",labelAnchor:"anchor",labelAngle:"angle",labelBaseline:"baseline",labelColor:"color",labelFont:"font",labelFontSize:"fontSize",labelFontStyle:"fontStyle",labelFontWeight:"fontWeight",labelLimit:"limit",labelLineHeight:"lineHeight",labelOrient:"orient",labelPadding:"offset"},l6t=We(Dke),c6t=We(Oke),f6t={header:1,headerRow:1,headerColumn:1,headerFacet:1},$ke=We(f6t),Mke=["size","shape","fill","stroke","strokeDash","strokeWidth","opacity"],d6t={gradientHorizontalMaxLength:200,gradientHorizontalMinLength:100,gradientVerticalMaxLength:200,gradientVerticalMinLength:64,unselectedOpacity:.35},h6t={aria:1,clipHeight:1,columnPadding:1,columns:1,cornerRadius:1,description:1,direction:1,fillColor:1,format:1,formatType:1,gradientLength:1,gradientOpacity:1,gradientStrokeColor:1,gradientStrokeWidth:1,gradientThickness:1,gridAlign:1,labelAlign:1,labelBaseline:1,labelColor:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labelSeparation:1,legendX:1,legendY:1,offset:1,orient:1,padding:1,rowPadding:1,strokeColor:1,symbolDash:1,symbolDashOffset:1,symbolFillColor:1,symbolLimit:1,symbolOffset:1,symbolOpacity:1,symbolSize:1,symbolStrokeColor:1,symbolStrokeWidth:1,symbolType:1,tickCount:1,tickMinStep:1,title:1,titleAlign:1,titleAnchor:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titleOrient:1,titlePadding:1,type:1,values:1,zindex:1},pc="_vgsid_",p6t={point:{on:"click",fields:[pc],toggle:"event.shiftKey",resolve:"global",clear:"dblclick"},interval:{on:"[pointerdown, window:pointerup] > window:pointermove!",encodings:["x","y"],translate:"[pointerdown, window:pointerup] > window:pointermove!",zoom:"wheel!",mark:{fill:"#333",fillOpacity:.125,stroke:"white"},resolve:"global",clear:"dblclick"}};function VK(e){return e==="legend"||!!(e!=null&&e.legend)}function k4(e){return VK(e)&&ht(e)}function HK(e){return!!(e!=null&&e.select)}function Lke(e){const t=[];for(const n of e||[]){if(HK(n))continue;const{expr:r,bind:i,...o}=n;if(i&&r){const s={...o,bind:i,init:r};t.push(s)}else{const s={...o,...r?{update:r}:{},...i?{bind:i}:{}};t.push(s)}}return t}function m6t(e){return $3(e)||WK(e)||qK(e)}function qK(e){return"concat"in e}function $3(e){return"vconcat"in e}function WK(e){return"hconcat"in e}function Fke({step:e,offsetIsDiscrete:t}){return t?e.for??"offset":"position"}function Rf(e){return ht(e)&&e.step!==void 0}function Gae(e){return e.view||e.width||e.height}const Yae=20,g6t={align:1,bounds:1,center:1,columns:1,spacing:1},y6t=We(g6t);function v6t(e,t,n){const r=n[t],i={},{spacing:o,columns:s}=r;o!==void 0&&(i.spacing=o),s!==void 0&&(k3(e)&&!mA(e.facet)||qK(e))&&(i.columns=s),$3(e)&&(i.columns=1);for(const a of y6t)if(e[a]!==void 0)if(a==="spacing"){const u=e[a];i[a]=jn(u)?u:{row:u.row??o,column:u.column??o}}else i[a]=e[a];return i}function z8(e,t){return e[t]??e[t==="width"?"continuousWidth":"continuousHeight"]}function $P(e,t){const n=MP(e,t);return Rf(n)?n.step:jke}function MP(e,t){const n=e[t]??e[t==="width"?"discreteWidth":"discreteHeight"];return Ei(n,{step:e.step})}const jke=20,b6t={continuousWidth:200,continuousHeight:200,step:jke},_6t={background:"white",padding:5,timeFormat:"%b %d, %Y",countTitle:"Count of Records",view:b6t,mark:bLt,arc:{},area:{},bar:ELt,circle:{},geoshape:{},image:{},line:{},point:{},rect:xLt,rule:{color:"black"},square:{},text:{color:"black"},tick:TLt,trail:{},boxplot:{size:14,extent:1.5,box:{},median:{color:"white"},outliers:{},rule:{},ticks:null},errorbar:{center:"mean",rule:!0,ticks:!1},errorband:{band:{opacity:.3},borders:!1},scale:YMt,projection:{},legend:d6t,header:{titlePadding:10,labelPadding:10},headerColumn:{},headerRow:{},headerFacet:{},selection:p6t,style:{},title:{},facet:{spacing:Yae},concat:{spacing:Yae},normalizedNumberFormat:".0%"},cd=["#4c78a8","#f58518","#e45756","#72b7b2","#54a24b","#eeca3b","#b279a2","#ff9da6","#9d755d","#bab0ac"],Kae={text:11,guideLabel:10,guideTitle:11,groupTitle:13,groupSubtitle:12},Xae={blue:cd[0],orange:cd[1],red:cd[2],teal:cd[3],green:cd[4],yellow:cd[5],purple:cd[6],pink:cd[7],brown:cd[8],gray0:"#000",gray1:"#111",gray2:"#222",gray3:"#333",gray4:"#444",gray5:"#555",gray6:"#666",gray7:"#777",gray8:"#888",gray9:"#999",gray10:"#aaa",gray11:"#bbb",gray12:"#ccc",gray13:"#ddd",gray14:"#eee",gray15:"#fff"};function w6t(e={}){return{signals:[{name:"color",value:ht(e)?{...Xae,...e}:Xae}],mark:{color:{signal:"color.blue"}},rule:{color:{signal:"color.gray0"}},text:{color:{signal:"color.gray0"}},style:{"guide-label":{fill:{signal:"color.gray0"}},"guide-title":{fill:{signal:"color.gray0"}},"group-title":{fill:{signal:"color.gray0"}},"group-subtitle":{fill:{signal:"color.gray0"}},cell:{stroke:{signal:"color.gray8"}}},axis:{domainColor:{signal:"color.gray13"},gridColor:{signal:"color.gray8"},tickColor:{signal:"color.gray13"}},range:{category:[{signal:"color.blue"},{signal:"color.orange"},{signal:"color.red"},{signal:"color.teal"},{signal:"color.green"},{signal:"color.yellow"},{signal:"color.purple"},{signal:"color.pink"},{signal:"color.brown"},{signal:"color.grey8"}]}}}function E6t(e){return{signals:[{name:"fontSize",value:ht(e)?{...Kae,...e}:Kae}],text:{fontSize:{signal:"fontSize.text"}},style:{"guide-label":{fontSize:{signal:"fontSize.guideLabel"}},"guide-title":{fontSize:{signal:"fontSize.guideTitle"}},"group-title":{fontSize:{signal:"fontSize.groupTitle"}},"group-subtitle":{fontSize:{signal:"fontSize.groupSubtitle"}}}}}function x6t(e){return{text:{font:e},style:{"guide-label":{font:e},"guide-title":{font:e},"group-title":{font:e},"group-subtitle":{font:e}}}}function Bke(e){const t=We(e||{}),n={};for(const r of t){const i=e[r];n[r]=vA(i)?g2e(i):eu(i)}return n}function T6t(e){const t=We(e),n={};for(const r of t)n[r]=Bke(e[r]);return n}const S6t=[...nke,...vke,...$ke,"background","padding","legend","lineBreak","scale","style","title","view"];function Uke(e={}){const{color:t,font:n,fontSize:r,selection:i,...o}=e,s=K_({},Vt(_6t),n?x6t(n):{},t?w6t(t):{},r?E6t(r):{},o||{});i&&X_(s,"selection",i,!0);const a=Oa(s,S6t);for(const u of["background","lineBreak","padding"])s[u]&&(a[u]=eu(s[u]));for(const u of nke)s[u]&&(a[u]=ga(s[u]));for(const u of vke)s[u]&&(a[u]=Bke(s[u]));for(const u of $ke)s[u]&&(a[u]=ga(s[u]));return s.legend&&(a.legend=ga(s.legend)),s.scale&&(a.scale=ga(s.scale)),s.style&&(a.style=T6t(s.style)),s.title&&(a.title=ga(s.title)),s.view&&(a.view=ga(s.view)),a}const C6t=new Set(["view",...hLt]),A6t=["color","fontSize","background","padding","facet","concat","numberFormat","numberFormatType","normalizedNumberFormat","normalizedNumberFormatType","timeFormat","countTitle","header","axisQuantitative","axisTemporal","axisDiscrete","axisPoint","axisXBand","axisXPoint","axisXDiscrete","axisXQuantitative","axisXTemporal","axisYBand","axisYPoint","axisYDiscrete","axisYQuantitative","axisYTemporal","scale","selection","overlay"],k6t={view:["continuousWidth","continuousHeight","discreteWidth","discreteHeight","step"],...vLt};function I6t(e){e=Vt(e);for(const t of A6t)delete e[t];if(e.axis)for(const t in e.axis)vA(e.axis[t])&&delete e.axis[t];if(e.legend)for(const t of u6t)delete e.legend[t];if(e.mark){for(const t of Bae)delete e.mark[t];e.mark.tooltip&&ht(e.mark.tooltip)&&delete e.mark.tooltip}e.params&&(e.signals=(e.signals||[]).concat(Lke(e.params)),delete e.params);for(const t of C6t){for(const r of Bae)delete e[t][r];const n=k6t[t];if(n)for(const r of n)delete e[t][r];N6t(e,t)}for(const t of a6t())delete e[t];R6t(e);for(const t in e)ht(e[t])&&ur(e[t])&&delete e[t];return ur(e)?void 0:e}function R6t(e){const{titleMarkConfig:t,subtitleMarkConfig:n,subtitle:r}=m2e(e.title);ur(t)||(e.style["group-title"]={...e.style["group-title"],...t}),ur(n)||(e.style["group-subtitle"]={...e.style["group-subtitle"],...n}),ur(r)?delete e.title:e.title=r}function N6t(e,t,n,r){const i=e[t];t==="view"&&(n="cell");const o={...i,...e.style[n??t]};ur(o)||(e.style[n??t]=o),delete e[t]}function M3(e){return"layer"in e}function P6t(e){return"repeat"in e}function D6t(e){return!Le(e.repeat)&&e.repeat.layer}class GK{map(t,n){return k3(t)?this.mapFacet(t,n):P6t(t)?this.mapRepeat(t,n):WK(t)?this.mapHConcat(t,n):$3(t)?this.mapVConcat(t,n):qK(t)?this.mapConcat(t,n):this.mapLayerOrUnit(t,n)}mapLayerOrUnit(t,n){if(M3(t))return this.mapLayer(t,n);if(Oh(t))return this.mapUnit(t,n);throw new Error(lK(t))}mapLayer(t,n){return{...t,layer:t.layer.map(r=>this.mapLayerOrUnit(r,n))}}mapHConcat(t,n){return{...t,hconcat:t.hconcat.map(r=>this.map(r,n))}}mapVConcat(t,n){return{...t,vconcat:t.vconcat.map(r=>this.map(r,n))}}mapConcat(t,n){const{concat:r,...i}=t;return{...i,concat:r.map(o=>this.map(o,n))}}mapFacet(t,n){return{...t,spec:this.map(t.spec,n)}}mapRepeat(t,n){return{...t,spec:this.map(t.spec,n)}}}const O6t={zero:1,center:1,normalize:1};function $6t(e){return e in O6t}const M6t=new Set([Z2e,T3,x3,IP,C3,IK,RK,S3,eke,kK]),L6t=new Set([T3,x3,Z2e]);function Nv(e){return Qe(e)&&Xb(e)==="quantitative"&&!e.bin}function Qae(e,t,{orient:n,type:r}){const i=t==="x"?"y":"radius",o=t==="x"&&["bar","area"].includes(r),s=e[t],a=e[i];if(Qe(s)&&Qe(a))if(Nv(s)&&Nv(a)){if(s.stack)return t;if(a.stack)return i;const u=Qe(s)&&!!s.aggregate,l=Qe(a)&&!!a.aggregate;if(u!==l)return u?t:i;if(o){if(n==="vertical")return i;if(n==="horizontal")return t}}else{if(Nv(s))return t;if(Nv(a))return i}else{if(Nv(s))return o&&n==="vertical"?void 0:t;if(Nv(a))return o&&n==="horizontal"?void 0:i}}function F6t(e){switch(e){case"x":return"y";case"y":return"x";case"theta":return"radius";case"radius":return"theta"}}function zke(e,t){var m,g;const n=kf(e)?e:{type:e},r=n.type;if(!M6t.has(r))return null;const i=Qae(t,"x",n)||Qae(t,"theta",n);if(!i)return null;const o=t[i],s=Qe(o)?ot(o,{}):void 0,a=F6t(i),u=[],l=new Set;if(t[a]){const y=t[a],v=Qe(y)?ot(y,{}):void 0;v&&v!==s&&(u.push(a),l.add(v))}const c=a==="x"?"xOffset":"yOffset",f=t[c],d=Qe(f)?ot(f,{}):void 0;d&&d!==s&&(u.push(c),l.add(d));const h=Q$t.reduce((y,v)=>{if(v!=="tooltip"&&w0(t,v)){const _=t[v];for(const w of ct(_)){const E=If(w);if(E.aggregate)continue;const S=ot(E,{});(!S||!l.has(S))&&y.push({channel:v,fieldDef:E})}}return y},[]);let p;return o.stack!==void 0?Km(o.stack)?p=o.stack?"zero":null:p=o.stack:L6t.has(r)&&(p="zero"),!p||!$6t(p)||MK(t)&&h.length===0?null:((m=o==null?void 0:o.scale)!=null&&m.type&&((g=o==null?void 0:o.scale)==null?void 0:g.type)!==$a.LINEAR&&o!=null&&o.stack&&Xe(dMt(o.scale.type)),Yt(t[Qf(i)])?(o.stack!==void 0&&Xe(fMt(i)),null):(Qe(o)&&o.aggregate&&!l3t.has(o.aggregate)&&Xe(hMt(o.aggregate)),{groupbyChannels:u,groupbyFields:l,fieldChannel:i,impute:o.impute===null?!1:Zy(r),stackBy:h,offset:p}))}function Vke(e,t,n){const r=ga(e),i=Kn("orient",r,n);if(r.orient=z6t(r.type,t,i),i!==void 0&&i!==r.orient&&Xe(K3t(r.orient,i)),r.type==="bar"&&r.orient){const u=Kn("cornerRadiusEnd",r,n);if(u!==void 0){const l=r.orient==="horizontal"&&t.x2||r.orient==="vertical"&&t.y2?["cornerRadius"]:wLt[r.orient];for(const c of l)r[c]=u;r.cornerRadiusEnd!==void 0&&delete r.cornerRadiusEnd}}const o=Kn("opacity",r,n),s=Kn("fillOpacity",r,n);return o===void 0&&s===void 0&&(r.opacity=B6t(r.type,t)),Kn("cursor",r,n)===void 0&&(r.cursor=j6t(r,t,n)),r}function j6t(e,t,n){return t.href||e.href||Kn("href",e,n)?"pointer":e.cursor}function B6t(e,t){if(Sn([C3,kK,IK,RK],e)&&!MK(t))return .7}function U6t(e,t,{graticule:n}){if(n)return!1;const r=ph("filled",e,t),i=e.type;return Ei(r,i!==C3&&i!==S3&&i!==IP)}function z6t(e,t,n){switch(e){case C3:case IK:case RK:case eke:case fLt:case cLt:return}const{x:r,y:i,x2:o,y2:s}=t;switch(e){case T3:if(Qe(r)&&(Io(r.bin)||Qe(i)&&i.aggregate&&!r.aggregate))return"vertical";if(Qe(i)&&(Io(i.bin)||Qe(r)&&r.aggregate&&!i.aggregate))return"horizontal";if(s||o){if(n)return n;if(!o)return(Qe(r)&&r.type===ay&&!Cr(r.bin)||RP(r))&&Qe(i)&&Io(i.bin)?"horizontal":"vertical";if(!s)return(Qe(i)&&i.type===ay&&!Cr(i.bin)||RP(i))&&Qe(r)&&Io(r.bin)?"vertical":"horizontal"}case IP:if(o&&!(Qe(r)&&Io(r.bin))&&s&&!(Qe(i)&&Io(i.bin)))return;case x3:if(s)return Qe(i)&&Io(i.bin)?"horizontal":"vertical";if(o)return Qe(r)&&Io(r.bin)?"vertical":"horizontal";if(e===IP){if(r&&!i)return"vertical";if(i&&!r)return"horizontal"}case S3:case kK:{const a=Vae(r),u=Vae(i);if(n)return n;if(a&&!u)return e!=="tick"?"horizontal":"vertical";if(!a&&u)return e!=="tick"?"vertical":"horizontal";if(a&&u)return"vertical";{const l=Ks(r)&&r.type===Yb,c=Ks(i)&&i.type===Yb;if(l&&!c)return"vertical";if(!l&&c)return"horizontal"}return}}return"vertical"}function V6t(e){const{point:t,line:n,...r}=e;return We(r).length>1?r:r.type}function H6t(e){for(const t of["line","area","rule","trail"])e[t]&&(e={...e,[t]:Oa(e[t],["point","line"])});return e}function I4(e,t={},n){return e.point==="transparent"?{opacity:0}:e.point?ht(e.point)?e.point:{}:e.point!==void 0?null:t.point||n.shape?ht(t.point)?t.point:{}:void 0}function Jae(e,t={}){return e.line?e.line===!0?{}:e.line:e.line!==void 0?null:t.line?t.line===!0?{}:t.line:void 0}class q6t{constructor(){this.name="path-overlay"}hasMatchingType(t,n){if(Oh(t)){const{mark:r,encoding:i}=t,o=kf(r)?r:{type:r};switch(o.type){case"line":case"rule":case"trail":return!!I4(o,n[o.type],i);case"area":return!!I4(o,n[o.type],i)||!!Jae(o,n[o.type])}}return!1}run(t,n,r){const{config:i}=n,{params:o,projection:s,mark:a,name:u,encoding:l,...c}=t,f=O3(l,i),d=kf(a)?a:{type:a},h=I4(d,i[d.type],f),p=d.type==="area"&&Jae(d,i[d.type]),m=[{name:u,...o?{params:o}:{},mark:V6t({...d.type==="area"&&d.opacity===void 0&&d.fillOpacity===void 0?{opacity:.7}:{},...d}),encoding:Oa(f,["shape"])}],g=zke(Vke(d,f,i),f);let y=f;if(g){const{fieldChannel:v,offset:_}=g;y={...f,[v]:{...f[v],..._?{stack:_}:{}}}}return y=Oa(y,["y2","x2"]),p&&m.push({...s?{projection:s}:{},mark:{type:"line",...Hb(d,["clip","interpolate","tension","tooltip"]),...p},encoding:y}),h&&m.push({...s?{projection:s}:{},mark:{type:"point",opacity:1,filled:!0,...Hb(d,["clip","tooltip"]),...h},encoding:y}),r({...c,layer:m},{...n,config:H6t(i)})}}function W6t(e,t){return t?mA(e)?qke(e,t):Hke(e,t):e}function R4(e,t){return t?qke(e,t):e}function V8(e,t,n){const r=t[e];if(kLt(r)){if(r.repeat in n)return{...t,[e]:n[r.repeat]};Xe(I3t(r.repeat));return}return t}function Hke(e,t){if(e=V8("field",e,t),e!==void 0){if(e===null)return null;if(PK(e)&&mf(e.sort)){const n=V8("field",e.sort,t);e={...e,...n?{sort:n}:{}}}return e}}function Zae(e,t){if(Qe(e))return Hke(e,t);{const n=V8("datum",e,t);return n!==e&&!n.type&&(n.type="nominal"),n}}function eue(e,t){if(Yt(e)){const n=Zae(e,t);if(n)return n;if(I3(e))return{condition:e.condition}}else{if(gA(e)){const n=Zae(e.condition,t);if(n)return{...e,condition:n};{const{condition:r,...i}=e;return i}}return e}}function qke(e,t){const n={};for(const r in e)if($t(e,r)){const i=e[r];if(Le(i))n[r]=i.map(o=>eue(o,t)).filter(o=>o);else{const o=eue(i,t);o!==void 0&&(n[r]=o)}}return n}class G6t{constructor(){this.name="RuleForRangedLine"}hasMatchingType(t){if(Oh(t)){const{encoding:n,mark:r}=t;if(r==="line"||kf(r)&&r.type==="line")for(const i of Y$t){const o=Ky(i),s=n[o];if(n[i]&&(Qe(s)&&!Io(s.bin)||Zf(s)))return!0}}return!1}run(t,n,r){const{encoding:i,mark:o}=t;return Xe(Y3t(!!i.x2,!!i.y2)),r({...t,mark:ht(o)?{...o,type:"rule"}:"rule"},n)}}class Y6t extends GK{constructor(){super(...arguments),this.nonFacetUnitNormalizers=[XLt,ZLt,s6t,new q6t,new G6t]}map(t,n){if(Oh(t)){const r=w0(t.encoding,Vd),i=w0(t.encoding,Hd),o=w0(t.encoding,h3);if(r||i||o)return this.mapFacetedUnit(t,n)}return super.map(t,n)}mapUnit(t,n){const{parentEncoding:r,parentProjection:i}=n,o=R4(t.encoding,n.repeater),s={...t,...t.name?{name:[n.repeaterPrefix,t.name].filter(u=>u).join("_")}:{},...o?{encoding:o}:{}};if(r||i)return this.mapUnitWithParentEncodingOrProjection(s,n);const a=this.mapLayerOrUnit.bind(this);for(const u of this.nonFacetUnitNormalizers)if(u.hasMatchingType(s,n.config))return u.run(s,n,a);return s}mapRepeat(t,n){return D6t(t)?this.mapLayerRepeat(t,n):this.mapNonLayerRepeat(t,n)}mapLayerRepeat(t,n){const{repeat:r,spec:i,...o}=t,{row:s,column:a,layer:u}=r,{repeater:l={},repeaterPrefix:c=""}=n;return s||a?this.mapRepeat({...t,repeat:{...s?{row:s}:{},...a?{column:a}:{}},spec:{repeat:{layer:u},spec:i}},n):{...o,layer:u.map(f=>{const d={...l,layer:f},h=`${(i.name?`${i.name}_`:"")+c}child__layer_${Vr(f)}`,p=this.mapLayerOrUnit(i,{...n,repeater:d,repeaterPrefix:h});return p.name=h,p})}}mapNonLayerRepeat(t,n){const{repeat:r,spec:i,data:o,...s}=t;!Le(r)&&t.columns&&(t=Oa(t,["columns"]),Xe(Dae("repeat")));const a=[],{repeater:u={},repeaterPrefix:l=""}=n,c=!Le(r)&&r.row||[u?u.row:null],f=!Le(r)&&r.column||[u?u.column:null],d=Le(r)&&r||[u?u.repeat:null];for(const p of d)for(const m of c)for(const g of f){const y={repeat:p,row:m,column:g,layer:u.layer},v=(i.name?`${i.name}_`:"")+l+"child__"+(Le(r)?`${Vr(p)}`:(r.row?`row_${Vr(m)}`:"")+(r.column?`column_${Vr(g)}`:"")),_=this.map(i,{...n,repeater:y,repeaterPrefix:v});_.name=v,a.push(Oa(_,["data"]))}const h=Le(r)?t.columns:r.column?r.column.length:1;return{data:i.data??o,align:"all",...s,columns:h,concat:a}}mapFacet(t,n){const{facet:r}=t;return mA(r)&&t.columns&&(t=Oa(t,["columns"]),Xe(Dae("facet"))),super.mapFacet(t,n)}mapUnitWithParentEncodingOrProjection(t,n){const{encoding:r,projection:i}=t,{parentEncoding:o,parentProjection:s,config:a}=n,u=nue({parentProjection:s,projection:i}),l=tue({parentEncoding:o,encoding:R4(r,n.repeater)});return this.mapUnit({...t,...u?{projection:u}:{},...l?{encoding:l}:{}},{config:a})}mapFacetedUnit(t,n){const{row:r,column:i,facet:o,...s}=t.encoding,{mark:a,width:u,projection:l,height:c,view:f,params:d,encoding:h,...p}=t,{facetMapping:m,layout:g}=this.getFacetMappingAndLayout({row:r,column:i,facet:o},n),y=R4(s,n.repeater);return this.mapFacet({...p,...g,facet:m,spec:{...u?{width:u}:{},...c?{height:c}:{},...f?{view:f}:{},...l?{projection:l}:{},mark:a,encoding:y,...d?{params:d}:{}}},n)}getFacetMappingAndLayout(t,n){const{row:r,column:i,facet:o}=t;if(r||i){o&&Xe(W3t([...r?[Vd]:[],...i?[Hd]:[]]));const s={},a={};for(const u of[Vd,Hd]){const l=t[u];if(l){const{align:c,center:f,spacing:d,columns:h,...p}=l;s[u]=p;for(const m of["align","center","spacing"])l[m]!==void 0&&(a[m]??(a[m]={}),a[m][u]=l[m])}}return{facetMapping:s,layout:a}}else{const{align:s,center:a,spacing:u,columns:l,...c}=o;return{facetMapping:W6t(c,n.repeater),layout:{...s?{align:s}:{},...a?{center:a}:{},...u?{spacing:u}:{},...l?{columns:l}:{}}}}}mapLayer(t,{parentEncoding:n,parentProjection:r,...i}){const{encoding:o,projection:s,...a}=t,u={...i,parentEncoding:tue({parentEncoding:n,encoding:o,layer:!0}),parentProjection:nue({parentProjection:r,projection:s})};return super.mapLayer({...a,...t.name?{name:[u.repeaterPrefix,t.name].filter(l=>l).join("_")}:{}},u)}}function tue({parentEncoding:e,encoding:t={},layer:n}){let r={};if(e){const i=new Set([...We(e),...We(t)]);for(const o of i){const s=t[o],a=e[o];if(Yt(s)){const u={...a,...s};r[o]=u}else gA(s)?r[o]={...s,condition:{...a,...s.condition}}:s||s===null?r[o]=s:(n||hc(a)||At(a)||Yt(a)||Le(a))&&(r[o]=a)}}else r=t;return!r||ur(r)?void 0:r}function nue(e){const{parentProjection:t,projection:n}=e;return t&&n&&Xe($3t({parentProjection:t,projection:n})),n??t}function YK(e){return"filter"in e}function K6t(e){return(e==null?void 0:e.stop)!==void 0}function Wke(e){return"lookup"in e}function X6t(e){return"data"in e}function Q6t(e){return"param"in e}function J6t(e){return"pivot"in e}function Z6t(e){return"density"in e}function e4t(e){return"quantile"in e}function t4t(e){return"regression"in e}function n4t(e){return"loess"in e}function r4t(e){return"sample"in e}function i4t(e){return"window"in e}function o4t(e){return"joinaggregate"in e}function s4t(e){return"flatten"in e}function a4t(e){return"calculate"in e}function Gke(e){return"bin"in e}function u4t(e){return"impute"in e}function l4t(e){return"timeUnit"in e}function c4t(e){return"aggregate"in e}function f4t(e){return"stack"in e}function d4t(e){return"fold"in e}function h4t(e){return"extent"in e&&!("density"in e)&&!("regression"in e)}function p4t(e){return e.map(t=>YK(t)?{filter:H1(t.filter,UMt)}:t)}class m4t extends GK{map(t,n){return n.emptySelections??(n.emptySelections={}),n.selectionPredicates??(n.selectionPredicates={}),t=rue(t,n),super.map(t,n)}mapLayerOrUnit(t,n){if(t=rue(t,n),t.encoding){const r={};for(const[i,o]of xm(t.encoding))r[i]=Yke(o,n);t={...t,encoding:r}}return super.mapLayerOrUnit(t,n)}mapUnit(t,n){const{selection:r,...i}=t;return r?{...i,params:xm(r).map(([o,s])=>{const{init:a,bind:u,empty:l,...c}=s;c.type==="single"?(c.type="point",c.toggle=!1):c.type==="multi"&&(c.type="point"),n.emptySelections[o]=l!=="none";for(const f of jo(n.selectionPredicates[o]??{}))f.empty=l!=="none";return{name:o,value:a,select:c,bind:u}})}:t}}function rue(e,t){const{transform:n,...r}=e;if(n){const i=n.map(o=>{if(YK(o))return{filter:H8(o,t)};if(Gke(o)&&Xy(o.bin))return{...o,bin:Kke(o.bin)};if(Wke(o)){const{selection:s,...a}=o.from;return s?{...o,from:{param:s,...a}}:o}return o});return{...r,transform:i}}return e}function Yke(e,t){var r,i;const n=Vt(e);if(Qe(n)&&Xy(n.bin)&&(n.bin=Kke(n.bin)),ev(n)&&((i=(r=n.scale)==null?void 0:r.domain)!=null&&i.selection)){const{selection:o,...s}=n.scale.domain;n.scale.domain={...s,...o?{param:o}:{}}}if(I3(n))if(Le(n.condition))n.condition=n.condition.map(o=>{const{selection:s,param:a,test:u,...l}=o;return a?o:{...l,test:H8(o,t)}});else{const{selection:o,param:s,test:a,...u}=Yke(n.condition,t);n.condition=s?n.condition:{...u,test:H8(n.condition,t)}}return n}function Kke(e){const t=e.extent;if(t!=null&&t.selection){const{selection:n,...r}=t;return{...e,extent:{...r,param:n}}}return e}function H8(e,t){const n=r=>H1(r,i=>{var o;const s=t.emptySelections[i]??!0,a={param:i,empty:s};return(o=t.selectionPredicates)[i]??(o[i]=[]),t.selectionPredicates[i].push(a),a});return e.selection?n(e.selection):H1(e.test||e.filter,r=>r.selection?n(r.selection):r)}class q8 extends GK{map(t,n){const r=n.selections??[];if(t.params&&!Oh(t)){const i=[];for(const o of t.params)HK(o)?r.push(o):i.push(o);t.params=i}return n.selections=r,super.map(t,n)}mapUnit(t,n){const r=n.selections;if(!r||!r.length)return t;const i=(n.path??[]).concat(t.name),o=[];for(const s of r)if(!s.views||!s.views.length)o.push(s);else for(const a of s.views)(ft(a)&&(a===t.name||i.includes(a))||Le(a)&&a.map(u=>i.indexOf(u)).every((u,l,c)=>u!==-1&&(l===0||u>c[l-1])))&&o.push(s);return o.length&&(t.params=o),t}}for(const e of["mapFacet","mapRepeat","mapHConcat","mapVConcat","mapLayer"]){const t=q8.prototype[e];q8.prototype[e]=function(n,r){return t.call(this,n,g4t(n,r))}}function g4t(e,t){return e.name?{...t,path:(t.path??[]).concat(e.name)}:t}function Xke(e,t){t===void 0&&(t=Uke(e.config));const n=_4t(e,t),{width:r,height:i}=e,o=w4t(n,{width:r,height:i,autosize:e.autosize},t);return{...n,...o?{autosize:o}:{}}}const y4t=new Y6t,v4t=new m4t,b4t=new q8;function _4t(e,t={}){const n={config:t};return b4t.map(y4t.map(v4t.map(e,n),n),n)}function iue(e){return ft(e)?{type:e}:e??{}}function w4t(e,t,n){let{width:r,height:i}=t;const o=Oh(e)||M3(e),s={};o?r=="container"&&i=="container"?(s.type="fit",s.contains="padding"):r=="container"?(s.type="fit-x",s.contains="padding"):i=="container"&&(s.type="fit-y",s.contains="padding"):(r=="container"&&(Xe(Iae("width")),r=void 0),i=="container"&&(Xe(Iae("height")),i=void 0));const a={type:"pad",...s,...n?iue(n.autosize):{},...iue(e.autosize)};if(a.type==="fit"&&!o&&(Xe(v3t),a.type="pad"),r=="container"&&!(a.type=="fit"||a.type=="fit-x")&&Xe(Rae("width")),i=="container"&&!(a.type=="fit"||a.type=="fit-y")&&Xe(Rae("height")),!uu(a,{type:"pad"}))return a}function E4t(e){return e==="fit"||e==="fit-x"||e==="fit-y"}function x4t(e){return e?`fit-${v3(e)}`:"fit"}const T4t=["background","padding"];function oue(e,t){const n={};for(const r of T4t)e&&e[r]!==void 0&&(n[r]=eu(e[r]));return t&&(n.params=e.params),n}class $h{constructor(t={},n={}){this.explicit=t,this.implicit=n}clone(){return new $h(Vt(this.explicit),Vt(this.implicit))}combine(){return{...this.explicit,...this.implicit}}get(t){return Ei(this.explicit[t],this.implicit[t])}getWithExplicit(t){return this.explicit[t]!==void 0?{explicit:!0,value:this.explicit[t]}:this.implicit[t]!==void 0?{explicit:!1,value:this.implicit[t]}:{explicit:!1,value:void 0}}setWithExplicit(t,{value:n,explicit:r}){n!==void 0&&this.set(t,n,r)}set(t,n,r){return delete this[r?"implicit":"explicit"][t],this[r?"explicit":"implicit"][t]=n,this}copyKeyFromSplit(t,{explicit:n,implicit:r}){n[t]!==void 0?this.set(t,n[t],!0):r[t]!==void 0&&this.set(t,r[t],!1)}copyKeyFromObject(t,n){n[t]!==void 0&&this.set(t,n[t],!0)}copyAll(t){for(const n of We(t.combine())){const r=t.getWithExplicit(n);this.setWithExplicit(n,r)}}}function jc(e){return{explicit:!0,value:e}}function Ka(e){return{explicit:!1,value:e}}function Qke(e){return(t,n,r,i)=>{const o=e(t.value,n.value);return o>0?t:o<0?n:L3(t,n,r,i)}}function L3(e,t,n,r){return e.explicit&&t.explicit&&Xe(iMt(n,r,e.value,t.value)),e}function Cm(e,t,n,r,i=L3){return e===void 0||e.value===void 0?t:e.explicit&&!t.explicit?e:t.explicit&&!e.explicit?t:uu(e.value,t.value)?e:i(e,t,n,r)}class S4t extends $h{constructor(t={},n={},r=!1){super(t,n),this.explicit=t,this.implicit=n,this.parseNothing=r}clone(){const t=super.clone();return t.parseNothing=this.parseNothing,t}}function Zb(e){return"url"in e}function NS(e){return"values"in e}function Jke(e){return"name"in e&&!Zb(e)&&!NS(e)&&!Xp(e)}function Xp(e){return e&&(Zke(e)||eIe(e)||KK(e))}function Zke(e){return"sequence"in e}function eIe(e){return"sphere"in e}function KK(e){return"graticule"in e}var jr;(function(e){e[e.Raw=0]="Raw",e[e.Main=1]="Main",e[e.Row=2]="Row",e[e.Column=3]="Column",e[e.Lookup=4]="Lookup"})(jr||(jr={}));function tIe(e){const{signals:t,hasLegend:n,index:r,...i}=e;return i.field=dl(i.field),i}function cy(e,t=!0,n=_s){if(Le(e)){const r=e.map(i=>cy(i,t,n));return t?`[${r.join(", ")}]`:r}else if(Qy(e))return n(t?sy(e):IMt(e));return t?n(lr(e)):e}function C4t(e,t){for(const n of jo(e.component.selection??{})){const r=n.name;let i=`${r}${km}, ${n.resolve==="global"?"true":`{unit: ${E0(e)}}`}`;for(const o of U3)o.defined(n)&&(o.signals&&(t=o.signals(e,n,t)),o.modifyExpr&&(i=o.modifyExpr(e,n,i)));t.push({name:r+iFt,on:[{events:{signal:n.name+km},update:`modify(${et(n.name+fy)}, ${i})`}]})}return XK(t)}function A4t(e,t){if(e.component.selection&&We(e.component.selection).length){const n=et(e.getName("cell"));t.unshift({name:"facet",value:{},on:[{events:Qm("pointermove","scope"),update:`isTuple(facet) ? facet : group(${n}).datum`}]})}return XK(t)}function k4t(e,t){let n=!1;for(const r of jo(e.component.selection??{})){const i=r.name,o=et(i+fy);if(t.filter(a=>a.name===i).length===0){const a=r.resolve==="global"?"union":r.resolve,u=r.type==="point"?", true, true)":")";t.push({name:r.name,update:`${bIe}(${o}, ${et(a)}${u}`})}n=!0;for(const a of U3)a.defined(r)&&a.topLevelSignals&&(t=a.topLevelSignals(e,r,t))}return n&&t.filter(i=>i.name==="unit").length===0&&t.unshift({name:"unit",value:{},on:[{events:"pointermove",update:"isTuple(group()) ? group() : unit"}]}),XK(t)}function I4t(e,t){const n=[...t],r=E0(e,{escape:!1});for(const i of jo(e.component.selection??{})){const o={name:i.name+fy};if(i.project.hasSelectionId&&(o.transform=[{type:"collect",sort:{field:pc}}]),i.init){const a=i.project.items.map(tIe);o.values=i.project.hasSelectionId?i.init.map(u=>({unit:r,[pc]:cy(u,!1)[0]})):i.init.map(u=>({unit:r,fields:a,values:cy(u,!1)}))}n.filter(a=>a.name===i.name+fy).length||n.push(o)}return n}function nIe(e,t){for(const n of jo(e.component.selection??{}))for(const r of U3)r.defined(n)&&r.marks&&(t=r.marks(e,n,t));return t}function R4t(e,t){for(const n of e.children)ai(n)&&(t=nIe(n,t));return t}function N4t(e,t,n,r){const i=TIe(e,t.param,t);return{signal:Au(n.get("type"))&&Le(r)&&r[0]>r[1]?`isValid(${i}) && reverse(${i})`:i}}function XK(e){return e.map(t=>(t.on&&!t.on.length&&delete t.on,t))}class sr{constructor(t,n){this.debugName=n,this._children=[],this._parent=null,t&&(this.parent=t)}clone(){throw new Error("Cannot clone node")}get parent(){return this._parent}set parent(t){this._parent=t,t&&t.addChild(this)}get children(){return this._children}numChildren(){return this._children.length}addChild(t,n){if(this._children.includes(t)){Xe(P3t);return}n!==void 0?this._children.splice(n,0,t):this._children.push(t)}removeChild(t){const n=this._children.indexOf(t);return this._children.splice(n,1),n}remove(){let t=this._parent.removeChild(this);for(const n of this._children)n._parent=this._parent,this._parent.addChild(n,t++)}insertAsParentOf(t){const n=t.parent;n.removeChild(this),this.parent=n,t.parent=this}swapWithParent(){const t=this._parent,n=t.parent;for(const i of this._children)i.parent=t;this._children=[],t.removeChild(this);const r=t.parent.removeChild(t);this._parent=n,n.addChild(this,r),t.parent=this}}class Ma extends sr{clone(){const t=new this.constructor;return t.debugName=`clone_${this.debugName}`,t._source=this._source,t._name=`clone_${this._name}`,t.type=this.type,t.refCounts=this.refCounts,t.refCounts[t._name]=0,t}constructor(t,n,r,i){super(t,n),this.type=r,this.refCounts=i,this._source=this._name=n,this.refCounts&&!(this._name in this.refCounts)&&(this.refCounts[this._name]=0)}dependentFields(){return new Set}producedFields(){return new Set}hash(){return this._hash===void 0&&(this._hash=`Output ${JAe()}`),this._hash}getSource(){return this.refCounts[this._name]++,this._source}isRequired(){return!!this.refCounts[this._name]}setSource(t){this._source=t}}function N4(e){return e.as!==void 0}function sue(e){return`${e}_end`}class gf extends sr{clone(){return new gf(null,Vt(this.timeUnits))}constructor(t,n){super(t),this.timeUnits=n}static makeFromEncoding(t,n){const r=n.reduceFieldDef((i,o,s)=>{const{field:a,timeUnit:u}=o;if(u){let l;if(Jy(u)){if(ai(n)){const{mark:c,markDef:f,config:d}=n,h=Sm({fieldDef:o,markDef:f,config:d});(RS(c)||h)&&(l={timeUnit:po(u),field:a})}}else l={as:ot(o,{forAs:!0}),field:a,timeUnit:u};if(ai(n)){const{mark:c,markDef:f,config:d}=n,h=Sm({fieldDef:o,markDef:f,config:d});RS(c)&&xi(s)&&h!==.5&&(l.rectBandPosition=h)}l&&(i[Tn(l)]=l)}return i},{});return ur(r)?null:new gf(t,r)}static makeFromTransform(t,n){const{timeUnit:r,...i}={...n},o=po(r),s={...i,timeUnit:o};return new gf(t,{[Tn(s)]:s})}merge(t){this.timeUnits={...this.timeUnits};for(const n in t.timeUnits)this.timeUnits[n]||(this.timeUnits[n]=t.timeUnits[n]);for(const n of t.children)t.removeChild(n),n.parent=this;t.remove()}removeFormulas(t){const n={};for(const[r,i]of xm(this.timeUnits)){const o=N4(i)?i.as:`${i.field}_end`;t.has(o)||(n[r]=i)}this.timeUnits=n}producedFields(){return new Set(jo(this.timeUnits).map(t=>N4(t)?t.as:sue(t.field)))}dependentFields(){return new Set(jo(this.timeUnits).map(t=>t.field))}hash(){return`TimeUnit ${Tn(this.timeUnits)}`}assemble(){const t=[];for(const n of jo(this.timeUnits)){const{rectBandPosition:r}=n,i=po(n.timeUnit);if(N4(n)){const{field:o,as:s}=n,{unit:a,utc:u,...l}=i,c=[s,`${s}_end`];t.push({field:dl(o),type:"timeunit",...a?{units:E3(a)}:{},...u?{timezone:"utc"}:{},...l,as:c}),t.push(...aue(c,r,i))}else if(n){const{field:o}=n,s=o.replaceAll("\\.","."),a=rIe({timeUnit:i,field:s}),u=sue(s);t.push({type:"formula",expr:a,as:u}),t.push(...aue([s,u],r,i))}}return t}}const F3="offsetted_rect_start",j3="offsetted_rect_end";function rIe({timeUnit:e,field:t,reverse:n}){const{unit:r,utc:i}=e,o=O2e(r),{part:s,step:a}=F2e(o,e.step);return`${i?"utcOffset":"timeOffset"}('${s}', datum['${t}'], ${n?-a:a})`}function aue([e,t],n,r){if(n!==void 0&&n!==.5){const i=`datum['${e}']`,o=`datum['${t}']`;return[{type:"formula",expr:uue([rIe({timeUnit:r,field:e,reverse:!0}),i],n+.5),as:`${e}_${F3}`},{type:"formula",expr:uue([i,o],n+.5),as:`${e}_${j3}`}]}return[]}function uue([e,t],n){return`${1-n} * ${e} + ${n} * ${t}`}const bA="_tuple_fields";class P4t{constructor(...t){this.items=t,this.hasChannel={},this.hasField={},this.hasSelectionId=!1}}const D4t={defined:()=>!0,parse:(e,t,n)=>{const r=t.name,i=t.project??(t.project=new P4t),o={},s={},a=new Set,u=(p,m)=>{const g=m==="visual"?p.channel:p.field;let y=Vr(`${r}_${g}`);for(let v=1;a.has(y);v++)y=Vr(`${r}_${g}_${v}`);return a.add(y),{[m]:y}},l=t.type,c=e.config.selection[l],f=n.value!==void 0?ct(n.value):null;let{fields:d,encodings:h}=ht(n.select)?n.select:{};if(!d&&!h&&f){for(const p of f)if(ht(p))for(const m of We(p))G$t(m)?(h||(h=[])).push(m):l==="interval"?(Xe(k3t),h=c.encodings):(d??(d=[])).push(m)}!d&&!h&&(h=c.encodings,"fields"in c&&(d=c.fields));for(const p of h??[]){const m=e.fieldDef(p);if(m){let g=m.field;if(m.aggregate){Xe(b3t(p,m.aggregate));continue}else if(!g){Xe(Pae(p));continue}if(m.timeUnit&&!Jy(m.timeUnit)){g=e.vgField(p);const y={timeUnit:m.timeUnit,as:g,field:m.field};s[Tn(y)]=y}if(!o[g]){const y=l==="interval"&&Dh(p)&&Au(e.getScaleComponent(p).get("type"))?"R":m.bin?"R-RE":"E",v={field:g,channel:p,type:y,index:i.items.length};v.signals={...u(v,"data"),...u(v,"visual")},i.items.push(o[g]=v),i.hasField[g]=o[g],i.hasSelectionId=i.hasSelectionId||g===pc,i2e(p)?(v.geoChannel=p,v.channel=r2e(p),i.hasChannel[v.channel]=o[g]):i.hasChannel[p]=o[g]}}else Xe(Pae(p))}for(const p of d??[]){if(i.hasField[p])continue;const m={type:"E",field:p,index:i.items.length};m.signals={...u(m,"data")},i.items.push(m),i.hasField[p]=m,i.hasSelectionId=i.hasSelectionId||p===pc}f&&(t.init=f.map(p=>i.items.map(m=>ht(p)?p[m.geoChannel||m.channel]!==void 0?p[m.geoChannel||m.channel]:p[m.field]:p))),ur(s)||(i.timeUnit=new gf(null,s))},signals:(e,t,n)=>{const r=t.name+bA;return n.filter(o=>o.name===r).length>0||t.project.hasSelectionId?n:n.concat({name:r,value:t.project.items.map(tIe)})}},qd={defined:e=>e.type==="interval"&&e.resolve==="global"&&e.bind&&e.bind==="scales",parse:(e,t)=>{const n=t.scales=[];for(const r of t.project.items){const i=r.channel;if(!Dh(i))continue;const o=e.getScaleComponent(i),s=o?o.get("type"):void 0;if(s=="sequential"&&Xe(x3t),!o||!Au(s)){Xe(E3t);continue}o.set("selectionExtent",{param:t.name,field:r.field},!0),n.push(r)}},topLevelSignals:(e,t,n)=>{const r=t.scales.filter(s=>n.filter(a=>a.name===s.signals.data).length===0);if(!e.parent||lue(e)||r.length===0)return n;const i=n.filter(s=>s.name===t.name)[0];let o=i.update;if(o.indexOf(bIe)>=0)i.update=`{${r.map(s=>`${et(dl(s.field))}: ${s.signals.data}`).join(", ")}}`;else{for(const s of r){const a=`${et(dl(s.field))}: ${s.signals.data}`;o.includes(a)||(o=`${o.substring(0,o.length-1)}, ${a}}`)}i.update=o}return n.concat(r.map(s=>({name:s.signals.data})))},signals:(e,t,n)=>{if(e.parent&&!lue(e))for(const r of t.scales){const i=n.find(o=>o.name===r.signals.data);i.push="outer",delete i.value,delete i.update}return n}};function W8(e,t){return`domain(${et(e.scaleName(t))})`}function lue(e){return e.parent&&hw(e.parent)&&!e.parent.parent}const G1="_brush",iIe="_scale_trigger",uE="geo_interval_init_tick",oIe="_init",O4t="_center",$4t={defined:e=>e.type==="interval",parse:(e,t,n)=>{var r;if(e.hasProjection){const i={...ht(n.select)?n.select:{}};i.fields=[pc],i.encodings||(i.encodings=n.value?We(n.value):[Tc,xc]),n.select={type:"interval",...i}}if(t.translate&&!qd.defined(t)){const i=`!event.item || event.item.mark.name !== ${et(t.name+G1)}`;for(const o of t.events){if(!o.between){Xe(`${o} is not an ordered event stream for interval selections.`);continue}const s=ct((r=o.between[0]).filter??(r.filter=[]));s.indexOf(i)<0&&s.push(i)}}},signals:(e,t,n)=>{const r=t.name,i=r+km,o=jo(t.project.hasChannel).filter(a=>a.channel===Hr||a.channel===vo),s=t.init?t.init[0]:null;if(n.push(...o.reduce((a,u)=>a.concat(M4t(e,t,u,s&&s[u.index])),[])),e.hasProjection){const a=et(e.projectionName()),u=e.projectionName()+O4t,{x:l,y:c}=t.project.hasChannel,f=l&&l.signals.visual,d=c&&c.signals.visual,h=l?s&&s[l.index]:`${u}[0]`,p=c?s&&s[c.index]:`${u}[1]`,m=E=>e.getSizeSignalRef(E).signal,g=`[[${f?f+"[0]":"0"}, ${d?d+"[0]":"0"}],[${f?f+"[1]":m("width")}, ${d?d+"[1]":m("height")}]]`;s&&(n.unshift({name:r+oIe,init:`[scale(${a}, [${l?h[0]:h}, ${c?p[0]:p}]), scale(${a}, [${l?h[1]:h}, ${c?p[1]:p}])]`}),(!l||!c)&&(n.find(S=>S.name===u)||n.unshift({name:u,update:`invert(${a}, [${m("width")}/2, ${m("height")}/2])`})));const y=`intersect(${g}, {markname: ${et(e.getName("marks"))}}, unit.mark)`,v=`{unit: ${E0(e)}}`,_=`vlSelectionTuples(${y}, ${v})`,w=o.map(E=>E.signals.visual);return n.concat({name:i,on:[{events:[...w.length?[{signal:w.join(" || ")}]:[],...s?[{signal:uE}]:[]],update:_}]})}else{if(!qd.defined(t)){const l=r+iIe,c=o.map(f=>{const d=f.channel,{data:h,visual:p}=f.signals,m=et(e.scaleName(d)),g=e.getScaleComponent(d).get("type"),y=Au(g)?"+":"";return`(!isArray(${h}) || (${y}invert(${m}, ${p})[0] === ${y}${h}[0] && ${y}invert(${m}, ${p})[1] === ${y}${h}[1]))`});c.length&&n.push({name:l,value:{},on:[{events:o.map(f=>({scale:e.scaleName(f.channel)})),update:c.join(" && ")+` ? ${l} : {}`}]})}const a=o.map(l=>l.signals.data),u=`unit: ${E0(e)}, fields: ${r+bA}, values`;return n.concat({name:i,...s?{init:`{${u}: ${cy(s)}}`}:{},...a.length?{on:[{events:[{signal:a.join(" || ")}],update:`${a.join(" && ")} ? {${u}: [${a}]} : null`}]}:{}})}},topLevelSignals:(e,t,n)=>(ai(e)&&e.hasProjection&&t.init&&(n.filter(i=>i.name===uE).length||n.unshift({name:uE,value:null,on:[{events:"timer{1}",update:`${uE} === null ? {} : ${uE}`}]})),n),marks:(e,t,n)=>{const r=t.name,{x:i,y:o}=t.project.hasChannel,s=i==null?void 0:i.signals.visual,a=o==null?void 0:o.signals.visual,u=`data(${et(t.name+fy)})`;if(qd.defined(t)||!i&&!o)return n;const l={x:i!==void 0?{signal:`${s}[0]`}:{value:0},y:o!==void 0?{signal:`${a}[0]`}:{value:0},x2:i!==void 0?{signal:`${s}[1]`}:{field:{group:"width"}},y2:o!==void 0?{signal:`${a}[1]`}:{field:{group:"height"}}};if(t.resolve==="global")for(const g of We(l))l[g]=[{test:`${u}.length && ${u}[0].unit === ${E0(e)}`,...l[g]},{value:0}];const{fill:c,fillOpacity:f,cursor:d,...h}=t.mark,p=We(h).reduce((g,y)=>(g[y]=[{test:[i!==void 0&&`${s}[0] !== ${s}[1]`,o!==void 0&&`${a}[0] !== ${a}[1]`].filter(v=>v).join(" && "),value:h[y]},{value:null}],g),{}),m=d??(t.translate?"move":null);return[{name:`${r+G1}_bg`,type:"rect",clip:!0,encode:{enter:{fill:{value:c},fillOpacity:{value:f}},update:l}},...n,{name:r+G1,type:"rect",clip:!0,encode:{enter:{...m?{cursor:{value:m}}:{},fill:{value:"transparent"}},update:{...l,...p}}}]}};function M4t(e,t,n,r){const i=!e.hasProjection,o=n.channel,s=n.signals.visual,a=et(i?e.scaleName(o):e.projectionName()),u=d=>`scale(${a}, ${d})`,l=e.getSizeSignalRef(o===Hr?"width":"height").signal,c=`${o}(unit)`,f=t.events.reduce((d,h)=>[...d,{events:h.between[0],update:`[${c}, ${c}]`},{events:h,update:`[${s}[0], clamp(${c}, 0, ${l})]`}],[]);if(i){const d=n.signals.data,h=qd.defined(t),p=e.getScaleComponent(o),m=p?p.get("type"):void 0,g=r?{init:cy(r,!0,u)}:{value:[]};return f.push({events:{signal:t.name+iIe},update:Au(m)?`[${u(`${d}[0]`)}, ${u(`${d}[1]`)}]`:"[0, 0]"}),h?[{name:d,on:[]}]:[{name:s,...g,on:f},{name:d,...r?{init:cy(r)}:{},on:[{events:{signal:s},update:`${s}[0] === ${s}[1] ? null : invert(${a}, ${s})`}]}]}else{const d=o===Hr?0:1,h=t.name+oIe,p=r?{init:`[${h}[0][${d}], ${h}[1][${d}]]`}:{value:[]};return[{name:s,...p,on:f}]}}const L4t={defined:e=>e.type==="point",signals:(e,t,n)=>{const r=t.name,i=r+bA,o=t.project,s="(item().isVoronoi ? datum.datum : datum)",a=jo(e.component.selection??{}).reduce((f,d)=>d.type==="interval"?f.concat(d.name+G1):f,[]).map(f=>`indexof(item().mark.name, '${f}') < 0`).join(" && "),u=`datum && item().mark.marktype !== 'group' && indexof(item().mark.role, 'legend') < 0${a?` && ${a}`:""}`;let l=`unit: ${E0(e)}, `;if(t.project.hasSelectionId)l+=`${pc}: ${s}[${et(pc)}]`;else{const f=o.items.map(d=>{const h=e.fieldDef(d.channel);return h!=null&&h.bin?`[${s}[${et(e.vgField(d.channel,{}))}], ${s}[${et(e.vgField(d.channel,{binSuffix:"end"}))}]]`:`${s}[${et(d.field)}]`}).join(", ");l+=`fields: ${i}, values: [${f}]`}const c=t.events;return n.concat([{name:r+km,on:c?[{events:c,update:`${u} ? {${l}} : null`,force:!0}]:[]}])}};function lw(e,t,n,r){const i=I3(t)&&t.condition,o=r(t);if(i){const a=ct(i).map(u=>{const l=r(u);if(ALt(u)){const{param:c,empty:f}=u;return{test:xIe(e,{param:c,empty:f}),...l}}else return{test:jP(e,u.test),...l}});return{[n]:[...a,...o!==void 0?[o]:[]]}}else return o!==void 0?{[n]:o}:{}}function QK(e,t="text"){const n=e.encoding[t];return lw(e,n,t,r=>B3(r,e.config))}function B3(e,t,n="datum"){if(e){if(hc(e))return Pr(e.value);if(Yt(e)){const{format:r,formatType:i}=PP(e);return AK({fieldOrDatumDef:e,format:r,formatType:i,expr:n,config:t})}}}function sIe(e,t={}){const{encoding:n,markDef:r,config:i,stack:o}=e,s=n.tooltip;if(Le(s))return{tooltip:cue({tooltip:s},o,i,t)};{const a=t.reactiveGeom?"datum.datum":"datum";return lw(e,s,"tooltip",u=>{const l=B3(u,i,a);if(l)return l;if(u===null)return;let c=Kn("tooltip",r,i);if(c===!0&&(c={content:"encoding"}),ft(c))return{value:c};if(ht(c))return At(c)?c:c.content==="encoding"?cue(n,o,i,t):{signal:a}})}}function aIe(e,t,n,{reactiveGeom:r}={}){const i={...n,...n.tooltipFormat},o={},s=r?"datum.datum":"datum",a=[];function u(c,f){const d=Ky(f),h=Ks(c)?c:{...c,type:e[d].type},p=h.title||OK(h,i),m=ct(p).join(", ").replaceAll(/"/g,'\\"');let g;if(xi(f)){const y=f==="x"?"x2":"y2",v=If(e[y]);if(Io(h.bin)&&v){const _=ot(h,{expr:s}),w=ot(v,{expr:s}),{format:E,formatType:S}=PP(h);g=pA(_,w,E,S,i),o[y]=!0}}if((xi(f)||f===wl||f===Ec)&&t&&t.fieldChannel===f&&t.offset==="normalize"){const{format:y,formatType:v}=PP(h);g=AK({fieldOrDatumDef:h,format:y,formatType:v,expr:s,config:i,normalizeStack:!0}).signal}g??(g=B3(h,i,s).signal),a.push({channel:f,key:m,value:g})}LK(e,(c,f)=>{Qe(c)?u(c,f):R3(c)&&u(c.condition,f)});const l={};for(const{channel:c,key:f,value:d}of a)!o[c]&&!l[f]&&(l[f]=d);return l}function cue(e,t,n,{reactiveGeom:r}={}){const i=aIe(e,t,n,{reactiveGeom:r}),o=xm(i).map(([s,a])=>`"${s}": ${a}`);return o.length>0?{signal:`{${o.join(", ")}}`}:void 0}function F4t(e){const{markDef:t,config:n}=e,r=Kn("aria",t,n);return r===!1?{}:{...r?{aria:r}:{},...j4t(e),...B4t(e)}}function j4t(e){const{mark:t,markDef:n,config:r}=e;if(r.aria===!1)return{};const i=Kn("ariaRoleDescription",n,r);return i!=null?{ariaRoleDescription:{value:i}}:t in m3t?{}:{ariaRoleDescription:{value:t}}}function B4t(e){const{encoding:t,markDef:n,config:r,stack:i}=e,o=t.description;if(o)return lw(e,o,"description",u=>B3(u,e.config));const s=Kn("description",n,r);if(s!=null)return{description:Pr(s)};if(r.aria===!1)return{};const a=aIe(t,i,r);if(!ur(a))return{description:{signal:xm(a).map(([u,l],c)=>`"${c>0?"; ":""}${u}: " + (${l})`).join(" + ")}}}function oo(e,t,n={}){const{markDef:r,encoding:i,config:o}=t,{vgChannel:s}=n;let{defaultRef:a,defaultValue:u}=n;a===void 0&&(u??(u=Kn(e,r,o,{vgChannel:s,ignoreVgConfig:!0})),u!==void 0&&(a=Pr(u)));const l=i[e];return lw(t,l,s??e,c=>CK({channel:e,channelDef:c,markDef:r,config:o,scaleName:t.scaleName(e),scale:t.getScaleComponent(e),stack:null,defaultRef:a}))}function uIe(e,t={filled:void 0}){const{markDef:n,encoding:r,config:i}=e,{type:o}=n,s=t.filled??Kn("filled",n,i),a=Sn(["bar","point","circle","square","geoshape"],o)?"transparent":void 0,u=Kn(s===!0?"color":void 0,n,i,{vgChannel:"fill"})??i.mark[s===!0&&"color"]??a,l=Kn(s===!1?"color":void 0,n,i,{vgChannel:"stroke"})??i.mark[s===!1&&"color"],c=s?"fill":"stroke",f={...u?{fill:Pr(u)}:{},...l?{stroke:Pr(l)}:{}};return n.color&&(s?n.fill:n.stroke)&&Xe(S2e("property",{fill:"fill"in n,stroke:"stroke"in n})),{...f,...oo("color",e,{vgChannel:c,defaultValue:s?u:l}),...oo("fill",e,{defaultValue:r.fill?u:void 0}),...oo("stroke",e,{defaultValue:r.stroke?l:void 0})}}function U4t(e){const{encoding:t,mark:n}=e,r=t.order;return!Zy(n)&&hc(r)?lw(e,r,"zindex",i=>Pr(i.value)):{}}function e_({channel:e,markDef:t,encoding:n={},model:r,bandPosition:i}){const o=`${e}Offset`,s=t[o],a=n[o];if((o==="xOffset"||o==="yOffset")&&a)return{offsetType:"encoding",offset:CK({channel:o,channelDef:a,markDef:t,config:r==null?void 0:r.config,scaleName:r.scaleName(o),scale:r.getScaleComponent(o),stack:null,defaultRef:Pr(s),bandPosition:i})};const u=t[o];return u?{offsetType:"visual",offset:u}:{}}function ds(e,t,{defaultPos:n,vgChannel:r}){const{encoding:i,markDef:o,config:s,stack:a}=t,u=i[e],l=i[Qf(e)],c=t.scaleName(e),f=t.getScaleComponent(e),{offset:d,offsetType:h}=e_({channel:e,markDef:o,encoding:i,model:t,bandPosition:.5}),p=JK({model:t,defaultPos:n,channel:e,scaleName:c,scale:f}),m=!u&&xi(e)&&(i.latitude||i.longitude)?{field:t.getName(e)}:z4t({channel:e,channelDef:u,channel2Def:l,markDef:o,config:s,scaleName:c,scale:f,stack:a,offset:d,defaultRef:p,bandPosition:h==="encoding"?0:void 0});return m?{[r||e]:m}:void 0}function z4t(e){const{channel:t,channelDef:n,scaleName:r,stack:i,offset:o,markDef:s}=e;if(Yt(n)&&i&&t===i.fieldChannel){if(Qe(n)){let a=n.bandPosition;if(a===void 0&&s.type==="text"&&(t==="radius"||t==="theta")&&(a=.5),a!==void 0)return kP({scaleName:r,fieldOrDatumDef:n,startSuffix:"start",bandPosition:a,offset:o})}return _0(n,r,{suffix:"end"},{offset:o})}return TK(e)}function JK({model:e,defaultPos:t,channel:n,scaleName:r,scale:i}){const{markDef:o,config:s}=e;return()=>{const a=Ky(n),u=Tm(n),l=Kn(n,o,s,{vgChannel:u});if(l!==void 0)return Zx(n,l);switch(t){case"zeroOrMin":case"zeroOrMax":if(r){const c=i.get("type");if(!Sn([$a.LOG,$a.TIME,$a.UTC],c)){if(i.domainDefinitelyIncludesZero())return{scale:r,value:0}}}if(t==="zeroOrMin")return a==="y"?{field:{group:"height"}}:{value:0};switch(a){case"radius":return{signal:`min(${e.width.signal},${e.height.signal})/2`};case"theta":return{signal:"2*PI"};case"x":return{field:{group:"width"}};case"y":return{value:0}}break;case"mid":return{...e[Va(n)],mult:.5}}}}const V4t={left:"x",center:"xc",right:"x2"},H4t={top:"y",middle:"yc",bottom:"y2"};function lIe(e,t,n,r="middle"){if(e==="radius"||e==="theta")return Tm(e);const i=e==="x"?"align":"baseline",o=Kn(i,t,n);let s;return At(o)?(Xe(G3t(i)),s=void 0):s=o,e==="x"?V4t[s||(r==="top"?"left":"center")]:H4t[s||r]}function LP(e,t,{defaultPos:n,defaultPos2:r,range:i}){return i?cIe(e,t,{defaultPos:n,defaultPos2:r}):ds(e,t,{defaultPos:n})}function cIe(e,t,{defaultPos:n,defaultPos2:r}){const{markDef:i,config:o}=t,s=Qf(e),a=Va(e),u=q4t(t,r,s),l=u[a]?lIe(e,i,o):Tm(e);return{...ds(e,t,{defaultPos:n,vgChannel:l}),...u}}function q4t(e,t,n){const{encoding:r,mark:i,markDef:o,stack:s,config:a}=e,u=Ky(n),l=Va(n),c=Tm(n),f=r[u],d=e.scaleName(u),h=e.getScaleComponent(u),{offset:p}=n in r||n in o?e_({channel:n,markDef:o,encoding:r,model:e}):e_({channel:u,markDef:o,encoding:r,model:e});if(!f&&(n==="x2"||n==="y2")&&(r.latitude||r.longitude)){const g=Va(n),y=e.markDef[g];return y!=null?{[g]:{value:y}}:{[c]:{field:e.getName(n)}}}const m=W4t({channel:n,channelDef:f,channel2Def:r[n],markDef:o,config:a,scaleName:d,scale:h,stack:s,offset:p,defaultRef:void 0});return m!==void 0?{[c]:m}:sk(n,o)||sk(n,{[n]:CP(n,o,a.style),[l]:CP(l,o,a.style)})||sk(n,a[i])||sk(n,a.mark)||{[c]:JK({model:e,defaultPos:t,channel:n,scaleName:d,scale:h})()}}function W4t({channel:e,channelDef:t,channel2Def:n,markDef:r,config:i,scaleName:o,scale:s,stack:a,offset:u,defaultRef:l}){return Yt(t)&&a&&e.charAt(0)===a.fieldChannel.charAt(0)?_0(t,o,{suffix:"start"},{offset:u}):TK({channel:e,channelDef:n,scaleName:o,scale:s,stack:a,markDef:r,config:i,offset:u,defaultRef:l})}function sk(e,t){const n=Va(e),r=Tm(e);if(t[r]!==void 0)return{[r]:Zx(e,t[r])};if(t[e]!==void 0)return{[r]:Zx(e,t[e])};if(t[n]){const i=t[n];if(ly(i))Xe(U3t(n));else return{[n]:Zx(e,i)}}}function Am(e,t){const{config:n,encoding:r,markDef:i}=e,o=i.type,s=Qf(t),a=Va(t),u=r[t],l=r[s],c=e.getScaleComponent(t),f=c?c.get("type"):void 0,d=i.orient,h=r[a]??r.size??Kn("size",i,n,{vgChannel:a}),p=u2e(t),m=o==="bar"&&(t==="x"?d==="vertical":d==="horizontal");return Qe(u)&&(Cr(u.bin)||Io(u.bin)||u.timeUnit&&!l)&&!(h&&!ly(h))&&!r[p]&&!mo(f)?K4t({fieldDef:u,fieldDef2:l,channel:t,model:e}):(Yt(u)&&mo(f)||m)&&!l?Y4t(u,t,e):cIe(t,e,{defaultPos:"zeroOrMax",defaultPos2:"zeroOrMin"})}function G4t(e,t,n,r,i,o,s){if(ly(i))if(n){const u=n.get("type");if(u==="band"){let l=`bandwidth('${t}')`;i.band!==1&&(l=`${i.band} * ${l}`);const c=ph("minBandSize",{type:s},r);return{signal:c?`max(${Kl(c)}, ${l})`:l}}else i.band!==1&&(Xe(Q3t(u)),i=void 0)}else return{mult:i.band,field:{group:e}};else{if(At(i))return i;if(i)return{value:i}}if(n){const u=n.get("range");if(ig(u)&&jn(u.step))return{value:u.step-2}}if(!o){const{bandPaddingInner:u,barBandPaddingInner:l,rectBandPaddingInner:c}=r.scale,f=Ei(u,s==="bar"?l:c);if(At(f))return{signal:`(1 - (${f.signal})) * ${e}`};if(jn(f))return{signal:`${1-f} * ${e}`}}return{value:$P(r.view,e)-2}}function Y4t(e,t,n){var A,R;const{markDef:r,encoding:i,config:o,stack:s}=n,a=r.orient,u=n.scaleName(t),l=n.getScaleComponent(t),c=Va(t),f=Qf(t),d=u2e(t),h=n.scaleName(d),p=n.getScaleComponent(iK(t)),m=a==="horizontal"&&t==="y"||a==="vertical"&&t==="x";let g;(i.size||r.size)&&(m?g=oo("size",n,{vgChannel:c,defaultRef:Pr(r.size)}):Xe(tMt(r.type)));const y=!!g,v=ske({channel:t,fieldDef:e,markDef:r,config:o,scaleType:(A=l||p)==null?void 0:A.get("type"),useVlSizeChannel:m});g=g||{[c]:G4t(c,h||u,p||l,o,v,!!e,r.type)};const _=((R=l||p)==null?void 0:R.get("type"))==="band"&&ly(v)&&!y?"top":"middle",w=lIe(t,r,o,_),E=w==="xc"||w==="yc",{offset:S,offsetType:T}=e_({channel:t,markDef:r,encoding:i,model:n,bandPosition:E?.5:0}),C=TK({channel:t,channelDef:e,markDef:r,config:o,scaleName:u,scale:l,stack:s,offset:S,defaultRef:JK({model:n,defaultPos:"mid",channel:t,scaleName:u,scale:l}),bandPosition:E?T==="encoding"?0:.5:At(v)?{signal:`(1-${v})/2`}:ly(v)?(1-v.band)/2:0});if(c)return{[w]:C,...g};{const N=Tm(f),O=g[c],D=S?{...O,offset:S}:O;return{[w]:C,[N]:Le(C)?[C[0],{...C[1],offset:D}]:{...C,offset:D}}}}function fue(e,t,n,r,i,o,s){if(n2e(e))return 0;const a=e==="x"||e==="y2",u=a?-t/2:t/2;if(At(n)||At(i)||At(r)||o){const l=Kl(n),c=Kl(i),f=Kl(r),d=Kl(o),p=o?`(${s} < ${d} ? ${a?"":"-"}0.5 * (${d} - (${s})) : ${u})`:u,m=f?`${f} + `:"",g=l?`(${l} ? -1 : 1) * `:"",y=c?`(${c} + ${p})`:p;return{signal:m+g+y}}else return i=i||0,r+(n?-i-u:+i+u)}function K4t({fieldDef:e,fieldDef2:t,channel:n,model:r}){var R;const{config:i,markDef:o,encoding:s}=r,a=r.getScaleComponent(n),u=r.scaleName(n),l=a?a.get("type"):void 0,c=a.get("reverse"),f=ske({channel:n,fieldDef:e,markDef:o,config:i,scaleType:l}),d=(R=r.component.axes[n])==null?void 0:R[0],h=(d==null?void 0:d.get("translate"))??.5,p=xi(n)?Kn("binSpacing",o,i)??0:0,m=Qf(n),g=Tm(n),y=Tm(m),v=ph("minBandSize",o,i),{offset:_}=e_({channel:n,markDef:o,encoding:s,model:r,bandPosition:0}),{offset:w}=e_({channel:m,markDef:o,encoding:s,model:r,bandPosition:0}),E=sLt({fieldDef:e,scaleName:u}),S=fue(n,p,c,h,_,v,E),T=fue(m,p,c,h,w??_,v,E),C=At(f)?{signal:`(1-${f.signal})/2`}:ly(f)?(1-f.band)/2:.5,A=Sm({fieldDef:e,fieldDef2:t,markDef:o,config:i});if(Cr(e.bin)||e.timeUnit){const N=e.timeUnit&&A!==.5;return{[y]:due({fieldDef:e,scaleName:u,bandPosition:C,offset:T,useRectOffsetField:N}),[g]:due({fieldDef:e,scaleName:u,bandPosition:At(C)?{signal:`1-${C.signal}`}:1-C,offset:S,useRectOffsetField:N})}}else if(Io(e.bin)){const N=_0(e,u,{},{offset:T});if(Qe(t))return{[y]:N,[g]:_0(t,u,{},{offset:S})};if(Xy(e.bin)&&e.bin.step)return{[y]:N,[g]:{signal:`scale("${u}", ${ot(e,{expr:"datum"})} + ${e.bin.step})`,offset:S}}}Xe(k2e(m))}function due({fieldDef:e,scaleName:t,bandPosition:n,offset:r,useRectOffsetField:i}){return kP({scaleName:t,fieldOrDatumDef:e,bandPosition:n,offset:r,...i?{startSuffix:F3,endSuffix:j3}:{}})}const X4t=new Set(["aria","width","height"]);function El(e,t){const{fill:n=void 0,stroke:r=void 0}=t.color==="include"?uIe(e):{};return{...Q4t(e.markDef,t),...hue(e,"fill",n),...hue(e,"stroke",r),...oo("opacity",e),...oo("fillOpacity",e),...oo("strokeOpacity",e),...oo("strokeWidth",e),...oo("strokeDash",e),...U4t(e),...sIe(e),...QK(e,"href"),...F4t(e)}}function hue(e,t,n){const{config:r,mark:i,markDef:o}=e;if(Kn("invalid",o,r)==="hide"&&n&&!Zy(i)){const a=J4t(e,{invalid:!0,channels:b3});if(a)return{[t]:[{test:a,value:null},...ct(n)]}}return n?{[t]:n}:{}}function Q4t(e,t){return p3t.reduce((n,r)=>(!X4t.has(r)&&e[r]!==void 0&&t[r]!=="ignore"&&(n[r]=Pr(e[r])),n),{})}function J4t(e,{invalid:t=!1,channels:n}){const r=n.reduce((o,s)=>{const a=e.getScaleComponent(s);if(a){const u=a.get("type"),l=e.vgField(s,{expr:"datum"});l&&Au(u)&&(o[l]=!0)}return o},{}),i=We(r);if(i.length>0){const o=t?"||":"&&";return i.map(s=>SK(s,t)).join(` ${o} `)}}function ZK(e){const{config:t,markDef:n}=e;if(Kn("invalid",n,t)){const i=Z4t(e,{channels:Jf});if(i)return{defined:{signal:i}}}return{}}function Z4t(e,{invalid:t=!1,channels:n}){const r=n.reduce((o,s)=>{var u;const a=e.getScaleComponent(s);if(a){const l=a.get("type"),c=e.vgField(s,{expr:"datum",binSuffix:(u=e.stack)!=null&&u.impute?"mid":void 0});c&&Au(l)&&(o[c]=!0)}return o},{}),i=We(r);if(i.length>0){const o=t?"||":"&&";return i.map(s=>SK(s,t)).join(` ${o} `)}}function pue(e,t){if(t!==void 0)return{[e]:Pr(t)}}const P4="voronoi",fIe={defined:e=>e.type==="point"&&e.nearest,parse:(e,t)=>{if(t.events)for(const n of t.events)n.markname=e.getName(P4)},marks:(e,t,n)=>{const{x:r,y:i}=t.project.hasChannel,o=e.mark;if(Zy(o))return Xe(_3t(o)),n;const s={name:e.getName(P4),type:"path",interactive:!0,from:{data:e.getName("marks")},encode:{update:{fill:{value:"transparent"},strokeWidth:{value:.35},stroke:{value:"transparent"},isVoronoi:{value:!0},...sIe(e,{reactiveGeom:!0})}},transform:[{type:"voronoi",x:{expr:r||!i?"datum.datum.x || 0":"0"},y:{expr:i||!r?"datum.datum.y || 0":"0"},size:[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]}]};let a=0,u=!1;return n.forEach((l,c)=>{const f=l.name??"";f===e.component.mark[0].name?a=c:f.indexOf(P4)>=0&&(u=!0)}),u||n.splice(a+1,0,s),n}},dIe={defined:e=>e.type==="point"&&e.resolve==="global"&&e.bind&&e.bind!=="scales"&&!VK(e.bind),parse:(e,t,n)=>_Ie(t,n),topLevelSignals:(e,t,n)=>{const r=t.name,i=t.project,o=t.bind,s=t.init&&t.init[0],a=fIe.defined(t)?"(item().isVoronoi ? datum.datum : datum)":"datum";return i.items.forEach((u,l)=>{const c=Vr(`${r}_${u.field}`);n.filter(d=>d.name===c).length||n.unshift({name:c,...s?{init:cy(s[l])}:{value:null},on:t.events?[{events:t.events,update:`datum && item().mark.marktype !== 'group' ? ${a}[${et(u.field)}] : null`}]:[],bind:o[u.field]??o[u.channel]??o})}),n},signals:(e,t,n)=>{const r=t.name,i=t.project,o=n.filter(l=>l.name===r+km)[0],s=r+bA,a=i.items.map(l=>Vr(`${r}_${l.field}`)),u=a.map(l=>`${l} !== null`).join(" && ");return a.length&&(o.update=`${u} ? {fields: ${s}, values: [${a.join(", ")}]} : null`),delete o.value,delete o.on,n}},FP="_toggle",hIe={defined:e=>e.type==="point"&&!!e.toggle,signals:(e,t,n)=>n.concat({name:t.name+FP,value:!1,on:[{events:t.events,update:t.toggle}]}),modifyExpr:(e,t)=>{const n=t.name+km,r=t.name+FP;return`${r} ? null : ${n}, `+(t.resolve==="global"?`${r} ? null : true, `:`${r} ? null : {unit: ${E0(e)}}, `)+`${r} ? ${n} : null`}},eFt={defined:e=>e.clear!==void 0&&e.clear!==!1,parse:(e,t)=>{t.clear&&(t.clear=ft(t.clear)?Qm(t.clear,"view"):t.clear)},topLevelSignals:(e,t,n)=>{if(dIe.defined(t))for(const r of t.project.items){const i=n.findIndex(o=>o.name===Vr(`${t.name}_${r.field}`));i!==-1&&n[i].on.push({events:t.clear,update:"null"})}return n},signals:(e,t,n)=>{function r(i,o){i!==-1&&n[i].on&&n[i].on.push({events:t.clear,update:o})}if(t.type==="interval")for(const i of t.project.items){const o=n.findIndex(s=>s.name===i.signals.visual);if(r(o,"[0, 0]"),o===-1){const s=n.findIndex(a=>a.name===i.signals.data);r(s,"null")}}else{let i=n.findIndex(o=>o.name===t.name+km);r(i,"null"),hIe.defined(t)&&(i=n.findIndex(o=>o.name===t.name+FP),r(i,"false"))}return n}},pIe={defined:e=>{const t=e.resolve==="global"&&e.bind&&VK(e.bind),n=e.project.items.length===1&&e.project.items[0].field!==pc;return t&&!n&&Xe(T3t),t&&n},parse:(e,t,n)=>{const r=Vt(n);if(r.select=ft(r.select)?{type:r.select,toggle:t.toggle}:{...r.select,toggle:t.toggle},_Ie(t,r),ht(n.select)&&(n.select.on||n.select.clear)){const s='event.item && indexof(event.item.mark.role, "legend") < 0';for(const a of t.events)a.filter=ct(a.filter??[]),a.filter.includes(s)||a.filter.push(s)}const i=k4(t.bind)?t.bind.legend:"click",o=ft(i)?Qm(i,"view"):ct(i);t.bind={legend:{merge:o}}},topLevelSignals:(e,t,n)=>{const r=t.name,i=k4(t.bind)&&t.bind.legend,o=s=>a=>{const u=Vt(a);return u.markname=s,u};for(const s of t.project.items){if(!s.hasLegend)continue;const a=`${Vr(s.field)}_legend`,u=`${r}_${a}`;if(n.filter(c=>c.name===u).length===0){const c=i.merge.map(o(`${a}_symbols`)).concat(i.merge.map(o(`${a}_labels`))).concat(i.merge.map(o(`${a}_entries`)));n.unshift({name:u,...t.init?{}:{value:null},on:[{events:c,update:"isDefined(datum.value) ? datum.value : item().items[0].items[0].datum.value",force:!0},{events:i.merge,update:`!event.item || !datum ? null : ${u}`,force:!0}]})}}return n},signals:(e,t,n)=>{const r=t.name,i=t.project,o=n.find(d=>d.name===r+km),s=r+bA,a=i.items.filter(d=>d.hasLegend).map(d=>Vr(`${r}_${Vr(d.field)}_legend`)),l=`${a.map(d=>`${d} !== null`).join(" && ")} ? {fields: ${s}, values: [${a.join(", ")}]} : null`;t.events&&a.length>0?o.on.push({events:a.map(d=>({signal:d})),update:l}):a.length>0&&(o.update=l,delete o.value,delete o.on);const c=n.find(d=>d.name===r+FP),f=k4(t.bind)&&t.bind.legend;return c&&(t.events?c.on.push({...c.on[0],events:f}):c.on[0].events=f),n}};function tFt(e,t,n){var i;const r=(i=e.fieldDef(t))==null?void 0:i.field;for(const o of jo(e.component.selection??{})){const s=o.project.hasField[r]??o.project.hasChannel[t];if(s&&pIe.defined(o)){const a=n.get("selections")??[];a.push(o.name),n.set("selections",a,!1),s.hasLegend=!0}}}const mIe="_translate_anchor",gIe="_translate_delta",nFt={defined:e=>e.type==="interval"&&e.translate,signals:(e,t,n)=>{const r=t.name,i=qd.defined(t),o=r+mIe,{x:s,y:a}=t.project.hasChannel;let u=Qm(t.translate,"scope");return i||(u=u.map(l=>(l.between[0].markname=r+G1,l))),n.push({name:o,value:{},on:[{events:u.map(l=>l.between[0]),update:"{x: x(unit), y: y(unit)"+(s!==void 0?`, extent_x: ${i?W8(e,Hr):`slice(${s.signals.visual})`}`:"")+(a!==void 0?`, extent_y: ${i?W8(e,vo):`slice(${a.signals.visual})`}`:"")+"}"}]},{name:r+gIe,value:{},on:[{events:u,update:`{x: ${o}.x - x(unit), y: ${o}.y - y(unit)}`}]}),s!==void 0&&mue(e,t,s,"width",n),a!==void 0&&mue(e,t,a,"height",n),n}};function mue(e,t,n,r,i){const o=t.name,s=o+mIe,a=o+gIe,u=n.channel,l=qd.defined(t),c=i.filter(E=>E.name===n.signals[l?"data":"visual"])[0],f=e.getSizeSignalRef(r).signal,d=e.getScaleComponent(u),h=d&&d.get("type"),p=d&&d.get("reverse"),m=l?u===Hr?p?"":"-":p?"-":"":"",g=`${s}.extent_${u}`,y=`${m}${a}.${u} / ${l?`${f}`:`span(${g})`}`,v=!l||!d?"panLinear":h==="log"?"panLog":h==="symlog"?"panSymlog":h==="pow"?"panPow":"panLinear",_=l?h==="pow"?`, ${d.get("exponent")??1}`:h==="symlog"?`, ${d.get("constant")??1}`:"":"",w=`${v}(${g}, ${y}${_})`;c.on.push({events:{signal:a},update:l?w:`clampRange(${w}, 0, ${f})`})}const yIe="_zoom_anchor",vIe="_zoom_delta",rFt={defined:e=>e.type==="interval"&&e.zoom,signals:(e,t,n)=>{const r=t.name,i=qd.defined(t),o=r+vIe,{x:s,y:a}=t.project.hasChannel,u=et(e.scaleName(Hr)),l=et(e.scaleName(vo));let c=Qm(t.zoom,"scope");return i||(c=c.map(f=>(f.markname=r+G1,f))),n.push({name:r+yIe,on:[{events:c,update:i?"{"+[u?`x: invert(${u}, x(unit))`:"",l?`y: invert(${l}, y(unit))`:""].filter(f=>f).join(", ")+"}":"{x: x(unit), y: y(unit)}"}]},{name:o,on:[{events:c,force:!0,update:"pow(1.001, event.deltaY * pow(16, event.deltaMode))"}]}),s!==void 0&&gue(e,t,s,"width",n),a!==void 0&&gue(e,t,a,"height",n),n}};function gue(e,t,n,r,i){const o=t.name,s=n.channel,a=qd.defined(t),u=i.filter(v=>v.name===n.signals[a?"data":"visual"])[0],l=e.getSizeSignalRef(r).signal,c=e.getScaleComponent(s),f=c&&c.get("type"),d=a?W8(e,s):u.name,h=o+vIe,p=`${o}${yIe}.${s}`,m=!a||!c?"zoomLinear":f==="log"?"zoomLog":f==="symlog"?"zoomSymlog":f==="pow"?"zoomPow":"zoomLinear",g=a?f==="pow"?`, ${c.get("exponent")??1}`:f==="symlog"?`, ${c.get("constant")??1}`:"":"",y=`${m}(${d}, ${p}, ${h}${g})`;u.on.push({events:{signal:h},update:a?y:`clampRange(${y}, 0, ${l})`})}const fy="_store",km="_tuple",iFt="_modify",bIe="vlSelectionResolve",U3=[L4t,$4t,D4t,hIe,dIe,qd,pIe,eFt,nFt,rFt,fIe];function oFt(e){let t=e.parent;for(;t&&!hu(t);)t=t.parent;return t}function E0(e,{escape:t}={escape:!0}){let n=t?et(e.name):e.name;const r=oFt(e);if(r){const{facet:i}=r;for(const o of Zu)i[o]&&(n+=` + '__facet_${o}_' + (facet[${et(r.vgField(o))}])`)}return n}function eX(e){return jo(e.component.selection??{}).reduce((t,n)=>t||n.project.hasSelectionId,!1)}function _Ie(e,t){(ft(t.select)||!t.select.on)&&delete e.events,(ft(t.select)||!t.select.clear)&&delete e.clear,(ft(t.select)||!t.select.toggle)&&delete e.toggle}function G8(e){const t=[];return e.type==="Identifier"?[e.name]:e.type==="Literal"?[e.value]:(e.type==="MemberExpression"&&(t.push(...G8(e.object)),t.push(...G8(e.property))),t)}function wIe(e){return e.object.type==="MemberExpression"?wIe(e.object):e.object.name==="datum"}function EIe(e){const t=_Y(e),n=new Set;return t.visit(r=>{r.type==="MemberExpression"&&wIe(r)&&n.add(G8(r).slice(1).join("."))}),n}class cw extends sr{clone(){return new cw(null,this.model,Vt(this.filter))}constructor(t,n,r){super(t),this.model=n,this.filter=r,this.expr=jP(this.model,this.filter,this),this._dependentFields=EIe(this.expr)}dependentFields(){return this._dependentFields}producedFields(){return new Set}assemble(){return{type:"filter",expr:this.expr}}hash(){return`Filter ${this.expr}`}}function sFt(e,t){const n={},r=e.config.selection;if(!t||!t.length)return n;for(const i of t){const o=Vr(i.name),s=i.select,a=ft(s)?s:s.type,u=ht(s)?Vt(s):{type:a},l=r[a];for(const d in l)d==="fields"||d==="encodings"||(d==="mark"&&(u[d]={...l[d],...u[d]}),(u[d]===void 0||u[d]===!0)&&(u[d]=Vt(l[d]??u[d])));const c=n[o]={...u,name:o,type:a,init:i.value,bind:i.bind,events:ft(u.on)?Qm(u.on,"scope"):ct(Vt(u.on))},f=Vt(i);for(const d of U3)d.defined(c)&&d.parse&&d.parse(e,c,f)}return n}function xIe(e,t,n,r="datum"){const i=ft(t)?t:t.param,o=Vr(i),s=et(o+fy);let a;try{a=e.getSelectionComponent(o,i)}catch{return`!!${o}`}if(a.project.timeUnit){const d=n??e.component.data.raw,h=a.project.timeUnit.clone();d.parent?h.insertAsParentOf(d):d.parent=h}const u=a.project.hasSelectionId?"vlSelectionIdTest(":"vlSelectionTest(",l=a.resolve==="global"?")":`, ${et(a.resolve)})`,c=`${u}${s}, ${r}${l}`,f=`length(data(${s}))`;return t.empty===!1?`${f} && ${c}`:`!${f} || ${c}`}function TIe(e,t,n){const r=Vr(t),i=n.encoding;let o=n.field,s;try{s=e.getSelectionComponent(r,t)}catch{return r}if(!i&&!o)o=s.project.items[0].field,s.project.items.length>1&&Xe(`A "field" or "encoding" must be specified when using a selection as a scale domain. Using "field": ${et(o)}.`);else if(i&&!o){const a=s.project.items.filter(u=>u.channel===i);!a.length||a.length>1?(o=s.project.items[0].field,Xe((a.length?"Multiple ":"No ")+`matching ${et(i)} encoding found for selection ${et(n.param)}. Using "field": ${et(o)}.`)):o=a[0].field}return`${s.name}[${et(dl(o))}]`}function aFt(e,t){for(const[n,r]of xm(e.component.selection??{})){const i=e.getName(`lookup_${n}`);e.component.data.outputNodes[i]=r.materialized=new Ma(new cw(t,e,{param:n}),i,jr.Lookup,e.component.data.outputNodeRefCounts)}}function jP(e,t,n){return Jx(t,r=>ft(r)?r:FMt(r)?xIe(e,r,n):B2e(r))}function uFt(e,t){if(e)return Le(e)&&!tp(e)?e.map(n=>OK(n,t)).join(", "):e}function D4(e,t,n,r){var i,o;e.encode??(e.encode={}),(i=e.encode)[t]??(i[t]={}),(o=e.encode[t]).update??(o.update={}),e.encode[t].update[n]=r}function ex(e,t,n,r={header:!1}){var f,d;const{disable:i,orient:o,scale:s,labelExpr:a,title:u,zindex:l,...c}=e.combine();if(!i){for(const h in c){const p=ULt[h],m=c[h];if(p&&p!==t&&p!=="both")delete c[h];else if(vA(m)){const{condition:g,...y}=m,v=ct(g),_=Hae[h];if(_){const{vgProp:w,part:E}=_,S=[...v.map(T=>{const{test:C,...A}=T;return{test:jP(null,C),...A}}),y];D4(c,E,w,S),delete c[h]}else if(_===null){const w={signal:v.map(E=>{const{test:S,...T}=E;return`${jP(null,S)} ? ${kae(T)} : `}).join("")+kae(y)};c[h]=w}}else if(At(m)){const g=Hae[h];if(g){const{vgProp:y,part:v}=g;D4(c,v,y,m),delete c[h]}}Sn(["labelAlign","labelBaseline"],h)&&c[h]===null&&delete c[h]}if(t==="grid"){if(!c.grid)return;if(c.encode){const{grid:h}=c.encode;c.encode={...h?{grid:h}:{}},ur(c.encode)&&delete c.encode}return{scale:s,orient:o,...c,domain:!1,labels:!1,aria:!1,maxExtent:0,minExtent:0,ticks:!1,zindex:Ei(l,0)}}else{if(!r.header&&e.mainExtracted)return;if(a!==void 0){let p=a;(d=(f=c.encode)==null?void 0:f.labels)!=null&&d.update&&At(c.encode.labels.update.text)&&(p=iy(a,"datum.label",c.encode.labels.update.text.signal)),D4(c,"labels","text",{signal:p})}if(c.labelAlign===null&&delete c.labelAlign,c.encode){for(const p of gke)e.hasAxisPart(p)||delete c.encode[p];ur(c.encode)&&delete c.encode}const h=uFt(u,n);return{scale:s,orient:o,grid:!1,...h?{title:h}:{},...c,...n.aria===!1?{aria:!1}:{},zindex:Ei(l,0)}}}}function SIe(e){const{axes:t}=e.component,n=[];for(const r of Jf)if(t[r]){for(const i of t[r])if(!i.get("disable")&&!i.get("gridScale")){const o=r==="x"?"height":"width",s=e.getSizeSignalRef(o).signal;o!==s&&n.push({name:o,update:s})}}return n}function lFt(e,t){const{x:n=[],y:r=[]}=e;return[...n.map(i=>ex(i,"grid",t)),...r.map(i=>ex(i,"grid",t)),...n.map(i=>ex(i,"main",t)),...r.map(i=>ex(i,"main",t))].filter(i=>i)}function yue(e,t,n,r){return Object.assign.apply(null,[{},...e.map(i=>{if(i==="axisOrient"){const o=n==="x"?"bottom":"left",s=t[n==="x"?"axisBottom":"axisLeft"]||{},a=t[n==="x"?"axisTop":"axisRight"]||{},u=new Set([...We(s),...We(a)]),l={};for(const c of u.values())l[c]={signal:`${r.signal} === "${o}" ? ${Kl(s[c])} : ${Kl(a[c])}`};return l}return t[i]})])}function cFt(e,t,n,r){const i=t==="band"?["axisDiscrete","axisBand"]:t==="point"?["axisDiscrete","axisPoint"]:H2e(t)?["axisQuantitative"]:t==="time"||t==="utc"?["axisTemporal"]:[],o=e==="x"?"axisX":"axisY",s=At(n)?"axisOrient":`axis${uA(n)}`,a=[...i,...i.map(l=>o+l.substr(4))],u=["axis",s,o];return{vlOnlyAxisConfig:yue(a,r,e,n),vgAxisConfig:yue(u,r,e,n),axisConfigStyle:fFt([...u,...a],r)}}function fFt(e,t){var r;const n=[{}];for(const i of e){let o=(r=t[i])==null?void 0:r.style;if(o){o=ct(o);for(const s of o)n.push(t.style[s])}}return Object.assign.apply(null,n)}function Y8(e,t,n,r={}){var o;const i=v2e(e,n,t);if(i!==void 0)return{configFrom:"style",configValue:i};for(const s of["vlOnlyAxisConfig","vgAxisConfig","axisConfigStyle"])if(((o=r[s])==null?void 0:o[e])!==void 0)return{configFrom:s,configValue:r[s][e]};return{}}const vue={scale:({model:e,channel:t})=>e.scaleName(t),format:({format:e})=>e,formatType:({formatType:e})=>e,grid:({fieldOrDatumDef:e,axis:t,scaleType:n})=>t.grid??dFt(n,e),gridScale:({model:e,channel:t})=>hFt(e,t),labelAlign:({axis:e,labelAngle:t,orient:n,channel:r})=>e.labelAlign||AIe(t,n,r),labelAngle:({labelAngle:e})=>e,labelBaseline:({axis:e,labelAngle:t,orient:n,channel:r})=>e.labelBaseline||CIe(t,n,r),labelFlush:({axis:e,fieldOrDatumDef:t,channel:n})=>e.labelFlush??mFt(t.type,n),labelOverlap:({axis:e,fieldOrDatumDef:t,scaleType:n})=>e.labelOverlap??gFt(t.type,n,Qe(t)&&!!t.timeUnit,Qe(t)?t.sort:void 0),orient:({orient:e})=>e,tickCount:({channel:e,model:t,axis:n,fieldOrDatumDef:r,scaleType:i})=>{const o=e==="x"?"width":e==="y"?"height":void 0,s=o?t.getSizeSignalRef(o):void 0;return n.tickCount??vFt({fieldOrDatumDef:r,scaleType:i,size:s,values:n.values})},tickMinStep:bFt,title:({axis:e,model:t,channel:n})=>{if(e.title!==void 0)return e.title;const r=kIe(t,n);if(r!==void 0)return r;const i=t.typedFieldDef(n),o=n==="x"?"x2":"y2",s=t.fieldDef(o);return _2e(i?[zae(i)]:[],Qe(s)?[zae(s)]:[])},values:({axis:e,fieldOrDatumDef:t})=>_Ft(e,t),zindex:({axis:e,fieldOrDatumDef:t,mark:n})=>e.zindex??wFt(n,t)};function dFt(e,t){return!mo(e)&&Qe(t)&&!Cr(t==null?void 0:t.bin)&&!Io(t==null?void 0:t.bin)}function hFt(e,t){const n=t==="x"?"y":"x";if(e.getScaleComponent(n))return e.scaleName(n)}function pFt(e,t,n,r,i){const o=t==null?void 0:t.labelAngle;if(o!==void 0)return At(o)?o:IS(o);{const{configValue:s}=Y8("labelAngle",r,t==null?void 0:t.style,i);return s!==void 0?IS(s):n===Hr&&Sn([xK,EK],e.type)&&!(Qe(e)&&e.timeUnit)?270:void 0}}function K8(e){return`(((${e.signal} % 360) + 360) % 360)`}function CIe(e,t,n,r){if(e!==void 0)if(n==="x"){if(At(e)){const i=K8(e),o=At(t)?`(${t.signal} === "top")`:t==="top";return{signal:`(45 < ${i} && ${i} < 135) || (225 < ${i} && ${i} < 315) ? "middle" :(${i} <= 45 || 315 <= ${i}) === ${o} ? "bottom" : "top"`}}if(45<e&&e<135||225<e&&e<315)return"middle";if(At(t)){const i=e<=45||315<=e?"===":"!==";return{signal:`${t.signal} ${i} "top" ? "bottom" : "top"`}}return(e<=45||315<=e)==(t==="top")?"bottom":"top"}else{if(At(e)){const i=K8(e),o=At(t)?`(${t.signal} === "left")`:t==="left";return{signal:`${i} <= 45 || 315 <= ${i} || (135 <= ${i} && ${i} <= 225) ? ${r?'"middle"':"null"} : (45 <= ${i} && ${i} <= 135) === ${o} ? "top" : "bottom"`}}if(e<=45||315<=e||135<=e&&e<=225)return r?"middle":null;if(At(t)){const i=45<=e&&e<=135?"===":"!==";return{signal:`${t.signal} ${i} "left" ? "top" : "bottom"`}}return(45<=e&&e<=135)==(t==="left")?"top":"bottom"}}function AIe(e,t,n){if(e===void 0)return;const r=n==="x",i=r?0:90,o=r?"bottom":"left";if(At(e)){const s=K8(e),a=At(t)?`(${t.signal} === "${o}")`:t===o;return{signal:`(${i?`(${s} + 90)`:s} % 180 === 0) ? ${r?null:'"center"'} :(${i} < ${s} && ${s} < ${180+i}) === ${a} ? "left" : "right"`}}if((e+i)%180===0)return r?null:"center";if(At(t)){const s=i<e&&e<180+i?"===":"!==";return{signal:`${`${t.signal} ${s} "${o}"`} ? "left" : "right"`}}return(i<e&&e<180+i)==(t===o)?"left":"right"}function mFt(e,t){if(t==="x"&&Sn(["quantitative","temporal"],e))return!0}function gFt(e,t,n,r){if(n&&!ht(r)||e!=="nominal"&&e!=="ordinal")return t==="log"||t==="symlog"?"greedy":!0}function yFt(e){return e==="x"?"bottom":"left"}function vFt({fieldOrDatumDef:e,scaleType:t,size:n,values:r}){var i;if(!r&&!mo(t)&&t!=="log"){if(Qe(e)){if(Cr(e.bin))return{signal:`ceil(${n.signal}/10)`};if(e.timeUnit&&Sn(["month","hours","day","quarter"],(i=po(e.timeUnit))==null?void 0:i.unit))return}return{signal:`ceil(${n.signal}/40)`}}}function bFt({format:e,fieldOrDatumDef:t}){if(e==="d")return 1;if(Qe(t)){const{timeUnit:n}=t;if(n){const r=L2e(n);if(r)return{signal:r}}}}function kIe(e,t){const n=t==="x"?"x2":"y2",r=e.fieldDef(t),i=e.fieldDef(n),o=r?r.title:void 0,s=i?i.title:void 0;if(o&&s)return w2e(o,s);if(o)return o;if(s)return s;if(o!==void 0)return o;if(s!==void 0)return s}function _Ft(e,t){const n=e.values;if(Le(n))return mke(t,n);if(At(n))return n}function wFt(e,t){return e==="rect"&&NP(t)?1:0}class t_ extends sr{clone(){return new t_(null,Vt(this.transform))}constructor(t,n){super(t),this.transform=n,this._dependentFields=EIe(this.transform.calculate)}static parseAllForSortIndex(t,n){return n.forEachFieldDef((r,i)=>{if(ev(r)&&oke(r.sort)){const{field:o,timeUnit:s}=r,a=r.sort,u=a.map((l,c)=>`${B2e({field:o,timeUnit:s,equal:l})} ? ${c} : `).join("")+a.length;t=new t_(t,{calculate:u,as:n_(r,i,{forAs:!0})})}}),t}producedFields(){return new Set([this.transform.as])}dependentFields(){return this._dependentFields}assemble(){return{type:"formula",expr:this.transform.calculate,as:this.transform.as}}hash(){return`Calculate ${Tn(this.transform)}`}}function n_(e,t,n){return ot(e,{prefix:t,suffix:"sort_index",...n})}function z3(e,t){return Sn(["top","bottom"],t)?"column":Sn(["left","right"],t)||e==="row"?"row":"column"}function r_(e,t,n,r){const i=r==="row"?n.headerRow:r==="column"?n.headerColumn:n.headerFacet;return Ei((t||{})[e],i[e],n.header[e])}function V3(e,t,n,r){const i={};for(const o of e){const s=r_(o,t||{},n,r);s!==void 0&&(i[o]=s)}return i}const tX=["row","column"],nX=["header","footer"];function EFt(e,t){const n=e.component.layoutHeaders[t].title,r=e.config?e.config:void 0,i=e.component.layoutHeaders[t].facetFieldDef?e.component.layoutHeaders[t].facetFieldDef:void 0,{titleAnchor:o,titleAngle:s,titleOrient:a}=V3(["titleAnchor","titleAngle","titleOrient"],i.header,r,t),u=z3(t,a),l=IS(s);return{name:`${t}-title`,type:"group",role:`${u}-title`,title:{text:n,...t==="row"?{orient:"left"}:{},style:"guide-title",...RIe(l,u),...IIe(u,l,o),...NIe(r,i,t,l6t,Dke)}}}function IIe(e,t,n="middle"){switch(n){case"start":return{align:"left"};case"end":return{align:"right"}}const r=AIe(t,e==="row"?"left":"top",e==="row"?"y":"x");return r?{align:r}:{}}function RIe(e,t){const n=CIe(e,t==="row"?"left":"top",t==="row"?"y":"x",!0);return n?{baseline:n}:{}}function xFt(e,t){const n=e.component.layoutHeaders[t],r=[];for(const i of nX)if(n[i])for(const o of n[i]){const s=SFt(e,t,i,n,o);s!=null&&r.push(s)}return r}function TFt(e,t){const{sort:n}=e;return mf(n)?{field:ot(n,{expr:"datum"}),order:n.order??"ascending"}:Le(n)?{field:n_(e,t,{expr:"datum"}),order:"ascending"}:{field:ot(e,{expr:"datum"}),order:n??"ascending"}}function X8(e,t,n){const{format:r,formatType:i,labelAngle:o,labelAnchor:s,labelOrient:a,labelExpr:u}=V3(["format","formatType","labelAngle","labelAnchor","labelOrient","labelExpr"],e.header,n,t),l=AK({fieldOrDatumDef:e,format:r,formatType:i,expr:"parent",config:n}).signal,c=z3(t,a);return{text:{signal:u?iy(iy(u,"datum.label",l),"datum.value",ot(e,{expr:"parent"})):l},...t==="row"?{orient:"left"}:{},style:"guide-label",frame:"group",...RIe(o,c),...IIe(c,o,s),...NIe(n,e,t,c6t,Oke)}}function SFt(e,t,n,r,i){if(i){let o=null;const{facetFieldDef:s}=r,a=e.config?e.config:void 0;if(s&&i.labels){const{labelOrient:f}=V3(["labelOrient"],s.header,a,t);(t==="row"&&!Sn(["top","bottom"],f)||t==="column"&&!Sn(["left","right"],f))&&(o=X8(s,t,a))}const u=hu(e)&&!mA(e.facet),l=i.axes,c=(l==null?void 0:l.length)>0;if(o||c){const f=t==="row"?"height":"width";return{name:e.getName(`${t}_${n}`),type:"group",role:`${t}-${n}`,...r.facetFieldDef?{from:{data:e.getName(`${t}_domain`)},sort:TFt(s,t)}:{},...c&&u?{from:{data:e.getName(`facet_domain_${t}`)}}:{},...o?{title:o}:{},...i.sizeSignal?{encode:{update:{[f]:i.sizeSignal}}}:{},...c?{axes:l}:{}}}}return null}const CFt={column:{start:0,end:1},row:{start:1,end:0}};function AFt(e,t){return CFt[t][e]}function kFt(e,t){const n={};for(const r of Zu){const i=e[r];if(i!=null&&i.facetFieldDef){const{titleAnchor:o,titleOrient:s}=V3(["titleAnchor","titleOrient"],i.facetFieldDef.header,t,r),a=z3(r,s),u=AFt(o,a);u!==void 0&&(n[a]=u)}}return ur(n)?void 0:n}function NIe(e,t,n,r,i){const o={};for(const s of r){if(!i[s])continue;const a=r_(s,t==null?void 0:t.header,e,n);a!==void 0&&(o[i[s]]=a)}return o}function rX(e){return[...ak(e,"width"),...ak(e,"height"),...ak(e,"childWidth"),...ak(e,"childHeight")]}function ak(e,t){const n=t==="width"?"x":"y",r=e.component.layoutSize.get(t);if(!r||r==="merged")return[];const i=e.getSizeSignalRef(t).signal;if(r==="step"){const o=e.getScaleComponent(n);if(o){const s=o.get("type"),a=o.get("range");if(mo(s)&&ig(a)){const u=e.scaleName(n);return hu(e.parent)&&e.parent.component.resolve.scale[n]==="independent"?[bue(u,a)]:[bue(u,a),{name:i,update:PIe(u,o,`domain('${u}').length`)}]}}throw new Error("layout size is step although width/height is not step.")}else if(r=="container"){const o=i.endsWith("width"),s=o?"containerSize()[0]":"containerSize()[1]",a=z8(e.config.view,o?"width":"height"),u=`isFinite(${s}) ? ${s} : ${a}`;return[{name:i,init:u,on:[{update:u,events:"window:resize"}]}]}else return[{name:i,value:r}]}function bue(e,t){const n=`${e}_step`;return At(t.step)?{name:n,update:t.step.signal}:{name:n,value:t.step}}function PIe(e,t,n){const r=t.get("type"),i=t.get("padding"),o=Ei(t.get("paddingOuter"),i);let s=t.get("paddingInner");return s=r==="band"?s!==void 0?s:i:1,`bandspace(${n}, ${Kl(s)}, ${Kl(o)}) * ${e}_step`}function DIe(e){return e==="childWidth"?"width":e==="childHeight"?"height":e}function OIe(e,t){return We(e).reduce((n,r)=>{const i=e[r];return{...n,...lw(t,i,r,o=>Pr(o.value))}},{})}function $Ie(e,t){if(hu(t))return e==="theta"?"independent":"shared";if(hw(t))return"shared";if(cX(t))return xi(e)||e==="theta"||e==="radius"?"independent":"shared";throw new Error("invalid model type for resolve")}function iX(e,t){const n=e.scale[t],r=xi(t)?"axis":"legend";return n==="independent"?(e[r][t]==="shared"&&Xe(sMt(t)),"independent"):e[r][t]||"shared"}const IFt={...h6t,disable:1,labelExpr:1,selections:1,opacity:1,shape:1,stroke:1,fill:1,size:1,strokeWidth:1,strokeDash:1,encode:1},MIe=We(IFt);class RFt extends $h{}const _ue={symbols:NFt,gradient:PFt,labels:DFt,entries:OFt};function NFt(e,{fieldOrDatumDef:t,model:n,channel:r,legendCmpt:i,legendType:o}){if(o!=="symbol")return;const{markDef:s,encoding:a,config:u,mark:l}=n,c=s.filled&&l!=="trail";let f={...y3t({},n,gLt),...uIe(n,{filled:c})};const d=i.get("symbolOpacity")??u.legend.symbolOpacity,h=i.get("symbolFillColor")??u.legend.symbolFillColor,p=i.get("symbolStrokeColor")??u.legend.symbolStrokeColor,m=d===void 0?LIe(a.opacity)??s.opacity:void 0;if(f.fill){if(r==="fill"||c&&r===Ua)delete f.fill;else if(f.fill.field)h?delete f.fill:(f.fill=Pr(u.legend.symbolBaseFillColor??"black"),f.fillOpacity=Pr(m??1));else if(Le(f.fill)){const g=Q8(a.fill??a.color)??s.fill??(c&&s.color);g&&(f.fill=Pr(g))}}if(f.stroke){if(r==="stroke"||!c&&r===Ua)delete f.stroke;else if(f.stroke.field||p)delete f.stroke;else if(Le(f.stroke)){const g=Ei(Q8(a.stroke||a.color),s.stroke,c?s.color:void 0);g&&(f.stroke={value:g})}}if(r!==Ph){const g=Qe(t)&&jIe(n,i,t);g?f.opacity=[{test:g,...Pr(m??1)},Pr(u.legend.unselectedOpacity)]:m&&(f.opacity=Pr(m))}return f={...f,...e},ur(f)?void 0:f}function PFt(e,{model:t,legendType:n,legendCmpt:r}){if(n!=="gradient")return;const{config:i,markDef:o,encoding:s}=t;let a={};const l=(r.get("gradientOpacity")??i.legend.gradientOpacity)===void 0?LIe(s.opacity)||o.opacity:void 0;return l&&(a.opacity=Pr(l)),a={...a,...e},ur(a)?void 0:a}function DFt(e,{fieldOrDatumDef:t,model:n,channel:r,legendCmpt:i}){const o=n.legend(r)||{},s=n.config,a=Qe(t)?jIe(n,i,t):void 0,u=a?[{test:a,value:1},{value:s.legend.unselectedOpacity}]:void 0,{format:l,formatType:c}=o;let f;uy(c)?f=Ql({fieldOrDatumDef:t,field:"datum.value",format:l,formatType:c,config:s}):l===void 0&&c===void 0&&s.customFormatTypes&&(t.type==="quantitative"&&s.numberFormatType?f=Ql({fieldOrDatumDef:t,field:"datum.value",format:s.numberFormat,formatType:s.numberFormatType,config:s}):t.type==="temporal"&&s.timeFormatType&&Qe(t)&&t.timeUnit===void 0&&(f=Ql({fieldOrDatumDef:t,field:"datum.value",format:s.timeFormat,formatType:s.timeFormatType,config:s})));const d={...u?{opacity:u}:{},...f?{text:f}:{},...e};return ur(d)?void 0:d}function OFt(e,{legendCmpt:t}){const n=t.get("selections");return n!=null&&n.length?{...e,fill:{value:"transparent"}}:e}function LIe(e){return FIe(e,(t,n)=>Math.max(t,n.value))}function Q8(e){return FIe(e,(t,n)=>Ei(t,n.value))}function FIe(e,t){if(ILt(e))return ct(e.condition).reduce(t,e.value);if(hc(e))return e.value}function jIe(e,t,n){const r=t.get("selections");if(!(r!=null&&r.length))return;const i=et(n.field);return r.map(o=>`(!length(data(${et(Vr(o)+fy)})) || (${o}[${i}] && indexof(${o}[${i}], datum.value) >= 0))`).join(" || ")}const wue={direction:({direction:e})=>e,format:({fieldOrDatumDef:e,legend:t,config:n})=>{const{format:r,formatType:i}=t;return X2e(e,e.type,r,i,n,!1)},formatType:({legend:e,fieldOrDatumDef:t,scaleType:n})=>{const{formatType:r}=e;return Q2e(r,t,n)},gradientLength:e=>{const{legend:t,legendConfig:n}=e;return t.gradientLength??n.gradientLength??UFt(e)},labelOverlap:({legend:e,legendConfig:t,scaleType:n})=>e.labelOverlap??t.labelOverlap??zFt(n),symbolType:({legend:e,markDef:t,channel:n,encoding:r})=>e.symbolType??MFt(t.type,n,r.shape,t.shape),title:({fieldOrDatumDef:e,config:t})=>W1(e,t,{allowDisabling:!0}),type:({legendType:e,scaleType:t,channel:n})=>{if(q1(n)&&Xl(t)){if(e==="gradient")return}else if(e==="symbol")return;return e},values:({fieldOrDatumDef:e,legend:t})=>$Ft(t,e)};function $Ft(e,t){const n=e.values;if(Le(n))return mke(t,n);if(At(n))return n}function MFt(e,t,n,r){if(t!=="shape"){const i=Q8(n)??r;if(i)return i}switch(e){case"bar":case"rect":case"image":case"square":return"square";case"line":case"trail":case"rule":return"stroke";case"arc":case"point":case"circle":case"tick":case"geoshape":case"area":case"text":return"circle"}}function LFt(e){const{legend:t}=e;return Ei(t.type,FFt(e))}function FFt({channel:e,timeUnit:t,scaleType:n}){if(q1(e)){if(Sn(["quarter","month","day"],t))return"symbol";if(Xl(n))return"gradient"}return"symbol"}function jFt({legendConfig:e,legendType:t,orient:n,legend:r}){return r.direction??e[t?"gradientDirection":"symbolDirection"]??BFt(n,t)}function BFt(e,t){switch(e){case"top":case"bottom":return"horizontal";case"left":case"right":case"none":case void 0:return;default:return t==="gradient"?"horizontal":void 0}}function UFt({legendConfig:e,model:t,direction:n,orient:r,scaleType:i}){const{gradientHorizontalMaxLength:o,gradientHorizontalMinLength:s,gradientVerticalMaxLength:a,gradientVerticalMinLength:u}=e;if(Xl(i))return n==="horizontal"?r==="top"||r==="bottom"?Eue(t,"width",s,o):s:Eue(t,"height",u,a)}function Eue(e,t,n,r){return{signal:`clamp(${e.getSizeSignalRef(t).signal}, ${n}, ${r})`}}function zFt(e){if(Sn(["quantile","threshold","log","symlog"],e))return"greedy"}function BIe(e){const t=ai(e)?VFt(e):GFt(e);return e.component.legends=t,t}function VFt(e){const{encoding:t}=e,n={};for(const r of[Ua,...Mke]){const i=zi(t[r]);!i||!e.getScaleComponent(r)||r===za&&Qe(i)&&i.type===uw||(n[r]=WFt(e,r))}return n}function HFt(e,t){const n=e.scaleName(t);if(e.mark==="trail"){if(t==="color")return{stroke:n};if(t==="size")return{strokeWidth:n}}return t==="color"?e.markDef.filled?{fill:n}:{stroke:n}:{[t]:n}}function qFt(e,t,n,r){switch(t){case"disable":return n!==void 0;case"values":return!!(n!=null&&n.values);case"title":if(t==="title"&&e===(r==null?void 0:r.title))return!0}return e===(n||{})[t]}function WFt(e,t){var w;let n=e.legend(t);const{markDef:r,encoding:i,config:o}=e,s=o.legend,a=new RFt({},HFt(e,t));tFt(e,t,a);const u=n!==void 0?!n:s.disable;if(a.set("disable",u,n!==void 0),u)return a;n=n||{};const l=e.getScaleComponent(t).get("type"),c=zi(i[t]),f=Qe(c)?(w=po(c.timeUnit))==null?void 0:w.unit:void 0,d=n.orient||o.legend.orient||"right",h=LFt({legend:n,channel:t,timeUnit:f,scaleType:l}),p=jFt({legend:n,legendType:h,orient:d,legendConfig:s}),m={legend:n,channel:t,model:e,markDef:r,encoding:i,fieldOrDatumDef:c,legendConfig:s,config:o,scaleType:l,orient:d,legendType:h,direction:p};for(const E of MIe){if(h==="gradient"&&E.startsWith("symbol")||h==="symbol"&&E.startsWith("gradient"))continue;const S=E in wue?wue[E](m):n[E];if(S!==void 0){const T=qFt(S,E,n,e.fieldDef(t));(T||o.legend[E]===void 0)&&a.set(E,S,T)}}const g=(n==null?void 0:n.encoding)??{},y=a.get("selections"),v={},_={fieldOrDatumDef:c,model:e,channel:t,legendCmpt:a,legendType:h};for(const E of["labels","legend","title","symbols","gradient","entries"]){const S=OIe(g[E]??{},e),T=E in _ue?_ue[E](S,_):S;T!==void 0&&!ur(T)&&(v[E]={...y!=null&&y.length&&Qe(c)?{name:`${Vr(c.field)}_legend_${E}`}:{},...y!=null&&y.length?{interactive:!!y}:{},update:T})}return ur(v)||a.set("encode",v,!!(n!=null&&n.encoding)),a}function GFt(e){const{legends:t,resolve:n}=e.component;for(const r of e.children){BIe(r);for(const i of We(r.component.legends))n.legend[i]=iX(e.component.resolve,i),n.legend[i]==="shared"&&(t[i]=UIe(t[i],r.component.legends[i]),t[i]||(n.legend[i]="independent",delete t[i]))}for(const r of We(t))for(const i of e.children)i.component.legends[r]&&n.legend[r]==="shared"&&delete i.component.legends[r];return t}function UIe(e,t){var o,s,a,u;if(!e)return t.clone();const n=e.getWithExplicit("orient"),r=t.getWithExplicit("orient");if(n.explicit&&r.explicit&&n.value!==r.value)return;let i=!1;for(const l of MIe){const c=Cm(e.getWithExplicit(l),t.getWithExplicit(l),l,"legend",(f,d)=>{switch(l){case"symbolType":return YFt(f,d);case"title":return E2e(f,d);case"type":return i=!0,Ka("symbol")}return L3(f,d,l,"legend")});e.setWithExplicit(l,c)}return i&&((s=(o=e.implicit)==null?void 0:o.encode)!=null&&s.gradient&&SP(e.implicit,["encode","gradient"]),(u=(a=e.explicit)==null?void 0:a.encode)!=null&&u.gradient&&SP(e.explicit,["encode","gradient"])),e}function YFt(e,t){return t.value==="circle"?t:e}function KFt(e,t,n,r){var i,o;e.encode??(e.encode={}),(i=e.encode)[t]??(i[t]={}),(o=e.encode[t]).update??(o.update={}),e.encode[t].update[n]=r}function zIe(e){const t=e.component.legends,n={};for(const i of We(t)){const o=e.getScaleComponent(i),s=lr(o.get("domains"));if(n[s])for(const a of n[s])UIe(a,t[i])||n[s].push(t[i]);else n[s]=[t[i].clone()]}return jo(n).flat().map(i=>XFt(i,e.config)).filter(i=>i!==void 0)}function XFt(e,t){var s,a,u;const{disable:n,labelExpr:r,selections:i,...o}=e.combine();if(!n){if(t.aria===!1&&o.aria==null&&(o.aria=!1),(s=o.encode)!=null&&s.symbols){const l=o.encode.symbols.update;l.fill&&l.fill.value!=="transparent"&&!l.stroke&&!o.stroke&&(l.stroke={value:"transparent"});for(const c of Mke)o[c]&&delete l[c]}if(o.title||delete o.title,r!==void 0){let l=r;(u=(a=o.encode)==null?void 0:a.labels)!=null&&u.update&&At(o.encode.labels.update.text)&&(l=iy(r,"datum.label",o.encode.labels.update.text.signal)),KFt(o,"labels","text",{signal:l})}return o}}function QFt(e){return hw(e)||cX(e)?JFt(e):VIe(e)}function JFt(e){return e.children.reduce((t,n)=>t.concat(n.assembleProjections()),VIe(e))}function VIe(e){const t=e.component.projection;if(!t||t.merged)return[];const n=t.combine(),{name:r}=n;if(t.data){const i={signal:`[${t.size.map(s=>s.signal).join(", ")}]`},o=t.data.reduce((s,a)=>{const u=At(a)?a.signal:`data('${e.lookupDataSource(a)}')`;return Sn(s,u)||s.push(u),s},[]);if(o.length<=0)throw new Error("Projection's fit didn't find any data sources");return[{name:r,size:i,fit:{signal:o.length>1?`[${o.join(", ")}]`:o[0]},...n}]}else return[{name:r,translate:{signal:"[width / 2, height / 2]"},...n}]}const ZFt=["type","clipAngle","clipExtent","center","rotate","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];class HIe extends $h{constructor(t,n,r,i){super({...n},{name:t}),this.specifiedProjection=n,this.size=r,this.data=i,this.merged=!1}get isFit(){return!!this.data}}function qIe(e){e.component.projection=ai(e)?e5t(e):r5t(e)}function e5t(e){if(e.hasProjection){const t=ga(e.specifiedProjection),n=!(t&&(t.scale!=null||t.translate!=null)),r=n?[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]:void 0,i=n?t5t(e):void 0,o=new HIe(e.projectionName(!0),{...ga(e.config.projection),...t},r,i);return o.get("type")||o.set("type","equalEarth",!1),o}}function t5t(e){const t=[],{encoding:n}=e;for(const r of[[Tc,xc],[hl,Sc]])(zi(n[r[0]])||zi(n[r[1]]))&&t.push({signal:e.getName(`geojson_${t.length}`)});return e.channelHasField(za)&&e.typedFieldDef(za).type===uw&&t.push({signal:e.getName(`geojson_${t.length}`)}),t.length===0&&t.push(e.requestDataName(jr.Main)),t}function n5t(e,t){const n=QY(ZFt,i=>!!(!$t(e.explicit,i)&&!$t(t.explicit,i)||$t(e.explicit,i)&&$t(t.explicit,i)&&uu(e.get(i),t.get(i))));if(uu(e.size,t.size)){if(n)return e;if(uu(e.explicit,{}))return t;if(uu(t.explicit,{}))return e}return null}function r5t(e){if(e.children.length===0)return;let t;for(const r of e.children)qIe(r);const n=QY(e.children,r=>{const i=r.component.projection;if(i)if(t){const o=n5t(t,i);return o&&(t=o),!!o}else return t=i,!0;else return!0});if(t&&n){const r=e.projectionName(!0),i=new HIe(r,t.specifiedProjection,t.size,Vt(t.data));for(const o of e.children){const s=o.component.projection;s&&(s.isFit&&i.data.push(...o.component.projection.data),o.renameProjection(s.get("name"),r),s.merged=!0)}return i}}function i5t(e,t,n,r){if(yA(t,n)){const i=ai(e)?e.axis(n)??e.legend(n)??{}:{},o=ot(t,{expr:"datum"}),s=ot(t,{expr:"datum",binSuffix:"end"});return{formulaAs:ot(t,{binSuffix:"range",forAs:!0}),formula:pA(o,s,i.format,i.formatType,r)}}return{}}function WIe(e,t){return`${p2e(e)}_${t}`}function o5t(e,t){return{signal:e.getName(`${t}_bins`),extentSignal:e.getName(`${t}_extent`)}}function oX(e,t,n){const r=N3(n,void 0)??{},i=WIe(r,t);return e.getName(`${i}_bins`)}function s5t(e){return"as"in e}function xue(e,t,n){let r,i;s5t(e)?r=ft(e.as)?[e.as,`${e.as}_end`]:[e.as[0],e.as[1]]:r=[ot(e,{forAs:!0}),ot(e,{binSuffix:"end",forAs:!0})];const o={...N3(t,void 0)},s=WIe(o,e.field),{signal:a,extentSignal:u}=o5t(n,s);if(_3(o.extent)){const c=o.extent;i=TIe(n,c.param,c),delete o.extent}const l={bin:o,field:e.field,as:[r],...a?{signal:a}:{},...u?{extentSignal:u}:{},...i?{span:i}:{}};return{key:s,binComponent:l}}class yf extends sr{clone(){return new yf(null,Vt(this.bins))}constructor(t,n){super(t),this.bins=n}static makeFromEncoding(t,n){const r=n.reduceFieldDef((i,o,s)=>{if(Ks(o)&&Cr(o.bin)){const{key:a,binComponent:u}=xue(o,o.bin,n);i[a]={...u,...i[a],...i5t(n,o,s,n.config)}}return i},{});return ur(r)?null:new yf(t,r)}static makeFromTransform(t,n,r){const{key:i,binComponent:o}=xue(n,n.bin,r);return new yf(t,{[i]:o})}merge(t,n){for(const r of We(t.bins))r in this.bins?(n(t.bins[r].signal,this.bins[r].signal),this.bins[r].as=Zc([...this.bins[r].as,...t.bins[r].as],Tn)):this.bins[r]=t.bins[r];for(const r of t.children)t.removeChild(r),r.parent=this;t.remove()}producedFields(){return new Set(jo(this.bins).map(t=>t.as).flat(2))}dependentFields(){return new Set(jo(this.bins).map(t=>t.field))}hash(){return`Bin ${Tn(this.bins)}`}assemble(){return jo(this.bins).flatMap(t=>{const n=[],[r,...i]=t.as,{extent:o,...s}=t.bin,a={type:"bin",field:dl(t.field),as:r,signal:t.signal,..._3(o)?{extent:null}:{extent:o},...t.span?{span:{signal:`span(${t.span})`}}:{},...s};!o&&t.extentSignal&&(n.push({type:"extent",field:dl(t.field),signal:t.extentSignal}),a.extent={signal:t.extentSignal}),n.push(a);for(const u of i)for(let l=0;l<2;l++)n.push({type:"formula",expr:ot({field:r[l]},{expr:"datum"}),as:u[l]});return t.formula&&n.push({type:"formula",expr:t.formula,as:t.formulaAs}),n})}}function a5t(e,t,n,r){var o;const i=ai(r)?r.encoding[Qf(t)]:void 0;if(Ks(n)&&ai(r)&&ake(n,i,r.markDef,r.config)){e.add(ot(n,{})),e.add(ot(n,{suffix:"end"}));const{mark:s,markDef:a,config:u}=r,l=Sm({fieldDef:n,markDef:a,config:u});RS(s)&&l!==.5&&xi(t)&&(e.add(ot(n,{suffix:F3})),e.add(ot(n,{suffix:j3}))),n.bin&&yA(n,t)&&e.add(ot(n,{binSuffix:"range"}))}else if(i2e(t)){const s=r2e(t);e.add(r.getName(s))}else e.add(ot(n));return ev(n)&&QMt((o=n.scale)==null?void 0:o.range)&&e.add(n.scale.range.field),e}function u5t(e,t){for(const n of We(t)){const r=t[n];for(const i of We(r))n in e?e[n][i]=new Set([...e[n][i]??[],...r[i]]):e[n]={[i]:r[i]}}}class oc extends sr{clone(){return new oc(null,new Set(this.dimensions),Vt(this.measures))}constructor(t,n,r){super(t),this.dimensions=n,this.measures=r}get groupBy(){return this.dimensions}static makeFromEncoding(t,n){let r=!1;n.forEachFieldDef(s=>{s.aggregate&&(r=!0)});const i={},o=new Set;return!r||(n.forEachFieldDef((s,a)=>{const{aggregate:u,field:l}=s;if(u)if(u==="count")i["*"]??(i["*"]={}),i["*"].count=new Set([ot(s,{forAs:!0})]);else{if(hh(u)||rg(u)){const c=hh(u)?"argmin":"argmax",f=u[c];i[f]??(i[f]={}),i[f][c]=new Set([ot({op:c,field:f},{forAs:!0})])}else i[l]??(i[l]={}),i[l][u]=new Set([ot(s,{forAs:!0})]);Dh(a)&&n.scaleDomain(a)==="unaggregated"&&(i[l]??(i[l]={}),i[l].min=new Set([ot({field:l,aggregate:"min"},{forAs:!0})]),i[l].max=new Set([ot({field:l,aggregate:"max"},{forAs:!0})]))}else a5t(o,a,s,n)}),o.size+We(i).length===0)?null:new oc(t,o,i)}static makeFromTransform(t,n){const r=new Set,i={};for(const o of n.aggregate){const{op:s,field:a,as:u}=o;s&&(s==="count"?(i["*"]??(i["*"]={}),i["*"].count=new Set([u||ot(o,{forAs:!0})])):(i[a]??(i[a]={}),i[a][s]=new Set([u||ot(o,{forAs:!0})])))}for(const o of n.groupby??[])r.add(o);return r.size+We(i).length===0?null:new oc(t,r,i)}merge(t){return KAe(this.dimensions,t.dimensions)?(u5t(this.measures,t.measures),!0):(EMt("different dimensions, cannot merge"),!1)}addDimensions(t){t.forEach(this.dimensions.add,this.dimensions)}dependentFields(){return new Set([...this.dimensions,...We(this.measures)])}producedFields(){const t=new Set;for(const n of We(this.measures))for(const r of We(this.measures[n])){const i=this.measures[n][r];i.size===0?t.add(`${r}_${n}`):i.forEach(t.add,t)}return t}hash(){return`Aggregate ${Tn({dimensions:this.dimensions,measures:this.measures})}`}assemble(){const t=[],n=[],r=[];for(const o of We(this.measures))for(const s of We(this.measures[o]))for(const a of this.measures[o][s])r.push(a),t.push(s),n.push(o==="*"?null:dl(o));return{type:"aggregate",groupby:[...this.dimensions].map(dl),ops:t,fields:n,as:r}}}class fw extends sr{constructor(t,n,r,i){super(t),this.model=n,this.name=r,this.data=i;for(const o of Zu){const s=n.facet[o];if(s){const{bin:a,sort:u}=s;this[o]={name:n.getName(`${o}_domain`),fields:[ot(s),...Cr(a)?[ot(s,{binSuffix:"end"})]:[]],...mf(u)?{sortField:u}:Le(u)?{sortIndexField:n_(s,o)}:{}}}}this.childModel=n.child}hash(){let t="Facet";for(const n of Zu)this[n]&&(t+=` ${n.charAt(0)}:${Tn(this[n])}`);return t}get fields(){var n;const t=[];for(const r of Zu)(n=this[r])!=null&&n.fields&&t.push(...this[r].fields);return t}dependentFields(){const t=new Set(this.fields);for(const n of Zu)this[n]&&(this[n].sortField&&t.add(this[n].sortField.field),this[n].sortIndexField&&t.add(this[n].sortIndexField));return t}producedFields(){return new Set}getSource(){return this.name}getChildIndependentFieldsWithStep(){const t={};for(const n of Jf){const r=this.childModel.component.scales[n];if(r&&!r.merged){const i=r.get("type"),o=r.get("range");if(mo(i)&&ig(o)){const s=H3(this.childModel,n),a=lX(s);a?t[n]=a:Xe(cK(n))}}}return t}assembleRowColumnHeaderData(t,n,r){const i={row:"y",column:"x",facet:void 0}[t],o=[],s=[],a=[];i&&r&&r[i]&&(n?(o.push(`distinct_${r[i]}`),s.push("max")):(o.push(r[i]),s.push("distinct")),a.push(`distinct_${r[i]}`));const{sortField:u,sortIndexField:l}=this[t];if(u){const{op:c=A3,field:f}=u;o.push(f),s.push(c),a.push(ot(u,{forAs:!0}))}else l&&(o.push(l),s.push("max"),a.push(l));return{name:this[t].name,source:n??this.data,transform:[{type:"aggregate",groupby:this[t].fields,...o.length?{fields:o,ops:s,as:a}:{}}]}}assembleFacetHeaderData(t){var u;const{columns:n}=this.model.layout,{layoutHeaders:r}=this.model.component,i=[],o={};for(const l of tX){for(const c of nX){const f=(r[l]&&r[l][c])??[];for(const d of f)if(((u=d.axes)==null?void 0:u.length)>0){o[l]=!0;break}}if(o[l]){const c=`length(data("${this.facet.name}"))`,f=l==="row"?n?{signal:`ceil(${c} / ${n})`}:1:n?{signal:`min(${c}, ${n})`}:{signal:c};i.push({name:`${this.facet.name}_${l}`,transform:[{type:"sequence",start:0,stop:f}]})}}const{row:s,column:a}=o;return(s||a)&&i.unshift(this.assembleRowColumnHeaderData("facet",null,t)),i}assemble(){const t=[];let n=null;const r=this.getChildIndependentFieldsWithStep(),{column:i,row:o,facet:s}=this;if(i&&o&&(r.x||r.y)){n=`cross_${this.column.name}_${this.row.name}`;const a=[].concat(r.x??[],r.y??[]),u=a.map(()=>"distinct");t.push({name:n,source:this.data,transform:[{type:"aggregate",groupby:this.fields,fields:a,ops:u}]})}for(const a of[Hd,Vd])this[a]&&t.push(this.assembleRowColumnHeaderData(a,n,r));if(s){const a=this.assembleFacetHeaderData(r);a&&t.push(...a)}return t}}function Tue(e){return e.startsWith("'")&&e.endsWith("'")||e.startsWith('"')&&e.endsWith('"')?e.slice(1,-1):e}function l5t(e,t){const n=eK(e);if(t==="number")return`toNumber(${n})`;if(t==="boolean")return`toBoolean(${n})`;if(t==="string")return`toString(${n})`;if(t==="date")return`toDate(${n})`;if(t==="flatten")return n;if(t.startsWith("date:")){const r=Tue(t.slice(5,t.length));return`timeParse(${n},'${r}')`}else if(t.startsWith("utc:")){const r=Tue(t.slice(4,t.length));return`utcParse(${n},'${r}')`}else return Xe(N3t(t)),null}function c5t(e){const t={};return AI(e.filter,n=>{if(j2e(n)){let r=null;pK(n)?r=eu(n.equal):gK(n)?r=eu(n.lte):mK(n)?r=eu(n.lt):yK(n)?r=eu(n.gt):vK(n)?r=eu(n.gte):bK(n)?r=n.range[0]:_K(n)&&(r=(n.oneOf??n.in)[0]),r&&(Qy(r)?t[n.field]="date":jn(r)?t[n.field]="number":ft(r)&&(t[n.field]="string")),n.timeUnit&&(t[n.field]="date")}}),t}function f5t(e){const t={};function n(r){Jb(r)?t[r.field]="date":r.type==="quantitative"&&u3t(r.aggregate)?t[r.field]="number":qb(r.field)>1?r.field in t||(t[r.field]="flatten"):ev(r)&&mf(r.sort)&&qb(r.sort.field)>1&&(r.sort.field in t||(t[r.sort.field]="flatten"))}if((ai(e)||hu(e))&&e.forEachFieldDef((r,i)=>{if(Ks(r))n(r);else{const o=Ky(i),s=e.fieldDef(o);n({...r,type:s.type})}}),ai(e)){const{mark:r,markDef:i,encoding:o}=e;if(Zy(r)&&!e.encoding.order){const s=i.orient==="horizontal"?"y":"x",a=o[s];Qe(a)&&a.type==="quantitative"&&!(a.field in t)&&(t[a.field]="number")}}return t}function d5t(e){const t={};if(ai(e)&&e.component.selection)for(const n of We(e.component.selection)){const r=e.component.selection[n];for(const i of r.project.items)!i.channel&&qb(i.field)>1&&(t[i.field]="flatten")}return t}class hs extends sr{clone(){return new hs(null,Vt(this._parse))}constructor(t,n){super(t),this._parse=n}hash(){return`Parse ${Tn(this._parse)}`}static makeExplicit(t,n,r){var s;let i={};const o=n.data;return!Xp(o)&&((s=o==null?void 0:o.format)!=null&&s.parse)&&(i=o.format.parse),this.makeWithAncestors(t,i,{},r)}static makeWithAncestors(t,n,r,i){for(const a of We(r)){const u=i.getWithExplicit(a);u.value!==void 0&&(u.explicit||u.value===r[a]||u.value==="derived"||r[a]==="flatten"?delete r[a]:Xe(Oae(a,r[a],u.value)))}for(const a of We(n)){const u=i.get(a);u!==void 0&&(u===n[a]?delete n[a]:Xe(Oae(a,n[a],u)))}const o=new $h(n,r);i.copyAll(o);const s={};for(const a of We(o.combine())){const u=o.get(a);u!==null&&(s[a]=u)}return We(s).length===0||i.parseNothing?null:new hs(t,s)}get parse(){return this._parse}merge(t){this._parse={...this._parse,...t.parse},t.remove()}assembleFormatParse(){const t={};for(const n of We(this._parse)){const r=this._parse[n];qb(n)===1&&(t[n]=r)}return t}producedFields(){return new Set(We(this._parse))}dependentFields(){return new Set(We(this._parse))}assembleTransforms(t=!1){return We(this._parse).filter(n=>t?qb(n)>1:!0).map(n=>{const r=l5t(n,this._parse[n]);return r?{type:"formula",expr:r,as:sw(n)}:null}).filter(n=>n!==null)}}class Im extends sr{clone(){return new Im(null)}constructor(t){super(t)}dependentFields(){return new Set}producedFields(){return new Set([pc])}hash(){return"Identifier"}assemble(){return{type:"identifier",as:pc}}}class _A extends sr{clone(){return new _A(null,this.params)}constructor(t,n){super(t),this.params=n}dependentFields(){return new Set}producedFields(){}hash(){return`Graticule ${Tn(this.params)}`}assemble(){return{type:"graticule",...this.params===!0?{}:this.params}}}class wA extends sr{clone(){return new wA(null,this.params)}constructor(t,n){super(t),this.params=n}dependentFields(){return new Set}producedFields(){return new Set([this.params.as??"data"])}hash(){return`Hash ${Tn(this.params)}`}assemble(){return{type:"sequence",...this.params}}}class dy extends sr{constructor(t){super(null),t??(t={name:"source"});let n;if(Xp(t)||(n=t.format?{...Oa(t.format,["parse"])}:{}),NS(t))this._data={values:t.values};else if(Zb(t)){if(this._data={url:t.url},!n.type){let r=/(?:\.([^.]+))?$/.exec(t.url)[1];Sn(["json","csv","tsv","dsv","topojson"],r)||(r="json"),n.type=r}}else eIe(t)?this._data={values:[{type:"Sphere"}]}:(Jke(t)||Xp(t))&&(this._data={});this._generator=Xp(t),t.name&&(this._name=t.name),n&&!ur(n)&&(this._data.format=n)}dependentFields(){return new Set}producedFields(){}get data(){return this._data}hasName(){return!!this._name}get isGenerator(){return this._generator}get dataName(){return this._name}set dataName(t){this._name=t}set parent(t){throw new Error("Source nodes have to be roots.")}remove(){throw new Error("Source nodes are roots and cannot be removed.")}hash(){throw new Error("Cannot hash sources")}assemble(){return{name:this._name,...this._data,transform:[]}}}var Sue=function(e,t,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(e,n):i?i.value=n:t.set(e,n),n},h5t=function(e,t,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(e):r?r.value:t.get(e)},tx;function sX(e){return e instanceof dy||e instanceof _A||e instanceof wA}class aX{constructor(){tx.set(this,void 0),Sue(this,tx,!1,"f")}setModified(){Sue(this,tx,!0,"f")}get modifiedFlag(){return h5t(this,tx,"f")}}tx=new WeakMap;class tv extends aX{getNodeDepths(t,n,r){r.set(t,n);for(const i of t.children)this.getNodeDepths(i,n+1,r);return r}optimize(t){const r=[...this.getNodeDepths(t,0,new Map).entries()].sort((i,o)=>o[1]-i[1]);for(const i of r)this.run(i[0]);return this.modifiedFlag}}class uX extends aX{optimize(t){this.run(t);for(const n of t.children)this.optimize(n);return this.modifiedFlag}}class p5t extends uX{mergeNodes(t,n){const r=n.shift();for(const i of n)t.removeChild(i),i.parent=r,i.remove()}run(t){const n=t.children.map(i=>i.hash()),r={};for(let i=0;i<n.length;i++)r[n[i]]===void 0?r[n[i]]=[t.children[i]]:r[n[i]].push(t.children[i]);for(const i of We(r))r[i].length>1&&(this.setModified(),this.mergeNodes(t,r[i]))}}class m5t extends uX{constructor(t){super(),this.requiresSelectionId=t&&eX(t)}run(t){t instanceof Im&&(this.requiresSelectionId&&(sX(t.parent)||t.parent instanceof oc||t.parent instanceof hs)||(this.setModified(),t.remove()))}}class g5t extends aX{optimize(t){return this.run(t,new Set),this.modifiedFlag}run(t,n){let r=new Set;t instanceof gf&&(r=t.producedFields(),JY(r,n)&&(this.setModified(),t.removeFormulas(n),t.producedFields.length===0&&t.remove()));for(const i of t.children)this.run(i,new Set([...n,...r]))}}class y5t extends uX{constructor(){super()}run(t){t instanceof Ma&&!t.isRequired()&&(this.setModified(),t.remove())}}class v5t extends tv{run(t){if(!sX(t)&&!(t.numChildren()>1)){for(const n of t.children)if(n instanceof hs)if(t instanceof hs)this.setModified(),t.merge(n);else{if(ZY(t.producedFields(),n.dependentFields()))continue;this.setModified(),n.swapWithParent()}}}}class b5t extends tv{run(t){const n=[...t.children],r=t.children.filter(i=>i instanceof hs);if(t.numChildren()>1&&r.length>=1){const i={},o=new Set;for(const s of r){const a=s.parse;for(const u of We(a))u in i?i[u]!==a[u]&&o.add(u):i[u]=a[u]}for(const s of o)delete i[s];if(!ur(i)){this.setModified();const s=new hs(t,i);for(const a of n){if(a instanceof hs)for(const u of We(i))delete a.parse[u];t.removeChild(a),a.parent=s,a instanceof hs&&We(a.parse).length===0&&a.remove()}}}}}class _5t extends tv{run(t){t instanceof Ma||t.numChildren()>0||t instanceof fw||t instanceof dy||(this.setModified(),t.remove())}}class w5t extends tv{run(t){const n=t.children.filter(i=>i instanceof gf),r=n.pop();for(const i of n)this.setModified(),r.merge(i)}}class E5t extends tv{run(t){const n=t.children.filter(i=>i instanceof oc),r={};for(const i of n){const o=Tn(i.groupBy);o in r||(r[o]=[]),r[o].push(i)}for(const i of We(r)){const o=r[i];if(o.length>1){const s=o.pop();for(const a of o)s.merge(a)&&(t.removeChild(a),a.parent=s,a.remove(),this.setModified())}}}}class x5t extends tv{constructor(t){super(),this.model=t}run(t){const n=!(sX(t)||t instanceof cw||t instanceof hs||t instanceof Im),r=[],i=[];for(const o of t.children)o instanceof yf&&(n&&!ZY(t.producedFields(),o.dependentFields())?r.push(o):i.push(o));if(r.length>0){const o=r.pop();for(const s of r)o.merge(s,this.model.renameSignal.bind(this.model));this.setModified(),t instanceof yf?t.merge(o,this.model.renameSignal.bind(this.model)):o.swapWithParent()}if(i.length>1){const o=i.pop();for(const s of i)o.merge(s,this.model.renameSignal.bind(this.model));this.setModified()}}}class T5t extends tv{run(t){const n=[...t.children];if(!ry(n,s=>s instanceof Ma)||t.numChildren()<=1)return;const i=[];let o;for(const s of n)if(s instanceof Ma){let a=s;for(;a.numChildren()===1;){const[u]=a.children;if(u instanceof Ma)a=u;else break}i.push(...a.children),o?(t.removeChild(s),s.parent=o.parent,o.parent.removeChild(o),o.parent=a,this.setModified()):o=a}else i.push(s);if(i.length){this.setModified();for(const s of i)s.parent.removeChild(s),s.parent=o}}}class nv extends sr{clone(){return new nv(null,Vt(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=Zc(this.transform.groupby.concat(t),n=>n)}dependentFields(){const t=new Set;return this.transform.groupby&&this.transform.groupby.forEach(t.add,t),this.transform.joinaggregate.map(n=>n.field).filter(n=>n!==void 0).forEach(t.add,t),t}producedFields(){return new Set(this.transform.joinaggregate.map(this.getDefaultName))}getDefaultName(t){return t.as??ot(t)}hash(){return`JoinAggregateTransform ${Tn(this.transform)}`}assemble(){const t=[],n=[],r=[];for(const o of this.transform.joinaggregate)n.push(o.op),r.push(this.getDefaultName(o)),t.push(o.field===void 0?null:o.field);const i=this.transform.groupby;return{type:"joinaggregate",as:r,ops:n,fields:t,...i!==void 0?{groupby:i}:{}}}}function S5t(e){return e.stack.stackBy.reduce((t,n)=>{const r=n.fieldDef,i=ot(r);return i&&t.push(i),t},[])}function C5t(e){return Le(e)&&e.every(t=>ft(t))&&e.length>1}class Wd extends sr{clone(){return new Wd(null,Vt(this._stack))}constructor(t,n){super(t),this._stack=n}static makeFromTransform(t,n){const{stack:r,groupby:i,as:o,offset:s="zero"}=n,a=[],u=[];if(n.sort!==void 0)for(const f of n.sort)a.push(f.field),u.push(Ei(f.order,"ascending"));const l={field:a,order:u};let c;return C5t(o)?c=o:ft(o)?c=[o,`${o}_end`]:c=[`${n.stack}_start`,`${n.stack}_end`],new Wd(t,{dimensionFieldDefs:[],stackField:r,groupby:i,offset:s,sort:l,facetby:[],as:c})}static makeFromEncoding(t,n){const r=n.stack,{encoding:i}=n;if(!r)return null;const{groupbyChannels:o,fieldChannel:s,offset:a,impute:u}=r,l=o.map(h=>{const p=i[h];return If(p)}).filter(h=>!!h),c=S5t(n),f=n.encoding.order;let d;if(Le(f)||Qe(f))d=b2e(f);else{const h=uke(f)?f.sort:s==="y"?"descending":"ascending";d=c.reduce((p,m)=>(p.field.includes(m)||(p.field.push(m),p.order.push(h)),p),{field:[],order:[]})}return new Wd(t,{dimensionFieldDefs:l,stackField:n.vgField(s),facetby:[],stackby:c,sort:d,offset:a,impute:u,as:[n.vgField(s,{suffix:"start",forAs:!0}),n.vgField(s,{suffix:"end",forAs:!0})]})}get stack(){return this._stack}addDimensions(t){this._stack.facetby.push(...t)}dependentFields(){const t=new Set;return t.add(this._stack.stackField),this.getGroupbyFields().forEach(t.add,t),this._stack.facetby.forEach(t.add,t),this._stack.sort.field.forEach(t.add,t),t}producedFields(){return new Set(this._stack.as)}hash(){return`Stack ${Tn(this._stack)}`}getGroupbyFields(){const{dimensionFieldDefs:t,impute:n,groupby:r}=this._stack;return t.length>0?t.map(i=>i.bin?n?[ot(i,{binSuffix:"mid"})]:[ot(i,{}),ot(i,{binSuffix:"end"})]:[ot(i)]).flat():r??[]}assemble(){const t=[],{facetby:n,dimensionFieldDefs:r,stackField:i,stackby:o,sort:s,offset:a,impute:u,as:l}=this._stack;if(u)for(const c of r){const{bandPosition:f=.5,bin:d}=c;if(d){const h=ot(c,{expr:"datum"}),p=ot(c,{expr:"datum",binSuffix:"end"});t.push({type:"formula",expr:`${f}*${h}+${1-f}*${p}`,as:ot(c,{binSuffix:"mid",forAs:!0})})}t.push({type:"impute",field:i,groupby:[...o,...n],key:ot(c,{binSuffix:"mid"}),method:"value",value:0})}return t.push({type:"stack",groupby:[...this.getGroupbyFields(),...n],field:i,sort:s,as:l,offset:a}),t}}class dw extends sr{clone(){return new dw(null,Vt(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=Zc(this.transform.groupby.concat(t),n=>n)}dependentFields(){const t=new Set;return(this.transform.groupby??[]).forEach(t.add,t),(this.transform.sort??[]).forEach(n=>t.add(n.field)),this.transform.window.map(n=>n.field).filter(n=>n!==void 0).forEach(t.add,t),t}producedFields(){return new Set(this.transform.window.map(this.getDefaultName))}getDefaultName(t){return t.as??ot(t)}hash(){return`WindowTransform ${Tn(this.transform)}`}assemble(){const t=[],n=[],r=[],i=[];for(const f of this.transform.window)n.push(f.op),r.push(this.getDefaultName(f)),i.push(f.param===void 0?null:f.param),t.push(f.field===void 0?null:f.field);const o=this.transform.frame,s=this.transform.groupby;if(o&&o[0]===null&&o[1]===null&&n.every(f=>uK(f)))return{type:"joinaggregate",as:r,ops:n,fields:t,...s!==void 0?{groupby:s}:{}};const a=[],u=[];if(this.transform.sort!==void 0)for(const f of this.transform.sort)a.push(f.field),u.push(f.order??"ascending");const l={field:a,order:u},c=this.transform.ignorePeers;return{type:"window",params:i,as:r,ops:n,fields:t,sort:l,...c!==void 0?{ignorePeers:c}:{},...s!==void 0?{groupby:s}:{},...o!==void 0?{frame:o}:{}}}}function A5t(e){function t(n){if(!(n instanceof fw)){const r=n.clone();if(r instanceof Ma){const i=Z8+r.getSource();r.setSource(i),e.model.component.data.outputNodes[i]=r}else(r instanceof oc||r instanceof Wd||r instanceof dw||r instanceof nv)&&r.addDimensions(e.fields);for(const i of n.children.flatMap(t))i.parent=r;return[r]}return n.children.flatMap(t)}return t}function J8(e){if(e instanceof fw)if(e.numChildren()===1&&!(e.children[0]instanceof Ma)){const t=e.children[0];(t instanceof oc||t instanceof Wd||t instanceof dw||t instanceof nv)&&t.addDimensions(e.fields),t.swapWithParent(),J8(e)}else{const t=e.model.component.data.main;GIe(t);const n=A5t(e),r=e.children.map(n).flat();for(const i of r)i.parent=t}else e.children.map(J8)}function GIe(e){if(e instanceof Ma&&e.type===jr.Main&&e.numChildren()===1){const t=e.children[0];t instanceof fw||(t.swapWithParent(),GIe(e))}}const Z8="scale_",uk=5;function eB(e){for(const t of e){for(const n of t.children)if(n.parent!==t)return!1;if(!eB(t.children))return!1}return!0}function Al(e,t){let n=!1;for(const r of t)n=e.optimize(r)||n;return n}function Cue(e,t,n){let r=e.sources,i=!1;return i=Al(new y5t,r)||i,i=Al(new m5t(t),r)||i,r=r.filter(o=>o.numChildren()>0),i=Al(new _5t,r)||i,r=r.filter(o=>o.numChildren()>0),n||(i=Al(new v5t,r)||i,i=Al(new x5t(t),r)||i,i=Al(new g5t,r)||i,i=Al(new b5t,r)||i,i=Al(new E5t,r)||i,i=Al(new w5t,r)||i,i=Al(new p5t,r)||i,i=Al(new T5t,r)||i),e.sources=r,i}function k5t(e,t){eB(e.sources);let n=0,r=0;for(let i=0;i<uk&&Cue(e,t,!0);i++)n++;e.sources.map(J8);for(let i=0;i<uk&&Cue(e,t,!1);i++)r++;eB(e.sources),Math.max(n,r)===uk&&Xe(`Maximum optimization runs(${uk}) reached.`)}class ro{constructor(t){Object.defineProperty(this,"signal",{enumerable:!0,get:t})}static fromName(t,n){return new ro(()=>t(n))}}function YIe(e){ai(e)?I5t(e):R5t(e)}function I5t(e){const t=e.component.scales;for(const n of We(t)){const r=P5t(e,n);if(t[n].setWithExplicit("domains",r),O5t(e,n),e.component.data.isFaceted){let o=e;for(;!hu(o)&&o.parent;)o=o.parent;if(o.component.resolve.scale[n]==="shared")for(const a of r.value)Dd(a)&&(a.data=Z8+a.data.replace(Z8,""))}}}function R5t(e){for(const n of e.children)YIe(n);const t=e.component.scales;for(const n of We(t)){let r,i=null;for(const o of e.children){const s=o.component.scales[n];if(s){r===void 0?r=s.getWithExplicit("domains"):r=Cm(r,s.getWithExplicit("domains"),"domains","scale",tB);const a=s.get("selectionExtent");i&&a&&i.param!==a.param&&Xe(A3t),i=a}}t[n].setWithExplicit("domains",r),i&&t[n].set("selectionExtent",i,!0)}}function N5t(e,t,n,r){if(e==="unaggregated"){const{valid:i,reason:o}=Aue(t,n);if(!i){Xe(o);return}}else if(e===void 0&&r.useUnaggregatedDomain){const{valid:i}=Aue(t,n);if(i)return"unaggregated"}return e}function P5t(e,t){const n=e.getScaleComponent(t).get("type"),{encoding:r}=e,i=N5t(e.scaleDomain(t),e.typedFieldDef(t),n,e.config.scale);return i!==e.scaleDomain(t)&&(e.specifiedScales[t]={...e.specifiedScales[t],domain:i}),t==="x"&&zi(r.x2)?zi(r.x)?Cm(Gh(n,i,e,"x"),Gh(n,i,e,"x2"),"domain","scale",tB):Gh(n,i,e,"x2"):t==="y"&&zi(r.y2)?zi(r.y)?Cm(Gh(n,i,e,"y"),Gh(n,i,e,"y2"),"domain","scale",tB):Gh(n,i,e,"y2"):Gh(n,i,e,t)}function D5t(e,t,n){return e.map(r=>({signal:`{data: ${P3(r,{timeUnit:n,type:t})}}`}))}function O4(e,t,n){var i;const r=(i=po(n))==null?void 0:i.unit;return t==="temporal"||r?D5t(e,t,r):[e]}function Gh(e,t,n,r){const{encoding:i,markDef:o,mark:s,config:a,stack:u}=n,l=zi(i[r]),{type:c}=l,f=l.timeUnit;if(XMt(t)){const p=Gh(e,void 0,n,r),m=O4(t.unionWith,c,f);return jc([...m,...p.value])}else{if(At(t))return jc([t]);if(t&&t!=="unaggregated"&&!W2e(t))return jc(O4(t,c,f))}if(u&&r===u.fieldChannel){if(u.offset==="normalize")return Ka([[0,1]]);const p=n.requestDataName(jr.Main);return Ka([{data:p,field:n.vgField(r,{suffix:"start"})},{data:p,field:n.vgField(r,{suffix:"end"})}])}const d=Dh(r)&&Qe(l)?$5t(n,r,e):void 0;if(Zf(l)){const p=O4([l.datum],c,f);return Ka(p)}const h=l;if(t==="unaggregated"){const p=n.requestDataName(jr.Main),{field:m}=l;return Ka([{data:p,field:ot({field:m,aggregate:"min"})},{data:p,field:ot({field:m,aggregate:"max"})}])}else if(Cr(h.bin)){if(mo(e))return Ka(e==="bin-ordinal"?[]:[{data:kS(d)?n.requestDataName(jr.Main):n.requestDataName(jr.Raw),field:n.vgField(r,yA(h,r)?{binSuffix:"range"}:{}),sort:d===!0||!ht(d)?{field:n.vgField(r,{}),op:"min"}:d}]);{const{bin:p}=h;if(Cr(p)){const m=oX(n,h.field,p);return Ka([new ro(()=>{const g=n.getSignalName(m);return`[${g}.start, ${g}.stop]`})])}else return Ka([{data:n.requestDataName(jr.Main),field:n.vgField(r,{})}])}}else if(h.timeUnit&&Sn(["time","utc"],e)){const p=i[Qf(r)];if(ake(h,p,o,a)){const m=n.requestDataName(jr.Main),g=Sm({fieldDef:h,fieldDef2:p,markDef:o,config:a}),y=RS(s)&&g!==.5&&xi(r);return Ka([{data:m,field:n.vgField(r,y?{suffix:F3}:{})},{data:m,field:n.vgField(r,{suffix:y?j3:"end"})}])}}return Ka(d?[{data:kS(d)?n.requestDataName(jr.Main):n.requestDataName(jr.Raw),field:n.vgField(r),sort:d}]:[{data:n.requestDataName(jr.Main),field:n.vgField(r)}])}function $4(e,t){const{op:n,field:r,order:i}=e;return{op:n??(t?"sum":A3),...r?{field:dl(r)}:{},...i?{order:i}:{}}}function O5t(e,t){var a;const n=e.component.scales[t],r=e.specifiedScales[t].domain,i=(a=e.fieldDef(t))==null?void 0:a.bin,o=W2e(r)&&r,s=Xy(i)&&_3(i.extent)&&i.extent;(o||s)&&n.set("selectionExtent",o??s,!0)}function $5t(e,t,n){if(!mo(n))return;const r=e.fieldDef(t),i=r.sort;if(oke(i))return{op:"min",field:n_(r,t),order:"ascending"};const{stack:o}=e,s=o?new Set([...o.groupbyFields,...o.stackBy.map(a=>a.fieldDef.field)]):void 0;if(mf(i)){const a=o&&!s.has(i.field);return $4(i,a)}else if(ike(i)){const{encoding:a,order:u}=i,l=e.fieldDef(a),{aggregate:c,field:f}=l,d=o&&!s.has(f);if(hh(c)||rg(c))return $4({field:ot(l),order:u},d);if(uK(c)||!c)return $4({op:c,field:f,order:u},d)}else{if(i==="descending")return{op:"min",field:e.vgField(t),order:"descending"};if(Sn(["ascending",void 0],i))return!0}}function Aue(e,t){const{aggregate:n,type:r}=e;return n?ft(n)&&!c3t.has(n)?{valid:!1,reason:Z3t(n)}:r==="quantitative"&&t==="log"?{valid:!1,reason:eMt(e)}:{valid:!0}:{valid:!1,reason:J3t(e)}}function tB(e,t,n,r){return e.explicit&&t.explicit&&Xe(oMt(n,r,e.value,t.value)),{explicit:e.explicit,value:[...e.value,...t.value]}}function M5t(e){const t=Zc(e.map(s=>{if(Dd(s)){const{sort:a,...u}=s;return u}return s}),Tn),n=Zc(e.map(s=>{if(Dd(s)){const a=s.sort;return a!==void 0&&!kS(a)&&("op"in a&&a.op==="count"&&delete a.field,a.order==="ascending"&&delete a.order),a}}).filter(s=>s!==void 0),Tn);if(t.length===0)return;if(t.length===1){const s=e[0];if(Dd(s)&&n.length>0){let a=n[0];if(n.length>1){Xe(Mae);const u=n.filter(l=>ht(l)&&"op"in l&&l.op!=="min");n.every(l=>ht(l)&&"op"in l)&&u.length===1?a=u[0]:a=!0}else if(ht(a)&&"field"in a){const u=a.field;s.field===u&&(a=a.order?{order:a.order}:!0)}return{...s,sort:a}}return s}const r=Zc(n.map(s=>kS(s)||!("op"in s)||ft(s.op)&&s.op in s3t?s:(Xe(aMt(s)),!0)),Tn);let i;r.length===1?i=r[0]:r.length>1&&(Xe(Mae),i=!0);const o=Zc(e.map(s=>Dd(s)?s.data:null),s=>s);return o.length===1&&o[0]!==null?{data:o[0],fields:t.map(a=>a.field),...i?{sort:i}:{}}:{fields:t,...i?{sort:i}:{}}}function lX(e){if(Dd(e)&&ft(e.field))return e.field;if(f3t(e)){let t;for(const n of e.fields)if(Dd(n)&&ft(n.field)){if(!t)t=n.field;else if(t!==n.field)return Xe(uMt),t}return Xe(lMt),t}else if(d3t(e)){Xe(cMt);const t=e.fields[0];return ft(t)?t:void 0}}function H3(e,t){const r=e.component.scales[t].get("domains").map(i=>(Dd(i)&&(i.data=e.lookupDataSource(i.data)),i));return M5t(r)}function KIe(e){return hw(e)||cX(e)?e.children.reduce((t,n)=>t.concat(KIe(n)),kue(e)):kue(e)}function kue(e){return We(e.component.scales).reduce((t,n)=>{const r=e.component.scales[n];if(r.merged)return t;const i=r.combine(),{name:o,type:s,selectionExtent:a,domains:u,range:l,reverse:c,...f}=i,d=L5t(i.range,o,n,e),h=H3(e,n),p=a?N4t(e,a,r,h):null;return t.push({name:o,type:s,...h?{domain:h}:{},...p?{domainRaw:p}:{},range:d,...c!==void 0?{reverse:c}:{},...f}),t},[])}function L5t(e,t,n,r){if(xi(n)){if(ig(e))return{step:{signal:`${t}_step`}}}else if(ht(e)&&Dd(e))return{...e,data:r.lookupDataSource(e.data)};return e}class XIe extends $h{constructor(t,n){super({},{name:t}),this.merged=!1,this.setWithExplicit("type",n)}domainDefinitelyIncludesZero(){return this.get("zero")!==!1?!0:ry(this.get("domains"),t=>Le(t)&&t.length===2&&jn(t[0])&&t[0]<=0&&jn(t[1])&&t[1]>=0)}}const F5t=["range","scheme"];function j5t(e){const t=e.component.scales;for(const n of b3){const r=t[n];if(!r)continue;const i=B5t(n,e);r.setWithExplicit("range",i)}}function Iue(e,t){const n=e.fieldDef(t);if(n!=null&&n.bin){const{bin:r,field:i}=n,o=Va(t),s=e.getName(o);if(ht(r)&&r.binned&&r.step!==void 0)return new ro(()=>{const a=e.scaleName(t),u=`(domain("${a}")[1] - domain("${a}")[0]) / ${r.step}`;return`${e.getSignalName(s)} / (${u})`});if(Cr(r)){const a=oX(e,i,r);return new ro(()=>{const u=e.getSignalName(a),l=`(${u}.stop - ${u}.start) / ${u}.step`;return`${e.getSignalName(s)} / (${l})`})}}}function B5t(e,t){const n=t.specifiedScales[e],{size:r}=t,o=t.getScaleComponent(e).get("type");for(const f of F5t)if(n[f]!==void 0){const d=j8(o,f),h=G2e(e,f);if(!d)Xe(C2e(o,f,e));else if(h)Xe(h);else switch(f){case"range":{const p=n.range;if(Le(p)){if(xi(e))return jc(p.map(m=>{if(m==="width"||m==="height"){const g=t.getName(m),y=t.getSignalName.bind(t);return ro.fromName(y,g)}return m}))}else if(ht(p))return jc({data:t.requestDataName(jr.Main),field:p.field,sort:{op:"min",field:t.vgField(e)}});return jc(p)}case"scheme":return jc(U5t(n[f]))}}const s=e===Hr||e==="xOffset"?"width":"height",a=r[s];if(Rf(a)){if(xi(e))if(mo(o)){const f=JIe(a,t,e);if(f)return jc({step:f})}else Xe(A2e(s));else if(fA(e)){const f=e===Jm?"x":"y";if(t.getScaleComponent(f).get("type")==="band"){const p=ZIe(a,o);if(p)return jc(p)}}}const{rangeMin:u,rangeMax:l}=n,c=z5t(e,t);return(u!==void 0||l!==void 0)&&j8(o,"rangeMin")&&Le(c)&&c.length===2?jc([u??c[0],l??c[1]]):Ka(c)}function U5t(e){return KMt(e)?{scheme:e.name,...Oa(e,["name"])}:{scheme:e}}function QIe(e,t,n,{center:r}={}){const i=Va(e),o=t.getName(i),s=t.getSignalName.bind(t);return e===vo&&Au(n)?r?[ro.fromName(a=>`${s(a)}/2`,o),ro.fromName(a=>`-${s(a)}/2`,o)]:[ro.fromName(s,o),0]:r?[ro.fromName(a=>`-${s(a)}/2`,o),ro.fromName(a=>`${s(a)}/2`,o)]:[0,ro.fromName(s,o)]}function z5t(e,t){const{size:n,config:r,mark:i,encoding:o}=t,{type:s}=zi(o[e]),u=t.getScaleComponent(e).get("type"),{domain:l,domainMid:c}=t.specifiedScales[e];switch(e){case Hr:case vo:{if(Sn(["point","band"],u)){const f=eRe(e,n,r.view);if(Rf(f))return{step:JIe(f,t,e)}}return QIe(e,t,u)}case Jm:case aw:return V5t(e,t,u);case Nh:{const f=t.component.scales[e].get("zero"),d=tRe(i,f,r),h=W5t(i,n,t,r);return Kb(u)?q5t(d,h,H5t(u,r,l,e)):[d,h]}case wl:return[0,Math.PI*2];case Yy:return[0,360];case Ec:return[0,new ro(()=>{const f=t.getSignalName(hu(t.parent)?"child_width":"width"),d=t.getSignalName(hu(t.parent)?"child_height":"height");return`min(${f},${d})/2`})];case tg:return[r.scale.minStrokeWidth,r.scale.maxStrokeWidth];case ng:return[[1,0],[4,2],[2,1],[1,1],[1,2,4,2]];case za:return"symbol";case Ua:case Kf:case Xf:return u==="ordinal"?s==="nominal"?"category":"ordinal":c!==void 0?"diverging":i==="rect"||i==="geoshape"?"heatmap":"ramp";case Ph:case Zm:case eg:return[r.scale.minOpacity,r.scale.maxOpacity]}}function JIe(e,t,n){const{encoding:r}=t,i=t.getScaleComponent(n),o=iK(n),s=r[o];if(Fke({step:e,offsetIsDiscrete:Yt(s)&&U2e(s.type)})==="offset"&&bke(r,o)){const u=t.getScaleComponent(o);let c=`domain('${t.scaleName(o)}').length`;if(u.get("type")==="band"){const d=u.get("paddingInner")??u.get("padding")??0,h=u.get("paddingOuter")??u.get("padding")??0;c=`bandspace(${c}, ${d}, ${h})`}const f=i.get("paddingInner")??i.get("padding");return{signal:`${e.step} * ${c} / (1-${g3t(f)})`}}else return e.step}function ZIe(e,t){if(Fke({step:e,offsetIsDiscrete:mo(t)})==="offset")return{step:e.step}}function V5t(e,t,n){const r=e===Jm?"x":"y",i=t.getScaleComponent(r);if(!i)return QIe(r,t,n,{center:!0});const o=i.get("type"),s=t.scaleName(r),{markDef:a,config:u}=t;if(o==="band"){const l=eRe(r,t.size,t.config.view);if(Rf(l)){const c=ZIe(l,n);if(c)return c}return[0,{signal:`bandwidth('${s}')`}]}else{const l=t.encoding[r];if(Qe(l)&&l.timeUnit){const c=L2e(l.timeUnit,p=>`scale('${s}', ${p})`),f=t.config.scale.bandWithNestedOffsetPaddingInner,d=Sm({fieldDef:l,markDef:a,config:u})-.5,h=d!==0?` + ${d}`:"";if(f){const p=At(f)?`${f.signal}/2`+h:`${f/2+d}`,m=At(f)?`(1 - ${f.signal}/2)`+h:`${1-f/2+d}`;return[{signal:`${p} * (${c})`},{signal:`${m} * (${c})`}]}return[0,{signal:c}]}return GAe(`Cannot use ${e} scale if ${r} scale is not discrete.`)}}function eRe(e,t,n){const r=e===Hr?"width":"height",i=t[r];return i||MP(n,r)}function H5t(e,t,n,r){switch(e){case"quantile":return t.scale.quantileCount;case"quantize":return t.scale.quantizeCount;case"threshold":return n!==void 0&&Le(n)?n.length+1:(Xe(bMt(r)),3)}}function q5t(e,t,n){const r=()=>{const i=Kl(t),o=Kl(e),s=`(${i} - ${o}) / (${n} - 1)`;return`sequence(${o}, ${i} + ${s}, ${s})`};return At(t)?new ro(r):{signal:r()}}function tRe(e,t,n){if(t)return At(t)?{signal:`${t.signal} ? 0 : ${tRe(e,!1,n)}`}:0;switch(e){case"bar":case"tick":return n.scale.minBandSize;case"line":case"trail":case"rule":return n.scale.minStrokeWidth;case"text":return n.scale.minFontSize;case"point":case"square":case"circle":return n.scale.minSize}throw new Error(w3("size",e))}const Rue=.95;function W5t(e,t,n,r){const i={x:Iue(n,"x"),y:Iue(n,"y")};switch(e){case"bar":case"tick":{if(r.scale.maxBandSize!==void 0)return r.scale.maxBandSize;const o=Nue(t,i,r.view);return jn(o)?o-1:new ro(()=>`${o.signal} - 1`)}case"line":case"trail":case"rule":return r.scale.maxStrokeWidth;case"text":return r.scale.maxFontSize;case"point":case"square":case"circle":{if(r.scale.maxSize)return r.scale.maxSize;const o=Nue(t,i,r.view);return jn(o)?Math.pow(Rue*o,2):new ro(()=>`pow(${Rue} * ${o.signal}, 2)`)}}throw new Error(w3("size",e))}function Nue(e,t,n){const r=Rf(e.width)?e.width.step:$P(n,"width"),i=Rf(e.height)?e.height.step:$P(n,"height");return t.x||t.y?new ro(()=>`min(${[t.x?t.x.signal:r,t.y?t.y.signal:i].join(", ")})`):Math.min(r,i)}function nRe(e,t){ai(e)?G5t(e,t):iRe(e,t)}function G5t(e,t){const n=e.component.scales,{config:r,encoding:i,markDef:o,specifiedScales:s}=e;for(const a of We(n)){const u=s[a],l=n[a],c=e.getScaleComponent(a),f=zi(i[a]),d=u[t],h=c.get("type"),p=c.get("padding"),m=c.get("paddingInner"),g=j8(h,t),y=G2e(a,t);if(d!==void 0&&(g?y&&Xe(y):Xe(C2e(h,t,a))),g&&y===void 0)if(d!==void 0){const v=f.timeUnit,_=f.type;switch(t){case"domainMax":case"domainMin":Qy(u[t])||_==="temporal"||v?l.set(t,{signal:P3(u[t],{type:_,timeUnit:v})},!0):l.set(t,u[t],!0);break;default:l.copyKeyFromObject(t,u)}}else{const v=t in Pue?Pue[t]({model:e,channel:a,fieldOrDatumDef:f,scaleType:h,scalePadding:p,scalePaddingInner:m,domain:u.domain,domainMin:u.domainMin,domainMax:u.domainMax,markDef:o,config:r,hasNestedOffsetScale:_ke(i,a),hasSecondaryRangeChannel:!!i[Qf(a)]}):r.scale[t];v!==void 0&&l.set(t,v,!1)}}}const Pue={bins:({model:e,fieldOrDatumDef:t})=>Qe(t)?Y5t(e,t):void 0,interpolate:({channel:e,fieldOrDatumDef:t})=>K5t(e,t.type),nice:({scaleType:e,channel:t,domain:n,domainMin:r,domainMax:i,fieldOrDatumDef:o})=>X5t(e,t,n,r,i,o),padding:({channel:e,scaleType:t,fieldOrDatumDef:n,markDef:r,config:i})=>Q5t(e,t,i.scale,n,r,i.bar),paddingInner:({scalePadding:e,channel:t,markDef:n,scaleType:r,config:i,hasNestedOffsetScale:o})=>J5t(e,t,n.type,r,i.scale,o),paddingOuter:({scalePadding:e,channel:t,scaleType:n,scalePaddingInner:r,config:i,hasNestedOffsetScale:o})=>Z5t(e,t,n,r,i.scale,o),reverse:({fieldOrDatumDef:e,scaleType:t,channel:n,config:r})=>{const i=Qe(e)?e.sort:void 0;return ejt(t,i,n,r.scale)},zero:({channel:e,fieldOrDatumDef:t,domain:n,markDef:r,scaleType:i,config:o,hasSecondaryRangeChannel:s})=>tjt(e,t,n,r,i,o.scale,s)};function rRe(e){ai(e)?j5t(e):iRe(e,"range")}function iRe(e,t){const n=e.component.scales;for(const r of e.children)t==="range"?rRe(r):nRe(r,t);for(const r of We(n)){let i;for(const o of e.children){const s=o.component.scales[r];if(s){const a=s.getWithExplicit(t);i=Cm(i,a,t,"scale",Qke((u,l)=>{switch(t){case"range":return u.step&&l.step?u.step-l.step:0}return 0}))}}n[r].setWithExplicit(t,i)}}function Y5t(e,t){const n=t.bin;if(Cr(n)){const r=oX(e,t.field,n);return new ro(()=>e.getSignalName(r))}else if(Io(n)&&Xy(n)&&n.step!==void 0)return{step:n.step}}function K5t(e,t){if(Sn([Ua,Kf,Xf],e)&&t!=="nominal")return"hcl"}function X5t(e,t,n,r,i,o){var s;if(!((s=If(o))!=null&&s.bin||Le(n)||i!=null||r!=null||Sn([$a.TIME,$a.UTC],e)))return xi(t)?!0:void 0}function Q5t(e,t,n,r,i,o){if(xi(e)){if(Xl(t)){if(n.continuousPadding!==void 0)return n.continuousPadding;const{type:s,orient:a}=i;if(s==="bar"&&!(Qe(r)&&(r.bin||r.timeUnit))&&(a==="vertical"&&e==="x"||a==="horizontal"&&e==="y"))return o.continuousBandSize}if(t===$a.POINT)return n.pointPadding}}function J5t(e,t,n,r,i,o=!1){if(e===void 0){if(xi(t)){const{bandPaddingInner:s,barBandPaddingInner:a,rectBandPaddingInner:u,bandWithNestedOffsetPaddingInner:l}=i;return o?l:Ei(s,n==="bar"?a:u)}else if(fA(t)&&r===$a.BAND)return i.offsetBandPaddingInner}}function Z5t(e,t,n,r,i,o=!1){if(e===void 0){if(xi(t)){const{bandPaddingOuter:s,bandWithNestedOffsetPaddingOuter:a}=i;if(o)return a;if(n===$a.BAND)return Ei(s,At(r)?{signal:`${r.signal}/2`}:r/2)}else if(fA(t)){if(n===$a.POINT)return .5;if(n===$a.BAND)return i.offsetBandPaddingOuter}}}function ejt(e,t,n,r){if(n==="x"&&r.xReverse!==void 0)return Au(e)&&t==="descending"?At(r.xReverse)?{signal:`!${r.xReverse.signal}`}:!r.xReverse:r.xReverse;if(Au(e)&&t==="descending")return!0}function tjt(e,t,n,r,i,o,s){if(!!n&&n!=="unaggregated"&&Au(i)){if(Le(n)){const u=n[0],l=n[n.length-1];if(jn(u)&&u<=0&&jn(l)&&l>=0)return!0}return!1}if(e==="size"&&t.type==="quantitative"&&!Kb(i))return!0;if(!(Qe(t)&&t.bin)&&Sn([...Jf,...J$t],e)){const{orient:u,type:l}=r;return Sn(["bar","area","line","trail"],l)&&(u==="horizontal"&&e==="y"||u==="vertical"&&e==="x")?!1:Sn(["bar","area"],l)&&!s?!0:o==null?void 0:o.zero}return!1}function njt(e,t,n,r,i=!1){const o=rjt(t,n,r,i),{type:s}=e;return Dh(t)?s!==void 0?nLt(t,s)?Qe(n)&&!tLt(s,n.type)?(Xe(rMt(s,o)),o):s:(Xe(nMt(t,s,o)),o):o:null}function rjt(e,t,n,r){var i;switch(t.type){case"nominal":case"ordinal":{if(q1(e)||C4(e)==="discrete")return e==="shape"&&t.type==="ordinal"&&Xe(A4(e,"ordinal")),"ordinal";if(xi(e)||fA(e)){if(Sn(["rect","bar","image","rule"],n.type)||r)return"band"}else if(n.type==="arc"&&e in aK)return"band";const o=n[Va(e)];return ly(o)||Qb(t)&&((i=t.axis)!=null&&i.tickBand)?"band":"point"}case"temporal":return q1(e)?"time":C4(e)==="discrete"?(Xe(A4(e,"temporal")),"ordinal"):Qe(t)&&t.timeUnit&&po(t.timeUnit).utc?"utc":"time";case"quantitative":return q1(e)?Qe(t)&&Cr(t.bin)?"bin-ordinal":"linear":C4(e)==="discrete"?(Xe(A4(e,"quantitative")),"ordinal"):"linear";case"geojson":return}throw new Error(T2e(t.type))}function ijt(e,{ignoreRange:t}={}){oRe(e),YIe(e);for(const n of eLt)nRe(e,n);t||rRe(e)}function oRe(e){ai(e)?e.component.scales=ojt(e):e.component.scales=ajt(e)}function ojt(e){const{encoding:t,mark:n,markDef:r}=e,i={};for(const o of b3){const s=zi(t[o]);if(s&&n===tke&&o===za&&s.type===uw)continue;let a=s&&s.scale;if(s&&a!==null&&a!==!1){a??(a={});const u=_ke(t,o),l=njt(a,o,s,r,u);i[o]=new XIe(e.scaleName(`${o}`,!0),{value:l,explicit:a.type===l})}}return i}const sjt=Qke((e,t)=>Fae(e)-Fae(t));function ajt(e){var t;const n=e.component.scales={},r={},i=e.component.resolve;for(const o of e.children){oRe(o);for(const s of We(o.component.scales))if((t=i.scale)[s]??(t[s]=$Ie(s,e)),i.scale[s]==="shared"){const a=r[s],u=o.component.scales[s].getWithExplicit("type");a?HMt(a.value,u.value)?r[s]=Cm(a,u,"type","scale",sjt):(i.scale[s]="independent",delete r[s]):r[s]=u}}for(const o of We(r)){const s=e.scaleName(o,!0),a=r[o];n[o]=new XIe(s,a);for(const u of e.children){const l=u.component.scales[o];l&&(u.renameScale(l.get("name"),s),l.merged=!0)}}return n}class M4{constructor(){this.nameMap={}}rename(t,n){this.nameMap[t]=n}has(t){return this.nameMap[t]!==void 0}get(t){for(;this.nameMap[t]&&t!==this.nameMap[t];)t=this.nameMap[t];return t}}function ai(e){return(e==null?void 0:e.type)==="unit"}function hu(e){return(e==null?void 0:e.type)==="facet"}function cX(e){return(e==null?void 0:e.type)==="concat"}function hw(e){return(e==null?void 0:e.type)==="layer"}class fX{constructor(t,n,r,i,o,s,a){this.type=n,this.parent=r,this.config=o,this.correctDataNames=u=>{var l,c,f;return(l=u.from)!=null&&l.data&&(u.from.data=this.lookupDataSource(u.from.data)),(f=(c=u.from)==null?void 0:c.facet)!=null&&f.data&&(u.from.facet.data=this.lookupDataSource(u.from.facet.data)),u},this.parent=r,this.config=o,this.view=ga(a),this.name=t.name??i,this.title=tp(t.title)?{text:t.title}:t.title?ga(t.title):void 0,this.scaleNameMap=r?r.scaleNameMap:new M4,this.projectionNameMap=r?r.projectionNameMap:new M4,this.signalNameMap=r?r.signalNameMap:new M4,this.data=t.data,this.description=t.description,this.transforms=p4t(t.transform??[]),this.layout=n==="layer"||n==="unit"?{}:v6t(t,n,o),this.component={data:{sources:r?r.component.data.sources:[],outputNodes:r?r.component.data.outputNodes:{},outputNodeRefCounts:r?r.component.data.outputNodeRefCounts:{},isFaceted:k3(t)||(r==null?void 0:r.component.data.isFaceted)&&t.data===void 0},layoutSize:new $h,layoutHeaders:{row:{},column:{},facet:{}},mark:null,resolve:{scale:{},axis:{},legend:{},...s?Vt(s):{}},selection:null,scales:null,projection:null,axes:{},legends:{}}}get width(){return this.getSizeSignalRef("width")}get height(){return this.getSizeSignalRef("height")}parse(){this.parseScale(),this.parseLayoutSize(),this.renameTopLevelLayoutSizeSignal(),this.parseSelections(),this.parseProjection(),this.parseData(),this.parseAxesAndHeaders(),this.parseLegends(),this.parseMarkGroup()}parseScale(){ijt(this)}parseProjection(){qIe(this)}renameTopLevelLayoutSizeSignal(){this.getName("width")!=="width"&&this.renameSignal(this.getName("width"),"width"),this.getName("height")!=="height"&&this.renameSignal(this.getName("height"),"height")}parseLegends(){BIe(this)}assembleEncodeFromView(t){const{style:n,...r}=t,i={};for(const o of We(r)){const s=r[o];s!==void 0&&(i[o]=Pr(s))}return i}assembleGroupEncodeEntry(t){let n={};return this.view&&(n=this.assembleEncodeFromView(this.view)),!t&&(this.description&&(n.description=Pr(this.description)),this.type==="unit"||this.type==="layer")?{width:this.getSizeSignalRef("width"),height:this.getSizeSignalRef("height"),...n}:ur(n)?void 0:n}assembleLayout(){if(!this.layout)return;const{spacing:t,...n}=this.layout,{component:r,config:i}=this,o=kFt(r.layoutHeaders,i);return{padding:t,...this.assembleDefaultLayout(),...n,...o?{titleBand:o}:{}}}assembleDefaultLayout(){return{}}assembleHeaderMarks(){const{layoutHeaders:t}=this.component;let n=[];for(const r of Zu)t[r].title&&n.push(EFt(this,r));for(const r of tX)n=n.concat(xFt(this,r));return n}assembleAxes(){return lFt(this.component.axes,this.config)}assembleLegends(){return zIe(this)}assembleProjections(){return QFt(this)}assembleTitle(){const{encoding:t,...n}=this.title??{},r={...m2e(this.config.title).nonMarkTitleProperties,...n,...t?{encode:{update:t}}:{}};if(r.text)return Sn(["unit","layer"],this.type)?Sn(["middle",void 0],r.anchor)&&(r.frame??(r.frame="group")):r.anchor??(r.anchor="start"),ur(r)?void 0:r}assembleGroup(t=[]){const n={};t=t.concat(this.assembleSignals()),t.length>0&&(n.signals=t);const r=this.assembleLayout();r&&(n.layout=r),n.marks=[].concat(this.assembleHeaderMarks(),this.assembleMarks());const i=!this.parent||hu(this.parent)?KIe(this):[];i.length>0&&(n.scales=i);const o=this.assembleAxes();o.length>0&&(n.axes=o);const s=this.assembleLegends();return s.length>0&&(n.legends=s),n}getName(t){return Vr((this.name?`${this.name}_`:"")+t)}getDataName(t){return this.getName(jr[t].toLowerCase())}requestDataName(t){const n=this.getDataName(t),r=this.component.data.outputNodeRefCounts;return r[n]=(r[n]||0)+1,n}getSizeSignalRef(t){if(hu(this.parent)){const n=DIe(t),r=v3(n),i=this.component.scales[r];if(i&&!i.merged){const o=i.get("type"),s=i.get("range");if(mo(o)&&ig(s)){const a=i.get("name"),u=H3(this,r),l=lX(u);if(l){const c=ot({aggregate:"distinct",field:l},{expr:"datum"});return{signal:PIe(a,i,c)}}else return Xe(cK(r)),null}}}return{signal:this.signalNameMap.get(this.getName(t))}}lookupDataSource(t){const n=this.component.data.outputNodes[t];return n?n.getSource():t}getSignalName(t){return this.signalNameMap.get(t)}renameSignal(t,n){this.signalNameMap.rename(t,n)}renameScale(t,n){this.scaleNameMap.rename(t,n)}renameProjection(t,n){this.projectionNameMap.rename(t,n)}scaleName(t,n){if(n)return this.getName(t);if(s2e(t)&&Dh(t)&&this.component.scales[t]||this.scaleNameMap.has(this.getName(t)))return this.scaleNameMap.get(this.getName(t))}projectionName(t){if(t)return this.getName("projection");if(this.component.projection&&!this.component.projection.merged||this.projectionNameMap.has(this.getName("projection")))return this.projectionNameMap.get(this.getName("projection"))}getScaleComponent(t){if(!this.component.scales)throw new Error("getScaleComponent cannot be called before parseScale(). Make sure you have called parseScale or use parseUnitModelWithScale().");const n=this.component.scales[t];return n&&!n.merged?n:this.parent?this.parent.getScaleComponent(t):void 0}getSelectionComponent(t,n){let r=this.component.selection[t];if(!r&&this.parent&&(r=this.parent.getSelectionComponent(t,n)),!r)throw new Error(w3t(n));return r}hasAxisOrientSignalRef(){var t,n;return((t=this.component.axes.x)==null?void 0:t.some(r=>r.hasOrientSignalRef()))||((n=this.component.axes.y)==null?void 0:n.some(r=>r.hasOrientSignalRef()))}}class sRe extends fX{vgField(t,n={}){const r=this.fieldDef(t);if(r)return ot(r,n)}reduceFieldDef(t,n){return GLt(this.getMapping(),(r,i,o)=>{const s=If(i);return s?t(r,s,o):r},n)}forEachFieldDef(t,n){LK(this.getMapping(),(r,i)=>{const o=If(r);o&&t(o,i)},n)}}class q3 extends sr{clone(){return new q3(null,Vt(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=Vt(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"value",r[1]??"density"];const i=this.transform.resolve??"shared";this.transform.resolve=i}dependentFields(){return new Set([this.transform.density,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`DensityTransform ${Tn(this.transform)}`}assemble(){const{density:t,...n}=this.transform,r={type:"kde",field:t,...n};return r.resolve=this.transform.resolve,r}}class W3 extends sr{clone(){return new W3(null,Vt(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=Vt(n)}dependentFields(){return new Set([this.transform.extent])}producedFields(){return new Set([])}hash(){return`ExtentTransform ${Tn(this.transform)}`}assemble(){const{extent:t,param:n}=this.transform;return{type:"extent",field:t,signal:n}}}class PS extends sr{clone(){return new PS(null,{...this.filter})}constructor(t,n){super(t),this.filter=n}static make(t,n){const{config:r,mark:i,markDef:o}=n;if(Kn("invalid",o,r)!=="filter")return null;const a=n.reduceFieldDef((u,l,c)=>{const f=Dh(c)&&n.getScaleComponent(c);if(f){const d=f.get("type");Au(d)&&l.aggregate!=="count"&&!Zy(i)&&(u[l.field]=l)}return u},{});return We(a).length?new PS(t,a):null}dependentFields(){return new Set(We(this.filter))}producedFields(){return new Set}hash(){return`FilterInvalid ${Tn(this.filter)}`}assemble(){const t=We(this.filter).reduce((n,r)=>{const i=this.filter[r],o=ot(i,{expr:"datum"});return i!==null&&(i.type==="temporal"?n.push(`(isDate(${o}) || (isValid(${o}) && isFinite(+${o})))`):i.type==="quantitative"&&(n.push(`isValid(${o})`),n.push(`isFinite(+${o})`))),n},[]);return t.length>0?{type:"filter",expr:t.join(" && ")}:null}}class G3 extends sr{clone(){return new G3(this.parent,Vt(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=Vt(n);const{flatten:r,as:i=[]}=this.transform;this.transform.as=r.map((o,s)=>i[s]??o)}dependentFields(){return new Set(this.transform.flatten)}producedFields(){return new Set(this.transform.as)}hash(){return`FlattenTransform ${Tn(this.transform)}`}assemble(){const{flatten:t,as:n}=this.transform;return{type:"flatten",fields:t,as:n}}}class Y3 extends sr{clone(){return new Y3(null,Vt(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=Vt(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"key",r[1]??"value"]}dependentFields(){return new Set(this.transform.fold)}producedFields(){return new Set(this.transform.as)}hash(){return`FoldTransform ${Tn(this.transform)}`}assemble(){const{fold:t,as:n}=this.transform;return{type:"fold",fields:t,as:n}}}class Y1 extends sr{clone(){return new Y1(null,Vt(this.fields),this.geojson,this.signal)}static parseAll(t,n){if(n.component.projection&&!n.component.projection.isFit)return t;let r=0;for(const i of[[Tc,xc],[hl,Sc]]){const o=i.map(s=>{const a=zi(n.encoding[s]);return Qe(a)?a.field:Zf(a)?{expr:`${a.datum}`}:hc(a)?{expr:`${a.value}`}:void 0});(o[0]||o[1])&&(t=new Y1(t,o,null,n.getName(`geojson_${r++}`)))}if(n.channelHasField(za)){const i=n.typedFieldDef(za);i.type===uw&&(t=new Y1(t,null,i.field,n.getName(`geojson_${r++}`)))}return t}constructor(t,n,r,i){super(t),this.fields=n,this.geojson=r,this.signal=i}dependentFields(){const t=(this.fields??[]).filter(ft);return new Set([...this.geojson?[this.geojson]:[],...t])}producedFields(){return new Set}hash(){return`GeoJSON ${this.geojson} ${this.signal} ${Tn(this.fields)}`}assemble(){return[...this.geojson?[{type:"filter",expr:`isValid(datum["${this.geojson}"])`}]:[],{type:"geojson",...this.fields?{fields:this.fields}:{},...this.geojson?{geojson:this.geojson}:{},signal:this.signal}]}}class DS extends sr{clone(){return new DS(null,this.projection,Vt(this.fields),Vt(this.as))}constructor(t,n,r,i){super(t),this.projection=n,this.fields=r,this.as=i}static parseAll(t,n){if(!n.projectionName())return t;for(const r of[[Tc,xc],[hl,Sc]]){const i=r.map(s=>{const a=zi(n.encoding[s]);return Qe(a)?a.field:Zf(a)?{expr:`${a.datum}`}:hc(a)?{expr:`${a.value}`}:void 0}),o=r[0]===hl?"2":"";(i[0]||i[1])&&(t=new DS(t,n.projectionName(),i,[n.getName(`x${o}`),n.getName(`y${o}`)]))}return t}dependentFields(){return new Set(this.fields.filter(ft))}producedFields(){return new Set(this.as)}hash(){return`Geopoint ${this.projection} ${Tn(this.fields)} ${Tn(this.as)}`}assemble(){return{type:"geopoint",projection:this.projection,fields:this.fields,as:this.as}}}class x0 extends sr{clone(){return new x0(null,Vt(this.transform))}constructor(t,n){super(t),this.transform=n}dependentFields(){return new Set([this.transform.impute,this.transform.key,...this.transform.groupby??[]])}producedFields(){return new Set([this.transform.impute])}processSequence(t){const{start:n=0,stop:r,step:i}=t;return{signal:`sequence(${[n,r,...i?[i]:[]].join(",")})`}}static makeFromTransform(t,n){return new x0(t,n)}static makeFromEncoding(t,n){const r=n.encoding,i=r.x,o=r.y;if(Qe(i)&&Qe(o)){const s=i.impute?i:o.impute?o:void 0;if(s===void 0)return;const a=i.impute?o:o.impute?i:void 0,{method:u,value:l,frame:c,keyvals:f}=s.impute,d=Eke(n.mark,r);return new x0(t,{impute:s.field,key:a.field,...u?{method:u}:{},...l!==void 0?{value:l}:{},...c?{frame:c}:{},...f!==void 0?{keyvals:f}:{},...d.length?{groupby:d}:{}})}return null}hash(){return`Impute ${Tn(this.transform)}`}assemble(){const{impute:t,key:n,keyvals:r,method:i,groupby:o,value:s,frame:a=[null,null]}=this.transform,u={type:"impute",field:t,key:n,...r?{keyvals:K6t(r)?this.processSequence(r):r}:{},method:"value",...o?{groupby:o}:{},value:!i||i==="value"?s:null};if(i&&i!=="value"){const l={type:"window",as:[`imputed_${t}_value`],ops:[i],fields:[t],frame:a,ignorePeers:!1,...o?{groupby:o}:{}},c={type:"formula",expr:`datum.${t} === null ? datum.imputed_${t}_value : datum.${t}`,as:t};return[u,l,c]}else return[u]}}class K3 extends sr{clone(){return new K3(null,Vt(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=Vt(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??n.on,r[1]??n.loess]}dependentFields(){return new Set([this.transform.loess,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`LoessTransform ${Tn(this.transform)}`}assemble(){const{loess:t,on:n,...r}=this.transform;return{type:"loess",x:n,y:t,...r}}}class OS extends sr{clone(){return new OS(null,Vt(this.transform),this.secondary)}constructor(t,n,r){super(t),this.transform=n,this.secondary=r}static make(t,n,r,i){const o=n.component.data.sources,{from:s}=r;let a=null;if(X6t(s)){let u=lRe(s.data,o);u||(u=new dy(s.data),o.push(u));const l=n.getName(`lookup_${i}`);a=new Ma(u,l,jr.Lookup,n.component.data.outputNodeRefCounts),n.component.data.outputNodes[l]=a}else if(Q6t(s)){const u=s.param;r={as:u,...r};let l;try{l=n.getSelectionComponent(Vr(u),u)}catch{throw new Error(S3t(u))}if(a=l.materialized,!a)throw new Error(C3t(u))}return new OS(t,r,a.getSource())}dependentFields(){return new Set([this.transform.lookup])}producedFields(){return new Set(this.transform.as?ct(this.transform.as):this.transform.from.fields)}hash(){return`Lookup ${Tn({transform:this.transform,secondary:this.secondary})}`}assemble(){let t;if(this.transform.from.fields)t={values:this.transform.from.fields,...this.transform.as?{as:ct(this.transform.as)}:{}};else{let n=this.transform.as;ft(n)||(Xe(O3t),n="_lookup"),t={as:[n]}}return{type:"lookup",from:this.secondary,key:this.transform.from.key,fields:[this.transform.lookup],...t,...this.transform.default?{default:this.transform.default}:{}}}}class X3 extends sr{clone(){return new X3(null,Vt(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=Vt(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"prob",r[1]??"value"]}dependentFields(){return new Set([this.transform.quantile,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`QuantileTransform ${Tn(this.transform)}`}assemble(){const{quantile:t,...n}=this.transform;return{type:"quantile",field:t,...n}}}class Q3 extends sr{clone(){return new Q3(null,Vt(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=Vt(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??n.on,r[1]??n.regression]}dependentFields(){return new Set([this.transform.regression,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`RegressionTransform ${Tn(this.transform)}`}assemble(){const{regression:t,on:n,...r}=this.transform;return{type:"regression",x:n,y:t,...r}}}class J3 extends sr{clone(){return new J3(null,Vt(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=Zc((this.transform.groupby??[]).concat(t),n=>n)}producedFields(){}dependentFields(){return new Set([this.transform.pivot,this.transform.value,...this.transform.groupby??[]])}hash(){return`PivotTransform ${Tn(this.transform)}`}assemble(){const{pivot:t,value:n,groupby:r,limit:i,op:o}=this.transform;return{type:"pivot",field:t,value:n,...i!==void 0?{limit:i}:{},...o!==void 0?{op:o}:{},...r!==void 0?{groupby:r}:{}}}}class Z3 extends sr{clone(){return new Z3(null,Vt(this.transform))}constructor(t,n){super(t),this.transform=n}dependentFields(){return new Set}producedFields(){return new Set}hash(){return`SampleTransform ${Tn(this.transform)}`}assemble(){return{type:"sample",size:this.transform.sample}}}function aRe(e){let t=0;function n(r,i){if(r instanceof dy&&!r.isGenerator&&!Zb(r.data)&&(e.push(i),i={name:null,source:i.name,transform:[]}),r instanceof hs&&(r.parent instanceof dy&&!i.source?(i.format={...i.format,parse:r.assembleFormatParse()},i.transform.push(...r.assembleTransforms(!0))):i.transform.push(...r.assembleTransforms())),r instanceof fw){i.name||(i.name=`data_${t++}`),!i.source||i.transform.length>0?(e.push(i),r.data=i.name):r.data=i.source,e.push(...r.assemble());return}switch((r instanceof _A||r instanceof wA||r instanceof PS||r instanceof cw||r instanceof t_||r instanceof DS||r instanceof oc||r instanceof OS||r instanceof dw||r instanceof nv||r instanceof Y3||r instanceof G3||r instanceof q3||r instanceof K3||r instanceof X3||r instanceof Q3||r instanceof Im||r instanceof Z3||r instanceof J3||r instanceof W3)&&i.transform.push(r.assemble()),(r instanceof yf||r instanceof gf||r instanceof x0||r instanceof Wd||r instanceof Y1)&&i.transform.push(...r.assemble()),r instanceof Ma&&(i.source&&i.transform.length===0?r.setSource(i.source):r.parent instanceof Ma?r.setSource(i.name):(i.name||(i.name=`data_${t++}`),r.setSource(i.name),r.numChildren()===1&&(e.push(i),i={name:null,source:i.name,transform:[]}))),r.numChildren()){case 0:r instanceof Ma&&(!i.source||i.transform.length>0)&&e.push(i);break;case 1:n(r.children[0],i);break;default:{i.name||(i.name=`data_${t++}`);let o=i.name;!i.source||i.transform.length>0?e.push(i):o=i.source;for(const s of r.children)n(s,{name:null,source:o,transform:[]});break}}}return n}function ujt(e){const t=[],n=aRe(t);for(const r of e.children)n(r,{source:e.name,name:null,transform:[]});return t}function ljt(e,t){const n=[],r=aRe(n);let i=0;for(const s of e.sources){s.hasName()||(s.dataName=`source_${i++}`);const a=s.assemble();r(s,a)}for(const s of n)s.transform.length===0&&delete s.transform;let o=0;for(const[s,a]of n.entries())(a.transform??[]).length===0&&!a.source&&n.splice(o++,0,n.splice(s,1)[0]);for(const s of n)for(const a of s.transform??[])a.type==="lookup"&&(a.from=e.outputNodes[a.from].getSource());for(const s of n)s.name in t&&(s.values=t[s.name]);return n}function cjt(e){return e==="top"||e==="left"||At(e)?"header":"footer"}function fjt(e){for(const t of Zu)djt(e,t);Due(e,"x"),Due(e,"y")}function djt(e,t){var s;const{facet:n,config:r,child:i,component:o}=e;if(e.channelHasField(t)){const a=n[t],u=r_("title",null,r,t);let l=W1(a,r,{allowDisabling:!0,includeDefault:u===void 0||!!u});i.component.layoutHeaders[t].title&&(l=Le(l)?l.join(", "):l,l+=` / ${i.component.layoutHeaders[t].title}`,i.component.layoutHeaders[t].title=null);const c=r_("labelOrient",a.header,r,t),f=a.header!==null?Ei((s=a.header)==null?void 0:s.labels,r.header.labels,!0):!1,d=Sn(["bottom","right"],c)?"footer":"header";o.layoutHeaders[t]={title:a.header!==null?l:null,facetFieldDef:a,[d]:t==="facet"?[]:[uRe(e,t,f)]}}}function uRe(e,t,n){const r=t==="row"?"height":"width";return{labels:n,sizeSignal:e.child.component.layoutSize.get(r)?e.child.getSizeSignalRef(r):void 0,axes:[]}}function Due(e,t){const{child:n}=e;if(n.component.axes[t]){const{layoutHeaders:r,resolve:i}=e.component;if(i.axis[t]=iX(i,t),i.axis[t]==="shared"){const o=t==="x"?"column":"row",s=r[o];for(const a of n.component.axes[t]){const u=cjt(a.get("orient"));s[u]??(s[u]=[uRe(e,o,!1)]);const l=ex(a,"main",e.config,{header:!0});l&&s[u][0].axes.push(l),a.mainExtracted=!0}}}}function hjt(e){dX(e),BP(e,"width"),BP(e,"height")}function pjt(e){dX(e);const t=e.layout.columns===1?"width":"childWidth",n=e.layout.columns===void 0?"height":"childHeight";BP(e,t),BP(e,n)}function dX(e){for(const t of e.children)t.parseLayoutSize()}function BP(e,t){const n=DIe(t),r=v3(n),i=e.component.resolve,o=e.component.layoutSize;let s;for(const a of e.children){const u=a.component.layoutSize.getWithExplicit(n),l=i.scale[r]??$Ie(r,e);if(l==="independent"&&u.value==="step"){s=void 0;break}if(s){if(l==="independent"&&s.value!==u.value){s=void 0;break}s=Cm(s,u,n,"")}else s=u}if(s){for(const a of e.children)e.renameSignal(a.getName(n),e.getName(t)),a.component.layoutSize.set(n,"merged",!1);o.setWithExplicit(t,s)}else o.setWithExplicit(t,{explicit:!1,value:void 0})}function mjt(e){const{size:t,component:n}=e;for(const r of Jf){const i=Va(r);if(t[i]){const o=t[i];n.layoutSize.set(i,Rf(o)?"step":o,!0)}else{const o=gjt(e,i);n.layoutSize.set(i,o,!1)}}}function gjt(e,t){const n=t==="width"?"x":"y",r=e.config,i=e.getScaleComponent(n);if(i){const o=i.get("type"),s=i.get("range");if(mo(o)){const a=MP(r.view,t);return ig(s)||Rf(a)?"step":a}else return z8(r.view,t)}else{if(e.hasProjection||e.mark==="arc")return z8(r.view,t);{const o=MP(r.view,t);return Rf(o)?o.step:o}}}function nB(e,t,n){return ot(t,{suffix:`by_${ot(e)}`,...n})}class eT extends sRe{constructor(t,n,r,i){super(t,"facet",n,r,i,t.resolve),this.child=yX(t.spec,this,this.getName("child"),void 0,i),this.children=[this.child],this.facet=this.initFacet(t.facet)}initFacet(t){if(!mA(t))return{facet:this.initFacetFieldDef(t,"facet")};const n=We(t),r={};for(const i of n){if(![Vd,Hd].includes(i)){Xe(w3(i,"facet"));break}const o=t[i];if(o.field===void 0){Xe(L8(o,i));break}r[i]=this.initFacetFieldDef(o,i)}return r}initFacetFieldDef(t,n){const r=$K(t,n);return r.header?r.header=ga(r.header):r.header===null&&(r.header=null),r}channelHasField(t){return!!this.facet[t]}fieldDef(t){return this.facet[t]}parseData(){this.component.data=eM(this),this.child.parseData()}parseLayoutSize(){dX(this)}parseSelections(){this.child.parseSelections(),this.component.selection=this.child.component.selection}parseMarkGroup(){this.child.parseMarkGroup()}parseAxesAndHeaders(){this.child.parseAxesAndHeaders(),fjt(this)}assembleSelectionTopLevelSignals(t){return this.child.assembleSelectionTopLevelSignals(t)}assembleSignals(){return this.child.assembleSignals(),[]}assembleSelectionData(t){return this.child.assembleSelectionData(t)}getHeaderLayoutMixins(){const t={};for(const n of Zu)for(const r of nX){const i=this.component.layoutHeaders[n],o=i[r],{facetFieldDef:s}=i;if(s){const a=r_("titleOrient",s.header,this.config,n);if(["right","bottom"].includes(a)){const u=z3(n,a);t.titleAnchor??(t.titleAnchor={}),t.titleAnchor[u]="end"}}if(o!=null&&o[0]){const a=n==="row"?"height":"width",u=r==="header"?"headerBand":"footerBand";n!=="facet"&&!this.child.component.layoutSize.get(a)&&(t[u]??(t[u]={}),t[u][n]=.5),i.title&&(t.offset??(t.offset={}),t.offset[n==="row"?"rowTitle":"columnTitle"]=10)}}return t}assembleDefaultLayout(){const{column:t,row:n}=this.facet,r=t?this.columnDistinctSignal():n?1:void 0;let i="all";return(!n&&this.component.resolve.scale.x==="independent"||!t&&this.component.resolve.scale.y==="independent")&&(i="none"),{...this.getHeaderLayoutMixins(),...r?{columns:r}:{},bounds:"full",align:i}}assembleLayoutSignals(){return this.child.assembleLayoutSignals()}columnDistinctSignal(){if(!(this.parent&&this.parent instanceof eT))return{signal:`length(data('${this.getName("column_domain")}'))`}}assembleGroupStyle(){}assembleGroup(t){return this.parent&&this.parent instanceof eT?{...this.channelHasField("column")?{encode:{update:{columns:{field:ot(this.facet.column,{prefix:"distinct"})}}}}:{},...super.assembleGroup(t)}:super.assembleGroup(t)}getCardinalityAggregateForChild(){const t=[],n=[],r=[];if(this.child instanceof eT){if(this.child.channelHasField("column")){const i=ot(this.child.facet.column);t.push(i),n.push("distinct"),r.push(`distinct_${i}`)}}else for(const i of Jf){const o=this.child.component.scales[i];if(o&&!o.merged){const s=o.get("type"),a=o.get("range");if(mo(s)&&ig(a)){const u=H3(this.child,i),l=lX(u);l?(t.push(l),n.push("distinct"),r.push(`distinct_${l}`)):Xe(cK(i))}}}return{fields:t,ops:n,as:r}}assembleFacet(){const{name:t,data:n}=this.component.data.facetRoot,{row:r,column:i}=this.facet,{fields:o,ops:s,as:a}=this.getCardinalityAggregateForChild(),u=[];for(const c of Zu){const f=this.facet[c];if(f){u.push(ot(f));const{bin:d,sort:h}=f;if(Cr(d)&&u.push(ot(f,{binSuffix:"end"})),mf(h)){const{field:p,op:m=A3}=h,g=nB(f,h);r&&i?(o.push(g),s.push("max"),a.push(g)):(o.push(p),s.push(m),a.push(g))}else if(Le(h)){const p=n_(f,c);o.push(p),s.push("max"),a.push(p)}}}const l=!!r&&!!i;return{name:t,data:n,groupby:u,...l||o.length>0?{aggregate:{...l?{cross:l}:{},...o.length?{fields:o,ops:s,as:a}:{}}}:{}}}facetSortFields(t){const{facet:n}=this,r=n[t];return r?mf(r.sort)?[nB(r,r.sort,{expr:"datum"})]:Le(r.sort)?[n_(r,t,{expr:"datum"})]:[ot(r,{expr:"datum"})]:[]}facetSortOrder(t){const{facet:n}=this,r=n[t];if(r){const{sort:i}=r;return[(mf(i)?i.order:!Le(i)&&i)||"ascending"]}return[]}assembleLabelTitle(){var i;const{facet:t,config:n}=this;if(t.facet)return X8(t.facet,"facet",n);const r={row:["top","bottom"],column:["left","right"]};for(const o of tX)if(t[o]){const s=r_("labelOrient",(i=t[o])==null?void 0:i.header,n,o);if(r[o].includes(s))return X8(t[o],o,n)}}assembleMarks(){const{child:t}=this,n=this.component.data.facetRoot,r=ujt(n),i=t.assembleGroupEncodeEntry(!1),o=this.assembleLabelTitle()||t.assembleTitle(),s=t.assembleGroupStyle();return[{name:this.getName("cell"),type:"group",...o?{title:o}:{},...s?{style:s}:{},from:{facet:this.assembleFacet()},sort:{field:Zu.map(u=>this.facetSortFields(u)).flat(),order:Zu.map(u=>this.facetSortOrder(u)).flat()},...r.length>0?{data:r}:{},...i?{encode:{update:i}}:{},...t.assembleGroup(A4t(this,[]))}]}getMapping(){return this.facet}}function yjt(e,t){const{row:n,column:r}=t;if(n&&r){let i=null;for(const o of[n,r])if(mf(o.sort)){const{field:s,op:a=A3}=o.sort;e=i=new nv(e,{joinaggregate:[{op:a,field:s,as:nB(o,o.sort,{forAs:!0})}],groupby:[ot(o)]})}return i}return null}function lRe(e,t){var n,r,i,o;for(const s of t){const a=s.data;if(e.name&&s.hasName()&&e.name!==s.dataName)continue;const u=(n=e.format)==null?void 0:n.mesh,l=(r=a.format)==null?void 0:r.feature;if(u&&l)continue;const c=(i=e.format)==null?void 0:i.feature;if((c||l)&&c!==l)continue;const f=(o=a.format)==null?void 0:o.mesh;if(!((u||f)&&u!==f)){if(NS(e)&&NS(a)){if(uu(e.values,a.values))return s}else if(Zb(e)&&Zb(a)){if(e.url===a.url)return s}else if(Jke(e)&&e.name===s.dataName)return s}}return null}function vjt(e,t){if(e.data||!e.parent){if(e.data===null){const r=new dy({values:[]});return t.push(r),r}const n=lRe(e.data,t);if(n)return Xp(e.data)||(n.data.format=YAe({},e.data.format,n.data.format)),!n.hasName()&&e.data.name&&(n.dataName=e.data.name),n;{const r=new dy(e.data);return t.push(r),r}}else return e.parent.component.data.facetRoot?e.parent.component.data.facetRoot:e.parent.component.data.main}function bjt(e,t,n){let r=0;for(const i of t.transforms){let o,s;if(a4t(i))s=e=new t_(e,i),o="derived";else if(YK(i)){const a=c5t(i);s=e=hs.makeWithAncestors(e,{},a,n)??e,e=new cw(e,t,i.filter)}else if(Gke(i))s=e=yf.makeFromTransform(e,i,t),o="number";else if(l4t(i))o="date",n.getWithExplicit(i.field).value===void 0&&(e=new hs(e,{[i.field]:o}),n.set(i.field,o,!1)),s=e=gf.makeFromTransform(e,i);else if(c4t(i))s=e=oc.makeFromTransform(e,i),o="number",eX(t)&&(e=new Im(e));else if(Wke(i))s=e=OS.make(e,t,i,r++),o="derived";else if(i4t(i))s=e=new dw(e,i),o="number";else if(o4t(i))s=e=new nv(e,i),o="number";else if(f4t(i))s=e=Wd.makeFromTransform(e,i),o="derived";else if(d4t(i))s=e=new Y3(e,i),o="derived";else if(h4t(i))s=e=new W3(e,i),o="derived";else if(s4t(i))s=e=new G3(e,i),o="derived";else if(J6t(i))s=e=new J3(e,i),o="derived";else if(r4t(i))e=new Z3(e,i);else if(u4t(i))s=e=x0.makeFromTransform(e,i),o="derived";else if(Z6t(i))s=e=new q3(e,i),o="derived";else if(e4t(i))s=e=new X3(e,i),o="derived";else if(t4t(i))s=e=new Q3(e,i),o="derived";else if(n4t(i))s=e=new K3(e,i),o="derived";else{Xe(D3t(i));continue}if(s&&o!==void 0)for(const a of s.producedFields()??[])n.set(a,o,!1)}return e}function eM(e){var h;let t=vjt(e,e.component.data.sources);const{outputNodes:n,outputNodeRefCounts:r}=e.component.data,i=e.data,s=!(i&&(Xp(i)||Zb(i)||NS(i)))&&e.parent?e.parent.component.data.ancestorParse.clone():new S4t;Xp(i)?(Zke(i)?t=new wA(t,i.sequence):KK(i)&&(t=new _A(t,i.graticule)),s.parseNothing=!0):((h=i==null?void 0:i.format)==null?void 0:h.parse)===null&&(s.parseNothing=!0),t=hs.makeExplicit(t,e,s)??t,t=new Im(t);const a=e.parent&&hw(e.parent);(ai(e)||hu(e))&&a&&(t=yf.makeFromEncoding(t,e)??t),e.transforms.length>0&&(t=bjt(t,e,s));const u=d5t(e),l=f5t(e);t=hs.makeWithAncestors(t,{},{...u,...l},s)??t,ai(e)&&(t=Y1.parseAll(t,e),t=DS.parseAll(t,e)),(ai(e)||hu(e))&&(a||(t=yf.makeFromEncoding(t,e)??t),t=gf.makeFromEncoding(t,e)??t,t=t_.parseAllForSortIndex(t,e));const c=t=Oue(jr.Raw,e,t);if(ai(e)){const p=oc.makeFromEncoding(t,e);p&&(t=p,eX(e)&&(t=new Im(t))),t=x0.makeFromEncoding(t,e)??t,t=Wd.makeFromEncoding(t,e)??t}ai(e)&&(t=PS.make(t,e)??t);const f=t=Oue(jr.Main,e,t);ai(e)&&aFt(e,f);let d=null;if(hu(e)){const p=e.getName("facet");t=yjt(t,e.facet)??t,d=new fw(t,e,p,f.getSource()),n[p]=d}return{...e.component.data,outputNodes:n,outputNodeRefCounts:r,raw:c,main:f,facetRoot:d,ancestorParse:s}}function Oue(e,t,n){const{outputNodes:r,outputNodeRefCounts:i}=t.component.data,o=t.getDataName(e),s=new Ma(n,o,e,i);return r[o]=s,s}class _jt extends fX{constructor(t,n,r,i){var o,s,a,u;super(t,"concat",n,r,i,t.resolve),(((s=(o=t.resolve)==null?void 0:o.axis)==null?void 0:s.x)==="shared"||((u=(a=t.resolve)==null?void 0:a.axis)==null?void 0:u.y)==="shared")&&Xe(R3t),this.children=this.getChildren(t).map((l,c)=>yX(l,this,this.getName(`concat_${c}`),void 0,i))}parseData(){this.component.data=eM(this);for(const t of this.children)t.parseData()}parseSelections(){this.component.selection={};for(const t of this.children){t.parseSelections();for(const n of We(t.component.selection))this.component.selection[n]=t.component.selection[n]}}parseMarkGroup(){for(const t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){for(const t of this.children)t.parseAxesAndHeaders()}getChildren(t){return $3(t)?t.vconcat:WK(t)?t.hconcat:t.concat}parseLayoutSize(){pjt(this)}parseAxisGroup(){return null}assembleSelectionTopLevelSignals(t){return this.children.reduce((n,r)=>r.assembleSelectionTopLevelSignals(n),t)}assembleSignals(){return this.children.forEach(t=>t.assembleSignals()),[]}assembleLayoutSignals(){const t=rX(this);for(const n of this.children)t.push(...n.assembleLayoutSignals());return t}assembleSelectionData(t){return this.children.reduce((n,r)=>r.assembleSelectionData(n),t)}assembleMarks(){return this.children.map(t=>{const n=t.assembleTitle(),r=t.assembleGroupStyle(),i=t.assembleGroupEncodeEntry(!1);return{type:"group",name:t.getName("group"),...n?{title:n}:{},...r?{style:r}:{},...i?{encode:{update:i}}:{},...t.assembleGroup()}})}assembleGroupStyle(){}assembleDefaultLayout(){const t=this.layout.columns;return{...t!=null?{columns:t}:{},bounds:"full",align:"each"}}}function wjt(e){return e===!1||e===null}const Ejt={disable:1,gridScale:1,scale:1,...yke,labelExpr:1,encode:1},cRe=We(Ejt);class hX extends $h{constructor(t={},n={},r=!1){super(),this.explicit=t,this.implicit=n,this.mainExtracted=r}clone(){return new hX(Vt(this.explicit),Vt(this.implicit),this.mainExtracted)}hasAxisPart(t){return t==="axis"?!0:t==="grid"||t==="title"?!!this.get(t):!wjt(this.get(t))}hasOrientSignalRef(){return At(this.explicit.orient)}}function xjt(e,t,n){const{encoding:r,config:i}=e,o=zi(r[t])??zi(r[Qf(t)]),s=e.axis(t)||{},{format:a,formatType:u}=s;if(uy(u))return{text:Ql({fieldOrDatumDef:o,field:"datum.value",format:a,formatType:u,config:i}),...n};if(a===void 0&&u===void 0&&i.customFormatTypes){if(Xb(o)==="quantitative"){if(Qb(o)&&o.stack==="normalize"&&i.normalizedNumberFormatType)return{text:Ql({fieldOrDatumDef:o,field:"datum.value",format:i.normalizedNumberFormat,formatType:i.normalizedNumberFormatType,config:i}),...n};if(i.numberFormatType)return{text:Ql({fieldOrDatumDef:o,field:"datum.value",format:i.numberFormat,formatType:i.numberFormatType,config:i}),...n}}if(Xb(o)==="temporal"&&i.timeFormatType&&Qe(o)&&!o.timeUnit)return{text:Ql({fieldOrDatumDef:o,field:"datum.value",format:i.timeFormat,formatType:i.timeFormatType,config:i}),...n}}return n}function Tjt(e){return Jf.reduce((t,n)=>(e.component.scales[n]&&(t[n]=[Njt(n,e)]),t),{})}const Sjt={bottom:"top",top:"bottom",left:"right",right:"left"};function Cjt(e){const{axes:t,resolve:n}=e.component,r={top:0,bottom:0,right:0,left:0};for(const i of e.children){i.parseAxesAndHeaders();for(const o of We(i.component.axes))n.axis[o]=iX(e.component.resolve,o),n.axis[o]==="shared"&&(t[o]=Ajt(t[o],i.component.axes[o]),t[o]||(n.axis[o]="independent",delete t[o]))}for(const i of Jf){for(const o of e.children)if(o.component.axes[i]){if(n.axis[i]==="independent"){t[i]=(t[i]??[]).concat(o.component.axes[i]);for(const s of o.component.axes[i]){const{value:a,explicit:u}=s.getWithExplicit("orient");if(!At(a)){if(r[a]>0&&!u){const l=Sjt[a];r[a]>r[l]&&s.set("orient",l,!1)}r[a]++}}}delete o.component.axes[i]}if(n.axis[i]==="independent"&&t[i]&&t[i].length>1)for(const[o,s]of(t[i]||[]).entries())o>0&&s.get("grid")&&!s.explicit.grid&&(s.implicit.grid=!1)}}function Ajt(e,t){if(e){if(e.length!==t.length)return;const n=e.length;for(let r=0;r<n;r++){const i=e[r],o=t[r];if(!!i!=!!o)return;if(i&&o){const s=i.getWithExplicit("orient"),a=o.getWithExplicit("orient");if(s.explicit&&a.explicit&&s.value!==a.value)return;e[r]=kjt(i,o)}}}else return t.map(n=>n.clone());return e}function kjt(e,t){for(const n of cRe){const r=Cm(e.getWithExplicit(n),t.getWithExplicit(n),n,"axis",(i,o)=>{switch(n){case"title":return E2e(i,o);case"gridScale":return{explicit:i.explicit,value:Ei(i.value,o.value)}}return L3(i,o,n,"axis")});e.setWithExplicit(n,r)}return e}function Ijt(e,t,n,r,i){if(t==="disable")return n!==void 0;switch(n=n||{},t){case"titleAngle":case"labelAngle":return e===(At(n.labelAngle)?n.labelAngle:IS(n.labelAngle));case"values":return!!n.values;case"encode":return!!n.encoding||!!n.labelAngle;case"title":if(e===kIe(r,i))return!0}return e===n[t]}const Rjt=new Set(["grid","translate","format","formatType","orient","labelExpr","tickCount","position","tickMinStep"]);function Njt(e,t){var y,v;let n=t.axis(e);const r=new hX,i=zi(t.encoding[e]),{mark:o,config:s}=t,a=(n==null?void 0:n.orient)||((y=s[e==="x"?"axisX":"axisY"])==null?void 0:y.orient)||((v=s.axis)==null?void 0:v.orient)||yFt(e),u=t.getScaleComponent(e).get("type"),l=cFt(e,u,a,t.config),c=n!==void 0?!n:Y8("disable",s.style,n==null?void 0:n.style,l).configValue;if(r.set("disable",c,n!==void 0),c)return r;n=n||{};const f=pFt(i,n,e,s.style,l),d=Q2e(n.formatType,i,u),h=X2e(i,i.type,n.format,n.formatType,s,!0),p={fieldOrDatumDef:i,axis:n,channel:e,model:t,scaleType:u,orient:a,labelAngle:f,format:h,formatType:d,mark:o,config:s};for(const _ of cRe){const w=_ in vue?vue[_](p):qae(_)?n[_]:void 0,E=w!==void 0,S=Ijt(w,_,n,t,e);if(E&&S)r.set(_,w,S);else{const{configValue:T=void 0,configFrom:C=void 0}=qae(_)&&_!=="values"?Y8(_,s.style,n.style,l):{},A=T!==void 0;E&&!A?r.set(_,w,S):(C!=="vgAxisConfig"||Rjt.has(_)&&A||vA(T)||At(T))&&r.set(_,T,!1)}}const m=n.encoding??{},g=gke.reduce((_,w)=>{if(!r.hasAxisPart(w))return _;const E=OIe(m[w]??{},t),S=w==="labels"?xjt(t,e,E):E;return S!==void 0&&!ur(S)&&(_[w]={update:S}),_},{});return ur(g)||r.set("encode",g,!!n.encoding||n.labelAngle!==void 0),r}function Pjt({encoding:e,size:t}){for(const n of Jf){const r=Va(n);Rf(t[r])&&Cp(e[n])&&(delete t[r],Xe(A2e(r)))}return t}const Djt={vgMark:"arc",encodeEntry:e=>({...El(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...ds("x",e,{defaultPos:"mid"}),...ds("y",e,{defaultPos:"mid"}),...Am(e,"radius"),...Am(e,"theta")})},Ojt={vgMark:"area",encodeEntry:e=>({...El(e,{align:"ignore",baseline:"ignore",color:"include",orient:"include",size:"ignore",theta:"ignore"}),...LP("x",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="horizontal"}),...LP("y",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="vertical"}),...ZK(e)})},$jt={vgMark:"rect",encodeEntry:e=>({...El(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...Am(e,"x"),...Am(e,"y")})},Mjt={vgMark:"shape",encodeEntry:e=>({...El(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"})}),postEncodingTransform:e=>{const{encoding:t}=e,n=t.shape;return[{type:"geoshape",projection:e.projectionName(),...n&&Qe(n)&&n.type===uw?{field:ot(n,{expr:"datum"})}:{}}]}},Ljt={vgMark:"image",encodeEntry:e=>({...El(e,{align:"ignore",baseline:"ignore",color:"ignore",orient:"ignore",size:"ignore",theta:"ignore"}),...Am(e,"x"),...Am(e,"y"),...QK(e,"url")})},Fjt={vgMark:"line",encodeEntry:e=>({...El(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...ds("x",e,{defaultPos:"mid"}),...ds("y",e,{defaultPos:"mid"}),...oo("size",e,{vgChannel:"strokeWidth"}),...ZK(e)})},jjt={vgMark:"trail",encodeEntry:e=>({...El(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...ds("x",e,{defaultPos:"mid"}),...ds("y",e,{defaultPos:"mid"}),...oo("size",e),...ZK(e)})};function pX(e,t){const{config:n}=e;return{...El(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...ds("x",e,{defaultPos:"mid"}),...ds("y",e,{defaultPos:"mid"}),...oo("size",e),...oo("angle",e),...Bjt(e,n,t)}}function Bjt(e,t,n){return n?{shape:{value:n}}:oo("shape",e)}const Ujt={vgMark:"symbol",encodeEntry:e=>pX(e)},zjt={vgMark:"symbol",encodeEntry:e=>pX(e,"circle")},Vjt={vgMark:"symbol",encodeEntry:e=>pX(e,"square")},Hjt={vgMark:"rect",encodeEntry:e=>({...El(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...Am(e,"x"),...Am(e,"y")})},qjt={vgMark:"rule",encodeEntry:e=>{const{markDef:t}=e,n=t.orient;return!e.encoding.x&&!e.encoding.y&&!e.encoding.latitude&&!e.encoding.longitude?{}:{...El(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...LP("x",e,{defaultPos:n==="horizontal"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="vertical"}),...LP("y",e,{defaultPos:n==="vertical"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="horizontal"}),...oo("size",e,{vgChannel:"strokeWidth"})}}},Wjt={vgMark:"text",encodeEntry:e=>{const{config:t,encoding:n}=e;return{...El(e,{align:"include",baseline:"include",color:"include",size:"ignore",orient:"ignore",theta:"include"}),...ds("x",e,{defaultPos:"mid"}),...ds("y",e,{defaultPos:"mid"}),...QK(e),...oo("size",e,{vgChannel:"fontSize"}),...oo("angle",e),...pue("align",Gjt(e.markDef,n,t)),...pue("baseline",Yjt(e.markDef,n,t)),...ds("radius",e,{defaultPos:null}),...ds("theta",e,{defaultPos:null})}}};function Gjt(e,t,n){if(Kn("align",e,n)===void 0)return"center"}function Yjt(e,t,n){if(Kn("baseline",e,n)===void 0)return"middle"}const Kjt={vgMark:"rect",encodeEntry:e=>{const{config:t,markDef:n}=e,r=n.orient,i=r==="horizontal"?"width":"height",o=r==="horizontal"?"height":"width";return{...El(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...ds("x",e,{defaultPos:"mid",vgChannel:"xc"}),...ds("y",e,{defaultPos:"mid",vgChannel:"yc"}),...oo("size",e,{defaultValue:Xjt(e),vgChannel:i}),[o]:Pr(Kn("thickness",n,t))}}};function Xjt(e){const{config:t,markDef:n}=e,{orient:r}=n,i=r==="horizontal"?"width":"height",o=e.getScaleComponent(r==="horizontal"?"x":"y"),s=Kn("size",n,t,{vgChannel:i})??t.tick.bandSize;if(s!==void 0)return s;{const a=o?o.get("range"):void 0;return a&&ig(a)&&jn(a.step)?a.step*3/4:$P(t.view,i)*3/4}}const lk={arc:Djt,area:Ojt,bar:$jt,circle:zjt,geoshape:Mjt,image:Ljt,line:Fjt,point:Ujt,rect:Hjt,rule:qjt,square:Vjt,text:Wjt,tick:Kjt,trail:jjt};function Qjt(e){if(Sn([S3,x3,dLt],e.mark)){const t=Eke(e.mark,e.encoding);if(t.length>0)return Jjt(e,t)}else if(e.mark===T3){const t=M8.some(n=>Kn(n,e.markDef,e.config));if(e.stack&&!e.fieldDef("size")&&t)return Zjt(e)}return mX(e)}const $ue="faceted_path_";function Jjt(e,t){return[{name:e.getName("pathgroup"),type:"group",from:{facet:{name:$ue+e.requestDataName(jr.Main),data:e.requestDataName(jr.Main),groupby:t}},encode:{update:{width:{field:{group:"width"}},height:{field:{group:"height"}}}},marks:mX(e,{fromPrefix:$ue})}]}const Mue="stack_group_";function Zjt(e){var l;const[t]=mX(e,{fromPrefix:Mue}),n=e.scaleName(e.stack.fieldChannel),r=(c={})=>e.vgField(e.stack.fieldChannel,c),i=(c,f)=>{const d=[r({prefix:"min",suffix:"start",expr:f}),r({prefix:"max",suffix:"start",expr:f}),r({prefix:"min",suffix:"end",expr:f}),r({prefix:"max",suffix:"end",expr:f})];return`${c}(${d.map(h=>`scale('${n}',${h})`).join(",")})`};let o,s;e.stack.fieldChannel==="x"?(o={...Hb(t.encode.update,["y","yc","y2","height",...M8]),x:{signal:i("min","datum")},x2:{signal:i("max","datum")},clip:{value:!0}},s={x:{field:{group:"x"},mult:-1},height:{field:{group:"height"}}},t.encode.update={...Oa(t.encode.update,["y","yc","y2"]),height:{field:{group:"height"}}}):(o={...Hb(t.encode.update,["x","xc","x2","width"]),y:{signal:i("min","datum")},y2:{signal:i("max","datum")},clip:{value:!0}},s={y:{field:{group:"y"},mult:-1},width:{field:{group:"width"}}},t.encode.update={...Oa(t.encode.update,["x","xc","x2"]),width:{field:{group:"width"}}});for(const c of M8){const f=ph(c,e.markDef,e.config);t.encode.update[c]?(o[c]=t.encode.update[c],delete t.encode.update[c]):f&&(o[c]=Pr(f)),f&&(t.encode.update[c]={value:0})}const a=[];if(((l=e.stack.groupbyChannels)==null?void 0:l.length)>0)for(const c of e.stack.groupbyChannels){const f=e.fieldDef(c),d=ot(f);d&&a.push(d),(f!=null&&f.bin||f!=null&&f.timeUnit)&&a.push(ot(f,{binSuffix:"end"}))}return o=["stroke","strokeWidth","strokeJoin","strokeCap","strokeDash","strokeDashOffset","strokeMiterLimit","strokeOpacity"].reduce((c,f)=>{if(t.encode.update[f])return{...c,[f]:t.encode.update[f]};{const d=ph(f,e.markDef,e.config);return d!==void 0?{...c,[f]:Pr(d)}:c}},o),o.stroke&&(o.strokeForeground={value:!0},o.strokeOffset={value:0}),[{type:"group",from:{facet:{data:e.requestDataName(jr.Main),name:Mue+e.requestDataName(jr.Main),groupby:a,aggregate:{fields:[r({suffix:"start"}),r({suffix:"start"}),r({suffix:"end"}),r({suffix:"end"})],ops:["min","max","min","max"]}}},encode:{update:o},marks:[{type:"group",encode:{update:s},marks:[t]}]}]}function e9t(e){var a;const{encoding:t,stack:n,mark:r,markDef:i,config:o}=e,s=t.order;if(!(!Le(s)&&hc(s)&&O8(s.value)||!s&&O8(Kn("order",i,o)))){if((Le(s)||Qe(s))&&!n)return b2e(s,{expr:"datum"});if(Zy(r)){const u=i.orient==="horizontal"?"y":"x",l=t[u];if(Qe(l)){const c=l.sort;if(Le(c))return{field:ot(l,{prefix:u,suffix:"sort_index",expr:"datum"})};if(mf(c))return{field:ot({aggregate:MK(e.encoding)?c.op:void 0,field:c.field},{expr:"datum"})};if(ike(c)){const f=e.fieldDef(c.encoding);return{field:ot(f,{expr:"datum"}),order:c.order}}else return c===null?void 0:{field:ot(l,{binSuffix:(a=e.stack)!=null&&a.impute?"mid":void 0,expr:"datum"})}}return}}}function mX(e,t={fromPrefix:""}){const{mark:n,markDef:r,encoding:i,config:o}=e,s=Ei(r.clip,t9t(e),n9t(e)),a=y2e(r),u=i.key,l=e9t(e),c=r9t(e),f=Kn("aria",r,o),d=lk[n].postEncodingTransform?lk[n].postEncodingTransform(e):null;return[{name:e.getName("marks"),type:lk[n].vgMark,...s?{clip:s}:{},...a?{style:a}:{},...u?{key:u.field}:{},...l?{sort:l}:{},...c||{},...f===!1?{aria:f}:{},from:{data:t.fromPrefix+e.requestDataName(jr.Main)},encode:{update:lk[n].encodeEntry(e)},...d?{transform:d}:{}}]}function t9t(e){const t=e.getScaleComponent("x"),n=e.getScaleComponent("y");return t!=null&&t.get("selectionExtent")||n!=null&&n.get("selectionExtent")?!0:void 0}function n9t(e){const t=e.component.projection;return t&&!t.isFit?!0:void 0}function r9t(e){if(!e.component.selection)return null;const t=We(e.component.selection).length;let n=t,r=e.parent;for(;r&&n===0;)n=We(r.component.selection).length,r=r.parent;return n?{interactive:t>0||e.mark==="geoshape"||!!e.encoding.tooltip||!!e.markDef.tooltip}:null}class fRe extends sRe{constructor(t,n,r,i={},o){super(t,"unit",n,r,o,void 0,Gae(t)?t.view:void 0),this.specifiedScales={},this.specifiedAxes={},this.specifiedLegends={},this.specifiedProjection={},this.selection=[],this.children=[];const s=kf(t.mark)?{...t.mark}:{type:t.mark},a=s.type;s.filled===void 0&&(s.filled=U6t(s,o,{graticule:t.data&&KK(t.data)}));const u=this.encoding=qLt(t.encoding||{},a,s.filled,o);this.markDef=Vke(s,u,o),this.size=Pjt({encoding:u,size:Gae(t)?{...i,...t.width?{width:t.width}:{},...t.height?{height:t.height}:{}}:i}),this.stack=zke(this.markDef,u),this.specifiedScales=this.initScales(a,u),this.specifiedAxes=this.initAxes(u),this.specifiedLegends=this.initLegends(u),this.specifiedProjection=t.projection,this.selection=(t.params??[]).filter(l=>HK(l))}get hasProjection(){const{encoding:t}=this,n=this.mark===tke,r=t&&V$t.some(i=>Yt(t[i]));return n||r}scaleDomain(t){const n=this.specifiedScales[t];return n?n.domain:void 0}axis(t){return this.specifiedAxes[t]}legend(t){return this.specifiedLegends[t]}initScales(t,n){return b3.reduce((r,i)=>{const o=zi(n[i]);return o&&(r[i]=this.initScale(o.scale??{})),r},{})}initScale(t){const{domain:n,range:r}=t,i=ga(t);return Le(n)&&(i.domain=n.map(eu)),Le(r)&&(i.range=r.map(eu)),i}initAxes(t){return Jf.reduce((n,r)=>{const i=t[r];if(Yt(i)||r===Hr&&Yt(t.x2)||r===vo&&Yt(t.y2)){const o=Yt(i)?i.axis:void 0;n[r]=o&&this.initAxis({...o})}return n},{})}initAxis(t){const n=We(t),r={};for(const i of n){const o=t[i];r[i]=vA(o)?g2e(o):eu(o)}return r}initLegends(t){return Z$t.reduce((n,r)=>{const i=zi(t[r]);if(i&&t3t(r)){const o=i.legend;n[r]=o&&ga(o)}return n},{})}parseData(){this.component.data=eM(this)}parseLayoutSize(){mjt(this)}parseSelections(){this.component.selection=sFt(this,this.selection)}parseMarkGroup(){this.component.mark=Qjt(this)}parseAxesAndHeaders(){this.component.axes=Tjt(this)}assembleSelectionTopLevelSignals(t){return k4t(this,t)}assembleSignals(){return[...SIe(this),...C4t(this,[])]}assembleSelectionData(t){return I4t(this,t)}assembleLayout(){return null}assembleLayoutSignals(){return rX(this)}assembleMarks(){let t=this.component.mark??[];return(!this.parent||!hw(this.parent))&&(t=nIe(this,t)),t.map(this.correctDataNames)}assembleGroupStyle(){const{style:t}=this.view||{};return t!==void 0?t:this.encoding.x||this.encoding.y?"cell":"view"}getMapping(){return this.encoding}get mark(){return this.markDef.type}channelHasField(t){return w0(this.encoding,t)}fieldDef(t){const n=this.encoding[t];return If(n)}typedFieldDef(t){const n=this.fieldDef(t);return Ks(n)?n:null}}class gX extends fX{constructor(t,n,r,i,o){super(t,"layer",n,r,o,t.resolve,t.view);const s={...i,...t.width?{width:t.width}:{},...t.height?{height:t.height}:{}};this.children=t.layer.map((a,u)=>{if(M3(a))return new gX(a,this,this.getName(`layer_${u}`),s,o);if(Oh(a))return new fRe(a,this,this.getName(`layer_${u}`),s,o);throw new Error(lK(a))})}parseData(){this.component.data=eM(this);for(const t of this.children)t.parseData()}parseLayoutSize(){hjt(this)}parseSelections(){this.component.selection={};for(const t of this.children){t.parseSelections();for(const n of We(t.component.selection))this.component.selection[n]=t.component.selection[n]}}parseMarkGroup(){for(const t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){Cjt(this)}assembleSelectionTopLevelSignals(t){return this.children.reduce((n,r)=>r.assembleSelectionTopLevelSignals(n),t)}assembleSignals(){return this.children.reduce((t,n)=>t.concat(n.assembleSignals()),SIe(this))}assembleLayoutSignals(){return this.children.reduce((t,n)=>t.concat(n.assembleLayoutSignals()),rX(this))}assembleSelectionData(t){return this.children.reduce((n,r)=>r.assembleSelectionData(n),t)}assembleGroupStyle(){const t=new Set;for(const r of this.children)for(const i of ct(r.assembleGroupStyle()))t.add(i);const n=Array.from(t);return n.length>1?n:n.length===1?n[0]:void 0}assembleTitle(){let t=super.assembleTitle();if(t)return t;for(const n of this.children)if(t=n.assembleTitle(),t)return t}assembleLayout(){return null}assembleMarks(){return R4t(this,this.children.flatMap(t=>t.assembleMarks()))}assembleLegends(){return this.children.reduce((t,n)=>t.concat(n.assembleLegends()),zIe(this))}}function yX(e,t,n,r,i){if(k3(e))return new eT(e,t,n,i);if(M3(e))return new gX(e,t,n,r,i);if(Oh(e))return new fRe(e,t,n,r,i);if(m6t(e))return new _jt(e,t,n,i);throw new Error(lK(e))}function i9t(e,t={}){t.logger&&_Mt(t.logger),t.fieldTitle&&hke(t.fieldTitle);try{const n=Uke(K_(t.config,e.config)),r=Xke(e,n),i=yX(r,null,"",void 0,n);return i.parse(),k5t(i.component.data,i),{spec:s9t(i,o9t(e,r.autosize,n,i),e.datasets,e.usermeta),normalized:r}}finally{t.logger&&wMt(),t.fieldTitle&&MLt()}}function o9t(e,t,n,r){const i=r.component.layoutSize.get("width"),o=r.component.layoutSize.get("height");if(t===void 0?(t={type:"pad"},r.hasAxisOrientSignalRef()&&(t.resize=!0)):ft(t)&&(t={type:t}),i&&o&&E4t(t.type)){if(i==="step"&&o==="step")Xe(Nae()),t.type="pad";else if(i==="step"||o==="step"){const s=i==="step"?"width":"height";Xe(Nae(v3(s)));const a=s==="width"?"height":"width";t.type=x4t(a)}}return{...We(t).length===1&&t.type?t.type==="pad"?{}:{autosize:t.type}:{autosize:t},...oue(n,!1),...oue(e,!0)}}function s9t(e,t,n={},r){const i=e.config?I6t(e.config):void 0,o=[].concat(e.assembleSelectionData([]),ljt(e.component.data,n)),s=e.assembleProjections(),a=e.assembleTitle(),u=e.assembleGroupStyle(),l=e.assembleGroupEncodeEntry(!0);let c=e.assembleLayoutSignals();c=c.filter(h=>(h.name==="width"||h.name==="height")&&h.value!==void 0?(t[h.name]=+h.value,!1):!0);const{params:f,...d}=t;return{$schema:"https://vega.github.io/schema/vega/v5.json",...e.description?{description:e.description}:{},...d,...a?{title:a}:{},...u?{style:u}:{},...l?{encode:{update:l}}:{},data:o,...s.length>0?{projections:s}:{},...e.assembleGroup([...c,...e.assembleSelectionTopLevelSignals([]),...Lke(f)]),...i?{config:i}:{},...r?{usermeta:r}:{}}}const a9t=L$t.version,u9t=Object.freeze(Object.defineProperty({__proto__:null,accessPathDepth:qb,accessPathWithDatum:eK,compile:i9t,contains:Sn,deepEqual:uu,deleteNestedProperty:SP,duplicate:Vt,entries:xm,every:QY,fieldIntersection:ZY,flatAccessWithDatum:XAe,getFirstDefined:Ei,hasIntersection:JY,hash:Tn,internalField:ZAe,isBoolean:kS,isEmpty:ur,isEqual:j$t,isInternalField:e2e,isNullOrFalse:O8,isNumeric:d3,keys:We,logicalExpr:Jx,mergeDeep:YAe,never:GAe,normalize:Xke,normalizeAngle:IS,omit:Oa,pick:Hb,prefixGenerator:$8,removePathFromField:sw,replaceAll:iy,replacePathInField:dl,resetIdCounter:U$t,setEqual:KAe,some:ry,stringify:lr,titleCase:uA,unique:Zc,uniqueId:JAe,vals:jo,varName:Vr,version:a9t},Symbol.toStringTag,{value:"Module"}));function dRe(e){const[t,n]=/schema\/([\w-]+)\/([\w\.\-]+)\.json$/g.exec(e).slice(1,3);return{library:t,version:n}}var l9t="vega-themes",c9t="2.15.0",f9t="Themes for stylized Vega and Vega-Lite visualizations.",d9t=["vega","vega-lite","themes","style"],h9t="BSD-3-Clause",p9t={name:"UW Interactive Data Lab",url:"https://idl.cs.washington.edu"},m9t=[{name:"Emily Gu",url:"https://github.com/emilygu"},{name:"Arvind Satyanarayan",url:"http://arvindsatya.com"},{name:"Jeffrey Heer",url:"https://idl.cs.washington.edu"},{name:"Dominik Moritz",url:"https://www.domoritz.de"}],g9t="build/vega-themes.js",vX="build/vega-themes.module.js",y9t="build/vega-themes.min.js",v9t="build/vega-themes.min.js",b9t="build/vega-themes.module.d.ts",_9t={type:"git",url:"https://github.com/vega/vega-themes.git"},w9t=["src","build"],E9t={prebuild:"yarn clean",build:"rollup -c",clean:"rimraf build && rimraf examples/build","copy:data":"rsync -r node_modules/vega-datasets/data/* examples/data","copy:build":"rsync -r build/* examples/build","deploy:gh":"yarn build && mkdir -p examples/build && rsync -r build/* examples/build && gh-pages -d examples",preversion:"yarn lint",serve:"browser-sync start -s -f build examples --serveStatic examples",start:"yarn build && concurrently --kill-others -n Server,Rollup 'yarn serve' 'rollup -c -w'",format:"eslint . --fix",lint:"eslint .",release:"release-it"},x9t={"@babel/core":"^7.24.6","@babel/plugin-transform-runtime":"^7.24.6","@babel/preset-env":"^7.24.6","@babel/preset-typescript":"^7.24.6","@release-it/conventional-changelog":"^8.0.1","@rollup/plugin-json":"^6.1.0","@rollup/plugin-node-resolve":"^15.2.3","@rollup/plugin-terser":"^0.4.4","@typescript-eslint/eslint-plugin":"^7.11.0","@typescript-eslint/parser":"^7.11.0","browser-sync":"^3.0.2",concurrently:"^8.2.2",eslint:"^8.45.0","eslint-config-prettier":"^9.1.0","eslint-plugin-prettier":"^5.1.3","gh-pages":"^6.1.1",prettier:"^3.2.5","release-it":"^17.3.0",rollup:"^4.18.0","rollup-plugin-bundle-size":"^1.0.3","rollup-plugin-ts":"^3.4.5",typescript:"^5.4.5",vega:"^5.25.0","vega-lite":"^5.9.3"},T9t={vega:"*","vega-lite":"*"},S9t={},C9t={name:l9t,version:c9t,description:f9t,keywords:d9t,license:h9t,author:p9t,contributors:m9t,main:g9t,module:vX,unpkg:y9t,jsdelivr:v9t,types:b9t,repository:_9t,files:w9t,scripts:E9t,devDependencies:x9t,peerDependencies:T9t,dependencies:S9t};const Pv="#fff",Lue="#888",A9t={background:"#333",view:{stroke:Lue},title:{color:Pv,subtitleColor:Pv},style:{"guide-label":{fill:Pv},"guide-title":{fill:Pv}},axis:{domainColor:Pv,gridColor:Lue,tickColor:Pv}},vg="#4572a7",k9t={background:"#fff",arc:{fill:vg},area:{fill:vg},line:{stroke:vg,strokeWidth:2},path:{stroke:vg},rect:{fill:vg},shape:{stroke:vg},symbol:{fill:vg,strokeWidth:1.5,size:50},axis:{bandPosition:.5,grid:!0,gridColor:"#000000",gridOpacity:1,gridWidth:.5,labelPadding:10,tickSize:5,tickWidth:.5},axisBand:{grid:!1,tickExtra:!0},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:50,symbolType:"square"},range:{category:["#4572a7","#aa4643","#8aa453","#71598e","#4598ae","#d98445","#94aace","#d09393","#b9cc98","#a99cbc"]}},bg="#30a2da",L4="#cbcbcb",I9t="#999",R9t="#333",Fue="#f0f0f0",jue="#333",N9t={arc:{fill:bg},area:{fill:bg},axis:{domainColor:L4,grid:!0,gridColor:L4,gridWidth:1,labelColor:I9t,labelFontSize:10,titleColor:R9t,tickColor:L4,tickSize:10,titleFontSize:14,titlePadding:10,labelPadding:4},axisBand:{grid:!1},background:Fue,group:{fill:Fue},legend:{labelColor:jue,labelFontSize:11,padding:1,symbolSize:30,symbolType:"square",titleColor:jue,titleFontSize:14,titlePadding:10},line:{stroke:bg,strokeWidth:2},path:{stroke:bg,strokeWidth:.5},rect:{fill:bg},range:{category:["#30a2da","#fc4f30","#e5ae38","#6d904f","#8b8b8b","#b96db8","#ff9e27","#56cc60","#52d2ca","#52689e","#545454","#9fe4f8"],diverging:["#cc0020","#e77866","#f6e7e1","#d6e8ed","#91bfd9","#1d78b5"],heatmap:["#d6e8ed","#cee0e5","#91bfd9","#549cc6","#1d78b5"]},point:{filled:!0,shape:"circle"},shape:{stroke:bg},bar:{binSpacing:2,fill:bg,stroke:null},title:{anchor:"start",fontSize:24,fontWeight:600,offset:20}},_g="#000",P9t={group:{fill:"#e5e5e5"},arc:{fill:_g},area:{fill:_g},line:{stroke:_g},path:{stroke:_g},rect:{fill:_g},shape:{stroke:_g},symbol:{fill:_g,size:40},axis:{domain:!1,grid:!0,gridColor:"#FFFFFF",gridOpacity:1,labelColor:"#7F7F7F",labelPadding:4,tickColor:"#7F7F7F",tickSize:5.67,titleFontSize:16,titleFontWeight:"normal"},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:40},range:{category:["#000000","#7F7F7F","#1A1A1A","#999999","#333333","#B0B0B0","#4D4D4D","#C9C9C9","#666666","#DCDCDC"]}},D9t=22,O9t="normal",Bue="Benton Gothic, sans-serif",Uue=11.5,$9t="normal",wg="#82c6df",F4="Benton Gothic Bold, sans-serif",zue="normal",Vue=13,lE={"category-6":["#ec8431","#829eb1","#c89d29","#3580b1","#adc839","#ab7fb4"],"fire-7":["#fbf2c7","#f9e39c","#f8d36e","#f4bb6a","#e68a4f","#d15a40","#ab4232"],"fireandice-6":["#e68a4f","#f4bb6a","#f9e39c","#dadfe2","#a6b7c6","#849eae"],"ice-7":["#edefee","#dadfe2","#c4ccd2","#a6b7c6","#849eae","#607785","#47525d"]},M9t={background:"#ffffff",title:{anchor:"start",color:"#000000",font:F4,fontSize:D9t,fontWeight:O9t},arc:{fill:wg},area:{fill:wg},line:{stroke:wg,strokeWidth:2},path:{stroke:wg},rect:{fill:wg},shape:{stroke:wg},symbol:{fill:wg,size:30},axis:{labelFont:Bue,labelFontSize:Uue,labelFontWeight:$9t,titleFont:F4,titleFontSize:Vue,titleFontWeight:zue},axisX:{labelAngle:0,labelPadding:4,tickSize:3},axisY:{labelBaseline:"middle",maxExtent:45,minExtent:45,tickSize:2,titleAlign:"left",titleAngle:0,titleX:-45,titleY:-11},legend:{labelFont:Bue,labelFontSize:Uue,symbolType:"square",titleFont:F4,titleFontSize:Vue,titleFontWeight:zue},range:{category:lE["category-6"],diverging:lE["fireandice-6"],heatmap:lE["fire-7"],ordinal:lE["fire-7"],ramp:lE["fire-7"]}},Eg="#ab5787",ck="#979797",L9t={background:"#f9f9f9",arc:{fill:Eg},area:{fill:Eg},line:{stroke:Eg},path:{stroke:Eg},rect:{fill:Eg},shape:{stroke:Eg},symbol:{fill:Eg,size:30},axis:{domainColor:ck,domainWidth:.5,gridWidth:.2,labelColor:ck,tickColor:ck,tickWidth:.2,titleColor:ck},axisBand:{grid:!1},axisX:{grid:!0,tickSize:10},axisY:{domain:!1,grid:!0,tickSize:0},legend:{labelFontSize:11,padding:1,symbolSize:30,symbolType:"square"},range:{category:["#ab5787","#51b2e5","#703c5c","#168dd9","#d190b6","#00609f","#d365ba","#154866","#666666","#c4c4c4"]}},xg="#3e5c69",F9t={background:"#fff",arc:{fill:xg},area:{fill:xg},line:{stroke:xg},path:{stroke:xg},rect:{fill:xg},shape:{stroke:xg},symbol:{fill:xg},axis:{domainWidth:.5,grid:!0,labelPadding:2,tickSize:5,tickWidth:.5,titleFontWeight:"normal"},axisBand:{grid:!1},axisX:{gridWidth:.2},axisY:{gridDash:[3],gridWidth:.4},legend:{labelFontSize:11,padding:1,symbolType:"square"},range:{category:["#3e5c69","#6793a6","#182429","#0570b0","#3690c0","#74a9cf","#a6bddb","#e2ddf2"]}},Lu="#1696d2",Hue="#000000",j9t="#FFFFFF",fk="Lato",j4="Lato",B9t="Lato",U9t="#DEDDDD",z9t=18,cE={"main-colors":["#1696d2","#d2d2d2","#000000","#fdbf11","#ec008b","#55b748","#5c5859","#db2b27"],"shades-blue":["#CFE8F3","#A2D4EC","#73BFE2","#46ABDB","#1696D2","#12719E","#0A4C6A","#062635"],"shades-gray":["#F5F5F5","#ECECEC","#E3E3E3","#DCDBDB","#D2D2D2","#9D9D9D","#696969","#353535"],"shades-yellow":["#FFF2CF","#FCE39E","#FDD870","#FCCB41","#FDBF11","#E88E2D","#CA5800","#843215"],"shades-magenta":["#F5CBDF","#EB99C2","#E46AA7","#E54096","#EC008B","#AF1F6B","#761548","#351123"],"shades-green":["#DCEDD9","#BCDEB4","#98CF90","#78C26D","#55B748","#408941","#2C5C2D","#1A2E19"],"shades-black":["#D5D5D4","#ADABAC","#848081","#5C5859","#332D2F","#262223","#1A1717","#0E0C0D"],"shades-red":["#F8D5D4","#F1AAA9","#E9807D","#E25552","#DB2B27","#A4201D","#6E1614","#370B0A"],"one-group":["#1696d2","#000000"],"two-groups-cat-1":["#1696d2","#000000"],"two-groups-cat-2":["#1696d2","#fdbf11"],"two-groups-cat-3":["#1696d2","#db2b27"],"two-groups-seq":["#a2d4ec","#1696d2"],"three-groups-cat":["#1696d2","#fdbf11","#000000"],"three-groups-seq":["#a2d4ec","#1696d2","#0a4c6a"],"four-groups-cat-1":["#000000","#d2d2d2","#fdbf11","#1696d2"],"four-groups-cat-2":["#1696d2","#ec0008b","#fdbf11","#5c5859"],"four-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a"],"five-groups-cat-1":["#1696d2","#fdbf11","#d2d2d2","#ec008b","#000000"],"five-groups-cat-2":["#1696d2","#0a4c6a","#d2d2d2","#fdbf11","#332d2f"],"five-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a","#000000"],"six-groups-cat-1":["#1696d2","#ec008b","#fdbf11","#000000","#d2d2d2","#55b748"],"six-groups-cat-2":["#1696d2","#d2d2d2","#ec008b","#fdbf11","#332d2f","#0a4c6a"],"six-groups-seq":["#cfe8f3","#a2d4ec","#73bfe2","#46abdb","#1696d2","#12719e"],"diverging-colors":["#ca5800","#fdbf11","#fdd870","#fff2cf","#cfe8f3","#73bfe2","#1696d2","#0a4c6a"]},V9t={background:j9t,title:{anchor:"start",fontSize:z9t,font:fk},axisX:{domain:!0,domainColor:Hue,domainWidth:1,grid:!1,labelFontSize:12,labelFont:j4,labelAngle:0,tickColor:Hue,tickSize:5,titleFontSize:12,titlePadding:10,titleFont:fk},axisY:{domain:!1,domainWidth:1,grid:!0,gridColor:U9t,gridWidth:1,labelFontSize:12,labelFont:j4,labelPadding:8,ticks:!1,titleFontSize:12,titlePadding:10,titleFont:fk,titleAngle:0,titleY:-10,titleX:18},legend:{labelFontSize:12,labelFont:j4,symbolSize:100,titleFontSize:12,titlePadding:10,titleFont:fk,orient:"right",offset:10},view:{stroke:"transparent"},range:{category:cE["six-groups-cat-1"],diverging:cE["diverging-colors"],heatmap:cE["diverging-colors"],ordinal:cE["six-groups-seq"],ramp:cE["shades-blue"]},area:{fill:Lu},rect:{fill:Lu},line:{color:Lu,stroke:Lu,strokeWidth:5},trail:{color:Lu,stroke:Lu,strokeWidth:0,size:1},path:{stroke:Lu,strokeWidth:.5},point:{filled:!0},text:{font:B9t,color:Lu,fontSize:11,align:"center",fontWeight:400,size:11},style:{bar:{fill:Lu,stroke:null}},arc:{fill:Lu},shape:{stroke:Lu},symbol:{fill:Lu,size:30}},Tg="#3366CC",que="#ccc",dk="Arial, sans-serif",H9t={arc:{fill:Tg},area:{fill:Tg},path:{stroke:Tg},rect:{fill:Tg},shape:{stroke:Tg},symbol:{stroke:Tg},circle:{fill:Tg},background:"#fff",padding:{top:10,right:10,bottom:10,left:10},style:{"guide-label":{font:dk,fontSize:12},"guide-title":{font:dk,fontSize:12},"group-title":{font:dk,fontSize:12}},title:{font:dk,fontSize:14,fontWeight:"bold",dy:-3,anchor:"start"},axis:{gridColor:que,tickColor:que,domain:!1,grid:!0},range:{category:["#4285F4","#DB4437","#F4B400","#0F9D58","#AB47BC","#00ACC1","#FF7043","#9E9D24","#5C6BC0","#F06292","#00796B","#C2185B"],heatmap:["#c6dafc","#5e97f6","#2a56c6"]}},bX=e=>e*(1/3+1),Wue=bX(9),Gue=bX(10),Yue=bX(12),fE="Segoe UI",Kue="wf_standard-font, helvetica, arial, sans-serif",Xue="#252423",dE="#605E5C",Que="transparent",q9t="#C8C6C4",Rl="#118DFF",W9t="#12239E",G9t="#E66C37",Y9t="#6B007B",K9t="#E044A7",X9t="#744EC2",Q9t="#D9B300",J9t="#D64550",hRe=Rl,pRe="#DEEFFF",Jue=[pRe,hRe],Z9t=[pRe,"#c7e4ff","#b0d9ff","#9aceff","#83c3ff","#6cb9ff","#55aeff","#3fa3ff","#2898ff",hRe],e8t={view:{stroke:Que},background:Que,font:fE,header:{titleFont:Kue,titleFontSize:Yue,titleColor:Xue,labelFont:fE,labelFontSize:Gue,labelColor:dE},axis:{ticks:!1,grid:!1,domain:!1,labelColor:dE,labelFontSize:Wue,titleFont:Kue,titleColor:Xue,titleFontSize:Yue,titleFontWeight:"normal"},axisQuantitative:{tickCount:3,grid:!0,gridColor:q9t,gridDash:[1,5],labelFlush:!1},axisBand:{tickExtra:!0},axisX:{labelPadding:5},axisY:{labelPadding:10},bar:{fill:Rl},line:{stroke:Rl,strokeWidth:3,strokeCap:"round",strokeJoin:"round"},text:{font:fE,fontSize:Wue,fill:dE},arc:{fill:Rl},area:{fill:Rl,line:!0,opacity:.6},path:{stroke:Rl},rect:{fill:Rl},point:{fill:Rl,filled:!0,size:75},shape:{stroke:Rl},symbol:{fill:Rl,strokeWidth:1.5,size:50},legend:{titleFont:fE,titleFontWeight:"bold",titleColor:dE,labelFont:fE,labelFontSize:Gue,labelColor:dE,symbolType:"circle",symbolSize:75},range:{category:[Rl,W9t,G9t,Y9t,K9t,X9t,Q9t,J9t],diverging:Jue,heatmap:Jue,ordinal:Z9t}},B4='IBM Plex Sans,system-ui,-apple-system,BlinkMacSystemFont,".sfnstext-regular",sans-serif',t8t='IBM Plex Sans Condensed, system-ui, -apple-system, BlinkMacSystemFont, ".SFNSText-Regular", sans-serif',U4=400,hk={textPrimary:{g90:"#f4f4f4",g100:"#f4f4f4",white:"#161616",g10:"#161616"},textSecondary:{g90:"#c6c6c6",g100:"#c6c6c6",white:"#525252",g10:"#525252"},layerAccent01:{white:"#e0e0e0",g10:"#e0e0e0",g90:"#525252",g100:"#393939"},gridBg:{white:"#ffffff",g10:"#ffffff",g90:"#161616",g100:"#161616"}},n8t=["#8a3ffc","#33b1ff","#007d79","#ff7eb6","#fa4d56","#fff1f1","#6fdc8c","#4589ff","#d12771","#d2a106","#08bdba","#bae6ff","#ba4e00","#d4bbff"],r8t=["#6929c4","#1192e8","#005d5d","#9f1853","#fa4d56","#570408","#198038","#002d9c","#ee538b","#b28600","#009d9a","#012749","#8a3800","#a56eff"];function tM({theme:e,background:t}){const n=["white","g10"].includes(e)?"light":"dark",r=hk.gridBg[e],i=hk.textPrimary[e],o=hk.textSecondary[e],s=n==="dark"?n8t:r8t,a=n==="dark"?"#d4bbff":"#6929c4";return{background:t,arc:{fill:a},area:{fill:a},path:{stroke:a},rect:{fill:a},shape:{stroke:a},symbol:{stroke:a},circle:{fill:a},view:{fill:r,stroke:r},group:{fill:r},title:{color:i,anchor:"start",dy:-15,fontSize:16,font:B4,fontWeight:600},axis:{labelColor:o,labelFontSize:12,labelFont:t8t,labelFontWeight:U4,titleColor:i,titleFontWeight:600,titleFontSize:12,grid:!0,gridColor:hk.layerAccent01[e],labelAngle:0},axisX:{titlePadding:10},axisY:{titlePadding:2.5},style:{"guide-label":{font:B4,fill:o,fontWeight:U4},"guide-title":{font:B4,fill:o,fontWeight:U4}},range:{category:s,diverging:["#750e13","#a2191f","#da1e28","#fa4d56","#ff8389","#ffb3b8","#ffd7d9","#fff1f1","#e5f6ff","#bae6ff","#82cfff","#33b1ff","#1192e8","#0072c3","#00539a","#003a6d"],heatmap:["#f6f2ff","#e8daff","#d4bbff","#be95ff","#a56eff","#8a3ffc","#6929c4","#491d8b","#31135e","#1c0f30"]}}}const i8t=tM({theme:"white",background:"#ffffff"}),o8t=tM({theme:"g10",background:"#f4f4f4"}),s8t=tM({theme:"g90",background:"#262626"}),a8t=tM({theme:"g100",background:"#161616"}),u8t=C9t.version,l8t=Object.freeze(Object.defineProperty({__proto__:null,carbong10:o8t,carbong100:a8t,carbong90:s8t,carbonwhite:i8t,dark:A9t,excel:k9t,fivethirtyeight:N9t,ggplot2:P9t,googlecharts:H9t,latimes:M9t,powerbi:e8t,quartz:L9t,urbaninstitute:V9t,version:u8t,vox:F9t},Symbol.toStringTag,{value:"Module"}));function c8t(e,t,n,r){if(Le(e))return`[${e.map(i=>t(ft(i)?i:Zue(i,n))).join(", ")}]`;if(ht(e)){let i="";const{title:o,image:s,...a}=e;o&&(i+=`<h2>${t(o)}</h2>`),s&&(i+=`<img src="${new URL(t(s),r||location.href).href}">`);const u=Object.keys(a);if(u.length>0){i+="<table>";for(const l of u){let c=a[l];c!==void 0&&(ht(c)&&(c=Zue(c,n)),i+=`<tr><td class="key">${t(l)}</td><td class="value">${t(c)}</td></tr>`)}i+="</table>"}return i||"{}"}return t(e)}function f8t(e){const t=[];return function(n,r){if(typeof r!="object"||r===null)return r;const i=t.indexOf(this)+1;return t.length=i,t.length>e?"[Object]":t.indexOf(r)>=0?"[Circular]":(t.push(r),r)}}function Zue(e,t){return JSON.stringify(e,f8t(t))}var d8t=`#vg-tooltip-element {
  visibility: hidden;
  padding: 8px;
  position: fixed;
  z-index: 1000;
  font-family: sans-serif;
  font-size: 11px;
  border-radius: 3px;
  box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
  /* The default theme is the light theme. */
  background-color: rgba(255, 255, 255, 0.95);
  border: 1px solid #d9d9d9;
  color: black;
}
#vg-tooltip-element.visible {
  visibility: visible;
}
#vg-tooltip-element h2 {
  margin-top: 0;
  margin-bottom: 10px;
  font-size: 13px;
}
#vg-tooltip-element table {
  border-spacing: 0;
}
#vg-tooltip-element table tr {
  border: none;
}
#vg-tooltip-element table tr td {
  overflow: hidden;
  text-overflow: ellipsis;
  padding-top: 2px;
  padding-bottom: 2px;
}
#vg-tooltip-element table tr td.key {
  color: #808080;
  max-width: 150px;
  text-align: right;
  padding-right: 4px;
}
#vg-tooltip-element table tr td.value {
  display: block;
  max-width: 300px;
  max-height: 7em;
  text-align: left;
}
#vg-tooltip-element.dark-theme {
  background-color: rgba(32, 32, 32, 0.9);
  border: 1px solid #f5f5f5;
  color: white;
}
#vg-tooltip-element.dark-theme td.key {
  color: #bfbfbf;
}
`;const mRe="vg-tooltip-element",h8t={offsetX:10,offsetY:10,id:mRe,styleId:"vega-tooltip-style",theme:"light",disableDefaultStyle:!1,sanitize:p8t,maxDepth:2,formatTooltip:c8t,baseURL:""};function p8t(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;")}function m8t(e){if(!/^[A-Za-z]+[-:.\w]*$/.test(e))throw new Error("Invalid HTML ID");return d8t.toString().replace(mRe,e)}function g8t(e,t,n,r){let i=e.clientX+n;i+t.width>window.innerWidth&&(i=+e.clientX-n-t.width);let o=e.clientY+r;return o+t.height>window.innerHeight&&(o=+e.clientY-r-t.height),{x:i,y:o}}class y8t{constructor(t){this.options={...h8t,...t};const n=this.options.id;if(this.el=null,this.call=this.tooltipHandler.bind(this),!this.options.disableDefaultStyle&&!document.getElementById(this.options.styleId)){const r=document.createElement("style");r.setAttribute("id",this.options.styleId),r.innerHTML=m8t(n);const i=document.head;i.childNodes.length>0?i.insertBefore(r,i.childNodes[0]):i.appendChild(r)}}tooltipHandler(t,n,r,i){if(this.el=document.getElementById(this.options.id),this.el||(this.el=document.createElement("div"),this.el.setAttribute("id",this.options.id),this.el.classList.add("vg-tooltip"),(document.fullscreenElement??document.body).appendChild(this.el)),i==null||i===""){this.el.classList.remove("visible",`${this.options.theme}-theme`);return}this.el.innerHTML=this.options.formatTooltip(i,this.options.sanitize,this.options.maxDepth,this.options.baseURL),this.el.classList.add("visible",`${this.options.theme}-theme`);const{x:o,y:s}=g8t(n,this.el.getBoundingClientRect(),this.options.offsetX,this.options.offsetY);this.el.style.top=`${s}px`,this.el.style.left=`${o}px`}}var z4={};function v8t(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var V4,ele;function b8t(){return ele||(ele=1,V4=function(e){e.prototype[Symbol.iterator]=function*(){for(let t=this.head;t;t=t.next)yield t.value}}),V4}var _8t=qn;qn.Node=hy;qn.create=qn;function qn(e){var t=this;if(t instanceof qn||(t=new qn),t.tail=null,t.head=null,t.length=0,e&&typeof e.forEach=="function")e.forEach(function(i){t.push(i)});else if(arguments.length>0)for(var n=0,r=arguments.length;n<r;n++)t.push(arguments[n]);return t}qn.prototype.removeNode=function(e){if(e.list!==this)throw new Error("removing node which does not belong to this list");var t=e.next,n=e.prev;return t&&(t.prev=n),n&&(n.next=t),e===this.head&&(this.head=t),e===this.tail&&(this.tail=n),e.list.length--,e.next=null,e.prev=null,e.list=null,t};qn.prototype.unshiftNode=function(e){if(e!==this.head){e.list&&e.list.removeNode(e);var t=this.head;e.list=this,e.next=t,t&&(t.prev=e),this.head=e,this.tail||(this.tail=e),this.length++}};qn.prototype.pushNode=function(e){if(e!==this.tail){e.list&&e.list.removeNode(e);var t=this.tail;e.list=this,e.prev=t,t&&(t.next=e),this.tail=e,this.head||(this.head=e),this.length++}};qn.prototype.push=function(){for(var e=0,t=arguments.length;e<t;e++)E8t(this,arguments[e]);return this.length};qn.prototype.unshift=function(){for(var e=0,t=arguments.length;e<t;e++)x8t(this,arguments[e]);return this.length};qn.prototype.pop=function(){if(this.tail){var e=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,e}};qn.prototype.shift=function(){if(this.head){var e=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,e}};qn.prototype.forEach=function(e,t){t=t||this;for(var n=this.head,r=0;n!==null;r++)e.call(t,n.value,r,this),n=n.next};qn.prototype.forEachReverse=function(e,t){t=t||this;for(var n=this.tail,r=this.length-1;n!==null;r--)e.call(t,n.value,r,this),n=n.prev};qn.prototype.get=function(e){for(var t=0,n=this.head;n!==null&&t<e;t++)n=n.next;if(t===e&&n!==null)return n.value};qn.prototype.getReverse=function(e){for(var t=0,n=this.tail;n!==null&&t<e;t++)n=n.prev;if(t===e&&n!==null)return n.value};qn.prototype.map=function(e,t){t=t||this;for(var n=new qn,r=this.head;r!==null;)n.push(e.call(t,r.value,this)),r=r.next;return n};qn.prototype.mapReverse=function(e,t){t=t||this;for(var n=new qn,r=this.tail;r!==null;)n.push(e.call(t,r.value,this)),r=r.prev;return n};qn.prototype.reduce=function(e,t){var n,r=this.head;if(arguments.length>1)n=t;else if(this.head)r=this.head.next,n=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=0;r!==null;i++)n=e(n,r.value,i),r=r.next;return n};qn.prototype.reduceReverse=function(e,t){var n,r=this.tail;if(arguments.length>1)n=t;else if(this.tail)r=this.tail.prev,n=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=this.length-1;r!==null;i--)n=e(n,r.value,i),r=r.prev;return n};qn.prototype.toArray=function(){for(var e=new Array(this.length),t=0,n=this.head;n!==null;t++)e[t]=n.value,n=n.next;return e};qn.prototype.toArrayReverse=function(){for(var e=new Array(this.length),t=0,n=this.tail;n!==null;t++)e[t]=n.value,n=n.prev;return e};qn.prototype.slice=function(e,t){t=t||this.length,t<0&&(t+=this.length),e=e||0,e<0&&(e+=this.length);var n=new qn;if(t<e||t<0)return n;e<0&&(e=0),t>this.length&&(t=this.length);for(var r=0,i=this.head;i!==null&&r<e;r++)i=i.next;for(;i!==null&&r<t;r++,i=i.next)n.push(i.value);return n};qn.prototype.sliceReverse=function(e,t){t=t||this.length,t<0&&(t+=this.length),e=e||0,e<0&&(e+=this.length);var n=new qn;if(t<e||t<0)return n;e<0&&(e=0),t>this.length&&(t=this.length);for(var r=this.length,i=this.tail;i!==null&&r>t;r--)i=i.prev;for(;i!==null&&r>e;r--,i=i.prev)n.push(i.value);return n};qn.prototype.splice=function(e,t,...n){e>this.length&&(e=this.length-1),e<0&&(e=this.length+e);for(var r=0,i=this.head;i!==null&&r<e;r++)i=i.next;for(var o=[],r=0;i&&r<t;r++)o.push(i.value),i=this.removeNode(i);i===null&&(i=this.tail),i!==this.head&&i!==this.tail&&(i=i.prev);for(var r=0;r<n.length;r++)i=w8t(this,i,n[r]);return o};qn.prototype.reverse=function(){for(var e=this.head,t=this.tail,n=e;n!==null;n=n.prev){var r=n.prev;n.prev=n.next,n.next=r}return this.head=t,this.tail=e,this};function w8t(e,t,n){var r=t===e.head?new hy(n,null,t,e):new hy(n,t,t.next,e);return r.next===null&&(e.tail=r),r.prev===null&&(e.head=r),e.length++,r}function E8t(e,t){e.tail=new hy(t,e.tail,null,e),e.head||(e.head=e.tail),e.length++}function x8t(e,t){e.head=new hy(t,null,e.head,e),e.tail||(e.tail=e.head),e.length++}function hy(e,t,n,r){if(!(this instanceof hy))return new hy(e,t,n,r);this.list=r,this.value=e,t?(t.next=this,this.prev=t):this.prev=null,n?(n.prev=this,this.next=n):this.next=null}try{b8t()(qn)}catch{}const T8t=_8t,Kg=Symbol("max"),vd=Symbol("length"),Dv=Symbol("lengthCalculator"),tT=Symbol("allowStale"),u0=Symbol("maxAge"),pd=Symbol("dispose"),tle=Symbol("noDisposeOnSet"),eo=Symbol("lruList"),Nl=Symbol("cache"),gRe=Symbol("updateAgeOnGet"),H4=()=>1;class S8t{constructor(t){if(typeof t=="number"&&(t={max:t}),t||(t={}),t.max&&(typeof t.max!="number"||t.max<0))throw new TypeError("max must be a non-negative number");this[Kg]=t.max||1/0;const n=t.length||H4;if(this[Dv]=typeof n!="function"?H4:n,this[tT]=t.stale||!1,t.maxAge&&typeof t.maxAge!="number")throw new TypeError("maxAge must be a number");this[u0]=t.maxAge||0,this[pd]=t.dispose,this[tle]=t.noDisposeOnSet||!1,this[gRe]=t.updateAgeOnGet||!1,this.reset()}set max(t){if(typeof t!="number"||t<0)throw new TypeError("max must be a non-negative number");this[Kg]=t||1/0,hE(this)}get max(){return this[Kg]}set allowStale(t){this[tT]=!!t}get allowStale(){return this[tT]}set maxAge(t){if(typeof t!="number")throw new TypeError("maxAge must be a non-negative number");this[u0]=t,hE(this)}get maxAge(){return this[u0]}set lengthCalculator(t){typeof t!="function"&&(t=H4),t!==this[Dv]&&(this[Dv]=t,this[vd]=0,this[eo].forEach(n=>{n.length=this[Dv](n.value,n.key),this[vd]+=n.length})),hE(this)}get lengthCalculator(){return this[Dv]}get length(){return this[vd]}get itemCount(){return this[eo].length}rforEach(t,n){n=n||this;for(let r=this[eo].tail;r!==null;){const i=r.prev;nle(this,t,r,n),r=i}}forEach(t,n){n=n||this;for(let r=this[eo].head;r!==null;){const i=r.next;nle(this,t,r,n),r=i}}keys(){return this[eo].toArray().map(t=>t.key)}values(){return this[eo].toArray().map(t=>t.value)}reset(){this[pd]&&this[eo]&&this[eo].length&&this[eo].forEach(t=>this[pd](t.key,t.value)),this[Nl]=new Map,this[eo]=new T8t,this[vd]=0}dump(){return this[eo].map(t=>UP(this,t)?!1:{k:t.key,v:t.value,e:t.now+(t.maxAge||0)}).toArray().filter(t=>t)}dumpLru(){return this[eo]}set(t,n,r){if(r=r||this[u0],r&&typeof r!="number")throw new TypeError("maxAge must be a number");const i=r?Date.now():0,o=this[Dv](n,t);if(this[Nl].has(t)){if(o>this[Kg])return K1(this,this[Nl].get(t)),!1;const u=this[Nl].get(t).value;return this[pd]&&(this[tle]||this[pd](t,u.value)),u.now=i,u.maxAge=r,u.value=n,this[vd]+=o-u.length,u.length=o,this.get(t),hE(this),!0}const s=new C8t(t,n,o,i,r);return s.length>this[Kg]?(this[pd]&&this[pd](t,n),!1):(this[vd]+=s.length,this[eo].unshift(s),this[Nl].set(t,this[eo].head),hE(this),!0)}has(t){if(!this[Nl].has(t))return!1;const n=this[Nl].get(t).value;return!UP(this,n)}get(t){return q4(this,t,!0)}peek(t){return q4(this,t,!1)}pop(){const t=this[eo].tail;return t?(K1(this,t),t.value):null}del(t){K1(this,this[Nl].get(t))}load(t){this.reset();const n=Date.now();for(let r=t.length-1;r>=0;r--){const i=t[r],o=i.e||0;if(o===0)this.set(i.k,i.v);else{const s=o-n;s>0&&this.set(i.k,i.v,s)}}}prune(){this[Nl].forEach((t,n)=>q4(this,n,!1))}}const q4=(e,t,n)=>{const r=e[Nl].get(t);if(r){const i=r.value;if(UP(e,i)){if(K1(e,r),!e[tT])return}else n&&(e[gRe]&&(r.value.now=Date.now()),e[eo].unshiftNode(r));return i.value}},UP=(e,t)=>{if(!t||!t.maxAge&&!e[u0])return!1;const n=Date.now()-t.now;return t.maxAge?n>t.maxAge:e[u0]&&n>e[u0]},hE=e=>{if(e[vd]>e[Kg])for(let t=e[eo].tail;e[vd]>e[Kg]&&t!==null;){const n=t.prev;K1(e,t),t=n}},K1=(e,t)=>{if(t){const n=t.value;e[pd]&&e[pd](n.key,n.value),e[vd]-=n.length,e[Nl].delete(n.key),e[eo].removeNode(t)}};class C8t{constructor(t,n,r,i,o){this.key=t,this.value=n,this.length=r,this.now=i,this.maxAge=o||0}}const nle=(e,t,n,r)=>{let i=n.value;UP(e,i)&&(K1(e,n),e[tT]||(i=void 0)),i&&t.call(r,i.value,i.key,e)};var A8t=S8t;const k8t=Object.freeze({loose:!0}),I8t=Object.freeze({}),R8t=e=>e?typeof e!="object"?k8t:e:I8t;var _X=R8t,rB={exports:{}};const N8t="2.0.0",yRe=256,P8t=Number.MAX_SAFE_INTEGER||9007199254740991,D8t=16,O8t=yRe-6,$8t=["major","premajor","minor","preminor","patch","prepatch","prerelease"];var wX={MAX_LENGTH:yRe,MAX_SAFE_COMPONENT_LENGTH:D8t,MAX_SAFE_BUILD_LENGTH:O8t,MAX_SAFE_INTEGER:P8t,RELEASE_TYPES:$8t,SEMVER_SPEC_VERSION:N8t,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2};const M8t=typeof process=="object"&&z4&&z4.NODE_DEBUG&&/\bsemver\b/i.test(z4.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};var nM=M8t;(function(e,t){const{MAX_SAFE_COMPONENT_LENGTH:n,MAX_SAFE_BUILD_LENGTH:r,MAX_LENGTH:i}=wX,o=nM;t=e.exports={};const s=t.re=[],a=t.safeRe=[],u=t.src=[],l=t.t={};let c=0;const f="[a-zA-Z0-9-]",d=[["\\s",1],["\\d",i],[f,r]],h=m=>{for(const[g,y]of d)m=m.split(`${g}*`).join(`${g}{0,${y}}`).split(`${g}+`).join(`${g}{1,${y}}`);return m},p=(m,g,y)=>{const v=h(g),_=c++;o(m,_,g),l[m]=_,u[_]=g,s[_]=new RegExp(g,y?"g":void 0),a[_]=new RegExp(v,y?"g":void 0)};p("NUMERICIDENTIFIER","0|[1-9]\\d*"),p("NUMERICIDENTIFIERLOOSE","\\d+"),p("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${f}*`),p("MAINVERSION",`(${u[l.NUMERICIDENTIFIER]})\\.(${u[l.NUMERICIDENTIFIER]})\\.(${u[l.NUMERICIDENTIFIER]})`),p("MAINVERSIONLOOSE",`(${u[l.NUMERICIDENTIFIERLOOSE]})\\.(${u[l.NUMERICIDENTIFIERLOOSE]})\\.(${u[l.NUMERICIDENTIFIERLOOSE]})`),p("PRERELEASEIDENTIFIER",`(?:${u[l.NUMERICIDENTIFIER]}|${u[l.NONNUMERICIDENTIFIER]})`),p("PRERELEASEIDENTIFIERLOOSE",`(?:${u[l.NUMERICIDENTIFIERLOOSE]}|${u[l.NONNUMERICIDENTIFIER]})`),p("PRERELEASE",`(?:-(${u[l.PRERELEASEIDENTIFIER]}(?:\\.${u[l.PRERELEASEIDENTIFIER]})*))`),p("PRERELEASELOOSE",`(?:-?(${u[l.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${u[l.PRERELEASEIDENTIFIERLOOSE]})*))`),p("BUILDIDENTIFIER",`${f}+`),p("BUILD",`(?:\\+(${u[l.BUILDIDENTIFIER]}(?:\\.${u[l.BUILDIDENTIFIER]})*))`),p("FULLPLAIN",`v?${u[l.MAINVERSION]}${u[l.PRERELEASE]}?${u[l.BUILD]}?`),p("FULL",`^${u[l.FULLPLAIN]}$`),p("LOOSEPLAIN",`[v=\\s]*${u[l.MAINVERSIONLOOSE]}${u[l.PRERELEASELOOSE]}?${u[l.BUILD]}?`),p("LOOSE",`^${u[l.LOOSEPLAIN]}$`),p("GTLT","((?:<|>)?=?)"),p("XRANGEIDENTIFIERLOOSE",`${u[l.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),p("XRANGEIDENTIFIER",`${u[l.NUMERICIDENTIFIER]}|x|X|\\*`),p("XRANGEPLAIN",`[v=\\s]*(${u[l.XRANGEIDENTIFIER]})(?:\\.(${u[l.XRANGEIDENTIFIER]})(?:\\.(${u[l.XRANGEIDENTIFIER]})(?:${u[l.PRERELEASE]})?${u[l.BUILD]}?)?)?`),p("XRANGEPLAINLOOSE",`[v=\\s]*(${u[l.XRANGEIDENTIFIERLOOSE]})(?:\\.(${u[l.XRANGEIDENTIFIERLOOSE]})(?:\\.(${u[l.XRANGEIDENTIFIERLOOSE]})(?:${u[l.PRERELEASELOOSE]})?${u[l.BUILD]}?)?)?`),p("XRANGE",`^${u[l.GTLT]}\\s*${u[l.XRANGEPLAIN]}$`),p("XRANGELOOSE",`^${u[l.GTLT]}\\s*${u[l.XRANGEPLAINLOOSE]}$`),p("COERCEPLAIN",`(^|[^\\d])(\\d{1,${n}})(?:\\.(\\d{1,${n}}))?(?:\\.(\\d{1,${n}}))?`),p("COERCE",`${u[l.COERCEPLAIN]}(?:$|[^\\d])`),p("COERCEFULL",u[l.COERCEPLAIN]+`(?:${u[l.PRERELEASE]})?(?:${u[l.BUILD]})?(?:$|[^\\d])`),p("COERCERTL",u[l.COERCE],!0),p("COERCERTLFULL",u[l.COERCEFULL],!0),p("LONETILDE","(?:~>?)"),p("TILDETRIM",`(\\s*)${u[l.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",p("TILDE",`^${u[l.LONETILDE]}${u[l.XRANGEPLAIN]}$`),p("TILDELOOSE",`^${u[l.LONETILDE]}${u[l.XRANGEPLAINLOOSE]}$`),p("LONECARET","(?:\\^)"),p("CARETTRIM",`(\\s*)${u[l.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",p("CARET",`^${u[l.LONECARET]}${u[l.XRANGEPLAIN]}$`),p("CARETLOOSE",`^${u[l.LONECARET]}${u[l.XRANGEPLAINLOOSE]}$`),p("COMPARATORLOOSE",`^${u[l.GTLT]}\\s*(${u[l.LOOSEPLAIN]})$|^$`),p("COMPARATOR",`^${u[l.GTLT]}\\s*(${u[l.FULLPLAIN]})$|^$`),p("COMPARATORTRIM",`(\\s*)${u[l.GTLT]}\\s*(${u[l.LOOSEPLAIN]}|${u[l.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",p("HYPHENRANGE",`^\\s*(${u[l.XRANGEPLAIN]})\\s+-\\s+(${u[l.XRANGEPLAIN]})\\s*$`),p("HYPHENRANGELOOSE",`^\\s*(${u[l.XRANGEPLAINLOOSE]})\\s+-\\s+(${u[l.XRANGEPLAINLOOSE]})\\s*$`),p("STAR","(<|>)?=?\\s*\\*"),p("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),p("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})(rB,rB.exports);var EX=rB.exports;const rle=/^[0-9]+$/,vRe=(e,t)=>{const n=rle.test(e),r=rle.test(t);return n&&r&&(e=+e,t=+t),e===t?0:n&&!r?-1:r&&!n?1:e<t?-1:1},L8t=(e,t)=>vRe(t,e);var F8t={compareIdentifiers:vRe,rcompareIdentifiers:L8t};const pk=nM,{MAX_LENGTH:ile,MAX_SAFE_INTEGER:mk}=wX,{safeRe:ole,t:sle}=EX,j8t=_X,{compareIdentifiers:Ov}=F8t;let B8t=class Oc{constructor(t,n){if(n=j8t(n),t instanceof Oc){if(t.loose===!!n.loose&&t.includePrerelease===!!n.includePrerelease)return t;t=t.version}else if(typeof t!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof t}".`);if(t.length>ile)throw new TypeError(`version is longer than ${ile} characters`);pk("SemVer",t,n),this.options=n,this.loose=!!n.loose,this.includePrerelease=!!n.includePrerelease;const r=t.trim().match(n.loose?ole[sle.LOOSE]:ole[sle.FULL]);if(!r)throw new TypeError(`Invalid Version: ${t}`);if(this.raw=t,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>mk||this.major<0)throw new TypeError("Invalid major version");if(this.minor>mk||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>mk||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map(i=>{if(/^[0-9]+$/.test(i)){const o=+i;if(o>=0&&o<mk)return o}return i}):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(t){if(pk("SemVer.compare",this.version,this.options,t),!(t instanceof Oc)){if(typeof t=="string"&&t===this.version)return 0;t=new Oc(t,this.options)}return t.version===this.version?0:this.compareMain(t)||this.comparePre(t)}compareMain(t){return t instanceof Oc||(t=new Oc(t,this.options)),Ov(this.major,t.major)||Ov(this.minor,t.minor)||Ov(this.patch,t.patch)}comparePre(t){if(t instanceof Oc||(t=new Oc(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;let n=0;do{const r=this.prerelease[n],i=t.prerelease[n];if(pk("prerelease compare",n,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return Ov(r,i)}while(++n)}compareBuild(t){t instanceof Oc||(t=new Oc(t,this.options));let n=0;do{const r=this.build[n],i=t.build[n];if(pk("prerelease compare",n,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return Ov(r,i)}while(++n)}inc(t,n,r){switch(t){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",n,r);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",n,r);break;case"prepatch":this.prerelease.length=0,this.inc("patch",n,r),this.inc("pre",n,r);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",n,r),this.inc("pre",n,r);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const i=Number(r)?1:0;if(!n&&r===!1)throw new Error("invalid increment argument: identifier is empty");if(this.prerelease.length===0)this.prerelease=[i];else{let o=this.prerelease.length;for(;--o>=0;)typeof this.prerelease[o]=="number"&&(this.prerelease[o]++,o=-2);if(o===-1){if(n===this.prerelease.join(".")&&r===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(i)}}if(n){let o=[n,i];r===!1&&(o=[n]),Ov(this.prerelease[0],n)===0?isNaN(this.prerelease[1])&&(this.prerelease=o):this.prerelease=o}break}default:throw new Error(`invalid increment argument: ${t}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};var xX=B8t;const ale=xX,U8t=(e,t,n)=>new ale(e,n).compare(new ale(t,n));var pw=U8t;const z8t=pw,V8t=(e,t,n)=>z8t(e,t,n)===0;var H8t=V8t;const q8t=pw,W8t=(e,t,n)=>q8t(e,t,n)!==0;var G8t=W8t;const Y8t=pw,K8t=(e,t,n)=>Y8t(e,t,n)>0;var X8t=K8t;const Q8t=pw,J8t=(e,t,n)=>Q8t(e,t,n)>=0;var Z8t=J8t;const eBt=pw,tBt=(e,t,n)=>eBt(e,t,n)<0;var nBt=tBt;const rBt=pw,iBt=(e,t,n)=>rBt(e,t,n)<=0;var oBt=iBt;const sBt=H8t,aBt=G8t,uBt=X8t,lBt=Z8t,cBt=nBt,fBt=oBt,dBt=(e,t,n,r)=>{switch(t){case"===":return typeof e=="object"&&(e=e.version),typeof n=="object"&&(n=n.version),e===n;case"!==":return typeof e=="object"&&(e=e.version),typeof n=="object"&&(n=n.version),e!==n;case"":case"=":case"==":return sBt(e,n,r);case"!=":return aBt(e,n,r);case">":return uBt(e,n,r);case">=":return lBt(e,n,r);case"<":return cBt(e,n,r);case"<=":return fBt(e,n,r);default:throw new TypeError(`Invalid operator: ${t}`)}};var hBt=dBt,W4,ule;function pBt(){if(ule)return W4;ule=1;const e=Symbol("SemVer ANY");class t{static get ANY(){return e}constructor(c,f){if(f=n(f),c instanceof t){if(c.loose===!!f.loose)return c;c=c.value}c=c.trim().split(/\s+/).join(" "),s("comparator",c,f),this.options=f,this.loose=!!f.loose,this.parse(c),this.semver===e?this.value="":this.value=this.operator+this.semver.version,s("comp",this)}parse(c){const f=this.options.loose?r[i.COMPARATORLOOSE]:r[i.COMPARATOR],d=c.match(f);if(!d)throw new TypeError(`Invalid comparator: ${c}`);this.operator=d[1]!==void 0?d[1]:"",this.operator==="="&&(this.operator=""),d[2]?this.semver=new a(d[2],this.options.loose):this.semver=e}toString(){return this.value}test(c){if(s("Comparator.test",c,this.options.loose),this.semver===e||c===e)return!0;if(typeof c=="string")try{c=new a(c,this.options)}catch{return!1}return o(c,this.operator,this.semver,this.options)}intersects(c,f){if(!(c instanceof t))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new u(c.value,f).test(this.value):c.operator===""?c.value===""?!0:new u(this.value,f).test(c.semver):(f=n(f),f.includePrerelease&&(this.value==="<0.0.0-0"||c.value==="<0.0.0-0")||!f.includePrerelease&&(this.value.startsWith("<0.0.0")||c.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&c.operator.startsWith(">")||this.operator.startsWith("<")&&c.operator.startsWith("<")||this.semver.version===c.semver.version&&this.operator.includes("=")&&c.operator.includes("=")||o(this.semver,"<",c.semver,f)&&this.operator.startsWith(">")&&c.operator.startsWith("<")||o(this.semver,">",c.semver,f)&&this.operator.startsWith("<")&&c.operator.startsWith(">")))}}W4=t;const n=_X,{safeRe:r,t:i}=EX,o=hBt,s=nM,a=xX,u=bRe();return W4}var G4,lle;function bRe(){if(lle)return G4;lle=1;class e{constructor(M,F){if(F=r(F),M instanceof e)return M.loose===!!F.loose&&M.includePrerelease===!!F.includePrerelease?M:new e(M.raw,F);if(M instanceof i)return this.raw=M.value,this.set=[[M]],this.format(),this;if(this.options=F,this.loose=!!F.loose,this.includePrerelease=!!F.includePrerelease,this.raw=M.trim().split(/\s+/).join(" "),this.set=this.raw.split("||").map(L=>this.parseRange(L.trim())).filter(L=>L.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const L=this.set[0];if(this.set=this.set.filter(B=>!p(B[0])),this.set.length===0)this.set=[L];else if(this.set.length>1){for(const B of this.set)if(B.length===1&&m(B[0])){this.set=[B];break}}}this.format()}format(){return this.range=this.set.map(M=>M.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange(M){const L=((this.options.includePrerelease&&d)|(this.options.loose&&h))+":"+M,B=n.get(L);if(B)return B;const U=this.options.loose,H=U?a[u.HYPHENRANGELOOSE]:a[u.HYPHENRANGE];M=M.replace(H,N(this.options.includePrerelease)),o("hyphen replace",M),M=M.replace(a[u.COMPARATORTRIM],l),o("comparator trim",M),M=M.replace(a[u.TILDETRIM],c),o("tilde trim",M),M=M.replace(a[u.CARETTRIM],f),o("caret trim",M);let P=M.split(" ").map(q=>y(q,this.options)).join(" ").split(/\s+/).map(q=>R(q,this.options));U&&(P=P.filter(q=>(o("loose invalid filter",q,this.options),!!q.match(a[u.COMPARATORLOOSE])))),o("range list",P);const z=new Map,W=P.map(q=>new i(q,this.options));for(const q of W){if(p(q))return[q];z.set(q.value,q)}z.size>1&&z.has("")&&z.delete("");const j=[...z.values()];return n.set(L,j),j}intersects(M,F){if(!(M instanceof e))throw new TypeError("a Range is required");return this.set.some(L=>g(L,F)&&M.set.some(B=>g(B,F)&&L.every(U=>B.every(H=>U.intersects(H,F)))))}test(M){if(!M)return!1;if(typeof M=="string")try{M=new s(M,this.options)}catch{return!1}for(let F=0;F<this.set.length;F++)if(O(this.set[F],M,this.options))return!0;return!1}}G4=e;const t=A8t,n=new t({max:1e3}),r=_X,i=pBt(),o=nM,s=xX,{safeRe:a,t:u,comparatorTrimReplace:l,tildeTrimReplace:c,caretTrimReplace:f}=EX,{FLAG_INCLUDE_PRERELEASE:d,FLAG_LOOSE:h}=wX,p=D=>D.value==="<0.0.0-0",m=D=>D.value==="",g=(D,M)=>{let F=!0;const L=D.slice();let B=L.pop();for(;F&&L.length;)F=L.every(U=>B.intersects(U,M)),B=L.pop();return F},y=(D,M)=>(o("comp",D,M),D=E(D,M),o("caret",D),D=_(D,M),o("tildes",D),D=T(D,M),o("xrange",D),D=A(D,M),o("stars",D),D),v=D=>!D||D.toLowerCase()==="x"||D==="*",_=(D,M)=>D.trim().split(/\s+/).map(F=>w(F,M)).join(" "),w=(D,M)=>{const F=M.loose?a[u.TILDELOOSE]:a[u.TILDE];return D.replace(F,(L,B,U,H,P)=>{o("tilde",D,L,B,U,H,P);let z;return v(B)?z="":v(U)?z=`>=${B}.0.0 <${+B+1}.0.0-0`:v(H)?z=`>=${B}.${U}.0 <${B}.${+U+1}.0-0`:P?(o("replaceTilde pr",P),z=`>=${B}.${U}.${H}-${P} <${B}.${+U+1}.0-0`):z=`>=${B}.${U}.${H} <${B}.${+U+1}.0-0`,o("tilde return",z),z})},E=(D,M)=>D.trim().split(/\s+/).map(F=>S(F,M)).join(" "),S=(D,M)=>{o("caret",D,M);const F=M.loose?a[u.CARETLOOSE]:a[u.CARET],L=M.includePrerelease?"-0":"";return D.replace(F,(B,U,H,P,z)=>{o("caret",D,B,U,H,P,z);let W;return v(U)?W="":v(H)?W=`>=${U}.0.0${L} <${+U+1}.0.0-0`:v(P)?U==="0"?W=`>=${U}.${H}.0${L} <${U}.${+H+1}.0-0`:W=`>=${U}.${H}.0${L} <${+U+1}.0.0-0`:z?(o("replaceCaret pr",z),U==="0"?H==="0"?W=`>=${U}.${H}.${P}-${z} <${U}.${H}.${+P+1}-0`:W=`>=${U}.${H}.${P}-${z} <${U}.${+H+1}.0-0`:W=`>=${U}.${H}.${P}-${z} <${+U+1}.0.0-0`):(o("no pr"),U==="0"?H==="0"?W=`>=${U}.${H}.${P}${L} <${U}.${H}.${+P+1}-0`:W=`>=${U}.${H}.${P}${L} <${U}.${+H+1}.0-0`:W=`>=${U}.${H}.${P} <${+U+1}.0.0-0`),o("caret return",W),W})},T=(D,M)=>(o("replaceXRanges",D,M),D.split(/\s+/).map(F=>C(F,M)).join(" ")),C=(D,M)=>{D=D.trim();const F=M.loose?a[u.XRANGELOOSE]:a[u.XRANGE];return D.replace(F,(L,B,U,H,P,z)=>{o("xRange",D,L,B,U,H,P,z);const W=v(U),j=W||v(H),q=j||v(P),G=q;return B==="="&&G&&(B=""),z=M.includePrerelease?"-0":"",W?B===">"||B==="<"?L="<0.0.0-0":L="*":B&&G?(j&&(H=0),P=0,B===">"?(B=">=",j?(U=+U+1,H=0,P=0):(H=+H+1,P=0)):B==="<="&&(B="<",j?U=+U+1:H=+H+1),B==="<"&&(z="-0"),L=`${B+U}.${H}.${P}${z}`):j?L=`>=${U}.0.0${z} <${+U+1}.0.0-0`:q&&(L=`>=${U}.${H}.0${z} <${U}.${+H+1}.0-0`),o("xRange return",L),L})},A=(D,M)=>(o("replaceStars",D,M),D.trim().replace(a[u.STAR],"")),R=(D,M)=>(o("replaceGTE0",D,M),D.trim().replace(a[M.includePrerelease?u.GTE0PRE:u.GTE0],"")),N=D=>(M,F,L,B,U,H,P,z,W,j,q,G,te)=>(v(L)?F="":v(B)?F=`>=${L}.0.0${D?"-0":""}`:v(U)?F=`>=${L}.${B}.0${D?"-0":""}`:H?F=`>=${F}`:F=`>=${F}${D?"-0":""}`,v(W)?z="":v(j)?z=`<${+W+1}.0.0-0`:v(q)?z=`<${W}.${+j+1}.0-0`:G?z=`<=${W}.${j}.${q}-${G}`:D?z=`<${W}.${j}.${+q+1}-0`:z=`<=${z}`,`${F} ${z}`.trim()),O=(D,M,F)=>{for(let L=0;L<D.length;L++)if(!D[L].test(M))return!1;if(M.prerelease.length&&!F.includePrerelease){for(let L=0;L<D.length;L++)if(o(D[L].semver),D[L].semver!==i.ANY&&D[L].semver.prerelease.length>0){const B=D[L].semver;if(B.major===M.major&&B.minor===M.minor&&B.patch===M.patch)return!0}return!1}return!0};return G4}const mBt=bRe(),gBt=(e,t,n)=>{try{t=new mBt(t,n)}catch{return!1}return t.test(e)};var yBt=gBt,_Re=v8t(yBt);function vBt(e,t,n){const r=e.open(t),i=1e4,o=250,{origin:s}=new URL(t);let a=~~(i/o);function u(c){c.source===r&&(a=0,e.removeEventListener("message",u,!1))}e.addEventListener("message",u,!1);function l(){a<=0||(r.postMessage(n,s),setTimeout(l,o),a-=1)}setTimeout(l,o)}var bBt=`.vega-embed {
  position: relative;
  display: inline-block;
  box-sizing: border-box;
}
.vega-embed.has-actions {
  padding-right: 38px;
}
.vega-embed details:not([open]) > :not(summary) {
  display: none !important;
}
.vega-embed summary {
  list-style: none;
  position: absolute;
  top: 0;
  right: 0;
  padding: 6px;
  z-index: 1000;
  background: white;
  box-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1);
  color: #1b1e23;
  border: 1px solid #aaa;
  border-radius: 999px;
  opacity: 0.2;
  transition: opacity 0.4s ease-in;
  cursor: pointer;
  line-height: 0px;
}
.vega-embed summary::-webkit-details-marker {
  display: none;
}
.vega-embed summary:active {
  box-shadow: #aaa 0px 0px 0px 1px inset;
}
.vega-embed summary svg {
  width: 14px;
  height: 14px;
}
.vega-embed details[open] summary {
  opacity: 0.7;
}
.vega-embed:hover summary, .vega-embed:focus-within summary {
  opacity: 1 !important;
  transition: opacity 0.2s ease;
}
.vega-embed .vega-actions {
  position: absolute;
  z-index: 1001;
  top: 35px;
  right: -9px;
  display: flex;
  flex-direction: column;
  padding-bottom: 8px;
  padding-top: 8px;
  border-radius: 4px;
  box-shadow: 0 2px 8px 0 rgba(0, 0, 0, 0.2);
  border: 1px solid #d9d9d9;
  background: white;
  animation-duration: 0.15s;
  animation-name: scale-in;
  animation-timing-function: cubic-bezier(0.2, 0, 0.13, 1.5);
  text-align: left;
}
.vega-embed .vega-actions a {
  padding: 8px 16px;
  font-family: sans-serif;
  font-size: 14px;
  font-weight: 600;
  white-space: nowrap;
  color: #434a56;
  text-decoration: none;
}
.vega-embed .vega-actions a:hover, .vega-embed .vega-actions a:focus {
  background-color: #f7f7f9;
  color: black;
}
.vega-embed .vega-actions::before, .vega-embed .vega-actions::after {
  content: "";
  display: inline-block;
  position: absolute;
}
.vega-embed .vega-actions::before {
  left: auto;
  right: 14px;
  top: -16px;
  border: 8px solid rgba(0, 0, 0, 0);
  border-bottom-color: #d9d9d9;
}
.vega-embed .vega-actions::after {
  left: auto;
  right: 15px;
  top: -14px;
  border: 7px solid rgba(0, 0, 0, 0);
  border-bottom-color: #fff;
}
.vega-embed .chart-wrapper.fit-x {
  width: 100%;
}
.vega-embed .chart-wrapper.fit-y {
  height: 100%;
}

.vega-embed-wrapper {
  max-width: 100%;
  overflow: auto;
  padding-right: 14px;
}

@keyframes scale-in {
  from {
    opacity: 0;
    transform: scale(0.6);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}
`;function wRe(e,...t){for(const n of t)_Bt(e,n);return e}function _Bt(e,t){for(const n of Object.keys(t))X_(e,n,t[n],!0)}const Dl=r$t;let $S=u9t;const gk=typeof window<"u"?window:void 0;var vle;$S===void 0&&((vle=gk==null?void 0:gk.vl)!=null&&vle.compile)&&($S=gk.vl);const wBt={export:{svg:!0,png:!0},source:!0,compiled:!0,editor:!0},EBt={CLICK_TO_VIEW_ACTIONS:"Click to view actions",COMPILED_ACTION:"View Compiled Vega",EDITOR_ACTION:"Open in Vega Editor",PNG_ACTION:"Save as PNG",SOURCE_ACTION:"View Source",SVG_ACTION:"Save as SVG"},nx={vega:"Vega","vega-lite":"Vega-Lite"},zP={vega:Dl.version,"vega-lite":$S?$S.version:"not available"},xBt={vega:e=>e,"vega-lite":(e,t)=>$S.compile(e,{config:t}).spec},TBt=`
<svg viewBox="0 0 16 16" fill="currentColor" stroke="none" stroke-width="1" stroke-linecap="round" stroke-linejoin="round">
  <circle r="2" cy="8" cx="2"></circle>
  <circle r="2" cy="8" cx="8"></circle>
  <circle r="2" cy="8" cx="14"></circle>
</svg>`,SBt="chart-wrapper";function CBt(e){return typeof e=="function"}function cle(e,t,n,r){const i=`<html><head>${t}</head><body><pre><code class="json">`,o=`</code></pre>${n}</body></html>`,s=window.open("");s.document.write(i+e+o),s.document.title=`${nx[r]} JSON Source`}function ABt(e,t){if(e.$schema){const n=dRe(e.$schema);t&&t!==n.library&&console.warn(`The given visualization spec is written in ${nx[n.library]}, but mode argument sets ${nx[t]??t}.`);const r=n.library;return _Re(zP[r],`^${n.version.slice(1)}`)||console.warn(`The input spec uses ${nx[r]} ${n.version}, but the current version of ${nx[r]} is v${zP[r]}.`),r}return"mark"in e||"encoding"in e||"layer"in e||"hconcat"in e||"vconcat"in e||"facet"in e||"repeat"in e?"vega-lite":"marks"in e||"signals"in e||"scales"in e||"axes"in e?"vega":t??"vega"}function ERe(e){return!!(e&&"load"in e)}function fle(e){return ERe(e)?e:Dl.loader(e)}function kBt(e){var n;const t=((n=e.usermeta)==null?void 0:n.embedOptions)??{};return ft(t.defaultStyle)&&(t.defaultStyle=!1),t}async function IBt(e,t,n={}){let r,i;ft(t)?(i=fle(n.loader),r=JSON.parse(await i.load(t))):r=t;const o=kBt(r),s=o.loader;(!i||s)&&(i=fle(n.loader??s));const a=await dle(o,i),u=await dle(n,i),l={...wRe(u,a),config:K_(u.config??{},a.config??{})};return await NBt(e,r,l,i)}async function dle(e,t){const n=ft(e.config)?JSON.parse(await t.load(e.config)):e.config??{},r=ft(e.patch)?JSON.parse(await t.load(e.patch)):e.patch;return{...e,...r?{patch:r}:{},...n?{config:n}:{}}}function RBt(e){const t=e.getRootNode?e.getRootNode():document;return t instanceof ShadowRoot?{root:t,rootContainer:t}:{root:document,rootContainer:document.head??document.body}}async function NBt(e,t,n={},r){const i=n.theme?K_(l8t[n.theme],n.config??{}):n.config,o=Km(n.actions)?n.actions:wRe({},wBt,n.actions??{}),s={...EBt,...n.i18n},a=n.renderer??"canvas",u=n.logLevel??Dl.Warn,l=n.downloadFileName??"visualization",c=typeof e=="string"?document.querySelector(e):e;if(!c)throw new Error(`${e} does not exist`);if(n.defaultStyle!==!1){const E="vega-embed-style",{root:S,rootContainer:T}=RBt(c);if(!S.getElementById(E)){const C=document.createElement("style");C.id=E,C.innerHTML=n.defaultStyle===void 0||n.defaultStyle===!0?bBt.toString():n.defaultStyle,T.appendChild(C)}}const f=ABt(t,n.mode);let d=xBt[f](t,i);if(f==="vega-lite"&&d.$schema){const E=dRe(d.$schema);_Re(zP.vega,`^${E.version.slice(1)}`)||console.warn(`The compiled spec uses Vega ${E.version}, but current version is v${zP.vega}.`)}c.classList.add("vega-embed"),o&&c.classList.add("has-actions"),c.innerHTML="";let h=c;if(o){const E=document.createElement("div");E.classList.add(SBt),c.appendChild(E),h=E}const p=n.patch;if(p&&(d=p instanceof Function?p(d):y$(d,p,!0,!1).newDocument),n.formatLocale&&Dl.formatLocale(n.formatLocale),n.timeFormatLocale&&Dl.timeFormatLocale(n.timeFormatLocale),n.expressionFunctions)for(const E in n.expressionFunctions){const S=n.expressionFunctions[E];"fn"in S?Dl.expressionFunction(E,S.fn,S.visitor):S instanceof Function&&Dl.expressionFunction(E,S)}const{ast:m}=n,g=Dl.parse(d,f==="vega-lite"?{}:i,{ast:m}),y=new(n.viewClass||Dl.View)(g,{loader:r,logLevel:u,renderer:a,...m?{expr:Dl.expressionInterpreter??n.expr??h$t}:{}});if(y.addSignalListener("autosize",(E,S)=>{const{type:T}=S;T=="fit-x"?(h.classList.add("fit-x"),h.classList.remove("fit-y")):T=="fit-y"?(h.classList.remove("fit-x"),h.classList.add("fit-y")):T=="fit"?h.classList.add("fit-x","fit-y"):h.classList.remove("fit-x","fit-y")}),n.tooltip!==!1){const{loader:E,tooltip:S}=n,T=E&&!ERe(E)?E==null?void 0:E.baseURL:void 0,C=CBt(S)?S:new y8t({baseURL:T,...S===!0?{}:S}).call;y.tooltip(C)}let{hover:v}=n;if(v===void 0&&(v=f==="vega"),v){const{hoverSet:E,updateSet:S}=typeof v=="boolean"?{}:v;y.hover(E,S)}n&&(n.width!=null&&y.width(n.width),n.height!=null&&y.height(n.height),n.padding!=null&&y.padding(n.padding)),await y.initialize(h,n.bind).runAsync();let _;if(o!==!1){let E=c;if(n.defaultStyle!==!1||n.forceActionsMenu){const T=document.createElement("details");T.title=s.CLICK_TO_VIEW_ACTIONS,c.append(T),E=T;const C=document.createElement("summary");C.innerHTML=TBt,T.append(C),_=A=>{T.contains(A.target)||T.removeAttribute("open")},document.addEventListener("click",_)}const S=document.createElement("div");if(E.append(S),S.classList.add("vega-actions"),o===!0||o.export!==!1){for(const T of["svg","png"])if(o===!0||o.export===!0||o.export[T]){const C=s[`${T.toUpperCase()}_ACTION`],A=document.createElement("a"),R=ht(n.scaleFactor)?n.scaleFactor[T]:n.scaleFactor;A.text=C,A.href="#",A.target="_blank",A.download=`${l}.${T}`,A.addEventListener("mousedown",async function(N){N.preventDefault();const O=await y.toImageURL(T,R);this.href=O}),S.append(A)}}if(o===!0||o.source!==!1){const T=document.createElement("a");T.text=s.SOURCE_ACTION,T.href="#",T.addEventListener("click",function(C){cle(Y6(t),n.sourceHeader??"",n.sourceFooter??"",f),C.preventDefault()}),S.append(T)}if(f==="vega-lite"&&(o===!0||o.compiled!==!1)){const T=document.createElement("a");T.text=s.COMPILED_ACTION,T.href="#",T.addEventListener("click",function(C){cle(Y6(d),n.sourceHeader??"",n.sourceFooter??"","vega"),C.preventDefault()}),S.append(T)}if(o===!0||o.editor!==!1){const T=n.editorUrl??"https://vega.github.io/editor/",C=document.createElement("a");C.text=s.EDITOR_ACTION,C.href="#",C.addEventListener("click",function(A){vBt(window,T,{config:i,mode:f,renderer:a,spec:Y6(t)}),A.preventDefault()}),S.append(C)}}function w(){_&&document.removeEventListener("click",_),y.finalize()}return{view:y,spec:t,vgSpec:d,finalize:w,embedOptions:n}}function PBt(e){return!!e&&{}.toString.call(e)==="[object Function]"}function DBt(e,t,n){n&&(PBt(n)?n(e.data(t)):e.change(t,Dl.changeset().remove(()=>!0).insert(n)))}function OBt(e,t){Object.keys(t).forEach(n=>{DBt(e,n,t[n])})}function xRe(e){const t=new Set;return e.forEach(n=>{Object.keys(n).forEach(r=>{t.add(r)})}),t}const TRe=()=>{};function Y4(e,t){const n=Object.keys(t);return n.forEach(r=>{try{e.addSignalListener(r,t[r])}catch(i){console.warn("Cannot add invalid signal listener.",i)}}),n.length>0}function $Bt(e,t){if(e===t)return!1;const n={width:!1,height:!1,isExpensive:!1},r=xRe([e,t]);return r.has("width")&&(!("width"in e)||!("width"in t)||e.width!==t.width)&&("width"in e&&typeof e.width=="number"?n.width=e.width:n.isExpensive=!0),r.has("height")&&(!("height"in e)||!("height"in t)||e.height!==t.height)&&("height"in e&&typeof e.height=="number"?n.height=e.height:n.isExpensive=!0),r.delete("width"),r.delete("height"),[...r].some(i=>!(i in e)||!(i in t)||!Fk(e[i],t[i]))&&(n.isExpensive=!0),n.width!==!1||n.height!==!1||n.isExpensive?n:!1}function hle(e,t){const n=Object.keys(t);return n.forEach(r=>{try{e.removeSignalListener(r,t[r])}catch(i){console.warn("Cannot remove invalid signal listener.",i)}}),n.length>0}function K4(e){const{spec:t,width:n,height:r}=e;return typeof n<"u"&&typeof r<"u"?{...t,width:n,height:r}:typeof n<"u"?{...t,width:n}:typeof r<"u"?{...t,height:r}:t}function rx(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class SRe extends Yn.PureComponent{constructor(){super(...arguments),rx(this,"containerRef",Yn.createRef()),rx(this,"resultPromise",void 0),rx(this,"handleError",t=>{const{onError:n=TRe}=this.props;n(t,this.containerRef.current),console.warn(t)}),rx(this,"modifyView",t=>{this.resultPromise&&this.resultPromise.then(n=>(n&&t(n.view),!0)).catch(this.handleError)})}componentDidMount(){this.createView()}componentDidUpdate(t){const n=xRe([this.props,t]);if(n.delete("className"),n.delete("signalListeners"),n.delete("spec"),n.delete("style"),n.delete("width"),n.delete("height"),Array.from(n).some(r=>this.props[r]!==t[r]))this.clearView(),this.createView();else{const r=$Bt(K4(this.props),K4(t)),{signalListeners:i}=this.props,{signalListeners:o}=t;if(r)if(r.isExpensive)this.clearView(),this.createView();else{const s=!I9(i,o);this.modifyView(a=>{r.width!==!1&&a.width(r.width),r.height!==!1&&a.height(r.height),s&&(o&&hle(a,o),i&&Y4(a,i)),a.run()})}else I9(i,o)||this.modifyView(s=>{o&&hle(s,o),i&&Y4(s,i),s.run()})}}componentWillUnmount(){this.clearView()}createView(){const{spec:t,onNewView:n,signalListeners:r={},width:i,height:o,...s}=this.props;if(this.containerRef.current){const a=K4(this.props);this.resultPromise=IBt(this.containerRef.current,a,s).then(u=>{if(u){const{view:l}=u;Y4(l,r)&&l.run()}return u}).catch(this.handleError),n&&this.modifyView(n)}}clearView(){return this.resultPromise&&this.resultPromise.then(t=>{t&&t.finalize()}).catch(this.handleError),this.resultPromise=void 0,this}render(){const{className:t,style:n}=this.props;return Yn.createElement("div",{ref:this.containerRef,className:t,style:n})}}rx(SRe,"propTypes",{className:tZ.string,onError:tZ.func});function iB(){return iB=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},iB.apply(this,arguments)}function oB(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const MBt={};class CRe extends Yn.PureComponent{constructor(){super(...arguments),oB(this,"vegaEmbed",Yn.createRef()),oB(this,"handleNewView",t=>{this.update();const{onNewView:n=TRe}=this.props;n(t)})}componentDidMount(){this.update()}componentDidUpdate(t){I9(this.props.data,t.data)||this.update()}update(){const{data:t}=this.props;this.vegaEmbed.current&&t&&Object.keys(t).length>0&&this.vegaEmbed.current.modifyView(n=>{OBt(n,t),n.resize().run()})}render(){const{data:t,...n}=this.props;return Yn.createElement(SRe,iB({ref:this.vegaEmbed},n,{onNewView:this.handleNewView}))}}oB(CRe,"defaultProps",{data:MBt});function sB(){return sB=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},sB.apply(this,arguments)}function aB(e){return Yn.createElement(CRe,sB({},e,{mode:"vega-lite"}))}function LBt({response:e,participantData:t,trialId:n,trialConfig:r}){const[i,{toggle:o}]=lD(!0),[s,a]=a7(),u=k.useMemo(()=>e.type==="metadata"?[]:t.map(d=>Object.entries(d.answers).filter(([h])=>h.slice(0,h.lastIndexOf("_"))===n)).map(d=>d.map(([,h])=>h.answer)).flat(),[t,e.type,n]),l=k.useMemo(()=>{var d;return e.type==="metadata"||(d=r.correctAnswer)==null?void 0:d.find(h=>h.id===e.id)},[e.id,e.type,r.correctAnswer]),c=k.useMemo(()=>{const f={height:"container",width:"container"};if(e.type==="shortText"||e.type==="longText")return{};if(e.type==="metadata"){const h=t.map(m=>Object.entries(m.answers).filter(([g])=>g.slice(0,g.lastIndexOf("_"))===n)).map(m=>m.map(([g,y])=>(y.endTime-y.startTime)/1e3)).flat();return{...f,data:{values:h},mark:"bar",encoding:{x:{field:"data",bin:!0,type:"quantitative",title:"Time (s)"},y:{aggregate:"count",type:"quantitative",title:"Count"}}}}const d={params:[{name:"correctAnswer",value:l==null?void 0:l.answer},{name:"variable",value:e.id}],transform:[{calculate:"datum[variable] === correctAnswer ? 'correct' : 'incorrect'",as:"result"},{calculate:"if(datum.result === 'correct', 0, if(datum.result === 'incorrect', 1, 2))",as:"order"}],color:{field:"result",type:"nominal",scale:{domain:["correct","incorrect"],range:["#69DB7C","#ADB5BD"]}},order:{field:"order"}};if(e.type==="numerical"||e.type==="slider"||e.type==="likert"){let h,p;return e.type==="numerical"&&(h=e.min,p=e.max),e.type==="slider"&&(h=Math.min(...e.options.map(g=>g.value)),p=Math.max(...e.options.map(g=>g.value))),e.type==="likert"&&(h=1,p=e.numItems),{...f,data:{values:u},mark:"bar",params:l!==void 0?d.params:void 0,transform:[{bin:e.type==="likert"?{step:1}:{maxbins:10},field:e.id,as:"bins"},...l!==void 0?d.transform:[]],encoding:{x:{field:"bins",scale:h!==void 0&&p!==void 0?{domain:[h,p]}:void 0,type:"quantitative",title:"Answer"},x2:{field:"bins_end"},y:{aggregate:"count",type:"quantitative",title:"Count",stack:!0},color:l!==void 0?d.color:void 0,order:l!==void 0?d.order:void 0}}}if(e.type==="radio"||e.type==="dropdown"||e.type==="checkbox")return{...f,data:{values:u},mark:"bar",params:l!==void 0?d.params:void 0,transform:l!==void 0?d.transform:void 0,encoding:{x:{field:e.id,type:"ordinal",title:"Answer"},y:{aggregate:"count",type:"quantitative",title:"Count"},color:l!==void 0?d.color:void 0}}},[t,u,e.id,e.max,e.min,e.numItems,e.options,e.type,n,l]);return b.jsxs(_y,{p:"lg",withBorder:!0,ref:s,children:[b.jsxs(kt,{direction:"row",justify:"space-between",onClick:o,children:[b.jsxs(kt,{align:"center",children:[e.type==="metadata"&&b.jsx(e8e,{size:20}),e.type==="numerical"&&b.jsx(l8e,{size:20}),(e.type==="shortText"||e.type==="longText")&&b.jsx(K9e,{size:20}),e.type==="likert"&&b.jsx(r8e,{size:20}),e.type==="dropdown"&&b.jsx(g8e,{size:20}),e.type==="slider"&&b.jsx(H9e,{size:20}),e.type==="radio"&&b.jsx(d8e,{size:20}),e.type==="checkbox"&&b.jsx(y8e,{size:20}),e.type==="iframe"&&b.jsx(s8e,{size:20}),b.jsx(kr,{order:5,ml:4,children:e.id})]}),b.jsx(Z9e,{style:{rotate:i?"180deg":"none",transition:"rotate 200ms"}})]}),b.jsxs(fD,{in:i,mah:400,children:[b.jsx(he,{style:{top:0,position:"sticky",backgroundColor:"white",zIndex:2},py:"md",children:b.jsx(ub,{})}),b.jsxs(FU,{cols:2,h:360,children:[b.jsx(Qd,{mih:200,children:e.type!=="metadata"&&e.type!=="shortText"&&e.type!=="longText"&&e.type!=="iframe"?b.jsx(aB,{spec:c,actions:!1,height:270,width:a.width/2-60-(l===void 0?0:60),padding:0,style:{justifySelf:"center"},renderer:"svg"}):b.jsxs(kt,{direction:"column",gap:"xs",style:{overflowX:"clip"},children:[e.type==="metadata"&&b.jsx(hx,{block:!0,children:`${JSON.stringify(r,null,2)}`}),e.type!=="metadata"&&b.jsxs(b.Fragment,{children:[b.jsx(je,{fw:700,children:"Response Values: "}),u.map((f,d)=>b.jsx(kt,{align:"center",gap:"xs",children:b.jsx(je,{children:f[e.id]})},d))]})]})}),b.jsx(Qd,{mih:200,children:e.type==="metadata"?b.jsx(aB,{spec:c,actions:!1,width:a.width/2-60,height:270,padding:0,style:{justifySelf:"center"}}):b.jsxs(b.Fragment,{children:[b.jsx(je,{fw:700,children:"Response Specification: "}),b.jsx(hx,{block:!0,children:JSON.stringify(e,null,2)}),b.jsx("br",{}),l&&b.jsxs(b.Fragment,{children:[b.jsx(je,{fw:700,children:"Correct Answer: "}),b.jsx(hx,{block:!0,children:JSON.stringify(l,null,2)})]})]})})]})]})]})}function FBt({participantData:e,studyConfig:t,trialId:n}){const r=n&&n!=="end"&&mbe(t.components[n],t),i=k.useMemo(()=>[{id:"Config and Timing",type:"metadata"},...r?r.response:[]],[r]);return r?b.jsx(kt,{w:"100%",direction:"column",gap:"xs",children:i.map(o=>b.jsx(LBt,{response:o,participantData:e,trialId:n,trialConfig:r},o.id))}):b.jsx(kt,{justify:"center",align:"center",pt:"lg",pb:"md",w:"100%",children:b.jsx(je,{children:n!=="end"?"No trial selected":"The end component has no data."})})}function jBt({studyConfig:e,inprogress:t,completed:n,rejected:r}){const[i,o]=k.useState([...n]),s=k.useCallback(l=>{const c=[];l.includes("completed")&&c.push(...n),l.includes("inprogress")&&c.push(...t),l.includes("rejected")&&c.push(...r),o(c)},[n,t,r]),a=k.useMemo(()=>{let l=Fp(e.sequence);return l=Rz(l,"root"),l.components.push("end"),l},[e.sequence]),{trialId:u}=eh();return b.jsxs(_y,{shadow:"sm",p:"md",withBorder:!0,children:[b.jsx(kt,{direction:"row",justify:"space-between",children:b.jsx(ru.Group,{defaultValue:["completed"],onChange:s,mb:"xs",mt:8,ml:"xs",children:b.jsxs(qs,{children:[b.jsx(ru,{value:"completed",label:"Completed"}),b.jsx(ru,{value:"inprogress",label:"In Progress"}),b.jsx(ru,{value:"rejected",label:"Rejected"})]})})}),b.jsx(ub,{my:"xs"}),i.length===0?b.jsx(kt,{justify:"center",align:"center",pt:"lg",pb:"md",children:b.jsx(je,{children:"No data available."})}):b.jsxs(kt,{direction:"row",children:[b.jsx(he,{w:340,children:b.jsx(NN,{configSequence:a,participantSequence:a,fullSequence:a,participantView:!1,studyConfig:e,analysisNavigation:!0})}),b.jsx(ub,{orientation:"vertical",mx:"md"}),b.jsx(FBt,{participantData:i,studyConfig:e,trialId:u})]})]})}function BBt({globalConfig:e}){const{studyId:t}=eh(),[n,r]=k.useState([]),[i,o]=k.useState(void 0),[s,a]=k.useState(!1),{storageEngine:u}=$i(),l=$f(),{tab:c}=eh(),{user:f}=Uy(),d=k.useCallback(async()=>{if(a(!0),t){const g=await qO(t,e);if(!g||!u)return;await u.initializeStudyDb(t,g);const y=await u.getAllParticipantsData();r(y),o(g),a(!1)}},[e,u,t]);k.useEffect(()=>{d()},[e,u,t,d]);const[h,p,m]=k.useMemo(()=>{const g=n.filter(_=>!_.rejected&&_.completed),y=n.filter(_=>!_.rejected&&!_.completed),v=n.filter(_=>_.rejected);return[g,y,v]},[n]);return b.jsxs(b.Fragment,{children:[b.jsx(qx,{studyIds:e.configsList}),b.jsx(Or.Main,{children:b.jsxs(sl,{fluid:!0,style:{height:"100%",position:"relative"},children:[b.jsx(gu,{visible:s}),b.jsxs(kt,{direction:"row",align:"center",children:[b.jsx(kr,{order:5,children:t}),b.jsx(cEe,{completed:h.length,inProgress:p.length,rejected:m.length})]}),b.jsx(cu,{h:"xs"}),b.jsxs(gi,{variant:"outline",value:c,onChange:g=>l(`/analysis/stats/${t}/${g}`),style:{height:"100%"},children:[b.jsxs(gi.List,{children:[b.jsx(gi.Tab,{value:"table",leftSection:b.jsx(v8e,{size:16}),children:"Table View"}),b.jsx(gi.Tab,{value:"stats",leftSection:b.jsx(Q9e,{size:16}),children:"Trial Stats"}),b.jsx(zr,{label:"Coming soon",position:"bottom",children:b.jsx(gi.Tab,{value:"replay",leftSection:b.jsx(f8e,{size:16}),disabled:!0,children:"Participant Replay"})}),b.jsx(gi.Tab,{value:"manage",leftSection:b.jsx(Dpe,{size:16}),disabled:!f.isAdmin,children:"Manage"})]}),b.jsx(gi.Panel,{value:"table",pt:"xs",children:i&&b.jsx(Kbt,{completed:h,inProgress:p,rejected:m,studyConfig:i,refresh:d})}),b.jsx(gi.Panel,{value:"stats",pt:"xs",children:i&&b.jsx(jBt,{studyConfig:i,completed:h,inprogress:p,rejected:m})}),b.jsx(gi.Panel,{value:"replay",pt:"xs",children:"Replay Tab Content"}),b.jsx(gi.Panel,{value:"manage",pt:"xs",children:t&&f.isAdmin?b.jsx(r_t,{studyId:t,refresh:d}):b.jsx(sl,{mt:20,children:b.jsx(h_,{title:"Unauthorized Access",variant:"light",color:"red",icon:b.jsx(Npe,{}),children:"You are not authorized to manage the data for this study."})})})]})]})})]})}function ple({children:e,paramToCheck:t,paramCallback:n}){const{user:r,verifyAdminStatus:i,logout:o}=Uy(),{storageEngine:s}=$i(),[a,u]=k.useState(!1),l=eh();return k.useEffect(()=>{(async()=>{if(a===!1)if(t&&n&&l[t]){const f=await n(l[t]);f&&u(f)}else u(!0);if(a)try{r&&await i(r)||o()}catch(f){o(),console.warn(f)}})()},[r.isAdmin,a]),r.determiningStatus||!s?b.jsx(gu,{visible:r.determiningStatus||!(s!=null&&s.getEngine())}):a&&!r.isAdmin&&!r.determiningStatus?b.jsx(ez,{to:"/login"}):b.jsx(b.Fragment,{children:e})}async function ARe(e,t){if(e instanceof qu){t(!0);const n=new wd,r=jN();try{await jmt(r,n,s_e)}catch(i){YN({title:"Error",message:i.message,color:"red"})}finally{t(!1)}return r.currentUser}return null}function UBt(){const{user:e}=Uy(),[t,n]=k.useState(!1),{storageEngine:r}=$i();return k.useEffect(()=>{!e.determiningStatus&&!e.isAdmin&&e.adminVerification&&YN({title:"Unauthorized",message:"You are not authorized to use this application.",color:"red"})},[e.adminVerification]),!e.determiningStatus&&e.isAdmin?b.jsx(ez,{to:"/"}):b.jsx(sl,{children:b.jsx(xy,{padding:"lg",children:b.jsxs(kt,{align:"center",direction:"column",justify:"center",children:[b.jsx(Fm,{maw:200,mt:50,mb:100,src:`${Ra}revisitAssets/revisitLogoSquare.svg`,alt:"Revisit Logo"}),b.jsxs(b.Fragment,{children:[b.jsx(je,{mb:20,children:"To access admin settings, please sign in using your Google account."}),b.jsx(on,{onClick:()=>ARe(r,n),leftSection:b.jsx(b8e,{}),variant:"filled",children:"Sign In With Google"})]}),b.jsx(gu,{visible:t})]})})})}var kRe={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(so,function(){var n=1e3,r=6e4,i=36e5,o="millisecond",s="second",a="minute",u="hour",l="day",c="week",f="month",d="quarter",h="year",p="date",m="Invalid Date",g=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,y=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,v={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(M){var F=["th","st","nd","rd"],L=M%100;return"["+M+(F[(L-20)%10]||F[L]||F[0])+"]"}},_=function(M,F,L){var B=String(M);return!B||B.length>=F?M:""+Array(F+1-B.length).join(L)+M},w={s:_,z:function(M){var F=-M.utcOffset(),L=Math.abs(F),B=Math.floor(L/60),U=L%60;return(F<=0?"+":"-")+_(B,2,"0")+":"+_(U,2,"0")},m:function M(F,L){if(F.date()<L.date())return-M(L,F);var B=12*(L.year()-F.year())+(L.month()-F.month()),U=F.clone().add(B,f),H=L-U<0,P=F.clone().add(B+(H?-1:1),f);return+(-(B+(L-U)/(H?U-P:P-U))||0)},a:function(M){return M<0?Math.ceil(M)||0:Math.floor(M)},p:function(M){return{M:f,y:h,w:c,d:l,D:p,h:u,m:a,s,ms:o,Q:d}[M]||String(M||"").toLowerCase().replace(/s$/,"")},u:function(M){return M===void 0}},E="en",S={};S[E]=v;var T="$isDayjsObject",C=function(M){return M instanceof O||!(!M||!M[T])},A=function M(F,L,B){var U;if(!F)return E;if(typeof F=="string"){var H=F.toLowerCase();S[H]&&(U=H),L&&(S[H]=L,U=H);var P=F.split("-");if(!U&&P.length>1)return M(P[0])}else{var z=F.name;S[z]=F,U=z}return!B&&U&&(E=U),U||!B&&E},R=function(M,F){if(C(M))return M.clone();var L=typeof F=="object"?F:{};return L.date=M,L.args=arguments,new O(L)},N=w;N.l=A,N.i=C,N.w=function(M,F){return R(M,{locale:F.$L,utc:F.$u,x:F.$x,$offset:F.$offset})};var O=function(){function M(L){this.$L=A(L.locale,null,!0),this.parse(L),this.$x=this.$x||L.x||{},this[T]=!0}var F=M.prototype;return F.parse=function(L){this.$d=function(B){var U=B.date,H=B.utc;if(U===null)return new Date(NaN);if(N.u(U))return new Date;if(U instanceof Date)return new Date(U);if(typeof U=="string"&&!/Z$/i.test(U)){var P=U.match(g);if(P){var z=P[2]-1||0,W=(P[7]||"0").substring(0,3);return H?new Date(Date.UTC(P[1],z,P[3]||1,P[4]||0,P[5]||0,P[6]||0,W)):new Date(P[1],z,P[3]||1,P[4]||0,P[5]||0,P[6]||0,W)}}return new Date(U)}(L),this.init()},F.init=function(){var L=this.$d;this.$y=L.getFullYear(),this.$M=L.getMonth(),this.$D=L.getDate(),this.$W=L.getDay(),this.$H=L.getHours(),this.$m=L.getMinutes(),this.$s=L.getSeconds(),this.$ms=L.getMilliseconds()},F.$utils=function(){return N},F.isValid=function(){return this.$d.toString()!==m},F.isSame=function(L,B){var U=R(L);return this.startOf(B)<=U&&U<=this.endOf(B)},F.isAfter=function(L,B){return R(L)<this.startOf(B)},F.isBefore=function(L,B){return this.endOf(B)<R(L)},F.$g=function(L,B,U){return N.u(L)?this[B]:this.set(U,L)},F.unix=function(){return Math.floor(this.valueOf()/1e3)},F.valueOf=function(){return this.$d.getTime()},F.startOf=function(L,B){var U=this,H=!!N.u(B)||B,P=N.p(L),z=function(le,me){var Se=N.w(U.$u?Date.UTC(U.$y,me,le):new Date(U.$y,me,le),U);return H?Se:Se.endOf(l)},W=function(le,me){return N.w(U.toDate()[le].apply(U.toDate("s"),(H?[0,0,0,0]:[23,59,59,999]).slice(me)),U)},j=this.$W,q=this.$M,G=this.$D,te="set"+(this.$u?"UTC":"");switch(P){case h:return H?z(1,0):z(31,11);case f:return H?z(1,q):z(0,q+1);case c:var pe=this.$locale().weekStart||0,be=(j<pe?j+7:j)-pe;return z(H?G-be:G+(6-be),q);case l:case p:return W(te+"Hours",0);case u:return W(te+"Minutes",1);case a:return W(te+"Seconds",2);case s:return W(te+"Milliseconds",3);default:return this.clone()}},F.endOf=function(L){return this.startOf(L,!1)},F.$set=function(L,B){var U,H=N.p(L),P="set"+(this.$u?"UTC":""),z=(U={},U[l]=P+"Date",U[p]=P+"Date",U[f]=P+"Month",U[h]=P+"FullYear",U[u]=P+"Hours",U[a]=P+"Minutes",U[s]=P+"Seconds",U[o]=P+"Milliseconds",U)[H],W=H===l?this.$D+(B-this.$W):B;if(H===f||H===h){var j=this.clone().set(p,1);j.$d[z](W),j.init(),this.$d=j.set(p,Math.min(this.$D,j.daysInMonth())).$d}else z&&this.$d[z](W);return this.init(),this},F.set=function(L,B){return this.clone().$set(L,B)},F.get=function(L){return this[N.p(L)]()},F.add=function(L,B){var U,H=this;L=Number(L);var P=N.p(B),z=function(q){var G=R(H);return N.w(G.date(G.date()+Math.round(q*L)),H)};if(P===f)return this.set(f,this.$M+L);if(P===h)return this.set(h,this.$y+L);if(P===l)return z(1);if(P===c)return z(7);var W=(U={},U[a]=r,U[u]=i,U[s]=n,U)[P]||1,j=this.$d.getTime()+L*W;return N.w(j,this)},F.subtract=function(L,B){return this.add(-1*L,B)},F.format=function(L){var B=this,U=this.$locale();if(!this.isValid())return U.invalidDate||m;var H=L||"YYYY-MM-DDTHH:mm:ssZ",P=N.z(this),z=this.$H,W=this.$m,j=this.$M,q=U.weekdays,G=U.months,te=U.meridiem,pe=function(me,Se,ge,tt){return me&&(me[Se]||me(B,H))||ge[Se].slice(0,tt)},be=function(me){return N.s(z%12||12,me,"0")},le=te||function(me,Se,ge){var tt=me<12?"AM":"PM";return ge?tt.toLowerCase():tt};return H.replace(y,function(me,Se){return Se||function(ge){switch(ge){case"YY":return String(B.$y).slice(-2);case"YYYY":return N.s(B.$y,4,"0");case"M":return j+1;case"MM":return N.s(j+1,2,"0");case"MMM":return pe(U.monthsShort,j,G,3);case"MMMM":return pe(G,j);case"D":return B.$D;case"DD":return N.s(B.$D,2,"0");case"d":return String(B.$W);case"dd":return pe(U.weekdaysMin,B.$W,q,2);case"ddd":return pe(U.weekdaysShort,B.$W,q,3);case"dddd":return q[B.$W];case"H":return String(z);case"HH":return N.s(z,2,"0");case"h":return be(1);case"hh":return be(2);case"a":return le(z,W,!0);case"A":return le(z,W,!1);case"m":return String(W);case"mm":return N.s(W,2,"0");case"s":return String(B.$s);case"ss":return N.s(B.$s,2,"0");case"SSS":return N.s(B.$ms,3,"0");case"Z":return P}return null}(me)||P.replace(":","")})},F.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},F.diff=function(L,B,U){var H,P=this,z=N.p(B),W=R(L),j=(W.utcOffset()-this.utcOffset())*r,q=this-W,G=function(){return N.m(P,W)};switch(z){case h:H=G()/12;break;case f:H=G();break;case d:H=G()/3;break;case c:H=(q-j)/6048e5;break;case l:H=(q-j)/864e5;break;case u:H=q/i;break;case a:H=q/r;break;case s:H=q/n;break;default:H=q}return U?H:N.a(H)},F.daysInMonth=function(){return this.endOf(f).$D},F.$locale=function(){return S[this.$L]},F.locale=function(L,B){if(!L)return this.$L;var U=this.clone(),H=A(L,B,!0);return H&&(U.$L=H),U},F.clone=function(){return N.w(this.$d,this)},F.toDate=function(){return new Date(this.valueOf())},F.toJSON=function(){return this.isValid()?this.toISOString():null},F.toISOString=function(){return this.$d.toISOString()},F.toString=function(){return this.$d.toUTCString()},M}(),D=O.prototype;return R.prototype=D,[["$ms",o],["$s",s],["$m",a],["$H",u],["$W",l],["$M",f],["$y",h],["$D",p]].forEach(function(M){D[M[1]]=function(F){return this.$g(F,M[0],M[1])}}),R.extend=function(M,F){return M.$i||(M(F,O,R),M.$i=!0),R},R.locale=A,R.isDayjs=C,R.unix=function(M){return R(1e3*M)},R.en=S[E],R.Ls=S,R.p={},R})})(kRe);var zBt=kRe.exports;const xt=ku(zBt);function VBt({type:e,date:t,locale:n,format:r,labelSeparator:i}){const o=s=>xt(s).locale(n).format(r);return e==="default"?t===null?"":o(t):e==="multiple"?t.map(o).join(", "):e==="range"&&Array.isArray(t)?t[0]&&t[1]?`${o(t[0])} ${i} ${o(t[1])}`:t[0]?`${o(t[0])} ${i} `:"":""}function HBt({formatter:e,...t}){return(e||VBt)(t)}function qBt({direction:e,levelIndex:t,rowIndex:n,cellIndex:r,size:i}){switch(e){case"up":return t===0&&n===0?null:n===0?{levelIndex:t-1,rowIndex:r<=i[t-1][i[t-1].length-1]-1?i[t-1].length-1:i[t-1].length-2,cellIndex:r}:{levelIndex:t,rowIndex:n-1,cellIndex:r};case"down":return n===i[t].length-1?{levelIndex:t+1,rowIndex:0,cellIndex:r}:n===i[t].length-2&&r>=i[t][i[t].length-1]?{levelIndex:t+1,rowIndex:0,cellIndex:r}:{levelIndex:t,rowIndex:n+1,cellIndex:r};case"left":return t===0&&n===0&&r===0?null:n===0&&r===0?{levelIndex:t-1,rowIndex:i[t-1].length-1,cellIndex:i[t-1][i[t-1].length-1]-1}:r===0?{levelIndex:t,rowIndex:n-1,cellIndex:i[t][n-1]-1}:{levelIndex:t,rowIndex:n,cellIndex:r-1};case"right":return n===i[t].length-1&&r===i[t][n]-1?{levelIndex:t+1,rowIndex:0,cellIndex:0}:r===i[t][n]-1?{levelIndex:t,rowIndex:n+1,cellIndex:0}:{levelIndex:t,rowIndex:n,cellIndex:r+1};default:return{levelIndex:t,rowIndex:n,cellIndex:r}}}function IRe({controlsRef:e,direction:t,levelIndex:n,rowIndex:r,cellIndex:i,size:o}){var u,l,c;const s=qBt({direction:t,size:o,rowIndex:r,cellIndex:i,levelIndex:n});if(!s)return;const a=(c=(l=(u=e.current)==null?void 0:u[s.levelIndex])==null?void 0:l[s.rowIndex])==null?void 0:c[s.cellIndex];a&&(a.disabled||a.getAttribute("data-hidden")||a.getAttribute("data-outside")?IRe({controlsRef:e,direction:t,levelIndex:s.levelIndex,cellIndex:s.cellIndex,rowIndex:s.rowIndex,size:o}):a.focus())}function WBt(e){switch(e){case"ArrowDown":return"down";case"ArrowUp":return"up";case"ArrowRight":return"right";case"ArrowLeft":return"left";default:return null}}function GBt(e){var t;return(t=e.current)==null?void 0:t.map(n=>n.map(r=>r.length))}function TX({controlsRef:e,levelIndex:t,rowIndex:n,cellIndex:r,event:i}){const o=WBt(i.key);if(o){i.preventDefault();const s=GBt(e);IRe({controlsRef:e,direction:o,levelIndex:t,rowIndex:n,cellIndex:r,size:s})}}var RRe={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(so,function(){var n={year:0,month:1,day:2,hour:3,minute:4,second:5},r={};return function(i,o,s){var a,u=function(d,h,p){p===void 0&&(p={});var m=new Date(d),g=function(y,v){v===void 0&&(v={});var _=v.timeZoneName||"short",w=y+"|"+_,E=r[w];return E||(E=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:y,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",timeZoneName:_}),r[w]=E),E}(h,p);return g.formatToParts(m)},l=function(d,h){for(var p=u(d,h),m=[],g=0;g<p.length;g+=1){var y=p[g],v=y.type,_=y.value,w=n[v];w>=0&&(m[w]=parseInt(_,10))}var E=m[3],S=E===24?0:E,T=m[0]+"-"+m[1]+"-"+m[2]+" "+S+":"+m[4]+":"+m[5]+":000",C=+d;return(s.utc(T).valueOf()-(C-=C%1e3))/6e4},c=o.prototype;c.tz=function(d,h){d===void 0&&(d=a);var p=this.utcOffset(),m=this.toDate(),g=m.toLocaleString("en-US",{timeZone:d}),y=Math.round((m-new Date(g))/1e3/60),v=s(g,{locale:this.$L}).$set("millisecond",this.$ms).utcOffset(15*-Math.round(m.getTimezoneOffset()/15)-y,!0);if(h){var _=v.utcOffset();v=v.add(p-_,"minute")}return v.$x.$timezone=d,v},c.offsetName=function(d){var h=this.$x.$timezone||s.tz.guess(),p=u(this.valueOf(),h,{timeZoneName:d}).find(function(m){return m.type.toLowerCase()==="timezonename"});return p&&p.value};var f=c.startOf;c.startOf=function(d,h){if(!this.$x||!this.$x.$timezone)return f.call(this,d,h);var p=s(this.format("YYYY-MM-DD HH:mm:ss:SSS"),{locale:this.$L});return f.call(p,d,h).tz(this.$x.$timezone,!0)},s.tz=function(d,h,p){var m=p&&h,g=p||h||a,y=l(+s(),g);if(typeof d!="string")return s(d).tz(g);var v=function(S,T,C){var A=S-60*T*1e3,R=l(A,C);if(T===R)return[A,T];var N=l(A-=60*(R-T)*1e3,C);return R===N?[A,R]:[S-60*Math.min(R,N)*1e3,Math.max(R,N)]}(s.utc(d,m).valueOf(),y,g),_=v[0],w=v[1],E=s(_).utcOffset(w);return E.$x.$timezone=g,E},s.tz.guess=function(){return Intl.DateTimeFormat().resolvedOptions().timeZone},s.tz.setDefault=function(d){a=d}}})})(RRe);var YBt=RRe.exports;const KBt=ku(YBt);var NRe={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(so,function(){var n="minute",r=/[+-]\d\d(?::?\d\d)?/g,i=/([+-]|\d\d)/g;return function(o,s,a){var u=s.prototype;a.utc=function(m){var g={date:m,utc:!0,args:arguments};return new s(g)},u.utc=function(m){var g=a(this.toDate(),{locale:this.$L,utc:!0});return m?g.add(this.utcOffset(),n):g},u.local=function(){return a(this.toDate(),{locale:this.$L,utc:!1})};var l=u.parse;u.parse=function(m){m.utc&&(this.$u=!0),this.$utils().u(m.$offset)||(this.$offset=m.$offset),l.call(this,m)};var c=u.init;u.init=function(){if(this.$u){var m=this.$d;this.$y=m.getUTCFullYear(),this.$M=m.getUTCMonth(),this.$D=m.getUTCDate(),this.$W=m.getUTCDay(),this.$H=m.getUTCHours(),this.$m=m.getUTCMinutes(),this.$s=m.getUTCSeconds(),this.$ms=m.getUTCMilliseconds()}else c.call(this)};var f=u.utcOffset;u.utcOffset=function(m,g){var y=this.$utils().u;if(y(m))return this.$u?0:y(this.$offset)?f.call(this):this.$offset;if(typeof m=="string"&&(m=function(E){E===void 0&&(E="");var S=E.match(r);if(!S)return null;var T=(""+S[0]).match(i)||["-",0,0],C=T[0],A=60*+T[1]+ +T[2];return A===0?0:C==="+"?A:-A}(m),m===null))return this;var v=Math.abs(m)<=16?60*m:m,_=this;if(g)return _.$offset=v,_.$u=m===0,_;if(m!==0){var w=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(_=this.local().add(v+w,n)).$offset=v,_.$x.$localOffset=w}else _=this.utc();return _};var d=u.format;u.format=function(m){var g=m||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return d.call(this,g)},u.valueOf=function(){var m=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*m},u.isUTC=function(){return!!this.$u},u.toISOString=function(){return this.toDate().toISOString()},u.toString=function(){return this.toDate().toUTCString()};var h=u.toDate;u.toDate=function(m){return m==="s"&&this.$offset?a(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():h.call(this)};var p=u.diff;u.diff=function(m,g,y){if(m&&this.$u===m.$u)return p.call(this,m,g,y);var v=this.local(),_=a(m).local();return p.call(v,_,g,y)}}})})(NRe);var XBt=NRe.exports;const QBt=ku(XBt);xt.extend(QBt);xt.extend(KBt);function JBt(e,t){return t?xt(e).tz(t).utcOffset()+e.getTimezoneOffset():0}const mle=(e,t,n)=>{if(!e)return null;if(!t)return e;let r=JBt(e,t);return n==="remove"&&(r*=-1),xt(e).add(r,"minutes").toDate()};function Qp(e,t,n,r){return r||!t?t:Array.isArray(t)?t.map(i=>mle(i,n,e)):mle(t,n,e)}function ZBt({minDate:e,maxDate:t,timezone:n}){const r=Qp("add",new Date,n);return!e&&!t?r:e&&xt(r).isBefore(e)?e:t&&xt(r).isAfter(t)?t:r}const e7t={locale:"en",timezone:null,firstDayOfWeek:1,weekendDays:[0,6],labelSeparator:"",consistentWeeks:!1},t7t=k.createContext(e7t);function Pu(){const e=k.useContext(t7t),t=k.useCallback(s=>s||e.locale,[e.locale]),n=k.useCallback(s=>s||e.timezone||void 0,[e.timezone]),r=k.useCallback(s=>typeof s=="number"?s:e.firstDayOfWeek,[e.firstDayOfWeek]),i=k.useCallback(s=>Array.isArray(s)?s:e.weekendDays,[e.weekendDays]),o=k.useCallback(s=>typeof s=="string"?s:e.labelSeparator,[e.labelSeparator]);return{...e,getLocale:t,getTimezone:n,getFirstDayOfWeek:r,getWeekendDays:i,getLabelSeparator:o}}function n7t(e,t){if(t==="range"&&Array.isArray(e)){const[n,r]=e;return n?r?`${n.toISOString()}  ${r.toISOString()}`:`${n.toISOString()} `:""}return t==="multiple"&&Array.isArray(e)?e.map(n=>n==null?void 0:n.toISOString()).filter(Boolean).join(", "):!Array.isArray(e)&&e?e.toISOString():""}function PRe({value:e,type:t,name:n,form:r}){return b.jsx("input",{type:"hidden",value:n7t(e,t),name:n,form:r})}PRe.displayName="@mantine/dates/HiddenDatesInput";var DRe={day:"m_396ce5cb"};const r7t={},i7t=(e,{size:t})=>({day:{"--day-size":Wt(t,"day-size")}}),SX=Oe((e,t)=>{const n=_e("Day",r7t,e),{classNames:r,className:i,style:o,styles:s,unstyled:a,vars:u,date:l,disabled:c,__staticSelector:f,weekend:d,outside:h,selected:p,renderDay:m,inRange:g,firstInRange:y,lastInRange:v,hidden:_,static:w,...E}=n,S=pt({name:f||"Day",classes:DRe,props:n,className:i,style:o,classNames:r,styles:s,unstyled:a,vars:u,varsResolver:i7t,rootSelector:"day"}),T=Pu();return b.jsx(Pi,{...S("day",{style:_?{display:"none"}:void 0}),component:w?"div":"button",ref:t,disabled:c,"data-today":xt(l).isSame(Qp("add",new Date,T.getTimezone()),"day")||void 0,"data-hidden":_||void 0,"data-disabled":c||void 0,"data-weekend":!c&&!h&&d||void 0,"data-outside":!c&&h||void 0,"data-selected":!c&&p||void 0,"data-in-range":g&&!c||void 0,"data-first-in-range":y&&!c||void 0,"data-last-in-range":v&&!c||void 0,"data-static":w||void 0,unstyled:a,...E,children:(m==null?void 0:m(l))||l.getDate()})});SX.classes=DRe;SX.displayName="@mantine/dates/Day";function o7t({locale:e,format:t="dd",firstDayOfWeek:n=1}){const r=xt().day(n),i=[];for(let o=0;o<7;o+=1)typeof t=="string"?i.push(xt(r).add(o,"days").locale(e).format(t)):i.push(t(xt(r).add(o,"days").toDate()));return i}var ORe={weekday:"m_18a3eca"};const s7t={},a7t=(e,{size:t})=>({weekdaysRow:{"--wr-fz":$o(t),"--wr-spacing":_i(t)}}),CX=Oe((e,t)=>{const n=_e("WeekdaysRow",s7t,e),{classNames:r,className:i,style:o,styles:s,unstyled:a,vars:u,locale:l,firstDayOfWeek:c,weekdayFormat:f,cellComponent:d="th",__staticSelector:h,...p}=n,m=pt({name:h||"WeekdaysRow",classes:ORe,props:n,className:i,style:o,classNames:r,styles:s,unstyled:a,vars:u,varsResolver:a7t,rootSelector:"weekdaysRow"}),g=Pu(),y=o7t({locale:g.getLocale(l),format:f,firstDayOfWeek:g.getFirstDayOfWeek(c)}).map((v,_)=>b.jsx(d,{...m("weekday"),children:v},_));return b.jsx(he,{component:"tr",ref:t,...m("weekdaysRow"),...p,children:y})});CX.classes=ORe;CX.displayName="@mantine/dates/WeekdaysRow";function u7t(e,t=1){const n=new Date(e),r=t===0?6:t-1;for(;n.getDay()!==r;)n.setDate(n.getDate()+1);return n}function l7t(e,t=1){const n=new Date(e);for(;n.getDay()!==t;)n.setDate(n.getDate()-1);return n}function c7t({month:e,firstDayOfWeek:t=1,consistentWeeks:n}){const r=e.getMonth(),i=new Date(e.getFullYear(),r,1),o=new Date(e.getFullYear(),e.getMonth()+1,0),s=u7t(o,t),a=l7t(i,t),u=[];for(;a<=s;){const l=[];for(let c=0;c<7;c+=1)l.push(new Date(a)),a.setDate(a.getDate()+1);u.push(l)}if(n&&u.length<6){const l=u[u.length-1],c=l[l.length-1],f=new Date(c);for(f.setDate(f.getDate()+1);u.length<6;){const d=[];for(let h=0;h<7;h+=1)d.push(new Date(f)),f.setDate(f.getDate()+1);u.push(d)}}return u}function $Re(e,t){return e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()}function MRe(e,t){return t instanceof Date?xt(e).isAfter(xt(t).subtract(1,"day"),"day"):!0}function LRe(e,t){return t instanceof Date?xt(e).isBefore(xt(t).add(1,"day"),"day"):!0}function f7t(e,t,n,r,i,o,s){const a=e.flat().filter(c=>{var f;return LRe(c,n)&&MRe(c,t)&&!(i!=null&&i(c))&&!((f=r==null?void 0:r(c))!=null&&f.disabled)&&(!o||$Re(c,s))}),u=a.find(c=>{var f;return(f=r==null?void 0:r(c))==null?void 0:f.selected});if(u)return u;const l=a.find(c=>xt().isSame(c,"date"));return l||a[0]}var FRe={month:"m_cc9820d3",monthCell:"m_8f457cd5"};const d7t={withCellSpacing:!0},rM=Oe((e,t)=>{const n=_e("Month",d7t,e),{classNames:r,className:i,style:o,styles:s,unstyled:a,vars:u,__staticSelector:l,locale:c,firstDayOfWeek:f,weekdayFormat:d,month:h,weekendDays:p,getDayProps:m,excludeDate:g,minDate:y,maxDate:v,renderDay:_,hideOutsideDates:w,hideWeekdays:E,getDayAriaLabel:S,static:T,__getDayRef:C,__onDayKeyDown:A,__onDayClick:R,__onDayMouseEnter:N,__preventFocus:O,__stopPropagation:D,withCellSpacing:M,size:F,...L}=n,B=pt({name:l||"Month",classes:FRe,props:n,className:i,style:o,classNames:r,styles:s,unstyled:a,vars:u,rootSelector:"month"}),U=Pu(),H=c7t({month:h,firstDayOfWeek:U.getFirstDayOfWeek(f),consistentWeeks:U.consistentWeeks}),P=f7t(H,y,v,m,g,w,h),{resolvedClassNames:z,resolvedStyles:W}=gh({classNames:r,styles:s,props:n}),j=H.map((q,G)=>{const te=q.map((pe,be)=>{const le=!$Re(pe,h),me=(S==null?void 0:S(pe))||xt(pe).locale(c||U.locale).format("D MMMM YYYY"),Se=m==null?void 0:m(pe),ge=xt(pe).isSame(P,"date");return b.jsx("td",{...B("monthCell"),"data-with-spacing":M||void 0,children:b.jsx(SX,{__staticSelector:l||"Month",classNames:z,styles:W,unstyled:a,"data-mantine-stop-propagation":D||void 0,renderDay:_,date:pe,size:F,weekend:U.getWeekendDays(p).includes(pe.getDay()),outside:le,hidden:w?le:!1,"aria-label":me,static:T,disabled:(g==null?void 0:g(pe))||!LRe(pe,v)||!MRe(pe,y),ref:tt=>C==null?void 0:C(G,be,tt),...Se,onKeyDown:tt=>{var Ue;(Ue=Se==null?void 0:Se.onKeyDown)==null||Ue.call(Se,tt),A==null||A(tt,{rowIndex:G,cellIndex:be,date:pe})},onMouseEnter:tt=>{var Ue;(Ue=Se==null?void 0:Se.onMouseEnter)==null||Ue.call(Se,tt),N==null||N(tt,pe)},onClick:tt=>{var Ue;(Ue=Se==null?void 0:Se.onClick)==null||Ue.call(Se,tt),R==null||R(tt,pe)},onMouseDown:tt=>{var Ue;(Ue=Se==null?void 0:Se.onMouseDown)==null||Ue.call(Se,tt),O&&tt.preventDefault()},tabIndex:O||!ge?-1:0})},pe.toString())});return b.jsx("tr",{...B("monthRow"),children:te},G)});return b.jsxs(he,{component:"table",...B("month"),size:F,ref:t,...L,children:[!E&&b.jsx("thead",{...B("monthThead"),children:b.jsx(CX,{__staticSelector:l||"Month",locale:c,firstDayOfWeek:f,weekdayFormat:d,size:F,classNames:z,styles:W,unstyled:a})}),b.jsx("tbody",{...B("monthTbody"),children:j})]})});rM.classes=FRe;rM.displayName="@mantine/dates/Month";var jRe={pickerControl:"m_dc6a3c71"};const h7t={},p7t=(e,{size:t})=>({pickerControl:{"--dpc-fz":$o(t),"--dpc-size":Wt(t,"dpc-size")}}),iM=Oe((e,t)=>{const n=_e("PickerControl",h7t,e),{classNames:r,className:i,style:o,styles:s,unstyled:a,vars:u,firstInRange:l,lastInRange:c,inRange:f,__staticSelector:d,selected:h,disabled:p,...m}=n,g=pt({name:d||"PickerControl",classes:jRe,props:n,className:i,style:o,classNames:r,styles:s,unstyled:a,vars:u,varsResolver:p7t,rootSelector:"pickerControl"});return b.jsx(Pi,{...g("pickerControl"),ref:t,unstyled:a,"data-picker-control":!0,"data-selected":h&&!p||void 0,"data-disabled":p||void 0,"data-in-range":f&&!p&&!h||void 0,"data-first-in-range":l&&!p||void 0,"data-last-in-range":c&&!p||void 0,disabled:p,...m})});iM.classes=jRe;iM.displayName="@mantine/dates/PickerControl";function BRe(e,t,n){return!t&&!n?!1:!!(t&&xt(e).isBefore(t,"year")||n&&xt(e).isAfter(n,"year"))}function m7t(e,t,n,r){const i=e.flat().filter(a=>{var u;return!BRe(a,t,n)&&!((u=r==null?void 0:r(a))!=null&&u.disabled)}),o=i.find(a=>{var u;return(u=r==null?void 0:r(a))==null?void 0:u.selected});if(o)return o;const s=i.find(a=>xt().isSame(a,"year"));return s||i[0]}function URe(e){const t=e.getFullYear(),n=t-t%10;let r=0;const i=[[],[],[],[]];for(let o=0;o<4;o+=1){const s=o===3?1:3;for(let a=0;a<s;a+=1)i[o].push(new Date(n+r,0)),r+=1}return i}var zRe={yearsList:"m_9206547b",yearsListCell:"m_c5a19c7d"};const g7t={yearsListFormat:"YYYY",withCellSpacing:!0},oM=Oe((e,t)=>{const n=_e("YearsList",g7t,e),{classNames:r,className:i,style:o,styles:s,unstyled:a,vars:u,decade:l,yearsListFormat:c,locale:f,minDate:d,maxDate:h,getYearControlProps:p,__staticSelector:m,__getControlRef:g,__onControlKeyDown:y,__onControlClick:v,__onControlMouseEnter:_,__preventFocus:w,__stopPropagation:E,withCellSpacing:S,size:T,...C}=n,A=pt({name:m||"YearsList",classes:zRe,props:n,className:i,style:o,classNames:r,styles:s,unstyled:a,vars:u,rootSelector:"yearsList"}),R=Pu(),N=URe(l),O=m7t(N,d,h,p),D=N.map((M,F)=>{const L=M.map((B,U)=>{const H=p==null?void 0:p(B),P=xt(B).isSame(O,"year");return b.jsx("td",{...A("yearsListCell"),"data-with-spacing":S||void 0,children:b.jsx(iM,{...A("yearsListControl"),size:T,unstyled:a,"data-mantine-stop-propagation":E||void 0,disabled:BRe(B,d,h),ref:z=>g==null?void 0:g(F,U,z),...H,onKeyDown:z=>{var W;(W=H==null?void 0:H.onKeyDown)==null||W.call(H,z),y==null||y(z,{rowIndex:F,cellIndex:U,date:B})},onClick:z=>{var W;(W=H==null?void 0:H.onClick)==null||W.call(H,z),v==null||v(z,B)},onMouseEnter:z=>{var W;(W=H==null?void 0:H.onMouseEnter)==null||W.call(H,z),_==null||_(z,B)},onMouseDown:z=>{var W;(W=H==null?void 0:H.onMouseDown)==null||W.call(H,z),w&&z.preventDefault()},tabIndex:w||!P?-1:0,children:xt(B).locale(R.getLocale(f)).format(c)})},U)});return b.jsx("tr",{...A("yearsListRow"),children:L},F)});return b.jsx(he,{component:"table",ref:t,size:T,...A("yearsList"),...C,children:b.jsx("tbody",{children:D})})});oM.classes=zRe;oM.displayName="@mantine/dates/YearsList";function VRe(e,t,n){return!t&&!n?!1:!!(t&&xt(e).isBefore(t,"month")||n&&xt(e).isAfter(n,"month"))}function y7t(e,t,n,r){const i=e.flat().filter(a=>{var u;return!VRe(a,t,n)&&!((u=r==null?void 0:r(a))!=null&&u.disabled)}),o=i.find(a=>{var u;return(u=r==null?void 0:r(a))==null?void 0:u.selected});if(o)return o;const s=i.find(a=>xt().isSame(a,"month"));return s||i[0]}function v7t(e){const t=xt(e).startOf("year").toDate(),n=[[],[],[],[]];let r=0;for(let i=0;i<4;i+=1)for(let o=0;o<3;o+=1)n[i].push(xt(t).add(r,"months").toDate()),r+=1;return n}var HRe={monthsList:"m_2a6c32d",monthsListCell:"m_fe27622f"};const b7t={monthsListFormat:"MMM",withCellSpacing:!0},sM=Oe((e,t)=>{const n=_e("MonthsList",b7t,e),{classNames:r,className:i,style:o,styles:s,unstyled:a,vars:u,__staticSelector:l,year:c,monthsListFormat:f,locale:d,minDate:h,maxDate:p,getMonthControlProps:m,__getControlRef:g,__onControlKeyDown:y,__onControlClick:v,__onControlMouseEnter:_,__preventFocus:w,__stopPropagation:E,withCellSpacing:S,size:T,...C}=n,A=pt({name:l||"MonthsList",classes:HRe,props:n,className:i,style:o,classNames:r,styles:s,unstyled:a,vars:u,rootSelector:"monthsList"}),R=Pu(),N=v7t(c),O=y7t(N,h,p,m),D=N.map((M,F)=>{const L=M.map((B,U)=>{const H=m==null?void 0:m(B),P=xt(B).isSame(O,"month");return b.jsx("td",{...A("monthsListCell"),"data-with-spacing":S||void 0,children:b.jsx(iM,{...A("monthsListControl"),size:T,unstyled:a,__staticSelector:l||"MonthsList","data-mantine-stop-propagation":E||void 0,disabled:VRe(B,h,p),ref:z=>g==null?void 0:g(F,U,z),...H,onKeyDown:z=>{var W;(W=H==null?void 0:H.onKeyDown)==null||W.call(H,z),y==null||y(z,{rowIndex:F,cellIndex:U,date:B})},onClick:z=>{var W;(W=H==null?void 0:H.onClick)==null||W.call(H,z),v==null||v(z,B)},onMouseEnter:z=>{var W;(W=H==null?void 0:H.onMouseEnter)==null||W.call(H,z),_==null||_(z,B)},onMouseDown:z=>{var W;(W=H==null?void 0:H.onMouseDown)==null||W.call(H,z),w&&z.preventDefault()},tabIndex:w||!P?-1:0,children:xt(B).locale(R.getLocale(d)).format(f)})},U)});return b.jsx("tr",{...A("monthsListRow"),children:L},F)});return b.jsx(he,{component:"table",ref:t,size:T,...A("monthsList"),...C,children:b.jsx("tbody",{children:D})})});sM.classes=HRe;sM.displayName="@mantine/dates/MonthsList";var qRe={calendarHeader:"m_730a79ed",calendarHeaderLevel:"m_f6645d97",calendarHeaderControl:"m_2351eeb0",calendarHeaderControlIcon:"m_367dc749"};const _7t={nextDisabled:!1,previousDisabled:!1,hasNextLevel:!0,withNext:!0,withPrevious:!0},w7t=(e,{size:t})=>({calendarHeader:{"--dch-control-size":Wt(t,"dch-control-size"),"--dch-fz":$o(t)}}),og=Oe((e,t)=>{const n=_e("CalendarHeader",_7t,e),{classNames:r,className:i,style:o,styles:s,unstyled:a,vars:u,nextIcon:l,previousIcon:c,nextLabel:f,previousLabel:d,onNext:h,onPrevious:p,onLevelClick:m,label:g,nextDisabled:y,previousDisabled:v,hasNextLevel:_,levelControlAriaLabel:w,withNext:E,withPrevious:S,__staticSelector:T,__preventFocus:C,__stopPropagation:A,...R}=n,N=pt({name:T||"CalendarHeader",classes:qRe,props:n,className:i,style:o,classNames:r,styles:s,unstyled:a,vars:u,varsResolver:w7t,rootSelector:"calendarHeader"}),O=C?D=>D.preventDefault():void 0;return b.jsxs(he,{...N("calendarHeader"),ref:t,...R,children:[S&&b.jsx(Pi,{...N("calendarHeaderControl"),"data-direction":"previous","aria-label":d,onClick:p,unstyled:a,onMouseDown:O,disabled:v,"data-disabled":v||void 0,tabIndex:C||v?-1:0,"data-mantine-stop-propagation":A||void 0,children:c||b.jsx(sb,{...N("calendarHeaderControlIcon"),"data-direction":"previous",size:"45%"})}),b.jsx(Pi,{component:_?"button":"div",...N("calendarHeaderLevel"),onClick:_?m:void 0,unstyled:a,onMouseDown:_?O:void 0,disabled:!_,"data-static":!_||void 0,"aria-label":w,tabIndex:C||!_?-1:0,"data-mantine-stop-propagation":A||void 0,children:g}),E&&b.jsx(Pi,{...N("calendarHeaderControl"),"data-direction":"next","aria-label":f,onClick:h,unstyled:a,onMouseDown:O,disabled:y,"data-disabled":y||void 0,tabIndex:C||y?-1:0,"data-mantine-stop-propagation":A||void 0,children:l||b.jsx(sb,{...N("calendarHeaderControlIcon"),"data-direction":"next",size:"45%"})})]})});og.classes=qRe;og.displayName="@mantine/dates/CalendarHeader";function E7t(e){const t=URe(e);return[t[0][0],t[3][0]]}const x7t={decadeLabelFormat:"YYYY"},aM=Oe((e,t)=>{const n=_e("DecadeLevel",x7t,e),{decade:r,locale:i,minDate:o,maxDate:s,yearsListFormat:a,getYearControlProps:u,__getControlRef:l,__onControlKeyDown:c,__onControlClick:f,__onControlMouseEnter:d,withCellSpacing:h,__preventFocus:p,nextIcon:m,previousIcon:g,nextLabel:y,previousLabel:v,onNext:_,onPrevious:w,nextDisabled:E,previousDisabled:S,levelControlAriaLabel:T,withNext:C,withPrevious:A,decadeLabelFormat:R,classNames:N,styles:O,unstyled:D,__staticSelector:M,__stopPropagation:F,size:L,...B}=n,U=Pu(),[H,P]=E7t(r),z={__staticSelector:M||"DecadeLevel",classNames:N,styles:O,unstyled:D,size:L},W=typeof E=="boolean"?E:s?!xt(P).endOf("year").isBefore(s):!1,j=typeof S=="boolean"?S:o?!xt(H).startOf("year").isAfter(o):!1,q=(G,te)=>xt(G).locale(i||U.locale).format(te);return b.jsxs(he,{"data-decade-level":!0,size:L,ref:t,...B,children:[b.jsx(og,{label:typeof R=="function"?R(H,P):`${q(H,R)}  ${q(P,R)}`,__preventFocus:p,__stopPropagation:F,nextIcon:m,previousIcon:g,nextLabel:y,previousLabel:v,onNext:_,onPrevious:w,nextDisabled:W,previousDisabled:j,hasNextLevel:!1,levelControlAriaLabel:T,withNext:C,withPrevious:A,...z}),b.jsx(oM,{decade:r,locale:i,minDate:o,maxDate:s,yearsListFormat:a,getYearControlProps:u,__getControlRef:l,__onControlKeyDown:c,__onControlClick:f,__onControlMouseEnter:d,__preventFocus:p,__stopPropagation:F,withCellSpacing:h,...z})]})});aM.classes={...oM.classes,...og.classes};aM.displayName="@mantine/dates/DecadeLevel";const T7t={yearLabelFormat:"YYYY"},uM=Oe((e,t)=>{const n=_e("YearLevel",T7t,e),{year:r,locale:i,minDate:o,maxDate:s,monthsListFormat:a,getMonthControlProps:u,__getControlRef:l,__onControlKeyDown:c,__onControlClick:f,__onControlMouseEnter:d,withCellSpacing:h,__preventFocus:p,nextIcon:m,previousIcon:g,nextLabel:y,previousLabel:v,onNext:_,onPrevious:w,onLevelClick:E,nextDisabled:S,previousDisabled:T,hasNextLevel:C,levelControlAriaLabel:A,withNext:R,withPrevious:N,yearLabelFormat:O,__staticSelector:D,__stopPropagation:M,size:F,classNames:L,styles:B,unstyled:U,...H}=n,P=Pu(),z={__staticSelector:D||"YearLevel",classNames:L,styles:B,unstyled:U,size:F},W=typeof S=="boolean"?S:s?!xt(r).endOf("year").isBefore(s):!1,j=typeof T=="boolean"?T:o?!xt(r).startOf("year").isAfter(o):!1;return b.jsxs(he,{"data-year-level":!0,size:F,ref:t,...H,children:[b.jsx(og,{label:typeof O=="function"?O(r):xt(r).locale(i||P.locale).format(O),__preventFocus:p,__stopPropagation:M,nextIcon:m,previousIcon:g,nextLabel:y,previousLabel:v,onNext:_,onPrevious:w,onLevelClick:E,nextDisabled:W,previousDisabled:j,hasNextLevel:C,levelControlAriaLabel:A,withNext:R,withPrevious:N,...z}),b.jsx(sM,{year:r,locale:i,minDate:o,maxDate:s,monthsListFormat:a,getMonthControlProps:u,__getControlRef:l,__onControlKeyDown:c,__onControlClick:f,__onControlMouseEnter:d,__preventFocus:p,__stopPropagation:M,withCellSpacing:h,...z})]})});uM.classes={...og.classes,...sM.classes};uM.displayName="@mantine/dates/YearLevel";const S7t={monthLabelFormat:"MMMM YYYY"},lM=Oe((e,t)=>{const n=_e("MonthLevel",S7t,e),{month:r,locale:i,firstDayOfWeek:o,weekdayFormat:s,weekendDays:a,getDayProps:u,excludeDate:l,minDate:c,maxDate:f,renderDay:d,hideOutsideDates:h,hideWeekdays:p,getDayAriaLabel:m,__getDayRef:g,__onDayKeyDown:y,__onDayClick:v,__onDayMouseEnter:_,withCellSpacing:w,__preventFocus:E,__stopPropagation:S,nextIcon:T,previousIcon:C,nextLabel:A,previousLabel:R,onNext:N,onPrevious:O,onLevelClick:D,nextDisabled:M,previousDisabled:F,hasNextLevel:L,levelControlAriaLabel:B,withNext:U,withPrevious:H,monthLabelFormat:P,classNames:z,styles:W,unstyled:j,__staticSelector:q,size:G,static:te,...pe}=n,be=Pu(),le={__staticSelector:q||"MonthLevel",classNames:z,styles:W,unstyled:j,size:G},me=typeof M=="boolean"?M:f?!xt(r).endOf("month").isBefore(f):!1,Se=typeof F=="boolean"?F:c?!xt(r).startOf("month").isAfter(c):!1;return b.jsxs(he,{"data-month-level":!0,size:G,ref:t,...pe,children:[b.jsx(og,{label:typeof P=="function"?P(r):xt(r).locale(i||be.locale).format(P),__preventFocus:E,__stopPropagation:S,nextIcon:T,previousIcon:C,nextLabel:A,previousLabel:R,onNext:N,onPrevious:O,onLevelClick:D,nextDisabled:me,previousDisabled:Se,hasNextLevel:L,levelControlAriaLabel:B,withNext:U,withPrevious:H,...le}),b.jsx(rM,{month:r,locale:i,firstDayOfWeek:o,weekdayFormat:s,weekendDays:a,getDayProps:u,excludeDate:l,minDate:c,maxDate:f,renderDay:d,hideOutsideDates:h,hideWeekdays:p,getDayAriaLabel:m,__getDayRef:g,__onDayKeyDown:y,__onDayClick:v,__onDayMouseEnter:_,__preventFocus:E,__stopPropagation:S,static:te,withCellSpacing:w,...le})]})});lM.classes={...rM.classes,...og.classes};lM.displayName="@mantine/dates/MonthLevel";var WRe={levelsGroup:"m_30b26e33"};const C7t={},sg=Oe((e,t)=>{const n=_e("LevelsGroup",C7t,e),{classNames:r,className:i,style:o,styles:s,unstyled:a,vars:u,__staticSelector:l,...c}=n,f=pt({name:l||"LevelsGroup",classes:WRe,props:n,className:i,style:o,classNames:r,styles:s,unstyled:a,vars:u,rootSelector:"levelsGroup"});return b.jsx(he,{ref:t,...f("levelsGroup"),...c})});sg.classes=WRe;sg.displayName="@mantine/dates/LevelsGroup";const A7t={numberOfColumns:1},cM=Oe((e,t)=>{const n=_e("DecadeLevelGroup",A7t,e),{decade:r,locale:i,minDate:o,maxDate:s,yearsListFormat:a,getYearControlProps:u,__onControlClick:l,__onControlMouseEnter:c,withCellSpacing:f,__preventFocus:d,nextIcon:h,previousIcon:p,nextLabel:m,previousLabel:g,onNext:y,onPrevious:v,nextDisabled:_,previousDisabled:w,classNames:E,styles:S,unstyled:T,__staticSelector:C,__stopPropagation:A,numberOfColumns:R,levelControlAriaLabel:N,decadeLabelFormat:O,size:D,vars:M,...F}=n,L=k.useRef([]),B=Array(R).fill(0).map((U,H)=>{const P=xt(r).add(H*10,"years").toDate();return b.jsx(aM,{size:D,yearsListFormat:a,decade:P,withNext:H===R-1,withPrevious:H===0,decadeLabelFormat:O,__onControlClick:l,__onControlMouseEnter:c,__onControlKeyDown:(z,W)=>TX({levelIndex:H,rowIndex:W.rowIndex,cellIndex:W.cellIndex,event:z,controlsRef:L}),__getControlRef:(z,W,j)=>{Array.isArray(L.current[H])||(L.current[H]=[]),Array.isArray(L.current[H][z])||(L.current[H][z]=[]),L.current[H][z][W]=j},levelControlAriaLabel:typeof N=="function"?N(P):N,locale:i,minDate:o,maxDate:s,__preventFocus:d,__stopPropagation:A,nextIcon:h,previousIcon:p,nextLabel:m,previousLabel:g,onNext:y,onPrevious:v,nextDisabled:_,previousDisabled:w,getYearControlProps:u,__staticSelector:C||"DecadeLevelGroup",classNames:E,styles:S,unstyled:T,withCellSpacing:f},H)});return b.jsx(sg,{classNames:E,styles:S,__staticSelector:C||"DecadeLevelGroup",ref:t,size:D,unstyled:T,...F,children:B})});cM.classes={...sg.classes,...aM.classes};cM.displayName="@mantine/dates/DecadeLevelGroup";const k7t={numberOfColumns:1},fM=Oe((e,t)=>{const n=_e("YearLevelGroup",k7t,e),{year:r,locale:i,minDate:o,maxDate:s,monthsListFormat:a,getMonthControlProps:u,__onControlClick:l,__onControlMouseEnter:c,withCellSpacing:f,__preventFocus:d,nextIcon:h,previousIcon:p,nextLabel:m,previousLabel:g,onNext:y,onPrevious:v,onLevelClick:_,nextDisabled:w,previousDisabled:E,hasNextLevel:S,classNames:T,styles:C,unstyled:A,__staticSelector:R,__stopPropagation:N,numberOfColumns:O,levelControlAriaLabel:D,yearLabelFormat:M,size:F,vars:L,...B}=n,U=k.useRef([]),H=Array(O).fill(0).map((P,z)=>{const W=xt(r).add(z,"years").toDate();return b.jsx(uM,{size:F,monthsListFormat:a,year:W,withNext:z===O-1,withPrevious:z===0,yearLabelFormat:M,__stopPropagation:N,__onControlClick:l,__onControlMouseEnter:c,__onControlKeyDown:(j,q)=>TX({levelIndex:z,rowIndex:q.rowIndex,cellIndex:q.cellIndex,event:j,controlsRef:U}),__getControlRef:(j,q,G)=>{Array.isArray(U.current[z])||(U.current[z]=[]),Array.isArray(U.current[z][j])||(U.current[z][j]=[]),U.current[z][j][q]=G},levelControlAriaLabel:typeof D=="function"?D(W):D,locale:i,minDate:o,maxDate:s,__preventFocus:d,nextIcon:h,previousIcon:p,nextLabel:m,previousLabel:g,onNext:y,onPrevious:v,onLevelClick:_,nextDisabled:w,previousDisabled:E,hasNextLevel:S,getMonthControlProps:u,classNames:T,styles:C,unstyled:A,__staticSelector:R||"YearLevelGroup",withCellSpacing:f},z)});return b.jsx(sg,{classNames:T,styles:C,__staticSelector:R||"YearLevelGroup",ref:t,size:F,unstyled:A,...B,children:H})});fM.classes={...uM.classes,...sg.classes};fM.displayName="@mantine/dates/YearLevelGroup";const I7t={numberOfColumns:1},dM=Oe((e,t)=>{const n=_e("MonthLevelGroup",I7t,e),{month:r,locale:i,firstDayOfWeek:o,weekdayFormat:s,weekendDays:a,getDayProps:u,excludeDate:l,minDate:c,maxDate:f,renderDay:d,hideOutsideDates:h,hideWeekdays:p,getDayAriaLabel:m,__onDayClick:g,__onDayMouseEnter:y,withCellSpacing:v,__preventFocus:_,nextIcon:w,previousIcon:E,nextLabel:S,previousLabel:T,onNext:C,onPrevious:A,onLevelClick:R,nextDisabled:N,previousDisabled:O,hasNextLevel:D,classNames:M,styles:F,unstyled:L,numberOfColumns:B,levelControlAriaLabel:U,monthLabelFormat:H,__staticSelector:P,__stopPropagation:z,size:W,static:j,vars:q,...G}=n,te=k.useRef([]),pe=Array(B).fill(0).map((be,le)=>{const me=xt(r).add(le,"months").toDate();return b.jsx(lM,{month:me,withNext:le===B-1,withPrevious:le===0,monthLabelFormat:H,__stopPropagation:z,__onDayClick:g,__onDayMouseEnter:y,__onDayKeyDown:(Se,ge)=>TX({levelIndex:le,rowIndex:ge.rowIndex,cellIndex:ge.cellIndex,event:Se,controlsRef:te}),__getDayRef:(Se,ge,tt)=>{Array.isArray(te.current[le])||(te.current[le]=[]),Array.isArray(te.current[le][Se])||(te.current[le][Se]=[]),te.current[le][Se][ge]=tt},levelControlAriaLabel:typeof U=="function"?U(me):U,locale:i,firstDayOfWeek:o,weekdayFormat:s,weekendDays:a,getDayProps:u,excludeDate:l,minDate:c,maxDate:f,renderDay:d,hideOutsideDates:h,hideWeekdays:p,getDayAriaLabel:m,__preventFocus:_,nextIcon:w,previousIcon:E,nextLabel:S,previousLabel:T,onNext:C,onPrevious:A,onLevelClick:R,nextDisabled:N,previousDisabled:O,hasNextLevel:D,classNames:M,styles:F,unstyled:L,__staticSelector:P||"MonthLevelGroup",size:W,static:j,withCellSpacing:v},le)});return b.jsx(sg,{classNames:M,styles:F,__staticSelector:P||"MonthLevelGroup",ref:t,size:W,...G,children:pe})});dM.classes={...sg.classes,...lM.classes};dM.displayName="@mantine/dates/MonthLevelGroup";var GRe={input:"m_6fa5e2aa"};const R7t={},hM=Oe((e,t)=>{const{inputProps:n,wrapperProps:r,placeholder:i,classNames:o,styles:s,unstyled:a,popoverProps:u,modalProps:l,dropdownType:c,children:f,formattedValue:d,dropdownHandlers:h,dropdownOpened:p,onClick:m,clearable:g,onClear:y,clearButtonProps:v,rightSection:_,shouldClear:w,readOnly:E,disabled:S,value:T,name:C,form:A,type:R,...N}=Yde("PickerInputBase",R7t,e),O=_||(g&&w&&!E&&!S?b.jsx(_h,{variant:"transparent",onClick:y,unstyled:a,size:n.size||"sm",...v}):null),D=()=>{R==="range"&&Array.isArray(T)&&T[0]&&!T[1]&&y(),h.close()};return b.jsxs(b.Fragment,{children:[c==="modal"&&!E&&b.jsx(li,{opened:p,onClose:D,withCloseButton:!1,size:"auto","data-dates-modal":!0,unstyled:a,...l,children:f}),b.jsx($r.Wrapper,{...r,children:b.jsxs(Mo,{position:"bottom-start",opened:p,trapFocus:!0,returnFocus:!0,unstyled:a,...u,disabled:(u==null?void 0:u.disabled)||c==="modal"||E,onClose:()=>{var M;(M=u==null?void 0:u.onClose)==null||M.call(u),D()},children:[b.jsx(Mo.Target,{children:b.jsx($r,{"aria-label":d||i,"data-dates-input":!0,"data-read-only":E||void 0,disabled:S,component:"button",type:"button",multiline:!0,onClick:M=>{m==null||m(M),h.toggle()},rightSection:O,...n,ref:t,classNames:{...o,input:fi(GRe.input,o==null?void 0:o.input)},...N,children:d||b.jsx($r.Placeholder,{error:n.error,unstyled:a,className:o==null?void 0:o.placeholder,style:s==null?void 0:s.placeholder,children:i})})}),b.jsx(Mo.Dropdown,{"data-dates-dropdown":!0,children:f})]})}),b.jsx(PRe,{value:T,name:C,form:A,type:R})]})});hM.classes=GRe;hM.displayName="@mantine/dates/PickerInputBase";const gle=e=>e==="range"?[null,null]:e==="multiple"?[]:null;function AX({type:e,value:t,defaultValue:n,onChange:r,applyTimezone:i=!0}){const o=k.useRef(e),s=Pu(),[a,u,l]=Wi({value:Qp("add",t,s.getTimezone(),!i),defaultValue:Qp("add",n,s.getTimezone(),!i),finalValue:gle(e),onChange:f=>{r==null||r(Qp("remove",f,s.getTimezone(),!i))}});let c=a;return o.current!==e&&(o.current=e,t===void 0&&(c=n!==void 0?n:gle(e),u(c))),[c,u,l]}function X4(e,t){return e?e==="month"?0:e==="year"?1:2:t||0}function N7t(e){return e===0?"month":e===1?"year":"decade"}function pE(e,t,n){return N7t(Yc(X4(e,0),X4(t,0),X4(n,2)))}const P7t={maxLevel:"decade",minLevel:"month",__updateDateOnYearSelect:!0,__updateDateOnMonthSelect:!0},pM=Oe((e,t)=>{const n=_e("Calendar",P7t,e),{vars:r,maxLevel:i,minLevel:o,defaultLevel:s,level:a,onLevelChange:u,date:l,defaultDate:c,onDateChange:f,numberOfColumns:d,columnsToScroll:h,ariaLabels:p,onYearSelect:m,onMonthSelect:g,onYearMouseEnter:y,onMonthMouseEnter:v,__updateDateOnYearSelect:_,__updateDateOnMonthSelect:w,firstDayOfWeek:E,weekdayFormat:S,weekendDays:T,getDayProps:C,excludeDate:A,renderDay:R,hideOutsideDates:N,hideWeekdays:O,getDayAriaLabel:D,monthLabelFormat:M,nextIcon:F,previousIcon:L,__onDayClick:B,__onDayMouseEnter:U,withCellSpacing:H,monthsListFormat:P,getMonthControlProps:z,yearLabelFormat:W,yearsListFormat:j,getYearControlProps:q,decadeLabelFormat:G,classNames:te,styles:pe,unstyled:be,minDate:le,maxDate:me,locale:Se,__staticSelector:ge,size:tt,__preventFocus:Ue,__stopPropagation:mt,onNextDecade:it,onPreviousDecade:Re,onNextYear:$e,onPreviousYear:Ge,onNextMonth:dt,onPreviousMonth:Nt,static:He,__timezoneApplied:fe,...lt}=n,{resolvedClassNames:gt,resolvedStyles:ce}=gh({classNames:te,styles:pe,props:n}),[Te,ze]=Wi({value:a?pE(a,o,i):void 0,defaultValue:s?pE(s,o,i):void 0,finalValue:pE(void 0,o,i),onChange:u}),[st,vt]=AX({type:"default",value:l,defaultValue:c,onChange:f,applyTimezone:!fe}),vn={__staticSelector:ge||"Calendar",styles:ce,classNames:gt,unstyled:be,size:tt},Zn=Pu(),bn=h||d||1,Bn=st||Qp("add",new Date,Zn.getTimezone()),Zt=()=>{const un=xt(Bn).add(bn,"month").toDate();dt==null||dt(un),vt(un)},an=()=>{const un=xt(Bn).subtract(bn,"month").toDate();Nt==null||Nt(un),vt(un)},Dn=()=>{const un=xt(Bn).add(bn,"year").toDate();$e==null||$e(un),vt(un)},On=()=>{const un=xt(Bn).subtract(bn,"year").toDate();Ge==null||Ge(un),vt(un)},Ho=()=>{const un=xt(Bn).add(10*bn,"year").toDate();it==null||it(un),vt(un)},Jr=()=>{const un=xt(Bn).subtract(10*bn,"year").toDate();Re==null||Re(un),vt(un)};return b.jsxs(he,{ref:t,size:tt,"data-calendar":!0,...lt,children:[Te==="month"&&b.jsx(dM,{month:Bn,minDate:le,maxDate:me,firstDayOfWeek:E,weekdayFormat:S,weekendDays:T,getDayProps:C,excludeDate:A,renderDay:R,hideOutsideDates:N,hideWeekdays:O,getDayAriaLabel:D,onNext:Zt,onPrevious:an,hasNextLevel:i!=="month",onLevelClick:()=>ze("year"),numberOfColumns:d,locale:Se,levelControlAriaLabel:p==null?void 0:p.monthLevelControl,nextLabel:p==null?void 0:p.nextMonth,nextIcon:F,previousLabel:p==null?void 0:p.previousMonth,previousIcon:L,monthLabelFormat:M,__onDayClick:B,__onDayMouseEnter:U,__preventFocus:Ue,__stopPropagation:mt,static:He,withCellSpacing:H,...vn}),Te==="year"&&b.jsx(fM,{year:Bn,numberOfColumns:d,minDate:le,maxDate:me,monthsListFormat:P,getMonthControlProps:z,locale:Se,onNext:Dn,onPrevious:On,hasNextLevel:i!=="month"&&i!=="year",onLevelClick:()=>ze("decade"),levelControlAriaLabel:p==null?void 0:p.yearLevelControl,nextLabel:p==null?void 0:p.nextYear,nextIcon:F,previousLabel:p==null?void 0:p.previousYear,previousIcon:L,yearLabelFormat:W,__onControlMouseEnter:v,__onControlClick:(un,Zr)=>{w&&vt(Zr),ze(pE("month",o,i)),g==null||g(Zr)},__preventFocus:Ue,__stopPropagation:mt,withCellSpacing:H,...vn}),Te==="decade"&&b.jsx(cM,{decade:Bn,minDate:le,maxDate:me,yearsListFormat:j,getYearControlProps:q,locale:Se,onNext:Ho,onPrevious:Jr,numberOfColumns:d,nextLabel:p==null?void 0:p.nextDecade,nextIcon:F,previousLabel:p==null?void 0:p.previousDecade,previousIcon:L,decadeLabelFormat:G,__onControlMouseEnter:y,__onControlClick:(un,Zr)=>{_&&vt(Zr),ze(pE("year",o,i)),m==null||m(Zr)},__preventFocus:Ue,__stopPropagation:mt,withCellSpacing:H,...vn})]})});pM.classes={...cM.classes,...fM.classes,...dM.classes};pM.displayName="@mantine/dates/Calendar";function D7t(e){const{maxLevel:t,minLevel:n,defaultLevel:r,level:i,onLevelChange:o,nextIcon:s,previousIcon:a,date:u,defaultDate:l,onDateChange:c,numberOfColumns:f,columnsToScroll:d,ariaLabels:h,onYearSelect:p,onMonthSelect:m,onYearMouseEnter:g,onMonthMouseEnter:y,onNextMonth:v,onPreviousMonth:_,onNextYear:w,onPreviousYear:E,onNextDecade:S,onPreviousDecade:T,withCellSpacing:C,__updateDateOnYearSelect:A,__updateDateOnMonthSelect:R,firstDayOfWeek:N,weekdayFormat:O,weekendDays:D,getDayProps:M,excludeDate:F,renderDay:L,hideOutsideDates:B,hideWeekdays:U,getDayAriaLabel:H,monthLabelFormat:P,monthsListFormat:z,getMonthControlProps:W,yearLabelFormat:j,yearsListFormat:q,getYearControlProps:G,decadeLabelFormat:te,allowSingleDateInRange:pe,allowDeselect:be,minDate:le,maxDate:me,locale:Se,...ge}=e;return{calendarProps:{maxLevel:t,minLevel:n,defaultLevel:r,level:i,onLevelChange:o,nextIcon:s,previousIcon:a,date:u,defaultDate:l,onDateChange:c,numberOfColumns:f,columnsToScroll:d,ariaLabels:h,onYearSelect:p,onMonthSelect:m,onYearMouseEnter:g,onMonthMouseEnter:y,onNextMonth:v,onPreviousMonth:_,onNextYear:w,onPreviousYear:E,onNextDecade:S,onPreviousDecade:T,withCellSpacing:C,__updateDateOnYearSelect:A,__updateDateOnMonthSelect:R,firstDayOfWeek:N,weekdayFormat:O,weekendDays:D,getDayProps:M,excludeDate:F,renderDay:L,hideOutsideDates:B,hideWeekdays:U,getDayAriaLabel:H,monthLabelFormat:P,monthsListFormat:z,getMonthControlProps:W,yearLabelFormat:j,yearsListFormat:q,getYearControlProps:G,decadeLabelFormat:te,allowSingleDateInRange:pe,allowDeselect:be,minDate:le,maxDate:me,locale:Se},others:ge}}function yle(e,t){const n=[...t].sort((r,i)=>r.getTime()-i.getTime());return xt(n[0]).startOf("day").subtract(1,"ms").isBefore(e)&&xt(n[1]).endOf("day").add(1,"ms").isAfter(e)}function O7t({type:e,level:t,value:n,defaultValue:r,onChange:i,allowSingleDateInRange:o,allowDeselect:s,onMouseLeave:a,applyTimezone:u=!0}){const[l,c]=AX({type:e,value:n,defaultValue:r,onChange:i,applyTimezone:u}),[f,d]=k.useState(e==="range"&&l[0]&&!l[1]?l[0]:null),[h,p]=k.useState(null),m=S=>{if(e==="range"){if(f instanceof Date&&!l[1]){if(xt(S).isSame(f,t)&&!o){d(null),p(null),c([null,null]);return}const T=[S,f];T.sort((C,A)=>C.getTime()-A.getTime()),c(T),p(null),d(null);return}if(l[0]&&!l[1]&&xt(S).isSame(l[0],t)&&!o){d(null),p(null),c([null,null]);return}c([S,null]),p(null),d(S);return}if(e==="multiple"){l.some(T=>xt(T).isSame(S,t))?c(l.filter(T=>!xt(T).isSame(S,t))):c([...l,S]);return}l&&s&&xt(S).isSame(l,t)?c(null):c(S)},g=S=>f instanceof Date&&h instanceof Date?yle(S,[h,f]):l[0]instanceof Date&&l[1]instanceof Date?yle(S,l):!1,y=e==="range"?S=>{a==null||a(S),p(null)}:a,v=S=>l[0]instanceof Date&&xt(S).isSame(l[0],t)?!(h&&xt(h).isBefore(l[0])):!1,_=S=>l[1]instanceof Date?xt(S).isSame(l[1],t):!(l[0]instanceof Date)||!h?!1:xt(h).isBefore(l[0])&&xt(S).isSame(l[0],t),w=S=>{if(e==="range")return{selected:l.some(C=>C&&xt(C).isSame(S,t)),inRange:g(S),firstInRange:v(S),lastInRange:_(S),"data-autofocus":!!l[0]&&xt(l[0]).isSame(S,t)||void 0};if(e==="multiple")return{selected:l.some(C=>C&&xt(C).isSame(S,t)),"data-autofocus":!!l[0]&&xt(l[0]).isSame(S,t)||void 0};const T=xt(l).isSame(S,t);return{selected:T,"data-autofocus":T||void 0}},E=e==="range"&&f?p:()=>{};return k.useEffect(()=>{e==="range"&&!l[0]&&!l[1]&&d(null)},[n]),{onDateChange:m,onRootMouseLeave:y,onHoveredDateChange:E,getControlProps:w,_value:l,setValue:c}}const $7t={type:"default",defaultLevel:"month",numberOfColumns:1},mM=Oe((e,t)=>{const n=_e("DatePicker",$7t,e),{classNames:r,styles:i,vars:o,type:s,defaultValue:a,value:u,onChange:l,__staticSelector:c,getDayProps:f,allowSingleDateInRange:d,allowDeselect:h,onMouseLeave:p,numberOfColumns:m,hideOutsideDates:g,__onDayMouseEnter:y,__onDayClick:v,__timezoneApplied:_,...w}=n,{onDateChange:E,onRootMouseLeave:S,onHoveredDateChange:T,getControlProps:C}=O7t({type:s,level:"day",allowDeselect:h,allowSingleDateInRange:d,value:u,defaultValue:a,onChange:l,onMouseLeave:p,applyTimezone:!_}),{resolvedClassNames:A,resolvedStyles:R}=gh({classNames:r,styles:i,props:n}),N=Pu();return b.jsx(pM,{ref:t,minLevel:"month",classNames:A,styles:R,__staticSelector:c||"DatePicker",onMouseLeave:S,numberOfColumns:m,hideOutsideDates:g??m!==1,__onDayMouseEnter:(O,D)=>{T(D),y==null||y(O,D)},__onDayClick:(O,D)=>{E(D),v==null||v(O,D)},getDayProps:O=>({...C(O),...f==null?void 0:f(O)}),...w,date:Qp("add",w.date,N.getTimezone(),_),__timezoneApplied:!0})});mM.classes=pM.classes;mM.displayName="@mantine/dates/DatePicker";function M7t({type:e,value:t,defaultValue:n,onChange:r,locale:i,format:o,closeOnChange:s,sortDates:a,labelSeparator:u,valueFormatter:l}){const c=Pu(),[f,d]=lD(!1),[h,p]=AX({type:e,value:t,defaultValue:n,onChange:r}),m=HBt({type:e,date:h,locale:c.getLocale(i),format:o,labelSeparator:c.getLabelSeparator(u),formatter:l}),g=_=>{s&&(e==="default"&&d.close(),e==="range"&&_[0]&&_[1]&&d.close()),p(a&&e==="multiple"?[..._].sort((w,E)=>w.getTime()-E.getTime()):_)},y=()=>g(e==="range"?[null,null]:e==="multiple"?[]:null),v=e==="range"?!!h[0]:e==="multiple"?h.length>0:h!==null;return{_value:h,setValue:g,onClear:y,shouldClear:v,formattedValue:m,dropdownOpened:f,dropdownHandlers:d}}const L7t={type:"default",valueFormat:"MMMM D, YYYY",closeOnChange:!0,sortDates:!0,dropdownType:"popover"},kX=Oe((e,t)=>{const n=_e("DatePickerInput",L7t,e),{type:r,value:i,defaultValue:o,onChange:s,valueFormat:a,labelSeparator:u,locale:l,classNames:c,styles:f,unstyled:d,closeOnChange:h,size:p,variant:m,dropdownType:g,sortDates:y,minDate:v,maxDate:_,vars:w,defaultDate:E,valueFormatter:S,...T}=n,{resolvedClassNames:C,resolvedStyles:A}=gh({classNames:c,styles:f,props:n}),{calendarProps:R,others:N}=D7t(T),{_value:O,setValue:D,formattedValue:M,dropdownHandlers:F,dropdownOpened:L,onClear:B,shouldClear:U}=M7t({type:r,value:i,defaultValue:o,onChange:s,locale:l,format:a,labelSeparator:u,closeOnChange:h,sortDates:y,valueFormatter:S}),H=Array.isArray(O)?O[0]||E:O||E,P=Pu();return b.jsx(hM,{formattedValue:M,dropdownOpened:L,dropdownHandlers:F,classNames:C,styles:A,unstyled:d,ref:t,onClear:B,shouldClear:U,value:O,size:p,variant:m,dropdownType:g,...N,type:r,__staticSelector:"DatePickerInput",children:b.jsx(mM,{...R,size:p,variant:m,type:r,value:O,defaultDate:H||ZBt({maxDate:_,minDate:v,timezone:P.getTimezone()}),onChange:D,locale:l,classNames:C,styles:A,unstyled:d,__staticSelector:"DatePickerInput",__stopPropagation:g==="popover",minDate:v,maxDate:_,date:Qp("add",R.date,P.getTimezone()),__timezoneApplied:!0})})});kX.classes={...hM.classes,...mM.classes};kX.displayName="@mantine/dates/DatePickerInput";function F7t(e,t){const n=Object.values(e).map(r=>[r.startTime,r.endTime]).flat();return t[0]===null||t[1]===null?!1:Math.min(...n)>=t[0].getTime()&&Math.max(...n)<=t[1].getTime()}function j7t({studyId:e,allParticipants:t}){const n=$f(),[r,i]=a7(),o=t.filter(p=>p.completed).map(p=>Math.max(...Object.values(p.answers).map(m=>m.endTime).filter(m=>m!==void 0))).filter(p=>Number.isFinite(p)),[s,a]=k.useState([new Date(new Date(Math.min(...o.length>0?o:[new Date().getTime()])).setHours(0,0,0,0)),new Date(new Date(Math.max(...o.length>0?o:[new Date().getTime()])).setHours(24,0,0,0))]),[u,l,c,f]=k.useMemo(()=>{const p=t.filter(y=>!y.rejected&&y.completed),m=t.filter(y=>!y.rejected&&!y.completed),g=t.filter(y=>y.rejected);return[p,m,g,p.filter(y=>F7t(y.answers,s))]},[t,s]),d=k.useMemo(()=>{var p,m;return f.length>0?[{Date:(p=s[0])==null?void 0:p.getTime(),Participants:0},...f.map(g=>Math.max(...Object.values(g.answers).map(y=>y.endTime).flat())).sort((g,y)=>g-y).map((g,y)=>({Date:g,Participants:y})),{Date:(m=s[1])==null?void 0:m.getTime(),Participants:f.length}]:[]},[f,s]),h=k.useMemo(()=>{var p,m;return{width:i.width-40-8,height:200,mark:{type:"line",interpolate:"step-before"},encoding:{x:{field:"Date",type:"temporal",scale:{domain:[(p=s[0])==null?void 0:p.getTime(),(m=s[1])==null?void 0:m.getTime()]}},y:{field:"Participants",type:"quantitative"}},data:{values:d}}},[i.width,s,d]);return b.jsx(sl,{children:b.jsxs(xy,{ref:r,padding:"lg",shadow:"md",withBorder:!0,children:[b.jsxs(kt,{align:"center",mb:"xs",justify:"space-between",children:[b.jsxs(kt,{direction:"row",align:"center",children:[b.jsx(kr,{order:5,children:e}),b.jsx(cEe,{completed:u.length,inProgress:l.length,rejected:c.length,filteredCompleted:f.length})]}),b.jsxs(qs,{children:[b.jsx(Fq,{allParticipants:t,studyId:e}),b.jsx(zr,{label:"Analyze and manage study data",children:b.jsx(on,{onClick:p=>{!p.ctrlKey&&!p.metaKey&&(p.preventDefault(),n(`/analysis/stats/${e}`))},px:4,component:"a",href:`${Ra}analysis/stats/${e}`,children:b.jsx(J9e,{})})})]})]}),b.jsx(kX,{type:"range",label:"Time Filter",placeholder:"Select a date range",value:s,onChange:a}),d.length>0?b.jsxs(b.Fragment,{children:[b.jsx(je,{mt:16,children:"Finished Participants"}),b.jsx(aB,{spec:h,actions:!1})]}):b.jsx(he,{h:293.4,children:b.jsx(nm,{style:{height:"100%"},children:b.jsx(je,{children:"Not enough participants for chart"})})})]})})}function B7t({globalConfig:e}){const[t,n]=k.useState(!1),[r,i]=k.useState({}),[o,s]=k.useState({}),{storageEngine:a}=$i(),{user:u}=Uy();k.useEffect(()=>{(async()=>{n(!0);const f={},d={},h=async m=>{const g=await qO(m,e);if(a){if(f[m]=await a.getAllParticipantsDataByStudy(m),g===null)return;if(a instanceof qu){const y=await a.getModes(m);d[m]=y.analyticsInterfacePubliclyAccessible}}};await(async()=>{const m=e.configsList.map(g=>h(g));try{await Promise.all(m),i(f),s(d)}catch(g){console.error("Error fetching data:",g)}finally{n(!1)}})()})()},[e,a]);const l=e.configsList.map(c=>r[c]&&((o[c]||u.isAdmin)&&!e.configs[c].test?b.jsx(Ku.Col,{span:{md:12,xl:6},children:b.jsx(j7t,{studyId:c,allParticipants:r[c]})},`${c}-panel`):null));return b.jsxs(b.Fragment,{children:[b.jsx(qx,{studyIds:e.configsList}),b.jsx(Or.Main,{children:b.jsx(sl,{fluid:!0,children:b.jsxs(he,{children:[b.jsx(kr,{mb:20,order:4,children:"Your Studies:"}),b.jsxs(Ku,{children:[l.length>0?l:b.jsx(sl,{mt:100,children:b.jsx(je,{children:"No studies to show. If you believe that this is in error, make sure that you are logged in."})}),b.jsx(gu,{visible:t})]})]})})})]})}function U7t(){const{user:e,triggerAuth:t}=Uy(),{storageEngine:n}=$i(),[r,i]=k.useState(!1),[o,s]=k.useState([]),[a,u]=k.useState(!1),[l,c]=k.useState(!1),[f,d]=k.useState(!1),[h,p]=k.useState(!1),[m,g]=k.useState(!1),[y,v]=k.useState(""),[_,w]=k.useState(null),E=Lge({initialValues:{email:""},validate:{email:JGe("Invalid email")}});k.useEffect(()=>{(async()=>{if(u(!0),n instanceof qu){const D=await(n==null?void 0:n.getUserManagementData("authentication"));i(D==null?void 0:D.isEnabled);const M=await(n==null?void 0:n.getUserManagementData("adminUsers"));M&&M.adminUsersList&&s(M==null?void 0:M.adminUsersList.map(F=>F.email))}else i(!1);u(!1)})()},[n]);const S=async()=>{if(u(!0),n instanceof qu){const O=await ARe(n,u);O&&O.email?(w({email:O.email,uid:O.uid}),p(!0)):g(!0)}u(!1)},T=async O=>{u(!0),n instanceof qu&&O&&(await n.changeAuth(!0),await n.addAdminUser(O),s([O.email]),i(!0),t()),p(!1),u(!1)},C=async()=>{if(u(!0),n instanceof qu){await n.addAdminUser({email:E.values.email,uid:null});const O=await n.getUserManagementData("adminUsers");s(O==null?void 0:O.adminUsersList.map(D=>D.email))}u(!1),c(!1),E.setValues({email:""})},A=O=>{d(!0),v(O)},R=async()=>{if(u(!0),n instanceof qu){await n.removeAdminUser(y);const O=await n.getUserManagementData("adminUsers");s(O==null?void 0:O.adminUsersList.map(D=>D.email))}d(!1),u(!1)},N=k.useMemo(()=>n instanceof qu,[n]);return b.jsxs(b.Fragment,{children:[b.jsx(sl,{children:b.jsxs(xy,{withBorder:!0,style:{backgroundColor:"#FAFAFA"},children:[b.jsx(kr,{mb:20,order:3,children:"Authentication"}),r?b.jsx(kt,{children:b.jsx(je,{children:"Authentication is enabled."})}):b.jsxs(kt,{justify:"space-between",children:[b.jsx(he,{children:b.jsx(je,{children:"Authentication is currently disabled."})}),b.jsx(zr,{label:"You can only enable auth when using Firebase",disabled:N,children:b.jsx(on,{onClick:O=>N?S():O.preventDefault(),color:"green","data-disabled":N?void 0:!0,style:{"&[dataDisabled]":{pointerEvents:"all"}},children:"Enable Authentication"})})]}),r?b.jsxs(kt,{mt:40,direction:"column",children:[b.jsxs(kt,{style:{borderBottom:"1px solid #dedede"},direction:"row",justify:"space-between",mb:15,pb:15,children:[b.jsx(kr,{order:6,children:"Enabled Users"}),b.jsx(rz,{style:{cursor:"pointer"},onClick:()=>c(!0)})]}),o.length>0?o.map(O=>{var D;return b.jsxs(kt,{justify:"space-between",mb:10,children:[b.jsx(je,{children:O}),O===((D=e.user)==null?void 0:D.email)?b.jsx(je,{color:"blue",size:"xs",children:"You"}):b.jsx(Ey,{variant:"subtle",onClick:()=>A(O),children:b.jsx($pe,{color:"red"})})]},O)}):null]}):null]})}),b.jsx(li,{opened:l,onClose:()=>c(!1),title:"Add Admin User",children:b.jsxs(he,{component:"form",onSubmit:E.onSubmit(()=>C()),children:[b.jsx(pp,{leftSection:b.jsx(G9e,{}),placeholder:"User Gmail Account",...E.getInputProps("email")}),b.jsxs(kt,{mt:30,justify:"right",children:[b.jsx(on,{mr:5,variant:"subtle",color:"red",onClick:()=>c(!1),children:"Cancel"}),b.jsx(on,{type:"submit",children:"Save"})]})]})}),b.jsxs(li,{opened:f,size:"large",onClose:()=>d(!1),title:b.jsxs(je,{fw:700,children:["Remove",y,"?"]}),children:[b.jsxs(je,{mt:40,children:["Are you sure you want to remove",b.jsx("b",{children:y})," ","as an administrator?"]}),b.jsxs(kt,{mt:40,justify:"right",children:[b.jsx(on,{mr:5,variant:"subtle",color:"red",onClick:()=>d(!1),children:"Cancel"}),b.jsx(on,{onClick:()=>R(),children:"Yes, I'm sure."})]})]}),b.jsxs(li,{opened:h,size:"md",onClose:()=>p(!1),title:b.jsx(je,{fw:700,children:"Enable Authentication?"}),children:[b.jsxs(je,{mt:40,children:["User"," ",b.jsx("b",{children:_==null?void 0:_.email})," ","will be added as an administrator to this application. After enabling authentication, you'll be able to add additional users below. This action cannot be undone."]}),b.jsxs(kt,{mt:40,justify:"right",children:[b.jsx(on,{mr:5,variant:"subtle",color:"red",onClick:()=>p(!1),children:"Cancel"}),b.jsx(on,{onClick:()=>T(_),children:"Yes, I'm sure."})]})]}),b.jsxs(li,{opened:m,size:"md",onClose:()=>g(!1),title:b.jsx(je,{fw:700,children:"An Error Occurred."}),children:[b.jsxs(je,{mt:40,children:["An error has occurred when trying to enable authentication. Please consult the"," ",b.jsx("a",{href:"https://revisit.dev/docs/data-and-deployment/authentication-authorization/adding-removing-ui/",target:"_blank",rel:"noreferrer",children:"documentation"})," ","for more information."]}),b.jsx(kt,{mt:40,justify:"right",children:b.jsx(on,{mr:5,onClick:()=>g(!1),children:"Okay"})})]}),b.jsx(gu,{visible:a})]})}class z7t extends uEe{constructor(){super("localStorage");ia(this,"studyDatabase");ia(this,"studyId")}async connect(){this.connected=!0}async initializeStudyDb(n,r){this.studyId=n,this.studyDatabase=await Hv.createInstance({name:n});const i=await this.getCurrentConfigHash(),o=await GN(JSON.stringify(r));i&&i!==o&&(await this.studyDatabase.removeItem("sequenceArray"),await this.clearCurrentParticipantId()),this.studyDatabase.setItem("currentConfigHash",o);const s=await this.studyDatabase.getItem("configs");await this.studyDatabase.setItem("configs",{...s,[o]:r})}async initializeParticipantSession(n,r,i,o,s){var f;if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");if(await this.getCurrentParticipantId(s),!this.currentParticipantId)throw new Error("Participant not initialized");const a=await this.studyDatabase.getItem(this.currentParticipantId);if(a)return a;const u=await this.getModes(n),l=await GN(JSON.stringify(i)),c={participantId:this.currentParticipantId,participantConfigHash:l,sequence:await this.getSequence(),answers:{},searchParams:r,metadata:o,completed:!1,rejected:!1};return u.dataCollectionEnabled&&await((f=this.studyDatabase)==null?void 0:f.setItem(this.currentParticipantId,c)),c}async getCurrentConfigHash(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");return await this.studyDatabase.getItem("currentConfigHash")}async getAllConfigsFromHash(n,r){return await Hv.createInstance({name:r}).getItem("configs")||{}}async getCurrentParticipantId(n){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const r=await this.studyDatabase.getItem("currentParticipant");if(n)return this.currentParticipantId=n,await this.studyDatabase.setItem("currentParticipant",n),n;if(r)return this.currentParticipantId=r,r;const i=WN();return await this.studyDatabase.setItem("currentParticipant",i),this.currentParticipantId=i,i}async clearCurrentParticipantId(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");await this.studyDatabase.removeItem("currentParticipant")}async saveAnswers(n){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");if(!this.currentParticipantId)throw new Error("Participant not initialized");const r=await this.studyDatabase.getItem(this.currentParticipantId);if(!r)throw new Error("Participant not initialized");r.answers=n,await this.studyDatabase.setItem(this.currentParticipantId,r)}async setSequenceArray(n){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");this.studyDatabase.setItem("sequenceArray",n)}async getSequence(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=await this.studyDatabase.getItem("sequenceArray");if(!n)throw new Error("Latin square not initialized");if(!this.studyId)throw new Error("Study ID not initialized");const r=await this.getModes(this.studyId),i=r.dataCollectionEnabled?n.pop():n[Math.floor(Math.random()*n.length-1)];if(!i)throw new Error("Latin square is empty");return r.dataCollectionEnabled&&await this.studyDatabase.setItem("sequenceArray",n),i}async getSequenceArray(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");return await this.studyDatabase.getItem("sequenceArray")}async getAllParticipantsData(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=[];return await this.studyDatabase.iterate((r,i)=>{i!=="config"&&i!=="currentParticipant"&&i!=="sequenceArray"&&i!=="configs"&&i!=="currentConfigHash"&&i!=="modes"&&n.push(r)}),n}async getAllParticipantsDataByStudy(n){const r=Hv.createInstance({name:n}),i=[];return await r.iterate((o,s)=>{s!=="config"&&s!=="currentParticipant"&&s!=="sequenceArray"&&s!=="configs"&&s!=="currentConfigHash"&&s!=="modes"&&i.push(o)}),i}async getParticipantData(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=await this.studyDatabase.getItem("currentParticipant");return n?await this.studyDatabase.getItem(n):null}async nextParticipant(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=WN();this.studyDatabase.setItem("currentParticipant",n)}async verifyCompletion(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=await this.getParticipantData();if(!n)throw new Error("Participant not initialized");return n.completed=!0,await this.studyDatabase.setItem(this.currentParticipantId,n),!0}async validateUser(n){return!0}async rejectParticipant(n,r){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const i=await this.studyDatabase.getItem(r);if(!i)throw new Error("Participant not found");if(i.rejected)return;i.rejected=!0;const o=await this.studyDatabase.getItem("sequenceArray");o&&(o.unshift(i.sequence),this.setSequenceArray(o)),await this.studyDatabase.setItem(r,i)}async setMode(n,r,i){this.studyDatabase=await Hv.createInstance({name:n});const o=await this.studyDatabase.getItem("modes");if(!o)throw new Error("Modes not initialized");o[r]=i,this.studyDatabase.setItem("modes",o)}async getModes(n){this.studyDatabase=await Hv.createInstance({name:n});const r=await this.studyDatabase.getItem("modes");if(r)return r;const i={dataCollectionEnabled:!0,studyNavigatorEnabled:!0,analyticsInterfacePubliclyAccessible:!0};return this.studyDatabase.setItem("modes",i),i}_verifyStudyDatabase(n){return n!==void 0}}async function V7t(){let e,t=!1;{const n=new qu;await n.connect(),n.isConnected()?e=n:t=!0}if(t){const n=new z7t;await n.connect(),e=n}return e}function $v({title:e}){const t=jm();return k.useEffect(()=>{document.title=e},[t,e]),null}async function H7t(){const t=await(await fetch(`${Ra}global.json`)).text();return wdt(t)}function q7t(){const[e,t]=k.useState(null),[n,r]=k.useState({});k.useEffect(()=>{async function a(){e&&r(await Gdt(e))}a()},[e]),k.useEffect(()=>{e||H7t().then(a=>{t(a)})},[e]);const{storageEngine:i,setStorageEngine:o}=$i();k.useEffect(()=>{if(i!==void 0)return;async function a(){const u=await V7t();o(u)}a()},[o,i]);const s=async a=>i instanceof qu?!(await i.getModes(a)).analyticsInterfacePubliclyAccessible:!1;return e?b.jsx(M9e,{basename:Ra,children:b.jsx(Wbt,{children:b.jsx(z9e,{children:b.jsx(Or,{padding:"md",header:{height:70},children:b.jsxs(P9e,{children:[b.jsx(fd,{path:"/",element:b.jsxs(b.Fragment,{children:[b.jsx($v,{title:"ReVISit | Home"}),b.jsx(qx,{studyIds:e.configsList}),b.jsx(rWe,{globalConfig:e,studyConfigs:n})]})}),b.jsx(fd,{path:"/:studyId/*",element:b.jsxs(b.Fragment,{children:[b.jsx($v,{title:"ReVISit | Study"}),b.jsx(Ydt,{globalConfig:e})]})}),b.jsx(fd,{path:"/analysis/dashboard",element:b.jsxs(b.Fragment,{children:[b.jsx($v,{title:"ReVISit | Analysis"}),b.jsx(B7t,{globalConfig:e})]})}),b.jsx(fd,{path:"/analysis",element:b.jsx(t9,{to:"/analysis/dashboard"})}),b.jsx(fd,{path:"/analysis/stats/:studyId/:tab/:trialId?",element:b.jsxs(b.Fragment,{children:[b.jsx($v,{title:"ReVISit | Analysis"}),b.jsx(ple,{paramToCheck:"studyId",paramCallback:s,children:b.jsx(BBt,{globalConfig:e})})]})}),b.jsx(fd,{path:"/analysis/stats/:studyId",element:b.jsx(t9,{to:"./table",replace:!0})}),b.jsx(fd,{path:"/settings",element:b.jsxs(ple,{children:[b.jsx($v,{title:"ReVISit | Settings"}),b.jsx(qx,{studyIds:e.configsList}),b.jsx(Or.Main,{children:b.jsx(U7t,{})})]})}),b.jsx(fd,{path:"/login",element:b.jsxs(b.Fragment,{children:[b.jsx($v,{title:"ReVISit | Login"}),b.jsx(qx,{studyIds:e.configsList}),b.jsx(Or.Main,{children:b.jsx(UBt,{})})]})})]})})})})}):null}Q4.createRoot(document.getElementById("root")).render(b.jsx(Yn.StrictMode,{children:b.jsx(zje,{children:b.jsxs(Jfe,{children:[b.jsx(Sh,{}),b.jsx(q7t,{})]})})}))});export default W7t();
