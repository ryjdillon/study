var n8e=Object.defineProperty;var r8e=(e,t,n)=>t in e?n8e(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var i8e=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var pu=(e,t,n)=>(r8e(e,typeof t!="symbol"?t+"":t,n),n);var dun=i8e((Eln,wie)=>{function s8e(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in e)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(e,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var to=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Xl(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function o8e(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var i=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return e[r]}})}),n}var wye={exports:{}},rL={},Eye={exports:{}},Mn={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ek=Symbol.for("react.element"),a8e=Symbol.for("react.portal"),u8e=Symbol.for("react.fragment"),l8e=Symbol.for("react.strict_mode"),c8e=Symbol.for("react.profiler"),f8e=Symbol.for("react.provider"),d8e=Symbol.for("react.context"),h8e=Symbol.for("react.forward_ref"),p8e=Symbol.for("react.suspense"),m8e=Symbol.for("react.memo"),g8e=Symbol.for("react.lazy"),qie=Symbol.iterator;function y8e(e){return e===null||typeof e!="object"?null:(e=qie&&e[qie]||e["@@iterator"],typeof e=="function"?e:null)}var xye={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Sye=Object.assign,Tye={};function qx(e,t,n){this.props=e,this.context=t,this.refs=Tye,this.updater=n||xye}qx.prototype.isReactComponent={};qx.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};qx.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Cye(){}Cye.prototype=qx.prototype;function Lq(e,t,n){this.props=e,this.context=t,this.refs=Tye,this.updater=n||xye}var Fq=Lq.prototype=new Cye;Fq.constructor=Lq;Sye(Fq,qx.prototype);Fq.isPureReactComponent=!0;var Wie=Array.isArray,Aye=Object.prototype.hasOwnProperty,jq={current:null},Iye={key:!0,ref:!0,__self:!0,__source:!0};function kye(e,t,n){var r,i={},s=null,o=null;if(t!=null)for(r in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(s=""+t.key),t)Aye.call(t,r)&&!Iye.hasOwnProperty(r)&&(i[r]=t[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var u=Array(a),l=0;l<a;l++)u[l]=arguments[l+2];i.children=u}if(e&&e.defaultProps)for(r in a=e.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:ek,type:e,key:s,ref:o,props:i,_owner:jq.current}}function v8e(e,t){return{$$typeof:ek,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Bq(e){return typeof e=="object"&&e!==null&&e.$$typeof===ek}function b8e(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Gie=/\/+/g;function Z5(e,t){return typeof e=="object"&&e!==null&&e.key!=null?b8e(""+e.key):t.toString(36)}function XP(e,t,n,r,i){var s=typeof e;(s==="undefined"||s==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case ek:case a8e:o=!0}}if(o)return o=e,i=i(o),e=r===""?"."+Z5(o,0):r,Wie(i)?(n="",e!=null&&(n=e.replace(Gie,"$&/")+"/"),XP(i,t,n,"",function(l){return l})):i!=null&&(Bq(i)&&(i=v8e(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(Gie,"$&/")+"/")+e)),t.push(i)),1;if(o=0,r=r===""?".":r+":",Wie(e))for(var a=0;a<e.length;a++){s=e[a];var u=r+Z5(s,a);o+=XP(s,t,n,u,i)}else if(u=y8e(e),typeof u=="function")for(e=u.call(e),a=0;!(s=e.next()).done;)s=s.value,u=r+Z5(s,a++),o+=XP(s,t,n,u,i);else if(s==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function aN(e,t,n){if(e==null)return e;var r=[],i=0;return XP(e,r,"","",function(s){return t.call(n,s,i++)}),r}function _8e(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var su={current:null},QP={transition:null},w8e={ReactCurrentDispatcher:su,ReactCurrentBatchConfig:QP,ReactCurrentOwner:jq};function Rye(){throw Error("act(...) is not supported in production builds of React.")}Mn.Children={map:aN,forEach:function(e,t,n){aN(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return aN(e,function(){t++}),t},toArray:function(e){return aN(e,function(t){return t})||[]},only:function(e){if(!Bq(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Mn.Component=qx;Mn.Fragment=u8e;Mn.Profiler=c8e;Mn.PureComponent=Lq;Mn.StrictMode=l8e;Mn.Suspense=p8e;Mn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=w8e;Mn.act=Rye;Mn.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=Sye({},e.props),i=e.key,s=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(s=t.ref,o=jq.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(u in t)Aye.call(t,u)&&!Iye.hasOwnProperty(u)&&(r[u]=t[u]===void 0&&a!==void 0?a[u]:t[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){a=Array(u);for(var l=0;l<u;l++)a[l]=arguments[l+2];r.children=a}return{$$typeof:ek,type:e.type,key:i,ref:s,props:r,_owner:o}};Mn.createContext=function(e){return e={$$typeof:d8e,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:f8e,_context:e},e.Consumer=e};Mn.createElement=kye;Mn.createFactory=function(e){var t=kye.bind(null,e);return t.type=e,t};Mn.createRef=function(){return{current:null}};Mn.forwardRef=function(e){return{$$typeof:h8e,render:e}};Mn.isValidElement=Bq;Mn.lazy=function(e){return{$$typeof:g8e,_payload:{_status:-1,_result:e},_init:_8e}};Mn.memo=function(e,t){return{$$typeof:m8e,type:e,compare:t===void 0?null:t}};Mn.startTransition=function(e){var t=QP.transition;QP.transition={};try{e()}finally{QP.transition=t}};Mn.unstable_act=Rye;Mn.useCallback=function(e,t){return su.current.useCallback(e,t)};Mn.useContext=function(e){return su.current.useContext(e)};Mn.useDebugValue=function(){};Mn.useDeferredValue=function(e){return su.current.useDeferredValue(e)};Mn.useEffect=function(e,t){return su.current.useEffect(e,t)};Mn.useId=function(){return su.current.useId()};Mn.useImperativeHandle=function(e,t,n){return su.current.useImperativeHandle(e,t,n)};Mn.useInsertionEffect=function(e,t){return su.current.useInsertionEffect(e,t)};Mn.useLayoutEffect=function(e,t){return su.current.useLayoutEffect(e,t)};Mn.useMemo=function(e,t){return su.current.useMemo(e,t)};Mn.useReducer=function(e,t,n){return su.current.useReducer(e,t,n)};Mn.useRef=function(e){return su.current.useRef(e)};Mn.useState=function(e){return su.current.useState(e)};Mn.useSyncExternalStore=function(e,t,n){return su.current.useSyncExternalStore(e,t,n)};Mn.useTransition=function(){return su.current.useTransition()};Mn.version="18.3.1";Eye.exports=Mn;var I=Eye.exports;const _r=Xl(I),mO=s8e({__proto__:null,default:_r},[I]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var E8e=I,x8e=Symbol.for("react.element"),S8e=Symbol.for("react.fragment"),T8e=Object.prototype.hasOwnProperty,C8e=E8e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,A8e={key:!0,ref:!0,__self:!0,__source:!0};function Nye(e,t,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),t.key!==void 0&&(s=""+t.key),t.ref!==void 0&&(o=t.ref);for(r in t)T8e.call(t,r)&&!A8e.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)i[r]===void 0&&(i[r]=t[r]);return{$$typeof:x8e,type:e,key:s,ref:o,props:i,_owner:C8e.current}}rL.Fragment=S8e;rL.jsx=Nye;rL.jsxs=Nye;wye.exports=rL;var b=wye.exports,XB={},Pye={exports:{}},Ql={},Dye={exports:{}},Oye={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(U,H){var P=U.length;U.push(H);e:for(;0<P;){var z=P-1>>>1,W=U[z];if(0<i(W,H))U[z]=H,U[P]=W,P=z;else break e}}function n(U){return U.length===0?null:U[0]}function r(U){if(U.length===0)return null;var H=U[0],P=U.pop();if(P!==H){U[0]=P;e:for(var z=0,W=U.length,j=W>>>1;z<j;){var q=2*(z+1)-1,G=U[q],ne=q+1,ce=U[ne];if(0>i(G,P))ne<W&&0>i(ce,G)?(U[z]=ce,U[ne]=P,z=ne):(U[z]=G,U[q]=P,z=q);else if(ne<W&&0>i(ce,P))U[z]=ce,U[ne]=P,z=ne;else break e}}return H}function i(U,H){var P=U.sortIndex-H.sortIndex;return P!==0?P:U.id-H.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();e.unstable_now=function(){return o.now()-a}}var u=[],l=[],c=1,f=null,d=3,h=!1,p=!1,m=!1,g=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function _(U){for(var H=n(l);H!==null;){if(H.callback===null)r(l);else if(H.startTime<=U)r(l),H.sortIndex=H.expirationTime,t(u,H);else break;H=n(l)}}function w(U){if(m=!1,_(U),!p)if(n(u)!==null)p=!0,M(E);else{var H=n(l);H!==null&&B(w,H.startTime-U)}}function E(U,H){p=!1,m&&(m=!1,y(C),C=-1),h=!0;var P=d;try{for(_(H),f=n(u);f!==null&&(!(f.expirationTime>H)||U&&!N());){var z=f.callback;if(typeof z=="function"){f.callback=null,d=f.priorityLevel;var W=z(f.expirationTime<=H);H=e.unstable_now(),typeof W=="function"?f.callback=W:f===n(u)&&r(u),_(H)}else r(u);f=n(u)}if(f!==null)var j=!0;else{var q=n(l);q!==null&&B(w,q.startTime-H),j=!1}return j}finally{f=null,d=P,h=!1}}var S=!1,T=null,C=-1,A=5,k=-1;function N(){return!(e.unstable_now()-k<A)}function O(){if(T!==null){var U=e.unstable_now();k=U;var H=!0;try{H=T(!0,U)}finally{H?D():(S=!1,T=null)}}else S=!1}var D;if(typeof v=="function")D=function(){v(O)};else if(typeof MessageChannel<"u"){var $=new MessageChannel,F=$.port2;$.port1.onmessage=O,D=function(){F.postMessage(null)}}else D=function(){g(O,0)};function M(U){T=U,S||(S=!0,D())}function B(U,H){C=g(function(){U(e.unstable_now())},H)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(U){U.callback=null},e.unstable_continueExecution=function(){p||h||(p=!0,M(E))},e.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<U?Math.floor(1e3/U):5},e.unstable_getCurrentPriorityLevel=function(){return d},e.unstable_getFirstCallbackNode=function(){return n(u)},e.unstable_next=function(U){switch(d){case 1:case 2:case 3:var H=3;break;default:H=d}var P=d;d=H;try{return U()}finally{d=P}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(U,H){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var P=d;d=U;try{return H()}finally{d=P}},e.unstable_scheduleCallback=function(U,H,P){var z=e.unstable_now();switch(typeof P=="object"&&P!==null?(P=P.delay,P=typeof P=="number"&&0<P?z+P:z):P=z,U){case 1:var W=-1;break;case 2:W=250;break;case 5:W=1073741823;break;case 4:W=1e4;break;default:W=5e3}return W=P+W,U={id:c++,callback:H,priorityLevel:U,startTime:P,expirationTime:W,sortIndex:-1},P>z?(U.sortIndex=P,t(l,U),n(u)===null&&U===n(l)&&(m?(y(C),C=-1):m=!0,B(w,P-z))):(U.sortIndex=W,t(u,U),p||h||(p=!0,M(E))),U},e.unstable_shouldYield=N,e.unstable_wrapCallback=function(U){var H=d;return function(){var P=d;d=H;try{return U.apply(this,arguments)}finally{d=P}}}})(Oye);Dye.exports=Oye;var I8e=Dye.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var k8e=I,Ml=I8e;function tt(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var $ye=new Set,aA={};function kb(e,t){CE(e,t),CE(e+"Capture",t)}function CE(e,t){for(aA[e]=t,e=0;e<t.length;e++)$ye.add(t[e])}var mm=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),QB=Object.prototype.hasOwnProperty,R8e=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Yie={},Kie={};function N8e(e){return QB.call(Kie,e)?!0:QB.call(Yie,e)?!1:R8e.test(e)?Kie[e]=!0:(Yie[e]=!0,!1)}function P8e(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function D8e(e,t,n,r){if(t===null||typeof t>"u"||P8e(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function ou(e,t,n,r,i,s,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var Lo={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Lo[e]=new ou(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Lo[t]=new ou(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Lo[e]=new ou(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Lo[e]=new ou(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Lo[e]=new ou(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Lo[e]=new ou(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Lo[e]=new ou(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Lo[e]=new ou(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Lo[e]=new ou(e,5,!1,e.toLowerCase(),null,!1,!1)});var Uq=/[\-:]([a-z])/g;function zq(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Uq,zq);Lo[t]=new ou(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Uq,zq);Lo[t]=new ou(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Uq,zq);Lo[t]=new ou(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Lo[e]=new ou(e,1,!1,e.toLowerCase(),null,!1,!1)});Lo.xlinkHref=new ou("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Lo[e]=new ou(e,1,!1,e.toLowerCase(),null,!0,!0)});function Vq(e,t,n,r){var i=Lo.hasOwnProperty(t)?Lo[t]:null;(i!==null?i.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(D8e(t,n,i,r)&&(n=null),r||i===null?N8e(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=n===null?i.type===3?!1:"":n:(t=i.attributeName,r=i.attributeNamespace,n===null?e.removeAttribute(t):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var Vm=k8e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,uN=Symbol.for("react.element"),pw=Symbol.for("react.portal"),mw=Symbol.for("react.fragment"),Hq=Symbol.for("react.strict_mode"),JB=Symbol.for("react.profiler"),Mye=Symbol.for("react.provider"),Lye=Symbol.for("react.context"),qq=Symbol.for("react.forward_ref"),ZB=Symbol.for("react.suspense"),eU=Symbol.for("react.suspense_list"),Wq=Symbol.for("react.memo"),Rg=Symbol.for("react.lazy"),Fye=Symbol.for("react.offscreen"),Xie=Symbol.iterator;function hT(e){return e===null||typeof e!="object"?null:(e=Xie&&e[Xie]||e["@@iterator"],typeof e=="function"?e:null)}var Di=Object.assign,ej;function p2(e){if(ej===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);ej=t&&t[1]||""}return`
`+ej+e}var tj=!1;function nj(e,t){if(!e||tj)return"";tj=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(l){var r=l}Reflect.construct(e,[],t)}else{try{t.call()}catch(l){r=l}e.call(t.prototype)}else{try{throw Error()}catch(l){r=l}e()}}catch(l){if(l&&r&&typeof l.stack=="string"){for(var i=l.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var u=`
`+i[o].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}while(1<=o&&0<=a);break}}}finally{tj=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?p2(e):""}function O8e(e){switch(e.tag){case 5:return p2(e.type);case 16:return p2("Lazy");case 13:return p2("Suspense");case 19:return p2("SuspenseList");case 0:case 2:case 15:return e=nj(e.type,!1),e;case 11:return e=nj(e.type.render,!1),e;case 1:return e=nj(e.type,!0),e;default:return""}}function tU(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case mw:return"Fragment";case pw:return"Portal";case JB:return"Profiler";case Hq:return"StrictMode";case ZB:return"Suspense";case eU:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Lye:return(e.displayName||"Context")+".Consumer";case Mye:return(e._context.displayName||"Context")+".Provider";case qq:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Wq:return t=e.displayName||null,t!==null?t:tU(e.type)||"Memo";case Rg:t=e._payload,e=e._init;try{return tU(e(t))}catch{}}return null}function $8e(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return tU(t);case 8:return t===Hq?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function F0(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function jye(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function M8e(e){var t=jye(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function lN(e){e._valueTracker||(e._valueTracker=M8e(e))}function Bye(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=jye(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function gO(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function nU(e,t){var n=t.checked;return Di({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function Qie(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=F0(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Uye(e,t){t=t.checked,t!=null&&Vq(e,"checked",t,!1)}function rU(e,t){Uye(e,t);var n=F0(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?iU(e,t.type,n):t.hasOwnProperty("defaultValue")&&iU(e,t.type,F0(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Jie(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function iU(e,t,n){(t!=="number"||gO(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var m2=Array.isArray;function Bw(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+F0(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,r&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function sU(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(tt(91));return Di({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Zie(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(tt(92));if(m2(n)){if(1<n.length)throw Error(tt(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:F0(n)}}function zye(e,t){var n=F0(t.value),r=F0(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function ese(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Vye(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function oU(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Vye(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var cN,Hye=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(cN=cN||document.createElement("div"),cN.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=cN.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function uA(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var aC={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},L8e=["Webkit","ms","Moz","O"];Object.keys(aC).forEach(function(e){L8e.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),aC[t]=aC[e]})});function qye(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||aC.hasOwnProperty(e)&&aC[e]?(""+t).trim():t+"px"}function Wye(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=qye(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}var F8e=Di({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function aU(e,t){if(t){if(F8e[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(tt(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(tt(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(tt(61))}if(t.style!=null&&typeof t.style!="object")throw Error(tt(62))}}function uU(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var lU=null;function Gq(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var cU=null,Uw=null,zw=null;function tse(e){if(e=rk(e)){if(typeof cU!="function")throw Error(tt(280));var t=e.stateNode;t&&(t=uL(t),cU(e.stateNode,e.type,t))}}function Gye(e){Uw?zw?zw.push(e):zw=[e]:Uw=e}function Yye(){if(Uw){var e=Uw,t=zw;if(zw=Uw=null,tse(e),t)for(e=0;e<t.length;e++)tse(t[e])}}function Kye(e,t){return e(t)}function Xye(){}var rj=!1;function Qye(e,t,n){if(rj)return e(t,n);rj=!0;try{return Kye(e,t,n)}finally{rj=!1,(Uw!==null||zw!==null)&&(Xye(),Yye())}}function lA(e,t){var n=e.stateNode;if(n===null)return null;var r=uL(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(tt(231,t,typeof n));return n}var fU=!1;if(mm)try{var pT={};Object.defineProperty(pT,"passive",{get:function(){fU=!0}}),window.addEventListener("test",pT,pT),window.removeEventListener("test",pT,pT)}catch{fU=!1}function j8e(e,t,n,r,i,s,o,a,u){var l=Array.prototype.slice.call(arguments,3);try{t.apply(n,l)}catch(c){this.onError(c)}}var uC=!1,yO=null,vO=!1,dU=null,B8e={onError:function(e){uC=!0,yO=e}};function U8e(e,t,n,r,i,s,o,a,u){uC=!1,yO=null,j8e.apply(B8e,arguments)}function z8e(e,t,n,r,i,s,o,a,u){if(U8e.apply(this,arguments),uC){if(uC){var l=yO;uC=!1,yO=null}else throw Error(tt(198));vO||(vO=!0,dU=l)}}function Rb(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function Jye(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function nse(e){if(Rb(e)!==e)throw Error(tt(188))}function V8e(e){var t=e.alternate;if(!t){if(t=Rb(e),t===null)throw Error(tt(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return nse(i),e;if(s===r)return nse(i),t;s=s.sibling}throw Error(tt(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(tt(189))}}if(n.alternate!==r)throw Error(tt(190))}if(n.tag!==3)throw Error(tt(188));return n.stateNode.current===n?e:t}function Zye(e){return e=V8e(e),e!==null?eve(e):null}function eve(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=eve(e);if(t!==null)return t;e=e.sibling}return null}var tve=Ml.unstable_scheduleCallback,rse=Ml.unstable_cancelCallback,H8e=Ml.unstable_shouldYield,q8e=Ml.unstable_requestPaint,ss=Ml.unstable_now,W8e=Ml.unstable_getCurrentPriorityLevel,Yq=Ml.unstable_ImmediatePriority,nve=Ml.unstable_UserBlockingPriority,bO=Ml.unstable_NormalPriority,G8e=Ml.unstable_LowPriority,rve=Ml.unstable_IdlePriority,iL=null,ah=null;function Y8e(e){if(ah&&typeof ah.onCommitFiberRoot=="function")try{ah.onCommitFiberRoot(iL,e,void 0,(e.current.flags&128)===128)}catch{}}var Ff=Math.clz32?Math.clz32:Q8e,K8e=Math.log,X8e=Math.LN2;function Q8e(e){return e>>>=0,e===0?32:31-(K8e(e)/X8e|0)|0}var fN=64,dN=4194304;function g2(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function _O(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,i=e.suspendedLanes,s=e.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=g2(a):(s&=o,s!==0&&(r=g2(s)))}else o=n&~i,o!==0?r=g2(o):s!==0&&(r=g2(s));if(r===0)return 0;if(t!==0&&t!==r&&!(t&i)&&(i=r&-r,s=t&-t,i>=s||i===16&&(s&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-Ff(t),i=1<<n,r|=e[n],t&=~i;return r}function J8e(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Z8e(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var o=31-Ff(s),a=1<<o,u=i[o];u===-1?(!(a&n)||a&r)&&(i[o]=J8e(a,t)):u<=t&&(e.expiredLanes|=a),s&=~a}}function hU(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function ive(){var e=fN;return fN<<=1,!(fN&4194240)&&(fN=64),e}function ij(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function tk(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Ff(t),e[t]=n}function e9e(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-Ff(n),s=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~s}}function Kq(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Ff(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var Or=0;function sve(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var ove,Xq,ave,uve,lve,pU=!1,hN=[],d0=null,h0=null,p0=null,cA=new Map,fA=new Map,Bg=[],t9e="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ise(e,t){switch(e){case"focusin":case"focusout":d0=null;break;case"dragenter":case"dragleave":h0=null;break;case"mouseover":case"mouseout":p0=null;break;case"pointerover":case"pointerout":cA.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":fA.delete(t.pointerId)}}function mT(e,t,n,r,i,s){return e===null||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},t!==null&&(t=rk(t),t!==null&&Xq(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function n9e(e,t,n,r,i){switch(t){case"focusin":return d0=mT(d0,e,t,n,r,i),!0;case"dragenter":return h0=mT(h0,e,t,n,r,i),!0;case"mouseover":return p0=mT(p0,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return cA.set(s,mT(cA.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,fA.set(s,mT(fA.get(s)||null,e,t,n,r,i)),!0}return!1}function cve(e){var t=e1(e.target);if(t!==null){var n=Rb(t);if(n!==null){if(t=n.tag,t===13){if(t=Jye(n),t!==null){e.blockedOn=t,lve(e.priority,function(){ave(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function JP(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=mU(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);lU=r,n.target.dispatchEvent(r),lU=null}else return t=rk(n),t!==null&&Xq(t),e.blockedOn=n,!1;t.shift()}return!0}function sse(e,t,n){JP(e)&&n.delete(t)}function r9e(){pU=!1,d0!==null&&JP(d0)&&(d0=null),h0!==null&&JP(h0)&&(h0=null),p0!==null&&JP(p0)&&(p0=null),cA.forEach(sse),fA.forEach(sse)}function gT(e,t){e.blockedOn===t&&(e.blockedOn=null,pU||(pU=!0,Ml.unstable_scheduleCallback(Ml.unstable_NormalPriority,r9e)))}function dA(e){function t(i){return gT(i,e)}if(0<hN.length){gT(hN[0],e);for(var n=1;n<hN.length;n++){var r=hN[n];r.blockedOn===e&&(r.blockedOn=null)}}for(d0!==null&&gT(d0,e),h0!==null&&gT(h0,e),p0!==null&&gT(p0,e),cA.forEach(t),fA.forEach(t),n=0;n<Bg.length;n++)r=Bg[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Bg.length&&(n=Bg[0],n.blockedOn===null);)cve(n),n.blockedOn===null&&Bg.shift()}var Vw=Vm.ReactCurrentBatchConfig,wO=!0;function i9e(e,t,n,r){var i=Or,s=Vw.transition;Vw.transition=null;try{Or=1,Qq(e,t,n,r)}finally{Or=i,Vw.transition=s}}function s9e(e,t,n,r){var i=Or,s=Vw.transition;Vw.transition=null;try{Or=4,Qq(e,t,n,r)}finally{Or=i,Vw.transition=s}}function Qq(e,t,n,r){if(wO){var i=mU(e,t,n,r);if(i===null)pj(e,t,r,EO,n),ise(e,r);else if(n9e(i,e,t,n,r))r.stopPropagation();else if(ise(e,r),t&4&&-1<t9e.indexOf(e)){for(;i!==null;){var s=rk(i);if(s!==null&&ove(s),s=mU(e,t,n,r),s===null&&pj(e,t,r,EO,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else pj(e,t,r,null,n)}}var EO=null;function mU(e,t,n,r){if(EO=null,e=Gq(r),e=e1(e),e!==null)if(t=Rb(e),t===null)e=null;else if(n=t.tag,n===13){if(e=Jye(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return EO=e,null}function fve(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(W8e()){case Yq:return 1;case nve:return 4;case bO:case G8e:return 16;case rve:return 536870912;default:return 16}default:return 16}}var Xg=null,Jq=null,ZP=null;function dve(){if(ZP)return ZP;var e,t=Jq,n=t.length,r,i="value"in Xg?Xg.value:Xg.textContent,s=i.length;for(e=0;e<n&&t[e]===i[e];e++);var o=n-e;for(r=1;r<=o&&t[n-r]===i[s-r];r++);return ZP=i.slice(e,1<r?1-r:void 0)}function eD(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function pN(){return!0}function ose(){return!1}function Jl(e){function t(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(n=e[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?pN:ose,this.isPropagationStopped=ose,this}return Di(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=pN)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=pN)},persist:function(){},isPersistent:pN}),t}var Wx={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Zq=Jl(Wx),nk=Di({},Wx,{view:0,detail:0}),o9e=Jl(nk),sj,oj,yT,sL=Di({},nk,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:eW,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==yT&&(yT&&e.type==="mousemove"?(sj=e.screenX-yT.screenX,oj=e.screenY-yT.screenY):oj=sj=0,yT=e),sj)},movementY:function(e){return"movementY"in e?e.movementY:oj}}),ase=Jl(sL),a9e=Di({},sL,{dataTransfer:0}),u9e=Jl(a9e),l9e=Di({},nk,{relatedTarget:0}),aj=Jl(l9e),c9e=Di({},Wx,{animationName:0,elapsedTime:0,pseudoElement:0}),f9e=Jl(c9e),d9e=Di({},Wx,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),h9e=Jl(d9e),p9e=Di({},Wx,{data:0}),use=Jl(p9e),m9e={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},g9e={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},y9e={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function v9e(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=y9e[e])?!!t[e]:!1}function eW(){return v9e}var b9e=Di({},nk,{key:function(e){if(e.key){var t=m9e[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=eD(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?g9e[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:eW,charCode:function(e){return e.type==="keypress"?eD(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?eD(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),_9e=Jl(b9e),w9e=Di({},sL,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),lse=Jl(w9e),E9e=Di({},nk,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:eW}),x9e=Jl(E9e),S9e=Di({},Wx,{propertyName:0,elapsedTime:0,pseudoElement:0}),T9e=Jl(S9e),C9e=Di({},sL,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),A9e=Jl(C9e),I9e=[9,13,27,32],tW=mm&&"CompositionEvent"in window,lC=null;mm&&"documentMode"in document&&(lC=document.documentMode);var k9e=mm&&"TextEvent"in window&&!lC,hve=mm&&(!tW||lC&&8<lC&&11>=lC),cse=" ",fse=!1;function pve(e,t){switch(e){case"keyup":return I9e.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function mve(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var gw=!1;function R9e(e,t){switch(e){case"compositionend":return mve(t);case"keypress":return t.which!==32?null:(fse=!0,cse);case"textInput":return e=t.data,e===cse&&fse?null:e;default:return null}}function N9e(e,t){if(gw)return e==="compositionend"||!tW&&pve(e,t)?(e=dve(),ZP=Jq=Xg=null,gw=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return hve&&t.locale!=="ko"?null:t.data;default:return null}}var P9e={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function dse(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!P9e[e.type]:t==="textarea"}function gve(e,t,n,r){Gye(r),t=xO(t,"onChange"),0<t.length&&(n=new Zq("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var cC=null,hA=null;function D9e(e){Ave(e,0)}function oL(e){var t=bw(e);if(Bye(t))return e}function O9e(e,t){if(e==="change")return t}var yve=!1;if(mm){var uj;if(mm){var lj="oninput"in document;if(!lj){var hse=document.createElement("div");hse.setAttribute("oninput","return;"),lj=typeof hse.oninput=="function"}uj=lj}else uj=!1;yve=uj&&(!document.documentMode||9<document.documentMode)}function pse(){cC&&(cC.detachEvent("onpropertychange",vve),hA=cC=null)}function vve(e){if(e.propertyName==="value"&&oL(hA)){var t=[];gve(t,hA,e,Gq(e)),Qye(D9e,t)}}function $9e(e,t,n){e==="focusin"?(pse(),cC=t,hA=n,cC.attachEvent("onpropertychange",vve)):e==="focusout"&&pse()}function M9e(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return oL(hA)}function L9e(e,t){if(e==="click")return oL(t)}function F9e(e,t){if(e==="input"||e==="change")return oL(t)}function j9e(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Gf=typeof Object.is=="function"?Object.is:j9e;function pA(e,t){if(Gf(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!QB.call(t,i)||!Gf(e[i],t[i]))return!1}return!0}function mse(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function gse(e,t){var n=mse(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=mse(n)}}function bve(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?bve(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function _ve(){for(var e=window,t=gO();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=gO(e.document)}return t}function nW(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function B9e(e){var t=_ve(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&bve(n.ownerDocument.documentElement,n)){if(r!==null&&nW(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!e.extend&&s>r&&(i=r,r=s,s=i),i=gse(n,s);var o=gse(n,r);i&&o&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var U9e=mm&&"documentMode"in document&&11>=document.documentMode,yw=null,gU=null,fC=null,yU=!1;function yse(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;yU||yw==null||yw!==gO(r)||(r=yw,"selectionStart"in r&&nW(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),fC&&pA(fC,r)||(fC=r,r=xO(gU,"onSelect"),0<r.length&&(t=new Zq("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=yw)))}function mN(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var vw={animationend:mN("Animation","AnimationEnd"),animationiteration:mN("Animation","AnimationIteration"),animationstart:mN("Animation","AnimationStart"),transitionend:mN("Transition","TransitionEnd")},cj={},wve={};mm&&(wve=document.createElement("div").style,"AnimationEvent"in window||(delete vw.animationend.animation,delete vw.animationiteration.animation,delete vw.animationstart.animation),"TransitionEvent"in window||delete vw.transitionend.transition);function aL(e){if(cj[e])return cj[e];if(!vw[e])return e;var t=vw[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in wve)return cj[e]=t[n];return e}var Eve=aL("animationend"),xve=aL("animationiteration"),Sve=aL("animationstart"),Tve=aL("transitionend"),Cve=new Map,vse="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ty(e,t){Cve.set(e,t),kb(t,[e])}for(var fj=0;fj<vse.length;fj++){var dj=vse[fj],z9e=dj.toLowerCase(),V9e=dj[0].toUpperCase()+dj.slice(1);Ty(z9e,"on"+V9e)}Ty(Eve,"onAnimationEnd");Ty(xve,"onAnimationIteration");Ty(Sve,"onAnimationStart");Ty("dblclick","onDoubleClick");Ty("focusin","onFocus");Ty("focusout","onBlur");Ty(Tve,"onTransitionEnd");CE("onMouseEnter",["mouseout","mouseover"]);CE("onMouseLeave",["mouseout","mouseover"]);CE("onPointerEnter",["pointerout","pointerover"]);CE("onPointerLeave",["pointerout","pointerover"]);kb("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));kb("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));kb("onBeforeInput",["compositionend","keypress","textInput","paste"]);kb("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));kb("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));kb("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var y2="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),H9e=new Set("cancel close invalid load scroll toggle".split(" ").concat(y2));function bse(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,z8e(r,t,void 0,e),e.currentTarget=null}function Ave(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var o=r.length-1;0<=o;o--){var a=r[o],u=a.instance,l=a.currentTarget;if(a=a.listener,u!==s&&i.isPropagationStopped())break e;bse(i,a,l),s=u}else for(o=0;o<r.length;o++){if(a=r[o],u=a.instance,l=a.currentTarget,a=a.listener,u!==s&&i.isPropagationStopped())break e;bse(i,a,l),s=u}}}if(vO)throw e=dU,vO=!1,dU=null,e}function ai(e,t){var n=t[EU];n===void 0&&(n=t[EU]=new Set);var r=e+"__bubble";n.has(r)||(Ive(t,e,2,!1),n.add(r))}function hj(e,t,n){var r=0;t&&(r|=4),Ive(n,e,r,t)}var gN="_reactListening"+Math.random().toString(36).slice(2);function mA(e){if(!e[gN]){e[gN]=!0,$ye.forEach(function(n){n!=="selectionchange"&&(H9e.has(n)||hj(n,!1,e),hj(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[gN]||(t[gN]=!0,hj("selectionchange",!1,t))}}function Ive(e,t,n,r){switch(fve(t)){case 1:var i=i9e;break;case 4:i=s9e;break;default:i=Qq}n=i.bind(null,t,n,e),i=void 0,!fU||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),r?i!==void 0?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):i!==void 0?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function pj(e,t,n,r,i){var s=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===i||u.nodeType===8&&u.parentNode===i))return;o=o.return}for(;a!==null;){if(o=e1(a),o===null)return;if(u=o.tag,u===5||u===6){r=s=o;continue e}a=a.parentNode}}r=r.return}Qye(function(){var l=s,c=Gq(n),f=[];e:{var d=Cve.get(e);if(d!==void 0){var h=Zq,p=e;switch(e){case"keypress":if(eD(n)===0)break e;case"keydown":case"keyup":h=_9e;break;case"focusin":p="focus",h=aj;break;case"focusout":p="blur",h=aj;break;case"beforeblur":case"afterblur":h=aj;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=ase;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=u9e;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=x9e;break;case Eve:case xve:case Sve:h=f9e;break;case Tve:h=T9e;break;case"scroll":h=o9e;break;case"wheel":h=A9e;break;case"copy":case"cut":case"paste":h=h9e;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=lse}var m=(t&4)!==0,g=!m&&e==="scroll",y=m?d!==null?d+"Capture":null:d;m=[];for(var v=l,_;v!==null;){_=v;var w=_.stateNode;if(_.tag===5&&w!==null&&(_=w,y!==null&&(w=lA(v,y),w!=null&&m.push(gA(v,w,_)))),g)break;v=v.return}0<m.length&&(d=new h(d,p,null,n,c),f.push({event:d,listeners:m}))}}if(!(t&7)){e:{if(d=e==="mouseover"||e==="pointerover",h=e==="mouseout"||e==="pointerout",d&&n!==lU&&(p=n.relatedTarget||n.fromElement)&&(e1(p)||p[gm]))break e;if((h||d)&&(d=c.window===c?c:(d=c.ownerDocument)?d.defaultView||d.parentWindow:window,h?(p=n.relatedTarget||n.toElement,h=l,p=p?e1(p):null,p!==null&&(g=Rb(p),p!==g||p.tag!==5&&p.tag!==6)&&(p=null)):(h=null,p=l),h!==p)){if(m=ase,w="onMouseLeave",y="onMouseEnter",v="mouse",(e==="pointerout"||e==="pointerover")&&(m=lse,w="onPointerLeave",y="onPointerEnter",v="pointer"),g=h==null?d:bw(h),_=p==null?d:bw(p),d=new m(w,v+"leave",h,n,c),d.target=g,d.relatedTarget=_,w=null,e1(c)===l&&(m=new m(y,v+"enter",p,n,c),m.target=_,m.relatedTarget=g,w=m),g=w,h&&p)t:{for(m=h,y=p,v=0,_=m;_;_=S_(_))v++;for(_=0,w=y;w;w=S_(w))_++;for(;0<v-_;)m=S_(m),v--;for(;0<_-v;)y=S_(y),_--;for(;v--;){if(m===y||y!==null&&m===y.alternate)break t;m=S_(m),y=S_(y)}m=null}else m=null;h!==null&&_se(f,d,h,m,!1),p!==null&&g!==null&&_se(f,g,p,m,!0)}}e:{if(d=l?bw(l):window,h=d.nodeName&&d.nodeName.toLowerCase(),h==="select"||h==="input"&&d.type==="file")var E=O9e;else if(dse(d))if(yve)E=F9e;else{E=M9e;var S=$9e}else(h=d.nodeName)&&h.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(E=L9e);if(E&&(E=E(e,l))){gve(f,E,n,c);break e}S&&S(e,d,l),e==="focusout"&&(S=d._wrapperState)&&S.controlled&&d.type==="number"&&iU(d,"number",d.value)}switch(S=l?bw(l):window,e){case"focusin":(dse(S)||S.contentEditable==="true")&&(yw=S,gU=l,fC=null);break;case"focusout":fC=gU=yw=null;break;case"mousedown":yU=!0;break;case"contextmenu":case"mouseup":case"dragend":yU=!1,yse(f,n,c);break;case"selectionchange":if(U9e)break;case"keydown":case"keyup":yse(f,n,c)}var T;if(tW)e:{switch(e){case"compositionstart":var C="onCompositionStart";break e;case"compositionend":C="onCompositionEnd";break e;case"compositionupdate":C="onCompositionUpdate";break e}C=void 0}else gw?pve(e,n)&&(C="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(C="onCompositionStart");C&&(hve&&n.locale!=="ko"&&(gw||C!=="onCompositionStart"?C==="onCompositionEnd"&&gw&&(T=dve()):(Xg=c,Jq="value"in Xg?Xg.value:Xg.textContent,gw=!0)),S=xO(l,C),0<S.length&&(C=new use(C,e,null,n,c),f.push({event:C,listeners:S}),T?C.data=T:(T=mve(n),T!==null&&(C.data=T)))),(T=k9e?R9e(e,n):N9e(e,n))&&(l=xO(l,"onBeforeInput"),0<l.length&&(c=new use("onBeforeInput","beforeinput",null,n,c),f.push({event:c,listeners:l}),c.data=T))}Ave(f,t)})}function gA(e,t,n){return{instance:e,listener:t,currentTarget:n}}function xO(e,t){for(var n=t+"Capture",r=[];e!==null;){var i=e,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=lA(e,n),s!=null&&r.unshift(gA(e,s,i)),s=lA(e,t),s!=null&&r.push(gA(e,s,i))),e=e.return}return r}function S_(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function _se(e,t,n,r,i){for(var s=t._reactName,o=[];n!==null&&n!==r;){var a=n,u=a.alternate,l=a.stateNode;if(u!==null&&u===r)break;a.tag===5&&l!==null&&(a=l,i?(u=lA(n,s),u!=null&&o.unshift(gA(n,u,a))):i||(u=lA(n,s),u!=null&&o.push(gA(n,u,a)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var q9e=/\r\n?/g,W9e=/\u0000|\uFFFD/g;function wse(e){return(typeof e=="string"?e:""+e).replace(q9e,`
`).replace(W9e,"")}function yN(e,t,n){if(t=wse(t),wse(e)!==t&&n)throw Error(tt(425))}function SO(){}var vU=null,bU=null;function _U(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var wU=typeof setTimeout=="function"?setTimeout:void 0,G9e=typeof clearTimeout=="function"?clearTimeout:void 0,Ese=typeof Promise=="function"?Promise:void 0,Y9e=typeof queueMicrotask=="function"?queueMicrotask:typeof Ese<"u"?function(e){return Ese.resolve(null).then(e).catch(K9e)}:wU;function K9e(e){setTimeout(function(){throw e})}function mj(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){e.removeChild(i),dA(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);dA(t)}function m0(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function xse(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Gx=Math.random().toString(36).slice(2),Bd="__reactFiber$"+Gx,yA="__reactProps$"+Gx,gm="__reactContainer$"+Gx,EU="__reactEvents$"+Gx,X9e="__reactListeners$"+Gx,Q9e="__reactHandles$"+Gx;function e1(e){var t=e[Bd];if(t)return t;for(var n=e.parentNode;n;){if(t=n[gm]||n[Bd]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=xse(e);e!==null;){if(n=e[Bd])return n;e=xse(e)}return t}e=n,n=e.parentNode}return null}function rk(e){return e=e[Bd]||e[gm],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function bw(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(tt(33))}function uL(e){return e[yA]||null}var xU=[],_w=-1;function Cy(e){return{current:e}}function pi(e){0>_w||(e.current=xU[_w],xU[_w]=null,_w--)}function ti(e,t){_w++,xU[_w]=e.current,e.current=t}var j0={},_a=Cy(j0),Bu=Cy(!1),L1=j0;function AE(e,t){var n=e.type.contextTypes;if(!n)return j0;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=t[s];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function Uu(e){return e=e.childContextTypes,e!=null}function TO(){pi(Bu),pi(_a)}function Sse(e,t,n){if(_a.current!==j0)throw Error(tt(168));ti(_a,t),ti(Bu,n)}function kve(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in t))throw Error(tt(108,$8e(e)||"Unknown",i));return Di({},n,r)}function CO(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||j0,L1=_a.current,ti(_a,e),ti(Bu,Bu.current),!0}function Tse(e,t,n){var r=e.stateNode;if(!r)throw Error(tt(169));n?(e=kve(e,t,L1),r.__reactInternalMemoizedMergedChildContext=e,pi(Bu),pi(_a),ti(_a,e)):pi(Bu),ti(Bu,n)}var Dp=null,lL=!1,gj=!1;function Rve(e){Dp===null?Dp=[e]:Dp.push(e)}function J9e(e){lL=!0,Rve(e)}function Ay(){if(!gj&&Dp!==null){gj=!0;var e=0,t=Or;try{var n=Dp;for(Or=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}Dp=null,lL=!1}catch(i){throw Dp!==null&&(Dp=Dp.slice(e+1)),tve(Yq,Ay),i}finally{Or=t,gj=!1}}return null}var ww=[],Ew=0,AO=null,IO=0,pc=[],mc=0,F1=null,qp=1,Wp="";function Sv(e,t){ww[Ew++]=IO,ww[Ew++]=AO,AO=e,IO=t}function Nve(e,t,n){pc[mc++]=qp,pc[mc++]=Wp,pc[mc++]=F1,F1=e;var r=qp;e=Wp;var i=32-Ff(r)-1;r&=~(1<<i),n+=1;var s=32-Ff(t)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,qp=1<<32-Ff(t)+i|n<<i|r,Wp=s+e}else qp=1<<s|n<<i|r,Wp=e}function rW(e){e.return!==null&&(Sv(e,1),Nve(e,1,0))}function iW(e){for(;e===AO;)AO=ww[--Ew],ww[Ew]=null,IO=ww[--Ew],ww[Ew]=null;for(;e===F1;)F1=pc[--mc],pc[mc]=null,Wp=pc[--mc],pc[mc]=null,qp=pc[--mc],pc[mc]=null}var Nl=null,xl=null,xi=!1,_f=null;function Pve(e,t){var n=xc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Cse(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Nl=e,xl=m0(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Nl=e,xl=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=F1!==null?{id:qp,overflow:Wp}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=xc(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Nl=e,xl=null,!0):!1;default:return!1}}function SU(e){return(e.mode&1)!==0&&(e.flags&128)===0}function TU(e){if(xi){var t=xl;if(t){var n=t;if(!Cse(e,t)){if(SU(e))throw Error(tt(418));t=m0(n.nextSibling);var r=Nl;t&&Cse(e,t)?Pve(r,n):(e.flags=e.flags&-4097|2,xi=!1,Nl=e)}}else{if(SU(e))throw Error(tt(418));e.flags=e.flags&-4097|2,xi=!1,Nl=e}}}function Ase(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Nl=e}function vN(e){if(e!==Nl)return!1;if(!xi)return Ase(e),xi=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!_U(e.type,e.memoizedProps)),t&&(t=xl)){if(SU(e))throw Dve(),Error(tt(418));for(;t;)Pve(e,t),t=m0(t.nextSibling)}if(Ase(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(tt(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){xl=m0(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}xl=null}}else xl=Nl?m0(e.stateNode.nextSibling):null;return!0}function Dve(){for(var e=xl;e;)e=m0(e.nextSibling)}function IE(){xl=Nl=null,xi=!1}function sW(e){_f===null?_f=[e]:_f.push(e)}var Z9e=Vm.ReactCurrentBatchConfig;function vT(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(tt(309));var r=n.stateNode}if(!r)throw Error(tt(147,e));var i=r,s=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===s?t.ref:(t=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},t._stringRef=s,t)}if(typeof e!="string")throw Error(tt(284));if(!n._owner)throw Error(tt(290,e))}return e}function bN(e,t){throw e=Object.prototype.toString.call(t),Error(tt(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Ise(e){var t=e._init;return t(e._payload)}function Ove(e){function t(y,v){if(e){var _=y.deletions;_===null?(y.deletions=[v],y.flags|=16):_.push(v)}}function n(y,v){if(!e)return null;for(;v!==null;)t(y,v),v=v.sibling;return null}function r(y,v){for(y=new Map;v!==null;)v.key!==null?y.set(v.key,v):y.set(v.index,v),v=v.sibling;return y}function i(y,v){return y=b0(y,v),y.index=0,y.sibling=null,y}function s(y,v,_){return y.index=_,e?(_=y.alternate,_!==null?(_=_.index,_<v?(y.flags|=2,v):_):(y.flags|=2,v)):(y.flags|=1048576,v)}function o(y){return e&&y.alternate===null&&(y.flags|=2),y}function a(y,v,_,w){return v===null||v.tag!==6?(v=xj(_,y.mode,w),v.return=y,v):(v=i(v,_),v.return=y,v)}function u(y,v,_,w){var E=_.type;return E===mw?c(y,v,_.props.children,w,_.key):v!==null&&(v.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===Rg&&Ise(E)===v.type)?(w=i(v,_.props),w.ref=vT(y,v,_),w.return=y,w):(w=aD(_.type,_.key,_.props,null,y.mode,w),w.ref=vT(y,v,_),w.return=y,w)}function l(y,v,_,w){return v===null||v.tag!==4||v.stateNode.containerInfo!==_.containerInfo||v.stateNode.implementation!==_.implementation?(v=Sj(_,y.mode,w),v.return=y,v):(v=i(v,_.children||[]),v.return=y,v)}function c(y,v,_,w,E){return v===null||v.tag!==7?(v=E1(_,y.mode,w,E),v.return=y,v):(v=i(v,_),v.return=y,v)}function f(y,v,_){if(typeof v=="string"&&v!==""||typeof v=="number")return v=xj(""+v,y.mode,_),v.return=y,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case uN:return _=aD(v.type,v.key,v.props,null,y.mode,_),_.ref=vT(y,null,v),_.return=y,_;case pw:return v=Sj(v,y.mode,_),v.return=y,v;case Rg:var w=v._init;return f(y,w(v._payload),_)}if(m2(v)||hT(v))return v=E1(v,y.mode,_,null),v.return=y,v;bN(y,v)}return null}function d(y,v,_,w){var E=v!==null?v.key:null;if(typeof _=="string"&&_!==""||typeof _=="number")return E!==null?null:a(y,v,""+_,w);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case uN:return _.key===E?u(y,v,_,w):null;case pw:return _.key===E?l(y,v,_,w):null;case Rg:return E=_._init,d(y,v,E(_._payload),w)}if(m2(_)||hT(_))return E!==null?null:c(y,v,_,w,null);bN(y,_)}return null}function h(y,v,_,w,E){if(typeof w=="string"&&w!==""||typeof w=="number")return y=y.get(_)||null,a(v,y,""+w,E);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case uN:return y=y.get(w.key===null?_:w.key)||null,u(v,y,w,E);case pw:return y=y.get(w.key===null?_:w.key)||null,l(v,y,w,E);case Rg:var S=w._init;return h(y,v,_,S(w._payload),E)}if(m2(w)||hT(w))return y=y.get(_)||null,c(v,y,w,E,null);bN(v,w)}return null}function p(y,v,_,w){for(var E=null,S=null,T=v,C=v=0,A=null;T!==null&&C<_.length;C++){T.index>C?(A=T,T=null):A=T.sibling;var k=d(y,T,_[C],w);if(k===null){T===null&&(T=A);break}e&&T&&k.alternate===null&&t(y,T),v=s(k,v,C),S===null?E=k:S.sibling=k,S=k,T=A}if(C===_.length)return n(y,T),xi&&Sv(y,C),E;if(T===null){for(;C<_.length;C++)T=f(y,_[C],w),T!==null&&(v=s(T,v,C),S===null?E=T:S.sibling=T,S=T);return xi&&Sv(y,C),E}for(T=r(y,T);C<_.length;C++)A=h(T,y,C,_[C],w),A!==null&&(e&&A.alternate!==null&&T.delete(A.key===null?C:A.key),v=s(A,v,C),S===null?E=A:S.sibling=A,S=A);return e&&T.forEach(function(N){return t(y,N)}),xi&&Sv(y,C),E}function m(y,v,_,w){var E=hT(_);if(typeof E!="function")throw Error(tt(150));if(_=E.call(_),_==null)throw Error(tt(151));for(var S=E=null,T=v,C=v=0,A=null,k=_.next();T!==null&&!k.done;C++,k=_.next()){T.index>C?(A=T,T=null):A=T.sibling;var N=d(y,T,k.value,w);if(N===null){T===null&&(T=A);break}e&&T&&N.alternate===null&&t(y,T),v=s(N,v,C),S===null?E=N:S.sibling=N,S=N,T=A}if(k.done)return n(y,T),xi&&Sv(y,C),E;if(T===null){for(;!k.done;C++,k=_.next())k=f(y,k.value,w),k!==null&&(v=s(k,v,C),S===null?E=k:S.sibling=k,S=k);return xi&&Sv(y,C),E}for(T=r(y,T);!k.done;C++,k=_.next())k=h(T,y,C,k.value,w),k!==null&&(e&&k.alternate!==null&&T.delete(k.key===null?C:k.key),v=s(k,v,C),S===null?E=k:S.sibling=k,S=k);return e&&T.forEach(function(O){return t(y,O)}),xi&&Sv(y,C),E}function g(y,v,_,w){if(typeof _=="object"&&_!==null&&_.type===mw&&_.key===null&&(_=_.props.children),typeof _=="object"&&_!==null){switch(_.$$typeof){case uN:e:{for(var E=_.key,S=v;S!==null;){if(S.key===E){if(E=_.type,E===mw){if(S.tag===7){n(y,S.sibling),v=i(S,_.props.children),v.return=y,y=v;break e}}else if(S.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===Rg&&Ise(E)===S.type){n(y,S.sibling),v=i(S,_.props),v.ref=vT(y,S,_),v.return=y,y=v;break e}n(y,S);break}else t(y,S);S=S.sibling}_.type===mw?(v=E1(_.props.children,y.mode,w,_.key),v.return=y,y=v):(w=aD(_.type,_.key,_.props,null,y.mode,w),w.ref=vT(y,v,_),w.return=y,y=w)}return o(y);case pw:e:{for(S=_.key;v!==null;){if(v.key===S)if(v.tag===4&&v.stateNode.containerInfo===_.containerInfo&&v.stateNode.implementation===_.implementation){n(y,v.sibling),v=i(v,_.children||[]),v.return=y,y=v;break e}else{n(y,v);break}else t(y,v);v=v.sibling}v=Sj(_,y.mode,w),v.return=y,y=v}return o(y);case Rg:return S=_._init,g(y,v,S(_._payload),w)}if(m2(_))return p(y,v,_,w);if(hT(_))return m(y,v,_,w);bN(y,_)}return typeof _=="string"&&_!==""||typeof _=="number"?(_=""+_,v!==null&&v.tag===6?(n(y,v.sibling),v=i(v,_),v.return=y,y=v):(n(y,v),v=xj(_,y.mode,w),v.return=y,y=v),o(y)):n(y,v)}return g}var kE=Ove(!0),$ve=Ove(!1),kO=Cy(null),RO=null,xw=null,oW=null;function aW(){oW=xw=RO=null}function uW(e){var t=kO.current;pi(kO),e._currentValue=t}function CU(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Hw(e,t){RO=e,oW=xw=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Ou=!0),e.firstContext=null)}function Nc(e){var t=e._currentValue;if(oW!==e)if(e={context:e,memoizedValue:t,next:null},xw===null){if(RO===null)throw Error(tt(308));xw=e,RO.dependencies={lanes:0,firstContext:e}}else xw=xw.next=e;return t}var t1=null;function lW(e){t1===null?t1=[e]:t1.push(e)}function Mve(e,t,n,r){var i=t.interleaved;return i===null?(n.next=n,lW(t)):(n.next=i.next,i.next=n),t.interleaved=n,ym(e,r)}function ym(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Ng=!1;function cW(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Lve(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function rm(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function g0(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,ur&2){var i=r.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),r.pending=t,ym(e,n)}return i=r.interleaved,i===null?(t.next=t,lW(r)):(t.next=i.next,i.next=t),r.interleaved=t,ym(e,n)}function tD(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Kq(e,n)}}function kse(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=t:s=s.next=t}else i=s=t;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function NO(e,t,n,r){var i=e.updateQueue;Ng=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var u=a,l=u.next;u.next=null,o===null?s=l:o.next=l,o=u;var c=e.alternate;c!==null&&(c=c.updateQueue,a=c.lastBaseUpdate,a!==o&&(a===null?c.firstBaseUpdate=l:a.next=l,c.lastBaseUpdate=u))}if(s!==null){var f=i.baseState;o=0,c=l=u=null,a=s;do{var d=a.lane,h=a.eventTime;if((r&d)===d){c!==null&&(c=c.next={eventTime:h,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=e,m=a;switch(d=t,h=n,m.tag){case 1:if(p=m.payload,typeof p=="function"){f=p.call(h,f,d);break e}f=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=m.payload,d=typeof p=="function"?p.call(h,f,d):p,d==null)break e;f=Di({},f,d);break e;case 2:Ng=!0}}a.callback!==null&&a.lane!==0&&(e.flags|=64,d=i.effects,d===null?i.effects=[a]:d.push(a))}else h={eventTime:h,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},c===null?(l=c=h,u=f):c=c.next=h,o|=d;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;d=a,a=d.next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}while(!0);if(c===null&&(u=f),i.baseState=u,i.firstBaseUpdate=l,i.lastBaseUpdate=c,t=i.shared.interleaved,t!==null){i=t;do o|=i.lane,i=i.next;while(i!==t)}else s===null&&(i.shared.lanes=0);B1|=o,e.lanes=o,e.memoizedState=f}}function Rse(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(tt(191,i));i.call(r)}}}var ik={},uh=Cy(ik),vA=Cy(ik),bA=Cy(ik);function n1(e){if(e===ik)throw Error(tt(174));return e}function fW(e,t){switch(ti(bA,t),ti(vA,e),ti(uh,ik),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:oU(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=oU(t,e)}pi(uh),ti(uh,t)}function RE(){pi(uh),pi(vA),pi(bA)}function Fve(e){n1(bA.current);var t=n1(uh.current),n=oU(t,e.type);t!==n&&(ti(vA,e),ti(uh,n))}function dW(e){vA.current===e&&(pi(uh),pi(vA))}var Ni=Cy(0);function PO(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var yj=[];function hW(){for(var e=0;e<yj.length;e++)yj[e]._workInProgressVersionPrimary=null;yj.length=0}var nD=Vm.ReactCurrentDispatcher,vj=Vm.ReactCurrentBatchConfig,j1=0,Pi=null,Is=null,Xs=null,DO=!1,dC=!1,_A=0,eBe=0;function Yo(){throw Error(tt(321))}function pW(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Gf(e[n],t[n]))return!1;return!0}function mW(e,t,n,r,i,s){if(j1=s,Pi=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,nD.current=e===null||e.memoizedState===null?iBe:sBe,e=n(r,i),dC){s=0;do{if(dC=!1,_A=0,25<=s)throw Error(tt(301));s+=1,Xs=Is=null,t.updateQueue=null,nD.current=oBe,e=n(r,i)}while(dC)}if(nD.current=OO,t=Is!==null&&Is.next!==null,j1=0,Xs=Is=Pi=null,DO=!1,t)throw Error(tt(300));return e}function gW(){var e=_A!==0;return _A=0,e}function Rd(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Xs===null?Pi.memoizedState=Xs=e:Xs=Xs.next=e,Xs}function Pc(){if(Is===null){var e=Pi.alternate;e=e!==null?e.memoizedState:null}else e=Is.next;var t=Xs===null?Pi.memoizedState:Xs.next;if(t!==null)Xs=t,Is=e;else{if(e===null)throw Error(tt(310));Is=e,e={memoizedState:Is.memoizedState,baseState:Is.baseState,baseQueue:Is.baseQueue,queue:Is.queue,next:null},Xs===null?Pi.memoizedState=Xs=e:Xs=Xs.next=e}return Xs}function wA(e,t){return typeof t=="function"?t(e):t}function bj(e){var t=Pc(),n=t.queue;if(n===null)throw Error(tt(311));n.lastRenderedReducer=e;var r=Is,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,u=null,l=s;do{var c=l.lane;if((j1&c)===c)u!==null&&(u=u.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:e(r,l.action);else{var f={lane:c,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};u===null?(a=u=f,o=r):u=u.next=f,Pi.lanes|=c,B1|=c}l=l.next}while(l!==null&&l!==s);u===null?o=r:u.next=a,Gf(r,t.memoizedState)||(Ou=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=u,n.lastRenderedState=r}if(e=n.interleaved,e!==null){i=e;do s=i.lane,Pi.lanes|=s,B1|=s,i=i.next;while(i!==e)}else i===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function _j(e){var t=Pc(),n=t.queue;if(n===null)throw Error(tt(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,s=t.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=e(s,o.action),o=o.next;while(o!==i);Gf(s,t.memoizedState)||(Ou=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function jve(){}function Bve(e,t){var n=Pi,r=Pc(),i=t(),s=!Gf(r.memoizedState,i);if(s&&(r.memoizedState=i,Ou=!0),r=r.queue,yW(Vve.bind(null,n,r,e),[e]),r.getSnapshot!==t||s||Xs!==null&&Xs.memoizedState.tag&1){if(n.flags|=2048,EA(9,zve.bind(null,n,r,i,t),void 0,null),ao===null)throw Error(tt(349));j1&30||Uve(n,t,i)}return i}function Uve(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Pi.updateQueue,t===null?(t={lastEffect:null,stores:null},Pi.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function zve(e,t,n,r){t.value=n,t.getSnapshot=r,Hve(t)&&qve(e)}function Vve(e,t,n){return n(function(){Hve(t)&&qve(e)})}function Hve(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Gf(e,n)}catch{return!0}}function qve(e){var t=ym(e,1);t!==null&&jf(t,e,1,-1)}function Nse(e){var t=Rd();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:wA,lastRenderedState:e},t.queue=e,e=e.dispatch=rBe.bind(null,Pi,e),[t.memoizedState,e]}function EA(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Pi.updateQueue,t===null?(t={lastEffect:null,stores:null},Pi.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function Wve(){return Pc().memoizedState}function rD(e,t,n,r){var i=Rd();Pi.flags|=e,i.memoizedState=EA(1|t,n,void 0,r===void 0?null:r)}function cL(e,t,n,r){var i=Pc();r=r===void 0?null:r;var s=void 0;if(Is!==null){var o=Is.memoizedState;if(s=o.destroy,r!==null&&pW(r,o.deps)){i.memoizedState=EA(t,n,s,r);return}}Pi.flags|=e,i.memoizedState=EA(1|t,n,s,r)}function Pse(e,t){return rD(8390656,8,e,t)}function yW(e,t){return cL(2048,8,e,t)}function Gve(e,t){return cL(4,2,e,t)}function Yve(e,t){return cL(4,4,e,t)}function Kve(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Xve(e,t,n){return n=n!=null?n.concat([e]):null,cL(4,4,Kve.bind(null,t,e),n)}function vW(){}function Qve(e,t){var n=Pc();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&pW(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Jve(e,t){var n=Pc();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&pW(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Zve(e,t,n){return j1&21?(Gf(n,t)||(n=ive(),Pi.lanes|=n,B1|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Ou=!0),e.memoizedState=n)}function tBe(e,t){var n=Or;Or=n!==0&&4>n?n:4,e(!0);var r=vj.transition;vj.transition={};try{e(!1),t()}finally{Or=n,vj.transition=r}}function e1e(){return Pc().memoizedState}function nBe(e,t,n){var r=v0(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},t1e(e))n1e(t,n);else if(n=Mve(e,t,n,r),n!==null){var i=Ya();jf(n,e,r,i),r1e(n,t,r)}}function rBe(e,t,n){var r=v0(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(t1e(e))n1e(t,i);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var o=t.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,Gf(a,o)){var u=t.interleaved;u===null?(i.next=i,lW(t)):(i.next=u.next,u.next=i),t.interleaved=i;return}}catch{}finally{}n=Mve(e,t,i,r),n!==null&&(i=Ya(),jf(n,e,r,i),r1e(n,t,r))}}function t1e(e){var t=e.alternate;return e===Pi||t!==null&&t===Pi}function n1e(e,t){dC=DO=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function r1e(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Kq(e,n)}}var OO={readContext:Nc,useCallback:Yo,useContext:Yo,useEffect:Yo,useImperativeHandle:Yo,useInsertionEffect:Yo,useLayoutEffect:Yo,useMemo:Yo,useReducer:Yo,useRef:Yo,useState:Yo,useDebugValue:Yo,useDeferredValue:Yo,useTransition:Yo,useMutableSource:Yo,useSyncExternalStore:Yo,useId:Yo,unstable_isNewReconciler:!1},iBe={readContext:Nc,useCallback:function(e,t){return Rd().memoizedState=[e,t===void 0?null:t],e},useContext:Nc,useEffect:Pse,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,rD(4194308,4,Kve.bind(null,t,e),n)},useLayoutEffect:function(e,t){return rD(4194308,4,e,t)},useInsertionEffect:function(e,t){return rD(4,2,e,t)},useMemo:function(e,t){var n=Rd();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Rd();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=nBe.bind(null,Pi,e),[r.memoizedState,e]},useRef:function(e){var t=Rd();return e={current:e},t.memoizedState=e},useState:Nse,useDebugValue:vW,useDeferredValue:function(e){return Rd().memoizedState=e},useTransition:function(){var e=Nse(!1),t=e[0];return e=tBe.bind(null,e[1]),Rd().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Pi,i=Rd();if(xi){if(n===void 0)throw Error(tt(407));n=n()}else{if(n=t(),ao===null)throw Error(tt(349));j1&30||Uve(r,t,n)}i.memoizedState=n;var s={value:n,getSnapshot:t};return i.queue=s,Pse(Vve.bind(null,r,s,e),[e]),r.flags|=2048,EA(9,zve.bind(null,r,s,n,t),void 0,null),n},useId:function(){var e=Rd(),t=ao.identifierPrefix;if(xi){var n=Wp,r=qp;n=(r&~(1<<32-Ff(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=_A++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=eBe++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},sBe={readContext:Nc,useCallback:Qve,useContext:Nc,useEffect:yW,useImperativeHandle:Xve,useInsertionEffect:Gve,useLayoutEffect:Yve,useMemo:Jve,useReducer:bj,useRef:Wve,useState:function(){return bj(wA)},useDebugValue:vW,useDeferredValue:function(e){var t=Pc();return Zve(t,Is.memoizedState,e)},useTransition:function(){var e=bj(wA)[0],t=Pc().memoizedState;return[e,t]},useMutableSource:jve,useSyncExternalStore:Bve,useId:e1e,unstable_isNewReconciler:!1},oBe={readContext:Nc,useCallback:Qve,useContext:Nc,useEffect:yW,useImperativeHandle:Xve,useInsertionEffect:Gve,useLayoutEffect:Yve,useMemo:Jve,useReducer:_j,useRef:Wve,useState:function(){return _j(wA)},useDebugValue:vW,useDeferredValue:function(e){var t=Pc();return Is===null?t.memoizedState=e:Zve(t,Is.memoizedState,e)},useTransition:function(){var e=_j(wA)[0],t=Pc().memoizedState;return[e,t]},useMutableSource:jve,useSyncExternalStore:Bve,useId:e1e,unstable_isNewReconciler:!1};function pf(e,t){if(e&&e.defaultProps){t=Di({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function AU(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Di({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var fL={isMounted:function(e){return(e=e._reactInternals)?Rb(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Ya(),i=v0(e),s=rm(r,i);s.payload=t,n!=null&&(s.callback=n),t=g0(e,s,i),t!==null&&(jf(t,e,i,r),tD(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Ya(),i=v0(e),s=rm(r,i);s.tag=1,s.payload=t,n!=null&&(s.callback=n),t=g0(e,s,i),t!==null&&(jf(t,e,i,r),tD(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Ya(),r=v0(e),i=rm(n,r);i.tag=2,t!=null&&(i.callback=t),t=g0(e,i,r),t!==null&&(jf(t,e,r,n),tD(t,e,r))}};function Dse(e,t,n,r,i,s,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,s,o):t.prototype&&t.prototype.isPureReactComponent?!pA(n,r)||!pA(i,s):!0}function i1e(e,t,n){var r=!1,i=j0,s=t.contextType;return typeof s=="object"&&s!==null?s=Nc(s):(i=Uu(t)?L1:_a.current,r=t.contextTypes,s=(r=r!=null)?AE(e,i):j0),t=new t(n,s),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=fL,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function Ose(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&fL.enqueueReplaceState(t,t.state,null)}function IU(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},cW(e);var s=t.contextType;typeof s=="object"&&s!==null?i.context=Nc(s):(s=Uu(t)?L1:_a.current,i.context=AE(e,s)),i.state=e.memoizedState,s=t.getDerivedStateFromProps,typeof s=="function"&&(AU(e,t,s,n),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&fL.enqueueReplaceState(i,i.state,null),NO(e,n,i,r),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function NE(e,t){try{var n="",r=t;do n+=O8e(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:e,source:t,stack:i,digest:null}}function wj(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function kU(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var aBe=typeof WeakMap=="function"?WeakMap:Map;function s1e(e,t,n){n=rm(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){MO||(MO=!0,jU=r),kU(e,t)},n}function o1e(e,t,n){n=rm(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){kU(e,t)}}var s=e.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){kU(e,t),typeof r!="function"&&(y0===null?y0=new Set([this]):y0.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),n}function $se(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new aBe;var i=new Set;r.set(t,i)}else i=r.get(t),i===void 0&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=wBe.bind(null,e,t,n),t.then(e,e))}function Mse(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Lse(e,t,n,r,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=rm(-1,1),t.tag=2,g0(n,t,1))),n.lanes|=1),e)}var uBe=Vm.ReactCurrentOwner,Ou=!1;function Ma(e,t,n,r){t.child=e===null?$ve(t,null,n,r):kE(t,e.child,n,r)}function Fse(e,t,n,r,i){n=n.render;var s=t.ref;return Hw(t,i),r=mW(e,t,n,r,s,i),n=gW(),e!==null&&!Ou?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,vm(e,t,i)):(xi&&n&&rW(t),t.flags|=1,Ma(e,t,r,i),t.child)}function jse(e,t,n,r,i){if(e===null){var s=n.type;return typeof s=="function"&&!CW(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=s,a1e(e,t,s,r,i)):(e=aD(n.type,null,r,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,!(e.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:pA,n(o,r)&&e.ref===t.ref)return vm(e,t,i)}return t.flags|=1,e=b0(s,r),e.ref=t.ref,e.return=t,t.child=e}function a1e(e,t,n,r,i){if(e!==null){var s=e.memoizedProps;if(pA(s,r)&&e.ref===t.ref)if(Ou=!1,t.pendingProps=r=s,(e.lanes&i)!==0)e.flags&131072&&(Ou=!0);else return t.lanes=e.lanes,vm(e,t,i)}return RU(e,t,n,r,i)}function u1e(e,t,n){var r=t.pendingProps,i=r.children,s=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},ti(Tw,gl),gl|=n;else{if(!(n&1073741824))return e=s!==null?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,ti(Tw,gl),gl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,ti(Tw,gl),gl|=r}else s!==null?(r=s.baseLanes|n,t.memoizedState=null):r=n,ti(Tw,gl),gl|=r;return Ma(e,t,i,n),t.child}function l1e(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function RU(e,t,n,r,i){var s=Uu(n)?L1:_a.current;return s=AE(t,s),Hw(t,i),n=mW(e,t,n,r,s,i),r=gW(),e!==null&&!Ou?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,vm(e,t,i)):(xi&&r&&rW(t),t.flags|=1,Ma(e,t,n,i),t.child)}function Bse(e,t,n,r,i){if(Uu(n)){var s=!0;CO(t)}else s=!1;if(Hw(t,i),t.stateNode===null)iD(e,t),i1e(t,n,r),IU(t,n,r,i),r=!0;else if(e===null){var o=t.stateNode,a=t.memoizedProps;o.props=a;var u=o.context,l=n.contextType;typeof l=="object"&&l!==null?l=Nc(l):(l=Uu(n)?L1:_a.current,l=AE(t,l));var c=n.getDerivedStateFromProps,f=typeof c=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||u!==l)&&Ose(t,o,r,l),Ng=!1;var d=t.memoizedState;o.state=d,NO(t,r,o,i),u=t.memoizedState,a!==r||d!==u||Bu.current||Ng?(typeof c=="function"&&(AU(t,n,c,r),u=t.memoizedState),(a=Ng||Dse(t,n,a,r,d,u,l))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=u),o.props=r,o.state=u,o.context=l,r=a):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Lve(e,t),a=t.memoizedProps,l=t.type===t.elementType?a:pf(t.type,a),o.props=l,f=t.pendingProps,d=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=Nc(u):(u=Uu(n)?L1:_a.current,u=AE(t,u));var h=n.getDerivedStateFromProps;(c=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==f||d!==u)&&Ose(t,o,r,u),Ng=!1,d=t.memoizedState,o.state=d,NO(t,r,o,i);var p=t.memoizedState;a!==f||d!==p||Bu.current||Ng?(typeof h=="function"&&(AU(t,n,h,r),p=t.memoizedState),(l=Ng||Dse(t,n,l,r,d,p,u)||!1)?(c||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,p,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,p,u)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=u,r=l):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return NU(e,t,n,r,s,i)}function NU(e,t,n,r,i,s){l1e(e,t);var o=(t.flags&128)!==0;if(!r&&!o)return i&&Tse(t,n,!1),vm(e,t,s);r=t.stateNode,uBe.current=t;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&o?(t.child=kE(t,e.child,null,s),t.child=kE(t,null,a,s)):Ma(e,t,a,s),t.memoizedState=r.state,i&&Tse(t,n,!0),t.child}function c1e(e){var t=e.stateNode;t.pendingContext?Sse(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Sse(e,t.context,!1),fW(e,t.containerInfo)}function Use(e,t,n,r,i){return IE(),sW(i),t.flags|=256,Ma(e,t,n,r),t.child}var PU={dehydrated:null,treeContext:null,retryLane:0};function DU(e){return{baseLanes:e,cachePool:null,transitions:null}}function f1e(e,t,n){var r=t.pendingProps,i=Ni.current,s=!1,o=(t.flags&128)!==0,a;if((a=o)||(a=e!==null&&e.memoizedState===null?!1:(i&2)!==0),a?(s=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),ti(Ni,i&1),e===null)return TU(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=r.children,e=r.fallback,s?(r=t.mode,s=t.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=pL(o,r,0,null),e=E1(e,r,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=DU(n),t.memoizedState=PU,e):bW(t,o));if(i=e.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return lBe(e,t,o,r,a,i,n);if(s){s=r.fallback,o=t.mode,i=e.child,a=i.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&t.child!==i?(r=t.child,r.childLanes=0,r.pendingProps=u,t.deletions=null):(r=b0(i,u),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=b0(a,s):(s=E1(s,o,n,null),s.flags|=2),s.return=t,r.return=t,r.sibling=s,t.child=r,r=s,s=t.child,o=e.child.memoizedState,o=o===null?DU(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=e.childLanes&~n,t.memoizedState=PU,r}return s=e.child,e=s.sibling,r=b0(s,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function bW(e,t){return t=pL({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function _N(e,t,n,r){return r!==null&&sW(r),kE(t,e.child,null,n),e=bW(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function lBe(e,t,n,r,i,s,o){if(n)return t.flags&256?(t.flags&=-257,r=wj(Error(tt(422))),_N(e,t,o,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(s=r.fallback,i=t.mode,r=pL({mode:"visible",children:r.children},i,0,null),s=E1(s,i,o,null),s.flags|=2,r.return=t,s.return=t,r.sibling=s,t.child=r,t.mode&1&&kE(t,e.child,null,o),t.child.memoizedState=DU(o),t.memoizedState=PU,s);if(!(t.mode&1))return _N(e,t,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(tt(419)),r=wj(s,r,void 0),_N(e,t,o,r)}if(a=(o&e.childLanes)!==0,Ou||a){if(r=ao,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,ym(e,i),jf(r,e,i,-1))}return TW(),r=wj(Error(tt(421))),_N(e,t,o,r)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=EBe.bind(null,e),i._reactRetry=t,null):(e=s.treeContext,xl=m0(i.nextSibling),Nl=t,xi=!0,_f=null,e!==null&&(pc[mc++]=qp,pc[mc++]=Wp,pc[mc++]=F1,qp=e.id,Wp=e.overflow,F1=t),t=bW(t,r.children),t.flags|=4096,t)}function zse(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),CU(e.return,t,n)}function Ej(e,t,n,r,i){var s=e.memoizedState;s===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function d1e(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(Ma(e,t,r.children,n),r=Ni.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&zse(e,n,t);else if(e.tag===19)zse(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(ti(Ni,r),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&PO(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Ej(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&PO(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Ej(t,!0,n,null,s);break;case"together":Ej(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function iD(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function vm(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),B1|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(tt(153));if(t.child!==null){for(e=t.child,n=b0(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=b0(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function cBe(e,t,n){switch(t.tag){case 3:c1e(t),IE();break;case 5:Fve(t);break;case 1:Uu(t.type)&&CO(t);break;case 4:fW(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;ti(kO,r._currentValue),r._currentValue=i;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(ti(Ni,Ni.current&1),t.flags|=128,null):n&t.child.childLanes?f1e(e,t,n):(ti(Ni,Ni.current&1),e=vm(e,t,n),e!==null?e.sibling:null);ti(Ni,Ni.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return d1e(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),ti(Ni,Ni.current),r)break;return null;case 22:case 23:return t.lanes=0,u1e(e,t,n)}return vm(e,t,n)}var h1e,OU,p1e,m1e;h1e=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};OU=function(){};p1e=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,n1(uh.current);var s=null;switch(n){case"input":i=nU(e,i),r=nU(e,r),s=[];break;case"select":i=Di({},i,{value:void 0}),r=Di({},r,{value:void 0}),s=[];break;case"textarea":i=sU(e,i),r=sU(e,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=SO)}aU(n,r);var o;n=null;for(l in i)if(!r.hasOwnProperty(l)&&i.hasOwnProperty(l)&&i[l]!=null)if(l==="style"){var a=i[l];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else l!=="dangerouslySetInnerHTML"&&l!=="children"&&l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(aA.hasOwnProperty(l)?s||(s=[]):(s=s||[]).push(l,null));for(l in r){var u=r[l];if(a=i!=null?i[l]:void 0,r.hasOwnProperty(l)&&u!==a&&(u!=null||a!=null))if(l==="style")if(a){for(o in a)!a.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&a[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(s||(s=[]),s.push(l,n)),n=u;else l==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,a=a?a.__html:void 0,u!=null&&a!==u&&(s=s||[]).push(l,u)):l==="children"?typeof u!="string"&&typeof u!="number"||(s=s||[]).push(l,""+u):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&(aA.hasOwnProperty(l)?(u!=null&&l==="onScroll"&&ai("scroll",e),s||a===u||(s=[])):(s=s||[]).push(l,u))}n&&(s=s||[]).push("style",n);var l=s;(t.updateQueue=l)&&(t.flags|=4)}};m1e=function(e,t,n,r){n!==r&&(t.flags|=4)};function bT(e,t){if(!xi)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ko(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function fBe(e,t,n){var r=t.pendingProps;switch(iW(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ko(t),null;case 1:return Uu(t.type)&&TO(),Ko(t),null;case 3:return r=t.stateNode,RE(),pi(Bu),pi(_a),hW(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(vN(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,_f!==null&&(zU(_f),_f=null))),OU(e,t),Ko(t),null;case 5:dW(t);var i=n1(bA.current);if(n=t.type,e!==null&&t.stateNode!=null)p1e(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(tt(166));return Ko(t),null}if(e=n1(uh.current),vN(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[Bd]=t,r[yA]=s,e=(t.mode&1)!==0,n){case"dialog":ai("cancel",r),ai("close",r);break;case"iframe":case"object":case"embed":ai("load",r);break;case"video":case"audio":for(i=0;i<y2.length;i++)ai(y2[i],r);break;case"source":ai("error",r);break;case"img":case"image":case"link":ai("error",r),ai("load",r);break;case"details":ai("toggle",r);break;case"input":Qie(r,s),ai("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},ai("invalid",r);break;case"textarea":Zie(r,s),ai("invalid",r)}aU(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&yN(r.textContent,a,e),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&yN(r.textContent,a,e),i=["children",""+a]):aA.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&ai("scroll",r)}switch(n){case"input":lN(r),Jie(r,s,!0);break;case"textarea":lN(r),ese(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=SO)}r=i,t.updateQueue=r,r!==null&&(t.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Vye(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=o.createElement(n,{is:r.is}):(e=o.createElement(n),n==="select"&&(o=e,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):e=o.createElementNS(e,n),e[Bd]=t,e[yA]=r,h1e(e,t,!1,!1),t.stateNode=e;e:{switch(o=uU(n,r),n){case"dialog":ai("cancel",e),ai("close",e),i=r;break;case"iframe":case"object":case"embed":ai("load",e),i=r;break;case"video":case"audio":for(i=0;i<y2.length;i++)ai(y2[i],e);i=r;break;case"source":ai("error",e),i=r;break;case"img":case"image":case"link":ai("error",e),ai("load",e),i=r;break;case"details":ai("toggle",e),i=r;break;case"input":Qie(e,r),i=nU(e,r),ai("invalid",e);break;case"option":i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=Di({},r,{value:void 0}),ai("invalid",e);break;case"textarea":Zie(e,r),i=sU(e,r),ai("invalid",e);break;default:i=r}aU(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var u=a[s];s==="style"?Wye(e,u):s==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&Hye(e,u)):s==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&uA(e,u):typeof u=="number"&&uA(e,""+u):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(aA.hasOwnProperty(s)?u!=null&&s==="onScroll"&&ai("scroll",e):u!=null&&Vq(e,s,u,o))}switch(n){case"input":lN(e),Jie(e,r,!1);break;case"textarea":lN(e),ese(e);break;case"option":r.value!=null&&e.setAttribute("value",""+F0(r.value));break;case"select":e.multiple=!!r.multiple,s=r.value,s!=null?Bw(e,!!r.multiple,s,!1):r.defaultValue!=null&&Bw(e,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=SO)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Ko(t),null;case 6:if(e&&t.stateNode!=null)m1e(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(tt(166));if(n=n1(bA.current),n1(uh.current),vN(t)){if(r=t.stateNode,n=t.memoizedProps,r[Bd]=t,(s=r.nodeValue!==n)&&(e=Nl,e!==null))switch(e.tag){case 3:yN(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&yN(r.nodeValue,n,(e.mode&1)!==0)}s&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Bd]=t,t.stateNode=r}return Ko(t),null;case 13:if(pi(Ni),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(xi&&xl!==null&&t.mode&1&&!(t.flags&128))Dve(),IE(),t.flags|=98560,s=!1;else if(s=vN(t),r!==null&&r.dehydrated!==null){if(e===null){if(!s)throw Error(tt(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(tt(317));s[Bd]=t}else IE(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Ko(t),s=!1}else _f!==null&&(zU(_f),_f=null),s=!0;if(!s)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||Ni.current&1?Os===0&&(Os=3):TW())),t.updateQueue!==null&&(t.flags|=4),Ko(t),null);case 4:return RE(),OU(e,t),e===null&&mA(t.stateNode.containerInfo),Ko(t),null;case 10:return uW(t.type._context),Ko(t),null;case 17:return Uu(t.type)&&TO(),Ko(t),null;case 19:if(pi(Ni),s=t.memoizedState,s===null)return Ko(t),null;if(r=(t.flags&128)!==0,o=s.rendering,o===null)if(r)bT(s,!1);else{if(Os!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=PO(e),o!==null){for(t.flags|=128,bT(s,!1),r=o.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)s=n,e=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,e=o.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return ti(Ni,Ni.current&1|2),t.child}e=e.sibling}s.tail!==null&&ss()>PE&&(t.flags|=128,r=!0,bT(s,!1),t.lanes=4194304)}else{if(!r)if(e=PO(o),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),bT(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!xi)return Ko(t),null}else 2*ss()-s.renderingStartTime>PE&&n!==1073741824&&(t.flags|=128,r=!0,bT(s,!1),t.lanes=4194304);s.isBackwards?(o.sibling=t.child,t.child=o):(n=s.last,n!==null?n.sibling=o:t.child=o,s.last=o)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=ss(),t.sibling=null,n=Ni.current,ti(Ni,r?n&1|2:n&1),t):(Ko(t),null);case 22:case 23:return SW(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?gl&1073741824&&(Ko(t),t.subtreeFlags&6&&(t.flags|=8192)):Ko(t),null;case 24:return null;case 25:return null}throw Error(tt(156,t.tag))}function dBe(e,t){switch(iW(t),t.tag){case 1:return Uu(t.type)&&TO(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return RE(),pi(Bu),pi(_a),hW(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return dW(t),null;case 13:if(pi(Ni),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(tt(340));IE()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return pi(Ni),null;case 4:return RE(),null;case 10:return uW(t.type._context),null;case 22:case 23:return SW(),null;case 24:return null;default:return null}}var wN=!1,ua=!1,hBe=typeof WeakSet=="function"?WeakSet:Set,xt=null;function Sw(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){zi(e,t,r)}else n.current=null}function $U(e,t,n){try{n()}catch(r){zi(e,t,r)}}var Vse=!1;function pBe(e,t){if(vU=wO,e=_ve(),nW(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,u=-1,l=0,c=0,f=e,d=null;t:for(;;){for(var h;f!==n||i!==0&&f.nodeType!==3||(a=o+i),f!==s||r!==0&&f.nodeType!==3||(u=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(h=f.firstChild)!==null;)d=f,f=h;for(;;){if(f===e)break t;if(d===n&&++l===i&&(a=o),d===s&&++c===r&&(u=o),(h=f.nextSibling)!==null)break;f=d,d=f.parentNode}f=h}n=a===-1||u===-1?null:{start:a,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(bU={focusedElem:e,selectionRange:n},wO=!1,xt=t;xt!==null;)if(t=xt,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,xt=e;else for(;xt!==null;){t=xt;try{var p=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var m=p.memoizedProps,g=p.memoizedState,y=t.stateNode,v=y.getSnapshotBeforeUpdate(t.elementType===t.type?m:pf(t.type,m),g);y.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var _=t.stateNode.containerInfo;_.nodeType===1?_.textContent="":_.nodeType===9&&_.documentElement&&_.removeChild(_.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(tt(163))}}catch(w){zi(t,t.return,w)}if(e=t.sibling,e!==null){e.return=t.return,xt=e;break}xt=t.return}return p=Vse,Vse=!1,p}function hC(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,s!==void 0&&$U(t,n,s)}i=i.next}while(i!==r)}}function dL(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function MU(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function g1e(e){var t=e.alternate;t!==null&&(e.alternate=null,g1e(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Bd],delete t[yA],delete t[EU],delete t[X9e],delete t[Q9e])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function y1e(e){return e.tag===5||e.tag===3||e.tag===4}function Hse(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||y1e(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function LU(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=SO));else if(r!==4&&(e=e.child,e!==null))for(LU(e,t,n),e=e.sibling;e!==null;)LU(e,t,n),e=e.sibling}function FU(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(FU(e,t,n),e=e.sibling;e!==null;)FU(e,t,n),e=e.sibling}var xo=null,gf=!1;function yg(e,t,n){for(n=n.child;n!==null;)v1e(e,t,n),n=n.sibling}function v1e(e,t,n){if(ah&&typeof ah.onCommitFiberUnmount=="function")try{ah.onCommitFiberUnmount(iL,n)}catch{}switch(n.tag){case 5:ua||Sw(n,t);case 6:var r=xo,i=gf;xo=null,yg(e,t,n),xo=r,gf=i,xo!==null&&(gf?(e=xo,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):xo.removeChild(n.stateNode));break;case 18:xo!==null&&(gf?(e=xo,n=n.stateNode,e.nodeType===8?mj(e.parentNode,n):e.nodeType===1&&mj(e,n),dA(e)):mj(xo,n.stateNode));break;case 4:r=xo,i=gf,xo=n.stateNode.containerInfo,gf=!0,yg(e,t,n),xo=r,gf=i;break;case 0:case 11:case 14:case 15:if(!ua&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&$U(n,t,o),i=i.next}while(i!==r)}yg(e,t,n);break;case 1:if(!ua&&(Sw(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){zi(n,t,a)}yg(e,t,n);break;case 21:yg(e,t,n);break;case 22:n.mode&1?(ua=(r=ua)||n.memoizedState!==null,yg(e,t,n),ua=r):yg(e,t,n);break;default:yg(e,t,n)}}function qse(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new hBe),t.forEach(function(r){var i=xBe.bind(null,e,r);n.has(r)||(n.add(r),r.then(i,i))})}}function nf(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=e,o=t,a=o;e:for(;a!==null;){switch(a.tag){case 5:xo=a.stateNode,gf=!1;break e;case 3:xo=a.stateNode.containerInfo,gf=!0;break e;case 4:xo=a.stateNode.containerInfo,gf=!0;break e}a=a.return}if(xo===null)throw Error(tt(160));v1e(s,o,i),xo=null,gf=!1;var u=i.alternate;u!==null&&(u.return=null),i.return=null}catch(l){zi(i,t,l)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)b1e(t,e),t=t.sibling}function b1e(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(nf(t,e),xd(e),r&4){try{hC(3,e,e.return),dL(3,e)}catch(m){zi(e,e.return,m)}try{hC(5,e,e.return)}catch(m){zi(e,e.return,m)}}break;case 1:nf(t,e),xd(e),r&512&&n!==null&&Sw(n,n.return);break;case 5:if(nf(t,e),xd(e),r&512&&n!==null&&Sw(n,n.return),e.flags&32){var i=e.stateNode;try{uA(i,"")}catch(m){zi(e,e.return,m)}}if(r&4&&(i=e.stateNode,i!=null)){var s=e.memoizedProps,o=n!==null?n.memoizedProps:s,a=e.type,u=e.updateQueue;if(e.updateQueue=null,u!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&Uye(i,s),uU(a,o);var l=uU(a,s);for(o=0;o<u.length;o+=2){var c=u[o],f=u[o+1];c==="style"?Wye(i,f):c==="dangerouslySetInnerHTML"?Hye(i,f):c==="children"?uA(i,f):Vq(i,c,f,l)}switch(a){case"input":rU(i,s);break;case"textarea":zye(i,s);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var h=s.value;h!=null?Bw(i,!!s.multiple,h,!1):d!==!!s.multiple&&(s.defaultValue!=null?Bw(i,!!s.multiple,s.defaultValue,!0):Bw(i,!!s.multiple,s.multiple?[]:"",!1))}i[yA]=s}catch(m){zi(e,e.return,m)}}break;case 6:if(nf(t,e),xd(e),r&4){if(e.stateNode===null)throw Error(tt(162));i=e.stateNode,s=e.memoizedProps;try{i.nodeValue=s}catch(m){zi(e,e.return,m)}}break;case 3:if(nf(t,e),xd(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{dA(t.containerInfo)}catch(m){zi(e,e.return,m)}break;case 4:nf(t,e),xd(e);break;case 13:nf(t,e),xd(e),i=e.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(EW=ss())),r&4&&qse(e);break;case 22:if(c=n!==null&&n.memoizedState!==null,e.mode&1?(ua=(l=ua)||c,nf(t,e),ua=l):nf(t,e),xd(e),r&8192){if(l=e.memoizedState!==null,(e.stateNode.isHidden=l)&&!c&&e.mode&1)for(xt=e,c=e.child;c!==null;){for(f=xt=c;xt!==null;){switch(d=xt,h=d.child,d.tag){case 0:case 11:case 14:case 15:hC(4,d,d.return);break;case 1:Sw(d,d.return);var p=d.stateNode;if(typeof p.componentWillUnmount=="function"){r=d,n=d.return;try{t=r,p.props=t.memoizedProps,p.state=t.memoizedState,p.componentWillUnmount()}catch(m){zi(r,n,m)}}break;case 5:Sw(d,d.return);break;case 22:if(d.memoizedState!==null){Gse(f);continue}}h!==null?(h.return=d,xt=h):Gse(f)}c=c.sibling}e:for(c=null,f=e;;){if(f.tag===5){if(c===null){c=f;try{i=f.stateNode,l?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=f.stateNode,u=f.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,a.style.display=qye("display",o))}catch(m){zi(e,e.return,m)}}}else if(f.tag===6){if(c===null)try{f.stateNode.nodeValue=l?"":f.memoizedProps}catch(m){zi(e,e.return,m)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;c===f&&(c=null),f=f.return}c===f&&(c=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:nf(t,e),xd(e),r&4&&qse(e);break;case 21:break;default:nf(t,e),xd(e)}}function xd(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(y1e(n)){var r=n;break e}n=n.return}throw Error(tt(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(uA(i,""),r.flags&=-33);var s=Hse(e);FU(e,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=Hse(e);LU(e,a,o);break;default:throw Error(tt(161))}}catch(u){zi(e,e.return,u)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function mBe(e,t,n){xt=e,_1e(e)}function _1e(e,t,n){for(var r=(e.mode&1)!==0;xt!==null;){var i=xt,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||wN;if(!o){var a=i.alternate,u=a!==null&&a.memoizedState!==null||ua;a=wN;var l=ua;if(wN=o,(ua=u)&&!l)for(xt=i;xt!==null;)o=xt,u=o.child,o.tag===22&&o.memoizedState!==null?Yse(i):u!==null?(u.return=o,xt=u):Yse(i);for(;s!==null;)xt=s,_1e(s),s=s.sibling;xt=i,wN=a,ua=l}Wse(e)}else i.subtreeFlags&8772&&s!==null?(s.return=i,xt=s):Wse(e)}}function Wse(e){for(;xt!==null;){var t=xt;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:ua||dL(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!ua)if(n===null)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:pf(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;s!==null&&Rse(t,s,r);break;case 3:var o=t.updateQueue;if(o!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Rse(t,o,n)}break;case 5:var a=t.stateNode;if(n===null&&t.flags&4){n=a;var u=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var l=t.alternate;if(l!==null){var c=l.memoizedState;if(c!==null){var f=c.dehydrated;f!==null&&dA(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(tt(163))}ua||t.flags&512&&MU(t)}catch(d){zi(t,t.return,d)}}if(t===e){xt=null;break}if(n=t.sibling,n!==null){n.return=t.return,xt=n;break}xt=t.return}}function Gse(e){for(;xt!==null;){var t=xt;if(t===e){xt=null;break}var n=t.sibling;if(n!==null){n.return=t.return,xt=n;break}xt=t.return}}function Yse(e){for(;xt!==null;){var t=xt;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{dL(4,t)}catch(u){zi(t,n,u)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var i=t.return;try{r.componentDidMount()}catch(u){zi(t,i,u)}}var s=t.return;try{MU(t)}catch(u){zi(t,s,u)}break;case 5:var o=t.return;try{MU(t)}catch(u){zi(t,o,u)}}}catch(u){zi(t,t.return,u)}if(t===e){xt=null;break}var a=t.sibling;if(a!==null){a.return=t.return,xt=a;break}xt=t.return}}var gBe=Math.ceil,$O=Vm.ReactCurrentDispatcher,_W=Vm.ReactCurrentOwner,Ic=Vm.ReactCurrentBatchConfig,ur=0,ao=null,ws=null,No=0,gl=0,Tw=Cy(0),Os=0,xA=null,B1=0,hL=0,wW=0,pC=null,Cu=null,EW=0,PE=1/0,Ip=null,MO=!1,jU=null,y0=null,EN=!1,Qg=null,LO=0,mC=0,BU=null,sD=-1,oD=0;function Ya(){return ur&6?ss():sD!==-1?sD:sD=ss()}function v0(e){return e.mode&1?ur&2&&No!==0?No&-No:Z9e.transition!==null?(oD===0&&(oD=ive()),oD):(e=Or,e!==0||(e=window.event,e=e===void 0?16:fve(e.type)),e):1}function jf(e,t,n,r){if(50<mC)throw mC=0,BU=null,Error(tt(185));tk(e,n,r),(!(ur&2)||e!==ao)&&(e===ao&&(!(ur&2)&&(hL|=n),Os===4&&Ug(e,No)),zu(e,r),n===1&&ur===0&&!(t.mode&1)&&(PE=ss()+500,lL&&Ay()))}function zu(e,t){var n=e.callbackNode;Z8e(e,t);var r=_O(e,e===ao?No:0);if(r===0)n!==null&&rse(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&rse(n),t===1)e.tag===0?J9e(Kse.bind(null,e)):Rve(Kse.bind(null,e)),Y9e(function(){!(ur&6)&&Ay()}),n=null;else{switch(sve(r)){case 1:n=Yq;break;case 4:n=nve;break;case 16:n=bO;break;case 536870912:n=rve;break;default:n=bO}n=I1e(n,w1e.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function w1e(e,t){if(sD=-1,oD=0,ur&6)throw Error(tt(327));var n=e.callbackNode;if(qw()&&e.callbackNode!==n)return null;var r=_O(e,e===ao?No:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=FO(e,r);else{t=r;var i=ur;ur|=2;var s=x1e();(ao!==e||No!==t)&&(Ip=null,PE=ss()+500,w1(e,t));do try{bBe();break}catch(a){E1e(e,a)}while(!0);aW(),$O.current=s,ur=i,ws!==null?t=0:(ao=null,No=0,t=Os)}if(t!==0){if(t===2&&(i=hU(e),i!==0&&(r=i,t=UU(e,i))),t===1)throw n=xA,w1(e,0),Ug(e,r),zu(e,ss()),n;if(t===6)Ug(e,r);else{if(i=e.current.alternate,!(r&30)&&!yBe(i)&&(t=FO(e,r),t===2&&(s=hU(e),s!==0&&(r=s,t=UU(e,s))),t===1))throw n=xA,w1(e,0),Ug(e,r),zu(e,ss()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(tt(345));case 2:Tv(e,Cu,Ip);break;case 3:if(Ug(e,r),(r&130023424)===r&&(t=EW+500-ss(),10<t)){if(_O(e,0)!==0)break;if(i=e.suspendedLanes,(i&r)!==r){Ya(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=wU(Tv.bind(null,e,Cu,Ip),t);break}Tv(e,Cu,Ip);break;case 4:if(Ug(e,r),(r&4194240)===r)break;for(t=e.eventTimes,i=-1;0<r;){var o=31-Ff(r);s=1<<o,o=t[o],o>i&&(i=o),r&=~s}if(r=i,r=ss()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*gBe(r/1960))-r,10<r){e.timeoutHandle=wU(Tv.bind(null,e,Cu,Ip),r);break}Tv(e,Cu,Ip);break;case 5:Tv(e,Cu,Ip);break;default:throw Error(tt(329))}}}return zu(e,ss()),e.callbackNode===n?w1e.bind(null,e):null}function UU(e,t){var n=pC;return e.current.memoizedState.isDehydrated&&(w1(e,t).flags|=256),e=FO(e,t),e!==2&&(t=Cu,Cu=n,t!==null&&zU(t)),e}function zU(e){Cu===null?Cu=e:Cu.push.apply(Cu,e)}function yBe(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Gf(s(),i))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Ug(e,t){for(t&=~wW,t&=~hL,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Ff(t),r=1<<n;e[n]=-1,t&=~r}}function Kse(e){if(ur&6)throw Error(tt(327));qw();var t=_O(e,0);if(!(t&1))return zu(e,ss()),null;var n=FO(e,t);if(e.tag!==0&&n===2){var r=hU(e);r!==0&&(t=r,n=UU(e,r))}if(n===1)throw n=xA,w1(e,0),Ug(e,t),zu(e,ss()),n;if(n===6)throw Error(tt(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Tv(e,Cu,Ip),zu(e,ss()),null}function xW(e,t){var n=ur;ur|=1;try{return e(t)}finally{ur=n,ur===0&&(PE=ss()+500,lL&&Ay())}}function U1(e){Qg!==null&&Qg.tag===0&&!(ur&6)&&qw();var t=ur;ur|=1;var n=Ic.transition,r=Or;try{if(Ic.transition=null,Or=1,e)return e()}finally{Or=r,Ic.transition=n,ur=t,!(ur&6)&&Ay()}}function SW(){gl=Tw.current,pi(Tw)}function w1(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,G9e(n)),ws!==null)for(n=ws.return;n!==null;){var r=n;switch(iW(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&TO();break;case 3:RE(),pi(Bu),pi(_a),hW();break;case 5:dW(r);break;case 4:RE();break;case 13:pi(Ni);break;case 19:pi(Ni);break;case 10:uW(r.type._context);break;case 22:case 23:SW()}n=n.return}if(ao=e,ws=e=b0(e.current,null),No=gl=t,Os=0,xA=null,wW=hL=B1=0,Cu=pC=null,t1!==null){for(t=0;t<t1.length;t++)if(n=t1[t],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}t1=null}return e}function E1e(e,t){do{var n=ws;try{if(aW(),nD.current=OO,DO){for(var r=Pi.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}DO=!1}if(j1=0,Xs=Is=Pi=null,dC=!1,_A=0,_W.current=null,n===null||n.return===null){Os=1,xA=t,ws=null;break}e:{var s=e,o=n.return,a=n,u=t;if(t=No,a.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var l=u,c=a,f=c.tag;if(!(c.mode&1)&&(f===0||f===11||f===15)){var d=c.alternate;d?(c.updateQueue=d.updateQueue,c.memoizedState=d.memoizedState,c.lanes=d.lanes):(c.updateQueue=null,c.memoizedState=null)}var h=Mse(o);if(h!==null){h.flags&=-257,Lse(h,o,a,s,t),h.mode&1&&$se(s,l,t),t=h,u=l;var p=t.updateQueue;if(p===null){var m=new Set;m.add(u),t.updateQueue=m}else p.add(u);break e}else{if(!(t&1)){$se(s,l,t),TW();break e}u=Error(tt(426))}}else if(xi&&a.mode&1){var g=Mse(o);if(g!==null){!(g.flags&65536)&&(g.flags|=256),Lse(g,o,a,s,t),sW(NE(u,a));break e}}s=u=NE(u,a),Os!==4&&(Os=2),pC===null?pC=[s]:pC.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t;var y=s1e(s,u,t);kse(s,y);break e;case 1:a=u;var v=s.type,_=s.stateNode;if(!(s.flags&128)&&(typeof v.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(y0===null||!y0.has(_)))){s.flags|=65536,t&=-t,s.lanes|=t;var w=o1e(s,a,t);kse(s,w);break e}}s=s.return}while(s!==null)}T1e(n)}catch(E){t=E,ws===n&&n!==null&&(ws=n=n.return);continue}break}while(!0)}function x1e(){var e=$O.current;return $O.current=OO,e===null?OO:e}function TW(){(Os===0||Os===3||Os===2)&&(Os=4),ao===null||!(B1&268435455)&&!(hL&268435455)||Ug(ao,No)}function FO(e,t){var n=ur;ur|=2;var r=x1e();(ao!==e||No!==t)&&(Ip=null,w1(e,t));do try{vBe();break}catch(i){E1e(e,i)}while(!0);if(aW(),ur=n,$O.current=r,ws!==null)throw Error(tt(261));return ao=null,No=0,Os}function vBe(){for(;ws!==null;)S1e(ws)}function bBe(){for(;ws!==null&&!H8e();)S1e(ws)}function S1e(e){var t=A1e(e.alternate,e,gl);e.memoizedProps=e.pendingProps,t===null?T1e(e):ws=t,_W.current=null}function T1e(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=dBe(n,t),n!==null){n.flags&=32767,ws=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Os=6,ws=null;return}}else if(n=fBe(n,t,gl),n!==null){ws=n;return}if(t=t.sibling,t!==null){ws=t;return}ws=t=e}while(t!==null);Os===0&&(Os=5)}function Tv(e,t,n){var r=Or,i=Ic.transition;try{Ic.transition=null,Or=1,_Be(e,t,n,r)}finally{Ic.transition=i,Or=r}return null}function _Be(e,t,n,r){do qw();while(Qg!==null);if(ur&6)throw Error(tt(327));n=e.finishedWork;var i=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(tt(177));e.callbackNode=null,e.callbackPriority=0;var s=n.lanes|n.childLanes;if(e9e(e,s),e===ao&&(ws=ao=null,No=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||EN||(EN=!0,I1e(bO,function(){return qw(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Ic.transition,Ic.transition=null;var o=Or;Or=1;var a=ur;ur|=4,_W.current=null,pBe(e,n),b1e(n,e),B9e(bU),wO=!!vU,bU=vU=null,e.current=n,mBe(n),q8e(),ur=a,Or=o,Ic.transition=s}else e.current=n;if(EN&&(EN=!1,Qg=e,LO=i),s=e.pendingLanes,s===0&&(y0=null),Y8e(n.stateNode),zu(e,ss()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(MO)throw MO=!1,e=jU,jU=null,e;return LO&1&&e.tag!==0&&qw(),s=e.pendingLanes,s&1?e===BU?mC++:(mC=0,BU=e):mC=0,Ay(),null}function qw(){if(Qg!==null){var e=sve(LO),t=Ic.transition,n=Or;try{if(Ic.transition=null,Or=16>e?16:e,Qg===null)var r=!1;else{if(e=Qg,Qg=null,LO=0,ur&6)throw Error(tt(331));var i=ur;for(ur|=4,xt=e.current;xt!==null;){var s=xt,o=s.child;if(xt.flags&16){var a=s.deletions;if(a!==null){for(var u=0;u<a.length;u++){var l=a[u];for(xt=l;xt!==null;){var c=xt;switch(c.tag){case 0:case 11:case 15:hC(8,c,s)}var f=c.child;if(f!==null)f.return=c,xt=f;else for(;xt!==null;){c=xt;var d=c.sibling,h=c.return;if(g1e(c),c===l){xt=null;break}if(d!==null){d.return=h,xt=d;break}xt=h}}}var p=s.alternate;if(p!==null){var m=p.child;if(m!==null){p.child=null;do{var g=m.sibling;m.sibling=null,m=g}while(m!==null)}}xt=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,xt=o;else e:for(;xt!==null;){if(s=xt,s.flags&2048)switch(s.tag){case 0:case 11:case 15:hC(9,s,s.return)}var y=s.sibling;if(y!==null){y.return=s.return,xt=y;break e}xt=s.return}}var v=e.current;for(xt=v;xt!==null;){o=xt;var _=o.child;if(o.subtreeFlags&2064&&_!==null)_.return=o,xt=_;else e:for(o=v;xt!==null;){if(a=xt,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:dL(9,a)}}catch(E){zi(a,a.return,E)}if(a===o){xt=null;break e}var w=a.sibling;if(w!==null){w.return=a.return,xt=w;break e}xt=a.return}}if(ur=i,Ay(),ah&&typeof ah.onPostCommitFiberRoot=="function")try{ah.onPostCommitFiberRoot(iL,e)}catch{}r=!0}return r}finally{Or=n,Ic.transition=t}}return!1}function Xse(e,t,n){t=NE(n,t),t=s1e(e,t,1),e=g0(e,t,1),t=Ya(),e!==null&&(tk(e,1,t),zu(e,t))}function zi(e,t,n){if(e.tag===3)Xse(e,e,n);else for(;t!==null;){if(t.tag===3){Xse(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(y0===null||!y0.has(r))){e=NE(n,e),e=o1e(t,e,1),t=g0(t,e,1),e=Ya(),t!==null&&(tk(t,1,e),zu(t,e));break}}t=t.return}}function wBe(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=Ya(),e.pingedLanes|=e.suspendedLanes&n,ao===e&&(No&n)===n&&(Os===4||Os===3&&(No&130023424)===No&&500>ss()-EW?w1(e,0):wW|=n),zu(e,t)}function C1e(e,t){t===0&&(e.mode&1?(t=dN,dN<<=1,!(dN&130023424)&&(dN=4194304)):t=1);var n=Ya();e=ym(e,t),e!==null&&(tk(e,t,n),zu(e,n))}function EBe(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),C1e(e,n)}function xBe(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(tt(314))}r!==null&&r.delete(t),C1e(e,n)}var A1e;A1e=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Bu.current)Ou=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Ou=!1,cBe(e,t,n);Ou=!!(e.flags&131072)}else Ou=!1,xi&&t.flags&1048576&&Nve(t,IO,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;iD(e,t),e=t.pendingProps;var i=AE(t,_a.current);Hw(t,n),i=mW(null,t,r,e,i,n);var s=gW();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Uu(r)?(s=!0,CO(t)):s=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,cW(t),i.updater=fL,t.stateNode=i,i._reactInternals=t,IU(t,r,e,n),t=NU(null,t,r,!0,s,n)):(t.tag=0,xi&&s&&rW(t),Ma(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(iD(e,t),e=t.pendingProps,i=r._init,r=i(r._payload),t.type=r,i=t.tag=TBe(r),e=pf(r,e),i){case 0:t=RU(null,t,r,e,n);break e;case 1:t=Bse(null,t,r,e,n);break e;case 11:t=Fse(null,t,r,e,n);break e;case 14:t=jse(null,t,r,pf(r.type,e),n);break e}throw Error(tt(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:pf(r,i),RU(e,t,r,i,n);case 1:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:pf(r,i),Bse(e,t,r,i,n);case 3:e:{if(c1e(t),e===null)throw Error(tt(387));r=t.pendingProps,s=t.memoizedState,i=s.element,Lve(e,t),NO(t,r,null,n);var o=t.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){i=NE(Error(tt(423)),t),t=Use(e,t,r,n,i);break e}else if(r!==i){i=NE(Error(tt(424)),t),t=Use(e,t,r,n,i);break e}else for(xl=m0(t.stateNode.containerInfo.firstChild),Nl=t,xi=!0,_f=null,n=$ve(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(IE(),r===i){t=vm(e,t,n);break e}Ma(e,t,r,n)}t=t.child}return t;case 5:return Fve(t),e===null&&TU(t),r=t.type,i=t.pendingProps,s=e!==null?e.memoizedProps:null,o=i.children,_U(r,i)?o=null:s!==null&&_U(r,s)&&(t.flags|=32),l1e(e,t),Ma(e,t,o,n),t.child;case 6:return e===null&&TU(t),null;case 13:return f1e(e,t,n);case 4:return fW(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=kE(t,null,r,n):Ma(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:pf(r,i),Fse(e,t,r,i,n);case 7:return Ma(e,t,t.pendingProps,n),t.child;case 8:return Ma(e,t,t.pendingProps.children,n),t.child;case 12:return Ma(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,s=t.memoizedProps,o=i.value,ti(kO,r._currentValue),r._currentValue=o,s!==null)if(Gf(s.value,o)){if(s.children===i.children&&!Bu.current){t=vm(e,t,n);break e}}else for(s=t.child,s!==null&&(s.return=t);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var u=a.firstContext;u!==null;){if(u.context===r){if(s.tag===1){u=rm(-1,n&-n),u.tag=2;var l=s.updateQueue;if(l!==null){l=l.shared;var c=l.pending;c===null?u.next=u:(u.next=c.next,c.next=u),l.pending=u}}s.lanes|=n,u=s.alternate,u!==null&&(u.lanes|=n),CU(s.return,n,t),a.lanes|=n;break}u=u.next}}else if(s.tag===10)o=s.type===t.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(tt(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),CU(o,n,t),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===t){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Ma(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Hw(t,n),i=Nc(i),r=r(i),t.flags|=1,Ma(e,t,r,n),t.child;case 14:return r=t.type,i=pf(r,t.pendingProps),i=pf(r.type,i),jse(e,t,r,i,n);case 15:return a1e(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:pf(r,i),iD(e,t),t.tag=1,Uu(r)?(e=!0,CO(t)):e=!1,Hw(t,n),i1e(t,r,i),IU(t,r,i,n),NU(null,t,r,!0,e,n);case 19:return d1e(e,t,n);case 22:return u1e(e,t,n)}throw Error(tt(156,t.tag))};function I1e(e,t){return tve(e,t)}function SBe(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function xc(e,t,n,r){return new SBe(e,t,n,r)}function CW(e){return e=e.prototype,!(!e||!e.isReactComponent)}function TBe(e){if(typeof e=="function")return CW(e)?1:0;if(e!=null){if(e=e.$$typeof,e===qq)return 11;if(e===Wq)return 14}return 2}function b0(e,t){var n=e.alternate;return n===null?(n=xc(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function aD(e,t,n,r,i,s){var o=2;if(r=e,typeof e=="function")CW(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case mw:return E1(n.children,i,s,t);case Hq:o=8,i|=8;break;case JB:return e=xc(12,n,t,i|2),e.elementType=JB,e.lanes=s,e;case ZB:return e=xc(13,n,t,i),e.elementType=ZB,e.lanes=s,e;case eU:return e=xc(19,n,t,i),e.elementType=eU,e.lanes=s,e;case Fye:return pL(n,i,s,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Mye:o=10;break e;case Lye:o=9;break e;case qq:o=11;break e;case Wq:o=14;break e;case Rg:o=16,r=null;break e}throw Error(tt(130,e==null?e:typeof e,""))}return t=xc(o,n,t,i),t.elementType=e,t.type=r,t.lanes=s,t}function E1(e,t,n,r){return e=xc(7,e,r,t),e.lanes=n,e}function pL(e,t,n,r){return e=xc(22,e,r,t),e.elementType=Fye,e.lanes=n,e.stateNode={isHidden:!1},e}function xj(e,t,n){return e=xc(6,e,null,t),e.lanes=n,e}function Sj(e,t,n){return t=xc(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function CBe(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ij(0),this.expirationTimes=ij(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ij(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function AW(e,t,n,r,i,s,o,a,u){return e=new CBe(e,t,n,a,u),t===1?(t=1,s===!0&&(t|=8)):t=0,s=xc(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},cW(s),e}function ABe(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:pw,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function k1e(e){if(!e)return j0;e=e._reactInternals;e:{if(Rb(e)!==e||e.tag!==1)throw Error(tt(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Uu(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(tt(171))}if(e.tag===1){var n=e.type;if(Uu(n))return kve(e,n,t)}return t}function R1e(e,t,n,r,i,s,o,a,u){return e=AW(n,r,!0,e,i,s,o,a,u),e.context=k1e(null),n=e.current,r=Ya(),i=v0(n),s=rm(r,i),s.callback=t??null,g0(n,s,i),e.current.lanes=i,tk(e,i,r),zu(e,r),e}function mL(e,t,n,r){var i=t.current,s=Ya(),o=v0(i);return n=k1e(n),t.context===null?t.context=n:t.pendingContext=n,t=rm(s,o),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=g0(i,t,o),e!==null&&(jf(e,i,o,s),tD(e,i,o)),o}function jO(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Qse(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function IW(e,t){Qse(e,t),(e=e.alternate)&&Qse(e,t)}function IBe(){return null}var N1e=typeof reportError=="function"?reportError:function(e){console.error(e)};function kW(e){this._internalRoot=e}gL.prototype.render=kW.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(tt(409));mL(e,t,null,null)};gL.prototype.unmount=kW.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;U1(function(){mL(null,e,null,null)}),t[gm]=null}};function gL(e){this._internalRoot=e}gL.prototype.unstable_scheduleHydration=function(e){if(e){var t=uve();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Bg.length&&t!==0&&t<Bg[n].priority;n++);Bg.splice(n,0,e),n===0&&cve(e)}};function RW(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function yL(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Jse(){}function kBe(e,t,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var l=jO(o);s.call(l)}}var o=R1e(t,r,e,0,null,!1,!1,"",Jse);return e._reactRootContainer=o,e[gm]=o.current,mA(e.nodeType===8?e.parentNode:e),U1(),o}for(;i=e.lastChild;)e.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var l=jO(u);a.call(l)}}var u=AW(e,0,!1,null,null,!1,!1,"",Jse);return e._reactRootContainer=u,e[gm]=u.current,mA(e.nodeType===8?e.parentNode:e),U1(function(){mL(t,u,n,r)}),u}function vL(e,t,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var u=jO(o);a.call(u)}}mL(t,o,e,i)}else o=kBe(n,t,e,i,r);return jO(o)}ove=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=g2(t.pendingLanes);n!==0&&(Kq(t,n|1),zu(t,ss()),!(ur&6)&&(PE=ss()+500,Ay()))}break;case 13:U1(function(){var r=ym(e,1);if(r!==null){var i=Ya();jf(r,e,1,i)}}),IW(e,1)}};Xq=function(e){if(e.tag===13){var t=ym(e,134217728);if(t!==null){var n=Ya();jf(t,e,134217728,n)}IW(e,134217728)}};ave=function(e){if(e.tag===13){var t=v0(e),n=ym(e,t);if(n!==null){var r=Ya();jf(n,e,t,r)}IW(e,t)}};uve=function(){return Or};lve=function(e,t){var n=Or;try{return Or=e,t()}finally{Or=n}};cU=function(e,t,n){switch(t){case"input":if(rU(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=uL(r);if(!i)throw Error(tt(90));Bye(r),rU(r,i)}}}break;case"textarea":zye(e,n);break;case"select":t=n.value,t!=null&&Bw(e,!!n.multiple,t,!1)}};Kye=xW;Xye=U1;var RBe={usingClientEntryPoint:!1,Events:[rk,bw,uL,Gye,Yye,xW]},_T={findFiberByHostInstance:e1,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},NBe={bundleType:_T.bundleType,version:_T.version,rendererPackageName:_T.rendererPackageName,rendererConfig:_T.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Vm.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Zye(e),e===null?null:e.stateNode},findFiberByHostInstance:_T.findFiberByHostInstance||IBe,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var xN=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!xN.isDisabled&&xN.supportsFiber)try{iL=xN.inject(NBe),ah=xN}catch{}}Ql.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=RBe;Ql.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!RW(t))throw Error(tt(200));return ABe(e,t,null,n)};Ql.createRoot=function(e,t){if(!RW(e))throw Error(tt(299));var n=!1,r="",i=N1e;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=AW(e,1,!1,null,null,n,!1,r,i),e[gm]=t.current,mA(e.nodeType===8?e.parentNode:e),new kW(t)};Ql.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(tt(188)):(e=Object.keys(e).join(","),Error(tt(268,e)));return e=Zye(t),e=e===null?null:e.stateNode,e};Ql.flushSync=function(e){return U1(e)};Ql.hydrate=function(e,t,n){if(!yL(t))throw Error(tt(200));return vL(null,e,t,!0,n)};Ql.hydrateRoot=function(e,t,n){if(!RW(e))throw Error(tt(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=N1e;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),t=R1e(t,null,e,1,n??null,i,!1,s,o),e[gm]=t.current,mA(e),r)for(e=0;e<r.length;e++)n=r[e],i=n._getVersion,i=i(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new gL(t)};Ql.render=function(e,t,n){if(!yL(t))throw Error(tt(200));return vL(null,e,t,!1,n)};Ql.unmountComponentAtNode=function(e){if(!yL(e))throw Error(tt(40));return e._reactRootContainer?(U1(function(){vL(null,null,e,!1,function(){e._reactRootContainer=null,e[gm]=null})}),!0):!1};Ql.unstable_batchedUpdates=xW;Ql.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!yL(n))throw Error(tt(200));if(e==null||e._reactInternals===void 0)throw Error(tt(38));return vL(e,t,n,!1,r)};Ql.version="18.3.1-next-f1338f8080-20240426";function P1e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(P1e)}catch(e){console.error(e)}}P1e(),Pye.exports=Ql;var sk=Pye.exports;const v2=Xl(sk);var Zse=sk;XB.createRoot=Zse.createRoot,XB.hydrateRoot=Zse.hydrateRoot;var Ud=function(){return Ud=Object.assign||function(t){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},Ud.apply(this,arguments)};function ok(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}function Fp(e,t,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(c){try{l(r.next(c))}catch(f){o(f)}}function u(c){try{l(r.throw(c))}catch(f){o(f)}}function l(c){c.done?s(c.value):i(c.value).then(a,u)}l((r=r.apply(e,t||[])).next())})}function eoe(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function PBe(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,s;r<i;r++)(s||!(r in t))&&(s||(s=Array.prototype.slice.call(t,0,r)),s[r]=t[r]);return e.concat(s||Array.prototype.slice.call(t))}function Yn(e){return this instanceof Yn?(this.v=e,this):new Yn(e)}function r1(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(e,t||[]),i,s=[];return i={},a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(h){return function(p){return Promise.resolve(p).then(h,f)}}function a(h,p){r[h]&&(i[h]=function(m){return new Promise(function(g,y){s.push([h,m,g,y])>1||u(h,m)})},p&&(i[h]=p(i[h])))}function u(h,p){try{l(r[h](p))}catch(m){d(s[0][3],m)}}function l(h){h.value instanceof Yn?Promise.resolve(h.value.v).then(c,f):d(s[0][2],h)}function c(h){u("next",h)}function f(h){u("throw",h)}function d(h,p){h(p),s.shift(),s.length&&u(s[0][0],s[0][1])}}function Tj(e){var t,n;return t={},r("next"),r("throw",function(i){throw i}),r("return"),t[Symbol.iterator]=function(){return this},t;function r(i,s){t[i]=e[i]?function(o){return(n=!n)?{value:Yn(e[i](o)),done:!1}:s?s(o):o}:s}}function gC(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof eoe=="function"?eoe(e):e[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=e[s]&&function(o){return new Promise(function(a,u){o=e[s](o),i(a,u,o.done,o.value)})}}function i(s,o,a,u){Promise.resolve(u).then(function(l){s({value:l,done:a})},o)}}var uD="right-scroll-bar-position",lD="width-before-scroll-bar",DBe="with-scroll-bars-hidden",OBe="--removed-body-scroll-bar-size";function Cj(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function $Be(e,t){var n=I.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(r){var i=n.value;i!==r&&(n.value=r,n.callback(r,i))}}}})[0];return n.callback=t,n.facade}var MBe=typeof window<"u"?I.useLayoutEffect:I.useEffect,toe=new WeakMap;function LBe(e,t){var n=$Be(null,function(r){return e.forEach(function(i){return Cj(i,r)})});return MBe(function(){var r=toe.get(n);if(r){var i=new Set(r),s=new Set(e),o=n.current;i.forEach(function(a){s.has(a)||Cj(a,null)}),s.forEach(function(a){i.has(a)||Cj(a,o)})}toe.set(n,e)},[e]),n}function FBe(e){return e}function jBe(e,t){t===void 0&&(t=FBe);var n=[],r=!1,i={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(s){var o=t(s,r);return n.push(o),function(){n=n.filter(function(a){return a!==o})}},assignSyncMedium:function(s){for(r=!0;n.length;){var o=n;n=[],o.forEach(s)}n={push:function(a){return s(a)},filter:function(){return n}}},assignMedium:function(s){r=!0;var o=[];if(n.length){var a=n;n=[],a.forEach(s),o=n}var u=function(){var c=o;o=[],c.forEach(s)},l=function(){return Promise.resolve().then(u)};l(),n={push:function(c){o.push(c),l()},filter:function(c){return o=o.filter(c),n}}}};return i}function BBe(e){e===void 0&&(e={});var t=jBe(null);return t.options=Ud({async:!0,ssr:!1},e),t}var D1e=function(e){var t=e.sideCar,n=ok(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=t.read();if(!r)throw new Error("Sidecar medium not found");return I.createElement(r,Ud({},n))};D1e.isSideCarExport=!0;function UBe(e,t){return e.useMedium(t),D1e}var O1e=BBe(),Aj=function(){},bL=I.forwardRef(function(e,t){var n=I.useRef(null),r=I.useState({onScrollCapture:Aj,onWheelCapture:Aj,onTouchMoveCapture:Aj}),i=r[0],s=r[1],o=e.forwardProps,a=e.children,u=e.className,l=e.removeScrollBar,c=e.enabled,f=e.shards,d=e.sideCar,h=e.noIsolation,p=e.inert,m=e.allowPinchZoom,g=e.as,y=g===void 0?"div":g,v=e.gapMode,_=ok(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),w=d,E=LBe([n,t]),S=Ud(Ud({},_),i);return I.createElement(I.Fragment,null,c&&I.createElement(w,{sideCar:O1e,removeScrollBar:l,shards:f,noIsolation:h,inert:p,setCallbacks:s,allowPinchZoom:!!m,lockRef:n,gapMode:v}),o?I.cloneElement(I.Children.only(a),Ud(Ud({},S),{ref:E})):I.createElement(y,Ud({},S,{className:u,ref:E}),a))});bL.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};bL.classNames={fullWidth:lD,zeroRight:uD};var zBe=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function VBe(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=zBe();return t&&e.setAttribute("nonce",t),e}function HBe(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function qBe(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var WBe=function(){var e=0,t=null;return{add:function(n){e==0&&(t=VBe())&&(HBe(t,n),qBe(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},GBe=function(){var e=WBe();return function(t,n){I.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},$1e=function(){var e=GBe(),t=function(n){var r=n.styles,i=n.dynamic;return e(r,i),null};return t},YBe={left:0,top:0,right:0,gap:0},Ij=function(e){return parseInt(e||"",10)||0},KBe=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],r=t[e==="padding"?"paddingTop":"marginTop"],i=t[e==="padding"?"paddingRight":"marginRight"];return[Ij(n),Ij(r),Ij(i)]},XBe=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return YBe;var t=KBe(e),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-n+t[2]-t[0])}},QBe=$1e(),Ww="data-scroll-locked",JBe=function(e,t,n,r){var i=e.left,s=e.top,o=e.right,a=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(DBe,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(a,"px ").concat(r,`;
  }
  body[`).concat(Ww,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(s,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(a,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(uD,` {
    right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(lD,` {
    margin-right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(uD," .").concat(uD,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(lD," .").concat(lD,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(Ww,`] {
    `).concat(OBe,": ").concat(a,`px;
  }
`)},noe=function(){var e=parseInt(document.body.getAttribute(Ww)||"0",10);return isFinite(e)?e:0},ZBe=function(){I.useEffect(function(){return document.body.setAttribute(Ww,(noe()+1).toString()),function(){var e=noe()-1;e<=0?document.body.removeAttribute(Ww):document.body.setAttribute(Ww,e.toString())}},[])},eUe=function(e){var t=e.noRelative,n=e.noImportant,r=e.gapMode,i=r===void 0?"margin":r;ZBe();var s=I.useMemo(function(){return XBe(i)},[i]);return I.createElement(QBe,{styles:JBe(s,!t,i,n?"":"!important")})},VU=!1;if(typeof window<"u")try{var SN=Object.defineProperty({},"passive",{get:function(){return VU=!0,!0}});window.addEventListener("test",SN,SN),window.removeEventListener("test",SN,SN)}catch{VU=!1}var T_=VU?{passive:!1}:!1,tUe=function(e){return e.tagName==="TEXTAREA"},M1e=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!tUe(e)&&n[t]==="visible")},nUe=function(e){return M1e(e,"overflowY")},rUe=function(e){return M1e(e,"overflowX")},roe=function(e,t){var n=t.ownerDocument,r=t;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var i=L1e(e,r);if(i){var s=F1e(e,r),o=s[1],a=s[2];if(o>a)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},iUe=function(e){var t=e.scrollTop,n=e.scrollHeight,r=e.clientHeight;return[t,n,r]},sUe=function(e){var t=e.scrollLeft,n=e.scrollWidth,r=e.clientWidth;return[t,n,r]},L1e=function(e,t){return e==="v"?nUe(t):rUe(t)},F1e=function(e,t){return e==="v"?iUe(t):sUe(t)},oUe=function(e,t){return e==="h"&&t==="rtl"?-1:1},aUe=function(e,t,n,r,i){var s=oUe(e,window.getComputedStyle(t).direction),o=s*r,a=n.target,u=t.contains(a),l=!1,c=o>0,f=0,d=0;do{var h=F1e(e,a),p=h[0],m=h[1],g=h[2],y=m-g-s*p;(p||y)&&L1e(e,a)&&(f+=y,d+=p),a instanceof ShadowRoot?a=a.host:a=a.parentNode}while(!u&&a!==document.body||u&&(t.contains(a)||t===a));return(c&&(Math.abs(f)<1||!i)||!c&&(Math.abs(d)<1||!i))&&(l=!0),l},TN=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},ioe=function(e){return[e.deltaX,e.deltaY]},soe=function(e){return e&&"current"in e?e.current:e},uUe=function(e,t){return e[0]===t[0]&&e[1]===t[1]},lUe=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},cUe=0,C_=[];function fUe(e){var t=I.useRef([]),n=I.useRef([0,0]),r=I.useRef(),i=I.useState(cUe++)[0],s=I.useState($1e)[0],o=I.useRef(e);I.useEffect(function(){o.current=e},[e]),I.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(i));var m=PBe([e.lockRef.current],(e.shards||[]).map(soe),!0).filter(Boolean);return m.forEach(function(g){return g.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),m.forEach(function(g){return g.classList.remove("allow-interactivity-".concat(i))})}}},[e.inert,e.lockRef.current,e.shards]);var a=I.useCallback(function(m,g){if("touches"in m&&m.touches.length===2)return!o.current.allowPinchZoom;var y=TN(m),v=n.current,_="deltaX"in m?m.deltaX:v[0]-y[0],w="deltaY"in m?m.deltaY:v[1]-y[1],E,S=m.target,T=Math.abs(_)>Math.abs(w)?"h":"v";if("touches"in m&&T==="h"&&S.type==="range")return!1;var C=roe(T,S);if(!C)return!0;if(C?E=T:(E=T==="v"?"h":"v",C=roe(T,S)),!C)return!1;if(!r.current&&"changedTouches"in m&&(_||w)&&(r.current=E),!E)return!0;var A=r.current||E;return aUe(A,g,m,A==="h"?_:w,!0)},[]),u=I.useCallback(function(m){var g=m;if(!(!C_.length||C_[C_.length-1]!==s)){var y="deltaY"in g?ioe(g):TN(g),v=t.current.filter(function(E){return E.name===g.type&&(E.target===g.target||g.target===E.shadowParent)&&uUe(E.delta,y)})[0];if(v&&v.should){g.cancelable&&g.preventDefault();return}if(!v){var _=(o.current.shards||[]).map(soe).filter(Boolean).filter(function(E){return E.contains(g.target)}),w=_.length>0?a(g,_[0]):!o.current.noIsolation;w&&g.cancelable&&g.preventDefault()}}},[]),l=I.useCallback(function(m,g,y,v){var _={name:m,delta:g,target:y,should:v,shadowParent:dUe(y)};t.current.push(_),setTimeout(function(){t.current=t.current.filter(function(w){return w!==_})},1)},[]),c=I.useCallback(function(m){n.current=TN(m),r.current=void 0},[]),f=I.useCallback(function(m){l(m.type,ioe(m),m.target,a(m,e.lockRef.current))},[]),d=I.useCallback(function(m){l(m.type,TN(m),m.target,a(m,e.lockRef.current))},[]);I.useEffect(function(){return C_.push(s),e.setCallbacks({onScrollCapture:f,onWheelCapture:f,onTouchMoveCapture:d}),document.addEventListener("wheel",u,T_),document.addEventListener("touchmove",u,T_),document.addEventListener("touchstart",c,T_),function(){C_=C_.filter(function(m){return m!==s}),document.removeEventListener("wheel",u,T_),document.removeEventListener("touchmove",u,T_),document.removeEventListener("touchstart",c,T_)}},[]);var h=e.removeScrollBar,p=e.inert;return I.createElement(I.Fragment,null,p?I.createElement(s,{styles:lUe(i)}):null,h?I.createElement(eUe,{gapMode:e.gapMode}):null)}function dUe(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const hUe=UBe(O1e,fUe);var _L=I.forwardRef(function(e,t){return I.createElement(bL,Ud({},e,{ref:t,sideCar:hUe}))});_L.classNames=bL.classNames;function Xr(e){return Object.keys(e)}function kj(e){return e&&typeof e=="object"&&!Array.isArray(e)}function NW(e,t){const n={...e},r=t;return kj(e)&&kj(t)&&Object.keys(t).forEach(i=>{kj(r[i])&&i in e?n[i]=NW(n[i],r[i]):n[i]=r[i]}),n}function pUe(e){return e.replace(/[A-Z]/g,t=>`-${t.toLowerCase()}`)}function mUe(e){var t;return typeof e!="string"||!e.includes("var(--mantine-scale)")?e:(t=e.match(/^calc\((.*?)\)$/))==null?void 0:t[1].split("*")[0].trim()}function SA(e){const t=mUe(e);return typeof t=="number"?t:typeof t=="string"?t.includes("calc")||t.includes("var")?t:t.includes("px")?Number(t.replace("px","")):t.includes("rem")?Number(t.replace("rem",""))*16:t.includes("em")?Number(t.replace("em",""))*16:Number(t):NaN}function Rj(e){return e==="0rem"?"0rem":`calc(${e} * var(--mantine-scale))`}function j1e(e,{shouldScale:t=!1}={}){function n(r){if(r===0||r==="0")return`0${e}`;if(typeof r=="number"){const i=`${r/16}${e}`;return t?Rj(i):i}if(typeof r=="string"){if(r===""||r.startsWith("calc(")||r.startsWith("clamp(")||r.includes("rgba("))return r;if(r.includes(","))return r.split(",").map(s=>n(s)).join(",");if(r.includes(" "))return r.split(" ").map(s=>n(s)).join(" ");if(r.includes(e))return t?Rj(r):r;const i=r.replace("px","");if(!Number.isNaN(Number(i))){const s=`${Number(i)/16}${e}`;return t?Rj(s):s}}return r}return n}const Te=j1e("rem",{shouldScale:!0}),BO=j1e("em");function Iy(e){return Object.keys(e).reduce((t,n)=>(e[n]!==void 0&&(t[n]=e[n]),t),{})}function B1e(e){return typeof e=="number"?!0:typeof e=="string"?e.startsWith("calc(")||e.startsWith("var(")||e.includes(" ")&&e.trim()!==""?!0:/[0-9]/.test(e.trim().replace("-","")[0]):!1}function ky(e){return Array.isArray(e)||e===null?!1:typeof e=="object"?e.type!==I.Fragment:!1}function fo(e){const t=I.createContext(null);return[({children:i,value:s})=>b.jsx(t.Provider,{value:s,children:i}),()=>{const i=I.useContext(t);if(i===null)throw new Error(e);return i}]}function Yx(e=null){const t=I.createContext(e);return[({children:i,value:s})=>b.jsx(t.Provider,{value:s,children:i}),()=>I.useContext(t)]}function UO(e,t){return n=>{if(typeof n!="string"||n.trim().length===0)throw new Error(t);return`${e}-${n}`}}function zO(e,t){let n=e;for(;(n=n.parentElement)&&!n.matches(t););return n}function gUe(e,t,n){for(let r=e-1;r>=0;r-=1)if(!t[r].disabled)return r;if(n){for(let r=t.length-1;r>-1;r-=1)if(!t[r].disabled)return r}return e}function yUe(e,t,n){for(let r=e+1;r<t.length;r+=1)if(!t[r].disabled)return r;if(n){for(let r=0;r<t.length;r+=1)if(!t[r].disabled)return r}return e}function vUe(e,t,n){return zO(e,n)===zO(t,n)}function PW({parentSelector:e,siblingSelector:t,onKeyDown:n,loop:r=!0,activateOnFocus:i=!1,dir:s="rtl",orientation:o}){return a=>{var p;n==null||n(a);const u=Array.from(((p=zO(a.currentTarget,e))==null?void 0:p.querySelectorAll(t))||[]).filter(m=>vUe(a.currentTarget,m,e)),l=u.findIndex(m=>a.currentTarget===m),c=yUe(l,u,r),f=gUe(l,u,r),d=s==="rtl"?f:c,h=s==="rtl"?c:f;switch(a.key){case"ArrowRight":{o==="horizontal"&&(a.stopPropagation(),a.preventDefault(),u[d].focus(),i&&u[d].click());break}case"ArrowLeft":{o==="horizontal"&&(a.stopPropagation(),a.preventDefault(),u[h].focus(),i&&u[h].click());break}case"ArrowUp":{o==="vertical"&&(a.stopPropagation(),a.preventDefault(),u[f].focus(),i&&u[f].click());break}case"ArrowDown":{o==="vertical"&&(a.stopPropagation(),a.preventDefault(),u[c].focus(),i&&u[c].click());break}case"Home":{a.stopPropagation(),a.preventDefault(),!u[0].disabled&&u[0].focus();break}case"End":{a.stopPropagation(),a.preventDefault();const m=u.length-1;!u[m].disabled&&u[m].focus();break}}}}const bUe={app:100,modal:200,popover:300,overlay:400,max:9999};function Zl(e){return bUe[e]}const _Ue=()=>{};function wUe(e,t={active:!0}){return typeof e!="function"||!t.active?t.onKeyDown||_Ue:n=>{var r;n.key==="Escape"&&(e(n),(r=t.onTrigger)==null||r.call(t))}}function tn(e,t="size",n=!0){if(e!==void 0)return B1e(e)?n?Te(e):e:`var(--${t}-${e})`}function as(e){return tn(e,"mantine-spacing")}function Ur(e){return e===void 0?"var(--mantine-radius-default)":tn(e,"mantine-radius")}function uo(e){return tn(e,"mantine-font-size")}function U1e(e){return tn(e,"mantine-line-height",!1)}function DW(e){if(e)return tn(e,"mantine-shadow",!1)}function Gp(e,t){return n=>{e==null||e(n),t==null||t(n)}}function OW(e,t){return e in t.breakpoints?SA(t.breakpoints[e]):SA(e)}function TA(e,t){const n=e.map(r=>({value:r,px:OW(r,t)}));return n.sort((r,i)=>r.px-i.px),n}function kf(e){return typeof e=="object"&&e!==null?"base"in e?e.base:void 0:e}function EUe(e,t,n){var r;return n?Array.from(((r=zO(n,t))==null?void 0:r.querySelectorAll(e))||[]).findIndex(i=>i===n):null}function xUe(){const[e,t]=I.useState(-1);return[e,{setHovered:t,resetHovered:()=>t(-1)}]}function eh(e,t,n){return t===void 0&&n===void 0?e:t!==void 0&&n===void 0?Math.max(e,t):Math.min(t===void 0&&n!==void 0?e:Math.max(e,t),n)}function Gw(){return`mantine-${Math.random().toString(36).slice(2,11)}`}function Bv(e){const t=I.useRef(e);return I.useEffect(()=>{t.current=e}),I.useMemo(()=>(...n)=>{var r;return(r=t.current)==null?void 0:r.call(t,...n)},[])}function wL(e,t){const n=Bv(e),r=I.useRef(0);return I.useEffect(()=>()=>window.clearTimeout(r.current),[]),I.useCallback((...i)=>{window.clearTimeout(r.current),r.current=window.setTimeout(()=>n(...i),t)},[n,t])}const ooe=["mousedown","touchstart"];function SUe(e,t,n){const r=I.useRef();return I.useEffect(()=>{const i=s=>{const{target:o}=s??{};if(Array.isArray(n)){const a=(o==null?void 0:o.hasAttribute("data-ignore-outside-clicks"))||!document.body.contains(o)&&o.tagName!=="HTML";n.every(l=>!!l&&!s.composedPath().includes(l))&&!a&&e()}else r.current&&!r.current.contains(o)&&e()};return(t||ooe).forEach(s=>document.addEventListener(s,i)),()=>{(t||ooe).forEach(s=>document.removeEventListener(s,i))}},[r,e,n]),r}function TUe(e,t){try{return e.addEventListener("change",t),()=>e.removeEventListener("change",t)}catch{return e.addListener(t),()=>e.removeListener(t)}}function CUe(e,t){return typeof window<"u"&&"matchMedia"in window?window.matchMedia(e).matches:!1}function AUe(e,t,{getInitialValueInEffect:n}={getInitialValueInEffect:!0}){const[r,i]=I.useState(n?t:CUe(e)),s=I.useRef();return I.useEffect(()=>{if("matchMedia"in window)return s.current=window.matchMedia(e),i(s.current.matches),TUe(s.current,o=>i(o.matches))},[e]),r}const Nb=typeof document<"u"?I.useLayoutEffect:I.useEffect;function Th(e,t){const n=I.useRef(!1);I.useEffect(()=>()=>{n.current=!1},[]),I.useEffect(()=>{if(n.current)return e();n.current=!0},t)}function z1e({opened:e,shouldReturnFocus:t=!0}){const n=I.useRef(),r=()=>{var i;n.current&&"focus"in n.current&&typeof n.current.focus=="function"&&((i=n.current)==null||i.focus({preventScroll:!0}))};return Th(()=>{let i=-1;const s=o=>{o.key==="Tab"&&window.clearTimeout(i)};return document.addEventListener("keydown",s),e?n.current=document.activeElement:t&&(i=window.setTimeout(r,10)),()=>{window.clearTimeout(i),document.removeEventListener("keydown",s)}},[e,t]),r}function IUe(e,t="body > :not(script)"){const n=Gw(),r=Array.from(document.querySelectorAll(t)).map(i=>{var u;if((u=i==null?void 0:i.shadowRoot)!=null&&u.contains(e)||i.contains(e))return;const s=i.getAttribute("aria-hidden"),o=i.getAttribute("data-hidden"),a=i.getAttribute("data-focus-id");return i.setAttribute("data-focus-id",n),s===null||s==="false"?i.setAttribute("aria-hidden","true"):!o&&!a&&i.setAttribute("data-hidden",s),{node:i,ariaHidden:o||null}});return()=>{r.forEach(i=>{!i||n!==i.node.getAttribute("data-focus-id")||(i.ariaHidden===null?i.node.removeAttribute("aria-hidden"):i.node.setAttribute("aria-hidden",i.ariaHidden),i.node.removeAttribute("data-focus-id"),i.node.removeAttribute("data-hidden"))})}}const kUe=/input|select|textarea|button|object/,V1e="a, input, select, textarea, button, object, [tabindex]";function RUe(e){return e.style.display==="none"}function NUe(e){if(e.getAttribute("aria-hidden")||e.getAttribute("hidden")||e.getAttribute("type")==="hidden")return!1;let n=e;for(;n&&!(n===document.body||n.nodeType===11);){if(RUe(n))return!1;n=n.parentNode}return!0}function H1e(e){let t=e.getAttribute("tabindex");return t===null&&(t=void 0),parseInt(t,10)}function HU(e){const t=e.nodeName.toLowerCase(),n=!Number.isNaN(H1e(e));return(kUe.test(t)&&!e.disabled||e instanceof HTMLAnchorElement&&e.href||n)&&NUe(e)}function q1e(e){const t=H1e(e);return(Number.isNaN(t)||t>=0)&&HU(e)}function PUe(e){return Array.from(e.querySelectorAll(V1e)).filter(q1e)}function DUe(e,t){const n=PUe(e);if(!n.length){t.preventDefault();return}const r=n[t.shiftKey?0:n.length-1],i=e.getRootNode();let s=r===i.activeElement||e===i.activeElement;const o=i.activeElement;if(o.tagName==="INPUT"&&o.getAttribute("type")==="radio"&&(s=n.filter(c=>c.getAttribute("type")==="radio"&&c.getAttribute("name")===o.getAttribute("name")).includes(r)),!s)return;t.preventDefault();const u=n[t.shiftKey?n.length-1:0];u&&u.focus()}function OUe(e=!0){const t=I.useRef(),n=I.useRef(null),r=s=>{let o=s.querySelector("[data-autofocus]");if(!o){const a=Array.from(s.querySelectorAll(V1e));o=a.find(q1e)||a.find(HU)||null,!o&&HU(s)&&(o=s)}o&&o.focus({preventScroll:!0})},i=I.useCallback(s=>{if(e){if(s===null){n.current&&(n.current(),n.current=null);return}n.current=IUe(s),t.current!==s&&(s?(setTimeout(()=>{s.getRootNode()&&r(s)}),t.current=s):t.current=null)}},[e]);return I.useEffect(()=>{if(!e)return;t.current&&setTimeout(()=>r(t.current));const s=o=>{o.key==="Tab"&&t.current&&DUe(t.current,o)};return document.addEventListener("keydown",s),()=>{document.removeEventListener("keydown",s),n.current&&n.current()}},[e]),i}const $Ue=e=>(e+1)%1e6;function MUe(){const[,e]=I.useReducer($Ue,0);return e}const LUe=_r.useId||(()=>{});function FUe(){const e=LUe();return e?`mantine-${e.replace(/:/g,"")}`:""}function Ta(e){const t=FUe(),[n,r]=I.useState(t);return Nb(()=>{r(Gw())},[]),typeof e=="string"?e:typeof window>"u"?t:n}function W1e(e,t,n){I.useEffect(()=>(window.addEventListener(e,t,n),()=>window.removeEventListener(e,t,n)),[e,t])}function $W(e,t){typeof e=="function"?e(t):typeof e=="object"&&e!==null&&"current"in e&&(e.current=t)}function G1e(...e){return t=>{e.forEach(n=>$W(n,t))}}function hs(...e){return I.useCallback(G1e(...e),e)}function Y1e(e,t,n="ltr"){const r=I.useRef(null),i=I.useRef(!1),s=I.useRef(!1),o=I.useRef(0),[a,u]=I.useState(!1);return I.useEffect(()=>{i.current=!0},[]),I.useEffect(()=>{var v,_;const l=({x:w,y:E})=>{cancelAnimationFrame(o.current),o.current=requestAnimationFrame(()=>{if(i.current&&r.current){r.current.style.userSelect="none";const S=r.current.getBoundingClientRect();if(S.width&&S.height){const T=eh((w-S.left)/S.width,0,1);e({x:n==="ltr"?T:1-T,y:eh((E-S.top)/S.height,0,1)})}}})},c=()=>{document.addEventListener("mousemove",m),document.addEventListener("mouseup",h),document.addEventListener("touchmove",y),document.addEventListener("touchend",h)},f=()=>{document.removeEventListener("mousemove",m),document.removeEventListener("mouseup",h),document.removeEventListener("touchmove",y),document.removeEventListener("touchend",h)},d=()=>{!s.current&&i.current&&(s.current=!0,typeof(t==null?void 0:t.onScrubStart)=="function"&&t.onScrubStart(),u(!0),c())},h=()=>{s.current&&i.current&&(s.current=!1,u(!1),f(),setTimeout(()=>{typeof(t==null?void 0:t.onScrubEnd)=="function"&&t.onScrubEnd()},0))},p=w=>{d(),w.preventDefault(),m(w)},m=w=>l({x:w.clientX,y:w.clientY}),g=w=>{w.cancelable&&w.preventDefault(),d(),y(w)},y=w=>{w.cancelable&&w.preventDefault(),l({x:w.changedTouches[0].clientX,y:w.changedTouches[0].clientY})};return(v=r.current)==null||v.addEventListener("mousedown",p),(_=r.current)==null||_.addEventListener("touchstart",g,{passive:!1}),()=>{r.current&&(r.current.removeEventListener("mousedown",p),r.current.removeEventListener("touchstart",g))}},[n,e]),{ref:r,active:a}}function Ss({value:e,defaultValue:t,finalValue:n,onChange:r=()=>{}}){const[i,s]=I.useState(t!==void 0?t:n),o=(a,...u)=>{s(a),r==null||r(a,...u)};return e!==void 0?[e,r,!0]:[i,o,!1]}function EL(e,t){return AUe("(prefers-reduced-motion: reduce)",e,t)}const jUe={x:0,y:0,width:0,height:0,top:0,left:0,bottom:0,right:0};function x1(e){const t=I.useRef(0),n=I.useRef(null),[r,i]=I.useState(jUe),s=I.useMemo(()=>typeof window<"u"?new ResizeObserver(o=>{const a=o[0];a&&(cancelAnimationFrame(t.current),t.current=requestAnimationFrame(()=>{n.current&&i(a.contentRect)}))}):null,[]);return I.useEffect(()=>(n.current&&(s==null||s.observe(n.current,e)),()=>{s==null||s.disconnect(),t.current&&cancelAnimationFrame(t.current)}),[n.current]),[n,r]}function BUe(e){const[t,{width:n,height:r}]=x1(e);return{ref:t,width:n,height:r}}function UUe(e){const t=e.toLowerCase().split("+").map(s=>s.trim()),n={alt:t.includes("alt"),ctrl:t.includes("ctrl"),meta:t.includes("meta"),mod:t.includes("mod"),shift:t.includes("shift")},r=["alt","ctrl","meta","shift","mod"],i=t.find(s=>!r.includes(s));return{...n,key:i}}function zUe(e,t){const{alt:n,ctrl:r,meta:i,mod:s,shift:o,key:a}=e,{altKey:u,ctrlKey:l,metaKey:c,shiftKey:f,key:d}=t;if(n!==u)return!1;if(s){if(!l&&!c)return!1}else if(r!==l||i!==c)return!1;return o!==f?!1:!!(a&&(d.toLowerCase()===a.toLowerCase()||t.code.replace("Key","").toLowerCase()===a.toLowerCase()))}function VUe(e){return t=>zUe(UUe(e),t)}function HUe(e){return t=>{const n="nativeEvent"in t?t.nativeEvent:t;e.forEach(([r,i,s={preventDefault:!0}])=>{VUe(r)(n)&&(s.preventDefault&&t.preventDefault(),i(n))})}}function xL(e=!1,t){const{onOpen:n,onClose:r}={},[i,s]=I.useState(e),o=I.useCallback(()=>{s(l=>l||(n==null||n(),!0))},[n]),a=I.useCallback(()=>{s(l=>l&&(r==null||r(),!1))},[r]),u=I.useCallback(()=>{i?a():o()},[a,o,i]);return[i,{open:o,close:a,toggle:u}]}function qUe(e,t,n={autoInvoke:!1}){const r=I.useRef(null),i=I.useCallback((...o)=>{r.current||(r.current=window.setTimeout(()=>{e(o),r.current=null},t))},[t]),s=I.useCallback(()=>{r.current&&(window.clearTimeout(r.current),r.current=null)},[]);return I.useEffect(()=>(n.autoInvoke&&i(),s),[s,i]),{start:i,clear:s}}function WUe(e,t,n){const r=I.useRef(),i=I.useRef(null);return I.useEffect(()=>{const s=typeof n=="function"?n():n;return(s||i.current)&&(r.current=new MutationObserver(e),r.current.observe(s||i.current,t)),()=>{var o;(o=r.current)==null||o.disconnect()}},[e,t]),i}function GUe(){const[e,t]=I.useState(!1);return I.useEffect(()=>t(!0),[]),e}function YUe(e,t){window.dispatchEvent(new CustomEvent(e,{detail:t}))}function KUe(e){function t(r){const i=Object.keys(r).reduce((s,o)=>(s[`${e}:${o}`]=a=>r[o](a.detail),s),{});Nb(()=>(Object.keys(i).forEach(s=>{window.removeEventListener(s,i[s]),window.addEventListener(s,i[s])}),()=>Object.keys(i).forEach(s=>{window.removeEventListener(s,i[s])})),[i])}function n(r){return(...i)=>YUe(`${e}:${String(r)}`,i[0])}return[t,n]}var XUe={};function K1e(){return typeof process<"u"&&XUe?"production":"development"}function X1e(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(n=X1e(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function Xi(){for(var e,t,n=0,r="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=X1e(e))&&(r&&(r+=" "),r+=t);return r}const QUe={};function JUe(e){const t={};return e.forEach(n=>{Object.entries(n).forEach(([r,i])=>{t[r]?t[r]=Xi(t[r],i):t[r]=i})}),t}function SL({theme:e,classNames:t,props:n,stylesCtx:r}){const s=(Array.isArray(t)?t:[t]).map(o=>typeof o=="function"?o(e,n,r):o||QUe);return JUe(s)}function VO({theme:e,styles:t,props:n,stylesCtx:r}){return(Array.isArray(t)?t:[t]).reduce((s,o)=>typeof o=="function"?{...s,...o(e,n,r)}:{...s,...o},{})}const Q1e=I.createContext(null);function Ry(){const e=I.useContext(Q1e);if(!e)throw new Error("[@mantine/core] MantineProvider was not found in tree");return e}function ZUe(){return Ry().cssVariablesResolver}function e7e(){return Ry().classNamesPrefix}function MW(){return Ry().getStyleNonce}function t7e(){return Ry().withStaticClasses}function n7e(){return Ry().headless}function r7e(){var e;return(e=Ry().stylesTransform)==null?void 0:e.sx}function i7e(){var e;return(e=Ry().stylesTransform)==null?void 0:e.styles}function s7e(e){return/^#?([0-9A-F]{3}){1,2}([0-9A-F]{2})?$/i.test(e)}function o7e(e){let t=e.replace("#","");if(t.length===3){const o=t.split("");t=[o[0],o[0],o[1],o[1],o[2],o[2]].join("")}if(t.length===8){const o=parseInt(t.slice(6,8),16)/255;return{r:parseInt(t.slice(0,2),16),g:parseInt(t.slice(2,4),16),b:parseInt(t.slice(4,6),16),a:o}}const n=parseInt(t,16),r=n>>16&255,i=n>>8&255,s=n&255;return{r,g:i,b:s,a:1}}function a7e(e){const[t,n,r,i]=e.replace(/[^0-9,./]/g,"").split(/[/,]/).map(Number);return{r:t,g:n,b:r,a:i||1}}function u7e(e){const t=/^hsla?\(\s*(\d+)\s*,\s*(\d+%)\s*,\s*(\d+%)\s*(,\s*(0?\.\d+|\d+(\.\d+)?))?\s*\)$/i,n=e.match(t);if(!n)return{r:0,g:0,b:0,a:1};const r=parseInt(n[1],10),i=parseInt(n[2],10)/100,s=parseInt(n[3],10)/100,o=n[5]?parseFloat(n[5]):void 0,a=(1-Math.abs(2*s-1))*i,u=r/60,l=a*(1-Math.abs(u%2-1)),c=s-a/2;let f,d,h;return u>=0&&u<1?(f=a,d=l,h=0):u>=1&&u<2?(f=l,d=a,h=0):u>=2&&u<3?(f=0,d=a,h=l):u>=3&&u<4?(f=0,d=l,h=a):u>=4&&u<5?(f=l,d=0,h=a):(f=a,d=0,h=l),{r:Math.round((f+c)*255),g:Math.round((d+c)*255),b:Math.round((h+c)*255),a:o||1}}function LW(e){return s7e(e)?o7e(e):e.startsWith("rgb")?a7e(e):e.startsWith("hsl")?u7e(e):{r:0,g:0,b:0,a:1}}function CN(e,t){if(e.startsWith("var("))return`color-mix(in srgb, ${e}, black ${t*100}%)`;const{r:n,g:r,b:i,a:s}=LW(e),o=1-t,a=u=>Math.round(u*o);return`rgba(${a(n)}, ${a(r)}, ${a(i)}, ${s})`}function CA(e,t){return typeof e.primaryShade=="number"?e.primaryShade:t==="dark"?e.primaryShade.dark:e.primaryShade.light}function Nj(e){return e<=.03928?e/12.92:((e+.055)/1.055)**2.4}function l7e(e){const t=e.match(/oklch\((.*?)%\s/);return t?parseFloat(t[1]):null}function c7e(e){if(e.startsWith("oklch("))return(l7e(e)||0)/100;const{r:t,g:n,b:r}=LW(e),i=t/255,s=n/255,o=r/255,a=Nj(i),u=Nj(s),l=Nj(o);return .2126*a+.7152*u+.0722*l}function wT(e,t=.179){return e.startsWith("var(")?!1:c7e(e)>t}function Hh({color:e,theme:t,colorScheme:n}){if(typeof e!="string")throw new Error(`[@mantine/core] Failed to parse color. Expected color to be a string, instead got ${typeof e}`);if(e==="bright")return{color:e,value:n==="dark"?t.white:t.black,shade:void 0,isThemeColor:!1,isLight:wT(n==="dark"?t.white:t.black,t.luminanceThreshold),variable:"--mantine-color-bright"};if(e==="dimmed")return{color:e,value:n==="dark"?t.colors.dark[2]:t.colors.gray[7],shade:void 0,isThemeColor:!1,isLight:wT(n==="dark"?t.colors.dark[2]:t.colors.gray[6],t.luminanceThreshold),variable:"--mantine-color-dimmed"};if(e==="white"||e==="black")return{color:e,value:e==="white"?t.white:t.black,shade:void 0,isThemeColor:!1,isLight:wT(e==="white"?t.white:t.black,t.luminanceThreshold),variable:`--mantine-color-${e}`};const[r,i]=e.split("."),s=i?Number(i):void 0,o=r in t.colors;if(o){const a=s!==void 0?t.colors[r][s]:t.colors[r][CA(t,n||"light")];return{color:r,value:a,shade:s,isThemeColor:o,isLight:wT(a,t.luminanceThreshold),variable:i?`--mantine-color-${r}-${s}`:`--mantine-color-${r}-filled`}}return{color:e,value:e,isThemeColor:o,isLight:wT(e,t.luminanceThreshold),shade:s,variable:void 0}}function $r(e,t){const n=Hh({color:e||t.primaryColor,theme:t});return n.variable?`var(${n.variable})`:e}function qU(e,t){const n={from:(e==null?void 0:e.from)||t.defaultGradient.from,to:(e==null?void 0:e.to)||t.defaultGradient.to,deg:(e==null?void 0:e.deg)||t.defaultGradient.deg||0},r=$r(n.from,t),i=$r(n.to,t);return`linear-gradient(${n.deg}deg, ${r} 0%, ${i} 100%)`}function Nd(e,t){if(typeof e!="string"||t>1||t<0)return"rgba(0, 0, 0, 1)";if(e.startsWith("var(")){const s=(1-t)*100;return`color-mix(in srgb, ${e}, transparent ${s}%)`}if(e.startsWith("oklch"))return e.includes("/")?e.replace(/\/\s*[\d.]+\s*\)/,`/ ${t})`):e.replace(")",` / ${t})`);const{r:n,g:r,b:i}=LW(e);return`rgba(${n}, ${r}, ${i}, ${t})`}const A_=Nd,f7e=({color:e,theme:t,variant:n,gradient:r,autoContrast:i})=>{const s=Hh({color:e,theme:t}),o=typeof i=="boolean"?i:t.autoContrast;if(n==="filled"){const a=o&&s.isLight?"var(--mantine-color-black)":"var(--mantine-color-white)";return s.isThemeColor?s.shade===void 0?{background:`var(--mantine-color-${e}-filled)`,hover:`var(--mantine-color-${e}-filled-hover)`,color:a,border:`${Te(1)} solid transparent`}:{background:`var(--mantine-color-${s.color}-${s.shade})`,hover:`var(--mantine-color-${s.color}-${s.shade===9?8:s.shade+1})`,color:a,border:`${Te(1)} solid transparent`}:{background:e,hover:CN(e,.1),color:a,border:`${Te(1)} solid transparent`}}if(n==="light"){if(s.isThemeColor){if(s.shade===void 0)return{background:`var(--mantine-color-${e}-light)`,hover:`var(--mantine-color-${e}-light-hover)`,color:`var(--mantine-color-${e}-light-color)`,border:`${Te(1)} solid transparent`};const a=t.colors[s.color][s.shade];return{background:Nd(a,.1),hover:Nd(a,.12),color:`var(--mantine-color-${s.color}-${Math.min(s.shade,6)})`,border:`${Te(1)} solid transparent`}}return{background:Nd(e,.1),hover:Nd(e,.12),color:e,border:`${Te(1)} solid transparent`}}if(n==="outline")return s.isThemeColor?s.shade===void 0?{background:"transparent",hover:`var(--mantine-color-${e}-outline-hover)`,color:`var(--mantine-color-${e}-outline)`,border:`${Te(1)} solid var(--mantine-color-${e}-outline)`}:{background:"transparent",hover:Nd(t.colors[s.color][s.shade],.05),color:`var(--mantine-color-${s.color}-${s.shade})`,border:`${Te(1)} solid var(--mantine-color-${s.color}-${s.shade})`}:{background:"transparent",hover:Nd(e,.05),color:e,border:`${Te(1)} solid ${e}`};if(n==="subtle"){if(s.isThemeColor){if(s.shade===void 0)return{background:"transparent",hover:`var(--mantine-color-${e}-light-hover)`,color:`var(--mantine-color-${e}-light-color)`,border:`${Te(1)} solid transparent`};const a=t.colors[s.color][s.shade];return{background:"transparent",hover:Nd(a,.12),color:`var(--mantine-color-${s.color}-${Math.min(s.shade,6)})`,border:`${Te(1)} solid transparent`}}return{background:"transparent",hover:Nd(e,.12),color:e,border:`${Te(1)} solid transparent`}}return n==="transparent"?s.isThemeColor?s.shade===void 0?{background:"transparent",hover:"transparent",color:`var(--mantine-color-${e}-light-color)`,border:`${Te(1)} solid transparent`}:{background:"transparent",hover:"transparent",color:`var(--mantine-color-${s.color}-${Math.min(s.shade,6)})`,border:`${Te(1)} solid transparent`}:{background:"transparent",hover:"transparent",color:e,border:`${Te(1)} solid transparent`}:n==="white"?s.isThemeColor?s.shade===void 0?{background:"var(--mantine-color-white)",hover:CN(t.white,.01),color:`var(--mantine-color-${e}-filled)`,border:`${Te(1)} solid transparent`}:{background:"var(--mantine-color-white)",hover:CN(t.white,.01),color:`var(--mantine-color-${s.color}-${s.shade})`,border:`${Te(1)} solid transparent`}:{background:"var(--mantine-color-white)",hover:CN(t.white,.01),color:e,border:`${Te(1)} solid transparent`}:n==="gradient"?{background:qU(r,t),hover:qU(r,t),color:"var(--mantine-color-white)",border:"none"}:n==="default"?{background:"var(--mantine-color-default)",hover:"var(--mantine-color-default-hover)",color:"var(--mantine-color-default-color)",border:`${Te(1)} solid var(--mantine-color-default-border)`}:{}},d7e={dark:["#C9C9C9","#b8b8b8","#828282","#696969","#424242","#3b3b3b","#2e2e2e","#242424","#1f1f1f","#141414"],gray:["#f8f9fa","#f1f3f5","#e9ecef","#dee2e6","#ced4da","#adb5bd","#868e96","#495057","#343a40","#212529"],red:["#fff5f5","#ffe3e3","#ffc9c9","#ffa8a8","#ff8787","#ff6b6b","#fa5252","#f03e3e","#e03131","#c92a2a"],pink:["#fff0f6","#ffdeeb","#fcc2d7","#faa2c1","#f783ac","#f06595","#e64980","#d6336c","#c2255c","#a61e4d"],grape:["#f8f0fc","#f3d9fa","#eebefa","#e599f7","#da77f2","#cc5de8","#be4bdb","#ae3ec9","#9c36b5","#862e9c"],violet:["#f3f0ff","#e5dbff","#d0bfff","#b197fc","#9775fa","#845ef7","#7950f2","#7048e8","#6741d9","#5f3dc4"],indigo:["#edf2ff","#dbe4ff","#bac8ff","#91a7ff","#748ffc","#5c7cfa","#4c6ef5","#4263eb","#3b5bdb","#364fc7"],blue:["#e7f5ff","#d0ebff","#a5d8ff","#74c0fc","#4dabf7","#339af0","#228be6","#1c7ed6","#1971c2","#1864ab"],cyan:["#e3fafc","#c5f6fa","#99e9f2","#66d9e8","#3bc9db","#22b8cf","#15aabf","#1098ad","#0c8599","#0b7285"],teal:["#e6fcf5","#c3fae8","#96f2d7","#63e6be","#38d9a9","#20c997","#12b886","#0ca678","#099268","#087f5b"],green:["#ebfbee","#d3f9d8","#b2f2bb","#8ce99a","#69db7c","#51cf66","#40c057","#37b24d","#2f9e44","#2b8a3e"],lime:["#f4fce3","#e9fac8","#d8f5a2","#c0eb75","#a9e34b","#94d82d","#82c91e","#74b816","#66a80f","#5c940d"],yellow:["#fff9db","#fff3bf","#ffec99","#ffe066","#ffd43b","#fcc419","#fab005","#f59f00","#f08c00","#e67700"],orange:["#fff4e6","#ffe8cc","#ffd8a8","#ffc078","#ffa94d","#ff922b","#fd7e14","#f76707","#e8590c","#d9480f"]},aoe="-apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Helvetica, Arial, sans-serif, Apple Color Emoji, Segoe UI Emoji",FW={scale:1,fontSmoothing:!0,focusRing:"auto",white:"#fff",black:"#000",colors:d7e,primaryShade:{light:6,dark:8},primaryColor:"blue",variantColorResolver:f7e,autoContrast:!1,luminanceThreshold:.3,fontFamily:aoe,fontFamilyMonospace:"ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, Liberation Mono, Courier New, monospace",respectReducedMotion:!1,cursorType:"default",defaultGradient:{from:"blue",to:"cyan",deg:45},defaultRadius:"sm",activeClassName:"mantine-active",focusClassName:"",headings:{fontFamily:aoe,fontWeight:"700",textWrap:"wrap",sizes:{h1:{fontSize:Te(34),lineHeight:"1.3"},h2:{fontSize:Te(26),lineHeight:"1.35"},h3:{fontSize:Te(22),lineHeight:"1.4"},h4:{fontSize:Te(18),lineHeight:"1.45"},h5:{fontSize:Te(16),lineHeight:"1.5"},h6:{fontSize:Te(14),lineHeight:"1.5"}}},fontSizes:{xs:Te(12),sm:Te(14),md:Te(16),lg:Te(18),xl:Te(20)},lineHeights:{xs:"1.4",sm:"1.45",md:"1.55",lg:"1.6",xl:"1.65"},radius:{xs:Te(2),sm:Te(4),md:Te(8),lg:Te(16),xl:Te(32)},spacing:{xs:Te(10),sm:Te(12),md:Te(16),lg:Te(20),xl:Te(32)},breakpoints:{xs:"36em",sm:"48em",md:"62em",lg:"75em",xl:"88em"},shadows:{xs:`0 ${Te(1)} ${Te(3)} rgba(0, 0, 0, 0.05), 0 ${Te(1)} ${Te(2)} rgba(0, 0, 0, 0.1)`,sm:`0 ${Te(1)} ${Te(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${Te(10)} ${Te(15)} ${Te(-5)}, rgba(0, 0, 0, 0.04) 0 ${Te(7)} ${Te(7)} ${Te(-5)}`,md:`0 ${Te(1)} ${Te(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${Te(20)} ${Te(25)} ${Te(-5)}, rgba(0, 0, 0, 0.04) 0 ${Te(10)} ${Te(10)} ${Te(-5)}`,lg:`0 ${Te(1)} ${Te(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${Te(28)} ${Te(23)} ${Te(-7)}, rgba(0, 0, 0, 0.04) 0 ${Te(12)} ${Te(12)} ${Te(-7)}`,xl:`0 ${Te(1)} ${Te(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${Te(36)} ${Te(28)} ${Te(-7)}, rgba(0, 0, 0, 0.04) 0 ${Te(17)} ${Te(17)} ${Te(-7)}`},other:{},components:{}};function uoe(e){return e==="auto"||e==="dark"||e==="light"}function h7e({key:e="mantine-color-scheme-value"}={}){let t;return{get:n=>{if(typeof window>"u")return n;try{const r=window.localStorage.getItem(e);return uoe(r)?r:n}catch{return n}},set:n=>{try{window.localStorage.setItem(e,n)}catch(r){console.warn("[@mantine/core] Local storage color scheme manager was unable to save color scheme.",r)}},subscribe:n=>{t=r=>{r.storageArea===window.localStorage&&r.key===e&&uoe(r.newValue)&&n(r.newValue)},window.addEventListener("storage",t)},unsubscribe:()=>{window.removeEventListener("storage",t)},clear:()=>{window.localStorage.removeItem(e)}}}const p7e="[@mantine/core] MantineProvider: Invalid theme.primaryColor, it accepts only key of theme.colors, learn more – https://mantine.dev/theming/colors/#primary-color",loe="[@mantine/core] MantineProvider: Invalid theme.primaryShade, it accepts only 0-9 integers or an object { light: 0-9, dark: 0-9 }";function Pj(e){return e<0||e>9?!1:parseInt(e.toString(),10)===e}function coe(e){if(!(e.primaryColor in e.colors))throw new Error(p7e);if(typeof e.primaryShade=="object"&&(!Pj(e.primaryShade.dark)||!Pj(e.primaryShade.light)))throw new Error(loe);if(typeof e.primaryShade=="number"&&!Pj(e.primaryShade))throw new Error(loe)}function m7e(e,t){var r;if(!t)return coe(e),e;const n=NW(e,t);return t.fontFamily&&!((r=t.headings)!=null&&r.fontFamily)&&(n.headings.fontFamily=t.fontFamily),coe(n),n}const jW=I.createContext(null),g7e=()=>I.useContext(jW)||FW;function ps(){const e=I.useContext(jW);if(!e)throw new Error("@mantine/core: MantineProvider was not found in component tree, make sure you have it in your app");return e}function J1e({theme:e,children:t,inherit:n=!0}){const r=g7e(),i=I.useMemo(()=>m7e(n?r:FW,e),[e,r,n]);return b.jsx(jW.Provider,{value:i,children:t})}J1e.displayName="@mantine/core/MantineThemeProvider";function y7e(){const e=ps(),t=MW(),n=Xr(e.breakpoints).reduce((r,i)=>{const s=e.breakpoints[i].includes("px"),o=SA(e.breakpoints[i]),a=s?`${o-.1}px`:BO(o-.1),u=s?`${o}px`:BO(o);return`${r}@media (max-width: ${a}) {.mantine-visible-from-${i} {display: none !important;}}@media (min-width: ${u}) {.mantine-hidden-from-${i} {display: none !important;}}`},"");return b.jsx("style",{"data-mantine-styles":"classes",nonce:t==null?void 0:t(),dangerouslySetInnerHTML:{__html:n}})}function Dj(e){return Object.entries(e).map(([t,n])=>`${t}: ${n};`).join("")}function Oj(e,t){return(Array.isArray(e)?e:[e]).reduce((r,i)=>`${i}{${r}}`,t)}function v7e(e,t){const n=Dj(e.variables),r=n?Oj(t,n):"",i=Dj(e.dark),s=i?Oj(`${t}[data-mantine-color-scheme="dark"]`,i):"",o=Dj(e.light),a=o?Oj(`${t}[data-mantine-color-scheme="light"]`,o):"";return`${r}${s}${a}`}function Ny({color:e,theme:t,autoContrast:n}){return(typeof n=="boolean"?n:t.autoContrast)&&Hh({color:e||t.primaryColor,theme:t}).isLight?"var(--mantine-color-black)":"var(--mantine-color-white)"}function foe(e,t){return Ny({color:e.colors[e.primaryColor][CA(e,t)],theme:e,autoContrast:null})}function AN({theme:e,color:t,colorScheme:n,name:r=t,withColorValues:i=!0}){if(!e.colors[t])return{};if(n==="light"){const a=CA(e,"light"),u={[`--mantine-color-${r}-text`]:`var(--mantine-color-${r}-filled)`,[`--mantine-color-${r}-filled`]:`var(--mantine-color-${r}-${a})`,[`--mantine-color-${r}-filled-hover`]:`var(--mantine-color-${r}-${a===9?8:a+1})`,[`--mantine-color-${r}-light`]:A_(e.colors[t][a],.1),[`--mantine-color-${r}-light-hover`]:A_(e.colors[t][a],.12),[`--mantine-color-${r}-light-color`]:`var(--mantine-color-${r}-${a})`,[`--mantine-color-${r}-outline`]:`var(--mantine-color-${r}-${a})`,[`--mantine-color-${r}-outline-hover`]:A_(e.colors[t][a],.05)};return i?{[`--mantine-color-${r}-0`]:e.colors[t][0],[`--mantine-color-${r}-1`]:e.colors[t][1],[`--mantine-color-${r}-2`]:e.colors[t][2],[`--mantine-color-${r}-3`]:e.colors[t][3],[`--mantine-color-${r}-4`]:e.colors[t][4],[`--mantine-color-${r}-5`]:e.colors[t][5],[`--mantine-color-${r}-6`]:e.colors[t][6],[`--mantine-color-${r}-7`]:e.colors[t][7],[`--mantine-color-${r}-8`]:e.colors[t][8],[`--mantine-color-${r}-9`]:e.colors[t][9],...u}:u}const s=CA(e,"dark"),o={[`--mantine-color-${r}-text`]:`var(--mantine-color-${r}-4)`,[`--mantine-color-${r}-filled`]:`var(--mantine-color-${r}-${s})`,[`--mantine-color-${r}-filled-hover`]:`var(--mantine-color-${r}-${s===9?8:s+1})`,[`--mantine-color-${r}-light`]:A_(e.colors[t][Math.max(0,s-2)],.15),[`--mantine-color-${r}-light-hover`]:A_(e.colors[t][Math.max(0,s-2)],.2),[`--mantine-color-${r}-light-color`]:`var(--mantine-color-${r}-${Math.max(s-5,0)})`,[`--mantine-color-${r}-outline`]:`var(--mantine-color-${r}-${Math.max(s-4,0)})`,[`--mantine-color-${r}-outline-hover`]:A_(e.colors[t][Math.max(s-4,0)],.05)};return i?{[`--mantine-color-${r}-0`]:e.colors[t][0],[`--mantine-color-${r}-1`]:e.colors[t][1],[`--mantine-color-${r}-2`]:e.colors[t][2],[`--mantine-color-${r}-3`]:e.colors[t][3],[`--mantine-color-${r}-4`]:e.colors[t][4],[`--mantine-color-${r}-5`]:e.colors[t][5],[`--mantine-color-${r}-6`]:e.colors[t][6],[`--mantine-color-${r}-7`]:e.colors[t][7],[`--mantine-color-${r}-8`]:e.colors[t][8],[`--mantine-color-${r}-9`]:e.colors[t][9],...o}:o}function b7e(e){return Array.isArray(e)?e:Array(10).fill(e)}function _7e(e){return!!e&&typeof e=="object"&&"mantine-virtual-color"in e}function I_(e,t,n){Xr(t).forEach(r=>Object.assign(e,{[`--mantine-${n}-${r}`]:t[r]}))}const Z1e=e=>{const t=CA(e,"light"),n=e.defaultRadius in e.radius?e.radius[e.defaultRadius]:Te(e.defaultRadius),r={variables:{"--mantine-scale":e.scale.toString(),"--mantine-cursor-type":e.cursorType,"--mantine-color-scheme":"light dark","--mantine-webkit-font-smoothing":e.fontSmoothing?"antialiased":"unset","--mantine-moz-font-smoothing":e.fontSmoothing?"grayscale":"unset","--mantine-color-white":e.white,"--mantine-color-black":e.black,"--mantine-line-height":e.lineHeights.md,"--mantine-font-family":e.fontFamily,"--mantine-font-family-monospace":e.fontFamilyMonospace,"--mantine-font-family-headings":e.headings.fontFamily,"--mantine-heading-font-weight":e.headings.fontWeight,"--mantine-heading-text-wrap":e.headings.textWrap,"--mantine-radius-default":n,"--mantine-primary-color-filled":`var(--mantine-color-${e.primaryColor}-filled)`,"--mantine-primary-color-filled-hover":`var(--mantine-color-${e.primaryColor}-filled-hover)`,"--mantine-primary-color-light":`var(--mantine-color-${e.primaryColor}-light)`,"--mantine-primary-color-light-hover":`var(--mantine-color-${e.primaryColor}-light-hover)`,"--mantine-primary-color-light-color":`var(--mantine-color-${e.primaryColor}-light-color)`},light:{"--mantine-primary-color-contrast":foe(e,"light"),"--mantine-color-bright":"var(--mantine-color-black)","--mantine-color-text":e.black,"--mantine-color-body":e.white,"--mantine-color-error":"var(--mantine-color-red-6)","--mantine-color-placeholder":"var(--mantine-color-gray-5)","--mantine-color-anchor":`var(--mantine-color-${e.primaryColor}-${t})`,"--mantine-color-default":"var(--mantine-color-white)","--mantine-color-default-hover":"var(--mantine-color-gray-0)","--mantine-color-default-color":"var(--mantine-color-black)","--mantine-color-default-border":"var(--mantine-color-gray-4)","--mantine-color-dimmed":"var(--mantine-color-gray-6)"},dark:{"--mantine-primary-color-contrast":foe(e,"dark"),"--mantine-color-bright":"var(--mantine-color-white)","--mantine-color-text":"var(--mantine-color-dark-0)","--mantine-color-body":"var(--mantine-color-dark-7)","--mantine-color-error":"var(--mantine-color-red-8)","--mantine-color-placeholder":"var(--mantine-color-dark-3)","--mantine-color-anchor":`var(--mantine-color-${e.primaryColor}-4)`,"--mantine-color-default":"var(--mantine-color-dark-6)","--mantine-color-default-hover":"var(--mantine-color-dark-5)","--mantine-color-default-color":"var(--mantine-color-white)","--mantine-color-default-border":"var(--mantine-color-dark-4)","--mantine-color-dimmed":"var(--mantine-color-dark-2)"}};I_(r.variables,e.breakpoints,"breakpoint"),I_(r.variables,e.spacing,"spacing"),I_(r.variables,e.fontSizes,"font-size"),I_(r.variables,e.lineHeights,"line-height"),I_(r.variables,e.shadows,"shadow"),I_(r.variables,e.radius,"radius"),e.colors[e.primaryColor].forEach((s,o)=>{r.variables[`--mantine-primary-color-${o}`]=`var(--mantine-color-${e.primaryColor}-${o})`}),Xr(e.colors).forEach(s=>{const o=e.colors[s];if(_7e(o)){Object.assign(r.light,AN({theme:e,name:o.name,color:o.light,colorScheme:"light",withColorValues:!0})),Object.assign(r.dark,AN({theme:e,name:o.name,color:o.dark,colorScheme:"dark",withColorValues:!0}));return}o.forEach((a,u)=>{r.variables[`--mantine-color-${s}-${u}`]=a}),Object.assign(r.light,AN({theme:e,color:s,colorScheme:"light",withColorValues:!1})),Object.assign(r.dark,AN({theme:e,color:s,colorScheme:"dark",withColorValues:!1}))});const i=e.headings.sizes;return Xr(i).forEach(s=>{r.variables[`--mantine-${s}-font-size`]=i[s].fontSize,r.variables[`--mantine-${s}-line-height`]=i[s].lineHeight,r.variables[`--mantine-${s}-font-weight`]=i[s].fontWeight||e.headings.fontWeight}),r};function w7e({theme:e,generator:t}){const n=Z1e(e),r=t==null?void 0:t(e);return r?NW(n,r):n}const $j=Z1e(FW);function E7e(e){const t={variables:{},light:{},dark:{}};return Xr(e.variables).forEach(n=>{$j.variables[n]!==e.variables[n]&&(t.variables[n]=e.variables[n])}),Xr(e.light).forEach(n=>{$j.light[n]!==e.light[n]&&(t.light[n]=e.light[n])}),Xr(e.dark).forEach(n=>{$j.dark[n]!==e.dark[n]&&(t.dark[n]=e.dark[n])}),t}function x7e(e){return`
  ${e}[data-mantine-color-scheme="dark"] { --mantine-color-scheme: dark; }
  ${e}[data-mantine-color-scheme="light"] { --mantine-color-scheme: light; }
`}function ebe({cssVariablesSelector:e,deduplicateCssVariables:t}){const n=ps(),r=MW(),i=ZUe(),s=w7e({theme:n,generator:i}),o=e===":root"&&t,a=o?E7e(s):s,u=v7e(a,e);return u?b.jsx("style",{"data-mantine-styles":!0,nonce:r==null?void 0:r(),dangerouslySetInnerHTML:{__html:`${u}${o?"":x7e(e)}`}}):null}ebe.displayName="@mantine/CssVariables";function S7e(){const e=console.error;console.error=(...t)=>{t.length>1&&typeof t[0]=="string"&&t[0].toLowerCase().includes("extra attributes from the server")&&typeof t[1]=="string"&&t[1].toLowerCase().includes("data-mantine-color-scheme")||e(...t)}}function k_(e,t){var r;const n=e!=="auto"?e:window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";(r=t())==null||r.setAttribute("data-mantine-color-scheme",n)}function T7e({manager:e,defaultColorScheme:t,getRootElement:n,forceColorScheme:r}){const i=I.useRef(),[s,o]=I.useState(()=>e.get(t)),a=r||s,u=I.useCallback(c=>{r||(k_(c,n),o(c),e.set(c))},[e.set,a,r]),l=I.useCallback(()=>{o(t),k_(t,n),e.clear()},[e.clear,t]);return I.useEffect(()=>(e.subscribe(u),e.unsubscribe),[e.subscribe,e.unsubscribe]),Nb(()=>{k_(e.get(t),n)},[]),I.useEffect(()=>{var f;if(r)return k_(r,n),()=>{};r===void 0&&k_(s,n),i.current=window.matchMedia("(prefers-color-scheme: dark)");const c=d=>{s==="auto"&&k_(d.matches?"dark":"light",n)};return(f=i.current)==null||f.addEventListener("change",c),()=>{var d;return(d=i.current)==null?void 0:d.removeEventListener("change",c)}},[s,r]),{colorScheme:a,setColorScheme:u,clearColorScheme:l}}function C7e({respectReducedMotion:e,getRootElement:t}){Nb(()=>{var n;e&&((n=t())==null||n.setAttribute("data-respect-reduced-motion","true"))},[e])}S7e();function tbe({theme:e,children:t,getStyleNonce:n,withStaticClasses:r=!0,withGlobalClasses:i=!0,deduplicateCssVariables:s=!0,withCssVariables:o=!0,cssVariablesSelector:a=":root",classNamesPrefix:u="mantine",colorSchemeManager:l=h7e(),defaultColorScheme:c="light",getRootElement:f=()=>document.documentElement,cssVariablesResolver:d,forceColorScheme:h,stylesTransform:p}){const{colorScheme:m,setColorScheme:g,clearColorScheme:y}=T7e({defaultColorScheme:c,forceColorScheme:h,manager:l,getRootElement:f});return C7e({respectReducedMotion:(e==null?void 0:e.respectReducedMotion)||!1,getRootElement:f}),b.jsx(Q1e.Provider,{value:{colorScheme:m,setColorScheme:g,clearColorScheme:y,getRootElement:f,classNamesPrefix:u,getStyleNonce:n,cssVariablesResolver:d,cssVariablesSelector:a,withStaticClasses:r,stylesTransform:p},children:b.jsxs(J1e,{theme:e,children:[o&&b.jsx(ebe,{cssVariablesSelector:a,deduplicateCssVariables:s}),i&&b.jsx(y7e,{}),t]})})}tbe.displayName="@mantine/core/MantineProvider";function Hm({classNames:e,styles:t,props:n,stylesCtx:r}){const i=ps();return{resolvedClassNames:SL({theme:i,classNames:e,props:n,stylesCtx:r||void 0}),resolvedStyles:VO({theme:i,styles:t,props:n,stylesCtx:r||void 0})}}const A7e={always:"mantine-focus-always",auto:"mantine-focus-auto",never:"mantine-focus-never"};function I7e({theme:e,options:t,unstyled:n}){return Xi((t==null?void 0:t.focusable)&&!n&&(e.focusClassName||A7e[e.focusRing]),(t==null?void 0:t.active)&&!n&&e.activeClassName)}function k7e({selector:e,stylesCtx:t,options:n,props:r,theme:i}){return SL({theme:i,classNames:n==null?void 0:n.classNames,props:(n==null?void 0:n.props)||r,stylesCtx:t})[e]}function doe({selector:e,stylesCtx:t,theme:n,classNames:r,props:i}){return SL({theme:n,classNames:r,props:i,stylesCtx:t})[e]}function R7e({rootSelector:e,selector:t,className:n}){return e===t?n:void 0}function N7e({selector:e,classes:t,unstyled:n}){return n?void 0:t[e]}function P7e({themeName:e,classNamesPrefix:t,selector:n,withStaticClass:r}){return r===!1?[]:e.map(i=>`${t}-${i}-${n}`)}function D7e({themeName:e,theme:t,selector:n,props:r,stylesCtx:i}){return e.map(s=>{var o,a;return(a=SL({theme:t,classNames:(o=t.components[s])==null?void 0:o.classNames,props:r,stylesCtx:i}))==null?void 0:a[n]})}function O7e({options:e,classes:t,selector:n,unstyled:r}){return e!=null&&e.variant&&!r?t[`${n}--${e.variant}`]:void 0}function $7e({theme:e,options:t,themeName:n,selector:r,classNamesPrefix:i,classNames:s,classes:o,unstyled:a,className:u,rootSelector:l,props:c,stylesCtx:f,withStaticClasses:d,headless:h,transformedStyles:p}){return Xi(I7e({theme:e,options:t,unstyled:a||h}),D7e({theme:e,themeName:n,selector:r,props:c,stylesCtx:f}),O7e({options:t,classes:o,selector:r,unstyled:a}),doe({selector:r,stylesCtx:f,theme:e,classNames:s,props:c}),doe({selector:r,stylesCtx:f,theme:e,classNames:p,props:c}),k7e({selector:r,stylesCtx:f,options:t,props:c,theme:e}),R7e({rootSelector:l,selector:r,className:u}),N7e({selector:r,classes:o,unstyled:a||h}),d&&!h&&P7e({themeName:n,classNamesPrefix:i,selector:r,withStaticClass:t==null?void 0:t.withStaticClass}),t==null?void 0:t.className)}function M7e({theme:e,themeName:t,props:n,stylesCtx:r,selector:i}){return t.map(s=>{var o;return VO({theme:e,styles:(o=e.components[s])==null?void 0:o.styles,props:n,stylesCtx:r})[i]}).reduce((s,o)=>({...s,...o}),{})}function WU({style:e,theme:t}){return Array.isArray(e)?[...e].reduce((n,r)=>({...n,...WU({style:r,theme:t})}),{}):typeof e=="function"?e(t):e??{}}function L7e(e){return e.reduce((t,n)=>(n&&Object.keys(n).forEach(r=>{t[r]={...t[r],...Iy(n[r])}}),t),{})}function F7e({vars:e,varsResolver:t,theme:n,props:r,stylesCtx:i,selector:s,themeName:o,headless:a}){var u;return(u=L7e([a?{}:t==null?void 0:t(n,r,i),...o.map(l=>{var c,f,d;return(d=(f=(c=n.components)==null?void 0:c[l])==null?void 0:f.vars)==null?void 0:d.call(f,n,r,i)}),e==null?void 0:e(n,r,i)]))==null?void 0:u[s]}function j7e({theme:e,themeName:t,selector:n,options:r,props:i,stylesCtx:s,rootSelector:o,styles:a,style:u,vars:l,varsResolver:c,headless:f,withStylesTransform:d}){return{...!d&&M7e({theme:e,themeName:t,props:i,stylesCtx:s,selector:n}),...!d&&VO({theme:e,styles:a,props:i,stylesCtx:s})[n],...!d&&VO({theme:e,styles:r==null?void 0:r.styles,props:(r==null?void 0:r.props)||i,stylesCtx:s})[n],...F7e({theme:e,props:i,stylesCtx:s,vars:l,varsResolver:c,selector:n,themeName:t,headless:f}),...o===n?WU({style:u,theme:e}):null,...WU({style:r==null?void 0:r.style,theme:e})}}function B7e({props:e,stylesCtx:t,themeName:n}){var o;const r=ps(),i=(o=i7e())==null?void 0:o();return{getTransformedStyles:a=>i?[...a.map(l=>i(l,{props:e,theme:r,ctx:t})),...n.map(l=>{var c;return i((c=r.components[l])==null?void 0:c.styles,{props:e,theme:r,ctx:t})})].filter(Boolean):[],withStylesTransform:!!i}}function dt({name:e,classes:t,props:n,stylesCtx:r,className:i,style:s,rootSelector:o="root",unstyled:a,classNames:u,styles:l,vars:c,varsResolver:f}){const d=ps(),h=e7e(),p=t7e(),m=n7e(),g=(Array.isArray(e)?e:[e]).filter(_=>_),{withStylesTransform:y,getTransformedStyles:v}=B7e({props:n,stylesCtx:r,themeName:g});return(_,w)=>({className:$7e({theme:d,options:w,themeName:g,selector:_,classNamesPrefix:h,classNames:u,classes:t,unstyled:a,className:i,rootSelector:o,props:n,stylesCtx:r,withStaticClasses:p,headless:m,transformedStyles:v([w==null?void 0:w.styles,l])}),style:j7e({theme:d,themeName:g,selector:_,options:w,props:n,stylesCtx:r,rootSelector:o,styles:l,style:s,vars:c,varsResolver:f,headless:m,withStylesTransform:y})})}function Kx(e,t){return typeof e=="boolean"?e:t.autoContrast}function xe(e,t,n){var o;const r=ps(),i=(o=r.components[e])==null?void 0:o.defaultProps,s=typeof i=="function"?i(r):i;return{...t,...s,...Iy(n)}}function Mj(e){return Xr(e).reduce((t,n)=>e[n]!==void 0?`${t}${pUe(n)}:${e[n]};`:t,"").trim()}function U7e({selector:e,styles:t,media:n,container:r}){const i=t?Mj(t):"",s=Array.isArray(n)?n.map(a=>`@media${a.query}{${e}{${Mj(a.styles)}}}`):[],o=Array.isArray(r)?r.map(a=>`@container ${a.query}{${e}{${Mj(a.styles)}}}`):[];return`${i?`${e}{${i}}`:""}${s.join("")}${o.join("")}`.trim()}function Pb(e){const t=MW();return b.jsx("style",{"data-mantine-styles":"inline",nonce:t==null?void 0:t(),dangerouslySetInnerHTML:{__html:U7e(e)}})}function Db(e){const{m:t,mx:n,my:r,mt:i,mb:s,ml:o,mr:a,me:u,ms:l,p:c,px:f,py:d,pt:h,pb:p,pl:m,pr:g,pe:y,ps:v,bd:_,bg:w,c:E,opacity:S,ff:T,fz:C,fw:A,lts:k,ta:N,lh:O,fs:D,tt:$,td:F,w:M,miw:B,maw:U,h:H,mih:P,mah:z,bgsz:W,bgp:j,bgr:q,bga:G,pos:ne,top:ce,left:de,bottom:he,right:ve,inset:Ie,display:be,flex:Ke,hiddenFrom:Ue,visibleFrom:yt,lightHidden:it,darkHidden:_e,sx:ke,...ze}=e;return{styleProps:Iy({m:t,mx:n,my:r,mt:i,mb:s,ml:o,mr:a,me:u,ms:l,p:c,px:f,py:d,pt:h,pb:p,pl:m,pr:g,pe:y,ps:v,bd:_,bg:w,c:E,opacity:S,ff:T,fz:C,fw:A,lts:k,ta:N,lh:O,fs:D,tt:$,td:F,w:M,miw:B,maw:U,h:H,mih:P,mah:z,bgsz:W,bgp:j,bgr:q,bga:G,pos:ne,top:ce,left:de,bottom:he,right:ve,inset:Ie,display:be,flex:Ke,hiddenFrom:Ue,visibleFrom:yt,lightHidden:it,darkHidden:_e,sx:ke}),rest:ze}}const z7e={m:{type:"spacing",property:"margin"},mt:{type:"spacing",property:"marginTop"},mb:{type:"spacing",property:"marginBottom"},ml:{type:"spacing",property:"marginLeft"},mr:{type:"spacing",property:"marginRight"},ms:{type:"spacing",property:"marginInlineStart"},me:{type:"spacing",property:"marginInlineEnd"},mx:{type:"spacing",property:"marginInline"},my:{type:"spacing",property:"marginBlock"},p:{type:"spacing",property:"padding"},pt:{type:"spacing",property:"paddingTop"},pb:{type:"spacing",property:"paddingBottom"},pl:{type:"spacing",property:"paddingLeft"},pr:{type:"spacing",property:"paddingRight"},ps:{type:"spacing",property:"paddingInlineStart"},pe:{type:"spacing",property:"paddingInlineEnd"},px:{type:"spacing",property:"paddingInline"},py:{type:"spacing",property:"paddingBlock"},bd:{type:"border",property:"border"},bg:{type:"color",property:"background"},c:{type:"textColor",property:"color"},opacity:{type:"identity",property:"opacity"},ff:{type:"fontFamily",property:"fontFamily"},fz:{type:"fontSize",property:"fontSize"},fw:{type:"identity",property:"fontWeight"},lts:{type:"size",property:"letterSpacing"},ta:{type:"identity",property:"textAlign"},lh:{type:"lineHeight",property:"lineHeight"},fs:{type:"identity",property:"fontStyle"},tt:{type:"identity",property:"textTransform"},td:{type:"identity",property:"textDecoration"},w:{type:"spacing",property:"width"},miw:{type:"spacing",property:"minWidth"},maw:{type:"spacing",property:"maxWidth"},h:{type:"spacing",property:"height"},mih:{type:"spacing",property:"minHeight"},mah:{type:"spacing",property:"maxHeight"},bgsz:{type:"size",property:"backgroundSize"},bgp:{type:"identity",property:"backgroundPosition"},bgr:{type:"identity",property:"backgroundRepeat"},bga:{type:"identity",property:"backgroundAttachment"},pos:{type:"identity",property:"position"},top:{type:"identity",property:"top"},left:{type:"size",property:"left"},bottom:{type:"size",property:"bottom"},right:{type:"size",property:"right"},inset:{type:"size",property:"inset"},display:{type:"identity",property:"display"},flex:{type:"identity",property:"flex"}};function BW(e,t){const n=Hh({color:e,theme:t});return n.color==="dimmed"?"var(--mantine-color-dimmed)":n.color==="bright"?"var(--mantine-color-bright)":n.variable?`var(${n.variable})`:n.color}function V7e(e,t){const n=Hh({color:e,theme:t});return n.isThemeColor&&n.shade===void 0?`var(--mantine-color-${n.color}-text)`:BW(e,t)}function H7e(e,t){if(typeof e=="number")return Te(e);if(typeof e=="string"){const[n,r,...i]=e.split(" ").filter(o=>o.trim()!=="");let s=`${Te(n)}`;return r&&(s+=` ${r}`),b7e.length>0&&(s+=` ${BW(i.join(" "),t)}`),s.trim()}return e}const hoe={text:"var(--mantine-font-family)",mono:"var(--mantine-font-family-monospace)",monospace:"var(--mantine-font-family-monospace)",heading:"var(--mantine-font-family-headings)",headings:"var(--mantine-font-family-headings)"};function q7e(e){return typeof e=="string"&&e in hoe?hoe[e]:e}const W7e=["h1","h2","h3","h4","h5","h6"];function G7e(e,t){return typeof e=="string"&&e in t.fontSizes?`var(--mantine-font-size-${e})`:typeof e=="string"&&W7e.includes(e)?`var(--mantine-${e}-font-size)`:typeof e=="number"||typeof e=="string"?Te(e):e}function Y7e(e){return e}const K7e=["h1","h2","h3","h4","h5","h6"];function X7e(e,t){return typeof e=="string"&&e in t.lineHeights?`var(--mantine-line-height-${e})`:typeof e=="string"&&K7e.includes(e)?`var(--mantine-${e}-line-height)`:e}function Q7e(e){return typeof e=="number"?Te(e):e}function J7e(e,t){if(typeof e=="number")return Te(e);if(typeof e=="string"){const n=e.replace("-","");if(!(n in t.spacing))return Te(e);const r=`--mantine-spacing-${n}`;return e.startsWith("-")?`calc(var(${r}) * -1)`:`var(${r})`}return e}const Lj={color:BW,textColor:V7e,fontSize:G7e,spacing:J7e,identity:Y7e,size:Q7e,lineHeight:X7e,fontFamily:q7e,border:H7e};function poe(e){return e.replace("(min-width: ","").replace("em)","")}function Z7e({media:e,...t}){const r=Object.keys(e).sort((i,s)=>Number(poe(i))-Number(poe(s))).map(i=>({query:i,styles:e[i]}));return{...t,media:r}}function eze(e){if(typeof e!="object"||e===null)return!1;const t=Object.keys(e);return!(t.length===1&&t[0]==="base")}function tze(e){return typeof e=="object"&&e!==null?"base"in e?e.base:void 0:e}function nze(e){return typeof e=="object"&&e!==null?Xr(e).filter(t=>t!=="base"):[]}function rze(e,t){return typeof e=="object"&&e!==null&&t in e?e[t]:e}function nbe({styleProps:e,data:t,theme:n}){return Z7e(Xr(e).reduce((r,i)=>{if(i==="hiddenFrom"||i==="visibleFrom"||i==="sx")return r;const s=t[i],o=Array.isArray(s.property)?s.property:[s.property],a=tze(e[i]);if(!eze(e[i]))return o.forEach(l=>{r.inlineStyles[l]=Lj[s.type](a,n)}),r;r.hasResponsiveStyles=!0;const u=nze(e[i]);return o.forEach(l=>{a&&(r.styles[l]=Lj[s.type](a,n)),u.forEach(c=>{const f=`(min-width: ${n.breakpoints[c]})`;r.media[f]={...r.media[f],[l]:Lj[s.type](rze(e[i],c),n)}})}),r},{hasResponsiveStyles:!1,styles:{},inlineStyles:{},media:{}}))}function ak(){return`__m__-${I.useId().replace(/:/g,"")}`}function UW(e,t){return Array.isArray(e)?[...e].reduce((n,r)=>({...n,...UW(r,t)}),{}):typeof e=="function"?e(t):e??{}}function rbe(e){return e.startsWith("data-")?e:`data-${e}`}function ize(e){return Object.keys(e).reduce((t,n)=>{const r=e[n];return r===void 0||r===""||r===!1||r===null||(t[rbe(n)]=e[n]),t},{})}function ibe(e){return e?typeof e=="string"?{[rbe(e)]:!0}:Array.isArray(e)?[...e].reduce((t,n)=>({...t,...ibe(n)}),{}):ize(e):null}function GU(e,t){return Array.isArray(e)?[...e].reduce((n,r)=>({...n,...GU(r,t)}),{}):typeof e=="function"?e(t):e??{}}function sze({theme:e,style:t,vars:n,styleProps:r}){const i=GU(t,e),s=GU(n,e);return{...i,...s,...r}}const sbe=I.forwardRef(({component:e,style:t,__vars:n,className:r,variant:i,mod:s,size:o,hiddenFrom:a,visibleFrom:u,lightHidden:l,darkHidden:c,renderRoot:f,__size:d,...h},p)=>{var C;const m=ps(),g=e||"div",{styleProps:y,rest:v}=Db(h),_=r7e(),w=(C=_==null?void 0:_())==null?void 0:C(y.sx),E=ak(),S=nbe({styleProps:y,theme:m,data:z7e}),T={ref:p,style:sze({theme:m,style:t,vars:n,styleProps:S.inlineStyles}),className:Xi(r,w,{[E]:S.hasResponsiveStyles,"mantine-light-hidden":l,"mantine-dark-hidden":c,[`mantine-hidden-from-${a}`]:a,[`mantine-visible-from-${u}`]:u}),"data-variant":i,"data-size":B1e(o)?void 0:o||void 0,size:d,...ibe(s),...v};return b.jsxs(b.Fragment,{children:[S.hasResponsiveStyles&&b.jsx(Pb,{selector:`.${E}`,styles:S.styles,media:S.media}),typeof f=="function"?f(T):b.jsx(g,{...T})]})});sbe.displayName="@mantine/core/Box";const pe=sbe;function obe(e){return e}function Me(e){const t=I.forwardRef(e);return t.extend=obe,t}function Us(e){const t=I.forwardRef(e);return t.extend=obe,t}const oze=I.createContext({dir:"ltr",toggleDirection:()=>{},setDirection:()=>{}});function qh(){return I.useContext(oze)}function aze(e){if(!e||typeof e=="string")return 0;const t=e/36;return Math.round((4+15*t**.25+t/5)*10)}function Fj(e){return e!=null&&e.current?e.current.scrollHeight:"auto"}const ET=typeof window<"u"&&window.requestAnimationFrame;function uze({transitionDuration:e,transitionTimingFunction:t="ease",onTransitionEnd:n=()=>{},opened:r}){const i=I.useRef(null),s=0,o={display:"none",height:0,overflow:"hidden"},[a,u]=I.useState(r?{}:o),l=p=>{sk.flushSync(()=>u(p))},c=p=>{l(m=>({...m,...p}))};function f(p){const m=e||aze(p);return{transition:`height ${m}ms ${t}, opacity ${m}ms ${t}`}}Th(()=>{typeof ET=="function"&&ET(r?()=>{c({willChange:"height",display:"block",overflow:"hidden"}),ET(()=>{const p=Fj(i);c({...f(p),height:p})})}:()=>{const p=Fj(i);c({...f(p),willChange:"height",height:p}),ET(()=>c({height:s,overflow:"hidden"}))})},[r]);const d=p=>{if(!(p.target!==i.current||p.propertyName!=="height"))if(r){const m=Fj(i);m===a.height?l({}):c({height:m}),n()}else a.height===s&&(l(o),n())};function h({style:p={},refKey:m="ref",...g}={}){const y=g[m];return{"aria-hidden":!r,...g,[m]:G1e(i,y),onTransitionEnd:d,style:{boxSizing:"border-box",...p,...a}}}return h}const lze={transitionDuration:200,transitionTimingFunction:"ease",animateOpacity:!0},TL=Me((e,t)=>{const{children:n,in:r,transitionDuration:i,transitionTimingFunction:s,style:o,onTransitionEnd:a,animateOpacity:u,...l}=xe("Collapse",lze,e),c=ps(),f=EL(),h=(c.respectReducedMotion?f:!1)?0:i,p=uze({opened:r,transitionDuration:h,transitionTimingFunction:s,onTransitionEnd:a});return h===0?r?b.jsx(pe,{...l,children:n}):null:b.jsx(pe,{...p({style:{opacity:r||!u?1:0,transition:u?`opacity ${h}ms ${s}`:"none",...UW(o,c)},ref:t,...l}),children:n})});TL.displayName="@mantine/core/Collapse";const[cze,Hc]=fo("ScrollArea.Root component was not found in tree");function DE(e,t){const n=Bv(t);Nb(()=>{let r=0;if(e){const i=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return i.observe(e),()=>{window.cancelAnimationFrame(r),i.unobserve(e)}}},[e,n])}const fze=I.forwardRef((e,t)=>{const{style:n,...r}=e,i=Hc(),[s,o]=I.useState(0),[a,u]=I.useState(0),l=!!(s&&a);return DE(i.scrollbarX,()=>{var f;const c=((f=i.scrollbarX)==null?void 0:f.offsetHeight)||0;i.onCornerHeightChange(c),u(c)}),DE(i.scrollbarY,()=>{var f;const c=((f=i.scrollbarY)==null?void 0:f.offsetWidth)||0;i.onCornerWidthChange(c),o(c)}),l?b.jsx("div",{...r,ref:t,style:{...n,width:s,height:a}}):null}),dze=I.forwardRef((e,t)=>{const n=Hc(),r=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&r?b.jsx(fze,{...e,ref:t}):null}),hze={scrollHideDelay:1e3,type:"hover"},abe=I.forwardRef((e,t)=>{const n=xe("ScrollAreaRoot",hze,e),{type:r,scrollHideDelay:i,scrollbars:s,...o}=n,[a,u]=I.useState(null),[l,c]=I.useState(null),[f,d]=I.useState(null),[h,p]=I.useState(null),[m,g]=I.useState(null),[y,v]=I.useState(0),[_,w]=I.useState(0),[E,S]=I.useState(!1),[T,C]=I.useState(!1),A=hs(t,k=>u(k));return b.jsx(cze,{value:{type:r,scrollHideDelay:i,scrollArea:a,viewport:l,onViewportChange:c,content:f,onContentChange:d,scrollbarX:h,onScrollbarXChange:p,scrollbarXEnabled:E,onScrollbarXEnabledChange:S,scrollbarY:m,onScrollbarYChange:g,scrollbarYEnabled:T,onScrollbarYEnabledChange:C,onCornerWidthChange:v,onCornerHeightChange:w},children:b.jsx(pe,{...o,ref:A,__vars:{"--sa-corner-width":s!=="xy"?"0px":`${y}px`,"--sa-corner-height":s!=="xy"?"0px":`${_}px`}})})});abe.displayName="@mantine/core/ScrollAreaRoot";function ube(e,t){const n=e/t;return Number.isNaN(n)?0:n}function CL(e){const t=ube(e.viewport,e.content),n=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,r=(e.scrollbar.size-n)*t;return Math.max(r,18)}function lbe(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}function pze(e,[t,n]){return Math.min(n,Math.max(t,e))}function moe(e,t,n="ltr"){const r=CL(t),i=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,s=t.scrollbar.size-i,o=t.content-t.viewport,a=s-r,u=n==="ltr"?[0,o]:[o*-1,0],l=pze(e,u);return lbe([0,o],[0,a])(l)}function mze(e,t,n,r="ltr"){const i=CL(n),s=i/2,o=t||s,a=i-o,u=n.scrollbar.paddingStart+o,l=n.scrollbar.size-n.scrollbar.paddingEnd-a,c=n.content-n.viewport,f=r==="ltr"?[0,c]:[c*-1,0];return lbe([u,l],f)(e)}function cbe(e,t){return e>0&&e<t}function HO(e){return e?parseInt(e,10):0}function S1(e,t,{checkForDefaultPrevented:n=!0}={}){return r=>{e==null||e(r),(n===!1||!r.defaultPrevented)&&(t==null||t(r))}}const[gze,fbe]=fo("ScrollAreaScrollbar was not found in tree"),dbe=I.forwardRef((e,t)=>{const{sizes:n,hasThumb:r,onThumbChange:i,onThumbPointerUp:s,onThumbPointerDown:o,onThumbPositionChange:a,onDragScroll:u,onWheelScroll:l,onResize:c,...f}=e,d=Hc(),[h,p]=I.useState(null),m=hs(t,C=>p(C)),g=I.useRef(null),y=I.useRef(""),{viewport:v}=d,_=n.content-n.viewport,w=Bv(l),E=Bv(a),S=wL(c,10),T=C=>{if(g.current){const A=C.clientX-g.current.left,k=C.clientY-g.current.top;u({x:A,y:k})}};return I.useEffect(()=>{const C=A=>{const k=A.target;(h==null?void 0:h.contains(k))&&w(A,_)};return document.addEventListener("wheel",C,{passive:!1}),()=>document.removeEventListener("wheel",C,{passive:!1})},[v,h,_,w]),I.useEffect(E,[n,E]),DE(h,S),DE(d.content,S),b.jsx(gze,{value:{scrollbar:h,hasThumb:r,onThumbChange:Bv(i),onThumbPointerUp:Bv(s),onThumbPositionChange:E,onThumbPointerDown:Bv(o)},children:b.jsx("div",{...f,ref:m,style:{position:"absolute",...f.style},onPointerDown:S1(e.onPointerDown,C=>{C.button===0&&(C.target.setPointerCapture(C.pointerId),g.current=h.getBoundingClientRect(),y.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",T(C))}),onPointerMove:S1(e.onPointerMove,T),onPointerUp:S1(e.onPointerUp,C=>{const A=C.target;A.hasPointerCapture(C.pointerId)&&A.releasePointerCapture(C.pointerId),document.body.style.webkitUserSelect=y.current,g.current=null})})})}),yze=I.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,style:i,...s}=e,o=Hc(),[a,u]=I.useState(),l=I.useRef(null),c=hs(t,l,o.onScrollbarXChange);return I.useEffect(()=>{l.current&&u(getComputedStyle(l.current))},[l]),b.jsx(dbe,{"data-orientation":"horizontal",...s,ref:c,sizes:n,style:{...i,"--sa-thumb-width":`${CL(n)}px`},onThumbPointerDown:f=>e.onThumbPointerDown(f.x),onDragScroll:f=>e.onDragScroll(f.x),onWheelScroll:(f,d)=>{if(o.viewport){const h=o.viewport.scrollLeft+f.deltaX;e.onWheelScroll(h),cbe(h,d)&&f.preventDefault()}},onResize:()=>{l.current&&o.viewport&&a&&r({content:o.viewport.scrollWidth,viewport:o.viewport.offsetWidth,scrollbar:{size:l.current.clientWidth,paddingStart:HO(a.paddingLeft),paddingEnd:HO(a.paddingRight)}})}})}),vze=I.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,style:i,...s}=e,o=Hc(),[a,u]=I.useState(),l=I.useRef(null),c=hs(t,l,o.onScrollbarYChange);return I.useEffect(()=>{l.current&&u(window.getComputedStyle(l.current))},[]),b.jsx(dbe,{...s,"data-orientation":"vertical",ref:c,sizes:n,style:{"--sa-thumb-height":`${CL(n)}px`,...i},onThumbPointerDown:f=>e.onThumbPointerDown(f.y),onDragScroll:f=>e.onDragScroll(f.y),onWheelScroll:(f,d)=>{if(o.viewport){const h=o.viewport.scrollTop+f.deltaY;e.onWheelScroll(h),cbe(h,d)&&f.preventDefault()}},onResize:()=>{l.current&&o.viewport&&a&&r({content:o.viewport.scrollHeight,viewport:o.viewport.offsetHeight,scrollbar:{size:l.current.clientHeight,paddingStart:HO(a.paddingTop),paddingEnd:HO(a.paddingBottom)}})}})}),zW=I.forwardRef((e,t)=>{const{orientation:n="vertical",...r}=e,{dir:i}=qh(),s=Hc(),o=I.useRef(null),a=I.useRef(0),[u,l]=I.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),c=ube(u.viewport,u.content),f={...r,sizes:u,onSizesChange:l,hasThumb:c>0&&c<1,onThumbChange:h=>{o.current=h},onThumbPointerUp:()=>{a.current=0},onThumbPointerDown:h=>{a.current=h}},d=(h,p)=>mze(h,a.current,u,p);return n==="horizontal"?b.jsx(yze,{...f,ref:t,onThumbPositionChange:()=>{if(s.viewport&&o.current){const h=s.viewport.scrollLeft,p=moe(h,u,i);o.current.style.transform=`translate3d(${p}px, 0, 0)`}},onWheelScroll:h=>{s.viewport&&(s.viewport.scrollLeft=h)},onDragScroll:h=>{s.viewport&&(s.viewport.scrollLeft=d(h,i))}}):n==="vertical"?b.jsx(vze,{...f,ref:t,onThumbPositionChange:()=>{if(s.viewport&&o.current){const h=s.viewport.scrollTop,p=moe(h,u);u.scrollbar.size===0?o.current.style.opacity="0":o.current.style.opacity="1",o.current.style.transform=`translate3d(0, ${p}px, 0)`}},onWheelScroll:h=>{s.viewport&&(s.viewport.scrollTop=h)},onDragScroll:h=>{s.viewport&&(s.viewport.scrollTop=d(h))}}):null}),hbe=I.forwardRef((e,t)=>{const n=Hc(),{forceMount:r,...i}=e,[s,o]=I.useState(!1),a=e.orientation==="horizontal",u=wL(()=>{if(n.viewport){const l=n.viewport.offsetWidth<n.viewport.scrollWidth,c=n.viewport.offsetHeight<n.viewport.scrollHeight;o(a?l:c)}},10);return DE(n.viewport,u),DE(n.content,u),r||s?b.jsx(zW,{"data-state":s?"visible":"hidden",...i,ref:t}):null}),bze=I.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=Hc(),[s,o]=I.useState(!1);return I.useEffect(()=>{const{scrollArea:a}=i;let u=0;if(a){const l=()=>{window.clearTimeout(u),o(!0)},c=()=>{u=window.setTimeout(()=>o(!1),i.scrollHideDelay)};return a.addEventListener("pointerenter",l),a.addEventListener("pointerleave",c),()=>{window.clearTimeout(u),a.removeEventListener("pointerenter",l),a.removeEventListener("pointerleave",c)}}},[i.scrollArea,i.scrollHideDelay]),n||s?b.jsx(hbe,{"data-state":s?"visible":"hidden",...r,ref:t}):null}),_ze=I.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=Hc(),s=e.orientation==="horizontal",[o,a]=I.useState("hidden"),u=wL(()=>a("idle"),100);return I.useEffect(()=>{if(o==="idle"){const l=window.setTimeout(()=>a("hidden"),i.scrollHideDelay);return()=>window.clearTimeout(l)}},[o,i.scrollHideDelay]),I.useEffect(()=>{const{viewport:l}=i,c=s?"scrollLeft":"scrollTop";if(l){let f=l[c];const d=()=>{const h=l[c];f!==h&&(a("scrolling"),u()),f=h};return l.addEventListener("scroll",d),()=>l.removeEventListener("scroll",d)}},[i.viewport,s,u]),n||o!=="hidden"?b.jsx(zW,{"data-state":o==="hidden"?"hidden":"visible",...r,ref:t,onPointerEnter:S1(e.onPointerEnter,()=>a("interacting")),onPointerLeave:S1(e.onPointerLeave,()=>a("idle"))}):null}),goe=I.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=Hc(),{onScrollbarXEnabledChange:s,onScrollbarYEnabledChange:o}=i,a=e.orientation==="horizontal";return I.useEffect(()=>(a?s(!0):o(!0),()=>{a?s(!1):o(!1)}),[a,s,o]),i.type==="hover"?b.jsx(bze,{...r,ref:t,forceMount:n}):i.type==="scroll"?b.jsx(_ze,{...r,ref:t,forceMount:n}):i.type==="auto"?b.jsx(hbe,{...r,ref:t,forceMount:n}):i.type==="always"?b.jsx(zW,{...r,ref:t}):null});function wze(e,t=()=>{}){let n={left:e.scrollLeft,top:e.scrollTop},r=0;return function i(){const s={left:e.scrollLeft,top:e.scrollTop},o=n.left!==s.left,a=n.top!==s.top;(o||a)&&t(),n=s,r=window.requestAnimationFrame(i)}(),()=>window.cancelAnimationFrame(r)}const Eze=I.forwardRef((e,t)=>{const{style:n,...r}=e,i=Hc(),s=fbe(),{onThumbPositionChange:o}=s,a=hs(t,c=>s.onThumbChange(c)),u=I.useRef(),l=wL(()=>{u.current&&(u.current(),u.current=void 0)},100);return I.useEffect(()=>{const{viewport:c}=i;if(c){const f=()=>{if(l(),!u.current){const d=wze(c,o);u.current=d,o()}};return o(),c.addEventListener("scroll",f),()=>c.removeEventListener("scroll",f)}},[i.viewport,l,o]),b.jsx("div",{"data-state":s.hasThumb?"visible":"hidden",...r,ref:a,style:{width:"var(--sa-thumb-width)",height:"var(--sa-thumb-height)",...n},onPointerDownCapture:S1(e.onPointerDownCapture,c=>{const d=c.target.getBoundingClientRect(),h=c.clientX-d.left,p=c.clientY-d.top;s.onThumbPointerDown({x:h,y:p})}),onPointerUp:S1(e.onPointerUp,s.onThumbPointerUp)})}),yoe=I.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=fbe();return n||i.hasThumb?b.jsx(Eze,{ref:t,...r}):null}),pbe=I.forwardRef(({children:e,style:t,...n},r)=>{const i=Hc(),s=hs(r,i.onViewportChange);return b.jsx(pe,{...n,ref:s,style:{overflowX:i.scrollbarXEnabled?"scroll":"hidden",overflowY:i.scrollbarYEnabled?"scroll":"hidden",...t},children:b.jsx("div",{style:{minWidth:"100%",display:"table"},ref:i.onContentChange,children:e})})});pbe.displayName="@mantine/core/ScrollAreaViewport";var VW={root:"m_d57069b5",viewport:"m_c0783ff9",viewportInner:"m_f8f631dd",scrollbar:"m_c44ba933",thumb:"m_d8b5e363",corner:"m_21657268"};const mbe={scrollHideDelay:1e3,type:"hover",scrollbars:"xy"},xze=(e,{scrollbarSize:t})=>({root:{"--scrollarea-scrollbar-size":Te(t)}}),bm=Me((e,t)=>{const n=xe("ScrollArea",mbe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,scrollbarSize:u,vars:l,type:c,scrollHideDelay:f,viewportProps:d,viewportRef:h,onScrollPositionChange:p,children:m,offsetScrollbars:g,scrollbars:y,...v}=n,[_,w]=I.useState(!1),E=dt({name:"ScrollArea",props:n,classes:VW,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:xze});return b.jsxs(abe,{type:c==="never"?"always":c,scrollHideDelay:f,ref:t,scrollbars:y,...E("root"),...v,children:[b.jsx(pbe,{...d,...E("viewport",{style:d==null?void 0:d.style}),ref:h,"data-offset-scrollbars":g===!0?"xy":g||void 0,"data-scrollbars":y||void 0,onScroll:S=>{var T;(T=d==null?void 0:d.onScroll)==null||T.call(d,S),p==null||p({x:S.currentTarget.scrollLeft,y:S.currentTarget.scrollTop})},children:m}),(y==="xy"||y==="x")&&b.jsx(goe,{...E("scrollbar"),orientation:"horizontal","data-hidden":c==="never"||void 0,forceMount:!0,onMouseEnter:()=>w(!0),onMouseLeave:()=>w(!1),children:b.jsx(yoe,{...E("thumb")})}),(y==="xy"||y==="y")&&b.jsx(goe,{...E("scrollbar"),orientation:"vertical","data-hidden":c==="never"||void 0,forceMount:!0,onMouseEnter:()=>w(!0),onMouseLeave:()=>w(!1),children:b.jsx(yoe,{...E("thumb")})}),b.jsx(dze,{...E("corner"),"data-hovered":_||void 0,"data-hidden":c==="never"||void 0})]})});bm.displayName="@mantine/core/ScrollArea";const HW=Me((e,t)=>{const{children:n,classNames:r,styles:i,scrollbarSize:s,scrollHideDelay:o,type:a,dir:u,offsetScrollbars:l,viewportRef:c,onScrollPositionChange:f,unstyled:d,variant:h,viewportProps:p,scrollbars:m,style:g,vars:y,...v}=xe("ScrollAreaAutosize",mbe,e);return b.jsx(pe,{...v,ref:t,style:[{display:"flex",overflow:"auto"},g],children:b.jsx(pe,{style:{display:"flex",flexDirection:"column",flex:1},children:b.jsx(bm,{classNames:r,styles:i,scrollHideDelay:o,scrollbarSize:s,type:a,dir:u,offsetScrollbars:l,viewportRef:c,onScrollPositionChange:f,unstyled:d,variant:h,viewportProps:p,vars:y,scrollbars:m,children:n})})})});bm.classes=VW;HW.displayName="@mantine/core/ScrollAreaAutosize";HW.classes=VW;bm.Autosize=HW;var gbe={root:"m_87cf2631"};const Sze={__staticSelector:"UnstyledButton"},xs=Us((e,t)=>{const n=xe("UnstyledButton",Sze,e),{className:r,component:i="button",__staticSelector:s,unstyled:o,classNames:a,styles:u,style:l,...c}=n,f=dt({name:s,props:n,classes:gbe,className:r,style:l,classNames:a,styles:u,unstyled:o});return b.jsx(pe,{...f("root",{focusable:!0}),component:i,ref:t,type:i==="button"?"button":void 0,...c})});xs.classes=gbe;xs.displayName="@mantine/core/UnstyledButton";var ybe={root:"m_515a97f8"};const Tze={},qW=Me((e,t)=>{const n=xe("VisuallyHidden",Tze,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,...l}=n,c=dt({name:"VisuallyHidden",classes:ybe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a});return b.jsx(pe,{component:"span",ref:t,...c("root"),...l})});qW.classes=ybe;qW.displayName="@mantine/core/VisuallyHidden";var vbe={root:"m_1b7284a3"};const Cze={},Aze=(e,{radius:t,shadow:n})=>({root:{"--paper-radius":t===void 0?void 0:Ur(t),"--paper-shadow":DW(n)}}),Ob=Us((e,t)=>{const n=xe("Paper",Cze,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,withBorder:u,vars:l,radius:c,shadow:f,variant:d,mod:h,...p}=n,m=dt({name:"Paper",props:n,classes:vbe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:Aze});return b.jsx(pe,{ref:t,mod:[{"data-with-border":u},h],...m("root"),variant:d,...p})});Ob.classes=vbe;Ob.displayName="@mantine/core/Paper";function Xx(e){return bbe(e)?(e.nodeName||"").toLowerCase():"#document"}function Vu(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function qm(e){var t;return(t=(bbe(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function bbe(e){return e instanceof Node||e instanceof Vu(e).Node}function Si(e){return e instanceof Element||e instanceof Vu(e).Element}function Ll(e){return e instanceof HTMLElement||e instanceof Vu(e).HTMLElement}function YU(e){return typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof Vu(e).ShadowRoot}function uk(e){const{overflow:t,overflowX:n,overflowY:r,display:i}=Dc(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!["inline","contents"].includes(i)}function Ize(e){return["table","td","th"].includes(Xx(e))}function WW(e){const t=GW(),n=Dc(e);return n.transform!=="none"||n.perspective!=="none"||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||["transform","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function kze(e){let t=_m(e);for(;Ll(t)&&!B0(t);){if(WW(t))return t;t=_m(t)}return null}function GW(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function B0(e){return["html","body","#document"].includes(Xx(e))}function Dc(e){return Vu(e).getComputedStyle(e)}function AL(e){return Si(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function _m(e){if(Xx(e)==="html")return e;const t=e.assignedSlot||e.parentNode||YU(e)&&e.host||qm(e);return YU(t)?t.host:t}function _be(e){const t=_m(e);return B0(t)?e.ownerDocument?e.ownerDocument.body:e.body:Ll(t)&&uk(t)?t:_be(t)}function im(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const i=_be(e),s=i===((r=e.ownerDocument)==null?void 0:r.body),o=Vu(i);return s?t.concat(o,o.visualViewport||[],uk(i)?i:[],o.frameElement&&n?im(o.frameElement):[]):t.concat(i,im(i,[],n))}function voe(e){let t=e.activeElement;for(;((n=t)==null||(n=n.shadowRoot)==null?void 0:n.activeElement)!=null;){var n;t=t.shadowRoot.activeElement}return t}function AA(e,t){if(!e||!t)return!1;const n=t.getRootNode==null?void 0:t.getRootNode();if(e.contains(t))return!0;if(n&&YU(n)){let r=t;for(;r;){if(e===r)return!0;r=r.parentNode||r.host}}return!1}function wbe(){const e=navigator.userAgentData;return e!=null&&e.platform?e.platform:navigator.platform}function Ebe(){const e=navigator.userAgentData;return e&&Array.isArray(e.brands)?e.brands.map(t=>{let{brand:n,version:r}=t;return n+"/"+r}).join(" "):navigator.userAgent}function Rze(e){return Dze()?!1:!boe()&&e.width===0&&e.height===0||boe()&&e.width===1&&e.height===1&&e.pressure===0&&e.detail===0&&e.pointerType==="mouse"||e.width<1&&e.height<1&&e.pressure===0&&e.detail===0&&e.pointerType==="touch"}function Nze(){return/apple/i.test(navigator.vendor)}function boe(){const e=/android/i;return e.test(wbe())||e.test(Ebe())}function Pze(){return wbe().toLowerCase().startsWith("mac")&&!navigator.maxTouchPoints}function Dze(){return Ebe().includes("jsdom/")}function KU(e,t){const n=["mouse","pen"];return n.push("",void 0),n.includes(e)}function Oze(e){return"nativeEvent"in e}function $ze(e){return e.matches("html,body")}function i1(e){return(e==null?void 0:e.ownerDocument)||document}function jj(e,t){if(t==null)return!1;if("composedPath"in e)return e.composedPath().includes(t);const n=e;return n.target!=null&&t.contains(n.target)}function ew(e){return"composedPath"in e?e.composedPath()[0]:e.target}const Mze="input:not([type='hidden']):not([disabled]),[contenteditable]:not([contenteditable='false']),textarea:not([disabled])";function Lze(e){return Ll(e)&&e.matches(Mze)}const Sl=Math.min,la=Math.max,qO=Math.round,IN=Math.floor,U0=e=>({x:e,y:e}),Fze={left:"right",right:"left",bottom:"top",top:"bottom"},jze={start:"end",end:"start"};function XU(e,t,n){return la(e,Sl(t,n))}function wm(e,t){return typeof e=="function"?e(t):e}function Yf(e){return e.split("-")[0]}function Qx(e){return e.split("-")[1]}function YW(e){return e==="x"?"y":"x"}function KW(e){return e==="y"?"height":"width"}function $b(e){return["top","bottom"].includes(Yf(e))?"y":"x"}function XW(e){return YW($b(e))}function Bze(e,t,n){n===void 0&&(n=!1);const r=Qx(e),i=XW(e),s=KW(i);let o=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[s]>t.floating[s]&&(o=WO(o)),[o,WO(o)]}function Uze(e){const t=WO(e);return[QU(e),t,QU(t)]}function QU(e){return e.replace(/start|end/g,t=>jze[t])}function zze(e,t,n){const r=["left","right"],i=["right","left"],s=["top","bottom"],o=["bottom","top"];switch(e){case"top":case"bottom":return n?t?i:r:t?r:i;case"left":case"right":return t?s:o;default:return[]}}function Vze(e,t,n,r){const i=Qx(e);let s=zze(Yf(e),n==="start",r);return i&&(s=s.map(o=>o+"-"+i),t&&(s=s.concat(s.map(QU)))),s}function WO(e){return e.replace(/left|right|bottom|top/g,t=>Fze[t])}function Hze(e){return{top:0,right:0,bottom:0,left:0,...e}}function QW(e){return typeof e!="number"?Hze(e):{top:e,right:e,bottom:e,left:e}}function OE(e){const{x:t,y:n,width:r,height:i}=e;return{width:r,height:i,top:n,left:t,right:t+r,bottom:n+i,x:t,y:n}}function _oe(e,t,n){let{reference:r,floating:i}=e;const s=$b(t),o=XW(t),a=KW(o),u=Yf(t),l=s==="y",c=r.x+r.width/2-i.width/2,f=r.y+r.height/2-i.height/2,d=r[a]/2-i[a]/2;let h;switch(u){case"top":h={x:c,y:r.y-i.height};break;case"bottom":h={x:c,y:r.y+r.height};break;case"right":h={x:r.x+r.width,y:f};break;case"left":h={x:r.x-i.width,y:f};break;default:h={x:r.x,y:r.y}}switch(Qx(t)){case"start":h[o]-=d*(n&&l?-1:1);break;case"end":h[o]+=d*(n&&l?-1:1);break}return h}const qze=async(e,t,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:s=[],platform:o}=n,a=s.filter(Boolean),u=await(o.isRTL==null?void 0:o.isRTL(t));let l=await o.getElementRects({reference:e,floating:t,strategy:i}),{x:c,y:f}=_oe(l,r,u),d=r,h={},p=0;for(let m=0;m<a.length;m++){const{name:g,fn:y}=a[m],{x:v,y:_,data:w,reset:E}=await y({x:c,y:f,initialPlacement:r,placement:d,strategy:i,middlewareData:h,rects:l,platform:o,elements:{reference:e,floating:t}});c=v??c,f=_??f,h={...h,[g]:{...h[g],...w}},E&&p<=50&&(p++,typeof E=="object"&&(E.placement&&(d=E.placement),E.rects&&(l=E.rects===!0?await o.getElementRects({reference:e,floating:t,strategy:i}):E.rects),{x:c,y:f}=_oe(l,d,u)),m=-1)}return{x:c,y:f,placement:d,strategy:i,middlewareData:h}};async function JW(e,t){var n;t===void 0&&(t={});const{x:r,y:i,platform:s,rects:o,elements:a,strategy:u}=e,{boundary:l="clippingAncestors",rootBoundary:c="viewport",elementContext:f="floating",altBoundary:d=!1,padding:h=0}=wm(t,e),p=QW(h),g=a[d?f==="floating"?"reference":"floating":f],y=OE(await s.getClippingRect({element:(n=await(s.isElement==null?void 0:s.isElement(g)))==null||n?g:g.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:l,rootBoundary:c,strategy:u})),v=f==="floating"?{x:r,y:i,width:o.floating.width,height:o.floating.height}:o.reference,_=await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),w=await(s.isElement==null?void 0:s.isElement(_))?await(s.getScale==null?void 0:s.getScale(_))||{x:1,y:1}:{x:1,y:1},E=OE(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:v,offsetParent:_,strategy:u}):v);return{top:(y.top-E.top+p.top)/w.y,bottom:(E.bottom-y.bottom+p.bottom)/w.y,left:(y.left-E.left+p.left)/w.x,right:(E.right-y.right+p.right)/w.x}}const Wze=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:i,rects:s,platform:o,elements:a,middlewareData:u}=t,{element:l,padding:c=0}=wm(e,t)||{};if(l==null)return{};const f=QW(c),d={x:n,y:r},h=XW(i),p=KW(h),m=await o.getDimensions(l),g=h==="y",y=g?"top":"left",v=g?"bottom":"right",_=g?"clientHeight":"clientWidth",w=s.reference[p]+s.reference[h]-d[h]-s.floating[p],E=d[h]-s.reference[h],S=await(o.getOffsetParent==null?void 0:o.getOffsetParent(l));let T=S?S[_]:0;(!T||!await(o.isElement==null?void 0:o.isElement(S)))&&(T=a.floating[_]||s.floating[p]);const C=w/2-E/2,A=T/2-m[p]/2-1,k=Sl(f[y],A),N=Sl(f[v],A),O=k,D=T-m[p]-N,$=T/2-m[p]/2+C,F=XU(O,$,D),M=!u.arrow&&Qx(i)!=null&&$!==F&&s.reference[p]/2-($<O?k:N)-m[p]/2<0,B=M?$<O?$-O:$-D:0;return{[h]:d[h]+B,data:{[h]:F,centerOffset:$-F-B,...M&&{alignmentOffset:B}},reset:M}}}),Gze=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:i,middlewareData:s,rects:o,initialPlacement:a,platform:u,elements:l}=t,{mainAxis:c=!0,crossAxis:f=!0,fallbackPlacements:d,fallbackStrategy:h="bestFit",fallbackAxisSideDirection:p="none",flipAlignment:m=!0,...g}=wm(e,t);if((n=s.arrow)!=null&&n.alignmentOffset)return{};const y=Yf(i),v=Yf(a)===a,_=await(u.isRTL==null?void 0:u.isRTL(l.floating)),w=d||(v||!m?[WO(a)]:Uze(a));!d&&p!=="none"&&w.push(...Vze(a,m,p,_));const E=[a,...w],S=await JW(t,g),T=[];let C=((r=s.flip)==null?void 0:r.overflows)||[];if(c&&T.push(S[y]),f){const O=Bze(i,o,_);T.push(S[O[0]],S[O[1]])}if(C=[...C,{placement:i,overflows:T}],!T.every(O=>O<=0)){var A,k;const O=(((A=s.flip)==null?void 0:A.index)||0)+1,D=E[O];if(D)return{data:{index:O,overflows:C},reset:{placement:D}};let $=(k=C.filter(F=>F.overflows[0]<=0).sort((F,M)=>F.overflows[1]-M.overflows[1])[0])==null?void 0:k.placement;if(!$)switch(h){case"bestFit":{var N;const F=(N=C.map(M=>[M.placement,M.overflows.filter(B=>B>0).reduce((B,U)=>B+U,0)]).sort((M,B)=>M[1]-B[1])[0])==null?void 0:N[0];F&&($=F);break}case"initialPlacement":$=a;break}if(i!==$)return{reset:{placement:$}}}return{}}}};function xbe(e){const t=Sl(...e.map(s=>s.left)),n=Sl(...e.map(s=>s.top)),r=la(...e.map(s=>s.right)),i=la(...e.map(s=>s.bottom));return{x:t,y:n,width:r-t,height:i-n}}function Yze(e){const t=e.slice().sort((i,s)=>i.y-s.y),n=[];let r=null;for(let i=0;i<t.length;i++){const s=t[i];!r||s.y-r.y>r.height/2?n.push([s]):n[n.length-1].push(s),r=s}return n.map(i=>OE(xbe(i)))}const Kze=function(e){return e===void 0&&(e={}),{name:"inline",options:e,async fn(t){const{placement:n,elements:r,rects:i,platform:s,strategy:o}=t,{padding:a=2,x:u,y:l}=wm(e,t),c=Array.from(await(s.getClientRects==null?void 0:s.getClientRects(r.reference))||[]),f=Yze(c),d=OE(xbe(c)),h=QW(a);function p(){if(f.length===2&&f[0].left>f[1].right&&u!=null&&l!=null)return f.find(g=>u>g.left-h.left&&u<g.right+h.right&&l>g.top-h.top&&l<g.bottom+h.bottom)||d;if(f.length>=2){if($b(n)==="y"){const k=f[0],N=f[f.length-1],O=Yf(n)==="top",D=k.top,$=N.bottom,F=O?k.left:N.left,M=O?k.right:N.right,B=M-F,U=$-D;return{top:D,bottom:$,left:F,right:M,width:B,height:U,x:F,y:D}}const g=Yf(n)==="left",y=la(...f.map(k=>k.right)),v=Sl(...f.map(k=>k.left)),_=f.filter(k=>g?k.left===v:k.right===y),w=_[0].top,E=_[_.length-1].bottom,S=v,T=y,C=T-S,A=E-w;return{top:w,bottom:E,left:S,right:T,width:C,height:A,x:S,y:w}}return d}const m=await s.getElementRects({reference:{getBoundingClientRect:p},floating:r.floating,strategy:o});return i.reference.x!==m.reference.x||i.reference.y!==m.reference.y||i.reference.width!==m.reference.width||i.reference.height!==m.reference.height?{reset:{rects:m}}:{}}}};async function Xze(e,t){const{placement:n,platform:r,elements:i}=e,s=await(r.isRTL==null?void 0:r.isRTL(i.floating)),o=Yf(n),a=Qx(n),u=$b(n)==="y",l=["left","top"].includes(o)?-1:1,c=s&&u?-1:1,f=wm(t,e);let{mainAxis:d,crossAxis:h,alignmentAxis:p}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...f};return a&&typeof p=="number"&&(h=a==="end"?p*-1:p),u?{x:h*c,y:d*l}:{x:d*l,y:h*c}}const Qze=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:i,y:s,placement:o,middlewareData:a}=t,u=await Xze(t,e);return o===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:i+u.x,y:s+u.y,data:{...u,placement:o}}}}},Jze=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:i}=t,{mainAxis:s=!0,crossAxis:o=!1,limiter:a={fn:g=>{let{x:y,y:v}=g;return{x:y,y:v}}},...u}=wm(e,t),l={x:n,y:r},c=await JW(t,u),f=$b(Yf(i)),d=YW(f);let h=l[d],p=l[f];if(s){const g=d==="y"?"top":"left",y=d==="y"?"bottom":"right",v=h+c[g],_=h-c[y];h=XU(v,h,_)}if(o){const g=f==="y"?"top":"left",y=f==="y"?"bottom":"right",v=p+c[g],_=p-c[y];p=XU(v,p,_)}const m=a.fn({...t,[d]:h,[f]:p});return{...m,data:{x:m.x-n,y:m.y-r}}}}},Zze=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:r,placement:i,rects:s,middlewareData:o}=t,{offset:a=0,mainAxis:u=!0,crossAxis:l=!0}=wm(e,t),c={x:n,y:r},f=$b(i),d=YW(f);let h=c[d],p=c[f];const m=wm(a,t),g=typeof m=="number"?{mainAxis:m,crossAxis:0}:{mainAxis:0,crossAxis:0,...m};if(u){const _=d==="y"?"height":"width",w=s.reference[d]-s.floating[_]+g.mainAxis,E=s.reference[d]+s.reference[_]-g.mainAxis;h<w?h=w:h>E&&(h=E)}if(l){var y,v;const _=d==="y"?"width":"height",w=["top","left"].includes(Yf(i)),E=s.reference[f]-s.floating[_]+(w&&((y=o.offset)==null?void 0:y[f])||0)+(w?0:g.crossAxis),S=s.reference[f]+s.reference[_]+(w?0:((v=o.offset)==null?void 0:v[f])||0)-(w?g.crossAxis:0);p<E?p=E:p>S&&(p=S)}return{[d]:h,[f]:p}}}},eVe=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){const{placement:n,rects:r,platform:i,elements:s}=t,{apply:o=()=>{},...a}=wm(e,t),u=await JW(t,a),l=Yf(n),c=Qx(n),f=$b(n)==="y",{width:d,height:h}=r.floating;let p,m;l==="top"||l==="bottom"?(p=l,m=c===(await(i.isRTL==null?void 0:i.isRTL(s.floating))?"start":"end")?"left":"right"):(m=l,p=c==="end"?"top":"bottom");const g=h-u.top-u.bottom,y=d-u.left-u.right,v=Sl(h-u[p],g),_=Sl(d-u[m],y),w=!t.middlewareData.shift;let E=v,S=_;if(f?S=c||w?Sl(_,y):y:E=c||w?Sl(v,g):g,w&&!c){const C=la(u.left,0),A=la(u.right,0),k=la(u.top,0),N=la(u.bottom,0);f?S=d-2*(C!==0||A!==0?C+A:la(u.left,u.right)):E=h-2*(k!==0||N!==0?k+N:la(u.top,u.bottom))}await o({...t,availableWidth:S,availableHeight:E});const T=await i.getDimensions(s.floating);return d!==T.width||h!==T.height?{reset:{rects:!0}}:{}}}};function Sbe(e){const t=Dc(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const i=Ll(e),s=i?e.offsetWidth:n,o=i?e.offsetHeight:r,a=qO(n)!==s||qO(r)!==o;return a&&(n=s,r=o),{width:n,height:r,$:a}}function ZW(e){return Si(e)?e:e.contextElement}function Yw(e){const t=ZW(e);if(!Ll(t))return U0(1);const n=t.getBoundingClientRect(),{width:r,height:i,$:s}=Sbe(t);let o=(s?qO(n.width):n.width)/r,a=(s?qO(n.height):n.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const tVe=U0(0);function Tbe(e){const t=Vu(e);return!GW()||!t.visualViewport?tVe:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function nVe(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==Vu(e)?!1:t}function z1(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const i=e.getBoundingClientRect(),s=ZW(e);let o=U0(1);t&&(r?Si(r)&&(o=Yw(r)):o=Yw(e));const a=nVe(s,n,r)?Tbe(s):U0(0);let u=(i.left+a.x)/o.x,l=(i.top+a.y)/o.y,c=i.width/o.x,f=i.height/o.y;if(s){const d=Vu(s),h=r&&Si(r)?Vu(r):r;let p=d,m=p.frameElement;for(;m&&r&&h!==p;){const g=Yw(m),y=m.getBoundingClientRect(),v=Dc(m),_=y.left+(m.clientLeft+parseFloat(v.paddingLeft))*g.x,w=y.top+(m.clientTop+parseFloat(v.paddingTop))*g.y;u*=g.x,l*=g.y,c*=g.x,f*=g.y,u+=_,l+=w,p=Vu(m),m=p.frameElement}}return OE({width:c,height:f,x:u,y:l})}const rVe=[":popover-open",":modal"];function eG(e){return rVe.some(t=>{try{return e.matches(t)}catch{return!1}})}function iVe(e){let{elements:t,rect:n,offsetParent:r,strategy:i}=e;const s=i==="fixed",o=qm(r),a=t?eG(t.floating):!1;if(r===o||a&&s)return n;let u={scrollLeft:0,scrollTop:0},l=U0(1);const c=U0(0),f=Ll(r);if((f||!f&&!s)&&((Xx(r)!=="body"||uk(o))&&(u=AL(r)),Ll(r))){const d=z1(r);l=Yw(r),c.x=d.x+r.clientLeft,c.y=d.y+r.clientTop}return{width:n.width*l.x,height:n.height*l.y,x:n.x*l.x-u.scrollLeft*l.x+c.x,y:n.y*l.y-u.scrollTop*l.y+c.y}}function sVe(e){return Array.from(e.getClientRects())}function Cbe(e){return z1(qm(e)).left+AL(e).scrollLeft}function oVe(e){const t=qm(e),n=AL(e),r=e.ownerDocument.body,i=la(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),s=la(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+Cbe(e);const a=-n.scrollTop;return Dc(r).direction==="rtl"&&(o+=la(t.clientWidth,r.clientWidth)-i),{width:i,height:s,x:o,y:a}}function aVe(e,t){const n=Vu(e),r=qm(e),i=n.visualViewport;let s=r.clientWidth,o=r.clientHeight,a=0,u=0;if(i){s=i.width,o=i.height;const l=GW();(!l||l&&t==="fixed")&&(a=i.offsetLeft,u=i.offsetTop)}return{width:s,height:o,x:a,y:u}}function uVe(e,t){const n=z1(e,!0,t==="fixed"),r=n.top+e.clientTop,i=n.left+e.clientLeft,s=Ll(e)?Yw(e):U0(1),o=e.clientWidth*s.x,a=e.clientHeight*s.y,u=i*s.x,l=r*s.y;return{width:o,height:a,x:u,y:l}}function woe(e,t,n){let r;if(t==="viewport")r=aVe(e,n);else if(t==="document")r=oVe(qm(e));else if(Si(t))r=uVe(t,n);else{const i=Tbe(e);r={...t,x:t.x-i.x,y:t.y-i.y}}return OE(r)}function Abe(e,t){const n=_m(e);return n===t||!Si(n)||B0(n)?!1:Dc(n).position==="fixed"||Abe(n,t)}function lVe(e,t){const n=t.get(e);if(n)return n;let r=im(e,[],!1).filter(a=>Si(a)&&Xx(a)!=="body"),i=null;const s=Dc(e).position==="fixed";let o=s?_m(e):e;for(;Si(o)&&!B0(o);){const a=Dc(o),u=WW(o);!u&&a.position==="fixed"&&(i=null),(s?!u&&!i:!u&&a.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||uk(o)&&!u&&Abe(e,o))?r=r.filter(c=>c!==o):i=a,o=_m(o)}return t.set(e,r),r}function cVe(e){let{element:t,boundary:n,rootBoundary:r,strategy:i}=e;const o=[...n==="clippingAncestors"?eG(t)?[]:lVe(t,this._c):[].concat(n),r],a=o[0],u=o.reduce((l,c)=>{const f=woe(t,c,i);return l.top=la(f.top,l.top),l.right=Sl(f.right,l.right),l.bottom=Sl(f.bottom,l.bottom),l.left=la(f.left,l.left),l},woe(t,a,i));return{width:u.right-u.left,height:u.bottom-u.top,x:u.left,y:u.top}}function fVe(e){const{width:t,height:n}=Sbe(e);return{width:t,height:n}}function dVe(e,t,n){const r=Ll(t),i=qm(t),s=n==="fixed",o=z1(e,!0,s,t);let a={scrollLeft:0,scrollTop:0};const u=U0(0);if(r||!r&&!s)if((Xx(t)!=="body"||uk(i))&&(a=AL(t)),r){const f=z1(t,!0,s,t);u.x=f.x+t.clientLeft,u.y=f.y+t.clientTop}else i&&(u.x=Cbe(i));const l=o.left+a.scrollLeft-u.x,c=o.top+a.scrollTop-u.y;return{x:l,y:c,width:o.width,height:o.height}}function Bj(e){return Dc(e).position==="static"}function Eoe(e,t){return!Ll(e)||Dc(e).position==="fixed"?null:t?t(e):e.offsetParent}function Ibe(e,t){const n=Vu(e);if(eG(e))return n;if(!Ll(e)){let i=_m(e);for(;i&&!B0(i);){if(Si(i)&&!Bj(i))return i;i=_m(i)}return n}let r=Eoe(e,t);for(;r&&Ize(r)&&Bj(r);)r=Eoe(r,t);return r&&B0(r)&&Bj(r)&&!WW(r)?n:r||kze(e)||n}const hVe=async function(e){const t=this.getOffsetParent||Ibe,n=this.getDimensions,r=await n(e.floating);return{reference:dVe(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function pVe(e){return Dc(e).direction==="rtl"}const mVe={convertOffsetParentRelativeRectToViewportRelativeRect:iVe,getDocumentElement:qm,getClippingRect:cVe,getOffsetParent:Ibe,getElementRects:hVe,getClientRects:sVe,getDimensions:fVe,getScale:Yw,isElement:Si,isRTL:pVe};function gVe(e,t){let n=null,r;const i=qm(e);function s(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function o(a,u){a===void 0&&(a=!1),u===void 0&&(u=1),s();const{left:l,top:c,width:f,height:d}=e.getBoundingClientRect();if(a||t(),!f||!d)return;const h=IN(c),p=IN(i.clientWidth-(l+f)),m=IN(i.clientHeight-(c+d)),g=IN(l),v={rootMargin:-h+"px "+-p+"px "+-m+"px "+-g+"px",threshold:la(0,Sl(1,u))||1};let _=!0;function w(E){const S=E[0].intersectionRatio;if(S!==u){if(!_)return o();S?o(!1,S):r=setTimeout(()=>{o(!1,1e-7)},1e3)}_=!1}try{n=new IntersectionObserver(w,{...v,root:i.ownerDocument})}catch{n=new IntersectionObserver(w,v)}n.observe(e)}return o(!0),s}function yVe(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:u=!1}=r,l=ZW(e),c=i||s?[...l?im(l):[],...im(t)]:[];c.forEach(y=>{i&&y.addEventListener("scroll",n,{passive:!0}),s&&y.addEventListener("resize",n)});const f=l&&a?gVe(l,n):null;let d=-1,h=null;o&&(h=new ResizeObserver(y=>{let[v]=y;v&&v.target===l&&h&&(h.unobserve(t),cancelAnimationFrame(d),d=requestAnimationFrame(()=>{var _;(_=h)==null||_.observe(t)})),n()}),l&&!u&&h.observe(l),h.observe(t));let p,m=u?z1(e):null;u&&g();function g(){const y=z1(e);m&&(y.x!==m.x||y.y!==m.y||y.width!==m.width||y.height!==m.height)&&n(),m=y,p=requestAnimationFrame(g)}return n(),()=>{var y;c.forEach(v=>{i&&v.removeEventListener("scroll",n),s&&v.removeEventListener("resize",n)}),f==null||f(),(y=h)==null||y.disconnect(),h=null,u&&cancelAnimationFrame(p)}}const vVe=Qze,bVe=Jze,_Ve=Gze,wVe=eVe,xoe=Wze,EVe=Kze,xVe=Zze,SVe=(e,t,n)=>{const r=new Map,i={platform:mVe,...n},s={...i.platform,_c:r};return qze(e,t,{...i,platform:s})};var cD=typeof document<"u"?I.useLayoutEffect:I.useEffect;function GO(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,i;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!GO(e[r],t[r]))return!1;return!0}if(i=Object.keys(e),n=i.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,i[r]))return!1;for(r=n;r--!==0;){const s=i[r];if(!(s==="_owner"&&e.$$typeof)&&!GO(e[s],t[s]))return!1}return!0}return e!==e&&t!==t}function kbe(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function Soe(e,t){const n=kbe(e);return Math.round(t*n)/n}function Toe(e){const t=I.useRef(e);return cD(()=>{t.current=e}),t}function TVe(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:i,elements:{reference:s,floating:o}={},transform:a=!0,whileElementsMounted:u,open:l}=e,[c,f]=I.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[d,h]=I.useState(r);GO(d,r)||h(r);const[p,m]=I.useState(null),[g,y]=I.useState(null),v=I.useCallback(B=>{B!==S.current&&(S.current=B,m(B))},[]),_=I.useCallback(B=>{B!==T.current&&(T.current=B,y(B))},[]),w=s||p,E=o||g,S=I.useRef(null),T=I.useRef(null),C=I.useRef(c),A=u!=null,k=Toe(u),N=Toe(i),O=I.useCallback(()=>{if(!S.current||!T.current)return;const B={placement:t,strategy:n,middleware:d};N.current&&(B.platform=N.current),SVe(S.current,T.current,B).then(U=>{const H={...U,isPositioned:!0};D.current&&!GO(C.current,H)&&(C.current=H,sk.flushSync(()=>{f(H)}))})},[d,t,n,N]);cD(()=>{l===!1&&C.current.isPositioned&&(C.current.isPositioned=!1,f(B=>({...B,isPositioned:!1})))},[l]);const D=I.useRef(!1);cD(()=>(D.current=!0,()=>{D.current=!1}),[]),cD(()=>{if(w&&(S.current=w),E&&(T.current=E),w&&E){if(k.current)return k.current(w,E,O);O()}},[w,E,O,k,A]);const $=I.useMemo(()=>({reference:S,floating:T,setReference:v,setFloating:_}),[v,_]),F=I.useMemo(()=>({reference:w,floating:E}),[w,E]),M=I.useMemo(()=>{const B={position:n,left:0,top:0};if(!F.floating)return B;const U=Soe(F.floating,c.x),H=Soe(F.floating,c.y);return a?{...B,transform:"translate("+U+"px, "+H+"px)",...kbe(F.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:U,top:H}},[n,a,F.floating,c.x,c.y]);return I.useMemo(()=>({...c,update:O,refs:$,elements:F,floatingStyles:M}),[c,O,$,F,M])}const CVe=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:r,padding:i}=typeof e=="function"?e(n):e;return r&&t(r)?r.current!=null?xoe({element:r.current,padding:i}).fn(n):{}:r?xoe({element:r,padding:i}).fn(n):{}}}},Rbe=(e,t)=>({...vVe(e),options:[e,t]}),tG=(e,t)=>({...bVe(e),options:[e,t]}),Coe=(e,t)=>({...xVe(e),options:[e,t]}),JU=(e,t)=>({..._Ve(e),options:[e,t]}),AVe=(e,t)=>({...wVe(e),options:[e,t]}),ZU=(e,t)=>({...EVe(e),options:[e,t]}),Nbe=(e,t)=>({...CVe(e),options:[e,t]}),Pbe={...mO},IVe=Pbe.useInsertionEffect,kVe=IVe||(e=>e());function zg(e){const t=I.useRef(()=>{});return kVe(()=>{t.current=e}),I.useCallback(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return t.current==null?void 0:t.current(...r)},[])}var lh=typeof document<"u"?I.useLayoutEffect:I.useEffect;let Aoe=!1,RVe=0;const Ioe=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+RVe++;function NVe(){const[e,t]=I.useState(()=>Aoe?Ioe():void 0);return lh(()=>{e==null&&t(Ioe())},[]),I.useEffect(()=>{Aoe=!0},[]),e}const PVe=Pbe.useId,Dbe=PVe||NVe;function DVe(){const e=new Map;return{emit(t,n){var r;(r=e.get(t))==null||r.forEach(i=>i(n))},on(t,n){e.set(t,[...e.get(t)||[],n])},off(t,n){var r;e.set(t,((r=e.get(t))==null?void 0:r.filter(i=>i!==n))||[])}}}const OVe=I.createContext(null),$Ve=I.createContext(null),nG=()=>{var e;return((e=I.useContext(OVe))==null?void 0:e.id)||null},rG=()=>I.useContext($Ve);function iG(e){return"data-floating-ui-"+e}function koe(e){const t=I.useRef(e);return lh(()=>{t.current=e}),t}const Roe=iG("safe-polygon");function fD(e,t,n){return n&&!KU(n)?0:typeof e=="number"?e:e==null?void 0:e[t]}function MVe(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,dataRef:i,events:s,elements:{domReference:o,floating:a}}=e,{enabled:u=!0,delay:l=0,handleClose:c=null,mouseOnly:f=!1,restMs:d=0,move:h=!0}=t,p=rG(),m=nG(),g=koe(c),y=koe(l),v=I.useRef(),_=I.useRef(-1),w=I.useRef(),E=I.useRef(-1),S=I.useRef(!0),T=I.useRef(!1),C=I.useRef(()=>{}),A=I.useCallback(()=>{var D;const $=(D=i.current.openEvent)==null?void 0:D.type;return($==null?void 0:$.includes("mouse"))&&$!=="mousedown"},[i]);I.useEffect(()=>{if(!u)return;function D($){let{open:F}=$;F||(clearTimeout(_.current),clearTimeout(E.current),S.current=!0)}return s.on("openchange",D),()=>{s.off("openchange",D)}},[u,s]),I.useEffect(()=>{if(!u||!g.current||!n)return;function D(F){A()&&r(!1,F,"hover")}const $=i1(a).documentElement;return $.addEventListener("mouseleave",D),()=>{$.removeEventListener("mouseleave",D)}},[a,n,r,u,g,A]);const k=I.useCallback(function(D,$,F){$===void 0&&($=!0),F===void 0&&(F="hover");const M=fD(y.current,"close",v.current);M&&!w.current?(clearTimeout(_.current),_.current=window.setTimeout(()=>r(!1,D,F),M)):$&&(clearTimeout(_.current),r(!1,D,F))},[y,r]),N=zg(()=>{C.current(),w.current=void 0}),O=zg(()=>{if(T.current){const D=i1(a).body;D.style.pointerEvents="",D.removeAttribute(Roe),T.current=!1}});return I.useEffect(()=>{if(!u)return;function D(){return i.current.openEvent?["click","mousedown"].includes(i.current.openEvent.type):!1}function $(B){if(clearTimeout(_.current),S.current=!1,f&&!KU(v.current)||d>0&&!fD(y.current,"open"))return;const U=fD(y.current,"open",v.current);U?_.current=window.setTimeout(()=>{r(!0,B,"hover")},U):r(!0,B,"hover")}function F(B){if(D())return;C.current();const U=i1(a);if(clearTimeout(E.current),g.current&&i.current.floatingContext){n||clearTimeout(_.current),w.current=g.current({...i.current.floatingContext,tree:p,x:B.clientX,y:B.clientY,onClose(){O(),N(),k(B,!0,"safe-polygon")}});const P=w.current;U.addEventListener("mousemove",P),C.current=()=>{U.removeEventListener("mousemove",P)};return}(v.current==="touch"?!AA(a,B.relatedTarget):!0)&&k(B)}function M(B){D()||i.current.floatingContext&&(g.current==null||g.current({...i.current.floatingContext,tree:p,x:B.clientX,y:B.clientY,onClose(){O(),N(),k(B)}})(B))}if(Si(o)){const B=o;return n&&B.addEventListener("mouseleave",M),a==null||a.addEventListener("mouseleave",M),h&&B.addEventListener("mousemove",$,{once:!0}),B.addEventListener("mouseenter",$),B.addEventListener("mouseleave",F),()=>{n&&B.removeEventListener("mouseleave",M),a==null||a.removeEventListener("mouseleave",M),h&&B.removeEventListener("mousemove",$),B.removeEventListener("mouseenter",$),B.removeEventListener("mouseleave",F)}}},[o,a,u,e,f,d,h,k,N,O,r,n,p,y,g,i]),lh(()=>{var D;if(u&&n&&(D=g.current)!=null&&D.__options.blockPointerEvents&&A()){const F=i1(a).body;if(F.setAttribute(Roe,""),F.style.pointerEvents="none",T.current=!0,Si(o)&&a){var $;const M=o,B=p==null||($=p.nodesRef.current.find(U=>U.id===m))==null||($=$.context)==null?void 0:$.elements.floating;return B&&(B.style.pointerEvents=""),M.style.pointerEvents="auto",a.style.pointerEvents="auto",()=>{M.style.pointerEvents="",a.style.pointerEvents=""}}}},[u,n,m,a,o,p,g,A]),lh(()=>{n||(v.current=void 0,N(),O())},[n,N,O]),I.useEffect(()=>()=>{N(),clearTimeout(_.current),clearTimeout(E.current),O()},[u,o,N,O]),I.useMemo(()=>{if(!u)return{};function D($){v.current=$.pointerType}return{reference:{onPointerDown:D,onPointerEnter:D,onMouseMove($){function F(){S.current||r(!0,$.nativeEvent,"hover")}f&&!KU(v.current)||n||d===0||(clearTimeout(E.current),v.current==="touch"?F():E.current=window.setTimeout(F,d))}},floating:{onMouseEnter(){clearTimeout(_.current)},onMouseLeave($){k($.nativeEvent,!1)}}}},[u,f,n,d,r,k])}const e7=()=>{},Obe=I.createContext({delay:0,initialDelay:0,timeoutMs:0,currentId:null,setCurrentId:e7,setState:e7,isInstantPhase:!1}),$be=()=>I.useContext(Obe);function LVe(e){const{children:t,delay:n,timeoutMs:r=0}=e,[i,s]=I.useReducer((u,l)=>({...u,...l}),{delay:n,timeoutMs:r,initialDelay:n,currentId:null,isInstantPhase:!1}),o=I.useRef(null),a=I.useCallback(u=>{s({currentId:u})},[]);return lh(()=>{i.currentId?o.current===null?o.current=i.currentId:i.isInstantPhase||s({isInstantPhase:!0}):(i.isInstantPhase&&s({isInstantPhase:!1}),o.current=null)},[i.currentId,i.isInstantPhase]),I.createElement(Obe.Provider,{value:I.useMemo(()=>({...i,setState:s,setCurrentId:a}),[i,a])},t)}function FVe(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,floatingId:i}=e,{id:s}=t,o=s??i,a=$be(),{currentId:u,setCurrentId:l,initialDelay:c,setState:f,timeoutMs:d}=a;return lh(()=>{u&&(f({delay:{open:1,close:fD(c,"close")}}),u!==o&&r(!1))},[o,r,f,u,c]),lh(()=>{function h(){r(!1),f({delay:c,currentId:null})}if(u&&!n&&u===o){if(d){const p=window.setTimeout(h,d);return()=>{clearTimeout(p)}}h()}},[n,f,u,o,r,c,d]),lh(()=>{l===e7||!n||l(o)},[n,l,o]),a}function Uj(e,t){let n=e.filter(i=>{var s;return i.parentId===t&&((s=i.context)==null?void 0:s.open)}),r=n;for(;r.length;)r=e.filter(i=>{var s;return(s=r)==null?void 0:s.some(o=>{var a;return i.parentId===o.id&&((a=i.context)==null?void 0:a.open)})}),n=n.concat(r);return n}const jVe={pointerdown:"onPointerDown",mousedown:"onMouseDown",click:"onClick"},BVe={pointerdown:"onPointerDownCapture",mousedown:"onMouseDownCapture",click:"onClickCapture"},Noe=e=>{var t,n;return{escapeKey:typeof e=="boolean"?e:(t=e==null?void 0:e.escapeKey)!=null?t:!1,outsidePress:typeof e=="boolean"?e:(n=e==null?void 0:e.outsidePress)!=null?n:!0}};function UVe(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,elements:{reference:i,domReference:s,floating:o},dataRef:a}=e,{enabled:u=!0,escapeKey:l=!0,outsidePress:c=!0,outsidePressEvent:f="pointerdown",referencePress:d=!1,referencePressEvent:h="pointerdown",ancestorScroll:p=!1,bubbles:m,capture:g}=t,y=rG(),v=zg(typeof c=="function"?c:()=>!1),_=typeof c=="function"?v:c,w=I.useRef(!1),E=I.useRef(!1),{escapeKey:S,outsidePress:T}=Noe(m),{escapeKey:C,outsidePress:A}=Noe(g),k=zg($=>{var F;if(!n||!u||!l||$.key!=="Escape")return;const M=(F=a.current.floatingContext)==null?void 0:F.nodeId,B=y?Uj(y.nodesRef.current,M):[];if(!S&&($.stopPropagation(),B.length>0)){let U=!0;if(B.forEach(H=>{var P;if((P=H.context)!=null&&P.open&&!H.context.dataRef.current.__escapeKeyBubbles){U=!1;return}}),!U)return}r(!1,Oze($)?$.nativeEvent:$,"escape-key")}),N=zg($=>{var F;const M=()=>{var B;k($),(B=ew($))==null||B.removeEventListener("keydown",M)};(F=ew($))==null||F.addEventListener("keydown",M)}),O=zg($=>{var F;const M=w.current;w.current=!1;const B=E.current;if(E.current=!1,f==="click"&&B||M||typeof _=="function"&&!_($))return;const U=ew($),H="["+iG("inert")+"]",P=i1(o).querySelectorAll(H);let z=Si(U)?U:null;for(;z&&!B0(z);){const G=_m(z);if(B0(G)||!Si(G))break;z=G}if(P.length&&Si(U)&&!$ze(U)&&!AA(U,o)&&Array.from(P).every(G=>!AA(z,G)))return;if(Ll(U)&&o){const G=U.clientWidth>0&&U.scrollWidth>U.clientWidth,ne=U.clientHeight>0&&U.scrollHeight>U.clientHeight;let ce=ne&&$.offsetX>U.clientWidth;if(ne&&Dc(U).direction==="rtl"&&(ce=$.offsetX<=U.offsetWidth-U.clientWidth),ce||G&&$.offsetY>U.clientHeight)return}const W=(F=a.current.floatingContext)==null?void 0:F.nodeId,j=y&&Uj(y.nodesRef.current,W).some(G=>{var ne;return jj($,(ne=G.context)==null?void 0:ne.elements.floating)});if(jj($,o)||jj($,s)||j)return;const q=y?Uj(y.nodesRef.current,W):[];if(q.length>0){let G=!0;if(q.forEach(ne=>{var ce;if((ce=ne.context)!=null&&ce.open&&!ne.context.dataRef.current.__outsidePressBubbles){G=!1;return}}),!G)return}r(!1,$,"outside-press")}),D=zg($=>{var F;const M=()=>{var B;O($),(B=ew($))==null||B.removeEventListener(f,M)};(F=ew($))==null||F.addEventListener(f,M)});return I.useEffect(()=>{if(!n||!u)return;a.current.__escapeKeyBubbles=S,a.current.__outsidePressBubbles=T;function $(B){r(!1,B,"ancestor-scroll")}const F=i1(o);l&&F.addEventListener("keydown",C?N:k,C),_&&F.addEventListener(f,A?D:O,A);let M=[];return p&&(Si(s)&&(M=im(s)),Si(o)&&(M=M.concat(im(o))),!Si(i)&&i&&i.contextElement&&(M=M.concat(im(i.contextElement)))),M=M.filter(B=>{var U;return B!==((U=F.defaultView)==null?void 0:U.visualViewport)}),M.forEach(B=>{B.addEventListener("scroll",$,{passive:!0})}),()=>{l&&F.removeEventListener("keydown",C?N:k,C),_&&F.removeEventListener(f,A?D:O,A),M.forEach(B=>{B.removeEventListener("scroll",$)})}},[a,o,s,i,l,_,f,n,r,p,u,S,T,k,C,N,O,A,D]),I.useEffect(()=>{w.current=!1},[_,f]),I.useMemo(()=>u?{reference:{onKeyDown:k,[jVe[h]]:$=>{d&&r(!1,$.nativeEvent,"reference-press")}},floating:{onKeyDown:k,onMouseDown(){E.current=!0},onMouseUp(){E.current=!0},[BVe[f]]:()=>{w.current=!0}}}:{},[u,d,f,h,r,k])}function zVe(e){const{open:t=!1,onOpenChange:n,elements:r}=e,i=Dbe(),s=I.useRef({}),[o]=I.useState(()=>DVe()),a=nG()!=null,[u,l]=I.useState(r.reference),c=zg((h,p,m)=>{s.current.openEvent=h?p:void 0,o.emit("openchange",{open:h,event:p,reason:m,nested:a}),n==null||n(h,p,m)}),f=I.useMemo(()=>({setPositionReference:l}),[]),d=I.useMemo(()=>({reference:u||r.reference||null,floating:r.floating||null,domReference:r.reference}),[u,r.reference,r.floating]);return I.useMemo(()=>({dataRef:s,open:t,onOpenChange:c,elements:d,events:o,floatingId:i,refs:f}),[t,c,d,o,i,f])}function sG(e){e===void 0&&(e={});const{nodeId:t}=e,n=zVe({...e,elements:{reference:null,floating:null,...e.elements}}),r=e.rootContext||n,i=r.elements,[s,o]=I.useState(null),[a,u]=I.useState(null),c=(i==null?void 0:i.reference)||s,f=I.useRef(null),d=rG();lh(()=>{c&&(f.current=c)},[c]);const h=TVe({...e,elements:{...i,...a&&{reference:a}}}),p=I.useCallback(_=>{const w=Si(_)?{getBoundingClientRect:()=>_.getBoundingClientRect(),contextElement:_}:_;u(w),h.refs.setReference(w)},[h.refs]),m=I.useCallback(_=>{(Si(_)||_===null)&&(f.current=_,o(_)),(Si(h.refs.reference.current)||h.refs.reference.current===null||_!==null&&!Si(_))&&h.refs.setReference(_)},[h.refs]),g=I.useMemo(()=>({...h.refs,setReference:m,setPositionReference:p,domReference:f}),[h.refs,m,p]),y=I.useMemo(()=>({...h.elements,domReference:c}),[h.elements,c]),v=I.useMemo(()=>({...h,...r,refs:g,elements:y,nodeId:t}),[h,g,y,t,r]);return lh(()=>{r.dataRef.current.floatingContext=v;const _=d==null?void 0:d.nodesRef.current.find(w=>w.id===t);_&&(_.context=v)}),I.useMemo(()=>({...h,context:v,refs:g,elements:y}),[h,g,y,v])}function VVe(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,events:i,dataRef:s,elements:{domReference:o}}=e,{enabled:a=!0,visibleOnly:u=!0}=t,l=I.useRef(!1),c=I.useRef(),f=I.useRef(!0);return I.useEffect(()=>{if(!a)return;const d=Vu(o);function h(){!n&&Ll(o)&&o===voe(i1(o))&&(l.current=!0)}function p(){f.current=!0}return d.addEventListener("blur",h),d.addEventListener("keydown",p,!0),()=>{d.removeEventListener("blur",h),d.removeEventListener("keydown",p,!0)}},[o,n,a]),I.useEffect(()=>{if(!a)return;function d(h){let{reason:p}=h;(p==="reference-press"||p==="escape-key")&&(l.current=!0)}return i.on("openchange",d),()=>{i.off("openchange",d)}},[i,a]),I.useEffect(()=>()=>{clearTimeout(c.current)},[]),I.useMemo(()=>a?{reference:{onPointerDown(d){Rze(d.nativeEvent)||(f.current=!1)},onMouseLeave(){l.current=!1},onFocus(d){if(l.current)return;const h=ew(d.nativeEvent);if(u&&Si(h))try{if(Nze()&&Pze())throw Error();if(!h.matches(":focus-visible"))return}catch{if(!f.current&&!Lze(h))return}r(!0,d.nativeEvent,"focus")},onBlur(d){l.current=!1;const h=d.relatedTarget,p=Si(h)&&h.hasAttribute(iG("focus-guard"))&&h.getAttribute("data-type")==="outside";c.current=window.setTimeout(()=>{var m;const g=voe(o?o.ownerDocument:document);!h&&g===o||AA((m=s.current.floatingContext)==null?void 0:m.refs.floating.current,g)||AA(o,g)||p||r(!1,d.nativeEvent,"focus")})}}}:{},[a,u,s,o,r])}const Poe="active",Doe="selected";function zj(e,t,n){const r=new Map,i=n==="item";let s=e;if(i&&e){const{[Poe]:o,[Doe]:a,...u}=e;s=u}return{...n==="floating"&&{tabIndex:-1},...s,...t.map(o=>{const a=o?o[n]:null;return typeof a=="function"?e?a(e):null:a}).concat(e).reduce((o,a)=>(a&&Object.entries(a).forEach(u=>{let[l,c]=u;if(!(i&&[Poe,Doe].includes(l)))if(l.indexOf("on")===0){if(r.has(l)||r.set(l,[]),typeof c=="function"){var f;(f=r.get(l))==null||f.push(c),o[l]=function(){for(var d,h=arguments.length,p=new Array(h),m=0;m<h;m++)p[m]=arguments[m];return(d=r.get(l))==null?void 0:d.map(g=>g(...p)).find(g=>g!==void 0)}}}else o[l]=c}),o),{})}}function HVe(e){e===void 0&&(e=[]);const t=e,n=I.useCallback(s=>zj(s,e,"reference"),t),r=I.useCallback(s=>zj(s,e,"floating"),t),i=I.useCallback(s=>zj(s,e,"item"),e.map(s=>s==null?void 0:s.item));return I.useMemo(()=>({getReferenceProps:n,getFloatingProps:r,getItemProps:i}),[n,r,i])}const qVe=new Map([["select","listbox"],["combobox","listbox"],["label",!1]]);function WVe(e,t){var n;t===void 0&&(t={});const{open:r,floatingId:i}=e,{enabled:s=!0,role:o="dialog"}=t,a=(n=qVe.get(o))!=null?n:o,u=Dbe(),c=nG()!=null;return I.useMemo(()=>{if(!s)return{};const f={id:i,...a&&{role:a}};return a==="tooltip"||o==="label"?{reference:{["aria-"+(o==="label"?"labelledby":"describedby")]:r?i:void 0},floating:f}:{reference:{"aria-expanded":r?"true":"false","aria-haspopup":a==="alertdialog"?"dialog":a,"aria-controls":r?i:void 0,...a==="listbox"&&{role:"combobox"},...a==="menu"&&{id:u},...a==="menu"&&c&&{role:"menuitem"},...o==="select"&&{"aria-autocomplete":"none"},...o==="combobox"&&{"aria-autocomplete":"list"}},floating:{...f,...a==="menu"&&{"aria-labelledby":u}},item(d){let{active:h,selected:p}=d;const m={role:"option",...h&&{id:i+"-option"}};switch(o){case"select":return{...m,"aria-selected":h&&p};case"combobox":return{...m,...h&&{"aria-selected":!0}}}return{}}}},[s,o,a,r,i,u,c])}function Mbe(e,t){if(e==="rtl"&&(t.includes("right")||t.includes("left"))){const[n,r]=t.split("-"),i=n==="right"?"left":"right";return r===void 0?i:`${i}-${r}`}return t}function Ooe(e,t,n,r){return e==="center"||r==="center"?{top:t}:e==="end"?{bottom:n}:e==="start"?{top:n}:{}}function $oe(e,t,n,r,i){return e==="center"||r==="center"?{left:t}:e==="end"?{[i==="ltr"?"right":"left"]:n}:e==="start"?{[i==="ltr"?"left":"right"]:n}:{}}const GVe={bottom:"borderTopLeftRadius",left:"borderTopRightRadius",right:"borderBottomLeftRadius",top:"borderBottomRightRadius"};function YVe({position:e,arrowSize:t,arrowOffset:n,arrowRadius:r,arrowPosition:i,arrowX:s,arrowY:o,dir:a}){const[u,l="center"]=e.split("-"),c={width:Te(t),height:Te(t),transform:"rotate(45deg)",position:"absolute",[GVe[u]]:Te(r)},f=Te(-t/2);return u==="left"?{...c,...Ooe(l,o,n,i),right:f,borderLeftColor:"transparent",borderBottomColor:"transparent"}:u==="right"?{...c,...Ooe(l,o,n,i),left:f,borderRightColor:"transparent",borderTopColor:"transparent"}:u==="top"?{...c,...$oe(l,s,n,i,a),bottom:f,borderTopColor:"transparent",borderLeftColor:"transparent"}:u==="bottom"?{...c,...$oe(l,s,n,i,a),top:f,borderBottomColor:"transparent",borderRightColor:"transparent"}:{}}const oG=I.forwardRef(({position:e,arrowSize:t,arrowOffset:n,arrowRadius:r,arrowPosition:i,visible:s,arrowX:o,arrowY:a,style:u,...l},c)=>{const{dir:f}=qh();return s?b.jsx("div",{...l,ref:c,style:{...u,...YVe({position:e,arrowSize:t,arrowOffset:n,arrowRadius:r,arrowPosition:i,dir:f,arrowX:o,arrowY:a})}}):null});oG.displayName="@mantine/core/FloatingArrow";const[KVe,Lbe]=fo("Popover component was not found in the tree");function IL({children:e,active:t=!0,refProp:n="ref"}){const r=OUe(t),i=hs(r,e==null?void 0:e.ref);return ky(e)?I.cloneElement(e,{[n]:i}):e}function Fbe(e){return b.jsx(qW,{tabIndex:-1,"data-autofocus":!0,...e})}IL.displayName="@mantine/core/FocusTrap";Fbe.displayName="@mantine/core/FocusTrapInitialFocus";IL.InitialFocus=Fbe;function XVe(e){const t=document.createElement("div");return t.setAttribute("data-portal","true"),typeof e.className=="string"&&t.classList.add(...e.className.split(" ").filter(Boolean)),typeof e.style=="object"&&Object.assign(t.style,e.style),typeof e.id=="string"&&t.setAttribute("id",e.id),t}const QVe={},jbe=I.forwardRef((e,t)=>{const{children:n,target:r,...i}=xe("Portal",QVe,e),[s,o]=I.useState(!1),a=I.useRef(null);return Nb(()=>(o(!0),a.current=r?typeof r=="string"?document.querySelector(r):r:XVe(i),$W(t,a.current),!r&&a.current&&document.body.appendChild(a.current),()=>{!r&&a.current&&document.body.removeChild(a.current)}),[r]),!s||!a.current?null:sk.createPortal(b.jsx(b.Fragment,{children:n}),a.current)});jbe.displayName="@mantine/core/Portal";function Jx({withinPortal:e=!0,children:t,...n}){return e?b.jsx(jbe,{...n,children:t}):b.jsx(b.Fragment,{children:t})}Jx.displayName="@mantine/core/OptionalPortal";const xT=e=>({in:{opacity:1,transform:"scale(1)"},out:{opacity:0,transform:`scale(.9) translateY(${Te(e==="bottom"?10:-10)})`},transitionProperty:"transform, opacity"}),kN={fade:{in:{opacity:1},out:{opacity:0},transitionProperty:"opacity"},"fade-up":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:`translateY(${Te(30)}`},transitionProperty:"opacity, transform"},"fade-down":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:`translateY(${Te(-30)}`},transitionProperty:"opacity, transform"},"fade-left":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:`translateX(${Te(30)}`},transitionProperty:"opacity, transform"},"fade-right":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:`translateX(${Te(-30)}`},transitionProperty:"opacity, transform"},scale:{in:{opacity:1,transform:"scale(1)"},out:{opacity:0,transform:"scale(0)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"scale-y":{in:{opacity:1,transform:"scaleY(1)"},out:{opacity:0,transform:"scaleY(0)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"scale-x":{in:{opacity:1,transform:"scaleX(1)"},out:{opacity:0,transform:"scaleX(0)"},common:{transformOrigin:"left"},transitionProperty:"transform, opacity"},"skew-up":{in:{opacity:1,transform:"translateY(0) skew(0deg, 0deg)"},out:{opacity:0,transform:`translateY(${Te(-20)}) skew(-10deg, -5deg)`},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"skew-down":{in:{opacity:1,transform:"translateY(0) skew(0deg, 0deg)"},out:{opacity:0,transform:`translateY(${Te(20)}) skew(-10deg, -5deg)`},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"rotate-left":{in:{opacity:1,transform:"translateY(0) rotate(0deg)"},out:{opacity:0,transform:`translateY(${Te(20)}) rotate(-5deg)`},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"rotate-right":{in:{opacity:1,transform:"translateY(0) rotate(0deg)"},out:{opacity:0,transform:`translateY(${Te(20)}) rotate(5deg)`},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"slide-down":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(-100%)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"slide-up":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(100%)"},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"slide-left":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(100%)"},common:{transformOrigin:"left"},transitionProperty:"transform, opacity"},"slide-right":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(-100%)"},common:{transformOrigin:"right"},transitionProperty:"transform, opacity"},pop:{...xT("bottom"),common:{transformOrigin:"center center"}},"pop-bottom-left":{...xT("bottom"),common:{transformOrigin:"bottom left"}},"pop-bottom-right":{...xT("bottom"),common:{transformOrigin:"bottom right"}},"pop-top-left":{...xT("top"),common:{transformOrigin:"top left"}},"pop-top-right":{...xT("top"),common:{transformOrigin:"top right"}}},Moe={entering:"in",entered:"in",exiting:"out",exited:"out","pre-exiting":"out","pre-entering":"out"};function JVe({transition:e,state:t,duration:n,timingFunction:r}){const i={transitionDuration:`${n}ms`,transitionTimingFunction:r};return typeof e=="string"?e in kN?{transitionProperty:kN[e].transitionProperty,...i,...kN[e].common,...kN[e][Moe[t]]}:{}:{transitionProperty:e.transitionProperty,...i,...e.common,...e[Moe[t]]}}function ZVe({duration:e,exitDuration:t,timingFunction:n,mounted:r,onEnter:i,onExit:s,onEntered:o,onExited:a}){const u=ps(),l=EL(),c=u.respectReducedMotion?l:!1,[f,d]=I.useState(c?0:e),[h,p]=I.useState(r?"entered":"exited"),m=I.useRef(-1),g=I.useRef(-1),y=v=>{const _=v?i:s,w=v?o:a;window.clearTimeout(m.current);const E=c?0:v?e:t;d(E),E===0?(typeof _=="function"&&_(),typeof w=="function"&&w(),p(v?"entered":"exited")):g.current=requestAnimationFrame(()=>{v2.flushSync(()=>{p(v?"pre-entering":"pre-exiting")}),g.current=requestAnimationFrame(()=>{typeof _=="function"&&_(),p(v?"entering":"exiting"),m.current=window.setTimeout(()=>{typeof w=="function"&&w(),p(v?"entered":"exited")},E)})})};return Th(()=>{y(r)},[r]),I.useEffect(()=>()=>{window.clearTimeout(m.current),cancelAnimationFrame(g.current)},[]),{transitionDuration:f,transitionStatus:h,transitionTimingFunction:n||"ease"}}function Wm({keepMounted:e,transition:t="fade",duration:n=250,exitDuration:r=n,mounted:i,children:s,timingFunction:o="ease",onExit:a,onEntered:u,onEnter:l,onExited:c}){const{transitionDuration:f,transitionStatus:d,transitionTimingFunction:h}=ZVe({mounted:i,exitDuration:r,duration:n,timingFunction:o,onExit:a,onEntered:u,onEnter:l,onExited:c});return f===0?i?b.jsx(b.Fragment,{children:s({})}):e?s({display:"none"}):null:d==="exited"?e?s({display:"none"}):null:b.jsx(b.Fragment,{children:s(JVe({transition:t,duration:f,state:d,timingFunction:h}))})}Wm.displayName="@mantine/core/Transition";var Bbe={dropdown:"m_38a85659",arrow:"m_a31dc6c1"};const eHe={},aG=Me((e,t)=>{var g,y,v,_;const n=xe("PopoverDropdown",eHe,e),{className:r,style:i,vars:s,children:o,onKeyDownCapture:a,variant:u,classNames:l,styles:c,...f}=n,d=Lbe(),h=z1e({opened:d.opened,shouldReturnFocus:d.returnFocus}),p=d.withRoles?{"aria-labelledby":d.getTargetId(),id:d.getDropdownId(),role:"dialog",tabIndex:-1}:{},m=hs(t,d.floating);return d.disabled?null:b.jsx(Jx,{...d.portalProps,withinPortal:d.withinPortal,children:b.jsx(Wm,{mounted:d.opened,...d.transitionProps,transition:((g=d.transitionProps)==null?void 0:g.transition)||"fade",duration:((y=d.transitionProps)==null?void 0:y.duration)??150,keepMounted:d.keepMounted,exitDuration:typeof((v=d.transitionProps)==null?void 0:v.exitDuration)=="number"?d.transitionProps.exitDuration:(_=d.transitionProps)==null?void 0:_.duration,children:w=>b.jsx(IL,{active:d.trapFocus,children:b.jsxs(pe,{...p,...f,variant:u,ref:m,onKeyDownCapture:wUe(d.onClose,{active:d.closeOnEscape,onTrigger:h,onKeyDown:a}),"data-position":d.placement,...d.getStyles("dropdown",{className:r,props:n,classNames:l,styles:c,style:[{...w,zIndex:d.zIndex,top:d.y??0,left:d.x??0,width:d.width==="target"?void 0:Te(d.width)},i]}),children:[o,b.jsx(oG,{ref:d.arrowRef,arrowX:d.arrowX,arrowY:d.arrowY,visible:d.withArrow,position:d.placement,arrowSize:d.arrowSize,arrowRadius:d.arrowRadius,arrowOffset:d.arrowOffset,arrowPosition:d.arrowPosition,...d.getStyles("arrow",{props:n,classNames:l,styles:c})})]})})})})});aG.classes=Bbe;aG.displayName="@mantine/core/PopoverDropdown";const tHe={refProp:"ref",popupType:"dialog"},Ube=Me((e,t)=>{const{children:n,refProp:r,popupType:i,...s}=xe("PopoverTarget",tHe,e);if(!ky(n))throw new Error("Popover.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const o=s,a=Lbe(),u=hs(a.reference,n.ref,t),l=a.withRoles?{"aria-haspopup":i,"aria-expanded":a.opened,"aria-controls":a.getDropdownId(),id:a.getTargetId()}:{};return I.cloneElement(n,{...o,...l,...a.targetProps,className:Xi(a.targetProps.className,o.className,n.props.className),[r]:u,...a.controlled?null:{onClick:a.onToggle}})});Ube.displayName="@mantine/core/PopoverTarget";function zbe({opened:e,floating:t,position:n,positionDependencies:r}){const[i,s]=I.useState(0);I.useEffect(()=>{if(t.refs.reference.current&&t.refs.floating.current)return yVe(t.refs.reference.current,t.refs.floating.current,t.update)},[t.refs.reference.current,t.refs.floating.current,e,i,n]),Th(()=>{t.update()},r),Th(()=>{s(o=>o+1)},[e])}function nHe(e){if(e===void 0)return{shift:!0,flip:!0};const t={...e};return e.shift===void 0&&(t.shift=!0),e.flip===void 0&&(t.flip=!0),t}function rHe(e,t){const n=nHe(e.middlewares),r=[Rbe(e.offset)];return n.shift&&r.push(tG(typeof n.shift=="boolean"?{limiter:Coe(),padding:5}:{limiter:Coe(),padding:5,...n.shift})),n.flip&&r.push(typeof n.flip=="boolean"?JU():JU(n.flip)),n.inline&&r.push(typeof n.inline=="boolean"?ZU():ZU(n.inline)),r.push(Nbe({element:e.arrowRef,padding:e.arrowOffset})),(n.size||e.width==="target")&&r.push(AVe({...typeof n.size=="boolean"?{}:n.size,apply({rects:i,availableWidth:s,availableHeight:o}){var l;const u=((l=t().refs.floating.current)==null?void 0:l.style)??{};n.size&&Object.assign(u,{maxWidth:`${s}px`,maxHeight:`${o}px`}),e.width==="target"&&Object.assign(u,{width:`${i.reference.width}px`})}})),r}function iHe(e){const[t,n]=Ss({value:e.opened,defaultValue:e.defaultOpened,finalValue:!1,onChange:e.onChange}),r=()=>{var o;t&&((o=e.onClose)==null||o.call(e),n(!1))},i=()=>{var o,a;t?((o=e.onClose)==null||o.call(e),n(!1)):((a=e.onOpen)==null||a.call(e),n(!0))},s=sG({strategy:e.strategy,placement:e.position,middleware:rHe(e,()=>s)});return zbe({opened:e.opened,position:e.position,positionDependencies:e.positionDependencies||[],floating:s}),Th(()=>{var o;(o=e.onPositionChange)==null||o.call(e,s.placement)},[s.placement]),Th(()=>{var o,a;e.opened?(a=e.onOpen)==null||a.call(e):(o=e.onClose)==null||o.call(e)},[e.opened]),{floating:s,controlled:typeof e.opened=="boolean",opened:t,onClose:r,onToggle:i}}const sHe={position:"bottom",offset:8,positionDependencies:[],transitionProps:{transition:"fade",duration:150},middlewares:{flip:!0,shift:!0,inline:!1},arrowSize:7,arrowOffset:5,arrowRadius:0,arrowPosition:"side",closeOnClickOutside:!0,withinPortal:!0,closeOnEscape:!0,trapFocus:!1,withRoles:!0,returnFocus:!1,clickOutsideEvents:["mousedown","touchstart"],zIndex:Zl("popover"),__staticSelector:"Popover",width:"max-content"},oHe=(e,{radius:t,shadow:n})=>({dropdown:{"--popover-radius":t===void 0?void 0:Ur(t),"--popover-shadow":DW(n)}});function Po(e){var _e,ke,ze,ct,Ot,We;const t=xe("Popover",sHe,e),{children:n,position:r,offset:i,onPositionChange:s,positionDependencies:o,opened:a,transitionProps:u,width:l,middlewares:c,withArrow:f,arrowSize:d,arrowOffset:h,arrowRadius:p,arrowPosition:m,unstyled:g,classNames:y,styles:v,closeOnClickOutside:_,withinPortal:w,portalProps:E,closeOnEscape:S,clickOutsideEvents:T,trapFocus:C,onClose:A,onOpen:k,onChange:N,zIndex:O,radius:D,shadow:$,id:F,defaultOpened:M,__staticSelector:B,withRoles:U,disabled:H,returnFocus:P,variant:z,keepMounted:W,vars:j,floatingStrategy:q,...G}=t,ne=dt({name:B,props:t,classes:Bbe,classNames:y,styles:v,unstyled:g,rootSelector:"dropdown",vars:j,varsResolver:oHe}),ce=I.useRef(null),[de,he]=I.useState(null),[ve,Ie]=I.useState(null),{dir:be}=qh(),Ke=Ta(F),Ue=iHe({middlewares:c,width:l,position:Mbe(be,r),offset:typeof i=="number"?i+(f?d/2:0):i,arrowRef:ce,arrowOffset:h,onPositionChange:s,positionDependencies:o,opened:a,defaultOpened:M,onChange:N,onOpen:k,onClose:A,strategy:q});SUe(()=>_&&Ue.onClose(),T,[de,ve]);const yt=I.useCallback(ge=>{he(ge),Ue.floating.refs.setReference(ge)},[Ue.floating.refs.setReference]),it=I.useCallback(ge=>{Ie(ge),Ue.floating.refs.setFloating(ge)},[Ue.floating.refs.setFloating]);return b.jsx(KVe,{value:{returnFocus:P,disabled:H,controlled:Ue.controlled,reference:yt,floating:it,x:Ue.floating.x,y:Ue.floating.y,arrowX:(ze=(ke=(_e=Ue.floating)==null?void 0:_e.middlewareData)==null?void 0:ke.arrow)==null?void 0:ze.x,arrowY:(We=(Ot=(ct=Ue.floating)==null?void 0:ct.middlewareData)==null?void 0:Ot.arrow)==null?void 0:We.y,opened:Ue.opened,arrowRef:ce,transitionProps:u,width:l,withArrow:f,arrowSize:d,arrowOffset:h,arrowRadius:p,arrowPosition:m,placement:Ue.floating.placement,trapFocus:C,withinPortal:w,portalProps:E,zIndex:O,radius:D,shadow:$,closeOnEscape:S,onClose:Ue.onClose,onToggle:Ue.onToggle,getTargetId:()=>`${Ke}-target`,getDropdownId:()=>`${Ke}-dropdown`,withRoles:U,targetProps:G,__staticSelector:B,classNames:y,styles:v,unstyled:g,variant:z,keepMounted:W,getStyles:ne},children:n})}Po.Target=Ube;Po.Dropdown=aG;Po.displayName="@mantine/core/Popover";Po.extend=e=>e;var Rf={root:"m_5ae2e3c",barsLoader:"m_7a2bd4cd",bar:"m_870bb79","bars-loader-animation":"m_5d2b3b9d",dotsLoader:"m_4e3f22d7",dot:"m_870c4af","loader-dots-animation":"m_aac34a1",ovalLoader:"m_b34414df","oval-loader-animation":"m_f8e89c4b"};const aHe=I.forwardRef(({className:e,...t},n)=>b.jsxs(pe,{component:"span",className:Xi(Rf.barsLoader,e),...t,ref:n,children:[b.jsx("span",{className:Rf.bar}),b.jsx("span",{className:Rf.bar}),b.jsx("span",{className:Rf.bar})]})),uHe=I.forwardRef(({className:e,...t},n)=>b.jsxs(pe,{component:"span",className:Xi(Rf.dotsLoader,e),...t,ref:n,children:[b.jsx("span",{className:Rf.dot}),b.jsx("span",{className:Rf.dot}),b.jsx("span",{className:Rf.dot})]})),lHe=I.forwardRef(({className:e,...t},n)=>b.jsx(pe,{component:"span",className:Xi(Rf.ovalLoader,e),...t,ref:n})),Vbe={bars:aHe,oval:lHe,dots:uHe},cHe={loaders:Vbe,type:"oval"},fHe=(e,{size:t,color:n})=>({root:{"--loader-size":tn(t,"loader-size"),"--loader-color":n?$r(n,e):void 0}}),od=Me((e,t)=>{const n=xe("Loader",cHe,e),{size:r,color:i,type:s,vars:o,className:a,style:u,classNames:l,styles:c,unstyled:f,loaders:d,variant:h,children:p,...m}=n,g=dt({name:"Loader",props:n,classes:Rf,className:a,style:u,classNames:l,styles:c,unstyled:f,vars:o,varsResolver:fHe});return p?b.jsx(pe,{...g("root"),ref:t,...m,children:p}):b.jsx(pe,{...g("root"),ref:t,component:d[s],variant:h,size:r,...m})});od.defaultLoaders=Vbe;od.classes=Rf;od.displayName="@mantine/core/Loader";var kL={root:"m_8d3f4000",icon:"m_8d3afb97",loader:"m_302b9fb1",group:"m_1a0f1b21"};const Loe={orientation:"horizontal"},dHe=(e,{borderWidth:t})=>({group:{"--ai-border-width":Te(t)}}),uG=Me((e,t)=>{const n=xe("ActionIconGroup",Loe,e),{className:r,style:i,classNames:s,styles:o,unstyled:a,orientation:u,vars:l,borderWidth:c,variant:f,mod:d,...h}=xe("ActionIconGroup",Loe,e),p=dt({name:"ActionIconGroup",props:n,classes:kL,className:r,style:i,classNames:s,styles:o,unstyled:a,vars:l,varsResolver:dHe,rootSelector:"group"});return b.jsx(pe,{...p("group"),ref:t,variant:f,mod:[{"data-orientation":u},d],role:"group",...h})});uG.classes=kL;uG.displayName="@mantine/core/ActionIconGroup";const hHe={},pHe=(e,{size:t,radius:n,variant:r,gradient:i,color:s,autoContrast:o})=>{const a=e.variantColorResolver({color:s||e.primaryColor,theme:e,gradient:i,variant:r||"filled",autoContrast:o});return{root:{"--ai-size":tn(t,"ai-size"),"--ai-radius":n===void 0?void 0:Ur(n),"--ai-bg":s||r?a.background:void 0,"--ai-hover":s||r?a.hover:void 0,"--ai-hover-color":s||r?a.hoverColor:void 0,"--ai-color":a.color,"--ai-bd":s||r?a.border:void 0}}},Mb=Us((e,t)=>{const n=xe("ActionIcon",hHe,e),{className:r,unstyled:i,variant:s,classNames:o,styles:a,style:u,loading:l,loaderProps:c,size:f,color:d,radius:h,__staticSelector:p,gradient:m,vars:g,children:y,disabled:v,"data-disabled":_,autoContrast:w,mod:E,...S}=n,T=dt({name:["ActionIcon",p],props:n,className:r,style:u,classes:kL,classNames:o,styles:a,unstyled:i,vars:g,varsResolver:pHe});return b.jsxs(xs,{...T("root",{active:!v&&!l&&!_}),...S,unstyled:i,variant:s,size:f,disabled:v||l,ref:t,mod:[{loading:l,disabled:v||_},E],children:[b.jsx(Wm,{mounted:!!l,transition:"slide-down",duration:150,children:C=>b.jsx(pe,{component:"span",...T("loader",{style:C}),"aria-hidden":!0,children:b.jsx(od,{color:"var(--ai-color)",size:"calc(var(--ai-size) * 0.55)",...c})})}),b.jsx(pe,{component:"span",mod:{loading:l},...T("icon"),children:y})]})});Mb.classes=kL;Mb.displayName="@mantine/core/ActionIcon";Mb.Group=uG;const Hbe=I.forwardRef(({size:e="var(--cb-icon-size, 70%)",style:t,...n},r)=>b.jsx("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{...t,width:e,height:e},ref:r,...n,children:b.jsx("path",{d:"M11.7816 4.03157C12.0062 3.80702 12.0062 3.44295 11.7816 3.2184C11.5571 2.99385 11.193 2.99385 10.9685 3.2184L7.50005 6.68682L4.03164 3.2184C3.80708 2.99385 3.44301 2.99385 3.21846 3.2184C2.99391 3.44295 2.99391 3.80702 3.21846 4.03157L6.68688 7.49999L3.21846 10.9684C2.99391 11.193 2.99391 11.557 3.21846 11.7816C3.44301 12.0061 3.80708 12.0061 4.03164 11.7816L7.50005 8.31316L10.9685 11.7816C11.193 12.0061 11.5571 12.0061 11.7816 11.7816C12.0062 11.557 12.0062 11.193 11.7816 10.9684L8.31322 7.49999L11.7816 4.03157Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})}));Hbe.displayName="@mantine/core/CloseIcon";var qbe={root:"m_86a44da5","root--subtle":"m_220c80f2"};const mHe={variant:"subtle"},gHe=(e,{size:t,radius:n,iconSize:r})=>({root:{"--cb-size":tn(t,"cb-size"),"--cb-radius":n===void 0?void 0:Ur(n),"--cb-icon-size":Te(r)}}),Gm=Us((e,t)=>{const n=xe("CloseButton",mHe,e),{iconSize:r,children:i,vars:s,radius:o,className:a,classNames:u,style:l,styles:c,unstyled:f,"data-disabled":d,disabled:h,variant:p,icon:m,mod:g,...y}=n,v=dt({name:"CloseButton",props:n,className:a,style:l,classes:qbe,classNames:u,styles:c,unstyled:f,vars:s,varsResolver:gHe});return b.jsxs(xs,{ref:t,...y,unstyled:f,variant:p,disabled:h,mod:[{disabled:h||d},g],...v("root",{variant:p,active:!h&&!d}),children:[m||b.jsx(Hbe,{}),i]})});Gm.classes=qbe;Gm.displayName="@mantine/core/CloseButton";function yHe(e){return I.Children.toArray(e).filter(Boolean)}var Wbe={root:"m_4081bf90"};const vHe={preventGrowOverflow:!0,gap:"md",align:"center",justify:"flex-start",wrap:"wrap"},bHe=(e,{grow:t,preventGrowOverflow:n,gap:r,align:i,justify:s,wrap:o},{childWidth:a})=>({root:{"--group-child-width":t&&n?a:void 0,"--group-gap":as(r),"--group-align":i,"--group-justify":s,"--group-wrap":o}}),ls=Me((e,t)=>{const n=xe("Group",vHe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,children:u,gap:l,align:c,justify:f,wrap:d,grow:h,preventGrowOverflow:p,vars:m,variant:g,__size:y,mod:v,..._}=n,w=yHe(u),E=w.length,S=as(l??"md"),C={childWidth:`calc(${100/E}% - (${S} - ${S} / ${E}))`},A=dt({name:"Group",props:n,stylesCtx:C,className:i,style:s,classes:Wbe,classNames:r,styles:o,unstyled:a,vars:m,varsResolver:bHe});return b.jsx(pe,{...A("root"),ref:t,variant:g,mod:[{grow:h},v],size:y,..._,children:w})});ls.classes=Wbe;ls.displayName="@mantine/core/Group";var Gbe={root:"m_9814e45f"};const _He={zIndex:Zl("modal")},wHe=(e,{gradient:t,color:n,backgroundOpacity:r,blur:i,radius:s,zIndex:o})=>({root:{"--overlay-bg":t||(n!==void 0||r!==void 0)&&Nd(n||"#000",r??.6)||void 0,"--overlay-filter":i?`blur(${Te(i)})`:void 0,"--overlay-radius":s===void 0?void 0:Ur(s),"--overlay-z-index":o==null?void 0:o.toString()}}),IA=Us((e,t)=>{const n=xe("Overlay",_He,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,fixed:l,center:c,children:f,radius:d,zIndex:h,gradient:p,blur:m,color:g,backgroundOpacity:y,mod:v,..._}=n,w=dt({name:"Overlay",props:n,classes:Gbe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:wHe});return b.jsx(pe,{ref:t,...w("root"),mod:[{center:c,fixed:l},v],..._,children:f})});IA.classes=Gbe;IA.displayName="@mantine/core/Overlay";const[EHe,Ym]=fo("ModalBase component was not found in tree");function xHe({opened:e,transitionDuration:t}){const[n,r]=I.useState(e),i=I.useRef(),o=EL()?0:t;return I.useEffect(()=>(e?(r(!0),window.clearTimeout(i.current)):o===0?r(!1):i.current=window.setTimeout(()=>r(!1),o),()=>window.clearTimeout(i.current)),[e,o]),n}function SHe({id:e,transitionProps:t,opened:n,trapFocus:r,closeOnEscape:i,onClose:s,returnFocus:o}){const a=Ta(e),[u,l]=I.useState(!1),[c,f]=I.useState(!1),d=typeof(t==null?void 0:t.duration)=="number"?t==null?void 0:t.duration:200,h=xHe({opened:n,transitionDuration:d});return W1e("keydown",p=>{var m;p.key==="Escape"&&i&&n&&((m=p.target)==null?void 0:m.getAttribute("data-mantine-stop-propagation"))!=="true"&&s()},{capture:!0}),z1e({opened:n,shouldReturnFocus:r&&o}),{_id:a,titleMounted:u,bodyMounted:c,shouldLockScroll:h,setTitleMounted:l,setBodyMounted:f}}const Ybe=I.forwardRef(({keepMounted:e,opened:t,onClose:n,id:r,transitionProps:i,trapFocus:s,closeOnEscape:o,returnFocus:a,closeOnClickOutside:u,withinPortal:l,portalProps:c,lockScroll:f,children:d,zIndex:h,shadow:p,padding:m,__vars:g,unstyled:y,removeScrollProps:v,..._},w)=>{const{_id:E,titleMounted:S,bodyMounted:T,shouldLockScroll:C,setTitleMounted:A,setBodyMounted:k}=SHe({id:r,transitionProps:i,opened:t,trapFocus:s,closeOnEscape:o,onClose:n,returnFocus:a});return b.jsx(Jx,{...c,withinPortal:l,children:b.jsx(EHe,{value:{opened:t,onClose:n,closeOnClickOutside:u,transitionProps:{...i,keepMounted:e},getTitleId:()=>`${E}-title`,getBodyId:()=>`${E}-body`,titleMounted:S,bodyMounted:T,setTitleMounted:A,setBodyMounted:k,trapFocus:s,closeOnEscape:o,zIndex:h,unstyled:y},children:b.jsx(_L,{enabled:C&&f,...v,children:b.jsx(pe,{ref:w,..._,__vars:{...g,"--mb-z-index":(h||Zl("modal")).toString(),"--mb-shadow":DW(p),"--mb-padding":as(m)},children:d})})})})});function THe(){const e=Ym();return I.useEffect(()=>(e.setBodyMounted(!0),()=>e.setBodyMounted(!1)),[]),e.getBodyId()}var $E={title:"m_615af6c9",header:"m_b5489c3c",inner:"m_60c222c7",content:"m_fd1ab0aa",close:"m_606cb269",body:"m_5df29311"};const lG=I.forwardRef(({className:e,...t},n)=>{const r=THe(),i=Ym();return b.jsx(pe,{ref:n,...t,id:r,className:Xi({[$E.body]:!i.unstyled},e)})});lG.displayName="@mantine/core/ModalBaseBody";const cG=I.forwardRef(({className:e,onClick:t,...n},r)=>{const i=Ym();return b.jsx(Gm,{ref:r,...n,onClick:s=>{i.onClose(),t==null||t(s)},className:Xi({[$E.close]:!i.unstyled},e),unstyled:i.unstyled})});cG.displayName="@mantine/core/ModalBaseCloseButton";const Kbe=I.forwardRef(({transitionProps:e,className:t,innerProps:n,onKeyDown:r,style:i,...s},o)=>{const a=Ym();return b.jsx(Wm,{mounted:a.opened,transition:"pop",...a.transitionProps,...e,children:u=>b.jsx("div",{...n,className:Xi({[$E.inner]:!a.unstyled},n.className),children:b.jsx(IL,{active:a.opened&&a.trapFocus,children:b.jsx(Ob,{...s,component:"section",role:"dialog",tabIndex:-1,"aria-modal":!0,"aria-describedby":a.bodyMounted?a.getBodyId():void 0,"aria-labelledby":a.titleMounted?a.getTitleId():void 0,ref:o,style:[i,u],className:Xi({[$E.content]:!a.unstyled},t),unstyled:a.unstyled,children:s.children})})})})}),fG=I.forwardRef(({className:e,...t},n)=>{const r=Ym();return b.jsx(pe,{component:"header",ref:n,className:Xi({[$E.header]:!r.unstyled},e),...t})});fG.displayName="@mantine/core/ModalBaseHeader";const CHe={duration:200,timingFunction:"ease",transition:"fade"};function AHe(e){const t=Ym();return{...CHe,...t.transitionProps,...e}}const dG=I.forwardRef(({onClick:e,transitionProps:t,style:n,...r},i)=>{const s=Ym(),o=AHe(t);return b.jsx(Wm,{mounted:s.opened,...o,transition:"fade",children:a=>b.jsx(IA,{ref:i,fixed:!0,style:[n,a],zIndex:s.zIndex,unstyled:s.unstyled,onClick:u=>{e==null||e(u),s.closeOnClickOutside&&s.onClose()},...r})})});dG.displayName="@mantine/core/ModalBaseOverlay";function IHe(){const e=Ym();return I.useEffect(()=>(e.setTitleMounted(!0),()=>e.setTitleMounted(!1)),[]),e.getTitleId()}const hG=I.forwardRef(({className:e,...t},n)=>{const r=IHe(),i=Ym();return b.jsx(pe,{component:"h2",ref:n,className:Xi({[$E.title]:!i.unstyled},e),...t,id:r})});hG.displayName="@mantine/core/ModalBaseTitle";function Xbe({children:e}){return b.jsx(b.Fragment,{children:e})}const[kHe,Zx]=Yx({offsetBottom:!1,offsetTop:!1,describedBy:void 0,getStyles:null,inputId:void 0,labelId:void 0});var qc={wrapper:"m_6c018570",input:"m_8fb7ebe7",section:"m_82577fc2",placeholder:"m_88bacfd0",root:"m_46b77525",label:"m_8fdc1311",required:"m_78a94662",error:"m_8f816625",description:"m_fe47ce59"};const Foe={},RHe=(e,{size:t})=>({description:{"--input-description-size":t===void 0?void 0:`calc(${uo(t)} - ${Te(2)})`}}),RL=Me((e,t)=>{const n=xe("InputDescription",Foe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,size:l,__staticSelector:c,__inheritStyles:f=!0,variant:d,...h}=xe("InputDescription",Foe,n),p=Zx(),m=dt({name:["InputWrapper",c],props:n,classes:qc,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"description",vars:u,varsResolver:RHe}),g=f&&(p==null?void 0:p.getStyles)||m;return b.jsx(pe,{component:"p",ref:t,variant:d,size:l,...g("description",p!=null&&p.getStyles?{className:i,style:s}:void 0),...h})});RL.classes=qc;RL.displayName="@mantine/core/InputDescription";const NHe={},PHe=(e,{size:t})=>({error:{"--input-error-size":t===void 0?void 0:`calc(${uo(t)} - ${Te(2)})`}}),NL=Me((e,t)=>{const n=xe("InputError",NHe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,size:l,__staticSelector:c,__inheritStyles:f=!0,variant:d,...h}=n,p=dt({name:["InputWrapper",c],props:n,classes:qc,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"error",vars:u,varsResolver:PHe}),m=Zx(),g=f&&(m==null?void 0:m.getStyles)||p;return b.jsx(pe,{component:"p",ref:t,variant:d,size:l,...g("error",m!=null&&m.getStyles?{className:i,style:s}:void 0),...h})});NL.classes=qc;NL.displayName="@mantine/core/InputError";const joe={labelElement:"label"},DHe=(e,{size:t})=>({label:{"--input-label-size":uo(t),"--input-asterisk-color":void 0}}),PL=Me((e,t)=>{const n=xe("InputLabel",joe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,labelElement:l,size:c,required:f,htmlFor:d,onMouseDown:h,children:p,__staticSelector:m,variant:g,mod:y,...v}=xe("InputLabel",joe,n),_=dt({name:["InputWrapper",m],props:n,classes:qc,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"label",vars:u,varsResolver:DHe}),w=Zx(),E=(w==null?void 0:w.getStyles)||_;return b.jsxs(pe,{...E("label",w!=null&&w.getStyles?{className:i,style:s}:void 0),component:l,variant:g,size:c,ref:t,htmlFor:l==="label"?d:void 0,mod:[{required:f},y],onMouseDown:S=>{h==null||h(S),!S.defaultPrevented&&S.detail>1&&S.preventDefault()},...v,children:[p,f&&b.jsx("span",{...E("required"),"aria-hidden":!0,children:" *"})]})});PL.classes=qc;PL.displayName="@mantine/core/InputLabel";const Boe={},pG=Me((e,t)=>{const n=xe("InputPlaceholder",Boe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,__staticSelector:l,variant:c,error:f,mod:d,...h}=xe("InputPlaceholder",Boe,n),p=dt({name:["InputPlaceholder",l],props:n,classes:qc,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"placeholder"});return b.jsx(pe,{...p("placeholder"),mod:[{error:!!f},d],component:"span",variant:c,ref:t,...h})});pG.classes=qc;pG.displayName="@mantine/core/InputPlaceholder";function OHe(e,{hasDescription:t,hasError:n}){const r=e.findIndex(u=>u==="input"),i=e.slice(0,r),s=e.slice(r+1),o=t&&i.includes("description")||n&&i.includes("error");return{offsetBottom:t&&s.includes("description")||n&&s.includes("error"),offsetTop:o}}const $He={labelElement:"label",inputContainer:e=>e,inputWrapperOrder:["label","description","input","error"]},MHe=(e,{size:t})=>({label:{"--input-label-size":uo(t),"--input-asterisk-color":void 0},error:{"--input-error-size":t===void 0?void 0:`calc(${uo(t)} - ${Te(2)})`},description:{"--input-description-size":t===void 0?void 0:`calc(${uo(t)} - ${Te(2)})`}}),mG=Me((e,t)=>{const n=xe("InputWrapper",$He,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,size:l,variant:c,__staticSelector:f,inputContainer:d,inputWrapperOrder:h,label:p,error:m,description:g,labelProps:y,descriptionProps:v,errorProps:_,labelElement:w,children:E,withAsterisk:S,id:T,required:C,__stylesApiProps:A,mod:k,...N}=n,O=dt({name:["InputWrapper",f],props:A||n,classes:qc,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:MHe}),D={size:l,variant:c,__staticSelector:f},$=Ta(T),F=typeof S=="boolean"?S:C,M=(_==null?void 0:_.id)||`${$}-error`,B=(v==null?void 0:v.id)||`${$}-description`,U=$,H=!!m&&typeof m!="boolean",P=!!g,z=`${H?M:""} ${P?B:""}`,W=z.trim().length>0?z.trim():void 0,j=(y==null?void 0:y.id)||`${$}-label`,q=p&&b.jsx(PL,{labelElement:w,id:j,htmlFor:U,required:F,...D,...y,children:p},"label"),G=P&&b.jsx(RL,{...v,...D,size:(v==null?void 0:v.size)||D.size,id:(v==null?void 0:v.id)||B,children:g},"description"),ne=b.jsx(I.Fragment,{children:d(E)},"input"),ce=H&&I.createElement(NL,{..._,...D,size:(_==null?void 0:_.size)||D.size,key:"error",id:(_==null?void 0:_.id)||M},m),de=h.map(he=>{switch(he){case"label":return q;case"input":return ne;case"description":return G;case"error":return ce;default:return null}});return b.jsx(kHe,{value:{getStyles:O,describedBy:W,inputId:U,labelId:j,...OHe(h,{hasDescription:P,hasError:H})},children:b.jsx(pe,{ref:t,variant:c,size:l,mod:[{error:!!m},k],...O("root"),...N,children:de})})});mG.classes=qc;mG.displayName="@mantine/core/InputWrapper";const LHe={variant:"default",leftSectionPointerEvents:"none",rightSectionPointerEvents:"none",withAria:!0,withErrorStyles:!0},FHe=(e,t,n)=>({wrapper:{"--input-margin-top":n.offsetTop?"calc(var(--mantine-spacing-xs) / 2)":void 0,"--input-margin-bottom":n.offsetBottom?"calc(var(--mantine-spacing-xs) / 2)":void 0,"--input-height":tn(t.size,"input-height"),"--input-fz":uo(t.size),"--input-radius":t.radius===void 0?void 0:Ur(t.radius),"--input-left-section-width":t.leftSectionWidth!==void 0?Te(t.leftSectionWidth):void 0,"--input-right-section-width":t.rightSectionWidth!==void 0?Te(t.rightSectionWidth):void 0,"--input-padding-y":t.multiline?tn(t.size,"input-padding-y"):void 0,"--input-left-section-pointer-events":t.leftSectionPointerEvents,"--input-right-section-pointer-events":t.rightSectionPointerEvents}}),mi=Us((e,t)=>{const n=xe("Input",LHe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,required:u,__staticSelector:l,__stylesApiProps:c,size:f,wrapperProps:d,error:h,disabled:p,leftSection:m,leftSectionProps:g,leftSectionWidth:y,rightSection:v,rightSectionProps:_,rightSectionWidth:w,rightSectionPointerEvents:E,leftSectionPointerEvents:S,variant:T,vars:C,pointer:A,multiline:k,radius:N,id:O,withAria:D,withErrorStyles:$,mod:F,inputSize:M,...B}=n,{styleProps:U,rest:H}=Db(B),P=Zx(),z={offsetBottom:P==null?void 0:P.offsetBottom,offsetTop:P==null?void 0:P.offsetTop},W=dt({name:["Input",l],props:c||n,classes:qc,className:i,style:s,classNames:r,styles:o,unstyled:a,stylesCtx:z,rootSelector:"wrapper",vars:C,varsResolver:FHe}),j=D?{required:u,disabled:p,"aria-invalid":!!h,"aria-describedby":P==null?void 0:P.describedBy,id:(P==null?void 0:P.inputId)||O}:{};return b.jsxs(pe,{...W("wrapper"),...U,...d,mod:[{error:!!h&&$,pointer:A,disabled:p,multiline:k,"data-with-right-section":!!v,"data-with-left-section":!!m},F],variant:T,size:f,children:[m&&b.jsx("div",{...g,"data-position":"left",...W("section",{className:g==null?void 0:g.className,style:g==null?void 0:g.style}),children:m}),b.jsx(pe,{component:"input",...H,...j,ref:t,required:u,mod:{disabled:p,error:!!h&&$},variant:T,__size:M,...W("input")}),v&&b.jsx("div",{..._,"data-position":"right",...W("section",{className:_==null?void 0:_.className,style:_==null?void 0:_.style}),children:v})]})});mi.classes=qc;mi.Wrapper=mG;mi.Label=PL;mi.Error=NL;mi.Description=RL;mi.Placeholder=pG;mi.displayName="@mantine/core/Input";function Qbe(e,t,n){const r=xe(e,t,n),{label:i,description:s,error:o,required:a,classNames:u,styles:l,className:c,unstyled:f,__staticSelector:d,__stylesApiProps:h,errorProps:p,labelProps:m,descriptionProps:g,wrapperProps:y,id:v,size:_,style:w,inputContainer:E,inputWrapperOrder:S,withAsterisk:T,variant:C,vars:A,mod:k,...N}=r,{styleProps:O,rest:D}=Db(N),$={label:i,description:s,error:o,required:a,classNames:u,className:c,__staticSelector:d,__stylesApiProps:h||r,errorProps:p,labelProps:m,descriptionProps:g,unstyled:f,styles:l,size:_,style:w,inputContainer:E,inputWrapperOrder:S,withAsterisk:T,variant:C,id:v,mod:k,...y};return{...D,classNames:u,styles:l,unstyled:f,wrapperProps:{...$,...O},inputProps:{required:a,classNames:u,styles:l,unstyled:f,size:_,__staticSelector:d,__stylesApiProps:h||r,error:o,variant:C,id:v}}}const jHe={__staticSelector:"InputBase",withAria:!0},Wc=Us((e,t)=>{const{inputProps:n,wrapperProps:r,...i}=Qbe("InputBase",jHe,e);return b.jsx(mi.Wrapper,{...r,children:b.jsx(mi,{...n,...i,ref:t})})});Wc.classes={...mi.classes,...mi.Wrapper.classes};Wc.displayName="@mantine/core/InputBase";const BHe={gap:{type:"spacing",property:"gap"},rowGap:{type:"spacing",property:"rowGap"},columnGap:{type:"spacing",property:"columnGap"},align:{type:"identity",property:"alignItems"},justify:{type:"identity",property:"justifyContent"},wrap:{type:"identity",property:"flexWrap"},direction:{type:"identity",property:"flexDirection"}};var Jbe={root:"m_8bffd616"};const UHe={},Nt=Us((e,t)=>{const n=xe("Flex",UHe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,gap:l,rowGap:c,columnGap:f,align:d,justify:h,wrap:p,direction:m,...g}=n,y=dt({name:"Flex",classes:Jbe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u}),v=ps(),_=ak(),w=nbe({styleProps:{gap:l,rowGap:c,columnGap:f,align:d,justify:h,wrap:p,direction:m},theme:v,data:BHe});return b.jsxs(b.Fragment,{children:[w.hasResponsiveStyles&&b.jsx(Pb,{selector:`.${_}`,styles:w.styles,media:w.media}),b.jsx(pe,{ref:t,...y("root",{className:_,style:Iy(w.inlineStyles)}),...g})]})});Nt.classes=Jbe;Nt.displayName="@mantine/core/Flex";function zHe(e,t){if(!t||!e)return!1;let n=t.parentNode;for(;n!=null;){if(n===e)return!0;n=n.parentNode}return!1}function VHe({target:e,parent:t,ref:n,displayAfterTransitionEnd:r}){const i=I.useRef(),[s,o]=I.useState(!1),[a,u]=I.useState(typeof r=="boolean"?r:!1),l=()=>{if(!e||!t)return;const h=e.getBoundingClientRect(),p=t.getBoundingClientRect(),m={top:h.top-p.top,left:h.left-p.left,width:h.width,height:h.height};n.current&&(n.current.style.transform=`translateY(${m.top}px) translateX(${m.left}px)`,n.current.style.width=`${m.width}px`,n.current.style.height=`${m.height}px`)},c=()=>{window.clearTimeout(i.current),n.current&&(n.current.style.transitionDuration="0ms"),l(),i.current=window.setTimeout(()=>{n.current&&(n.current.style.transitionDuration="")},30)},f=I.useRef(),d=I.useRef();return I.useEffect(()=>{if(l(),e)return f.current=new ResizeObserver(c),f.current.observe(e),t&&(d.current=new ResizeObserver(c),d.current.observe(t)),()=>{var h,p;(h=f.current)==null||h.disconnect(),(p=d.current)==null||p.disconnect()}},[t,e]),I.useEffect(()=>{if(t){const h=p=>{zHe(p.target,t)&&(c(),u(!1))};return document.addEventListener("transitionend",h),()=>{document.removeEventListener("transitionend",h)}}},[t]),qUe(()=>{K1e()!=="test"&&o(!0)},20,{autoInvoke:!0}),WUe(h=>{h.forEach(p=>{p.type==="attributes"&&p.attributeName==="dir"&&c()})},{attributes:!0,attributeFilter:["dir"]},()=>document.documentElement),{initialized:s,hidden:a}}var Zbe={root:"m_96b553a6"};const HHe={},qHe=(e,{transitionDuration:t})=>({root:{"--transition-duration":typeof t=="number"?`${t}ms`:t}}),gG=Me((e,t)=>{const n=xe("FloatingIndicator",HHe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,target:l,parent:c,transitionDuration:f,mod:d,displayAfterTransitionEnd:h,...p}=n,m=dt({name:"FloatingIndicator",classes:Zbe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:qHe}),g=I.useRef(null),{initialized:y,hidden:v}=VHe({target:l,parent:c,ref:g,displayAfterTransitionEnd:h}),_=hs(t,g);return!l||!c?null:b.jsx(pe,{ref:_,mod:[{initialized:y,hidden:v},d],...m("root"),...p})});gG.displayName="@mantine/core/FloatingIndicator";gG.classes=Zbe;const[WHe,yG]=fo("Accordion component was not found in the tree");function ME({style:e,size:t=16,...n}){return b.jsx("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{...e,width:Te(t),height:Te(t),display:"block"},...n,children:b.jsx("path",{d:"M3.13523 6.15803C3.3241 5.95657 3.64052 5.94637 3.84197 6.13523L7.5 9.56464L11.158 6.13523C11.3595 5.94637 11.6759 5.95657 11.8648 6.15803C12.0536 6.35949 12.0434 6.67591 11.842 6.86477L7.84197 10.6148C7.64964 10.7951 7.35036 10.7951 7.15803 10.6148L3.15803 6.86477C2.95657 6.67591 2.94637 6.35949 3.13523 6.15803Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}ME.displayName="@mantine/core/AccordionChevron";const[GHe,e_e]=fo("Accordion.Item component was not found in the tree");var lk={root:"m_9bdbb667",panel:"m_df78851f",content:"m_4ba554d4",itemTitle:"m_8fa820a0",control:"m_4ba585b8","control--default":"m_6939a5e9","control--contained":"m_4271d21b",label:"m_df3ffa0f",chevron:"m_3f35ae96",icon:"m_9bd771fe",item:"m_9bd7b098","item--default":"m_fe19b709","item--contained":"m_1f921b3b","item--filled":"m_2cdf939a","item--separated":"m_9f59b069"};const YHe={},vG=Me((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,chevron:a,icon:u,onClick:l,onKeyDown:c,children:f,disabled:d,mod:h,...p}=xe("AccordionControl",YHe,e),{value:m}=e_e(),g=yG(),y=g.isItemActive(m),v=typeof g.order=="number",_=`h${g.order}`,w=b.jsxs(xs,{...p,...g.getStyles("control",{className:r,classNames:n,style:i,styles:s,variant:g.variant}),unstyled:g.unstyled,mod:["accordion-control",{active:y,"chevron-position":g.chevronPosition,disabled:d},h],ref:t,onClick:E=>{l==null||l(E),g.onChange(m)},type:"button",disabled:d,"aria-expanded":y,"aria-controls":g.getRegionId(m),id:g.getControlId(m),onKeyDown:PW({siblingSelector:"[data-accordion-control]",parentSelector:"[data-accordion]",activateOnFocus:!1,loop:g.loop,orientation:"vertical",onKeyDown:c}),children:[b.jsx(pe,{component:"span",mod:{rotate:!g.disableChevronRotation&&y,position:g.chevronPosition},...g.getStyles("chevron",{classNames:n,styles:s}),children:a||g.chevron}),b.jsx("span",{...g.getStyles("label",{classNames:n,styles:s}),children:f}),u&&b.jsx(pe,{component:"span",mod:{"chevron-position":g.chevronPosition},...g.getStyles("icon",{classNames:n,styles:s}),children:u})]});return v?b.jsx(_,{...g.getStyles("itemTitle",{classNames:n,styles:s}),children:w}):w});vG.displayName="@mantine/core/AccordionControl";vG.classes=lk;const KHe={},bG=Me((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,value:a,mod:u,...l}=xe("AccordionItem",KHe,e),c=yG();return b.jsx(GHe,{value:{value:a},children:b.jsx(pe,{ref:t,mod:[{active:c.isItemActive(a)},u],...c.getStyles("item",{className:r,classNames:n,styles:s,style:i,variant:c.variant}),...l})})});bG.displayName="@mantine/core/AccordionItem";bG.classes=lk;const XHe={},_G=Me((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,children:a,...u}=xe("AccordionPanel",XHe,e),{value:l}=e_e(),c=yG();return b.jsx(TL,{ref:t,...c.getStyles("panel",{className:r,classNames:n,style:i,styles:s}),...u,in:c.isItemActive(l),transitionDuration:c.transitionDuration??200,role:"region",id:c.getRegionId(l),"aria-labelledby":c.getControlId(l),children:b.jsx("div",{...c.getStyles("content",{classNames:n,styles:s}),children:a})})});_G.displayName="@mantine/core/AccordionPanel";_G.classes=lk;const QHe={multiple:!1,disableChevronRotation:!1,chevronPosition:"right",variant:"default",chevron:b.jsx(ME,{})},JHe=(e,{transitionDuration:t,chevronSize:n,radius:r})=>({root:{"--accordion-transition-duration":t===void 0?void 0:`${t}ms`,"--accordion-chevron-size":n===void 0?void 0:Te(n),"--accordion-radius":r===void 0?void 0:Ur(r)}});function Eu(e){const t=xe("Accordion",QHe,e),{classNames:n,className:r,style:i,styles:s,unstyled:o,vars:a,children:u,multiple:l,value:c,defaultValue:f,onChange:d,id:h,loop:p,transitionDuration:m,disableChevronRotation:g,chevronPosition:y,chevronSize:v,order:_,chevron:w,variant:E,radius:S,...T}=t,C=Ta(h),[A,k]=Ss({value:c,defaultValue:f,finalValue:l?[]:null,onChange:d}),N=$=>Array.isArray(A)?A.includes($):$===A,O=$=>{const F=Array.isArray(A)?A.includes($)?A.filter(M=>M!==$):[...A,$]:$===A?null:$;k(F)},D=dt({name:"Accordion",classes:lk,props:t,className:r,style:i,classNames:n,styles:s,unstyled:o,vars:a,varsResolver:JHe});return b.jsx(WHe,{value:{isItemActive:N,onChange:O,getControlId:UO(`${C}-control`,"Accordion.Item component was rendered with invalid value or without value"),getRegionId:UO(`${C}-panel`,"Accordion.Item component was rendered with invalid value or without value"),transitionDuration:m,disableChevronRotation:g,chevronPosition:y,order:_,chevron:w,loop:p,getStyles:D,variant:E,unstyled:o},children:b.jsx(pe,{...D("root"),id:C,...T,variant:E,"data-accordion":!0,children:u})})}const ZHe=e=>e;Eu.extend=ZHe;Eu.classes=lk;Eu.displayName="@mantine/core/Accordion";Eu.Item=bG;Eu.Panel=_G;Eu.Control=vG;Eu.Chevron=ME;var t_e={root:"m_66836ed3",wrapper:"m_a5d60502",body:"m_667c2793",title:"m_6a03f287",label:"m_698f4f23",icon:"m_667f2a6a",message:"m_7fa78076",closeButton:"m_87f54839"};const eqe={},tqe=(e,{radius:t,color:n,variant:r,autoContrast:i})=>{const s=e.variantColorResolver({color:n||e.primaryColor,theme:e,variant:r||"light",autoContrast:i});return{root:{"--alert-radius":t===void 0?void 0:Ur(t),"--alert-bg":n||r?s.background:void 0,"--alert-color":s.color,"--alert-bd":n||r?s.border:void 0}}},eS=Me((e,t)=>{const n=xe("Alert",eqe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,radius:l,color:c,title:f,children:d,id:h,icon:p,withCloseButton:m,onClose:g,closeButtonLabel:y,variant:v,autoContrast:_,...w}=n,E=dt({name:"Alert",classes:t_e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:tqe}),S=Ta(h),T=f&&`${S}-title`||void 0,C=`${S}-body`;return b.jsx(pe,{id:S,...E("root",{variant:v}),variant:v,ref:t,...w,role:"alert","aria-describedby":C,"aria-labelledby":T,children:b.jsxs("div",{...E("wrapper"),children:[p&&b.jsx("div",{...E("icon"),children:p}),b.jsxs("div",{...E("body"),children:[f&&b.jsx("div",{...E("title"),"data-with-close-button":m||void 0,children:b.jsx("span",{id:T,...E("label"),children:f})}),d&&b.jsx("div",{id:C,...E("message"),"data-variant":v,children:d})]}),m&&b.jsx(Gm,{...E("closeButton"),onClick:g,variant:"transparent",size:16,iconSize:16,"aria-label":y,unstyled:a})]})})});eS.classes=t_e;eS.displayName="@mantine/core/Alert";var n_e={root:"m_b6d8b162"};function nqe(e){if(e==="start")return"start";if(e==="end"||e)return"end"}const rqe={inherit:!1},iqe=(e,{variant:t,lineClamp:n,gradient:r,size:i,color:s})=>({root:{"--text-fz":uo(i),"--text-lh":U1e(i),"--text-gradient":t==="gradient"?qU(r,e):void 0,"--text-line-clamp":typeof n=="number"?n.toString():void 0,"--text-color":s?$r(s,e):void 0}}),Xe=Us((e,t)=>{const n=xe("Text",rqe,e),{lineClamp:r,truncate:i,inline:s,inherit:o,gradient:a,span:u,__staticSelector:l,vars:c,className:f,style:d,classNames:h,styles:p,unstyled:m,variant:g,mod:y,size:v,..._}=n,w=dt({name:["Text",l],props:n,classes:n_e,className:f,style:d,classNames:h,styles:p,unstyled:m,vars:c,varsResolver:iqe});return b.jsx(pe,{...w("root",{focusable:!0}),ref:t,component:u?"span":"p",variant:g,mod:[{"data-truncate":nqe(i),"data-line-clamp":typeof r=="number","data-inline":s,"data-inherit":o},y],size:v,..._})});Xe.classes=n_e;Xe.displayName="@mantine/core/Text";var r_e={root:"m_849cf0da"};const sqe={underline:"hover"},Lb=Us((e,t)=>{const{underline:n,className:r,unstyled:i,mod:s,...o}=xe("Anchor",sqe,e);return b.jsx(Xe,{component:"a",ref:t,className:Xi({[r_e.root]:!i},r),...o,mod:[{underline:n},s],__staticSelector:"Anchor",unstyled:i})});Lb.classes=r_e;Lb.displayName="@mantine/core/Anchor";const[oqe,tS]=fo("AppShell was not found in tree");var Py={root:"m_89ab340",navbar:"m_45252eee",aside:"m_9cdde9a",header:"m_3b16f56b",main:"m_8983817",footer:"m_3840c879",section:"m_6dcfc7c7"};const aqe={},wG=Me((e,t)=>{const n=xe("AppShellAside",aqe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,withBorder:l,zIndex:c,mod:f,...d}=n,h=tS();return h.disabled?null:b.jsx(pe,{component:"aside",ref:t,mod:[{"with-border":l??h.withBorder},f],...h.getStyles("aside",{className:i,classNames:r,styles:o,style:s}),...d,__vars:{"--app-shell-aside-z-index":`calc(${c??h.zIndex} + 1)`}})});wG.classes=Py;wG.displayName="@mantine/core/AppShellAside";const uqe={},EG=Me((e,t)=>{var p;const n=xe("AppShellFooter",uqe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,withBorder:l,zIndex:c,mod:f,...d}=n,h=tS();return h.disabled?null:b.jsx(pe,{component:"footer",ref:t,mod:[{"with-border":l??h.withBorder},f],...h.getStyles("footer",{className:Xi({[_L.classNames.zeroRight]:h.offsetScrollbars},i),classNames:r,styles:o,style:s}),...d,__vars:{"--app-shell-footer-z-index":(p=c??h.zIndex)==null?void 0:p.toString()}})});EG.classes=Py;EG.displayName="@mantine/core/AppShellFooter";const lqe={},xG=Me((e,t)=>{var p;const n=xe("AppShellHeader",lqe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,withBorder:l,zIndex:c,mod:f,...d}=n,h=tS();return h.disabled?null:b.jsx(pe,{component:"header",ref:t,mod:[{"with-border":l??h.withBorder},f],...h.getStyles("header",{className:Xi({[_L.classNames.zeroRight]:h.offsetScrollbars},i),classNames:r,styles:o,style:s}),...d,__vars:{"--app-shell-header-z-index":(p=c??h.zIndex)==null?void 0:p.toString()}})});xG.classes=Py;xG.displayName="@mantine/core/AppShellHeader";const cqe={},SG=Me((e,t)=>{const n=xe("AppShellMain",cqe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=tS();return b.jsx(pe,{component:"main",ref:t,...l.getStyles("main",{className:i,style:s,classNames:r,styles:o}),...u})});SG.classes=Py;SG.displayName="@mantine/core/AppShellMain";function ck(e){return typeof e=="object"?e.base:e}function fk(e){const t=typeof e=="object"&&e!==null&&typeof e.base<"u"&&Object.keys(e).length===1;return typeof e=="number"||typeof e=="string"||t}function dk(e){return!(typeof e!="object"||e===null||Object.keys(e).length===1&&"base"in e)}function fqe({baseStyles:e,minMediaStyles:t,maxMediaStyles:n,aside:r,theme:i}){var u,l,c;const s=r==null?void 0:r.width,o="translateX(var(--app-shell-aside-width))",a="translateX(calc(var(--app-shell-aside-width) * -1))";if(r!=null&&r.breakpoint&&!((u=r==null?void 0:r.collapsed)!=null&&u.mobile)&&(n[r==null?void 0:r.breakpoint]=n[r==null?void 0:r.breakpoint]||{},n[r==null?void 0:r.breakpoint]["--app-shell-aside-width"]="100%",n[r==null?void 0:r.breakpoint]["--app-shell-aside-offset"]="0px"),fk(s)){const f=Te(ck(s));e["--app-shell-aside-width"]=f,e["--app-shell-aside-offset"]=f}if(dk(s)&&(typeof s.base<"u"&&(e["--app-shell-aside-width"]=Te(s.base),e["--app-shell-aside-offset"]=Te(s.base)),Xr(s).forEach(f=>{f!=="base"&&(t[f]=t[f]||{},t[f]["--app-shell-aside-width"]=Te(s[f]),t[f]["--app-shell-aside-offset"]=Te(s[f]))})),(l=r==null?void 0:r.collapsed)!=null&&l.desktop){const f=r.breakpoint;t[f]=t[f]||{},t[f]["--app-shell-aside-transform"]=o,t[f]["--app-shell-aside-transform-rtl"]=a,t[f]["--app-shell-aside-offset"]="0px !important"}if((c=r==null?void 0:r.collapsed)!=null&&c.mobile){const f=OW(r.breakpoint,i)-.1;n[f]=n[f]||{},n[f]["--app-shell-aside-width"]="100%",n[f]["--app-shell-aside-offset"]="0px",n[f]["--app-shell-aside-transform"]=o,n[f]["--app-shell-aside-transform-rtl"]=a}}function dqe({baseStyles:e,minMediaStyles:t,footer:n}){const r=n==null?void 0:n.height,i="translateY(var(--app-shell-footer-height))",s=(n==null?void 0:n.offset)??!0;if(fk(r)){const o=Te(ck(r));e["--app-shell-footer-height"]=o,s&&(e["--app-shell-footer-offset"]=o)}dk(r)&&(typeof r.base<"u"&&(e["--app-shell-footer-height"]=Te(r.base),s&&(e["--app-shell-footer-offset"]=Te(r.base))),Xr(r).forEach(o=>{o!=="base"&&(t[o]=t[o]||{},t[o]["--app-shell-footer-height"]=Te(r[o]),s&&(t[o]["--app-shell-footer-offset"]=Te(r[o])))})),n!=null&&n.collapsed&&(e["--app-shell-footer-transform"]=i,e["--app-shell-footer-offset"]="0px !important")}function hqe({baseStyles:e,minMediaStyles:t,header:n}){const r=n==null?void 0:n.height,i="translateY(calc(var(--app-shell-header-height) * -1))",s=(n==null?void 0:n.offset)??!0;if(fk(r)){const o=Te(ck(r));e["--app-shell-header-height"]=o,s&&(e["--app-shell-header-offset"]=o)}dk(r)&&(typeof r.base<"u"&&(e["--app-shell-header-height"]=Te(r.base),s&&(e["--app-shell-header-offset"]=Te(r.base))),Xr(r).forEach(o=>{o!=="base"&&(t[o]=t[o]||{},t[o]["--app-shell-header-height"]=Te(r[o]),s&&(t[o]["--app-shell-header-offset"]=Te(r[o])))})),n!=null&&n.collapsed&&(e["--app-shell-header-transform"]=i,e["--app-shell-header-offset"]="0px !important")}function pqe({baseStyles:e,minMediaStyles:t,maxMediaStyles:n,navbar:r,theme:i}){var u,l,c;const s=r==null?void 0:r.width,o="translateX(calc(var(--app-shell-navbar-width) * -1))",a="translateX(var(--app-shell-navbar-width))";if(r!=null&&r.breakpoint&&!((u=r==null?void 0:r.collapsed)!=null&&u.mobile)&&(n[r==null?void 0:r.breakpoint]=n[r==null?void 0:r.breakpoint]||{},n[r==null?void 0:r.breakpoint]["--app-shell-navbar-width"]="100%",n[r==null?void 0:r.breakpoint]["--app-shell-navbar-offset"]="0px"),fk(s)){const f=Te(ck(s));e["--app-shell-navbar-width"]=f,e["--app-shell-navbar-offset"]=f}if(dk(s)&&(typeof s.base<"u"&&(e["--app-shell-navbar-width"]=Te(s.base),e["--app-shell-navbar-offset"]=Te(s.base)),Xr(s).forEach(f=>{f!=="base"&&(t[f]=t[f]||{},t[f]["--app-shell-navbar-width"]=Te(s[f]),t[f]["--app-shell-navbar-offset"]=Te(s[f]))})),(l=r==null?void 0:r.collapsed)!=null&&l.desktop){const f=r.breakpoint;t[f]=t[f]||{},t[f]["--app-shell-navbar-transform"]=o,t[f]["--app-shell-navbar-transform-rtl"]=a,t[f]["--app-shell-navbar-offset"]="0px !important"}if((c=r==null?void 0:r.collapsed)!=null&&c.mobile){const f=OW(r.breakpoint,i)-.1;n[f]=n[f]||{},n[f]["--app-shell-navbar-width"]="100%",n[f]["--app-shell-navbar-offset"]="0px",n[f]["--app-shell-navbar-transform"]=o,n[f]["--app-shell-navbar-transform-rtl"]=a}}function Vj(e){return Number(e)===0?"0px":as(e)}function mqe({padding:e,baseStyles:t,minMediaStyles:n}){fk(e)&&(t["--app-shell-padding"]=Vj(ck(e))),dk(e)&&(e.base&&(t["--app-shell-padding"]=Vj(e.base)),Xr(e).forEach(r=>{r!=="base"&&(n[r]=n[r]||{},n[r]["--app-shell-padding"]=Vj(e[r]))}))}function gqe({navbar:e,header:t,footer:n,aside:r,padding:i,theme:s}){const o={},a={},u={};pqe({baseStyles:u,minMediaStyles:o,maxMediaStyles:a,navbar:e,theme:s}),fqe({baseStyles:u,minMediaStyles:o,maxMediaStyles:a,aside:r,theme:s}),hqe({baseStyles:u,minMediaStyles:o,header:t}),dqe({baseStyles:u,minMediaStyles:o,footer:n}),mqe({baseStyles:u,minMediaStyles:o,padding:i});const l=TA(Xr(o),s).map(d=>({query:`(min-width: ${BO(d.px)})`,styles:o[d.value]})),c=TA(Xr(a),s).map(d=>({query:`(max-width: ${BO(d.px)})`,styles:a[d.value]})),f=[...l,...c];return{baseStyles:u,media:f}}function yqe({navbar:e,header:t,aside:n,footer:r,padding:i}){const s=ps(),o=Ry(),{media:a,baseStyles:u}=gqe({navbar:e,header:t,footer:r,aside:n,padding:i,theme:s});return b.jsx(Pb,{media:a,styles:u,selector:o.cssVariablesSelector})}const vqe={},TG=Me((e,t)=>{const n=xe("AppShellNavbar",vqe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,withBorder:l,zIndex:c,mod:f,...d}=n,h=tS();return h.disabled?null:b.jsx(pe,{component:"nav",ref:t,mod:[{"with-border":l??h.withBorder},f],...h.getStyles("navbar",{className:i,classNames:r,styles:o,style:s}),...d,__vars:{"--app-shell-navbar-z-index":`calc(${c??h.zIndex} + 1)`}})});TG.classes=Py;TG.displayName="@mantine/core/AppShellNavbar";const bqe={},CG=Us((e,t)=>{const n=xe("AppShellSection",bqe,e),{classNames:r,className:i,style:s,styles:o,vars:a,grow:u,mod:l,...c}=n,f=tS();return b.jsx(pe,{ref:t,mod:[{grow:u},l],...f.getStyles("section",{className:i,style:s,classNames:r,styles:o}),...c})});CG.classes=Py;CG.displayName="@mantine/core/AppShellSection";function _qe({transitionDuration:e,disabled:t}){const[n,r]=I.useState(!0),i=I.useRef(),s=I.useRef();return W1e("resize",()=>{r(!0),clearTimeout(i.current),i.current=window.setTimeout(()=>r(!1),200)}),Nb(()=>{I.startTransition(()=>{r(!0),clearTimeout(s.current),s.current=window.setTimeout(()=>r(!1),e||0)})},[t,e]),n}const wqe={withBorder:!0,offsetScrollbars:!0,padding:0,transitionDuration:200,transitionTimingFunction:"ease",zIndex:Zl("app")},Eqe=(e,{transitionDuration:t,transitionTimingFunction:n})=>({root:{"--app-shell-transition-duration":`${t}ms`,"--app-shell-transition-timing-function":n}}),ni=Me((e,t)=>{const n=xe("AppShell",wqe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,navbar:l,withBorder:c,padding:f,transitionDuration:d,transitionTimingFunction:h,header:p,zIndex:m,layout:g,disabled:y,aside:v,footer:_,offsetScrollbars:w,mod:E,...S}=n,T=dt({name:"AppShell",classes:Py,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:Eqe}),C=_qe({disabled:y,transitionDuration:d});return b.jsxs(oqe,{value:{getStyles:T,withBorder:c,zIndex:m,disabled:y,offsetScrollbars:w},children:[b.jsx(yqe,{navbar:l,header:p,aside:v,footer:_,padding:f}),b.jsx(pe,{ref:t,...T("root"),mod:[{resizing:C,layout:g,disabled:y},E],...S})]})});ni.classes=Py;ni.displayName="@mantine/core/AppShell";ni.Navbar=TG;ni.Header=xG;ni.Main=SG;ni.Aside=wG;ni.Footer=EG;ni.Section=CG;function i_e(e){return typeof e=="string"?{value:e,label:e}:"value"in e&&!("label"in e)?{value:e.value,label:e.value,disabled:e.disabled}:typeof e=="number"?{value:e.toString(),label:e.toString()}:"group"in e?{group:e.group,items:e.items.map(t=>i_e(t))}:e}function s_e(e){return e?e.map(t=>i_e(t)):[]}function AG(e){return e.reduce((t,n)=>"group"in n?{...t,...AG(n.items)}:(t[n.value]=n,t),{})}var Qu={dropdown:"m_88b62a41",options:"m_b2821a6e",option:"m_92253aa5",search:"m_985517d8",empty:"m_2530cd1d",header:"m_858f94bd",footer:"m_82b967cb",group:"m_254f3e4f",groupLabel:"m_2bb2e9e5",chevron:"m_2943220b",optionsDropdownOption:"m_390b5f4",optionsDropdownCheckIcon:"m_8ee53fc2"};const xqe={error:null},Sqe=(e,{size:t})=>({chevron:{"--combobox-chevron-size":tn(t,"combobox-chevron-size")}}),IG=Me((e,t)=>{const n=xe("ComboboxChevron",xqe,e),{size:r,error:i,style:s,className:o,classNames:a,styles:u,unstyled:l,vars:c,mod:f,...d}=n,h=dt({name:"ComboboxChevron",classes:Qu,props:n,style:s,className:o,classNames:a,styles:u,unstyled:l,vars:c,varsResolver:Sqe,rootSelector:"chevron"});return b.jsx(pe,{component:"svg",...d,...h("chevron"),size:r,viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",mod:["combobox-chevron",{error:i},f],ref:t,children:b.jsx("path",{d:"M4.93179 5.43179C4.75605 5.60753 4.75605 5.89245 4.93179 6.06819C5.10753 6.24392 5.39245 6.24392 5.56819 6.06819L7.49999 4.13638L9.43179 6.06819C9.60753 6.24392 9.89245 6.24392 10.0682 6.06819C10.2439 5.89245 10.2439 5.60753 10.0682 5.43179L7.81819 3.18179C7.73379 3.0974 7.61933 3.04999 7.49999 3.04999C7.38064 3.04999 7.26618 3.0974 7.18179 3.18179L4.93179 5.43179ZM10.0682 9.56819C10.2439 9.39245 10.2439 9.10753 10.0682 8.93179C9.89245 8.75606 9.60753 8.75606 9.43179 8.93179L7.49999 10.8636L5.56819 8.93179C5.39245 8.75606 5.10753 8.75606 4.93179 8.93179C4.75605 9.10753 4.75605 9.39245 4.93179 9.56819L7.18179 11.8182C7.35753 11.9939 7.64245 11.9939 7.81819 11.8182L10.0682 9.56819Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})});IG.classes=Qu;IG.displayName="@mantine/core/ComboboxChevron";const[Tqe,Gc]=fo("Combobox component was not found in tree"),o_e=I.forwardRef(({size:e,onMouseDown:t,onClick:n,onClear:r,...i},s)=>b.jsx(Gm,{ref:s,size:e||"sm",variant:"transparent",tabIndex:-1,"aria-hidden":!0,...i,onMouseDown:o=>{o.preventDefault(),t==null||t(o)},onClick:o=>{r(),n==null||n(o)}}));o_e.displayName="@mantine/core/ComboboxClearButton";const Cqe={},kG=Me((e,t)=>{const{classNames:n,styles:r,className:i,style:s,hidden:o,...a}=xe("ComboboxDropdown",Cqe,e),u=Gc();return b.jsx(Po.Dropdown,{...a,ref:t,role:"presentation","data-hidden":o||void 0,...u.getStyles("dropdown",{className:i,style:s,classNames:n,styles:r})})});kG.classes=Qu;kG.displayName="@mantine/core/ComboboxDropdown";const Aqe={refProp:"ref"},a_e=Me((e,t)=>{const{children:n,refProp:r}=xe("ComboboxDropdownTarget",Aqe,e);if(Gc(),!ky(n))throw new Error("Combobox.DropdownTarget component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");return b.jsx(Po.Target,{ref:t,refProp:r,children:n})});a_e.displayName="@mantine/core/ComboboxDropdownTarget";const Iqe={},RG=Me((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=xe("ComboboxEmpty",Iqe,e),u=Gc();return b.jsx(pe,{ref:t,...u.getStyles("empty",{className:r,classNames:n,styles:s,style:i}),...a})});RG.classes=Qu;RG.displayName="@mantine/core/ComboboxEmpty";function NG({onKeyDown:e,withKeyboardNavigation:t,withAriaAttributes:n,withExpandedAttribute:r,targetType:i,autoComplete:s}){const o=Gc(),[a,u]=I.useState(null),l=f=>{if(e==null||e(f),!o.readOnly&&t){if(f.nativeEvent.isComposing)return;if(f.nativeEvent.code==="ArrowDown"&&(f.preventDefault(),o.store.dropdownOpened?u(o.store.selectNextOption()):(o.store.openDropdown("keyboard"),u(o.store.selectActiveOption()))),f.nativeEvent.code==="ArrowUp"&&(f.preventDefault(),o.store.dropdownOpened?u(o.store.selectPreviousOption()):(o.store.openDropdown("keyboard"),u(o.store.selectActiveOption()))),f.nativeEvent.code==="Enter"||f.nativeEvent.code==="NumpadEnter"){if(f.nativeEvent.keyCode===229)return;const d=o.store.getSelectedOptionIndex();o.store.dropdownOpened&&d!==-1?(f.preventDefault(),o.store.clickSelectedOption()):i==="button"&&(f.preventDefault(),o.store.openDropdown("keyboard"))}f.nativeEvent.code==="Escape"&&o.store.closeDropdown("keyboard"),f.nativeEvent.code==="Space"&&i==="button"&&(f.preventDefault(),o.store.toggleDropdown("keyboard"))}};return{...n?{"aria-haspopup":"listbox","aria-expanded":r&&!!(o.store.listId&&o.store.dropdownOpened)||void 0,"aria-controls":o.store.listId,"aria-activedescendant":o.store.dropdownOpened&&a||void 0,autoComplete:s,"data-expanded":o.store.dropdownOpened||void 0,"data-mantine-stop-propagation":o.store.dropdownOpened||void 0}:{},onKeyDown:l}}const kqe={refProp:"ref",targetType:"input",withKeyboardNavigation:!0,withAriaAttributes:!0,withExpandedAttribute:!1,autoComplete:"off"},u_e=Me((e,t)=>{const{children:n,refProp:r,withKeyboardNavigation:i,withAriaAttributes:s,withExpandedAttribute:o,targetType:a,autoComplete:u,...l}=xe("ComboboxEventsTarget",kqe,e);if(!ky(n))throw new Error("Combobox.EventsTarget component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const c=Gc(),f=NG({targetType:a,withAriaAttributes:s,withKeyboardNavigation:i,withExpandedAttribute:o,onKeyDown:n.props.onKeyDown,autoComplete:u});return I.cloneElement(n,{...f,...l,[r]:hs(t,c.store.targetRef,n==null?void 0:n.ref)})});u_e.displayName="@mantine/core/ComboboxEventsTarget";const Rqe={},PG=Me((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=xe("ComboboxFooter",Rqe,e),u=Gc();return b.jsx(pe,{ref:t,...u.getStyles("footer",{className:r,classNames:n,style:i,styles:s}),...a})});PG.classes=Qu;PG.displayName="@mantine/core/ComboboxFooter";const Nqe={},DG=Me((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,children:a,label:u,...l}=xe("ComboboxGroup",Nqe,e),c=Gc();return b.jsxs(pe,{ref:t,...c.getStyles("group",{className:r,classNames:n,style:i,styles:s}),...l,children:[u&&b.jsx("div",{...c.getStyles("groupLabel",{classNames:n,styles:s}),children:u}),a]})});DG.classes=Qu;DG.displayName="@mantine/core/ComboboxGroup";const Pqe={},OG=Me((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=xe("ComboboxHeader",Pqe,e),u=Gc();return b.jsx(pe,{ref:t,...u.getStyles("header",{className:r,classNames:n,style:i,styles:s}),...a})});OG.classes=Qu;OG.displayName="@mantine/core/ComboboxHeader";function l_e({value:e,valuesDivider:t=",",...n}){return b.jsx("input",{type:"hidden",value:Array.isArray(e)?e.join(t):e||"",...n})}l_e.displayName="@mantine/core/ComboboxHiddenInput";const Dqe={},$G=Me((e,t)=>{const n=xe("ComboboxOption",Dqe,e),{classNames:r,className:i,style:s,styles:o,vars:a,onClick:u,id:l,active:c,onMouseDown:f,onMouseOver:d,disabled:h,selected:p,mod:m,...g}=n,y=Gc(),v=I.useId(),_=l||v;return b.jsx(pe,{...y.getStyles("option",{className:i,classNames:r,styles:o,style:s}),...g,ref:t,id:_,mod:["combobox-option",{"combobox-active":c,"combobox-disabled":h,"combobox-selected":p},m],role:"option",onClick:w=>{var E;h?w.preventDefault():((E=y.onOptionSubmit)==null||E.call(y,n.value,n),u==null||u(w))},onMouseDown:w=>{w.preventDefault(),f==null||f(w)},onMouseOver:w=>{y.resetSelectionOnOptionHover&&y.store.resetSelectedOption(),d==null||d(w)}})});$G.classes=Qu;$G.displayName="@mantine/core/ComboboxOption";const Oqe={},MG=Me((e,t)=>{const n=xe("ComboboxOptions",Oqe,e),{classNames:r,className:i,style:s,styles:o,id:a,onMouseDown:u,labelledBy:l,...c}=n,f=Gc(),d=Ta(a);return I.useEffect(()=>{f.store.setListId(d)},[d]),b.jsx(pe,{ref:t,...f.getStyles("options",{className:i,style:s,classNames:r,styles:o}),...c,id:d,role:"listbox","aria-labelledby":l,onMouseDown:h=>{h.preventDefault(),u==null||u(h)}})});MG.classes=Qu;MG.displayName="@mantine/core/ComboboxOptions";const $qe={withAriaAttributes:!0,withKeyboardNavigation:!0},LG=Me((e,t)=>{const n=xe("ComboboxSearch",$qe,e),{classNames:r,styles:i,unstyled:s,vars:o,withAriaAttributes:a,onKeyDown:u,withKeyboardNavigation:l,size:c,...f}=n,d=Gc(),h=d.getStyles("search"),p=NG({targetType:"input",withAriaAttributes:a,withKeyboardNavigation:l,withExpandedAttribute:!1,onKeyDown:u,autoComplete:"off"});return b.jsx(mi,{ref:hs(t,d.store.searchRef),classNames:[{input:h.className},r],styles:[{input:h.style},i],size:c||d.size,...p,...f,__staticSelector:"Combobox"})});LG.classes=Qu;LG.displayName="@mantine/core/ComboboxSearch";const Mqe={refProp:"ref",targetType:"input",withKeyboardNavigation:!0,withAriaAttributes:!0,withExpandedAttribute:!1,autoComplete:"off"},c_e=Me((e,t)=>{const{children:n,refProp:r,withKeyboardNavigation:i,withAriaAttributes:s,withExpandedAttribute:o,targetType:a,autoComplete:u,...l}=xe("ComboboxTarget",Mqe,e);if(!ky(n))throw new Error("Combobox.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const c=Gc(),f=NG({targetType:a,withAriaAttributes:s,withKeyboardNavigation:i,withExpandedAttribute:o,onKeyDown:n.props.onKeyDown,autoComplete:u}),d=I.cloneElement(n,{...f,...l});return b.jsx(Po.Target,{ref:hs(t,c.store.targetRef),children:d})});c_e.displayName="@mantine/core/ComboboxTarget";function Lqe(e,t,n){for(let r=e-1;r>=0;r-=1)if(!t[r].hasAttribute("data-combobox-disabled"))return r;if(n){for(let r=t.length-1;r>-1;r-=1)if(!t[r].hasAttribute("data-combobox-disabled"))return r}return e}function Fqe(e,t,n){for(let r=e+1;r<t.length;r+=1)if(!t[r].hasAttribute("data-combobox-disabled"))return r;if(n){for(let r=0;r<t.length;r+=1)if(!t[r].hasAttribute("data-combobox-disabled"))return r}return e}function jqe(e){for(let t=0;t<e.length;t+=1)if(!e[t].hasAttribute("data-combobox-disabled"))return t;return-1}function FG({defaultOpened:e,opened:t,onOpenedChange:n,onDropdownClose:r,onDropdownOpen:i,loop:s=!0,scrollBehavior:o="instant"}={}){const[a,u]=Ss({value:t,defaultValue:e,finalValue:!1,onChange:n}),l=I.useRef(null),c=I.useRef(-1),f=I.useRef(null),d=I.useRef(null),h=I.useRef(-1),p=I.useRef(-1),m=I.useRef(-1),g=I.useCallback((M="unknown")=>{a||(u(!0),i==null||i(M))},[u,i,a]),y=I.useCallback((M="unknown")=>{a&&(u(!1),r==null||r(M))},[u,r,a]),v=I.useCallback((M="unknown")=>{a?y(M):g(M)},[y,g,a]),_=I.useCallback(()=>{const M=document.querySelector(`#${l.current} [data-combobox-selected]`);M==null||M.removeAttribute("data-combobox-selected"),M==null||M.removeAttribute("aria-selected")},[]),w=I.useCallback(M=>{const B=document.getElementById(l.current),U=B==null?void 0:B.querySelectorAll("[data-combobox-option]");if(!U)return null;const H=M>=U.length?0:M<0?U.length-1:M;return c.current=H,U!=null&&U[H]&&!U[H].hasAttribute("data-combobox-disabled")?(_(),U[H].setAttribute("data-combobox-selected","true"),U[H].setAttribute("aria-selected","true"),U[H].scrollIntoView({block:"nearest",behavior:o}),U[H].id):null},[o,_]),E=I.useCallback(()=>{const M=document.querySelector(`#${l.current} [data-combobox-active]`);if(M){const B=document.querySelectorAll(`#${l.current} [data-combobox-option]`),U=Array.from(B).findIndex(H=>H===M);return w(U)}return w(0)},[w]),S=I.useCallback(()=>w(Fqe(c.current,document.querySelectorAll(`#${l.current} [data-combobox-option]`),s)),[w,s]),T=I.useCallback(()=>w(Lqe(c.current,document.querySelectorAll(`#${l.current} [data-combobox-option]`),s)),[w,s]),C=I.useCallback(()=>w(jqe(document.querySelectorAll(`#${l.current} [data-combobox-option]`))),[w]),A=I.useCallback((M="selected",B)=>{m.current=window.setTimeout(()=>{var P;const U=document.querySelectorAll(`#${l.current} [data-combobox-option]`),H=Array.from(U).findIndex(z=>z.hasAttribute(`data-combobox-${M}`));c.current=H,B!=null&&B.scrollIntoView&&((P=U[H])==null||P.scrollIntoView({block:"nearest",behavior:o}))},0)},[]),k=I.useCallback(()=>{c.current=-1,_()},[_]),N=I.useCallback(()=>{const M=document.querySelectorAll(`#${l.current} [data-combobox-option]`),B=M==null?void 0:M[c.current];B==null||B.click()},[]),O=I.useCallback(M=>{l.current=M},[]),D=I.useCallback(()=>{h.current=window.setTimeout(()=>f.current.focus(),0)},[]),$=I.useCallback(()=>{p.current=window.setTimeout(()=>d.current.focus(),0)},[]),F=I.useCallback(()=>c.current,[]);return I.useEffect(()=>()=>{window.clearTimeout(h.current),window.clearTimeout(p.current),window.clearTimeout(m.current)},[]),{dropdownOpened:a,openDropdown:g,closeDropdown:y,toggleDropdown:v,selectedOptionIndex:c.current,getSelectedOptionIndex:F,selectOption:w,selectFirstOption:C,selectActiveOption:E,selectNextOption:S,selectPreviousOption:T,resetSelectedOption:k,updateSelectedOptionIndex:A,listId:l.current,setListId:O,clickSelectedOption:N,searchRef:f,focusSearchInput:D,targetRef:d,focusTarget:$}}const Bqe={keepMounted:!0,withinPortal:!0,resetSelectionOnOptionHover:!1,width:"target",transitionProps:{transition:"fade",duration:0}},Uqe=(e,{size:t,dropdownPadding:n})=>({options:{"--combobox-option-fz":uo(t),"--combobox-option-padding":tn(t,"combobox-option-padding")},dropdown:{"--combobox-padding":n===void 0?void 0:Te(n),"--combobox-option-fz":uo(t),"--combobox-option-padding":tn(t,"combobox-option-padding")}});function Kn(e){const t=xe("Combobox",Bqe,e),{classNames:n,styles:r,unstyled:i,children:s,store:o,vars:a,onOptionSubmit:u,onClose:l,size:c,dropdownPadding:f,resetSelectionOnOptionHover:d,__staticSelector:h,readOnly:p,...m}=t,g=FG(),y=o||g,v=dt({name:h||"Combobox",classes:Qu,props:t,classNames:n,styles:r,unstyled:i,vars:a,varsResolver:Uqe}),_=()=>{l==null||l(),y.closeDropdown()};return b.jsx(Tqe,{value:{getStyles:v,store:y,onOptionSubmit:u,size:c,resetSelectionOnOptionHover:d,readOnly:p},children:b.jsx(Po,{opened:y.dropdownOpened,...m,onClose:_,withRoles:!1,unstyled:i,children:s})})}const zqe=e=>e;Kn.extend=zqe;Kn.classes=Qu;Kn.displayName="@mantine/core/Combobox";Kn.Target=c_e;Kn.Dropdown=kG;Kn.Options=MG;Kn.Option=$G;Kn.Search=LG;Kn.Empty=RG;Kn.Chevron=IG;Kn.Footer=PG;Kn.Header=OG;Kn.EventsTarget=u_e;Kn.DropdownTarget=a_e;Kn.Group=DG;Kn.ClearButton=o_e;Kn.HiddenInput=l_e;var f_e={root:"m_5f75b09e",body:"m_5f6e695e",labelWrapper:"m_d3ea56bb",label:"m_8ee546b8",description:"m_328f68c0",error:"m_8e8a99cc"};const d_e=f_e,DL=I.forwardRef(({__staticSelector:e,__stylesApiProps:t,className:n,classNames:r,styles:i,unstyled:s,children:o,label:a,description:u,id:l,disabled:c,error:f,size:d,labelPosition:h="left",bodyElement:p="div",labelElement:m="label",variant:g,style:y,vars:v,mod:_,...w},E)=>{const S=dt({name:e,props:t,className:n,style:y,classes:f_e,classNames:r,styles:i,unstyled:s});return b.jsx(pe,{...S("root"),ref:E,__vars:{"--label-fz":uo(d),"--label-lh":tn(d,"label-lh")},mod:[{"label-position":h},_],variant:g,size:d,...w,children:b.jsxs(pe,{component:p,htmlFor:p==="label"?l:void 0,...S("body"),children:[o,b.jsxs("div",{...S("labelWrapper"),"data-disabled":c||void 0,children:[a&&b.jsx(pe,{component:m,htmlFor:m==="label"?l:void 0,...S("label"),"data-disabled":c||void 0,children:a}),u&&b.jsx(mi.Description,{size:d,__inheritStyles:!1,...S("description"),children:u}),f&&typeof f!="boolean"&&b.jsx(mi.Error,{size:d,__inheritStyles:!1,...S("error"),children:f})]})]})})});DL.displayName="@mantine/core/InlineInput";const h_e=I.createContext(null),Vqe=h_e.Provider,p_e=()=>I.useContext(h_e),[Hqe,qqe]=Yx();var m_e={card:"m_26775b0a"};const Wqe={withBorder:!0},Gqe=(e,{radius:t})=>({card:{"--card-radius":Ur(t)}}),jG=Me((e,t)=>{const n=xe("CheckboxCard",Wqe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,checked:l,mod:c,withBorder:f,value:d,onClick:h,...p}=n,m=dt({name:"CheckboxCard",classes:m_e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:Gqe,rootSelector:"card"}),g=p_e(),y=typeof l=="boolean"?l:(g==null?void 0:g.value.includes(d||""))||!1;return b.jsx(Hqe,{value:{checked:y},children:b.jsx(xs,{ref:t,mod:[{"with-border":f,checked:y},c],...m("card"),...p,role:"checkbox","aria-checked":y,onClick:v=>{h==null||h(v),g==null||g.onChange(d||"")}})})});jG.displayName="@mantine/core/CheckboxCard";jG.classes=m_e;function BG({children:e,role:t}){const n=Zx();return n?b.jsx("div",{role:t,"aria-labelledby":n.labelId,"aria-describedby":n.describedBy,children:e}):b.jsx(b.Fragment,{children:e})}const Yqe={},UG=Me((e,t)=>{const{value:n,defaultValue:r,onChange:i,size:s,wrapperProps:o,children:a,readOnly:u,...l}=xe("CheckboxGroup",Yqe,e),[c,f]=Ss({value:n,defaultValue:r,finalValue:[],onChange:i}),d=h=>{const p=typeof h=="string"?h:h.currentTarget.value;!u&&f(c.includes(p)?c.filter(m=>m!==p):[...c,p])};return b.jsx(Vqe,{value:{value:c,onChange:d,size:s},children:b.jsx(mi.Wrapper,{size:s,ref:t,...o,...l,labelElement:"div",__staticSelector:"CheckboxGroup",children:b.jsx(BG,{role:"group",children:a})})})});UG.classes=mi.Wrapper.classes;UG.displayName="@mantine/core/CheckboxGroup";function g_e({size:e,style:t,...n}){const r=e!==void 0?{width:Te(e),height:Te(e),...t}:t;return b.jsx("svg",{viewBox:"0 0 10 7",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:r,"aria-hidden":!0,...n,children:b.jsx("path",{d:"M4 4.586L1.707 2.293A1 1 0 1 0 .293 3.707l3 3a.997.997 0 0 0 1.414 0l5-5A1 1 0 1 0 8.293.293L4 4.586z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}function y_e({indeterminate:e,...t}){return e?b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 32 6","aria-hidden":!0,...t,children:b.jsx("rect",{width:"32",height:"6",fill:"currentColor",rx:"3"})}):b.jsx(g_e,{...t})}var v_e={indicator:"m_5e5256ee",icon:"m_1b1c543a","indicator--outline":"m_76e20374"};const Kqe={icon:y_e},Xqe=(e,{radius:t,color:n,size:r,iconColor:i,variant:s,autoContrast:o})=>{const a=Hh({color:n||e.primaryColor,theme:e}),u=a.isThemeColor&&a.shade===void 0?`var(--mantine-color-${a.color}-outline)`:a.color;return{indicator:{"--checkbox-size":tn(r,"checkbox-size"),"--checkbox-radius":t===void 0?void 0:Ur(t),"--checkbox-color":s==="outline"?u:$r(n,e),"--checkbox-icon-color":i?$r(i,e):Kx(o,e)?Ny({color:n,theme:e,autoContrast:o}):void 0}}},zG=Me((e,t)=>{const n=xe("CheckboxIndicator",Kqe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,icon:l,indeterminate:c,radius:f,color:d,iconColor:h,autoContrast:p,checked:m,mod:g,variant:y,disabled:v,..._}=n,w=l,E=dt({name:"CheckboxIndicator",classes:v_e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:Xqe,rootSelector:"indicator"}),S=qqe(),T=typeof m=="boolean"||typeof c=="boolean"?m||c:(S==null?void 0:S.checked)||!1;return b.jsx(pe,{ref:t,...E("indicator",{variant:y}),variant:y,mod:[{checked:T,disabled:v},g],..._,children:b.jsx(w,{indeterminate:c,...E("icon")})})});zG.displayName="@mantine/core/CheckboxIndicator";zG.classes=v_e;var b_e={root:"m_bf2d988c",inner:"m_26062bec",input:"m_26063560",icon:"m_bf295423","input--outline":"m_215c4542"};const Qqe={labelPosition:"right",icon:y_e},Jqe=(e,{radius:t,color:n,size:r,iconColor:i,variant:s,autoContrast:o})=>{const a=Hh({color:n||e.primaryColor,theme:e}),u=a.isThemeColor&&a.shade===void 0?`var(--mantine-color-${a.color}-outline)`:a.color;return{root:{"--checkbox-size":tn(r,"checkbox-size"),"--checkbox-radius":t===void 0?void 0:Ur(t),"--checkbox-color":s==="outline"?u:$r(n,e),"--checkbox-icon-color":i?$r(i,e):Kx(o,e)?Ny({color:n,theme:e,autoContrast:o}):void 0}}},Tl=Me((e,t)=>{const n=xe("Checkbox",Qqe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,color:l,label:c,id:f,size:d,radius:h,wrapperProps:p,children:m,checked:g,labelPosition:y,description:v,error:_,disabled:w,variant:E,indeterminate:S,icon:T,rootRef:C,iconColor:A,onChange:k,autoContrast:N,mod:O,...D}=n,$=p_e(),F=d||($==null?void 0:$.size),M=T,B=dt({name:"Checkbox",props:n,classes:b_e,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:Jqe}),{styleProps:U,rest:H}=Db(D),P=Ta(f),z=$?{checked:$.value.includes(H.value),onChange:W=>{$.onChange(W),k==null||k(W)}}:{};return b.jsx(DL,{...B("root"),__staticSelector:"Checkbox",__stylesApiProps:n,id:P,size:F,labelPosition:y,label:c,description:v,error:_,disabled:w,classNames:r,styles:o,unstyled:a,"data-checked":z.checked||g||void 0,variant:E,ref:C,mod:O,...U,...p,children:b.jsxs(pe,{...B("inner"),mod:{"data-label-position":y},children:[b.jsx(pe,{component:"input",id:P,ref:t,checked:g,disabled:w,mod:{error:!!_,indeterminate:S},...B("input",{focusable:!0,variant:E}),onChange:k,...H,...z,type:"checkbox"}),b.jsx(M,{indeterminate:S,...B("icon")})]})})});Tl.classes={...b_e,...d_e};Tl.displayName="@mantine/core/Checkbox";Tl.Group=UG;Tl.Indicator=zG;Tl.Card=jG;function LE(e){return"group"in e}function __e({options:e,search:t,limit:n}){const r=t.trim().toLowerCase(),i=[];for(let s=0;s<e.length;s+=1){const o=e[s];if(i.length===n)return i;LE(o)&&i.push({group:o.group,items:__e({options:o.items,search:t,limit:n-i.length})}),LE(o)||o.label.toLowerCase().includes(r)&&i.push(o)}return i}function Zqe(e){if(e.length===0)return!0;for(const t of e)if(!("group"in t)||t.items.length>0)return!1;return!0}function w_e(e,t=new Set){if(Array.isArray(e))for(const n of e)if(LE(n))w_e(n.items,t);else{if(typeof n.value>"u")throw new Error("[@mantine/core] Each option must have value property");if(typeof n.value!="string")throw new Error(`[@mantine/core] Option value must be a string, other data formats are not supported, got ${typeof n.value}`);if(t.has(n.value))throw new Error(`[@mantine/core] Duplicate options are not supported. Option with value "${n.value}" was provided more than once`);t.add(n.value)}}function eWe(e,t){return Array.isArray(e)?e.includes(t):e===t}function E_e({data:e,withCheckIcon:t,value:n,checkIconPosition:r,unstyled:i,renderOption:s}){if(!LE(e)){const a=eWe(n,e.value),u=t&&a&&b.jsx(g_e,{className:Qu.optionsDropdownCheckIcon}),l=b.jsxs(b.Fragment,{children:[r==="left"&&u,b.jsx("span",{children:e.label}),r==="right"&&u]});return b.jsx(Kn.Option,{value:e.value,disabled:e.disabled,className:Xi({[Qu.optionsDropdownOption]:!i}),"data-reverse":r==="right"||void 0,"data-checked":a||void 0,"aria-selected":a,active:a,children:typeof s=="function"?s({option:e,checked:a}):l})}const o=e.items.map(a=>b.jsx(E_e,{data:a,value:n,unstyled:i,withCheckIcon:t,checkIconPosition:r,renderOption:s},a.value));return b.jsx(Kn.Group,{label:e.group,children:o})}function x_e({data:e,hidden:t,hiddenWhenEmpty:n,filter:r,search:i,limit:s,maxDropdownHeight:o,withScrollArea:a=!0,filterOptions:u=!0,withCheckIcon:l=!1,value:c,checkIconPosition:f,nothingFoundMessage:d,unstyled:h,labelId:p,renderOption:m,scrollAreaProps:g,"aria-label":y}){w_e(e);const _=typeof i=="string"?(r||__e)({options:e,search:u?i:"",limit:s??1/0}):e,w=Zqe(_),E=_.map(S=>b.jsx(E_e,{data:S,withCheckIcon:l,value:c,checkIconPosition:f,unstyled:h,renderOption:m},LE(S)?S.group:S.value));return b.jsx(Kn.Dropdown,{hidden:t||n&&w,children:b.jsxs(Kn.Options,{labelledBy:p,"aria-label":y,children:[a?b.jsx(bm.Autosize,{mah:o??220,type:"scroll",scrollbarSize:"var(--combobox-padding)",offsetScrollbars:"y",...g,children:E}):E,w&&d&&b.jsx(Kn.Empty,{children:d})]})})}var S_e={root:"m_347db0ec","root--dot":"m_fbd81e3d",label:"m_5add502a",section:"m_91fdda9b"};const tWe={},nWe=(e,{radius:t,color:n,gradient:r,variant:i,size:s,autoContrast:o})=>{const a=e.variantColorResolver({color:n||e.primaryColor,theme:e,gradient:r,variant:i||"filled",autoContrast:o});return{root:{"--badge-height":tn(s,"badge-height"),"--badge-padding-x":tn(s,"badge-padding-x"),"--badge-fz":tn(s,"badge-fz"),"--badge-radius":t===void 0?void 0:Ur(t),"--badge-bg":n||i?a.background:void 0,"--badge-color":n||i?a.color:void 0,"--badge-bd":n||i?a.border:void 0,"--badge-dot-color":i==="dot"?$r(n,e):void 0}}},_0=Us((e,t)=>{const n=xe("Badge",tWe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,radius:l,color:c,gradient:f,leftSection:d,rightSection:h,children:p,variant:m,fullWidth:g,autoContrast:y,circle:v,mod:_,...w}=n,E=dt({name:"Badge",props:n,classes:S_e,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:nWe});return b.jsxs(pe,{variant:m,mod:[{block:g,circle:v},_],...E("root",{variant:m}),ref:t,...w,children:[d&&b.jsx("span",{...E("section"),"data-position":"left",children:d}),b.jsx("span",{...E("label"),children:p}),h&&b.jsx("span",{...E("section"),"data-position":"right",children:h})]})});_0.classes=S_e;_0.displayName="@mantine/core/Badge";var T_e={root:"m_fea6bf1a",burger:"m_d4fb9cad"};const rWe={},iWe=(e,{color:t,size:n,transitionDuration:r,transitionTimingFunction:i})=>({root:{"--burger-color":t?$r(t,e):void 0,"--burger-size":tn(n,"burger-size"),"--burger-transition-duration":r===void 0?void 0:`${r}ms`,"--burger-transition-timing-function":i}}),VG=Me((e,t)=>{const n=xe("Burger",rWe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,opened:l,children:c,transitionDuration:f,transitionTimingFunction:d,...h}=n,p=dt({name:"Burger",classes:T_e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:iWe});return b.jsxs(xs,{...p("root"),ref:t,...h,children:[b.jsx(pe,{mod:["reduce-motion",{opened:l}],...p("burger")}),c]})});VG.classes=T_e;VG.displayName="@mantine/core/Burger";var OL={root:"m_77c9d27d",inner:"m_80f1301b",label:"m_811560b9",section:"m_a74036a",loader:"m_a25b86ee",group:"m_80d6d844"};const Uoe={orientation:"horizontal"},sWe=(e,{borderWidth:t})=>({group:{"--button-border-width":Te(t)}}),HG=Me((e,t)=>{const n=xe("ButtonGroup",Uoe,e),{className:r,style:i,classNames:s,styles:o,unstyled:a,orientation:u,vars:l,borderWidth:c,variant:f,mod:d,...h}=xe("ButtonGroup",Uoe,e),p=dt({name:"ButtonGroup",props:n,classes:OL,className:r,style:i,classNames:s,styles:o,unstyled:a,vars:l,varsResolver:sWe,rootSelector:"group"});return b.jsx(pe,{...p("group"),ref:t,variant:f,mod:[{"data-orientation":u},d],role:"group",...h})});HG.classes=OL;HG.displayName="@mantine/core/ButtonGroup";const oWe={in:{opacity:1,transform:`translate(-50%, calc(-50% + ${Te(1)}))`},out:{opacity:0,transform:"translate(-50%, -200%)"},common:{transformOrigin:"center"},transitionProperty:"transform, opacity"},aWe={},uWe=(e,{radius:t,color:n,gradient:r,variant:i,size:s,justify:o,autoContrast:a})=>{const u=e.variantColorResolver({color:n||e.primaryColor,theme:e,gradient:r,variant:i||"filled",autoContrast:a});return{root:{"--button-justify":o,"--button-height":tn(s,"button-height"),"--button-padding-x":tn(s,"button-padding-x"),"--button-fz":s!=null&&s.includes("compact")?uo(s.replace("compact-","")):uo(s),"--button-radius":t===void 0?void 0:Ur(t),"--button-bg":n||i?u.background:void 0,"--button-hover":n||i?u.hover:void 0,"--button-color":u.color,"--button-bd":n||i?u.border:void 0,"--button-hover-color":n||i?u.hoverColor:void 0}}},fn=Us((e,t)=>{const n=xe("Button",aWe,e),{style:r,vars:i,className:s,color:o,disabled:a,children:u,leftSection:l,rightSection:c,fullWidth:f,variant:d,radius:h,loading:p,loaderProps:m,gradient:g,classNames:y,styles:v,unstyled:_,"data-disabled":w,autoContrast:E,mod:S,...T}=n,C=dt({name:"Button",props:n,classes:OL,className:s,style:r,classNames:y,styles:v,unstyled:_,vars:i,varsResolver:uWe}),A=!!l,k=!!c;return b.jsxs(xs,{ref:t,...C("root",{active:!a&&!p&&!w}),unstyled:_,variant:d,disabled:a||p,mod:[{disabled:a||w,loading:p,block:f,"with-left-section":A,"with-right-section":k},S],...T,children:[b.jsx(Wm,{mounted:!!p,transition:oWe,duration:150,children:N=>b.jsx(pe,{component:"span",...C("loader",{style:N}),"aria-hidden":!0,children:b.jsx(od,{color:"var(--button-color)",size:"calc(var(--button-height) / 1.8)",...m})})}),b.jsxs("span",{...C("inner"),children:[l&&b.jsx(pe,{component:"span",...C("section"),mod:{position:"left"},children:l}),b.jsx(pe,{component:"span",mod:{loading:p},...C("label"),children:u}),c&&b.jsx(pe,{component:"span",...C("section"),mod:{position:"right"},children:c})]})]})});fn.classes=OL;fn.displayName="@mantine/core/Button";fn.Group=HG;const[lWe,cWe]=fo("Card component was not found in tree");var qG={root:"m_e615b15f",section:"m_599a2148"};const fWe={},$L=Us((e,t)=>{const n=xe("CardSection",fWe,e),{classNames:r,className:i,style:s,styles:o,vars:a,withBorder:u,inheritPadding:l,mod:c,...f}=n,d=cWe();return b.jsx(pe,{ref:t,mod:[{"with-border":u,"inherit-padding":l},c],...d.getStyles("section",{className:i,style:s,styles:o,classNames:r}),...f})});$L.classes=qG;$L.displayName="@mantine/core/CardSection";const dWe={},hWe=(e,{padding:t})=>({root:{"--card-padding":as(t)}}),Fb=Us((e,t)=>{const n=xe("Card",dWe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,children:l,padding:c,...f}=n,d=dt({name:"Card",props:n,classes:qG,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:hWe}),h=I.Children.toArray(l),p=h.map((m,g)=>typeof m=="object"&&m&&"type"in m&&m.type===$L?I.cloneElement(m,{"data-first-section":g===0||void 0,"data-last-section":g===h.length-1||void 0}):m);return b.jsx(lWe,{value:{getStyles:d},children:b.jsx(Ob,{ref:t,unstyled:a,...d("root"),...f,children:p})})});Fb.classes=qG;Fb.displayName="@mantine/core/Card";Fb.Section=$L;var C_e={root:"m_4451eb3a"};const pWe={},Oc=Us((e,t)=>{const n=xe("Center",pWe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,inline:l,mod:c,...f}=n,d=dt({name:"Center",props:n,classes:C_e,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u});return b.jsx(pe,{ref:t,mod:[{inline:l},c],...d("root"),...f})});Oc.classes=C_e;Oc.displayName="@mantine/core/Center";var A_e={root:"m_b183c0a2"};const mWe={},gWe=(e,{color:t})=>({root:{"--code-bg":t?$r(t,e):void 0}}),yC=Me((e,t)=>{const n=xe("Code",mWe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,color:l,block:c,variant:f,mod:d,...h}=n,p=dt({name:"Code",props:n,classes:A_e,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:gWe});return b.jsx(pe,{component:c?"pre":"code",variant:f,ref:t,mod:[{block:c},d],...p("root"),...h,dir:"ltr"})});yC.classes=A_e;yC.displayName="@mantine/core/Code";var I_e={root:"m_7485cace"};const yWe={},vWe=(e,{size:t,fluid:n})=>({root:{"--container-size":n?void 0:tn(t,"container-size")}}),$c=Me((e,t)=>{const n=xe("Container",yWe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,fluid:l,mod:c,...f}=n,d=dt({name:"Container",classes:I_e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:vWe});return b.jsx(pe,{ref:t,mod:[{fluid:l},c],...d("root"),...f})});$c.classes=I_e;$c.displayName="@mantine/core/Container";var k_e={root:"m_3eebeb36",label:"m_9e365f20"};const bWe={orientation:"horizontal"},_We=(e,{color:t,variant:n,size:r})=>({root:{"--divider-color":t?$r(t,e):void 0,"--divider-border-style":n,"--divider-size":tn(r,"divider-size")}}),FE=Me((e,t)=>{const n=xe("Divider",bWe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,color:l,orientation:c,label:f,labelPosition:d,mod:h,...p}=n,m=dt({name:"Divider",classes:k_e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:_We});return b.jsx(pe,{ref:t,mod:[{orientation:c,"with-label":!!f},h],...m("root"),...p,role:"separator",children:f&&b.jsx(pe,{component:"span",mod:{position:d},...m("label"),children:f})})});FE.classes=k_e;FE.displayName="@mantine/core/Divider";const[wWe,nS]=fo("Drawer component was not found in tree");var Km={root:"m_f11b401e",header:"m_5a7c2c9",content:"m_b8a05bbd",inner:"m_31cd769a"};const EWe={},ML=Me((e,t)=>{const n=xe("DrawerBody",EWe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=nS();return b.jsx(lG,{ref:t,...l.getStyles("body",{classNames:r,style:s,styles:o,className:i}),...u})});ML.classes=Km;ML.displayName="@mantine/core/DrawerBody";const xWe={},LL=Me((e,t)=>{const n=xe("DrawerCloseButton",xWe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=nS();return b.jsx(cG,{ref:t,...l.getStyles("close",{classNames:r,style:s,styles:o,className:i}),...u})});LL.classes=Km;LL.displayName="@mantine/core/DrawerCloseButton";const SWe={},FL=Me((e,t)=>{const n=xe("DrawerContent",SWe,e),{classNames:r,className:i,style:s,styles:o,vars:a,children:u,radius:l,...c}=n,f=nS(),d=f.scrollAreaComponent||Xbe;return b.jsx(Kbe,{...f.getStyles("content",{className:i,style:s,styles:o,classNames:r}),innerProps:f.getStyles("inner",{className:i,style:s,styles:o,classNames:r}),ref:t,...c,radius:l||f.radius||0,children:b.jsx(d,{style:{height:"100vh"},children:u})})});FL.classes=Km;FL.displayName="@mantine/core/DrawerContent";const TWe={},jL=Me((e,t)=>{const n=xe("DrawerHeader",TWe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=nS();return b.jsx(fG,{ref:t,...l.getStyles("header",{classNames:r,style:s,styles:o,className:i}),...u})});jL.classes=Km;jL.displayName="@mantine/core/DrawerHeader";const CWe={},BL=Me((e,t)=>{const n=xe("DrawerOverlay",CWe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=nS();return b.jsx(dG,{ref:t,...l.getStyles("overlay",{classNames:r,style:s,styles:o,className:i}),...u})});BL.classes=Km;BL.displayName="@mantine/core/DrawerOverlay";function AWe(e){switch(e){case"top":return"flex-start";case"bottom":return"flex-end";default:return}}function IWe(e){if(e==="top"||e==="bottom")return"0 0 calc(100% - var(--drawer-offset, 0rem) * 2)"}const kWe={top:"slide-down",bottom:"slide-up",left:"slide-right",right:"slide-left"},RWe={top:"slide-down",bottom:"slide-up",right:"slide-right",left:"slide-left"},NWe={closeOnClickOutside:!0,withinPortal:!0,lockScroll:!0,trapFocus:!0,returnFocus:!0,closeOnEscape:!0,keepMounted:!1,zIndex:Zl("modal"),position:"left"},PWe=(e,{position:t,size:n,offset:r})=>({root:{"--drawer-size":tn(n,"drawer-size"),"--drawer-flex":IWe(t),"--drawer-height":t==="left"||t==="right"?void 0:"var(--drawer-size)","--drawer-align":AWe(t),"--drawer-justify":t==="right"?"flex-end":void 0,"--drawer-offset":Te(r)}}),UL=Me((e,t)=>{const n=xe("DrawerRoot",NWe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,scrollAreaComponent:l,position:c,transitionProps:f,radius:d,...h}=n,{dir:p}=qh(),m=dt({name:"Drawer",classes:Km,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:PWe}),g=(p==="rtl"?RWe:kWe)[c];return b.jsx(wWe,{value:{scrollAreaComponent:l,getStyles:m,radius:d},children:b.jsx(Ybe,{ref:t,...m("root"),transitionProps:{transition:g,...f},unstyled:a,...h})})});UL.classes=Km;UL.displayName="@mantine/core/DrawerRoot";const DWe={},zL=Me((e,t)=>{const n=xe("DrawerTitle",DWe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=nS();return b.jsx(hG,{ref:t,...l.getStyles("title",{classNames:r,style:s,styles:o,className:i}),...u})});zL.classes=Km;zL.displayName="@mantine/core/DrawerTitle";const OWe={closeOnClickOutside:!0,withinPortal:!0,lockScroll:!0,trapFocus:!0,returnFocus:!0,closeOnEscape:!0,keepMounted:!1,zIndex:Zl("modal"),withOverlay:!0,withCloseButton:!0},Wh=Me((e,t)=>{const{title:n,withOverlay:r,overlayProps:i,withCloseButton:s,closeButtonProps:o,children:a,...u}=xe("Drawer",OWe,e),l=!!n||s;return b.jsxs(UL,{ref:t,...u,children:[r&&b.jsx(BL,{...i}),b.jsxs(FL,{children:[l&&b.jsxs(jL,{children:[n&&b.jsx(zL,{children:n}),s&&b.jsx(LL,{...o})]}),b.jsx(ML,{children:a})]})]})});Wh.classes=Km;Wh.displayName="@mantine/core/Drawer";Wh.Root=UL;Wh.Overlay=BL;Wh.Content=FL;Wh.Body=ML;Wh.Header=jL;Wh.Title=zL;Wh.CloseButton=LL;function $We({open:e,close:t,openDelay:n,closeDelay:r}){const i=I.useRef(-1),s=I.useRef(-1),o=()=>{window.clearTimeout(i.current),window.clearTimeout(s.current)},a=()=>{o(),n===0||n===void 0?e():i.current=window.setTimeout(e,n)},u=()=>{o(),r===0||r===void 0?t():s.current=window.setTimeout(t,r)};return I.useEffect(()=>o,[]),{openDropdown:a,closeDropdown:u}}const[MWe,R_e]=fo("Grid component was not found in tree"),t7=(e,t)=>e==="content"?"auto":e==="auto"?"0rem":e?`${100/(t/e)}%`:void 0,zoe=(e,t,n)=>n||e==="auto"?"100%":e==="content"?"unset":t7(e,t),Voe=(e,t)=>{if(e)return e==="auto"||t?"1":"auto"},Hoe=(e,t)=>e===0?"0":e?`${100/(t/e)}%`:void 0;function LWe({span:e,order:t,offset:n,selector:r}){var d;const i=ps(),s=R_e(),a=kf(e)===void 0?12:kf(e),u=Iy({"--col-order":(d=kf(t))==null?void 0:d.toString(),"--col-flex-grow":Voe(a,s.grow),"--col-flex-basis":t7(a,s.columns),"--col-width":a==="content"?"auto":void 0,"--col-max-width":zoe(a,s.columns,s.grow),"--col-offset":Hoe(kf(n),s.columns)}),l=Xr(i.breakpoints).reduce((h,p)=>{var m;return h[p]||(h[p]={}),typeof t=="object"&&t[p]!==void 0&&(h[p]["--col-order"]=(m=t[p])==null?void 0:m.toString()),typeof e=="object"&&e[p]!==void 0&&(h[p]["--col-flex-grow"]=Voe(e[p],s.grow),h[p]["--col-flex-basis"]=t7(e[p],s.columns),h[p]["--col-width"]=e[p]==="content"?"auto":void 0,h[p]["--col-max-width"]=zoe(e[p],s.columns,s.grow)),typeof n=="object"&&n[p]!==void 0&&(h[p]["--col-offset"]=Hoe(n[p],s.columns)),h},{}),f=TA(Xr(l),i).filter(h=>Xr(l[h.value]).length>0).map(h=>({query:`(min-width: ${i.breakpoints[h.value]})`,styles:l[h.value]}));return b.jsx(Pb,{styles:u,media:f,selector:r})}var WG={root:"m_410352e9",inner:"m_dee7bd2f",col:"m_96bdd299"};const FWe={span:12},GG=Me((e,t)=>{const n=xe("GridCol",FWe,e),{classNames:r,className:i,style:s,styles:o,vars:a,span:u,order:l,offset:c,...f}=n,d=R_e(),h=ak();return b.jsxs(b.Fragment,{children:[b.jsx(LWe,{selector:`.${h}`,span:u,order:l,offset:c}),b.jsx(pe,{ref:t,...d.getStyles("col",{className:Xi(i,h),style:s,classNames:r,styles:o}),...f})]})});GG.classes=WG;GG.displayName="@mantine/core/GridCol";function jWe({gutter:e,selector:t}){const n=ps(),r=Iy({"--grid-gutter":as(kf(e))}),i=Xr(n.breakpoints).reduce((a,u)=>(a[u]||(a[u]={}),typeof e=="object"&&e[u]!==void 0&&(a[u]["--grid-gutter"]=as(e[u])),a),{}),o=TA(Xr(i),n).filter(a=>Xr(i[a.value]).length>0).map(a=>({query:`(min-width: ${n.breakpoints[a.value]})`,styles:i[a.value]}));return b.jsx(Pb,{styles:r,media:o,selector:t})}const BWe={gutter:"md",grow:!1,columns:12},UWe=(e,{justify:t,align:n,overflow:r})=>({root:{"--grid-justify":t,"--grid-align":n,"--grid-overflow":r}}),qa=Me((e,t)=>{const n=xe("Grid",BWe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,grow:l,gutter:c,columns:f,align:d,justify:h,children:p,...m}=n,g=dt({name:"Grid",classes:WG,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:UWe}),y=ak();return b.jsxs(MWe,{value:{getStyles:g,grow:l,columns:f},children:[b.jsx(jWe,{selector:`.${y}`,...n}),b.jsx(pe,{ref:t,...g("root",{className:y}),...m,children:b.jsx("div",{...g("inner"),children:p})})]})});qa.classes=WG;qa.displayName="@mantine/core/Grid";qa.Col=GG;var N_e={root:"m_9e117634"};const zWe={},VWe=(e,{radius:t,fit:n})=>({root:{"--image-radius":t===void 0?void 0:Ur(t),"--image-object-fit":n}}),Dy=Us((e,t)=>{const n=xe("Image",zWe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,onError:l,src:c,radius:f,fit:d,fallbackSrc:h,mod:p,...m}=n,[g,y]=I.useState(!c);I.useEffect(()=>y(!c),[c]);const v=dt({name:"Image",classes:N_e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:VWe});return g&&h?b.jsx(pe,{component:"img",ref:t,src:h,...v("root"),onError:l,mod:["fallback",p],...m}):b.jsx(pe,{component:"img",ref:t,...v("root"),src:c,onError:_=>{l==null||l(_),y(!0)},mod:p,...m})});Dy.classes=N_e;Dy.displayName="@mantine/core/Image";function YO(){return YO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},YO.apply(null,arguments)}function YG(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}var HWe=I.useLayoutEffect,qWe=function(t){var n=I.useRef(t);return HWe(function(){n.current=t}),n},qoe=function(t,n){if(typeof t=="function"){t(n);return}t.current=n},WWe=function(t,n){var r=I.useRef();return I.useCallback(function(i){t.current=i,r.current&&qoe(r.current,null),r.current=n,n&&qoe(n,i)},[n])},Woe={"min-height":"0","max-height":"none",height:"0",visibility:"hidden",overflow:"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0"},GWe=function(t){Object.keys(Woe).forEach(function(n){t.style.setProperty(n,Woe[n],"important")})},Goe=GWe,Na=null,Yoe=function(t,n){var r=t.scrollHeight;return n.sizingStyle.boxSizing==="border-box"?r+n.borderSize:r-n.paddingSize};function YWe(e,t,n,r){n===void 0&&(n=1),r===void 0&&(r=1/0),Na||(Na=document.createElement("textarea"),Na.setAttribute("tabindex","-1"),Na.setAttribute("aria-hidden","true"),Goe(Na)),Na.parentNode===null&&document.body.appendChild(Na);var i=e.paddingSize,s=e.borderSize,o=e.sizingStyle,a=o.boxSizing;Object.keys(o).forEach(function(d){var h=d;Na.style[h]=o[h]}),Goe(Na),Na.value=t;var u=Yoe(Na,e);Na.value=t,u=Yoe(Na,e),Na.value="x";var l=Na.scrollHeight-i,c=l*n;a==="border-box"&&(c=c+i+s),u=Math.max(c,u);var f=l*r;return a==="border-box"&&(f=f+i+s),u=Math.min(f,u),[u,l]}var Koe=function(){},KWe=function(t,n){return t.reduce(function(r,i){return r[i]=n[i],r},{})},XWe=["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth","boxSizing","fontFamily","fontSize","fontStyle","fontWeight","letterSpacing","lineHeight","paddingBottom","paddingLeft","paddingRight","paddingTop","tabSize","textIndent","textRendering","textTransform","width","wordBreak"],QWe=!!document.documentElement.currentStyle,JWe=function(t){var n=window.getComputedStyle(t);if(n===null)return null;var r=KWe(XWe,n),i=r.boxSizing;if(i==="")return null;QWe&&i==="border-box"&&(r.width=parseFloat(r.width)+parseFloat(r.borderRightWidth)+parseFloat(r.borderLeftWidth)+parseFloat(r.paddingRight)+parseFloat(r.paddingLeft)+"px");var s=parseFloat(r.paddingBottom)+parseFloat(r.paddingTop),o=parseFloat(r.borderBottomWidth)+parseFloat(r.borderTopWidth);return{sizingStyle:r,paddingSize:s,borderSize:o}},ZWe=JWe;function P_e(e,t,n){var r=qWe(n);I.useLayoutEffect(function(){var i=function(o){return r.current(o)};if(e)return e.addEventListener(t,i),function(){return e.removeEventListener(t,i)}},[])}var eGe=function(t){P_e(window,"resize",t)},tGe=function(t){P_e(document.fonts,"loadingdone",t)},nGe=["cacheMeasurements","maxRows","minRows","onChange","onHeightChange"],rGe=function(t,n){var r=t.cacheMeasurements,i=t.maxRows,s=t.minRows,o=t.onChange,a=o===void 0?Koe:o,u=t.onHeightChange,l=u===void 0?Koe:u,c=YG(t,nGe),f=c.value!==void 0,d=I.useRef(null),h=WWe(d,n),p=I.useRef(0),m=I.useRef(),g=function(){var _=d.current,w=r&&m.current?m.current:ZWe(_);if(w){m.current=w;var E=YWe(w,_.value||_.placeholder||"x",s,i),S=E[0],T=E[1];p.current!==S&&(p.current=S,_.style.setProperty("height",S+"px","important"),l(S,{rowHeight:T}))}},y=function(_){f||g(),a(_)};return I.useLayoutEffect(g),eGe(g),tGe(g),I.createElement("textarea",YO({},c,{onChange:y,ref:h}))},iGe=I.forwardRef(rGe);const sGe={},KG=Me((e,t)=>{const{autosize:n,maxRows:r,minRows:i,__staticSelector:s,resize:o,...a}=xe("Textarea",sGe,e),u=n&&K1e()!=="test",l=u?{maxRows:r,minRows:i}:{};return b.jsx(Wc,{component:u?iGe:"textarea",ref:t,...a,__staticSelector:s||"Textarea",multiline:!0,"data-no-overflow":n&&r===void 0||void 0,__vars:{"--input-resize":o},...l})});KG.classes=Wc.classes;KG.displayName="@mantine/core/Textarea";const[oGe,aGe]=fo("List component was not found in tree");var XG={root:"m_abbac491",item:"m_abb6bec2",itemWrapper:"m_75cd9f71",itemIcon:"m_60f83e5b"};const uGe={},QG=Me((e,t)=>{const n=xe("ListItem",uGe,e),{classNames:r,className:i,style:s,styles:o,vars:a,icon:u,children:l,mod:c,...f}=n,d=aGe(),h=u||d.icon,p={classNames:r,styles:o};return b.jsx(pe,{...d.getStyles("item",{...p,className:i,style:s}),component:"li",mod:[{"with-icon":!!h,centered:d.center},c],ref:t,...f,children:b.jsxs("div",{...d.getStyles("itemWrapper",p),children:[h&&b.jsx("span",{...d.getStyles("itemIcon",p),children:h}),b.jsx("span",{...d.getStyles("itemLabel",p),children:l})]})})});QG.classes=XG;QG.displayName="@mantine/core/ListItem";const lGe={type:"unordered"},cGe=(e,{size:t,spacing:n})=>({root:{"--list-fz":uo(t),"--list-lh":U1e(t),"--list-spacing":as(n)}}),Bf=Me((e,t)=>{const n=xe("List",lGe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,children:l,type:c,withPadding:f,icon:d,spacing:h,center:p,listStyleType:m,mod:g,...y}=n,v=dt({name:"List",classes:XG,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:cGe});return b.jsx(oGe,{value:{center:p,icon:d,getStyles:v},children:b.jsx(pe,{...v("root",{style:{listStyleType:m}}),component:c==="unordered"?"ul":"ol",mod:[{"with-padding":f},g],ref:t,...y,children:l})})});Bf.classes=XG;Bf.displayName="@mantine/core/List";Bf.Item=QG;var D_e={root:"m_6e45937b",loader:"m_e8eb006c",overlay:"m_df587f17"};const Xoe={transitionProps:{transition:"fade",duration:0},overlayProps:{backgroundOpacity:.75},zIndex:Zl("overlay")},fGe=(e,{zIndex:t})=>({root:{"--lo-z-index":t==null?void 0:t.toString()}}),Fl=Me((e,t)=>{const n=xe("LoadingOverlay",Xoe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,transitionProps:l,loaderProps:c,overlayProps:f,visible:d,zIndex:h,...p}=n,m=ps(),g=dt({name:"LoadingOverlay",classes:D_e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:fGe}),y={...Xoe.overlayProps,...f};return b.jsx(Wm,{transition:"fade",...l,mounted:!!d,children:v=>b.jsxs(pe,{...g("root",{style:v}),ref:t,...p,children:[b.jsx(od,{...g("loader"),unstyled:a,...c}),b.jsx(IA,{...y,...g("overlay"),darkHidden:!0,unstyled:a,color:(f==null?void 0:f.color)||m.white}),b.jsx(IA,{...y,...g("overlay"),lightHidden:!0,unstyled:a,color:(f==null?void 0:f.color)||m.colors.dark[5]})]})})});Fl.classes=D_e;Fl.displayName="@mantine/core/LoadingOverlay";const[dGe,hk]=fo("Menu component was not found in the tree");var rS={dropdown:"m_dc9b7c9f",label:"m_9bfac126",divider:"m_efdf90cb",item:"m_99ac2aa1",itemLabel:"m_5476e0d3",itemSection:"m_8b75e504"};const hGe={},JG=Me((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=xe("MenuDivider",hGe,e),u=hk();return b.jsx(pe,{ref:t,...u.getStyles("divider",{className:r,style:i,styles:s,classNames:n}),...a})});JG.classes=rS;JG.displayName="@mantine/core/MenuDivider";const pGe={},ZG=Me((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,onMouseEnter:a,onMouseLeave:u,children:l,...c}=xe("MenuDropdown",pGe,e),f=I.useRef(null),d=hk(),h=g=>{var y,v;(g.key==="ArrowUp"||g.key==="ArrowDown")&&(g.preventDefault(),(v=(y=f.current)==null?void 0:y.querySelectorAll("[data-menu-item]:not(:disabled)")[0])==null||v.focus())},p=Gp(a,()=>(d.trigger==="hover"||d.trigger==="click-hover")&&d.openDropdown()),m=Gp(u,()=>(d.trigger==="hover"||d.trigger==="click-hover")&&d.closeDropdown());return b.jsxs(Po.Dropdown,{...c,onMouseEnter:p,onMouseLeave:m,role:"menu","aria-orientation":"vertical",ref:hs(t,f),...d.getStyles("dropdown",{className:r,style:i,styles:s,classNames:n,withStaticClass:!1}),tabIndex:-1,"data-menu-dropdown":!0,onKeyDown:h,children:[b.jsx("div",{tabIndex:-1,"data-autofocus":!0,"aria-hidden":!0,style:{outline:0}}),l]})});ZG.classes=rS;ZG.displayName="@mantine/core/MenuDropdown";const mGe={},eY=Us((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,color:a,closeMenuOnClick:u,leftSection:l,rightSection:c,children:f,disabled:d,...h}=xe("MenuItem",mGe,e),p=hk(),m=ps(),{dir:g}=qh(),y=I.useRef(),v=p.getItemIndex(y.current),_=h,w=Gp(_.onMouseLeave,()=>p.setHovered(-1)),E=Gp(_.onMouseEnter,()=>p.setHovered(p.getItemIndex(y.current))),S=Gp(_.onClick,()=>{typeof u=="boolean"?u&&p.closeDropdownImmediately():p.closeOnItemClick&&p.closeDropdownImmediately()}),T=Gp(_.onFocus,()=>p.setHovered(p.getItemIndex(y.current))),C=a?m.variantColorResolver({color:a,theme:m,variant:"light"}):void 0,A=a?Hh({color:a,theme:m}):null;return b.jsxs(xs,{...h,unstyled:p.unstyled,tabIndex:p.menuItemTabIndex,onFocus:T,...p.getStyles("item",{className:r,style:i,styles:s,classNames:n}),ref:hs(y,t),role:"menuitem",disabled:d,"data-menu-item":!0,"data-disabled":d||void 0,"data-hovered":p.hovered===v?!0:void 0,onMouseEnter:E,onMouseLeave:w,onClick:S,onKeyDown:PW({siblingSelector:"[data-menu-item]",parentSelector:"[data-menu-dropdown]",activateOnFocus:!1,loop:p.loop,dir:g,orientation:"vertical",onKeyDown:_.onKeydown}),__vars:{"--menu-item-color":A!=null&&A.isThemeColor&&(A==null?void 0:A.shade)===void 0?`var(--mantine-color-${A.color}-6)`:C==null?void 0:C.color,"--menu-item-hover":C==null?void 0:C.hover},children:[l&&b.jsx("div",{...p.getStyles("itemSection",{styles:s,classNames:n}),"data-position":"left",children:l}),f&&b.jsx("div",{...p.getStyles("itemLabel",{styles:s,classNames:n}),children:f}),c&&b.jsx("div",{...p.getStyles("itemSection",{styles:s,classNames:n}),"data-position":"right",children:c})]})});eY.classes=rS;eY.displayName="@mantine/core/MenuItem";const gGe={},tY=Me((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=xe("MenuLabel",gGe,e),u=hk();return b.jsx(pe,{ref:t,...u.getStyles("label",{className:r,style:i,styles:s,classNames:n}),...a})});tY.classes=rS;tY.displayName="@mantine/core/MenuLabel";const yGe={refProp:"ref"},O_e=I.forwardRef((e,t)=>{const{children:n,refProp:r,...i}=xe("MenuTarget",yGe,e);if(!ky(n))throw new Error("Menu.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const s=hk(),o=Gp(n.props.onClick,()=>{s.trigger==="click"?s.toggleDropdown():s.trigger==="click-hover"&&(s.setOpenedViaClick(!0),s.opened||s.openDropdown())}),a=Gp(n.props.onMouseEnter,()=>(s.trigger==="hover"||s.trigger==="click-hover")&&s.openDropdown()),u=Gp(n.props.onMouseLeave,()=>{(s.trigger==="hover"||s.trigger==="click-hover"&&!s.openedViaClick)&&s.closeDropdown()});return b.jsx(Po.Target,{refProp:r,popupType:"menu",ref:t,...i,children:I.cloneElement(n,{onClick:o,onMouseEnter:a,onMouseLeave:u,"data-expanded":s.opened?!0:void 0})})});O_e.displayName="@mantine/core/MenuTarget";const vGe={trapFocus:!0,closeOnItemClick:!0,clickOutsideEvents:["mousedown","touchstart","keydown"],loop:!0,trigger:"click",openDelay:0,closeDelay:100,menuItemTabIndex:-1};function Au(e){const t=xe("Menu",vGe,e),{children:n,onOpen:r,onClose:i,opened:s,defaultOpened:o,trapFocus:a,onChange:u,closeOnItemClick:l,loop:c,closeOnEscape:f,trigger:d,openDelay:h,closeDelay:p,classNames:m,styles:g,unstyled:y,variant:v,vars:_,menuItemTabIndex:w,keepMounted:E,...S}=t,T=dt({name:"Menu",classes:rS,props:t,classNames:m,styles:g,unstyled:y}),[C,{setHovered:A,resetHovered:k}]=xUe(),[N,O]=Ss({value:s,defaultValue:o,finalValue:!1,onChange:u}),[D,$]=I.useState(!1),F=()=>{O(!1),$(!1),N&&(i==null||i())},M=()=>{O(!0),!N&&(r==null||r())},B=()=>{N?F():M()},{openDropdown:U,closeDropdown:H}=$We({open:M,close:F,closeDelay:p,openDelay:h}),P=j=>EUe("[data-menu-item]","[data-menu-dropdown]",j),{resolvedClassNames:z,resolvedStyles:W}=Hm({classNames:m,styles:g,props:t});return Th(()=>{k()},[N]),b.jsx(dGe,{value:{getStyles:T,opened:N,toggleDropdown:B,getItemIndex:P,hovered:C,setHovered:A,openedViaClick:D,setOpenedViaClick:$,closeOnItemClick:l,closeDropdown:d==="click"?F:H,openDropdown:d==="click"?M:U,closeDropdownImmediately:F,loop:c,trigger:d,unstyled:y,menuItemTabIndex:w},children:b.jsx(Po,{...S,opened:N,onChange:B,defaultOpened:o,trapFocus:E?!1:a,closeOnEscape:f,__staticSelector:"Menu",classNames:z,styles:W,unstyled:y,variant:v,keepMounted:E,children:n})})}Au.extend=e=>e;Au.classes=rS;Au.displayName="@mantine/core/Menu";Au.Item=eY;Au.Label=tY;Au.Dropdown=ZG;Au.Target=O_e;Au.Divider=JG;const[bGe,iS]=fo("Modal component was not found in tree");var Xm={root:"m_9df02822",content:"m_54c44539",inner:"m_1f958f16",header:"m_d0e2b9cd"};const _Ge={},VL=Me((e,t)=>{const n=xe("ModalBody",_Ge,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=iS();return b.jsx(lG,{ref:t,...l.getStyles("body",{classNames:r,style:s,styles:o,className:i}),...u})});VL.classes=Xm;VL.displayName="@mantine/core/ModalBody";const wGe={},HL=Me((e,t)=>{const n=xe("ModalCloseButton",wGe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=iS();return b.jsx(cG,{ref:t,...l.getStyles("close",{classNames:r,style:s,styles:o,className:i}),...u})});HL.classes=Xm;HL.displayName="@mantine/core/ModalCloseButton";const EGe={},qL=Me((e,t)=>{const n=xe("ModalContent",EGe,e),{classNames:r,className:i,style:s,styles:o,vars:a,children:u,...l}=n,c=iS(),f=c.scrollAreaComponent||Xbe;return b.jsx(Kbe,{...c.getStyles("content",{className:i,style:s,styles:o,classNames:r}),innerProps:c.getStyles("inner",{className:i,style:s,styles:o,classNames:r}),"data-full-screen":c.fullScreen||void 0,"data-modal-content":!0,ref:t,...l,children:b.jsx(f,{style:{maxHeight:c.fullScreen?"100dvh":`calc(100dvh - (${Te(c.yOffset)} * 2))`},children:u})})});qL.classes=Xm;qL.displayName="@mantine/core/ModalContent";const xGe={},WL=Me((e,t)=>{const n=xe("ModalHeader",xGe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=iS();return b.jsx(fG,{ref:t,...l.getStyles("header",{classNames:r,style:s,styles:o,className:i}),...u})});WL.classes=Xm;WL.displayName="@mantine/core/ModalHeader";const SGe={},GL=Me((e,t)=>{const n=xe("ModalOverlay",SGe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=iS();return b.jsx(dG,{ref:t,...l.getStyles("overlay",{classNames:r,style:s,styles:o,className:i}),...u})});GL.classes=Xm;GL.displayName="@mantine/core/ModalOverlay";const TGe={__staticSelector:"Modal",closeOnClickOutside:!0,withinPortal:!0,lockScroll:!0,trapFocus:!0,returnFocus:!0,closeOnEscape:!0,keepMounted:!1,zIndex:Zl("modal"),transitionProps:{duration:200,transition:"pop"},yOffset:"5dvh"},CGe=(e,{radius:t,size:n,yOffset:r,xOffset:i})=>({root:{"--modal-radius":t===void 0?void 0:Ur(t),"--modal-size":tn(n,"modal-size"),"--modal-y-offset":Te(r),"--modal-x-offset":Te(i)}}),YL=Me((e,t)=>{const n=xe("ModalRoot",TGe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,yOffset:l,scrollAreaComponent:c,radius:f,fullScreen:d,centered:h,xOffset:p,__staticSelector:m,...g}=n,y=dt({name:m,classes:Xm,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:CGe});return b.jsx(bGe,{value:{yOffset:l,scrollAreaComponent:c,getStyles:y,fullScreen:d},children:b.jsx(Ybe,{ref:t,...y("root"),"data-full-screen":d||void 0,"data-centered":h||void 0,unstyled:a,...g})})});YL.classes=Xm;YL.displayName="@mantine/core/ModalRoot";const AGe={},KL=Me((e,t)=>{const n=xe("ModalTitle",AGe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=iS();return b.jsx(hG,{ref:t,...l.getStyles("title",{classNames:r,style:s,styles:o,className:i}),...u})});KL.classes=Xm;KL.displayName="@mantine/core/ModalTitle";const IGe={closeOnClickOutside:!0,withinPortal:!0,lockScroll:!0,trapFocus:!0,returnFocus:!0,closeOnEscape:!0,keepMounted:!1,zIndex:Zl("modal"),transitionProps:{duration:200,transition:"fade-down"},withOverlay:!0,withCloseButton:!0},Yi=Me((e,t)=>{const{title:n,withOverlay:r,overlayProps:i,withCloseButton:s,closeButtonProps:o,children:a,radius:u,...l}=xe("Modal",IGe,e),c=!!n||s;return b.jsxs(YL,{ref:t,radius:u,...l,children:[r&&b.jsx(GL,{...i}),b.jsxs(qL,{radius:u,children:[c&&b.jsxs(WL,{children:[n&&b.jsx(KL,{children:n}),s&&b.jsx(HL,{...o})]}),b.jsx(VL,{children:a})]})]})});Yi.classes=Xm;Yi.displayName="@mantine/core/Modal";Yi.Root=YL;Yi.Overlay=GL;Yi.Content=qL;Yi.Body=VL;Yi.Header=WL;Yi.Title=KL;Yi.CloseButton=HL;const[kGe,nY]=Yx(),[RGe,NGe]=Yx();var XL={root:"m_7cda1cd6","root--default":"m_44da308b","root--contrast":"m_e3a01f8",label:"m_1e0e6180",remove:"m_ae386778",group:"m_1dcfd90b"};const PGe={},DGe=(e,{gap:t},{size:n})=>({group:{"--pg-gap":t!==void 0?tn(t):tn(n,"pg-gap")}}),rY=Me((e,t)=>{const n=xe("PillGroup",PGe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,size:l,disabled:c,...f}=n,d=nY(),h=(d==null?void 0:d.size)||l||void 0,p=dt({name:"PillGroup",classes:XL,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:DGe,stylesCtx:{size:h},rootSelector:"group"});return b.jsx(RGe,{value:{size:h,disabled:c},children:b.jsx(pe,{ref:t,size:h,...p("group"),...f})})});rY.classes=XL;rY.displayName="@mantine/core/PillGroup";const OGe={variant:"default"},$Ge=(e,{radius:t},{size:n})=>({root:{"--pill-fz":tn(n,"pill-fz"),"--pill-height":tn(n,"pill-height"),"--pill-radius":t===void 0?void 0:Ur(t)}}),kA=Me((e,t)=>{const n=xe("Pill",OGe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,variant:l,children:c,withRemoveButton:f,onRemove:d,removeButtonProps:h,radius:p,size:m,disabled:g,mod:y,...v}=n,_=NGe(),w=nY(),E=m||(_==null?void 0:_.size)||void 0,S=(w==null?void 0:w.variant)==="filled"?"contrast":l||"default",T=dt({name:"Pill",classes:XL,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:$Ge,stylesCtx:{size:E}});return b.jsxs(pe,{component:"span",ref:t,variant:S,size:E,...T("root",{variant:S}),mod:[{"with-remove":f&&!g,disabled:g||(_==null?void 0:_.disabled)},y],...v,children:[b.jsx("span",{...T("label"),children:c}),f&&b.jsx(Gm,{variant:"transparent",radius:p,tabIndex:-1,"aria-hidden":!0,unstyled:a,...h,...T("remove",{className:h==null?void 0:h.className,style:h==null?void 0:h.style}),onMouseDown:C=>{var A;C.preventDefault(),C.stopPropagation(),(A=h==null?void 0:h.onMouseDown)==null||A.call(h,C)},onClick:C=>{var A;C.stopPropagation(),d==null||d(),(A=h==null?void 0:h.onClick)==null||A.call(h,C)}})]})});kA.classes=XL;kA.displayName="@mantine/core/Pill";kA.Group=rY;var $_e={field:"m_45c4369d"};const MGe={type:"visible"},iY=Me((e,t)=>{const n=xe("PillsInputField",MGe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,type:l,disabled:c,id:f,pointer:d,mod:h,...p}=n,m=nY(),g=Zx(),y=dt({name:"PillsInputField",classes:$_e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"field"}),v=c||(m==null?void 0:m.disabled);return b.jsx(pe,{component:"input",ref:hs(t,m==null?void 0:m.fieldRef),"data-type":l,disabled:v,mod:[{disabled:v,pointer:d},h],...y("field"),...p,id:(g==null?void 0:g.inputId)||f,"aria-invalid":m==null?void 0:m.hasError,"aria-describedby":g==null?void 0:g.describedBy,type:"text",onMouseDown:_=>!d&&_.stopPropagation()})});iY.classes=$_e;iY.displayName="@mantine/core/PillsInputField";const LGe={},KO=Me((e,t)=>{const n=xe("PillsInput",LGe,e),{children:r,onMouseDown:i,onClick:s,size:o,disabled:a,__staticSelector:u,error:l,variant:c,...f}=n,d=I.useRef();return b.jsx(kGe,{value:{fieldRef:d,size:o,disabled:a,hasError:!!l,variant:c},children:b.jsx(Wc,{size:o,error:l,variant:c,component:"div",ref:t,onMouseDown:h=>{var p;h.preventDefault(),i==null||i(h),(p=d.current)==null||p.focus()},onClick:h=>{var p;h.preventDefault(),s==null||s(h),(p=d.current)==null||p.focus()},...f,multiline:!0,disabled:a,__staticSelector:u||"PillsInput",withAria:!1,children:r})})});KO.displayName="@mantine/core/PillsInput";KO.Field=iY;function FGe({data:e,value:t}){const n=t.map(i=>i.trim().toLowerCase());return e.reduce((i,s)=>(LE(s)?i.push({group:s.group,items:s.items.filter(o=>n.indexOf(o.value.toLowerCase().trim())===-1)}):n.indexOf(s.value.toLowerCase().trim())===-1&&i.push(s),i),[])}const jGe={maxValues:1/0,withCheckIcon:!0,checkIconPosition:"left",hiddenInputValuesDivider:","},sY=Me((e,t)=>{const n=xe("MultiSelect",jGe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,size:l,value:c,defaultValue:f,onChange:d,onKeyDown:h,variant:p,data:m,dropdownOpened:g,defaultDropdownOpened:y,onDropdownOpen:v,onDropdownClose:_,selectFirstOptionOnChange:w,onOptionSubmit:E,comboboxProps:S,filter:T,limit:C,withScrollArea:A,maxDropdownHeight:k,searchValue:N,defaultSearchValue:O,onSearchChange:D,readOnly:$,disabled:F,onFocus:M,onBlur:B,onPaste:U,radius:H,rightSection:P,rightSectionWidth:z,rightSectionPointerEvents:W,rightSectionProps:j,leftSection:q,leftSectionWidth:G,leftSectionPointerEvents:ne,leftSectionProps:ce,inputContainer:de,inputWrapperOrder:he,withAsterisk:ve,labelProps:Ie,descriptionProps:be,errorProps:Ke,wrapperProps:Ue,description:yt,label:it,error:_e,maxValues:ke,searchable:ze,nothingFoundMessage:ct,withCheckIcon:Ot,checkIconPosition:We,hidePickedOptions:ge,withErrorStyles:ht,name:vt,form:me,id:Ae,clearable:He,clearButtonProps:ut,hiddenInputProps:_t,placeholder:Ln,hiddenInputValuesDivider:Cr,required:Fn,mod:cr,renderOption:gn,onRemove:An,onClear:nr,scrollAreaProps:rr,...zo}=n,$i=Ta(Ae),In=s_e(m),Mi=AG(In),Ar=FG({opened:g,defaultOpened:y,onDropdownOpen:v,onDropdownClose:()=>{_==null||_(),Ar.resetSelectedOption()}}),{styleProps:gs,rest:{type:pp,autoComplete:fl,..._d}}=Db(zo),[xr,Ii]=Ss({value:c,defaultValue:f,finalValue:[],onChange:d}),[Qr,fu]=Ss({value:N,defaultValue:O,finalValue:"",onChange:D}),Ia=dt({name:"MultiSelect",classes:{},props:n,classNames:r,styles:o,unstyled:a}),{resolvedClassNames:ka,resolvedStyles:oe}=Hm({props:n,styles:o,classNames:r}),ee=ot=>{h==null||h(ot),ot.key===" "&&!ze&&(ot.preventDefault(),Ar.toggleDropdown()),ot.key==="Backspace"&&Qr.length===0&&xr.length>0&&(An==null||An(xr[xr.length-1]),Ii(xr.slice(0,xr.length-1)))},ae=xr.map((ot,St)=>{var Ht,On;return b.jsx(kA,{withRemoveButton:!$&&!((Ht=Mi[ot])!=null&&Ht.disabled),onRemove:()=>{Ii(xr.filter(jn=>ot!==jn)),An==null||An(ot)},unstyled:a,disabled:F,...Ia("pill"),children:((On=Mi[ot])==null?void 0:On.label)||ot},`${ot}-${St}`)});I.useEffect(()=>{w&&Ar.selectFirstOption()},[w,xr]);const Ce=He&&xr.length>0&&!F&&!$&&b.jsx(Kn.ClearButton,{size:l,...ut,onClear:()=>{nr==null||nr(),Ii([]),fu("")}}),Se=FGe({data:In,value:xr});return b.jsxs(b.Fragment,{children:[b.jsxs(Kn,{store:Ar,classNames:ka,styles:oe,unstyled:a,size:l,readOnly:$,__staticSelector:"MultiSelect",onOptionSubmit:ot=>{E==null||E(ot),fu(""),Ar.updateSelectedOptionIndex("selected"),xr.includes(Mi[ot].value)?(Ii(xr.filter(St=>St!==Mi[ot].value)),An==null||An(Mi[ot].value)):xr.length<ke&&Ii([...xr,Mi[ot].value])},...S,children:[b.jsx(Kn.DropdownTarget,{children:b.jsx(KO,{...gs,__staticSelector:"MultiSelect",classNames:ka,styles:oe,unstyled:a,size:l,className:i,style:s,variant:p,disabled:F,radius:H,rightSection:P||Ce||b.jsx(Kn.Chevron,{size:l,error:_e,unstyled:a}),rightSectionPointerEvents:W||(Ce?"all":"none"),rightSectionWidth:z,rightSectionProps:j,leftSection:q,leftSectionWidth:G,leftSectionPointerEvents:ne,leftSectionProps:ce,inputContainer:de,inputWrapperOrder:he,withAsterisk:ve,labelProps:Ie,descriptionProps:be,errorProps:Ke,wrapperProps:Ue,description:yt,label:it,error:_e,multiline:!0,withErrorStyles:ht,__stylesApiProps:{...n,rightSectionPointerEvents:W||(Ce?"all":"none"),multiline:!0},pointer:!ze,onClick:()=>ze?Ar.openDropdown():Ar.toggleDropdown(),"data-expanded":Ar.dropdownOpened||void 0,id:$i,required:Fn,mod:cr,children:b.jsxs(kA.Group,{disabled:F,unstyled:a,...Ia("pillsList"),children:[ae,b.jsx(Kn.EventsTarget,{autoComplete:fl,children:b.jsx(KO.Field,{..._d,ref:t,id:$i,placeholder:Ln,type:!ze&&!Ln?"hidden":"visible",...Ia("inputField"),unstyled:a,onFocus:ot=>{M==null||M(ot),ze&&Ar.openDropdown()},onBlur:ot=>{B==null||B(ot),Ar.closeDropdown(),fu("")},onKeyDown:ee,value:Qr,onChange:ot=>{fu(ot.currentTarget.value),ze&&Ar.openDropdown(),w&&Ar.selectFirstOption()},disabled:F,readOnly:$||!ze,pointer:!ze})})]})})}),b.jsx(x_e,{data:ge?Se:In,hidden:$||F,filter:T,search:Qr,limit:C,hiddenWhenEmpty:!ze||!ct||ge&&Se.length===0&&Qr.trim().length===0,withScrollArea:A,maxDropdownHeight:k,filterOptions:ze,value:xr,checkIconPosition:We,withCheckIcon:Ot,nothingFoundMessage:ct,unstyled:a,labelId:it?`${$i}-label`:void 0,"aria-label":it?void 0:zo["aria-label"],renderOption:gn,scrollAreaProps:rr})]}),b.jsx(Kn.HiddenInput,{name:vt,valuesDivider:Cr,value:xr,form:me,disabled:F,..._t})]})});sY.classes={...Wc.classes,...Kn.classes};sY.displayName="@mantine/core/MultiSelect";var M_e={root:"m_f0824112",description:"m_57492dcc",section:"m_690090b5",label:"m_1f6ac4c4",body:"m_f07af9d2",children:"m_e17b862f",chevron:"m_1fd8a00b"};const BGe={},UGe=(e,{variant:t,color:n,childrenOffset:r,autoContrast:i})=>{const s=e.variantColorResolver({color:n||e.primaryColor,theme:e,variant:t||"light",autoContrast:i});return{root:{"--nl-bg":n||t?s.background:void 0,"--nl-hover":n||t?s.hover:void 0,"--nl-color":n||t?s.color:void 0},children:{"--nl-offset":as(r)}}},QL=Us((e,t)=>{const n=xe("NavLink",BGe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,opened:l,defaultOpened:c,onChange:f,children:d,onClick:h,active:p,disabled:m,leftSection:g,rightSection:y,label:v,description:_,disableRightSectionRotation:w,noWrap:E,childrenOffset:S,onKeyDown:T,autoContrast:C,mod:A,...k}=n,N=dt({name:"NavLink",props:n,classes:M_e,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:UGe}),[O,D]=Ss({value:l,defaultValue:c,finalValue:!1,onChange:f}),$=!!d,F=M=>{h==null||h(M),$&&(M.preventDefault(),D(!O))};return b.jsxs(b.Fragment,{children:[b.jsxs(xs,{...N("root"),component:"a",ref:t,onClick:F,onKeyDown:M=>{T==null||T(M),M.nativeEvent.code==="Space"&&$&&(M.preventDefault(),D(!O))},unstyled:a,mod:[{disabled:m,active:p,expanded:O},A],...k,children:[g&&b.jsx(pe,{component:"span",...N("section"),mod:{position:"left"},children:g}),b.jsxs(pe,{...N("body"),mod:{"no-wrap":E},children:[b.jsx(pe,{component:"span",...N("label"),children:v}),b.jsx(pe,{component:"span",mod:{active:p},...N("description"),children:_})]}),($||y)&&b.jsx(pe,{...N("section"),component:"span",mod:{rotate:O&&!w,position:"right"},children:$?y||b.jsx(ME,{...N("chevron")}):y})]}),b.jsx(TL,{in:O,...N("collapse"),children:b.jsx("div",{...N("children"),children:d})})]})});QL.classes=M_e;QL.displayName="@mantine/core/NavLink";var L_e={root:"m_a513464",icon:"m_a4ceffb",loader:"m_b0920b15",body:"m_a49ed24",title:"m_3feedf16",description:"m_3d733a3a",closeButton:"m_919a4d88"};const zGe={withCloseButton:!0},VGe=(e,{radius:t,color:n})=>({root:{"--notification-radius":t===void 0?void 0:Ur(t),"--notification-color":n?$r(n,e):void 0}}),oY=Me((e,t)=>{const n=xe("Notification",zGe,e),{className:r,color:i,radius:s,loading:o,withCloseButton:a,withBorder:u,title:l,icon:c,children:f,onClose:d,closeButtonProps:h,classNames:p,style:m,styles:g,unstyled:y,variant:v,vars:_,mod:w,...E}=n,S=dt({name:"Notification",classes:L_e,props:n,className:r,style:m,classNames:p,styles:g,unstyled:y,vars:_,varsResolver:VGe});return b.jsxs(pe,{...S("root"),mod:[{"data-with-icon":!!c||o,"data-with-border":u},w],ref:t,variant:v,...E,role:"alert",children:[c&&!o&&b.jsx("div",{...S("icon"),children:c}),o&&b.jsx(od,{size:28,color:i,...S("loader")}),b.jsxs("div",{...S("body"),children:[l&&b.jsx("div",{...S("title"),children:l}),b.jsx(pe,{...S("description"),mod:{"data-with-title":!!l},children:f})]}),a&&b.jsx(Gm,{iconSize:16,color:"gray",...h,unstyled:y,onClick:d,...S("closeButton")})]})});oY.classes=L_e;oY.displayName="@mantine/core/Notification";function F_e(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}var RA;(function(e){e.event="event",e.props="prop"})(RA||(RA={}));function Vg(){}function HGe(e){var t,n=void 0;return function(){for(var r=[],i=arguments.length;i--;)r[i]=arguments[i];return t&&r.length===t.length&&r.every(function(s,o){return s===t[o]})||(t=r,n=e.apply(void 0,r)),n}}function NA(e){return!!(e||"").match(/\d/)}function Kw(e){return e==null}function qGe(e){return typeof e=="number"&&isNaN(e)}function j_e(e){return Kw(e)||qGe(e)||typeof e=="number"&&!isFinite(e)}function B_e(e){return e.replace(/[-[\]/{}()*+?.\\^$|]/g,"\\$&")}function WGe(e){switch(e){case"lakh":return/(\d+?)(?=(\d\d)+(\d)(?!\d))(\.\d+)?/g;case"wan":return/(\d)(?=(\d{4})+(?!\d))/g;case"thousand":default:return/(\d)(?=(\d{3})+(?!\d))/g}}function GGe(e,t,n){var r=WGe(n),i=e.search(/[1-9]/);return i=i===-1?e.length:i,e.substring(0,i)+e.substring(i,e.length).replace(r,"$1"+t)}function YGe(e){var t=I.useRef(e);t.current=e;var n=I.useRef(function(){for(var r=[],i=arguments.length;i--;)r[i]=arguments[i];return t.current.apply(t,r)});return n.current}function aY(e,t){t===void 0&&(t=!0);var n=e[0]==="-",r=n&&t;e=e.replace("-","");var i=e.split("."),s=i[0],o=i[1]||"";return{beforeDecimal:s,afterDecimal:o,hasNegation:n,addNegation:r}}function KGe(e){if(!e)return e;var t=e[0]==="-";t&&(e=e.substring(1,e.length));var n=e.split("."),r=n[0].replace(/^0+/,"")||"0",i=n[1]||"";return(t?"-":"")+r+(i?"."+i:"")}function U_e(e,t,n){for(var r="",i=n?"0":"",s=0;s<=t-1;s++)r+=e[s]||i;return r}function Qoe(e,t){return Array(t+1).join(e)}function z_e(e){var t=e+"",n=t[0]==="-"?"-":"";n&&(t=t.substring(1));var r=t.split(/[eE]/g),i=r[0],s=r[1];if(s=Number(s),!s)return n+i;i=i.replace(".","");var o=1+s,a=i.length;return o<0?i="0."+Qoe("0",Math.abs(o))+i:o>=a?i=i+Qoe("0",o-a):i=(i.substring(0,o)||"0")+"."+i.substring(o),n+i}function Joe(e,t,n){if(["","-"].indexOf(e)!==-1)return e;var r=(e.indexOf(".")!==-1||n)&&t,i=aY(e),s=i.beforeDecimal,o=i.afterDecimal,a=i.hasNegation,u=parseFloat("0."+(o||"0")),l=o.length<=t?"0."+o:u.toFixed(t),c=l.split("."),f=s;s&&Number(c[0])&&(f=s.split("").reverse().reduce(function(m,g,y){return m.length>y?(Number(m[0])+Number(g)).toString()+m.substring(1,m.length):g+m},c[0]));var d=U_e(c[1]||"",t,n),h=a?"-":"",p=r?".":"";return""+h+f+p+d}function Uv(e,t){if(e.value=e.value,e!==null){if(e.createTextRange){var n=e.createTextRange();return n.move("character",t),n.select(),!0}return e.selectionStart||e.selectionStart===0?(e.focus(),e.setSelectionRange(t,t),!0):(e.focus(),!1)}}var V_e=HGe(function(e,t){for(var n=0,r=0,i=e.length,s=t.length;e[n]===t[n]&&n<i;)n++;for(;e[i-1-r]===t[s-1-r]&&s-r>n&&i-r>n;)r++;return{from:{start:n,end:i-r},to:{start:n,end:s-r}}}),XGe=function(e,t){var n=Math.min(e.selectionStart,t);return{from:{start:n,end:e.selectionEnd},to:{start:n,end:t}}};function QGe(e,t,n){return Math.min(Math.max(e,t),n)}function Hj(e){return Math.max(e.selectionStart,e.selectionEnd)}function JGe(){return typeof navigator<"u"&&!(navigator.platform&&/iPhone|iPod/.test(navigator.platform))}function ZGe(e){return{from:{start:0,end:0},to:{start:0,end:e.length},lastValue:""}}function eYe(e){var t=e.currentValue,n=e.formattedValue,r=e.currentValueIndex,i=e.formattedValueIndex;return t[r]===n[i]}function tYe(e,t,n,r,i,s,o){o===void 0&&(o=eYe);var a=i.findIndex(function(w){return w}),u=e.slice(0,a);!t&&!n.startsWith(u)&&(t=u,n=u+n,r=r+u.length);for(var l=n.length,c=e.length,f={},d=new Array(l),h=0;h<l;h++){d[h]=-1;for(var p=0,m=c;p<m;p++){var g=o({currentValue:n,lastValue:t,formattedValue:e,currentValueIndex:h,formattedValueIndex:p});if(g&&f[p]!==!0){d[h]=p,f[p]=!0;break}}}for(var y=r;y<l&&(d[y]===-1||!s(n[y]));)y++;var v=y===l||d[y]===-1?c:d[y];for(y=r-1;y>0&&d[y]===-1;)y--;var _=y===-1||d[y]===-1?0:d[y]+1;return _>v?v:r-_<v-r?_:v}function Zoe(e,t,n,r){var i=e.length;if(t=QGe(t,0,i),r==="left"){for(;t>=0&&!n[t];)t--;t===-1&&(t=n.indexOf(!0))}else{for(;t<=i&&!n[t];)t++;t>i&&(t=n.lastIndexOf(!0))}return t===-1&&(t=i),t}function nYe(e){for(var t=Array.from({length:e.length+1}).map(function(){return!0}),n=0,r=t.length;n<r;n++)t[n]=!!(NA(e[n])||NA(e[n-1]));return t}function H_e(e,t,n,r,i,s){s===void 0&&(s=Vg);var o=YGe(function(p,m){var g,y;return j_e(p)?(y="",g=""):typeof p=="number"||m?(y=typeof p=="number"?z_e(p):p,g=r(y)):(y=i(p,void 0),g=r(y)),{formattedValue:g,numAsString:y}}),a=I.useState(function(){return o(Kw(e)?t:e,n)}),u=a[0],l=a[1],c=function(p,m){p.formattedValue!==u.formattedValue&&l({formattedValue:p.formattedValue,numAsString:p.value}),s(p,m)},f=e,d=n;Kw(e)&&(f=u.numAsString,d=!0);var h=o(f,d);return I.useMemo(function(){l(h)},[h.formattedValue]),[u,c]}function rYe(e){return e.replace(/[^0-9]/g,"")}function iYe(e){return e}function sYe(e){var t=e.type;t===void 0&&(t="text");var n=e.displayType;n===void 0&&(n="input");var r=e.customInput,i=e.renderText,s=e.getInputRef,o=e.format;o===void 0&&(o=iYe);var a=e.removeFormatting;a===void 0&&(a=rYe);var u=e.defaultValue,l=e.valueIsNumericString,c=e.onValueChange,f=e.isAllowed,d=e.onChange;d===void 0&&(d=Vg);var h=e.onKeyDown;h===void 0&&(h=Vg);var p=e.onMouseUp;p===void 0&&(p=Vg);var m=e.onFocus;m===void 0&&(m=Vg);var g=e.onBlur;g===void 0&&(g=Vg);var y=e.value,v=e.getCaretBoundary;v===void 0&&(v=nYe);var _=e.isValidInputCharacter;_===void 0&&(_=NA);var w=e.isCharacterSame,E=F_e(e,["type","displayType","customInput","renderText","getInputRef","format","removeFormatting","defaultValue","valueIsNumericString","onValueChange","isAllowed","onChange","onKeyDown","onMouseUp","onFocus","onBlur","value","getCaretBoundary","isValidInputCharacter","isCharacterSame"]),S=H_e(y,u,!!l,o,a,c),T=S[0],C=T.formattedValue,A=T.numAsString,k=S[1],N=I.useRef(),O=I.useRef({formattedValue:C,numAsString:A}),D=function(_e,ke){O.current={formattedValue:_e.formattedValue,numAsString:_e.value},k(_e,ke)},$=I.useState(!1),F=$[0],M=$[1],B=I.useRef(null),U=I.useRef({setCaretTimeout:null,focusTimeout:null});I.useEffect(function(){return M(!0),function(){clearTimeout(U.current.setCaretTimeout),clearTimeout(U.current.focusTimeout)}},[]);var H=o,P=function(_e,ke){var ze=parseFloat(ke);return{formattedValue:_e,value:ke,floatValue:isNaN(ze)?void 0:ze}},z=function(_e,ke,ze){_e.selectionStart===0&&_e.selectionEnd===_e.value.length||(Uv(_e,ke),U.current.setCaretTimeout=setTimeout(function(){_e.value===ze&&_e.selectionStart!==ke&&Uv(_e,ke)},0))},W=function(_e,ke,ze){return Zoe(_e,ke,v(_e),ze)},j=function(_e,ke,ze){var ct=v(ke),Ot=tYe(ke,C,_e,ze,ct,_,w);return Ot=Zoe(ke,Ot,ct),Ot},q=function(_e){var ke=_e.formattedValue;ke===void 0&&(ke="");var ze=_e.input,ct=_e.source,Ot=_e.event,We=_e.numAsString,ge;if(ze){var ht=_e.inputValue||ze.value,vt=Hj(ze);ze.value=ke,ge=j(ht,ke,vt),ge!==void 0&&z(ze,ge,ke)}ke!==C&&D(P(ke,We),{event:Ot,source:ct})};I.useEffect(function(){var _e=O.current,ke=_e.formattedValue,ze=_e.numAsString;(C!==ke||A!==ze)&&D(P(C,A),{event:void 0,source:RA.props})},[C,A]);var G=B.current?Hj(B.current):void 0,ne=typeof window<"u"?I.useLayoutEffect:I.useEffect;ne(function(){var _e=B.current;if(C!==O.current.formattedValue&&_e){var ke=j(O.current.formattedValue,C,G);_e.value=C,z(_e,ke,C)}},[C]);var ce=function(_e,ke,ze){var ct=ke.target,Ot=N.current?XGe(N.current,ct.selectionEnd):V_e(C,_e),We=Object.assign(Object.assign({},Ot),{lastValue:C}),ge=a(_e,We),ht=H(ge);if(ge=a(ht,void 0),f&&!f(P(ht,ge))){var vt=ke.target,me=Hj(vt),Ae=j(_e,C,me);return vt.value=C,z(vt,Ae,C),!1}return q({formattedValue:ht,numAsString:ge,inputValue:_e,event:ke,source:ze,input:ke.target}),!0},de=function(_e,ke){ke===void 0&&(ke=0);var ze=_e.selectionStart,ct=_e.selectionEnd;N.current={selectionStart:ze,selectionEnd:ct+ke}},he=function(_e){var ke=_e.target,ze=ke.value,ct=ce(ze,_e,RA.event);ct&&d(_e),N.current=void 0},ve=function(_e){var ke=_e.target,ze=_e.key,ct=ke.selectionStart,Ot=ke.selectionEnd,We=ke.value;We===void 0&&(We="");var ge;ze==="ArrowLeft"||ze==="Backspace"?ge=Math.max(ct-1,0):ze==="ArrowRight"?ge=Math.min(ct+1,We.length):ze==="Delete"&&(ge=ct);var ht=0;ze==="Delete"&&ct===Ot&&(ht=1);var vt=ze==="ArrowLeft"||ze==="ArrowRight";if(ge===void 0||ct!==Ot&&!vt){h(_e),de(ke,ht);return}var me=ge;if(vt){var Ae=ze==="ArrowLeft"?"left":"right";me=W(We,ge,Ae),me!==ge&&_e.preventDefault()}else ze==="Delete"&&!_(We[ge])?me=W(We,ge,"right"):ze==="Backspace"&&!_(We[ge])&&(me=W(We,ge,"left"));me!==ge&&z(ke,me,We),h(_e),de(ke,ht)},Ie=function(_e){var ke=_e.target,ze=function(){var ct=ke.selectionStart,Ot=ke.selectionEnd,We=ke.value;if(We===void 0&&(We=""),ct===Ot){var ge=W(We,ct);ge!==ct&&z(ke,ge,We)}};ze(),requestAnimationFrame(function(){ze()}),p(_e),de(ke)},be=function(_e){_e.persist&&_e.persist();var ke=_e.target,ze=_e.currentTarget;B.current=ke,U.current.focusTimeout=setTimeout(function(){var ct=ke.selectionStart,Ot=ke.selectionEnd,We=ke.value;We===void 0&&(We="");var ge=W(We,ct);ge!==ct&&!(ct===0&&Ot===We.length)&&z(ke,ge,We),m(Object.assign(Object.assign({},_e),{currentTarget:ze}))},0)},Ke=function(_e){B.current=null,clearTimeout(U.current.focusTimeout),clearTimeout(U.current.setCaretTimeout),g(_e)},Ue=F&&JGe()?"numeric":void 0,yt=Object.assign({inputMode:Ue},E,{type:t,value:C,onChange:he,onKeyDown:ve,onMouseUp:Ie,onFocus:be,onBlur:Ke});if(n==="text")return i?_r.createElement(_r.Fragment,null,i(C,E)||null):_r.createElement("span",Object.assign({},E,{ref:s}),C);if(r){var it=r;return _r.createElement(it,Object.assign({},yt,{ref:s}))}return _r.createElement("input",Object.assign({},yt,{ref:s}))}function eae(e,t){var n=t.decimalScale,r=t.fixedDecimalScale,i=t.prefix;i===void 0&&(i="");var s=t.suffix;s===void 0&&(s="");var o=t.allowNegative,a=t.thousandsGroupStyle;if(a===void 0&&(a="thousand"),e===""||e==="-")return e;var u=JL(t),l=u.thousandSeparator,c=u.decimalSeparator,f=n!==0&&e.indexOf(".")!==-1||n&&r,d=aY(e,o),h=d.beforeDecimal,p=d.afterDecimal,m=d.addNegation;return n!==void 0&&(p=U_e(p,n,!!r)),l&&(h=GGe(h,l,a)),i&&(h=i+h),s&&(p=p+s),m&&(h="-"+h),e=h+(f&&c||"")+p,e}function JL(e){var t=e.decimalSeparator;t===void 0&&(t=".");var n=e.thousandSeparator,r=e.allowedDecimalSeparators;return n===!0&&(n=","),r||(r=[t,"."]),{decimalSeparator:t,thousandSeparator:n,allowedDecimalSeparators:r}}function oYe(e,t){e===void 0&&(e="");var n=new RegExp("(-)"),r=new RegExp("(-)(.)*(-)"),i=n.test(e),s=r.test(e);return e=e.replace(/-/g,""),i&&!s&&t&&(e="-"+e),e}function aYe(e,t){return new RegExp("(^-)|[0-9]|"+B_e(e),"g")}function uYe(e,t,n){return e===""?!0:!(t!=null&&t.match(/\d/))&&!(n!=null&&n.match(/\d/))&&typeof e=="string"&&!isNaN(Number(e))}function lYe(e,t,n){var r;t===void 0&&(t=ZGe(e));var i=n.allowNegative,s=n.prefix;s===void 0&&(s="");var o=n.suffix;o===void 0&&(o="");var a=n.decimalScale,u=t.from,l=t.to,c=l.start,f=l.end,d=JL(n),h=d.allowedDecimalSeparators,p=d.decimalSeparator,m=e[f]===p;if(NA(e)&&(e===s||e===o)&&t.lastValue==="")return e;if(f-c===1&&h.indexOf(e[c])!==-1){var g=a===0?"":p;e=e.substring(0,c)+g+e.substring(c+1,e.length)}var y=function(B,U,H){var P=!1,z=!1;s.startsWith("-")?P=!1:B.startsWith("--")?(P=!1,z=!0):o.startsWith("-")&&B.length===o.length?P=!1:B[0]==="-"&&(P=!0);var W=P?1:0;return z&&(W=2),W&&(B=B.substring(W),U-=W,H-=W),{value:B,start:U,end:H,hasNegation:P}},v=y(e,c,f),_=v.hasNegation;r=v,e=r.value,c=r.start,f=r.end;var w=y(t.lastValue,u.start,u.end),E=w.start,S=w.end,T=w.value,C=e.substring(c,f);e.length&&T.length&&(E>T.length-o.length||S<s.length)&&!(C&&o.startsWith(C))&&(e=T);var A=0;e.startsWith(s)?A+=s.length:c<s.length&&(A=c),e=e.substring(A),f-=A;var k=e.length,N=e.length-o.length;e.endsWith(o)?k=N:(f>N||f>e.length-o.length)&&(k=f),e=e.substring(0,k),e=oYe(_?"-"+e:e,i),e=(e.match(aYe(p))||[]).join("");var O=e.indexOf(p);e=e.replace(new RegExp(B_e(p),"g"),function(B,U){return U===O?".":""});var D=aY(e,i),$=D.beforeDecimal,F=D.afterDecimal,M=D.addNegation;return l.end-l.start<u.end-u.start&&$===""&&m&&!parseFloat(F)&&(e=M?"-":""),e}function cYe(e,t){var n=t.prefix;n===void 0&&(n="");var r=t.suffix;r===void 0&&(r="");var i=Array.from({length:e.length+1}).map(function(){return!0}),s=e[0]==="-";i.fill(!1,0,n.length+(s?1:0));var o=e.length;return i.fill(!1,o-r.length+1,o+1),i}function fYe(e){var t=JL(e),n=t.thousandSeparator,r=t.decimalSeparator,i=e.prefix;i===void 0&&(i="");var s=e.allowNegative;if(s===void 0&&(s=!0),n===r)throw new Error(`
        Decimal separator can't be same as thousand separator.
        thousandSeparator: `+n+` (thousandSeparator = {true} is same as thousandSeparator = ",")
        decimalSeparator: `+r+` (default value for decimalSeparator is .)
     `);return i.startsWith("-")&&s&&(console.error(`
      Prefix can't start with '-' when allowNegative is true.
      prefix: `+i+`
      allowNegative: `+s+`
    `),s=!1),Object.assign(Object.assign({},e),{allowNegative:s})}function dYe(e){e=fYe(e),e.decimalSeparator,e.allowedDecimalSeparators,e.thousandsGroupStyle;var t=e.suffix,n=e.allowNegative,r=e.allowLeadingZeros,i=e.onKeyDown;i===void 0&&(i=Vg);var s=e.onBlur;s===void 0&&(s=Vg);var o=e.thousandSeparator,a=e.decimalScale,u=e.fixedDecimalScale,l=e.prefix;l===void 0&&(l="");var c=e.defaultValue,f=e.value,d=e.valueIsNumericString,h=e.onValueChange,p=F_e(e,["decimalSeparator","allowedDecimalSeparators","thousandsGroupStyle","suffix","allowNegative","allowLeadingZeros","onKeyDown","onBlur","thousandSeparator","decimalScale","fixedDecimalScale","prefix","defaultValue","value","valueIsNumericString","onValueChange"]),m=JL(e),g=m.decimalSeparator,y=m.allowedDecimalSeparators,v=function(M){return eae(M,e)},_=function(M,B){return lYe(M,B,e)},w=Kw(f)?c:f,E=d??uYe(w,l,t);Kw(f)?Kw(c)||(E=E||typeof c=="number"):E=E||typeof f=="number";var S=function(M){return j_e(M)?M:(typeof M=="number"&&(M=z_e(M)),E&&typeof a=="number"?Joe(M,a,!!u):M)},T=H_e(S(f),S(c),!!E,v,_,h),C=T[0],A=C.numAsString,k=C.formattedValue,N=T[1],O=function(M){var B=M.target,U=M.key,H=B.selectionStart,P=B.selectionEnd,z=B.value;if(z===void 0&&(z=""),(U==="Backspace"||U==="Delete")&&P<l.length){M.preventDefault();return}if(H!==P){i(M);return}U==="Backspace"&&z[0]==="-"&&H===l.length+1&&n&&Uv(B,1),a&&u&&(U==="Backspace"&&z[H-1]===g?(Uv(B,H-1),M.preventDefault()):U==="Delete"&&z[H]===g&&M.preventDefault()),y!=null&&y.includes(U)&&z[H]===g&&Uv(B,H+1);var W=o===!0?",":o;U==="Backspace"&&z[H-1]===W&&Uv(B,H-1),U==="Delete"&&z[H]===W&&Uv(B,H+1),i(M)},D=function(M){var B=A;if(B.match(/\d/g)||(B=""),r||(B=KGe(B)),u&&a&&(B=Joe(B,a,u)),B!==A){var U=eae(B,e);N({formattedValue:U,value:B,floatValue:parseFloat(B)},{event:M,source:RA.event})}s(M)},$=function(M){return M===g?!0:NA(M)},F=function(M){var B=M.currentValue,U=M.lastValue,H=M.formattedValue,P=M.currentValueIndex,z=M.formattedValueIndex,W=B[P],j=H[z],q=V_e(U,B),G=q.to;return P>=G.start&&P<G.end&&y&&y.includes(W)&&j===g?!0:W===j};return Object.assign(Object.assign({},p),{value:k,valueIsNumericString:!1,isValidInputCharacter:$,isCharacterSame:F,onValueChange:N,format:v,removeFormatting:_,getCaretBoundary:function(M){return cYe(M,e)},onKeyDown:O,onBlur:D})}function hYe(e){var t=dYe(e);return _r.createElement(sYe,Object.assign({},t))}function tae({direction:e,style:t,...n}){return b.jsx("svg",{style:{width:"var(--ni-chevron-size)",height:"var(--ni-chevron-size)",transform:e==="up"?"rotate(180deg)":void 0,...t},viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...n,children:b.jsx("path",{d:"M3.13523 6.15803C3.3241 5.95657 3.64052 5.94637 3.84197 6.13523L7.5 9.56464L11.158 6.13523C11.3595 5.94637 11.6759 5.95657 11.8648 6.15803C12.0536 6.35949 12.0434 6.67591 11.842 6.86477L7.84197 10.6148C7.64964 10.7951 7.35036 10.7951 7.15803 10.6148L3.15803 6.86477C2.95657 6.67591 2.94637 6.35949 3.13523 6.15803Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}var n7={root:"m_e2f5cd4e",controls:"m_95e17d22",control:"m_80b4b171"};const pYe=/^(0\.0*|-0(\.0*)?)$/,mYe=/^-?0\d+(\.\d+)?\.?$/;function gYe(e){return(typeof e=="number"?e<Number.MAX_SAFE_INTEGER:!Number.isNaN(Number(e)))&&!Number.isNaN(e)}function nae(e,t,n){if(e===void 0)return!0;const r=t===void 0||e>=t,i=n===void 0||e<=n;return r&&i}const yYe={step:1,clampBehavior:"blur",allowDecimal:!0,allowNegative:!0,withKeyboardEvents:!0,allowLeadingZeros:!0,trimLeadingZeroesOnBlur:!0,startValue:0},vYe=(e,{size:t})=>({controls:{"--ni-chevron-size":tn(t,"ni-chevron-size")}}),uY=Me((e,t)=>{const n=xe("NumberInput",yYe,e),{className:r,classNames:i,styles:s,unstyled:o,vars:a,onChange:u,onValueChange:l,value:c,defaultValue:f,max:d,min:h,step:p,hideControls:m,rightSection:g,isAllowed:y,clampBehavior:v,onBlur:_,allowDecimal:w,decimalScale:E,onKeyDown:S,onKeyDownCapture:T,handlersRef:C,startValue:A,disabled:k,rightSectionPointerEvents:N,allowNegative:O,readOnly:D,size:$,rightSectionWidth:F,stepHoldInterval:M,stepHoldDelay:B,allowLeadingZeros:U,withKeyboardEvents:H,trimLeadingZeroesOnBlur:P,...z}=n,W=dt({name:"NumberInput",classes:n7,props:n,classNames:i,styles:s,unstyled:o,vars:a,varsResolver:vYe}),{resolvedClassNames:j,resolvedStyles:q}=Hm({classNames:i,styles:s,props:n}),[G,ne]=Ss({value:c,defaultValue:f,onChange:u}),ce=B!==void 0&&M!==void 0,de=I.useRef(null),he=I.useRef(null),ve=I.useRef(0),Ie=(ge,ht)=>{ht.source==="event"&&ne(gYe(ge.floatValue)&&!pYe.test(ge.value)&&!(U&&mYe.test(ge.value))?ge.floatValue:ge.value),l==null||l(ge,ht)},be=ge=>{const ht=String(ge).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return ht?Math.max(0,(ht[1]?ht[1].length:0)-(ht[2]?+ht[2]:0)):0},Ke=ge=>{de.current&&typeof ge<"u"&&de.current.setSelectionRange(ge,ge)},Ue=I.useRef();Ue.current=()=>{let ge;const ht=be(G),vt=be(p),me=Math.max(ht,vt),Ae=10**me;if(typeof G!="number"||Number.isNaN(G))ge=eh(A,h,d);else if(d!==void 0){const ut=(Math.round(G*Ae)+Math.round(p*Ae))/Ae;ge=ut<=d?ut:d}else ge=(Math.round(G*Ae)+Math.round(p*Ae))/Ae;const He=ge.toFixed(me);ne(parseFloat(He)),l==null||l({floatValue:parseFloat(He),formattedValue:He,value:He},{source:"increment"}),setTimeout(()=>{var ut;return Ke((ut=de.current)==null?void 0:ut.value.length)},0)};const yt=I.useRef();yt.current=()=>{let ge;const ht=h!==void 0?h:O?Number.MIN_SAFE_INTEGER:0,vt=be(G),me=be(p),Ae=Math.max(vt,me),He=10**Ae;if(typeof G!="number"||Number.isNaN(G))ge=eh(A,ht,d);else{const _t=(Math.round(G*He)-Math.round(p*He))/He;ge=ht!==void 0&&_t<ht?ht:_t}const ut=ge.toFixed(Ae);ne(parseFloat(ut)),l==null||l({floatValue:parseFloat(ut),formattedValue:ut,value:ut},{source:"decrement"}),setTimeout(()=>{var _t;return Ke((_t=de.current)==null?void 0:_t.value.length)},0)};const it=ge=>{S==null||S(ge),!(D||!H)&&(ge.key==="ArrowUp"&&(ge.preventDefault(),Ue.current()),ge.key==="ArrowDown"&&(ge.preventDefault(),yt.current()))},_e=ge=>{if(T==null||T(ge),ge.key==="Backspace"){const ht=de.current;ht.selectionStart===0&&ht.selectionStart===ht.selectionEnd&&(ge.preventDefault(),window.setTimeout(()=>Ke(0),0))}};$W(C,{increment:Ue.current,decrement:yt.current});const ke=ge=>{ge?Ue.current():yt.current(),ve.current+=1},ze=ge=>{if(ke(ge),ce){const ht=typeof M=="number"?M:M(ve.current);he.current=window.setTimeout(()=>ze(ge),ht)}},ct=(ge,ht)=>{var vt;ge.preventDefault(),(vt=de.current)==null||vt.focus(),ke(ht),ce&&(he.current=window.setTimeout(()=>ze(ht),B))},Ot=()=>{he.current&&window.clearTimeout(he.current),he.current=null,ve.current=0},We=b.jsxs("div",{...W("controls"),children:[b.jsx(xs,{...W("control"),tabIndex:-1,"aria-hidden":!0,disabled:k||typeof G=="number"&&d!==void 0&&G>=d,mod:{direction:"up"},onMouseDown:ge=>ge.preventDefault(),onPointerDown:ge=>{ct(ge,!0)},onPointerUp:Ot,onPointerLeave:Ot,children:b.jsx(tae,{direction:"up"})}),b.jsx(xs,{...W("control"),tabIndex:-1,"aria-hidden":!0,disabled:k||typeof G=="number"&&h!==void 0&&G<=h,mod:{direction:"down"},onMouseDown:ge=>ge.preventDefault(),onPointerDown:ge=>{ct(ge,!1)},onPointerUp:Ot,onPointerLeave:Ot,children:b.jsx(tae,{direction:"down"})})]});return b.jsx(Wc,{component:hYe,allowNegative:O,className:Xi(n7.root,r),size:$,...z,readOnly:D,disabled:k,value:G,getInputRef:hs(t,de),onValueChange:Ie,rightSection:m||D?g:g||We,classNames:j,styles:q,unstyled:o,__staticSelector:"NumberInput",decimalScale:w?E:0,onKeyDown:it,onKeyDownCapture:_e,rightSectionPointerEvents:N??(k?"none":void 0),rightSectionWidth:F??`var(--ni-right-section-width-${$||"sm"})`,allowLeadingZeros:U,onBlur:ge=>{if(_==null||_(ge),v==="blur"&&typeof G=="number"&&eh(G,h,d)!==G&&ne(eh(G,h,d)),P&&typeof G=="string"){const ht=G.replace(/^0+/,""),vt=parseFloat(ht);ne(Number.isNaN(vt)?ht:vt)}},isAllowed:ge=>v==="strict"?y?y(ge)&&nae(ge.floatValue,h,d):nae(ge.floatValue,h,d):y?y(ge):!0})});uY.classes={...Wc.classes,...n7};uY.displayName="@mantine/core/NumberInput";const[bYe,q_e]=fo("Progress.Root component was not found in tree");var pk={root:"m_db6d6462",section:"m_2242eb65","stripes-animation":"m_81a374bd",label:"m_91e40b74"};const _Ye={},lY=Me((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=xe("ProgressLabel",_Ye,e),u=q_e();return b.jsx(pe,{ref:t,...u.getStyles("label",{className:r,style:i,classNames:n,styles:s}),...a})});lY.classes=pk;lY.displayName="@mantine/core/ProgressLabel";const wYe={},EYe=(e,{size:t,radius:n,transitionDuration:r})=>({root:{"--progress-size":tn(t,"progress-size"),"--progress-radius":n===void 0?void 0:Ur(n),"--progress-transition-duration":typeof r=="number"?`${r}ms`:void 0}}),ZL=Me((e,t)=>{const n=xe("ProgressRoot",wYe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,autoContrast:l,transitionDuration:c,...f}=n,d=dt({name:"Progress",classes:pk,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:EYe});return b.jsx(bYe,{value:{getStyles:d,autoContrast:l},children:b.jsx(pe,{ref:t,...d("root"),...f})})});ZL.classes=pk;ZL.displayName="@mantine/core/ProgressRoot";const xYe={withAria:!0},e6=Me((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,value:a,withAria:u,color:l,striped:c,animated:f,mod:d,...h}=xe("ProgressSection",xYe,e),p=q_e(),m=ps(),g=u?{role:"progressbar","aria-valuemax":100,"aria-valuemin":0,"aria-valuenow":a,"aria-valuetext":`${a}%`}:{};return b.jsx(pe,{ref:t,...p.getStyles("section",{className:r,classNames:n,styles:s,style:i}),...h,...g,mod:[{striped:c||f,animated:f},d],__vars:{"--progress-section-width":`${a}%`,"--progress-section-color":$r(l,m),"--progress-label-color":Kx(p.autoContrast,m)?Ny({color:l,theme:m,autoContrast:p.autoContrast}):void 0}})});e6.classes=pk;e6.displayName="@mantine/core/ProgressSection";const SYe={},sS=Me((e,t)=>{const n=xe("Progress",SYe,e),{value:r,classNames:i,styles:s,vars:o,color:a,striped:u,animated:l,"aria-label":c,...f}=n,{resolvedClassNames:d,resolvedStyles:h}=Hm({classNames:i,styles:s,props:n});return b.jsx(ZL,{ref:t,classNames:d,styles:h,vars:o,...f,children:b.jsx(e6,{value:r,color:a,striped:u,animated:l,"aria-label":c})})});sS.classes=pk;sS.displayName="@mantine/core/Progress";sS.Section=e6;sS.Root=ZL;sS.Label=lY;const[TYe,W_e]=Yx(),[CYe,AYe]=Yx();var G_e={card:"m_9dc8ae12"};const IYe={withBorder:!0},kYe=(e,{radius:t})=>({card:{"--card-radius":Ur(t)}}),cY=Me((e,t)=>{const n=xe("RadioCard",IYe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,checked:l,mod:c,withBorder:f,value:d,onClick:h,name:p,onKeyDown:m,...g}=n,y=dt({name:"RadioCard",classes:G_e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:kYe,rootSelector:"card"}),{dir:v}=qh(),_=W_e(),w=typeof l=="boolean"?l:(_==null?void 0:_.value)===d||!1,E=p||(_==null?void 0:_.name),S=T=>{if(m==null||m(T),["ArrowDown","ArrowUp","ArrowLeft","ArrowRight"].includes(T.nativeEvent.code)){T.preventDefault();const C=Array.from(document.querySelectorAll(`[role="radio"][name="${E||"__mantine"}"]`)),A=C.findIndex(O=>O===T.target),k=A+1>=C.length?0:A+1,N=A-1<0?C.length-1:A-1;T.nativeEvent.code==="ArrowDown"&&(C[k].focus(),C[k].click()),T.nativeEvent.code==="ArrowUp"&&(C[N].focus(),C[N].click()),T.nativeEvent.code==="ArrowLeft"&&(C[v==="ltr"?N:k].focus(),C[v==="ltr"?N:k].click()),T.nativeEvent.code==="ArrowRight"&&(C[v==="ltr"?k:N].focus(),C[v==="ltr"?k:N].click())}};return b.jsx(CYe,{value:{checked:w},children:b.jsx(xs,{ref:t,mod:[{"with-border":f,checked:w},c],...y("card"),...g,role:"radio","aria-checked":w,name:E,onClick:T=>{h==null||h(T),_==null||_.onChange(d||"")},onKeyDown:S})})});cY.displayName="@mantine/core/RadioCard";cY.classes=G_e;const RYe={},fY=Me((e,t)=>{const{value:n,defaultValue:r,onChange:i,size:s,wrapperProps:o,children:a,name:u,readOnly:l,...c}=xe("RadioGroup",RYe,e),f=Ta(u),[d,h]=Ss({value:n,defaultValue:r,finalValue:"",onChange:i}),p=m=>!l&&h(typeof m=="string"?m:m.currentTarget.value);return b.jsx(TYe,{value:{value:d,onChange:p,size:s,name:f},children:b.jsx(mi.Wrapper,{size:s,ref:t,...o,...c,labelElement:"div",__staticSelector:"RadioGroup",children:b.jsx(BG,{role:"radiogroup",children:a})})})});fY.classes=mi.Wrapper.classes;fY.displayName="@mantine/core/RadioGroup";function Y_e({size:e,style:t,...n}){return b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 5 5",style:{width:Te(e),height:Te(e),...t},"aria-hidden":!0,...n,children:b.jsx("circle",{cx:"2.5",cy:"2.5",r:"2.5",fill:"currentColor"})})}var K_e={indicator:"m_717d7ff6",icon:"m_3e4da632","indicator--outline":"m_2980836c"};const NYe={icon:Y_e},PYe=(e,{radius:t,color:n,size:r,iconColor:i,variant:s,autoContrast:o})=>{const a=Hh({color:n||e.primaryColor,theme:e}),u=a.isThemeColor&&a.shade===void 0?`var(--mantine-color-${a.color}-outline)`:a.color;return{indicator:{"--radio-size":tn(r,"radio-size"),"--radio-radius":t===void 0?void 0:Ur(t),"--radio-color":s==="outline"?u:$r(n,e),"--radio-icon-size":tn(r,"radio-icon-size"),"--radio-icon-color":i?$r(i,e):Kx(o,e)?Ny({color:n,theme:e,autoContrast:o}):void 0}}},dY=Me((e,t)=>{const n=xe("RadioIndicator",NYe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,icon:l,radius:c,color:f,iconColor:d,autoContrast:h,checked:p,mod:m,variant:g,disabled:y,...v}=n,_=l,w=dt({name:"RadioIndicator",classes:K_e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:PYe,rootSelector:"indicator"}),E=AYe(),S=typeof p=="boolean"?p:(E==null?void 0:E.checked)||!1;return b.jsx(pe,{ref:t,...w("indicator",{variant:g}),variant:g,mod:[{checked:S,disabled:y},m],...v,children:b.jsx(_,{...w("icon")})})});dY.displayName="@mantine/core/RadioIndicator";dY.classes=K_e;var X_e={root:"m_f3f1af94",inner:"m_89c4f5e4",icon:"m_f3ed6b2b",radio:"m_8a3dbb89","radio--outline":"m_1bfe9d39"};const DYe={labelPosition:"right"},OYe=(e,{size:t,radius:n,color:r,iconColor:i,variant:s,autoContrast:o})=>{const a=Hh({color:r||e.primaryColor,theme:e}),u=a.isThemeColor&&a.shade===void 0?`var(--mantine-color-${a.color}-outline)`:a.color;return{root:{"--radio-size":tn(t,"radio-size"),"--radio-radius":n===void 0?void 0:Ur(n),"--radio-color":s==="outline"?u:$r(r,e),"--radio-icon-color":i?$r(i,e):Kx(o,e)?Ny({color:r,theme:e,autoContrast:o}):void 0,"--radio-icon-size":tn(t,"radio-icon-size")}}},V1=Me((e,t)=>{const n=xe("Radio",DYe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,id:l,size:c,label:f,labelPosition:d,description:h,error:p,radius:m,color:g,variant:y,disabled:v,wrapperProps:_,icon:w=Y_e,rootRef:E,iconColor:S,onChange:T,mod:C,...A}=n,k=dt({name:"Radio",classes:X_e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:OYe}),N=W_e(),O=(N==null?void 0:N.size)??c,D=n.size?c:O,{styleProps:$,rest:F}=Db(A),M=Ta(l),B=N?{checked:N.value===F.value,name:F.name??N.name,onChange:U=>{N.onChange(U),T==null||T(U)}}:{};return b.jsx(DL,{...k("root"),__staticSelector:"Radio",__stylesApiProps:n,id:M,size:D,labelPosition:d,label:f,description:h,error:p,disabled:v,classNames:r,styles:o,unstyled:a,"data-checked":B.checked||void 0,variant:y,ref:E,mod:C,...$,..._,children:b.jsxs(pe,{...k("inner"),mod:{"label-position":d},children:[b.jsx(pe,{...k("radio",{focusable:!0,variant:y}),onChange:T,...F,...B,component:"input",mod:{error:!!p},ref:t,id:M,disabled:v,type:"radio"}),b.jsx(w,{...k("icon"),"aria-hidden":!0})]})})});V1.classes=X_e;V1.displayName="@mantine/core/Radio";V1.Group=fY;V1.Card=cY;V1.Indicator=dY;const $Ye={duration:100,transition:"fade"};function MYe(e,t){return{...$Ye,...t,...e}}function LYe({offset:e,position:t}){const[n,r]=I.useState(!1),i=I.useRef(),{x:s,y:o,elements:a,refs:u,update:l,placement:c}=sG({placement:t,middleware:[tG({crossAxis:!0,padding:5,rootBoundary:"document"})]}),f=c.includes("right")?e:t.includes("left")?e*-1:0,d=c.includes("bottom")?e:t.includes("top")?e*-1:0,h=I.useCallback(({clientX:p,clientY:m})=>{u.setPositionReference({getBoundingClientRect(){return{width:0,height:0,x:p,y:m,left:p+f,top:m+d,right:p,bottom:m}}})},[a.reference]);return I.useEffect(()=>{if(u.floating.current){const p=i.current;p.addEventListener("mousemove",h);const m=im(u.floating.current);return m.forEach(g=>{g.addEventListener("scroll",l)}),()=>{p.removeEventListener("mousemove",h),m.forEach(g=>{g.removeEventListener("scroll",l)})}}},[a.reference,u.floating.current,l,h,n]),{handleMouseMove:h,x:s,y:o,opened:n,setOpened:r,boundaryRef:i,floating:u.setFloating}}var t6={tooltip:"m_1b3c8819",arrow:"m_f898399f"};const FYe={refProp:"ref",withinPortal:!0,offset:10,position:"right",zIndex:Zl("popover")},jYe=(e,{radius:t,color:n})=>({tooltip:{"--tooltip-radius":t===void 0?void 0:Ur(t),"--tooltip-bg":n?$r(n,e):void 0,"--tooltip-color":n?"var(--mantine-color-white)":void 0}}),hY=Me((e,t)=>{const n=xe("TooltipFloating",FYe,e),{children:r,refProp:i,withinPortal:s,style:o,className:a,classNames:u,styles:l,unstyled:c,radius:f,color:d,label:h,offset:p,position:m,multiline:g,zIndex:y,disabled:v,variant:_,vars:w,portalProps:E,...S}=n,T=ps(),C=dt({name:"TooltipFloating",props:n,classes:t6,className:a,style:o,classNames:u,styles:l,unstyled:c,rootSelector:"tooltip",vars:w,varsResolver:jYe}),{handleMouseMove:A,x:k,y:N,opened:O,boundaryRef:D,floating:$,setOpened:F}=LYe({offset:p,position:m});if(!ky(r))throw new Error("[@mantine/core] Tooltip.Floating component children should be an element or a component that accepts ref, fragments, strings, numbers and other primitive values are not supported");const M=hs(D,r.ref,t),B=H=>{var P,z;(z=(P=r.props).onMouseEnter)==null||z.call(P,H),A(H),F(!0)},U=H=>{var P,z;(z=(P=r.props).onMouseLeave)==null||z.call(P,H),F(!1)};return b.jsxs(b.Fragment,{children:[b.jsx(Jx,{...E,withinPortal:s,children:b.jsx(pe,{...S,...C("tooltip",{style:{...UW(o,T),zIndex:y,display:!v&&O?"block":"none",top:(N&&Math.round(N))??"",left:(k&&Math.round(k))??""}}),variant:_,ref:$,mod:{multiline:g},children:h})}),I.cloneElement(r,{...r.props,[i]:M,onMouseEnter:B,onMouseLeave:U})]})});hY.classes=t6;hY.displayName="@mantine/core/TooltipFloating";const Q_e=I.createContext(!1),BYe=Q_e.Provider,UYe=()=>I.useContext(Q_e),zYe={openDelay:0,closeDelay:0};function J_e(e){const{openDelay:t,closeDelay:n,children:r}=xe("TooltipGroup",zYe,e);return b.jsx(BYe,{value:!0,children:b.jsx(LVe,{delay:{open:t,close:n},children:r})})}J_e.displayName="@mantine/core/TooltipGroup";function VYe(e){var S,T,C;const[t,n]=I.useState(!1),i=typeof e.opened=="boolean"?e.opened:t,s=UYe(),o=Ta(),{delay:a,currentId:u,setCurrentId:l}=$be(),c=I.useCallback(A=>{n(A),A&&l(o)},[l,o]),{x:f,y:d,context:h,refs:p,update:m,placement:g,middlewareData:{arrow:{x:y,y:v}={}}}=sG({strategy:e.strategy,placement:e.position,open:i,onOpenChange:c,middleware:[Rbe(e.offset),tG({padding:8}),JU(),Nbe({element:e.arrowRef,padding:e.arrowOffset}),...e.inline?[ZU()]:[]]}),{getReferenceProps:_,getFloatingProps:w}=HVe([MVe(h,{enabled:(S=e.events)==null?void 0:S.hover,delay:s?a:{open:e.openDelay,close:e.closeDelay},mouseOnly:!((T=e.events)!=null&&T.touch)}),VVe(h,{enabled:(C=e.events)==null?void 0:C.focus,visibleOnly:!0}),WVe(h,{role:"tooltip"}),UVe(h,{enabled:typeof e.opened>"u"}),FVe(h,{id:o})]);zbe({opened:i,position:e.position,positionDependencies:e.positionDependencies,floating:{refs:p,update:m}}),Th(()=>{var A;(A=e.onPositionChange)==null||A.call(e,g)},[g]);const E=i&&u&&u!==o;return{x:f,y:d,arrowX:y,arrowY:v,reference:p.setReference,floating:p.setFloating,getFloatingProps:w,getReferenceProps:_,isGroupPhase:E,opened:i,placement:g}}const rae={position:"top",refProp:"ref",withinPortal:!0,inline:!1,arrowSize:4,arrowOffset:5,arrowRadius:0,arrowPosition:"side",offset:5,transitionProps:{duration:100,transition:"fade"},events:{hover:!0,focus:!1,touch:!1},zIndex:Zl("popover"),positionDependencies:[]},HYe=(e,{radius:t,color:n})=>({tooltip:{"--tooltip-radius":t===void 0?void 0:Ur(t),"--tooltip-bg":n?$r(n,e):void 0,"--tooltip-color":n?"var(--mantine-color-white)":void 0}}),ui=Me((e,t)=>{const n=xe("Tooltip",rae,e),{children:r,position:i,refProp:s,label:o,openDelay:a,closeDelay:u,onPositionChange:l,opened:c,withinPortal:f,radius:d,color:h,classNames:p,styles:m,unstyled:g,style:y,className:v,withArrow:_,arrowSize:w,arrowOffset:E,arrowRadius:S,arrowPosition:T,offset:C,transitionProps:A,multiline:k,events:N,zIndex:O,disabled:D,positionDependencies:$,onClick:F,onMouseEnter:M,onMouseLeave:B,inline:U,variant:H,keepMounted:P,vars:z,portalProps:W,mod:j,floatingStrategy:q,...G}=xe("Tooltip",rae,n),{dir:ne}=qh(),ce=I.useRef(null),de=VYe({position:Mbe(ne,i),closeDelay:u,openDelay:a,onPositionChange:l,opened:c,events:N,arrowRef:ce,arrowOffset:E,offset:typeof C=="number"?C+(_?w/2:0):C,positionDependencies:[...$,r],inline:U,strategy:q}),he=dt({name:"Tooltip",props:n,classes:t6,className:v,style:y,classNames:p,styles:m,unstyled:g,rootSelector:"tooltip",vars:z,varsResolver:HYe});if(!ky(r))throw new Error("[@mantine/core] Tooltip component children should be an element or a component that accepts ref, fragments, strings, numbers and other primitive values are not supported");const ve=hs(de.reference,r.ref,t),Ie=MYe(A,{duration:100,transition:"fade"});return b.jsxs(b.Fragment,{children:[b.jsx(Jx,{...W,withinPortal:f,children:b.jsx(Wm,{...Ie,keepMounted:P,mounted:!D&&!!de.opened,duration:de.isGroupPhase?10:Ie.duration,children:be=>b.jsxs(pe,{...G,variant:H,mod:[{multiline:k},j],...de.getFloatingProps({ref:de.floating,className:he("tooltip").className,style:{...he("tooltip").style,...be,zIndex:O,top:de.y??0,left:de.x??0}}),children:[o,b.jsx(oG,{ref:ce,arrowX:de.arrowX,arrowY:de.arrowY,visible:_,position:de.placement,arrowSize:w,arrowOffset:E,arrowRadius:S,arrowPosition:T,...he("arrow")})]})})}),I.cloneElement(r,de.getReferenceProps({onClick:F,onMouseEnter:M,onMouseLeave:B,onMouseMove:n.onMouseMove,onPointerDown:n.onPointerDown,onPointerEnter:n.onPointerEnter,[s]:ve,className:Xi(v,r.props.className),...r.props}))]})});ui.classes=t6;ui.displayName="@mantine/core/Tooltip";ui.Floating=hY;ui.Group=J_e;var Z_e={root:"m_cf365364",indicator:"m_9e182ccd",label:"m_1738fcb2",input:"m_1714d588",control:"m_69686b9b",innerLabel:"m_78882f40"};const qYe={withItemsBorders:!0},WYe=(e,{radius:t,color:n,transitionDuration:r,size:i,transitionTimingFunction:s})=>({root:{"--sc-radius":t===void 0?void 0:Ur(t),"--sc-color":n?$r(n,e):void 0,"--sc-shadow":n?void 0:"var(--mantine-shadow-xs)","--sc-transition-duration":r===void 0?void 0:`${r}ms`,"--sc-transition-timing-function":s,"--sc-padding":tn(i,"sc-padding"),"--sc-font-size":uo(i)}}),pY=Me((e,t)=>{var ne,ce;const n=xe("SegmentedControl",qYe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,data:l,value:c,defaultValue:f,onChange:d,size:h,name:p,disabled:m,readOnly:g,fullWidth:y,orientation:v,radius:_,color:w,transitionDuration:E,transitionTimingFunction:S,variant:T,autoContrast:C,withItemsBorders:A,mod:k,...N}=n,O=dt({name:"SegmentedControl",props:n,classes:Z_e,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:WYe}),D=ps(),$=l.map(de=>typeof de=="string"?{label:de,value:de}:de),F=GUe(),[M,B]=I.useState(null),[U,H]=I.useState({}),P=(de,he)=>{U[he]=de,H(U)},[z,W]=Ss({value:c,defaultValue:f,finalValue:Array.isArray(l)?((ne=$.find(de=>!de.disabled))==null?void 0:ne.value)??((ce=l[0])==null?void 0:ce.value)??null:null,onChange:d}),j=Ta(p),q=$.map(de=>I.createElement(pe,{...O("control"),mod:{active:z===de.value,orientation:v},key:de.value},I.createElement("input",{...O("input"),disabled:m||de.disabled,type:"radio",name:j,value:de.value,id:`${j}-${de.value}`,checked:z===de.value,onChange:()=>!g&&W(de.value),"data-focus-ring":D.focusRing,key:`${de.value}-input`}),I.createElement(pe,{component:"label",...O("label"),mod:{active:z===de.value&&!(m||de.disabled),disabled:m||de.disabled,"read-only":g},htmlFor:`${j}-${de.value}`,ref:he=>P(he,de.value),__vars:{"--sc-label-color":w!==void 0?Ny({color:w,theme:D,autoContrast:C}):void 0},key:`${de.value}-label`},b.jsx("span",{...O("innerLabel"),children:de.label})))),G=hs(t,de=>B(de));return l.length===0?null:b.jsxs(pe,{...O("root"),variant:T,size:h,ref:G,mod:[{"full-width":y,orientation:v,initialized:F,"with-items-borders":A},k],...N,role:"radiogroup",children:[typeof z=="string"&&b.jsx(gG,{target:U[z],parent:M,component:"span",transitionDuration:"var(--sc-transition-duration)",...O("indicator")}),q]})});pY.classes=Z_e;pY.displayName="@mantine/core/SegmentedControl";const GYe={searchable:!1,withCheckIcon:!0,allowDeselect:!0,checkIconPosition:"left"},mk=Me((e,t)=>{const n=xe("Select",GYe,e),{classNames:r,styles:i,unstyled:s,vars:o,dropdownOpened:a,defaultDropdownOpened:u,onDropdownClose:l,onDropdownOpen:c,onFocus:f,onBlur:d,onClick:h,onChange:p,data:m,value:g,defaultValue:y,selectFirstOptionOnChange:v,onOptionSubmit:_,comboboxProps:w,readOnly:E,disabled:S,filter:T,limit:C,withScrollArea:A,maxDropdownHeight:k,size:N,searchable:O,rightSection:D,checkIconPosition:$,withCheckIcon:F,nothingFoundMessage:M,name:B,form:U,searchValue:H,defaultSearchValue:P,onSearchChange:z,allowDeselect:W,error:j,rightSectionPointerEvents:q,id:G,clearable:ne,clearButtonProps:ce,hiddenInputProps:de,renderOption:he,onClear:ve,autoComplete:Ie,scrollAreaProps:be,...Ke}=n,Ue=I.useMemo(()=>s_e(m),[m]),yt=I.useMemo(()=>AG(Ue),[Ue]),it=Ta(G),[_e,ke,ze]=Ss({value:g,defaultValue:y,finalValue:null,onChange:p}),ct=typeof _e=="string"?yt[_e]:void 0,[Ot,We]=Ss({value:H,defaultValue:P,finalValue:ct?ct.label:"",onChange:z}),ge=FG({opened:a,defaultOpened:u,onDropdownOpen:()=>{c==null||c(),ge.updateSelectedOptionIndex("active",{scrollIntoView:!0})},onDropdownClose:()=>{l==null||l(),ge.resetSelectedOption()}}),{resolvedClassNames:ht,resolvedStyles:vt}=Hm({props:n,styles:i,classNames:r});I.useEffect(()=>{v&&ge.selectFirstOption()},[v,_e]),I.useEffect(()=>{g===null&&We(""),typeof g=="string"&&ct&&We(ct.label)},[g,ct]);const me=ne&&!!_e&&!S&&!E&&b.jsx(Kn.ClearButton,{size:N,...ce,onClear:()=>{ke(null,null),We(""),ve==null||ve()}});return b.jsxs(b.Fragment,{children:[b.jsxs(Kn,{store:ge,__staticSelector:"Select",classNames:ht,styles:vt,unstyled:s,readOnly:E,onOptionSubmit:Ae=>{_==null||_(Ae);const He=W&&yt[Ae].value===_e?null:yt[Ae],ut=He?He.value:null;ke(ut,He),!ze&&We(typeof ut=="string"&&(He==null?void 0:He.label)||""),ge.closeDropdown()},size:N,...w,children:[b.jsx(Kn.Target,{targetType:O?"input":"button",autoComplete:Ie,children:b.jsx(Wc,{id:it,ref:t,rightSection:D||me||b.jsx(Kn.Chevron,{size:N,error:j,unstyled:s}),rightSectionPointerEvents:q||(me?"all":"none"),...Ke,size:N,__staticSelector:"Select",disabled:S,readOnly:E||!O,value:Ot,onChange:Ae=>{We(Ae.currentTarget.value),ge.openDropdown(),v&&ge.selectFirstOption()},onFocus:Ae=>{O&&ge.openDropdown(),f==null||f(Ae)},onBlur:Ae=>{var He;O&&ge.closeDropdown(),We(_e!=null&&((He=yt[_e])==null?void 0:He.label)||""),d==null||d(Ae)},onClick:Ae=>{O?ge.openDropdown():ge.toggleDropdown(),h==null||h(Ae)},classNames:ht,styles:vt,unstyled:s,pointer:!O,error:j})}),b.jsx(x_e,{data:Ue,hidden:E||S,filter:T,search:Ot,limit:C,hiddenWhenEmpty:!O||!M,withScrollArea:A,maxDropdownHeight:k,filterOptions:O&&(ct==null?void 0:ct.label)!==Ot,value:_e,checkIconPosition:$,withCheckIcon:F,nothingFoundMessage:M,unstyled:s,labelId:Ke.label?`${it}-label`:void 0,"aria-label":Ke.label?void 0:Ke["aria-label"],renderOption:he,scrollAreaProps:be})]}),b.jsx(Kn.HiddenInput,{value:_e,name:B,form:U,disabled:S,...de})]})});mk.classes={...Wc.classes,...Kn.classes};mk.displayName="@mantine/core/Select";function YYe({spacing:e,verticalSpacing:t,cols:n,selector:r}){var c;const i=ps(),s=t===void 0?e:t,o=Iy({"--sg-spacing-x":as(kf(e)),"--sg-spacing-y":as(kf(s)),"--sg-cols":(c=kf(n))==null?void 0:c.toString()}),a=Xr(i.breakpoints).reduce((f,d)=>(f[d]||(f[d]={}),typeof e=="object"&&e[d]!==void 0&&(f[d]["--sg-spacing-x"]=as(e[d])),typeof s=="object"&&s[d]!==void 0&&(f[d]["--sg-spacing-y"]=as(s[d])),typeof n=="object"&&n[d]!==void 0&&(f[d]["--sg-cols"]=n[d]),f),{}),l=TA(Xr(a),i).filter(f=>Xr(a[f.value]).length>0).map(f=>({query:`(min-width: ${i.breakpoints[f.value]})`,styles:a[f.value]}));return b.jsx(Pb,{styles:o,media:l,selector:r})}function qj(e){return typeof e=="object"&&e!==null?Xr(e):[]}function KYe(e){return e.sort((t,n)=>SA(t)-SA(n))}function XYe({spacing:e,verticalSpacing:t,cols:n}){const r=Array.from(new Set([...qj(e),...qj(t),...qj(n)]));return KYe(r)}function QYe({spacing:e,verticalSpacing:t,cols:n,selector:r}){var l;const i=t===void 0?e:t,s=Iy({"--sg-spacing-x":as(kf(e)),"--sg-spacing-y":as(kf(i)),"--sg-cols":(l=kf(n))==null?void 0:l.toString()}),o=XYe({spacing:e,verticalSpacing:t,cols:n}),a=o.reduce((c,f)=>(c[f]||(c[f]={}),typeof e=="object"&&e[f]!==void 0&&(c[f]["--sg-spacing-x"]=as(e[f])),typeof i=="object"&&i[f]!==void 0&&(c[f]["--sg-spacing-y"]=as(i[f])),typeof n=="object"&&n[f]!==void 0&&(c[f]["--sg-cols"]=n[f]),c),{}),u=o.map(c=>({query:`simple-grid (min-width: ${c})`,styles:a[c]}));return b.jsx(Pb,{styles:s,container:u,selector:r})}var ewe={container:"m_925c2d2c",root:"m_2415a157"};const JYe={cols:1,spacing:"md",type:"media"},mY=Me((e,t)=>{const n=xe("SimpleGrid",JYe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,cols:l,verticalSpacing:c,spacing:f,type:d,...h}=n,p=dt({name:"SimpleGrid",classes:ewe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u}),m=ak();return d==="container"?b.jsxs(b.Fragment,{children:[b.jsx(QYe,{...n,selector:`.${m}`}),b.jsx("div",{...p("container"),children:b.jsx(pe,{ref:t,...p("root",{className:m}),...h})})]}):b.jsxs(b.Fragment,{children:[b.jsx(YYe,{...n,selector:`.${m}`}),b.jsx(pe,{ref:t,...p("root",{className:m}),...h})]})});mY.classes=ewe;mY.displayName="@mantine/core/SimpleGrid";const[twe,n6]=fo("SliderProvider was not found in tree"),gY=I.forwardRef(({size:e,disabled:t,variant:n,color:r,thumbSize:i,radius:s,...o},a)=>{const{getStyles:u}=n6();return b.jsx(pe,{tabIndex:-1,variant:n,size:e,ref:a,...u("root"),...o})});gY.displayName="@mantine/core/SliderRoot";const XO=I.forwardRef(({max:e,min:t,value:n,position:r,label:i,dragging:s,onMouseDown:o,onKeyDownCapture:a,labelTransitionProps:u,labelAlwaysOn:l,thumbLabel:c,onFocus:f,onBlur:d,showLabelOnHover:h,isHovered:p,children:m=null,disabled:g},y)=>{const{getStyles:v}=n6(),[_,w]=I.useState(!1),E=l||s||_||h&&p;return b.jsxs(pe,{tabIndex:0,role:"slider","aria-label":c,"aria-valuemax":e,"aria-valuemin":t,"aria-valuenow":n,ref:y,__vars:{"--slider-thumb-offset":`${r}%`},...v("thumb",{focusable:!0}),mod:{dragging:s,disabled:g},onFocus:()=>{w(!0),typeof f=="function"&&f()},onBlur:()=>{w(!1),typeof d=="function"&&d()},onTouchStart:o,onMouseDown:o,onKeyDownCapture:a,onClick:S=>S.stopPropagation(),children:[m,b.jsx(Wm,{mounted:i!=null&&!!E,transition:"fade",duration:0,...u,children:S=>b.jsx("div",{...v("label",{style:S}),children:i})})]})});XO.displayName="@mantine/core/SliderThumb";function QO({value:e,min:t,max:n}){const r=(e-t)/(n-t)*100;return Math.min(Math.max(r,0),100)}function ZYe({mark:e,offset:t,value:n,inverted:r=!1}){return r?typeof t=="number"&&e.value<=t||e.value>=n:typeof t=="number"?e.value>=t&&e.value<=n:e.value<=n}function nwe({marks:e,min:t,max:n,disabled:r,value:i,offset:s,inverted:o}){const{getStyles:a}=n6();if(!e)return null;const u=e.map((l,c)=>I.createElement(pe,{...a("markWrapper"),__vars:{"--mark-offset":`${QO({value:l.value,min:t,max:n})}%`},key:c},b.jsx(pe,{...a("mark"),mod:{filled:ZYe({mark:l,value:i,offset:s,inverted:o}),disabled:r}}),l.label&&b.jsx("div",{...a("markLabel"),children:l.label})));return b.jsx("div",{children:u})}nwe.displayName="@mantine/core/SliderMarks";function yY({filled:e,children:t,offset:n,disabled:r,marksOffset:i,inverted:s,containerProps:o,...a}){const{getStyles:u}=n6();return b.jsx(b.Fragment,{children:b.jsx(pe,{...u("trackContainer"),mod:{disabled:r},...o,children:b.jsxs(pe,{...u("track"),mod:{inverted:s,disabled:r},children:[b.jsx(pe,{mod:{inverted:s,disabled:r},__vars:{"--slider-bar-width":`calc(${e}% + var(--slider-size))`,"--slider-bar-offset":`calc(${n}% - var(--slider-size))`},...u("bar")}),t,b.jsx(nwe,{...a,offset:i,disabled:r,inverted:s})]})})})}yY.displayName="@mantine/core/SliderTrack";function r7({value:e,containerWidth:t,min:n,max:r,step:i,precision:s}){const a=(t?Math.min(Math.max(e,0),t)/t:e)*(r-n),u=(a!==0?Math.round(a/i)*i:0)+n,l=Math.max(u,n);return s!==void 0?Number(l.toFixed(s)):l}function dc(e,t){return parseFloat(e.toFixed(t))}function rwe(e){if(!e)return 0;const t=e.toString().split(".");return t.length>1?t[1].length:0}var r6={root:"m_dd36362e",label:"m_c9357328",thumb:"m_c9a9a60a",trackContainer:"m_a8645c2",track:"m_c9ade57f",bar:"m_38aeed47",markWrapper:"m_b7b0423a",mark:"m_dd33bc19",markLabel:"m_68c77a5b"};const eKe={radius:"xl",min:0,max:100,step:1,marks:[],label:e=>e,labelTransitionProps:{transition:"fade",duration:0},labelAlwaysOn:!1,thumbLabel:"",showLabelOnHover:!0,disabled:!1,scale:e=>e},tKe=(e,{size:t,color:n,thumbSize:r,radius:i})=>({root:{"--slider-size":tn(t,"slider-size"),"--slider-color":n?$r(n,e):void 0,"--slider-radius":i===void 0?void 0:Ur(i),"--slider-thumb-size":r!==void 0?Te(r):"calc(var(--slider-size) * 2)"}}),i6=Me((e,t)=>{const n=xe("Slider",eKe,e),{classNames:r,styles:i,value:s,onChange:o,onChangeEnd:a,size:u,min:l,max:c,step:f,precision:d,defaultValue:h,name:p,marks:m,label:g,labelTransitionProps:y,labelAlwaysOn:v,thumbLabel:_,showLabelOnHover:w,thumbChildren:E,disabled:S,unstyled:T,scale:C,inverted:A,className:k,style:N,vars:O,hiddenInputProps:D,...$}=n,F=dt({name:"Slider",props:n,classes:r6,classNames:r,className:k,styles:i,style:N,vars:O,varsResolver:tKe,unstyled:T}),{dir:M}=qh(),[B,U]=I.useState(!1),[H,P]=Ss({value:typeof s=="number"?eh(s,l,c):s,defaultValue:typeof h=="number"?eh(h,l,c):h,finalValue:eh(0,l,c),onChange:o}),z=I.useRef(H),W=I.useRef(),j=I.useRef(),q=QO({value:H,min:l,max:c}),G=C(H),ne=typeof g=="function"?g(G):g,ce=d??rwe(f),de=I.useCallback(({x:be})=>{if(!S){const Ke=r7({value:be,min:l,max:c,step:f,precision:ce});P(Ke),z.current=Ke}},[S,l,c,f,ce,P]),{ref:he,active:ve}=Y1e(de,{onScrubEnd:()=>a==null?void 0:a(z.current)},M),Ie=be=>{var Ke,Ue,yt,it,_e,ke;if(!S)switch(be.key){case"ArrowUp":{be.preventDefault(),(Ke=j.current)==null||Ke.focus();const ze=dc(Math.min(Math.max(H+f,l),c),ce);P(ze),a==null||a(ze);break}case"ArrowRight":{be.preventDefault(),(Ue=j.current)==null||Ue.focus();const ze=dc(Math.min(Math.max(M==="rtl"?H-f:H+f,l),c),ce);P(ze),a==null||a(ze);break}case"ArrowDown":{be.preventDefault(),(yt=j.current)==null||yt.focus();const ze=dc(Math.min(Math.max(H-f,l),c),ce);P(ze),a==null||a(ze);break}case"ArrowLeft":{be.preventDefault(),(it=j.current)==null||it.focus();const ze=dc(Math.min(Math.max(M==="rtl"?H+f:H-f,l),c),ce);P(ze),a==null||a(ze);break}case"Home":{be.preventDefault(),(_e=j.current)==null||_e.focus(),P(l),a==null||a(l);break}case"End":{be.preventDefault(),(ke=j.current)==null||ke.focus(),P(c),a==null||a(c);break}}};return b.jsx(twe,{value:{getStyles:F},children:b.jsxs(gY,{...$,ref:hs(t,W),onKeyDownCapture:Ie,onMouseDownCapture:()=>{var be;return(be=W.current)==null?void 0:be.focus()},size:u,disabled:S,children:[b.jsx(yY,{inverted:A,offset:0,filled:q,marks:m,min:l,max:c,value:G,disabled:S,containerProps:{ref:he,onMouseEnter:w?()=>U(!0):void 0,onMouseLeave:w?()=>U(!1):void 0},children:b.jsx(XO,{max:c,min:l,value:G,position:q,dragging:ve,label:ne,ref:j,labelTransitionProps:y,labelAlwaysOn:v,thumbLabel:_,showLabelOnHover:w,isHovered:B,disabled:S,children:E})}),b.jsx("input",{type:"hidden",name:p,value:G,...D})]})})});i6.classes=r6;i6.displayName="@mantine/core/Slider";function nKe(e){return"TouchEvent"in window&&e instanceof window.TouchEvent?e.touches[0].clientX:e.clientX}const rKe=(e,{size:t,color:n,thumbSize:r,radius:i})=>({root:{"--slider-size":tn(t,"slider-size"),"--slider-color":n?$r(n,e):void 0,"--slider-radius":i===void 0?void 0:Ur(i),"--slider-thumb-size":r!==void 0?Te(r):"calc(var(--slider-size) * 2)"}}),iKe={min:0,max:100,minRange:10,step:1,marks:[],label:e=>e,labelTransitionProps:{transition:"fade",duration:0},labelAlwaysOn:!1,showLabelOnHover:!0,disabled:!1,scale:e=>e},PA=Me((e,t)=>{const n=xe("RangeSlider",iKe,e),{classNames:r,styles:i,value:s,onChange:o,onChangeEnd:a,size:u,min:l,max:c,minRange:f,maxRange:d,step:h,precision:p,defaultValue:m,name:g,marks:y,label:v,labelTransitionProps:_,labelAlwaysOn:w,thumbFromLabel:E,thumbToLabel:S,showLabelOnHover:T,thumbChildren:C,disabled:A,unstyled:k,scale:N,inverted:O,className:D,style:$,vars:F,hiddenInputProps:M,...B}=n,U=dt({name:"Slider",props:n,classes:r6,classNames:r,className:D,styles:i,style:$,vars:F,varsResolver:rKe,unstyled:k}),{dir:H}=qh(),[P,z]=I.useState(-1),[W,j]=I.useState(!1),[q,G]=Ss({value:s,defaultValue:m,finalValue:[l,c],onChange:o}),ne=I.useRef(q),ce=I.useRef([]),de=I.useRef(void 0),he=[QO({value:q[0],min:l,max:c}),QO({value:q[1],min:l,max:c})],ve=p??rwe(h),Ie=We=>{G(We),ne.current=We};I.useEffect(()=>{Array.isArray(s)&&(ne.current=s)},Array.isArray(s)?[s[0],s[1]]:[null,null]);const be=(We,ge,ht)=>{const vt=[...ne.current];vt[ge]=We,ge===0&&(We>vt[1]-(f-1e-9)&&(vt[1]=Math.min(We+f,c)),We>(c-(f-1e-9)||l)&&(vt[ge]=ne.current[ge]),vt[1]-We>d&&(vt[1]=We+d)),ge===1&&(We<vt[0]+f&&(vt[0]=Math.max(We-f,l)),We<vt[0]+f&&(vt[ge]=ne.current[ge]),We-vt[0]>d&&(vt[0]=We-d)),vt[0]=dc(vt[0],ve),vt[1]=dc(vt[1],ve),Ie(vt),ht&&(a==null||a(ne.current))},Ke=We=>{if(!A){const ge=r7({value:We,min:l,max:c,step:h,precision:ve});be(ge,de.current,!1)}},{ref:Ue,active:yt}=Y1e(({x:We})=>Ke(We),{onScrubEnd:()=>a==null?void 0:a(ne.current)},H);function it(We){de.current=We}const _e=We=>{Ue.current.focus();const ge=Ue.current.getBoundingClientRect(),ht=nKe(We.nativeEvent),vt=r7({value:ht-ge.left,max:c,min:l,step:h,containerWidth:ge.width}),me=Math.abs(q[0]-vt)>Math.abs(q[1]-vt)?1:0,Ae=H==="ltr"?me:me===1?0:1;de.current=Ae},ke=()=>P!==1&&P!==0?(z(0),0):P,ze=We=>{if(!A)switch(We.key){case"ArrowUp":{We.preventDefault();const ge=ke();ce.current[ge].focus(),be(dc(Math.min(Math.max(ne.current[ge]+h,l),c),ve),ge,!0);break}case"ArrowRight":{We.preventDefault();const ge=ke();ce.current[ge].focus(),be(dc(Math.min(Math.max(H==="rtl"?ne.current[ge]-h:ne.current[ge]+h,l),c),ve),ge,!0);break}case"ArrowDown":{We.preventDefault();const ge=ke();ce.current[ge].focus(),be(dc(Math.min(Math.max(ne.current[ge]-h,l),c),ve),ge,!0);break}case"ArrowLeft":{We.preventDefault();const ge=ke();ce.current[ge].focus(),be(dc(Math.min(Math.max(H==="rtl"?ne.current[ge]+h:ne.current[ge]-h,l),c),ve),ge,!0);break}}},ct={max:c,min:l,size:u,labelTransitionProps:_,labelAlwaysOn:w,onBlur:()=>z(-1)},Ot=Array.isArray(C);return b.jsx(twe,{value:{getStyles:U},children:b.jsxs(gY,{...B,size:u,ref:t,disabled:A,children:[b.jsxs(yY,{offset:he[0],marksOffset:q[0],filled:he[1]-he[0],marks:y,inverted:O,min:l,max:c,value:q[1],disabled:A,containerProps:{ref:Ue,onMouseEnter:T?()=>j(!0):void 0,onMouseLeave:T?()=>j(!1):void 0,onTouchStartCapture:_e,onTouchEndCapture:()=>{de.current=-1},onMouseDownCapture:_e,onMouseUpCapture:()=>{de.current=-1},onKeyDownCapture:ze},children:[b.jsx(XO,{...ct,value:N(q[0]),position:he[0],dragging:yt,label:typeof v=="function"?v(dc(N(q[0]),ve)):v,ref:We=>{ce.current[0]=We},thumbLabel:E,onMouseDown:()=>it(0),onFocus:()=>z(0),showLabelOnHover:T,isHovered:W,disabled:A,children:Ot?C[0]:C}),b.jsx(XO,{...ct,thumbLabel:S,value:N(q[1]),position:he[1],dragging:yt,label:typeof v=="function"?v(dc(N(q[1]),ve)):v,ref:We=>{ce.current[1]=We},onMouseDown:()=>it(1),onFocus:()=>z(1),showLabelOnHover:T,isHovered:W,disabled:A,children:Ot?C[1]:C})]}),b.jsx("input",{type:"hidden",name:`${g}_from`,value:q[0],...M}),b.jsx("input",{type:"hidden",name:`${g}_to`,value:q[1],...M})]})})});PA.classes=r6;PA.displayName="@mantine/core/RangeSlider";const sKe={},Pl=Me((e,t)=>{const{w:n,h:r,miw:i,mih:s,...o}=xe("Space",sKe,e);return b.jsx(pe,{ref:t,...o,w:n,miw:i??n,h:r,mih:s??r})});Pl.displayName="@mantine/core/Space";var iwe={root:"m_559cce2d",content:"m_b912df4e",control:"m_b9131032"};const oKe={maxHeight:100,initialState:!1},aKe=(e,{transitionDuration:t})=>({root:{"--spoiler-transition-duration":t!==void 0?`${t}ms`:void 0}}),vY=Me((e,t)=>{const n=xe("Spoiler",oKe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,initialState:l,maxHeight:c,hideLabel:f,showLabel:d,children:h,controlRef:p,transitionDuration:m,id:g,...y}=n,v=dt({name:"Spoiler",classes:iwe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:aKe}),_=Ta(g),w=`${_}-region`,[E,S]=I.useState(l),{ref:T,height:C}=BUe(),A=E?f:d,k=A!==null&&c<C;return b.jsxs(pe,{...v("root"),id:_,ref:t,"data-has-spoiler":k||void 0,...y,children:[k&&b.jsx(Lb,{component:"button",type:"button",ref:p,onClick:()=>S(N=>!N),"aria-expanded":E,"aria-controls":w,...v("control"),children:A}),b.jsx("div",{...v("content",{style:{maxHeight:E?C?Te(C):void 0:Te(c)}}),"data-reduce-motion":!0,role:"region",id:w,children:b.jsx("div",{ref:T,children:h})})]})});vY.classes=iwe;vY.displayName="@mantine/core/Spoiler";var swe={root:"m_6d731127"};const uKe={gap:"md",align:"stretch",justify:"flex-start"},lKe=(e,{gap:t,align:n,justify:r})=>({root:{"--stack-gap":as(t),"--stack-align":n,"--stack-justify":r}}),Nf=Me((e,t)=>{const n=xe("Stack",uKe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,align:l,justify:c,gap:f,variant:d,...h}=n,p=dt({name:"Stack",props:n,classes:swe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:lKe});return b.jsx(pe,{ref:t,...p("root"),variant:d,...h})});Nf.classes=swe;Nf.displayName="@mantine/core/Stack";const owe=I.createContext(null),cKe=owe.Provider,fKe=()=>I.useContext(owe),dKe={},bY=Me((e,t)=>{const{value:n,defaultValue:r,onChange:i,size:s,wrapperProps:o,children:a,readOnly:u,...l}=xe("SwitchGroup",dKe,e),[c,f]=Ss({value:n,defaultValue:r,finalValue:[],onChange:i}),d=h=>{const p=h.currentTarget.value;!u&&f(c.includes(p)?c.filter(m=>m!==p):[...c,p])};return b.jsx(cKe,{value:{value:c,onChange:d,size:s},children:b.jsx(mi.Wrapper,{size:s,ref:t,...o,...l,labelElement:"div",__staticSelector:"SwitchGroup",children:b.jsx(BG,{role:"group",children:a})})})});bY.classes=mi.Wrapper.classes;bY.displayName="@mantine/core/SwitchGroup";var awe={root:"m_5f93f3bb",input:"m_926b4011",track:"m_9307d992",thumb:"m_93039a1d",trackLabel:"m_8277e082"};const hKe={labelPosition:"right"},pKe=(e,{radius:t,color:n,size:r})=>({root:{"--switch-radius":t===void 0?void 0:Ur(t),"--switch-height":tn(r,"switch-height"),"--switch-width":tn(r,"switch-width"),"--switch-thumb-size":tn(r,"switch-thumb-size"),"--switch-label-font-size":tn(r,"switch-label-font-size"),"--switch-track-label-padding":tn(r,"switch-track-label-padding"),"--switch-color":n?$r(n,e):void 0}}),Xw=Me((e,t)=>{const n=xe("Switch",hKe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,color:l,label:c,offLabel:f,onLabel:d,id:h,size:p,radius:m,wrapperProps:g,children:y,thumbIcon:v,checked:_,defaultChecked:w,onChange:E,labelPosition:S,description:T,error:C,disabled:A,variant:k,rootRef:N,mod:O,...D}=n,$=fKe(),F=p||($==null?void 0:$.size),M=dt({name:"Switch",props:n,classes:awe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:pKe}),{styleProps:B,rest:U}=Db(D),H=Ta(h),P=$?{checked:$.value.includes(U.value),onChange:$.onChange}:{},[z,W]=Ss({value:P.checked??_,defaultValue:w,finalValue:!1});return b.jsxs(DL,{...M("root"),__staticSelector:"Switch",__stylesApiProps:n,id:H,size:F,labelPosition:S,label:c,description:T,error:C,disabled:A,bodyElement:"label",labelElement:"span",classNames:r,styles:o,unstyled:a,"data-checked":P.checked||void 0,variant:k,ref:N,mod:O,...B,...g,children:[b.jsx("input",{...U,disabled:A,checked:z,onChange:j=>{var q;$?(q=P.onChange)==null||q.call(P,j):E==null||E(j),W(j.currentTarget.checked)},id:H,ref:t,type:"checkbox",role:"switch",...M("input")}),b.jsxs(pe,{"aria-hidden":"true",mod:{error:C,"label-position":S},...M("track"),children:[b.jsx(pe,{component:"span",mod:"reduce-motion",...M("thumb"),children:v}),b.jsx("span",{...M("trackLabel"),children:z?d:f})]})]})});Xw.classes={...awe,...d_e};Xw.displayName="@mantine/core/Switch";Xw.Group=bY;const[mKe,gKe]=fo("Table component was not found in the tree");var gk={table:"m_b23fa0ef",th:"m_4e7aa4f3",tr:"m_4e7aa4fd",td:"m_4e7aa4ef",tbody:"m_b2404537",thead:"m_b242d975",caption:"m_9e5a3ac7",scrollContainer:"m_a100c15",scrollContainerInner:"m_62259741"};function yKe(e,t){if(!t)return;const n={};return t.columnBorder&&e.withColumnBorders&&(n["data-with-column-border"]=!0),t.rowBorder&&e.withRowBorders&&(n["data-with-row-border"]=!0),t.striped&&e.striped&&(n["data-striped"]=e.striped),t.highlightOnHover&&e.highlightOnHover&&(n["data-hover"]=!0),t.captionSide&&e.captionSide&&(n["data-side"]=e.captionSide),t.stickyHeader&&e.stickyHeader&&(n["data-sticky"]=!0),n}function jb(e,t){const n=`Table${e.charAt(0).toUpperCase()}${e.slice(1)}`,r=Me((i,s)=>{const o=xe(n,{},i),{classNames:a,className:u,style:l,styles:c,...f}=o,d=gKe();return b.jsx(pe,{component:e,ref:s,...yKe(d,t),...d.getStyles(e,{className:u,classNames:a,style:l,styles:c,props:o}),...f})});return r.displayName=`@mantine/core/${n}`,r.classes=gk,r}const i7=jb("th",{columnBorder:!0}),uwe=jb("td",{columnBorder:!0}),dD=jb("tr",{rowBorder:!0,striped:!0,highlightOnHover:!0}),lwe=jb("thead",{stickyHeader:!0}),cwe=jb("tbody"),fwe=jb("tfoot"),dwe=jb("caption",{captionSide:!0});function _Y({data:e}){return b.jsxs(b.Fragment,{children:[e.caption&&b.jsx(dwe,{children:e.caption}),e.head&&b.jsx(lwe,{children:b.jsx(dD,{children:e.head.map((t,n)=>b.jsx(i7,{children:t},n))})}),e.body&&b.jsx(cwe,{children:e.body.map((t,n)=>b.jsx(dD,{children:t.map((r,i)=>b.jsx(uwe,{children:r},i))},n))}),e.foot&&b.jsx(fwe,{children:b.jsx(dD,{children:e.foot.map((t,n)=>b.jsx(i7,{children:t},n))})})]})}_Y.displayName="@mantine/core/TableDataRenderer";const vKe={type:"scrollarea"},bKe=(e,{minWidth:t,type:n})=>({scrollContainer:{"--table-min-width":Te(t),"--table-overflow":n==="native"?"auto":void 0}}),wY=Me((e,t)=>{const n=xe("TableScrollContainer",vKe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,children:l,minWidth:c,type:f,...d}=n,h=dt({name:"TableScrollContainer",classes:gk,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:bKe,rootSelector:"scrollContainer"});return b.jsx(pe,{component:f==="scrollarea"?bm:"div",...f==="scrollarea"?{offsetScrollbars:"x"}:{},ref:t,...h("scrollContainer"),...d,children:b.jsx("div",{...h("scrollContainerInner"),children:l})})});wY.classes=gk;wY.displayName="@mantine/core/TableScrollContainer";const _Ke={withRowBorders:!0,verticalSpacing:7},wKe=(e,{layout:t,captionSide:n,horizontalSpacing:r,verticalSpacing:i,borderColor:s,stripedColor:o,highlightOnHoverColor:a,striped:u,highlightOnHover:l,stickyHeaderOffset:c,stickyHeader:f})=>({table:{"--table-layout":t,"--table-caption-side":n,"--table-horizontal-spacing":as(r),"--table-vertical-spacing":as(i),"--table-border-color":s?$r(s,e):void 0,"--table-striped-color":u&&o?$r(o,e):void 0,"--table-highlight-on-hover-color":l&&a?$r(a,e):void 0,"--table-sticky-header-offset":f?Te(c):void 0}}),qt=Me((e,t)=>{const n=xe("Table",_Ke,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,horizontalSpacing:l,verticalSpacing:c,captionSide:f,stripedColor:d,highlightOnHoverColor:h,striped:p,highlightOnHover:m,withColumnBorders:g,withRowBorders:y,withTableBorder:v,borderColor:_,layout:w,variant:E,data:S,children:T,stickyHeader:C,stickyHeaderOffset:A,mod:k,...N}=n,O=dt({name:"Table",props:n,className:i,style:s,classes:gk,classNames:r,styles:o,unstyled:a,rootSelector:"table",vars:u,varsResolver:wKe});return b.jsx(mKe,{value:{getStyles:O,stickyHeader:C,striped:p===!0?"odd":p||void 0,highlightOnHover:m,withColumnBorders:g,withRowBorders:y,captionSide:f||"bottom"},children:b.jsx(pe,{component:"table",variant:E,ref:t,mod:[{"data-with-table-border":v},k],...O("table"),...N,children:T||!!S&&b.jsx(_Y,{data:S})})})});qt.classes=gk;qt.displayName="@mantine/core/Table";qt.Td=uwe;qt.Th=i7;qt.Tr=dD;qt.Thead=lwe;qt.Tbody=cwe;qt.Tfoot=fwe;qt.Caption=dwe;qt.ScrollContainer=wY;qt.DataRenderer=_Y;const[EKe,EY]=fo("Tabs component was not found in the tree");var yk={root:"m_89d60db1","list--default":"m_576c9d4",list:"m_89d33d6d",panel:"m_b0c91715",tab:"m_4ec4dce6",tabSection:"m_fc420b1f","tab--default":"m_539e827b","list--outline":"m_6772fbd5","tab--outline":"m_b59ab47c","tab--pills":"m_c3381914"};const xKe={},xY=Me((e,t)=>{const n=xe("TabsList",xKe,e),{children:r,className:i,grow:s,justify:o,classNames:a,styles:u,style:l,mod:c,...f}=n,d=EY();return b.jsx(pe,{...f,...d.getStyles("list",{className:i,style:l,classNames:a,styles:u,props:n,variant:d.variant}),ref:t,role:"tablist",variant:d.variant,mod:[{grow:s,orientation:d.orientation,placement:d.orientation==="vertical"&&d.placement,inverted:d.inverted},c],"aria-orientation":d.orientation,__vars:{"--tabs-justify":o},children:r})});xY.classes=yk;xY.displayName="@mantine/core/TabsList";const SKe={},SY=Me((e,t)=>{const n=xe("TabsPanel",SKe,e),{children:r,className:i,value:s,classNames:o,styles:a,style:u,mod:l,...c}=n,f=EY(),d=f.value===s,h=f.keepMounted||n.keepMounted||d?r:null;return b.jsx(pe,{...c,...f.getStyles("panel",{className:i,classNames:o,styles:a,style:[u,d?void 0:{display:"none"}],props:n}),ref:t,mod:[{orientation:f.orientation},l],role:"tabpanel",id:f.getPanelId(s),"aria-labelledby":f.getTabId(s),children:h})});SY.classes=yk;SY.displayName="@mantine/core/TabsPanel";const TKe={},TY=Me((e,t)=>{const n=xe("TabsTab",TKe,e),{className:r,children:i,rightSection:s,leftSection:o,value:a,onClick:u,onKeyDown:l,disabled:c,color:f,style:d,classNames:h,styles:p,vars:m,mod:g,...y}=n,v=ps(),{dir:_}=qh(),w=EY(),E=a===w.value,S=C=>{w.onChange(w.allowTabDeactivation&&a===w.value?null:a),u==null||u(C)},T={classNames:h,styles:p,props:n};return b.jsxs(xs,{...y,...w.getStyles("tab",{className:r,style:d,variant:w.variant,...T}),disabled:c,unstyled:w.unstyled,variant:w.variant,mod:[{active:E,disabled:c,orientation:w.orientation,inverted:w.inverted,placement:w.orientation==="vertical"&&w.placement},g],ref:t,role:"tab",id:w.getTabId(a),"aria-selected":E,tabIndex:E||w.value===null?0:-1,"aria-controls":w.getPanelId(a),onClick:S,__vars:{"--tabs-color":f?$r(f,v):void 0},onKeyDown:PW({siblingSelector:'[role="tab"]',parentSelector:'[role="tablist"]',activateOnFocus:w.activateTabWithKeyboard,loop:w.loop,orientation:w.orientation||"horizontal",dir:_,onKeyDown:l}),children:[o&&b.jsx("span",{...w.getStyles("tabSection",T),"data-position":"left",children:o}),i&&b.jsx("span",{...w.getStyles("tabLabel",T),children:i}),s&&b.jsx("span",{...w.getStyles("tabSection",T),"data-position":"right",children:s})]})});TY.classes=yk;TY.displayName="@mantine/core/TabsTab";const iae="Tabs.Tab or Tabs.Panel component was rendered with invalid value or without value",CKe={keepMounted:!0,orientation:"horizontal",loop:!0,activateTabWithKeyboard:!0,allowTabDeactivation:!1,unstyled:!1,inverted:!1,variant:"default",placement:"left"},AKe=(e,{radius:t,color:n,autoContrast:r})=>({root:{"--tabs-radius":Ur(t),"--tabs-color":$r(n,e),"--tabs-text-color":Kx(r,e)?Ny({color:n,theme:e,autoContrast:r}):void 0}}),ns=Me((e,t)=>{const n=xe("Tabs",CKe,e),{defaultValue:r,value:i,onChange:s,orientation:o,children:a,loop:u,id:l,activateTabWithKeyboard:c,allowTabDeactivation:f,variant:d,color:h,radius:p,inverted:m,placement:g,keepMounted:y,classNames:v,styles:_,unstyled:w,className:E,style:S,vars:T,autoContrast:C,mod:A,...k}=n,N=Ta(l),[O,D]=Ss({value:i,defaultValue:r,finalValue:null,onChange:s}),$=dt({name:"Tabs",props:n,classes:yk,className:E,style:S,classNames:v,styles:_,unstyled:w,vars:T,varsResolver:AKe});return b.jsx(EKe,{value:{placement:g,value:O,orientation:o,id:N,loop:u,activateTabWithKeyboard:c,getTabId:UO(`${N}-tab`,iae),getPanelId:UO(`${N}-panel`,iae),onChange:D,allowTabDeactivation:f,variant:d,color:h,radius:p,inverted:m,keepMounted:y,unstyled:w,getStyles:$},children:b.jsx(pe,{ref:t,id:N,variant:d,mod:[{orientation:o,inverted:o==="horizontal"&&m,placement:o==="vertical"&&g},A],...$("root"),...k,children:a})})});ns.classes=yk;ns.displayName="@mantine/core/Tabs";ns.Tab=TY;ns.Panel=SY;ns.List=xY;const IKe={},Jg=Me((e,t)=>{const n=xe("TextInput",IKe,e);return b.jsx(Wc,{component:"input",ref:t,...n,__staticSelector:"TextInput"})});Jg.classes=Wc.classes;Jg.displayName="@mantine/core/TextInput";const kKe=["h1","h2","h3","h4","h5","h6"];function RKe(e,t){const n=t!==void 0?t:`h${e}`;return kKe.includes(n)?{fontSize:`var(--mantine-${n}-font-size)`,fontWeight:`var(--mantine-${n}-font-weight)`,lineHeight:`var(--mantine-${n}-line-height)`}:{fontSize:Te(n),fontWeight:`var(--mantine-h${e}-font-weight)`,lineHeight:`var(--mantine-h${e}-line-height)`}}var hwe={root:"m_8a5d1357"};const NKe={order:1},PKe=(e,{order:t,size:n,lineClamp:r,textWrap:i})=>{const s=RKe(t,n);return{root:{"--title-fw":s.fontWeight,"--title-lh":s.lineHeight,"--title-fz":s.fontSize,"--title-line-clamp":typeof r=="number"?r.toString():void 0,"--title-text-wrap":i}}},li=Me((e,t)=>{const n=xe("Title",NKe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,order:u,vars:l,size:c,variant:f,lineClamp:d,textWrap:h,mod:p,...m}=n,g=dt({name:"Title",props:n,classes:hwe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:PKe});return[1,2,3,4,5,6].includes(u)?b.jsx(pe,{...g("root"),component:`h${u}`,variant:f,ref:t,mod:[{order:u,"data-line-clamp":typeof d=="number"},p],size:c,...m}):null});li.classes=hwe;li.displayName="@mantine/core/Title";function DKe(e){let t=e,n=!1;const r=new Set;return{getState(){return t},updateState(i){t=typeof i=="function"?i(t):i},setState(i){this.updateState(i),r.forEach(s=>s(t))},initialize(i){n||(t=i,n=!0)},subscribe(i){return r.add(i),()=>r.delete(i)}}}function OKe(e){return I.useSyncExternalStore(e.subscribe,()=>e.getState(),()=>e.getState())}function $Ke(e,t,n){const r=[],i=[],s={};for(const o of e){const a=o.position||t;s[a]=s[a]||0,s[a]+=1,s[a]<=n?i.push(o):r.push(o)}return{notifications:i,queue:r}}const MKe=()=>DKe({notifications:[],queue:[],defaultPosition:"bottom-right",limit:5}),Bb=MKe(),LKe=(e=Bb)=>OKe(e);function oS(e,t){const n=e.getState(),r=t([...n.notifications,...n.queue]),i=$Ke(r,n.defaultPosition,n.limit);e.setState({notifications:i.notifications,queue:i.queue,limit:n.limit,defaultPosition:n.defaultPosition})}function FKe(e,t=Bb){const n=e.id||Gw();return oS(t,r=>e.id&&r.some(i=>i.id===e.id)?r:[...r,{...e,id:n}]),n}function pwe(e,t=Bb){return oS(t,n=>n.filter(r=>{var i;return r.id===e?((i=r.onClose)==null||i.call(r,r),!1):!0})),e}function jKe(e,t=Bb){return oS(t,n=>n.map(r=>r.id===e.id?{...r,...e}:r)),e.id}function BKe(e=Bb){oS(e,()=>[])}function UKe(e=Bb){oS(e,t=>t.slice(0,e.getState().limit))}const Ub={show:FKe,hide:pwe,update:jKe,clean:BKe,cleanQueue:UKe,updateState:oS};function s7(e,t){return s7=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},s7(e,t)}function mwe(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,s7(e,t)}var gwe={exports:{}},zKe="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",VKe=zKe,HKe=VKe;function ywe(){}function vwe(){}vwe.resetWarningCache=ywe;var qKe=function(){function e(r,i,s,o,a,u){if(u!==HKe){var l=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw l.name="Invariant Violation",l}}e.isRequired=e;function t(){return e}var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:vwe,resetWarningCache:ywe};return n.PropTypes=n,n};gwe.exports=qKe();var WKe=gwe.exports;const sae=Xl(WKe),oae={disabled:!1},JO=_r.createContext(null);var GKe=function(t){return t.scrollTop},b2="unmounted",Cv="exited",Av="entering",tw="entered",o7="exiting",Qm=function(e){mwe(t,e);function t(r,i){var s;s=e.call(this,r,i)||this;var o=i,a=o&&!o.isMounting?r.enter:r.appear,u;return s.appearStatus=null,r.in?a?(u=Cv,s.appearStatus=Av):u=tw:r.unmountOnExit||r.mountOnEnter?u=b2:u=Cv,s.state={status:u},s.nextCallback=null,s}t.getDerivedStateFromProps=function(i,s){var o=i.in;return o&&s.status===b2?{status:Cv}:null};var n=t.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(i){var s=null;if(i!==this.props){var o=this.state.status;this.props.in?o!==Av&&o!==tw&&(s=Av):(o===Av||o===tw)&&(s=o7)}this.updateStatus(!1,s)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var i=this.props.timeout,s,o,a;return s=o=a=i,i!=null&&typeof i!="number"&&(s=i.exit,o=i.enter,a=i.appear!==void 0?i.appear:o),{exit:s,enter:o,appear:a}},n.updateStatus=function(i,s){if(i===void 0&&(i=!1),s!==null)if(this.cancelNextCallback(),s===Av){if(this.props.unmountOnExit||this.props.mountOnEnter){var o=this.props.nodeRef?this.props.nodeRef.current:v2.findDOMNode(this);o&&GKe(o)}this.performEnter(i)}else this.performExit();else this.props.unmountOnExit&&this.state.status===Cv&&this.setState({status:b2})},n.performEnter=function(i){var s=this,o=this.props.enter,a=this.context?this.context.isMounting:i,u=this.props.nodeRef?[a]:[v2.findDOMNode(this),a],l=u[0],c=u[1],f=this.getTimeouts(),d=a?f.appear:f.enter;if(!i&&!o||oae.disabled){this.safeSetState({status:tw},function(){s.props.onEntered(l)});return}this.props.onEnter(l,c),this.safeSetState({status:Av},function(){s.props.onEntering(l,c),s.onTransitionEnd(d,function(){s.safeSetState({status:tw},function(){s.props.onEntered(l,c)})})})},n.performExit=function(){var i=this,s=this.props.exit,o=this.getTimeouts(),a=this.props.nodeRef?void 0:v2.findDOMNode(this);if(!s||oae.disabled){this.safeSetState({status:Cv},function(){i.props.onExited(a)});return}this.props.onExit(a),this.safeSetState({status:o7},function(){i.props.onExiting(a),i.onTransitionEnd(o.exit,function(){i.safeSetState({status:Cv},function(){i.props.onExited(a)})})})},n.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(i,s){s=this.setNextCallback(s),this.setState(i,s)},n.setNextCallback=function(i){var s=this,o=!0;return this.nextCallback=function(a){o&&(o=!1,s.nextCallback=null,i(a))},this.nextCallback.cancel=function(){o=!1},this.nextCallback},n.onTransitionEnd=function(i,s){this.setNextCallback(s);var o=this.props.nodeRef?this.props.nodeRef.current:v2.findDOMNode(this),a=i==null&&!this.props.addEndListener;if(!o||a){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var u=this.props.nodeRef?[this.nextCallback]:[o,this.nextCallback],l=u[0],c=u[1];this.props.addEndListener(l,c)}i!=null&&setTimeout(this.nextCallback,i)},n.render=function(){var i=this.state.status;if(i===b2)return null;var s=this.props,o=s.children;s.in,s.mountOnEnter,s.unmountOnExit,s.appear,s.enter,s.exit,s.timeout,s.addEndListener,s.onEnter,s.onEntering,s.onEntered,s.onExit,s.onExiting,s.onExited,s.nodeRef;var a=YG(s,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return _r.createElement(JO.Provider,{value:null},typeof o=="function"?o(i,a):_r.cloneElement(_r.Children.only(o),a))},t}(_r.Component);Qm.contextType=JO;Qm.propTypes={};function R_(){}Qm.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:R_,onEntering:R_,onEntered:R_,onExit:R_,onExiting:R_,onExited:R_};Qm.UNMOUNTED=b2;Qm.EXITED=Cv;Qm.ENTERING=Av;Qm.ENTERED=tw;Qm.EXITING=o7;function YKe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function CY(e,t){var n=function(s){return t&&I.isValidElement(s)?t(s):s},r=Object.create(null);return e&&I.Children.map(e,function(i){return i}).forEach(function(i){r[i.key]=n(i)}),r}function KKe(e,t){e=e||{},t=t||{};function n(c){return c in t?t[c]:e[c]}var r=Object.create(null),i=[];for(var s in e)s in t?i.length&&(r[s]=i,i=[]):i.push(s);var o,a={};for(var u in t){if(r[u])for(o=0;o<r[u].length;o++){var l=r[u][o];a[r[u][o]]=n(l)}a[u]=n(u)}for(o=0;o<i.length;o++)a[i[o]]=n(i[o]);return a}function s1(e,t,n){return n[t]!=null?n[t]:e.props[t]}function XKe(e,t){return CY(e.children,function(n){return I.cloneElement(n,{onExited:t.bind(null,n),in:!0,appear:s1(n,"appear",e),enter:s1(n,"enter",e),exit:s1(n,"exit",e)})})}function QKe(e,t,n){var r=CY(e.children),i=KKe(t,r);return Object.keys(i).forEach(function(s){var o=i[s];if(I.isValidElement(o)){var a=s in t,u=s in r,l=t[s],c=I.isValidElement(l)&&!l.props.in;u&&(!a||c)?i[s]=I.cloneElement(o,{onExited:n.bind(null,o),in:!0,exit:s1(o,"exit",e),enter:s1(o,"enter",e)}):!u&&a&&!c?i[s]=I.cloneElement(o,{in:!1}):u&&a&&I.isValidElement(l)&&(i[s]=I.cloneElement(o,{onExited:n.bind(null,o),in:l.props.in,exit:s1(o,"exit",e),enter:s1(o,"enter",e)}))}}),i}var JKe=Object.values||function(e){return Object.keys(e).map(function(t){return e[t]})},ZKe={component:"div",childFactory:function(t){return t}},Pg=function(e){mwe(t,e);function t(r,i){var s;s=e.call(this,r,i)||this;var o=s.handleExited.bind(YKe(s));return s.state={contextValue:{isMounting:!0},handleExited:o,firstRender:!0},s}var n=t.prototype;return n.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},n.componentWillUnmount=function(){this.mounted=!1},t.getDerivedStateFromProps=function(i,s){var o=s.children,a=s.handleExited,u=s.firstRender;return{children:u?XKe(i,a):QKe(i,o,a),firstRender:!1}},n.handleExited=function(i,s){var o=CY(this.props.children);i.key in o||(i.props.onExited&&i.props.onExited(s),this.mounted&&this.setState(function(a){var u=YO({},a.children);return delete u[i.key],{children:u}}))},n.render=function(){var i=this.props,s=i.component,o=i.childFactory,a=YG(i,["component","childFactory"]),u=this.state.contextValue,l=JKe(this.state.children).map(o);return delete a.appear,delete a.enter,delete a.exit,s===null?_r.createElement(JO.Provider,{value:u},l):_r.createElement(JO.Provider,{value:u},_r.createElement(s,a,l))},t}(_r.Component);Pg.propTypes={};Pg.defaultProps=ZKe;const bwe=["bottom-center","bottom-left","bottom-right","top-center","top-left","top-right"];function eXe(e,t){return e.reduce((n,r)=>(n[r.position||t].push(r),n),bwe.reduce((n,r)=>(n[r]=[],n),{}))}const aae={left:"translateX(-100%)",right:"translateX(100%)","top-center":"translateY(-100%)","bottom-center":"translateY(100%)"},tXe={left:"translateX(0)",right:"translateX(0)","top-center":"translateY(0)","bottom-center":"translateY(0)"};function nXe({state:e,maxHeight:t,position:n,transitionDuration:r}){const[i,s]=n.split("-"),o=s==="center"?`${i}-center`:s,a={opacity:0,maxHeight:t,transform:aae[o],transitionDuration:`${r}ms, ${r}ms, ${r}ms`,transitionTimingFunction:"cubic-bezier(.51,.3,0,1.21), cubic-bezier(.51,.3,0,1.21), linear",transitionProperty:"opacity, transform, max-height"},u={opacity:1,transform:tXe[o]},l={opacity:0,maxHeight:0,transform:aae[o]};return{...a,...{entering:u,entered:u,exiting:l,exited:l}[e]}}function rXe(e,t){return typeof t=="number"?t:t===!1||e===!1?!1:e}const _we=I.forwardRef(({data:e,onHide:t,autoClose:n,...r},i)=>{const{autoClose:s,message:o,...a}=e,u=rXe(n,e.autoClose),l=I.useRef(),c=()=>window.clearTimeout(l.current),f=()=>{t(e.id),c()},d=()=>{typeof u=="number"&&(l.current=window.setTimeout(f,u))};return I.useEffect(()=>{var h;(h=e.onOpen)==null||h.call(e,e)},[]),I.useEffect(()=>(d(),c),[u]),b.jsx(oY,{...r,...a,onClose:f,ref:i,onMouseEnter:c,onMouseLeave:d,children:o})});_we.displayName="@mantine/notifications/NotificationContainer";var wwe={root:"m_b37d9ac7",notification:"m_5ed0edd0"};const iXe=Qm,sXe={position:"bottom-right",autoClose:4e3,transitionDuration:250,containerWidth:440,notificationMaxHeight:200,limit:5,zIndex:Zl("overlay"),store:Bb,withinPortal:!0},oXe=(e,{zIndex:t,containerWidth:n})=>({root:{"--notifications-z-index":t==null?void 0:t.toString(),"--notifications-container-width":Te(n)}}),Jm=Me((e,t)=>{const n=xe("Notifications",sXe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,position:l,autoClose:c,transitionDuration:f,containerWidth:d,notificationMaxHeight:h,limit:p,zIndex:m,store:g,portalProps:y,withinPortal:v,..._}=n,w=ps(),E=LKe(g),S=MUe(),T=EL(),C=I.useRef({}),A=I.useRef(0),N=(w.respectReducedMotion?T:!1)?1:f,O=dt({name:"Notifications",classes:wwe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:oXe});I.useEffect(()=>{g==null||g.updateState(F=>({...F,limit:p||5,defaultPosition:l}))},[p,l]),Th(()=>{E.notifications.length>A.current&&setTimeout(()=>S(),0),A.current=E.notifications.length},[E.notifications]);const D=eXe(E.notifications,l),$=bwe.reduce((F,M)=>(F[M]=D[M].map(({style:B,...U})=>b.jsx(iXe,{timeout:N,onEnter:()=>C.current[U.id].offsetHeight,nodeRef:{current:C.current[U.id]},children:H=>b.jsx(_we,{ref:P=>{C.current[U.id]=P},data:U,onHide:P=>pwe(P,g),autoClose:c,...O("notification",{style:{...nXe({state:H,position:M,transitionDuration:N,maxHeight:h}),...B}})})},U.id)),F),{});return b.jsxs(Jx,{withinPortal:v,...y,children:[b.jsx(pe,{...O("root"),"data-position":"top-center",ref:t,..._,children:b.jsx(Pg,{children:$["top-center"]})}),b.jsx(pe,{...O("root"),"data-position":"top-left",..._,children:b.jsx(Pg,{children:$["top-left"]})}),b.jsx(pe,{...O("root"),"data-position":"top-right",..._,children:b.jsx(Pg,{children:$["top-right"]})}),b.jsx(pe,{...O("root"),"data-position":"bottom-right",..._,children:b.jsx(Pg,{children:$["bottom-right"]})}),b.jsx(pe,{...O("root"),"data-position":"bottom-left",..._,children:b.jsx(Pg,{children:$["bottom-left"]})}),b.jsx(pe,{...O("root"),"data-position":"bottom-center",..._,children:b.jsx(Pg,{children:$["bottom-center"]})})]})});Jm.classes=wwe;Jm.displayName="@mantine/notifications/Notifications";Jm.show=Ub.show;Jm.hide=Ub.hide;Jm.update=Ub.update;Jm.clean=Ub.clean;Jm.cleanQueue=Ub.cleanQueue;Jm.updateState=Ub.updateState;const Ewe=I.createContext({storageEngine:void 0,setStorageEngine:()=>{}}),Cs=()=>I.useContext(Ewe);function aXe({children:e}){const[t,n]=_r.useState(void 0),r=_r.useMemo(()=>({storageEngine:t,setStorageEngine:n}),[t]);return b.jsx(Ewe.Provider,{value:r,children:e})}/**
 * @remix-run/router v1.16.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function DA(){return DA=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},DA.apply(this,arguments)}var Zg;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Zg||(Zg={}));const uae="popstate";function uXe(e){e===void 0&&(e={});function t(r,i){let{pathname:s,search:o,hash:a}=r.location;return a7("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:Swe(i)}return cXe(t,n,null,e)}function us(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function xwe(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function lXe(){return Math.random().toString(36).substr(2,8)}function lae(e,t){return{usr:e.state,key:e.key,idx:t}}function a7(e,t,n,r){return n===void 0&&(n=null),DA({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?aS(t):t,{state:n,key:t&&t.key||r||lXe()})}function Swe(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function aS(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function cXe(e,t,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=Zg.Pop,u=null,l=c();l==null&&(l=0,o.replaceState(DA({},o.state,{idx:l}),""));function c(){return(o.state||{idx:null}).idx}function f(){a=Zg.Pop;let g=c(),y=g==null?null:g-l;l=g,u&&u({action:a,location:m.location,delta:y})}function d(g,y){a=Zg.Push;let v=a7(m.location,g,y);l=c()+1;let _=lae(v,l),w=m.createHref(v);try{o.pushState(_,"",w)}catch(E){if(E instanceof DOMException&&E.name==="DataCloneError")throw E;i.location.assign(w)}s&&u&&u({action:a,location:m.location,delta:1})}function h(g,y){a=Zg.Replace;let v=a7(m.location,g,y);l=c();let _=lae(v,l),w=m.createHref(v);o.replaceState(_,"",w),s&&u&&u({action:a,location:m.location,delta:0})}function p(g){let y=i.location.origin!=="null"?i.location.origin:i.location.href,v=typeof g=="string"?g:Swe(g);return v=v.replace(/ $/,"%20"),us(y,"No window.location.(origin|href) available to create URL for href: "+v),new URL(v,y)}let m={get action(){return a},get location(){return e(i,o)},listen(g){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(uae,f),u=g,()=>{i.removeEventListener(uae,f),u=null}},createHref(g){return t(i,g)},createURL:p,encodeLocation(g){let y=p(g);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:d,replace:h,go(g){return o.go(g)}};return m}var cae;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(cae||(cae={}));function fXe(e,t,n){n===void 0&&(n="/");let r=typeof t=="string"?aS(t):t,i=Awe(r.pathname||"/",n);if(i==null)return null;let s=Twe(e);dXe(s);let o=null;for(let a=0;o==null&&a<s.length;++a){let u=SXe(i);o=wXe(s[a],u)}return o}function Twe(e,t,n,r){t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,a)=>{let u={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};u.relativePath.startsWith("/")&&(us(u.relativePath.startsWith(r),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(r.length));let l=w0([r,u.relativePath]),c=n.concat(u);s.children&&s.children.length>0&&(us(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+l+'".')),Twe(s.children,t,c,l)),!(s.path==null&&!s.index)&&t.push({path:l,score:bXe(l,s.index),routesMeta:c})};return e.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let u of Cwe(s.path))i(s,o,u)}),t}function Cwe(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=Cwe(r.join("/")),a=[];return a.push(...o.map(u=>u===""?s:[s,u].join("/"))),i&&a.push(...o),a.map(u=>e.startsWith("/")&&u===""?"/":u)}function dXe(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:_Xe(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const hXe=/^:[\w-]+$/,pXe=3,mXe=2,gXe=1,yXe=10,vXe=-2,fae=e=>e==="*";function bXe(e,t){let n=e.split("/"),r=n.length;return n.some(fae)&&(r+=vXe),t&&(r+=mXe),n.filter(i=>!fae(i)).reduce((i,s)=>i+(hXe.test(s)?pXe:s===""?gXe:yXe),r)}function _Xe(e,t){return e.length===t.length&&e.slice(0,-1).every((r,i)=>r===t[i])?e[e.length-1]-t[t.length-1]:0}function wXe(e,t){let{routesMeta:n}=e,r={},i="/",s=[];for(let o=0;o<n.length;++o){let a=n[o],u=o===n.length-1,l=i==="/"?t:t.slice(i.length)||"/",c=EXe({path:a.relativePath,caseSensitive:a.caseSensitive,end:u},l);if(!c)return null;Object.assign(r,c.params);let f=a.route;s.push({params:r,pathname:w0([i,c.pathname]),pathnameBase:IXe(w0([i,c.pathnameBase])),route:f}),c.pathnameBase!=="/"&&(i=w0([i,c.pathnameBase]))}return s}function EXe(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=xXe(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((l,c,f)=>{let{paramName:d,isOptional:h}=c;if(d==="*"){let m=a[f]||"";o=s.slice(0,s.length-m.length).replace(/(.)\/+$/,"$1")}const p=a[f];return h&&!p?l[d]=void 0:l[d]=(p||"").replace(/%2F/g,"/"),l},{}),pathname:s,pathnameBase:o,pattern:e}}function xXe(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),xwe(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,u)=>(r.push({paramName:a,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),i+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":e!==""&&e!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),r]}function SXe(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return xwe(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function Awe(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function TXe(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:i=""}=typeof e=="string"?aS(e):e;return{pathname:n?n.startsWith("/")?n:CXe(n,t):t,search:kXe(r),hash:RXe(i)}}function CXe(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function Wj(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function AXe(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function AY(e,t){let n=AXe(e);return t?n.map((r,i)=>i===e.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function IY(e,t,n,r){r===void 0&&(r=!1);let i;typeof e=="string"?i=aS(e):(i=DA({},e),us(!i.pathname||!i.pathname.includes("?"),Wj("?","pathname","search",i)),us(!i.pathname||!i.pathname.includes("#"),Wj("#","pathname","hash",i)),us(!i.search||!i.search.includes("#"),Wj("#","search","hash",i)));let s=e===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=n;else{let f=t.length-1;if(!r&&o.startsWith("..")){let d=o.split("/");for(;d[0]==="..";)d.shift(),f-=1;i.pathname=d.join("/")}a=f>=0?t[f]:"/"}let u=TXe(i,a),l=o&&o!=="/"&&o.endsWith("/"),c=(s||o===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(l||c)&&(u.pathname+="/"),u}const w0=e=>e.join("/").replace(/\/\/+/g,"/"),IXe=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),kXe=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,RXe=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function NXe(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const Iwe=["post","put","patch","delete"];new Set(Iwe);const PXe=["get",...Iwe];new Set(PXe);/**
 * React Router v6.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function OA(){return OA=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},OA.apply(this,arguments)}const kY=I.createContext(null),DXe=I.createContext(null),zb=I.createContext(null),s6=I.createContext(null),Gh=I.createContext({outlet:null,matches:[],isDataRoute:!1}),kwe=I.createContext(null);function Rwe(e,t){let{relative:n}={};uS()||us(!1);let{basename:r,navigator:i}=I.useContext(zb),{hash:s,pathname:o,search:a}=LXe(e,{relative:n}),u=o;return r!=="/"&&(u=o==="/"?r:w0([r,o])),i.createHref({pathname:u,search:a,hash:s})}function uS(){return I.useContext(s6)!=null}function Oy(){return uS()||us(!1),I.useContext(s6).location}function Nwe(e){I.useContext(zb).static||I.useLayoutEffect(e)}function Yh(){let{isDataRoute:e}=I.useContext(Gh);return e?YXe():OXe()}function OXe(){uS()||us(!1);let e=I.useContext(kY),{basename:t,future:n,navigator:r}=I.useContext(zb),{matches:i}=I.useContext(Gh),{pathname:s}=Oy(),o=JSON.stringify(AY(i,n.v7_relativeSplatPath)),a=I.useRef(!1);return Nwe(()=>{a.current=!0}),I.useCallback(function(l,c){if(c===void 0&&(c={}),!a.current)return;if(typeof l=="number"){r.go(l);return}let f=IY(l,JSON.parse(o),s,c.relative==="path");e==null&&t!=="/"&&(f.pathname=f.pathname==="/"?t:w0([t,f.pathname])),(c.replace?r.replace:r.push)(f,c.state,c)},[t,r,o,s,e])}const $Xe=I.createContext(null);function MXe(e){let t=I.useContext(Gh).outlet;return t&&I.createElement($Xe.Provider,{value:e},t)}function Em(){let{matches:e}=I.useContext(Gh),t=e[e.length-1];return t?t.params:{}}function LXe(e,t){let{relative:n}=t===void 0?{}:t,{future:r}=I.useContext(zb),{matches:i}=I.useContext(Gh),{pathname:s}=Oy(),o=JSON.stringify(AY(i,r.v7_relativeSplatPath));return I.useMemo(()=>IY(e,JSON.parse(o),s,n==="path"),[e,o,s,n])}function Pwe(e,t){return FXe(e,t)}function FXe(e,t,n,r){uS()||us(!1);let{navigator:i}=I.useContext(zb),{matches:s}=I.useContext(Gh),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let u=o?o.pathnameBase:"/";o&&o.route;let l=Oy(),c;if(t){var f;let g=typeof t=="string"?aS(t):t;u==="/"||(f=g.pathname)!=null&&f.startsWith(u)||us(!1),c=g}else c=l;let d=c.pathname||"/",h=d;if(u!=="/"){let g=u.replace(/^\//,"").split("/");h="/"+d.replace(/^\//,"").split("/").slice(g.length).join("/")}let p=fXe(e,{pathname:h}),m=VXe(p&&p.map(g=>Object.assign({},g,{params:Object.assign({},a,g.params),pathname:w0([u,i.encodeLocation?i.encodeLocation(g.pathname).pathname:g.pathname]),pathnameBase:g.pathnameBase==="/"?u:w0([u,i.encodeLocation?i.encodeLocation(g.pathnameBase).pathname:g.pathnameBase])})),s,n,r);return t&&m?I.createElement(s6.Provider,{value:{location:OA({pathname:"/",search:"",hash:"",state:null,key:"default"},c),navigationType:Zg.Pop}},m):m}function jXe(){let e=GXe(),t=NXe(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return I.createElement(I.Fragment,null,I.createElement("h2",null,"Unexpected Application Error!"),I.createElement("h3",{style:{fontStyle:"italic"}},t),n?I.createElement("pre",{style:i},n):null,null)}const BXe=I.createElement(jXe,null);class UXe extends I.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?I.createElement(Gh.Provider,{value:this.props.routeContext},I.createElement(kwe.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function zXe(e){let{routeContext:t,match:n,children:r}=e,i=I.useContext(kY);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),I.createElement(Gh.Provider,{value:t},r)}function VXe(e,t,n,r){var i;if(t===void 0&&(t=[]),n===void 0&&(n=null),r===void 0&&(r=null),e==null){var s;if((s=n)!=null&&s.errors)e=n.matches;else return null}let o=e,a=(i=n)==null?void 0:i.errors;if(a!=null){let c=o.findIndex(f=>f.route.id&&(a==null?void 0:a[f.route.id])!==void 0);c>=0||us(!1),o=o.slice(0,Math.min(o.length,c+1))}let u=!1,l=-1;if(n&&r&&r.v7_partialHydration)for(let c=0;c<o.length;c++){let f=o[c];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(l=c),f.route.id){let{loaderData:d,errors:h}=n,p=f.route.loader&&d[f.route.id]===void 0&&(!h||h[f.route.id]===void 0);if(f.route.lazy||p){u=!0,l>=0?o=o.slice(0,l+1):o=[o[0]];break}}}return o.reduceRight((c,f,d)=>{let h,p=!1,m=null,g=null;n&&(h=a&&f.route.id?a[f.route.id]:void 0,m=f.route.errorElement||BXe,u&&(l<0&&d===0?(p=!0,g=null):l===d&&(p=!0,g=f.route.hydrateFallbackElement||null)));let y=t.concat(o.slice(0,d+1)),v=()=>{let _;return h?_=m:p?_=g:f.route.Component?_=I.createElement(f.route.Component,null):f.route.element?_=f.route.element:_=c,I.createElement(zXe,{match:f,routeContext:{outlet:c,matches:y,isDataRoute:n!=null},children:_})};return n&&(f.route.ErrorBoundary||f.route.errorElement||d===0)?I.createElement(UXe,{location:n.location,revalidation:n.revalidation,component:m,error:h,children:v(),routeContext:{outlet:null,matches:y,isDataRoute:!0}}):v()},null)}var Dwe=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(Dwe||{}),ZO=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(ZO||{});function HXe(e){let t=I.useContext(kY);return t||us(!1),t}function qXe(e){let t=I.useContext(DXe);return t||us(!1),t}function WXe(e){let t=I.useContext(Gh);return t||us(!1),t}function Owe(e){let t=WXe(),n=t.matches[t.matches.length-1];return n.route.id||us(!1),n.route.id}function GXe(){var e;let t=I.useContext(kwe),n=qXe(ZO.UseRouteError),r=Owe(ZO.UseRouteError);return t!==void 0?t:(e=n.errors)==null?void 0:e[r]}function YXe(){let{router:e}=HXe(Dwe.UseNavigateStable),t=Owe(ZO.UseNavigateStable),n=I.useRef(!1);return Nwe(()=>{n.current=!0}),I.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?e.navigate(i):e.navigate(i,OA({fromRouteId:t},s)))},[e,t])}function RY(e){let{to:t,replace:n,state:r,relative:i}=e;uS()||us(!1);let{future:s,static:o}=I.useContext(zb),{matches:a}=I.useContext(Gh),{pathname:u}=Oy(),l=Yh(),c=IY(t,AY(a,s.v7_relativeSplatPath),u,i==="path"),f=JSON.stringify(c);return I.useEffect(()=>l(JSON.parse(f),{replace:n,state:r,relative:i}),[l,f,i,n,r]),null}function KXe(e){return MXe(e.context)}function Cp(e){us(!1)}function XXe(e){let{basename:t="/",children:n=null,location:r,navigationType:i=Zg.Pop,navigator:s,static:o=!1,future:a}=e;uS()&&us(!1);let u=t.replace(/^\/*/,"/"),l=I.useMemo(()=>({basename:u,navigator:s,static:o,future:OA({v7_relativeSplatPath:!1},a)}),[u,a,s,o]);typeof r=="string"&&(r=aS(r));let{pathname:c="/",search:f="",hash:d="",state:h=null,key:p="default"}=r,m=I.useMemo(()=>{let g=Awe(c,u);return g==null?null:{location:{pathname:g,search:f,hash:d,state:h,key:p},navigationType:i}},[u,c,f,d,h,p,i]);return m==null?null:I.createElement(zb.Provider,{value:l},I.createElement(s6.Provider,{children:n,value:m}))}function QXe(e){let{children:t,location:n}=e;return Pwe(u7(t),n)}new Promise(()=>{});function u7(e,t){t===void 0&&(t=[]);let n=[];return I.Children.forEach(e,(r,i)=>{if(!I.isValidElement(r))return;let s=[...t,i];if(r.type===I.Fragment){n.push.apply(n,u7(r.props.children,s));return}r.type!==Cp&&us(!1),!r.props.index||!r.props.children||us(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=u7(r.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function l7(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,n)=>{let r=e[n];return t.concat(Array.isArray(r)?r.map(i=>[n,i]):[[n,r]])},[]))}function JXe(e,t){let n=l7(e);return t&&t.forEach((r,i)=>{n.has(i)||t.getAll(i).forEach(s=>{n.append(i,s)})}),n}const ZXe="6";try{window.__reactRouterVersion=ZXe}catch{}const eQe="startTransition",dae=mO[eQe];function tQe(e){let{basename:t,children:n,future:r,window:i}=e,s=I.useRef();s.current==null&&(s.current=uXe({window:i,v5Compat:!0}));let o=s.current,[a,u]=I.useState({action:o.action,location:o.location}),{v7_startTransition:l}=r||{},c=I.useCallback(f=>{l&&dae?dae(()=>u(f)):u(f)},[u,l]);return I.useLayoutEffect(()=>o.listen(c),[o,c]),I.createElement(XXe,{basename:t,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}var hae;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(hae||(hae={}));var pae;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(pae||(pae={}));function NY(e){let t=I.useRef(l7(e)),n=I.useRef(!1),r=Oy(),i=I.useMemo(()=>JXe(r.search,n.current?null:t.current),[r.search]),s=Yh(),o=I.useCallback((a,u)=>{const l=l7(typeof a=="function"?a(i):a);n.current=!0,s("?"+l,u)},[s,i]);return[i,o]}const PY=I.createContext(null);PY.displayName="@mantine/modals/ModalsContext";function nQe(){const e=I.useContext(PY);if(!e)throw new Error("[@mantine/modals] useModals hook was called outside of context, wrap your app with ModalsProvider component");return e}function rQe({id:e,cancelProps:t,confirmProps:n,labels:r={cancel:"",confirm:""},closeOnConfirm:i=!0,closeOnCancel:s=!0,groupProps:o,onCancel:a,onConfirm:u,children:l}){const{cancel:c,confirm:f}=r,d=nQe(),h=m=>{typeof(t==null?void 0:t.onClick)=="function"&&(t==null||t.onClick(m)),typeof a=="function"&&a(),s&&d.closeModal(e)},p=m=>{typeof(n==null?void 0:n.onClick)=="function"&&(n==null||n.onClick(m)),typeof u=="function"&&u(),i&&d.closeModal(e)};return b.jsxs(b.Fragment,{children:[l&&b.jsx(pe,{mb:"md",children:l}),b.jsxs(ls,{justify:"flex-end",...o,children:[b.jsx(fn,{variant:"default",...t,onClick:h,children:(t==null?void 0:t.children)||c}),b.jsx(fn,{...n,onClick:p,children:(n==null?void 0:n.children)||f})]})]})}const[iQe,o6]=KUe("mantine-modals");o6("openModal");o6("closeModal");o6("closeAllModals");const c7=o6("openConfirmModal");function mae(e,t){var n,r,i,s;t&&e.type==="confirm"&&((r=(n=e.props).onCancel)==null||r.call(n)),(s=(i=e.props).onClose)==null||s.call(i)}function sQe(e,t){switch(t.type){case"OPEN":return{current:t.modal,modals:[...e.modals,t.modal]};case"CLOSE":{const n=e.modals.find(i=>i.id===t.modalId);if(!n)return e;mae(n,t.canceled);const r=e.modals.filter(i=>i.id!==t.modalId);return{current:r[r.length-1]||e.current,modals:r}}case"CLOSE_ALL":return e.modals.length?(e.modals.concat().reverse().forEach(n=>{mae(n,t.canceled)}),{current:e.current,modals:[]}):e;default:return e}}function oQe(e){if(!e)return{confirmProps:{},modalProps:{}};const{id:t,children:n,onCancel:r,onConfirm:i,closeOnConfirm:s,closeOnCancel:o,cancelProps:a,confirmProps:u,groupProps:l,labels:c,...f}=e;return{confirmProps:{id:t,children:n,onCancel:r,onConfirm:i,closeOnConfirm:s,closeOnCancel:o,cancelProps:a,confirmProps:u,groupProps:l,labels:c},modalProps:{id:t,...f}}}function aQe({children:e,modalProps:t,labels:n,modals:r}){const[i,s]=I.useReducer(sQe,{modals:[],current:null}),o=I.useRef(i);o.current=i;const a=I.useCallback(g=>{s({type:"CLOSE_ALL",canceled:g})},[o,s]),u=I.useCallback(({modalId:g,...y})=>{const v=g||Gw();return s({type:"OPEN",modal:{id:v,type:"content",props:y}}),v},[s]),l=I.useCallback(({modalId:g,...y})=>{const v=g||Gw();return s({type:"OPEN",modal:{id:v,type:"confirm",props:y}}),v},[s]),c=I.useCallback((g,{modalId:y,...v})=>{const _=y||Gw();return s({type:"OPEN",modal:{id:_,type:"context",props:v,ctx:g}}),_},[s]),f=I.useCallback((g,y)=>{s({type:"CLOSE",modalId:g,canceled:y})},[o,s]);iQe({openModal:u,openConfirmModal:l,openContextModal:({modal:g,...y})=>c(g,y),closeModal:f,closeContextModal:f,closeAllModals:a});const d={modals:i.modals,openModal:u,openConfirmModal:l,openContextModal:c,closeModal:f,closeContextModal:f,closeAll:a},h=()=>{const g=o.current.current;switch(g==null?void 0:g.type){case"context":{const{innerProps:y,...v}=g.props,_=r[g.ctx];return{modalProps:v,content:b.jsx(_,{innerProps:y,context:d,id:g.id})}}case"confirm":{const{modalProps:y,confirmProps:v}=oQe(g.props);return{modalProps:y,content:b.jsx(rQe,{...v,id:g.id,labels:g.props.labels||n})}}case"content":{const{children:y,...v}=g.props;return{modalProps:v,content:b.jsx(b.Fragment,{children:y})}}default:return{modalProps:{},content:null}}},{modalProps:p,content:m}=h();return b.jsxs(PY.Provider,{value:d,children:[b.jsx(Yi,{zIndex:Zl("modal")+1,...t,...p,opened:i.modals.length>0,onClose:()=>{var g;return f((g=i.current)==null?void 0:g.id)},children:m}),e]})}/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var uQe={outline:{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"},filled:{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"currentColor",stroke:"none"}};/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tn=(e,t,n,r)=>{const i=I.forwardRef(({color:s="currentColor",size:o=24,stroke:a=2,className:u,children:l,...c},f)=>I.createElement("svg",{ref:f,...uQe[e],width:o,height:o,className:["tabler-icon",`tabler-icon-${t}`,u].join(" "),...e==="filled"?{fill:s}:{strokeWidth:a,stroke:s},...c},[...r.map(([d,h])=>I.createElement(d,h)),...Array.isArray(l)?l:[l]]));return i.displayName=`${n}`,i};/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var lQe=Tn("outline","adjustments-horizontal","IconAdjustmentsHorizontal",[["path",{d:"M14 6m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0",key:"svg-0"}],["path",{d:"M4 6l8 0",key:"svg-1"}],["path",{d:"M16 6l4 0",key:"svg-2"}],["path",{d:"M8 12m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0",key:"svg-3"}],["path",{d:"M4 12l2 0",key:"svg-4"}],["path",{d:"M10 12l10 0",key:"svg-5"}],["path",{d:"M17 18m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0",key:"svg-6"}],["path",{d:"M4 18l11 0",key:"svg-7"}],["path",{d:"M19 18l1 0",key:"svg-8"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var cQe=Tn("outline","alert-circle","IconAlertCircle",[["path",{d:"M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0",key:"svg-0"}],["path",{d:"M12 8v4",key:"svg-1"}],["path",{d:"M12 16h.01",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var gae=Tn("outline","alert-triangle","IconAlertTriangle",[["path",{d:"M12 9v4",key:"svg-0"}],["path",{d:"M10.363 3.591l-8.106 13.534a1.914 1.914 0 0 0 1.636 2.871h16.214a1.914 1.914 0 0 0 1.636 -2.87l-8.106 -13.536a1.914 1.914 0 0 0 -3.274 0z",key:"svg-1"}],["path",{d:"M12 16h.01",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var fQe=Tn("outline","arrows-shuffle","IconArrowsShuffle",[["path",{d:"M18 4l3 3l-3 3",key:"svg-0"}],["path",{d:"M18 20l3 -3l-3 -3",key:"svg-1"}],["path",{d:"M3 7h3a5 5 0 0 1 5 5a5 5 0 0 0 5 5h5",key:"svg-2"}],["path",{d:"M21 7h-5a4.978 4.978 0 0 0 -3 1m-4 8a4.984 4.984 0 0 1 -3 1h-3",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var dQe=Tn("outline","at","IconAt",[["path",{d:"M12 12m-4 0a4 4 0 1 0 8 0a4 4 0 1 0 -8 0",key:"svg-0"}],["path",{d:"M16 12v1.5a2.5 2.5 0 0 0 5 0v-1.5a9 9 0 1 0 -5.5 8.28",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var hQe=Tn("outline","brain","IconBrain",[["path",{d:"M15.5 13a3.5 3.5 0 0 0 -3.5 3.5v1a3.5 3.5 0 0 0 7 0v-1.8",key:"svg-0"}],["path",{d:"M8.5 13a3.5 3.5 0 0 1 3.5 3.5v1a3.5 3.5 0 0 1 -7 0v-1.8",key:"svg-1"}],["path",{d:"M17.5 16a3.5 3.5 0 0 0 0 -7h-.5",key:"svg-2"}],["path",{d:"M19 9.3v-2.8a3.5 3.5 0 0 0 -7 0",key:"svg-3"}],["path",{d:"M6.5 16a3.5 3.5 0 0 1 0 -7h.5",key:"svg-4"}],["path",{d:"M5 9.3v-2.8a3.5 3.5 0 0 1 7 0v10",key:"svg-5"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var pQe=Tn("outline","bubble-text","IconBubbleText",[["path",{d:"M7 10h10",key:"svg-0"}],["path",{d:"M9 14h5",key:"svg-1"}],["path",{d:"M12.4 3a5.34 5.34 0 0 1 4.906 3.239a5.333 5.333 0 0 1 -1.195 10.6a4.26 4.26 0 0 1 -5.28 1.863l-3.831 2.298v-3.134a2.668 2.668 0 0 1 -1.795 -3.773a4.8 4.8 0 0 1 2.908 -8.933a5.33 5.33 0 0 1 4.287 -2.16",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var mQe=Tn("outline","chart-bar","IconChartBar",[["path",{d:"M3 13a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v6a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z",key:"svg-0"}],["path",{d:"M15 9a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v10a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z",key:"svg-1"}],["path",{d:"M9 5a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v14a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z",key:"svg-2"}],["path",{d:"M4 20h14",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var gQe=Tn("outline","chart-donut-2","IconChartDonut2",[["path",{d:"M12 3v5m4 4h5",key:"svg-0"}],["path",{d:"M12 12m-4 0a4 4 0 1 0 8 0a4 4 0 1 0 -8 0",key:"svg-1"}],["path",{d:"M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var yQe=Tn("outline","chart-histogram","IconChartHistogram",[["path",{d:"M3 3v18h18",key:"svg-0"}],["path",{d:"M20 18v3",key:"svg-1"}],["path",{d:"M16 16v5",key:"svg-2"}],["path",{d:"M12 13v8",key:"svg-3"}],["path",{d:"M8 16v5",key:"svg-4"}],["path",{d:"M3 11c6 0 5 -5 9 -5s3 5 9 5",key:"svg-5"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var $we=Tn("outline","check","IconCheck",[["path",{d:"M5 12l5 5l10 -10",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var vQe=Tn("outline","chevron-down","IconChevronDown",[["path",{d:"M6 9l6 6l6 -6",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var yae=Tn("outline","circle-check","IconCircleCheck",[["path",{d:"M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0",key:"svg-0"}],["path",{d:"M9 12l2 2l4 -4",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var bQe=Tn("outline","code-plus","IconCodePlus",[["path",{d:"M9 12h6",key:"svg-0"}],["path",{d:"M12 9v6",key:"svg-1"}],["path",{d:"M6 19a2 2 0 0 1 -2 -2v-4l-1 -1l1 -1v-4a2 2 0 0 1 2 -2",key:"svg-2"}],["path",{d:"M18 19a2 2 0 0 0 2 -2v-4l1 -1l-1 -1v-4a2 2 0 0 0 -2 -2",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var _Qe=Tn("outline","database-export","IconDatabaseExport",[["path",{d:"M4 6c0 1.657 3.582 3 8 3s8 -1.343 8 -3s-3.582 -3 -8 -3s-8 1.343 -8 3",key:"svg-0"}],["path",{d:"M4 6v6c0 1.657 3.582 3 8 3c1.118 0 2.183 -.086 3.15 -.241",key:"svg-1"}],["path",{d:"M20 12v-6",key:"svg-2"}],["path",{d:"M4 12v6c0 1.657 3.582 3 8 3c.157 0 .312 -.002 .466 -.005",key:"svg-3"}],["path",{d:"M16 19h6",key:"svg-4"}],["path",{d:"M19 16l3 3l-3 3",key:"svg-5"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var wQe=Tn("outline","dots-vertical","IconDotsVertical",[["path",{d:"M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-0"}],["path",{d:"M12 19m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-1"}],["path",{d:"M12 5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var EQe=Tn("outline","dots","IconDots",[["path",{d:"M5 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-0"}],["path",{d:"M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-1"}],["path",{d:"M19 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var xQe=Tn("outline","external-link","IconExternalLink",[["path",{d:"M12 6h-6a2 2 0 0 0 -2 2v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-6",key:"svg-0"}],["path",{d:"M11 13l9 -9",key:"svg-1"}],["path",{d:"M15 4h5v5",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var SQe=Tn("outline","file-lambda","IconFileLambda",[["path",{d:"M14 3v4a1 1 0 0 0 1 1h4",key:"svg-0"}],["path",{d:"M17 21h-10a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2z",key:"svg-1"}],["path",{d:"M10 17l2 -3",key:"svg-2"}],["path",{d:"M15 17c-2.5 0 -2.5 -6 -5 -6",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var TQe=Tn("outline","html","IconHtml",[["path",{d:"M13 16v-8l2 5l2 -5v8",key:"svg-0"}],["path",{d:"M1 16v-8",key:"svg-1"}],["path",{d:"M5 8v8",key:"svg-2"}],["path",{d:"M1 12h4",key:"svg-3"}],["path",{d:"M7 8h4",key:"svg-4"}],["path",{d:"M9 8v8",key:"svg-5"}],["path",{d:"M20 8v8h3",key:"svg-6"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Mwe=Tn("outline","info-circle","IconInfoCircle",[["path",{d:"M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0",key:"svg-0"}],["path",{d:"M12 9h.01",key:"svg-1"}],["path",{d:"M11 12h1v4h1",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var CQe=Tn("outline","layout-columns","IconLayoutColumns",[["path",{d:"M4 4m0 2a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v12a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2z",key:"svg-0"}],["path",{d:"M12 4l0 16",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var AQe=Tn("outline","mail","IconMail",[["path",{d:"M3 7a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v10a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2v-10z",key:"svg-0"}],["path",{d:"M3 7l9 6l9 -6",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var IQe=Tn("outline","number-123","IconNumber123",[["path",{d:"M3 10l2 -2v8",key:"svg-0"}],["path",{d:"M9 8h3a1 1 0 0 1 1 1v2a1 1 0 0 1 -1 1h-2a1 1 0 0 0 -1 1v2a1 1 0 0 0 1 1h3",key:"svg-1"}],["path",{d:"M17 8h2.5a1.5 1.5 0 0 1 1.5 1.5v1a1.5 1.5 0 0 1 -1.5 1.5h-1.5h1.5a1.5 1.5 0 0 1 1.5 1.5v1a1.5 1.5 0 0 1 -1.5 1.5h-2.5",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var kQe=Tn("outline","pencil","IconPencil",[["path",{d:"M4 20h4l10.5 -10.5a2.828 2.828 0 1 0 -4 -4l-10.5 10.5v4",key:"svg-0"}],["path",{d:"M13.5 6.5l4 4",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var RQe=Tn("outline","player-play","IconPlayerPlay",[["path",{d:"M7 4v16l13 -8z",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Lwe=Tn("outline","progress","IconProgress",[["path",{d:"M10 20.777a8.942 8.942 0 0 1 -2.48 -.969",key:"svg-0"}],["path",{d:"M14 3.223a9.003 9.003 0 0 1 0 17.554",key:"svg-1"}],["path",{d:"M4.579 17.093a8.961 8.961 0 0 1 -1.227 -2.592",key:"svg-2"}],["path",{d:"M3.124 10.5c.16 -.95 .468 -1.85 .9 -2.675l.169 -.305",key:"svg-3"}],["path",{d:"M6.907 4.579a8.954 8.954 0 0 1 3.093 -1.356",key:"svg-4"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var NQe=Tn("outline","radio","IconRadio",[["path",{d:"M14 3l-9.371 3.749a1 1 0 0 0 -.629 .928v11.323a1 1 0 0 0 1 1h14a1 1 0 0 0 1 -1v-11a1 1 0 0 0 -1 -1h-14.5",key:"svg-0"}],["path",{d:"M4 12h16",key:"svg-1"}],["path",{d:"M7 12v-2",key:"svg-2"}],["path",{d:"M17 16v.01",key:"svg-3"}],["path",{d:"M13 16v.01",key:"svg-4"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var PQe=Tn("outline","refresh","IconRefresh",[["path",{d:"M20 11a8.1 8.1 0 0 0 -15.5 -2m-.5 -4v4h4",key:"svg-0"}],["path",{d:"M4 13a8.1 8.1 0 0 0 15.5 2m.5 4v-4h-4",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var DQe=Tn("outline","schema","IconSchema",[["path",{d:"M5 2h5v4h-5z",key:"svg-0"}],["path",{d:"M15 10h5v4h-5z",key:"svg-1"}],["path",{d:"M5 18h5v4h-5z",key:"svg-2"}],["path",{d:"M5 10h5v4h-5z",key:"svg-3"}],["path",{d:"M10 12h5",key:"svg-4"}],["path",{d:"M7.5 6v4",key:"svg-5"}],["path",{d:"M7.5 14v4",key:"svg-6"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var OQe=Tn("outline","search","IconSearch",[["path",{d:"M10 10m-7 0a7 7 0 1 0 14 0a7 7 0 1 0 -14 0",key:"svg-0"}],["path",{d:"M21 21l-6 -6",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var $Qe=Tn("outline","select","IconSelect",[["path",{d:"M3 3m0 2a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v14a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2z",key:"svg-0"}],["path",{d:"M9 11l3 3l3 -3",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Fwe=Tn("outline","settings","IconSettings",[["path",{d:"M10.325 4.317c.426 -1.756 2.924 -1.756 3.35 0a1.724 1.724 0 0 0 2.573 1.066c1.543 -.94 3.31 .826 2.37 2.37a1.724 1.724 0 0 0 1.065 2.572c1.756 .426 1.756 2.924 0 3.35a1.724 1.724 0 0 0 -1.066 2.573c.94 1.543 -.826 3.31 -2.37 2.37a1.724 1.724 0 0 0 -2.572 1.065c-.426 1.756 -2.924 1.756 -3.35 0a1.724 1.724 0 0 0 -2.573 -1.066c-1.543 .94 -3.31 -.826 -2.37 -2.37a1.724 1.724 0 0 0 -1.065 -2.572c-1.756 -.426 -1.756 -2.924 0 -3.35a1.724 1.724 0 0 0 1.066 -2.573c-.94 -1.543 .826 -3.31 2.37 -2.37c1 .608 2.296 .07 2.572 -1.065z",key:"svg-0"}],["path",{d:"M9 12a3 3 0 1 0 6 0a3 3 0 0 0 -6 0",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var MQe=Tn("outline","squares","IconSquares",[["path",{d:"M8 10a2 2 0 0 1 2 -2h9a2 2 0 0 1 2 2v9a2 2 0 0 1 -2 2h-9a2 2 0 0 1 -2 -2z",key:"svg-0"}],["path",{d:"M16 8v-3a2 2 0 0 0 -2 -2h-9a2 2 0 0 0 -2 2v9a2 2 0 0 0 2 2h3",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var jwe=Tn("outline","table-export","IconTableExport",[["path",{d:"M12.5 21h-7.5a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v7.5",key:"svg-0"}],["path",{d:"M3 10h18",key:"svg-1"}],["path",{d:"M10 3v18",key:"svg-2"}],["path",{d:"M16 19h6",key:"svg-3"}],["path",{d:"M19 16l3 3l-3 3",key:"svg-4"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var LQe=Tn("outline","table","IconTable",[["path",{d:"M3 5a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v14a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2v-14z",key:"svg-0"}],["path",{d:"M3 10h18",key:"svg-1"}],["path",{d:"M10 3v18",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Bwe=Tn("outline","trash-x","IconTrashX",[["path",{d:"M4 7h16",key:"svg-0"}],["path",{d:"M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12",key:"svg-1"}],["path",{d:"M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3",key:"svg-2"}],["path",{d:"M10 12l4 4m0 -4l-4 4",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var DY=Tn("outline","user-plus","IconUserPlus",[["path",{d:"M8 7a4 4 0 1 0 8 0a4 4 0 0 0 -8 0",key:"svg-0"}],["path",{d:"M16 19h6",key:"svg-1"}],["path",{d:"M19 16v6",key:"svg-2"}],["path",{d:"M6 21v-2a4 4 0 0 1 4 -4h4",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var OY=Tn("outline","x","IconX",[["path",{d:"M18 6l-12 12",key:"svg-0"}],["path",{d:"M6 6l12 12",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var FQe=Tn("filled","brand-google-filled","IconBrandGoogleFilled",[["path",{d:"M12 2a9.96 9.96 0 0 1 6.29 2.226a1 1 0 0 1 .04 1.52l-1.51 1.362a1 1 0 0 1 -1.265 .06a6 6 0 1 0 2.103 6.836l.001 -.004h-3.66a1 1 0 0 1 -.992 -.883l-.007 -.117v-2a1 1 0 0 1 1 -1h6.945a1 1 0 0 1 .994 .89c.04 .367 .061 .737 .061 1.11c0 5.523 -4.477 10 -10 10s-10 -4.477 -10 -10s4.477 -10 10 -10z",key:"svg-0"}]]);function Uwe(e){const t=e.split("/")||[];return t[t.length-1].replace(/\.[^\.]+$/,"").replace(".","_").replace(" ","_").replace("/","_")}const Hu="/study/";function vae(e){const t=[],n=String(e||"");let r=n.indexOf(","),i=0,s=!1;for(;!s;){r===-1&&(r=n.length,s=!0);const o=n.slice(i,r).trim();(o||!s)&&t.push(o),i=r+1,r=n.indexOf(",",i)}return t}function zwe(e,t){const n={};return(e[e.length-1]===""?[...e,""]:e).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}const jQe=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,BQe=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,UQe={};function bae(e,t){return(UQe.jsx?BQe:jQe).test(e)}const zQe=/[ \t\n\f\r]/g;function VQe(e){return typeof e=="object"?e.type==="text"?_ae(e.value):!1:_ae(e)}function _ae(e){return e.replace(zQe,"")===""}let vk=class{constructor(t,n,r){this.property=t,this.normal=n,r&&(this.space=r)}};vk.prototype.property={};vk.prototype.normal={};vk.prototype.space=null;function Vwe(e,t){const n={},r={};let i=-1;for(;++i<e.length;)Object.assign(n,e[i].property),Object.assign(r,e[i].normal);return new vk(n,r,t)}function $A(e){return e.toLowerCase()}let Yc=class{constructor(t,n){this.property=t,this.attribute=n}};Yc.prototype.space=null;Yc.prototype.boolean=!1;Yc.prototype.booleanish=!1;Yc.prototype.overloadedBoolean=!1;Yc.prototype.number=!1;Yc.prototype.commaSeparated=!1;Yc.prototype.spaceSeparated=!1;Yc.prototype.commaOrSpaceSeparated=!1;Yc.prototype.mustUseProperty=!1;Yc.prototype.defined=!1;let HQe=0;const yn=Vb(),bs=Vb(),Hwe=Vb(),nt=Vb(),ei=Vb(),Qw=Vb(),hl=Vb();function Vb(){return 2**++HQe}const f7=Object.freeze(Object.defineProperty({__proto__:null,boolean:yn,booleanish:bs,commaOrSpaceSeparated:hl,commaSeparated:Qw,number:nt,overloadedBoolean:Hwe,spaceSeparated:ei},Symbol.toStringTag,{value:"Module"})),Gj=Object.keys(f7);class $Y extends Yc{constructor(t,n,r,i){let s=-1;if(super(t,n),wae(this,"space",i),typeof r=="number")for(;++s<Gj.length;){const o=Gj[s];wae(this,Gj[s],(r&f7[o])===f7[o])}}}$Y.prototype.defined=!0;function wae(e,t,n){n&&(e[t]=n)}const qQe={}.hasOwnProperty;function lS(e){const t={},n={};let r;for(r in e.properties)if(qQe.call(e.properties,r)){const i=e.properties[r],s=new $Y(r,e.transform(e.attributes||{},r),i,e.space);e.mustUseProperty&&e.mustUseProperty.includes(r)&&(s.mustUseProperty=!0),t[r]=s,n[$A(r)]=r,n[$A(s.attribute)]=r}return new vk(t,n,e.space)}const qwe=lS({space:"xlink",transform(e,t){return"xlink:"+t.slice(5).toLowerCase()},properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null}}),Wwe=lS({space:"xml",transform(e,t){return"xml:"+t.slice(3).toLowerCase()},properties:{xmlLang:null,xmlBase:null,xmlSpace:null}});function Gwe(e,t){return t in e?e[t]:t}function Ywe(e,t){return Gwe(e,t.toLowerCase())}const Kwe=lS({space:"xmlns",attributes:{xmlnsxlink:"xmlns:xlink"},transform:Ywe,properties:{xmlns:null,xmlnsXLink:null}}),Xwe=lS({transform(e,t){return t==="role"?t:"aria-"+t.slice(4).toLowerCase()},properties:{ariaActiveDescendant:null,ariaAtomic:bs,ariaAutoComplete:null,ariaBusy:bs,ariaChecked:bs,ariaColCount:nt,ariaColIndex:nt,ariaColSpan:nt,ariaControls:ei,ariaCurrent:null,ariaDescribedBy:ei,ariaDetails:null,ariaDisabled:bs,ariaDropEffect:ei,ariaErrorMessage:null,ariaExpanded:bs,ariaFlowTo:ei,ariaGrabbed:bs,ariaHasPopup:null,ariaHidden:bs,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:ei,ariaLevel:nt,ariaLive:null,ariaModal:bs,ariaMultiLine:bs,ariaMultiSelectable:bs,ariaOrientation:null,ariaOwns:ei,ariaPlaceholder:null,ariaPosInSet:nt,ariaPressed:bs,ariaReadOnly:bs,ariaRelevant:null,ariaRequired:bs,ariaRoleDescription:ei,ariaRowCount:nt,ariaRowIndex:nt,ariaRowSpan:nt,ariaSelected:bs,ariaSetSize:nt,ariaSort:null,ariaValueMax:nt,ariaValueMin:nt,ariaValueNow:nt,ariaValueText:null,role:null}}),WQe=lS({space:"html",attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},transform:Ywe,mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:Qw,acceptCharset:ei,accessKey:ei,action:null,allow:null,allowFullScreen:yn,allowPaymentRequest:yn,allowUserMedia:yn,alt:null,as:null,async:yn,autoCapitalize:null,autoComplete:ei,autoFocus:yn,autoPlay:yn,blocking:ei,capture:null,charSet:null,checked:yn,cite:null,className:ei,cols:nt,colSpan:null,content:null,contentEditable:bs,controls:yn,controlsList:ei,coords:nt|Qw,crossOrigin:null,data:null,dateTime:null,decoding:null,default:yn,defer:yn,dir:null,dirName:null,disabled:yn,download:Hwe,draggable:bs,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:yn,formTarget:null,headers:ei,height:nt,hidden:yn,high:nt,href:null,hrefLang:null,htmlFor:ei,httpEquiv:ei,id:null,imageSizes:null,imageSrcSet:null,inert:yn,inputMode:null,integrity:null,is:null,isMap:yn,itemId:null,itemProp:ei,itemRef:ei,itemScope:yn,itemType:ei,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:yn,low:nt,manifest:null,max:null,maxLength:nt,media:null,method:null,min:null,minLength:nt,multiple:yn,muted:yn,name:null,nonce:null,noModule:yn,noValidate:yn,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:yn,optimum:nt,pattern:null,ping:ei,placeholder:null,playsInline:yn,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:yn,referrerPolicy:null,rel:ei,required:yn,reversed:yn,rows:nt,rowSpan:nt,sandbox:ei,scope:null,scoped:yn,seamless:yn,selected:yn,shadowRootClonable:yn,shadowRootDelegatesFocus:yn,shadowRootMode:null,shape:null,size:nt,sizes:null,slot:null,span:nt,spellCheck:bs,src:null,srcDoc:null,srcLang:null,srcSet:null,start:nt,step:null,style:null,tabIndex:nt,target:null,title:null,translate:null,type:null,typeMustMatch:yn,useMap:null,value:bs,width:nt,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:ei,axis:null,background:null,bgColor:null,border:nt,borderColor:null,bottomMargin:nt,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:yn,declare:yn,event:null,face:null,frame:null,frameBorder:null,hSpace:nt,leftMargin:nt,link:null,longDesc:null,lowSrc:null,marginHeight:nt,marginWidth:nt,noResize:yn,noHref:yn,noShade:yn,noWrap:yn,object:null,profile:null,prompt:null,rev:null,rightMargin:nt,rules:null,scheme:null,scrolling:bs,standby:null,summary:null,text:null,topMargin:nt,valueType:null,version:null,vAlign:null,vLink:null,vSpace:nt,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:yn,disableRemotePlayback:yn,prefix:null,property:null,results:nt,security:null,unselectable:null}}),GQe=lS({space:"svg",attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},transform:Gwe,properties:{about:hl,accentHeight:nt,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:nt,amplitude:nt,arabicForm:null,ascent:nt,attributeName:null,attributeType:null,azimuth:nt,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:nt,by:null,calcMode:null,capHeight:nt,className:ei,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:nt,diffuseConstant:nt,direction:null,display:null,dur:null,divisor:nt,dominantBaseline:null,download:yn,dx:null,dy:null,edgeMode:null,editable:null,elevation:nt,enableBackground:null,end:null,event:null,exponent:nt,externalResourcesRequired:null,fill:null,fillOpacity:nt,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:Qw,g2:Qw,glyphName:Qw,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:nt,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:nt,horizOriginX:nt,horizOriginY:nt,id:null,ideographic:nt,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:nt,k:nt,k1:nt,k2:nt,k3:nt,k4:nt,kernelMatrix:hl,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:nt,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:nt,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:nt,overlineThickness:nt,paintOrder:null,panose1:null,path:null,pathLength:nt,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:ei,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:nt,pointsAtY:nt,pointsAtZ:nt,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:hl,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:hl,rev:hl,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:hl,requiredFeatures:hl,requiredFonts:hl,requiredFormats:hl,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:nt,specularExponent:nt,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:nt,strikethroughThickness:nt,string:null,stroke:null,strokeDashArray:hl,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:nt,strokeOpacity:nt,strokeWidth:null,style:null,surfaceScale:nt,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:hl,tabIndex:nt,tableValues:null,target:null,targetX:nt,targetY:nt,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:hl,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:nt,underlineThickness:nt,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:nt,values:null,vAlphabetic:nt,vMathematical:nt,vectorEffect:null,vHanging:nt,vIdeographic:nt,version:null,vertAdvY:nt,vertOriginX:nt,vertOriginY:nt,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:nt,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null}}),YQe=/^data[-\w.:]+$/i,Eae=/-[a-z]/g,KQe=/[A-Z]/g;function a6(e,t){const n=$A(t);let r=t,i=Yc;if(n in e.normal)return e.property[e.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&YQe.test(t)){if(t.charAt(4)==="-"){const s=t.slice(5).replace(Eae,QQe);r="data"+s.charAt(0).toUpperCase()+s.slice(1)}else{const s=t.slice(4);if(!Eae.test(s)){let o=s.replace(KQe,XQe);o.charAt(0)!=="-"&&(o="-"+o),t="data"+o}}i=$Y}return new i(r,t)}function XQe(e){return"-"+e.toLowerCase()}function QQe(e){return e.charAt(1).toUpperCase()}const JQe={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},bk=Vwe([Wwe,qwe,Kwe,Xwe,WQe],"html"),$y=Vwe([Wwe,qwe,Kwe,Xwe,GQe],"svg");function xae(e){const t=String(e||"").trim();return t?t.split(/[ \t\n\r\f]+/g):[]}function Qwe(e){return e.join(" ").trim()}var Jwe={},Sae=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,ZQe=/\n/g,eJe=/^\s*/,tJe=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,nJe=/^:\s*/,rJe=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,iJe=/^[;\s]*/,sJe=/^\s+|\s+$/g,oJe=`
`,Tae="/",Cae="*",zv="",aJe="comment",uJe="declaration",lJe=function(e,t){if(typeof e!="string")throw new TypeError("First argument must be a string");if(!e)return[];t=t||{};var n=1,r=1;function i(p){var m=p.match(ZQe);m&&(n+=m.length);var g=p.lastIndexOf(oJe);r=~g?p.length-g:r+p.length}function s(){var p={line:n,column:r};return function(m){return m.position=new o(p),l(),m}}function o(p){this.start=p,this.end={line:n,column:r},this.source=t.source}o.prototype.content=e;function a(p){var m=new Error(t.source+":"+n+":"+r+": "+p);if(m.reason=p,m.filename=t.source,m.line=n,m.column=r,m.source=e,!t.silent)throw m}function u(p){var m=p.exec(e);if(m){var g=m[0];return i(g),e=e.slice(g.length),m}}function l(){u(eJe)}function c(p){var m;for(p=p||[];m=f();)m!==!1&&p.push(m);return p}function f(){var p=s();if(!(Tae!=e.charAt(0)||Cae!=e.charAt(1))){for(var m=2;zv!=e.charAt(m)&&(Cae!=e.charAt(m)||Tae!=e.charAt(m+1));)++m;if(m+=2,zv===e.charAt(m-1))return a("End of comment missing");var g=e.slice(2,m-2);return r+=2,i(g),e=e.slice(m),r+=2,p({type:aJe,comment:g})}}function d(){var p=s(),m=u(tJe);if(m){if(f(),!u(nJe))return a("property missing ':'");var g=u(rJe),y=p({type:uJe,property:Aae(m[0].replace(Sae,zv)),value:g?Aae(g[0].replace(Sae,zv)):zv});return u(iJe),y}}function h(){var p=[];c(p);for(var m;m=d();)m!==!1&&(p.push(m),c(p));return p}return l(),h()};function Aae(e){return e?e.replace(sJe,zv):zv}var cJe=to&&to.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Jwe,"__esModule",{value:!0});var fJe=cJe(lJe);function dJe(e,t){var n=null;if(!e||typeof e!="string")return n;var r=(0,fJe.default)(e),i=typeof t=="function";return r.forEach(function(s){if(s.type==="declaration"){var o=s.property,a=s.value;i?t(o,a,s):a&&(n=n||{},n[o]=a)}}),n}var Iae=Jwe.default=dJe;const hJe=Iae.default||Iae,u6=Zwe("end"),Kh=Zwe("start");function Zwe(e){return t;function t(n){const r=n&&n.position&&n.position[e]||{};if(typeof r.line=="number"&&r.line>0&&typeof r.column=="number"&&r.column>0)return{line:r.line,column:r.column,offset:typeof r.offset=="number"&&r.offset>-1?r.offset:void 0}}}function pJe(e){const t=Kh(e),n=u6(e);if(t&&n)return{start:t,end:n}}function vC(e){return!e||typeof e!="object"?"":"position"in e||"type"in e?kae(e.position):"start"in e||"end"in e?kae(e):"line"in e||"column"in e?d7(e):""}function d7(e){return Rae(e&&e.line)+":"+Rae(e&&e.column)}function kae(e){return d7(e&&e.start)+"-"+d7(e&&e.end)}function Rae(e){return e&&typeof e=="number"?e:1}class Ca extends Error{constructor(t,n,r){super(),typeof n=="string"&&(r=n,n=void 0);let i="",s={},o=!1;if(n&&("line"in n&&"column"in n?s={place:n}:"start"in n&&"end"in n?s={place:n}:"type"in n?s={ancestors:[n],place:n.position}:s={...n}),typeof t=="string"?i=t:!s.cause&&t&&(o=!0,i=t.message,s.cause=t),!s.ruleId&&!s.source&&typeof r=="string"){const u=r.indexOf(":");u===-1?s.ruleId=r:(s.source=r.slice(0,u),s.ruleId=r.slice(u+1))}if(!s.place&&s.ancestors&&s.ancestors){const u=s.ancestors[s.ancestors.length-1];u&&(s.place=u.position)}const a=s.place&&"start"in s.place?s.place.start:s.place;this.ancestors=s.ancestors||void 0,this.cause=s.cause||void 0,this.column=a?a.column:void 0,this.fatal=void 0,this.file,this.message=i,this.line=a?a.line:void 0,this.name=vC(s.place)||"1:1",this.place=s.place||void 0,this.reason=this.message,this.ruleId=s.ruleId||void 0,this.source=s.source||void 0,this.stack=o&&s.cause&&typeof s.cause.stack=="string"?s.cause.stack:"",this.actual,this.expected,this.note,this.url}}Ca.prototype.file="";Ca.prototype.name="";Ca.prototype.reason="";Ca.prototype.message="";Ca.prototype.stack="";Ca.prototype.column=void 0;Ca.prototype.line=void 0;Ca.prototype.ancestors=void 0;Ca.prototype.cause=void 0;Ca.prototype.fatal=void 0;Ca.prototype.place=void 0;Ca.prototype.ruleId=void 0;Ca.prototype.source=void 0;const MY={}.hasOwnProperty,mJe=new Map,gJe=/[A-Z]/g,yJe=/-([a-z])/g,vJe=new Set(["table","tbody","thead","tfoot","tr"]),bJe=new Set(["td","th"]),eEe="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function _Je(e,t){if(!t||t.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const n=t.filePath||void 0;let r;if(t.development){if(typeof t.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");r=IJe(n,t.jsxDEV)}else{if(typeof t.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof t.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");r=AJe(n,t.jsx,t.jsxs)}const i={Fragment:t.Fragment,ancestors:[],components:t.components||{},create:r,elementAttributeNameCase:t.elementAttributeNameCase||"react",evaluater:t.createEvaluater?t.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:t.ignoreInvalidStyle||!1,passKeys:t.passKeys!==!1,passNode:t.passNode||!1,schema:t.space==="svg"?$y:bk,stylePropertyNameCase:t.stylePropertyNameCase||"dom",tableCellAlignToStyle:t.tableCellAlignToStyle!==!1},s=tEe(i,e,void 0);return s&&typeof s!="string"?s:i.create(e,i.Fragment,{children:s||void 0},void 0)}function tEe(e,t,n){if(t.type==="element")return wJe(e,t,n);if(t.type==="mdxFlowExpression"||t.type==="mdxTextExpression")return EJe(e,t);if(t.type==="mdxJsxFlowElement"||t.type==="mdxJsxTextElement")return SJe(e,t,n);if(t.type==="mdxjsEsm")return xJe(e,t);if(t.type==="root")return TJe(e,t,n);if(t.type==="text")return CJe(e,t)}function wJe(e,t,n){const r=e.schema;let i=r;t.tagName.toLowerCase()==="svg"&&r.space==="html"&&(i=$y,e.schema=i),e.ancestors.push(t);const s=rEe(e,t.tagName,!1),o=kJe(e,t);let a=FY(e,t);return vJe.has(t.tagName)&&(a=a.filter(function(u){return typeof u=="string"?!VQe(u):!0})),nEe(e,o,s,t),LY(o,a),e.ancestors.pop(),e.schema=r,e.create(t,s,o,n)}function EJe(e,t){if(t.data&&t.data.estree&&e.evaluater){const r=t.data.estree.body[0];return r.type,e.evaluater.evaluateExpression(r.expression)}MA(e,t.position)}function xJe(e,t){if(t.data&&t.data.estree&&e.evaluater)return e.evaluater.evaluateProgram(t.data.estree);MA(e,t.position)}function SJe(e,t,n){const r=e.schema;let i=r;t.name==="svg"&&r.space==="html"&&(i=$y,e.schema=i),e.ancestors.push(t);const s=t.name===null?e.Fragment:rEe(e,t.name,!0),o=RJe(e,t),a=FY(e,t);return nEe(e,o,s,t),LY(o,a),e.ancestors.pop(),e.schema=r,e.create(t,s,o,n)}function TJe(e,t,n){const r={};return LY(r,FY(e,t)),e.create(t,e.Fragment,r,n)}function CJe(e,t){return t.value}function nEe(e,t,n,r){typeof n!="string"&&n!==e.Fragment&&e.passNode&&(t.node=r)}function LY(e,t){if(t.length>0){const n=t.length>1?t:t[0];n&&(e.children=n)}}function AJe(e,t,n){return r;function r(i,s,o,a){const l=Array.isArray(o.children)?n:t;return a?l(s,o,a):l(s,o)}}function IJe(e,t){return n;function n(r,i,s,o){const a=Array.isArray(s.children),u=Kh(r);return t(i,s,o,a,{columnNumber:u?u.column-1:void 0,fileName:e,lineNumber:u?u.line:void 0},void 0)}}function kJe(e,t){const n={};let r,i;for(i in t.properties)if(i!=="children"&&MY.call(t.properties,i)){const s=NJe(e,i,t.properties[i]);if(s){const[o,a]=s;e.tableCellAlignToStyle&&o==="align"&&typeof a=="string"&&bJe.has(t.tagName)?r=a:n[o]=a}}if(r){const s=n.style||(n.style={});s[e.stylePropertyNameCase==="css"?"text-align":"textAlign"]=r}return n}function RJe(e,t){const n={};for(const r of t.attributes)if(r.type==="mdxJsxExpressionAttribute")if(r.data&&r.data.estree&&e.evaluater){const s=r.data.estree.body[0];s.type;const o=s.expression;o.type;const a=o.properties[0];a.type,Object.assign(n,e.evaluater.evaluateExpression(a.argument))}else MA(e,t.position);else{const i=r.name;let s;if(r.value&&typeof r.value=="object")if(r.value.data&&r.value.data.estree&&e.evaluater){const a=r.value.data.estree.body[0];a.type,s=e.evaluater.evaluateExpression(a.expression)}else MA(e,t.position);else s=r.value===null?!0:r.value;n[i]=s}return n}function FY(e,t){const n=[];let r=-1;const i=e.passKeys?new Map:mJe;for(;++r<t.children.length;){const s=t.children[r];let o;if(e.passKeys){const u=s.type==="element"?s.tagName:s.type==="mdxJsxFlowElement"||s.type==="mdxJsxTextElement"?s.name:void 0;if(u){const l=i.get(u)||0;o=u+"-"+l,i.set(u,l+1)}}const a=tEe(e,s,o);a!==void 0&&n.push(a)}return n}function NJe(e,t,n){const r=a6(e.schema,t);if(!(n==null||typeof n=="number"&&Number.isNaN(n))){if(Array.isArray(n)&&(n=r.commaSeparated?zwe(n):Qwe(n)),r.property==="style"){let i=typeof n=="object"?n:PJe(e,String(n));return e.stylePropertyNameCase==="css"&&(i=DJe(i)),["style",i]}return[e.elementAttributeNameCase==="react"&&r.space?JQe[r.property]||r.property:r.attribute,n]}}function PJe(e,t){const n={};try{hJe(t,r)}catch(i){if(!e.ignoreInvalidStyle){const s=i,o=new Ca("Cannot parse `style` attribute",{ancestors:e.ancestors,cause:s,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw o.file=e.filePath||void 0,o.url=eEe+"#cannot-parse-style-attribute",o}}return n;function r(i,s){let o=i;o.slice(0,2)!=="--"&&(o.slice(0,4)==="-ms-"&&(o="ms-"+o.slice(4)),o=o.replace(yJe,$Je)),n[o]=s}}function rEe(e,t,n){let r;if(!n)r={type:"Literal",value:t};else if(t.includes(".")){const i=t.split(".");let s=-1,o;for(;++s<i.length;){const a=bae(i[s])?{type:"Identifier",name:i[s]}:{type:"Literal",value:i[s]};o=o?{type:"MemberExpression",object:o,property:a,computed:!!(s&&a.type==="Literal"),optional:!1}:a}r=o}else r=bae(t)&&!/^[a-z]/.test(t)?{type:"Identifier",name:t}:{type:"Literal",value:t};if(r.type==="Literal"){const i=r.value;return MY.call(e.components,i)?e.components[i]:i}if(e.evaluater)return e.evaluater.evaluateExpression(r);MA(e)}function MA(e,t){const n=new Ca("Cannot handle MDX estrees without `createEvaluater`",{ancestors:e.ancestors,place:t,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=e.filePath||void 0,n.url=eEe+"#cannot-handle-mdx-estrees-without-createevaluater",n}function DJe(e){const t={};let n;for(n in e)MY.call(e,n)&&(t[OJe(n)]=e[n]);return t}function OJe(e){let t=e.replace(gJe,MJe);return t.slice(0,3)==="ms-"&&(t="-"+t),t}function $Je(e,t){return t.toUpperCase()}function MJe(e){return"-"+e.toLowerCase()}const Yj={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},LJe={};function FJe(e,t){const n=LJe,r=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,i=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return iEe(e,r,i)}function iEe(e,t,n){if(jJe(e)){if("value"in e)return e.type==="html"&&!n?"":e.value;if(t&&"alt"in e&&e.alt)return e.alt;if("children"in e)return Nae(e.children,t,n)}return Array.isArray(e)?Nae(e,t,n):""}function Nae(e,t,n){const r=[];let i=-1;for(;++i<e.length;)r[i]=iEe(e[i],t,n);return r.join("")}function jJe(e){return!!(e&&typeof e=="object")}const Pae=document.createElement("i");function jY(e){const t="&"+e+";";Pae.innerHTML=t;const n=Pae.textContent;return n.charCodeAt(n.length-1)===59&&e!=="semi"||n===t?!1:n}function xm(e,t,n,r){const i=e.length;let s=0,o;if(t<0?t=-t>i?0:i+t:t=t>i?i:t,n=n>0?n:0,r.length<1e4)o=Array.from(r),o.unshift(t,n),e.splice(...o);else for(n&&e.splice(t,n);s<r.length;)o=r.slice(s,s+1e4),o.unshift(t,0),e.splice(...o),s+=1e4,t+=1e4}function gc(e,t){return e.length>0?(xm(e,e.length,0,t),e):t}const Dae={}.hasOwnProperty;function BJe(e){const t={};let n=-1;for(;++n<e.length;)UJe(t,e[n]);return t}function UJe(e,t){let n;for(n in t){const i=(Dae.call(e,n)?e[n]:void 0)||(e[n]={}),s=t[n];let o;if(s)for(o in s){Dae.call(i,o)||(i[o]=[]);const a=s[o];zJe(i[o],Array.isArray(a)?a:a?[a]:[])}}}function zJe(e,t){let n=-1;const r=[];for(;++n<t.length;)(t[n].add==="after"?e:r).push(t[n]);xm(e,0,0,r)}function sEe(e,t){const n=Number.parseInt(e,t);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"�":String.fromCodePoint(n)}function Jw(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const zd=My(/[A-Za-z]/),Cl=My(/[\dA-Za-z]/),VJe=My(/[#-'*+\--9=?A-Z^-~]/);function h7(e){return e!==null&&(e<32||e===127)}const p7=My(/\d/),HJe=My(/[\dA-Fa-f]/),qJe=My(/[!-/:-@[-`{-~]/);function en(e){return e!==null&&e<-2}function qu(e){return e!==null&&(e<0||e===32)}function br(e){return e===-2||e===-1||e===32}const WJe=My(new RegExp("\\p{P}|\\p{S}","u")),GJe=My(/\s/);function My(e){return t;function t(n){return n!==null&&n>-1&&e.test(String.fromCharCode(n))}}function cS(e){const t=[];let n=-1,r=0,i=0;for(;++n<e.length;){const s=e.charCodeAt(n);let o="";if(s===37&&Cl(e.charCodeAt(n+1))&&Cl(e.charCodeAt(n+2)))i=2;else if(s<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(s))||(o=String.fromCharCode(s));else if(s>55295&&s<57344){const a=e.charCodeAt(n+1);s<56320&&a>56319&&a<57344?(o=String.fromCharCode(s,a),i=1):o="�"}else o=String.fromCharCode(s);o&&(t.push(e.slice(r,n),encodeURIComponent(o)),r=n+i+1,o=""),i&&(n+=i,i=0)}return t.join("")+e.slice(r)}function ri(e,t,n,r){const i=r?r-1:Number.POSITIVE_INFINITY;let s=0;return o;function o(u){return br(u)?(e.enter(n),a(u)):t(u)}function a(u){return br(u)&&s++<i?(e.consume(u),a):(e.exit(n),t(u))}}const YJe={tokenize:KJe};function KJe(e){const t=e.attempt(this.parser.constructs.contentInitial,r,i);let n;return t;function r(a){if(a===null){e.consume(a);return}return e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),ri(e,t,"linePrefix")}function i(a){return e.enter("paragraph"),s(a)}function s(a){const u=e.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=u),n=u,o(a)}function o(a){if(a===null){e.exit("chunkText"),e.exit("paragraph"),e.consume(a);return}return en(a)?(e.consume(a),e.exit("chunkText"),s):(e.consume(a),o)}}const XJe={tokenize:QJe},Oae={tokenize:JJe};function QJe(e){const t=this,n=[];let r=0,i,s,o;return a;function a(_){if(r<n.length){const w=n[r];return t.containerState=w[1],e.attempt(w[0].continuation,u,l)(_)}return l(_)}function u(_){if(r++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,i&&v();const w=t.events.length;let E=w,S;for(;E--;)if(t.events[E][0]==="exit"&&t.events[E][1].type==="chunkFlow"){S=t.events[E][1].end;break}y(r);let T=w;for(;T<t.events.length;)t.events[T][1].end=Object.assign({},S),T++;return xm(t.events,E+1,0,t.events.slice(w)),t.events.length=T,l(_)}return a(_)}function l(_){if(r===n.length){if(!i)return d(_);if(i.currentConstruct&&i.currentConstruct.concrete)return p(_);t.interrupt=!!(i.currentConstruct&&!i._gfmTableDynamicInterruptHack)}return t.containerState={},e.check(Oae,c,f)(_)}function c(_){return i&&v(),y(r),d(_)}function f(_){return t.parser.lazy[t.now().line]=r!==n.length,o=t.now().offset,p(_)}function d(_){return t.containerState={},e.attempt(Oae,h,p)(_)}function h(_){return r++,n.push([t.currentConstruct,t.containerState]),d(_)}function p(_){if(_===null){i&&v(),y(0),e.consume(_);return}return i=i||t.parser.flow(t.now()),e.enter("chunkFlow",{contentType:"flow",previous:s,_tokenizer:i}),m(_)}function m(_){if(_===null){g(e.exit("chunkFlow"),!0),y(0),e.consume(_);return}return en(_)?(e.consume(_),g(e.exit("chunkFlow")),r=0,t.interrupt=void 0,a):(e.consume(_),m)}function g(_,w){const E=t.sliceStream(_);if(w&&E.push(null),_.previous=s,s&&(s.next=_),s=_,i.defineSkip(_.start),i.write(E),t.parser.lazy[_.start.line]){let S=i.events.length;for(;S--;)if(i.events[S][1].start.offset<o&&(!i.events[S][1].end||i.events[S][1].end.offset>o))return;const T=t.events.length;let C=T,A,k;for(;C--;)if(t.events[C][0]==="exit"&&t.events[C][1].type==="chunkFlow"){if(A){k=t.events[C][1].end;break}A=!0}for(y(r),S=T;S<t.events.length;)t.events[S][1].end=Object.assign({},k),S++;xm(t.events,C+1,0,t.events.slice(T)),t.events.length=S}}function y(_){let w=n.length;for(;w-- >_;){const E=n[w];t.containerState=E[1],E[0].exit.call(t,e)}n.length=_}function v(){i.write([null]),s=void 0,i=void 0,t.containerState._closeFlow=void 0}}function JJe(e,t,n){return ri(e,e.attempt(this.parser.constructs.document,t,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function $ae(e){if(e===null||qu(e)||GJe(e))return 1;if(WJe(e))return 2}function BY(e,t,n){const r=[];let i=-1;for(;++i<e.length;){const s=e[i].resolveAll;s&&!r.includes(s)&&(t=s(t,n),r.push(s))}return t}const m7={name:"attention",tokenize:eZe,resolveAll:ZJe};function ZJe(e,t){let n=-1,r,i,s,o,a,u,l,c;for(;++n<e.length;)if(e[n][0]==="enter"&&e[n][1].type==="attentionSequence"&&e[n][1]._close){for(r=n;r--;)if(e[r][0]==="exit"&&e[r][1].type==="attentionSequence"&&e[r][1]._open&&t.sliceSerialize(e[r][1]).charCodeAt(0)===t.sliceSerialize(e[n][1]).charCodeAt(0)){if((e[r][1]._close||e[n][1]._open)&&(e[n][1].end.offset-e[n][1].start.offset)%3&&!((e[r][1].end.offset-e[r][1].start.offset+e[n][1].end.offset-e[n][1].start.offset)%3))continue;u=e[r][1].end.offset-e[r][1].start.offset>1&&e[n][1].end.offset-e[n][1].start.offset>1?2:1;const f=Object.assign({},e[r][1].end),d=Object.assign({},e[n][1].start);Mae(f,-u),Mae(d,u),o={type:u>1?"strongSequence":"emphasisSequence",start:f,end:Object.assign({},e[r][1].end)},a={type:u>1?"strongSequence":"emphasisSequence",start:Object.assign({},e[n][1].start),end:d},s={type:u>1?"strongText":"emphasisText",start:Object.assign({},e[r][1].end),end:Object.assign({},e[n][1].start)},i={type:u>1?"strong":"emphasis",start:Object.assign({},o.start),end:Object.assign({},a.end)},e[r][1].end=Object.assign({},o.start),e[n][1].start=Object.assign({},a.end),l=[],e[r][1].end.offset-e[r][1].start.offset&&(l=gc(l,[["enter",e[r][1],t],["exit",e[r][1],t]])),l=gc(l,[["enter",i,t],["enter",o,t],["exit",o,t],["enter",s,t]]),l=gc(l,BY(t.parser.constructs.insideSpan.null,e.slice(r+1,n),t)),l=gc(l,[["exit",s,t],["enter",a,t],["exit",a,t],["exit",i,t]]),e[n][1].end.offset-e[n][1].start.offset?(c=2,l=gc(l,[["enter",e[n][1],t],["exit",e[n][1],t]])):c=0,xm(e,r-1,n-r+3,l),n=r+l.length-c-2;break}}for(n=-1;++n<e.length;)e[n][1].type==="attentionSequence"&&(e[n][1].type="data");return e}function eZe(e,t){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,i=$ae(r);let s;return o;function o(u){return s=u,e.enter("attentionSequence"),a(u)}function a(u){if(u===s)return e.consume(u),a;const l=e.exit("attentionSequence"),c=$ae(u),f=!c||c===2&&i||n.includes(u),d=!i||i===2&&c||n.includes(r);return l._open=!!(s===42?f:f&&(i||!d)),l._close=!!(s===42?d:d&&(c||!f)),t(u)}}function Mae(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}const tZe={name:"autolink",tokenize:nZe};function nZe(e,t,n){let r=0;return i;function i(h){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(h),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),s}function s(h){return zd(h)?(e.consume(h),o):h===64?n(h):l(h)}function o(h){return h===43||h===45||h===46||Cl(h)?(r=1,a(h)):l(h)}function a(h){return h===58?(e.consume(h),r=0,u):(h===43||h===45||h===46||Cl(h))&&r++<32?(e.consume(h),a):(r=0,l(h))}function u(h){return h===62?(e.exit("autolinkProtocol"),e.enter("autolinkMarker"),e.consume(h),e.exit("autolinkMarker"),e.exit("autolink"),t):h===null||h===32||h===60||h7(h)?n(h):(e.consume(h),u)}function l(h){return h===64?(e.consume(h),c):VJe(h)?(e.consume(h),l):n(h)}function c(h){return Cl(h)?f(h):n(h)}function f(h){return h===46?(e.consume(h),r=0,c):h===62?(e.exit("autolinkProtocol").type="autolinkEmail",e.enter("autolinkMarker"),e.consume(h),e.exit("autolinkMarker"),e.exit("autolink"),t):d(h)}function d(h){if((h===45||Cl(h))&&r++<63){const p=h===45?d:f;return e.consume(h),p}return n(h)}}const l6={tokenize:rZe,partial:!0};function rZe(e,t,n){return r;function r(s){return br(s)?ri(e,i,"linePrefix")(s):i(s)}function i(s){return s===null||en(s)?t(s):n(s)}}const oEe={name:"blockQuote",tokenize:iZe,continuation:{tokenize:sZe},exit:oZe};function iZe(e,t,n){const r=this;return i;function i(o){if(o===62){const a=r.containerState;return a.open||(e.enter("blockQuote",{_container:!0}),a.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(o),e.exit("blockQuoteMarker"),s}return n(o)}function s(o){return br(o)?(e.enter("blockQuotePrefixWhitespace"),e.consume(o),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(o))}}function sZe(e,t,n){const r=this;return i;function i(o){return br(o)?ri(e,s,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(o):s(o)}function s(o){return e.attempt(oEe,t,n)(o)}}function oZe(e){e.exit("blockQuote")}const aEe={name:"characterEscape",tokenize:aZe};function aZe(e,t,n){return r;function r(s){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(s),e.exit("escapeMarker"),i}function i(s){return qJe(s)?(e.enter("characterEscapeValue"),e.consume(s),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):n(s)}}const uEe={name:"characterReference",tokenize:uZe};function uZe(e,t,n){const r=this;let i=0,s,o;return a;function a(f){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(f),e.exit("characterReferenceMarker"),u}function u(f){return f===35?(e.enter("characterReferenceMarkerNumeric"),e.consume(f),e.exit("characterReferenceMarkerNumeric"),l):(e.enter("characterReferenceValue"),s=31,o=Cl,c(f))}function l(f){return f===88||f===120?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(f),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),s=6,o=HJe,c):(e.enter("characterReferenceValue"),s=7,o=p7,c(f))}function c(f){if(f===59&&i){const d=e.exit("characterReferenceValue");return o===Cl&&!jY(r.sliceSerialize(d))?n(f):(e.enter("characterReferenceMarker"),e.consume(f),e.exit("characterReferenceMarker"),e.exit("characterReference"),t)}return o(f)&&i++<s?(e.consume(f),c):n(f)}}const Lae={tokenize:cZe,partial:!0},Fae={name:"codeFenced",tokenize:lZe,concrete:!0};function lZe(e,t,n){const r=this,i={tokenize:E,partial:!0};let s=0,o=0,a;return u;function u(S){return l(S)}function l(S){const T=r.events[r.events.length-1];return s=T&&T[1].type==="linePrefix"?T[2].sliceSerialize(T[1],!0).length:0,a=S,e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),c(S)}function c(S){return S===a?(o++,e.consume(S),c):o<3?n(S):(e.exit("codeFencedFenceSequence"),br(S)?ri(e,f,"whitespace")(S):f(S))}function f(S){return S===null||en(S)?(e.exit("codeFencedFence"),r.interrupt?t(S):e.check(Lae,m,w)(S)):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),d(S))}function d(S){return S===null||en(S)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),f(S)):br(S)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),ri(e,h,"whitespace")(S)):S===96&&S===a?n(S):(e.consume(S),d)}function h(S){return S===null||en(S)?f(S):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),p(S))}function p(S){return S===null||en(S)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),f(S)):S===96&&S===a?n(S):(e.consume(S),p)}function m(S){return e.attempt(i,w,g)(S)}function g(S){return e.enter("lineEnding"),e.consume(S),e.exit("lineEnding"),y}function y(S){return s>0&&br(S)?ri(e,v,"linePrefix",s+1)(S):v(S)}function v(S){return S===null||en(S)?e.check(Lae,m,w)(S):(e.enter("codeFlowValue"),_(S))}function _(S){return S===null||en(S)?(e.exit("codeFlowValue"),v(S)):(e.consume(S),_)}function w(S){return e.exit("codeFenced"),t(S)}function E(S,T,C){let A=0;return k;function k(F){return S.enter("lineEnding"),S.consume(F),S.exit("lineEnding"),N}function N(F){return S.enter("codeFencedFence"),br(F)?ri(S,O,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(F):O(F)}function O(F){return F===a?(S.enter("codeFencedFenceSequence"),D(F)):C(F)}function D(F){return F===a?(A++,S.consume(F),D):A>=o?(S.exit("codeFencedFenceSequence"),br(F)?ri(S,$,"whitespace")(F):$(F)):C(F)}function $(F){return F===null||en(F)?(S.exit("codeFencedFence"),T(F)):C(F)}}}function cZe(e,t,n){const r=this;return i;function i(o){return o===null?n(o):(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),s)}function s(o){return r.parser.lazy[r.now().line]?n(o):t(o)}}const Kj={name:"codeIndented",tokenize:dZe},fZe={tokenize:hZe,partial:!0};function dZe(e,t,n){const r=this;return i;function i(l){return e.enter("codeIndented"),ri(e,s,"linePrefix",5)(l)}function s(l){const c=r.events[r.events.length-1];return c&&c[1].type==="linePrefix"&&c[2].sliceSerialize(c[1],!0).length>=4?o(l):n(l)}function o(l){return l===null?u(l):en(l)?e.attempt(fZe,o,u)(l):(e.enter("codeFlowValue"),a(l))}function a(l){return l===null||en(l)?(e.exit("codeFlowValue"),o(l)):(e.consume(l),a)}function u(l){return e.exit("codeIndented"),t(l)}}function hZe(e,t,n){const r=this;return i;function i(o){return r.parser.lazy[r.now().line]?n(o):en(o)?(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),i):ri(e,s,"linePrefix",5)(o)}function s(o){const a=r.events[r.events.length-1];return a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?t(o):en(o)?i(o):n(o)}}const pZe={name:"codeText",tokenize:yZe,resolve:mZe,previous:gZe};function mZe(e){let t=e.length-4,n=3,r,i;if((e[n][1].type==="lineEnding"||e[n][1].type==="space")&&(e[t][1].type==="lineEnding"||e[t][1].type==="space")){for(r=n;++r<t;)if(e[r][1].type==="codeTextData"){e[n][1].type="codeTextPadding",e[t][1].type="codeTextPadding",n+=2,t-=2;break}}for(r=n-1,t++;++r<=t;)i===void 0?r!==t&&e[r][1].type!=="lineEnding"&&(i=r):(r===t||e[r][1].type==="lineEnding")&&(e[i][1].type="codeTextData",r!==i+2&&(e[i][1].end=e[r-1][1].end,e.splice(i+2,r-i-2),t-=r-i-2,r=i+2),i=void 0);return e}function gZe(e){return e!==96||this.events[this.events.length-1][1].type==="characterEscape"}function yZe(e,t,n){let r=0,i,s;return o;function o(f){return e.enter("codeText"),e.enter("codeTextSequence"),a(f)}function a(f){return f===96?(e.consume(f),r++,a):(e.exit("codeTextSequence"),u(f))}function u(f){return f===null?n(f):f===32?(e.enter("space"),e.consume(f),e.exit("space"),u):f===96?(s=e.enter("codeTextSequence"),i=0,c(f)):en(f)?(e.enter("lineEnding"),e.consume(f),e.exit("lineEnding"),u):(e.enter("codeTextData"),l(f))}function l(f){return f===null||f===32||f===96||en(f)?(e.exit("codeTextData"),u(f)):(e.consume(f),l)}function c(f){return f===96?(e.consume(f),i++,c):i===r?(e.exit("codeTextSequence"),e.exit("codeText"),t(f)):(s.type="codeTextData",l(f))}}class vZe{constructor(t){this.left=t?[...t]:[],this.right=[]}get(t){if(t<0||t>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+t+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return t<this.left.length?this.left[t]:this.right[this.right.length-t+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(t,n){const r=n??Number.POSITIVE_INFINITY;return r<this.left.length?this.left.slice(t,r):t>this.left.length?this.right.slice(this.right.length-r+this.left.length,this.right.length-t+this.left.length).reverse():this.left.slice(t).concat(this.right.slice(this.right.length-r+this.left.length).reverse())}splice(t,n,r){const i=n||0;this.setCursor(Math.trunc(t));const s=this.right.splice(this.right.length-i,Number.POSITIVE_INFINITY);return r&&ST(this.left,r),s.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(t){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(t)}pushMany(t){this.setCursor(Number.POSITIVE_INFINITY),ST(this.left,t)}unshift(t){this.setCursor(0),this.right.push(t)}unshiftMany(t){this.setCursor(0),ST(this.right,t.reverse())}setCursor(t){if(!(t===this.left.length||t>this.left.length&&this.right.length===0||t<0&&this.left.length===0))if(t<this.left.length){const n=this.left.splice(t,Number.POSITIVE_INFINITY);ST(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-t,Number.POSITIVE_INFINITY);ST(this.left,n.reverse())}}}function ST(e,t){let n=0;if(t.length<1e4)e.push(...t);else for(;n<t.length;)e.push(...t.slice(n,n+1e4)),n+=1e4}function lEe(e){const t={};let n=-1,r,i,s,o,a,u,l;const c=new vZe(e);for(;++n<c.length;){for(;n in t;)n=t[n];if(r=c.get(n),n&&r[1].type==="chunkFlow"&&c.get(n-1)[1].type==="listItemPrefix"&&(u=r[1]._tokenizer.events,s=0,s<u.length&&u[s][1].type==="lineEndingBlank"&&(s+=2),s<u.length&&u[s][1].type==="content"))for(;++s<u.length&&u[s][1].type!=="content";)u[s][1].type==="chunkText"&&(u[s][1]._isInFirstContentOfListItem=!0,s++);if(r[0]==="enter")r[1].contentType&&(Object.assign(t,bZe(c,n)),n=t[n],l=!0);else if(r[1]._container){for(s=n,i=void 0;s--&&(o=c.get(s),o[1].type==="lineEnding"||o[1].type==="lineEndingBlank");)o[0]==="enter"&&(i&&(c.get(i)[1].type="lineEndingBlank"),o[1].type="lineEnding",i=s);i&&(r[1].end=Object.assign({},c.get(i)[1].start),a=c.slice(i,n),a.unshift(r),c.splice(i,n-i+1,a))}}return xm(e,0,Number.POSITIVE_INFINITY,c.slice(0)),!l}function bZe(e,t){const n=e.get(t)[1],r=e.get(t)[2];let i=t-1;const s=[],o=n._tokenizer||r.parser[n.contentType](n.start),a=o.events,u=[],l={};let c,f,d=-1,h=n,p=0,m=0;const g=[m];for(;h;){for(;e.get(++i)[1]!==h;);s.push(i),h._tokenizer||(c=r.sliceStream(h),h.next||c.push(null),f&&o.defineSkip(h.start),h._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=!0),o.write(c),h._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=void 0)),f=h,h=h.next}for(h=n;++d<a.length;)a[d][0]==="exit"&&a[d-1][0]==="enter"&&a[d][1].type===a[d-1][1].type&&a[d][1].start.line!==a[d][1].end.line&&(m=d+1,g.push(m),h._tokenizer=void 0,h.previous=void 0,h=h.next);for(o.events=[],h?(h._tokenizer=void 0,h.previous=void 0):g.pop(),d=g.length;d--;){const y=a.slice(g[d],g[d+1]),v=s.pop();u.push([v,v+y.length-1]),e.splice(v,2,y)}for(u.reverse(),d=-1;++d<u.length;)l[p+u[d][0]]=p+u[d][1],p+=u[d][1]-u[d][0]-1;return l}const _Ze={tokenize:xZe,resolve:EZe},wZe={tokenize:SZe,partial:!0};function EZe(e){return lEe(e),e}function xZe(e,t){let n;return r;function r(a){return e.enter("content"),n=e.enter("chunkContent",{contentType:"content"}),i(a)}function i(a){return a===null?s(a):en(a)?e.check(wZe,o,s)(a):(e.consume(a),i)}function s(a){return e.exit("chunkContent"),e.exit("content"),t(a)}function o(a){return e.consume(a),e.exit("chunkContent"),n.next=e.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,i}}function SZe(e,t,n){const r=this;return i;function i(o){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),ri(e,s,"linePrefix")}function s(o){if(o===null||en(o))return n(o);const a=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?t(o):e.interrupt(r.parser.constructs.flow,n,t)(o)}}function cEe(e,t,n,r,i,s,o,a,u){const l=u||Number.POSITIVE_INFINITY;let c=0;return f;function f(y){return y===60?(e.enter(r),e.enter(i),e.enter(s),e.consume(y),e.exit(s),d):y===null||y===32||y===41||h7(y)?n(y):(e.enter(r),e.enter(o),e.enter(a),e.enter("chunkString",{contentType:"string"}),m(y))}function d(y){return y===62?(e.enter(s),e.consume(y),e.exit(s),e.exit(i),e.exit(r),t):(e.enter(a),e.enter("chunkString",{contentType:"string"}),h(y))}function h(y){return y===62?(e.exit("chunkString"),e.exit(a),d(y)):y===null||y===60||en(y)?n(y):(e.consume(y),y===92?p:h)}function p(y){return y===60||y===62||y===92?(e.consume(y),h):h(y)}function m(y){return!c&&(y===null||y===41||qu(y))?(e.exit("chunkString"),e.exit(a),e.exit(o),e.exit(r),t(y)):c<l&&y===40?(e.consume(y),c++,m):y===41?(e.consume(y),c--,m):y===null||y===32||y===40||h7(y)?n(y):(e.consume(y),y===92?g:m)}function g(y){return y===40||y===41||y===92?(e.consume(y),m):m(y)}}function fEe(e,t,n,r,i,s){const o=this;let a=0,u;return l;function l(h){return e.enter(r),e.enter(i),e.consume(h),e.exit(i),e.enter(s),c}function c(h){return a>999||h===null||h===91||h===93&&!u||h===94&&!a&&"_hiddenFootnoteSupport"in o.parser.constructs?n(h):h===93?(e.exit(s),e.enter(i),e.consume(h),e.exit(i),e.exit(r),t):en(h)?(e.enter("lineEnding"),e.consume(h),e.exit("lineEnding"),c):(e.enter("chunkString",{contentType:"string"}),f(h))}function f(h){return h===null||h===91||h===93||en(h)||a++>999?(e.exit("chunkString"),c(h)):(e.consume(h),u||(u=!br(h)),h===92?d:f)}function d(h){return h===91||h===92||h===93?(e.consume(h),a++,f):f(h)}}function dEe(e,t,n,r,i,s){let o;return a;function a(d){return d===34||d===39||d===40?(e.enter(r),e.enter(i),e.consume(d),e.exit(i),o=d===40?41:d,u):n(d)}function u(d){return d===o?(e.enter(i),e.consume(d),e.exit(i),e.exit(r),t):(e.enter(s),l(d))}function l(d){return d===o?(e.exit(s),u(o)):d===null?n(d):en(d)?(e.enter("lineEnding"),e.consume(d),e.exit("lineEnding"),ri(e,l,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),c(d))}function c(d){return d===o||d===null||en(d)?(e.exit("chunkString"),l(d)):(e.consume(d),d===92?f:c)}function f(d){return d===o||d===92?(e.consume(d),c):c(d)}}function bC(e,t){let n;return r;function r(i){return en(i)?(e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),n=!0,r):br(i)?ri(e,r,n?"linePrefix":"lineSuffix")(i):t(i)}}const TZe={name:"definition",tokenize:AZe},CZe={tokenize:IZe,partial:!0};function AZe(e,t,n){const r=this;let i;return s;function s(h){return e.enter("definition"),o(h)}function o(h){return fEe.call(r,e,a,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(h)}function a(h){return i=Jw(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),h===58?(e.enter("definitionMarker"),e.consume(h),e.exit("definitionMarker"),u):n(h)}function u(h){return qu(h)?bC(e,l)(h):l(h)}function l(h){return cEe(e,c,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(h)}function c(h){return e.attempt(CZe,f,f)(h)}function f(h){return br(h)?ri(e,d,"whitespace")(h):d(h)}function d(h){return h===null||en(h)?(e.exit("definition"),r.parser.defined.push(i),t(h)):n(h)}}function IZe(e,t,n){return r;function r(a){return qu(a)?bC(e,i)(a):n(a)}function i(a){return dEe(e,s,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(a)}function s(a){return br(a)?ri(e,o,"whitespace")(a):o(a)}function o(a){return a===null||en(a)?t(a):n(a)}}const kZe={name:"hardBreakEscape",tokenize:RZe};function RZe(e,t,n){return r;function r(s){return e.enter("hardBreakEscape"),e.consume(s),i}function i(s){return en(s)?(e.exit("hardBreakEscape"),t(s)):n(s)}}const NZe={name:"headingAtx",tokenize:DZe,resolve:PZe};function PZe(e,t){let n=e.length-2,r=3,i,s;return e[r][1].type==="whitespace"&&(r+=2),n-2>r&&e[n][1].type==="whitespace"&&(n-=2),e[n][1].type==="atxHeadingSequence"&&(r===n-1||n-4>r&&e[n-2][1].type==="whitespace")&&(n-=r+1===n?2:4),n>r&&(i={type:"atxHeadingText",start:e[r][1].start,end:e[n][1].end},s={type:"chunkText",start:e[r][1].start,end:e[n][1].end,contentType:"text"},xm(e,r,n-r+1,[["enter",i,t],["enter",s,t],["exit",s,t],["exit",i,t]])),e}function DZe(e,t,n){let r=0;return i;function i(c){return e.enter("atxHeading"),s(c)}function s(c){return e.enter("atxHeadingSequence"),o(c)}function o(c){return c===35&&r++<6?(e.consume(c),o):c===null||qu(c)?(e.exit("atxHeadingSequence"),a(c)):n(c)}function a(c){return c===35?(e.enter("atxHeadingSequence"),u(c)):c===null||en(c)?(e.exit("atxHeading"),t(c)):br(c)?ri(e,a,"whitespace")(c):(e.enter("atxHeadingText"),l(c))}function u(c){return c===35?(e.consume(c),u):(e.exit("atxHeadingSequence"),a(c))}function l(c){return c===null||c===35||qu(c)?(e.exit("atxHeadingText"),a(c)):(e.consume(c),l)}}const OZe=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],jae=["pre","script","style","textarea"],$Ze={name:"htmlFlow",tokenize:jZe,resolveTo:FZe,concrete:!0},MZe={tokenize:UZe,partial:!0},LZe={tokenize:BZe,partial:!0};function FZe(e){let t=e.length;for(;t--&&!(e[t][0]==="enter"&&e[t][1].type==="htmlFlow"););return t>1&&e[t-2][1].type==="linePrefix"&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2)),e}function jZe(e,t,n){const r=this;let i,s,o,a,u;return l;function l(j){return c(j)}function c(j){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(j),f}function f(j){return j===33?(e.consume(j),d):j===47?(e.consume(j),s=!0,m):j===63?(e.consume(j),i=3,r.interrupt?t:P):zd(j)?(e.consume(j),o=String.fromCharCode(j),g):n(j)}function d(j){return j===45?(e.consume(j),i=2,h):j===91?(e.consume(j),i=5,a=0,p):zd(j)?(e.consume(j),i=4,r.interrupt?t:P):n(j)}function h(j){return j===45?(e.consume(j),r.interrupt?t:P):n(j)}function p(j){const q="CDATA[";return j===q.charCodeAt(a++)?(e.consume(j),a===q.length?r.interrupt?t:O:p):n(j)}function m(j){return zd(j)?(e.consume(j),o=String.fromCharCode(j),g):n(j)}function g(j){if(j===null||j===47||j===62||qu(j)){const q=j===47,G=o.toLowerCase();return!q&&!s&&jae.includes(G)?(i=1,r.interrupt?t(j):O(j)):OZe.includes(o.toLowerCase())?(i=6,q?(e.consume(j),y):r.interrupt?t(j):O(j)):(i=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(j):s?v(j):_(j))}return j===45||Cl(j)?(e.consume(j),o+=String.fromCharCode(j),g):n(j)}function y(j){return j===62?(e.consume(j),r.interrupt?t:O):n(j)}function v(j){return br(j)?(e.consume(j),v):k(j)}function _(j){return j===47?(e.consume(j),k):j===58||j===95||zd(j)?(e.consume(j),w):br(j)?(e.consume(j),_):k(j)}function w(j){return j===45||j===46||j===58||j===95||Cl(j)?(e.consume(j),w):E(j)}function E(j){return j===61?(e.consume(j),S):br(j)?(e.consume(j),E):_(j)}function S(j){return j===null||j===60||j===61||j===62||j===96?n(j):j===34||j===39?(e.consume(j),u=j,T):br(j)?(e.consume(j),S):C(j)}function T(j){return j===u?(e.consume(j),u=null,A):j===null||en(j)?n(j):(e.consume(j),T)}function C(j){return j===null||j===34||j===39||j===47||j===60||j===61||j===62||j===96||qu(j)?E(j):(e.consume(j),C)}function A(j){return j===47||j===62||br(j)?_(j):n(j)}function k(j){return j===62?(e.consume(j),N):n(j)}function N(j){return j===null||en(j)?O(j):br(j)?(e.consume(j),N):n(j)}function O(j){return j===45&&i===2?(e.consume(j),M):j===60&&i===1?(e.consume(j),B):j===62&&i===4?(e.consume(j),z):j===63&&i===3?(e.consume(j),P):j===93&&i===5?(e.consume(j),H):en(j)&&(i===6||i===7)?(e.exit("htmlFlowData"),e.check(MZe,W,D)(j)):j===null||en(j)?(e.exit("htmlFlowData"),D(j)):(e.consume(j),O)}function D(j){return e.check(LZe,$,W)(j)}function $(j){return e.enter("lineEnding"),e.consume(j),e.exit("lineEnding"),F}function F(j){return j===null||en(j)?D(j):(e.enter("htmlFlowData"),O(j))}function M(j){return j===45?(e.consume(j),P):O(j)}function B(j){return j===47?(e.consume(j),o="",U):O(j)}function U(j){if(j===62){const q=o.toLowerCase();return jae.includes(q)?(e.consume(j),z):O(j)}return zd(j)&&o.length<8?(e.consume(j),o+=String.fromCharCode(j),U):O(j)}function H(j){return j===93?(e.consume(j),P):O(j)}function P(j){return j===62?(e.consume(j),z):j===45&&i===2?(e.consume(j),P):O(j)}function z(j){return j===null||en(j)?(e.exit("htmlFlowData"),W(j)):(e.consume(j),z)}function W(j){return e.exit("htmlFlow"),t(j)}}function BZe(e,t,n){const r=this;return i;function i(o){return en(o)?(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),s):n(o)}function s(o){return r.parser.lazy[r.now().line]?n(o):t(o)}}function UZe(e,t,n){return r;function r(i){return e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),e.attempt(l6,t,n)}}const zZe={name:"htmlText",tokenize:VZe};function VZe(e,t,n){const r=this;let i,s,o;return a;function a(P){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(P),u}function u(P){return P===33?(e.consume(P),l):P===47?(e.consume(P),E):P===63?(e.consume(P),_):zd(P)?(e.consume(P),C):n(P)}function l(P){return P===45?(e.consume(P),c):P===91?(e.consume(P),s=0,p):zd(P)?(e.consume(P),v):n(P)}function c(P){return P===45?(e.consume(P),h):n(P)}function f(P){return P===null?n(P):P===45?(e.consume(P),d):en(P)?(o=f,B(P)):(e.consume(P),f)}function d(P){return P===45?(e.consume(P),h):f(P)}function h(P){return P===62?M(P):P===45?d(P):f(P)}function p(P){const z="CDATA[";return P===z.charCodeAt(s++)?(e.consume(P),s===z.length?m:p):n(P)}function m(P){return P===null?n(P):P===93?(e.consume(P),g):en(P)?(o=m,B(P)):(e.consume(P),m)}function g(P){return P===93?(e.consume(P),y):m(P)}function y(P){return P===62?M(P):P===93?(e.consume(P),y):m(P)}function v(P){return P===null||P===62?M(P):en(P)?(o=v,B(P)):(e.consume(P),v)}function _(P){return P===null?n(P):P===63?(e.consume(P),w):en(P)?(o=_,B(P)):(e.consume(P),_)}function w(P){return P===62?M(P):_(P)}function E(P){return zd(P)?(e.consume(P),S):n(P)}function S(P){return P===45||Cl(P)?(e.consume(P),S):T(P)}function T(P){return en(P)?(o=T,B(P)):br(P)?(e.consume(P),T):M(P)}function C(P){return P===45||Cl(P)?(e.consume(P),C):P===47||P===62||qu(P)?A(P):n(P)}function A(P){return P===47?(e.consume(P),M):P===58||P===95||zd(P)?(e.consume(P),k):en(P)?(o=A,B(P)):br(P)?(e.consume(P),A):M(P)}function k(P){return P===45||P===46||P===58||P===95||Cl(P)?(e.consume(P),k):N(P)}function N(P){return P===61?(e.consume(P),O):en(P)?(o=N,B(P)):br(P)?(e.consume(P),N):A(P)}function O(P){return P===null||P===60||P===61||P===62||P===96?n(P):P===34||P===39?(e.consume(P),i=P,D):en(P)?(o=O,B(P)):br(P)?(e.consume(P),O):(e.consume(P),$)}function D(P){return P===i?(e.consume(P),i=void 0,F):P===null?n(P):en(P)?(o=D,B(P)):(e.consume(P),D)}function $(P){return P===null||P===34||P===39||P===60||P===61||P===96?n(P):P===47||P===62||qu(P)?A(P):(e.consume(P),$)}function F(P){return P===47||P===62||qu(P)?A(P):n(P)}function M(P){return P===62?(e.consume(P),e.exit("htmlTextData"),e.exit("htmlText"),t):n(P)}function B(P){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(P),e.exit("lineEnding"),U}function U(P){return br(P)?ri(e,H,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(P):H(P)}function H(P){return e.enter("htmlTextData"),o(P)}}const UY={name:"labelEnd",tokenize:KZe,resolveTo:YZe,resolveAll:GZe},HZe={tokenize:XZe},qZe={tokenize:QZe},WZe={tokenize:JZe};function GZe(e){let t=-1;for(;++t<e.length;){const n=e[t][1];(n.type==="labelImage"||n.type==="labelLink"||n.type==="labelEnd")&&(e.splice(t+1,n.type==="labelImage"?4:2),n.type="data",t++)}return e}function YZe(e,t){let n=e.length,r=0,i,s,o,a;for(;n--;)if(i=e[n][1],s){if(i.type==="link"||i.type==="labelLink"&&i._inactive)break;e[n][0]==="enter"&&i.type==="labelLink"&&(i._inactive=!0)}else if(o){if(e[n][0]==="enter"&&(i.type==="labelImage"||i.type==="labelLink")&&!i._balanced&&(s=n,i.type!=="labelLink")){r=2;break}}else i.type==="labelEnd"&&(o=n);const u={type:e[s][1].type==="labelLink"?"link":"image",start:Object.assign({},e[s][1].start),end:Object.assign({},e[e.length-1][1].end)},l={type:"label",start:Object.assign({},e[s][1].start),end:Object.assign({},e[o][1].end)},c={type:"labelText",start:Object.assign({},e[s+r+2][1].end),end:Object.assign({},e[o-2][1].start)};return a=[["enter",u,t],["enter",l,t]],a=gc(a,e.slice(s+1,s+r+3)),a=gc(a,[["enter",c,t]]),a=gc(a,BY(t.parser.constructs.insideSpan.null,e.slice(s+r+4,o-3),t)),a=gc(a,[["exit",c,t],e[o-2],e[o-1],["exit",l,t]]),a=gc(a,e.slice(o+1)),a=gc(a,[["exit",u,t]]),xm(e,s,e.length,a),e}function KZe(e,t,n){const r=this;let i=r.events.length,s,o;for(;i--;)if((r.events[i][1].type==="labelImage"||r.events[i][1].type==="labelLink")&&!r.events[i][1]._balanced){s=r.events[i][1];break}return a;function a(d){return s?s._inactive?f(d):(o=r.parser.defined.includes(Jw(r.sliceSerialize({start:s.end,end:r.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(d),e.exit("labelMarker"),e.exit("labelEnd"),u):n(d)}function u(d){return d===40?e.attempt(HZe,c,o?c:f)(d):d===91?e.attempt(qZe,c,o?l:f)(d):o?c(d):f(d)}function l(d){return e.attempt(WZe,c,f)(d)}function c(d){return t(d)}function f(d){return s._balanced=!0,n(d)}}function XZe(e,t,n){return r;function r(f){return e.enter("resource"),e.enter("resourceMarker"),e.consume(f),e.exit("resourceMarker"),i}function i(f){return qu(f)?bC(e,s)(f):s(f)}function s(f){return f===41?c(f):cEe(e,o,a,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(f)}function o(f){return qu(f)?bC(e,u)(f):c(f)}function a(f){return n(f)}function u(f){return f===34||f===39||f===40?dEe(e,l,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(f):c(f)}function l(f){return qu(f)?bC(e,c)(f):c(f)}function c(f){return f===41?(e.enter("resourceMarker"),e.consume(f),e.exit("resourceMarker"),e.exit("resource"),t):n(f)}}function QZe(e,t,n){const r=this;return i;function i(a){return fEe.call(r,e,s,o,"reference","referenceMarker","referenceString")(a)}function s(a){return r.parser.defined.includes(Jw(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?t(a):n(a)}function o(a){return n(a)}}function JZe(e,t,n){return r;function r(s){return e.enter("reference"),e.enter("referenceMarker"),e.consume(s),e.exit("referenceMarker"),i}function i(s){return s===93?(e.enter("referenceMarker"),e.consume(s),e.exit("referenceMarker"),e.exit("reference"),t):n(s)}}const ZZe={name:"labelStartImage",tokenize:eet,resolveAll:UY.resolveAll};function eet(e,t,n){const r=this;return i;function i(a){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(a),e.exit("labelImageMarker"),s}function s(a){return a===91?(e.enter("labelMarker"),e.consume(a),e.exit("labelMarker"),e.exit("labelImage"),o):n(a)}function o(a){return a===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(a):t(a)}}const tet={name:"labelStartLink",tokenize:net,resolveAll:UY.resolveAll};function net(e,t,n){const r=this;return i;function i(o){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(o),e.exit("labelMarker"),e.exit("labelLink"),s}function s(o){return o===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(o):t(o)}}const Xj={name:"lineEnding",tokenize:ret};function ret(e,t){return n;function n(r){return e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),ri(e,t,"linePrefix")}}const hD={name:"thematicBreak",tokenize:iet};function iet(e,t,n){let r=0,i;return s;function s(l){return e.enter("thematicBreak"),o(l)}function o(l){return i=l,a(l)}function a(l){return l===i?(e.enter("thematicBreakSequence"),u(l)):r>=3&&(l===null||en(l))?(e.exit("thematicBreak"),t(l)):n(l)}function u(l){return l===i?(e.consume(l),r++,u):(e.exit("thematicBreakSequence"),br(l)?ri(e,a,"whitespace")(l):a(l))}}const vu={name:"list",tokenize:aet,continuation:{tokenize:uet},exit:fet},set={tokenize:det,partial:!0},oet={tokenize:cet,partial:!0};function aet(e,t,n){const r=this,i=r.events[r.events.length-1];let s=i&&i[1].type==="linePrefix"?i[2].sliceSerialize(i[1],!0).length:0,o=0;return a;function a(h){const p=r.containerState.type||(h===42||h===43||h===45?"listUnordered":"listOrdered");if(p==="listUnordered"?!r.containerState.marker||h===r.containerState.marker:p7(h)){if(r.containerState.type||(r.containerState.type=p,e.enter(p,{_container:!0})),p==="listUnordered")return e.enter("listItemPrefix"),h===42||h===45?e.check(hD,n,l)(h):l(h);if(!r.interrupt||h===49)return e.enter("listItemPrefix"),e.enter("listItemValue"),u(h)}return n(h)}function u(h){return p7(h)&&++o<10?(e.consume(h),u):(!r.interrupt||o<2)&&(r.containerState.marker?h===r.containerState.marker:h===41||h===46)?(e.exit("listItemValue"),l(h)):n(h)}function l(h){return e.enter("listItemMarker"),e.consume(h),e.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||h,e.check(l6,r.interrupt?n:c,e.attempt(set,d,f))}function c(h){return r.containerState.initialBlankLine=!0,s++,d(h)}function f(h){return br(h)?(e.enter("listItemPrefixWhitespace"),e.consume(h),e.exit("listItemPrefixWhitespace"),d):n(h)}function d(h){return r.containerState.size=s+r.sliceSerialize(e.exit("listItemPrefix"),!0).length,t(h)}}function uet(e,t,n){const r=this;return r.containerState._closeFlow=void 0,e.check(l6,i,s);function i(a){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,ri(e,t,"listItemIndent",r.containerState.size+1)(a)}function s(a){return r.containerState.furtherBlankLines||!br(a)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,o(a)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,e.attempt(oet,t,o)(a))}function o(a){return r.containerState._closeFlow=!0,r.interrupt=void 0,ri(e,e.attempt(vu,t,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(a)}}function cet(e,t,n){const r=this;return ri(e,i,"listItemIndent",r.containerState.size+1);function i(s){const o=r.events[r.events.length-1];return o&&o[1].type==="listItemIndent"&&o[2].sliceSerialize(o[1],!0).length===r.containerState.size?t(s):n(s)}}function fet(e){e.exit(this.containerState.type)}function det(e,t,n){const r=this;return ri(e,i,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function i(s){const o=r.events[r.events.length-1];return!br(s)&&o&&o[1].type==="listItemPrefixWhitespace"?t(s):n(s)}}const Bae={name:"setextUnderline",tokenize:pet,resolveTo:het};function het(e,t){let n=e.length,r,i,s;for(;n--;)if(e[n][0]==="enter"){if(e[n][1].type==="content"){r=n;break}e[n][1].type==="paragraph"&&(i=n)}else e[n][1].type==="content"&&e.splice(n,1),!s&&e[n][1].type==="definition"&&(s=n);const o={type:"setextHeading",start:Object.assign({},e[i][1].start),end:Object.assign({},e[e.length-1][1].end)};return e[i][1].type="setextHeadingText",s?(e.splice(i,0,["enter",o,t]),e.splice(s+1,0,["exit",e[r][1],t]),e[r][1].end=Object.assign({},e[s][1].end)):e[r][1]=o,e.push(["exit",o,t]),e}function pet(e,t,n){const r=this;let i;return s;function s(l){let c=r.events.length,f;for(;c--;)if(r.events[c][1].type!=="lineEnding"&&r.events[c][1].type!=="linePrefix"&&r.events[c][1].type!=="content"){f=r.events[c][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||f)?(e.enter("setextHeadingLine"),i=l,o(l)):n(l)}function o(l){return e.enter("setextHeadingLineSequence"),a(l)}function a(l){return l===i?(e.consume(l),a):(e.exit("setextHeadingLineSequence"),br(l)?ri(e,u,"lineSuffix")(l):u(l))}function u(l){return l===null||en(l)?(e.exit("setextHeadingLine"),t(l)):n(l)}}const met={tokenize:get};function get(e){const t=this,n=e.attempt(l6,r,e.attempt(this.parser.constructs.flowInitial,i,ri(e,e.attempt(this.parser.constructs.flow,i,e.attempt(_Ze,i)),"linePrefix")));return n;function r(s){if(s===null){e.consume(s);return}return e.enter("lineEndingBlank"),e.consume(s),e.exit("lineEndingBlank"),t.currentConstruct=void 0,n}function i(s){if(s===null){e.consume(s);return}return e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),t.currentConstruct=void 0,n}}const yet={resolveAll:pEe()},vet=hEe("string"),bet=hEe("text");function hEe(e){return{tokenize:t,resolveAll:pEe(e==="text"?_et:void 0)};function t(n){const r=this,i=this.parser.constructs[e],s=n.attempt(i,o,a);return o;function o(c){return l(c)?s(c):a(c)}function a(c){if(c===null){n.consume(c);return}return n.enter("data"),n.consume(c),u}function u(c){return l(c)?(n.exit("data"),s(c)):(n.consume(c),u)}function l(c){if(c===null)return!0;const f=i[c];let d=-1;if(f)for(;++d<f.length;){const h=f[d];if(!h.previous||h.previous.call(r,r.previous))return!0}return!1}}}function pEe(e){return t;function t(n,r){let i=-1,s;for(;++i<=n.length;)s===void 0?n[i]&&n[i][1].type==="data"&&(s=i,i++):(!n[i]||n[i][1].type!=="data")&&(i!==s+2&&(n[s][1].end=n[i-1][1].end,n.splice(s+2,i-s-2),i=s+2),s=void 0);return e?e(n,r):n}}function _et(e,t){let n=0;for(;++n<=e.length;)if((n===e.length||e[n][1].type==="lineEnding")&&e[n-1][1].type==="data"){const r=e[n-1][1],i=t.sliceStream(r);let s=i.length,o=-1,a=0,u;for(;s--;){const l=i[s];if(typeof l=="string"){for(o=l.length;l.charCodeAt(o-1)===32;)a++,o--;if(o)break;o=-1}else if(l===-2)u=!0,a++;else if(l!==-1){s++;break}}if(a){const l={type:n===e.length||u||a<2?"lineSuffix":"hardBreakTrailing",start:{line:r.end.line,column:r.end.column-a,offset:r.end.offset-a,_index:r.start._index+s,_bufferIndex:s?o:r.start._bufferIndex+o},end:Object.assign({},r.end)};r.end=Object.assign({},l.start),r.start.offset===r.end.offset?Object.assign(r,l):(e.splice(n,0,["enter",l,t],["exit",l,t]),n+=2)}n++}return e}function wet(e,t,n){let r=Object.assign(n?Object.assign({},n):{line:1,column:1,offset:0},{_index:0,_bufferIndex:-1});const i={},s=[];let o=[],a=[];const u={consume:v,enter:_,exit:w,attempt:T(E),check:T(S),interrupt:T(S,{interrupt:!0})},l={previous:null,code:null,containerState:{},events:[],parser:e,sliceStream:h,sliceSerialize:d,now:p,defineSkip:m,write:f};let c=t.tokenize.call(l,u);return t.resolveAll&&s.push(t),l;function f(N){return o=gc(o,N),g(),o[o.length-1]!==null?[]:(C(t,0),l.events=BY(s,l.events,l),l.events)}function d(N,O){return xet(h(N),O)}function h(N){return Eet(o,N)}function p(){const{line:N,column:O,offset:D,_index:$,_bufferIndex:F}=r;return{line:N,column:O,offset:D,_index:$,_bufferIndex:F}}function m(N){i[N.line]=N.column,k()}function g(){let N;for(;r._index<o.length;){const O=o[r._index];if(typeof O=="string")for(N=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===N&&r._bufferIndex<O.length;)y(O.charCodeAt(r._bufferIndex));else y(O)}}function y(N){c=c(N)}function v(N){en(N)?(r.line++,r.column=1,r.offset+=N===-3?2:1,k()):N!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===o[r._index].length&&(r._bufferIndex=-1,r._index++)),l.previous=N}function _(N,O){const D=O||{};return D.type=N,D.start=p(),l.events.push(["enter",D,l]),a.push(D),D}function w(N){const O=a.pop();return O.end=p(),l.events.push(["exit",O,l]),O}function E(N,O){C(N,O.from)}function S(N,O){O.restore()}function T(N,O){return D;function D($,F,M){let B,U,H,P;return Array.isArray($)?W($):"tokenize"in $?W([$]):z($);function z(ne){return ce;function ce(de){const he=de!==null&&ne[de],ve=de!==null&&ne.null,Ie=[...Array.isArray(he)?he:he?[he]:[],...Array.isArray(ve)?ve:ve?[ve]:[]];return W(Ie)(de)}}function W(ne){return B=ne,U=0,ne.length===0?M:j(ne[U])}function j(ne){return ce;function ce(de){return P=A(),H=ne,ne.partial||(l.currentConstruct=ne),ne.name&&l.parser.constructs.disable.null.includes(ne.name)?G():ne.tokenize.call(O?Object.assign(Object.create(l),O):l,u,q,G)(de)}}function q(ne){return N(H,P),F}function G(ne){return P.restore(),++U<B.length?j(B[U]):M}}}function C(N,O){N.resolveAll&&!s.includes(N)&&s.push(N),N.resolve&&xm(l.events,O,l.events.length-O,N.resolve(l.events.slice(O),l)),N.resolveTo&&(l.events=N.resolveTo(l.events,l))}function A(){const N=p(),O=l.previous,D=l.currentConstruct,$=l.events.length,F=Array.from(a);return{restore:M,from:$};function M(){r=N,l.previous=O,l.currentConstruct=D,l.events.length=$,a=F,k()}}function k(){r.line in i&&r.column<2&&(r.column=i[r.line],r.offset+=i[r.line]-1)}}function Eet(e,t){const n=t.start._index,r=t.start._bufferIndex,i=t.end._index,s=t.end._bufferIndex;let o;if(n===i)o=[e[n].slice(r,s)];else{if(o=e.slice(n,i),r>-1){const a=o[0];typeof a=="string"?o[0]=a.slice(r):o.shift()}s>0&&o.push(e[i].slice(0,s))}return o}function xet(e,t){let n=-1;const r=[];let i;for(;++n<e.length;){const s=e[n];let o;if(typeof s=="string")o=s;else switch(s){case-5:{o="\r";break}case-4:{o=`
`;break}case-3:{o=`\r
`;break}case-2:{o=t?" ":"	";break}case-1:{if(!t&&i)continue;o=" ";break}default:o=String.fromCharCode(s)}i=s===-2,r.push(o)}return r.join("")}const Tet={42:vu,43:vu,45:vu,48:vu,49:vu,50:vu,51:vu,52:vu,53:vu,54:vu,55:vu,56:vu,57:vu,62:oEe},Cet={91:TZe},Aet={[-2]:Kj,[-1]:Kj,32:Kj},Iet={35:NZe,42:hD,45:[Bae,hD],60:$Ze,61:Bae,95:hD,96:Fae,126:Fae},ket={38:uEe,92:aEe},Ret={[-5]:Xj,[-4]:Xj,[-3]:Xj,33:ZZe,38:uEe,42:m7,60:[tZe,zZe],91:tet,92:[kZe,aEe],93:UY,95:m7,96:pZe},Net={null:[m7,yet]},Pet={null:[42,95]},Det={null:[]},Oet=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:Pet,contentInitial:Cet,disable:Det,document:Tet,flow:Iet,flowInitial:Aet,insideSpan:Net,string:ket,text:Ret},Symbol.toStringTag,{value:"Module"}));function $et(e){const n=BJe([Oet,...(e||{}).extensions||[]]),r={defined:[],lazy:{},constructs:n,content:i(YJe),document:i(XJe),flow:i(met),string:i(vet),text:i(bet)};return r;function i(s){return o;function o(a){return wet(r,s,a)}}}function Met(e){for(;!lEe(e););return e}const Uae=/[\0\t\n\r]/g;function Let(){let e=1,t="",n=!0,r;return i;function i(s,o,a){const u=[];let l,c,f,d,h;for(s=t+(typeof s=="string"?s.toString():new TextDecoder(o||void 0).decode(s)),f=0,t="",n&&(s.charCodeAt(0)===65279&&f++,n=void 0);f<s.length;){if(Uae.lastIndex=f,l=Uae.exec(s),d=l&&l.index!==void 0?l.index:s.length,h=s.charCodeAt(d),!l){t=s.slice(f);break}if(h===10&&f===d&&r)u.push(-3),r=void 0;else switch(r&&(u.push(-5),r=void 0),f<d&&(u.push(s.slice(f,d)),e+=d-f),h){case 0:{u.push(65533),e++;break}case 9:{for(c=Math.ceil(e/4)*4,u.push(-2);e++<c;)u.push(-1);break}case 10:{u.push(-4),e=1;break}default:r=!0,e=1}f=d+1}return a&&(r&&u.push(-5),t&&u.push(t),u.push(null)),u}}const Fet=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function jet(e){return e.replace(Fet,Bet)}function Bet(e,t,n){if(t)return t;if(n.charCodeAt(0)===35){const i=n.charCodeAt(1),s=i===120||i===88;return sEe(n.slice(s?2:1),s?16:10)}return jY(n)||e}const mEe={}.hasOwnProperty;function Uet(e,t,n){return typeof t!="string"&&(n=t,t=void 0),zet(n)(Met($et(n).document().write(Let()(e,t,!0))))}function zet(e){const t={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:s(ze),autolinkProtocol:A,autolinkEmail:A,atxHeading:s(yt),blockQuote:s(ve),characterEscape:A,characterReference:A,codeFenced:s(Ie),codeFencedFenceInfo:o,codeFencedFenceMeta:o,codeIndented:s(Ie,o),codeText:s(be,o),codeTextData:A,data:A,codeFlowValue:A,definition:s(Ke),definitionDestinationString:o,definitionLabelString:o,definitionTitleString:o,emphasis:s(Ue),hardBreakEscape:s(it),hardBreakTrailing:s(it),htmlFlow:s(_e,o),htmlFlowData:A,htmlText:s(_e,o),htmlTextData:A,image:s(ke),label:o,link:s(ze),listItem:s(Ot),listItemValue:d,listOrdered:s(ct,f),listUnordered:s(ct),paragraph:s(We),reference:j,referenceString:o,resourceDestinationString:o,resourceTitleString:o,setextHeading:s(yt),strong:s(ge),thematicBreak:s(vt)},exit:{atxHeading:u(),atxHeadingSequence:E,autolink:u(),autolinkEmail:he,autolinkProtocol:de,blockQuote:u(),characterEscapeValue:k,characterReferenceMarkerHexadecimal:G,characterReferenceMarkerNumeric:G,characterReferenceValue:ne,characterReference:ce,codeFenced:u(g),codeFencedFence:m,codeFencedFenceInfo:h,codeFencedFenceMeta:p,codeFlowValue:k,codeIndented:u(y),codeText:u(F),codeTextData:k,data:k,definition:u(),definitionDestinationString:w,definitionLabelString:v,definitionTitleString:_,emphasis:u(),hardBreakEscape:u(O),hardBreakTrailing:u(O),htmlFlow:u(D),htmlFlowData:k,htmlText:u($),htmlTextData:k,image:u(B),label:H,labelText:U,lineEnding:N,link:u(M),listItem:u(),listOrdered:u(),listUnordered:u(),paragraph:u(),referenceString:q,resourceDestinationString:P,resourceTitleString:z,resource:W,setextHeading:u(C),setextHeadingLineSequence:T,setextHeadingText:S,strong:u(),thematicBreak:u()}};gEe(t,(e||{}).mdastExtensions||[]);const n={};return r;function r(me){let Ae={type:"root",children:[]};const He={stack:[Ae],tokenStack:[],config:t,enter:a,exit:l,buffer:o,resume:c,data:n},ut=[];let _t=-1;for(;++_t<me.length;)if(me[_t][1].type==="listOrdered"||me[_t][1].type==="listUnordered")if(me[_t][0]==="enter")ut.push(_t);else{const Ln=ut.pop();_t=i(me,Ln,_t)}for(_t=-1;++_t<me.length;){const Ln=t[me[_t][0]];mEe.call(Ln,me[_t][1].type)&&Ln[me[_t][1].type].call(Object.assign({sliceSerialize:me[_t][2].sliceSerialize},He),me[_t][1])}if(He.tokenStack.length>0){const Ln=He.tokenStack[He.tokenStack.length-1];(Ln[1]||zae).call(He,void 0,Ln[0])}for(Ae.position={start:vg(me.length>0?me[0][1].start:{line:1,column:1,offset:0}),end:vg(me.length>0?me[me.length-2][1].end:{line:1,column:1,offset:0})},_t=-1;++_t<t.transforms.length;)Ae=t.transforms[_t](Ae)||Ae;return Ae}function i(me,Ae,He){let ut=Ae-1,_t=-1,Ln=!1,Cr,Fn,cr,gn;for(;++ut<=He;){const An=me[ut];switch(An[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{An[0]==="enter"?_t++:_t--,gn=void 0;break}case"lineEndingBlank":{An[0]==="enter"&&(Cr&&!gn&&!_t&&!cr&&(cr=ut),gn=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:gn=void 0}if(!_t&&An[0]==="enter"&&An[1].type==="listItemPrefix"||_t===-1&&An[0]==="exit"&&(An[1].type==="listUnordered"||An[1].type==="listOrdered")){if(Cr){let nr=ut;for(Fn=void 0;nr--;){const rr=me[nr];if(rr[1].type==="lineEnding"||rr[1].type==="lineEndingBlank"){if(rr[0]==="exit")continue;Fn&&(me[Fn][1].type="lineEndingBlank",Ln=!0),rr[1].type="lineEnding",Fn=nr}else if(!(rr[1].type==="linePrefix"||rr[1].type==="blockQuotePrefix"||rr[1].type==="blockQuotePrefixWhitespace"||rr[1].type==="blockQuoteMarker"||rr[1].type==="listItemIndent"))break}cr&&(!Fn||cr<Fn)&&(Cr._spread=!0),Cr.end=Object.assign({},Fn?me[Fn][1].start:An[1].end),me.splice(Fn||ut,0,["exit",Cr,An[2]]),ut++,He++}if(An[1].type==="listItemPrefix"){const nr={type:"listItem",_spread:!1,start:Object.assign({},An[1].start),end:void 0};Cr=nr,me.splice(ut,0,["enter",nr,An[2]]),ut++,He++,cr=void 0,gn=!0}}}return me[Ae][1]._spread=Ln,He}function s(me,Ae){return He;function He(ut){a.call(this,me(ut),ut),Ae&&Ae.call(this,ut)}}function o(){this.stack.push({type:"fragment",children:[]})}function a(me,Ae,He){this.stack[this.stack.length-1].children.push(me),this.stack.push(me),this.tokenStack.push([Ae,He]),me.position={start:vg(Ae.start),end:void 0}}function u(me){return Ae;function Ae(He){me&&me.call(this,He),l.call(this,He)}}function l(me,Ae){const He=this.stack.pop(),ut=this.tokenStack.pop();if(ut)ut[0].type!==me.type&&(Ae?Ae.call(this,me,ut[0]):(ut[1]||zae).call(this,me,ut[0]));else throw new Error("Cannot close `"+me.type+"` ("+vC({start:me.start,end:me.end})+"): it’s not open");He.position.end=vg(me.end)}function c(){return FJe(this.stack.pop())}function f(){this.data.expectingFirstListItemValue=!0}function d(me){if(this.data.expectingFirstListItemValue){const Ae=this.stack[this.stack.length-2];Ae.start=Number.parseInt(this.sliceSerialize(me),10),this.data.expectingFirstListItemValue=void 0}}function h(){const me=this.resume(),Ae=this.stack[this.stack.length-1];Ae.lang=me}function p(){const me=this.resume(),Ae=this.stack[this.stack.length-1];Ae.meta=me}function m(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function g(){const me=this.resume(),Ae=this.stack[this.stack.length-1];Ae.value=me.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function y(){const me=this.resume(),Ae=this.stack[this.stack.length-1];Ae.value=me.replace(/(\r?\n|\r)$/g,"")}function v(me){const Ae=this.resume(),He=this.stack[this.stack.length-1];He.label=Ae,He.identifier=Jw(this.sliceSerialize(me)).toLowerCase()}function _(){const me=this.resume(),Ae=this.stack[this.stack.length-1];Ae.title=me}function w(){const me=this.resume(),Ae=this.stack[this.stack.length-1];Ae.url=me}function E(me){const Ae=this.stack[this.stack.length-1];if(!Ae.depth){const He=this.sliceSerialize(me).length;Ae.depth=He}}function S(){this.data.setextHeadingSlurpLineEnding=!0}function T(me){const Ae=this.stack[this.stack.length-1];Ae.depth=this.sliceSerialize(me).codePointAt(0)===61?1:2}function C(){this.data.setextHeadingSlurpLineEnding=void 0}function A(me){const He=this.stack[this.stack.length-1].children;let ut=He[He.length-1];(!ut||ut.type!=="text")&&(ut=ht(),ut.position={start:vg(me.start),end:void 0},He.push(ut)),this.stack.push(ut)}function k(me){const Ae=this.stack.pop();Ae.value+=this.sliceSerialize(me),Ae.position.end=vg(me.end)}function N(me){const Ae=this.stack[this.stack.length-1];if(this.data.atHardBreak){const He=Ae.children[Ae.children.length-1];He.position.end=vg(me.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&t.canContainEols.includes(Ae.type)&&(A.call(this,me),k.call(this,me))}function O(){this.data.atHardBreak=!0}function D(){const me=this.resume(),Ae=this.stack[this.stack.length-1];Ae.value=me}function $(){const me=this.resume(),Ae=this.stack[this.stack.length-1];Ae.value=me}function F(){const me=this.resume(),Ae=this.stack[this.stack.length-1];Ae.value=me}function M(){const me=this.stack[this.stack.length-1];if(this.data.inReference){const Ae=this.data.referenceType||"shortcut";me.type+="Reference",me.referenceType=Ae,delete me.url,delete me.title}else delete me.identifier,delete me.label;this.data.referenceType=void 0}function B(){const me=this.stack[this.stack.length-1];if(this.data.inReference){const Ae=this.data.referenceType||"shortcut";me.type+="Reference",me.referenceType=Ae,delete me.url,delete me.title}else delete me.identifier,delete me.label;this.data.referenceType=void 0}function U(me){const Ae=this.sliceSerialize(me),He=this.stack[this.stack.length-2];He.label=jet(Ae),He.identifier=Jw(Ae).toLowerCase()}function H(){const me=this.stack[this.stack.length-1],Ae=this.resume(),He=this.stack[this.stack.length-1];if(this.data.inReference=!0,He.type==="link"){const ut=me.children;He.children=ut}else He.alt=Ae}function P(){const me=this.resume(),Ae=this.stack[this.stack.length-1];Ae.url=me}function z(){const me=this.resume(),Ae=this.stack[this.stack.length-1];Ae.title=me}function W(){this.data.inReference=void 0}function j(){this.data.referenceType="collapsed"}function q(me){const Ae=this.resume(),He=this.stack[this.stack.length-1];He.label=Ae,He.identifier=Jw(this.sliceSerialize(me)).toLowerCase(),this.data.referenceType="full"}function G(me){this.data.characterReferenceType=me.type}function ne(me){const Ae=this.sliceSerialize(me),He=this.data.characterReferenceType;let ut;He?(ut=sEe(Ae,He==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):ut=jY(Ae);const _t=this.stack[this.stack.length-1];_t.value+=ut}function ce(me){const Ae=this.stack.pop();Ae.position.end=vg(me.end)}function de(me){k.call(this,me);const Ae=this.stack[this.stack.length-1];Ae.url=this.sliceSerialize(me)}function he(me){k.call(this,me);const Ae=this.stack[this.stack.length-1];Ae.url="mailto:"+this.sliceSerialize(me)}function ve(){return{type:"blockquote",children:[]}}function Ie(){return{type:"code",lang:null,meta:null,value:""}}function be(){return{type:"inlineCode",value:""}}function Ke(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function Ue(){return{type:"emphasis",children:[]}}function yt(){return{type:"heading",depth:0,children:[]}}function it(){return{type:"break"}}function _e(){return{type:"html",value:""}}function ke(){return{type:"image",title:null,url:"",alt:null}}function ze(){return{type:"link",title:null,url:"",children:[]}}function ct(me){return{type:"list",ordered:me.type==="listOrdered",start:null,spread:me._spread,children:[]}}function Ot(me){return{type:"listItem",spread:me._spread,checked:null,children:[]}}function We(){return{type:"paragraph",children:[]}}function ge(){return{type:"strong",children:[]}}function ht(){return{type:"text",value:""}}function vt(){return{type:"thematicBreak"}}}function vg(e){return{line:e.line,column:e.column,offset:e.offset}}function gEe(e,t){let n=-1;for(;++n<t.length;){const r=t[n];Array.isArray(r)?gEe(e,r):Vet(e,r)}}function Vet(e,t){let n;for(n in t)if(mEe.call(t,n))switch(n){case"canContainEols":{const r=t[n];r&&e[n].push(...r);break}case"transforms":{const r=t[n];r&&e[n].push(...r);break}case"enter":case"exit":{const r=t[n];r&&Object.assign(e[n],r);break}}}function zae(e,t){throw e?new Error("Cannot close `"+e.type+"` ("+vC({start:e.start,end:e.end})+"): a different token (`"+t.type+"`, "+vC({start:t.start,end:t.end})+") is open"):new Error("Cannot close document, a token (`"+t.type+"`, "+vC({start:t.start,end:t.end})+") is still open")}function Het(e){const t=this;t.parser=n;function n(r){return Uet(r,{...t.data("settings"),...e,extensions:t.data("micromarkExtensions")||[],mdastExtensions:t.data("fromMarkdownExtensions")||[]})}}function qet(e,t){const n={type:"element",tagName:"blockquote",properties:{},children:e.wrap(e.all(t),!0)};return e.patch(t,n),e.applyData(t,n)}function Wet(e,t){const n={type:"element",tagName:"br",properties:{},children:[]};return e.patch(t,n),[e.applyData(t,n),{type:"text",value:`
`}]}function Get(e,t){const n=t.value?t.value+`
`:"",r={};t.lang&&(r.className=["language-"+t.lang]);let i={type:"element",tagName:"code",properties:r,children:[{type:"text",value:n}]};return t.meta&&(i.data={meta:t.meta}),e.patch(t,i),i=e.applyData(t,i),i={type:"element",tagName:"pre",properties:{},children:[i]},e.patch(t,i),i}function Yet(e,t){const n={type:"element",tagName:"del",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function Ket(e,t){const n={type:"element",tagName:"em",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function Xet(e,t){const n=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",r=String(t.identifier).toUpperCase(),i=cS(r.toLowerCase()),s=e.footnoteOrder.indexOf(r);let o,a=e.footnoteCounts.get(r);a===void 0?(a=0,e.footnoteOrder.push(r),o=e.footnoteOrder.length):o=s+1,a+=1,e.footnoteCounts.set(r,a);const u={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+i,id:n+"fnref-"+i+(a>1?"-"+a:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(o)}]};e.patch(t,u);const l={type:"element",tagName:"sup",properties:{},children:[u]};return e.patch(t,l),e.applyData(t,l)}function Qet(e,t){const n={type:"element",tagName:"h"+t.depth,properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function Jet(e,t){if(e.options.allowDangerousHtml){const n={type:"raw",value:t.value};return e.patch(t,n),e.applyData(t,n)}}function yEe(e,t){const n=t.referenceType;let r="]";if(n==="collapsed"?r+="[]":n==="full"&&(r+="["+(t.label||t.identifier)+"]"),t.type==="imageReference")return[{type:"text",value:"!["+t.alt+r}];const i=e.all(t),s=i[0];s&&s.type==="text"?s.value="["+s.value:i.unshift({type:"text",value:"["});const o=i[i.length-1];return o&&o.type==="text"?o.value+=r:i.push({type:"text",value:r}),i}function Zet(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return yEe(e,t);const i={src:cS(r.url||""),alt:t.alt};r.title!==null&&r.title!==void 0&&(i.title=r.title);const s={type:"element",tagName:"img",properties:i,children:[]};return e.patch(t,s),e.applyData(t,s)}function ett(e,t){const n={src:cS(t.url)};t.alt!==null&&t.alt!==void 0&&(n.alt=t.alt),t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"img",properties:n,children:[]};return e.patch(t,r),e.applyData(t,r)}function ttt(e,t){const n={type:"text",value:t.value.replace(/\r?\n|\r/g," ")};e.patch(t,n);const r={type:"element",tagName:"code",properties:{},children:[n]};return e.patch(t,r),e.applyData(t,r)}function ntt(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return yEe(e,t);const i={href:cS(r.url||"")};r.title!==null&&r.title!==void 0&&(i.title=r.title);const s={type:"element",tagName:"a",properties:i,children:e.all(t)};return e.patch(t,s),e.applyData(t,s)}function rtt(e,t){const n={href:cS(t.url)};t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"a",properties:n,children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function itt(e,t,n){const r=e.all(t),i=n?stt(n):vEe(t),s={},o=[];if(typeof t.checked=="boolean"){const c=r[0];let f;c&&c.type==="element"&&c.tagName==="p"?f=c:(f={type:"element",tagName:"p",properties:{},children:[]},r.unshift(f)),f.children.length>0&&f.children.unshift({type:"text",value:" "}),f.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:t.checked,disabled:!0},children:[]}),s.className=["task-list-item"]}let a=-1;for(;++a<r.length;){const c=r[a];(i||a!==0||c.type!=="element"||c.tagName!=="p")&&o.push({type:"text",value:`
`}),c.type==="element"&&c.tagName==="p"&&!i?o.push(...c.children):o.push(c)}const u=r[r.length-1];u&&(i||u.type!=="element"||u.tagName!=="p")&&o.push({type:"text",value:`
`});const l={type:"element",tagName:"li",properties:s,children:o};return e.patch(t,l),e.applyData(t,l)}function stt(e){let t=!1;if(e.type==="list"){t=e.spread||!1;const n=e.children;let r=-1;for(;!t&&++r<n.length;)t=vEe(n[r])}return t}function vEe(e){const t=e.spread;return t??e.children.length>1}function ott(e,t){const n={},r=e.all(t);let i=-1;for(typeof t.start=="number"&&t.start!==1&&(n.start=t.start);++i<r.length;){const o=r[i];if(o.type==="element"&&o.tagName==="li"&&o.properties&&Array.isArray(o.properties.className)&&o.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const s={type:"element",tagName:t.ordered?"ol":"ul",properties:n,children:e.wrap(r,!0)};return e.patch(t,s),e.applyData(t,s)}function att(e,t){const n={type:"element",tagName:"p",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function utt(e,t){const n={type:"root",children:e.wrap(e.all(t))};return e.patch(t,n),e.applyData(t,n)}function ltt(e,t){const n={type:"element",tagName:"strong",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function ctt(e,t){const n=e.all(t),r=n.shift(),i=[];if(r){const o={type:"element",tagName:"thead",properties:{},children:e.wrap([r],!0)};e.patch(t.children[0],o),i.push(o)}if(n.length>0){const o={type:"element",tagName:"tbody",properties:{},children:e.wrap(n,!0)},a=Kh(t.children[1]),u=u6(t.children[t.children.length-1]);a&&u&&(o.position={start:a,end:u}),i.push(o)}const s={type:"element",tagName:"table",properties:{},children:e.wrap(i,!0)};return e.patch(t,s),e.applyData(t,s)}function ftt(e,t,n){const r=n?n.children:void 0,s=(r?r.indexOf(t):1)===0?"th":"td",o=n&&n.type==="table"?n.align:void 0,a=o?o.length:t.children.length;let u=-1;const l=[];for(;++u<a;){const f=t.children[u],d={},h=o?o[u]:void 0;h&&(d.align=h);let p={type:"element",tagName:s,properties:d,children:[]};f&&(p.children=e.all(f),e.patch(f,p),p=e.applyData(f,p)),l.push(p)}const c={type:"element",tagName:"tr",properties:{},children:e.wrap(l,!0)};return e.patch(t,c),e.applyData(t,c)}function dtt(e,t){const n={type:"element",tagName:"td",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}const Vae=9,Hae=32;function htt(e){const t=String(e),n=/\r?\n|\r/g;let r=n.exec(t),i=0;const s=[];for(;r;)s.push(qae(t.slice(i,r.index),i>0,!0),r[0]),i=r.index+r[0].length,r=n.exec(t);return s.push(qae(t.slice(i),i>0,!1)),s.join("")}function qae(e,t,n){let r=0,i=e.length;if(t){let s=e.codePointAt(r);for(;s===Vae||s===Hae;)r++,s=e.codePointAt(r)}if(n){let s=e.codePointAt(i-1);for(;s===Vae||s===Hae;)i--,s=e.codePointAt(i-1)}return i>r?e.slice(r,i):""}function ptt(e,t){const n={type:"text",value:htt(String(t.value))};return e.patch(t,n),e.applyData(t,n)}function mtt(e,t){const n={type:"element",tagName:"hr",properties:{},children:[]};return e.patch(t,n),e.applyData(t,n)}const gtt={blockquote:qet,break:Wet,code:Get,delete:Yet,emphasis:Ket,footnoteReference:Xet,heading:Qet,html:Jet,imageReference:Zet,image:ett,inlineCode:ttt,linkReference:ntt,link:rtt,listItem:itt,list:ott,paragraph:att,root:utt,strong:ltt,table:ctt,tableCell:dtt,tableRow:ftt,text:ptt,thematicBreak:mtt,toml:RN,yaml:RN,definition:RN,footnoteDefinition:RN};function RN(){}const bEe=-1,c6=0,e3=1,t3=2,zY=3,VY=4,HY=5,qY=6,_Ee=7,wEe=8,Wae=typeof self=="object"?self:globalThis,ytt=(e,t)=>{const n=(i,s)=>(e.set(s,i),i),r=i=>{if(e.has(i))return e.get(i);const[s,o]=t[i];switch(s){case c6:case bEe:return n(o,i);case e3:{const a=n([],i);for(const u of o)a.push(r(u));return a}case t3:{const a=n({},i);for(const[u,l]of o)a[r(u)]=r(l);return a}case zY:return n(new Date(o),i);case VY:{const{source:a,flags:u}=o;return n(new RegExp(a,u),i)}case HY:{const a=n(new Map,i);for(const[u,l]of o)a.set(r(u),r(l));return a}case qY:{const a=n(new Set,i);for(const u of o)a.add(r(u));return a}case _Ee:{const{name:a,message:u}=o;return n(new Wae[a](u),i)}case wEe:return n(BigInt(o),i);case"BigInt":return n(Object(BigInt(o)),i)}return n(new Wae[s](o),i)};return r},Gae=e=>ytt(new Map,e)(0),N_="",{toString:vtt}={},{keys:btt}=Object,TT=e=>{const t=typeof e;if(t!=="object"||!e)return[c6,t];const n=vtt.call(e).slice(8,-1);switch(n){case"Array":return[e3,N_];case"Object":return[t3,N_];case"Date":return[zY,N_];case"RegExp":return[VY,N_];case"Map":return[HY,N_];case"Set":return[qY,N_]}return n.includes("Array")?[e3,n]:n.includes("Error")?[_Ee,n]:[t3,n]},NN=([e,t])=>e===c6&&(t==="function"||t==="symbol"),_tt=(e,t,n,r)=>{const i=(o,a)=>{const u=r.push(o)-1;return n.set(a,u),u},s=o=>{if(n.has(o))return n.get(o);let[a,u]=TT(o);switch(a){case c6:{let c=o;switch(u){case"bigint":a=wEe,c=o.toString();break;case"function":case"symbol":if(e)throw new TypeError("unable to serialize "+u);c=null;break;case"undefined":return i([bEe],o)}return i([a,c],o)}case e3:{if(u)return i([u,[...o]],o);const c=[],f=i([a,c],o);for(const d of o)c.push(s(d));return f}case t3:{if(u)switch(u){case"BigInt":return i([u,o.toString()],o);case"Boolean":case"Number":case"String":return i([u,o.valueOf()],o)}if(t&&"toJSON"in o)return s(o.toJSON());const c=[],f=i([a,c],o);for(const d of btt(o))(e||!NN(TT(o[d])))&&c.push([s(d),s(o[d])]);return f}case zY:return i([a,o.toISOString()],o);case VY:{const{source:c,flags:f}=o;return i([a,{source:c,flags:f}],o)}case HY:{const c=[],f=i([a,c],o);for(const[d,h]of o)(e||!(NN(TT(d))||NN(TT(h))))&&c.push([s(d),s(h)]);return f}case qY:{const c=[],f=i([a,c],o);for(const d of o)(e||!NN(TT(d)))&&c.push(s(d));return f}}const{message:l}=o;return i([a,{name:u,message:l}],o)};return s},Yae=(e,{json:t,lossy:n}={})=>{const r=[];return _tt(!(t||n),!!t,new Map,r)(e),r},jE=typeof structuredClone=="function"?(e,t)=>t&&("json"in t||"lossy"in t)?Gae(Yae(e,t)):structuredClone(e):(e,t)=>Gae(Yae(e,t));function wtt(e,t){const n=[{type:"text",value:"↩"}];return t>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(t)}]}),n}function Ett(e,t){return"Back to reference "+(e+1)+(t>1?"-"+t:"")}function xtt(e){const t=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",n=e.options.footnoteBackContent||wtt,r=e.options.footnoteBackLabel||Ett,i=e.options.footnoteLabel||"Footnotes",s=e.options.footnoteLabelTagName||"h2",o=e.options.footnoteLabelProperties||{className:["sr-only"]},a=[];let u=-1;for(;++u<e.footnoteOrder.length;){const l=e.footnoteById.get(e.footnoteOrder[u]);if(!l)continue;const c=e.all(l),f=String(l.identifier).toUpperCase(),d=cS(f.toLowerCase());let h=0;const p=[],m=e.footnoteCounts.get(f);for(;m!==void 0&&++h<=m;){p.length>0&&p.push({type:"text",value:" "});let v=typeof n=="string"?n:n(u,h);typeof v=="string"&&(v={type:"text",value:v}),p.push({type:"element",tagName:"a",properties:{href:"#"+t+"fnref-"+d+(h>1?"-"+h:""),dataFootnoteBackref:"",ariaLabel:typeof r=="string"?r:r(u,h),className:["data-footnote-backref"]},children:Array.isArray(v)?v:[v]})}const g=c[c.length-1];if(g&&g.type==="element"&&g.tagName==="p"){const v=g.children[g.children.length-1];v&&v.type==="text"?v.value+=" ":g.children.push({type:"text",value:" "}),g.children.push(...p)}else c.push(...p);const y={type:"element",tagName:"li",properties:{id:t+"fn-"+d},children:e.wrap(c,!0)};e.patch(l,y),a.push(y)}if(a.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:s,properties:{...jE(o),id:"footnote-label"},children:[{type:"text",value:i}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:e.wrap(a,!0)},{type:"text",value:`
`}]}}const EEe=function(e){if(e==null)return Att;if(typeof e=="function")return f6(e);if(typeof e=="object")return Array.isArray(e)?Stt(e):Ttt(e);if(typeof e=="string")return Ctt(e);throw new Error("Expected function, string, or object as test")};function Stt(e){const t=[];let n=-1;for(;++n<e.length;)t[n]=EEe(e[n]);return f6(r);function r(...i){let s=-1;for(;++s<t.length;)if(t[s].apply(this,i))return!0;return!1}}function Ttt(e){const t=e;return f6(n);function n(r){const i=r;let s;for(s in e)if(i[s]!==t[s])return!1;return!0}}function Ctt(e){return f6(t);function t(n){return n&&n.type===e}}function f6(e){return t;function t(n,r,i){return!!(Itt(n)&&e.call(this,n,typeof r=="number"?r:void 0,i||void 0))}}function Att(){return!0}function Itt(e){return e!==null&&typeof e=="object"&&"type"in e}const xEe=[],ktt=!0,Kae=!1,Rtt="skip";function Ntt(e,t,n,r){let i;typeof t=="function"&&typeof n!="function"?(r=n,n=t):i=t;const s=EEe(i),o=r?-1:1;a(e,void 0,[])();function a(u,l,c){const f=u&&typeof u=="object"?u:{};if(typeof f.type=="string"){const h=typeof f.tagName=="string"?f.tagName:typeof f.name=="string"?f.name:void 0;Object.defineProperty(d,"name",{value:"node ("+(u.type+(h?"<"+h+">":""))+")"})}return d;function d(){let h=xEe,p,m,g;if((!t||s(u,l,c[c.length-1]||void 0))&&(h=Ptt(n(u,c)),h[0]===Kae))return h;if("children"in u&&u.children){const y=u;if(y.children&&h[0]!==Rtt)for(m=(r?y.children.length:-1)+o,g=c.concat(y);m>-1&&m<y.children.length;){const v=y.children[m];if(p=a(v,m,g)(),p[0]===Kae)return p;m=typeof p[1]=="number"?p[1]:m+o}}return h}}}function Ptt(e){return Array.isArray(e)?e:typeof e=="number"?[ktt,e]:e==null?xEe:[e]}function WY(e,t,n,r){let i,s,o;typeof t=="function"&&typeof n!="function"?(s=void 0,o=t,i=n):(s=t,o=n,i=r),Ntt(e,s,a,i);function a(u,l){const c=l[l.length-1],f=c?c.children.indexOf(u):void 0;return o(u,f,c)}}const g7={}.hasOwnProperty,Dtt={};function Ott(e,t){const n=t||Dtt,r=new Map,i=new Map,s=new Map,o={...gtt,...n.handlers},a={all:l,applyData:Mtt,definitionById:r,footnoteById:i,footnoteCounts:s,footnoteOrder:[],handlers:o,one:u,options:n,patch:$tt,wrap:Ftt};return WY(e,function(c){if(c.type==="definition"||c.type==="footnoteDefinition"){const f=c.type==="definition"?r:i,d=String(c.identifier).toUpperCase();f.has(d)||f.set(d,c)}}),a;function u(c,f){const d=c.type,h=a.handlers[d];if(g7.call(a.handlers,d)&&h)return h(a,c,f);if(a.options.passThrough&&a.options.passThrough.includes(d)){if("children"in c){const{children:m,...g}=c,y=jE(g);return y.children=a.all(c),y}return jE(c)}return(a.options.unknownHandler||Ltt)(a,c,f)}function l(c){const f=[];if("children"in c){const d=c.children;let h=-1;for(;++h<d.length;){const p=a.one(d[h],c);if(p){if(h&&d[h-1].type==="break"&&(!Array.isArray(p)&&p.type==="text"&&(p.value=Xae(p.value)),!Array.isArray(p)&&p.type==="element")){const m=p.children[0];m&&m.type==="text"&&(m.value=Xae(m.value))}Array.isArray(p)?f.push(...p):f.push(p)}}}return f}}function $tt(e,t){e.position&&(t.position=pJe(e))}function Mtt(e,t){let n=t;if(e&&e.data){const r=e.data.hName,i=e.data.hChildren,s=e.data.hProperties;if(typeof r=="string")if(n.type==="element")n.tagName=r;else{const o="children"in n?n.children:[n];n={type:"element",tagName:r,properties:{},children:o}}n.type==="element"&&s&&Object.assign(n.properties,jE(s)),"children"in n&&n.children&&i!==null&&i!==void 0&&(n.children=i)}return n}function Ltt(e,t){const n=t.data||{},r="value"in t&&!(g7.call(n,"hProperties")||g7.call(n,"hChildren"))?{type:"text",value:t.value}:{type:"element",tagName:"div",properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function Ftt(e,t){const n=[];let r=-1;for(t&&n.push({type:"text",value:`
`});++r<e.length;)r&&n.push({type:"text",value:`
`}),n.push(e[r]);return t&&e.length>0&&n.push({type:"text",value:`
`}),n}function Xae(e){let t=0,n=e.charCodeAt(t);for(;n===9||n===32;)t++,n=e.charCodeAt(t);return e.slice(t)}function Qae(e,t){const n=Ott(e,t),r=n.one(e,void 0),i=xtt(n),s=Array.isArray(r)?{type:"root",children:r}:r||{type:"root",children:[]};return i&&s.children.push({type:"text",value:`
`},i),s}function jtt(e,t){return e&&"run"in e?async function(n,r){const i=Qae(n,{file:r,...t});await e.run(i,r)}:function(n,r){return Qae(n,{file:r,...t||e})}}function Jae(e){if(e)throw e}var pD=Object.prototype.hasOwnProperty,SEe=Object.prototype.toString,Zae=Object.defineProperty,eue=Object.getOwnPropertyDescriptor,tue=function(t){return typeof Array.isArray=="function"?Array.isArray(t):SEe.call(t)==="[object Array]"},nue=function(t){if(!t||SEe.call(t)!=="[object Object]")return!1;var n=pD.call(t,"constructor"),r=t.constructor&&t.constructor.prototype&&pD.call(t.constructor.prototype,"isPrototypeOf");if(t.constructor&&!n&&!r)return!1;var i;for(i in t);return typeof i>"u"||pD.call(t,i)},rue=function(t,n){Zae&&n.name==="__proto__"?Zae(t,n.name,{enumerable:!0,configurable:!0,value:n.newValue,writable:!0}):t[n.name]=n.newValue},iue=function(t,n){if(n==="__proto__")if(pD.call(t,n)){if(eue)return eue(t,n).value}else return;return t[n]},Btt=function e(){var t,n,r,i,s,o,a=arguments[0],u=1,l=arguments.length,c=!1;for(typeof a=="boolean"&&(c=a,a=arguments[1]||{},u=2),(a==null||typeof a!="object"&&typeof a!="function")&&(a={});u<l;++u)if(t=arguments[u],t!=null)for(n in t)r=iue(a,n),i=iue(t,n),a!==i&&(c&&i&&(nue(i)||(s=tue(i)))?(s?(s=!1,o=r&&tue(r)?r:[]):o=r&&nue(r)?r:{},rue(a,{name:n,newValue:e(c,o,i)})):typeof i<"u"&&rue(a,{name:n,newValue:i}));return a};const Qj=Xl(Btt);function y7(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function Utt(){const e=[],t={run:n,use:r};return t;function n(...i){let s=-1;const o=i.pop();if(typeof o!="function")throw new TypeError("Expected function as last argument, not "+o);a(null,...i);function a(u,...l){const c=e[++s];let f=-1;if(u){o(u);return}for(;++f<i.length;)(l[f]===null||l[f]===void 0)&&(l[f]=i[f]);i=l,c?ztt(c,a)(...l):o(null,...l)}}function r(i){if(typeof i!="function")throw new TypeError("Expected `middelware` to be a function, not "+i);return e.push(i),t}}function ztt(e,t){let n;return r;function r(...o){const a=e.length>o.length;let u;a&&o.push(i);try{u=e.apply(this,o)}catch(l){const c=l;if(a&&n)throw c;return i(c)}a||(u&&u.then&&typeof u.then=="function"?u.then(s,i):u instanceof Error?i(u):s(u))}function i(o,...a){n||(n=!0,t(o,...a))}function s(o){i(null,o)}}const Pd={basename:Vtt,dirname:Htt,extname:qtt,join:Wtt,sep:"/"};function Vtt(e,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');_k(e);let n=0,r=-1,i=e.length,s;if(t===void 0||t.length===0||t.length>e.length){for(;i--;)if(e.codePointAt(i)===47){if(s){n=i+1;break}}else r<0&&(s=!0,r=i+1);return r<0?"":e.slice(n,r)}if(t===e)return"";let o=-1,a=t.length-1;for(;i--;)if(e.codePointAt(i)===47){if(s){n=i+1;break}}else o<0&&(s=!0,o=i+1),a>-1&&(e.codePointAt(i)===t.codePointAt(a--)?a<0&&(r=i):(a=-1,r=o));return n===r?r=o:r<0&&(r=e.length),e.slice(n,r)}function Htt(e){if(_k(e),e.length===0)return".";let t=-1,n=e.length,r;for(;--n;)if(e.codePointAt(n)===47){if(r){t=n;break}}else r||(r=!0);return t<0?e.codePointAt(0)===47?"/":".":t===1&&e.codePointAt(0)===47?"//":e.slice(0,t)}function qtt(e){_k(e);let t=e.length,n=-1,r=0,i=-1,s=0,o;for(;t--;){const a=e.codePointAt(t);if(a===47){if(o){r=t+1;break}continue}n<0&&(o=!0,n=t+1),a===46?i<0?i=t:s!==1&&(s=1):i>-1&&(s=-1)}return i<0||n<0||s===0||s===1&&i===n-1&&i===r+1?"":e.slice(i,n)}function Wtt(...e){let t=-1,n;for(;++t<e.length;)_k(e[t]),e[t]&&(n=n===void 0?e[t]:n+"/"+e[t]);return n===void 0?".":Gtt(n)}function Gtt(e){_k(e);const t=e.codePointAt(0)===47;let n=Ytt(e,!t);return n.length===0&&!t&&(n="."),n.length>0&&e.codePointAt(e.length-1)===47&&(n+="/"),t?"/"+n:n}function Ytt(e,t){let n="",r=0,i=-1,s=0,o=-1,a,u;for(;++o<=e.length;){if(o<e.length)a=e.codePointAt(o);else{if(a===47)break;a=47}if(a===47){if(!(i===o-1||s===1))if(i!==o-1&&s===2){if(n.length<2||r!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(u=n.lastIndexOf("/"),u!==n.length-1){u<0?(n="",r=0):(n=n.slice(0,u),r=n.length-1-n.lastIndexOf("/")),i=o,s=0;continue}}else if(n.length>0){n="",r=0,i=o,s=0;continue}}t&&(n=n.length>0?n+"/..":"..",r=2)}else n.length>0?n+="/"+e.slice(i+1,o):n=e.slice(i+1,o),r=o-i-1;i=o,s=0}else a===46&&s>-1?s++:s=-1}return n}function _k(e){if(typeof e!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}const Ktt={cwd:Xtt};function Xtt(){return"/"}function v7(e){return!!(e!==null&&typeof e=="object"&&"href"in e&&e.href&&"protocol"in e&&e.protocol&&e.auth===void 0)}function Qtt(e){if(typeof e=="string")e=new URL(e);else if(!v7(e)){const t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if(e.protocol!=="file:"){const t=new TypeError("The URL must be of scheme file");throw t.code="ERR_INVALID_URL_SCHEME",t}return Jtt(e)}function Jtt(e){if(e.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const t=e.pathname;let n=-1;for(;++n<t.length;)if(t.codePointAt(n)===37&&t.codePointAt(n+1)===50){const r=t.codePointAt(n+2);if(r===70||r===102){const i=new TypeError("File URL path must not include encoded / characters");throw i.code="ERR_INVALID_FILE_URL_PATH",i}}return decodeURIComponent(t)}const Jj=["history","path","basename","stem","extname","dirname"];class TEe{constructor(t){let n;t?v7(t)?n={path:t}:typeof t=="string"||Ztt(t)?n={value:t}:n=t:n={},this.cwd=Ktt.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let r=-1;for(;++r<Jj.length;){const s=Jj[r];s in n&&n[s]!==void 0&&n[s]!==null&&(this[s]=s==="history"?[...n[s]]:n[s])}let i;for(i in n)Jj.includes(i)||(this[i]=n[i])}get basename(){return typeof this.path=="string"?Pd.basename(this.path):void 0}set basename(t){e8(t,"basename"),Zj(t,"basename"),this.path=Pd.join(this.dirname||"",t)}get dirname(){return typeof this.path=="string"?Pd.dirname(this.path):void 0}set dirname(t){sue(this.basename,"dirname"),this.path=Pd.join(t||"",this.basename)}get extname(){return typeof this.path=="string"?Pd.extname(this.path):void 0}set extname(t){if(Zj(t,"extname"),sue(this.dirname,"extname"),t){if(t.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(t.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=Pd.join(this.dirname,this.stem+(t||""))}get path(){return this.history[this.history.length-1]}set path(t){v7(t)&&(t=Qtt(t)),e8(t,"path"),this.path!==t&&this.history.push(t)}get stem(){return typeof this.path=="string"?Pd.basename(this.path,this.extname):void 0}set stem(t){e8(t,"stem"),Zj(t,"stem"),this.path=Pd.join(this.dirname||"",t+(this.extname||""))}fail(t,n,r){const i=this.message(t,n,r);throw i.fatal=!0,i}info(t,n,r){const i=this.message(t,n,r);return i.fatal=void 0,i}message(t,n,r){const i=new Ca(t,n,r);return this.path&&(i.name=this.path+":"+i.name,i.file=this.path),i.fatal=!1,this.messages.push(i),i}toString(t){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(t||void 0).decode(this.value)}}function Zj(e,t){if(e&&e.includes(Pd.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+Pd.sep+"`")}function e8(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function sue(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}function Ztt(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const ent=function(e){const r=this.constructor.prototype,i=r[e],s=function(){return i.apply(s,arguments)};Object.setPrototypeOf(s,r);const o=Object.getOwnPropertyNames(i);for(const a of o){const u=Object.getOwnPropertyDescriptor(i,a);u&&Object.defineProperty(s,a,u)}return s},tnt={}.hasOwnProperty;class GY extends ent{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=Utt()}copy(){const t=new GY;let n=-1;for(;++n<this.attachers.length;){const r=this.attachers[n];t.use(...r)}return t.data(Qj(!0,{},this.namespace)),t}data(t,n){return typeof t=="string"?arguments.length===2?(r8("data",this.frozen),this.namespace[t]=n,this):tnt.call(this.namespace,t)&&this.namespace[t]||void 0:t?(r8("data",this.frozen),this.namespace=t,this):this.namespace}freeze(){if(this.frozen)return this;const t=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...r]=this.attachers[this.freezeIndex];if(r[0]===!1)continue;r[0]===!0&&(r[0]=void 0);const i=n.call(t,...r);typeof i=="function"&&this.transformers.use(i)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(t){this.freeze();const n=PN(t),r=this.parser||this.Parser;return t8("parse",r),r(String(n),n)}process(t,n){const r=this;return this.freeze(),t8("process",this.parser||this.Parser),n8("process",this.compiler||this.Compiler),n?i(void 0,n):new Promise(i);function i(s,o){const a=PN(t),u=r.parse(a);r.run(u,a,function(c,f,d){if(c||!f||!d)return l(c);const h=f,p=r.stringify(h,d);int(p)?d.value=p:d.result=p,l(c,d)});function l(c,f){c||!f?o(c):s?s(f):n(void 0,f)}}}processSync(t){let n=!1,r;return this.freeze(),t8("processSync",this.parser||this.Parser),n8("processSync",this.compiler||this.Compiler),this.process(t,i),aue("processSync","process",n),r;function i(s,o){n=!0,Jae(s),r=o}}run(t,n,r){oue(t),this.freeze();const i=this.transformers;return!r&&typeof n=="function"&&(r=n,n=void 0),r?s(void 0,r):new Promise(s);function s(o,a){const u=PN(n);i.run(t,u,l);function l(c,f,d){const h=f||t;c?a(c):o?o(h):r(void 0,h,d)}}}runSync(t,n){let r=!1,i;return this.run(t,n,s),aue("runSync","run",r),i;function s(o,a){Jae(o),i=a,r=!0}}stringify(t,n){this.freeze();const r=PN(n),i=this.compiler||this.Compiler;return n8("stringify",i),oue(t),i(t,r)}use(t,...n){const r=this.attachers,i=this.namespace;if(r8("use",this.frozen),t!=null)if(typeof t=="function")u(t,n);else if(typeof t=="object")Array.isArray(t)?a(t):o(t);else throw new TypeError("Expected usable value, not `"+t+"`");return this;function s(l){if(typeof l=="function")u(l,[]);else if(typeof l=="object")if(Array.isArray(l)){const[c,...f]=l;u(c,f)}else o(l);else throw new TypeError("Expected usable value, not `"+l+"`")}function o(l){if(!("plugins"in l)&&!("settings"in l))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");a(l.plugins),l.settings&&(i.settings=Qj(!0,i.settings,l.settings))}function a(l){let c=-1;if(l!=null)if(Array.isArray(l))for(;++c<l.length;){const f=l[c];s(f)}else throw new TypeError("Expected a list of plugins, not `"+l+"`")}function u(l,c){let f=-1,d=-1;for(;++f<r.length;)if(r[f][0]===l){d=f;break}if(d===-1)r.push([l,...c]);else if(c.length>0){let[h,...p]=c;const m=r[d][1];y7(m)&&y7(h)&&(h=Qj(!0,m,h)),r[d]=[l,h,...p]}}}}const nnt=new GY().freeze();function t8(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `parser`")}function n8(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `compiler`")}function r8(e,t){if(t)throw new Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function oue(e){if(!y7(e)||typeof e.type!="string")throw new TypeError("Expected node, got `"+e+"`")}function aue(e,t,n){if(!n)throw new Error("`"+e+"` finished async. Use `"+t+"` instead")}function PN(e){return rnt(e)?e:new TEe(e)}function rnt(e){return!!(e&&typeof e=="object"&&"message"in e&&"messages"in e)}function int(e){return typeof e=="string"||snt(e)}function snt(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const ont="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",uue=[],lue={allowDangerousHtml:!0},ant=/^(https?|ircs?|mailto|xmpp)$/i,unt=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function lnt(e){const t=e.allowedElements,n=e.allowElement,r=e.children||"",i=e.className,s=e.components,o=e.disallowedElements,a=e.rehypePlugins||uue,u=e.remarkPlugins||uue,l=e.remarkRehypeOptions?{...e.remarkRehypeOptions,...lue}:lue,c=e.skipHtml,f=e.unwrapDisallowed,d=e.urlTransform||cnt,h=nnt().use(Het).use(u).use(jtt,l).use(a),p=new TEe;typeof r=="string"&&(p.value=r);for(const v of unt)Object.hasOwn(e,v.from)&&(""+v.from+(v.to?"use `"+v.to+"` instead":"remove it")+ont+v.id,void 0);const m=h.parse(p);let g=h.runSync(m,p);return i&&(g={type:"element",tagName:"div",properties:{className:i},children:g.type==="root"?g.children:[g]}),WY(g,y),_Je(g,{Fragment:b.Fragment,components:s,ignoreInvalidStyle:!0,jsx:b.jsx,jsxs:b.jsxs,passKeys:!0,passNode:!0});function y(v,_,w){if(v.type==="raw"&&w&&typeof _=="number")return c?w.children.splice(_,1):w.children[_]={type:"text",value:v.value},_;if(v.type==="element"){let E;for(E in Yj)if(Object.hasOwn(Yj,E)&&Object.hasOwn(v.properties,E)){const S=v.properties[E],T=Yj[E];(T===null||T.includes(v.tagName))&&(v.properties[E]=d(String(S||""),E,v))}}if(v.type==="element"){let E=t?!t.includes(v.tagName):o?o.includes(v.tagName):!1;if(!E&&n&&typeof _=="number"&&(E=!n(v,_,w)),E&&w&&typeof _=="number")return f&&v.children?w.children.splice(_,1,...v.children):w.children.splice(_,1),_}}}function cnt(e){const t=e.indexOf(":"),n=e.indexOf("?"),r=e.indexOf("#"),i=e.indexOf("/");return t<0||i>-1&&t>i||n>-1&&t>n||r>-1&&t>r||ant.test(e.slice(0,t))?e:""}const cue=/[#.]/g;function fnt(e,t){const n=e||"",r={};let i=0,s,o;for(;i<n.length;){cue.lastIndex=i;const a=cue.exec(n),u=n.slice(i,a?a.index:n.length);u&&(s?s==="#"?r.id=u:Array.isArray(r.className)?r.className.push(u):r.className=[u]:o=u,i+=u.length),a&&(s=a[0],i++)}return{type:"element",tagName:o||t||"div",properties:r,children:[]}}const dnt=new Set(["button","menu","reset","submit"]),b7={}.hasOwnProperty;function CEe(e,t,n){const r=n&&gnt(n);function i(s,o,...a){let u=-1,l;if(s==null){l={type:"root",children:[]};const c=o;a.unshift(c)}else if(l=fnt(s,t),l.tagName=l.tagName.toLowerCase(),r&&b7.call(r,l.tagName)&&(l.tagName=r[l.tagName]),hnt(o,l.tagName)){let c;for(c in o)b7.call(o,c)&&pnt(e,l.properties,c,o[c])}else a.unshift(o);for(;++u<a.length;)_7(l.children,a[u]);return l.type==="element"&&l.tagName==="template"&&(l.content={type:"root",children:l.children},l.children=[]),l}return i}function hnt(e,t){return e==null||typeof e!="object"||Array.isArray(e)?!1:t==="input"||!e.type||typeof e.type!="string"?!0:"children"in e&&Array.isArray(e.children)?!1:t==="button"?dnt.has(e.type.toLowerCase()):!("value"in e)}function pnt(e,t,n,r){const i=a6(e,n);let s=-1,o;if(r!=null){if(typeof r=="number"){if(Number.isNaN(r))return;o=r}else typeof r=="boolean"?o=r:typeof r=="string"?i.spaceSeparated?o=xae(r):i.commaSeparated?o=vae(r):i.commaOrSpaceSeparated?o=xae(vae(r).join(" ")):o=fue(i,i.property,r):Array.isArray(r)?o=r.concat():o=i.property==="style"?mnt(r):String(r);if(Array.isArray(o)){const a=[];for(;++s<o.length;){const u=fue(i,i.property,o[s]);a[s]=u}o=a}if(i.property==="className"&&Array.isArray(t.className)){const a=o;o=t.className.concat(a)}t[i.property]=o}}function _7(e,t){let n=-1;if(t!=null)if(typeof t=="string"||typeof t=="number")e.push({type:"text",value:String(t)});else if(Array.isArray(t))for(;++n<t.length;)_7(e,t[n]);else if(typeof t=="object"&&"type"in t)t.type==="root"?_7(e,t.children):e.push(t);else throw new Error("Expected node, nodes, or string, got `"+t+"`")}function fue(e,t,n){if(typeof n=="string"){if(e.number&&n&&!Number.isNaN(Number(n)))return Number(n);if((e.boolean||e.overloadedBoolean)&&(n===""||$A(n)===$A(t)))return!0}return n}function mnt(e){const t=[];let n;for(n in e)b7.call(e,n)&&t.push([n,e[n]].join(": "));return t.join("; ")}function gnt(e){const t={};let n=-1;for(;++n<e.length;)t[e[n].toLowerCase()]=e[n];return t}const ynt=["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","solidColor","textArea","textPath"],vnt=CEe(bk,"div"),bnt=CEe($y,"g",ynt),i8=/\r?\n|\r/g;function _nt(e){const t=String(e),n=[];for(i8.lastIndex=0;i8.test(t);)n.push(i8.lastIndex);return n.push(t.length+1),{toPoint:r,toOffset:i};function r(s){let o=-1;if(typeof s=="number"&&s>-1&&s<n[n.length-1]){for(;++o<n.length;)if(n[o]>s)return{line:o+1,column:s-(o>0?n[o-1]:0)+1,offset:s}}}function i(s){const o=s&&s.line,a=s&&s.column;if(typeof o=="number"&&typeof a=="number"&&!Number.isNaN(o)&&!Number.isNaN(a)&&o-1 in n){const u=(n[o-2]||0)+a-1||0;if(u>-1&&u<n[n.length-1])return u}}}const o1={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},AEe={}.hasOwnProperty,wnt=Object.prototype;function Ent(e,t){const n=t||{};return YY({file:n.file||void 0,location:!1,schema:n.space==="svg"?$y:bk,verbose:n.verbose||!1},e)}function YY(e,t){let n;switch(t.nodeName){case"#comment":{const r=t;return n={type:"comment",value:r.data},mD(e,r,n),n}case"#document":case"#document-fragment":{const r=t,i="mode"in r?r.mode==="quirks"||r.mode==="limited-quirks":!1;if(n={type:"root",children:IEe(e,t.childNodes),data:{quirksMode:i}},e.file&&e.location){const s=String(e.file),o=_nt(s),a=o.toPoint(0),u=o.toPoint(s.length);n.position={start:a,end:u}}return n}case"#documentType":{const r=t;return n={type:"doctype"},mD(e,r,n),n}case"#text":{const r=t;return n={type:"text",value:r.value},mD(e,r,n),n}default:return n=xnt(e,t),n}}function IEe(e,t){let n=-1;const r=[];for(;++n<t.length;){const i=YY(e,t[n]);r.push(i)}return r}function xnt(e,t){const n=e.schema;e.schema=t.namespaceURI===o1.svg?$y:bk;let r=-1;const i={};for(;++r<t.attrs.length;){const a=t.attrs[r],u=(a.prefix?a.prefix+":":"")+a.name;AEe.call(wnt,u)||(i[u]=a.value)}const o=(e.schema.space==="svg"?bnt:vnt)(t.tagName,i,IEe(e,t.childNodes));if(mD(e,t,o),o.tagName==="template"){const a=t,u=a.sourceCodeLocation,l=u&&u.startTag&&Cw(u.startTag),c=u&&u.endTag&&Cw(u.endTag),f=YY(e,a.content);l&&c&&e.file&&(f.position={start:l.end,end:c.start}),o.content=f}return e.schema=n,o}function mD(e,t,n){if("sourceCodeLocation"in t&&t.sourceCodeLocation&&e.file){const r=Snt(e,n,t.sourceCodeLocation);r&&(e.location=!0,n.position=r)}}function Snt(e,t,n){const r=Cw(n);if(t.type==="element"){const i=t.children[t.children.length-1];if(r&&!n.endTag&&i&&i.position&&i.position.end&&(r.end=Object.assign({},i.position.end)),e.verbose){const s={};let o;if(n.attrs)for(o in n.attrs)AEe.call(n.attrs,o)&&(s[a6(e.schema,o).property]=Cw(n.attrs[o]));n.startTag;const a=Cw(n.startTag),u=n.endTag?Cw(n.endTag):void 0,l={opening:a};u&&(l.closing=u),l.properties=s,t.data={position:l}}}return r}function Cw(e){const t=due({line:e.startLine,column:e.startCol,offset:e.startOffset}),n=due({line:e.endLine,column:e.endCol,offset:e.endOffset});return t||n?{start:t,end:n}:void 0}function due(e){return e.line&&e.column?e:void 0}const hue={}.hasOwnProperty;function kEe(e,t){const n=t||{};function r(i,...s){let o=r.invalid;const a=r.handlers;if(i&&hue.call(i,e)){const u=String(i[e]);o=hue.call(a,u)?a[u]:r.unknown}if(o)return o.call(this,i,...s)}return r.handlers=n.handlers||{},r.invalid=n.invalid,r.unknown=n.unknown,r}const Tnt={},Cnt={}.hasOwnProperty,REe=kEe("type",{handlers:{root:Int,element:Dnt,text:Nnt,comment:Pnt,doctype:Rnt}});function Ant(e,t){const r=(t||Tnt).space;return REe(e,r==="svg"?$y:bk)}function Int(e,t){const n={nodeName:"#document",mode:(e.data||{}).quirksMode?"quirks":"no-quirks",childNodes:[]};return n.childNodes=KY(e.children,n,t),fS(e,n),n}function knt(e,t){const n={nodeName:"#document-fragment",childNodes:[]};return n.childNodes=KY(e.children,n,t),fS(e,n),n}function Rnt(e){const t={nodeName:"#documentType",name:"html",publicId:"",systemId:"",parentNode:null};return fS(e,t),t}function Nnt(e){const t={nodeName:"#text",value:e.value,parentNode:null};return fS(e,t),t}function Pnt(e){const t={nodeName:"#comment",data:e.value,parentNode:null};return fS(e,t),t}function Dnt(e,t){const n=t;let r=n;e.type==="element"&&e.tagName.toLowerCase()==="svg"&&n.space==="html"&&(r=$y);const i=[];let s;if(e.properties){for(s in e.properties)if(s!=="children"&&Cnt.call(e.properties,s)){const u=Ont(r,s,e.properties[s]);u&&i.push(u)}}const o=r.space,a={nodeName:e.tagName,tagName:e.tagName,attrs:i,namespaceURI:o1[o],childNodes:[],parentNode:null};return a.childNodes=KY(e.children,a,r),fS(e,a),e.tagName==="template"&&e.content&&(a.content=knt(e.content,r)),a}function Ont(e,t,n){const r=a6(e,t);if(n===!1||n===null||n===void 0||typeof n=="number"&&Number.isNaN(n)||!n&&r.boolean)return;Array.isArray(n)&&(n=r.commaSeparated?zwe(n):Qwe(n));const i={name:r.attribute,value:n===!0?"":String(n)};if(r.space&&r.space!=="html"&&r.space!=="svg"){const s=i.name.indexOf(":");s<0?i.prefix="":(i.name=i.name.slice(s+1),i.prefix=r.attribute.slice(0,s)),i.namespace=o1[r.space]}return i}function KY(e,t,n){let r=-1;const i=[];if(e)for(;++r<e.length;){const s=REe(e[r],n);s.parentNode=t,i.push(s)}return i}function fS(e,t){const n=e.position;n&&n.start&&n.end&&(n.start.offset,n.end.offset,t.sourceCodeLocation={startLine:n.start.line,startCol:n.start.column,startOffset:n.start.offset,endLine:n.end.line,endCol:n.end.column,endOffset:n.end.offset})}const $nt=["area","base","basefont","bgsound","br","col","command","embed","frame","hr","image","img","input","keygen","link","meta","param","source","track","wbr"],Mnt=new Set([65534,65535,131070,131071,196606,196607,262142,262143,327678,327679,393214,393215,458750,458751,524286,524287,589822,589823,655358,655359,720894,720895,786430,786431,851966,851967,917502,917503,983038,983039,1048574,1048575,1114110,1114111]),vi="�";var X;(function(e){e[e.EOF=-1]="EOF",e[e.NULL=0]="NULL",e[e.TABULATION=9]="TABULATION",e[e.CARRIAGE_RETURN=13]="CARRIAGE_RETURN",e[e.LINE_FEED=10]="LINE_FEED",e[e.FORM_FEED=12]="FORM_FEED",e[e.SPACE=32]="SPACE",e[e.EXCLAMATION_MARK=33]="EXCLAMATION_MARK",e[e.QUOTATION_MARK=34]="QUOTATION_MARK",e[e.NUMBER_SIGN=35]="NUMBER_SIGN",e[e.AMPERSAND=38]="AMPERSAND",e[e.APOSTROPHE=39]="APOSTROPHE",e[e.HYPHEN_MINUS=45]="HYPHEN_MINUS",e[e.SOLIDUS=47]="SOLIDUS",e[e.DIGIT_0=48]="DIGIT_0",e[e.DIGIT_9=57]="DIGIT_9",e[e.SEMICOLON=59]="SEMICOLON",e[e.LESS_THAN_SIGN=60]="LESS_THAN_SIGN",e[e.EQUALS_SIGN=61]="EQUALS_SIGN",e[e.GREATER_THAN_SIGN=62]="GREATER_THAN_SIGN",e[e.QUESTION_MARK=63]="QUESTION_MARK",e[e.LATIN_CAPITAL_A=65]="LATIN_CAPITAL_A",e[e.LATIN_CAPITAL_F=70]="LATIN_CAPITAL_F",e[e.LATIN_CAPITAL_X=88]="LATIN_CAPITAL_X",e[e.LATIN_CAPITAL_Z=90]="LATIN_CAPITAL_Z",e[e.RIGHT_SQUARE_BRACKET=93]="RIGHT_SQUARE_BRACKET",e[e.GRAVE_ACCENT=96]="GRAVE_ACCENT",e[e.LATIN_SMALL_A=97]="LATIN_SMALL_A",e[e.LATIN_SMALL_F=102]="LATIN_SMALL_F",e[e.LATIN_SMALL_X=120]="LATIN_SMALL_X",e[e.LATIN_SMALL_Z=122]="LATIN_SMALL_Z",e[e.REPLACEMENT_CHARACTER=65533]="REPLACEMENT_CHARACTER"})(X=X||(X={}));const mu={DASH_DASH:"--",CDATA_START:"[CDATA[",DOCTYPE:"doctype",SCRIPT:"script",PUBLIC:"public",SYSTEM:"system"};function NEe(e){return e>=55296&&e<=57343}function Lnt(e){return e>=56320&&e<=57343}function Fnt(e,t){return(e-55296)*1024+9216+t}function PEe(e){return e!==32&&e!==10&&e!==13&&e!==9&&e!==12&&e>=1&&e<=31||e>=127&&e<=159}function DEe(e){return e>=64976&&e<=65007||Mnt.has(e)}var Ne;(function(e){e.controlCharacterInInputStream="control-character-in-input-stream",e.noncharacterInInputStream="noncharacter-in-input-stream",e.surrogateInInputStream="surrogate-in-input-stream",e.nonVoidHtmlElementStartTagWithTrailingSolidus="non-void-html-element-start-tag-with-trailing-solidus",e.endTagWithAttributes="end-tag-with-attributes",e.endTagWithTrailingSolidus="end-tag-with-trailing-solidus",e.unexpectedSolidusInTag="unexpected-solidus-in-tag",e.unexpectedNullCharacter="unexpected-null-character",e.unexpectedQuestionMarkInsteadOfTagName="unexpected-question-mark-instead-of-tag-name",e.invalidFirstCharacterOfTagName="invalid-first-character-of-tag-name",e.unexpectedEqualsSignBeforeAttributeName="unexpected-equals-sign-before-attribute-name",e.missingEndTagName="missing-end-tag-name",e.unexpectedCharacterInAttributeName="unexpected-character-in-attribute-name",e.unknownNamedCharacterReference="unknown-named-character-reference",e.missingSemicolonAfterCharacterReference="missing-semicolon-after-character-reference",e.unexpectedCharacterAfterDoctypeSystemIdentifier="unexpected-character-after-doctype-system-identifier",e.unexpectedCharacterInUnquotedAttributeValue="unexpected-character-in-unquoted-attribute-value",e.eofBeforeTagName="eof-before-tag-name",e.eofInTag="eof-in-tag",e.missingAttributeValue="missing-attribute-value",e.missingWhitespaceBetweenAttributes="missing-whitespace-between-attributes",e.missingWhitespaceAfterDoctypePublicKeyword="missing-whitespace-after-doctype-public-keyword",e.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers="missing-whitespace-between-doctype-public-and-system-identifiers",e.missingWhitespaceAfterDoctypeSystemKeyword="missing-whitespace-after-doctype-system-keyword",e.missingQuoteBeforeDoctypePublicIdentifier="missing-quote-before-doctype-public-identifier",e.missingQuoteBeforeDoctypeSystemIdentifier="missing-quote-before-doctype-system-identifier",e.missingDoctypePublicIdentifier="missing-doctype-public-identifier",e.missingDoctypeSystemIdentifier="missing-doctype-system-identifier",e.abruptDoctypePublicIdentifier="abrupt-doctype-public-identifier",e.abruptDoctypeSystemIdentifier="abrupt-doctype-system-identifier",e.cdataInHtmlContent="cdata-in-html-content",e.incorrectlyOpenedComment="incorrectly-opened-comment",e.eofInScriptHtmlCommentLikeText="eof-in-script-html-comment-like-text",e.eofInDoctype="eof-in-doctype",e.nestedComment="nested-comment",e.abruptClosingOfEmptyComment="abrupt-closing-of-empty-comment",e.eofInComment="eof-in-comment",e.incorrectlyClosedComment="incorrectly-closed-comment",e.eofInCdata="eof-in-cdata",e.absenceOfDigitsInNumericCharacterReference="absence-of-digits-in-numeric-character-reference",e.nullCharacterReference="null-character-reference",e.surrogateCharacterReference="surrogate-character-reference",e.characterReferenceOutsideUnicodeRange="character-reference-outside-unicode-range",e.controlCharacterReference="control-character-reference",e.noncharacterCharacterReference="noncharacter-character-reference",e.missingWhitespaceBeforeDoctypeName="missing-whitespace-before-doctype-name",e.missingDoctypeName="missing-doctype-name",e.invalidCharacterSequenceAfterDoctypeName="invalid-character-sequence-after-doctype-name",e.duplicateAttribute="duplicate-attribute",e.nonConformingDoctype="non-conforming-doctype",e.missingDoctype="missing-doctype",e.misplacedDoctype="misplaced-doctype",e.endTagWithoutMatchingOpenElement="end-tag-without-matching-open-element",e.closingOfElementWithOpenChildElements="closing-of-element-with-open-child-elements",e.disallowedContentInNoscriptInHead="disallowed-content-in-noscript-in-head",e.openElementsLeftAfterEof="open-elements-left-after-eof",e.abandonedHeadElementChild="abandoned-head-element-child",e.misplacedStartTagForHeadElement="misplaced-start-tag-for-head-element",e.nestedNoscriptInHead="nested-noscript-in-head",e.eofInElementThatCanContainOnlyText="eof-in-element-that-can-contain-only-text"})(Ne=Ne||(Ne={}));const jnt=65536;class Bnt{constructor(t){this.handler=t,this.html="",this.pos=-1,this.lastGapPos=-2,this.gapStack=[],this.skipNextNewLine=!1,this.lastChunkWritten=!1,this.endOfChunkHit=!1,this.bufferWaterline=jnt,this.isEol=!1,this.lineStartPos=0,this.droppedBufferSize=0,this.line=1,this.lastErrOffset=-1}get col(){return this.pos-this.lineStartPos+ +(this.lastGapPos!==this.pos)}get offset(){return this.droppedBufferSize+this.pos}getError(t){const{line:n,col:r,offset:i}=this;return{code:t,startLine:n,endLine:n,startCol:r,endCol:r,startOffset:i,endOffset:i}}_err(t){this.handler.onParseError&&this.lastErrOffset!==this.offset&&(this.lastErrOffset=this.offset,this.handler.onParseError(this.getError(t)))}_addGap(){this.gapStack.push(this.lastGapPos),this.lastGapPos=this.pos}_processSurrogate(t){if(this.pos!==this.html.length-1){const n=this.html.charCodeAt(this.pos+1);if(Lnt(n))return this.pos++,this._addGap(),Fnt(t,n)}else if(!this.lastChunkWritten)return this.endOfChunkHit=!0,X.EOF;return this._err(Ne.surrogateInInputStream),t}willDropParsedChunk(){return this.pos>this.bufferWaterline}dropParsedChunk(){this.willDropParsedChunk()&&(this.html=this.html.substring(this.pos),this.lineStartPos-=this.pos,this.droppedBufferSize+=this.pos,this.pos=0,this.lastGapPos=-2,this.gapStack.length=0)}write(t,n){this.html.length>0?this.html+=t:this.html=t,this.endOfChunkHit=!1,this.lastChunkWritten=n}insertHtmlAtCurrentPos(t){this.html=this.html.substring(0,this.pos+1)+t+this.html.substring(this.pos+1),this.endOfChunkHit=!1}startsWith(t,n){if(this.pos+t.length>this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,!1;if(n)return this.html.startsWith(t,this.pos);for(let r=0;r<t.length;r++)if((this.html.charCodeAt(this.pos+r)|32)!==t.charCodeAt(r))return!1;return!0}peek(t){const n=this.pos+t;if(n>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,X.EOF;const r=this.html.charCodeAt(n);return r===X.CARRIAGE_RETURN?X.LINE_FEED:r}advance(){if(this.pos++,this.isEol&&(this.isEol=!1,this.line++,this.lineStartPos=this.pos),this.pos>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,X.EOF;let t=this.html.charCodeAt(this.pos);return t===X.CARRIAGE_RETURN?(this.isEol=!0,this.skipNextNewLine=!0,X.LINE_FEED):t===X.LINE_FEED&&(this.isEol=!0,this.skipNextNewLine)?(this.line--,this.skipNextNewLine=!1,this._addGap(),this.advance()):(this.skipNextNewLine=!1,NEe(t)&&(t=this._processSurrogate(t)),this.handler.onParseError===null||t>31&&t<127||t===X.LINE_FEED||t===X.CARRIAGE_RETURN||t>159&&t<64976||this._checkForProblematicCharacters(t),t)}_checkForProblematicCharacters(t){PEe(t)?this._err(Ne.controlCharacterInInputStream):DEe(t)&&this._err(Ne.noncharacterInInputStream)}retreat(t){for(this.pos-=t;this.pos<this.lastGapPos;)this.lastGapPos=this.gapStack.pop(),this.pos--;this.isEol=!1}}var kn;(function(e){e[e.CHARACTER=0]="CHARACTER",e[e.NULL_CHARACTER=1]="NULL_CHARACTER",e[e.WHITESPACE_CHARACTER=2]="WHITESPACE_CHARACTER",e[e.START_TAG=3]="START_TAG",e[e.END_TAG=4]="END_TAG",e[e.COMMENT=5]="COMMENT",e[e.DOCTYPE=6]="DOCTYPE",e[e.EOF=7]="EOF",e[e.HIBERNATION=8]="HIBERNATION"})(kn=kn||(kn={}));function OEe(e,t){for(let n=e.attrs.length-1;n>=0;n--)if(e.attrs[n].name===t)return e.attrs[n].value;return null}const Sg=new Uint16Array('ᵁ<Õıʊҝջאٵ۞ޢߖࠏ੊ઑඡ๭༉༦჊ረዡᐕᒝᓃᓟᔥ\0\0\0\0\0\0ᕫᛍᦍᰒᷝ὾⁠↰⊍⏀⏻⑂⠤⤒ⴈ⹈⿎〖㊺㘹㞬㣾㨨㩱㫠㬮ࠀEMabcfglmnoprstu\\bfms¦³¹ÈÏlig耻Æ䃆P耻&䀦cute耻Á䃁reve;䄂Āiyx}rc耻Â䃂;䐐r;쀀𝔄rave耻À䃀pha;䎑acr;䄀d;橓Āgp¡on;䄄f;쀀𝔸plyFunction;恡ing耻Å䃅Ācs¾Ãr;쀀𝒜ign;扔ilde耻Ã䃃ml耻Ä䃄ЀaceforsuåûþėĜĢħĪĀcrêòkslash;或Ŷöø;櫧ed;挆y;䐑ƀcrtąċĔause;戵noullis;愬a;䎒r;쀀𝔅pf;쀀𝔹eve;䋘còēmpeq;扎܀HOacdefhilorsuōőŖƀƞƢƵƷƺǜȕɳɸɾcy;䐧PY耻©䂩ƀcpyŝŢźute;䄆Ā;iŧŨ拒talDifferentialD;慅leys;愭ȀaeioƉƎƔƘron;䄌dil耻Ç䃇rc;䄈nint;戰ot;䄊ĀdnƧƭilla;䂸terDot;䂷òſi;䎧rcleȀDMPTǇǋǑǖot;抙inus;抖lus;投imes;抗oĀcsǢǸkwiseContourIntegral;戲eCurlyĀDQȃȏoubleQuote;思uote;怙ȀlnpuȞȨɇɕonĀ;eȥȦ户;橴ƀgitȯȶȺruent;扡nt;戯ourIntegral;戮ĀfrɌɎ;愂oduct;成nterClockwiseContourIntegral;戳oss;樯cr;쀀𝒞pĀ;Cʄʅ拓ap;才րDJSZacefiosʠʬʰʴʸˋ˗ˡ˦̳ҍĀ;oŹʥtrahd;椑cy;䐂cy;䐅cy;䐏ƀgrsʿ˄ˇger;怡r;憡hv;櫤Āayː˕ron;䄎;䐔lĀ;t˝˞戇a;䎔r;쀀𝔇Āaf˫̧Ācm˰̢riticalȀADGT̖̜̀̆cute;䂴oŴ̋̍;䋙bleAcute;䋝rave;䁠ilde;䋜ond;拄ferentialD;慆Ѱ̽\0\0\0͔͂\0Ѕf;쀀𝔻ƀ;DE͈͉͍䂨ot;惜qual;扐blèCDLRUVͣͲ΂ϏϢϸontourIntegraìȹoɴ͹\0\0ͻ»͉nArrow;懓Āeo·ΤftƀARTΐΖΡrrow;懐ightArrow;懔eåˊngĀLRΫτeftĀARγιrrow;柸ightArrow;柺ightArrow;柹ightĀATϘϞrrow;懒ee;抨pɁϩ\0\0ϯrrow;懑ownArrow;懕erticalBar;戥ǹABLRTaВЪаўѿͼrrowƀ;BUНОТ憓ar;椓pArrow;懵reve;䌑eft˒к\0ц\0ѐightVector;楐eeVector;楞ectorĀ;Bљњ憽ar;楖ightǔѧ\0ѱeeVector;楟ectorĀ;BѺѻ懁ar;楗eeĀ;A҆҇护rrow;憧ĀctҒҗr;쀀𝒟rok;䄐ࠀNTacdfglmopqstuxҽӀӄӋӞӢӧӮӵԡԯԶՒ՝ՠեG;䅊H耻Ð䃐cute耻É䃉ƀaiyӒӗӜron;䄚rc耻Ê䃊;䐭ot;䄖r;쀀𝔈rave耻È䃈ement;戈ĀapӺӾcr;䄒tyɓԆ\0\0ԒmallSquare;旻erySmallSquare;斫ĀgpԦԪon;䄘f;쀀𝔼silon;䎕uĀaiԼՉlĀ;TՂՃ橵ilde;扂librium;懌Āci՗՚r;愰m;橳a;䎗ml耻Ë䃋Āipժկsts;戃onentialE;慇ʀcfiosօֈ֍ֲ׌y;䐤r;쀀𝔉lledɓ֗\0\0֣mallSquare;旼erySmallSquare;斪Ͱֺ\0ֿ\0\0ׄf;쀀𝔽All;戀riertrf;愱cò׋؀JTabcdfgorstר׬ׯ׺؀ؒؖ؛؝أ٬ٲcy;䐃耻>䀾mmaĀ;d׷׸䎓;䏜reve;䄞ƀeiy؇،ؐdil;䄢rc;䄜;䐓ot;䄠r;쀀𝔊;拙pf;쀀𝔾eater̀EFGLSTصلَٖٛ٦qualĀ;Lؾؿ扥ess;招ullEqual;执reater;檢ess;扷lantEqual;橾ilde;扳cr;쀀𝒢;扫ЀAacfiosuڅڋږڛڞڪھۊRDcy;䐪Āctڐڔek;䋇;䁞irc;䄤r;愌lbertSpace;愋ǰگ\0ڲf;愍izontalLine;攀Āctۃۅòکrok;䄦mpńېۘownHumðįqual;扏܀EJOacdfgmnostuۺ۾܃܇܎ܚܞܡܨ݄ݸދޏޕcy;䐕lig;䄲cy;䐁cute耻Í䃍Āiyܓܘrc耻Î䃎;䐘ot;䄰r;愑rave耻Ì䃌ƀ;apܠܯܿĀcgܴܷr;䄪inaryI;慈lieóϝǴ݉\0ݢĀ;eݍݎ戬Āgrݓݘral;戫section;拂isibleĀCTݬݲomma;恣imes;恢ƀgptݿރވon;䄮f;쀀𝕀a;䎙cr;愐ilde;䄨ǫޚ\0ޞcy;䐆l耻Ï䃏ʀcfosuެ޷޼߂ߐĀiyޱ޵rc;䄴;䐙r;쀀𝔍pf;쀀𝕁ǣ߇\0ߌr;쀀𝒥rcy;䐈kcy;䐄΀HJacfosߤߨ߽߬߱ࠂࠈcy;䐥cy;䐌ppa;䎚Āey߶߻dil;䄶;䐚r;쀀𝔎pf;쀀𝕂cr;쀀𝒦րJTaceflmostࠥࠩࠬࡐࡣ঳সে্਷ੇcy;䐉耻<䀼ʀcmnpr࠷࠼ࡁࡄࡍute;䄹bda;䎛g;柪lacetrf;愒r;憞ƀaeyࡗ࡜ࡡron;䄽dil;䄻;䐛Āfsࡨ॰tԀACDFRTUVarࡾࢩࢱࣦ࣠ࣼयज़ΐ४Ānrࢃ࢏gleBracket;柨rowƀ;BR࢙࢚࢞憐ar;懤ightArrow;懆eiling;挈oǵࢷ\0ࣃbleBracket;柦nǔࣈ\0࣒eeVector;楡ectorĀ;Bࣛࣜ懃ar;楙loor;挊ightĀAV࣯ࣵrrow;憔ector;楎Āerँगeƀ;AVउऊऐ抣rrow;憤ector;楚iangleƀ;BEतथऩ抲ar;槏qual;抴pƀDTVषूौownVector;楑eeVector;楠ectorĀ;Bॖॗ憿ar;楘ectorĀ;B॥०憼ar;楒ightáΜs̀EFGLSTॾঋকঝঢভqualGreater;拚ullEqual;扦reater;扶ess;檡lantEqual;橽ilde;扲r;쀀𝔏Ā;eঽা拘ftarrow;懚idot;䄿ƀnpw৔ਖਛgȀLRlr৞৷ਂਐeftĀAR০৬rrow;柵ightArrow;柷ightArrow;柶eftĀarγਊightáοightáϊf;쀀𝕃erĀLRਢਬeftArrow;憙ightArrow;憘ƀchtਾੀੂòࡌ;憰rok;䅁;扪Ѐacefiosuਗ਼੝੠੷੼અઋ઎p;椅y;䐜Ādl੥੯iumSpace;恟lintrf;愳r;쀀𝔐nusPlus;戓pf;쀀𝕄cò੶;䎜ҀJacefostuણધભીଔଙඑ඗ඞcy;䐊cute;䅃ƀaey઴હાron;䅇dil;䅅;䐝ƀgswે૰଎ativeƀMTV૓૟૨ediumSpace;怋hiĀcn૦૘ë૙eryThiî૙tedĀGL૸ଆreaterGreateòٳessLesóੈLine;䀊r;쀀𝔑ȀBnptଢନଷ଺reak;恠BreakingSpace;䂠f;愕ڀ;CDEGHLNPRSTV୕ୖ୪୼஡௫ఄ౞಄ದ೘ൡඅ櫬Āou୛୤ngruent;扢pCap;扭oubleVerticalBar;戦ƀlqxஃஊ஛ement;戉ualĀ;Tஒஓ扠ilde;쀀≂̸ists;戄reater΀;EFGLSTஶஷ஽௉௓௘௥扯qual;扱ullEqual;쀀≧̸reater;쀀≫̸ess;批lantEqual;쀀⩾̸ilde;扵umpń௲௽ownHump;쀀≎̸qual;쀀≏̸eĀfsఊధtTriangleƀ;BEచఛడ拪ar;쀀⧏̸qual;括s̀;EGLSTవశ఼ౄోౘ扮qual;扰reater;扸ess;쀀≪̸lantEqual;쀀⩽̸ilde;扴estedĀGL౨౹reaterGreater;쀀⪢̸essLess;쀀⪡̸recedesƀ;ESಒಓಛ技qual;쀀⪯̸lantEqual;拠ĀeiಫಹverseElement;戌ghtTriangleƀ;BEೋೌ೒拫ar;쀀⧐̸qual;拭ĀquೝഌuareSuĀbp೨೹setĀ;E೰ೳ쀀⊏̸qual;拢ersetĀ;Eഃആ쀀⊐̸qual;拣ƀbcpഓതൎsetĀ;Eഛഞ쀀⊂⃒qual;抈ceedsȀ;ESTലള഻െ抁qual;쀀⪰̸lantEqual;拡ilde;쀀≿̸ersetĀ;E൘൛쀀⊃⃒qual;抉ildeȀ;EFT൮൯൵ൿ扁qual;扄ullEqual;扇ilde;扉erticalBar;戤cr;쀀𝒩ilde耻Ñ䃑;䎝܀Eacdfgmoprstuvලෂ෉෕ෛ෠෧෼ขภยา฿ไlig;䅒cute耻Ó䃓Āiy෎ීrc耻Ô䃔;䐞blac;䅐r;쀀𝔒rave耻Ò䃒ƀaei෮ෲ෶cr;䅌ga;䎩cron;䎟pf;쀀𝕆enCurlyĀDQฎบoubleQuote;怜uote;怘;橔Āclวฬr;쀀𝒪ash耻Ø䃘iŬื฼de耻Õ䃕es;樷ml耻Ö䃖erĀBP๋๠Āar๐๓r;怾acĀek๚๜;揞et;掴arenthesis;揜Ҁacfhilors๿ງຊຏຒດຝະ໼rtialD;戂y;䐟r;쀀𝔓i;䎦;䎠usMinus;䂱Āipຢອncareplanåڝf;愙Ȁ;eio຺ູ໠໤檻cedesȀ;EST່້໏໚扺qual;檯lantEqual;扼ilde;找me;怳Ādp໩໮uct;戏ortionĀ;aȥ໹l;戝Āci༁༆r;쀀𝒫;䎨ȀUfos༑༖༛༟OT耻"䀢r;쀀𝔔pf;愚cr;쀀𝒬؀BEacefhiorsu༾གྷཇའཱིྦྷྪྭ႖ႩႴႾarr;椐G耻®䂮ƀcnrཎནབute;䅔g;柫rĀ;tཛྷཝ憠l;椖ƀaeyཧཬཱron;䅘dil;䅖;䐠Ā;vླྀཹ愜erseĀEUྂྙĀlq྇ྎement;戋uilibrium;懋pEquilibrium;楯r»ཹo;䎡ghtЀACDFTUVa࿁࿫࿳ဢဨၛႇϘĀnr࿆࿒gleBracket;柩rowƀ;BL࿜࿝࿡憒ar;懥eftArrow;懄eiling;按oǵ࿹\0စbleBracket;柧nǔည\0နeeVector;楝ectorĀ;Bဝသ懂ar;楕loor;挋Āerိ၃eƀ;AVဵံြ抢rrow;憦ector;楛iangleƀ;BEၐၑၕ抳ar;槐qual;抵pƀDTVၣၮၸownVector;楏eeVector;楜ectorĀ;Bႂႃ憾ar;楔ectorĀ;B႑႒懀ar;楓Āpuႛ႞f;愝ndImplies;楰ightarrow;懛ĀchႹႼr;愛;憱leDelayed;槴ڀHOacfhimoqstuფჱჷჽᄙᄞᅑᅖᅡᅧᆵᆻᆿĀCcჩხHcy;䐩y;䐨FTcy;䐬cute;䅚ʀ;aeiyᄈᄉᄎᄓᄗ檼ron;䅠dil;䅞rc;䅜;䐡r;쀀𝔖ortȀDLRUᄪᄴᄾᅉownArrow»ОeftArrow»࢚ightArrow»࿝pArrow;憑gma;䎣allCircle;战pf;쀀𝕊ɲᅭ\0\0ᅰt;戚areȀ;ISUᅻᅼᆉᆯ斡ntersection;抓uĀbpᆏᆞsetĀ;Eᆗᆘ抏qual;抑ersetĀ;Eᆨᆩ抐qual;抒nion;抔cr;쀀𝒮ar;拆ȀbcmpᇈᇛሉላĀ;sᇍᇎ拐etĀ;Eᇍᇕqual;抆ĀchᇠህeedsȀ;ESTᇭᇮᇴᇿ扻qual;檰lantEqual;扽ilde;承Tháྌ;我ƀ;esሒሓሣ拑rsetĀ;Eሜም抃qual;抇et»ሓրHRSacfhiorsሾቄ቉ቕ቞ቱቶኟዂወዑORN耻Þ䃞ADE;愢ĀHc቎ቒcy;䐋y;䐦Ābuቚቜ;䀉;䎤ƀaeyብቪቯron;䅤dil;䅢;䐢r;쀀𝔗Āeiቻ኉ǲኀ\0ኇefore;戴a;䎘Ācn኎ኘkSpace;쀀  Space;怉ldeȀ;EFTካኬኲኼ戼qual;扃ullEqual;扅ilde;扈pf;쀀𝕋ipleDot;惛Āctዖዛr;쀀𝒯rok;䅦ૡዷጎጚጦ\0ጬጱ\0\0\0\0\0ጸጽ፷ᎅ\0᏿ᐄᐊᐐĀcrዻጁute耻Ú䃚rĀ;oጇገ憟cir;楉rǣጓ\0጖y;䐎ve;䅬Āiyጞጣrc耻Û䃛;䐣blac;䅰r;쀀𝔘rave耻Ù䃙acr;䅪Ādiፁ፩erĀBPፈ፝Āarፍፐr;䁟acĀekፗፙ;揟et;掵arenthesis;揝onĀ;P፰፱拃lus;抎Āgp፻፿on;䅲f;쀀𝕌ЀADETadps᎕ᎮᎸᏄϨᏒᏗᏳrrowƀ;BDᅐᎠᎤar;椒ownArrow;懅ownArrow;憕quilibrium;楮eeĀ;AᏋᏌ报rrow;憥ownáϳerĀLRᏞᏨeftArrow;憖ightArrow;憗iĀ;lᏹᏺ䏒on;䎥ing;䅮cr;쀀𝒰ilde;䅨ml耻Ü䃜ҀDbcdefosvᐧᐬᐰᐳᐾᒅᒊᒐᒖash;披ar;櫫y;䐒ashĀ;lᐻᐼ抩;櫦Āerᑃᑅ;拁ƀbtyᑌᑐᑺar;怖Ā;iᑏᑕcalȀBLSTᑡᑥᑪᑴar;戣ine;䁼eparator;杘ilde;所ThinSpace;怊r;쀀𝔙pf;쀀𝕍cr;쀀𝒱dash;抪ʀcefosᒧᒬᒱᒶᒼirc;䅴dge;拀r;쀀𝔚pf;쀀𝕎cr;쀀𝒲Ȁfiosᓋᓐᓒᓘr;쀀𝔛;䎞pf;쀀𝕏cr;쀀𝒳ҀAIUacfosuᓱᓵᓹᓽᔄᔏᔔᔚᔠcy;䐯cy;䐇cy;䐮cute耻Ý䃝Āiyᔉᔍrc;䅶;䐫r;쀀𝔜pf;쀀𝕐cr;쀀𝒴ml;䅸ЀHacdefosᔵᔹᔿᕋᕏᕝᕠᕤcy;䐖cute;䅹Āayᕄᕉron;䅽;䐗ot;䅻ǲᕔ\0ᕛoWidtè૙a;䎖r;愨pf;愤cr;쀀𝒵௡ᖃᖊᖐ\0ᖰᖶᖿ\0\0\0\0ᗆᗛᗫᙟ᙭\0ᚕ᚛ᚲᚹ\0ᚾcute耻á䃡reve;䄃̀;Ediuyᖜᖝᖡᖣᖨᖭ戾;쀀∾̳;房rc耻â䃢te肻´̆;䐰lig耻æ䃦Ā;r²ᖺ;쀀𝔞rave耻à䃠ĀepᗊᗖĀfpᗏᗔsym;愵èᗓha;䎱ĀapᗟcĀclᗤᗧr;䄁g;樿ɤᗰ\0\0ᘊʀ;adsvᗺᗻᗿᘁᘇ戧nd;橕;橜lope;橘;橚΀;elmrszᘘᘙᘛᘞᘿᙏᙙ戠;榤e»ᘙsdĀ;aᘥᘦ戡ѡᘰᘲᘴᘶᘸᘺᘼᘾ;榨;榩;榪;榫;榬;榭;榮;榯tĀ;vᙅᙆ戟bĀ;dᙌᙍ抾;榝Āptᙔᙗh;戢»¹arr;捼Āgpᙣᙧon;䄅f;쀀𝕒΀;Eaeiop዁ᙻᙽᚂᚄᚇᚊ;橰cir;橯;扊d;手s;䀧roxĀ;e዁ᚒñᚃing耻å䃥ƀctyᚡᚦᚨr;쀀𝒶;䀪mpĀ;e዁ᚯñʈilde耻ã䃣ml耻ä䃤Āciᛂᛈoninôɲnt;樑ࠀNabcdefiklnoprsu᛭ᛱᜰ᜼ᝃᝈ᝸᝽០៦ᠹᡐᜍ᤽᥈ᥰot;櫭Ācrᛶ᜞kȀcepsᜀᜅᜍᜓong;扌psilon;䏶rime;怵imĀ;e᜚᜛戽q;拍Ŷᜢᜦee;抽edĀ;gᜬᜭ挅e»ᜭrkĀ;t፜᜷brk;掶Āoyᜁᝁ;䐱quo;怞ʀcmprtᝓ᝛ᝡᝤᝨausĀ;eĊĉptyv;榰séᜌnoõēƀahwᝯ᝱ᝳ;䎲;愶een;扬r;쀀𝔟g΀costuvwឍឝឳេ៕៛៞ƀaiuបពរðݠrc;旯p»፱ƀdptឤឨឭot;樀lus;樁imes;樂ɱឹ\0\0ើcup;樆ar;昅riangleĀdu៍្own;施p;斳plus;樄eåᑄåᒭarow;植ƀako៭ᠦᠵĀcn៲ᠣkƀlst៺֫᠂ozenge;槫riangleȀ;dlr᠒᠓᠘᠝斴own;斾eft;旂ight;斸k;搣Ʊᠫ\0ᠳƲᠯ\0ᠱ;斒;斑4;斓ck;斈ĀeoᠾᡍĀ;qᡃᡆ쀀=⃥uiv;쀀≡⃥t;挐Ȁptwxᡙᡞᡧᡬf;쀀𝕓Ā;tᏋᡣom»Ꮜtie;拈؀DHUVbdhmptuvᢅᢖᢪᢻᣗᣛᣬ᣿ᤅᤊᤐᤡȀLRlrᢎᢐᢒᢔ;敗;敔;敖;敓ʀ;DUduᢡᢢᢤᢦᢨ敐;敦;敩;敤;敧ȀLRlrᢳᢵᢷᢹ;敝;敚;敜;教΀;HLRhlrᣊᣋᣍᣏᣑᣓᣕ救;敬;散;敠;敫;敢;敟ox;槉ȀLRlrᣤᣦᣨᣪ;敕;敒;攐;攌ʀ;DUduڽ᣷᣹᣻᣽;敥;敨;攬;攴inus;抟lus;択imes;抠ȀLRlrᤙᤛᤝ᤟;敛;敘;攘;攔΀;HLRhlrᤰᤱᤳᤵᤷ᤻᤹攂;敪;敡;敞;攼;攤;攜Āevģ᥂bar耻¦䂦Ȁceioᥑᥖᥚᥠr;쀀𝒷mi;恏mĀ;e᜚᜜lƀ;bhᥨᥩᥫ䁜;槅sub;柈Ŭᥴ᥾lĀ;e᥹᥺怢t»᥺pƀ;Eeįᦅᦇ;檮Ā;qۜۛೡᦧ\0᧨ᨑᨕᨲ\0ᨷᩐ\0\0᪴\0\0᫁\0\0ᬡᬮ᭍᭒\0᯽\0ᰌƀcpr᦭ᦲ᧝ute;䄇̀;abcdsᦿᧀᧄ᧊᧕᧙戩nd;橄rcup;橉Āau᧏᧒p;橋p;橇ot;橀;쀀∩︀Āeo᧢᧥t;恁îړȀaeiu᧰᧻ᨁᨅǰ᧵\0᧸s;橍on;䄍dil耻ç䃧rc;䄉psĀ;sᨌᨍ橌m;橐ot;䄋ƀdmnᨛᨠᨦil肻¸ƭptyv;榲t脀¢;eᨭᨮ䂢räƲr;쀀𝔠ƀceiᨽᩀᩍy;䑇ckĀ;mᩇᩈ朓ark»ᩈ;䏇r΀;Ecefms᩟᩠ᩢᩫ᪤᪪᪮旋;槃ƀ;elᩩᩪᩭ䋆q;扗eɡᩴ\0\0᪈rrowĀlr᩼᪁eft;憺ight;憻ʀRSacd᪒᪔᪖᪚᪟»ཇ;擈st;抛irc;抚ash;抝nint;樐id;櫯cir;槂ubsĀ;u᪻᪼晣it»᪼ˬ᫇᫔᫺\0ᬊonĀ;eᫍᫎ䀺Ā;qÇÆɭ᫙\0\0᫢aĀ;t᫞᫟䀬;䁀ƀ;fl᫨᫩᫫戁îᅠeĀmx᫱᫶ent»᫩eóɍǧ᫾\0ᬇĀ;dኻᬂot;橭nôɆƀfryᬐᬔᬗ;쀀𝕔oäɔ脀©;sŕᬝr;愗Āaoᬥᬩrr;憵ss;朗Ācuᬲᬷr;쀀𝒸Ābpᬼ᭄Ā;eᭁᭂ櫏;櫑Ā;eᭉᭊ櫐;櫒dot;拯΀delprvw᭠᭬᭷ᮂᮬᯔ᯹arrĀlr᭨᭪;椸;椵ɰ᭲\0\0᭵r;拞c;拟arrĀ;p᭿ᮀ憶;椽̀;bcdosᮏᮐᮖᮡᮥᮨ截rcap;橈Āauᮛᮞp;橆p;橊ot;抍r;橅;쀀∪︀Ȁalrv᮵ᮿᯞᯣrrĀ;mᮼᮽ憷;椼yƀevwᯇᯔᯘqɰᯎ\0\0ᯒreã᭳uã᭵ee;拎edge;拏en耻¤䂤earrowĀlrᯮ᯳eft»ᮀight»ᮽeäᯝĀciᰁᰇoninôǷnt;戱lcty;挭ঀAHabcdefhijlorstuwz᰸᰻᰿ᱝᱩᱵᲊᲞᲬᲷ᳻᳿ᴍᵻᶑᶫᶻ᷆᷍rò΁ar;楥Ȁglrs᱈ᱍ᱒᱔ger;怠eth;愸òᄳhĀ;vᱚᱛ怐»ऊūᱡᱧarow;椏aã̕Āayᱮᱳron;䄏;䐴ƀ;ao̲ᱼᲄĀgrʿᲁr;懊tseq;橷ƀglmᲑᲔᲘ耻°䂰ta;䎴ptyv;榱ĀirᲣᲨsht;楿;쀀𝔡arĀlrᲳᲵ»ࣜ»သʀaegsv᳂͸᳖᳜᳠mƀ;oș᳊᳔ndĀ;ș᳑uit;晦amma;䏝in;拲ƀ;io᳧᳨᳸䃷de脀÷;o᳧ᳰntimes;拇nø᳷cy;䑒cɯᴆ\0\0ᴊrn;挞op;挍ʀlptuwᴘᴝᴢᵉᵕlar;䀤f;쀀𝕕ʀ;emps̋ᴭᴷᴽᵂqĀ;d͒ᴳot;扑inus;戸lus;戔quare;抡blebarwedgåúnƀadhᄮᵝᵧownarrowóᲃarpoonĀlrᵲᵶefôᲴighôᲶŢᵿᶅkaro÷གɯᶊ\0\0ᶎrn;挟op;挌ƀcotᶘᶣᶦĀryᶝᶡ;쀀𝒹;䑕l;槶rok;䄑Ādrᶰᶴot;拱iĀ;fᶺ᠖斿Āah᷀᷃ròЩaòྦangle;榦Āci᷒ᷕy;䑟grarr;柿ऀDacdefglmnopqrstuxḁḉḙḸոḼṉṡṾấắẽỡἪἷὄ὎὚ĀDoḆᴴoôᲉĀcsḎḔute耻é䃩ter;橮ȀaioyḢḧḱḶron;䄛rĀ;cḭḮ扖耻ê䃪lon;払;䑍ot;䄗ĀDrṁṅot;扒;쀀𝔢ƀ;rsṐṑṗ檚ave耻è䃨Ā;dṜṝ檖ot;檘Ȁ;ilsṪṫṲṴ檙nters;揧;愓Ā;dṹṺ檕ot;檗ƀapsẅẉẗcr;䄓tyƀ;svẒẓẕ戅et»ẓpĀ1;ẝẤĳạả;怄;怅怃ĀgsẪẬ;䅋p;怂ĀgpẴẸon;䄙f;쀀𝕖ƀalsỄỎỒrĀ;sỊị拕l;槣us;橱iƀ;lvỚớở䎵on»ớ;䏵ȀcsuvỪỳἋἣĀioữḱrc»Ḯɩỹ\0\0ỻíՈantĀglἂἆtr»ṝess»Ṻƀaeiἒ἖Ἒls;䀽st;扟vĀ;DȵἠD;橸parsl;槥ĀDaἯἳot;打rr;楱ƀcdiἾὁỸr;愯oô͒ĀahὉὋ;䎷耻ð䃰Āmrὓὗl耻ë䃫o;悬ƀcipὡὤὧl;䀡sôծĀeoὬὴctatioîՙnentialåչৡᾒ\0ᾞ\0ᾡᾧ\0\0ῆῌ\0ΐ\0ῦῪ \0 ⁚llingdotseñṄy;䑄male;晀ƀilrᾭᾳ῁lig;耀ﬃɩᾹ\0\0᾽g;耀ﬀig;耀ﬄ;쀀𝔣lig;耀ﬁlig;쀀fjƀaltῙ῜ῡt;晭ig;耀ﬂns;斱of;䆒ǰ΅\0ῳf;쀀𝕗ĀakֿῷĀ;vῼ´拔;櫙artint;樍Āao‌⁕Ācs‑⁒α‚‰‸⁅⁈\0⁐β•‥‧‪‬\0‮耻½䂽;慓耻¼䂼;慕;慙;慛Ƴ‴\0‶;慔;慖ʴ‾⁁\0\0⁃耻¾䂾;慗;慜5;慘ƶ⁌\0⁎;慚;慝8;慞l;恄wn;挢cr;쀀𝒻ࢀEabcdefgijlnorstv₂₉₟₥₰₴⃰⃵⃺⃿℃ℒℸ̗ℾ⅒↞Ā;lٍ₇;檌ƀcmpₐₕ₝ute;䇵maĀ;dₜ᳚䎳;檆reve;䄟Āiy₪₮rc;䄝;䐳ot;䄡Ȁ;lqsؾق₽⃉ƀ;qsؾٌ⃄lanô٥Ȁ;cdl٥⃒⃥⃕c;檩otĀ;o⃜⃝檀Ā;l⃢⃣檂;檄Ā;e⃪⃭쀀⋛︀s;檔r;쀀𝔤Ā;gٳ؛mel;愷cy;䑓Ȁ;Eajٚℌℎℐ;檒;檥;檤ȀEaesℛℝ℩ℴ;扩pĀ;p℣ℤ檊rox»ℤĀ;q℮ℯ檈Ā;q℮ℛim;拧pf;쀀𝕘Āci⅃ⅆr;愊mƀ;el٫ⅎ⅐;檎;檐茀>;cdlqr׮ⅠⅪⅮⅳⅹĀciⅥⅧ;檧r;橺ot;拗Par;榕uest;橼ʀadelsↄⅪ←ٖ↛ǰ↉\0↎proø₞r;楸qĀlqؿ↖lesó₈ií٫Āen↣↭rtneqq;쀀≩︀Å↪ԀAabcefkosy⇄⇇⇱⇵⇺∘∝∯≨≽ròΠȀilmr⇐⇔⇗⇛rsðᒄf»․ilôکĀdr⇠⇤cy;䑊ƀ;cwࣴ⇫⇯ir;楈;憭ar;意irc;䄥ƀalr∁∎∓rtsĀ;u∉∊晥it»∊lip;怦con;抹r;쀀𝔥sĀew∣∩arow;椥arow;椦ʀamopr∺∾≃≞≣rr;懿tht;戻kĀlr≉≓eftarrow;憩ightarrow;憪f;쀀𝕙bar;怕ƀclt≯≴≸r;쀀𝒽asè⇴rok;䄧Ābp⊂⊇ull;恃hen»ᱛૡ⊣\0⊪\0⊸⋅⋎\0⋕⋳\0\0⋸⌢⍧⍢⍿\0⎆⎪⎴cute耻í䃭ƀ;iyݱ⊰⊵rc耻î䃮;䐸Ācx⊼⊿y;䐵cl耻¡䂡ĀfrΟ⋉;쀀𝔦rave耻ì䃬Ȁ;inoܾ⋝⋩⋮Āin⋢⋦nt;樌t;戭fin;槜ta;愩lig;䄳ƀaop⋾⌚⌝ƀcgt⌅⌈⌗r;䄫ƀelpܟ⌏⌓inåގarôܠh;䄱f;抷ed;䆵ʀ;cfotӴ⌬⌱⌽⍁are;愅inĀ;t⌸⌹戞ie;槝doô⌙ʀ;celpݗ⍌⍐⍛⍡al;抺Āgr⍕⍙eróᕣã⍍arhk;樗rod;樼Ȁcgpt⍯⍲⍶⍻y;䑑on;䄯f;쀀𝕚a;䎹uest耻¿䂿Āci⎊⎏r;쀀𝒾nʀ;EdsvӴ⎛⎝⎡ӳ;拹ot;拵Ā;v⎦⎧拴;拳Ā;iݷ⎮lde;䄩ǫ⎸\0⎼cy;䑖l耻ï䃯̀cfmosu⏌⏗⏜⏡⏧⏵Āiy⏑⏕rc;䄵;䐹r;쀀𝔧ath;䈷pf;쀀𝕛ǣ⏬\0⏱r;쀀𝒿rcy;䑘kcy;䑔Ѐacfghjos␋␖␢␧␭␱␵␻ppaĀ;v␓␔䎺;䏰Āey␛␠dil;䄷;䐺r;쀀𝔨reen;䄸cy;䑅cy;䑜pf;쀀𝕜cr;쀀𝓀஀ABEHabcdefghjlmnoprstuv⑰⒁⒆⒍⒑┎┽╚▀♎♞♥♹♽⚚⚲⛘❝❨➋⟀⠁⠒ƀart⑷⑺⑼rò৆òΕail;椛arr;椎Ā;gঔ⒋;檋ar;楢ॣ⒥\0⒪\0⒱\0\0\0\0\0⒵Ⓔ\0ⓆⓈⓍ\0⓹ute;䄺mptyv;榴raîࡌbda;䎻gƀ;dlࢎⓁⓃ;榑åࢎ;檅uo耻«䂫rЀ;bfhlpst࢙ⓞⓦⓩ⓫⓮⓱⓵Ā;f࢝ⓣs;椟s;椝ë≒p;憫l;椹im;楳l;憢ƀ;ae⓿─┄檫il;椙Ā;s┉┊檭;쀀⪭︀ƀabr┕┙┝rr;椌rk;杲Āak┢┬cĀek┨┪;䁻;䁛Āes┱┳;榋lĀdu┹┻;榏;榍Ȁaeuy╆╋╖╘ron;䄾Ādi═╔il;䄼ìࢰâ┩;䐻Ȁcqrs╣╦╭╽a;椶uoĀ;rนᝆĀdu╲╷har;楧shar;楋h;憲ʀ;fgqs▋▌উ◳◿扤tʀahlrt▘▤▷◂◨rrowĀ;t࢙□aé⓶arpoonĀdu▯▴own»њp»०eftarrows;懇ightƀahs◍◖◞rrowĀ;sࣴࢧarpoonó྘quigarro÷⇰hreetimes;拋ƀ;qs▋ও◺lanôবʀ;cdgsব☊☍☝☨c;檨otĀ;o☔☕橿Ā;r☚☛檁;檃Ā;e☢☥쀀⋚︀s;檓ʀadegs☳☹☽♉♋pproøⓆot;拖qĀgq♃♅ôউgtò⒌ôছiíলƀilr♕࣡♚sht;楼;쀀𝔩Ā;Eজ♣;檑š♩♶rĀdu▲♮Ā;l॥♳;楪lk;斄cy;䑙ʀ;achtੈ⚈⚋⚑⚖rò◁orneòᴈard;楫ri;旺Āio⚟⚤dot;䅀ustĀ;a⚬⚭掰che»⚭ȀEaes⚻⚽⛉⛔;扨pĀ;p⛃⛄檉rox»⛄Ā;q⛎⛏檇Ā;q⛎⚻im;拦Ѐabnoptwz⛩⛴⛷✚✯❁❇❐Ānr⛮⛱g;柬r;懽rëࣁgƀlmr⛿✍✔eftĀar০✇ightá৲apsto;柼ightá৽parrowĀlr✥✩efô⓭ight;憬ƀafl✶✹✽r;榅;쀀𝕝us;樭imes;樴š❋❏st;戗áፎƀ;ef❗❘᠀旊nge»❘arĀ;l❤❥䀨t;榓ʀachmt❳❶❼➅➇ròࢨorneòᶌarĀ;d྘➃;業;怎ri;抿̀achiqt➘➝ੀ➢➮➻quo;怹r;쀀𝓁mƀ;egল➪➬;檍;檏Ābu┪➳oĀ;rฟ➹;怚rok;䅂萀<;cdhilqrࠫ⟒☹⟜⟠⟥⟪⟰Āci⟗⟙;檦r;橹reå◲mes;拉arr;楶uest;橻ĀPi⟵⟹ar;榖ƀ;ef⠀भ᠛旃rĀdu⠇⠍shar;楊har;楦Āen⠗⠡rtneqq;쀀≨︀Å⠞܀Dacdefhilnopsu⡀⡅⢂⢎⢓⢠⢥⢨⣚⣢⣤ઃ⣳⤂Dot;戺Ȁclpr⡎⡒⡣⡽r耻¯䂯Āet⡗⡙;時Ā;e⡞⡟朠se»⡟Ā;sျ⡨toȀ;dluျ⡳⡷⡻owîҌefôएðᏑker;斮Āoy⢇⢌mma;権;䐼ash;怔asuredangle»ᘦr;쀀𝔪o;愧ƀcdn⢯⢴⣉ro耻µ䂵Ȁ;acdᑤ⢽⣀⣄sôᚧir;櫰ot肻·Ƶusƀ;bd⣒ᤃ⣓戒Ā;uᴼ⣘;横ţ⣞⣡p;櫛ò−ðઁĀdp⣩⣮els;抧f;쀀𝕞Āct⣸⣽r;쀀𝓂pos»ᖝƀ;lm⤉⤊⤍䎼timap;抸ఀGLRVabcdefghijlmoprstuvw⥂⥓⥾⦉⦘⧚⧩⨕⨚⩘⩝⪃⪕⪤⪨⬄⬇⭄⭿⮮ⰴⱧⱼ⳩Āgt⥇⥋;쀀⋙̸Ā;v⥐௏쀀≫⃒ƀelt⥚⥲⥶ftĀar⥡⥧rrow;懍ightarrow;懎;쀀⋘̸Ā;v⥻ే쀀≪⃒ightarrow;懏ĀDd⦎⦓ash;抯ash;抮ʀbcnpt⦣⦧⦬⦱⧌la»˞ute;䅄g;쀀∠⃒ʀ;Eiop඄⦼⧀⧅⧈;쀀⩰̸d;쀀≋̸s;䅉roø඄urĀ;a⧓⧔普lĀ;s⧓ସǳ⧟\0⧣p肻 ଷmpĀ;e௹ఀʀaeouy⧴⧾⨃⨐⨓ǰ⧹\0⧻;橃on;䅈dil;䅆ngĀ;dൾ⨊ot;쀀⩭̸p;橂;䐽ash;怓΀;Aadqsxஒ⨩⨭⨻⩁⩅⩐rr;懗rĀhr⨳⨶k;椤Ā;oᏲᏰot;쀀≐̸uiöୣĀei⩊⩎ar;椨í஘istĀ;s஠டr;쀀𝔫ȀEest௅⩦⩹⩼ƀ;qs஼⩭௡ƀ;qs஼௅⩴lanô௢ií௪Ā;rஶ⪁»ஷƀAap⪊⪍⪑rò⥱rr;憮ar;櫲ƀ;svྍ⪜ྌĀ;d⪡⪢拼;拺cy;䑚΀AEadest⪷⪺⪾⫂⫅⫶⫹rò⥦;쀀≦̸rr;憚r;急Ȁ;fqs఻⫎⫣⫯tĀar⫔⫙rro÷⫁ightarro÷⪐ƀ;qs఻⪺⫪lanôౕĀ;sౕ⫴»శiíౝĀ;rవ⫾iĀ;eచథiäඐĀpt⬌⬑f;쀀𝕟膀¬;in⬙⬚⬶䂬nȀ;Edvஉ⬤⬨⬮;쀀⋹̸ot;쀀⋵̸ǡஉ⬳⬵;拷;拶iĀ;vಸ⬼ǡಸ⭁⭃;拾;拽ƀaor⭋⭣⭩rȀ;ast୻⭕⭚⭟lleì୻l;쀀⫽⃥;쀀∂̸lint;樔ƀ;ceಒ⭰⭳uåಥĀ;cಘ⭸Ā;eಒ⭽ñಘȀAait⮈⮋⮝⮧rò⦈rrƀ;cw⮔⮕⮙憛;쀀⤳̸;쀀↝̸ghtarrow»⮕riĀ;eೋೖ΀chimpqu⮽⯍⯙⬄୸⯤⯯Ȁ;cerല⯆ഷ⯉uå൅;쀀𝓃ortɭ⬅\0\0⯖ará⭖mĀ;e൮⯟Ā;q൴൳suĀbp⯫⯭å೸åഋƀbcp⯶ⰑⰙȀ;Ees⯿ⰀഢⰄ抄;쀀⫅̸etĀ;eഛⰋqĀ;qണⰀcĀ;eലⰗñസȀ;EesⰢⰣൟⰧ抅;쀀⫆̸etĀ;e൘ⰮqĀ;qൠⰣȀgilrⰽⰿⱅⱇìௗlde耻ñ䃱çృiangleĀlrⱒⱜeftĀ;eచⱚñదightĀ;eೋⱥñ೗Ā;mⱬⱭ䎽ƀ;esⱴⱵⱹ䀣ro;愖p;怇ҀDHadgilrsⲏⲔⲙⲞⲣⲰⲶⳓⳣash;抭arr;椄p;쀀≍⃒ash;抬ĀetⲨⲬ;쀀≥⃒;쀀>⃒nfin;槞ƀAetⲽⳁⳅrr;椂;쀀≤⃒Ā;rⳊⳍ쀀<⃒ie;쀀⊴⃒ĀAtⳘⳜrr;椃rie;쀀⊵⃒im;쀀∼⃒ƀAan⳰⳴ⴂrr;懖rĀhr⳺⳽k;椣Ā;oᏧᏥear;椧ቓ᪕\0\0\0\0\0\0\0\0\0\0\0\0\0ⴭ\0ⴸⵈⵠⵥ⵲ⶄᬇ\0\0ⶍⶫ\0ⷈⷎ\0ⷜ⸙⸫⸾⹃Ācsⴱ᪗ute耻ó䃳ĀiyⴼⵅrĀ;c᪞ⵂ耻ô䃴;䐾ʀabios᪠ⵒⵗǈⵚlac;䅑v;樸old;榼lig;䅓Ācr⵩⵭ir;榿;쀀𝔬ͯ⵹\0\0⵼\0ⶂn;䋛ave耻ò䃲;槁Ābmⶈ෴ar;榵Ȁacitⶕ⶘ⶥⶨrò᪀Āir⶝ⶠr;榾oss;榻nå๒;槀ƀaeiⶱⶵⶹcr;䅍ga;䏉ƀcdnⷀⷅǍron;䎿;榶pf;쀀𝕠ƀaelⷔ⷗ǒr;榷rp;榹΀;adiosvⷪⷫⷮ⸈⸍⸐⸖戨rò᪆Ȁ;efmⷷⷸ⸂⸅橝rĀ;oⷾⷿ愴f»ⷿ耻ª䂪耻º䂺gof;抶r;橖lope;橗;橛ƀclo⸟⸡⸧ò⸁ash耻ø䃸l;折iŬⸯ⸴de耻õ䃵esĀ;aǛ⸺s;樶ml耻ö䃶bar;挽ૡ⹞\0⹽\0⺀⺝\0⺢⺹\0\0⻋ຜ\0⼓\0\0⼫⾼\0⿈rȀ;astЃ⹧⹲຅脀¶;l⹭⹮䂶leìЃɩ⹸\0\0⹻m;櫳;櫽y;䐿rʀcimpt⺋⺏⺓ᡥ⺗nt;䀥od;䀮il;怰enk;怱r;쀀𝔭ƀimo⺨⺰⺴Ā;v⺭⺮䏆;䏕maô੶ne;明ƀ;tv⺿⻀⻈䏀chfork»´;䏖Āau⻏⻟nĀck⻕⻝kĀ;h⇴⻛;愎ö⇴sҀ;abcdemst⻳⻴ᤈ⻹⻽⼄⼆⼊⼎䀫cir;樣ir;樢Āouᵀ⼂;樥;橲n肻±ຝim;樦wo;樧ƀipu⼙⼠⼥ntint;樕f;쀀𝕡nd耻£䂣Ԁ;Eaceinosu່⼿⽁⽄⽇⾁⾉⾒⽾⾶;檳p;檷uå໙Ā;c໎⽌̀;acens່⽙⽟⽦⽨⽾pproø⽃urlyeñ໙ñ໎ƀaes⽯⽶⽺pprox;檹qq;檵im;拨iíໟmeĀ;s⾈ຮ怲ƀEas⽸⾐⽺ð⽵ƀdfp໬⾙⾯ƀals⾠⾥⾪lar;挮ine;挒urf;挓Ā;t໻⾴ï໻rel;抰Āci⿀⿅r;쀀𝓅;䏈ncsp;怈̀fiopsu⿚⋢⿟⿥⿫⿱r;쀀𝔮pf;쀀𝕢rime;恗cr;쀀𝓆ƀaeo⿸〉〓tĀei⿾々rnionóڰnt;樖stĀ;e【】䀿ñἙô༔઀ABHabcdefhilmnoprstux぀けさすムㄎㄫㅇㅢㅲㆎ㈆㈕㈤㈩㉘㉮㉲㊐㊰㊷ƀartぇおがròႳòϝail;検aròᱥar;楤΀cdenqrtとふへみわゔヌĀeuねぱ;쀀∽̱te;䅕iãᅮmptyv;榳gȀ;del࿑らるろ;榒;榥å࿑uo耻»䂻rր;abcfhlpstw࿜ガクシスゼゾダッデナp;極Ā;f࿠ゴs;椠;椳s;椞ë≝ð✮l;楅im;楴l;憣;憝Āaiパフil;椚oĀ;nホボ戶aló༞ƀabrョリヮrò៥rk;杳ĀakンヽcĀekヹ・;䁽;䁝Āes㄂㄄;榌lĀduㄊㄌ;榎;榐Ȁaeuyㄗㄜㄧㄩron;䅙Ādiㄡㄥil;䅗ì࿲âヺ;䑀Ȁclqsㄴㄷㄽㅄa;椷dhar;楩uoĀ;rȎȍh;憳ƀacgㅎㅟངlȀ;ipsླྀㅘㅛႜnåႻarôྩt;断ƀilrㅩဣㅮsht;楽;쀀𝔯ĀaoㅷㆆrĀduㅽㅿ»ѻĀ;l႑ㆄ;楬Ā;vㆋㆌ䏁;䏱ƀgns㆕ㇹㇼht̀ahlrstㆤㆰ㇂㇘㇤㇮rrowĀ;t࿜ㆭaéトarpoonĀduㆻㆿowîㅾp»႒eftĀah㇊㇐rrowó࿪arpoonóՑightarrows;應quigarro÷ニhreetimes;拌g;䋚ingdotseñἲƀahm㈍㈐㈓rò࿪aòՑ;怏oustĀ;a㈞㈟掱che»㈟mid;櫮Ȁabpt㈲㈽㉀㉒Ānr㈷㈺g;柭r;懾rëဃƀafl㉇㉊㉎r;榆;쀀𝕣us;樮imes;樵Āap㉝㉧rĀ;g㉣㉤䀩t;榔olint;樒arò㇣Ȁachq㉻㊀Ⴜ㊅quo;怺r;쀀𝓇Ābu・㊊oĀ;rȔȓƀhir㊗㊛㊠reåㇸmes;拊iȀ;efl㊪ၙᠡ㊫方tri;槎luhar;楨;愞ൡ㋕㋛㋟㌬㌸㍱\0㍺㎤\0\0㏬㏰\0㐨㑈㑚㒭㒱㓊㓱\0㘖\0\0㘳cute;䅛quï➺Ԁ;Eaceinpsyᇭ㋳㋵㋿㌂㌋㌏㌟㌦㌩;檴ǰ㋺\0㋼;檸on;䅡uåᇾĀ;dᇳ㌇il;䅟rc;䅝ƀEas㌖㌘㌛;檶p;檺im;择olint;樓iíሄ;䑁otƀ;be㌴ᵇ㌵担;橦΀Aacmstx㍆㍊㍗㍛㍞㍣㍭rr;懘rĀhr㍐㍒ë∨Ā;oਸ਼਴t耻§䂧i;䀻war;椩mĀin㍩ðnuóñt;朶rĀ;o㍶⁕쀀𝔰Ȁacoy㎂㎆㎑㎠rp;景Āhy㎋㎏cy;䑉;䑈rtɭ㎙\0\0㎜iäᑤaraì⹯耻­䂭Āgm㎨㎴maƀ;fv㎱㎲㎲䏃;䏂Ѐ;deglnprካ㏅㏉㏎㏖㏞㏡㏦ot;橪Ā;q኱ኰĀ;E㏓㏔檞;檠Ā;E㏛㏜檝;檟e;扆lus;樤arr;楲aròᄽȀaeit㏸㐈㐏㐗Āls㏽㐄lsetmé㍪hp;樳parsl;槤Ādlᑣ㐔e;挣Ā;e㐜㐝檪Ā;s㐢㐣檬;쀀⪬︀ƀflp㐮㐳㑂tcy;䑌Ā;b㐸㐹䀯Ā;a㐾㐿槄r;挿f;쀀𝕤aĀdr㑍ЂesĀ;u㑔㑕晠it»㑕ƀcsu㑠㑹㒟Āau㑥㑯pĀ;sᆈ㑫;쀀⊓︀pĀ;sᆴ㑵;쀀⊔︀uĀbp㑿㒏ƀ;esᆗᆜ㒆etĀ;eᆗ㒍ñᆝƀ;esᆨᆭ㒖etĀ;eᆨ㒝ñᆮƀ;afᅻ㒦ְrť㒫ֱ»ᅼaròᅈȀcemt㒹㒾㓂㓅r;쀀𝓈tmîñiì㐕aræᆾĀar㓎㓕rĀ;f㓔ឿ昆Āan㓚㓭ightĀep㓣㓪psiloîỠhé⺯s»⡒ʀbcmnp㓻㕞ሉ㖋㖎Ҁ;Edemnprs㔎㔏㔑㔕㔞㔣㔬㔱㔶抂;櫅ot;檽Ā;dᇚ㔚ot;櫃ult;櫁ĀEe㔨㔪;櫋;把lus;檿arr;楹ƀeiu㔽㕒㕕tƀ;en㔎㕅㕋qĀ;qᇚ㔏eqĀ;q㔫㔨m;櫇Ābp㕚㕜;櫕;櫓c̀;acensᇭ㕬㕲㕹㕻㌦pproø㋺urlyeñᇾñᇳƀaes㖂㖈㌛pproø㌚qñ㌗g;晪ڀ123;Edehlmnps㖩㖬㖯ሜ㖲㖴㗀㗉㗕㗚㗟㗨㗭耻¹䂹耻²䂲耻³䂳;櫆Āos㖹㖼t;檾ub;櫘Ā;dሢ㗅ot;櫄sĀou㗏㗒l;柉b;櫗arr;楻ult;櫂ĀEe㗤㗦;櫌;抋lus;櫀ƀeiu㗴㘉㘌tƀ;enሜ㗼㘂qĀ;qሢ㖲eqĀ;q㗧㗤m;櫈Ābp㘑㘓;櫔;櫖ƀAan㘜㘠㘭rr;懙rĀhr㘦㘨ë∮Ā;oਫ਩war;椪lig耻ß䃟௡㙑㙝㙠ዎ㙳㙹\0㙾㛂\0\0\0\0\0㛛㜃\0㜉㝬\0\0\0㞇ɲ㙖\0\0㙛get;挖;䏄rë๟ƀaey㙦㙫㙰ron;䅥dil;䅣;䑂lrec;挕r;쀀𝔱Ȁeiko㚆㚝㚵㚼ǲ㚋\0㚑eĀ4fኄኁaƀ;sv㚘㚙㚛䎸ym;䏑Ācn㚢㚲kĀas㚨㚮pproø዁im»ኬsðኞĀas㚺㚮ð዁rn耻þ䃾Ǭ̟㛆⋧es膀×;bd㛏㛐㛘䃗Ā;aᤏ㛕r;樱;樰ƀeps㛡㛣㜀á⩍Ȁ;bcf҆㛬㛰㛴ot;挶ir;櫱Ā;o㛹㛼쀀𝕥rk;櫚á㍢rime;怴ƀaip㜏㜒㝤dåቈ΀adempst㜡㝍㝀㝑㝗㝜㝟ngleʀ;dlqr㜰㜱㜶㝀㝂斵own»ᶻeftĀ;e⠀㜾ñम;扜ightĀ;e㊪㝋ñၚot;旬inus;樺lus;樹b;槍ime;樻ezium;揢ƀcht㝲㝽㞁Āry㝷㝻;쀀𝓉;䑆cy;䑛rok;䅧Āio㞋㞎xô᝷headĀlr㞗㞠eftarro÷ࡏightarrow»ཝऀAHabcdfghlmoprstuw㟐㟓㟗㟤㟰㟼㠎㠜㠣㠴㡑㡝㡫㢩㣌㣒㣪㣶ròϭar;楣Ācr㟜㟢ute耻ú䃺òᅐrǣ㟪\0㟭y;䑞ve;䅭Āiy㟵㟺rc耻û䃻;䑃ƀabh㠃㠆㠋ròᎭlac;䅱aòᏃĀir㠓㠘sht;楾;쀀𝔲rave耻ù䃹š㠧㠱rĀlr㠬㠮»ॗ»ႃlk;斀Āct㠹㡍ɯ㠿\0\0㡊rnĀ;e㡅㡆挜r»㡆op;挏ri;旸Āal㡖㡚cr;䅫肻¨͉Āgp㡢㡦on;䅳f;쀀𝕦̀adhlsuᅋ㡸㡽፲㢑㢠ownáᎳarpoonĀlr㢈㢌efô㠭ighô㠯iƀ;hl㢙㢚㢜䏅»ᏺon»㢚parrows;懈ƀcit㢰㣄㣈ɯ㢶\0\0㣁rnĀ;e㢼㢽挝r»㢽op;挎ng;䅯ri;旹cr;쀀𝓊ƀdir㣙㣝㣢ot;拰lde;䅩iĀ;f㜰㣨»᠓Āam㣯㣲rò㢨l耻ü䃼angle;榧ހABDacdeflnoprsz㤜㤟㤩㤭㦵㦸㦽㧟㧤㧨㧳㧹㧽㨁㨠ròϷarĀ;v㤦㤧櫨;櫩asèϡĀnr㤲㤷grt;榜΀eknprst㓣㥆㥋㥒㥝㥤㦖appá␕othinçẖƀhir㓫⻈㥙opô⾵Ā;hᎷ㥢ïㆍĀiu㥩㥭gmá㎳Ābp㥲㦄setneqĀ;q㥽㦀쀀⊊︀;쀀⫋︀setneqĀ;q㦏㦒쀀⊋︀;쀀⫌︀Āhr㦛㦟etá㚜iangleĀlr㦪㦯eft»थight»ၑy;䐲ash»ံƀelr㧄㧒㧗ƀ;beⷪ㧋㧏ar;抻q;扚lip;拮Ābt㧜ᑨaòᑩr;쀀𝔳tré㦮suĀbp㧯㧱»ജ»൙pf;쀀𝕧roð໻tré㦴Ācu㨆㨋r;쀀𝓋Ābp㨐㨘nĀEe㦀㨖»㥾nĀEe㦒㨞»㦐igzag;榚΀cefoprs㨶㨻㩖㩛㩔㩡㩪irc;䅵Ādi㩀㩑Ābg㩅㩉ar;機eĀ;qᗺ㩏;扙erp;愘r;쀀𝔴pf;쀀𝕨Ā;eᑹ㩦atèᑹcr;쀀𝓌ૣណ㪇\0㪋\0㪐㪛\0\0㪝㪨㪫㪯\0\0㫃㫎\0㫘ៜ៟tré៑r;쀀𝔵ĀAa㪔㪗ròσrò৶;䎾ĀAa㪡㪤ròθrò৫að✓is;拻ƀdptឤ㪵㪾Āfl㪺ឩ;쀀𝕩imåឲĀAa㫇㫊ròώròਁĀcq㫒ីr;쀀𝓍Āpt៖㫜ré។Ѐacefiosu㫰㫽㬈㬌㬑㬕㬛㬡cĀuy㫶㫻te耻ý䃽;䑏Āiy㬂㬆rc;䅷;䑋n耻¥䂥r;쀀𝔶cy;䑗pf;쀀𝕪cr;쀀𝓎Ācm㬦㬩y;䑎l耻ÿ䃿Ԁacdefhiosw㭂㭈㭔㭘㭤㭩㭭㭴㭺㮀cute;䅺Āay㭍㭒ron;䅾;䐷ot;䅼Āet㭝㭡træᕟa;䎶r;쀀𝔷cy;䐶grarr;懝pf;쀀𝕫cr;쀀𝓏Ājn㮅㮇;怍j;怌'.split("").map(e=>e.charCodeAt(0))),Unt=new Uint16Array("Ȁaglq	\x1Bɭ\0\0p;䀦os;䀧t;䀾t;䀼uot;䀢".split("").map(e=>e.charCodeAt(0)));var s8;const znt=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]),Vnt=(s8=String.fromCodePoint)!==null&&s8!==void 0?s8:function(e){let t="";return e>65535&&(e-=65536,t+=String.fromCharCode(e>>>10&1023|55296),e=56320|e&1023),t+=String.fromCharCode(e),t};function Hnt(e){var t;return e>=55296&&e<=57343||e>1114111?65533:(t=znt.get(e))!==null&&t!==void 0?t:e}var Zs;(function(e){e[e.NUM=35]="NUM",e[e.SEMI=59]="SEMI",e[e.EQUALS=61]="EQUALS",e[e.ZERO=48]="ZERO",e[e.NINE=57]="NINE",e[e.LOWER_A=97]="LOWER_A",e[e.LOWER_F=102]="LOWER_F",e[e.LOWER_X=120]="LOWER_X",e[e.LOWER_Z=122]="LOWER_Z",e[e.UPPER_A=65]="UPPER_A",e[e.UPPER_F=70]="UPPER_F",e[e.UPPER_Z=90]="UPPER_Z"})(Zs||(Zs={}));const qnt=32;var th;(function(e){e[e.VALUE_LENGTH=49152]="VALUE_LENGTH",e[e.BRANCH_LENGTH=16256]="BRANCH_LENGTH",e[e.JUMP_TABLE=127]="JUMP_TABLE"})(th||(th={}));function w7(e){return e>=Zs.ZERO&&e<=Zs.NINE}function Wnt(e){return e>=Zs.UPPER_A&&e<=Zs.UPPER_F||e>=Zs.LOWER_A&&e<=Zs.LOWER_F}function Gnt(e){return e>=Zs.UPPER_A&&e<=Zs.UPPER_Z||e>=Zs.LOWER_A&&e<=Zs.LOWER_Z||w7(e)}function Ynt(e){return e===Zs.EQUALS||Gnt(e)}var Ws;(function(e){e[e.EntityStart=0]="EntityStart",e[e.NumericStart=1]="NumericStart",e[e.NumericDecimal=2]="NumericDecimal",e[e.NumericHex=3]="NumericHex",e[e.NamedEntity=4]="NamedEntity"})(Ws||(Ws={}));var Vv;(function(e){e[e.Legacy=0]="Legacy",e[e.Strict=1]="Strict",e[e.Attribute=2]="Attribute"})(Vv||(Vv={}));class Knt{constructor(t,n,r){this.decodeTree=t,this.emitCodePoint=n,this.errors=r,this.state=Ws.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=Vv.Strict}startEntity(t){this.decodeMode=t,this.state=Ws.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1}write(t,n){switch(this.state){case Ws.EntityStart:return t.charCodeAt(n)===Zs.NUM?(this.state=Ws.NumericStart,this.consumed+=1,this.stateNumericStart(t,n+1)):(this.state=Ws.NamedEntity,this.stateNamedEntity(t,n));case Ws.NumericStart:return this.stateNumericStart(t,n);case Ws.NumericDecimal:return this.stateNumericDecimal(t,n);case Ws.NumericHex:return this.stateNumericHex(t,n);case Ws.NamedEntity:return this.stateNamedEntity(t,n)}}stateNumericStart(t,n){return n>=t.length?-1:(t.charCodeAt(n)|qnt)===Zs.LOWER_X?(this.state=Ws.NumericHex,this.consumed+=1,this.stateNumericHex(t,n+1)):(this.state=Ws.NumericDecimal,this.stateNumericDecimal(t,n))}addToNumericResult(t,n,r,i){if(n!==r){const s=r-n;this.result=this.result*Math.pow(i,s)+parseInt(t.substr(n,s),i),this.consumed+=s}}stateNumericHex(t,n){const r=n;for(;n<t.length;){const i=t.charCodeAt(n);if(w7(i)||Wnt(i))n+=1;else return this.addToNumericResult(t,r,n,16),this.emitNumericEntity(i,3)}return this.addToNumericResult(t,r,n,16),-1}stateNumericDecimal(t,n){const r=n;for(;n<t.length;){const i=t.charCodeAt(n);if(w7(i))n+=1;else return this.addToNumericResult(t,r,n,10),this.emitNumericEntity(i,2)}return this.addToNumericResult(t,r,n,10),-1}emitNumericEntity(t,n){var r;if(this.consumed<=n)return(r=this.errors)===null||r===void 0||r.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(t===Zs.SEMI)this.consumed+=1;else if(this.decodeMode===Vv.Strict)return 0;return this.emitCodePoint(Hnt(this.result),this.consumed),this.errors&&(t!==Zs.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed}stateNamedEntity(t,n){const{decodeTree:r}=this;let i=r[this.treeIndex],s=(i&th.VALUE_LENGTH)>>14;for(;n<t.length;n++,this.excess++){const o=t.charCodeAt(n);if(this.treeIndex=MEe(r,i,this.treeIndex+Math.max(1,s),o),this.treeIndex<0)return this.result===0||this.decodeMode===Vv.Attribute&&(s===0||Ynt(o))?0:this.emitNotTerminatedNamedEntity();if(i=r[this.treeIndex],s=(i&th.VALUE_LENGTH)>>14,s!==0){if(o===Zs.SEMI)return this.emitNamedEntityData(this.treeIndex,s,this.consumed+this.excess);this.decodeMode!==Vv.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1}emitNotTerminatedNamedEntity(){var t;const{result:n,decodeTree:r}=this,i=(r[n]&th.VALUE_LENGTH)>>14;return this.emitNamedEntityData(n,i,this.consumed),(t=this.errors)===null||t===void 0||t.missingSemicolonAfterCharacterReference(),this.consumed}emitNamedEntityData(t,n,r){const{decodeTree:i}=this;return this.emitCodePoint(n===1?i[t]&~th.VALUE_LENGTH:i[t+1],r),n===3&&this.emitCodePoint(i[t+2],r),r}end(){var t;switch(this.state){case Ws.NamedEntity:return this.result!==0&&(this.decodeMode!==Vv.Attribute||this.result===this.treeIndex)?this.emitNotTerminatedNamedEntity():0;case Ws.NumericDecimal:return this.emitNumericEntity(0,2);case Ws.NumericHex:return this.emitNumericEntity(0,3);case Ws.NumericStart:return(t=this.errors)===null||t===void 0||t.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case Ws.EntityStart:return 0}}}function $Ee(e){let t="";const n=new Knt(e,r=>t+=Vnt(r));return function(i,s){let o=0,a=0;for(;(a=i.indexOf("&",a))>=0;){t+=i.slice(o,a),n.startEntity(s);const l=n.write(i,a+1);if(l<0){o=a+n.end();break}o=a+l,a=l===0?o+1:o}const u=t+i.slice(o);return t="",u}}function MEe(e,t,n,r){const i=(t&th.BRANCH_LENGTH)>>7,s=t&th.JUMP_TABLE;if(i===0)return s!==0&&r===s?n:-1;if(s){const u=r-s;return u<0||u>=i?-1:e[n+u]-1}let o=n,a=o+i-1;for(;o<=a;){const u=o+a>>>1,l=e[u];if(l<r)o=u+1;else if(l>r)a=u-1;else return e[u+i]}return-1}$Ee(Sg);$Ee(Unt);var Fe;(function(e){e.HTML="http://www.w3.org/1999/xhtml",e.MATHML="http://www.w3.org/1998/Math/MathML",e.SVG="http://www.w3.org/2000/svg",e.XLINK="http://www.w3.org/1999/xlink",e.XML="http://www.w3.org/XML/1998/namespace",e.XMLNS="http://www.w3.org/2000/xmlns/"})(Fe=Fe||(Fe={}));var E0;(function(e){e.TYPE="type",e.ACTION="action",e.ENCODING="encoding",e.PROMPT="prompt",e.NAME="name",e.COLOR="color",e.FACE="face",e.SIZE="size"})(E0=E0||(E0={}));var vl;(function(e){e.NO_QUIRKS="no-quirks",e.QUIRKS="quirks",e.LIMITED_QUIRKS="limited-quirks"})(vl=vl||(vl={}));var Ee;(function(e){e.A="a",e.ADDRESS="address",e.ANNOTATION_XML="annotation-xml",e.APPLET="applet",e.AREA="area",e.ARTICLE="article",e.ASIDE="aside",e.B="b",e.BASE="base",e.BASEFONT="basefont",e.BGSOUND="bgsound",e.BIG="big",e.BLOCKQUOTE="blockquote",e.BODY="body",e.BR="br",e.BUTTON="button",e.CAPTION="caption",e.CENTER="center",e.CODE="code",e.COL="col",e.COLGROUP="colgroup",e.DD="dd",e.DESC="desc",e.DETAILS="details",e.DIALOG="dialog",e.DIR="dir",e.DIV="div",e.DL="dl",e.DT="dt",e.EM="em",e.EMBED="embed",e.FIELDSET="fieldset",e.FIGCAPTION="figcaption",e.FIGURE="figure",e.FONT="font",e.FOOTER="footer",e.FOREIGN_OBJECT="foreignObject",e.FORM="form",e.FRAME="frame",e.FRAMESET="frameset",e.H1="h1",e.H2="h2",e.H3="h3",e.H4="h4",e.H5="h5",e.H6="h6",e.HEAD="head",e.HEADER="header",e.HGROUP="hgroup",e.HR="hr",e.HTML="html",e.I="i",e.IMG="img",e.IMAGE="image",e.INPUT="input",e.IFRAME="iframe",e.KEYGEN="keygen",e.LABEL="label",e.LI="li",e.LINK="link",e.LISTING="listing",e.MAIN="main",e.MALIGNMARK="malignmark",e.MARQUEE="marquee",e.MATH="math",e.MENU="menu",e.META="meta",e.MGLYPH="mglyph",e.MI="mi",e.MO="mo",e.MN="mn",e.MS="ms",e.MTEXT="mtext",e.NAV="nav",e.NOBR="nobr",e.NOFRAMES="noframes",e.NOEMBED="noembed",e.NOSCRIPT="noscript",e.OBJECT="object",e.OL="ol",e.OPTGROUP="optgroup",e.OPTION="option",e.P="p",e.PARAM="param",e.PLAINTEXT="plaintext",e.PRE="pre",e.RB="rb",e.RP="rp",e.RT="rt",e.RTC="rtc",e.RUBY="ruby",e.S="s",e.SCRIPT="script",e.SECTION="section",e.SELECT="select",e.SOURCE="source",e.SMALL="small",e.SPAN="span",e.STRIKE="strike",e.STRONG="strong",e.STYLE="style",e.SUB="sub",e.SUMMARY="summary",e.SUP="sup",e.TABLE="table",e.TBODY="tbody",e.TEMPLATE="template",e.TEXTAREA="textarea",e.TFOOT="tfoot",e.TD="td",e.TH="th",e.THEAD="thead",e.TITLE="title",e.TR="tr",e.TRACK="track",e.TT="tt",e.U="u",e.UL="ul",e.SVG="svg",e.VAR="var",e.WBR="wbr",e.XMP="xmp"})(Ee=Ee||(Ee={}));var R;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.A=1]="A",e[e.ADDRESS=2]="ADDRESS",e[e.ANNOTATION_XML=3]="ANNOTATION_XML",e[e.APPLET=4]="APPLET",e[e.AREA=5]="AREA",e[e.ARTICLE=6]="ARTICLE",e[e.ASIDE=7]="ASIDE",e[e.B=8]="B",e[e.BASE=9]="BASE",e[e.BASEFONT=10]="BASEFONT",e[e.BGSOUND=11]="BGSOUND",e[e.BIG=12]="BIG",e[e.BLOCKQUOTE=13]="BLOCKQUOTE",e[e.BODY=14]="BODY",e[e.BR=15]="BR",e[e.BUTTON=16]="BUTTON",e[e.CAPTION=17]="CAPTION",e[e.CENTER=18]="CENTER",e[e.CODE=19]="CODE",e[e.COL=20]="COL",e[e.COLGROUP=21]="COLGROUP",e[e.DD=22]="DD",e[e.DESC=23]="DESC",e[e.DETAILS=24]="DETAILS",e[e.DIALOG=25]="DIALOG",e[e.DIR=26]="DIR",e[e.DIV=27]="DIV",e[e.DL=28]="DL",e[e.DT=29]="DT",e[e.EM=30]="EM",e[e.EMBED=31]="EMBED",e[e.FIELDSET=32]="FIELDSET",e[e.FIGCAPTION=33]="FIGCAPTION",e[e.FIGURE=34]="FIGURE",e[e.FONT=35]="FONT",e[e.FOOTER=36]="FOOTER",e[e.FOREIGN_OBJECT=37]="FOREIGN_OBJECT",e[e.FORM=38]="FORM",e[e.FRAME=39]="FRAME",e[e.FRAMESET=40]="FRAMESET",e[e.H1=41]="H1",e[e.H2=42]="H2",e[e.H3=43]="H3",e[e.H4=44]="H4",e[e.H5=45]="H5",e[e.H6=46]="H6",e[e.HEAD=47]="HEAD",e[e.HEADER=48]="HEADER",e[e.HGROUP=49]="HGROUP",e[e.HR=50]="HR",e[e.HTML=51]="HTML",e[e.I=52]="I",e[e.IMG=53]="IMG",e[e.IMAGE=54]="IMAGE",e[e.INPUT=55]="INPUT",e[e.IFRAME=56]="IFRAME",e[e.KEYGEN=57]="KEYGEN",e[e.LABEL=58]="LABEL",e[e.LI=59]="LI",e[e.LINK=60]="LINK",e[e.LISTING=61]="LISTING",e[e.MAIN=62]="MAIN",e[e.MALIGNMARK=63]="MALIGNMARK",e[e.MARQUEE=64]="MARQUEE",e[e.MATH=65]="MATH",e[e.MENU=66]="MENU",e[e.META=67]="META",e[e.MGLYPH=68]="MGLYPH",e[e.MI=69]="MI",e[e.MO=70]="MO",e[e.MN=71]="MN",e[e.MS=72]="MS",e[e.MTEXT=73]="MTEXT",e[e.NAV=74]="NAV",e[e.NOBR=75]="NOBR",e[e.NOFRAMES=76]="NOFRAMES",e[e.NOEMBED=77]="NOEMBED",e[e.NOSCRIPT=78]="NOSCRIPT",e[e.OBJECT=79]="OBJECT",e[e.OL=80]="OL",e[e.OPTGROUP=81]="OPTGROUP",e[e.OPTION=82]="OPTION",e[e.P=83]="P",e[e.PARAM=84]="PARAM",e[e.PLAINTEXT=85]="PLAINTEXT",e[e.PRE=86]="PRE",e[e.RB=87]="RB",e[e.RP=88]="RP",e[e.RT=89]="RT",e[e.RTC=90]="RTC",e[e.RUBY=91]="RUBY",e[e.S=92]="S",e[e.SCRIPT=93]="SCRIPT",e[e.SECTION=94]="SECTION",e[e.SELECT=95]="SELECT",e[e.SOURCE=96]="SOURCE",e[e.SMALL=97]="SMALL",e[e.SPAN=98]="SPAN",e[e.STRIKE=99]="STRIKE",e[e.STRONG=100]="STRONG",e[e.STYLE=101]="STYLE",e[e.SUB=102]="SUB",e[e.SUMMARY=103]="SUMMARY",e[e.SUP=104]="SUP",e[e.TABLE=105]="TABLE",e[e.TBODY=106]="TBODY",e[e.TEMPLATE=107]="TEMPLATE",e[e.TEXTAREA=108]="TEXTAREA",e[e.TFOOT=109]="TFOOT",e[e.TD=110]="TD",e[e.TH=111]="TH",e[e.THEAD=112]="THEAD",e[e.TITLE=113]="TITLE",e[e.TR=114]="TR",e[e.TRACK=115]="TRACK",e[e.TT=116]="TT",e[e.U=117]="U",e[e.UL=118]="UL",e[e.SVG=119]="SVG",e[e.VAR=120]="VAR",e[e.WBR=121]="WBR",e[e.XMP=122]="XMP"})(R=R||(R={}));const Xnt=new Map([[Ee.A,R.A],[Ee.ADDRESS,R.ADDRESS],[Ee.ANNOTATION_XML,R.ANNOTATION_XML],[Ee.APPLET,R.APPLET],[Ee.AREA,R.AREA],[Ee.ARTICLE,R.ARTICLE],[Ee.ASIDE,R.ASIDE],[Ee.B,R.B],[Ee.BASE,R.BASE],[Ee.BASEFONT,R.BASEFONT],[Ee.BGSOUND,R.BGSOUND],[Ee.BIG,R.BIG],[Ee.BLOCKQUOTE,R.BLOCKQUOTE],[Ee.BODY,R.BODY],[Ee.BR,R.BR],[Ee.BUTTON,R.BUTTON],[Ee.CAPTION,R.CAPTION],[Ee.CENTER,R.CENTER],[Ee.CODE,R.CODE],[Ee.COL,R.COL],[Ee.COLGROUP,R.COLGROUP],[Ee.DD,R.DD],[Ee.DESC,R.DESC],[Ee.DETAILS,R.DETAILS],[Ee.DIALOG,R.DIALOG],[Ee.DIR,R.DIR],[Ee.DIV,R.DIV],[Ee.DL,R.DL],[Ee.DT,R.DT],[Ee.EM,R.EM],[Ee.EMBED,R.EMBED],[Ee.FIELDSET,R.FIELDSET],[Ee.FIGCAPTION,R.FIGCAPTION],[Ee.FIGURE,R.FIGURE],[Ee.FONT,R.FONT],[Ee.FOOTER,R.FOOTER],[Ee.FOREIGN_OBJECT,R.FOREIGN_OBJECT],[Ee.FORM,R.FORM],[Ee.FRAME,R.FRAME],[Ee.FRAMESET,R.FRAMESET],[Ee.H1,R.H1],[Ee.H2,R.H2],[Ee.H3,R.H3],[Ee.H4,R.H4],[Ee.H5,R.H5],[Ee.H6,R.H6],[Ee.HEAD,R.HEAD],[Ee.HEADER,R.HEADER],[Ee.HGROUP,R.HGROUP],[Ee.HR,R.HR],[Ee.HTML,R.HTML],[Ee.I,R.I],[Ee.IMG,R.IMG],[Ee.IMAGE,R.IMAGE],[Ee.INPUT,R.INPUT],[Ee.IFRAME,R.IFRAME],[Ee.KEYGEN,R.KEYGEN],[Ee.LABEL,R.LABEL],[Ee.LI,R.LI],[Ee.LINK,R.LINK],[Ee.LISTING,R.LISTING],[Ee.MAIN,R.MAIN],[Ee.MALIGNMARK,R.MALIGNMARK],[Ee.MARQUEE,R.MARQUEE],[Ee.MATH,R.MATH],[Ee.MENU,R.MENU],[Ee.META,R.META],[Ee.MGLYPH,R.MGLYPH],[Ee.MI,R.MI],[Ee.MO,R.MO],[Ee.MN,R.MN],[Ee.MS,R.MS],[Ee.MTEXT,R.MTEXT],[Ee.NAV,R.NAV],[Ee.NOBR,R.NOBR],[Ee.NOFRAMES,R.NOFRAMES],[Ee.NOEMBED,R.NOEMBED],[Ee.NOSCRIPT,R.NOSCRIPT],[Ee.OBJECT,R.OBJECT],[Ee.OL,R.OL],[Ee.OPTGROUP,R.OPTGROUP],[Ee.OPTION,R.OPTION],[Ee.P,R.P],[Ee.PARAM,R.PARAM],[Ee.PLAINTEXT,R.PLAINTEXT],[Ee.PRE,R.PRE],[Ee.RB,R.RB],[Ee.RP,R.RP],[Ee.RT,R.RT],[Ee.RTC,R.RTC],[Ee.RUBY,R.RUBY],[Ee.S,R.S],[Ee.SCRIPT,R.SCRIPT],[Ee.SECTION,R.SECTION],[Ee.SELECT,R.SELECT],[Ee.SOURCE,R.SOURCE],[Ee.SMALL,R.SMALL],[Ee.SPAN,R.SPAN],[Ee.STRIKE,R.STRIKE],[Ee.STRONG,R.STRONG],[Ee.STYLE,R.STYLE],[Ee.SUB,R.SUB],[Ee.SUMMARY,R.SUMMARY],[Ee.SUP,R.SUP],[Ee.TABLE,R.TABLE],[Ee.TBODY,R.TBODY],[Ee.TEMPLATE,R.TEMPLATE],[Ee.TEXTAREA,R.TEXTAREA],[Ee.TFOOT,R.TFOOT],[Ee.TD,R.TD],[Ee.TH,R.TH],[Ee.THEAD,R.THEAD],[Ee.TITLE,R.TITLE],[Ee.TR,R.TR],[Ee.TRACK,R.TRACK],[Ee.TT,R.TT],[Ee.U,R.U],[Ee.UL,R.UL],[Ee.SVG,R.SVG],[Ee.VAR,R.VAR],[Ee.WBR,R.WBR],[Ee.XMP,R.XMP]]);function dS(e){var t;return(t=Xnt.get(e))!==null&&t!==void 0?t:R.UNKNOWN}const Je=R,Qnt={[Fe.HTML]:new Set([Je.ADDRESS,Je.APPLET,Je.AREA,Je.ARTICLE,Je.ASIDE,Je.BASE,Je.BASEFONT,Je.BGSOUND,Je.BLOCKQUOTE,Je.BODY,Je.BR,Je.BUTTON,Je.CAPTION,Je.CENTER,Je.COL,Je.COLGROUP,Je.DD,Je.DETAILS,Je.DIR,Je.DIV,Je.DL,Je.DT,Je.EMBED,Je.FIELDSET,Je.FIGCAPTION,Je.FIGURE,Je.FOOTER,Je.FORM,Je.FRAME,Je.FRAMESET,Je.H1,Je.H2,Je.H3,Je.H4,Je.H5,Je.H6,Je.HEAD,Je.HEADER,Je.HGROUP,Je.HR,Je.HTML,Je.IFRAME,Je.IMG,Je.INPUT,Je.LI,Je.LINK,Je.LISTING,Je.MAIN,Je.MARQUEE,Je.MENU,Je.META,Je.NAV,Je.NOEMBED,Je.NOFRAMES,Je.NOSCRIPT,Je.OBJECT,Je.OL,Je.P,Je.PARAM,Je.PLAINTEXT,Je.PRE,Je.SCRIPT,Je.SECTION,Je.SELECT,Je.SOURCE,Je.STYLE,Je.SUMMARY,Je.TABLE,Je.TBODY,Je.TD,Je.TEMPLATE,Je.TEXTAREA,Je.TFOOT,Je.TH,Je.THEAD,Je.TITLE,Je.TR,Je.TRACK,Je.UL,Je.WBR,Je.XMP]),[Fe.MATHML]:new Set([Je.MI,Je.MO,Je.MN,Je.MS,Je.MTEXT,Je.ANNOTATION_XML]),[Fe.SVG]:new Set([Je.TITLE,Je.FOREIGN_OBJECT,Je.DESC]),[Fe.XLINK]:new Set,[Fe.XML]:new Set,[Fe.XMLNS]:new Set};function LEe(e){return e===Je.H1||e===Je.H2||e===Je.H3||e===Je.H4||e===Je.H5||e===Je.H6}Ee.STYLE,Ee.SCRIPT,Ee.XMP,Ee.IFRAME,Ee.NOEMBED,Ee.NOFRAMES,Ee.PLAINTEXT;const Jnt=new Map([[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]);var J;(function(e){e[e.DATA=0]="DATA",e[e.RCDATA=1]="RCDATA",e[e.RAWTEXT=2]="RAWTEXT",e[e.SCRIPT_DATA=3]="SCRIPT_DATA",e[e.PLAINTEXT=4]="PLAINTEXT",e[e.TAG_OPEN=5]="TAG_OPEN",e[e.END_TAG_OPEN=6]="END_TAG_OPEN",e[e.TAG_NAME=7]="TAG_NAME",e[e.RCDATA_LESS_THAN_SIGN=8]="RCDATA_LESS_THAN_SIGN",e[e.RCDATA_END_TAG_OPEN=9]="RCDATA_END_TAG_OPEN",e[e.RCDATA_END_TAG_NAME=10]="RCDATA_END_TAG_NAME",e[e.RAWTEXT_LESS_THAN_SIGN=11]="RAWTEXT_LESS_THAN_SIGN",e[e.RAWTEXT_END_TAG_OPEN=12]="RAWTEXT_END_TAG_OPEN",e[e.RAWTEXT_END_TAG_NAME=13]="RAWTEXT_END_TAG_NAME",e[e.SCRIPT_DATA_LESS_THAN_SIGN=14]="SCRIPT_DATA_LESS_THAN_SIGN",e[e.SCRIPT_DATA_END_TAG_OPEN=15]="SCRIPT_DATA_END_TAG_OPEN",e[e.SCRIPT_DATA_END_TAG_NAME=16]="SCRIPT_DATA_END_TAG_NAME",e[e.SCRIPT_DATA_ESCAPE_START=17]="SCRIPT_DATA_ESCAPE_START",e[e.SCRIPT_DATA_ESCAPE_START_DASH=18]="SCRIPT_DATA_ESCAPE_START_DASH",e[e.SCRIPT_DATA_ESCAPED=19]="SCRIPT_DATA_ESCAPED",e[e.SCRIPT_DATA_ESCAPED_DASH=20]="SCRIPT_DATA_ESCAPED_DASH",e[e.SCRIPT_DATA_ESCAPED_DASH_DASH=21]="SCRIPT_DATA_ESCAPED_DASH_DASH",e[e.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN=22]="SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN",e[e.SCRIPT_DATA_ESCAPED_END_TAG_OPEN=23]="SCRIPT_DATA_ESCAPED_END_TAG_OPEN",e[e.SCRIPT_DATA_ESCAPED_END_TAG_NAME=24]="SCRIPT_DATA_ESCAPED_END_TAG_NAME",e[e.SCRIPT_DATA_DOUBLE_ESCAPE_START=25]="SCRIPT_DATA_DOUBLE_ESCAPE_START",e[e.SCRIPT_DATA_DOUBLE_ESCAPED=26]="SCRIPT_DATA_DOUBLE_ESCAPED",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_DASH=27]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH=28]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN=29]="SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN",e[e.SCRIPT_DATA_DOUBLE_ESCAPE_END=30]="SCRIPT_DATA_DOUBLE_ESCAPE_END",e[e.BEFORE_ATTRIBUTE_NAME=31]="BEFORE_ATTRIBUTE_NAME",e[e.ATTRIBUTE_NAME=32]="ATTRIBUTE_NAME",e[e.AFTER_ATTRIBUTE_NAME=33]="AFTER_ATTRIBUTE_NAME",e[e.BEFORE_ATTRIBUTE_VALUE=34]="BEFORE_ATTRIBUTE_VALUE",e[e.ATTRIBUTE_VALUE_DOUBLE_QUOTED=35]="ATTRIBUTE_VALUE_DOUBLE_QUOTED",e[e.ATTRIBUTE_VALUE_SINGLE_QUOTED=36]="ATTRIBUTE_VALUE_SINGLE_QUOTED",e[e.ATTRIBUTE_VALUE_UNQUOTED=37]="ATTRIBUTE_VALUE_UNQUOTED",e[e.AFTER_ATTRIBUTE_VALUE_QUOTED=38]="AFTER_ATTRIBUTE_VALUE_QUOTED",e[e.SELF_CLOSING_START_TAG=39]="SELF_CLOSING_START_TAG",e[e.BOGUS_COMMENT=40]="BOGUS_COMMENT",e[e.MARKUP_DECLARATION_OPEN=41]="MARKUP_DECLARATION_OPEN",e[e.COMMENT_START=42]="COMMENT_START",e[e.COMMENT_START_DASH=43]="COMMENT_START_DASH",e[e.COMMENT=44]="COMMENT",e[e.COMMENT_LESS_THAN_SIGN=45]="COMMENT_LESS_THAN_SIGN",e[e.COMMENT_LESS_THAN_SIGN_BANG=46]="COMMENT_LESS_THAN_SIGN_BANG",e[e.COMMENT_LESS_THAN_SIGN_BANG_DASH=47]="COMMENT_LESS_THAN_SIGN_BANG_DASH",e[e.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH=48]="COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH",e[e.COMMENT_END_DASH=49]="COMMENT_END_DASH",e[e.COMMENT_END=50]="COMMENT_END",e[e.COMMENT_END_BANG=51]="COMMENT_END_BANG",e[e.DOCTYPE=52]="DOCTYPE",e[e.BEFORE_DOCTYPE_NAME=53]="BEFORE_DOCTYPE_NAME",e[e.DOCTYPE_NAME=54]="DOCTYPE_NAME",e[e.AFTER_DOCTYPE_NAME=55]="AFTER_DOCTYPE_NAME",e[e.AFTER_DOCTYPE_PUBLIC_KEYWORD=56]="AFTER_DOCTYPE_PUBLIC_KEYWORD",e[e.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER=57]="BEFORE_DOCTYPE_PUBLIC_IDENTIFIER",e[e.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED=58]="DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED",e[e.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED=59]="DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED",e[e.AFTER_DOCTYPE_PUBLIC_IDENTIFIER=60]="AFTER_DOCTYPE_PUBLIC_IDENTIFIER",e[e.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS=61]="BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS",e[e.AFTER_DOCTYPE_SYSTEM_KEYWORD=62]="AFTER_DOCTYPE_SYSTEM_KEYWORD",e[e.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER=63]="BEFORE_DOCTYPE_SYSTEM_IDENTIFIER",e[e.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED=64]="DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED",e[e.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED=65]="DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED",e[e.AFTER_DOCTYPE_SYSTEM_IDENTIFIER=66]="AFTER_DOCTYPE_SYSTEM_IDENTIFIER",e[e.BOGUS_DOCTYPE=67]="BOGUS_DOCTYPE",e[e.CDATA_SECTION=68]="CDATA_SECTION",e[e.CDATA_SECTION_BRACKET=69]="CDATA_SECTION_BRACKET",e[e.CDATA_SECTION_END=70]="CDATA_SECTION_END",e[e.CHARACTER_REFERENCE=71]="CHARACTER_REFERENCE",e[e.NAMED_CHARACTER_REFERENCE=72]="NAMED_CHARACTER_REFERENCE",e[e.AMBIGUOUS_AMPERSAND=73]="AMBIGUOUS_AMPERSAND",e[e.NUMERIC_CHARACTER_REFERENCE=74]="NUMERIC_CHARACTER_REFERENCE",e[e.HEXADEMICAL_CHARACTER_REFERENCE_START=75]="HEXADEMICAL_CHARACTER_REFERENCE_START",e[e.HEXADEMICAL_CHARACTER_REFERENCE=76]="HEXADEMICAL_CHARACTER_REFERENCE",e[e.DECIMAL_CHARACTER_REFERENCE=77]="DECIMAL_CHARACTER_REFERENCE",e[e.NUMERIC_CHARACTER_REFERENCE_END=78]="NUMERIC_CHARACTER_REFERENCE_END"})(J||(J={}));const os={DATA:J.DATA,RCDATA:J.RCDATA,RAWTEXT:J.RAWTEXT,SCRIPT_DATA:J.SCRIPT_DATA,PLAINTEXT:J.PLAINTEXT,CDATA_SECTION:J.CDATA_SECTION};function _C(e){return e>=X.DIGIT_0&&e<=X.DIGIT_9}function _2(e){return e>=X.LATIN_CAPITAL_A&&e<=X.LATIN_CAPITAL_Z}function Znt(e){return e>=X.LATIN_SMALL_A&&e<=X.LATIN_SMALL_Z}function Tg(e){return Znt(e)||_2(e)}function E7(e){return Tg(e)||_C(e)}function FEe(e){return e>=X.LATIN_CAPITAL_A&&e<=X.LATIN_CAPITAL_F}function jEe(e){return e>=X.LATIN_SMALL_A&&e<=X.LATIN_SMALL_F}function ert(e){return _C(e)||FEe(e)||jEe(e)}function DN(e){return e+32}function BEe(e){return e===X.SPACE||e===X.LINE_FEED||e===X.TABULATION||e===X.FORM_FEED}function trt(e){return e===X.EQUALS_SIGN||E7(e)}function pue(e){return BEe(e)||e===X.SOLIDUS||e===X.GREATER_THAN_SIGN}class nrt{constructor(t,n){this.options=t,this.handler=n,this.paused=!1,this.inLoop=!1,this.inForeignNode=!1,this.lastStartTagName="",this.active=!1,this.state=J.DATA,this.returnState=J.DATA,this.charRefCode=-1,this.consumedAfterSnapshot=-1,this.currentCharacterToken=null,this.currentToken=null,this.currentAttr={name:"",value:""},this.preprocessor=new Bnt(n),this.currentLocation=this.getCurrentLocation(-1)}_err(t){var n,r;(r=(n=this.handler).onParseError)===null||r===void 0||r.call(n,this.preprocessor.getError(t))}getCurrentLocation(t){return this.options.sourceCodeLocationInfo?{startLine:this.preprocessor.line,startCol:this.preprocessor.col-t,startOffset:this.preprocessor.offset-t,endLine:-1,endCol:-1,endOffset:-1}:null}_runParsingLoop(){if(!this.inLoop){for(this.inLoop=!0;this.active&&!this.paused;){this.consumedAfterSnapshot=0;const t=this._consume();this._ensureHibernation()||this._callState(t)}this.inLoop=!1}}pause(){this.paused=!0}resume(t){if(!this.paused)throw new Error("Parser was already resumed");this.paused=!1,!this.inLoop&&(this._runParsingLoop(),this.paused||t==null||t())}write(t,n,r){this.active=!0,this.preprocessor.write(t,n),this._runParsingLoop(),this.paused||r==null||r()}insertHtmlAtCurrentPos(t){this.active=!0,this.preprocessor.insertHtmlAtCurrentPos(t),this._runParsingLoop()}_ensureHibernation(){return this.preprocessor.endOfChunkHit?(this._unconsume(this.consumedAfterSnapshot),this.active=!1,!0):!1}_consume(){return this.consumedAfterSnapshot++,this.preprocessor.advance()}_unconsume(t){this.consumedAfterSnapshot-=t,this.preprocessor.retreat(t)}_reconsumeInState(t,n){this.state=t,this._callState(n)}_advanceBy(t){this.consumedAfterSnapshot+=t;for(let n=0;n<t;n++)this.preprocessor.advance()}_consumeSequenceIfMatch(t,n){return this.preprocessor.startsWith(t,n)?(this._advanceBy(t.length-1),!0):!1}_createStartTagToken(){this.currentToken={type:kn.START_TAG,tagName:"",tagID:R.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(1)}}_createEndTagToken(){this.currentToken={type:kn.END_TAG,tagName:"",tagID:R.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(2)}}_createCommentToken(t){this.currentToken={type:kn.COMMENT,data:"",location:this.getCurrentLocation(t)}}_createDoctypeToken(t){this.currentToken={type:kn.DOCTYPE,name:t,forceQuirks:!1,publicId:null,systemId:null,location:this.currentLocation}}_createCharacterToken(t,n){this.currentCharacterToken={type:t,chars:n,location:this.currentLocation}}_createAttr(t){this.currentAttr={name:t,value:""},this.currentLocation=this.getCurrentLocation(0)}_leaveAttrName(){var t,n;const r=this.currentToken;if(OEe(r,this.currentAttr.name)===null){if(r.attrs.push(this.currentAttr),r.location&&this.currentLocation){const i=(t=(n=r.location).attrs)!==null&&t!==void 0?t:n.attrs=Object.create(null);i[this.currentAttr.name]=this.currentLocation,this._leaveAttrValue()}}else this._err(Ne.duplicateAttribute)}_leaveAttrValue(){this.currentLocation&&(this.currentLocation.endLine=this.preprocessor.line,this.currentLocation.endCol=this.preprocessor.col,this.currentLocation.endOffset=this.preprocessor.offset)}prepareToken(t){this._emitCurrentCharacterToken(t.location),this.currentToken=null,t.location&&(t.location.endLine=this.preprocessor.line,t.location.endCol=this.preprocessor.col+1,t.location.endOffset=this.preprocessor.offset+1),this.currentLocation=this.getCurrentLocation(-1)}emitCurrentTagToken(){const t=this.currentToken;this.prepareToken(t),t.tagID=dS(t.tagName),t.type===kn.START_TAG?(this.lastStartTagName=t.tagName,this.handler.onStartTag(t)):(t.attrs.length>0&&this._err(Ne.endTagWithAttributes),t.selfClosing&&this._err(Ne.endTagWithTrailingSolidus),this.handler.onEndTag(t)),this.preprocessor.dropParsedChunk()}emitCurrentComment(t){this.prepareToken(t),this.handler.onComment(t),this.preprocessor.dropParsedChunk()}emitCurrentDoctype(t){this.prepareToken(t),this.handler.onDoctype(t),this.preprocessor.dropParsedChunk()}_emitCurrentCharacterToken(t){if(this.currentCharacterToken){switch(t&&this.currentCharacterToken.location&&(this.currentCharacterToken.location.endLine=t.startLine,this.currentCharacterToken.location.endCol=t.startCol,this.currentCharacterToken.location.endOffset=t.startOffset),this.currentCharacterToken.type){case kn.CHARACTER:{this.handler.onCharacter(this.currentCharacterToken);break}case kn.NULL_CHARACTER:{this.handler.onNullCharacter(this.currentCharacterToken);break}case kn.WHITESPACE_CHARACTER:{this.handler.onWhitespaceCharacter(this.currentCharacterToken);break}}this.currentCharacterToken=null}}_emitEOFToken(){const t=this.getCurrentLocation(0);t&&(t.endLine=t.startLine,t.endCol=t.startCol,t.endOffset=t.startOffset),this._emitCurrentCharacterToken(t),this.handler.onEof({type:kn.EOF,location:t}),this.active=!1}_appendCharToCurrentCharacterToken(t,n){if(this.currentCharacterToken)if(this.currentCharacterToken.type!==t)this.currentLocation=this.getCurrentLocation(0),this._emitCurrentCharacterToken(this.currentLocation),this.preprocessor.dropParsedChunk();else{this.currentCharacterToken.chars+=n;return}this._createCharacterToken(t,n)}_emitCodePoint(t){const n=BEe(t)?kn.WHITESPACE_CHARACTER:t===X.NULL?kn.NULL_CHARACTER:kn.CHARACTER;this._appendCharToCurrentCharacterToken(n,String.fromCodePoint(t))}_emitChars(t){this._appendCharToCurrentCharacterToken(kn.CHARACTER,t)}_matchNamedCharacterReference(t){let n=null,r=0,i=!1;for(let s=0,o=Sg[0];s>=0&&(s=MEe(Sg,o,s+1,t),!(s<0));t=this._consume()){r+=1,o=Sg[s];const a=o&th.VALUE_LENGTH;if(a){const u=(a>>14)-1;if(t!==X.SEMICOLON&&this._isCharacterReferenceInAttribute()&&trt(this.preprocessor.peek(1))?(n=[X.AMPERSAND],s+=u):(n=u===0?[Sg[s]&~th.VALUE_LENGTH]:u===1?[Sg[++s]]:[Sg[++s],Sg[++s]],r=0,i=t!==X.SEMICOLON),u===0){this._consume();break}}}return this._unconsume(r),i&&!this.preprocessor.endOfChunkHit&&this._err(Ne.missingSemicolonAfterCharacterReference),this._unconsume(1),n}_isCharacterReferenceInAttribute(){return this.returnState===J.ATTRIBUTE_VALUE_DOUBLE_QUOTED||this.returnState===J.ATTRIBUTE_VALUE_SINGLE_QUOTED||this.returnState===J.ATTRIBUTE_VALUE_UNQUOTED}_flushCodePointConsumedAsCharacterReference(t){this._isCharacterReferenceInAttribute()?this.currentAttr.value+=String.fromCodePoint(t):this._emitCodePoint(t)}_callState(t){switch(this.state){case J.DATA:{this._stateData(t);break}case J.RCDATA:{this._stateRcdata(t);break}case J.RAWTEXT:{this._stateRawtext(t);break}case J.SCRIPT_DATA:{this._stateScriptData(t);break}case J.PLAINTEXT:{this._statePlaintext(t);break}case J.TAG_OPEN:{this._stateTagOpen(t);break}case J.END_TAG_OPEN:{this._stateEndTagOpen(t);break}case J.TAG_NAME:{this._stateTagName(t);break}case J.RCDATA_LESS_THAN_SIGN:{this._stateRcdataLessThanSign(t);break}case J.RCDATA_END_TAG_OPEN:{this._stateRcdataEndTagOpen(t);break}case J.RCDATA_END_TAG_NAME:{this._stateRcdataEndTagName(t);break}case J.RAWTEXT_LESS_THAN_SIGN:{this._stateRawtextLessThanSign(t);break}case J.RAWTEXT_END_TAG_OPEN:{this._stateRawtextEndTagOpen(t);break}case J.RAWTEXT_END_TAG_NAME:{this._stateRawtextEndTagName(t);break}case J.SCRIPT_DATA_LESS_THAN_SIGN:{this._stateScriptDataLessThanSign(t);break}case J.SCRIPT_DATA_END_TAG_OPEN:{this._stateScriptDataEndTagOpen(t);break}case J.SCRIPT_DATA_END_TAG_NAME:{this._stateScriptDataEndTagName(t);break}case J.SCRIPT_DATA_ESCAPE_START:{this._stateScriptDataEscapeStart(t);break}case J.SCRIPT_DATA_ESCAPE_START_DASH:{this._stateScriptDataEscapeStartDash(t);break}case J.SCRIPT_DATA_ESCAPED:{this._stateScriptDataEscaped(t);break}case J.SCRIPT_DATA_ESCAPED_DASH:{this._stateScriptDataEscapedDash(t);break}case J.SCRIPT_DATA_ESCAPED_DASH_DASH:{this._stateScriptDataEscapedDashDash(t);break}case J.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN:{this._stateScriptDataEscapedLessThanSign(t);break}case J.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:{this._stateScriptDataEscapedEndTagOpen(t);break}case J.SCRIPT_DATA_ESCAPED_END_TAG_NAME:{this._stateScriptDataEscapedEndTagName(t);break}case J.SCRIPT_DATA_DOUBLE_ESCAPE_START:{this._stateScriptDataDoubleEscapeStart(t);break}case J.SCRIPT_DATA_DOUBLE_ESCAPED:{this._stateScriptDataDoubleEscaped(t);break}case J.SCRIPT_DATA_DOUBLE_ESCAPED_DASH:{this._stateScriptDataDoubleEscapedDash(t);break}case J.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH:{this._stateScriptDataDoubleEscapedDashDash(t);break}case J.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN:{this._stateScriptDataDoubleEscapedLessThanSign(t);break}case J.SCRIPT_DATA_DOUBLE_ESCAPE_END:{this._stateScriptDataDoubleEscapeEnd(t);break}case J.BEFORE_ATTRIBUTE_NAME:{this._stateBeforeAttributeName(t);break}case J.ATTRIBUTE_NAME:{this._stateAttributeName(t);break}case J.AFTER_ATTRIBUTE_NAME:{this._stateAfterAttributeName(t);break}case J.BEFORE_ATTRIBUTE_VALUE:{this._stateBeforeAttributeValue(t);break}case J.ATTRIBUTE_VALUE_DOUBLE_QUOTED:{this._stateAttributeValueDoubleQuoted(t);break}case J.ATTRIBUTE_VALUE_SINGLE_QUOTED:{this._stateAttributeValueSingleQuoted(t);break}case J.ATTRIBUTE_VALUE_UNQUOTED:{this._stateAttributeValueUnquoted(t);break}case J.AFTER_ATTRIBUTE_VALUE_QUOTED:{this._stateAfterAttributeValueQuoted(t);break}case J.SELF_CLOSING_START_TAG:{this._stateSelfClosingStartTag(t);break}case J.BOGUS_COMMENT:{this._stateBogusComment(t);break}case J.MARKUP_DECLARATION_OPEN:{this._stateMarkupDeclarationOpen(t);break}case J.COMMENT_START:{this._stateCommentStart(t);break}case J.COMMENT_START_DASH:{this._stateCommentStartDash(t);break}case J.COMMENT:{this._stateComment(t);break}case J.COMMENT_LESS_THAN_SIGN:{this._stateCommentLessThanSign(t);break}case J.COMMENT_LESS_THAN_SIGN_BANG:{this._stateCommentLessThanSignBang(t);break}case J.COMMENT_LESS_THAN_SIGN_BANG_DASH:{this._stateCommentLessThanSignBangDash(t);break}case J.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:{this._stateCommentLessThanSignBangDashDash(t);break}case J.COMMENT_END_DASH:{this._stateCommentEndDash(t);break}case J.COMMENT_END:{this._stateCommentEnd(t);break}case J.COMMENT_END_BANG:{this._stateCommentEndBang(t);break}case J.DOCTYPE:{this._stateDoctype(t);break}case J.BEFORE_DOCTYPE_NAME:{this._stateBeforeDoctypeName(t);break}case J.DOCTYPE_NAME:{this._stateDoctypeName(t);break}case J.AFTER_DOCTYPE_NAME:{this._stateAfterDoctypeName(t);break}case J.AFTER_DOCTYPE_PUBLIC_KEYWORD:{this._stateAfterDoctypePublicKeyword(t);break}case J.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER:{this._stateBeforeDoctypePublicIdentifier(t);break}case J.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED:{this._stateDoctypePublicIdentifierDoubleQuoted(t);break}case J.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED:{this._stateDoctypePublicIdentifierSingleQuoted(t);break}case J.AFTER_DOCTYPE_PUBLIC_IDENTIFIER:{this._stateAfterDoctypePublicIdentifier(t);break}case J.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS:{this._stateBetweenDoctypePublicAndSystemIdentifiers(t);break}case J.AFTER_DOCTYPE_SYSTEM_KEYWORD:{this._stateAfterDoctypeSystemKeyword(t);break}case J.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER:{this._stateBeforeDoctypeSystemIdentifier(t);break}case J.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED:{this._stateDoctypeSystemIdentifierDoubleQuoted(t);break}case J.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED:{this._stateDoctypeSystemIdentifierSingleQuoted(t);break}case J.AFTER_DOCTYPE_SYSTEM_IDENTIFIER:{this._stateAfterDoctypeSystemIdentifier(t);break}case J.BOGUS_DOCTYPE:{this._stateBogusDoctype(t);break}case J.CDATA_SECTION:{this._stateCdataSection(t);break}case J.CDATA_SECTION_BRACKET:{this._stateCdataSectionBracket(t);break}case J.CDATA_SECTION_END:{this._stateCdataSectionEnd(t);break}case J.CHARACTER_REFERENCE:{this._stateCharacterReference(t);break}case J.NAMED_CHARACTER_REFERENCE:{this._stateNamedCharacterReference(t);break}case J.AMBIGUOUS_AMPERSAND:{this._stateAmbiguousAmpersand(t);break}case J.NUMERIC_CHARACTER_REFERENCE:{this._stateNumericCharacterReference(t);break}case J.HEXADEMICAL_CHARACTER_REFERENCE_START:{this._stateHexademicalCharacterReferenceStart(t);break}case J.HEXADEMICAL_CHARACTER_REFERENCE:{this._stateHexademicalCharacterReference(t);break}case J.DECIMAL_CHARACTER_REFERENCE:{this._stateDecimalCharacterReference(t);break}case J.NUMERIC_CHARACTER_REFERENCE_END:{this._stateNumericCharacterReferenceEnd(t);break}default:throw new Error("Unknown state")}}_stateData(t){switch(t){case X.LESS_THAN_SIGN:{this.state=J.TAG_OPEN;break}case X.AMPERSAND:{this.returnState=J.DATA,this.state=J.CHARACTER_REFERENCE;break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),this._emitCodePoint(t);break}case X.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateRcdata(t){switch(t){case X.AMPERSAND:{this.returnState=J.RCDATA,this.state=J.CHARACTER_REFERENCE;break}case X.LESS_THAN_SIGN:{this.state=J.RCDATA_LESS_THAN_SIGN;break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),this._emitChars(vi);break}case X.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateRawtext(t){switch(t){case X.LESS_THAN_SIGN:{this.state=J.RAWTEXT_LESS_THAN_SIGN;break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),this._emitChars(vi);break}case X.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptData(t){switch(t){case X.LESS_THAN_SIGN:{this.state=J.SCRIPT_DATA_LESS_THAN_SIGN;break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),this._emitChars(vi);break}case X.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_statePlaintext(t){switch(t){case X.NULL:{this._err(Ne.unexpectedNullCharacter),this._emitChars(vi);break}case X.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateTagOpen(t){if(Tg(t))this._createStartTagToken(),this.state=J.TAG_NAME,this._stateTagName(t);else switch(t){case X.EXCLAMATION_MARK:{this.state=J.MARKUP_DECLARATION_OPEN;break}case X.SOLIDUS:{this.state=J.END_TAG_OPEN;break}case X.QUESTION_MARK:{this._err(Ne.unexpectedQuestionMarkInsteadOfTagName),this._createCommentToken(1),this.state=J.BOGUS_COMMENT,this._stateBogusComment(t);break}case X.EOF:{this._err(Ne.eofBeforeTagName),this._emitChars("<"),this._emitEOFToken();break}default:this._err(Ne.invalidFirstCharacterOfTagName),this._emitChars("<"),this.state=J.DATA,this._stateData(t)}}_stateEndTagOpen(t){if(Tg(t))this._createEndTagToken(),this.state=J.TAG_NAME,this._stateTagName(t);else switch(t){case X.GREATER_THAN_SIGN:{this._err(Ne.missingEndTagName),this.state=J.DATA;break}case X.EOF:{this._err(Ne.eofBeforeTagName),this._emitChars("</"),this._emitEOFToken();break}default:this._err(Ne.invalidFirstCharacterOfTagName),this._createCommentToken(2),this.state=J.BOGUS_COMMENT,this._stateBogusComment(t)}}_stateTagName(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:{this.state=J.BEFORE_ATTRIBUTE_NAME;break}case X.SOLIDUS:{this.state=J.SELF_CLOSING_START_TAG;break}case X.GREATER_THAN_SIGN:{this.state=J.DATA,this.emitCurrentTagToken();break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),n.tagName+=vi;break}case X.EOF:{this._err(Ne.eofInTag),this._emitEOFToken();break}default:n.tagName+=String.fromCodePoint(_2(t)?DN(t):t)}}_stateRcdataLessThanSign(t){t===X.SOLIDUS?this.state=J.RCDATA_END_TAG_OPEN:(this._emitChars("<"),this.state=J.RCDATA,this._stateRcdata(t))}_stateRcdataEndTagOpen(t){Tg(t)?(this.state=J.RCDATA_END_TAG_NAME,this._stateRcdataEndTagName(t)):(this._emitChars("</"),this.state=J.RCDATA,this._stateRcdata(t))}handleSpecialEndTag(t){if(!this.preprocessor.startsWith(this.lastStartTagName,!1))return!this._ensureHibernation();this._createEndTagToken();const n=this.currentToken;switch(n.tagName=this.lastStartTagName,this.preprocessor.peek(this.lastStartTagName.length)){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:return this._advanceBy(this.lastStartTagName.length),this.state=J.BEFORE_ATTRIBUTE_NAME,!1;case X.SOLIDUS:return this._advanceBy(this.lastStartTagName.length),this.state=J.SELF_CLOSING_START_TAG,!1;case X.GREATER_THAN_SIGN:return this._advanceBy(this.lastStartTagName.length),this.emitCurrentTagToken(),this.state=J.DATA,!1;default:return!this._ensureHibernation()}}_stateRcdataEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=J.RCDATA,this._stateRcdata(t))}_stateRawtextLessThanSign(t){t===X.SOLIDUS?this.state=J.RAWTEXT_END_TAG_OPEN:(this._emitChars("<"),this.state=J.RAWTEXT,this._stateRawtext(t))}_stateRawtextEndTagOpen(t){Tg(t)?(this.state=J.RAWTEXT_END_TAG_NAME,this._stateRawtextEndTagName(t)):(this._emitChars("</"),this.state=J.RAWTEXT,this._stateRawtext(t))}_stateRawtextEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=J.RAWTEXT,this._stateRawtext(t))}_stateScriptDataLessThanSign(t){switch(t){case X.SOLIDUS:{this.state=J.SCRIPT_DATA_END_TAG_OPEN;break}case X.EXCLAMATION_MARK:{this.state=J.SCRIPT_DATA_ESCAPE_START,this._emitChars("<!");break}default:this._emitChars("<"),this.state=J.SCRIPT_DATA,this._stateScriptData(t)}}_stateScriptDataEndTagOpen(t){Tg(t)?(this.state=J.SCRIPT_DATA_END_TAG_NAME,this._stateScriptDataEndTagName(t)):(this._emitChars("</"),this.state=J.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=J.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscapeStart(t){t===X.HYPHEN_MINUS?(this.state=J.SCRIPT_DATA_ESCAPE_START_DASH,this._emitChars("-")):(this.state=J.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscapeStartDash(t){t===X.HYPHEN_MINUS?(this.state=J.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-")):(this.state=J.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscaped(t){switch(t){case X.HYPHEN_MINUS:{this.state=J.SCRIPT_DATA_ESCAPED_DASH,this._emitChars("-");break}case X.LESS_THAN_SIGN:{this.state=J.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),this._emitChars(vi);break}case X.EOF:{this._err(Ne.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptDataEscapedDash(t){switch(t){case X.HYPHEN_MINUS:{this.state=J.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-");break}case X.LESS_THAN_SIGN:{this.state=J.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),this.state=J.SCRIPT_DATA_ESCAPED,this._emitChars(vi);break}case X.EOF:{this._err(Ne.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=J.SCRIPT_DATA_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataEscapedDashDash(t){switch(t){case X.HYPHEN_MINUS:{this._emitChars("-");break}case X.LESS_THAN_SIGN:{this.state=J.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case X.GREATER_THAN_SIGN:{this.state=J.SCRIPT_DATA,this._emitChars(">");break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),this.state=J.SCRIPT_DATA_ESCAPED,this._emitChars(vi);break}case X.EOF:{this._err(Ne.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=J.SCRIPT_DATA_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataEscapedLessThanSign(t){t===X.SOLIDUS?this.state=J.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:Tg(t)?(this._emitChars("<"),this.state=J.SCRIPT_DATA_DOUBLE_ESCAPE_START,this._stateScriptDataDoubleEscapeStart(t)):(this._emitChars("<"),this.state=J.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataEscapedEndTagOpen(t){Tg(t)?(this.state=J.SCRIPT_DATA_ESCAPED_END_TAG_NAME,this._stateScriptDataEscapedEndTagName(t)):(this._emitChars("</"),this.state=J.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataEscapedEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=J.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataDoubleEscapeStart(t){if(this.preprocessor.startsWith(mu.SCRIPT,!1)&&pue(this.preprocessor.peek(mu.SCRIPT.length))){this._emitCodePoint(t);for(let n=0;n<mu.SCRIPT.length;n++)this._emitCodePoint(this._consume());this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED}else this._ensureHibernation()||(this.state=J.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataDoubleEscaped(t){switch(t){case X.HYPHEN_MINUS:{this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED_DASH,this._emitChars("-");break}case X.LESS_THAN_SIGN:{this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),this._emitChars(vi);break}case X.EOF:{this._err(Ne.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedDash(t){switch(t){case X.HYPHEN_MINUS:{this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH,this._emitChars("-");break}case X.LESS_THAN_SIGN:{this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(vi);break}case X.EOF:{this._err(Ne.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedDashDash(t){switch(t){case X.HYPHEN_MINUS:{this._emitChars("-");break}case X.LESS_THAN_SIGN:{this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case X.GREATER_THAN_SIGN:{this.state=J.SCRIPT_DATA,this._emitChars(">");break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(vi);break}case X.EOF:{this._err(Ne.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedLessThanSign(t){t===X.SOLIDUS?(this.state=J.SCRIPT_DATA_DOUBLE_ESCAPE_END,this._emitChars("/")):(this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(t))}_stateScriptDataDoubleEscapeEnd(t){if(this.preprocessor.startsWith(mu.SCRIPT,!1)&&pue(this.preprocessor.peek(mu.SCRIPT.length))){this._emitCodePoint(t);for(let n=0;n<mu.SCRIPT.length;n++)this._emitCodePoint(this._consume());this.state=J.SCRIPT_DATA_ESCAPED}else this._ensureHibernation()||(this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(t))}_stateBeforeAttributeName(t){switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:break;case X.SOLIDUS:case X.GREATER_THAN_SIGN:case X.EOF:{this.state=J.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(t);break}case X.EQUALS_SIGN:{this._err(Ne.unexpectedEqualsSignBeforeAttributeName),this._createAttr("="),this.state=J.ATTRIBUTE_NAME;break}default:this._createAttr(""),this.state=J.ATTRIBUTE_NAME,this._stateAttributeName(t)}}_stateAttributeName(t){switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:case X.SOLIDUS:case X.GREATER_THAN_SIGN:case X.EOF:{this._leaveAttrName(),this.state=J.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(t);break}case X.EQUALS_SIGN:{this._leaveAttrName(),this.state=J.BEFORE_ATTRIBUTE_VALUE;break}case X.QUOTATION_MARK:case X.APOSTROPHE:case X.LESS_THAN_SIGN:{this._err(Ne.unexpectedCharacterInAttributeName),this.currentAttr.name+=String.fromCodePoint(t);break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),this.currentAttr.name+=vi;break}default:this.currentAttr.name+=String.fromCodePoint(_2(t)?DN(t):t)}}_stateAfterAttributeName(t){switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:break;case X.SOLIDUS:{this.state=J.SELF_CLOSING_START_TAG;break}case X.EQUALS_SIGN:{this.state=J.BEFORE_ATTRIBUTE_VALUE;break}case X.GREATER_THAN_SIGN:{this.state=J.DATA,this.emitCurrentTagToken();break}case X.EOF:{this._err(Ne.eofInTag),this._emitEOFToken();break}default:this._createAttr(""),this.state=J.ATTRIBUTE_NAME,this._stateAttributeName(t)}}_stateBeforeAttributeValue(t){switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:break;case X.QUOTATION_MARK:{this.state=J.ATTRIBUTE_VALUE_DOUBLE_QUOTED;break}case X.APOSTROPHE:{this.state=J.ATTRIBUTE_VALUE_SINGLE_QUOTED;break}case X.GREATER_THAN_SIGN:{this._err(Ne.missingAttributeValue),this.state=J.DATA,this.emitCurrentTagToken();break}default:this.state=J.ATTRIBUTE_VALUE_UNQUOTED,this._stateAttributeValueUnquoted(t)}}_stateAttributeValueDoubleQuoted(t){switch(t){case X.QUOTATION_MARK:{this.state=J.AFTER_ATTRIBUTE_VALUE_QUOTED;break}case X.AMPERSAND:{this.returnState=J.ATTRIBUTE_VALUE_DOUBLE_QUOTED,this.state=J.CHARACTER_REFERENCE;break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),this.currentAttr.value+=vi;break}case X.EOF:{this._err(Ne.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAttributeValueSingleQuoted(t){switch(t){case X.APOSTROPHE:{this.state=J.AFTER_ATTRIBUTE_VALUE_QUOTED;break}case X.AMPERSAND:{this.returnState=J.ATTRIBUTE_VALUE_SINGLE_QUOTED,this.state=J.CHARACTER_REFERENCE;break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),this.currentAttr.value+=vi;break}case X.EOF:{this._err(Ne.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAttributeValueUnquoted(t){switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:{this._leaveAttrValue(),this.state=J.BEFORE_ATTRIBUTE_NAME;break}case X.AMPERSAND:{this.returnState=J.ATTRIBUTE_VALUE_UNQUOTED,this.state=J.CHARACTER_REFERENCE;break}case X.GREATER_THAN_SIGN:{this._leaveAttrValue(),this.state=J.DATA,this.emitCurrentTagToken();break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),this.currentAttr.value+=vi;break}case X.QUOTATION_MARK:case X.APOSTROPHE:case X.LESS_THAN_SIGN:case X.EQUALS_SIGN:case X.GRAVE_ACCENT:{this._err(Ne.unexpectedCharacterInUnquotedAttributeValue),this.currentAttr.value+=String.fromCodePoint(t);break}case X.EOF:{this._err(Ne.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAfterAttributeValueQuoted(t){switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:{this._leaveAttrValue(),this.state=J.BEFORE_ATTRIBUTE_NAME;break}case X.SOLIDUS:{this._leaveAttrValue(),this.state=J.SELF_CLOSING_START_TAG;break}case X.GREATER_THAN_SIGN:{this._leaveAttrValue(),this.state=J.DATA,this.emitCurrentTagToken();break}case X.EOF:{this._err(Ne.eofInTag),this._emitEOFToken();break}default:this._err(Ne.missingWhitespaceBetweenAttributes),this.state=J.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(t)}}_stateSelfClosingStartTag(t){switch(t){case X.GREATER_THAN_SIGN:{const n=this.currentToken;n.selfClosing=!0,this.state=J.DATA,this.emitCurrentTagToken();break}case X.EOF:{this._err(Ne.eofInTag),this._emitEOFToken();break}default:this._err(Ne.unexpectedSolidusInTag),this.state=J.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(t)}}_stateBogusComment(t){const n=this.currentToken;switch(t){case X.GREATER_THAN_SIGN:{this.state=J.DATA,this.emitCurrentComment(n);break}case X.EOF:{this.emitCurrentComment(n),this._emitEOFToken();break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),n.data+=vi;break}default:n.data+=String.fromCodePoint(t)}}_stateMarkupDeclarationOpen(t){this._consumeSequenceIfMatch(mu.DASH_DASH,!0)?(this._createCommentToken(mu.DASH_DASH.length+1),this.state=J.COMMENT_START):this._consumeSequenceIfMatch(mu.DOCTYPE,!1)?(this.currentLocation=this.getCurrentLocation(mu.DOCTYPE.length+1),this.state=J.DOCTYPE):this._consumeSequenceIfMatch(mu.CDATA_START,!0)?this.inForeignNode?this.state=J.CDATA_SECTION:(this._err(Ne.cdataInHtmlContent),this._createCommentToken(mu.CDATA_START.length+1),this.currentToken.data="[CDATA[",this.state=J.BOGUS_COMMENT):this._ensureHibernation()||(this._err(Ne.incorrectlyOpenedComment),this._createCommentToken(2),this.state=J.BOGUS_COMMENT,this._stateBogusComment(t))}_stateCommentStart(t){switch(t){case X.HYPHEN_MINUS:{this.state=J.COMMENT_START_DASH;break}case X.GREATER_THAN_SIGN:{this._err(Ne.abruptClosingOfEmptyComment),this.state=J.DATA;const n=this.currentToken;this.emitCurrentComment(n);break}default:this.state=J.COMMENT,this._stateComment(t)}}_stateCommentStartDash(t){const n=this.currentToken;switch(t){case X.HYPHEN_MINUS:{this.state=J.COMMENT_END;break}case X.GREATER_THAN_SIGN:{this._err(Ne.abruptClosingOfEmptyComment),this.state=J.DATA,this.emitCurrentComment(n);break}case X.EOF:{this._err(Ne.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="-",this.state=J.COMMENT,this._stateComment(t)}}_stateComment(t){const n=this.currentToken;switch(t){case X.HYPHEN_MINUS:{this.state=J.COMMENT_END_DASH;break}case X.LESS_THAN_SIGN:{n.data+="<",this.state=J.COMMENT_LESS_THAN_SIGN;break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),n.data+=vi;break}case X.EOF:{this._err(Ne.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+=String.fromCodePoint(t)}}_stateCommentLessThanSign(t){const n=this.currentToken;switch(t){case X.EXCLAMATION_MARK:{n.data+="!",this.state=J.COMMENT_LESS_THAN_SIGN_BANG;break}case X.LESS_THAN_SIGN:{n.data+="<";break}default:this.state=J.COMMENT,this._stateComment(t)}}_stateCommentLessThanSignBang(t){t===X.HYPHEN_MINUS?this.state=J.COMMENT_LESS_THAN_SIGN_BANG_DASH:(this.state=J.COMMENT,this._stateComment(t))}_stateCommentLessThanSignBangDash(t){t===X.HYPHEN_MINUS?this.state=J.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:(this.state=J.COMMENT_END_DASH,this._stateCommentEndDash(t))}_stateCommentLessThanSignBangDashDash(t){t!==X.GREATER_THAN_SIGN&&t!==X.EOF&&this._err(Ne.nestedComment),this.state=J.COMMENT_END,this._stateCommentEnd(t)}_stateCommentEndDash(t){const n=this.currentToken;switch(t){case X.HYPHEN_MINUS:{this.state=J.COMMENT_END;break}case X.EOF:{this._err(Ne.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="-",this.state=J.COMMENT,this._stateComment(t)}}_stateCommentEnd(t){const n=this.currentToken;switch(t){case X.GREATER_THAN_SIGN:{this.state=J.DATA,this.emitCurrentComment(n);break}case X.EXCLAMATION_MARK:{this.state=J.COMMENT_END_BANG;break}case X.HYPHEN_MINUS:{n.data+="-";break}case X.EOF:{this._err(Ne.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="--",this.state=J.COMMENT,this._stateComment(t)}}_stateCommentEndBang(t){const n=this.currentToken;switch(t){case X.HYPHEN_MINUS:{n.data+="--!",this.state=J.COMMENT_END_DASH;break}case X.GREATER_THAN_SIGN:{this._err(Ne.incorrectlyClosedComment),this.state=J.DATA,this.emitCurrentComment(n);break}case X.EOF:{this._err(Ne.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="--!",this.state=J.COMMENT,this._stateComment(t)}}_stateDoctype(t){switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:{this.state=J.BEFORE_DOCTYPE_NAME;break}case X.GREATER_THAN_SIGN:{this.state=J.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(t);break}case X.EOF:{this._err(Ne.eofInDoctype),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ne.missingWhitespaceBeforeDoctypeName),this.state=J.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(t)}}_stateBeforeDoctypeName(t){if(_2(t))this._createDoctypeToken(String.fromCharCode(DN(t))),this.state=J.DOCTYPE_NAME;else switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:break;case X.NULL:{this._err(Ne.unexpectedNullCharacter),this._createDoctypeToken(vi),this.state=J.DOCTYPE_NAME;break}case X.GREATER_THAN_SIGN:{this._err(Ne.missingDoctypeName),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=J.DATA;break}case X.EOF:{this._err(Ne.eofInDoctype),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._createDoctypeToken(String.fromCodePoint(t)),this.state=J.DOCTYPE_NAME}}_stateDoctypeName(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:{this.state=J.AFTER_DOCTYPE_NAME;break}case X.GREATER_THAN_SIGN:{this.state=J.DATA,this.emitCurrentDoctype(n);break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),n.name+=vi;break}case X.EOF:{this._err(Ne.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.name+=String.fromCodePoint(_2(t)?DN(t):t)}}_stateAfterDoctypeName(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:break;case X.GREATER_THAN_SIGN:{this.state=J.DATA,this.emitCurrentDoctype(n);break}case X.EOF:{this._err(Ne.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._consumeSequenceIfMatch(mu.PUBLIC,!1)?this.state=J.AFTER_DOCTYPE_PUBLIC_KEYWORD:this._consumeSequenceIfMatch(mu.SYSTEM,!1)?this.state=J.AFTER_DOCTYPE_SYSTEM_KEYWORD:this._ensureHibernation()||(this._err(Ne.invalidCharacterSequenceAfterDoctypeName),n.forceQuirks=!0,this.state=J.BOGUS_DOCTYPE,this._stateBogusDoctype(t))}}_stateAfterDoctypePublicKeyword(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:{this.state=J.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER;break}case X.QUOTATION_MARK:{this._err(Ne.missingWhitespaceAfterDoctypePublicKeyword),n.publicId="",this.state=J.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break}case X.APOSTROPHE:{this._err(Ne.missingWhitespaceAfterDoctypePublicKeyword),n.publicId="",this.state=J.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break}case X.GREATER_THAN_SIGN:{this._err(Ne.missingDoctypePublicIdentifier),n.forceQuirks=!0,this.state=J.DATA,this.emitCurrentDoctype(n);break}case X.EOF:{this._err(Ne.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ne.missingQuoteBeforeDoctypePublicIdentifier),n.forceQuirks=!0,this.state=J.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBeforeDoctypePublicIdentifier(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:break;case X.QUOTATION_MARK:{n.publicId="",this.state=J.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break}case X.APOSTROPHE:{n.publicId="",this.state=J.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break}case X.GREATER_THAN_SIGN:{this._err(Ne.missingDoctypePublicIdentifier),n.forceQuirks=!0,this.state=J.DATA,this.emitCurrentDoctype(n);break}case X.EOF:{this._err(Ne.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ne.missingQuoteBeforeDoctypePublicIdentifier),n.forceQuirks=!0,this.state=J.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateDoctypePublicIdentifierDoubleQuoted(t){const n=this.currentToken;switch(t){case X.QUOTATION_MARK:{this.state=J.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),n.publicId+=vi;break}case X.GREATER_THAN_SIGN:{this._err(Ne.abruptDoctypePublicIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=J.DATA;break}case X.EOF:{this._err(Ne.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.publicId+=String.fromCodePoint(t)}}_stateDoctypePublicIdentifierSingleQuoted(t){const n=this.currentToken;switch(t){case X.APOSTROPHE:{this.state=J.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),n.publicId+=vi;break}case X.GREATER_THAN_SIGN:{this._err(Ne.abruptDoctypePublicIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=J.DATA;break}case X.EOF:{this._err(Ne.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.publicId+=String.fromCodePoint(t)}}_stateAfterDoctypePublicIdentifier(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:{this.state=J.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS;break}case X.GREATER_THAN_SIGN:{this.state=J.DATA,this.emitCurrentDoctype(n);break}case X.QUOTATION_MARK:{this._err(Ne.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),n.systemId="",this.state=J.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case X.APOSTROPHE:{this._err(Ne.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),n.systemId="",this.state=J.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case X.EOF:{this._err(Ne.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ne.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=J.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBetweenDoctypePublicAndSystemIdentifiers(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:break;case X.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=J.DATA;break}case X.QUOTATION_MARK:{n.systemId="",this.state=J.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case X.APOSTROPHE:{n.systemId="",this.state=J.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case X.EOF:{this._err(Ne.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ne.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=J.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateAfterDoctypeSystemKeyword(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:{this.state=J.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER;break}case X.QUOTATION_MARK:{this._err(Ne.missingWhitespaceAfterDoctypeSystemKeyword),n.systemId="",this.state=J.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case X.APOSTROPHE:{this._err(Ne.missingWhitespaceAfterDoctypeSystemKeyword),n.systemId="",this.state=J.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case X.GREATER_THAN_SIGN:{this._err(Ne.missingDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=J.DATA,this.emitCurrentDoctype(n);break}case X.EOF:{this._err(Ne.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ne.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=J.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBeforeDoctypeSystemIdentifier(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:break;case X.QUOTATION_MARK:{n.systemId="",this.state=J.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case X.APOSTROPHE:{n.systemId="",this.state=J.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case X.GREATER_THAN_SIGN:{this._err(Ne.missingDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=J.DATA,this.emitCurrentDoctype(n);break}case X.EOF:{this._err(Ne.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ne.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=J.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateDoctypeSystemIdentifierDoubleQuoted(t){const n=this.currentToken;switch(t){case X.QUOTATION_MARK:{this.state=J.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),n.systemId+=vi;break}case X.GREATER_THAN_SIGN:{this._err(Ne.abruptDoctypeSystemIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=J.DATA;break}case X.EOF:{this._err(Ne.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.systemId+=String.fromCodePoint(t)}}_stateDoctypeSystemIdentifierSingleQuoted(t){const n=this.currentToken;switch(t){case X.APOSTROPHE:{this.state=J.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),n.systemId+=vi;break}case X.GREATER_THAN_SIGN:{this._err(Ne.abruptDoctypeSystemIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=J.DATA;break}case X.EOF:{this._err(Ne.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.systemId+=String.fromCodePoint(t)}}_stateAfterDoctypeSystemIdentifier(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:break;case X.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=J.DATA;break}case X.EOF:{this._err(Ne.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ne.unexpectedCharacterAfterDoctypeSystemIdentifier),this.state=J.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBogusDoctype(t){const n=this.currentToken;switch(t){case X.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=J.DATA;break}case X.NULL:{this._err(Ne.unexpectedNullCharacter);break}case X.EOF:{this.emitCurrentDoctype(n),this._emitEOFToken();break}}}_stateCdataSection(t){switch(t){case X.RIGHT_SQUARE_BRACKET:{this.state=J.CDATA_SECTION_BRACKET;break}case X.EOF:{this._err(Ne.eofInCdata),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateCdataSectionBracket(t){t===X.RIGHT_SQUARE_BRACKET?this.state=J.CDATA_SECTION_END:(this._emitChars("]"),this.state=J.CDATA_SECTION,this._stateCdataSection(t))}_stateCdataSectionEnd(t){switch(t){case X.GREATER_THAN_SIGN:{this.state=J.DATA;break}case X.RIGHT_SQUARE_BRACKET:{this._emitChars("]");break}default:this._emitChars("]]"),this.state=J.CDATA_SECTION,this._stateCdataSection(t)}}_stateCharacterReference(t){t===X.NUMBER_SIGN?this.state=J.NUMERIC_CHARACTER_REFERENCE:E7(t)?(this.state=J.NAMED_CHARACTER_REFERENCE,this._stateNamedCharacterReference(t)):(this._flushCodePointConsumedAsCharacterReference(X.AMPERSAND),this._reconsumeInState(this.returnState,t))}_stateNamedCharacterReference(t){const n=this._matchNamedCharacterReference(t);if(!this._ensureHibernation())if(n){for(let r=0;r<n.length;r++)this._flushCodePointConsumedAsCharacterReference(n[r]);this.state=this.returnState}else this._flushCodePointConsumedAsCharacterReference(X.AMPERSAND),this.state=J.AMBIGUOUS_AMPERSAND}_stateAmbiguousAmpersand(t){E7(t)?this._flushCodePointConsumedAsCharacterReference(t):(t===X.SEMICOLON&&this._err(Ne.unknownNamedCharacterReference),this._reconsumeInState(this.returnState,t))}_stateNumericCharacterReference(t){this.charRefCode=0,t===X.LATIN_SMALL_X||t===X.LATIN_CAPITAL_X?this.state=J.HEXADEMICAL_CHARACTER_REFERENCE_START:_C(t)?(this.state=J.DECIMAL_CHARACTER_REFERENCE,this._stateDecimalCharacterReference(t)):(this._err(Ne.absenceOfDigitsInNumericCharacterReference),this._flushCodePointConsumedAsCharacterReference(X.AMPERSAND),this._flushCodePointConsumedAsCharacterReference(X.NUMBER_SIGN),this._reconsumeInState(this.returnState,t))}_stateHexademicalCharacterReferenceStart(t){ert(t)?(this.state=J.HEXADEMICAL_CHARACTER_REFERENCE,this._stateHexademicalCharacterReference(t)):(this._err(Ne.absenceOfDigitsInNumericCharacterReference),this._flushCodePointConsumedAsCharacterReference(X.AMPERSAND),this._flushCodePointConsumedAsCharacterReference(X.NUMBER_SIGN),this._unconsume(2),this.state=this.returnState)}_stateHexademicalCharacterReference(t){FEe(t)?this.charRefCode=this.charRefCode*16+t-55:jEe(t)?this.charRefCode=this.charRefCode*16+t-87:_C(t)?this.charRefCode=this.charRefCode*16+t-48:t===X.SEMICOLON?this.state=J.NUMERIC_CHARACTER_REFERENCE_END:(this._err(Ne.missingSemicolonAfterCharacterReference),this.state=J.NUMERIC_CHARACTER_REFERENCE_END,this._stateNumericCharacterReferenceEnd(t))}_stateDecimalCharacterReference(t){_C(t)?this.charRefCode=this.charRefCode*10+t-48:t===X.SEMICOLON?this.state=J.NUMERIC_CHARACTER_REFERENCE_END:(this._err(Ne.missingSemicolonAfterCharacterReference),this.state=J.NUMERIC_CHARACTER_REFERENCE_END,this._stateNumericCharacterReferenceEnd(t))}_stateNumericCharacterReferenceEnd(t){if(this.charRefCode===X.NULL)this._err(Ne.nullCharacterReference),this.charRefCode=X.REPLACEMENT_CHARACTER;else if(this.charRefCode>1114111)this._err(Ne.characterReferenceOutsideUnicodeRange),this.charRefCode=X.REPLACEMENT_CHARACTER;else if(NEe(this.charRefCode))this._err(Ne.surrogateCharacterReference),this.charRefCode=X.REPLACEMENT_CHARACTER;else if(DEe(this.charRefCode))this._err(Ne.noncharacterCharacterReference);else if(PEe(this.charRefCode)||this.charRefCode===X.CARRIAGE_RETURN){this._err(Ne.controlCharacterReference);const n=Jnt.get(this.charRefCode);n!==void 0&&(this.charRefCode=n)}this._flushCodePointConsumedAsCharacterReference(this.charRefCode),this._reconsumeInState(this.returnState,t)}}const UEe=new Set([R.DD,R.DT,R.LI,R.OPTGROUP,R.OPTION,R.P,R.RB,R.RP,R.RT,R.RTC]),mue=new Set([...UEe,R.CAPTION,R.COLGROUP,R.TBODY,R.TD,R.TFOOT,R.TH,R.THEAD,R.TR]),ON=new Map([[R.APPLET,Fe.HTML],[R.CAPTION,Fe.HTML],[R.HTML,Fe.HTML],[R.MARQUEE,Fe.HTML],[R.OBJECT,Fe.HTML],[R.TABLE,Fe.HTML],[R.TD,Fe.HTML],[R.TEMPLATE,Fe.HTML],[R.TH,Fe.HTML],[R.ANNOTATION_XML,Fe.MATHML],[R.MI,Fe.MATHML],[R.MN,Fe.MATHML],[R.MO,Fe.MATHML],[R.MS,Fe.MATHML],[R.MTEXT,Fe.MATHML],[R.DESC,Fe.SVG],[R.FOREIGN_OBJECT,Fe.SVG],[R.TITLE,Fe.SVG]]),rrt=[R.H1,R.H2,R.H3,R.H4,R.H5,R.H6],irt=[R.TR,R.TEMPLATE,R.HTML],srt=[R.TBODY,R.TFOOT,R.THEAD,R.TEMPLATE,R.HTML],ort=[R.TABLE,R.TEMPLATE,R.HTML],art=[R.TD,R.TH];class urt{get currentTmplContentOrNode(){return this._isInTemplate()?this.treeAdapter.getTemplateContent(this.current):this.current}constructor(t,n,r){this.treeAdapter=n,this.handler=r,this.items=[],this.tagIDs=[],this.stackTop=-1,this.tmplCount=0,this.currentTagId=R.UNKNOWN,this.current=t}_indexOf(t){return this.items.lastIndexOf(t,this.stackTop)}_isInTemplate(){return this.currentTagId===R.TEMPLATE&&this.treeAdapter.getNamespaceURI(this.current)===Fe.HTML}_updateCurrentElement(){this.current=this.items[this.stackTop],this.currentTagId=this.tagIDs[this.stackTop]}push(t,n){this.stackTop++,this.items[this.stackTop]=t,this.current=t,this.tagIDs[this.stackTop]=n,this.currentTagId=n,this._isInTemplate()&&this.tmplCount++,this.handler.onItemPush(t,n,!0)}pop(){const t=this.current;this.tmplCount>0&&this._isInTemplate()&&this.tmplCount--,this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(t,!0)}replace(t,n){const r=this._indexOf(t);this.items[r]=n,r===this.stackTop&&(this.current=n)}insertAfter(t,n,r){const i=this._indexOf(t)+1;this.items.splice(i,0,n),this.tagIDs.splice(i,0,r),this.stackTop++,i===this.stackTop&&this._updateCurrentElement(),this.handler.onItemPush(this.current,this.currentTagId,i===this.stackTop)}popUntilTagNamePopped(t){let n=this.stackTop+1;do n=this.tagIDs.lastIndexOf(t,n-1);while(n>0&&this.treeAdapter.getNamespaceURI(this.items[n])!==Fe.HTML);this.shortenToLength(n<0?0:n)}shortenToLength(t){for(;this.stackTop>=t;){const n=this.current;this.tmplCount>0&&this._isInTemplate()&&(this.tmplCount-=1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(n,this.stackTop<t)}}popUntilElementPopped(t){const n=this._indexOf(t);this.shortenToLength(n<0?0:n)}popUntilPopped(t,n){const r=this._indexOfTagNames(t,n);this.shortenToLength(r<0?0:r)}popUntilNumberedHeaderPopped(){this.popUntilPopped(rrt,Fe.HTML)}popUntilTableCellPopped(){this.popUntilPopped(art,Fe.HTML)}popAllUpToHtmlElement(){this.tmplCount=0,this.shortenToLength(1)}_indexOfTagNames(t,n){for(let r=this.stackTop;r>=0;r--)if(t.includes(this.tagIDs[r])&&this.treeAdapter.getNamespaceURI(this.items[r])===n)return r;return-1}clearBackTo(t,n){const r=this._indexOfTagNames(t,n);this.shortenToLength(r+1)}clearBackToTableContext(){this.clearBackTo(ort,Fe.HTML)}clearBackToTableBodyContext(){this.clearBackTo(srt,Fe.HTML)}clearBackToTableRowContext(){this.clearBackTo(irt,Fe.HTML)}remove(t){const n=this._indexOf(t);n>=0&&(n===this.stackTop?this.pop():(this.items.splice(n,1),this.tagIDs.splice(n,1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(t,!1)))}tryPeekProperlyNestedBodyElement(){return this.stackTop>=1&&this.tagIDs[1]===R.BODY?this.items[1]:null}contains(t){return this._indexOf(t)>-1}getCommonAncestor(t){const n=this._indexOf(t)-1;return n>=0?this.items[n]:null}isRootHtmlElementCurrent(){return this.stackTop===0&&this.tagIDs[0]===R.HTML}hasInScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n],i=this.treeAdapter.getNamespaceURI(this.items[n]);if(r===t&&i===Fe.HTML)return!0;if(ON.get(r)===i)return!1}return!0}hasNumberedHeaderInScope(){for(let t=this.stackTop;t>=0;t--){const n=this.tagIDs[t],r=this.treeAdapter.getNamespaceURI(this.items[t]);if(LEe(n)&&r===Fe.HTML)return!0;if(ON.get(n)===r)return!1}return!0}hasInListItemScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n],i=this.treeAdapter.getNamespaceURI(this.items[n]);if(r===t&&i===Fe.HTML)return!0;if((r===R.UL||r===R.OL)&&i===Fe.HTML||ON.get(r)===i)return!1}return!0}hasInButtonScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n],i=this.treeAdapter.getNamespaceURI(this.items[n]);if(r===t&&i===Fe.HTML)return!0;if(r===R.BUTTON&&i===Fe.HTML||ON.get(r)===i)return!1}return!0}hasInTableScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n];if(this.treeAdapter.getNamespaceURI(this.items[n])===Fe.HTML){if(r===t)return!0;if(r===R.TABLE||r===R.TEMPLATE||r===R.HTML)return!1}}return!0}hasTableBodyContextInTableScope(){for(let t=this.stackTop;t>=0;t--){const n=this.tagIDs[t];if(this.treeAdapter.getNamespaceURI(this.items[t])===Fe.HTML){if(n===R.TBODY||n===R.THEAD||n===R.TFOOT)return!0;if(n===R.TABLE||n===R.HTML)return!1}}return!0}hasInSelectScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n];if(this.treeAdapter.getNamespaceURI(this.items[n])===Fe.HTML){if(r===t)return!0;if(r!==R.OPTION&&r!==R.OPTGROUP)return!1}}return!0}generateImpliedEndTags(){for(;UEe.has(this.currentTagId);)this.pop()}generateImpliedEndTagsThoroughly(){for(;mue.has(this.currentTagId);)this.pop()}generateImpliedEndTagsWithExclusion(t){for(;this.currentTagId!==t&&mue.has(this.currentTagId);)this.pop()}}const o8=3;var wf;(function(e){e[e.Marker=0]="Marker",e[e.Element=1]="Element"})(wf=wf||(wf={}));const gue={type:wf.Marker};class lrt{constructor(t){this.treeAdapter=t,this.entries=[],this.bookmark=null}_getNoahArkConditionCandidates(t,n){const r=[],i=n.length,s=this.treeAdapter.getTagName(t),o=this.treeAdapter.getNamespaceURI(t);for(let a=0;a<this.entries.length;a++){const u=this.entries[a];if(u.type===wf.Marker)break;const{element:l}=u;if(this.treeAdapter.getTagName(l)===s&&this.treeAdapter.getNamespaceURI(l)===o){const c=this.treeAdapter.getAttrList(l);c.length===i&&r.push({idx:a,attrs:c})}}return r}_ensureNoahArkCondition(t){if(this.entries.length<o8)return;const n=this.treeAdapter.getAttrList(t),r=this._getNoahArkConditionCandidates(t,n);if(r.length<o8)return;const i=new Map(n.map(o=>[o.name,o.value]));let s=0;for(let o=0;o<r.length;o++){const a=r[o];a.attrs.every(u=>i.get(u.name)===u.value)&&(s+=1,s>=o8&&this.entries.splice(a.idx,1))}}insertMarker(){this.entries.unshift(gue)}pushElement(t,n){this._ensureNoahArkCondition(t),this.entries.unshift({type:wf.Element,element:t,token:n})}insertElementAfterBookmark(t,n){const r=this.entries.indexOf(this.bookmark);this.entries.splice(r,0,{type:wf.Element,element:t,token:n})}removeEntry(t){const n=this.entries.indexOf(t);n>=0&&this.entries.splice(n,1)}clearToLastMarker(){const t=this.entries.indexOf(gue);t>=0?this.entries.splice(0,t+1):this.entries.length=0}getElementEntryInScopeWithTagName(t){const n=this.entries.find(r=>r.type===wf.Marker||this.treeAdapter.getTagName(r.element)===t);return n&&n.type===wf.Element?n:null}getElementEntry(t){return this.entries.find(n=>n.type===wf.Element&&n.element===t)}}function yue(e){return{nodeName:"#text",value:e,parentNode:null}}const nw={createDocument(){return{nodeName:"#document",mode:vl.NO_QUIRKS,childNodes:[]}},createDocumentFragment(){return{nodeName:"#document-fragment",childNodes:[]}},createElement(e,t,n){return{nodeName:e,tagName:e,attrs:n,namespaceURI:t,childNodes:[],parentNode:null}},createCommentNode(e){return{nodeName:"#comment",data:e,parentNode:null}},appendChild(e,t){e.childNodes.push(t),t.parentNode=e},insertBefore(e,t,n){const r=e.childNodes.indexOf(n);e.childNodes.splice(r,0,t),t.parentNode=e},setTemplateContent(e,t){e.content=t},getTemplateContent(e){return e.content},setDocumentType(e,t,n,r){const i=e.childNodes.find(s=>s.nodeName==="#documentType");if(i)i.name=t,i.publicId=n,i.systemId=r;else{const s={nodeName:"#documentType",name:t,publicId:n,systemId:r,parentNode:null};nw.appendChild(e,s)}},setDocumentMode(e,t){e.mode=t},getDocumentMode(e){return e.mode},detachNode(e){if(e.parentNode){const t=e.parentNode.childNodes.indexOf(e);e.parentNode.childNodes.splice(t,1),e.parentNode=null}},insertText(e,t){if(e.childNodes.length>0){const n=e.childNodes[e.childNodes.length-1];if(nw.isTextNode(n)){n.value+=t;return}}nw.appendChild(e,yue(t))},insertTextBefore(e,t,n){const r=e.childNodes[e.childNodes.indexOf(n)-1];r&&nw.isTextNode(r)?r.value+=t:nw.insertBefore(e,yue(t),n)},adoptAttributes(e,t){const n=new Set(e.attrs.map(r=>r.name));for(let r=0;r<t.length;r++)n.has(t[r].name)||e.attrs.push(t[r])},getFirstChild(e){return e.childNodes[0]},getChildNodes(e){return e.childNodes},getParentNode(e){return e.parentNode},getAttrList(e){return e.attrs},getTagName(e){return e.tagName},getNamespaceURI(e){return e.namespaceURI},getTextNodeContent(e){return e.value},getCommentNodeContent(e){return e.data},getDocumentTypeNodeName(e){return e.name},getDocumentTypeNodePublicId(e){return e.publicId},getDocumentTypeNodeSystemId(e){return e.systemId},isTextNode(e){return e.nodeName==="#text"},isCommentNode(e){return e.nodeName==="#comment"},isDocumentTypeNode(e){return e.nodeName==="#documentType"},isElementNode(e){return Object.prototype.hasOwnProperty.call(e,"tagName")},setNodeSourceCodeLocation(e,t){e.sourceCodeLocation=t},getNodeSourceCodeLocation(e){return e.sourceCodeLocation},updateNodeSourceCodeLocation(e,t){e.sourceCodeLocation={...e.sourceCodeLocation,...t}}},zEe="html",crt="about:legacy-compat",frt="http://www.ibm.com/data/dtd/v11/ibmxhtml1-transitional.dtd",VEe=["+//silmaril//dtd html pro v0r11 19970101//","-//as//dtd html 3.0 aswedit + extensions//","-//advasoft ltd//dtd html 3.0 aswedit + extensions//","-//ietf//dtd html 2.0 level 1//","-//ietf//dtd html 2.0 level 2//","-//ietf//dtd html 2.0 strict level 1//","-//ietf//dtd html 2.0 strict level 2//","-//ietf//dtd html 2.0 strict//","-//ietf//dtd html 2.0//","-//ietf//dtd html 2.1e//","-//ietf//dtd html 3.0//","-//ietf//dtd html 3.2 final//","-//ietf//dtd html 3.2//","-//ietf//dtd html 3//","-//ietf//dtd html level 0//","-//ietf//dtd html level 1//","-//ietf//dtd html level 2//","-//ietf//dtd html level 3//","-//ietf//dtd html strict level 0//","-//ietf//dtd html strict level 1//","-//ietf//dtd html strict level 2//","-//ietf//dtd html strict level 3//","-//ietf//dtd html strict//","-//ietf//dtd html//","-//metrius//dtd metrius presentational//","-//microsoft//dtd internet explorer 2.0 html strict//","-//microsoft//dtd internet explorer 2.0 html//","-//microsoft//dtd internet explorer 2.0 tables//","-//microsoft//dtd internet explorer 3.0 html strict//","-//microsoft//dtd internet explorer 3.0 html//","-//microsoft//dtd internet explorer 3.0 tables//","-//netscape comm. corp.//dtd html//","-//netscape comm. corp.//dtd strict html//","-//o'reilly and associates//dtd html 2.0//","-//o'reilly and associates//dtd html extended 1.0//","-//o'reilly and associates//dtd html extended relaxed 1.0//","-//sq//dtd html 2.0 hotmetal + extensions//","-//softquad software//dtd hotmetal pro 6.0::19990601::extensions to html 4.0//","-//softquad//dtd hotmetal pro 4.0::19971010::extensions to html 4.0//","-//spyglass//dtd html 2.0 extended//","-//sun microsystems corp.//dtd hotjava html//","-//sun microsystems corp.//dtd hotjava strict html//","-//w3c//dtd html 3 1995-03-24//","-//w3c//dtd html 3.2 draft//","-//w3c//dtd html 3.2 final//","-//w3c//dtd html 3.2//","-//w3c//dtd html 3.2s draft//","-//w3c//dtd html 4.0 frameset//","-//w3c//dtd html 4.0 transitional//","-//w3c//dtd html experimental 19960712//","-//w3c//dtd html experimental 970421//","-//w3c//dtd w3 html//","-//w3o//dtd w3 html 3.0//","-//webtechs//dtd mozilla html 2.0//","-//webtechs//dtd mozilla html//"],drt=[...VEe,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"],hrt=new Set(["-//w3o//dtd w3 html strict 3.0//en//","-/w3c/dtd html 4.0 transitional/en","html"]),HEe=["-//w3c//dtd xhtml 1.0 frameset//","-//w3c//dtd xhtml 1.0 transitional//"],prt=[...HEe,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"];function vue(e,t){return t.some(n=>e.startsWith(n))}function mrt(e){return e.name===zEe&&e.publicId===null&&(e.systemId===null||e.systemId===crt)}function grt(e){if(e.name!==zEe)return vl.QUIRKS;const{systemId:t}=e;if(t&&t.toLowerCase()===frt)return vl.QUIRKS;let{publicId:n}=e;if(n!==null){if(n=n.toLowerCase(),hrt.has(n))return vl.QUIRKS;let r=t===null?drt:VEe;if(vue(n,r))return vl.QUIRKS;if(r=t===null?HEe:prt,vue(n,r))return vl.LIMITED_QUIRKS}return vl.NO_QUIRKS}const bue={TEXT_HTML:"text/html",APPLICATION_XML:"application/xhtml+xml"},yrt="definitionurl",vrt="definitionURL",brt=new Map(["attributeName","attributeType","baseFrequency","baseProfile","calcMode","clipPathUnits","diffuseConstant","edgeMode","filterUnits","glyphRef","gradientTransform","gradientUnits","kernelMatrix","kernelUnitLength","keyPoints","keySplines","keyTimes","lengthAdjust","limitingConeAngle","markerHeight","markerUnits","markerWidth","maskContentUnits","maskUnits","numOctaves","pathLength","patternContentUnits","patternTransform","patternUnits","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","refX","refY","repeatCount","repeatDur","requiredExtensions","requiredFeatures","specularConstant","specularExponent","spreadMethod","startOffset","stdDeviation","stitchTiles","surfaceScale","systemLanguage","tableValues","targetX","targetY","textLength","viewBox","viewTarget","xChannelSelector","yChannelSelector","zoomAndPan"].map(e=>[e.toLowerCase(),e])),_rt=new Map([["xlink:actuate",{prefix:"xlink",name:"actuate",namespace:Fe.XLINK}],["xlink:arcrole",{prefix:"xlink",name:"arcrole",namespace:Fe.XLINK}],["xlink:href",{prefix:"xlink",name:"href",namespace:Fe.XLINK}],["xlink:role",{prefix:"xlink",name:"role",namespace:Fe.XLINK}],["xlink:show",{prefix:"xlink",name:"show",namespace:Fe.XLINK}],["xlink:title",{prefix:"xlink",name:"title",namespace:Fe.XLINK}],["xlink:type",{prefix:"xlink",name:"type",namespace:Fe.XLINK}],["xml:base",{prefix:"xml",name:"base",namespace:Fe.XML}],["xml:lang",{prefix:"xml",name:"lang",namespace:Fe.XML}],["xml:space",{prefix:"xml",name:"space",namespace:Fe.XML}],["xmlns",{prefix:"",name:"xmlns",namespace:Fe.XMLNS}],["xmlns:xlink",{prefix:"xmlns",name:"xlink",namespace:Fe.XMLNS}]]),wrt=new Map(["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","textPath"].map(e=>[e.toLowerCase(),e])),Ert=new Set([R.B,R.BIG,R.BLOCKQUOTE,R.BODY,R.BR,R.CENTER,R.CODE,R.DD,R.DIV,R.DL,R.DT,R.EM,R.EMBED,R.H1,R.H2,R.H3,R.H4,R.H5,R.H6,R.HEAD,R.HR,R.I,R.IMG,R.LI,R.LISTING,R.MENU,R.META,R.NOBR,R.OL,R.P,R.PRE,R.RUBY,R.S,R.SMALL,R.SPAN,R.STRONG,R.STRIKE,R.SUB,R.SUP,R.TABLE,R.TT,R.U,R.UL,R.VAR]);function xrt(e){const t=e.tagID;return t===R.FONT&&e.attrs.some(({name:r})=>r===E0.COLOR||r===E0.SIZE||r===E0.FACE)||Ert.has(t)}function qEe(e){for(let t=0;t<e.attrs.length;t++)if(e.attrs[t].name===yrt){e.attrs[t].name=vrt;break}}function WEe(e){for(let t=0;t<e.attrs.length;t++){const n=brt.get(e.attrs[t].name);n!=null&&(e.attrs[t].name=n)}}function XY(e){for(let t=0;t<e.attrs.length;t++){const n=_rt.get(e.attrs[t].name);n&&(e.attrs[t].prefix=n.prefix,e.attrs[t].name=n.name,e.attrs[t].namespace=n.namespace)}}function Srt(e){const t=wrt.get(e.tagName);t!=null&&(e.tagName=t,e.tagID=dS(e.tagName))}function Trt(e,t){return t===Fe.MATHML&&(e===R.MI||e===R.MO||e===R.MN||e===R.MS||e===R.MTEXT)}function Crt(e,t,n){if(t===Fe.MATHML&&e===R.ANNOTATION_XML){for(let r=0;r<n.length;r++)if(n[r].name===E0.ENCODING){const i=n[r].value.toLowerCase();return i===bue.TEXT_HTML||i===bue.APPLICATION_XML}}return t===Fe.SVG&&(e===R.FOREIGN_OBJECT||e===R.DESC||e===R.TITLE)}function Art(e,t,n,r){return(!r||r===Fe.HTML)&&Crt(e,t,n)||(!r||r===Fe.MATHML)&&Trt(e,t)}const Irt="hidden",krt=8,Rrt=3;var ie;(function(e){e[e.INITIAL=0]="INITIAL",e[e.BEFORE_HTML=1]="BEFORE_HTML",e[e.BEFORE_HEAD=2]="BEFORE_HEAD",e[e.IN_HEAD=3]="IN_HEAD",e[e.IN_HEAD_NO_SCRIPT=4]="IN_HEAD_NO_SCRIPT",e[e.AFTER_HEAD=5]="AFTER_HEAD",e[e.IN_BODY=6]="IN_BODY",e[e.TEXT=7]="TEXT",e[e.IN_TABLE=8]="IN_TABLE",e[e.IN_TABLE_TEXT=9]="IN_TABLE_TEXT",e[e.IN_CAPTION=10]="IN_CAPTION",e[e.IN_COLUMN_GROUP=11]="IN_COLUMN_GROUP",e[e.IN_TABLE_BODY=12]="IN_TABLE_BODY",e[e.IN_ROW=13]="IN_ROW",e[e.IN_CELL=14]="IN_CELL",e[e.IN_SELECT=15]="IN_SELECT",e[e.IN_SELECT_IN_TABLE=16]="IN_SELECT_IN_TABLE",e[e.IN_TEMPLATE=17]="IN_TEMPLATE",e[e.AFTER_BODY=18]="AFTER_BODY",e[e.IN_FRAMESET=19]="IN_FRAMESET",e[e.AFTER_FRAMESET=20]="AFTER_FRAMESET",e[e.AFTER_AFTER_BODY=21]="AFTER_AFTER_BODY",e[e.AFTER_AFTER_FRAMESET=22]="AFTER_AFTER_FRAMESET"})(ie||(ie={}));const Nrt={startLine:-1,startCol:-1,startOffset:-1,endLine:-1,endCol:-1,endOffset:-1},GEe=new Set([R.TABLE,R.TBODY,R.TFOOT,R.THEAD,R.TR]),_ue={scriptingEnabled:!0,sourceCodeLocationInfo:!1,treeAdapter:nw,onParseError:null};let wue=class{constructor(t,n,r=null,i=null){this.fragmentContext=r,this.scriptHandler=i,this.currentToken=null,this.stopped=!1,this.insertionMode=ie.INITIAL,this.originalInsertionMode=ie.INITIAL,this.headElement=null,this.formElement=null,this.currentNotInHTML=!1,this.tmplInsertionModeStack=[],this.pendingCharacterTokens=[],this.hasNonWhitespacePendingCharacterToken=!1,this.framesetOk=!0,this.skipNextNewLine=!1,this.fosterParentingEnabled=!1,this.options={..._ue,...t},this.treeAdapter=this.options.treeAdapter,this.onParseError=this.options.onParseError,this.onParseError&&(this.options.sourceCodeLocationInfo=!0),this.document=n??this.treeAdapter.createDocument(),this.tokenizer=new nrt(this.options,this),this.activeFormattingElements=new lrt(this.treeAdapter),this.fragmentContextID=r?dS(this.treeAdapter.getTagName(r)):R.UNKNOWN,this._setContextModes(r??this.document,this.fragmentContextID),this.openElements=new urt(this.document,this.treeAdapter,this)}static parse(t,n){const r=new this(n);return r.tokenizer.write(t,!0),r.document}static getFragmentParser(t,n){const r={..._ue,...n};t??(t=r.treeAdapter.createElement(Ee.TEMPLATE,Fe.HTML,[]));const i=r.treeAdapter.createElement("documentmock",Fe.HTML,[]),s=new this(r,i,t);return s.fragmentContextID===R.TEMPLATE&&s.tmplInsertionModeStack.unshift(ie.IN_TEMPLATE),s._initTokenizerForFragmentParsing(),s._insertFakeRootElement(),s._resetInsertionMode(),s._findFormInFragmentContext(),s}getFragment(){const t=this.treeAdapter.getFirstChild(this.document),n=this.treeAdapter.createDocumentFragment();return this._adoptNodes(t,n),n}_err(t,n,r){var i;if(!this.onParseError)return;const s=(i=t.location)!==null&&i!==void 0?i:Nrt,o={code:n,startLine:s.startLine,startCol:s.startCol,startOffset:s.startOffset,endLine:r?s.startLine:s.endLine,endCol:r?s.startCol:s.endCol,endOffset:r?s.startOffset:s.endOffset};this.onParseError(o)}onItemPush(t,n,r){var i,s;(s=(i=this.treeAdapter).onItemPush)===null||s===void 0||s.call(i,t),r&&this.openElements.stackTop>0&&this._setContextModes(t,n)}onItemPop(t,n){var r,i;if(this.options.sourceCodeLocationInfo&&this._setEndLocation(t,this.currentToken),(i=(r=this.treeAdapter).onItemPop)===null||i===void 0||i.call(r,t,this.openElements.current),n){let s,o;this.openElements.stackTop===0&&this.fragmentContext?(s=this.fragmentContext,o=this.fragmentContextID):{current:s,currentTagId:o}=this.openElements,this._setContextModes(s,o)}}_setContextModes(t,n){const r=t===this.document||this.treeAdapter.getNamespaceURI(t)===Fe.HTML;this.currentNotInHTML=!r,this.tokenizer.inForeignNode=!r&&!this._isIntegrationPoint(n,t)}_switchToTextParsing(t,n){this._insertElement(t,Fe.HTML),this.tokenizer.state=n,this.originalInsertionMode=this.insertionMode,this.insertionMode=ie.TEXT}switchToPlaintextParsing(){this.insertionMode=ie.TEXT,this.originalInsertionMode=ie.IN_BODY,this.tokenizer.state=os.PLAINTEXT}_getAdjustedCurrentElement(){return this.openElements.stackTop===0&&this.fragmentContext?this.fragmentContext:this.openElements.current}_findFormInFragmentContext(){let t=this.fragmentContext;for(;t;){if(this.treeAdapter.getTagName(t)===Ee.FORM){this.formElement=t;break}t=this.treeAdapter.getParentNode(t)}}_initTokenizerForFragmentParsing(){if(!(!this.fragmentContext||this.treeAdapter.getNamespaceURI(this.fragmentContext)!==Fe.HTML))switch(this.fragmentContextID){case R.TITLE:case R.TEXTAREA:{this.tokenizer.state=os.RCDATA;break}case R.STYLE:case R.XMP:case R.IFRAME:case R.NOEMBED:case R.NOFRAMES:case R.NOSCRIPT:{this.tokenizer.state=os.RAWTEXT;break}case R.SCRIPT:{this.tokenizer.state=os.SCRIPT_DATA;break}case R.PLAINTEXT:{this.tokenizer.state=os.PLAINTEXT;break}}}_setDocumentType(t){const n=t.name||"",r=t.publicId||"",i=t.systemId||"";if(this.treeAdapter.setDocumentType(this.document,n,r,i),t.location){const o=this.treeAdapter.getChildNodes(this.document).find(a=>this.treeAdapter.isDocumentTypeNode(a));o&&this.treeAdapter.setNodeSourceCodeLocation(o,t.location)}}_attachElementToTree(t,n){if(this.options.sourceCodeLocationInfo){const r=n&&{...n,startTag:n};this.treeAdapter.setNodeSourceCodeLocation(t,r)}if(this._shouldFosterParentOnInsertion())this._fosterParentElement(t);else{const r=this.openElements.currentTmplContentOrNode;this.treeAdapter.appendChild(r,t)}}_appendElement(t,n){const r=this.treeAdapter.createElement(t.tagName,n,t.attrs);this._attachElementToTree(r,t.location)}_insertElement(t,n){const r=this.treeAdapter.createElement(t.tagName,n,t.attrs);this._attachElementToTree(r,t.location),this.openElements.push(r,t.tagID)}_insertFakeElement(t,n){const r=this.treeAdapter.createElement(t,Fe.HTML,[]);this._attachElementToTree(r,null),this.openElements.push(r,n)}_insertTemplate(t){const n=this.treeAdapter.createElement(t.tagName,Fe.HTML,t.attrs),r=this.treeAdapter.createDocumentFragment();this.treeAdapter.setTemplateContent(n,r),this._attachElementToTree(n,t.location),this.openElements.push(n,t.tagID),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(r,null)}_insertFakeRootElement(){const t=this.treeAdapter.createElement(Ee.HTML,Fe.HTML,[]);this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(t,null),this.treeAdapter.appendChild(this.openElements.current,t),this.openElements.push(t,R.HTML)}_appendCommentNode(t,n){const r=this.treeAdapter.createCommentNode(t.data);this.treeAdapter.appendChild(n,r),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(r,t.location)}_insertCharacters(t){let n,r;if(this._shouldFosterParentOnInsertion()?({parent:n,beforeElement:r}=this._findFosterParentingLocation(),r?this.treeAdapter.insertTextBefore(n,t.chars,r):this.treeAdapter.insertText(n,t.chars)):(n=this.openElements.currentTmplContentOrNode,this.treeAdapter.insertText(n,t.chars)),!t.location)return;const i=this.treeAdapter.getChildNodes(n),s=r?i.lastIndexOf(r):i.length,o=i[s-1];if(this.treeAdapter.getNodeSourceCodeLocation(o)){const{endLine:u,endCol:l,endOffset:c}=t.location;this.treeAdapter.updateNodeSourceCodeLocation(o,{endLine:u,endCol:l,endOffset:c})}else this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(o,t.location)}_adoptNodes(t,n){for(let r=this.treeAdapter.getFirstChild(t);r;r=this.treeAdapter.getFirstChild(t))this.treeAdapter.detachNode(r),this.treeAdapter.appendChild(n,r)}_setEndLocation(t,n){if(this.treeAdapter.getNodeSourceCodeLocation(t)&&n.location){const r=n.location,i=this.treeAdapter.getTagName(t),s=n.type===kn.END_TAG&&i===n.tagName?{endTag:{...r},endLine:r.endLine,endCol:r.endCol,endOffset:r.endOffset}:{endLine:r.startLine,endCol:r.startCol,endOffset:r.startOffset};this.treeAdapter.updateNodeSourceCodeLocation(t,s)}}shouldProcessStartTagTokenInForeignContent(t){if(!this.currentNotInHTML)return!1;let n,r;return this.openElements.stackTop===0&&this.fragmentContext?(n=this.fragmentContext,r=this.fragmentContextID):{current:n,currentTagId:r}=this.openElements,t.tagID===R.SVG&&this.treeAdapter.getTagName(n)===Ee.ANNOTATION_XML&&this.treeAdapter.getNamespaceURI(n)===Fe.MATHML?!1:this.tokenizer.inForeignNode||(t.tagID===R.MGLYPH||t.tagID===R.MALIGNMARK)&&!this._isIntegrationPoint(r,n,Fe.HTML)}_processToken(t){switch(t.type){case kn.CHARACTER:{this.onCharacter(t);break}case kn.NULL_CHARACTER:{this.onNullCharacter(t);break}case kn.COMMENT:{this.onComment(t);break}case kn.DOCTYPE:{this.onDoctype(t);break}case kn.START_TAG:{this._processStartTag(t);break}case kn.END_TAG:{this.onEndTag(t);break}case kn.EOF:{this.onEof(t);break}case kn.WHITESPACE_CHARACTER:{this.onWhitespaceCharacter(t);break}}}_isIntegrationPoint(t,n,r){const i=this.treeAdapter.getNamespaceURI(n),s=this.treeAdapter.getAttrList(n);return Art(t,i,s,r)}_reconstructActiveFormattingElements(){const t=this.activeFormattingElements.entries.length;if(t){const n=this.activeFormattingElements.entries.findIndex(i=>i.type===wf.Marker||this.openElements.contains(i.element)),r=n<0?t-1:n-1;for(let i=r;i>=0;i--){const s=this.activeFormattingElements.entries[i];this._insertElement(s.token,this.treeAdapter.getNamespaceURI(s.element)),s.element=this.openElements.current}}}_closeTableCell(){this.openElements.generateImpliedEndTags(),this.openElements.popUntilTableCellPopped(),this.activeFormattingElements.clearToLastMarker(),this.insertionMode=ie.IN_ROW}_closePElement(){this.openElements.generateImpliedEndTagsWithExclusion(R.P),this.openElements.popUntilTagNamePopped(R.P)}_resetInsertionMode(){for(let t=this.openElements.stackTop;t>=0;t--)switch(t===0&&this.fragmentContext?this.fragmentContextID:this.openElements.tagIDs[t]){case R.TR:{this.insertionMode=ie.IN_ROW;return}case R.TBODY:case R.THEAD:case R.TFOOT:{this.insertionMode=ie.IN_TABLE_BODY;return}case R.CAPTION:{this.insertionMode=ie.IN_CAPTION;return}case R.COLGROUP:{this.insertionMode=ie.IN_COLUMN_GROUP;return}case R.TABLE:{this.insertionMode=ie.IN_TABLE;return}case R.BODY:{this.insertionMode=ie.IN_BODY;return}case R.FRAMESET:{this.insertionMode=ie.IN_FRAMESET;return}case R.SELECT:{this._resetInsertionModeForSelect(t);return}case R.TEMPLATE:{this.insertionMode=this.tmplInsertionModeStack[0];return}case R.HTML:{this.insertionMode=this.headElement?ie.AFTER_HEAD:ie.BEFORE_HEAD;return}case R.TD:case R.TH:{if(t>0){this.insertionMode=ie.IN_CELL;return}break}case R.HEAD:{if(t>0){this.insertionMode=ie.IN_HEAD;return}break}}this.insertionMode=ie.IN_BODY}_resetInsertionModeForSelect(t){if(t>0)for(let n=t-1;n>0;n--){const r=this.openElements.tagIDs[n];if(r===R.TEMPLATE)break;if(r===R.TABLE){this.insertionMode=ie.IN_SELECT_IN_TABLE;return}}this.insertionMode=ie.IN_SELECT}_isElementCausesFosterParenting(t){return GEe.has(t)}_shouldFosterParentOnInsertion(){return this.fosterParentingEnabled&&this._isElementCausesFosterParenting(this.openElements.currentTagId)}_findFosterParentingLocation(){for(let t=this.openElements.stackTop;t>=0;t--){const n=this.openElements.items[t];switch(this.openElements.tagIDs[t]){case R.TEMPLATE:{if(this.treeAdapter.getNamespaceURI(n)===Fe.HTML)return{parent:this.treeAdapter.getTemplateContent(n),beforeElement:null};break}case R.TABLE:{const r=this.treeAdapter.getParentNode(n);return r?{parent:r,beforeElement:n}:{parent:this.openElements.items[t-1],beforeElement:null}}}}return{parent:this.openElements.items[0],beforeElement:null}}_fosterParentElement(t){const n=this._findFosterParentingLocation();n.beforeElement?this.treeAdapter.insertBefore(n.parent,t,n.beforeElement):this.treeAdapter.appendChild(n.parent,t)}_isSpecialElement(t,n){const r=this.treeAdapter.getNamespaceURI(t);return Qnt[r].has(n)}onCharacter(t){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){ast(this,t);return}switch(this.insertionMode){case ie.INITIAL:{CT(this,t);break}case ie.BEFORE_HTML:{wC(this,t);break}case ie.BEFORE_HEAD:{EC(this,t);break}case ie.IN_HEAD:{xC(this,t);break}case ie.IN_HEAD_NO_SCRIPT:{SC(this,t);break}case ie.AFTER_HEAD:{TC(this,t);break}case ie.IN_BODY:case ie.IN_CAPTION:case ie.IN_CELL:case ie.IN_TEMPLATE:{KEe(this,t);break}case ie.TEXT:case ie.IN_SELECT:case ie.IN_SELECT_IN_TABLE:{this._insertCharacters(t);break}case ie.IN_TABLE:case ie.IN_TABLE_BODY:case ie.IN_ROW:{a8(this,t);break}case ie.IN_TABLE_TEXT:{txe(this,t);break}case ie.IN_COLUMN_GROUP:{n3(this,t);break}case ie.AFTER_BODY:{r3(this,t);break}case ie.AFTER_AFTER_BODY:{gD(this,t);break}}}onNullCharacter(t){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){ost(this,t);return}switch(this.insertionMode){case ie.INITIAL:{CT(this,t);break}case ie.BEFORE_HTML:{wC(this,t);break}case ie.BEFORE_HEAD:{EC(this,t);break}case ie.IN_HEAD:{xC(this,t);break}case ie.IN_HEAD_NO_SCRIPT:{SC(this,t);break}case ie.AFTER_HEAD:{TC(this,t);break}case ie.TEXT:{this._insertCharacters(t);break}case ie.IN_TABLE:case ie.IN_TABLE_BODY:case ie.IN_ROW:{a8(this,t);break}case ie.IN_COLUMN_GROUP:{n3(this,t);break}case ie.AFTER_BODY:{r3(this,t);break}case ie.AFTER_AFTER_BODY:{gD(this,t);break}}}onComment(t){if(this.skipNextNewLine=!1,this.currentNotInHTML){x7(this,t);return}switch(this.insertionMode){case ie.INITIAL:case ie.BEFORE_HTML:case ie.BEFORE_HEAD:case ie.IN_HEAD:case ie.IN_HEAD_NO_SCRIPT:case ie.AFTER_HEAD:case ie.IN_BODY:case ie.IN_TABLE:case ie.IN_CAPTION:case ie.IN_COLUMN_GROUP:case ie.IN_TABLE_BODY:case ie.IN_ROW:case ie.IN_CELL:case ie.IN_SELECT:case ie.IN_SELECT_IN_TABLE:case ie.IN_TEMPLATE:case ie.IN_FRAMESET:case ie.AFTER_FRAMESET:{x7(this,t);break}case ie.IN_TABLE_TEXT:{AT(this,t);break}case ie.AFTER_BODY:{Frt(this,t);break}case ie.AFTER_AFTER_BODY:case ie.AFTER_AFTER_FRAMESET:{jrt(this,t);break}}}onDoctype(t){switch(this.skipNextNewLine=!1,this.insertionMode){case ie.INITIAL:{Brt(this,t);break}case ie.BEFORE_HEAD:case ie.IN_HEAD:case ie.IN_HEAD_NO_SCRIPT:case ie.AFTER_HEAD:{this._err(t,Ne.misplacedDoctype);break}case ie.IN_TABLE_TEXT:{AT(this,t);break}}}onStartTag(t){this.skipNextNewLine=!1,this.currentToken=t,this._processStartTag(t),t.selfClosing&&!t.ackSelfClosing&&this._err(t,Ne.nonVoidHtmlElementStartTagWithTrailingSolidus)}_processStartTag(t){this.shouldProcessStartTagTokenInForeignContent(t)?ust(this,t):this._startTagOutsideForeignContent(t)}_startTagOutsideForeignContent(t){switch(this.insertionMode){case ie.INITIAL:{CT(this,t);break}case ie.BEFORE_HTML:{Urt(this,t);break}case ie.BEFORE_HEAD:{Vrt(this,t);break}case ie.IN_HEAD:{ad(this,t);break}case ie.IN_HEAD_NO_SCRIPT:{Wrt(this,t);break}case ie.AFTER_HEAD:{Yrt(this,t);break}case ie.IN_BODY:{Aa(this,t);break}case ie.IN_TABLE:{BE(this,t);break}case ie.IN_TABLE_TEXT:{AT(this,t);break}case ie.IN_CAPTION:{Hit(this,t);break}case ie.IN_COLUMN_GROUP:{ZY(this,t);break}case ie.IN_TABLE_BODY:{p6(this,t);break}case ie.IN_ROW:{m6(this,t);break}case ie.IN_CELL:{Git(this,t);break}case ie.IN_SELECT:{ixe(this,t);break}case ie.IN_SELECT_IN_TABLE:{Kit(this,t);break}case ie.IN_TEMPLATE:{Qit(this,t);break}case ie.AFTER_BODY:{Zit(this,t);break}case ie.IN_FRAMESET:{est(this,t);break}case ie.AFTER_FRAMESET:{nst(this,t);break}case ie.AFTER_AFTER_BODY:{ist(this,t);break}case ie.AFTER_AFTER_FRAMESET:{sst(this,t);break}}}onEndTag(t){this.skipNextNewLine=!1,this.currentToken=t,this.currentNotInHTML?lst(this,t):this._endTagOutsideForeignContent(t)}_endTagOutsideForeignContent(t){switch(this.insertionMode){case ie.INITIAL:{CT(this,t);break}case ie.BEFORE_HTML:{zrt(this,t);break}case ie.BEFORE_HEAD:{Hrt(this,t);break}case ie.IN_HEAD:{qrt(this,t);break}case ie.IN_HEAD_NO_SCRIPT:{Grt(this,t);break}case ie.AFTER_HEAD:{Krt(this,t);break}case ie.IN_BODY:{h6(this,t);break}case ie.TEXT:{Oit(this,t);break}case ie.IN_TABLE:{LA(this,t);break}case ie.IN_TABLE_TEXT:{AT(this,t);break}case ie.IN_CAPTION:{qit(this,t);break}case ie.IN_COLUMN_GROUP:{Wit(this,t);break}case ie.IN_TABLE_BODY:{S7(this,t);break}case ie.IN_ROW:{rxe(this,t);break}case ie.IN_CELL:{Yit(this,t);break}case ie.IN_SELECT:{sxe(this,t);break}case ie.IN_SELECT_IN_TABLE:{Xit(this,t);break}case ie.IN_TEMPLATE:{Jit(this,t);break}case ie.AFTER_BODY:{axe(this,t);break}case ie.IN_FRAMESET:{tst(this,t);break}case ie.AFTER_FRAMESET:{rst(this,t);break}case ie.AFTER_AFTER_BODY:{gD(this,t);break}}}onEof(t){switch(this.insertionMode){case ie.INITIAL:{CT(this,t);break}case ie.BEFORE_HTML:{wC(this,t);break}case ie.BEFORE_HEAD:{EC(this,t);break}case ie.IN_HEAD:{xC(this,t);break}case ie.IN_HEAD_NO_SCRIPT:{SC(this,t);break}case ie.AFTER_HEAD:{TC(this,t);break}case ie.IN_BODY:case ie.IN_TABLE:case ie.IN_CAPTION:case ie.IN_COLUMN_GROUP:case ie.IN_TABLE_BODY:case ie.IN_ROW:case ie.IN_CELL:case ie.IN_SELECT:case ie.IN_SELECT_IN_TABLE:{ZEe(this,t);break}case ie.TEXT:{$it(this,t);break}case ie.IN_TABLE_TEXT:{AT(this,t);break}case ie.IN_TEMPLATE:{oxe(this,t);break}case ie.AFTER_BODY:case ie.IN_FRAMESET:case ie.AFTER_FRAMESET:case ie.AFTER_AFTER_BODY:case ie.AFTER_AFTER_FRAMESET:{JY(this,t);break}}}onWhitespaceCharacter(t){if(this.skipNextNewLine&&(this.skipNextNewLine=!1,t.chars.charCodeAt(0)===X.LINE_FEED)){if(t.chars.length===1)return;t.chars=t.chars.substr(1)}if(this.tokenizer.inForeignNode){this._insertCharacters(t);return}switch(this.insertionMode){case ie.IN_HEAD:case ie.IN_HEAD_NO_SCRIPT:case ie.AFTER_HEAD:case ie.TEXT:case ie.IN_COLUMN_GROUP:case ie.IN_SELECT:case ie.IN_SELECT_IN_TABLE:case ie.IN_FRAMESET:case ie.AFTER_FRAMESET:{this._insertCharacters(t);break}case ie.IN_BODY:case ie.IN_CAPTION:case ie.IN_CELL:case ie.IN_TEMPLATE:case ie.AFTER_BODY:case ie.AFTER_AFTER_BODY:case ie.AFTER_AFTER_FRAMESET:{YEe(this,t);break}case ie.IN_TABLE:case ie.IN_TABLE_BODY:case ie.IN_ROW:{a8(this,t);break}case ie.IN_TABLE_TEXT:{exe(this,t);break}}}};function Prt(e,t){let n=e.activeFormattingElements.getElementEntryInScopeWithTagName(t.tagName);return n?e.openElements.contains(n.element)?e.openElements.hasInScope(t.tagID)||(n=null):(e.activeFormattingElements.removeEntry(n),n=null):JEe(e,t),n}function Drt(e,t){let n=null,r=e.openElements.stackTop;for(;r>=0;r--){const i=e.openElements.items[r];if(i===t.element)break;e._isSpecialElement(i,e.openElements.tagIDs[r])&&(n=i)}return n||(e.openElements.shortenToLength(r<0?0:r),e.activeFormattingElements.removeEntry(t)),n}function Ort(e,t,n){let r=t,i=e.openElements.getCommonAncestor(t);for(let s=0,o=i;o!==n;s++,o=i){i=e.openElements.getCommonAncestor(o);const a=e.activeFormattingElements.getElementEntry(o),u=a&&s>=Rrt;!a||u?(u&&e.activeFormattingElements.removeEntry(a),e.openElements.remove(o)):(o=$rt(e,a),r===t&&(e.activeFormattingElements.bookmark=a),e.treeAdapter.detachNode(r),e.treeAdapter.appendChild(o,r),r=o)}return r}function $rt(e,t){const n=e.treeAdapter.getNamespaceURI(t.element),r=e.treeAdapter.createElement(t.token.tagName,n,t.token.attrs);return e.openElements.replace(t.element,r),t.element=r,r}function Mrt(e,t,n){const r=e.treeAdapter.getTagName(t),i=dS(r);if(e._isElementCausesFosterParenting(i))e._fosterParentElement(n);else{const s=e.treeAdapter.getNamespaceURI(t);i===R.TEMPLATE&&s===Fe.HTML&&(t=e.treeAdapter.getTemplateContent(t)),e.treeAdapter.appendChild(t,n)}}function Lrt(e,t,n){const r=e.treeAdapter.getNamespaceURI(n.element),{token:i}=n,s=e.treeAdapter.createElement(i.tagName,r,i.attrs);e._adoptNodes(t,s),e.treeAdapter.appendChild(t,s),e.activeFormattingElements.insertElementAfterBookmark(s,i),e.activeFormattingElements.removeEntry(n),e.openElements.remove(n.element),e.openElements.insertAfter(t,s,i.tagID)}function QY(e,t){for(let n=0;n<krt;n++){const r=Prt(e,t);if(!r)break;const i=Drt(e,r);if(!i)break;e.activeFormattingElements.bookmark=r;const s=Ort(e,i,r.element),o=e.openElements.getCommonAncestor(r.element);e.treeAdapter.detachNode(s),o&&Mrt(e,o,s),Lrt(e,i,r)}}function x7(e,t){e._appendCommentNode(t,e.openElements.currentTmplContentOrNode)}function Frt(e,t){e._appendCommentNode(t,e.openElements.items[0])}function jrt(e,t){e._appendCommentNode(t,e.document)}function JY(e,t){if(e.stopped=!0,t.location){const n=e.fragmentContext?0:2;for(let r=e.openElements.stackTop;r>=n;r--)e._setEndLocation(e.openElements.items[r],t);if(!e.fragmentContext&&e.openElements.stackTop>=0){const r=e.openElements.items[0],i=e.treeAdapter.getNodeSourceCodeLocation(r);if(i&&!i.endTag&&(e._setEndLocation(r,t),e.openElements.stackTop>=1)){const s=e.openElements.items[1],o=e.treeAdapter.getNodeSourceCodeLocation(s);o&&!o.endTag&&e._setEndLocation(s,t)}}}}function Brt(e,t){e._setDocumentType(t);const n=t.forceQuirks?vl.QUIRKS:grt(t);mrt(t)||e._err(t,Ne.nonConformingDoctype),e.treeAdapter.setDocumentMode(e.document,n),e.insertionMode=ie.BEFORE_HTML}function CT(e,t){e._err(t,Ne.missingDoctype,!0),e.treeAdapter.setDocumentMode(e.document,vl.QUIRKS),e.insertionMode=ie.BEFORE_HTML,e._processToken(t)}function Urt(e,t){t.tagID===R.HTML?(e._insertElement(t,Fe.HTML),e.insertionMode=ie.BEFORE_HEAD):wC(e,t)}function zrt(e,t){const n=t.tagID;(n===R.HTML||n===R.HEAD||n===R.BODY||n===R.BR)&&wC(e,t)}function wC(e,t){e._insertFakeRootElement(),e.insertionMode=ie.BEFORE_HEAD,e._processToken(t)}function Vrt(e,t){switch(t.tagID){case R.HTML:{Aa(e,t);break}case R.HEAD:{e._insertElement(t,Fe.HTML),e.headElement=e.openElements.current,e.insertionMode=ie.IN_HEAD;break}default:EC(e,t)}}function Hrt(e,t){const n=t.tagID;n===R.HEAD||n===R.BODY||n===R.HTML||n===R.BR?EC(e,t):e._err(t,Ne.endTagWithoutMatchingOpenElement)}function EC(e,t){e._insertFakeElement(Ee.HEAD,R.HEAD),e.headElement=e.openElements.current,e.insertionMode=ie.IN_HEAD,e._processToken(t)}function ad(e,t){switch(t.tagID){case R.HTML:{Aa(e,t);break}case R.BASE:case R.BASEFONT:case R.BGSOUND:case R.LINK:case R.META:{e._appendElement(t,Fe.HTML),t.ackSelfClosing=!0;break}case R.TITLE:{e._switchToTextParsing(t,os.RCDATA);break}case R.NOSCRIPT:{e.options.scriptingEnabled?e._switchToTextParsing(t,os.RAWTEXT):(e._insertElement(t,Fe.HTML),e.insertionMode=ie.IN_HEAD_NO_SCRIPT);break}case R.NOFRAMES:case R.STYLE:{e._switchToTextParsing(t,os.RAWTEXT);break}case R.SCRIPT:{e._switchToTextParsing(t,os.SCRIPT_DATA);break}case R.TEMPLATE:{e._insertTemplate(t),e.activeFormattingElements.insertMarker(),e.framesetOk=!1,e.insertionMode=ie.IN_TEMPLATE,e.tmplInsertionModeStack.unshift(ie.IN_TEMPLATE);break}case R.HEAD:{e._err(t,Ne.misplacedStartTagForHeadElement);break}default:xC(e,t)}}function qrt(e,t){switch(t.tagID){case R.HEAD:{e.openElements.pop(),e.insertionMode=ie.AFTER_HEAD;break}case R.BODY:case R.BR:case R.HTML:{xC(e,t);break}case R.TEMPLATE:{Hb(e,t);break}default:e._err(t,Ne.endTagWithoutMatchingOpenElement)}}function Hb(e,t){e.openElements.tmplCount>0?(e.openElements.generateImpliedEndTagsThoroughly(),e.openElements.currentTagId!==R.TEMPLATE&&e._err(t,Ne.closingOfElementWithOpenChildElements),e.openElements.popUntilTagNamePopped(R.TEMPLATE),e.activeFormattingElements.clearToLastMarker(),e.tmplInsertionModeStack.shift(),e._resetInsertionMode()):e._err(t,Ne.endTagWithoutMatchingOpenElement)}function xC(e,t){e.openElements.pop(),e.insertionMode=ie.AFTER_HEAD,e._processToken(t)}function Wrt(e,t){switch(t.tagID){case R.HTML:{Aa(e,t);break}case R.BASEFONT:case R.BGSOUND:case R.HEAD:case R.LINK:case R.META:case R.NOFRAMES:case R.STYLE:{ad(e,t);break}case R.NOSCRIPT:{e._err(t,Ne.nestedNoscriptInHead);break}default:SC(e,t)}}function Grt(e,t){switch(t.tagID){case R.NOSCRIPT:{e.openElements.pop(),e.insertionMode=ie.IN_HEAD;break}case R.BR:{SC(e,t);break}default:e._err(t,Ne.endTagWithoutMatchingOpenElement)}}function SC(e,t){const n=t.type===kn.EOF?Ne.openElementsLeftAfterEof:Ne.disallowedContentInNoscriptInHead;e._err(t,n),e.openElements.pop(),e.insertionMode=ie.IN_HEAD,e._processToken(t)}function Yrt(e,t){switch(t.tagID){case R.HTML:{Aa(e,t);break}case R.BODY:{e._insertElement(t,Fe.HTML),e.framesetOk=!1,e.insertionMode=ie.IN_BODY;break}case R.FRAMESET:{e._insertElement(t,Fe.HTML),e.insertionMode=ie.IN_FRAMESET;break}case R.BASE:case R.BASEFONT:case R.BGSOUND:case R.LINK:case R.META:case R.NOFRAMES:case R.SCRIPT:case R.STYLE:case R.TEMPLATE:case R.TITLE:{e._err(t,Ne.abandonedHeadElementChild),e.openElements.push(e.headElement,R.HEAD),ad(e,t),e.openElements.remove(e.headElement);break}case R.HEAD:{e._err(t,Ne.misplacedStartTagForHeadElement);break}default:TC(e,t)}}function Krt(e,t){switch(t.tagID){case R.BODY:case R.HTML:case R.BR:{TC(e,t);break}case R.TEMPLATE:{Hb(e,t);break}default:e._err(t,Ne.endTagWithoutMatchingOpenElement)}}function TC(e,t){e._insertFakeElement(Ee.BODY,R.BODY),e.insertionMode=ie.IN_BODY,d6(e,t)}function d6(e,t){switch(t.type){case kn.CHARACTER:{KEe(e,t);break}case kn.WHITESPACE_CHARACTER:{YEe(e,t);break}case kn.COMMENT:{x7(e,t);break}case kn.START_TAG:{Aa(e,t);break}case kn.END_TAG:{h6(e,t);break}case kn.EOF:{ZEe(e,t);break}}}function YEe(e,t){e._reconstructActiveFormattingElements(),e._insertCharacters(t)}function KEe(e,t){e._reconstructActiveFormattingElements(),e._insertCharacters(t),e.framesetOk=!1}function Xrt(e,t){e.openElements.tmplCount===0&&e.treeAdapter.adoptAttributes(e.openElements.items[0],t.attrs)}function Qrt(e,t){const n=e.openElements.tryPeekProperlyNestedBodyElement();n&&e.openElements.tmplCount===0&&(e.framesetOk=!1,e.treeAdapter.adoptAttributes(n,t.attrs))}function Jrt(e,t){const n=e.openElements.tryPeekProperlyNestedBodyElement();e.framesetOk&&n&&(e.treeAdapter.detachNode(n),e.openElements.popAllUpToHtmlElement(),e._insertElement(t,Fe.HTML),e.insertionMode=ie.IN_FRAMESET)}function Zrt(e,t){e.openElements.hasInButtonScope(R.P)&&e._closePElement(),e._insertElement(t,Fe.HTML)}function eit(e,t){e.openElements.hasInButtonScope(R.P)&&e._closePElement(),LEe(e.openElements.currentTagId)&&e.openElements.pop(),e._insertElement(t,Fe.HTML)}function tit(e,t){e.openElements.hasInButtonScope(R.P)&&e._closePElement(),e._insertElement(t,Fe.HTML),e.skipNextNewLine=!0,e.framesetOk=!1}function nit(e,t){const n=e.openElements.tmplCount>0;(!e.formElement||n)&&(e.openElements.hasInButtonScope(R.P)&&e._closePElement(),e._insertElement(t,Fe.HTML),n||(e.formElement=e.openElements.current))}function rit(e,t){e.framesetOk=!1;const n=t.tagID;for(let r=e.openElements.stackTop;r>=0;r--){const i=e.openElements.tagIDs[r];if(n===R.LI&&i===R.LI||(n===R.DD||n===R.DT)&&(i===R.DD||i===R.DT)){e.openElements.generateImpliedEndTagsWithExclusion(i),e.openElements.popUntilTagNamePopped(i);break}if(i!==R.ADDRESS&&i!==R.DIV&&i!==R.P&&e._isSpecialElement(e.openElements.items[r],i))break}e.openElements.hasInButtonScope(R.P)&&e._closePElement(),e._insertElement(t,Fe.HTML)}function iit(e,t){e.openElements.hasInButtonScope(R.P)&&e._closePElement(),e._insertElement(t,Fe.HTML),e.tokenizer.state=os.PLAINTEXT}function sit(e,t){e.openElements.hasInScope(R.BUTTON)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(R.BUTTON)),e._reconstructActiveFormattingElements(),e._insertElement(t,Fe.HTML),e.framesetOk=!1}function oit(e,t){const n=e.activeFormattingElements.getElementEntryInScopeWithTagName(Ee.A);n&&(QY(e,t),e.openElements.remove(n.element),e.activeFormattingElements.removeEntry(n)),e._reconstructActiveFormattingElements(),e._insertElement(t,Fe.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function ait(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,Fe.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function uit(e,t){e._reconstructActiveFormattingElements(),e.openElements.hasInScope(R.NOBR)&&(QY(e,t),e._reconstructActiveFormattingElements()),e._insertElement(t,Fe.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function lit(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,Fe.HTML),e.activeFormattingElements.insertMarker(),e.framesetOk=!1}function cit(e,t){e.treeAdapter.getDocumentMode(e.document)!==vl.QUIRKS&&e.openElements.hasInButtonScope(R.P)&&e._closePElement(),e._insertElement(t,Fe.HTML),e.framesetOk=!1,e.insertionMode=ie.IN_TABLE}function XEe(e,t){e._reconstructActiveFormattingElements(),e._appendElement(t,Fe.HTML),e.framesetOk=!1,t.ackSelfClosing=!0}function QEe(e){const t=OEe(e,E0.TYPE);return t!=null&&t.toLowerCase()===Irt}function fit(e,t){e._reconstructActiveFormattingElements(),e._appendElement(t,Fe.HTML),QEe(t)||(e.framesetOk=!1),t.ackSelfClosing=!0}function dit(e,t){e._appendElement(t,Fe.HTML),t.ackSelfClosing=!0}function hit(e,t){e.openElements.hasInButtonScope(R.P)&&e._closePElement(),e._appendElement(t,Fe.HTML),e.framesetOk=!1,t.ackSelfClosing=!0}function pit(e,t){t.tagName=Ee.IMG,t.tagID=R.IMG,XEe(e,t)}function mit(e,t){e._insertElement(t,Fe.HTML),e.skipNextNewLine=!0,e.tokenizer.state=os.RCDATA,e.originalInsertionMode=e.insertionMode,e.framesetOk=!1,e.insertionMode=ie.TEXT}function git(e,t){e.openElements.hasInButtonScope(R.P)&&e._closePElement(),e._reconstructActiveFormattingElements(),e.framesetOk=!1,e._switchToTextParsing(t,os.RAWTEXT)}function yit(e,t){e.framesetOk=!1,e._switchToTextParsing(t,os.RAWTEXT)}function Eue(e,t){e._switchToTextParsing(t,os.RAWTEXT)}function vit(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,Fe.HTML),e.framesetOk=!1,e.insertionMode=e.insertionMode===ie.IN_TABLE||e.insertionMode===ie.IN_CAPTION||e.insertionMode===ie.IN_TABLE_BODY||e.insertionMode===ie.IN_ROW||e.insertionMode===ie.IN_CELL?ie.IN_SELECT_IN_TABLE:ie.IN_SELECT}function bit(e,t){e.openElements.currentTagId===R.OPTION&&e.openElements.pop(),e._reconstructActiveFormattingElements(),e._insertElement(t,Fe.HTML)}function _it(e,t){e.openElements.hasInScope(R.RUBY)&&e.openElements.generateImpliedEndTags(),e._insertElement(t,Fe.HTML)}function wit(e,t){e.openElements.hasInScope(R.RUBY)&&e.openElements.generateImpliedEndTagsWithExclusion(R.RTC),e._insertElement(t,Fe.HTML)}function Eit(e,t){e._reconstructActiveFormattingElements(),qEe(t),XY(t),t.selfClosing?e._appendElement(t,Fe.MATHML):e._insertElement(t,Fe.MATHML),t.ackSelfClosing=!0}function xit(e,t){e._reconstructActiveFormattingElements(),WEe(t),XY(t),t.selfClosing?e._appendElement(t,Fe.SVG):e._insertElement(t,Fe.SVG),t.ackSelfClosing=!0}function xue(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,Fe.HTML)}function Aa(e,t){switch(t.tagID){case R.I:case R.S:case R.B:case R.U:case R.EM:case R.TT:case R.BIG:case R.CODE:case R.FONT:case R.SMALL:case R.STRIKE:case R.STRONG:{ait(e,t);break}case R.A:{oit(e,t);break}case R.H1:case R.H2:case R.H3:case R.H4:case R.H5:case R.H6:{eit(e,t);break}case R.P:case R.DL:case R.OL:case R.UL:case R.DIV:case R.DIR:case R.NAV:case R.MAIN:case R.MENU:case R.ASIDE:case R.CENTER:case R.FIGURE:case R.FOOTER:case R.HEADER:case R.HGROUP:case R.DIALOG:case R.DETAILS:case R.ADDRESS:case R.ARTICLE:case R.SECTION:case R.SUMMARY:case R.FIELDSET:case R.BLOCKQUOTE:case R.FIGCAPTION:{Zrt(e,t);break}case R.LI:case R.DD:case R.DT:{rit(e,t);break}case R.BR:case R.IMG:case R.WBR:case R.AREA:case R.EMBED:case R.KEYGEN:{XEe(e,t);break}case R.HR:{hit(e,t);break}case R.RB:case R.RTC:{_it(e,t);break}case R.RT:case R.RP:{wit(e,t);break}case R.PRE:case R.LISTING:{tit(e,t);break}case R.XMP:{git(e,t);break}case R.SVG:{xit(e,t);break}case R.HTML:{Xrt(e,t);break}case R.BASE:case R.LINK:case R.META:case R.STYLE:case R.TITLE:case R.SCRIPT:case R.BGSOUND:case R.BASEFONT:case R.TEMPLATE:{ad(e,t);break}case R.BODY:{Qrt(e,t);break}case R.FORM:{nit(e,t);break}case R.NOBR:{uit(e,t);break}case R.MATH:{Eit(e,t);break}case R.TABLE:{cit(e,t);break}case R.INPUT:{fit(e,t);break}case R.PARAM:case R.TRACK:case R.SOURCE:{dit(e,t);break}case R.IMAGE:{pit(e,t);break}case R.BUTTON:{sit(e,t);break}case R.APPLET:case R.OBJECT:case R.MARQUEE:{lit(e,t);break}case R.IFRAME:{yit(e,t);break}case R.SELECT:{vit(e,t);break}case R.OPTION:case R.OPTGROUP:{bit(e,t);break}case R.NOEMBED:{Eue(e,t);break}case R.FRAMESET:{Jrt(e,t);break}case R.TEXTAREA:{mit(e,t);break}case R.NOSCRIPT:{e.options.scriptingEnabled?Eue(e,t):xue(e,t);break}case R.PLAINTEXT:{iit(e,t);break}case R.COL:case R.TH:case R.TD:case R.TR:case R.HEAD:case R.FRAME:case R.TBODY:case R.TFOOT:case R.THEAD:case R.CAPTION:case R.COLGROUP:break;default:xue(e,t)}}function Sit(e,t){if(e.openElements.hasInScope(R.BODY)&&(e.insertionMode=ie.AFTER_BODY,e.options.sourceCodeLocationInfo)){const n=e.openElements.tryPeekProperlyNestedBodyElement();n&&e._setEndLocation(n,t)}}function Tit(e,t){e.openElements.hasInScope(R.BODY)&&(e.insertionMode=ie.AFTER_BODY,axe(e,t))}function Cit(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n))}function Ait(e){const t=e.openElements.tmplCount>0,{formElement:n}=e;t||(e.formElement=null),(n||t)&&e.openElements.hasInScope(R.FORM)&&(e.openElements.generateImpliedEndTags(),t?e.openElements.popUntilTagNamePopped(R.FORM):n&&e.openElements.remove(n))}function Iit(e){e.openElements.hasInButtonScope(R.P)||e._insertFakeElement(Ee.P,R.P),e._closePElement()}function kit(e){e.openElements.hasInListItemScope(R.LI)&&(e.openElements.generateImpliedEndTagsWithExclusion(R.LI),e.openElements.popUntilTagNamePopped(R.LI))}function Rit(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTagsWithExclusion(n),e.openElements.popUntilTagNamePopped(n))}function Nit(e){e.openElements.hasNumberedHeaderInScope()&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilNumberedHeaderPopped())}function Pit(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n),e.activeFormattingElements.clearToLastMarker())}function Dit(e){e._reconstructActiveFormattingElements(),e._insertFakeElement(Ee.BR,R.BR),e.openElements.pop(),e.framesetOk=!1}function JEe(e,t){const n=t.tagName,r=t.tagID;for(let i=e.openElements.stackTop;i>0;i--){const s=e.openElements.items[i],o=e.openElements.tagIDs[i];if(r===o&&(r!==R.UNKNOWN||e.treeAdapter.getTagName(s)===n)){e.openElements.generateImpliedEndTagsWithExclusion(r),e.openElements.stackTop>=i&&e.openElements.shortenToLength(i);break}if(e._isSpecialElement(s,o))break}}function h6(e,t){switch(t.tagID){case R.A:case R.B:case R.I:case R.S:case R.U:case R.EM:case R.TT:case R.BIG:case R.CODE:case R.FONT:case R.NOBR:case R.SMALL:case R.STRIKE:case R.STRONG:{QY(e,t);break}case R.P:{Iit(e);break}case R.DL:case R.UL:case R.OL:case R.DIR:case R.DIV:case R.NAV:case R.PRE:case R.MAIN:case R.MENU:case R.ASIDE:case R.BUTTON:case R.CENTER:case R.FIGURE:case R.FOOTER:case R.HEADER:case R.HGROUP:case R.DIALOG:case R.ADDRESS:case R.ARTICLE:case R.DETAILS:case R.SECTION:case R.SUMMARY:case R.LISTING:case R.FIELDSET:case R.BLOCKQUOTE:case R.FIGCAPTION:{Cit(e,t);break}case R.LI:{kit(e);break}case R.DD:case R.DT:{Rit(e,t);break}case R.H1:case R.H2:case R.H3:case R.H4:case R.H5:case R.H6:{Nit(e);break}case R.BR:{Dit(e);break}case R.BODY:{Sit(e,t);break}case R.HTML:{Tit(e,t);break}case R.FORM:{Ait(e);break}case R.APPLET:case R.OBJECT:case R.MARQUEE:{Pit(e,t);break}case R.TEMPLATE:{Hb(e,t);break}default:JEe(e,t)}}function ZEe(e,t){e.tmplInsertionModeStack.length>0?oxe(e,t):JY(e,t)}function Oit(e,t){var n;t.tagID===R.SCRIPT&&((n=e.scriptHandler)===null||n===void 0||n.call(e,e.openElements.current)),e.openElements.pop(),e.insertionMode=e.originalInsertionMode}function $it(e,t){e._err(t,Ne.eofInElementThatCanContainOnlyText),e.openElements.pop(),e.insertionMode=e.originalInsertionMode,e.onEof(t)}function a8(e,t){if(GEe.has(e.openElements.currentTagId))switch(e.pendingCharacterTokens.length=0,e.hasNonWhitespacePendingCharacterToken=!1,e.originalInsertionMode=e.insertionMode,e.insertionMode=ie.IN_TABLE_TEXT,t.type){case kn.CHARACTER:{txe(e,t);break}case kn.WHITESPACE_CHARACTER:{exe(e,t);break}}else wk(e,t)}function Mit(e,t){e.openElements.clearBackToTableContext(),e.activeFormattingElements.insertMarker(),e._insertElement(t,Fe.HTML),e.insertionMode=ie.IN_CAPTION}function Lit(e,t){e.openElements.clearBackToTableContext(),e._insertElement(t,Fe.HTML),e.insertionMode=ie.IN_COLUMN_GROUP}function Fit(e,t){e.openElements.clearBackToTableContext(),e._insertFakeElement(Ee.COLGROUP,R.COLGROUP),e.insertionMode=ie.IN_COLUMN_GROUP,ZY(e,t)}function jit(e,t){e.openElements.clearBackToTableContext(),e._insertElement(t,Fe.HTML),e.insertionMode=ie.IN_TABLE_BODY}function Bit(e,t){e.openElements.clearBackToTableContext(),e._insertFakeElement(Ee.TBODY,R.TBODY),e.insertionMode=ie.IN_TABLE_BODY,p6(e,t)}function Uit(e,t){e.openElements.hasInTableScope(R.TABLE)&&(e.openElements.popUntilTagNamePopped(R.TABLE),e._resetInsertionMode(),e._processStartTag(t))}function zit(e,t){QEe(t)?e._appendElement(t,Fe.HTML):wk(e,t),t.ackSelfClosing=!0}function Vit(e,t){!e.formElement&&e.openElements.tmplCount===0&&(e._insertElement(t,Fe.HTML),e.formElement=e.openElements.current,e.openElements.pop())}function BE(e,t){switch(t.tagID){case R.TD:case R.TH:case R.TR:{Bit(e,t);break}case R.STYLE:case R.SCRIPT:case R.TEMPLATE:{ad(e,t);break}case R.COL:{Fit(e,t);break}case R.FORM:{Vit(e,t);break}case R.TABLE:{Uit(e,t);break}case R.TBODY:case R.TFOOT:case R.THEAD:{jit(e,t);break}case R.INPUT:{zit(e,t);break}case R.CAPTION:{Mit(e,t);break}case R.COLGROUP:{Lit(e,t);break}default:wk(e,t)}}function LA(e,t){switch(t.tagID){case R.TABLE:{e.openElements.hasInTableScope(R.TABLE)&&(e.openElements.popUntilTagNamePopped(R.TABLE),e._resetInsertionMode());break}case R.TEMPLATE:{Hb(e,t);break}case R.BODY:case R.CAPTION:case R.COL:case R.COLGROUP:case R.HTML:case R.TBODY:case R.TD:case R.TFOOT:case R.TH:case R.THEAD:case R.TR:break;default:wk(e,t)}}function wk(e,t){const n=e.fosterParentingEnabled;e.fosterParentingEnabled=!0,d6(e,t),e.fosterParentingEnabled=n}function exe(e,t){e.pendingCharacterTokens.push(t)}function txe(e,t){e.pendingCharacterTokens.push(t),e.hasNonWhitespacePendingCharacterToken=!0}function AT(e,t){let n=0;if(e.hasNonWhitespacePendingCharacterToken)for(;n<e.pendingCharacterTokens.length;n++)wk(e,e.pendingCharacterTokens[n]);else for(;n<e.pendingCharacterTokens.length;n++)e._insertCharacters(e.pendingCharacterTokens[n]);e.insertionMode=e.originalInsertionMode,e._processToken(t)}const nxe=new Set([R.CAPTION,R.COL,R.COLGROUP,R.TBODY,R.TD,R.TFOOT,R.TH,R.THEAD,R.TR]);function Hit(e,t){const n=t.tagID;nxe.has(n)?e.openElements.hasInTableScope(R.CAPTION)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(R.CAPTION),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=ie.IN_TABLE,BE(e,t)):Aa(e,t)}function qit(e,t){const n=t.tagID;switch(n){case R.CAPTION:case R.TABLE:{e.openElements.hasInTableScope(R.CAPTION)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(R.CAPTION),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=ie.IN_TABLE,n===R.TABLE&&LA(e,t));break}case R.BODY:case R.COL:case R.COLGROUP:case R.HTML:case R.TBODY:case R.TD:case R.TFOOT:case R.TH:case R.THEAD:case R.TR:break;default:h6(e,t)}}function ZY(e,t){switch(t.tagID){case R.HTML:{Aa(e,t);break}case R.COL:{e._appendElement(t,Fe.HTML),t.ackSelfClosing=!0;break}case R.TEMPLATE:{ad(e,t);break}default:n3(e,t)}}function Wit(e,t){switch(t.tagID){case R.COLGROUP:{e.openElements.currentTagId===R.COLGROUP&&(e.openElements.pop(),e.insertionMode=ie.IN_TABLE);break}case R.TEMPLATE:{Hb(e,t);break}case R.COL:break;default:n3(e,t)}}function n3(e,t){e.openElements.currentTagId===R.COLGROUP&&(e.openElements.pop(),e.insertionMode=ie.IN_TABLE,e._processToken(t))}function p6(e,t){switch(t.tagID){case R.TR:{e.openElements.clearBackToTableBodyContext(),e._insertElement(t,Fe.HTML),e.insertionMode=ie.IN_ROW;break}case R.TH:case R.TD:{e.openElements.clearBackToTableBodyContext(),e._insertFakeElement(Ee.TR,R.TR),e.insertionMode=ie.IN_ROW,m6(e,t);break}case R.CAPTION:case R.COL:case R.COLGROUP:case R.TBODY:case R.TFOOT:case R.THEAD:{e.openElements.hasTableBodyContextInTableScope()&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=ie.IN_TABLE,BE(e,t));break}default:BE(e,t)}}function S7(e,t){const n=t.tagID;switch(t.tagID){case R.TBODY:case R.TFOOT:case R.THEAD:{e.openElements.hasInTableScope(n)&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=ie.IN_TABLE);break}case R.TABLE:{e.openElements.hasTableBodyContextInTableScope()&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=ie.IN_TABLE,LA(e,t));break}case R.BODY:case R.CAPTION:case R.COL:case R.COLGROUP:case R.HTML:case R.TD:case R.TH:case R.TR:break;default:LA(e,t)}}function m6(e,t){switch(t.tagID){case R.TH:case R.TD:{e.openElements.clearBackToTableRowContext(),e._insertElement(t,Fe.HTML),e.insertionMode=ie.IN_CELL,e.activeFormattingElements.insertMarker();break}case R.CAPTION:case R.COL:case R.COLGROUP:case R.TBODY:case R.TFOOT:case R.THEAD:case R.TR:{e.openElements.hasInTableScope(R.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=ie.IN_TABLE_BODY,p6(e,t));break}default:BE(e,t)}}function rxe(e,t){switch(t.tagID){case R.TR:{e.openElements.hasInTableScope(R.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=ie.IN_TABLE_BODY);break}case R.TABLE:{e.openElements.hasInTableScope(R.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=ie.IN_TABLE_BODY,S7(e,t));break}case R.TBODY:case R.TFOOT:case R.THEAD:{(e.openElements.hasInTableScope(t.tagID)||e.openElements.hasInTableScope(R.TR))&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=ie.IN_TABLE_BODY,S7(e,t));break}case R.BODY:case R.CAPTION:case R.COL:case R.COLGROUP:case R.HTML:case R.TD:case R.TH:break;default:LA(e,t)}}function Git(e,t){const n=t.tagID;nxe.has(n)?(e.openElements.hasInTableScope(R.TD)||e.openElements.hasInTableScope(R.TH))&&(e._closeTableCell(),m6(e,t)):Aa(e,t)}function Yit(e,t){const n=t.tagID;switch(n){case R.TD:case R.TH:{e.openElements.hasInTableScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=ie.IN_ROW);break}case R.TABLE:case R.TBODY:case R.TFOOT:case R.THEAD:case R.TR:{e.openElements.hasInTableScope(n)&&(e._closeTableCell(),rxe(e,t));break}case R.BODY:case R.CAPTION:case R.COL:case R.COLGROUP:case R.HTML:break;default:h6(e,t)}}function ixe(e,t){switch(t.tagID){case R.HTML:{Aa(e,t);break}case R.OPTION:{e.openElements.currentTagId===R.OPTION&&e.openElements.pop(),e._insertElement(t,Fe.HTML);break}case R.OPTGROUP:{e.openElements.currentTagId===R.OPTION&&e.openElements.pop(),e.openElements.currentTagId===R.OPTGROUP&&e.openElements.pop(),e._insertElement(t,Fe.HTML);break}case R.INPUT:case R.KEYGEN:case R.TEXTAREA:case R.SELECT:{e.openElements.hasInSelectScope(R.SELECT)&&(e.openElements.popUntilTagNamePopped(R.SELECT),e._resetInsertionMode(),t.tagID!==R.SELECT&&e._processStartTag(t));break}case R.SCRIPT:case R.TEMPLATE:{ad(e,t);break}}}function sxe(e,t){switch(t.tagID){case R.OPTGROUP:{e.openElements.stackTop>0&&e.openElements.currentTagId===R.OPTION&&e.openElements.tagIDs[e.openElements.stackTop-1]===R.OPTGROUP&&e.openElements.pop(),e.openElements.currentTagId===R.OPTGROUP&&e.openElements.pop();break}case R.OPTION:{e.openElements.currentTagId===R.OPTION&&e.openElements.pop();break}case R.SELECT:{e.openElements.hasInSelectScope(R.SELECT)&&(e.openElements.popUntilTagNamePopped(R.SELECT),e._resetInsertionMode());break}case R.TEMPLATE:{Hb(e,t);break}}}function Kit(e,t){const n=t.tagID;n===R.CAPTION||n===R.TABLE||n===R.TBODY||n===R.TFOOT||n===R.THEAD||n===R.TR||n===R.TD||n===R.TH?(e.openElements.popUntilTagNamePopped(R.SELECT),e._resetInsertionMode(),e._processStartTag(t)):ixe(e,t)}function Xit(e,t){const n=t.tagID;n===R.CAPTION||n===R.TABLE||n===R.TBODY||n===R.TFOOT||n===R.THEAD||n===R.TR||n===R.TD||n===R.TH?e.openElements.hasInTableScope(n)&&(e.openElements.popUntilTagNamePopped(R.SELECT),e._resetInsertionMode(),e.onEndTag(t)):sxe(e,t)}function Qit(e,t){switch(t.tagID){case R.BASE:case R.BASEFONT:case R.BGSOUND:case R.LINK:case R.META:case R.NOFRAMES:case R.SCRIPT:case R.STYLE:case R.TEMPLATE:case R.TITLE:{ad(e,t);break}case R.CAPTION:case R.COLGROUP:case R.TBODY:case R.TFOOT:case R.THEAD:{e.tmplInsertionModeStack[0]=ie.IN_TABLE,e.insertionMode=ie.IN_TABLE,BE(e,t);break}case R.COL:{e.tmplInsertionModeStack[0]=ie.IN_COLUMN_GROUP,e.insertionMode=ie.IN_COLUMN_GROUP,ZY(e,t);break}case R.TR:{e.tmplInsertionModeStack[0]=ie.IN_TABLE_BODY,e.insertionMode=ie.IN_TABLE_BODY,p6(e,t);break}case R.TD:case R.TH:{e.tmplInsertionModeStack[0]=ie.IN_ROW,e.insertionMode=ie.IN_ROW,m6(e,t);break}default:e.tmplInsertionModeStack[0]=ie.IN_BODY,e.insertionMode=ie.IN_BODY,Aa(e,t)}}function Jit(e,t){t.tagID===R.TEMPLATE&&Hb(e,t)}function oxe(e,t){e.openElements.tmplCount>0?(e.openElements.popUntilTagNamePopped(R.TEMPLATE),e.activeFormattingElements.clearToLastMarker(),e.tmplInsertionModeStack.shift(),e._resetInsertionMode(),e.onEof(t)):JY(e,t)}function Zit(e,t){t.tagID===R.HTML?Aa(e,t):r3(e,t)}function axe(e,t){var n;if(t.tagID===R.HTML){if(e.fragmentContext||(e.insertionMode=ie.AFTER_AFTER_BODY),e.options.sourceCodeLocationInfo&&e.openElements.tagIDs[0]===R.HTML){e._setEndLocation(e.openElements.items[0],t);const r=e.openElements.items[1];r&&!(!((n=e.treeAdapter.getNodeSourceCodeLocation(r))===null||n===void 0)&&n.endTag)&&e._setEndLocation(r,t)}}else r3(e,t)}function r3(e,t){e.insertionMode=ie.IN_BODY,d6(e,t)}function est(e,t){switch(t.tagID){case R.HTML:{Aa(e,t);break}case R.FRAMESET:{e._insertElement(t,Fe.HTML);break}case R.FRAME:{e._appendElement(t,Fe.HTML),t.ackSelfClosing=!0;break}case R.NOFRAMES:{ad(e,t);break}}}function tst(e,t){t.tagID===R.FRAMESET&&!e.openElements.isRootHtmlElementCurrent()&&(e.openElements.pop(),!e.fragmentContext&&e.openElements.currentTagId!==R.FRAMESET&&(e.insertionMode=ie.AFTER_FRAMESET))}function nst(e,t){switch(t.tagID){case R.HTML:{Aa(e,t);break}case R.NOFRAMES:{ad(e,t);break}}}function rst(e,t){t.tagID===R.HTML&&(e.insertionMode=ie.AFTER_AFTER_FRAMESET)}function ist(e,t){t.tagID===R.HTML?Aa(e,t):gD(e,t)}function gD(e,t){e.insertionMode=ie.IN_BODY,d6(e,t)}function sst(e,t){switch(t.tagID){case R.HTML:{Aa(e,t);break}case R.NOFRAMES:{ad(e,t);break}}}function ost(e,t){t.chars=vi,e._insertCharacters(t)}function ast(e,t){e._insertCharacters(t),e.framesetOk=!1}function uxe(e){for(;e.treeAdapter.getNamespaceURI(e.openElements.current)!==Fe.HTML&&!e._isIntegrationPoint(e.openElements.currentTagId,e.openElements.current);)e.openElements.pop()}function ust(e,t){if(xrt(t))uxe(e),e._startTagOutsideForeignContent(t);else{const n=e._getAdjustedCurrentElement(),r=e.treeAdapter.getNamespaceURI(n);r===Fe.MATHML?qEe(t):r===Fe.SVG&&(Srt(t),WEe(t)),XY(t),t.selfClosing?e._appendElement(t,r):e._insertElement(t,r),t.ackSelfClosing=!0}}function lst(e,t){if(t.tagID===R.P||t.tagID===R.BR){uxe(e),e._endTagOutsideForeignContent(t);return}for(let n=e.openElements.stackTop;n>0;n--){const r=e.openElements.items[n];if(e.treeAdapter.getNamespaceURI(r)===Fe.HTML){e._endTagOutsideForeignContent(t);break}const i=e.treeAdapter.getTagName(r);if(i.toLowerCase()===t.tagName){t.tagName=i,e.openElements.shortenToLength(n);break}}}Ee.AREA,Ee.BASE,Ee.BASEFONT,Ee.BGSOUND,Ee.BR,Ee.COL,Ee.EMBED,Ee.FRAME,Ee.HR,Ee.IMG,Ee.INPUT,Ee.KEYGEN,Ee.LINK,Ee.META,Ee.PARAM,Ee.SOURCE,Ee.TRACK,Ee.WBR;const cst=new Set(["mdxFlowExpression","mdxJsxFlowElement","mdxJsxTextElement","mdxTextExpression","mdxjsEsm"]),Sue={sourceCodeLocationInfo:!0,scriptingEnabled:!1};function lxe(e,t){const n=_st(e),r=kEe("type",{handlers:{root:fst,element:dst,text:hst,comment:fxe,doctype:pst,raw:gst},unknown:yst}),i={parser:n?new wue(Sue):wue.getFragmentParser(void 0,Sue),handle(a){r(a,i)},stitches:!1,options:t||{}};r(e,i),hS(i,Kh());const s=n?i.parser.document:i.parser.getFragment(),o=Ent(s,{file:i.options.file});return i.stitches&&WY(o,"comment",function(a,u,l){const c=a;if(c.value.stitch&&l&&u!==void 0){const f=l.children;return f[u]=c.value.stitch,u}}),o.type==="root"&&o.children.length===1&&o.children[0].type===e.type?o.children[0]:o}function cxe(e,t){let n=-1;if(e)for(;++n<e.length;)t.handle(e[n])}function fst(e,t){cxe(e.children,t)}function dst(e,t){vst(e,t),cxe(e.children,t),bst(e,t)}function hst(e,t){const n={type:kn.CHARACTER,chars:e.value,location:Ek(e)};hS(t,Kh(e)),t.parser.currentToken=n,t.parser._processToken(t.parser.currentToken)}function pst(e,t){const n={type:kn.DOCTYPE,name:"html",forceQuirks:!1,publicId:"",systemId:"",location:Ek(e)};hS(t,Kh(e)),t.parser.currentToken=n,t.parser._processToken(t.parser.currentToken)}function mst(e,t){t.stitches=!0;const n=wst(e);if("children"in e&&"children"in n){const r=lxe({type:"root",children:e.children},t.options);n.children=r.children}fxe({type:"comment",value:{stitch:n}},t)}function fxe(e,t){const n=e.value,r={type:kn.COMMENT,data:n,location:Ek(e)};hS(t,Kh(e)),t.parser.currentToken=r,t.parser._processToken(t.parser.currentToken)}function gst(e,t){if(t.parser.tokenizer.preprocessor.html="",t.parser.tokenizer.preprocessor.pos=-1,t.parser.tokenizer.preprocessor.lastGapPos=-2,t.parser.tokenizer.preprocessor.gapStack=[],t.parser.tokenizer.preprocessor.skipNextNewLine=!1,t.parser.tokenizer.preprocessor.lastChunkWritten=!1,t.parser.tokenizer.preprocessor.endOfChunkHit=!1,t.parser.tokenizer.preprocessor.isEol=!1,dxe(t,Kh(e)),t.parser.tokenizer.write(e.value,!1),t.parser.tokenizer._runParsingLoop(),t.parser.tokenizer.state===72||t.parser.tokenizer.state===78){t.parser.tokenizer.preprocessor.lastChunkWritten=!0;const n=t.parser.tokenizer._consume();t.parser.tokenizer._callState(n)}}function yst(e,t){const n=e;if(t.options.passThrough&&t.options.passThrough.includes(n.type))mst(n,t);else{let r="";throw cst.has(n.type)&&(r=". It looks like you are using MDX nodes with `hast-util-raw` (or `rehype-raw`). If you use this because you are using remark or rehype plugins that inject `'html'` nodes, then please raise an issue with that plugin, as its a bad and slow idea. If you use this because you are using markdown syntax, then you have to configure this utility (or plugin) to pass through these nodes (see `passThrough` in docs), but you can also migrate to use the MDX syntax"),new Error("Cannot compile `"+n.type+"` node"+r)}}function hS(e,t){dxe(e,t);const n=e.parser.tokenizer.currentCharacterToken;n&&n.location&&(n.location.endLine=e.parser.tokenizer.preprocessor.line,n.location.endCol=e.parser.tokenizer.preprocessor.col+1,n.location.endOffset=e.parser.tokenizer.preprocessor.offset+1,e.parser.currentToken=n,e.parser._processToken(e.parser.currentToken)),e.parser.tokenizer.paused=!1,e.parser.tokenizer.inLoop=!1,e.parser.tokenizer.active=!1,e.parser.tokenizer.returnState=os.DATA,e.parser.tokenizer.charRefCode=-1,e.parser.tokenizer.consumedAfterSnapshot=-1,e.parser.tokenizer.currentLocation=null,e.parser.tokenizer.currentCharacterToken=null,e.parser.tokenizer.currentToken=null,e.parser.tokenizer.currentAttr={name:"",value:""}}function dxe(e,t){if(t&&t.offset!==void 0){const n={startLine:t.line,startCol:t.column,startOffset:t.offset,endLine:-1,endCol:-1,endOffset:-1};e.parser.tokenizer.preprocessor.lineStartPos=-t.column+1,e.parser.tokenizer.preprocessor.droppedBufferSize=t.offset,e.parser.tokenizer.preprocessor.line=t.line,e.parser.tokenizer.currentLocation=n}}function vst(e,t){const n=e.tagName.toLowerCase();if(t.parser.tokenizer.state===os.PLAINTEXT)return;hS(t,Kh(e));const r=t.parser.openElements.current;let i="namespaceURI"in r?r.namespaceURI:o1.html;i===o1.html&&n==="svg"&&(i=o1.svg);const s=Ant({...e,children:[]},{space:i===o1.svg?"svg":"html"}),o={type:kn.START_TAG,tagName:n,tagID:dS(n),selfClosing:!1,ackSelfClosing:!1,attrs:"attrs"in s?s.attrs:[],location:Ek(e)};t.parser.currentToken=o,t.parser._processToken(t.parser.currentToken),t.parser.tokenizer.lastStartTagName=n}function bst(e,t){const n=e.tagName.toLowerCase();if(!t.parser.tokenizer.inForeignNode&&$nt.includes(n)||t.parser.tokenizer.state===os.PLAINTEXT)return;hS(t,u6(e));const r={type:kn.END_TAG,tagName:n,tagID:dS(n),selfClosing:!1,ackSelfClosing:!1,attrs:[],location:Ek(e)};t.parser.currentToken=r,t.parser._processToken(t.parser.currentToken),n===t.parser.tokenizer.lastStartTagName&&(t.parser.tokenizer.state===os.RCDATA||t.parser.tokenizer.state===os.RAWTEXT||t.parser.tokenizer.state===os.SCRIPT_DATA)&&(t.parser.tokenizer.state=os.DATA)}function _st(e){const t=e.type==="root"?e.children[0]:e;return!!(t&&(t.type==="doctype"||t.type==="element"&&t.tagName.toLowerCase()==="html"))}function Ek(e){const t=Kh(e)||{line:void 0,column:void 0,offset:void 0},n=u6(e)||{line:void 0,column:void 0,offset:void 0};return{startLine:t.line,startCol:t.column,startOffset:t.offset,endLine:n.line,endCol:n.column,endOffset:n.offset}}function wst(e){return"children"in e?jE({...e,children:[]}):jE(e)}function Est(e){return function(t,n){return lxe(t,{...e,file:n})}}function Ja({text:e,required:t}){const n={img({node:i,width:s,height:o,...a}){return b.jsx(Dy,{...a,h:o,w:s,ref:void 0})},p({node:i,...s}){return b.jsx(Xe,{...s,size:"xl",pb:8,fw:"inherit",ref:void 0})},h1({node:i,...s}){return b.jsx(li,{...s,order:1,...s,pb:12})},h2({node:i,...s}){return b.jsx(li,{...s,order:2,...s,pb:12})},h3({node:i,...s}){return b.jsx(li,{...s,order:3,...s,pb:12})},h4({node:i,...s}){return b.jsx(li,{...s,order:4,...s,pb:12})},h5({node:i,...s}){return b.jsx(li,{...s,order:5,...s,pb:12})},h6({node:i,...s}){return b.jsx(li,{...s,order:6,...s,pb:12})},a({node:i,...s}){return b.jsx(Lb,{...s,ref:void 0})},ul({node:i,...s}){return b.jsx(Bf,{withPadding:!0,...s,pb:8})},ol({node:i,type:s,...o}){return b.jsx(Bf,{type:"ordered",withPadding:!0,...o,pb:8})}};return b.jsx(lnt,{components:n,rehypePlugins:[Est],children:e+(t?'<span style="color: #fa5252; margin-left: 4px">*</span>':"")})}function T7({issues:e,type:t}){const n=`
    ${t==="error"?"There was an issue loading the study config. Please check the following issues:":"There were some warnings while loading the study config. Please check the following warnings:"}

    ${e.map(r=>`- You have an error at ${r.instancePath||"root"}: ${r.message} - ${JSON.stringify(r.params)}  `).join(`
`)}
  `.replace(/\n\s+/g,`
`);return b.jsx(Ja,{text:n})}const xst="https://github.com/revisit-studies/study/tree/main/public/";function Sst({globalConfig:e,studyConfigs:t}){const{configsList:n}=e,r=Yh();return b.jsx(ni.Main,{children:b.jsxs($c,{size:"xs",px:"xs",children:[b.jsx(Dy,{maw:150,mx:"auto",mb:"xl",radius:"md",src:`${Hu}revisitAssets/revisitLogoSquare.svg`,alt:"reVISit"}),b.jsx(Xe,{children:"Select an experiment to launch:"}),n.map(i=>{const s=t[i];if(!s)return null;const o=Uwe(i);return b.jsx(xs,{onClick:a=>{a.preventDefault(),r(`/${o}`)},my:"sm",style:{width:"100%"},children:b.jsxs(Fb,{shadow:"sm",radius:"md",withBorder:!0,children:[s.errors.length>0?b.jsxs(b.Fragment,{children:[b.jsx(Xe,{fw:"bold",children:i}),b.jsxs(Nt,{align:"center",direction:"row",children:[b.jsx(gae,{color:"red"}),b.jsx(Xe,{fw:"bold",ml:8,color:"red",children:"Errors"})]}),b.jsx(T7,{issues:s.errors,type:"error"})]}):b.jsxs(b.Fragment,{children:[b.jsxs(Nt,{direction:"row",justify:"space-between",children:[b.jsx(Xe,{fw:"bold",children:s.studyMetadata.title}),b.jsx(Mb,{onClick:a=>{a.stopPropagation()},variant:"transparent",size:20,style:{float:"right"},component:"a",href:`${Hu}${o}`,children:b.jsx(xQe,{style:{paddingTop:4}})})]}),b.jsxs(Xe,{c:"dimmed",children:[b.jsx(Xe,{span:!0,fw:500,children:"Authors: "}),s.studyMetadata.authors]}),b.jsx(Xe,{c:"dimmed",children:s.studyMetadata.description}),b.jsx(Xe,{c:"dimmed",ta:"right",style:{paddingRight:5},children:b.jsxs(Lb,{target:"_blank",onClick:a=>a.stopPropagation(),href:`${xst}${o}`,children:["View source:"," ",o]})})]}),s.warnings.length>0&&b.jsxs(b.Fragment,{children:[b.jsxs(Nt,{align:"center",direction:"row",children:[b.jsx(gae,{color:"orange"}),b.jsx(Xe,{fw:"bold",ml:8,color:"orange",children:"Warnings"})]}),b.jsx(T7,{issues:s.warnings,type:"warning"})]})]})},i)})]})})}var hxe={exports:{}},pxe={};/**
 * @license React
 * use-sync-external-store-with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xk=I;function Tst(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Cst=typeof Object.is=="function"?Object.is:Tst,Ast=xk.useSyncExternalStore,Ist=xk.useRef,kst=xk.useEffect,Rst=xk.useMemo,Nst=xk.useDebugValue;pxe.useSyncExternalStoreWithSelector=function(e,t,n,r,i){var s=Ist(null);if(s.current===null){var o={hasValue:!1,value:null};s.current=o}else o=s.current;s=Rst(function(){function u(h){if(!l){if(l=!0,c=h,h=r(h),i!==void 0&&o.hasValue){var p=o.value;if(i(p,h))return f=p}return f=h}if(p=f,Cst(c,h))return p;var m=r(h);return i!==void 0&&i(p,m)?p:(c=h,f=m)}var l=!1,c,f,d=n===void 0?null:n;return[function(){return u(t())},d===null?void 0:function(){return u(d())}]},[t,n,r,i]);var a=Ast(e,s[0],s[1]);return kst(function(){o.hasValue=!0,o.value=a},[a]),Nst(a),a};hxe.exports=pxe;var Pst=hxe.exports,Al="default"in mO?_r:mO,Tue=Symbol.for("react-redux-context"),Cue=typeof globalThis<"u"?globalThis:{};function Dst(){if(!Al.createContext)return{};const e=Cue[Tue]??(Cue[Tue]=new Map);let t=e.get(Al.createContext);return t||(t=Al.createContext(null),e.set(Al.createContext,t)),t}var z0=Dst(),Ost=()=>{throw new Error("uSES not initialized!")};function eK(e=z0){return function(){return Al.useContext(e)}}var mxe=eK(),gxe=Ost,$st=e=>{gxe=e},Mst=(e,t)=>e===t;function Lst(e=z0){const t=e===z0?mxe:eK(e),n=(r,i={})=>{const{equalityFn:s=Mst,devModeChecks:o={}}=typeof i=="function"?{equalityFn:i}:i,{store:a,subscription:u,getServerState:l,stabilityCheck:c,identityFunctionCheck:f}=t();Al.useRef(!0);const d=Al.useCallback({[r.name](p){return r(p)}}[r.name],[r,c,o.stabilityCheck]),h=gxe(u.addNestedSub,a.getState,l||a.getState,d,s);return Al.useDebugValue(h),h};return Object.assign(n,{withTypes:()=>n}),n}var Fst=Lst();function jst(e){e()}function Bst(){let e=null,t=null;return{clear(){e=null,t=null},notify(){jst(()=>{let n=e;for(;n;)n.callback(),n=n.next})},get(){const n=[];let r=e;for(;r;)n.push(r),r=r.next;return n},subscribe(n){let r=!0;const i=t={callback:n,next:null,prev:t};return i.prev?i.prev.next=i:e=i,function(){!r||e===null||(r=!1,i.next?i.next.prev=i.prev:t=i.prev,i.prev?i.prev.next=i.next:e=i.next)}}}}var Aue={notify(){},get:()=>[]};function Ust(e,t){let n,r=Aue,i=0,s=!1;function o(m){c();const g=r.subscribe(m);let y=!1;return()=>{y||(y=!0,g(),f())}}function a(){r.notify()}function u(){p.onStateChange&&p.onStateChange()}function l(){return s}function c(){i++,n||(n=e.subscribe(u),r=Bst())}function f(){i--,n&&i===0&&(n(),n=void 0,r.clear(),r=Aue)}function d(){s||(s=!0,c())}function h(){s&&(s=!1,f())}const p={addNestedSub:o,notifyNestedSubs:a,handleChangeWrapper:u,isSubscribed:l,trySubscribe:d,tryUnsubscribe:h,getListeners:()=>r};return p}var zst=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Vst=typeof navigator<"u"&&navigator.product==="ReactNative",Hst=zst||Vst?Al.useLayoutEffect:Al.useEffect;function qst({store:e,context:t,children:n,serverState:r,stabilityCheck:i="once",identityFunctionCheck:s="once"}){const o=Al.useMemo(()=>{const l=Ust(e);return{store:e,subscription:l,getServerState:r?()=>r:void 0,stabilityCheck:i,identityFunctionCheck:s}},[e,r,i,s]),a=Al.useMemo(()=>e.getState(),[e]);Hst(()=>{const{subscription:l}=o;return l.onStateChange=l.notifyNestedSubs,l.trySubscribe(),a!==e.getState()&&l.notifyNestedSubs(),()=>{l.tryUnsubscribe(),l.onStateChange=void 0}},[o,a]);const u=t||z0;return Al.createElement(u.Provider,{value:o},n)}var Wst=qst;function yxe(e=z0){const t=e===z0?mxe:eK(e),n=()=>{const{store:r}=t();return r};return Object.assign(n,{withTypes:()=>n}),n}var Gst=yxe();function Yst(e=z0){const t=e===z0?Gst:yxe(e),n=()=>t().dispatch;return Object.assign(n,{withTypes:()=>n}),n}var vxe=Yst();$st(Pst.useSyncExternalStoreWithSelector);function Eo(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var Kst=typeof Symbol=="function"&&Symbol.observable||"@@observable",Iue=Kst,u8=()=>Math.random().toString(36).substring(7).split("").join("."),Xst={INIT:`@@redux/INIT${u8()}`,REPLACE:`@@redux/REPLACE${u8()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${u8()}`},i3=Xst;function tK(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function bxe(e,t,n){if(typeof e!="function")throw new Error(Eo(2));if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(Eo(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(Eo(1));return n(bxe)(e,t)}let r=e,i=t,s=new Map,o=s,a=0,u=!1;function l(){o===s&&(o=new Map,s.forEach((g,y)=>{o.set(y,g)}))}function c(){if(u)throw new Error(Eo(3));return i}function f(g){if(typeof g!="function")throw new Error(Eo(4));if(u)throw new Error(Eo(5));let y=!0;l();const v=a++;return o.set(v,g),function(){if(y){if(u)throw new Error(Eo(6));y=!1,l(),o.delete(v),s=null}}}function d(g){if(!tK(g))throw new Error(Eo(7));if(typeof g.type>"u")throw new Error(Eo(8));if(typeof g.type!="string")throw new Error(Eo(17));if(u)throw new Error(Eo(9));try{u=!0,i=r(i,g)}finally{u=!1}return(s=o).forEach(v=>{v()}),g}function h(g){if(typeof g!="function")throw new Error(Eo(10));r=g,d({type:i3.REPLACE})}function p(){const g=f;return{subscribe(y){if(typeof y!="object"||y===null)throw new Error(Eo(11));function v(){const w=y;w.next&&w.next(c())}return v(),{unsubscribe:g(v)}},[Iue](){return this}}}return d({type:i3.INIT}),{dispatch:d,subscribe:f,getState:c,replaceReducer:h,[Iue]:p}}function Qst(e){Object.keys(e).forEach(t=>{const n=e[t];if(typeof n(void 0,{type:i3.INIT})>"u")throw new Error(Eo(12));if(typeof n(void 0,{type:i3.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Eo(13))})}function Jst(e){const t=Object.keys(e),n={};for(let s=0;s<t.length;s++){const o=t[s];typeof e[o]=="function"&&(n[o]=e[o])}const r=Object.keys(n);let i;try{Qst(n)}catch(s){i=s}return function(o={},a){if(i)throw i;let u=!1;const l={};for(let c=0;c<r.length;c++){const f=r[c],d=n[f],h=o[f],p=d(h,a);if(typeof p>"u")throw a&&a.type,new Error(Eo(14));l[f]=p,u=u||p!==h}return u=u||r.length!==Object.keys(o).length,u?l:o}}function s3(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,n)=>(...r)=>t(n(...r)))}function Zst(...e){return t=>(n,r)=>{const i=t(n,r);let s=()=>{throw new Error(Eo(15))};const o={getState:i.getState,dispatch:(u,...l)=>s(u,...l)},a=e.map(u=>u(o));return s=s3(...a)(i.dispatch),{...i,dispatch:s}}}function eot(e){return tK(e)&&"type"in e&&typeof e.type=="string"}var _xe=Symbol.for("immer-nothing"),kue=Symbol.for("immer-draftable"),jl=Symbol.for("immer-state");function xf(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var UE=Object.getPrototypeOf;function V0(e){return!!e&&!!e[jl]}function Sm(e){var t;return e?wxe(e)||Array.isArray(e)||!!e[kue]||!!((t=e.constructor)!=null&&t[kue])||y6(e)||v6(e):!1}var tot=Object.prototype.constructor.toString();function wxe(e){if(!e||typeof e!="object")return!1;const t=UE(e);if(t===null)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object?!0:typeof n=="function"&&Function.toString.call(n)===tot}function o3(e,t){g6(e)===0?Reflect.ownKeys(e).forEach(n=>{t(n,e[n],e)}):e.forEach((n,r)=>t(r,n,e))}function g6(e){const t=e[jl];return t?t.type_:Array.isArray(e)?1:y6(e)?2:v6(e)?3:0}function C7(e,t){return g6(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function Exe(e,t,n){const r=g6(e);r===2?e.set(t,n):r===3?e.add(n):e[t]=n}function not(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function y6(e){return e instanceof Map}function v6(e){return e instanceof Set}function Iv(e){return e.copy_||e.base_}function A7(e,t){if(y6(e))return new Map(e);if(v6(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const n=wxe(e);if(t===!0||t==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(e);delete r[jl];let i=Reflect.ownKeys(r);for(let s=0;s<i.length;s++){const o=i[s],a=r[o];a.writable===!1&&(a.writable=!0,a.configurable=!0),(a.get||a.set)&&(r[o]={configurable:!0,writable:!0,enumerable:a.enumerable,value:e[o]})}return Object.create(UE(e),r)}else{const r=UE(e);if(r!==null&&n)return{...e};const i=Object.create(r);return Object.assign(i,e)}}function nK(e,t=!1){return b6(e)||V0(e)||!Sm(e)||(g6(e)>1&&(e.set=e.add=e.clear=e.delete=rot),Object.freeze(e),t&&Object.entries(e).forEach(([n,r])=>nK(r,!0))),e}function rot(){xf(2)}function b6(e){return Object.isFrozen(e)}var iot={};function H1(e){const t=iot[e];return t||xf(0,e),t}var FA;function xxe(){return FA}function sot(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function Rue(e,t){t&&(H1("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function I7(e){k7(e),e.drafts_.forEach(oot),e.drafts_=null}function k7(e){e===FA&&(FA=e.parent_)}function Nue(e){return FA=sot(FA,e)}function oot(e){const t=e[jl];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function Pue(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return e!==void 0&&e!==n?(n[jl].modified_&&(I7(t),xf(4)),Sm(e)&&(e=a3(t,e),t.parent_||u3(t,e)),t.patches_&&H1("Patches").generateReplacementPatches_(n[jl].base_,e,t.patches_,t.inversePatches_)):e=a3(t,n,[]),I7(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==_xe?e:void 0}function a3(e,t,n){if(b6(t))return t;const r=t[jl];if(!r)return o3(t,(i,s)=>Due(e,r,t,i,s,n)),t;if(r.scope_!==e)return t;if(!r.modified_)return u3(e,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const i=r.copy_;let s=i,o=!1;r.type_===3&&(s=new Set(i),i.clear(),o=!0),o3(s,(a,u)=>Due(e,r,i,a,u,n,o)),u3(e,i,!1),n&&e.patches_&&H1("Patches").generatePatches_(r,n,e.patches_,e.inversePatches_)}return r.copy_}function Due(e,t,n,r,i,s,o){if(V0(i)){const a=s&&t&&t.type_!==3&&!C7(t.assigned_,r)?s.concat(r):void 0,u=a3(e,i,a);if(Exe(n,r,u),V0(u))e.canAutoFreeze_=!1;else return}else o&&n.add(i);if(Sm(i)&&!b6(i)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;a3(e,i),(!t||!t.scope_.parent_)&&typeof r!="symbol"&&Object.prototype.propertyIsEnumerable.call(n,r)&&u3(e,i)}}function u3(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&nK(t,n)}function aot(e,t){const n=Array.isArray(e),r={type_:n?1:0,scope_:t?t.scope_:xxe(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=r,s=rK;n&&(i=[r],s=jA);const{revoke:o,proxy:a}=Proxy.revocable(i,s);return r.draft_=a,r.revoke_=o,a}var rK={get(e,t){if(t===jl)return e;const n=Iv(e);if(!C7(n,t))return uot(e,n,t);const r=n[t];return e.finalized_||!Sm(r)?r:r===l8(e.base_,t)?(c8(e),e.copy_[t]=N7(r,e)):r},has(e,t){return t in Iv(e)},ownKeys(e){return Reflect.ownKeys(Iv(e))},set(e,t,n){const r=Sxe(Iv(e),t);if(r!=null&&r.set)return r.set.call(e.draft_,n),!0;if(!e.modified_){const i=l8(Iv(e),t),s=i==null?void 0:i[jl];if(s&&s.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if(not(n,i)&&(n!==void 0||C7(e.base_,t)))return!0;c8(e),R7(e)}return e.copy_[t]===n&&(n!==void 0||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty(e,t){return l8(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,c8(e),R7(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const n=Iv(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty(){xf(11)},getPrototypeOf(e){return UE(e.base_)},setPrototypeOf(){xf(12)}},jA={};o3(rK,(e,t)=>{jA[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});jA.deleteProperty=function(e,t){return jA.set.call(this,e,t,void 0)};jA.set=function(e,t,n){return rK.set.call(this,e[0],t,n,e[0])};function l8(e,t){const n=e[jl];return(n?Iv(n):e)[t]}function uot(e,t,n){var i;const r=Sxe(t,n);return r?"value"in r?r.value:(i=r.get)==null?void 0:i.call(e.draft_):void 0}function Sxe(e,t){if(!(t in e))return;let n=UE(e);for(;n;){const r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=UE(n)}}function R7(e){e.modified_||(e.modified_=!0,e.parent_&&R7(e.parent_))}function c8(e){e.copy_||(e.copy_=A7(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var lot=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,n,r)=>{if(typeof t=="function"&&typeof n!="function"){const s=n;n=t;const o=this;return function(u=s,...l){return o.produce(u,c=>n.call(this,c,...l))}}typeof n!="function"&&xf(6),r!==void 0&&typeof r!="function"&&xf(7);let i;if(Sm(t)){const s=Nue(this),o=N7(t,void 0);let a=!0;try{i=n(o),a=!1}finally{a?I7(s):k7(s)}return Rue(s,r),Pue(i,s)}else if(!t||typeof t!="object"){if(i=n(t),i===void 0&&(i=t),i===_xe&&(i=void 0),this.autoFreeze_&&nK(i,!0),r){const s=[],o=[];H1("Patches").generateReplacementPatches_(t,i,s,o),r(s,o)}return i}else xf(1,t)},this.produceWithPatches=(t,n)=>{if(typeof t=="function")return(o,...a)=>this.produceWithPatches(o,u=>t(u,...a));let r,i;return[this.produce(t,n,(o,a)=>{r=o,i=a}),r,i]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){Sm(e)||xf(8),V0(e)&&(e=Txe(e));const t=Nue(this),n=N7(e,void 0);return n[jl].isManual_=!0,k7(t),n}finishDraft(e,t){const n=e&&e[jl];(!n||!n.isManual_)&&xf(9);const{scope_:r}=n;return Rue(r,t),Pue(void 0,r)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const i=t[n];if(i.path.length===0&&i.op==="replace"){e=i.value;break}}n>-1&&(t=t.slice(n+1));const r=H1("Patches").applyPatches_;return V0(e)?r(e,t):this.produce(e,i=>r(i,t))}};function N7(e,t){const n=y6(e)?H1("MapSet").proxyMap_(e,t):v6(e)?H1("MapSet").proxySet_(e,t):aot(e,t);return(t?t.scope_:xxe()).drafts_.push(n),n}function Txe(e){return V0(e)||xf(10,e),Cxe(e)}function Cxe(e){if(!Sm(e)||b6(e))return e;const t=e[jl];let n;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=A7(e,t.scope_.immer_.useStrictShallowCopy_)}else n=A7(e,!0);return o3(n,(r,i)=>{Exe(n,r,Cxe(i))}),t&&(t.finalized_=!1),n}var Bl=new lot,Axe=Bl.produce;Bl.produceWithPatches.bind(Bl);Bl.setAutoFreeze.bind(Bl);Bl.setUseStrictShallowCopy.bind(Bl);Bl.applyPatches.bind(Bl);Bl.createDraft.bind(Bl);Bl.finishDraft.bind(Bl);function cot(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function fot(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function dot(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(n=>typeof n=="function")){const n=e.map(r=>typeof r=="function"?`function ${r.name||"unnamed"}()`:typeof r).join(", ");throw new TypeError(`${t}[${n}]`)}}var Oue=e=>Array.isArray(e)?e:[e];function hot(e){const t=Array.isArray(e[0])?e[0]:e;return dot(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function pot(e,t){const n=[],{length:r}=e;for(let i=0;i<r;i++)n.push(e[i].apply(null,t));return n}var mot=class{constructor(e){this.value=e}deref(){return this.value}},got=typeof WeakRef<"u"?WeakRef:mot,yot=0,$ue=1;function $N(){return{s:yot,v:void 0,o:null,p:null}}function iK(e,t={}){let n=$N();const{resultEqualityCheck:r}=t;let i,s=0;function o(){var f;let a=n;const{length:u}=arguments;for(let d=0,h=u;d<h;d++){const p=arguments[d];if(typeof p=="function"||typeof p=="object"&&p!==null){let m=a.o;m===null&&(a.o=m=new WeakMap);const g=m.get(p);g===void 0?(a=$N(),m.set(p,a)):a=g}else{let m=a.p;m===null&&(a.p=m=new Map);const g=m.get(p);g===void 0?(a=$N(),m.set(p,a)):a=g}}const l=a;let c;if(a.s===$ue)c=a.v;else if(c=e.apply(null,arguments),s++,r){const d=((f=i==null?void 0:i.deref)==null?void 0:f.call(i))??i;d!=null&&r(d,c)&&(c=d,s!==0&&s--),i=typeof c=="object"&&c!==null||typeof c=="function"?new got(c):c}return l.s=$ue,l.v=c,c}return o.clearCache=()=>{n=$N(),o.resetResultsCount()},o.resultsCount=()=>s,o.resetResultsCount=()=>{s=0},o}function Ixe(e,...t){const n=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,r=(...i)=>{let s=0,o=0,a,u={},l=i.pop();typeof l=="object"&&(u=l,l=i.pop()),cot(l,`createSelector expects an output function after the inputs, but received: [${typeof l}]`);const c={...n,...u},{memoize:f,memoizeOptions:d=[],argsMemoize:h=iK,argsMemoizeOptions:p=[],devModeChecks:m={}}=c,g=Oue(d),y=Oue(p),v=hot(i),_=f(function(){return s++,l.apply(null,arguments)},...g),w=h(function(){o++;const S=pot(v,arguments);return a=_.apply(null,S),a},...y);return Object.assign(w,{resultFunc:l,memoizedResultFunc:_,dependencies:v,dependencyRecomputations:()=>o,resetDependencyRecomputations:()=>{o=0},lastResult:()=>a,recomputations:()=>s,resetRecomputations:()=>{s=0},memoize:f,argsMemoize:h})};return Object.assign(r,{withTypes:()=>r}),r}var vot=Ixe(iK),bot=Object.assign((e,t=vot)=>{fot(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const n=Object.keys(e),r=n.map(s=>e[s]);return t(r,(...s)=>s.reduce((o,a,u)=>(o[n[u]]=a,o),{}))},{withTypes:()=>bot});function kxe(e){return({dispatch:n,getState:r})=>i=>s=>typeof s=="function"?s(n,r,e):i(s)}var _ot=kxe(),wot=kxe,Eot=(...e)=>{const t=Ixe(...e),n=Object.assign((...r)=>{const i=t(...r),s=(o,...a)=>i(V0(o)?Txe(o):o,...a);return Object.assign(s,i),s},{withTypes:()=>n});return n};Eot(iK);var xot=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?s3:s3.apply(null,arguments)};function zE(e,t){function n(...r){if(t){let i=t(...r);if(!i)throw new Error(Wu(0));return{type:e,payload:i.payload,..."meta"in i&&{meta:i.meta},..."error"in i&&{error:i.error}}}return{type:e,payload:r[0]}}return n.toString=()=>`${e}`,n.type=e,n.match=r=>eot(r)&&r.type===e,n}var Rxe=class w2 extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,w2.prototype)}static get[Symbol.species](){return w2}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new w2(...t[0].concat(this)):new w2(...t.concat(this))}};function Mue(e){return Sm(e)?Axe(e,()=>{}):e}function Lue(e,t,n){if(e.has(t)){let i=e.get(t);return n.update&&(i=n.update(i,t,e),e.set(t,i)),i}if(!n.insert)throw new Error(Wu(10));const r=n.insert(t,e);return e.set(t,r),r}function Sot(e){return typeof e=="boolean"}var Tot=()=>function(t){const{thunk:n=!0,immutableCheck:r=!0,serializableCheck:i=!0,actionCreatorCheck:s=!0}=t??{};let o=new Rxe;return n&&(Sot(n)?o.push(_ot):o.push(wot(n.extraArgument))),o},Cot="RTK_autoBatch",Nxe=e=>t=>{setTimeout(t,e)},Aot=typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:Nxe(10),Iot=(e={type:"raf"})=>t=>(...n)=>{const r=t(...n);let i=!0,s=!1,o=!1;const a=new Set,u=e.type==="tick"?queueMicrotask:e.type==="raf"?Aot:e.type==="callback"?e.queueNotification:Nxe(e.timeout),l=()=>{o=!1,s&&(s=!1,a.forEach(c=>c()))};return Object.assign({},r,{subscribe(c){const f=()=>i&&c(),d=r.subscribe(f);return a.add(c),()=>{d(),a.delete(c)}},dispatch(c){var f;try{return i=!((f=c==null?void 0:c.meta)!=null&&f[Cot]),s=!i,s&&(o||(o=!0,u(l))),r.dispatch(c)}finally{i=!0}}})},kot=e=>function(n){const{autoBatch:r=!0}=n??{};let i=new Rxe(e);return r&&i.push(Iot(typeof r=="object"?r:void 0)),i},Rot=!0;function Not(e){const t=Tot(),{reducer:n=void 0,middleware:r,devTools:i=!0,preloadedState:s=void 0,enhancers:o=void 0}=e||{};let a;if(typeof n=="function")a=n;else if(tK(n))a=Jst(n);else throw new Error(Wu(1));let u;typeof r=="function"?u=r(t):u=t();let l=s3;i&&(l=xot({trace:!Rot,...typeof i=="object"&&i}));const c=Zst(...u),f=kot(c);let d=typeof o=="function"?o(f):f();const h=l(...d);return bxe(a,s,h)}function Pxe(e){const t={},n=[];let r;const i={addCase(s,o){const a=typeof s=="string"?s:s.type;if(!a)throw new Error(Wu(28));if(a in t)throw new Error(Wu(29));return t[a]=o,i},addMatcher(s,o){return n.push({matcher:s,reducer:o}),i},addDefaultCase(s){return r=s,i}};return e(i),[t,n,r]}function Pot(e){return typeof e=="function"}function Dot(e,t){let[n,r,i]=Pxe(t),s;if(Pot(e))s=()=>Mue(e());else{const a=Mue(e);s=()=>a}function o(a=s(),u){let l=[n[u.type],...r.filter(({matcher:c})=>c(u)).map(({reducer:c})=>c)];return l.filter(c=>!!c).length===0&&(l=[i]),l.reduce((c,f)=>{if(f)if(V0(c)){const h=f(c,u);return h===void 0?c:h}else{if(Sm(c))return Axe(c,d=>f(d,u));{const d=f(c,u);if(d===void 0){if(c===null)return c;throw new Error(Wu(9))}return d}}return c},a)}return o.getInitialState=s,o}var Oot="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",$ot=(e=21)=>{let t="",n=e;for(;n--;)t+=Oot[Math.random()*64|0];return t},Mot=Symbol.for("rtk-slice-createasyncthunk");function Lot(e,t){return`${e}/${t}`}function Fot({creators:e}={}){var n;const t=(n=e==null?void 0:e.asyncThunk)==null?void 0:n[Mot];return function(i){const{name:s,reducerPath:o=s}=i;if(!s)throw new Error(Wu(11));typeof process<"u";const a=(typeof i.reducers=="function"?i.reducers(Uot()):i.reducers)||{},u=Object.keys(a),l={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},c={addCase(_,w){const E=typeof _=="string"?_:_.type;if(!E)throw new Error(Wu(12));if(E in l.sliceCaseReducersByType)throw new Error(Wu(13));return l.sliceCaseReducersByType[E]=w,c},addMatcher(_,w){return l.sliceMatchers.push({matcher:_,reducer:w}),c},exposeAction(_,w){return l.actionCreators[_]=w,c},exposeCaseReducer(_,w){return l.sliceCaseReducersByName[_]=w,c}};u.forEach(_=>{const w=a[_],E={reducerName:_,type:Lot(s,_),createNotation:typeof i.reducers=="function"};Vot(w)?qot(E,w,c,t):zot(E,w,c)});function f(){const[_={},w=[],E=void 0]=typeof i.extraReducers=="function"?Pxe(i.extraReducers):[i.extraReducers],S={..._,...l.sliceCaseReducersByType};return Dot(i.initialState,T=>{for(let C in S)T.addCase(C,S[C]);for(let C of l.sliceMatchers)T.addMatcher(C.matcher,C.reducer);for(let C of w)T.addMatcher(C.matcher,C.reducer);E&&T.addDefaultCase(E)})}const d=_=>_,h=new Map;let p;function m(_,w){return p||(p=f()),p(_,w)}function g(){return p||(p=f()),p.getInitialState()}function y(_,w=!1){function E(T){let C=T[_];return typeof C>"u"&&w&&(C=g()),C}function S(T=d){const C=Lue(h,w,{insert:()=>new WeakMap});return Lue(C,T,{insert:()=>{const A={};for(const[k,N]of Object.entries(i.selectors??{}))A[k]=jot(N,T,g,w);return A}})}return{reducerPath:_,getSelectors:S,get selectors(){return S(E)},selectSlice:E}}const v={name:s,reducer:m,actions:l.actionCreators,caseReducers:l.sliceCaseReducersByName,getInitialState:g,...y(o),injectInto(_,{reducerPath:w,...E}={}){const S=w??o;return _.inject({reducerPath:S,reducer:m},E),{...v,...y(S,!0)}}};return v}}function jot(e,t,n,r){function i(s,...o){let a=t(s);return typeof a>"u"&&r&&(a=n()),e(a,...o)}return i.unwrapped=e,i}var Bot=Fot();function Uot(){function e(t,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...n}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...n){return t(...n)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:n}},asyncThunk:e}}function zot({type:e,reducerName:t,createNotation:n},r,i){let s,o;if("reducer"in r){if(n&&!Hot(r))throw new Error(Wu(17));s=r.reducer,o=r.prepare}else s=r;i.addCase(e,s).exposeCaseReducer(t,s).exposeAction(t,o?zE(e,o):zE(e))}function Vot(e){return e._reducerDefinitionType==="asyncThunk"}function Hot(e){return e._reducerDefinitionType==="reducerWithPrepare"}function qot({type:e,reducerName:t},n,r,i){if(!i)throw new Error(Wu(18));const{payloadCreator:s,fulfilled:o,pending:a,rejected:u,settled:l,options:c}=n,f=i(e,s,c);r.exposeAction(t,f),o&&r.addCase(f.fulfilled,o),a&&r.addCase(f.pending,a),u&&r.addCase(f.rejected,u),l&&r.addMatcher(f.settled,l),r.exposeCaseReducer(t,{fulfilled:o||MN,pending:a||MN,rejected:u||MN,settled:l||MN})}function MN(){}var Wot=(e,t)=>{if(typeof e!="function")throw new Error(Wu(32))},sK="listenerMiddleware",Got=e=>{let{type:t,actionCreator:n,matcher:r,predicate:i,effect:s}=e;if(t)i=zE(t).match;else if(n)t=n.type,i=n.match;else if(r)i=r;else if(!i)throw new Error(Wu(21));return Wot(s),{predicate:i,type:t,effect:s}},Yot=Object.assign(e=>{const{type:t,predicate:n,effect:r}=Got(e);return{id:$ot(),effect:r,type:t,predicate:n,pending:new Set,unsubscribe:()=>{throw new Error(Wu(22))}}},{withTypes:()=>Yot}),Kot=Object.assign(zE(`${sK}/add`),{withTypes:()=>Kot});zE(`${sK}/removeAll`);var Xot=Object.assign(zE(`${sK}/remove`),{withTypes:()=>Xot});function Wu(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}function Tm(e){return e.components.flatMap(t=>typeof t=="string"?t:Tm(t))}function Dxe(e){var t;return[...e.components.flatMap(n=>typeof n=="string"?n:Dxe(n)),...((t=e.interruptions)==null?void 0:t.flatMap(n=>n.components))||[]]}function Oxe(e,t,n){let r=0;for(let i=0;i<e.components.length;i+=1){const s=e.components[i];if(typeof s=="string"){if(typeof t=="number"&&t===n+r)return[{currentBlock:e,firstIndex:n,lastIndex:n+Tm(e).length-1}];if(typeof t=="string"&&e.orderPath===t)return[{currentBlock:e,firstIndex:n,lastIndex:n+Tm(e).length-1}];r+=1}else{const o=Oxe(s,t,n+r);if(typeof o=="number")r+=o;else{const a={currentBlock:e,firstIndex:n,lastIndex:o[0].lastIndex};return[...o,a]}}}return r}function $xe(e,t){const n=Oxe(e,t,0);return typeof n=="number"?null:n}function Mxe(e,t,n){if(e.id===t)return{found:!0,distance:n};let r=0;for(let i=0;i<e.components.length;i+=1){const s=e.components[i];if(typeof s=="string")r+=1;else{const o=Mxe(s,t,n+r);if(o.found)return o;r+=o.distance}}return{found:!1,distance:r}}function Qot(e,t){const n=Mxe(e,t,0);return n.found?n.distance:-1}function Lxe(e,t="root"){const n=[],r={};return e.components.forEach((i,s)=>{typeof i=="string"?(n.push({componentName:i,orderPath:t,timesSeenInBlock:r[i]||0}),r[i]=r[i]?r[i]+1:1):n.push(...Lxe(i,`${t}-${s}`))}),n}function oK(e,t){return typeof e=="string"?e:{...e,orderPath:t,components:e.components.map((n,r)=>oK(n,`${t}-${r}`))}}async function Jot(e,t,n,r,i){const s=Tm(n),o=Object.fromEntries(s.filter(d=>d!=="end").map((d,h)=>[`${d}_${h}`,{answer:{}}])),a=Object.assign({},...s.map((d,h)=>({[`${d}_${h}`]:{aboveStimulus:{valid:!1,values:{}},belowStimulus:{valid:!1,values:{}},sidebar:{valid:!1,values:{}}}}))),u=Object.assign({},...s.map((d,h)=>({[`${d}_${h}`]:{aboveStimulus:!0,belowStimulus:!0,sidebar:!0,values:{}}}))),l={studyId:e,answers:Object.keys(i).length>0?i:o,sequence:n,config:t,showStudyBrowser:!0,showHelpText:!1,alertModal:{show:!1,message:""},trialValidation:i?u:a,iframeAnswers:{},iframeProvenance:null,metadata:r},c=Bot({name:"storeSlice",initialState:l,reducers:{setConfig(d,h){d.config=h.payload},toggleStudyBrowser:d=>{d.showStudyBrowser=!d.showStudyBrowser},toggleShowHelpText:d=>{d.showHelpText=!d.showHelpText},setAlertModal:(d,h)=>{d.alertModal=h.payload},setIframeAnswers:(d,h)=>{d.iframeAnswers=h.payload},setIframeProvenance:(d,h)=>{d.iframeProvenance=h.payload},updateResponseBlockValidation:(d,{payload:h})=>{d.trialValidation[h.identifier]||(d.trialValidation[h.identifier]={aboveStimulus:{valid:!1,values:{}},belowStimulus:{valid:!1,values:{}},sidebar:{valid:!1,values:{}},provenanceGraph:void 0}),d.trialValidation[h.identifier][h.location]={valid:h.status,values:h.values},h.provenanceGraph&&(d.trialValidation[h.identifier].provenanceGraph=h.provenanceGraph)},saveTrialAnswer(d,{payload:h}){const{identifier:p,answer:m,startTime:g,endTime:y,provenanceGraph:v,windowEvents:_}=h;d.answers[p]={answer:m,startTime:g,endTime:y,provenanceGraph:v,windowEvents:_}}}});return{store:Not({reducer:c.reducer,preloadedState:l}),actions:c.actions}}const Fxe=I.createContext(null);function Xh(){return I.useContext(Fxe).actions}const Qh=vxe,Kc=Fst;function Zot(e){return Kc(t=>{if(e.includes("reviewer-"))return!0;const n=Object.values(t.trialValidation[e]).every(r=>typeof r=="object"&&"valid"in r?r.valid:!0);return n?Object.values(n).every(r=>r):!1})}function aK(){return Kc(e=>Tm(e.sequence))}function qb(){const{studyId:e}=Em();return`${e}`}function Zm(){const{index:e}=Em(),t=parseInt(e||"0",10);return Number.isNaN(t)?e:t}function Ly(){const e=Zm(),t=aK();return typeof e=="number"?t[e]:e.replace("reviewer-","")}var l3={exports:{}};l3.exports;(function(e,t){var n=200,r="__lodash_hash_undefined__",i=800,s=16,o=9007199254740991,a="[object Arguments]",u="[object Array]",l="[object AsyncFunction]",c="[object Boolean]",f="[object Date]",d="[object Error]",h="[object Function]",p="[object GeneratorFunction]",m="[object Map]",g="[object Number]",y="[object Null]",v="[object Object]",_="[object Proxy]",w="[object RegExp]",E="[object Set]",S="[object String]",T="[object Undefined]",C="[object WeakMap]",A="[object ArrayBuffer]",k="[object DataView]",N="[object Float32Array]",O="[object Float64Array]",D="[object Int8Array]",$="[object Int16Array]",F="[object Int32Array]",M="[object Uint8Array]",B="[object Uint8ClampedArray]",U="[object Uint16Array]",H="[object Uint32Array]",P=/[\\^$.*+?()[\]{}|]/g,z=/^\[object .+?Constructor\]$/,W=/^(?:0|[1-9]\d*)$/,j={};j[N]=j[O]=j[D]=j[$]=j[F]=j[M]=j[B]=j[U]=j[H]=!0,j[a]=j[u]=j[A]=j[c]=j[k]=j[f]=j[d]=j[h]=j[m]=j[g]=j[v]=j[w]=j[E]=j[S]=j[C]=!1;var q=typeof to=="object"&&to&&to.Object===Object&&to,G=typeof self=="object"&&self&&self.Object===Object&&self,ne=q||G||Function("return this")(),ce=t&&!t.nodeType&&t,de=ce&&!0&&e&&!e.nodeType&&e,he=de&&de.exports===ce,ve=he&&q.process,Ie=function(){try{var te=de&&de.require&&de.require("util").types;return te||ve&&ve.binding&&ve.binding("util")}catch{}}(),be=Ie&&Ie.isTypedArray;function Ke(te,ue,Re){switch(Re.length){case 0:return te.call(ue);case 1:return te.call(ue,Re[0]);case 2:return te.call(ue,Re[0],Re[1]);case 3:return te.call(ue,Re[0],Re[1],Re[2])}return te.apply(ue,Re)}function Ue(te,ue){for(var Re=-1,At=Array(te);++Re<te;)At[Re]=ue(Re);return At}function yt(te){return function(ue){return te(ue)}}function it(te,ue){return te==null?void 0:te[ue]}function _e(te,ue){return function(Re){return te(ue(Re))}}var ke=Array.prototype,ze=Function.prototype,ct=Object.prototype,Ot=ne["__core-js_shared__"],We=ze.toString,ge=ct.hasOwnProperty,ht=function(){var te=/[^.]+$/.exec(Ot&&Ot.keys&&Ot.keys.IE_PROTO||"");return te?"Symbol(src)_1."+te:""}(),vt=ct.toString,me=We.call(Object),Ae=RegExp("^"+We.call(ge).replace(P,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),He=he?ne.Buffer:void 0,ut=ne.Symbol,_t=ne.Uint8Array;He&&He.allocUnsafe;var Ln=_e(Object.getPrototypeOf,Object),Cr=Object.create,Fn=ct.propertyIsEnumerable,cr=ke.splice,gn=ut?ut.toStringTag:void 0,An=function(){try{var te=qe(Object,"defineProperty");return te({},"",{}),te}catch{}}(),nr=He?He.isBuffer:void 0,rr=Math.max,zo=Date.now,$i=qe(ne,"Map"),In=qe(Object,"create"),Mi=function(){function te(){}return function(ue){if(!vp(ue))return{};if(Cr)return Cr(ue);te.prototype=ue;var Re=new te;return te.prototype=void 0,Re}}();function Ar(te){var ue=-1,Re=te==null?0:te.length;for(this.clear();++ue<Re;){var At=te[ue];this.set(At[0],At[1])}}function gs(){this.__data__=In?In(null):{},this.size=0}function pp(te){var ue=this.has(te)&&delete this.__data__[te];return this.size-=ue?1:0,ue}function fl(te){var ue=this.__data__;if(In){var Re=ue[te];return Re===r?void 0:Re}return ge.call(ue,te)?ue[te]:void 0}function _d(te){var ue=this.__data__;return In?ue[te]!==void 0:ge.call(ue,te)}function xr(te,ue){var Re=this.__data__;return this.size+=this.has(te)?0:1,Re[te]=In&&ue===void 0?r:ue,this}Ar.prototype.clear=gs,Ar.prototype.delete=pp,Ar.prototype.get=fl,Ar.prototype.has=_d,Ar.prototype.set=xr;function Ii(te){var ue=-1,Re=te==null?0:te.length;for(this.clear();++ue<Re;){var At=te[ue];this.set(At[0],At[1])}}function Qr(){this.__data__=[],this.size=0}function fu(te){var ue=this.__data__,Re=Jn(ue,te);if(Re<0)return!1;var At=ue.length-1;return Re==At?ue.pop():cr.call(ue,Re,1),--this.size,!0}function Ia(te){var ue=this.__data__,Re=Jn(ue,te);return Re<0?void 0:ue[Re][1]}function ka(te){return Jn(this.__data__,te)>-1}function oe(te,ue){var Re=this.__data__,At=Jn(Re,te);return At<0?(++this.size,Re.push([te,ue])):Re[At][1]=ue,this}Ii.prototype.clear=Qr,Ii.prototype.delete=fu,Ii.prototype.get=Ia,Ii.prototype.has=ka,Ii.prototype.set=oe;function ee(te){var ue=-1,Re=te==null?0:te.length;for(this.clear();++ue<Re;){var At=te[ue];this.set(At[0],At[1])}}function ae(){this.size=0,this.__data__={hash:new Ar,map:new($i||Ii),string:new Ar}}function Ce(te){var ue=Ve(this,te).delete(te);return this.size-=ue?1:0,ue}function Se(te){return Ve(this,te).get(te)}function ot(te){return Ve(this,te).has(te)}function St(te,ue){var Re=Ve(this,te),At=Re.size;return Re.set(te,ue),this.size+=Re.size==At?0:1,this}ee.prototype.clear=ae,ee.prototype.delete=Ce,ee.prototype.get=Se,ee.prototype.has=ot,ee.prototype.set=St;function Ht(te){var ue=this.__data__=new Ii(te);this.size=ue.size}function On(){this.__data__=new Ii,this.size=0}function jn(te){var ue=this.__data__,Re=ue.delete(te);return this.size=ue.size,Re}function pn(te){return this.__data__.get(te)}function ir(te){return this.__data__.has(te)}function Ir(te,ue){var Re=this.__data__;if(Re instanceof Ii){var At=Re.__data__;if(!$i||At.length<n-1)return At.push([te,ue]),this.size=++Re.size,this;Re=this.__data__=new ee(At)}return Re.set(te,ue),this.size=Re.size,this}Ht.prototype.clear=On,Ht.prototype.delete=jn,Ht.prototype.get=pn,Ht.prototype.has=ir,Ht.prototype.set=Ir;function Vt(te,ue){var Re=gp(te),At=!Re&&du(te),$n=!Re&&!At&&yp(te),Sr=!Re&&!At&&!$n&&ZR(te),qr=Re||At||$n||Sr,Un=qr?Ue(te.length,String):[],Wr=Un.length;for(var Zi in te)qr&&(Zi=="length"||$n&&(Zi=="offset"||Zi=="parent")||Sr&&(Zi=="buffer"||Zi=="byteLength"||Zi=="byteOffset")||Et(Zi,Wr))||Un.push(Zi);return Un}function sr(te,ue,Re){(Re!==void 0&&!rc(te[ue],Re)||Re===void 0&&!(ue in te))&&ki(te,ue,Re)}function Hr(te,ue,Re){var At=te[ue];(!(ge.call(te,ue)&&rc(At,Re))||Re===void 0&&!(ue in te))&&ki(te,ue,Re)}function Jn(te,ue){for(var Re=te.length;Re--;)if(rc(te[Re][0],ue))return Re;return-1}function ki(te,ue,Re){ue=="__proto__"&&An?An(te,ue,{configurable:!0,enumerable:!0,value:Re,writable:!0}):te[ue]=Re}var Hs=Oe();function Jr(te){return te==null?te===void 0?T:y:gn&&gn in Object(te)?Ge(te):Ho(te)}function mo(te){return hu(te)&&Jr(te)==a}function Li(te){if(!vp(te)||Bn(te))return!1;var ue=fT(te)?Ae:z;return ue.test(XR(te))}function Fi(te){return hu(te)&&JR(te.length)&&!!j[Jr(te)]}function Vo(te){if(!vp(te))return Rr(te);var ue=kr(te),Re=[];for(var At in te)At=="constructor"&&(ue||!ge.call(te,At))||Re.push(At);return Re}function Ra(te,ue,Re,At,$n){te!==ue&&Hs(ue,function(Sr,qr){if($n||($n=new Ht),vp(Sr))qs(te,ue,qr,Re,Ra,At,$n);else{var Un=At?At(mp(te,qr),Sr,qr+"",te,ue,$n):void 0;Un===void 0&&(Un=Sr),sr(te,qr,Un)}},uv)}function qs(te,ue,Re,At,$n,Sr,qr){var Un=mp(te,Re),Wr=mp(ue,Re),Zi=qr.get(Wr);if(Zi){sr(te,Re,Zi);return}var qo=Sr?Sr(Un,Wr,Re+"",te,ue,qr):void 0,cv=qo===void 0;if(cv){var bp=gp(Wr),__=!bp&&yp(Wr),w_=!bp&&!__&&ZR(Wr);qo=Wr,bp||__||w_?gp(Un)?qo=Un:QR(Un)?qo=fe(Un):__?(cv=!1,qo=Y(Wr)):w_?(cv=!1,qo=Z(Wr)):qo=[]:K5(Wr)||du(Wr)?(qo=Un,du(Un)?qo=av(Un):(!vp(Un)||fT(Un))&&(qo=st(Wr))):cv=!1}cv&&(qr.set(Wr,qo),$n(qo,Wr,At,Sr,qr),qr.delete(Wr)),sr(te,Re,qo)}function nc(te,ue){return cT(Ed(te,ue,gg),te+"")}var wd=An?function(te,ue){return An(te,"toString",{configurable:!0,enumerable:!1,value:lv(ue),writable:!0})}:gg;function Y(te,ue){return te.slice()}function se(te){var ue=new te.constructor(te.byteLength);return new _t(ue).set(new _t(te)),ue}function Z(te,ue){var Re=se(te.buffer);return new te.constructor(Re,te.byteOffset,te.length)}function fe(te,ue){var Re=-1,At=te.length;for(ue||(ue=Array(At));++Re<At;)ue[Re]=te[Re];return ue}function ye(te,ue,Re,At){var $n=!Re;Re||(Re={});for(var Sr=-1,qr=ue.length;++Sr<qr;){var Un=ue[Sr],Wr=void 0;Wr===void 0&&(Wr=te[Un]),$n?ki(Re,Un,Wr):Hr(Re,Un,Wr)}return Re}function le(te){return nc(function(ue,Re){var At=-1,$n=Re.length,Sr=$n>1?Re[$n-1]:void 0,qr=$n>2?Re[2]:void 0;for(Sr=te.length>3&&typeof Sr=="function"?($n--,Sr):void 0,qr&&mn(Re[0],Re[1],qr)&&(Sr=$n<3?void 0:Sr,$n=1),ue=Object(ue);++At<$n;){var Un=Re[At];Un&&te(ue,Un,At,Sr)}return ue})}function Oe(te){return function(ue,Re,At){for(var $n=-1,Sr=Object(ue),qr=At(ue),Un=qr.length;Un--;){var Wr=qr[++$n];if(Re(Sr[Wr],Wr,Sr)===!1)break}return ue}}function Ve(te,ue){var Re=te.__data__;return Pt(ue)?Re[typeof ue=="string"?"string":"hash"]:Re.map}function qe(te,ue){var Re=it(te,ue);return Li(Re)?Re:void 0}function Ge(te){var ue=ge.call(te,gn),Re=te[gn];try{te[gn]=void 0;var At=!0}catch{}var $n=vt.call(te);return At&&(ue?te[gn]=Re:delete te[gn]),$n}function st(te){return typeof te.constructor=="function"&&!kr(te)?Mi(Ln(te)):{}}function Et(te,ue){var Re=typeof te;return ue=ue??o,!!ue&&(Re=="number"||Re!="symbol"&&W.test(te))&&te>-1&&te%1==0&&te<ue}function mn(te,ue,Re){if(!vp(Re))return!1;var At=typeof ue;return(At=="number"?b_(Re)&&Et(ue,Re.length):At=="string"&&ue in Re)?rc(Re[ue],te):!1}function Pt(te){var ue=typeof te;return ue=="string"||ue=="number"||ue=="symbol"||ue=="boolean"?te!=="__proto__":te===null}function Bn(te){return!!ht&&ht in te}function kr(te){var ue=te&&te.constructor,Re=typeof ue=="function"&&ue.prototype||ct;return te===Re}function Rr(te){var ue=[];if(te!=null)for(var Re in Object(te))ue.push(Re);return ue}function Ho(te){return vt.call(te)}function Ed(te,ue,Re){return ue=rr(ue===void 0?te.length-1:ue,0),function(){for(var At=arguments,$n=-1,Sr=rr(At.length-ue,0),qr=Array(Sr);++$n<Sr;)qr[$n]=At[ue+$n];$n=-1;for(var Un=Array(ue+1);++$n<ue;)Un[$n]=At[$n];return Un[ue]=Re(qr),Ke(te,this,Un)}}function mp(te,ue){if(!(ue==="constructor"&&typeof te[ue]=="function")&&ue!="__proto__")return te[ue]}var cT=ov(wd);function ov(te){var ue=0,Re=0;return function(){var At=zo(),$n=s-(At-Re);if(Re=At,$n>0){if(++ue>=i)return arguments[0]}else ue=0;return te.apply(void 0,arguments)}}function XR(te){if(te!=null){try{return We.call(te)}catch{}try{return te+""}catch{}}return""}function rc(te,ue){return te===ue||te!==te&&ue!==ue}var du=mo(function(){return arguments}())?mo:function(te){return hu(te)&&ge.call(te,"callee")&&!Fn.call(te,"callee")},gp=Array.isArray;function b_(te){return te!=null&&JR(te.length)&&!fT(te)}function QR(te){return hu(te)&&b_(te)}var yp=nr||tN;function fT(te){if(!vp(te))return!1;var ue=Jr(te);return ue==h||ue==p||ue==l||ue==_}function JR(te){return typeof te=="number"&&te>-1&&te%1==0&&te<=o}function vp(te){var ue=typeof te;return te!=null&&(ue=="object"||ue=="function")}function hu(te){return te!=null&&typeof te=="object"}function K5(te){if(!hu(te)||Jr(te)!=v)return!1;var ue=Ln(te);if(ue===null)return!0;var Re=ge.call(ue,"constructor")&&ue.constructor;return typeof Re=="function"&&Re instanceof Re&&We.call(Re)==me}var ZR=be?yt(be):Fi;function av(te){return ye(te,uv(te))}function uv(te){return b_(te)?Vt(te):Vo(te)}var eN=le(function(te,ue,Re){Ra(te,ue,Re)});function lv(te){return function(){return te}}function gg(te){return te}function tN(){return!1}e.exports=eN})(l3,l3.exports);var eat=l3.exports;const uK=Xl(eat);function x0(e){return structuredClone(e)}function lK(){const{answers:e}=Kc(i=>i),t=Zm(),r=`${Ly()}_${t}`;return e[r]}const jxe=I.createContext(null);function tat(){const e=I.useContext(jxe);if(!e)throw new Error("useWindowEvents must be used within a WindowEventsProvider");return e}function H0(){return Kc(e=>e.config)}function Fue(e,t,n,r){const i=t.slice(0,t.lastIndexOf("_")),s=Object.entries(r.components).find(([a])=>a===i),o=s?s[1]:null;if(!o)throw new Error(`Component ${i} could not be found in the study components.`);return o.correctAnswer?o.correctAnswer.every(a=>e[a.id]===a.answer):!0}function Bxe(){const e=Zm(),t=aK(),r=`${Ly()}_${e}`,{trialValidation:i,sequence:s,answers:o}=Kc(S=>S),a=Qh(),{saveTrialAnswer:u,setIframeAnswers:l}=Xh(),{storageEngine:c}=Cs(),f=qb(),[d,h]=I.useState(!0);I.useEffect(()=>{(async()=>{if(c){const T=await c.getModes(f);h(T.dataCollectionEnabled)}})()},[c,f]);const p=Zot(r),m=typeof e!="number"||!p,g=lK(),y=Yh(),v=H0(),_=I.useMemo(()=>Date.now(),[]),w=tat(),E=I.useCallback(()=>{if(typeof e!="number")return;const S=x0(i[r]),T=Object.values(S).reduce((F,M)=>Object.hasOwn(M,"values")?{...F,...M.values}:F,{}),{provenanceGraph:C}=S,A=Date.now(),k=w&&"current"in w&&w.current?w.current.splice(0,w.current.length):[];d&&!g.endTime&&(a(u({identifier:r,answer:T,startTime:_,endTime:A,provenanceGraph:C,windowEvents:k})),c&&c.saveAnswers({...o,[r]:{answer:T,startTime:_,endTime:A,provenanceGraph:C,windowEvents:k}}),a(l({})));let N=e+1;const O=$xe(s,e),D=O!==null&&O.some(F=>Object.hasOwn(F.currentBlock,"skip")&&F.currentBlock.skip!==void 0),$={...o,[r]:{answer:T,startTime:_,endTime:A,provenanceGraph:C,windowEvents:k}};D&&[...O.flatMap(M=>M.currentBlock.skip?M.currentBlock.skip.map(B=>({...B,firstIndex:M.firstIndex,lastIndex:M.lastIndex})):[])].some(M=>{let B=!1;const U=Object.fromEntries(Object.entries($).filter(([P])=>{const z=parseInt(P.slice(P.lastIndexOf("_")+1),10);return z>=M.firstIndex&&z<=e})),H=M.check!=="block"?Object.entries(U).filter(([P])=>P.slice(0,P.lastIndexOf("_"))===M.name):Object.entries(U);if(H.length===0)return!1;if(H.some(([P,z])=>!z))throw new Error(`There are components with missing response objects for the skip condition: ${JSON.stringify(M,null,2)}`);if(M.check==="response"||M.check==="responses"){const[P,z]=H[0];M.check==="response"?B=M.comparison==="equal"?M.value===z.answer[M.responseId]:M.value!==z.answer[M.responseId]:B=!Fue(z.answer,P,v.components[P.slice(0,P.lastIndexOf("_"))],v)}else if(M.check==="block"||M.check==="repeatedComponent"){if(H.length<M.value)return!1;const P=H.map(([j,q])=>Fue(q.answer,j,v.components[j.slice(0,j.lastIndexOf("_"))],v)),z=P.filter(j=>j).length,W=P.length-z;B=M.condition==="numCorrect"&&z===M.value||M.condition==="numIncorrect"&&W===M.value}if(B){const P=t.indexOf(M.to),z=P===-1?Qot(s,M.to):-1;return N=P===-1?z:P,!0}return!1}),y(`/${f}/${N}${window.location.search}`)},[e,i,r,w,d,g.endTime,s,o,_,y,f,a,u,c,l,v,t]);return{isNextDisabled:m,goToNextStep:E}}function nat({label:e="Next",disabled:t=!1,onClick:n}){const{isNextDisabled:r,goToNextStep:i}=Bxe(),s=I.useCallback(()=>{n&&n(),i()},[i,n]);return b.jsx(fn,{type:"submit",disabled:t||r,onClick:s,children:e})}function rat(e){if(!/^[0-9a-zA-Z-]+$/.test(e))throw new Error(`[@mantine/use-form] Form name "${e}" is invalid, it should contain only letters, numbers and dashes`)}const iat=typeof window<"u"?I.useLayoutEffect:I.useEffect;function yo(e,t){iat(()=>{if(e)return window.addEventListener(e,t),()=>window.removeEventListener(e,t)},[e])}function sat(e,t){e&&rat(e),yo(`mantine-form:${e}:set-field-value`,n=>t.setFieldValue(n.detail.path,n.detail.value)),yo(`mantine-form:${e}:set-values`,n=>t.setValues(n.detail)),yo(`mantine-form:${e}:set-initial-values`,n=>t.setInitialValues(n.detail)),yo(`mantine-form:${e}:set-errors`,n=>t.setErrors(n.detail)),yo(`mantine-form:${e}:set-field-error`,n=>t.setFieldError(n.detail.path,n.detail.error)),yo(`mantine-form:${e}:clear-field-error`,n=>t.clearFieldError(n.detail)),yo(`mantine-form:${e}:clear-errors`,t.clearErrors),yo(`mantine-form:${e}:reset`,t.reset),yo(`mantine-form:${e}:validate`,t.validate),yo(`mantine-form:${e}:validate-field`,n=>t.validateField(n.detail)),yo(`mantine-form:${e}:reorder-list-item`,n=>t.reorderListItem(n.detail.path,n.detail.payload)),yo(`mantine-form:${e}:remove-list-item`,n=>t.removeListItem(n.detail.path,n.detail.index)),yo(`mantine-form:${e}:insert-list-item`,n=>t.insertListItem(n.detail.path,n.detail.item,n.detail.index)),yo(`mantine-form:${e}:set-dirty`,n=>t.setDirty(n.detail)),yo(`mantine-form:${e}:set-touched`,n=>t.setTouched(n.detail)),yo(`mantine-form:${e}:reset-dirty`,n=>t.resetDirty(n.detail)),yo(`mantine-form:${e}:reset-touched`,t.resetTouched)}function oat(e){return t=>{if(!t)e(t);else if(typeof t=="function")e(t);else if(typeof t=="object"&&"nativeEvent"in t){const{currentTarget:n}=t;n instanceof HTMLInputElement?n.type==="checkbox"?e(n.checked):e(n.value):(n instanceof HTMLTextAreaElement||n instanceof HTMLSelectElement)&&e(n.value)}else e(t)}}function P7(e){return e===null||typeof e!="object"?{}:Object.keys(e).reduce((t,n)=>{const r=e[n];return r!=null&&r!==!1&&(t[n]=r),t},{})}function aat(e){const[t,n]=I.useState(P7(e)),r=I.useRef(t),i=I.useCallback(u=>{n(l=>{const c=P7(typeof u=="function"?u(l):u);return r.current=c,c})},[]),s=I.useCallback(()=>i({}),[]),o=I.useCallback(u=>{r.current[u]!==void 0&&i(l=>{const c={...l};return delete c[u],c})},[t]),a=I.useCallback((u,l)=>{l==null||l===!1?o(u):r.current[u]!==l&&i(c=>({...c,[u]:l}))},[t]);return{errorsState:t,setErrors:i,clearErrors:s,setFieldError:a,clearFieldError:o}}function Uxe(e,t){if(t===null||typeof t!="object")return{};const n={...t};return Object.keys(t).forEach(r=>{r.includes(`${String(e)}.`)&&delete n[r]}),n}function jue(e,t){const n=e.substring(t.length+1).split(".")[0];return parseInt(n,10)}function Bue(e,t,n,r){if(t===void 0)return n;const i=`${String(e)}`;let s=n;r===-1&&(s=Uxe(`${i}.${t}`,s));const o={...s},a=new Set;return Object.entries(s).filter(([u])=>{if(!u.startsWith(`${i}.`))return!1;const l=jue(u,i);return Number.isNaN(l)?!1:l>=t}).forEach(([u,l])=>{const c=jue(u,i),f=u.replace(`${i}.${c}`,`${i}.${c+r}`);o[f]=l,a.add(f),a.has(u)||delete o[u]}),o}function uat(e,{from:t,to:n},r){const i=`${e}.${t}`,s=`${e}.${n}`,o={...r};return Object.keys(r).every(a=>{let u,l;if(a.startsWith(i)&&(u=a,l=a.replace(i,s)),a.startsWith(s)&&(u=a.replace(s,i),l=a),u&&l){const c=o[u],f=o[l];return f===void 0?delete o[u]:o[u]=f,c===void 0?delete o[l]:o[l]=c,!1}return!0}),o}function Uue(e,t,n){typeof n.value=="object"&&(n.value=Aw(n.value)),!n.enumerable||n.get||n.set||!n.configurable||!n.writable||t==="__proto__"?Object.defineProperty(e,t,n):e[t]=n.value}function Aw(e){if(typeof e!="object")return e;var t=0,n,r,i,s=Object.prototype.toString.call(e);if(s==="[object Object]"?i=Object.create(e.__proto__||null):s==="[object Array]"?i=Array(e.length):s==="[object Set]"?(i=new Set,e.forEach(function(o){i.add(Aw(o))})):s==="[object Map]"?(i=new Map,e.forEach(function(o,a){i.set(Aw(a),Aw(o))})):s==="[object Date]"?i=new Date(+e):s==="[object RegExp]"?i=new RegExp(e.source,e.flags):s==="[object DataView]"?i=new e.constructor(Aw(e.buffer)):s==="[object ArrayBuffer]"?i=e.slice(0):s.slice(-6)==="Array]"&&(i=new e.constructor(e)),i){for(r=Object.getOwnPropertySymbols(e);t<r.length;t++)Uue(i,r[t],Object.getOwnPropertyDescriptor(e,r[t]));for(t=0,r=Object.getOwnPropertyNames(e);t<r.length;t++)Object.hasOwnProperty.call(i,n=r[t])&&i[n]===e[n]||Uue(i,n,Object.getOwnPropertyDescriptor(e,n))}return i||e}function zxe(e){return typeof e!="string"?[]:e.split(".")}function $u(e,t){const n=zxe(e);if(n.length===0||typeof t!="object"||t===null)return;let r=t[n[0]];for(let i=1;i<n.length&&r!==void 0;i+=1)r=r[n[i]];return r}function _6(e,t,n){const r=zxe(e);if(r.length===0)return n;const i=Aw(n);if(r.length===1)return i[r[0]]=t,i;let s=i[r[0]];for(let o=1;o<r.length-1;o+=1){if(s===void 0)return i;s=s[r[o]]}return s[r[r.length-1]]=t,i}function lat(e,{from:t,to:n},r){const i=$u(e,r);if(!Array.isArray(i))return r;const s=[...i],o=i[t];return s.splice(t,1),s.splice(n,0,o),_6(e,s,r)}function cat(e,t,n,r){const i=$u(e,r);if(!Array.isArray(i))return r;const s=[...i];return s.splice(typeof n=="number"?n:s.length,0,t),_6(e,s,r)}function fat(e,t,n){const r=$u(e,n);return Array.isArray(r)?_6(e,r.filter((i,s)=>s!==t),n):n}function dat({$values:e,$errors:t,$status:n}){const r=I.useCallback((o,a)=>{n.clearFieldDirty(o),t.setErrors(u=>uat(o,a,u)),e.setValues({values:lat(o,a,e.refValues.current),updateState:!0})},[]),i=I.useCallback((o,a)=>{n.clearFieldDirty(o),t.setErrors(u=>Bue(o,a,u,-1)),e.setValues({values:fat(o,a,e.refValues.current),updateState:!0})},[]),s=I.useCallback((o,a,u)=>{n.clearFieldDirty(o),t.setErrors(l=>Bue(o,u,l,1)),e.setValues({values:cat(o,a,u,e.refValues.current),updateState:!0})},[]);return{reorderListItem:r,removeListItem:i,insertListItem:s}}var cK=function e(t,n){if(t===n)return!0;if(t&&n&&typeof t=="object"&&typeof n=="object"){if(t.constructor!==n.constructor)return!1;var r,i,s;if(Array.isArray(t)){if(r=t.length,r!=n.length)return!1;for(i=r;i--!==0;)if(!e(t[i],n[i]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if(s=Object.keys(t),r=s.length,r!==Object.keys(n).length)return!1;for(i=r;i--!==0;)if(!Object.prototype.hasOwnProperty.call(n,s[i]))return!1;for(i=r;i--!==0;){var o=s[i];if(!e(t[o],n[o]))return!1}return!0}return t!==t&&n!==n};const yD=Xl(cK);function LN(e,t){const n=Object.keys(e);if(typeof t=="string"){const r=n.filter(i=>i.startsWith(`${t}.`));return e[t]||r.some(i=>e[i])||!1}return n.some(r=>e[r])}function hat({initialDirty:e,initialTouched:t,mode:n,$values:r}){const[i,s]=I.useState(t),[o,a]=I.useState(e),u=I.useRef(t),l=I.useRef(e),c=I.useCallback(E=>{const S=typeof E=="function"?E(u.current):E;u.current=S,n==="controlled"&&s(S)},[]),f=I.useCallback(E=>{const S=typeof E=="function"?E(l.current):E;l.current=S,n==="controlled"&&a(S)},[]),d=I.useCallback(()=>c({}),[]),h=E=>{const S=E?{...E,...r.refValues.current}:r.refValues.current;r.setValuesSnapshot(S),f({})},p=I.useCallback((E,S)=>{c(T=>LN(T,E)===S?T:{...T,[E]:S})},[]),m=I.useCallback((E,S)=>{f(T=>LN(T,E)===S?T:{...T,[E]:S})},[]),g=I.useCallback(E=>LN(u.current,E),[]),y=I.useCallback(E=>f(S=>{if(typeof E!="string")return S;const T=Uxe(E,S);return delete T[E],yD(T,S)?S:T}),[]),v=I.useCallback(E=>{if(E){const T=$u(E,l.current);if(typeof T=="boolean")return T;const C=$u(E,r.refValues.current),A=$u(E,r.valuesSnapshot.current);return!yD(C,A)}return Object.keys(l.current).length>0?LN(l.current):!yD(r.refValues.current,r.valuesSnapshot.current)},[]),_=I.useCallback(()=>l.current,[]),w=I.useCallback(()=>u.current,[]);return{touchedState:i,dirtyState:o,touchedRef:u,dirtyRef:l,setTouched:c,setDirty:f,resetDirty:h,resetTouched:d,isTouched:g,setFieldTouched:p,setFieldDirty:m,setTouchedState:s,setDirtyState:a,clearFieldDirty:y,isDirty:v,getDirty:_,getTouched:w}}function pat({initialValues:e,onValuesChange:t,mode:n}){const r=I.useRef(!1),[i,s]=I.useState(e||{}),o=I.useRef(i),a=I.useRef(i),u=I.useCallback(({values:p,subscribers:m,updateState:g=!0,mergeWithPreviousValues:y=!0})=>{const v=o.current,_=p instanceof Function?p(o.current):p,w=y?{...v,..._}:_;o.current=w,g&&s(w),t==null||t(w,v),m==null||m.filter(Boolean).forEach(E=>E({updatedValues:w,previousValues:v}))},[t]),l=I.useCallback(p=>{var y;const m=$u(p.path,o.current),g=p.value instanceof Function?p.value(m):p.value;if(m!==g){const v=o.current,_=_6(p.path,g,o.current);u({values:_,updateState:p.updateState}),(y=p.subscribers)==null||y.filter(Boolean).forEach(w=>w({path:p.path,updatedValues:_,previousValues:v}))}},[]),c=I.useCallback(p=>{a.current=p},[]),f=I.useCallback((p,m)=>{r.current||(r.current=!0,u({values:p,updateState:n==="controlled"}),c(p),m())},[]),d=I.useCallback(()=>{u({values:a.current,updateState:!0,mergeWithPreviousValues:!1})},[]),h=I.useCallback(()=>o.current,[]);return{initialized:r,stateValues:i,refValues:o,valuesSnapshot:a,setValues:u,setFieldValue:l,resetValues:d,setValuesSnapshot:c,initialize:f,getValues:h}}function mat({$status:e}){const t=I.useRef({}),n=I.useCallback((i,s)=>{I.useEffect(()=>(t.current[i]=t.current[i]||[],t.current[i].push(s),()=>{t.current[i]=t.current[i].filter(o=>o!==s)}),[s])},[]),r=I.useCallback(i=>t.current[i]?t.current[i].map(s=>o=>s({previousValue:$u(i,o.previousValues),value:$u(i,o.updatedValues),touched:e.isTouched(i),dirty:e.isDirty(i)})):[],[]);return{subscribers:t,watch:n,getFieldSubscribers:r}}function zue(e,t){return e?`${e}-${t.toString()}`:t.toString()}function Vue(e){const t=P7(e);return{hasErrors:Object.keys(t).length>0,errors:t}}function D7(e,t,n="",r={}){return typeof e!="object"||e===null?r:Object.keys(e).reduce((i,s)=>{const o=e[s],a=`${n===""?"":`${n}.`}${s}`,u=$u(a,t);let l=!1;return typeof o=="function"&&(i[a]=o(u,t,a)),typeof o=="object"&&Array.isArray(u)&&(l=!0,u.forEach((c,f)=>D7(o,t,`${a}.${f}`,i))),typeof o=="object"&&typeof u=="object"&&u!==null&&(l||D7(o,t,a,i)),i},r)}function O7(e,t){return Vue(typeof e=="function"?e(t):D7(e,t))}function FN(e,t,n){if(typeof e!="string")return{hasError:!1,error:null};const r=O7(t,n),i=Object.keys(r.errors).find(s=>e.split(".").every((o,a)=>o===s.split(".")[a]));return{hasError:!!i,error:i?r.errors[i]:null}}const gat="__MANTINE_FORM_INDEX__";function Hue(e,t){return t?typeof t=="boolean"?t:Array.isArray(t)?t.includes(e.replace(/[.][0-9]/g,`.${gat}`)):!1:!1}function Vxe({name:e,mode:t="controlled",initialValues:n,initialErrors:r={},initialDirty:i={},initialTouched:s={},clearInputErrorOnChange:o=!0,validateInputOnChange:a=!1,validateInputOnBlur:u=!1,onValuesChange:l,transformValues:c=h=>h,enhanceGetInputProps:f,validate:d}={}){const h=aat(r),p=pat({initialValues:n,onValuesChange:l,mode:t}),m=hat({initialDirty:i,initialTouched:s,$values:p,mode:t}),g=dat({$values:p,$errors:h,$status:m}),y=mat({$status:m}),[v,_]=I.useState(0),[w,E]=I.useState({}),S=I.useCallback(()=>{p.resetValues(),h.clearErrors(),m.resetDirty(),m.resetTouched(),t==="uncontrolled"&&_(P=>P+1)},[]),T=I.useCallback(P=>{p.initialize(P,()=>t==="uncontrolled"&&_(z=>z+1))},[]),C=I.useCallback((P,z,W)=>{const j=Hue(P,a);m.clearFieldDirty(P),m.setFieldTouched(P,!0),!j&&o&&h.clearFieldError(P),p.setFieldValue({path:P,value:z,updateState:t==="controlled",subscribers:[...y.getFieldSubscribers(P),j?q=>{const G=FN(P,d,q.updatedValues);G.hasError?h.setFieldError(P,G.error):h.clearFieldError(P)}:null,(W==null?void 0:W.forceUpdate)!==!1&&t!=="controlled"?()=>E(q=>({...q,[P]:(q[P]||0)+1})):null]})},[l,d]),A=I.useCallback(P=>{const z=p.refValues.current;p.setValues({values:P,updateState:t==="controlled"}),o&&h.clearErrors(),t==="uncontrolled"&&_(W=>W+1),Object.keys(y.subscribers.current).forEach(W=>{const j=$u(W,p.refValues.current),q=$u(W,z);j!==q&&y.getFieldSubscribers(W).forEach(G=>G({previousValues:z,updatedValues:p.refValues.current}))})},[l,o]),k=I.useCallback(()=>{const P=O7(d,p.refValues.current);return h.setErrors(P.errors),P},[d]),N=I.useCallback(P=>{const z=FN(P,d,p.refValues.current);return z.hasError?h.setFieldError(P,z.error):h.clearFieldError(P),z},[d]),O=(P,{type:z="input",withError:W=!0,withFocus:j=!0,...q}={})=>{const ne={onChange:oat(ce=>C(P,ce,{forceUpdate:!1})),"data-path":zue(e,P)};return W&&(ne.error=h.errorsState[P]),z==="checkbox"?ne[t==="controlled"?"checked":"defaultChecked"]=$u(P,p.refValues.current):ne[t==="controlled"?"value":"defaultValue"]=$u(P,p.refValues.current),j&&(ne.onFocus=()=>m.setFieldTouched(P,!0),ne.onBlur=()=>{if(Hue(P,u)){const ce=FN(P,d,p.refValues.current);ce.hasError?h.setFieldError(P,ce.error):h.clearFieldError(P)}}),Object.assign(ne,f==null?void 0:f({inputProps:ne,field:P,options:{type:z,withError:W,withFocus:j,...q},form:H}))},D=(P,z)=>W=>{W==null||W.preventDefault();const j=k();j.hasErrors?z==null||z(j.errors,p.refValues.current,W):P==null||P(c(p.refValues.current),W)},$=P=>c(P||p.refValues.current),F=I.useCallback(P=>{P.preventDefault(),S()},[]),M=I.useCallback(P=>P?!FN(P,d,p.refValues.current).hasError:!O7(d,p.refValues.current).hasErrors,[d]),B=P=>`${v}-${P}-${w[P]||0}`,U=I.useCallback(P=>document.querySelector(`[data-path="${zue(e,P)}"]`),[]),H={watch:y.watch,initialized:p.initialized.current,values:p.stateValues,getValues:p.getValues,setInitialValues:p.setValuesSnapshot,initialize:T,setValues:A,setFieldValue:C,errors:h.errorsState,setErrors:h.setErrors,setFieldError:h.setFieldError,clearFieldError:h.clearFieldError,clearErrors:h.clearErrors,resetDirty:m.resetDirty,setTouched:m.setTouched,setDirty:m.setDirty,isTouched:m.isTouched,resetTouched:m.resetTouched,isDirty:m.isDirty,getTouched:m.getTouched,getDirty:m.getDirty,reorderListItem:g.reorderListItem,insertListItem:g.insertListItem,removeListItem:g.removeListItem,reset:S,validate:k,validateField:N,getInputProps:O,onSubmit:D,onReset:F,isValid:M,getTransformedValues:$,key:B,getInputNode:U};return sat(e,H),H}function yat(e,t){const n=t||!0;return r=>typeof r!="string"?n:e.test(r)?null:n}function vat(e){return yat(/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/,e)}function Hxe(e,t){if(e.type==="checkbox"){const n=e,r=n.minSelections&&t.length<n.minSelections,i=n.maxSelections&&t.length>n.maxSelections;if(r&&i)return`Please select between ${n.minSelections} and ${n.maxSelections} options`;if(r)return`Please select at least ${n.minSelections} options`;if(i)return`Please select at most ${n.maxSelections} options`}return null}const bat=new URLSearchParams(window.location.search),_at=(e,t)=>{let n={};return e.forEach(r=>{const i=t?t[r.id]:{};if(i)n={...n,[r.id]:i};else{const s=r.paramCapture?bat.get(r.paramCapture):"";n={...n,[r.id]:r.type==="iframe"?[]:s}}}),{...n}},wat=e=>{let t={};return e.forEach(n=>{n.required&&(t={...t,[n.id]:r=>{if(Array.isArray(r)){if(n.requiredValue!=null&&!Array.isArray(n.requiredValue))return"Incorrect required value. Contact study administrator.";if(n.requiredValue!=null&&Array.isArray(n.requiredValue)){if(n.requiredValue.length!==r.length)return"Incorrect input";const i=[...n.requiredValue].sort(),s=[...r].sort();return i.every((o,a)=>o===s[a])?null:"Incorrect input"}return n.type==="checkbox"?Hxe(n,r):r.length===0?"Empty input":null}return n.required&&n.requiredValue!=null&&r!=null?r.toString()!==n.requiredValue.toString()?"Incorrect input":null:n.required?r==null||r===""?"Empty input":null:r===null?"Empty input":null}})}),t};function Eat(e,t,n){const[r,i]=I.useState(null),s=Vxe({initialValues:_at(e,n),validate:wat(e)});return I.useEffect(()=>{r!==t&&(i(t),s.reset())},[r,s,t]),s}function Wb(e,t,n){var o;const{requiredValue:r,requiredLabel:i}=e;let s="";return t.checked&&Array.isArray(r)?s=r&&[...r].sort().toString()!==[...t.checked].sort().toString()?`Please ${n?"select":"enter"} ${i||r.toString()} to continue.`:null:t.checked&&e.required?s=Hxe(e,t.checked):s=t.value&&r&&r.toString()!==t.value.toString()?`Please ${n?"select":"enter"} ${i||(n?(o=n.find(a=>a.value===r))==null?void 0:o.label:r.toString())} to continue.`:null,s}function xat({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{prompt:s,required:o,options:a,secondaryText:u}=e,l=a.map(c=>typeof c=="string"?{value:c,label:c}:c);return b.jsx(Tl.Group,{label:b.jsxs(Nt,{direction:"row",wrap:"nowrap",gap:4,children:[i&&b.jsx(pe,{style:{minWidth:"fit-content"},children:`${r}. `}),b.jsx(pe,{style:{display:"block"},className:"no-last-child-bottom-padding",children:b.jsx(Ja,{text:s,required:o})})]}),description:u,...n,error:Wb(e,n,l),style:{"--input-description-size":"calc(var(--mantine-font-size-md) - calc(0.125rem * var(--mantine-scale)))"},children:b.jsx(ls,{mt:"xs",children:l.map(c=>b.jsx(Tl,{disabled:t,value:c.value,label:c.label},c.value))})})}function Sat({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{placeholder:s,prompt:o,required:a,options:u,secondaryText:l}=e,c=u.map(f=>typeof f=="string"?{value:f,label:f}:f);return b.jsx(mk,{disabled:t,label:b.jsxs(Nt,{direction:"row",wrap:"nowrap",gap:4,children:[i&&b.jsx(pe,{style:{minWidth:"fit-content"},children:`${r}. `}),b.jsx(pe,{style:{display:"block"},className:"no-last-child-bottom-padding",children:b.jsx(Ja,{text:o,required:a})})]}),description:l,placeholder:s,data:c,radius:"md",size:"md",...n,error:Wb(e,n,c)})}function Tat({response:e,answer:t,index:n,enumerateQuestions:r}){const{prompt:i,required:s,secondaryText:o}=e;return b.jsx(mi.Wrapper,{label:b.jsxs(Nt,{direction:"row",wrap:"nowrap",gap:4,children:[r&&b.jsx(pe,{style:{minWidth:"fit-content"},children:`${n}. `}),b.jsx(pe,{style:{display:"block"},className:"no-last-child-bottom-padding",children:b.jsx(Ja,{text:i,required:s})})]}),description:o,size:"md",children:b.jsx(Bf,{children:Array.isArray(t.value)?t.value.map(a=>b.jsx(Bf.Item,{children:a},a)):b.jsx(Bf.Item,{children:t.value})})})}function qxe({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{prompt:s,required:o,options:a,leftLabel:u,rightLabel:l,secondaryText:c}=e,f=a.map(d=>typeof d=="string"?{value:d,label:d}:d);return b.jsx(V1.Group,{name:`radioInput${e.id}`,label:b.jsxs(Nt,{direction:"row",wrap:"nowrap",gap:4,children:[i&&b.jsx(pe,{style:{minWidth:"fit-content"},children:`${r}. `}),b.jsx(pe,{style:{display:"block"},className:"no-last-child-bottom-padding",children:b.jsx(Ja,{text:s,required:o})})]}),description:c,...n,error:Wb(e,n,f),style:{"--input-description-size":"calc(var(--mantine-font-size-md) - calc(0.125rem * var(--mantine-scale)))"},children:b.jsxs(ls,{mt:"xs",children:[u?b.jsx(Xe,{style:{textAlign:"center"},children:u}):null,f.map(d=>b.jsx(V1,{size:"xl",disabled:t,value:d.value,label:d.label},d.label)),b.jsx(Xe,{children:l})]})},e.id)}function Cat({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{numItems:s}=e,o=[];for(let u=1;u<=+s;u+=1)o.push({label:`${u}`,value:`${u}`});const a={...e,type:"radio",options:o};return b.jsx(qxe,{disabled:t,response:a,answer:n,index:r,enumerateQuestions:i})}function Aat({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{prompt:s,required:o,min:a,max:u,placeholder:l,secondaryText:c}=e;return b.jsx(uY,{disabled:t,placeholder:l,label:b.jsxs(Nt,{direction:"row",wrap:"nowrap",gap:4,children:[i&&b.jsx(pe,{style:{minWidth:"fit-content"},children:`${r}. `}),b.jsx(pe,{style:{display:"block"},className:"no-last-child-bottom-padding",children:b.jsx(Ja,{text:s,required:o})})]}),description:c,radius:"md",size:"md",min:a,max:u,...n,error:Wb(e,n)})}function Iat({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{prompt:s,required:o,options:a,secondaryText:u}=e,l=Wb(e,n);return b.jsx(mi.Wrapper,{label:b.jsxs(Nt,{direction:"row",wrap:"nowrap",gap:4,children:[i&&b.jsx(pe,{style:{minWidth:"fit-content"},children:`${r}. `}),b.jsx(pe,{style:{display:"block"},className:"no-last-child-bottom-padding",children:b.jsx(Ja,{text:s,required:o})})]}),description:u,error:l,style:{"--input-description-size":"calc(var(--mantine-font-size-md) - calc(0.125rem * var(--mantine-scale)))"},children:b.jsx(i6,{disabled:t,marks:a,...n,h:40})})}function kat({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{placeholder:s,prompt:o,required:a,secondaryText:u}=e;return b.jsx(Jg,{disabled:t,placeholder:s,label:b.jsxs(Nt,{direction:"row",wrap:"nowrap",gap:4,children:[i&&b.jsx(pe,{style:{minWidth:"fit-content"},children:`${r}. `}),b.jsx(pe,{style:{display:"block"},className:"no-last-child-bottom-padding",children:b.jsx(Ja,{text:o,required:a})})]}),description:u,radius:"md",size:"md",...n,value:n.value||"",error:Wb(e,n)})}function Rat({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{placeholder:s,prompt:o,required:a,secondaryText:u}=e;return b.jsx(KG,{disabled:t,placeholder:s,label:b.jsxs(Nt,{direction:"row",wrap:"nowrap",gap:4,children:[i&&b.jsx(pe,{style:{minWidth:"fit-content"},children:`${r}. `}),b.jsx(pe,{style:{display:"block"},className:"no-last-child-bottom-padding",children:b.jsx(Ja,{text:o,required:a})})]}),description:u,radius:"md",size:"md",...n,value:n.value||"",error:Wb(e,n)})}function Nat({response:e,answer:t,storedAnswer:n,index:r}){const i=(n?{value:n}:t)||{value:void 0},s=!!n,[o]=NY(),u=H0().uiConfig.enumerateQuestions??!1,l=I.useMemo(()=>{if(e.paramCapture){const c=o.get(e.paramCapture);return s||!!c}return s},[s,e.paramCapture,o]);return b.jsxs(pe,{mb:"md",children:[e.type==="numerical"&&b.jsx(Aat,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="shortText"&&b.jsx(kat,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="longText"&&b.jsx(Rat,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="likert"&&b.jsx(Cat,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="dropdown"&&b.jsx(Sat,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="slider"&&b.jsx(Iat,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="radio"&&b.jsx(qxe,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="checkbox"&&b.jsx(xat,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="iframe"&&b.jsx(Tat,{response:e,answer:i,index:r,enumerateQuestions:u})]})}function c3({config:e,location:t,status:n,style:r}){var $;const i=Qh(),{updateResponseBlockValidation:s,toggleShowHelpText:o}=Xh(),a=Zm(),u=Ly(),l=n==null?void 0:n.answer,c=Yh(),f=e,d=I.useMemo(()=>{var F;return((F=f==null?void 0:f.response)==null?void 0:F.filter(M=>M.location?M.location===t:t==="belowStimulus"))||[]},[f==null?void 0:f.response,t]),h=Eat(d,a,l||{}),[p,m]=I.useState(void 0),{iframeAnswers:g,iframeProvenance:y}=Kc(F=>F),v=(f==null?void 0:f.provideFeedback)&&((($=f==null?void 0:f.correctAnswer)==null?void 0:$.length)||0)>0,_=(f==null?void 0:f.allowFailedTraining)===void 0?!0:f.allowFailedTraining,[w,E]=I.useState(0),S=(f==null?void 0:f.trainingAttempts)||2,[T,C]=I.useState(!1),A=t===((f==null?void 0:f.nextButtonLocation)||"belowStimulus");I.useEffect(()=>{const F=d.find(M=>M.type==="iframe");if(g&&F){const M=F.id;h.setValues({...h.values,[M]:g[M]})}},[g]),I.useEffect(()=>{y&&m(y)},[y]),I.useEffect(()=>{i(s({location:t,identifier:`${u}_${a}`,status:h.isValid(),values:x0(h.values),provenanceGraph:p}))},[h.values,u,a,t,i,s,p]);const[k,N]=I.useState(Object.fromEntries(d.map(F=>[F.id,{visible:!1,title:"Correct Answer",message:"The correct answer is: ",color:"green"}]))),O=(F,M,B,U,H)=>{N(P=>({...P,[F]:{visible:M,title:B,message:U,color:H}}))},D=()=>{const F=w+1;E(F);const M=Object.fromEntries(d.map(B=>{var P,z;const U=(z=(P=f.correctAnswer)==null?void 0:P.find(W=>W.id===B.id))==null?void 0:z.answer,H=h.values[B.id];return[B.id,Array.isArray(H)?typeof U=="string"?H.length===1&&U===H[0]:H.length===U.length&&H.every(W=>U.includes(W)):U===H]}));v&&(d.forEach(B=>{var U;if(M[B.id]&&!((U=k[B.id])!=null&&U.message.includes("You've failed to answer this question correctly")))O(B.id,!0,"Correct Answer","You have answered the question correctly.","green");else{let H="";F>=S?(H=`You didn't answer this question correctly after ${S} attempts. ${_?"You can continue to the next question.":"Unfortunately you have not met the criteria for continuing this study."}`,_||setTimeout(()=>{c("./__trainingFailed")},5e3)):S-F===1?H="Please try again. You have 1 attempt left.":H=`Please try again. You have ${S-F} attempts left.`,O(B.id,!0,"Incorrect Answer",H,"red")}}),C(_&&F>=S||Object.values(M).every(B=>B)&&F<=S))};return b.jsxs("div",{style:r,children:[d.map((F,M)=>{var U,H;const B=(H=(U=f.correctAnswer)==null?void 0:U.find(P=>P.id===F.id))==null?void 0:H.answer;return b.jsx(_r.Fragment,{children:F.hidden?"":b.jsxs(b.Fragment,{children:[b.jsx(Nat,{storedAnswer:l?l[F.id]:void 0,answer:{...h.getInputProps(F.id,{type:F.type==="checkbox"?"checkbox":"input"})},response:F,index:M+1}),k[F.id].visible&&b.jsxs(eS,{mb:"md",title:k[F.id].title,color:k[F.id].color,children:[k[F.id].message," ",k[F.id].message.includes("Please try again")&&b.jsxs(b.Fragment,{children:["Please"," ",b.jsx(Lb,{style:{fontSize:14},onClick:()=>i(o()),children:"click here"})," ","and read the help text carefully."]}),b.jsx("br",{}),b.jsx("br",{}),w>=S&&B&&` The correct answer was: ${B}.`]})]})},`${F.id}-${a}`)}),b.jsxs(ls,{justify:"right",gap:"xs",children:[v&&A&&b.jsx(fn,{onClick:()=>D(),disabled:!h.isValid(),children:"Check Answer"}),A&&b.jsx(nat,{disabled:v&&!T||!h.isValid(),label:f.nextButtonText||"Next"})]})]})}const IT="@REVISIT_COMMS",Pat={minHeight:"500px",width:"100%",border:0};function Dat({currentConfig:e}){const{setIframeAnswers:t,setIframeProvenance:n}=Xh(),r=Qh(),i=vxe(),s=I.useRef(null),o=I.useMemo(()=>crypto.randomUUID?crypto.randomUUID():`testID-${Date.now()}`,[]),a=Ly(),u=Yh(),l=I.useCallback((c,f)=>{var d,h;(h=(d=s.current)==null?void 0:d.contentWindow)==null||h.postMessage({error:!1,type:`${IT}/${c}`,iframeId:o,message:f},"*")},[s,o]);return I.useEffect(()=>{const c=f=>{const{data:d}=f;if(typeof d=="object"&&o===d.iframeId)switch(d.type){case`${IT}/WINDOW_READY`:e.parameters&&l("STUDY_DATA",e.parameters);break;case`${IT}/READY`:s.current&&(s.current.style.height=`${d.message.documentHeight}px`);break;case`${IT}/ANSWERS`:r(t(d.message));break;case`${IT}/PROVENANCE`:r(n(d.message));break}};return window.addEventListener("message",c),()=>window.removeEventListener("message",c)},[r,i,o,u,e,l,t,n]),b.jsx("iframe",{ref:s,src:`${Hu}${e.path}?trialid=${a}&id=${o}`,style:Pat})}async function fK(e){const n=await(await fetch(`${Hu}${e}`)).text();if(!n.includes("<title>reVISit</title>"))return n}function q1({email:e,path:t}){const n=Oy();return b.jsxs($c,{fluid:!0,my:50,maw:800,mx:"auto",children:[b.jsx(li,{order:2,children:b.jsx(Xe,{span:!0,c:"orange",children:"404"})}),b.jsxs(Xe,{children:[b.jsx(Xe,{span:!0,fw:700,children:t||n.pathname})," ","not Found."]}),b.jsx(Pl,{h:"lg"}),b.jsxs(Bf,{children:[b.jsx(Bf.Item,{children:b.jsx(Xe,{children:"If you're trying to access your study please check the URL and verify that the global config file is correctly configured. Then try again."})}),b.jsx(Bf.Item,{children:b.jsxs(Xe,{children:["If you're a participant, please contact the study administrator"," ",e&&b.jsxs(b.Fragment,{children:["at"," ",b.jsxs(Lb,{c:"blue",href:`mailto:${e}`,children:[e," "]})]}),"."]})})]})]})}const Oat={maxWidth:"100%"};function $at({currentConfig:e}){const t={...Oat,...e.style},[n,r]=I.useState(!0),[i,s]=I.useState(!1);return I.useEffect(()=>{async function o(){const a=await fK(e.path);s(!!a),r(!1)}o()},[e]),n||i?b.jsx(Dy,{mx:"auto",src:`${Hu}${e.path}`,style:t}):b.jsx(q1,{path:e.path})}function sm(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Mat(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function pS(e){let t,n,r;e.length!==2?(t=sm,n=(a,u)=>sm(e(a),u),r=(a,u)=>e(a)-u):(t=e===sm||e===Mat?e:Lat,n=e,r=e);function i(a,u,l=0,c=a.length){if(l<c){if(t(u,u)!==0)return c;do{const f=l+c>>>1;n(a[f],u)<0?l=f+1:c=f}while(l<c)}return l}function s(a,u,l=0,c=a.length){if(l<c){if(t(u,u)!==0)return c;do{const f=l+c>>>1;n(a[f],u)<=0?l=f+1:c=f}while(l<c)}return l}function o(a,u,l=0,c=a.length){const f=i(a,u,l,c-1);return f>l&&r(a[f-1],u)>-r(a[f],u)?f-1:f}return{left:i,center:o,right:s}}function Lat(){return 0}function Wxe(e){return e===null?NaN:+e}function*Fat(e,t){if(t===void 0)for(let n of e)n!=null&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)(r=t(r,++n,e))!=null&&(r=+r)>=r&&(yield r)}}const Gxe=pS(sm),q0=Gxe.right,jat=Gxe.left;pS(Wxe).center;function Bat(e,t){let n=0,r,i=0,s=0;if(t===void 0)for(let o of e)o!=null&&(o=+o)>=o&&(r=o-i,i+=r/++n,s+=r*(o-i));else{let o=-1;for(let a of e)(a=t(a,++o,e))!=null&&(a=+a)>=a&&(r=a-i,i+=r/++n,s+=r*(a-i))}if(n>1)return s/(n-1)}function Uat(e,t){const n=Bat(e,t);return n&&Math.sqrt(n)}function $7(e,t){let n,r;for(const i of e)i!=null&&(n===void 0?i>=i&&(n=r=i):(n>i&&(n=i),r<i&&(r=i)));return[n,r]}class Ka{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const n=this._partials;let r=0;for(let i=0;i<this._n&&i<32;i++){const s=n[i],o=t+s,a=Math.abs(t)<Math.abs(s)?t-(o-s):s-(o-t);a&&(n[r++]=a),t=o}return n[r]=t,this._n=r+1,this}valueOf(){const t=this._partials;let n=this._n,r,i,s,o=0;if(n>0){for(o=t[--n];n>0&&(r=o,i=t[--n],o=r+i,s=i-(o-r),!s););n>0&&(s<0&&t[n-1]<0||s>0&&t[n-1]>0)&&(i=s*2,r=o+i,i==r-o&&(o=r))}return o}}class M7 extends Map{constructor(t,n=Xxe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,i]of t)this.set(r,i)}get(t){return super.get(L7(this,t))}has(t){return super.has(L7(this,t))}set(t,n){return super.set(Yxe(this,t),n)}delete(t){return super.delete(Kxe(this,t))}}class f3 extends Set{constructor(t,n=Xxe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const r of t)this.add(r)}has(t){return super.has(L7(this,t))}add(t){return super.add(Yxe(this,t))}delete(t){return super.delete(Kxe(this,t))}}function L7({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function Yxe({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function Kxe({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function Xxe(e){return e!==null&&typeof e=="object"?e.valueOf():e}function zat(e){return e}function Vat(e,t,...n){return Hat(e,zat,t,n)}function Hat(e,t,n,r){return function i(s,o){if(o>=r.length)return n(s);const a=new M7,u=r[o++];let l=-1;for(const c of s){const f=u(c,++l,s),d=a.get(f);d?d.push(c):a.set(f,[c])}for(const[c,f]of a)a.set(c,i(f,o));return t(a)}(e,0)}function qat(e,t){return Array.from(t,n=>e[n])}function Wat(e=sm){if(e===sm)return Qxe;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const r=e(t,n);return r||r===0?r:(e(n,n)===0)-(e(t,t)===0)}}function Qxe(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const Gat=Math.sqrt(50),Yat=Math.sqrt(10),Kat=Math.sqrt(2);function d3(e,t,n){const r=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(r)),s=r/Math.pow(10,i),o=s>=Gat?10:s>=Yat?5:s>=Kat?2:1;let a,u,l;return i<0?(l=Math.pow(10,-i)/o,a=Math.round(e*l),u=Math.round(t*l),a/l<e&&++a,u/l>t&&--u,l=-l):(l=Math.pow(10,i)*o,a=Math.round(e/l),u=Math.round(t/l),a*l<e&&++a,u*l>t&&--u),u<a&&.5<=n&&n<2?d3(e,t,n*2):[a,u,l]}function F7(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const r=t<e,[i,s,o]=r?d3(t,e,n):d3(e,t,n);if(!(s>=i))return[];const a=s-i+1,u=new Array(a);if(r)if(o<0)for(let l=0;l<a;++l)u[l]=(s-l)/-o;else for(let l=0;l<a;++l)u[l]=(s-l)*o;else if(o<0)for(let l=0;l<a;++l)u[l]=(i+l)/-o;else for(let l=0;l<a;++l)u[l]=(i+l)*o;return u}function j7(e,t,n){return t=+t,e=+e,n=+n,d3(e,t,n)[2]}function W0(e,t,n){t=+t,e=+e,n=+n;const r=t<e,i=r?j7(t,e,n):j7(e,t,n);return(r?-1:1)*(i<0?1/-i:i)}function ch(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function h3(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n>i||n===void 0&&i>=i)&&(n=i)}return n}function Jxe(e,t,n=0,r=1/0,i){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(e.length-1,r)),!(n<=t&&t<=r))return e;for(i=i===void 0?Qxe:Wat(i);r>n;){if(r-n>600){const u=r-n+1,l=t-n+1,c=Math.log(u),f=.5*Math.exp(2*c/3),d=.5*Math.sqrt(c*f*(u-f)/u)*(l-u/2<0?-1:1),h=Math.max(n,Math.floor(t-l*f/u+d)),p=Math.min(r,Math.floor(t+(u-l)*f/u+d));Jxe(e,t,h,p,i)}const s=e[t];let o=n,a=r;for(kT(e,n,t),i(e[r],s)>0&&kT(e,n,r);o<a;){for(kT(e,o,a),++o,--a;i(e[o],s)<0;)++o;for(;i(e[a],s)>0;)--a}i(e[n],s)===0?kT(e,n,a):(++a,kT(e,a,r)),a<=t&&(n=a+1),t<=a&&(r=a-1)}return e}function kT(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function BA(e,t,n){if(e=Float64Array.from(Fat(e,n)),!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return h3(e);if(t>=1)return ch(e);var r,i=(r-1)*t,s=Math.floor(i),o=ch(Jxe(e,s).subarray(0,s+1)),a=h3(e.subarray(s+1));return o+(a-o)*(i-s)}}function Zxe(e,t,n=Wxe){if(!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,s=Math.floor(i),o=+n(e[s],s,e),a=+n(e[s+1],s+1,e);return o+(a-o)*(i-s)}}function eSe(e,t){let n=0,r=0;if(t===void 0)for(let i of e)i!=null&&(i=+i)>=i&&(++n,r+=i);else{let i=-1;for(let s of e)(s=t(s,++i,e))!=null&&(s=+s)>=s&&(++n,r+=s)}if(n)return r/n}function tSe(e,t){return BA(e,.5,t)}function*Xat(e){for(const t of e)yield*t}function nSe(e){return Array.from(Xat(e))}function Mu(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((t-e)/n))|0,s=new Array(i);++r<i;)s[r]=e+r*n;return s}function dK(e,t){let n=0;if(t===void 0)for(let r of e)(r=+r)&&(n+=r);else{let r=-1;for(let i of e)(i=+t(i,++r,e))&&(n+=i)}return n}function Qat(e,...t){e=new f3(e),t=t.map(Jat);e:for(const n of e)for(const r of t)if(!r.has(n)){e.delete(n);continue e}return e}function Jat(e){return e instanceof f3?e:new f3(e)}function Zat(...e){const t=new f3;for(const n of e)for(const r of n)t.add(r);return t}function eut(e){return e}var f8=1,d8=2,B7=3,E2=4,que=1e-6;function tut(e){return"translate("+e+",0)"}function nut(e){return"translate(0,"+e+")"}function rut(e){return t=>+e(t)}function iut(e,t){return t=Math.max(0,e.bandwidth()-t*2)/2,e.round()&&(t=Math.round(t)),n=>+e(n)+t}function sut(){return!this.__axis}function rSe(e,t){var n=[],r=null,i=null,s=6,o=6,a=3,u=typeof window<"u"&&window.devicePixelRatio>1?0:.5,l=e===f8||e===E2?-1:1,c=e===E2||e===d8?"x":"y",f=e===f8||e===B7?tut:nut;function d(h){var p=r??(t.ticks?t.ticks.apply(t,n):t.domain()),m=i??(t.tickFormat?t.tickFormat.apply(t,n):eut),g=Math.max(s,0)+a,y=t.range(),v=+y[0]+u,_=+y[y.length-1]+u,w=(t.bandwidth?iut:rut)(t.copy(),u),E=h.selection?h.selection():h,S=E.selectAll(".domain").data([null]),T=E.selectAll(".tick").data(p,t).order(),C=T.exit(),A=T.enter().append("g").attr("class","tick"),k=T.select("line"),N=T.select("text");S=S.merge(S.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),T=T.merge(A),k=k.merge(A.append("line").attr("stroke","currentColor").attr(c+"2",l*s)),N=N.merge(A.append("text").attr("fill","currentColor").attr(c,l*g).attr("dy",e===f8?"0em":e===B7?"0.71em":"0.32em")),h!==E&&(S=S.transition(h),T=T.transition(h),k=k.transition(h),N=N.transition(h),C=C.transition(h).attr("opacity",que).attr("transform",function(O){return isFinite(O=w(O))?f(O+u):this.getAttribute("transform")}),A.attr("opacity",que).attr("transform",function(O){var D=this.parentNode.__axis;return f((D&&isFinite(D=D(O))?D:w(O))+u)})),C.remove(),S.attr("d",e===E2||e===d8?o?"M"+l*o+","+v+"H"+u+"V"+_+"H"+l*o:"M"+u+","+v+"V"+_:o?"M"+v+","+l*o+"V"+u+"H"+_+"V"+l*o:"M"+v+","+u+"H"+_),T.attr("opacity",1).attr("transform",function(O){return f(w(O)+u)}),k.attr(c+"2",l*s),N.attr(c,l*g).text(m),E.filter(sut).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",e===d8?"start":e===E2?"end":"middle"),E.each(function(){this.__axis=w})}return d.scale=function(h){return arguments.length?(t=h,d):t},d.ticks=function(){return n=Array.from(arguments),d},d.tickArguments=function(h){return arguments.length?(n=h==null?[]:Array.from(h),d):n.slice()},d.tickValues=function(h){return arguments.length?(r=h==null?null:Array.from(h),d):r&&r.slice()},d.tickFormat=function(h){return arguments.length?(i=h,d):i},d.tickSize=function(h){return arguments.length?(s=o=+h,d):s},d.tickSizeInner=function(h){return arguments.length?(s=+h,d):s},d.tickSizeOuter=function(h){return arguments.length?(o=+h,d):o},d.tickPadding=function(h){return arguments.length?(a=+h,d):a},d.offset=function(h){return arguments.length?(u=+h,d):u},d}function out(e){return rSe(B7,e)}function aut(e){return rSe(E2,e)}var uut={value:()=>{}};function w6(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new vD(n)}function vD(e){this._=e}function lut(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}vD.prototype=w6.prototype={constructor:vD,on:function(e,t){var n=this._,r=lut(e+"",n),i,s=-1,o=r.length;if(arguments.length<2){for(;++s<o;)if((i=(e=r[s]).type)&&(i=cut(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++s<o;)if(i=(e=r[s]).type)n[i]=Wue(n[i],e.name,t);else if(t==null)for(i in n)n[i]=Wue(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new vD(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,s;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(s=this._[e],r=0,i=s.length;r<i;++r)s[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,s=r.length;i<s;++i)r[i].value.apply(t,n)}};function cut(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function Wue(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=uut,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var U7="http://www.w3.org/1999/xhtml";const Gue={svg:"http://www.w3.org/2000/svg",xhtml:U7,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function E6(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),Gue.hasOwnProperty(t)?{space:Gue[t],local:e}:e}function fut(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===U7&&t.documentElement.namespaceURI===U7?t.createElement(e):t.createElementNS(n,e)}}function dut(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function iSe(e){var t=E6(e);return(t.local?dut:fut)(t)}function hut(){}function hK(e){return e==null?hut:function(){return this.querySelector(e)}}function put(e){typeof e!="function"&&(e=hK(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,a=r[i]=new Array(o),u,l,c=0;c<o;++c)(u=s[c])&&(l=e.call(u,u.__data__,c,s))&&("__data__"in u&&(l.__data__=u.__data__),a[c]=l);return new Za(r,this._parents)}function sSe(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function mut(){return[]}function oSe(e){return e==null?mut:function(){return this.querySelectorAll(e)}}function gut(e){return function(){return sSe(e.apply(this,arguments))}}function yut(e){typeof e=="function"?e=gut(e):e=oSe(e);for(var t=this._groups,n=t.length,r=[],i=[],s=0;s<n;++s)for(var o=t[s],a=o.length,u,l=0;l<a;++l)(u=o[l])&&(r.push(e.call(u,u.__data__,l,o)),i.push(u));return new Za(r,i)}function aSe(e){return function(){return this.matches(e)}}function uSe(e){return function(t){return t.matches(e)}}var vut=Array.prototype.find;function but(e){return function(){return vut.call(this.children,e)}}function _ut(){return this.firstElementChild}function wut(e){return this.select(e==null?_ut:but(typeof e=="function"?e:uSe(e)))}var Eut=Array.prototype.filter;function xut(){return Array.from(this.children)}function Sut(e){return function(){return Eut.call(this.children,e)}}function Tut(e){return this.selectAll(e==null?xut:Sut(typeof e=="function"?e:uSe(e)))}function Cut(e){typeof e!="function"&&(e=aSe(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,a=r[i]=[],u,l=0;l<o;++l)(u=s[l])&&e.call(u,u.__data__,l,s)&&a.push(u);return new Za(r,this._parents)}function lSe(e){return new Array(e.length)}function Aut(){return new Za(this._enter||this._groups.map(lSe),this._parents)}function p3(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}p3.prototype={constructor:p3,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function Iut(e){return function(){return e}}function kut(e,t,n,r,i,s){for(var o=0,a,u=t.length,l=s.length;o<l;++o)(a=t[o])?(a.__data__=s[o],r[o]=a):n[o]=new p3(e,s[o]);for(;o<u;++o)(a=t[o])&&(i[o]=a)}function Rut(e,t,n,r,i,s,o){var a,u,l=new Map,c=t.length,f=s.length,d=new Array(c),h;for(a=0;a<c;++a)(u=t[a])&&(d[a]=h=o.call(u,u.__data__,a,t)+"",l.has(h)?i[a]=u:l.set(h,u));for(a=0;a<f;++a)h=o.call(e,s[a],a,s)+"",(u=l.get(h))?(r[a]=u,u.__data__=s[a],l.delete(h)):n[a]=new p3(e,s[a]);for(a=0;a<c;++a)(u=t[a])&&l.get(d[a])===u&&(i[a]=u)}function Nut(e){return e.__data__}function Put(e,t){if(!arguments.length)return Array.from(this,Nut);var n=t?Rut:kut,r=this._parents,i=this._groups;typeof e!="function"&&(e=Iut(e));for(var s=i.length,o=new Array(s),a=new Array(s),u=new Array(s),l=0;l<s;++l){var c=r[l],f=i[l],d=f.length,h=Dut(e.call(c,c&&c.__data__,l,r)),p=h.length,m=a[l]=new Array(p),g=o[l]=new Array(p),y=u[l]=new Array(d);n(c,f,m,g,y,h,t);for(var v=0,_=0,w,E;v<p;++v)if(w=m[v]){for(v>=_&&(_=v+1);!(E=g[_])&&++_<p;);w._next=E||null}}return o=new Za(o,r),o._enter=a,o._exit=u,o}function Dut(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Out(){return new Za(this._exit||this._groups.map(lSe),this._parents)}function $ut(e,t,n){var r=this.enter(),i=this,s=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),n==null?s.remove():n(s),r&&i?r.merge(i).order():i}function Mut(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,i=n.length,s=r.length,o=Math.min(i,s),a=new Array(i),u=0;u<o;++u)for(var l=n[u],c=r[u],f=l.length,d=a[u]=new Array(f),h,p=0;p<f;++p)(h=l[p]||c[p])&&(d[p]=h);for(;u<i;++u)a[u]=n[u];return new Za(a,this._parents)}function Lut(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],i=r.length-1,s=r[i],o;--i>=0;)(o=r[i])&&(s&&o.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(o,s),s=o);return this}function Fut(e){e||(e=jut);function t(f,d){return f&&d?e(f.__data__,d.__data__):!f-!d}for(var n=this._groups,r=n.length,i=new Array(r),s=0;s<r;++s){for(var o=n[s],a=o.length,u=i[s]=new Array(a),l,c=0;c<a;++c)(l=o[c])&&(u[c]=l);u.sort(t)}return new Za(i,this._parents).order()}function jut(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function But(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function Uut(){return Array.from(this)}function zut(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,s=r.length;i<s;++i){var o=r[i];if(o)return o}return null}function Vut(){let e=0;for(const t of this)++e;return e}function Hut(){return!this.node()}function qut(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i=t[n],s=0,o=i.length,a;s<o;++s)(a=i[s])&&e.call(a,a.__data__,s,i);return this}function Wut(e){return function(){this.removeAttribute(e)}}function Gut(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Yut(e,t){return function(){this.setAttribute(e,t)}}function Kut(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function Xut(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function Qut(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function Jut(e,t){var n=E6(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?Gut:Wut:typeof t=="function"?n.local?Qut:Xut:n.local?Kut:Yut)(n,t))}function cSe(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function Zut(e){return function(){this.style.removeProperty(e)}}function elt(e,t,n){return function(){this.style.setProperty(e,t,n)}}function tlt(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function nlt(e,t,n){return arguments.length>1?this.each((t==null?Zut:typeof t=="function"?tlt:elt)(e,t,n??"")):VE(this.node(),e)}function VE(e,t){return e.style.getPropertyValue(t)||cSe(e).getComputedStyle(e,null).getPropertyValue(t)}function rlt(e){return function(){delete this[e]}}function ilt(e,t){return function(){this[e]=t}}function slt(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function olt(e,t){return arguments.length>1?this.each((t==null?rlt:typeof t=="function"?slt:ilt)(e,t)):this.node()[e]}function fSe(e){return e.trim().split(/^|\s+/)}function pK(e){return e.classList||new dSe(e)}function dSe(e){this._node=e,this._names=fSe(e.getAttribute("class")||"")}dSe.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function hSe(e,t){for(var n=pK(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function pSe(e,t){for(var n=pK(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function alt(e){return function(){hSe(this,e)}}function ult(e){return function(){pSe(this,e)}}function llt(e,t){return function(){(t.apply(this,arguments)?hSe:pSe)(this,e)}}function clt(e,t){var n=fSe(e+"");if(arguments.length<2){for(var r=pK(this.node()),i=-1,s=n.length;++i<s;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?llt:t?alt:ult)(n,t))}function flt(){this.textContent=""}function dlt(e){return function(){this.textContent=e}}function hlt(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function plt(e){return arguments.length?this.each(e==null?flt:(typeof e=="function"?hlt:dlt)(e)):this.node().textContent}function mlt(){this.innerHTML=""}function glt(e){return function(){this.innerHTML=e}}function ylt(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function vlt(e){return arguments.length?this.each(e==null?mlt:(typeof e=="function"?ylt:glt)(e)):this.node().innerHTML}function blt(){this.nextSibling&&this.parentNode.appendChild(this)}function _lt(){return this.each(blt)}function wlt(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Elt(){return this.each(wlt)}function xlt(e){var t=typeof e=="function"?e:iSe(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function Slt(){return null}function Tlt(e,t){var n=typeof e=="function"?e:iSe(e),r=t==null?Slt:typeof t=="function"?t:hK(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function Clt(){var e=this.parentNode;e&&e.removeChild(this)}function Alt(){return this.each(Clt)}function Ilt(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function klt(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Rlt(e){return this.select(e?klt:Ilt)}function Nlt(e){return arguments.length?this.property("__data__",e):this.node().__data__}function Plt(e){return function(t){e.call(this,t,this.__data__)}}function Dlt(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function Olt(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,i=t.length,s;n<i;++n)s=t[n],(!e.type||s.type===e.type)&&s.name===e.name?this.removeEventListener(s.type,s.listener,s.options):t[++r]=s;++r?t.length=r:delete this.__on}}}function $lt(e,t,n){return function(){var r=this.__on,i,s=Plt(t);if(r){for(var o=0,a=r.length;o<a;++o)if((i=r[o]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=s,i.options=n),i.value=t;return}}this.addEventListener(e.type,s,n),i={type:e.type,name:e.name,value:t,listener:s,options:n},r?r.push(i):this.__on=[i]}}function Mlt(e,t,n){var r=Dlt(e+""),i,s=r.length,o;if(arguments.length<2){var a=this.node().__on;if(a){for(var u=0,l=a.length,c;u<l;++u)for(i=0,c=a[u];i<s;++i)if((o=r[i]).type===c.type&&o.name===c.name)return c.value}return}for(a=t?$lt:Olt,i=0;i<s;++i)this.each(a(r[i],t,n));return this}function mSe(e,t,n){var r=cSe(e),i=r.CustomEvent;typeof i=="function"?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function Llt(e,t){return function(){return mSe(this,e,t)}}function Flt(e,t){return function(){return mSe(this,e,t.apply(this,arguments))}}function jlt(e,t){return this.each((typeof t=="function"?Flt:Llt)(e,t))}function*Blt(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,s=r.length,o;i<s;++i)(o=r[i])&&(yield o)}var mK=[null];function Za(e,t){this._groups=e,this._parents=t}function Sk(){return new Za([[document.documentElement]],mK)}function Ult(){return this}Za.prototype=Sk.prototype={constructor:Za,select:put,selectAll:yut,selectChild:wut,selectChildren:Tut,filter:Cut,data:Put,enter:Aut,exit:Out,join:$ut,merge:Mut,selection:Ult,order:Lut,sort:Fut,call:But,nodes:Uut,node:zut,size:Vut,empty:Hut,each:qut,attr:Jut,style:nlt,property:olt,classed:clt,text:plt,html:vlt,raise:_lt,lower:Elt,append:xlt,insert:Tlt,remove:Alt,clone:Rlt,datum:Nlt,on:Mlt,dispatch:jlt,[Symbol.iterator]:Blt};function rs(e){return typeof e=="string"?new Za([[document.querySelector(e)]],[document.documentElement]):new Za([[e]],mK)}function zlt(e){let t;for(;t=e.sourceEvent;)e=t;return e}function z7(e,t){if(e=zlt(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}function Vlt(e){return typeof e=="string"?new Za([document.querySelectorAll(e)],[document.documentElement]):new Za([sSe(e)],mK)}const V7={capture:!0,passive:!1};function H7(e){e.preventDefault(),e.stopImmediatePropagation()}function Hlt(e){var t=e.document.documentElement,n=rs(e).on("dragstart.drag",H7,V7);"onselectstart"in t?n.on("selectstart.drag",H7,V7):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function qlt(e,t){var n=e.document.documentElement,r=rs(e).on("dragstart.drag",null);t&&(r.on("click.drag",H7,V7),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}function mS(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Tk(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Fy(){}var W1=.7,HE=1/W1,Zw="\\s*([+-]?\\d+)\\s*",UA="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",fh="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Wlt=/^#([0-9a-f]{3,8})$/,Glt=new RegExp(`^rgb\\(${Zw},${Zw},${Zw}\\)$`),Ylt=new RegExp(`^rgb\\(${fh},${fh},${fh}\\)$`),Klt=new RegExp(`^rgba\\(${Zw},${Zw},${Zw},${UA}\\)$`),Xlt=new RegExp(`^rgba\\(${fh},${fh},${fh},${UA}\\)$`),Qlt=new RegExp(`^hsl\\(${UA},${fh},${fh}\\)$`),Jlt=new RegExp(`^hsla\\(${UA},${fh},${fh},${UA}\\)$`),Yue={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};mS(Fy,G1,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Kue,formatHex:Kue,formatHex8:Zlt,formatHsl:ect,formatRgb:Xue,toString:Xue});function Kue(){return this.rgb().formatHex()}function Zlt(){return this.rgb().formatHex8()}function ect(){return gSe(this).formatHsl()}function Xue(){return this.rgb().formatRgb()}function G1(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=Wlt.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?Que(t):n===3?new no(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?jN(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?jN(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=Glt.exec(e))?new no(t[1],t[2],t[3],1):(t=Ylt.exec(e))?new no(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=Klt.exec(e))?jN(t[1],t[2],t[3],t[4]):(t=Xlt.exec(e))?jN(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=Qlt.exec(e))?ele(t[1],t[2]/100,t[3]/100,1):(t=Jlt.exec(e))?ele(t[1],t[2]/100,t[3]/100,t[4]):Yue.hasOwnProperty(e)?Que(Yue[e]):e==="transparent"?new no(NaN,NaN,NaN,0):null}function Que(e){return new no(e>>16&255,e>>8&255,e&255,1)}function jN(e,t,n,r){return r<=0&&(e=t=n=NaN),new no(e,t,n,r)}function gK(e){return e instanceof Fy||(e=G1(e)),e?(e=e.rgb(),new no(e.r,e.g,e.b,e.opacity)):new no}function G0(e,t,n,r){return arguments.length===1?gK(e):new no(e,t,n,r??1)}function no(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}mS(no,G0,Tk(Fy,{brighter(e){return e=e==null?HE:Math.pow(HE,e),new no(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?W1:Math.pow(W1,e),new no(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new no(T1(this.r),T1(this.g),T1(this.b),m3(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Jue,formatHex:Jue,formatHex8:tct,formatRgb:Zue,toString:Zue}));function Jue(){return`#${a1(this.r)}${a1(this.g)}${a1(this.b)}`}function tct(){return`#${a1(this.r)}${a1(this.g)}${a1(this.b)}${a1((isNaN(this.opacity)?1:this.opacity)*255)}`}function Zue(){const e=m3(this.opacity);return`${e===1?"rgb(":"rgba("}${T1(this.r)}, ${T1(this.g)}, ${T1(this.b)}${e===1?")":`, ${e})`}`}function m3(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function T1(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function a1(e){return e=T1(e),(e<16?"0":"")+e.toString(16)}function ele(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Sf(e,t,n,r)}function gSe(e){if(e instanceof Sf)return new Sf(e.h,e.s,e.l,e.opacity);if(e instanceof Fy||(e=G1(e)),!e)return new Sf;if(e instanceof Sf)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),s=Math.max(t,n,r),o=NaN,a=s-i,u=(s+i)/2;return a?(t===s?o=(n-r)/a+(n<r)*6:n===s?o=(r-t)/a+2:o=(t-n)/a+4,a/=u<.5?s+i:2-s-i,o*=60):a=u>0&&u<1?0:o,new Sf(o,a,u,e.opacity)}function g3(e,t,n,r){return arguments.length===1?gSe(e):new Sf(e,t,n,r??1)}function Sf(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}mS(Sf,g3,Tk(Fy,{brighter(e){return e=e==null?HE:Math.pow(HE,e),new Sf(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?W1:Math.pow(W1,e),new Sf(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new no(h8(e>=240?e-240:e+120,i,r),h8(e,i,r),h8(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new Sf(tle(this.h),BN(this.s),BN(this.l),m3(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=m3(this.opacity);return`${e===1?"hsl(":"hsla("}${tle(this.h)}, ${BN(this.s)*100}%, ${BN(this.l)*100}%${e===1?")":`, ${e})`}`}}));function tle(e){return e=(e||0)%360,e<0?e+360:e}function BN(e){return Math.max(0,Math.min(1,e||0))}function h8(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const ySe=Math.PI/180,vSe=180/Math.PI,y3=18,bSe=.96422,_Se=1,wSe=.82521,ESe=4/29,eE=6/29,xSe=3*eE*eE,nct=eE*eE*eE;function SSe(e){if(e instanceof dh)return new dh(e.l,e.a,e.b,e.opacity);if(e instanceof Yp)return TSe(e);e instanceof no||(e=gK(e));var t=y8(e.r),n=y8(e.g),r=y8(e.b),i=p8((.2225045*t+.7168786*n+.0606169*r)/_Se),s,o;return t===n&&n===r?s=o=i:(s=p8((.4360747*t+.3850649*n+.1430804*r)/bSe),o=p8((.0139322*t+.0971045*n+.7141733*r)/wSe)),new dh(116*i-16,500*(s-i),200*(i-o),e.opacity)}function v3(e,t,n,r){return arguments.length===1?SSe(e):new dh(e,t,n,r??1)}function dh(e,t,n,r){this.l=+e,this.a=+t,this.b=+n,this.opacity=+r}mS(dh,v3,Tk(Fy,{brighter(e){return new dh(this.l+y3*(e??1),this.a,this.b,this.opacity)},darker(e){return new dh(this.l-y3*(e??1),this.a,this.b,this.opacity)},rgb(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return t=bSe*m8(t),e=_Se*m8(e),n=wSe*m8(n),new no(g8(3.1338561*t-1.6168667*e-.4906146*n),g8(-.9787684*t+1.9161415*e+.033454*n),g8(.0719453*t-.2289914*e+1.4052427*n),this.opacity)}}));function p8(e){return e>nct?Math.pow(e,1/3):e/xSe+ESe}function m8(e){return e>eE?e*e*e:xSe*(e-ESe)}function g8(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function y8(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function rct(e){if(e instanceof Yp)return new Yp(e.h,e.c,e.l,e.opacity);if(e instanceof dh||(e=SSe(e)),e.a===0&&e.b===0)return new Yp(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*vSe;return new Yp(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function b3(e,t,n,r){return arguments.length===1?rct(e):new Yp(e,t,n,r??1)}function Yp(e,t,n,r){this.h=+e,this.c=+t,this.l=+n,this.opacity=+r}function TSe(e){if(isNaN(e.h))return new dh(e.l,0,0,e.opacity);var t=e.h*ySe;return new dh(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}mS(Yp,b3,Tk(Fy,{brighter(e){return new Yp(this.h,this.c,this.l+y3*(e??1),this.opacity)},darker(e){return new Yp(this.h,this.c,this.l-y3*(e??1),this.opacity)},rgb(){return TSe(this).rgb()}}));var CSe=-.14861,yK=1.78277,vK=-.29227,x6=-.90649,zA=1.97294,nle=zA*x6,rle=zA*yK,ile=yK*vK-x6*CSe;function ict(e){if(e instanceof C1)return new C1(e.h,e.s,e.l,e.opacity);e instanceof no||(e=gK(e));var t=e.r/255,n=e.g/255,r=e.b/255,i=(ile*r+nle*t-rle*n)/(ile+nle-rle),s=r-i,o=(zA*(n-i)-vK*s)/x6,a=Math.sqrt(o*o+s*s)/(zA*i*(1-i)),u=a?Math.atan2(o,s)*vSe-120:NaN;return new C1(u<0?u+360:u,a,i,e.opacity)}function q7(e,t,n,r){return arguments.length===1?ict(e):new C1(e,t,n,r??1)}function C1(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}mS(C1,q7,Tk(Fy,{brighter(e){return e=e==null?HE:Math.pow(HE,e),new C1(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?W1:Math.pow(W1,e),new C1(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=isNaN(this.h)?0:(this.h+120)*ySe,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),r=Math.cos(e),i=Math.sin(e);return new no(255*(t+n*(CSe*r+yK*i)),255*(t+n*(vK*r+x6*i)),255*(t+n*(zA*r)),this.opacity)}}));function ASe(e,t,n,r,i){var s=e*e,o=s*e;return((1-3*e+3*s-o)*t+(4-6*s+3*o)*n+(1+3*e+3*s-3*o)*r+o*i)/6}function ISe(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),i=e[r],s=e[r+1],o=r>0?e[r-1]:2*i-s,a=r<t-1?e[r+2]:2*s-i;return ASe((n-r/t)*t,o,i,s,a)}}function kSe(e){var t=e.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*t),i=e[(r+t-1)%t],s=e[r%t],o=e[(r+1)%t],a=e[(r+2)%t];return ASe((n-r/t)*t,i,s,o,a)}}const S6=e=>()=>e;function RSe(e,t){return function(n){return e+n*t}}function sct(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function T6(e,t){var n=t-e;return n?RSe(e,n>180||n<-180?n-360*Math.round(n/360):n):S6(isNaN(e)?t:e)}function oct(e){return(e=+e)==1?ro:function(t,n){return n-t?sct(t,n,e):S6(isNaN(t)?n:t)}}function ro(e,t){var n=t-e;return n?RSe(e,n):S6(isNaN(e)?t:e)}const VA=function e(t){var n=oct(t);function r(i,s){var o=n((i=G0(i)).r,(s=G0(s)).r),a=n(i.g,s.g),u=n(i.b,s.b),l=ro(i.opacity,s.opacity);return function(c){return i.r=o(c),i.g=a(c),i.b=u(c),i.opacity=l(c),i+""}}return r.gamma=e,r}(1);function NSe(e){return function(t){var n=t.length,r=new Array(n),i=new Array(n),s=new Array(n),o,a;for(o=0;o<n;++o)a=G0(t[o]),r[o]=a.r||0,i[o]=a.g||0,s[o]=a.b||0;return r=e(r),i=e(i),s=e(s),a.opacity=1,function(u){return a.r=r(u),a.g=i(u),a.b=s(u),a+""}}}var act=NSe(ISe),uct=NSe(kSe);function bK(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(s){for(i=0;i<n;++i)r[i]=e[i]*(1-s)+t[i]*s;return r}}function PSe(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function lct(e,t){return(PSe(t)?bK:DSe)(e,t)}function DSe(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),s=new Array(n),o;for(o=0;o<r;++o)i[o]=eg(e[o],t[o]);for(;o<n;++o)s[o]=t[o];return function(a){for(o=0;o<r;++o)s[o]=i[o](a);return s}}function OSe(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function yc(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function $Se(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=eg(e[i],t[i]):r[i]=t[i];return function(s){for(i in n)r[i]=n[i](s);return r}}var W7=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,v8=new RegExp(W7.source,"g");function cct(e){return function(){return e}}function fct(e){return function(t){return e(t)+""}}function _K(e,t){var n=W7.lastIndex=v8.lastIndex=0,r,i,s,o=-1,a=[],u=[];for(e=e+"",t=t+"";(r=W7.exec(e))&&(i=v8.exec(t));)(s=i.index)>n&&(s=t.slice(n,s),a[o]?a[o]+=s:a[++o]=s),(r=r[0])===(i=i[0])?a[o]?a[o]+=i:a[++o]=i:(a[++o]=null,u.push({i:o,x:yc(r,i)})),n=v8.lastIndex;return n<t.length&&(s=t.slice(n),a[o]?a[o]+=s:a[++o]=s),a.length<2?u[0]?fct(u[0].x):cct(t):(t=u.length,function(l){for(var c=0,f;c<t;++c)a[(f=u[c]).i]=f.x(l);return a.join("")})}function eg(e,t){var n=typeof t,r;return t==null||n==="boolean"?S6(t):(n==="number"?yc:n==="string"?(r=G1(t))?(t=r,VA):_K:t instanceof G1?VA:t instanceof Date?OSe:PSe(t)?bK:Array.isArray(t)?DSe:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?$Se:yc)(e,t)}function dct(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}}function hct(e,t){var n=T6(+e,+t);return function(r){var i=n(r);return i-360*Math.floor(i/360)}}function Ck(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var sle=180/Math.PI,G7={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function MSe(e,t,n,r,i,s){var o,a,u;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(u=e*n+t*r)&&(n-=e*u,r-=t*u),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,u/=a),e*r<t*n&&(e=-e,t=-t,u=-u,o=-o),{translateX:i,translateY:s,rotate:Math.atan2(t,e)*sle,skewX:Math.atan(u)*sle,scaleX:o,scaleY:a}}var UN;function pct(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?G7:MSe(t.a,t.b,t.c,t.d,t.e,t.f)}function mct(e){return e==null||(UN||(UN=document.createElementNS("http://www.w3.org/2000/svg","g")),UN.setAttribute("transform",e),!(e=UN.transform.baseVal.consolidate()))?G7:(e=e.matrix,MSe(e.a,e.b,e.c,e.d,e.e,e.f))}function LSe(e,t,n,r){function i(l){return l.length?l.pop()+" ":""}function s(l,c,f,d,h,p){if(l!==f||c!==d){var m=h.push("translate(",null,t,null,n);p.push({i:m-4,x:yc(l,f)},{i:m-2,x:yc(c,d)})}else(f||d)&&h.push("translate("+f+t+d+n)}function o(l,c,f,d){l!==c?(l-c>180?c+=360:c-l>180&&(l+=360),d.push({i:f.push(i(f)+"rotate(",null,r)-2,x:yc(l,c)})):c&&f.push(i(f)+"rotate("+c+r)}function a(l,c,f,d){l!==c?d.push({i:f.push(i(f)+"skewX(",null,r)-2,x:yc(l,c)}):c&&f.push(i(f)+"skewX("+c+r)}function u(l,c,f,d,h,p){if(l!==f||c!==d){var m=h.push(i(h)+"scale(",null,",",null,")");p.push({i:m-4,x:yc(l,f)},{i:m-2,x:yc(c,d)})}else(f!==1||d!==1)&&h.push(i(h)+"scale("+f+","+d+")")}return function(l,c){var f=[],d=[];return l=e(l),c=e(c),s(l.translateX,l.translateY,c.translateX,c.translateY,f,d),o(l.rotate,c.rotate,f,d),a(l.skewX,c.skewX,f,d),u(l.scaleX,l.scaleY,c.scaleX,c.scaleY,f,d),l=c=null,function(h){for(var p=-1,m=d.length,g;++p<m;)f[(g=d[p]).i]=g.x(h);return f.join("")}}}var FSe=LSe(pct,"px, ","px)","deg)"),jSe=LSe(mct,", ",")",")"),gct=1e-12;function ole(e){return((e=Math.exp(e))+1/e)/2}function yct(e){return((e=Math.exp(e))-1/e)/2}function vct(e){return((e=Math.exp(2*e))-1)/(e+1)}const bct=function e(t,n,r){function i(s,o){var a=s[0],u=s[1],l=s[2],c=o[0],f=o[1],d=o[2],h=c-a,p=f-u,m=h*h+p*p,g,y;if(m<gct)y=Math.log(d/l)/t,g=function(T){return[a+T*h,u+T*p,l*Math.exp(t*T*y)]};else{var v=Math.sqrt(m),_=(d*d-l*l+r*m)/(2*l*n*v),w=(d*d-l*l-r*m)/(2*d*n*v),E=Math.log(Math.sqrt(_*_+1)-_),S=Math.log(Math.sqrt(w*w+1)-w);y=(S-E)/t,g=function(T){var C=T*y,A=ole(E),k=l/(n*v)*(A*vct(t*C+E)-yct(E));return[a+k*h,u+k*p,l*A/ole(t*C+E)]}}return g.duration=y*1e3*t/Math.SQRT2,g}return i.rho=function(s){var o=Math.max(.001,+s),a=o*o,u=a*a;return e(o,a,u)},i}(Math.SQRT2,2,4);function BSe(e){return function(t,n){var r=e((t=g3(t)).h,(n=g3(n)).h),i=ro(t.s,n.s),s=ro(t.l,n.l),o=ro(t.opacity,n.opacity);return function(a){return t.h=r(a),t.s=i(a),t.l=s(a),t.opacity=o(a),t+""}}}const _ct=BSe(T6);var wct=BSe(ro);function Ect(e,t){var n=ro((e=v3(e)).l,(t=v3(t)).l),r=ro(e.a,t.a),i=ro(e.b,t.b),s=ro(e.opacity,t.opacity);return function(o){return e.l=n(o),e.a=r(o),e.b=i(o),e.opacity=s(o),e+""}}function USe(e){return function(t,n){var r=e((t=b3(t)).h,(n=b3(n)).h),i=ro(t.c,n.c),s=ro(t.l,n.l),o=ro(t.opacity,n.opacity);return function(a){return t.h=r(a),t.c=i(a),t.l=s(a),t.opacity=o(a),t+""}}}const xct=USe(T6);var Sct=USe(ro);function zSe(e){return function t(n){n=+n;function r(i,s){var o=e((i=q7(i)).h,(s=q7(s)).h),a=ro(i.s,s.s),u=ro(i.l,s.l),l=ro(i.opacity,s.opacity);return function(c){return i.h=o(c),i.s=a(c),i.l=u(Math.pow(c,n)),i.opacity=l(c),i+""}}return r.gamma=t,r}(1)}const Tct=zSe(T6);var Cct=zSe(ro);function wK(e,t){t===void 0&&(t=e,e=eg);for(var n=0,r=t.length-1,i=t[0],s=new Array(r<0?0:r);n<r;)s[n]=e(i,i=t[++n]);return function(o){var a=Math.max(0,Math.min(r-1,Math.floor(o*=r)));return s[a](o-a)}}function Act(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e(r/(t-1));return n}const Ict=Object.freeze(Object.defineProperty({__proto__:null,interpolate:eg,interpolateArray:lct,interpolateBasis:ISe,interpolateBasisClosed:kSe,interpolateCubehelix:Tct,interpolateCubehelixLong:Cct,interpolateDate:OSe,interpolateDiscrete:dct,interpolateHcl:xct,interpolateHclLong:Sct,interpolateHsl:_ct,interpolateHslLong:wct,interpolateHue:hct,interpolateLab:Ect,interpolateNumber:yc,interpolateNumberArray:bK,interpolateObject:$Se,interpolateRgb:VA,interpolateRgbBasis:act,interpolateRgbBasisClosed:uct,interpolateRound:Ck,interpolateString:_K,interpolateTransformCss:FSe,interpolateTransformSvg:jSe,interpolateZoom:bct,piecewise:wK,quantize:Act},Symbol.toStringTag,{value:"Module"}));var qE=0,x2=0,RT=0,VSe=1e3,_3,S2,w3=0,Y1=0,C6=0,HA=typeof performance=="object"&&performance.now?performance:Date,HSe=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function A6(){return Y1||(HSe(kct),Y1=HA.now()+C6)}function kct(){Y1=0}function qA(){this._call=this._time=this._next=null}qA.prototype=EK.prototype={constructor:qA,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?A6():+n)+(t==null?0:+t),!this._next&&S2!==this&&(S2?S2._next=this:_3=this,S2=this),this._call=e,this._time=n,Y7()},stop:function(){this._call&&(this._call=null,this._time=1/0,Y7())}};function EK(e,t,n){var r=new qA;return r.restart(e,t,n),r}function Rct(){A6(),++qE;for(var e=_3,t;e;)(t=Y1-e._time)>=0&&e._call.call(void 0,t),e=e._next;--qE}function ale(){Y1=(w3=HA.now())+C6,qE=x2=0;try{Rct()}finally{qE=0,Pct(),Y1=0}}function Nct(){var e=HA.now(),t=e-w3;t>VSe&&(C6-=t,w3=e)}function Pct(){for(var e,t=_3,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:_3=n);S2=e,Y7(r)}function Y7(e){if(!qE){x2&&(x2=clearTimeout(x2));var t=e-Y1;t>24?(e<1/0&&(x2=setTimeout(ale,e-HA.now()-C6)),RT&&(RT=clearInterval(RT))):(RT||(w3=HA.now(),RT=setInterval(Nct,VSe)),qE=1,HSe(ale))}}function ule(e,t,n){var r=new qA;return t=t==null?0:+t,r.restart(i=>{r.stop(),e(i+t)},t,n),r}function Dct(e,t,n){var r=new qA,i=t;return t==null?(r.restart(e,t,n),r):(r._restart=r.restart,r.restart=function(s,o,a){o=+o,a=a==null?A6():+a,r._restart(function u(l){l+=i,r._restart(u,i+=o,a),s(l)},o,a)},r.restart(e,t,n),r)}var Oct=w6("start","end","cancel","interrupt"),$ct=[],qSe=0,lle=1,K7=2,bD=3,cle=4,X7=5,_D=6;function I6(e,t,n,r,i,s){var o=e.__transition;if(!o)e.__transition={};else if(n in o)return;Mct(e,n,{name:t,index:r,group:i,on:Oct,tween:$ct,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:qSe})}function xK(e,t){var n=ud(e,t);if(n.state>qSe)throw new Error("too late; already scheduled");return n}function Jh(e,t){var n=ud(e,t);if(n.state>bD)throw new Error("too late; already running");return n}function ud(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function Mct(e,t,n){var r=e.__transition,i;r[t]=n,n.timer=EK(s,0,n.time);function s(l){n.state=lle,n.timer.restart(o,n.delay,n.time),n.delay<=l&&o(l-n.delay)}function o(l){var c,f,d,h;if(n.state!==lle)return u();for(c in r)if(h=r[c],h.name===n.name){if(h.state===bD)return ule(o);h.state===cle?(h.state=_D,h.timer.stop(),h.on.call("interrupt",e,e.__data__,h.index,h.group),delete r[c]):+c<t&&(h.state=_D,h.timer.stop(),h.on.call("cancel",e,e.__data__,h.index,h.group),delete r[c])}if(ule(function(){n.state===bD&&(n.state=cle,n.timer.restart(a,n.delay,n.time),a(l))}),n.state=K7,n.on.call("start",e,e.__data__,n.index,n.group),n.state===K7){for(n.state=bD,i=new Array(d=n.tween.length),c=0,f=-1;c<d;++c)(h=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(i[++f]=h);i.length=f+1}}function a(l){for(var c=l<n.duration?n.ease.call(null,l/n.duration):(n.timer.restart(u),n.state=X7,1),f=-1,d=i.length;++f<d;)i[f].call(e,c);n.state===X7&&(n.on.call("end",e,e.__data__,n.index,n.group),u())}function u(){n.state=_D,n.timer.stop(),delete r[t];for(var l in r)return;delete e.__transition}}function Q7(e,t){var n=e.__transition,r,i,s=!0,o;if(n){t=t==null?null:t+"";for(o in n){if((r=n[o]).name!==t){s=!1;continue}i=r.state>K7&&r.state<X7,r.state=_D,r.timer.stop(),r.on.call(i?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[o]}s&&delete e.__transition}}function Lct(e){return this.each(function(){Q7(this,e)})}function Fct(e,t){var n,r;return function(){var i=Jh(this,e),s=i.tween;if(s!==n){r=n=s;for(var o=0,a=r.length;o<a;++o)if(r[o].name===t){r=r.slice(),r.splice(o,1);break}}i.tween=r}}function jct(e,t,n){var r,i;if(typeof n!="function")throw new Error;return function(){var s=Jh(this,e),o=s.tween;if(o!==r){i=(r=o).slice();for(var a={name:t,value:n},u=0,l=i.length;u<l;++u)if(i[u].name===t){i[u]=a;break}u===l&&i.push(a)}s.tween=i}}function Bct(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=ud(this.node(),n).tween,i=0,s=r.length,o;i<s;++i)if((o=r[i]).name===e)return o.value;return null}return this.each((t==null?Fct:jct)(n,e,t))}function SK(e,t,n){var r=e._id;return e.each(function(){var i=Jh(this,r);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return ud(i,r).value[t]}}function WSe(e,t){var n;return(typeof t=="number"?yc:t instanceof G1?VA:(n=G1(t))?(t=n,VA):_K)(e,t)}function Uct(e){return function(){this.removeAttribute(e)}}function zct(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Vct(e,t,n){var r,i=n+"",s;return function(){var o=this.getAttribute(e);return o===i?null:o===r?s:s=t(r=o,n)}}function Hct(e,t,n){var r,i=n+"",s;return function(){var o=this.getAttributeNS(e.space,e.local);return o===i?null:o===r?s:s=t(r=o,n)}}function qct(e,t,n){var r,i,s;return function(){var o,a=n(this),u;return a==null?void this.removeAttribute(e):(o=this.getAttribute(e),u=a+"",o===u?null:o===r&&u===i?s:(i=u,s=t(r=o,a)))}}function Wct(e,t,n){var r,i,s;return function(){var o,a=n(this),u;return a==null?void this.removeAttributeNS(e.space,e.local):(o=this.getAttributeNS(e.space,e.local),u=a+"",o===u?null:o===r&&u===i?s:(i=u,s=t(r=o,a)))}}function Gct(e,t){var n=E6(e),r=n==="transform"?jSe:WSe;return this.attrTween(e,typeof t=="function"?(n.local?Wct:qct)(n,r,SK(this,"attr."+e,t)):t==null?(n.local?zct:Uct)(n):(n.local?Hct:Vct)(n,r,t))}function Yct(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function Kct(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function Xct(e,t){var n,r;function i(){var s=t.apply(this,arguments);return s!==r&&(n=(r=s)&&Kct(e,s)),n}return i._value=t,i}function Qct(e,t){var n,r;function i(){var s=t.apply(this,arguments);return s!==r&&(n=(r=s)&&Yct(e,s)),n}return i._value=t,i}function Jct(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=E6(e);return this.tween(n,(r.local?Xct:Qct)(r,t))}function Zct(e,t){return function(){xK(this,e).delay=+t.apply(this,arguments)}}function eft(e,t){return t=+t,function(){xK(this,e).delay=t}}function tft(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Zct:eft)(t,e)):ud(this.node(),t).delay}function nft(e,t){return function(){Jh(this,e).duration=+t.apply(this,arguments)}}function rft(e,t){return t=+t,function(){Jh(this,e).duration=t}}function ift(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?nft:rft)(t,e)):ud(this.node(),t).duration}function sft(e,t){if(typeof t!="function")throw new Error;return function(){Jh(this,e).ease=t}}function oft(e){var t=this._id;return arguments.length?this.each(sft(t,e)):ud(this.node(),t).ease}function aft(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;Jh(this,e).ease=n}}function uft(e){if(typeof e!="function")throw new Error;return this.each(aft(this._id,e))}function lft(e){typeof e!="function"&&(e=aSe(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,a=r[i]=[],u,l=0;l<o;++l)(u=s[l])&&e.call(u,u.__data__,l,s)&&a.push(u);return new Cm(r,this._parents,this._name,this._id)}function cft(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,s=Math.min(r,i),o=new Array(r),a=0;a<s;++a)for(var u=t[a],l=n[a],c=u.length,f=o[a]=new Array(c),d,h=0;h<c;++h)(d=u[h]||l[h])&&(f[h]=d);for(;a<r;++a)o[a]=t[a];return new Cm(o,this._parents,this._name,this._id)}function fft(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function dft(e,t,n){var r,i,s=fft(t)?xK:Jh;return function(){var o=s(this,e),a=o.on;a!==r&&(i=(r=a).copy()).on(t,n),o.on=i}}function hft(e,t){var n=this._id;return arguments.length<2?ud(this.node(),n).on.on(e):this.each(dft(n,e,t))}function pft(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function mft(){return this.on("end.remove",pft(this._id))}function gft(e){var t=this._name,n=this._id;typeof e!="function"&&(e=hK(e));for(var r=this._groups,i=r.length,s=new Array(i),o=0;o<i;++o)for(var a=r[o],u=a.length,l=s[o]=new Array(u),c,f,d=0;d<u;++d)(c=a[d])&&(f=e.call(c,c.__data__,d,a))&&("__data__"in c&&(f.__data__=c.__data__),l[d]=f,I6(l[d],t,n,d,l,ud(c,n)));return new Cm(s,this._parents,t,n)}function yft(e){var t=this._name,n=this._id;typeof e!="function"&&(e=oSe(e));for(var r=this._groups,i=r.length,s=[],o=[],a=0;a<i;++a)for(var u=r[a],l=u.length,c,f=0;f<l;++f)if(c=u[f]){for(var d=e.call(c,c.__data__,f,u),h,p=ud(c,n),m=0,g=d.length;m<g;++m)(h=d[m])&&I6(h,t,n,m,d,p);s.push(d),o.push(c)}return new Cm(s,o,t,n)}var vft=Sk.prototype.constructor;function bft(){return new vft(this._groups,this._parents)}function _ft(e,t){var n,r,i;return function(){var s=VE(this,e),o=(this.style.removeProperty(e),VE(this,e));return s===o?null:s===n&&o===r?i:i=t(n=s,r=o)}}function GSe(e){return function(){this.style.removeProperty(e)}}function wft(e,t,n){var r,i=n+"",s;return function(){var o=VE(this,e);return o===i?null:o===r?s:s=t(r=o,n)}}function Eft(e,t,n){var r,i,s;return function(){var o=VE(this,e),a=n(this),u=a+"";return a==null&&(u=a=(this.style.removeProperty(e),VE(this,e))),o===u?null:o===r&&u===i?s:(i=u,s=t(r=o,a))}}function xft(e,t){var n,r,i,s="style."+t,o="end."+s,a;return function(){var u=Jh(this,e),l=u.on,c=u.value[s]==null?a||(a=GSe(t)):void 0;(l!==n||i!==c)&&(r=(n=l).copy()).on(o,i=c),u.on=r}}function Sft(e,t,n){var r=(e+="")=="transform"?FSe:WSe;return t==null?this.styleTween(e,_ft(e,r)).on("end.style."+e,GSe(e)):typeof t=="function"?this.styleTween(e,Eft(e,r,SK(this,"style."+e,t))).each(xft(this._id,e)):this.styleTween(e,wft(e,r,t),n).on("end.style."+e,null)}function Tft(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function Cft(e,t,n){var r,i;function s(){var o=t.apply(this,arguments);return o!==i&&(r=(i=o)&&Tft(e,o,n)),r}return s._value=t,s}function Aft(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,Cft(e,t,n??""))}function Ift(e){return function(){this.textContent=e}}function kft(e){return function(){var t=e(this);this.textContent=t??""}}function Rft(e){return this.tween("text",typeof e=="function"?kft(SK(this,"text",e)):Ift(e==null?"":e+""))}function Nft(e){return function(t){this.textContent=e.call(this,t)}}function Pft(e){var t,n;function r(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&Nft(i)),t}return r._value=e,r}function Dft(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,Pft(e))}function Oft(){for(var e=this._name,t=this._id,n=YSe(),r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],a=o.length,u,l=0;l<a;++l)if(u=o[l]){var c=ud(u,t);I6(u,e,n,l,o,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new Cm(r,this._parents,e,n)}function $ft(){var e,t,n=this,r=n._id,i=n.size();return new Promise(function(s,o){var a={value:o},u={value:function(){--i===0&&s()}};n.each(function(){var l=Jh(this,r),c=l.on;c!==e&&(t=(e=c).copy(),t._.cancel.push(a),t._.interrupt.push(a),t._.end.push(u)),l.on=t}),i===0&&s()})}var Mft=0;function Cm(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function YSe(){return++Mft}var _p=Sk.prototype;Cm.prototype={constructor:Cm,select:gft,selectAll:yft,selectChild:_p.selectChild,selectChildren:_p.selectChildren,filter:lft,merge:cft,selection:bft,transition:Oft,call:_p.call,nodes:_p.nodes,node:_p.node,size:_p.size,empty:_p.empty,each:_p.each,on:hft,attr:Gct,attrTween:Jct,style:Sft,styleTween:Aft,text:Rft,textTween:Dft,remove:mft,tween:Bct,delay:tft,duration:ift,ease:oft,easeVarying:uft,end:$ft,[Symbol.iterator]:_p[Symbol.iterator]};const Lft=e=>+e;function Fft(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var jft={time:null,delay:0,duration:250,ease:Fft};function Bft(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function Uft(e){var t,n;e instanceof Cm?(t=e._id,e=e._name):(t=YSe(),(n=jft).time=A6(),e=e==null?null:e+"");for(var r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],a=o.length,u,l=0;l<a;++l)(u=o[l])&&I6(u,e,t,l,o,n||Bft(u,t));return new Cm(r,this._parents,e,t)}Sk.prototype.interrupt=Lct;Sk.prototype.transition=Uft;const b8=e=>()=>e;function zft(e,{sourceEvent:t,target:n,selection:r,mode:i,dispatch:s}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},selection:{value:r,enumerable:!0,configurable:!0},mode:{value:i,enumerable:!0,configurable:!0},_:{value:s}})}function Vft(e){e.stopImmediatePropagation()}function _8(e){e.preventDefault(),e.stopImmediatePropagation()}var fle={name:"drag"},w8={name:"space"},P_={name:"handle"},D_={name:"center"};const{abs:dle,max:Xo,min:Qo}=Math;function hle(e){return[+e[0],+e[1]]}function J7(e){return[hle(e[0]),hle(e[1])]}var wD={name:"x",handles:["w","e"].map(WA),input:function(e,t){return e==null?null:[[+e[0],t[0][1]],[+e[1],t[1][1]]]},output:function(e){return e&&[e[0][0],e[1][0]]}},ED={name:"y",handles:["n","s"].map(WA),input:function(e,t){return e==null?null:[[t[0][0],+e[0]],[t[1][0],+e[1]]]},output:function(e){return e&&[e[0][1],e[1][1]]}},Hft={name:"xy",handles:["n","w","e","s","nw","ne","sw","se"].map(WA),input:function(e){return e==null?null:J7(e)},output:function(e){return e}},wp={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},ple={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},mle={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},qft={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},Wft={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function WA(e){return{type:e}}function Gft(e){return!e.ctrlKey&&!e.button}function Yft(){var e=this.ownerSVGElement||this;return e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]}function Kft(){return navigator.maxTouchPoints||"ontouchstart"in this}function E8(e){for(;!e.__brush;)if(!(e=e.parentNode))return;return e.__brush}function Xft(e){return e[0][0]===e[1][0]||e[0][1]===e[1][1]}function Qft(){return TK(wD)}function Jft(){return TK(ED)}function Zft(){return TK(Hft)}function TK(e){var t=Yft,n=Gft,r=Kft,i=!0,s=w6("start","brush","end"),o=6,a;function u(g){var y=g.property("__brush",m).selectAll(".overlay").data([WA("overlay")]);y.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",wp.overlay).merge(y).each(function(){var _=E8(this).extent;rs(this).attr("x",_[0][0]).attr("y",_[0][1]).attr("width",_[1][0]-_[0][0]).attr("height",_[1][1]-_[0][1])}),g.selectAll(".selection").data([WA("selection")]).enter().append("rect").attr("class","selection").attr("cursor",wp.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var v=g.selectAll(".handle").data(e.handles,function(_){return _.type});v.exit().remove(),v.enter().append("rect").attr("class",function(_){return"handle handle--"+_.type}).attr("cursor",function(_){return wp[_.type]}),g.each(l).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",d).filter(r).on("touchstart.brush",d).on("touchmove.brush",h).on("touchend.brush touchcancel.brush",p).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}u.move=function(g,y,v){g.tween?g.on("start.brush",function(_){c(this,arguments).beforestart().start(_)}).on("interrupt.brush end.brush",function(_){c(this,arguments).end(_)}).tween("brush",function(){var _=this,w=_.__brush,E=c(_,arguments),S=w.selection,T=e.input(typeof y=="function"?y.apply(this,arguments):y,w.extent),C=eg(S,T);function A(k){w.selection=k===1&&T===null?null:C(k),l.call(_),E.brush()}return S!==null&&T!==null?A:A(1)}):g.each(function(){var _=this,w=arguments,E=_.__brush,S=e.input(typeof y=="function"?y.apply(_,w):y,E.extent),T=c(_,w).beforestart();Q7(_),E.selection=S===null?null:S,l.call(_),T.start(v).brush(v).end(v)})},u.clear=function(g,y){u.move(g,null,y)};function l(){var g=rs(this),y=E8(this).selection;y?(g.selectAll(".selection").style("display",null).attr("x",y[0][0]).attr("y",y[0][1]).attr("width",y[1][0]-y[0][0]).attr("height",y[1][1]-y[0][1]),g.selectAll(".handle").style("display",null).attr("x",function(v){return v.type[v.type.length-1]==="e"?y[1][0]-o/2:y[0][0]-o/2}).attr("y",function(v){return v.type[0]==="s"?y[1][1]-o/2:y[0][1]-o/2}).attr("width",function(v){return v.type==="n"||v.type==="s"?y[1][0]-y[0][0]+o:o}).attr("height",function(v){return v.type==="e"||v.type==="w"?y[1][1]-y[0][1]+o:o})):g.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function c(g,y,v){var _=g.__brush.emitter;return _&&(!v||!_.clean)?_:new f(g,y,v)}function f(g,y,v){this.that=g,this.args=y,this.state=g.__brush,this.active=0,this.clean=v}f.prototype={beforestart:function(){return++this.active===1&&(this.state.emitter=this,this.starting=!0),this},start:function(g,y){return this.starting?(this.starting=!1,this.emit("start",g,y)):this.emit("brush",g),this},brush:function(g,y){return this.emit("brush",g,y),this},end:function(g,y){return--this.active===0&&(delete this.state.emitter,this.emit("end",g,y)),this},emit:function(g,y,v){var _=rs(this.that).datum();s.call(g,this.that,new zft(g,{sourceEvent:y,target:u,selection:e.output(this.state.selection),mode:v,dispatch:s}),_)}};function d(g){if(a&&!g.touches||!n.apply(this,arguments))return;var y=this,v=g.target.__data__.type,_=(i&&g.metaKey?v="overlay":v)==="selection"?fle:i&&g.altKey?D_:P_,w=e===ED?null:qft[v],E=e===wD?null:Wft[v],S=E8(y),T=S.extent,C=S.selection,A=T[0][0],k,N,O=T[0][1],D,$,F=T[1][0],M,B,U=T[1][1],H,P,z=0,W=0,j,q=w&&E&&i&&g.shiftKey,G,ne,ce=Array.from(g.touches||[g],_e=>{const ke=_e.identifier;return _e=z7(_e,y),_e.point0=_e.slice(),_e.identifier=ke,_e});Q7(y);var de=c(y,arguments,!0).beforestart();if(v==="overlay"){C&&(j=!0);const _e=[ce[0],ce[1]||ce[0]];S.selection=C=[[k=e===ED?A:Qo(_e[0][0],_e[1][0]),D=e===wD?O:Qo(_e[0][1],_e[1][1])],[M=e===ED?F:Xo(_e[0][0],_e[1][0]),H=e===wD?U:Xo(_e[0][1],_e[1][1])]],ce.length>1&&Ke(g)}else k=C[0][0],D=C[0][1],M=C[1][0],H=C[1][1];N=k,$=D,B=M,P=H;var he=rs(y).attr("pointer-events","none"),ve=he.selectAll(".overlay").attr("cursor",wp[v]);if(g.touches)de.moved=be,de.ended=Ue;else{var Ie=rs(g.view).on("mousemove.brush",be,!0).on("mouseup.brush",Ue,!0);i&&Ie.on("keydown.brush",yt,!0).on("keyup.brush",it,!0),Hlt(g.view)}l.call(y),de.start(g,_.name);function be(_e){for(const ke of _e.changedTouches||[_e])for(const ze of ce)ze.identifier===ke.identifier&&(ze.cur=z7(ke,y));if(q&&!G&&!ne&&ce.length===1){const ke=ce[0];dle(ke.cur[0]-ke[0])>dle(ke.cur[1]-ke[1])?ne=!0:G=!0}for(const ke of ce)ke.cur&&(ke[0]=ke.cur[0],ke[1]=ke.cur[1]);j=!0,_8(_e),Ke(_e)}function Ke(_e){const ke=ce[0],ze=ke.point0;var ct;switch(z=ke[0]-ze[0],W=ke[1]-ze[1],_){case w8:case fle:{w&&(z=Xo(A-k,Qo(F-M,z)),N=k+z,B=M+z),E&&(W=Xo(O-D,Qo(U-H,W)),$=D+W,P=H+W);break}case P_:{ce[1]?(w&&(N=Xo(A,Qo(F,ce[0][0])),B=Xo(A,Qo(F,ce[1][0])),w=1),E&&($=Xo(O,Qo(U,ce[0][1])),P=Xo(O,Qo(U,ce[1][1])),E=1)):(w<0?(z=Xo(A-k,Qo(F-k,z)),N=k+z,B=M):w>0&&(z=Xo(A-M,Qo(F-M,z)),N=k,B=M+z),E<0?(W=Xo(O-D,Qo(U-D,W)),$=D+W,P=H):E>0&&(W=Xo(O-H,Qo(U-H,W)),$=D,P=H+W));break}case D_:{w&&(N=Xo(A,Qo(F,k-z*w)),B=Xo(A,Qo(F,M+z*w))),E&&($=Xo(O,Qo(U,D-W*E)),P=Xo(O,Qo(U,H+W*E)));break}}B<N&&(w*=-1,ct=k,k=M,M=ct,ct=N,N=B,B=ct,v in ple&&ve.attr("cursor",wp[v=ple[v]])),P<$&&(E*=-1,ct=D,D=H,H=ct,ct=$,$=P,P=ct,v in mle&&ve.attr("cursor",wp[v=mle[v]])),S.selection&&(C=S.selection),G&&(N=C[0][0],B=C[1][0]),ne&&($=C[0][1],P=C[1][1]),(C[0][0]!==N||C[0][1]!==$||C[1][0]!==B||C[1][1]!==P)&&(S.selection=[[N,$],[B,P]],l.call(y),de.brush(_e,_.name))}function Ue(_e){if(Vft(_e),_e.touches){if(_e.touches.length)return;a&&clearTimeout(a),a=setTimeout(function(){a=null},500)}else qlt(_e.view,j),Ie.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);he.attr("pointer-events","all"),ve.attr("cursor",wp.overlay),S.selection&&(C=S.selection),Xft(C)&&(S.selection=null,l.call(y)),de.end(_e,_.name)}function yt(_e){switch(_e.keyCode){case 16:{q=w&&E;break}case 18:{_===P_&&(w&&(M=B-z*w,k=N+z*w),E&&(H=P-W*E,D=$+W*E),_=D_,Ke(_e));break}case 32:{(_===P_||_===D_)&&(w<0?M=B-z:w>0&&(k=N-z),E<0?H=P-W:E>0&&(D=$-W),_=w8,ve.attr("cursor",wp.selection),Ke(_e));break}default:return}_8(_e)}function it(_e){switch(_e.keyCode){case 16:{q&&(G=ne=q=!1,Ke(_e));break}case 18:{_===D_&&(w<0?M=B:w>0&&(k=N),E<0?H=P:E>0&&(D=$),_=P_,Ke(_e));break}case 32:{_===w8&&(_e.altKey?(w&&(M=B-z*w,k=N+z*w),E&&(H=P-W*E,D=$+W*E),_=D_):(w<0?M=B:w>0&&(k=N),E<0?H=P:E>0&&(D=$),_=P_),ve.attr("cursor",wp[v]),Ke(_e));break}default:return}_8(_e)}}function h(g){c(this,arguments).moved(g)}function p(g){c(this,arguments).ended(g)}function m(){var g=this.__brush||{selection:null};return g.extent=J7(t.apply(this,arguments)),g.dim=e,g}return u.extent=function(g){return arguments.length?(t=typeof g=="function"?g:b8(J7(g)),u):t},u.filter=function(g){return arguments.length?(n=typeof g=="function"?g:b8(!!g),u):n},u.touchable=function(g){return arguments.length?(r=typeof g=="function"?g:b8(!!g),u):r},u.handleSize=function(g){return arguments.length?(o=+g,u):o},u.keyModifiers=function(g){return arguments.length?(i=!!g,u):i},u.on=function(){var g=s.on.apply(s,arguments);return g===s?u:g},u}const Z7=Math.PI,ez=2*Z7,kv=1e-6,edt=ez-kv;function KSe(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function tdt(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return KSe;const n=10**t;return function(r){this._+=r[0];for(let i=1,s=r.length;i<s;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}let CK=class{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?KSe:tdt(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,r,i){this._append`Q${+t},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(t,n,r,i,s,o){this._append`C${+t},${+n},${+r},${+i},${this._x1=+s},${this._y1=+o}`}arcTo(t,n,r,i,s){if(t=+t,n=+n,r=+r,i=+i,s=+s,s<0)throw new Error(`negative radius: ${s}`);let o=this._x1,a=this._y1,u=r-t,l=i-n,c=o-t,f=a-n,d=c*c+f*f;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(d>kv)if(!(Math.abs(f*u-l*c)>kv)||!s)this._append`L${this._x1=t},${this._y1=n}`;else{let h=r-o,p=i-a,m=u*u+l*l,g=h*h+p*p,y=Math.sqrt(m),v=Math.sqrt(d),_=s*Math.tan((Z7-Math.acos((m+d-g)/(2*y*v)))/2),w=_/v,E=_/y;Math.abs(w-1)>kv&&this._append`L${t+w*c},${n+w*f}`,this._append`A${s},${s},0,0,${+(f*h>c*p)},${this._x1=t+E*u},${this._y1=n+E*l}`}}arc(t,n,r,i,s,o){if(t=+t,n=+n,r=+r,o=!!o,r<0)throw new Error(`negative radius: ${r}`);let a=r*Math.cos(i),u=r*Math.sin(i),l=t+a,c=n+u,f=1^o,d=o?i-s:s-i;this._x1===null?this._append`M${l},${c}`:(Math.abs(this._x1-l)>kv||Math.abs(this._y1-c)>kv)&&this._append`L${l},${c}`,r&&(d<0&&(d=d%ez+ez),d>edt?this._append`A${r},${r},0,1,${f},${t-a},${n-u}A${r},${r},0,1,${f},${this._x1=l},${this._y1=c}`:d>kv&&this._append`A${r},${r},0,${+(d>=Z7)},${f},${this._x1=t+r*Math.cos(s)},${this._y1=n+r*Math.sin(s)}`)}rect(t,n,r,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}};function k6(){return new CK}k6.prototype=CK.prototype;const om=11102230246251565e-32,Jo=134217729,ndt=(3+8*om)*om;function x8(e,t,n,r,i){let s,o,a,u,l=t[0],c=r[0],f=0,d=0;c>l==c>-l?(s=l,l=t[++f]):(s=c,c=r[++d]);let h=0;if(f<e&&d<n)for(c>l==c>-l?(o=l+s,a=s-(o-l),l=t[++f]):(o=c+s,a=s-(o-c),c=r[++d]),s=o,a!==0&&(i[h++]=a);f<e&&d<n;)c>l==c>-l?(o=s+l,u=o-s,a=s-(o-u)+(l-u),l=t[++f]):(o=s+c,u=o-s,a=s-(o-u)+(c-u),c=r[++d]),s=o,a!==0&&(i[h++]=a);for(;f<e;)o=s+l,u=o-s,a=s-(o-u)+(l-u),l=t[++f],s=o,a!==0&&(i[h++]=a);for(;d<n;)o=s+c,u=o-s,a=s-(o-u)+(c-u),c=r[++d],s=o,a!==0&&(i[h++]=a);return(s!==0||h===0)&&(i[h++]=s),h}function rdt(e,t){let n=t[0];for(let r=1;r<e;r++)n+=t[r];return n}function Ak(e){return new Float64Array(e)}const idt=(3+16*om)*om,sdt=(2+12*om)*om,odt=(9+64*om)*om*om,O_=Ak(4),gle=Ak(8),yle=Ak(12),vle=Ak(16),Pa=Ak(4);function adt(e,t,n,r,i,s,o){let a,u,l,c,f,d,h,p,m,g,y,v,_,w,E,S,T,C;const A=e-i,k=n-i,N=t-s,O=r-s;w=A*O,d=Jo*A,h=d-(d-A),p=A-h,d=Jo*O,m=d-(d-O),g=O-m,E=p*g-(w-h*m-p*m-h*g),S=N*k,d=Jo*N,h=d-(d-N),p=N-h,d=Jo*k,m=d-(d-k),g=k-m,T=p*g-(S-h*m-p*m-h*g),y=E-T,f=E-y,O_[0]=E-(y+f)+(f-T),v=w+y,f=v-w,_=w-(v-f)+(y-f),y=_-S,f=_-y,O_[1]=_-(y+f)+(f-S),C=v+y,f=C-v,O_[2]=v-(C-f)+(y-f),O_[3]=C;let D=rdt(4,O_),$=sdt*o;if(D>=$||-D>=$||(f=e-A,a=e-(A+f)+(f-i),f=n-k,l=n-(k+f)+(f-i),f=t-N,u=t-(N+f)+(f-s),f=r-O,c=r-(O+f)+(f-s),a===0&&u===0&&l===0&&c===0)||($=odt*o+ndt*Math.abs(D),D+=A*c+O*a-(N*l+k*u),D>=$||-D>=$))return D;w=a*O,d=Jo*a,h=d-(d-a),p=a-h,d=Jo*O,m=d-(d-O),g=O-m,E=p*g-(w-h*m-p*m-h*g),S=u*k,d=Jo*u,h=d-(d-u),p=u-h,d=Jo*k,m=d-(d-k),g=k-m,T=p*g-(S-h*m-p*m-h*g),y=E-T,f=E-y,Pa[0]=E-(y+f)+(f-T),v=w+y,f=v-w,_=w-(v-f)+(y-f),y=_-S,f=_-y,Pa[1]=_-(y+f)+(f-S),C=v+y,f=C-v,Pa[2]=v-(C-f)+(y-f),Pa[3]=C;const F=x8(4,O_,4,Pa,gle);w=A*c,d=Jo*A,h=d-(d-A),p=A-h,d=Jo*c,m=d-(d-c),g=c-m,E=p*g-(w-h*m-p*m-h*g),S=N*l,d=Jo*N,h=d-(d-N),p=N-h,d=Jo*l,m=d-(d-l),g=l-m,T=p*g-(S-h*m-p*m-h*g),y=E-T,f=E-y,Pa[0]=E-(y+f)+(f-T),v=w+y,f=v-w,_=w-(v-f)+(y-f),y=_-S,f=_-y,Pa[1]=_-(y+f)+(f-S),C=v+y,f=C-v,Pa[2]=v-(C-f)+(y-f),Pa[3]=C;const M=x8(F,gle,4,Pa,yle);w=a*c,d=Jo*a,h=d-(d-a),p=a-h,d=Jo*c,m=d-(d-c),g=c-m,E=p*g-(w-h*m-p*m-h*g),S=u*l,d=Jo*u,h=d-(d-u),p=u-h,d=Jo*l,m=d-(d-l),g=l-m,T=p*g-(S-h*m-p*m-h*g),y=E-T,f=E-y,Pa[0]=E-(y+f)+(f-T),v=w+y,f=v-w,_=w-(v-f)+(y-f),y=_-S,f=_-y,Pa[1]=_-(y+f)+(f-S),C=v+y,f=C-v,Pa[2]=v-(C-f)+(y-f),Pa[3]=C;const B=x8(M,yle,4,Pa,vle);return vle[B-1]}function zN(e,t,n,r,i,s){const o=(t-s)*(n-i),a=(e-i)*(r-s),u=o-a,l=Math.abs(o+a);return Math.abs(u)>=idt*l?u:-adt(e,t,n,r,i,s,l)}const ble=Math.pow(2,-52),VN=new Uint32Array(512);class E3{static from(t,n=ddt,r=hdt){const i=t.length,s=new Float64Array(i*2);for(let o=0;o<i;o++){const a=t[o];s[2*o]=n(a),s[2*o+1]=r(a)}return new E3(s)}constructor(t){const n=t.length>>1;if(n>0&&typeof t[0]!="number")throw new Error("Expected coords to contain numbers.");this.coords=t;const r=Math.max(2*n-5,0);this._triangles=new Uint32Array(r*3),this._halfedges=new Int32Array(r*3),this._hashSize=Math.ceil(Math.sqrt(n)),this._hullPrev=new Uint32Array(n),this._hullNext=new Uint32Array(n),this._hullTri=new Uint32Array(n),this._hullHash=new Int32Array(this._hashSize),this._ids=new Uint32Array(n),this._dists=new Float64Array(n),this.update()}update(){const{coords:t,_hullPrev:n,_hullNext:r,_hullTri:i,_hullHash:s}=this,o=t.length>>1;let a=1/0,u=1/0,l=-1/0,c=-1/0;for(let A=0;A<o;A++){const k=t[2*A],N=t[2*A+1];k<a&&(a=k),N<u&&(u=N),k>l&&(l=k),N>c&&(c=N),this._ids[A]=A}const f=(a+l)/2,d=(u+c)/2;let h,p,m;for(let A=0,k=1/0;A<o;A++){const N=S8(f,d,t[2*A],t[2*A+1]);N<k&&(h=A,k=N)}const g=t[2*h],y=t[2*h+1];for(let A=0,k=1/0;A<o;A++){if(A===h)continue;const N=S8(g,y,t[2*A],t[2*A+1]);N<k&&N>0&&(p=A,k=N)}let v=t[2*p],_=t[2*p+1],w=1/0;for(let A=0;A<o;A++){if(A===h||A===p)continue;const k=cdt(g,y,v,_,t[2*A],t[2*A+1]);k<w&&(m=A,w=k)}let E=t[2*m],S=t[2*m+1];if(w===1/0){for(let N=0;N<o;N++)this._dists[N]=t[2*N]-t[0]||t[2*N+1]-t[1];Iw(this._ids,this._dists,0,o-1);const A=new Uint32Array(o);let k=0;for(let N=0,O=-1/0;N<o;N++){const D=this._ids[N],$=this._dists[D];$>O&&(A[k++]=D,O=$)}this.hull=A.subarray(0,k),this.triangles=new Uint32Array(0),this.halfedges=new Uint32Array(0);return}if(zN(g,y,v,_,E,S)<0){const A=p,k=v,N=_;p=m,v=E,_=S,m=A,E=k,S=N}const T=fdt(g,y,v,_,E,S);this._cx=T.x,this._cy=T.y;for(let A=0;A<o;A++)this._dists[A]=S8(t[2*A],t[2*A+1],T.x,T.y);Iw(this._ids,this._dists,0,o-1),this._hullStart=h;let C=3;r[h]=n[m]=p,r[p]=n[h]=m,r[m]=n[p]=h,i[h]=0,i[p]=1,i[m]=2,s.fill(-1),s[this._hashKey(g,y)]=h,s[this._hashKey(v,_)]=p,s[this._hashKey(E,S)]=m,this.trianglesLen=0,this._addTriangle(h,p,m,-1,-1,-1);for(let A=0,k,N;A<this._ids.length;A++){const O=this._ids[A],D=t[2*O],$=t[2*O+1];if(A>0&&Math.abs(D-k)<=ble&&Math.abs($-N)<=ble||(k=D,N=$,O===h||O===p||O===m))continue;let F=0;for(let P=0,z=this._hashKey(D,$);P<this._hashSize&&(F=s[(z+P)%this._hashSize],!(F!==-1&&F!==r[F]));P++);F=n[F];let M=F,B;for(;B=r[M],zN(D,$,t[2*M],t[2*M+1],t[2*B],t[2*B+1])>=0;)if(M=B,M===F){M=-1;break}if(M===-1)continue;let U=this._addTriangle(M,O,r[M],-1,-1,i[M]);i[O]=this._legalize(U+2),i[M]=U,C++;let H=r[M];for(;B=r[H],zN(D,$,t[2*H],t[2*H+1],t[2*B],t[2*B+1])<0;)U=this._addTriangle(H,O,B,i[O],-1,i[H]),i[O]=this._legalize(U+2),r[H]=H,C--,H=B;if(M===F)for(;B=n[M],zN(D,$,t[2*B],t[2*B+1],t[2*M],t[2*M+1])<0;)U=this._addTriangle(B,O,M,-1,i[M],i[B]),this._legalize(U+2),i[B]=U,r[M]=M,C--,M=B;this._hullStart=n[O]=M,r[M]=n[H]=O,r[O]=H,s[this._hashKey(D,$)]=O,s[this._hashKey(t[2*M],t[2*M+1])]=M}this.hull=new Uint32Array(C);for(let A=0,k=this._hullStart;A<C;A++)this.hull[A]=k,k=r[k];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(t,n){return Math.floor(udt(t-this._cx,n-this._cy)*this._hashSize)%this._hashSize}_legalize(t){const{_triangles:n,_halfedges:r,coords:i}=this;let s=0,o=0;for(;;){const a=r[t],u=t-t%3;if(o=u+(t+2)%3,a===-1){if(s===0)break;t=VN[--s];continue}const l=a-a%3,c=u+(t+1)%3,f=l+(a+2)%3,d=n[o],h=n[t],p=n[c],m=n[f];if(ldt(i[2*d],i[2*d+1],i[2*h],i[2*h+1],i[2*p],i[2*p+1],i[2*m],i[2*m+1])){n[t]=m,n[a]=d;const y=r[f];if(y===-1){let _=this._hullStart;do{if(this._hullTri[_]===f){this._hullTri[_]=t;break}_=this._hullPrev[_]}while(_!==this._hullStart)}this._link(t,y),this._link(a,r[o]),this._link(o,f);const v=l+(a+1)%3;s<VN.length&&(VN[s++]=v)}else{if(s===0)break;t=VN[--s]}}return o}_link(t,n){this._halfedges[t]=n,n!==-1&&(this._halfedges[n]=t)}_addTriangle(t,n,r,i,s,o){const a=this.trianglesLen;return this._triangles[a]=t,this._triangles[a+1]=n,this._triangles[a+2]=r,this._link(a,i),this._link(a+1,s),this._link(a+2,o),this.trianglesLen+=3,a}}function udt(e,t){const n=e/(Math.abs(e)+Math.abs(t));return(t>0?3-n:1+n)/4}function S8(e,t,n,r){const i=e-n,s=t-r;return i*i+s*s}function ldt(e,t,n,r,i,s,o,a){const u=e-o,l=t-a,c=n-o,f=r-a,d=i-o,h=s-a,p=u*u+l*l,m=c*c+f*f,g=d*d+h*h;return u*(f*g-m*h)-l*(c*g-m*d)+p*(c*h-f*d)<0}function cdt(e,t,n,r,i,s){const o=n-e,a=r-t,u=i-e,l=s-t,c=o*o+a*a,f=u*u+l*l,d=.5/(o*l-a*u),h=(l*c-a*f)*d,p=(o*f-u*c)*d;return h*h+p*p}function fdt(e,t,n,r,i,s){const o=n-e,a=r-t,u=i-e,l=s-t,c=o*o+a*a,f=u*u+l*l,d=.5/(o*l-a*u),h=e+(l*c-a*f)*d,p=t+(o*f-u*c)*d;return{x:h,y:p}}function Iw(e,t,n,r){if(r-n<=20)for(let i=n+1;i<=r;i++){const s=e[i],o=t[s];let a=i-1;for(;a>=n&&t[e[a]]>o;)e[a+1]=e[a--];e[a+1]=s}else{const i=n+r>>1;let s=n+1,o=r;NT(e,i,s),t[e[n]]>t[e[r]]&&NT(e,n,r),t[e[s]]>t[e[r]]&&NT(e,s,r),t[e[n]]>t[e[s]]&&NT(e,n,s);const a=e[s],u=t[a];for(;;){do s++;while(t[e[s]]<u);do o--;while(t[e[o]]>u);if(o<s)break;NT(e,s,o)}e[n+1]=e[o],e[o]=a,r-s+1>=o-n?(Iw(e,t,s,r),Iw(e,t,n,o-1)):(Iw(e,t,n,o-1),Iw(e,t,s,r))}}function NT(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function ddt(e){return e[0]}function hdt(e){return e[1]}const _le=1e-6;class u1{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(t,n){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(t,n){this._+=`L${this._x1=+t},${this._y1=+n}`}arc(t,n,r){t=+t,n=+n,r=+r;const i=t+r,s=n;if(r<0)throw new Error("negative radius");this._x1===null?this._+=`M${i},${s}`:(Math.abs(this._x1-i)>_le||Math.abs(this._y1-s)>_le)&&(this._+="L"+i+","+s),r&&(this._+=`A${r},${r},0,1,1,${t-r},${n}A${r},${r},0,1,1,${this._x1=i},${this._y1=s}`)}rect(t,n,r,i){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${+r}v${+i}h${-r}Z`}value(){return this._||null}}class tz{constructor(){this._=[]}moveTo(t,n){this._.push([t,n])}closePath(){this._.push(this._[0].slice())}lineTo(t,n){this._.push([t,n])}value(){return this._.length?this._:null}}let pdt=class{constructor(t,[n,r,i,s]=[0,0,960,500]){if(!((i=+i)>=(n=+n))||!((s=+s)>=(r=+r)))throw new Error("invalid bounds");this.delaunay=t,this._circumcenters=new Float64Array(t.points.length*2),this.vectors=new Float64Array(t.points.length*2),this.xmax=i,this.xmin=n,this.ymax=s,this.ymin=r,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points:t,hull:n,triangles:r},vectors:i}=this;let s,o;const a=this.circumcenters=this._circumcenters.subarray(0,r.length/3*2);for(let m=0,g=0,y=r.length,v,_;m<y;m+=3,g+=2){const w=r[m]*2,E=r[m+1]*2,S=r[m+2]*2,T=t[w],C=t[w+1],A=t[E],k=t[E+1],N=t[S],O=t[S+1],D=A-T,$=k-C,F=N-T,M=O-C,B=(D*M-$*F)*2;if(Math.abs(B)<1e-9){if(s===void 0){s=o=0;for(const H of n)s+=t[H*2],o+=t[H*2+1];s/=n.length,o/=n.length}const U=1e9*Math.sign((s-T)*M-(o-C)*F);v=(T+N)/2-U*M,_=(C+O)/2+U*F}else{const U=1/B,H=D*D+$*$,P=F*F+M*M;v=T+(M*H-$*P)*U,_=C+(D*P-F*H)*U}a[g]=v,a[g+1]=_}let u=n[n.length-1],l,c=u*4,f,d=t[2*u],h,p=t[2*u+1];i.fill(0);for(let m=0;m<n.length;++m)u=n[m],l=c,f=d,h=p,c=u*4,d=t[2*u],p=t[2*u+1],i[l+2]=i[c]=h-p,i[l+3]=i[c+1]=d-f}render(t){const n=t==null?t=new u1:void 0,{delaunay:{halfedges:r,inedges:i,hull:s},circumcenters:o,vectors:a}=this;if(s.length<=1)return null;for(let c=0,f=r.length;c<f;++c){const d=r[c];if(d<c)continue;const h=Math.floor(c/3)*2,p=Math.floor(d/3)*2,m=o[h],g=o[h+1],y=o[p],v=o[p+1];this._renderSegment(m,g,y,v,t)}let u,l=s[s.length-1];for(let c=0;c<s.length;++c){u=l,l=s[c];const f=Math.floor(i[l]/3)*2,d=o[f],h=o[f+1],p=u*4,m=this._project(d,h,a[p+2],a[p+3]);m&&this._renderSegment(d,h,m[0],m[1],t)}return n&&n.value()}renderBounds(t){const n=t==null?t=new u1:void 0;return t.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),n&&n.value()}renderCell(t,n){const r=n==null?n=new u1:void 0,i=this._clip(t);if(i===null||!i.length)return;n.moveTo(i[0],i[1]);let s=i.length;for(;i[0]===i[s-2]&&i[1]===i[s-1]&&s>1;)s-=2;for(let o=2;o<s;o+=2)(i[o]!==i[o-2]||i[o+1]!==i[o-1])&&n.lineTo(i[o],i[o+1]);return n.closePath(),r&&r.value()}*cellPolygons(){const{delaunay:{points:t}}=this;for(let n=0,r=t.length/2;n<r;++n){const i=this.cellPolygon(n);i&&(i.index=n,yield i)}}cellPolygon(t){const n=new tz;return this.renderCell(t,n),n.value()}_renderSegment(t,n,r,i,s){let o;const a=this._regioncode(t,n),u=this._regioncode(r,i);a===0&&u===0?(s.moveTo(t,n),s.lineTo(r,i)):(o=this._clipSegment(t,n,r,i,a,u))&&(s.moveTo(o[0],o[1]),s.lineTo(o[2],o[3]))}contains(t,n,r){return n=+n,n!==n||(r=+r,r!==r)?!1:this.delaunay._step(t,n,r)===t}*neighbors(t){const n=this._clip(t);if(n)for(const r of this.delaunay.neighbors(t)){const i=this._clip(r);if(i){e:for(let s=0,o=n.length;s<o;s+=2)for(let a=0,u=i.length;a<u;a+=2)if(n[s]===i[a]&&n[s+1]===i[a+1]&&n[(s+2)%o]===i[(a+u-2)%u]&&n[(s+3)%o]===i[(a+u-1)%u]){yield r;break e}}}}_cell(t){const{circumcenters:n,delaunay:{inedges:r,halfedges:i,triangles:s}}=this,o=r[t];if(o===-1)return null;const a=[];let u=o;do{const l=Math.floor(u/3);if(a.push(n[l*2],n[l*2+1]),u=u%3===2?u-2:u+1,s[u]!==t)break;u=i[u]}while(u!==o&&u!==-1);return a}_clip(t){if(t===0&&this.delaunay.hull.length===1)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const n=this._cell(t);if(n===null)return null;const{vectors:r}=this,i=t*4;return this._simplify(r[i]||r[i+1]?this._clipInfinite(t,n,r[i],r[i+1],r[i+2],r[i+3]):this._clipFinite(t,n))}_clipFinite(t,n){const r=n.length;let i=null,s,o,a=n[r-2],u=n[r-1],l,c=this._regioncode(a,u),f,d=0;for(let h=0;h<r;h+=2)if(s=a,o=u,a=n[h],u=n[h+1],l=c,c=this._regioncode(a,u),l===0&&c===0)f=d,d=0,i?i.push(a,u):i=[a,u];else{let p,m,g,y,v;if(l===0){if((p=this._clipSegment(s,o,a,u,l,c))===null)continue;[m,g,y,v]=p}else{if((p=this._clipSegment(a,u,s,o,c,l))===null)continue;[y,v,m,g]=p,f=d,d=this._edgecode(m,g),f&&d&&this._edge(t,f,d,i,i.length),i?i.push(m,g):i=[m,g]}f=d,d=this._edgecode(y,v),f&&d&&this._edge(t,f,d,i,i.length),i?i.push(y,v):i=[y,v]}if(i)f=d,d=this._edgecode(i[0],i[1]),f&&d&&this._edge(t,f,d,i,i.length);else if(this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return i}_clipSegment(t,n,r,i,s,o){const a=s<o;for(a&&([t,n,r,i,s,o]=[r,i,t,n,o,s]);;){if(s===0&&o===0)return a?[r,i,t,n]:[t,n,r,i];if(s&o)return null;let u,l,c=s||o;c&8?(u=t+(r-t)*(this.ymax-n)/(i-n),l=this.ymax):c&4?(u=t+(r-t)*(this.ymin-n)/(i-n),l=this.ymin):c&2?(l=n+(i-n)*(this.xmax-t)/(r-t),u=this.xmax):(l=n+(i-n)*(this.xmin-t)/(r-t),u=this.xmin),s?(t=u,n=l,s=this._regioncode(t,n)):(r=u,i=l,o=this._regioncode(r,i))}}_clipInfinite(t,n,r,i,s,o){let a=Array.from(n),u;if((u=this._project(a[0],a[1],r,i))&&a.unshift(u[0],u[1]),(u=this._project(a[a.length-2],a[a.length-1],s,o))&&a.push(u[0],u[1]),a=this._clipFinite(t,a))for(let l=0,c=a.length,f,d=this._edgecode(a[c-2],a[c-1]);l<c;l+=2)f=d,d=this._edgecode(a[l],a[l+1]),f&&d&&(l=this._edge(t,f,d,a,l),c=a.length);else this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(a=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return a}_edge(t,n,r,i,s){for(;n!==r;){let o,a;switch(n){case 5:n=4;continue;case 4:n=6,o=this.xmax,a=this.ymin;break;case 6:n=2;continue;case 2:n=10,o=this.xmax,a=this.ymax;break;case 10:n=8;continue;case 8:n=9,o=this.xmin,a=this.ymax;break;case 9:n=1;continue;case 1:n=5,o=this.xmin,a=this.ymin;break}(i[s]!==o||i[s+1]!==a)&&this.contains(t,o,a)&&(i.splice(s,0,o,a),s+=2)}return s}_project(t,n,r,i){let s=1/0,o,a,u;if(i<0){if(n<=this.ymin)return null;(o=(this.ymin-n)/i)<s&&(u=this.ymin,a=t+(s=o)*r)}else if(i>0){if(n>=this.ymax)return null;(o=(this.ymax-n)/i)<s&&(u=this.ymax,a=t+(s=o)*r)}if(r>0){if(t>=this.xmax)return null;(o=(this.xmax-t)/r)<s&&(a=this.xmax,u=n+(s=o)*i)}else if(r<0){if(t<=this.xmin)return null;(o=(this.xmin-t)/r)<s&&(a=this.xmin,u=n+(s=o)*i)}return[a,u]}_edgecode(t,n){return(t===this.xmin?1:t===this.xmax?2:0)|(n===this.ymin?4:n===this.ymax?8:0)}_regioncode(t,n){return(t<this.xmin?1:t>this.xmax?2:0)|(n<this.ymin?4:n>this.ymax?8:0)}_simplify(t){if(t&&t.length>4){for(let n=0;n<t.length;n+=2){const r=(n+2)%t.length,i=(n+4)%t.length;(t[n]===t[r]&&t[r]===t[i]||t[n+1]===t[r+1]&&t[r+1]===t[i+1])&&(t.splice(r,2),n-=2)}t.length||(t=null)}return t}};const mdt=2*Math.PI,$_=Math.pow;function gdt(e){return e[0]}function ydt(e){return e[1]}function vdt(e){const{triangles:t,coords:n}=e;for(let r=0;r<t.length;r+=3){const i=2*t[r],s=2*t[r+1],o=2*t[r+2];if((n[o]-n[i])*(n[s+1]-n[i+1])-(n[s]-n[i])*(n[o+1]-n[i+1])>1e-10)return!1}return!0}function bdt(e,t,n){return[e+Math.sin(e+t)*n,t+Math.cos(e-t)*n]}class AK{static from(t,n=gdt,r=ydt,i){return new AK("length"in t?_dt(t,n,r,i):Float64Array.from(wdt(t,n,r,i)))}constructor(t){this._delaunator=new E3(t),this.inedges=new Int32Array(t.length/2),this._hullIndex=new Int32Array(t.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const t=this._delaunator,n=this.points;if(t.hull&&t.hull.length>2&&vdt(t)){this.collinear=Int32Array.from({length:n.length/2},(d,h)=>h).sort((d,h)=>n[2*d]-n[2*h]||n[2*d+1]-n[2*h+1]);const u=this.collinear[0],l=this.collinear[this.collinear.length-1],c=[n[2*u],n[2*u+1],n[2*l],n[2*l+1]],f=1e-8*Math.hypot(c[3]-c[1],c[2]-c[0]);for(let d=0,h=n.length/2;d<h;++d){const p=bdt(n[2*d],n[2*d+1],f);n[2*d]=p[0],n[2*d+1]=p[1]}this._delaunator=new E3(n)}else delete this.collinear;const r=this.halfedges=this._delaunator.halfedges,i=this.hull=this._delaunator.hull,s=this.triangles=this._delaunator.triangles,o=this.inedges.fill(-1),a=this._hullIndex.fill(-1);for(let u=0,l=r.length;u<l;++u){const c=s[u%3===2?u-2:u+1];(r[u]===-1||o[c]===-1)&&(o[c]=u)}for(let u=0,l=i.length;u<l;++u)a[i[u]]=u;i.length<=2&&i.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=i[0],o[i[0]]=1,i.length===2&&(o[i[1]]=0,this.triangles[1]=i[1],this.triangles[2]=i[1]))}voronoi(t){return new pdt(this,t)}*neighbors(t){const{inedges:n,hull:r,_hullIndex:i,halfedges:s,triangles:o,collinear:a}=this;if(a){const f=a.indexOf(t);f>0&&(yield a[f-1]),f<a.length-1&&(yield a[f+1]);return}const u=n[t];if(u===-1)return;let l=u,c=-1;do{if(yield c=o[l],l=l%3===2?l-2:l+1,o[l]!==t)return;if(l=s[l],l===-1){const f=r[(i[t]+1)%r.length];f!==c&&(yield f);return}}while(l!==u)}find(t,n,r=0){if(t=+t,t!==t||(n=+n,n!==n))return-1;const i=r;let s;for(;(s=this._step(r,t,n))>=0&&s!==r&&s!==i;)r=s;return s}_step(t,n,r){const{inedges:i,hull:s,_hullIndex:o,halfedges:a,triangles:u,points:l}=this;if(i[t]===-1||!l.length)return(t+1)%(l.length>>1);let c=t,f=$_(n-l[t*2],2)+$_(r-l[t*2+1],2);const d=i[t];let h=d;do{let p=u[h];const m=$_(n-l[p*2],2)+$_(r-l[p*2+1],2);if(m<f&&(f=m,c=p),h=h%3===2?h-2:h+1,u[h]!==t)break;if(h=a[h],h===-1){if(h=s[(o[t]+1)%s.length],h!==p&&$_(n-l[h*2],2)+$_(r-l[h*2+1],2)<f)return h;break}}while(h!==d);return c}render(t){const n=t==null?t=new u1:void 0,{points:r,halfedges:i,triangles:s}=this;for(let o=0,a=i.length;o<a;++o){const u=i[o];if(u<o)continue;const l=s[o]*2,c=s[u]*2;t.moveTo(r[l],r[l+1]),t.lineTo(r[c],r[c+1])}return this.renderHull(t),n&&n.value()}renderPoints(t,n){n===void 0&&(!t||typeof t.moveTo!="function")&&(n=t,t=null),n=n==null?2:+n;const r=t==null?t=new u1:void 0,{points:i}=this;for(let s=0,o=i.length;s<o;s+=2){const a=i[s],u=i[s+1];t.moveTo(a+n,u),t.arc(a,u,n,0,mdt)}return r&&r.value()}renderHull(t){const n=t==null?t=new u1:void 0,{hull:r,points:i}=this,s=r[0]*2,o=r.length;t.moveTo(i[s],i[s+1]);for(let a=1;a<o;++a){const u=2*r[a];t.lineTo(i[u],i[u+1])}return t.closePath(),n&&n.value()}hullPolygon(){const t=new tz;return this.renderHull(t),t.value()}renderTriangle(t,n){const r=n==null?n=new u1:void 0,{points:i,triangles:s}=this,o=s[t*=3]*2,a=s[t+1]*2,u=s[t+2]*2;return n.moveTo(i[o],i[o+1]),n.lineTo(i[a],i[a+1]),n.lineTo(i[u],i[u+1]),n.closePath(),r&&r.value()}*trianglePolygons(){const{triangles:t}=this;for(let n=0,r=t.length/3;n<r;++n)yield this.trianglePolygon(n)}trianglePolygon(t){const n=new tz;return this.renderTriangle(t,n),n.value()}}function _dt(e,t,n,r){const i=e.length,s=new Float64Array(i*2);for(let o=0;o<i;++o){const a=e[o];s[o*2]=t.call(r,a,o,e),s[o*2+1]=n.call(r,a,o,e)}return s}function*wdt(e,t,n,r){let i=0;for(const s of e)yield t.call(r,s,i,e),yield n.call(r,s,i,e),++i}var wle={},T8={},C8=34,PT=10,A8=13;function XSe(e){return new Function("d","return {"+e.map(function(t,n){return JSON.stringify(t)+": d["+n+'] || ""'}).join(",")+"}")}function Edt(e,t){var n=XSe(e);return function(r,i){return t(n(r),i,e)}}function Ele(e){var t=Object.create(null),n=[];return e.forEach(function(r){for(var i in r)i in t||n.push(t[i]=i)}),n}function bu(e,t){var n=e+"",r=n.length;return r<t?new Array(t-r+1).join(0)+n:n}function xdt(e){return e<0?"-"+bu(-e,6):e>9999?"+"+bu(e,6):bu(e,4)}function Sdt(e){var t=e.getUTCHours(),n=e.getUTCMinutes(),r=e.getUTCSeconds(),i=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":xdt(e.getUTCFullYear())+"-"+bu(e.getUTCMonth()+1,2)+"-"+bu(e.getUTCDate(),2)+(i?"T"+bu(t,2)+":"+bu(n,2)+":"+bu(r,2)+"."+bu(i,3)+"Z":r?"T"+bu(t,2)+":"+bu(n,2)+":"+bu(r,2)+"Z":n||t?"T"+bu(t,2)+":"+bu(n,2)+"Z":"")}function QSe(e){var t=new RegExp('["'+e+`
\r]`),n=e.charCodeAt(0);function r(f,d){var h,p,m=i(f,function(g,y){if(h)return h(g,y-1);p=g,h=d?Edt(g,d):XSe(g)});return m.columns=p||[],m}function i(f,d){var h=[],p=f.length,m=0,g=0,y,v=p<=0,_=!1;f.charCodeAt(p-1)===PT&&--p,f.charCodeAt(p-1)===A8&&--p;function w(){if(v)return T8;if(_)return _=!1,wle;var S,T=m,C;if(f.charCodeAt(T)===C8){for(;m++<p&&f.charCodeAt(m)!==C8||f.charCodeAt(++m)===C8;);return(S=m)>=p?v=!0:(C=f.charCodeAt(m++))===PT?_=!0:C===A8&&(_=!0,f.charCodeAt(m)===PT&&++m),f.slice(T+1,S-1).replace(/""/g,'"')}for(;m<p;){if((C=f.charCodeAt(S=m++))===PT)_=!0;else if(C===A8)_=!0,f.charCodeAt(m)===PT&&++m;else if(C!==n)continue;return f.slice(T,S)}return v=!0,f.slice(T,p)}for(;(y=w())!==T8;){for(var E=[];y!==wle&&y!==T8;)E.push(y),y=w();d&&(E=d(E,g++))==null||h.push(E)}return h}function s(f,d){return f.map(function(h){return d.map(function(p){return c(h[p])}).join(e)})}function o(f,d){return d==null&&(d=Ele(f)),[d.map(c).join(e)].concat(s(f,d)).join(`
`)}function a(f,d){return d==null&&(d=Ele(f)),s(f,d).join(`
`)}function u(f){return f.map(l).join(`
`)}function l(f){return f.map(c).join(e)}function c(f){return f==null?"":f instanceof Date?Sdt(f):t.test(f+="")?'"'+f.replace(/"/g,'""')+'"':f}return{parse:r,parseRows:i,format:o,formatBody:a,formatRows:u,formatRow:l,formatValue:c}}var Tdt=QSe(","),Cdt=Tdt.parse;function Adt(e){if(!e.ok)throw new Error(e.status+" "+e.statusText);return e.text()}function Idt(e,t){return fetch(e,t).then(Adt)}function kdt(e){return function(t,n,r){return arguments.length===2&&typeof n=="function"&&(r=n,n=void 0),Idt(t,n).then(function(i){return e(i,r)})}}var IK=kdt(Cdt);function Rdt(e,t){var n,r=1;e==null&&(e=0),t==null&&(t=0);function i(){var s,o=n.length,a,u=0,l=0;for(s=0;s<o;++s)a=n[s],u+=a.x,l+=a.y;for(u=(u/o-e)*r,l=(l/o-t)*r,s=0;s<o;++s)a=n[s],a.x-=u,a.y-=l}return i.initialize=function(s){n=s},i.x=function(s){return arguments.length?(e=+s,i):e},i.y=function(s){return arguments.length?(t=+s,i):t},i.strength=function(s){return arguments.length?(r=+s,i):r},i}function Ndt(e){const t=+this._x.call(null,e),n=+this._y.call(null,e);return JSe(this.cover(t,n),t,n,e)}function JSe(e,t,n,r){if(isNaN(t)||isNaN(n))return e;var i,s=e._root,o={data:r},a=e._x0,u=e._y0,l=e._x1,c=e._y1,f,d,h,p,m,g,y,v;if(!s)return e._root=o,e;for(;s.length;)if((m=t>=(f=(a+l)/2))?a=f:l=f,(g=n>=(d=(u+c)/2))?u=d:c=d,i=s,!(s=s[y=g<<1|m]))return i[y]=o,e;if(h=+e._x.call(null,s.data),p=+e._y.call(null,s.data),t===h&&n===p)return o.next=s,i?i[y]=o:e._root=o,e;do i=i?i[y]=new Array(4):e._root=new Array(4),(m=t>=(f=(a+l)/2))?a=f:l=f,(g=n>=(d=(u+c)/2))?u=d:c=d;while((y=g<<1|m)===(v=(p>=d)<<1|h>=f));return i[v]=s,i[y]=o,e}function Pdt(e){var t,n,r=e.length,i,s,o=new Array(r),a=new Array(r),u=1/0,l=1/0,c=-1/0,f=-1/0;for(n=0;n<r;++n)isNaN(i=+this._x.call(null,t=e[n]))||isNaN(s=+this._y.call(null,t))||(o[n]=i,a[n]=s,i<u&&(u=i),i>c&&(c=i),s<l&&(l=s),s>f&&(f=s));if(u>c||l>f)return this;for(this.cover(u,l).cover(c,f),n=0;n<r;++n)JSe(this,o[n],a[n],e[n]);return this}function Ddt(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var n=this._x0,r=this._y0,i=this._x1,s=this._y1;if(isNaN(n))i=(n=Math.floor(e))+1,s=(r=Math.floor(t))+1;else{for(var o=i-n||1,a=this._root,u,l;n>e||e>=i||r>t||t>=s;)switch(l=(t<r)<<1|e<n,u=new Array(4),u[l]=a,a=u,o*=2,l){case 0:i=n+o,s=r+o;break;case 1:n=i-o,s=r+o;break;case 2:i=n+o,r=s-o;break;case 3:n=i-o,r=s-o;break}this._root&&this._root.length&&(this._root=a)}return this._x0=n,this._y0=r,this._x1=i,this._y1=s,this}function Odt(){var e=[];return this.visit(function(t){if(!t.length)do e.push(t.data);while(t=t.next)}),e}function $dt(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function za(e,t,n,r,i){this.node=e,this.x0=t,this.y0=n,this.x1=r,this.y1=i}function Mdt(e,t,n){var r,i=this._x0,s=this._y0,o,a,u,l,c=this._x1,f=this._y1,d=[],h=this._root,p,m;for(h&&d.push(new za(h,i,s,c,f)),n==null?n=1/0:(i=e-n,s=t-n,c=e+n,f=t+n,n*=n);p=d.pop();)if(!(!(h=p.node)||(o=p.x0)>c||(a=p.y0)>f||(u=p.x1)<i||(l=p.y1)<s))if(h.length){var g=(o+u)/2,y=(a+l)/2;d.push(new za(h[3],g,y,u,l),new za(h[2],o,y,g,l),new za(h[1],g,a,u,y),new za(h[0],o,a,g,y)),(m=(t>=y)<<1|e>=g)&&(p=d[d.length-1],d[d.length-1]=d[d.length-1-m],d[d.length-1-m]=p)}else{var v=e-+this._x.call(null,h.data),_=t-+this._y.call(null,h.data),w=v*v+_*_;if(w<n){var E=Math.sqrt(n=w);i=e-E,s=t-E,c=e+E,f=t+E,r=h.data}}return r}function Ldt(e){if(isNaN(c=+this._x.call(null,e))||isNaN(f=+this._y.call(null,e)))return this;var t,n=this._root,r,i,s,o=this._x0,a=this._y0,u=this._x1,l=this._y1,c,f,d,h,p,m,g,y;if(!n)return this;if(n.length)for(;;){if((p=c>=(d=(o+u)/2))?o=d:u=d,(m=f>=(h=(a+l)/2))?a=h:l=h,t=n,!(n=n[g=m<<1|p]))return this;if(!n.length)break;(t[g+1&3]||t[g+2&3]||t[g+3&3])&&(r=t,y=g)}for(;n.data!==e;)if(i=n,!(n=n.next))return this;return(s=n.next)&&delete n.next,i?(s?i.next=s:delete i.next,this):t?(s?t[g]=s:delete t[g],(n=t[0]||t[1]||t[2]||t[3])&&n===(t[3]||t[2]||t[1]||t[0])&&!n.length&&(r?r[y]=n:this._root=n),this):(this._root=s,this)}function Fdt(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this}function jdt(){return this._root}function Bdt(){var e=0;return this.visit(function(t){if(!t.length)do++e;while(t=t.next)}),e}function Udt(e){var t=[],n,r=this._root,i,s,o,a,u;for(r&&t.push(new za(r,this._x0,this._y0,this._x1,this._y1));n=t.pop();)if(!e(r=n.node,s=n.x0,o=n.y0,a=n.x1,u=n.y1)&&r.length){var l=(s+a)/2,c=(o+u)/2;(i=r[3])&&t.push(new za(i,l,c,a,u)),(i=r[2])&&t.push(new za(i,s,c,l,u)),(i=r[1])&&t.push(new za(i,l,o,a,c)),(i=r[0])&&t.push(new za(i,s,o,l,c))}return this}function zdt(e){var t=[],n=[],r;for(this._root&&t.push(new za(this._root,this._x0,this._y0,this._x1,this._y1));r=t.pop();){var i=r.node;if(i.length){var s,o=r.x0,a=r.y0,u=r.x1,l=r.y1,c=(o+u)/2,f=(a+l)/2;(s=i[0])&&t.push(new za(s,o,a,c,f)),(s=i[1])&&t.push(new za(s,c,a,u,f)),(s=i[2])&&t.push(new za(s,o,f,c,l)),(s=i[3])&&t.push(new za(s,c,f,u,l))}n.push(r)}for(;r=n.pop();)e(r.node,r.x0,r.y0,r.x1,r.y1);return this}function Vdt(e){return e[0]}function Hdt(e){return arguments.length?(this._x=e,this):this._x}function qdt(e){return e[1]}function Wdt(e){return arguments.length?(this._y=e,this):this._y}function kK(e,t,n){var r=new RK(t??Vdt,n??qdt,NaN,NaN,NaN,NaN);return e==null?r:r.addAll(e)}function RK(e,t,n,r,i,s){this._x=e,this._y=t,this._x0=n,this._y0=r,this._x1=i,this._y1=s,this._root=void 0}function xle(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}var au=kK.prototype=RK.prototype;au.copy=function(){var e=new RK(this._x,this._y,this._x0,this._y0,this._x1,this._y1),t=this._root,n,r;if(!t)return e;if(!t.length)return e._root=xle(t),e;for(n=[{source:t,target:e._root=new Array(4)}];t=n.pop();)for(var i=0;i<4;++i)(r=t.source[i])&&(r.length?n.push({source:r,target:t.target[i]=new Array(4)}):t.target[i]=xle(r));return e};au.add=Ndt;au.addAll=Pdt;au.cover=Ddt;au.data=Odt;au.extent=$dt;au.find=Mdt;au.remove=Ldt;au.removeAll=Fdt;au.root=jdt;au.size=Bdt;au.visit=Udt;au.visitAfter=zdt;au.x=Hdt;au.y=Wdt;function Wa(e){return function(){return e}}function e0(e){return(e()-.5)*1e-6}function Gdt(e){return e.x+e.vx}function Ydt(e){return e.y+e.vy}function Kdt(e){var t,n,r,i=1,s=1;typeof e!="function"&&(e=Wa(e==null?1:+e));function o(){for(var l,c=t.length,f,d,h,p,m,g,y=0;y<s;++y)for(f=kK(t,Gdt,Ydt).visitAfter(a),l=0;l<c;++l)d=t[l],m=n[d.index],g=m*m,h=d.x+d.vx,p=d.y+d.vy,f.visit(v);function v(_,w,E,S,T){var C=_.data,A=_.r,k=m+A;if(C){if(C.index>d.index){var N=h-C.x-C.vx,O=p-C.y-C.vy,D=N*N+O*O;D<k*k&&(N===0&&(N=e0(r),D+=N*N),O===0&&(O=e0(r),D+=O*O),D=(k-(D=Math.sqrt(D)))/D*i,d.vx+=(N*=D)*(k=(A*=A)/(g+A)),d.vy+=(O*=D)*k,C.vx-=N*(k=1-k),C.vy-=O*k)}return}return w>h+k||S<h-k||E>p+k||T<p-k}}function a(l){if(l.data)return l.r=n[l.data.index];for(var c=l.r=0;c<4;++c)l[c]&&l[c].r>l.r&&(l.r=l[c].r)}function u(){if(t){var l,c=t.length,f;for(n=new Array(c),l=0;l<c;++l)f=t[l],n[f.index]=+e(f,l,t)}}return o.initialize=function(l,c){t=l,r=c,u()},o.iterations=function(l){return arguments.length?(s=+l,o):s},o.strength=function(l){return arguments.length?(i=+l,o):i},o.radius=function(l){return arguments.length?(e=typeof l=="function"?l:Wa(+l),u(),o):e},o}function Xdt(e){return e.index}function Sle(e,t){var n=e.get(t);if(!n)throw new Error("node not found: "+t);return n}function Qdt(e){var t=Xdt,n=f,r,i=Wa(30),s,o,a,u,l,c=1;e==null&&(e=[]);function f(g){return 1/Math.min(a[g.source.index],a[g.target.index])}function d(g){for(var y=0,v=e.length;y<c;++y)for(var _=0,w,E,S,T,C,A,k;_<v;++_)w=e[_],E=w.source,S=w.target,T=S.x+S.vx-E.x-E.vx||e0(l),C=S.y+S.vy-E.y-E.vy||e0(l),A=Math.sqrt(T*T+C*C),A=(A-s[_])/A*g*r[_],T*=A,C*=A,S.vx-=T*(k=u[_]),S.vy-=C*k,E.vx+=T*(k=1-k),E.vy+=C*k}function h(){if(o){var g,y=o.length,v=e.length,_=new Map(o.map((E,S)=>[t(E,S,o),E])),w;for(g=0,a=new Array(y);g<v;++g)w=e[g],w.index=g,typeof w.source!="object"&&(w.source=Sle(_,w.source)),typeof w.target!="object"&&(w.target=Sle(_,w.target)),a[w.source.index]=(a[w.source.index]||0)+1,a[w.target.index]=(a[w.target.index]||0)+1;for(g=0,u=new Array(v);g<v;++g)w=e[g],u[g]=a[w.source.index]/(a[w.source.index]+a[w.target.index]);r=new Array(v),p(),s=new Array(v),m()}}function p(){if(o)for(var g=0,y=e.length;g<y;++g)r[g]=+n(e[g],g,e)}function m(){if(o)for(var g=0,y=e.length;g<y;++g)s[g]=+i(e[g],g,e)}return d.initialize=function(g,y){o=g,l=y,h()},d.links=function(g){return arguments.length?(e=g,h(),d):e},d.id=function(g){return arguments.length?(t=g,d):t},d.iterations=function(g){return arguments.length?(c=+g,d):c},d.strength=function(g){return arguments.length?(n=typeof g=="function"?g:Wa(+g),p(),d):n},d.distance=function(g){return arguments.length?(i=typeof g=="function"?g:Wa(+g),m(),d):i},d}const Jdt=1664525,Zdt=1013904223,Tle=4294967296;function eht(){let e=1;return()=>(e=(Jdt*e+Zdt)%Tle)/Tle}function tht(e){return e.x}function nht(e){return e.y}var rht=10,iht=Math.PI*(3-Math.sqrt(5));function sht(e){var t,n=1,r=.001,i=1-Math.pow(r,1/300),s=0,o=.6,a=new Map,u=EK(f),l=w6("tick","end"),c=eht();e==null&&(e=[]);function f(){d(),l.call("tick",t),n<r&&(u.stop(),l.call("end",t))}function d(m){var g,y=e.length,v;m===void 0&&(m=1);for(var _=0;_<m;++_)for(n+=(s-n)*i,a.forEach(function(w){w(n)}),g=0;g<y;++g)v=e[g],v.fx==null?v.x+=v.vx*=o:(v.x=v.fx,v.vx=0),v.fy==null?v.y+=v.vy*=o:(v.y=v.fy,v.vy=0);return t}function h(){for(var m=0,g=e.length,y;m<g;++m){if(y=e[m],y.index=m,y.fx!=null&&(y.x=y.fx),y.fy!=null&&(y.y=y.fy),isNaN(y.x)||isNaN(y.y)){var v=rht*Math.sqrt(.5+m),_=m*iht;y.x=v*Math.cos(_),y.y=v*Math.sin(_)}(isNaN(y.vx)||isNaN(y.vy))&&(y.vx=y.vy=0)}}function p(m){return m.initialize&&m.initialize(e,c),m}return h(),t={tick:d,restart:function(){return u.restart(f),t},stop:function(){return u.stop(),t},nodes:function(m){return arguments.length?(e=m,h(),a.forEach(p),t):e},alpha:function(m){return arguments.length?(n=+m,t):n},alphaMin:function(m){return arguments.length?(r=+m,t):r},alphaDecay:function(m){return arguments.length?(i=+m,t):+i},alphaTarget:function(m){return arguments.length?(s=+m,t):s},velocityDecay:function(m){return arguments.length?(o=1-m,t):1-o},randomSource:function(m){return arguments.length?(c=m,a.forEach(p),t):c},force:function(m,g){return arguments.length>1?(g==null?a.delete(m):a.set(m,p(g)),t):a.get(m)},find:function(m,g,y){var v=0,_=e.length,w,E,S,T,C;for(y==null?y=1/0:y*=y,v=0;v<_;++v)T=e[v],w=m-T.x,E=g-T.y,S=w*w+E*E,S<y&&(C=T,y=S);return C},on:function(m,g){return arguments.length>1?(l.on(m,g),t):l.on(m)}}}function oht(){var e,t,n,r,i=Wa(-30),s,o=1,a=1/0,u=.81;function l(h){var p,m=e.length,g=kK(e,tht,nht).visitAfter(f);for(r=h,p=0;p<m;++p)t=e[p],g.visit(d)}function c(){if(e){var h,p=e.length,m;for(s=new Array(p),h=0;h<p;++h)m=e[h],s[m.index]=+i(m,h,e)}}function f(h){var p=0,m,g,y=0,v,_,w;if(h.length){for(v=_=w=0;w<4;++w)(m=h[w])&&(g=Math.abs(m.value))&&(p+=m.value,y+=g,v+=g*m.x,_+=g*m.y);h.x=v/y,h.y=_/y}else{m=h,m.x=m.data.x,m.y=m.data.y;do p+=s[m.data.index];while(m=m.next)}h.value=p}function d(h,p,m,g){if(!h.value)return!0;var y=h.x-t.x,v=h.y-t.y,_=g-p,w=y*y+v*v;if(_*_/u<w)return w<a&&(y===0&&(y=e0(n),w+=y*y),v===0&&(v=e0(n),w+=v*v),w<o&&(w=Math.sqrt(o*w)),t.vx+=y*h.value*r/w,t.vy+=v*h.value*r/w),!0;if(h.length||w>=a)return;(h.data!==t||h.next)&&(y===0&&(y=e0(n),w+=y*y),v===0&&(v=e0(n),w+=v*v),w<o&&(w=Math.sqrt(o*w)));do h.data!==t&&(_=s[h.data.index]*r/w,t.vx+=y*_,t.vy+=v*_);while(h=h.next)}return l.initialize=function(h,p){e=h,n=p,c()},l.strength=function(h){return arguments.length?(i=typeof h=="function"?h:Wa(+h),c(),l):i},l.distanceMin=function(h){return arguments.length?(o=h*h,l):Math.sqrt(o)},l.distanceMax=function(h){return arguments.length?(a=h*h,l):Math.sqrt(a)},l.theta=function(h){return arguments.length?(u=h*h,l):Math.sqrt(u)},l}function aht(e){var t=Wa(.1),n,r,i;typeof e!="function"&&(e=Wa(e==null?0:+e));function s(a){for(var u=0,l=n.length,c;u<l;++u)c=n[u],c.vx+=(i[u]-c.x)*r[u]*a}function o(){if(n){var a,u=n.length;for(r=new Array(u),i=new Array(u),a=0;a<u;++a)r[a]=isNaN(i[a]=+e(n[a],a,n))?0:+t(n[a],a,n)}}return s.initialize=function(a){n=a,o()},s.strength=function(a){return arguments.length?(t=typeof a=="function"?a:Wa(+a),o(),s):t},s.x=function(a){return arguments.length?(e=typeof a=="function"?a:Wa(+a),o(),s):e},s}function uht(e){var t=Wa(.1),n,r,i;typeof e!="function"&&(e=Wa(e==null?0:+e));function s(a){for(var u=0,l=n.length,c;u<l;++u)c=n[u],c.vy+=(i[u]-c.y)*r[u]*a}function o(){if(n){var a,u=n.length;for(r=new Array(u),i=new Array(u),a=0;a<u;++a)r[a]=isNaN(i[a]=+e(n[a],a,n))?0:+t(n[a],a,n)}}return s.initialize=function(a){n=a,o()},s.strength=function(a){return arguments.length?(t=typeof a=="function"?a:Wa(+a),o(),s):t},s.y=function(a){return arguments.length?(e=typeof a=="function"?a:Wa(+a),o(),s):e},s}function lht(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function x3(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function WE(e){return e=x3(Math.abs(e)),e?e[1]:NaN}function cht(e,t){return function(n,r){for(var i=n.length,s=[],o=0,a=e[0],u=0;i>0&&a>0&&(u+a+1>r&&(a=Math.max(1,r-u)),s.push(n.substring(i-=a,i+a)),!((u+=a+1)>r));)a=e[o=(o+1)%e.length];return s.reverse().join(t)}}function fht(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var dht=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function K1(e){if(!(t=dht.exec(e)))throw new Error("invalid format: "+e);var t;return new NK({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}K1.prototype=NK.prototype;function NK(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}NK.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function hht(e){e:for(var t=e.length,n=1,r=-1,i;n<t;++n)switch(e[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(i+1):e}var ZSe;function pht(e,t){var n=x3(e,t);if(!n)return e+"";var r=n[0],i=n[1],s=i-(ZSe=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,o=r.length;return s===o?r:s>o?r+new Array(s-o+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+x3(e,Math.max(0,t+s-1))[0]}function Cle(e,t){var n=x3(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const Ale={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:lht,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>Cle(e*100,t),r:Cle,s:pht,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function Ile(e){return e}var kle=Array.prototype.map,Rle=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function eTe(e){var t=e.grouping===void 0||e.thousands===void 0?Ile:cht(kle.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",s=e.numerals===void 0?Ile:fht(kle.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",a=e.minus===void 0?"−":e.minus+"",u=e.nan===void 0?"NaN":e.nan+"";function l(f){f=K1(f);var d=f.fill,h=f.align,p=f.sign,m=f.symbol,g=f.zero,y=f.width,v=f.comma,_=f.precision,w=f.trim,E=f.type;E==="n"?(v=!0,E="g"):Ale[E]||(_===void 0&&(_=12),w=!0,E="g"),(g||d==="0"&&h==="=")&&(g=!0,d="0",h="=");var S=m==="$"?n:m==="#"&&/[boxX]/.test(E)?"0"+E.toLowerCase():"",T=m==="$"?r:/[%p]/.test(E)?o:"",C=Ale[E],A=/[defgprs%]/.test(E);_=_===void 0?6:/[gprs]/.test(E)?Math.max(1,Math.min(21,_)):Math.max(0,Math.min(20,_));function k(N){var O=S,D=T,$,F,M;if(E==="c")D=C(N)+D,N="";else{N=+N;var B=N<0||1/N<0;if(N=isNaN(N)?u:C(Math.abs(N),_),w&&(N=hht(N)),B&&+N==0&&p!=="+"&&(B=!1),O=(B?p==="("?p:a:p==="-"||p==="("?"":p)+O,D=(E==="s"?Rle[8+ZSe/3]:"")+D+(B&&p==="("?")":""),A){for($=-1,F=N.length;++$<F;)if(M=N.charCodeAt($),48>M||M>57){D=(M===46?i+N.slice($+1):N.slice($))+D,N=N.slice(0,$);break}}}v&&!g&&(N=t(N,1/0));var U=O.length+N.length+D.length,H=U<y?new Array(y-U+1).join(d):"";switch(v&&g&&(N=t(H+N,H.length?y-D.length:1/0),H=""),h){case"<":N=O+N+D+H;break;case"=":N=O+H+N+D;break;case"^":N=H.slice(0,U=H.length>>1)+O+N+D+H.slice(U);break;default:N=H+O+N+D;break}return s(N)}return k.toString=function(){return f+""},k}function c(f,d){var h=l((f=K1(f),f.type="f",f)),p=Math.max(-8,Math.min(8,Math.floor(WE(d)/3)))*3,m=Math.pow(10,-p),g=Rle[8+p/3];return function(y){return h(m*y)+g}}return{format:l,formatPrefix:c}}var HN,jy,PK;mht({thousands:",",grouping:[3],currency:["$",""]});function mht(e){return HN=eTe(e),jy=HN.format,PK=HN.formatPrefix,HN}function tTe(e){return Math.max(0,-WE(Math.abs(e)))}function nTe(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(WE(t)/3)))*3-WE(Math.abs(e)))}function rTe(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,WE(t)-WE(e))+1}var Bt=1e-6,S3=1e-12,Pn=Math.PI,Gi=Pn/2,T3=Pn/4,eu=Pn*2,is=180/Pn,Rn=Pn/180,Xn=Math.abs,gS=Math.atan,Mc=Math.atan2,zt=Math.cos,qN=Math.ceil,iTe=Math.exp,nz=Math.hypot,C3=Math.log,I8=Math.pow,Ft=Math.sin,Sc=Math.sign||function(e){return e>0?1:e<0?-1:0},tu=Math.sqrt,DK=Math.tan;function sTe(e){return e>1?0:e<-1?Pn:Math.acos(e)}function Ju(e){return e>1?Gi:e<-1?-Gi:Math.asin(e)}function ko(){}function A3(e,t){e&&Ple.hasOwnProperty(e.type)&&Ple[e.type](e,t)}var Nle={Feature:function(e,t){A3(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,i=n.length;++r<i;)A3(n[r].geometry,t)}},Ple={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)e=n[r],t.point(e[0],e[1],e[2])},LineString:function(e,t){rz(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)rz(n[r],t,0)},Polygon:function(e,t){Dle(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)Dle(n[r],t)},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,i=n.length;++r<i;)A3(n[r],t)}};function rz(e,t,n){var r=-1,i=e.length-n,s;for(t.lineStart();++r<i;)s=e[r],t.point(s[0],s[1],s[2]);t.lineEnd()}function Dle(e,t){var n=-1,r=e.length;for(t.polygonStart();++n<r;)rz(e[n],t,1);t.polygonEnd()}function jp(e,t){e&&Nle.hasOwnProperty(e.type)?Nle[e.type](e,t):A3(e,t)}var I3=new Ka,k3=new Ka,oTe,aTe,iz,sz,oz,Ch={point:ko,lineStart:ko,lineEnd:ko,polygonStart:function(){I3=new Ka,Ch.lineStart=ght,Ch.lineEnd=yht},polygonEnd:function(){var e=+I3;k3.add(e<0?eu+e:e),this.lineStart=this.lineEnd=this.point=ko},sphere:function(){k3.add(eu)}};function ght(){Ch.point=vht}function yht(){uTe(oTe,aTe)}function vht(e,t){Ch.point=uTe,oTe=e,aTe=t,e*=Rn,t*=Rn,iz=e,sz=zt(t=t/2+T3),oz=Ft(t)}function uTe(e,t){e*=Rn,t*=Rn,t=t/2+T3;var n=e-iz,r=n>=0?1:-1,i=r*n,s=zt(t),o=Ft(t),a=oz*o,u=sz*s+a*zt(i),l=a*r*Ft(i);I3.add(Mc(l,u)),iz=e,sz=s,oz=o}function bht(e){return k3=new Ka,jp(e,Ch),k3*2}function R3(e){return[Mc(e[1],e[0]),Ju(e[2])]}function X1(e){var t=e[0],n=e[1],r=zt(n);return[r*zt(t),r*Ft(t),Ft(n)]}function WN(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function GE(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function k8(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function GN(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function N3(e){var t=tu(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}var Ri,Iu,ji,bl,Rv,lTe,cTe,tE,CC,Dg,Am,Op={point:az,lineStart:Ole,lineEnd:$le,polygonStart:function(){Op.point=dTe,Op.lineStart=_ht,Op.lineEnd=wht,CC=new Ka,Ch.polygonStart()},polygonEnd:function(){Ch.polygonEnd(),Op.point=az,Op.lineStart=Ole,Op.lineEnd=$le,I3<0?(Ri=-(ji=180),Iu=-(bl=90)):CC>Bt?bl=90:CC<-Bt&&(Iu=-90),Am[0]=Ri,Am[1]=ji},sphere:function(){Ri=-(ji=180),Iu=-(bl=90)}};function az(e,t){Dg.push(Am=[Ri=e,ji=e]),t<Iu&&(Iu=t),t>bl&&(bl=t)}function fTe(e,t){var n=X1([e*Rn,t*Rn]);if(tE){var r=GE(tE,n),i=[r[1],-r[0],0],s=GE(i,r);N3(s),s=R3(s);var o=e-Rv,a=o>0?1:-1,u=s[0]*is*a,l,c=Xn(o)>180;c^(a*Rv<u&&u<a*e)?(l=s[1]*is,l>bl&&(bl=l)):(u=(u+360)%360-180,c^(a*Rv<u&&u<a*e)?(l=-s[1]*is,l<Iu&&(Iu=l)):(t<Iu&&(Iu=t),t>bl&&(bl=t))),c?e<Rv?yl(Ri,e)>yl(Ri,ji)&&(ji=e):yl(e,ji)>yl(Ri,ji)&&(Ri=e):ji>=Ri?(e<Ri&&(Ri=e),e>ji&&(ji=e)):e>Rv?yl(Ri,e)>yl(Ri,ji)&&(ji=e):yl(e,ji)>yl(Ri,ji)&&(Ri=e)}else Dg.push(Am=[Ri=e,ji=e]);t<Iu&&(Iu=t),t>bl&&(bl=t),tE=n,Rv=e}function Ole(){Op.point=fTe}function $le(){Am[0]=Ri,Am[1]=ji,Op.point=az,tE=null}function dTe(e,t){if(tE){var n=e-Rv;CC.add(Xn(n)>180?n+(n>0?360:-360):n)}else lTe=e,cTe=t;Ch.point(e,t),fTe(e,t)}function _ht(){Ch.lineStart()}function wht(){dTe(lTe,cTe),Ch.lineEnd(),Xn(CC)>Bt&&(Ri=-(ji=180)),Am[0]=Ri,Am[1]=ji,tE=null}function yl(e,t){return(t-=e)<0?t+360:t}function Eht(e,t){return e[0]-t[0]}function Mle(e,t){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}function xht(e){var t,n,r,i,s,o,a;if(bl=ji=-(Ri=Iu=1/0),Dg=[],jp(e,Op),n=Dg.length){for(Dg.sort(Eht),t=1,r=Dg[0],s=[r];t<n;++t)i=Dg[t],Mle(r,i[0])||Mle(r,i[1])?(yl(r[0],i[1])>yl(r[0],r[1])&&(r[1]=i[1]),yl(i[0],r[1])>yl(r[0],r[1])&&(r[0]=i[0])):s.push(r=i);for(o=-1/0,n=s.length-1,t=0,r=s[n];t<=n;r=i,++t)i=s[t],(a=yl(r[1],i[0]))>o&&(o=a,Ri=i[0],ji=r[1])}return Dg=Am=null,Ri===1/0||Iu===1/0?[[NaN,NaN],[NaN,NaN]]:[[Ri,Iu],[ji,bl]]}var T2,P3,D3,O3,$3,M3,L3,F3,uz,lz,cz,hTe,pTe,ja,Ba,Ua,Pf={sphere:ko,point:OK,lineStart:Lle,lineEnd:Fle,polygonStart:function(){Pf.lineStart=Cht,Pf.lineEnd=Aht},polygonEnd:function(){Pf.lineStart=Lle,Pf.lineEnd=Fle}};function OK(e,t){e*=Rn,t*=Rn;var n=zt(t);Ik(n*zt(e),n*Ft(e),Ft(t))}function Ik(e,t,n){++T2,D3+=(e-D3)/T2,O3+=(t-O3)/T2,$3+=(n-$3)/T2}function Lle(){Pf.point=Sht}function Sht(e,t){e*=Rn,t*=Rn;var n=zt(t);ja=n*zt(e),Ba=n*Ft(e),Ua=Ft(t),Pf.point=Tht,Ik(ja,Ba,Ua)}function Tht(e,t){e*=Rn,t*=Rn;var n=zt(t),r=n*zt(e),i=n*Ft(e),s=Ft(t),o=Mc(tu((o=Ba*s-Ua*i)*o+(o=Ua*r-ja*s)*o+(o=ja*i-Ba*r)*o),ja*r+Ba*i+Ua*s);P3+=o,M3+=o*(ja+(ja=r)),L3+=o*(Ba+(Ba=i)),F3+=o*(Ua+(Ua=s)),Ik(ja,Ba,Ua)}function Fle(){Pf.point=OK}function Cht(){Pf.point=Iht}function Aht(){mTe(hTe,pTe),Pf.point=OK}function Iht(e,t){hTe=e,pTe=t,e*=Rn,t*=Rn,Pf.point=mTe;var n=zt(t);ja=n*zt(e),Ba=n*Ft(e),Ua=Ft(t),Ik(ja,Ba,Ua)}function mTe(e,t){e*=Rn,t*=Rn;var n=zt(t),r=n*zt(e),i=n*Ft(e),s=Ft(t),o=Ba*s-Ua*i,a=Ua*r-ja*s,u=ja*i-Ba*r,l=nz(o,a,u),c=Ju(l),f=l&&-c/l;uz.add(f*o),lz.add(f*a),cz.add(f*u),P3+=c,M3+=c*(ja+(ja=r)),L3+=c*(Ba+(Ba=i)),F3+=c*(Ua+(Ua=s)),Ik(ja,Ba,Ua)}function kht(e){T2=P3=D3=O3=$3=M3=L3=F3=0,uz=new Ka,lz=new Ka,cz=new Ka,jp(e,Pf);var t=+uz,n=+lz,r=+cz,i=nz(t,n,r);return i<S3&&(t=M3,n=L3,r=F3,P3<Bt&&(t=D3,n=O3,r=$3),i=nz(t,n,r),i<S3)?[NaN,NaN]:[Mc(n,t)*is,Ju(r/i)*is]}function fz(e,t){function n(r,i){return r=e(r,i),t(r[0],r[1])}return e.invert&&t.invert&&(n.invert=function(r,i){return r=t.invert(r,i),r&&e.invert(r[0],r[1])}),n}function dz(e,t){return Xn(e)>Pn&&(e-=Math.round(e/eu)*eu),[e,t]}dz.invert=dz;function gTe(e,t,n){return(e%=eu)?t||n?fz(Ble(e),Ule(t,n)):Ble(e):t||n?Ule(t,n):dz}function jle(e){return function(t,n){return t+=e,Xn(t)>Pn&&(t-=Math.round(t/eu)*eu),[t,n]}}function Ble(e){var t=jle(e);return t.invert=jle(-e),t}function Ule(e,t){var n=zt(e),r=Ft(e),i=zt(t),s=Ft(t);function o(a,u){var l=zt(u),c=zt(a)*l,f=Ft(a)*l,d=Ft(u),h=d*n+c*r;return[Mc(f*i-h*s,c*n-d*r),Ju(h*i+f*s)]}return o.invert=function(a,u){var l=zt(u),c=zt(a)*l,f=Ft(a)*l,d=Ft(u),h=d*i-f*s;return[Mc(f*i+d*s,c*n+h*r),Ju(h*n-c*r)]},o}function Rht(e){e=gTe(e[0]*Rn,e[1]*Rn,e.length>2?e[2]*Rn:0);function t(n){return n=e(n[0]*Rn,n[1]*Rn),n[0]*=is,n[1]*=is,n}return t.invert=function(n){return n=e.invert(n[0]*Rn,n[1]*Rn),n[0]*=is,n[1]*=is,n},t}function Nht(e,t,n,r,i,s){if(n){var o=zt(t),a=Ft(t),u=r*n;i==null?(i=t+r*eu,s=t-u/2):(i=zle(o,i),s=zle(o,s),(r>0?i<s:i>s)&&(i+=r*eu));for(var l,c=i;r>0?c>s:c<s;c-=u)l=R3([o,-a*zt(c),-a*Ft(c)]),e.point(l[0],l[1])}}function zle(e,t){t=X1(t),t[0]-=e,N3(t);var n=sTe(-t[1]);return((-t[2]<0?-n:n)+eu-Bt)%eu}function yTe(){var e=[],t;return{point:function(n,r,i){t.push([n,r,i])},lineStart:function(){e.push(t=[])},lineEnd:ko,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function xD(e,t){return Xn(e[0]-t[0])<Bt&&Xn(e[1]-t[1])<Bt}function YN(e,t,n,r){this.x=e,this.z=t,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function vTe(e,t,n,r,i){var s=[],o=[],a,u;if(e.forEach(function(p){if(!((m=p.length-1)<=0)){var m,g=p[0],y=p[m],v;if(xD(g,y)){if(!g[2]&&!y[2]){for(i.lineStart(),a=0;a<m;++a)i.point((g=p[a])[0],g[1]);i.lineEnd();return}y[0]+=2*Bt}s.push(v=new YN(g,p,null,!0)),o.push(v.o=new YN(g,null,v,!1)),s.push(v=new YN(y,p,null,!1)),o.push(v.o=new YN(y,null,v,!0))}}),!!s.length){for(o.sort(t),Vle(s),Vle(o),a=0,u=o.length;a<u;++a)o[a].e=n=!n;for(var l=s[0],c,f;;){for(var d=l,h=!0;d.v;)if((d=d.n)===l)return;c=d.z,i.lineStart();do{if(d.v=d.o.v=!0,d.e){if(h)for(a=0,u=c.length;a<u;++a)i.point((f=c[a])[0],f[1]);else r(d.x,d.n.x,1,i);d=d.n}else{if(h)for(c=d.p.z,a=c.length-1;a>=0;--a)i.point((f=c[a])[0],f[1]);else r(d.x,d.p.x,-1,i);d=d.p}d=d.o,c=d.z,h=!h}while(!d.v);i.lineEnd()}}}function Vle(e){if(t=e.length){for(var t,n=0,r=e[0],i;++n<t;)r.n=i=e[n],i.p=r,r=i;r.n=i=e[0],i.p=r}}function R8(e){return Xn(e[0])<=Pn?e[0]:Sc(e[0])*((Xn(e[0])+Pn)%eu-Pn)}function Pht(e,t){var n=R8(t),r=t[1],i=Ft(r),s=[Ft(n),-zt(n),0],o=0,a=0,u=new Ka;i===1?r=Gi+Bt:i===-1&&(r=-Gi-Bt);for(var l=0,c=e.length;l<c;++l)if(d=(f=e[l]).length)for(var f,d,h=f[d-1],p=R8(h),m=h[1]/2+T3,g=Ft(m),y=zt(m),v=0;v<d;++v,p=w,g=S,y=T,h=_){var _=f[v],w=R8(_),E=_[1]/2+T3,S=Ft(E),T=zt(E),C=w-p,A=C>=0?1:-1,k=A*C,N=k>Pn,O=g*S;if(u.add(Mc(O*A*Ft(k),y*T+O*zt(k))),o+=N?C+A*eu:C,N^p>=n^w>=n){var D=GE(X1(h),X1(_));N3(D);var $=GE(s,D);N3($);var F=(N^C>=0?-1:1)*Ju($[2]);(r>F||r===F&&(D[0]||D[1]))&&(a+=N^C>=0?1:-1)}}return(o<-Bt||o<Bt&&u<-S3)^a&1}function bTe(e,t,n,r){return function(i){var s=t(i),o=yTe(),a=t(o),u=!1,l,c,f,d={point:h,lineStart:m,lineEnd:g,polygonStart:function(){d.point=y,d.lineStart=v,d.lineEnd=_,c=[],l=[]},polygonEnd:function(){d.point=h,d.lineStart=m,d.lineEnd=g,c=nSe(c);var w=Pht(l,r);c.length?(u||(i.polygonStart(),u=!0),vTe(c,Oht,w,n,i)):w&&(u||(i.polygonStart(),u=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),u&&(i.polygonEnd(),u=!1),c=l=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function h(w,E){e(w,E)&&i.point(w,E)}function p(w,E){s.point(w,E)}function m(){d.point=p,s.lineStart()}function g(){d.point=h,s.lineEnd()}function y(w,E){f.push([w,E]),a.point(w,E)}function v(){a.lineStart(),f=[]}function _(){y(f[0][0],f[0][1]),a.lineEnd();var w=a.clean(),E=o.result(),S,T=E.length,C,A,k;if(f.pop(),l.push(f),f=null,!!T){if(w&1){if(A=E[0],(C=A.length-1)>0){for(u||(i.polygonStart(),u=!0),i.lineStart(),S=0;S<C;++S)i.point((k=A[S])[0],k[1]);i.lineEnd()}return}T>1&&w&2&&E.push(E.pop().concat(E.shift())),c.push(E.filter(Dht))}}return d}}function Dht(e){return e.length>1}function Oht(e,t){return((e=e.x)[0]<0?e[1]-Gi-Bt:Gi-e[1])-((t=t.x)[0]<0?t[1]-Gi-Bt:Gi-t[1])}const Hle=bTe(function(){return!0},$ht,Lht,[-Pn,-Gi]);function $ht(e){var t=NaN,n=NaN,r=NaN,i;return{lineStart:function(){e.lineStart(),i=1},point:function(s,o){var a=s>0?Pn:-Pn,u=Xn(s-t);Xn(u-Pn)<Bt?(e.point(t,n=(n+o)/2>0?Gi:-Gi),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(a,n),e.point(s,n),i=0):r!==a&&u>=Pn&&(Xn(t-r)<Bt&&(t-=r*Bt),Xn(s-a)<Bt&&(s-=a*Bt),n=Mht(t,n,s,o),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(a,n),i=0),e.point(t=s,n=o),r=a},lineEnd:function(){e.lineEnd(),t=n=NaN},clean:function(){return 2-i}}}function Mht(e,t,n,r){var i,s,o=Ft(e-n);return Xn(o)>Bt?gS((Ft(t)*(s=zt(r))*Ft(n)-Ft(r)*(i=zt(t))*Ft(e))/(i*s*o)):(t+r)/2}function Lht(e,t,n,r){var i;if(e==null)i=n*Gi,r.point(-Pn,i),r.point(0,i),r.point(Pn,i),r.point(Pn,0),r.point(Pn,-i),r.point(0,-i),r.point(-Pn,-i),r.point(-Pn,0),r.point(-Pn,i);else if(Xn(e[0]-t[0])>Bt){var s=e[0]<t[0]?Pn:-Pn;i=n*s/2,r.point(-s,i),r.point(0,i),r.point(s,i)}else r.point(t[0],t[1])}function Fht(e){var t=zt(e),n=2*Rn,r=t>0,i=Xn(t)>Bt;function s(c,f,d,h){Nht(h,e,n,d,c,f)}function o(c,f){return zt(c)*zt(f)>t}function a(c){var f,d,h,p,m;return{lineStart:function(){p=h=!1,m=1},point:function(g,y){var v=[g,y],_,w=o(g,y),E=r?w?0:l(g,y):w?l(g+(g<0?Pn:-Pn),y):0;if(!f&&(p=h=w)&&c.lineStart(),w!==h&&(_=u(f,v),(!_||xD(f,_)||xD(v,_))&&(v[2]=1)),w!==h)m=0,w?(c.lineStart(),_=u(v,f),c.point(_[0],_[1])):(_=u(f,v),c.point(_[0],_[1],2),c.lineEnd()),f=_;else if(i&&f&&r^w){var S;!(E&d)&&(S=u(v,f,!0))&&(m=0,r?(c.lineStart(),c.point(S[0][0],S[0][1]),c.point(S[1][0],S[1][1]),c.lineEnd()):(c.point(S[1][0],S[1][1]),c.lineEnd(),c.lineStart(),c.point(S[0][0],S[0][1],3)))}w&&(!f||!xD(f,v))&&c.point(v[0],v[1]),f=v,h=w,d=E},lineEnd:function(){h&&c.lineEnd(),f=null},clean:function(){return m|(p&&h)<<1}}}function u(c,f,d){var h=X1(c),p=X1(f),m=[1,0,0],g=GE(h,p),y=WN(g,g),v=g[0],_=y-v*v;if(!_)return!d&&c;var w=t*y/_,E=-t*v/_,S=GE(m,g),T=GN(m,w),C=GN(g,E);k8(T,C);var A=S,k=WN(T,A),N=WN(A,A),O=k*k-N*(WN(T,T)-1);if(!(O<0)){var D=tu(O),$=GN(A,(-k-D)/N);if(k8($,T),$=R3($),!d)return $;var F=c[0],M=f[0],B=c[1],U=f[1],H;M<F&&(H=F,F=M,M=H);var P=M-F,z=Xn(P-Pn)<Bt,W=z||P<Bt;if(!z&&U<B&&(H=B,B=U,U=H),W?z?B+U>0^$[1]<(Xn($[0]-F)<Bt?B:U):B<=$[1]&&$[1]<=U:P>Pn^(F<=$[0]&&$[0]<=M)){var j=GN(A,(-k+D)/N);return k8(j,T),[$,R3(j)]}}}function l(c,f){var d=r?e:Pn-e,h=0;return c<-d?h|=1:c>d&&(h|=2),f<-d?h|=4:f>d&&(h|=8),h}return bTe(o,a,s,r?[0,-e]:[-Pn,e-Pn])}function jht(e,t,n,r,i,s){var o=e[0],a=e[1],u=t[0],l=t[1],c=0,f=1,d=u-o,h=l-a,p;if(p=n-o,!(!d&&p>0)){if(p/=d,d<0){if(p<c)return;p<f&&(f=p)}else if(d>0){if(p>f)return;p>c&&(c=p)}if(p=i-o,!(!d&&p<0)){if(p/=d,d<0){if(p>f)return;p>c&&(c=p)}else if(d>0){if(p<c)return;p<f&&(f=p)}if(p=r-a,!(!h&&p>0)){if(p/=h,h<0){if(p<c)return;p<f&&(f=p)}else if(h>0){if(p>f)return;p>c&&(c=p)}if(p=s-a,!(!h&&p<0)){if(p/=h,h<0){if(p>f)return;p>c&&(c=p)}else if(h>0){if(p<c)return;p<f&&(f=p)}return c>0&&(e[0]=o+c*d,e[1]=a+c*h),f<1&&(t[0]=o+f*d,t[1]=a+f*h),!0}}}}}var C2=1e9,KN=-C2;function _Te(e,t,n,r){function i(l,c){return e<=l&&l<=n&&t<=c&&c<=r}function s(l,c,f,d){var h=0,p=0;if(l==null||(h=o(l,f))!==(p=o(c,f))||u(l,c)<0^f>0)do d.point(h===0||h===3?e:n,h>1?r:t);while((h=(h+f+4)%4)!==p);else d.point(c[0],c[1])}function o(l,c){return Xn(l[0]-e)<Bt?c>0?0:3:Xn(l[0]-n)<Bt?c>0?2:1:Xn(l[1]-t)<Bt?c>0?1:0:c>0?3:2}function a(l,c){return u(l.x,c.x)}function u(l,c){var f=o(l,1),d=o(c,1);return f!==d?f-d:f===0?c[1]-l[1]:f===1?l[0]-c[0]:f===2?l[1]-c[1]:c[0]-l[0]}return function(l){var c=l,f=yTe(),d,h,p,m,g,y,v,_,w,E,S,T={point:C,lineStart:O,lineEnd:D,polygonStart:k,polygonEnd:N};function C(F,M){i(F,M)&&c.point(F,M)}function A(){for(var F=0,M=0,B=h.length;M<B;++M)for(var U=h[M],H=1,P=U.length,z=U[0],W,j,q=z[0],G=z[1];H<P;++H)W=q,j=G,z=U[H],q=z[0],G=z[1],j<=r?G>r&&(q-W)*(r-j)>(G-j)*(e-W)&&++F:G<=r&&(q-W)*(r-j)<(G-j)*(e-W)&&--F;return F}function k(){c=f,d=[],h=[],S=!0}function N(){var F=A(),M=S&&F,B=(d=nSe(d)).length;(M||B)&&(l.polygonStart(),M&&(l.lineStart(),s(null,null,1,l),l.lineEnd()),B&&vTe(d,a,F,s,l),l.polygonEnd()),c=l,d=h=p=null}function O(){T.point=$,h&&h.push(p=[]),E=!0,w=!1,v=_=NaN}function D(){d&&($(m,g),y&&w&&f.rejoin(),d.push(f.result())),T.point=C,w&&c.lineEnd()}function $(F,M){var B=i(F,M);if(h&&p.push([F,M]),E)m=F,g=M,y=B,E=!1,B&&(c.lineStart(),c.point(F,M));else if(B&&w)c.point(F,M);else{var U=[v=Math.max(KN,Math.min(C2,v)),_=Math.max(KN,Math.min(C2,_))],H=[F=Math.max(KN,Math.min(C2,F)),M=Math.max(KN,Math.min(C2,M))];jht(U,H,e,t,n,r)?(w||(c.lineStart(),c.point(U[0],U[1])),c.point(H[0],H[1]),B||c.lineEnd(),S=!1):B&&(c.lineStart(),c.point(F,M),S=!1)}v=F,_=M,w=B}return T}}function qle(e,t,n){var r=Mu(e,t-Bt,n).concat(t);return function(i){return r.map(function(s){return[i,s]})}}function Wle(e,t,n){var r=Mu(e,t-Bt,n).concat(t);return function(i){return r.map(function(s){return[s,i]})}}function Bht(){var e,t,n,r,i,s,o,a,u=10,l=u,c=90,f=360,d,h,p,m,g=2.5;function y(){return{type:"MultiLineString",coordinates:v()}}function v(){return Mu(qN(r/c)*c,n,c).map(p).concat(Mu(qN(a/f)*f,o,f).map(m)).concat(Mu(qN(t/u)*u,e,u).filter(function(_){return Xn(_%c)>Bt}).map(d)).concat(Mu(qN(s/l)*l,i,l).filter(function(_){return Xn(_%f)>Bt}).map(h))}return y.lines=function(){return v().map(function(_){return{type:"LineString",coordinates:_}})},y.outline=function(){return{type:"Polygon",coordinates:[p(r).concat(m(o).slice(1),p(n).reverse().slice(1),m(a).reverse().slice(1))]}},y.extent=function(_){return arguments.length?y.extentMajor(_).extentMinor(_):y.extentMinor()},y.extentMajor=function(_){return arguments.length?(r=+_[0][0],n=+_[1][0],a=+_[0][1],o=+_[1][1],r>n&&(_=r,r=n,n=_),a>o&&(_=a,a=o,o=_),y.precision(g)):[[r,a],[n,o]]},y.extentMinor=function(_){return arguments.length?(t=+_[0][0],e=+_[1][0],s=+_[0][1],i=+_[1][1],t>e&&(_=t,t=e,e=_),s>i&&(_=s,s=i,i=_),y.precision(g)):[[t,s],[e,i]]},y.step=function(_){return arguments.length?y.stepMajor(_).stepMinor(_):y.stepMinor()},y.stepMajor=function(_){return arguments.length?(c=+_[0],f=+_[1],y):[c,f]},y.stepMinor=function(_){return arguments.length?(u=+_[0],l=+_[1],y):[u,l]},y.precision=function(_){return arguments.length?(g=+_,d=qle(s,i,90),h=Wle(t,e,g),p=qle(a,o,90),m=Wle(r,n,g),y):g},y.extentMajor([[-180,-90+Bt],[180,90-Bt]]).extentMinor([[-180,-80-Bt],[180,80+Bt]])}const GA=e=>e;var N8=new Ka,hz=new Ka,wTe,ETe,pz,mz,Bp={point:ko,lineStart:ko,lineEnd:ko,polygonStart:function(){Bp.lineStart=Uht,Bp.lineEnd=Vht},polygonEnd:function(){Bp.lineStart=Bp.lineEnd=Bp.point=ko,N8.add(Xn(hz)),hz=new Ka},result:function(){var e=N8/2;return N8=new Ka,e}};function Uht(){Bp.point=zht}function zht(e,t){Bp.point=xTe,wTe=pz=e,ETe=mz=t}function xTe(e,t){hz.add(mz*e-pz*t),pz=e,mz=t}function Vht(){xTe(wTe,ETe)}var YE=1/0,j3=YE,YA=-YE,B3=YA,U3={point:Hht,lineStart:ko,lineEnd:ko,polygonStart:ko,polygonEnd:ko,result:function(){var e=[[YE,j3],[YA,B3]];return YA=B3=-(j3=YE=1/0),e}};function Hht(e,t){e<YE&&(YE=e),e>YA&&(YA=e),t<j3&&(j3=t),t>B3&&(B3=t)}var gz=0,yz=0,A2=0,z3=0,V3=0,kw=0,vz=0,bz=0,I2=0,STe,TTe,Vd,Hd,wc={point:Q1,lineStart:Gle,lineEnd:Yle,polygonStart:function(){wc.lineStart=Ght,wc.lineEnd=Yht},polygonEnd:function(){wc.point=Q1,wc.lineStart=Gle,wc.lineEnd=Yle},result:function(){var e=I2?[vz/I2,bz/I2]:kw?[z3/kw,V3/kw]:A2?[gz/A2,yz/A2]:[NaN,NaN];return gz=yz=A2=z3=V3=kw=vz=bz=I2=0,e}};function Q1(e,t){gz+=e,yz+=t,++A2}function Gle(){wc.point=qht}function qht(e,t){wc.point=Wht,Q1(Vd=e,Hd=t)}function Wht(e,t){var n=e-Vd,r=t-Hd,i=tu(n*n+r*r);z3+=i*(Vd+e)/2,V3+=i*(Hd+t)/2,kw+=i,Q1(Vd=e,Hd=t)}function Yle(){wc.point=Q1}function Ght(){wc.point=Kht}function Yht(){CTe(STe,TTe)}function Kht(e,t){wc.point=CTe,Q1(STe=Vd=e,TTe=Hd=t)}function CTe(e,t){var n=e-Vd,r=t-Hd,i=tu(n*n+r*r);z3+=i*(Vd+e)/2,V3+=i*(Hd+t)/2,kw+=i,i=Hd*e-Vd*t,vz+=i*(Vd+e),bz+=i*(Hd+t),I2+=i*3,Q1(Vd=e,Hd=t)}function ATe(e){this._context=e}ATe.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._context.moveTo(e,t),this._point=1;break}case 1:{this._context.lineTo(e,t);break}default:{this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,eu);break}}},result:ko};var _z=new Ka,P8,ITe,kTe,k2,R2,KA={point:ko,lineStart:function(){KA.point=Xht},lineEnd:function(){P8&&RTe(ITe,kTe),KA.point=ko},polygonStart:function(){P8=!0},polygonEnd:function(){P8=null},result:function(){var e=+_z;return _z=new Ka,e}};function Xht(e,t){KA.point=RTe,ITe=k2=e,kTe=R2=t}function RTe(e,t){k2-=e,R2-=t,_z.add(tu(k2*k2+R2*R2)),k2=e,R2=t}let Kle,H3,Xle,Qle;class Jle{constructor(t){this._append=t==null?NTe:Qht(t),this._radius=4.5,this._=""}pointRadius(t){return this._radius=+t,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(t,n){switch(this._point){case 0:{this._append`M${t},${n}`,this._point=1;break}case 1:{this._append`L${t},${n}`;break}default:{if(this._append`M${t},${n}`,this._radius!==Xle||this._append!==H3){const r=this._radius,i=this._;this._="",this._append`m0,${r}a${r},${r} 0 1,1 0,${-2*r}a${r},${r} 0 1,1 0,${2*r}z`,Xle=r,H3=this._append,Qle=this._,this._=i}this._+=Qle;break}}}result(){const t=this._;return this._="",t.length?t:null}}function NTe(e){let t=1;this._+=e[0];for(const n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function Qht(e){const t=Math.floor(e);if(!(t>=0))throw new RangeError(`invalid digits: ${e}`);if(t>15)return NTe;if(t!==Kle){const n=10**t;Kle=t,H3=function(i){let s=1;this._+=i[0];for(const o=i.length;s<o;++s)this._+=Math.round(arguments[s]*n)/n+i[s]}}return H3}function PTe(e,t){let n=3,r=4.5,i,s;function o(a){return a&&(typeof r=="function"&&s.pointRadius(+r.apply(this,arguments)),jp(a,i(s))),s.result()}return o.area=function(a){return jp(a,i(Bp)),Bp.result()},o.measure=function(a){return jp(a,i(KA)),KA.result()},o.bounds=function(a){return jp(a,i(U3)),U3.result()},o.centroid=function(a){return jp(a,i(wc)),wc.result()},o.projection=function(a){return arguments.length?(i=a==null?(e=null,GA):(e=a).stream,o):e},o.context=function(a){return arguments.length?(s=a==null?(t=null,new Jle(n)):new ATe(t=a),typeof r!="function"&&s.pointRadius(r),o):t},o.pointRadius=function(a){return arguments.length?(r=typeof a=="function"?a:(s.pointRadius(+a),+a),o):r},o.digits=function(a){if(!arguments.length)return n;if(a==null)n=null;else{const u=Math.floor(a);if(!(u>=0))throw new RangeError(`invalid digits: ${a}`);n=u}return t===null&&(s=new Jle(n)),o},o.projection(e).digits(n).context(t)}function R6(e){return function(t){var n=new wz;for(var r in e)n[r]=e[r];return n.stream=t,n}}function wz(){}wz.prototype={constructor:wz,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function $K(e,t,n){var r=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),r!=null&&e.clipExtent(null),jp(n,e.stream(U3)),t(U3.result()),r!=null&&e.clipExtent(r),e}function N6(e,t,n){return $K(e,function(r){var i=t[1][0]-t[0][0],s=t[1][1]-t[0][1],o=Math.min(i/(r[1][0]-r[0][0]),s/(r[1][1]-r[0][1])),a=+t[0][0]+(i-o*(r[1][0]+r[0][0]))/2,u=+t[0][1]+(s-o*(r[1][1]+r[0][1]))/2;e.scale(150*o).translate([a,u])},n)}function MK(e,t,n){return N6(e,[[0,0],t],n)}function LK(e,t,n){return $K(e,function(r){var i=+t,s=i/(r[1][0]-r[0][0]),o=(i-s*(r[1][0]+r[0][0]))/2,a=-s*r[0][1];e.scale(150*s).translate([o,a])},n)}function FK(e,t,n){return $K(e,function(r){var i=+t,s=i/(r[1][1]-r[0][1]),o=-s*r[0][0],a=(i-s*(r[1][1]+r[0][1]))/2;e.scale(150*s).translate([o,a])},n)}var Zle=16,Jht=zt(30*Rn);function ece(e,t){return+t?ept(e,t):Zht(e)}function Zht(e){return R6({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}function ept(e,t){function n(r,i,s,o,a,u,l,c,f,d,h,p,m,g){var y=l-r,v=c-i,_=y*y+v*v;if(_>4*t&&m--){var w=o+d,E=a+h,S=u+p,T=tu(w*w+E*E+S*S),C=Ju(S/=T),A=Xn(Xn(S)-1)<Bt||Xn(s-f)<Bt?(s+f)/2:Mc(E,w),k=e(A,C),N=k[0],O=k[1],D=N-r,$=O-i,F=v*D-y*$;(F*F/_>t||Xn((y*D+v*$)/_-.5)>.3||o*d+a*h+u*p<Jht)&&(n(r,i,s,o,a,u,N,O,A,w/=T,E/=T,S,m,g),g.point(N,O),n(N,O,A,w,E,S,l,c,f,d,h,p,m,g))}}return function(r){var i,s,o,a,u,l,c,f,d,h,p,m,g={point:y,lineStart:v,lineEnd:w,polygonStart:function(){r.polygonStart(),g.lineStart=E},polygonEnd:function(){r.polygonEnd(),g.lineStart=v}};function y(C,A){C=e(C,A),r.point(C[0],C[1])}function v(){f=NaN,g.point=_,r.lineStart()}function _(C,A){var k=X1([C,A]),N=e(C,A);n(f,d,c,h,p,m,f=N[0],d=N[1],c=C,h=k[0],p=k[1],m=k[2],Zle,r),r.point(f,d)}function w(){g.point=y,r.lineEnd()}function E(){v(),g.point=S,g.lineEnd=T}function S(C,A){_(i=C,A),s=f,o=d,a=h,u=p,l=m,g.point=_}function T(){n(f,d,c,h,p,m,s,o,i,a,u,l,Zle,r),g.lineEnd=w,w()}return g}}var tpt=R6({point:function(e,t){this.stream.point(e*Rn,t*Rn)}});function npt(e){return R6({point:function(t,n){var r=e(t,n);return this.stream.point(r[0],r[1])}})}function rpt(e,t,n,r,i){function s(o,a){return o*=r,a*=i,[t+e*o,n-e*a]}return s.invert=function(o,a){return[(o-t)/e*r,(n-a)/e*i]},s}function tce(e,t,n,r,i,s){if(!s)return rpt(e,t,n,r,i);var o=zt(s),a=Ft(s),u=o*e,l=a*e,c=o/e,f=a/e,d=(a*n-o*t)/e,h=(a*t+o*n)/e;function p(m,g){return m*=r,g*=i,[u*m-l*g+t,n-l*m-u*g]}return p.invert=function(m,g){return[r*(c*m-f*g+d),i*(h-f*m-c*g)]},p}function Zh(e){return DTe(function(){return e})()}function DTe(e){var t,n=150,r=480,i=250,s=0,o=0,a=0,u=0,l=0,c,f=0,d=1,h=1,p=null,m=Hle,g=null,y,v,_,w=GA,E=.5,S,T,C,A,k;function N(F){return C(F[0]*Rn,F[1]*Rn)}function O(F){return F=C.invert(F[0],F[1]),F&&[F[0]*is,F[1]*is]}N.stream=function(F){return A&&k===F?A:A=tpt(npt(c)(m(S(w(k=F)))))},N.preclip=function(F){return arguments.length?(m=F,p=void 0,$()):m},N.postclip=function(F){return arguments.length?(w=F,g=y=v=_=null,$()):w},N.clipAngle=function(F){return arguments.length?(m=+F?Fht(p=F*Rn):(p=null,Hle),$()):p*is},N.clipExtent=function(F){return arguments.length?(w=F==null?(g=y=v=_=null,GA):_Te(g=+F[0][0],y=+F[0][1],v=+F[1][0],_=+F[1][1]),$()):g==null?null:[[g,y],[v,_]]},N.scale=function(F){return arguments.length?(n=+F,D()):n},N.translate=function(F){return arguments.length?(r=+F[0],i=+F[1],D()):[r,i]},N.center=function(F){return arguments.length?(s=F[0]%360*Rn,o=F[1]%360*Rn,D()):[s*is,o*is]},N.rotate=function(F){return arguments.length?(a=F[0]%360*Rn,u=F[1]%360*Rn,l=F.length>2?F[2]%360*Rn:0,D()):[a*is,u*is,l*is]},N.angle=function(F){return arguments.length?(f=F%360*Rn,D()):f*is},N.reflectX=function(F){return arguments.length?(d=F?-1:1,D()):d<0},N.reflectY=function(F){return arguments.length?(h=F?-1:1,D()):h<0},N.precision=function(F){return arguments.length?(S=ece(T,E=F*F),$()):tu(E)},N.fitExtent=function(F,M){return N6(N,F,M)},N.fitSize=function(F,M){return MK(N,F,M)},N.fitWidth=function(F,M){return LK(N,F,M)},N.fitHeight=function(F,M){return FK(N,F,M)};function D(){var F=tce(n,0,0,d,h,f).apply(null,t(s,o)),M=tce(n,r-F[0],i-F[1],d,h,f);return c=gTe(a,u,l),T=fz(t,M),C=fz(c,T),S=ece(T,E),$()}function $(){return A=k=null,N}return function(){return t=e.apply(this,arguments),N.invert=t.invert&&O,D()}}function jK(e){var t=0,n=Pn/3,r=DTe(e),i=r(t,n);return i.parallels=function(s){return arguments.length?r(t=s[0]*Rn,n=s[1]*Rn):[t*is,n*is]},i}function ipt(e){var t=zt(e);function n(r,i){return[r*t,Ft(i)/t]}return n.invert=function(r,i){return[r/t,Ju(i*t)]},n}function spt(e,t){var n=Ft(e),r=(n+Ft(t))/2;if(Xn(r)<Bt)return ipt(e);var i=1+n*(2*r-n),s=tu(i)/r;function o(a,u){var l=tu(i-2*r*Ft(u))/r;return[l*Ft(a*=r),s-l*zt(a)]}return o.invert=function(a,u){var l=s-u,c=Mc(a,Xn(l))*Sc(l);return l*r<0&&(c-=Pn*Sc(a)*Sc(l)),[c/r,Ju((i-(a*a+l*l)*r*r)/(2*r))]},o}function q3(){return jK(spt).scale(155.424).center([0,33.6442])}function OTe(){return q3().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function opt(e){var t=e.length;return{point:function(n,r){for(var i=-1;++i<t;)e[i].point(n,r)},sphere:function(){for(var n=-1;++n<t;)e[n].sphere()},lineStart:function(){for(var n=-1;++n<t;)e[n].lineStart()},lineEnd:function(){for(var n=-1;++n<t;)e[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<t;)e[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<t;)e[n].polygonEnd()}}}function apt(){var e,t,n=OTe(),r,i=q3().rotate([154,0]).center([-2,58.5]).parallels([55,65]),s,o=q3().rotate([157,0]).center([-3,19.9]).parallels([8,18]),a,u,l={point:function(d,h){u=[d,h]}};function c(d){var h=d[0],p=d[1];return u=null,r.point(h,p),u||(s.point(h,p),u)||(a.point(h,p),u)}c.invert=function(d){var h=n.scale(),p=n.translate(),m=(d[0]-p[0])/h,g=(d[1]-p[1])/h;return(g>=.12&&g<.234&&m>=-.425&&m<-.214?i:g>=.166&&g<.234&&m>=-.214&&m<-.115?o:n).invert(d)},c.stream=function(d){return e&&t===d?e:e=opt([n.stream(t=d),i.stream(d),o.stream(d)])},c.precision=function(d){return arguments.length?(n.precision(d),i.precision(d),o.precision(d),f()):n.precision()},c.scale=function(d){return arguments.length?(n.scale(d),i.scale(d*.35),o.scale(d),c.translate(n.translate())):n.scale()},c.translate=function(d){if(!arguments.length)return n.translate();var h=n.scale(),p=+d[0],m=+d[1];return r=n.translate(d).clipExtent([[p-.455*h,m-.238*h],[p+.455*h,m+.238*h]]).stream(l),s=i.translate([p-.307*h,m+.201*h]).clipExtent([[p-.425*h+Bt,m+.12*h+Bt],[p-.214*h-Bt,m+.234*h-Bt]]).stream(l),a=o.translate([p-.205*h,m+.212*h]).clipExtent([[p-.214*h+Bt,m+.166*h+Bt],[p-.115*h-Bt,m+.234*h-Bt]]).stream(l),f()},c.fitExtent=function(d,h){return N6(c,d,h)},c.fitSize=function(d,h){return MK(c,d,h)},c.fitWidth=function(d,h){return LK(c,d,h)},c.fitHeight=function(d,h){return FK(c,d,h)};function f(){return e=t=null,c}return c.scale(1070)}function $Te(e){return function(t,n){var r=zt(t),i=zt(n),s=e(r*i);return s===1/0?[2,0]:[s*i*Ft(t),s*Ft(n)]}}function kk(e){return function(t,n){var r=tu(t*t+n*n),i=e(r),s=Ft(i),o=zt(i);return[Mc(t*s,r*o),Ju(r&&n*s/r)]}}var MTe=$Te(function(e){return tu(2/(1+e))});MTe.invert=kk(function(e){return 2*Ju(e/2)});function upt(){return Zh(MTe).scale(124.75).clipAngle(180-.001)}var LTe=$Te(function(e){return(e=sTe(e))&&e/Ft(e)});LTe.invert=kk(function(e){return e});function lpt(){return Zh(LTe).scale(79.4188).clipAngle(180-.001)}function P6(e,t){return[e,C3(DK((Gi+t)/2))]}P6.invert=function(e,t){return[e,2*gS(iTe(t))-Gi]};function cpt(){return FTe(P6).scale(961/eu)}function FTe(e){var t=Zh(e),n=t.center,r=t.scale,i=t.translate,s=t.clipExtent,o=null,a,u,l;t.scale=function(f){return arguments.length?(r(f),c()):r()},t.translate=function(f){return arguments.length?(i(f),c()):i()},t.center=function(f){return arguments.length?(n(f),c()):n()},t.clipExtent=function(f){return arguments.length?(f==null?o=a=u=l=null:(o=+f[0][0],a=+f[0][1],u=+f[1][0],l=+f[1][1]),c()):o==null?null:[[o,a],[u,l]]};function c(){var f=Pn*r(),d=t(Rht(t.rotate()).invert([0,0]));return s(o==null?[[d[0]-f,d[1]-f],[d[0]+f,d[1]+f]]:e===P6?[[Math.max(d[0]-f,o),a],[Math.min(d[0]+f,u),l]]:[[o,Math.max(d[1]-f,a)],[u,Math.min(d[1]+f,l)]])}return c()}function XN(e){return DK((Gi+e)/2)}function fpt(e,t){var n=zt(e),r=e===t?Ft(e):C3(n/zt(t))/C3(XN(t)/XN(e)),i=n*I8(XN(e),r)/r;if(!r)return P6;function s(o,a){i>0?a<-Gi+Bt&&(a=-Gi+Bt):a>Gi-Bt&&(a=Gi-Bt);var u=i/I8(XN(a),r);return[u*Ft(r*o),i-u*zt(r*o)]}return s.invert=function(o,a){var u=i-a,l=Sc(r)*tu(o*o+u*u),c=Mc(o,Xn(u))*Sc(u);return u*r<0&&(c-=Pn*Sc(o)*Sc(u)),[c/r,2*gS(I8(i/l,1/r))-Gi]},s}function dpt(){return jK(fpt).scale(109.5).parallels([30,30])}function W3(e,t){return[e,t]}W3.invert=W3;function hpt(){return Zh(W3).scale(152.63)}function ppt(e,t){var n=zt(e),r=e===t?Ft(e):(n-zt(t))/(t-e),i=n/r+e;if(Xn(r)<Bt)return W3;function s(o,a){var u=i-a,l=r*o;return[u*Ft(l),i-u*zt(l)]}return s.invert=function(o,a){var u=i-a,l=Mc(o,Xn(u))*Sc(u);return u*r<0&&(l-=Pn*Sc(o)*Sc(u)),[l/r,i-Sc(r)*tu(o*o+u*u)]},s}function mpt(){return jK(ppt).scale(131.154).center([0,13.9389])}var AC=1.340264,IC=-.081106,kC=893e-6,RC=.003796,G3=tu(3)/2,gpt=12;function jTe(e,t){var n=Ju(G3*Ft(t)),r=n*n,i=r*r*r;return[e*zt(n)/(G3*(AC+3*IC*r+i*(7*kC+9*RC*r))),n*(AC+IC*r+i*(kC+RC*r))]}jTe.invert=function(e,t){for(var n=t,r=n*n,i=r*r*r,s=0,o,a,u;s<gpt&&(a=n*(AC+IC*r+i*(kC+RC*r))-t,u=AC+3*IC*r+i*(7*kC+9*RC*r),n-=o=a/u,r=n*n,i=r*r*r,!(Xn(o)<S3));++s);return[G3*e*(AC+3*IC*r+i*(7*kC+9*RC*r))/zt(n),Ju(Ft(n)/G3)]};function ypt(){return Zh(jTe).scale(177.158)}function BTe(e,t){var n=zt(t),r=zt(e)*n;return[n*Ft(e)/r,Ft(t)/r]}BTe.invert=kk(gS);function vpt(){return Zh(BTe).scale(144.049).clipAngle(60)}function bpt(){var e=1,t=0,n=0,r=1,i=1,s=0,o,a,u=null,l,c,f,d=1,h=1,p=R6({point:function(w,E){var S=_([w,E]);this.stream.point(S[0],S[1])}}),m=GA,g,y;function v(){return d=e*r,h=e*i,g=y=null,_}function _(w){var E=w[0]*d,S=w[1]*h;if(s){var T=S*o-E*a;E=E*o+S*a,S=T}return[E+t,S+n]}return _.invert=function(w){var E=w[0]-t,S=w[1]-n;if(s){var T=S*o+E*a;E=E*o-S*a,S=T}return[E/d,S/h]},_.stream=function(w){return g&&y===w?g:g=p(m(y=w))},_.postclip=function(w){return arguments.length?(m=w,u=l=c=f=null,v()):m},_.clipExtent=function(w){return arguments.length?(m=w==null?(u=l=c=f=null,GA):_Te(u=+w[0][0],l=+w[0][1],c=+w[1][0],f=+w[1][1]),v()):u==null?null:[[u,l],[c,f]]},_.scale=function(w){return arguments.length?(e=+w,v()):e},_.translate=function(w){return arguments.length?(t=+w[0],n=+w[1],v()):[t,n]},_.angle=function(w){return arguments.length?(s=w%360*Rn,a=Ft(s),o=zt(s),v()):s*is},_.reflectX=function(w){return arguments.length?(r=w?-1:1,v()):r<0},_.reflectY=function(w){return arguments.length?(i=w?-1:1,v()):i<0},_.fitExtent=function(w,E){return N6(_,w,E)},_.fitSize=function(w,E){return MK(_,w,E)},_.fitWidth=function(w,E){return LK(_,w,E)},_.fitHeight=function(w,E){return FK(_,w,E)},_}function UTe(e,t){var n=t*t,r=n*n;return[e*(.8707-.131979*n+r*(-.013791+r*(.003971*n-.001529*r))),t*(1.007226+n*(.015085+r*(-.044475+.028874*n-.005916*r)))]}UTe.invert=function(e,t){var n=t,r=25,i;do{var s=n*n,o=s*s;n-=i=(n*(1.007226+s*(.015085+o*(-.044475+.028874*s-.005916*o)))-t)/(1.007226+s*(.015085*3+o*(-.044475*7+.028874*9*s-.005916*11*o)))}while(Xn(i)>Bt&&--r>0);return[e/(.8707+(s=n*n)*(-.131979+s*(-.013791+s*s*s*(.003971-.001529*s)))),n]};function _pt(){return Zh(UTe).scale(175.295)}function zTe(e,t){return[zt(t)*Ft(e),Ft(t)]}zTe.invert=kk(Ju);function wpt(){return Zh(zTe).scale(249.5).clipAngle(90+Bt)}function VTe(e,t){var n=zt(t),r=1+zt(e)*n;return[n*Ft(e)/r,Ft(t)/r]}VTe.invert=kk(function(e){return 2*gS(e)});function Ept(){return Zh(VTe).scale(250).clipAngle(142)}function HTe(e,t){return[C3(DK((Gi+t)/2)),-e]}HTe.invert=function(e,t){return[-t,2*gS(iTe(e))-Gi]};function xpt(){var e=FTe(HTe),t=e.center,n=e.rotate;return e.center=function(r){return arguments.length?t([-r[1],r[0]]):(r=t(),[r[1],-r[0]])},e.rotate=function(r){return arguments.length?n([r[0],r[1],r.length>2?r[2]+90:90]):(r=n(),[r[0],r[1],r[2]-90])},n([0,0,90]).scale(159.155)}function Spt(e,t){return e.parent===t.parent?1:2}function Tpt(e){return e.reduce(Cpt,0)/e.length}function Cpt(e,t){return e+t.x}function Apt(e){return 1+e.reduce(Ipt,0)}function Ipt(e,t){return Math.max(e,t.y)}function kpt(e){for(var t;t=e.children;)e=t[0];return e}function Rpt(e){for(var t;t=e.children;)e=t[t.length-1];return e}function Npt(){var e=Spt,t=1,n=1,r=!1;function i(s){var o,a=0;s.eachAfter(function(d){var h=d.children;h?(d.x=Tpt(h),d.y=Apt(h)):(d.x=o?a+=e(d,o):0,d.y=0,o=d)});var u=kpt(s),l=Rpt(s),c=u.x-e(u,l)/2,f=l.x+e(l,u)/2;return s.eachAfter(r?function(d){d.x=(d.x-s.x)*t,d.y=(s.y-d.y)*n}:function(d){d.x=(d.x-c)/(f-c)*t,d.y=(1-(s.y?d.y/s.y:1))*n})}return i.separation=function(s){return arguments.length?(e=s,i):e},i.size=function(s){return arguments.length?(r=!1,t=+s[0],n=+s[1],i):r?null:[t,n]},i.nodeSize=function(s){return arguments.length?(r=!0,t=+s[0],n=+s[1],i):r?[t,n]:null},i}function Ppt(e){var t=0,n=e.children,r=n&&n.length;if(!r)t=1;else for(;--r>=0;)t+=n[r].value;e.value=t}function Dpt(){return this.eachAfter(Ppt)}function Opt(e,t){let n=-1;for(const r of this)e.call(t,r,++n,this);return this}function $pt(e,t){for(var n=this,r=[n],i,s,o=-1;n=r.pop();)if(e.call(t,n,++o,this),i=n.children)for(s=i.length-1;s>=0;--s)r.push(i[s]);return this}function Mpt(e,t){for(var n=this,r=[n],i=[],s,o,a,u=-1;n=r.pop();)if(i.push(n),s=n.children)for(o=0,a=s.length;o<a;++o)r.push(s[o]);for(;n=i.pop();)e.call(t,n,++u,this);return this}function Lpt(e,t){let n=-1;for(const r of this)if(e.call(t,r,++n,this))return r}function Fpt(e){return this.eachAfter(function(t){for(var n=+e(t.data)||0,r=t.children,i=r&&r.length;--i>=0;)n+=r[i].value;t.value=n})}function jpt(e){return this.eachBefore(function(t){t.children&&t.children.sort(e)})}function Bpt(e){for(var t=this,n=Upt(t,e),r=[t];t!==n;)t=t.parent,r.push(t);for(var i=r.length;e!==n;)r.splice(i,0,e),e=e.parent;return r}function Upt(e,t){if(e===t)return e;var n=e.ancestors(),r=t.ancestors(),i=null;for(e=n.pop(),t=r.pop();e===t;)i=e,e=n.pop(),t=r.pop();return i}function zpt(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t}function Vpt(){return Array.from(this)}function Hpt(){var e=[];return this.eachBefore(function(t){t.children||e.push(t)}),e}function qpt(){var e=this,t=[];return e.each(function(n){n!==e&&t.push({source:n.parent,target:n})}),t}function*Wpt(){var e=this,t,n=[e],r,i,s;do for(t=n.reverse(),n=[];e=t.pop();)if(yield e,r=e.children)for(i=0,s=r.length;i<s;++i)n.push(r[i]);while(n.length)}function D6(e,t){e instanceof Map?(e=[void 0,e],t===void 0&&(t=Kpt)):t===void 0&&(t=Ypt);for(var n=new KE(e),r,i=[n],s,o,a,u;r=i.pop();)if((o=t(r.data))&&(u=(o=Array.from(o)).length))for(r.children=o,a=u-1;a>=0;--a)i.push(s=o[a]=new KE(o[a])),s.parent=r,s.depth=r.depth+1;return n.eachBefore(qTe)}function Gpt(){return D6(this).eachBefore(Xpt)}function Ypt(e){return e.children}function Kpt(e){return Array.isArray(e)?e[1]:null}function Xpt(e){e.data.value!==void 0&&(e.value=e.data.value),e.data=e.data.data}function qTe(e){var t=0;do e.height=t;while((e=e.parent)&&e.height<++t)}function KE(e){this.data=e,this.depth=this.height=0,this.parent=null}KE.prototype=D6.prototype={constructor:KE,count:Dpt,each:Opt,eachAfter:Mpt,eachBefore:$pt,find:Lpt,sum:Fpt,sort:jpt,path:Bpt,ancestors:zpt,descendants:Vpt,leaves:Hpt,links:qpt,copy:Gpt,[Symbol.iterator]:Wpt};function SD(e){return e==null?null:WTe(e)}function WTe(e){if(typeof e!="function")throw new Error;return e}function Hv(){return 0}function rw(e){return function(){return e}}const Qpt=1664525,Jpt=1013904223,nce=4294967296;function Zpt(){let e=1;return()=>(e=(Qpt*e+Jpt)%nce)/nce}function emt(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function tmt(e,t){let n=e.length,r,i;for(;n;)i=t()*n--|0,r=e[n],e[n]=e[i],e[i]=r;return e}function nmt(e,t){for(var n=0,r=(e=tmt(Array.from(e),t)).length,i=[],s,o;n<r;)s=e[n],o&&GTe(o,s)?++n:(o=imt(i=rmt(i,s)),n=0);return o}function rmt(e,t){var n,r;if(D8(t,e))return[t];for(n=0;n<e.length;++n)if(QN(t,e[n])&&D8(N2(e[n],t),e))return[e[n],t];for(n=0;n<e.length-1;++n)for(r=n+1;r<e.length;++r)if(QN(N2(e[n],e[r]),t)&&QN(N2(e[n],t),e[r])&&QN(N2(e[r],t),e[n])&&D8(YTe(e[n],e[r],t),e))return[e[n],e[r],t];throw new Error}function QN(e,t){var n=e.r-t.r,r=t.x-e.x,i=t.y-e.y;return n<0||n*n<r*r+i*i}function GTe(e,t){var n=e.r-t.r+Math.max(e.r,t.r,1)*1e-9,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function D8(e,t){for(var n=0;n<t.length;++n)if(!GTe(e,t[n]))return!1;return!0}function imt(e){switch(e.length){case 1:return smt(e[0]);case 2:return N2(e[0],e[1]);case 3:return YTe(e[0],e[1],e[2])}}function smt(e){return{x:e.x,y:e.y,r:e.r}}function N2(e,t){var n=e.x,r=e.y,i=e.r,s=t.x,o=t.y,a=t.r,u=s-n,l=o-r,c=a-i,f=Math.sqrt(u*u+l*l);return{x:(n+s+u/f*c)/2,y:(r+o+l/f*c)/2,r:(f+i+a)/2}}function YTe(e,t,n){var r=e.x,i=e.y,s=e.r,o=t.x,a=t.y,u=t.r,l=n.x,c=n.y,f=n.r,d=r-o,h=r-l,p=i-a,m=i-c,g=u-s,y=f-s,v=r*r+i*i-s*s,_=v-o*o-a*a+u*u,w=v-l*l-c*c+f*f,E=h*p-d*m,S=(p*w-m*_)/(E*2)-r,T=(m*g-p*y)/E,C=(h*_-d*w)/(E*2)-i,A=(d*y-h*g)/E,k=T*T+A*A-1,N=2*(s+S*T+C*A),O=S*S+C*C-s*s,D=-(Math.abs(k)>1e-6?(N+Math.sqrt(N*N-4*k*O))/(2*k):O/N);return{x:r+S+T*D,y:i+C+A*D,r:D}}function rce(e,t,n){var r=e.x-t.x,i,s,o=e.y-t.y,a,u,l=r*r+o*o;l?(s=t.r+n.r,s*=s,u=e.r+n.r,u*=u,s>u?(i=(l+u-s)/(2*l),a=Math.sqrt(Math.max(0,u/l-i*i)),n.x=e.x-i*r-a*o,n.y=e.y-i*o+a*r):(i=(l+s-u)/(2*l),a=Math.sqrt(Math.max(0,s/l-i*i)),n.x=t.x+i*r-a*o,n.y=t.y+i*o+a*r)):(n.x=t.x+n.r,n.y=t.y)}function ice(e,t){var n=e.r+t.r-1e-6,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function sce(e){var t=e._,n=e.next._,r=t.r+n.r,i=(t.x*n.r+n.x*t.r)/r,s=(t.y*n.r+n.y*t.r)/r;return i*i+s*s}function JN(e){this._=e,this.next=null,this.previous=null}function omt(e,t){if(!(s=(e=emt(e)).length))return 0;var n,r,i,s,o,a,u,l,c,f,d;if(n=e[0],n.x=0,n.y=0,!(s>1))return n.r;if(r=e[1],n.x=-r.r,r.x=n.r,r.y=0,!(s>2))return n.r+r.r;rce(r,n,i=e[2]),n=new JN(n),r=new JN(r),i=new JN(i),n.next=i.previous=r,r.next=n.previous=i,i.next=r.previous=n;e:for(u=3;u<s;++u){rce(n._,r._,i=e[u]),i=new JN(i),l=r.next,c=n.previous,f=r._.r,d=n._.r;do if(f<=d){if(ice(l._,i._)){r=l,n.next=r,r.previous=n,--u;continue e}f+=l._.r,l=l.next}else{if(ice(c._,i._)){n=c,n.next=r,r.previous=n,--u;continue e}d+=c._.r,c=c.previous}while(l!==c.next);for(i.previous=n,i.next=r,n.next=r.previous=r=i,o=sce(n);(i=i.next)!==r;)(a=sce(i))<o&&(n=i,o=a);r=n.next}for(n=[r._],i=r;(i=i.next)!==r;)n.push(i._);for(i=nmt(n,t),u=0;u<s;++u)n=e[u],n.x-=i.x,n.y-=i.y;return i.r}function amt(e){return Math.sqrt(e.value)}function KTe(){var e=null,t=1,n=1,r=Hv;function i(s){const o=Zpt();return s.x=t/2,s.y=n/2,e?s.eachBefore(oce(e)).eachAfter(O8(r,.5,o)).eachBefore(ace(1)):s.eachBefore(oce(amt)).eachAfter(O8(Hv,1,o)).eachAfter(O8(r,s.r/Math.min(t,n),o)).eachBefore(ace(Math.min(t,n)/(2*s.r))),s}return i.radius=function(s){return arguments.length?(e=SD(s),i):e},i.size=function(s){return arguments.length?(t=+s[0],n=+s[1],i):[t,n]},i.padding=function(s){return arguments.length?(r=typeof s=="function"?s:rw(+s),i):r},i}function oce(e){return function(t){t.children||(t.r=Math.max(0,+e(t)||0))}}function O8(e,t,n){return function(r){if(i=r.children){var i,s,o=i.length,a=e(r)*t||0,u;if(a)for(s=0;s<o;++s)i[s].r+=a;if(u=omt(i,n),a)for(s=0;s<o;++s)i[s].r-=a;r.r=u+a}}}function ace(e){return function(t){var n=t.parent;t.r*=e,n&&(t.x=n.x+e*t.x,t.y=n.y+e*t.y)}}function XTe(e){e.x0=Math.round(e.x0),e.y0=Math.round(e.y0),e.x1=Math.round(e.x1),e.y1=Math.round(e.y1)}function Rk(e,t,n,r,i){for(var s=e.children,o,a=-1,u=s.length,l=e.value&&(r-t)/e.value;++a<u;)o=s[a],o.y0=n,o.y1=i,o.x0=t,o.x1=t+=o.value*l}function umt(){var e=1,t=1,n=0,r=!1;function i(o){var a=o.height+1;return o.x0=o.y0=n,o.x1=e,o.y1=t/a,o.eachBefore(s(t,a)),r&&o.eachBefore(XTe),o}function s(o,a){return function(u){u.children&&Rk(u,u.x0,o*(u.depth+1)/a,u.x1,o*(u.depth+2)/a);var l=u.x0,c=u.y0,f=u.x1-n,d=u.y1-n;f<l&&(l=f=(l+f)/2),d<c&&(c=d=(c+d)/2),u.x0=l,u.y0=c,u.x1=f,u.y1=d}}return i.round=function(o){return arguments.length?(r=!!o,i):r},i.size=function(o){return arguments.length?(e=+o[0],t=+o[1],i):[e,t]},i.padding=function(o){return arguments.length?(n=+o,i):n},i}var lmt={depth:-1},uce={},$8={};function cmt(e){return e.id}function fmt(e){return e.parentId}function lce(){var e=cmt,t=fmt,n;function r(i){var s=Array.from(i),o=e,a=t,u,l,c,f,d,h,p,m,g=new Map;if(n!=null){const y=s.map((w,E)=>dmt(n(w,E,i))),v=y.map(cce),_=new Set(y).add("");for(const w of v)_.has(w)||(_.add(w),y.push(w),v.push(cce(w)),s.push($8));o=(w,E)=>y[E],a=(w,E)=>v[E]}for(c=0,u=s.length;c<u;++c)l=s[c],h=s[c]=new KE(l),(p=o(l,c,i))!=null&&(p+="")&&(m=h.id=p,g.set(m,g.has(m)?uce:h)),(p=a(l,c,i))!=null&&(p+="")&&(h.parent=p);for(c=0;c<u;++c)if(h=s[c],p=h.parent){if(d=g.get(p),!d)throw new Error("missing: "+p);if(d===uce)throw new Error("ambiguous: "+p);d.children?d.children.push(h):d.children=[h],h.parent=d}else{if(f)throw new Error("multiple roots");f=h}if(!f)throw new Error("no root");if(n!=null){for(;f.data===$8&&f.children.length===1;)f=f.children[0],--u;for(let y=s.length-1;y>=0&&(h=s[y],h.data===$8);--y)h.data=null}if(f.parent=lmt,f.eachBefore(function(y){y.depth=y.parent.depth+1,--u}).eachBefore(qTe),f.parent=null,u>0)throw new Error("cycle");return f}return r.id=function(i){return arguments.length?(e=SD(i),r):e},r.parentId=function(i){return arguments.length?(t=SD(i),r):t},r.path=function(i){return arguments.length?(n=SD(i),r):n},r}function dmt(e){e=`${e}`;let t=e.length;return Ez(e,t-1)&&!Ez(e,t-2)&&(e=e.slice(0,-1)),e[0]==="/"?e:`/${e}`}function cce(e){let t=e.length;if(t<2)return"";for(;--t>1&&!Ez(e,t););return e.slice(0,t)}function Ez(e,t){if(e[t]==="/"){let n=0;for(;t>0&&e[--t]==="\\";)++n;if(!(n&1))return!0}return!1}function hmt(e,t){return e.parent===t.parent?1:2}function M8(e){var t=e.children;return t?t[0]:e.t}function L8(e){var t=e.children;return t?t[t.length-1]:e.t}function pmt(e,t,n){var r=n/(t.i-e.i);t.c-=r,t.s+=n,e.c+=r,t.z+=n,t.m+=n}function mmt(e){for(var t=0,n=0,r=e.children,i=r.length,s;--i>=0;)s=r[i],s.z+=t,s.m+=t,t+=s.s+(n+=s.c)}function gmt(e,t,n){return e.a.parent===t.parent?e.a:n}function TD(e,t){this._=e,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=t}TD.prototype=Object.create(KE.prototype);function ymt(e){for(var t=new TD(e,0),n,r=[t],i,s,o,a;n=r.pop();)if(s=n._.children)for(n.children=new Array(a=s.length),o=a-1;o>=0;--o)r.push(i=n.children[o]=new TD(s[o],o)),i.parent=n;return(t.parent=new TD(null,0)).children=[t],t}function vmt(){var e=hmt,t=1,n=1,r=null;function i(l){var c=ymt(l);if(c.eachAfter(s),c.parent.m=-c.z,c.eachBefore(o),r)l.eachBefore(u);else{var f=l,d=l,h=l;l.eachBefore(function(v){v.x<f.x&&(f=v),v.x>d.x&&(d=v),v.depth>h.depth&&(h=v)});var p=f===d?1:e(f,d)/2,m=p-f.x,g=t/(d.x+p+m),y=n/(h.depth||1);l.eachBefore(function(v){v.x=(v.x+m)*g,v.y=v.depth*y})}return l}function s(l){var c=l.children,f=l.parent.children,d=l.i?f[l.i-1]:null;if(c){mmt(l);var h=(c[0].z+c[c.length-1].z)/2;d?(l.z=d.z+e(l._,d._),l.m=l.z-h):l.z=h}else d&&(l.z=d.z+e(l._,d._));l.parent.A=a(l,d,l.parent.A||f[0])}function o(l){l._.x=l.z+l.parent.m,l.m+=l.parent.m}function a(l,c,f){if(c){for(var d=l,h=l,p=c,m=d.parent.children[0],g=d.m,y=h.m,v=p.m,_=m.m,w;p=L8(p),d=M8(d),p&&d;)m=M8(m),h=L8(h),h.a=l,w=p.z+v-d.z-g+e(p._,d._),w>0&&(pmt(gmt(p,l,f),l,w),g+=w,y+=w),v+=p.m,g+=d.m,_+=m.m,y+=h.m;p&&!L8(h)&&(h.t=p,h.m+=v-y),d&&!M8(m)&&(m.t=d,m.m+=g-_,f=l)}return f}function u(l){l.x*=t,l.y=l.depth*n}return i.separation=function(l){return arguments.length?(e=l,i):e},i.size=function(l){return arguments.length?(r=!1,t=+l[0],n=+l[1],i):r?null:[t,n]},i.nodeSize=function(l){return arguments.length?(r=!0,t=+l[0],n=+l[1],i):r?[t,n]:null},i}function O6(e,t,n,r,i){for(var s=e.children,o,a=-1,u=s.length,l=e.value&&(i-n)/e.value;++a<u;)o=s[a],o.x0=t,o.x1=r,o.y0=n,o.y1=n+=o.value*l}var QTe=(1+Math.sqrt(5))/2;function JTe(e,t,n,r,i,s){for(var o=[],a=t.children,u,l,c=0,f=0,d=a.length,h,p,m=t.value,g,y,v,_,w,E,S;c<d;){h=i-n,p=s-r;do g=a[f++].value;while(!g&&f<d);for(y=v=g,E=Math.max(p/h,h/p)/(m*e),S=g*g*E,w=Math.max(v/S,S/y);f<d;++f){if(g+=l=a[f].value,l<y&&(y=l),l>v&&(v=l),S=g*g*E,_=Math.max(v/S,S/y),_>w){g-=l;break}w=_}o.push(u={value:g,dice:h<p,children:a.slice(c,f)}),u.dice?Rk(u,n,r,i,m?r+=p*g/m:s):O6(u,n,r,m?n+=h*g/m:i,s),m-=g,c=f}return o}const ZTe=function e(t){function n(r,i,s,o,a){JTe(t,r,i,s,o,a)}return n.ratio=function(r){return e((r=+r)>1?r:1)},n}(QTe);function bmt(){var e=ZTe,t=!1,n=1,r=1,i=[0],s=Hv,o=Hv,a=Hv,u=Hv,l=Hv;function c(d){return d.x0=d.y0=0,d.x1=n,d.y1=r,d.eachBefore(f),i=[0],t&&d.eachBefore(XTe),d}function f(d){var h=i[d.depth],p=d.x0+h,m=d.y0+h,g=d.x1-h,y=d.y1-h;g<p&&(p=g=(p+g)/2),y<m&&(m=y=(m+y)/2),d.x0=p,d.y0=m,d.x1=g,d.y1=y,d.children&&(h=i[d.depth+1]=s(d)/2,p+=l(d)-h,m+=o(d)-h,g-=a(d)-h,y-=u(d)-h,g<p&&(p=g=(p+g)/2),y<m&&(m=y=(m+y)/2),e(d,p,m,g,y))}return c.round=function(d){return arguments.length?(t=!!d,c):t},c.size=function(d){return arguments.length?(n=+d[0],r=+d[1],c):[n,r]},c.tile=function(d){return arguments.length?(e=WTe(d),c):e},c.padding=function(d){return arguments.length?c.paddingInner(d).paddingOuter(d):c.paddingInner()},c.paddingInner=function(d){return arguments.length?(s=typeof d=="function"?d:rw(+d),c):s},c.paddingOuter=function(d){return arguments.length?c.paddingTop(d).paddingRight(d).paddingBottom(d).paddingLeft(d):c.paddingTop()},c.paddingTop=function(d){return arguments.length?(o=typeof d=="function"?d:rw(+d),c):o},c.paddingRight=function(d){return arguments.length?(a=typeof d=="function"?d:rw(+d),c):a},c.paddingBottom=function(d){return arguments.length?(u=typeof d=="function"?d:rw(+d),c):u},c.paddingLeft=function(d){return arguments.length?(l=typeof d=="function"?d:rw(+d),c):l},c}function _mt(e,t,n,r,i){var s=e.children,o,a=s.length,u,l=new Array(a+1);for(l[0]=u=o=0;o<a;++o)l[o+1]=u+=s[o].value;c(0,a,e.value,t,n,r,i);function c(f,d,h,p,m,g,y){if(f>=d-1){var v=s[f];v.x0=p,v.y0=m,v.x1=g,v.y1=y;return}for(var _=l[f],w=h/2+_,E=f+1,S=d-1;E<S;){var T=E+S>>>1;l[T]<w?E=T+1:S=T}w-l[E-1]<l[E]-w&&f+1<E&&--E;var C=l[E]-_,A=h-C;if(g-p>y-m){var k=h?(p*A+g*C)/h:g;c(f,E,C,p,m,k,y),c(E,d,A,k,m,g,y)}else{var N=h?(m*A+y*C)/h:y;c(f,E,C,p,m,g,N),c(E,d,A,p,N,g,y)}}}function wmt(e,t,n,r,i){(e.depth&1?O6:Rk)(e,t,n,r,i)}const Emt=function e(t){function n(r,i,s,o,a){if((u=r._squarify)&&u.ratio===t)for(var u,l,c,f,d=-1,h,p=u.length,m=r.value;++d<p;){for(l=u[d],c=l.children,f=l.value=0,h=c.length;f<h;++f)l.value+=c[f].value;l.dice?Rk(l,i,s,o,m?s+=(a-s)*l.value/m:a):O6(l,i,s,m?i+=(o-i)*l.value/m:o,a),m-=l.value}else r._squarify=u=JTe(t,r,i,s,o,a),u.ratio=t}return n.ratio=function(r){return e((r=+r)>1?r:1)},n}(QTe);function ld(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function By(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const xz=Symbol("implicit");function Gb(){var e=new M7,t=[],n=[],r=xz;function i(s){let o=e.get(s);if(o===void 0){if(r!==xz)return r;e.set(s,o=t.push(s)-1)}return n[o%n.length]}return i.domain=function(s){if(!arguments.length)return t.slice();t=[],e=new M7;for(const o of s)e.has(o)||e.set(o,t.push(o)-1);return i},i.range=function(s){return arguments.length?(n=Array.from(s),i):n.slice()},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return Gb(t,n).unknown(r)},ld.apply(i,arguments),i}function yS(){var e=Gb().unknown(void 0),t=e.domain,n=e.range,r=0,i=1,s,o,a=!1,u=0,l=0,c=.5;delete e.unknown;function f(){var d=t().length,h=i<r,p=h?i:r,m=h?r:i;s=(m-p)/Math.max(1,d-u+l*2),a&&(s=Math.floor(s)),p+=(m-p-s*(d-u))*c,o=s*(1-u),a&&(p=Math.round(p),o=Math.round(o));var g=Mu(d).map(function(y){return p+s*y});return n(h?g.reverse():g)}return e.domain=function(d){return arguments.length?(t(d),f()):t()},e.range=function(d){return arguments.length?([r,i]=d,r=+r,i=+i,f()):[r,i]},e.rangeRound=function(d){return[r,i]=d,r=+r,i=+i,a=!0,f()},e.bandwidth=function(){return o},e.step=function(){return s},e.round=function(d){return arguments.length?(a=!!d,f()):a},e.padding=function(d){return arguments.length?(u=Math.min(1,l=+d),f()):u},e.paddingInner=function(d){return arguments.length?(u=Math.min(1,d),f()):u},e.paddingOuter=function(d){return arguments.length?(l=+d,f()):l},e.align=function(d){return arguments.length?(c=Math.max(0,Math.min(1,d)),f()):c},e.copy=function(){return yS(t(),[r,i]).round(a).paddingInner(u).paddingOuter(l).align(c)},ld.apply(f(),arguments)}function xmt(e){return function(){return e}}function Sz(e){return+e}var fce=[0,1];function Lu(e){return e}function Tz(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:xmt(isNaN(t)?NaN:.5)}function Smt(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function Tmt(e,t,n){var r=e[0],i=e[1],s=t[0],o=t[1];return i<r?(r=Tz(i,r),s=n(o,s)):(r=Tz(r,i),s=n(s,o)),function(a){return s(r(a))}}function Cmt(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),s=new Array(r),o=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<r;)i[o]=Tz(e[o],e[o+1]),s[o]=n(t[o],t[o+1]);return function(a){var u=q0(e,a,1,r)-1;return s[u](i[u](a))}}function Nk(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function $6(){var e=fce,t=fce,n=eg,r,i,s,o=Lu,a,u,l;function c(){var d=Math.min(e.length,t.length);return o!==Lu&&(o=Smt(e[0],e[d-1])),a=d>2?Cmt:Tmt,u=l=null,f}function f(d){return d==null||isNaN(d=+d)?s:(u||(u=a(e.map(r),t,n)))(r(o(d)))}return f.invert=function(d){return o(i((l||(l=a(t,e.map(r),yc)))(d)))},f.domain=function(d){return arguments.length?(e=Array.from(d,Sz),c()):e.slice()},f.range=function(d){return arguments.length?(t=Array.from(d),c()):t.slice()},f.rangeRound=function(d){return t=Array.from(d),n=Ck,c()},f.clamp=function(d){return arguments.length?(o=d?!0:Lu,c()):o!==Lu},f.interpolate=function(d){return arguments.length?(n=d,c()):n},f.unknown=function(d){return arguments.length?(s=d,f):s},function(d,h){return r=d,i=h,c()}}function e2e(){return $6()(Lu,Lu)}function t2e(e,t,n,r){var i=W0(e,t,n),s;switch(r=K1(r??",f"),r.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(s=nTe(i,o))&&(r.precision=s),PK(r,o)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(s=rTe(i,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=s-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(s=tTe(i))&&(r.precision=s-(r.type==="%")*2);break}}return jy(r)}function Yb(e){var t=e.domain;return e.ticks=function(n){var r=t();return F7(r[0],r[r.length-1],n??10)},e.tickFormat=function(n,r){var i=t();return t2e(i[0],i[i.length-1],n??10,r)},e.nice=function(n){n==null&&(n=10);var r=t(),i=0,s=r.length-1,o=r[i],a=r[s],u,l,c=10;for(a<o&&(l=o,o=a,a=l,l=i,i=s,s=l);c-- >0;){if(l=j7(o,a,n),l===u)return r[i]=o,r[s]=a,t(r);if(l>0)o=Math.floor(o/l)*l,a=Math.ceil(a/l)*l;else if(l<0)o=Math.ceil(o*l)/l,a=Math.floor(a*l)/l;else break;u=l}return e},e}function Kf(){var e=e2e();return e.copy=function(){return Nk(e,Kf())},ld.apply(e,arguments),Yb(e)}function n2e(e){var t;function n(r){return r==null||isNaN(r=+r)?t:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(e=Array.from(r,Sz),n):e.slice()},n.unknown=function(r){return arguments.length?(t=r,n):t},n.copy=function(){return n2e(e).unknown(t)},e=arguments.length?Array.from(e,Sz):[0,1],Yb(n)}function r2e(e,t){e=e.slice();var n=0,r=e.length-1,i=e[n],s=e[r],o;return s<i&&(o=n,n=r,r=o,o=i,i=s,s=o),e[n]=t.floor(i),e[r]=t.ceil(s),e}function dce(e){return Math.log(e)}function hce(e){return Math.exp(e)}function Amt(e){return-Math.log(-e)}function Imt(e){return-Math.exp(-e)}function kmt(e){return isFinite(e)?+("1e"+e):e<0?0:e}function Rmt(e){return e===10?kmt:e===Math.E?Math.exp:t=>Math.pow(e,t)}function Nmt(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function pce(e){return(t,n)=>-e(-t,n)}function BK(e){const t=e(dce,hce),n=t.domain;let r=10,i,s;function o(){return i=Nmt(r),s=Rmt(r),n()[0]<0?(i=pce(i),s=pce(s),e(Amt,Imt)):e(dce,hce),t}return t.base=function(a){return arguments.length?(r=+a,o()):r},t.domain=function(a){return arguments.length?(n(a),o()):n()},t.ticks=a=>{const u=n();let l=u[0],c=u[u.length-1];const f=c<l;f&&([l,c]=[c,l]);let d=i(l),h=i(c),p,m;const g=a==null?10:+a;let y=[];if(!(r%1)&&h-d<g){if(d=Math.floor(d),h=Math.ceil(h),l>0){for(;d<=h;++d)for(p=1;p<r;++p)if(m=d<0?p/s(-d):p*s(d),!(m<l)){if(m>c)break;y.push(m)}}else for(;d<=h;++d)for(p=r-1;p>=1;--p)if(m=d>0?p/s(-d):p*s(d),!(m<l)){if(m>c)break;y.push(m)}y.length*2<g&&(y=F7(l,c,g))}else y=F7(d,h,Math.min(h-d,g)).map(s);return f?y.reverse():y},t.tickFormat=(a,u)=>{if(a==null&&(a=10),u==null&&(u=r===10?"s":","),typeof u!="function"&&(!(r%1)&&(u=K1(u)).precision==null&&(u.trim=!0),u=jy(u)),a===1/0)return u;const l=Math.max(1,r*a/t.ticks().length);return c=>{let f=c/s(Math.round(i(c)));return f*r<r-.5&&(f*=r),f<=l?u(c):""}},t.nice=()=>n(r2e(n(),{floor:a=>s(Math.floor(i(a))),ceil:a=>s(Math.ceil(i(a)))})),t}function i2e(){const e=BK($6()).domain([1,10]);return e.copy=()=>Nk(e,i2e()).base(e.base()),ld.apply(e,arguments),e}function mce(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function gce(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function UK(e){var t=1,n=e(mce(t),gce(t));return n.constant=function(r){return arguments.length?e(mce(t=+r),gce(t)):t},Yb(n)}function s2e(){var e=UK($6());return e.copy=function(){return Nk(e,s2e()).constant(e.constant())},ld.apply(e,arguments)}function yce(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function Pmt(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function Dmt(e){return e<0?-e*e:e*e}function zK(e){var t=e(Lu,Lu),n=1;function r(){return n===1?e(Lu,Lu):n===.5?e(Pmt,Dmt):e(yce(n),yce(1/n))}return t.exponent=function(i){return arguments.length?(n=+i,r()):n},Yb(t)}function VK(){var e=zK($6());return e.copy=function(){return Nk(e,VK()).exponent(e.exponent())},ld.apply(e,arguments),e}function Omt(){return VK.apply(null,arguments).exponent(.5)}function o2e(){var e=[],t=[],n=[],r;function i(){var o=0,a=Math.max(1,t.length);for(n=new Array(a-1);++o<a;)n[o-1]=Zxe(e,o/a);return s}function s(o){return o==null||isNaN(o=+o)?r:t[q0(n,o)]}return s.invertExtent=function(o){var a=t.indexOf(o);return a<0?[NaN,NaN]:[a>0?n[a-1]:e[0],a<n.length?n[a]:e[e.length-1]]},s.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let a of o)a!=null&&!isNaN(a=+a)&&e.push(a);return e.sort(sm),i()},s.range=function(o){return arguments.length?(t=Array.from(o),i()):t.slice()},s.unknown=function(o){return arguments.length?(r=o,s):r},s.quantiles=function(){return n.slice()},s.copy=function(){return o2e().domain(e).range(t).unknown(r)},ld.apply(s,arguments)}function a2e(){var e=0,t=1,n=1,r=[.5],i=[0,1],s;function o(u){return u!=null&&u<=u?i[q0(r,u,0,n)]:s}function a(){var u=-1;for(r=new Array(n);++u<n;)r[u]=((u+1)*t-(u-n)*e)/(n+1);return o}return o.domain=function(u){return arguments.length?([e,t]=u,e=+e,t=+t,a()):[e,t]},o.range=function(u){return arguments.length?(n=(i=Array.from(u)).length-1,a()):i.slice()},o.invertExtent=function(u){var l=i.indexOf(u);return l<0?[NaN,NaN]:l<1?[e,r[0]]:l>=n?[r[n-1],t]:[r[l-1],r[l]]},o.unknown=function(u){return arguments.length&&(s=u),o},o.thresholds=function(){return r.slice()},o.copy=function(){return a2e().domain([e,t]).range(i).unknown(s)},ld.apply(Yb(o),arguments)}function u2e(){var e=[.5],t=[0,1],n,r=1;function i(s){return s!=null&&s<=s?t[q0(e,s,0,r)]:n}return i.domain=function(s){return arguments.length?(e=Array.from(s),r=Math.min(e.length,t.length-1),i):e.slice()},i.range=function(s){return arguments.length?(t=Array.from(s),r=Math.min(e.length,t.length-1),i):t.slice()},i.invertExtent=function(s){var o=t.indexOf(s);return[e[o-1],e[o]]},i.unknown=function(s){return arguments.length?(n=s,i):n},i.copy=function(){return u2e().domain(e).range(t).unknown(n)},ld.apply(i,arguments)}const F8=new Date,j8=new Date;function zs(e,t,n,r){function i(s){return e(s=arguments.length===0?new Date:new Date(+s)),s}return i.floor=s=>(e(s=new Date(+s)),s),i.ceil=s=>(e(s=new Date(s-1)),t(s,1),e(s),s),i.round=s=>{const o=i(s),a=i.ceil(s);return s-o<a-s?o:a},i.offset=(s,o)=>(t(s=new Date(+s),o==null?1:Math.floor(o)),s),i.range=(s,o,a)=>{const u=[];if(s=i.ceil(s),a=a==null?1:Math.floor(a),!(s<o)||!(a>0))return u;let l;do u.push(l=new Date(+s)),t(s,a),e(s);while(l<s&&s<o);return u},i.filter=s=>zs(o=>{if(o>=o)for(;e(o),!s(o);)o.setTime(o-1)},(o,a)=>{if(o>=o)if(a<0)for(;++a<=0;)for(;t(o,-1),!s(o););else for(;--a>=0;)for(;t(o,1),!s(o););}),n&&(i.count=(s,o)=>(F8.setTime(+s),j8.setTime(+o),e(F8),e(j8),Math.floor(n(F8,j8))),i.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?i.filter(r?o=>r(o)%s===0:o=>i.count(0,o)%s===0):i)),i}const XE=zs(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);XE.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?zs(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):XE);XE.range;const Kp=1e3,Tc=Kp*60,Xp=Tc*60,Im=Xp*24,HK=Im*7,vce=Im*30,B8=Im*365,Qp=zs(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Kp)},(e,t)=>(t-e)/Kp,e=>e.getUTCSeconds());Qp.range;const M6=zs(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Kp)},(e,t)=>{e.setTime(+e+t*Tc)},(e,t)=>(t-e)/Tc,e=>e.getMinutes());M6.range;const L6=zs(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Tc)},(e,t)=>(t-e)/Tc,e=>e.getUTCMinutes());L6.range;const F6=zs(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Kp-e.getMinutes()*Tc)},(e,t)=>{e.setTime(+e+t*Xp)},(e,t)=>(t-e)/Xp,e=>e.getHours());F6.range;const j6=zs(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*Xp)},(e,t)=>(t-e)/Xp,e=>e.getUTCHours());j6.range;const am=zs(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Tc)/Im,e=>e.getDate()-1);am.range;const S0=zs(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Im,e=>e.getUTCDate()-1);S0.range;const l2e=zs(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Im,e=>Math.floor(e/Im));l2e.range;function Kb(e){return zs(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*Tc)/HK)}const vS=Kb(0),Y3=Kb(1),$mt=Kb(2),Mmt=Kb(3),QE=Kb(4),Lmt=Kb(5),Fmt=Kb(6);vS.range;Y3.range;$mt.range;Mmt.range;QE.range;Lmt.range;Fmt.range;function Xb(e){return zs(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/HK)}const bS=Xb(0),K3=Xb(1),jmt=Xb(2),Bmt=Xb(3),JE=Xb(4),Umt=Xb(5),zmt=Xb(6);bS.range;K3.range;jmt.range;Bmt.range;JE.range;Umt.range;zmt.range;const XA=zs(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());XA.range;const QA=zs(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());QA.range;const Ah=zs(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());Ah.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:zs(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});Ah.range;const Ih=zs(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Ih.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:zs(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});Ih.range;function c2e(e,t,n,r,i,s){const o=[[Qp,1,Kp],[Qp,5,5*Kp],[Qp,15,15*Kp],[Qp,30,30*Kp],[s,1,Tc],[s,5,5*Tc],[s,15,15*Tc],[s,30,30*Tc],[i,1,Xp],[i,3,3*Xp],[i,6,6*Xp],[i,12,12*Xp],[r,1,Im],[r,2,2*Im],[n,1,HK],[t,1,vce],[t,3,3*vce],[e,1,B8]];function a(l,c,f){const d=c<l;d&&([l,c]=[c,l]);const h=f&&typeof f.range=="function"?f:u(l,c,f),p=h?h.range(l,+c+1):[];return d?p.reverse():p}function u(l,c,f){const d=Math.abs(c-l)/f,h=pS(([,,g])=>g).right(o,d);if(h===o.length)return e.every(W0(l/B8,c/B8,f));if(h===0)return XE.every(Math.max(W0(l,c,f),1));const[p,m]=o[d/o[h-1][2]<o[h][2]/d?h-1:h];return p.every(m)}return[a,u]}const[Vmt,Hmt]=c2e(Ih,QA,bS,l2e,j6,L6),[qmt,Wmt]=c2e(Ah,XA,vS,am,F6,M6);function U8(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function z8(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function DT(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function f2e(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,s=e.days,o=e.shortDays,a=e.months,u=e.shortMonths,l=OT(i),c=$T(i),f=OT(s),d=$T(s),h=OT(o),p=$T(o),m=OT(a),g=$T(a),y=OT(u),v=$T(u),_={a:B,A:U,b:H,B:P,c:null,d:Sce,e:Sce,f:mgt,g:Tgt,G:Agt,H:dgt,I:hgt,j:pgt,L:d2e,m:ggt,M:ygt,p:z,q:W,Q:Ace,s:Ice,S:vgt,u:bgt,U:_gt,V:wgt,w:Egt,W:xgt,x:null,X:null,y:Sgt,Y:Cgt,Z:Igt,"%":Cce},w={a:j,A:q,b:G,B:ne,c:null,d:Tce,e:Tce,f:Pgt,g:zgt,G:Hgt,H:kgt,I:Rgt,j:Ngt,L:p2e,m:Dgt,M:Ogt,p:ce,q:de,Q:Ace,s:Ice,S:$gt,u:Mgt,U:Lgt,V:Fgt,w:jgt,W:Bgt,x:null,X:null,y:Ugt,Y:Vgt,Z:qgt,"%":Cce},E={a:k,A:N,b:O,B:D,c:$,d:Ece,e:Ece,f:ugt,g:wce,G:_ce,H:xce,I:xce,j:igt,L:agt,m:rgt,M:sgt,p:A,q:ngt,Q:cgt,s:fgt,S:ogt,u:Qmt,U:Jmt,V:Zmt,w:Xmt,W:egt,x:F,X:M,y:wce,Y:_ce,Z:tgt,"%":lgt};_.x=S(n,_),_.X=S(r,_),_.c=S(t,_),w.x=S(n,w),w.X=S(r,w),w.c=S(t,w);function S(he,ve){return function(Ie){var be=[],Ke=-1,Ue=0,yt=he.length,it,_e,ke;for(Ie instanceof Date||(Ie=new Date(+Ie));++Ke<yt;)he.charCodeAt(Ke)===37&&(be.push(he.slice(Ue,Ke)),(_e=bce[it=he.charAt(++Ke)])!=null?it=he.charAt(++Ke):_e=it==="e"?" ":"0",(ke=ve[it])&&(it=ke(Ie,_e)),be.push(it),Ue=Ke+1);return be.push(he.slice(Ue,Ke)),be.join("")}}function T(he,ve){return function(Ie){var be=DT(1900,void 0,1),Ke=C(be,he,Ie+="",0),Ue,yt;if(Ke!=Ie.length)return null;if("Q"in be)return new Date(be.Q);if("s"in be)return new Date(be.s*1e3+("L"in be?be.L:0));if(ve&&!("Z"in be)&&(be.Z=0),"p"in be&&(be.H=be.H%12+be.p*12),be.m===void 0&&(be.m="q"in be?be.q:0),"V"in be){if(be.V<1||be.V>53)return null;"w"in be||(be.w=1),"Z"in be?(Ue=z8(DT(be.y,0,1)),yt=Ue.getUTCDay(),Ue=yt>4||yt===0?K3.ceil(Ue):K3(Ue),Ue=S0.offset(Ue,(be.V-1)*7),be.y=Ue.getUTCFullYear(),be.m=Ue.getUTCMonth(),be.d=Ue.getUTCDate()+(be.w+6)%7):(Ue=U8(DT(be.y,0,1)),yt=Ue.getDay(),Ue=yt>4||yt===0?Y3.ceil(Ue):Y3(Ue),Ue=am.offset(Ue,(be.V-1)*7),be.y=Ue.getFullYear(),be.m=Ue.getMonth(),be.d=Ue.getDate()+(be.w+6)%7)}else("W"in be||"U"in be)&&("w"in be||(be.w="u"in be?be.u%7:"W"in be?1:0),yt="Z"in be?z8(DT(be.y,0,1)).getUTCDay():U8(DT(be.y,0,1)).getDay(),be.m=0,be.d="W"in be?(be.w+6)%7+be.W*7-(yt+5)%7:be.w+be.U*7-(yt+6)%7);return"Z"in be?(be.H+=be.Z/100|0,be.M+=be.Z%100,z8(be)):U8(be)}}function C(he,ve,Ie,be){for(var Ke=0,Ue=ve.length,yt=Ie.length,it,_e;Ke<Ue;){if(be>=yt)return-1;if(it=ve.charCodeAt(Ke++),it===37){if(it=ve.charAt(Ke++),_e=E[it in bce?ve.charAt(Ke++):it],!_e||(be=_e(he,Ie,be))<0)return-1}else if(it!=Ie.charCodeAt(be++))return-1}return be}function A(he,ve,Ie){var be=l.exec(ve.slice(Ie));return be?(he.p=c.get(be[0].toLowerCase()),Ie+be[0].length):-1}function k(he,ve,Ie){var be=h.exec(ve.slice(Ie));return be?(he.w=p.get(be[0].toLowerCase()),Ie+be[0].length):-1}function N(he,ve,Ie){var be=f.exec(ve.slice(Ie));return be?(he.w=d.get(be[0].toLowerCase()),Ie+be[0].length):-1}function O(he,ve,Ie){var be=y.exec(ve.slice(Ie));return be?(he.m=v.get(be[0].toLowerCase()),Ie+be[0].length):-1}function D(he,ve,Ie){var be=m.exec(ve.slice(Ie));return be?(he.m=g.get(be[0].toLowerCase()),Ie+be[0].length):-1}function $(he,ve,Ie){return C(he,t,ve,Ie)}function F(he,ve,Ie){return C(he,n,ve,Ie)}function M(he,ve,Ie){return C(he,r,ve,Ie)}function B(he){return o[he.getDay()]}function U(he){return s[he.getDay()]}function H(he){return u[he.getMonth()]}function P(he){return a[he.getMonth()]}function z(he){return i[+(he.getHours()>=12)]}function W(he){return 1+~~(he.getMonth()/3)}function j(he){return o[he.getUTCDay()]}function q(he){return s[he.getUTCDay()]}function G(he){return u[he.getUTCMonth()]}function ne(he){return a[he.getUTCMonth()]}function ce(he){return i[+(he.getUTCHours()>=12)]}function de(he){return 1+~~(he.getUTCMonth()/3)}return{format:function(he){var ve=S(he+="",_);return ve.toString=function(){return he},ve},parse:function(he){var ve=T(he+="",!1);return ve.toString=function(){return he},ve},utcFormat:function(he){var ve=S(he+="",w);return ve.toString=function(){return he},ve},utcParse:function(he){var ve=T(he+="",!0);return ve.toString=function(){return he},ve}}}var bce={"-":"",_:" ",0:"0"},ho=/^\s*\d+/,Gmt=/^%/,Ymt=/[\\^$*+?|[\]().{}]/g;function mr(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",s=i.length;return r+(s<n?new Array(n-s+1).join(t)+i:i)}function Kmt(e){return e.replace(Ymt,"\\$&")}function OT(e){return new RegExp("^(?:"+e.map(Kmt).join("|")+")","i")}function $T(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function Xmt(e,t,n){var r=ho.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function Qmt(e,t,n){var r=ho.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function Jmt(e,t,n){var r=ho.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function Zmt(e,t,n){var r=ho.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function egt(e,t,n){var r=ho.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function _ce(e,t,n){var r=ho.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function wce(e,t,n){var r=ho.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function tgt(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function ngt(e,t,n){var r=ho.exec(t.slice(n,n+1));return r?(e.q=r[0]*3-3,n+r[0].length):-1}function rgt(e,t,n){var r=ho.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function Ece(e,t,n){var r=ho.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function igt(e,t,n){var r=ho.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function xce(e,t,n){var r=ho.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function sgt(e,t,n){var r=ho.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function ogt(e,t,n){var r=ho.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function agt(e,t,n){var r=ho.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function ugt(e,t,n){var r=ho.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function lgt(e,t,n){var r=Gmt.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function cgt(e,t,n){var r=ho.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function fgt(e,t,n){var r=ho.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function Sce(e,t){return mr(e.getDate(),t,2)}function dgt(e,t){return mr(e.getHours(),t,2)}function hgt(e,t){return mr(e.getHours()%12||12,t,2)}function pgt(e,t){return mr(1+am.count(Ah(e),e),t,3)}function d2e(e,t){return mr(e.getMilliseconds(),t,3)}function mgt(e,t){return d2e(e,t)+"000"}function ggt(e,t){return mr(e.getMonth()+1,t,2)}function ygt(e,t){return mr(e.getMinutes(),t,2)}function vgt(e,t){return mr(e.getSeconds(),t,2)}function bgt(e){var t=e.getDay();return t===0?7:t}function _gt(e,t){return mr(vS.count(Ah(e)-1,e),t,2)}function h2e(e){var t=e.getDay();return t>=4||t===0?QE(e):QE.ceil(e)}function wgt(e,t){return e=h2e(e),mr(QE.count(Ah(e),e)+(Ah(e).getDay()===4),t,2)}function Egt(e){return e.getDay()}function xgt(e,t){return mr(Y3.count(Ah(e)-1,e),t,2)}function Sgt(e,t){return mr(e.getFullYear()%100,t,2)}function Tgt(e,t){return e=h2e(e),mr(e.getFullYear()%100,t,2)}function Cgt(e,t){return mr(e.getFullYear()%1e4,t,4)}function Agt(e,t){var n=e.getDay();return e=n>=4||n===0?QE(e):QE.ceil(e),mr(e.getFullYear()%1e4,t,4)}function Igt(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+mr(t/60|0,"0",2)+mr(t%60,"0",2)}function Tce(e,t){return mr(e.getUTCDate(),t,2)}function kgt(e,t){return mr(e.getUTCHours(),t,2)}function Rgt(e,t){return mr(e.getUTCHours()%12||12,t,2)}function Ngt(e,t){return mr(1+S0.count(Ih(e),e),t,3)}function p2e(e,t){return mr(e.getUTCMilliseconds(),t,3)}function Pgt(e,t){return p2e(e,t)+"000"}function Dgt(e,t){return mr(e.getUTCMonth()+1,t,2)}function Ogt(e,t){return mr(e.getUTCMinutes(),t,2)}function $gt(e,t){return mr(e.getUTCSeconds(),t,2)}function Mgt(e){var t=e.getUTCDay();return t===0?7:t}function Lgt(e,t){return mr(bS.count(Ih(e)-1,e),t,2)}function m2e(e){var t=e.getUTCDay();return t>=4||t===0?JE(e):JE.ceil(e)}function Fgt(e,t){return e=m2e(e),mr(JE.count(Ih(e),e)+(Ih(e).getUTCDay()===4),t,2)}function jgt(e){return e.getUTCDay()}function Bgt(e,t){return mr(K3.count(Ih(e)-1,e),t,2)}function Ugt(e,t){return mr(e.getUTCFullYear()%100,t,2)}function zgt(e,t){return e=m2e(e),mr(e.getUTCFullYear()%100,t,2)}function Vgt(e,t){return mr(e.getUTCFullYear()%1e4,t,4)}function Hgt(e,t){var n=e.getUTCDay();return e=n>=4||n===0?JE(e):JE.ceil(e),mr(e.getUTCFullYear()%1e4,t,4)}function qgt(){return"+0000"}function Cce(){return"%"}function Ace(e){return+e}function Ice(e){return Math.floor(+e/1e3)}var M_,qK,WK,Qb,g2e;Wgt({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Wgt(e){return M_=f2e(e),qK=M_.format,WK=M_.parse,Qb=M_.utcFormat,g2e=M_.utcParse,M_}function Ggt(e){return new Date(e)}function Ygt(e){return e instanceof Date?+e:+new Date(+e)}function GK(e,t,n,r,i,s,o,a,u,l){var c=e2e(),f=c.invert,d=c.domain,h=l(".%L"),p=l(":%S"),m=l("%I:%M"),g=l("%I %p"),y=l("%a %d"),v=l("%b %d"),_=l("%B"),w=l("%Y");function E(S){return(u(S)<S?h:a(S)<S?p:o(S)<S?m:s(S)<S?g:r(S)<S?i(S)<S?y:v:n(S)<S?_:w)(S)}return c.invert=function(S){return new Date(f(S))},c.domain=function(S){return arguments.length?d(Array.from(S,Ygt)):d().map(Ggt)},c.ticks=function(S){var T=d();return e(T[0],T[T.length-1],S??10)},c.tickFormat=function(S,T){return T==null?E:l(T)},c.nice=function(S){var T=d();return(!S||typeof S.range!="function")&&(S=t(T[0],T[T.length-1],S??10)),S?d(r2e(T,S)):c},c.copy=function(){return Nk(c,GK(e,t,n,r,i,s,o,a,u,l))},c}function JA(){return ld.apply(GK(qmt,Wmt,Ah,XA,vS,am,F6,M6,Qp,qK).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function Kgt(){return ld.apply(GK(Vmt,Hmt,Ih,QA,bS,S0,j6,L6,Qp,Qb).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function B6(){var e=0,t=1,n,r,i,s,o=Lu,a=!1,u;function l(f){return f==null||isNaN(f=+f)?u:o(i===0?.5:(f=(s(f)-n)*i,a?Math.max(0,Math.min(1,f)):f))}l.domain=function(f){return arguments.length?([e,t]=f,n=s(e=+e),r=s(t=+t),i=n===r?0:1/(r-n),l):[e,t]},l.clamp=function(f){return arguments.length?(a=!!f,l):a},l.interpolator=function(f){return arguments.length?(o=f,l):o};function c(f){return function(d){var h,p;return arguments.length?([h,p]=d,o=f(h,p),l):[o(0),o(1)]}}return l.range=c(eg),l.rangeRound=c(Ck),l.unknown=function(f){return arguments.length?(u=f,l):u},function(f){return s=f,n=f(e),r=f(t),i=n===r?0:1/(r-n),l}}function Uy(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function YK(){var e=Yb(B6()(Lu));return e.copy=function(){return Uy(e,YK())},By.apply(e,arguments)}function y2e(){var e=BK(B6()).domain([1,10]);return e.copy=function(){return Uy(e,y2e()).base(e.base())},By.apply(e,arguments)}function v2e(){var e=UK(B6());return e.copy=function(){return Uy(e,v2e()).constant(e.constant())},By.apply(e,arguments)}function KK(){var e=zK(B6());return e.copy=function(){return Uy(e,KK()).exponent(e.exponent())},By.apply(e,arguments)}function Xgt(){return KK.apply(null,arguments).exponent(.5)}function U6(){var e=0,t=.5,n=1,r=1,i,s,o,a,u,l=Lu,c,f=!1,d;function h(m){return isNaN(m=+m)?d:(m=.5+((m=+c(m))-s)*(r*m<r*s?a:u),l(f?Math.max(0,Math.min(1,m)):m))}h.domain=function(m){return arguments.length?([e,t,n]=m,i=c(e=+e),s=c(t=+t),o=c(n=+n),a=i===s?0:.5/(s-i),u=s===o?0:.5/(o-s),r=s<i?-1:1,h):[e,t,n]},h.clamp=function(m){return arguments.length?(f=!!m,h):f},h.interpolator=function(m){return arguments.length?(l=m,h):l};function p(m){return function(g){var y,v,_;return arguments.length?([y,v,_]=g,l=wK(m,[y,v,_]),h):[l(0),l(.5),l(1)]}}return h.range=p(eg),h.rangeRound=p(Ck),h.unknown=function(m){return arguments.length?(d=m,h):d},function(m){return c=m,i=m(e),s=m(t),o=m(n),a=i===s?0:.5/(s-i),u=s===o?0:.5/(o-s),r=s<i?-1:1,h}}function b2e(){var e=Yb(U6()(Lu));return e.copy=function(){return Uy(e,b2e())},By.apply(e,arguments)}function _2e(){var e=BK(U6()).domain([.1,1,10]);return e.copy=function(){return Uy(e,_2e()).base(e.base())},By.apply(e,arguments)}function w2e(){var e=UK(U6());return e.copy=function(){return Uy(e,w2e()).constant(e.constant())},By.apply(e,arguments)}function XK(){var e=zK(U6());return e.copy=function(){return Uy(e,XK()).exponent(e.exponent())},By.apply(e,arguments)}function Qgt(){return XK.apply(null,arguments).exponent(.5)}function cd(e){for(var t=e.length/6|0,n=new Array(t),r=0;r<t;)n[r]="#"+e.slice(r*6,++r*6);return n}const Jgt=cd("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),Zgt=cd("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),e0t=cd("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),t0t=cd("4269d0efb118ff725c6cc5b03ca951ff8ab7a463f297bbf59c6b4e9498a0"),n0t=cd("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),r0t=cd("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),i0t=cd("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),s0t=cd("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),o0t=cd("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),a0t=cd("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),E2e=cd("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab");function En(e){return function(){return e}}const kce=Math.abs,Zo=Math.atan2,dv=Math.cos,u0t=Math.max,V8=Math.min,Sd=Math.sin,l1=Math.sqrt,ra=1e-12,ZE=Math.PI,X3=ZE/2,NC=2*ZE;function l0t(e){return e>1?0:e<-1?ZE:Math.acos(e)}function Rce(e){return e>=1?X3:e<=-1?-X3:Math.asin(e)}function z6(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);t=r}return e},()=>new CK(t)}function c0t(e){return e.innerRadius}function f0t(e){return e.outerRadius}function d0t(e){return e.startAngle}function h0t(e){return e.endAngle}function p0t(e){return e&&e.padAngle}function m0t(e,t,n,r,i,s,o,a){var u=n-e,l=r-t,c=o-i,f=a-s,d=f*u-c*l;if(!(d*d<ra))return d=(c*(t-s)-f*(e-i))/d,[e+d*u,t+d*l]}function ZN(e,t,n,r,i,s,o){var a=e-n,u=t-r,l=(o?s:-s)/l1(a*a+u*u),c=l*u,f=-l*a,d=e+c,h=t+f,p=n+c,m=r+f,g=(d+p)/2,y=(h+m)/2,v=p-d,_=m-h,w=v*v+_*_,E=i-s,S=d*m-p*h,T=(_<0?-1:1)*l1(u0t(0,E*E*w-S*S)),C=(S*_-v*T)/w,A=(-S*v-_*T)/w,k=(S*_+v*T)/w,N=(-S*v+_*T)/w,O=C-g,D=A-y,$=k-g,F=N-y;return O*O+D*D>$*$+F*F&&(C=k,A=N),{cx:C,cy:A,x01:-c,y01:-f,x11:C*(i/E-1),y11:A*(i/E-1)}}function Q3(){var e=c0t,t=f0t,n=En(0),r=null,i=d0t,s=h0t,o=p0t,a=null,u=z6(l);function l(){var c,f,d=+e.apply(this,arguments),h=+t.apply(this,arguments),p=i.apply(this,arguments)-X3,m=s.apply(this,arguments)-X3,g=kce(m-p),y=m>p;if(a||(a=c=u()),h<d&&(f=h,h=d,d=f),!(h>ra))a.moveTo(0,0);else if(g>NC-ra)a.moveTo(h*dv(p),h*Sd(p)),a.arc(0,0,h,p,m,!y),d>ra&&(a.moveTo(d*dv(m),d*Sd(m)),a.arc(0,0,d,m,p,y));else{var v=p,_=m,w=p,E=m,S=g,T=g,C=o.apply(this,arguments)/2,A=C>ra&&(r?+r.apply(this,arguments):l1(d*d+h*h)),k=V8(kce(h-d)/2,+n.apply(this,arguments)),N=k,O=k,D,$;if(A>ra){var F=Rce(A/d*Sd(C)),M=Rce(A/h*Sd(C));(S-=F*2)>ra?(F*=y?1:-1,w+=F,E-=F):(S=0,w=E=(p+m)/2),(T-=M*2)>ra?(M*=y?1:-1,v+=M,_-=M):(T=0,v=_=(p+m)/2)}var B=h*dv(v),U=h*Sd(v),H=d*dv(E),P=d*Sd(E);if(k>ra){var z=h*dv(_),W=h*Sd(_),j=d*dv(w),q=d*Sd(w),G;if(g<ZE)if(G=m0t(B,U,j,q,z,W,H,P)){var ne=B-G[0],ce=U-G[1],de=z-G[0],he=W-G[1],ve=1/Sd(l0t((ne*de+ce*he)/(l1(ne*ne+ce*ce)*l1(de*de+he*he)))/2),Ie=l1(G[0]*G[0]+G[1]*G[1]);N=V8(k,(d-Ie)/(ve-1)),O=V8(k,(h-Ie)/(ve+1))}else N=O=0}T>ra?O>ra?(D=ZN(j,q,B,U,h,O,y),$=ZN(z,W,H,P,h,O,y),a.moveTo(D.cx+D.x01,D.cy+D.y01),O<k?a.arc(D.cx,D.cy,O,Zo(D.y01,D.x01),Zo($.y01,$.x01),!y):(a.arc(D.cx,D.cy,O,Zo(D.y01,D.x01),Zo(D.y11,D.x11),!y),a.arc(0,0,h,Zo(D.cy+D.y11,D.cx+D.x11),Zo($.cy+$.y11,$.cx+$.x11),!y),a.arc($.cx,$.cy,O,Zo($.y11,$.x11),Zo($.y01,$.x01),!y))):(a.moveTo(B,U),a.arc(0,0,h,v,_,!y)):a.moveTo(B,U),!(d>ra)||!(S>ra)?a.lineTo(H,P):N>ra?(D=ZN(H,P,z,W,d,-N,y),$=ZN(B,U,j,q,d,-N,y),a.lineTo(D.cx+D.x01,D.cy+D.y01),N<k?a.arc(D.cx,D.cy,N,Zo(D.y01,D.x01),Zo($.y01,$.x01),!y):(a.arc(D.cx,D.cy,N,Zo(D.y01,D.x01),Zo(D.y11,D.x11),!y),a.arc(0,0,d,Zo(D.cy+D.y11,D.cx+D.x11),Zo($.cy+$.y11,$.cx+$.x11),y),a.arc($.cx,$.cy,N,Zo($.y11,$.x11),Zo($.y01,$.x01),!y))):a.arc(0,0,d,E,w,y)}if(a.closePath(),c)return a=null,c+""||null}return l.centroid=function(){var c=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,f=(+i.apply(this,arguments)+ +s.apply(this,arguments))/2-ZE/2;return[dv(f)*c,Sd(f)*c]},l.innerRadius=function(c){return arguments.length?(e=typeof c=="function"?c:En(+c),l):e},l.outerRadius=function(c){return arguments.length?(t=typeof c=="function"?c:En(+c),l):t},l.cornerRadius=function(c){return arguments.length?(n=typeof c=="function"?c:En(+c),l):n},l.padRadius=function(c){return arguments.length?(r=c==null?null:typeof c=="function"?c:En(+c),l):r},l.startAngle=function(c){return arguments.length?(i=typeof c=="function"?c:En(+c),l):i},l.endAngle=function(c){return arguments.length?(s=typeof c=="function"?c:En(+c),l):s},l.padAngle=function(c){return arguments.length?(o=typeof c=="function"?c:En(+c),l):o},l.context=function(c){return arguments.length?(a=c??null,l):a},l}function V6(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function x2e(e){this._context=e}x2e.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function QK(e){return new x2e(e)}function S2e(e){return e[0]}function T2e(e){return e[1]}function JK(e,t){var n=En(!0),r=null,i=QK,s=null,o=z6(a);e=typeof e=="function"?e:e===void 0?S2e:En(e),t=typeof t=="function"?t:t===void 0?T2e:En(t);function a(u){var l,c=(u=V6(u)).length,f,d=!1,h;for(r==null&&(s=i(h=o())),l=0;l<=c;++l)!(l<c&&n(f=u[l],l,u))===d&&((d=!d)?s.lineStart():s.lineEnd()),d&&s.point(+e(f,l,u),+t(f,l,u));if(h)return s=null,h+""||null}return a.x=function(u){return arguments.length?(e=typeof u=="function"?u:En(+u),a):e},a.y=function(u){return arguments.length?(t=typeof u=="function"?u:En(+u),a):t},a.defined=function(u){return arguments.length?(n=typeof u=="function"?u:En(!!u),a):n},a.curve=function(u){return arguments.length?(i=u,r!=null&&(s=i(r)),a):i},a.context=function(u){return arguments.length?(u==null?r=s=null:s=i(r=u),a):r},a}function C2e(e,t,n){var r=null,i=En(!0),s=null,o=QK,a=null,u=z6(l);e=typeof e=="function"?e:e===void 0?S2e:En(+e),t=typeof t=="function"?t:En(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?T2e:En(+n);function l(f){var d,h,p,m=(f=V6(f)).length,g,y=!1,v,_=new Array(m),w=new Array(m);for(s==null&&(a=o(v=u())),d=0;d<=m;++d){if(!(d<m&&i(g=f[d],d,f))===y)if(y=!y)h=d,a.areaStart(),a.lineStart();else{for(a.lineEnd(),a.lineStart(),p=d-1;p>=h;--p)a.point(_[p],w[p]);a.lineEnd(),a.areaEnd()}y&&(_[d]=+e(g,d,f),w[d]=+t(g,d,f),a.point(r?+r(g,d,f):_[d],n?+n(g,d,f):w[d]))}if(v)return a=null,v+""||null}function c(){return JK().defined(i).curve(o).context(s)}return l.x=function(f){return arguments.length?(e=typeof f=="function"?f:En(+f),r=null,l):e},l.x0=function(f){return arguments.length?(e=typeof f=="function"?f:En(+f),l):e},l.x1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:En(+f),l):r},l.y=function(f){return arguments.length?(t=typeof f=="function"?f:En(+f),n=null,l):t},l.y0=function(f){return arguments.length?(t=typeof f=="function"?f:En(+f),l):t},l.y1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:En(+f),l):n},l.lineX0=l.lineY0=function(){return c().x(e).y(t)},l.lineY1=function(){return c().x(e).y(n)},l.lineX1=function(){return c().x(r).y(t)},l.defined=function(f){return arguments.length?(i=typeof f=="function"?f:En(!!f),l):i},l.curve=function(f){return arguments.length?(o=f,s!=null&&(a=o(s)),l):o},l.context=function(f){return arguments.length?(f==null?s=a=null:a=o(s=f),l):s},l}function g0t(e,t){return t<e?-1:t>e?1:t>=e?0:NaN}function y0t(e){return e}function A2e(){var e=y0t,t=g0t,n=null,r=En(0),i=En(NC),s=En(0);function o(a){var u,l=(a=V6(a)).length,c,f,d=0,h=new Array(l),p=new Array(l),m=+r.apply(this,arguments),g=Math.min(NC,Math.max(-NC,i.apply(this,arguments)-m)),y,v=Math.min(Math.abs(g)/l,s.apply(this,arguments)),_=v*(g<0?-1:1),w;for(u=0;u<l;++u)(w=p[h[u]=u]=+e(a[u],u,a))>0&&(d+=w);for(t!=null?h.sort(function(E,S){return t(p[E],p[S])}):n!=null&&h.sort(function(E,S){return n(a[E],a[S])}),u=0,f=d?(g-l*_)/d:0;u<l;++u,m=y)c=h[u],w=p[c],y=m+(w>0?w*f:0)+_,p[c]={data:a[c],index:u,value:w,startAngle:m,endAngle:y,padAngle:v};return p}return o.value=function(a){return arguments.length?(e=typeof a=="function"?a:En(+a),o):e},o.sortValues=function(a){return arguments.length?(t=a,n=null,o):t},o.sort=function(a){return arguments.length?(n=a,t=null,o):n},o.startAngle=function(a){return arguments.length?(r=typeof a=="function"?a:En(+a),o):r},o.endAngle=function(a){return arguments.length?(i=typeof a=="function"?a:En(+a),o):i},o.padAngle=function(a){return arguments.length?(s=typeof a=="function"?a:En(+a),o):s},o}const v0t={draw(e,t){const n=l1(t/ZE);e.moveTo(n,0),e.arc(0,0,n,0,NC)}};function b0t(e,t){let n=null,r=z6(i);e=typeof e=="function"?e:En(e||v0t),t=typeof t=="function"?t:En(t===void 0?64:+t);function i(){let s;if(n||(n=s=r()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),s)return n=null,s+""||null}return i.type=function(s){return arguments.length?(e=typeof s=="function"?s:En(s),i):e},i.size=function(s){return arguments.length?(t=typeof s=="function"?s:En(+s),i):t},i.context=function(s){return arguments.length?(n=s??null,i):n},i}function Y0(){}function J3(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function H6(e){this._context=e}H6.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:J3(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:J3(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function I2e(e){return new H6(e)}function k2e(e){this._context=e}k2e.prototype={areaStart:Y0,areaEnd:Y0,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:J3(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function _0t(e){return new k2e(e)}function R2e(e){this._context=e}R2e.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:J3(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function w0t(e){return new R2e(e)}function N2e(e,t){this._basis=new H6(e),this._beta=t}N2e.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,n=e.length-1;if(n>0)for(var r=e[0],i=t[0],s=e[n]-r,o=t[n]-i,a=-1,u;++a<=n;)u=a/n,this._basis.point(this._beta*e[a]+(1-this._beta)*(r+u*s),this._beta*t[a]+(1-this._beta)*(i+u*o));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}};const E0t=function e(t){function n(r){return t===1?new H6(r):new N2e(r,t)}return n.beta=function(r){return e(+r)},n}(.85);function Z3(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function ZK(e,t){this._context=e,this._k=(1-t)/6}ZK.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:Z3(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:Z3(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const x0t=function e(t){function n(r){return new ZK(r,t)}return n.tension=function(r){return e(+r)},n}(0);function eX(e,t){this._context=e,this._k=(1-t)/6}eX.prototype={areaStart:Y0,areaEnd:Y0,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:Z3(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const S0t=function e(t){function n(r){return new eX(r,t)}return n.tension=function(r){return e(+r)},n}(0);function tX(e,t){this._context=e,this._k=(1-t)/6}tX.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Z3(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const T0t=function e(t){function n(r){return new tX(r,t)}return n.tension=function(r){return e(+r)},n}(0);function nX(e,t,n){var r=e._x1,i=e._y1,s=e._x2,o=e._y2;if(e._l01_a>ra){var a=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,u=3*e._l01_a*(e._l01_a+e._l12_a);r=(r*a-e._x0*e._l12_2a+e._x2*e._l01_2a)/u,i=(i*a-e._y0*e._l12_2a+e._y2*e._l01_2a)/u}if(e._l23_a>ra){var l=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,c=3*e._l23_a*(e._l23_a+e._l12_a);s=(s*l+e._x1*e._l23_2a-t*e._l12_2a)/c,o=(o*l+e._y1*e._l23_2a-n*e._l12_2a)/c}e._context.bezierCurveTo(r,i,s,o,e._x2,e._y2)}function P2e(e,t){this._context=e,this._alpha=t}P2e.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:nX(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const C0t=function e(t){function n(r){return t?new P2e(r,t):new ZK(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function D2e(e,t){this._context=e,this._alpha=t}D2e.prototype={areaStart:Y0,areaEnd:Y0,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:nX(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const A0t=function e(t){function n(r){return t?new D2e(r,t):new eX(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function O2e(e,t){this._context=e,this._alpha=t}O2e.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:nX(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const I0t=function e(t){function n(r){return t?new O2e(r,t):new tX(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function $2e(e){this._context=e}$2e.prototype={areaStart:Y0,areaEnd:Y0,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function k0t(e){return new $2e(e)}function Nce(e){return e<0?-1:1}function Pce(e,t,n){var r=e._x1-e._x0,i=t-e._x1,s=(e._y1-e._y0)/(r||i<0&&-0),o=(n-e._y1)/(i||r<0&&-0),a=(s*i+o*r)/(r+i);return(Nce(s)+Nce(o))*Math.min(Math.abs(s),Math.abs(o),.5*Math.abs(a))||0}function Dce(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function H8(e,t,n){var r=e._x0,i=e._y0,s=e._x1,o=e._y1,a=(s-r)/3;e._context.bezierCurveTo(r+a,i+a*t,s-a,o-a*n,s,o)}function e$(e){this._context=e}e$.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:H8(this,this._t0,Dce(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,H8(this,Dce(this,n=Pce(this,e,t)),n);break;default:H8(this,this._t0,n=Pce(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function M2e(e){this._context=new L2e(e)}(M2e.prototype=Object.create(e$.prototype)).point=function(e,t){e$.prototype.point.call(this,t,e)};function L2e(e){this._context=e}L2e.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,i,s){this._context.bezierCurveTo(t,e,r,n,s,i)}};function R0t(e){return new e$(e)}function N0t(e){return new M2e(e)}function F2e(e){this._context=e}F2e.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var r=Oce(e),i=Oce(t),s=0,o=1;o<n;++s,++o)this._context.bezierCurveTo(r[0][s],i[0][s],r[1][s],i[1][s],e[o],t[o]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function Oce(e){var t,n=e.length-1,r,i=new Array(n),s=new Array(n),o=new Array(n);for(i[0]=0,s[0]=2,o[0]=e[0]+2*e[1],t=1;t<n-1;++t)i[t]=1,s[t]=4,o[t]=4*e[t]+2*e[t+1];for(i[n-1]=2,s[n-1]=7,o[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)r=i[t]/s[t-1],s[t]-=r,o[t]-=r*o[t-1];for(i[n-1]=o[n-1]/s[n-1],t=n-2;t>=0;--t)i[t]=(o[t]-i[t+1])/s[t];for(s[n-1]=(e[n]+i[n-1])/2,t=0;t<n-1;++t)s[t]=2*e[t+1]-i[t+1];return[i,s]}function P0t(e){return new F2e(e)}function q6(e,t){this._context=e,this._t=t}q6.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function D0t(e){return new q6(e,.5)}function O0t(e){return new q6(e,0)}function $0t(e){return new q6(e,1)}function $ce(e,t){if((o=e.length)>1)for(var n=1,r,i,s=e[t[0]],o,a=s.length;n<o;++n)for(i=s,s=e[t[n]],r=0;r<a;++r)s[r][1]+=s[r][0]=isNaN(i[r][1])?i[r][0]:i[r][1]}function Mce(e){for(var t=e.length,n=new Array(t);--t>=0;)n[t]=t;return n}function M0t(e,t){return e[t]}function L0t(e){const t=[];return t.key=e,t}function F0t(){var e=En([]),t=Mce,n=$ce,r=M0t;function i(s){var o=Array.from(e.apply(this,arguments),L0t),a,u=o.length,l=-1,c;for(const f of s)for(a=0,++l;a<u;++a)(o[a][l]=[0,+r(f,o[a].key,l,s)]).data=f;for(a=0,c=V6(t(o));a<u;++a)o[c[a]].index=a;return n(o,c),o}return i.keys=function(s){return arguments.length?(e=typeof s=="function"?s:En(Array.from(s)),i):e},i.value=function(s){return arguments.length?(r=typeof s=="function"?s:En(+s),i):r},i.order=function(s){return arguments.length?(t=s==null?Mce:typeof s=="function"?s:En(Array.from(s)),i):t},i.offset=function(s){return arguments.length?(n=s??$ce,i):n},i}function P2(e,t,n){this.k=e,this.x=t,this.y=n}P2.prototype={constructor:P2,scale:function(e){return e===1?this:new P2(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new P2(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};P2.prototype;function rX({xScale:e,yRange:t,vertPosition:n,label:r,ticks:i,isDate:s=!1,showLines:o=!0,compact:a=!1}){const u=I.useMemo(()=>i.length>1?Math.abs(i[1].offset-i[0].offset):e.range()[0]-e.range()[1],[i,e]),l=I.useCallback(c=>(s?Qb("%B"):jy(".2s"))(c),[s]);return b.jsxs(b.Fragment,{children:[b.jsx("g",{transform:`translate(${e.range()[0]}, ${n+25})`,children:b.jsx("foreignObject",{width:Math.abs(e.range()[0]-e.range()[1]),height:20,children:b.jsx(Oc,{children:b.jsx(ls,{gap:3,children:b.jsx(Xe,{size:a?"10px":"14px",style:{color:"#878E95"},children:r})})})})}),b.jsx("path",{transform:`translate(0, ${n})`,d:["M",e.range()[0],0,"H",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}),o?b.jsx("path",{transform:`translate(0, ${t[1]})`,d:["M",e.range()[0],0,"H",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}):null,i.map(({value:c,offset:f})=>b.jsxs("g",{transform:`translate(${f}, ${n})`,children:[b.jsx("line",{y2:"6",stroke:"currentColor"}),o?b.jsx("line",{y2:`${-(t[0]-t[1])}`,stroke:"lightgray"}):null,b.jsx("foreignObject",{x:0-u/2,y:10,width:u,height:20,children:b.jsx(Oc,{children:b.jsx(ui,{withinPortal:!0,label:c,children:b.jsx(Xe,{px:2,size:"10px",style:{textAlign:"center",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"},children:+c==0?0:l(s?new Date(c):c)})})})})]},c))]})}const j0t=Object.freeze(Object.defineProperty({__proto__:null,XAxisBar:rX},Symbol.toStringTag,{value:"Module"}));function j2e({yScale:e,xRange:t,horizontalPosition:n,label:r,ticks:i,showLines:s,compact:o=!1}){const a=I.useMemo(()=>{const u=i.reduce((l,{value:c})=>{const{length:f}=`${c}`;return f>l?f:l},0);return u>10?60:u*6},[i]);return b.jsxs(b.Fragment,{children:[b.jsx("g",{transform:`translate(${n-a-40}, ${e.range()[1]}) rotate(-90)`,children:b.jsx("foreignObject",{width:Math.abs(e.range()[1]-e.range()[0]),height:20,children:b.jsx(Oc,{children:b.jsx(ls,{gap:3,children:b.jsx(Xe,{size:o?"10px":"14px",style:{color:"#878E95"},children:r})})})})}),b.jsx("path",{transform:`translate(${n}, 0)`,d:["M",0,e.range()[0],"V",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}),s?b.jsx("path",{transform:`translate(${t[1]}, 0)`,d:["M",0,e.range()[0],"V",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}):null,i.map(({value:u,offset:l})=>b.jsxs("g",{transform:`translate(${n}, ${l})`,children:[b.jsx("line",{x2:"-6",stroke:"currentColor"}),s?b.jsx("line",{x2:`${t[1]-t[0]}`,stroke:"lightgray"}):null,b.jsx("g",{style:{transform:`translate(-${a+10}px, -9px)`},children:b.jsx("foreignObject",{width:a,height:20,children:b.jsx(ls,{style:{width:"100%",height:"100%"},justify:"right",children:b.jsx(Xe,{style:{textOverflow:"ellipsis",overflow:"hidden"},size:"10px",children:u})})})},u)]},u))]})}const B0t=Object.freeze(Object.defineProperty({__proto__:null,YAxisBar:j2e},Symbol.toStringTag,{value:"Module"})),ic={top:15,left:100,right:50,bottom:50};function Cz({barsTable:e,parameters:t,data:n}){const[r,{height:i,width:s}]=x1(),o=I.useMemo(()=>s-ic.left-ic.right,[s]),a=I.useMemo(()=>i-ic.top-ic.bottom,[i]),u=I.useMemo(()=>{const d=Array.from(new Set(n.map(h=>h[t.category])));return Gb(E2e).domain(d)},[n,t.category]),l=I.useMemo(()=>e?Kf([ic.left,o+ic.left]).domain([0,ch(e.objects().map(d=>d.count))]).nice():null,[e,o]),c=I.useMemo(()=>e?yS([ic.top,a+ic.top]).domain(e.array(t.category).sort()).paddingInner(.1):null,[e,a,t.category]),f=I.useMemo(()=>!l||!c||!u||!e?null:e.objects().map((d,h)=>d[t.category]===null||d.count===null?null:b.jsxs("g",{children:[b.jsx("rect",{x:ic.left,y:c(d[t.category]),fill:u(d[t.category]),height:c.bandwidth(),width:l(d.count)-ic.left},h),b.jsx("text",{x:l(d.count)+5,y:c(d[t.category])+c.bandwidth()/2,style:{textAlign:"center",dominantBaseline:"middle",fontSize:14},children:d.count})]},h)),[e,u,t.category,l,c]);return c&&l?b.jsxs("svg",{ref:r,style:{height:"200px",width:"550px",fontFamily:'BlinkMacSystemFont, -apple-system, "Segoe UI", "Roboto", "Oxygen", "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue", "Helvetica", "Arial", sans-serif'},children:[b.jsx(rX,{xScale:l,yRange:c.range(),vertPosition:a+ic.top,showLines:!1,label:"Count",ticks:l.ticks(5).map(d=>({value:d.toString(),offset:l(d)}))}),c?b.jsx(j2e,{yScale:c,horizontalPosition:ic.left,xRange:l.range(),label:t.category,ticks:u.domain().map(d=>({value:d,offset:c(d)+c.bandwidth()/2}))}):null,f]}):b.jsx(od,{})}const U0t=Object.freeze(Object.defineProperty({__proto__:null,Bar:Cz,default:Cz},Symbol.toStringTag,{value:"Module"})),dr=Array.isArray;function Zu(e){return e!=null?dr(e)?e:[e]:[]}function z0t(e=0,t=1/0){return`${Lce(e)} < row_number() && row_number() <= ${Lce(t)}`}function Lce(e){return e<0?`count() + ${e}`:e}class B2e{constructor(t){t&&(this._params=t)}params(t){return arguments.length?(t&&(this._params={...this._params,...t}),this):this._params}reify(t){return this.__reify(this,t)}count(t){return this.__count(this,t)}derive(t,n){return this.__derive(this,t,n)}filter(t){return this.__filter(this,t)}slice(t,n){return this.filter(z0t(t,n)).reify()}groupby(...t){return this.__groupby(this,t.flat())}orderby(...t){return this.__orderby(this,t.flat())}relocate(t,n){return this.__relocate(this,Zu(t),n)}rename(...t){return this.__rename(this,t.flat())}rollup(t){return this.__rollup(this,t)}sample(t,n){return this.__sample(this,t,n)}select(...t){return this.__select(this,t.flat())}ungroup(){return this.__ungroup(this)}unorder(){return this.__unorder(this)}dedupe(...t){return this.__dedupe(this,t.flat())}impute(t,n){return this.__impute(this,t,n)}fold(t,n){return this.__fold(this,t,n)}pivot(t,n,r){return this.__pivot(this,t,n,r)}spread(t,n){return this.__spread(this,t,n)}unroll(t,n){return this.__unroll(this,t,n)}lookup(t,n,...r){return this.__lookup(this,t,n,r.flat())}join(t,n,r,i){return this.__join(this,t,n,r,i)}join_left(t,n,r,i){const s={...i,left:!0,right:!1};return this.__join(this,t,n,r,s)}join_right(t,n,r,i){const s={...i,left:!1,right:!0};return this.__join(this,t,n,r,s)}join_full(t,n,r,i){const s={...i,left:!0,right:!0};return this.__join(this,t,n,r,s)}cross(t,n,r){return this.__cross(this,t,n,r)}semijoin(t,n){return this.__semijoin(this,t,n)}antijoin(t,n){return this.__antijoin(this,t,n)}concat(...t){return this.__concat(this,t.flat())}union(...t){return this.__union(this,t.flat())}intersect(...t){return this.__intersect(this,t.flat())}except(...t){return this.__except(this,t.flat())}}function xn(e){throw Error(e)}function nu(e){return typeof e=="number"}function gi(e){return typeof e=="function"}function W6(e,t){const n=Array(e);if(gi(t))for(let r=0;r<e;++r)n[r]=t(r);else n.fill(t);return n}let V0t=class extends B2e{constructor(t,n,r,i,s,o,a){super(a),this._names=Object.freeze(t),this._data=r,this._total=n,this._nrows=i?i.count():n,this._mask=n!==this._nrows&&i||null,this._group=s||null,this._order=o||null}create(t){xn("Not implemented")}get[Symbol.toStringTag](){if(!this._names)return"Object";const t=this.numRows()+" row"+(this.numRows()!==1?"s":"");return`Table: ${this.numCols()+" col"+(this.numCols()!==1?"s":"")} x ${t}`+(this.isFiltered()?` (${this.totalRows()} backing)`:"")+(this.isGrouped()?`, ${this._group.size} groups`:"")+(this.isOrdered()?", ordered":"")}isFiltered(){return!!this._mask}isGrouped(){return!!this._group}isOrdered(){return!!this._order}data(){return this._data}mask(){return this._mask}groups(){return this._group}comparator(){return this._order}totalRows(){return this._total}numRows(){return this._nrows}get size(){return this._nrows}numCols(){return this._names.length}columnNames(t){return t?this._names.filter(t):this._names.slice()}columnName(t){return this._names[t]}columnIndex(t){return this._names.indexOf(t)}columnArray(t,n){return this.array(t,n)}array(t,n){xn("Not implemented")}*values(t){const n=this.getter(t),r=this.numRows();for(let i=0;i<r;++i)yield n(i)}get(t,n=0){xn("Not implemented")}getter(t){xn("Not implemented")}objects(t){xn("Not implemented")}object(t){xn("Not implemented")}[Symbol.iterator](){xn("Not implemented")}print(t={}){nu(t)?t={limit:t}:t.limit==null&&(t.limit=10);const n=this.objects({...t,grouped:!1}),r=`${this[Symbol.toStringTag]}. Showing ${n.length} rows.`;return console.log(r),console.table(n),this}indices(t=!0){if(this._index)return this._index;const n=this.numRows(),r=new Uint32Array(n),i=this.isOrdered(),s=this.mask();let o=-1;if(s)for(let a=s.next(0);a>=0;a=s.next(a+1))r[++o]=a;else for(let a=0;a<n;++a)r[++o]=a;if(t&&i){const a=this._order,u=this._data;r.sort((l,c)=>a(l,c,u))}return(t||!i)&&(this._index=r),r}partitions(t=!0){if(this._partitions)return this._partitions;if(!this.isGrouped())return[this.indices(t)];const{keys:n,size:r}=this._group,i=W6(r,()=>[]),s=this._index,o=this.mask(),a=this.numRows();if(s&&this.isOrdered())for(let u=0,l;u<a;++u)l=s[u],i[n[l]].push(l);else if(o)for(let u=o.next(0);u>=0;u=o.next(u+1))i[n[u]].push(u);else for(let u=0;u<a;++u)i[n[u]].push(u);if(t&&!s&&this.isOrdered()){const u=this._order,l=this._data;for(let c=0;c<r;++c)i[c].sort((f,d)=>u(f,d,l))}return(t||!this.isOrdered())&&(this._partitions=i),i}scan(t,n,r=1/0,i=0){const s=this._mask,o=this._nrows,a=this._data;let u=i||0;if(u>o)return;const l=Math.min(o,u+r),c=()=>u=this._total;if(n&&this.isOrdered()||s&&this._index){const f=this.indices(),d=this._data;for(;u<l;++u)t(f[u],d,c)}else if(s){let f=l-u+1;for(u=s.nth(u);--f&&u>-1;u=s.next(u+1))t(u,a,c)}else for(;u<l;++u)t(u,a,c)}slice(t=0,n=1/0){if(this.isGrouped())return super.slice(t,n);const r=[],i=this.numRows();return t=Math.max(0,t+(t<0?i:0)),n=Math.min(i,Math.max(0,n+(n<0?i:0))),this.scan(s=>r.push(s),!0,n-t,t),this.reify(r)}reduce(t){return this.__reduce(this,t)}},H0t=class{constructor(t){this.data=t}get length(){return this.data.length}get(t){return this.data[t]}[Symbol.iterator](){return this.data[Symbol.iterator]()}},q0t=function(e){return e&&gi(e.get)?e:new H0t(e)};function km(e){return e instanceof Date}function wa(e){return e===Object(e)}function t$(e){return e instanceof RegExp}function Bo(e){return typeof e=="string"}function W0t(e,t){const n=r=>xn(`Illegal argument type: ${r||typeof e}`);return e instanceof Map?Fce(e.entries(),t):km(e)?n("Date"):t$(e)?n("RegExp"):Bo(e)?n():dr(e)?G0t(e,t):gi(e[Symbol.iterator])?Y0t(e,t):wa(e)?Fce(Object.entries(e),t):n()}function Fce(e,t=["key","value"]){const n=[],r=[];for(const[s,o]of e)n.push(s),r.push(o);const i={};return t[0]&&(i[t[0]]=n),t[1]&&(i[t[1]]=r),i}function G0t(e,t){const n=e.length,r={},i=s=>r[s]=Array(n);if(n){t=t||Object.keys(e[0]);const s=t.map(i),o=s.length;for(let a=0;a<n;++a){const u=e[a];for(let l=0;l<o;++l)s[l][a]=u[t[l]]}}else t&&t.forEach(i);return r}function Y0t(e,t){const n={},r=o=>n[o]=[];let i,s;for(const o of e){i||(t=t||Object.keys(o),i=t.map(r),s=i.length);for(let a=0;a<s;++a)i[a].push(o[t[a]])}return!i&&t&&t.forEach(r),n}const{hasOwnProperty:K0t}=Object.prototype;function Xf(e,t){return K0t.call(e,t)}function ec(e){return e?new jce({...e.data()},e.columnNames()):new jce}class jce{constructor(t,n){this.data=t||{},this.names=n||[]}add(t,n){return this.has(t)||this.names.push(t+""),this.data[t]=n}has(t){return Xf(this.data,t)}new(){return this.filter=null,this.groups=this.groups||null,this.order=null,this}groupby(t){return this.groups=t,this}}const ar=void 0,X0t=Object.getPrototypeOf(Int8Array);function Pk(e){return e instanceof X0t}function c1(e){return dr(e)||Pk(e)}function Df(e){return e!=null&&e===e}const MT=e=>c1(e)||Bo(e),Q0t={compact:e=>c1(e)?e.filter(t=>Df(t)):e,concat:(...e)=>[].concat(...e),includes:(e,t,n)=>MT(e)?e.includes(t,n):!1,indexof:(e,t)=>MT(e)?e.indexOf(t):-1,join:(e,t)=>c1(e)?e.join(t):ar,lastindexof:(e,t)=>MT(e)?e.lastIndexOf(t):-1,length:e=>MT(e)?e.length:0,pluck:(e,t)=>c1(e)?e.map(n=>Df(n)?n[t]:ar):ar,reverse:e=>c1(e)?e.slice().reverse():Bo(e)?e.split("").reverse().join(""):ar,slice:(e,t,n)=>MT(e)?e.slice(t,n):ar};function J0t(e,t,n,r,i){return e==null?null:e<t?-1/0:e>n?1/0:(e=Math.max(t,Math.min(e,n)),t+r*Math.floor(1e-14+(e-t)/r+(i||0)))}function CD(e,t,n="0"){const r=e+"",i=r.length;return i<t?Array(t-i+1).join(n)+r:r}const Td=e=>(e<10?"0":"")+e,Z0t=e=>e<0?"-"+CD(-e,6):e>9999?"+"+CD(e,6):CD(e,4);function U2e(e,t,n,r,i,s,o,a,u){const l=a?"Z":"";return Z0t(e)+"-"+Td(t+1)+"-"+Td(n)+(!u||o?"T"+Td(r)+":"+Td(i)+":"+Td(s)+"."+CD(o,3)+l:s?"T"+Td(r)+":"+Td(i)+":"+Td(s)+l:i||r||!a?"T"+Td(r)+":"+Td(i)+l:"")}function z2e(e,t){return isNaN(e)?"Invalid Date":U2e(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds(),!1,t)}function G6(e,t){return isNaN(e)?"Invalid Date":U2e(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds(),!0,t)}const eyt=/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/;function tyt(e){return e.match(eyt)&&!isNaN(Date.parse(e))}function nyt(e,t=Date.parse){return tyt(e)?t(e):e}const V2e=6e4,H2e=864e5,q2e=6048e5,Vi=new Date,Hi=new Date,es=e=>(Vi.setTime(typeof e=="string"?nyt(e):e),Vi);function ryt(e,t,n,r,i,s,o){return arguments.length?new Date(e,t||0,n??1,r||0,i||0,s||0,o||0):new Date(Date.now())}function iyt(e,t,n,r,i,s,o){return arguments.length?new Date(Date.UTC(e,t||0,n??1,r||0,i||0,s||0,o||0)):new Date(Date.now())}function syt(e){Hi.setTime(+e),Hi.setHours(0,0,0,0),Vi.setTime(+Hi),Vi.setMonth(0),Vi.setDate(1);const t=(Hi.getTimezoneOffset()-Vi.getTimezoneOffset())*V2e;return Math.floor(1+(Hi-Vi-t)/H2e)}function oyt(e){Hi.setTime(+e),Hi.setUTCHours(0,0,0,0);const t=Date.UTC(Hi.getUTCFullYear(),0,1);return Math.floor(1+(Hi-t)/H2e)}function ayt(e,t){const n=t||0;Hi.setTime(+e),Hi.setDate(Hi.getDate()-(Hi.getDay()+7-n)%7),Hi.setHours(0,0,0,0),Vi.setTime(+e),Vi.setMonth(0),Vi.setDate(1),Vi.setDate(1-(Vi.getDay()+7-n)%7),Vi.setHours(0,0,0,0);const r=(Hi.getTimezoneOffset()-Vi.getTimezoneOffset())*V2e;return Math.floor((1+(Hi-Vi)-r)/q2e)}function uyt(e,t){const n=t||0;return Hi.setTime(+e),Hi.setUTCDate(Hi.getUTCDate()-(Hi.getUTCDay()+7-n)%7),Hi.setUTCHours(0,0,0,0),Vi.setTime(+e),Vi.setUTCMonth(0),Vi.setUTCDate(1),Vi.setUTCDate(1-(Vi.getUTCDay()+7-n)%7),Vi.setUTCHours(0,0,0,0),Math.floor((1+(Hi-Vi))/q2e)}const lyt={format_date:(e,t)=>z2e(es(e),!t),format_utcdate:(e,t)=>G6(es(e),!t),timestamp:e=>+es(e),year:e=>es(e).getFullYear(),quarter:e=>Math.floor(es(e).getMonth()/3),month:e=>es(e).getMonth(),date:e=>es(e).getDate(),dayofweek:e=>es(e).getDay(),hours:e=>es(e).getHours(),minutes:e=>es(e).getMinutes(),seconds:e=>es(e).getSeconds(),milliseconds:e=>es(e).getMilliseconds(),utcyear:e=>es(e).getUTCFullYear(),utcquarter:e=>Math.floor(es(e).getUTCMonth()/3),utcmonth:e=>es(e).getUTCMonth(),utcdate:e=>es(e).getUTCDate(),utcdayofweek:e=>es(e).getUTCDay(),utchours:e=>es(e).getUTCHours(),utcminutes:e=>es(e).getUTCMinutes(),utcseconds:e=>es(e).getUTCSeconds(),utcmilliseconds:e=>es(e).getUTCMilliseconds(),datetime:ryt,dayofyear:syt,week:ayt,utcdatetime:iyt,utcdayofyear:oyt,utcweek:uyt,now:Date.now};function iX(e,t){return e==null||t==null||e!==e||t!==t?!1:e===t?!0:km(e)||km(t)?+e==+t:t$(e)&&t$(t)?e+""==t+"":wa(e)&&wa(t)?cyt(e,t):!1}function cyt(e,t){if(Object.getPrototypeOf(e)!==Object.getPrototypeOf(t))return!1;if(e.length||t.length)return Bce(e,t);const n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length||(n.sort(),r.sort(),!Bce(n,r,(s,o)=>s===o)))return!1;const i=n.length;for(let s=0;s<i;++s){const o=n[s];if(!iX(e[o],t[o]))return!1}return!0}function Bce(e,t,n=iX){const r=e.length;if(r!==t.length)return!1;for(let i=0;i<r;++i)if(!n(e[i],t[i]))return!1;return!0}const fyt={parse_json:e=>JSON.parse(e),to_json:e=>JSON.stringify(e)};let dyt=Math.random;function _S(){return dyt()}const hyt={random:_S,is_nan:Number.isNaN,is_finite:Number.isFinite,abs:Math.abs,cbrt:Math.cbrt,ceil:Math.ceil,clz32:Math.clz32,exp:Math.exp,expm1:Math.expm1,floor:Math.floor,fround:Math.fround,greatest:Math.max,least:Math.min,log:Math.log,log10:Math.log10,log1p:Math.log1p,log2:Math.log2,pow:Math.pow,round:Math.round,sign:Math.sign,sqrt:Math.sqrt,trunc:Math.trunc,degrees:e=>180*e/Math.PI,radians:e=>Math.PI*e/180,acos:Math.acos,acosh:Math.acosh,asin:Math.asin,asinh:Math.asinh,atan:Math.atan,atan2:Math.atan2,atanh:Math.atanh,cos:Math.cos,cosh:Math.cosh,sin:Math.sin,sinh:Math.sinh,tan:Math.tan,tanh:Math.tanh};function sX(e){return e instanceof Map}function pyt(e){return e instanceof Set}function AD(e){return sX(e)||pyt(e)}function q8(e){return Array.from(e)}const myt={has:(e,t)=>AD(e)?e.has(t):e!=null?Xf(e,t):!1,keys:e=>sX(e)?q8(e.keys()):e!=null?Object.keys(e):[],values:e=>AD(e)?q8(e.values()):e!=null?Object.values(e):[],entries:e=>AD(e)?q8(e.entries()):e!=null?Object.entries(e):[],object:e=>e?Object.fromEntries(e):ar};function gyt(e,t,n){if(t instanceof Map){if(t.has(e))return t.get(e)}else if(Xf(t,e))return t[e];return n!==void 0?n:e}function yyt(e,t,n){let r=arguments.length;e=+e,t=+t,n=r<2?(t=e,e=0,1):r<3?1:+n,r=Math.max(0,Math.ceil((t-e)/n))|0;const i=new Array(r);for(let s=0;s<r;++s)i[s]=e+s*n;return i}const vyt={parse_date:e=>e==null?e:new Date(e),parse_float:e=>e==null?e:Number.parseFloat(e),parse_int:(e,t)=>e==null?e:Number.parseInt(e,t),endswith:(e,t,n)=>e==null?!1:String(e).endsWith(t,n),match:(e,t,n)=>{const r=e==null?e:String(e).match(t);return n==null||r==null?r:typeof n=="number"?r[n]:r.groups?r.groups[n]:null},normalize:(e,t)=>e==null?e:String(e).normalize(t),padend:(e,t,n)=>e==null?e:String(e).padEnd(t,n),padstart:(e,t,n)=>e==null?e:String(e).padStart(t,n),upper:e=>e==null?e:String(e).toUpperCase(),lower:e=>e==null?e:String(e).toLowerCase(),repeat:(e,t)=>e==null?e:String(e).repeat(t),replace:(e,t,n)=>e==null?e:String(e).replace(t,String(n)),substring:(e,t,n)=>e==null?e:String(e).substring(t,n),split:(e,t,n)=>e==null?[]:String(e).split(t,n),startswith:(e,t,n)=>e==null?!1:String(e).startsWith(t,n),trim:e=>e==null?e:String(e).trim()},Rw={bin:J0t,equal:iX,recode:gyt,sequence:yyt,...Q0t,...lyt,...fyt,...hyt,...myt,...vyt};function ZA(e){return typeof e=="bigint"}function kh(e){return e===void 0?e+"":ZA(e)?e+"n":JSON.stringify(e)}function vn(e,t=[],n=[]){return new byt(e,Zu(t),Zu(n))}let byt=class{constructor(t,n,r){this.name=t,this.fields=n,this.params=r}toString(){const t=[...this.fields.map(n=>`d[${kh(n)}]`),...this.params.map(kh)];return`d => op.${this.name}(${t})`}toObject(){return{expr:this.toString(),func:!0}}};const W2e=e=>vn("any",e),G2e=()=>vn("count"),Y2e=e=>vn("array_agg",e),K2e=e=>vn("array_agg_distinct",e),X2e=(e,t)=>vn("map_agg",[e,t]),Q2e=(e,t)=>vn("object_agg",[e,t]),J2e=(e,t)=>vn("entries_agg",[e,t]);({...Rw});function _yt(e,t){e=AD(e)?e:new Set(e);let n=t,r=0;for(;e.has(n);)n=t+ ++r;return n}function wyt(e,t){if(!e||!t)return e;const{keys:n,rows:r,size:i}=e,s=new Int32Array(i);t.scan(c=>s[n[c]]=1);const o=s.reduce((c,f)=>c+f,0);if(o===i)return e;const a=Array(o);let u=0;for(let c=0;c<i;++c)s[c]&&(a[s[c]=u++]=r[c]);const l=new Uint32Array(n.length);return t.scan(c=>l[c]=s[n[c]]),{...e,keys:l,rows:a,size:u}}function Eyt(e,t,n,r){const{keys:i,rows:s,size:o}=e;let a=s,u=o,l=null;if(n){l=new Int32Array(o),t(p=>l[i[p]]=1);const h=l.reduce((p,m)=>p+m,0);if(h!==o){a=Array(h),u=0;for(let p=0;p<o;++p)l[p]&&(a[l[p]=u++]=s[p])}}let c=-1;const f=new Uint32Array(r);return t(u!==o?h=>f[++c]=l[i[h]]:h=>f[++c]=i[h]),{...e,keys:f,rows:a,size:u}}function xyt(e,t,n,r){const i=r==="map"||r===!0?X2e:r==="entries"?J2e:r==="object"?Q2e:xn('groups option must be "map", "entries", or "object".'),{names:s}=e.groups(),o=_yt(e.columnNames(),"_");let a=e.select().reify(t).create({data:{[o]:n}}).rollup({[o]:Y2e(o)});for(let u=s.length;--u>=0;)a=a.groupby(s.slice(0,u)).rollup({[o]:i(s[u],o)});return a.get(o)}const Syt="ArrayPattern",Tyt="ArrowFunctionExpression",Cyt="FunctionExpression",T0="Identifier",wS="Literal",Z2e="MemberExpression",Ayt="ObjectExpression",eCe="ObjectPattern",tCe="Property",Dk="Column",Iyt="Constant",kyt="Dictionary",Ryt="Function",Nyt="Parameter",nCe="Op",Zr=(e,t)=>{const n=Pyt[e.type];return n?n(e,t):xn(`Unsupported expression construct: ${e.type}`)},W8=(e,t)=>"("+Zr(e.left,t)+" "+e.operator+" "+Zr(e.right,t)+")",G8=(e,t)=>"("+Dd(e.params,t)+")=>"+Zr(e.body,t),Uce=(e,t)=>Zr(e.callee,t)+"("+Dd(e.arguments,t)+")",Dd=(e,t,n=",")=>e.map(r=>Zr(r,t)).join(n),rCe=e=>e.computed?`[${kh(e.name)}]`:`.${e.name}`,zce=(e,t,n)=>{const r=e.table||"";return`data${r}${rCe(e)}.${n}(${t.index}${r})`},Pyt={Constant:e=>e.raw,Column:(e,t)=>zce(e,t,"get"),Dictionary:(e,t)=>zce(e,t,"key"),Function:e=>`fn.${e.name}`,Parameter:e=>`$${rCe(e)}`,Op:(e,t)=>`op(${kh(e.name)},${t.op||t.index})`,Literal:e=>e.raw,Identifier:e=>e.name,TemplateLiteral:(e,t)=>{const{quasis:n,expressions:r}=e,i=r.length;let s=n[0].value.raw;for(let o=0;o<i;)s+="${"+Zr(r[o],t)+"}"+n[++o].value.raw;return"`"+s+"`"},MemberExpression:(e,t)=>{const n=!e.computed,r=Zr(e.object,t),i=Zr(e.property,t);return r+(n?"."+i:"["+i+"]")},CallExpression:Uce,NewExpression:(e,t)=>"new "+Uce(e,t),ArrayExpression:(e,t)=>"["+Dd(e.elements,t)+"]",AssignmentExpression:W8,BinaryExpression:W8,LogicalExpression:W8,UnaryExpression:(e,t)=>"("+e.operator+Zr(e.argument,t)+")",ConditionalExpression:(e,t)=>"("+Zr(e.test,t)+"?"+Zr(e.consequent,t)+":"+Zr(e.alternate,t)+")",ObjectExpression:(e,t)=>"({"+Dd(e.properties,t)+"})",Property:(e,t)=>{const n=Zr(e.key,t);return(e.computed?`[${n}]`:n)+":"+Zr(e.value,t)},ArrowFunctionExpression:G8,FunctionExpression:G8,FunctionDeclaration:G8,ArrayPattern:(e,t)=>"["+Dd(e.elements,t)+"]",ObjectPattern:(e,t)=>"{"+Dd(e.properties,t)+"}",VariableDeclaration:(e,t)=>e.kind+" "+Dd(e.declarations,t,","),VariableDeclarator:(e,t)=>Zr(e.id,t)+"="+Zr(e.init,t),SpreadElement:(e,t)=>"..."+Zr(e.argument,t),BlockStatement:(e,t)=>"{"+Dd(e.body,t,";")+";}",BreakStatement:()=>"break",ExpressionStatement:(e,t)=>Zr(e.expression,t),IfStatement:(e,t)=>"if ("+Zr(e.test,t)+")"+Zr(e.consequent,t)+(e.alternate?" else "+Zr(e.alternate,t):""),SwitchStatement:(e,t)=>"switch ("+Zr(e.discriminant,t)+") {"+Dd(e.cases,t,"")+"}",SwitchCase:(e,t)=>(e.test?"case "+Zr(e.test,t):"default")+": "+Dd(e.consequent,t,";")+";",ReturnStatement:(e,t)=>"return "+Zr(e.argument,t),Program:(e,t)=>Zr(e.body[0],t)};function n$(e,t={index:"row"}){return Zr(e,t)}function Dyt(e,t,n=15,r=!0,i=0,s){const a=Math.LN10;if(s==null){const u=Math.ceil(Math.log(n)/a),l=t-e||Math.abs(e)||1,c=[5,2];for(s=Math.max(i,Math.pow(10,Math.round(Math.log(l)/a)-u));Math.ceil(l/s)>n;)s*=10;const f=c.length;for(let d=0;d<f;++d){const h=s/c[d];h>=i&&l/h<=n&&(s=h)}}if(r){let u=Math.log(s);const l=u>=0?0:~~(-u/a)+1,c=Math.pow(10,-l-1);u=Math.floor(e/s+c)*s,e=e<u?u-s:u,t=Math.ceil(t/s)*s}return[e,t===e?e+s:t,s]}function ex(e){const t=typeof e;return t==="string"?`"${e}"`:t!=="object"||!e?e:km(e)?+e:dr(e)||Pk(e)?`[${e.map(ex)}]`:t$(e)?e+"":Oyt(e)}function Oyt(e){let t="{",n=-1;for(const r in e)++n>0&&(t+=","),t+=`"${r}":${ex(e[r])}`;return t+="}",t}function r$(e,t){const n=e.length;return n===1?(r,i)=>ex(e[0](r,i)):(r,i)=>{let s="";for(let o=0;o<n;++o){o>0&&(s+="|");const a=e[o](r,i);if(t&&(a==null||a!==a))return null;s+=ex(a)}return s}}function $yt(){const e=new Map;return{count(){return e.size},values(){return Array.from(e.values(),t=>t.v)},increment(t){const n=ex(t),r=e.get(n);r?++r.n:e.set(n,{v:t,n:1})},decrement(t){const n=ex(t),r=e.get(n);r.n===1?e.delete(n):--r.n},forEach(t){e.forEach(({v:n,n:r})=>t(n,r))}}}function $p(){}function Myt(e,t=0,n=e.length){let r=e[t++];for(let i=t;i<n;++i)r*=e[i];return r}function As(e){return e.init=e.init||$p,e.add=e.add||$p,e.rem=e.rem||$p,e}function Vce(e,t){return e.product_v=!1,e.product=t}const iCe={count:{create:()=>As({value:e=>e.count}),param:[]},array_agg:{create:()=>As({init:e=>e.values=!0,value:e=>e.list.values(e.stream)}),param:[1]},object_agg:{create:()=>As({init:e=>e.values=!0,value:e=>Object.fromEntries(e.list.values())}),param:[2]},map_agg:{create:()=>As({init:e=>e.values=!0,value:e=>new Map(e.list.values())}),param:[2]},entries_agg:{create:()=>As({init:e=>e.values=!0,value:e=>e.list.values(e.stream)}),param:[2]},any:{create:()=>As({add:(e,t)=>{e.any==null&&(e.any=t)},value:e=>e.valid?e.any:ar}),param:[1]},valid:{create:()=>As({value:e=>e.valid}),param:[1]},invalid:{create:()=>As({value:e=>e.count-e.valid}),param:[1]},distinct:{create:()=>({init:e=>e.distinct=$yt(),value:e=>e.distinct.count()+(e.valid===e.count?0:1),add:(e,t)=>e.distinct.increment(t),rem:(e,t)=>e.distinct.decrement(t)}),param:[1]},array_agg_distinct:{create:()=>As({value:e=>e.distinct.values()}),param:[1],req:["distinct"]},mode:{create:()=>As({value:e=>{let t=ar,n=0;return e.distinct.forEach((r,i)=>{i>n&&(n=i,t=r)}),t}}),param:[1],req:["distinct"]},sum:{create:()=>({init:e=>e.sum=0,value:e=>e.valid?e.sum:ar,add:(e,t)=>ZA(t)?e.sum===0?e.sum=t:e.sum+=t:e.sum+=+t,rem:(e,t)=>e.sum-=t}),param:[1]},product:{create:()=>({init:e=>Vce(e,1),value:e=>e.valid?e.product_v?Vce(e,Myt(e.list.values())):e.product:void 0,add:(e,t)=>ZA(t)&&e.product===1?e.product=t:e.product*=t,rem:(e,t)=>t==0||t===1/0||t===-1/0?e.product_v=!0:e.product/=t}),param:[1],stream:["array_agg"]},mean:{create:()=>({init:e=>e.mean=0,value:e=>e.valid?e.mean:ar,add:(e,t)=>{e.mean_d=t-e.mean,e.mean+=e.mean_d/e.valid},rem:(e,t)=>{e.mean_d=t-e.mean,e.mean-=e.valid?e.mean_d/e.valid:e.mean}}),param:[1]},average:{create:()=>As({value:e=>e.valid?e.mean:ar}),param:[1],req:["mean"]},variance:{create:()=>({init:e=>e.dev=0,value:e=>e.valid>1?e.dev/(e.valid-1):ar,add:(e,t)=>e.dev+=e.mean_d*(t-e.mean),rem:(e,t)=>e.dev-=e.mean_d*(t-e.mean)}),param:[1],req:["mean"]},variancep:{create:()=>As({value:e=>e.valid>1?e.dev/e.valid:ar}),param:[1],req:["variance"]},stdev:{create:()=>As({value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid-1)):ar}),param:[1],req:["variance"]},stdevp:{create:()=>As({value:e=>e.valid>1?Math.sqrt(e.dev/e.valid):ar}),param:[1],req:["variance"]},min:{create:()=>({init:e=>e.min=ar,value:e=>e.min=Number.isNaN(e.min)?e.list.min():e.min,add:(e,t)=>{(t<e.min||e.min===ar)&&(e.min=t)},rem:(e,t)=>{t<=e.min&&(e.min=NaN)}}),param:[1],stream:["array_agg"]},max:{create:()=>({init:e=>e.max=ar,value:e=>e.max=Number.isNaN(e.max)?e.list.max():e.max,add:(e,t)=>{(t>e.max||e.max===ar)&&(e.max=t)},rem:(e,t)=>{t>=e.max&&(e.max=NaN)}}),param:[1],stream:["array_agg"]},quantile:{create:e=>As({value:t=>t.list.quantile(e)}),param:[1,1],req:["array_agg"]},median:{create:()=>As({value:e=>e.list.quantile(.5)}),param:[1],req:["array_agg"]},covariance:{create:()=>({init:e=>{e.cov=e.mean_x=e.mean_y=e.dev_x=e.dev_y=0},value:e=>e.valid>1?e.cov/(e.valid-1):ar,add:(e,t,n)=>{const r=t-e.mean_x,i=n-e.mean_y;e.mean_x+=r/e.valid,e.mean_y+=i/e.valid;const s=n-e.mean_y;e.dev_x+=r*(t-e.mean_x),e.dev_y+=i*s,e.cov+=r*s},rem:(e,t,n)=>{const r=t-e.mean_x,i=n-e.mean_y;e.mean_x-=e.valid?r/e.valid:e.mean_x,e.mean_y-=e.valid?i/e.valid:e.mean_y;const s=n-e.mean_y;e.dev_x-=r*(t-e.mean_x),e.dev_y-=i*s,e.cov-=r*s}}),param:[2]},covariancep:{create:()=>As({value:e=>e.valid>1?e.cov/e.valid:ar}),param:[2],req:["covariance"]},corr:{create:()=>As({value:e=>e.valid>1?e.cov/(Math.sqrt(e.dev_x)*Math.sqrt(e.dev_y)):ar}),param:[2],req:["covariance"]},bins:{create:(e,t,n,r)=>As({value:i=>Dyt(i.min,i.max,e,t,n,r)}),param:[1,4],req:["min","max"]}},Hce={create(){let e;return{init:()=>e=1,value:t=>{const n=t.index;return n&&!t.peer(n)?e=n+1:e}}},param:[]},qce={create(){let e;return{init:()=>e=0,value:t=>{const{index:n,peer:r,size:i}=t;let s=n;if(e<s){for(;s+1<i&&r(s+1);)++s;e=s}return(1+e)/i}}},param:[]},sCe={row_number:{create(){return{init:$p,value:e=>e.index+1}},param:[]},rank:Hce,avg_rank:{create(){let e,t;return{init:()=>(e=-1,t=1),value:n=>{const r=n.index;if(r>=e){for(t=e=r+1;n.peer(e);t+=++e);t/=e-r}return t}}},param:[]},dense_rank:{create(){let e;return{init:()=>e=1,value:t=>{const n=t.index;return n&&!t.peer(n)?++e:e}}},param:[]},percent_rank:{create(){const{init:e,value:t}=Hce.create();return{init:e,value:n=>(t(n)-1)/(n.size-1)}},param:[]},cume_dist:qce,ntile:{create(e){e=+e,e>0||xn("ntile num must be greater than zero.");const{init:t,value:n}=qce.create();return{init:t,value:r=>Math.ceil(e*n(r))}},param:[0,1]},lag:{create(e,t=ar){return e=+e||1,{init:$p,value:(n,r)=>{const i=n.index-e;return i>=0?n.value(i,r):t}}},param:[1,2]},lead:{create(e,t=ar){return e=+e||1,{init:$p,value:(n,r)=>{const i=n.index+e;return i<n.size?n.value(i,r):t}}},param:[1,2]},first_value:{create(){return{init:$p,value:(e,t)=>e.value(e.i0,t)}},param:[1]},last_value:{create(){return{init:$p,value:(e,t)=>e.value(e.i1-1,t)}},param:[1]},nth_value:{create(e){return e=+e,e>0||xn("nth_value nth must be greater than zero."),{init:$p,value:(t,n)=>{const r=t.i0+(e-1);return r<t.i1?t.value(r,n):ar}}},param:[1,1]},fill_down:{create(e=ar){let t;return{init:()=>t=e,value:(n,r)=>{const i=n.value(n.index,r);return Df(i)?t=i:t}}},param:[1,1]},fill_up:{create(e=ar){let t,n;return{init:()=>(t=e,n=-1),value:(r,i)=>r.index<=n?t:(n=Lyt(r,i,r.index))>=0?t=r.value(n,i):(n=r.size,t=e)}},param:[1,1]}};function Lyt(e,t,n){for(const r=e.size;n<r;++n)if(Df(e.value(n,t)))return n;return-1}function oX(e){return Xf(iCe,e)}function aX(e){return Xf(sCe,e)}function oCe(e){return Xf(Rw,e)||e==="row_object"}function aCe(e){return oX(e)&&iCe[e]}function uCe(e){return aX(e)&&sCe[e]}function LT(e,t,n){return e=`"use strict"; return ${e};`,Function("fn","$",e)(t,n)}const uX={escape:(e,t,n)=>LT(e,t,n),expr:(e,t)=>LT(`(row,data,op)=>${e}`,Rw,t),expr2:(e,t)=>LT(`(row0,data0,row,data)=>${e}`,Rw,t),join:(e,t)=>LT(`(row1,data1,row2,data2)=>${e}`,Rw,t),param:(e,t)=>LT(e,Rw,t)},Fyt={"==":1,"!=":1,"===":1,"!==":1};function lCe(e,t,n=0,r,i){if(e.type=Dk,e.name=t,e.table=n,i&&r&&gi(r.keyFor)){const s=Fyt[i.operator]?i.left===e?i.right:i.left:i.callee&&i.callee.name==="equal"?i.arguments[i.arguments[0]===e?1:0]:null;s&&s.type===wS&&jyt(i,e,s,r.keyFor(s.value))}return e}function jyt(e,t,n,r){return r<0?(e.type=wS,e.value=!1,e.raw="false"):(t.type=kyt,n.value=r,n.raw=r+""),!0}function Y6(e){return dr(e)?e:sX(e)?e.entries():e?Object.entries(e):[]}const cCe="row_object";function fCe(e,t){e.type=Ayt;const n=e.properties=[];for(const r of Y6(t)){const[i,s]=dr(r)?r:[r,r];n.push({type:tCe,key:{type:wS,raw:kh(s)},value:lCe({computed:!0},i)})}return e}function dCe(e){return n$(fCe({},e))}function hCe(e){return uX.expr(dCe(e))}const Byt=new TextDecoder("utf-8"),Az=e=>Byt.decode(e),Uyt=new TextEncoder,lX=e=>Uyt.encode(e),zyt=e=>typeof e=="boolean",xu=e=>typeof e=="function",zy=e=>e!=null&&Object(e)===e,K6=e=>zy(e)&&xu(e.then),cX=e=>zy(e)&&xu(e[Symbol.iterator]),X6=e=>zy(e)&&xu(e[Symbol.asyncIterator]),Vyt=e=>zy(e)&&"done"in e&&"value"in e,pCe=e=>"_getDOMStream"in e&&"_getNodeStream"in e,Hyt=e=>zy(e)&&xu(e.abort)&&xu(e.getWriter)&&!pCe(e),qyt=e=>zy(e)&&xu(e.end)&&xu(e.write)&&zyt(e.writable)&&!pCe(e),Wyt=e=>zy(e)&&xu(e.clear)&&xu(e.bytes)&&xu(e.position)&&xu(e.setPosition)&&xu(e.capacity)&&xu(e.getBufferIdentifier)&&xu(e.createLong),fX=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:ArrayBuffer;function Gyt(e){const t=e[0]?[e[0]]:[];let n,r,i,s;for(let o,a,u=0,l=0,c=e.length;++u<c;){if(o=t[l],a=e[u],!o||!a||o.buffer!==a.buffer||a.byteOffset<o.byteOffset){a&&(t[++l]=a);continue}if({byteOffset:n,byteLength:i}=o,{byteOffset:r,byteLength:s}=a,n+i<r||r+s<n){a&&(t[++l]=a);continue}t[l]=new Uint8Array(o.buffer,n,r-n+s)}return t}function i$(e,t,n=0,r=t.byteLength){const i=e.byteLength,s=new Uint8Array(e.buffer,e.byteOffset,i),o=new Uint8Array(t.buffer,t.byteOffset,Math.min(r,i));return s.set(o,n),e}function Rh(e,t){const n=Gyt(e),r=n.reduce((c,f)=>c+f.byteLength,0);let i,s,o,a=0,u=-1;const l=Math.min(t||Number.POSITIVE_INFINITY,r);for(const c=n.length;++u<c;){if(i=n[u],s=i.subarray(0,Math.min(i.length,l-a)),l<=a+s.length){s.length<i.length?n[u]=i.subarray(s.length):s.length===i.length&&u++,o?i$(o,s,a):o=s;break}i$(o||(o=new Uint8Array(l)),s,a),a+=s.length}return[o||new Uint8Array(0),n.slice(u),r-(o?o.byteLength:0)]}function Ys(e,t){let n=Vyt(t)?t.value:t;return n instanceof e?e===Uint8Array?new e(n.buffer,n.byteOffset,n.byteLength):n:n?(typeof n=="string"&&(n=lX(n)),n instanceof ArrayBuffer?new e(n):n instanceof fX?new e(n):Wyt(n)?Ys(e,n.bytes()):ArrayBuffer.isView(n)?n.byteLength<=0?new e(0):new e(n.buffer,n.byteOffset,n.byteLength/e.BYTES_PER_ELEMENT):e.from(n)):new e(0)}const FT=e=>Ys(Int32Array,e),Pr=e=>Ys(Uint8Array,e),Iz=e=>(e.next(),e);function*Yyt(e,t){const n=function*(i){yield i},r=typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof fX?n(t):cX(t)?t:n(t);return yield*Iz(function*(i){let s=null;do s=i.next(yield Ys(e,s));while(!s.done)}(r[Symbol.iterator]())),new e}const Kyt=e=>Yyt(Uint8Array,e);function mCe(e,t){return r1(this,arguments,function*(){if(K6(t))return yield Yn(yield Yn(yield*Tj(gC(mCe(e,yield Yn(t))))));const r=function(o){return r1(this,arguments,function*(){yield yield Yn(yield Yn(o))})},i=function(o){return r1(this,arguments,function*(){yield Yn(yield*Tj(gC(Iz(function*(a){let u=null;do u=a.next(yield u==null?void 0:u.value);while(!u.done)}(o[Symbol.iterator]())))))})},s=typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof fX?r(t):cX(t)?i(t):X6(t)?t:r(t);return yield Yn(yield*Tj(gC(Iz(function(o){return r1(this,arguments,function*(){let a=null;do a=yield Yn(o.next(yield yield Yn(Ys(e,a))));while(!a.done)})}(s[Symbol.asyncIterator]()))))),yield Yn(new e)})}const Xyt=e=>mCe(Uint8Array,e);function gCe(e,t,n){if(e!==0){n=n.slice(0,t);for(let r=-1,i=n.length;++r<i;)n[r]+=e}return n.subarray(0,t)}function Qyt(e,t){let n=0;const r=e.length;if(r!==t.length)return!1;if(r>0)do if(e[n]!==t[n])return!1;while(++n<r);return!0}const Wce={fromIterable(e){return eP(Jyt(e))},fromAsyncIterable(e){return eP(Zyt(e))},fromDOMStream(e){return eP(evt(e))},fromNodeStream(e){return eP(nvt(e))},toDOMStream(e,t){throw new Error('"toDOMStream" not available in this environment')},toNodeStream(e,t){throw new Error('"toNodeStream" not available in this environment')}},eP=e=>(e.next(),e);function*Jyt(e){let t,n=!1,r=[],i,s,o,a=0;function u(){return s==="peek"?Rh(r,o)[0]:([i,r,a]=Rh(r,o),i)}({cmd:s,size:o}=yield null);const l=Kyt(e)[Symbol.iterator]();try{do if({done:t,value:i}=Number.isNaN(o-a)?l.next():l.next(o-a),!t&&i.byteLength>0&&(r.push(i),a+=i.byteLength),t||o<=a)do({cmd:s,size:o}=yield u());while(o<a);while(!t)}catch(c){(n=!0)&&typeof l.throw=="function"&&l.throw(c)}finally{n===!1&&typeof l.return=="function"&&l.return(null)}return null}function Zyt(e){return r1(this,arguments,function*(){let n,r=!1,i=[],s,o,a,u=0;function l(){return o==="peek"?Rh(i,a)[0]:([s,i,u]=Rh(i,a),s)}({cmd:o,size:a}=yield yield Yn(null));const c=Xyt(e)[Symbol.asyncIterator]();try{do if({done:n,value:s}=Number.isNaN(a-u)?yield Yn(c.next()):yield Yn(c.next(a-u)),!n&&s.byteLength>0&&(i.push(s),u+=s.byteLength),n||a<=u)do({cmd:o,size:a}=yield yield Yn(l()));while(a<u);while(!n)}catch(f){(r=!0)&&typeof c.throw=="function"&&(yield Yn(c.throw(f)))}finally{r===!1&&typeof c.return=="function"&&(yield Yn(c.return(new Uint8Array(0))))}return yield Yn(null)})}function evt(e){return r1(this,arguments,function*(){let n=!1,r=!1,i=[],s,o,a,u=0;function l(){return o==="peek"?Rh(i,a)[0]:([s,i,u]=Rh(i,a),s)}({cmd:o,size:a}=yield yield Yn(null));const c=new tvt(e);try{do if({done:n,value:s}=Number.isNaN(a-u)?yield Yn(c.read()):yield Yn(c.read(a-u)),!n&&s.byteLength>0&&(i.push(Pr(s)),u+=s.byteLength),n||a<=u)do({cmd:o,size:a}=yield yield Yn(l()));while(a<u);while(!n)}catch(f){(r=!0)&&(yield Yn(c.cancel(f)))}finally{r===!1?yield Yn(c.cancel()):e.locked&&c.releaseLock()}return yield Yn(null)})}class tvt{constructor(t){this.source=t,this.reader=null,this.reader=this.source.getReader(),this.reader.closed.catch(()=>{})}get closed(){return this.reader?this.reader.closed.catch(()=>{}):Promise.resolve()}releaseLock(){this.reader&&this.reader.releaseLock(),this.reader=null}cancel(t){return Fp(this,void 0,void 0,function*(){const{reader:n,source:r}=this;n&&(yield n.cancel(t).catch(()=>{})),r&&r.locked&&this.releaseLock()})}read(t){return Fp(this,void 0,void 0,function*(){if(t===0)return{done:this.reader==null,value:new Uint8Array(0)};const n=yield this.reader.read();return!n.done&&(n.value=Pr(n)),n})}}const Y8=(e,t)=>{const n=i=>r([t,i]);let r;return[t,n,new Promise(i=>(r=i)&&e.once(t,n))]};function nvt(e){return r1(this,arguments,function*(){const n=[];let r="error",i=!1,s=null,o,a,u=0,l=[],c;function f(){return o==="peek"?Rh(l,a)[0]:([c,l,u]=Rh(l,a),c)}if({cmd:o,size:a}=yield yield Yn(null),e.isTTY)return yield yield Yn(new Uint8Array(0)),yield Yn(null);try{n[0]=Y8(e,"end"),n[1]=Y8(e,"error");do{if(n[2]=Y8(e,"readable"),[r,s]=yield Yn(Promise.race(n.map(h=>h[2]))),r==="error")break;if((i=r==="end")||(Number.isFinite(a-u)?(c=Pr(e.read(a-u)),c.byteLength<a-u&&(c=Pr(e.read()))):c=Pr(e.read()),c.byteLength>0&&(l.push(c),u+=c.byteLength)),i||a<=u)do({cmd:o,size:a}=yield yield Yn(f()));while(a<u)}while(!i)}finally{yield Yn(d(n,r==="error"?s:null))}return yield Yn(null);function d(h,p){return c=l=null,new Promise((m,g)=>{for(const[y,v]of h)e.off(y,v);try{const y=e.destroy;y&&y.call(e,p),p=void 0}catch(y){p=y||p}finally{p!=null?g(p):m()}})}})}var Va;(function(e){e[e.V1=0]="V1",e[e.V2=1]="V2",e[e.V3=2]="V3",e[e.V4=3]="V4",e[e.V5=4]="V5"})(Va||(Va={}));var el;(function(e){e[e.Sparse=0]="Sparse",e[e.Dense=1]="Dense"})(el||(el={}));var Do;(function(e){e[e.HALF=0]="HALF",e[e.SINGLE=1]="SINGLE",e[e.DOUBLE=2]="DOUBLE"})(Do||(Do={}));var Nh;(function(e){e[e.DAY=0]="DAY",e[e.MILLISECOND=1]="MILLISECOND"})(Nh||(Nh={}));var Wt;(function(e){e[e.SECOND=0]="SECOND",e[e.MILLISECOND=1]="MILLISECOND",e[e.MICROSECOND=2]="MICROSECOND",e[e.NANOSECOND=3]="NANOSECOND"})(Wt||(Wt={}));var Ph;(function(e){e[e.YEAR_MONTH=0]="YEAR_MONTH",e[e.DAY_TIME=1]="DAY_TIME",e[e.MONTH_DAY_NANO=2]="MONTH_DAY_NANO"})(Ph||(Ph={}));var Qs;(function(e){e[e.NONE=0]="NONE",e[e.Schema=1]="Schema",e[e.DictionaryBatch=2]="DictionaryBatch",e[e.RecordBatch=3]="RecordBatch",e[e.Tensor=4]="Tensor",e[e.SparseTensor=5]="SparseTensor"})(Qs||(Qs={}));var re;(function(e){e[e.NONE=0]="NONE",e[e.Null=1]="Null",e[e.Int=2]="Int",e[e.Float=3]="Float",e[e.Binary=4]="Binary",e[e.Utf8=5]="Utf8",e[e.Bool=6]="Bool",e[e.Decimal=7]="Decimal",e[e.Date=8]="Date",e[e.Time=9]="Time",e[e.Timestamp=10]="Timestamp",e[e.Interval=11]="Interval",e[e.List=12]="List",e[e.Struct=13]="Struct",e[e.Union=14]="Union",e[e.FixedSizeBinary=15]="FixedSizeBinary",e[e.FixedSizeList=16]="FixedSizeList",e[e.Map=17]="Map",e[e.Duration=18]="Duration",e[e.Dictionary=-1]="Dictionary",e[e.Int8=-2]="Int8",e[e.Int16=-3]="Int16",e[e.Int32=-4]="Int32",e[e.Int64=-5]="Int64",e[e.Uint8=-6]="Uint8",e[e.Uint16=-7]="Uint16",e[e.Uint32=-8]="Uint32",e[e.Uint64=-9]="Uint64",e[e.Float16=-10]="Float16",e[e.Float32=-11]="Float32",e[e.Float64=-12]="Float64",e[e.DateDay=-13]="DateDay",e[e.DateMillisecond=-14]="DateMillisecond",e[e.TimestampSecond=-15]="TimestampSecond",e[e.TimestampMillisecond=-16]="TimestampMillisecond",e[e.TimestampMicrosecond=-17]="TimestampMicrosecond",e[e.TimestampNanosecond=-18]="TimestampNanosecond",e[e.TimeSecond=-19]="TimeSecond",e[e.TimeMillisecond=-20]="TimeMillisecond",e[e.TimeMicrosecond=-21]="TimeMicrosecond",e[e.TimeNanosecond=-22]="TimeNanosecond",e[e.DenseUnion=-23]="DenseUnion",e[e.SparseUnion=-24]="SparseUnion",e[e.IntervalDayTime=-25]="IntervalDayTime",e[e.IntervalYearMonth=-26]="IntervalYearMonth",e[e.DurationSecond=-27]="DurationSecond",e[e.DurationMillisecond=-28]="DurationMillisecond",e[e.DurationMicrosecond=-29]="DurationMicrosecond",e[e.DurationNanosecond=-30]="DurationNanosecond"})(re||(re={}));var kp;(function(e){e[e.OFFSET=0]="OFFSET",e[e.DATA=1]="DATA",e[e.VALIDITY=2]="VALIDITY",e[e.TYPE=3]="TYPE"})(kp||(kp={}));const rvt=void 0;function J1(e){if(e===null)return"null";if(e===rvt)return"undefined";switch(typeof e){case"number":return`${e}`;case"bigint":return`${e}`;case"string":return`"${e}"`}return typeof e[Symbol.toPrimitive]=="function"?e[Symbol.toPrimitive]("string"):ArrayBuffer.isView(e)?e instanceof BigInt64Array||e instanceof BigUint64Array?`[${[...e].map(t=>J1(t))}]`:`[${e}]`:ArrayBuffer.isView(e)?`[${e}]`:JSON.stringify(e,(t,n)=>typeof n=="bigint"?`${n}`:n)}const ivt=Symbol.for("isArrowBigNum");function fd(e,...t){return t.length===0?Object.setPrototypeOf(Ys(this.TypedArray,e),this.constructor.prototype):Object.setPrototypeOf(new this.TypedArray(e,...t),this.constructor.prototype)}fd.prototype[ivt]=!0;fd.prototype.toJSON=function(){return`"${tI(this)}"`};fd.prototype.valueOf=function(){return yCe(this)};fd.prototype.toString=function(){return tI(this)};fd.prototype[Symbol.toPrimitive]=function(e="default"){switch(e){case"number":return yCe(this);case"string":return tI(this);case"default":return svt(this)}return tI(this)};function nE(...e){return fd.apply(this,e)}function rE(...e){return fd.apply(this,e)}function eI(...e){return fd.apply(this,e)}Object.setPrototypeOf(nE.prototype,Object.create(Int32Array.prototype));Object.setPrototypeOf(rE.prototype,Object.create(Uint32Array.prototype));Object.setPrototypeOf(eI.prototype,Object.create(Uint32Array.prototype));Object.assign(nE.prototype,fd.prototype,{constructor:nE,signed:!0,TypedArray:Int32Array,BigIntArray:BigInt64Array});Object.assign(rE.prototype,fd.prototype,{constructor:rE,signed:!1,TypedArray:Uint32Array,BigIntArray:BigUint64Array});Object.assign(eI.prototype,fd.prototype,{constructor:eI,signed:!0,TypedArray:Uint32Array,BigIntArray:BigUint64Array});function yCe(e){const{buffer:t,byteOffset:n,length:r,signed:i}=e,s=new BigUint64Array(t,n,r),o=i&&s.at(-1)&BigInt(1)<<BigInt(63);let a=BigInt(o?1:0),u=BigInt(0);if(o){for(const l of s)a+=~l*(BigInt(1)<<BigInt(32)*u++);a*=BigInt(-1)}else for(const l of s)a+=l*(BigInt(1)<<BigInt(32)*u++);return a}const tI=e=>{if(e.byteLength===8)return`${new e.BigIntArray(e.buffer,e.byteOffset,1)[0]}`;if(!e.signed)return K8(e);let t=new Uint16Array(e.buffer,e.byteOffset,e.byteLength/2);if(new Int16Array([t.at(-1)])[0]>=0)return K8(e);t=t.slice();let r=1;for(let s=0;s<t.length;s++){const o=t[s],a=~o+r;t[s]=a,r&=o===0?1:0}return`-${K8(t)}`},svt=e=>e.byteLength===8?new e.BigIntArray(e.buffer,e.byteOffset,1)[0]:tI(e);function K8(e){let t="";const n=new Uint32Array(2);let r=new Uint16Array(e.buffer,e.byteOffset,e.byteLength/2);const i=new Uint32Array((r=new Uint16Array(r).reverse()).buffer);let s=-1;const o=r.length-1;do{for(n[0]=r[s=0];s<o;)r[s++]=n[1]=n[0]/10,n[0]=(n[0]-n[1]*10<<16)+r[s];r[s]=n[1]=n[0]/10,n[0]=n[0]-n[1]*10,t=`${n[0]}${t}`}while(i[0]||i[1]||i[2]||i[3]);return t??"0"}class dX{static new(t,n){switch(n){case!0:return new nE(t);case!1:return new rE(t)}switch(t.constructor){case Int8Array:case Int16Array:case Int32Array:case BigInt64Array:return new nE(t)}return t.byteLength===16?new eI(t):new rE(t)}static signed(t){return new nE(t)}static unsigned(t){return new rE(t)}static decimal(t){return new eI(t)}constructor(t,n){return dX.new(t,n)}}function Qf(e){if(typeof e=="bigint"&&(e<Number.MIN_SAFE_INTEGER||e>Number.MAX_SAFE_INTEGER))throw new TypeError(`${e} is not safe to convert to a number.`);return Number(e)}var vCe,bCe,_Ce,wCe,ECe,xCe,SCe,TCe,CCe,ACe,ICe,kCe,RCe,NCe,PCe,DCe,OCe,$Ce,MCe,LCe;let Sn=class kz{static isNull(t){return(t==null?void 0:t.typeId)===re.Null}static isInt(t){return(t==null?void 0:t.typeId)===re.Int}static isFloat(t){return(t==null?void 0:t.typeId)===re.Float}static isBinary(t){return(t==null?void 0:t.typeId)===re.Binary}static isUtf8(t){return(t==null?void 0:t.typeId)===re.Utf8}static isBool(t){return(t==null?void 0:t.typeId)===re.Bool}static isDecimal(t){return(t==null?void 0:t.typeId)===re.Decimal}static isDate(t){return(t==null?void 0:t.typeId)===re.Date}static isTime(t){return(t==null?void 0:t.typeId)===re.Time}static isTimestamp(t){return(t==null?void 0:t.typeId)===re.Timestamp}static isInterval(t){return(t==null?void 0:t.typeId)===re.Interval}static isDuration(t){return(t==null?void 0:t.typeId)===re.Duration}static isList(t){return(t==null?void 0:t.typeId)===re.List}static isStruct(t){return(t==null?void 0:t.typeId)===re.Struct}static isUnion(t){return(t==null?void 0:t.typeId)===re.Union}static isFixedSizeBinary(t){return(t==null?void 0:t.typeId)===re.FixedSizeBinary}static isFixedSizeList(t){return(t==null?void 0:t.typeId)===re.FixedSizeList}static isMap(t){return(t==null?void 0:t.typeId)===re.Map}static isDictionary(t){return(t==null?void 0:t.typeId)===re.Dictionary}static isDenseUnion(t){return kz.isUnion(t)&&t.mode===el.Dense}static isSparseUnion(t){return kz.isUnion(t)&&t.mode===el.Sparse}get typeId(){return re.NONE}};vCe=Symbol.toStringTag;Sn[vCe]=(e=>(e.children=null,e.ArrayType=Array,e[Symbol.toStringTag]="DataType"))(Sn.prototype);let Rm=class extends Sn{toString(){return"Null"}get typeId(){return re.Null}};bCe=Symbol.toStringTag;Rm[bCe]=(e=>e[Symbol.toStringTag]="Null")(Rm.prototype);class ru extends Sn{constructor(t,n){super(),this.isSigned=t,this.bitWidth=n}get typeId(){return re.Int}get ArrayType(){switch(this.bitWidth){case 8:return this.isSigned?Int8Array:Uint8Array;case 16:return this.isSigned?Int16Array:Uint16Array;case 32:return this.isSigned?Int32Array:Uint32Array;case 64:return this.isSigned?BigInt64Array:BigUint64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`${this.isSigned?"I":"Ui"}nt${this.bitWidth}`}}_Ce=Symbol.toStringTag;ru[_Ce]=(e=>(e.isSigned=null,e.bitWidth=null,e[Symbol.toStringTag]="Int"))(ru.prototype);class hX extends ru{constructor(){super(!0,8)}get ArrayType(){return Int8Array}}class pX extends ru{constructor(){super(!0,16)}get ArrayType(){return Int16Array}}class K0 extends ru{constructor(){super(!0,32)}get ArrayType(){return Int32Array}}class mX extends ru{constructor(){super(!0,64)}get ArrayType(){return BigInt64Array}}class gX extends ru{constructor(){super(!1,8)}get ArrayType(){return Uint8Array}}class yX extends ru{constructor(){super(!1,16)}get ArrayType(){return Uint16Array}}class vX extends ru{constructor(){super(!1,32)}get ArrayType(){return Uint32Array}}class bX extends ru{constructor(){super(!1,64)}get ArrayType(){return BigUint64Array}}Object.defineProperty(hX.prototype,"ArrayType",{value:Int8Array});Object.defineProperty(pX.prototype,"ArrayType",{value:Int16Array});Object.defineProperty(K0.prototype,"ArrayType",{value:Int32Array});Object.defineProperty(mX.prototype,"ArrayType",{value:BigInt64Array});Object.defineProperty(gX.prototype,"ArrayType",{value:Uint8Array});Object.defineProperty(yX.prototype,"ArrayType",{value:Uint16Array});Object.defineProperty(vX.prototype,"ArrayType",{value:Uint32Array});Object.defineProperty(bX.prototype,"ArrayType",{value:BigUint64Array});class X0 extends Sn{constructor(t){super(),this.precision=t}get typeId(){return re.Float}get ArrayType(){switch(this.precision){case Do.HALF:return Uint16Array;case Do.SINGLE:return Float32Array;case Do.DOUBLE:return Float64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`Float${this.precision<<5||16}`}}wCe=Symbol.toStringTag;X0[wCe]=(e=>(e.precision=null,e[Symbol.toStringTag]="Float"))(X0.prototype);class FCe extends X0{constructor(){super(Do.HALF)}}class _X extends X0{constructor(){super(Do.SINGLE)}}class wX extends X0{constructor(){super(Do.DOUBLE)}}Object.defineProperty(FCe.prototype,"ArrayType",{value:Uint16Array});Object.defineProperty(_X.prototype,"ArrayType",{value:Float32Array});Object.defineProperty(wX.prototype,"ArrayType",{value:Float64Array});let nI=class extends Sn{constructor(){super()}get typeId(){return re.Binary}toString(){return"Binary"}};ECe=Symbol.toStringTag;nI[ECe]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Binary"))(nI.prototype);let tx=class extends Sn{constructor(){super()}get typeId(){return re.Utf8}toString(){return"Utf8"}};xCe=Symbol.toStringTag;tx[xCe]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Utf8"))(tx.prototype);let rI=class extends Sn{constructor(){super()}get typeId(){return re.Bool}toString(){return"Bool"}};SCe=Symbol.toStringTag;rI[SCe]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Bool"))(rI.prototype);let s$=class extends Sn{constructor(t,n,r=128){super(),this.scale=t,this.precision=n,this.bitWidth=r}get typeId(){return re.Decimal}toString(){return`Decimal[${this.precision}e${this.scale>0?"+":""}${this.scale}]`}};TCe=Symbol.toStringTag;s$[TCe]=(e=>(e.scale=null,e.precision=null,e.ArrayType=Uint32Array,e[Symbol.toStringTag]="Decimal"))(s$.prototype);class nx extends Sn{constructor(t){super(),this.unit=t}get typeId(){return re.Date}toString(){return`Date${(this.unit+1)*32}<${Nh[this.unit]}>`}}CCe=Symbol.toStringTag;nx[CCe]=(e=>(e.unit=null,e.ArrayType=Int32Array,e[Symbol.toStringTag]="Date"))(nx.prototype);class ovt extends nx{constructor(){super(Nh.DAY)}}class avt extends nx{constructor(){super(Nh.MILLISECOND)}}class Nm extends Sn{constructor(t,n){super(),this.unit=t,this.bitWidth=n}get typeId(){return re.Time}toString(){return`Time${this.bitWidth}<${Wt[this.unit]}>`}get ArrayType(){switch(this.bitWidth){case 32:return Int32Array;case 64:return BigInt64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}}ACe=Symbol.toStringTag;Nm[ACe]=(e=>(e.unit=null,e.bitWidth=null,e[Symbol.toStringTag]="Time"))(Nm.prototype);class uvt extends Nm{constructor(){super(Wt.SECOND,32)}}class lvt extends Nm{constructor(){super(Wt.MILLISECOND,32)}}class cvt extends Nm{constructor(){super(Wt.MICROSECOND,64)}}class fvt extends Nm{constructor(){super(Wt.NANOSECOND,64)}}class o$ extends Sn{constructor(t,n){super(),this.unit=t,this.timezone=n}get typeId(){return re.Timestamp}toString(){return`Timestamp<${Wt[this.unit]}${this.timezone?`, ${this.timezone}`:""}>`}}ICe=Symbol.toStringTag;o$[ICe]=(e=>(e.unit=null,e.timezone=null,e.ArrayType=Int32Array,e[Symbol.toStringTag]="Timestamp"))(o$.prototype);class rx extends Sn{constructor(t){super(),this.unit=t}get typeId(){return re.Interval}toString(){return`Interval<${Ph[this.unit]}>`}}kCe=Symbol.toStringTag;rx[kCe]=(e=>(e.unit=null,e.ArrayType=Int32Array,e[Symbol.toStringTag]="Interval"))(rx.prototype);class dvt extends rx{constructor(){super(Ph.DAY_TIME)}}class hvt extends rx{constructor(){super(Ph.YEAR_MONTH)}}let a$=class extends Sn{constructor(t){super(),this.unit=t}get typeId(){return re.Duration}toString(){return`Duration<${Wt[this.unit]}>`}};RCe=Symbol.toStringTag;a$[RCe]=(e=>(e.unit=null,e.ArrayType=BigInt64Array,e[Symbol.toStringTag]="Duration"))(a$.prototype);let ix=class extends Sn{constructor(t){super(),this.children=[t]}get typeId(){return re.List}toString(){return`List<${this.valueType}>`}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}};NCe=Symbol.toStringTag;ix[NCe]=(e=>(e.children=null,e[Symbol.toStringTag]="List"))(ix.prototype);class fa extends Sn{constructor(t){super(),this.children=t}get typeId(){return re.Struct}toString(){return`Struct<{${this.children.map(t=>`${t.name}:${t.type}`).join(", ")}}>`}}PCe=Symbol.toStringTag;fa[PCe]=(e=>(e.children=null,e[Symbol.toStringTag]="Struct"))(fa.prototype);class iI extends Sn{constructor(t,n,r){super(),this.mode=t,this.children=r,this.typeIds=n=Int32Array.from(n),this.typeIdToChildIndex=n.reduce((i,s,o)=>(i[s]=o)&&i||i,Object.create(null))}get typeId(){return re.Union}toString(){return`${this[Symbol.toStringTag]}<${this.children.map(t=>`${t.type}`).join(" | ")}>`}}DCe=Symbol.toStringTag;iI[DCe]=(e=>(e.mode=null,e.typeIds=null,e.children=null,e.typeIdToChildIndex=null,e.ArrayType=Int8Array,e[Symbol.toStringTag]="Union"))(iI.prototype);let u$=class extends Sn{constructor(t){super(),this.byteWidth=t}get typeId(){return re.FixedSizeBinary}toString(){return`FixedSizeBinary[${this.byteWidth}]`}};OCe=Symbol.toStringTag;u$[OCe]=(e=>(e.byteWidth=null,e.ArrayType=Uint8Array,e[Symbol.toStringTag]="FixedSizeBinary"))(u$.prototype);let sx=class extends Sn{constructor(t,n){super(),this.listSize=t,this.children=[n]}get typeId(){return re.FixedSizeList}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}toString(){return`FixedSizeList[${this.listSize}]<${this.valueType}>`}};$Ce=Symbol.toStringTag;sx[$Ce]=(e=>(e.children=null,e.listSize=null,e[Symbol.toStringTag]="FixedSizeList"))(sx.prototype);class sI extends Sn{constructor(t,n=!1){var r,i,s;if(super(),this.children=[t],this.keysSorted=n,t&&(t.name="entries",!((r=t==null?void 0:t.type)===null||r===void 0)&&r.children)){const o=(i=t==null?void 0:t.type)===null||i===void 0?void 0:i.children[0];o&&(o.name="key");const a=(s=t==null?void 0:t.type)===null||s===void 0?void 0:s.children[1];a&&(a.name="value")}}get typeId(){return re.Map}get keyType(){return this.children[0].type.children[0].type}get valueType(){return this.children[0].type.children[1].type}get childType(){return this.children[0].type}toString(){return`Map<{${this.children[0].type.children.map(t=>`${t.name}:${t.type}`).join(", ")}}>`}}MCe=Symbol.toStringTag;sI[MCe]=(e=>(e.children=null,e.keysSorted=null,e[Symbol.toStringTag]="Map_"))(sI.prototype);const pvt=(e=>()=>++e)(-1);class Q0 extends Sn{constructor(t,n,r,i){super(),this.indices=n,this.dictionary=t,this.isOrdered=i||!1,this.id=r==null?pvt():Qf(r)}get typeId(){return re.Dictionary}get children(){return this.dictionary.children}get valueType(){return this.dictionary}get ArrayType(){return this.dictionary.ArrayType}toString(){return`Dictionary<${this.indices}, ${this.dictionary}>`}}LCe=Symbol.toStringTag;Q0[LCe]=(e=>(e.id=null,e.indices=null,e.isOrdered=null,e.dictionary=null,e[Symbol.toStringTag]="Dictionary"))(Q0.prototype);function Md(e){const t=e;switch(e.typeId){case re.Decimal:return e.bitWidth/32;case re.Timestamp:return 2;case re.Date:return 1+t.unit;case re.Interval:return 1+t.unit;case re.FixedSizeList:return t.listSize;case re.FixedSizeBinary:return t.byteWidth;default:return 1}}class Cn{visitMany(t,...n){return t.map((r,i)=>this.visit(r,...n.map(s=>s[i])))}visit(...t){return this.getVisitFn(t[0],!1).apply(this,t)}getVisitFn(t,n=!0){return mvt(this,t,n)}getVisitFnByTypeId(t,n=!0){return iw(this,t,n)}visitNull(t,...n){return null}visitBool(t,...n){return null}visitInt(t,...n){return null}visitFloat(t,...n){return null}visitUtf8(t,...n){return null}visitBinary(t,...n){return null}visitFixedSizeBinary(t,...n){return null}visitDate(t,...n){return null}visitTimestamp(t,...n){return null}visitTime(t,...n){return null}visitDecimal(t,...n){return null}visitList(t,...n){return null}visitStruct(t,...n){return null}visitUnion(t,...n){return null}visitDictionary(t,...n){return null}visitInterval(t,...n){return null}visitDuration(t,...n){return null}visitFixedSizeList(t,...n){return null}visitMap(t,...n){return null}}function mvt(e,t,n=!0){return typeof t=="number"?iw(e,t,n):typeof t=="string"&&t in re?iw(e,re[t],n):t&&t instanceof Sn?iw(e,Gce(t),n):t!=null&&t.type&&t.type instanceof Sn?iw(e,Gce(t.type),n):iw(e,re.NONE,n)}function iw(e,t,n=!0){let r=null;switch(t){case re.Null:r=e.visitNull;break;case re.Bool:r=e.visitBool;break;case re.Int:r=e.visitInt;break;case re.Int8:r=e.visitInt8||e.visitInt;break;case re.Int16:r=e.visitInt16||e.visitInt;break;case re.Int32:r=e.visitInt32||e.visitInt;break;case re.Int64:r=e.visitInt64||e.visitInt;break;case re.Uint8:r=e.visitUint8||e.visitInt;break;case re.Uint16:r=e.visitUint16||e.visitInt;break;case re.Uint32:r=e.visitUint32||e.visitInt;break;case re.Uint64:r=e.visitUint64||e.visitInt;break;case re.Float:r=e.visitFloat;break;case re.Float16:r=e.visitFloat16||e.visitFloat;break;case re.Float32:r=e.visitFloat32||e.visitFloat;break;case re.Float64:r=e.visitFloat64||e.visitFloat;break;case re.Utf8:r=e.visitUtf8;break;case re.Binary:r=e.visitBinary;break;case re.FixedSizeBinary:r=e.visitFixedSizeBinary;break;case re.Date:r=e.visitDate;break;case re.DateDay:r=e.visitDateDay||e.visitDate;break;case re.DateMillisecond:r=e.visitDateMillisecond||e.visitDate;break;case re.Timestamp:r=e.visitTimestamp;break;case re.TimestampSecond:r=e.visitTimestampSecond||e.visitTimestamp;break;case re.TimestampMillisecond:r=e.visitTimestampMillisecond||e.visitTimestamp;break;case re.TimestampMicrosecond:r=e.visitTimestampMicrosecond||e.visitTimestamp;break;case re.TimestampNanosecond:r=e.visitTimestampNanosecond||e.visitTimestamp;break;case re.Time:r=e.visitTime;break;case re.TimeSecond:r=e.visitTimeSecond||e.visitTime;break;case re.TimeMillisecond:r=e.visitTimeMillisecond||e.visitTime;break;case re.TimeMicrosecond:r=e.visitTimeMicrosecond||e.visitTime;break;case re.TimeNanosecond:r=e.visitTimeNanosecond||e.visitTime;break;case re.Decimal:r=e.visitDecimal;break;case re.List:r=e.visitList;break;case re.Struct:r=e.visitStruct;break;case re.Union:r=e.visitUnion;break;case re.DenseUnion:r=e.visitDenseUnion||e.visitUnion;break;case re.SparseUnion:r=e.visitSparseUnion||e.visitUnion;break;case re.Dictionary:r=e.visitDictionary;break;case re.Interval:r=e.visitInterval;break;case re.IntervalDayTime:r=e.visitIntervalDayTime||e.visitInterval;break;case re.IntervalYearMonth:r=e.visitIntervalYearMonth||e.visitInterval;break;case re.Duration:r=e.visitDuration;break;case re.DurationSecond:r=e.visitDurationSecond||e.visitDuration;break;case re.DurationMillisecond:r=e.visitDurationMillisecond||e.visitDuration;break;case re.DurationMicrosecond:r=e.visitDurationMicrosecond||e.visitDuration;break;case re.DurationNanosecond:r=e.visitDurationNanosecond||e.visitDuration;break;case re.FixedSizeList:r=e.visitFixedSizeList;break;case re.Map:r=e.visitMap;break}if(typeof r=="function")return r;if(!n)return()=>null;throw new Error(`Unrecognized type '${re[t]}'`)}function Gce(e){switch(e.typeId){case re.Null:return re.Null;case re.Int:{const{bitWidth:t,isSigned:n}=e;switch(t){case 8:return n?re.Int8:re.Uint8;case 16:return n?re.Int16:re.Uint16;case 32:return n?re.Int32:re.Uint32;case 64:return n?re.Int64:re.Uint64}return re.Int}case re.Float:switch(e.precision){case Do.HALF:return re.Float16;case Do.SINGLE:return re.Float32;case Do.DOUBLE:return re.Float64}return re.Float;case re.Binary:return re.Binary;case re.Utf8:return re.Utf8;case re.Bool:return re.Bool;case re.Decimal:return re.Decimal;case re.Time:switch(e.unit){case Wt.SECOND:return re.TimeSecond;case Wt.MILLISECOND:return re.TimeMillisecond;case Wt.MICROSECOND:return re.TimeMicrosecond;case Wt.NANOSECOND:return re.TimeNanosecond}return re.Time;case re.Timestamp:switch(e.unit){case Wt.SECOND:return re.TimestampSecond;case Wt.MILLISECOND:return re.TimestampMillisecond;case Wt.MICROSECOND:return re.TimestampMicrosecond;case Wt.NANOSECOND:return re.TimestampNanosecond}return re.Timestamp;case re.Date:switch(e.unit){case Nh.DAY:return re.DateDay;case Nh.MILLISECOND:return re.DateMillisecond}return re.Date;case re.Interval:switch(e.unit){case Ph.DAY_TIME:return re.IntervalDayTime;case Ph.YEAR_MONTH:return re.IntervalYearMonth}return re.Interval;case re.Duration:switch(e.unit){case Wt.SECOND:return re.DurationSecond;case Wt.MILLISECOND:return re.DurationMillisecond;case Wt.MICROSECOND:return re.DurationMicrosecond;case Wt.NANOSECOND:return re.DurationNanosecond}return re.Duration;case re.Map:return re.Map;case re.List:return re.List;case re.Struct:return re.Struct;case re.Union:switch(e.mode){case el.Dense:return re.DenseUnion;case el.Sparse:return re.SparseUnion}return re.Union;case re.FixedSizeBinary:return re.FixedSizeBinary;case re.FixedSizeList:return re.FixedSizeList;case re.Dictionary:return re.Dictionary}throw new Error(`Unrecognized type '${re[e.typeId]}'`)}Cn.prototype.visitInt8=null;Cn.prototype.visitInt16=null;Cn.prototype.visitInt32=null;Cn.prototype.visitInt64=null;Cn.prototype.visitUint8=null;Cn.prototype.visitUint16=null;Cn.prototype.visitUint32=null;Cn.prototype.visitUint64=null;Cn.prototype.visitFloat16=null;Cn.prototype.visitFloat32=null;Cn.prototype.visitFloat64=null;Cn.prototype.visitDateDay=null;Cn.prototype.visitDateMillisecond=null;Cn.prototype.visitTimestampSecond=null;Cn.prototype.visitTimestampMillisecond=null;Cn.prototype.visitTimestampMicrosecond=null;Cn.prototype.visitTimestampNanosecond=null;Cn.prototype.visitTimeSecond=null;Cn.prototype.visitTimeMillisecond=null;Cn.prototype.visitTimeMicrosecond=null;Cn.prototype.visitTimeNanosecond=null;Cn.prototype.visitDenseUnion=null;Cn.prototype.visitSparseUnion=null;Cn.prototype.visitIntervalDayTime=null;Cn.prototype.visitIntervalYearMonth=null;Cn.prototype.visitDuration=null;Cn.prototype.visitDurationSecond=null;Cn.prototype.visitDurationMillisecond=null;Cn.prototype.visitDurationMicrosecond=null;Cn.prototype.visitDurationNanosecond=null;const jCe=new Float64Array(1),L_=new Uint32Array(jCe.buffer);function BCe(e){const t=(e&31744)>>10,n=(e&1023)/1024,r=Math.pow(-1,(e&32768)>>15);switch(t){case 31:return r*(n?Number.NaN:1/0);case 0:return r*(n?6103515625e-14*n:0)}return r*Math.pow(2,t-15)*(1+n)}function UCe(e){if(e!==e)return 32256;jCe[0]=e;const t=(L_[1]&2147483648)>>16&65535;let n=L_[1]&2146435072,r=0;return n>=1089470464?L_[0]>0?n=31744:(n=(n&2080374784)>>16,r=(L_[1]&1048575)>>10):n<=1056964608?(r=1048576+(L_[1]&1048575),r=1048576+(r<<(n>>20)-998)>>21,n=0):(n=n-1056964608>>10,r=(L_[1]&1048575)+512>>10),t|n|r&65535}class Qt extends Cn{}function rn(e){return(t,n,r)=>{if(t.setValid(n,r!=null))return e(t,n,r)}}const gvt=(e,t,n)=>{e[t]=Math.trunc(n/864e5)},EX=(e,t,n)=>{e[t]=Math.trunc(n%4294967296),e[t+1]=Math.trunc(n/4294967296)},yvt=(e,t,n)=>{e[t]=Math.trunc(n*1e3%4294967296),e[t+1]=Math.trunc(n*1e3/4294967296)},vvt=(e,t,n)=>{e[t]=Math.trunc(n*1e6%4294967296),e[t+1]=Math.trunc(n*1e6/4294967296)},zCe=(e,t,n,r)=>{if(n+1<t.length){const{[n]:i,[n+1]:s}=t;e.set(r.subarray(0,s-i),i)}},bvt=({offset:e,values:t},n,r)=>{const i=e+n;r?t[i>>3]|=1<<i%8:t[i>>3]&=~(1<<i%8)},tg=({values:e},t,n)=>{e[t]=n},xX=({values:e},t,n)=>{e[t]=n},VCe=({values:e},t,n)=>{e[t]=UCe(n)},_vt=(e,t,n)=>{switch(e.type.precision){case Do.HALF:return VCe(e,t,n);case Do.SINGLE:case Do.DOUBLE:return xX(e,t,n)}},SX=({values:e},t,n)=>{gvt(e,t,n.valueOf())},TX=({values:e},t,n)=>{EX(e,t*2,n.valueOf())},HCe=({stride:e,values:t},n,r)=>{t.set(r.subarray(0,e),e*n)},wvt=({values:e,valueOffsets:t},n,r)=>zCe(e,t,n,r),Evt=({values:e,valueOffsets:t},n,r)=>{zCe(e,t,n,lX(r))},qCe=(e,t,n)=>{e.type.unit===Nh.DAY?SX(e,t,n):TX(e,t,n)},CX=({values:e},t,n)=>EX(e,t*2,n/1e3),AX=({values:e},t,n)=>EX(e,t*2,n),IX=({values:e},t,n)=>yvt(e,t*2,n),kX=({values:e},t,n)=>vvt(e,t*2,n),WCe=(e,t,n)=>{switch(e.type.unit){case Wt.SECOND:return CX(e,t,n);case Wt.MILLISECOND:return AX(e,t,n);case Wt.MICROSECOND:return IX(e,t,n);case Wt.NANOSECOND:return kX(e,t,n)}},RX=({values:e},t,n)=>{e[t]=n},NX=({values:e},t,n)=>{e[t]=n},PX=({values:e},t,n)=>{e[t]=n},DX=({values:e},t,n)=>{e[t]=n},GCe=(e,t,n)=>{switch(e.type.unit){case Wt.SECOND:return RX(e,t,n);case Wt.MILLISECOND:return NX(e,t,n);case Wt.MICROSECOND:return PX(e,t,n);case Wt.NANOSECOND:return DX(e,t,n)}},YCe=({values:e,stride:t},n,r)=>{e.set(r.subarray(0,t),t*n)},xvt=(e,t,n)=>{const r=e.children[0],i=e.valueOffsets,s=Lc.getVisitFn(r);if(Array.isArray(n))for(let o=-1,a=i[t],u=i[t+1];a<u;)s(r,a++,n[++o]);else for(let o=-1,a=i[t],u=i[t+1];a<u;)s(r,a++,n.get(++o))},Svt=(e,t,n)=>{const r=e.children[0],{valueOffsets:i}=e,s=Lc.getVisitFn(r);let{[t]:o,[t+1]:a}=i;const u=n instanceof Map?n.entries():Object.entries(n);for(const l of u)if(s(r,o,l),++o>=a)break},Tvt=(e,t)=>(n,r,i,s)=>r&&n(r,e,t[s]),Cvt=(e,t)=>(n,r,i,s)=>r&&n(r,e,t.get(s)),Avt=(e,t)=>(n,r,i,s)=>r&&n(r,e,t.get(i.name)),Ivt=(e,t)=>(n,r,i,s)=>r&&n(r,e,t[i.name]),kvt=(e,t,n)=>{const r=e.type.children.map(s=>Lc.getVisitFn(s.type)),i=n instanceof Map?Avt(t,n):n instanceof hr?Cvt(t,n):Array.isArray(n)?Tvt(t,n):Ivt(t,n);e.type.children.forEach((s,o)=>i(r[o],e.children[o],s,o))},Rvt=(e,t,n)=>{e.type.mode===el.Dense?KCe(e,t,n):XCe(e,t,n)},KCe=(e,t,n)=>{const r=e.type.typeIdToChildIndex[e.typeIds[t]],i=e.children[r];Lc.visit(i,e.valueOffsets[t],n)},XCe=(e,t,n)=>{const r=e.type.typeIdToChildIndex[e.typeIds[t]],i=e.children[r];Lc.visit(i,t,n)},Nvt=(e,t,n)=>{var r;(r=e.dictionary)===null||r===void 0||r.set(e.values[t],n)},QCe=(e,t,n)=>{e.type.unit===Ph.DAY_TIME?OX(e,t,n):$X(e,t,n)},OX=({values:e},t,n)=>{e.set(n.subarray(0,2),2*t)},$X=({values:e},t,n)=>{e[t]=n[0]*12+n[1]%12},MX=({values:e},t,n)=>{e[t]=n},LX=({values:e},t,n)=>{e[t]=n},FX=({values:e},t,n)=>{e[t]=n},jX=({values:e},t,n)=>{e[t]=n},JCe=(e,t,n)=>{switch(e.type.unit){case Wt.SECOND:return MX(e,t,n);case Wt.MILLISECOND:return LX(e,t,n);case Wt.MICROSECOND:return FX(e,t,n);case Wt.NANOSECOND:return jX(e,t,n)}},Pvt=(e,t,n)=>{const{stride:r}=e,i=e.children[0],s=Lc.getVisitFn(i);if(Array.isArray(n))for(let o=-1,a=t*r;++o<r;)s(i,a+o,n[o]);else for(let o=-1,a=t*r;++o<r;)s(i,a+o,n.get(o))};Qt.prototype.visitBool=rn(bvt);Qt.prototype.visitInt=rn(tg);Qt.prototype.visitInt8=rn(tg);Qt.prototype.visitInt16=rn(tg);Qt.prototype.visitInt32=rn(tg);Qt.prototype.visitInt64=rn(tg);Qt.prototype.visitUint8=rn(tg);Qt.prototype.visitUint16=rn(tg);Qt.prototype.visitUint32=rn(tg);Qt.prototype.visitUint64=rn(tg);Qt.prototype.visitFloat=rn(_vt);Qt.prototype.visitFloat16=rn(VCe);Qt.prototype.visitFloat32=rn(xX);Qt.prototype.visitFloat64=rn(xX);Qt.prototype.visitUtf8=rn(Evt);Qt.prototype.visitBinary=rn(wvt);Qt.prototype.visitFixedSizeBinary=rn(HCe);Qt.prototype.visitDate=rn(qCe);Qt.prototype.visitDateDay=rn(SX);Qt.prototype.visitDateMillisecond=rn(TX);Qt.prototype.visitTimestamp=rn(WCe);Qt.prototype.visitTimestampSecond=rn(CX);Qt.prototype.visitTimestampMillisecond=rn(AX);Qt.prototype.visitTimestampMicrosecond=rn(IX);Qt.prototype.visitTimestampNanosecond=rn(kX);Qt.prototype.visitTime=rn(GCe);Qt.prototype.visitTimeSecond=rn(RX);Qt.prototype.visitTimeMillisecond=rn(NX);Qt.prototype.visitTimeMicrosecond=rn(PX);Qt.prototype.visitTimeNanosecond=rn(DX);Qt.prototype.visitDecimal=rn(YCe);Qt.prototype.visitList=rn(xvt);Qt.prototype.visitStruct=rn(kvt);Qt.prototype.visitUnion=rn(Rvt);Qt.prototype.visitDenseUnion=rn(KCe);Qt.prototype.visitSparseUnion=rn(XCe);Qt.prototype.visitDictionary=rn(Nvt);Qt.prototype.visitInterval=rn(QCe);Qt.prototype.visitIntervalDayTime=rn(OX);Qt.prototype.visitIntervalYearMonth=rn($X);Qt.prototype.visitDuration=rn(JCe);Qt.prototype.visitDurationSecond=rn(MX);Qt.prototype.visitDurationMillisecond=rn(LX);Qt.prototype.visitDurationMicrosecond=rn(FX);Qt.prototype.visitDurationNanosecond=rn(jX);Qt.prototype.visitFixedSizeList=rn(Pvt);Qt.prototype.visitMap=rn(Svt);const Lc=new Qt,yf=Symbol.for("parent"),iE=Symbol.for("rowIndex");class BX{constructor(t,n){return this[yf]=t,this[iE]=n,new Proxy(this,new Ovt)}toArray(){return Object.values(this.toJSON())}toJSON(){const t=this[iE],n=this[yf],r=n.type.children,i={};for(let s=-1,o=r.length;++s<o;)i[r[s].name]=tl.visit(n.children[s],t);return i}toString(){return`{${[...this].map(([t,n])=>`${J1(t)}: ${J1(n)}`).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}[Symbol.iterator](){return new Dvt(this[yf],this[iE])}}class Dvt{constructor(t,n){this.childIndex=0,this.children=t.children,this.rowIndex=n,this.childFields=t.type.children,this.numChildren=this.childFields.length}[Symbol.iterator](){return this}next(){const t=this.childIndex;return t<this.numChildren?(this.childIndex=t+1,{done:!1,value:[this.childFields[t].name,tl.visit(this.children[t],this.rowIndex)]}):{done:!0,value:null}}}Object.defineProperties(BX.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[yf]:{writable:!0,enumerable:!1,configurable:!1,value:null},[iE]:{writable:!0,enumerable:!1,configurable:!1,value:-1}});class Ovt{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(t){return t[yf].type.children.map(n=>n.name)}has(t,n){return t[yf].type.children.findIndex(r=>r.name===n)!==-1}getOwnPropertyDescriptor(t,n){if(t[yf].type.children.findIndex(r=>r.name===n)!==-1)return{writable:!0,enumerable:!0,configurable:!0}}get(t,n){if(Reflect.has(t,n))return t[n];const r=t[yf].type.children.findIndex(i=>i.name===n);if(r!==-1){const i=tl.visit(t[yf].children[r],t[iE]);return Reflect.set(t,n,i),i}}set(t,n,r){const i=t[yf].type.children.findIndex(s=>s.name===n);return i!==-1?(Lc.visit(t[yf].children[i],t[iE],r),Reflect.set(t,n,r)):Reflect.has(t,n)||typeof n=="symbol"?Reflect.set(t,n,r):!1}}class Gt extends Cn{}function Jt(e){return(t,n)=>t.getValid(n)?e(t,n):null}const $vt=(e,t)=>864e5*e[t],UX=(e,t)=>4294967296*e[t+1]+(e[t]>>>0),Mvt=(e,t)=>4294967296*(e[t+1]/1e3)+(e[t]>>>0)/1e3,Lvt=(e,t)=>4294967296*(e[t+1]/1e6)+(e[t]>>>0)/1e6,ZCe=e=>new Date(e),Fvt=(e,t)=>ZCe($vt(e,t)),jvt=(e,t)=>ZCe(UX(e,t)),Bvt=(e,t)=>null,eAe=(e,t,n)=>{if(n+1>=t.length)return null;const r=t[n],i=t[n+1];return e.subarray(r,i)},Uvt=({offset:e,values:t},n)=>{const r=e+n;return(t[r>>3]&1<<r%8)!==0},tAe=({values:e},t)=>Fvt(e,t),nAe=({values:e},t)=>jvt(e,t*2),Vy=({stride:e,values:t},n)=>t[e*n],zvt=({stride:e,values:t},n)=>BCe(t[e*n]),rAe=({values:e},t)=>e[t],Vvt=({stride:e,values:t},n)=>t.subarray(e*n,e*(n+1)),Hvt=({values:e,valueOffsets:t},n)=>eAe(e,t,n),qvt=({values:e,valueOffsets:t},n)=>{const r=eAe(e,t,n);return r!==null?Az(r):null},Wvt=({values:e},t)=>e[t],Gvt=({type:e,values:t},n)=>e.precision!==Do.HALF?t[n]:BCe(t[n]),Yvt=(e,t)=>e.type.unit===Nh.DAY?tAe(e,t):nAe(e,t),iAe=({values:e},t)=>1e3*UX(e,t*2),sAe=({values:e},t)=>UX(e,t*2),oAe=({values:e},t)=>Mvt(e,t*2),aAe=({values:e},t)=>Lvt(e,t*2),Kvt=(e,t)=>{switch(e.type.unit){case Wt.SECOND:return iAe(e,t);case Wt.MILLISECOND:return sAe(e,t);case Wt.MICROSECOND:return oAe(e,t);case Wt.NANOSECOND:return aAe(e,t)}},uAe=({values:e},t)=>e[t],lAe=({values:e},t)=>e[t],cAe=({values:e},t)=>e[t],fAe=({values:e},t)=>e[t],Xvt=(e,t)=>{switch(e.type.unit){case Wt.SECOND:return uAe(e,t);case Wt.MILLISECOND:return lAe(e,t);case Wt.MICROSECOND:return cAe(e,t);case Wt.NANOSECOND:return fAe(e,t)}},Qvt=({values:e,stride:t},n)=>dX.decimal(e.subarray(t*n,t*(n+1))),Jvt=(e,t)=>{const{valueOffsets:n,stride:r,children:i}=e,{[t*r]:s,[t*r+1]:o}=n,u=i[0].slice(s,o-s);return new hr([u])},Zvt=(e,t)=>{const{valueOffsets:n,children:r}=e,{[t]:i,[t+1]:s}=n,o=r[0];return new Q6(o.slice(i,s-i))},e1t=(e,t)=>new BX(e,t),t1t=(e,t)=>e.type.mode===el.Dense?dAe(e,t):hAe(e,t),dAe=(e,t)=>{const n=e.type.typeIdToChildIndex[e.typeIds[t]],r=e.children[n];return tl.visit(r,e.valueOffsets[t])},hAe=(e,t)=>{const n=e.type.typeIdToChildIndex[e.typeIds[t]],r=e.children[n];return tl.visit(r,t)},n1t=(e,t)=>{var n;return(n=e.dictionary)===null||n===void 0?void 0:n.get(e.values[t])},r1t=(e,t)=>e.type.unit===Ph.DAY_TIME?pAe(e,t):mAe(e,t),pAe=({values:e},t)=>e.subarray(2*t,2*(t+1)),mAe=({values:e},t)=>{const n=e[t],r=new Int32Array(2);return r[0]=Math.trunc(n/12),r[1]=Math.trunc(n%12),r},gAe=({values:e},t)=>e[t],yAe=({values:e},t)=>e[t],vAe=({values:e},t)=>e[t],bAe=({values:e},t)=>e[t],i1t=(e,t)=>{switch(e.type.unit){case Wt.SECOND:return gAe(e,t);case Wt.MILLISECOND:return yAe(e,t);case Wt.MICROSECOND:return vAe(e,t);case Wt.NANOSECOND:return bAe(e,t)}},s1t=(e,t)=>{const{stride:n,children:r}=e,s=r[0].slice(t*n,n);return new hr([s])};Gt.prototype.visitNull=Jt(Bvt);Gt.prototype.visitBool=Jt(Uvt);Gt.prototype.visitInt=Jt(Wvt);Gt.prototype.visitInt8=Jt(Vy);Gt.prototype.visitInt16=Jt(Vy);Gt.prototype.visitInt32=Jt(Vy);Gt.prototype.visitInt64=Jt(rAe);Gt.prototype.visitUint8=Jt(Vy);Gt.prototype.visitUint16=Jt(Vy);Gt.prototype.visitUint32=Jt(Vy);Gt.prototype.visitUint64=Jt(rAe);Gt.prototype.visitFloat=Jt(Gvt);Gt.prototype.visitFloat16=Jt(zvt);Gt.prototype.visitFloat32=Jt(Vy);Gt.prototype.visitFloat64=Jt(Vy);Gt.prototype.visitUtf8=Jt(qvt);Gt.prototype.visitBinary=Jt(Hvt);Gt.prototype.visitFixedSizeBinary=Jt(Vvt);Gt.prototype.visitDate=Jt(Yvt);Gt.prototype.visitDateDay=Jt(tAe);Gt.prototype.visitDateMillisecond=Jt(nAe);Gt.prototype.visitTimestamp=Jt(Kvt);Gt.prototype.visitTimestampSecond=Jt(iAe);Gt.prototype.visitTimestampMillisecond=Jt(sAe);Gt.prototype.visitTimestampMicrosecond=Jt(oAe);Gt.prototype.visitTimestampNanosecond=Jt(aAe);Gt.prototype.visitTime=Jt(Xvt);Gt.prototype.visitTimeSecond=Jt(uAe);Gt.prototype.visitTimeMillisecond=Jt(lAe);Gt.prototype.visitTimeMicrosecond=Jt(cAe);Gt.prototype.visitTimeNanosecond=Jt(fAe);Gt.prototype.visitDecimal=Jt(Qvt);Gt.prototype.visitList=Jt(Jvt);Gt.prototype.visitStruct=Jt(e1t);Gt.prototype.visitUnion=Jt(t1t);Gt.prototype.visitDenseUnion=Jt(dAe);Gt.prototype.visitSparseUnion=Jt(hAe);Gt.prototype.visitDictionary=Jt(n1t);Gt.prototype.visitInterval=Jt(r1t);Gt.prototype.visitIntervalDayTime=Jt(pAe);Gt.prototype.visitIntervalYearMonth=Jt(mAe);Gt.prototype.visitDuration=Jt(i1t);Gt.prototype.visitDurationSecond=Jt(gAe);Gt.prototype.visitDurationMillisecond=Jt(yAe);Gt.prototype.visitDurationMicrosecond=Jt(vAe);Gt.prototype.visitDurationNanosecond=Jt(bAe);Gt.prototype.visitFixedSizeList=Jt(s1t);Gt.prototype.visitMap=Jt(Zvt);const tl=new Gt,Tf=Symbol.for("keys"),sE=Symbol.for("vals");class Q6{constructor(t){return this[Tf]=new hr([t.children[0]]).memoize(),this[sE]=t.children[1],new Proxy(this,new a1t)}[Symbol.iterator](){return new o1t(this[Tf],this[sE])}get size(){return this[Tf].length}toArray(){return Object.values(this.toJSON())}toJSON(){const t=this[Tf],n=this[sE],r={};for(let i=-1,s=t.length;++i<s;)r[t.get(i)]=tl.visit(n,i);return r}toString(){return`{${[...this].map(([t,n])=>`${J1(t)}: ${J1(n)}`).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}}class o1t{constructor(t,n){this.keys=t,this.vals=n,this.keyIndex=0,this.numKeys=t.length}[Symbol.iterator](){return this}next(){const t=this.keyIndex;return t===this.numKeys?{done:!0,value:null}:(this.keyIndex++,{done:!1,value:[this.keys.get(t),tl.visit(this.vals,t)]})}}class a1t{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(t){return t[Tf].toArray().map(String)}has(t,n){return t[Tf].includes(n)}getOwnPropertyDescriptor(t,n){if(t[Tf].indexOf(n)!==-1)return{writable:!0,enumerable:!0,configurable:!0}}get(t,n){if(Reflect.has(t,n))return t[n];const r=t[Tf].indexOf(n);if(r!==-1){const i=tl.visit(Reflect.get(t,sE),r);return Reflect.set(t,n,i),i}}set(t,n,r){const i=t[Tf].indexOf(n);return i!==-1?(Lc.visit(Reflect.get(t,sE),i,r),Reflect.set(t,n,r)):Reflect.has(t,n)?Reflect.set(t,n,r):!1}}Object.defineProperties(Q6.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[Tf]:{writable:!0,enumerable:!1,configurable:!1,value:null},[sE]:{writable:!0,enumerable:!1,configurable:!1,value:null}});let Yce;function _Ae(e,t,n,r){const{length:i=0}=e;let s=typeof t!="number"?0:t,o=typeof n!="number"?i:n;return s<0&&(s=(s%i+i)%i),o<0&&(o=(o%i+i)%i),o<s&&(Yce=s,s=o,o=Yce),o>i&&(o=i),r?r(e,s,o):[s,o]}const Kce=e=>e!==e;function ES(e){if(typeof e!=="object"||e===null)return Kce(e)?Kce:n=>n===e;if(e instanceof Date){const n=e.valueOf();return r=>r instanceof Date?r.valueOf()===n:!1}return ArrayBuffer.isView(e)?n=>n?Qyt(e,n):!1:e instanceof Map?l1t(e):Array.isArray(e)?u1t(e):e instanceof hr?c1t(e):f1t(e,!0)}function u1t(e){const t=[];for(let n=-1,r=e.length;++n<r;)t[n]=ES(e[n]);return J6(t)}function l1t(e){let t=-1;const n=[];for(const r of e.values())n[++t]=ES(r);return J6(n)}function c1t(e){const t=[];for(let n=-1,r=e.length;++n<r;)t[n]=ES(e.get(n));return J6(t)}function f1t(e,t=!1){const n=Object.keys(e);if(!t&&n.length===0)return()=>!1;const r=[];for(let i=-1,s=n.length;++i<s;)r[i]=ES(e[n[i]]);return J6(r,n)}function J6(e,t){return n=>{if(!n||typeof n!="object")return!1;switch(n.constructor){case Array:return d1t(e,n);case Map:return Xce(e,n,n.keys());case Q6:case BX:case Object:case void 0:return Xce(e,n,t||Object.keys(n))}return n instanceof hr?h1t(e,n):!1}}function d1t(e,t){const n=e.length;if(t.length!==n)return!1;for(let r=-1;++r<n;)if(!e[r](t[r]))return!1;return!0}function h1t(e,t){const n=e.length;if(t.length!==n)return!1;for(let r=-1;++r<n;)if(!e[r](t.get(r)))return!1;return!0}function Xce(e,t,n){const r=n[Symbol.iterator](),i=t instanceof Map?t.keys():Object.keys(t)[Symbol.iterator](),s=t instanceof Map?t.values():Object.values(t)[Symbol.iterator]();let o=0;const a=e.length;let u=s.next(),l=r.next(),c=i.next();for(;o<a&&!l.done&&!c.done&&!u.done&&!(l.value!==c.value||!e[o](u.value));++o,l=r.next(),c=i.next(),u=s.next());return o===a&&l.done&&c.done&&u.done?!0:(r.return&&r.return(),i.return&&i.return(),s.return&&s.return(),!1)}function wAe(e,t,n,r){return(n&1<<r)!==0}function p1t(e,t,n,r){return(n&1<<r)>>r}function l$(e,t,n){const r=n.byteLength+7&-8;if(e>0||n.byteLength<r){const i=new Uint8Array(r);return i.set(e%8===0?n.subarray(e>>3):EAe(new zX(n,e,t,null,wAe)).subarray(0,r)),i}return n}function EAe(e){const t=[];let n=0,r=0,i=0;for(const o of e)o&&(i|=1<<r),++r===8&&(t[n++]=i,i=r=0);(n===0||r>0)&&(t[n++]=i);const s=new Uint8Array(t.length+7&-8);return s.set(t),s}class zX{constructor(t,n,r,i,s){this.bytes=t,this.length=r,this.context=i,this.get=s,this.bit=n%8,this.byteIndex=n>>3,this.byte=t[this.byteIndex++],this.index=0}next(){return this.index<this.length?(this.bit===8&&(this.bit=0,this.byte=this.bytes[this.byteIndex++]),{value:this.get(this.context,this.index++,this.byte,this.bit++)}):{done:!0,value:null}}[Symbol.iterator](){return this}}function Rz(e,t,n){if(n-t<=0)return 0;if(n-t<8){let s=0;for(const o of new zX(e,t,n-t,e,p1t))s+=o;return s}const r=n>>3<<3,i=t+(t%8===0?0:8-t%8);return Rz(e,t,i)+Rz(e,r,n)+m1t(e,i>>3,r-i>>3)}function m1t(e,t,n){let r=0,i=Math.trunc(t);const s=new DataView(e.buffer,e.byteOffset,e.byteLength),o=n===void 0?e.byteLength:i+n;for(;o-i>=4;)r+=X8(s.getUint32(i)),i+=4;for(;o-i>=2;)r+=X8(s.getUint16(i)),i+=2;for(;o-i>=1;)r+=X8(s.getUint8(i)),i+=1;return r}function X8(e){let t=Math.trunc(e);return t=t-(t>>>1&1431655765),t=(t&858993459)+(t>>>2&858993459),(t+(t>>>4)&252645135)*16843009>>>24}const g1t=-1;class Nr{get typeId(){return this.type.typeId}get ArrayType(){return this.type.ArrayType}get buffers(){return[this.valueOffsets,this.values,this.nullBitmap,this.typeIds]}get nullable(){if(this._nullCount!==0){const{type:t}=this;return Sn.isSparseUnion(t)?this.children.some(n=>n.nullable):Sn.isDenseUnion(t)?this.children.some(n=>n.nullable):this.nullBitmap&&this.nullBitmap.byteLength>0}return!0}get byteLength(){let t=0;const{valueOffsets:n,values:r,nullBitmap:i,typeIds:s}=this;return n&&(t+=n.byteLength),r&&(t+=r.byteLength),i&&(t+=i.byteLength),s&&(t+=s.byteLength),this.children.reduce((o,a)=>o+a.byteLength,t)}get nullCount(){if(Sn.isUnion(this.type))return this.children.reduce((r,i)=>r+i.nullCount,0);let t=this._nullCount,n;return t<=g1t&&(n=this.nullBitmap)&&(this._nullCount=t=this.length-Rz(n,this.offset,this.offset+this.length)),t}constructor(t,n,r,i,s,o=[],a){this.type=t,this.children=o,this.dictionary=a,this.offset=Math.floor(Math.max(n||0,0)),this.length=Math.floor(Math.max(r||0,0)),this._nullCount=Math.floor(Math.max(i||0,-1));let u;s instanceof Nr?(this.stride=s.stride,this.values=s.values,this.typeIds=s.typeIds,this.nullBitmap=s.nullBitmap,this.valueOffsets=s.valueOffsets):(this.stride=Md(t),s&&((u=s[0])&&(this.valueOffsets=u),(u=s[1])&&(this.values=u),(u=s[2])&&(this.nullBitmap=u),(u=s[3])&&(this.typeIds=u)))}getValid(t){const{type:n}=this;if(Sn.isUnion(n)){const r=n,i=this.children[r.typeIdToChildIndex[this.typeIds[t]]],s=r.mode===el.Dense?this.valueOffsets[t]:t;return i.getValid(s)}if(this.nullable&&this.nullCount>0){const r=this.offset+t;return(this.nullBitmap[r>>3]&1<<r%8)!==0}return!0}setValid(t,n){let r;const{type:i}=this;if(Sn.isUnion(i)){const s=i,o=this.children[s.typeIdToChildIndex[this.typeIds[t]]],a=s.mode===el.Dense?this.valueOffsets[t]:t;r=o.getValid(a),o.setValid(a,n)}else{let{nullBitmap:s}=this;const{offset:o,length:a}=this,u=o+t,l=1<<u%8,c=u>>3;(!s||s.byteLength<=c)&&(s=new Uint8Array((o+a+63&-64)>>3).fill(255),this.nullCount>0&&s.set(l$(o,a,this.nullBitmap),0),Object.assign(this,{nullBitmap:s,_nullCount:-1}));const f=s[c];r=(f&l)!==0,n?s[c]=f|l:s[c]=f&~l}return r!==!!n&&(this._nullCount=this.nullCount+(n?-1:1)),n}clone(t=this.type,n=this.offset,r=this.length,i=this._nullCount,s=this,o=this.children){return new Nr(t,n,r,i,s,o,this.dictionary)}slice(t,n){const{stride:r,typeId:i,children:s}=this,o=+(this._nullCount===0)-1,a=i===16?r:1,u=this._sliceBuffers(t,n,r,i);return this.clone(this.type,this.offset+t,n,o,u,s.length===0||this.valueOffsets?s:this._sliceChildren(s,a*t,a*n))}_changeLengthAndBackfillNullBitmap(t){if(this.typeId===re.Null)return this.clone(this.type,0,t,0);const{length:n,nullCount:r}=this,i=new Uint8Array((t+63&-64)>>3).fill(255,0,n>>3);i[n>>3]=(1<<n-(n&-8))-1,r>0&&i.set(l$(this.offset,n,this.nullBitmap),0);const s=this.buffers;return s[kp.VALIDITY]=i,this.clone(this.type,0,t,r+(t-n),s)}_sliceBuffers(t,n,r,i){let s;const{buffers:o}=this;return(s=o[kp.TYPE])&&(o[kp.TYPE]=s.subarray(t,t+n)),(s=o[kp.OFFSET])&&(o[kp.OFFSET]=s.subarray(t,t+n+1))||(s=o[kp.DATA])&&(o[kp.DATA]=i===6?s:s.subarray(r*t,r*(t+n))),o}_sliceChildren(t,n,r){return t.map(i=>i.slice(n,r))}}Nr.prototype.children=Object.freeze([]);class PC extends Cn{visit(t){return this.getVisitFn(t.type).call(this,t)}visitNull(t){const{["type"]:n,["offset"]:r=0,["length"]:i=0}=t;return new Nr(n,r,i,i)}visitBool(t){const{["type"]:n,["offset"]:r=0}=t,i=Pr(t.nullBitmap),s=Ys(n.ArrayType,t.data),{["length"]:o=s.length>>3,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Nr(n,r,o,a,[void 0,s,i])}visitInt(t){const{["type"]:n,["offset"]:r=0}=t,i=Pr(t.nullBitmap),s=Ys(n.ArrayType,t.data),{["length"]:o=s.length,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Nr(n,r,o,a,[void 0,s,i])}visitFloat(t){const{["type"]:n,["offset"]:r=0}=t,i=Pr(t.nullBitmap),s=Ys(n.ArrayType,t.data),{["length"]:o=s.length,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Nr(n,r,o,a,[void 0,s,i])}visitUtf8(t){const{["type"]:n,["offset"]:r=0}=t,i=Pr(t.data),s=Pr(t.nullBitmap),o=FT(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:u=t.nullBitmap?-1:0}=t;return new Nr(n,r,a,u,[o,i,s])}visitBinary(t){const{["type"]:n,["offset"]:r=0}=t,i=Pr(t.data),s=Pr(t.nullBitmap),o=FT(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:u=t.nullBitmap?-1:0}=t;return new Nr(n,r,a,u,[o,i,s])}visitFixedSizeBinary(t){const{["type"]:n,["offset"]:r=0}=t,i=Pr(t.nullBitmap),s=Ys(n.ArrayType,t.data),{["length"]:o=s.length/Md(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Nr(n,r,o,a,[void 0,s,i])}visitDate(t){const{["type"]:n,["offset"]:r=0}=t,i=Pr(t.nullBitmap),s=Ys(n.ArrayType,t.data),{["length"]:o=s.length/Md(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Nr(n,r,o,a,[void 0,s,i])}visitTimestamp(t){const{["type"]:n,["offset"]:r=0}=t,i=Pr(t.nullBitmap),s=Ys(n.ArrayType,t.data),{["length"]:o=s.length/Md(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Nr(n,r,o,a,[void 0,s,i])}visitTime(t){const{["type"]:n,["offset"]:r=0}=t,i=Pr(t.nullBitmap),s=Ys(n.ArrayType,t.data),{["length"]:o=s.length/Md(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Nr(n,r,o,a,[void 0,s,i])}visitDecimal(t){const{["type"]:n,["offset"]:r=0}=t,i=Pr(t.nullBitmap),s=Ys(n.ArrayType,t.data),{["length"]:o=s.length/Md(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Nr(n,r,o,a,[void 0,s,i])}visitList(t){const{["type"]:n,["offset"]:r=0,["child"]:i}=t,s=Pr(t.nullBitmap),o=FT(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:u=t.nullBitmap?-1:0}=t;return new Nr(n,r,a,u,[o,void 0,s],[i])}visitStruct(t){const{["type"]:n,["offset"]:r=0,["children"]:i=[]}=t,s=Pr(t.nullBitmap),{length:o=i.reduce((u,{length:l})=>Math.max(u,l),0),nullCount:a=t.nullBitmap?-1:0}=t;return new Nr(n,r,o,a,[void 0,void 0,s],i)}visitUnion(t){const{["type"]:n,["offset"]:r=0,["children"]:i=[]}=t,s=Ys(n.ArrayType,t.typeIds),{["length"]:o=s.length,["nullCount"]:a=-1}=t;if(Sn.isSparseUnion(n))return new Nr(n,r,o,a,[void 0,void 0,void 0,s],i);const u=FT(t.valueOffsets);return new Nr(n,r,o,a,[u,void 0,void 0,s],i)}visitDictionary(t){const{["type"]:n,["offset"]:r=0}=t,i=Pr(t.nullBitmap),s=Ys(n.indices.ArrayType,t.data),{["dictionary"]:o=new hr([new PC().visit({type:n.dictionary})])}=t,{["length"]:a=s.length,["nullCount"]:u=t.nullBitmap?-1:0}=t;return new Nr(n,r,a,u,[void 0,s,i],[],o)}visitInterval(t){const{["type"]:n,["offset"]:r=0}=t,i=Pr(t.nullBitmap),s=Ys(n.ArrayType,t.data),{["length"]:o=s.length/Md(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Nr(n,r,o,a,[void 0,s,i])}visitDuration(t){const{["type"]:n,["offset"]:r=0}=t,i=Pr(t.nullBitmap),s=Ys(n.ArrayType,t.data),{["length"]:o=s.length,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Nr(n,r,o,a,[void 0,s,i])}visitFixedSizeList(t){const{["type"]:n,["offset"]:r=0,["child"]:i=new PC().visit({type:n.valueType})}=t,s=Pr(t.nullBitmap),{["length"]:o=i.length/Md(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Nr(n,r,o,a,[void 0,void 0,s],[i])}visitMap(t){const{["type"]:n,["offset"]:r=0,["child"]:i=new PC().visit({type:n.childType})}=t,s=Pr(t.nullBitmap),o=FT(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:u=t.nullBitmap?-1:0}=t;return new Nr(n,r,a,u,[o,void 0,s],[i])}}const y1t=new PC;function aa(e){return y1t.visit(e)}class Qce{constructor(t=0,n){this.numChunks=t,this.getChunkIterator=n,this.chunkIndex=0,this.chunkIterator=this.getChunkIterator(0)}next(){for(;this.chunkIndex<this.numChunks;){const t=this.chunkIterator.next();if(!t.done)return t;++this.chunkIndex<this.numChunks&&(this.chunkIterator=this.getChunkIterator(this.chunkIndex))}return{done:!0,value:null}}[Symbol.iterator](){return this}}function xAe(e){return e.reduce((t,n)=>t+n.nullCount,0)}function SAe(e){return e.reduce((t,n,r)=>(t[r+1]=t[r]+n.length,t),new Uint32Array(e.length+1))}function TAe(e,t,n,r){const i=[];for(let s=-1,o=e.length;++s<o;){const a=e[s],u=t[s],{length:l}=a;if(u>=r)break;if(n>=u+l)continue;if(u>=n&&u+l<=r){i.push(a);continue}const c=Math.max(0,n-u),f=Math.min(r-u,l);i.push(a.slice(c,f-c))}return i.length===0&&i.push(e[0].slice(0,0)),i}function VX(e,t,n,r){let i=0,s=0,o=t.length-1;do{if(i>=o-1)return n<t[o]?r(e,i,n-t[i]):null;s=i+Math.trunc((o-i)*.5),n<t[s]?o=s:i=s}while(i<o)}function HX(e,t){return e.getValid(t)}function oE(e){function t(n,r,i){return e(n[r],i)}return function(n){const r=this.data;return VX(r,this._offsets,n,t)}}function CAe(e){let t;function n(r,i,s){return e(r[i],s,t)}return function(r,i){const s=this.data;t=i;const o=VX(s,this._offsets,r,n);return t=void 0,o}}function AAe(e){let t;function n(r,i,s){let o=s,a=0,u=0;for(let l=i-1,c=r.length;++l<c;){const f=r[l];if(~(a=e(f,t,o)))return u+a;o=0,u+=f.length}return-1}return function(r,i){t=r;const s=this.data,o=typeof i!="number"?n(s,0,0):VX(s,this._offsets,i,n);return t=void 0,o}}class Yt extends Cn{}function v1t(e,t){return t===null&&e.length>0?0:-1}function b1t(e,t){const{nullBitmap:n}=e;if(!n||e.nullCount<=0)return-1;let r=0;for(const i of new zX(n,e.offset+(t||0),e.length,n,wAe)){if(!i)return r;++r}return-1}function cn(e,t,n){if(t===void 0)return-1;if(t===null)switch(e.typeId){case re.Union:break;case re.Dictionary:break;default:return b1t(e,n)}const r=tl.getVisitFn(e),i=ES(t);for(let s=(n||0)-1,o=e.length;++s<o;)if(i(r(e,s)))return s;return-1}function IAe(e,t,n){const r=tl.getVisitFn(e),i=ES(t);for(let s=(n||0)-1,o=e.length;++s<o;)if(i(r(e,s)))return s;return-1}Yt.prototype.visitNull=v1t;Yt.prototype.visitBool=cn;Yt.prototype.visitInt=cn;Yt.prototype.visitInt8=cn;Yt.prototype.visitInt16=cn;Yt.prototype.visitInt32=cn;Yt.prototype.visitInt64=cn;Yt.prototype.visitUint8=cn;Yt.prototype.visitUint16=cn;Yt.prototype.visitUint32=cn;Yt.prototype.visitUint64=cn;Yt.prototype.visitFloat=cn;Yt.prototype.visitFloat16=cn;Yt.prototype.visitFloat32=cn;Yt.prototype.visitFloat64=cn;Yt.prototype.visitUtf8=cn;Yt.prototype.visitBinary=cn;Yt.prototype.visitFixedSizeBinary=cn;Yt.prototype.visitDate=cn;Yt.prototype.visitDateDay=cn;Yt.prototype.visitDateMillisecond=cn;Yt.prototype.visitTimestamp=cn;Yt.prototype.visitTimestampSecond=cn;Yt.prototype.visitTimestampMillisecond=cn;Yt.prototype.visitTimestampMicrosecond=cn;Yt.prototype.visitTimestampNanosecond=cn;Yt.prototype.visitTime=cn;Yt.prototype.visitTimeSecond=cn;Yt.prototype.visitTimeMillisecond=cn;Yt.prototype.visitTimeMicrosecond=cn;Yt.prototype.visitTimeNanosecond=cn;Yt.prototype.visitDecimal=cn;Yt.prototype.visitList=cn;Yt.prototype.visitStruct=cn;Yt.prototype.visitUnion=cn;Yt.prototype.visitDenseUnion=IAe;Yt.prototype.visitSparseUnion=IAe;Yt.prototype.visitDictionary=cn;Yt.prototype.visitInterval=cn;Yt.prototype.visitIntervalDayTime=cn;Yt.prototype.visitIntervalYearMonth=cn;Yt.prototype.visitDuration=cn;Yt.prototype.visitDurationSecond=cn;Yt.prototype.visitDurationMillisecond=cn;Yt.prototype.visitDurationMicrosecond=cn;Yt.prototype.visitDurationNanosecond=cn;Yt.prototype.visitFixedSizeList=cn;Yt.prototype.visitMap=cn;const c$=new Yt;class Kt extends Cn{}function Zt(e){const{type:t}=e;if(e.nullCount===0&&e.stride===1&&(t.typeId===re.Timestamp||t instanceof ru&&t.bitWidth!==64||t instanceof Nm&&t.bitWidth!==64||t instanceof X0&&t.precision!==Do.HALF))return new Qce(e.data.length,r=>{const i=e.data[r];return i.values.subarray(0,i.length)[Symbol.iterator]()});let n=0;return new Qce(e.data.length,r=>{const s=e.data[r].length,o=e.slice(n,n+s);return n+=s,new _1t(o)})}class _1t{constructor(t){this.vector=t,this.index=0}next(){return this.index<this.vector.length?{value:this.vector.get(this.index++)}:{done:!0,value:null}}[Symbol.iterator](){return this}}Kt.prototype.visitNull=Zt;Kt.prototype.visitBool=Zt;Kt.prototype.visitInt=Zt;Kt.prototype.visitInt8=Zt;Kt.prototype.visitInt16=Zt;Kt.prototype.visitInt32=Zt;Kt.prototype.visitInt64=Zt;Kt.prototype.visitUint8=Zt;Kt.prototype.visitUint16=Zt;Kt.prototype.visitUint32=Zt;Kt.prototype.visitUint64=Zt;Kt.prototype.visitFloat=Zt;Kt.prototype.visitFloat16=Zt;Kt.prototype.visitFloat32=Zt;Kt.prototype.visitFloat64=Zt;Kt.prototype.visitUtf8=Zt;Kt.prototype.visitBinary=Zt;Kt.prototype.visitFixedSizeBinary=Zt;Kt.prototype.visitDate=Zt;Kt.prototype.visitDateDay=Zt;Kt.prototype.visitDateMillisecond=Zt;Kt.prototype.visitTimestamp=Zt;Kt.prototype.visitTimestampSecond=Zt;Kt.prototype.visitTimestampMillisecond=Zt;Kt.prototype.visitTimestampMicrosecond=Zt;Kt.prototype.visitTimestampNanosecond=Zt;Kt.prototype.visitTime=Zt;Kt.prototype.visitTimeSecond=Zt;Kt.prototype.visitTimeMillisecond=Zt;Kt.prototype.visitTimeMicrosecond=Zt;Kt.prototype.visitTimeNanosecond=Zt;Kt.prototype.visitDecimal=Zt;Kt.prototype.visitList=Zt;Kt.prototype.visitStruct=Zt;Kt.prototype.visitUnion=Zt;Kt.prototype.visitDenseUnion=Zt;Kt.prototype.visitSparseUnion=Zt;Kt.prototype.visitDictionary=Zt;Kt.prototype.visitInterval=Zt;Kt.prototype.visitIntervalDayTime=Zt;Kt.prototype.visitIntervalYearMonth=Zt;Kt.prototype.visitDuration=Zt;Kt.prototype.visitDurationSecond=Zt;Kt.prototype.visitDurationMillisecond=Zt;Kt.prototype.visitDurationMicrosecond=Zt;Kt.prototype.visitDurationNanosecond=Zt;Kt.prototype.visitFixedSizeList=Zt;Kt.prototype.visitMap=Zt;const qX=new Kt,w1t=(e,t)=>e+t;class Hy extends Cn{visitNull(t,n){return 0}visitInt(t,n){return t.type.bitWidth/8}visitFloat(t,n){return t.type.ArrayType.BYTES_PER_ELEMENT}visitBool(t,n){return 1/8}visitDecimal(t,n){return t.type.bitWidth/8}visitDate(t,n){return(t.type.unit+1)*4}visitTime(t,n){return t.type.bitWidth/8}visitTimestamp(t,n){return t.type.unit===Wt.SECOND?4:8}visitInterval(t,n){return(t.type.unit+1)*4}visitDuration(t,n){return 8}visitStruct(t,n){return t.children.reduce((r,i)=>r+Dh.visit(i,n),0)}visitFixedSizeBinary(t,n){return t.type.byteWidth}visitMap(t,n){return 8+t.children.reduce((r,i)=>r+Dh.visit(i,n),0)}visitDictionary(t,n){var r;return t.type.indices.bitWidth/8+(((r=t.dictionary)===null||r===void 0?void 0:r.getByteLength(t.values[n]))||0)}}const E1t=({valueOffsets:e},t)=>8+(e[t+1]-e[t]),x1t=({valueOffsets:e},t)=>8+(e[t+1]-e[t]),S1t=({valueOffsets:e,stride:t,children:n},r)=>{const i=n[0],{[r*t]:s}=e,{[r*t+1]:o}=e,a=Dh.getVisitFn(i.type),u=i.slice(s,o-s);let l=8;for(let c=-1,f=o-s;++c<f;)l+=a(u,c);return l},T1t=({stride:e,children:t},n)=>{const r=t[0],i=r.slice(n*e,e),s=Dh.getVisitFn(r.type);let o=0;for(let a=-1,u=i.length;++a<u;)o+=s(i,a);return o},C1t=(e,t)=>e.type.mode===el.Dense?kAe(e,t):RAe(e,t),kAe=({type:e,children:t,typeIds:n,valueOffsets:r},i)=>{const s=e.typeIdToChildIndex[n[i]];return 8+Dh.visit(t[s],r[i])},RAe=({children:e},t)=>4+Dh.visitMany(e,e.map(()=>t)).reduce(w1t,0);Hy.prototype.visitUtf8=E1t;Hy.prototype.visitBinary=x1t;Hy.prototype.visitList=S1t;Hy.prototype.visitFixedSizeList=T1t;Hy.prototype.visitUnion=C1t;Hy.prototype.visitDenseUnion=kAe;Hy.prototype.visitSparseUnion=RAe;const Dh=new Hy;var NAe;const PAe={},DAe={};class hr{constructor(t){var n,r,i;const s=t[0]instanceof hr?t.flatMap(a=>a.data):t;if(s.length===0||s.some(a=>!(a instanceof Nr)))throw new TypeError("Vector constructor expects an Array of Data instances.");const o=(n=s[0])===null||n===void 0?void 0:n.type;switch(s.length){case 0:this._offsets=[0];break;case 1:{const{get:a,set:u,indexOf:l,byteLength:c}=PAe[o.typeId],f=s[0];this.isValid=d=>HX(f,d),this.get=d=>a(f,d),this.set=(d,h)=>u(f,d,h),this.indexOf=d=>l(f,d),this.getByteLength=d=>c(f,d),this._offsets=[0,f.length];break}default:Object.setPrototypeOf(this,DAe[o.typeId]),this._offsets=SAe(s);break}this.data=s,this.type=o,this.stride=Md(o),this.numChildren=(i=(r=o.children)===null||r===void 0?void 0:r.length)!==null&&i!==void 0?i:0,this.length=this._offsets.at(-1)}get byteLength(){return this.data.reduce((t,n)=>t+n.byteLength,0)}get nullCount(){return xAe(this.data)}get ArrayType(){return this.type.ArrayType}get[Symbol.toStringTag](){return`${this.VectorName}<${this.type[Symbol.toStringTag]}>`}get VectorName(){return`${re[this.type.typeId]}Vector`}isValid(t){return!1}get(t){return null}set(t,n){}indexOf(t,n){return-1}includes(t,n){return this.indexOf(t,n)>-1}getByteLength(t){return 0}[Symbol.iterator](){return qX.visit(this)}concat(...t){return new hr(this.data.concat(t.flatMap(n=>n.data).flat(Number.POSITIVE_INFINITY)))}slice(t,n){return new hr(_Ae(this,t,n,({data:r,_offsets:i},s,o)=>TAe(r,i,s,o)))}toJSON(){return[...this]}toArray(){const{type:t,data:n,length:r,stride:i,ArrayType:s}=this;switch(t.typeId){case re.Int:case re.Float:case re.Decimal:case re.Time:case re.Timestamp:switch(n.length){case 0:return new s;case 1:return n[0].values.subarray(0,r*i);default:return n.reduce((o,{values:a,length:u})=>(o.array.set(a.subarray(0,u*i),o.offset),o.offset+=u*i,o),{array:new s(r*i),offset:0}).array}}return[...this]}toString(){return`[${[...this].join(",")}]`}getChild(t){var n;return this.getChildAt((n=this.type.children)===null||n===void 0?void 0:n.findIndex(r=>r.name===t))}getChildAt(t){return t>-1&&t<this.numChildren?new hr(this.data.map(({children:n})=>n[t])):null}get isMemoized(){return Sn.isDictionary(this.type)?this.data[0].dictionary.isMemoized:!1}memoize(){if(Sn.isDictionary(this.type)){const t=new f$(this.data[0].dictionary),n=this.data.map(r=>{const i=r.clone();return i.dictionary=t,i});return new hr(n)}return new f$(this)}unmemoize(){if(Sn.isDictionary(this.type)&&this.isMemoized){const t=this.data[0].dictionary.unmemoize(),n=this.data.map(r=>{const i=r.clone();return i.dictionary=t,i});return new hr(n)}return this}}NAe=Symbol.toStringTag;hr[NAe]=(e=>{e.type=Sn.prototype,e.data=[],e.length=0,e.stride=1,e.numChildren=0,e._offsets=new Uint32Array([0]),e[Symbol.isConcatSpreadable]=!0;const t=Object.keys(re).map(n=>re[n]).filter(n=>typeof n=="number"&&n!==re.NONE);for(const n of t){const r=tl.getVisitFnByTypeId(n),i=Lc.getVisitFnByTypeId(n),s=c$.getVisitFnByTypeId(n),o=Dh.getVisitFnByTypeId(n);PAe[n]={get:r,set:i,indexOf:s,byteLength:o},DAe[n]=Object.create(e,{isValid:{value:oE(HX)},get:{value:oE(tl.getVisitFnByTypeId(n))},set:{value:CAe(Lc.getVisitFnByTypeId(n))},indexOf:{value:AAe(c$.getVisitFnByTypeId(n))},getByteLength:{value:oE(Dh.getVisitFnByTypeId(n))}})}return"Vector"})(hr.prototype);class f$ extends hr{constructor(t){super(t.data);const n=this.get,r=this.set,i=this.slice,s=new Array(this.length);Object.defineProperty(this,"get",{value(o){const a=s[o];if(a!==void 0)return a;const u=n.call(this,o);return s[o]=u,u}}),Object.defineProperty(this,"set",{value(o,a){r.call(this,o,a),s[o]=a}}),Object.defineProperty(this,"slice",{value:(o,a)=>new f$(i.call(this,o,a))}),Object.defineProperty(this,"isMemoized",{value:!0}),Object.defineProperty(this,"unmemoize",{value:()=>new hr(this.data)}),Object.defineProperty(this,"memoize",{value:()=>this})}}function A1t(e){if(!e||e.length<=0)return function(i){return!0};let t="";const n=e.filter(r=>r===r);return n.length>0&&(t=`
    switch (x) {${n.map(r=>`
        case ${I1t(r)}:`).join("")}
            return false;
    }`),e.length!==n.length&&(t=`if (x !== x) return false;
${t}`),new Function("x",`${t}
return true;`)}function I1t(e){return typeof e!="bigint"?J1(e):`${J1(e)}n`}const Q8=(e,t)=>(Math.ceil(e)*t+63&-64||64)/t,k1t=(e,t=0)=>e.length>=t?e.subarray(0,t):i$(new e.constructor(t),e,0);class Z6{constructor(t,n=1){this.buffer=t,this.stride=n,this.BYTES_PER_ELEMENT=t.BYTES_PER_ELEMENT,this.ArrayType=t.constructor,this._resize(this.length=Math.ceil(t.length/n))}get byteLength(){return Math.ceil(this.length*this.stride)*this.BYTES_PER_ELEMENT}get reservedLength(){return this.buffer.length/this.stride}get reservedByteLength(){return this.buffer.byteLength}set(t,n){return this}append(t){return this.set(this.length,t)}reserve(t){if(t>0){this.length+=t;const n=this.stride,r=this.length*n,i=this.buffer.length;r>=i&&this._resize(i===0?Q8(r*1,this.BYTES_PER_ELEMENT):Q8(r*2,this.BYTES_PER_ELEMENT))}return this}flush(t=this.length){t=Q8(t*this.stride,this.BYTES_PER_ELEMENT);const n=k1t(this.buffer,t);return this.clear(),n}clear(){return this.length=0,this._resize(0),this}_resize(t){return this.buffer=i$(new this.ArrayType(t),this.buffer)}}Z6.prototype.offset=0;class Ok extends Z6{last(){return this.get(this.length-1)}get(t){return this.buffer[t]}set(t,n){return this.reserve(t-this.length+1),this.buffer[t*this.stride]=n,this}}class OAe extends Ok{constructor(t=new Uint8Array(0)){super(t,1/8),this.numValid=0}get numInvalid(){return this.length-this.numValid}get(t){return this.buffer[t>>3]>>t%8&1}set(t,n){const{buffer:r}=this.reserve(t-this.length+1),i=t>>3,s=t%8,o=r[i]>>s&1;return n?o===0&&(r[i]|=1<<s,++this.numValid):o===1&&(r[i]&=~(1<<s),--this.numValid),this}clear(){return this.numValid=0,super.clear()}}class $Ae extends Ok{constructor(t=new Int32Array(1)){super(t,1)}append(t){return this.set(this.length-1,t)}set(t,n){const r=this.length-1,i=this.reserve(t-r+1).buffer;return r<t++&&i.fill(i[r],r,t),i[t]=i[t-1]+n,this}flush(t=this.length-1){return t>this.length&&this.set(t-1,0),super.flush(t+1)}}let ul=class{static throughNode(t){throw new Error('"throughNode" not available in this environment')}static throughDOM(t){throw new Error('"throughDOM" not available in this environment')}constructor({type:t,nullValues:n}){this.length=0,this.finished=!1,this.type=t,this.children=[],this.nullValues=n,this.stride=Md(t),this._nulls=new OAe,n&&n.length>0&&(this._isValid=A1t(n))}toVector(){return new hr([this.flush()])}get ArrayType(){return this.type.ArrayType}get nullCount(){return this._nulls.numInvalid}get numChildren(){return this.children.length}get byteLength(){let t=0;const{_offsets:n,_values:r,_nulls:i,_typeIds:s,children:o}=this;return n&&(t+=n.byteLength),r&&(t+=r.byteLength),i&&(t+=i.byteLength),s&&(t+=s.byteLength),o.reduce((a,u)=>a+u.byteLength,t)}get reservedLength(){return this._nulls.reservedLength}get reservedByteLength(){let t=0;return this._offsets&&(t+=this._offsets.reservedByteLength),this._values&&(t+=this._values.reservedByteLength),this._nulls&&(t+=this._nulls.reservedByteLength),this._typeIds&&(t+=this._typeIds.reservedByteLength),this.children.reduce((n,r)=>n+r.reservedByteLength,t)}get valueOffsets(){return this._offsets?this._offsets.buffer:null}get values(){return this._values?this._values.buffer:null}get nullBitmap(){return this._nulls?this._nulls.buffer:null}get typeIds(){return this._typeIds?this._typeIds.buffer:null}append(t){return this.set(this.length,t)}isValid(t){return this._isValid(t)}set(t,n){return this.setValid(t,this.isValid(n))&&this.setValue(t,n),this}setValue(t,n){this._setValue(this,t,n)}setValid(t,n){return this.length=this._nulls.set(t,+n).length,n}addChild(t,n=`${this.numChildren}`){throw new Error(`Cannot append children to non-nested type "${this.type}"`)}getChildAt(t){return this.children[t]||null}flush(){let t,n,r,i;const{type:s,length:o,nullCount:a,_typeIds:u,_offsets:l,_values:c,_nulls:f}=this;(n=u==null?void 0:u.flush(o))?i=l==null?void 0:l.flush(o):(i=l==null?void 0:l.flush(o))?t=c==null?void 0:c.flush(l.last()):t=c==null?void 0:c.flush(o),a>0&&(r=f==null?void 0:f.flush(o));const d=this.children.map(h=>h.flush());return this.clear(),aa({type:s,length:o,nullCount:a,children:d,child:d[0],data:t,typeIds:n,nullBitmap:r,valueOffsets:i})}finish(){this.finished=!0;for(const t of this.children)t.finish();return this}clear(){var t,n,r,i;this.length=0,(t=this._nulls)===null||t===void 0||t.clear(),(n=this._values)===null||n===void 0||n.clear(),(r=this._offsets)===null||r===void 0||r.clear(),(i=this._typeIds)===null||i===void 0||i.clear();for(const s of this.children)s.clear();return this}};ul.prototype.length=1;ul.prototype.stride=1;ul.prototype.children=null;ul.prototype.finished=!1;ul.prototype.nullValues=null;ul.prototype._isValid=()=>!0;class ng extends ul{constructor(t){super(t),this._values=new Ok(new this.ArrayType(0),this.stride)}setValue(t,n){const r=this._values;return r.reserve(t-r.length+1),super.setValue(t,n)}}class e4 extends ul{constructor(t){super(t),this._pendingLength=0,this._offsets=new $Ae}setValue(t,n){const r=this._pending||(this._pending=new Map),i=r.get(t);i&&(this._pendingLength-=i.length),this._pendingLength+=n instanceof Q6?n[Tf].length:n.length,r.set(t,n)}setValid(t,n){return super.setValid(t,n)?!0:((this._pending||(this._pending=new Map)).set(t,void 0),!1)}clear(){return this._pendingLength=0,this._pending=void 0,super.clear()}flush(){return this._flush(),super.flush()}finish(){return this._flush(),super.finish()}_flush(){const t=this._pending,n=this._pendingLength;return this._pendingLength=0,this._pending=void 0,t&&t.size>0&&this._flushPending(t,n),this}}class Nz{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}offset(){return this.bb.readInt64(this.bb_pos)}metaDataLength(){return this.bb.readInt32(this.bb_pos+8)}bodyLength(){return this.bb.readInt64(this.bb_pos+16)}static sizeOf(){return 24}static createBlock(t,n,r,i){return t.prep(8,24),t.writeInt64(BigInt(i??0)),t.pad(4),t.writeInt32(r),t.writeInt64(BigInt(n??0)),t.offset()}}const J8=2,qd=4,Up=4,zr=4,Og=new Int32Array(2),Jce=new Float32Array(Og.buffer),Zce=new Float64Array(Og.buffer),tP=new Uint16Array(new Uint8Array([1,0]).buffer)[0]===1;var Pz;(function(e){e[e.UTF8_BYTES=1]="UTF8_BYTES",e[e.UTF16_STRING=2]="UTF16_STRING"})(Pz||(Pz={}));let d$=class MAe{constructor(t){this.bytes_=t,this.position_=0,this.text_decoder_=new TextDecoder}static allocate(t){return new MAe(new Uint8Array(t))}clear(){this.position_=0}bytes(){return this.bytes_}position(){return this.position_}setPosition(t){this.position_=t}capacity(){return this.bytes_.length}readInt8(t){return this.readUint8(t)<<24>>24}readUint8(t){return this.bytes_[t]}readInt16(t){return this.readUint16(t)<<16>>16}readUint16(t){return this.bytes_[t]|this.bytes_[t+1]<<8}readInt32(t){return this.bytes_[t]|this.bytes_[t+1]<<8|this.bytes_[t+2]<<16|this.bytes_[t+3]<<24}readUint32(t){return this.readInt32(t)>>>0}readInt64(t){return BigInt.asIntN(64,BigInt(this.readUint32(t))+(BigInt(this.readUint32(t+4))<<BigInt(32)))}readUint64(t){return BigInt.asUintN(64,BigInt(this.readUint32(t))+(BigInt(this.readUint32(t+4))<<BigInt(32)))}readFloat32(t){return Og[0]=this.readInt32(t),Jce[0]}readFloat64(t){return Og[tP?0:1]=this.readInt32(t),Og[tP?1:0]=this.readInt32(t+4),Zce[0]}writeInt8(t,n){this.bytes_[t]=n}writeUint8(t,n){this.bytes_[t]=n}writeInt16(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8}writeUint16(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8}writeInt32(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8,this.bytes_[t+2]=n>>16,this.bytes_[t+3]=n>>24}writeUint32(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8,this.bytes_[t+2]=n>>16,this.bytes_[t+3]=n>>24}writeInt64(t,n){this.writeInt32(t,Number(BigInt.asIntN(32,n))),this.writeInt32(t+4,Number(BigInt.asIntN(32,n>>BigInt(32))))}writeUint64(t,n){this.writeUint32(t,Number(BigInt.asUintN(32,n))),this.writeUint32(t+4,Number(BigInt.asUintN(32,n>>BigInt(32))))}writeFloat32(t,n){Jce[0]=n,this.writeInt32(t,Og[0])}writeFloat64(t,n){Zce[0]=n,this.writeInt32(t,Og[tP?0:1]),this.writeInt32(t+4,Og[tP?1:0])}getBufferIdentifier(){if(this.bytes_.length<this.position_+qd+Up)throw new Error("FlatBuffers: ByteBuffer is too short to contain an identifier.");let t="";for(let n=0;n<Up;n++)t+=String.fromCharCode(this.readInt8(this.position_+qd+n));return t}__offset(t,n){const r=t-this.readInt32(t);return n<this.readInt16(r)?this.readInt16(r+n):0}__union(t,n){return t.bb_pos=n+this.readInt32(n),t.bb=this,t}__string(t,n){t+=this.readInt32(t);const r=this.readInt32(t);t+=qd;const i=this.bytes_.subarray(t,t+r);return n===Pz.UTF8_BYTES?i:this.text_decoder_.decode(i)}__union_with_string(t,n){return typeof t=="string"?this.__string(n):this.__union(t,n)}__indirect(t){return t+this.readInt32(t)}__vector(t){return t+this.readInt32(t)+qd}__vector_len(t){return this.readInt32(t+this.readInt32(t))}__has_identifier(t){if(t.length!=Up)throw new Error("FlatBuffers: file identifier must be length "+Up);for(let n=0;n<Up;n++)if(t.charCodeAt(n)!=this.readInt8(this.position()+qd+n))return!1;return!0}createScalarList(t,n){const r=[];for(let i=0;i<n;++i){const s=t(i);s!==null&&r.push(s)}return r}createObjList(t,n){const r=[];for(let i=0;i<n;++i){const s=t(i);s!==null&&r.push(s.unpack())}return r}},LAe=class FAe{constructor(t){this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null,this.text_encoder=new TextEncoder;let n;t?n=t:n=1024,this.bb=d$.allocate(n),this.space=n}clear(){this.bb.clear(),this.space=this.bb.capacity(),this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null}forceDefaults(t){this.force_defaults=t}dataBuffer(){return this.bb}asUint8Array(){return this.bb.bytes().subarray(this.bb.position(),this.bb.position()+this.offset())}prep(t,n){t>this.minalign&&(this.minalign=t);const r=~(this.bb.capacity()-this.space+n)+1&t-1;for(;this.space<r+t+n;){const i=this.bb.capacity();this.bb=FAe.growByteBuffer(this.bb),this.space+=this.bb.capacity()-i}this.pad(r)}pad(t){for(let n=0;n<t;n++)this.bb.writeInt8(--this.space,0)}writeInt8(t){this.bb.writeInt8(this.space-=1,t)}writeInt16(t){this.bb.writeInt16(this.space-=2,t)}writeInt32(t){this.bb.writeInt32(this.space-=4,t)}writeInt64(t){this.bb.writeInt64(this.space-=8,t)}writeFloat32(t){this.bb.writeFloat32(this.space-=4,t)}writeFloat64(t){this.bb.writeFloat64(this.space-=8,t)}addInt8(t){this.prep(1,0),this.writeInt8(t)}addInt16(t){this.prep(2,0),this.writeInt16(t)}addInt32(t){this.prep(4,0),this.writeInt32(t)}addInt64(t){this.prep(8,0),this.writeInt64(t)}addFloat32(t){this.prep(4,0),this.writeFloat32(t)}addFloat64(t){this.prep(8,0),this.writeFloat64(t)}addFieldInt8(t,n,r){(this.force_defaults||n!=r)&&(this.addInt8(n),this.slot(t))}addFieldInt16(t,n,r){(this.force_defaults||n!=r)&&(this.addInt16(n),this.slot(t))}addFieldInt32(t,n,r){(this.force_defaults||n!=r)&&(this.addInt32(n),this.slot(t))}addFieldInt64(t,n,r){(this.force_defaults||n!==r)&&(this.addInt64(n),this.slot(t))}addFieldFloat32(t,n,r){(this.force_defaults||n!=r)&&(this.addFloat32(n),this.slot(t))}addFieldFloat64(t,n,r){(this.force_defaults||n!=r)&&(this.addFloat64(n),this.slot(t))}addFieldOffset(t,n,r){(this.force_defaults||n!=r)&&(this.addOffset(n),this.slot(t))}addFieldStruct(t,n,r){n!=r&&(this.nested(n),this.slot(t))}nested(t){if(t!=this.offset())throw new TypeError("FlatBuffers: struct must be serialized inline.")}notNested(){if(this.isNested)throw new TypeError("FlatBuffers: object serialization must not be nested.")}slot(t){this.vtable!==null&&(this.vtable[t]=this.offset())}offset(){return this.bb.capacity()-this.space}static growByteBuffer(t){const n=t.capacity();if(n&3221225472)throw new Error("FlatBuffers: cannot grow buffer beyond 2 gigabytes.");const r=n<<1,i=d$.allocate(r);return i.setPosition(r-n),i.bytes().set(t.bytes(),r-n),i}addOffset(t){this.prep(qd,0),this.writeInt32(this.offset()-t+qd)}startObject(t){this.notNested(),this.vtable==null&&(this.vtable=[]),this.vtable_in_use=t;for(let n=0;n<t;n++)this.vtable[n]=0;this.isNested=!0,this.object_start=this.offset()}endObject(){if(this.vtable==null||!this.isNested)throw new Error("FlatBuffers: endObject called without startObject");this.addInt32(0);const t=this.offset();let n=this.vtable_in_use-1;for(;n>=0&&this.vtable[n]==0;n--);const r=n+1;for(;n>=0;n--)this.addInt16(this.vtable[n]!=0?t-this.vtable[n]:0);const i=2;this.addInt16(t-this.object_start);const s=(r+i)*J8;this.addInt16(s);let o=0;const a=this.space;e:for(n=0;n<this.vtables.length;n++){const u=this.bb.capacity()-this.vtables[n];if(s==this.bb.readInt16(u)){for(let l=J8;l<s;l+=J8)if(this.bb.readInt16(a+l)!=this.bb.readInt16(u+l))continue e;o=this.vtables[n];break}}return o?(this.space=this.bb.capacity()-t,this.bb.writeInt32(this.space,o-t)):(this.vtables.push(this.offset()),this.bb.writeInt32(this.bb.capacity()-t,this.offset()-t)),this.isNested=!1,t}finish(t,n,r){const i=r?zr:0;if(n){const s=n;if(this.prep(this.minalign,qd+Up+i),s.length!=Up)throw new TypeError("FlatBuffers: file identifier must be length "+Up);for(let o=Up-1;o>=0;o--)this.writeInt8(s.charCodeAt(o))}this.prep(this.minalign,qd+i),this.addOffset(t),i&&this.addInt32(this.bb.capacity()-this.space),this.bb.setPosition(this.space)}finishSizePrefixed(t,n){this.finish(t,n,!0)}requiredField(t,n){const r=this.bb.capacity()-t,i=r-this.bb.readInt32(r);if(!(n<this.bb.readInt16(i)&&this.bb.readInt16(i+n)!=0))throw new TypeError("FlatBuffers: field "+n+" must be set")}startVector(t,n,r){this.notNested(),this.vector_num_elems=n,this.prep(qd,t*n),this.prep(r,t*n)}endVector(){return this.writeInt32(this.vector_num_elems),this.offset()}createSharedString(t){if(!t)return 0;if(this.string_maps||(this.string_maps=new Map),this.string_maps.has(t))return this.string_maps.get(t);const n=this.createString(t);return this.string_maps.set(t,n),n}createString(t){if(t==null)return 0;let n;t instanceof Uint8Array?n=t:n=this.text_encoder.encode(t),this.addInt8(0),this.startVector(1,n.length,1),this.bb.setPosition(this.space-=n.length);for(let r=0,i=this.space,s=this.bb.bytes();r<n.length;r++)s[i++]=n[r];return this.endVector()}createObjectOffset(t){return t===null?0:typeof t=="string"?this.createString(t):t.pack(this)}createObjectOffsetList(t){const n=[];for(let r=0;r<t.length;++r){const i=t[r];if(i!==null)n.push(this.createObjectOffset(i));else throw new TypeError("FlatBuffers: Argument for createObjectOffsetList cannot contain null.")}return n}createStructOffsetList(t,n){return n(this,t.length),this.createObjectOffsetList(t.slice().reverse()),this.endVector()}};class Rs{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsKeyValue(t,n){return(n||new Rs).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsKeyValue(t,n){return t.setPosition(t.position()+zr),(n||new Rs).__init(t.readInt32(t.position())+t.position(),t)}key(t){const n=this.bb.__offset(this.bb_pos,4);return n?this.bb.__string(this.bb_pos+n,t):null}value(t){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.__string(this.bb_pos+n,t):null}static startKeyValue(t){t.startObject(2)}static addKey(t,n){t.addFieldOffset(0,n,0)}static addValue(t,n){t.addFieldOffset(1,n,0)}static endKeyValue(t){return t.endObject()}static createKeyValue(t,n,r){return Rs.startKeyValue(t),Rs.addKey(t,n),Rs.addValue(t,r),Rs.endKeyValue(t)}}var ox;(function(e){e[e.V1=0]="V1",e[e.V2=1]="V2",e[e.V3=2]="V3",e[e.V4=3]="V4",e[e.V5=4]="V5"})(ox||(ox={}));var ax;(function(e){e[e.Little=0]="Little",e[e.Big=1]="Big"})(ax||(ax={}));var h$;(function(e){e[e.DenseArray=0]="DenseArray"})(h$||(h$={}));class _l{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsInt(t,n){return(n||new _l).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsInt(t,n){return t.setPosition(t.position()+zr),(n||new _l).__init(t.readInt32(t.position())+t.position(),t)}bitWidth(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}isSigned(){const t=this.bb.__offset(this.bb_pos,6);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startInt(t){t.startObject(2)}static addBitWidth(t,n){t.addFieldInt32(0,n,0)}static addIsSigned(t,n){t.addFieldInt8(1,+n,0)}static endInt(t){return t.endObject()}static createInt(t,n,r){return _l.startInt(t),_l.addBitWidth(t,n),_l.addIsSigned(t,r),_l.endInt(t)}}class zp{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDictionaryEncoding(t,n){return(n||new zp).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDictionaryEncoding(t,n){return t.setPosition(t.position()+zr),(n||new zp).__init(t.readInt32(t.position())+t.position(),t)}id(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}indexType(t){const n=this.bb.__offset(this.bb_pos,6);return n?(t||new _l).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}isOrdered(){const t=this.bb.__offset(this.bb_pos,8);return t?!!this.bb.readInt8(this.bb_pos+t):!1}dictionaryKind(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readInt16(this.bb_pos+t):h$.DenseArray}static startDictionaryEncoding(t){t.startObject(4)}static addId(t,n){t.addFieldInt64(0,n,BigInt("0"))}static addIndexType(t,n){t.addFieldOffset(1,n,0)}static addIsOrdered(t,n){t.addFieldInt8(2,+n,0)}static addDictionaryKind(t,n){t.addFieldInt16(3,n,h$.DenseArray)}static endDictionaryEncoding(t){return t.endObject()}}class f1{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsBinary(t,n){return(n||new f1).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBinary(t,n){return t.setPosition(t.position()+zr),(n||new f1).__init(t.readInt32(t.position())+t.position(),t)}static startBinary(t){t.startObject(0)}static endBinary(t){return t.endObject()}static createBinary(t){return f1.startBinary(t),f1.endBinary(t)}}class d1{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsBool(t,n){return(n||new d1).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBool(t,n){return t.setPosition(t.position()+zr),(n||new d1).__init(t.readInt32(t.position())+t.position(),t)}static startBool(t){t.startObject(0)}static endBool(t){return t.endObject()}static createBool(t){return d1.startBool(t),d1.endBool(t)}}var p$;(function(e){e[e.DAY=0]="DAY",e[e.MILLISECOND=1]="MILLISECOND"})(p$||(p$={}));let ID=class sw{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDate(t,n){return(n||new sw).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDate(t,n){return t.setPosition(t.position()+zr),(n||new sw).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):p$.MILLISECOND}static startDate(t){t.startObject(1)}static addUnit(t,n){t.addFieldInt16(0,n,p$.MILLISECOND)}static endDate(t){return t.endObject()}static createDate(t,n){return sw.startDate(t),sw.addUnit(t,n),sw.endDate(t)}};class Su{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDecimal(t,n){return(n||new Su).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDecimal(t,n){return t.setPosition(t.position()+zr),(n||new Su).__init(t.readInt32(t.position())+t.position(),t)}precision(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}scale(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt32(this.bb_pos+t):0}bitWidth(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readInt32(this.bb_pos+t):128}static startDecimal(t){t.startObject(3)}static addPrecision(t,n){t.addFieldInt32(0,n,0)}static addScale(t,n){t.addFieldInt32(1,n,0)}static addBitWidth(t,n){t.addFieldInt32(2,n,128)}static endDecimal(t){return t.endObject()}static createDecimal(t,n,r,i){return Su.startDecimal(t),Su.addPrecision(t,n),Su.addScale(t,r),Su.addBitWidth(t,i),Su.endDecimal(t)}}var J0;(function(e){e[e.SECOND=0]="SECOND",e[e.MILLISECOND=1]="MILLISECOND",e[e.MICROSECOND=2]="MICROSECOND",e[e.NANOSECOND=3]="NANOSECOND"})(J0||(J0={}));class Wd{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDuration(t,n){return(n||new Wd).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDuration(t,n){return t.setPosition(t.position()+zr),(n||new Wd).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):J0.MILLISECOND}static startDuration(t){t.startObject(1)}static addUnit(t,n){t.addFieldInt16(0,n,J0.MILLISECOND)}static endDuration(t){return t.endObject()}static createDuration(t,n){return Wd.startDuration(t),Wd.addUnit(t,n),Wd.endDuration(t)}}class Gd{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFixedSizeBinary(t,n){return(n||new Gd).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFixedSizeBinary(t,n){return t.setPosition(t.position()+zr),(n||new Gd).__init(t.readInt32(t.position())+t.position(),t)}byteWidth(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}static startFixedSizeBinary(t){t.startObject(1)}static addByteWidth(t,n){t.addFieldInt32(0,n,0)}static endFixedSizeBinary(t){return t.endObject()}static createFixedSizeBinary(t,n){return Gd.startFixedSizeBinary(t),Gd.addByteWidth(t,n),Gd.endFixedSizeBinary(t)}}class Yd{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFixedSizeList(t,n){return(n||new Yd).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFixedSizeList(t,n){return t.setPosition(t.position()+zr),(n||new Yd).__init(t.readInt32(t.position())+t.position(),t)}listSize(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}static startFixedSizeList(t){t.startObject(1)}static addListSize(t,n){t.addFieldInt32(0,n,0)}static endFixedSizeList(t){return t.endObject()}static createFixedSizeList(t,n){return Yd.startFixedSizeList(t),Yd.addListSize(t,n),Yd.endFixedSizeList(t)}}var m$;(function(e){e[e.HALF=0]="HALF",e[e.SINGLE=1]="SINGLE",e[e.DOUBLE=2]="DOUBLE"})(m$||(m$={}));class Kd{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFloatingPoint(t,n){return(n||new Kd).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFloatingPoint(t,n){return t.setPosition(t.position()+zr),(n||new Kd).__init(t.readInt32(t.position())+t.position(),t)}precision(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):m$.HALF}static startFloatingPoint(t){t.startObject(1)}static addPrecision(t,n){t.addFieldInt16(0,n,m$.HALF)}static endFloatingPoint(t){return t.endObject()}static createFloatingPoint(t,n){return Kd.startFloatingPoint(t),Kd.addPrecision(t,n),Kd.endFloatingPoint(t)}}var g$;(function(e){e[e.YEAR_MONTH=0]="YEAR_MONTH",e[e.DAY_TIME=1]="DAY_TIME",e[e.MONTH_DAY_NANO=2]="MONTH_DAY_NANO"})(g$||(g$={}));class Xd{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsInterval(t,n){return(n||new Xd).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsInterval(t,n){return t.setPosition(t.position()+zr),(n||new Xd).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):g$.YEAR_MONTH}static startInterval(t){t.startObject(1)}static addUnit(t,n){t.addFieldInt16(0,n,g$.YEAR_MONTH)}static endInterval(t){return t.endObject()}static createInterval(t,n){return Xd.startInterval(t),Xd.addUnit(t,n),Xd.endInterval(t)}}class h1{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsList(t,n){return(n||new h1).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsList(t,n){return t.setPosition(t.position()+zr),(n||new h1).__init(t.readInt32(t.position())+t.position(),t)}static startList(t){t.startObject(0)}static endList(t){return t.endObject()}static createList(t){return h1.startList(t),h1.endList(t)}}let kD=class ow{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsMap(t,n){return(n||new ow).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsMap(t,n){return t.setPosition(t.position()+zr),(n||new ow).__init(t.readInt32(t.position())+t.position(),t)}keysSorted(){const t=this.bb.__offset(this.bb_pos,4);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startMap(t){t.startObject(1)}static addKeysSorted(t,n){t.addFieldInt8(0,+n,0)}static endMap(t){return t.endObject()}static createMap(t,n){return ow.startMap(t),ow.addKeysSorted(t,n),ow.endMap(t)}};class p1{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsNull(t,n){return(n||new p1).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsNull(t,n){return t.setPosition(t.position()+zr),(n||new p1).__init(t.readInt32(t.position())+t.position(),t)}static startNull(t){t.startObject(0)}static endNull(t){return t.endObject()}static createNull(t){return p1.startNull(t),p1.endNull(t)}}class m1{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsStruct_(t,n){return(n||new m1).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsStruct_(t,n){return t.setPosition(t.position()+zr),(n||new m1).__init(t.readInt32(t.position())+t.position(),t)}static startStruct_(t){t.startObject(0)}static endStruct_(t){return t.endObject()}static createStruct_(t){return m1.startStruct_(t),m1.endStruct_(t)}}let D2=class Nv{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsTime(t,n){return(n||new Nv).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsTime(t,n){return t.setPosition(t.position()+zr),(n||new Nv).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):J0.MILLISECOND}bitWidth(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt32(this.bb_pos+t):32}static startTime(t){t.startObject(2)}static addUnit(t,n){t.addFieldInt16(0,n,J0.MILLISECOND)}static addBitWidth(t,n){t.addFieldInt32(1,n,32)}static endTime(t){return t.endObject()}static createTime(t,n,r){return Nv.startTime(t),Nv.addUnit(t,n),Nv.addBitWidth(t,r),Nv.endTime(t)}},O2=class Pv{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsTimestamp(t,n){return(n||new Pv).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsTimestamp(t,n){return t.setPosition(t.position()+zr),(n||new Pv).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):J0.SECOND}timezone(t){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.__string(this.bb_pos+n,t):null}static startTimestamp(t){t.startObject(2)}static addUnit(t,n){t.addFieldInt16(0,n,J0.SECOND)}static addTimezone(t,n){t.addFieldOffset(1,n,0)}static endTimestamp(t){return t.endObject()}static createTimestamp(t,n,r){return Pv.startTimestamp(t),Pv.addUnit(t,n),Pv.addTimezone(t,r),Pv.endTimestamp(t)}};var y$;(function(e){e[e.Sparse=0]="Sparse",e[e.Dense=1]="Dense"})(y$||(y$={}));let Dv=class Ov{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsUnion(t,n){return(n||new Ov).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsUnion(t,n){return t.setPosition(t.position()+zr),(n||new Ov).__init(t.readInt32(t.position())+t.position(),t)}mode(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):y$.Sparse}typeIds(t){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.readInt32(this.bb.__vector(this.bb_pos+n)+t*4):0}typeIdsLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}typeIdsArray(){const t=this.bb.__offset(this.bb_pos,6);return t?new Int32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}static startUnion(t){t.startObject(2)}static addMode(t,n){t.addFieldInt16(0,n,y$.Sparse)}static addTypeIds(t,n){t.addFieldOffset(1,n,0)}static createTypeIdsVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addInt32(n[r]);return t.endVector()}static startTypeIdsVector(t,n){t.startVector(4,n,4)}static endUnion(t){return t.endObject()}static createUnion(t,n,r){return Ov.startUnion(t),Ov.addMode(t,n),Ov.addTypeIds(t,r),Ov.endUnion(t)}};class g1{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsUtf8(t,n){return(n||new g1).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsUtf8(t,n){return t.setPosition(t.position()+zr),(n||new g1).__init(t.readInt32(t.position())+t.position(),t)}static startUtf8(t){t.startObject(0)}static endUtf8(t){return t.endObject()}static createUtf8(t){return g1.startUtf8(t),g1.endUtf8(t)}}var bi;(function(e){e[e.NONE=0]="NONE",e[e.Null=1]="Null",e[e.Int=2]="Int",e[e.FloatingPoint=3]="FloatingPoint",e[e.Binary=4]="Binary",e[e.Utf8=5]="Utf8",e[e.Bool=6]="Bool",e[e.Decimal=7]="Decimal",e[e.Date=8]="Date",e[e.Time=9]="Time",e[e.Timestamp=10]="Timestamp",e[e.Interval=11]="Interval",e[e.List=12]="List",e[e.Struct_=13]="Struct_",e[e.Union=14]="Union",e[e.FixedSizeBinary=15]="FixedSizeBinary",e[e.FixedSizeList=16]="FixedSizeList",e[e.Map=17]="Map",e[e.Duration=18]="Duration",e[e.LargeBinary=19]="LargeBinary",e[e.LargeUtf8=20]="LargeUtf8",e[e.LargeList=21]="LargeList",e[e.RunEndEncoded=22]="RunEndEncoded"})(bi||(bi={}));let cc=class RD{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsField(t,n){return(n||new RD).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsField(t,n){return t.setPosition(t.position()+zr),(n||new RD).__init(t.readInt32(t.position())+t.position(),t)}name(t){const n=this.bb.__offset(this.bb_pos,4);return n?this.bb.__string(this.bb_pos+n,t):null}nullable(){const t=this.bb.__offset(this.bb_pos,6);return t?!!this.bb.readInt8(this.bb_pos+t):!1}typeType(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readUint8(this.bb_pos+t):bi.NONE}type(t){const n=this.bb.__offset(this.bb_pos,10);return n?this.bb.__union(t,this.bb_pos+n):null}dictionary(t){const n=this.bb.__offset(this.bb_pos,12);return n?(t||new zp).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}children(t,n){const r=this.bb.__offset(this.bb_pos,14);return r?(n||new RD).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}childrenLength(){const t=this.bb.__offset(this.bb_pos,14);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,16);return r?(n||new Rs).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,16);return t?this.bb.__vector_len(this.bb_pos+t):0}static startField(t){t.startObject(7)}static addName(t,n){t.addFieldOffset(0,n,0)}static addNullable(t,n){t.addFieldInt8(1,+n,0)}static addTypeType(t,n){t.addFieldInt8(2,n,bi.NONE)}static addType(t,n){t.addFieldOffset(3,n,0)}static addDictionary(t,n){t.addFieldOffset(4,n,0)}static addChildren(t,n){t.addFieldOffset(5,n,0)}static createChildrenVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startChildrenVector(t,n){t.startVector(4,n,4)}static addCustomMetadata(t,n){t.addFieldOffset(6,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static endField(t){return t.endObject()}},Od=class Ap{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsSchema(t,n){return(n||new Ap).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsSchema(t,n){return t.setPosition(t.position()+zr),(n||new Ap).__init(t.readInt32(t.position())+t.position(),t)}endianness(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):ax.Little}fields(t,n){const r=this.bb.__offset(this.bb_pos,6);return r?(n||new cc).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}fieldsLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,8);return r?(n||new Rs).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}features(t){const n=this.bb.__offset(this.bb_pos,10);return n?this.bb.readInt64(this.bb.__vector(this.bb_pos+n)+t*8):BigInt(0)}featuresLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}static startSchema(t){t.startObject(4)}static addEndianness(t,n){t.addFieldInt16(0,n,ax.Little)}static addFields(t,n){t.addFieldOffset(1,n,0)}static createFieldsVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startFieldsVector(t,n){t.startVector(4,n,4)}static addCustomMetadata(t,n){t.addFieldOffset(2,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static addFeatures(t,n){t.addFieldOffset(3,n,0)}static createFeaturesVector(t,n){t.startVector(8,n.length,8);for(let r=n.length-1;r>=0;r--)t.addInt64(n[r]);return t.endVector()}static startFeaturesVector(t,n){t.startVector(8,n,8)}static endSchema(t){return t.endObject()}static finishSchemaBuffer(t,n){t.finish(n)}static finishSizePrefixedSchemaBuffer(t,n){t.finish(n,void 0,!0)}static createSchema(t,n,r,i,s){return Ap.startSchema(t),Ap.addEndianness(t,n),Ap.addFields(t,r),Ap.addCustomMetadata(t,i),Ap.addFeatures(t,s),Ap.endSchema(t)}};class ml{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFooter(t,n){return(n||new ml).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFooter(t,n){return t.setPosition(t.position()+zr),(n||new ml).__init(t.readInt32(t.position())+t.position(),t)}version(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):ox.V1}schema(t){const n=this.bb.__offset(this.bb_pos,6);return n?(t||new Od).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}dictionaries(t,n){const r=this.bb.__offset(this.bb_pos,8);return r?(n||new Nz).__init(this.bb.__vector(this.bb_pos+r)+t*24,this.bb):null}dictionariesLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}recordBatches(t,n){const r=this.bb.__offset(this.bb_pos,10);return r?(n||new Nz).__init(this.bb.__vector(this.bb_pos+r)+t*24,this.bb):null}recordBatchesLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,12);return r?(n||new Rs).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}static startFooter(t){t.startObject(5)}static addVersion(t,n){t.addFieldInt16(0,n,ox.V1)}static addSchema(t,n){t.addFieldOffset(1,n,0)}static addDictionaries(t,n){t.addFieldOffset(2,n,0)}static startDictionariesVector(t,n){t.startVector(24,n,8)}static addRecordBatches(t,n){t.addFieldOffset(3,n,0)}static startRecordBatchesVector(t,n){t.startVector(24,n,8)}static addCustomMetadata(t,n){t.addFieldOffset(4,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static endFooter(t){return t.endObject()}static finishFooterBuffer(t,n){t.finish(n)}static finishSizePrefixedFooterBuffer(t,n){t.finish(n,void 0,!0)}}class Tr{constructor(t=[],n,r,i=Va.V5){this.fields=t||[],this.metadata=n||new Map,r||(r=Oz(t)),this.dictionaries=r,this.metadataVersion=i}get[Symbol.toStringTag](){return"Schema"}get names(){return this.fields.map(t=>t.name)}toString(){return`Schema<{ ${this.fields.map((t,n)=>`${n}: ${t}`).join(", ")} }>`}select(t){const n=new Set(t),r=this.fields.filter(i=>n.has(i.name));return new Tr(r,this.metadata)}selectAt(t){const n=t.map(r=>this.fields[r]).filter(Boolean);return new Tr(n,this.metadata)}assign(...t){const n=t[0]instanceof Tr?t[0]:Array.isArray(t[0])?new Tr(t[0]):new Tr(t),r=[...this.fields],i=nP(nP(new Map,this.metadata),n.metadata),s=n.fields.filter(a=>{const u=r.findIndex(l=>l.name===a.name);return~u?(r[u]=a.clone({metadata:nP(nP(new Map,r[u].metadata),a.metadata)}))&&!1:!0}),o=Oz(s,new Map);return new Tr([...r,...s],i,new Map([...this.dictionaries,...o]))}}Tr.prototype.fields=null;Tr.prototype.metadata=null;Tr.prototype.dictionaries=null;let Fr=class Dz{static new(...t){let[n,r,i,s]=t;return t[0]&&typeof t[0]=="object"&&({name:n}=t[0],r===void 0&&(r=t[0].type),i===void 0&&(i=t[0].nullable),s===void 0&&(s=t[0].metadata)),new Dz(`${n}`,r,i,s)}constructor(t,n,r=!1,i){this.name=t,this.type=n,this.nullable=r,this.metadata=i||new Map}get typeId(){return this.type.typeId}get[Symbol.toStringTag](){return"Field"}toString(){return`${this.name}: ${this.type}`}clone(...t){let[n,r,i,s]=t;return!t[0]||typeof t[0]!="object"?[n=this.name,r=this.type,i=this.nullable,s=this.metadata]=t:{name:n=this.name,type:r=this.type,nullable:i=this.nullable,metadata:s=this.metadata}=t[0],Dz.new(n,r,i,s)}};Fr.prototype.type=null;Fr.prototype.name=null;Fr.prototype.nullable=null;Fr.prototype.metadata=null;function nP(e,t){return new Map([...e||new Map,...t||new Map])}function Oz(e,t=new Map){for(let n=-1,r=e.length;++n<r;){const s=e[n].type;if(Sn.isDictionary(s)){if(!t.has(s.id))t.set(s.id,s.dictionary);else if(t.get(s.id)!==s.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}s.children&&s.children.length>0&&Oz(s.children,t)}return t}var R1t=LAe,N1t=d$;class $z{static decode(t){t=new N1t(Pr(t));const n=ml.getRootAsFooter(t),r=Tr.decode(n.schema(),new Map,n.version());return new P1t(r,n)}static encode(t){const n=new R1t,r=Tr.encode(n,t.schema);ml.startRecordBatchesVector(n,t.numRecordBatches);for(const o of[...t.recordBatches()].slice().reverse())Z0.encode(n,o);const i=n.endVector();ml.startDictionariesVector(n,t.numDictionaries);for(const o of[...t.dictionaryBatches()].slice().reverse())Z0.encode(n,o);const s=n.endVector();return ml.startFooter(n),ml.addSchema(n,r),ml.addVersion(n,Va.V5),ml.addRecordBatches(n,i),ml.addDictionaries(n,s),ml.finishFooterBuffer(n,ml.endFooter(n)),n.asUint8Array()}get numRecordBatches(){return this._recordBatches.length}get numDictionaries(){return this._dictionaryBatches.length}constructor(t,n=Va.V5,r,i){this.schema=t,this.version=n,r&&(this._recordBatches=r),i&&(this._dictionaryBatches=i)}*recordBatches(){for(let t,n=-1,r=this.numRecordBatches;++n<r;)(t=this.getRecordBatch(n))&&(yield t)}*dictionaryBatches(){for(let t,n=-1,r=this.numDictionaries;++n<r;)(t=this.getDictionaryBatch(n))&&(yield t)}getRecordBatch(t){return t>=0&&t<this.numRecordBatches&&this._recordBatches[t]||null}getDictionaryBatch(t){return t>=0&&t<this.numDictionaries&&this._dictionaryBatches[t]||null}}class P1t extends $z{get numRecordBatches(){return this._footer.recordBatchesLength()}get numDictionaries(){return this._footer.dictionariesLength()}constructor(t,n){super(t,n.version()),this._footer=n}getRecordBatch(t){if(t>=0&&t<this.numRecordBatches){const n=this._footer.recordBatches(t);if(n)return Z0.decode(n)}return null}getDictionaryBatch(t){if(t>=0&&t<this.numDictionaries){const n=this._footer.dictionaries(t);if(n)return Z0.decode(n)}return null}}class Z0{static decode(t){return new Z0(t.metaDataLength(),t.bodyLength(),t.offset())}static encode(t,n){const{metaDataLength:r}=n,i=BigInt(n.offset),s=BigInt(n.bodyLength);return Nz.createBlock(t,i,r,s)}constructor(t,n,r){this.metaDataLength=t,this.offset=Qf(r),this.bodyLength=Qf(n)}}const rP=Object.freeze({done:!0,value:void 0});class jAe{tee(){return this._getDOMStream().tee()}pipe(t,n){return this._getNodeStream().pipe(t,n)}pipeTo(t,n){return this._getDOMStream().pipeTo(t,n)}pipeThrough(t,n){return this._getDOMStream().pipeThrough(t,n)}_getDOMStream(){return this._DOMStream||(this._DOMStream=this.toDOMStream())}_getNodeStream(){return this._nodeStream||(this._nodeStream=this.toNodeStream())}}class D1t extends jAe{constructor(){super(),this._values=[],this.resolvers=[],this._closedPromise=new Promise(t=>this._closedPromiseResolve=t)}get closed(){return this._closedPromise}cancel(t){return Fp(this,void 0,void 0,function*(){yield this.return(t)})}write(t){this._ensureOpen()&&(this.resolvers.length<=0?this._values.push(t):this.resolvers.shift().resolve({done:!1,value:t}))}abort(t){this._closedPromiseResolve&&(this.resolvers.length<=0?this._error={error:t}:this.resolvers.shift().reject({done:!0,value:t}))}close(){if(this._closedPromiseResolve){const{resolvers:t}=this;for(;t.length>0;)t.shift().resolve(rP);this._closedPromiseResolve(),this._closedPromiseResolve=void 0}}[Symbol.asyncIterator](){return this}toDOMStream(t){return Wce.toDOMStream(this._closedPromiseResolve||this._error?this:this._values,t)}toNodeStream(t){return Wce.toNodeStream(this._closedPromiseResolve||this._error?this:this._values,t)}throw(t){return Fp(this,void 0,void 0,function*(){return yield this.abort(t),rP})}return(t){return Fp(this,void 0,void 0,function*(){return yield this.close(),rP})}read(t){return Fp(this,void 0,void 0,function*(){return(yield this.next(t,"read")).value})}peek(t){return Fp(this,void 0,void 0,function*(){return(yield this.next(t,"peek")).value})}next(...t){return this._values.length>0?Promise.resolve({done:!1,value:this._values.shift()}):this._error?Promise.reject({done:!0,value:this._error.error}):this._closedPromiseResolve?new Promise((n,r)=>{this.resolvers.push({resolve:n,reject:r})}):Promise.resolve(rP)}_ensureOpen(){if(this._closedPromiseResolve)return!0;throw new Error("AsyncQueue is closed")}}class Z8 extends D1t{write(t){if((t=Pr(t)).byteLength>0)return super.write(t)}toString(t=!1){return t?Az(this.toUint8Array(!0)):this.toUint8Array(!1).then(Az)}toUint8Array(t=!1){return t?Rh(this._values)[0]:Fp(this,void 0,void 0,function*(){var n,r,i,s;const o=[];let a=0;try{for(var u=!0,l=gC(this),c;c=yield l.next(),n=c.done,!n;u=!0){s=c.value,u=!1;const f=s;o.push(f),a+=f.byteLength}}catch(f){r={error:f}}finally{try{!u&&!n&&(i=l.return)&&(yield i.call(l))}finally{if(r)throw r.error}}return Rh(o,a)[0]})}}class BAe extends e4{constructor(t){super(t),this._values=new Z6(new Uint8Array(0))}get byteLength(){let t=this._pendingLength+this.length*4;return this._offsets&&(t+=this._offsets.byteLength),this._values&&(t+=this._values.byteLength),this._nulls&&(t+=this._nulls.byteLength),t}setValue(t,n){return super.setValue(t,Pr(n))}_flushPending(t,n){const r=this._offsets,i=this._values.reserve(n).buffer;let s=0;for(const[o,a]of t)if(a===void 0)r.set(o,0);else{const u=a.length;i.set(a,s),r.set(o,u),s+=u}}}class O1t extends ul{constructor(t){super(t),this._values=new OAe}setValue(t,n){this._values.set(t,+n)}}class t4 extends ng{}t4.prototype._setValue=qCe;class UAe extends t4{}UAe.prototype._setValue=SX;class zAe extends t4{}zAe.prototype._setValue=TX;class VAe extends ng{}VAe.prototype._setValue=YCe;class $1t extends ul{constructor({type:t,nullValues:n,dictionaryHashFunction:r}){super({type:new Q0(t.dictionary,t.indices,t.id,t.isOrdered)}),this._nulls=null,this._dictionaryOffset=0,this._keysToIndices=Object.create(null),this.indices=v$({type:this.type.indices,nullValues:n}),this.dictionary=v$({type:this.type.dictionary,nullValues:null}),typeof r=="function"&&(this.valueToKey=r)}get values(){return this.indices.values}get nullCount(){return this.indices.nullCount}get nullBitmap(){return this.indices.nullBitmap}get byteLength(){return this.indices.byteLength+this.dictionary.byteLength}get reservedLength(){return this.indices.reservedLength+this.dictionary.reservedLength}get reservedByteLength(){return this.indices.reservedByteLength+this.dictionary.reservedByteLength}isValid(t){return this.indices.isValid(t)}setValid(t,n){const r=this.indices;return n=r.setValid(t,n),this.length=r.length,n}setValue(t,n){const r=this._keysToIndices,i=this.valueToKey(n);let s=r[i];return s===void 0&&(r[i]=s=this._dictionaryOffset+this.dictionary.append(n).length-1),this.indices.setValue(t,s)}flush(){const t=this.type,n=this._dictionary,r=this.dictionary.toVector(),i=this.indices.flush().clone(t);return i.dictionary=n?n.concat(r):r,this.finished||(this._dictionaryOffset+=r.length),this._dictionary=i.dictionary,this.clear(),i}finish(){return this.indices.finish(),this.dictionary.finish(),this._dictionaryOffset=0,this._keysToIndices=Object.create(null),super.finish()}clear(){return this.indices.clear(),this.dictionary.clear(),super.clear()}valueToKey(t){return typeof t=="string"?t:`${t}`}}class HAe extends ng{}HAe.prototype._setValue=HCe;class M1t extends ul{setValue(t,n){const[r]=this.children,i=t*this.stride;for(let s=-1,o=n.length;++s<o;)r.set(i+s,n[s])}addChild(t,n="0"){if(this.numChildren>0)throw new Error("FixedSizeListBuilder can only have one child.");const r=this.children.push(t);return this.type=new sx(this.type.listSize,new Fr(n,t.type,!0)),r}}class n4 extends ng{setValue(t,n){this._values.set(t,n)}}class L1t extends n4{setValue(t,n){super.setValue(t,UCe(n))}}class F1t extends n4{}class j1t extends n4{}class r4 extends ng{}r4.prototype._setValue=QCe;class qAe extends r4{}qAe.prototype._setValue=OX;class WAe extends r4{}WAe.prototype._setValue=$X;class xS extends ng{}xS.prototype._setValue=JCe;class GAe extends xS{}GAe.prototype._setValue=MX;class YAe extends xS{}YAe.prototype._setValue=LX;class KAe extends xS{}KAe.prototype._setValue=FX;class XAe extends xS{}XAe.prototype._setValue=jX;class rg extends ng{setValue(t,n){this._values.set(t,n)}}class B1t extends rg{}class U1t extends rg{}class z1t extends rg{}class V1t extends rg{}class H1t extends rg{}class q1t extends rg{}class W1t extends rg{}class G1t extends rg{}class Y1t extends e4{constructor(t){super(t),this._offsets=new $Ae}addChild(t,n="0"){if(this.numChildren>0)throw new Error("ListBuilder can only have one child.");return this.children[this.numChildren]=t,this.type=new ix(new Fr(n,t.type,!0)),this.numChildren-1}_flushPending(t){const n=this._offsets,[r]=this.children;for(const[i,s]of t)if(typeof s>"u")n.set(i,0);else{const o=s,a=o.length,u=n.set(i,a).buffer[i];for(let l=-1;++l<a;)r.set(u+l,o[l])}}}class K1t extends e4{set(t,n){return super.set(t,n)}setValue(t,n){const r=n instanceof Map?n:new Map(Object.entries(n)),i=this._pending||(this._pending=new Map),s=i.get(t);s&&(this._pendingLength-=s.size),this._pendingLength+=r.size,i.set(t,r)}addChild(t,n=`${this.numChildren}`){if(this.numChildren>0)throw new Error("ListBuilder can only have one child.");return this.children[this.numChildren]=t,this.type=new sI(new Fr(n,t.type,!0),this.type.keysSorted),this.numChildren-1}_flushPending(t){const n=this._offsets,[r]=this.children;for(const[i,s]of t)if(s===void 0)n.set(i,0);else{let{[i]:o,[i+1]:a}=n.set(i,s.size).buffer;for(const u of s.entries())if(r.set(o,u),++o>=a)break}}}class X1t extends ul{setValue(t,n){}setValid(t,n){return this.length=Math.max(t+1,this.length),n}}class Q1t extends ul{setValue(t,n){const{children:r,type:i}=this;switch(Array.isArray(n)||n.constructor){case!0:return i.children.forEach((s,o)=>r[o].set(t,n[o]));case Map:return i.children.forEach((s,o)=>r[o].set(t,n.get(s.name)));default:return i.children.forEach((s,o)=>r[o].set(t,n[s.name]))}}setValid(t,n){return super.setValid(t,n)||this.children.forEach(r=>r.setValid(t,n)),n}addChild(t,n=`${this.numChildren}`){const r=this.children.push(t);return this.type=new fa([...this.type.children,new Fr(n,t.type,!0)]),r}}class SS extends ng{}SS.prototype._setValue=WCe;class QAe extends SS{}QAe.prototype._setValue=CX;class JAe extends SS{}JAe.prototype._setValue=AX;class ZAe extends SS{}ZAe.prototype._setValue=IX;class eIe extends SS{}eIe.prototype._setValue=kX;class TS extends ng{}TS.prototype._setValue=GCe;class tIe extends TS{}tIe.prototype._setValue=RX;class nIe extends TS{}nIe.prototype._setValue=NX;class rIe extends TS{}rIe.prototype._setValue=PX;class iIe extends TS{}iIe.prototype._setValue=DX;class WX extends ul{constructor(t){super(t),this._typeIds=new Ok(new Int8Array(0),1),typeof t.valueToChildTypeId=="function"&&(this._valueToChildTypeId=t.valueToChildTypeId)}get typeIdToChildIndex(){return this.type.typeIdToChildIndex}append(t,n){return this.set(this.length,t,n)}set(t,n,r){return r===void 0&&(r=this._valueToChildTypeId(this,n,t)),this.setValue(t,n,r),this}setValue(t,n,r){this._typeIds.set(t,r);const i=this.type.typeIdToChildIndex[r],s=this.children[i];s==null||s.set(t,n)}addChild(t,n=`${this.children.length}`){const r=this.children.push(t),{type:{children:i,mode:s,typeIds:o}}=this,a=[...i,new Fr(n,t.type)];return this.type=new iI(s,[...o,r],a),r}_valueToChildTypeId(t,n,r){throw new Error("Cannot map UnionBuilder value to child typeId. Pass the `childTypeId` as the second argument to unionBuilder.append(), or supply a `valueToChildTypeId` function as part of the UnionBuilder constructor options.")}}class J1t extends WX{}class Z1t extends WX{constructor(t){super(t),this._offsets=new Ok(new Int32Array(0))}setValue(t,n,r){const i=this._typeIds.set(t,r).buffer[t],s=this.getChildAt(this.type.typeIdToChildIndex[i]),o=this._offsets.set(t,s.length).buffer[t];s==null||s.set(o,n)}}class sIe extends e4{constructor(t){super(t),this._values=new Z6(new Uint8Array(0))}get byteLength(){let t=this._pendingLength+this.length*4;return this._offsets&&(t+=this._offsets.byteLength),this._values&&(t+=this._values.byteLength),this._nulls&&(t+=this._nulls.byteLength),t}setValue(t,n){return super.setValue(t,lX(n))}_flushPending(t,n){}}sIe.prototype._flushPending=BAe.prototype._flushPending;class ebt extends Cn{visitNull(){return X1t}visitBool(){return O1t}visitInt(){return rg}visitInt8(){return B1t}visitInt16(){return U1t}visitInt32(){return z1t}visitInt64(){return V1t}visitUint8(){return H1t}visitUint16(){return q1t}visitUint32(){return W1t}visitUint64(){return G1t}visitFloat(){return n4}visitFloat16(){return L1t}visitFloat32(){return F1t}visitFloat64(){return j1t}visitUtf8(){return sIe}visitBinary(){return BAe}visitFixedSizeBinary(){return HAe}visitDate(){return t4}visitDateDay(){return UAe}visitDateMillisecond(){return zAe}visitTimestamp(){return SS}visitTimestampSecond(){return QAe}visitTimestampMillisecond(){return JAe}visitTimestampMicrosecond(){return ZAe}visitTimestampNanosecond(){return eIe}visitTime(){return TS}visitTimeSecond(){return tIe}visitTimeMillisecond(){return nIe}visitTimeMicrosecond(){return rIe}visitTimeNanosecond(){return iIe}visitDecimal(){return VAe}visitList(){return Y1t}visitStruct(){return Q1t}visitUnion(){return WX}visitDenseUnion(){return Z1t}visitSparseUnion(){return J1t}visitDictionary(){return $1t}visitInterval(){return r4}visitIntervalDayTime(){return qAe}visitIntervalYearMonth(){return WAe}visitDuration(){return xS}visitDurationSecond(){return GAe}visitDurationMillisecond(){return YAe}visitDurationMicrosecond(){return KAe}visistDurationNanosecond(){return XAe}visitFixedSizeList(){return M1t}visitMap(){return K1t}}const tbt=new ebt;class Xt extends Cn{compareSchemas(t,n){return t===n||n instanceof t.constructor&&this.compareManyFields(t.fields,n.fields)}compareManyFields(t,n){return t===n||Array.isArray(t)&&Array.isArray(n)&&t.length===n.length&&t.every((r,i)=>this.compareFields(r,n[i]))}compareFields(t,n){return t===n||n instanceof t.constructor&&t.name===n.name&&t.nullable===n.nullable&&this.visit(t.type,n.type)}}function uu(e,t){return t instanceof e.constructor}function $k(e,t){return e===t||uu(e,t)}function ig(e,t){return e===t||uu(e,t)&&e.bitWidth===t.bitWidth&&e.isSigned===t.isSigned}function i4(e,t){return e===t||uu(e,t)&&e.precision===t.precision}function nbt(e,t){return e===t||uu(e,t)&&e.byteWidth===t.byteWidth}function GX(e,t){return e===t||uu(e,t)&&e.unit===t.unit}function Mk(e,t){return e===t||uu(e,t)&&e.unit===t.unit&&e.timezone===t.timezone}function Lk(e,t){return e===t||uu(e,t)&&e.unit===t.unit&&e.bitWidth===t.bitWidth}function rbt(e,t){return e===t||uu(e,t)&&e.children.length===t.children.length&&ey.compareManyFields(e.children,t.children)}function ibt(e,t){return e===t||uu(e,t)&&e.children.length===t.children.length&&ey.compareManyFields(e.children,t.children)}function YX(e,t){return e===t||uu(e,t)&&e.mode===t.mode&&e.typeIds.every((n,r)=>n===t.typeIds[r])&&ey.compareManyFields(e.children,t.children)}function sbt(e,t){return e===t||uu(e,t)&&e.id===t.id&&e.isOrdered===t.isOrdered&&ey.visit(e.indices,t.indices)&&ey.visit(e.dictionary,t.dictionary)}function KX(e,t){return e===t||uu(e,t)&&e.unit===t.unit}function Fk(e,t){return e===t||uu(e,t)&&e.unit===t.unit}function obt(e,t){return e===t||uu(e,t)&&e.listSize===t.listSize&&e.children.length===t.children.length&&ey.compareManyFields(e.children,t.children)}function abt(e,t){return e===t||uu(e,t)&&e.keysSorted===t.keysSorted&&e.children.length===t.children.length&&ey.compareManyFields(e.children,t.children)}Xt.prototype.visitNull=$k;Xt.prototype.visitBool=$k;Xt.prototype.visitInt=ig;Xt.prototype.visitInt8=ig;Xt.prototype.visitInt16=ig;Xt.prototype.visitInt32=ig;Xt.prototype.visitInt64=ig;Xt.prototype.visitUint8=ig;Xt.prototype.visitUint16=ig;Xt.prototype.visitUint32=ig;Xt.prototype.visitUint64=ig;Xt.prototype.visitFloat=i4;Xt.prototype.visitFloat16=i4;Xt.prototype.visitFloat32=i4;Xt.prototype.visitFloat64=i4;Xt.prototype.visitUtf8=$k;Xt.prototype.visitBinary=$k;Xt.prototype.visitFixedSizeBinary=nbt;Xt.prototype.visitDate=GX;Xt.prototype.visitDateDay=GX;Xt.prototype.visitDateMillisecond=GX;Xt.prototype.visitTimestamp=Mk;Xt.prototype.visitTimestampSecond=Mk;Xt.prototype.visitTimestampMillisecond=Mk;Xt.prototype.visitTimestampMicrosecond=Mk;Xt.prototype.visitTimestampNanosecond=Mk;Xt.prototype.visitTime=Lk;Xt.prototype.visitTimeSecond=Lk;Xt.prototype.visitTimeMillisecond=Lk;Xt.prototype.visitTimeMicrosecond=Lk;Xt.prototype.visitTimeNanosecond=Lk;Xt.prototype.visitDecimal=$k;Xt.prototype.visitList=rbt;Xt.prototype.visitStruct=ibt;Xt.prototype.visitUnion=YX;Xt.prototype.visitDenseUnion=YX;Xt.prototype.visitSparseUnion=YX;Xt.prototype.visitDictionary=sbt;Xt.prototype.visitInterval=KX;Xt.prototype.visitIntervalDayTime=KX;Xt.prototype.visitIntervalYearMonth=KX;Xt.prototype.visitDuration=Fk;Xt.prototype.visitDurationSecond=Fk;Xt.prototype.visitDurationMillisecond=Fk;Xt.prototype.visitDurationMicrosecond=Fk;Xt.prototype.visitDurationNanosecond=Fk;Xt.prototype.visitFixedSizeList=obt;Xt.prototype.visitMap=abt;const ey=new Xt;function Mz(e,t){return ey.compareSchemas(e,t)}function v$(e){const t=e.type,n=new(tbt.getVisitFn(t)())(e);if(t.children&&t.children.length>0){const r=e.children||[],i={nullValues:e.nullValues},s=Array.isArray(r)?(o,a)=>r[a]||i:({name:o})=>r[o]||i;for(const[o,a]of t.children.entries()){const{type:u}=a,l=s(a,o);n.children.push(v$(Object.assign(Object.assign({},l),{type:u})))}}return n}function e9(e,t){return ubt(e,t.map(n=>n.data.concat()))}function ubt(e,t){const n=[...e.fields],r=[],i={numBatches:t.reduce((f,d)=>Math.max(f,d.length),0)};let s=0,o=0,a=-1;const u=t.length;let l,c=[];for(;i.numBatches-- >0;){for(o=Number.POSITIVE_INFINITY,a=-1;++a<u;)c[a]=l=t[a].shift(),o=Math.min(o,l?l.length:o);Number.isFinite(o)&&(c=lbt(n,o,c,t,i),o>0&&(r[s++]=aa({type:new fa(n),length:o,nullCount:0,children:c.slice()})))}return[e=e.assign(n),r.map(f=>new wl(e,f))]}function lbt(e,t,n,r,i){var s;const o=(t+63&-64)>>3;for(let a=-1,u=r.length;++a<u;){const l=n[a],c=l==null?void 0:l.length;if(c>=t)c===t?n[a]=l:(n[a]=l.slice(0,t),i.numBatches=Math.max(i.numBatches,r[a].unshift(l.slice(t,c-t))));else{const f=e[a];e[a]=f.clone({nullable:!0}),n[a]=(s=l==null?void 0:l._changeLengthAndBackfillNullBitmap(t))!==null&&s!==void 0?s:aa({type:f.type,length:t,nullCount:t,nullBitmap:new Uint8Array(o)})}}return n}var oIe;class ku{constructor(...t){var n,r;if(t.length===0)return this.batches=[],this.schema=new Tr([]),this._offsets=[0],this;let i,s;t[0]instanceof Tr&&(i=t.shift()),t.at(-1)instanceof Uint32Array&&(s=t.pop());const o=u=>{if(u){if(u instanceof wl)return[u];if(u instanceof ku)return u.batches;if(u instanceof Nr){if(u.type instanceof fa)return[new wl(new Tr(u.type.children),u)]}else{if(Array.isArray(u))return u.flatMap(l=>o(l));if(typeof u[Symbol.iterator]=="function")return[...u].flatMap(l=>o(l));if(typeof u=="object"){const l=Object.keys(u),c=l.map(h=>new hr([u[h]])),f=new Tr(l.map((h,p)=>new Fr(String(h),c[p].type))),[,d]=e9(f,c);return d.length===0?[new wl(u)]:d}}}return[]},a=t.flatMap(u=>o(u));if(i=(r=i??((n=a[0])===null||n===void 0?void 0:n.schema))!==null&&r!==void 0?r:new Tr([]),!(i instanceof Tr))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");for(const u of a){if(!(u instanceof wl))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");if(!Mz(i,u.schema))throw new TypeError("Table and inner RecordBatch schemas must be equivalent.")}this.schema=i,this.batches=a,this._offsets=s??SAe(this.data)}get data(){return this.batches.map(({data:t})=>t)}get numCols(){return this.schema.fields.length}get numRows(){return this.data.reduce((t,n)=>t+n.length,0)}get nullCount(){return this._nullCount===-1&&(this._nullCount=xAe(this.data)),this._nullCount}isValid(t){return!1}get(t){return null}set(t,n){}indexOf(t,n){return-1}getByteLength(t){return 0}[Symbol.iterator](){return this.batches.length>0?qX.visit(new hr(this.data)):new Array(0)[Symbol.iterator]()}toArray(){return[...this]}toString(){return`[
  ${this.toArray().join(`,
  `)}
]`}concat(...t){const n=this.schema,r=this.data.concat(t.flatMap(({data:i})=>i));return new ku(n,r.map(i=>new wl(n,i)))}slice(t,n){const r=this.schema;[t,n]=_Ae({length:this.numRows},t,n);const i=TAe(this.data,this._offsets,t,n);return new ku(r,i.map(s=>new wl(r,s)))}getChild(t){return this.getChildAt(this.schema.fields.findIndex(n=>n.name===t))}getChildAt(t){if(t>-1&&t<this.schema.fields.length){const n=this.data.map(r=>r.children[t]);if(n.length===0){const{type:r}=this.schema.fields[t],i=aa({type:r,length:0,nullCount:0});n.push(i._changeLengthAndBackfillNullBitmap(this.numRows))}return new hr(n)}return null}setChild(t,n){var r;return this.setChildAt((r=this.schema.fields)===null||r===void 0?void 0:r.findIndex(i=>i.name===t),n)}setChildAt(t,n){let r=this.schema,i=[...this.batches];if(t>-1&&t<this.numCols){n||(n=new hr([aa({type:new Rm,length:this.numRows})]));const s=r.fields.slice(),o=s[t].clone({type:n.type}),a=this.schema.fields.map((u,l)=>this.getChildAt(l));[s[t],a[t]]=[o,n],[r,i]=e9(r,a)}return new ku(r,i)}select(t){const n=this.schema.fields.reduce((r,i,s)=>r.set(i.name,s),new Map);return this.selectAt(t.map(r=>n.get(r)).filter(r=>r>-1))}selectAt(t){const n=this.schema.selectAt(t),r=this.batches.map(i=>i.selectAt(t));return new ku(n,r)}assign(t){const n=this.schema.fields,[r,i]=t.schema.fields.reduce((a,u,l)=>{const[c,f]=a,d=n.findIndex(h=>h.name===u.name);return~d?f[d]=l:c.push(l),a},[[],[]]),s=this.schema.assign(t.schema),o=[...n.map((a,u)=>[u,i[u]]).map(([a,u])=>u===void 0?this.getChildAt(a):t.getChildAt(u)),...r.map(a=>t.getChildAt(a))].filter(Boolean);return new ku(...e9(s,o))}}oIe=Symbol.toStringTag;ku[oIe]=(e=>(e.schema=null,e.batches=[],e._offsets=new Uint32Array([0]),e._nullCount=-1,e[Symbol.isConcatSpreadable]=!0,e.isValid=oE(HX),e.get=oE(tl.getVisitFn(re.Struct)),e.set=CAe(Lc.getVisitFn(re.Struct)),e.indexOf=AAe(c$.getVisitFn(re.Struct)),e.getByteLength=oE(Dh.getVisitFn(re.Struct)),"Table"))(ku.prototype);var aIe;let wl=class $2{constructor(...t){switch(t.length){case 2:{if([this.schema]=t,!(this.schema instanceof Tr))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");if([,this.data=aa({nullCount:0,type:new fa(this.schema.fields),children:this.schema.fields.map(n=>aa({type:n.type,nullCount:0}))})]=t,!(this.data instanceof Nr))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");[this.schema,this.data]=efe(this.schema,this.data.children);break}case 1:{const[n]=t,{fields:r,children:i,length:s}=Object.keys(n).reduce((u,l,c)=>(u.children[c]=n[l],u.length=Math.max(u.length,n[l].length),u.fields[c]=Fr.new({name:l,type:n[l].type,nullable:!0}),u),{length:0,fields:new Array,children:new Array}),o=new Tr(r),a=aa({type:new fa(r),length:s,children:i,nullCount:0});[this.schema,this.data]=efe(o,a.children,s);break}default:throw new TypeError("RecordBatch constructor expects an Object mapping names to child Data, or a [Schema, Data] pair.")}}get dictionaries(){return this._dictionaries||(this._dictionaries=uIe(this.schema.fields,this.data.children))}get numCols(){return this.schema.fields.length}get numRows(){return this.data.length}get nullCount(){return this.data.nullCount}isValid(t){return this.data.getValid(t)}get(t){return tl.visit(this.data,t)}set(t,n){return Lc.visit(this.data,t,n)}indexOf(t,n){return c$.visit(this.data,t,n)}getByteLength(t){return Dh.visit(this.data,t)}[Symbol.iterator](){return qX.visit(new hr([this.data]))}toArray(){return[...this]}concat(...t){return new ku(this.schema,[this,...t])}slice(t,n){const[r]=new hr([this.data]).slice(t,n).data;return new $2(this.schema,r)}getChild(t){var n;return this.getChildAt((n=this.schema.fields)===null||n===void 0?void 0:n.findIndex(r=>r.name===t))}getChildAt(t){return t>-1&&t<this.schema.fields.length?new hr([this.data.children[t]]):null}setChild(t,n){var r;return this.setChildAt((r=this.schema.fields)===null||r===void 0?void 0:r.findIndex(i=>i.name===t),n)}setChildAt(t,n){let r=this.schema,i=this.data;if(t>-1&&t<this.numCols){n||(n=new hr([aa({type:new Rm,length:this.numRows})]));const s=r.fields.slice(),o=i.children.slice(),a=s[t].clone({type:n.type});[s[t],o[t]]=[a,n.data[0]],r=new Tr(s,new Map(this.schema.metadata)),i=aa({type:new fa(s),children:o})}return new $2(r,i)}select(t){const n=this.schema.select(t),r=new fa(n.fields),i=[];for(const s of t){const o=this.schema.fields.findIndex(a=>a.name===s);~o&&(i[o]=this.data.children[o])}return new $2(n,aa({type:r,length:this.numRows,children:i}))}selectAt(t){const n=this.schema.selectAt(t),r=t.map(s=>this.data.children[s]).filter(Boolean),i=aa({type:new fa(n.fields),length:this.numRows,children:r});return new $2(n,i)}};aIe=Symbol.toStringTag;wl[aIe]=(e=>(e._nullCount=-1,e[Symbol.isConcatSpreadable]=!0,"RecordBatch"))(wl.prototype);function efe(e,t,n=t.reduce((r,i)=>Math.max(r,i.length),0)){var r;const i=[...e.fields],s=[...t],o=(n+63&-64)>>3;for(const[a,u]of e.fields.entries()){const l=t[a];(!l||l.length!==n)&&(i[a]=u.clone({nullable:!0}),s[a]=(r=l==null?void 0:l._changeLengthAndBackfillNullBitmap(n))!==null&&r!==void 0?r:aa({type:u.type,length:n,nullCount:n,nullBitmap:new Uint8Array(o)}))}return[e.assign(i),aa({type:new fa(i),length:n,children:s})]}function uIe(e,t,n=new Map){var r,i;if(((r=e==null?void 0:e.length)!==null&&r!==void 0?r:0)>0&&(e==null?void 0:e.length)===(t==null?void 0:t.length))for(let s=-1,o=e.length;++s<o;){const{type:a}=e[s],u=t[s];for(const l of[u,...((i=u==null?void 0:u.dictionary)===null||i===void 0?void 0:i.data)||[]])uIe(a.children,l==null?void 0:l.children,n);if(Sn.isDictionary(a)){const{id:l}=a;if(!n.has(l))u!=null&&u.dictionary&&n.set(l,u.dictionary);else if(n.get(l)!==u.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}}return n}class cbt extends wl{constructor(t){const n=t.fields.map(i=>aa({type:i.type})),r=aa({type:new fa(t.fields),nullCount:0,children:n});super(t,r)}}var b$;(function(e){e[e.BUFFER=0]="BUFFER"})(b$||(b$={}));var _$;(function(e){e[e.LZ4_FRAME=0]="LZ4_FRAME",e[e.ZSTD=1]="ZSTD"})(_$||(_$={}));class $g{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsBodyCompression(t,n){return(n||new $g).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBodyCompression(t,n){return t.setPosition(t.position()+zr),(n||new $g).__init(t.readInt32(t.position())+t.position(),t)}codec(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt8(this.bb_pos+t):_$.LZ4_FRAME}method(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt8(this.bb_pos+t):b$.BUFFER}static startBodyCompression(t){t.startObject(2)}static addCodec(t,n){t.addFieldInt8(0,n,_$.LZ4_FRAME)}static addMethod(t,n){t.addFieldInt8(1,n,b$.BUFFER)}static endBodyCompression(t){return t.endObject()}static createBodyCompression(t,n,r){return $g.startBodyCompression(t),$g.addCodec(t,n),$g.addMethod(t,r),$g.endBodyCompression(t)}}let lIe=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}offset(){return this.bb.readInt64(this.bb_pos)}length(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createBuffer(t,n,r){return t.prep(8,16),t.writeInt64(BigInt(r??0)),t.writeInt64(BigInt(n??0)),t.offset()}},cIe=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}length(){return this.bb.readInt64(this.bb_pos)}nullCount(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createFieldNode(t,n,r){return t.prep(8,16),t.writeInt64(BigInt(r??0)),t.writeInt64(BigInt(n??0)),t.offset()}},Rp=class Lz{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsRecordBatch(t,n){return(n||new Lz).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsRecordBatch(t,n){return t.setPosition(t.position()+zr),(n||new Lz).__init(t.readInt32(t.position())+t.position(),t)}length(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}nodes(t,n){const r=this.bb.__offset(this.bb_pos,6);return r?(n||new cIe).__init(this.bb.__vector(this.bb_pos+r)+t*16,this.bb):null}nodesLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}buffers(t,n){const r=this.bb.__offset(this.bb_pos,8);return r?(n||new lIe).__init(this.bb.__vector(this.bb_pos+r)+t*16,this.bb):null}buffersLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}compression(t){const n=this.bb.__offset(this.bb_pos,10);return n?(t||new $g).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}static startRecordBatch(t){t.startObject(4)}static addLength(t,n){t.addFieldInt64(0,n,BigInt("0"))}static addNodes(t,n){t.addFieldOffset(1,n,0)}static startNodesVector(t,n){t.startVector(16,n,8)}static addBuffers(t,n){t.addFieldOffset(2,n,0)}static startBuffersVector(t,n){t.startVector(16,n,8)}static addCompression(t,n){t.addFieldOffset(3,n,0)}static endRecordBatch(t){return t.endObject()}},aw=class Fz{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDictionaryBatch(t,n){return(n||new Fz).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDictionaryBatch(t,n){return t.setPosition(t.position()+zr),(n||new Fz).__init(t.readInt32(t.position())+t.position(),t)}id(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}data(t){const n=this.bb.__offset(this.bb_pos,6);return n?(t||new Rp).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}isDelta(){const t=this.bb.__offset(this.bb_pos,8);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startDictionaryBatch(t){t.startObject(3)}static addId(t,n){t.addFieldInt64(0,n,BigInt("0"))}static addData(t,n){t.addFieldOffset(1,n,0)}static addIsDelta(t,n){t.addFieldInt8(2,+n,0)}static endDictionaryBatch(t){return t.endObject()}};var w$;(function(e){e[e.NONE=0]="NONE",e[e.Schema=1]="Schema",e[e.DictionaryBatch=2]="DictionaryBatch",e[e.RecordBatch=3]="RecordBatch",e[e.Tensor=4]="Tensor",e[e.SparseTensor=5]="SparseTensor"})(w$||(w$={}));let bg=class Ad{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsMessage(t,n){return(n||new Ad).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsMessage(t,n){return t.setPosition(t.position()+zr),(n||new Ad).__init(t.readInt32(t.position())+t.position(),t)}version(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):ox.V1}headerType(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readUint8(this.bb_pos+t):w$.NONE}header(t){const n=this.bb.__offset(this.bb_pos,8);return n?this.bb.__union(t,this.bb_pos+n):null}bodyLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,12);return r?(n||new Rs).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}static startMessage(t){t.startObject(5)}static addVersion(t,n){t.addFieldInt16(0,n,ox.V1)}static addHeaderType(t,n){t.addFieldInt8(1,n,w$.NONE)}static addHeader(t,n){t.addFieldOffset(2,n,0)}static addBodyLength(t,n){t.addFieldInt64(3,n,BigInt("0"))}static addCustomMetadata(t,n){t.addFieldOffset(4,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static endMessage(t){return t.endObject()}static finishMessageBuffer(t,n){t.finish(n)}static finishSizePrefixedMessageBuffer(t,n){t.finish(n,void 0,!0)}static createMessage(t,n,r,i,s,o){return Ad.startMessage(t),Ad.addVersion(t,n),Ad.addHeaderType(t,r),Ad.addHeader(t,i),Ad.addBodyLength(t,s),Ad.addCustomMetadata(t,o),Ad.endMessage(t)}};class fbt extends Cn{visit(t,n){return t==null||n==null?void 0:super.visit(t,n)}visitNull(t,n){return p1.startNull(n),p1.endNull(n)}visitInt(t,n){return _l.startInt(n),_l.addBitWidth(n,t.bitWidth),_l.addIsSigned(n,t.isSigned),_l.endInt(n)}visitFloat(t,n){return Kd.startFloatingPoint(n),Kd.addPrecision(n,t.precision),Kd.endFloatingPoint(n)}visitBinary(t,n){return f1.startBinary(n),f1.endBinary(n)}visitBool(t,n){return d1.startBool(n),d1.endBool(n)}visitUtf8(t,n){return g1.startUtf8(n),g1.endUtf8(n)}visitDecimal(t,n){return Su.startDecimal(n),Su.addScale(n,t.scale),Su.addPrecision(n,t.precision),Su.addBitWidth(n,t.bitWidth),Su.endDecimal(n)}visitDate(t,n){return ID.startDate(n),ID.addUnit(n,t.unit),ID.endDate(n)}visitTime(t,n){return D2.startTime(n),D2.addUnit(n,t.unit),D2.addBitWidth(n,t.bitWidth),D2.endTime(n)}visitTimestamp(t,n){const r=t.timezone&&n.createString(t.timezone)||void 0;return O2.startTimestamp(n),O2.addUnit(n,t.unit),r!==void 0&&O2.addTimezone(n,r),O2.endTimestamp(n)}visitInterval(t,n){return Xd.startInterval(n),Xd.addUnit(n,t.unit),Xd.endInterval(n)}visitDuration(t,n){return Wd.startDuration(n),Wd.addUnit(n,t.unit),Wd.endDuration(n)}visitList(t,n){return h1.startList(n),h1.endList(n)}visitStruct(t,n){return m1.startStruct_(n),m1.endStruct_(n)}visitUnion(t,n){Dv.startTypeIdsVector(n,t.typeIds.length);const r=Dv.createTypeIdsVector(n,t.typeIds);return Dv.startUnion(n),Dv.addMode(n,t.mode),Dv.addTypeIds(n,r),Dv.endUnion(n)}visitDictionary(t,n){const r=this.visit(t.indices,n);return zp.startDictionaryEncoding(n),zp.addId(n,BigInt(t.id)),zp.addIsOrdered(n,t.isOrdered),r!==void 0&&zp.addIndexType(n,r),zp.endDictionaryEncoding(n)}visitFixedSizeBinary(t,n){return Gd.startFixedSizeBinary(n),Gd.addByteWidth(n,t.byteWidth),Gd.endFixedSizeBinary(n)}visitFixedSizeList(t,n){return Yd.startFixedSizeList(n),Yd.addListSize(n,t.listSize),Yd.endFixedSizeList(n)}visitMap(t,n){return kD.startMap(n),kD.addKeysSorted(n,t.keysSorted),kD.endMap(n)}}const t9=new fbt;function dbt(e,t=new Map){return new Tr(pbt(e,t),ND(e.metadata),t)}function fIe(e){return new Ul(e.count,dIe(e.columns),hIe(e.columns))}function hbt(e){return new Oh(fIe(e.data),e.id,e.isDelta)}function pbt(e,t){return(e.fields||[]).filter(Boolean).map(n=>Fr.fromJSON(n,t))}function tfe(e,t){return(e.children||[]).filter(Boolean).map(n=>Fr.fromJSON(n,t))}function dIe(e){return(e||[]).reduce((t,n)=>[...t,new ty(n.count,mbt(n.VALIDITY)),...dIe(n.children)],[])}function hIe(e,t=[]){for(let n=-1,r=(e||[]).length;++n<r;){const i=e[n];i.VALIDITY&&t.push(new nh(t.length,i.VALIDITY.length)),i.TYPE_ID&&t.push(new nh(t.length,i.TYPE_ID.length)),i.OFFSET&&t.push(new nh(t.length,i.OFFSET.length)),i.DATA&&t.push(new nh(t.length,i.DATA.length)),t=hIe(i.children,t)}return t}function mbt(e){return(e||[]).reduce((t,n)=>t+ +(n===0),0)}function gbt(e,t){let n,r,i,s,o,a;return!t||!(s=e.dictionary)?(o=rfe(e,tfe(e,t)),i=new Fr(e.name,o,e.nullable,ND(e.metadata))):t.has(n=s.id)?(r=(r=s.indexType)?nfe(r):new K0,a=new Q0(t.get(n),r,n,s.isOrdered),i=new Fr(e.name,a,e.nullable,ND(e.metadata))):(r=(r=s.indexType)?nfe(r):new K0,t.set(n,o=rfe(e,tfe(e,t))),a=new Q0(o,r,n,s.isOrdered),i=new Fr(e.name,a,e.nullable,ND(e.metadata))),i||null}function ND(e=[]){return new Map(e.map(({key:t,value:n})=>[t,n]))}function nfe(e){return new ru(e.isSigned,e.bitWidth)}function rfe(e,t){const n=e.type.name;switch(n){case"NONE":return new Rm;case"null":return new Rm;case"binary":return new nI;case"utf8":return new tx;case"bool":return new rI;case"list":return new ix((t||[])[0]);case"struct":return new fa(t||[]);case"struct_":return new fa(t||[])}switch(n){case"int":{const r=e.type;return new ru(r.isSigned,r.bitWidth)}case"floatingpoint":{const r=e.type;return new X0(Do[r.precision])}case"decimal":{const r=e.type;return new s$(r.scale,r.precision,r.bitWidth)}case"date":{const r=e.type;return new nx(Nh[r.unit])}case"time":{const r=e.type;return new Nm(Wt[r.unit],r.bitWidth)}case"timestamp":{const r=e.type;return new o$(Wt[r.unit],r.timezone)}case"interval":{const r=e.type;return new rx(Ph[r.unit])}case"duration":{const r=e.type;return new a$(Wt[r.unit])}case"union":{const r=e.type,[i,...s]=(r.mode+"").toLowerCase(),o=i.toUpperCase()+s.join("");return new iI(el[o],r.typeIds||[],t||[])}case"fixedsizebinary":{const r=e.type;return new u$(r.byteWidth)}case"fixedsizelist":{const r=e.type;return new sx(r.listSize,(t||[])[0])}case"map":{const r=e.type;return new sI((t||[])[0],r.keysSorted)}}throw new Error(`Unrecognized type: "${n}"`)}var ybt=LAe,vbt=d$;class Qd{static fromJSON(t,n){const r=new Qd(0,Va.V5,n);return r._createHeader=bbt(t,n),r}static decode(t){t=new vbt(Pr(t));const n=bg.getRootAsMessage(t),r=n.bodyLength(),i=n.version(),s=n.headerType(),o=new Qd(r,i,s);return o._createHeader=_bt(n,s),o}static encode(t){const n=new ybt;let r=-1;return t.isSchema()?r=Tr.encode(n,t.header()):t.isRecordBatch()?r=Ul.encode(n,t.header()):t.isDictionaryBatch()&&(r=Oh.encode(n,t.header())),bg.startMessage(n),bg.addVersion(n,Va.V5),bg.addHeader(n,r),bg.addHeaderType(n,t.headerType),bg.addBodyLength(n,BigInt(t.bodyLength)),bg.finishMessageBuffer(n,bg.endMessage(n)),n.asUint8Array()}static from(t,n=0){if(t instanceof Tr)return new Qd(0,Va.V5,Qs.Schema,t);if(t instanceof Ul)return new Qd(n,Va.V5,Qs.RecordBatch,t);if(t instanceof Oh)return new Qd(n,Va.V5,Qs.DictionaryBatch,t);throw new Error(`Unrecognized Message header: ${t}`)}get type(){return this.headerType}get version(){return this._version}get headerType(){return this._headerType}get bodyLength(){return this._bodyLength}header(){return this._createHeader()}isSchema(){return this.headerType===Qs.Schema}isRecordBatch(){return this.headerType===Qs.RecordBatch}isDictionaryBatch(){return this.headerType===Qs.DictionaryBatch}constructor(t,n,r,i){this._version=n,this._headerType=r,this.body=new Uint8Array(0),i&&(this._createHeader=()=>i),this._bodyLength=Qf(t)}}class Ul{get nodes(){return this._nodes}get length(){return this._length}get buffers(){return this._buffers}constructor(t,n,r){this._nodes=n,this._buffers=r,this._length=Qf(t)}}class Oh{get id(){return this._id}get data(){return this._data}get isDelta(){return this._isDelta}get length(){return this.data.length}get nodes(){return this.data.nodes}get buffers(){return this.data.buffers}constructor(t,n,r=!1){this._data=t,this._isDelta=r,this._id=Qf(n)}}class nh{constructor(t,n){this.offset=Qf(t),this.length=Qf(n)}}class ty{constructor(t,n){this.length=Qf(t),this.nullCount=Qf(n)}}function bbt(e,t){return()=>{switch(t){case Qs.Schema:return Tr.fromJSON(e);case Qs.RecordBatch:return Ul.fromJSON(e);case Qs.DictionaryBatch:return Oh.fromJSON(e)}throw new Error(`Unrecognized Message type: { name: ${Qs[t]}, type: ${t} }`)}}function _bt(e,t){return()=>{switch(t){case Qs.Schema:return Tr.decode(e.header(new Od),new Map,e.version());case Qs.RecordBatch:return Ul.decode(e.header(new Rp),e.version());case Qs.DictionaryBatch:return Oh.decode(e.header(new aw),e.version())}throw new Error(`Unrecognized Message type: { name: ${Qs[t]}, type: ${t} }`)}}Fr.encode=Nbt;Fr.decode=kbt;Fr.fromJSON=gbt;Tr.encode=Rbt;Tr.decode=wbt;Tr.fromJSON=dbt;Ul.encode=Pbt;Ul.decode=Ebt;Ul.fromJSON=fIe;Oh.encode=Dbt;Oh.decode=xbt;Oh.fromJSON=hbt;ty.encode=Obt;ty.decode=Tbt;nh.encode=$bt;nh.decode=Sbt;function wbt(e,t=new Map,n=Va.V5){const r=Ibt(e,t);return new Tr(r,PD(e),t,n)}function Ebt(e,t=Va.V5){if(e.compression()!==null)throw new Error("Record batch compression not implemented");return new Ul(e.length(),Cbt(e),Abt(e,t))}function xbt(e,t=Va.V5){return new Oh(Ul.decode(e.data(),t),e.id(),e.isDelta())}function Sbt(e){return new nh(e.offset(),e.length())}function Tbt(e){return new ty(e.length(),e.nullCount())}function Cbt(e){const t=[];for(let n,r=-1,i=-1,s=e.nodesLength();++r<s;)(n=e.nodes(r))&&(t[++i]=ty.decode(n));return t}function Abt(e,t){const n=[];for(let r,i=-1,s=-1,o=e.buffersLength();++i<o;)(r=e.buffers(i))&&(t<Va.V4&&(r.bb_pos+=8*(i+1)),n[++s]=nh.decode(r));return n}function Ibt(e,t){const n=[];for(let r,i=-1,s=-1,o=e.fieldsLength();++i<o;)(r=e.fields(i))&&(n[++s]=Fr.decode(r,t));return n}function ife(e,t){const n=[];for(let r,i=-1,s=-1,o=e.childrenLength();++i<o;)(r=e.children(i))&&(n[++s]=Fr.decode(r,t));return n}function kbt(e,t){let n,r,i,s,o,a;return!t||!(a=e.dictionary())?(i=ofe(e,ife(e,t)),r=new Fr(e.name(),i,e.nullable(),PD(e))):t.has(n=Qf(a.id()))?(s=(s=a.indexType())?sfe(s):new K0,o=new Q0(t.get(n),s,n,a.isOrdered()),r=new Fr(e.name(),o,e.nullable(),PD(e))):(s=(s=a.indexType())?sfe(s):new K0,t.set(n,i=ofe(e,ife(e,t))),o=new Q0(i,s,n,a.isOrdered()),r=new Fr(e.name(),o,e.nullable(),PD(e))),r||null}function PD(e){const t=new Map;if(e)for(let n,r,i=-1,s=Math.trunc(e.customMetadataLength());++i<s;)(n=e.customMetadata(i))&&(r=n.key())!=null&&t.set(r,n.value());return t}function sfe(e){return new ru(e.isSigned(),e.bitWidth())}function ofe(e,t){const n=e.typeType();switch(n){case bi.NONE:return new Rm;case bi.Null:return new Rm;case bi.Binary:return new nI;case bi.Utf8:return new tx;case bi.Bool:return new rI;case bi.List:return new ix((t||[])[0]);case bi.Struct_:return new fa(t||[])}switch(n){case bi.Int:{const r=e.type(new _l);return new ru(r.isSigned(),r.bitWidth())}case bi.FloatingPoint:{const r=e.type(new Kd);return new X0(r.precision())}case bi.Decimal:{const r=e.type(new Su);return new s$(r.scale(),r.precision(),r.bitWidth())}case bi.Date:{const r=e.type(new ID);return new nx(r.unit())}case bi.Time:{const r=e.type(new D2);return new Nm(r.unit(),r.bitWidth())}case bi.Timestamp:{const r=e.type(new O2);return new o$(r.unit(),r.timezone())}case bi.Interval:{const r=e.type(new Xd);return new rx(r.unit())}case bi.Duration:{const r=e.type(new Wd);return new a$(r.unit())}case bi.Union:{const r=e.type(new Dv);return new iI(r.mode(),r.typeIdsArray()||[],t||[])}case bi.FixedSizeBinary:{const r=e.type(new Gd);return new u$(r.byteWidth())}case bi.FixedSizeList:{const r=e.type(new Yd);return new sx(r.listSize(),(t||[])[0])}case bi.Map:{const r=e.type(new kD);return new sI((t||[])[0],r.keysSorted())}}throw new Error(`Unrecognized type: "${bi[n]}" (${n})`)}function Rbt(e,t){const n=t.fields.map(s=>Fr.encode(e,s));Od.startFieldsVector(e,n.length);const r=Od.createFieldsVector(e,n),i=t.metadata&&t.metadata.size>0?Od.createCustomMetadataVector(e,[...t.metadata].map(([s,o])=>{const a=e.createString(`${s}`),u=e.createString(`${o}`);return Rs.startKeyValue(e),Rs.addKey(e,a),Rs.addValue(e,u),Rs.endKeyValue(e)})):-1;return Od.startSchema(e),Od.addFields(e,r),Od.addEndianness(e,Mbt?ax.Little:ax.Big),i!==-1&&Od.addCustomMetadata(e,i),Od.endSchema(e)}function Nbt(e,t){let n=-1,r=-1,i=-1;const s=t.type;let o=t.typeId;Sn.isDictionary(s)?(o=s.dictionary.typeId,i=t9.visit(s,e),r=t9.visit(s.dictionary,e)):r=t9.visit(s,e);const a=(s.children||[]).map(c=>Fr.encode(e,c)),u=cc.createChildrenVector(e,a),l=t.metadata&&t.metadata.size>0?cc.createCustomMetadataVector(e,[...t.metadata].map(([c,f])=>{const d=e.createString(`${c}`),h=e.createString(`${f}`);return Rs.startKeyValue(e),Rs.addKey(e,d),Rs.addValue(e,h),Rs.endKeyValue(e)})):-1;return t.name&&(n=e.createString(t.name)),cc.startField(e),cc.addType(e,r),cc.addTypeType(e,o),cc.addChildren(e,u),cc.addNullable(e,!!t.nullable),n!==-1&&cc.addName(e,n),i!==-1&&cc.addDictionary(e,i),l!==-1&&cc.addCustomMetadata(e,l),cc.endField(e)}function Pbt(e,t){const n=t.nodes||[],r=t.buffers||[];Rp.startNodesVector(e,n.length);for(const o of n.slice().reverse())ty.encode(e,o);const i=e.endVector();Rp.startBuffersVector(e,r.length);for(const o of r.slice().reverse())nh.encode(e,o);const s=e.endVector();return Rp.startRecordBatch(e),Rp.addLength(e,BigInt(t.length)),Rp.addNodes(e,i),Rp.addBuffers(e,s),Rp.endRecordBatch(e)}function Dbt(e,t){const n=Ul.encode(e,t.data);return aw.startDictionaryBatch(e),aw.addId(e,BigInt(t.id)),aw.addIsDelta(e,t.isDelta),aw.addData(e,n),aw.endDictionaryBatch(e)}function Obt(e,t){return cIe.createFieldNode(e,BigInt(t.length),BigInt(t.nullCount))}function $bt(e,t){return lIe.createBuffer(e,BigInt(t.offset),BigInt(t.length))}const Mbt=(()=>{const e=new ArrayBuffer(2);return new DataView(e).setInt16(0,256,!0),new Int16Array(e)[0]===256})(),jz="ARROW1",XX=new Uint8Array(jz.length);for(let e=0;e<jz.length;e+=1)XX[e]=jz.codePointAt(e);XX.length;class cs extends Cn{static assemble(...t){const n=i=>i.flatMap(s=>Array.isArray(s)?n(s):s instanceof wl?s.data.children:s.data),r=new cs;return r.visitMany(n(t)),r}constructor(){super(),this._byteLength=0,this._nodes=[],this._buffers=[],this._bufferRegions=[]}visit(t){if(t instanceof hr)return this.visitMany(t.data),this;const{type:n}=t;if(!Sn.isDictionary(n)){const{length:r}=t;if(r>2147483647)throw new RangeError("Cannot write arrays larger than 2^31 - 1 in length");if(Sn.isUnion(n))this.nodes.push(new ty(r,0));else{const{nullCount:i}=t;Sn.isNull(n)||Uf.call(this,i<=0?new Uint8Array(0):l$(t.offset,r,t.nullBitmap)),this.nodes.push(new ty(r,i))}}return super.visit(t)}visitNull(t){return this}visitDictionary(t){return this.visit(t.clone(t.type.indices))}get nodes(){return this._nodes}get buffers(){return this._buffers}get byteLength(){return this._byteLength}get bufferRegions(){return this._bufferRegions}}function Uf(e){const t=e.byteLength+7&-8;return this.buffers.push(e),this.bufferRegions.push(new nh(this._byteLength,t)),this._byteLength+=t,this}function Lbt(e){var t;const{type:n,length:r,typeIds:i,valueOffsets:s}=e;if(Uf.call(this,i),n.mode===el.Sparse)return Bz.call(this,e);if(n.mode===el.Dense){if(e.offset<=0)return Uf.call(this,s),Bz.call(this,e);{const o=new Int32Array(r),a=Object.create(null),u=Object.create(null);for(let l,c,f=-1;++f<r;)(l=i[f])!==void 0&&((c=a[l])===void 0&&(c=a[l]=s[f]),o[f]=s[f]-c,u[l]=((t=u[l])!==null&&t!==void 0?t:0)+1);Uf.call(this,o),this.visitMany(e.children.map((l,c)=>{const f=n.typeIds[c],d=a[f],h=u[f];return l.slice(d,Math.min(r,h))}))}}return this}function Fbt(e){let t;return e.nullCount>=e.length?Uf.call(this,new Uint8Array(0)):(t=e.values)instanceof Uint8Array?Uf.call(this,l$(e.offset,e.length,t)):Uf.call(this,EAe(e.values))}function sg(e){return Uf.call(this,e.values.subarray(0,e.length*e.stride))}function pIe(e){const{length:t,values:n,valueOffsets:r}=e,{[0]:i,[t]:s}=r,o=Math.min(s-i,n.byteLength-i);return Uf.call(this,gCe(-i,t+1,r)),Uf.call(this,n.subarray(i,i+o)),this}function QX(e){const{length:t,valueOffsets:n}=e;if(n){const{[0]:r,[t]:i}=n;return Uf.call(this,gCe(-r,t+1,n)),this.visit(e.children[0].slice(r,i-r))}return this.visit(e.children[0])}function Bz(e){return this.visitMany(e.type.children.map((t,n)=>e.children[n]).filter(Boolean))[0]}cs.prototype.visitBool=Fbt;cs.prototype.visitInt=sg;cs.prototype.visitFloat=sg;cs.prototype.visitUtf8=pIe;cs.prototype.visitBinary=pIe;cs.prototype.visitFixedSizeBinary=sg;cs.prototype.visitDate=sg;cs.prototype.visitTimestamp=sg;cs.prototype.visitTime=sg;cs.prototype.visitDecimal=sg;cs.prototype.visitList=QX;cs.prototype.visitStruct=Bz;cs.prototype.visitUnion=Lbt;cs.prototype.visitInterval=sg;cs.prototype.visitDuration=sg;cs.prototype.visitFixedSizeList=QX;cs.prototype.visitMap=QX;class mIe extends jAe{static throughNode(t){throw new Error('"throughNode" not available in this environment')}static throughDOM(t,n){throw new Error('"throughDOM" not available in this environment')}constructor(t){super(),this._position=0,this._started=!1,this._sink=new Z8,this._schema=null,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._dictionaryDeltaOffsets=new Map,zy(t)||(t={autoDestroy:!0,writeLegacyIpcFormat:!1}),this._autoDestroy=typeof t.autoDestroy=="boolean"?t.autoDestroy:!0,this._writeLegacyIpcFormat=typeof t.writeLegacyIpcFormat=="boolean"?t.writeLegacyIpcFormat:!1}toString(t=!1){return this._sink.toString(t)}toUint8Array(t=!1){return this._sink.toUint8Array(t)}writeAll(t){return K6(t)?t.then(n=>this.writeAll(n)):X6(t)?tQ(this,t):eQ(this,t)}get closed(){return this._sink.closed}[Symbol.asyncIterator](){return this._sink[Symbol.asyncIterator]()}toDOMStream(t){return this._sink.toDOMStream(t)}toNodeStream(t){return this._sink.toNodeStream(t)}close(){return this.reset()._sink.close()}abort(t){return this.reset()._sink.abort(t)}finish(){return this._autoDestroy?this.close():this.reset(this._sink,this._schema),this}reset(t=this._sink,n=null){return t===this._sink||t instanceof Z8?this._sink=t:(this._sink=new Z8,t&&Hyt(t)?this.toDOMStream({type:"bytes"}).pipeTo(t):t&&qyt(t)&&this.toNodeStream({objectMode:!1}).pipe(t)),this._started&&this._schema&&this._writeFooter(this._schema),this._started=!1,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._dictionaryDeltaOffsets=new Map,(!n||!Mz(n,this._schema))&&(n==null?(this._position=0,this._schema=null):(this._started=!0,this._schema=n,this._writeSchema(n))),this}write(t){let n=null;if(this._sink){if(t==null)return this.finish()&&void 0;if(t instanceof ku&&!(n=t.schema))return this.finish()&&void 0;if(t instanceof wl&&!(n=t.schema))return this.finish()&&void 0}else throw new Error("RecordBatchWriter is closed");if(n&&!Mz(n,this._schema)){if(this._started&&this._autoDestroy)return this.close();this.reset(this._sink,n)}t instanceof wl?t instanceof cbt||this._writeRecordBatch(t):t instanceof ku?this.writeAll(t.batches):cX(t)&&this.writeAll(t)}_writeMessage(t,n=8){const r=n-1,i=Qd.encode(t),s=i.byteLength,o=this._writeLegacyIpcFormat?4:8,a=s+o+r&~r,u=a-s-o;return t.headerType===Qs.RecordBatch?this._recordBatchBlocks.push(new Z0(a,t.bodyLength,this._position)):t.headerType===Qs.DictionaryBatch&&this._dictionaryBlocks.push(new Z0(a,t.bodyLength,this._position)),this._writeLegacyIpcFormat||this._write(Int32Array.of(-1)),this._write(Int32Array.of(a-o)),s>0&&this._write(i),this._writePadding(u)}_write(t){if(this._started){const n=Pr(t);n&&n.byteLength>0&&(this._sink.write(n),this._position+=n.byteLength)}return this}_writeSchema(t){return this._writeMessage(Qd.from(t))}_writeFooter(t){return this._writeLegacyIpcFormat?this._write(Int32Array.of(0)):this._write(Int32Array.of(-1,0))}_writeMagic(){return this._write(XX)}_writePadding(t){return t>0?this._write(new Uint8Array(t)):this}_writeRecordBatch(t){const{byteLength:n,nodes:r,bufferRegions:i,buffers:s}=cs.assemble(t),o=new Ul(t.numRows,r,i),a=Qd.from(o,n);return this._writeDictionaries(t)._writeMessage(a)._writeBodyBuffers(s)}_writeDictionaryBatch(t,n,r=!1){this._dictionaryDeltaOffsets.set(n,t.length+(this._dictionaryDeltaOffsets.get(n)||0));const{byteLength:i,nodes:s,bufferRegions:o,buffers:a}=cs.assemble(new hr([t])),u=new Ul(t.length,s,o),l=new Oh(u,n,r),c=Qd.from(l,i);return this._writeMessage(c)._writeBodyBuffers(a)}_writeBodyBuffers(t){let n,r,i;for(let s=-1,o=t.length;++s<o;)(n=t[s])&&(r=n.byteLength)>0&&(this._write(n),(i=(r+7&-8)-r)>0&&this._writePadding(i));return this}_writeDictionaries(t){for(let[n,r]of t.dictionaries){let i=this._dictionaryDeltaOffsets.get(n)||0;if(i===0||(r=r==null?void 0:r.slice(i)).length>0)for(const s of r.data)this._writeDictionaryBatch(s,n,i>0),i+=s.length}return this}}class JX extends mIe{static writeAll(t,n){const r=new JX(n);return K6(t)?t.then(i=>r.writeAll(i)):X6(t)?tQ(r,t):eQ(r,t)}}class ZX extends mIe{static writeAll(t){const n=new ZX;return K6(t)?t.then(r=>n.writeAll(r)):X6(t)?tQ(n,t):eQ(n,t)}constructor(){super(),this._autoDestroy=!0}_writeSchema(t){return this._writeMagic()._writePadding(2)}_writeFooter(t){const n=$z.encode(new $z(t,Va.V5,this._recordBatchBlocks,this._dictionaryBlocks));return super._writeFooter(t)._write(n)._write(Int32Array.of(n.byteLength))._writeMagic()}}function eQ(e,t){let n=t;t instanceof ku&&(n=t.batches,e.reset(void 0,t.schema));for(const r of n)e.write(r);return e.finish()}function tQ(e,t){var n,r,i,s,o,a,u;return Fp(this,void 0,void 0,function*(){try{for(n=!0,r=gC(t);i=yield r.next(),s=i.done,!s;n=!0){u=i.value,n=!1;const l=u;e.write(l)}}catch(l){o={error:l}}finally{try{!n&&!s&&(a=r.return)&&(yield a.call(r))}finally{if(o)throw o.error}}return e.finish()})}function jbt(e,t="stream"){return(t==="stream"?JX:ZX).writeAll(e).toUint8Array(!0)}function nQ(e,t=1){return(e*t+63&-64||64)/t}function ny(e,t,n=e.BYTES_PER_ELEMENT){return new e(nQ(t,n))}function rQ(e){return e instanceof Nr?e:new Nr(e.type,0,e.length,e.nulls,e.buffers,null,e.dict)}function Bbt(e){return new hr([rQ(e)])}const iQ=new TextEncoder;function Ubt(e,t,n){const r=iQ.encode(n);return e.set(r,t),r.length}function zbt(e,t,n){return iQ.encodeInto(n,e.subarray(t)).written}const Vbt=iQ.encodeInto?zbt:Ubt;function afe(e,t){const n=ny(e.ArrayType,t);return{set(r,i){n[i]=r},data:()=>({type:e,length:t,buffers:[null,n]})}}function Hbt(e,t){const n=ny(e.ArrayType,t/8);return{set(r,i){r&&(n[i>>3]|=1<<i%8)},data:()=>({type:e,length:t,buffers:[null,n]})}}function qbt(e,t){const n=ny(e.ArrayType,t);return{set(r,i){n[i]=r/864e5|0},data:()=>({type:e,length:t,buffers:[null,n]})}}function Wbt(e,t){const n=ny(e.ArrayType,t<<1);return{set(r,i){const s=i<<1;n[s]=r%4294967296|0,n[s+1]=r/4294967296|0},data:()=>({type:e,length:t,buffers:[null,n]})}}function Gbt(e){const t=v$({type:e,nullValues:[null,void 0]});return{set(n,r){t.set(r,n)},data:()=>t.finish().flush()}}function Ybt(e,t,n){const r=ny(Int32Array,t+1),i=ny(Uint8Array,3*n);let s=0;return{set(o,a){s+=Vbt(i,s,o),r[a+1]=s},data:()=>{const o=nQ(s),a=i.length>o?i.subarray(0,o):i;return{type:e,length:t,buffers:[r,a]}}}}function Kbt(e,t){const n=[],r=ny(e.indices.ArrayType,t),i=Object.create(null);let s=-1,o=0;return{set(a,u){const l=String(a);let c=i[l];c===void 0&&(o+=l.length,i[l]=c=++s,n.push(l)),r[u]=c},data:()=>({type:e,length:t,buffers:[null,r],dict:Xbt(e.dictionary,n,o)})}}function Xbt(e,t,n){const r=Ybt(e,t.length,n);return t.forEach(r.set),Bbt(r.data())}function Qbt(e,t){const n=ny(Uint8Array,t/8);let r=0;return{set(i,s){i==null?++r:(e.set(i,s),n[s>>3]|=1<<s%8)},data:()=>{const i=e.data();return r&&(i.nulls=r,i.buffers[2]=n),i}}}function Jbt(e,t,n=!0){let r;switch(e.typeId){case re.Int:r=e.bitWidth<64?afe:null;break;case re.Float:r=e.precision>0?afe:null;break;case re.Dictionary:r=e.dictionary.typeId===re.Utf8&&e.indices.typeId===re.Int&&e.indices.bitWidth<64?Kbt:null;break;case re.Bool:r=Hbt;break;case re.Date:r=e.unit?Wbt:qbt;break}return r==null?Gbt(e):n?Qbt(r(e,t),t):r(e,t)}function Zbt(e,t){const n=e.length,r=nQ(n,e.BYTES_PER_ELEMENT);let i=e;return n!==r&&(i=new e.constructor(r),i.set(e)),rQ({type:t,length:n,buffers:[null,i]})}function gIe(e,t,n,r,i=!0){const s=Jbt(r,e,i);return t(n,s.set),rQ(s.data())}function sQ(e){if(e instanceof Sn||e==null)return e;switch(e){case re.Binary:return new nI;case re.Bool:return new rI;case re.DateDay:return new ovt;case re.DateMillisecond:case re.Date:return new avt;case re.Dictionary:return new Q0(new tx,new K0);case re.Float16:return new FCe;case re.Float32:return new _X;case re.Float64:case re.Float:return new wX;case re.Int8:return new hX;case re.Int16:return new pX;case re.Int32:case re.Int:return new K0;case re.Int64:return new mX;case re.IntervalDayTime:return new dvt;case re.Interval:case re.IntervalYearMonth:return new hvt;case re.Null:return new Rm;case re.TimeMicrosecond:return new cvt;case re.TimeMillisecond:case re.Time:return new lvt;case re.TimeNanosecond:return new fvt;case re.TimeSecond:return new uvt;case re.Uint8:return new gX;case re.Uint16:return new yX;case re.Uint32:return new vX;case re.Uint64:return new bX;case re.Utf8:return new tx;default:xn(`Unsupported type code: ${kh(e)}. Use a data type constructor instead?`)}}function e_t(e){return e.getUTCHours()===0&&e.getUTCMinutes()===0&&e.getUTCSeconds()===0&&e.getUTCMilliseconds()===0}function yIe(e,t){const n=Uz();return e(t,n.add),n}function Uz(){const e={count:0,nulls:0,bools:0,nums:0,ints:0,bigints:0,min:1/0,max:-1/0,digits:0,dates:0,utcdays:0,strings:0,strlen:0,arrays:0,minlen:1/0,maxlen:0,structs:0,add(t){if(++e.count,t==null){++e.nulls;return}const n=typeof t;if(n==="string")++e.strings;else if(n==="number")++e.nums,t<e.min&&(e.min=t),t>e.max&&(e.max=t),Number.isInteger(t)&&++e.ints;else if(n==="boolean")++e.bools;else if(n==="object")if(km(t))++e.dates,e_t(t)&&++e.utcdays;else if(c1(t)){++e.arrays,t.length<e.minlen&&(e.minlen=t.length),t.length>e.maxlen&&(e.maxlen=t.length);const r=e.array_prof||(e.array_prof=Uz());t.forEach(r.add)}else{++e.structs;const r=e.struct_prof||(e.struct_prof={});for(const i in t)(r[i]||(r[i]=Uz())).add(t[i])}else n==="bigint"&&(++e.bigints,t<e.min&&(e.min=t),t>e.max&&(e.max=t))},type(){return sQ(t_t(e))}};return e}function t_t(e){const t=e.count-e.nulls;if(t===0)return re.Null;if(e.ints===t){const n=Math.max(Math.abs(e.min)-1,e.max);return e.min<0?n>=2**31?re.Float64:n<128?re.Int8:n<32768?re.Int16:re.Int32:n>=2**32?re.Float64:n<256?re.Uint8:n<65536?re.Uint16:re.Uint32}else{if(e.nums===t)return re.Float64;if(e.bigints===t){const n=-e.min>e.max?-e.min-1n:e.max;return e.min<0?n<2**63?re.Int64:xn(`BigInt exceeds 64 bits: ${n}`):e.max<2**64?re.Uint64:xn(`BigInt exceeds 64 bits: ${e.max}`)}else{if(e.bools===t)return re.Bool;if(e.utcdays===t)return re.DateDay;if(e.dates===t)return re.DateMillisecond;if(e.arrays===t){const n=Fr.new("value",e.array_prof.type(),!0);return e.minlen===e.maxlen?new sx(e.minlen,n):new ix(n)}else if(e.structs===t){const n=e.struct_prof;return new fa(Object.keys(n).map(r=>Fr.new(r,n[r].type(),!0)))}else{if(e.strings>0)return re.Dictionary;xn("Type inference failure")}}}}function n_t(e,t,n,r,i,s=!0){if(i=sQ(i),!i){const o=yIe(r,t);s=o.nulls>0,i=o.type()}return gIe(n,r,t,i,s)}function r_t(e,t,n,r,i,s=!0){i=sQ(i);const o=e.column(t),a=!(e.isFiltered()||e.isOrdered()),u=i_t(o);if(u&&a&&ufe(u.type,i))return u;const l=o.data;if(Pk(l)){const c=s_t(l);if(a&&c&&ufe(c,i))return Zbt(l,c);i=i||c,s=!1}if(!i){const c=yIe(r,o);s=c.nulls>0,i=c.type()}return gIe(n,r,o,i,s)}function i_t(e){return e instanceof hr?e:e.vector instanceof hr?e.vector:null}function s_t(e){const n={Float32Array:_X,Float64Array:wX,Int8Array:hX,Int16Array:pX,Int32Array:K0,Uint8Array:gX,Uint16Array:yX,Uint32Array:vX,BigInt64Array:mX,BigUint64Array:bX}[e.constructor.name];return n?new n:null}function ufe(e,t){return!e||!t?!0:e.compareTo(t)}function o_t(e,t,n){const r=Math.min(e.length,n+t);return(i,s)=>{for(let o=n;o<r;++o)s(e[o][i],o)}}function a_t(e,t,n){const r=n===0&&e.numRows()<=t&&!e.isFiltered()&&!e.isOrdered();return(i,s)=>{let o=-1;r&&c1(i.data)?i.data.forEach(s):e.scan(a=>s(i.get(a),++o),!0,t,n)}}const u_t=()=>xn("Apache Arrow not imported, see https://github.com/uwdata/arquero#usage");function l_t(){try{return ku}catch{u_t()}}function vIe(e,t={}){const{types:n={}}=t,{dataFrom:r,names:i,nrows:s,scan:o}=c_t(e,t),a={};i.forEach(l=>{const c=r(e,l,s,o,n[l]);c.length!==s&&xn("Column length mismatch"),a[l]=c});const u=l_t();return new u(a)}function c_t(e,t){const{columns:n,limit:r=1/0,offset:i=0}=t,s=gi(n)?n(e):dr(n)?n:null;if(dr(e))return{dataFrom:n_t,names:s||Object.keys(e[0]),nrows:Math.min(r,e.length-i),scan:o_t(e,r,i)};if(f_t(e))return{dataFrom:r_t,names:s||e.columnNames(),nrows:Math.min(r,e.numRows()-i),scan:a_t(e,r,i)};xn("Unsupported input data type")}function f_t(e){return e&&gi(e.reify)}function d_t(e,t={}){const{format:n,...r}=t,i=n||"stream";if(!["stream","file"].includes(i))throw Error("Unrecognised output format");return jbt(vIe(e,r),n)}function h_t(e){return e.getUTCHours()===0&&e.getUTCMinutes()===0&&e.getUTCSeconds()===0&&e.getUTCMilliseconds()===0}function p_t(e,t={}){let n=0,r=0,i=0,s=0,o=0,a=0;return e(u=>{if(++n,u==null){++r;return}const l=typeof u;if(l==="object"&&km(u))++i,h_t(u)&&++s;else if(l==="number"&&(++o,u===u&&(u|0)!==u)){const c=u+"",f=c.indexOf(".");if(f>=0){const d=c.indexOf("e"),h=d>0?d:c.length;a=Math.max(a,h-f-1)}}}),{align:(r+o+i)/n>.5?"r":"l",format:{utc:i===s,digits:Math.min(a,t.maxdigits||6)}}}function s4(e,t){return gi(t)?t(e):t||e.columnNames()}function bIe(e,t,n){const r=n.format||{},i=n.align||{},s={},o={};return t.forEach(a=>{const u=p_t(m_t(e,a),n);o[a]=i[a]||u.align,s[a]=r[a]||u.format}),{align:o,format:s}}function m_t(e,t){const n=e.column(t);return r=>e.scan(i=>r(n.get(i)))}function oQ(e,t,n=100,r,i){const s=e.data(),o=t.length;e.scan(a=>{i.row(a);for(let u=0;u<o;++u){const l=t[u];i.cell(s[t[u]].get(a),l,u)}},!0,n,r)}function g_t(e,t={}){const n=s4(e,t.columns),r=t.format||{},i=t.delimiter||",",s=new RegExp(`["${i}
\r]`),o=l=>l==null?"":km(l)?G6(l,!0):s.test(l+="")?'"'+l.replace(/"/g,'""')+'"':l,a=n.map(o);let u="";return oQ(e,n,t.limit||1/0,t.offset,{row(){u+=a.join(i)+`
`},cell(l,c,f){a[f]=o(r[c]?r[c](l):l)}}),u+a.join(i)}function _Ie(e,t={}){if(gi(t))return t(e)+"";const n=typeof e;if(n==="object"){if(km(e))return t.utc?G6(e):z2e(e);{const r=JSON.stringify(e,(s,o)=>Pk(o)?Array.from(o):o),i=t.maxlen||30;return r.length>i?r.slice(0,28)+"…"+(r[0]==="["?"]":"}"):r}}else if(n==="number"){const r=t.digits||0;let i;return e!==0&&((i=Math.abs(e))>=1e18||i<Math.pow(10,-r))?e.toExponential(r):e.toFixed(r)}else return e+""}function o4(e,t,n={}){for(const r in e)n[r]=t(e[r],r);return n}function y_t(e,t={}){const n=s4(e,t.columns),{align:r,format:i}=bIe(e,n,t),s=v_t(t),o=t.null,a=m=>m==="c"?"center":m==="r"?"right":"left",u=m=>m.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),l=(m,g)=>u(_Ie(m,g)),c=o?(m,g)=>m==null?o(m):l(m,g):l;let f=-1,d=-1;const h=(m,g,y)=>{const v=y?a(r[g]):"",_=s[m]&&s[m](g,d,f)||"",w=(v?`text-align: ${v};`+(_?" ":""):"")+_;return`<${m}${w?` style="${w}"`:""}>`};let p=h("table")+h("thead")+h("tr",f)+n.map(m=>`${h("th",m,1)}${m}</th>`).join("")+"</tr></thead>"+h("tbody");return oQ(e,n,t.limit,t.offset,{row(m){f=m,p+=(++d?"</tr>":"")+h("tr")},cell(m,g){p+=h("td",g,1)+c(m,i[g])+"</td>"}}),p+"</tr></tbody></table>"}function v_t(e){return o4(e.style,t=>gi(t)?t:()=>t)}function b_t(e,t=!0,n=!1){return e===void 0||e?t:n}const __t=e=>km(e)?G6(e,!0):e;function w_t(e,t={}){const n=b_t(t.schema),r=t.format||{},i=s4(e,t.columns);let s="{";return n&&(s+='"schema":{"fields":'+JSON.stringify(i.map(o=>({name:o})))+'},"data":{'),i.forEach((o,a)=>{s+=(a?",":"")+JSON.stringify(o)+":[";const u=e.column(o),l=r[o]||__t;let c=-1;e.scan(f=>{const d=u.get(f);s+=(++c?",":"")+JSON.stringify(l(d))},!0,t.limit,t.offset),s+="]"}),s+"}"+(n?"}":"")}function E_t(e,t={}){const n=s4(e,t.columns),{align:r,format:i}=bIe(e,n,t),s=u=>u==="c"?":-:":u==="r"?"-:":":-",o=u=>u.replace(/\|/g,"\\|");let a="|"+n.map(o).join("|")+`|
|`+n.map(u=>s(r[u])).join("|")+"|";return oQ(e,n,t.limit,t.offset,{row(){a+=`
|`},cell(u,l){a+=o(_Ie(u,i[l]))+"|"}}),a+`
`}function wIe(e,t){for(const[n,r]of Y6(t))e.set(n,r);return e}function x_t(e){return e.replace(/[.*+\-?^${}()|[\]\\]/g,"\\$&")}function Pm(e,t,n=new Map){return t=nu(t)?e.columnName(t):t,Bo(t)?n.set(t,t):dr(t)?t.forEach(r=>Pm(e,r,n)):gi(t)?Pm(e,t(e),n):wa(t)?wIe(n,t):xn(`Invalid column selection: ${kh(t)}`),n}function a4(e,t){return e.toObject=t,e}function EIe(e){return dr(e)?e.map(EIe):e&&e.toObject?e.toObject():e}function ux(){return a4(e=>e.columnNames(),()=>({all:[]}))}function xIe(...e){return e=e.flat(),a4(t=>{const n=Pm(t,e);return t.columnNames(r=>!n.has(r))},()=>({not:EIe(e)}))}function S_t(e,t){return a4(n=>{let r=nu(e)?e:n.columnIndex(e),i=nu(t)?t:n.columnIndex(t);if(i<r){const s=i;i=r,r=s}return n.columnNames().slice(r,i+1)},()=>({range:[e,t]}))}function T_t(e){return Bo(e)&&(e=RegExp(x_t(e))),a4(t=>t.columnNames(n=>e.test(n)),()=>({matches:[e.source,e.flags]}))}function C_t(e){return Pk(e.data)?e.data.constructor:Array}class Vp extends V0t{static from(t,n){return new Vp(W0t(t,n),n)}static new(t,n){if(t instanceof Vp)return t;const r={},i=[];for(const[s,o]of Y6(t))r[s]=o,i.push(s);return new Vp(r,n||i)}constructor(t,n,r,i,s,o){o4(t,q0t,t),n=n||Object.keys(t);const a=n.length?t[n[0]].length:0;super(n,a,t,r,i,s,o)}create({data:t,names:n,filter:r,groups:i,order:s}){const o=r!==void 0?r:this.mask();return new Vp(t||this._data,n||(t?null:this._names),o,i!==void 0?i:wyt(this._group,r&&o),s!==void 0?s:this._order,this._params)}assign(...t){const n=this.numRows(),r=this.reify(),i=ec(r).groupby(r.groups());return t.forEach(s=>{s=Vp.new(s),s.numRows()!==n&&xn("Assign row counts do not match"),s=s.reify(),s.columnNames(o=>i.add(o,s.column(o)))}),this.create(i.new())}columns(){return this._data}column(t){return this._data[t]}columnAt(t){return this._data[this._names[t]]}array(t,n=Array){const r=this.column(t),i=new n(this.numRows());let s=-1;return this.scan(o=>i[++s]=r.get(o),!0),i}get(t,n=0){const r=this.column(t);return this.isFiltered()||this.isOrdered()?r.get(this.indices()[n]):r.get(n)}getter(t){const n=this.column(t),r=this.isFiltered()||this.isOrdered()?this.indices():null;return r?i=>n.get(r[i]):n?i=>n.get(i):xn(`Unrecognized column: ${t}`)}object(t=0){return lfe(this)(t)}objects(t={}){const{grouped:n,limit:r,offset:i}=t,s=Pm(this,t.columns||ux()),o=hCe(s),a=[];if(this.scan((u,l)=>a.push(o(u,l)),!0,r,i),n&&this.isGrouped()){const u=[];return this.scan(l=>u.push(l),!0,r,i),xyt(this,u,a,n)}return a}*[Symbol.iterator](){const t=lfe(this),n=this.numRows();for(let r=0;r<n;++r)yield t(r)}reify(t){const n=t?t.length:this.numRows(),r=this._names;let i,s;if(!t&&!this.isOrdered())if(this.isFiltered())n===this.totalRows()&&(i=this.data());else return this;if(!i){const o=t?u=>t.forEach(u):u=>this.scan(u,!0),a=r.length;i={};for(let u=0;u<a;++u){const l=r[u],c=this.column(l),f=i[l]=new(C_t(c))(n);let d=-1;o(h=>f[++d]=c.get(h))}this.isGrouped()&&(s=Eyt(this.groups(),o,!!t,n))}return this.create({data:i,names:r,groups:s,filter:null,order:null})}transform(...t){return t.flat().reduce((n,r)=>r(n),this)}toArrow(t){return vIe(this,t)}toArrowBuffer(t){return d_t(this,t)}toCSV(t){return g_t(this,t)}toHTML(t){return y_t(this,t)}toJSON(t){return w_t(this,t)}toMarkdown(t){return E_t(this,t)}}function lfe(e){let t=e._builder;if(!t){const n=hCe(e.columnNames()),r=e.data();if(e.isOrdered()||e.isFiltered()){const i=e.indices();t=s=>n(i[s],r)}else t=i=>n(i,r);e._builder=t}return t}class A_t{constructor(t){this._outputs=t}size(){return this._outputs.length}outputs(){return this._outputs}init(){return{}}add(){}rem(){}write(){}}function er(e,t,n,r){const i=n[e.type]||n.Default;if(i&&i(e,t,r)===!1)return;const s=I_t[e.type];s&&s(e,t,n)}const iP=(e,t,n)=>{er(e.argument,t,n,e)},n9=(e,t,n)=>{er(e.left,t,n,e),er(e.right,t,n,e)},cfe=(e,t,n)=>{er(e.test,t,n,e),er(e.consequent,t,n,e),e.alternate&&er(e.alternate,t,n,e)},r9=(e,t,n)=>{$d(e.params,t,n,e),er(e.body,t,n,e)},ffe=(e,t,n)=>{er(e.callee,t,n,e),$d(e.arguments,t,n,e)},$d=(e,t,n,r)=>{e.forEach(i=>er(i,t,n,r))},I_t={TemplateLiteral:(e,t,n)=>{$d(e.expressions,t,n,e),$d(e.quasis,t,n,e)},MemberExpression:(e,t,n)=>{er(e.object,t,n,e),er(e.property,t,n,e)},CallExpression:ffe,NewExpression:ffe,ArrayExpression:(e,t,n)=>{$d(e.elements,t,n,e)},AssignmentExpression:n9,AwaitExpression:iP,BinaryExpression:n9,LogicalExpression:n9,UnaryExpression:iP,UpdateExpression:iP,ConditionalExpression:cfe,ObjectExpression:(e,t,n)=>{$d(e.properties,t,n,e)},Property:(e,t,n)=>{er(e.key,t,n,e),er(e.value,t,n,e)},ArrowFunctionExpression:r9,FunctionExpression:r9,FunctionDeclaration:r9,VariableDeclaration:(e,t,n)=>{$d(e.declarations,t,n,e)},VariableDeclarator:(e,t,n)=>{er(e.id,t,n,e),er(e.init,t,n,e)},SpreadElement:(e,t,n)=>{er(e.argument,t,n,e)},BlockStatement:(e,t,n)=>{$d(e.body,t,n,e)},ExpressionStatement:(e,t,n)=>{er(e.expression,t,n,e)},IfStatement:cfe,ForStatement:(e,t,n)=>{er(e.init,t,n,e),er(e.test,t,n,e),er(e.update,t,n,e),er(e.body,t,n,e)},WhileStatement:(e,t,n)=>{er(e.test,t,n,e),er(e.body,t,n,e)},DoWhileStatement:(e,t,n)=>{er(e.body,t,n,e),er(e.test,t,n,e)},SwitchStatement:(e,t,n)=>{er(e.discriminant,t,n,e),$d(e.cases,t,n,e)},SwitchCase:(e,t,n)=>{e.test&&er(e.test,t,n,e),$d(e.consequent,t,n,e)},ReturnStatement:iP,Program:(e,t,n)=>{er(e.body[0],t,n,e)}};function SIe(e){delete e.start,delete e.end,delete e.optional}function dfe(e){SIe(e),delete e.object,delete e.property,delete e.computed,e.table||delete e.table}function k_t(e){return er(e,null,{Column:dfe,Constant:dfe,Default:SIe}),e}function Ps(e,t){return t&&t.type===e}function R_t(e){return Ps(Cyt,e)||Ps(Tyt,e)}function N_t(e){return gi(e)?e:()=>e}const P_t="Escaped functions are not valid as rollup or pivot values.";function D_t(e,t,n){e.aggronly&&xn(P_t);const r="(row,data)=>fn("+dCe(e.table.columnNames())+",$)";return{escape:uX.escape(r,N_t(t.expr),n)}}var O_t=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,370,1,81,2,71,10,50,3,123,2,54,14,32,10,3,1,11,3,46,10,8,0,46,9,7,2,37,13,2,9,6,1,45,0,13,2,49,13,9,3,2,11,83,11,7,0,3,0,158,11,6,9,7,3,56,1,2,6,3,1,3,2,10,0,11,1,3,6,4,4,193,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,84,14,5,9,243,14,166,9,71,5,2,1,3,3,2,0,2,1,13,9,120,6,3,6,4,0,29,9,41,6,2,3,9,0,10,10,47,15,406,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,10,1,2,0,49,6,4,4,14,9,5351,0,7,14,13835,9,87,9,39,4,60,6,26,9,1014,0,2,54,8,3,82,0,12,1,19628,1,4706,45,3,22,543,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,101,0,161,6,10,9,357,0,62,13,499,13,983,6,110,6,6,9,4759,9,787719,239],TIe=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,13,10,2,14,2,6,2,1,2,10,2,14,2,6,2,1,68,310,10,21,11,7,25,5,2,41,2,8,70,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,349,41,7,1,79,28,11,0,9,21,43,17,47,20,28,22,13,52,58,1,3,0,14,44,33,24,27,35,30,0,3,0,9,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,20,1,64,6,2,0,2,3,2,14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,159,52,19,3,21,2,31,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,14,0,72,26,38,6,186,43,117,63,32,7,3,0,3,7,2,1,2,23,16,0,2,0,95,7,3,38,17,0,2,0,29,0,11,39,8,0,22,0,12,45,20,0,19,72,264,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,16,0,2,12,2,33,125,0,80,921,103,110,18,195,2637,96,16,1071,18,5,4026,582,8634,568,8,30,18,78,18,29,19,47,17,3,32,20,6,18,689,63,129,74,6,0,67,12,65,1,2,0,29,6135,9,1237,43,8,8936,3,2,6,2,1,2,290,16,0,30,2,3,0,15,3,9,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,1845,30,7,5,262,61,147,44,11,6,17,0,322,29,19,43,485,27,757,6,2,3,2,1,2,14,2,196,60,67,8,0,1205,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42719,33,4153,7,221,3,5761,15,7472,16,621,2467,541,1507,4938,6,4191],$_t="‌‍·̀-ͯ·҃-֑҇-ׇֽֿׁׂׅׄؐ-ًؚ-٩ٰۖ-ۜ۟-۪ۤۧۨ-ۭ۰-۹ܑܰ-݊ަ-ް߀-߉߫-߽߳ࠖ-࠙ࠛ-ࠣࠥ-ࠧࠩ-࡙࠭-࡛࢘-࢟࣊-ࣣ࣡-ःऺ-़ा-ॏ॑-ॗॢॣ०-९ঁ-ঃ়া-ৄেৈো-্ৗৢৣ০-৯৾ਁ-ਃ਼ਾ-ੂੇੈੋ-੍ੑ੦-ੱੵઁ-ઃ઼ા-ૅે-ૉો-્ૢૣ૦-૯ૺ-૿ଁ-ଃ଼ା-ୄେୈୋ-୍୕-ୗୢୣ୦-୯ஂா-ூெ-ைொ-்ௗ௦-௯ఀ-ఄ఼ా-ౄె-ైొ-్ౕౖౢౣ౦-౯ಁ-ಃ಼ಾ-ೄೆ-ೈೊ-್ೕೖೢೣ೦-೯ೳഀ-ഃ഻഼ാ-ൄെ-ൈൊ-്ൗൢൣ൦-൯ඁ-ඃ්ා-ුූෘ-ෟ෦-෯ෲෳัิ-ฺ็-๎๐-๙ັິ-ຼ່-໎໐-໙༘༙༠-༩༹༵༷༾༿ཱ-྄྆྇ྍ-ྗྙ-ྼ࿆ါ-ှ၀-၉ၖ-ၙၞ-ၠၢ-ၤၧ-ၭၱ-ၴႂ-ႍႏ-ႝ፝-፟፩-፱ᜒ-᜕ᜲ-᜴ᝒᝓᝲᝳ឴-៓៝០-៩᠋-᠍᠏-᠙ᢩᤠ-ᤫᤰ-᤻᥆-᥏᧐-᧚ᨗ-ᨛᩕ-ᩞ᩠-᩿᩼-᪉᪐-᪙᪰-᪽ᪿ-ᫎᬀ-ᬄ᬴-᭄᭐-᭙᭫-᭳ᮀ-ᮂᮡ-ᮭ᮰-᮹᯦-᯳ᰤ-᰷᱀-᱉᱐-᱙᳐-᳔᳒-᳨᳭᳴᳷-᳹᷀-᷿‌‍‿⁀⁔⃐-⃥⃜⃡-⃰⳯-⵿⳱ⷠ-〪ⷿ-゙゚〯・꘠-꘩꙯ꙴ-꙽ꚞꚟ꛰꛱ꠂ꠆ꠋꠣ-ꠧ꠬ꢀꢁꢴ-ꣅ꣐-꣙꣠-꣱ꣿ-꤉ꤦ-꤭ꥇ-꥓ꦀ-ꦃ꦳-꧀꧐-꧙ꧥ꧰-꧹ꨩ-ꨶꩃꩌꩍ꩐-꩙ꩻ-ꩽꪰꪲ-ꪴꪷꪸꪾ꪿꫁ꫫ-ꫯꫵ꫶ꯣ-ꯪ꯬꯭꯰-꯹ﬞ︀-️︠-︯︳︴﹍-﹏０-９＿･",CIe="ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽͿΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԯԱ-Ֆՙՠ-ֈא-תׯ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࡠ-ࡪࡰ-ࢇࢉ-ࢎࢠ-ࣉऄ-हऽॐक़-ॡॱ-ঀঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱৼਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡૹଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-హఽౘ-ౚౝౠౡಀಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೝೞೠೡೱೲഄ-ഌഎ-ഐഒ-ഺഽൎൔ-ൖൟ-ൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄຆ-ຊຌ-ຣລວ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏽᏸ-ᏽᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛸᜀ-ᜑᜟ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡸᢀ-ᢨᢪᢰ-ᣵᤀ-ᤞᥐ-ᥭᥰ-ᥴᦀ-ᦫᦰ-ᧉᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭌᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᲀ-ᲈᲐ-ᲺᲽ-Ჿᳩ-ᳬᳮ-ᳳᳵᳶᳺᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕ℘-ℝℤΩℨK-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞ々-〇〡-〩〱-〵〸-〼ぁ-ゖ゛-ゟァ-ヺー-ヿㄅ-ㄯㄱ-ㆎㆠ-ㆿㇰ-ㇿ㐀-䶿一-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚝꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꟊꟐꟑꟓꟕ-ꟙꟲ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꣽꣾꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꧠ-ꧤꧦ-ꧯꧺ-ꧾꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꩾ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꬰ-ꭚꭜ-ꭩꭰ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ",i9={3:"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile",5:"class enum extends super const export import",6:"enum",strict:"implements interface let package private protected public static yield",strictBind:"eval arguments"},s9="break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this",M_t={5:s9,"5module":s9+" export import",6:s9+" const class extends export import super"},L_t=/^in(stanceof)?$/,F_t=new RegExp("["+CIe+"]"),j_t=new RegExp("["+CIe+$_t+"]");function zz(e,t){for(var n=65536,r=0;r<t.length;r+=2){if(n+=t[r],n>e)return!1;if(n+=t[r+1],n>=e)return!0}return!1}function Dm(e,t){return e<65?e===36:e<91?!0:e<97?e===95:e<123?!0:e<=65535?e>=170&&F_t.test(String.fromCharCode(e)):t===!1?!1:zz(e,TIe)}function lx(e,t){return e<48?e===36:e<58?!0:e<65?!1:e<91?!0:e<97?e===95:e<123?!0:e<=65535?e>=170&&j_t.test(String.fromCharCode(e)):t===!1?!1:zz(e,TIe)||zz(e,O_t)}var or=function(t,n){n===void 0&&(n={}),this.label=t,this.keyword=n.keyword,this.beforeExpr=!!n.beforeExpr,this.startsExpr=!!n.startsExpr,this.isLoop=!!n.isLoop,this.isAssign=!!n.isAssign,this.prefix=!!n.prefix,this.postfix=!!n.postfix,this.binop=n.binop||null,this.updateContext=null};function sc(e,t){return new or(e,{beforeExpr:!0,binop:t})}var oc={beforeExpr:!0},gu={startsExpr:!0},aQ={};function Wn(e,t){return t===void 0&&(t={}),t.keyword=e,aQ[e]=new or(e,t)}var K={num:new or("num",gu),regexp:new or("regexp",gu),string:new or("string",gu),name:new or("name",gu),privateId:new or("privateId",gu),eof:new or("eof"),bracketL:new or("[",{beforeExpr:!0,startsExpr:!0}),bracketR:new or("]"),braceL:new or("{",{beforeExpr:!0,startsExpr:!0}),braceR:new or("}"),parenL:new or("(",{beforeExpr:!0,startsExpr:!0}),parenR:new or(")"),comma:new or(",",oc),semi:new or(";",oc),colon:new or(":",oc),dot:new or("."),question:new or("?",oc),questionDot:new or("?."),arrow:new or("=>",oc),template:new or("template"),invalidTemplate:new or("invalidTemplate"),ellipsis:new or("...",oc),backQuote:new or("`",gu),dollarBraceL:new or("${",{beforeExpr:!0,startsExpr:!0}),eq:new or("=",{beforeExpr:!0,isAssign:!0}),assign:new or("_=",{beforeExpr:!0,isAssign:!0}),incDec:new or("++/--",{prefix:!0,postfix:!0,startsExpr:!0}),prefix:new or("!/~",{beforeExpr:!0,prefix:!0,startsExpr:!0}),logicalOR:sc("||",1),logicalAND:sc("&&",2),bitwiseOR:sc("|",3),bitwiseXOR:sc("^",4),bitwiseAND:sc("&",5),equality:sc("==/!=/===/!==",6),relational:sc("</>/<=/>=",7),bitShift:sc("<</>>/>>>",8),plusMin:new or("+/-",{beforeExpr:!0,binop:9,prefix:!0,startsExpr:!0}),modulo:sc("%",10),star:sc("*",10),slash:sc("/",10),starstar:new or("**",{beforeExpr:!0}),coalesce:sc("??",1),_break:Wn("break"),_case:Wn("case",oc),_catch:Wn("catch"),_continue:Wn("continue"),_debugger:Wn("debugger"),_default:Wn("default",oc),_do:Wn("do",{isLoop:!0,beforeExpr:!0}),_else:Wn("else",oc),_finally:Wn("finally"),_for:Wn("for",{isLoop:!0}),_function:Wn("function",gu),_if:Wn("if"),_return:Wn("return",oc),_switch:Wn("switch"),_throw:Wn("throw",oc),_try:Wn("try"),_var:Wn("var"),_const:Wn("const"),_while:Wn("while",{isLoop:!0}),_with:Wn("with"),_new:Wn("new",{beforeExpr:!0,startsExpr:!0}),_this:Wn("this",gu),_super:Wn("super",gu),_class:Wn("class",gu),_extends:Wn("extends",oc),_export:Wn("export"),_import:Wn("import",gu),_null:Wn("null",gu),_true:Wn("true",gu),_false:Wn("false",gu),_in:Wn("in",{beforeExpr:!0,binop:7}),_instanceof:Wn("instanceof",{beforeExpr:!0,binop:7}),_typeof:Wn("typeof",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_void:Wn("void",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_delete:Wn("delete",{beforeExpr:!0,prefix:!0,startsExpr:!0})},Xc=/\r\n?|\n|\u2028|\u2029/,B_t=new RegExp(Xc.source,"g");function CS(e){return e===10||e===13||e===8232||e===8233}function AIe(e,t,n){n===void 0&&(n=e.length);for(var r=t;r<n;r++){var i=e.charCodeAt(r);if(CS(i))return r<n-1&&i===13&&e.charCodeAt(r+1)===10?r+2:r+1}return-1}var IIe=/[\u1680\u2000-\u200a\u202f\u205f\u3000\ufeff]/,vc=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g,kIe=Object.prototype,U_t=kIe.hasOwnProperty,z_t=kIe.toString,jk=Object.hasOwn||function(e,t){return U_t.call(e,t)},hfe=Array.isArray||function(e){return z_t.call(e)==="[object Array]"},pfe=Object.create(null);function t0(e){return pfe[e]||(pfe[e]=new RegExp("^(?:"+e.replace(/ /g,"|")+")$"))}function ry(e){return e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode((e>>10)+55296,(e&1023)+56320))}var V_t=/(?:[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])/,oI=function(t,n){this.line=t,this.column=n};oI.prototype.offset=function(t){return new oI(this.line,this.column+t)};var u4=function(t,n,r){this.start=n,this.end=r,t.sourceFile!==null&&(this.source=t.sourceFile)};function RIe(e,t){for(var n=1,r=0;;){var i=AIe(e,r,t);if(i<0)return new oI(n,t-r);++n,r=i}}var Vz={ecmaVersion:null,sourceType:"script",onInsertedSemicolon:null,onTrailingComma:null,allowReserved:null,allowReturnOutsideFunction:!1,allowImportExportEverywhere:!1,allowAwaitOutsideFunction:null,allowSuperOutsideMethod:null,allowHashBang:!1,checkPrivateFields:!0,locations:!1,onToken:null,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null,preserveParens:!1},mfe=!1;function H_t(e){var t={};for(var n in Vz)t[n]=e&&jk(e,n)?e[n]:Vz[n];if(t.ecmaVersion==="latest"?t.ecmaVersion=1e8:t.ecmaVersion==null?(!mfe&&typeof console=="object"&&console.warn&&(mfe=!0,console.warn(`Since Acorn 8.0.0, options.ecmaVersion is required.
Defaulting to 2020, but this will stop working in the future.`)),t.ecmaVersion=11):t.ecmaVersion>=2015&&(t.ecmaVersion-=2009),t.allowReserved==null&&(t.allowReserved=t.ecmaVersion<5),(!e||e.allowHashBang==null)&&(t.allowHashBang=t.ecmaVersion>=14),hfe(t.onToken)){var r=t.onToken;t.onToken=function(i){return r.push(i)}}return hfe(t.onComment)&&(t.onComment=q_t(t,t.onComment)),t}function q_t(e,t){return function(n,r,i,s,o,a){var u={type:n?"Block":"Line",value:r,start:i,end:s};e.locations&&(u.loc=new u4(this,o,a)),e.ranges&&(u.range=[i,s]),t.push(u)}}var aI=1,AS=2,uQ=4,NIe=8,PIe=16,DIe=32,lQ=64,OIe=128,Bk=256,cQ=aI|AS|Bk;function fQ(e,t){return AS|(e?uQ:0)|(t?NIe:0)}var E$=0,dQ=1,og=2,$Ie=3,MIe=4,LIe=5,Bs=function(t,n,r){this.options=t=H_t(t),this.sourceFile=t.sourceFile,this.keywords=t0(M_t[t.ecmaVersion>=6?6:t.sourceType==="module"?"5module":5]);var i="";t.allowReserved!==!0&&(i=i9[t.ecmaVersion>=6?6:t.ecmaVersion===5?5:3],t.sourceType==="module"&&(i+=" await")),this.reservedWords=t0(i);var s=(i?i+" ":"")+i9.strict;this.reservedWordsStrict=t0(s),this.reservedWordsStrictBind=t0(s+" "+i9.strictBind),this.input=String(n),this.containsEsc=!1,r?(this.pos=r,this.lineStart=this.input.lastIndexOf(`
`,r-1)+1,this.curLine=this.input.slice(0,this.lineStart).split(Xc).length):(this.pos=this.lineStart=0,this.curLine=1),this.type=K.eof,this.value=null,this.start=this.end=this.pos,this.startLoc=this.endLoc=this.curPosition(),this.lastTokEndLoc=this.lastTokStartLoc=null,this.lastTokStart=this.lastTokEnd=this.pos,this.context=this.initialContext(),this.exprAllowed=!0,this.inModule=t.sourceType==="module",this.strict=this.inModule||this.strictDirective(this.pos),this.potentialArrowAt=-1,this.potentialArrowInForAwait=!1,this.yieldPos=this.awaitPos=this.awaitIdentPos=0,this.labels=[],this.undefinedExports=Object.create(null),this.pos===0&&t.allowHashBang&&this.input.slice(0,2)==="#!"&&this.skipLineComment(2),this.scopeStack=[],this.enterScope(aI),this.regexpState=null,this.privateNameStack=[]},ep={inFunction:{configurable:!0},inGenerator:{configurable:!0},inAsync:{configurable:!0},canAwait:{configurable:!0},allowSuper:{configurable:!0},allowDirectSuper:{configurable:!0},treatFunctionsAsVar:{configurable:!0},allowNewDotTarget:{configurable:!0},inClassStaticBlock:{configurable:!0}};Bs.prototype.parse=function(){var t=this.options.program||this.startNode();return this.nextToken(),this.parseTopLevel(t)};ep.inFunction.get=function(){return(this.currentVarScope().flags&AS)>0};ep.inGenerator.get=function(){return(this.currentVarScope().flags&NIe)>0&&!this.currentVarScope().inClassFieldInit};ep.inAsync.get=function(){return(this.currentVarScope().flags&uQ)>0&&!this.currentVarScope().inClassFieldInit};ep.canAwait.get=function(){for(var e=this.scopeStack.length-1;e>=0;e--){var t=this.scopeStack[e];if(t.inClassFieldInit||t.flags&Bk)return!1;if(t.flags&AS)return(t.flags&uQ)>0}return this.inModule&&this.options.ecmaVersion>=13||this.options.allowAwaitOutsideFunction};ep.allowSuper.get=function(){var e=this.currentThisScope(),t=e.flags,n=e.inClassFieldInit;return(t&lQ)>0||n||this.options.allowSuperOutsideMethod};ep.allowDirectSuper.get=function(){return(this.currentThisScope().flags&OIe)>0};ep.treatFunctionsAsVar.get=function(){return this.treatFunctionsAsVarInScope(this.currentScope())};ep.allowNewDotTarget.get=function(){var e=this.currentThisScope(),t=e.flags,n=e.inClassFieldInit;return(t&(AS|Bk))>0||n};ep.inClassStaticBlock.get=function(){return(this.currentVarScope().flags&Bk)>0};Bs.extend=function(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];for(var r=this,i=0;i<t.length;i++)r=t[i](r);return r};Bs.parse=function(t,n){return new this(n,t).parse()};Bs.parseExpressionAt=function(t,n,r){var i=new this(r,t,n);return i.nextToken(),i.parseExpression()};Bs.tokenizer=function(t,n){return new this(n,t)};Object.defineProperties(Bs.prototype,ep);var lu=Bs.prototype,W_t=/^(?:'((?:\\.|[^'\\])*?)'|"((?:\\.|[^"\\])*?)")/;lu.strictDirective=function(e){if(this.options.ecmaVersion<5)return!1;for(;;){vc.lastIndex=e,e+=vc.exec(this.input)[0].length;var t=W_t.exec(this.input.slice(e));if(!t)return!1;if((t[1]||t[2])==="use strict"){vc.lastIndex=e+t[0].length;var n=vc.exec(this.input),r=n.index+n[0].length,i=this.input.charAt(r);return i===";"||i==="}"||Xc.test(n[0])&&!(/[(`.[+\-/*%<>=,?^&]/.test(i)||i==="!"&&this.input.charAt(r+1)==="=")}e+=t[0].length,vc.lastIndex=e,e+=vc.exec(this.input)[0].length,this.input[e]===";"&&e++}};lu.eat=function(e){return this.type===e?(this.next(),!0):!1};lu.isContextual=function(e){return this.type===K.name&&this.value===e&&!this.containsEsc};lu.eatContextual=function(e){return this.isContextual(e)?(this.next(),!0):!1};lu.expectContextual=function(e){this.eatContextual(e)||this.unexpected()};lu.canInsertSemicolon=function(){return this.type===K.eof||this.type===K.braceR||Xc.test(this.input.slice(this.lastTokEnd,this.start))};lu.insertSemicolon=function(){if(this.canInsertSemicolon())return this.options.onInsertedSemicolon&&this.options.onInsertedSemicolon(this.lastTokEnd,this.lastTokEndLoc),!0};lu.semicolon=function(){!this.eat(K.semi)&&!this.insertSemicolon()&&this.unexpected()};lu.afterTrailingComma=function(e,t){if(this.type===e)return this.options.onTrailingComma&&this.options.onTrailingComma(this.lastTokStart,this.lastTokStartLoc),t||this.next(),!0};lu.expect=function(e){this.eat(e)||this.unexpected()};lu.unexpected=function(e){this.raise(e??this.start,"Unexpected token")};var l4=function(){this.shorthandAssign=this.trailingComma=this.parenthesizedAssign=this.parenthesizedBind=this.doubleProto=-1};lu.checkPatternErrors=function(e,t){if(e){e.trailingComma>-1&&this.raiseRecoverable(e.trailingComma,"Comma is not permitted after the rest element");var n=t?e.parenthesizedAssign:e.parenthesizedBind;n>-1&&this.raiseRecoverable(n,t?"Assigning to rvalue":"Parenthesized pattern")}};lu.checkExpressionErrors=function(e,t){if(!e)return!1;var n=e.shorthandAssign,r=e.doubleProto;if(!t)return n>=0||r>=0;n>=0&&this.raise(n,"Shorthand property assignments are valid only in destructuring patterns"),r>=0&&this.raiseRecoverable(r,"Redefinition of __proto__ property")};lu.checkYieldAwaitInDefaultParams=function(){this.yieldPos&&(!this.awaitPos||this.yieldPos<this.awaitPos)&&this.raise(this.yieldPos,"Yield expression cannot be a default value"),this.awaitPos&&this.raise(this.awaitPos,"Await expression cannot be a default value")};lu.isSimpleAssignTarget=function(e){return e.type==="ParenthesizedExpression"?this.isSimpleAssignTarget(e.expression):e.type==="Identifier"||e.type==="MemberExpression"};var $t=Bs.prototype;$t.parseTopLevel=function(e){var t=Object.create(null);for(e.body||(e.body=[]);this.type!==K.eof;){var n=this.parseStatement(null,!0,t);e.body.push(n)}if(this.inModule)for(var r=0,i=Object.keys(this.undefinedExports);r<i.length;r+=1){var s=i[r];this.raiseRecoverable(this.undefinedExports[s].start,"Export '"+s+"' is not defined")}return this.adaptDirectivePrologue(e.body),this.next(),e.sourceType=this.options.sourceType,this.finishNode(e,"Program")};var hQ={kind:"loop"},G_t={kind:"switch"};$t.isLet=function(e){if(this.options.ecmaVersion<6||!this.isContextual("let"))return!1;vc.lastIndex=this.pos;var t=vc.exec(this.input),n=this.pos+t[0].length,r=this.input.charCodeAt(n);if(r===91||r===92)return!0;if(e)return!1;if(r===123||r>55295&&r<56320)return!0;if(Dm(r,!0)){for(var i=n+1;lx(r=this.input.charCodeAt(i),!0);)++i;if(r===92||r>55295&&r<56320)return!0;var s=this.input.slice(n,i);if(!L_t.test(s))return!0}return!1};$t.isAsyncFunction=function(){if(this.options.ecmaVersion<8||!this.isContextual("async"))return!1;vc.lastIndex=this.pos;var e=vc.exec(this.input),t=this.pos+e[0].length,n;return!Xc.test(this.input.slice(this.pos,t))&&this.input.slice(t,t+8)==="function"&&(t+8===this.input.length||!(lx(n=this.input.charCodeAt(t+8))||n>55295&&n<56320))};$t.parseStatement=function(e,t,n){var r=this.type,i=this.startNode(),s;switch(this.isLet(e)&&(r=K._var,s="let"),r){case K._break:case K._continue:return this.parseBreakContinueStatement(i,r.keyword);case K._debugger:return this.parseDebuggerStatement(i);case K._do:return this.parseDoStatement(i);case K._for:return this.parseForStatement(i);case K._function:return e&&(this.strict||e!=="if"&&e!=="label")&&this.options.ecmaVersion>=6&&this.unexpected(),this.parseFunctionStatement(i,!1,!e);case K._class:return e&&this.unexpected(),this.parseClass(i,!0);case K._if:return this.parseIfStatement(i);case K._return:return this.parseReturnStatement(i);case K._switch:return this.parseSwitchStatement(i);case K._throw:return this.parseThrowStatement(i);case K._try:return this.parseTryStatement(i);case K._const:case K._var:return s=s||this.value,e&&s!=="var"&&this.unexpected(),this.parseVarStatement(i,s);case K._while:return this.parseWhileStatement(i);case K._with:return this.parseWithStatement(i);case K.braceL:return this.parseBlock(!0,i);case K.semi:return this.parseEmptyStatement(i);case K._export:case K._import:if(this.options.ecmaVersion>10&&r===K._import){vc.lastIndex=this.pos;var o=vc.exec(this.input),a=this.pos+o[0].length,u=this.input.charCodeAt(a);if(u===40||u===46)return this.parseExpressionStatement(i,this.parseExpression())}return this.options.allowImportExportEverywhere||(t||this.raise(this.start,"'import' and 'export' may only appear at the top level"),this.inModule||this.raise(this.start,"'import' and 'export' may appear only with 'sourceType: module'")),r===K._import?this.parseImport(i):this.parseExport(i,n);default:if(this.isAsyncFunction())return e&&this.unexpected(),this.next(),this.parseFunctionStatement(i,!0,!e);var l=this.value,c=this.parseExpression();return r===K.name&&c.type==="Identifier"&&this.eat(K.colon)?this.parseLabeledStatement(i,l,c,e):this.parseExpressionStatement(i,c)}};$t.parseBreakContinueStatement=function(e,t){var n=t==="break";this.next(),this.eat(K.semi)||this.insertSemicolon()?e.label=null:this.type!==K.name?this.unexpected():(e.label=this.parseIdent(),this.semicolon());for(var r=0;r<this.labels.length;++r){var i=this.labels[r];if((e.label==null||i.name===e.label.name)&&(i.kind!=null&&(n||i.kind==="loop")||e.label&&n))break}return r===this.labels.length&&this.raise(e.start,"Unsyntactic "+t),this.finishNode(e,n?"BreakStatement":"ContinueStatement")};$t.parseDebuggerStatement=function(e){return this.next(),this.semicolon(),this.finishNode(e,"DebuggerStatement")};$t.parseDoStatement=function(e){return this.next(),this.labels.push(hQ),e.body=this.parseStatement("do"),this.labels.pop(),this.expect(K._while),e.test=this.parseParenExpression(),this.options.ecmaVersion>=6?this.eat(K.semi):this.semicolon(),this.finishNode(e,"DoWhileStatement")};$t.parseForStatement=function(e){this.next();var t=this.options.ecmaVersion>=9&&this.canAwait&&this.eatContextual("await")?this.lastTokStart:-1;if(this.labels.push(hQ),this.enterScope(0),this.expect(K.parenL),this.type===K.semi)return t>-1&&this.unexpected(t),this.parseFor(e,null);var n=this.isLet();if(this.type===K._var||this.type===K._const||n){var r=this.startNode(),i=n?"let":this.value;return this.next(),this.parseVar(r,!0,i),this.finishNode(r,"VariableDeclaration"),(this.type===K._in||this.options.ecmaVersion>=6&&this.isContextual("of"))&&r.declarations.length===1?(this.options.ecmaVersion>=9&&(this.type===K._in?t>-1&&this.unexpected(t):e.await=t>-1),this.parseForIn(e,r)):(t>-1&&this.unexpected(t),this.parseFor(e,r))}var s=this.isContextual("let"),o=!1,a=new l4,u=this.parseExpression(t>-1?"await":!0,a);return this.type===K._in||(o=this.options.ecmaVersion>=6&&this.isContextual("of"))?(this.options.ecmaVersion>=9&&(this.type===K._in?t>-1&&this.unexpected(t):e.await=t>-1),s&&o&&this.raise(u.start,"The left-hand side of a for-of loop may not start with 'let'."),this.toAssignable(u,!1,a),this.checkLValPattern(u),this.parseForIn(e,u)):(this.checkExpressionErrors(a,!0),t>-1&&this.unexpected(t),this.parseFor(e,u))};$t.parseFunctionStatement=function(e,t,n){return this.next(),this.parseFunction(e,DC|(n?0:Hz),!1,t)};$t.parseIfStatement=function(e){return this.next(),e.test=this.parseParenExpression(),e.consequent=this.parseStatement("if"),e.alternate=this.eat(K._else)?this.parseStatement("if"):null,this.finishNode(e,"IfStatement")};$t.parseReturnStatement=function(e){return!this.inFunction&&!this.options.allowReturnOutsideFunction&&this.raise(this.start,"'return' outside of function"),this.next(),this.eat(K.semi)||this.insertSemicolon()?e.argument=null:(e.argument=this.parseExpression(),this.semicolon()),this.finishNode(e,"ReturnStatement")};$t.parseSwitchStatement=function(e){this.next(),e.discriminant=this.parseParenExpression(),e.cases=[],this.expect(K.braceL),this.labels.push(G_t),this.enterScope(0);for(var t,n=!1;this.type!==K.braceR;)if(this.type===K._case||this.type===K._default){var r=this.type===K._case;t&&this.finishNode(t,"SwitchCase"),e.cases.push(t=this.startNode()),t.consequent=[],this.next(),r?t.test=this.parseExpression():(n&&this.raiseRecoverable(this.lastTokStart,"Multiple default clauses"),n=!0,t.test=null),this.expect(K.colon)}else t||this.unexpected(),t.consequent.push(this.parseStatement(null));return this.exitScope(),t&&this.finishNode(t,"SwitchCase"),this.next(),this.labels.pop(),this.finishNode(e,"SwitchStatement")};$t.parseThrowStatement=function(e){return this.next(),Xc.test(this.input.slice(this.lastTokEnd,this.start))&&this.raise(this.lastTokEnd,"Illegal newline after throw"),e.argument=this.parseExpression(),this.semicolon(),this.finishNode(e,"ThrowStatement")};var Y_t=[];$t.parseCatchClauseParam=function(){var e=this.parseBindingAtom(),t=e.type==="Identifier";return this.enterScope(t?DIe:0),this.checkLValPattern(e,t?MIe:og),this.expect(K.parenR),e};$t.parseTryStatement=function(e){if(this.next(),e.block=this.parseBlock(),e.handler=null,this.type===K._catch){var t=this.startNode();this.next(),this.eat(K.parenL)?t.param=this.parseCatchClauseParam():(this.options.ecmaVersion<10&&this.unexpected(),t.param=null,this.enterScope(0)),t.body=this.parseBlock(!1),this.exitScope(),e.handler=this.finishNode(t,"CatchClause")}return e.finalizer=this.eat(K._finally)?this.parseBlock():null,!e.handler&&!e.finalizer&&this.raise(e.start,"Missing catch or finally clause"),this.finishNode(e,"TryStatement")};$t.parseVarStatement=function(e,t,n){return this.next(),this.parseVar(e,!1,t,n),this.semicolon(),this.finishNode(e,"VariableDeclaration")};$t.parseWhileStatement=function(e){return this.next(),e.test=this.parseParenExpression(),this.labels.push(hQ),e.body=this.parseStatement("while"),this.labels.pop(),this.finishNode(e,"WhileStatement")};$t.parseWithStatement=function(e){return this.strict&&this.raise(this.start,"'with' in strict mode"),this.next(),e.object=this.parseParenExpression(),e.body=this.parseStatement("with"),this.finishNode(e,"WithStatement")};$t.parseEmptyStatement=function(e){return this.next(),this.finishNode(e,"EmptyStatement")};$t.parseLabeledStatement=function(e,t,n,r){for(var i=0,s=this.labels;i<s.length;i+=1){var o=s[i];o.name===t&&this.raise(n.start,"Label '"+t+"' is already declared")}for(var a=this.type.isLoop?"loop":this.type===K._switch?"switch":null,u=this.labels.length-1;u>=0;u--){var l=this.labels[u];if(l.statementStart===e.start)l.statementStart=this.start,l.kind=a;else break}return this.labels.push({name:t,kind:a,statementStart:this.start}),e.body=this.parseStatement(r?r.indexOf("label")===-1?r+"label":r:"label"),this.labels.pop(),e.label=n,this.finishNode(e,"LabeledStatement")};$t.parseExpressionStatement=function(e,t){return e.expression=t,this.semicolon(),this.finishNode(e,"ExpressionStatement")};$t.parseBlock=function(e,t,n){for(e===void 0&&(e=!0),t===void 0&&(t=this.startNode()),t.body=[],this.expect(K.braceL),e&&this.enterScope(0);this.type!==K.braceR;){var r=this.parseStatement(null);t.body.push(r)}return n&&(this.strict=!1),this.next(),e&&this.exitScope(),this.finishNode(t,"BlockStatement")};$t.parseFor=function(e,t){return e.init=t,this.expect(K.semi),e.test=this.type===K.semi?null:this.parseExpression(),this.expect(K.semi),e.update=this.type===K.parenR?null:this.parseExpression(),this.expect(K.parenR),e.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(e,"ForStatement")};$t.parseForIn=function(e,t){var n=this.type===K._in;return this.next(),t.type==="VariableDeclaration"&&t.declarations[0].init!=null&&(!n||this.options.ecmaVersion<8||this.strict||t.kind!=="var"||t.declarations[0].id.type!=="Identifier")&&this.raise(t.start,(n?"for-in":"for-of")+" loop variable declaration may not have an initializer"),e.left=t,e.right=n?this.parseExpression():this.parseMaybeAssign(),this.expect(K.parenR),e.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(e,n?"ForInStatement":"ForOfStatement")};$t.parseVar=function(e,t,n,r){for(e.declarations=[],e.kind=n;;){var i=this.startNode();if(this.parseVarId(i,n),this.eat(K.eq)?i.init=this.parseMaybeAssign(t):!r&&n==="const"&&!(this.type===K._in||this.options.ecmaVersion>=6&&this.isContextual("of"))?this.unexpected():!r&&i.id.type!=="Identifier"&&!(t&&(this.type===K._in||this.isContextual("of")))?this.raise(this.lastTokEnd,"Complex binding patterns require an initialization value"):i.init=null,e.declarations.push(this.finishNode(i,"VariableDeclarator")),!this.eat(K.comma))break}return e};$t.parseVarId=function(e,t){e.id=this.parseBindingAtom(),this.checkLValPattern(e.id,t==="var"?dQ:og,!1)};var DC=1,Hz=2,FIe=4;$t.parseFunction=function(e,t,n,r,i){this.initFunction(e),(this.options.ecmaVersion>=9||this.options.ecmaVersion>=6&&!r)&&(this.type===K.star&&t&Hz&&this.unexpected(),e.generator=this.eat(K.star)),this.options.ecmaVersion>=8&&(e.async=!!r),t&DC&&(e.id=t&FIe&&this.type!==K.name?null:this.parseIdent(),e.id&&!(t&Hz)&&this.checkLValSimple(e.id,this.strict||e.generator||e.async?this.treatFunctionsAsVar?dQ:og:$Ie));var s=this.yieldPos,o=this.awaitPos,a=this.awaitIdentPos;return this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(fQ(e.async,e.generator)),t&DC||(e.id=this.type===K.name?this.parseIdent():null),this.parseFunctionParams(e),this.parseFunctionBody(e,n,!1,i),this.yieldPos=s,this.awaitPos=o,this.awaitIdentPos=a,this.finishNode(e,t&DC?"FunctionDeclaration":"FunctionExpression")};$t.parseFunctionParams=function(e){this.expect(K.parenL),e.params=this.parseBindingList(K.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams()};$t.parseClass=function(e,t){this.next();var n=this.strict;this.strict=!0,this.parseClassId(e,t),this.parseClassSuper(e);var r=this.enterClassBody(),i=this.startNode(),s=!1;for(i.body=[],this.expect(K.braceL);this.type!==K.braceR;){var o=this.parseClassElement(e.superClass!==null);o&&(i.body.push(o),o.type==="MethodDefinition"&&o.kind==="constructor"?(s&&this.raiseRecoverable(o.start,"Duplicate constructor in the same class"),s=!0):o.key&&o.key.type==="PrivateIdentifier"&&K_t(r,o)&&this.raiseRecoverable(o.key.start,"Identifier '#"+o.key.name+"' has already been declared"))}return this.strict=n,this.next(),e.body=this.finishNode(i,"ClassBody"),this.exitClassBody(),this.finishNode(e,t?"ClassDeclaration":"ClassExpression")};$t.parseClassElement=function(e){if(this.eat(K.semi))return null;var t=this.options.ecmaVersion,n=this.startNode(),r="",i=!1,s=!1,o="method",a=!1;if(this.eatContextual("static")){if(t>=13&&this.eat(K.braceL))return this.parseClassStaticBlock(n),n;this.isClassElementNameStart()||this.type===K.star?a=!0:r="static"}if(n.static=a,!r&&t>=8&&this.eatContextual("async")&&((this.isClassElementNameStart()||this.type===K.star)&&!this.canInsertSemicolon()?s=!0:r="async"),!r&&(t>=9||!s)&&this.eat(K.star)&&(i=!0),!r&&!s&&!i){var u=this.value;(this.eatContextual("get")||this.eatContextual("set"))&&(this.isClassElementNameStart()?o=u:r=u)}if(r?(n.computed=!1,n.key=this.startNodeAt(this.lastTokStart,this.lastTokStartLoc),n.key.name=r,this.finishNode(n.key,"Identifier")):this.parseClassElementName(n),t<13||this.type===K.parenL||o!=="method"||i||s){var l=!n.static&&x$(n,"constructor"),c=l&&e;l&&o!=="method"&&this.raise(n.key.start,"Constructor can't have get/set modifier"),n.kind=l?"constructor":o,this.parseClassMethod(n,i,s,c)}else this.parseClassField(n);return n};$t.isClassElementNameStart=function(){return this.type===K.name||this.type===K.privateId||this.type===K.num||this.type===K.string||this.type===K.bracketL||this.type.keyword};$t.parseClassElementName=function(e){this.type===K.privateId?(this.value==="constructor"&&this.raise(this.start,"Classes can't have an element named '#constructor'"),e.computed=!1,e.key=this.parsePrivateIdent()):this.parsePropertyName(e)};$t.parseClassMethod=function(e,t,n,r){var i=e.key;e.kind==="constructor"?(t&&this.raise(i.start,"Constructor can't be a generator"),n&&this.raise(i.start,"Constructor can't be an async method")):e.static&&x$(e,"prototype")&&this.raise(i.start,"Classes may not have a static property named prototype");var s=e.value=this.parseMethod(t,n,r);return e.kind==="get"&&s.params.length!==0&&this.raiseRecoverable(s.start,"getter should have no params"),e.kind==="set"&&s.params.length!==1&&this.raiseRecoverable(s.start,"setter should have exactly one param"),e.kind==="set"&&s.params[0].type==="RestElement"&&this.raiseRecoverable(s.params[0].start,"Setter cannot use rest params"),this.finishNode(e,"MethodDefinition")};$t.parseClassField=function(e){if(x$(e,"constructor")?this.raise(e.key.start,"Classes can't have a field named 'constructor'"):e.static&&x$(e,"prototype")&&this.raise(e.key.start,"Classes can't have a static field named 'prototype'"),this.eat(K.eq)){var t=this.currentThisScope(),n=t.inClassFieldInit;t.inClassFieldInit=!0,e.value=this.parseMaybeAssign(),t.inClassFieldInit=n}else e.value=null;return this.semicolon(),this.finishNode(e,"PropertyDefinition")};$t.parseClassStaticBlock=function(e){e.body=[];var t=this.labels;for(this.labels=[],this.enterScope(Bk|lQ);this.type!==K.braceR;){var n=this.parseStatement(null);e.body.push(n)}return this.next(),this.exitScope(),this.labels=t,this.finishNode(e,"StaticBlock")};$t.parseClassId=function(e,t){this.type===K.name?(e.id=this.parseIdent(),t&&this.checkLValSimple(e.id,og,!1)):(t===!0&&this.unexpected(),e.id=null)};$t.parseClassSuper=function(e){e.superClass=this.eat(K._extends)?this.parseExprSubscripts(null,!1):null};$t.enterClassBody=function(){var e={declared:Object.create(null),used:[]};return this.privateNameStack.push(e),e.declared};$t.exitClassBody=function(){var e=this.privateNameStack.pop(),t=e.declared,n=e.used;if(this.options.checkPrivateFields)for(var r=this.privateNameStack.length,i=r===0?null:this.privateNameStack[r-1],s=0;s<n.length;++s){var o=n[s];jk(t,o.name)||(i?i.used.push(o):this.raiseRecoverable(o.start,"Private field '#"+o.name+"' must be declared in an enclosing class"))}};function K_t(e,t){var n=t.key.name,r=e[n],i="true";return t.type==="MethodDefinition"&&(t.kind==="get"||t.kind==="set")&&(i=(t.static?"s":"i")+t.kind),r==="iget"&&i==="iset"||r==="iset"&&i==="iget"||r==="sget"&&i==="sset"||r==="sset"&&i==="sget"?(e[n]="true",!1):r?!0:(e[n]=i,!1)}function x$(e,t){var n=e.computed,r=e.key;return!n&&(r.type==="Identifier"&&r.name===t||r.type==="Literal"&&r.value===t)}$t.parseExportAllDeclaration=function(e,t){return this.options.ecmaVersion>=11&&(this.eatContextual("as")?(e.exported=this.parseModuleExportName(),this.checkExport(t,e.exported,this.lastTokStart)):e.exported=null),this.expectContextual("from"),this.type!==K.string&&this.unexpected(),e.source=this.parseExprAtom(),this.semicolon(),this.finishNode(e,"ExportAllDeclaration")};$t.parseExport=function(e,t){if(this.next(),this.eat(K.star))return this.parseExportAllDeclaration(e,t);if(this.eat(K._default))return this.checkExport(t,"default",this.lastTokStart),e.declaration=this.parseExportDefaultDeclaration(),this.finishNode(e,"ExportDefaultDeclaration");if(this.shouldParseExportStatement())e.declaration=this.parseExportDeclaration(e),e.declaration.type==="VariableDeclaration"?this.checkVariableExport(t,e.declaration.declarations):this.checkExport(t,e.declaration.id,e.declaration.id.start),e.specifiers=[],e.source=null;else{if(e.declaration=null,e.specifiers=this.parseExportSpecifiers(t),this.eatContextual("from"))this.type!==K.string&&this.unexpected(),e.source=this.parseExprAtom();else{for(var n=0,r=e.specifiers;n<r.length;n+=1){var i=r[n];this.checkUnreserved(i.local),this.checkLocalExport(i.local),i.local.type==="Literal"&&this.raise(i.local.start,"A string literal cannot be used as an exported binding without `from`.")}e.source=null}this.semicolon()}return this.finishNode(e,"ExportNamedDeclaration")};$t.parseExportDeclaration=function(e){return this.parseStatement(null)};$t.parseExportDefaultDeclaration=function(){var e;if(this.type===K._function||(e=this.isAsyncFunction())){var t=this.startNode();return this.next(),e&&this.next(),this.parseFunction(t,DC|FIe,!1,e)}else if(this.type===K._class){var n=this.startNode();return this.parseClass(n,"nullableID")}else{var r=this.parseMaybeAssign();return this.semicolon(),r}};$t.checkExport=function(e,t,n){e&&(typeof t!="string"&&(t=t.type==="Identifier"?t.name:t.value),jk(e,t)&&this.raiseRecoverable(n,"Duplicate export '"+t+"'"),e[t]=!0)};$t.checkPatternExport=function(e,t){var n=t.type;if(n==="Identifier")this.checkExport(e,t,t.start);else if(n==="ObjectPattern")for(var r=0,i=t.properties;r<i.length;r+=1){var s=i[r];this.checkPatternExport(e,s)}else if(n==="ArrayPattern")for(var o=0,a=t.elements;o<a.length;o+=1){var u=a[o];u&&this.checkPatternExport(e,u)}else n==="Property"?this.checkPatternExport(e,t.value):n==="AssignmentPattern"?this.checkPatternExport(e,t.left):n==="RestElement"&&this.checkPatternExport(e,t.argument)};$t.checkVariableExport=function(e,t){if(e)for(var n=0,r=t;n<r.length;n+=1){var i=r[n];this.checkPatternExport(e,i.id)}};$t.shouldParseExportStatement=function(){return this.type.keyword==="var"||this.type.keyword==="const"||this.type.keyword==="class"||this.type.keyword==="function"||this.isLet()||this.isAsyncFunction()};$t.parseExportSpecifier=function(e){var t=this.startNode();return t.local=this.parseModuleExportName(),t.exported=this.eatContextual("as")?this.parseModuleExportName():t.local,this.checkExport(e,t.exported,t.exported.start),this.finishNode(t,"ExportSpecifier")};$t.parseExportSpecifiers=function(e){var t=[],n=!0;for(this.expect(K.braceL);!this.eat(K.braceR);){if(n)n=!1;else if(this.expect(K.comma),this.afterTrailingComma(K.braceR))break;t.push(this.parseExportSpecifier(e))}return t};$t.parseImport=function(e){return this.next(),this.type===K.string?(e.specifiers=Y_t,e.source=this.parseExprAtom()):(e.specifiers=this.parseImportSpecifiers(),this.expectContextual("from"),e.source=this.type===K.string?this.parseExprAtom():this.unexpected()),this.semicolon(),this.finishNode(e,"ImportDeclaration")};$t.parseImportSpecifier=function(){var e=this.startNode();return e.imported=this.parseModuleExportName(),this.eatContextual("as")?e.local=this.parseIdent():(this.checkUnreserved(e.imported),e.local=e.imported),this.checkLValSimple(e.local,og),this.finishNode(e,"ImportSpecifier")};$t.parseImportDefaultSpecifier=function(){var e=this.startNode();return e.local=this.parseIdent(),this.checkLValSimple(e.local,og),this.finishNode(e,"ImportDefaultSpecifier")};$t.parseImportNamespaceSpecifier=function(){var e=this.startNode();return this.next(),this.expectContextual("as"),e.local=this.parseIdent(),this.checkLValSimple(e.local,og),this.finishNode(e,"ImportNamespaceSpecifier")};$t.parseImportSpecifiers=function(){var e=[],t=!0;if(this.type===K.name&&(e.push(this.parseImportDefaultSpecifier()),!this.eat(K.comma)))return e;if(this.type===K.star)return e.push(this.parseImportNamespaceSpecifier()),e;for(this.expect(K.braceL);!this.eat(K.braceR);){if(t)t=!1;else if(this.expect(K.comma),this.afterTrailingComma(K.braceR))break;e.push(this.parseImportSpecifier())}return e};$t.parseModuleExportName=function(){if(this.options.ecmaVersion>=13&&this.type===K.string){var e=this.parseLiteral(this.value);return V_t.test(e.value)&&this.raise(e.start,"An export name cannot include a lone surrogate."),e}return this.parseIdent(!0)};$t.adaptDirectivePrologue=function(e){for(var t=0;t<e.length&&this.isDirectiveCandidate(e[t]);++t)e[t].directive=e[t].expression.raw.slice(1,-1)};$t.isDirectiveCandidate=function(e){return this.options.ecmaVersion>=5&&e.type==="ExpressionStatement"&&e.expression.type==="Literal"&&typeof e.expression.value=="string"&&(this.input[e.start]==='"'||this.input[e.start]==="'")};var Qc=Bs.prototype;Qc.toAssignable=function(e,t,n){if(this.options.ecmaVersion>=6&&e)switch(e.type){case"Identifier":this.inAsync&&e.name==="await"&&this.raise(e.start,"Cannot use 'await' as identifier inside an async function");break;case"ObjectPattern":case"ArrayPattern":case"AssignmentPattern":case"RestElement":break;case"ObjectExpression":e.type="ObjectPattern",n&&this.checkPatternErrors(n,!0);for(var r=0,i=e.properties;r<i.length;r+=1){var s=i[r];this.toAssignable(s,t),s.type==="RestElement"&&(s.argument.type==="ArrayPattern"||s.argument.type==="ObjectPattern")&&this.raise(s.argument.start,"Unexpected token")}break;case"Property":e.kind!=="init"&&this.raise(e.key.start,"Object pattern can't contain getter or setter"),this.toAssignable(e.value,t);break;case"ArrayExpression":e.type="ArrayPattern",n&&this.checkPatternErrors(n,!0),this.toAssignableList(e.elements,t);break;case"SpreadElement":e.type="RestElement",this.toAssignable(e.argument,t),e.argument.type==="AssignmentPattern"&&this.raise(e.argument.start,"Rest elements cannot have a default value");break;case"AssignmentExpression":e.operator!=="="&&this.raise(e.left.end,"Only '=' operator can be used for specifying default value."),e.type="AssignmentPattern",delete e.operator,this.toAssignable(e.left,t);break;case"ParenthesizedExpression":this.toAssignable(e.expression,t,n);break;case"ChainExpression":this.raiseRecoverable(e.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":if(!t)break;default:this.raise(e.start,"Assigning to rvalue")}else n&&this.checkPatternErrors(n,!0);return e};Qc.toAssignableList=function(e,t){for(var n=e.length,r=0;r<n;r++){var i=e[r];i&&this.toAssignable(i,t)}if(n){var s=e[n-1];this.options.ecmaVersion===6&&t&&s&&s.type==="RestElement"&&s.argument.type!=="Identifier"&&this.unexpected(s.argument.start)}return e};Qc.parseSpread=function(e){var t=this.startNode();return this.next(),t.argument=this.parseMaybeAssign(!1,e),this.finishNode(t,"SpreadElement")};Qc.parseRestBinding=function(){var e=this.startNode();return this.next(),this.options.ecmaVersion===6&&this.type!==K.name&&this.unexpected(),e.argument=this.parseBindingAtom(),this.finishNode(e,"RestElement")};Qc.parseBindingAtom=function(){if(this.options.ecmaVersion>=6)switch(this.type){case K.bracketL:var e=this.startNode();return this.next(),e.elements=this.parseBindingList(K.bracketR,!0,!0),this.finishNode(e,"ArrayPattern");case K.braceL:return this.parseObj(!0)}return this.parseIdent()};Qc.parseBindingList=function(e,t,n,r){for(var i=[],s=!0;!this.eat(e);)if(s?s=!1:this.expect(K.comma),t&&this.type===K.comma)i.push(null);else{if(n&&this.afterTrailingComma(e))break;if(this.type===K.ellipsis){var o=this.parseRestBinding();this.parseBindingListItem(o),i.push(o),this.type===K.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element"),this.expect(e);break}else i.push(this.parseAssignableListItem(r))}return i};Qc.parseAssignableListItem=function(e){var t=this.parseMaybeDefault(this.start,this.startLoc);return this.parseBindingListItem(t),t};Qc.parseBindingListItem=function(e){return e};Qc.parseMaybeDefault=function(e,t,n){if(n=n||this.parseBindingAtom(),this.options.ecmaVersion<6||!this.eat(K.eq))return n;var r=this.startNodeAt(e,t);return r.left=n,r.right=this.parseMaybeAssign(),this.finishNode(r,"AssignmentPattern")};Qc.checkLValSimple=function(e,t,n){t===void 0&&(t=E$);var r=t!==E$;switch(e.type){case"Identifier":this.strict&&this.reservedWordsStrictBind.test(e.name)&&this.raiseRecoverable(e.start,(r?"Binding ":"Assigning to ")+e.name+" in strict mode"),r&&(t===og&&e.name==="let"&&this.raiseRecoverable(e.start,"let is disallowed as a lexically bound name"),n&&(jk(n,e.name)&&this.raiseRecoverable(e.start,"Argument name clash"),n[e.name]=!0),t!==LIe&&this.declareName(e.name,t,e.start));break;case"ChainExpression":this.raiseRecoverable(e.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":r&&this.raiseRecoverable(e.start,"Binding member expression");break;case"ParenthesizedExpression":return r&&this.raiseRecoverable(e.start,"Binding parenthesized expression"),this.checkLValSimple(e.expression,t,n);default:this.raise(e.start,(r?"Binding":"Assigning to")+" rvalue")}};Qc.checkLValPattern=function(e,t,n){switch(t===void 0&&(t=E$),e.type){case"ObjectPattern":for(var r=0,i=e.properties;r<i.length;r+=1){var s=i[r];this.checkLValInnerPattern(s,t,n)}break;case"ArrayPattern":for(var o=0,a=e.elements;o<a.length;o+=1){var u=a[o];u&&this.checkLValInnerPattern(u,t,n)}break;default:this.checkLValSimple(e,t,n)}};Qc.checkLValInnerPattern=function(e,t,n){switch(t===void 0&&(t=E$),e.type){case"Property":this.checkLValInnerPattern(e.value,t,n);break;case"AssignmentPattern":this.checkLValPattern(e.left,t,n);break;case"RestElement":this.checkLValPattern(e.argument,t,n);break;default:this.checkLValPattern(e,t,n)}};var af=function(t,n,r,i,s){this.token=t,this.isExpr=!!n,this.preserveSpace=!!r,this.override=i,this.generator=!!s},Ti={b_stat:new af("{",!1),b_expr:new af("{",!0),b_tmpl:new af("${",!1),p_stat:new af("(",!1),p_expr:new af("(",!0),q_tmpl:new af("`",!0,!0,function(e){return e.tryReadTemplateToken()}),f_stat:new af("function",!1),f_expr:new af("function",!0),f_expr_gen:new af("function",!0,!1,null,!0),f_gen:new af("function",!1,!1,null,!0)},IS=Bs.prototype;IS.initialContext=function(){return[Ti.b_stat]};IS.curContext=function(){return this.context[this.context.length-1]};IS.braceIsBlock=function(e){var t=this.curContext();return t===Ti.f_expr||t===Ti.f_stat?!0:e===K.colon&&(t===Ti.b_stat||t===Ti.b_expr)?!t.isExpr:e===K._return||e===K.name&&this.exprAllowed?Xc.test(this.input.slice(this.lastTokEnd,this.start)):e===K._else||e===K.semi||e===K.eof||e===K.parenR||e===K.arrow?!0:e===K.braceL?t===Ti.b_stat:e===K._var||e===K._const||e===K.name?!1:!this.exprAllowed};IS.inGeneratorContext=function(){for(var e=this.context.length-1;e>=1;e--){var t=this.context[e];if(t.token==="function")return t.generator}return!1};IS.updateContext=function(e){var t,n=this.type;n.keyword&&e===K.dot?this.exprAllowed=!1:(t=n.updateContext)?t.call(this,e):this.exprAllowed=n.beforeExpr};IS.overrideContext=function(e){this.curContext()!==e&&(this.context[this.context.length-1]=e)};K.parenR.updateContext=K.braceR.updateContext=function(){if(this.context.length===1){this.exprAllowed=!0;return}var e=this.context.pop();e===Ti.b_stat&&this.curContext().token==="function"&&(e=this.context.pop()),this.exprAllowed=!e.isExpr};K.braceL.updateContext=function(e){this.context.push(this.braceIsBlock(e)?Ti.b_stat:Ti.b_expr),this.exprAllowed=!0};K.dollarBraceL.updateContext=function(){this.context.push(Ti.b_tmpl),this.exprAllowed=!0};K.parenL.updateContext=function(e){var t=e===K._if||e===K._for||e===K._with||e===K._while;this.context.push(t?Ti.p_stat:Ti.p_expr),this.exprAllowed=!0};K.incDec.updateContext=function(){};K._function.updateContext=K._class.updateContext=function(e){e.beforeExpr&&e!==K._else&&!(e===K.semi&&this.curContext()!==Ti.p_stat)&&!(e===K._return&&Xc.test(this.input.slice(this.lastTokEnd,this.start)))&&!((e===K.colon||e===K.braceL)&&this.curContext()===Ti.b_stat)?this.context.push(Ti.f_expr):this.context.push(Ti.f_stat),this.exprAllowed=!1};K.colon.updateContext=function(){this.curContext().token==="function"&&this.context.pop(),this.exprAllowed=!0};K.backQuote.updateContext=function(){this.curContext()===Ti.q_tmpl?this.context.pop():this.context.push(Ti.q_tmpl),this.exprAllowed=!1};K.star.updateContext=function(e){if(e===K._function){var t=this.context.length-1;this.context[t]===Ti.f_expr?this.context[t]=Ti.f_expr_gen:this.context[t]=Ti.f_gen}this.exprAllowed=!0};K.name.updateContext=function(e){var t=!1;this.options.ecmaVersion>=6&&e!==K.dot&&(this.value==="of"&&!this.exprAllowed||this.value==="yield"&&this.inGeneratorContext())&&(t=!0),this.exprAllowed=t};var un=Bs.prototype;un.checkPropClash=function(e,t,n){if(!(this.options.ecmaVersion>=9&&e.type==="SpreadElement")&&!(this.options.ecmaVersion>=6&&(e.computed||e.method||e.shorthand))){var r=e.key,i;switch(r.type){case"Identifier":i=r.name;break;case"Literal":i=String(r.value);break;default:return}var s=e.kind;if(this.options.ecmaVersion>=6){i==="__proto__"&&s==="init"&&(t.proto&&(n?n.doubleProto<0&&(n.doubleProto=r.start):this.raiseRecoverable(r.start,"Redefinition of __proto__ property")),t.proto=!0);return}i="$"+i;var o=t[i];if(o){var a;s==="init"?a=this.strict&&o.init||o.get||o.set:a=o.init||o[s],a&&this.raiseRecoverable(r.start,"Redefinition of property")}else o=t[i]={init:!1,get:!1,set:!1};o[s]=!0}};un.parseExpression=function(e,t){var n=this.start,r=this.startLoc,i=this.parseMaybeAssign(e,t);if(this.type===K.comma){var s=this.startNodeAt(n,r);for(s.expressions=[i];this.eat(K.comma);)s.expressions.push(this.parseMaybeAssign(e,t));return this.finishNode(s,"SequenceExpression")}return i};un.parseMaybeAssign=function(e,t,n){if(this.isContextual("yield")){if(this.inGenerator)return this.parseYield(e);this.exprAllowed=!1}var r=!1,i=-1,s=-1,o=-1;t?(i=t.parenthesizedAssign,s=t.trailingComma,o=t.doubleProto,t.parenthesizedAssign=t.trailingComma=-1):(t=new l4,r=!0);var a=this.start,u=this.startLoc;(this.type===K.parenL||this.type===K.name)&&(this.potentialArrowAt=this.start,this.potentialArrowInForAwait=e==="await");var l=this.parseMaybeConditional(e,t);if(n&&(l=n.call(this,l,a,u)),this.type.isAssign){var c=this.startNodeAt(a,u);return c.operator=this.value,this.type===K.eq&&(l=this.toAssignable(l,!1,t)),r||(t.parenthesizedAssign=t.trailingComma=t.doubleProto=-1),t.shorthandAssign>=l.start&&(t.shorthandAssign=-1),this.type===K.eq?this.checkLValPattern(l):this.checkLValSimple(l),c.left=l,this.next(),c.right=this.parseMaybeAssign(e),o>-1&&(t.doubleProto=o),this.finishNode(c,"AssignmentExpression")}else r&&this.checkExpressionErrors(t,!0);return i>-1&&(t.parenthesizedAssign=i),s>-1&&(t.trailingComma=s),l};un.parseMaybeConditional=function(e,t){var n=this.start,r=this.startLoc,i=this.parseExprOps(e,t);if(this.checkExpressionErrors(t))return i;if(this.eat(K.question)){var s=this.startNodeAt(n,r);return s.test=i,s.consequent=this.parseMaybeAssign(),this.expect(K.colon),s.alternate=this.parseMaybeAssign(e),this.finishNode(s,"ConditionalExpression")}return i};un.parseExprOps=function(e,t){var n=this.start,r=this.startLoc,i=this.parseMaybeUnary(t,!1,!1,e);return this.checkExpressionErrors(t)||i.start===n&&i.type==="ArrowFunctionExpression"?i:this.parseExprOp(i,n,r,-1,e)};un.parseExprOp=function(e,t,n,r,i){var s=this.type.binop;if(s!=null&&(!i||this.type!==K._in)&&s>r){var o=this.type===K.logicalOR||this.type===K.logicalAND,a=this.type===K.coalesce;a&&(s=K.logicalAND.binop);var u=this.value;this.next();var l=this.start,c=this.startLoc,f=this.parseExprOp(this.parseMaybeUnary(null,!1,!1,i),l,c,s,i),d=this.buildBinary(t,n,e,f,u,o||a);return(o&&this.type===K.coalesce||a&&(this.type===K.logicalOR||this.type===K.logicalAND))&&this.raiseRecoverable(this.start,"Logical expressions and coalesce expressions cannot be mixed. Wrap either by parentheses"),this.parseExprOp(d,t,n,r,i)}return e};un.buildBinary=function(e,t,n,r,i,s){r.type==="PrivateIdentifier"&&this.raise(r.start,"Private identifier can only be left side of binary expression");var o=this.startNodeAt(e,t);return o.left=n,o.operator=i,o.right=r,this.finishNode(o,s?"LogicalExpression":"BinaryExpression")};un.parseMaybeUnary=function(e,t,n,r){var i=this.start,s=this.startLoc,o;if(this.isContextual("await")&&this.canAwait)o=this.parseAwait(r),t=!0;else if(this.type.prefix){var a=this.startNode(),u=this.type===K.incDec;a.operator=this.value,a.prefix=!0,this.next(),a.argument=this.parseMaybeUnary(null,!0,u,r),this.checkExpressionErrors(e,!0),u?this.checkLValSimple(a.argument):this.strict&&a.operator==="delete"&&a.argument.type==="Identifier"?this.raiseRecoverable(a.start,"Deleting local variable in strict mode"):a.operator==="delete"&&jIe(a.argument)?this.raiseRecoverable(a.start,"Private fields can not be deleted"):t=!0,o=this.finishNode(a,u?"UpdateExpression":"UnaryExpression")}else if(!t&&this.type===K.privateId)(r||this.privateNameStack.length===0)&&this.options.checkPrivateFields&&this.unexpected(),o=this.parsePrivateIdent(),this.type!==K._in&&this.unexpected();else{if(o=this.parseExprSubscripts(e,r),this.checkExpressionErrors(e))return o;for(;this.type.postfix&&!this.canInsertSemicolon();){var l=this.startNodeAt(i,s);l.operator=this.value,l.prefix=!1,l.argument=o,this.checkLValSimple(o),this.next(),o=this.finishNode(l,"UpdateExpression")}}if(!n&&this.eat(K.starstar))if(t)this.unexpected(this.lastTokStart);else return this.buildBinary(i,s,o,this.parseMaybeUnary(null,!1,!1,r),"**",!1);else return o};function jIe(e){return e.type==="MemberExpression"&&e.property.type==="PrivateIdentifier"||e.type==="ChainExpression"&&jIe(e.expression)}un.parseExprSubscripts=function(e,t){var n=this.start,r=this.startLoc,i=this.parseExprAtom(e,t);if(i.type==="ArrowFunctionExpression"&&this.input.slice(this.lastTokStart,this.lastTokEnd)!==")")return i;var s=this.parseSubscripts(i,n,r,!1,t);return e&&s.type==="MemberExpression"&&(e.parenthesizedAssign>=s.start&&(e.parenthesizedAssign=-1),e.parenthesizedBind>=s.start&&(e.parenthesizedBind=-1),e.trailingComma>=s.start&&(e.trailingComma=-1)),s};un.parseSubscripts=function(e,t,n,r,i){for(var s=this.options.ecmaVersion>=8&&e.type==="Identifier"&&e.name==="async"&&this.lastTokEnd===e.end&&!this.canInsertSemicolon()&&e.end-e.start===5&&this.potentialArrowAt===e.start,o=!1;;){var a=this.parseSubscript(e,t,n,r,s,o,i);if(a.optional&&(o=!0),a===e||a.type==="ArrowFunctionExpression"){if(o){var u=this.startNodeAt(t,n);u.expression=a,a=this.finishNode(u,"ChainExpression")}return a}e=a}};un.shouldParseAsyncArrow=function(){return!this.canInsertSemicolon()&&this.eat(K.arrow)};un.parseSubscriptAsyncArrow=function(e,t,n,r){return this.parseArrowExpression(this.startNodeAt(e,t),n,!0,r)};un.parseSubscript=function(e,t,n,r,i,s,o){var a=this.options.ecmaVersion>=11,u=a&&this.eat(K.questionDot);r&&u&&this.raise(this.lastTokStart,"Optional chaining cannot appear in the callee of new expressions");var l=this.eat(K.bracketL);if(l||u&&this.type!==K.parenL&&this.type!==K.backQuote||this.eat(K.dot)){var c=this.startNodeAt(t,n);c.object=e,l?(c.property=this.parseExpression(),this.expect(K.bracketR)):this.type===K.privateId&&e.type!=="Super"?c.property=this.parsePrivateIdent():c.property=this.parseIdent(this.options.allowReserved!=="never"),c.computed=!!l,a&&(c.optional=u),e=this.finishNode(c,"MemberExpression")}else if(!r&&this.eat(K.parenL)){var f=new l4,d=this.yieldPos,h=this.awaitPos,p=this.awaitIdentPos;this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0;var m=this.parseExprList(K.parenR,this.options.ecmaVersion>=8,!1,f);if(i&&!u&&this.shouldParseAsyncArrow())return this.checkPatternErrors(f,!1),this.checkYieldAwaitInDefaultParams(),this.awaitIdentPos>0&&this.raise(this.awaitIdentPos,"Cannot use 'await' as identifier inside an async function"),this.yieldPos=d,this.awaitPos=h,this.awaitIdentPos=p,this.parseSubscriptAsyncArrow(t,n,m,o);this.checkExpressionErrors(f,!0),this.yieldPos=d||this.yieldPos,this.awaitPos=h||this.awaitPos,this.awaitIdentPos=p||this.awaitIdentPos;var g=this.startNodeAt(t,n);g.callee=e,g.arguments=m,a&&(g.optional=u),e=this.finishNode(g,"CallExpression")}else if(this.type===K.backQuote){(u||s)&&this.raise(this.start,"Optional chaining cannot appear in the tag of tagged template expressions");var y=this.startNodeAt(t,n);y.tag=e,y.quasi=this.parseTemplate({isTagged:!0}),e=this.finishNode(y,"TaggedTemplateExpression")}return e};un.parseExprAtom=function(e,t,n){this.type===K.slash&&this.readRegexp();var r,i=this.potentialArrowAt===this.start;switch(this.type){case K._super:return this.allowSuper||this.raise(this.start,"'super' keyword outside a method"),r=this.startNode(),this.next(),this.type===K.parenL&&!this.allowDirectSuper&&this.raise(r.start,"super() call outside constructor of a subclass"),this.type!==K.dot&&this.type!==K.bracketL&&this.type!==K.parenL&&this.unexpected(),this.finishNode(r,"Super");case K._this:return r=this.startNode(),this.next(),this.finishNode(r,"ThisExpression");case K.name:var s=this.start,o=this.startLoc,a=this.containsEsc,u=this.parseIdent(!1);if(this.options.ecmaVersion>=8&&!a&&u.name==="async"&&!this.canInsertSemicolon()&&this.eat(K._function))return this.overrideContext(Ti.f_expr),this.parseFunction(this.startNodeAt(s,o),0,!1,!0,t);if(i&&!this.canInsertSemicolon()){if(this.eat(K.arrow))return this.parseArrowExpression(this.startNodeAt(s,o),[u],!1,t);if(this.options.ecmaVersion>=8&&u.name==="async"&&this.type===K.name&&!a&&(!this.potentialArrowInForAwait||this.value!=="of"||this.containsEsc))return u=this.parseIdent(!1),(this.canInsertSemicolon()||!this.eat(K.arrow))&&this.unexpected(),this.parseArrowExpression(this.startNodeAt(s,o),[u],!0,t)}return u;case K.regexp:var l=this.value;return r=this.parseLiteral(l.value),r.regex={pattern:l.pattern,flags:l.flags},r;case K.num:case K.string:return this.parseLiteral(this.value);case K._null:case K._true:case K._false:return r=this.startNode(),r.value=this.type===K._null?null:this.type===K._true,r.raw=this.type.keyword,this.next(),this.finishNode(r,"Literal");case K.parenL:var c=this.start,f=this.parseParenAndDistinguishExpression(i,t);return e&&(e.parenthesizedAssign<0&&!this.isSimpleAssignTarget(f)&&(e.parenthesizedAssign=c),e.parenthesizedBind<0&&(e.parenthesizedBind=c)),f;case K.bracketL:return r=this.startNode(),this.next(),r.elements=this.parseExprList(K.bracketR,!0,!0,e),this.finishNode(r,"ArrayExpression");case K.braceL:return this.overrideContext(Ti.b_expr),this.parseObj(!1,e);case K._function:return r=this.startNode(),this.next(),this.parseFunction(r,0);case K._class:return this.parseClass(this.startNode(),!1);case K._new:return this.parseNew();case K.backQuote:return this.parseTemplate();case K._import:return this.options.ecmaVersion>=11?this.parseExprImport(n):this.unexpected();default:return this.parseExprAtomDefault()}};un.parseExprAtomDefault=function(){this.unexpected()};un.parseExprImport=function(e){var t=this.startNode();if(this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword import"),this.next(),this.type===K.parenL&&!e)return this.parseDynamicImport(t);if(this.type===K.dot){var n=this.startNodeAt(t.start,t.loc&&t.loc.start);return n.name="import",t.meta=this.finishNode(n,"Identifier"),this.parseImportMeta(t)}else this.unexpected()};un.parseDynamicImport=function(e){if(this.next(),e.source=this.parseMaybeAssign(),!this.eat(K.parenR)){var t=this.start;this.eat(K.comma)&&this.eat(K.parenR)?this.raiseRecoverable(t,"Trailing comma is not allowed in import()"):this.unexpected(t)}return this.finishNode(e,"ImportExpression")};un.parseImportMeta=function(e){this.next();var t=this.containsEsc;return e.property=this.parseIdent(!0),e.property.name!=="meta"&&this.raiseRecoverable(e.property.start,"The only valid meta property for import is 'import.meta'"),t&&this.raiseRecoverable(e.start,"'import.meta' must not contain escaped characters"),this.options.sourceType!=="module"&&!this.options.allowImportExportEverywhere&&this.raiseRecoverable(e.start,"Cannot use 'import.meta' outside a module"),this.finishNode(e,"MetaProperty")};un.parseLiteral=function(e){var t=this.startNode();return t.value=e,t.raw=this.input.slice(this.start,this.end),t.raw.charCodeAt(t.raw.length-1)===110&&(t.bigint=t.raw.slice(0,-1).replace(/_/g,"")),this.next(),this.finishNode(t,"Literal")};un.parseParenExpression=function(){this.expect(K.parenL);var e=this.parseExpression();return this.expect(K.parenR),e};un.shouldParseArrow=function(e){return!this.canInsertSemicolon()};un.parseParenAndDistinguishExpression=function(e,t){var n=this.start,r=this.startLoc,i,s=this.options.ecmaVersion>=8;if(this.options.ecmaVersion>=6){this.next();var o=this.start,a=this.startLoc,u=[],l=!0,c=!1,f=new l4,d=this.yieldPos,h=this.awaitPos,p;for(this.yieldPos=0,this.awaitPos=0;this.type!==K.parenR;)if(l?l=!1:this.expect(K.comma),s&&this.afterTrailingComma(K.parenR,!0)){c=!0;break}else if(this.type===K.ellipsis){p=this.start,u.push(this.parseParenItem(this.parseRestBinding())),this.type===K.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element");break}else u.push(this.parseMaybeAssign(!1,f,this.parseParenItem));var m=this.lastTokEnd,g=this.lastTokEndLoc;if(this.expect(K.parenR),e&&this.shouldParseArrow(u)&&this.eat(K.arrow))return this.checkPatternErrors(f,!1),this.checkYieldAwaitInDefaultParams(),this.yieldPos=d,this.awaitPos=h,this.parseParenArrowList(n,r,u,t);(!u.length||c)&&this.unexpected(this.lastTokStart),p&&this.unexpected(p),this.checkExpressionErrors(f,!0),this.yieldPos=d||this.yieldPos,this.awaitPos=h||this.awaitPos,u.length>1?(i=this.startNodeAt(o,a),i.expressions=u,this.finishNodeAt(i,"SequenceExpression",m,g)):i=u[0]}else i=this.parseParenExpression();if(this.options.preserveParens){var y=this.startNodeAt(n,r);return y.expression=i,this.finishNode(y,"ParenthesizedExpression")}else return i};un.parseParenItem=function(e){return e};un.parseParenArrowList=function(e,t,n,r){return this.parseArrowExpression(this.startNodeAt(e,t),n,!1,r)};var X_t=[];un.parseNew=function(){this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword new");var e=this.startNode();if(this.next(),this.options.ecmaVersion>=6&&this.type===K.dot){var t=this.startNodeAt(e.start,e.loc&&e.loc.start);t.name="new",e.meta=this.finishNode(t,"Identifier"),this.next();var n=this.containsEsc;return e.property=this.parseIdent(!0),e.property.name!=="target"&&this.raiseRecoverable(e.property.start,"The only valid meta property for new is 'new.target'"),n&&this.raiseRecoverable(e.start,"'new.target' must not contain escaped characters"),this.allowNewDotTarget||this.raiseRecoverable(e.start,"'new.target' can only be used in functions and class static block"),this.finishNode(e,"MetaProperty")}var r=this.start,i=this.startLoc;return e.callee=this.parseSubscripts(this.parseExprAtom(null,!1,!0),r,i,!0,!1),this.eat(K.parenL)?e.arguments=this.parseExprList(K.parenR,this.options.ecmaVersion>=8,!1):e.arguments=X_t,this.finishNode(e,"NewExpression")};un.parseTemplateElement=function(e){var t=e.isTagged,n=this.startNode();return this.type===K.invalidTemplate?(t||this.raiseRecoverable(this.start,"Bad escape sequence in untagged template literal"),n.value={raw:this.value,cooked:null}):n.value={raw:this.input.slice(this.start,this.end).replace(/\r\n?/g,`
`),cooked:this.value},this.next(),n.tail=this.type===K.backQuote,this.finishNode(n,"TemplateElement")};un.parseTemplate=function(e){e===void 0&&(e={});var t=e.isTagged;t===void 0&&(t=!1);var n=this.startNode();this.next(),n.expressions=[];var r=this.parseTemplateElement({isTagged:t});for(n.quasis=[r];!r.tail;)this.type===K.eof&&this.raise(this.pos,"Unterminated template literal"),this.expect(K.dollarBraceL),n.expressions.push(this.parseExpression()),this.expect(K.braceR),n.quasis.push(r=this.parseTemplateElement({isTagged:t}));return this.next(),this.finishNode(n,"TemplateLiteral")};un.isAsyncProp=function(e){return!e.computed&&e.key.type==="Identifier"&&e.key.name==="async"&&(this.type===K.name||this.type===K.num||this.type===K.string||this.type===K.bracketL||this.type.keyword||this.options.ecmaVersion>=9&&this.type===K.star)&&!Xc.test(this.input.slice(this.lastTokEnd,this.start))};un.parseObj=function(e,t){var n=this.startNode(),r=!0,i={};for(n.properties=[],this.next();!this.eat(K.braceR);){if(r)r=!1;else if(this.expect(K.comma),this.options.ecmaVersion>=5&&this.afterTrailingComma(K.braceR))break;var s=this.parseProperty(e,t);e||this.checkPropClash(s,i,t),n.properties.push(s)}return this.finishNode(n,e?"ObjectPattern":"ObjectExpression")};un.parseProperty=function(e,t){var n=this.startNode(),r,i,s,o;if(this.options.ecmaVersion>=9&&this.eat(K.ellipsis))return e?(n.argument=this.parseIdent(!1),this.type===K.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element"),this.finishNode(n,"RestElement")):(n.argument=this.parseMaybeAssign(!1,t),this.type===K.comma&&t&&t.trailingComma<0&&(t.trailingComma=this.start),this.finishNode(n,"SpreadElement"));this.options.ecmaVersion>=6&&(n.method=!1,n.shorthand=!1,(e||t)&&(s=this.start,o=this.startLoc),e||(r=this.eat(K.star)));var a=this.containsEsc;return this.parsePropertyName(n),!e&&!a&&this.options.ecmaVersion>=8&&!r&&this.isAsyncProp(n)?(i=!0,r=this.options.ecmaVersion>=9&&this.eat(K.star),this.parsePropertyName(n)):i=!1,this.parsePropertyValue(n,e,r,i,s,o,t,a),this.finishNode(n,"Property")};un.parseGetterSetter=function(e){e.kind=e.key.name,this.parsePropertyName(e),e.value=this.parseMethod(!1);var t=e.kind==="get"?0:1;if(e.value.params.length!==t){var n=e.value.start;e.kind==="get"?this.raiseRecoverable(n,"getter should have no params"):this.raiseRecoverable(n,"setter should have exactly one param")}else e.kind==="set"&&e.value.params[0].type==="RestElement"&&this.raiseRecoverable(e.value.params[0].start,"Setter cannot use rest params")};un.parsePropertyValue=function(e,t,n,r,i,s,o,a){(n||r)&&this.type===K.colon&&this.unexpected(),this.eat(K.colon)?(e.value=t?this.parseMaybeDefault(this.start,this.startLoc):this.parseMaybeAssign(!1,o),e.kind="init"):this.options.ecmaVersion>=6&&this.type===K.parenL?(t&&this.unexpected(),e.kind="init",e.method=!0,e.value=this.parseMethod(n,r)):!t&&!a&&this.options.ecmaVersion>=5&&!e.computed&&e.key.type==="Identifier"&&(e.key.name==="get"||e.key.name==="set")&&this.type!==K.comma&&this.type!==K.braceR&&this.type!==K.eq?((n||r)&&this.unexpected(),this.parseGetterSetter(e)):this.options.ecmaVersion>=6&&!e.computed&&e.key.type==="Identifier"?((n||r)&&this.unexpected(),this.checkUnreserved(e.key),e.key.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=i),e.kind="init",t?e.value=this.parseMaybeDefault(i,s,this.copyNode(e.key)):this.type===K.eq&&o?(o.shorthandAssign<0&&(o.shorthandAssign=this.start),e.value=this.parseMaybeDefault(i,s,this.copyNode(e.key))):e.value=this.copyNode(e.key),e.shorthand=!0):this.unexpected()};un.parsePropertyName=function(e){if(this.options.ecmaVersion>=6){if(this.eat(K.bracketL))return e.computed=!0,e.key=this.parseMaybeAssign(),this.expect(K.bracketR),e.key;e.computed=!1}return e.key=this.type===K.num||this.type===K.string?this.parseExprAtom():this.parseIdent(this.options.allowReserved!=="never")};un.initFunction=function(e){e.id=null,this.options.ecmaVersion>=6&&(e.generator=e.expression=!1),this.options.ecmaVersion>=8&&(e.async=!1)};un.parseMethod=function(e,t,n){var r=this.startNode(),i=this.yieldPos,s=this.awaitPos,o=this.awaitIdentPos;return this.initFunction(r),this.options.ecmaVersion>=6&&(r.generator=e),this.options.ecmaVersion>=8&&(r.async=!!t),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(fQ(t,r.generator)|lQ|(n?OIe:0)),this.expect(K.parenL),r.params=this.parseBindingList(K.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams(),this.parseFunctionBody(r,!1,!0,!1),this.yieldPos=i,this.awaitPos=s,this.awaitIdentPos=o,this.finishNode(r,"FunctionExpression")};un.parseArrowExpression=function(e,t,n,r){var i=this.yieldPos,s=this.awaitPos,o=this.awaitIdentPos;return this.enterScope(fQ(n,!1)|PIe),this.initFunction(e),this.options.ecmaVersion>=8&&(e.async=!!n),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,e.params=this.toAssignableList(t,!0),this.parseFunctionBody(e,!0,!1,r),this.yieldPos=i,this.awaitPos=s,this.awaitIdentPos=o,this.finishNode(e,"ArrowFunctionExpression")};un.parseFunctionBody=function(e,t,n,r){var i=t&&this.type!==K.braceL,s=this.strict,o=!1;if(i)e.body=this.parseMaybeAssign(r),e.expression=!0,this.checkParams(e,!1);else{var a=this.options.ecmaVersion>=7&&!this.isSimpleParamList(e.params);(!s||a)&&(o=this.strictDirective(this.end),o&&a&&this.raiseRecoverable(e.start,"Illegal 'use strict' directive in function with non-simple parameter list"));var u=this.labels;this.labels=[],o&&(this.strict=!0),this.checkParams(e,!s&&!o&&!t&&!n&&this.isSimpleParamList(e.params)),this.strict&&e.id&&this.checkLValSimple(e.id,LIe),e.body=this.parseBlock(!1,void 0,o&&!s),e.expression=!1,this.adaptDirectivePrologue(e.body.body),this.labels=u}this.exitScope()};un.isSimpleParamList=function(e){for(var t=0,n=e;t<n.length;t+=1){var r=n[t];if(r.type!=="Identifier")return!1}return!0};un.checkParams=function(e,t){for(var n=Object.create(null),r=0,i=e.params;r<i.length;r+=1){var s=i[r];this.checkLValInnerPattern(s,dQ,t?null:n)}};un.parseExprList=function(e,t,n,r){for(var i=[],s=!0;!this.eat(e);){if(s)s=!1;else if(this.expect(K.comma),t&&this.afterTrailingComma(e))break;var o=void 0;n&&this.type===K.comma?o=null:this.type===K.ellipsis?(o=this.parseSpread(r),r&&this.type===K.comma&&r.trailingComma<0&&(r.trailingComma=this.start)):o=this.parseMaybeAssign(!1,r),i.push(o)}return i};un.checkUnreserved=function(e){var t=e.start,n=e.end,r=e.name;if(this.inGenerator&&r==="yield"&&this.raiseRecoverable(t,"Cannot use 'yield' as identifier inside a generator"),this.inAsync&&r==="await"&&this.raiseRecoverable(t,"Cannot use 'await' as identifier inside an async function"),this.currentThisScope().inClassFieldInit&&r==="arguments"&&this.raiseRecoverable(t,"Cannot use 'arguments' in class field initializer"),this.inClassStaticBlock&&(r==="arguments"||r==="await")&&this.raise(t,"Cannot use "+r+" in class static initialization block"),this.keywords.test(r)&&this.raise(t,"Unexpected keyword '"+r+"'"),!(this.options.ecmaVersion<6&&this.input.slice(t,n).indexOf("\\")!==-1)){var i=this.strict?this.reservedWordsStrict:this.reservedWords;i.test(r)&&(!this.inAsync&&r==="await"&&this.raiseRecoverable(t,"Cannot use keyword 'await' outside an async function"),this.raiseRecoverable(t,"The keyword '"+r+"' is reserved"))}};un.parseIdent=function(e){var t=this.parseIdentNode();return this.next(!!e),this.finishNode(t,"Identifier"),e||(this.checkUnreserved(t),t.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=t.start)),t};un.parseIdentNode=function(){var e=this.startNode();return this.type===K.name?e.name=this.value:this.type.keyword?(e.name=this.type.keyword,(e.name==="class"||e.name==="function")&&(this.lastTokEnd!==this.lastTokStart+1||this.input.charCodeAt(this.lastTokStart)!==46)&&this.context.pop(),this.type=K.name):this.unexpected(),e};un.parsePrivateIdent=function(){var e=this.startNode();return this.type===K.privateId?e.name=this.value:this.unexpected(),this.next(),this.finishNode(e,"PrivateIdentifier"),this.options.checkPrivateFields&&(this.privateNameStack.length===0?this.raise(e.start,"Private field '#"+e.name+"' must be declared in an enclosing class"):this.privateNameStack[this.privateNameStack.length-1].used.push(e)),e};un.parseYield=function(e){this.yieldPos||(this.yieldPos=this.start);var t=this.startNode();return this.next(),this.type===K.semi||this.canInsertSemicolon()||this.type!==K.star&&!this.type.startsExpr?(t.delegate=!1,t.argument=null):(t.delegate=this.eat(K.star),t.argument=this.parseMaybeAssign(e)),this.finishNode(t,"YieldExpression")};un.parseAwait=function(e){this.awaitPos||(this.awaitPos=this.start);var t=this.startNode();return this.next(),t.argument=this.parseMaybeUnary(null,!0,!1,e),this.finishNode(t,"AwaitExpression")};var S$=Bs.prototype;S$.raise=function(e,t){var n=RIe(this.input,e);t+=" ("+n.line+":"+n.column+")";var r=new SyntaxError(t);throw r.pos=e,r.loc=n,r.raisedAt=this.pos,r};S$.raiseRecoverable=S$.raise;S$.curPosition=function(){if(this.options.locations)return new oI(this.curLine,this.pos-this.lineStart)};var qy=Bs.prototype,Q_t=function(t){this.flags=t,this.var=[],this.lexical=[],this.functions=[],this.inClassFieldInit=!1};qy.enterScope=function(e){this.scopeStack.push(new Q_t(e))};qy.exitScope=function(){this.scopeStack.pop()};qy.treatFunctionsAsVarInScope=function(e){return e.flags&AS||!this.inModule&&e.flags&aI};qy.declareName=function(e,t,n){var r=!1;if(t===og){var i=this.currentScope();r=i.lexical.indexOf(e)>-1||i.functions.indexOf(e)>-1||i.var.indexOf(e)>-1,i.lexical.push(e),this.inModule&&i.flags&aI&&delete this.undefinedExports[e]}else if(t===MIe){var s=this.currentScope();s.lexical.push(e)}else if(t===$Ie){var o=this.currentScope();this.treatFunctionsAsVar?r=o.lexical.indexOf(e)>-1:r=o.lexical.indexOf(e)>-1||o.var.indexOf(e)>-1,o.functions.push(e)}else for(var a=this.scopeStack.length-1;a>=0;--a){var u=this.scopeStack[a];if(u.lexical.indexOf(e)>-1&&!(u.flags&DIe&&u.lexical[0]===e)||!this.treatFunctionsAsVarInScope(u)&&u.functions.indexOf(e)>-1){r=!0;break}if(u.var.push(e),this.inModule&&u.flags&aI&&delete this.undefinedExports[e],u.flags&cQ)break}r&&this.raiseRecoverable(n,"Identifier '"+e+"' has already been declared")};qy.checkLocalExport=function(e){this.scopeStack[0].lexical.indexOf(e.name)===-1&&this.scopeStack[0].var.indexOf(e.name)===-1&&(this.undefinedExports[e.name]=e)};qy.currentScope=function(){return this.scopeStack[this.scopeStack.length-1]};qy.currentVarScope=function(){for(var e=this.scopeStack.length-1;;e--){var t=this.scopeStack[e];if(t.flags&cQ)return t}};qy.currentThisScope=function(){for(var e=this.scopeStack.length-1;;e--){var t=this.scopeStack[e];if(t.flags&cQ&&!(t.flags&PIe))return t}};var c4=function(t,n,r){this.type="",this.start=n,this.end=0,t.options.locations&&(this.loc=new u4(t,r)),t.options.directSourceFile&&(this.sourceFile=t.options.directSourceFile),t.options.ranges&&(this.range=[n,0])},Uk=Bs.prototype;Uk.startNode=function(){return new c4(this,this.start,this.startLoc)};Uk.startNodeAt=function(e,t){return new c4(this,e,t)};function BIe(e,t,n,r){return e.type=t,e.end=n,this.options.locations&&(e.loc.end=r),this.options.ranges&&(e.range[1]=n),e}Uk.finishNode=function(e,t){return BIe.call(this,e,t,this.lastTokEnd,this.lastTokEndLoc)};Uk.finishNodeAt=function(e,t,n,r){return BIe.call(this,e,t,n,r)};Uk.copyNode=function(e){var t=new c4(this,e.start,this.startLoc);for(var n in e)t[n]=e[n];return t};var UIe="ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS",zIe=UIe+" Extended_Pictographic",VIe=zIe,HIe=VIe+" EBase EComp EMod EPres ExtPict",qIe=HIe,J_t=qIe,Z_t={9:UIe,10:zIe,11:VIe,12:HIe,13:qIe,14:J_t},ewt="Basic_Emoji Emoji_Keycap_Sequence RGI_Emoji_Modifier_Sequence RGI_Emoji_Flag_Sequence RGI_Emoji_Tag_Sequence RGI_Emoji_ZWJ_Sequence RGI_Emoji",twt={9:"",10:"",11:"",12:"",13:"",14:ewt},gfe="Cased_Letter LC Close_Punctuation Pe Connector_Punctuation Pc Control Cc cntrl Currency_Symbol Sc Dash_Punctuation Pd Decimal_Number Nd digit Enclosing_Mark Me Final_Punctuation Pf Format Cf Initial_Punctuation Pi Letter L Letter_Number Nl Line_Separator Zl Lowercase_Letter Ll Mark M Combining_Mark Math_Symbol Sm Modifier_Letter Lm Modifier_Symbol Sk Nonspacing_Mark Mn Number N Open_Punctuation Ps Other C Other_Letter Lo Other_Number No Other_Punctuation Po Other_Symbol So Paragraph_Separator Zp Private_Use Co Punctuation P punct Separator Z Space_Separator Zs Spacing_Mark Mc Surrogate Cs Symbol S Titlecase_Letter Lt Unassigned Cn Uppercase_Letter Lu",WIe="Adlam Adlm Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb",GIe=WIe+" Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd",YIe=GIe+" Elymaic Elym Nandinagari Nand Nyiakeng_Puachue_Hmong Hmnp Wancho Wcho",KIe=YIe+" Chorasmian Chrs Diak Dives_Akuru Khitan_Small_Script Kits Yezi Yezidi",XIe=KIe+" Cypro_Minoan Cpmn Old_Uyghur Ougr Tangsa Tnsa Toto Vithkuqi Vith",nwt=XIe+" Hrkt Katakana_Or_Hiragana Kawi Nag_Mundari Nagm Unknown Zzzz",rwt={9:WIe,10:GIe,11:YIe,12:KIe,13:XIe,14:nwt},QIe={};function iwt(e){var t=QIe[e]={binary:t0(Z_t[e]+" "+gfe),binaryOfStrings:t0(twt[e]),nonBinary:{General_Category:t0(gfe),Script:t0(rwt[e])}};t.nonBinary.Script_Extensions=t.nonBinary.Script,t.nonBinary.gc=t.nonBinary.General_Category,t.nonBinary.sc=t.nonBinary.Script,t.nonBinary.scx=t.nonBinary.Script_Extensions}for(var o9=0,yfe=[9,10,11,12,13,14];o9<yfe.length;o9+=1){var swt=yfe[o9];iwt(swt)}var Ct=Bs.prototype,tp=function(t){this.parser=t,this.validFlags="gim"+(t.options.ecmaVersion>=6?"uy":"")+(t.options.ecmaVersion>=9?"s":"")+(t.options.ecmaVersion>=13?"d":"")+(t.options.ecmaVersion>=15?"v":""),this.unicodeProperties=QIe[t.options.ecmaVersion>=14?14:t.options.ecmaVersion],this.source="",this.flags="",this.start=0,this.switchU=!1,this.switchV=!1,this.switchN=!1,this.pos=0,this.lastIntValue=0,this.lastStringValue="",this.lastAssertionIsQuantifiable=!1,this.numCapturingParens=0,this.maxBackReference=0,this.groupNames=[],this.backReferenceNames=[]};tp.prototype.reset=function(t,n,r){var i=r.indexOf("v")!==-1,s=r.indexOf("u")!==-1;this.start=t|0,this.source=n+"",this.flags=r,i&&this.parser.options.ecmaVersion>=15?(this.switchU=!0,this.switchV=!0,this.switchN=!0):(this.switchU=s&&this.parser.options.ecmaVersion>=6,this.switchV=!1,this.switchN=s&&this.parser.options.ecmaVersion>=9)};tp.prototype.raise=function(t){this.parser.raiseRecoverable(this.start,"Invalid regular expression: /"+this.source+"/: "+t)};tp.prototype.at=function(t,n){n===void 0&&(n=!1);var r=this.source,i=r.length;if(t>=i)return-1;var s=r.charCodeAt(t);if(!(n||this.switchU)||s<=55295||s>=57344||t+1>=i)return s;var o=r.charCodeAt(t+1);return o>=56320&&o<=57343?(s<<10)+o-56613888:s};tp.prototype.nextIndex=function(t,n){n===void 0&&(n=!1);var r=this.source,i=r.length;if(t>=i)return i;var s=r.charCodeAt(t),o;return!(n||this.switchU)||s<=55295||s>=57344||t+1>=i||(o=r.charCodeAt(t+1))<56320||o>57343?t+1:t+2};tp.prototype.current=function(t){return t===void 0&&(t=!1),this.at(this.pos,t)};tp.prototype.lookahead=function(t){return t===void 0&&(t=!1),this.at(this.nextIndex(this.pos,t),t)};tp.prototype.advance=function(t){t===void 0&&(t=!1),this.pos=this.nextIndex(this.pos,t)};tp.prototype.eat=function(t,n){return n===void 0&&(n=!1),this.current(n)===t?(this.advance(n),!0):!1};tp.prototype.eatChars=function(t,n){n===void 0&&(n=!1);for(var r=this.pos,i=0,s=t;i<s.length;i+=1){var o=s[i],a=this.at(r,n);if(a===-1||a!==o)return!1;r=this.nextIndex(r,n)}return this.pos=r,!0};Ct.validateRegExpFlags=function(e){for(var t=e.validFlags,n=e.flags,r=!1,i=!1,s=0;s<n.length;s++){var o=n.charAt(s);t.indexOf(o)===-1&&this.raise(e.start,"Invalid regular expression flag"),n.indexOf(o,s+1)>-1&&this.raise(e.start,"Duplicate regular expression flag"),o==="u"&&(r=!0),o==="v"&&(i=!0)}this.options.ecmaVersion>=15&&r&&i&&this.raise(e.start,"Invalid regular expression flag")};Ct.validateRegExpPattern=function(e){this.regexp_pattern(e),!e.switchN&&this.options.ecmaVersion>=9&&e.groupNames.length>0&&(e.switchN=!0,this.regexp_pattern(e))};Ct.regexp_pattern=function(e){e.pos=0,e.lastIntValue=0,e.lastStringValue="",e.lastAssertionIsQuantifiable=!1,e.numCapturingParens=0,e.maxBackReference=0,e.groupNames.length=0,e.backReferenceNames.length=0,this.regexp_disjunction(e),e.pos!==e.source.length&&(e.eat(41)&&e.raise("Unmatched ')'"),(e.eat(93)||e.eat(125))&&e.raise("Lone quantifier brackets")),e.maxBackReference>e.numCapturingParens&&e.raise("Invalid escape");for(var t=0,n=e.backReferenceNames;t<n.length;t+=1){var r=n[t];e.groupNames.indexOf(r)===-1&&e.raise("Invalid named capture referenced")}};Ct.regexp_disjunction=function(e){for(this.regexp_alternative(e);e.eat(124);)this.regexp_alternative(e);this.regexp_eatQuantifier(e,!0)&&e.raise("Nothing to repeat"),e.eat(123)&&e.raise("Lone quantifier brackets")};Ct.regexp_alternative=function(e){for(;e.pos<e.source.length&&this.regexp_eatTerm(e););};Ct.regexp_eatTerm=function(e){return this.regexp_eatAssertion(e)?(e.lastAssertionIsQuantifiable&&this.regexp_eatQuantifier(e)&&e.switchU&&e.raise("Invalid quantifier"),!0):(e.switchU?this.regexp_eatAtom(e):this.regexp_eatExtendedAtom(e))?(this.regexp_eatQuantifier(e),!0):!1};Ct.regexp_eatAssertion=function(e){var t=e.pos;if(e.lastAssertionIsQuantifiable=!1,e.eat(94)||e.eat(36))return!0;if(e.eat(92)){if(e.eat(66)||e.eat(98))return!0;e.pos=t}if(e.eat(40)&&e.eat(63)){var n=!1;if(this.options.ecmaVersion>=9&&(n=e.eat(60)),e.eat(61)||e.eat(33))return this.regexp_disjunction(e),e.eat(41)||e.raise("Unterminated group"),e.lastAssertionIsQuantifiable=!n,!0}return e.pos=t,!1};Ct.regexp_eatQuantifier=function(e,t){return t===void 0&&(t=!1),this.regexp_eatQuantifierPrefix(e,t)?(e.eat(63),!0):!1};Ct.regexp_eatQuantifierPrefix=function(e,t){return e.eat(42)||e.eat(43)||e.eat(63)||this.regexp_eatBracedQuantifier(e,t)};Ct.regexp_eatBracedQuantifier=function(e,t){var n=e.pos;if(e.eat(123)){var r=0,i=-1;if(this.regexp_eatDecimalDigits(e)&&(r=e.lastIntValue,e.eat(44)&&this.regexp_eatDecimalDigits(e)&&(i=e.lastIntValue),e.eat(125)))return i!==-1&&i<r&&!t&&e.raise("numbers out of order in {} quantifier"),!0;e.switchU&&!t&&e.raise("Incomplete quantifier"),e.pos=n}return!1};Ct.regexp_eatAtom=function(e){return this.regexp_eatPatternCharacters(e)||e.eat(46)||this.regexp_eatReverseSolidusAtomEscape(e)||this.regexp_eatCharacterClass(e)||this.regexp_eatUncapturingGroup(e)||this.regexp_eatCapturingGroup(e)};Ct.regexp_eatReverseSolidusAtomEscape=function(e){var t=e.pos;if(e.eat(92)){if(this.regexp_eatAtomEscape(e))return!0;e.pos=t}return!1};Ct.regexp_eatUncapturingGroup=function(e){var t=e.pos;if(e.eat(40)){if(e.eat(63)&&e.eat(58)){if(this.regexp_disjunction(e),e.eat(41))return!0;e.raise("Unterminated group")}e.pos=t}return!1};Ct.regexp_eatCapturingGroup=function(e){if(e.eat(40)){if(this.options.ecmaVersion>=9?this.regexp_groupSpecifier(e):e.current()===63&&e.raise("Invalid group"),this.regexp_disjunction(e),e.eat(41))return e.numCapturingParens+=1,!0;e.raise("Unterminated group")}return!1};Ct.regexp_eatExtendedAtom=function(e){return e.eat(46)||this.regexp_eatReverseSolidusAtomEscape(e)||this.regexp_eatCharacterClass(e)||this.regexp_eatUncapturingGroup(e)||this.regexp_eatCapturingGroup(e)||this.regexp_eatInvalidBracedQuantifier(e)||this.regexp_eatExtendedPatternCharacter(e)};Ct.regexp_eatInvalidBracedQuantifier=function(e){return this.regexp_eatBracedQuantifier(e,!0)&&e.raise("Nothing to repeat"),!1};Ct.regexp_eatSyntaxCharacter=function(e){var t=e.current();return JIe(t)?(e.lastIntValue=t,e.advance(),!0):!1};function JIe(e){return e===36||e>=40&&e<=43||e===46||e===63||e>=91&&e<=94||e>=123&&e<=125}Ct.regexp_eatPatternCharacters=function(e){for(var t=e.pos,n=0;(n=e.current())!==-1&&!JIe(n);)e.advance();return e.pos!==t};Ct.regexp_eatExtendedPatternCharacter=function(e){var t=e.current();return t!==-1&&t!==36&&!(t>=40&&t<=43)&&t!==46&&t!==63&&t!==91&&t!==94&&t!==124?(e.advance(),!0):!1};Ct.regexp_groupSpecifier=function(e){if(e.eat(63)){if(this.regexp_eatGroupName(e)){e.groupNames.indexOf(e.lastStringValue)!==-1&&e.raise("Duplicate capture group name"),e.groupNames.push(e.lastStringValue);return}e.raise("Invalid group")}};Ct.regexp_eatGroupName=function(e){if(e.lastStringValue="",e.eat(60)){if(this.regexp_eatRegExpIdentifierName(e)&&e.eat(62))return!0;e.raise("Invalid capture group name")}return!1};Ct.regexp_eatRegExpIdentifierName=function(e){if(e.lastStringValue="",this.regexp_eatRegExpIdentifierStart(e)){for(e.lastStringValue+=ry(e.lastIntValue);this.regexp_eatRegExpIdentifierPart(e);)e.lastStringValue+=ry(e.lastIntValue);return!0}return!1};Ct.regexp_eatRegExpIdentifierStart=function(e){var t=e.pos,n=this.options.ecmaVersion>=11,r=e.current(n);return e.advance(n),r===92&&this.regexp_eatRegExpUnicodeEscapeSequence(e,n)&&(r=e.lastIntValue),owt(r)?(e.lastIntValue=r,!0):(e.pos=t,!1)};function owt(e){return Dm(e,!0)||e===36||e===95}Ct.regexp_eatRegExpIdentifierPart=function(e){var t=e.pos,n=this.options.ecmaVersion>=11,r=e.current(n);return e.advance(n),r===92&&this.regexp_eatRegExpUnicodeEscapeSequence(e,n)&&(r=e.lastIntValue),awt(r)?(e.lastIntValue=r,!0):(e.pos=t,!1)};function awt(e){return lx(e,!0)||e===36||e===95||e===8204||e===8205}Ct.regexp_eatAtomEscape=function(e){return this.regexp_eatBackReference(e)||this.regexp_eatCharacterClassEscape(e)||this.regexp_eatCharacterEscape(e)||e.switchN&&this.regexp_eatKGroupName(e)?!0:(e.switchU&&(e.current()===99&&e.raise("Invalid unicode escape"),e.raise("Invalid escape")),!1)};Ct.regexp_eatBackReference=function(e){var t=e.pos;if(this.regexp_eatDecimalEscape(e)){var n=e.lastIntValue;if(e.switchU)return n>e.maxBackReference&&(e.maxBackReference=n),!0;if(n<=e.numCapturingParens)return!0;e.pos=t}return!1};Ct.regexp_eatKGroupName=function(e){if(e.eat(107)){if(this.regexp_eatGroupName(e))return e.backReferenceNames.push(e.lastStringValue),!0;e.raise("Invalid named reference")}return!1};Ct.regexp_eatCharacterEscape=function(e){return this.regexp_eatControlEscape(e)||this.regexp_eatCControlLetter(e)||this.regexp_eatZero(e)||this.regexp_eatHexEscapeSequence(e)||this.regexp_eatRegExpUnicodeEscapeSequence(e,!1)||!e.switchU&&this.regexp_eatLegacyOctalEscapeSequence(e)||this.regexp_eatIdentityEscape(e)};Ct.regexp_eatCControlLetter=function(e){var t=e.pos;if(e.eat(99)){if(this.regexp_eatControlLetter(e))return!0;e.pos=t}return!1};Ct.regexp_eatZero=function(e){return e.current()===48&&!f4(e.lookahead())?(e.lastIntValue=0,e.advance(),!0):!1};Ct.regexp_eatControlEscape=function(e){var t=e.current();return t===116?(e.lastIntValue=9,e.advance(),!0):t===110?(e.lastIntValue=10,e.advance(),!0):t===118?(e.lastIntValue=11,e.advance(),!0):t===102?(e.lastIntValue=12,e.advance(),!0):t===114?(e.lastIntValue=13,e.advance(),!0):!1};Ct.regexp_eatControlLetter=function(e){var t=e.current();return ZIe(t)?(e.lastIntValue=t%32,e.advance(),!0):!1};function ZIe(e){return e>=65&&e<=90||e>=97&&e<=122}Ct.regexp_eatRegExpUnicodeEscapeSequence=function(e,t){t===void 0&&(t=!1);var n=e.pos,r=t||e.switchU;if(e.eat(117)){if(this.regexp_eatFixedHexDigits(e,4)){var i=e.lastIntValue;if(r&&i>=55296&&i<=56319){var s=e.pos;if(e.eat(92)&&e.eat(117)&&this.regexp_eatFixedHexDigits(e,4)){var o=e.lastIntValue;if(o>=56320&&o<=57343)return e.lastIntValue=(i-55296)*1024+(o-56320)+65536,!0}e.pos=s,e.lastIntValue=i}return!0}if(r&&e.eat(123)&&this.regexp_eatHexDigits(e)&&e.eat(125)&&uwt(e.lastIntValue))return!0;r&&e.raise("Invalid unicode escape"),e.pos=n}return!1};function uwt(e){return e>=0&&e<=1114111}Ct.regexp_eatIdentityEscape=function(e){if(e.switchU)return this.regexp_eatSyntaxCharacter(e)?!0:e.eat(47)?(e.lastIntValue=47,!0):!1;var t=e.current();return t!==99&&(!e.switchN||t!==107)?(e.lastIntValue=t,e.advance(),!0):!1};Ct.regexp_eatDecimalEscape=function(e){e.lastIntValue=0;var t=e.current();if(t>=49&&t<=57){do e.lastIntValue=10*e.lastIntValue+(t-48),e.advance();while((t=e.current())>=48&&t<=57);return!0}return!1};var eke=0,Om=1,Ec=2;Ct.regexp_eatCharacterClassEscape=function(e){var t=e.current();if(lwt(t))return e.lastIntValue=-1,e.advance(),Om;var n=!1;if(e.switchU&&this.options.ecmaVersion>=9&&((n=t===80)||t===112)){e.lastIntValue=-1,e.advance();var r;if(e.eat(123)&&(r=this.regexp_eatUnicodePropertyValueExpression(e))&&e.eat(125))return n&&r===Ec&&e.raise("Invalid property name"),r;e.raise("Invalid property name")}return eke};function lwt(e){return e===100||e===68||e===115||e===83||e===119||e===87}Ct.regexp_eatUnicodePropertyValueExpression=function(e){var t=e.pos;if(this.regexp_eatUnicodePropertyName(e)&&e.eat(61)){var n=e.lastStringValue;if(this.regexp_eatUnicodePropertyValue(e)){var r=e.lastStringValue;return this.regexp_validateUnicodePropertyNameAndValue(e,n,r),Om}}if(e.pos=t,this.regexp_eatLoneUnicodePropertyNameOrValue(e)){var i=e.lastStringValue;return this.regexp_validateUnicodePropertyNameOrValue(e,i)}return eke};Ct.regexp_validateUnicodePropertyNameAndValue=function(e,t,n){jk(e.unicodeProperties.nonBinary,t)||e.raise("Invalid property name"),e.unicodeProperties.nonBinary[t].test(n)||e.raise("Invalid property value")};Ct.regexp_validateUnicodePropertyNameOrValue=function(e,t){if(e.unicodeProperties.binary.test(t))return Om;if(e.switchV&&e.unicodeProperties.binaryOfStrings.test(t))return Ec;e.raise("Invalid property name")};Ct.regexp_eatUnicodePropertyName=function(e){var t=0;for(e.lastStringValue="";tke(t=e.current());)e.lastStringValue+=ry(t),e.advance();return e.lastStringValue!==""};function tke(e){return ZIe(e)||e===95}Ct.regexp_eatUnicodePropertyValue=function(e){var t=0;for(e.lastStringValue="";cwt(t=e.current());)e.lastStringValue+=ry(t),e.advance();return e.lastStringValue!==""};function cwt(e){return tke(e)||f4(e)}Ct.regexp_eatLoneUnicodePropertyNameOrValue=function(e){return this.regexp_eatUnicodePropertyValue(e)};Ct.regexp_eatCharacterClass=function(e){if(e.eat(91)){var t=e.eat(94),n=this.regexp_classContents(e);return e.eat(93)||e.raise("Unterminated character class"),t&&n===Ec&&e.raise("Negated character class may contain strings"),!0}return!1};Ct.regexp_classContents=function(e){return e.current()===93?Om:e.switchV?this.regexp_classSetExpression(e):(this.regexp_nonEmptyClassRanges(e),Om)};Ct.regexp_nonEmptyClassRanges=function(e){for(;this.regexp_eatClassAtom(e);){var t=e.lastIntValue;if(e.eat(45)&&this.regexp_eatClassAtom(e)){var n=e.lastIntValue;e.switchU&&(t===-1||n===-1)&&e.raise("Invalid character class"),t!==-1&&n!==-1&&t>n&&e.raise("Range out of order in character class")}}};Ct.regexp_eatClassAtom=function(e){var t=e.pos;if(e.eat(92)){if(this.regexp_eatClassEscape(e))return!0;if(e.switchU){var n=e.current();(n===99||ike(n))&&e.raise("Invalid class escape"),e.raise("Invalid escape")}e.pos=t}var r=e.current();return r!==93?(e.lastIntValue=r,e.advance(),!0):!1};Ct.regexp_eatClassEscape=function(e){var t=e.pos;if(e.eat(98))return e.lastIntValue=8,!0;if(e.switchU&&e.eat(45))return e.lastIntValue=45,!0;if(!e.switchU&&e.eat(99)){if(this.regexp_eatClassControlLetter(e))return!0;e.pos=t}return this.regexp_eatCharacterClassEscape(e)||this.regexp_eatCharacterEscape(e)};Ct.regexp_classSetExpression=function(e){var t=Om,n;if(!this.regexp_eatClassSetRange(e))if(n=this.regexp_eatClassSetOperand(e)){n===Ec&&(t=Ec);for(var r=e.pos;e.eatChars([38,38]);){if(e.current()!==38&&(n=this.regexp_eatClassSetOperand(e))){n!==Ec&&(t=Om);continue}e.raise("Invalid character in character class")}if(r!==e.pos)return t;for(;e.eatChars([45,45]);)this.regexp_eatClassSetOperand(e)||e.raise("Invalid character in character class");if(r!==e.pos)return t}else e.raise("Invalid character in character class");for(;;)if(!this.regexp_eatClassSetRange(e)){if(n=this.regexp_eatClassSetOperand(e),!n)return t;n===Ec&&(t=Ec)}};Ct.regexp_eatClassSetRange=function(e){var t=e.pos;if(this.regexp_eatClassSetCharacter(e)){var n=e.lastIntValue;if(e.eat(45)&&this.regexp_eatClassSetCharacter(e)){var r=e.lastIntValue;return n!==-1&&r!==-1&&n>r&&e.raise("Range out of order in character class"),!0}e.pos=t}return!1};Ct.regexp_eatClassSetOperand=function(e){return this.regexp_eatClassSetCharacter(e)?Om:this.regexp_eatClassStringDisjunction(e)||this.regexp_eatNestedClass(e)};Ct.regexp_eatNestedClass=function(e){var t=e.pos;if(e.eat(91)){var n=e.eat(94),r=this.regexp_classContents(e);if(e.eat(93))return n&&r===Ec&&e.raise("Negated character class may contain strings"),r;e.pos=t}if(e.eat(92)){var i=this.regexp_eatCharacterClassEscape(e);if(i)return i;e.pos=t}return null};Ct.regexp_eatClassStringDisjunction=function(e){var t=e.pos;if(e.eatChars([92,113])){if(e.eat(123)){var n=this.regexp_classStringDisjunctionContents(e);if(e.eat(125))return n}else e.raise("Invalid escape");e.pos=t}return null};Ct.regexp_classStringDisjunctionContents=function(e){for(var t=this.regexp_classString(e);e.eat(124);)this.regexp_classString(e)===Ec&&(t=Ec);return t};Ct.regexp_classString=function(e){for(var t=0;this.regexp_eatClassSetCharacter(e);)t++;return t===1?Om:Ec};Ct.regexp_eatClassSetCharacter=function(e){var t=e.pos;if(e.eat(92))return this.regexp_eatCharacterEscape(e)||this.regexp_eatClassSetReservedPunctuator(e)?!0:e.eat(98)?(e.lastIntValue=8,!0):(e.pos=t,!1);var n=e.current();return n<0||n===e.lookahead()&&fwt(n)||dwt(n)?!1:(e.advance(),e.lastIntValue=n,!0)};function fwt(e){return e===33||e>=35&&e<=38||e>=42&&e<=44||e===46||e>=58&&e<=64||e===94||e===96||e===126}function dwt(e){return e===40||e===41||e===45||e===47||e>=91&&e<=93||e>=123&&e<=125}Ct.regexp_eatClassSetReservedPunctuator=function(e){var t=e.current();return hwt(t)?(e.lastIntValue=t,e.advance(),!0):!1};function hwt(e){return e===33||e===35||e===37||e===38||e===44||e===45||e>=58&&e<=62||e===64||e===96||e===126}Ct.regexp_eatClassControlLetter=function(e){var t=e.current();return f4(t)||t===95?(e.lastIntValue=t%32,e.advance(),!0):!1};Ct.regexp_eatHexEscapeSequence=function(e){var t=e.pos;if(e.eat(120)){if(this.regexp_eatFixedHexDigits(e,2))return!0;e.switchU&&e.raise("Invalid escape"),e.pos=t}return!1};Ct.regexp_eatDecimalDigits=function(e){var t=e.pos,n=0;for(e.lastIntValue=0;f4(n=e.current());)e.lastIntValue=10*e.lastIntValue+(n-48),e.advance();return e.pos!==t};function f4(e){return e>=48&&e<=57}Ct.regexp_eatHexDigits=function(e){var t=e.pos,n=0;for(e.lastIntValue=0;nke(n=e.current());)e.lastIntValue=16*e.lastIntValue+rke(n),e.advance();return e.pos!==t};function nke(e){return e>=48&&e<=57||e>=65&&e<=70||e>=97&&e<=102}function rke(e){return e>=65&&e<=70?10+(e-65):e>=97&&e<=102?10+(e-97):e-48}Ct.regexp_eatLegacyOctalEscapeSequence=function(e){if(this.regexp_eatOctalDigit(e)){var t=e.lastIntValue;if(this.regexp_eatOctalDigit(e)){var n=e.lastIntValue;t<=3&&this.regexp_eatOctalDigit(e)?e.lastIntValue=t*64+n*8+e.lastIntValue:e.lastIntValue=t*8+n}else e.lastIntValue=t;return!0}return!1};Ct.regexp_eatOctalDigit=function(e){var t=e.current();return ike(t)?(e.lastIntValue=t-48,e.advance(),!0):(e.lastIntValue=0,!1)};function ike(e){return e>=48&&e<=55}Ct.regexp_eatFixedHexDigits=function(e,t){var n=e.pos;e.lastIntValue=0;for(var r=0;r<t;++r){var i=e.current();if(!nke(i))return e.pos=n,!1;e.lastIntValue=16*e.lastIntValue+rke(i),e.advance()}return!0};var pQ=function(t){this.type=t.type,this.value=t.value,this.start=t.start,this.end=t.end,t.options.locations&&(this.loc=new u4(t,t.startLoc,t.endLoc)),t.options.ranges&&(this.range=[t.start,t.end])},qn=Bs.prototype;qn.next=function(e){!e&&this.type.keyword&&this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword "+this.type.keyword),this.options.onToken&&this.options.onToken(new pQ(this)),this.lastTokEnd=this.end,this.lastTokStart=this.start,this.lastTokEndLoc=this.endLoc,this.lastTokStartLoc=this.startLoc,this.nextToken()};qn.getToken=function(){return this.next(),new pQ(this)};typeof Symbol<"u"&&(qn[Symbol.iterator]=function(){var e=this;return{next:function(){var t=e.getToken();return{done:t.type===K.eof,value:t}}}});qn.nextToken=function(){var e=this.curContext();if((!e||!e.preserveSpace)&&this.skipSpace(),this.start=this.pos,this.options.locations&&(this.startLoc=this.curPosition()),this.pos>=this.input.length)return this.finishToken(K.eof);if(e.override)return e.override(this);this.readToken(this.fullCharCodeAtPos())};qn.readToken=function(e){return Dm(e,this.options.ecmaVersion>=6)||e===92?this.readWord():this.getTokenFromCode(e)};qn.fullCharCodeAtPos=function(){var e=this.input.charCodeAt(this.pos);if(e<=55295||e>=56320)return e;var t=this.input.charCodeAt(this.pos+1);return t<=56319||t>=57344?e:(e<<10)+t-56613888};qn.skipBlockComment=function(){var e=this.options.onComment&&this.curPosition(),t=this.pos,n=this.input.indexOf("*/",this.pos+=2);if(n===-1&&this.raise(this.pos-2,"Unterminated comment"),this.pos=n+2,this.options.locations)for(var r=void 0,i=t;(r=AIe(this.input,i,this.pos))>-1;)++this.curLine,i=this.lineStart=r;this.options.onComment&&this.options.onComment(!0,this.input.slice(t+2,n),t,this.pos,e,this.curPosition())};qn.skipLineComment=function(e){for(var t=this.pos,n=this.options.onComment&&this.curPosition(),r=this.input.charCodeAt(this.pos+=e);this.pos<this.input.length&&!CS(r);)r=this.input.charCodeAt(++this.pos);this.options.onComment&&this.options.onComment(!1,this.input.slice(t+e,this.pos),t,this.pos,n,this.curPosition())};qn.skipSpace=function(){e:for(;this.pos<this.input.length;){var e=this.input.charCodeAt(this.pos);switch(e){case 32:case 160:++this.pos;break;case 13:this.input.charCodeAt(this.pos+1)===10&&++this.pos;case 10:case 8232:case 8233:++this.pos,this.options.locations&&(++this.curLine,this.lineStart=this.pos);break;case 47:switch(this.input.charCodeAt(this.pos+1)){case 42:this.skipBlockComment();break;case 47:this.skipLineComment(2);break;default:break e}break;default:if(e>8&&e<14||e>=5760&&IIe.test(String.fromCharCode(e)))++this.pos;else break e}}};qn.finishToken=function(e,t){this.end=this.pos,this.options.locations&&(this.endLoc=this.curPosition());var n=this.type;this.type=e,this.value=t,this.updateContext(n)};qn.readToken_dot=function(){var e=this.input.charCodeAt(this.pos+1);if(e>=48&&e<=57)return this.readNumber(!0);var t=this.input.charCodeAt(this.pos+2);return this.options.ecmaVersion>=6&&e===46&&t===46?(this.pos+=3,this.finishToken(K.ellipsis)):(++this.pos,this.finishToken(K.dot))};qn.readToken_slash=function(){var e=this.input.charCodeAt(this.pos+1);return this.exprAllowed?(++this.pos,this.readRegexp()):e===61?this.finishOp(K.assign,2):this.finishOp(K.slash,1)};qn.readToken_mult_modulo_exp=function(e){var t=this.input.charCodeAt(this.pos+1),n=1,r=e===42?K.star:K.modulo;return this.options.ecmaVersion>=7&&e===42&&t===42&&(++n,r=K.starstar,t=this.input.charCodeAt(this.pos+2)),t===61?this.finishOp(K.assign,n+1):this.finishOp(r,n)};qn.readToken_pipe_amp=function(e){var t=this.input.charCodeAt(this.pos+1);if(t===e){if(this.options.ecmaVersion>=12){var n=this.input.charCodeAt(this.pos+2);if(n===61)return this.finishOp(K.assign,3)}return this.finishOp(e===124?K.logicalOR:K.logicalAND,2)}return t===61?this.finishOp(K.assign,2):this.finishOp(e===124?K.bitwiseOR:K.bitwiseAND,1)};qn.readToken_caret=function(){var e=this.input.charCodeAt(this.pos+1);return e===61?this.finishOp(K.assign,2):this.finishOp(K.bitwiseXOR,1)};qn.readToken_plus_min=function(e){var t=this.input.charCodeAt(this.pos+1);return t===e?t===45&&!this.inModule&&this.input.charCodeAt(this.pos+2)===62&&(this.lastTokEnd===0||Xc.test(this.input.slice(this.lastTokEnd,this.pos)))?(this.skipLineComment(3),this.skipSpace(),this.nextToken()):this.finishOp(K.incDec,2):t===61?this.finishOp(K.assign,2):this.finishOp(K.plusMin,1)};qn.readToken_lt_gt=function(e){var t=this.input.charCodeAt(this.pos+1),n=1;return t===e?(n=e===62&&this.input.charCodeAt(this.pos+2)===62?3:2,this.input.charCodeAt(this.pos+n)===61?this.finishOp(K.assign,n+1):this.finishOp(K.bitShift,n)):t===33&&e===60&&!this.inModule&&this.input.charCodeAt(this.pos+2)===45&&this.input.charCodeAt(this.pos+3)===45?(this.skipLineComment(4),this.skipSpace(),this.nextToken()):(t===61&&(n=2),this.finishOp(K.relational,n))};qn.readToken_eq_excl=function(e){var t=this.input.charCodeAt(this.pos+1);return t===61?this.finishOp(K.equality,this.input.charCodeAt(this.pos+2)===61?3:2):e===61&&t===62&&this.options.ecmaVersion>=6?(this.pos+=2,this.finishToken(K.arrow)):this.finishOp(e===61?K.eq:K.prefix,1)};qn.readToken_question=function(){var e=this.options.ecmaVersion;if(e>=11){var t=this.input.charCodeAt(this.pos+1);if(t===46){var n=this.input.charCodeAt(this.pos+2);if(n<48||n>57)return this.finishOp(K.questionDot,2)}if(t===63){if(e>=12){var r=this.input.charCodeAt(this.pos+2);if(r===61)return this.finishOp(K.assign,3)}return this.finishOp(K.coalesce,2)}}return this.finishOp(K.question,1)};qn.readToken_numberSign=function(){var e=this.options.ecmaVersion,t=35;if(e>=13&&(++this.pos,t=this.fullCharCodeAtPos(),Dm(t,!0)||t===92))return this.finishToken(K.privateId,this.readWord1());this.raise(this.pos,"Unexpected character '"+ry(t)+"'")};qn.getTokenFromCode=function(e){switch(e){case 46:return this.readToken_dot();case 40:return++this.pos,this.finishToken(K.parenL);case 41:return++this.pos,this.finishToken(K.parenR);case 59:return++this.pos,this.finishToken(K.semi);case 44:return++this.pos,this.finishToken(K.comma);case 91:return++this.pos,this.finishToken(K.bracketL);case 93:return++this.pos,this.finishToken(K.bracketR);case 123:return++this.pos,this.finishToken(K.braceL);case 125:return++this.pos,this.finishToken(K.braceR);case 58:return++this.pos,this.finishToken(K.colon);case 96:if(this.options.ecmaVersion<6)break;return++this.pos,this.finishToken(K.backQuote);case 48:var t=this.input.charCodeAt(this.pos+1);if(t===120||t===88)return this.readRadixNumber(16);if(this.options.ecmaVersion>=6){if(t===111||t===79)return this.readRadixNumber(8);if(t===98||t===66)return this.readRadixNumber(2)}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.readNumber(!1);case 34:case 39:return this.readString(e);case 47:return this.readToken_slash();case 37:case 42:return this.readToken_mult_modulo_exp(e);case 124:case 38:return this.readToken_pipe_amp(e);case 94:return this.readToken_caret();case 43:case 45:return this.readToken_plus_min(e);case 60:case 62:return this.readToken_lt_gt(e);case 61:case 33:return this.readToken_eq_excl(e);case 63:return this.readToken_question();case 126:return this.finishOp(K.prefix,1);case 35:return this.readToken_numberSign()}this.raise(this.pos,"Unexpected character '"+ry(e)+"'")};qn.finishOp=function(e,t){var n=this.input.slice(this.pos,this.pos+t);return this.pos+=t,this.finishToken(e,n)};qn.readRegexp=function(){for(var e,t,n=this.pos;;){this.pos>=this.input.length&&this.raise(n,"Unterminated regular expression");var r=this.input.charAt(this.pos);if(Xc.test(r)&&this.raise(n,"Unterminated regular expression"),e)e=!1;else{if(r==="[")t=!0;else if(r==="]"&&t)t=!1;else if(r==="/"&&!t)break;e=r==="\\"}++this.pos}var i=this.input.slice(n,this.pos);++this.pos;var s=this.pos,o=this.readWord1();this.containsEsc&&this.unexpected(s);var a=this.regexpState||(this.regexpState=new tp(this));a.reset(n,i,o),this.validateRegExpFlags(a),this.validateRegExpPattern(a);var u=null;try{u=new RegExp(i,o)}catch{}return this.finishToken(K.regexp,{pattern:i,flags:o,value:u})};qn.readInt=function(e,t,n){for(var r=this.options.ecmaVersion>=12&&t===void 0,i=n&&this.input.charCodeAt(this.pos)===48,s=this.pos,o=0,a=0,u=0,l=t??1/0;u<l;++u,++this.pos){var c=this.input.charCodeAt(this.pos),f=void 0;if(r&&c===95){i&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed in legacy octal numeric literals"),a===95&&this.raiseRecoverable(this.pos,"Numeric separator must be exactly one underscore"),u===0&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed at the first of digits"),a=c;continue}if(c>=97?f=c-97+10:c>=65?f=c-65+10:c>=48&&c<=57?f=c-48:f=1/0,f>=e)break;a=c,o=o*e+f}return r&&a===95&&this.raiseRecoverable(this.pos-1,"Numeric separator is not allowed at the last of digits"),this.pos===s||t!=null&&this.pos-s!==t?null:o};function pwt(e,t){return t?parseInt(e,8):parseFloat(e.replace(/_/g,""))}function ske(e){return typeof BigInt!="function"?null:BigInt(e.replace(/_/g,""))}qn.readRadixNumber=function(e){var t=this.pos;this.pos+=2;var n=this.readInt(e);return n==null&&this.raise(this.start+2,"Expected number in radix "+e),this.options.ecmaVersion>=11&&this.input.charCodeAt(this.pos)===110?(n=ske(this.input.slice(t,this.pos)),++this.pos):Dm(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(K.num,n)};qn.readNumber=function(e){var t=this.pos;!e&&this.readInt(10,void 0,!0)===null&&this.raise(t,"Invalid number");var n=this.pos-t>=2&&this.input.charCodeAt(t)===48;n&&this.strict&&this.raise(t,"Invalid number");var r=this.input.charCodeAt(this.pos);if(!n&&!e&&this.options.ecmaVersion>=11&&r===110){var i=ske(this.input.slice(t,this.pos));return++this.pos,Dm(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(K.num,i)}n&&/[89]/.test(this.input.slice(t,this.pos))&&(n=!1),r===46&&!n&&(++this.pos,this.readInt(10),r=this.input.charCodeAt(this.pos)),(r===69||r===101)&&!n&&(r=this.input.charCodeAt(++this.pos),(r===43||r===45)&&++this.pos,this.readInt(10)===null&&this.raise(t,"Invalid number")),Dm(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");var s=pwt(this.input.slice(t,this.pos),n);return this.finishToken(K.num,s)};qn.readCodePoint=function(){var e=this.input.charCodeAt(this.pos),t;if(e===123){this.options.ecmaVersion<6&&this.unexpected();var n=++this.pos;t=this.readHexChar(this.input.indexOf("}",this.pos)-this.pos),++this.pos,t>1114111&&this.invalidStringToken(n,"Code point out of bounds")}else t=this.readHexChar(4);return t};qn.readString=function(e){for(var t="",n=++this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated string constant");var r=this.input.charCodeAt(this.pos);if(r===e)break;r===92?(t+=this.input.slice(n,this.pos),t+=this.readEscapedChar(!1),n=this.pos):r===8232||r===8233?(this.options.ecmaVersion<10&&this.raise(this.start,"Unterminated string constant"),++this.pos,this.options.locations&&(this.curLine++,this.lineStart=this.pos)):(CS(r)&&this.raise(this.start,"Unterminated string constant"),++this.pos)}return t+=this.input.slice(n,this.pos++),this.finishToken(K.string,t)};var oke={};qn.tryReadTemplateToken=function(){this.inTemplateElement=!0;try{this.readTmplToken()}catch(e){if(e===oke)this.readInvalidTemplateToken();else throw e}this.inTemplateElement=!1};qn.invalidStringToken=function(e,t){if(this.inTemplateElement&&this.options.ecmaVersion>=9)throw oke;this.raise(e,t)};qn.readTmplToken=function(){for(var e="",t=this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated template");var n=this.input.charCodeAt(this.pos);if(n===96||n===36&&this.input.charCodeAt(this.pos+1)===123)return this.pos===this.start&&(this.type===K.template||this.type===K.invalidTemplate)?n===36?(this.pos+=2,this.finishToken(K.dollarBraceL)):(++this.pos,this.finishToken(K.backQuote)):(e+=this.input.slice(t,this.pos),this.finishToken(K.template,e));if(n===92)e+=this.input.slice(t,this.pos),e+=this.readEscapedChar(!0),t=this.pos;else if(CS(n)){switch(e+=this.input.slice(t,this.pos),++this.pos,n){case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:e+=`
`;break;default:e+=String.fromCharCode(n);break}this.options.locations&&(++this.curLine,this.lineStart=this.pos),t=this.pos}else++this.pos}};qn.readInvalidTemplateToken=function(){for(;this.pos<this.input.length;this.pos++)switch(this.input[this.pos]){case"\\":++this.pos;break;case"$":if(this.input[this.pos+1]!=="{")break;case"`":return this.finishToken(K.invalidTemplate,this.input.slice(this.start,this.pos))}this.raise(this.start,"Unterminated template")};qn.readEscapedChar=function(e){var t=this.input.charCodeAt(++this.pos);switch(++this.pos,t){case 110:return`
`;case 114:return"\r";case 120:return String.fromCharCode(this.readHexChar(2));case 117:return ry(this.readCodePoint());case 116:return"	";case 98:return"\b";case 118:return"\v";case 102:return"\f";case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:return this.options.locations&&(this.lineStart=this.pos,++this.curLine),"";case 56:case 57:if(this.strict&&this.invalidStringToken(this.pos-1,"Invalid escape sequence"),e){var n=this.pos-1;this.invalidStringToken(n,"Invalid escape sequence in template string")}default:if(t>=48&&t<=55){var r=this.input.substr(this.pos-1,3).match(/^[0-7]+/)[0],i=parseInt(r,8);return i>255&&(r=r.slice(0,-1),i=parseInt(r,8)),this.pos+=r.length-1,t=this.input.charCodeAt(this.pos),(r!=="0"||t===56||t===57)&&(this.strict||e)&&this.invalidStringToken(this.pos-1-r.length,e?"Octal literal in template string":"Octal literal in strict mode"),String.fromCharCode(i)}return CS(t)?"":String.fromCharCode(t)}};qn.readHexChar=function(e){var t=this.pos,n=this.readInt(16,e);return n===null&&this.invalidStringToken(t,"Bad character escape sequence"),n};qn.readWord1=function(){this.containsEsc=!1;for(var e="",t=!0,n=this.pos,r=this.options.ecmaVersion>=6;this.pos<this.input.length;){var i=this.fullCharCodeAtPos();if(lx(i,r))this.pos+=i<=65535?1:2;else if(i===92){this.containsEsc=!0,e+=this.input.slice(n,this.pos);var s=this.pos;this.input.charCodeAt(++this.pos)!==117&&this.invalidStringToken(this.pos,"Expecting Unicode escape sequence \\uXXXX"),++this.pos;var o=this.readCodePoint();(t?Dm:lx)(o,r)||this.invalidStringToken(s,"Invalid Unicode escape"),e+=ry(o),n=this.pos}else break;t=!1}return e+this.input.slice(n,this.pos)};qn.readWord=function(){var e=this.readWord1(),t=K.name;return this.keywords.test(e)&&(t=aQ[e]),this.finishToken(t,e)};var mwt="8.11.3";Bs.acorn={Parser:Bs,version:mwt,defaultOptions:Vz,Position:oI,SourceLocation:u4,getLineInfo:RIe,Node:c4,TokenType:or,tokTypes:K,keywordTypes:aQ,TokContext:af,tokContexts:Ti,isIdentifierChar:lx,isIdentifierStart:Dm,Token:pQ,isNewLine:CS,lineBreak:Xc,lineBreakG:B_t,nonASCIIwhitespace:IIe};function gwt(e,t){return Bs.parse(e,t)}const mQ={undefined:"void(0)",Infinity:"Number.POSITIVE_INFINITY",NaN:"Number.NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2"},ywt={ecmaVersion:11},vfe="$",vwt="d",bwt="d1",_wt="d2",So=e=>(t,n)=>n.error(t,e+" not allowed"),wwt=So("Aggregate function"),Ewt=So("Window function"),xwt="Invalid argument",gQ="Invalid column reference",Swt=gQ+" (must be input to an aggregate function)",ake="Invalid function call",Twt="Invalid member expression",Cwt="Invalid operator parameter",Awt="Invalid param reference",Iwt="Invalid variable reference",kwt="Variable not accessible in operator call",Rwt="Unsupported variable declaration",Nwt="Unsupported destructuring pattern",uke="Table expressions do not support closures",lke="Use aq.escape(fn) to use a function as-is (including closures)",Pwt="use table.params({ name: value }) to define dynamic parameters",Dwt="use aq.addFunction(name, fn) to add new op functions",Owt=`
Note: ${uke}. ${lke}, or ${Pwt}.`,cke=`
Note: ${uke}. ${lke}, or ${Dwt}.`,$wt=`The ${cCe} method is not valid in multi-table expressions.`;function Mwt(e,t){const n=Lwt(t);let r=e.root=n;return e.spec=t,e.tuple=null,e.tuple1=null,e.tuple2=null,e.$param=null,e.$op=0,e.scope=new Set,e.paramsRef=new Map,e.columnRef=new Map,R_t(r)?(jwt(r,e),r=r.body):e.join?(e.scope.add(e.tuple1=bwt),e.scope.add(e.tuple2=_wt),e.scope.add(e.$param=vfe)):(e.scope.add(e.tuple=vwt),e.scope.add(e.$param=vfe)),er(r,e,yQ),e.root}function Lwt(e){try{const t=e.field?Fwt(e):dr(e)?kh(e):e;return gwt(`expr=(${t})`,ywt).body[0].expression.right}catch{xn(`Expression parse error: ${e+""}`)}}function Fwt(e){const t=JSON.stringify(e+"");return e.table?`(a,b)=>b[${t}]`:`d=>d[${t}]`}const yQ={FunctionDeclaration:So("Function definitions"),ForStatement:So("For loops"),ForOfStatement:So("For-of loops"),ForInStatement:So("For-in loops"),WhileStatement:So("While loops"),DoWhileStatement:So("Do-while loops"),AwaitExpression:So("Await expressions"),ArrowFunctionExpression:So("Function definitions"),AssignmentExpression:So("Assignments"),FunctionExpression:So("Function definitions"),NewExpression:So('Use of "new"'),UpdateExpression:So("Update expressions"),VariableDeclarator(e,t){Gz(e.id,t)},Identifier(e,t,n){hke(e,t,n)&&!t.scope.has(e.name)&&t.error(e,Iwt,Owt)},CallExpression(e,t){const n=fke(e.callee),r=aCe(n)||uCe(n);if(r){if((t.join||t.aggregate===!1)&&oX(n)&&wwt(e,t),(t.join||t.window===!1)&&aX(n)&&Ewt(e,t),t.$op=1,t.ast)Wz(e,n,t),e.arguments.forEach(i=>er(i,t,qz));else{const i=t.op(Bwt(t,r,n,e.arguments));Object.assign(e,{type:nCe,name:i.id})}return t.$op=0,!1}else oCe(n)?Wz(e,n,t):t.error(e,ake,cke)},MemberExpression(e,t,n){const{object:r,property:i}=e;if(!Ps(T0,r))return;const{name:s}=r;if(dke(e)&&Ps(T0,i)&&Xf(mQ,i.name)){gke(e,i.name);return}const o=s===t.tuple?0:s===t.tuple1?1:s===t.tuple2?2:-1;if(o>=0)return bfe(e,o,t,pke,n);if(s===t.$param)return bfe(e,o,t,zwt);t.paramsRef.has(s)?uI(e,t.paramsRef.get(s)):t.columnRef.has(s)?mke(r,s,t,e):Xf(t.params,s)&&uI(r,s)}};function bfe(e,t,n,r,i){const{property:s,computed:o}=e;let a;if(!o)a=s.name;else if(Ps(wS,s))a=s.value;else try{er(s,n,yQ,e),a=n.param(s)}catch{n.error(e,Twt)}return r(e,a,t,n,i),!1}const qz={...yQ,VariableDeclarator:So("Variable declaration in operator call"),Identifier(e,t,n){hke(e,t,n)&&t.error(e,kwt)},CallExpression(e,t){const n=fke(e.callee);oCe(n)?Wz(e,n,t):t.error(e,ake,cke)}};function jwt(e,t){e.generator&&So("Generator functions")(e,t),e.async&&So("Async functions")(e,t);const{params:n}=e,r=n.length,i=o=>(a,u)=>t.columnRef.set(a,[u,o]),s=(o,a)=>t.paramsRef.set(o,a);r&&(t.join?(jT(t,n[0],"tuple1",i(1)),r>1&&jT(t,n[1],"tuple2",i(2)),r>2&&jT(t,n[2],"$param",s)):(jT(t,n[0],"tuple",i(0)),r>1&&jT(t,n[1],"$param",s))),t.root=e.body}function jT(e,t,n,r){Ps(T0,t)?(e.scope.add(t.name),e[n]=t.name):Ps(eCe,t)&&t.properties.forEach(i=>{const s=Ps(T0,i.key)?i.key.name:Ps(wS,i.key)?i.key.value:e.error(i,xwt);Ps(T0,i.value)||e.error(i.value,Nwt),r(i.value.name,s)})}function Bwt(e,t,n,r){const i=[],s=[],o=t.param[0]||0,a=o+(t.param[1]||0);return r.forEach((u,l)=>{l<o?(er(u,e,qz),i.push(e.field(u))):l<a?(er(u,e,qz),s.push(e.param(u))):e.error(u,Cwt)}),{name:n,fields:i,params:s,...e.spec.window||{}}}function fke(e){return Ps(T0,e)?e.name:Ps(Z2e,e)?dke(e)?Uwt(e.property.name):e.property.name:null}function dke(e){return Ps(T0,e.object)&&e.object.name==="Math"}function Uwt(e){return e==="max"?"greatest":e==="min"?"least":e}function hke(e,t,n){const{name:r}=e;if(!(Ps(Z2e,n)&&n.property===e)){if(!(Ps(tCe,n)&&n.key===e))if(t.paramsRef.has(r))uI(e,t.paramsRef.get(r));else if(t.columnRef.has(r))mke(e,r,t,n);else if(Xf(t.params,r))uI(e,r);else if(Xf(mQ,r))gke(e,r);else return!0}}function pke(e,t,n,r,i){const s=n===0?r.table:n>0?r.join[n-1]:null,o=s&&s.column(t);s&&!o&&r.error(e,gQ),r.aggronly&&!r.$op&&r.error(e,Swt),lCe(e,t,n,o,i)}function mke(e,t,n,r){const[i,s]=n.columnRef.get(t);pke(e,i,s,n,r)}function zwt(e,t,n,r){r.params&&!Xf(r.params,t)&&r.error(e,Awt),uI(e,t)}function uI(e,t){e.type=Nyt,e.name=t}function gke(e,t){e.type=Iyt,e.name=t,e.raw=mQ[t]}function Wz(e,t,n){if(t===cCe){const r=n.table;r||n.error(e,$wt),fCe(e,e.arguments.length?e.arguments.map(i=>{const s=n.param(i),o=nu(s)?r.columnName(s):s;return r.column(o)||n.error(i,gQ),o}):r.columnNames())}else e.callee={type:Ryt,name:t}}function Gz(e,t){Ps(T0,e)?t.scope.add(e.name):Ps(Syt,e)?e.elements.forEach(n=>Gz(n,t)):Ps(eCe,e)?e.properties.forEach(n=>Gz(n.value,t)):t.error(e.id,Rwt)}const Vwt={[Dk]:1,[nCe]:1};function nl(e,t={}){const n=t.generate||n$,r=t.compiler||uX,i=qwt(t),s={},o={},a=[],u=[];let l=0,c=-1;const f=t.join?r.join:t.index==1?r.expr2:r.expr,d={op(m){const g=Hwt(m);return o[g]||(m.id=++c,o[g]=m)},field(m){const g=n(m);return s[g]||(s[g]=++l)},param(m){return Ps(wS,m)?m.value:r.param(n(m),i)},value(m,g){a.push(m);const y=g.escape||(t.ast?k_t(g):f(n(g),i));u.push(y),Vwt[g.type]&&y!==g&&wa(y)&&(y.field=g.name)},error(m,g,y=""){const v=m.start-6,_=m.end-6,w=String(d.spec).slice(v,_);xn(`${g}: "${w}"${y}`)}};Object.assign(d,t,{params:i});for(const[m,g]of Y6(e))d.value(m+"",g.escape?D_t(d,g,i):Mwt(d,g));if(t.ast)return{names:a,exprs:u};const h=[];for(const m in s)h[s[m]]=r.expr(m,i);const p=Object.values(o);return p.forEach(m=>m.fields=m.fields.map(g=>h[g])),{names:a,exprs:u,ops:p}}function Hwt(e){let t=`${e.name}(${e.fields.concat(e.params).join(",")})`;if(e.frame){const n=e.frame.map(r=>Number.isFinite(r)?Math.abs(r):-1);t+=`[${n},${!!e.peers}]`}return t}function qwt(e){return(e.table?a9(e.table):e.join?{...a9(e.join[1]),...a9(e.join[0])}:{})||{}}function a9(e){return e&&gi(e.params)?e.params():{}}const yke="Expr",uf="ExprList",vke="ExprNumber",M2="ExprObject",Nw="JoinKeys",T$="JoinValues",fc="Options",vQ="OrderKeys",Cg="SelectionList",qv="TableRef",Pw="TableRefList",Wwt="Descending",Gwt="Query",Ywt="Selection",Kwt="Verb",Xwt="Window";function d4(e,t){return e&&e.expr?new _fe({...e,...t}):new _fe(t,e)}class _fe{constructor(t,n){this.expr=n,Object.assign(this,t)}toString(){return String(this.expr)}toObject(){return{...this,expr:this.toString(),...gi(this.expr)?{func:!0}:{}}}}function Qwt(e){return d4(e,{desc:!0})}function Z1(e,t,n=0){const r=n?{field:!0,table:n}:{field:!0};return d4(e,t?{expr:t,...r}:r)}function Jwt(e,t,n){return d4(e,{window:{frame:t||[-1/0,0],peers:!!n}})}function Zwt(e){const t=n=>n;return t.toString=()=>e,t}function wfe(e,t){return t=t&&gi(t.query)?t.query():t,t&&gi(t.evaluate)?t.evaluate(null,e):e(t)}function bke(e){return wa(e)&&(dr(e.all)||dr(e.matches)||dr(e.not)||dr(e.range))}function lI(e){return e&&gi(e.toObject)?e.toObject():gi(e)?{expr:String(e),func:!0}:dr(e)?e.map(lI):wa(e)?o4(e,t=>lI(t)):e}function bQ(e){return dr(e)?e.map(bQ):wa(e)?dr(e.verbs)?wQ.from(e):dr(e.all)?ux():dr(e.range)?S_t(...e.range):dr(e.match)?T_t(RegExp(...e.match)):dr(e.not)?xIe(e.not.map(lI)):eEt(e):e}function eEt(e){let t=e,n=e.expr;if(n!=null){if(e.field===!0?t=n=Z1(n):e.func===!0&&(t=n=Zwt(n)),wa(e.window)){const{frame:r,peers:i}=e.window;t=n=Jwt(n,r,i)}e.desc===!0&&(t=Qwt(n))}return e===t?o4(e,r=>bQ(r)):t}function tEt(e){return dr(e)?e.map(nEt):e}function nEt(e){const t=[];return Zu(e).forEach(n=>{nu(n)?t.push(n):Bo(n)?t.push(Z1(n,null)):wa(n)&&n.expr||gi(n)?t.push(n):xn(`Invalid key value: ${n+""}`)}),t}function rEt(e){return dr(e)?e.map(iEt):e}function iEt(e,t){return t<2?Zu(e):e}function sEt(e){const t=[];return e.forEach(n=>{const r=n.expr!=null?n.expr:n;if(wa(r)&&!gi(r))for(const i in r)t.push(r[i]);else n=nu(r)?r:Bo(r)?Z1(n):gi(r)?n:xn(`Invalid orderby field: ${n+""}`),t.push(n)}),t}const oEt={[yke]:xke,[uf]:cx,[vke]:dEt,[M2]:iy,[Nw]:hEt,[T$]:pEt,[vQ]:cx,[Cg]:cEt};function aEt(e,t,n){return t===qv?Efe(e):t===Pw?e.map(Efe):_ke(lI(e),t,n)}function _ke(e,t,n){return t===fc?e&&uEt(e,n):oEt[t](e)}function uEt(e,t={}){const n={};for(const r in e){const i=e[r];n[r]=t[r]?_ke(i,t[r]):i}return n}function lEt(e,t){return nl({expr:e},{...t,ast:!0}).exprs[0]}function _Q(e){return{type:Dk,name:e}}function wke(e){return{type:Dk,index:e}}function iy(e,t){if(Bo(e))return lEt(e,t);if(e.expr){let n;if(e.field===!0?n=_Q(e.expr):e.func===!0&&(n=iy(e.expr,t)),n)return e.desc&&(n={type:Wwt,expr:n}),e.window&&(n={type:Xwt,expr:n,...e.window}),n}return Object.keys(e).map(n=>({...iy(e[n],t),as:n}))}function Eke(e){const t=Ywt;return e.all?{type:t,operator:"all"}:e.not?{type:t,operator:"not",arguments:cx(e.not)}:e.range?{type:t,operator:"range",arguments:cx(e.range)}:e.matches?{type:t,operator:"matches",arguments:e.matches}:xn("Invalid input")}function cEt(e){return Zu(e).map(fEt).flat()}function fEt(e){return bke(e)?Eke(e):nu(e)?wke(e):Bo(e)?_Q(e):wa(e)?Object.keys(e).map(t=>({type:Dk,name:t,as:e[t]})):xn("Invalid input")}function xke(e){return bke(e)?Eke(e):nu(e)?wke(e):Bo(e)?_Q(e):wa(e)?iy(e):xn("Invalid input")}function cx(e){return Zu(e).map(xke).flat()}function dEt(e){return nu(e)?e:iy(e)}function hEt(e){return dr(e)?e.map(cx):iy(e,{join:!0})}function pEt(e){return dr(e)?e.map((t,n)=>n<2?cx(t):iy(t,{join:!0})):iy(e,{join:!0})}function Efe(e){return e&&gi(e.toAST)?e.toAST():e}class Ske{constructor(t,n=[],r=[]){this.verb=t,this.schema=n,n.forEach((i,s)=>{const o=i.type,a=r[s],u=o===Nw?tEt(a):o===T$?rEt(a):o===vQ?sEt(a):a;this[i.name]=u!==void 0?u:i.default})}static from(t){const n=Yz[t.verb],r=(n.schema||[]).map(({name:i})=>bQ(t[i]));return n(...r)}evaluate(t,n){const r=this.schema.map(({name:i,type:s})=>{const o=this[i];return s===qv?wfe(n,o):s===Pw?o.map(a=>wfe(n,a)):o});return t[this.verb](...r)}toObject(){const t={verb:this.verb};return this.schema.forEach(({name:n})=>{t[n]=lI(this[n])}),t}toAST(){const t={type:Kwt,verb:this.verb};return this.schema.forEach(({name:n,type:r,props:i})=>{t[n]=aEt(this[n],r,i)}),t}}function Lr(e,t){return Object.assign((...n)=>new Ske(e,t,n),{schema:t})}const Yz={count:Lr("count",[{name:"options",type:fc}]),derive:Lr("derive",[{name:"values",type:M2},{name:"options",type:fc,props:{before:Cg,after:Cg}}]),filter:Lr("filter",[{name:"criteria",type:M2}]),groupby:Lr("groupby",[{name:"keys",type:uf}]),orderby:Lr("orderby",[{name:"keys",type:vQ}]),relocate:Lr("relocate",[{name:"columns",type:Cg},{name:"options",type:fc,props:{before:Cg,after:Cg}}]),rename:Lr("rename",[{name:"columns",type:Cg}]),rollup:Lr("rollup",[{name:"values",type:M2}]),sample:Lr("sample",[{name:"size",type:vke},{name:"options",type:fc,props:{weight:yke}}]),select:Lr("select",[{name:"columns",type:Cg}]),ungroup:Lr("ungroup"),unorder:Lr("unorder"),reify:Lr("reify"),dedupe:Lr("dedupe",[{name:"keys",type:uf,default:[]}]),impute:Lr("impute",[{name:"values",type:M2},{name:"options",type:fc,props:{expand:uf}}]),fold:Lr("fold",[{name:"values",type:uf},{name:"options",type:fc}]),pivot:Lr("pivot",[{name:"keys",type:uf},{name:"values",type:uf},{name:"options",type:fc}]),spread:Lr("spread",[{name:"values",type:uf},{name:"options",type:fc}]),unroll:Lr("unroll",[{name:"values",type:uf},{name:"options",type:fc,props:{drop:uf}}]),lookup:Lr("lookup",[{name:"table",type:qv},{name:"on",type:Nw},{name:"values",type:uf}]),join:Lr("join",[{name:"table",type:qv},{name:"on",type:Nw},{name:"values",type:T$},{name:"options",type:fc}]),cross:Lr("cross",[{name:"table",type:qv},{name:"values",type:T$},{name:"options",type:fc}]),semijoin:Lr("semijoin",[{name:"table",type:qv},{name:"on",type:Nw}]),antijoin:Lr("antijoin",[{name:"table",type:qv},{name:"on",type:Nw}]),concat:Lr("concat",[{name:"tables",type:Pw}]),union:Lr("union",[{name:"tables",type:Pw}]),intersect:Lr("intersect",[{name:"tables",type:Pw}]),except:Lr("except",[{name:"tables",type:Pw}])};let wQ=class Tke extends B2e{constructor(t,n,r){super(n),this._verbs=t||[],this._table=r}static from({verbs:t,table:n,params:r}){return new Tke(t.map(Ske.from),r,n)}get[Symbol.toStringTag](){return this._verbs?`Query: ${this._verbs.length} verbs`+(this._table?` on '${this._table}'`:""):"Object"}get length(){return this._verbs.length}get tableName(){return this._table}params(t){return arguments.length?(this._params={...this._params,...t},this):this._params}evaluate(t,n){t=t||n(this._table);for(const r of this._verbs)t=r.evaluate(t.params(this._params),n);return t}toObject(){return xfe(this,"toObject")}toJSON(){return this.toObject()}toAST(){return xfe(this,"toAST",{type:Gwt})}};function xfe(e,t,n){return{...n,verbs:e._verbs.map(r=>r[t]()),...e._params?{params:e._params}:null,...e._table?{table:e._table}:null}}function mEt(e,t){return new wQ(e._verbs.concat(t),e._params,e._table)}for(const e in Yz){const t=Yz[e];wQ.prototype["__"+e]=function(n,...r){return mEt(n,t(...r))}}function kS(e,t,...n){const r=["_","$"],i=r.slice(0,n.length);return i.push('"use strict"; const '+n.map((s,o)=>s.map((a,u)=>`${r[o]}${u} = ${r[o]}[${u}]`).join(", ")).join(", ")+`; return (${e}) => ${t};`),Function(...i)(...n)}function gEt(e,t=[]){return e.groupby(t.length?t:e.columnNames()).filter("row_number() === 1").ungroup().reify()}function EQ(e,t){const n=ec();return t.forEach((r,i)=>{const s=Bo(r)?r:i;if(s){const o=e.column(i)||xn(`Unrecognized column: ${i}`);n.add(s,o)}}),e.create(n)}function Cke(e,t,{before:n,after:r}={}){const i=n!=null,s=r!=null;i||s||xn("relocate requires a before or after option."),i&&s&&xn("relocate accepts only one of the before or after options."),t=Pm(e,t);const o=[...Pm(e,i?n:r).keys()],a=i?o[0]:o.pop(),u=new Map;return e.columnNames().forEach(l=>{const c=!t.has(l);if(l===a){s&&c&&u.set(l,l);for(const[f,d]of t)u.set(f,d);if(s)return}c&&u.set(l,l)}),EQ(e,u)}function zk(e,t=r=>r,n=""){const r=e.length;if(!r)return"";let i=t(e[0],0);for(let s=1;s<r;++s)i+=n+t(e[s],s);return i}function xQ(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function yEt(e,t=0,n=e.length){let r=n?e[t++]:ar;for(let i=t;i<n;++i)r>e[i]&&(r=e[i]);return r}function vEt(e,t=0,n=e.length){let r=n?e[t++]:ar;for(let i=t;i<n;++i)r<e[i]&&(r=e[i]);return r}function sP(e){return ZA(e)?e:+e}function bEt(e,t){const n=e.length;if(!n)return ar;if((t=+t)<=0||n<2)return sP(e[0]);if(t>=1)return sP(e[n-1]);const r=(n-1)*t,i=Math.floor(r),s=sP(e[i]);return ZA(s)?s:s+(sP(e[i+1])-s)*(r-i)}class _Et{constructor(t){this._values=t||[],this._sorted=null,this._start=0}values(t){return this._start&&(this._values=this._values.slice(this._start),this._start=0),t?this._values.slice():this._values}add(t){this._values.push(t),this._sorted=null}rem(){this._start+=1,this._sorted=null}min(){return this._sorted&&this._sorted.length?this._sorted[0]:yEt(this._values,this._start)}max(){return this._sorted&&this._sorted.length?this._sorted[this._sorted.length-1]:vEt(this._values,this._start)}quantile(t){return this._sorted||(this._sorted=this.values(!0),this._sorted.sort(xQ)),bEt(this._sorted,t)}}const C$=(e,t,n)=>kS(t,"{"+zk(e,(r,i)=>`_${i}.${n}(${t});`)+"}",e);function wEt(e,t){const{ops:n,output:r}=EEt(e,t),i=e[0].fields,s=i.length,o=s===0?SQ:s===1?xEt:s===2?SEt:xn("Unsupported field count: "+s);return new o(i,n,r,t)}function EEt(e,t){const n={},r=[];function i(o,a=[]){const u=o+":"+a;if(n[u])return n[u];const l=aCe(o),c=l.create(...a);return t<0&&l.stream&&l.stream.forEach(f=>i(f,[])),l.req&&l.req.forEach(f=>i(f,[])),n[u]=c,r.push(c),c}const s=e.map(o=>{const a=i(o.name,o.params);return a.output=o.id,a});return{ops:r,output:s}}class SQ extends A_t{constructor(t,n,r,i){super(r),this._op=n,this._fields=t,this._stream=!!i}init(){const t={count:0,valid:0,stream:this._stream};return this._op.forEach(n=>n.init(t)),t.values&&(t.list=new _Et),t}write(t,n,r){const i=this._outputs,s=i.length;for(let o=0;o<s;++o)n[i[o].output][r]=i[o].value(t);return 1}_add(){}_rem(){}add(t){++t.count}rem(t){--t.count}}class xEt extends SQ{constructor(t,n,r,i){super(t,n,r,i);const s=["state","v1","v2"];this._add=C$(n,s,"add"),this._rem=C$(n,s,"rem")}add(t,n,r){const i=this._fields[0](n,r);++t.count,Df(i)&&(++t.valid,t.list&&t.list.add(i),this._add(t,i))}rem(t,n,r){const i=this._fields[0](n,r);--t.count,Df(i)&&(--t.valid,t.list&&t.list.rem(),this._rem(t,i))}}class SEt extends SQ{constructor(t,n,r,i){super(t,n,r,i);const s=["state","v1","v2"];this._add=C$(n,s,"add"),this._rem=C$(n,s,"rem")}add(t,n,r){const i=this._fields[0](n,r),s=this._fields[1](n,r);++t.count,Df(i)&&Df(s)&&(++t.valid,t.list&&t.list.add([i,s]),this._add(t,i,s))}rem(t,n,r){const i=this._fields[0](n,r),s=this._fields[1](n,r);--t.count,Df(i)&&Df(s)&&(--t.valid,t.list&&t.list.rem(),this._rem(t,i,s))}}function Jb(e,t,n){if(t.length){const r=e.data(),{keys:i}=e.groups()||{},s=RS(e,t),o=i?(a,u)=>s[a][i[u]]:a=>s[a][0];n=n.map(a=>u=>a(u,r,o))}return n}function RS(e,t,n){if(!t.length)return n;const r=Ake(t),i=e.groups(),s=i?i.size:1;return n=n||W6(t.length,()=>Array(s)),s>1?r.forEach(o=>{const a=kke(e,o,i);for(let u=0;u<s;++u)o.write(a[u],n,u)}):r.forEach(o=>{const a=Ike(e,o);o.write(a,n,0)}),n}function Ake(e,t){const n=[],r={};for(const i of e){const s=i.fields.map(o=>o+"").join(",");(r[s]||(r[s]=[])).push(i)}for(const i in r)n.push(wEt(r[i],t));return n}function Ike(e,t){const n=t.init(),r=e.totalRows(),i=e.data(),s=e.mask();if(e.isOrdered()){const o=e.indices();for(let a=0;a<r;++a)t.add(n,o[a],i)}else if(s)for(let o=s.next(0);o>=0;o=s.next(o+1))t.add(n,o,i);else for(let o=0;o<r;++o)t.add(n,o,i);return n}function kke(e,t,n){const{keys:r,size:i}=n,s=W6(i,()=>t.init()),o=e.data();if(e.isOrdered()){const a=e.indices(),u=a.length;for(let l=0;l<u;++l){const c=a[l];t.add(s[r[c]],c,o)}}else if(e.isFiltered()){const a=e.mask();for(let u=a.next(0);u>=0;u=a.next(u+1))t.add(s[r[u]],u,o)}else{const a=e.totalRows();for(let u=0;u<a;++u)t.add(s[r[u]],u,o)}return s}function Rke(e,t){const{get:n,names:r,rows:i,size:s}=t,o=r.length;for(let a=0;a<o;++a){const u=e.add(r[a],Array(s)),l=n[a];for(let c=0;c<s;++c)u[c]=l(i[c])}}function Nke(e){return{left(t,n,r,i){for(r==null&&(r=0),i==null&&(i=t.length);r<i;){const s=r+i>>>1;e(t[s],n)<0?r=s+1:i=s}return r},right(t,n,r,i){for(r==null&&(r=0),i==null&&(i=t.length);r<i;){const s=r+i>>>1;e(t[s],n)>0?i=s:r=s+1}return r}}}const Sfe=Nke(xQ);function TEt(e,t,n,r,i){let s,o,a,u,l;const c=m=>o[m-1]===o[m],f=r.length,d=i.length,h=r.length?kS(["w","r","k"],"{"+zk(r,(m,g)=>`r[_${g}.id][k]=_${g}.value(w,_${g}.get);`)+"}",r):()=>{},p={i0:0,i1:0,index:0,size:0,peer:c,init(m,g,y,v){p.index=p.i0=p.i1=0,p.size=g.length,s=m,o=g,u=y,l=v,a=i?i.map(_=>_.init()):null;for(let _=0;_<f;++_)r[_].init();return p},value(m,g){return g(s[m],e)},step(m){const[g,y]=t,v=p.size,_=p.i0,w=p.i1;p.i0=g!=null?Math.max(0,m-Math.abs(g)):0,p.i1=y!=null?Math.min(v,m+Math.abs(y)+1):v,p.index=m,n&&(p.i0>0&&c(p.i0)&&(p.i0=Sfe.left(o,o[p.i0])),p.i1<v&&c(p.i1)&&(p.i1=Sfe.right(o,o[p.i1-1])));for(let E=0;E<d;++E){const S=i[E],T=a[E];for(let C=_;C<p.i0;++C)S.rem(T,s[C],e);for(let C=w;C<p.i1;++C)S.add(T,s[C],e);S.write(T,u,l)}return h(p,u,l),u}};return p}const CEt=e=>(e.frame||[null,null]).map(t=>Number.isFinite(t)?Math.abs(t):null),AEt=e=>!!e.peers;function IEt(e){const{id:t,name:n,fields:r=[],params:i=[]}=e,s=uCe(n).create(...i);return r.length&&(s.get=r[0]),s.id=t,s}function kEt(e,t,n,r={},i){const s=e.data(),o=REt(i,s),a=o.length,u=kS(["r","d","op"],"{"+zk(t,(l,c)=>`_${c}[r] = $${c}(r, d, op);`)+"}",t,n);e.partitions().forEach((l,c)=>{const f=l.length,d=NEt(e,l);for(let p=0;p<a;++p)o[p].init(l,d,r,c);const h=p=>r[p][c];for(let p=0;p<f;++p){for(let m=0;m<a;++m)o[m].step(p);u(l[p],s,h)}})}function REt(e,t){const n={};return e.forEach(r=>{const i=CEt(r),s=AEt(r),o=`${i},${s}`,{aggOps:a,winOps:u}=n[o]||(n[o]={frame:i,peers:s,aggOps:[],winOps:[]});oX(r.name)?a.push(r):u.push(IEt(r))}),Object.values(n).map(r=>TEt(t,r.frame,r.peers,r.winOps,Ake(r.aggOps,r.frame[0]!=null?-1:1)))}function NEt(e,t){if(e.isOrdered()){const n=e.comparator(),r=e.data(),i=t.length,s=new Uint32Array(i);for(let o=1,a=0;o<i;++o)s[o]=n(t[o-1],t[o],r)?++a:a;return s}else return t}function PEt(e){return aX(e.name)||e.frame&&(Number.isFinite(e.frame[0])||Number.isFinite(e.frame[1]))}function TQ(e,{names:t,exprs:n,ops:r},i={}){const s=e.totalRows(),o=ec(i.drop?null:e),a=t.map(d=>o.add(d,Array(s))),[u,l]=DEt(r),c=e.isGrouped()?e.groups().size:1,f=RS(e,u,W6(r.length,()=>Array(c)));return l.length?kEt(e,a,n,f,l):OEt(e,a,n,f),e.create(o)}function DEt(e){const t=[],n=[],r=e.length;for(let i=0;i<r;++i){const s=e[i];s.id=i,(PEt(s)?n:t).push(s)}return[t,n]}function OEt(e,t,n,r){const i=e.mask(),s=e.data(),{keys:o}=e.groups()||{},a=o?(l,c)=>r[l][o[c]]:l=>r[l][0],u=t.length;for(let l=0;l<u;++l){const c=n[l],f=t[l];if(i)for(let d=i.next(0);d>=0;d=i.next(d+1))f[d]=c(d,s,a);else{const d=e.totalRows();for(let h=0;h<d;++h)f[h]=c(h,s,a)}}}function $Et(e,t,n={}){const r=TQ(e,nl(t,{table:e}),n);return n.drop||n.before==null&&n.after==null?r:Cke(r,Object.keys(t).filter(i=>!e.column(i)),n)}function MEt(e,t){if(t.length===0)return e;const n=e.columnNames();return t.reduce((r,i)=>r.antijoin(i.select(n)),e).dedupe()}const oP=2147483648,LEt=4294967295;class Pke{constructor(t){this._size=t,this._bits=new Uint32Array(Math.ceil(t/32))}get length(){return this._size}count(){const t=this._bits.length;let n=0;for(let r=0;r<t;++r)for(let i=this._bits[r];i;++n)i&=i-1;return n}get(t){return this._bits[t>>5]&oP>>>t}set(t){this._bits[t>>5]|=oP>>>t}clear(t){this._bits[t>>5]&=~(oP>>>t)}scan(t){for(let n=this.next(0);n>=0;n=this.next(n+1))t(n)}next(t){const n=this._bits,r=n.length;let i=t>>5,s=n[i]&LEt>>>t;for(;i<r;s=n[++i])if(s!==0)return(i<<5)+Math.clz32(s);return-1}nth(t){let n=this.next(0);for(;t--&&n>=0;)n=this.next(n+1);return n}not(){const t=this._bits,n=t.length;for(let i=0;i<n;++i)t[i]=~t[i];const r=this._size%32;return r&&(t[n-1]&=oP>>r-1),this}and(t){if(t){const n=this._bits,r=t._bits,i=n.length;for(let s=0;s<i;++s)n[s]&=r[s]}return this}or(t){if(t){const n=this._bits,r=t._bits,i=n.length;for(let s=0;s<i;++s)n[s]|=r[s]}return this}}function FEt(e,t){const n=e.totalRows(),r=e.mask(),i=e.data(),s=new Pke(n);if(r)for(let o=r.next(0);o>=0;o=r.next(o+1))t(o,i)&&s.set(o);else for(let o=0;o<n;++o)t(o,i)&&s.set(o);return e.create({filter:s})}function jEt(e,t){const n=nl({p:t},{table:e});let r=n.exprs[0];if(n.ops.length){const{data:i}=TQ(e,n,{drop:!0}).column("p");r=s=>i[s]}return FEt(e,r)}function Dke(e,{names:t=[],exprs:n=[],ops:r=[]},i={}){if(!t.length)return e;const s=i.limit>0?+i.limit:1/0,o=i.index?i.index===!0?"index":i.index+"":null,a=new Set(i.drop),u=Jb(e,r,n),l=ec(),c=new Set(t),f=[],d=[],h=[];e.columnNames().forEach(w=>{if(!a.has(w)){const E=l.add(w,[]);c.has(w)||(f.push(e.column(w)),d.push(E))}}),t.forEach(w=>{a.has(w)||(l.has(w)||l.add(w,[]),h.push(l.data[w]))});const p=o?l.add(o,[]):null;let m=0;const g=f.length,y=h.length,v=(w,E)=>{for(let S=0;S<g;++S)d[S].length=m+E,d[S].fill(f[S].get(w),m,m+E)},_=p?(w,E)=>{for(let S=0;S<E;++S)p[w+S]=S}:()=>{};if(y===1){const w=u[0],E=h[0];e.scan((S,T)=>{const C=Zu(w(S,T)),A=Math.min(C.length,s);v(S,A);for(let k=0;k<A;++k)E[m+k]=C[k];_(m,A),m+=A})}else e.scan((w,E)=>{let S=0;const T=u.map(C=>{const A=Zu(C(w,E));return S=Math.min(Math.max(S,A.length),s),A});v(w,S);for(let C=0;C<y;++C){const A=h[C],k=T[C];for(let N=0;N<S;++N)A[m+N]=k[N]}_(m,S),m+=S});return e.create(l.new())}function BEt(e,{names:t=[],exprs:n=[],ops:r=[]},i={}){if(t.length===0)return e;const[s="key",o="value"]=i.as||[],a=Jb(e,r,n);return Dke(e,{names:[s,o],exprs:[()=>t,(u,l)=>a.map(c=>c(u,l))]},{...i,drop:t})}function Jf(e,t,n,r={window:!1}){const i=new Map,s=o=>{o=nu(o)?t.columnName(o):o,Bo(o)?i.set(o,Z1(o)):gi(o)?Pm(t,o).forEach(s):wa(o)?wIe(i,o):xn(`Invalid ${e} value: ${o+""}`)};return Zu(n).forEach(s),r.preparse&&r.preparse(i),nl(i,{table:t,...r})}function UEt(e,t,n){return BEt(e,Jf("fold",e,t),n)}function Tfe(e,t,n,r){const i=n&&n.length;return zEt(i?VEt(e,n,r):e,t,i)}function zEt(e,{names:t,exprs:n,ops:r},i){const s=Jb(e,r,n),o=i?null:ec(e),a=e.totalRows();return t.forEach((u,l)=>{const c=e.column(u),f=i?c.data:o.add(u,Array(a)),d=s[l];e.scan(h=>{const p=c.get(h);f[h]=Df(p)?p:d(h)})}),i?e:e.create(o)}function VEt(e,t,n){const r=e.groups(),i=e.data(),s=(r?r.names:[]).concat(t),o=(r?r.get:[]).concat(t.map(p=>e.getter(p))),a=new Set,u=r$(o);e.scan((p,m)=>a.add(u(p,m)));const l=e.columnNames(),c=ec(),f=l.map(p=>c.add(p,[]));l.forEach((p,m)=>{const g=i[p],y=f[m];e.scan(v=>y.push(g.get(v)))});const d=r$(o.map((p,m)=>g=>g[m])),h=kS("v","{"+f.map((p,m)=>`_${m}.push(v[$${m}]);`).join("")+"}",f,l.map(p=>s.indexOf(p)));if(r){let p=r.keys.length;const m=n.reduce((y,v)=>y*v.length,r.size),g=new Uint32Array(m+(p-a.size));g.set(r.keys),Cfe(r,n,(y,v)=>{a.has(d(y))||(h(y),g[p++]=v[0])}),c.groupby({...r,keys:g})}else Cfe(r,n,p=>{a.has(d(p))||h(p)});return e.create(c.new())}function Cfe(e,t,n){const r=e?e.get.length:0,i=e?1:0,s=i+t.length,o=new Int32Array(s),a=new Int32Array(s),u=[];if(e){const{get:c,rows:f,size:d}=e;o[0]=d,u.push((h,p)=>{const m=f[p];for(let g=0;g<r;++g)h[g]=c[g](m)})}t.forEach((c,f)=>{const d=f+r;o[f+i]=c.length,u.push((h,p)=>h[d]=c[p])});const l=Array(r+t.length);for(let c=0;c<s;++c)u[c](l,0);n(l,a);for(let c=s-1;c>=0;){const f=++a[c];f<o[c]?(u[c](l,f),n(l,a),c=s-1):(a[c]=0,u[c](l,0),--c)}}function CQ(e,{names:t,exprs:n,ops:r}){const i=ec(),s=e.groups();return s&&Rke(i,s),HEt(t,n,s,RS(e,r),i),e.create(i.new())}function HEt(e,t,n,r=[],i){if(!t.length)return;const s=n?n.size:1,o=(u,l)=>r[u][l],a=e.length;for(let u=0;u<a;++u){const l=t[u];if(l.field!=null)i.add(e[u],r[l.field]);else if(s>1){const c=i.add(e[u],Array(s));for(let f=0;f<s;++f)c[f]=l(f,null,o)}else i.add(e[u],[l(0,null,o)])}}function qEt(e,t,n={}){if(t=nl(t,{table:e}),t.names.forEach(r=>e.column(r)?0:xn(`Invalid impute column ${kh(r)}`)),n.expand){const r={preparse:WEt,aggronly:!0},i=Jf("impute",e,n.expand,r),s=CQ(e.ungroup(),i);return Tfe(e,t,i.names,i.names.map(o=>s.get(o,0)))}else return Tfe(e,t)}function WEt(e){e.forEach((t,n)=>t.field?e.set(n,K2e(t+"")):0)}function GEt(e,t){const n=e.columnNames();return t.length?t.reduce((r,i)=>r.semijoin(i.select(n)),e).dedupe():e.reify([])}function Oke(e,t){const n=new Map;return e.scan((r,i)=>{const s=t(r,i);s!=null&&s===s&&n.set(s,r)}),n}function YEt(e,t,n){const r=new Map,i=e.length;for(let s=0;s<i;++s){const o=e[s],a=n(o,t);a!=null&&a===a&&(r.has(a)?r.get(a).push(s):r.set(a,[s]))}return r}function KEt(e,t){const n=["i","a","j","b"];return kS(n,"{"+zk(e,(r,i)=>`_${i}.push($${i}(${n}));`)+"}",e,t)}function XEt(e,t,n,{names:r,exprs:i},s={}){const o=e.data(),a=e.indices(!1),u=a.length,l=new Int32Array(u),c=t.data(),f=t.indices(!1),d=f.length,h=new Int32Array(d),p=r.length,m=ec(),g=Array(p),y=Array(p);for(let w=0;w<r.length;++w)g[w]=m.add(r[w],[]),y[w]=i[w];const v=KEt(g,y);if((dr(n)?JEt:QEt)(v,n,o,c,a,f,l,h,u,d),s.left)for(let w=0;w<u;++w)l[w]||v(a[w],o,-1,c);if(s.right)for(let w=0;w<d;++w)h[w]||v(-1,o,f[w],c);return e.create(m.new())}function QEt(e,t,n,r,i,s,o,a,u,l){for(let c=0;c<u;++c){const f=i[c];for(let d=0;d<l;++d){const h=s[d];t(f,n,h,r)&&(e(f,n,h,r),o[c]=1,a[d]=1)}}}function JEt(e,[t,n],r,i,s,o,a,u,l,c){let f,d,h,p,m,g,y,v,_=e;l>=c?(f=r,d=t,h=a,p=s,m=i,g=n,y=u,v=o):(f=i,d=n,h=u,p=o,m=r,g=t,y=a,v=s,_=(S,T,C,A)=>e(C,A,S,T));const w=YEt(v,m,g),E=p.length;for(let S=0;S<E;++S){const T=p[S],C=w.get(d(T,f));if(C){const A=C.length;for(let k=0;k<A;++k){const N=C[k];_(T,f,v[N],m),y[N]=1}h[S]=1}}}function A$(e,t,n){const r=new Map;Zu(n).forEach((s,o)=>{s=nu(s)?t.columnName(s):s,Bo(s)?r.set(o,Z1(s)):gi(s)||wa(s)&&s.expr?r.set(o,s):xn(`Invalid ${e} key value: ${s+""}`)});const i=nl(r,{table:t,aggregate:!1,window:!1});return r$(i.exprs,!0)}function ZEt(e,t){const n=new Set(t);return e.filter(r=>n.has(r))}function AQ(e,t,n){if(n)Bo(n)?n=[n,n]:dr(n)&&n.length===1&&(n=[n[0],n[0]]);else{const r=ZEt(e.columnNames(),t.columnNames());r.length||xn("Natural join requires shared column names."),n=[r,r]}return n}function $ke(e,t,n,r){return n.length!==r.length&&xn("Mismatched number of join keys"),[A$("join",e,n),A$("join",t,r)]}const ext={aggregate:!1,window:!1},txt={...ext,index:1};function Afe(e,t,n,r,i={}){n=AQ(e,t,n);const s={join:[e,t]};let o;if(dr(n)){const[a,u]=n.map(Zu);o=$ke(e,t,a,u),r||(r=nxt(e,a,u,i))}else o=nl({on:n},s).exprs[0],r||(r=[ux(),ux()]);return XEt(e,t,o,rxt(e,t,r,s,i&&i.suffix),i)}function nxt(e,t,n,r){const i=[];t.forEach((o,a)=>Bo(o)&&o===n[a]?i.push(o):0);const s=xIe(i);if(r.left&&r.right){const o=new Set(i);return[e.columnNames().map(a=>{const u=`[${kh(a)}]`;return o.has(a)?{[a]:`(a, b) => a${u} == null ? b${u} : a${u}`}:a}),s]}return r.right?[s,ux()]:[ux(),s]}function rxt(e,t,n,r,i=[]){if(dr(n)){let s,o,a,u=n.length;s=o=a={names:[],exprs:[]},u--&&(s=Jf("join",e,n[0],r)),u--&&(o=Jf("join",t,n[1],txt)),u--&&(a=nl(n[2],r));const l=new Set,c=new Set(s.names);return o.names.forEach(f=>{c.has(f)&&l.add(f)}),l.size&&(i[0]!==""&&Ife(s.names,l,i[0]||"_1"),i[1]!==""&&Ife(o.names,l,i[1]||"_2")),{names:s.names.concat(o.names,a.names),exprs:s.exprs.concat(o.exprs,a.exprs)}}else return nl(n,r)}function Ife(e,t,n){e.forEach((r,i)=>t.has(r)?e[i]=r+n:0)}function ixt(e,t,n,r={}){const i=new Pke(e.totalRows());return(dr(n)?sxt:oxt)(i,e,t,n),r.anti&&i.not().and(e.mask()),e.create({filter:i})}function sxt(e,t,n,[r,i]){const s=Oke(n,i);t.scan((o,a)=>{s.get(r(o,a))>=0&&e.set(o)})}function oxt(e,t,n,r){const i=t.numRows(),s=n.numRows(),o=t.data(),a=n.data();if(t.isFiltered()||n.isFiltered()){const u=t.indices(!1),l=n.indices(!1);for(let c=0;c<i;++c){const f=u[c];for(let d=0;d<s;++d)if(r(f,o,l[d],a)){e.set(f);break}}}else for(let u=0;u<i;++u)for(let l=0;l<s;++l)if(r(u,o,l,a)){e.set(u);break}}function kfe(e,t,n,r){n=AQ(e,t,n);const i=dr(n)?$ke(e,t,...n.map(Zu)):nl({on:n},{join:[e,t]}).exprs[0];return ixt(e,t,i,r)}function axt(e,t,[n,r],{names:i,exprs:s,ops:o}){const a=ec(e),u=e.totalRows();i.forEach(d=>a.add(d,Array(u).fill(ar)));const l=Oke(t,r),c=kS(["lr","rr","data"],"{"+zk(i,(d,h)=>`_[${h}][lr] = $[${h}](rr, data);`)+"}",i.map(d=>a.data[d]),Jb(t,o,s)),f=t.data();return e.scan((d,h)=>{const p=l.get(n(d,h));p>=0&&c(d,p,f)}),e.create(a)}function uxt(e,t,n,r){return n=AQ(e,t,n),axt(e,t,[A$("lookup",e,n[0]),A$("lookup",t,n[1])],Jf("lookup",t,r))}const Kz=(e,t)=>e??t;function lxt(e,t,n,r={}){const{keys:i,keyColumn:s}=cxt(e,t,r),o=Kz(r.valueSeparator,"_"),a=n.names.length>1?(l,c)=>c+o+i[l]:l=>i[l],u=i.map(l=>RS(e,n.ops.map(c=>{if(c.name==="count"){const d=h=>l===s[h]?1:NaN;return d.toString=()=>l+":1",{...c,name:"sum",fields:[d]}}const f=c.fields.map(d=>{const h=(p,m)=>l===s[p]?d(p,m):NaN;return h.toString=()=>l+":"+d,h});return{...c,fields:f}})));return e.create(fxt(n,a,e.groups(),u))}function cxt(e,t,n){const r=n.limit>0?+n.limit:1/0,i=Kz(n.sort,!0),s=Kz(n.keySeparator,"_"),o=Jb(e,t.ops,t.exprs),a=o.length===1?o[0]:(f,d)=>o.map(h=>h(f,d)).join(s),u=Array(e.totalRows());e.scan((f,d)=>u[f]=a(f,d));const l=RS(e.ungroup(),[{id:0,name:"array_agg_distinct",fields:[f=>u[f]],params:[]}])[0][0],c=i?l.sort():l;return{keys:Number.isFinite(r)?c.slice(0,r):c,keyColumn:u}}function fxt({names:e,exprs:t},n,r,i){const s=r?r.size:1,o=ec(),a=i.length,u=e.length;let l;const c=(f,d)=>l[f][d];r&&Rke(o,r);for(let f=0;f<u;++f){const d=t[f];if(d.field!=null)for(let h=0;h<a;++h)o.add(n(h,e[f]),i[h][d.field]);else if(s>1)for(let h=0;h<a;++h){l=i[h];const p=o.add(n(h,e[f]),Array(s));for(let m=0;m<s;++m)p[m]=d(m,null,c)}else for(let h=0;h<a;++h)l=i[h],o.add(n(h,e[f]),[d(0,null,c)])}return o.new()}function dxt(e,t,n,r){return lxt(e,Jf("fold",e,t),Jf("fold",e,n,{preparse:hxt,aggronly:!0}),r)}function hxt(e){e.forEach((t,n)=>t.field?e.set(n,W2e(t+"")):0)}function pxt(e,t){const n=new Map;return e.columnNames(r=>(n.set(r,r),0)),EQ(e,Pm(e,t,n))}function Rfe(e,t){return CQ(e,nl(t,{table:e,aggronly:!0,window:!1}))}function mxt(e,t,n,r){return(t?r?yxt:gxt:r?bxt:vxt)(e.length,e,n,r)}function gxt(e,t,n){const r=n.length;for(let i=0;i<e;++i)t[i]=n[r*_S()|0];return t}function yxt(e,t,n,r){const i=n.length,s=new Float64Array(i);let o=0;for(let u=0;u<i;++u)s[u]=o+=r(n[u]);const a=Nke(xQ).right;for(let u=0;u<e;++u)t[u]=n[a(s,o*_S())];return t}function vxt(e,t,n){const r=n.length;if(e>=r)return n;for(let i=0;i<e;++i)t[i]=n[i];for(let i=e;i<r;++i){const s=i*_S();s<e&&(t[s|0]=n[i])}return t}function bxt(e,t,n,r){const i=n.length;if(e>=i)return n;const s=new Float32Array(i),o=new Uint32Array(i);for(let a=0;a<i;++a)o[a]=a,s[a]=-Math.log(_S())/r(n[a]);o.sort((a,u)=>s[a]-s[u]);for(let a=0;a<e;++a)t[a]=n[o[a]];return t}function _xt(e,t=0,n=e.length){let r=n-(t=+t);for(;r;){const i=_S()*r--|0,s=e[r+t];e[r+t]=e[i+t],e[i+t]=s}return e}function wxt(e,t,n,r={}){const{replace:i,shuffle:s}=r,o=e.partitions(!1);let a=0;t=o.map((c,f)=>{let d=t(f);return a+=d=i?d:Math.min(c.length,d),d});const u=new Uint32Array(a);let l=0;return o.forEach((c,f)=>{const d=t[f],h=u.subarray(l,l+=d);!i&&d===c.length?h.set(c):mxt(h,i,c,n)}),s!==!1&&(o.length>1||!i)&&_xt(u),e.reify(u)}function Ext(e,t,n={}){return wxt(e,xxt(e,t),Sxt(e,n.weight),n)}const Mke=e=>t=>e.get(t)||0;function xxt(e,t){return nu(t)?()=>t:Mke(CQ(e,nl({size:t},{table:e,window:!1})).column("size"))}function Sxt(e,t){return t==null?null:(t=nu(t)?e.columnName(t):t,Mke(Bo(t)?e.column(t):TQ(e,nl({w:t},{table:e}),{drop:!0}).column("w")))}function Txt(e,t){return EQ(e,Pm(e,t))}function Cxt(e,{names:t,exprs:n,ops:r=[]},i={}){if(t.length===0)return e;const s=t.length===1&&i.as||[],o=i.drop==null?!0:!!i.drop,a=i.limit==null?s.length||1/0:Math.max(1,+i.limit||1),u=Jb(e,r,n),l=ec(),c=t.reduce((d,h,p)=>d.set(h,p),new Map),f=(d,h)=>{const p=Axt(e,u[d],a),m=p.length;for(let g=0;g<m;++g)l.add(s[g]||`${h}_${g+1}`,p[g])};return e.columnNames().forEach(d=>{c.has(d)?(o||l.add(d,e.column(d)),f(c.get(d),d),c.delete(d)):l.add(d,e.column(d))}),c.forEach(f),e.create(l)}function Axt(e,t,n){const r=e.totalRows(),i=[];return e.scan((s,o)=>{const a=Zu(t(s,o)),u=Math.min(a.length,n);for(;i.length<u;)i.push(Array(r).fill(ar));for(let l=0;l<u;++l)i[l][s]=a[l]}),i}function Ixt(e,t,n){return Cxt(e,Jf("spread",e,t),n)}function kxt(e,t){return e.concat(t).dedupe()}function Rxt(e,t,n){return Dke(e,Jf("unroll",e,t),n&&n.drop?{...n,drop:Jf("unroll",e,n.drop).names}:n)}function Nxt(e,t){return e.create({groups:Pxt(e,t)})}function Pxt(e,{names:t=[],exprs:n=[],ops:r=[]}){const i=t.length;if(i===0)return null;if(i===1&&!e.isFiltered()&&n[0].field){const h=e.column(n[0].field);if(h.groups)return h.groups(t)}let s=Jb(e,r,n);const o=r$(s),a=e.totalRows(),u=new Uint32Array(a),l={},c=[],f=e.data(),d=e.mask();if(d)for(let h=d.next(0);h>=0;h=d.next(h+1)){const p=o(h,f)+"",m=l[p];u[h]=m??(l[p]=c.push(h)-1)}else for(let h=0;h<a;++h){const p=o(h,f)+"",m=l[p];u[h]=m??(l[p]=c.push(h)-1)}return r.length||(s=s.map(h=>p=>h(p,f))),{keys:u,get:s,names:t,rows:c,size:c.length}}function Dxt(e,t){return Nxt(e,Jf("groupby",e,t))}function Oxt(e,t){return e.create({order:t})}const $xt=(e,t,n,r)=>`((u = ${e}) < (v = ${t}) || u == null) && v != null ? ${n}
    : (u > v || v == null) && u != null ? ${r}
    : ((v = v instanceof Date ? +v : v), (u = u instanceof Date ? +u : u)) !== u && v === v ? ${n}
    : v !== v && u === u ? ${r} : `;function Mxt(e,t){const n=[],r=[],i=[];let s=null,o="0",a="0";e.isGrouped()&&(s=e.groups().keys,o="ka",a="kb");const{ops:u}=nl(t,{table:e,value:(h,p)=>{if(n.push(h),p.escape){const m=g=>`fn[${i.length}](${g}, data)`;r.push([m("a"),m("b")]),i.push(p.escape)}else r.push([n$(p,{index:"a",op:o}),n$(p,{index:"b",op:a})])},window:!1}),l=RS(e,u),c=(h,p)=>l[h][p],f=n.length;let d="return (a, b) => {"+(c&&e.isGrouped()?"const ka = keys[a], kb = keys[b];":"")+"let u, v; return ";for(let h=0;h<f;++h){const p=t.get(n[h]).desc?-1:1,[m,g]=r[h];d+=$xt(m,g,-p,p)}return d+="0;};",Function("op","keys","fn","data",d)(c,s,i,e.data())}function Lxt(e,t){return Oxt(e,Fxt(e,t))}function Fxt(e,t){let n=-1;const r=new Map,i=s=>r.set(++n+"",s);return t.forEach(s=>{const o=s.expr!=null?s.expr:s;if(wa(o)&&!gi(o))for(const a in o)i(o[a]);else i(nu(o)?Z1(s,e.columnName(o)):Bo(o)?Z1(s):gi(o)?s:xn(`Invalid orderby field: ${s+""}`))}),Mxt(e,r)}function jxt(e,t){const n=e.numRows(),r=n+t.reduce((o,a)=>o+a.numRows(),0);if(n===r)return e;const i=[e,...t],s=ec();return e.columnNames().forEach(o=>{const a=Array(r);let u=0;i.forEach(l=>{const c=l.column(o)||{get:()=>ar};l.scan(f=>a[u++]=c.get(f))}),s.add(o,a)}),e.create(s.new())}function Bxt(e,t){const n=ec(),r=e.groups(),{get:i,names:s=[],rows:o,size:a=1}=r||{},u=new Uint32Array(a+1);s.forEach(d=>n.add(d,null));const l=r?kke(e,t,r):[Ike(e,t)];t.outputs().map(d=>n.add(d,[]));const c=u.length-1;let f=0;for(let d=0;d<c;++d)f+=u[d+1]=t.write(l[d],n.data,u[d]);if(r){const d=e.data();s.forEach((h,p)=>{const m=n.data[h]=Array(f),g=i[p];for(let y=0,v=0;y<a;++y)m.fill(g(o[y],d),v,v+=u[y+1])})}return e.create(n.new())}function Uxt(e){return e.isGrouped()?e.create({groups:null}):e}function zxt(e){return e.isOrdered()?e.create({order:null}):e}const Vxt={__antijoin:(e,t,n)=>kfe(e,t,n,{anti:!0}),__count:(e,t={})=>Rfe(e,{[t.as||"count"]:G2e()}),__cross:(e,t,n,r)=>Afe(e,t,()=>!0,n,{...r,left:!0,right:!0}),__concat:jxt,__dedupe:gEt,__derive:$Et,__except:MEt,__filter:jEt,__fold:UEt,__impute:qEt,__intersect:GEt,__join:Afe,__lookup:uxt,__pivot:dxt,__relocate:Cke,__rename:pxt,__rollup:Rfe,__sample:Ext,__select:Txt,__semijoin:kfe,__spread:Ixt,__union:kxt,__unroll:Rxt,__groupby:Dxt,__orderby:Lxt,__ungroup:Uxt,__unorder:zxt,__reduce:Bxt};Object.assign(Vp.prototype,Vxt);function Hxt(e,t){return Vp.from(e,t)}function u9(e){return d4(e,{escape:!0,toString(){xn("Escaped values can not be serialized.")}})}Vp.prototype;function Cf(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Error("[Immer] minified error nr: "+e+(n.length?" "+n.map(function(i){return"'"+i+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function sy(e){return!!e&&!!e[wi]}function $m(e){var t;return!!e&&(function(n){if(!n||typeof n!="object")return!1;var r=Object.getPrototypeOf(n);if(r===null)return!0;var i=Object.hasOwnProperty.call(r,"constructor")&&r.constructor;return i===Object||typeof i=="function"&&Function.toString.call(i)===Zxt}(e)||Array.isArray(e)||!!e[Lfe]||!!(!((t=e.constructor)===null||t===void 0)&&t[Lfe])||IQ(e)||kQ(e))}function eb(e,t,n){n===void 0&&(n=!1),NS(e)===0?(n?Object.keys:uE)(e).forEach(function(r){n&&typeof r=="symbol"||t(r,e[r],e)}):e.forEach(function(r,i){return t(i,r,e)})}function NS(e){var t=e[wi];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:IQ(e)?2:kQ(e)?3:0}function aE(e,t){return NS(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function qxt(e,t){return NS(e)===2?e.get(t):e[t]}function Lke(e,t,n){var r=NS(e);r===2?e.set(t,n):r===3?e.add(n):e[t]=n}function Fke(e,t){return e===t?e!==0||1/e==1/t:e!=e&&t!=t}function IQ(e){return Qxt&&e instanceof Map}function kQ(e){return Jxt&&e instanceof Set}function $v(e){return e.o||e.t}function RQ(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=Bke(e);delete t[wi];for(var n=uE(t),r=0;r<n.length;r++){var i=n[r],s=t[i];s.writable===!1&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(t[i]={configurable:!0,writable:!0,enumerable:s.enumerable,value:e[i]})}return Object.create(Object.getPrototypeOf(e),t)}function NQ(e,t){return t===void 0&&(t=!1),PQ(e)||sy(e)||!$m(e)||(NS(e)>1&&(e.set=e.add=e.clear=e.delete=Wxt),Object.freeze(e),t&&eb(e,function(n,r){return NQ(r,!0)},!0)),e}function Wxt(){Cf(2)}function PQ(e){return e==null||typeof e!="object"||Object.isFrozen(e)}function hh(e){var t=Zz[e];return t||Cf(18,e),t}function Gxt(e,t){Zz[e]||(Zz[e]=t)}function Xz(){return cI}function l9(e,t){t&&(hh("Patches"),e.u=[],e.s=[],e.v=t)}function I$(e){Qz(e),e.p.forEach(Yxt),e.p=null}function Qz(e){e===cI&&(cI=e.l)}function Nfe(e){return cI={p:[],l:cI,h:e,m:!0,_:0}}function Yxt(e){var t=e[wi];t.i===0||t.i===1?t.j():t.g=!0}function c9(e,t){t._=t.p.length;var n=t.p[0],r=e!==void 0&&e!==n;return t.h.O||hh("ES5").S(t,e,r),r?(n[wi].P&&(I$(t),Cf(4)),$m(e)&&(e=k$(t,e),t.l||R$(t,e)),t.u&&hh("Patches").M(n[wi].t,e,t.u,t.s)):e=k$(t,n,[]),I$(t),t.u&&t.v(t.u,t.s),e!==jke?e:void 0}function k$(e,t,n){if(PQ(t))return t;var r=t[wi];if(!r)return eb(t,function(a,u){return Pfe(e,r,t,a,u,n)},!0),t;if(r.A!==e)return t;if(!r.P)return R$(e,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var i=r.i===4||r.i===5?r.o=RQ(r.k):r.o,s=i,o=!1;r.i===3&&(s=new Set(i),i.clear(),o=!0),eb(s,function(a,u){return Pfe(e,r,i,a,u,n,o)}),R$(e,i,!1),n&&e.u&&hh("Patches").N(r,n,e.u,e.s)}return r.o}function Pfe(e,t,n,r,i,s,o){if(sy(i)){var a=k$(e,i,s&&t&&t.i!==3&&!aE(t.R,r)?s.concat(r):void 0);if(Lke(n,r,a),!sy(a))return;e.m=!1}else o&&n.add(i);if($m(i)&&!PQ(i)){if(!e.h.D&&e._<1)return;k$(e,i),t&&t.A.l||R$(e,i)}}function R$(e,t,n){n===void 0&&(n=!1),!e.l&&e.h.D&&e.m&&NQ(t,n)}function f9(e,t){var n=e[wi];return(n?$v(n):e)[t]}function Dfe(e,t){if(t in e)for(var n=Object.getPrototypeOf(e);n;){var r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Object.getPrototypeOf(n)}}function Hg(e){e.P||(e.P=!0,e.l&&Hg(e.l))}function d9(e){e.o||(e.o=RQ(e.t))}function Jz(e,t,n){var r=IQ(t)?hh("MapSet").F(t,n):kQ(t)?hh("MapSet").T(t,n):e.O?function(i,s){var o=Array.isArray(i),a={i:o?1:0,A:s?s.A:Xz(),P:!1,I:!1,R:{},l:s,t:i,k:null,o:null,j:null,C:!1},u=a,l=fI;o&&(u=[a],l=L2);var c=Proxy.revocable(u,l),f=c.revoke,d=c.proxy;return a.k=d,a.j=f,d}(t,n):hh("ES5").J(t,n);return(n?n.A:Xz()).p.push(r),r}function Kxt(e){return sy(e)||Cf(22,e),function t(n){if(!$m(n))return n;var r,i=n[wi],s=NS(n);if(i){if(!i.P&&(i.i<4||!hh("ES5").K(i)))return i.t;i.I=!0,r=Ofe(n,s),i.I=!1}else r=Ofe(n,s);return eb(r,function(o,a){i&&qxt(i.t,o)===a||Lke(r,o,t(a))}),s===3?new Set(r):r}(e)}function Ofe(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return RQ(e)}function Xxt(){function e(s,o){var a=i[s];return a?a.enumerable=o:i[s]=a={configurable:!0,enumerable:o,get:function(){var u=this[wi];return fI.get(u,s)},set:function(u){var l=this[wi];fI.set(l,s,u)}},a}function t(s){for(var o=s.length-1;o>=0;o--){var a=s[o][wi];if(!a.P)switch(a.i){case 5:r(a)&&Hg(a);break;case 4:n(a)&&Hg(a)}}}function n(s){for(var o=s.t,a=s.k,u=uE(a),l=u.length-1;l>=0;l--){var c=u[l];if(c!==wi){var f=o[c];if(f===void 0&&!aE(o,c))return!0;var d=a[c],h=d&&d[wi];if(h?h.t!==f:!Fke(d,f))return!0}}var p=!!o[wi];return u.length!==uE(o).length+(p?0:1)}function r(s){var o=s.k;if(o.length!==s.t.length)return!0;var a=Object.getOwnPropertyDescriptor(o,o.length-1);if(a&&!a.get)return!0;for(var u=0;u<o.length;u++)if(!o.hasOwnProperty(u))return!0;return!1}var i={};Gxt("ES5",{J:function(s,o){var a=Array.isArray(s),u=function(c,f){if(c){for(var d=Array(f.length),h=0;h<f.length;h++)Object.defineProperty(d,""+h,e(h,!0));return d}var p=Bke(f);delete p[wi];for(var m=uE(p),g=0;g<m.length;g++){var y=m[g];p[y]=e(y,c||!!p[y].enumerable)}return Object.create(Object.getPrototypeOf(f),p)}(a,s),l={i:a?5:4,A:o?o.A:Xz(),P:!1,I:!1,R:{},l:o,t:s,k:u,o:null,g:!1,C:!1};return Object.defineProperty(u,wi,{value:l,writable:!0}),u},S:function(s,o,a){a?sy(o)&&o[wi].A===s&&t(s.p):(s.u&&function u(l){if(l&&typeof l=="object"){var c=l[wi];if(c){var f=c.t,d=c.k,h=c.R,p=c.i;if(p===4)eb(d,function(_){_!==wi&&(f[_]!==void 0||aE(f,_)?h[_]||u(d[_]):(h[_]=!0,Hg(c)))}),eb(f,function(_){d[_]!==void 0||aE(d,_)||(h[_]=!1,Hg(c))});else if(p===5){if(r(c)&&(Hg(c),h.length=!0),d.length<f.length)for(var m=d.length;m<f.length;m++)h[m]=!1;else for(var g=f.length;g<d.length;g++)h[g]=!0;for(var y=Math.min(d.length,f.length),v=0;v<y;v++)d.hasOwnProperty(v)||(h[v]=!0),h[v]===void 0&&u(d[v])}}}}(s.p[0]),t(s.p))},K:function(s){return s.i===4?n(s):r(s)}})}var $fe,cI,DQ=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",Qxt=typeof Map<"u",Jxt=typeof Set<"u",Mfe=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",jke=DQ?Symbol.for("immer-nothing"):(($fe={})["immer-nothing"]=!0,$fe),Lfe=DQ?Symbol.for("immer-draftable"):"__$immer_draftable",wi=DQ?Symbol.for("immer-state"):"__$immer_state",Zxt=""+Object.prototype.constructor,uE=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,Bke=Object.getOwnPropertyDescriptors||function(e){var t={};return uE(e).forEach(function(n){t[n]=Object.getOwnPropertyDescriptor(e,n)}),t},Zz={},fI={get:function(e,t){if(t===wi)return e;var n=$v(e);if(!aE(n,t))return function(i,s,o){var a,u=Dfe(s,o);return u?"value"in u?u.value:(a=u.get)===null||a===void 0?void 0:a.call(i.k):void 0}(e,n,t);var r=n[t];return e.I||!$m(r)?r:r===f9(e.t,t)?(d9(e),e.o[t]=Jz(e.A.h,r,e)):r},has:function(e,t){return t in $v(e)},ownKeys:function(e){return Reflect.ownKeys($v(e))},set:function(e,t,n){var r=Dfe($v(e),t);if(r!=null&&r.set)return r.set.call(e.k,n),!0;if(!e.P){var i=f9($v(e),t),s=i==null?void 0:i[wi];if(s&&s.t===n)return e.o[t]=n,e.R[t]=!1,!0;if(Fke(n,i)&&(n!==void 0||aE(e.t,t)))return!0;d9(e),Hg(e)}return e.o[t]===n&&(n!==void 0||t in e.o)||Number.isNaN(n)&&Number.isNaN(e.o[t])||(e.o[t]=n,e.R[t]=!0),!0},deleteProperty:function(e,t){return f9(e.t,t)!==void 0||t in e.t?(e.R[t]=!1,d9(e),Hg(e)):delete e.R[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var n=$v(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.i!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty:function(){Cf(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){Cf(12)}},L2={};eb(fI,function(e,t){L2[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),L2.deleteProperty=function(e,t){return L2.set.call(this,e,t,void 0)},L2.set=function(e,t,n){return fI.set.call(this,e[0],t,n,e[0])};var eSt=function(){function e(n){var r=this;this.O=Mfe,this.D=!0,this.produce=function(i,s,o){if(typeof i=="function"&&typeof s!="function"){var a=s;s=i;var u=r;return function(m){var g=this;m===void 0&&(m=a);for(var y=arguments.length,v=Array(y>1?y-1:0),_=1;_<y;_++)v[_-1]=arguments[_];return u.produce(m,function(w){var E;return(E=s).call.apply(E,[g,w].concat(v))})}}var l;if(typeof s!="function"&&Cf(6),o!==void 0&&typeof o!="function"&&Cf(7),$m(i)){var c=Nfe(r),f=Jz(r,i,void 0),d=!0;try{l=s(f),d=!1}finally{d?I$(c):Qz(c)}return typeof Promise<"u"&&l instanceof Promise?l.then(function(m){return l9(c,o),c9(m,c)},function(m){throw I$(c),m}):(l9(c,o),c9(l,c))}if(!i||typeof i!="object"){if((l=s(i))===void 0&&(l=i),l===jke&&(l=void 0),r.D&&NQ(l,!0),o){var h=[],p=[];hh("Patches").M(i,l,h,p),o(h,p)}return l}Cf(21,i)},this.produceWithPatches=function(i,s){if(typeof i=="function")return function(l){for(var c=arguments.length,f=Array(c>1?c-1:0),d=1;d<c;d++)f[d-1]=arguments[d];return r.produceWithPatches(l,function(h){return i.apply(void 0,[h].concat(f))})};var o,a,u=r.produce(i,s,function(l,c){o=l,a=c});return typeof Promise<"u"&&u instanceof Promise?u.then(function(l){return[l,o,a]}):[u,o,a]},typeof(n==null?void 0:n.useProxies)=="boolean"&&this.setUseProxies(n.useProxies),typeof(n==null?void 0:n.autoFreeze)=="boolean"&&this.setAutoFreeze(n.autoFreeze)}var t=e.prototype;return t.createDraft=function(n){$m(n)||Cf(8),sy(n)&&(n=Kxt(n));var r=Nfe(this),i=Jz(this,n,void 0);return i[wi].C=!0,Qz(r),i},t.finishDraft=function(n,r){var i=n&&n[wi],s=i.A;return l9(s,r),c9(void 0,s)},t.setAutoFreeze=function(n){this.D=n},t.setUseProxies=function(n){n&&!Mfe&&Cf(20),this.O=n},t.applyPatches=function(n,r){var i;for(i=r.length-1;i>=0;i--){var s=r[i];if(s.path.length===0&&s.op==="replace"){n=s.value;break}}i>-1&&(r=r.slice(i+1));var o=hh("Patches").$;return sy(n)?o(n,r):this.produce(n,function(a){return o(a,r)})},e}(),zl=new eSt,tSt=zl.produce;zl.produceWithPatches.bind(zl);zl.setAutoFreeze.bind(zl);zl.setUseProxies.bind(zl);zl.applyPatches.bind(zl);zl.createDraft.bind(zl);zl.finishDraft.bind(zl);const Uke=tSt;function dI(e){"@babel/helpers - typeof";return dI=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},dI(e)}function nSt(e,t){if(dI(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(dI(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function rSt(e){var t=nSt(e,"string");return dI(t)=="symbol"?t:t+""}function iSt(e,t,n){return(t=rSt(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ffe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function jfe(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Ffe(Object(n),!0).forEach(function(r){iSt(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ffe(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function sa(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var Bfe=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),h9=function(){return Math.random().toString(36).substring(7).split("").join(".")},N$={INIT:"@@redux/INIT"+h9(),REPLACE:"@@redux/REPLACE"+h9(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+h9()}};function sSt(e){if(typeof e!="object"||e===null)return!1;for(var t=e;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function zke(e,t,n){var r;if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(sa(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(sa(1));return n(zke)(e,t)}if(typeof e!="function")throw new Error(sa(2));var i=e,s=t,o=[],a=o,u=!1;function l(){a===o&&(a=o.slice())}function c(){if(u)throw new Error(sa(3));return s}function f(m){if(typeof m!="function")throw new Error(sa(4));if(u)throw new Error(sa(5));var g=!0;return l(),a.push(m),function(){if(g){if(u)throw new Error(sa(6));g=!1,l();var v=a.indexOf(m);a.splice(v,1),o=null}}}function d(m){if(!sSt(m))throw new Error(sa(7));if(typeof m.type>"u")throw new Error(sa(8));if(u)throw new Error(sa(9));try{u=!0,s=i(s,m)}finally{u=!1}for(var g=o=a,y=0;y<g.length;y++){var v=g[y];v()}return m}function h(m){if(typeof m!="function")throw new Error(sa(10));i=m,d({type:N$.REPLACE})}function p(){var m,g=f;return m={subscribe:function(v){if(typeof v!="object"||v===null)throw new Error(sa(11));function _(){v.next&&v.next(c())}_();var w=g(_);return{unsubscribe:w}}},m[Bfe]=function(){return this},m}return d({type:N$.INIT}),r={dispatch:d,subscribe:f,getState:c,replaceReducer:h},r[Bfe]=p,r}function oSt(e){Object.keys(e).forEach(function(t){var n=e[t],r=n(void 0,{type:N$.INIT});if(typeof r>"u")throw new Error(sa(12));if(typeof n(void 0,{type:N$.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(sa(13))})}function aSt(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++){var i=t[r];typeof e[i]=="function"&&(n[i]=e[i])}var s=Object.keys(n),o;try{oSt(n)}catch(a){o=a}return function(u,l){if(u===void 0&&(u={}),o)throw o;for(var c=!1,f={},d=0;d<s.length;d++){var h=s[d],p=n[h],m=u[h],g=p(m,l);if(typeof g>"u")throw l&&l.type,new Error(sa(14));f[h]=g,c=c||g!==m}return c=c||s.length!==Object.keys(u).length,c?f:u}}function P$(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.length===0?function(r){return r}:t.length===1?t[0]:t.reduce(function(r,i){return function(){return r(i.apply(void 0,arguments))}})}function uSt(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(r){return function(){var i=r.apply(void 0,arguments),s=function(){throw new Error(sa(15))},o={getState:i.getState,dispatch:function(){return s.apply(void 0,arguments)}},a=t.map(function(u){return u(o)});return s=P$.apply(void 0,a)(i.dispatch),jfe(jfe({},i),{},{dispatch:s})}}}function Vke(e){var t=function(r){var i=r.dispatch,s=r.getState;return function(o){return function(a){return typeof a=="function"?a(i,s,e):o(a)}}};return t}var eV=Vke();eV.withExtraArgument=Vke;var Hke=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Vk=function(e,t){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(l){return function(c){return u([l,c])}}function u(l){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(s=l[0]&2?i.return:l[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,l[1])).done)return s;switch(i=0,s&&(l=[l[0]&2,s.value]),l[0]){case 0:case 1:s=l;break;case 4:return n.label++,{value:l[1],done:!1};case 5:n.label++,i=l[1],l=[0];continue;case 7:l=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(l[0]===6||l[0]===2)){n=0;continue}if(l[0]===3&&(!s||l[1]>s[0]&&l[1]<s[3])){n.label=l[1];break}if(l[0]===6&&n.label<s[1]){n.label=s[1],s=l;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(l);break}s[2]&&n.ops.pop(),n.trys.pop();continue}l=t.call(e,n)}catch(c){l=[6,c],i=0}finally{r=s=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}},tb=function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e},lSt=Object.defineProperty,cSt=Object.defineProperties,fSt=Object.getOwnPropertyDescriptors,Ufe=Object.getOwnPropertySymbols,dSt=Object.prototype.hasOwnProperty,hSt=Object.prototype.propertyIsEnumerable,zfe=function(e,t,n){return t in e?lSt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},C0=function(e,t){for(var n in t||(t={}))dSt.call(t,n)&&zfe(e,n,t[n]);if(Ufe)for(var r=0,i=Ufe(t);r<i.length;r++){var n=i[r];hSt.call(t,n)&&zfe(e,n,t[n])}return e},p9=function(e,t){return cSt(e,fSt(t))},Hk=function(e,t,n){return new Promise(function(r,i){var s=function(u){try{a(n.next(u))}catch(l){i(l)}},o=function(u){try{a(n.throw(u))}catch(l){i(l)}},a=function(u){return u.done?r(u.value):Promise.resolve(u.value).then(s,o)};a((n=n.apply(e,t)).next())})},pSt=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?P$:P$.apply(null,arguments)};function qke(e){if(typeof e!="object"||e===null)return!1;var t=Object.getPrototypeOf(e);if(t===null)return!0;for(var n=t;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return t===n}var mSt=function(e){return e&&typeof e.match=="function"};function ph(e,t){function n(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];if(t){var s=t.apply(void 0,r);if(!s)throw new Error("prepareAction did not return an object");return C0(C0({type:e,payload:s.payload},"meta"in s&&{meta:s.meta}),"error"in s&&{error:s.error})}return{type:e,payload:r[0]}}return n.toString=function(){return""+e},n.type=e,n.match=function(r){return r.type===e},n}function gSt(e){return qke(e)&&"type"in e}var ySt=function(e){Hke(t,e);function t(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=e.apply(this,n)||this;return Object.setPrototypeOf(i,t.prototype),i}return Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return e.prototype.concat.apply(this,n)},t.prototype.prepend=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return n.length===1&&Array.isArray(n[0])?new(t.bind.apply(t,tb([void 0],n[0].concat(this)))):new(t.bind.apply(t,tb([void 0],n.concat(this))))},t}(Array),vSt=function(e){Hke(t,e);function t(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=e.apply(this,n)||this;return Object.setPrototypeOf(i,t.prototype),i}return Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return e.prototype.concat.apply(this,n)},t.prototype.prepend=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return n.length===1&&Array.isArray(n[0])?new(t.bind.apply(t,tb([void 0],n[0].concat(this)))):new(t.bind.apply(t,tb([void 0],n.concat(this))))},t}(Array);function tV(e){return $m(e)?Uke(e,function(){}):e}function bSt(e){return typeof e=="boolean"}function _St(){return function(t){return wSt(t)}}function wSt(e){e===void 0&&(e={});var t=e.thunk,n=t===void 0?!0:t;e.immutableCheck,e.serializableCheck,e.actionCreatorCheck;var r=new ySt;return n&&(bSt(n)?r.push(eV):r.push(eV.withExtraArgument(n.extraArgument))),r}var ESt=!0;function xSt(e){var t=_St(),n=e||{},r=n.reducer,i=r===void 0?void 0:r,s=n.middleware,o=s===void 0?t():s,a=n.devTools,u=a===void 0?!0:a,l=n.preloadedState,c=l===void 0?void 0:l,f=n.enhancers,d=f===void 0?void 0:f,h;if(typeof i=="function")h=i;else if(qke(i))h=aSt(i);else throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');var p=o;typeof p=="function"&&(p=p(t));var m=uSt.apply(void 0,p),g=P$;u&&(g=pSt(C0({trace:!ESt},typeof u=="object"&&u)));var y=new vSt(m),v=y;Array.isArray(d)?v=tb([m],d):typeof d=="function"&&(v=d(y));var _=g.apply(void 0,v);return zke(h,c,_)}function Wke(e){var t={},n=[],r,i={addCase:function(s,o){var a=typeof s=="string"?s:s.type;if(!a)throw new Error("`builder.addCase` cannot be called with an empty action type");if(a in t)throw new Error("`builder.addCase` cannot be called with two reducers for the same action type");return t[a]=o,i},addMatcher:function(s,o){return n.push({matcher:s,reducer:o}),i},addDefaultCase:function(s){return r=s,i}};return e(i),[t,n,r]}function SSt(e){return typeof e=="function"}function TSt(e,t,n,r){n===void 0&&(n=[]);var i=typeof t=="function"?Wke(t):[t,n,r],s=i[0],o=i[1],a=i[2],u;if(SSt(e))u=function(){return tV(e())};else{var l=tV(e);u=function(){return l}}function c(f,d){f===void 0&&(f=u());var h=tb([s[d.type]],o.filter(function(p){var m=p.matcher;return m(d)}).map(function(p){var m=p.reducer;return m}));return h.filter(function(p){return!!p}).length===0&&(h=[a]),h.reduce(function(p,m){if(m)if(sy(p)){var g=p,y=m(g,d);return y===void 0?p:y}else{if($m(p))return Uke(p,function(v){return m(v,d)});var y=m(p,d);if(y===void 0){if(p===null)return p;throw Error("A case reducer on a non-draftable value must not return undefined")}return y}return p},f)}return c.getInitialState=u,c}function CSt(e,t){return e+"/"+t}function ASt(e){var t=e.name;if(!t)throw new Error("`name` is a required option for createSlice");typeof process<"u";var n=typeof e.initialState=="function"?e.initialState:tV(e.initialState),r=e.reducers||{},i=Object.keys(r),s={},o={},a={};i.forEach(function(c){var f=r[c],d=CSt(t,c),h,p;"reducer"in f?(h=f.reducer,p=f.prepare):h=f,s[c]=h,o[d]=h,a[c]=p?ph(d,p):ph(d)});function u(){var c=typeof e.extraReducers=="function"?Wke(e.extraReducers):[e.extraReducers],f=c[0],d=f===void 0?{}:f,h=c[1],p=h===void 0?[]:h,m=c[2],g=m===void 0?void 0:m,y=C0(C0({},d),o);return TSt(n,function(v){for(var _ in y)v.addCase(_,y[_]);for(var w=0,E=p;w<E.length;w++){var S=E[w];v.addMatcher(S.matcher,S.reducer)}g&&v.addDefaultCase(g)})}var l;return{name:t,reducer:function(c,f){return l||(l=u()),l(c,f)},actions:a,caseReducers:s,getInitialState:function(){return l||(l=u()),l.getInitialState()}}}var ISt="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",Gke=function(e){e===void 0&&(e=21);for(var t="",n=e;n--;)t+=ISt[Math.random()*64|0];return t},kSt=["name","message","stack","code"],m9=function(){function e(t,n){this.payload=t,this.meta=n}return e}(),Vfe=function(){function e(t,n){this.payload=t,this.meta=n}return e}(),RSt=function(e){if(typeof e=="object"&&e!==null){for(var t={},n=0,r=kSt;n<r.length;n++){var i=r[n];typeof e[i]=="string"&&(t[i]=e[i])}return t}return{message:String(e)}};(function(){function e(t,n,r){var i=ph(t+"/fulfilled",function(l,c,f,d){return{payload:l,meta:p9(C0({},d||{}),{arg:f,requestId:c,requestStatus:"fulfilled"})}}),s=ph(t+"/pending",function(l,c,f){return{payload:void 0,meta:p9(C0({},f||{}),{arg:c,requestId:l,requestStatus:"pending"})}}),o=ph(t+"/rejected",function(l,c,f,d,h){return{payload:d,error:(r&&r.serializeError||RSt)(l||"Rejected"),meta:p9(C0({},h||{}),{arg:f,requestId:c,rejectedWithValue:!!d,requestStatus:"rejected",aborted:(l==null?void 0:l.name)==="AbortError",condition:(l==null?void 0:l.name)==="ConditionError"})}}),a=typeof AbortController<"u"?AbortController:function(){function l(){this.signal={aborted:!1,addEventListener:function(){},dispatchEvent:function(){return!1},onabort:function(){},removeEventListener:function(){},reason:void 0,throwIfAborted:function(){}}}return l.prototype.abort=function(){},l}();function u(l){return function(c,f,d){var h=r!=null&&r.idGenerator?r.idGenerator(l):Gke(),p=new a,m;function g(v){m=v,p.abort()}var y=function(){return Hk(this,null,function(){var v,_,w,E,S,T,C;return Vk(this,function(A){switch(A.label){case 0:return A.trys.push([0,4,,5]),E=(v=r==null?void 0:r.condition)==null?void 0:v.call(r,l,{getState:f,extra:d}),PSt(E)?[4,E]:[3,2];case 1:E=A.sent(),A.label=2;case 2:if(E===!1||p.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};return S=new Promise(function(k,N){return p.signal.addEventListener("abort",function(){return N({name:"AbortError",message:m||"Aborted"})})}),c(s(h,l,(_=r==null?void 0:r.getPendingMeta)==null?void 0:_.call(r,{requestId:h,arg:l},{getState:f,extra:d}))),[4,Promise.race([S,Promise.resolve(n(l,{dispatch:c,getState:f,extra:d,requestId:h,signal:p.signal,abort:g,rejectWithValue:function(k,N){return new m9(k,N)},fulfillWithValue:function(k,N){return new Vfe(k,N)}})).then(function(k){if(k instanceof m9)throw k;return k instanceof Vfe?i(k.payload,h,l,k.meta):i(k,h,l)})])];case 3:return w=A.sent(),[3,5];case 4:return T=A.sent(),w=T instanceof m9?o(null,h,l,T.payload,T.meta):o(T,h,l),[3,5];case 5:return C=r&&!r.dispatchConditionRejection&&o.match(w)&&w.meta.condition,C||c(w),[2,w]}})})}();return Object.assign(y,{abort:g,requestId:h,arg:l,unwrap:function(){return y.then(NSt)}})}}return Object.assign(u,{pending:s,rejected:o,fulfilled:i,typePrefix:t})}return e.withTypes=function(){return e},e})();function NSt(e){if(e.meta&&e.meta.rejectedWithValue)throw e.payload;if(e.error)throw e.error;return e.payload}function PSt(e){return e!==null&&typeof e=="object"&&typeof e.then=="function"}var DSt=function(e,t){return mSt(e)?e.match(t):e(t)};function Hfe(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(n){return e.some(function(r){return DSt(r,n)})}}var OQ=function(e,t){if(typeof e!="function")throw new TypeError(t+" is not a function")},nV=function(){},Yke=function(e,t){return t===void 0&&(t=nV),e.catch(t),e},Kke=function(e,t){return e.addEventListener("abort",t,{once:!0}),function(){return e.removeEventListener("abort",t)}},lE=function(e,t){var n=e.signal;n.aborted||("reason"in n||Object.defineProperty(n,"reason",{enumerable:!0,value:t,configurable:!0,writable:!0}),e.abort(t))},OSt="task",Xke="listener",Qke="completed",$Q="cancelled",$St="task-"+$Q,MSt="task-"+Qke,Jke=Xke+"-"+$Q,LSt=Xke+"-"+Qke,h4=function(){function e(t){this.code=t,this.name="TaskAbortError",this.message=OSt+" "+$Q+" (reason: "+t+")"}return e}(),cE=function(e){if(e.aborted)throw new h4(e.reason)};function Zke(e,t){var n=nV;return new Promise(function(r,i){var s=function(){return i(new h4(e.reason))};if(e.aborted){s();return}n=Kke(e,s),t.finally(function(){return n()}).then(r,i)}).finally(function(){n=nV})}var FSt=function(e,t){return Hk(void 0,null,function(){var n,r;return Vk(this,function(i){switch(i.label){case 0:return i.trys.push([0,3,4,5]),[4,Promise.resolve()];case 1:return i.sent(),[4,e()];case 2:return n=i.sent(),[2,{status:"ok",value:n}];case 3:return r=i.sent(),[2,{status:r instanceof h4?"cancelled":"rejected",error:r}];case 4:return t==null||t(),[7];case 5:return[2]}})})},D$=function(e){return function(t){return Yke(Zke(e,t).then(function(n){return cE(e),n}))}},eRe=function(e){var t=D$(e);return function(n){return t(new Promise(function(r){return setTimeout(r,n)}))}},jSt=Object.assign,qfe={},qk="listenerMiddleware",BSt=function(e,t){var n=function(r){return Kke(e,function(){return lE(r,e.reason)})};return function(r,i){OQ(r,"taskExecutor");var s=new AbortController;n(s);var o=FSt(function(){return Hk(void 0,null,function(){var a;return Vk(this,function(u){switch(u.label){case 0:return cE(e),cE(s.signal),[4,r({pause:D$(s.signal),delay:eRe(s.signal),signal:s.signal})];case 1:return a=u.sent(),cE(s.signal),[2,a]}})})},function(){return lE(s,MSt)});return i!=null&&i.autoJoin&&t.push(o),{result:D$(e)(o),cancel:function(){lE(s,$St)}}}},USt=function(e,t){var n=function(r,i){return Hk(void 0,null,function(){var s,o,a,u;return Vk(this,function(l){switch(l.label){case 0:cE(t),s=function(){},o=new Promise(function(c,f){var d=e({predicate:r,effect:function(h,p){p.unsubscribe(),c([h,p.getState(),p.getOriginalState()])}});s=function(){d(),f()}}),a=[o],i!=null&&a.push(new Promise(function(c){return setTimeout(c,i,null)})),l.label=1;case 1:return l.trys.push([1,,3,4]),[4,Zke(t,Promise.race(a))];case 2:return u=l.sent(),cE(t),[2,u];case 3:return s(),[7];case 4:return[2]}})})};return function(r,i){return Yke(n(r,i))}},tRe=function(e){var t=e.type,n=e.actionCreator,r=e.matcher,i=e.predicate,s=e.effect;if(t)i=ph(t).match;else if(n)t=n.type,i=n.match;else if(r)i=r;else if(!i)throw new Error("Creating or removing a listener requires one of the known fields for matching an action");return OQ(s,"options.listener"),{predicate:i,type:t,effect:s}},zSt=function(e){var t=tRe(e),n=t.type,r=t.predicate,i=t.effect,s=Gke(),o={id:s,effect:i,type:n,predicate:r,pending:new Set,unsubscribe:function(){throw new Error("Unsubscribe not initialized")}};return o},rV=function(e){e.pending.forEach(function(t){lE(t,Jke)})},VSt=function(e){return function(){e.forEach(rV),e.clear()}},Wfe=function(e,t,n){try{e(t,n)}catch(r){setTimeout(function(){throw r},0)}},HSt=ph(qk+"/add"),qSt=ph(qk+"/removeAll"),WSt=ph(qk+"/remove"),GSt=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];console.error.apply(console,tb([qk+"/error"],e))};function YSt(e){var t=this;e===void 0&&(e={});var n=new Map,r=e.extra,i=e.onError,s=i===void 0?GSt:i;OQ(s,"onError");var o=function(h){return h.unsubscribe=function(){return n.delete(h.id)},n.set(h.id,h),function(p){h.unsubscribe(),p!=null&&p.cancelActive&&rV(h)}},a=function(h){for(var p=0,m=Array.from(n.values());p<m.length;p++){var g=m[p];if(h(g))return g}},u=function(h){var p=a(function(m){return m.effect===h.effect});return p||(p=zSt(h)),o(p)},l=function(h){var p=tRe(h),m=p.type,g=p.effect,y=p.predicate,v=a(function(_){var w=typeof m=="string"?_.type===m:_.predicate===y;return w&&_.effect===g});return v&&(v.unsubscribe(),h.cancelActive&&rV(v)),!!v},c=function(h,p,m,g){return Hk(t,null,function(){var y,v,_,w;return Vk(this,function(E){switch(E.label){case 0:y=new AbortController,v=USt(u,y.signal),_=[],E.label=1;case 1:return E.trys.push([1,3,4,6]),h.pending.add(y),[4,Promise.resolve(h.effect(p,jSt({},m,{getOriginalState:g,condition:function(S,T){return v(S,T).then(Boolean)},take:v,delay:eRe(y.signal),pause:D$(y.signal),extra:r,signal:y.signal,fork:BSt(y.signal,_),unsubscribe:h.unsubscribe,subscribe:function(){n.set(h.id,h)},cancelActiveListeners:function(){h.pending.forEach(function(S,T,C){S!==y&&(lE(S,Jke),C.delete(S))})}})))];case 2:return E.sent(),[3,6];case 3:return w=E.sent(),w instanceof h4||Wfe(s,w,{raisedBy:"effect"}),[3,6];case 4:return[4,Promise.allSettled(_)];case 5:return E.sent(),lE(y,LSt),h.pending.delete(y),[7];case 6:return[2]}})})},f=VSt(n),d=function(h){return function(p){return function(m){if(!gSt(m))return p(m);if(HSt.match(m))return u(m.payload);if(qSt.match(m)){f();return}if(WSt.match(m))return l(m.payload);var g=h.getState(),y=function(){if(g===qfe)throw new Error(qk+": getOriginalState can only be called synchronously");return g},v;try{if(v=p(m),n.size>0)for(var _=h.getState(),w=Array.from(n.values()),E=0,S=w;E<S.length;E++){var T=S[E],C=!1;try{C=T.predicate(m,_,g)}catch(A){C=!1,Wfe(s,A,{raisedBy:"predicate"})}C&&c(T,m,h,y)}}finally{g=qfe}return v}}};return{middleware:d,startListening:u,stopListening:l,clearListeners:f}}var Gfe;typeof queueMicrotask=="function"&&queueMicrotask.bind(typeof window<"u"?window:typeof global<"u"?global:globalThis);Xxt();function KSt(){const e=new Map;return{listen(t,n){return e.has(t)||e.set(t,[]),e.get(t).push(n),()=>{e.set(t,(e.get(t)||[]).filter(r=>r!==n))}},fire(t,n){const r=e.get(t);r&&r.forEach(i=>i(n))}}}let aP;const XSt=new Uint8Array(16);function QSt(){if(!aP&&(aP=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!aP))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return aP(XSt)}const bo=[];for(let e=0;e<256;++e)bo.push((e+256).toString(16).slice(1));function JSt(e,t=0){return(bo[e[t+0]]+bo[e[t+1]]+bo[e[t+2]]+bo[e[t+3]]+"-"+bo[e[t+4]]+bo[e[t+5]]+"-"+bo[e[t+6]]+bo[e[t+7]]+"-"+bo[e[t+8]]+bo[e[t+9]]+"-"+bo[e[t+10]]+bo[e[t+11]]+bo[e[t+12]]+bo[e[t+13]]+bo[e[t+14]]+bo[e[t+15]]).toLowerCase()}const ZSt=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Yfe={randomUUID:ZSt};function Kfe(e,t,n){if(Yfe.randomUUID&&!t&&!e)return Yfe.randomUUID();e=e||{};const r=e.random||(e.rng||QSt)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,JSt(r)}class mh{static get(){let t=Kfe();for(;this.ids.has(t);)t=Kfe();return this.ids.set(t,!0),t}}mh.ids=new Map;function gh(e){return"parent"in e}function eTt(e){const{label:t=void 0,state:n,initialArtifact:r,initialMetadata:i}=e,s={annotation:[],bookmark:[]},o=Object.keys(i||{}).reduce((u,l)=>(u[l]=[],i&&i[l]&&u[l].push({type:l,id:mh.get(),val:i[l],createdOn:Date.now()}),u),s),a=r?[{id:mh.get(),createdOn:Date.now(),val:r}]:[];return{id:mh.get(),label:t||"Root",event:"Root",children:[],level:0,createdOn:Date.now(),meta:o,artifacts:a,state:{type:"checkpoint",val:n}}}function tTt({parent:e,state:t,label:n,sideEffects:r={do:[],undo:[]},initialMetadata:i,initialArtifact:s,event:o}){const a={annotation:[],bookmark:[]},u=Object.keys(i||{}).reduce((c,f)=>(c[f]=[],i&&i[f]&&c[f].push({type:f,id:mh.get(),val:i[f],createdOn:Date.now()}),c),a),l=s?[{id:mh.get(),createdOn:Date.now(),val:s}]:[];return{id:mh.get(),label:n,event:o,children:[],parent:e.id,createdOn:Date.now(),meta:u,artifacts:l,sideEffects:r,state:t,level:e.level+1}}function qi(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if({}.NODE_ENV!=="production"){var i=cTt[e],s=i?typeof i=="function"?i.apply(null,n):i:"unknown error nr: "+e;throw Error("[Immer] "+s)}throw Error("[Immer] minified error nr: "+e+(n.length?" "+n.map(function(o){return"'"+o+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function nb(e){return!!e&&!!e[Vl]}function oy(e){var t;return!!e&&(function(n){if(!n||typeof n!="object")return!1;var r=Object.getPrototypeOf(n);if(r===null)return!0;var i=Object.hasOwnProperty.call(r,"constructor")&&r.constructor;return i===Object||typeof i=="function"&&Function.toString.call(i)===fTt}(e)||Array.isArray(e)||!!e[OC]||!!(!((t=e.constructor)===null||t===void 0)&&t[OC])||p4(e)||m4(e))}function fx(e,t,n){n===void 0&&(n=!1),ay(e)===0?(n?Object.keys:UQ)(e).forEach(function(r){n&&typeof r=="symbol"||t(r,e[r],e)}):e.forEach(function(r,i){return t(i,r,e)})}function ay(e){var t=e[Vl];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:p4(e)?2:m4(e)?3:0}function hI(e,t){return ay(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function DD(e,t){return ay(e)===2?e.get(t):e[t]}function nRe(e,t,n){var r=ay(e);r===2?e.set(t,n):r===3?(e.delete(t),e.add(n)):e[t]=n}function nTt(e,t){return e===t?e!==0||1/e==1/t:e!=e&&t!=t}function p4(e){return uTt&&e instanceof Map}function m4(e){return lTt&&e instanceof Set}function Mv(e){return e.o||e.t}function MQ(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=dTt(e);delete t[Vl];for(var n=UQ(t),r=0;r<n.length;r++){var i=n[r],s=t[i];s.writable===!1&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(t[i]={configurable:!0,writable:!0,enumerable:s.enumerable,value:e[i]})}return Object.create(Object.getPrototypeOf(e),t)}function LQ(e,t){return t===void 0&&(t=!1),FQ(e)||nb(e)||!oy(e)||(ay(e)>1&&(e.set=e.add=e.clear=e.delete=rTt),Object.freeze(e),t&&fx(e,function(n,r){return LQ(r,!0)},!0)),e}function rTt(){qi(2)}function FQ(e){return e==null||typeof e!="object"||Object.isFrozen(e)}function yh(e){var t=aV[e];return t||qi(18,e),t}function iTt(e,t){aV[e]||(aV[e]=t)}function Xfe(){return{}.NODE_ENV==="production"||dx||qi(0),dx}function g9(e,t){t&&(yh("Patches"),e.u=[],e.s=[],e.v=t)}function O$(e){iV(e),e.p.forEach(sTt),e.p=null}function iV(e){e===dx&&(dx=e.l)}function Qfe(e){return dx={p:[],l:dx,h:e,m:!0,_:0}}function sTt(e){var t=e[Vl];t.i===0||t.i===1?t.j():t.O=!0}function y9(e,t){t._=t.p.length;var n=t.p[0],r=e!==void 0&&e!==n;return t.h.g||yh("ES5").S(t,e,r),r?(n[Vl].P&&(O$(t),qi(4)),oy(e)&&(e=$$(t,e),t.l||M$(t,e)),t.u&&yh("Patches").M(n[Vl].t,e,t.u,t.s)):e=$$(t,n,[]),O$(t),t.u&&t.v(t.u,t.s),e!==BQ?e:void 0}function $$(e,t,n){if(FQ(t))return t;var r=t[Vl];if(!r)return fx(t,function(s,o){return Jfe(e,r,t,s,o,n)},!0),t;if(r.A!==e)return t;if(!r.P)return M$(e,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var i=r.i===4||r.i===5?r.o=MQ(r.k):r.o;fx(r.i===3?new Set(i):i,function(s,o){return Jfe(e,r,i,s,o,n)}),M$(e,i,!1),n&&e.u&&yh("Patches").R(r,n,e.u,e.s)}return r.o}function Jfe(e,t,n,r,i,s){if({}.NODE_ENV!=="production"&&i===n&&qi(5),nb(i)){var o=$$(e,i,s&&t&&t.i!==3&&!hI(t.D,r)?s.concat(r):void 0);if(nRe(n,r,o),!nb(o))return;e.m=!1}if(oy(i)&&!FQ(i)){if(!e.h.F&&e._<1)return;$$(e,i),t&&t.A.l||M$(e,i)}}function M$(e,t,n){n===void 0&&(n=!1),e.h.F&&e.m&&LQ(t,n)}function v9(e,t){var n=e[Vl];return(n?Mv(n):e)[t]}function Zfe(e,t){if(t in e)for(var n=Object.getPrototypeOf(e);n;){var r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Object.getPrototypeOf(n)}}function sV(e){e.P||(e.P=!0,e.l&&sV(e.l))}function b9(e){e.o||(e.o=MQ(e.t))}function oV(e,t,n){var r=p4(t)?yh("MapSet").N(t,n):m4(t)?yh("MapSet").T(t,n):e.g?function(i,s){var o=Array.isArray(i),a={i:o?1:0,A:s?s.A:Xfe(),P:!1,I:!1,D:{},l:s,t:i,k:null,o:null,j:null,C:!1},u=a,l=uV;o&&(u=[a],l=F2);var c=Proxy.revocable(u,l),f=c.revoke,d=c.proxy;return a.k=d,a.j=f,d}(t,n):yh("ES5").J(t,n);return(n?n.A:Xfe()).p.push(r),r}function oTt(e){return nb(e)||qi(22,e),function t(n){if(!oy(n))return n;var r,i=n[Vl],s=ay(n);if(i){if(!i.P&&(i.i<4||!yh("ES5").K(i)))return i.t;i.I=!0,r=ede(n,s),i.I=!1}else r=ede(n,s);return fx(r,function(o,a){i&&DD(i.t,o)===a||nRe(r,o,t(a))}),s===3?new Set(r):r}(e)}function ede(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return MQ(e)}function aTt(){function e(r){if(!oy(r))return r;if(Array.isArray(r))return r.map(e);if(p4(r))return new Map(Array.from(r.entries()).map(function(o){return[o[0],e(o[1])]}));if(m4(r))return new Set(Array.from(r).map(e));var i=Object.create(Object.getPrototypeOf(r));for(var s in r)i[s]=e(r[s]);return hI(r,OC)&&(i[OC]=r[OC]),i}function t(r){return nb(r)?e(r):r}var n="add";iTt("Patches",{$:function(r,i){return i.forEach(function(s){for(var o=s.path,a=s.op,u=r,l=0;l<o.length-1;l++){var c=ay(u),f=""+o[l];c!==0&&c!==1||f!=="__proto__"&&f!=="constructor"||qi(24),typeof u=="function"&&f==="prototype"&&qi(24),typeof(u=DD(u,f))!="object"&&qi(15,o.join("/"))}var d=ay(u),h=e(s.value),p=o[o.length-1];switch(a){case"replace":switch(d){case 2:return u.set(p,h);case 3:qi(16);default:return u[p]=h}case n:switch(d){case 1:return p==="-"?u.push(h):u.splice(p,0,h);case 2:return u.set(p,h);case 3:return u.add(h);default:return u[p]=h}case"remove":switch(d){case 1:return u.splice(p,1);case 2:return u.delete(p);case 3:return u.delete(s.value);default:return delete u[p]}default:qi(17,a)}}),r},R:function(r,i,s,o){switch(r.i){case 0:case 4:case 2:return function(a,u,l,c){var f=a.t,d=a.o;fx(a.D,function(h,p){var m=DD(f,h),g=DD(d,h),y=p?hI(f,h)?"replace":n:"remove";if(m!==g||y!=="replace"){var v=u.concat(h);l.push(y==="remove"?{op:y,path:v}:{op:y,path:v,value:g}),c.push(y===n?{op:"remove",path:v}:y==="remove"?{op:n,path:v,value:t(m)}:{op:"replace",path:v,value:t(m)})}})}(r,i,s,o);case 5:case 1:return function(a,u,l,c){var f=a.t,d=a.D,h=a.o;if(h.length<f.length){var p=[h,f];f=p[0],h=p[1];var m=[c,l];l=m[0],c=m[1]}for(var g=0;g<f.length;g++)if(d[g]&&h[g]!==f[g]){var y=u.concat([g]);l.push({op:"replace",path:y,value:t(h[g])}),c.push({op:"replace",path:y,value:t(f[g])})}for(var v=f.length;v<h.length;v++){var _=u.concat([v]);l.push({op:n,path:_,value:t(h[v])})}f.length<h.length&&c.push({op:"replace",path:u.concat(["length"]),value:f.length})}(r,i,s,o);case 3:return function(a,u,l,c){var f=a.t,d=a.o,h=0;f.forEach(function(p){if(!d.has(p)){var m=u.concat([h]);l.push({op:"remove",path:m,value:p}),c.unshift({op:n,path:m,value:p})}h++}),h=0,d.forEach(function(p){if(!f.has(p)){var m=u.concat([h]);l.push({op:n,path:m,value:p}),c.unshift({op:"remove",path:m,value:p})}h++})}(r,i,s,o)}},M:function(r,i,s,o){s.push({op:"replace",path:[],value:i===BQ?void 0:i}),o.push({op:"replace",path:[],value:r})}})}var tde,dx,jQ=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",uTt=typeof Map<"u",lTt=typeof Set<"u",nde=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",BQ=jQ?Symbol.for("immer-nothing"):((tde={})["immer-nothing"]=!0,tde),OC=jQ?Symbol.for("immer-draftable"):"__$immer_draftable",Vl=jQ?Symbol.for("immer-state"):"__$immer_state",cTt={0:"Illegal state",1:"Immer drafts cannot have computed properties",2:"This object has been frozen and should not be mutated",3:function(e){return"Cannot use a proxy that has been revoked. Did you pass an object from inside an immer function to an async process? "+e},4:"An immer producer returned a new value *and* modified its draft. Either return a new value *or* modify the draft.",5:"Immer forbids circular references",6:"The first or second argument to `produce` must be a function",7:"The third argument to `produce` must be a function or undefined",8:"First argument to `createDraft` must be a plain object, an array, or an immerable object",9:"First argument to `finishDraft` must be a draft returned by `createDraft`",10:"The given draft is already finalized",11:"Object.defineProperty() cannot be used on an Immer draft",12:"Object.setPrototypeOf() cannot be used on an Immer draft",13:"Immer only supports deleting array indices",14:"Immer only supports setting array indices and the 'length' property",15:function(e){return"Cannot apply patch, path doesn't resolve: "+e},16:'Sets cannot have "replace" patches.',17:function(e){return"Unsupported patch operation: "+e},18:function(e){return"The plugin for '"+e+"' has not been loaded into Immer. To enable the plugin, import and call `enable"+e+"()` when initializing your application."},20:"Cannot use proxies if Proxy, Proxy.revocable or Reflect are not available",21:function(e){return"produce can only be called on things that are draftable: plain objects, arrays, Map, Set or classes that are marked with '[immerable]: true'. Got '"+e+"'"},22:function(e){return"'current' expects a draft, got: "+e},23:function(e){return"'original' expects a draft, got: "+e},24:"Patching reserved attributes like __proto__, prototype and constructor is not allowed"},fTt=""+Object.prototype.constructor,UQ=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,dTt=Object.getOwnPropertyDescriptors||function(e){var t={};return UQ(e).forEach(function(n){t[n]=Object.getOwnPropertyDescriptor(e,n)}),t},aV={},uV={get:function(e,t){if(t===Vl)return e;var n=Mv(e);if(!hI(n,t))return function(i,s,o){var a,u=Zfe(s,o);return u?"value"in u?u.value:(a=u.get)===null||a===void 0?void 0:a.call(i.k):void 0}(e,n,t);var r=n[t];return e.I||!oy(r)?r:r===v9(e.t,t)?(b9(e),e.o[t]=oV(e.A.h,r,e)):r},has:function(e,t){return t in Mv(e)},ownKeys:function(e){return Reflect.ownKeys(Mv(e))},set:function(e,t,n){var r=Zfe(Mv(e),t);if(r!=null&&r.set)return r.set.call(e.k,n),!0;if(!e.P){var i=v9(Mv(e),t),s=i==null?void 0:i[Vl];if(s&&s.t===n)return e.o[t]=n,e.D[t]=!1,!0;if(nTt(n,i)&&(n!==void 0||hI(e.t,t)))return!0;b9(e),sV(e)}return e.o[t]===n&&typeof n!="number"&&(n!==void 0||t in e.o)||(e.o[t]=n,e.D[t]=!0,!0)},deleteProperty:function(e,t){return v9(e.t,t)!==void 0||t in e.t?(e.D[t]=!1,b9(e),sV(e)):delete e.D[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var n=Mv(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.i!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty:function(){qi(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){qi(12)}},F2={};fx(uV,function(e,t){F2[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),F2.deleteProperty=function(e,t){return{}.NODE_ENV!=="production"&&isNaN(parseInt(t))&&qi(13),F2.set.call(this,e,t,void 0)},F2.set=function(e,t,n){return{}.NODE_ENV!=="production"&&t!=="length"&&isNaN(parseInt(t))&&qi(14),uV.set.call(this,e[0],t,n,e[0])};var hTt=function(){function e(n){var r=this;this.g=nde,this.F=!0,this.produce=function(i,s,o){if(typeof i=="function"&&typeof s!="function"){var a=s;s=i;var u=r;return function(m){var g=this;m===void 0&&(m=a);for(var y=arguments.length,v=Array(y>1?y-1:0),_=1;_<y;_++)v[_-1]=arguments[_];return u.produce(m,function(w){var E;return(E=s).call.apply(E,[g,w].concat(v))})}}var l;if(typeof s!="function"&&qi(6),o!==void 0&&typeof o!="function"&&qi(7),oy(i)){var c=Qfe(r),f=oV(r,i,void 0),d=!0;try{l=s(f),d=!1}finally{d?O$(c):iV(c)}return typeof Promise<"u"&&l instanceof Promise?l.then(function(m){return g9(c,o),y9(m,c)},function(m){throw O$(c),m}):(g9(c,o),y9(l,c))}if(!i||typeof i!="object"){if((l=s(i))===void 0&&(l=i),l===BQ&&(l=void 0),r.F&&LQ(l,!0),o){var h=[],p=[];yh("Patches").M(i,l,h,p),o(h,p)}return l}qi(21,i)},this.produceWithPatches=function(i,s){if(typeof i=="function")return function(l){for(var c=arguments.length,f=Array(c>1?c-1:0),d=1;d<c;d++)f[d-1]=arguments[d];return r.produceWithPatches(l,function(h){return i.apply(void 0,[h].concat(f))})};var o,a,u=r.produce(i,s,function(l,c){o=l,a=c});return typeof Promise<"u"&&u instanceof Promise?u.then(function(l){return[l,o,a]}):[u,o,a]},typeof(n==null?void 0:n.useProxies)=="boolean"&&this.setUseProxies(n.useProxies),typeof(n==null?void 0:n.autoFreeze)=="boolean"&&this.setAutoFreeze(n.autoFreeze)}var t=e.prototype;return t.createDraft=function(n){oy(n)||qi(8),nb(n)&&(n=oTt(n));var r=Qfe(this),i=oV(this,n,void 0);return i[Vl].C=!0,iV(r),i},t.finishDraft=function(n,r){var i=n&&n[Vl];({}).NODE_ENV!=="production"&&(i&&i.C||qi(9),i.I&&qi(10));var s=i.A;return g9(s,r),y9(void 0,s)},t.setAutoFreeze=function(n){this.F=n},t.setUseProxies=function(n){n&&!nde&&qi(20),this.g=n},t.applyPatches=function(n,r){var i;for(i=r.length-1;i>=0;i--){var s=r[i];if(s.path.length===0&&s.op==="replace"){n=s.value;break}}i>-1&&(r=r.slice(i+1));var o=yh("Patches").$;return nb(n)?o(n,r):this.produce(n,function(a){return o(a,r)})},e}(),Hl=new hTt,pTt=Hl.produce;Hl.produceWithPatches.bind(Hl);Hl.setAutoFreeze.bind(Hl);Hl.setUseProxies.bind(Hl);Hl.applyPatches.bind(Hl);Hl.createDraft.bind(Hl);Hl.finishDraft.bind(Hl);function mTt(e,t={}){const{artifact:n=void 0,metadata:r=void 0,rootLabel:i="Root"}=t,s=eTt({state:e,label:i,initialArtifact:n,initialMetadata:r}),o={nodes:{[s.id]:s},root:s.id,current:s.id};return ASt({name:"provenance-graph",initialState:o,reducers:{addMetadata(a,u){const{id:l,meta:c}=u.payload,f=a.nodes[l].meta,d=Object.keys(c).reduce((h,p)=>(h[p]||(h[p]=[]),h[p].push({type:p,id:mh.get(),val:c[p],createdOn:Date.now()}),h),f);a.nodes[u.payload.id].meta=d},addArtifact(a,u){a.nodes[u.payload.id].artifacts.push({id:mh.get(),createdOn:Date.now(),val:u.payload.artifact})},changeCurrent(a,u){a.current=u.payload},addNode(a,{payload:u}){a.nodes[u.id]=u,a.nodes[u.parent].children.push(u.id),a.current=u.id},load(a,{payload:u}){return u}}})}function gTt(e){const t=new Map,{reducer:n,actions:r,getInitialState:i}=mTt(e),s=YSt();s.startListening({matcher:Hfe(r.changeCurrent,r.addNode),effect:(a,u)=>{u.cancelActiveListeners(),t.forEach(l=>{const c=Hfe(r.addNode)(a),{skipOnNew:f}=l.config;f&&c||l.func(c?"new":"traversal")})}});const o=xSt({reducer:n,middleware:a=>a().prepend(s.middleware)});return{initialState:i(),get backend(){return o.getState()},get current(){return o.getState().nodes[o.getState().current]},get root(){return o.getState().nodes[o.getState().root]},currentChange(a,u){const l={id:mh.get(),func:a,config:u};return t.set(l.id,l),()=>t.delete(l.id)},update:o.dispatch,...r}}/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2022 Joachim Wester
 * MIT licensed
 */var yTt=globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},e(t,n)};return function(t,n){e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),vTt=Object.prototype.hasOwnProperty;function lV(e,t){return vTt.call(e,t)}function cV(e){if(Array.isArray(e)){for(var t=new Array(e.length),n=0;n<t.length;n++)t[n]=""+n;return t}if(Object.keys)return Object.keys(e);var r=[];for(var i in e)lV(e,i)&&r.push(i);return r}function Fu(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}}function fV(e){for(var t=0,n=e.length,r;t<n;){if(r=e.charCodeAt(t),r>=48&&r<=57){t++;continue}return!1}return!0}function Lv(e){return e.indexOf("/")===-1&&e.indexOf("~")===-1?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function rRe(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function dV(e){if(e===void 0)return!0;if(e){if(Array.isArray(e)){for(var t=0,n=e.length;t<n;t++)if(dV(e[t]))return!0}else if(typeof e=="object"){for(var r=cV(e),i=r.length,s=0;s<i;s++)if(dV(e[r[s]]))return!0}}return!1}function rde(e,t){var n=[e];for(var r in t){var i=typeof t[r]=="object"?JSON.stringify(t[r],null,2):t[r];typeof i<"u"&&n.push(r+": "+i)}return n.join(`
`)}var iRe=function(e){yTt(t,e);function t(n,r,i,s,o){var a=this.constructor,u=e.call(this,rde(n,{name:r,index:i,operation:s,tree:o}))||this;return u.name=r,u.index=i,u.operation=s,u.tree=o,Object.setPrototypeOf(u,a.prototype),u.message=rde(n,{name:r,index:i,operation:s,tree:o}),u}return t}(Error),Bi=iRe,bTt=Fu,Dw={add:function(e,t,n){return e[t]=this.value,{newDocument:n}},remove:function(e,t,n){var r=e[t];return delete e[t],{newDocument:n,removed:r}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:function(e,t,n){var r=L$(n,this.path);r&&(r=Fu(r));var i=A1(n,{op:"remove",path:this.from}).removed;return A1(n,{op:"add",path:this.path,value:i}),{newDocument:n,removed:r}},copy:function(e,t,n){var r=L$(n,this.from);return A1(n,{op:"add",path:this.path,value:Fu(r)}),{newDocument:n}},test:function(e,t,n){return{newDocument:n,test:pI(e[t],this.value)}},_get:function(e,t,n){return this.value=e[t],{newDocument:n}}},_Tt={add:function(e,t,n){return fV(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:n,index:t}},remove:function(e,t,n){var r=e.splice(t,1);return{newDocument:n,removed:r[0]}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:Dw.move,copy:Dw.copy,test:Dw.test,_get:Dw._get};function L$(e,t){if(t=="")return e;var n={op:"_get",path:t};return A1(e,n),n.value}function A1(e,t,n,r,i,s){if(n===void 0&&(n=!1),r===void 0&&(r=!0),i===void 0&&(i=!0),s===void 0&&(s=0),n&&(typeof n=="function"?n(t,0,e,t.path):F$(t,0)),t.path===""){var o={newDocument:e};if(t.op==="add")return o.newDocument=t.value,o;if(t.op==="replace")return o.newDocument=t.value,o.removed=e,o;if(t.op==="move"||t.op==="copy")return o.newDocument=L$(e,t.from),t.op==="move"&&(o.removed=e),o;if(t.op==="test"){if(o.test=pI(e,t.value),o.test===!1)throw new Bi("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o.newDocument=e,o}else{if(t.op==="remove")return o.removed=e,o.newDocument=null,o;if(t.op==="_get")return t.value=e,o;if(n)throw new Bi("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",s,t,e);return o}}else{r||(e=Fu(e));var a=t.path||"",u=a.split("/"),l=e,c=1,f=u.length,d=void 0,h=void 0,p=void 0;for(typeof n=="function"?p=n:p=F$;;){if(h=u[c],h&&h.indexOf("~")!=-1&&(h=rRe(h)),i&&(h=="__proto__"||h=="prototype"&&c>0&&u[c-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&d===void 0&&(l[h]===void 0?d=u.slice(0,c).join("/"):c==f-1&&(d=t.path),d!==void 0&&p(t,0,e,d)),c++,Array.isArray(l)){if(h==="-")h=l.length;else{if(n&&!fV(h))throw new Bi("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",s,t,e);fV(h)&&(h=~~h)}if(c>=f){if(n&&t.op==="add"&&h>l.length)throw new Bi("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",s,t,e);var o=_Tt[t.op].call(t,l,h,e);if(o.test===!1)throw new Bi("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o}}else if(c>=f){var o=Dw[t.op].call(t,l,h,e);if(o.test===!1)throw new Bi("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o}if(l=l[h],n&&c<f&&(!l||typeof l!="object"))throw new Bi("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",s,t,e)}}}function g4(e,t,n,r,i){if(r===void 0&&(r=!0),i===void 0&&(i=!0),n&&!Array.isArray(t))throw new Bi("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");r||(e=Fu(e));for(var s=new Array(t.length),o=0,a=t.length;o<a;o++)s[o]=A1(e,t[o],n,!0,i,o),e=s[o].newDocument;return s.newDocument=e,s}function wTt(e,t,n){var r=A1(e,t);if(r.test===!1)throw new Bi("Test operation failed","TEST_OPERATION_FAILED",n,t,e);return r.newDocument}function F$(e,t,n,r){if(typeof e!="object"||e===null||Array.isArray(e))throw new Bi("Operation is not an object","OPERATION_NOT_AN_OBJECT",t,e,n);if(Dw[e.op]){if(typeof e.path!="string")throw new Bi("Operation `path` property is not a string","OPERATION_PATH_INVALID",t,e,n);if(e.path.indexOf("/")!==0&&e.path.length>0)throw new Bi('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",t,e,n);if((e.op==="move"||e.op==="copy")&&typeof e.from!="string")throw new Bi("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&e.value===void 0)throw new Bi("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&dV(e.value))throw new Bi("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",t,e,n);if(n){if(e.op=="add"){var i=e.path.split("/").length,s=r.split("/").length;if(i!==s+1&&i!==s)throw new Bi("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",t,e,n)}else if(e.op==="replace"||e.op==="remove"||e.op==="_get"){if(e.path!==r)throw new Bi("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",t,e,n)}else if(e.op==="move"||e.op==="copy"){var o={op:"_get",path:e.from,value:void 0},a=sRe([o],n);if(a&&a.name==="OPERATION_PATH_UNRESOLVABLE")throw new Bi("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",t,e,n)}}}else throw new Bi("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",t,e,n)}function sRe(e,t,n){try{if(!Array.isArray(e))throw new Bi("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)g4(Fu(t),Fu(e),n||!0);else{n=n||F$;for(var r=0;r<e.length;r++)n(e[r],r,t,void 0)}}catch(i){if(i instanceof Bi)return i;throw i}}function pI(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){var n=Array.isArray(e),r=Array.isArray(t),i,s,o;if(n&&r){if(s=e.length,s!=t.length)return!1;for(i=s;i--!==0;)if(!pI(e[i],t[i]))return!1;return!0}if(n!=r)return!1;var a=Object.keys(e);if(s=a.length,s!==Object.keys(t).length)return!1;for(i=s;i--!==0;)if(!t.hasOwnProperty(a[i]))return!1;for(i=s;i--!==0;)if(o=a[i],!pI(e[o],t[o]))return!1;return!0}return e!==e&&t!==t}const ETt=Object.freeze(Object.defineProperty({__proto__:null,JsonPatchError:Bi,_areEquals:pI,applyOperation:A1,applyPatch:g4,applyReducer:wTt,deepClone:bTt,getValueByPointer:L$,validate:sRe,validator:F$},Symbol.toStringTag,{value:"Module"}));/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2021 Joachim Wester
 * MIT license
 */var zQ=new WeakMap,xTt=function(){function e(t){this.observers=new Map,this.obj=t}return e}(),STt=function(){function e(t,n){this.callback=t,this.observer=n}return e}();function TTt(e){return zQ.get(e)}function CTt(e,t){return e.observers.get(t)}function ATt(e,t){e.observers.delete(t.callback)}function ITt(e,t){t.unobserve()}function kTt(e,t){var n=[],r,i=TTt(e);if(!i)i=new xTt(e),zQ.set(e,i);else{var s=CTt(i,t);r=s&&s.observer}if(r)return r;if(r={},i.value=Fu(e),t){r.callback=t,r.next=null;var o=function(){hV(r)},a=function(){clearTimeout(r.next),r.next=setTimeout(o)};typeof window<"u"&&(window.addEventListener("mouseup",a),window.addEventListener("keyup",a),window.addEventListener("mousedown",a),window.addEventListener("keydown",a),window.addEventListener("change",a))}return r.patches=n,r.object=e,r.unobserve=function(){hV(r),clearTimeout(r.next),ATt(i,r),typeof window<"u"&&(window.removeEventListener("mouseup",a),window.removeEventListener("keyup",a),window.removeEventListener("mousedown",a),window.removeEventListener("keydown",a),window.removeEventListener("change",a))},i.observers.set(t,new STt(t,r)),r}function hV(e,t){t===void 0&&(t=!1);var n=zQ.get(e.object);VQ(n.value,e.object,e.patches,"",t),e.patches.length&&g4(n.value,e.patches);var r=e.patches;return r.length>0&&(e.patches=[],e.callback&&e.callback(r)),r}function VQ(e,t,n,r,i){if(t!==e){typeof t.toJSON=="function"&&(t=t.toJSON());for(var s=cV(t),o=cV(e),a=!1,u=o.length-1;u>=0;u--){var l=o[u],c=e[l];if(lV(t,l)&&!(t[l]===void 0&&c!==void 0&&Array.isArray(t)===!1)){var f=t[l];typeof c=="object"&&c!=null&&typeof f=="object"&&f!=null&&Array.isArray(c)===Array.isArray(f)?VQ(c,f,n,r+"/"+Lv(l),i):c!==f&&(i&&n.push({op:"test",path:r+"/"+Lv(l),value:Fu(c)}),n.push({op:"replace",path:r+"/"+Lv(l),value:Fu(f)}))}else Array.isArray(e)===Array.isArray(t)?(i&&n.push({op:"test",path:r+"/"+Lv(l),value:Fu(c)}),n.push({op:"remove",path:r+"/"+Lv(l)}),a=!0):(i&&n.push({op:"test",path:r,value:e}),n.push({op:"replace",path:r,value:t}))}if(!(!a&&s.length==o.length))for(var u=0;u<s.length;u++){var l=s[u];!lV(e,l)&&t[l]!==void 0&&n.push({op:"add",path:r+"/"+Lv(l),value:Fu(t[l])})}}}function oRe(e,t,n){n===void 0&&(n=!1);var r=[];return VQ(e,t,r,"",n),r}const RTt=Object.freeze(Object.defineProperty({__proto__:null,compare:oRe,generate:hV,observe:kTt,unobserve:ITt},Symbol.toStringTag,{value:"Module"}));Object.assign({},ETt,RTt,{JsonPatchError:iRe,deepClone:Fu,escapePathComponent:Lv,unescapePathComponent:rRe});var j2=(e=>(e.TRAVERSAL_START="Traversal_Start",e.TRAVERSAL_END="Traversal_End",e))(j2||{});function OD(e,t){const n=e.state;if(n.type==="checkpoint")return n.val;const{checkpointRef:r}=n,i=t[r],s=aRe(i,e,t);s.shift();const o=s.map(u=>t[u]).map(u=>u.state.val).reduce((u,l)=>[...u,...l],[]),a=OD(i,t);return g4(a,Fu(o),!0,!1).newDocument}function NTt(e,t){const n=Object.keys(e).length;return new Set(t.map(r=>r.path.split("/")[0])).size<n/2?"patch":"checkpoint"}function HQ({registry:e,initialState:t}){let n=!1;const r=KSt(),i=gTt(t);function s(c){return i.backend.nodes[c]}r.listen(j2.TRAVERSAL_START,()=>{n=!0}),r.listen(j2.TRAVERSAL_END,()=>{n=!1});const o={add(c,f=i.current.id){i.update(i.addMetadata({id:f,meta:c}))},latestOfType(c,f=i.current.id){var d;return(d=i.backend.nodes[f].meta[c])==null?void 0:d.at(-1)},allOfType(c,f=i.current.id){return i.backend.nodes[f].meta[c]},latest(c=i.current.id){const f=i.backend.nodes[c].meta,d=Object.keys(f).reduce((h,p)=>{const m=f[p].at(-1);return m&&(h[p]=m),h},{});return Object.keys(d).length>0?d:void 0},all(c=i.current.id){return i.backend.nodes[c].meta},types(c=i.current.id){return Object.keys(i.backend.nodes[c].meta)}},a={add(c,f=i.current.id){i.update(i.addArtifact({id:f,artifact:c}))},latest(c=i.current.id){return i.backend.nodes[c].artifacts.at(-1)},all(c=i.current.id){return i.backend.nodes[c].artifacts}},u={add(c,f=i.current.id){o.add({annotation:c},f)},latest(c=i.current.id){var f;return(f=o.latestOfType("annotation",c))==null?void 0:f.val},all(c=i.current.id){var f;return(f=o.allOfType("annotation",c))==null?void 0:f.map(d=>d.val)}},l={add(c=i.current.id){o.add({bookmark:!0},c)},remove(c=i.current.id){o.add({bookmark:!1},c)},is(c=i.current.id){var f;return!!((f=o.latestOfType("bookmark",c))!=null&&f.val)},toggle(c=i.current.id){l.is(c)?l.remove(c):l.add(c)}};return{registry:e,get isTraversing(){return n},getState(c=i.current){return OD(c,i.backend.nodes)},graph:i,get current(){return i.current},get root(){return i.root},record({label:c,state:f,sideEffects:d,eventType:h,onlySideEffects:p=!1}){let m=null,g=null;const y=OD(this.current,this.graph.backend.nodes);if(p)g={type:"checkpoint",val:f};else{const v=oRe(y,f);if(NTt(f,v)==="checkpoint")g={type:"checkpoint",val:f};else{const _=this.current.state.type==="checkpoint"?this.current.id:this.current.state.checkpointRef;g={type:"patch",val:v,checkpointRef:_}}}if(!g)throw new Error(`Could not calculate new state. Previous state is: ${JSON.stringify(this.current.state,null,2)}`);if(m=tTt({label:c,state:g,parent:this.current,sideEffects:d,event:h}),!m)throw new Error("State Node creation failed!");i.update(i.addNode(m))},async apply(c,f){const d=e.get(f.type),h=OD(this.current,this.graph.backend.nodes);if(d.config.hasSideEffects){const{do:p=f,undo:m}=d.func(f.payload);this.record({label:c,state:h,sideEffects:{do:[p],undo:[m]},eventType:d.config.eventType})}else{const p=d.func(h,f.payload);this.record({label:c,state:p,sideEffects:{do:[],undo:[]},eventType:d.config.eventType})}},async to(c){r.fire(j2.TRAVERSAL_START);const f=aRe(i.current,i.backend.nodes[c],i.backend.nodes),d=[];for(let h=0;h<f.length-1;++h){const p=s(f[h]),m=s(f[h+1]);DTt(p,m)?gh(p)&&d.push(...p.sideEffects.undo):gh(m)&&d.push(...m.sideEffects.do)}for(const h of d){const p=e.get(h.type).func;await p(h.payload)}i.update(i.changeCurrent(c)),r.fire(j2.TRAVERSAL_END)},undo(){const{current:c}=i;return gh(c)?this.to(c.parent):Promise.resolve(console.warn("Already at root!"))},redo(c="latest"){const{current:f}=i;return f.children.length>0?this.to(f.children[c==="oldest"?0:f.children.length-1]):Promise.resolve(console.warn("Already at latest in this branch!"))},currentChange(c,f=!1){return i.currentChange(c,{skipOnNew:f})},done(){console.log("Setup later for URL sharing.")},tree(){return uRe(i.root,i.backend.nodes)},on(c,f){r.listen(c,f)},export(){return JSON.stringify(i.backend)},exportObject(){return JSON.parse(JSON.stringify(i.backend))},import(c){const f=JSON.parse(c),d=f.current;f.current=f.root,i.update(i.load(f)),this.to(d)},importObject(c){const f=c.current;c.current=c.root,i.update(i.load(c)),this.to(f)},metadata:o,artifact:a,annotations:u,bookmarks:l}}function PTt(e,t,n){let[r,i]=[e,t];r.level>i.level&&([r,i]=[i,r]);let s=i.level-r.level;for(;gh(i)&&s!==0;)i=n[i.parent],s-=1;if(r.id===i.id)return r.id;for(;r.id!==i.id;)gh(r)&&(r=n[r.parent]),gh(i)&&(i=n[i.parent]);return r.id}function aRe(e,t,n){const r=PTt(e,t,n),i=n[r],s=[],o=[];let[a,u]=[e,t];for(;a.id!==i.id;)s.push(a),gh(a)&&(a=n[a.parent]);for(s.push(a);u.id!==i.id;)o.push(u),gh(u)&&(u=n[u.parent]);const l=o.reverse();return[...s,...l].map(c=>c.id)}function DTt(e,t){if(gh(e)&&e.parent===t.id)return!0;if(gh(t)&&t.parent===e.id)return!1;throw new Error("Incorrect use of function. Nodes are not connected to each other.")}function uRe(e,t){return{...e,children:e.children.map(n=>uRe(t[n],t)),name:`${e.label}`}}aTt();function OTt(e){return e.length===2?pTt(e):e}class Wk{static create(){return new Wk}constructor(){this.registry=new Map}has(t){return this.registry.has(t)}register(t,n,r){const i=n.length===2;if(n.length>2)throw new Error("Incorrect action function signature. Action function can only have two arguments at most!");if(this.has(t))throw new Error(`Already registered: ${t}`);const{label:s=t,eventType:o=t}=r||{};return this.registry.set(t,{func:OTt(n),config:{hasSideEffects:!i,label:typeof s=="string"?()=>s:s,eventType:o}}),ph(t)}get(t){const n=this.registry.get(t);if(!n)throw new Error(`Not registered: ${t}`);return n}}var $Tt="Expected a function",ide=NaN,MTt="[object Symbol]",LTt=/^\s+|\s+$/g,FTt=/^[-+]0x[0-9a-f]+$/i,jTt=/^0b[01]+$/i,BTt=/^0o[0-7]+$/i,UTt=parseInt,zTt=typeof to=="object"&&to&&to.Object===Object&&to,VTt=typeof self=="object"&&self&&self.Object===Object&&self,HTt=zTt||VTt||Function("return this")(),qTt=Object.prototype,WTt=qTt.toString,GTt=Math.max,YTt=Math.min,_9=function(){return HTt.Date.now()};function KTt(e,t,n){var r,i,s,o,a,u,l=0,c=!1,f=!1,d=!0;if(typeof e!="function")throw new TypeError($Tt);t=sde(t)||0,pV(n)&&(c=!!n.leading,f="maxWait"in n,s=f?GTt(sde(n.maxWait)||0,t):s,d="trailing"in n?!!n.trailing:d);function h(S){var T=r,C=i;return r=i=void 0,l=S,o=e.apply(C,T),o}function p(S){return l=S,a=setTimeout(y,t),c?h(S):o}function m(S){var T=S-u,C=S-l,A=t-T;return f?YTt(A,s-C):A}function g(S){var T=S-u,C=S-l;return u===void 0||T>=t||T<0||f&&C>=s}function y(){var S=_9();if(g(S))return v(S);a=setTimeout(y,m(S))}function v(S){return a=void 0,d&&r?h(S):(r=i=void 0,o)}function _(){a!==void 0&&clearTimeout(a),l=0,r=u=i=a=void 0}function w(){return a===void 0?o:v(_9())}function E(){var S=_9(),T=g(S);if(r=arguments,i=this,u=S,T){if(a===void 0)return p(u);if(f)return a=setTimeout(y,t),h(u)}return a===void 0&&(a=setTimeout(y,t)),o}return E.cancel=_,E.flush=w,E}function pV(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}function XTt(e){return!!e&&typeof e=="object"}function QTt(e){return typeof e=="symbol"||XTt(e)&&WTt.call(e)==MTt}function sde(e){if(typeof e=="number")return e;if(QTt(e))return ide;if(pV(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=pV(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=e.replace(LTt,"");var n=jTt.test(e);return n||BTt.test(e)?UTt(e.slice(2),n?2:8):FTt.test(e)?ide:+e}var JTt=KTt;const df=Xl(JTt);function lRe({yScale:e,xRange:t,horizontalPosition:n,label:r}){const i=I.useMemo(()=>e.ticks(5).map(o=>({value:o,yOffset:e(o)})),[e]),s=I.useMemo(()=>jy(".2s"),[]);return b.jsxs(b.Fragment,{children:[b.jsx("g",{transform:`translate(${n-60}, ${e.range()[0]}) rotate(-90)`,children:b.jsx("foreignObject",{width:Math.abs(e.range()[1]-e.range()[0]),height:20,children:b.jsx(Oc,{children:b.jsx(ls,{gap:3,children:b.jsx(Xe,{size:"14px",style:{color:"#878E95"},children:r})})})})}),b.jsx("path",{transform:`translate(${n}, 0)`,d:["M",0,e.range()[0],"V",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}),b.jsx("path",{transform:`translate(${t[1]}, 0)`,d:["M",0,e.range()[0],"V",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}),i.map(({value:o,yOffset:a})=>b.jsxs("g",{transform:`translate(${n}, ${a})`,children:[b.jsx("line",{x2:"-6",stroke:"currentColor"}),b.jsx("line",{x2:`${t[1]-t[0]}`,stroke:`${o===0?"black":"lightgray"}`}),b.jsx("text",{style:{dominantBaseline:"middle",fontSize:"10px",textAnchor:"end",transform:"translateX(-8px)",fill:"black",font:"Roboto"},children:s(o)},o)]},o))]})}const ZTt=Object.freeze(Object.defineProperty({__proto__:null,YAxis:lRe},Symbol.toStringTag,{value:"Module"})),w9=15;function cRe({xScale:e,yScale:t,setBrushedSpace:n,params:r,data:i,brushState:s,isSelect:o=!0}){const[a,u]=I.useState([0,0]),[l,c]=I.useState(!1);return I.useEffect(()=>{const f=rs("#scatterSvgBrushStudy");if(f){const d=f.node().getBoundingClientRect();f.on("mousemove",h=>{const p=[h.clientX-d.x,h.clientY-d.y];if(u(p),l){const m=i.filter(g=>Math.abs(e(g[r.x])-p[0])<w9&&Math.abs(t(g[r.y])-p[1])<w9);if(h.ctrlKey||h.metaKey||!o){const g=new Set(s.ids);m.forEach(v=>{g.has(v[r.ids])&&g.delete(v[r.ids])});const y=Array.from(g);n([[a[0],a[1]],[a[0],a[1]]],e,t,y.length===0?"clear":"drag",y)}else{const g=Array.from(new Set([...s.ids,...m.map(y=>y[r.ids])]));g.length>0&&n([[a[0],a[1]],[a[0],a[1]]],e,t,"drag",g)}}}),f.on("mousedown",h=>{c(!0),h.stopPropagation(),h.preventDefault()}),f.on("mouseup",()=>{c(!1)})}},[a,s.ids,i,l,o,r,n,e,t]),b.jsx("circle",{style:{cursor:l?"pointer":"default"},r:w9,fill:"darkgray",opacity:.5,cx:a[0],cy:a[1]})}const e2t=Object.freeze(Object.defineProperty({__proto__:null,Paintbrush:cRe},Symbol.toStringTag,{value:"Module"})),yi={top:15,left:100,right:15,bottom:70};function mV({setFilteredTable:e,brushState:t,setBrushedSpace:n,brushType:r,params:i,data:s,brushedPoints:o}){const[a,{height:u,width:l}]=x1(),[c]=x1(),[f]=x1(),[d,h]=I.useState(!0),p=I.useMemo(()=>l-yi.left-yi.right,[l]),m=I.useMemo(()=>u-yi.top-yi.bottom,[u]),g=I.useMemo(()=>{const k=Array.from(new Set(s.map(N=>N[i.category])));return Gb(E2e).domain(k)},[s,i.category]),{xMin:y,yMin:v,xMax:_,yMax:w}=I.useMemo(()=>{const k=s.map(M=>+M[i.x]).filter(M=>M!==null),[N,O]=$7(k),D=s.map(M=>+M[i.y]).filter(M=>M!==null),[$,F]=$7(D);return{xMin:N,xMax:O,yMin:$,yMax:F}},[s,i.x,i.y]),E=I.useMemo(()=>{const k=_-y;return p<=0?null:i.dataType==="date"?JA([yi.left,p+yi.left]).domain([new Date("2014-12-20"),new Date("2016-01-10")]):Kf([yi.left,p+yi.left]).domain([y-k/10,_+k/10]).nice()},[i.dataType,p,_,y]),S=I.useMemo(()=>{const k=w-v;return m<=0?null:Kf([m+yi.top,yi.top]).domain([v-k/10,w+k/10]).nice()},[m,w,v]),T=I.useMemo(()=>{if(!E||!S)return()=>null;if(r==="Axis Selection"){const k=Qft().extent([[yi.left,yi.top+m-5],[yi.left+p,yi.top+m+5]]).on("brush end",O=>{O.sourceEvent!==void 0&&n([[O.selection[0],null],[O.selection[1],null]],E,S,O.mode)}),N=Jft().extent([[yi.left-5,yi.top],[yi.left+5,yi.top+m]]).on("brush end",O=>{O.sourceEvent!==void 0&&n([[null,O.selection[0]],[null,O.selection[1]]],E,S,O.mode)});return c.current&&f.current&&(rs(f.current).call(N),rs(c.current).call(k),t.hasBrush||(rs(f.current).call(N.move,[S(w),S(v)]),rs(c.current).call(k.move,[E(new Date("2015-01-02")),E(new Date("2015-12-31"))]),n([[E(new Date("2015-01-02")),S(w)],[E(new Date("2015-12-31")),S(v)]],E,S,"drag"))),()=>{rs(f.current).call(N.move,[S(w),S(v)]),rs(c.current).call(k.move,[E(new Date("2015-01-02")),E(new Date("2015-12-31"))]),n([[E(new Date("2015-01-02")),S(w)],[E(new Date("2015-12-31")),S(v)]],E,S,"clear")}}if(r==="Rectangular Selection"){const k=Zft().extent([[yi.left,yi.top],[yi.left+p,yi.top+m]]).on("brush",N=>{N.sourceEvent!==void 0&&n([[N.selection[0][0],N.selection[0][1]],[N.selection[1][0],N.selection[1][1]]],E,S,N.mode)}).on("end",N=>{N.selection===null&&N.sourceEvent!==void 0&&(rs(a.current).call(k.move,null),e(null))});return rs(a.current).call(k),()=>{rs(a.current).call(k.move,null),n([[null,null],[null,null]],E,S,"clear")}}return r==="Slider Selection"?(t.hasBrush||n([[E(y),S(w)],[E(_),S(v)]],E,S,null),()=>n([[E(y),S(w)],[E(_),S(v)]],E,S,"clear")):r==="Paintbrush Selection"?()=>n([[E(y),S(w)],[E(_),S(v)]],E,S,"clear",[]):()=>null},[t.hasBrush,r,c,f,m,a,n,e,p,_,y,E,w,v,S]),C=I.useMemo(()=>o.length===0?null:new Set(o),[o]),A=I.useMemo(()=>!E||!S?null:s.map((k,N)=>{if(k[i.x]===null||k[i.y]===null)return null;const O=i.dataType==="date"?E(new Date(k[i.x])):E(k[i.x]);return b.jsx("circle",{opacity:C&&!C.has(k[i.ids])?.3:1,r:3,fill:C&&!C.has(k[i.ids])?"lightgray":g(k[i.category]),cx:O,cy:S(k[i.y])},N)}),[C,g,s,i.category,i.dataType,i.ids,i.x,i.y,E,S]);return I.useEffect(()=>{r==="Axis Selection"&&Vlt(".handle").style("fill","darkgrey")},[t,r]),b.jsxs(Nf,{children:[b.jsxs(ls,{children:[b.jsx(fn,{ml:60,size:"compact-sm",style:{width:"130px"},disabled:o.length===0,onClick:()=>{e(null),T==null||T()},children:"Clear Selection"}),i.brushType==="Paintbrush Selection"?b.jsx(pY,{defaultChecked:!0,value:d?"Select":"De-Select",onChange:k=>h(k==="Select"),data:[{label:"Select",value:"Select"},{label:"De-Select",value:"De-Select",disabled:o.length===0}]}):null]}),b.jsxs(ls,{style:{width:"100%",height:"100%"},wrap:"nowrap",children:[b.jsxs("svg",{id:"scatterSvgBrushStudy",ref:a,style:{height:"500px",width:i.brushType==="Axis Selection"?"800px":"530px",fontFamily:'BlinkMacSystemFont, -apple-system, "Segoe UI", "Roboto", "Oxygen", "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue", "Helvetica", "Arial", sans-serif'},children:[E&&S?b.jsxs("g",{children:[b.jsx(lRe,{yScale:S,label:i.y,horizontalPosition:yi.left,xRange:E.range()}),b.jsx(rX,{xScale:E,yRange:S.range(),isDate:i.dataType==="date",vertPosition:m+yi.top,label:i.x,ticks:E.ticks(i.brushType==="Axis Selection"?12:5).map(k=>({value:k.toString(),offset:E(k)}))})]}):null,A,b.jsx("g",{id:"brushXRef",ref:c}),b.jsx("g",{id:"brushYRef",ref:f}),E&&S&&r==="Paintbrush Selection"?b.jsx(cRe,{brushState:t,setBrushedSpace:n,params:i,data:s,isSelect:d,xScale:E,yScale:S}):null]}),r==="Slider Selection"&&E&&S?b.jsxs(Nf,{style:{flexGrow:1},gap:50,children:[b.jsxs(Nf,{gap:0,children:[b.jsx(Xe,{children:i.x}),b.jsx(PA,{minRange:1,label:null,min:E.domain()[0],max:E.domain()[1],labelAlwaysOn:!1,onChange:k=>{n([[E(k[0]),t.y1],[E(k[1]),t.y2]],E,S,"drag")},style:{width:"300px"},marks:E.ticks(5).map(k=>({value:k,label:k})),value:[E.invert(t.x1),E.invert(t.x2)]})]}),b.jsxs(Nf,{gap:0,children:[b.jsx(Xe,{children:i.y}),b.jsx(PA,{minRange:1,label:null,min:S.domain()[0],max:S.domain()[1],onChange:k=>{n([[t.x1,S(k[1])],[t.x2,S(k[0])]],E,S,"drag")},style:{width:"300px"},marks:S.ticks(5).map(k=>({value:k,label:k})),value:[S.invert(t.y2),S.invert(t.y1)]})]})]}):null]})]})}const t2t=Object.freeze(Object.defineProperty({__proto__:null,Scatter:mV,default:mV},Symbol.toStringTag,{value:"Module"}));function ode({parameters:e,setAnswer:t}){const[n,r]=I.useState(null),[i,s]=I.useState({hasBrush:!1,x1:0,y1:0,x2:0,y2:0,ids:[]}),[o,a]=I.useState(null);I.useEffect(()=>{IK(`./data/${e.dataset}.csv`).then(g=>{a(g)})},[e]);const u=I.useMemo(()=>o?Hxt(o):null,[o]),{actions:l,trrack:c}=I.useMemo(()=>{const g=Wk.create(),y=g.register("brush",(S,T)=>(S.all={brush:T},S)),v=g.register("brushMove",(S,T)=>(S.all={brush:T},S)),_=g.register("brushResize",(S,T)=>(S.all={brush:T},S)),w=g.register("brushClear",(S,T)=>(S.all={brush:T},S)),E=HQ({registry:g,initialState:{all:{hasBrush:!1,x1:null,x2:null,y1:null,y2:null,ids:[]}}});return{actions:{brush:y,brushMove:v,brushResize:_,clearBrush:w},trrack:E}},[]),f=I.useCallback((g,y)=>{g==="drag"?c.apply("Move Brush",l.brushMove(y)):g==="handle"&&c.apply("Brush",l.brush(y))},[l,c]),d=I.useMemo(()=>df(f,100,{maxWait:100}),[f]),h=I.useCallback((g,y,v,_,w)=>{if(!y||!v)return;const E=y.invert(g[0][0]||i.x1),S=y.invert(g[1][0]||i.x2),T=v.invert(g[1][1]||i.y2),C=v.invert(g[0][1]||i.y1);let A=null;if(_==="clear")A=u;else if(w){const N=new Set(w);A=u.filter(u9(O=>N.has(O[e.ids])))}else e.brushType==="Axis Selection"?A=u.filter(u9(N=>new Date(N[e.x])>=new Date(E)&&new Date(N[e.x])<=new Date(S)&&N[e.y]>=T&&N[e.y]<=C)):A=u.filter(u9(N=>N[e.x]>=E&&N[e.x]<=S&&N[e.y]>=T&&N[e.y]<=C));const k={x1:g[0][0]||(i==null?void 0:i.x1)||0,x2:g[1][0]||(i==null?void 0:i.x2)||0,y1:g[0][1]||(i==null?void 0:i.y1)||0,y2:g[1][1]||(i==null?void 0:i.y2)||0,hasBrush:_!=="clear",ids:_!=="clear"?A==null?void 0:A.array("id"):[]};s(k),_==="drag"||_==="handle"?d(_,k):_==="clear"&&c.apply("Clear Brush",l.clearBrush(k)),r(A),t({status:!0,provenanceGraph:c.graph.backend,answers:{}})},[i,u,e,c,t,d,l]),p=I.useMemo(()=>n?n==null?void 0:n.groupby(e.category).count():u?u==null?void 0:u.groupby(e.category).count():null,[n,u,e.category]),m=I.useCallback(g=>{r(g)},[]);return o?b.jsxs(Nf,{gap:"xs",children:[b.jsx(mV,{brushedPoints:i==null?void 0:i.ids,data:o,params:e,brushType:e.brushType,setBrushedSpace:h,brushState:i,setFilteredTable:m}),b.jsx(Cz,{data:o,parameters:e,barsTable:p})]}):b.jsx(od,{})}const n2t=Object.freeze(Object.defineProperty({__proto__:null,BrushPlot:ode,default:ode},Symbol.toStringTag,{value:"Module"})),r2t=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"})),ade=e=>{const t={...e,marginTop:e.marginTop||10,marginRight:e.marginRight||10,marginBottom:e.marginBottom||40,marginLeft:e.marginLeft||75};return{...t,boundedHeight:t.height?Math.max(t.height-t.marginTop-t.marginBottom,0):0,boundedWidth:t.width?Math.max(t.width-t.marginLeft-t.marginRight,0):0}},PS=e=>{const t=I.useRef(null),n=ade(e),[r,i]=I.useState(0),[s,o]=I.useState(0);I.useEffect(()=>{const u=t.current;if(u){const l=new ResizeObserver(c=>{if(!Array.isArray(c)||!c.length)return;const f=c[0];r!==f.contentRect.width&&i(f.contentRect.width),s!==f.contentRect.height&&o(f.contentRect.height)});return l.observe(u),()=>l.unobserve(u)}return()=>null},[s,r]);const a=ade({...n,width:n.width||r,height:n.height||s});return[t,a]},i2t=Object.freeze(Object.defineProperty({__proto__:null,useChartDimensions:PS},Symbol.toStringTag,{value:"Module"}));function fRe({data:e,xScale:t,yScale:n,height:r}){return b.jsx("g",{children:e.map((i,s)=>b.jsx("rect",{x:t(i.name),y:n(i.value),width:t.bandwidth(),height:r-n(i.value),fill:"transparent",stroke:"currentColor"},s))})}const s2t=Object.freeze(Object.defineProperty({__proto__:null,Bars:fRe},Symbol.toStringTag,{value:"Module"}));function qQ({domain:e=[0,100],range:t=[10,100],withTick:n=!0,tickLen:r=5,tickFilter:i=s=>s}){const s=I.useMemo(()=>{const o=Kf().domain(e).range(t),a=t[1]-t[0],l=Math.max(1,Math.floor(a/30));return i(o.ticks(l).map(c=>({value:c,xOffset:o(c)})))},[e,t,i]);return b.jsxs("g",{children:[b.jsx("path",{d:["M",0,t[0],"h",r,"V",t[1],"h",-r].join(" "),fill:"none",stroke:"currentColor"}),n&&s.map(({value:o,xOffset:a})=>b.jsxs("g",{transform:`translate(0,${a})`,children:[b.jsx("line",{x2:`${r}`,stroke:"currentColor"}),b.jsx("text",{style:{fontSize:"10px",textAnchor:"middle",transform:"translateX(-10px)"},children:o},o)]},o))]})}const o2t=Object.freeze(Object.defineProperty({__proto__:null,NumericAxisV:qQ},Symbol.toStringTag,{value:"Module"}));function dRe({domain:e=["A","B","C","D","E"],range:t=[10,100],withTick:n=!0,tickLen:r=5,tickFilter:i=s=>s}){const s=I.useMemo(()=>{const o=yS().domain(e).range(t).padding(.2);return i(e.map(a=>({value:a,xOffset:(o(a)||0)+o.bandwidth()/2-5})))},[e,t,i]);return b.jsxs("g",{children:[b.jsx("path",{d:["M",t[0],r,"v",-r,"H",t[1],"v",r].join(" "),fill:"none",stroke:"currentColor"}),n&&s.map(({value:o,xOffset:a})=>b.jsx("g",{transform:`translate(${a}, 10)`,children:b.jsx("circle",{r:2,cx:0,cy:0,children:o},o)},o))]})}const a2t=Object.freeze(Object.defineProperty({__proto__:null,OrdinalAxisHWithDotMarks:dRe},Symbol.toStringTag,{value:"Module"})),u2t={marginBottom:40,marginLeft:40,marginTop:15,marginRight:15,width:400,height:400};function l2t({parameters:e}){const[n,r]=PS(u2t),i=yS().domain(e.data.map(u=>u.name)).range([0,r.boundedWidth]).padding(.2),s=Kf().domain([100,0]).range([0,r.boundedHeight]),o=u=>u.filter((l,c)=>c===0||c===u.length-1),a=u=>u.filter((l,c)=>e.selectedIndices.includes(c));return b.jsx("div",{className:"Chart__wrapper",ref:n,style:{height:400},children:b.jsx("svg",{width:r.width,height:r.height,children:b.jsxs("g",{transform:`translate(${[r.marginLeft,r.marginTop].join(",")})`,children:[b.jsx("g",{transform:`translate(${[6,r.boundedHeight].join(",")})`,children:b.jsx(dRe,{domain:i.domain(),range:i.range(),withTick:!0,tickLen:0,tickFilter:a})}),b.jsx("g",{transform:`translate(${[0,0].join(",")})`,children:b.jsx(qQ,{domain:s.domain(),range:s.range(),withTick:!0,tickLen:6,tickFilter:o})}),b.jsx("g",{transform:`translate(${[0,0].join(",")})`,children:b.jsx(fRe,{data:e.data,xScale:i,yScale:s,height:r.boundedHeight})})]})})})}const c2t=Object.freeze(Object.defineProperty({__proto__:null,default:l2t},Symbol.toStringTag,{value:"Module"}));function hRe({data:e}){return b.jsx("g",{children:e.map(({bubble:t},n)=>b.jsx("circle",{cx:t.x,cy:t.y,r:t.r,fill:"transparent",stroke:"currentColor"},n))})}const f2t=Object.freeze(Object.defineProperty({__proto__:null,Bubbles:hRe},Symbol.toStringTag,{value:"Module"}));function WQ({positions:e}){return b.jsx("g",{children:e.map((t,n)=>b.jsx("circle",{cx:t.x,cy:t.y,r:2,fill:"black",stroke:"currentColor"},n))})}const d2t=Object.freeze(Object.defineProperty({__proto__:null,DotMarks:WQ},Symbol.toStringTag,{value:"Module"})),h2t={marginBottom:40,marginLeft:40,marginTop:15,marginRight:15,height:400,width:400},p2t=({data:e},t=100,n=100)=>{const i={children:e.map(a=>+a.value).map(a=>({value:a}))},s=KTe().size([t-10,n-10]).padding(1.5),o=D6(i).sum(a=>a.value);return s(o).descendants().filter(a=>!a.children).map((a,u)=>({bubble:a,data:e[u]}))},m2t=(e,t)=>e.filter((n,r)=>t.includes(r)).map(({bubble:n})=>({x:n.x,y:n.y}));function g2t({parameters:e}){const[t,n]=PS(h2t),r=p2t(e,n.width,n.height),i=m2t(r,e.selectedIndices);return b.jsx("div",{className:"Chart__wrapper",ref:t,style:{height:"400px"},children:b.jsx("svg",{width:n.width,height:n.height,children:b.jsxs("g",{transform:`translate(${[n.marginLeft/2,n.marginTop/2].join(",")})`,children:[b.jsx(hRe,{data:r}),b.jsx(WQ,{positions:i})]})})})}const y2t=Object.freeze(Object.defineProperty({__proto__:null,default:g2t},Symbol.toStringTag,{value:"Module"}));function pRe({arcs:e}){return b.jsx("g",{children:e.map((t,n)=>b.jsx("path",{d:t(),fill:"transparent",stroke:"currentColor"},n))})}const v2t=Object.freeze(Object.defineProperty({__proto__:null,Slices:pRe},Symbol.toStringTag,{value:"Module"}));function mRe({positions:e}){return b.jsx("g",{children:e.map((t,n)=>b.jsx("g",{transform:`translate(${t.centroid()})`,children:b.jsx("circle",{r:2,cx:0,cy:0},n)},n))})}const b2t=Object.freeze(Object.defineProperty({__proto__:null,SlicesDotMarks:mRe},Symbol.toStringTag,{value:"Module"})),_2t={marginBottom:40,marginLeft:40,marginTop:15,marginRight:15,height:400,width:500},w2t=A2e().value(e=>e.value),BT=150;function E2t({parameters:e}){const[t,n]=PS(_2t),r=w2t(e.data),i=r.map(o=>Q3().innerRadius(0).outerRadius(BT).startAngle(o.startAngle).endAngle(o.endAngle)),s=r.map(o=>Q3().outerRadius(BT+10).innerRadius(BT+10).startAngle(o.startAngle).endAngle(o.endAngle)).filter((o,a)=>e.selectedIndices.includes(a));return b.jsx("div",{className:"Chart__wrapper",ref:t,style:{height:400},children:b.jsx("svg",{width:n.width,height:n.height,children:b.jsxs("g",{transform:`translate(${[n.marginLeft+BT,n.marginTop+BT].join(",")})`,children:[b.jsx(pRe,{arcs:i}),b.jsx(mRe,{positions:s})]})})})}const x2t=Object.freeze(Object.defineProperty({__proto__:null,default:E2t},Symbol.toStringTag,{value:"Module"}));function gRe({domain:e=[0,100],range:t=[10,100],withTick:n=!0,tickLen:r=5,tickFilter:i=s=>s}){const s=I.useMemo(()=>{const o=Kf().domain(e).range(t),a=t[1]-t[0],l=Math.max(1,Math.floor(a/30));return i(o.ticks(l).map(c=>({value:c,xOffset:o(c)})))},[e,t,i]);return b.jsxs("g",{children:[b.jsx("path",{d:["M",t[0],r,"v",-r,"H",t[1],"v",r].join(" "),fill:"none",stroke:"currentColor"}),n&&s.map(({value:o,xOffset:a})=>b.jsxs("g",{transform:`translate(${a}, 0)`,children:[b.jsx("line",{y2:`${r}`,stroke:"currentColor"}),b.jsx("text",{style:{fontSize:"10px",textAnchor:"middle",transform:"translateY(20px)"},children:o},o)]},o))]})}const S2t=Object.freeze(Object.defineProperty({__proto__:null,NumericAxisH:gRe},Symbol.toStringTag,{value:"Module"}));function yRe({data:e,barWidth:t,yScale:n}){return b.jsx("g",{children:e.map((r,i)=>b.jsx("rect",{x:t/2,y:n(r[0][1]),width:t,height:n(r[0][0])-n(r[0][1]),fill:"transparent",stroke:"currentColor"},i))})}const T2t=Object.freeze(Object.defineProperty({__proto__:null,StackedBars:yRe},Symbol.toStringTag,{value:"Module"})),C2t={marginBottom:40,marginLeft:40,marginTop:15,marginRight:15,height:400,width:400};function A2t({parameters:e}){const[n,r]=PS(C2t),i=yS().domain(e.data.map(h=>h.name)).range([0,r.boundedWidth]).padding(.2),s=Kf().domain([100,0]).range([0,r.boundedWidth]),o=h=>h.filter((p,m)=>m===0||m===h.length-1),a=h=>h.filter((p,m)=>e.selectedIndices.includes(m)),u=h=>{const p=h.map(_=>+_.value),g=p.reduce((_,w)=>Number(_)+Number(w))/100,y={};p.forEach((_,w)=>{y[String.fromCharCode(w+65)]=_/g});const v=[y];return F0t().keys(e.data.map(_=>_.name))(v)},l=(h,p,m)=>h.filter((y,v)=>p.includes(v)).map(y=>({x:m,y:s(y[0][1])+.5*(s(y[0][0])-s(y[0][1]))})),c=u(e.data),f=Math.min(r.width,r.height)/2-20,d=l(c,e.selectedIndices,f);return b.jsx("div",{className:"Chart__wrapper",ref:n,style:{height:"400"},children:b.jsx("svg",{width:r.width,height:r.height,children:b.jsxs("g",{transform:`translate(${[r.marginLeft,r.marginTop].join(",")})`,children:[b.jsx("g",{transform:`translate(${[6,r.boundedHeight].join(",")})`,children:b.jsx(gRe,{domain:i.domain(),range:i.range(),withTick:!0,tickLen:0,tickFilter:a})}),b.jsx("g",{transform:"translate(0, 0)",children:b.jsx(qQ,{domain:s.domain(),range:s.range(),withTick:!0,tickLen:6,tickFilter:o})}),b.jsxs("g",{transform:"translate(0, 0)",children:[b.jsx(yRe,{data:c,barWidth:f,yScale:s}),b.jsx(WQ,{positions:d})]})]})})})}const I2t=Object.freeze(Object.defineProperty({__proto__:null,default:A2t},Symbol.toStringTag,{value:"Module"})),k2t={marginBottom:40,marginLeft:40,marginTop:15,marginRight:15,height:650,width:850};function R2t({parameters:e,setAnswer:t}){const[n,r]=PS(k2t),[i,s]=I.useState(100),[o,a]=I.useState(100),[u,l]=I.useState(300),{taskid:c}=e,{actions:f,trrack:d}=I.useMemo(()=>{const p=Wk.create(),m=p.register("click",(y,v)=>(y.clickX=v.clickX,y.clickY=v.clickY,y.distance=v.distance,y)),g=HQ({registry:p,initialState:{distance:0,speed:10,clickX:0,clickY:0}});return{actions:{clickAction:m},trrack:g}},[]),h=I.useCallback(p=>{const m=rs("#movingCircle"),g=rs("#clickAccuracySvg"),y=z7(p,g.node()),v=[+m.attr("cx"),+m.attr("cy")],_=`${Math.round(Math.sqrt((y[0]-v[0])**2+(y[1]-v[1])**2))}px`;d.apply("Clicked",f.clickAction({distance:+_,clickX:y[0],clickY:y[1]})),t({status:!0,provenanceGraph:d.graph.backend,answers:{[c]:_}})},[f,t,c,d]);return I.useEffect(()=>{const p=Math.random()*800,m=Math.random()*600,y=Math.sqrt((p-i)**2+(m-o)**2)/u*1e3;rs(n.current).select("circle").transition().duration(y).ease(Lft).attr("cx",p).attr("cy",m).on("end",()=>{s(p),a(m)})},[n,u,i,o]),b.jsxs(b.Fragment,{children:[b.jsx("div",{className:"Chart__wrapper",ref:n,onClick:h,style:{height:"650px"},children:b.jsx("svg",{id:"clickAccuracySvg",width:r.width,height:r.height,children:b.jsxs("g",{transform:`translate(${[r.marginLeft/2,r.marginTop/2].join(",")})`,children:[b.jsx("rect",{width:"800",height:"600",stroke:"black",strokeWidth:"5",fill:"none"}),b.jsx("circle",{id:"movingCircle",cx:"100",cy:"100",r:"10"})]})})}),b.jsxs(pe,{children:["Adjust speed (px/s):",b.jsx(i6,{w:800,min:10,max:1e3,value:u,onChange:l})]})]})}const N2t=Object.freeze(Object.defineProperty({__proto__:null,default:R2t},Symbol.toStringTag,{value:"Module"}));function ude({rankings:e}){return b.jsx("div",{style:{fontFamily:"sans-serif"},children:b.jsx("div",{children:e.map((t,n)=>b.jsx("div",{style:{textAlign:"center",marginBottom:1,padding:2,background:`${t===0?"#AEC7E8":"#FF9896"}`},children:t===0?"Group A":"Group B"},n))})})}function P2t({parameters:e,setAnswer:t}){const n=Ly(),[r,i]=I.useState(""),{goToNextStep:s,isNextDisabled:o}=Bxe(),a=I.useMemo(()=>Math.floor(Math.random()*2)===0?"r1":"r2",[]),[u]=I.useState(new URLSearchParams(window.location.search)),l=(u.get("admin")||"f")==="t",c=I.useCallback(h=>{i(h),t({status:!0,answers:{[`${n}/leftARP`]:a==="r1"?e.data.r1ARP:e.data.r2ARP,[`${n}/rightARP`]:a==="r2"?e.data.r1ARP:e.data.r2ARP,[`${n}/leftRanking`]:JSON.stringify(a==="r1"?e.data.r1:e.data.r2),[`${n}/rightRanking`]:JSON.stringify(a==="r2"?e.data.r1:e.data.r2),[`${n}/choice`]:h,[`${n}/correctChoice`]:a==="r1"&&parseFloat(e.data.r1ARP)<parseFloat(e.data.r2ARP)?"left":"right"}})},[n,a,e.data,t]),f=I.useCallback(()=>{o||s()},[o,s]);I.useEffect(()=>{const h=HUe([["ArrowLeft",()=>c("left")],["ArrowRight",()=>c("right")],["Enter",f]]);return document.body.addEventListener("keydown",h),()=>{document.body.removeEventListener("keydown",h)}},[c,f]);let d=!1;return a==="r1"?(r==="left"&&parseFloat(e.data.r1ARP)<parseFloat(e.data.r2ARP)||r==="right"&&parseFloat(e.data.r2ARP)<parseFloat(e.data.r1ARP))&&(d=!0):(r==="left"&&parseFloat(e.data.r2ARP)<parseFloat(e.data.r1ARP)||r==="right"&&parseFloat(e.data.r1ARP)<parseFloat(e.data.r2ARP))&&(d=!0),b.jsxs("div",{children:[b.jsxs(qa,{children:[b.jsxs(qa.Col,{span:2,children:[b.jsx(ude,{rankings:a==="r1"?e.data.r1:e.data.r2}),b.jsx(fn,{fullWidth:!0,disabled:r==="left",onClick:()=>{c("left")},children:r==="left"?b.jsx(yae,{}):"Select this ranking"}),l&&r&&b.jsx("div",{children:a==="r1"?e.data.r1ARP:e.data.r2ARP})]}),b.jsxs(qa.Col,{span:2,children:[b.jsx(ude,{rankings:a==="r1"?e.data.r2:e.data.r1}),b.jsx(fn,{fullWidth:!0,disabled:r==="right",onClick:()=>{c("right")},children:r==="right"?b.jsx(yae,{}):"Select this ranking"}),l&&r&&b.jsx("div",{children:a==="r1"?e.data.r2ARP:e.data.r1ARP})]})]}),l&&r&&b.jsx("div",{style:{padding:20,textAlign:"center",width:300},children:d?"CORRECT":"INCORRECT"})]})}const D2t=Object.freeze(Object.defineProperty({__proto__:null,default:P2t},Symbol.toStringTag,{value:"Module"})),O2t={Public:"#1f77b4",Private:"#ff7f0e",Foreign:"#2ca02c",Other:"#d62728",Proprietary:"#9467bd"};function lde({parameters:e}){const[t,n]=I.useState(null),[r]=I.useState(e.dataset),[i,s]=I.useState(null);return I.useEffect(()=>{IK(`./data/${r}.csv`).then(o=>{if(o.length===0){console.warn("Empty data received for",r);return}n(o)})},[r]),I.useEffect(()=>{if(t){const o=rs(i);o.selectAll("*").remove();const a={top:20,right:30,bottom:60,left:60},u=800-a.left-a.right,l=400-a.top-a.bottom,c=o.append("g").attr("transform",`translate(${a.left},${a.top})`),f=yS().domain(t.map(h=>h[e.y])).range([0,u]).padding(.1),d=Kf().domain([0,ch(t,h=>+h[e.x])||0]).nice().range([l,0]);c.append("g").attr("transform",`translate(0,${l})`).call(out(f).tickSize(5)),c.append("g").call(aut(d)),c.append("text").attr("fill","#000").attr("transform","rotate(-90)").attr("y",-a.left+15).attr("x",-(l/2)).attr("text-anchor","middle").attr("font-size","12px").text(`${e.x} (Billion USD)`),c.selectAll(".bar").data(t).enter().append("rect").attr("class","bar").attr("x",h=>f(h[e.y])||0).attr("y",h=>d(+h[e.x])).attr("width",f.bandwidth()).attr("height",h=>l-d(+h[e.x])).attr("fill",h=>O2t[h[e.y]]||"#ccc")}},[t,i,e]),b.jsxs(Nf,{children:[b.jsxs(Ob,{shadow:"md",radius:"md",p:"md",withBorder:!0,children:[b.jsx(li,{order:3,children:"Debt by School Type"}),b.jsx("svg",{ref:s,width:800,height:400})]}),t===null&&b.jsx(od,{})]})}const $2t=Object.freeze(Object.defineProperty({__proto__:null,Bar:lde,default:lde},Symbol.toStringTag,{value:"Module"})),M2t=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"})),vo={Purple:"#6D3E91",DarkOrange:"#C05917",LightTeal:"#58AC8C",Blue:"#286BBB",Maroon:"#883039",Camel:"#BC8E5A",MidnightBlue:"#00295B",DustyCoral:"#C15065",DarkOliveGreen:"#18470F",DarkCopper:"#9A5129",Peach:"#E56E5A",Mauve:"#A2559C",Turquoise:"#38AABA",OliveGreen:"#578145",Cherry:"#970046",Teal:"#00847E",RustyOrange:"#B13507",Denim:"#4C6A9C",Fuchsia:"#CF0A66",TealishGreen:"#00875E",Copper:"#B16214",DarkMauve:"#8C4569",Lime:"#3B8E1D",Coral:"#D73C50"},F_={DarkOrangeDarker:"#BE5915",PeachDarker:"#C4523E",LightTealDarker:"#2C8465",TurquoiseDarker:"#008291",CamelDarker:"#996D39",LimeDarker:"#338711"},vRe=[vo.DustyCoral,F_.LightTealDarker,F_.DarkOrangeDarker,vo.Purple,vo.DarkOliveGreen,vo.Blue,vo.Maroon,F_.CamelDarker,vo.MidnightBlue,vo.DarkCopper,F_.PeachDarker,vo.Mauve,F_.TurquoiseDarker,vo.OliveGreen,vo.Cherry,vo.Teal,vo.RustyOrange,vo.Denim,vo.TealishGreen,vo.Copper,vo.DarkMauve,F_.LimeDarker,vo.Coral],L2t=Object.freeze(Object.defineProperty({__proto__:null,OwidDistinctLinesPalette:vRe},Symbol.toStringTag,{value:"Module"}));function gV({xScale:e,yRange:t,vertPosition:n,ticks:r,isDate:i=!1,showLines:s=!0}){const o=I.useMemo(()=>r.length>1?Math.abs(r[1].offset-r[0].offset):e.range()[0]-e.range()[1],[r,e]),a=u=>{const l=Qb("%b %e, %Y");return i?l(u).toString():jy(".2s")(parseFloat(String(u)))};return b.jsxs(b.Fragment,{children:[s&&b.jsx("path",{transform:`translate(0, ${t[1]})`,d:["M",e.range()[0],0,"H",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}),r.map(({value:u,offset:l})=>b.jsxs("g",{transform:`translate(${l}, ${n})`,children:[b.jsx("line",{y2:"6",stroke:"currentColor"}),s&&b.jsx("line",{y2:`${-(t[0]-t[1])}`,stroke:"lightgray"}),b.jsx("foreignObject",{x:0-o/2,y:10,width:o,height:20,children:b.jsx(Oc,{children:b.jsx(ui,{withinPortal:!0,label:String(u),children:b.jsxs(Xe,{px:2,size:"xs",style:{textAlign:"center",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"},children:[a(i?new Date(u):u)," "]})})})})]},`${u}tick`))]})}const F2t=Object.freeze(Object.defineProperty({__proto__:null,XAxis:gV,default:gV},Symbol.toStringTag,{value:"Module"}));function bRe({yScale:e,xRange:t,horizontalPosition:n,label:r}){const i=I.useMemo(()=>e.ticks(5).map(o=>({value:o,yOffset:e(o)})),[e]),s=I.useMemo(()=>jy(".2s"),[]);return b.jsxs(b.Fragment,{children:[b.jsx("g",{transform:`translate(${n-60}, ${e.range()[0]}) rotate(-90)`,children:b.jsx("foreignObject",{width:Math.abs(e.range()[1]-e.range()[0]),height:20,children:b.jsx(Oc,{children:b.jsx(ls,{gap:3,children:b.jsx(Xe,{size:"14px",style:{color:"#878E95"},children:r})})})})}),b.jsx("path",{transform:`translate(${n}, 0)`,d:["M",0,e.range()[0],"V",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}),b.jsx("path",{transform:`translate(${t[1]}, 0)`,d:["M",0,e.range()[0],"V",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}),i.map(({value:o,yOffset:a})=>b.jsxs("g",{transform:`translate(${n}, ${a})`,children:[b.jsx("line",{x2:"-6",stroke:"currentColor"}),b.jsx("line",{x2:`${t[1]-t[0]}`,stroke:`${o===0?"black":"lightgray"}`}),b.jsx("text",{style:{dominantBaseline:"middle",fontSize:"10px",textAnchor:"end",transform:"translateX(-8px)",fill:"black",font:"Roboto"},children:s(o)},o)]},o))]})}const j2t=Object.freeze(Object.defineProperty({__proto__:null,YAxis:bRe},Symbol.toStringTag,{value:"Module"})),ea={top:30,left:100,right:110,bottom:80};function yV({parameters:e,data:t,dataname:n,items:r,selection:i,range:s,guardrail:o}){const a=I.useMemo(()=>{const v=r.filter(_=>i==null?void 0:i.includes(_.name)).map(_=>_.group);return r.filter(_=>v.includes(_.group)&&!(i!=null&&i.includes(_.name))).map(_=>_.name)},[i,r]),u=I.useMemo(()=>{const v=r.map(E=>E.group),_=t.filter(E=>v.includes(String(E[e.group_var]))),w=Vat(_,E=>({mean:eSe(E,S=>+S[e.y_var]),upperq:BA(E,.75,S=>+S[e.y_var]),lowerq:BA(E,.25,S=>+S[e.y_var])}),E=>E[e.x_var]);return Array.from(w,([E,S])=>({date:E,mean:S.mean,upperq:S.upperq,lowerq:S.lowerq}))},[t,e,r]),l=n==="clean_data"?800-ea.left-ea.right-60:800-ea.left-ea.right,c=400-ea.top-ea.bottom,{yMin:f,yMax:d}=I.useMemo(()=>{let v=[];switch(o){case"super_data":v=(i==null?void 0:i.concat(a))??[];break;default:v=i??[];break}const _=t.filter(C=>v.includes(String(C[e.cat_var]))).map(C=>+C[e.y_var]).filter(C=>C!==null),[w,E]=$7(_),S=h3(u,C=>C.lowerq)??w,T=ch(u,C=>C.upperq)??E;return{yMin:o==="super_summ"?Math.min(w,S):w,yMax:o==="super_summ"?Math.max(E,T):E}},[t,i,o,u,a,e]),h=I.useMemo(()=>s?JA().range([ea.left,l+ea.left]).domain(s):JA().range([ea.left,l+ea.left]).domain([new Date(e.start_date),new Date(e.end_date)]),[l,s,e]),p=I.useMemo(()=>Kf().range([c+ea.top,ea.top]).domain([f,d]).nice(),[c,d,f]),m=I.useMemo(()=>{const v=Array.from(new Set(t.map(_=>String(_[e.cat_var]))));return Gb(vRe).domain(v)},[t,e]),g=I.useMemo(()=>{if(!h||!p)return[];const v=JK().x(_=>h(WK("%Y-%m-%d")(String(_[e.x_var])))).y(_=>p(+_[e.y_var])).curve(I2e);return i==null?void 0:i.map(_=>({GroupOne:_,path:v(t.filter(w=>w[e.cat_var]===_))}))},[t,h,p,i,e]),y=I.useMemo(()=>h.ticks(6).map(v=>({value:Qb("%b %e, %Y")(v),offset:h(v)})),[h]);return(i==null?void 0:i.length)===0?b.jsx(Oc,{style:{width:"800px",height:"400px"},children:b.jsx(Xe,{fs:"italic",c:"dimmed",children:"Select an item to view the chart."})}):b.jsxs("svg",{style:{height:"400px",width:"800px"},children:[b.jsxs("g",{id:"axes",children:[b.jsx(gV,{isDate:!0,xScale:h,yRange:p.range(),vertPosition:c+ea.top,ticks:y}),b.jsx(bRe,{label:"loan balance",yScale:p,horizontalPosition:ea.left,xRange:h.range()})]}),g==null?void 0:g.map(v=>b.jsx("g",{children:b.jsx("path",{id:`${v.GroupOne}`,fill:"none",stroke:m(v.GroupOne),strokeWidth:2,d:v.path})},`${v.GroupOne}_g`)),b.jsx("g",{transform:`translate(${l+ea.left+20}, ${ea.top})`,children:Array.from(new Set(t.map(v=>v[e.cat_var]))).map((v,_)=>b.jsxs("g",{transform:`translate(0, ${_*20})`,children:[b.jsx("rect",{width:15,height:15,fill:m(String(v))}),b.jsx("text",{x:20,y:15,style:{fontSize:"12px",fill:"black"},children:v})]},v))})]})}const B2t=Object.freeze(Object.defineProperty({__proto__:null,LineChart:yV,default:yV},Symbol.toStringTag,{value:"Module"}));function vV({parameters:e,setRange:t,trackRange:n}){const r=JA().domain([new Date(e.start_date),new Date(e.end_date)]).range([0,100]);function i(l){return r.invert(l)}function s(l){const c=i(l);return Qb("%b %e, %Y")(c)}const o={marginTop:"20px",marginBottom:"20px"},a={marginBottom:"5px",fontWeight:"bold",color:"#4a5568"},u={paddingLeft:"30px"};return b.jsxs(pe,{style:u,children:[b.jsx(Xe,{style:[a,{marginBottom:30}],children:"Select Date Range:"}),b.jsx(PA,{style:o,defaultValue:[0,100],label:l=>s(l),labelAlwaysOn:!0,step:1,min:0,max:100,disabled:!e.allow_time_slider,onChange:([l,c])=>{const f=[i(l),i(c)];t(f),n(f)},thumbSize:16,thumbToLabel:"Date Range",marks:[{value:0,label:s(0)},{value:100,label:s(100)}]})]})}const U2t=Object.freeze(Object.defineProperty({__proto__:null,RangeSelector:vV,default:vV},Symbol.toStringTag,{value:"Module"}));function cde({parameters:e}){const[t,n]=I.useState(null),[r]=I.useState(e.dataset),[i]=I.useState(e.initial_selection),[s,o]=I.useState(null),[a,u]=I.useState([new Date(e.start_date),new Date(e.end_date)]),[l]=I.useState(e.guardrail);I.useEffect(()=>{IK(`./data/${r}.csv`).then(m=>{n(m),o(Array.from(new Set(m.map(g=>JSON.stringify({name:g[e.cat_var],group:g[e.group_var]})))).map(g=>JSON.parse(g)))})},[r,e]);const c=I.useMemo(()=>t&&a?t.filter(m=>{const g=new Date(m[e.x_var]);return g.getTime()>=a[0].getTime()&&g.getTime()<=a[1].getTime()}):null,[t,a,e.x_var]),{actions:f,trrack:d}=I.useMemo(()=>{const m=Wk.create(),g=m.register("selection",(_,w)=>(_.selection=w,_)),y=m.register("range",(_,w)=>(_.range=w,_)),v=HQ({registry:m,initialState:{selection:[],range:[e.start_date,e.end_date]}});return{actions:{selection:g,range:y},trrack:v}},[e.end_date,e.start_date]),h=I.useCallback(m=>{d.apply("Change daterange",f.range([m[0].toISOString().slice(0,10),m[1].toISOString().slice(0,10)]))},[d,f]),p=I.useMemo(()=>df(h,200),[h]);return c&&s&&a&&i?b.jsx("div",{children:b.jsxs("div",{children:[b.jsx("div",{children:b.jsx("h3",{children:"Loan Balance over Time"})}),b.jsxs("div",{children:[b.jsx(yV,{parameters:e,data:c,dataname:r,items:s,selection:i,range:a,guardrail:l}),e.allow_time_slider&&b.jsx("div",{style:{width:"700px"},children:b.jsx(vV,{parameters:e,setRange:u,trackRange:p})})]})]})}):b.jsx("div",{children:"Loading..."})}const z2t=Object.freeze(Object.defineProperty({__proto__:null,DataExplorer:cde,default:cde},Symbol.toStringTag,{value:"Module"})),fde=e=>{const t={...e,marginTop:e.marginTop||10,marginRight:e.marginRight||10,marginBottom:e.marginBottom||40,marginLeft:e.marginLeft||75};return{...t,boundedHeight:t.height?Math.max(t.height-t.marginTop-t.marginBottom,0):0,boundedWidth:t.width?Math.max(t.width-t.marginLeft-t.marginRight,0):0}},_Re=e=>{const t=I.useRef(null),n=fde(e),[r,i]=I.useState(0),[s,o]=I.useState(0);I.useEffect(()=>{const u=t.current;if(u){const l=new ResizeObserver(c=>{if(!Array.isArray(c)||!c.length)return;const f=c[0];r!==f.contentRect.width&&i(f.contentRect.width),s!==f.contentRect.height&&o(f.contentRect.height)});return l.observe(u),()=>l.unobserve(u)}return()=>null},[s,r]);const a=fde({...n,width:n.width||r,height:n.height||s});return[t,a]},V2t=Object.freeze(Object.defineProperty({__proto__:null,useChartDimensions:_Re},Symbol.toStringTag,{value:"Module"}));function wRe({data:e,barWidth:t,totalHeight:n,colors:r}){const{totalPaid:i=0,remainingBalance:s=0}=e[0]||{},o=i+s,a=o?i/o*n:0,u=o?s/o*n:0,l=o?Math.round(i/o*100):0,c=y=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(y),[f,d]=I.useState(null),[h,p]=I.useState(null),m=(y,v,_,w)=>{p(w),d({content:_,x:y+t+10,y:v})},g=()=>{d(null),p(null)};return e.length===0?null:b.jsxs("svg",{width:t+200,height:n+40,style:{border:"1px solid #ddd"},children:[b.jsxs("g",{children:[b.jsx("rect",{x:20,y:n-a,width:t,height:a,fill:h==="paid"?"#2DB681":r[0],onMouseEnter:()=>m(20,n-a/2,[`Paid percent: ${l}%`],"paid"),onMouseLeave:g,style:{transition:"fill 0.3s ease",cursor:"pointer"}}),b.jsx("text",{x:t/2+20,y:n-a/2,textAnchor:"middle",fill:"#ffffff",fontSize:"14",fontWeight:"bold",children:c(i)}),b.jsx("rect",{x:20,y:n-a-u,width:t,height:u,fill:h==="remaining"?"#46A3CA":r[1],onMouseEnter:()=>m(20,n-a-u/2,[`Remaining Percent: ${Math.round(s/o*100)}%`],"remaining"),onMouseLeave:g,style:{transition:"fill 0.3s ease",cursor:"pointer"}}),b.jsx("text",{x:t/2+20,y:n-a-u/2,textAnchor:"middle",fill:"#ffffff",fontSize:"14",fontWeight:"bold",children:c(s)})]}),f&&b.jsx("text",{x:f.x,y:f.y,fill:"black",fontSize:"13",textAnchor:"start",children:f.content.map((y,v)=>b.jsx("tspan",{x:f.x,dy:v===0?"0":"15",children:y},v))})]})}const H2t=Object.freeze(Object.defineProperty({__proto__:null,default:wRe},Symbol.toStringTag,{value:"Module"})),q2t="answer-array",Ha={chartContainer:{height:"400px",display:"flex",flexDirection:"column",alignItems:"center",position:"relative"},chartWrapper:{display:"flex",flexDirection:"column",alignItems:"center",paddingBottom:"-10px"},extraPaymentOptions:{marginTop:"10px",textAlign:"center",display:"flex",flexDirection:"row",justifyContent:"center",gap:"20px"},radioLabel:{fontSize:"16px",cursor:"pointer",display:"flex",alignItems:"center",gap:"6px",padding:"8px 8px",borderRadius:"8px",border:"1px solid #4e79a7",backgroundColor:"#f9f9f9",transition:"background-color 0.3s ease"},radioButton:{width:"18px",height:"18px",cursor:"pointer"},nextYearButton:{marginTop:"15px",padding:"8px 20px",cursor:"pointer",backgroundColor:"#0077A9",color:"white",border:"none",borderRadius:"8px",fontSize:"16px",boxShadow:"0px 4px 6px rgba(0, 0, 0, 0.1)",transition:"background-color 0.3s ease, transform 0.2s ease"},disabledButton:{marginTop:"15px",padding:"8px 20px",cursor:"not-allowed",backgroundColor:"#cccccc",color:"white",border:"none",borderRadius:"8px"},legend:{display:"flex",flexDirection:"column",alignItems:"flex-start",position:"absolute",top:"200px",right:"200px",gap:"6px"},legendItem:{display:"flex",alignItems:"center",fontSize:"14px"},legendColorBox:{width:"15px",height:"15px",backgroundColor:"currentColor",marginRight:"5px"},paidOffMessage:{fontSize:"20px",fontWeight:"bold",marginTop:"20px"},submitButton:{marginTop:"15px",padding:"8px 20px",cursor:"pointer",backgroundColor:"#28a745",color:"white",border:"none",borderRadius:"8px",fontSize:"16px",boxShadow:"0px 4px 6px rgba(0, 0, 0, 0.1)",transition:"background-color 0.3s ease, transform 0.2s ease"}},dde=[];function W2t(){return b.jsxs("div",{style:Ha.legend,children:[b.jsxs("div",{style:{...Ha.legendItem,color:"#0077A9"},children:[b.jsx("span",{style:{...Ha.legendColorBox,backgroundColor:"#0077A9"}}),"Remaining Loan Balance"]}),b.jsxs("div",{style:{...Ha.legendItem,color:"#06945D"},children:[b.jsx("span",{style:{...Ha.legendColorBox,backgroundColor:"#06945D"}}),"Amount Paid Off"]})]})}function G2t({extraPayment:e,setExtraPayment:t}){return b.jsxs("div",{style:Ha.extraPaymentOptions,children:[b.jsxs("label",{style:Ha.radioLabel,children:[b.jsx("input",{type:"radio",name:"extraPayment",value:"0",checked:e===0,onChange:()=>t(0),style:Ha.radioButton}),"Pay $374.86 per month"]}),b.jsxs("label",{style:Ha.radioLabel,children:[b.jsx("input",{type:"radio",name:"extraPayment",value:"1200",checked:e===1200,onChange:()=>t(1200),style:Ha.radioButton}),"Pay $474.86 per month"]})]})}function Y2t({setAnswer:e}){var g;const[o,a]=I.useState([]),[u,l]=I.useState(0),[c,f]=I.useState(Array(10).fill(0)),[d,h]=_Re({marginBottom:0,marginLeft:0,marginTop:0,marginRight:0,height:400,width:0});I.useEffect(()=>{a((()=>{const v=[];let _=3e4,w=0;for(let E=2025;E<2035&&!(_<=0);E+=1){const S=_*.065,C=4173.14+c[E-2025],A=Math.min(_+S,C);_=Math.max(0,_+S-A),w+=A,v.push({year:E,totalPaid:w,remainingBalance:_,interest:S,total_payment:w})}return v})())},[c]);function p(){var _;dde[u]=c[u]>0;const y=u+1;(y>=10||((_=o[y])==null?void 0:_.remainingBalance)<=4173.14)&&e({status:!0,answers:{[q2t]:dde}}),l(y)}const m=u>=o.length||((g=o[u])==null?void 0:g.remainingBalance)<=4173.14;return b.jsxs("div",{style:Ha.chartContainer,children:[b.jsx("h2",{children:"Loan Balance and Payments Over Time"}),b.jsxs("h3",{children:["Year:",u+2025]}),!m&&b.jsx(W2t,{}),b.jsx("div",{ref:d,style:Ha.chartWrapper,children:m?b.jsx("div",{style:Ha.paidOffMessage,children:"Congratulations! Your loan has been paid off."}):b.jsxs(b.Fragment,{children:[b.jsx("svg",{width:h.width,height:h.height,children:b.jsx("g",{transform:`translate(${h.width/2-100}, 0)`,children:o.length>0&&u<o.length?b.jsx(wRe,{data:[o[u]],barWidth:Math.max(200,Math.min(h.width,h.height)/10-5),totalHeight:h.height-h.marginTop-h.marginBottom,colors:["#06945D","#0077A9"]}):b.jsx("text",{children:"No data available for this year."})})}),b.jsx(G2t,{extraPayment:c[u],setExtraPayment:y=>{const v=[...c],_=typeof y=="function"?y(v[u]):y;v[u]=_,f(v)}}),b.jsx("button",{type:"button",style:m?Ha.disabledButton:Ha.nextYearButton,onClick:p,disabled:m,children:"Next Year"})]})})]})}const K2t=Object.freeze(Object.defineProperty({__proto__:null,default:Y2t},Symbol.toStringTag,{value:"Module"}));function ERe({size:e}){const t=[{label:"housing",value:40,color:"#ff6f61"},{label:"food",value:10,color:"#69b578"},{label:"transportation",value:15,color:"#58A0D7"},{label:"savings",value:15,color:"#ffbf00"},{label:"other",value:20,color:"#9c88d2"}],n=A2e().value(s=>s.value),r=Q3().innerRadius(0).outerRadius(e/4),i=n(t);return b.jsxs("svg",{width:e,height:e/2,viewBox:`0 0 ${e} ${e/2}`,children:[b.jsx("g",{transform:`translate(${e/4}, ${e/4})`,children:i.map((s,o)=>b.jsx("path",{d:r(s)||void 0,fill:t[o].color,children:b.jsx("title",{children:`${s.data.label}: ${(s.data.value/dK(t,a=>a.value)*100).toFixed(1)}%`})},o))}),b.jsxs("g",{transform:`translate(${2.35*e/4}, ${e/9})`,children:[b.jsx("circle",{r:10,fill:"#ff6f61"}),b.jsx("text",{x:13,y:3,children:"Housing"}),b.jsx("circle",{cy:25,r:10,fill:"#69b578"}),b.jsx("text",{x:13,y:28,children:"Food"}),b.jsx("circle",{cy:50,r:10,fill:"#58A0D7"}),b.jsx("text",{x:13,y:55,children:"Car"}),b.jsx("circle",{cy:75,r:10,fill:"#ffbf00"}),b.jsx("text",{x:13,y:80,children:"Savings"}),b.jsx("circle",{cy:100,r:10,fill:"#9c88d2"}),b.jsx("text",{x:13,y:105,children:"Other"})]})]})}const X2t=Object.freeze(Object.defineProperty({__proto__:null,default:ERe},Symbol.toStringTag,{value:"Module"})),hde=Object.assign({"../public/demo-brush-interactions/assets/Bar.tsx":U0t,"../public/demo-brush-interactions/assets/BrushPlot.tsx":n2t,"../public/demo-brush-interactions/assets/Paintbrush.tsx":e2t,"../public/demo-brush-interactions/assets/Scatter.tsx":t2t,"../public/demo-brush-interactions/assets/XAxisBar.tsx":j0t,"../public/demo-brush-interactions/assets/YAxis.tsx":ZTt,"../public/demo-brush-interactions/assets/YAxisBar.tsx":B0t,"../public/demo-brush-interactions/assets/types.ts":r2t,"../public/demo-cleveland/assets/BarChart.tsx":c2t,"../public/demo-cleveland/assets/BubbleChart.tsx":y2t,"../public/demo-cleveland/assets/PieChart.tsx":x2t,"../public/demo-cleveland/assets/StackedBarChart.tsx":I2t,"../public/demo-cleveland/assets/chartcomponents/Bars.tsx":s2t,"../public/demo-cleveland/assets/chartcomponents/Bubbles.tsx":f2t,"../public/demo-cleveland/assets/chartcomponents/DotMarks.tsx":d2t,"../public/demo-cleveland/assets/chartcomponents/NumericAxisH.tsx":S2t,"../public/demo-cleveland/assets/chartcomponents/NumericAxisV.tsx":o2t,"../public/demo-cleveland/assets/chartcomponents/OrdinalAxisHWithDotMarks.tsx":a2t,"../public/demo-cleveland/assets/chartcomponents/Slices.tsx":v2t,"../public/demo-cleveland/assets/chartcomponents/SlicesDotMarks.tsx":b2t,"../public/demo-cleveland/assets/chartcomponents/StackedBars.tsx":T2t,"../public/demo-cleveland/assets/hooks/useChartDimensions.tsx":i2t,"../public/demo-click-accuracy-test/assets/ClickAccuracyTest.tsx":N2t,"../public/demo-fairness-jnd/assets/FairnessJND.tsx":D2t,"../public/demo-mqp-study/assets/Bar.tsx":$2t,"../public/demo-mqp-study/assets/ChartParam.ts":M2t,"../public/demo-mqp-study/assets/Color.tsx":L2t,"../public/demo-mqp-study/assets/DataExplorer.tsx":z2t,"../public/demo-mqp-study/assets/LineChart.tsx":B2t,"../public/demo-mqp-study/assets/RangeSelector.tsx":U2t,"../public/demo-mqp-study/assets/StackedBarChart.tsx":K2t,"../public/demo-mqp-study/assets/XAxis.tsx":F2t,"../public/demo-mqp-study/assets/YAxis.tsx":j2t,"../public/demo-mqp-study/assets/chartcomponents/SideBarPie.tsx":X2t,"../public/demo-mqp-study/assets/chartcomponents/StackedBars.tsx":H2t,"../public/demo-mqp-study/assets/hooks/useChartDimensions.tsx":V2t});function Q2t({currentConfig:e}){const t=Zm(),n=Ly(),r=`../public/${e.path}`,i=r in hde?hde[r].default:null,s=Qh(),{updateResponseBlockValidation:o,setIframeAnswers:a}=Xh();function u({status:l,provenanceGraph:c,answers:f}){s(o({location:"sidebar",identifier:`${n}_${t}`,status:l,values:f,provenanceGraph:c})),s(a(f))}return b.jsx(I.Suspense,{fallback:b.jsx("div",{children:"Loading..."}),children:i?b.jsx(i,{parameters:e.parameters,setAnswer:u}):b.jsx(q1,{path:e.path})})}function J2t({currentConfig:e}){const[t,n]=I.useState(""),[r,i]=I.useState(!0);return I.useEffect(()=>{async function s(){const o=await fK(e.path);o!==void 0&&n(o),i(!1)}s()},[e.path]),r||t?b.jsx(Ja,{text:t}):b.jsx(q1,{path:e.path})}const Z2t={},eCt=Object.freeze(Object.defineProperty({__proto__:null,default:Z2t},Symbol.toStringTag,{value:"Module"})),tCt=o8e(eCt);var nCt=tCt;function rCt(e,t){var n,r="",i=0,s=!0,o=0,a;function u(){return a=e.charAt(o),o++,a}for(u(),a==="-"&&(r="-",u());a>="0"&&a<="9";)s&&(a=="0"?i++:s=!1),r+=a,u();if(s&&i--,a===".")for(r+=".";u()&&a>="0"&&a<="9";)r+=a;if(a==="e"||a==="E")for(r+=a,u(),(a==="-"||a==="+")&&(r+=a,u());a>="0"&&a<="9";)r+=a,u();for(;a&&a<=" ";)u();if(t&&(a===","||a==="}"||a==="]"||a==="#"||a==="/"&&(e[o]==="/"||e[o]==="*"))&&(a=0),n=+r,!(a||i||!isFinite(n)))return n}function iCt(e,t){return Object.defineProperty&&Object.defineProperty(e,"__COMMENTS__",{enumerable:!1,writable:!0}),e.__COMMENTS__=t||{}}function sCt(e){Object.defineProperty(e,"__COMMENTS__",{value:void 0})}function oCt(e){return e.__COMMENTS__}function aCt(e){if(!e)return"";var t=e.split(`
`),n,r,i,s;for(i=0;i<t.length;i++)for(n=t[i],s=n.length,r=0;r<s;r++){var o=n[r];if(o==="#")break;if(o==="/"&&(n[r+1]==="/"||n[r+1]==="*")){n[r+1]==="*"&&(i=t.length);break}else if(o>" "){t[i]="# "+n;break}}return t.join(`
`)}var y4={EOL:nCt.EOL||`
`,tryParseNumber:rCt,createComment:iCt,removeComment:sCt,getComment:oCt,forceComment:aCt},uCt="3.2.1";function lCt(e,t){if(Object.prototype.toString.apply(e)!=="[object Array]"){if(e)throw new Error("dsf option must contain an array!");return pde}else if(e.length===0)return pde;var n=[];function r(i){return{}.toString.call(i)==="[object Function]"}return e.forEach(function(i){if(!i.name||!r(i.parse)||!r(i.stringify))throw new Error("extension does not match the DSF interface");n.push(function(){try{if(t=="parse")return i.parse.apply(null,arguments);if(t=="stringify"){var s=i.stringify.apply(null,arguments);if(s!==void 0&&(typeof s!="string"||s.length===0||s[0]==='"'||[].some.call(s,function(o){return fCt(o)})))throw new Error("value may not be empty, start with a quote or contain a punctuator character except colon: "+s);return s}else throw new Error("Invalid type")}catch(o){throw new Error("DSF-"+i.name+" failed; "+o.message)}})}),cCt.bind(null,n)}function cCt(e,t){if(e)for(var n=0;n<e.length;n++){var r=e[n](t);if(r!==void 0)return r}}function pde(){}function fCt(e){return e==="{"||e==="}"||e==="["||e==="]"||e===","}function xRe(){return{name:"math",parse:function(e){switch(e){case"+inf":case"inf":case"+Inf":case"Inf":return 1/0;case"-inf":case"-Inf":return-1/0;case"nan":case"NaN":return NaN}},stringify:function(e){if(typeof e=="number"){if(1/e===-1/0)return"-0";if(e===1/0)return"Inf";if(e===-1/0)return"-Inf";if(isNaN(e))return"NaN"}}}}xRe.description="support for Inf/inf, -Inf/-inf, Nan/naN and -0";function SRe(e){var t=e&&e.out;return{name:"hex",parse:function(n){if(/^0x[0-9A-Fa-f]+$/.test(n))return parseInt(n,16)},stringify:function(n){if(t&&Number.isInteger(n))return"0x"+n.toString(16)}}}SRe.description="parse hexadecimal numbers prefixed with 0x";function TRe(){return{name:"date",parse:function(e){if(/^\d{4}-\d{2}-\d{2}$/.test(e)||/^\d{4}-\d{2}-\d{2}T\d{2}\:\d{2}\:\d{2}(?:.\d+)(?:Z|[+-]\d{2}:\d{2})$/.test(e)){var t=Date.parse(e);if(!isNaN(t))return new Date(t)}},stringify:function(e){if(Object.prototype.toString.call(e)==="[object Date]"){var t=e.toISOString();return t.indexOf("T00:00:00.000Z",t.length-14)!==-1?t.substr(0,10):t}}}}TRe.description="support ISO dates";var GQ={loadDsf:lCt,std:{math:xRe,hex:SRe,date:TRe}},dCt=function(e,t){var n=y4,r=GQ,i,s,o,a={'"':'"',"'":"'","\\":"\\","/":"/",b:"\b",f:"\f",n:`
`,r:"\r",t:"	"},u,l;function c(){s=0,o=" "}function f($){return $==="{"||$==="}"||$==="["||$==="]"||$===","||$===":"}function d($){var F,M=0,B=1;for(F=s-1;F>0&&i[F]!==`
`;F--,M++);for(;F>0;F--)i[F]===`
`&&B++;throw new Error($+" at line "+B+","+M+" >>>"+i.substr(s-M,20)+" ...")}function h(){return o=i.charAt(s),s++,o}function p($){return i.charAt(s+$)}function m($){for(var F="",M=o;h();){if(o===M)return h(),$&&M==="'"&&o==="'"&&F.length===0?(h(),g()):F;if(o==="\\")if(h(),o==="u"){for(var B=0,U=0;U<4;U++){h();var H=o.charCodeAt(0),P;o>="0"&&o<="9"?P=H-48:o>="a"&&o<="f"?P=H-97+10:o>="A"&&o<="F"?P=H-65+10:d("Bad \\u char "+o),B=B*16+P}F+=String.fromCharCode(B)}else if(typeof a[o]=="string")F+=a[o];else break;else o===`
`||o==="\r"?d("Bad string containing newline"):F+=o}d("Bad string")}function g(){for(var $="",F=0,M=0;;){var B=p(-M-5);if(!B||B===`
`)break;M++}function U(){for(var H=M;o&&o<=" "&&o!==`
`&&H-- >0;)h()}for(;o&&o<=" "&&o!==`
`;)h();for(o===`
`&&(h(),U());;){if(!o)d("Bad multiline string");else if(o==="'"){if(F++,h(),F===3)return $.slice(-1)===`
`&&($=$.slice(0,-1)),$;continue}else for(;F>0;)$+="'",F--;o===`
`?($+=`
`,h(),U()):(o!=="\r"&&($+=o),h())}}function y(){if(o==='"'||o==="'")return m(!1);for(var $="",F=s,M=-1;;){if(o===":")return $?M>=0&&M!==$.length&&(s=F+M,d("Found whitespace in your key name (use quotes to include)")):d("Found ':' but no key name (for an empty key name use quotes)"),$;o<=" "?o?M<0&&(M=$.length):d("Found EOF while looking for a key name (check your syntax)"):f(o)?d("Found '"+o+"' where a key name was expected (check your syntax or use quotes if the key name includes {}[],: or whitespace)"):$+=o,h()}}function v(){for(;o;){for(;o&&o<=" ";)h();if(o==="#"||o==="/"&&p(0)==="/")for(;o&&o!==`
`;)h();else if(o==="/"&&p(0)==="*"){for(h(),h();o&&!(o==="*"&&p(0)==="/");)h();o&&(h(),h())}else break}}function _(){var $=o;for(f(o)&&d("Found a punctuator character '"+o+"' when expecting a quoteless string (check your syntax)");;){h();var F=o==="\r"||o===`
`||o==="";if(F||o===","||o==="}"||o==="]"||o==="#"||o==="/"&&(p(0)==="/"||p(0)==="*")){var M=$[0];switch(M){case"f":if($.trim()==="false")return!1;break;case"n":if($.trim()==="null")return null;break;case"t":if($.trim()==="true")return!0;break;default:if(M==="-"||M>="0"&&M<="9"){var B=n.tryParseNumber($);if(B!==void 0)return B}}if(F){$=$.trim();var U=l($);return U!==void 0?U:$}}$+=o}}function w($,F){var M;for($--,M=s-2;M>$&&i[M]<=" "&&i[M]!==`
`;M--);i[M]===`
`&&M--,i[M]==="\r"&&M--;var B=i.substr($,M-$+1);for(M=0;M<B.length;M++)if(B[M]>" "){var U=B.indexOf(`
`);if(U>=0){var H=[B.substr(0,U),B.substr(U+1)];return F&&H[0].trim().length===0&&H.shift(),H}else return[B]}return[]}function E($){function F(B,U){var H,P,z,W;switch(typeof B){case"string":B.indexOf(U)>=0&&(W=B);break;case"object":if(Object.prototype.toString.apply(B)==="[object Array]")for(H=0,z=B.length;H<z;H++)W=F(B[H],U)||W;else for(P in B)Object.prototype.hasOwnProperty.call(B,P)&&(W=F(B[P],U)||W)}return W}function M(B){var U=F($,B);return U?"found '"+B+`' in a string value, your mistake could be with:
  > `+U+`
  (unquoted strings contain everything up to the next line!)`:""}return M("}")||M("]")}function S(){var $=[],F,M,B;try{if(u&&(F=n.createComment($,{a:[]})),h(),M=s,v(),F&&(B=w(M,!0).join(`
`)),o==="]")return h(),F&&(F.e=[B]),$;for(;o;){if($.push(C()),M=s,v(),o===","&&(h(),M=s,v()),F){var U=w(M);F.a.push([B||"",U[0]||""]),B=U[1]}if(o==="]")return h(),F&&(F.a[F.a.length-1][1]+=B||""),$;v()}d("End of input while parsing an array (missing ']')")}catch(H){throw H.hint=H.hint||E($),H}}function T($){var F="",M={},B,U,H;try{if(u&&(B=n.createComment(M,{c:{},o:[]})),$?U=1:(h(),U=s),v(),B&&(H=w(U,!0).join(`
`)),o==="}"&&!$)return B&&(B.e=[H]),h(),M;for(;o;){if(F=y(),v(),o!==":"&&d("Expected ':' instead of '"+o+"'"),h(),M[F]=C(),U=s,v(),o===","&&(h(),U=s,v()),B){var P=w(U);B.c[F]=[H||"",P[0]||""],H=P[1],B.o.push(F)}if(o==="}"&&!$)return h(),B&&(B.c[F][1]+=H||""),M;v()}if($)return M;d("End of input while parsing an object (missing '}')")}catch(z){throw z.hint=z.hint||E(M),z}}function C(){switch(v(),o){case"{":return T();case"[":return S();case"'":case'"':return m(!0);default:return _()}}function A($,F){var M=s;if(v(),o&&d("Syntax error, found trailing characters"),u){var B=F.join(`
`),U=w(M).join(`
`);if(U||B){var H=n.createComment($,n.getComment($));H.r=[B,U]}}return $}function k(){v();var $=u?w(1):null;switch(o){case"{":return A(T(),$);case"[":return A(S(),$);default:return A(C(),$)}}function N(){v();var $=u?w(1):null;switch(o){case"{":return A(T(),$);case"[":return A(S(),$)}try{return A(T(!0),$)}catch(F){c();try{return A(C(),$)}catch{throw F}}}if(typeof e!="string")throw new Error("source is not a string");var O=null,D=!0;return t&&typeof t=="object"&&(u=t.keepWsc,O=t.dsf,D=t.legacyRoot!==!1),l=r.loadDsf(O,"parse"),i=e,c(),D?N():k()},hCt=function(e,t){var n=y4,r=GQ,i={obj:["{","}"],arr:["[","]"],key:["",""],qkey:['"','"'],col:[":",""],com:[",",""],str:["",""],qstr:['"','"'],mstr:["'''","'''"],num:["",""],lit:["",""],dsf:["",""],esc:["\\",""],uni:["\\u",""],rem:["",""]},s=n.EOL,o="  ",a=!1,u=!1,l=!1,c=!1,f=0,d=1,h="",p=null,m=!1,g=i;if(t&&typeof t=="object"){t.quotes=t.quotes==="always"?"strings":t.quotes,(t.eol===`
`||t.eol===`\r
`)&&(s=t.eol),a=t.keepWsc,f=t.condense||0,u=t.bracesSameLine,l=t.quotes==="all"||t.quotes==="keys",c=t.quotes==="all"||t.quotes==="strings"||t.separator===!0,c||t.multiline=="off"?d=0:d=t.multiline=="no-tabs"?2:1,h=t.separator===!0?g.com[0]:"",p=t.dsf,m=t.sortProps,typeof t.space=="number"?o=new Array(t.space+1).join(" "):typeof t.space=="string"&&(o=t.space),t.colors===!0&&(g={obj:["\x1B[37m{\x1B[0m","\x1B[37m}\x1B[0m"],arr:["\x1B[37m[\x1B[0m","\x1B[37m]\x1B[0m"],key:["\x1B[33m","\x1B[0m"],qkey:['\x1B[33m"','"\x1B[0m'],col:["\x1B[37m:\x1B[0m",""],com:["\x1B[37m,\x1B[0m",""],str:["\x1B[37;1m","\x1B[0m"],qstr:['\x1B[37;1m"','"\x1B[0m'],mstr:["\x1B[37;1m'''","'''\x1B[0m"],num:["\x1B[36;1m","\x1B[0m"],lit:["\x1B[36m","\x1B[0m"],dsf:["\x1B[37m","\x1B[0m"],esc:["\x1B[31m\\","\x1B[0m"],uni:["\x1B[31m\\u","\x1B[0m"],rem:["\x1B[35m","\x1B[0m"]});var y,v=Object.keys(i);for(y=v.length-1;y>=0;y--){var _=v[y];g[_].push(i[_][0].length,i[_][1].length)}}var w,E="-­؀-؄܏឴឵‌-‏\u2028- ⁠-⁯\uFEFF￰-￿",S=new RegExp('[\\\\\\"\0-'+E+"]","g"),T=new RegExp(`^\\s|^"|^'|^#|^\\/\\*|^\\/\\/|^\\{|^\\}|^\\[|^\\]|^:|^,|\\s$|[\0-`+E+"]","g"),C=new RegExp("'''|^[\\s]+$|[\0-"+(d===2?"	":"\b")+"\v\f-"+E+"]","g"),A=new RegExp("^(true|false|null)\\s*((,|\\]|\\}|#|//|/\\*).*)?$"),k={"\b":"b","	":"t","\n":"n","\f":"f","\r":"r",'"':'"',"\\":"\\"},N=/[,\{\[\}\]\s:#"']|\/\/|\/\*/,O="",D=0;function $(W,j){return D+=W[0].length+W[1].length-W[2]-W[3],W[0]+j+W[1]}function F(W){return W.replace(S,function(j){var q=k[j];return typeof q=="string"?$(g.esc,q):$(g.uni,("0000"+j.charCodeAt(0).toString(16)).slice(-4))})}function M(W,j,q,G){return W?(T.lastIndex=0,A.lastIndex=0,c||q||T.test(W)||n.tryParseNumber(W,!0)!==void 0||A.test(W)?(S.lastIndex=0,C.lastIndex=0,S.test(W)?!C.test(W)&&!G&&d?B(W,j):$(g.qstr,F(W)):$(g.qstr,W)):$(g.str,W)):$(g.qstr,"")}function B(W,j){var q,G=W.replace(/\r/g,"").split(`
`);if(j+=o,G.length===1)return $(g.mstr,G[0]);var ne=s+j+g.mstr[0];for(q=0;q<G.length;q++)ne+=s,G[q]&&(ne+=j+G[q]);return ne+s+j+g.mstr[1]}function U(W){return W?l||N.test(W)?(S.lastIndex=0,$(g.qkey,S.test(W)?F(W):W)):$(g.key,W):'""'}function H(W,j,q,G){function ne(gn){return gn&&gn[gn[0]==="\r"?1:0]===`
`}function ce(gn){return gn&&!ne(gn)}function de(gn,An,nr){if(!gn)return"";gn=n.forceComment(gn);var rr,zo=gn.length;for(rr=0;rr<zo&&gn[rr]<=" ";rr++);return nr&&rr>0&&(gn=gn.substr(rr)),rr<zo?An+$(g.rem,gn):gn}var he=w(W);if(he!==void 0)return $(g.dsf,he);switch(typeof W){case"string":return M(W,O,j,G);case"number":return isFinite(W)?$(g.num,String(W)):$(g.lit,"null");case"boolean":return $(g.lit,String(W));case"object":if(!W)return $(g.lit,"null");var ve;a&&(ve=n.getComment(W));var Ie=Object.prototype.toString.apply(W)==="[object Array]",be=O;O+=o;var Ke=s+be,Ue=s+O,yt=q||u?"":Ke,it=[],_e,ke=f?[]:null,ze=c,ct=d,Ot=h?"":g.com[0],We=0,ge,ht,vt,me,Ae,He,ut,_t,Ln;if(Ie){for(ge=0,ht=W.length;ge<ht;ge++){if(_e=ge<ht-1,ve?(He=ve.a[ge]||[],ut=ce(He[1]),it.push(de(He[0],`
`)+Ue),ke&&(He[0]||He[1]||ut)&&(ke=null)):it.push(Ue),D=0,me=W[ge],it.push(H(me,ve?ut:!1,!0)+(_e?h:"")),ke){switch(typeof me){case"string":D=0,c=!0,d=0,ke.push(H(me,!1,!0)+(_e?g.com[0]:"")),c=ze,d=ct;break;case"object":if(me){ke=null;break}default:ke.push(it[it.length-1]+(_e?Ot:""));break}_e&&(D+=g.com[0].length-g.com[2]),We+=D}ve&&He[1]&&it.push(de(He[1],ut?" ":`
`,ut))}ht===0?ve&&ve.e&&it.push(de(ve.e[0],`
`)+Ke):it.push(Ke),it.length===0?_t=$(g.arr,""):(_t=yt+$(g.arr,it.join("")),ke&&(Ln=ke.join(" "),Ln.length-We<=f&&(_t=$(g.arr,Ln))))}else{var Cr=ve?ve.o.slice():[],Fn=[];for(vt in W)Object.prototype.hasOwnProperty.call(W,vt)&&Cr.indexOf(vt)<0&&Fn.push(vt);m&&Fn.sort();var cr=Cr.concat(Fn);for(ge=0,ht=cr.length;ge<ht;ge++)if(_e=ge<ht-1,vt=cr[ge],ve?(He=ve.c[vt]||[],ut=ce(He[1]),it.push(de(He[0],`
`)+Ue),ke&&(He[0]||He[1]||ut)&&(ke=null)):it.push(Ue),D=0,me=W[vt],Ae=H(me,ve&&ut),it.push(U(vt)+g.col[0]+(ne(Ae)?"":" ")+Ae+(_e?h:"")),ve&&He[1]&&it.push(de(He[1],ut?" ":`
`,ut)),ke){switch(typeof me){case"string":D=0,c=!0,d=0,Ae=H(me,!1),c=ze,d=ct,ke.push(U(vt)+g.col[0]+" "+Ae+(_e?g.com[0]:""));break;case"object":if(me){ke=null;break}default:ke.push(it[it.length-1]+(_e?Ot:""));break}D+=g.col[0].length-g.col[2],_e&&(D+=g.com[0].length-g.com[2]),We+=D}ht===0?ve&&ve.e&&it.push(de(ve.e[0],`
`)+Ke):it.push(Ke),it.length===0?_t=$(g.obj,""):(_t=yt+$(g.obj,it.join("")),ke&&(Ln=ke.join(" "),Ln.length-We<=f&&(_t=$(g.obj,Ln))))}return O=be,_t}}w=r.loadDsf(p,"stringify");var P="",z=a?z=(n.getComment(e)||{}).r:null;return z&&z[0]&&(P=z[0]+`
`),P+=H(e,null,!0,!0),z&&(P+=z[1]||""),P},fE=y4;function $C(e,t,n){var r;return e&&(r={b:e}),t&&((r=r||{}).a=t),n&&((r=r||{}).x=n),r}function bV(e,t){if(!(e===null||typeof e!="object")){var n=fE.getComment(e);n&&fE.removeComment(e);var r,i,s,o;if(Object.prototype.toString.apply(e)==="[object Array]"){for(o={a:{}},r=0,i=e.length;r<i;r++)mde(o.a,r,n.a[r],bV(e[r]))&&(s=!0);!s&&n.e&&(o.e=$C(n.e[0],n.e[1]),s=!0)}else{o={s:{}};var a,u=Object.keys(e);for(n&&n.o?(a=[],n.o.concat(u).forEach(function(c){Object.prototype.hasOwnProperty.call(e,c)&&a.indexOf(c)<0&&a.push(c)})):a=u,o.o=a,r=0,i=a.length;r<i;r++){var l=a[r];mde(o.s,l,n.c[l],bV(e[l]))&&(s=!0)}!s&&n.e&&(o.e=$C(n.e[0],n.e[1]),s=!0)}return t&&n&&n.r&&(o.r=$C(n.r[0],n.r[1])),s?o:void 0}}function pCt(){var e="";return[].forEach.call(arguments,function(t){t&&t.trim()!==""&&(e&&(e+="; "),e+=t.trim())}),e}function mCt(e,t){var n=[];if(_V(e,t,n,[]),n.length>0){var r=j$(t,null,1);r+=`
# Orphaned comments:
`,n.forEach(function(i){r+=("# "+i.path.join("/")+": "+pCt(i.b,i.a,i.e)).replace(`
`,"\\n ")+`
`}),j$(t,r,1)}}function mde(e,t,n,r){var i=$C(n?n[0]:void 0,n?n[1]:void 0,r);return i&&(e[t]=i),i}function MC(e,t){var n=$C(t.b,t.a);return n.path=e,n}function LC(e,t,n){if(e){var r,i;if(e.a)for(r=0,i=e.a.length;r<i;r++){var s=n.slice().concat([r]),o=e.a[r];o&&(t.push(MC(s,o)),LC(o.x,t,s))}else e.o&&e.o.forEach(function(a){var u=n.slice().concat([a]),l=e.s[a];l&&(t.push(MC(u,l)),LC(l.x,t,u))});e.e&&t.push(MC(n,e.e))}}function _V(e,t,n,r){if(e){if(t===null||typeof t!="object"){LC(e,n,r);return}var i,s=fE.createComment(t);if(r.length===0&&e.r&&(s.r=[e.r.b,e.r.a]),Object.prototype.toString.apply(t)==="[object Array]"){s.a=[];var o=e.a||{};for(var a in o)if(o.hasOwnProperty(a)){i=parseInt(a);var u=e.a[a];if(u){var l=r.slice().concat([i]);i<t.length?(s.a[i]=[u.b,u.a],_V(u.x,t[i],n,l)):(n.push(MC(l,u)),LC(u.x,n,l))}}i===0&&e.e&&(s.e=[e.e.b,e.e.a])}else s.c={},s.o=[],(e.o||[]).forEach(function(c){var f=r.slice().concat([c]),d=e.s[c];Object.prototype.hasOwnProperty.call(t,c)?(s.o.push(c),d&&(s.c[c]=[d.b,d.a],_V(d.x,t[c],n,f))):d&&(n.push(MC(f,d)),LC(d.x,n,f))}),e.e&&(s.e=[e.e.b,e.e.a])}}function j$(e,t,n){var r=fE.createComment(e,fE.getComment(e));return r.r||(r.r=["",""]),(t||t==="")&&(r.r[n]=fE.forceComment(t)),r.r[n]||""}var gCt={extract:function(e){return bV(e,!0)},merge:mCt,header:function(e,t){return j$(e,t,0)},footer:function(e,t){return j$(e,t,1)}};/*!
 * Hjson v3.2.1
 * https://hjson.github.io
 *
 * Copyright 2014-2017 Christian Zangl, MIT license
 * Details and documentation:
 * https://github.com/hjson/hjson-js
 *
 * This code is based on the the JSON version by Douglas Crockford:
 * https://github.com/douglascrockford/JSON-js (json_parse.js, json2.js)
 */var gde=y4,yCt=uCt,yde=dCt,vde=hCt,vCt=gCt,bCt=GQ,YQ={parse:yde,stringify:vde,endOfLine:function(){return gde.EOL},setEndOfLine:function(e){(e===`
`||e===`\r
`)&&(gde.EOL=e)},version:yCt,rt:{parse:function(e,t){return(t=t||{}).keepWsc=!0,yde(e,t)},stringify:function(e,t){return(t=t||{}).keepWsc=!0,vde(e,t)}},comments:vCt,dsf:bCt.std},wV={exports:{}},CRe={},zf={},hx={},Gk={},Dn={},mI={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.regexpCode=e.getEsmExportName=e.getProperty=e.safeStringify=e.stringify=e.strConcat=e.addCodeArg=e.str=e._=e.nil=e._Code=e.Name=e.IDENTIFIER=e._CodeOrName=void 0;class t{}e._CodeOrName=t,e.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;class n extends t{constructor(v){if(super(),!e.IDENTIFIER.test(v))throw new Error("CodeGen: name must be a valid identifier");this.str=v}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}}e.Name=n;class r extends t{constructor(v){super(),this._items=typeof v=="string"?[v]:v}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;const v=this._items[0];return v===""||v==='""'}get str(){var v;return(v=this._str)!==null&&v!==void 0?v:this._str=this._items.reduce((_,w)=>`${_}${w}`,"")}get names(){var v;return(v=this._names)!==null&&v!==void 0?v:this._names=this._items.reduce((_,w)=>(w instanceof n&&(_[w.str]=(_[w.str]||0)+1),_),{})}}e._Code=r,e.nil=new r("");function i(y,...v){const _=[y[0]];let w=0;for(;w<v.length;)a(_,v[w]),_.push(y[++w]);return new r(_)}e._=i;const s=new r("+");function o(y,...v){const _=[h(y[0])];let w=0;for(;w<v.length;)_.push(s),a(_,v[w]),_.push(s,h(y[++w]));return u(_),new r(_)}e.str=o;function a(y,v){v instanceof r?y.push(...v._items):v instanceof n?y.push(v):y.push(f(v))}e.addCodeArg=a;function u(y){let v=1;for(;v<y.length-1;){if(y[v]===s){const _=l(y[v-1],y[v+1]);if(_!==void 0){y.splice(v-1,3,_);continue}y[v++]="+"}v++}}function l(y,v){if(v==='""')return y;if(y==='""')return v;if(typeof y=="string")return v instanceof n||y[y.length-1]!=='"'?void 0:typeof v!="string"?`${y.slice(0,-1)}${v}"`:v[0]==='"'?y.slice(0,-1)+v.slice(1):void 0;if(typeof v=="string"&&v[0]==='"'&&!(y instanceof n))return`"${y}${v.slice(1)}`}function c(y,v){return v.emptyStr()?y:y.emptyStr()?v:o`${y}${v}`}e.strConcat=c;function f(y){return typeof y=="number"||typeof y=="boolean"||y===null?y:h(Array.isArray(y)?y.join(","):y)}function d(y){return new r(h(y))}e.stringify=d;function h(y){return JSON.stringify(y).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}e.safeStringify=h;function p(y){return typeof y=="string"&&e.IDENTIFIER.test(y)?new r(`.${y}`):i`[${y}]`}e.getProperty=p;function m(y){if(typeof y=="string"&&e.IDENTIFIER.test(y))return new r(`${y}`);throw new Error(`CodeGen: invalid export name: ${y}, use explicit $id name mapping`)}e.getEsmExportName=m;function g(y){return new r(y.toString())}e.regexpCode=g})(mI);var EV={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ValueScope=e.ValueScopeName=e.Scope=e.varKinds=e.UsedValueState=void 0;const t=mI;class n extends Error{constructor(l){super(`CodeGen: "code" for ${l} not defined`),this.value=l.value}}var r;(function(u){u[u.Started=0]="Started",u[u.Completed=1]="Completed"})(r||(e.UsedValueState=r={})),e.varKinds={const:new t.Name("const"),let:new t.Name("let"),var:new t.Name("var")};class i{constructor({prefixes:l,parent:c}={}){this._names={},this._prefixes=l,this._parent=c}toName(l){return l instanceof t.Name?l:this.name(l)}name(l){return new t.Name(this._newName(l))}_newName(l){const c=this._names[l]||this._nameGroup(l);return`${l}${c.index++}`}_nameGroup(l){var c,f;if(!((f=(c=this._parent)===null||c===void 0?void 0:c._prefixes)===null||f===void 0)&&f.has(l)||this._prefixes&&!this._prefixes.has(l))throw new Error(`CodeGen: prefix "${l}" is not allowed in this scope`);return this._names[l]={prefix:l,index:0}}}e.Scope=i;class s extends t.Name{constructor(l,c){super(c),this.prefix=l}setValue(l,{property:c,itemIndex:f}){this.value=l,this.scopePath=(0,t._)`.${new t.Name(c)}[${f}]`}}e.ValueScopeName=s;const o=(0,t._)`\n`;class a extends i{constructor(l){super(l),this._values={},this._scope=l.scope,this.opts={...l,_n:l.lines?o:t.nil}}get(){return this._scope}name(l){return new s(l,this._newName(l))}value(l,c){var f;if(c.ref===void 0)throw new Error("CodeGen: ref must be passed in value");const d=this.toName(l),{prefix:h}=d,p=(f=c.key)!==null&&f!==void 0?f:c.ref;let m=this._values[h];if(m){const v=m.get(p);if(v)return v}else m=this._values[h]=new Map;m.set(p,d);const g=this._scope[h]||(this._scope[h]=[]),y=g.length;return g[y]=c.ref,d.setValue(c,{property:h,itemIndex:y}),d}getValue(l,c){const f=this._values[l];if(f)return f.get(c)}scopeRefs(l,c=this._values){return this._reduceValues(c,f=>{if(f.scopePath===void 0)throw new Error(`CodeGen: name "${f}" has no value`);return(0,t._)`${l}${f.scopePath}`})}scopeCode(l=this._values,c,f){return this._reduceValues(l,d=>{if(d.value===void 0)throw new Error(`CodeGen: name "${d}" has no value`);return d.value.code},c,f)}_reduceValues(l,c,f={},d){let h=t.nil;for(const p in l){const m=l[p];if(!m)continue;const g=f[p]=f[p]||new Map;m.forEach(y=>{if(g.has(y))return;g.set(y,r.Started);let v=c(y);if(v){const _=this.opts.es5?e.varKinds.var:e.varKinds.const;h=(0,t._)`${h}${_} ${y} = ${v};${this.opts._n}`}else if(v=d==null?void 0:d(y))h=(0,t._)`${h}${v}${this.opts._n}`;else throw new n(y);g.set(y,r.Completed)})}return h}}e.ValueScope=a})(EV);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.or=e.and=e.not=e.CodeGen=e.operators=e.varKinds=e.ValueScopeName=e.ValueScope=e.Scope=e.Name=e.regexpCode=e.stringify=e.getProperty=e.nil=e.strConcat=e.str=e._=void 0;const t=mI,n=EV;var r=mI;Object.defineProperty(e,"_",{enumerable:!0,get:function(){return r._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return r.str}}),Object.defineProperty(e,"strConcat",{enumerable:!0,get:function(){return r.strConcat}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return r.nil}}),Object.defineProperty(e,"getProperty",{enumerable:!0,get:function(){return r.getProperty}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return r.stringify}}),Object.defineProperty(e,"regexpCode",{enumerable:!0,get:function(){return r.regexpCode}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return r.Name}});var i=EV;Object.defineProperty(e,"Scope",{enumerable:!0,get:function(){return i.Scope}}),Object.defineProperty(e,"ValueScope",{enumerable:!0,get:function(){return i.ValueScope}}),Object.defineProperty(e,"ValueScopeName",{enumerable:!0,get:function(){return i.ValueScopeName}}),Object.defineProperty(e,"varKinds",{enumerable:!0,get:function(){return i.varKinds}}),e.operators={GT:new t._Code(">"),GTE:new t._Code(">="),LT:new t._Code("<"),LTE:new t._Code("<="),EQ:new t._Code("==="),NEQ:new t._Code("!=="),NOT:new t._Code("!"),OR:new t._Code("||"),AND:new t._Code("&&"),ADD:new t._Code("+")};class s{optimizeNodes(){return this}optimizeNames(q,G){return this}}class o extends s{constructor(q,G,ne){super(),this.varKind=q,this.name=G,this.rhs=ne}render({es5:q,_n:G}){const ne=q?n.varKinds.var:this.varKind,ce=this.rhs===void 0?"":` = ${this.rhs}`;return`${ne} ${this.name}${ce};`+G}optimizeNames(q,G){if(q[this.name.str])return this.rhs&&(this.rhs=$(this.rhs,q,G)),this}get names(){return this.rhs instanceof t._CodeOrName?this.rhs.names:{}}}class a extends s{constructor(q,G,ne){super(),this.lhs=q,this.rhs=G,this.sideEffects=ne}render({_n:q}){return`${this.lhs} = ${this.rhs};`+q}optimizeNames(q,G){if(!(this.lhs instanceof t.Name&&!q[this.lhs.str]&&!this.sideEffects))return this.rhs=$(this.rhs,q,G),this}get names(){const q=this.lhs instanceof t.Name?{}:{...this.lhs.names};return D(q,this.rhs)}}class u extends a{constructor(q,G,ne,ce){super(q,ne,ce),this.op=G}render({_n:q}){return`${this.lhs} ${this.op}= ${this.rhs};`+q}}class l extends s{constructor(q){super(),this.label=q,this.names={}}render({_n:q}){return`${this.label}:`+q}}class c extends s{constructor(q){super(),this.label=q,this.names={}}render({_n:q}){return`break${this.label?` ${this.label}`:""};`+q}}class f extends s{constructor(q){super(),this.error=q}render({_n:q}){return`throw ${this.error};`+q}get names(){return this.error.names}}class d extends s{constructor(q){super(),this.code=q}render({_n:q}){return`${this.code};`+q}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(q,G){return this.code=$(this.code,q,G),this}get names(){return this.code instanceof t._CodeOrName?this.code.names:{}}}class h extends s{constructor(q=[]){super(),this.nodes=q}render(q){return this.nodes.reduce((G,ne)=>G+ne.render(q),"")}optimizeNodes(){const{nodes:q}=this;let G=q.length;for(;G--;){const ne=q[G].optimizeNodes();Array.isArray(ne)?q.splice(G,1,...ne):ne?q[G]=ne:q.splice(G,1)}return q.length>0?this:void 0}optimizeNames(q,G){const{nodes:ne}=this;let ce=ne.length;for(;ce--;){const de=ne[ce];de.optimizeNames(q,G)||(F(q,de.names),ne.splice(ce,1))}return ne.length>0?this:void 0}get names(){return this.nodes.reduce((q,G)=>O(q,G.names),{})}}class p extends h{render(q){return"{"+q._n+super.render(q)+"}"+q._n}}class m extends h{}class g extends p{}g.kind="else";class y extends p{constructor(q,G){super(G),this.condition=q}render(q){let G=`if(${this.condition})`+super.render(q);return this.else&&(G+="else "+this.else.render(q)),G}optimizeNodes(){super.optimizeNodes();const q=this.condition;if(q===!0)return this.nodes;let G=this.else;if(G){const ne=G.optimizeNodes();G=this.else=Array.isArray(ne)?new g(ne):ne}if(G)return q===!1?G instanceof y?G:G.nodes:this.nodes.length?this:new y(M(q),G instanceof y?[G]:G.nodes);if(!(q===!1||!this.nodes.length))return this}optimizeNames(q,G){var ne;if(this.else=(ne=this.else)===null||ne===void 0?void 0:ne.optimizeNames(q,G),!!(super.optimizeNames(q,G)||this.else))return this.condition=$(this.condition,q,G),this}get names(){const q=super.names;return D(q,this.condition),this.else&&O(q,this.else.names),q}}y.kind="if";class v extends p{}v.kind="for";class _ extends v{constructor(q){super(),this.iteration=q}render(q){return`for(${this.iteration})`+super.render(q)}optimizeNames(q,G){if(super.optimizeNames(q,G))return this.iteration=$(this.iteration,q,G),this}get names(){return O(super.names,this.iteration.names)}}class w extends v{constructor(q,G,ne,ce){super(),this.varKind=q,this.name=G,this.from=ne,this.to=ce}render(q){const G=q.es5?n.varKinds.var:this.varKind,{name:ne,from:ce,to:de}=this;return`for(${G} ${ne}=${ce}; ${ne}<${de}; ${ne}++)`+super.render(q)}get names(){const q=D(super.names,this.from);return D(q,this.to)}}class E extends v{constructor(q,G,ne,ce){super(),this.loop=q,this.varKind=G,this.name=ne,this.iterable=ce}render(q){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(q)}optimizeNames(q,G){if(super.optimizeNames(q,G))return this.iterable=$(this.iterable,q,G),this}get names(){return O(super.names,this.iterable.names)}}class S extends p{constructor(q,G,ne){super(),this.name=q,this.args=G,this.async=ne}render(q){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(q)}}S.kind="func";class T extends h{render(q){return"return "+super.render(q)}}T.kind="return";class C extends p{render(q){let G="try"+super.render(q);return this.catch&&(G+=this.catch.render(q)),this.finally&&(G+=this.finally.render(q)),G}optimizeNodes(){var q,G;return super.optimizeNodes(),(q=this.catch)===null||q===void 0||q.optimizeNodes(),(G=this.finally)===null||G===void 0||G.optimizeNodes(),this}optimizeNames(q,G){var ne,ce;return super.optimizeNames(q,G),(ne=this.catch)===null||ne===void 0||ne.optimizeNames(q,G),(ce=this.finally)===null||ce===void 0||ce.optimizeNames(q,G),this}get names(){const q=super.names;return this.catch&&O(q,this.catch.names),this.finally&&O(q,this.finally.names),q}}class A extends p{constructor(q){super(),this.error=q}render(q){return`catch(${this.error})`+super.render(q)}}A.kind="catch";class k extends p{render(q){return"finally"+super.render(q)}}k.kind="finally";class N{constructor(q,G={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...G,_n:G.lines?`
`:""},this._extScope=q,this._scope=new n.Scope({parent:q}),this._nodes=[new m]}toString(){return this._root.render(this.opts)}name(q){return this._scope.name(q)}scopeName(q){return this._extScope.name(q)}scopeValue(q,G){const ne=this._extScope.value(q,G);return(this._values[ne.prefix]||(this._values[ne.prefix]=new Set)).add(ne),ne}getScopeValue(q,G){return this._extScope.getValue(q,G)}scopeRefs(q){return this._extScope.scopeRefs(q,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(q,G,ne,ce){const de=this._scope.toName(G);return ne!==void 0&&ce&&(this._constants[de.str]=ne),this._leafNode(new o(q,de,ne)),de}const(q,G,ne){return this._def(n.varKinds.const,q,G,ne)}let(q,G,ne){return this._def(n.varKinds.let,q,G,ne)}var(q,G,ne){return this._def(n.varKinds.var,q,G,ne)}assign(q,G,ne){return this._leafNode(new a(q,G,ne))}add(q,G){return this._leafNode(new u(q,e.operators.ADD,G))}code(q){return typeof q=="function"?q():q!==t.nil&&this._leafNode(new d(q)),this}object(...q){const G=["{"];for(const[ne,ce]of q)G.length>1&&G.push(","),G.push(ne),(ne!==ce||this.opts.es5)&&(G.push(":"),(0,t.addCodeArg)(G,ce));return G.push("}"),new t._Code(G)}if(q,G,ne){if(this._blockNode(new y(q)),G&&ne)this.code(G).else().code(ne).endIf();else if(G)this.code(G).endIf();else if(ne)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(q){return this._elseNode(new y(q))}else(){return this._elseNode(new g)}endIf(){return this._endBlockNode(y,g)}_for(q,G){return this._blockNode(q),G&&this.code(G).endFor(),this}for(q,G){return this._for(new _(q),G)}forRange(q,G,ne,ce,de=this.opts.es5?n.varKinds.var:n.varKinds.let){const he=this._scope.toName(q);return this._for(new w(de,he,G,ne),()=>ce(he))}forOf(q,G,ne,ce=n.varKinds.const){const de=this._scope.toName(q);if(this.opts.es5){const he=G instanceof t.Name?G:this.var("_arr",G);return this.forRange("_i",0,(0,t._)`${he}.length`,ve=>{this.var(de,(0,t._)`${he}[${ve}]`),ne(de)})}return this._for(new E("of",ce,de,G),()=>ne(de))}forIn(q,G,ne,ce=this.opts.es5?n.varKinds.var:n.varKinds.const){if(this.opts.ownProperties)return this.forOf(q,(0,t._)`Object.keys(${G})`,ne);const de=this._scope.toName(q);return this._for(new E("in",ce,de,G),()=>ne(de))}endFor(){return this._endBlockNode(v)}label(q){return this._leafNode(new l(q))}break(q){return this._leafNode(new c(q))}return(q){const G=new T;if(this._blockNode(G),this.code(q),G.nodes.length!==1)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(T)}try(q,G,ne){if(!G&&!ne)throw new Error('CodeGen: "try" without "catch" and "finally"');const ce=new C;if(this._blockNode(ce),this.code(q),G){const de=this.name("e");this._currNode=ce.catch=new A(de),G(de)}return ne&&(this._currNode=ce.finally=new k,this.code(ne)),this._endBlockNode(A,k)}throw(q){return this._leafNode(new f(q))}block(q,G){return this._blockStarts.push(this._nodes.length),q&&this.code(q).endBlock(G),this}endBlock(q){const G=this._blockStarts.pop();if(G===void 0)throw new Error("CodeGen: not in self-balancing block");const ne=this._nodes.length-G;if(ne<0||q!==void 0&&ne!==q)throw new Error(`CodeGen: wrong number of nodes: ${ne} vs ${q} expected`);return this._nodes.length=G,this}func(q,G=t.nil,ne,ce){return this._blockNode(new S(q,G,ne)),ce&&this.code(ce).endFunc(),this}endFunc(){return this._endBlockNode(S)}optimize(q=1){for(;q-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(q){return this._currNode.nodes.push(q),this}_blockNode(q){this._currNode.nodes.push(q),this._nodes.push(q)}_endBlockNode(q,G){const ne=this._currNode;if(ne instanceof q||G&&ne instanceof G)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${G?`${q.kind}/${G.kind}`:q.kind}"`)}_elseNode(q){const G=this._currNode;if(!(G instanceof y))throw new Error('CodeGen: "else" without "if"');return this._currNode=G.else=q,this}get _root(){return this._nodes[0]}get _currNode(){const q=this._nodes;return q[q.length-1]}set _currNode(q){const G=this._nodes;G[G.length-1]=q}}e.CodeGen=N;function O(j,q){for(const G in q)j[G]=(j[G]||0)+(q[G]||0);return j}function D(j,q){return q instanceof t._CodeOrName?O(j,q.names):j}function $(j,q,G){if(j instanceof t.Name)return ne(j);if(!ce(j))return j;return new t._Code(j._items.reduce((de,he)=>(he instanceof t.Name&&(he=ne(he)),he instanceof t._Code?de.push(...he._items):de.push(he),de),[]));function ne(de){const he=G[de.str];return he===void 0||q[de.str]!==1?de:(delete q[de.str],he)}function ce(de){return de instanceof t._Code&&de._items.some(he=>he instanceof t.Name&&q[he.str]===1&&G[he.str]!==void 0)}}function F(j,q){for(const G in q)j[G]=(j[G]||0)-(q[G]||0)}function M(j){return typeof j=="boolean"||typeof j=="number"||j===null?!j:(0,t._)`!${W(j)}`}e.not=M;const B=z(e.operators.AND);function U(...j){return j.reduce(B)}e.and=U;const H=z(e.operators.OR);function P(...j){return j.reduce(H)}e.or=P;function z(j){return(q,G)=>q===t.nil?G:G===t.nil?q:(0,t._)`${W(q)} ${j} ${W(G)}`}function W(j){return j instanceof t.Name?j:(0,t._)`(${j})`}})(Dn);var wt={};Object.defineProperty(wt,"__esModule",{value:!0});wt.checkStrictMode=wt.getErrorPath=wt.Type=wt.useFunc=wt.setEvaluated=wt.evaluatedPropsToName=wt.mergeEvaluated=wt.eachItem=wt.unescapeJsonPointer=wt.escapeJsonPointer=wt.escapeFragment=wt.unescapeFragment=wt.schemaRefOrVal=wt.schemaHasRulesButRef=wt.schemaHasRules=wt.checkUnknownRules=wt.alwaysValidSchema=wt.toHash=void 0;const Yr=Dn,_Ct=mI;function wCt(e){const t={};for(const n of e)t[n]=!0;return t}wt.toHash=wCt;function ECt(e,t){return typeof t=="boolean"?t:Object.keys(t).length===0?!0:(ARe(e,t),!IRe(t,e.self.RULES.all))}wt.alwaysValidSchema=ECt;function ARe(e,t=e.schema){const{opts:n,self:r}=e;if(!n.strictSchema||typeof t=="boolean")return;const i=r.RULES.keywords;for(const s in t)i[s]||NRe(e,`unknown keyword: "${s}"`)}wt.checkUnknownRules=ARe;function IRe(e,t){if(typeof e=="boolean")return!e;for(const n in e)if(t[n])return!0;return!1}wt.schemaHasRules=IRe;function xCt(e,t){if(typeof e=="boolean")return!e;for(const n in e)if(n!=="$ref"&&t.all[n])return!0;return!1}wt.schemaHasRulesButRef=xCt;function SCt({topSchemaRef:e,schemaPath:t},n,r,i){if(!i){if(typeof n=="number"||typeof n=="boolean")return n;if(typeof n=="string")return(0,Yr._)`${n}`}return(0,Yr._)`${e}${t}${(0,Yr.getProperty)(r)}`}wt.schemaRefOrVal=SCt;function TCt(e){return kRe(decodeURIComponent(e))}wt.unescapeFragment=TCt;function CCt(e){return encodeURIComponent(KQ(e))}wt.escapeFragment=CCt;function KQ(e){return typeof e=="number"?`${e}`:e.replace(/~/g,"~0").replace(/\//g,"~1")}wt.escapeJsonPointer=KQ;function kRe(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}wt.unescapeJsonPointer=kRe;function ACt(e,t){if(Array.isArray(e))for(const n of e)t(n);else t(e)}wt.eachItem=ACt;function bde({mergeNames:e,mergeToName:t,mergeValues:n,resultToName:r}){return(i,s,o,a)=>{const u=o===void 0?s:o instanceof Yr.Name?(s instanceof Yr.Name?e(i,s,o):t(i,s,o),o):s instanceof Yr.Name?(t(i,o,s),s):n(s,o);return a===Yr.Name&&!(u instanceof Yr.Name)?r(i,u):u}}wt.mergeEvaluated={props:bde({mergeNames:(e,t,n)=>e.if((0,Yr._)`${n} !== true && ${t} !== undefined`,()=>{e.if((0,Yr._)`${t} === true`,()=>e.assign(n,!0),()=>e.assign(n,(0,Yr._)`${n} || {}`).code((0,Yr._)`Object.assign(${n}, ${t})`))}),mergeToName:(e,t,n)=>e.if((0,Yr._)`${n} !== true`,()=>{t===!0?e.assign(n,!0):(e.assign(n,(0,Yr._)`${n} || {}`),XQ(e,n,t))}),mergeValues:(e,t)=>e===!0?!0:{...e,...t},resultToName:RRe}),items:bde({mergeNames:(e,t,n)=>e.if((0,Yr._)`${n} !== true && ${t} !== undefined`,()=>e.assign(n,(0,Yr._)`${t} === true ? true : ${n} > ${t} ? ${n} : ${t}`)),mergeToName:(e,t,n)=>e.if((0,Yr._)`${n} !== true`,()=>e.assign(n,t===!0?!0:(0,Yr._)`${n} > ${t} ? ${n} : ${t}`)),mergeValues:(e,t)=>e===!0?!0:Math.max(e,t),resultToName:(e,t)=>e.var("items",t)})};function RRe(e,t){if(t===!0)return e.var("props",!0);const n=e.var("props",(0,Yr._)`{}`);return t!==void 0&&XQ(e,n,t),n}wt.evaluatedPropsToName=RRe;function XQ(e,t,n){Object.keys(n).forEach(r=>e.assign((0,Yr._)`${t}${(0,Yr.getProperty)(r)}`,!0))}wt.setEvaluated=XQ;const _de={};function ICt(e,t){return e.scopeValue("func",{ref:t,code:_de[t.code]||(_de[t.code]=new _Ct._Code(t.code))})}wt.useFunc=ICt;var xV;(function(e){e[e.Num=0]="Num",e[e.Str=1]="Str"})(xV||(wt.Type=xV={}));function kCt(e,t,n){if(e instanceof Yr.Name){const r=t===xV.Num;return n?r?(0,Yr._)`"[" + ${e} + "]"`:(0,Yr._)`"['" + ${e} + "']"`:r?(0,Yr._)`"/" + ${e}`:(0,Yr._)`"/" + ${e}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return n?(0,Yr.getProperty)(e).toString():"/"+KQ(e)}wt.getErrorPath=kCt;function NRe(e,t,n=e.opts.strictSchema){if(n){if(t=`strict mode: ${t}`,n===!0)throw new Error(t);e.self.logger.warn(t)}}wt.checkStrictMode=NRe;var np={};Object.defineProperty(np,"__esModule",{value:!0});const ta=Dn,RCt={data:new ta.Name("data"),valCxt:new ta.Name("valCxt"),instancePath:new ta.Name("instancePath"),parentData:new ta.Name("parentData"),parentDataProperty:new ta.Name("parentDataProperty"),rootData:new ta.Name("rootData"),dynamicAnchors:new ta.Name("dynamicAnchors"),vErrors:new ta.Name("vErrors"),errors:new ta.Name("errors"),this:new ta.Name("this"),self:new ta.Name("self"),scope:new ta.Name("scope"),json:new ta.Name("json"),jsonPos:new ta.Name("jsonPos"),jsonLen:new ta.Name("jsonLen"),jsonPart:new ta.Name("jsonPart")};np.default=RCt;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.extendErrors=e.resetErrorsCount=e.reportExtraError=e.reportError=e.keyword$DataError=e.keywordError=void 0;const t=Dn,n=wt,r=np;e.keywordError={message:({keyword:g})=>(0,t.str)`must pass "${g}" keyword validation`},e.keyword$DataError={message:({keyword:g,schemaType:y})=>y?(0,t.str)`"${g}" keyword must be ${y} ($data)`:(0,t.str)`"${g}" keyword is invalid ($data)`};function i(g,y=e.keywordError,v,_){const{it:w}=g,{gen:E,compositeRule:S,allErrors:T}=w,C=f(g,y,v);_??(S||T)?u(E,C):l(w,(0,t._)`[${C}]`)}e.reportError=i;function s(g,y=e.keywordError,v){const{it:_}=g,{gen:w,compositeRule:E,allErrors:S}=_,T=f(g,y,v);u(w,T),E||S||l(_,r.default.vErrors)}e.reportExtraError=s;function o(g,y){g.assign(r.default.errors,y),g.if((0,t._)`${r.default.vErrors} !== null`,()=>g.if(y,()=>g.assign((0,t._)`${r.default.vErrors}.length`,y),()=>g.assign(r.default.vErrors,null)))}e.resetErrorsCount=o;function a({gen:g,keyword:y,schemaValue:v,data:_,errsCount:w,it:E}){if(w===void 0)throw new Error("ajv implementation error");const S=g.name("err");g.forRange("i",w,r.default.errors,T=>{g.const(S,(0,t._)`${r.default.vErrors}[${T}]`),g.if((0,t._)`${S}.instancePath === undefined`,()=>g.assign((0,t._)`${S}.instancePath`,(0,t.strConcat)(r.default.instancePath,E.errorPath))),g.assign((0,t._)`${S}.schemaPath`,(0,t.str)`${E.errSchemaPath}/${y}`),E.opts.verbose&&(g.assign((0,t._)`${S}.schema`,v),g.assign((0,t._)`${S}.data`,_))})}e.extendErrors=a;function u(g,y){const v=g.const("err",y);g.if((0,t._)`${r.default.vErrors} === null`,()=>g.assign(r.default.vErrors,(0,t._)`[${v}]`),(0,t._)`${r.default.vErrors}.push(${v})`),g.code((0,t._)`${r.default.errors}++`)}function l(g,y){const{gen:v,validateName:_,schemaEnv:w}=g;w.$async?v.throw((0,t._)`new ${g.ValidationError}(${y})`):(v.assign((0,t._)`${_}.errors`,y),v.return(!1))}const c={keyword:new t.Name("keyword"),schemaPath:new t.Name("schemaPath"),params:new t.Name("params"),propertyName:new t.Name("propertyName"),message:new t.Name("message"),schema:new t.Name("schema"),parentSchema:new t.Name("parentSchema")};function f(g,y,v){const{createErrors:_}=g.it;return _===!1?(0,t._)`{}`:d(g,y,v)}function d(g,y,v={}){const{gen:_,it:w}=g,E=[h(w,v),p(g,v)];return m(g,y,E),_.object(...E)}function h({errorPath:g},{instancePath:y}){const v=y?(0,t.str)`${g}${(0,n.getErrorPath)(y,n.Type.Str)}`:g;return[r.default.instancePath,(0,t.strConcat)(r.default.instancePath,v)]}function p({keyword:g,it:{errSchemaPath:y}},{schemaPath:v,parentSchema:_}){let w=_?y:(0,t.str)`${y}/${g}`;return v&&(w=(0,t.str)`${w}${(0,n.getErrorPath)(v,n.Type.Str)}`),[c.schemaPath,w]}function m(g,{params:y,message:v},_){const{keyword:w,data:E,schemaValue:S,it:T}=g,{opts:C,propertyName:A,topSchemaRef:k,schemaPath:N}=T;_.push([c.keyword,w],[c.params,typeof y=="function"?y(g):y||(0,t._)`{}`]),C.messages&&_.push([c.message,typeof v=="function"?v(g):v]),C.verbose&&_.push([c.schema,S],[c.parentSchema,(0,t._)`${k}${N}`],[r.default.data,E]),A&&_.push([c.propertyName,A])}})(Gk);Object.defineProperty(hx,"__esModule",{value:!0});hx.boolOrEmptySchema=hx.topBoolOrEmptySchema=void 0;const NCt=Gk,PCt=Dn,DCt=np,OCt={message:"boolean schema is false"};function $Ct(e){const{gen:t,schema:n,validateName:r}=e;n===!1?PRe(e,!1):typeof n=="object"&&n.$async===!0?t.return(DCt.default.data):(t.assign((0,PCt._)`${r}.errors`,null),t.return(!0))}hx.topBoolOrEmptySchema=$Ct;function MCt(e,t){const{gen:n,schema:r}=e;r===!1?(n.var(t,!1),PRe(e)):n.var(t,!0)}hx.boolOrEmptySchema=MCt;function PRe(e,t){const{gen:n,data:r}=e,i={gen:n,keyword:"false schema",data:r,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:e};(0,NCt.reportError)(i,OCt,void 0,t)}var ks={},rb={};Object.defineProperty(rb,"__esModule",{value:!0});rb.getRules=rb.isJSONType=void 0;const LCt=["string","number","integer","boolean","null","object","array"],FCt=new Set(LCt);function jCt(e){return typeof e=="string"&&FCt.has(e)}rb.isJSONType=jCt;function BCt(){const e={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...e,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},e.number,e.string,e.array,e.object],post:{rules:[]},all:{},keywords:{}}}rb.getRules=BCt;var um={};Object.defineProperty(um,"__esModule",{value:!0});um.shouldUseRule=um.shouldUseGroup=um.schemaHasRulesForType=void 0;function UCt({schema:e,self:t},n){const r=t.RULES.types[n];return r&&r!==!0&&DRe(e,r)}um.schemaHasRulesForType=UCt;function DRe(e,t){return t.rules.some(n=>ORe(e,n))}um.shouldUseGroup=DRe;function ORe(e,t){var n;return e[t.keyword]!==void 0||((n=t.definition.implements)===null||n===void 0?void 0:n.some(r=>e[r]!==void 0))}um.shouldUseRule=ORe;Object.defineProperty(ks,"__esModule",{value:!0});ks.reportTypeError=ks.checkDataTypes=ks.checkDataType=ks.coerceAndCheckDataType=ks.getJSONTypes=ks.getSchemaTypes=ks.DataType=void 0;const zCt=rb,VCt=um,HCt=Gk,wn=Dn,$Re=wt;var dE;(function(e){e[e.Correct=0]="Correct",e[e.Wrong=1]="Wrong"})(dE||(ks.DataType=dE={}));function qCt(e){const t=MRe(e.type);if(t.includes("null")){if(e.nullable===!1)throw new Error("type: null contradicts nullable: false")}else{if(!t.length&&e.nullable!==void 0)throw new Error('"nullable" cannot be used without "type"');e.nullable===!0&&t.push("null")}return t}ks.getSchemaTypes=qCt;function MRe(e){const t=Array.isArray(e)?e:e?[e]:[];if(t.every(zCt.isJSONType))return t;throw new Error("type must be JSONType or JSONType[]: "+t.join(","))}ks.getJSONTypes=MRe;function WCt(e,t){const{gen:n,data:r,opts:i}=e,s=GCt(t,i.coerceTypes),o=t.length>0&&!(s.length===0&&t.length===1&&(0,VCt.schemaHasRulesForType)(e,t[0]));if(o){const a=QQ(t,r,i.strictNumbers,dE.Wrong);n.if(a,()=>{s.length?YCt(e,t,s):JQ(e)})}return o}ks.coerceAndCheckDataType=WCt;const LRe=new Set(["string","number","integer","boolean","null"]);function GCt(e,t){return t?e.filter(n=>LRe.has(n)||t==="array"&&n==="array"):[]}function YCt(e,t,n){const{gen:r,data:i,opts:s}=e,o=r.let("dataType",(0,wn._)`typeof ${i}`),a=r.let("coerced",(0,wn._)`undefined`);s.coerceTypes==="array"&&r.if((0,wn._)`${o} == 'object' && Array.isArray(${i}) && ${i}.length == 1`,()=>r.assign(i,(0,wn._)`${i}[0]`).assign(o,(0,wn._)`typeof ${i}`).if(QQ(t,i,s.strictNumbers),()=>r.assign(a,i))),r.if((0,wn._)`${a} !== undefined`);for(const l of n)(LRe.has(l)||l==="array"&&s.coerceTypes==="array")&&u(l);r.else(),JQ(e),r.endIf(),r.if((0,wn._)`${a} !== undefined`,()=>{r.assign(i,a),KCt(e,a)});function u(l){switch(l){case"string":r.elseIf((0,wn._)`${o} == "number" || ${o} == "boolean"`).assign(a,(0,wn._)`"" + ${i}`).elseIf((0,wn._)`${i} === null`).assign(a,(0,wn._)`""`);return;case"number":r.elseIf((0,wn._)`${o} == "boolean" || ${i} === null
              || (${o} == "string" && ${i} && ${i} == +${i})`).assign(a,(0,wn._)`+${i}`);return;case"integer":r.elseIf((0,wn._)`${o} === "boolean" || ${i} === null
              || (${o} === "string" && ${i} && ${i} == +${i} && !(${i} % 1))`).assign(a,(0,wn._)`+${i}`);return;case"boolean":r.elseIf((0,wn._)`${i} === "false" || ${i} === 0 || ${i} === null`).assign(a,!1).elseIf((0,wn._)`${i} === "true" || ${i} === 1`).assign(a,!0);return;case"null":r.elseIf((0,wn._)`${i} === "" || ${i} === 0 || ${i} === false`),r.assign(a,null);return;case"array":r.elseIf((0,wn._)`${o} === "string" || ${o} === "number"
              || ${o} === "boolean" || ${i} === null`).assign(a,(0,wn._)`[${i}]`)}}}function KCt({gen:e,parentData:t,parentDataProperty:n},r){e.if((0,wn._)`${t} !== undefined`,()=>e.assign((0,wn._)`${t}[${n}]`,r))}function SV(e,t,n,r=dE.Correct){const i=r===dE.Correct?wn.operators.EQ:wn.operators.NEQ;let s;switch(e){case"null":return(0,wn._)`${t} ${i} null`;case"array":s=(0,wn._)`Array.isArray(${t})`;break;case"object":s=(0,wn._)`${t} && typeof ${t} == "object" && !Array.isArray(${t})`;break;case"integer":s=o((0,wn._)`!(${t} % 1) && !isNaN(${t})`);break;case"number":s=o();break;default:return(0,wn._)`typeof ${t} ${i} ${e}`}return r===dE.Correct?s:(0,wn.not)(s);function o(a=wn.nil){return(0,wn.and)((0,wn._)`typeof ${t} == "number"`,a,n?(0,wn._)`isFinite(${t})`:wn.nil)}}ks.checkDataType=SV;function QQ(e,t,n,r){if(e.length===1)return SV(e[0],t,n,r);let i;const s=(0,$Re.toHash)(e);if(s.array&&s.object){const o=(0,wn._)`typeof ${t} != "object"`;i=s.null?o:(0,wn._)`!${t} || ${o}`,delete s.null,delete s.array,delete s.object}else i=wn.nil;s.number&&delete s.integer;for(const o in s)i=(0,wn.and)(i,SV(o,t,n,r));return i}ks.checkDataTypes=QQ;const XCt={message:({schema:e})=>`must be ${e}`,params:({schema:e,schemaValue:t})=>typeof e=="string"?(0,wn._)`{type: ${e}}`:(0,wn._)`{type: ${t}}`};function JQ(e){const t=QCt(e);(0,HCt.reportError)(t,XCt)}ks.reportTypeError=JQ;function QCt(e){const{gen:t,data:n,schema:r}=e,i=(0,$Re.schemaRefOrVal)(e,r,"type");return{gen:t,keyword:"type",data:n,schema:r.type,schemaCode:i,schemaValue:i,parentSchema:r,params:{},it:e}}var v4={};Object.defineProperty(v4,"__esModule",{value:!0});v4.assignDefaults=void 0;const j_=Dn,JCt=wt;function ZCt(e,t){const{properties:n,items:r}=e.schema;if(t==="object"&&n)for(const i in n)wde(e,i,n[i].default);else t==="array"&&Array.isArray(r)&&r.forEach((i,s)=>wde(e,s,i.default))}v4.assignDefaults=ZCt;function wde(e,t,n){const{gen:r,compositeRule:i,data:s,opts:o}=e;if(n===void 0)return;const a=(0,j_._)`${s}${(0,j_.getProperty)(t)}`;if(i){(0,JCt.checkStrictMode)(e,`default is ignored for: ${a}`);return}let u=(0,j_._)`${a} === undefined`;o.useDefaults==="empty"&&(u=(0,j_._)`${u} || ${a} === null || ${a} === ""`),r.if(u,(0,j_._)`${a} = ${(0,j_.stringify)(n)}`)}var rh={},Nn={};Object.defineProperty(Nn,"__esModule",{value:!0});Nn.validateUnion=Nn.validateArray=Nn.usePattern=Nn.callValidateCode=Nn.schemaProperties=Nn.allSchemaProperties=Nn.noPropertyInData=Nn.propertyInData=Nn.isOwnProperty=Nn.hasPropFunc=Nn.reportMissingProp=Nn.checkMissingProp=Nn.checkReportMissingProp=void 0;const ci=Dn,ZQ=wt,_g=np,eAt=wt;function tAt(e,t){const{gen:n,data:r,it:i}=e;n.if(tJ(n,r,t,i.opts.ownProperties),()=>{e.setParams({missingProperty:(0,ci._)`${t}`},!0),e.error()})}Nn.checkReportMissingProp=tAt;function nAt({gen:e,data:t,it:{opts:n}},r,i){return(0,ci.or)(...r.map(s=>(0,ci.and)(tJ(e,t,s,n.ownProperties),(0,ci._)`${i} = ${s}`)))}Nn.checkMissingProp=nAt;function rAt(e,t){e.setParams({missingProperty:t},!0),e.error()}Nn.reportMissingProp=rAt;function FRe(e){return e.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,ci._)`Object.prototype.hasOwnProperty`})}Nn.hasPropFunc=FRe;function eJ(e,t,n){return(0,ci._)`${FRe(e)}.call(${t}, ${n})`}Nn.isOwnProperty=eJ;function iAt(e,t,n,r){const i=(0,ci._)`${t}${(0,ci.getProperty)(n)} !== undefined`;return r?(0,ci._)`${i} && ${eJ(e,t,n)}`:i}Nn.propertyInData=iAt;function tJ(e,t,n,r){const i=(0,ci._)`${t}${(0,ci.getProperty)(n)} === undefined`;return r?(0,ci.or)(i,(0,ci.not)(eJ(e,t,n))):i}Nn.noPropertyInData=tJ;function jRe(e){return e?Object.keys(e).filter(t=>t!=="__proto__"):[]}Nn.allSchemaProperties=jRe;function sAt(e,t){return jRe(t).filter(n=>!(0,ZQ.alwaysValidSchema)(e,t[n]))}Nn.schemaProperties=sAt;function oAt({schemaCode:e,data:t,it:{gen:n,topSchemaRef:r,schemaPath:i,errorPath:s},it:o},a,u,l){const c=l?(0,ci._)`${e}, ${t}, ${r}${i}`:t,f=[[_g.default.instancePath,(0,ci.strConcat)(_g.default.instancePath,s)],[_g.default.parentData,o.parentData],[_g.default.parentDataProperty,o.parentDataProperty],[_g.default.rootData,_g.default.rootData]];o.opts.dynamicRef&&f.push([_g.default.dynamicAnchors,_g.default.dynamicAnchors]);const d=(0,ci._)`${c}, ${n.object(...f)}`;return u!==ci.nil?(0,ci._)`${a}.call(${u}, ${d})`:(0,ci._)`${a}(${d})`}Nn.callValidateCode=oAt;const aAt=(0,ci._)`new RegExp`;function uAt({gen:e,it:{opts:t}},n){const r=t.unicodeRegExp?"u":"",{regExp:i}=t.code,s=i(n,r);return e.scopeValue("pattern",{key:s.toString(),ref:s,code:(0,ci._)`${i.code==="new RegExp"?aAt:(0,eAt.useFunc)(e,i)}(${n}, ${r})`})}Nn.usePattern=uAt;function lAt(e){const{gen:t,data:n,keyword:r,it:i}=e,s=t.name("valid");if(i.allErrors){const a=t.let("valid",!0);return o(()=>t.assign(a,!1)),a}return t.var(s,!0),o(()=>t.break()),s;function o(a){const u=t.const("len",(0,ci._)`${n}.length`);t.forRange("i",0,u,l=>{e.subschema({keyword:r,dataProp:l,dataPropType:ZQ.Type.Num},s),t.if((0,ci.not)(s),a)})}}Nn.validateArray=lAt;function cAt(e){const{gen:t,schema:n,keyword:r,it:i}=e;if(!Array.isArray(n))throw new Error("ajv implementation error");if(n.some(u=>(0,ZQ.alwaysValidSchema)(i,u))&&!i.opts.unevaluated)return;const o=t.let("valid",!1),a=t.name("_valid");t.block(()=>n.forEach((u,l)=>{const c=e.subschema({keyword:r,schemaProp:l,compositeRule:!0},a);t.assign(o,(0,ci._)`${o} || ${a}`),e.mergeValidEvaluated(c,a)||t.if((0,ci.not)(o))})),e.result(o,()=>e.reset(),()=>e.error(!0))}Nn.validateUnion=cAt;Object.defineProperty(rh,"__esModule",{value:!0});rh.validateKeywordUsage=rh.validSchemaType=rh.funcKeywordCode=rh.macroKeywordCode=void 0;const La=Dn,Wv=np,fAt=Nn,dAt=Gk;function hAt(e,t){const{gen:n,keyword:r,schema:i,parentSchema:s,it:o}=e,a=t.macro.call(o.self,i,s,o),u=BRe(n,r,a);o.opts.validateSchema!==!1&&o.self.validateSchema(a,!0);const l=n.name("valid");e.subschema({schema:a,schemaPath:La.nil,errSchemaPath:`${o.errSchemaPath}/${r}`,topSchemaRef:u,compositeRule:!0},l),e.pass(l,()=>e.error(!0))}rh.macroKeywordCode=hAt;function pAt(e,t){var n;const{gen:r,keyword:i,schema:s,parentSchema:o,$data:a,it:u}=e;gAt(u,t);const l=!a&&t.compile?t.compile.call(u.self,s,o,u):t.validate,c=BRe(r,i,l),f=r.let("valid");e.block$data(f,d),e.ok((n=t.valid)!==null&&n!==void 0?n:f);function d(){if(t.errors===!1)m(),t.modifying&&Ede(e),g(()=>e.error());else{const y=t.async?h():p();t.modifying&&Ede(e),g(()=>mAt(e,y))}}function h(){const y=r.let("ruleErrs",null);return r.try(()=>m((0,La._)`await `),v=>r.assign(f,!1).if((0,La._)`${v} instanceof ${u.ValidationError}`,()=>r.assign(y,(0,La._)`${v}.errors`),()=>r.throw(v))),y}function p(){const y=(0,La._)`${c}.errors`;return r.assign(y,null),m(La.nil),y}function m(y=t.async?(0,La._)`await `:La.nil){const v=u.opts.passContext?Wv.default.this:Wv.default.self,_=!("compile"in t&&!a||t.schema===!1);r.assign(f,(0,La._)`${y}${(0,fAt.callValidateCode)(e,c,v,_)}`,t.modifying)}function g(y){var v;r.if((0,La.not)((v=t.valid)!==null&&v!==void 0?v:f),y)}}rh.funcKeywordCode=pAt;function Ede(e){const{gen:t,data:n,it:r}=e;t.if(r.parentData,()=>t.assign(n,(0,La._)`${r.parentData}[${r.parentDataProperty}]`))}function mAt(e,t){const{gen:n}=e;n.if((0,La._)`Array.isArray(${t})`,()=>{n.assign(Wv.default.vErrors,(0,La._)`${Wv.default.vErrors} === null ? ${t} : ${Wv.default.vErrors}.concat(${t})`).assign(Wv.default.errors,(0,La._)`${Wv.default.vErrors}.length`),(0,dAt.extendErrors)(e)},()=>e.error())}function gAt({schemaEnv:e},t){if(t.async&&!e.$async)throw new Error("async keyword in sync schema")}function BRe(e,t,n){if(n===void 0)throw new Error(`keyword "${t}" failed to compile`);return e.scopeValue("keyword",typeof n=="function"?{ref:n}:{ref:n,code:(0,La.stringify)(n)})}function yAt(e,t,n=!1){return!t.length||t.some(r=>r==="array"?Array.isArray(e):r==="object"?e&&typeof e=="object"&&!Array.isArray(e):typeof e==r||n&&typeof e>"u")}rh.validSchemaType=yAt;function vAt({schema:e,opts:t,self:n,errSchemaPath:r},i,s){if(Array.isArray(i.keyword)?!i.keyword.includes(s):i.keyword!==s)throw new Error("ajv implementation error");const o=i.dependencies;if(o!=null&&o.some(a=>!Object.prototype.hasOwnProperty.call(e,a)))throw new Error(`parent schema must have dependencies of ${s}: ${o.join(",")}`);if(i.validateSchema&&!i.validateSchema(e[s])){const u=`keyword "${s}" value is invalid at path "${r}": `+n.errorsText(i.validateSchema.errors);if(t.validateSchema==="log")n.logger.error(u);else throw new Error(u)}}rh.validateKeywordUsage=vAt;var A0={};Object.defineProperty(A0,"__esModule",{value:!0});A0.extendSubschemaMode=A0.extendSubschemaData=A0.getSubschema=void 0;const Jd=Dn,URe=wt;function bAt(e,{keyword:t,schemaProp:n,schema:r,schemaPath:i,errSchemaPath:s,topSchemaRef:o}){if(t!==void 0&&r!==void 0)throw new Error('both "keyword" and "schema" passed, only one allowed');if(t!==void 0){const a=e.schema[t];return n===void 0?{schema:a,schemaPath:(0,Jd._)`${e.schemaPath}${(0,Jd.getProperty)(t)}`,errSchemaPath:`${e.errSchemaPath}/${t}`}:{schema:a[n],schemaPath:(0,Jd._)`${e.schemaPath}${(0,Jd.getProperty)(t)}${(0,Jd.getProperty)(n)}`,errSchemaPath:`${e.errSchemaPath}/${t}/${(0,URe.escapeFragment)(n)}`}}if(r!==void 0){if(i===void 0||s===void 0||o===void 0)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:r,schemaPath:i,topSchemaRef:o,errSchemaPath:s}}throw new Error('either "keyword" or "schema" must be passed')}A0.getSubschema=bAt;function _At(e,t,{dataProp:n,dataPropType:r,data:i,dataTypes:s,propertyName:o}){if(i!==void 0&&n!==void 0)throw new Error('both "data" and "dataProp" passed, only one allowed');const{gen:a}=t;if(n!==void 0){const{errorPath:l,dataPathArr:c,opts:f}=t,d=a.let("data",(0,Jd._)`${t.data}${(0,Jd.getProperty)(n)}`,!0);u(d),e.errorPath=(0,Jd.str)`${l}${(0,URe.getErrorPath)(n,r,f.jsPropertySyntax)}`,e.parentDataProperty=(0,Jd._)`${n}`,e.dataPathArr=[...c,e.parentDataProperty]}if(i!==void 0){const l=i instanceof Jd.Name?i:a.let("data",i,!0);u(l),o!==void 0&&(e.propertyName=o)}s&&(e.dataTypes=s);function u(l){e.data=l,e.dataLevel=t.dataLevel+1,e.dataTypes=[],t.definedProperties=new Set,e.parentData=t.data,e.dataNames=[...t.dataNames,l]}}A0.extendSubschemaData=_At;function wAt(e,{jtdDiscriminator:t,jtdMetadata:n,compositeRule:r,createErrors:i,allErrors:s}){r!==void 0&&(e.compositeRule=r),i!==void 0&&(e.createErrors=i),s!==void 0&&(e.allErrors=s),e.jtdDiscriminator=t,e.jtdMetadata=n}A0.extendSubschemaMode=wAt;var Ao={},zRe={exports:{}},n0=zRe.exports=function(e,t,n){typeof t=="function"&&(n=t,t={}),n=t.cb||n;var r=typeof n=="function"?n:n.pre||function(){},i=n.post||function(){};$D(t,r,i,e,"",e)};n0.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0};n0.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0};n0.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0};n0.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function $D(e,t,n,r,i,s,o,a,u,l){if(r&&typeof r=="object"&&!Array.isArray(r)){t(r,i,s,o,a,u,l);for(var c in r){var f=r[c];if(Array.isArray(f)){if(c in n0.arrayKeywords)for(var d=0;d<f.length;d++)$D(e,t,n,f[d],i+"/"+c+"/"+d,s,i,c,r,d)}else if(c in n0.propsKeywords){if(f&&typeof f=="object")for(var h in f)$D(e,t,n,f[h],i+"/"+c+"/"+EAt(h),s,i,c,r,h)}else(c in n0.keywords||e.allKeys&&!(c in n0.skipKeywords))&&$D(e,t,n,f,i+"/"+c,s,i,c,r)}n(r,i,s,o,a,u,l)}}function EAt(e){return e.replace(/~/g,"~0").replace(/\//g,"~1")}var xAt=zRe.exports;Object.defineProperty(Ao,"__esModule",{value:!0});Ao.getSchemaRefs=Ao.resolveUrl=Ao.normalizeId=Ao._getFullPath=Ao.getFullPath=Ao.inlineRef=void 0;const SAt=wt,TAt=cK,CAt=xAt,AAt=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function IAt(e,t=!0){return typeof e=="boolean"?!0:t===!0?!TV(e):t?VRe(e)<=t:!1}Ao.inlineRef=IAt;const kAt=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function TV(e){for(const t in e){if(kAt.has(t))return!0;const n=e[t];if(Array.isArray(n)&&n.some(TV)||typeof n=="object"&&TV(n))return!0}return!1}function VRe(e){let t=0;for(const n in e){if(n==="$ref")return 1/0;if(t++,!AAt.has(n)&&(typeof e[n]=="object"&&(0,SAt.eachItem)(e[n],r=>t+=VRe(r)),t===1/0))return 1/0}return t}function HRe(e,t="",n){n!==!1&&(t=hE(t));const r=e.parse(t);return qRe(e,r)}Ao.getFullPath=HRe;function qRe(e,t){return e.serialize(t).split("#")[0]+"#"}Ao._getFullPath=qRe;const RAt=/#\/?$/;function hE(e){return e?e.replace(RAt,""):""}Ao.normalizeId=hE;function NAt(e,t,n){return n=hE(n),e.resolve(t,n)}Ao.resolveUrl=NAt;const PAt=/^[a-z_][-a-z0-9._]*$/i;function DAt(e,t){if(typeof e=="boolean")return{};const{schemaId:n,uriResolver:r}=this.opts,i=hE(e[n]||t),s={"":i},o=HRe(r,i,!1),a={},u=new Set;return CAt(e,{allKeys:!0},(f,d,h,p)=>{if(p===void 0)return;const m=o+d;let g=s[p];typeof f[n]=="string"&&(g=y.call(this,f[n])),v.call(this,f.$anchor),v.call(this,f.$dynamicAnchor),s[d]=g;function y(_){const w=this.opts.uriResolver.resolve;if(_=hE(g?w(g,_):_),u.has(_))throw c(_);u.add(_);let E=this.refs[_];return typeof E=="string"&&(E=this.refs[E]),typeof E=="object"?l(f,E.schema,_):_!==hE(m)&&(_[0]==="#"?(l(f,a[_],_),a[_]=f):this.refs[_]=m),_}function v(_){if(typeof _=="string"){if(!PAt.test(_))throw new Error(`invalid anchor "${_}"`);y.call(this,`#${_}`)}}}),a;function l(f,d,h){if(d!==void 0&&!TAt(f,d))throw c(h)}function c(f){return new Error(`reference "${f}" resolves to more than one schema`)}}Ao.getSchemaRefs=DAt;Object.defineProperty(zf,"__esModule",{value:!0});zf.getData=zf.KeywordCxt=zf.validateFunctionCode=void 0;const WRe=hx,xde=ks,nJ=um,B$=ks,OAt=v4,FC=rh,E9=A0,Dt=Dn,sn=np,$At=Ao,lm=wt,UT=Gk;function MAt(e){if(KRe(e)&&(XRe(e),YRe(e))){jAt(e);return}GRe(e,()=>(0,WRe.topBoolOrEmptySchema)(e))}zf.validateFunctionCode=MAt;function GRe({gen:e,validateName:t,schema:n,schemaEnv:r,opts:i},s){i.code.es5?e.func(t,(0,Dt._)`${sn.default.data}, ${sn.default.valCxt}`,r.$async,()=>{e.code((0,Dt._)`"use strict"; ${Sde(n,i)}`),FAt(e,i),e.code(s)}):e.func(t,(0,Dt._)`${sn.default.data}, ${LAt(i)}`,r.$async,()=>e.code(Sde(n,i)).code(s))}function LAt(e){return(0,Dt._)`{${sn.default.instancePath}="", ${sn.default.parentData}, ${sn.default.parentDataProperty}, ${sn.default.rootData}=${sn.default.data}${e.dynamicRef?(0,Dt._)`, ${sn.default.dynamicAnchors}={}`:Dt.nil}}={}`}function FAt(e,t){e.if(sn.default.valCxt,()=>{e.var(sn.default.instancePath,(0,Dt._)`${sn.default.valCxt}.${sn.default.instancePath}`),e.var(sn.default.parentData,(0,Dt._)`${sn.default.valCxt}.${sn.default.parentData}`),e.var(sn.default.parentDataProperty,(0,Dt._)`${sn.default.valCxt}.${sn.default.parentDataProperty}`),e.var(sn.default.rootData,(0,Dt._)`${sn.default.valCxt}.${sn.default.rootData}`),t.dynamicRef&&e.var(sn.default.dynamicAnchors,(0,Dt._)`${sn.default.valCxt}.${sn.default.dynamicAnchors}`)},()=>{e.var(sn.default.instancePath,(0,Dt._)`""`),e.var(sn.default.parentData,(0,Dt._)`undefined`),e.var(sn.default.parentDataProperty,(0,Dt._)`undefined`),e.var(sn.default.rootData,sn.default.data),t.dynamicRef&&e.var(sn.default.dynamicAnchors,(0,Dt._)`{}`)})}function jAt(e){const{schema:t,opts:n,gen:r}=e;GRe(e,()=>{n.$comment&&t.$comment&&JRe(e),HAt(e),r.let(sn.default.vErrors,null),r.let(sn.default.errors,0),n.unevaluated&&BAt(e),QRe(e),GAt(e)})}function BAt(e){const{gen:t,validateName:n}=e;e.evaluated=t.const("evaluated",(0,Dt._)`${n}.evaluated`),t.if((0,Dt._)`${e.evaluated}.dynamicProps`,()=>t.assign((0,Dt._)`${e.evaluated}.props`,(0,Dt._)`undefined`)),t.if((0,Dt._)`${e.evaluated}.dynamicItems`,()=>t.assign((0,Dt._)`${e.evaluated}.items`,(0,Dt._)`undefined`))}function Sde(e,t){const n=typeof e=="object"&&e[t.schemaId];return n&&(t.code.source||t.code.process)?(0,Dt._)`/*# sourceURL=${n} */`:Dt.nil}function UAt(e,t){if(KRe(e)&&(XRe(e),YRe(e))){zAt(e,t);return}(0,WRe.boolOrEmptySchema)(e,t)}function YRe({schema:e,self:t}){if(typeof e=="boolean")return!e;for(const n in e)if(t.RULES.all[n])return!0;return!1}function KRe(e){return typeof e.schema!="boolean"}function zAt(e,t){const{schema:n,gen:r,opts:i}=e;i.$comment&&n.$comment&&JRe(e),qAt(e),WAt(e);const s=r.const("_errs",sn.default.errors);QRe(e,s),r.var(t,(0,Dt._)`${s} === ${sn.default.errors}`)}function XRe(e){(0,lm.checkUnknownRules)(e),VAt(e)}function QRe(e,t){if(e.opts.jtd)return Tde(e,[],!1,t);const n=(0,xde.getSchemaTypes)(e.schema),r=(0,xde.coerceAndCheckDataType)(e,n);Tde(e,n,!r,t)}function VAt(e){const{schema:t,errSchemaPath:n,opts:r,self:i}=e;t.$ref&&r.ignoreKeywordsWithRef&&(0,lm.schemaHasRulesButRef)(t,i.RULES)&&i.logger.warn(`$ref: keywords ignored in schema at path "${n}"`)}function HAt(e){const{schema:t,opts:n}=e;t.default!==void 0&&n.useDefaults&&n.strictSchema&&(0,lm.checkStrictMode)(e,"default is ignored in the schema root")}function qAt(e){const t=e.schema[e.opts.schemaId];t&&(e.baseId=(0,$At.resolveUrl)(e.opts.uriResolver,e.baseId,t))}function WAt(e){if(e.schema.$async&&!e.schemaEnv.$async)throw new Error("async schema in sync schema")}function JRe({gen:e,schemaEnv:t,schema:n,errSchemaPath:r,opts:i}){const s=n.$comment;if(i.$comment===!0)e.code((0,Dt._)`${sn.default.self}.logger.log(${s})`);else if(typeof i.$comment=="function"){const o=(0,Dt.str)`${r}/$comment`,a=e.scopeValue("root",{ref:t.root});e.code((0,Dt._)`${sn.default.self}.opts.$comment(${s}, ${o}, ${a}.schema)`)}}function GAt(e){const{gen:t,schemaEnv:n,validateName:r,ValidationError:i,opts:s}=e;n.$async?t.if((0,Dt._)`${sn.default.errors} === 0`,()=>t.return(sn.default.data),()=>t.throw((0,Dt._)`new ${i}(${sn.default.vErrors})`)):(t.assign((0,Dt._)`${r}.errors`,sn.default.vErrors),s.unevaluated&&YAt(e),t.return((0,Dt._)`${sn.default.errors} === 0`))}function YAt({gen:e,evaluated:t,props:n,items:r}){n instanceof Dt.Name&&e.assign((0,Dt._)`${t}.props`,n),r instanceof Dt.Name&&e.assign((0,Dt._)`${t}.items`,r)}function Tde(e,t,n,r){const{gen:i,schema:s,data:o,allErrors:a,opts:u,self:l}=e,{RULES:c}=l;if(s.$ref&&(u.ignoreKeywordsWithRef||!(0,lm.schemaHasRulesButRef)(s,c))){i.block(()=>tNe(e,"$ref",c.all.$ref.definition));return}u.jtd||KAt(e,t),i.block(()=>{for(const d of c.rules)f(d);f(c.post)});function f(d){(0,nJ.shouldUseGroup)(s,d)&&(d.type?(i.if((0,B$.checkDataType)(d.type,o,u.strictNumbers)),Cde(e,d),t.length===1&&t[0]===d.type&&n&&(i.else(),(0,B$.reportTypeError)(e)),i.endIf()):Cde(e,d),a||i.if((0,Dt._)`${sn.default.errors} === ${r||0}`))}}function Cde(e,t){const{gen:n,schema:r,opts:{useDefaults:i}}=e;i&&(0,OAt.assignDefaults)(e,t.type),n.block(()=>{for(const s of t.rules)(0,nJ.shouldUseRule)(r,s)&&tNe(e,s.keyword,s.definition,t.type)})}function KAt(e,t){e.schemaEnv.meta||!e.opts.strictTypes||(XAt(e,t),e.opts.allowUnionTypes||QAt(e,t),JAt(e,e.dataTypes))}function XAt(e,t){if(t.length){if(!e.dataTypes.length){e.dataTypes=t;return}t.forEach(n=>{ZRe(e.dataTypes,n)||rJ(e,`type "${n}" not allowed by context "${e.dataTypes.join(",")}"`)}),eIt(e,t)}}function QAt(e,t){t.length>1&&!(t.length===2&&t.includes("null"))&&rJ(e,"use allowUnionTypes to allow union type keyword")}function JAt(e,t){const n=e.self.RULES.all;for(const r in n){const i=n[r];if(typeof i=="object"&&(0,nJ.shouldUseRule)(e.schema,i)){const{type:s}=i.definition;s.length&&!s.some(o=>ZAt(t,o))&&rJ(e,`missing type "${s.join(",")}" for keyword "${r}"`)}}}function ZAt(e,t){return e.includes(t)||t==="number"&&e.includes("integer")}function ZRe(e,t){return e.includes(t)||t==="integer"&&e.includes("number")}function eIt(e,t){const n=[];for(const r of e.dataTypes)ZRe(t,r)?n.push(r):t.includes("integer")&&r==="number"&&n.push("integer");e.dataTypes=n}function rJ(e,t){const n=e.schemaEnv.baseId+e.errSchemaPath;t+=` at "${n}" (strictTypes)`,(0,lm.checkStrictMode)(e,t,e.opts.strictTypes)}class eNe{constructor(t,n,r){if((0,FC.validateKeywordUsage)(t,n,r),this.gen=t.gen,this.allErrors=t.allErrors,this.keyword=r,this.data=t.data,this.schema=t.schema[r],this.$data=n.$data&&t.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,lm.schemaRefOrVal)(t,this.schema,r,this.$data),this.schemaType=n.schemaType,this.parentSchema=t.schema,this.params={},this.it=t,this.def=n,this.$data)this.schemaCode=t.gen.const("vSchema",nNe(this.$data,t));else if(this.schemaCode=this.schemaValue,!(0,FC.validSchemaType)(this.schema,n.schemaType,n.allowUndefined))throw new Error(`${r} value must be ${JSON.stringify(n.schemaType)}`);("code"in n?n.trackErrors:n.errors!==!1)&&(this.errsCount=t.gen.const("_errs",sn.default.errors))}result(t,n,r){this.failResult((0,Dt.not)(t),n,r)}failResult(t,n,r){this.gen.if(t),r?r():this.error(),n?(this.gen.else(),n(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(t,n){this.failResult((0,Dt.not)(t),void 0,n)}fail(t){if(t===void 0){this.error(),this.allErrors||this.gen.if(!1);return}this.gen.if(t),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(t){if(!this.$data)return this.fail(t);const{schemaCode:n}=this;this.fail((0,Dt._)`${n} !== undefined && (${(0,Dt.or)(this.invalid$data(),t)})`)}error(t,n,r){if(n){this.setParams(n),this._error(t,r),this.setParams({});return}this._error(t,r)}_error(t,n){(t?UT.reportExtraError:UT.reportError)(this,this.def.error,n)}$dataError(){(0,UT.reportError)(this,this.def.$dataError||UT.keyword$DataError)}reset(){if(this.errsCount===void 0)throw new Error('add "trackErrors" to keyword definition');(0,UT.resetErrorsCount)(this.gen,this.errsCount)}ok(t){this.allErrors||this.gen.if(t)}setParams(t,n){n?Object.assign(this.params,t):this.params=t}block$data(t,n,r=Dt.nil){this.gen.block(()=>{this.check$data(t,r),n()})}check$data(t=Dt.nil,n=Dt.nil){if(!this.$data)return;const{gen:r,schemaCode:i,schemaType:s,def:o}=this;r.if((0,Dt.or)((0,Dt._)`${i} === undefined`,n)),t!==Dt.nil&&r.assign(t,!0),(s.length||o.validateSchema)&&(r.elseIf(this.invalid$data()),this.$dataError(),t!==Dt.nil&&r.assign(t,!1)),r.else()}invalid$data(){const{gen:t,schemaCode:n,schemaType:r,def:i,it:s}=this;return(0,Dt.or)(o(),a());function o(){if(r.length){if(!(n instanceof Dt.Name))throw new Error("ajv implementation error");const u=Array.isArray(r)?r:[r];return(0,Dt._)`${(0,B$.checkDataTypes)(u,n,s.opts.strictNumbers,B$.DataType.Wrong)}`}return Dt.nil}function a(){if(i.validateSchema){const u=t.scopeValue("validate$data",{ref:i.validateSchema});return(0,Dt._)`!${u}(${n})`}return Dt.nil}}subschema(t,n){const r=(0,E9.getSubschema)(this.it,t);(0,E9.extendSubschemaData)(r,this.it,t),(0,E9.extendSubschemaMode)(r,t);const i={...this.it,...r,items:void 0,props:void 0};return UAt(i,n),i}mergeEvaluated(t,n){const{it:r,gen:i}=this;r.opts.unevaluated&&(r.props!==!0&&t.props!==void 0&&(r.props=lm.mergeEvaluated.props(i,t.props,r.props,n)),r.items!==!0&&t.items!==void 0&&(r.items=lm.mergeEvaluated.items(i,t.items,r.items,n)))}mergeValidEvaluated(t,n){const{it:r,gen:i}=this;if(r.opts.unevaluated&&(r.props!==!0||r.items!==!0))return i.if(n,()=>this.mergeEvaluated(t,Dt.Name)),!0}}zf.KeywordCxt=eNe;function tNe(e,t,n,r){const i=new eNe(e,n,t);"code"in n?n.code(i,r):i.$data&&n.validate?(0,FC.funcKeywordCode)(i,n):"macro"in n?(0,FC.macroKeywordCode)(i,n):(n.compile||n.validate)&&(0,FC.funcKeywordCode)(i,n)}const tIt=/^\/(?:[^~]|~0|~1)*$/,nIt=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function nNe(e,{dataLevel:t,dataNames:n,dataPathArr:r}){let i,s;if(e==="")return sn.default.rootData;if(e[0]==="/"){if(!tIt.test(e))throw new Error(`Invalid JSON-pointer: ${e}`);i=e,s=sn.default.rootData}else{const l=nIt.exec(e);if(!l)throw new Error(`Invalid JSON-pointer: ${e}`);const c=+l[1];if(i=l[2],i==="#"){if(c>=t)throw new Error(u("property/index",c));return r[t-c]}if(c>t)throw new Error(u("data",c));if(s=n[t-c],!i)return s}let o=s;const a=i.split("/");for(const l of a)l&&(s=(0,Dt._)`${s}${(0,Dt.getProperty)((0,lm.unescapeJsonPointer)(l))}`,o=(0,Dt._)`${o} && ${s}`);return o;function u(l,c){return`Cannot access ${l} ${c} levels up, current level is ${t}`}}zf.getData=nNe;var Yk={};Object.defineProperty(Yk,"__esModule",{value:!0});class rIt extends Error{constructor(t){super("validation failed"),this.errors=t,this.ajv=this.validation=!0}}Yk.default=rIt;var DS={};Object.defineProperty(DS,"__esModule",{value:!0});const x9=Ao;class iIt extends Error{constructor(t,n,r,i){super(i||`can't resolve reference ${r} from id ${n}`),this.missingRef=(0,x9.resolveUrl)(t,n,r),this.missingSchema=(0,x9.normalizeId)((0,x9.getFullPath)(t,this.missingRef))}}DS.default=iIt;var Nu={};Object.defineProperty(Nu,"__esModule",{value:!0});Nu.resolveSchema=Nu.getCompilingSchema=Nu.resolveRef=Nu.compileSchema=Nu.SchemaEnv=void 0;const rf=Dn,sIt=Yk,hv=np,Af=Ao,Ade=wt,oIt=zf;class b4{constructor(t){var n;this.refs={},this.dynamicAnchors={};let r;typeof t.schema=="object"&&(r=t.schema),this.schema=t.schema,this.schemaId=t.schemaId,this.root=t.root||this,this.baseId=(n=t.baseId)!==null&&n!==void 0?n:(0,Af.normalizeId)(r==null?void 0:r[t.schemaId||"$id"]),this.schemaPath=t.schemaPath,this.localRefs=t.localRefs,this.meta=t.meta,this.$async=r==null?void 0:r.$async,this.refs={}}}Nu.SchemaEnv=b4;function iJ(e){const t=rNe.call(this,e);if(t)return t;const n=(0,Af.getFullPath)(this.opts.uriResolver,e.root.baseId),{es5:r,lines:i}=this.opts.code,{ownProperties:s}=this.opts,o=new rf.CodeGen(this.scope,{es5:r,lines:i,ownProperties:s});let a;e.$async&&(a=o.scopeValue("Error",{ref:sIt.default,code:(0,rf._)`require("ajv/dist/runtime/validation_error").default`}));const u=o.scopeName("validate");e.validateName=u;const l={gen:o,allErrors:this.opts.allErrors,data:hv.default.data,parentData:hv.default.parentData,parentDataProperty:hv.default.parentDataProperty,dataNames:[hv.default.data],dataPathArr:[rf.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:o.scopeValue("schema",this.opts.code.source===!0?{ref:e.schema,code:(0,rf.stringify)(e.schema)}:{ref:e.schema}),validateName:u,ValidationError:a,schema:e.schema,schemaEnv:e,rootId:n,baseId:e.baseId||n,schemaPath:rf.nil,errSchemaPath:e.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,rf._)`""`,opts:this.opts,self:this};let c;try{this._compilations.add(e),(0,oIt.validateFunctionCode)(l),o.optimize(this.opts.code.optimize);const f=o.toString();c=`${o.scopeRefs(hv.default.scope)}return ${f}`,this.opts.code.process&&(c=this.opts.code.process(c,e));const h=new Function(`${hv.default.self}`,`${hv.default.scope}`,c)(this,this.scope.get());if(this.scope.value(u,{ref:h}),h.errors=null,h.schema=e.schema,h.schemaEnv=e,e.$async&&(h.$async=!0),this.opts.code.source===!0&&(h.source={validateName:u,validateCode:f,scopeValues:o._values}),this.opts.unevaluated){const{props:p,items:m}=l;h.evaluated={props:p instanceof rf.Name?void 0:p,items:m instanceof rf.Name?void 0:m,dynamicProps:p instanceof rf.Name,dynamicItems:m instanceof rf.Name},h.source&&(h.source.evaluated=(0,rf.stringify)(h.evaluated))}return e.validate=h,e}catch(f){throw delete e.validate,delete e.validateName,c&&this.logger.error("Error compiling schema, function code:",c),f}finally{this._compilations.delete(e)}}Nu.compileSchema=iJ;function aIt(e,t,n){var r;n=(0,Af.resolveUrl)(this.opts.uriResolver,t,n);const i=e.refs[n];if(i)return i;let s=cIt.call(this,e,n);if(s===void 0){const o=(r=e.localRefs)===null||r===void 0?void 0:r[n],{schemaId:a}=this.opts;o&&(s=new b4({schema:o,schemaId:a,root:e,baseId:t}))}if(s!==void 0)return e.refs[n]=uIt.call(this,s)}Nu.resolveRef=aIt;function uIt(e){return(0,Af.inlineRef)(e.schema,this.opts.inlineRefs)?e.schema:e.validate?e:iJ.call(this,e)}function rNe(e){for(const t of this._compilations)if(lIt(t,e))return t}Nu.getCompilingSchema=rNe;function lIt(e,t){return e.schema===t.schema&&e.root===t.root&&e.baseId===t.baseId}function cIt(e,t){let n;for(;typeof(n=this.refs[t])=="string";)t=n;return n||this.schemas[t]||_4.call(this,e,t)}function _4(e,t){const n=this.opts.uriResolver.parse(t),r=(0,Af._getFullPath)(this.opts.uriResolver,n);let i=(0,Af.getFullPath)(this.opts.uriResolver,e.baseId,void 0);if(Object.keys(e.schema).length>0&&r===i)return S9.call(this,n,e);const s=(0,Af.normalizeId)(r),o=this.refs[s]||this.schemas[s];if(typeof o=="string"){const a=_4.call(this,e,o);return typeof(a==null?void 0:a.schema)!="object"?void 0:S9.call(this,n,a)}if(typeof(o==null?void 0:o.schema)=="object"){if(o.validate||iJ.call(this,o),s===(0,Af.normalizeId)(t)){const{schema:a}=o,{schemaId:u}=this.opts,l=a[u];return l&&(i=(0,Af.resolveUrl)(this.opts.uriResolver,i,l)),new b4({schema:a,schemaId:u,root:e,baseId:i})}return S9.call(this,n,o)}}Nu.resolveSchema=_4;const fIt=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function S9(e,{baseId:t,schema:n,root:r}){var i;if(((i=e.fragment)===null||i===void 0?void 0:i[0])!=="/")return;for(const a of e.fragment.slice(1).split("/")){if(typeof n=="boolean")return;const u=n[(0,Ade.unescapeFragment)(a)];if(u===void 0)return;n=u;const l=typeof n=="object"&&n[this.opts.schemaId];!fIt.has(a)&&l&&(t=(0,Af.resolveUrl)(this.opts.uriResolver,t,l))}let s;if(typeof n!="boolean"&&n.$ref&&!(0,Ade.schemaHasRulesButRef)(n,this.RULES)){const a=(0,Af.resolveUrl)(this.opts.uriResolver,t,n.$ref);s=_4.call(this,r,a)}const{schemaId:o}=this.opts;if(s=s||new b4({schema:n,schemaId:o,root:r,baseId:t}),s.schema!==s.root.schema)return s}const dIt="https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",hIt="Meta-schema for $data reference (JSON AnySchema extension proposal)",pIt="object",mIt=["$data"],gIt={$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},yIt=!1,vIt={$id:dIt,description:hIt,type:pIt,required:mIt,properties:gIt,additionalProperties:yIt};var sJ={},CV={exports:{}};/** @license URI.js v4.4.1 (c) 2011 Gary Court. License: http://github.com/garycourt/uri-js */(function(e,t){(function(n,r){r(t)})(to,function(n){function r(){for(var oe=arguments.length,ee=Array(oe),ae=0;ae<oe;ae++)ee[ae]=arguments[ae];if(ee.length>1){ee[0]=ee[0].slice(0,-1);for(var Ce=ee.length-1,Se=1;Se<Ce;++Se)ee[Se]=ee[Se].slice(1,-1);return ee[Ce]=ee[Ce].slice(1),ee.join("")}else return ee[0]}function i(oe){return"(?:"+oe+")"}function s(oe){return oe===void 0?"undefined":oe===null?"null":Object.prototype.toString.call(oe).split(" ").pop().split("]").shift().toLowerCase()}function o(oe){return oe.toUpperCase()}function a(oe){return oe!=null?oe instanceof Array?oe:typeof oe.length!="number"||oe.split||oe.setInterval||oe.call?[oe]:Array.prototype.slice.call(oe):[]}function u(oe,ee){var ae=oe;if(ee)for(var Ce in ee)ae[Ce]=ee[Ce];return ae}function l(oe){var ee="[A-Za-z]",ae="[0-9]",Ce=r(ae,"[A-Fa-f]"),Se=i(i("%[EFef]"+Ce+"%"+Ce+Ce+"%"+Ce+Ce)+"|"+i("%[89A-Fa-f]"+Ce+"%"+Ce+Ce)+"|"+i("%"+Ce+Ce)),ot="[\\:\\/\\?\\#\\[\\]\\@]",St="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",Ht=r(ot,St),On=oe?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]",jn=oe?"[\\uE000-\\uF8FF]":"[]",pn=r(ee,ae,"[\\-\\.\\_\\~]",On);i(ee+r(ee,ae,"[\\+\\-\\.]")+"*"),i(i(Se+"|"+r(pn,St,"[\\:]"))+"*");var ir=i(i("25[0-5]")+"|"+i("2[0-4]"+ae)+"|"+i("1"+ae+ae)+"|"+i("0?[1-9]"+ae)+"|0?0?"+ae),Ir=i(ir+"\\."+ir+"\\."+ir+"\\."+ir),Vt=i(Ce+"{1,4}"),sr=i(i(Vt+"\\:"+Vt)+"|"+Ir),Hr=i(i(Vt+"\\:")+"{6}"+sr),Jn=i("\\:\\:"+i(Vt+"\\:")+"{5}"+sr),ki=i(i(Vt)+"?\\:\\:"+i(Vt+"\\:")+"{4}"+sr),Hs=i(i(i(Vt+"\\:")+"{0,1}"+Vt)+"?\\:\\:"+i(Vt+"\\:")+"{3}"+sr),Jr=i(i(i(Vt+"\\:")+"{0,2}"+Vt)+"?\\:\\:"+i(Vt+"\\:")+"{2}"+sr),mo=i(i(i(Vt+"\\:")+"{0,3}"+Vt)+"?\\:\\:"+Vt+"\\:"+sr),Li=i(i(i(Vt+"\\:")+"{0,4}"+Vt)+"?\\:\\:"+sr),Fi=i(i(i(Vt+"\\:")+"{0,5}"+Vt)+"?\\:\\:"+Vt),Vo=i(i(i(Vt+"\\:")+"{0,6}"+Vt)+"?\\:\\:"),Ra=i([Hr,Jn,ki,Hs,Jr,mo,Li,Fi,Vo].join("|")),qs=i(i(pn+"|"+Se)+"+");i("[vV]"+Ce+"+\\."+r(pn,St,"[\\:]")+"+"),i(i(Se+"|"+r(pn,St))+"*");var nc=i(Se+"|"+r(pn,St,"[\\:\\@]"));return i(i(Se+"|"+r(pn,St,"[\\@]"))+"+"),i(i(nc+"|"+r("[\\/\\?]",jn))+"*"),{NOT_SCHEME:new RegExp(r("[^]",ee,ae,"[\\+\\-\\.]"),"g"),NOT_USERINFO:new RegExp(r("[^\\%\\:]",pn,St),"g"),NOT_HOST:new RegExp(r("[^\\%\\[\\]\\:]",pn,St),"g"),NOT_PATH:new RegExp(r("[^\\%\\/\\:\\@]",pn,St),"g"),NOT_PATH_NOSCHEME:new RegExp(r("[^\\%\\/\\@]",pn,St),"g"),NOT_QUERY:new RegExp(r("[^\\%]",pn,St,"[\\:\\@\\/\\?]",jn),"g"),NOT_FRAGMENT:new RegExp(r("[^\\%]",pn,St,"[\\:\\@\\/\\?]"),"g"),ESCAPE:new RegExp(r("[^]",pn,St),"g"),UNRESERVED:new RegExp(pn,"g"),OTHER_CHARS:new RegExp(r("[^\\%]",pn,Ht),"g"),PCT_ENCODED:new RegExp(Se,"g"),IPV4ADDRESS:new RegExp("^("+Ir+")$"),IPV6ADDRESS:new RegExp("^\\[?("+Ra+")"+i(i("\\%25|\\%(?!"+Ce+"{2})")+"("+qs+")")+"?\\]?$")}}var c=l(!1),f=l(!0),d=function(){function oe(ee,ae){var Ce=[],Se=!0,ot=!1,St=void 0;try{for(var Ht=ee[Symbol.iterator](),On;!(Se=(On=Ht.next()).done)&&(Ce.push(On.value),!(ae&&Ce.length===ae));Se=!0);}catch(jn){ot=!0,St=jn}finally{try{!Se&&Ht.return&&Ht.return()}finally{if(ot)throw St}}return Ce}return function(ee,ae){if(Array.isArray(ee))return ee;if(Symbol.iterator in Object(ee))return oe(ee,ae);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),h=function(oe){if(Array.isArray(oe)){for(var ee=0,ae=Array(oe.length);ee<oe.length;ee++)ae[ee]=oe[ee];return ae}else return Array.from(oe)},p=2147483647,m=36,g=1,y=26,v=38,_=700,w=72,E=128,S="-",T=/^xn--/,C=/[^\0-\x7E]/,A=/[\x2E\u3002\uFF0E\uFF61]/g,k={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},N=m-g,O=Math.floor,D=String.fromCharCode;function $(oe){throw new RangeError(k[oe])}function F(oe,ee){for(var ae=[],Ce=oe.length;Ce--;)ae[Ce]=ee(oe[Ce]);return ae}function M(oe,ee){var ae=oe.split("@"),Ce="";ae.length>1&&(Ce=ae[0]+"@",oe=ae[1]),oe=oe.replace(A,".");var Se=oe.split("."),ot=F(Se,ee).join(".");return Ce+ot}function B(oe){for(var ee=[],ae=0,Ce=oe.length;ae<Ce;){var Se=oe.charCodeAt(ae++);if(Se>=55296&&Se<=56319&&ae<Ce){var ot=oe.charCodeAt(ae++);(ot&64512)==56320?ee.push(((Se&1023)<<10)+(ot&1023)+65536):(ee.push(Se),ae--)}else ee.push(Se)}return ee}var U=function(ee){return String.fromCodePoint.apply(String,h(ee))},H=function(ee){return ee-48<10?ee-22:ee-65<26?ee-65:ee-97<26?ee-97:m},P=function(ee,ae){return ee+22+75*(ee<26)-((ae!=0)<<5)},z=function(ee,ae,Ce){var Se=0;for(ee=Ce?O(ee/_):ee>>1,ee+=O(ee/ae);ee>N*y>>1;Se+=m)ee=O(ee/N);return O(Se+(N+1)*ee/(ee+v))},W=function(ee){var ae=[],Ce=ee.length,Se=0,ot=E,St=w,Ht=ee.lastIndexOf(S);Ht<0&&(Ht=0);for(var On=0;On<Ht;++On)ee.charCodeAt(On)>=128&&$("not-basic"),ae.push(ee.charCodeAt(On));for(var jn=Ht>0?Ht+1:0;jn<Ce;){for(var pn=Se,ir=1,Ir=m;;Ir+=m){jn>=Ce&&$("invalid-input");var Vt=H(ee.charCodeAt(jn++));(Vt>=m||Vt>O((p-Se)/ir))&&$("overflow"),Se+=Vt*ir;var sr=Ir<=St?g:Ir>=St+y?y:Ir-St;if(Vt<sr)break;var Hr=m-sr;ir>O(p/Hr)&&$("overflow"),ir*=Hr}var Jn=ae.length+1;St=z(Se-pn,Jn,pn==0),O(Se/Jn)>p-ot&&$("overflow"),ot+=O(Se/Jn),Se%=Jn,ae.splice(Se++,0,ot)}return String.fromCodePoint.apply(String,ae)},j=function(ee){var ae=[];ee=B(ee);var Ce=ee.length,Se=E,ot=0,St=w,Ht=!0,On=!1,jn=void 0;try{for(var pn=ee[Symbol.iterator](),ir;!(Ht=(ir=pn.next()).done);Ht=!0){var Ir=ir.value;Ir<128&&ae.push(D(Ir))}}catch(Oe){On=!0,jn=Oe}finally{try{!Ht&&pn.return&&pn.return()}finally{if(On)throw jn}}var Vt=ae.length,sr=Vt;for(Vt&&ae.push(S);sr<Ce;){var Hr=p,Jn=!0,ki=!1,Hs=void 0;try{for(var Jr=ee[Symbol.iterator](),mo;!(Jn=(mo=Jr.next()).done);Jn=!0){var Li=mo.value;Li>=Se&&Li<Hr&&(Hr=Li)}}catch(Oe){ki=!0,Hs=Oe}finally{try{!Jn&&Jr.return&&Jr.return()}finally{if(ki)throw Hs}}var Fi=sr+1;Hr-Se>O((p-ot)/Fi)&&$("overflow"),ot+=(Hr-Se)*Fi,Se=Hr;var Vo=!0,Ra=!1,qs=void 0;try{for(var nc=ee[Symbol.iterator](),wd;!(Vo=(wd=nc.next()).done);Vo=!0){var Y=wd.value;if(Y<Se&&++ot>p&&$("overflow"),Y==Se){for(var se=ot,Z=m;;Z+=m){var fe=Z<=St?g:Z>=St+y?y:Z-St;if(se<fe)break;var ye=se-fe,le=m-fe;ae.push(D(P(fe+ye%le,0))),se=O(ye/le)}ae.push(D(P(se,0))),St=z(ot,Fi,sr==Vt),ot=0,++sr}}}catch(Oe){Ra=!0,qs=Oe}finally{try{!Vo&&nc.return&&nc.return()}finally{if(Ra)throw qs}}++ot,++Se}return ae.join("")},q=function(ee){return M(ee,function(ae){return T.test(ae)?W(ae.slice(4).toLowerCase()):ae})},G=function(ee){return M(ee,function(ae){return C.test(ae)?"xn--"+j(ae):ae})},ne={version:"2.1.0",ucs2:{decode:B,encode:U},decode:W,encode:j,toASCII:G,toUnicode:q},ce={};function de(oe){var ee=oe.charCodeAt(0),ae=void 0;return ee<16?ae="%0"+ee.toString(16).toUpperCase():ee<128?ae="%"+ee.toString(16).toUpperCase():ee<2048?ae="%"+(ee>>6|192).toString(16).toUpperCase()+"%"+(ee&63|128).toString(16).toUpperCase():ae="%"+(ee>>12|224).toString(16).toUpperCase()+"%"+(ee>>6&63|128).toString(16).toUpperCase()+"%"+(ee&63|128).toString(16).toUpperCase(),ae}function he(oe){for(var ee="",ae=0,Ce=oe.length;ae<Ce;){var Se=parseInt(oe.substr(ae+1,2),16);if(Se<128)ee+=String.fromCharCode(Se),ae+=3;else if(Se>=194&&Se<224){if(Ce-ae>=6){var ot=parseInt(oe.substr(ae+4,2),16);ee+=String.fromCharCode((Se&31)<<6|ot&63)}else ee+=oe.substr(ae,6);ae+=6}else if(Se>=224){if(Ce-ae>=9){var St=parseInt(oe.substr(ae+4,2),16),Ht=parseInt(oe.substr(ae+7,2),16);ee+=String.fromCharCode((Se&15)<<12|(St&63)<<6|Ht&63)}else ee+=oe.substr(ae,9);ae+=9}else ee+=oe.substr(ae,3),ae+=3}return ee}function ve(oe,ee){function ae(Ce){var Se=he(Ce);return Se.match(ee.UNRESERVED)?Se:Ce}return oe.scheme&&(oe.scheme=String(oe.scheme).replace(ee.PCT_ENCODED,ae).toLowerCase().replace(ee.NOT_SCHEME,"")),oe.userinfo!==void 0&&(oe.userinfo=String(oe.userinfo).replace(ee.PCT_ENCODED,ae).replace(ee.NOT_USERINFO,de).replace(ee.PCT_ENCODED,o)),oe.host!==void 0&&(oe.host=String(oe.host).replace(ee.PCT_ENCODED,ae).toLowerCase().replace(ee.NOT_HOST,de).replace(ee.PCT_ENCODED,o)),oe.path!==void 0&&(oe.path=String(oe.path).replace(ee.PCT_ENCODED,ae).replace(oe.scheme?ee.NOT_PATH:ee.NOT_PATH_NOSCHEME,de).replace(ee.PCT_ENCODED,o)),oe.query!==void 0&&(oe.query=String(oe.query).replace(ee.PCT_ENCODED,ae).replace(ee.NOT_QUERY,de).replace(ee.PCT_ENCODED,o)),oe.fragment!==void 0&&(oe.fragment=String(oe.fragment).replace(ee.PCT_ENCODED,ae).replace(ee.NOT_FRAGMENT,de).replace(ee.PCT_ENCODED,o)),oe}function Ie(oe){return oe.replace(/^0*(.*)/,"$1")||"0"}function be(oe,ee){var ae=oe.match(ee.IPV4ADDRESS)||[],Ce=d(ae,2),Se=Ce[1];return Se?Se.split(".").map(Ie).join("."):oe}function Ke(oe,ee){var ae=oe.match(ee.IPV6ADDRESS)||[],Ce=d(ae,3),Se=Ce[1],ot=Ce[2];if(Se){for(var St=Se.toLowerCase().split("::").reverse(),Ht=d(St,2),On=Ht[0],jn=Ht[1],pn=jn?jn.split(":").map(Ie):[],ir=On.split(":").map(Ie),Ir=ee.IPV4ADDRESS.test(ir[ir.length-1]),Vt=Ir?7:8,sr=ir.length-Vt,Hr=Array(Vt),Jn=0;Jn<Vt;++Jn)Hr[Jn]=pn[Jn]||ir[sr+Jn]||"";Ir&&(Hr[Vt-1]=be(Hr[Vt-1],ee));var ki=Hr.reduce(function(Fi,Vo,Ra){if(!Vo||Vo==="0"){var qs=Fi[Fi.length-1];qs&&qs.index+qs.length===Ra?qs.length++:Fi.push({index:Ra,length:1})}return Fi},[]),Hs=ki.sort(function(Fi,Vo){return Vo.length-Fi.length})[0],Jr=void 0;if(Hs&&Hs.length>1){var mo=Hr.slice(0,Hs.index),Li=Hr.slice(Hs.index+Hs.length);Jr=mo.join(":")+"::"+Li.join(":")}else Jr=Hr.join(":");return ot&&(Jr+="%"+ot),Jr}else return oe}var Ue=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[^\/?#\]]+\]|[^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i,yt="".match(/(){0}/)[1]===void 0;function it(oe){var ee=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ae={},Ce=ee.iri!==!1?f:c;ee.reference==="suffix"&&(oe=(ee.scheme?ee.scheme+":":"")+"//"+oe);var Se=oe.match(Ue);if(Se){yt?(ae.scheme=Se[1],ae.userinfo=Se[3],ae.host=Se[4],ae.port=parseInt(Se[5],10),ae.path=Se[6]||"",ae.query=Se[7],ae.fragment=Se[8],isNaN(ae.port)&&(ae.port=Se[5])):(ae.scheme=Se[1]||void 0,ae.userinfo=oe.indexOf("@")!==-1?Se[3]:void 0,ae.host=oe.indexOf("//")!==-1?Se[4]:void 0,ae.port=parseInt(Se[5],10),ae.path=Se[6]||"",ae.query=oe.indexOf("?")!==-1?Se[7]:void 0,ae.fragment=oe.indexOf("#")!==-1?Se[8]:void 0,isNaN(ae.port)&&(ae.port=oe.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?Se[4]:void 0)),ae.host&&(ae.host=Ke(be(ae.host,Ce),Ce)),ae.scheme===void 0&&ae.userinfo===void 0&&ae.host===void 0&&ae.port===void 0&&!ae.path&&ae.query===void 0?ae.reference="same-document":ae.scheme===void 0?ae.reference="relative":ae.fragment===void 0?ae.reference="absolute":ae.reference="uri",ee.reference&&ee.reference!=="suffix"&&ee.reference!==ae.reference&&(ae.error=ae.error||"URI is not a "+ee.reference+" reference.");var ot=ce[(ee.scheme||ae.scheme||"").toLowerCase()];if(!ee.unicodeSupport&&(!ot||!ot.unicodeSupport)){if(ae.host&&(ee.domainHost||ot&&ot.domainHost))try{ae.host=ne.toASCII(ae.host.replace(Ce.PCT_ENCODED,he).toLowerCase())}catch(St){ae.error=ae.error||"Host's domain name can not be converted to ASCII via punycode: "+St}ve(ae,c)}else ve(ae,Ce);ot&&ot.parse&&ot.parse(ae,ee)}else ae.error=ae.error||"URI can not be parsed.";return ae}function _e(oe,ee){var ae=ee.iri!==!1?f:c,Ce=[];return oe.userinfo!==void 0&&(Ce.push(oe.userinfo),Ce.push("@")),oe.host!==void 0&&Ce.push(Ke(be(String(oe.host),ae),ae).replace(ae.IPV6ADDRESS,function(Se,ot,St){return"["+ot+(St?"%25"+St:"")+"]"})),(typeof oe.port=="number"||typeof oe.port=="string")&&(Ce.push(":"),Ce.push(String(oe.port))),Ce.length?Ce.join(""):void 0}var ke=/^\.\.?\//,ze=/^\/\.(\/|$)/,ct=/^\/\.\.(\/|$)/,Ot=/^\/?(?:.|\n)*?(?=\/|$)/;function We(oe){for(var ee=[];oe.length;)if(oe.match(ke))oe=oe.replace(ke,"");else if(oe.match(ze))oe=oe.replace(ze,"/");else if(oe.match(ct))oe=oe.replace(ct,"/"),ee.pop();else if(oe==="."||oe==="..")oe="";else{var ae=oe.match(Ot);if(ae){var Ce=ae[0];oe=oe.slice(Ce.length),ee.push(Ce)}else throw new Error("Unexpected dot segment condition")}return ee.join("")}function ge(oe){var ee=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ae=ee.iri?f:c,Ce=[],Se=ce[(ee.scheme||oe.scheme||"").toLowerCase()];if(Se&&Se.serialize&&Se.serialize(oe,ee),oe.host&&!ae.IPV6ADDRESS.test(oe.host)){if(ee.domainHost||Se&&Se.domainHost)try{oe.host=ee.iri?ne.toUnicode(oe.host):ne.toASCII(oe.host.replace(ae.PCT_ENCODED,he).toLowerCase())}catch(Ht){oe.error=oe.error||"Host's domain name can not be converted to "+(ee.iri?"Unicode":"ASCII")+" via punycode: "+Ht}}ve(oe,ae),ee.reference!=="suffix"&&oe.scheme&&(Ce.push(oe.scheme),Ce.push(":"));var ot=_e(oe,ee);if(ot!==void 0&&(ee.reference!=="suffix"&&Ce.push("//"),Ce.push(ot),oe.path&&oe.path.charAt(0)!=="/"&&Ce.push("/")),oe.path!==void 0){var St=oe.path;!ee.absolutePath&&(!Se||!Se.absolutePath)&&(St=We(St)),ot===void 0&&(St=St.replace(/^\/\//,"/%2F")),Ce.push(St)}return oe.query!==void 0&&(Ce.push("?"),Ce.push(oe.query)),oe.fragment!==void 0&&(Ce.push("#"),Ce.push(oe.fragment)),Ce.join("")}function ht(oe,ee){var ae=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},Ce=arguments[3],Se={};return Ce||(oe=it(ge(oe,ae),ae),ee=it(ge(ee,ae),ae)),ae=ae||{},!ae.tolerant&&ee.scheme?(Se.scheme=ee.scheme,Se.userinfo=ee.userinfo,Se.host=ee.host,Se.port=ee.port,Se.path=We(ee.path||""),Se.query=ee.query):(ee.userinfo!==void 0||ee.host!==void 0||ee.port!==void 0?(Se.userinfo=ee.userinfo,Se.host=ee.host,Se.port=ee.port,Se.path=We(ee.path||""),Se.query=ee.query):(ee.path?(ee.path.charAt(0)==="/"?Se.path=We(ee.path):((oe.userinfo!==void 0||oe.host!==void 0||oe.port!==void 0)&&!oe.path?Se.path="/"+ee.path:oe.path?Se.path=oe.path.slice(0,oe.path.lastIndexOf("/")+1)+ee.path:Se.path=ee.path,Se.path=We(Se.path)),Se.query=ee.query):(Se.path=oe.path,ee.query!==void 0?Se.query=ee.query:Se.query=oe.query),Se.userinfo=oe.userinfo,Se.host=oe.host,Se.port=oe.port),Se.scheme=oe.scheme),Se.fragment=ee.fragment,Se}function vt(oe,ee,ae){var Ce=u({scheme:"null"},ae);return ge(ht(it(oe,Ce),it(ee,Ce),Ce,!0),Ce)}function me(oe,ee){return typeof oe=="string"?oe=ge(it(oe,ee),ee):s(oe)==="object"&&(oe=it(ge(oe,ee),ee)),oe}function Ae(oe,ee,ae){return typeof oe=="string"?oe=ge(it(oe,ae),ae):s(oe)==="object"&&(oe=ge(oe,ae)),typeof ee=="string"?ee=ge(it(ee,ae),ae):s(ee)==="object"&&(ee=ge(ee,ae)),oe===ee}function He(oe,ee){return oe&&oe.toString().replace(!ee||!ee.iri?c.ESCAPE:f.ESCAPE,de)}function ut(oe,ee){return oe&&oe.toString().replace(!ee||!ee.iri?c.PCT_ENCODED:f.PCT_ENCODED,he)}var _t={scheme:"http",domainHost:!0,parse:function(ee,ae){return ee.host||(ee.error=ee.error||"HTTP URIs must have a host."),ee},serialize:function(ee,ae){var Ce=String(ee.scheme).toLowerCase()==="https";return(ee.port===(Ce?443:80)||ee.port==="")&&(ee.port=void 0),ee.path||(ee.path="/"),ee}},Ln={scheme:"https",domainHost:_t.domainHost,parse:_t.parse,serialize:_t.serialize};function Cr(oe){return typeof oe.secure=="boolean"?oe.secure:String(oe.scheme).toLowerCase()==="wss"}var Fn={scheme:"ws",domainHost:!0,parse:function(ee,ae){var Ce=ee;return Ce.secure=Cr(Ce),Ce.resourceName=(Ce.path||"/")+(Ce.query?"?"+Ce.query:""),Ce.path=void 0,Ce.query=void 0,Ce},serialize:function(ee,ae){if((ee.port===(Cr(ee)?443:80)||ee.port==="")&&(ee.port=void 0),typeof ee.secure=="boolean"&&(ee.scheme=ee.secure?"wss":"ws",ee.secure=void 0),ee.resourceName){var Ce=ee.resourceName.split("?"),Se=d(Ce,2),ot=Se[0],St=Se[1];ee.path=ot&&ot!=="/"?ot:void 0,ee.query=St,ee.resourceName=void 0}return ee.fragment=void 0,ee}},cr={scheme:"wss",domainHost:Fn.domainHost,parse:Fn.parse,serialize:Fn.serialize},gn={},An="[A-Za-z0-9\\-\\.\\_\\~\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]",nr="[0-9A-Fa-f]",rr=i(i("%[EFef]"+nr+"%"+nr+nr+"%"+nr+nr)+"|"+i("%[89A-Fa-f]"+nr+"%"+nr+nr)+"|"+i("%"+nr+nr)),zo="[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]",$i="[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\<\\>A-Z\\x5E-\\x7E]",In=r($i,'[\\"\\\\]'),Mi="[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]",Ar=new RegExp(An,"g"),gs=new RegExp(rr,"g"),pp=new RegExp(r("[^]",zo,"[\\.]",'[\\"]',In),"g"),fl=new RegExp(r("[^]",An,Mi),"g"),_d=fl;function xr(oe){var ee=he(oe);return ee.match(Ar)?ee:oe}var Ii={scheme:"mailto",parse:function(ee,ae){var Ce=ee,Se=Ce.to=Ce.path?Ce.path.split(","):[];if(Ce.path=void 0,Ce.query){for(var ot=!1,St={},Ht=Ce.query.split("&"),On=0,jn=Ht.length;On<jn;++On){var pn=Ht[On].split("=");switch(pn[0]){case"to":for(var ir=pn[1].split(","),Ir=0,Vt=ir.length;Ir<Vt;++Ir)Se.push(ir[Ir]);break;case"subject":Ce.subject=ut(pn[1],ae);break;case"body":Ce.body=ut(pn[1],ae);break;default:ot=!0,St[ut(pn[0],ae)]=ut(pn[1],ae);break}}ot&&(Ce.headers=St)}Ce.query=void 0;for(var sr=0,Hr=Se.length;sr<Hr;++sr){var Jn=Se[sr].split("@");if(Jn[0]=ut(Jn[0]),ae.unicodeSupport)Jn[1]=ut(Jn[1],ae).toLowerCase();else try{Jn[1]=ne.toASCII(ut(Jn[1],ae).toLowerCase())}catch(ki){Ce.error=Ce.error||"Email address's domain name can not be converted to ASCII via punycode: "+ki}Se[sr]=Jn.join("@")}return Ce},serialize:function(ee,ae){var Ce=ee,Se=a(ee.to);if(Se){for(var ot=0,St=Se.length;ot<St;++ot){var Ht=String(Se[ot]),On=Ht.lastIndexOf("@"),jn=Ht.slice(0,On).replace(gs,xr).replace(gs,o).replace(pp,de),pn=Ht.slice(On+1);try{pn=ae.iri?ne.toUnicode(pn):ne.toASCII(ut(pn,ae).toLowerCase())}catch(sr){Ce.error=Ce.error||"Email address's domain name can not be converted to "+(ae.iri?"Unicode":"ASCII")+" via punycode: "+sr}Se[ot]=jn+"@"+pn}Ce.path=Se.join(",")}var ir=ee.headers=ee.headers||{};ee.subject&&(ir.subject=ee.subject),ee.body&&(ir.body=ee.body);var Ir=[];for(var Vt in ir)ir[Vt]!==gn[Vt]&&Ir.push(Vt.replace(gs,xr).replace(gs,o).replace(fl,de)+"="+ir[Vt].replace(gs,xr).replace(gs,o).replace(_d,de));return Ir.length&&(Ce.query=Ir.join("&")),Ce}},Qr=/^([^\:]+)\:(.*)/,fu={scheme:"urn",parse:function(ee,ae){var Ce=ee.path&&ee.path.match(Qr),Se=ee;if(Ce){var ot=ae.scheme||Se.scheme||"urn",St=Ce[1].toLowerCase(),Ht=Ce[2],On=ot+":"+(ae.nid||St),jn=ce[On];Se.nid=St,Se.nss=Ht,Se.path=void 0,jn&&(Se=jn.parse(Se,ae))}else Se.error=Se.error||"URN can not be parsed.";return Se},serialize:function(ee,ae){var Ce=ae.scheme||ee.scheme||"urn",Se=ee.nid,ot=Ce+":"+(ae.nid||Se),St=ce[ot];St&&(ee=St.serialize(ee,ae));var Ht=ee,On=ee.nss;return Ht.path=(Se||ae.nid)+":"+On,Ht}},Ia=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/,ka={scheme:"urn:uuid",parse:function(ee,ae){var Ce=ee;return Ce.uuid=Ce.nss,Ce.nss=void 0,!ae.tolerant&&(!Ce.uuid||!Ce.uuid.match(Ia))&&(Ce.error=Ce.error||"UUID is not valid."),Ce},serialize:function(ee,ae){var Ce=ee;return Ce.nss=(ee.uuid||"").toLowerCase(),Ce}};ce[_t.scheme]=_t,ce[Ln.scheme]=Ln,ce[Fn.scheme]=Fn,ce[cr.scheme]=cr,ce[Ii.scheme]=Ii,ce[fu.scheme]=fu,ce[ka.scheme]=ka,n.SCHEMES=ce,n.pctEncChar=de,n.pctDecChars=he,n.parse=it,n.removeDotSegments=We,n.serialize=ge,n.resolveComponents=ht,n.resolve=vt,n.normalize=me,n.equal=Ae,n.escapeComponent=He,n.unescapeComponent=ut,Object.defineProperty(n,"__esModule",{value:!0})})})(CV,CV.exports);var bIt=CV.exports;Object.defineProperty(sJ,"__esModule",{value:!0});const iNe=bIt;iNe.code='require("ajv/dist/runtime/uri").default';sJ.default=iNe;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.CodeGen=e.Name=e.nil=e.stringify=e.str=e._=e.KeywordCxt=void 0;var t=zf;Object.defineProperty(e,"KeywordCxt",{enumerable:!0,get:function(){return t.KeywordCxt}});var n=Dn;Object.defineProperty(e,"_",{enumerable:!0,get:function(){return n._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return n.str}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return n.stringify}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return n.nil}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return n.Name}}),Object.defineProperty(e,"CodeGen",{enumerable:!0,get:function(){return n.CodeGen}});const r=Yk,i=DS,s=rb,o=Nu,a=Dn,u=Ao,l=ks,c=wt,f=vIt,d=sJ,h=(P,z)=>new RegExp(P,z);h.code="new RegExp";const p=["removeAdditional","useDefaults","coerceTypes"],m=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),g={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},y={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},v=200;function _(P){var z,W,j,q,G,ne,ce,de,he,ve,Ie,be,Ke,Ue,yt,it,_e,ke,ze,ct,Ot,We,ge,ht,vt;const me=P.strict,Ae=(z=P.code)===null||z===void 0?void 0:z.optimize,He=Ae===!0||Ae===void 0?1:Ae||0,ut=(j=(W=P.code)===null||W===void 0?void 0:W.regExp)!==null&&j!==void 0?j:h,_t=(q=P.uriResolver)!==null&&q!==void 0?q:d.default;return{strictSchema:(ne=(G=P.strictSchema)!==null&&G!==void 0?G:me)!==null&&ne!==void 0?ne:!0,strictNumbers:(de=(ce=P.strictNumbers)!==null&&ce!==void 0?ce:me)!==null&&de!==void 0?de:!0,strictTypes:(ve=(he=P.strictTypes)!==null&&he!==void 0?he:me)!==null&&ve!==void 0?ve:"log",strictTuples:(be=(Ie=P.strictTuples)!==null&&Ie!==void 0?Ie:me)!==null&&be!==void 0?be:"log",strictRequired:(Ue=(Ke=P.strictRequired)!==null&&Ke!==void 0?Ke:me)!==null&&Ue!==void 0?Ue:!1,code:P.code?{...P.code,optimize:He,regExp:ut}:{optimize:He,regExp:ut},loopRequired:(yt=P.loopRequired)!==null&&yt!==void 0?yt:v,loopEnum:(it=P.loopEnum)!==null&&it!==void 0?it:v,meta:(_e=P.meta)!==null&&_e!==void 0?_e:!0,messages:(ke=P.messages)!==null&&ke!==void 0?ke:!0,inlineRefs:(ze=P.inlineRefs)!==null&&ze!==void 0?ze:!0,schemaId:(ct=P.schemaId)!==null&&ct!==void 0?ct:"$id",addUsedSchema:(Ot=P.addUsedSchema)!==null&&Ot!==void 0?Ot:!0,validateSchema:(We=P.validateSchema)!==null&&We!==void 0?We:!0,validateFormats:(ge=P.validateFormats)!==null&&ge!==void 0?ge:!0,unicodeRegExp:(ht=P.unicodeRegExp)!==null&&ht!==void 0?ht:!0,int32range:(vt=P.int32range)!==null&&vt!==void 0?vt:!0,uriResolver:_t}}class w{constructor(z={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,z=this.opts={...z,..._(z)};const{es5:W,lines:j}=this.opts.code;this.scope=new a.ValueScope({scope:{},prefixes:m,es5:W,lines:j}),this.logger=O(z.logger);const q=z.validateFormats;z.validateFormats=!1,this.RULES=(0,s.getRules)(),E.call(this,g,z,"NOT SUPPORTED"),E.call(this,y,z,"DEPRECATED","warn"),this._metaOpts=k.call(this),z.formats&&C.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),z.keywords&&A.call(this,z.keywords),typeof z.meta=="object"&&this.addMetaSchema(z.meta),T.call(this),z.validateFormats=q}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){const{$data:z,meta:W,schemaId:j}=this.opts;let q=f;j==="id"&&(q={...f},q.id=q.$id,delete q.$id),W&&z&&this.addMetaSchema(q,q[j],!1)}defaultMeta(){const{meta:z,schemaId:W}=this.opts;return this.opts.defaultMeta=typeof z=="object"?z[W]||z:void 0}validate(z,W){let j;if(typeof z=="string"){if(j=this.getSchema(z),!j)throw new Error(`no schema with key or ref "${z}"`)}else j=this.compile(z);const q=j(W);return"$async"in j||(this.errors=j.errors),q}compile(z,W){const j=this._addSchema(z,W);return j.validate||this._compileSchemaEnv(j)}compileAsync(z,W){if(typeof this.opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");const{loadSchema:j}=this.opts;return q.call(this,z,W);async function q(ve,Ie){await G.call(this,ve.$schema);const be=this._addSchema(ve,Ie);return be.validate||ne.call(this,be)}async function G(ve){ve&&!this.getSchema(ve)&&await q.call(this,{$ref:ve},!0)}async function ne(ve){try{return this._compileSchemaEnv(ve)}catch(Ie){if(!(Ie instanceof i.default))throw Ie;return ce.call(this,Ie),await de.call(this,Ie.missingSchema),ne.call(this,ve)}}function ce({missingSchema:ve,missingRef:Ie}){if(this.refs[ve])throw new Error(`AnySchema ${ve} is loaded but ${Ie} cannot be resolved`)}async function de(ve){const Ie=await he.call(this,ve);this.refs[ve]||await G.call(this,Ie.$schema),this.refs[ve]||this.addSchema(Ie,ve,W)}async function he(ve){const Ie=this._loading[ve];if(Ie)return Ie;try{return await(this._loading[ve]=j(ve))}finally{delete this._loading[ve]}}}addSchema(z,W,j,q=this.opts.validateSchema){if(Array.isArray(z)){for(const ne of z)this.addSchema(ne,void 0,j,q);return this}let G;if(typeof z=="object"){const{schemaId:ne}=this.opts;if(G=z[ne],G!==void 0&&typeof G!="string")throw new Error(`schema ${ne} must be string`)}return W=(0,u.normalizeId)(W||G),this._checkUnique(W),this.schemas[W]=this._addSchema(z,j,W,q,!0),this}addMetaSchema(z,W,j=this.opts.validateSchema){return this.addSchema(z,W,!0,j),this}validateSchema(z,W){if(typeof z=="boolean")return!0;let j;if(j=z.$schema,j!==void 0&&typeof j!="string")throw new Error("$schema must be a string");if(j=j||this.opts.defaultMeta||this.defaultMeta(),!j)return this.logger.warn("meta-schema not available"),this.errors=null,!0;const q=this.validate(j,z);if(!q&&W){const G="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(G);else throw new Error(G)}return q}getSchema(z){let W;for(;typeof(W=S.call(this,z))=="string";)z=W;if(W===void 0){const{schemaId:j}=this.opts,q=new o.SchemaEnv({schema:{},schemaId:j});if(W=o.resolveSchema.call(this,q,z),!W)return;this.refs[z]=W}return W.validate||this._compileSchemaEnv(W)}removeSchema(z){if(z instanceof RegExp)return this._removeAllSchemas(this.schemas,z),this._removeAllSchemas(this.refs,z),this;switch(typeof z){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{const W=S.call(this,z);return typeof W=="object"&&this._cache.delete(W.schema),delete this.schemas[z],delete this.refs[z],this}case"object":{const W=z;this._cache.delete(W);let j=z[this.opts.schemaId];return j&&(j=(0,u.normalizeId)(j),delete this.schemas[j],delete this.refs[j]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(z){for(const W of z)this.addKeyword(W);return this}addKeyword(z,W){let j;if(typeof z=="string")j=z,typeof W=="object"&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),W.keyword=j);else if(typeof z=="object"&&W===void 0){if(W=z,j=W.keyword,Array.isArray(j)&&!j.length)throw new Error("addKeywords: keyword must be string or non-empty array")}else throw new Error("invalid addKeywords parameters");if($.call(this,j,W),!W)return(0,c.eachItem)(j,G=>F.call(this,G)),this;B.call(this,W);const q={...W,type:(0,l.getJSONTypes)(W.type),schemaType:(0,l.getJSONTypes)(W.schemaType)};return(0,c.eachItem)(j,q.type.length===0?G=>F.call(this,G,q):G=>q.type.forEach(ne=>F.call(this,G,q,ne))),this}getKeyword(z){const W=this.RULES.all[z];return typeof W=="object"?W.definition:!!W}removeKeyword(z){const{RULES:W}=this;delete W.keywords[z],delete W.all[z];for(const j of W.rules){const q=j.rules.findIndex(G=>G.keyword===z);q>=0&&j.rules.splice(q,1)}return this}addFormat(z,W){return typeof W=="string"&&(W=new RegExp(W)),this.formats[z]=W,this}errorsText(z=this.errors,{separator:W=", ",dataVar:j="data"}={}){return!z||z.length===0?"No errors":z.map(q=>`${j}${q.instancePath} ${q.message}`).reduce((q,G)=>q+W+G)}$dataMetaSchema(z,W){const j=this.RULES.all;z=JSON.parse(JSON.stringify(z));for(const q of W){const G=q.split("/").slice(1);let ne=z;for(const ce of G)ne=ne[ce];for(const ce in j){const de=j[ce];if(typeof de!="object")continue;const{$data:he}=de.definition,ve=ne[ce];he&&ve&&(ne[ce]=H(ve))}}return z}_removeAllSchemas(z,W){for(const j in z){const q=z[j];(!W||W.test(j))&&(typeof q=="string"?delete z[j]:q&&!q.meta&&(this._cache.delete(q.schema),delete z[j]))}}_addSchema(z,W,j,q=this.opts.validateSchema,G=this.opts.addUsedSchema){let ne;const{schemaId:ce}=this.opts;if(typeof z=="object")ne=z[ce];else{if(this.opts.jtd)throw new Error("schema must be object");if(typeof z!="boolean")throw new Error("schema must be object or boolean")}let de=this._cache.get(z);if(de!==void 0)return de;j=(0,u.normalizeId)(ne||j);const he=u.getSchemaRefs.call(this,z,j);return de=new o.SchemaEnv({schema:z,schemaId:ce,meta:W,baseId:j,localRefs:he}),this._cache.set(de.schema,de),G&&!j.startsWith("#")&&(j&&this._checkUnique(j),this.refs[j]=de),q&&this.validateSchema(z,!0),de}_checkUnique(z){if(this.schemas[z]||this.refs[z])throw new Error(`schema with key or id "${z}" already exists`)}_compileSchemaEnv(z){if(z.meta?this._compileMetaSchema(z):o.compileSchema.call(this,z),!z.validate)throw new Error("ajv implementation error");return z.validate}_compileMetaSchema(z){const W=this.opts;this.opts=this._metaOpts;try{o.compileSchema.call(this,z)}finally{this.opts=W}}}w.ValidationError=r.default,w.MissingRefError=i.default,e.default=w;function E(P,z,W,j="error"){for(const q in P){const G=q;G in z&&this.logger[j](`${W}: option ${q}. ${P[G]}`)}}function S(P){return P=(0,u.normalizeId)(P),this.schemas[P]||this.refs[P]}function T(){const P=this.opts.schemas;if(P)if(Array.isArray(P))this.addSchema(P);else for(const z in P)this.addSchema(P[z],z)}function C(){for(const P in this.opts.formats){const z=this.opts.formats[P];z&&this.addFormat(P,z)}}function A(P){if(Array.isArray(P)){this.addVocabulary(P);return}this.logger.warn("keywords option as map is deprecated, pass array");for(const z in P){const W=P[z];W.keyword||(W.keyword=z),this.addKeyword(W)}}function k(){const P={...this.opts};for(const z of p)delete P[z];return P}const N={log(){},warn(){},error(){}};function O(P){if(P===!1)return N;if(P===void 0)return console;if(P.log&&P.warn&&P.error)return P;throw new Error("logger must implement log, warn and error methods")}const D=/^[a-z_$][a-z0-9_$:-]*$/i;function $(P,z){const{RULES:W}=this;if((0,c.eachItem)(P,j=>{if(W.keywords[j])throw new Error(`Keyword ${j} is already defined`);if(!D.test(j))throw new Error(`Keyword ${j} has invalid name`)}),!!z&&z.$data&&!("code"in z||"validate"in z))throw new Error('$data keyword must have "code" or "validate" function')}function F(P,z,W){var j;const q=z==null?void 0:z.post;if(W&&q)throw new Error('keyword with "post" flag cannot have "type"');const{RULES:G}=this;let ne=q?G.post:G.rules.find(({type:de})=>de===W);if(ne||(ne={type:W,rules:[]},G.rules.push(ne)),G.keywords[P]=!0,!z)return;const ce={keyword:P,definition:{...z,type:(0,l.getJSONTypes)(z.type),schemaType:(0,l.getJSONTypes)(z.schemaType)}};z.before?M.call(this,ne,ce,z.before):ne.rules.push(ce),G.all[P]=ce,(j=z.implements)===null||j===void 0||j.forEach(de=>this.addKeyword(de))}function M(P,z,W){const j=P.rules.findIndex(q=>q.keyword===W);j>=0?P.rules.splice(j,0,z):(P.rules.push(z),this.logger.warn(`rule ${W} is not defined`))}function B(P){let{metaSchema:z}=P;z!==void 0&&(P.$data&&this.opts.$data&&(z=H(z)),P.validateSchema=this.compile(z,!0))}const U={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function H(P){return{anyOf:[P,U]}}})(CRe);var oJ={},aJ={},uJ={};Object.defineProperty(uJ,"__esModule",{value:!0});const _It={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};uJ.default=_It;var ib={};Object.defineProperty(ib,"__esModule",{value:!0});ib.callRef=ib.getValidate=void 0;const wIt=DS,Ide=Nn,_u=Dn,B_=np,kde=Nu,uP=wt,EIt={keyword:"$ref",schemaType:"string",code(e){const{gen:t,schema:n,it:r}=e,{baseId:i,schemaEnv:s,validateName:o,opts:a,self:u}=r,{root:l}=s;if((n==="#"||n==="#/")&&i===l.baseId)return f();const c=kde.resolveRef.call(u,l,i,n);if(c===void 0)throw new wIt.default(r.opts.uriResolver,i,n);if(c instanceof kde.SchemaEnv)return d(c);return h(c);function f(){if(s===l)return MD(e,o,s,s.$async);const p=t.scopeValue("root",{ref:l});return MD(e,(0,_u._)`${p}.validate`,l,l.$async)}function d(p){const m=sNe(e,p);MD(e,m,p,p.$async)}function h(p){const m=t.scopeValue("schema",a.code.source===!0?{ref:p,code:(0,_u.stringify)(p)}:{ref:p}),g=t.name("valid"),y=e.subschema({schema:p,dataTypes:[],schemaPath:_u.nil,topSchemaRef:m,errSchemaPath:n},g);e.mergeEvaluated(y),e.ok(g)}}};function sNe(e,t){const{gen:n}=e;return t.validate?n.scopeValue("validate",{ref:t.validate}):(0,_u._)`${n.scopeValue("wrapper",{ref:t})}.validate`}ib.getValidate=sNe;function MD(e,t,n,r){const{gen:i,it:s}=e,{allErrors:o,schemaEnv:a,opts:u}=s,l=u.passContext?B_.default.this:_u.nil;r?c():f();function c(){if(!a.$async)throw new Error("async schema referenced by sync schema");const p=i.let("valid");i.try(()=>{i.code((0,_u._)`await ${(0,Ide.callValidateCode)(e,t,l)}`),h(t),o||i.assign(p,!0)},m=>{i.if((0,_u._)`!(${m} instanceof ${s.ValidationError})`,()=>i.throw(m)),d(m),o||i.assign(p,!1)}),e.ok(p)}function f(){e.result((0,Ide.callValidateCode)(e,t,l),()=>h(t),()=>d(t))}function d(p){const m=(0,_u._)`${p}.errors`;i.assign(B_.default.vErrors,(0,_u._)`${B_.default.vErrors} === null ? ${m} : ${B_.default.vErrors}.concat(${m})`),i.assign(B_.default.errors,(0,_u._)`${B_.default.vErrors}.length`)}function h(p){var m;if(!s.opts.unevaluated)return;const g=(m=n==null?void 0:n.validate)===null||m===void 0?void 0:m.evaluated;if(s.props!==!0)if(g&&!g.dynamicProps)g.props!==void 0&&(s.props=uP.mergeEvaluated.props(i,g.props,s.props));else{const y=i.var("props",(0,_u._)`${p}.evaluated.props`);s.props=uP.mergeEvaluated.props(i,y,s.props,_u.Name)}if(s.items!==!0)if(g&&!g.dynamicItems)g.items!==void 0&&(s.items=uP.mergeEvaluated.items(i,g.items,s.items));else{const y=i.var("items",(0,_u._)`${p}.evaluated.items`);s.items=uP.mergeEvaluated.items(i,y,s.items,_u.Name)}}}ib.callRef=MD;ib.default=EIt;Object.defineProperty(aJ,"__esModule",{value:!0});const xIt=uJ,SIt=ib,TIt=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",xIt.default,SIt.default];aJ.default=TIt;var lJ={},cJ={};Object.defineProperty(cJ,"__esModule",{value:!0});const U$=Dn,wg=U$.operators,z$={maximum:{okStr:"<=",ok:wg.LTE,fail:wg.GT},minimum:{okStr:">=",ok:wg.GTE,fail:wg.LT},exclusiveMaximum:{okStr:"<",ok:wg.LT,fail:wg.GTE},exclusiveMinimum:{okStr:">",ok:wg.GT,fail:wg.LTE}},CIt={message:({keyword:e,schemaCode:t})=>(0,U$.str)`must be ${z$[e].okStr} ${t}`,params:({keyword:e,schemaCode:t})=>(0,U$._)`{comparison: ${z$[e].okStr}, limit: ${t}}`},AIt={keyword:Object.keys(z$),type:"number",schemaType:"number",$data:!0,error:CIt,code(e){const{keyword:t,data:n,schemaCode:r}=e;e.fail$data((0,U$._)`${n} ${z$[t].fail} ${r} || isNaN(${n})`)}};cJ.default=AIt;var fJ={};Object.defineProperty(fJ,"__esModule",{value:!0});const jC=Dn,IIt={message:({schemaCode:e})=>(0,jC.str)`must be multiple of ${e}`,params:({schemaCode:e})=>(0,jC._)`{multipleOf: ${e}}`},kIt={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:IIt,code(e){const{gen:t,data:n,schemaCode:r,it:i}=e,s=i.opts.multipleOfPrecision,o=t.let("res"),a=s?(0,jC._)`Math.abs(Math.round(${o}) - ${o}) > 1e-${s}`:(0,jC._)`${o} !== parseInt(${o})`;e.fail$data((0,jC._)`(${r} === 0 || (${o} = ${n}/${r}, ${a}))`)}};fJ.default=kIt;var dJ={},hJ={};Object.defineProperty(hJ,"__esModule",{value:!0});function oNe(e){const t=e.length;let n=0,r=0,i;for(;r<t;)n++,i=e.charCodeAt(r++),i>=55296&&i<=56319&&r<t&&(i=e.charCodeAt(r),(i&64512)===56320&&r++);return n}hJ.default=oNe;oNe.code='require("ajv/dist/runtime/ucs2length").default';Object.defineProperty(dJ,"__esModule",{value:!0});const Gv=Dn,RIt=wt,NIt=hJ,PIt={message({keyword:e,schemaCode:t}){const n=e==="maxLength"?"more":"fewer";return(0,Gv.str)`must NOT have ${n} than ${t} characters`},params:({schemaCode:e})=>(0,Gv._)`{limit: ${e}}`},DIt={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:PIt,code(e){const{keyword:t,data:n,schemaCode:r,it:i}=e,s=t==="maxLength"?Gv.operators.GT:Gv.operators.LT,o=i.opts.unicode===!1?(0,Gv._)`${n}.length`:(0,Gv._)`${(0,RIt.useFunc)(e.gen,NIt.default)}(${n})`;e.fail$data((0,Gv._)`${o} ${s} ${r}`)}};dJ.default=DIt;var pJ={};Object.defineProperty(pJ,"__esModule",{value:!0});const OIt=Nn,V$=Dn,$It={message:({schemaCode:e})=>(0,V$.str)`must match pattern "${e}"`,params:({schemaCode:e})=>(0,V$._)`{pattern: ${e}}`},MIt={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:$It,code(e){const{data:t,$data:n,schema:r,schemaCode:i,it:s}=e,o=s.opts.unicodeRegExp?"u":"",a=n?(0,V$._)`(new RegExp(${i}, ${o}))`:(0,OIt.usePattern)(e,r);e.fail$data((0,V$._)`!${a}.test(${t})`)}};pJ.default=MIt;var mJ={};Object.defineProperty(mJ,"__esModule",{value:!0});const BC=Dn,LIt={message({keyword:e,schemaCode:t}){const n=e==="maxProperties"?"more":"fewer";return(0,BC.str)`must NOT have ${n} than ${t} properties`},params:({schemaCode:e})=>(0,BC._)`{limit: ${e}}`},FIt={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:LIt,code(e){const{keyword:t,data:n,schemaCode:r}=e,i=t==="maxProperties"?BC.operators.GT:BC.operators.LT;e.fail$data((0,BC._)`Object.keys(${n}).length ${i} ${r}`)}};mJ.default=FIt;var gJ={};Object.defineProperty(gJ,"__esModule",{value:!0});const zT=Nn,UC=Dn,jIt=wt,BIt={message:({params:{missingProperty:e}})=>(0,UC.str)`must have required property '${e}'`,params:({params:{missingProperty:e}})=>(0,UC._)`{missingProperty: ${e}}`},UIt={keyword:"required",type:"object",schemaType:"array",$data:!0,error:BIt,code(e){const{gen:t,schema:n,schemaCode:r,data:i,$data:s,it:o}=e,{opts:a}=o;if(!s&&n.length===0)return;const u=n.length>=a.loopRequired;if(o.allErrors?l():c(),a.strictRequired){const h=e.parentSchema.properties,{definedProperties:p}=e.it;for(const m of n)if((h==null?void 0:h[m])===void 0&&!p.has(m)){const g=o.schemaEnv.baseId+o.errSchemaPath,y=`required property "${m}" is not defined at "${g}" (strictRequired)`;(0,jIt.checkStrictMode)(o,y,o.opts.strictRequired)}}function l(){if(u||s)e.block$data(UC.nil,f);else for(const h of n)(0,zT.checkReportMissingProp)(e,h)}function c(){const h=t.let("missing");if(u||s){const p=t.let("valid",!0);e.block$data(p,()=>d(h,p)),e.ok(p)}else t.if((0,zT.checkMissingProp)(e,n,h)),(0,zT.reportMissingProp)(e,h),t.else()}function f(){t.forOf("prop",r,h=>{e.setParams({missingProperty:h}),t.if((0,zT.noPropertyInData)(t,i,h,a.ownProperties),()=>e.error())})}function d(h,p){e.setParams({missingProperty:h}),t.forOf(h,r,()=>{t.assign(p,(0,zT.propertyInData)(t,i,h,a.ownProperties)),t.if((0,UC.not)(p),()=>{e.error(),t.break()})},UC.nil)}}};gJ.default=UIt;var yJ={};Object.defineProperty(yJ,"__esModule",{value:!0});const zC=Dn,zIt={message({keyword:e,schemaCode:t}){const n=e==="maxItems"?"more":"fewer";return(0,zC.str)`must NOT have ${n} than ${t} items`},params:({schemaCode:e})=>(0,zC._)`{limit: ${e}}`},VIt={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:zIt,code(e){const{keyword:t,data:n,schemaCode:r}=e,i=t==="maxItems"?zC.operators.GT:zC.operators.LT;e.fail$data((0,zC._)`${n}.length ${i} ${r}`)}};yJ.default=VIt;var vJ={},Kk={};Object.defineProperty(Kk,"__esModule",{value:!0});const aNe=cK;aNe.code='require("ajv/dist/runtime/equal").default';Kk.default=aNe;Object.defineProperty(vJ,"__esModule",{value:!0});const T9=ks,wo=Dn,HIt=wt,qIt=Kk,WIt={message:({params:{i:e,j:t}})=>(0,wo.str)`must NOT have duplicate items (items ## ${t} and ${e} are identical)`,params:({params:{i:e,j:t}})=>(0,wo._)`{i: ${e}, j: ${t}}`},GIt={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:WIt,code(e){const{gen:t,data:n,$data:r,schema:i,parentSchema:s,schemaCode:o,it:a}=e;if(!r&&!i)return;const u=t.let("valid"),l=s.items?(0,T9.getSchemaTypes)(s.items):[];e.block$data(u,c,(0,wo._)`${o} === false`),e.ok(u);function c(){const p=t.let("i",(0,wo._)`${n}.length`),m=t.let("j");e.setParams({i:p,j:m}),t.assign(u,!0),t.if((0,wo._)`${p} > 1`,()=>(f()?d:h)(p,m))}function f(){return l.length>0&&!l.some(p=>p==="object"||p==="array")}function d(p,m){const g=t.name("item"),y=(0,T9.checkDataTypes)(l,g,a.opts.strictNumbers,T9.DataType.Wrong),v=t.const("indices",(0,wo._)`{}`);t.for((0,wo._)`;${p}--;`,()=>{t.let(g,(0,wo._)`${n}[${p}]`),t.if(y,(0,wo._)`continue`),l.length>1&&t.if((0,wo._)`typeof ${g} == "string"`,(0,wo._)`${g} += "_"`),t.if((0,wo._)`typeof ${v}[${g}] == "number"`,()=>{t.assign(m,(0,wo._)`${v}[${g}]`),e.error(),t.assign(u,!1).break()}).code((0,wo._)`${v}[${g}] = ${p}`)})}function h(p,m){const g=(0,HIt.useFunc)(t,qIt.default),y=t.name("outer");t.label(y).for((0,wo._)`;${p}--;`,()=>t.for((0,wo._)`${m} = ${p}; ${m}--;`,()=>t.if((0,wo._)`${g}(${n}[${p}], ${n}[${m}])`,()=>{e.error(),t.assign(u,!1).break(y)})))}}};vJ.default=GIt;var bJ={};Object.defineProperty(bJ,"__esModule",{value:!0});const AV=Dn,YIt=wt,KIt=Kk,XIt={message:"must be equal to constant",params:({schemaCode:e})=>(0,AV._)`{allowedValue: ${e}}`},QIt={keyword:"const",$data:!0,error:XIt,code(e){const{gen:t,data:n,$data:r,schemaCode:i,schema:s}=e;r||s&&typeof s=="object"?e.fail$data((0,AV._)`!${(0,YIt.useFunc)(t,KIt.default)}(${n}, ${i})`):e.fail((0,AV._)`${s} !== ${n}`)}};bJ.default=QIt;var _J={};Object.defineProperty(_J,"__esModule",{value:!0});const B2=Dn,JIt=wt,ZIt=Kk,ekt={message:"must be equal to one of the allowed values",params:({schemaCode:e})=>(0,B2._)`{allowedValues: ${e}}`},tkt={keyword:"enum",schemaType:"array",$data:!0,error:ekt,code(e){const{gen:t,data:n,$data:r,schema:i,schemaCode:s,it:o}=e;if(!r&&i.length===0)throw new Error("enum must have non-empty array");const a=i.length>=o.opts.loopEnum;let u;const l=()=>u??(u=(0,JIt.useFunc)(t,ZIt.default));let c;if(a||r)c=t.let("valid"),e.block$data(c,f);else{if(!Array.isArray(i))throw new Error("ajv implementation error");const h=t.const("vSchema",s);c=(0,B2.or)(...i.map((p,m)=>d(h,m)))}e.pass(c);function f(){t.assign(c,!1),t.forOf("v",s,h=>t.if((0,B2._)`${l()}(${n}, ${h})`,()=>t.assign(c,!0).break()))}function d(h,p){const m=i[p];return typeof m=="object"&&m!==null?(0,B2._)`${l()}(${n}, ${h}[${p}])`:(0,B2._)`${n} === ${m}`}}};_J.default=tkt;Object.defineProperty(lJ,"__esModule",{value:!0});const nkt=cJ,rkt=fJ,ikt=dJ,skt=pJ,okt=mJ,akt=gJ,ukt=yJ,lkt=vJ,ckt=bJ,fkt=_J,dkt=[nkt.default,rkt.default,ikt.default,skt.default,okt.default,akt.default,ukt.default,lkt.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},ckt.default,fkt.default];lJ.default=dkt;var wJ={},OS={};Object.defineProperty(OS,"__esModule",{value:!0});OS.validateAdditionalItems=void 0;const Yv=Dn,IV=wt,hkt={message:({params:{len:e}})=>(0,Yv.str)`must NOT have more than ${e} items`,params:({params:{len:e}})=>(0,Yv._)`{limit: ${e}}`},pkt={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:hkt,code(e){const{parentSchema:t,it:n}=e,{items:r}=t;if(!Array.isArray(r)){(0,IV.checkStrictMode)(n,'"additionalItems" is ignored when "items" is not an array of schemas');return}uNe(e,r)}};function uNe(e,t){const{gen:n,schema:r,data:i,keyword:s,it:o}=e;o.items=!0;const a=n.const("len",(0,Yv._)`${i}.length`);if(r===!1)e.setParams({len:t.length}),e.pass((0,Yv._)`${a} <= ${t.length}`);else if(typeof r=="object"&&!(0,IV.alwaysValidSchema)(o,r)){const l=n.var("valid",(0,Yv._)`${a} <= ${t.length}`);n.if((0,Yv.not)(l),()=>u(l)),e.ok(l)}function u(l){n.forRange("i",t.length,a,c=>{e.subschema({keyword:s,dataProp:c,dataPropType:IV.Type.Num},l),o.allErrors||n.if((0,Yv.not)(l),()=>n.break())})}}OS.validateAdditionalItems=uNe;OS.default=pkt;var EJ={},$S={};Object.defineProperty($S,"__esModule",{value:!0});$S.validateTuple=void 0;const Rde=Dn,LD=wt,mkt=Nn,gkt={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(e){const{schema:t,it:n}=e;if(Array.isArray(t))return lNe(e,"additionalItems",t);n.items=!0,!(0,LD.alwaysValidSchema)(n,t)&&e.ok((0,mkt.validateArray)(e))}};function lNe(e,t,n=e.schema){const{gen:r,parentSchema:i,data:s,keyword:o,it:a}=e;c(i),a.opts.unevaluated&&n.length&&a.items!==!0&&(a.items=LD.mergeEvaluated.items(r,n.length,a.items));const u=r.name("valid"),l=r.const("len",(0,Rde._)`${s}.length`);n.forEach((f,d)=>{(0,LD.alwaysValidSchema)(a,f)||(r.if((0,Rde._)`${l} > ${d}`,()=>e.subschema({keyword:o,schemaProp:d,dataProp:d},u)),e.ok(u))});function c(f){const{opts:d,errSchemaPath:h}=a,p=n.length,m=p===f.minItems&&(p===f.maxItems||f[t]===!1);if(d.strictTuples&&!m){const g=`"${o}" is ${p}-tuple, but minItems or maxItems/${t} are not specified or different at path "${h}"`;(0,LD.checkStrictMode)(a,g,d.strictTuples)}}}$S.validateTuple=lNe;$S.default=gkt;Object.defineProperty(EJ,"__esModule",{value:!0});const ykt=$S,vkt={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:e=>(0,ykt.validateTuple)(e,"items")};EJ.default=vkt;var xJ={};Object.defineProperty(xJ,"__esModule",{value:!0});const Nde=Dn,bkt=wt,_kt=Nn,wkt=OS,Ekt={message:({params:{len:e}})=>(0,Nde.str)`must NOT have more than ${e} items`,params:({params:{len:e}})=>(0,Nde._)`{limit: ${e}}`},xkt={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:Ekt,code(e){const{schema:t,parentSchema:n,it:r}=e,{prefixItems:i}=n;r.items=!0,!(0,bkt.alwaysValidSchema)(r,t)&&(i?(0,wkt.validateAdditionalItems)(e,i):e.ok((0,_kt.validateArray)(e)))}};xJ.default=xkt;var SJ={};Object.defineProperty(SJ,"__esModule",{value:!0});const hc=Dn,lP=wt,Skt={message:({params:{min:e,max:t}})=>t===void 0?(0,hc.str)`must contain at least ${e} valid item(s)`:(0,hc.str)`must contain at least ${e} and no more than ${t} valid item(s)`,params:({params:{min:e,max:t}})=>t===void 0?(0,hc._)`{minContains: ${e}}`:(0,hc._)`{minContains: ${e}, maxContains: ${t}}`},Tkt={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:Skt,code(e){const{gen:t,schema:n,parentSchema:r,data:i,it:s}=e;let o,a;const{minContains:u,maxContains:l}=r;s.opts.next?(o=u===void 0?1:u,a=l):o=1;const c=t.const("len",(0,hc._)`${i}.length`);if(e.setParams({min:o,max:a}),a===void 0&&o===0){(0,lP.checkStrictMode)(s,'"minContains" == 0 without "maxContains": "contains" keyword ignored');return}if(a!==void 0&&o>a){(0,lP.checkStrictMode)(s,'"minContains" > "maxContains" is always invalid'),e.fail();return}if((0,lP.alwaysValidSchema)(s,n)){let m=(0,hc._)`${c} >= ${o}`;a!==void 0&&(m=(0,hc._)`${m} && ${c} <= ${a}`),e.pass(m);return}s.items=!0;const f=t.name("valid");a===void 0&&o===1?h(f,()=>t.if(f,()=>t.break())):o===0?(t.let(f,!0),a!==void 0&&t.if((0,hc._)`${i}.length > 0`,d)):(t.let(f,!1),d()),e.result(f,()=>e.reset());function d(){const m=t.name("_valid"),g=t.let("count",0);h(m,()=>t.if(m,()=>p(g)))}function h(m,g){t.forRange("i",0,c,y=>{e.subschema({keyword:"contains",dataProp:y,dataPropType:lP.Type.Num,compositeRule:!0},m),g()})}function p(m){t.code((0,hc._)`${m}++`),a===void 0?t.if((0,hc._)`${m} >= ${o}`,()=>t.assign(f,!0).break()):(t.if((0,hc._)`${m} > ${a}`,()=>t.assign(f,!1).break()),o===1?t.assign(f,!0):t.if((0,hc._)`${m} >= ${o}`,()=>t.assign(f,!0)))}}};SJ.default=Tkt;var cNe={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.validateSchemaDeps=e.validatePropertyDeps=e.error=void 0;const t=Dn,n=wt,r=Nn;e.error={message:({params:{property:u,depsCount:l,deps:c}})=>{const f=l===1?"property":"properties";return(0,t.str)`must have ${f} ${c} when property ${u} is present`},params:({params:{property:u,depsCount:l,deps:c,missingProperty:f}})=>(0,t._)`{property: ${u},
    missingProperty: ${f},
    depsCount: ${l},
    deps: ${c}}`};const i={keyword:"dependencies",type:"object",schemaType:"object",error:e.error,code(u){const[l,c]=s(u);o(u,l),a(u,c)}};function s({schema:u}){const l={},c={};for(const f in u){if(f==="__proto__")continue;const d=Array.isArray(u[f])?l:c;d[f]=u[f]}return[l,c]}function o(u,l=u.schema){const{gen:c,data:f,it:d}=u;if(Object.keys(l).length===0)return;const h=c.let("missing");for(const p in l){const m=l[p];if(m.length===0)continue;const g=(0,r.propertyInData)(c,f,p,d.opts.ownProperties);u.setParams({property:p,depsCount:m.length,deps:m.join(", ")}),d.allErrors?c.if(g,()=>{for(const y of m)(0,r.checkReportMissingProp)(u,y)}):(c.if((0,t._)`${g} && (${(0,r.checkMissingProp)(u,m,h)})`),(0,r.reportMissingProp)(u,h),c.else())}}e.validatePropertyDeps=o;function a(u,l=u.schema){const{gen:c,data:f,keyword:d,it:h}=u,p=c.name("valid");for(const m in l)(0,n.alwaysValidSchema)(h,l[m])||(c.if((0,r.propertyInData)(c,f,m,h.opts.ownProperties),()=>{const g=u.subschema({keyword:d,schemaProp:m},p);u.mergeValidEvaluated(g,p)},()=>c.var(p,!0)),u.ok(p))}e.validateSchemaDeps=a,e.default=i})(cNe);var TJ={};Object.defineProperty(TJ,"__esModule",{value:!0});const fNe=Dn,Ckt=wt,Akt={message:"property name must be valid",params:({params:e})=>(0,fNe._)`{propertyName: ${e.propertyName}}`},Ikt={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:Akt,code(e){const{gen:t,schema:n,data:r,it:i}=e;if((0,Ckt.alwaysValidSchema)(i,n))return;const s=t.name("valid");t.forIn("key",r,o=>{e.setParams({propertyName:o}),e.subschema({keyword:"propertyNames",data:o,dataTypes:["string"],propertyName:o,compositeRule:!0},s),t.if((0,fNe.not)(s),()=>{e.error(!0),i.allErrors||t.break()})}),e.ok(s)}};TJ.default=Ikt;var w4={};Object.defineProperty(w4,"__esModule",{value:!0});const cP=Nn,lf=Dn,kkt=np,fP=wt,Rkt={message:"must NOT have additional properties",params:({params:e})=>(0,lf._)`{additionalProperty: ${e.additionalProperty}}`},Nkt={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:Rkt,code(e){const{gen:t,schema:n,parentSchema:r,data:i,errsCount:s,it:o}=e;if(!s)throw new Error("ajv implementation error");const{allErrors:a,opts:u}=o;if(o.props=!0,u.removeAdditional!=="all"&&(0,fP.alwaysValidSchema)(o,n))return;const l=(0,cP.allSchemaProperties)(r.properties),c=(0,cP.allSchemaProperties)(r.patternProperties);f(),e.ok((0,lf._)`${s} === ${kkt.default.errors}`);function f(){t.forIn("key",i,g=>{!l.length&&!c.length?p(g):t.if(d(g),()=>p(g))})}function d(g){let y;if(l.length>8){const v=(0,fP.schemaRefOrVal)(o,r.properties,"properties");y=(0,cP.isOwnProperty)(t,v,g)}else l.length?y=(0,lf.or)(...l.map(v=>(0,lf._)`${g} === ${v}`)):y=lf.nil;return c.length&&(y=(0,lf.or)(y,...c.map(v=>(0,lf._)`${(0,cP.usePattern)(e,v)}.test(${g})`))),(0,lf.not)(y)}function h(g){t.code((0,lf._)`delete ${i}[${g}]`)}function p(g){if(u.removeAdditional==="all"||u.removeAdditional&&n===!1){h(g);return}if(n===!1){e.setParams({additionalProperty:g}),e.error(),a||t.break();return}if(typeof n=="object"&&!(0,fP.alwaysValidSchema)(o,n)){const y=t.name("valid");u.removeAdditional==="failing"?(m(g,y,!1),t.if((0,lf.not)(y),()=>{e.reset(),h(g)})):(m(g,y),a||t.if((0,lf.not)(y),()=>t.break()))}}function m(g,y,v){const _={keyword:"additionalProperties",dataProp:g,dataPropType:fP.Type.Str};v===!1&&Object.assign(_,{compositeRule:!0,createErrors:!1,allErrors:!1}),e.subschema(_,y)}}};w4.default=Nkt;var CJ={};Object.defineProperty(CJ,"__esModule",{value:!0});const Pkt=zf,Pde=Nn,C9=wt,Dde=w4,Dkt={keyword:"properties",type:"object",schemaType:"object",code(e){const{gen:t,schema:n,parentSchema:r,data:i,it:s}=e;s.opts.removeAdditional==="all"&&r.additionalProperties===void 0&&Dde.default.code(new Pkt.KeywordCxt(s,Dde.default,"additionalProperties"));const o=(0,Pde.allSchemaProperties)(n);for(const f of o)s.definedProperties.add(f);s.opts.unevaluated&&o.length&&s.props!==!0&&(s.props=C9.mergeEvaluated.props(t,(0,C9.toHash)(o),s.props));const a=o.filter(f=>!(0,C9.alwaysValidSchema)(s,n[f]));if(a.length===0)return;const u=t.name("valid");for(const f of a)l(f)?c(f):(t.if((0,Pde.propertyInData)(t,i,f,s.opts.ownProperties)),c(f),s.allErrors||t.else().var(u,!0),t.endIf()),e.it.definedProperties.add(f),e.ok(u);function l(f){return s.opts.useDefaults&&!s.compositeRule&&n[f].default!==void 0}function c(f){e.subschema({keyword:"properties",schemaProp:f,dataProp:f},u)}}};CJ.default=Dkt;var AJ={};Object.defineProperty(AJ,"__esModule",{value:!0});const Ode=Nn,dP=Dn,$de=wt,Mde=wt,Okt={keyword:"patternProperties",type:"object",schemaType:"object",code(e){const{gen:t,schema:n,data:r,parentSchema:i,it:s}=e,{opts:o}=s,a=(0,Ode.allSchemaProperties)(n),u=a.filter(m=>(0,$de.alwaysValidSchema)(s,n[m]));if(a.length===0||u.length===a.length&&(!s.opts.unevaluated||s.props===!0))return;const l=o.strictSchema&&!o.allowMatchingProperties&&i.properties,c=t.name("valid");s.props!==!0&&!(s.props instanceof dP.Name)&&(s.props=(0,Mde.evaluatedPropsToName)(t,s.props));const{props:f}=s;d();function d(){for(const m of a)l&&h(m),s.allErrors?p(m):(t.var(c,!0),p(m),t.if(c))}function h(m){for(const g in l)new RegExp(m).test(g)&&(0,$de.checkStrictMode)(s,`property ${g} matches pattern ${m} (use allowMatchingProperties)`)}function p(m){t.forIn("key",r,g=>{t.if((0,dP._)`${(0,Ode.usePattern)(e,m)}.test(${g})`,()=>{const y=u.includes(m);y||e.subschema({keyword:"patternProperties",schemaProp:m,dataProp:g,dataPropType:Mde.Type.Str},c),s.opts.unevaluated&&f!==!0?t.assign((0,dP._)`${f}[${g}]`,!0):!y&&!s.allErrors&&t.if((0,dP.not)(c),()=>t.break())})})}}};AJ.default=Okt;var IJ={};Object.defineProperty(IJ,"__esModule",{value:!0});const $kt=wt,Mkt={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(e){const{gen:t,schema:n,it:r}=e;if((0,$kt.alwaysValidSchema)(r,n)){e.fail();return}const i=t.name("valid");e.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},i),e.failResult(i,()=>e.reset(),()=>e.error())},error:{message:"must NOT be valid"}};IJ.default=Mkt;var kJ={};Object.defineProperty(kJ,"__esModule",{value:!0});const Lkt=Nn,Fkt={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:Lkt.validateUnion,error:{message:"must match a schema in anyOf"}};kJ.default=Fkt;var RJ={};Object.defineProperty(RJ,"__esModule",{value:!0});const FD=Dn,jkt=wt,Bkt={message:"must match exactly one schema in oneOf",params:({params:e})=>(0,FD._)`{passingSchemas: ${e.passing}}`},Ukt={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:Bkt,code(e){const{gen:t,schema:n,parentSchema:r,it:i}=e;if(!Array.isArray(n))throw new Error("ajv implementation error");if(i.opts.discriminator&&r.discriminator)return;const s=n,o=t.let("valid",!1),a=t.let("passing",null),u=t.name("_valid");e.setParams({passing:a}),t.block(l),e.result(o,()=>e.reset(),()=>e.error(!0));function l(){s.forEach((c,f)=>{let d;(0,jkt.alwaysValidSchema)(i,c)?t.var(u,!0):d=e.subschema({keyword:"oneOf",schemaProp:f,compositeRule:!0},u),f>0&&t.if((0,FD._)`${u} && ${o}`).assign(o,!1).assign(a,(0,FD._)`[${a}, ${f}]`).else(),t.if(u,()=>{t.assign(o,!0),t.assign(a,f),d&&e.mergeEvaluated(d,FD.Name)})})}}};RJ.default=Ukt;var NJ={};Object.defineProperty(NJ,"__esModule",{value:!0});const zkt=wt,Vkt={keyword:"allOf",schemaType:"array",code(e){const{gen:t,schema:n,it:r}=e;if(!Array.isArray(n))throw new Error("ajv implementation error");const i=t.name("valid");n.forEach((s,o)=>{if((0,zkt.alwaysValidSchema)(r,s))return;const a=e.subschema({keyword:"allOf",schemaProp:o},i);e.ok(i),e.mergeEvaluated(a)})}};NJ.default=Vkt;var PJ={};Object.defineProperty(PJ,"__esModule",{value:!0});const H$=Dn,dNe=wt,Hkt={message:({params:e})=>(0,H$.str)`must match "${e.ifClause}" schema`,params:({params:e})=>(0,H$._)`{failingKeyword: ${e.ifClause}}`},qkt={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:Hkt,code(e){const{gen:t,parentSchema:n,it:r}=e;n.then===void 0&&n.else===void 0&&(0,dNe.checkStrictMode)(r,'"if" without "then" and "else" is ignored');const i=Lde(r,"then"),s=Lde(r,"else");if(!i&&!s)return;const o=t.let("valid",!0),a=t.name("_valid");if(u(),e.reset(),i&&s){const c=t.let("ifClause");e.setParams({ifClause:c}),t.if(a,l("then",c),l("else",c))}else i?t.if(a,l("then")):t.if((0,H$.not)(a),l("else"));e.pass(o,()=>e.error(!0));function u(){const c=e.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},a);e.mergeEvaluated(c)}function l(c,f){return()=>{const d=e.subschema({keyword:c},a);t.assign(o,a),e.mergeValidEvaluated(d,o),f?t.assign(f,(0,H$._)`${c}`):e.setParams({ifClause:c})}}}};function Lde(e,t){const n=e.schema[t];return n!==void 0&&!(0,dNe.alwaysValidSchema)(e,n)}PJ.default=qkt;var DJ={};Object.defineProperty(DJ,"__esModule",{value:!0});const Wkt=wt,Gkt={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:e,parentSchema:t,it:n}){t.if===void 0&&(0,Wkt.checkStrictMode)(n,`"${e}" without "if" is ignored`)}};DJ.default=Gkt;Object.defineProperty(wJ,"__esModule",{value:!0});const Ykt=OS,Kkt=EJ,Xkt=$S,Qkt=xJ,Jkt=SJ,Zkt=cNe,eRt=TJ,tRt=w4,nRt=CJ,rRt=AJ,iRt=IJ,sRt=kJ,oRt=RJ,aRt=NJ,uRt=PJ,lRt=DJ;function cRt(e=!1){const t=[iRt.default,sRt.default,oRt.default,aRt.default,uRt.default,lRt.default,eRt.default,tRt.default,Zkt.default,nRt.default,rRt.default];return e?t.push(Kkt.default,Qkt.default):t.push(Ykt.default,Xkt.default),t.push(Jkt.default),t}wJ.default=cRt;var OJ={},$J={};Object.defineProperty($J,"__esModule",{value:!0});const ts=Dn,fRt={message:({schemaCode:e})=>(0,ts.str)`must match format "${e}"`,params:({schemaCode:e})=>(0,ts._)`{format: ${e}}`},dRt={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:fRt,code(e,t){const{gen:n,data:r,$data:i,schema:s,schemaCode:o,it:a}=e,{opts:u,errSchemaPath:l,schemaEnv:c,self:f}=a;if(!u.validateFormats)return;i?d():h();function d(){const p=n.scopeValue("formats",{ref:f.formats,code:u.code.formats}),m=n.const("fDef",(0,ts._)`${p}[${o}]`),g=n.let("fType"),y=n.let("format");n.if((0,ts._)`typeof ${m} == "object" && !(${m} instanceof RegExp)`,()=>n.assign(g,(0,ts._)`${m}.type || "string"`).assign(y,(0,ts._)`${m}.validate`),()=>n.assign(g,(0,ts._)`"string"`).assign(y,m)),e.fail$data((0,ts.or)(v(),_()));function v(){return u.strictSchema===!1?ts.nil:(0,ts._)`${o} && !${y}`}function _(){const w=c.$async?(0,ts._)`(${m}.async ? await ${y}(${r}) : ${y}(${r}))`:(0,ts._)`${y}(${r})`,E=(0,ts._)`(typeof ${y} == "function" ? ${w} : ${y}.test(${r}))`;return(0,ts._)`${y} && ${y} !== true && ${g} === ${t} && !${E}`}}function h(){const p=f.formats[s];if(!p){v();return}if(p===!0)return;const[m,g,y]=_(p);m===t&&e.pass(w());function v(){if(u.strictSchema===!1){f.logger.warn(E());return}throw new Error(E());function E(){return`unknown format "${s}" ignored in schema at path "${l}"`}}function _(E){const S=E instanceof RegExp?(0,ts.regexpCode)(E):u.code.formats?(0,ts._)`${u.code.formats}${(0,ts.getProperty)(s)}`:void 0,T=n.scopeValue("formats",{key:s,ref:E,code:S});return typeof E=="object"&&!(E instanceof RegExp)?[E.type||"string",E.validate,(0,ts._)`${T}.validate`]:["string",E,T]}function w(){if(typeof p=="object"&&!(p instanceof RegExp)&&p.async){if(!c.$async)throw new Error("async format in sync schema");return(0,ts._)`await ${y}(${r})`}return typeof g=="function"?(0,ts._)`${y}(${r})`:(0,ts._)`${y}.test(${r})`}}}};$J.default=dRt;Object.defineProperty(OJ,"__esModule",{value:!0});const hRt=$J,pRt=[hRt.default];OJ.default=pRt;var px={};Object.defineProperty(px,"__esModule",{value:!0});px.contentVocabulary=px.metadataVocabulary=void 0;px.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"];px.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"];Object.defineProperty(oJ,"__esModule",{value:!0});const mRt=aJ,gRt=lJ,yRt=wJ,vRt=OJ,Fde=px,bRt=[mRt.default,gRt.default,(0,yRt.default)(),vRt.default,Fde.metadataVocabulary,Fde.contentVocabulary];oJ.default=bRt;var MJ={},E4={};Object.defineProperty(E4,"__esModule",{value:!0});E4.DiscrError=void 0;var jde;(function(e){e.Tag="tag",e.Mapping="mapping"})(jde||(E4.DiscrError=jde={}));Object.defineProperty(MJ,"__esModule",{value:!0});const uw=Dn,kV=E4,Bde=Nu,_Rt=DS,wRt=wt,ERt={message:({params:{discrError:e,tagName:t}})=>e===kV.DiscrError.Tag?`tag "${t}" must be string`:`value of tag "${t}" must be in oneOf`,params:({params:{discrError:e,tag:t,tagName:n}})=>(0,uw._)`{error: ${e}, tag: ${n}, tagValue: ${t}}`},xRt={keyword:"discriminator",type:"object",schemaType:"object",error:ERt,code(e){const{gen:t,data:n,schema:r,parentSchema:i,it:s}=e,{oneOf:o}=i;if(!s.opts.discriminator)throw new Error("discriminator: requires discriminator option");const a=r.propertyName;if(typeof a!="string")throw new Error("discriminator: requires propertyName");if(r.mapping)throw new Error("discriminator: mapping is not supported");if(!o)throw new Error("discriminator: requires oneOf keyword");const u=t.let("valid",!1),l=t.const("tag",(0,uw._)`${n}${(0,uw.getProperty)(a)}`);t.if((0,uw._)`typeof ${l} == "string"`,()=>c(),()=>e.error(!1,{discrError:kV.DiscrError.Tag,tag:l,tagName:a})),e.ok(u);function c(){const h=d();t.if(!1);for(const p in h)t.elseIf((0,uw._)`${l} === ${p}`),t.assign(u,f(h[p]));t.else(),e.error(!1,{discrError:kV.DiscrError.Mapping,tag:l,tagName:a}),t.endIf()}function f(h){const p=t.name("valid"),m=e.subschema({keyword:"oneOf",schemaProp:h},p);return e.mergeEvaluated(m,uw.Name),p}function d(){var h;const p={},m=y(i);let g=!0;for(let w=0;w<o.length;w++){let E=o[w];if(E!=null&&E.$ref&&!(0,wRt.schemaHasRulesButRef)(E,s.self.RULES)){const T=E.$ref;if(E=Bde.resolveRef.call(s.self,s.schemaEnv.root,s.baseId,T),E instanceof Bde.SchemaEnv&&(E=E.schema),E===void 0)throw new _Rt.default(s.opts.uriResolver,s.baseId,T)}const S=(h=E==null?void 0:E.properties)===null||h===void 0?void 0:h[a];if(typeof S!="object")throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${a}"`);g=g&&(m||y(E)),v(S,w)}if(!g)throw new Error(`discriminator: "${a}" must be required`);return p;function y({required:w}){return Array.isArray(w)&&w.includes(a)}function v(w,E){if(w.const)_(w.const,E);else if(w.enum)for(const S of w.enum)_(S,E);else throw new Error(`discriminator: "properties/${a}" must have "const" or "enum"`)}function _(w,E){if(typeof w!="string"||w in p)throw new Error(`discriminator: "${a}" values must be unique strings`);p[w]=E}}}};MJ.default=xRt;const SRt="http://json-schema.org/draft-07/schema#",TRt="http://json-schema.org/draft-07/schema#",CRt="Core schema meta-schema",ARt={schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},IRt=["object","boolean"],kRt={$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},RRt={$schema:SRt,$id:TRt,title:CRt,definitions:ARt,type:IRt,properties:kRt,default:!0};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.MissingRefError=t.ValidationError=t.CodeGen=t.Name=t.nil=t.stringify=t.str=t._=t.KeywordCxt=t.Ajv=void 0;const n=CRe,r=oJ,i=MJ,s=RRt,o=["/properties"],a="http://json-schema.org/draft-07/schema";class u extends n.default{_addVocabularies(){super._addVocabularies(),r.default.forEach(p=>this.addVocabulary(p)),this.opts.discriminator&&this.addKeyword(i.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;const p=this.opts.$data?this.$dataMetaSchema(s,o):s;this.addMetaSchema(p,a,!1),this.refs["http://json-schema.org/schema"]=a}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(a)?a:void 0)}}t.Ajv=u,e.exports=t=u,e.exports.Ajv=u,Object.defineProperty(t,"__esModule",{value:!0}),t.default=u;var l=zf;Object.defineProperty(t,"KeywordCxt",{enumerable:!0,get:function(){return l.KeywordCxt}});var c=Dn;Object.defineProperty(t,"_",{enumerable:!0,get:function(){return c._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return c.str}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return c.stringify}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return c.nil}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return c.Name}}),Object.defineProperty(t,"CodeGen",{enumerable:!0,get:function(){return c.CodeGen}});var f=Yk;Object.defineProperty(t,"ValidationError",{enumerable:!0,get:function(){return f.default}});var d=DS;Object.defineProperty(t,"MissingRefError",{enumerable:!0,get:function(){return d.default}})})(wV,wV.exports);var NRt=wV.exports;const hNe=Xl(NRt),PRt="#/definitions/StudyConfig",DRt="http://json-schema.org/draft-07/schema#",ORt={Answer:{additionalProperties:!1,description:`The Answer interface is used to define the properties of an answer. Answers are used to define the correct answer for a task. These are generally used in training tasks or if skip logic is required based on the answer.

Answers are used to defined correct answers for a task. These are generally used in training tasks or if skip logic is required based on the answer. The answer field is used to define the correct answer to the question. The acceptableLow and acceptableHigh fields are used to define a range of acceptable answers (these are currently only used for training). For example, if the correct answer is 5, and the acceptableLow is 4 and the acceptableHigh is 6, then any answer between 4 and 6 will be considered correct.

Here's an example of how to use the Answer interface to define the correct answer to a question:

\`\`\`js { "type": "markdown", "path": "<study-name>/assets/question.md", "response": [  {    "id": "response1",    "prompt": "What is 2 + 2?",    "required": true,    "location": "belowStimulus",    "type": "numerical"  } ] "correctAnswer": [{  "id": "response1",  "answer": 4 }] } \`\`\`

In this example, the correct answer to the question "What is 2 + 2?" is 4. If the participant answers 4, they will be considered correct. If they answer anything other than 4, they will be considered incorrect.`,properties:{acceptableHigh:{description:"The acceptable high value for the answer. This is used to define a range of acceptable answers.",type:"number"},acceptableLow:{description:"The acceptable low value for the answer. This is used to define a range of acceptable answers.",type:"number"},answer:{description:"The correct answer to the question."},id:{description:"The id of the answer. This is used to identify the answer in the data file.",type:"string"}},required:["id","answer"],type:"object"},BaseComponents:{additionalProperties:{additionalProperties:!1,properties:{allowFailedTraining:{description:"Controls whether the component should allow failed training. If not provided, the default is true.",type:"boolean"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},parameters:{anyOf:[{additionalProperties:{},description:"The parameters that are passed to the react component. These can be used within your react component to render different things.",type:"object"},{additionalProperties:{},description:"The parameters that are passed to the website (iframe). These can be used within your website to render different things.",type:"object"}],description:"The parameters that are passed to the react component. These can be used within your react component to render different things."},path:{anyOf:[{description:"The path to the markdown file. This should be a relative path from the public folder.",type:"string"},{description:"The path to the react component. This should be a relative path from the src/public folder.",type:"string"},{description:"The path to the image. This should be a relative path from the public folder.",type:"string"},{description:"The path to the website. This should be a relative path from the public folder or could be an external website.",type:"string"}],description:"The path to the markdown file. This should be a relative path from the public folder."},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},style:{additionalProperties:{type:"string"},description:"The style of the image. This is an object with css properties as keys and css values as values.",type:"object"},trainingAttempts:{description:"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.",type:"number"},type:{enum:["markdown","react-component","image","website","questionnaire"],type:"string"}},type:"object"},description:'The baseComponents is an optional set of components which can help template other components. For example, suppose you have a single HTML file that you want to display to the user several times. Instead of having the same component twice in the `components` list, you can have a single baseComponent with all the information that the two HTML components will share. A great example is showing the same HTML component but with two different questions;\n\n Using baseComponents:\n\n```js "baseComponents": { "my-image-component": { "instructionLocation": "sidebar", "nextButtonLocation": "sidebar", "path": "<study-name>/assets/my-image.jpg", "response": [   {     "id": "my-image-id",     "options": ["Europe", "Japan", "USA"],     "prompt": "Your Selected Answer:",     "type": "dropdown"   } ], "type": "image" } } ``` In the above code snippet, we have a single base component which holds the information about the type of component, the path to the image, and the response (which is a dropdown containing three choices). Any component which contains the `"baseComponent":"my-image-component"` key-value pair will inherit each of these properties. Thus, if we have three different questions which have the same choices and are concerning the same image, we can define our components like below: ```js "components": { "q1": { "baseComponent": "my-image-component", "description": "Choosing section with largest GDP", "instruction": "Which region has the largest GDP?" }, "q2": { "baseComponent": "my-image-component", "description": "Choosing section with lowest GDP", "instruction": "Which region has the lowest GDP?" }, "q3": { "baseComponent": "my-image-component", "description": "Choosing section with highest exports of Wheat", "instruction": "Which region had the most Wheat exported in 2022?" } } ```',type:"object"},CheckboxResponse:{additionalProperties:!1,description:'The CheckboxResponse interface is used to define the properties of a checkbox response. CheckboxResponses render as a checkbox input with user specified options.\n\n```js { "id": "q7", "prompt": "Checkbox example (not required)", "required": false, "location": "aboveStimulus", "type": "checkbox", "options": ["Option 1", "Option 2", "Option 3"] } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},maxSelections:{description:"The maximum number of selections that are required.",type:"number"},minSelections:{description:"The minimum number of selections that are required.",type:"number"},options:{description:"The options that are displayed as checkboxes, provided as an array of objects, with label and value fields.",items:{anyOf:[{$ref:"#/definitions/StringOption"},{type:"string"}]},type:"array"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"checkbox",type:"string"}},required:["id","options","prompt","required","type"],type:"object"},ComponentBlock:{additionalProperties:!1,description:'The ComponentBlock interface is used to define order properties within the sequence. This is used to define the order of components in a study and the skip logic. It supports random assignment of trials using a pure random assignment and a [latin square](https://en.wikipedia.org/wiki/Latin_square).\n\nThe pure random assignment is a random assignment with no guarantees. For example, one component _could_ show up in the first position 10 times in a row. However, this situation is unlikely.\n\nHere\'s a snippet that shows how to use the random order:\n\n```js { "order": "random", "components": [ "component1", "component2", "component3" ] } ``` This snippet would produce a random order of the components in the sequence array. For example, the resulting sequence array could be :\n\n```js [ ["component2", "component3", "component1"], ["component1", "component3", "component2"], ["component3", "component1", "component2"], ... ] ```\n\nThe latin square assignment is a random assignment with some guarantees. It ensures that each component is shown an equal number of times in each position. Here\'s a snippet that shows how to use the latin square order:\n\n```js { "order": "latinSquare", "components": [ "component1", "component2", "component3" ] } ```\n\nThis snippet would produce a latin square order of the components in the sequence array. Since the latin square guarantees that each component is shown an equal number of times in each position, the resulting sequence array could be:\n\n```js [ ["component1", "component2", "component3"], ["component2", "component3", "component1"], ["component3", "component1", "component2"], ... ] ```\n\nThe fixed assignment is a fixed assignment of components. This is used when you want to show the components in a specific order. Here\'s a snippet that shows how to use the fixed order:\n\n```js { "order": "fixed", "components": [ "component1", "component2", "component3" ] } ```\n\nThis snippet would produce a fixed order of the components in the sequence array. The resulting sequence array would be:\n\n```js [ ["component1", "component2", "component3"], ["component1", "component2", "component3"], ["component1", "component2", "component3"], ... ] ```\n\nIn addition to the order property, the ComponentBlock interface also includes the `"numSamples"` property. This is used to reduce the number of components shown to a participant. This property respects the order property and the guarantees provided by the order property. For example, if you have three components in the components array and you set `"numSamples"` to 2, you would randomize across the three components while only showing a participant two of them. Here\'s a snippet that shows how to use the numSamples property:\n\n```js { "order": "latinSquare", "components": [ "component1", "component2", "component3" ], "numSamples": 2 } ```\n\nThis snippet would produce a latin square order of the components in the sequence array. Since the latin square guarantees that each component is shown an equal number of times in each position, the resulting sequence array could be:\n\n```js [ ["component1", "component2"], ["component2", "component3"], ["component3", "component1"], ... ] ```\n\nThe interruptions property specifies an array of interruptions. These can be used for breaks or attention checks. Interruptions can be deterministic or random. Please see [InterruptionBlock](../../type-aliases/InterruptionBlock) for more specific information.\n\nThe skip property is used to define skip conditions. This is used to skip to a different component or block based on the response to a component or the number of correct or incorrect responses in a block. Please see [SkipConditions](../../type-aliases/SkipConditions) for more specific information.',properties:{components:{description:"The components that are included in the order.",items:{anyOf:[{type:"string"},{$ref:"#/definitions/ComponentBlock"}]},type:"array"},id:{description:"The id of the block. This is used to identify the block in the SkipConditions and is only required if you want to refer to the whole block in the condition.to property.",type:"string"},interruptions:{description:"The interruptions property specifies an array of interruptions. These can be used for breaks or attention checks.",items:{$ref:"#/definitions/InterruptionBlock"},type:"array"},numSamples:{description:"The number of samples to use for the random assignments. This means you can randomize across 3 components while only showing a participant 2 at a time.",type:"number"},order:{description:"The type of order. This can be random (pure random), latinSquare (random with some guarantees), or fixed.",enum:["random","latinSquare","fixed"],type:"string"},skip:{$ref:"#/definitions/SkipConditions",description:"The skip conditions for the block."}},required:["order","components"],type:"object"},ComponentBlockCondition:{additionalProperties:!1,description:`The ComponentBlockCondition interface is used to define a SkipCondition based on the number of correct or incorrect components in a block. All answers on all components in the block are checked.

Answers are checked against the correct answers defined in the IndividualComponent's [CorrectAnswer](../Answer). If no correct answers are defined, the component is considered correct by default.

You might use this if a participant answers two questions in a block incorrectly. Here's an example of how to use the ComponentBlockCondition:

\`\`\`js { ... "skip": [ {   "check": "block",   "condition": "numIncorrect",   "value": 2,   "to": "end" } ] ... } \`\`\`

In this example, when the number of components with incorrect responses in the block is two, the participant will be redirected to the end of the study. If the number of incorrect responses is less than two, the participant will continue to the next component in the sequence.

When the condition is met, the participant will immediately be redirected to the component or block specified in the \`"to"\` property. If no conditions are met, the participant will continue to the next component in the sequence.`,properties:{check:{const:"block",description:"The check we'll perform.",type:"string"},condition:{description:"The condition to check.",enum:["numCorrect","numIncorrect"],type:"string"},to:{description:"The id of the component or block to skip to",type:"string"},value:{description:"The number of correct or incorrect responses to check for.",type:"number"}},required:["check","condition","value","to"],type:"object"},DeterministicInterruption:{additionalProperties:!1,description:`The DeterministicInterruption interface is used to define an interruption that will be shown at a specific location in the block.

For example, if you want to show an interruption after the second component in the block, you would set firstLocation to 2. If you want to show an interruption after every 3 components, you would set spacing to 3. If you want to show an interruption after the second component and then every 3 components, you would set firstLocation to 2 and spacing to 3.

The components property is an array of the components that will be inserted at the location specified by firstLocation and spacing. These components should reference components in the StudyConfig.components section of the config.

Here's an example of how to use the DeterministicInterruption:

\`\`\`js { "order": "fixed", "components": [ "component1", "component2", "component3", "component4", "component5", "component6" ], "interruptions": [ {   "firstLocation": 2,   "spacing": 3,   "components": [     "interruption1",     "interruption2"   ] } ] } \`\`\`

The resulting sequence array could be:

\`\`\`js [ ["component1", "component2", "interruption1", "component3", "component4", "component5", "interruption2", "component6"], ["component1", "component2", "interruption1", "component3", "component4", "component5", "interruption2", "component6"], ["component1", "component2", "interruption1", "component3", "component4", "component5", "interruption2", "component6"], ... ] \`\`\``,properties:{components:{description:"The components that are included in the interruption. These reference components in the StudyConfig.components section of the config.",items:{type:"string"},type:"array"},firstLocation:{description:"The Location of the first instance of the interruption. If this is set to 2, the interruption will be shown after the second component (inserted at index 2).",type:"number"},spacing:{description:"The number of components between breaks.",type:"number"}},required:["firstLocation","spacing","components"],type:"object"},DropdownResponse:{additionalProperties:!1,description:'The DropdownResponse interface is used to define the properties of a dropdown response. DropdownResponses render as a select input with user specified options.\n\nExample: ```js { "id": "q-color", "prompt": "What is your favorite color?", "required": true, "location": "aboveStimulus", "type": "dropdown", "placeholder": "Please choose your favorite color", "options": ["Red", "Blue"] } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},options:{description:"The options that are displayed in the dropdown.",items:{anyOf:[{$ref:"#/definitions/StringOption"},{type:"string"}]},type:"array"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},placeholder:{description:"The placeholder text that is displayed in the input.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"dropdown",type:"string"}},required:["id","options","prompt","required","type"],type:"object"},IFrameResponse:{additionalProperties:!1,description:"The IFrameResponse interface is used to define the properties of an iframe response. IFrameResponses render as a list, that is connected to a WebsiteComponent. When data is sent from the WebsiteComponent, it is displayed in the list.",properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"iframe",type:"string"}},required:["id","prompt","required","type"],type:"object"},ImageComponent:{additionalProperties:!1,description:'The ImageComponent interface is used to define the properties of an image component. This component is used to render an image with optional styling.\n\nFor example, to render an image with a path of `path/to/study/assets/image.jpg` and a max width of 50%, you would use the following snippet: ```js { "type": "image", "path": "<study-name>/assets/image.jpg", "style": { "maxWidth": "50%" } } ```',properties:{allowFailedTraining:{description:"Controls whether the component should allow failed training. If not provided, the default is true.",type:"boolean"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},path:{description:"The path to the image. This should be a relative path from the public folder.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},style:{additionalProperties:{type:"string"},description:"The style of the image. This is an object with css properties as keys and css values as values.",type:"object"},trainingAttempts:{description:"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.",type:"number"},type:{const:"image",type:"string"}},required:["path","response","type"],type:"object"},IndividualComponent:{anyOf:[{$ref:"#/definitions/MarkdownComponent"},{$ref:"#/definitions/ReactComponent"},{$ref:"#/definitions/ImageComponent"},{$ref:"#/definitions/WebsiteComponent"},{$ref:"#/definitions/QuestionnaireComponent"}]},IndividualComponentAllResponsesCondition:{additionalProperties:!1,description:`The IndividualComponentAllResponsesCondition interface is used to define a SkipCondition based on all answers to a specific component. The skip logic will be checked for every component in the block that has the specified name.

:::info

If you need to check all instances of a repeated component, you should use the RepeatedComponentBlockCondition.

:::


Here's an example of how to use the IndividualComponentAllResponsesCondition:

\`\`\`js { ... "skip": [ {   "name": "attentionCheck",   "check": "responses",   "to": "end" } ] ... } \`\`\`

In this example, if all responses to the component with the ID "attentionCheck" are correct, the participant will be redirected to the end of the study. If any response is incorrect, the participant will continue to the next component in the sequence.`,properties:{check:{const:"responses",description:"The check we'll perform.",type:"string"},name:{description:"The name of the component to check.",type:"string"},to:{description:"The id of the component or block to skip to",type:"string"}},required:["name","check","to"],type:"object"},IndividualComponentSingleResponseCondition:{additionalProperties:!1,description:`The IndividualComponentSingleResponseCondition interface is used to define a SkipCondition based on a single answer to a specific component. The skip logic will be checked for every component in the block that has the specified name.

:::info

If you need to check all instances of a repeated component, you should use the RepeatedComponentBlockCondition.

:::

For example, if you want to skip to a different component based on a response to a specific component, you would use the IndividualComponentSingleResponseCondition. Here's an example of how to use the IndividualComponentSingleResponseCondition:

\`\`\`js { ... "skip": [ {   "name": "attentionCheck",   "check": "response",   "responseId": "attentionCheckResponse",   "value": "the right answer",   "comparison": "equal",   "to": "end" } ] ... } \`\`\`

In this example, we assign our skip logic to the component whose ID is "attentionCheck". If the answer given to the response "attentionCheckResponse" is equal to "the right answer", then the user will be redirected to the end of the study. If the response is _not_ equal to "the right answer", then the participant will continue to the next component in the sequence.`,properties:{check:{const:"response",description:"The check we'll perform.",type:"string"},comparison:{description:"The comparison to use.",enum:["equal","notEqual"],type:"string"},name:{description:"The name of the component to check.",type:"string"},responseId:{description:"The response id to check.",type:"string"},to:{description:"The id of the component or block to skip to",type:"string"},value:{description:"The value to check.",type:["string","number"]}},required:["name","check","responseId","value","comparison","to"],type:"object"},InheritedComponent:{additionalProperties:!1,description:"An InheritedComponent is a component that inherits properties from a baseComponent. This is used to avoid repeating properties in components. This also means that components in the baseComponents object can be partially defined, while components in the components object can inherit from them and must be fully defined and include all properties (after potentially merging with a base component).",properties:{allowFailedTraining:{description:"Controls whether the component should allow failed training. If not provided, the default is true.",type:"boolean"},baseComponent:{type:"string"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},parameters:{anyOf:[{additionalProperties:{},description:"The parameters that are passed to the react component. These can be used within your react component to render different things.",type:"object"},{additionalProperties:{},description:"The parameters that are passed to the website (iframe). These can be used within your website to render different things.",type:"object"}],description:"The parameters that are passed to the react component. These can be used within your react component to render different things."},path:{anyOf:[{description:"The path to the markdown file. This should be a relative path from the public folder.",type:"string"},{description:"The path to the react component. This should be a relative path from the src/public folder.",type:"string"},{description:"The path to the image. This should be a relative path from the public folder.",type:"string"},{description:"The path to the website. This should be a relative path from the public folder or could be an external website.",type:"string"}],description:"The path to the markdown file. This should be a relative path from the public folder."},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},style:{additionalProperties:{type:"string"},description:"The style of the image. This is an object with css properties as keys and css values as values.",type:"object"},trainingAttempts:{description:"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.",type:"number"},type:{enum:["markdown","react-component","image","website","questionnaire"],type:"string"}},required:["baseComponent"],type:"object"},InterruptionBlock:{anyOf:[{$ref:"#/definitions/DeterministicInterruption"},{$ref:"#/definitions/RandomInterruption"}],description:"The InterruptionBlock interface is used to define interruptions in a block. These can be used for breaks or attention checks. Interruptions can be deterministic or random."},LikertResponse:{additionalProperties:!1,description:`The LikertResponse interface is used to define the properties of a likert response. LikertResponses render as radio buttons with a user specified number of options, which can be controlled through the numItems. For example, numItems: 5 will render 5 radio buttons, and numItems: 7 will render 7 radio buttons. LikertResponses can also have a description, and left and right labels. The left and right labels are used to label the left and right ends of the likert scale with values such as 'Strongly Disagree' and 'Strongly Agree'.

Example for a five-point Likert Scale:

\`\`\`js { "id": "q-satisfaction", "prompt": "Rate your satisfaction from 1 (not enjoyable) to 5 (very enjoyable).", "required": true, "location": "aboveStimulus", "type": "likert", "leftLabel": "Not Enjoyable", "rightLabel": "Very Enjoyable", "numItems": 5 } \`\`\``,properties:{desc:{description:"The description of the likert scale.",type:"string"},hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},leftLabel:{description:"The left label of the likert scale. E.g Strongly Disagree",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},numItems:{description:"The number of options to render.",type:"number"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},rightLabel:{description:"The right label of the likert scale. E.g Strongly Agree",type:"string"},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"likert",type:"string"}},required:["id","numItems","prompt","required","type"],type:"object"},LongTextResponse:{additionalProperties:!1,description:'The LongTextResponse interface is used to define the properties of a long text response. LongTextResponses render as a text area that accepts any text and can optionally have a placeholder. ```js { "id": "q-name", "prompt": "What is your first name?", "required": true, "location": "aboveStimulus", "type": "longText", "placeholder": "Please enter your first name" } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},placeholder:{description:"The placeholder text that is displayed in the input.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"longText",type:"string"}},required:["id","prompt","required","type"],type:"object"},MarkdownComponent:{additionalProperties:!1,description:'The MarkdownComponent interface is used to define the properties of a markdown component. The components can be used to render many different things, such as consent forms, instructions, and debriefs. Additionally, you can use the markdown component to render images, videos, and other media, with supporting text. Markdown components can have responses (e.g. in a consent form), or no responses (e.g. in a help text file). Here\'s an example with no responses for a simple help text file:\n\n```js { "type": "markdown", "path": "<study-name>/assets/help.md", "response": [] } ```',properties:{allowFailedTraining:{description:"Controls whether the component should allow failed training. If not provided, the default is true.",type:"boolean"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},path:{description:"The path to the markdown file. This should be a relative path from the public folder.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},trainingAttempts:{description:"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.",type:"number"},type:{const:"markdown",type:"string"}},required:["path","response","type"],type:"object"},NumberOption:{additionalProperties:!1,description:"The NumberOption interface is used to define the options for a slider response. The label is the text that is displayed to the user, and the value is the value that is stored in the data file.",properties:{label:{description:"The label displayed to participants.",type:"string"},value:{description:"The value stored in the participant's data.",type:"number"}},required:["label","value"],type:"object"},NumericalResponse:{additionalProperties:!1,description:'The NumericalResponse interface is used to define the properties of a numerical response. NumericalResponses render as a text input that only accepts numbers, and can optionally have a min and max value, or a placeholder.\n\nExample: ```js { "id": "q-numerical", "prompt": "Numerical example", "required": true, "location": "aboveStimulus", "type": "numerical", "placeholder": "Enter your age, range from 0 - 120", "max": 120, "min": 0 } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},max:{description:"The maximum value that is accepted in the input.",type:"number"},min:{description:"The minimum value that is accepted in the input.",type:"number"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},placeholder:{description:"The placeholder text that is displayed in the input.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"numerical",type:"string"}},required:["id","prompt","required","type"],type:"object"},QuestionnaireComponent:{additionalProperties:!1,description:'A QuestionnaireComponent is used to render simple questions that require a response. The main use case of this component type is to ask participants questions when you don\'t need to render a stimulus. Please note, that even though we\'re not using a stimulus, the responses still require a `location`. For example this could be used to collect demographic information from a participant using the following snippet:\n\n```js { "type": "questionnaire", "response": [  {    "id": "gender",    "prompt": "Gender:",    "required": true,    "location": "belowStimulus",    "type": "checkbox",    "options": ["Man", "Woman", "Genderqueer", "Third-gender", ...]  } ] } ```',properties:{allowFailedTraining:{description:"Controls whether the component should allow failed training. If not provided, the default is true.",type:"boolean"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},trainingAttempts:{description:"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.",type:"number"},type:{const:"questionnaire",type:"string"}},required:["response","type"],type:"object"},RadioResponse:{additionalProperties:!1,description:'The RadioResponse interface is used to define the properties of a radio response. Radios have only one allowable selection. RadioResponses render as a radio input with user specified options, and optionally left and right labels.\n\nExample: ```js { "id": "q-radio", "prompt": "Radio button example", "required": true, "location": "aboveStimulus", "type": "radio", "options": ["Option 1", "Option 2"] } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},leftLabel:{description:"The left label of the radio group. Used in Likert scales for example",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},options:{description:"The options that are displayed as checkboxes, provided as an array of objects, with label and value fields.",items:{anyOf:[{$ref:"#/definitions/StringOption"},{type:"string"}]},type:"array"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},rightLabel:{description:"The right label of the radio group. Used in Likert scales for example",type:"string"},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"radio",type:"string"}},required:["id","options","prompt","required","type"],type:"object"},RandomInterruption:{additionalProperties:!1,description:'The RandomInterruption interface is used to define an interruption that will be shown randomly in the block.\n\nFor example, if you want to show a single interruption randomly in the block, you would set `"spacing"` to "random" and `"numInterruptions"` to 1. If you want to show 3 interruptions randomly in the block, you would set `"spacing"` to "random" and `"numInterruptions"` to 3.\n\nThe components property is an array of the components that will be inserted randomly in the block. These components should reference components in the StudyConfig.components section of the config.\n\nHere\'s an example of how to use the RandomInterruption:\n\n```js { "order": "fixed", "components": [ "component1", "component2", "component3", "component4", "component5", "component6" ], "interruptions": [ {   "spacing": "random",   "numInterruptions": 3,   "components": [     "interruption1",     "interruption2"   ] } ] } ```\n\nThe resulting sequence array could be:\n\n```js [ ["component1", "interruption1", "interruption2", "component2", "interruption1", "interruption2", "component3", "component4", "component5", "interruption1", "interruption2", "component6], ["component1", "interruption1", "interruption2", "component2", "interruption1", "interruption2", "component3", "component4", "interruption1", "interruption2", "component5", "component6], ["component1", "component2" "interruption1", "interruption2", "component3", "interruption1", "interruption2", "component4", "component5", "interruption1", "interruption2", "component6], ... ] ```',properties:{components:{description:"The components that are included in the interruption. These reference components in the StudyConfig.components section of the config.",items:{type:"string"},type:"array"},numInterruptions:{description:"The number of times the interruption will be randomly added",type:"number"},spacing:{const:"random",description:"If spacing is set to random, reVISit will add interruptions randomly. These interruptions will not ever be displayed as the first component in the block.",type:"string"}},required:["spacing","numInterruptions","components"],type:"object"},ReactComponent:{additionalProperties:!1,description:"The ReactComponent interface is used to define the properties of a react component. This component is used to render react code with certain parameters. These parameters can be used within your react code to render different things.\n\nUnlike other types of components, the path for a React component is relative to the `src/public/` folder. Similar to our standard assets, we suggest creating a folder named `src/public/{studyName}/assets` to house all of the React component assets for a particular study. Your React component which you link to in the path must be default exported from its file.\n\nReact components created this way have a generic prop type passed to the component on render, `<StimulusParams<T>>`, which has the following types.\n\n```ts { parameters: T; setAnswer: ({ status, provenanceGraph, answers }: { status: boolean, provenanceGraph?: TrrackedProvenance, answers: Record<string, any> }) => void } ```\n\nparameters is the same object passed in from the ReactComponent type below, allowing you to pass options in from the config to your component. setAnswer is a callback function allowing the creator of the ReactComponent to programmatically set the answer, as well as the provenance graph. This can be useful if you don't use the default answer interface, and instead have something more unique.\n\nSo, for example, if I had the following ReactComponent in my config ```js { type: 'react-component'; path: 'my_study/CoolComponent.tsx'; parameters: {  name: 'Zach';  age: 26; } } ```\n\nMy react component, CoolComponent.tsx, would exist in src/public/my_study/assets, and look something like this\n\n```ts export default function CoolComponent({ parameters, setAnswer }: StimulusParams<{name: string, age: number}>) { // render something } ```\n\nFor in depth examples, see the following studies, and their associated codebases. https://revisit.dev/study/demo-click-accuracy-test (https://github.com/revisit-studies/study/tree/v1.0.3/src/public/demo-click-accuracy-test/assets) https://revisit.dev/study/demo-brush-interactions (https://github.com/revisit-studies/study/tree/v1.0.3/src/public/demo-brush-interactions/assets)",properties:{allowFailedTraining:{description:"Controls whether the component should allow failed training. If not provided, the default is true.",type:"boolean"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},parameters:{additionalProperties:{},description:"The parameters that are passed to the react component. These can be used within your react component to render different things.",type:"object"},path:{description:"The path to the react component. This should be a relative path from the src/public folder.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},trainingAttempts:{description:"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.",type:"number"},type:{const:"react-component",type:"string"}},required:["path","response","type"],type:"object"},RepeatedComponentBlockCondition:{additionalProperties:!1,description:`The RepeatedComponentBlockCondition interface is used to define a SkipCondition based on the number of correct or incorrect repeated components. You might use this if you need to check if an attention check was failed multiple times. This is similar to the [ComponentBlockCondition](../ComponentBlockCondition), but it only checks a specific repeated component.

Here's an example of how to use the RepeatedComponentBlockCondition:

\`\`\`js { ... "skip": [ {   "name": "attentionCheck",   "check": "repeatedComponent",   "condition": "numIncorrect",   "value": 2,   "to": "end" } ] ... } \`\`\`

In this example, when the number of incorrect responses to the repeated component with the name "attentionCheck" is two, the participant will be redirected to the end of the study. If the number of incorrect responses is less than two, the participant will continue to the next component in the sequence.`,properties:{check:{const:"repeatedComponent",description:"The check we'll perform.",type:"string"},condition:{description:"The condition to check.",enum:["numCorrect","numIncorrect"],type:"string"},name:{description:"The name of the repeated component to check (e.g. attentionCheck).",type:"string"},to:{description:"The id of the component or block to skip to",type:"string"},value:{description:"The number of correct or incorrect responses to check for.",type:"number"}},required:["name","check","condition","value","to"],type:"object"},Response:{anyOf:[{$ref:"#/definitions/NumericalResponse"},{$ref:"#/definitions/ShortTextResponse"},{$ref:"#/definitions/LongTextResponse"},{$ref:"#/definitions/LikertResponse"},{$ref:"#/definitions/DropdownResponse"},{$ref:"#/definitions/SliderResponse"},{$ref:"#/definitions/RadioResponse"},{$ref:"#/definitions/CheckboxResponse"},{$ref:"#/definitions/IFrameResponse"}]},ResponseBlockLocation:{enum:["sidebar","aboveStimulus","belowStimulus"],type:"string"},ShortTextResponse:{additionalProperties:!1,description:'The ShortTextResponse interface is used to define the properties of a short text response. ShortTextResponses render as a text input that accepts any text and can optionally have a placeholder.\n\n```js { "id": "q-short-text", "prompt": "Short text example", "required": true, "location": "aboveStimulus", "type": "shortText", "placeholder": "Enter your answer here" } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},placeholder:{description:"The placeholder text that is displayed in the input.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"shortText",type:"string"}},required:["id","prompt","required","type"],type:"object"},SkipConditions:{description:`The SkipConditions interface is used to define skip conditions. This is used to skip to a different component/block based on the response to a component or based on the number of correct/incorrect responses in a block. Skip conditions work recursively: if you have a nested block, the parent blocks' skip conditions will be considered when computing the skip logic.

Skip conditions are evaluated in the order they are defined in the array. If a condition is met, the participant will be redirected to the component or block specified in the \`"to"\` property. If no conditions are met, the participant will continue to the next component in the sequence.

Skip conditions allow you to jump to a different component or block. If you intend to skip to a block, you should specify a block id in the sequence. If you intend to skip to a component, you should specify a component id. Skipping backwards is not supported. Skipping to a repeated component will skip to the first instance of the component after the component that triggered the skip.

Please see the interface definitions for more specific information on the different types of skip conditions.`,items:{anyOf:[{$ref:"#/definitions/IndividualComponentSingleResponseCondition"},{$ref:"#/definitions/IndividualComponentAllResponsesCondition"},{$ref:"#/definitions/ComponentBlockCondition"},{$ref:"#/definitions/RepeatedComponentBlockCondition"}]},type:"array"},SliderResponse:{additionalProperties:!1,description:'The SliderResponse interface is used to define the properties of a slider response. SliderResponses render as a slider input with user specified steps. For example, you could have steps of 0, 50, and 100.\n\nExample: ```js { "id": "q-slider", "prompt": "How are you feeling?", "location": "aboveStimulus", "required": true, "type": "slider", "options": [  {    "label": "Bad",    "value": 0  },  {    "label": "OK",    "value": 50  },  {    "label": "Good",    "value": 100  } ] } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},options:{description:"This defines the steps in the slider and the extent of the slider as an array of objects that have a label and a value.",items:{$ref:"#/definitions/NumberOption"},type:"array"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"slider",type:"string"}},required:["id","options","prompt","required","type"],type:"object"},StringOption:{additionalProperties:!1,description:"The StringOption interface is used to define the options for a dropdown, radio, or checkbox response. The label is the text that is displayed to the user, and the value is the value that is stored in the data file.",properties:{label:{description:"The label displayed to participants.",type:"string"},value:{description:"The value stored in the participant's data.",type:"string"}},required:["label","value"],type:"object"},StudyConfig:{additionalProperties:!1,description:'The StudyConfig interface is used to define the properties of a study configuration. This is a JSON object with four main components: the StudyMetadata, the UIConfig, the Components, and the Sequence. Below is the general template that should be followed when constructing a Study configuration file.\n\n```js { "$schema": "https://raw.githubusercontent.com/revisit-studies/study/v1.0.3/src/parser/StudyConfigSchema.json", "studyMetadata": {  ... }, "uiConfig": {  ... }, "components": {  ... }, "sequence": {  ... } } ```\n\n:::info For information about each of the individual pieces of the study configuration file, you can visit the documentation for each one individually. ::: <br/>\n\nThe `$schema` line is used to verify the schema. If you\'re using VSCode (or other similar IDEs), including this line will allow for autocomplete and helpful suggestions when writing the study configuration.',properties:{$schema:{description:"A required json schema property. This should point to the github link for the version of the schema you would like. The `$schema` line is used to verify the schema. If you're using VSCode (or other similar IDEs), including this line will allow for autocomplete and helpful suggestions when writing the study configuration. See examples for more information",type:"string"},baseComponents:{$ref:"#/definitions/BaseComponents",description:"The base components that are used in the study. These components can be used to template other components. See [BaseComponents](../../type-aliases/BaseComponents) for more information."},components:{additionalProperties:{anyOf:[{$ref:"#/definitions/IndividualComponent"},{$ref:"#/definitions/InheritedComponent"}]},description:"The components that are used in the study. They must be fully defined here with all properties. Some properties may be inherited from baseComponents.",type:"object"},sequence:{$ref:"#/definitions/ComponentBlock",description:"The order of the components in the study. This might include some randomness."},studyMetadata:{$ref:"#/definitions/StudyMetadata",description:"The metadata for the study. This is used to identify the study and version in the data file."},uiConfig:{$ref:"#/definitions/UIConfig",description:"The UI configuration for the study. This is used to configure the UI of the app."}},required:["$schema","studyMetadata","uiConfig","components","sequence"],type:"object"},StudyMetadata:{additionalProperties:!1,description:'The StudyMetadata is used to describe certain properties of a study. Some of this data is displayed on the landing page when running the app, such as the title and description. Below is an example of a StudyMetadata entry in your study configuration file:\n\n```js "studyMetadata" : { "title": "My New Study", "version": "pilot", "authors": [  "Jane Doe",  "John Doe" ], "date": "2024-04-01", "description": "This study is meant to test your ability.", "organizations": [  "The reVISit Team",  "The Other Team" ] } ```',properties:{authors:{description:"The authors of your study.",items:{type:"string"},type:"array"},date:{description:"The date of your study, may be useful for the researcher.",type:"string"},description:{description:"The description of your study, shown on the landing page.",type:"string"},organizations:{description:"The organizations that are associated with your study.",items:{type:"string"},type:"array"},title:{description:"The title of your study, shown on the landing page.",type:"string"},version:{description:"The version of your study. When you change a configuration file after a study has already been distributed to participants, you can change the version number so that the participants who see this new configuration file can be identified.",type:"string"}},required:["title","version","authors","date","description","organizations"],type:"object"},UIConfig:{additionalProperties:!1,description:'The UIConfig is used to configure the UI of the app. This includes the logo, contact email, and whether to show a progress bar. The UIConfig is also used to configure the sidebar, which can be used to display the task instructions and capture responses. Below is an example of how the UI Config would look in your study configuration (note, there are optional fields that are not shown here): ```js uiConfig:{ "contactEmail": "contact@revisit.dev", "helpTextPath": "<study-name>/assets/help.md", "logoPath": "<study-name>/assets/logo.jpg", "withProgressBar": true, "autoDownloadStudy": true "autoDownloadTime": 5000, "studyEndMsg": "Thank you for completing this study. You\'re the best!", "sidebar": true, "windowEventDebounceTime": 500, "urlParticipantIdParam": "PROLIFIC_ID", "numSequences": 500 } ``` In the above, the `path/to/assets/` path is referring to the path to your individual study assets. It is common practice to have your study directory contain an `assets` directory where all components and images relevant to your study reside. Note that this path is relative to the `public` folder of the repository - as is all other paths you define in reVISit (aside from React components whose paths are relative to `src/public`.)',properties:{autoDownloadStudy:{description:"Controls whether the study data is automatically downloaded at the end of the study.",type:"boolean"},autoDownloadTime:{description:"The time in milliseconds to wait before automatically downloading the study data.",type:"number"},contactEmail:{description:"The email address that used during the study if a participant clicks contact.",type:"string"},enumerateQuestions:{description:"Whether to prepend questions with their index (+ 1). This should only be used when all questions are in the same location, e.g. all are in the side bar.",type:"boolean"},helpTextPath:{description:"The path to the help text file. This is displayed when a participant clicks help. Markdown is supported.",type:"string"},logoPath:{description:"The path to the logo image. This is displayed on the landing page and the header.",type:"string"},numSequences:{description:"The number of sequences to generate for the study. This is used to generate the random sequences for the study. The default is 1000.",type:"number"},sidebar:{description:"Controls whether the left sidebar is rendered at all. Required to be true if your response's location is set to sidebar for any question.",type:"boolean"},sidebarWidth:{description:"The width of the left sidebar. Defaults to 300.",type:"number"},studyEndMsg:{description:"The message to display when the study ends.",type:"string"},urlParticipantIdParam:{description:"If the participant ID is passed in the URL, this is the name of the querystring parameter that is used to capture the participant ID (e.g. PROLIFIC_ID). This will allow a user to continue a study on different devices and browsers.",type:"string"},windowEventDebounceTime:{description:"Debounce time in milliseconds for automatically tracked window events. Defaults to 100. E.g 100 here means 1000ms / 100ms = 10 times a second, 200 here means 1000ms / 200ms = 5 times per second",type:"number"},withProgressBar:{description:"Controls whether the progress bar is rendered in the study.",type:"boolean"}},required:["contactEmail","logoPath","withProgressBar","sidebar"],type:"object"},WebsiteComponent:{additionalProperties:!1,description:'The WebsiteComponent interface is used to define the properties of a website component. A WebsiteComponent is used to render an iframe with a website inside of it. This can be used to display an external website or an html file that is located in the public folder.\n\n```js { "type": "website", "path": "<study-name>/assets/website.html", } ```\n\nTo pass a data from the config to the website, you can use the `parameters` field as below:\n\n```js { "type": "website", "path": "<study-name>/website.html", "parameters": {  "barData": [0.32, 0.01, 1.2, 1.3, 0.82, 0.4, 0.3] } "response": [  {    "id": "barChart",    "prompt": "Your selected answer:",    "required": true,    "location": "belowStimulus",    "type": "iframe"  } ], } ``` In the `website.html` file, by including `revisit-communicate.js`, you can use the `Revisit.onDataReceive` method to retrieve the data, and `Revisit.postAnswers` to send the user\'s responses back to the reVISit as shown in the example below:\n\n```html <script src="../../revisitUtilities/revisit-communicate.js"><\/script> <script> Revisit.onDataReceive((data) => {  const barData = data[\'barData\'];  ... });\n\n// Call out that \'barChart\' needs to match ID in \'response\' object Revisit.postAnswers({ barChart: userAnswer }); <\/script> ```\n\n If the html website implements Trrack library for provenance tracking, you can send the provenance graph back to reVISit by calling `Revisit.postProvenanceGraph` as shown in the example below. You need to call this each time the Trrack state is updated so that reVISit is kept aware of the changes in the provenance graph.\n\n```js const trrack = initializeTrrack({ initialState, registry });\n\n... Revisit.postProvenance(trrack.graph.backend); ```',properties:{allowFailedTraining:{description:"Controls whether the component should allow failed training. If not provided, the default is true.",type:"boolean"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},parameters:{additionalProperties:{},description:"The parameters that are passed to the website (iframe). These can be used within your website to render different things.",type:"object"},path:{description:"The path to the website. This should be a relative path from the public folder or could be an external website.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},trainingAttempts:{description:"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.",type:"number"},type:{const:"website",type:"string"}},required:["path","response","type"],type:"object"}},$Rt={$ref:PRt,$schema:DRt,definitions:ORt},MRt="#/definitions/GlobalConfig",LRt="http://json-schema.org/draft-07/schema#",FRt={GlobalConfig:{additionalProperties:!1,description:"The GlobalConfig is used to generate the list of available studies in the UI. This list is displayed on the landing page when running the app.",properties:{$schema:{description:"A required json schema property. This should point to the github link for the version of the schema you would like. See examples in the public folder for more information",type:"string"},configs:{additionalProperties:{additionalProperties:!1,description:"The key is used to identify the study config file. This key is used in the configList property.",properties:{path:{description:"The path to the study config file. This should be a relative path from the public folder.",type:"string"},test:{description:"Indicates whether the study is a test study. This is used to hide the study from the landing page.",type:"boolean"}},required:["path"],type:"object"},description:"A required property that specifies the options for the configList property.",type:"object"},configsList:{description:"A required property that is used to generate the list of available studies in the UI. This list is displayed on the landing page when running the app.",items:{type:"string"},type:"array"}},required:["$schema","configs","configsList"],type:"object"}},jRt={$ref:MRt,$schema:LRt,definitions:FRt},pNe=new hNe;pNe.addSchema(jRt);const Ude=pNe.getSchema("#/definitions/GlobalConfig"),mNe=new hNe;mNe.addSchema($Rt);const A9=mNe.getSchema("#/definitions/StudyConfig");function BRt(e){const t=[];return[e.configsList.every(r=>e.configs[r]===void 0?(t.push({message:`Config ${r} is not defined in configs object, but is present in configsList`}),!1):!0),t]}function x4(e){return e.baseComponent!==void 0}function URt(e){const t=YQ.parse(e),n=Ude(t),r=BRt(t);if(n&&r[0])return t;throw console.error("Global config parsing errors",[...Ude.errors||[],...r[1]]),Error("There was an issue validating your file global.json")}function gNe(e,t,n=[]){if(e.components.length===0){n.push({message:"Sequence has an empty components array",instancePath:"/sequence/",params:{action:"remove empty components block"}});return}e.id&&t.map((i,s)=>i===e.id?s:null).forEach(i=>{i!==null&&t.splice(i,1)}),e.components.forEach(r=>{typeof r=="string"?t.includes(r)&&t.map((s,o)=>s===r?o:null).forEach(s=>{s!==null&&t.splice(s,1)}):gNe(r,t,n)}),e.skip&&t.push(...e.skip.map(r=>r.to).filter(r=>r!=="end"))}function zRt(e){const t=[],n=[];Object.entries(e.components).forEach(([s,o])=>{var a;x4(o)&&!((a=e.baseComponents)!=null&&a[o.baseComponent])&&t.push({message:`Base component \`${o.baseComponent}\` is not defined in baseComponents object`,instancePath:`/components/${s}`,params:{action:"add the base component to the baseComponents object"}})});const r=Dxe(e.sequence);r.forEach(s=>{var o;e.components[s]||t.push({message:(o=e.baseComponents)!=null&&o[s]?`Component \`${s}\` is a base component and cannot be used in the sequence`:`Component \`${s}\` is not defined in components object`,instancePath:"/sequence/",params:{action:"add the component to the components object"}})}),Object.keys(e.components).filter(s=>!r.includes(s)).forEach(s=>{n.push({message:`Component \`${s}\` is defined in components object but not used in the sequence`,instancePath:"/components/",params:{action:"remove the component from the components object or add it to the sequence"}})});const i=[];return gNe(e.sequence,i),i.forEach(s=>{t.push({message:`Skip target \`${s}\` does not occur after the skip block it is used in`,instancePath:"/sequence/",params:{action:"add the target to the sequence after the skip block"}})}),{errors:t,warnings:n}}function VRt(e){let t=!1,n;try{n=YQ.parse(e),t=A9(n)}catch{t=!1}let r=[],i=[];if(t){const{errors:s,warnings:o}=zRt(n);r=[...A9.errors||[],...s],i=o}else r=A9.errors||[{message:"There was an issue validating your config file",instancePath:"root",params:{action:"fix the errors in your file or make sure the global config references the right file path"}}];return{...n,errors:r,warnings:i}}function yNe(){const e=Zm(),{setAlertModal:t}=Xh(),n=Qh();I.useEffect(()=>{window.history.pushState(null,"",window.location.href),window.onpopstate=()=>{window.history.pushState(null,"",window.location.href),n(t({show:!0,message:"Using the browser's back button is prohibited during the study."}))}},[e,t,n])}var zde=Object.prototype.hasOwnProperty;function Vde(e,t,n){for(n of e.keys())if(VC(n,t))return n}function VC(e,t){var n,r,i;if(e===t)return!0;if(e&&t&&(n=e.constructor)===t.constructor){if(n===Date)return e.getTime()===t.getTime();if(n===RegExp)return e.toString()===t.toString();if(n===Array){if((r=e.length)===t.length)for(;r--&&VC(e[r],t[r]););return r===-1}if(n===Set){if(e.size!==t.size)return!1;for(r of e)if(i=r,i&&typeof i=="object"&&(i=Vde(t,i),!i)||!t.has(i))return!1;return!0}if(n===Map){if(e.size!==t.size)return!1;for(r of e)if(i=r[0],i&&typeof i=="object"&&(i=Vde(t,i),!i)||!VC(r[1],t.get(i)))return!1;return!0}if(n===ArrayBuffer)e=new Uint8Array(e),t=new Uint8Array(t);else if(n===DataView){if((r=e.byteLength)===t.byteLength)for(;r--&&e.getInt8(r)===t.getInt8(r););return r===-1}if(ArrayBuffer.isView(e)){if((r=e.byteLength)===t.byteLength)for(;r--&&e[r]===t[r];);return r===-1}if(!n||typeof e=="object"){r=0;for(n in e)if(zde.call(e,n)&&++r&&!zde.call(t,n)||!(n in t)||!VC(e[n],t[n]))return!1;return Object.keys(t).length===r}}return e!==e&&t!==t}function HRt(e){var t=I.useRef(e),n=I.useRef(0);return VC(e,t.current)||(t.current=e,n.current+=1),I.useMemo(function(){return t.current},[n.current])}function qRt(e,t){return I.useEffect(e,HRt(t))}const WRt=(e,t=null)=>{const[n,r]=I.useState("idle"),[i,s]=I.useState(null),[o,a]=I.useState(null),u=I.useRef(),l=I.useRef(!1);I.useEffect(()=>(l.current=!0,()=>{l.current=!1}),[]);const c=I.useCallback((...f)=>{r("pending"),a(null);const d=Promise.resolve(e(...f)).then(h=>(l.current&&d===u.current&&(s(h),r("success")),h)).catch(h=>{throw l.current&&d===u.current&&(s(null),a(h),r("error")),h});return u.current=d,d},[e]);return qRt(()=>{if(t)try{c(...t)}catch{}},[c,t]),{execute:c,status:n,value:i,error:o}},Hde=["status","percentComplete","description","instruction","responsePrompt","answer","correctAnswer","responseMin","responseMax","startTime","endTime","duration","meta","configHash"],vNe=["participantId","trialId","trialOrder","responseId"];function LJ(e,t){const n=`data:text/json;charset=utf-8,${encodeURIComponent(e)}`,r=document.createElement("a");r.setAttribute("href",n),r.setAttribute("download",t),document.body.appendChild(r),r.click(),r.remove()}function GRt(e,t,n){const r=(Object.entries(e.answers).filter(([i,s])=>s.endTime!==void 0).length/(Tm(e.sequence).length-1)*100).toFixed(2);return Object.entries(e.answers).map(([i,s])=>{const o=i.split("_").slice(0,-1).join("_"),a=parseInt(`${i.split("_").at(-1)}`,10),u=n.components[o],l=x4(u)&&u.baseComponent&&n.baseComponents?uK({},n.baseComponents[u.baseComponent],u):u,c=s.endTime-s.startTime;return Object.entries(s.answer).map(([d,h])=>{var g,y;const p={participantId:e.participantId,trialId:o,trialOrder:a,responseId:d},m=l.response.find(v=>v.id===d);if(t.includes("status")&&(p.status=e.rejected?"rejected":e.completed?"completed":"in progress"),t.includes("configHash")&&(p.configHash=e.participantConfigHash),t.includes("percentComplete")&&(p.percentComplete=r),t.includes("description")&&(p.description=l.description),t.includes("instruction")&&(p.instruction=l.instruction),t.includes("responsePrompt")&&(p.responsePrompt=m==null?void 0:m.prompt),t.includes("answer")&&(p.answer=h),t.includes("correctAnswer")){const v=(y=(g=l.correctAnswer)==null?void 0:g.find(_=>_.id===d))==null?void 0:y.answer;p.correctAnswer=typeof v=="object"?JSON.stringify(v):v}return t.includes("responseMin")&&(p.responseMin=(m==null?void 0:m.type)==="numerical"?m.min:void 0),t.includes("responseMax")&&(p.responseMax=(m==null?void 0:m.type)==="numerical"?m.max:void 0),t.includes("startTime")&&(p.startTime=new Date(s.startTime).toISOString()),t.includes("endTime")&&(p.endTime=new Date(s.endTime).toISOString()),t.includes("duration")&&(p.duration=c),t.includes("meta")&&(p.meta=JSON.stringify(l.meta,null,2)),p}).flat()}).flat()}async function YRt(e,t,n,r){if(!n)return{header:[],rows:[]};const i=[...vNe,...e],s=[...new Set(t.map(c=>c.participantConfigHash))],o=await n.getAllConfigsFromHash(s,r),a=i,l=(await Promise.all(t.map(async c=>await GRt(c,i,o[c.participantConfigHash])))).flat().sort((c,f)=>c!==f?c.participantId.localeCompare(f.participantId):c.trialOrder-f.trialOrder);return{header:a,rows:l}}function KRt({opened:e,close:t,filename:n,data:r,studyId:i}){const[s,o]=I.useState([...Hde].filter(h=>h!=="meta")),a=Cs(),{value:u,status:l,error:c}=WRt(YRt,[s,r,a.storageEngine,i]),f=I.useCallback(()=>{if(!u)return;const h=[u.header.join(","),...u.rows.map(p=>u.header.map(m=>`"${`${p[m]}`.replace(/"/g,'""')}"`).join(","))].join(`
`);LJ(h,n)},[n,u]),d=I.useMemo(()=>{if(!u)return"";const h=u.rows.length>5?5:u.rows.length,p=h===1?"":"s";return`This is a preview of the first ${p?h:""} row${p} of the CSV. The full CSV contains ${u.rows.length} row${p}.`},[u]);return b.jsxs(Yi,{opened:e,size:"90%",onClose:t,title:"Tidy CSV Exporter",centered:!0,withCloseButton:!1,children:[b.jsx(sY,{searchable:!0,nothingFoundMessage:"Property not found",data:[...Hde],value:s,onChange:h=>o(h),label:"Included optional columns:",leftSection:b.jsx(CQe,{}),variant:"filled"}),b.jsx(Pl,{h:"md"}),b.jsxs(pe,{mih:300,style:{width:"100%",overflow:"scroll"},children:[l==="success"&&u?b.jsxs(qt,{striped:!0,captionSide:"bottom",withTableBorder:!0,children:[b.jsx(qt.Thead,{children:b.jsx(qt.Tr,{children:u.header.map(h=>b.jsx(qt.Th,{style:{whiteSpace:"nowrap",minWidth:["description","instruction","participantId"].includes(h)?200:void 0},children:b.jsxs(Nt,{direction:"row",justify:"space-between",align:"center",children:[h,!vNe.includes(h)&&b.jsx(Mb,{onClick:()=>o(s.filter(p=>p!==h)),style:{marginBottom:-3,marginLeft:8},variant:"subtle",color:"gray",children:b.jsx(OY,{size:16})})]})},h))})}),b.jsx(qt.Tbody,{children:u.rows.slice(0,5).map((h,p)=>b.jsx(qt.Tr,{children:u.header.map(m=>b.jsx(qt.Td,{style:{whiteSpace:["description","instruction","participantId"].includes(m)?"normal":"nowrap"},children:h[m]},`${p}-${m}`))},p))})]}):l==="error"&&c?b.jsx(eS,{variant:"light",children:c.message}):null,b.jsx(Fl,{visible:l==="pending"||l==="idle"})]}),b.jsx(Pl,{h:"sm"}),b.jsx(Nt,{justify:"center",fz:"sm",c:"dimmed",children:b.jsx(Xe,{children:d})}),b.jsx(Pl,{h:"md"}),b.jsxs(ls,{justify:"right",children:[b.jsx(fn,{onClick:t,color:"dark",variant:"subtle",children:"Close"}),b.jsx(fn,{leftSection:b.jsx(jwe,{}),onClick:()=>f(),"data-autofocus":!0,children:"Download"})]})]})}function XRt(){const e=H0(),{storageEngine:t}=Cs(),{answers:n}=Kc(v=>v),[r,i]=I.useState(!1);I.useEffect(()=>{const v=setInterval(async()=>{await t.verifyCompletion(n)&&(i(!0),clearInterval(v))},1e3)},[]),yNe();const[s,o]=I.useState(),[a,u]=I.useState(""),l=e.studyMetadata.title.replace(" ","_");I.useEffect(()=>{async function v(){if(t){const _=await t.getCurrentParticipantId(),w=await t.getParticipantData();u(_),o(w)}}v()},[t]);const c=I.useCallback(async()=>{LJ(JSON.stringify(s,null,2),`${l}_${a}.json`)},[l,s,a]),f=e.uiConfig.autoDownloadStudy||!1,d=f&&e.uiConfig.autoDownloadTime||-1,[h,p]=I.useState(Math.floor(d/1e3));I.useEffect(()=>{if(r){const v=setInterval(()=>{p(_=>_-1)},1e3);return h<=0?(f&&c(),clearInterval(v),()=>clearInterval(v)):()=>clearInterval(v)}return()=>{}},[f,r,h,c]);const m=qb(),[g,y]=I.useState(!1);return I.useEffect(()=>{(async()=>{if(t){const _=await t.getModes(m);y(_.dataCollectionEnabled)}})()},[t,m]),b.jsx(Oc,{style:{height:"100%"},children:b.jsx(Nt,{direction:"column",children:r||!g?b.jsx(Xe,{size:"xl",display:"block",children:e.uiConfig.studyEndMsg?b.jsx(Ja,{text:e.uiConfig.studyEndMsg}):"Thank you for completing the study. You may close this window now."}):b.jsxs(b.Fragment,{children:[b.jsx(Xe,{size:"xl",display:"block",children:"Please wait while your answers are uploaded."}),b.jsx(Pl,{h:"lg"}),b.jsx(Oc,{children:b.jsx(od,{color:"blue"})})]})})})}function QRt(){return b.jsx(Xe,{children:"Thank you for participating. Unfortunately you have didn't answer the training correctly, which means you are not eligible to participate in the study. You may close this window now."})}function JRt(){var d;const e=H0(),t=Zm(),n=Ly()||"Notfound",r=e.components[n],i=lK();yNe();const{storageEngine:s}=Cs(),o=Qh(),{setAlertModal:a}=Xh();if(I.useEffect(()=>{(s==null?void 0:s.getEngine())!=="firebase"&&o(a({show:!0,message:"There was an issue connecting to the firebase database. This could be caused by a network issue or your adblocker. If you are using an adblocker, please disable it for this website and refresh."}))},[a,s,o]),n==="end")return b.jsx(XRt,{});if(n==="__trainingFailed")return b.jsx(QRt,{});if(n==="Notfound")return b.jsx(q1,{email:e.uiConfig.contactEmail});const u=x4(r)&&e.baseComponents?uK({},(d=e.baseComponents)==null?void 0:d[r.baseComponent],r):r,l=u.instruction||"",{instructionLocation:c}=u,f=e.uiConfig.sidebar&&(c==="sidebar"||c===void 0);return b.jsxs(b.Fragment,{children:[c==="aboveStimulus"&&b.jsx(Ja,{text:l}),b.jsx(c3,{status:i,config:u,location:"aboveStimulus"},`${t}-above-response-block`),b.jsxs(I.Suspense,{fallback:b.jsx("div",{children:"Loading..."}),children:[u.type==="markdown"&&b.jsx(J2t,{currentConfig:u}),u.type==="website"&&b.jsx(Dat,{currentConfig:u}),u.type==="image"&&b.jsx($at,{currentConfig:u}),u.type==="react-component"&&b.jsx(Q2t,{currentConfig:u})]},`${t}-stimulus`),(c==="belowStimulus"||c===void 0&&!f)&&b.jsx(Ja,{text:l}),b.jsx(c3,{status:i,config:u,location:"belowStimulus"},`${t}-below-response-block`)]})}function RV(e){const[t]=NY();return b.jsx(RY,{...e,to:{pathname:e.to,search:t.toString()}})}function bNe(e,t,n,r){let i=0;for(let s=0;s<e.components.length;s+=1){const o=e.components[s];if(typeof o=="string"){if(r===e.orderPath&&o===t&&s>=n)break;i+=1}else if(i+=bNe(o,t,n,r),r.includes(o.orderPath))break}return i}function _Ne(e,t){let n=0;return t.components.forEach(r=>{var i;if(typeof r=="string"&&((i=e.interruptions)!=null&&i.flatMap(s=>s.components).includes(r)))n+=1;else if(typeof r!="string"){const s=e.components.find(o=>typeof o!="string"&&o.orderPath===r.orderPath);n+=_Ne(s,r)}}),n}function ZRt(e,t){const n=[];return t.forEach(r=>{const i=e.findIndex(s=>typeof s=="string"?s===r:typeof r!="string"&&s.orderPath===r.orderPath);i!==-1&&(n.push(e[i]),e.splice(i,1)),i===-1&&typeof r=="string"&&n.push(r)}),n.push(...e),n}function eNt({step:e,disabled:t,fullSequence:n,startIndex:r,interruption:i,participantView:s,studyConfig:o,subSequence:a,analysisNavigation:u}){const l=qb(),c=Yh(),f=Zm(),[d,{close:h,open:p}]=xL(!1),m=e in o.components&&o.components[e],g=a&&a.components.slice(r).includes(e)?bNe(n,e,r,a.orderPath):-1,{trialId:y}=Em(),v=y===e,_=s?f===g:f===`reviewer-${e}`,w=u?v:_,E=I.useCallback(()=>c(y?`./../${e}`:`./${e}`),[c,e,y]),T=u?E:()=>c(s?`/${l}/${g}`:`/${l}/reviewer-${e}`);return b.jsxs(Po,{withinPortal:!0,position:"left",withArrow:!0,arrowSize:10,shadow:"md",opened:d,offset:20,children:[b.jsx(Po.Target,{children:b.jsx(pe,{onMouseEnter:p,onMouseLeave:h,children:b.jsx(QL,{active:w,style:{lineHeight:"32px",height:"32px"},label:b.jsxs(pe,{children:[i&&b.jsx(hQe,{size:16,style:{marginRight:4,marginBottom:-2},color:"orange"}),w?b.jsx(Xe,{size:"sm",span:!0,fw:"700",display:"inline",children:e}):b.jsx(Xe,{size:"sm",display:"inline",children:e})]}),onClick:T,disabled:t})})}),m&&(m.description||m.meta)&&b.jsx(Po.Dropdown,{onMouseLeave:h,children:b.jsx(Xe,{size:"sm",children:b.jsxs(pe,{children:[m.description&&b.jsxs(pe,{children:[b.jsx(Xe,{fw:900,display:"inline-block",mr:2,children:"Description:"}),b.jsx(Xe,{fw:400,component:"span",children:m.description})]}),m.meta&&b.jsxs(Xe,{children:[b.jsx(Xe,{fw:"900",component:"span",children:"Task Meta: "}),b.jsx(Xe,{component:"pre",style:{margin:0,padding:0},children:`${JSON.stringify(m.meta,null,2)}`})]})]})})})]})}function q$({configSequence:e,fullSequence:t,participantSequence:n,participantView:r,studyConfig:i,analysisNavigation:s}){var a;let o=x0(e.components);return n&&r&&(o=ZRt(x0(e.components),x0(n.components))),r||(o=[...((a=e.interruptions)==null?void 0:a.flatMap(u=>u.components))||[],...o]),b.jsx(b.Fragment,{children:o.map((u,l)=>{if(typeof u=="string")return b.jsx(eNt,{step:u,disabled:r&&(n==null?void 0:n.components[l])!==u,fullSequence:t,startIndex:l,interruption:e.interruptions&&e.interruptions.findIndex(h=>h.components.includes(u))>-1||!1,participantView:r,studyConfig:i,subSequence:n,analysisNavigation:s},l);const c=n==null?void 0:n.components.find(h=>typeof h!="string"&&h.orderPath===u.orderPath),f=c?Tm(c).length-_Ne(u,c):0,d=Tm(u);return b.jsx(QL,{label:b.jsxs(pe,{style:{opacity:f>0?1:.5},children:[b.jsx(Xe,{size:"sm",display:"inline",children:u.order}),u.order==="random"||u.order==="latinSquare"?b.jsx(fQe,{size:"15",opacity:.5,style:{marginLeft:"5px",verticalAlign:"middle"}}):null,r&&b.jsxs(_0,{ml:5,variant:"light",children:[f,"/",d.length]}),r&&u.interruptions&&b.jsx(_0,{ml:5,color:"orange",variant:"light",children:(c==null?void 0:c.components.filter(h=>{var p;return typeof h=="string"&&((p=u.interruptions)==null?void 0:p.flatMap(m=>m.components).includes(h))}).length)||0})]}),defaultOpened:!0,childrenOffset:32,style:{lineHeight:"32px",height:"32px"},children:b.jsx(pe,{style:{borderLeft:"1px solid #e9ecef"},children:b.jsx(q$,{configSequence:u,participantSequence:c,fullSequence:t,participantView:r,studyConfig:i,analysisNavigation:s})})},l)})})}function wNe(e,t,n,r){e==null||e.nextParticipant().then(()=>{window.location.href=r}).catch(i=>{console.error(i)})}function qde({text:e}){return b.jsx(ui,{label:e,multiline:!0,w:200,style:{whiteSpace:"normal"},withinPortal:!0,position:"bottom",children:b.jsx(Mwe,{size:16,style:{marginBottom:-3,marginLeft:4}})})}function tNt(){const{sequence:e,metadata:t}=Kc(f=>f),{toggleStudyBrowser:n}=Xh(),r=H0(),i=Qh(),s=qb(),o=Rwe(`/${s}`),{storageEngine:a}=Cs(),u=I.useMemo(()=>{let f=x0(r.sequence);return f=oK(f,"root"),f.components.push("end"),f},[r.sequence]),[l,c]=I.useState("participant");return b.jsxs(ni.Aside,{p:"0",children:[b.jsx(ni.Section,{children:b.jsxs(Nt,{direction:"row",p:"sm",justify:"space-between",pb:"xs",children:[b.jsx(Xe,{size:"md",fw:700,pt:3,children:"Study Browser"}),b.jsx(fn,{variant:"light",leftSection:b.jsx(DY,{size:14}),onClick:()=>wNe(a,r,t,o),size:"xs",disabled:l==="allTrials",children:"Next Participant"}),b.jsx(Gm,{onClick:()=>i(n()),mt:1})]})}),b.jsx(ni.Section,{grow:!0,component:bm,p:"xs",pt:0,children:b.jsxs(ns,{value:l,onChange:c,children:[b.jsx(pe,{style:{position:"sticky",top:0,backgroundColor:"white",zIndex:1},children:b.jsxs(ns.List,{grow:!0,children:[b.jsxs(ns.Tab,{value:"participant",children:["Participant View",b.jsx(qde,{text:"The Participants View shows items just as a participants would see them, considering randomization, omissions, etc. You can navigate between multiple participants using the next participant button."})]}),b.jsxs(ns.Tab,{value:"allTrials",children:["All Trials View",b.jsx(qde,{text:"The All Trials View shows all items in the order defined in the config."})]})]})}),b.jsx(ns.Panel,{value:"participant",children:b.jsx(q$,{configSequence:u,participantSequence:e,fullSequence:e,participantView:!0,studyConfig:r})}),b.jsx(ns.Panel,{value:"allTrials",children:b.jsx(q$,{configSequence:u,participantSequence:e,fullSequence:e,participantView:!1,studyConfig:r})})]})})]})}function nNt({studyNavigatorEnabled:e,dataCollectionEnabled:t}){const{config:n,metadata:r}=Kc(E=>E),i=aK(),s=Qh(),{toggleShowHelpText:o,toggleStudyBrowser:a}=Xh(),{storageEngine:u}=Cs(),l=Zm(),c=i.length-1,f=typeof l=="number"?l/c*100:0,[d,h]=I.useState(!1),p=n==null?void 0:n.uiConfig.logoPath,m=n==null?void 0:n.uiConfig.withProgressBar,g=qb(),y=Rwe(`/${g}`),v=I.useRef(null),[_,w]=I.useState(!1);return I.useEffect(()=>{const E=v.current;E&&w(E.scrollWidth>E.offsetWidth)},[n]),b.jsx(ni.Header,{p:"md",children:b.jsxs(qa,{mt:-7,align:"center",children:[b.jsx(qa.Col,{span:4,children:b.jsxs(Nt,{align:"center",children:[b.jsx(Dy,{w:40,src:`${Hu}${p}`,alt:"Study Logo"}),b.jsx(Pl,{w:"md"}),b.jsx(li,{ref:v,order:4,style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},title:_?n==null?void 0:n.studyMetadata.title:void 0,children:n==null?void 0:n.studyMetadata.title})]})}),b.jsx(qa.Col,{span:4,children:m&&b.jsx(sS,{radius:"md",size:"lg",value:f})}),b.jsx(qa.Col,{span:4,children:b.jsxs(ls,{wrap:"nowrap",justify:"right",children:[!t&&b.jsx(ui,{multiline:!0,withArrow:!0,arrowSize:6,w:300,label:"This is a demo version of the study, we’re not collecting any data.",children:b.jsx(_0,{size:"lg",color:"orange",children:"Demo Mode"})}),(n==null?void 0:n.uiConfig.helpTextPath)!==void 0&&b.jsx(fn,{variant:"outline",onClick:()=>s(o()),children:"Help"}),b.jsxs(Au,{shadow:"md",width:200,withinPortal:!0,opened:d,onChange:h,children:[b.jsx(Au.Target,{children:b.jsx(Mb,{size:"lg",className:"studyBrowserMenuDropdown",variant:"subtle",color:"gray",children:b.jsx(wQe,{})})}),b.jsxs(Au.Dropdown,{children:[e&&b.jsx(Au.Item,{leftSection:b.jsx(DQe,{size:14}),onClick:()=>s(a()),children:"Study Browser"}),b.jsx(Au.Item,{component:"a",href:n!==null?`mailto:${n.uiConfig.contactEmail}`:void 0,leftSection:b.jsx(AQe,{size:14}),children:"Contact"}),e&&b.jsx(Au.Item,{leftSection:b.jsx(DY,{size:14}),onClick:()=>wNe(u,n,r,y),children:"Next Participant"})]})]})]})})]})})}function ENe(e,t){var n;return x4(e)&&t.baseComponents?uK({},(n=t.baseComponents)==null?void 0:n[e.baseComponent],e):e}function rNt(){var u;const e=(u=H0())==null?void 0:u.uiConfig.sidebar,t=H0(),n=Ly(),r=t.components[n],i=I.useMemo(()=>r?ENe(r,t):null,[r,t]),s=lK(),o=(i==null?void 0:i.instruction)||"",a=(i==null?void 0:i.instructionLocation)==="sidebar"||(i==null?void 0:i.instructionLocation)===void 0;return e&&i?b.jsxs(ni.Navbar,{bg:"gray.1",display:"block",style:{zIndex:0,overflowY:"scroll"},children:[a&&o!==""&&b.jsxs(ni.Section,{bg:"gray.3",p:"md",children:[b.jsxs(Xe,{c:"gray.9",children:[b.jsx(Xe,{span:!0,c:"orange.8",fw:700,inherit:!0,children:"Task:"}),b.jsx(Ja,{text:o})]}),b.jsx(ERe,{size:300})]}),b.jsx(ni.Section,{bg:"gray.3",p:"md"}),b.jsx(ni.Section,{p:"md",children:b.jsx(c3,{status:s,config:i,location:"sidebar"},`${n}-sidebar-response-block`)})]}):b.jsx(ni.Navbar,{bg:"gray.1",display:"block",style:{zIndex:0,overflowY:"scroll"},children:b.jsx(c3,{status:s,config:i,location:"sidebar",style:{display:"hidden"}},`${n}-sidebar-response-block`)})}function iNt(){const{showHelpText:e,config:t}=Kc(u=>u),n=Qh(),{toggleShowHelpText:r}=Xh(),[i,s]=I.useState(""),[o,a]=I.useState(!0);return I.useEffect(()=>{async function u(){const l=await fK(t.uiConfig.helpTextPath);l!==void 0&&s(l),a(!1)}u()},[t.uiConfig.helpTextPath]),b.jsx(Yi,{size:"70%",opened:e,withCloseButton:!1,onClose:()=>n(r()),children:o||i?b.jsx(Ja,{text:i}):b.jsx(q1,{path:t.uiConfig.helpTextPath})})}function sNt(){const{alertModal:e}=Kc(o=>o),{setAlertModal:t}=Xh(),n=Qh(),[r,i]=I.useState(e.show),s=I.useCallback(()=>n(t({...e,show:!1})),[e,t,n]);return I.useEffect(()=>i(e.show),[e.show]),b.jsx(Yi,{opened:r,centered:!0,size:"lg",withCloseButton:!1,onClose:s,children:b.jsxs(eS,{color:"red",radius:"xs",title:"Alert",icon:b.jsx(cQe,{}),onClose:s,styles:{root:{backgroundColor:"unset"}},children:[b.jsx(Xe,{my:"md",children:e.message}),b.jsx(ls,{w:"100%",justify:"end",children:b.jsx(fn,{onClick:s,color:"red",variant:"filled",m:"xs",children:"Continue Study"})})]})})}function oNt(){const e=I.useRef([]),t=H0(),n=t.uiConfig.windowEventDebounceTime??100,r=Kc(d=>d.showStudyBrowser);I.useEffect(()=>{const d=df(E=>{e.current.push([Date.now(),"focus",E.target instanceof HTMLElement?E.target.tagName:""])},n,{maxWait:n}),h=df(E=>{e.current.push([Date.now(),"input",E.data??""])},n,{maxWait:n}),p=df(E=>{e.current.push([Date.now(),"keypress",E.key])},n,{maxWait:n}),m=df(E=>{e.current.push([Date.now(),"mousedown",[E.clientX,E.clientY]])},n,{maxWait:n}),g=df(E=>{e.current.push([Date.now(),"mouseup",[E.clientX,E.clientY]])},n,{maxWait:n}),y=df(()=>{e.current.push([Date.now(),"resize",[window.innerWidth,window.innerHeight]])},n,{maxWait:n}),v=df(E=>{e.current.push([Date.now(),"mousemove",[E.clientX,E.clientY]])},n,{maxWait:n}),_=df(()=>{e.current.push([Date.now(),"scroll",[window.scrollX,window.scrollY]])},n,{maxWait:n}),w=df(()=>{e.current.push([Date.now(),"visibility",document.visibilityState])},n,{maxWait:n});return window.addEventListener("focus",d,!0),window.addEventListener("input",h),window.addEventListener("keypress",p),window.addEventListener("mousedown",m),window.addEventListener("mouseup",g),window.addEventListener("resize",y),window.addEventListener("mousemove",v),window.addEventListener("scroll",_),document.addEventListener("visibilitychange",w),()=>{window.removeEventListener("focus",d,!0),window.removeEventListener("input",h),window.removeEventListener("keypress",p),window.addEventListener("mousedown",m),window.addEventListener("mouseup",g),window.removeEventListener("resize",y),window.removeEventListener("mousemove",v),window.removeEventListener("scroll",_),document.removeEventListener("visibilitychange",w)}},[]);const i=t.uiConfig.sidebarWidth??300,{storageEngine:s}=Cs(),o=qb(),[a,u]=I.useState(!1),[l,c]=I.useState(!1);I.useEffect(()=>{(async()=>{if(s){const h=await s.getModes(o);u(h.studyNavigatorEnabled),c(h.dataCollectionEnabled)}})()},[s,o]);const f=I.useMemo(()=>a&&r,[a,r]);return b.jsx(jxe.Provider,{value:e,children:b.jsxs(ni,{padding:"md",header:{height:70},navbar:{width:i,breakpoint:"xs",collapsed:{desktop:!t.uiConfig.sidebar,mobile:!t.uiConfig.sidebar}},aside:{width:360,breakpoint:"xs",collapsed:{desktop:!f,mobile:!f}},children:[b.jsx(rNt,{}),b.jsx(tNt,{}),b.jsx(nNt,{studyNavigatorEnabled:a,dataCollectionEnabled:l}),b.jsx(iNt,{}),b.jsx(sNt,{}),b.jsx(ni.Main,{children:b.jsx(KXe,{})})]})})}function aNt(e,t=!1){return typeof e=="number"?Wde(e,t):Wde(e.length,t).map(r=>r.map(i=>e[i]))}function Wde(e,t){if(e<0)throw new Error("Latin square size must be > 0");if(e==0)return[];if(e==1)return[[0]];let n=new Array(e);for(let s=0;s<e;s++)s<2?n[s]=s:s%2==0?n[s]=e-s/2:n[s]=Math.floor(s/2)+1;let r=[n],i=n;for(let s=1;s<e;s+=1){let o=i.map(a=>(a+1)%e);r.push(o),i=o}if(t&&e%2>0)for(let s=0;s<e;s+=1)r.push(r[s].slice().reverse());return r}function xNe(e,t,n){let r=e.components;e.order==="random"?r=e.components.sort(()=>.5-Math.random()):e.order==="latinSquare"&&t&&(r=t[n].pop().map(i=>i.startsWith("_componentBlock")?e.components[+i.slice(15)]:i)),r=r.slice(0,e.numSamples);for(let i=0;i<r.length;i+=1){const s=r[i];if(typeof s!="string"&&!Array.isArray(s)){const o=e.components.indexOf(s);r[i]=xNe(s,t,`${n}-${o}`)}}return e.interruptions&&e.interruptions.forEach(i=>{const s=[];if(i.spacing!=="random")for(let o=0;o<r.length;o+=1)(o===i.firstLocation||o>i.firstLocation&&o%i.spacing===0)&&s.push(i.components),s.push(r[o]);if(i.spacing==="random"){const o=new Set;if(i.numInterruptions>r.length-1)throw new Error("Number of interruptions cannot be greater than the number of components");for(;o.size<i.numInterruptions;){const l=Math.floor(Math.random()*r.length-1)+1;o.add(l)}const a=Array.from(o).sort((l,c)=>l-c);let u=0;for(let l=0;l<r.length;l+=1)l===a[u]&&(s.push(i.components),u+=1),s.push(r[l])}r=s}),{id:e.id,orderPath:n,components:r.flat(),skip:e.skip}}function uNt(e,t){const n=x0(e);return xNe(n,t,"root")}function SNe(e,t,n,r=0){const i=n.length>0?`${n}-${r}`:"root";e.order==="latinSquare"&&t.push(i),e.components.forEach((s,o)=>{typeof s!="string"&&SNe(s,t,i,o)})}function lNt(e){const t=[];return SNe(e,t,"",0),t}function Gde(e,t){const n=t.split("-");let r={};n.forEach(o=>{o==="root"?r=e.sequence:r=r.components[+o]});const i=r.components.map((o,a)=>typeof o=="string"?o:`_componentBlock${a}`);return aNt(i.sort(()=>.5-Math.random()),!0)}function cNt(e){const n=lNt(e.sequence).map(s=>({[s]:Gde(e,s)})).reduce((s,o)=>({...s,...o}),{}),r=e.uiConfig.numSequences||1e3,i=[];return Array.from({length:r}).forEach(()=>{const s=uNt(e.sequence,n);s.components.push("end"),i.push(s),Object.entries(n).forEach(([o,a])=>{a.length===0&&(n[o]=Gde(e,o))})}),i}var fNt={VITE_BASE_PATH:"/study/",VITE_FIREBASE_CONFIG:`
{
  apiKey: "AIzaSyBR5snEuMQodNBn3tFkZ9VZtVha81rSiUs",
  authDomain: "mock-mqp.firebaseapp.com",
  projectId: "mock-mqp",
  storageBucket: "mock-mqp.appspot.com",
  messagingSenderId: "810459265279",
  appId: "1:810459265279:web:1f321cea4ef5376865f4ca",
  measurementId: "G-EFGFSXZL35"
}
`,VITE_STORAGE_ENGINE:"firebase",VITE_RECAPTCHAV3TOKEN:"6LfADT8qAAAAAAi4qNf-NQaCV0RXzIqKvBrxNjx2",BASE_URL:"/study/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};async function dNt(e){const t=await(await fetch(`${Hu}${e}`)).text();return VRt(t)}async function S4(e,t){const n=t.configsList.find(r=>Uwe(r)===e);if(n){const r=t.configs[n];return await dNt(`${r.path}`)}return null}async function hNt(e){const t={},n=e.configsList.filter(i=>fNt.VITE_CI==="true"?!0:!e.configs[i].test).map(async i=>S4(i,e)),r=await Promise.all(n);return e.configsList.forEach((i,s)=>{t[i]=r[s]}),t}function pNt({globalConfig:e}){const t=qb(),[n,r]=I.useState(null),i=e.configsList.includes(t);I.useEffect(()=>{S4(t,e).then(h=>{r(h)})},[e,t]);const[s,o]=I.useState([]),[a,u]=I.useState(null),{storageEngine:l}=Cs(),[c]=NY();I.useEffect(()=>{async function h(){if(!l||!n||!t)return;await l.initializeStudyDb(t,n),await l.getSequenceArray()||await l.setSequenceArray(await cNt(n));const m=n.uiConfig.urlParticipantIdParam&&c.get(n.uiConfig.urlParticipantIdParam)||void 0,g=Object.fromEntries(c.entries()),y=await fetch("https://api.ipify.org?format=json").catch(S=>""),v=y instanceof Response?await y.json():{ip:""},_={language:navigator.language,userAgent:navigator.userAgent,resolution:{width:window.screen.width,height:window.screen.height,availHeight:window.screen.availHeight,availWidth:window.screen.availWidth,colorDepth:window.screen.colorDepth,orientation:window.screen.orientation.type,pixelDepth:window.screen.pixelDepth},ip:v.ip},w=await l.initializeParticipantSession(t,g,n,_,m),E=await Jot(t,n,w.sequence,_,w.answers);u(E),o([{element:b.jsx(oNt,{}),children:[{path:"/",element:b.jsx(RV,{to:"0",replace:!0})},{path:"/:index",element:n.errors.length>0?b.jsxs(b.Fragment,{children:[b.jsx(li,{order:2,mb:8,children:"Error loading config"}),b.jsx(T7,{issues:n.errors,type:"error"})]}):b.jsx(JRt,{})}]}])}h()},[l,n,t,c]);const f=Pwe(s);let d=null;return i?s.length===0?d=b.jsx(Fl,{visible:!0}):d=f&&a?b.jsx(Fxe.Provider,{value:a,children:b.jsx(Wst,{store:a.store,children:f})}):b.jsx(q1,{}):d=b.jsx(q1,{}),d}var Yde={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TNe=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=i&63|128):(i&64512)===55296&&r+1<e.length&&(e.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(e.charCodeAt(++r)&1023),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=i&63|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=i&63|128)}return t},mNt=function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=e[n++],o=e[n++],a=e[n++],u=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;t[r++]=String.fromCharCode(55296+(u>>10)),t[r++]=String.fromCharCode(56320+(u&1023))}else{const s=e[n++],o=e[n++];t[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return t.join("")},FJ={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const s=e[i],o=i+1<e.length,a=o?e[i+1]:0,u=i+2<e.length,l=u?e[i+2]:0,c=s>>2,f=(s&3)<<4|a>>4;let d=(a&15)<<2|l>>6,h=l&63;u||(h=64,o||(d=64)),r.push(n[c],n[f],n[d],n[h])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(TNe(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):mNt(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const s=n[e.charAt(i++)],a=i<e.length?n[e.charAt(i)]:0;++i;const l=i<e.length?n[e.charAt(i)]:64;++i;const f=i<e.length?n[e.charAt(i)]:64;if(++i,s==null||a==null||l==null||f==null)throw new gNt;const d=s<<2|a>>4;if(r.push(d),l!==64){const h=a<<4&240|l>>2;if(r.push(h),f!==64){const p=l<<6&192|f;r.push(p)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class gNt extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const yNt=function(e){const t=TNe(e);return FJ.encodeByteArray(t,!0)},W$=function(e){return yNt(e).replace(/\./g,"")},CNe=function(e){try{return FJ.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ANe(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vNt=()=>ANe().__FIREBASE_DEFAULTS__,bNt=()=>{if(typeof process>"u"||typeof Yde>"u")return;const e=Yde.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},_Nt=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&CNe(e[1]);return t&&JSON.parse(t)},T4=()=>{try{return vNt()||bNt()||_Nt()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},INe=e=>{var t,n;return(n=(t=T4())===null||t===void 0?void 0:t.emulatorHosts)===null||n===void 0?void 0:n[e]},wNt=e=>{const t=INe(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),r]:[t.substring(0,n),r]},kNe=()=>{var e;return(e=T4())===null||e===void 0?void 0:e.config},RNe=e=>{var t;return(t=T4())===null||t===void 0?void 0:t[`_${e}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gI{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ENt(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=t||"demo-project",i=e.iat||0,s=e.sub||e.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},e);return[W$(JSON.stringify(n)),W$(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fo(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function xNt(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Fo())}function SNt(){var e;const t=(e=T4())===null||e===void 0?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function TNt(){const e=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof e=="object"&&e.id!==void 0}function CNt(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function ANt(){const e=Fo();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function INt(){return!SNt()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function jJ(){try{return typeof indexedDB=="object"}catch{return!1}}function kNt(){return new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;t(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){t(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RNt="FirebaseError";class rp extends Error{constructor(t,n,r){super(n),this.code=t,this.customData=r,this.name=RNt,Object.setPrototypeOf(this,rp.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,MS.prototype.create)}}class MS{constructor(t,n,r){this.service=t,this.serviceName=n,this.errors=r}create(t,...n){const r=n[0]||{},i=`${this.service}/${t}`,s=this.errors[t],o=s?NNt(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new rp(i,a,r)}}function NNt(e,t){return e.replace(PNt,(n,r)=>{const i=t[r];return i!=null?String(i):`<${r}?>`})}const PNt=/\{\$([^}]+)}/g;function DNt(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function yI(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const s=e[i],o=t[i];if(Kde(s)&&Kde(o)){if(!yI(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function Kde(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xk(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(i=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function ONt(e,t){const n=new $Nt(e,t);return n.subscribe.bind(n)}class $Nt{constructor(t,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{t(this)}).catch(r=>{this.error(r)})}next(t){this.forEachObserver(n=>{n.next(t)})}error(t){this.forEachObserver(n=>{n.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,n,r){let i;if(t===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");MNt(t,["next","error","complete"])?i=t:i={next:t,error:n,complete:r},i.next===void 0&&(i.next=I9),i.error===void 0&&(i.error=I9),i.complete===void 0&&(i.complete=I9);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,t)}sendOne(t,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{n(this.observers[t])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function MNt(e,t){if(typeof e!="object"||e===null)return!1;for(const n of t)if(n in e&&typeof e[n]=="function")return!0;return!1}function I9(){}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LNt=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{const t=Math.random()*16|0;return(e==="x"?t:t&3|8).toString(16)})};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FNt=1e3,jNt=2,BNt=4*60*60*1e3,UNt=.5;function zNt(e,t=FNt,n=jNt){const r=t*Math.pow(n,e),i=Math.round(UNt*r*(Math.random()-.5)*2);return Math.min(BNt,r+i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function si(e){return e&&e._delegate?e._delegate:e}class $h{constructor(t,n,r){this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fv="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VNt{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const r=new gI;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){var n;const r=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),i=(n=t==null?void 0:t.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(qNt(t))try{this.getOrInitializeService({instanceIdentifier:Fv})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(t=Fv){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=Fv){return this.instances.has(t)}getOptions(t=Fv){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,r=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(t,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(t),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&t(o,i),()=>{s.delete(t)}}invokeOnInitCallbacks(t,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:HNt(t),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch{}return r||null}normalizeInstanceIdentifier(t=Fv){return this.component?this.component.multipleInstances?t:Fv:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function HNt(e){return e===Fv?void 0:e}function qNt(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WNt{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new VNt(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Gn;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(Gn||(Gn={}));const GNt={debug:Gn.DEBUG,verbose:Gn.VERBOSE,info:Gn.INFO,warn:Gn.WARN,error:Gn.ERROR,silent:Gn.SILENT},YNt=Gn.INFO,KNt={[Gn.DEBUG]:"log",[Gn.VERBOSE]:"log",[Gn.INFO]:"info",[Gn.WARN]:"warn",[Gn.ERROR]:"error"},XNt=(e,t,...n)=>{if(t<e.logLevel)return;const r=new Date().toISOString(),i=KNt[t];if(i)console[i](`[${r}]  ${e.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class C4{constructor(t){this.name=t,this._logLevel=YNt,this._logHandler=XNt,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Gn))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?GNt[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Gn.DEBUG,...t),this._logHandler(this,Gn.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Gn.VERBOSE,...t),this._logHandler(this,Gn.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Gn.INFO,...t),this._logHandler(this,Gn.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Gn.WARN,...t),this._logHandler(this,Gn.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Gn.ERROR,...t),this._logHandler(this,Gn.ERROR,...t)}}const QNt=(e,t)=>t.some(n=>e instanceof n);let Xde,Qde;function JNt(){return Xde||(Xde=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function ZNt(){return Qde||(Qde=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const NNe=new WeakMap,NV=new WeakMap,PNe=new WeakMap,k9=new WeakMap,BJ=new WeakMap;function ePt(e){const t=new Promise((n,r)=>{const i=()=>{e.removeEventListener("success",s),e.removeEventListener("error",o)},s=()=>{n(I0(e.result)),i()},o=()=>{r(e.error),i()};e.addEventListener("success",s),e.addEventListener("error",o)});return t.then(n=>{n instanceof IDBCursor&&NNe.set(n,e)}).catch(()=>{}),BJ.set(t,e),t}function tPt(e){if(NV.has(e))return;const t=new Promise((n,r)=>{const i=()=>{e.removeEventListener("complete",s),e.removeEventListener("error",o),e.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(e.error||new DOMException("AbortError","AbortError")),i()};e.addEventListener("complete",s),e.addEventListener("error",o),e.addEventListener("abort",o)});NV.set(e,t)}let PV={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return NV.get(e);if(t==="objectStoreNames")return e.objectStoreNames||PNe.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return I0(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function nPt(e){PV=e(PV)}function rPt(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const r=e.call(R9(this),t,...n);return PNe.set(r,t.sort?t.sort():[t]),I0(r)}:ZNt().includes(e)?function(...t){return e.apply(R9(this),t),I0(NNe.get(this))}:function(...t){return I0(e.apply(R9(this),t))}}function iPt(e){return typeof e=="function"?rPt(e):(e instanceof IDBTransaction&&tPt(e),QNt(e,JNt())?new Proxy(e,PV):e)}function I0(e){if(e instanceof IDBRequest)return ePt(e);if(k9.has(e))return k9.get(e);const t=iPt(e);return t!==e&&(k9.set(e,t),BJ.set(t,e)),t}const R9=e=>BJ.get(e);function sPt(e,t,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(e,t),a=I0(o);return r&&o.addEventListener("upgradeneeded",u=>{r(I0(o.result),u.oldVersion,u.newVersion,I0(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),a.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}const oPt=["get","getKey","getAll","getAllKeys","count"],aPt=["put","add","delete","clear"],N9=new Map;function Jde(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(N9.get(t))return N9.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=aPt.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||oPt.includes(n)))return;const s=async function(o,...a){const u=this.transaction(o,i?"readwrite":"readonly");let l=u.store;return r&&(l=l.index(a.shift())),(await Promise.all([l[n](...a),i&&u.done]))[0]};return N9.set(t,s),s}nPt(e=>({...e,get:(t,n,r)=>Jde(t,n)||e.get(t,n,r),has:(t,n)=>!!Jde(t,n)||e.has(t,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uPt{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(lPt(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function lPt(e){const t=e.getComponent();return(t==null?void 0:t.type)==="VERSION"}const DV="@firebase/app",Zde="0.10.5";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sb=new C4("@firebase/app"),cPt="@firebase/app-compat",fPt="@firebase/analytics-compat",dPt="@firebase/analytics",hPt="@firebase/app-check-compat",pPt="@firebase/app-check",mPt="@firebase/auth",gPt="@firebase/auth-compat",yPt="@firebase/database",vPt="@firebase/database-compat",bPt="@firebase/functions",_Pt="@firebase/functions-compat",wPt="@firebase/installations",EPt="@firebase/installations-compat",xPt="@firebase/messaging",SPt="@firebase/messaging-compat",TPt="@firebase/performance",CPt="@firebase/performance-compat",APt="@firebase/remote-config",IPt="@firebase/remote-config-compat",kPt="@firebase/storage",RPt="@firebase/storage-compat",NPt="@firebase/firestore",PPt="@firebase/vertexai-preview",DPt="@firebase/firestore-compat",OPt="firebase",$Pt="10.12.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OV="[DEFAULT]",MPt={[DV]:"fire-core",[cPt]:"fire-core-compat",[dPt]:"fire-analytics",[fPt]:"fire-analytics-compat",[pPt]:"fire-app-check",[hPt]:"fire-app-check-compat",[mPt]:"fire-auth",[gPt]:"fire-auth-compat",[yPt]:"fire-rtdb",[vPt]:"fire-rtdb-compat",[bPt]:"fire-fn",[_Pt]:"fire-fn-compat",[wPt]:"fire-iid",[EPt]:"fire-iid-compat",[xPt]:"fire-fcm",[SPt]:"fire-fcm-compat",[TPt]:"fire-perf",[CPt]:"fire-perf-compat",[APt]:"fire-rc",[IPt]:"fire-rc-compat",[kPt]:"fire-gcs",[RPt]:"fire-gcs-compat",[NPt]:"fire-fst",[DPt]:"fire-fst-compat",[PPt]:"fire-vertex","fire-js":"fire-js",[OPt]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G$=new Map,LPt=new Map,$V=new Map;function ehe(e,t){try{e.container.addComponent(t)}catch(n){sb.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function Mm(e){const t=e.name;if($V.has(t))return sb.debug(`There were multiple attempts to register component ${t}.`),!1;$V.set(t,e);for(const n of G$.values())ehe(n,e);for(const n of LPt.values())ehe(n,e);return!0}function LS(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function ih(e){return e.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FPt={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},k0=new MS("app","Firebase",FPt);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jPt{constructor(t,n,r){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new $h("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw k0.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zb=$Pt;function DNe(e,t={}){let n=e;typeof t!="object"&&(t={name:t});const r=Object.assign({name:OV,automaticDataCollectionEnabled:!1},t),i=r.name;if(typeof i!="string"||!i)throw k0.create("bad-app-name",{appName:String(i)});if(n||(n=kNe()),!n)throw k0.create("no-options");const s=G$.get(i);if(s){if(yI(n,s.options)&&yI(r,s.config))return s;throw k0.create("duplicate-app",{appName:i})}const o=new WNt(i);for(const u of $V.values())o.addComponent(u);const a=new jPt(n,r,o);return G$.set(i,a),a}function UJ(e=OV){const t=G$.get(e);if(!t&&e===OV&&kNe())return DNe();if(!t)throw k0.create("no-app",{appName:e});return t}function Vf(e,t,n){var r;let i=(r=MPt[e])!==null&&r!==void 0?r:e;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=t.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${t}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${t}" contains illegal characters (whitespace or "/")`),sb.warn(a.join(" "));return}Mm(new $h(`${i}-version`,()=>({library:i,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BPt="firebase-heartbeat-database",UPt=1,vI="firebase-heartbeat-store";let P9=null;function ONe(){return P9||(P9=sPt(BPt,UPt,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(vI)}catch(n){console.warn(n)}}}}).catch(e=>{throw k0.create("idb-open",{originalErrorMessage:e.message})})),P9}async function zPt(e){try{const n=(await ONe()).transaction(vI),r=await n.objectStore(vI).get($Ne(e));return await n.done,r}catch(t){if(t instanceof rp)sb.warn(t.message);else{const n=k0.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});sb.warn(n.message)}}}async function the(e,t){try{const r=(await ONe()).transaction(vI,"readwrite");await r.objectStore(vI).put(t,$Ne(e)),await r.done}catch(n){if(n instanceof rp)sb.warn(n.message);else{const r=k0.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});sb.warn(r.message)}}}function $Ne(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VPt=1024,HPt=30*24*60*60*1e3;class qPt{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new GPt(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var t,n;const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=nhe();if(!(((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)))return this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=HPt}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var t;if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=nhe(),{heartbeatsToSend:r,unsentEntries:i}=WPt(this._heartbeatsCache.heartbeats),s=W$(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}}function nhe(){return new Date().toISOString().substring(0,10)}function WPt(e,t=VPt){const n=[];let r=e.slice();for(const i of e){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),rhe(n)>t){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),rhe(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class GPt{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return jJ()?kNt().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await zPt(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return the(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return the(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...t.heartbeats]})}else return}}function rhe(e){return W$(JSON.stringify({version:2,heartbeats:e})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YPt(e){Mm(new $h("platform-logger",t=>new uPt(t),"PRIVATE")),Mm(new $h("heartbeat",t=>new qPt(t),"PRIVATE")),Vf(DV,Zde,e),Vf(DV,Zde,"esm2017"),Vf("fire-js","")}YPt("");function MNe(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const KPt=MNe,LNe=new MS("auth","Firebase",MNe());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y$=new C4("@firebase/auth");function XPt(e,...t){Y$.logLevel<=Gn.WARN&&Y$.warn(`Auth (${Zb}): ${e}`,...t)}function jD(e,...t){Y$.logLevel<=Gn.ERROR&&Y$.error(`Auth (${Zb}): ${e}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mh(e,...t){throw VJ(e,...t)}function Hf(e,...t){return VJ(e,...t)}function zJ(e,t,n){const r=Object.assign(Object.assign({},KPt()),{[t]:n});return new MS("auth","Firebase",r).create(t,{appName:e.name})}function R0(e){return zJ(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function QPt(e,t,n){const r=n;if(!(t instanceof r))throw r.name!==t.constructor.name&&Mh(e,"argument-error"),zJ(e,"argument-error",`Type of ${t.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function VJ(e,...t){if(typeof e!="string"){const n=t[0],r=[...t.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(n,...r)}return LNe.create(e,...t)}function on(e,t,...n){if(!e)throw VJ(t,...n)}function Jp(e){const t="INTERNAL ASSERTION FAILED: "+e;throw jD(t),new Error(t)}function Lm(e,t){e||Jp(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MV(){var e;return typeof self<"u"&&((e=self.location)===null||e===void 0?void 0:e.href)||""}function JPt(){return ihe()==="http:"||ihe()==="https:"}function ihe(){var e;return typeof self<"u"&&((e=self.location)===null||e===void 0?void 0:e.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZPt(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(JPt()||TNt()||"connection"in navigator)?navigator.onLine:!0}function eDt(){if(typeof navigator>"u")return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qk{constructor(t,n){this.shortDelay=t,this.longDelay=n,Lm(n>t,"Short delay should be less than long delay!"),this.isMobile=xNt()||CNt()}get(){return ZPt()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HJ(e,t){Lm(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FNe{static initialize(t,n,r){this.fetchImpl=t,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Jp("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Jp("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Jp("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tDt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nDt=new Qk(3e4,6e4);function A4(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function FS(e,t,n,r,i={}){return jNe(e,i,async()=>{let s={},o={};r&&(t==="GET"?o=r:s={body:JSON.stringify(r)});const a=Xk(Object.assign({key:e.config.apiKey},o)).slice(1),u=await e._getAdditionalHeaders();return u["Content-Type"]="application/json",e.languageCode&&(u["X-Firebase-Locale"]=e.languageCode),FNe.fetch()(UNe(e,e.config.apiHost,n,a),Object.assign({method:t,headers:u,referrerPolicy:"no-referrer"},s))})}async function jNe(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},tDt),t);try{const i=new rDt(e),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw hP(e,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[u,l]=a.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw hP(e,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw hP(e,"email-already-in-use",o);if(u==="USER_DISABLED")throw hP(e,"user-disabled",o);const c=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw zJ(e,c,l);Mh(e,c)}}catch(i){if(i instanceof rp)throw i;Mh(e,"network-request-failed",{message:String(i)})}}async function BNe(e,t,n,r,i={}){const s=await FS(e,t,n,r,i);return"mfaPendingCredential"in s&&Mh(e,"multi-factor-auth-required",{_serverResponse:s}),s}function UNe(e,t,n,r){const i=`${t}${n}?${r}`;return e.config.emulator?HJ(e.config,i):`${e.config.apiScheme}://${i}`}class rDt{constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Hf(this.auth,"network-request-failed")),nDt.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function hP(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Hf(e,t,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iDt(e,t){return FS(e,"POST","/v1/accounts:delete",t)}async function zNe(e,t){return FS(e,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HC(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function sDt(e,t=!1){const n=si(e),r=await n.getIdToken(t),i=qJ(r);on(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:HC(D9(i.auth_time)),issuedAtTime:HC(D9(i.iat)),expirationTime:HC(D9(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function D9(e){return Number(e)*1e3}function qJ(e){const[t,n,r]=e.split(".");if(t===void 0||n===void 0||r===void 0)return jD("JWT malformed, contained fewer than 3 sections"),null;try{const i=CNe(n);return i?JSON.parse(i):(jD("Failed to decode base64 JWT payload"),null)}catch(i){return jD("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function she(e){const t=qJ(e);return on(t,"internal-error"),on(typeof t.exp<"u","internal-error"),on(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bI(e,t,n=!1){if(n)return t;try{return await t}catch(r){throw r instanceof rp&&oDt(r)&&e.auth.currentUser===e&&await e.auth.signOut(),r}}function oDt({code:e}){return e==="auth/user-disabled"||e==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aDt{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){var n;if(t){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(t=!1){if(!this.isRunning)return;const n=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){(t==null?void 0:t.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LV{constructor(t,n){this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=HC(this.lastLoginAt),this.creationTime=HC(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function K$(e){var t;const n=e.auth,r=await e.getIdToken(),i=await bI(e,zNe(n,{idToken:r}));on(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];e._notifyReloadListener(s);const o=!((t=s.providerUserInfo)===null||t===void 0)&&t.length?VNe(s.providerUserInfo):[],a=lDt(e.providerData,o),u=e.isAnonymous,l=!(e.email&&s.passwordHash)&&!(a!=null&&a.length),c=u?l:!1,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new LV(s.createdAt,s.lastLoginAt),isAnonymous:c};Object.assign(e,f)}async function uDt(e){const t=si(e);await K$(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function lDt(e,t){return[...e.filter(r=>!t.some(i=>i.providerId===r.providerId)),...t]}function VNe(e){return e.map(t=>{var{providerId:n}=t,r=ok(t,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cDt(e,t){const n=await jNe(e,{},async()=>{const r=Xk({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:i,apiKey:s}=e.config,o=UNe(e,i,"/v1/token",`key=${s}`),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",FNe.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function fDt(e,t){return FS(e,"POST","/v2/accounts:revokeToken",A4(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pE{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){on(t.idToken,"internal-error"),on(typeof t.idToken<"u","internal-error"),on(typeof t.refreshToken<"u","internal-error");const n="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):she(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,n)}updateFromIdToken(t){on(t.length!==0,"internal-error");const n=she(t);this.updateTokensAndExpiration(t,null,n)}async getToken(t,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(on(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await cDt(t,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(t,n,r){this.refreshToken=n||null,this.accessToken=t||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(t,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new pE;return r&&(on(typeof r=="string","internal-error",{appName:t}),o.refreshToken=r),i&&(on(typeof i=="string","internal-error",{appName:t}),o.accessToken=i),s&&(on(typeof s=="number","internal-error",{appName:t}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new pE,this.toJSON())}_performRefresh(){return Jp("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Eg(e,t){on(typeof e=="string"||typeof e>"u","internal-error",{appName:t})}class Zp{constructor(t){var{uid:n,auth:r,stsTokenManager:i}=t,s=ok(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new aDt(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new LV(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(t){const n=await bI(this,this.stsTokenManager.getToken(this.auth,t));return on(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(t){return sDt(this,t)}reload(){return uDt(this)}_assign(t){this!==t&&(on(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(n=>Object.assign({},n)),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const n=new Zp(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(t){on(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,n=!1){let r=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),n&&await K$(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ih(this.auth.app))return Promise.reject(R0(this.auth));const t=await this.getIdToken();return await bI(this,iDt(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>Object.assign({},t)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,n){var r,i,s,o,a,u,l,c;const f=(r=n.displayName)!==null&&r!==void 0?r:void 0,d=(i=n.email)!==null&&i!==void 0?i:void 0,h=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,p=(o=n.photoURL)!==null&&o!==void 0?o:void 0,m=(a=n.tenantId)!==null&&a!==void 0?a:void 0,g=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,y=(l=n.createdAt)!==null&&l!==void 0?l:void 0,v=(c=n.lastLoginAt)!==null&&c!==void 0?c:void 0,{uid:_,emailVerified:w,isAnonymous:E,providerData:S,stsTokenManager:T}=n;on(_&&T,t,"internal-error");const C=pE.fromJSON(this.name,T);on(typeof _=="string",t,"internal-error"),Eg(f,t.name),Eg(d,t.name),on(typeof w=="boolean",t,"internal-error"),on(typeof E=="boolean",t,"internal-error"),Eg(h,t.name),Eg(p,t.name),Eg(m,t.name),Eg(g,t.name),Eg(y,t.name),Eg(v,t.name);const A=new Zp({uid:_,auth:t,email:d,emailVerified:w,displayName:f,isAnonymous:E,photoURL:p,phoneNumber:h,tenantId:m,stsTokenManager:C,createdAt:y,lastLoginAt:v});return S&&Array.isArray(S)&&(A.providerData=S.map(k=>Object.assign({},k))),g&&(A._redirectEventId=g),A}static async _fromIdTokenResponse(t,n,r=!1){const i=new pE;i.updateFromServerResponse(n);const s=new Zp({uid:n.localId,auth:t,stsTokenManager:i,isAnonymous:r});return await K$(s),s}static async _fromGetAccountInfoResponse(t,n,r){const i=n.users[0];on(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?VNe(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),a=new pE;a.updateFromIdToken(r);const u=new Zp({uid:i.localId,auth:t,stsTokenManager:a,isAnonymous:o}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new LV(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(u,l),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ohe=new Map;function em(e){Lm(e instanceof Function,"Expected a class definition");let t=ohe.get(e);return t?(Lm(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,ohe.set(e,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HNe{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,n){this.storage[t]=n}async _get(t){const n=this.storage[t];return n===void 0?null:n}async _remove(t){delete this.storage[t]}_addListener(t,n){}_removeListener(t,n){}}HNe.type="NONE";const ahe=HNe;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BD(e,t,n){return`firebase:${e}:${t}:${n}`}class mE{constructor(t,n,r){this.persistence=t,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=BD(this.userKey,i.apiKey,s),this.fullPersistenceKey=BD("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);return t?Zp._fromJSON(this.auth,t):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,n,r="authUser"){if(!n.length)return new mE(em(ahe),t,r);const i=(await Promise.all(n.map(async l=>{if(await l._isAvailable())return l}))).filter(l=>l);let s=i[0]||em(ahe);const o=BD(r,t.config.apiKey,t.name);let a=null;for(const l of n)try{const c=await l._get(o);if(c){const f=Zp._fromJSON(t,c);l!==s&&(a=f),s=l;break}}catch{}const u=i.filter(l=>l._shouldAllowMigration);return!s._shouldAllowMigration||!u.length?new mE(s,t,r):(s=u[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async l=>{if(l!==s)try{await l._remove(o)}catch{}})),new mE(s,t,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uhe(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(GNe(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(qNe(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(KNe(t))return"Blackberry";if(XNe(t))return"Webos";if(WJ(t))return"Safari";if((t.includes("chrome/")||WNe(t))&&!t.includes("edge/"))return"Chrome";if(YNe(t))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=e.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function qNe(e=Fo()){return/firefox\//i.test(e)}function WJ(e=Fo()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function WNe(e=Fo()){return/crios\//i.test(e)}function GNe(e=Fo()){return/iemobile/i.test(e)}function YNe(e=Fo()){return/android/i.test(e)}function KNe(e=Fo()){return/blackberry/i.test(e)}function XNe(e=Fo()){return/webos/i.test(e)}function I4(e=Fo()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function dDt(e=Fo()){var t;return I4(e)&&!!(!((t=window.navigator)===null||t===void 0)&&t.standalone)}function hDt(){return ANt()&&document.documentMode===10}function QNe(e=Fo()){return I4(e)||YNe(e)||XNe(e)||KNe(e)||/windows phone/i.test(e)||GNe(e)}function pDt(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JNe(e,t=[]){let n;switch(e){case"Browser":n=uhe(Fo());break;case"Worker":n=`${uhe(Fo())}-${e}`;break;default:n=e}const r=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${Zb}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mDt{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,n){const r=s=>new Promise((o,a)=>{try{const u=t(s);o(u)}catch(u){a(u)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const n=[];try{for(const r of this.queue)await r(t),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gDt(e,t={}){return FS(e,"GET","/v2/passwordPolicy",A4(e,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yDt=6;class vDt{constructor(t){var n,r,i,s;const o=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:yDt,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=t.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=t.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=t.schemaVersion}validatePassword(t){var n,r,i,s,o,a;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,u),this.validatePasswordCharacterOptions(t,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(s=u.containsUppercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(a=u.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),u}validatePasswordLengthOptions(t,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=t.length>=r),i&&(n.meetsMaxPasswordLength=t.length<=i)}validatePasswordCharacterOptions(t,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<t.length;i++)r=t.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(t,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bDt{constructor(t,n,r,i){this.app=t,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new lhe(this),this.idTokenSubscription=new lhe(this),this.beforeStateQueue=new mDt(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=LNe,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(t,n){return n&&(this._popupRedirectResolver=em(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await mE.create(this,t),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const n=await zNe(this,{idToken:t}),r=await Zp._fromGetAccountInfoResponse(this,n,t);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){var n;if(ih(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,u=await this.tryRedirectSignIn(t);(!o||o===a)&&(u!=null&&u.user)&&(i=u.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return on(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(t){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(t){try{await K$(t)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=eDt()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(ih(this.app))return Promise.reject(R0(this));const n=t?si(t):null;return n&&on(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(t,n=!1){if(!this._deleted)return t&&on(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return ih(this.app)?Promise.reject(R0(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return ih(this.app)?Promise.reject(R0(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(em(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await gDt(this),n=new vDt(t);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(t){this._errorFactory=new MS("auth","Firebase",t())}onAuthStateChanged(t,n,r){return this.registerStateListener(this.authStateSubscription,t,n,r)}beforeAuthStateChanged(t,n){return this.beforeStateQueue.pushCallback(t,n)}onIdTokenChanged(t,n,r){return this.registerStateListener(this.idTokenSubscription,t,n,r)}authStateReady(){return new Promise((t,n)=>{if(this.currentUser)t();else{const r=this.onAuthStateChanged(()=>{r(),t()},n)}})}async revokeAccessToken(t){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await fDt(this,r)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)===null||t===void 0?void 0:t.toJSON()}}async _setRedirectUser(t,n){const r=await this.getOrInitRedirectPersistenceManager(n);return t===null?r.removeCurrentUser():r.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const n=t&&em(t)||this._popupRedirectResolver;on(n,this,"argument-error"),this.redirectPersistenceManager=await mE.create(this,[em(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===t?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(t=this.currentUser)===null||t===void 0?void 0:t.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(on(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const u=t.addObserver(n,r,i);return()=>{o=!0,u()}}else{const u=t.addObserver(n);return()=>{o=!0,u()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return on(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=JNe(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var t;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((t=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var t;const n=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getToken());return n!=null&&n.error&&XPt(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Jk(e){return si(e)}class lhe{constructor(t){this.auth=t,this.observer=null,this.addObserver=ONt(n=>this.observer=n)}get next(){return on(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let GJ={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function _Dt(e){GJ=e}function wDt(e){return GJ.loadJS(e)}function EDt(){return GJ.gapiScript}function xDt(e){return`__${e}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SDt(e,t){const n=LS(e,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(yI(s,t??{}))return i;Mh(i,"already-initialized")}return n.initialize({options:t})}function TDt(e,t){const n=(t==null?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(em);t!=null&&t.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,t==null?void 0:t.popupRedirectResolver)}function CDt(e,t,n){const r=Jk(e);on(r._canInitEmulator,r,"emulator-config-failed"),on(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!1,s=ZNe(t),{host:o,port:a}=ADt(t),u=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${u}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),IDt()}function ZNe(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function ADt(e){const t=ZNe(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:che(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:che(o)}}}function che(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}function IDt(){function e(){const t=document.createElement("p"),n=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",e):e())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ePe{constructor(t,n){this.providerId=t,this.signInMethod=n}toJSON(){return Jp("not implemented")}_getIdTokenResponse(t){return Jp("not implemented")}_linkToIdToken(t,n){return Jp("not implemented")}_getReauthenticationResolver(t){return Jp("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gE(e,t){return BNe(e,"POST","/v1/accounts:signInWithIdp",A4(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kDt="http://localhost";class ob extends ePe{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const n=new ob(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(n.idToken=t.idToken),t.accessToken&&(n.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(n.nonce=t.nonce),t.pendingToken&&(n.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(n.accessToken=t.oauthToken,n.secret=t.oauthTokenSecret):Mh("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t,{providerId:r,signInMethod:i}=n,s=ok(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new ob(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(t){const n=this.buildRequest();return gE(t,n)}_linkToIdToken(t,n){const r=this.buildRequest();return r.idToken=n,gE(t,r)}_getReauthenticationResolver(t){const n=this.buildRequest();return n.autoCreate=!1,gE(t,n)}buildRequest(){const t={requestUri:kDt,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),t.postBody=Xk(n)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YJ{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zk extends YJ{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qg extends Zk{constructor(){super("facebook.com")}static credential(t){return ob._fromParams({providerId:qg.PROVIDER_ID,signInMethod:qg.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return qg.credentialFromTaggedObject(t)}static credentialFromError(t){return qg.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return qg.credential(t.oauthAccessToken)}catch{return null}}}qg.FACEBOOK_SIGN_IN_METHOD="facebook.com";qg.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hp extends Zk{constructor(){super("google.com"),this.addScope("profile")}static credential(t,n){return ob._fromParams({providerId:Hp.PROVIDER_ID,signInMethod:Hp.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:n})}static credentialFromResult(t){return Hp.credentialFromTaggedObject(t)}static credentialFromError(t){return Hp.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return Hp.credential(n,r)}catch{return null}}}Hp.GOOGLE_SIGN_IN_METHOD="google.com";Hp.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wg extends Zk{constructor(){super("github.com")}static credential(t){return ob._fromParams({providerId:Wg.PROVIDER_ID,signInMethod:Wg.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Wg.credentialFromTaggedObject(t)}static credentialFromError(t){return Wg.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Wg.credential(t.oauthAccessToken)}catch{return null}}}Wg.GITHUB_SIGN_IN_METHOD="github.com";Wg.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gg extends Zk{constructor(){super("twitter.com")}static credential(t,n){return ob._fromParams({providerId:Gg.PROVIDER_ID,signInMethod:Gg.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:n})}static credentialFromResult(t){return Gg.credentialFromTaggedObject(t)}static credentialFromError(t){return Gg.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return Gg.credential(n,r)}catch{return null}}}Gg.TWITTER_SIGN_IN_METHOD="twitter.com";Gg.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RDt(e,t){return BNe(e,"POST","/v1/accounts:signUp",A4(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uy{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,n,r,i=!1){const s=await Zp._fromIdTokenResponse(t,r,i),o=fhe(r);return new uy({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(t,n,r){await t._updateTokensIfNecessary(r,!0);const i=fhe(r);return new uy({user:t,providerId:i,_tokenResponse:r,operationType:n})}}function fhe(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NDt(e){var t;if(ih(e.app))return Promise.reject(R0(e));const n=Jk(e);if(await n._initializationPromise,!((t=n.currentUser)===null||t===void 0)&&t.isAnonymous)return new uy({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await RDt(n,{returnSecureToken:!0}),i=await uy._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X$ extends rp{constructor(t,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,X$.prototype),this.customData={appName:t.name,tenantId:(s=t.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(t,n,r,i){return new X$(t,n,r,i)}}function tPe(e,t,n,r){return(t==="reauthenticate"?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?X$._fromErrorAndOperation(e,s,t,r):s})}async function PDt(e,t,n=!1){const r=await bI(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return uy._forOperation(e,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DDt(e,t,n=!1){const{auth:r}=e;if(ih(r.app))return Promise.reject(R0(r));const i="reauthenticate";try{const s=await bI(e,tPe(r,i,t,e),n);on(s.idToken,r,"internal-error");const o=qJ(s.idToken);on(o,r,"internal-error");const{sub:a}=o;return on(e.uid===a,r,"user-mismatch"),uy._forOperation(e,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Mh(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ODt(e,t,n=!1){if(ih(e.app))return Promise.reject(R0(e));const r="signIn",i=await tPe(e,r,t),s=await uy._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(s.user),s}function $Dt(e,t,n,r){return si(e).onIdTokenChanged(t,n,r)}function MDt(e,t,n){return si(e).beforeAuthStateChanged(t,n)}function LDt(e,t,n,r){return si(e).onAuthStateChanged(t,n,r)}function FDt(e){return si(e).signOut()}const Q$="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nPe{constructor(t,n){this.storageRetriever=t,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Q$,"1"),this.storage.removeItem(Q$),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,n){return this.storage.setItem(t,JSON.stringify(n)),Promise.resolve()}_get(t){const n=this.storage.getItem(t);return Promise.resolve(n?JSON.parse(n):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jDt(){const e=Fo();return WJ(e)||I4(e)}const BDt=1e3,UDt=10;class rPe extends nPe{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,n)=>this.onStorageEvent(t,n),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=jDt()&&pDt(),this.fallbackToPolling=QNe(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&t(n,i,r)}}onStorageEvent(t,n=!1){if(!t.key){this.forAllChangedKeys((o,a,u)=>{this.notifyListeners(o,u)});return}const r=t.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const o=this.storage.getItem(r);if(t.newValue!==o)t.newValue!==null?this.storage.setItem(r,t.newValue):this.storage.removeItem(r);else if(this.localCache[r]===t.newValue&&!n)return}const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);hDt()&&s!==t.newValue&&t.newValue!==t.oldValue?setTimeout(i,UDt):i()}notifyListeners(t,n){this.localCache[t]=n;const r=this.listeners[t];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)})},BDt)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,n){await super._set(t,n),this.localCache[t]=JSON.stringify(n)}async _get(t){const n=await super._get(t);return this.localCache[t]=JSON.stringify(n),n}async _remove(t){await super._remove(t),delete this.localCache[t]}}rPe.type="LOCAL";const zDt=rPe;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iPe extends nPe{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,n){}_removeListener(t,n){}}iPe.type="SESSION";const sPe=iPe;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VDt(e){return Promise.all(e.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k4{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const n=this.receivers.find(i=>i.isListeningto(t));if(n)return n;const r=new k4(t);return this.receivers.push(r),r}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const n=t,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async l=>l(n.origin,s)),u=await VDt(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:u})}_subscribe(t,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(n)}_unsubscribe(t,n){this.handlersMap[t]&&n&&this.handlersMap[t].delete(n),(!n||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}k4.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KJ(e="",t=10){let n="";for(let r=0;r<t;r++)n+=Math.floor(Math.random()*10);return e+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HDt{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,u)=>{const l=KJ("",20);i.port1.start();const c=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(f){const d=f;if(d.data.eventId===l)switch(d.data.status){case"ack":clearTimeout(c),s=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(d.data.response);break;default:clearTimeout(c),clearTimeout(s),u(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:t,eventId:l,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vh(){return window}function qDt(e){vh().location.href=e}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oPe(){return typeof vh().WorkerGlobalScope<"u"&&typeof vh().importScripts=="function"}async function WDt(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function GDt(){var e;return((e=navigator==null?void 0:navigator.serviceWorker)===null||e===void 0?void 0:e.controller)||null}function YDt(){return oPe()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aPe="firebaseLocalStorageDb",KDt=1,J$="firebaseLocalStorage",uPe="fbase_key";class eR{constructor(t){this.request=t}toPromise(){return new Promise((t,n)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function R4(e,t){return e.transaction([J$],t?"readwrite":"readonly").objectStore(J$)}function XDt(){const e=indexedDB.deleteDatabase(aPe);return new eR(e).toPromise()}function FV(){const e=indexedDB.open(aPe,KDt);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const r=e.result;try{r.createObjectStore(J$,{keyPath:uPe})}catch(i){n(i)}}),e.addEventListener("success",async()=>{const r=e.result;r.objectStoreNames.contains(J$)?t(r):(r.close(),await XDt(),t(await FV()))})})}async function dhe(e,t,n){const r=R4(e,!0).put({[uPe]:t,value:n});return new eR(r).toPromise()}async function QDt(e,t){const n=R4(e,!1).get(t),r=await new eR(n).toPromise();return r===void 0?null:r.value}function hhe(e,t){const n=R4(e,!0).delete(t);return new eR(n).toPromise()}const JDt=800,ZDt=3;class lPe{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await FV(),this.db)}async _withRetries(t){let n=0;for(;;)try{const r=await this._openDb();return await t(r)}catch(r){if(n++>ZDt)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return oPe()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=k4._getInstance(YDt()),this.receiver._subscribe("keyChanged",async(t,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(t,n)=>["keyChanged"])}async initializeSender(){var t,n;if(this.activeServiceWorker=await WDt(),!this.activeServiceWorker)return;this.sender=new HDt(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((t=r[0])===null||t===void 0)&&t.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||GDt()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await FV();return await dhe(t,Q$,"1"),await hhe(t,Q$),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>dhe(r,t,n)),this.localCache[t]=n,this.notifyServiceWorker(t)))}async _get(t){const n=await this._withRetries(r=>QDt(r,t));return this.localCache[t]=n,n}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(n=>hhe(n,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(i=>{const s=R4(i,!1).getAll();return new eR(s).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(t.length!==0)for(const{fbase_key:i,value:s}of t)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(t,n){this.localCache[t]=n;const r=this.listeners[t];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),JDt)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}lPe.type="LOCAL";const eOt=lPe;new Qk(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cPe(e,t){return t?em(t):(on(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XJ extends ePe{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return gE(t,this._buildIdpRequest())}_linkToIdToken(t,n){return gE(t,this._buildIdpRequest(n))}_getReauthenticationResolver(t){return gE(t,this._buildIdpRequest())}_buildIdpRequest(t){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(n.idToken=t),n}}function tOt(e){return ODt(e.auth,new XJ(e),e.bypassAuthState)}function nOt(e){const{auth:t,user:n}=e;return on(n,t,"internal-error"),DDt(n,new XJ(e),e.bypassAuthState)}async function rOt(e){const{auth:t,user:n}=e;return on(n,t,"internal-error"),PDt(n,new XJ(e),e.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fPe{constructor(t,n,r,i,s=!1){this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(t,n)=>{this.pendingPromise={resolve:t,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(t){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=t;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(u))}catch(l){this.reject(l)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return tOt;case"linkViaPopup":case"linkViaRedirect":return rOt;case"reauthViaPopup":case"reauthViaRedirect":return nOt;default:Mh(this.auth,"internal-error")}}resolve(t){Lm(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){Lm(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iOt=new Qk(2e3,1e4);async function sOt(e,t,n){if(ih(e.app))return Promise.reject(Hf(e,"operation-not-supported-in-this-environment"));const r=Jk(e);QPt(e,t,YJ);const i=cPe(r,n);return new y1(r,"signInViaPopup",t,i).executeNotNull()}class y1 extends fPe{constructor(t,n,r,i,s){super(t,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,y1.currentPopupAction&&y1.currentPopupAction.cancel(),y1.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return on(t,this.auth,"internal-error"),t}async onExecution(){Lm(this.filter.length===1,"Popup operations only handle one event");const t=KJ();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Hf(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)===null||t===void 0?void 0:t.associatedEvent)||null}cancel(){this.reject(Hf(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,y1.currentPopupAction=null}pollUserCancellation(){const t=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Hf(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,iOt.get())};t()}}y1.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oOt="pendingRedirect",UD=new Map;class aOt extends fPe{constructor(t,n,r=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let t=UD.get(this.auth._key());if(!t){try{const r=await uOt(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(r)}catch(n){t=()=>Promise.reject(n)}UD.set(this.auth._key(),t)}return this.bypassAuthState||UD.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const n=await this.auth._redirectUserForId(t.eventId);if(n)return this.user=n,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function uOt(e,t){const n=fOt(t),r=cOt(e);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function lOt(e,t){UD.set(e._key(),t)}function cOt(e){return em(e._redirectPersistence)}function fOt(e){return BD(oOt,e.config.apiKey,e.name)}async function dOt(e,t,n=!1){if(ih(e.app))return Promise.reject(R0(e));const r=Jk(e),i=cPe(r,t),o=await new aOt(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,t)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hOt=10*60*1e3;class pOt{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(t,r)&&(n=!0,this.sendToConsumer(t,r),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!mOt(t)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=t,n=!0)),n}sendToConsumer(t,n){var r;if(t.error&&!dPe(t)){const i=((r=t.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Hf(this.auth,i))}else n.onAuthEvent(t)}isEventForConsumer(t,n){const r=n.eventId===null||!!t.eventId&&t.eventId===n.eventId;return n.filter.includes(t.type)&&r}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=hOt&&this.cachedEventUids.clear(),this.cachedEventUids.has(phe(t))}saveEventToCache(t){this.cachedEventUids.add(phe(t)),this.lastProcessedEventTime=Date.now()}}function phe(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(t=>t).join("-")}function dPe({type:e,error:t}){return e==="unknown"&&(t==null?void 0:t.code)==="auth/no-auth-event"}function mOt(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return dPe(e);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gOt(e,t={}){return FS(e,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yOt=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,vOt=/^https?/;async function bOt(e){if(e.config.emulator)return;const{authorizedDomains:t}=await gOt(e);for(const n of t)try{if(_Ot(n))return}catch{}Mh(e,"unauthorized-domain")}function _Ot(e){const t=MV(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const o=new URL(e);return o.hostname===""&&r===""?n==="chrome-extension:"&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!vOt.test(n))return!1;if(yOt.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wOt=new Qk(3e4,6e4);function mhe(){const e=vh().___jsl;if(e!=null&&e.H){for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}}function EOt(e){return new Promise((t,n)=>{var r,i,s;function o(){mhe(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{mhe(),n(Hf(e,"network-request-failed"))},timeout:wOt.get()})}if(!((i=(r=vh().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)t(gapi.iframes.getContext());else if(!((s=vh().gapi)===null||s===void 0)&&s.load)o();else{const a=xDt("iframefcb");return vh()[a]=()=>{gapi.load?o():n(Hf(e,"network-request-failed"))},wDt(`${EDt()}?onload=${a}`).catch(u=>n(u))}}).catch(t=>{throw zD=null,t})}let zD=null;function xOt(e){return zD=zD||EOt(e),zD}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SOt=new Qk(5e3,15e3),TOt="__/auth/iframe",COt="emulator/auth/iframe",AOt={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},IOt=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function kOt(e){const t=e.config;on(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?HJ(t,COt):`https://${e.config.authDomain}/${TOt}`,r={apiKey:t.apiKey,appName:e.name,v:Zb},i=IOt.get(e.config.apiHost);i&&(r.eid=i);const s=e._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${Xk(r).slice(1)}`}async function ROt(e){const t=await xOt(e),n=vh().gapi;return on(n,e,"internal-error"),t.open({where:document.body,url:kOt(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:AOt,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=Hf(e,"network-request-failed"),a=vh().setTimeout(()=>{s(o)},SOt.get());function u(){vh().clearTimeout(a),i(r)}r.ping(u).then(u,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NOt={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},POt=500,DOt=600,OOt="_blank",$Ot="http://localhost";class ghe{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function MOt(e,t,n,r=POt,i=DOt){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const u=Object.assign(Object.assign({},NOt),{width:r.toString(),height:i.toString(),top:s,left:o}),l=Fo().toLowerCase();n&&(a=WNe(l)?OOt:n),qNe(l)&&(t=t||$Ot,u.scrollbars="yes");const c=Object.entries(u).reduce((d,[h,p])=>`${d}${h}=${p},`,"");if(dDt(l)&&a!=="_self")return LOt(t||"",a),new ghe(null);const f=window.open(t||"",a,c);on(f,e,"popup-blocked");try{f.focus()}catch{}return new ghe(f)}function LOt(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FOt="__/auth/handler",jOt="emulator/auth/handler",BOt=encodeURIComponent("fac");async function yhe(e,t,n,r,i,s){on(e.config.authDomain,e,"auth-domain-config-required"),on(e.config.apiKey,e,"invalid-api-key");const o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:Zb,eventId:i};if(t instanceof YJ){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",DNt(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(const[c,f]of Object.entries({}))o[c]=f}if(t instanceof Zk){const c=t.getScopes().filter(f=>f!=="");c.length>0&&(o.scopes=c.join(","))}e.tenantId&&(o.tid=e.tenantId);const a=o;for(const c of Object.keys(a))a[c]===void 0&&delete a[c];const u=await e._getAppCheckToken(),l=u?`#${BOt}=${encodeURIComponent(u)}`:"";return`${UOt(e)}?${Xk(a).slice(1)}${l}`}function UOt({config:e}){return e.emulator?HJ(e,jOt):`https://${e.authDomain}/${FOt}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O9="webStorageSupport";class zOt{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=sPe,this._completeRedirectFn=dOt,this._overrideRedirectResult=lOt}async _openPopup(t,n,r,i){var s;Lm((s=this.eventManagers[t._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await yhe(t,n,r,MV(),i);return MOt(t,o,KJ())}async _openRedirect(t,n,r,i){await this._originValidation(t);const s=await yhe(t,n,r,MV(),i);return qDt(s),new Promise(()=>{})}_initialize(t){const n=t._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(Lm(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(t);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(t){const n=await ROt(t),r=new pOt(t);return n.register("authEvent",i=>(on(i==null?void 0:i.authEvent,t,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,r}_isIframeWebStorageSupported(t,n){this.iframes[t._key()].send(O9,{type:O9},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[O9];o!==void 0&&n(!!o),Mh(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const n=t._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=bOt(t)),this.originValidationPromises[n]}get _shouldInitProactively(){return QNe()||WJ()||I4()}}const hPe=zOt;var vhe="@firebase/auth",bhe="1.7.4";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VOt{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)===null||t===void 0?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const n=this.auth.onIdTokenChanged(r=>{t((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(t,n),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const n=this.internalListeners.get(t);n&&(this.internalListeners.delete(t),n(),this.updateProactiveRefresh())}assertAuthConfigured(){on(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HOt(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function qOt(e){Mm(new $h("auth",(t,{options:n})=>{const r=t.getProvider("app").getImmediate(),i=t.getProvider("heartbeat"),s=t.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;on(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:o,authDomain:a,clientPlatform:e,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:JNe(e)},l=new bDt(r,i,s,u);return TDt(l,n),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,n,r)=>{t.getProvider("auth-internal").initialize()})),Mm(new $h("auth-internal",t=>{const n=Jk(t.getProvider("auth").getImmediate());return(r=>new VOt(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Vf(vhe,bhe,HOt(e)),Vf(vhe,bhe,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WOt=5*60,GOt=RNe("authIdTokenMaxAge")||WOt;let _he=null;const YOt=e=>async t=>{const n=t&&await t.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>GOt)return;const i=n==null?void 0:n.token;_he!==i&&(_he=i,await fetch(e,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function Z$(e=UJ()){const t=LS(e,"auth");if(t.isInitialized())return t.getImmediate();const n=SDt(e,{popupRedirectResolver:hPe,persistence:[eOt,zDt,sPe]}),r=RNe("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=YOt(s.toString());MDt(n,o,()=>o(n.currentUser)),$Dt(n,a=>o(a))}}const i=INe("auth");return i&&CDt(n,`http://${i}`),n}function KOt(){var e,t;return(t=(e=document.getElementsByTagName("head"))===null||e===void 0?void 0:e[0])!==null&&t!==void 0?t:document}_Dt({loadJS(e){return new Promise((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=i=>{const s=Hf("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",KOt().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});qOt("Browser");var XOt="firebase",QOt="10.12.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Vf(XOt,QOt,"app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pPe="firebasestorage.googleapis.com",mPe="storageBucket",JOt=2*60*1e3,ZOt=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ji extends rp{constructor(t,n,r=0){super($9(t),`Firebase Storage: ${n} (${$9(t)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Ji.prototype)}get status(){return this.status_}set status(t){this.status_=t}_codeEquals(t){return $9(t)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(t){this.customData.serverResponse=t,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Qi;(function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Qi||(Qi={}));function $9(e){return"storage/"+e}function QJ(){const e="An unknown error occurred, please check the error payload for server response.";return new Ji(Qi.UNKNOWN,e)}function e3t(e){return new Ji(Qi.OBJECT_NOT_FOUND,"Object '"+e+"' does not exist.")}function t3t(e){return new Ji(Qi.QUOTA_EXCEEDED,"Quota for bucket '"+e+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function n3t(){const e="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Ji(Qi.UNAUTHENTICATED,e)}function r3t(){return new Ji(Qi.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function i3t(e){return new Ji(Qi.UNAUTHORIZED,"User does not have permission to access '"+e+"'.")}function s3t(){return new Ji(Qi.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function o3t(){return new Ji(Qi.CANCELED,"User canceled the upload/download.")}function a3t(e){return new Ji(Qi.INVALID_URL,"Invalid URL '"+e+"'.")}function u3t(e){return new Ji(Qi.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+e+"'.")}function l3t(){return new Ji(Qi.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+mPe+"' property when initializing the app?")}function c3t(){return new Ji(Qi.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function f3t(){return new Ji(Qi.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function d3t(e){return new Ji(Qi.UNSUPPORTED_ENVIRONMENT,`${e} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function jV(e){return new Ji(Qi.INVALID_ARGUMENT,e)}function gPe(){return new Ji(Qi.APP_DELETED,"The Firebase app was deleted.")}function h3t(e){return new Ji(Qi.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function qC(e,t){return new Ji(Qi.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function VT(e){throw new Ji(Qi.INTERNAL_ERROR,"Internal error: "+e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ga{constructor(t,n){this.bucket=t,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(t,n){let r;try{r=Ga.makeFromUrl(t,n)}catch{return new Ga(t,"")}if(r.path==="")return r;throw u3t(t)}static makeFromUrl(t,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function s(w){w.path.charAt(w.path.length-1)==="/"&&(w.path_=w.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+i+o,"i"),u={bucket:1,path:3};function l(w){w.path_=decodeURIComponent(w.path)}const c="v[A-Za-z0-9_]+",f=n.replace(/[.]/g,"\\."),d="(/([^?#]*).*)?$",h=new RegExp(`^https?://${f}/${c}/b/${i}/o${d}`,"i"),p={bucket:1,path:3},m=n===pPe?"(?:storage.googleapis.com|storage.cloud.google.com)":n,g="([^?#]*)",y=new RegExp(`^https?://${m}/${i}/${g}`,"i"),_=[{regex:a,indices:u,postModify:s},{regex:h,indices:p,postModify:l},{regex:y,indices:{bucket:1,path:2},postModify:l}];for(let w=0;w<_.length;w++){const E=_[w],S=E.regex.exec(t);if(S){const T=S[E.indices.bucket];let C=S[E.indices.path];C||(C=""),r=new Ga(T,C),E.postModify(r);break}}if(r==null)throw a3t(t);return r}}class p3t{constructor(t){this.promise_=Promise.reject(t)}getPromise(){return this.promise_}cancel(t=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m3t(e,t,n){let r=1,i=null,s=null,o=!1,a=0;function u(){return a===2}let l=!1;function c(...g){l||(l=!0,t.apply(null,g))}function f(g){i=setTimeout(()=>{i=null,e(h,u())},g)}function d(){s&&clearTimeout(s)}function h(g,...y){if(l){d();return}if(g){d(),c.call(null,g,...y);return}if(u()||o){d(),c.call(null,g,...y);return}r<64&&(r*=2);let _;a===1?(a=2,_=0):_=(r+Math.random())*1e3,f(_)}let p=!1;function m(g){p||(p=!0,d(),!l&&(i!==null?(g||(a=2),clearTimeout(i),f(0)):g||(a=1)))}return f(0),s=setTimeout(()=>{o=!0,m(!0)},n),m}function g3t(e){e(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y3t(e){return e!==void 0}function v3t(e){return typeof e=="object"&&!Array.isArray(e)}function JJ(e){return typeof e=="string"||e instanceof String}function whe(e){return ZJ()&&e instanceof Blob}function ZJ(){return typeof Blob<"u"}function BV(e,t,n,r){if(r<t)throw jV(`Invalid value for '${e}'. Expected ${t} or greater.`);if(r>n)throw jV(`Invalid value for '${e}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tR(e,t,n){let r=t;return n==null&&(r=`https://${t}`),`${n}://${r}/v0${e}`}function yPe(e){const t=encodeURIComponent;let n="?";for(const r in e)if(e.hasOwnProperty(r)){const i=t(r)+"="+t(e[r]);n=n+i+"&"}return n=n.slice(0,-1),n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var I1;(function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"})(I1||(I1={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b3t(e,t){const n=e>=500&&e<600,i=[408,429].indexOf(e)!==-1,s=t.indexOf(e)!==-1;return n||i||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _3t{constructor(t,n,r,i,s,o,a,u,l,c,f,d=!0){this.url_=t,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=u,this.timeout_=l,this.progressCallback_=c,this.connectionFactory_=f,this.retry=d,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((h,p)=>{this.resolve_=h,this.reject_=p,this.start_()})}start_(){const t=(r,i)=>{if(i){r(!1,new pP(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const o=a=>{const u=a.loaded,l=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(u,l)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const a=s.getErrorCode()===I1.NO_ERROR,u=s.getStatus();if(!a||b3t(u,this.additionalRetryCodes_)&&this.retry){const c=s.getErrorCode()===I1.ABORT;r(!1,new pP(!1,null,c));return}const l=this.successCodes_.indexOf(u)!==-1;r(!0,new pP(l,s))})},n=(r,i)=>{const s=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{const u=this.callback_(a,a.getResponse());y3t(u)?s(u):s()}catch(u){o(u)}else if(a!==null){const u=QJ();u.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,u)):o(u)}else if(i.canceled){const u=this.appDelete_?gPe():o3t();o(u)}else{const u=s3t();o(u)}};this.canceled_?n(!1,new pP(!1,null,!0)):this.backoffId_=m3t(t,n,this.timeout_)}getPromise(){return this.promise_}cancel(t){this.canceled_=!0,this.appDelete_=t||!1,this.backoffId_!==null&&g3t(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class pP{constructor(t,n,r){this.wasSuccessCode=t,this.connection=n,this.canceled=!!r}}function w3t(e,t){t!==null&&t.length>0&&(e.Authorization="Firebase "+t)}function E3t(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(t??"AppManager")}function x3t(e,t){t&&(e["X-Firebase-GMPID"]=t)}function S3t(e,t){t!==null&&(e["X-Firebase-AppCheck"]=t)}function T3t(e,t,n,r,i,s,o=!0){const a=yPe(e.urlParams),u=e.url+a,l=Object.assign({},e.headers);return x3t(l,t),w3t(l,n),E3t(l,s),S3t(l,r),new _3t(u,e.method,l,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C3t(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function A3t(...e){const t=C3t();if(t!==void 0){const n=new t;for(let r=0;r<e.length;r++)n.append(e[r]);return n.getBlob()}else{if(ZJ())return new Blob(e);throw new Ji(Qi.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function I3t(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k3t(e){if(typeof atob>"u")throw d3t("base-64");return atob(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sh={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class M9{constructor(t,n){this.data=t,this.contentType=n||null}}function R3t(e,t){switch(e){case sh.RAW:return new M9(vPe(t));case sh.BASE64:case sh.BASE64URL:return new M9(bPe(e,t));case sh.DATA_URL:return new M9(P3t(t),D3t(t))}throw QJ()}function vPe(e){const t=[];for(let n=0;n<e.length;n++){let r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<e.length-1&&(e.charCodeAt(n+1)&64512)===56320))t.push(239,191,189);else{const s=r,o=e.charCodeAt(++n);r=65536|(s&1023)<<10|o&1023,t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(t)}function N3t(e){let t;try{t=decodeURIComponent(e)}catch{throw qC(sh.DATA_URL,"Malformed data URL.")}return vPe(t)}function bPe(e,t){switch(e){case sh.BASE64:{const i=t.indexOf("-")!==-1,s=t.indexOf("_")!==-1;if(i||s)throw qC(e,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case sh.BASE64URL:{const i=t.indexOf("+")!==-1,s=t.indexOf("/")!==-1;if(i||s)throw qC(e,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=k3t(t)}catch(i){throw i.message.includes("polyfill")?i:qC(e,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class _Pe{constructor(t){this.base64=!1,this.contentType=null;const n=t.match(/^data:([^,]+)?,/);if(n===null)throw qC(sh.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=O3t(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=t.substring(t.indexOf(",")+1)}}function P3t(e){const t=new _Pe(e);return t.base64?bPe(sh.BASE64,t.rest):N3t(t.rest)}function D3t(e){return new _Pe(e).contentType}function O3t(e,t){return e.length>=t.length?e.substring(e.length-t.length)===t:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yg{constructor(t,n){let r=0,i="";whe(t)?(this.data_=t,r=t.size,i=t.type):t instanceof ArrayBuffer?(n?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),r=this.data_.length):t instanceof Uint8Array&&(n?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),r=t.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(t,n){if(whe(this.data_)){const r=this.data_,i=I3t(r,t,n);return i===null?null:new Yg(i)}else{const r=new Uint8Array(this.data_.buffer,t,n-t);return new Yg(r,!0)}}static getBlob(...t){if(ZJ()){const n=t.map(r=>r instanceof Yg?r.data_:r);return new Yg(A3t.apply(null,n))}else{const n=t.map(o=>JJ(o)?R3t(sh.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const i=new Uint8Array(r);let s=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)i[s++]=o[a]}),new Yg(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eZ(e){let t;try{t=JSON.parse(e)}catch{return null}return v3t(t)?t:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $3t(e){if(e.length===0)return null;const t=e.lastIndexOf("/");return t===-1?"":e.slice(0,t)}function M3t(e,t){const n=t.split("/").filter(r=>r.length>0).join("/");return e.length===0?n:e+"/"+n}function wPe(e){const t=e.lastIndexOf("/",e.length-2);return t===-1?e:e.slice(t+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L3t(e,t){return t}class Da{constructor(t,n,r,i){this.server=t,this.local=n||t,this.writable=!!r,this.xform=i||L3t}}let mP=null;function F3t(e){return!JJ(e)||e.length<2?e:wPe(e)}function EPe(){if(mP)return mP;const e=[];e.push(new Da("bucket")),e.push(new Da("generation")),e.push(new Da("metageneration")),e.push(new Da("name","fullPath",!0));function t(s,o){return F3t(o)}const n=new Da("name");n.xform=t,e.push(n);function r(s,o){return o!==void 0?Number(o):o}const i=new Da("size");return i.xform=r,e.push(i),e.push(new Da("timeCreated")),e.push(new Da("updated")),e.push(new Da("md5Hash",null,!0)),e.push(new Da("cacheControl",null,!0)),e.push(new Da("contentDisposition",null,!0)),e.push(new Da("contentEncoding",null,!0)),e.push(new Da("contentLanguage",null,!0)),e.push(new Da("contentType",null,!0)),e.push(new Da("metadata","customMetadata",!0)),mP=e,mP}function j3t(e,t){function n(){const r=e.bucket,i=e.fullPath,s=new Ga(r,i);return t._makeStorageReference(s)}Object.defineProperty(e,"ref",{get:n})}function B3t(e,t,n){const r={};r.type="file";const i=n.length;for(let s=0;s<i;s++){const o=n[s];r[o.local]=o.xform(r,t[o.server])}return j3t(r,e),r}function xPe(e,t,n){const r=eZ(t);return r===null?null:B3t(e,r,n)}function U3t(e,t,n,r){const i=eZ(t);if(i===null||!JJ(i.downloadTokens))return null;const s=i.downloadTokens;if(s.length===0)return null;const o=encodeURIComponent;return s.split(",").map(l=>{const c=e.bucket,f=e.fullPath,d="/b/"+o(c)+"/o/"+o(f),h=tR(d,n,r),p=yPe({alt:"media",token:l});return h+p})[0]}function z3t(e,t){const n={},r=t.length;for(let i=0;i<r;i++){const s=t[i];s.writable&&(n[s.server]=e[s.local])}return JSON.stringify(n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ehe="prefixes",xhe="items";function V3t(e,t,n){const r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[Ehe])for(const i of n[Ehe]){const s=i.replace(/\/$/,""),o=e._makeStorageReference(new Ga(t,s));r.prefixes.push(o)}if(n[xhe])for(const i of n[xhe]){const s=e._makeStorageReference(new Ga(t,i.name));r.items.push(s)}return r}function H3t(e,t,n){const r=eZ(n);return r===null?null:V3t(e,t,r)}class N4{constructor(t,n,r,i){this.url=t,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tZ(e){if(!e)throw QJ()}function q3t(e,t){function n(r,i){const s=xPe(e,i,t);return tZ(s!==null),s}return n}function W3t(e,t){function n(r,i){const s=H3t(e,t,i);return tZ(s!==null),s}return n}function G3t(e,t){function n(r,i){const s=xPe(e,i,t);return tZ(s!==null),U3t(s,i,e.host,e._protocol)}return n}function nZ(e){function t(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=r3t():i=n3t():n.getStatus()===402?i=t3t(e.bucket):n.getStatus()===403?i=i3t(e.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return t}function SPe(e){const t=nZ(e);function n(r,i){let s=t(r,i);return r.getStatus()===404&&(s=e3t(e.path)),s.serverResponse=i.serverResponse,s}return n}function Y3t(e,t,n,r,i){const s={};t.isRoot?s.prefix="":s.prefix=t.path+"/",n.length>0&&(s.delimiter=n),r&&(s.pageToken=r),i&&(s.maxResults=i);const o=t.bucketOnlyServerUrl(),a=tR(o,e.host,e._protocol),u="GET",l=e.maxOperationRetryTime,c=new N4(a,u,W3t(e,t.bucket),l);return c.urlParams=s,c.errorHandler=nZ(t),c}function K3t(e,t,n){const r=t.fullServerUrl(),i=tR(r,e.host,e._protocol),s="GET",o=e.maxOperationRetryTime,a=new N4(i,s,G3t(e,n),o);return a.errorHandler=SPe(t),a}function X3t(e,t){const n=t.fullServerUrl(),r=tR(n,e.host,e._protocol),i="DELETE",s=e.maxOperationRetryTime;function o(u,l){}const a=new N4(r,i,o,s);return a.successCodes=[200,204],a.errorHandler=SPe(t),a}function Q3t(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}function J3t(e,t,n){const r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=Q3t(null,t)),r}function Z3t(e,t,n,r,i){const s=t.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let _="";for(let w=0;w<2;w++)_=_+Math.random().toString().slice(2);return _}const u=a();o["Content-Type"]="multipart/related; boundary="+u;const l=J3t(t,r,i),c=z3t(l,n),f="--"+u+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+c+`\r
--`+u+`\r
Content-Type: `+l.contentType+`\r
\r
`,d=`\r
--`+u+"--",h=Yg.getBlob(f,r,d);if(h===null)throw c3t();const p={name:l.fullPath},m=tR(s,e.host,e._protocol),g="POST",y=e.maxUploadRetryTime,v=new N4(m,g,q3t(e,n),y);return v.urlParams=p,v.headers=o,v.body=h.uploadData(),v.errorHandler=nZ(t),v}class e$t{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=I1.NO_ERROR,this.sendPromise_=new Promise(t=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=I1.ABORT,t()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=I1.NETWORK_ERROR,t()}),this.xhr_.addEventListener("load",()=>{t()})})}send(t,n,r,i){if(this.sent_)throw VT("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,t,!0),i!==void 0)for(const s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw VT("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw VT("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw VT("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw VT("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(t){return this.xhr_.getResponseHeader(t)}addUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",t)}removeUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",t)}}class t$t extends e$t{initXhr(){this.xhr_.responseType="text"}}function P4(){return new t$t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ab{constructor(t,n){this._service=t,n instanceof Ga?this._location=n:this._location=Ga.makeFromUrl(n,t.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(t,n){return new ab(t,n)}get root(){const t=new Ga(this._location.bucket,"");return this._newRef(this._service,t)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return wPe(this._location.path)}get storage(){return this._service}get parent(){const t=$3t(this._location.path);if(t===null)return null;const n=new Ga(this._location.bucket,t);return new ab(this._service,n)}_throwIfRoot(t){if(this._location.path==="")throw h3t(t)}}function n$t(e,t,n){e._throwIfRoot("uploadBytes");const r=Z3t(e.storage,e._location,EPe(),new Yg(t,!0),n);return e.storage.makeRequestWithTokens(r,P4).then(i=>({metadata:i,ref:e}))}function r$t(e){const t={prefixes:[],items:[]};return TPe(e,t).then(()=>t)}async function TPe(e,t,n){const i=await i$t(e,{pageToken:n});t.prefixes.push(...i.prefixes),t.items.push(...i.items),i.nextPageToken!=null&&await TPe(e,t,i.nextPageToken)}function i$t(e,t){t!=null&&typeof t.maxResults=="number"&&BV("options.maxResults",1,1e3,t.maxResults);const n=t||{},r=Y3t(e.storage,e._location,"/",n.pageToken,n.maxResults);return e.storage.makeRequestWithTokens(r,P4)}function s$t(e){e._throwIfRoot("getDownloadURL");const t=K3t(e.storage,e._location,EPe());return e.storage.makeRequestWithTokens(t,P4).then(n=>{if(n===null)throw f3t();return n})}function o$t(e){e._throwIfRoot("deleteObject");const t=X3t(e.storage,e._location);return e.storage.makeRequestWithTokens(t,P4)}function a$t(e,t){const n=M3t(e._location.path,t),r=new Ga(e._location.bucket,n);return new ab(e.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u$t(e){return/^[A-Za-z]+:\/\//.test(e)}function l$t(e,t){return new ab(e,t)}function CPe(e,t){if(e instanceof rZ){const n=e;if(n._bucket==null)throw l3t();const r=new ab(n,n._bucket);return t!=null?CPe(r,t):r}else return t!==void 0?a$t(e,t):e}function c$t(e,t){if(t&&u$t(t)){if(e instanceof rZ)return l$t(e,t);throw jV("To use ref(service, url), the first argument must be a Storage instance.")}else return CPe(e,t)}function She(e,t){const n=t==null?void 0:t[mPe];return n==null?null:Ga.makeFromBucketSpec(n,e)}function f$t(e,t,n,r={}){e.host=`${t}:${n}`,e._protocol="http";const{mockUserToken:i}=r;i&&(e._overrideAuthToken=typeof i=="string"?i:ENt(i,e.app.options.projectId))}class rZ{constructor(t,n,r,i,s){this.app=t,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=pPe,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=JOt,this._maxUploadRetryTime=ZOt,this._requests=new Set,i!=null?this._bucket=Ga.makeFromBucketSpec(i,this._host):this._bucket=She(this._host,this.app.options)}get host(){return this._host}set host(t){this._host=t,this._url!=null?this._bucket=Ga.makeFromBucketSpec(this._url,t):this._bucket=She(t,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(t){BV("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(t){BV("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const t=this._authProvider.getImmediate({optional:!0});if(t){const n=await t.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const t=this._appCheckProvider.getImmediate({optional:!0});return t?(await t.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(t=>t.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(t){return new ab(this,t)}_makeRequest(t,n,r,i,s=!0){if(this._deleted)return new p3t(gPe());{const o=T3t(t,this._appId,r,i,n,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(t,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(t,n,r,i).getPromise()}}const The="@firebase/storage",Che="0.12.5";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const APe="storage";function L9(e,t,n){return e=si(e),n$t(e,t,n)}function HT(e){return e=si(e),r$t(e)}function F9(e){return e=si(e),s$t(e)}function Ahe(e){return e=si(e),o$t(e)}function ac(e,t){return e=si(e),c$t(e,t)}function d$t(e=UJ(),t){e=si(e);const r=LS(e,APe).getImmediate({identifier:t}),i=wNt("storage");return i&&h$t(r,...i),r}function h$t(e,t,n,r={}){f$t(e,t,n,r)}function p$t(e,{instanceIdentifier:t}){const n=e.getProvider("app").getImmediate(),r=e.getProvider("auth-internal"),i=e.getProvider("app-check-internal");return new rZ(n,r,i,t,Zb)}function m$t(){Mm(new $h(APe,p$t,"PUBLIC").setMultipleInstances(!0)),Vf(The,Che,""),Vf(The,Che,"esm2017")}m$t();var Ihe=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var k1,IPe;(function(){var e;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(T,C){function A(){}A.prototype=C.prototype,T.D=C.prototype,T.prototype=new A,T.prototype.constructor=T,T.C=function(k,N,O){for(var D=Array(arguments.length-2),$=2;$<arguments.length;$++)D[$-2]=arguments[$];return C.prototype[N].apply(k,D)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(T,C,A){A||(A=0);var k=Array(16);if(typeof C=="string")for(var N=0;16>N;++N)k[N]=C.charCodeAt(A++)|C.charCodeAt(A++)<<8|C.charCodeAt(A++)<<16|C.charCodeAt(A++)<<24;else for(N=0;16>N;++N)k[N]=C[A++]|C[A++]<<8|C[A++]<<16|C[A++]<<24;C=T.g[0],A=T.g[1],N=T.g[2];var O=T.g[3],D=C+(O^A&(N^O))+k[0]+3614090360&4294967295;C=A+(D<<7&4294967295|D>>>25),D=O+(N^C&(A^N))+k[1]+3905402710&4294967295,O=C+(D<<12&4294967295|D>>>20),D=N+(A^O&(C^A))+k[2]+606105819&4294967295,N=O+(D<<17&4294967295|D>>>15),D=A+(C^N&(O^C))+k[3]+3250441966&4294967295,A=N+(D<<22&4294967295|D>>>10),D=C+(O^A&(N^O))+k[4]+4118548399&4294967295,C=A+(D<<7&4294967295|D>>>25),D=O+(N^C&(A^N))+k[5]+1200080426&4294967295,O=C+(D<<12&4294967295|D>>>20),D=N+(A^O&(C^A))+k[6]+2821735955&4294967295,N=O+(D<<17&4294967295|D>>>15),D=A+(C^N&(O^C))+k[7]+4249261313&4294967295,A=N+(D<<22&4294967295|D>>>10),D=C+(O^A&(N^O))+k[8]+1770035416&4294967295,C=A+(D<<7&4294967295|D>>>25),D=O+(N^C&(A^N))+k[9]+2336552879&4294967295,O=C+(D<<12&4294967295|D>>>20),D=N+(A^O&(C^A))+k[10]+4294925233&4294967295,N=O+(D<<17&4294967295|D>>>15),D=A+(C^N&(O^C))+k[11]+2304563134&4294967295,A=N+(D<<22&4294967295|D>>>10),D=C+(O^A&(N^O))+k[12]+1804603682&4294967295,C=A+(D<<7&4294967295|D>>>25),D=O+(N^C&(A^N))+k[13]+4254626195&4294967295,O=C+(D<<12&4294967295|D>>>20),D=N+(A^O&(C^A))+k[14]+2792965006&4294967295,N=O+(D<<17&4294967295|D>>>15),D=A+(C^N&(O^C))+k[15]+1236535329&4294967295,A=N+(D<<22&4294967295|D>>>10),D=C+(N^O&(A^N))+k[1]+4129170786&4294967295,C=A+(D<<5&4294967295|D>>>27),D=O+(A^N&(C^A))+k[6]+3225465664&4294967295,O=C+(D<<9&4294967295|D>>>23),D=N+(C^A&(O^C))+k[11]+643717713&4294967295,N=O+(D<<14&4294967295|D>>>18),D=A+(O^C&(N^O))+k[0]+3921069994&4294967295,A=N+(D<<20&4294967295|D>>>12),D=C+(N^O&(A^N))+k[5]+3593408605&4294967295,C=A+(D<<5&4294967295|D>>>27),D=O+(A^N&(C^A))+k[10]+38016083&4294967295,O=C+(D<<9&4294967295|D>>>23),D=N+(C^A&(O^C))+k[15]+3634488961&4294967295,N=O+(D<<14&4294967295|D>>>18),D=A+(O^C&(N^O))+k[4]+3889429448&4294967295,A=N+(D<<20&4294967295|D>>>12),D=C+(N^O&(A^N))+k[9]+568446438&4294967295,C=A+(D<<5&4294967295|D>>>27),D=O+(A^N&(C^A))+k[14]+3275163606&4294967295,O=C+(D<<9&4294967295|D>>>23),D=N+(C^A&(O^C))+k[3]+4107603335&4294967295,N=O+(D<<14&4294967295|D>>>18),D=A+(O^C&(N^O))+k[8]+1163531501&4294967295,A=N+(D<<20&4294967295|D>>>12),D=C+(N^O&(A^N))+k[13]+2850285829&4294967295,C=A+(D<<5&4294967295|D>>>27),D=O+(A^N&(C^A))+k[2]+4243563512&4294967295,O=C+(D<<9&4294967295|D>>>23),D=N+(C^A&(O^C))+k[7]+1735328473&4294967295,N=O+(D<<14&4294967295|D>>>18),D=A+(O^C&(N^O))+k[12]+2368359562&4294967295,A=N+(D<<20&4294967295|D>>>12),D=C+(A^N^O)+k[5]+4294588738&4294967295,C=A+(D<<4&4294967295|D>>>28),D=O+(C^A^N)+k[8]+2272392833&4294967295,O=C+(D<<11&4294967295|D>>>21),D=N+(O^C^A)+k[11]+1839030562&4294967295,N=O+(D<<16&4294967295|D>>>16),D=A+(N^O^C)+k[14]+4259657740&4294967295,A=N+(D<<23&4294967295|D>>>9),D=C+(A^N^O)+k[1]+2763975236&4294967295,C=A+(D<<4&4294967295|D>>>28),D=O+(C^A^N)+k[4]+1272893353&4294967295,O=C+(D<<11&4294967295|D>>>21),D=N+(O^C^A)+k[7]+4139469664&4294967295,N=O+(D<<16&4294967295|D>>>16),D=A+(N^O^C)+k[10]+3200236656&4294967295,A=N+(D<<23&4294967295|D>>>9),D=C+(A^N^O)+k[13]+681279174&4294967295,C=A+(D<<4&4294967295|D>>>28),D=O+(C^A^N)+k[0]+3936430074&4294967295,O=C+(D<<11&4294967295|D>>>21),D=N+(O^C^A)+k[3]+3572445317&4294967295,N=O+(D<<16&4294967295|D>>>16),D=A+(N^O^C)+k[6]+76029189&4294967295,A=N+(D<<23&4294967295|D>>>9),D=C+(A^N^O)+k[9]+3654602809&4294967295,C=A+(D<<4&4294967295|D>>>28),D=O+(C^A^N)+k[12]+3873151461&4294967295,O=C+(D<<11&4294967295|D>>>21),D=N+(O^C^A)+k[15]+530742520&4294967295,N=O+(D<<16&4294967295|D>>>16),D=A+(N^O^C)+k[2]+3299628645&4294967295,A=N+(D<<23&4294967295|D>>>9),D=C+(N^(A|~O))+k[0]+4096336452&4294967295,C=A+(D<<6&4294967295|D>>>26),D=O+(A^(C|~N))+k[7]+1126891415&4294967295,O=C+(D<<10&4294967295|D>>>22),D=N+(C^(O|~A))+k[14]+2878612391&4294967295,N=O+(D<<15&4294967295|D>>>17),D=A+(O^(N|~C))+k[5]+4237533241&4294967295,A=N+(D<<21&4294967295|D>>>11),D=C+(N^(A|~O))+k[12]+1700485571&4294967295,C=A+(D<<6&4294967295|D>>>26),D=O+(A^(C|~N))+k[3]+2399980690&4294967295,O=C+(D<<10&4294967295|D>>>22),D=N+(C^(O|~A))+k[10]+4293915773&4294967295,N=O+(D<<15&4294967295|D>>>17),D=A+(O^(N|~C))+k[1]+2240044497&4294967295,A=N+(D<<21&4294967295|D>>>11),D=C+(N^(A|~O))+k[8]+1873313359&4294967295,C=A+(D<<6&4294967295|D>>>26),D=O+(A^(C|~N))+k[15]+4264355552&4294967295,O=C+(D<<10&4294967295|D>>>22),D=N+(C^(O|~A))+k[6]+2734768916&4294967295,N=O+(D<<15&4294967295|D>>>17),D=A+(O^(N|~C))+k[13]+1309151649&4294967295,A=N+(D<<21&4294967295|D>>>11),D=C+(N^(A|~O))+k[4]+4149444226&4294967295,C=A+(D<<6&4294967295|D>>>26),D=O+(A^(C|~N))+k[11]+3174756917&4294967295,O=C+(D<<10&4294967295|D>>>22),D=N+(C^(O|~A))+k[2]+718787259&4294967295,N=O+(D<<15&4294967295|D>>>17),D=A+(O^(N|~C))+k[9]+3951481745&4294967295,T.g[0]=T.g[0]+C&4294967295,T.g[1]=T.g[1]+(N+(D<<21&4294967295|D>>>11))&4294967295,T.g[2]=T.g[2]+N&4294967295,T.g[3]=T.g[3]+O&4294967295}r.prototype.u=function(T,C){C===void 0&&(C=T.length);for(var A=C-this.blockSize,k=this.B,N=this.h,O=0;O<C;){if(N==0)for(;O<=A;)i(this,T,O),O+=this.blockSize;if(typeof T=="string"){for(;O<C;)if(k[N++]=T.charCodeAt(O++),N==this.blockSize){i(this,k),N=0;break}}else for(;O<C;)if(k[N++]=T[O++],N==this.blockSize){i(this,k),N=0;break}}this.h=N,this.o+=C},r.prototype.v=function(){var T=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);T[0]=128;for(var C=1;C<T.length-8;++C)T[C]=0;var A=8*this.o;for(C=T.length-8;C<T.length;++C)T[C]=A&255,A/=256;for(this.u(T),T=Array(16),C=A=0;4>C;++C)for(var k=0;32>k;k+=8)T[A++]=this.g[C]>>>k&255;return T};function s(T,C){var A=a;return Object.prototype.hasOwnProperty.call(A,T)?A[T]:A[T]=C(T)}function o(T,C){this.h=C;for(var A=[],k=!0,N=T.length-1;0<=N;N--){var O=T[N]|0;k&&O==C||(A[N]=O,k=!1)}this.g=A}var a={};function u(T){return-128<=T&&128>T?s(T,function(C){return new o([C|0],0>C?-1:0)}):new o([T|0],0>T?-1:0)}function l(T){if(isNaN(T)||!isFinite(T))return f;if(0>T)return g(l(-T));for(var C=[],A=1,k=0;T>=A;k++)C[k]=T/A|0,A*=4294967296;return new o(C,0)}function c(T,C){if(T.length==0)throw Error("number format error: empty string");if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(T.charAt(0)=="-")return g(c(T.substring(1),C));if(0<=T.indexOf("-"))throw Error('number format error: interior "-" character');for(var A=l(Math.pow(C,8)),k=f,N=0;N<T.length;N+=8){var O=Math.min(8,T.length-N),D=parseInt(T.substring(N,N+O),C);8>O?(O=l(Math.pow(C,O)),k=k.j(O).add(l(D))):(k=k.j(A),k=k.add(l(D)))}return k}var f=u(0),d=u(1),h=u(16777216);e=o.prototype,e.m=function(){if(m(this))return-g(this).m();for(var T=0,C=1,A=0;A<this.g.length;A++){var k=this.i(A);T+=(0<=k?k:4294967296+k)*C,C*=4294967296}return T},e.toString=function(T){if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(p(this))return"0";if(m(this))return"-"+g(this).toString(T);for(var C=l(Math.pow(T,6)),A=this,k="";;){var N=w(A,C).g;A=y(A,N.j(C));var O=((0<A.g.length?A.g[0]:A.h)>>>0).toString(T);if(A=N,p(A))return O+k;for(;6>O.length;)O="0"+O;k=O+k}},e.i=function(T){return 0>T?0:T<this.g.length?this.g[T]:this.h};function p(T){if(T.h!=0)return!1;for(var C=0;C<T.g.length;C++)if(T.g[C]!=0)return!1;return!0}function m(T){return T.h==-1}e.l=function(T){return T=y(this,T),m(T)?-1:p(T)?0:1};function g(T){for(var C=T.g.length,A=[],k=0;k<C;k++)A[k]=~T.g[k];return new o(A,~T.h).add(d)}e.abs=function(){return m(this)?g(this):this},e.add=function(T){for(var C=Math.max(this.g.length,T.g.length),A=[],k=0,N=0;N<=C;N++){var O=k+(this.i(N)&65535)+(T.i(N)&65535),D=(O>>>16)+(this.i(N)>>>16)+(T.i(N)>>>16);k=D>>>16,O&=65535,D&=65535,A[N]=D<<16|O}return new o(A,A[A.length-1]&-2147483648?-1:0)};function y(T,C){return T.add(g(C))}e.j=function(T){if(p(this)||p(T))return f;if(m(this))return m(T)?g(this).j(g(T)):g(g(this).j(T));if(m(T))return g(this.j(g(T)));if(0>this.l(h)&&0>T.l(h))return l(this.m()*T.m());for(var C=this.g.length+T.g.length,A=[],k=0;k<2*C;k++)A[k]=0;for(k=0;k<this.g.length;k++)for(var N=0;N<T.g.length;N++){var O=this.i(k)>>>16,D=this.i(k)&65535,$=T.i(N)>>>16,F=T.i(N)&65535;A[2*k+2*N]+=D*F,v(A,2*k+2*N),A[2*k+2*N+1]+=O*F,v(A,2*k+2*N+1),A[2*k+2*N+1]+=D*$,v(A,2*k+2*N+1),A[2*k+2*N+2]+=O*$,v(A,2*k+2*N+2)}for(k=0;k<C;k++)A[k]=A[2*k+1]<<16|A[2*k];for(k=C;k<2*C;k++)A[k]=0;return new o(A,0)};function v(T,C){for(;(T[C]&65535)!=T[C];)T[C+1]+=T[C]>>>16,T[C]&=65535,C++}function _(T,C){this.g=T,this.h=C}function w(T,C){if(p(C))throw Error("division by zero");if(p(T))return new _(f,f);if(m(T))return C=w(g(T),C),new _(g(C.g),g(C.h));if(m(C))return C=w(T,g(C)),new _(g(C.g),C.h);if(30<T.g.length){if(m(T)||m(C))throw Error("slowDivide_ only works with positive integers.");for(var A=d,k=C;0>=k.l(T);)A=E(A),k=E(k);var N=S(A,1),O=S(k,1);for(k=S(k,2),A=S(A,2);!p(k);){var D=O.add(k);0>=D.l(T)&&(N=N.add(A),O=D),k=S(k,1),A=S(A,1)}return C=y(T,N.j(C)),new _(N,C)}for(N=f;0<=T.l(C);){for(A=Math.max(1,Math.floor(T.m()/C.m())),k=Math.ceil(Math.log(A)/Math.LN2),k=48>=k?1:Math.pow(2,k-48),O=l(A),D=O.j(C);m(D)||0<D.l(T);)A-=k,O=l(A),D=O.j(C);p(O)&&(O=d),N=N.add(O),T=y(T,D)}return new _(N,T)}e.A=function(T){return w(this,T).h},e.and=function(T){for(var C=Math.max(this.g.length,T.g.length),A=[],k=0;k<C;k++)A[k]=this.i(k)&T.i(k);return new o(A,this.h&T.h)},e.or=function(T){for(var C=Math.max(this.g.length,T.g.length),A=[],k=0;k<C;k++)A[k]=this.i(k)|T.i(k);return new o(A,this.h|T.h)},e.xor=function(T){for(var C=Math.max(this.g.length,T.g.length),A=[],k=0;k<C;k++)A[k]=this.i(k)^T.i(k);return new o(A,this.h^T.h)};function E(T){for(var C=T.g.length+1,A=[],k=0;k<C;k++)A[k]=T.i(k)<<1|T.i(k-1)>>>31;return new o(A,T.h)}function S(T,C){var A=C>>5;C%=32;for(var k=T.g.length-A,N=[],O=0;O<k;O++)N[O]=0<C?T.i(O+A)>>>C|T.i(O+A+1)<<32-C:T.i(O+A);return new o(N,T.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,IPe=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=l,o.fromString=c,k1=o}).apply(typeof Ihe<"u"?Ihe:typeof self<"u"?self:typeof window<"u"?window:{});var gP=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var kPe,RPe,U2,NPe,VD,UV,PPe,DPe,OPe;(function(){var e,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(x,L,V){return x==Array.prototype||x==Object.prototype||(x[L]=V.value),x};function n(x){x=[typeof globalThis=="object"&&globalThis,x,typeof window=="object"&&window,typeof self=="object"&&self,typeof gP=="object"&&gP];for(var L=0;L<x.length;++L){var V=x[L];if(V&&V.Math==Math)return V}throw Error("Cannot find global object")}var r=n(this);function i(x,L){if(L)e:{var V=r;x=x.split(".");for(var Q=0;Q<x.length-1;Q++){var we=x[Q];if(!(we in V))break e;V=V[we]}x=x[x.length-1],Q=V[x],L=L(Q),L!=Q&&L!=null&&t(V,x,{configurable:!0,writable:!0,value:L})}}function s(x,L){x instanceof String&&(x+="");var V=0,Q=!1,we={next:function(){if(!Q&&V<x.length){var De=V++;return{value:L(De,x[De]),done:!1}}return Q=!0,{done:!0,value:void 0}}};return we[Symbol.iterator]=function(){return we},we}i("Array.prototype.values",function(x){return x||function(){return s(this,function(L,V){return V})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function u(x){var L=typeof x;return L=L!="object"?L:x?Array.isArray(x)?"array":L:"null",L=="array"||L=="object"&&typeof x.length=="number"}function l(x){var L=typeof x;return L=="object"&&x!=null||L=="function"}function c(x,L,V){return x.call.apply(x.bind,arguments)}function f(x,L,V){if(!x)throw Error();if(2<arguments.length){var Q=Array.prototype.slice.call(arguments,2);return function(){var we=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(we,Q),x.apply(L,we)}}return function(){return x.apply(L,arguments)}}function d(x,L,V){return d=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?c:f,d.apply(null,arguments)}function h(x,L){var V=Array.prototype.slice.call(arguments,1);return function(){var Q=V.slice();return Q.push.apply(Q,arguments),x.apply(this,Q)}}function p(x,L){function V(){}V.prototype=L.prototype,x.aa=L.prototype,x.prototype=new V,x.prototype.constructor=x,x.Qb=function(Q,we,De){for(var ft=Array(arguments.length-2),Gr=2;Gr<arguments.length;Gr++)ft[Gr-2]=arguments[Gr];return L.prototype[we].apply(Q,ft)}}function m(x){const L=x.length;if(0<L){const V=Array(L);for(let Q=0;Q<L;Q++)V[Q]=x[Q];return V}return[]}function g(x,L){for(let V=1;V<arguments.length;V++){const Q=arguments[V];if(u(Q)){const we=x.length||0,De=Q.length||0;x.length=we+De;for(let ft=0;ft<De;ft++)x[we+ft]=Q[ft]}else x.push(Q)}}class y{constructor(L,V){this.i=L,this.j=V,this.h=0,this.g=null}get(){let L;return 0<this.h?(this.h--,L=this.g,this.g=L.next,L.next=null):L=this.i(),L}}function v(x){return/^[\s\xa0]*$/.test(x)}function _(){var x=a.navigator;return x&&(x=x.userAgent)?x:""}function w(x){return w[" "](x),x}w[" "]=function(){};var E=_().indexOf("Gecko")!=-1&&!(_().toLowerCase().indexOf("webkit")!=-1&&_().indexOf("Edge")==-1)&&!(_().indexOf("Trident")!=-1||_().indexOf("MSIE")!=-1)&&_().indexOf("Edge")==-1;function S(x,L,V){for(const Q in x)L.call(V,x[Q],Q,x)}function T(x,L){for(const V in x)L.call(void 0,x[V],V,x)}function C(x){const L={};for(const V in x)L[V]=x[V];return L}const A="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function k(x,L){let V,Q;for(let we=1;we<arguments.length;we++){Q=arguments[we];for(V in Q)x[V]=Q[V];for(let De=0;De<A.length;De++)V=A[De],Object.prototype.hasOwnProperty.call(Q,V)&&(x[V]=Q[V])}}function N(x){var L=1;x=x.split(":");const V=[];for(;0<L&&x.length;)V.push(x.shift()),L--;return x.length&&V.push(x.join(":")),V}function O(x){a.setTimeout(()=>{throw x},0)}function D(){var x=H;let L=null;return x.g&&(L=x.g,x.g=x.g.next,x.g||(x.h=null),L.next=null),L}class ${constructor(){this.h=this.g=null}add(L,V){const Q=F.get();Q.set(L,V),this.h?this.h.next=Q:this.g=Q,this.h=Q}}var F=new y(()=>new M,x=>x.reset());class M{constructor(){this.next=this.g=this.h=null}set(L,V){this.h=L,this.g=V,this.next=null}reset(){this.next=this.g=this.h=null}}let B,U=!1,H=new $,P=()=>{const x=a.Promise.resolve(void 0);B=()=>{x.then(z)}};var z=()=>{for(var x;x=D();){try{x.h.call(x.g)}catch(V){O(V)}var L=F;L.j(x),100>L.h&&(L.h++,x.next=L.g,L.g=x)}U=!1};function W(){this.s=this.s,this.C=this.C}W.prototype.s=!1,W.prototype.ma=function(){this.s||(this.s=!0,this.N())},W.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function j(x,L){this.type=x,this.g=this.target=L,this.defaultPrevented=!1}j.prototype.h=function(){this.defaultPrevented=!0};var q=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var x=!1,L=Object.defineProperty({},"passive",{get:function(){x=!0}});try{const V=()=>{};a.addEventListener("test",V,L),a.removeEventListener("test",V,L)}catch{}return x}();function G(x,L){if(j.call(this,x?x.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,x){var V=this.type=x.type,Q=x.changedTouches&&x.changedTouches.length?x.changedTouches[0]:null;if(this.target=x.target||x.srcElement,this.g=L,L=x.relatedTarget){if(E){e:{try{w(L.nodeName);var we=!0;break e}catch{}we=!1}we||(L=null)}}else V=="mouseover"?L=x.fromElement:V=="mouseout"&&(L=x.toElement);this.relatedTarget=L,Q?(this.clientX=Q.clientX!==void 0?Q.clientX:Q.pageX,this.clientY=Q.clientY!==void 0?Q.clientY:Q.pageY,this.screenX=Q.screenX||0,this.screenY=Q.screenY||0):(this.clientX=x.clientX!==void 0?x.clientX:x.pageX,this.clientY=x.clientY!==void 0?x.clientY:x.pageY,this.screenX=x.screenX||0,this.screenY=x.screenY||0),this.button=x.button,this.key=x.key||"",this.ctrlKey=x.ctrlKey,this.altKey=x.altKey,this.shiftKey=x.shiftKey,this.metaKey=x.metaKey,this.pointerId=x.pointerId||0,this.pointerType=typeof x.pointerType=="string"?x.pointerType:ne[x.pointerType]||"",this.state=x.state,this.i=x,x.defaultPrevented&&G.aa.h.call(this)}}p(G,j);var ne={2:"touch",3:"pen",4:"mouse"};G.prototype.h=function(){G.aa.h.call(this);var x=this.i;x.preventDefault?x.preventDefault():x.returnValue=!1};var ce="closure_listenable_"+(1e6*Math.random()|0),de=0;function he(x,L,V,Q,we){this.listener=x,this.proxy=null,this.src=L,this.type=V,this.capture=!!Q,this.ha=we,this.key=++de,this.da=this.fa=!1}function ve(x){x.da=!0,x.listener=null,x.proxy=null,x.src=null,x.ha=null}function Ie(x){this.src=x,this.g={},this.h=0}Ie.prototype.add=function(x,L,V,Q,we){var De=x.toString();x=this.g[De],x||(x=this.g[De]=[],this.h++);var ft=Ke(x,L,Q,we);return-1<ft?(L=x[ft],V||(L.fa=!1)):(L=new he(L,this.src,De,!!Q,we),L.fa=V,x.push(L)),L};function be(x,L){var V=L.type;if(V in x.g){var Q=x.g[V],we=Array.prototype.indexOf.call(Q,L,void 0),De;(De=0<=we)&&Array.prototype.splice.call(Q,we,1),De&&(ve(L),x.g[V].length==0&&(delete x.g[V],x.h--))}}function Ke(x,L,V,Q){for(var we=0;we<x.length;++we){var De=x[we];if(!De.da&&De.listener==L&&De.capture==!!V&&De.ha==Q)return we}return-1}var Ue="closure_lm_"+(1e6*Math.random()|0),yt={};function it(x,L,V,Q,we){if(Array.isArray(L)){for(var De=0;De<L.length;De++)it(x,L[De],V,Q,we);return null}return V=vt(V),x&&x[ce]?x.K(L,V,l(Q)?!!Q.capture:!!Q,we):_e(x,L,V,!1,Q,we)}function _e(x,L,V,Q,we,De){if(!L)throw Error("Invalid event type");var ft=l(we)?!!we.capture:!!we,Gr=ge(x);if(Gr||(x[Ue]=Gr=new Ie(x)),V=Gr.add(L,V,Q,ft,De),V.proxy)return V;if(Q=ke(),V.proxy=Q,Q.src=x,Q.listener=V,x.addEventListener)q||(we=ft),we===void 0&&(we=!1),x.addEventListener(L.toString(),Q,we);else if(x.attachEvent)x.attachEvent(Ot(L.toString()),Q);else if(x.addListener&&x.removeListener)x.addListener(Q);else throw Error("addEventListener and attachEvent are unavailable.");return V}function ke(){function x(V){return L.call(x.src,x.listener,V)}const L=We;return x}function ze(x,L,V,Q,we){if(Array.isArray(L))for(var De=0;De<L.length;De++)ze(x,L[De],V,Q,we);else Q=l(Q)?!!Q.capture:!!Q,V=vt(V),x&&x[ce]?(x=x.i,L=String(L).toString(),L in x.g&&(De=x.g[L],V=Ke(De,V,Q,we),-1<V&&(ve(De[V]),Array.prototype.splice.call(De,V,1),De.length==0&&(delete x.g[L],x.h--)))):x&&(x=ge(x))&&(L=x.g[L.toString()],x=-1,L&&(x=Ke(L,V,Q,we)),(V=-1<x?L[x]:null)&&ct(V))}function ct(x){if(typeof x!="number"&&x&&!x.da){var L=x.src;if(L&&L[ce])be(L.i,x);else{var V=x.type,Q=x.proxy;L.removeEventListener?L.removeEventListener(V,Q,x.capture):L.detachEvent?L.detachEvent(Ot(V),Q):L.addListener&&L.removeListener&&L.removeListener(Q),(V=ge(L))?(be(V,x),V.h==0&&(V.src=null,L[Ue]=null)):ve(x)}}}function Ot(x){return x in yt?yt[x]:yt[x]="on"+x}function We(x,L){if(x.da)x=!0;else{L=new G(L,this);var V=x.listener,Q=x.ha||x.src;x.fa&&ct(x),x=V.call(Q,L)}return x}function ge(x){return x=x[Ue],x instanceof Ie?x:null}var ht="__closure_events_fn_"+(1e9*Math.random()>>>0);function vt(x){return typeof x=="function"?x:(x[ht]||(x[ht]=function(L){return x.handleEvent(L)}),x[ht])}function me(){W.call(this),this.i=new Ie(this),this.M=this,this.F=null}p(me,W),me.prototype[ce]=!0,me.prototype.removeEventListener=function(x,L,V,Q){ze(this,x,L,V,Q)};function Ae(x,L){var V,Q=x.F;if(Q)for(V=[];Q;Q=Q.F)V.push(Q);if(x=x.M,Q=L.type||L,typeof L=="string")L=new j(L,x);else if(L instanceof j)L.target=L.target||x;else{var we=L;L=new j(Q,x),k(L,we)}if(we=!0,V)for(var De=V.length-1;0<=De;De--){var ft=L.g=V[De];we=He(ft,Q,!0,L)&&we}if(ft=L.g=x,we=He(ft,Q,!0,L)&&we,we=He(ft,Q,!1,L)&&we,V)for(De=0;De<V.length;De++)ft=L.g=V[De],we=He(ft,Q,!1,L)&&we}me.prototype.N=function(){if(me.aa.N.call(this),this.i){var x=this.i,L;for(L in x.g){for(var V=x.g[L],Q=0;Q<V.length;Q++)ve(V[Q]);delete x.g[L],x.h--}}this.F=null},me.prototype.K=function(x,L,V,Q){return this.i.add(String(x),L,!1,V,Q)},me.prototype.L=function(x,L,V,Q){return this.i.add(String(x),L,!0,V,Q)};function He(x,L,V,Q){if(L=x.i.g[String(L)],!L)return!0;L=L.concat();for(var we=!0,De=0;De<L.length;++De){var ft=L[De];if(ft&&!ft.da&&ft.capture==V){var Gr=ft.listener,go=ft.ha||ft.src;ft.fa&&be(x.i,ft),we=Gr.call(go,Q)!==!1&&we}}return we&&!Q.defaultPrevented}function ut(x,L,V){if(typeof x=="function")V&&(x=d(x,V));else if(x&&typeof x.handleEvent=="function")x=d(x.handleEvent,x);else throw Error("Invalid listener argument");return 2147483647<Number(L)?-1:a.setTimeout(x,L||0)}function _t(x){x.g=ut(()=>{x.g=null,x.i&&(x.i=!1,_t(x))},x.l);const L=x.h;x.h=null,x.m.apply(null,L)}class Ln extends W{constructor(L,V){super(),this.m=L,this.l=V,this.h=null,this.i=!1,this.g=null}j(L){this.h=arguments,this.g?this.i=!0:_t(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Cr(x){W.call(this),this.h=x,this.g={}}p(Cr,W);var Fn=[];function cr(x){S(x.g,function(L,V){this.g.hasOwnProperty(V)&&ct(L)},x),x.g={}}Cr.prototype.N=function(){Cr.aa.N.call(this),cr(this)},Cr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var gn=a.JSON.stringify,An=a.JSON.parse,nr=class{stringify(x){return a.JSON.stringify(x,void 0)}parse(x){return a.JSON.parse(x,void 0)}};function rr(){}rr.prototype.h=null;function zo(x){return x.h||(x.h=x.i())}function $i(){}var In={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Mi(){j.call(this,"d")}p(Mi,j);function Ar(){j.call(this,"c")}p(Ar,j);var gs={},pp=null;function fl(){return pp=pp||new me}gs.La="serverreachability";function _d(x){j.call(this,gs.La,x)}p(_d,j);function xr(x){const L=fl();Ae(L,new _d(L))}gs.STAT_EVENT="statevent";function Ii(x,L){j.call(this,gs.STAT_EVENT,x),this.stat=L}p(Ii,j);function Qr(x){const L=fl();Ae(L,new Ii(L,x))}gs.Ma="timingevent";function fu(x,L){j.call(this,gs.Ma,x),this.size=L}p(fu,j);function Ia(x,L){if(typeof x!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){x()},L)}function ka(){this.g=!0}ka.prototype.xa=function(){this.g=!1};function oe(x,L,V,Q,we,De){x.info(function(){if(x.g)if(De)for(var ft="",Gr=De.split("&"),go=0;go<Gr.length;go++){var fr=Gr[go].split("=");if(1<fr.length){var Wo=fr[0];fr=fr[1];var Go=Wo.split("_");ft=2<=Go.length&&Go[1]=="type"?ft+(Wo+"="+fr+"&"):ft+(Wo+"=redacted&")}}else ft=null;else ft=De;return"XMLHTTP REQ ("+Q+") [attempt "+we+"]: "+L+`
`+V+`
`+ft})}function ee(x,L,V,Q,we,De,ft){x.info(function(){return"XMLHTTP RESP ("+Q+") [ attempt "+we+"]: "+L+`
`+V+`
`+De+" "+ft})}function ae(x,L,V,Q){x.info(function(){return"XMLHTTP TEXT ("+L+"): "+Se(x,V)+(Q?" "+Q:"")})}function Ce(x,L){x.info(function(){return"TIMEOUT: "+L})}ka.prototype.info=function(){};function Se(x,L){if(!x.g)return L;if(!L)return null;try{var V=JSON.parse(L);if(V){for(x=0;x<V.length;x++)if(Array.isArray(V[x])){var Q=V[x];if(!(2>Q.length)){var we=Q[1];if(Array.isArray(we)&&!(1>we.length)){var De=we[0];if(De!="noop"&&De!="stop"&&De!="close")for(var ft=1;ft<we.length;ft++)we[ft]=""}}}}return gn(V)}catch{return L}}var ot={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},St={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Ht;function On(){}p(On,rr),On.prototype.g=function(){return new XMLHttpRequest},On.prototype.i=function(){return{}},Ht=new On;function jn(x,L,V,Q){this.j=x,this.i=L,this.l=V,this.R=Q||1,this.U=new Cr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new pn}function pn(){this.i=null,this.g="",this.h=!1}var ir={},Ir={};function Vt(x,L,V){x.L=1,x.v=Bn(Ge(L)),x.m=V,x.P=!0,sr(x,null)}function sr(x,L){x.F=Date.now(),ki(x),x.A=Ge(x.v);var V=x.A,Q=x.R;Array.isArray(Q)||(Q=[String(Q)]),QR(V.i,"t",Q),x.C=0,V=x.j.J,x.h=new pn,x.g=Uie(x.j,V?L:null,!x.m),0<x.O&&(x.M=new Ln(d(x.Y,x,x.g),x.O)),L=x.U,V=x.g,Q=x.ca;var we="readystatechange";Array.isArray(we)||(we&&(Fn[0]=we.toString()),we=Fn);for(var De=0;De<we.length;De++){var ft=it(V,we[De],Q||L.handleEvent,!1,L.h||L);if(!ft)break;L.g[ft.key]=ft}L=x.H?C(x.H):{},x.m?(x.u||(x.u="POST"),L["Content-Type"]="application/x-www-form-urlencoded",x.g.ea(x.A,x.u,x.m,L)):(x.u="GET",x.g.ea(x.A,x.u,null,L)),xr(),oe(x.i,x.u,x.A,x.l,x.R,x.m)}jn.prototype.ca=function(x){x=x.target;const L=this.M;L&&Zi(x)==3?L.j():this.Y(x)},jn.prototype.Y=function(x){try{if(x==this.g)e:{const Go=Zi(this.g);var L=this.g.Ba();const x_=this.g.Z();if(!(3>Go)&&(Go!=3||this.g&&(this.h.h||this.g.oa()||qo(this.g)))){this.J||Go!=4||L==7||(L==8||0>=x_?xr(3):xr(2)),Jr(this);var V=this.g.Z();this.X=V;t:if(Hr(this)){var Q=qo(this.g);x="";var we=Q.length,De=Zi(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Li(this),mo(this);var ft="";break t}this.h.i=new a.TextDecoder}for(L=0;L<we;L++)this.h.h=!0,x+=this.h.i.decode(Q[L],{stream:!(De&&L==we-1)});Q.length=0,this.h.g+=x,this.C=0,ft=this.h.g}else ft=this.g.oa();if(this.o=V==200,ee(this.i,this.u,this.A,this.l,this.R,Go,V),this.o){if(this.T&&!this.K){t:{if(this.g){var Gr,go=this.g;if((Gr=go.g?go.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!v(Gr)){var fr=Gr;break t}}fr=null}if(V=fr)ae(this.i,this.l,V,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Fi(this,V);else{this.o=!1,this.s=3,Qr(12),Li(this),mo(this);break e}}if(this.P){V=!0;let tf;for(;!this.J&&this.C<ft.length;)if(tf=Jn(this,ft),tf==Ir){Go==4&&(this.s=4,Qr(14),V=!1),ae(this.i,this.l,null,"[Incomplete Response]");break}else if(tf==ir){this.s=4,Qr(15),ae(this.i,this.l,ft,"[Invalid Chunk]"),V=!1;break}else ae(this.i,this.l,tf,null),Fi(this,tf);if(Hr(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Go!=4||ft.length!=0||this.h.h||(this.s=1,Qr(16),V=!1),this.o=this.o&&V,!V)ae(this.i,this.l,ft,"[Invalid Chunked Response]"),Li(this),mo(this);else if(0<ft.length&&!this.W){this.W=!0;var Wo=this.j;Wo.g==this&&Wo.ba&&!Wo.M&&(Wo.j.info("Great, no buffering proxy detected. Bytes received: "+ft.length),Q5(Wo),Wo.M=!0,Qr(11))}}else ae(this.i,this.l,ft,null),Fi(this,ft);Go==4&&Li(this),this.o&&!this.J&&(Go==4?Lie(this.j,this):(this.o=!1,ki(this)))}else cv(this.g),V==400&&0<ft.indexOf("Unknown SID")?(this.s=3,Qr(12)):(this.s=0,Qr(13)),Li(this),mo(this)}}}catch{}finally{}};function Hr(x){return x.g?x.u=="GET"&&x.L!=2&&x.j.Ca:!1}function Jn(x,L){var V=x.C,Q=L.indexOf(`
`,V);return Q==-1?Ir:(V=Number(L.substring(V,Q)),isNaN(V)?ir:(Q+=1,Q+V>L.length?Ir:(L=L.slice(Q,Q+V),x.C=Q+V,L)))}jn.prototype.cancel=function(){this.J=!0,Li(this)};function ki(x){x.S=Date.now()+x.I,Hs(x,x.I)}function Hs(x,L){if(x.B!=null)throw Error("WatchDog timer not null");x.B=Ia(d(x.ba,x),L)}function Jr(x){x.B&&(a.clearTimeout(x.B),x.B=null)}jn.prototype.ba=function(){this.B=null;const x=Date.now();0<=x-this.S?(Ce(this.i,this.A),this.L!=2&&(xr(),Qr(17)),Li(this),this.s=2,mo(this)):Hs(this,this.S-x)};function mo(x){x.j.G==0||x.J||Lie(x.j,x)}function Li(x){Jr(x);var L=x.M;L&&typeof L.ma=="function"&&L.ma(),x.M=null,cr(x.U),x.g&&(L=x.g,x.g=null,L.abort(),L.ma())}function Fi(x,L){try{var V=x.j;if(V.G!=0&&(V.g==x||wd(V.h,x))){if(!x.K&&wd(V.h,x)&&V.G==3){try{var Q=V.Da.g.parse(L)}catch{Q=null}if(Array.isArray(Q)&&Q.length==3){var we=Q;if(we[0]==0){e:if(!V.u){if(V.g)if(V.g.F+3e3<x.F)iN(V),nN(V);else break e;X5(V),Qr(18)}}else V.za=we[1],0<V.za-V.T&&37500>we[2]&&V.F&&V.v==0&&!V.C&&(V.C=Ia(d(V.Za,V),6e3));if(1>=nc(V.h)&&V.ca){try{V.ca()}catch{}V.ca=void 0}}else fv(V,11)}else if((x.K||V.g==x)&&iN(V),!v(L))for(we=V.Da.g.parse(L),L=0;L<we.length;L++){let fr=we[L];if(V.T=fr[0],fr=fr[1],V.G==2)if(fr[0]=="c"){V.K=fr[1],V.ia=fr[2];const Wo=fr[3];Wo!=null&&(V.la=Wo,V.j.info("VER="+V.la));const Go=fr[4];Go!=null&&(V.Aa=Go,V.j.info("SVER="+V.Aa));const x_=fr[5];x_!=null&&typeof x_=="number"&&0<x_&&(Q=1.5*x_,V.L=Q,V.j.info("backChannelRequestTimeoutMs_="+Q)),Q=V;const tf=x.g;if(tf){const oN=tf.g?tf.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(oN){var De=Q.h;De.g||oN.indexOf("spdy")==-1&&oN.indexOf("quic")==-1&&oN.indexOf("h2")==-1||(De.j=De.l,De.g=new Set,De.h&&(Y(De,De.h),De.h=null))}if(Q.D){const J5=tf.g?tf.g.getResponseHeader("X-HTTP-Session-Id"):null;J5&&(Q.ya=J5,Pt(Q.I,Q.D,J5))}}V.G=3,V.l&&V.l.ua(),V.ba&&(V.R=Date.now()-x.F,V.j.info("Handshake RTT: "+V.R+"ms")),Q=V;var ft=x;if(Q.qa=Bie(Q,Q.J?Q.ia:null,Q.W),ft.K){se(Q.h,ft);var Gr=ft,go=Q.L;go&&(Gr.I=go),Gr.B&&(Jr(Gr),ki(Gr)),Q.g=ft}else $ie(Q);0<V.i.length&&rN(V)}else fr[0]!="stop"&&fr[0]!="close"||fv(V,7);else V.G==3&&(fr[0]=="stop"||fr[0]=="close"?fr[0]=="stop"?fv(V,7):w_(V):fr[0]!="noop"&&V.l&&V.l.ta(fr),V.v=0)}}xr(4)}catch{}}var Vo=class{constructor(x,L){this.g=x,this.map=L}};function Ra(x){this.l=x||10,a.PerformanceNavigationTiming?(x=a.performance.getEntriesByType("navigation"),x=0<x.length&&(x[0].nextHopProtocol=="hq"||x[0].nextHopProtocol=="h2")):x=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=x?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function qs(x){return x.h?!0:x.g?x.g.size>=x.j:!1}function nc(x){return x.h?1:x.g?x.g.size:0}function wd(x,L){return x.h?x.h==L:x.g?x.g.has(L):!1}function Y(x,L){x.g?x.g.add(L):x.h=L}function se(x,L){x.h&&x.h==L?x.h=null:x.g&&x.g.has(L)&&x.g.delete(L)}Ra.prototype.cancel=function(){if(this.i=Z(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const x of this.g.values())x.cancel();this.g.clear()}};function Z(x){if(x.h!=null)return x.i.concat(x.h.D);if(x.g!=null&&x.g.size!==0){let L=x.i;for(const V of x.g.values())L=L.concat(V.D);return L}return m(x.i)}function fe(x){if(x.V&&typeof x.V=="function")return x.V();if(typeof Map<"u"&&x instanceof Map||typeof Set<"u"&&x instanceof Set)return Array.from(x.values());if(typeof x=="string")return x.split("");if(u(x)){for(var L=[],V=x.length,Q=0;Q<V;Q++)L.push(x[Q]);return L}L=[],V=0;for(Q in x)L[V++]=x[Q];return L}function ye(x){if(x.na&&typeof x.na=="function")return x.na();if(!x.V||typeof x.V!="function"){if(typeof Map<"u"&&x instanceof Map)return Array.from(x.keys());if(!(typeof Set<"u"&&x instanceof Set)){if(u(x)||typeof x=="string"){var L=[];x=x.length;for(var V=0;V<x;V++)L.push(V);return L}L=[],V=0;for(const Q in x)L[V++]=Q;return L}}}function le(x,L){if(x.forEach&&typeof x.forEach=="function")x.forEach(L,void 0);else if(u(x)||typeof x=="string")Array.prototype.forEach.call(x,L,void 0);else for(var V=ye(x),Q=fe(x),we=Q.length,De=0;De<we;De++)L.call(void 0,Q[De],V&&V[De],x)}var Oe=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ve(x,L){if(x){x=x.split("&");for(var V=0;V<x.length;V++){var Q=x[V].indexOf("="),we=null;if(0<=Q){var De=x[V].substring(0,Q);we=x[V].substring(Q+1)}else De=x[V];L(De,we?decodeURIComponent(we.replace(/\+/g," ")):"")}}}function qe(x){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,x instanceof qe){this.h=x.h,st(this,x.j),this.o=x.o,this.g=x.g,Et(this,x.s),this.l=x.l;var L=x.i,V=new rc;V.i=L.i,L.g&&(V.g=new Map(L.g),V.h=L.h),mn(this,V),this.m=x.m}else x&&(L=String(x).match(Oe))?(this.h=!1,st(this,L[1]||"",!0),this.o=kr(L[2]||""),this.g=kr(L[3]||"",!0),Et(this,L[4]),this.l=kr(L[5]||"",!0),mn(this,L[6]||"",!0),this.m=kr(L[7]||"")):(this.h=!1,this.i=new rc(null,this.h))}qe.prototype.toString=function(){var x=[],L=this.j;L&&x.push(Rr(L,Ed,!0),":");var V=this.g;return(V||L=="file")&&(x.push("//"),(L=this.o)&&x.push(Rr(L,Ed,!0),"@"),x.push(encodeURIComponent(String(V)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),V=this.s,V!=null&&x.push(":",String(V))),(V=this.l)&&(this.g&&V.charAt(0)!="/"&&x.push("/"),x.push(Rr(V,V.charAt(0)=="/"?cT:mp,!0))),(V=this.i.toString())&&x.push("?",V),(V=this.m)&&x.push("#",Rr(V,XR)),x.join("")};function Ge(x){return new qe(x)}function st(x,L,V){x.j=V?kr(L,!0):L,x.j&&(x.j=x.j.replace(/:$/,""))}function Et(x,L){if(L){if(L=Number(L),isNaN(L)||0>L)throw Error("Bad port number "+L);x.s=L}else x.s=null}function mn(x,L,V){L instanceof rc?(x.i=L,fT(x.i,x.h)):(V||(L=Rr(L,ov)),x.i=new rc(L,x.h))}function Pt(x,L,V){x.i.set(L,V)}function Bn(x){return Pt(x,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),x}function kr(x,L){return x?L?decodeURI(x.replace(/%25/g,"%2525")):decodeURIComponent(x):""}function Rr(x,L,V){return typeof x=="string"?(x=encodeURI(x).replace(L,Ho),V&&(x=x.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),x):null}function Ho(x){return x=x.charCodeAt(0),"%"+(x>>4&15).toString(16)+(x&15).toString(16)}var Ed=/[#\/\?@]/g,mp=/[#\?:]/g,cT=/[#\?]/g,ov=/[#\?@]/g,XR=/#/g;function rc(x,L){this.h=this.g=null,this.i=x||null,this.j=!!L}function du(x){x.g||(x.g=new Map,x.h=0,x.i&&Ve(x.i,function(L,V){x.add(decodeURIComponent(L.replace(/\+/g," ")),V)}))}e=rc.prototype,e.add=function(x,L){du(this),this.i=null,x=yp(this,x);var V=this.g.get(x);return V||this.g.set(x,V=[]),V.push(L),this.h+=1,this};function gp(x,L){du(x),L=yp(x,L),x.g.has(L)&&(x.i=null,x.h-=x.g.get(L).length,x.g.delete(L))}function b_(x,L){return du(x),L=yp(x,L),x.g.has(L)}e.forEach=function(x,L){du(this),this.g.forEach(function(V,Q){V.forEach(function(we){x.call(L,we,Q,this)},this)},this)},e.na=function(){du(this);const x=Array.from(this.g.values()),L=Array.from(this.g.keys()),V=[];for(let Q=0;Q<L.length;Q++){const we=x[Q];for(let De=0;De<we.length;De++)V.push(L[Q])}return V},e.V=function(x){du(this);let L=[];if(typeof x=="string")b_(this,x)&&(L=L.concat(this.g.get(yp(this,x))));else{x=Array.from(this.g.values());for(let V=0;V<x.length;V++)L=L.concat(x[V])}return L},e.set=function(x,L){return du(this),this.i=null,x=yp(this,x),b_(this,x)&&(this.h-=this.g.get(x).length),this.g.set(x,[L]),this.h+=1,this},e.get=function(x,L){return x?(x=this.V(x),0<x.length?String(x[0]):L):L};function QR(x,L,V){gp(x,L),0<V.length&&(x.i=null,x.g.set(yp(x,L),m(V)),x.h+=V.length)}e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const x=[],L=Array.from(this.g.keys());for(var V=0;V<L.length;V++){var Q=L[V];const De=encodeURIComponent(String(Q)),ft=this.V(Q);for(Q=0;Q<ft.length;Q++){var we=De;ft[Q]!==""&&(we+="="+encodeURIComponent(String(ft[Q]))),x.push(we)}}return this.i=x.join("&")};function yp(x,L){return L=String(L),x.j&&(L=L.toLowerCase()),L}function fT(x,L){L&&!x.j&&(du(x),x.i=null,x.g.forEach(function(V,Q){var we=Q.toLowerCase();Q!=we&&(gp(this,Q),QR(this,we,V))},x)),x.j=L}function JR(x,L){const V=new ka;if(a.Image){const Q=new Image;Q.onload=h(hu,V,"TestLoadImage: loaded",!0,L,Q),Q.onerror=h(hu,V,"TestLoadImage: error",!1,L,Q),Q.onabort=h(hu,V,"TestLoadImage: abort",!1,L,Q),Q.ontimeout=h(hu,V,"TestLoadImage: timeout",!1,L,Q),a.setTimeout(function(){Q.ontimeout&&Q.ontimeout()},1e4),Q.src=x}else L(!1)}function vp(x,L){const V=new ka,Q=new AbortController,we=setTimeout(()=>{Q.abort(),hu(V,"TestPingServer: timeout",!1,L)},1e4);fetch(x,{signal:Q.signal}).then(De=>{clearTimeout(we),De.ok?hu(V,"TestPingServer: ok",!0,L):hu(V,"TestPingServer: server error",!1,L)}).catch(()=>{clearTimeout(we),hu(V,"TestPingServer: error",!1,L)})}function hu(x,L,V,Q,we){try{we&&(we.onload=null,we.onerror=null,we.onabort=null,we.ontimeout=null),Q(V)}catch{}}function K5(){this.g=new nr}function ZR(x,L,V){const Q=V||"";try{le(x,function(we,De){let ft=we;l(we)&&(ft=gn(we)),L.push(Q+De+"="+encodeURIComponent(ft))})}catch(we){throw L.push(Q+"type="+encodeURIComponent("_badmap")),we}}function av(x){this.l=x.Ub||null,this.j=x.eb||!1}p(av,rr),av.prototype.g=function(){return new uv(this.l,this.j)},av.prototype.i=function(x){return function(){return x}}({});function uv(x,L){me.call(this),this.D=x,this.o=L,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}p(uv,me),e=uv.prototype,e.open=function(x,L){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=x,this.A=L,this.readyState=1,gg(this)},e.send=function(x){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const L={headers:this.u,method:this.B,credentials:this.m,cache:void 0};x&&(L.body=x),(this.D||a).fetch(new Request(this.A,L)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,lv(this)),this.readyState=0},e.Sa=function(x){if(this.g&&(this.l=x,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=x.headers,this.readyState=2,gg(this)),this.g&&(this.readyState=3,gg(this),this.g)))if(this.responseType==="arraybuffer")x.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in x){if(this.j=x.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;eN(this)}else x.text().then(this.Ra.bind(this),this.ga.bind(this))};function eN(x){x.j.read().then(x.Pa.bind(x)).catch(x.ga.bind(x))}e.Pa=function(x){if(this.g){if(this.o&&x.value)this.response.push(x.value);else if(!this.o){var L=x.value?x.value:new Uint8Array(0);(L=this.v.decode(L,{stream:!x.done}))&&(this.response=this.responseText+=L)}x.done?lv(this):gg(this),this.readyState==3&&eN(this)}},e.Ra=function(x){this.g&&(this.response=this.responseText=x,lv(this))},e.Qa=function(x){this.g&&(this.response=x,lv(this))},e.ga=function(){this.g&&lv(this)};function lv(x){x.readyState=4,x.l=null,x.j=null,x.v=null,gg(x)}e.setRequestHeader=function(x,L){this.u.append(x,L)},e.getResponseHeader=function(x){return this.h&&this.h.get(x.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const x=[],L=this.h.entries();for(var V=L.next();!V.done;)V=V.value,x.push(V[0]+": "+V[1]),V=L.next();return x.join(`\r
`)};function gg(x){x.onreadystatechange&&x.onreadystatechange.call(x)}Object.defineProperty(uv.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(x){this.m=x?"include":"same-origin"}});function tN(x){let L="";return S(x,function(V,Q){L+=Q,L+=":",L+=V,L+=`\r
`}),L}function te(x,L,V){e:{for(Q in V){var Q=!1;break e}Q=!0}Q||(V=tN(V),typeof x=="string"?V!=null&&encodeURIComponent(String(V)):Pt(x,L,V))}function ue(x){me.call(this),this.headers=new Map,this.o=x||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}p(ue,me);var Re=/^https?$/i,At=["POST","PUT"];e=ue.prototype,e.Ha=function(x){this.J=x},e.ea=function(x,L,V,Q){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+x);L=L?L.toUpperCase():"GET",this.D=x,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ht.g(),this.v=this.o?zo(this.o):zo(Ht),this.g.onreadystatechange=d(this.Ea,this);try{this.B=!0,this.g.open(L,String(x),!0),this.B=!1}catch(De){$n(this,De);return}if(x=V||"",V=new Map(this.headers),Q)if(Object.getPrototypeOf(Q)===Object.prototype)for(var we in Q)V.set(we,Q[we]);else if(typeof Q.keys=="function"&&typeof Q.get=="function")for(const De of Q.keys())V.set(De,Q.get(De));else throw Error("Unknown input type for opt_headers: "+String(Q));Q=Array.from(V.keys()).find(De=>De.toLowerCase()=="content-type"),we=a.FormData&&x instanceof a.FormData,!(0<=Array.prototype.indexOf.call(At,L,void 0))||Q||we||V.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[De,ft]of V)this.g.setRequestHeader(De,ft);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Wr(this),this.u=!0,this.g.send(x),this.u=!1}catch(De){$n(this,De)}};function $n(x,L){x.h=!1,x.g&&(x.j=!0,x.g.abort(),x.j=!1),x.l=L,x.m=5,Sr(x),Un(x)}function Sr(x){x.A||(x.A=!0,Ae(x,"complete"),Ae(x,"error"))}e.abort=function(x){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=x||7,Ae(this,"complete"),Ae(this,"abort"),Un(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Un(this,!0)),ue.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?qr(this):this.bb())},e.bb=function(){qr(this)};function qr(x){if(x.h&&typeof o<"u"&&(!x.v[1]||Zi(x)!=4||x.Z()!=2)){if(x.u&&Zi(x)==4)ut(x.Ea,0,x);else if(Ae(x,"readystatechange"),Zi(x)==4){x.h=!1;try{const ft=x.Z();e:switch(ft){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var L=!0;break e;default:L=!1}var V;if(!(V=L)){var Q;if(Q=ft===0){var we=String(x.D).match(Oe)[1]||null;!we&&a.self&&a.self.location&&(we=a.self.location.protocol.slice(0,-1)),Q=!Re.test(we?we.toLowerCase():"")}V=Q}if(V)Ae(x,"complete"),Ae(x,"success");else{x.m=6;try{var De=2<Zi(x)?x.g.statusText:""}catch{De=""}x.l=De+" ["+x.Z()+"]",Sr(x)}}finally{Un(x)}}}}function Un(x,L){if(x.g){Wr(x);const V=x.g,Q=x.v[0]?()=>{}:null;x.g=null,x.v=null,L||Ae(x,"ready");try{V.onreadystatechange=Q}catch{}}}function Wr(x){x.I&&(a.clearTimeout(x.I),x.I=null)}e.isActive=function(){return!!this.g};function Zi(x){return x.g?x.g.readyState:0}e.Z=function(){try{return 2<Zi(this)?this.g.status:-1}catch{return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},e.Oa=function(x){if(this.g){var L=this.g.responseText;return x&&L.indexOf(x)==0&&(L=L.substring(x.length)),An(L)}};function qo(x){try{if(!x.g)return null;if("response"in x.g)return x.g.response;switch(x.H){case"":case"text":return x.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in x.g)return x.g.mozResponseArrayBuffer}return null}catch{return null}}function cv(x){const L={};x=(x.g&&2<=Zi(x)&&x.g.getAllResponseHeaders()||"").split(`\r
`);for(let Q=0;Q<x.length;Q++){if(v(x[Q]))continue;var V=N(x[Q]);const we=V[0];if(V=V[1],typeof V!="string")continue;V=V.trim();const De=L[we]||[];L[we]=De,De.push(V)}T(L,function(Q){return Q.join(", ")})}e.Ba=function(){return this.m},e.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function bp(x,L,V){return V&&V.internalChannelParams&&V.internalChannelParams[x]||L}function __(x){this.Aa=0,this.i=[],this.j=new ka,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=bp("failFast",!1,x),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=bp("baseRetryDelayMs",5e3,x),this.cb=bp("retryDelaySeedMs",1e4,x),this.Wa=bp("forwardChannelMaxRetries",2,x),this.wa=bp("forwardChannelRequestTimeoutMs",2e4,x),this.pa=x&&x.xmlHttpFactory||void 0,this.Xa=x&&x.Tb||void 0,this.Ca=x&&x.useFetchStreams||!1,this.L=void 0,this.J=x&&x.supportsCrossDomainXhr||!1,this.K="",this.h=new Ra(x&&x.concurrentRequestLimit),this.Da=new K5,this.P=x&&x.fastHandshake||!1,this.O=x&&x.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=x&&x.Rb||!1,x&&x.xa&&this.j.xa(),x&&x.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&x&&x.detectBufferingProxy||!1,this.ja=void 0,x&&x.longPollingTimeout&&0<x.longPollingTimeout&&(this.ja=x.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}e=__.prototype,e.la=8,e.G=1,e.connect=function(x,L,V,Q){Qr(0),this.W=x,this.H=L||{},V&&Q!==void 0&&(this.H.OSID=V,this.H.OAID=Q),this.F=this.X,this.I=Bie(this,null,this.W),rN(this)};function w_(x){if(Pie(x),x.G==3){var L=x.U++,V=Ge(x.I);if(Pt(V,"SID",x.K),Pt(V,"RID",L),Pt(V,"TYPE","terminate"),dT(x,V),L=new jn(x,x.j,L),L.L=2,L.v=Bn(Ge(V)),V=!1,a.navigator&&a.navigator.sendBeacon)try{V=a.navigator.sendBeacon(L.v.toString(),"")}catch{}!V&&a.Image&&(new Image().src=L.v,V=!0),V||(L.g=Uie(L.j,null),L.g.ea(L.v)),L.F=Date.now(),ki(L)}jie(x)}function nN(x){x.g&&(Q5(x),x.g.cancel(),x.g=null)}function Pie(x){nN(x),x.u&&(a.clearTimeout(x.u),x.u=null),iN(x),x.h.cancel(),x.s&&(typeof x.s=="number"&&a.clearTimeout(x.s),x.s=null)}function rN(x){if(!qs(x.h)&&!x.s){x.s=!0;var L=x.Ga;B||P(),U||(B(),U=!0),H.add(L,x),x.B=0}}function t8e(x,L){return nc(x.h)>=x.h.j-(x.s?1:0)?!1:x.s?(x.i=L.D.concat(x.i),!0):x.G==1||x.G==2||x.B>=(x.Va?0:x.Wa)?!1:(x.s=Ia(d(x.Ga,x,L),Fie(x,x.B)),x.B++,!0)}e.Ga=function(x){if(this.s)if(this.s=null,this.G==1){if(!x){this.U=Math.floor(1e5*Math.random()),x=this.U++;const we=new jn(this,this.j,x);let De=this.o;if(this.S&&(De?(De=C(De),k(De,this.S)):De=this.S),this.m!==null||this.O||(we.H=De,De=null),this.P)e:{for(var L=0,V=0;V<this.i.length;V++){t:{var Q=this.i[V];if("__data__"in Q.map&&(Q=Q.map.__data__,typeof Q=="string")){Q=Q.length;break t}Q=void 0}if(Q===void 0)break;if(L+=Q,4096<L){L=V;break e}if(L===4096||V===this.i.length-1){L=V+1;break e}}L=1e3}else L=1e3;L=Oie(this,we,L),V=Ge(this.I),Pt(V,"RID",x),Pt(V,"CVER",22),this.D&&Pt(V,"X-HTTP-Session-Id",this.D),dT(this,V),De&&(this.O?L="headers="+encodeURIComponent(String(tN(De)))+"&"+L:this.m&&te(V,this.m,De)),Y(this.h,we),this.Ua&&Pt(V,"TYPE","init"),this.P?(Pt(V,"$req",L),Pt(V,"SID","null"),we.T=!0,Vt(we,V,null)):Vt(we,V,L),this.G=2}}else this.G==3&&(x?Die(this,x):this.i.length==0||qs(this.h)||Die(this))};function Die(x,L){var V;L?V=L.l:V=x.U++;const Q=Ge(x.I);Pt(Q,"SID",x.K),Pt(Q,"RID",V),Pt(Q,"AID",x.T),dT(x,Q),x.m&&x.o&&te(Q,x.m,x.o),V=new jn(x,x.j,V,x.B+1),x.m===null&&(V.H=x.o),L&&(x.i=L.D.concat(x.i)),L=Oie(x,V,1e3),V.I=Math.round(.5*x.wa)+Math.round(.5*x.wa*Math.random()),Y(x.h,V),Vt(V,Q,L)}function dT(x,L){x.H&&S(x.H,function(V,Q){Pt(L,Q,V)}),x.l&&le({},function(V,Q){Pt(L,Q,V)})}function Oie(x,L,V){V=Math.min(x.i.length,V);var Q=x.l?d(x.l.Na,x.l,x):null;e:{var we=x.i;let De=-1;for(;;){const ft=["count="+V];De==-1?0<V?(De=we[0].g,ft.push("ofs="+De)):De=0:ft.push("ofs="+De);let Gr=!0;for(let go=0;go<V;go++){let fr=we[go].g;const Wo=we[go].map;if(fr-=De,0>fr)De=Math.max(0,we[go].g-100),Gr=!1;else try{ZR(Wo,ft,"req"+fr+"_")}catch{Q&&Q(Wo)}}if(Gr){Q=ft.join("&");break e}}}return x=x.i.splice(0,V),L.D=x,Q}function $ie(x){if(!x.g&&!x.u){x.Y=1;var L=x.Fa;B||P(),U||(B(),U=!0),H.add(L,x),x.v=0}}function X5(x){return x.g||x.u||3<=x.v?!1:(x.Y++,x.u=Ia(d(x.Fa,x),Fie(x,x.v)),x.v++,!0)}e.Fa=function(){if(this.u=null,Mie(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var x=2*this.R;this.j.info("BP detection timer enabled: "+x),this.A=Ia(d(this.ab,this),x)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Qr(10),nN(this),Mie(this))};function Q5(x){x.A!=null&&(a.clearTimeout(x.A),x.A=null)}function Mie(x){x.g=new jn(x,x.j,"rpc",x.Y),x.m===null&&(x.g.H=x.o),x.g.O=0;var L=Ge(x.qa);Pt(L,"RID","rpc"),Pt(L,"SID",x.K),Pt(L,"AID",x.T),Pt(L,"CI",x.F?"0":"1"),!x.F&&x.ja&&Pt(L,"TO",x.ja),Pt(L,"TYPE","xmlhttp"),dT(x,L),x.m&&x.o&&te(L,x.m,x.o),x.L&&(x.g.I=x.L);var V=x.g;x=x.ia,V.L=1,V.v=Bn(Ge(L)),V.m=null,V.P=!0,sr(V,x)}e.Za=function(){this.C!=null&&(this.C=null,nN(this),X5(this),Qr(19))};function iN(x){x.C!=null&&(a.clearTimeout(x.C),x.C=null)}function Lie(x,L){var V=null;if(x.g==L){iN(x),Q5(x),x.g=null;var Q=2}else if(wd(x.h,L))V=L.D,se(x.h,L),Q=1;else return;if(x.G!=0){if(L.o)if(Q==1){V=L.m?L.m.length:0,L=Date.now()-L.F;var we=x.B;Q=fl(),Ae(Q,new fu(Q,V)),rN(x)}else $ie(x);else if(we=L.s,we==3||we==0&&0<L.X||!(Q==1&&t8e(x,L)||Q==2&&X5(x)))switch(V&&0<V.length&&(L=x.h,L.i=L.i.concat(V)),we){case 1:fv(x,5);break;case 4:fv(x,10);break;case 3:fv(x,6);break;default:fv(x,2)}}}function Fie(x,L){let V=x.Ta+Math.floor(Math.random()*x.cb);return x.isActive()||(V*=2),V*L}function fv(x,L){if(x.j.info("Error code "+L),L==2){var V=d(x.fb,x),Q=x.Xa;const we=!Q;Q=new qe(Q||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||st(Q,"https"),Bn(Q),we?JR(Q.toString(),V):vp(Q.toString(),V)}else Qr(2);x.G=0,x.l&&x.l.sa(L),jie(x),Pie(x)}e.fb=function(x){x?(this.j.info("Successfully pinged google.com"),Qr(2)):(this.j.info("Failed to ping google.com"),Qr(1))};function jie(x){if(x.G=0,x.ka=[],x.l){const L=Z(x.h);(L.length!=0||x.i.length!=0)&&(g(x.ka,L),g(x.ka,x.i),x.h.i.length=0,m(x.i),x.i.length=0),x.l.ra()}}function Bie(x,L,V){var Q=V instanceof qe?Ge(V):new qe(V);if(Q.g!="")L&&(Q.g=L+"."+Q.g),Et(Q,Q.s);else{var we=a.location;Q=we.protocol,L=L?L+"."+we.hostname:we.hostname,we=+we.port;var De=new qe(null);Q&&st(De,Q),L&&(De.g=L),we&&Et(De,we),V&&(De.l=V),Q=De}return V=x.D,L=x.ya,V&&L&&Pt(Q,V,L),Pt(Q,"VER",x.la),dT(x,Q),Q}function Uie(x,L,V){if(L&&!x.J)throw Error("Can't create secondary domain capable XhrIo object.");return L=x.Ca&&!x.pa?new ue(new av({eb:V})):new ue(x.pa),L.Ha(x.J),L}e.isActive=function(){return!!this.l&&this.l.isActive(this)};function zie(){}e=zie.prototype,e.ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){};function sN(){}sN.prototype.g=function(x,L){return new dl(x,L)};function dl(x,L){me.call(this),this.g=new __(L),this.l=x,this.h=L&&L.messageUrlParams||null,x=L&&L.messageHeaders||null,L&&L.clientProtocolHeaderRequired&&(x?x["X-Client-Protocol"]="webchannel":x={"X-Client-Protocol":"webchannel"}),this.g.o=x,x=L&&L.initMessageHeaders||null,L&&L.messageContentType&&(x?x["X-WebChannel-Content-Type"]=L.messageContentType:x={"X-WebChannel-Content-Type":L.messageContentType}),L&&L.va&&(x?x["X-WebChannel-Client-Profile"]=L.va:x={"X-WebChannel-Client-Profile":L.va}),this.g.S=x,(x=L&&L.Sb)&&!v(x)&&(this.g.m=x),this.v=L&&L.supportsCrossDomainXhr||!1,this.u=L&&L.sendRawJson||!1,(L=L&&L.httpSessionIdParam)&&!v(L)&&(this.g.D=L,x=this.h,x!==null&&L in x&&(x=this.h,L in x&&delete x[L])),this.j=new E_(this)}p(dl,me),dl.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},dl.prototype.close=function(){w_(this.g)},dl.prototype.o=function(x){var L=this.g;if(typeof x=="string"){var V={};V.__data__=x,x=V}else this.u&&(V={},V.__data__=gn(x),x=V);L.i.push(new Vo(L.Ya++,x)),L.G==3&&rN(L)},dl.prototype.N=function(){this.g.l=null,delete this.j,w_(this.g),delete this.g,dl.aa.N.call(this)};function Vie(x){Mi.call(this),x.__headers__&&(this.headers=x.__headers__,this.statusCode=x.__status__,delete x.__headers__,delete x.__status__);var L=x.__sm__;if(L){e:{for(const V in L){x=V;break e}x=void 0}(this.i=x)&&(x=this.i,L=L!==null&&x in L?L[x]:void 0),this.data=L}else this.data=x}p(Vie,Mi);function Hie(){Ar.call(this),this.status=1}p(Hie,Ar);function E_(x){this.g=x}p(E_,zie),E_.prototype.ua=function(){Ae(this.g,"a")},E_.prototype.ta=function(x){Ae(this.g,new Vie(x))},E_.prototype.sa=function(x){Ae(this.g,new Hie)},E_.prototype.ra=function(){Ae(this.g,"b")},sN.prototype.createWebChannel=sN.prototype.g,dl.prototype.send=dl.prototype.o,dl.prototype.open=dl.prototype.m,dl.prototype.close=dl.prototype.close,OPe=function(){return new sN},DPe=function(){return fl()},PPe=gs,UV={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ot.NO_ERROR=0,ot.TIMEOUT=8,ot.HTTP_ERROR=6,VD=ot,St.COMPLETE="complete",NPe=St,$i.EventType=In,In.OPEN="a",In.CLOSE="b",In.ERROR="c",In.MESSAGE="d",me.prototype.listen=me.prototype.K,U2=$i,RPe=av,ue.prototype.listenOnce=ue.prototype.L,ue.prototype.getLastError=ue.prototype.Ka,ue.prototype.getLastErrorCode=ue.prototype.Ba,ue.prototype.getStatus=ue.prototype.Z,ue.prototype.getResponseJson=ue.prototype.Oa,ue.prototype.getResponseText=ue.prototype.oa,ue.prototype.send=ue.prototype.ea,ue.prototype.setWithCredentials=ue.prototype.Ha,kPe=ue}).apply(typeof gP<"u"?gP:typeof self<"u"?self:typeof window<"u"?window:{});const khe="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wu{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}wu.UNAUTHENTICATED=new wu(null),wu.GOOGLE_CREDENTIALS=new wu("google-credentials-uid"),wu.FIRST_PARTY=new wu("first-party-uid"),wu.MOCK_USER=new wu("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let jS="10.12.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ub=new C4("@firebase/firestore");function qT(){return ub.logLevel}function It(e,...t){if(ub.logLevel<=Gn.DEBUG){const n=t.map(iZ);ub.debug(`Firestore (${jS}): ${e}`,...n)}}function Fm(e,...t){if(ub.logLevel<=Gn.ERROR){const n=t.map(iZ);ub.error(`Firestore (${jS}): ${e}`,...n)}}function _I(e,...t){if(ub.logLevel<=Gn.WARN){const n=t.map(iZ);ub.warn(`Firestore (${jS}): ${e}`,...n)}}function iZ(e){if(typeof e=="string")return e;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(e)}catch{return e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function an(e="Unexpected state"){const t=`FIRESTORE (${jS}) INTERNAL ASSERTION FAILED: `+e;throw Fm(t),new Error(t)}function ii(e,t){e||an()}function hn(e,t){return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Be={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class bt extends rp{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cm{constructor(){this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g$t{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class y$t{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable(()=>n(wu.UNAUTHENTICATED))}shutdown(){}}class v$t{constructor(t){this.t=t,this.currentUser=wu.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){let r=this.i;const i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let s=new cm;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new cm,t.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const u=s;t.enqueueRetryable(async()=>{await u.promise,await i(this.currentUser)})},a=u=>{It("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?a(u):(It("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new cm)}},0),o()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==t?(It("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ii(typeof r.accessToken=="string"),new g$t(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const t=this.auth&&this.auth.getUid();return ii(t===null||typeof t=="string"),new wu(t)}}class b$t{constructor(t,n,r){this.l=t,this.h=n,this.P=r,this.type="FirstParty",this.user=wu.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const t=this.T();return t&&this.I.set("Authorization",t),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class _$t{constructor(t,n,r){this.l=t,this.h=n,this.P=r}getToken(){return Promise.resolve(new b$t(this.l,this.h,this.P))}start(t,n){t.enqueueRetryable(()=>n(wu.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class w$t{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class E$t{constructor(t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(t,n){const r=s=>{s.error!=null&&It("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,It("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{t.enqueueRetryable(()=>r(s))};const i=s=>{It("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):It("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(n=>n?(ii(typeof n.token=="string"),this.R=n.token,new w$t(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x$t(e){const t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $Pe{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/t.length)*t.length;let r="";for(;r.length<20;){const i=x$t(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=t.charAt(i[s]%t.length))}return r}}function vr(e,t){return e<t?-1:e>t?1:0}function mx(e,t,n){return e.length===t.length&&e.every((r,i)=>n(r,t[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ls{constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new bt(Be.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new bt(Be.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new bt(Be.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new bt(Be.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return Ls.fromMillis(Date.now())}static fromDate(t){return Ls.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),r=Math.floor(1e6*(t-1e3*n));return new Ls(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?vr(this.nanoseconds,t.nanoseconds):vr(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dn{constructor(t){this.timestamp=t}static fromTimestamp(t){return new dn(t)}static min(){return new dn(new Ls(0,0))}static max(){return new dn(new Ls(253402300799,999999999))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wI{constructor(t,n,r){n===void 0?n=0:n>t.length&&an(),r===void 0?r=t.length-n:r>t.length-n&&an(),this.segments=t,this.offset=n,this.len=r}get length(){return this.len}isEqual(t){return wI.comparator(this,t)===0}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof wI?t.forEach(r=>{n.push(r)}):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,r=this.limit();n<r;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const r=Math.min(t.length,n.length);for(let i=0;i<r;i++){const s=t.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return t.length<n.length?-1:t.length>n.length?1:0}}class fi extends wI{construct(t,n,r){return new fi(t,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const n=[];for(const r of t){if(r.indexOf("//")>=0)throw new bt(Be.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new fi(n)}static emptyPath(){return new fi([])}}const S$t=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Io extends wI{construct(t,n,r){return new Io(t,n,r)}static isValidIdentifier(t){return S$t.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Io.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Io(["__name__"])}static fromServerFormat(t){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new bt(Be.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<t.length;){const a=t[i];if(a==="\\"){if(i+1===t.length)throw new bt(Be.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const u=t[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new bt(Be.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new bt(Be.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Io(n)}static emptyPath(){return new Io([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ut{constructor(t){this.path=t}static fromPath(t){return new Ut(fi.fromString(t))}static fromName(t){return new Ut(fi.fromString(t).popFirst(5))}static empty(){return new Ut(fi.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&fi.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return fi.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new Ut(new fi(t.slice()))}}function T$t(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=dn.fromTimestamp(r===1e9?new Ls(n+1,0):new Ls(n,r));return new ly(i,Ut.empty(),t)}function C$t(e){return new ly(e.readTime,e.key,-1)}class ly{constructor(t,n,r){this.readTime=t,this.documentKey=n,this.largestBatchId=r}static min(){return new ly(dn.min(),Ut.empty(),-1)}static max(){return new ly(dn.max(),Ut.empty(),-1)}}function A$t(e,t){let n=e.readTime.compareTo(t.readTime);return n!==0?n:(n=Ut.comparator(e.documentKey,t.documentKey),n!==0?n:vr(e.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I$t="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class k$t{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nR(e){if(e.code!==Be.FAILED_PRECONDITION||e.message!==I$t)throw e;It("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qe{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&an(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new Qe((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(t,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((t,n)=>{this.next(t,n)})}wrapUserFunction(t){try{const n=t();return n instanceof Qe?n:Qe.resolve(n)}catch(n){return Qe.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction(()=>t(n)):Qe.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction(()=>t(n)):Qe.reject(n)}static resolve(t){return new Qe((n,r)=>{n(t)})}static reject(t){return new Qe((n,r)=>{r(t)})}static waitFor(t){return new Qe((n,r)=>{let i=0,s=0,o=!1;t.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},u=>r(u))}),o=!0,s===i&&n()})}static or(t){let n=Qe.resolve(!1);for(const r of t)n=n.next(i=>i?Qe.resolve(i):r());return n}static forEach(t,n){const r=[];return t.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(t,n){return new Qe((r,i)=>{const s=t.length,o=new Array(s);let a=0;for(let u=0;u<s;u++){const l=u;n(t[l]).next(c=>{o[l]=c,++a,a===s&&r(o)},c=>i(c))}})}static doWhile(t,n){return new Qe((r,i)=>{const s=()=>{t()===!0?n().next(()=>{s()},i):r()};s()})}}function R$t(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function rR(e){return e.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sZ{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.se&&this.se(t),t}}sZ.oe=-1;function D4(e){return e==null}function eM(e){return e===0&&1/e==-1/0}function N$t(e){return typeof e=="number"&&Number.isInteger(e)&&!eM(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rhe(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function e_(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function MPe(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oi{constructor(t,n){this.comparator=t,this.root=n||To.EMPTY}insert(t,n){return new Oi(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,To.BLACK,null,null))}remove(t){return new Oi(this.comparator,this.root.remove(t,this.comparator).copy(null,null,To.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(t,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(t){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(t,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((n,r)=>(t(n,r),!1))}toString(){const t=[];return this.inorderTraversal((n,r)=>(t.push(`${n}:${r}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new yP(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new yP(this.root,t,this.comparator,!1)}getReverseIterator(){return new yP(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new yP(this.root,t,this.comparator,!0)}}class yP{constructor(t,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!t.isEmpty();)if(s=n?r(t.key,n):1,n&&i&&(s*=-1),s<0)t=this.isReverse?t.left:t.right;else{if(s===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class To{constructor(t,n,r,i,s){this.key=t,this.value=n,this.color=r??To.RED,this.left=i??To.EMPTY,this.right=s??To.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,r,i,s){return new To(t??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,r){let i=this;const s=r(t,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(t,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(t,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return To.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(t,i.key)===0){if(i.right.isEmpty())return To.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,To.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,To.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw an();const t=this.left.check();if(t!==this.right.check())throw an();return t+(this.isRed()?0:1)}}To.EMPTY=null,To.RED=!0,To.BLACK=!1;To.EMPTY=new class{constructor(){this.size=0}get key(){throw an()}get value(){throw an()}get color(){throw an()}get left(){throw an()}get right(){throw an()}copy(t,n,r,i,s){return this}insert(t,n,r){return new To(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oo{constructor(t){this.comparator=t,this.data=new Oi(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((n,r)=>(t(n),!1))}forEachInRange(t,n){const r=this.data.getIteratorFrom(t[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,t[1])>=0)return;n(i.key)}}forEachWhile(t,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!t(r.getNext().key))return}firstAfterOrEqual(t){const n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new Nhe(this.data.getIterator())}getIteratorFrom(t){return new Nhe(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach(r=>{n=n.add(r)}),n}isEqual(t){if(!(t instanceof Oo)||this.size!==t.size)return!1;const n=this.data.getIterator(),r=t.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(n=>{t.push(n)}),t}toString(){const t=[];return this.forEach(n=>t.push(n)),"SortedSet("+t.toString()+")"}copy(t){const n=new Oo(this.comparator);return n.data=t,n}}class Nhe{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Il{constructor(t){this.fields=t,t.sort(Io.comparator)}static empty(){return new Il([])}unionWith(t){let n=new Oo(Io.comparator);for(const r of this.fields)n=n.add(r);for(const r of t)n=n.add(r);return new Il(n.toArray())}covers(t){for(const n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return mx(this.fields,t.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LPe extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ea{constructor(t){this.binaryString=t}static fromBase64String(t){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new LPe("Invalid base64 string: "+s):s}}(t);return new Ea(n)}static fromUint8Array(t){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(t);return new Ea(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return vr(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Ea.EMPTY_BYTE_STRING=new Ea("");const P$t=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function cy(e){if(ii(!!e),typeof e=="string"){let t=0;const n=P$t.exec(e);if(ii(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),t=Number(i)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:_s(e.seconds),nanos:_s(e.nanos)}}function _s(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function lb(e){return typeof e=="string"?Ea.fromBase64String(e):Ea.fromUint8Array(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oZ(e){var t,n;return((n=(((t=e==null?void 0:e.mapValue)===null||t===void 0?void 0:t.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function aZ(e){const t=e.mapValue.fields.__previous_value__;return oZ(t)?aZ(t):t}function EI(e){const t=cy(e.mapValue.fields.__local_write_time__.timestampValue);return new Ls(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D$t{constructor(t,n,r,i,s,o,a,u,l){this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=l}}class xI{constructor(t,n){this.projectId=t,this.database=n||"(default)"}static empty(){return new xI("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(t){return t instanceof xI&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vP={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function cb(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?oZ(e)?4:O$t(e)?9007199254740991:10:an()}function Lh(e,t){if(e===t)return!0;const n=cb(e);if(n!==cb(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return EI(e).isEqual(EI(t));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=cy(i.timestampValue),a=cy(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(i,s){return lb(i.bytesValue).isEqual(lb(s.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(i,s){return _s(i.geoPointValue.latitude)===_s(s.geoPointValue.latitude)&&_s(i.geoPointValue.longitude)===_s(s.geoPointValue.longitude)}(e,t);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return _s(i.integerValue)===_s(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=_s(i.doubleValue),a=_s(s.doubleValue);return o===a?eM(o)===eM(a):isNaN(o)&&isNaN(a)}return!1}(e,t);case 9:return mx(e.arrayValue.values||[],t.arrayValue.values||[],Lh);case 10:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(Rhe(o)!==Rhe(a))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(a[u]===void 0||!Lh(o[u],a[u])))return!1;return!0}(e,t);default:return an()}}function SI(e,t){return(e.values||[]).find(n=>Lh(n,t))!==void 0}function gx(e,t){if(e===t)return 0;const n=cb(e),r=cb(t);if(n!==r)return vr(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return vr(e.booleanValue,t.booleanValue);case 2:return function(s,o){const a=_s(s.integerValue||s.doubleValue),u=_s(o.integerValue||o.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(e,t);case 3:return Phe(e.timestampValue,t.timestampValue);case 4:return Phe(EI(e),EI(t));case 5:return vr(e.stringValue,t.stringValue);case 6:return function(s,o){const a=lb(s),u=lb(o);return a.compareTo(u)}(e.bytesValue,t.bytesValue);case 7:return function(s,o){const a=s.split("/"),u=o.split("/");for(let l=0;l<a.length&&l<u.length;l++){const c=vr(a[l],u[l]);if(c!==0)return c}return vr(a.length,u.length)}(e.referenceValue,t.referenceValue);case 8:return function(s,o){const a=vr(_s(s.latitude),_s(o.latitude));return a!==0?a:vr(_s(s.longitude),_s(o.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(s,o){const a=s.values||[],u=o.values||[];for(let l=0;l<a.length&&l<u.length;++l){const c=gx(a[l],u[l]);if(c)return c}return vr(a.length,u.length)}(e.arrayValue,t.arrayValue);case 10:return function(s,o){if(s===vP.mapValue&&o===vP.mapValue)return 0;if(s===vP.mapValue)return 1;if(o===vP.mapValue)return-1;const a=s.fields||{},u=Object.keys(a),l=o.fields||{},c=Object.keys(l);u.sort(),c.sort();for(let f=0;f<u.length&&f<c.length;++f){const d=vr(u[f],c[f]);if(d!==0)return d;const h=gx(a[u[f]],l[c[f]]);if(h!==0)return h}return vr(u.length,c.length)}(e.mapValue,t.mapValue);default:throw an()}}function Phe(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return vr(e,t);const n=cy(e),r=cy(t),i=vr(n.seconds,r.seconds);return i!==0?i:vr(n.nanos,r.nanos)}function yx(e){return zV(e)}function zV(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(n){const r=cy(n);return`time(${r.seconds},${r.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(n){return lb(n).toBase64()}(e.bytesValue):"referenceValue"in e?function(n){return Ut.fromName(n).toString()}(e.referenceValue):"geoPointValue"in e?function(n){return`geo(${n.latitude},${n.longitude})`}(e.geoPointValue):"arrayValue"in e?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=zV(s);return r+"]"}(e.arrayValue):"mapValue"in e?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${zV(n.fields[o])}`;return i+"}"}(e.mapValue):an()}function Dhe(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function VV(e){return!!e&&"integerValue"in e}function uZ(e){return!!e&&"arrayValue"in e}function Ohe(e){return!!e&&"nullValue"in e}function $he(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function HD(e){return!!e&&"mapValue"in e}function WC(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return e_(e.mapValue.fields,(n,r)=>t.mapValue.fields[n]=WC(r)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=WC(e.arrayValue.values[n]);return t}return Object.assign({},e)}function O$t(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pu{constructor(t){this.value=t}static empty(){return new Pu({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let r=0;r<t.length-1;++r)if(n=(n.mapValue.fields||{})[t.get(r)],!HD(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=WC(n)}setAll(t){let n=Io.emptyPath(),r={},i=[];t.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=WC(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(t){const n=this.field(t.popLast());HD(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return Lh(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<t.length;++r){let i=n.mapValue.fields[t.get(r)];HD(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[t.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(t,n,r){e_(n,(i,s)=>t[i]=s);for(const i of r)delete t[i]}clone(){return new Pu(WC(this.value))}}function FPe(e){const t=[];return e_(e.fields,(n,r)=>{const i=new Io([n]);if(HD(r)){const s=FPe(r.mapValue).fields;if(s.length===0)t.push(i);else for(const o of s)t.push(i.child(o))}else t.push(i)}),new Il(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ca{constructor(t,n,r,i,s,o,a){this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(t){return new ca(t,0,dn.min(),dn.min(),dn.min(),Pu.empty(),0)}static newFoundDocument(t,n,r,i){return new ca(t,1,n,dn.min(),r,i,0)}static newNoDocument(t,n){return new ca(t,2,n,dn.min(),dn.min(),Pu.empty(),0)}static newUnknownDocument(t,n){return new ca(t,3,n,dn.min(),dn.min(),Pu.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual(dn.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Pu.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Pu.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=dn.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof ca&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new ca(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let tM=class{constructor(t,n){this.position=t,this.inclusive=n}};function Mhe(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const s=t[i],o=e.position[i];if(s.field.isKeyField()?r=Ut.comparator(Ut.fromName(o.referenceValue),n.key):r=gx(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function Lhe(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Lh(e.position[n],t.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TI{constructor(t,n="asc"){this.field=t,this.dir=n}}function $$t(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let jPe=class{};class Es extends jPe{constructor(t,n,r){super(),this.field=t,this.op=n,this.value=r}static create(t,n,r){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,r):new L$t(t,n,r):n==="array-contains"?new B$t(t,r):n==="in"?new U$t(t,r):n==="not-in"?new z$t(t,r):n==="array-contains-any"?new V$t(t,r):new Es(t,n,r)}static createKeyFieldInFilter(t,n,r){return n==="in"?new F$t(t,r):new j$t(t,r)}matches(t){const n=t.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(gx(n,this.value)):n!==null&&cb(this.value)===cb(n)&&this.matchesComparison(gx(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return an()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Zf extends jPe{constructor(t,n){super(),this.filters=t,this.op=n,this.ae=null}static create(t,n){return new Zf(t,n)}matches(t){return BPe(this)?this.filters.find(n=>!n.matches(t))===void 0:this.filters.find(n=>n.matches(t))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((t,n)=>t.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function BPe(e){return e.op==="and"}function UPe(e){return M$t(e)&&BPe(e)}function M$t(e){for(const t of e.filters)if(t instanceof Zf)return!1;return!0}function HV(e){if(e instanceof Es)return e.field.canonicalString()+e.op.toString()+yx(e.value);if(UPe(e))return e.filters.map(t=>HV(t)).join(",");{const t=e.filters.map(n=>HV(n)).join(",");return`${e.op}(${t})`}}function zPe(e,t){return e instanceof Es?function(r,i){return i instanceof Es&&r.op===i.op&&r.field.isEqual(i.field)&&Lh(r.value,i.value)}(e,t):e instanceof Zf?function(r,i){return i instanceof Zf&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&zPe(o,i.filters[a]),!0):!1}(e,t):void an()}function VPe(e){return e instanceof Es?function(n){return`${n.field.canonicalString()} ${n.op} ${yx(n.value)}`}(e):e instanceof Zf?function(n){return n.op.toString()+" {"+n.getFilters().map(VPe).join(" ,")+"}"}(e):"Filter"}class L$t extends Es{constructor(t,n,r){super(t,n,r),this.key=Ut.fromName(r.referenceValue)}matches(t){const n=Ut.comparator(t.key,this.key);return this.matchesComparison(n)}}class F$t extends Es{constructor(t,n){super(t,"in",n),this.keys=HPe("in",n)}matches(t){return this.keys.some(n=>n.isEqual(t.key))}}class j$t extends Es{constructor(t,n){super(t,"not-in",n),this.keys=HPe("not-in",n)}matches(t){return!this.keys.some(n=>n.isEqual(t.key))}}function HPe(e,t){var n;return(((n=t.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>Ut.fromName(r.referenceValue))}class B$t extends Es{constructor(t,n){super(t,"array-contains",n)}matches(t){const n=t.data.field(this.field);return uZ(n)&&SI(n.arrayValue,this.value)}}class U$t extends Es{constructor(t,n){super(t,"in",n)}matches(t){const n=t.data.field(this.field);return n!==null&&SI(this.value.arrayValue,n)}}class z$t extends Es{constructor(t,n){super(t,"not-in",n)}matches(t){if(SI(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=t.data.field(this.field);return n!==null&&!SI(this.value.arrayValue,n)}}class V$t extends Es{constructor(t,n){super(t,"array-contains-any",n)}matches(t){const n=t.data.field(this.field);return!(!uZ(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>SI(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H$t{constructor(t,n=null,r=[],i=[],s=null,o=null,a=null){this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function Fhe(e,t=null,n=[],r=[],i=null,s=null,o=null){return new H$t(e,t,n,r,i,s,o)}function lZ(e){const t=hn(e);if(t.ue===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map(r=>HV(r)).join(","),n+="|ob:",n+=t.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),D4(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map(r=>yx(r)).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map(r=>yx(r)).join(",")),t.ue=n}return t.ue}function cZ(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!$$t(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!zPe(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Lhe(e.startAt,t.startAt)&&Lhe(e.endAt,t.endAt)}function qV(e){return Ut.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BS{constructor(t,n=null,r=[],i=[],s=null,o="F",a=null,u=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function q$t(e,t,n,r,i,s,o,a){return new BS(e,t,n,r,i,s,o,a)}function fZ(e){return new BS(e)}function jhe(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function qPe(e){return e.collectionGroup!==null}function GC(e){const t=hn(e);if(t.ce===null){t.ce=[];const n=new Set;for(const s of t.explicitOrderBy)t.ce.push(s),n.add(s.field.canonicalString());const r=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Oo(Io.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(t).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||t.ce.push(new TI(s,r))}),n.has(Io.keyField().canonicalString())||t.ce.push(new TI(Io.keyField(),r))}return t.ce}function bh(e){const t=hn(e);return t.le||(t.le=W$t(t,GC(e))),t.le}function W$t(e,t){if(e.limitType==="F")return Fhe(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new TI(i.field,s)});const n=e.endAt?new tM(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new tM(e.startAt.position,e.startAt.inclusive):null;return Fhe(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function WV(e,t){const n=e.filters.concat([t]);return new BS(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function GV(e,t,n){return new BS(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function O4(e,t){return cZ(bh(e),bh(t))&&e.limitType===t.limitType}function WPe(e){return`${lZ(bh(e))}|lt:${e.limitType}`}function lw(e){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>VPe(i)).join(", ")}]`),D4(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>yx(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>yx(i)).join(",")),`Target(${r})`}(bh(e))}; limitType=${e.limitType})`}function $4(e,t){return t.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):Ut.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(e,t)&&function(r,i){for(const s of GC(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(e,t)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(e,t)&&function(r,i){return!(r.startAt&&!function(o,a,u){const l=Mhe(o,a,u);return o.inclusive?l<=0:l<0}(r.startAt,GC(r),i)||r.endAt&&!function(o,a,u){const l=Mhe(o,a,u);return o.inclusive?l>=0:l>0}(r.endAt,GC(r),i))}(e,t)}function G$t(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function GPe(e){return(t,n)=>{let r=!1;for(const i of GC(e)){const s=Y$t(i,t,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function Y$t(e,t,n){const r=e.field.isKeyField()?Ut.comparator(t.key,n.key):function(s,o,a){const u=o.data.field(s),l=a.data.field(s);return u!==null&&l!==null?gx(u,l):an()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return an()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class US{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,t))return s}}has(t){return this.get(t)!==void 0}set(t,n){const r=this.mapKeyFn(t),i=this.inner[r];if(i===void 0)return this.inner[r]=[[t,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],t))return void(i[s]=[t,n]);i.push([t,n]),this.innerSize++}delete(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(t){e_(this.inner,(n,r)=>{for(const[i,s]of r)t(i,s)})}isEmpty(){return MPe(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K$t=new Oi(Ut.comparator);function jm(){return K$t}const YPe=new Oi(Ut.comparator);function z2(...e){let t=YPe;for(const n of e)t=t.insert(n.key,n);return t}function KPe(e){let t=YPe;return e.forEach((n,r)=>t=t.insert(n,r.overlayedDocument)),t}function v1(){return YC()}function XPe(){return YC()}function YC(){return new US(e=>e.toString(),(e,t)=>e.isEqual(t))}const X$t=new Oi(Ut.comparator),Q$t=new Oo(Ut.comparator);function zn(...e){let t=Q$t;for(const n of e)t=t.add(n);return t}const J$t=new Oo(vr);function Z$t(){return J$t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QPe(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:eM(t)?"-0":t}}function JPe(e){return{integerValue:""+e}}function eMt(e,t){return N$t(t)?JPe(t):QPe(e,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M4{constructor(){this._=void 0}}function tMt(e,t,n){return e instanceof CI?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&oZ(s)&&(s=aZ(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,t):e instanceof AI?eDe(e,t):e instanceof II?tDe(e,t):function(i,s){const o=ZPe(i,s),a=Bhe(o)+Bhe(i.Pe);return VV(o)&&VV(i.Pe)?JPe(a):QPe(i.serializer,a)}(e,t)}function nMt(e,t,n){return e instanceof AI?eDe(e,t):e instanceof II?tDe(e,t):n}function ZPe(e,t){return e instanceof nM?function(r){return VV(r)||function(s){return!!s&&"doubleValue"in s}(r)}(t)?t:{integerValue:0}:null}class CI extends M4{}class AI extends M4{constructor(t){super(),this.elements=t}}function eDe(e,t){const n=nDe(t);for(const r of e.elements)n.some(i=>Lh(i,r))||n.push(r);return{arrayValue:{values:n}}}class II extends M4{constructor(t){super(),this.elements=t}}function tDe(e,t){let n=nDe(t);for(const r of e.elements)n=n.filter(i=>!Lh(i,r));return{arrayValue:{values:n}}}class nM extends M4{constructor(t,n){super(),this.serializer=t,this.Pe=n}}function Bhe(e){return _s(e.integerValue||e.doubleValue)}function nDe(e){return uZ(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rMt{constructor(t,n){this.field=t,this.transform=n}}function iMt(e,t){return e.field.isEqual(t.field)&&function(r,i){return r instanceof AI&&i instanceof AI||r instanceof II&&i instanceof II?mx(r.elements,i.elements,Lh):r instanceof nM&&i instanceof nM?Lh(r.Pe,i.Pe):r instanceof CI&&i instanceof CI}(e.transform,t.transform)}class sMt{constructor(t,n){this.version=t,this.transformResults=n}}class Gu{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new Gu}static exists(t){return new Gu(void 0,t)}static updateTime(t){return new Gu(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function qD(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}class L4{}function rDe(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new F4(e.key,Gu.none()):new iR(e.key,e.data,Gu.none());{const n=e.data,r=Pu.empty();let i=new Oo(Io.comparator);for(let s of t.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Wy(e.key,r,new Il(i.toArray()),Gu.none())}}function oMt(e,t,n){e instanceof iR?function(i,s,o){const a=i.value.clone(),u=zhe(i.fieldTransforms,s,o.transformResults);a.setAll(u),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(e,t,n):e instanceof Wy?function(i,s,o){if(!qD(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=zhe(i.fieldTransforms,s,o.transformResults),u=s.data;u.setAll(iDe(i)),u.setAll(a),s.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(e,t,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,t,n)}function KC(e,t,n,r){return e instanceof iR?function(s,o,a,u){if(!qD(s.precondition,o))return a;const l=s.value.clone(),c=Vhe(s.fieldTransforms,u,o);return l.setAll(c),o.convertToFoundDocument(o.version,l).setHasLocalMutations(),null}(e,t,n,r):e instanceof Wy?function(s,o,a,u){if(!qD(s.precondition,o))return a;const l=Vhe(s.fieldTransforms,u,o),c=o.data;return c.setAll(iDe(s)),c.setAll(l),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(f=>f.field))}(e,t,n,r):function(s,o,a){return qD(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(e,t,n)}function aMt(e,t){let n=null;for(const r of e.fieldTransforms){const i=t.data.field(r.field),s=ZPe(r.transform,i||null);s!=null&&(n===null&&(n=Pu.empty()),n.set(r.field,s))}return n||null}function Uhe(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&mx(r,i,(s,o)=>iMt(s,o))}(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class iR extends L4{constructor(t,n,r,i=[]){super(),this.key=t,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Wy extends L4{constructor(t,n,r,i,s=[]){super(),this.key=t,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function iDe(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function zhe(e,t,n){const r=new Map;ii(e.length===n.length);for(let i=0;i<n.length;i++){const s=e[i],o=s.transform,a=t.data.field(s.field);r.set(s.field,nMt(o,a,n[i]))}return r}function Vhe(e,t,n){const r=new Map;for(const i of e){const s=i.transform,o=n.data.field(i.field);r.set(i.field,tMt(s,o,t))}return r}class F4 extends L4{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class uMt extends L4{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lMt{constructor(t,n,r,i){this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(t,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(t.key)&&oMt(s,t,r[i])}}applyToLocalView(t,n){for(const r of this.baseMutations)r.key.isEqual(t.key)&&(n=KC(r,t,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(t.key)&&(n=KC(r,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){const r=XPe();return this.mutations.forEach(i=>{const s=t.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const u=rDe(o,a);u!==null&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(dn.min())}),r}keys(){return this.mutations.reduce((t,n)=>t.add(n.key),zn())}isEqual(t){return this.batchId===t.batchId&&mx(this.mutations,t.mutations,(n,r)=>Uhe(n,r))&&mx(this.baseMutations,t.baseMutations,(n,r)=>Uhe(n,r))}}class dZ{constructor(t,n,r,i){this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(t,n,r){ii(t.mutations.length===r.length);let i=function(){return X$t}();const s=t.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new dZ(t,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cMt{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fMt{constructor(t,n){this.count=t,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var vs,Zn;function dMt(e){switch(e){default:return an();case Be.CANCELLED:case Be.UNKNOWN:case Be.DEADLINE_EXCEEDED:case Be.RESOURCE_EXHAUSTED:case Be.INTERNAL:case Be.UNAVAILABLE:case Be.UNAUTHENTICATED:return!1;case Be.INVALID_ARGUMENT:case Be.NOT_FOUND:case Be.ALREADY_EXISTS:case Be.PERMISSION_DENIED:case Be.FAILED_PRECONDITION:case Be.ABORTED:case Be.OUT_OF_RANGE:case Be.UNIMPLEMENTED:case Be.DATA_LOSS:return!0}}function sDe(e){if(e===void 0)return Fm("GRPC error has no .code"),Be.UNKNOWN;switch(e){case vs.OK:return Be.OK;case vs.CANCELLED:return Be.CANCELLED;case vs.UNKNOWN:return Be.UNKNOWN;case vs.DEADLINE_EXCEEDED:return Be.DEADLINE_EXCEEDED;case vs.RESOURCE_EXHAUSTED:return Be.RESOURCE_EXHAUSTED;case vs.INTERNAL:return Be.INTERNAL;case vs.UNAVAILABLE:return Be.UNAVAILABLE;case vs.UNAUTHENTICATED:return Be.UNAUTHENTICATED;case vs.INVALID_ARGUMENT:return Be.INVALID_ARGUMENT;case vs.NOT_FOUND:return Be.NOT_FOUND;case vs.ALREADY_EXISTS:return Be.ALREADY_EXISTS;case vs.PERMISSION_DENIED:return Be.PERMISSION_DENIED;case vs.FAILED_PRECONDITION:return Be.FAILED_PRECONDITION;case vs.ABORTED:return Be.ABORTED;case vs.OUT_OF_RANGE:return Be.OUT_OF_RANGE;case vs.UNIMPLEMENTED:return Be.UNIMPLEMENTED;case vs.DATA_LOSS:return Be.DATA_LOSS;default:return an()}}(Zn=vs||(vs={}))[Zn.OK=0]="OK",Zn[Zn.CANCELLED=1]="CANCELLED",Zn[Zn.UNKNOWN=2]="UNKNOWN",Zn[Zn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Zn[Zn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Zn[Zn.NOT_FOUND=5]="NOT_FOUND",Zn[Zn.ALREADY_EXISTS=6]="ALREADY_EXISTS",Zn[Zn.PERMISSION_DENIED=7]="PERMISSION_DENIED",Zn[Zn.UNAUTHENTICATED=16]="UNAUTHENTICATED",Zn[Zn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Zn[Zn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Zn[Zn.ABORTED=10]="ABORTED",Zn[Zn.OUT_OF_RANGE=11]="OUT_OF_RANGE",Zn[Zn.UNIMPLEMENTED=12]="UNIMPLEMENTED",Zn[Zn.INTERNAL=13]="INTERNAL",Zn[Zn.UNAVAILABLE=14]="UNAVAILABLE",Zn[Zn.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hMt(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pMt=new k1([4294967295,4294967295],0);function Hhe(e){const t=hMt().encode(e),n=new IPe;return n.update(t),new Uint8Array(n.digest())}function qhe(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new k1([n,r],0),new k1([i,s],0)]}class hZ{constructor(t,n,r){if(this.bitmap=t,this.padding=n,this.hashCount=r,n<0||n>=8)throw new V2(`Invalid padding: ${n}`);if(r<0)throw new V2(`Invalid hash count: ${r}`);if(t.length>0&&this.hashCount===0)throw new V2(`Invalid hash count: ${r}`);if(t.length===0&&n!==0)throw new V2(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*t.length-n,this.Te=k1.fromNumber(this.Ie)}Ee(t,n,r){let i=t.add(n.multiply(k1.fromNumber(r)));return i.compare(pMt)===1&&(i=new k1([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(t){return(this.bitmap[Math.floor(t/8)]&1<<t%8)!=0}mightContain(t){if(this.Ie===0)return!1;const n=Hhe(t),[r,i]=qhe(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(t,n,r){const i=t%8==0?0:8-t%8,s=new Uint8Array(Math.ceil(t/8)),o=new hZ(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(t){if(this.Ie===0)return;const n=Hhe(t),[r,i]=qhe(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);this.Ae(o)}}Ae(t){const n=Math.floor(t/8),r=t%8;this.bitmap[n]|=1<<r}}class V2 extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j4{constructor(t,n,r,i,s){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(t,n,r){const i=new Map;return i.set(t,sR.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new j4(dn.min(),i,new Oi(vr),jm(),zn())}}class sR{constructor(t,n,r,i,s){this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(t,n,r){return new sR(r,n,zn(),zn(),zn())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WD{constructor(t,n,r,i){this.Re=t,this.removedTargetIds=n,this.key=r,this.Ve=i}}class oDe{constructor(t,n){this.targetId=t,this.me=n}}class aDe{constructor(t,n,r=Ea.EMPTY_BYTE_STRING,i=null){this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i}}class Whe{constructor(){this.fe=0,this.ge=Yhe(),this.pe=Ea.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(t){t.approximateByteSize()>0&&(this.we=!0,this.pe=t)}Ce(){let t=zn(),n=zn(),r=zn();return this.ge.forEach((i,s)=>{switch(s){case 0:t=t.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:an()}}),new sR(this.pe,this.ye,t,n,r)}ve(){this.we=!1,this.ge=Yhe()}Fe(t,n){this.we=!0,this.ge=this.ge.insert(t,n)}Me(t){this.we=!0,this.ge=this.ge.remove(t)}xe(){this.fe+=1}Oe(){this.fe-=1,ii(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class mMt{constructor(t){this.Le=t,this.Be=new Map,this.ke=jm(),this.qe=Ghe(),this.Qe=new Oi(vr)}Ke(t){for(const n of t.Re)t.Ve&&t.Ve.isFoundDocument()?this.$e(n,t.Ve):this.Ue(n,t.key,t.Ve);for(const n of t.removedTargetIds)this.Ue(n,t.key,t.Ve)}We(t){this.forEachTarget(t,n=>{const r=this.Ge(n);switch(t.state){case 0:this.ze(n)&&r.De(t.resumeToken);break;case 1:r.Oe(),r.Se||r.ve(),r.De(t.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(t.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(t.resumeToken));break;default:an()}})}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(t){const n=t.targetId,r=t.me.count,i=this.Je(n);if(i){const s=i.target;if(qV(s))if(r===0){const o=new Ut(s.path);this.Ue(n,o,ca.newNoDocument(o,dn.min()))}else ii(r===1);else{const o=this.Ye(n);if(o!==r){const a=this.Ze(t),u=a?this.Xe(a,t,o):1;if(u!==0){this.je(n);const l=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,l)}}}}}Ze(t){const n=t.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=lb(r).toUint8Array()}catch(u){if(u instanceof LPe)return _I("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new hZ(o,i,s)}catch(u){return _I(u instanceof V2?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.Ie===0?null:a}Xe(t,n,r){return n.me.count===r-this.nt(t,n.targetId)?0:2}nt(t,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;t.mightContain(a)||(this.Ue(n,s,null),i++)}),i}rt(t){const n=new Map;this.Be.forEach((s,o)=>{const a=this.Je(o);if(a){if(s.current&&qV(a.target)){const u=new Ut(a.target.path);this.ke.get(u)!==null||this.it(o,u)||this.Ue(o,u,ca.newNoDocument(u,t))}s.be&&(n.set(o,s.Ce()),s.ve())}});let r=zn();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(u=>{const l=this.Je(u);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(t));const i=new j4(t,n,this.Qe,this.ke,r);return this.ke=jm(),this.qe=Ghe(),this.Qe=new Oi(vr),i}$e(t,n){if(!this.ze(t))return;const r=this.it(t,n.key)?2:0;this.Ge(t).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(t))}Ue(t,n,r){if(!this.ze(t))return;const i=this.Ge(t);this.it(t,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(t)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(t){this.Be.delete(t)}Ye(t){const n=this.Ge(t).Ce();return this.Le.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}xe(t){this.Ge(t).xe()}Ge(t){let n=this.Be.get(t);return n||(n=new Whe,this.Be.set(t,n)),n}st(t){let n=this.qe.get(t);return n||(n=new Oo(vr),this.qe=this.qe.insert(t,n)),n}ze(t){const n=this.Je(t)!==null;return n||It("WatchChangeAggregator","Detected inactive target",t),n}Je(t){const n=this.Be.get(t);return n&&n.Se?null:this.Le.ot(t)}je(t){this.Be.set(t,new Whe),this.Le.getRemoteKeysForTarget(t).forEach(n=>{this.Ue(t,n,null)})}it(t,n){return this.Le.getRemoteKeysForTarget(t).has(n)}}function Ghe(){return new Oi(Ut.comparator)}function Yhe(){return new Oi(Ut.comparator)}const gMt={asc:"ASCENDING",desc:"DESCENDING"},yMt={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},vMt={and:"AND",or:"OR"};class bMt{constructor(t,n){this.databaseId=t,this.useProto3Json=n}}function YV(e,t){return e.useProto3Json||D4(t)?t:{value:t}}function rM(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function uDe(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function _Mt(e,t){return rM(e,t.toTimestamp())}function _h(e){return ii(!!e),dn.fromTimestamp(function(n){const r=cy(n);return new Ls(r.seconds,r.nanos)}(e))}function pZ(e,t){return KV(e,t).canonicalString()}function KV(e,t){const n=function(i){return new fi(["projects",i.projectId,"databases",i.database])}(e).child("documents");return t===void 0?n:n.child(t)}function lDe(e){const t=fi.fromString(e);return ii(pDe(t)),t}function XV(e,t){return pZ(e.databaseId,t.path)}function j9(e,t){const n=lDe(t);if(n.get(1)!==e.databaseId.projectId)throw new bt(Be.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new bt(Be.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Ut(fDe(n))}function cDe(e,t){return pZ(e.databaseId,t)}function wMt(e){const t=lDe(e);return t.length===4?fi.emptyPath():fDe(t)}function QV(e){return new fi(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function fDe(e){return ii(e.length>4&&e.get(4)==="documents"),e.popFirst(5)}function Khe(e,t,n){return{name:XV(e,t),fields:n.value.mapValue.fields}}function EMt(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:an()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],s=function(l,c){return l.useProto3Json?(ii(c===void 0||typeof c=="string"),Ea.fromBase64String(c||"")):(ii(c===void 0||c instanceof Buffer||c instanceof Uint8Array),Ea.fromUint8Array(c||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(l){const c=l.code===void 0?Be.UNKNOWN:sDe(l.code);return new bt(c,l.message||"")}(o);n=new aDe(r,i,s,a||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=j9(e,r.document.name),s=_h(r.document.updateTime),o=r.document.createTime?_h(r.document.createTime):dn.min(),a=new Pu({mapValue:{fields:r.document.fields}}),u=ca.newFoundDocument(i,s,o,a),l=r.targetIds||[],c=r.removedTargetIds||[];n=new WD(l,c,u.key,u)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=j9(e,r.document),s=r.readTime?_h(r.readTime):dn.min(),o=ca.newNoDocument(i,s),a=r.removedTargetIds||[];n=new WD([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=j9(e,r.document),s=r.removedTargetIds||[];n=new WD([],s,i,null)}else{if(!("filter"in t))return an();{t.filter;const r=t.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new fMt(i,s),a=r.targetId;n=new oDe(a,o)}}return n}function xMt(e,t){let n;if(t instanceof iR)n={update:Khe(e,t.key,t.value)};else if(t instanceof F4)n={delete:XV(e,t.key)};else if(t instanceof Wy)n={update:Khe(e,t.key,t.data),updateMask:PMt(t.fieldMask)};else{if(!(t instanceof uMt))return an();n={verify:XV(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof CI)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof AI)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof II)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof nM)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw an()}(0,r))),t.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:_Mt(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:an()}(e,t.precondition)),n}function SMt(e,t){return e&&e.length>0?(ii(t!==void 0),e.map(n=>function(i,s){let o=i.updateTime?_h(i.updateTime):_h(s);return o.isEqual(dn.min())&&(o=_h(s)),new sMt(o,i.transformResults||[])}(n,t))):[]}function TMt(e,t){return{documents:[cDe(e,t.path)]}}function CMt(e,t){const n={structuredQuery:{}},r=t.path;let i;t.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=cDe(e,i);const s=function(l){if(l.length!==0)return hDe(Zf.create(l,"and"))}(t.filters);s&&(n.structuredQuery.where=s);const o=function(l){if(l.length!==0)return l.map(c=>function(d){return{field:cw(d.field),direction:kMt(d.dir)}}(c))}(t.orderBy);o&&(n.structuredQuery.orderBy=o);const a=YV(e,t.limit);return a!==null&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(t.endAt)),{_t:n,parent:i}}function AMt(e){let t=wMt(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){ii(r===1);const c=n.from[0];c.allDescendants?i=c.collectionId:t=t.child(c.collectionId)}let s=[];n.where&&(s=function(f){const d=dDe(f);return d instanceof Zf&&UPe(d)?d.getFilters():[d]}(n.where));let o=[];n.orderBy&&(o=function(f){return f.map(d=>function(p){return new TI(fw(p.field),function(g){switch(g){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(p.direction))}(d))}(n.orderBy));let a=null;n.limit&&(a=function(f){let d;return d=typeof f=="object"?f.value:f,D4(d)?null:d}(n.limit));let u=null;n.startAt&&(u=function(f){const d=!!f.before,h=f.values||[];return new tM(h,d)}(n.startAt));let l=null;return n.endAt&&(l=function(f){const d=!f.before,h=f.values||[];return new tM(h,d)}(n.endAt)),q$t(t,i,o,s,a,"F",u,l)}function IMt(e,t){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return an()}}(t.purpose);return n==null?null:{"goog-listen-tags":n}}function dDe(e){return e.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=fw(n.unaryFilter.field);return Es.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=fw(n.unaryFilter.field);return Es.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=fw(n.unaryFilter.field);return Es.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=fw(n.unaryFilter.field);return Es.create(o,"!=",{nullValue:"NULL_VALUE"});default:return an()}}(e):e.fieldFilter!==void 0?function(n){return Es.create(fw(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return an()}}(n.fieldFilter.op),n.fieldFilter.value)}(e):e.compositeFilter!==void 0?function(n){return Zf.create(n.compositeFilter.filters.map(r=>dDe(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return an()}}(n.compositeFilter.op))}(e):an()}function kMt(e){return gMt[e]}function RMt(e){return yMt[e]}function NMt(e){return vMt[e]}function cw(e){return{fieldPath:e.canonicalString()}}function fw(e){return Io.fromServerFormat(e.fieldPath)}function hDe(e){return e instanceof Es?function(n){if(n.op==="=="){if($he(n.value))return{unaryFilter:{field:cw(n.field),op:"IS_NAN"}};if(Ohe(n.value))return{unaryFilter:{field:cw(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if($he(n.value))return{unaryFilter:{field:cw(n.field),op:"IS_NOT_NAN"}};if(Ohe(n.value))return{unaryFilter:{field:cw(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:cw(n.field),op:RMt(n.op),value:n.value}}}(e):e instanceof Zf?function(n){const r=n.getFilters().map(i=>hDe(i));return r.length===1?r[0]:{compositeFilter:{op:NMt(n.op),filters:r}}}(e):an()}function PMt(e){const t=[];return e.fields.forEach(n=>t.push(n.canonicalString())),{fieldPaths:t}}function pDe(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r0{constructor(t,n,r,i,s=dn.min(),o=dn.min(),a=Ea.EMPTY_BYTE_STRING,u=null){this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(t){return new r0(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new r0(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new r0(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new r0(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DMt{constructor(t){this.ct=t}}function OMt(e){const t=AMt({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?GV(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $Mt{constructor(){this._n=new MMt}addToCollectionParentIndex(t,n){return this._n.add(n),Qe.resolve()}getCollectionParents(t,n){return Qe.resolve(this._n.getEntries(n))}addFieldIndex(t,n){return Qe.resolve()}deleteFieldIndex(t,n){return Qe.resolve()}deleteAllFieldIndexes(t){return Qe.resolve()}createTargetIndexes(t,n){return Qe.resolve()}getDocumentsMatchingTarget(t,n){return Qe.resolve(null)}getIndexType(t,n){return Qe.resolve(0)}getFieldIndexes(t,n){return Qe.resolve([])}getNextCollectionGroupToUpdate(t){return Qe.resolve(null)}getMinOffset(t,n){return Qe.resolve(ly.min())}getMinOffsetFromCollectionGroup(t,n){return Qe.resolve(ly.min())}updateCollectionGroup(t,n,r){return Qe.resolve()}updateIndexEntries(t,n){return Qe.resolve()}}class MMt{constructor(){this.index={}}add(t){const n=t.lastSegment(),r=t.popLast(),i=this.index[n]||new Oo(fi.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(t){const n=t.lastSegment(),r=t.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(t){return(this.index[t]||new Oo(fi.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vx{constructor(t){this.On=t}next(){return this.On+=2,this.On}static Nn(){return new vx(0)}static Ln(){return new vx(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LMt{constructor(){this.changes=new US(t=>t.toString(),(t,n)=>t.isEqual(n)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,ca.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?Qe.resolve(r):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FMt{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jMt{constructor(t,n,r,i){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(t,n){let r=null;return this.documentOverlayCache.getOverlay(t,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(t,n))).next(i=>(r!==null&&KC(r.mutation,i,Il.empty(),Ls.now()),i))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next(r=>this.getLocalViewOfDocuments(t,r,zn()).next(()=>r))}getLocalViewOfDocuments(t,n,r=zn()){const i=v1();return this.populateOverlays(t,i,n).next(()=>this.computeViews(t,n,i,r).next(s=>{let o=z2();return s.forEach((a,u)=>{o=o.insert(a,u.overlayedDocument)}),o}))}getOverlayedDocuments(t,n){const r=v1();return this.populateOverlays(t,r,n).next(()=>this.computeViews(t,n,r,zn()))}populateOverlays(t,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(t,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(t,n,r,i){let s=jm();const o=YC(),a=function(){return YC()}();return n.forEach((u,l)=>{const c=r.get(l.key);i.has(l.key)&&(c===void 0||c.mutation instanceof Wy)?s=s.insert(l.key,l):c!==void 0?(o.set(l.key,c.mutation.getFieldMask()),KC(c.mutation,l,c.mutation.getFieldMask(),Ls.now())):o.set(l.key,Il.empty())}),this.recalculateAndSaveOverlays(t,s).next(u=>(u.forEach((l,c)=>o.set(l,c)),n.forEach((l,c)=>{var f;return a.set(l,new FMt(c,(f=o.get(l))!==null&&f!==void 0?f:null))}),a))}recalculateAndSaveOverlays(t,n){const r=YC();let i=new Oi((o,a)=>o-a),s=zn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next(o=>{for(const a of o)a.keys().forEach(u=>{const l=n.get(u);if(l===null)return;let c=r.get(u)||Il.empty();c=a.applyToLocalView(l,c),r.set(u,c);const f=(i.get(a.batchId)||zn()).add(u);i=i.insert(a.batchId,f)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const u=a.getNext(),l=u.key,c=u.value,f=XPe();c.forEach(d=>{if(!s.has(d)){const h=rDe(n.get(d),r.get(d));h!==null&&f.set(d,h),s=s.add(d)}}),o.push(this.documentOverlayCache.saveOverlays(t,l,f))}return Qe.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next(r=>this.recalculateAndSaveOverlays(t,r))}getDocumentsMatchingQuery(t,n,r,i){return function(o){return Ut.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):qPe(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,r,i):this.getDocumentsMatchingCollectionQuery(t,n,r,i)}getNextDocuments(t,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,r.largestBatchId,i-s.size):Qe.resolve(v1());let a=-1,u=s;return o.next(l=>Qe.forEach(l,(c,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),s.get(c)?Qe.resolve():this.remoteDocumentCache.getEntry(t,c).next(d=>{u=u.insert(c,d)}))).next(()=>this.populateOverlays(t,l,s)).next(()=>this.computeViews(t,u,l,zn())).next(c=>({batchId:a,changes:KPe(c)})))})}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new Ut(n)).next(r=>{let i=z2();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(t,n,r,i){const s=n.collectionGroup;let o=z2();return this.indexManager.getCollectionParents(t,s).next(a=>Qe.forEach(a,u=>{const l=function(f,d){return new BS(d,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,u.child(s));return this.getDocumentsMatchingCollectionQuery(t,l,r,i).next(c=>{c.forEach((f,d)=>{o=o.insert(f,d)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(t,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,r,s,i))).next(o=>{s.forEach((u,l)=>{const c=l.getKey();o.get(c)===null&&(o=o.insert(c,ca.newInvalidDocument(c)))});let a=z2();return o.forEach((u,l)=>{const c=s.get(u);c!==void 0&&KC(c.mutation,l,Il.empty(),Ls.now()),$4(n,l)&&(a=a.insert(u,l))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BMt{constructor(t){this.serializer=t,this.cr=new Map,this.lr=new Map}getBundleMetadata(t,n){return Qe.resolve(this.cr.get(n))}saveBundleMetadata(t,n){return this.cr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:_h(i.createTime)}}(n)),Qe.resolve()}getNamedQuery(t,n){return Qe.resolve(this.lr.get(n))}saveNamedQuery(t,n){return this.lr.set(n.name,function(i){return{name:i.name,query:OMt(i.bundledQuery),readTime:_h(i.readTime)}}(n)),Qe.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UMt{constructor(){this.overlays=new Oi(Ut.comparator),this.hr=new Map}getOverlay(t,n){return Qe.resolve(this.overlays.get(n))}getOverlays(t,n){const r=v1();return Qe.forEach(n,i=>this.getOverlay(t,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(t,n,r){return r.forEach((i,s)=>{this.ht(t,n,s)}),Qe.resolve()}removeOverlaysForBatchId(t,n,r){const i=this.hr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.hr.delete(r)),Qe.resolve()}getOverlaysForCollection(t,n,r){const i=v1(),s=n.length+1,o=new Ut(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const u=a.getNext().value,l=u.getKey();if(!n.isPrefixOf(l.path))break;l.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return Qe.resolve(i)}getOverlaysForCollectionGroup(t,n,r,i){let s=new Oi((l,c)=>l-c);const o=this.overlays.getIterator();for(;o.hasNext();){const l=o.getNext().value;if(l.getKey().getCollectionGroup()===n&&l.largestBatchId>r){let c=s.get(l.largestBatchId);c===null&&(c=v1(),s=s.insert(l.largestBatchId,c)),c.set(l.getKey(),l)}}const a=v1(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,c)=>a.set(l,c)),!(a.size()>=i)););return Qe.resolve(a)}ht(t,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.hr.get(i.largestBatchId).delete(r.key);this.hr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new cMt(n,r));let s=this.hr.get(n);s===void 0&&(s=zn(),this.hr.set(n,s)),this.hr.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mZ{constructor(){this.Pr=new Oo(Ks.Ir),this.Tr=new Oo(Ks.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(t,n){const r=new Ks(t,n);this.Pr=this.Pr.add(r),this.Tr=this.Tr.add(r)}dr(t,n){t.forEach(r=>this.addReference(r,n))}removeReference(t,n){this.Ar(new Ks(t,n))}Rr(t,n){t.forEach(r=>this.removeReference(r,n))}Vr(t){const n=new Ut(new fi([])),r=new Ks(n,t),i=new Ks(n,t+1),s=[];return this.Tr.forEachInRange([r,i],o=>{this.Ar(o),s.push(o.key)}),s}mr(){this.Pr.forEach(t=>this.Ar(t))}Ar(t){this.Pr=this.Pr.delete(t),this.Tr=this.Tr.delete(t)}gr(t){const n=new Ut(new fi([])),r=new Ks(n,t),i=new Ks(n,t+1);let s=zn();return this.Tr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(t){const n=new Ks(t,0),r=this.Pr.firstAfterOrEqual(n);return r!==null&&t.isEqual(r.key)}}class Ks{constructor(t,n){this.key=t,this.pr=n}static Ir(t,n){return Ut.comparator(t.key,n.key)||vr(t.pr,n.pr)}static Er(t,n){return vr(t.pr,n.pr)||Ut.comparator(t.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zMt{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.yr=1,this.wr=new Oo(Ks.Ir)}checkEmpty(t){return Qe.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,r,i){const s=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new lMt(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.wr=this.wr.add(new Ks(a.key,s)),this.indexManager.addToCollectionParentIndex(t,a.key.path.popLast());return Qe.resolve(o)}lookupMutationBatch(t,n){return Qe.resolve(this.Sr(n))}getNextMutationBatchAfterBatchId(t,n){const r=n+1,i=this.br(r),s=i<0?0:i;return Qe.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return Qe.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(t){return Qe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){const r=new Ks(n,0),i=new Ks(n,Number.POSITIVE_INFINITY),s=[];return this.wr.forEachInRange([r,i],o=>{const a=this.Sr(o.pr);s.push(a)}),Qe.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(t,n){let r=new Oo(vr);return n.forEach(i=>{const s=new Ks(i,0),o=new Ks(i,Number.POSITIVE_INFINITY);this.wr.forEachInRange([s,o],a=>{r=r.add(a.pr)})}),Qe.resolve(this.Dr(r))}getAllMutationBatchesAffectingQuery(t,n){const r=n.path,i=r.length+1;let s=r;Ut.isDocumentKey(s)||(s=s.child(""));const o=new Ks(new Ut(s),0);let a=new Oo(vr);return this.wr.forEachWhile(u=>{const l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(u.pr)),!0)},o),Qe.resolve(this.Dr(a))}Dr(t){const n=[];return t.forEach(r=>{const i=this.Sr(r);i!==null&&n.push(i)}),n}removeMutationBatch(t,n){ii(this.Cr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.wr;return Qe.forEach(n.mutations,i=>{const s=new Ks(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(t,i.key)}).next(()=>{this.wr=r})}Mn(t){}containsKey(t,n){const r=new Ks(n,0),i=this.wr.firstAfterOrEqual(r);return Qe.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(t){return this.mutationQueue.length,Qe.resolve()}Cr(t,n){return this.br(t)}br(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Sr(t){const n=this.br(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VMt{constructor(t){this.vr=t,this.docs=function(){return new Oi(Ut.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.vr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(t,r.path.popLast())}removeEntry(t){const n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){const r=this.docs.get(n);return Qe.resolve(r?r.document.mutableCopy():ca.newInvalidDocument(n))}getEntries(t,n){let r=jm();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():ca.newInvalidDocument(i))}),Qe.resolve(r)}getDocumentsMatchingQuery(t,n,r,i){let s=jm();const o=n.path,a=new Ut(o.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){const{key:l,value:{document:c}}=u.getNext();if(!o.isPrefixOf(l.path))break;l.path.length>o.length+1||A$t(C$t(c),r)<=0||(i.has(c.key)||$4(n,c))&&(s=s.insert(c.key,c.mutableCopy()))}return Qe.resolve(s)}getAllFromCollectionGroup(t,n,r,i){an()}Fr(t,n){return Qe.forEach(this.docs,r=>n(r))}newChangeBuffer(t){return new HMt(this)}getSize(t){return Qe.resolve(this.size)}}class HMt extends LMt{constructor(t){super(),this.ar=t}applyChanges(t){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.ar.addEntry(t,i)):this.ar.removeEntry(r)}),Qe.waitFor(n)}getFromCache(t,n){return this.ar.getEntry(t,n)}getAllFromCache(t,n){return this.ar.getEntries(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qMt{constructor(t){this.persistence=t,this.Mr=new US(n=>lZ(n),cZ),this.lastRemoteSnapshotVersion=dn.min(),this.highestTargetId=0,this.Or=0,this.Nr=new mZ,this.targetCount=0,this.Lr=vx.Nn()}forEachTarget(t,n){return this.Mr.forEach((r,i)=>n(i)),Qe.resolve()}getLastRemoteSnapshotVersion(t){return Qe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return Qe.resolve(this.Or)}allocateTargetId(t){return this.highestTargetId=this.Lr.next(),Qe.resolve(this.highestTargetId)}setTargetsMetadata(t,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Or&&(this.Or=n),Qe.resolve()}qn(t){this.Mr.set(t.target,t);const n=t.targetId;n>this.highestTargetId&&(this.Lr=new vx(n),this.highestTargetId=n),t.sequenceNumber>this.Or&&(this.Or=t.sequenceNumber)}addTargetData(t,n){return this.qn(n),this.targetCount+=1,Qe.resolve()}updateTargetData(t,n){return this.qn(n),Qe.resolve()}removeTargetData(t,n){return this.Mr.delete(n.target),this.Nr.Vr(n.targetId),this.targetCount-=1,Qe.resolve()}removeTargets(t,n,r){let i=0;const s=[];return this.Mr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Mr.delete(o),s.push(this.removeMatchingKeysForTargetId(t,a.targetId)),i++)}),Qe.waitFor(s).next(()=>i)}getTargetCount(t){return Qe.resolve(this.targetCount)}getTargetData(t,n){const r=this.Mr.get(n)||null;return Qe.resolve(r)}addMatchingKeys(t,n,r){return this.Nr.dr(n,r),Qe.resolve()}removeMatchingKeys(t,n,r){this.Nr.Rr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(t,o))}),Qe.waitFor(s)}removeMatchingKeysForTargetId(t,n){return this.Nr.Vr(n),Qe.resolve()}getMatchingKeysForTargetId(t,n){const r=this.Nr.gr(n);return Qe.resolve(r)}containsKey(t,n){return Qe.resolve(this.Nr.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WMt{constructor(t,n){this.Br={},this.overlays={},this.kr=new sZ(0),this.qr=!1,this.qr=!0,this.referenceDelegate=t(this),this.Qr=new qMt(this),this.indexManager=new $Mt,this.remoteDocumentCache=function(i){return new VMt(i)}(r=>this.referenceDelegate.Kr(r)),this.serializer=new DMt(n),this.$r=new BMt(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new UMt,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let r=this.Br[t.toKey()];return r||(r=new zMt(n,this.referenceDelegate),this.Br[t.toKey()]=r),r}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(t,n,r){It("MemoryPersistence","Starting transaction:",t);const i=new GMt(this.kr.next());return this.referenceDelegate.Ur(),r(i).next(s=>this.referenceDelegate.Wr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Gr(t,n){return Qe.or(Object.values(this.Br).map(r=>()=>r.containsKey(t,n)))}}class GMt extends k$t{constructor(t){super(),this.currentSequenceNumber=t}}class gZ{constructor(t){this.persistence=t,this.zr=new mZ,this.jr=null}static Hr(t){return new gZ(t)}get Jr(){if(this.jr)return this.jr;throw an()}addReference(t,n,r){return this.zr.addReference(r,n),this.Jr.delete(r.toString()),Qe.resolve()}removeReference(t,n,r){return this.zr.removeReference(r,n),this.Jr.add(r.toString()),Qe.resolve()}markPotentiallyOrphaned(t,n){return this.Jr.add(n.toString()),Qe.resolve()}removeTarget(t,n){this.zr.Vr(n.targetId).forEach(i=>this.Jr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,n.targetId).next(i=>{i.forEach(s=>this.Jr.add(s.toString()))}).next(()=>r.removeTargetData(t,n))}Ur(){this.jr=new Set}Wr(t){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Qe.forEach(this.Jr,r=>{const i=Ut.fromPath(r);return this.Yr(t,i).next(s=>{s||n.removeEntry(i,dn.min())})}).next(()=>(this.jr=null,n.apply(t)))}updateLimboDocument(t,n){return this.Yr(t,n).next(r=>{r?this.Jr.delete(n.toString()):this.Jr.add(n.toString())})}Kr(t){return 0}Yr(t,n){return Qe.or([()=>Qe.resolve(this.zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.Gr(t,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yZ{constructor(t,n,r,i){this.targetId=t,this.fromCache=n,this.qi=r,this.Qi=i}static Ki(t,n){let r=zn(),i=zn();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new yZ(t,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YMt{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KMt{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=function(){return INt()?8:R$t(Fo())>0?6:4}()}initialize(t,n){this.zi=t,this.indexManager=n,this.$i=!0}getDocumentsMatchingQuery(t,n,r,i){const s={result:null};return this.ji(t,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Hi(t,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new YMt;return this.Ji(t,n,o).next(a=>{if(s.result=a,this.Ui)return this.Yi(t,n,o,a.size)})}).next(()=>s.result)}Yi(t,n,r,i){return r.documentReadCount<this.Wi?(qT()<=Gn.DEBUG&&It("QueryEngine","SDK will not create cache indexes for query:",lw(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),Qe.resolve()):(qT()<=Gn.DEBUG&&It("QueryEngine","Query:",lw(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Gi*i?(qT()<=Gn.DEBUG&&It("QueryEngine","The SDK decides to create cache indexes for query:",lw(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,bh(n))):Qe.resolve())}ji(t,n){if(jhe(n))return Qe.resolve(null);let r=bh(n);return this.indexManager.getIndexType(t,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=GV(n,null,"F"),r=bh(n)),this.indexManager.getDocumentsMatchingTarget(t,r).next(s=>{const o=zn(...s);return this.zi.getDocuments(t,o).next(a=>this.indexManager.getMinOffset(t,r).next(u=>{const l=this.Zi(n,a);return this.Xi(n,l,o,u.readTime)?this.ji(t,GV(n,null,"F")):this.es(t,l,n,u)}))})))}Hi(t,n,r,i){return jhe(n)||i.isEqual(dn.min())?Qe.resolve(null):this.zi.getDocuments(t,r).next(s=>{const o=this.Zi(n,s);return this.Xi(n,o,r,i)?Qe.resolve(null):(qT()<=Gn.DEBUG&&It("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),lw(n)),this.es(t,o,n,T$t(i,-1)).next(a=>a))})}Zi(t,n){let r=new Oo(GPe(t));return n.forEach((i,s)=>{$4(t,s)&&(r=r.add(s))}),r}Xi(t,n,r,i){if(t.limit===null)return!1;if(r.size!==n.size)return!0;const s=t.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ji(t,n,r){return qT()<=Gn.DEBUG&&It("QueryEngine","Using full collection scan to execute query:",lw(n)),this.zi.getDocumentsMatchingQuery(t,n,ly.min(),r)}es(t,n,r,i){return this.zi.getDocumentsMatchingQuery(t,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XMt{constructor(t,n,r,i){this.persistence=t,this.ts=n,this.serializer=i,this.ns=new Oi(vr),this.rs=new US(s=>lZ(s),cZ),this.ss=new Map,this.os=t.getRemoteDocumentCache(),this.Qr=t.getTargetCache(),this.$r=t.getBundleCache(),this._s(r)}_s(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new jMt(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>t.collect(n,this.ns))}}function QMt(e,t,n,r){return new XMt(e,t,n,r)}async function mDe(e,t){const n=hn(e);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n._s(t),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let u=zn();for(const l of i){o.push(l.batchId);for(const c of l.mutations)u=u.add(c.key)}for(const l of s){a.push(l.batchId);for(const c of l.mutations)u=u.add(c.key)}return n.localDocuments.getDocuments(r,u).next(l=>({us:l,removedBatchIds:o,addedBatchIds:a}))})})}function JMt(e,t){const n=hn(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=t.batch.keys(),s=n.os.newChangeBuffer({trackRemovals:!0});return function(a,u,l,c){const f=l.batch,d=f.keys();let h=Qe.resolve();return d.forEach(p=>{h=h.next(()=>c.getEntry(u,p)).next(m=>{const g=l.docVersions.get(p);ii(g!==null),m.version.compareTo(g)<0&&(f.applyToRemoteDocument(m,l),m.isValidDocument()&&(m.setReadTime(l.commitVersion),c.addEntry(m)))})}),h.next(()=>a.mutationQueue.removeMutationBatch(u,f))}(n,r,t,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=zn();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(u=u.add(a.batch.mutations[l].key));return u}(t))).next(()=>n.localDocuments.getDocuments(r,i))})}function gDe(e){const t=hn(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",n=>t.Qr.getLastRemoteSnapshotVersion(n))}function ZMt(e,t){const n=hn(e),r=t.snapshotVersion;let i=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.os.newChangeBuffer({trackRemovals:!0});i=n.ns;const a=[];t.targetChanges.forEach((c,f)=>{const d=i.get(f);if(!d)return;a.push(n.Qr.removeMatchingKeys(s,c.removedDocuments,f).next(()=>n.Qr.addMatchingKeys(s,c.addedDocuments,f)));let h=d.withSequenceNumber(s.currentSequenceNumber);t.targetMismatches.get(f)!==null?h=h.withResumeToken(Ea.EMPTY_BYTE_STRING,dn.min()).withLastLimboFreeSnapshotVersion(dn.min()):c.resumeToken.approximateByteSize()>0&&(h=h.withResumeToken(c.resumeToken,r)),i=i.insert(f,h),function(m,g,y){return m.resumeToken.approximateByteSize()===0||g.snapshotVersion.toMicroseconds()-m.snapshotVersion.toMicroseconds()>=3e8?!0:y.addedDocuments.size+y.modifiedDocuments.size+y.removedDocuments.size>0}(d,h,c)&&a.push(n.Qr.updateTargetData(s,h))});let u=jm(),l=zn();if(t.documentUpdates.forEach(c=>{t.resolvedLimboDocuments.has(c)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,c))}),a.push(eLt(s,o,t.documentUpdates).next(c=>{u=c.cs,l=c.ls})),!r.isEqual(dn.min())){const c=n.Qr.getLastRemoteSnapshotVersion(s).next(f=>n.Qr.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(c)}return Qe.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,u,l)).next(()=>u)}).then(s=>(n.ns=i,s))}function eLt(e,t,n){let r=zn(),i=zn();return n.forEach(s=>r=r.add(s)),t.getEntries(e,r).next(s=>{let o=jm();return n.forEach((a,u)=>{const l=s.get(a);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(dn.min())?(t.removeEntry(a,u.readTime),o=o.insert(a,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(t.addEntry(u),o=o.insert(a,u)):It("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",u.version)}),{cs:o,ls:i}})}function tLt(e,t){const n=hn(e);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(t===void 0&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,t)))}function nLt(e,t){const n=hn(e);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Qr.getTargetData(r,t).next(s=>s?(i=s,Qe.resolve(i)):n.Qr.allocateTargetId(r).next(o=>(i=new r0(t,o,"TargetPurposeListen",r.currentSequenceNumber),n.Qr.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.ns.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.ns=n.ns.insert(r.targetId,r),n.rs.set(t,r.targetId)),r})}async function JV(e,t,n){const r=hn(e),i=r.ns.get(t),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!rR(o))throw o;It("LocalStore",`Failed to update sequence numbers for target ${t}: ${o}`)}r.ns=r.ns.remove(t),r.rs.delete(i.target)}function Xhe(e,t,n){const r=hn(e);let i=dn.min(),s=zn();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,l,c){const f=hn(u),d=f.rs.get(c);return d!==void 0?Qe.resolve(f.ns.get(d)):f.Qr.getTargetData(l,c)}(r,o,bh(t)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(o,a.targetId).next(u=>{s=u})}).next(()=>r.ts.getDocumentsMatchingQuery(o,t,n?i:dn.min(),n?s:zn())).next(a=>(rLt(r,G$t(t),a),{documents:a,hs:s})))}function rLt(e,t,n){let r=e.ss.get(t)||dn.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),e.ss.set(t,r)}class Qhe{constructor(){this.activeTargetIds=Z$t()}As(t){this.activeTargetIds=this.activeTargetIds.add(t)}Rs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}ds(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class iLt{constructor(){this.no=new Qhe,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,r){}addLocalQueryTarget(t){return this.no.As(t),this.ro[t]||"not-current"}updateQueryState(t,n,r){this.ro[t]=n}removeLocalQueryTarget(t){this.no.Rs(t)}isLocalQueryTarget(t){return this.no.activeTargetIds.has(t)}clearQueryState(t){delete this.ro[t]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(t){return this.no.activeTargetIds.has(t)}start(){return this.no=new Qhe,Promise.resolve()}handleUserChange(t,n,r){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sLt{io(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jhe{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(t){this.uo.push(t)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){It("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const t of this.uo)t(0)}ao(){It("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const t of this.uo)t(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let bP=null;function B9(){return bP===null?bP=function(){return 268435456+Math.round(2147483648*Math.random())}():bP++,"0x"+bP.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oLt={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aLt{constructor(t){this.lo=t.lo,this.ho=t.ho}Po(t){this.Io=t}To(t){this.Eo=t}Ao(t){this.Ro=t}onMessage(t){this.Vo=t}close(){this.ho()}send(t){this.lo(t)}mo(){this.Io()}fo(){this.Eo()}po(t){this.Ro(t)}yo(t){this.Vo(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const na="WebChannelConnection";class uLt extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.wo=r+"://"+n.host,this.So=`projects/${i}/databases/${s}`,this.bo=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Do(){return!1}Co(n,r,i,s,o){const a=B9(),u=this.vo(n,r.toUriEncodedString());It("RestConnection",`Sending RPC '${n}' ${a}:`,u,i);const l={"google-cloud-resource-prefix":this.So,"x-goog-request-params":this.bo};return this.Fo(l,s,o),this.Mo(n,u,l,i).then(c=>(It("RestConnection",`Received RPC '${n}' ${a}: `,c),c),c=>{throw _I("RestConnection",`RPC '${n}' ${a} failed with error: `,c,"url: ",u,"request:",i),c})}xo(n,r,i,s,o,a){return this.Co(n,r,i,s,o)}Fo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+jS}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}vo(n,r){const i=oLt[n];return`${this.wo}/v1/${r}:${i}`}terminate(){}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Mo(t,n,r,i){const s=B9();return new Promise((o,a)=>{const u=new kPe;u.setWithCredentials(!0),u.listenOnce(NPe.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case VD.NO_ERROR:const c=u.getResponseJson();It(na,`XHR for RPC '${t}' ${s} received:`,JSON.stringify(c)),o(c);break;case VD.TIMEOUT:It(na,`RPC '${t}' ${s} timed out`),a(new bt(Be.DEADLINE_EXCEEDED,"Request time out"));break;case VD.HTTP_ERROR:const f=u.getStatus();if(It(na,`RPC '${t}' ${s} failed with status:`,f,"response text:",u.getResponseText()),f>0){let d=u.getResponseJson();Array.isArray(d)&&(d=d[0]);const h=d==null?void 0:d.error;if(h&&h.status&&h.message){const p=function(g){const y=g.toLowerCase().replace(/_/g,"-");return Object.values(Be).indexOf(y)>=0?y:Be.UNKNOWN}(h.status);a(new bt(p,h.message))}else a(new bt(Be.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new bt(Be.UNAVAILABLE,"Connection failed."));break;default:an()}}finally{It(na,`RPC '${t}' ${s} completed.`)}});const l=JSON.stringify(i);It(na,`RPC '${t}' ${s} sending request:`,i),u.send(n,"POST",l,r,15)})}Oo(t,n,r){const i=B9(),s=[this.wo,"/","google.firestore.v1.Firestore","/",t,"/channel"],o=OPe(),a=DPe(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.xmlHttpFactory=new RPe({})),this.Fo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const c=s.join("");It(na,`Creating RPC '${t}' stream ${i}: ${c}`,u);const f=o.createWebChannel(c,u);let d=!1,h=!1;const p=new aLt({lo:g=>{h?It(na,`Not sending because RPC '${t}' stream ${i} is closed:`,g):(d||(It(na,`Opening RPC '${t}' stream ${i} transport.`),f.open(),d=!0),It(na,`RPC '${t}' stream ${i} sending:`,g),f.send(g))},ho:()=>f.close()}),m=(g,y,v)=>{g.listen(y,_=>{try{v(_)}catch(w){setTimeout(()=>{throw w},0)}})};return m(f,U2.EventType.OPEN,()=>{h||(It(na,`RPC '${t}' stream ${i} transport opened.`),p.mo())}),m(f,U2.EventType.CLOSE,()=>{h||(h=!0,It(na,`RPC '${t}' stream ${i} transport closed`),p.po())}),m(f,U2.EventType.ERROR,g=>{h||(h=!0,_I(na,`RPC '${t}' stream ${i} transport errored:`,g),p.po(new bt(Be.UNAVAILABLE,"The operation could not be completed")))}),m(f,U2.EventType.MESSAGE,g=>{var y;if(!h){const v=g.data[0];ii(!!v);const _=v,w=_.error||((y=_[0])===null||y===void 0?void 0:y.error);if(w){It(na,`RPC '${t}' stream ${i} received error:`,w);const E=w.status;let S=function(A){const k=vs[A];if(k!==void 0)return sDe(k)}(E),T=w.message;S===void 0&&(S=Be.INTERNAL,T="Unknown error status: "+E+" with message "+w.message),h=!0,p.po(new bt(S,T)),f.close()}else It(na,`RPC '${t}' stream ${i} received:`,v),p.yo(v)}}),m(a,PPe.STAT_EVENT,g=>{g.stat===UV.PROXY?It(na,`RPC '${t}' stream ${i} detected buffering proxy`):g.stat===UV.NOPROXY&&It(na,`RPC '${t}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{p.fo()},0),p}}function U9(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B4(e){return new bMt(e,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yDe{constructor(t,n,r=1e3,i=1.5,s=6e4){this.oi=t,this.timerId=n,this.No=r,this.Lo=i,this.Bo=s,this.ko=0,this.qo=null,this.Qo=Date.now(),this.reset()}reset(){this.ko=0}Ko(){this.ko=this.Bo}$o(t){this.cancel();const n=Math.floor(this.ko+this.Uo()),r=Math.max(0,Date.now()-this.Qo),i=Math.max(0,n-r);i>0&&It("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.qo=this.oi.enqueueAfterDelay(this.timerId,i,()=>(this.Qo=Date.now(),t())),this.ko*=this.Lo,this.ko<this.No&&(this.ko=this.No),this.ko>this.Bo&&(this.ko=this.Bo)}Wo(){this.qo!==null&&(this.qo.skipDelay(),this.qo=null)}cancel(){this.qo!==null&&(this.qo.cancel(),this.qo=null)}Uo(){return(Math.random()-.5)*this.ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vDe{constructor(t,n,r,i,s,o,a,u){this.oi=t,this.Go=r,this.zo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.jo=0,this.Ho=null,this.Jo=null,this.stream=null,this.Yo=new yDe(t,n)}Zo(){return this.state===1||this.state===5||this.Xo()}Xo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.e_()}async stop(){this.Zo()&&await this.close(0)}t_(){this.state=0,this.Yo.reset()}n_(){this.Xo()&&this.Ho===null&&(this.Ho=this.oi.enqueueAfterDelay(this.Go,6e4,()=>this.r_()))}i_(t){this.s_(),this.stream.send(t)}async r_(){if(this.Xo())return this.close(0)}s_(){this.Ho&&(this.Ho.cancel(),this.Ho=null)}o_(){this.Jo&&(this.Jo.cancel(),this.Jo=null)}async close(t,n){this.s_(),this.o_(),this.Yo.cancel(),this.jo++,t!==4?this.Yo.reset():n&&n.code===Be.RESOURCE_EXHAUSTED?(Fm(n.toString()),Fm("Using maximum backoff delay to prevent overloading the backend."),this.Yo.Ko()):n&&n.code===Be.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.__(),this.stream.close(),this.stream=null),this.state=t,await this.listener.Ao(n)}__(){}auth(){this.state=1;const t=this.a_(this.jo),n=this.jo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.jo===n&&this.u_(r,i)},r=>{t(()=>{const i=new bt(Be.UNKNOWN,"Fetching auth token failed: "+r.message);return this.c_(i)})})}u_(t,n){const r=this.a_(this.jo);this.stream=this.l_(t,n),this.stream.Po(()=>{r(()=>this.listener.Po())}),this.stream.To(()=>{r(()=>(this.state=2,this.Jo=this.oi.enqueueAfterDelay(this.zo,1e4,()=>(this.Xo()&&(this.state=3),Promise.resolve())),this.listener.To()))}),this.stream.Ao(i=>{r(()=>this.c_(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}e_(){this.state=5,this.Yo.$o(async()=>{this.state=0,this.start()})}c_(t){return It("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}a_(t){return n=>{this.oi.enqueueAndForget(()=>this.jo===t?n():(It("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class lLt extends vDe{constructor(t,n,r,i,s,o){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}l_(t,n){return this.connection.Oo("Listen",t,n)}onMessage(t){this.Yo.reset();const n=EMt(this.serializer,t),r=function(s){if(!("targetChange"in s))return dn.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?dn.min():o.readTime?_h(o.readTime):dn.min()}(t);return this.listener.h_(n,r)}P_(t){const n={};n.database=QV(this.serializer),n.addTarget=function(s,o){let a;const u=o.target;if(a=qV(u)?{documents:TMt(s,u)}:{query:CMt(s,u)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=uDe(s,o.resumeToken);const l=YV(s,o.expectedCount);l!==null&&(a.expectedCount=l)}else if(o.snapshotVersion.compareTo(dn.min())>0){a.readTime=rM(s,o.snapshotVersion.toTimestamp());const l=YV(s,o.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,t);const r=IMt(this.serializer,t);r&&(n.labels=r),this.i_(n)}I_(t){const n={};n.database=QV(this.serializer),n.removeTarget=t,this.i_(n)}}class cLt extends vDe{constructor(t,n,r,i,s,o){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s,this.T_=!1}get E_(){return this.T_}start(){this.T_=!1,this.lastStreamToken=void 0,super.start()}__(){this.T_&&this.d_([])}l_(t,n){return this.connection.Oo("Write",t,n)}onMessage(t){if(ii(!!t.streamToken),this.lastStreamToken=t.streamToken,this.T_){this.Yo.reset();const n=SMt(t.writeResults,t.commitTime),r=_h(t.commitTime);return this.listener.A_(r,n)}return ii(!t.writeResults||t.writeResults.length===0),this.T_=!0,this.listener.R_()}V_(){const t={};t.database=QV(this.serializer),this.i_(t)}d_(t){const n={streamToken:this.lastStreamToken,writes:t.map(r=>xMt(this.serializer,r))};this.i_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fLt extends class{}{constructor(t,n,r,i){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.m_=!1}f_(){if(this.m_)throw new bt(Be.FAILED_PRECONDITION,"The client has already been terminated.")}Co(t,n,r,i){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Co(t,KV(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===Be.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new bt(Be.UNKNOWN,s.toString())})}xo(t,n,r,i,s){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.xo(t,KV(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===Be.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new bt(Be.UNKNOWN,o.toString())})}terminate(){this.m_=!0,this.connection.terminate()}}class dLt{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.g_=0,this.p_=null,this.y_=!0}w_(){this.g_===0&&(this.S_("Unknown"),this.p_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.p_=null,this.b_("Backend didn't respond within 10 seconds."),this.S_("Offline"),Promise.resolve())))}D_(t){this.state==="Online"?this.S_("Unknown"):(this.g_++,this.g_>=1&&(this.C_(),this.b_(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.S_("Offline")))}set(t){this.C_(),this.g_=0,t==="Online"&&(this.y_=!1),this.S_(t)}S_(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}b_(t){const n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.y_?(Fm(n),this.y_=!1):It("OnlineStateTracker",n)}C_(){this.p_!==null&&(this.p_.cancel(),this.p_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hLt{constructor(t,n,r,i,s){this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.v_=[],this.F_=new Map,this.M_=new Set,this.x_=[],this.O_=s,this.O_.io(o=>{r.enqueueAndForget(async()=>{t_(this)&&(It("RemoteStore","Restarting streams for network reachability change."),await async function(u){const l=hn(u);l.M_.add(4),await aR(l),l.N_.set("Unknown"),l.M_.delete(4),await oR(l)}(this))})}),this.N_=new dLt(r,i)}}async function oR(e){if(t_(e))for(const t of e.x_)await t(!0)}async function aR(e){for(const t of e.x_)await t(!1)}function bDe(e,t){const n=hn(e);n.F_.has(t.targetId)||(n.F_.set(t.targetId,t),wZ(n)?_Z(n):zS(n).Xo()&&bZ(n,t))}function vZ(e,t){const n=hn(e),r=zS(n);n.F_.delete(t),r.Xo()&&_De(n,t),n.F_.size===0&&(r.Xo()?r.n_():t_(n)&&n.N_.set("Unknown"))}function bZ(e,t){if(e.L_.xe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(dn.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}zS(e).P_(t)}function _De(e,t){e.L_.xe(t),zS(e).I_(t)}function _Z(e){e.L_=new mMt({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),ot:t=>e.F_.get(t)||null,tt:()=>e.datastore.serializer.databaseId}),zS(e).start(),e.N_.w_()}function wZ(e){return t_(e)&&!zS(e).Zo()&&e.F_.size>0}function t_(e){return hn(e).M_.size===0}function wDe(e){e.L_=void 0}async function pLt(e){e.N_.set("Online")}async function mLt(e){e.F_.forEach((t,n)=>{bZ(e,t)})}async function gLt(e,t){wDe(e),wZ(e)?(e.N_.D_(t),_Z(e)):e.N_.set("Unknown")}async function yLt(e,t,n){if(e.N_.set("Online"),t instanceof aDe&&t.state===2&&t.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.F_.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.F_.delete(a),i.L_.removeTarget(a))}(e,t)}catch(r){It("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),r),await iM(e,r)}else if(t instanceof WD?e.L_.Ke(t):t instanceof oDe?e.L_.He(t):e.L_.We(t),!n.isEqual(dn.min()))try{const r=await gDe(e.localStore);n.compareTo(r)>=0&&await function(s,o){const a=s.L_.rt(o);return a.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){const c=s.F_.get(l);c&&s.F_.set(l,c.withResumeToken(u.resumeToken,o))}}),a.targetMismatches.forEach((u,l)=>{const c=s.F_.get(u);if(!c)return;s.F_.set(u,c.withResumeToken(Ea.EMPTY_BYTE_STRING,c.snapshotVersion)),_De(s,u);const f=new r0(c.target,u,l,c.sequenceNumber);bZ(s,f)}),s.remoteSyncer.applyRemoteEvent(a)}(e,n)}catch(r){It("RemoteStore","Failed to raise snapshot:",r),await iM(e,r)}}async function iM(e,t,n){if(!rR(t))throw t;e.M_.add(1),await aR(e),e.N_.set("Offline"),n||(n=()=>gDe(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{It("RemoteStore","Retrying IndexedDB access"),await n(),e.M_.delete(1),await oR(e)})}function EDe(e,t){return t().catch(n=>iM(e,n,t))}async function U4(e){const t=hn(e),n=fy(t);let r=t.v_.length>0?t.v_[t.v_.length-1].batchId:-1;for(;vLt(t);)try{const i=await tLt(t.localStore,r);if(i===null){t.v_.length===0&&n.n_();break}r=i.batchId,bLt(t,i)}catch(i){await iM(t,i)}xDe(t)&&SDe(t)}function vLt(e){return t_(e)&&e.v_.length<10}function bLt(e,t){e.v_.push(t);const n=fy(e);n.Xo()&&n.E_&&n.d_(t.mutations)}function xDe(e){return t_(e)&&!fy(e).Zo()&&e.v_.length>0}function SDe(e){fy(e).start()}async function _Lt(e){fy(e).V_()}async function wLt(e){const t=fy(e);for(const n of e.v_)t.d_(n.mutations)}async function ELt(e,t,n){const r=e.v_.shift(),i=dZ.from(r,t,n);await EDe(e,()=>e.remoteSyncer.applySuccessfulWrite(i)),await U4(e)}async function xLt(e,t){t&&fy(e).E_&&await async function(r,i){if(function(o){return dMt(o)&&o!==Be.ABORTED}(i.code)){const s=r.v_.shift();fy(r).t_(),await EDe(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await U4(r)}}(e,t),xDe(e)&&SDe(e)}async function Zhe(e,t){const n=hn(e);n.asyncQueue.verifyOperationInProgress(),It("RemoteStore","RemoteStore received new credentials");const r=t_(n);n.M_.add(3),await aR(n),r&&n.N_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.M_.delete(3),await oR(n)}async function SLt(e,t){const n=hn(e);t?(n.M_.delete(2),await oR(n)):t||(n.M_.add(2),await aR(n),n.N_.set("Unknown"))}function zS(e){return e.B_||(e.B_=function(n,r,i){const s=hn(n);return s.f_(),new lLt(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(e.datastore,e.asyncQueue,{Po:pLt.bind(null,e),To:mLt.bind(null,e),Ao:gLt.bind(null,e),h_:yLt.bind(null,e)}),e.x_.push(async t=>{t?(e.B_.t_(),wZ(e)?_Z(e):e.N_.set("Unknown")):(await e.B_.stop(),wDe(e))})),e.B_}function fy(e){return e.k_||(e.k_=function(n,r,i){const s=hn(n);return s.f_(),new cLt(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(e.datastore,e.asyncQueue,{Po:()=>Promise.resolve(),To:_Lt.bind(null,e),Ao:xLt.bind(null,e),R_:wLt.bind(null,e),A_:ELt.bind(null,e)}),e.x_.push(async t=>{t?(e.k_.t_(),await U4(e)):(await e.k_.stop(),e.v_.length>0&&(It("RemoteStore",`Stopping write stream with ${e.v_.length} pending writes`),e.v_=[]))})),e.k_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EZ{constructor(t,n,r,i,s){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new cm,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,n,r,i,s){const o=Date.now()+r,a=new EZ(t,n,o,i,s);return a.start(r),a}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new bt(Be.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function xZ(e,t){if(Fm("AsyncQueue",`${t}: ${e}`),rR(e))return new bt(Be.UNAVAILABLE,`${t}: ${e}`);throw e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yE{constructor(t){this.comparator=t?(n,r)=>t(n,r)||Ut.comparator(n.key,r.key):(n,r)=>Ut.comparator(n.key,r.key),this.keyedMap=z2(),this.sortedSet=new Oi(this.comparator)}static emptySet(t){return new yE(t.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((n,r)=>(t(n),!1))}add(t){const n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){const n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof yE)||this.size!==t.size)return!1;const n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const t=[];return this.forEach(n=>{t.push(n.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){const r=new yE;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class epe{constructor(){this.q_=new Oi(Ut.comparator)}track(t){const n=t.doc.key,r=this.q_.get(n);r?t.type!==0&&r.type===3?this.q_=this.q_.insert(n,t):t.type===3&&r.type!==1?this.q_=this.q_.insert(n,{type:r.type,doc:t.doc}):t.type===2&&r.type===2?this.q_=this.q_.insert(n,{type:2,doc:t.doc}):t.type===2&&r.type===0?this.q_=this.q_.insert(n,{type:0,doc:t.doc}):t.type===1&&r.type===0?this.q_=this.q_.remove(n):t.type===1&&r.type===2?this.q_=this.q_.insert(n,{type:1,doc:r.doc}):t.type===0&&r.type===1?this.q_=this.q_.insert(n,{type:2,doc:t.doc}):an():this.q_=this.q_.insert(n,t)}Q_(){const t=[];return this.q_.inorderTraversal((n,r)=>{t.push(r)}),t}}class bx{constructor(t,n,r,i,s,o,a,u,l){this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(t,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new bx(t,n,yE.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&O4(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const n=this.docChanges,r=t.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TLt{constructor(){this.K_=void 0,this.U_=[]}W_(){return this.U_.some(t=>t.G_())}}class CLt{constructor(){this.queries=new US(t=>WPe(t),O4),this.onlineState="Unknown",this.z_=new Set}}async function TDe(e,t){const n=hn(e);let r=3;const i=t.query;let s=n.queries.get(i);s?!s.W_()&&t.G_()&&(r=2):(s=new TLt,r=t.G_()?0:1);try{switch(r){case 0:s.K_=await n.onListen(i,!0);break;case 1:s.K_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const a=xZ(o,`Initialization of query '${lw(t.query)}' failed`);return void t.onError(a)}n.queries.set(i,s),s.U_.push(t),t.j_(n.onlineState),s.K_&&t.H_(s.K_)&&SZ(n)}async function CDe(e,t){const n=hn(e),r=t.query;let i=3;const s=n.queries.get(r);if(s){const o=s.U_.indexOf(t);o>=0&&(s.U_.splice(o,1),s.U_.length===0?i=t.G_()?0:1:!s.W_()&&t.G_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function ALt(e,t){const n=hn(e);let r=!1;for(const i of t){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.U_)a.H_(i)&&(r=!0);o.K_=i}}r&&SZ(n)}function ILt(e,t,n){const r=hn(e),i=r.queries.get(t);if(i)for(const s of i.U_)s.onError(n);r.queries.delete(t)}function SZ(e){e.z_.forEach(t=>{t.next()})}var ZV,tpe;(tpe=ZV||(ZV={})).J_="default",tpe.Cache="cache";class ADe{constructor(t,n,r){this.query=t,this.Y_=n,this.Z_=!1,this.X_=null,this.onlineState="Unknown",this.options=r||{}}H_(t){if(!this.options.includeMetadataChanges){const r=[];for(const i of t.docChanges)i.type!==3&&r.push(i);t=new bx(t.query,t.docs,t.oldDocs,r,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let n=!1;return this.Z_?this.ea(t)&&(this.Y_.next(t),n=!0):this.ta(t,this.onlineState)&&(this.na(t),n=!0),this.X_=t,n}onError(t){this.Y_.error(t)}j_(t){this.onlineState=t;let n=!1;return this.X_&&!this.Z_&&this.ta(this.X_,t)&&(this.na(this.X_),n=!0),n}ta(t,n){if(!t.fromCache||!this.G_())return!0;const r=n!=="Offline";return(!this.options.ra||!r)&&(!t.docs.isEmpty()||t.hasCachedResults||n==="Offline")}ea(t){if(t.docChanges.length>0)return!0;const n=this.X_&&this.X_.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}na(t){t=bx.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Z_=!0,this.Y_.next(t)}G_(){return this.options.source!==ZV.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IDe{constructor(t){this.key=t}}class kDe{constructor(t){this.key=t}}class kLt{constructor(t,n){this.query=t,this.la=n,this.ha=null,this.hasCachedResults=!1,this.current=!1,this.Pa=zn(),this.mutatedKeys=zn(),this.Ia=GPe(t),this.Ta=new yE(this.Ia)}get Ea(){return this.la}da(t,n){const r=n?n.Aa:new epe,i=n?n.Ta:this.Ta;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal((c,f)=>{const d=i.get(c),h=$4(this.query,f)?f:null,p=!!d&&this.mutatedKeys.has(d.key),m=!!h&&(h.hasLocalMutations||this.mutatedKeys.has(h.key)&&h.hasCommittedMutations);let g=!1;d&&h?d.data.isEqual(h.data)?p!==m&&(r.track({type:3,doc:h}),g=!0):this.Ra(d,h)||(r.track({type:2,doc:h}),g=!0,(u&&this.Ia(h,u)>0||l&&this.Ia(h,l)<0)&&(a=!0)):!d&&h?(r.track({type:0,doc:h}),g=!0):d&&!h&&(r.track({type:1,doc:d}),g=!0,(u||l)&&(a=!0)),g&&(h?(o=o.add(h),s=m?s.add(c):s.delete(c)):(o=o.delete(c),s=s.delete(c)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const c=this.query.limitType==="F"?o.last():o.first();o=o.delete(c.key),s=s.delete(c.key),r.track({type:1,doc:c})}return{Ta:o,Aa:r,Xi:a,mutatedKeys:s}}Ra(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,r,i){const s=this.Ta;this.Ta=t.Ta,this.mutatedKeys=t.mutatedKeys;const o=t.Aa.Q_();o.sort((c,f)=>function(h,p){const m=g=>{switch(g){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return an()}};return m(h)-m(p)}(c.type,f.type)||this.Ia(c.doc,f.doc)),this.Va(r),i=i!=null&&i;const a=n&&!i?this.ma():[],u=this.Pa.size===0&&this.current&&!i?1:0,l=u!==this.ha;return this.ha=u,o.length!==0||l?{snapshot:new bx(this.query,t.Ta,s,o,t.mutatedKeys,u===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),fa:a}:{fa:a}}j_(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({Ta:this.Ta,Aa:new epe,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{fa:[]}}ga(t){return!this.la.has(t)&&!!this.Ta.has(t)&&!this.Ta.get(t).hasLocalMutations}Va(t){t&&(t.addedDocuments.forEach(n=>this.la=this.la.add(n)),t.modifiedDocuments.forEach(n=>{}),t.removedDocuments.forEach(n=>this.la=this.la.delete(n)),this.current=t.current)}ma(){if(!this.current)return[];const t=this.Pa;this.Pa=zn(),this.Ta.forEach(r=>{this.ga(r.key)&&(this.Pa=this.Pa.add(r.key))});const n=[];return t.forEach(r=>{this.Pa.has(r)||n.push(new kDe(r))}),this.Pa.forEach(r=>{t.has(r)||n.push(new IDe(r))}),n}pa(t){this.la=t.hs,this.Pa=zn();const n=this.da(t.documents);return this.applyChanges(n,!0)}ya(){return bx.fromInitialDocuments(this.query,this.Ta,this.mutatedKeys,this.ha===0,this.hasCachedResults)}}class RLt{constructor(t,n,r){this.query=t,this.targetId=n,this.view=r}}class NLt{constructor(t){this.key=t,this.wa=!1}}class PLt{constructor(t,n,r,i,s,o){this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Sa={},this.ba=new US(a=>WPe(a),O4),this.Da=new Map,this.Ca=new Set,this.va=new Oi(Ut.comparator),this.Fa=new Map,this.Ma=new mZ,this.xa={},this.Oa=new Map,this.Na=vx.Ln(),this.onlineState="Unknown",this.La=void 0}get isPrimaryClient(){return this.La===!0}}async function DLt(e,t,n=!0){const r=$De(e);let i;const s=r.ba.get(t);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.ya()):i=await RDe(r,t,n,!0),i}async function OLt(e,t){const n=$De(e);await RDe(n,t,!0,!1)}async function RDe(e,t,n,r){const i=await nLt(e.localStore,bh(t)),s=i.targetId,o=n?e.sharedClientState.addLocalQueryTarget(s):"not-current";let a;return r&&(a=await $Lt(e,t,s,o==="current",i.resumeToken)),e.isPrimaryClient&&n&&bDe(e.remoteStore,i),a}async function $Lt(e,t,n,r,i){e.Ba=(f,d,h)=>async function(m,g,y,v){let _=g.view.da(y);_.Xi&&(_=await Xhe(m.localStore,g.query,!1).then(({documents:T})=>g.view.da(T,_)));const w=v&&v.targetChanges.get(g.targetId),E=v&&v.targetMismatches.get(g.targetId)!=null,S=g.view.applyChanges(_,m.isPrimaryClient,w,E);return rpe(m,g.targetId,S.fa),S.snapshot}(e,f,d,h);const s=await Xhe(e.localStore,t,!0),o=new kLt(t,s.hs),a=o.da(s.documents),u=sR.createSynthesizedTargetChangeForCurrentChange(n,r&&e.onlineState!=="Offline",i),l=o.applyChanges(a,e.isPrimaryClient,u);rpe(e,n,l.fa);const c=new RLt(t,n,o);return e.ba.set(t,c),e.Da.has(n)?e.Da.get(n).push(t):e.Da.set(n,[t]),l.snapshot}async function MLt(e,t,n){const r=hn(e),i=r.ba.get(t),s=r.Da.get(i.targetId);if(s.length>1)return r.Da.set(i.targetId,s.filter(o=>!O4(o,t))),void r.ba.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await JV(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&vZ(r.remoteStore,i.targetId),eH(r,i.targetId)}).catch(nR)):(eH(r,i.targetId),await JV(r.localStore,i.targetId,!0))}async function LLt(e,t){const n=hn(e),r=n.ba.get(t),i=n.Da.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),vZ(n.remoteStore,r.targetId))}async function FLt(e,t,n){const r=qLt(e);try{const i=await function(o,a){const u=hn(o),l=Ls.now(),c=a.reduce((h,p)=>h.add(p.key),zn());let f,d;return u.persistence.runTransaction("Locally write mutations","readwrite",h=>{let p=jm(),m=zn();return u.os.getEntries(h,c).next(g=>{p=g,p.forEach((y,v)=>{v.isValidDocument()||(m=m.add(y))})}).next(()=>u.localDocuments.getOverlayedDocuments(h,p)).next(g=>{f=g;const y=[];for(const v of a){const _=aMt(v,f.get(v.key).overlayedDocument);_!=null&&y.push(new Wy(v.key,_,FPe(_.value.mapValue),Gu.exists(!0)))}return u.mutationQueue.addMutationBatch(h,l,y,a)}).next(g=>{d=g;const y=g.applyToLocalDocumentSet(f,m);return u.documentOverlayCache.saveOverlays(h,g.batchId,y)})}).then(()=>({batchId:d.batchId,changes:KPe(f)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,u){let l=o.xa[o.currentUser.toKey()];l||(l=new Oi(vr)),l=l.insert(a,u),o.xa[o.currentUser.toKey()]=l}(r,i.batchId,n),await uR(r,i.changes),await U4(r.remoteStore)}catch(i){const s=xZ(i,"Failed to persist write");n.reject(s)}}async function NDe(e,t){const n=hn(e);try{const r=await ZMt(n.localStore,t);t.targetChanges.forEach((i,s)=>{const o=n.Fa.get(s);o&&(ii(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.wa=!0:i.modifiedDocuments.size>0?ii(o.wa):i.removedDocuments.size>0&&(ii(o.wa),o.wa=!1))}),await uR(n,r,t)}catch(r){await nR(r)}}function npe(e,t,n){const r=hn(e);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.ba.forEach((s,o)=>{const a=o.view.j_(t);a.snapshot&&i.push(a.snapshot)}),function(o,a){const u=hn(o);u.onlineState=a;let l=!1;u.queries.forEach((c,f)=>{for(const d of f.U_)d.j_(a)&&(l=!0)}),l&&SZ(u)}(r.eventManager,t),i.length&&r.Sa.h_(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function jLt(e,t,n){const r=hn(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.Fa.get(t),s=i&&i.key;if(s){let o=new Oi(Ut.comparator);o=o.insert(s,ca.newNoDocument(s,dn.min()));const a=zn().add(s),u=new j4(dn.min(),new Map,new Oi(vr),o,a);await NDe(r,u),r.va=r.va.remove(s),r.Fa.delete(t),TZ(r)}else await JV(r.localStore,t,!1).then(()=>eH(r,t,n)).catch(nR)}async function BLt(e,t){const n=hn(e),r=t.batch.batchId;try{const i=await JMt(n.localStore,t);DDe(n,r,null),PDe(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await uR(n,i)}catch(i){await nR(i)}}async function ULt(e,t,n){const r=hn(e);try{const i=await function(o,a){const u=hn(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let c;return u.mutationQueue.lookupMutationBatch(l,a).next(f=>(ii(f!==null),c=f.keys(),u.mutationQueue.removeMutationBatch(l,f))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,c,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,c)).next(()=>u.localDocuments.getDocuments(l,c))})}(r.localStore,t);DDe(r,t,n),PDe(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await uR(r,i)}catch(i){await nR(i)}}function PDe(e,t){(e.Oa.get(t)||[]).forEach(n=>{n.resolve()}),e.Oa.delete(t)}function DDe(e,t,n){const r=hn(e);let i=r.xa[r.currentUser.toKey()];if(i){const s=i.get(t);s&&(n?s.reject(n):s.resolve(),i=i.remove(t)),r.xa[r.currentUser.toKey()]=i}}function eH(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Da.get(t))e.ba.delete(r),n&&e.Sa.ka(r,n);e.Da.delete(t),e.isPrimaryClient&&e.Ma.Vr(t).forEach(r=>{e.Ma.containsKey(r)||ODe(e,r)})}function ODe(e,t){e.Ca.delete(t.path.canonicalString());const n=e.va.get(t);n!==null&&(vZ(e.remoteStore,n),e.va=e.va.remove(t),e.Fa.delete(n),TZ(e))}function rpe(e,t,n){for(const r of n)r instanceof IDe?(e.Ma.addReference(r.key,t),zLt(e,r)):r instanceof kDe?(It("SyncEngine","Document no longer in limbo: "+r.key),e.Ma.removeReference(r.key,t),e.Ma.containsKey(r.key)||ODe(e,r.key)):an()}function zLt(e,t){const n=t.key,r=n.path.canonicalString();e.va.get(n)||e.Ca.has(r)||(It("SyncEngine","New document in limbo: "+n),e.Ca.add(r),TZ(e))}function TZ(e){for(;e.Ca.size>0&&e.va.size<e.maxConcurrentLimboResolutions;){const t=e.Ca.values().next().value;e.Ca.delete(t);const n=new Ut(fi.fromString(t)),r=e.Na.next();e.Fa.set(r,new NLt(n)),e.va=e.va.insert(n,r),bDe(e.remoteStore,new r0(bh(fZ(n.path)),r,"TargetPurposeLimboResolution",sZ.oe))}}async function uR(e,t,n){const r=hn(e),i=[],s=[],o=[];r.ba.isEmpty()||(r.ba.forEach((a,u)=>{o.push(r.Ba(u,t,n).then(l=>{if((l||n)&&r.isPrimaryClient){const c=l&&!l.fromCache;r.sharedClientState.updateQueryState(u.targetId,c?"current":"not-current")}if(l){i.push(l);const c=yZ.Ki(u.targetId,l);s.push(c)}}))}),await Promise.all(o),r.Sa.h_(i),await async function(u,l){const c=hn(u);try{await c.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>Qe.forEach(l,d=>Qe.forEach(d.qi,h=>c.persistence.referenceDelegate.addReference(f,d.targetId,h)).next(()=>Qe.forEach(d.Qi,h=>c.persistence.referenceDelegate.removeReference(f,d.targetId,h)))))}catch(f){if(!rR(f))throw f;It("LocalStore","Failed to update sequence numbers: "+f)}for(const f of l){const d=f.targetId;if(!f.fromCache){const h=c.ns.get(d),p=h.snapshotVersion,m=h.withLastLimboFreeSnapshotVersion(p);c.ns=c.ns.insert(d,m)}}}(r.localStore,s))}async function VLt(e,t){const n=hn(e);if(!n.currentUser.isEqual(t)){It("SyncEngine","User change. New user:",t.toKey());const r=await mDe(n.localStore,t);n.currentUser=t,function(s,o){s.Oa.forEach(a=>{a.forEach(u=>{u.reject(new bt(Be.CANCELLED,o))})}),s.Oa.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,r.removedBatchIds,r.addedBatchIds),await uR(n,r.us)}}function HLt(e,t){const n=hn(e),r=n.Fa.get(t);if(r&&r.wa)return zn().add(r.key);{let i=zn();const s=n.Da.get(t);if(!s)return i;for(const o of s){const a=n.ba.get(o);i=i.unionWith(a.view.Ea)}return i}}function $De(e){const t=hn(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=NDe.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=HLt.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=jLt.bind(null,t),t.Sa.h_=ALt.bind(null,t.eventManager),t.Sa.ka=ILt.bind(null,t.eventManager),t}function qLt(e){const t=hn(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=BLt.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=ULt.bind(null,t),t}class ipe{constructor(){this.synchronizeTabs=!1}async initialize(t){this.serializer=B4(t.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(t),this.persistence=this.createPersistence(t),await this.persistence.start(),this.localStore=this.createLocalStore(t),this.gcScheduler=this.createGarbageCollectionScheduler(t,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(t,this.localStore)}createGarbageCollectionScheduler(t,n){return null}createIndexBackfillerScheduler(t,n){return null}createLocalStore(t){return QMt(this.persistence,new KMt,t.initialUser,this.serializer)}createPersistence(t){return new WMt(gZ.Hr,this.serializer)}createSharedClientState(t){return new iLt}async terminate(){var t,n;(t=this.gcScheduler)===null||t===void 0||t.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class WLt{async initialize(t,n){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>npe(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=VLt.bind(null,this.syncEngine),await SLt(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new CLt}()}createDatastore(t){const n=B4(t.databaseInfo.databaseId),r=function(s){return new uLt(s)}(t.databaseInfo);return function(s,o,a,u){return new fLt(s,o,a,u)}(t.authCredentials,t.appCheckCredentials,r,n)}createRemoteStore(t){return function(r,i,s,o,a){return new hLt(r,i,s,o,a)}(this.localStore,this.datastore,t.asyncQueue,n=>npe(this.syncEngine,n,0),function(){return Jhe.D()?new Jhe:new sLt}())}createSyncEngine(t,n){return function(i,s,o,a,u,l,c){const f=new PLt(i,s,o,a,u,l);return c&&(f.La=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}async terminate(){var t;await async function(r){const i=hn(r);It("RemoteStore","RemoteStore shutting down."),i.M_.add(5),await aR(i),i.O_.shutdown(),i.N_.set("Unknown")}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MDe{constructor(t){this.observer=t,this.muted=!1}next(t){this.observer.next&&this.Ka(this.observer.next,t)}error(t){this.observer.error?this.Ka(this.observer.error,t):Fm("Uncaught Error in snapshot listener:",t.toString())}$a(){this.muted=!0}Ka(t,n){this.muted||setTimeout(()=>{this.muted||t(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GLt{constructor(t,n,r,i){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=wu.UNAUTHENTICATED,this.clientId=$Pe.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async s=>{It("FirestoreClient","Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>(It("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new bt(Be.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const t=new cm;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){const r=xZ(n,"Failed to shutdown persistence");t.reject(r)}}),t.promise}}async function z9(e,t){e.asyncQueue.verifyOperationInProgress(),It("FirestoreClient","Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(async i=>{r.isEqual(i)||(await mDe(t.localStore,i),r=i)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function spe(e,t){e.asyncQueue.verifyOperationInProgress();const n=await LDe(e);It("FirestoreClient","Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(r=>Zhe(t.remoteStore,r)),e.setAppCheckTokenChangeListener((r,i)=>Zhe(t.remoteStore,i)),e._onlineComponents=t}function YLt(e){return e.name==="FirebaseError"?e.code===Be.FAILED_PRECONDITION||e.code===Be.UNIMPLEMENTED:!(typeof DOMException<"u"&&e instanceof DOMException)||e.code===22||e.code===20||e.code===11}async function LDe(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){It("FirestoreClient","Using user provided OfflineComponentProvider");try{await z9(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!YLt(n))throw n;_I("Error using user provided cache. Falling back to memory cache: "+n),await z9(e,new ipe)}}else It("FirestoreClient","Using default OfflineComponentProvider"),await z9(e,new ipe);return e._offlineComponents}async function CZ(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(It("FirestoreClient","Using user provided OnlineComponentProvider"),await spe(e,e._uninitializedComponentsProvider._online)):(It("FirestoreClient","Using default OnlineComponentProvider"),await spe(e,new WLt))),e._onlineComponents}function KLt(e){return LDe(e).then(t=>t.persistence)}function XLt(e){return CZ(e).then(t=>t.remoteStore)}function QLt(e){return CZ(e).then(t=>t.syncEngine)}async function FDe(e){const t=await CZ(e),n=t.eventManager;return n.onListen=DLt.bind(null,t.syncEngine),n.onUnlisten=MLt.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=OLt.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=LLt.bind(null,t.syncEngine),n}function JLt(e){return e.asyncQueue.enqueue(async()=>{const t=await KLt(e),n=await XLt(e);return t.setNetworkEnabled(!0),function(i){const s=hn(i);return s.M_.delete(0),oR(s)}(n)})}function ZLt(e,t,n={}){const r=new cm;return e.asyncQueue.enqueueAndForget(async()=>function(s,o,a,u,l){const c=new MDe({next:d=>{o.enqueueAndForget(()=>CDe(s,f));const h=d.docs.has(a);!h&&d.fromCache?l.reject(new bt(Be.UNAVAILABLE,"Failed to get document because the client is offline.")):h&&d.fromCache&&u&&u.source==="server"?l.reject(new bt(Be.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(d)},error:d=>l.reject(d)}),f=new ADe(fZ(a.path),c,{includeMetadataChanges:!0,ra:!0});return TDe(s,f)}(await FDe(e),e.asyncQueue,t,n,r)),r.promise}function e6t(e,t,n={}){const r=new cm;return e.asyncQueue.enqueueAndForget(async()=>function(s,o,a,u,l){const c=new MDe({next:d=>{o.enqueueAndForget(()=>CDe(s,f)),d.fromCache&&u.source==="server"?l.reject(new bt(Be.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(d)},error:d=>l.reject(d)}),f=new ADe(a,c,{includeMetadataChanges:!0,ra:!0});return TDe(s,f)}(await FDe(e),e.asyncQueue,t,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jDe(e){const t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ope=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BDe(e,t,n){if(!n)throw new bt(Be.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function t6t(e,t,n,r){if(t===!0&&r===!0)throw new bt(Be.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function ape(e){if(!Ut.isDocumentKey(e))throw new bt(Be.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function upe(e){if(Ut.isDocumentKey(e))throw new bt(Be.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function z4(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";{const t=function(r){return r.constructor?r.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return typeof e=="function"?"a function":an()}function ed(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new bt(Be.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=z4(e);throw new bt(Be.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lpe{constructor(t){var n,r;if(t.host===void 0){if(t.ssl!==void 0)throw new bt(Be.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=(n=t.ssl)===null||n===void 0||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<1048576)throw new bt(Be.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}t6t("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=jDe((r=t.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new bt(Be.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new bt(Be.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new bt(Be.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class AZ{constructor(t,n,r,i){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new lpe({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new bt(Be.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(t){if(this._settingsFrozen)throw new bt(Be.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new lpe(t),t.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new y$t;switch(r.type){case"firstParty":return new _$t(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new bt(Be.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=ope.get(n);r&&(It("ComponentProvider","Removing Datastore"),ope.delete(n),r.terminate())}(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n_{constructor(t,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=t}withConverter(t){return new n_(this.firestore,t,this._query)}}class Xa{constructor(t,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new N0(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Xa(this.firestore,t,this._key)}}class N0 extends n_{constructor(t,n,r){super(t,n,fZ(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Xa(this.firestore,null,new Ut(t))}withConverter(t){return new N0(this.firestore,t,this._path)}}function sf(e,t,...n){if(e=si(e),BDe("collection","path",t),e instanceof AZ){const r=fi.fromString(t,...n);return upe(r),new N0(e,null,r)}{if(!(e instanceof Xa||e instanceof N0))throw new bt(Be.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(fi.fromString(t,...n));return upe(r),new N0(e.firestore,null,r)}}function ys(e,t,...n){if(e=si(e),arguments.length===1&&(t=$Pe.newId()),BDe("doc","path",t),e instanceof AZ){const r=fi.fromString(t,...n);return ape(r),new Xa(e,null,new Ut(r))}{if(!(e instanceof Xa||e instanceof N0))throw new bt(Be.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(fi.fromString(t,...n));return ape(r),new Xa(e.firestore,e instanceof N0?e.converter:null,new Ut(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n6t{constructor(){this.iu=Promise.resolve(),this.su=[],this.ou=!1,this._u=[],this.au=null,this.uu=!1,this.cu=!1,this.lu=[],this.Yo=new yDe(this,"async_queue_retry"),this.hu=()=>{const n=U9();n&&It("AsyncQueue","Visibility state changed to "+n.visibilityState),this.Yo.Wo()};const t=U9();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.hu)}get isShuttingDown(){return this.ou}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.Pu(),this.Iu(t)}enterRestrictedMode(t){if(!this.ou){this.ou=!0,this.cu=t||!1;const n=U9();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.hu)}}enqueue(t){if(this.Pu(),this.ou)return new Promise(()=>{});const n=new cm;return this.Iu(()=>this.ou&&this.cu?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.su.push(t),this.Tu()))}async Tu(){if(this.su.length!==0){try{await this.su[0](),this.su.shift(),this.Yo.reset()}catch(t){if(!rR(t))throw t;It("AsyncQueue","Operation failed with retryable error: "+t)}this.su.length>0&&this.Yo.$o(()=>this.Tu())}}Iu(t){const n=this.iu.then(()=>(this.uu=!0,t().catch(r=>{this.au=r,this.uu=!1;const i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw Fm("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.uu=!1,r))));return this.iu=n,n}enqueueAfterDelay(t,n,r){this.Pu(),this.lu.indexOf(t)>-1&&(n=0);const i=EZ.createAndSchedule(this,t,n,r,s=>this.Eu(s));return this._u.push(i),i}Pu(){this.au&&an()}verifyOperationInProgress(){}async du(){let t;do t=this.iu,await t;while(t!==this.iu)}Au(t){for(const n of this._u)if(n.timerId===t)return!0;return!1}Ru(t){return this.du().then(()=>{this._u.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this._u)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.du()})}Vu(t){this.lu.push(t)}Eu(t){const n=this._u.indexOf(t);this._u.splice(n,1)}}class Gy extends AZ{constructor(t,n,r,i){super(t,n,r,i),this.type="firestore",this._queue=function(){return new n6t}(),this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||UDe(this),this._firestoreClient.terminate()}}function r6t(e,t,n){n||(n="(default)");const r=LS(e,"firestore");if(r.isInitialized(n)){const i=r.getImmediate({identifier:n}),s=r.getOptions(n);if(yI(s,t))return i;throw new bt(Be.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(t.cacheSizeBytes!==void 0&&t.localCache!==void 0)throw new bt(Be.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(t.cacheSizeBytes!==void 0&&t.cacheSizeBytes!==-1&&t.cacheSizeBytes<1048576)throw new bt(Be.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return r.initialize({options:t,instanceIdentifier:n})}function lR(e){return e._firestoreClient||UDe(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function UDe(e){var t,n,r;const i=e._freezeSettings(),s=function(a,u,l,c){return new D$t(a,u,l,c.host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,jDe(c.experimentalLongPollingOptions),c.useFetchStreams)}(e._databaseId,((t=e._app)===null||t===void 0?void 0:t.options.appId)||"",e._persistenceKey,i);e._firestoreClient=new GLt(e._authCredentials,e._appCheckCredentials,e._queue,s),!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function i6t(e){return JLt(lR(e=ed(e,Gy)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _x{constructor(t){this._byteString=t}static fromBase64String(t){try{return new _x(Ea.fromBase64String(t))}catch(n){throw new bt(Be.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new _x(Ea.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cR{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new bt(Be.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Io(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V4{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let IZ=class{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new bt(Be.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new bt(Be.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return vr(this._lat,t._lat)||vr(this._long,t._long)}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s6t=/^__.*__$/;class o6t{constructor(t,n,r){this.data=t,this.fieldMask=n,this.fieldTransforms=r}toMutation(t,n){return this.fieldMask!==null?new Wy(t,this.data,this.fieldMask,n,this.fieldTransforms):new iR(t,this.data,n,this.fieldTransforms)}}class zDe{constructor(t,n,r){this.data=t,this.fieldMask=n,this.fieldTransforms=r}toMutation(t,n){return new Wy(t,this.data,this.fieldMask,n,this.fieldTransforms)}}function VDe(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw an()}}class kZ{constructor(t,n,r,i,s,o){this.settings=t,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.mu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get fu(){return this.settings.fu}gu(t){return new kZ(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}pu(t){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(t),i=this.gu({path:r,yu:!1});return i.wu(t),i}Su(t){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(t),i=this.gu({path:r,yu:!1});return i.mu(),i}bu(t){return this.gu({path:void 0,yu:!0})}Du(t){return sM(t,this.settings.methodName,this.settings.Cu||!1,this.path,this.settings.vu)}contains(t){return this.fieldMask.find(n=>t.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>t.isPrefixOf(n.field))!==void 0}mu(){if(this.path)for(let t=0;t<this.path.length;t++)this.wu(this.path.get(t))}wu(t){if(t.length===0)throw this.Du("Document fields must not be empty");if(VDe(this.fu)&&s6t.test(t))throw this.Du('Document fields cannot begin and end with "__"')}}class a6t{constructor(t,n,r){this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=r||B4(t)}Fu(t,n,r,i=!1){return new kZ({fu:t,methodName:n,vu:r,path:Io.emptyPath(),yu:!1,Cu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function H4(e){const t=e._freezeSettings(),n=B4(e._databaseId);return new a6t(e._databaseId,!!t.ignoreUndefinedProperties,n)}function HDe(e,t,n,r,i,s={}){const o=e.Fu(s.merge||s.mergeFields?2:0,t,n,i);NZ("Data must be an object, but it was:",o,r);const a=GDe(r,o);let u,l;if(s.merge)u=new Il(o.fieldMask),l=o.fieldTransforms;else if(s.mergeFields){const c=[];for(const f of s.mergeFields){const d=tH(t,f,n);if(!o.contains(d))throw new bt(Be.INVALID_ARGUMENT,`Field '${d}' is specified in your field mask but missing from your input data.`);KDe(c,d)||c.push(d)}u=new Il(c),l=o.fieldTransforms.filter(f=>u.covers(f.field))}else u=null,l=o.fieldTransforms;return new o6t(new Pu(a),u,l)}class q4 extends V4{_toFieldTransform(t){if(t.fu!==2)throw t.fu===1?t.Du(`${this._methodName}() can only appear at the top level of your update data`):t.Du(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof q4}}class RZ extends V4{_toFieldTransform(t){return new rMt(t.path,new CI)}isEqual(t){return t instanceof RZ}}function qDe(e,t,n,r){const i=e.Fu(1,t,n);NZ("Data must be an object, but it was:",i,r);const s=[],o=Pu.empty();e_(r,(u,l)=>{const c=PZ(t,u,n);l=si(l);const f=i.Su(c);if(l instanceof q4)s.push(c);else{const d=fR(l,f);d!=null&&(s.push(c),o.set(c,d))}});const a=new Il(s);return new zDe(o,a,i.fieldTransforms)}function WDe(e,t,n,r,i,s){const o=e.Fu(1,t,n),a=[tH(t,r,n)],u=[i];if(s.length%2!=0)throw new bt(Be.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let d=0;d<s.length;d+=2)a.push(tH(t,s[d])),u.push(s[d+1]);const l=[],c=Pu.empty();for(let d=a.length-1;d>=0;--d)if(!KDe(l,a[d])){const h=a[d];let p=u[d];p=si(p);const m=o.Su(h);if(p instanceof q4)l.push(h);else{const g=fR(p,m);g!=null&&(l.push(h),c.set(h,g))}}const f=new Il(l);return new zDe(c,f,o.fieldTransforms)}function u6t(e,t,n,r=!1){return fR(n,e.Fu(r?4:3,t))}function fR(e,t){if(YDe(e=si(e)))return NZ("Unsupported field value:",t,e),GDe(e,t);if(e instanceof V4)return function(r,i){if(!VDe(i.fu))throw i.Du(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Du(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.yu&&t.fu!==4)throw t.Du("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let u=fR(a,i.bu(o));u==null&&(u={nullValue:"NULL_VALUE"}),s.push(u),o++}return{arrayValue:{values:s}}}(e,t)}return function(r,i){if((r=si(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return eMt(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=Ls.fromDate(r);return{timestampValue:rM(i.serializer,s)}}if(r instanceof Ls){const s=new Ls(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:rM(i.serializer,s)}}if(r instanceof IZ)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof _x)return{bytesValue:uDe(i.serializer,r._byteString)};if(r instanceof Xa){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Du(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:pZ(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.Du(`Unsupported field value: ${z4(r)}`)}(e,t)}function GDe(e,t){const n={};return MPe(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):e_(e,(r,i)=>{const s=fR(i,t.pu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function YDe(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof Ls||e instanceof IZ||e instanceof _x||e instanceof Xa||e instanceof V4)}function NZ(e,t,n){if(!YDe(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=z4(n);throw r==="an object"?t.Du(e+" a custom object"):t.Du(e+" "+r)}}function tH(e,t,n){if((t=si(t))instanceof cR)return t._internalPath;if(typeof t=="string")return PZ(e,t);throw sM("Field path arguments must be of type string or ",e,!1,void 0,n)}const l6t=new RegExp("[~\\*/\\[\\]]");function PZ(e,t,n){if(t.search(l6t)>=0)throw sM(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new cR(...t.split("."))._internalPath}catch{throw sM(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function sM(e,t,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${t}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new bt(Be.INVALID_ARGUMENT,a+e+u)}function KDe(e,t){return e.some(n=>n.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XDe{constructor(t,n,r,i,s){this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Xa(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new c6t(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const n=this._document.data.field(W4("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}}class c6t extends XDe{data(){return super.data()}}function W4(e,t){return typeof t=="string"?PZ(e,t):t instanceof cR?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f6t(e){if(e.limitType==="L"&&e.explicitOrderBy.length===0)throw new bt(Be.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class DZ{}class QDe extends DZ{}function cpe(e,t,...n){let r=[];t instanceof DZ&&r.push(t),r=r.concat(n),function(s){const o=s.filter(u=>u instanceof OZ).length,a=s.filter(u=>u instanceof G4).length;if(o>1||o>0&&a>0)throw new bt(Be.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)e=i._apply(e);return e}class G4 extends QDe{constructor(t,n,r){super(),this._field=t,this._op=n,this._value=r,this.type="where"}static _create(t,n,r){return new G4(t,n,r)}_apply(t){const n=this._parse(t);return JDe(t._query,n),new n_(t.firestore,t.converter,WV(t._query,n))}_parse(t){const n=H4(t.firestore);return function(s,o,a,u,l,c,f){let d;if(l.isKeyField()){if(c==="array-contains"||c==="array-contains-any")throw new bt(Be.INVALID_ARGUMENT,`Invalid Query. You can't perform '${c}' queries on documentId().`);if(c==="in"||c==="not-in"){dpe(f,c);const h=[];for(const p of f)h.push(fpe(u,s,p));d={arrayValue:{values:h}}}else d=fpe(u,s,f)}else c!=="in"&&c!=="not-in"&&c!=="array-contains-any"||dpe(f,c),d=u6t(a,o,f,c==="in"||c==="not-in");return Es.create(l,c,d)}(t._query,"where",n,t.firestore._databaseId,this._field,this._op,this._value)}}function d6t(e,t,n){const r=t,i=W4("where",e);return G4._create(i,r,n)}class OZ extends DZ{constructor(t,n){super(),this.type=t,this._queryConstraints=n}static _create(t,n){return new OZ(t,n)}_parse(t){const n=this._queryConstraints.map(r=>r._parse(t)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Zf.create(n,this._getOperator())}_apply(t){const n=this._parse(t);return n.getFilters().length===0?t:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const u of a)JDe(o,u),o=WV(o,u)}(t._query,n),new n_(t.firestore,t.converter,WV(t._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class $Z extends QDe{constructor(t,n){super(),this._field=t,this._direction=n,this.type="orderBy"}static _create(t,n){return new $Z(t,n)}_apply(t){const n=function(i,s,o){if(i.startAt!==null)throw new bt(Be.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new bt(Be.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new TI(s,o)}(t._query,this._field,this._direction);return new n_(t.firestore,t.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new BS(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(t._query,n))}}function h6t(e,t="asc"){const n=t,r=W4("orderBy",e);return $Z._create(r,n)}function fpe(e,t,n){if(typeof(n=si(n))=="string"){if(n==="")throw new bt(Be.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!qPe(t)&&n.indexOf("/")!==-1)throw new bt(Be.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=t.path.child(fi.fromString(n));if(!Ut.isDocumentKey(r))throw new bt(Be.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Dhe(e,new Ut(r))}if(n instanceof Xa)return Dhe(e,n._key);throw new bt(Be.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${z4(n)}.`)}function dpe(e,t){if(!Array.isArray(e)||e.length===0)throw new bt(Be.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function JDe(e,t){const n=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(e.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(n!==null)throw n===t.op?new bt(Be.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new bt(Be.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}class p6t{convertValue(t,n="none"){switch(cb(t)){case 0:return null;case 1:return t.booleanValue;case 2:return _s(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(lb(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 10:return this.convertObject(t.mapValue,n);default:throw an()}}convertObject(t,n){return this.convertObjectMap(t.fields,n)}convertObjectMap(t,n="none"){const r={};return e_(t,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertGeoPoint(t){return new IZ(_s(t.latitude),_s(t.longitude))}convertArray(t,n){return(t.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(t,n){switch(n){case"previous":const r=aZ(t);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(EI(t));default:return null}}convertTimestamp(t){const n=cy(t);return new Ls(n.seconds,n.nanos)}convertDocumentKey(t,n){const r=fi.fromString(t);ii(pDe(r));const i=new xI(r.get(1),r.get(3)),s=new Ut(r.popFirst(5));return i.isEqual(n)||Fm(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZDe(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H2{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class eOe extends XDe{constructor(t,n,r,i,s,o){super(t,n,r,i,o),this._firestore=t,this._firestoreImpl=t,this.metadata=s}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const n=new GD(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){const r=this._document.data.field(W4("DocumentSnapshot.get",t));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class GD extends eOe{data(t={}){return super.data(t)}}class m6t{constructor(t,n,r,i){this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new H2(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const t=[];return this.forEach(n=>t.push(n)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,n){this._snapshot.docs.forEach(r=>{t.call(n,new GD(this._firestore,this._userDataWriter,r.key,r,new H2(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new bt(Be.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const u=new GD(i._firestore,i._userDataWriter,a.doc.key,a.doc,new H2(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const u=new GD(i._firestore,i._userDataWriter,a.doc.key,a.doc,new H2(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let l=-1,c=-1;return a.type!==0&&(l=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),c=o.indexOf(a.doc.key)),{type:g6t(a.type),doc:u,oldIndex:l,newIndex:c}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function g6t(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return an()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V9(e){e=ed(e,Xa);const t=ed(e.firestore,Gy);return ZLt(lR(t),e._key).then(n=>b6t(t,e,n))}class tOe extends p6t{constructor(t){super(),this.firestore=t}convertBytes(t){return new _x(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new Xa(this.firestore,null,n)}}function WT(e){e=ed(e,n_);const t=ed(e.firestore,Gy),n=lR(t),r=new tOe(t);return f6t(e._query),e6t(n,e._query).then(i=>new m6t(t,r,e,i))}function yu(e,t,n){e=ed(e,Xa);const r=ed(e.firestore,Gy),i=ZDe(e.converter,t,n);return Y4(r,[HDe(H4(r),"setDoc",e._key,i,e.converter!==null,n).toMutation(e._key,Gu.none())])}function y6t(e,t,n,...r){e=ed(e,Xa);const i=ed(e.firestore,Gy),s=H4(i);let o;return o=typeof(t=si(t))=="string"||t instanceof cR?WDe(s,"updateDoc",e._key,t,n,r):qDe(s,"updateDoc",e._key,t),Y4(i,[o.toMutation(e._key,Gu.exists(!0))])}function v6t(e){return Y4(ed(e.firestore,Gy),[new F4(e._key,Gu.none())])}function Y4(e,t){return function(r,i){const s=new cm;return r.asyncQueue.enqueueAndForget(async()=>FLt(await QLt(r),i,s)),s.promise}(lR(e),t)}function b6t(e,t,n){const r=n.docs.get(t._key),i=new tOe(e);return new eOe(e,i,t._key,r,new H2(n.hasPendingWrites,n.fromCache),t.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _6t{constructor(t,n){this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=H4(t)}set(t,n,r){this._verifyNotCommitted();const i=H9(t,this._firestore),s=ZDe(i.converter,n,r),o=HDe(this._dataReader,"WriteBatch.set",i._key,s,i.converter!==null,r);return this._mutations.push(o.toMutation(i._key,Gu.none())),this}update(t,n,r,...i){this._verifyNotCommitted();const s=H9(t,this._firestore);let o;return o=typeof(n=si(n))=="string"||n instanceof cR?WDe(this._dataReader,"WriteBatch.update",s._key,n,r,i):qDe(this._dataReader,"WriteBatch.update",s._key,n),this._mutations.push(o.toMutation(s._key,Gu.exists(!0))),this}delete(t){this._verifyNotCommitted();const n=H9(t,this._firestore);return this._mutations=this._mutations.concat(new F4(n._key,Gu.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new bt(Be.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function H9(e,t){if((e=si(e)).firestore!==t)throw new bt(Be.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}function w6t(){return new RZ("serverTimestamp")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hpe(e){return lR(e=ed(e,Gy)),new _6t(e,t=>Y4(e,t))}(function(t,n=!0){(function(i){jS=i})(Zb),Mm(new $h("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new Gy(new v$t(r.getProvider("auth-internal")),new E$t(r.getProvider("app-check-internal")),function(l,c){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new bt(Be.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new xI(l.options.projectId,c)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),Vf(khe,"4.6.3",t),Vf(khe,"4.6.3","esm2017")})();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nH=new Map,nOe={activated:!1,tokenObservers:[]},E6t={initialized:!1,enabled:!1};function Fs(e){return nH.get(e)||Object.assign({},nOe)}function x6t(e,t){return nH.set(e,t),nH.get(e)}function K4(){return E6t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rOe="https://content-firebaseappcheck.googleapis.com/v1",S6t="exchangeRecaptchaV3Token",T6t="exchangeDebugToken",ppe={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},C6t=24*60*60*1e3;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A6t{constructor(t,n,r,i,s){if(this.operation=t,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=i,i>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}async process(t){this.stop();try{this.pending=new gI,this.pending.promise.catch(n=>{}),await I6t(this.getNextRun(t)),this.pending.resolve(),await this.pending.promise,this.pending=new gI,this.pending.promise.catch(n=>{}),await this.operation(),this.pending.resolve(),await this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}}getNextRun(t){if(t)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}}function I6t(e){return new Promise(t=>{setTimeout(t,e)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k6t={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},ju=new MS("appCheck","AppCheck",k6t);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mpe(e=!1){var t;return e?(t=self.grecaptcha)===null||t===void 0?void 0:t.enterprise:self.grecaptcha}function MZ(e){if(!Fs(e).activated)throw ju.create("use-before-activation",{appName:e.name})}function iOe(e){const t=Math.round(e/1e3),n=Math.floor(t/(3600*24)),r=Math.floor((t-n*3600*24)/3600),i=Math.floor((t-n*3600*24-r*3600)/60),s=t-n*3600*24-r*3600-i*60;let o="";return n&&(o+=_P(n)+"d:"),r&&(o+=_P(r)+"h:"),o+=_P(i)+"m:"+_P(s)+"s",o}function _P(e){return e===0?"00":e>=10?e.toString():"0"+e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LZ({url:e,body:t},n){const r={"Content-Type":"application/json"},i=n.getImmediate({optional:!0});if(i){const f=await i.getHeartbeatsHeader();f&&(r["X-Firebase-Client"]=f)}const s={method:"POST",body:JSON.stringify(t),headers:r};let o;try{o=await fetch(e,s)}catch(f){throw ju.create("fetch-network-error",{originalErrorMessage:f==null?void 0:f.message})}if(o.status!==200)throw ju.create("fetch-status-error",{httpStatus:o.status});let a;try{a=await o.json()}catch(f){throw ju.create("fetch-parse-error",{originalErrorMessage:f==null?void 0:f.message})}const u=a.ttl.match(/^([\d.]+)(s)$/);if(!u||!u[2]||isNaN(Number(u[1])))throw ju.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${a.ttl}`});const l=Number(u[1])*1e3,c=Date.now();return{token:a.token,expireTimeMillis:c+l,issuedAtTimeMillis:c}}function R6t(e,t){const{projectId:n,appId:r,apiKey:i}=e.options;return{url:`${rOe}/projects/${n}/apps/${r}:${S6t}?key=${i}`,body:{recaptcha_v3_token:t}}}function sOe(e,t){const{projectId:n,appId:r,apiKey:i}=e.options;return{url:`${rOe}/projects/${n}/apps/${r}:${T6t}?key=${i}`,body:{debug_token:t}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N6t="firebase-app-check-database",P6t=1,kI="firebase-app-check-store",oOe="debug-token";let wP=null;function aOe(){return wP||(wP=new Promise((e,t)=>{try{const n=indexedDB.open(N6t,P6t);n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{var i;t(ju.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},n.onupgradeneeded=r=>{const i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(kI,{keyPath:"compositeKey"})}}}catch(n){t(ju.create("storage-open",{originalErrorMessage:n==null?void 0:n.message}))}}),wP)}function D6t(e){return lOe(cOe(e))}function O6t(e,t){return uOe(cOe(e),t)}function $6t(e){return uOe(oOe,e)}function M6t(){return lOe(oOe)}async function uOe(e,t){const r=(await aOe()).transaction(kI,"readwrite"),s=r.objectStore(kI).put({compositeKey:e,value:t});return new Promise((o,a)=>{s.onsuccess=u=>{o()},r.onerror=u=>{var l;a(ju.create("storage-set",{originalErrorMessage:(l=u.target.error)===null||l===void 0?void 0:l.message}))}})}async function lOe(e){const n=(await aOe()).transaction(kI,"readonly"),i=n.objectStore(kI).get(e);return new Promise((s,o)=>{i.onsuccess=a=>{const u=a.target.result;s(u?u.value:void 0)},n.onerror=a=>{var u;o(ju.create("storage-get",{originalErrorMessage:(u=a.target.error)===null||u===void 0?void 0:u.message}))}})}function cOe(e){return`${e.options.appId}-${e.name}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RI=new C4("@firebase/app-check");/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function L6t(e){if(jJ()){let t;try{t=await D6t(e)}catch(n){RI.warn(`Failed to read token from IndexedDB. Error: ${n}`)}return t}}function q9(e,t){return jJ()?O6t(e,t).catch(n=>{RI.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}async function F6t(){let e;try{e=await M6t()}catch{}if(e)return e;{const t=LNt();return $6t(t).catch(n=>RI.warn(`Failed to persist debug token to IndexedDB. Error: ${n}`)),t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FZ(){return K4().enabled}async function jZ(){const e=K4();if(e.enabled&&e.token)return e.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)}function j6t(){const e=ANe(),t=K4();if(t.initialized=!0,typeof e.FIREBASE_APPCHECK_DEBUG_TOKEN!="string"&&e.FIREBASE_APPCHECK_DEBUG_TOKEN!==!0)return;t.enabled=!0;const n=new gI;t.token=n,typeof e.FIREBASE_APPCHECK_DEBUG_TOKEN=="string"?n.resolve(e.FIREBASE_APPCHECK_DEBUG_TOKEN):n.resolve(F6t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B6t={error:"UNKNOWN_ERROR"};function U6t(e){return FJ.encodeString(JSON.stringify(e),!1)}async function rH(e,t=!1){const n=e.app;MZ(n);const r=Fs(n);let i=r.token,s;if(i&&!Ow(i)&&(r.token=void 0,i=void 0),!i){const u=await r.cachedTokenPromise;u&&(Ow(u)?i=u:await q9(n,void 0))}if(!t&&i&&Ow(i))return{token:i.token};let o=!1;if(FZ()){r.exchangeTokenPromise||(r.exchangeTokenPromise=LZ(sOe(n,await jZ()),e.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),o=!0);const u=await r.exchangeTokenPromise;return await q9(n,u),r.token=u,{token:u.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),o=!0),i=await Fs(n).exchangeTokenPromise}catch(u){u.code==="appCheck/throttled"?RI.warn(u.message):RI.error(u),s=u}let a;return i?s?Ow(i)?a={token:i.token,internalError:s}:a=ype(s):(a={token:i.token},r.token=i,await q9(n,i)):a=ype(s),o&&hOe(n,a),a}async function z6t(e){const t=e.app;MZ(t);const{provider:n}=Fs(t);if(FZ()){const r=await jZ(),{token:i}=await LZ(sOe(t,r),e.heartbeatServiceProvider);return{token:i}}else{const{token:r}=await n.getToken();return{token:r}}}function fOe(e,t,n,r){const{app:i}=e,s=Fs(i),o={next:n,error:r,type:t};if(s.tokenObservers=[...s.tokenObservers,o],s.token&&Ow(s.token)){const a=s.token;Promise.resolve().then(()=>{n({token:a.token}),gpe(e)}).catch(()=>{})}s.cachedTokenPromise.then(()=>gpe(e))}function dOe(e,t){const n=Fs(e),r=n.tokenObservers.filter(i=>i.next!==t);r.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=r}function gpe(e){const{app:t}=e,n=Fs(t);let r=n.tokenRefresher;r||(r=V6t(e),n.tokenRefresher=r),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function V6t(e){const{app:t}=e;return new A6t(async()=>{const n=Fs(t);let r;if(n.token?r=await rH(e,!0):r=await rH(e),r.error)throw r.error;if(r.internalError)throw r.internalError},()=>!0,()=>{const n=Fs(t);if(n.token){let r=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5;const i=n.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},ppe.RETRIAL_MIN_WAIT,ppe.RETRIAL_MAX_WAIT)}function hOe(e,t){const n=Fs(e).tokenObservers;for(const r of n)try{r.type==="EXTERNAL"&&t.error!=null?r.error(t.error):r.next(t)}catch{}}function Ow(e){return e.expireTimeMillis-Date.now()>0}function ype(e){return{token:U6t(B6t),error:e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H6t{constructor(t,n){this.app=t,this.heartbeatServiceProvider=n}_delete(){const{tokenObservers:t}=Fs(this.app);for(const n of t)dOe(this.app,n.next);return Promise.resolve()}}function q6t(e,t){return new H6t(e,t)}function W6t(e){return{getToken:t=>rH(e,t),getLimitedUseToken:()=>z6t(e),addTokenListener:t=>fOe(e,"INTERNAL",t),removeTokenListener:t=>dOe(e.app,t)}}const G6t="@firebase/app-check",Y6t="0.8.4";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K6t="https://www.google.com/recaptcha/api.js";function X6t(e,t){const n=new gI,r=Fs(e);r.reCAPTCHAState={initialized:n};const i=Q6t(e),s=mpe(!1);return s?vpe(e,t,s,i,n):e4t(()=>{const o=mpe(!1);if(!o)throw new Error("no recaptcha");vpe(e,t,o,i,n)}),n.promise}function vpe(e,t,n,r,i){n.ready(()=>{Z6t(e,t,n,r),i.resolve(n)})}function Q6t(e){const t=`fire_app_check_${e.name}`,n=document.createElement("div");return n.id=t,n.style.display="none",document.body.appendChild(n),t}async function J6t(e){MZ(e);const n=await Fs(e).reCAPTCHAState.initialized.promise;return new Promise((r,i)=>{const s=Fs(e).reCAPTCHAState;n.ready(()=>{r(n.execute(s.widgetId,{action:"fire_app_check"}))})})}function Z6t(e,t,n,r){const i=n.render(r,{sitekey:t,size:"invisible",callback:()=>{Fs(e).reCAPTCHAState.succeeded=!0},"error-callback":()=>{Fs(e).reCAPTCHAState.succeeded=!1}}),s=Fs(e);s.reCAPTCHAState=Object.assign(Object.assign({},s.reCAPTCHAState),{widgetId:i})}function e4t(e){const t=document.createElement("script");t.src=K6t,t.onload=e,document.head.appendChild(t)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BZ{constructor(t){this._siteKey=t,this._throttleData=null}async getToken(){var t,n,r;n4t(this._throttleData);const i=await J6t(this._app).catch(o=>{throw ju.create("recaptcha-error")});if(!(!((t=Fs(this._app).reCAPTCHAState)===null||t===void 0)&&t.succeeded))throw ju.create("recaptcha-error");let s;try{s=await LZ(R6t(this._app,i),this._heartbeatServiceProvider)}catch(o){throw!((n=o.code)===null||n===void 0)&&n.includes("fetch-status-error")?(this._throttleData=t4t(Number((r=o.customData)===null||r===void 0?void 0:r.httpStatus),this._throttleData),ju.create("throttled",{time:iOe(this._throttleData.allowRequestsAfter-Date.now()),httpStatus:this._throttleData.httpStatus})):o}return this._throttleData=null,s}initialize(t){this._app=t,this._heartbeatServiceProvider=LS(t,"heartbeat"),X6t(t,this._siteKey).catch(()=>{})}isEqual(t){return t instanceof BZ?this._siteKey===t._siteKey:!1}}function t4t(e,t){if(e===404||e===403)return{backoffCount:1,allowRequestsAfter:Date.now()+C6t,httpStatus:e};{const n=t?t.backoffCount:0,r=zNt(n,1e3,2);return{backoffCount:n+1,allowRequestsAfter:Date.now()+r,httpStatus:e}}}function n4t(e){if(e&&Date.now()-e.allowRequestsAfter<=0)throw ju.create("throttled",{time:iOe(e.allowRequestsAfter-Date.now()),httpStatus:e.httpStatus})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r4t(e=UJ(),t){e=si(e);const n=LS(e,"app-check");if(K4().initialized||j6t(),FZ()&&jZ().then(i=>console.log(`App Check debug token: ${i}. You will need to add it to your app's App Check settings in the Firebase console for it to work.`)),n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(s.isTokenAutoRefreshEnabled===t.isTokenAutoRefreshEnabled&&s.provider.isEqual(t.provider))return i;throw ju.create("already-initialized",{appName:e.name})}const r=n.initialize({options:t});return i4t(e,t.provider,t.isTokenAutoRefreshEnabled),Fs(e).isTokenAutoRefreshEnabled&&fOe(r,"INTERNAL",()=>{}),r}function i4t(e,t,n){const r=x6t(e,Object.assign({},nOe));r.activated=!0,r.provider=t,r.cachedTokenPromise=L6t(e).then(i=>(i&&Ow(i)&&(r.token=i,hOe(e,{token:i.token})),i)),r.isTokenAutoRefreshEnabled=n===void 0?e.automaticDataCollectionEnabled:n,r.provider.initialize(e)}const s4t="app-check",bpe="app-check-internal";function o4t(){Mm(new $h(s4t,e=>{const t=e.getProvider("app").getImmediate(),n=e.getProvider("heartbeat");return q6t(t,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider(bpe).initialize()})),Mm(new $h(bpe,e=>{const t=e.getProvider("app-check").getImmediate();return W6t(t)},"PUBLIC").setInstantiationMode("EXPLICIT")),Vf(G6t,Y6t)}o4t();function EP(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var pOe={exports:{}};/*!
    localForage -- Offline Storage, Improved
    Version 1.10.0
    https://localforage.github.io/localForage
    (c) 2013-2017 Mozilla, Apache License 2.0
*/(function(e,t){(function(n){e.exports=n()})(function(){return function n(r,i,s){function o(l,c){if(!i[l]){if(!r[l]){var f=typeof EP=="function"&&EP;if(!c&&f)return f(l,!0);if(a)return a(l,!0);var d=new Error("Cannot find module '"+l+"'");throw d.code="MODULE_NOT_FOUND",d}var h=i[l]={exports:{}};r[l][0].call(h.exports,function(p){var m=r[l][1][p];return o(m||p)},h,h.exports,n,r,i,s)}return i[l].exports}for(var a=typeof EP=="function"&&EP,u=0;u<s.length;u++)o(s[u]);return o}({1:[function(n,r,i){(function(s){var o=s.MutationObserver||s.WebKitMutationObserver,a;if(o){var u=0,l=new o(p),c=s.document.createTextNode("");l.observe(c,{characterData:!0}),a=function(){c.data=u=++u%2}}else if(!s.setImmediate&&typeof s.MessageChannel<"u"){var f=new s.MessageChannel;f.port1.onmessage=p,a=function(){f.port2.postMessage(0)}}else"document"in s&&"onreadystatechange"in s.document.createElement("script")?a=function(){var g=s.document.createElement("script");g.onreadystatechange=function(){p(),g.onreadystatechange=null,g.parentNode.removeChild(g),g=null},s.document.documentElement.appendChild(g)}:a=function(){setTimeout(p,0)};var d,h=[];function p(){d=!0;for(var g,y,v=h.length;v;){for(y=h,h=[],g=-1;++g<v;)y[g]();v=h.length}d=!1}r.exports=m;function m(g){h.push(g)===1&&!d&&a()}}).call(this,typeof to<"u"?to:typeof self<"u"?self:typeof window<"u"?window:{})},{}],2:[function(n,r,i){var s=n(1);function o(){}var a={},u=["REJECTED"],l=["FULFILLED"],c=["PENDING"];r.exports=f;function f(E){if(typeof E!="function")throw new TypeError("resolver must be a function");this.state=c,this.queue=[],this.outcome=void 0,E!==o&&m(this,E)}f.prototype.catch=function(E){return this.then(null,E)},f.prototype.then=function(E,S){if(typeof E!="function"&&this.state===l||typeof S!="function"&&this.state===u)return this;var T=new this.constructor(o);if(this.state!==c){var C=this.state===l?E:S;h(T,C,this.outcome)}else this.queue.push(new d(T,E,S));return T};function d(E,S,T){this.promise=E,typeof S=="function"&&(this.onFulfilled=S,this.callFulfilled=this.otherCallFulfilled),typeof T=="function"&&(this.onRejected=T,this.callRejected=this.otherCallRejected)}d.prototype.callFulfilled=function(E){a.resolve(this.promise,E)},d.prototype.otherCallFulfilled=function(E){h(this.promise,this.onFulfilled,E)},d.prototype.callRejected=function(E){a.reject(this.promise,E)},d.prototype.otherCallRejected=function(E){h(this.promise,this.onRejected,E)};function h(E,S,T){s(function(){var C;try{C=S(T)}catch(A){return a.reject(E,A)}C===E?a.reject(E,new TypeError("Cannot resolve promise with itself")):a.resolve(E,C)})}a.resolve=function(E,S){var T=g(p,S);if(T.status==="error")return a.reject(E,T.value);var C=T.value;if(C)m(E,C);else{E.state=l,E.outcome=S;for(var A=-1,k=E.queue.length;++A<k;)E.queue[A].callFulfilled(S)}return E},a.reject=function(E,S){E.state=u,E.outcome=S;for(var T=-1,C=E.queue.length;++T<C;)E.queue[T].callRejected(S);return E};function p(E){var S=E&&E.then;if(E&&(typeof E=="object"||typeof E=="function")&&typeof S=="function")return function(){S.apply(E,arguments)}}function m(E,S){var T=!1;function C(O){T||(T=!0,a.reject(E,O))}function A(O){T||(T=!0,a.resolve(E,O))}function k(){S(A,C)}var N=g(k);N.status==="error"&&C(N.value)}function g(E,S){var T={};try{T.value=E(S),T.status="success"}catch(C){T.status="error",T.value=C}return T}f.resolve=y;function y(E){return E instanceof this?E:a.resolve(new this(o),E)}f.reject=v;function v(E){var S=new this(o);return a.reject(S,E)}f.all=_;function _(E){var S=this;if(Object.prototype.toString.call(E)!=="[object Array]")return this.reject(new TypeError("must be an array"));var T=E.length,C=!1;if(!T)return this.resolve([]);for(var A=new Array(T),k=0,N=-1,O=new this(o);++N<T;)D(E[N],N);return O;function D($,F){S.resolve($).then(M,function(B){C||(C=!0,a.reject(O,B))});function M(B){A[F]=B,++k===T&&!C&&(C=!0,a.resolve(O,A))}}}f.race=w;function w(E){var S=this;if(Object.prototype.toString.call(E)!=="[object Array]")return this.reject(new TypeError("must be an array"));var T=E.length,C=!1;if(!T)return this.resolve([]);for(var A=-1,k=new this(o);++A<T;)N(E[A]);return k;function N(O){S.resolve(O).then(function(D){C||(C=!0,a.resolve(k,D))},function(D){C||(C=!0,a.reject(k,D))})}}},{1:1}],3:[function(n,r,i){(function(s){typeof s.Promise!="function"&&(s.Promise=n(2))}).call(this,typeof to<"u"?to:typeof self<"u"?self:typeof window<"u"?window:{})},{2:2}],4:[function(n,r,i){var s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Y){return typeof Y}:function(Y){return Y&&typeof Symbol=="function"&&Y.constructor===Symbol&&Y!==Symbol.prototype?"symbol":typeof Y};function o(Y,se){if(!(Y instanceof se))throw new TypeError("Cannot call a class as a function")}function a(){try{if(typeof indexedDB<"u")return indexedDB;if(typeof webkitIndexedDB<"u")return webkitIndexedDB;if(typeof mozIndexedDB<"u")return mozIndexedDB;if(typeof OIndexedDB<"u")return OIndexedDB;if(typeof msIndexedDB<"u")return msIndexedDB}catch{return}}var u=a();function l(){try{if(!u||!u.open)return!1;var Y=typeof openDatabase<"u"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),se=typeof fetch=="function"&&fetch.toString().indexOf("[native code")!==-1;return(!Y||se)&&typeof indexedDB<"u"&&typeof IDBKeyRange<"u"}catch{return!1}}function c(Y,se){Y=Y||[],se=se||{};try{return new Blob(Y,se)}catch(le){if(le.name!=="TypeError")throw le;for(var Z=typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder,fe=new Z,ye=0;ye<Y.length;ye+=1)fe.append(Y[ye]);return fe.getBlob(se.type)}}typeof Promise>"u"&&n(3);var f=Promise;function d(Y,se){se&&Y.then(function(Z){se(null,Z)},function(Z){se(Z)})}function h(Y,se,Z){typeof se=="function"&&Y.then(se),typeof Z=="function"&&Y.catch(Z)}function p(Y){return typeof Y!="string"&&(console.warn(Y+" used as a key, but it is not a string."),Y=String(Y)),Y}function m(){if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}var g="local-forage-detect-blob-support",y=void 0,v={},_=Object.prototype.toString,w="readonly",E="readwrite";function S(Y){for(var se=Y.length,Z=new ArrayBuffer(se),fe=new Uint8Array(Z),ye=0;ye<se;ye++)fe[ye]=Y.charCodeAt(ye);return Z}function T(Y){return new f(function(se){var Z=Y.transaction(g,E),fe=c([""]);Z.objectStore(g).put(fe,"key"),Z.onabort=function(ye){ye.preventDefault(),ye.stopPropagation(),se(!1)},Z.oncomplete=function(){var ye=navigator.userAgent.match(/Chrome\/(\d+)/),le=navigator.userAgent.match(/Edge\//);se(le||!ye||parseInt(ye[1],10)>=43)}}).catch(function(){return!1})}function C(Y){return typeof y=="boolean"?f.resolve(y):T(Y).then(function(se){return y=se,y})}function A(Y){var se=v[Y.name],Z={};Z.promise=new f(function(fe,ye){Z.resolve=fe,Z.reject=ye}),se.deferredOperations.push(Z),se.dbReady?se.dbReady=se.dbReady.then(function(){return Z.promise}):se.dbReady=Z.promise}function k(Y){var se=v[Y.name],Z=se.deferredOperations.pop();if(Z)return Z.resolve(),Z.promise}function N(Y,se){var Z=v[Y.name],fe=Z.deferredOperations.pop();if(fe)return fe.reject(se),fe.promise}function O(Y,se){return new f(function(Z,fe){if(v[Y.name]=v[Y.name]||W(),Y.db)if(se)A(Y),Y.db.close();else return Z(Y.db);var ye=[Y.name];se&&ye.push(Y.version);var le=u.open.apply(u,ye);se&&(le.onupgradeneeded=function(Oe){var Ve=le.result;try{Ve.createObjectStore(Y.storeName),Oe.oldVersion<=1&&Ve.createObjectStore(g)}catch(qe){if(qe.name==="ConstraintError")console.warn('The database "'+Y.name+'" has been upgraded from version '+Oe.oldVersion+" to version "+Oe.newVersion+', but the storage "'+Y.storeName+'" already exists.');else throw qe}}),le.onerror=function(Oe){Oe.preventDefault(),fe(le.error)},le.onsuccess=function(){var Oe=le.result;Oe.onversionchange=function(Ve){Ve.target.close()},Z(Oe),k(Y)}})}function D(Y){return O(Y,!1)}function $(Y){return O(Y,!0)}function F(Y,se){if(!Y.db)return!0;var Z=!Y.db.objectStoreNames.contains(Y.storeName),fe=Y.version<Y.db.version,ye=Y.version>Y.db.version;if(fe&&(Y.version!==se&&console.warn('The database "'+Y.name+`" can't be downgraded from version `+Y.db.version+" to version "+Y.version+"."),Y.version=Y.db.version),ye||Z){if(Z){var le=Y.db.version+1;le>Y.version&&(Y.version=le)}return!0}return!1}function M(Y){return new f(function(se,Z){var fe=new FileReader;fe.onerror=Z,fe.onloadend=function(ye){var le=btoa(ye.target.result||"");se({__local_forage_encoded_blob:!0,data:le,type:Y.type})},fe.readAsBinaryString(Y)})}function B(Y){var se=S(atob(Y.data));return c([se],{type:Y.type})}function U(Y){return Y&&Y.__local_forage_encoded_blob}function H(Y){var se=this,Z=se._initReady().then(function(){var fe=v[se._dbInfo.name];if(fe&&fe.dbReady)return fe.dbReady});return h(Z,Y,Y),Z}function P(Y){A(Y);for(var se=v[Y.name],Z=se.forages,fe=0;fe<Z.length;fe++){var ye=Z[fe];ye._dbInfo.db&&(ye._dbInfo.db.close(),ye._dbInfo.db=null)}return Y.db=null,D(Y).then(function(le){return Y.db=le,F(Y)?$(Y):le}).then(function(le){Y.db=se.db=le;for(var Oe=0;Oe<Z.length;Oe++)Z[Oe]._dbInfo.db=le}).catch(function(le){throw N(Y,le),le})}function z(Y,se,Z,fe){fe===void 0&&(fe=1);try{var ye=Y.db.transaction(Y.storeName,se);Z(null,ye)}catch(le){if(fe>0&&(!Y.db||le.name==="InvalidStateError"||le.name==="NotFoundError"))return f.resolve().then(function(){if(!Y.db||le.name==="NotFoundError"&&!Y.db.objectStoreNames.contains(Y.storeName)&&Y.version<=Y.db.version)return Y.db&&(Y.version=Y.db.version+1),$(Y)}).then(function(){return P(Y).then(function(){z(Y,se,Z,fe-1)})}).catch(Z);Z(le)}}function W(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function j(Y){var se=this,Z={db:null};if(Y)for(var fe in Y)Z[fe]=Y[fe];var ye=v[Z.name];ye||(ye=W(),v[Z.name]=ye),ye.forages.push(se),se._initReady||(se._initReady=se.ready,se.ready=H);var le=[];function Oe(){return f.resolve()}for(var Ve=0;Ve<ye.forages.length;Ve++){var qe=ye.forages[Ve];qe!==se&&le.push(qe._initReady().catch(Oe))}var Ge=ye.forages.slice(0);return f.all(le).then(function(){return Z.db=ye.db,D(Z)}).then(function(st){return Z.db=st,F(Z,se._defaultConfig.version)?$(Z):st}).then(function(st){Z.db=ye.db=st,se._dbInfo=Z;for(var Et=0;Et<Ge.length;Et++){var mn=Ge[Et];mn!==se&&(mn._dbInfo.db=Z.db,mn._dbInfo.version=Z.version)}})}function q(Y,se){var Z=this;Y=p(Y);var fe=new f(function(ye,le){Z.ready().then(function(){z(Z._dbInfo,w,function(Oe,Ve){if(Oe)return le(Oe);try{var qe=Ve.objectStore(Z._dbInfo.storeName),Ge=qe.get(Y);Ge.onsuccess=function(){var st=Ge.result;st===void 0&&(st=null),U(st)&&(st=B(st)),ye(st)},Ge.onerror=function(){le(Ge.error)}}catch(st){le(st)}})}).catch(le)});return d(fe,se),fe}function G(Y,se){var Z=this,fe=new f(function(ye,le){Z.ready().then(function(){z(Z._dbInfo,w,function(Oe,Ve){if(Oe)return le(Oe);try{var qe=Ve.objectStore(Z._dbInfo.storeName),Ge=qe.openCursor(),st=1;Ge.onsuccess=function(){var Et=Ge.result;if(Et){var mn=Et.value;U(mn)&&(mn=B(mn));var Pt=Y(mn,Et.key,st++);Pt!==void 0?ye(Pt):Et.continue()}else ye()},Ge.onerror=function(){le(Ge.error)}}catch(Et){le(Et)}})}).catch(le)});return d(fe,se),fe}function ne(Y,se,Z){var fe=this;Y=p(Y);var ye=new f(function(le,Oe){var Ve;fe.ready().then(function(){return Ve=fe._dbInfo,_.call(se)==="[object Blob]"?C(Ve.db).then(function(qe){return qe?se:M(se)}):se}).then(function(qe){z(fe._dbInfo,E,function(Ge,st){if(Ge)return Oe(Ge);try{var Et=st.objectStore(fe._dbInfo.storeName);qe===null&&(qe=void 0);var mn=Et.put(qe,Y);st.oncomplete=function(){qe===void 0&&(qe=null),le(qe)},st.onabort=st.onerror=function(){var Pt=mn.error?mn.error:mn.transaction.error;Oe(Pt)}}catch(Pt){Oe(Pt)}})}).catch(Oe)});return d(ye,Z),ye}function ce(Y,se){var Z=this;Y=p(Y);var fe=new f(function(ye,le){Z.ready().then(function(){z(Z._dbInfo,E,function(Oe,Ve){if(Oe)return le(Oe);try{var qe=Ve.objectStore(Z._dbInfo.storeName),Ge=qe.delete(Y);Ve.oncomplete=function(){ye()},Ve.onerror=function(){le(Ge.error)},Ve.onabort=function(){var st=Ge.error?Ge.error:Ge.transaction.error;le(st)}}catch(st){le(st)}})}).catch(le)});return d(fe,se),fe}function de(Y){var se=this,Z=new f(function(fe,ye){se.ready().then(function(){z(se._dbInfo,E,function(le,Oe){if(le)return ye(le);try{var Ve=Oe.objectStore(se._dbInfo.storeName),qe=Ve.clear();Oe.oncomplete=function(){fe()},Oe.onabort=Oe.onerror=function(){var Ge=qe.error?qe.error:qe.transaction.error;ye(Ge)}}catch(Ge){ye(Ge)}})}).catch(ye)});return d(Z,Y),Z}function he(Y){var se=this,Z=new f(function(fe,ye){se.ready().then(function(){z(se._dbInfo,w,function(le,Oe){if(le)return ye(le);try{var Ve=Oe.objectStore(se._dbInfo.storeName),qe=Ve.count();qe.onsuccess=function(){fe(qe.result)},qe.onerror=function(){ye(qe.error)}}catch(Ge){ye(Ge)}})}).catch(ye)});return d(Z,Y),Z}function ve(Y,se){var Z=this,fe=new f(function(ye,le){if(Y<0){ye(null);return}Z.ready().then(function(){z(Z._dbInfo,w,function(Oe,Ve){if(Oe)return le(Oe);try{var qe=Ve.objectStore(Z._dbInfo.storeName),Ge=!1,st=qe.openKeyCursor();st.onsuccess=function(){var Et=st.result;if(!Et){ye(null);return}Y===0||Ge?ye(Et.key):(Ge=!0,Et.advance(Y))},st.onerror=function(){le(st.error)}}catch(Et){le(Et)}})}).catch(le)});return d(fe,se),fe}function Ie(Y){var se=this,Z=new f(function(fe,ye){se.ready().then(function(){z(se._dbInfo,w,function(le,Oe){if(le)return ye(le);try{var Ve=Oe.objectStore(se._dbInfo.storeName),qe=Ve.openKeyCursor(),Ge=[];qe.onsuccess=function(){var st=qe.result;if(!st){fe(Ge);return}Ge.push(st.key),st.continue()},qe.onerror=function(){ye(qe.error)}}catch(st){ye(st)}})}).catch(ye)});return d(Z,Y),Z}function be(Y,se){se=m.apply(this,arguments);var Z=this.config();Y=typeof Y!="function"&&Y||{},Y.name||(Y.name=Y.name||Z.name,Y.storeName=Y.storeName||Z.storeName);var fe=this,ye;if(!Y.name)ye=f.reject("Invalid arguments");else{var le=Y.name===Z.name&&fe._dbInfo.db,Oe=le?f.resolve(fe._dbInfo.db):D(Y).then(function(Ve){var qe=v[Y.name],Ge=qe.forages;qe.db=Ve;for(var st=0;st<Ge.length;st++)Ge[st]._dbInfo.db=Ve;return Ve});Y.storeName?ye=Oe.then(function(Ve){if(Ve.objectStoreNames.contains(Y.storeName)){var qe=Ve.version+1;A(Y);var Ge=v[Y.name],st=Ge.forages;Ve.close();for(var Et=0;Et<st.length;Et++){var mn=st[Et];mn._dbInfo.db=null,mn._dbInfo.version=qe}var Pt=new f(function(Bn,kr){var Rr=u.open(Y.name,qe);Rr.onerror=function(Ho){var Ed=Rr.result;Ed.close(),kr(Ho)},Rr.onupgradeneeded=function(){var Ho=Rr.result;Ho.deleteObjectStore(Y.storeName)},Rr.onsuccess=function(){var Ho=Rr.result;Ho.close(),Bn(Ho)}});return Pt.then(function(Bn){Ge.db=Bn;for(var kr=0;kr<st.length;kr++){var Rr=st[kr];Rr._dbInfo.db=Bn,k(Rr._dbInfo)}}).catch(function(Bn){throw(N(Y,Bn)||f.resolve()).catch(function(){}),Bn})}}):ye=Oe.then(function(Ve){A(Y);var qe=v[Y.name],Ge=qe.forages;Ve.close();for(var st=0;st<Ge.length;st++){var Et=Ge[st];Et._dbInfo.db=null}var mn=new f(function(Pt,Bn){var kr=u.deleteDatabase(Y.name);kr.onerror=function(){var Rr=kr.result;Rr&&Rr.close(),Bn(kr.error)},kr.onblocked=function(){console.warn('dropInstance blocked for database "'+Y.name+'" until all open connections are closed')},kr.onsuccess=function(){var Rr=kr.result;Rr&&Rr.close(),Pt(Rr)}});return mn.then(function(Pt){qe.db=Pt;for(var Bn=0;Bn<Ge.length;Bn++){var kr=Ge[Bn];k(kr._dbInfo)}}).catch(function(Pt){throw(N(Y,Pt)||f.resolve()).catch(function(){}),Pt})})}return d(ye,se),ye}var Ke={_driver:"asyncStorage",_initStorage:j,_support:l(),iterate:G,getItem:q,setItem:ne,removeItem:ce,clear:de,length:he,key:ve,keys:Ie,dropInstance:be};function Ue(){return typeof openDatabase=="function"}var yt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",it="~~local_forage_type~",_e=/^~~local_forage_type~([^~]+)~/,ke="__lfsc__:",ze=ke.length,ct="arbf",Ot="blob",We="si08",ge="ui08",ht="uic8",vt="si16",me="si32",Ae="ur16",He="ui32",ut="fl32",_t="fl64",Ln=ze+ct.length,Cr=Object.prototype.toString;function Fn(Y){var se=Y.length*.75,Z=Y.length,fe,ye=0,le,Oe,Ve,qe;Y[Y.length-1]==="="&&(se--,Y[Y.length-2]==="="&&se--);var Ge=new ArrayBuffer(se),st=new Uint8Array(Ge);for(fe=0;fe<Z;fe+=4)le=yt.indexOf(Y[fe]),Oe=yt.indexOf(Y[fe+1]),Ve=yt.indexOf(Y[fe+2]),qe=yt.indexOf(Y[fe+3]),st[ye++]=le<<2|Oe>>4,st[ye++]=(Oe&15)<<4|Ve>>2,st[ye++]=(Ve&3)<<6|qe&63;return Ge}function cr(Y){var se=new Uint8Array(Y),Z="",fe;for(fe=0;fe<se.length;fe+=3)Z+=yt[se[fe]>>2],Z+=yt[(se[fe]&3)<<4|se[fe+1]>>4],Z+=yt[(se[fe+1]&15)<<2|se[fe+2]>>6],Z+=yt[se[fe+2]&63];return se.length%3===2?Z=Z.substring(0,Z.length-1)+"=":se.length%3===1&&(Z=Z.substring(0,Z.length-2)+"=="),Z}function gn(Y,se){var Z="";if(Y&&(Z=Cr.call(Y)),Y&&(Z==="[object ArrayBuffer]"||Y.buffer&&Cr.call(Y.buffer)==="[object ArrayBuffer]")){var fe,ye=ke;Y instanceof ArrayBuffer?(fe=Y,ye+=ct):(fe=Y.buffer,Z==="[object Int8Array]"?ye+=We:Z==="[object Uint8Array]"?ye+=ge:Z==="[object Uint8ClampedArray]"?ye+=ht:Z==="[object Int16Array]"?ye+=vt:Z==="[object Uint16Array]"?ye+=Ae:Z==="[object Int32Array]"?ye+=me:Z==="[object Uint32Array]"?ye+=He:Z==="[object Float32Array]"?ye+=ut:Z==="[object Float64Array]"?ye+=_t:se(new Error("Failed to get type for BinaryArray"))),se(ye+cr(fe))}else if(Z==="[object Blob]"){var le=new FileReader;le.onload=function(){var Oe=it+Y.type+"~"+cr(this.result);se(ke+Ot+Oe)},le.readAsArrayBuffer(Y)}else try{se(JSON.stringify(Y))}catch(Oe){console.error("Couldn't convert value into a JSON string: ",Y),se(null,Oe)}}function An(Y){if(Y.substring(0,ze)!==ke)return JSON.parse(Y);var se=Y.substring(Ln),Z=Y.substring(ze,Ln),fe;if(Z===Ot&&_e.test(se)){var ye=se.match(_e);fe=ye[1],se=se.substring(ye[0].length)}var le=Fn(se);switch(Z){case ct:return le;case Ot:return c([le],{type:fe});case We:return new Int8Array(le);case ge:return new Uint8Array(le);case ht:return new Uint8ClampedArray(le);case vt:return new Int16Array(le);case Ae:return new Uint16Array(le);case me:return new Int32Array(le);case He:return new Uint32Array(le);case ut:return new Float32Array(le);case _t:return new Float64Array(le);default:throw new Error("Unkown type: "+Z)}}var nr={serialize:gn,deserialize:An,stringToBuffer:Fn,bufferToString:cr};function rr(Y,se,Z,fe){Y.executeSql("CREATE TABLE IF NOT EXISTS "+se.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],Z,fe)}function zo(Y){var se=this,Z={db:null};if(Y)for(var fe in Y)Z[fe]=typeof Y[fe]!="string"?Y[fe].toString():Y[fe];var ye=new f(function(le,Oe){try{Z.db=openDatabase(Z.name,String(Z.version),Z.description,Z.size)}catch(Ve){return Oe(Ve)}Z.db.transaction(function(Ve){rr(Ve,Z,function(){se._dbInfo=Z,le()},function(qe,Ge){Oe(Ge)})},Oe)});return Z.serializer=nr,ye}function $i(Y,se,Z,fe,ye,le){Y.executeSql(Z,fe,ye,function(Oe,Ve){Ve.code===Ve.SYNTAX_ERR?Oe.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[se.storeName],function(qe,Ge){Ge.rows.length?le(qe,Ve):rr(qe,se,function(){qe.executeSql(Z,fe,ye,le)},le)},le):le(Oe,Ve)},le)}function In(Y,se){var Z=this;Y=p(Y);var fe=new f(function(ye,le){Z.ready().then(function(){var Oe=Z._dbInfo;Oe.db.transaction(function(Ve){$i(Ve,Oe,"SELECT * FROM "+Oe.storeName+" WHERE key = ? LIMIT 1",[Y],function(qe,Ge){var st=Ge.rows.length?Ge.rows.item(0).value:null;st&&(st=Oe.serializer.deserialize(st)),ye(st)},function(qe,Ge){le(Ge)})})}).catch(le)});return d(fe,se),fe}function Mi(Y,se){var Z=this,fe=new f(function(ye,le){Z.ready().then(function(){var Oe=Z._dbInfo;Oe.db.transaction(function(Ve){$i(Ve,Oe,"SELECT * FROM "+Oe.storeName,[],function(qe,Ge){for(var st=Ge.rows,Et=st.length,mn=0;mn<Et;mn++){var Pt=st.item(mn),Bn=Pt.value;if(Bn&&(Bn=Oe.serializer.deserialize(Bn)),Bn=Y(Bn,Pt.key,mn+1),Bn!==void 0){ye(Bn);return}}ye()},function(qe,Ge){le(Ge)})})}).catch(le)});return d(fe,se),fe}function Ar(Y,se,Z,fe){var ye=this;Y=p(Y);var le=new f(function(Oe,Ve){ye.ready().then(function(){se===void 0&&(se=null);var qe=se,Ge=ye._dbInfo;Ge.serializer.serialize(se,function(st,Et){Et?Ve(Et):Ge.db.transaction(function(mn){$i(mn,Ge,"INSERT OR REPLACE INTO "+Ge.storeName+" (key, value) VALUES (?, ?)",[Y,st],function(){Oe(qe)},function(Pt,Bn){Ve(Bn)})},function(mn){if(mn.code===mn.QUOTA_ERR){if(fe>0){Oe(Ar.apply(ye,[Y,qe,Z,fe-1]));return}Ve(mn)}})})}).catch(Ve)});return d(le,Z),le}function gs(Y,se,Z){return Ar.apply(this,[Y,se,Z,1])}function pp(Y,se){var Z=this;Y=p(Y);var fe=new f(function(ye,le){Z.ready().then(function(){var Oe=Z._dbInfo;Oe.db.transaction(function(Ve){$i(Ve,Oe,"DELETE FROM "+Oe.storeName+" WHERE key = ?",[Y],function(){ye()},function(qe,Ge){le(Ge)})})}).catch(le)});return d(fe,se),fe}function fl(Y){var se=this,Z=new f(function(fe,ye){se.ready().then(function(){var le=se._dbInfo;le.db.transaction(function(Oe){$i(Oe,le,"DELETE FROM "+le.storeName,[],function(){fe()},function(Ve,qe){ye(qe)})})}).catch(ye)});return d(Z,Y),Z}function _d(Y){var se=this,Z=new f(function(fe,ye){se.ready().then(function(){var le=se._dbInfo;le.db.transaction(function(Oe){$i(Oe,le,"SELECT COUNT(key) as c FROM "+le.storeName,[],function(Ve,qe){var Ge=qe.rows.item(0).c;fe(Ge)},function(Ve,qe){ye(qe)})})}).catch(ye)});return d(Z,Y),Z}function xr(Y,se){var Z=this,fe=new f(function(ye,le){Z.ready().then(function(){var Oe=Z._dbInfo;Oe.db.transaction(function(Ve){$i(Ve,Oe,"SELECT key FROM "+Oe.storeName+" WHERE id = ? LIMIT 1",[Y+1],function(qe,Ge){var st=Ge.rows.length?Ge.rows.item(0).key:null;ye(st)},function(qe,Ge){le(Ge)})})}).catch(le)});return d(fe,se),fe}function Ii(Y){var se=this,Z=new f(function(fe,ye){se.ready().then(function(){var le=se._dbInfo;le.db.transaction(function(Oe){$i(Oe,le,"SELECT key FROM "+le.storeName,[],function(Ve,qe){for(var Ge=[],st=0;st<qe.rows.length;st++)Ge.push(qe.rows.item(st).key);fe(Ge)},function(Ve,qe){ye(qe)})})}).catch(ye)});return d(Z,Y),Z}function Qr(Y){return new f(function(se,Z){Y.transaction(function(fe){fe.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(ye,le){for(var Oe=[],Ve=0;Ve<le.rows.length;Ve++)Oe.push(le.rows.item(Ve).name);se({db:Y,storeNames:Oe})},function(ye,le){Z(le)})},function(fe){Z(fe)})})}function fu(Y,se){se=m.apply(this,arguments);var Z=this.config();Y=typeof Y!="function"&&Y||{},Y.name||(Y.name=Y.name||Z.name,Y.storeName=Y.storeName||Z.storeName);var fe=this,ye;return Y.name?ye=new f(function(le){var Oe;Y.name===Z.name?Oe=fe._dbInfo.db:Oe=openDatabase(Y.name,"","",0),Y.storeName?le({db:Oe,storeNames:[Y.storeName]}):le(Qr(Oe))}).then(function(le){return new f(function(Oe,Ve){le.db.transaction(function(qe){function Ge(Pt){return new f(function(Bn,kr){qe.executeSql("DROP TABLE IF EXISTS "+Pt,[],function(){Bn()},function(Rr,Ho){kr(Ho)})})}for(var st=[],Et=0,mn=le.storeNames.length;Et<mn;Et++)st.push(Ge(le.storeNames[Et]));f.all(st).then(function(){Oe()}).catch(function(Pt){Ve(Pt)})},function(qe){Ve(qe)})})}):ye=f.reject("Invalid arguments"),d(ye,se),ye}var Ia={_driver:"webSQLStorage",_initStorage:zo,_support:Ue(),iterate:Mi,getItem:In,setItem:gs,removeItem:pp,clear:fl,length:_d,key:xr,keys:Ii,dropInstance:fu};function ka(){try{return typeof localStorage<"u"&&"setItem"in localStorage&&!!localStorage.setItem}catch{return!1}}function oe(Y,se){var Z=Y.name+"/";return Y.storeName!==se.storeName&&(Z+=Y.storeName+"/"),Z}function ee(){var Y="_localforage_support_test";try{return localStorage.setItem(Y,!0),localStorage.removeItem(Y),!1}catch{return!0}}function ae(){return!ee()||localStorage.length>0}function Ce(Y){var se=this,Z={};if(Y)for(var fe in Y)Z[fe]=Y[fe];return Z.keyPrefix=oe(Y,se._defaultConfig),ae()?(se._dbInfo=Z,Z.serializer=nr,f.resolve()):f.reject()}function Se(Y){var se=this,Z=se.ready().then(function(){for(var fe=se._dbInfo.keyPrefix,ye=localStorage.length-1;ye>=0;ye--){var le=localStorage.key(ye);le.indexOf(fe)===0&&localStorage.removeItem(le)}});return d(Z,Y),Z}function ot(Y,se){var Z=this;Y=p(Y);var fe=Z.ready().then(function(){var ye=Z._dbInfo,le=localStorage.getItem(ye.keyPrefix+Y);return le&&(le=ye.serializer.deserialize(le)),le});return d(fe,se),fe}function St(Y,se){var Z=this,fe=Z.ready().then(function(){for(var ye=Z._dbInfo,le=ye.keyPrefix,Oe=le.length,Ve=localStorage.length,qe=1,Ge=0;Ge<Ve;Ge++){var st=localStorage.key(Ge);if(st.indexOf(le)===0){var Et=localStorage.getItem(st);if(Et&&(Et=ye.serializer.deserialize(Et)),Et=Y(Et,st.substring(Oe),qe++),Et!==void 0)return Et}}});return d(fe,se),fe}function Ht(Y,se){var Z=this,fe=Z.ready().then(function(){var ye=Z._dbInfo,le;try{le=localStorage.key(Y)}catch{le=null}return le&&(le=le.substring(ye.keyPrefix.length)),le});return d(fe,se),fe}function On(Y){var se=this,Z=se.ready().then(function(){for(var fe=se._dbInfo,ye=localStorage.length,le=[],Oe=0;Oe<ye;Oe++){var Ve=localStorage.key(Oe);Ve.indexOf(fe.keyPrefix)===0&&le.push(Ve.substring(fe.keyPrefix.length))}return le});return d(Z,Y),Z}function jn(Y){var se=this,Z=se.keys().then(function(fe){return fe.length});return d(Z,Y),Z}function pn(Y,se){var Z=this;Y=p(Y);var fe=Z.ready().then(function(){var ye=Z._dbInfo;localStorage.removeItem(ye.keyPrefix+Y)});return d(fe,se),fe}function ir(Y,se,Z){var fe=this;Y=p(Y);var ye=fe.ready().then(function(){se===void 0&&(se=null);var le=se;return new f(function(Oe,Ve){var qe=fe._dbInfo;qe.serializer.serialize(se,function(Ge,st){if(st)Ve(st);else try{localStorage.setItem(qe.keyPrefix+Y,Ge),Oe(le)}catch(Et){(Et.name==="QuotaExceededError"||Et.name==="NS_ERROR_DOM_QUOTA_REACHED")&&Ve(Et),Ve(Et)}})})});return d(ye,Z),ye}function Ir(Y,se){if(se=m.apply(this,arguments),Y=typeof Y!="function"&&Y||{},!Y.name){var Z=this.config();Y.name=Y.name||Z.name,Y.storeName=Y.storeName||Z.storeName}var fe=this,ye;return Y.name?ye=new f(function(le){Y.storeName?le(oe(Y,fe._defaultConfig)):le(Y.name+"/")}).then(function(le){for(var Oe=localStorage.length-1;Oe>=0;Oe--){var Ve=localStorage.key(Oe);Ve.indexOf(le)===0&&localStorage.removeItem(Ve)}}):ye=f.reject("Invalid arguments"),d(ye,se),ye}var Vt={_driver:"localStorageWrapper",_initStorage:Ce,_support:ka(),iterate:St,getItem:ot,setItem:ir,removeItem:pn,clear:Se,length:jn,key:Ht,keys:On,dropInstance:Ir},sr=function(se,Z){return se===Z||typeof se=="number"&&typeof Z=="number"&&isNaN(se)&&isNaN(Z)},Hr=function(se,Z){for(var fe=se.length,ye=0;ye<fe;){if(sr(se[ye],Z))return!0;ye++}return!1},Jn=Array.isArray||function(Y){return Object.prototype.toString.call(Y)==="[object Array]"},ki={},Hs={},Jr={INDEXEDDB:Ke,WEBSQL:Ia,LOCALSTORAGE:Vt},mo=[Jr.INDEXEDDB._driver,Jr.WEBSQL._driver,Jr.LOCALSTORAGE._driver],Li=["dropInstance"],Fi=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(Li),Vo={description:"",driver:mo.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function Ra(Y,se){Y[se]=function(){var Z=arguments;return Y.ready().then(function(){return Y[se].apply(Y,Z)})}}function qs(){for(var Y=1;Y<arguments.length;Y++){var se=arguments[Y];if(se)for(var Z in se)se.hasOwnProperty(Z)&&(Jn(se[Z])?arguments[0][Z]=se[Z].slice():arguments[0][Z]=se[Z])}return arguments[0]}var nc=function(){function Y(se){o(this,Y);for(var Z in Jr)if(Jr.hasOwnProperty(Z)){var fe=Jr[Z],ye=fe._driver;this[Z]=ye,ki[ye]||this.defineDriver(fe)}this._defaultConfig=qs({},Vo),this._config=qs({},this._defaultConfig,se),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return Y.prototype.config=function(Z){if((typeof Z>"u"?"undefined":s(Z))==="object"){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var fe in Z){if(fe==="storeName"&&(Z[fe]=Z[fe].replace(/\W/g,"_")),fe==="version"&&typeof Z[fe]!="number")return new Error("Database version must be a number.");this._config[fe]=Z[fe]}return"driver"in Z&&Z.driver?this.setDriver(this._config.driver):!0}else return typeof Z=="string"?this._config[Z]:this._config},Y.prototype.defineDriver=function(Z,fe,ye){var le=new f(function(Oe,Ve){try{var qe=Z._driver,Ge=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!Z._driver){Ve(Ge);return}for(var st=Fi.concat("_initStorage"),Et=0,mn=st.length;Et<mn;Et++){var Pt=st[Et],Bn=!Hr(Li,Pt);if((Bn||Z[Pt])&&typeof Z[Pt]!="function"){Ve(Ge);return}}var kr=function(){for(var Ed=function(rc){return function(){var du=new Error("Method "+rc+" is not implemented by the current driver"),gp=f.reject(du);return d(gp,arguments[arguments.length-1]),gp}},mp=0,cT=Li.length;mp<cT;mp++){var ov=Li[mp];Z[ov]||(Z[ov]=Ed(ov))}};kr();var Rr=function(Ed){ki[qe]&&console.info("Redefining LocalForage driver: "+qe),ki[qe]=Z,Hs[qe]=Ed,Oe()};"_support"in Z?Z._support&&typeof Z._support=="function"?Z._support().then(Rr,Ve):Rr(!!Z._support):Rr(!0)}catch(Ho){Ve(Ho)}});return h(le,fe,ye),le},Y.prototype.driver=function(){return this._driver||null},Y.prototype.getDriver=function(Z,fe,ye){var le=ki[Z]?f.resolve(ki[Z]):f.reject(new Error("Driver not found."));return h(le,fe,ye),le},Y.prototype.getSerializer=function(Z){var fe=f.resolve(nr);return h(fe,Z),fe},Y.prototype.ready=function(Z){var fe=this,ye=fe._driverSet.then(function(){return fe._ready===null&&(fe._ready=fe._initDriver()),fe._ready});return h(ye,Z,Z),ye},Y.prototype.setDriver=function(Z,fe,ye){var le=this;Jn(Z)||(Z=[Z]);var Oe=this._getSupportedDrivers(Z);function Ve(){le._config.driver=le.driver()}function qe(Et){return le._extend(Et),Ve(),le._ready=le._initStorage(le._config),le._ready}function Ge(Et){return function(){var mn=0;function Pt(){for(;mn<Et.length;){var Bn=Et[mn];return mn++,le._dbInfo=null,le._ready=null,le.getDriver(Bn).then(qe).catch(Pt)}Ve();var kr=new Error("No available storage method found.");return le._driverSet=f.reject(kr),le._driverSet}return Pt()}}var st=this._driverSet!==null?this._driverSet.catch(function(){return f.resolve()}):f.resolve();return this._driverSet=st.then(function(){var Et=Oe[0];return le._dbInfo=null,le._ready=null,le.getDriver(Et).then(function(mn){le._driver=mn._driver,Ve(),le._wrapLibraryMethodsWithReady(),le._initDriver=Ge(Oe)})}).catch(function(){Ve();var Et=new Error("No available storage method found.");return le._driverSet=f.reject(Et),le._driverSet}),h(this._driverSet,fe,ye),this._driverSet},Y.prototype.supports=function(Z){return!!Hs[Z]},Y.prototype._extend=function(Z){qs(this,Z)},Y.prototype._getSupportedDrivers=function(Z){for(var fe=[],ye=0,le=Z.length;ye<le;ye++){var Oe=Z[ye];this.supports(Oe)&&fe.push(Oe)}return fe},Y.prototype._wrapLibraryMethodsWithReady=function(){for(var Z=0,fe=Fi.length;Z<fe;Z++)Ra(this,Fi[Z])},Y.prototype.createInstance=function(Z){return new Y(Z)},Y}(),wd=new nc;r.exports=wd},{3:3}]},{},[4])(4)})})(pOe);var a4t=pOe.exports;const dw=Xl(a4t);var _o=[];for(var W9=0;W9<256;++W9)_o.push((W9+256).toString(16).slice(1));function u4t(e,t=0){return(_o[e[t+0]]+_o[e[t+1]]+_o[e[t+2]]+_o[e[t+3]]+"-"+_o[e[t+4]]+_o[e[t+5]]+"-"+_o[e[t+6]]+_o[e[t+7]]+"-"+_o[e[t+8]]+_o[e[t+9]]+"-"+_o[e[t+10]]+_o[e[t+11]]+_o[e[t+12]]+_o[e[t+13]]+_o[e[t+14]]+_o[e[t+15]]).toLowerCase()}var xP,l4t=new Uint8Array(16);function c4t(){if(!xP&&(xP=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!xP))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return xP(l4t)}var f4t=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);const _pe={randomUUID:f4t};function oM(e,t,n){if(_pe.randomUUID&&!t&&!e)return _pe.randomUUID();e=e||{};var r=e.random||(e.rng||c4t)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,u4t(r)}class mOe{constructor(t){pu(this,"engine");pu(this,"connected",!1);pu(this,"currentParticipantId",null);this.engine=t}isConnected(){return this.connected}getEngine(){return this.engine}}async function aM(e){const t=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",t);return Array.from(new Uint8Array(n)).map(s=>s.toString(16).padStart(2,"0")).join("")}function GT(e){return e.participantId!==void 0}class bc extends mOe{constructor(){super("firebase");pu(this,"RECAPTCHAV3TOKEN","6LfADT8qAAAAAAi4qNf-NQaCV0RXzIqKvBrxNjx2");pu(this,"firestore");pu(this,"collectionPrefix","prod-");pu(this,"studyCollection");pu(this,"storage");pu(this,"studyId","");pu(this,"localForage",dw.createInstance({name:"currentParticipantId"}));pu(this,"participantData",null);const n=YQ.parse(`
{
  apiKey: "AIzaSyBR5snEuMQodNBn3tFkZ9VZtVha81rSiUs",
  authDomain: "mock-mqp.firebaseapp.com",
  projectId: "mock-mqp",
  storageBucket: "mock-mqp.appspot.com",
  messagingSenderId: "810459265279",
  appId: "1:810459265279:web:1f321cea4ef5376865f4ca",
  measurementId: "G-EFGFSXZL35"
}
`),r=DNe(n);this.firestore=r6t(r,{}),this.storage=d$t();try{r4t(r,{provider:new BZ(this.RECAPTCHAV3TOKEN),isTokenAutoRefreshEnabled:!1})}catch{console.warn("Failed to initialize Firebase App Check")}}async connect(){try{await i6t(this.firestore),this.connected=!0}catch{console.warn("Failed to connect to Firebase")}}async initializeStudyDb(n,r){try{const i=Z$();if(!i.currentUser&&(await NDt(i),!i.currentUser))throw new Error("Login failed with firebase");const s=await this.getCurrentConfigHash(),o=await aM(JSON.stringify(r));if(this.studyCollection=sf(this.firestore,`${this.collectionPrefix}${n}`),this.studyId=n,await this._pushToFirebaseStorage(`configs/${o}`,"config",r),s&&s!==o){try{await this._deleteFromFirebaseStorage("","sequenceArray")}catch{}await this.clearCurrentParticipantId()}return await this.localForage.setItem("currentConfigHash",o),Promise.resolve()}catch(i){return console.warn("Failed to connect to Firebase."),Promise.reject(i)}}async initializeParticipantSession(n,r,i,s,o){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(await this.getCurrentParticipantId(o),!this.currentParticipantId)throw new Error("Participant not initialized");const a=await this._getFromFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData"),u=await this.getModes(n);if(GT(a))return this.participantData=a,a;const l=await aM(JSON.stringify(i));return this.participantData={participantId:this.currentParticipantId,participantConfigHash:l,sequence:await this.getSequence(),answers:{},searchParams:r,metadata:s,completed:!1,rejected:!1},u.dataCollectionEnabled&&await this._pushToFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData",this.participantData),this.participantData}async getCurrentConfigHash(){return await this.localForage.getItem("currentConfigHash")}async getAllConfigsFromHash(n,r){const i=n.map(a=>{const u=ac(this.storage,`${this.collectionPrefix}${r}/configs/${a}_config`);return this._getFromFirebaseStorageByRef(u,"config")}),s=await Promise.all(i),o={};return n.forEach((a,u)=>o[a]=s[u]),o}async getCurrentParticipantId(n){const r=await this.localForage.getItem("currentParticipantId");if(n)return this.currentParticipantId=n,await this.localForage.setItem("currentParticipantId",n),n;if(r)return this.currentParticipantId=r,r;if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");return this.currentParticipantId=oM(),await this.localForage.setItem("currentParticipantId",this.currentParticipantId),this.currentParticipantId}async clearCurrentParticipantId(){return await this.localForage.removeItem("currentParticipantId")}async saveAnswers(n){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(!this.currentParticipantId||this.participantData===null)throw new Error("Participant not initialized");this.participantData={...this.participantData,answers:n},await this._pushToFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData",this.participantData)}async setSequenceArray(n){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");await this._pushToFirebaseStorage("","sequenceArray",n)}async getSequenceArray(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const n=await this._getFromFirebaseStorage("","sequenceArray");return Array.isArray(n)?n:null}async getSequence(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(!this.currentParticipantId)throw new Error("Participant not initialized");const n=await this.getSequenceArray();if(!n)throw new Error("Latin square not initialized");const r=await this.getModes(this.studyId),i=ys(this.studyCollection,"sequenceAssignment");await yu(i,{});const s=sf(i,"sequenceAssignment"),o=ys(s,this.currentParticipantId),a=cpe(s,d6t("participantId","==","")),u=await WT(a);if(u.docs.length>0){const m=u.docs[0],g=m.data().timestamp;r.dataCollectionEnabled&&(await v6t(m.ref),await yu(o,{participantId:this.currentParticipantId,timestamp:g}))}else r.dataCollectionEnabled&&await yu(o,{participantId:this.currentParticipantId,timestamp:w6t()});const l=cpe(s,h6t("timestamp","asc")),d=(await WT(l)).docs.map(m=>m.data()).findIndex(m=>m.participantId===this.currentParticipantId)%n.length,h=d===-1?Math.floor(Math.random()*n.length-1):d,p=n[h];if(!p)throw new Error("Latin square is empty");return p}async getAllParticipantsData(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const n=ac(this.storage,`${this.collectionPrefix}${this.studyId}/participants`),r=await HT(n),i=[],s=r.items.map(async o=>{const a=await this._getFromFirebaseStorageByRef(o,"participantData");GT(a)&&i.push(a)});return await Promise.all(s),i}async getParticipantData(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(this.currentParticipantId===null)throw new Error("Participant not initialized");const n=await this._getFromFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData");return GT(n)?n:null}async nextParticipant(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const n=oM();await this.localForage.setItem("currentParticipantId",n)}async verifyCompletion(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(!this.currentParticipantId)throw new Error("Participant not initialized");if(await this.getParticipantData(),!this.participantData)throw new Error("Participant not initialized");const n=await this.getModes(this.studyId);return this.participantData.completed=!0,n.dataCollectionEnabled&&await this._pushToFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData",this.participantData),!0}async getUserManagementData(n){const r=sf(this.firestore,"user-management"),i=await WT(r),s=Object.fromEntries(i.docs.map(o=>[o.id,o.data()]));return n in s?s[n]:null}async validateUser(n){if(n!=null&&n.user){const r=await this.getUserManagementData("authentication");if(r!=null&&r.isEnabled){const i=await this.getUserManagementData("adminUsers");if(i&&i.adminUsersList){const s=Object.fromEntries(i.adminUsersList.map(a=>[a.email,a.uid]));if(n.user.email&&(s[n.user.email]===n.user.uid||s[n.user.email]===null)){if(n.user.email&&s[n.user.email]===null){const a=i.adminUsersList.find(u=>u.email===n.user.email);a&&(a.uid=n.user.uid),await yu(ys(this.firestore,"user-management","adminUsers"),{adminUsersList:i.adminUsersList})}return!0}return!1}}return!0}return!1}async changeAuth(n){await yu(ys(this.firestore,"user-management","authentication"),{isEnabled:n})}async addAdminUser(n){const r=await this.getUserManagementData("adminUsers");if(r!=null&&r.adminUsersList){const i=r.adminUsersList;i.find(o=>o.email===n.email)||(i.push({email:n.email,uid:n.uid}),await yu(ys(this.firestore,"user-management","adminUsers"),{adminUsersList:i}))}else await yu(ys(this.firestore,"user-management","adminUsers"),{adminUsersList:[{email:n.email,uid:n.uid}]})}async removeAdminUser(n){const r=await this.getUserManagementData("adminUsers");r!=null&&r.adminUsersList&&r.adminUsersList.length>1&&r.adminUsersList.find(i=>i.email===n)&&(r.adminUsersList=r==null?void 0:r.adminUsersList.filter(i=>i.email!==n),await yu(ys(this.firestore,"user-management","adminUsers"),{adminUsersList:r==null?void 0:r.adminUsersList}))}async getAllParticipantsDataByStudy(n){const r=ac(this.storage,`${this.collectionPrefix}${n}/participants`),i=await HT(r),s=[],o=i.items.map(async a=>{const u=await this._getFromFirebaseStorageByRef(a,"participantData");GT(u)&&s.push(u)});return await Promise.all(o),s}async rejectParticipant(n,r){const i=sf(this.firestore,`${this.collectionPrefix}${n}`),s=ac(this.storage,`${this.collectionPrefix}${n}/participants/${r}_participantData`),o=await this._getFromFirebaseStorageByRef(s,"participantData");try{if(!o||!GT(o)||o.rejected)return;o.rejected=!0,await this._pushToFirebaseStorageByRef(s,"participantData",o);const a=ys(i,"sequenceAssignment"),u=sf(a,"sequenceAssignment"),l=ys(u,r);await y6t(l,{participantId:""})}catch{console.warn("Failed to reject the participant.")}}async setMode(n,r,i){const s=ys(this.firestore,"metadata",`${this.collectionPrefix}${n}`);return await yu(s,{[r]:i},{merge:!0})}async getModes(n){const r=ys(this.firestore,"metadata",`${this.collectionPrefix}${n}`),i=await V9(r);if(i.exists())return i.data();const s={dataCollectionEnabled:!0,studyNavigatorEnabled:!0,analyticsInterfacePubliclyAccessible:!0};return await yu(r,s),s}async createSnapshot(n,r){const i=`${this.collectionPrefix}${n}`;if(!await this._directoryExists(i))return console.warn(`Source directory ${i} does not exist.`),{status:"FAILED",error:{message:"There is currently no data in your study. A snapshot could not be created.",title:"Failed to Create Snapshot."}};const s=new Date,o=s.getUTCFullYear(),a=(s.getUTCMonth()+1).toString().padStart(2,"0"),u=s.getUTCDate().toString().padStart(2,"0"),l=s.getUTCHours().toString().padStart(2,"0"),c=s.getUTCMinutes().toString().padStart(2,"0"),f=s.getUTCSeconds().toString().padStart(2,"0"),d=`${o}-${a}-${u}T${l}:${c}:${f}`,h=`${this.collectionPrefix}${n}-snapshot-${d}`;await this._copyDirectory(`${i}/configs`,`${h}/configs`),await this._copyDirectory(`${i}/participants`,`${h}/participants`),await this._copyDirectory(i,h),await this._copyCollection(i,h),await this._addDirectoryNameToMetadata(h);const p=[];if(r){const m=await this.removeSnapshotOrLive(i,!1);m.status==="FAILED"?p.push({title:m.error.title,message:m.error.message,color:"red"}):p.push({title:"Success!",message:"Successfully deleted live data.",color:"green"})}return p.push({message:"Successfully created snapshot",title:"Success!",color:"green"}),{status:"SUCCESS",notifications:p}}async removeSnapshotOrLive(n,r){try{const i=n.startsWith(this.collectionPrefix)?n:`${this.collectionPrefix}${n}`;return await this._deleteDirectory(`${i}/configs`),await this._deleteDirectory(`${i}/participants`),await this._deleteDirectory(i),await this._deleteCollection(i),r&&await this._removeNameFromMetadata(i),{status:"SUCCESS",notifications:[{message:"Successfully deleted snapshot or live data.",title:"Success!",color:"green"}]}}catch{return{status:"FAILED",error:{title:"Failed to delete live data or snapshot",message:"There was an unspecified error when trying to remove a snapshot or live data."}}}}async getSnapshots(n){try{const r=ys(this.firestore,"metadata","collections"),i=await V9(r);if(i.exists()){const s=i.data();return Object.keys(s).filter(u=>u.startsWith(`${this.collectionPrefix}${n}-snapshot`)).map(u=>{const l=s[u];let c;return typeof l=="boolean"?c=u:l&&typeof l=="object"&&l.enabled===!0?c=l.name:c=null,{originalName:u,alternateName:c}}).filter(u=>u.alternateName!==null).sort((u,l)=>u.originalName.localeCompare(l.originalName)).reverse()}return[]}catch(r){throw console.error("Error listing collections with prefix:",r),r}}async restoreSnapshot(n,r){const i=`${this.collectionPrefix}${n}`,s=[];try{const o=await this.createSnapshot(n,!0);return o.status==="FAILED"?(console.warn("No live data to capture."),s.push({title:o.error.title,message:o.error.message,color:"yellow"})):s.push({title:"Success!",message:"Successfully created snapshot of live data.",color:"green"}),await this._copyDirectory(`${r}/configs`,`${i}/configs`),await this._copyDirectory(`${r}/participants`,`${i}/participants`),await this._copyDirectory(r,i),await this._copyCollection(r,i),s.push({message:"Successfully restored snapshot to live data.",title:"Success!",color:"green"}),{status:"SUCCESS",notifications:s}}catch(o){return console.error("Error trying to delete a snapshot",o),{status:"FAILED",error:{title:"Failed to restore a snapshot fully.",message:"There was an unspecified error when trying to restore this snapshot."}}}}async _addDirectoryNameToMetadata(n){try{const r=ys(this.firestore,"metadata","collections");await yu(r,{[n]:{enabled:!0,name:n}},{merge:!0})}catch(r){throw console.error("Error adding collection to metadata:",r),r}}async renameSnapshot(n,r){try{const i=ys(this.firestore,"metadata","collections");return await yu(i,{[n]:{enabled:!0,name:r}},{merge:!0}),{status:"SUCCESS",notifications:[{message:"Successfully renamed snapshot.",title:"Success!",color:"green"}]}}catch(i){return console.error("Error renaming collection in metadata",i),{status:"FAILED",error:{title:"Failed to Rename Snapshot.",message:"There was an error when trying to rename the snapshot."}}}}async _removeNameFromMetadata(n){try{const r=ys(this.firestore,"metadata","collections"),i=await V9(r);if(i.exists()){const s=i.data();s[n]?(delete s[n],await yu(r,s)):console.warn(`${n} does not exist in metadata.`)}else console.warn("No metadata found.")}catch(r){throw console.error("Error removing collection from metadata:",r),r}}async _deleteDirectory(n){try{const r=ac(this.storage,n),s=(await HT(r)).items.map(o=>Ahe(o));await Promise.all(s)}catch(r){console.error("Error deleting files in directory:",r)}}async _copyDirectory(n,r){try{const i=ac(this.storage,n),o=(await HT(i)).items.map(a=>{const u=a.fullPath,l=u.replace(n,r);return this._copyFile(u,l)});await Promise.all(o)}catch(i){console.error("Error copying file:",i)}}async _copyFile(n,r){try{const i=ac(this.storage,n),s=ac(this.storage,r),o=await F9(i),u=await(await fetch(o)).blob();await L9(s,u)}catch(i){console.error("Error copying file:",i)}}async _copyCollection(n,r){const i=sf(this.firestore,n),s=ys(i,"sequenceAssignment"),o=sf(s,"sequenceAssignment"),a=sf(this.firestore,r),u=ys(a,"sequenceAssignment");await yu(u,{});const l=sf(u,"sequenceAssignment"),c=await WT(o),f=hpe(this.firestore);c.docs.forEach(d=>{const h=ys(l,d.id);f.set(h,d.data())}),await f.commit()}async _deleteCollection(n){const r=sf(this.firestore,n),i=ys(r,"sequenceAssignment"),s=sf(i,"sequenceAssignment"),o=await WT(s),a=hpe(this.firestore);o.forEach(u=>{const l=ys(s,u.id);a.delete(l)}),a.delete(i),await a.commit()}async _directoryExists(n){try{const r=ac(this.storage,n);return(await HT(r)).items.length>0}catch(r){if(r.code==="storage/object-not-found")return!1;throw console.error("Error checking if directory exists:",r),r}}_verifyStudyDatabase(n){return n!==void 0}async _getFromFirebaseStorage(n,r){const i=ac(this.storage,`${this.collectionPrefix}${this.studyId}/${n}_${r}`);let s={};try{const o=await F9(i),u=await(await fetch(o)).text();s=JSON.parse(u)}catch{console.warn(`${n} does not have ${r} for ${this.collectionPrefix}${this.studyId}.`)}return s}async _getFromFirebaseStorageByRef(n,r){let i={};try{const s=await F9(n),a=await(await fetch(s)).text();i=JSON.parse(a)}catch{console.warn(`${n} with type ${r} not found.`)}return i}async _pushToFirebaseStorage(n,r,i){if(Object.keys(i).length>0){const s=ac(this.storage,`${this.collectionPrefix}${this.studyId}/${n}_${r}`),o=new Blob([JSON.stringify(i)],{type:"application/json"});await L9(s,o)}}async _pushToFirebaseStorageByRef(n,r,i){if(Object.keys(i).length>0){const s=new Blob([JSON.stringify(i)],{type:"application/json"});await L9(n,s)}}async _deleteFromFirebaseStorage(n,r){const i=ac(this.storage,`${this.collectionPrefix}${this.studyId}/${n}_${r}`);await Ahe(i)}}const gOe=I.createContext({user:{user:null,determiningStatus:!1,isAdmin:!1,adminVerification:!1},logout:async()=>{},triggerAuth:()=>{},verifyAdminStatus:()=>Promise.resolve(!1)}),r_=()=>I.useContext(gOe);function d4t({children:e}){const t={user:null,determiningStatus:!0,isAdmin:!1,adminVerification:!1},n={user:null,determiningStatus:!1,isAdmin:!1,adminVerification:!1},r={user:{name:"fakeName",email:"fakeEmail@fake.com",uid:"fakeUid"},determiningStatus:!1,isAdmin:!0,adminVerification:!0},[i,s]=I.useState(t),[o,a]=I.useState(!1),{storageEngine:u}=Cs(),l=async()=>{const h=Z$();try{await FDt(h)}catch(p){console.error(`There was an issue signing-out the user: ${p.message}`)}finally{s(n)}},c=()=>{a(!0)},f=async h=>u?await u.validateUser(h):!1;I.useEffect(()=>{s(t);let h;if(u instanceof bc)try{h=Z$()}catch{console.warn("No firebase store.")}const p=async y=>{if(s(v=>({user:v.user,isAdmin:v.isAdmin,determiningStatus:!0,adminVerification:!1})),y){const v={user:y,determiningStatus:!1,isAdmin:!1,adminVerification:!0},_=await f(v);v.isAdmin=!!_,s(v)}else l()},g=(async()=>{if(u instanceof bc){const y=await(u==null?void 0:u.getUserManagementData("authentication"));if(y!=null&&y.isEnabled){const v=LDt(h,async _=>await p(_));return()=>v()}s(r)}else u&&s(r);return()=>{}})();return()=>{g.then(y=>y())}},[u,o]);const d=I.useMemo(()=>({user:i,triggerAuth:c,logout:l,verifyAdminStatus:f}),[i]);return b.jsx(gOe.Provider,{value:d,children:i.determiningStatus?b.jsx(Fl,{visible:!0}):e})}function XC({studyIds:e}){const t=Yh(),{studyId:n}=Em(),r=Oy(),i=e.map(d=>({value:d,label:d})),{storageEngine:s}=Cs(),{user:o,logout:a}=r_(),[u,l]=I.useState(!1),c=r.pathname.includes("analysis"),f=[{name:"Studies",leftIcon:b.jsx(SQe,{}),href:"",needAdmin:!1},{name:"Analysis",leftIcon:b.jsx(mQe,{}),href:"analysis/dashboard",needAdmin:!1},{name:"Settings",leftIcon:b.jsx(Fwe,{}),href:"settings",needAdmin:!0}];return b.jsx(ni.Header,{p:"md",children:b.jsxs(qa,{mt:-7,align:"center",children:[b.jsx(qa.Col,{span:6,children:b.jsxs(Nt,{align:"center",onClick:()=>t(c?"/analysis/dashboard":"/"),style:{cursor:"pointer"},children:[b.jsx(Dy,{w:40,src:`${Hu}revisitAssets/revisitLogoSquare.svg`,alt:"Revisit Logo"}),b.jsx(Pl,{w:"md"}),b.jsx(li,{order:4,style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:c?"ReVISit Analytics Platform":"ReVISit Studies"})]})}),b.jsx(qa.Col,{span:6,children:b.jsxs(Nt,{justify:"flex-end",direction:"row",children:[c&&b.jsx(mk,{allowDeselect:!1,placeholder:"Select Study",data:i,value:n,onChange:d=>t(`/analysis/stats/${d}`),mr:16}),b.jsx(VG,{opened:!1,onClick:()=>l(!0),style:{visibility:u?"hidden":void 0}}),b.jsx(Wh,{opened:u,onClose:()=>l(!1),position:"right",withCloseButton:!1,children:b.jsxs(Nt,{direction:"column",mt:20,children:[b.jsx(Xe,{ml:15,mb:20,fw:700,size:"lg",children:"Navigation"}),f.map(d=>d.needAdmin?o.isAdmin?b.jsx(fn,{leftSection:d.leftIcon,variant:"default",style:{border:"none",display:"flex",justifyContent:"flex-start"},onClick:h=>{h.preventDefault(),t(`/${d.href}`),l(!1)},component:"a",href:`${Hu}${d.href}`,children:d.name},`menu-item-${d.name}`):null:b.jsx(fn,{leftSection:d.leftIcon,variant:"default",style:{border:"none",display:"flex",justifyContent:"flex-start"},onClick:h=>{h.preventDefault(),t(`/${d.href}`),l(!1)},component:"a",href:`${Hu}${d.href}`,children:d.name},`menu-item-${d.name}`)),b.jsxs(pe,{ml:10,children:[b.jsx(FE,{my:"sm"}),(s==null?void 0:s.getEngine())==="firebase"?o.isAdmin?b.jsx(Xe,{size:"sm",ml:10,style:{cursor:"pointer"},onClick:()=>{a(),t("/login"),l(!1)},children:"Logout"}):b.jsx(Xe,{size:"sm",ml:10,style:{cursor:"pointer"},onClick:()=>{t("/login"),l(!1)},children:"Login"}):null]})]})})]})})]})})}function UZ({allParticipants:e,studyId:t,gap:n,fileName:r}){const[i,{open:s,close:o}]=xL(!1),[a,u]=I.useState([]),l=async()=>typeof e=="function"?await e():e,c=async()=>{const d=await l(),h=r?`${r}.json`:`${t}_all.json`;LJ(JSON.stringify(d,null,2),h)},f=async()=>{const d=await l();u(d),s()};return b.jsxs(b.Fragment,{children:[b.jsxs(ls,{style:{gap:n},children:[b.jsx(ui,{label:"Download all participants data as JSON",children:b.jsx(fn,{variant:"light",disabled:e.length===0&&typeof e!="function",onClick:c,px:4,children:b.jsx(_Qe,{})})}),b.jsx(ui,{label:"Download all participants data as a tidy CSV",children:b.jsx(fn,{variant:"light",disabled:e.length===0&&typeof e!="function",onClick:f,px:4,children:b.jsx(jwe,{})})})]}),i&&a.length>0&&b.jsx(KRt,{opened:i,close:o,filename:r?`${r}_tidy.csv`:`${t}_all_tidy.csv`,data:a,studyId:t})]})}function h4t({cellData:e}){return b.jsx(qt.Td,{children:b.jsx(Nf,{miw:100,children:Object.entries(e.answer).map(([t,n])=>b.jsxs(pe,{children:[b.jsxs(Xe,{fw:700,span:!0,children:[" ",`${t}: `]}),b.jsx(Xe,{span:!0,children:`${n}`})]},`cell-${t}`))})})}function wpe({cellData:e}){const t=(e.endTime-e.startTime)/1e3;return b.jsxs(qt.Td,{children:[t.toFixed(1)," ","s"]})}function p4t(e){const{metaData:t}=e;return b.jsx(qt.Td,{children:b.jsx(vY,{w:200,hideLabel:"hide",maxHeight:50,showLabel:"more",children:b.jsxs(Nf,{gap:"xs",children:[b.jsxs(pe,{children:["IP:"," ",t.ip]}),b.jsxs(pe,{children:["Language:"," ",t.language]}),b.jsxs(pe,{children:["Resolution:"," ",JSON.stringify(t.resolution)]}),b.jsxs(pe,{children:["User Agent:"," ",t.userAgent]})]})})})}function m4t({completed:e,inProgress:t,rejected:n,studyConfig:r,refresh:i}){const{storageEngine:s}=Cs(),{studyId:o}=Em(),{user:a}=r_(),u=async _=>{s&&o&&(a.isAdmin?(await s.rejectParticipant(o,_),await i()):console.warn("You are not authorized to perform this action."))},[l,c]=I.useState([]),[f,d]=I.useState(!1),h=()=>c7({title:"Confirm rejecting participants",children:b.jsxs(Xe,{size:"sm",children:["Are you sure you want to reject the selected participants? This action is"," ",b.jsx(Xe,{span:!0,fw:700,td:"underline",inherit:!0,children:"irreversible"}),", and will return the participants' sequences to the beginning of the sequence array."]}),labels:{confirm:"Reject Participants",cancel:"Cancel"},confirmProps:{color:"red"},cancelProps:{variant:"subtle",color:"dark"},onCancel:()=>{},onConfirm:async()=>{d(!0);const _=l.map(async w=>await u(w));await Promise.all(_),c([]),await i(),d(!1)}}),p=I.useMemo(()=>[...e,...t,...n],[e,t,n]);function m(_){_==="all"?l.length===p.length?c([]):c(p.map(w=>w.participantId)):l.includes(_)?c(l.filter(w=>w!==_)):c([...l,_])}const g=Lxe(r.sequence),y=[b.jsx(qt.Th,{children:b.jsx(Nt,{justify:"center",children:b.jsx(Tl,{mb:-4,checked:l.length===p.length,onChange:()=>m("all")})})},"action"),b.jsx(qt.Th,{children:"ID"},"ID"),b.jsx(qt.Th,{children:"Status"},"status"),b.jsx(qt.Th,{children:"Meta"},"meta"),...g.flatMap(_=>[b.jsx(qt.Th,{children:_.componentName},`header-${_.componentName}-${_.timesSeenInBlock}`),b.jsxs(qt.Th,{children:[b.jsx("span",{style:{whiteSpace:"nowrap"},children:_.componentName})," ","Duration"]},`header-${_.componentName}-${_.timesSeenInBlock}-duration`)]),b.jsx(qt.Th,{children:"Total Duration"},"total-duration")],v=p.map(_=>b.jsxs(qt.Tr,{children:[b.jsx(qt.Td,{children:b.jsx(Nt,{justify:"center",children:b.jsx(Tl,{mb:-4,checked:l.includes(_.participantId),onChange:()=>m(_.participantId)})})}),b.jsx(qt.Td,{style:{whiteSpace:"nowrap"},children:_.participantId}),b.jsx(qt.Td,{children:b.jsxs(Nt,{direction:"row",align:"center",children:[_.rejected?b.jsx(ui,{label:"Rejected",children:b.jsx(OY,{size:16,color:"red",style:{marginBottom:-3}})}):_.completed?b.jsx(ui,{label:"Completed",children:b.jsx($we,{size:16,color:"teal",style:{marginBottom:-3}})}):b.jsx(ui,{label:"In Progress",children:b.jsx(Lwe,{size:16,color:"orange",style:{marginBottom:-3}})}),!_.completed&&b.jsxs(Xe,{size:"sm",mb:-1,ml:4,children:[(Object.entries(_.answers).filter(([w,E])=>E.endTime!==void 0).length/(Tm(_.sequence).length-1)*100).toFixed(2),"%"]})]})}),_.metadata?b.jsx(p4t,{metaData:_.metadata}):b.jsx(qt.Td,{children:"N/A"}),g.map(w=>{const E=$xe(_.sequence,w.orderPath),S=E&&Object.entries(_.answers).sort((T,C)=>{const A=parseInt(T[0].slice(T[0].lastIndexOf("_")+1),10),k=parseInt(C[0].slice(C[0].lastIndexOf("_")+1),10);return A-k}).filter(([T])=>{const C=T.slice(0,T.lastIndexOf("_")),A=parseInt(T.slice(T.lastIndexOf("_")+1),10);return C===w.componentName&&A<=E[0].lastIndex&&A>=E[0].firstIndex});return S!==null&&S.length>=w.timesSeenInBlock+1?b.jsxs(_r.Fragment,{children:[b.jsx(h4t,{cellData:S[w.timesSeenInBlock][1]}),b.jsx(wpe,{cellData:S[w.timesSeenInBlock][1]})]},`cellgroup-${_.participantId}-${w.componentName}-${w.timesSeenInBlock}`):b.jsxs(_r.Fragment,{children:[b.jsx(qt.Td,{children:"N/A"}),b.jsx(qt.Td,{children:"N/A"})]},`cellgroup-${_.participantId}-${w.componentName}-${w.timesSeenInBlock}`)}),b.jsx(wpe,{cellData:{startTime:Math.min(...Object.values(_.answers).map(w=>w.startTime)),endTime:Math.max(...Object.values(_.answers).map(w=>w.endTime)),answer:{},windowEvents:[]}},`cell-${_.participantId}-total-duration`)]},_.participantId));return p.length>0?b.jsxs(b.Fragment,{children:[b.jsx(Fl,{visible:f,overlayProps:{blur:2}}),b.jsxs(Nt,{justify:"space-between",mb:8,p:8,children:[b.jsx(ls,{children:b.jsx(mk,{w:350,variant:"filled",placeholder:"Search for a participant ID",data:p.map(_=>({value:_.participantId,label:_.participantId})),searchable:!0,value:null,leftSection:b.jsx(OQe,{size:14}),onChange:_=>_&&m(_)})}),b.jsxs(ls,{children:[b.jsx(UZ,{allParticipants:[...e,...t],studyId:o||""}),b.jsx(fn,{disabled:l.length===0||!a.isAdmin,onClick:h,color:"red",children:"Reject Participants"})]})]}),b.jsx(Nt,{direction:"column",style:{width:"100%",overflow:"auto"},children:b.jsxs(qt,{striped:!0,withTableBorder:!0,children:[b.jsx(qt.Thead,{children:b.jsx(qt.Tr,{children:y})}),b.jsx(qt.Tbody,{children:v})]})})]}):b.jsxs(b.Fragment,{children:[b.jsx(Pl,{h:"xl"}),b.jsx(Nt,{justify:"center",align:"center",children:b.jsx(Xe,{children:"No data available"})})]})}const g4t="_root_1spq0_1",y4t="_description_1spq0_9",v4t="_title_1spq0_10",b4t="_closeButton_1spq0_14",_4t={root:g4t,description:y4t,title:v4t,closeButton:b4t},uM=e=>{const{title:t,message:n,color:r}=e;Ub.show({title:t,message:n,position:"top-center",classNames:_4t,color:r||"blue",autoClose:r==="red"||r==="yellow"?!1:5e3})};function w4t({studyId:e,refresh:t}){const[n,r]=I.useState(!1),[i,s]=I.useState(!1),[o,a]=I.useState(!1),[u,l]=I.useState(!1),[c,f]=I.useState(""),[d,h]=I.useState([]),[p,m]=I.useState(""),[g,y]=I.useState(""),[v,_]=I.useState(!1),[w,E]=I.useState(!1),{storageEngine:S}=Cs(),T=S,C=I.useCallback(async()=>{E(!0);const P=await T.getSnapshots(e);h(P),E(!1)},[T,e]);I.useEffect(()=>{C()},[C]);const A=async(P,...z)=>{_(!0);const W=await P(...z);W.status==="SUCCESS"?(C(),_(!1),await t(),W.notifications&&W.notifications.forEach(j=>{uM(j)})):(_(!1),uM({title:W.error.title,message:W.error.message,color:"red"}))},k=async()=>{await A(T.createSnapshot.bind(T),e,!1)},N=async()=>{m(""),r(!1),await A(T.createSnapshot.bind(T),e,!0)},O=async()=>{a(!1),await A(T.renameSnapshot.bind(T),c,g)},D=async P=>{await A(T.restoreSnapshot.bind(T),e,P)},$=async()=>{m(""),s(!1),await A(T.removeSnapshotOrLive.bind(T),c,!0)},F=async()=>{m(""),l(!1),await A(T.removeSnapshotOrLive.bind(T),e,!0)},M=()=>c7({title:"Create a Snapshot",children:b.jsx(Xe,{mb:30,children:"This will create a snapshot of the live database without impacting the live data."}),labels:{confirm:"Create",cancel:"Cancel"},cancelProps:{variant:"subtle",color:"dark"},onCancel:()=>{},onConfirm:()=>k()}),B=P=>c7({title:"Restore Snapshot",children:b.jsx(Xe,{mb:30,children:"Restoring this snapshot will perform 2 actions. First, we will create a snapshot of the current live database, then we will restore the selected snapshot into the live database."}),labels:{confirm:"Restore",cancel:"Cancel"},confirmProps:{color:"red"},cancelProps:{variant:"subtle",color:"dark"},onCancel:()=>{},onConfirm:()=>D(P)}),U=P=>{const z=/-snapshot-(.+)$/,W=P.match(z);return W&&W[1]?W[1].replace("T"," "):null},H=async P=>{const z=P.slice(P.indexOf("-")+1);return await T.getAllParticipantsDataByStudy(z)};return b.jsxs(b.Fragment,{children:[b.jsx(Fl,{visible:v}),b.jsxs(Nt,{justify:"space-between",align:"center",children:[b.jsxs(pe,{style:{width:"70%"},children:[b.jsx(li,{order:5,children:"Create a Snapshot"}),b.jsxs(Xe,{children:["This will create a snapshot of the live"," ",b.jsx(Xe,{span:!0,fw:700,children:e})," ","database. It will"," ",b.jsx(Xe,{span:!0,fw:700,fs:"italic",children:"not"})," ","remove this data from the live database. The current study data can be restored from a snapshot at any time."]})]}),b.jsx(ui,{label:"Create a snapshot",children:b.jsx(fn,{onClick:M,children:"Snapshot"})})]}),b.jsx(Pl,{h:"lg"}),b.jsxs(Nt,{justify:"space-between",align:"center",children:[b.jsxs(pe,{style:{width:"70%"},children:[b.jsx(li,{order:5,children:"Archive Data"}),b.jsxs(Xe,{children:["This will create a snapshot of the live"," ",b.jsx(Xe,{span:!0,fw:700,children:e})," ","database. It will then remove this data from the live database. The current study data can be restored from a snapshot at any time."]})]}),b.jsx(ui,{label:"Snapshot and Delete Data",children:b.jsx(fn,{color:"red",onClick:()=>r(!0),children:"Archive"})})]}),b.jsx(Pl,{h:"lg"}),b.jsxs(Nt,{justify:"space-between",align:"center",children:[b.jsxs(pe,{style:{width:"70%"},children:[b.jsx(li,{order:5,children:"Delete Data"}),b.jsxs(Xe,{children:["This will delete the live"," ",b.jsx(Xe,{span:!0,fw:700,children:e})," ","database. Since this does not create a snapshot the data will be permanently deleted and cannot be restored."]})]}),b.jsx(ui,{label:"Delete Data",children:b.jsx(fn,{color:"red",onClick:()=>l(!0),children:"Delete"})})]}),b.jsx(Pl,{h:"xl"}),b.jsxs(Nt,{direction:"column",children:[b.jsx(Nt,{style:{borderBottom:"1px solid #dedede"},direction:"row",justify:"space-between",mb:"xs",pb:"sm",children:b.jsx(li,{order:5,children:"Snapshots"})}),b.jsxs(pe,{style:{position:"relative"},children:[b.jsx(Fl,{visible:w}),d.length>0?b.jsxs(qt,{children:[b.jsx(qt.Thead,{children:b.jsxs(qt.Tr,{children:[b.jsx(qt.Th,{children:"Snapshot Name"}),b.jsx(qt.Th,{children:"Date Created"}),b.jsx(qt.Th,{children:"Actions"})]})}),b.jsx(qt.Tbody,{children:d.map(P=>b.jsxs(qt.Tr,{children:[b.jsx(qt.Td,{children:P.alternateName}),b.jsx(qt.Td,{children:U(P.originalName)}),b.jsx(qt.Td,{children:b.jsxs(Nt,{children:[b.jsx(ui,{label:"Rename",children:b.jsx(fn,{color:"green",variant:"light",px:4,style:{margin:"0px 5px"},onClick:()=>{a(!0),f(P.originalName)},children:b.jsx(kQe,{})})}),b.jsx(ui,{label:"Restore Snapshot",children:b.jsx(fn,{color:"blue",variant:"light",px:4,style:{margin:"0px 5px"},onClick:()=>{B(P.originalName)},children:b.jsx(PQe,{})})}),b.jsx(ui,{label:"Delete Snapshot",children:b.jsx(fn,{color:"red",px:4,variant:"light",style:{margin:"0px 10px 0px 5px"},onClick:()=>{s(!0),f(P.originalName)},children:b.jsx(Bwe,{})})}),b.jsx(UZ,{allParticipants:()=>H(P.originalName),studyId:e,gap:"10px",fileName:P.alternateName})]})})]},P.originalName))})]}):b.jsx(Xe,{children:"No snapshots."})]})]}),b.jsxs(Yi,{opened:n,onClose:()=>{r(!1),m("")},title:b.jsx(Xe,{children:"Archive Data"}),children:[b.jsx(Xe,{mb:"sm",children:"This will create a snapshot of the live database and remove the data from the live database."}),b.jsx(Jg,{label:"To archive this data, please enter the name of the study.",placeholder:e,onChange:P=>m(P.target.value)}),b.jsxs(Nt,{mt:"sm",justify:"right",children:[b.jsx(fn,{mr:5,variant:"subtle",color:"dark",onClick:()=>{r(!1),m("")},children:"Cancel"}),b.jsx(fn,{color:"red",onClick:N,disabled:p!==e,children:"Archive"})]})]}),b.jsxs(Yi,{opened:i,onClose:()=>{s(!1),m("")},title:b.jsx(Xe,{children:"Delete Snapshot"}),children:[b.jsxs(Xe,{mb:"sm",children:["This will permanently remove this snapshot. This action is"," ",b.jsx(Xe,{span:!0,fw:700,children:"irreversible"}),"."]}),b.jsx(Jg,{label:"To delete this snapshot, please enter the name of the study.",placeholder:e,onChange:P=>m(P.target.value)}),b.jsxs(Nt,{mt:"sm",justify:"right",children:[b.jsx(fn,{mr:5,variant:"subtle",color:"dark",onClick:()=>{s(!1),m("")},children:"Cancel"}),b.jsx(fn,{color:"red",onClick:$,disabled:p!==e,children:"Delete"})]})]}),b.jsxs(Yi,{opened:o,onClose:()=>{a(!1),y("")},title:b.jsx(Xe,{children:"Rename Snapshot"}),children:[b.jsx(Jg,{label:"Enter the new name of the snapshot.",placeholder:c,onChange:P=>y(P.target.value)}),b.jsxs(Nt,{mt:"sm",justify:"right",children:[b.jsx(fn,{mr:5,variant:"subtle",color:"dark",onClick:()=>{a(!1),y("")},children:"Cancel"}),b.jsx(fn,{color:"green",onClick:O,disabled:!g||g.length===0,children:"Rename"})]})]}),b.jsxs(Yi,{opened:u,onClose:()=>{l(!1),m("")},title:b.jsx(Xe,{children:"Delete Live Data"}),children:[b.jsxs(Xe,{mb:"sm",children:["This will permanently delete the live"," ",b.jsx(Xe,{span:!0,fw:700,children:e})," ","data. This action is"," ",b.jsx(Xe,{span:!0,fw:700,children:"irreversible"}),". Please consider using archive data to create a snapshot of the live data before deleting."]}),b.jsx(Jg,{label:"To delete this live data, please enter the name of the study.",placeholder:e,onChange:P=>m(P.target.value)}),b.jsxs(Nt,{mt:"sm",justify:"right",children:[b.jsx(fn,{mr:5,variant:"subtle",color:"dark",onClick:()=>{l(!1),m("")},children:"Cancel"}),b.jsx(fn,{color:"red",onClick:F,disabled:p!==e,children:"Delete"})]})]})]})}function E4t({studyId:e}){const{storageEngine:t}=Cs(),[n,r]=I.useState(!1),[i,s]=I.useState(!1),[o,a]=I.useState(!1),[u,l]=I.useState(!1);I.useEffect(()=>{(async()=>{if(t){const d=await t.getModes(e);s(d.dataCollectionEnabled),a(d.studyNavigatorEnabled),l(d.analyticsInterfacePubliclyAccessible),r(!0)}})()},[t,e]);const c=async(f,d)=>{t&&(await t.setMode(e,f,d),f==="dataCollectionEnabled"?s(d):f==="studyNavigatorEnabled"?a(d):f==="analyticsInterfacePubliclyAccessible"&&l(d))};return n&&b.jsxs(Nf,{children:[b.jsx(Xw,{label:"Data Collection Enabled",checked:i,onChange:f=>c("dataCollectionEnabled",f.currentTarget.checked)}),b.jsx(Xw,{label:"Study Navigator Enabled",checked:o,onChange:f=>c("studyNavigatorEnabled",f.currentTarget.checked)}),b.jsx(Xw,{label:"Analytics Interface Publicly Accessible",checked:u,onChange:f=>c("analyticsInterfacePubliclyAccessible",f.currentTarget.checked)})]})}function x4t({studyId:e,refresh:t}){const{storageEngine:n}=Cs();return b.jsx($c,{children:b.jsxs(Eu,{multiple:!0,variant:"contained",children:[b.jsxs(Eu.Item,{value:"ReVISit Modes",children:[b.jsx(Eu.Control,{children:b.jsx(li,{order:5,children:"ReVISit Modes"})}),b.jsx(Eu.Panel,{children:b.jsx(E4t,{studyId:e})})]},"modes"),b.jsxs(Eu.Item,{value:"Data Management",children:[b.jsx(Eu.Control,{disabled:(n==null?void 0:n.getEngine())==="localStorage",children:b.jsx(li,{order:5,children:"Data Management"})}),b.jsx(Eu.Panel,{children:(n==null?void 0:n.getEngine())!=="localStorage"&&b.jsx(w4t,{studyId:e,refresh:t})})]},"dataManagement")]})})}const U_=14;function yOe({completed:e,inProgress:t,rejected:n,filteredCompleted:r}){return b.jsxs(Nt,{ml:4,gap:4,children:[b.jsx(ui,{label:"Completed",children:b.jsx(_0,{variant:"light",color:"green",leftSection:b.jsx($we,{width:U_,height:U_,style:{paddingTop:1}}),pb:1,children:r&&r!==e?`${r}/${e}`:e})}),b.jsx(ui,{label:"In Progress",children:b.jsx(_0,{variant:"light",color:"orange",leftSection:b.jsx(Lwe,{width:U_,height:U_,style:{paddingTop:1}}),pb:1,children:t})}),b.jsx(ui,{label:"Rejected",children:b.jsx(_0,{variant:"light",color:"red",leftSection:b.jsx(OY,{width:U_,height:U_,style:{paddingTop:1}}),pb:1,children:n})})]})}const Epe={};function iH(e,t){e===void 0&&(e=Epe),t===void 0&&(t=Epe);const n=Object.keys(e),r=Object.keys(t);return e===t||n.length===r.length&&n.every(i=>e[i]===t[i])}/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2022 Joachim Wester
 * MIT licensed
 */var S4t=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},e(t,n)};return function(t,n){e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),T4t=Object.prototype.hasOwnProperty;function sH(e,t){return T4t.call(e,t)}function oH(e){if(Array.isArray(e)){for(var t=new Array(e.length),n=0;n<t.length;n++)t[n]=""+n;return t}if(Object.keys)return Object.keys(e);var r=[];for(var i in e)sH(e,i)&&r.push(i);return r}function kl(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}}function aH(e){for(var t=0,n=e.length,r;t<n;){if(r=e.charCodeAt(t),r>=48&&r<=57){t++;continue}return!1}return!0}function jv(e){return e.indexOf("/")===-1&&e.indexOf("~")===-1?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function vOe(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function uH(e){if(e===void 0)return!0;if(e){if(Array.isArray(e)){for(var t=0,n=e.length;t<n;t++)if(uH(e[t]))return!0}else if(typeof e=="object"){for(var r=oH(e),i=r.length,s=0;s<i;s++)if(uH(e[r[s]]))return!0}}return!1}function xpe(e,t){var n=[e];for(var r in t){var i=typeof t[r]=="object"?JSON.stringify(t[r],null,2):t[r];typeof i<"u"&&n.push(r+": "+i)}return n.join(`
`)}var bOe=function(e){S4t(t,e);function t(n,r,i,s,o){var a=this.constructor,u=e.call(this,xpe(n,{name:r,index:i,operation:s,tree:o}))||this;return u.name=r,u.index=i,u.operation=s,u.tree=o,Object.setPrototypeOf(u,a.prototype),u.message=xpe(n,{name:r,index:i,operation:s,tree:o}),u}return t}(Error),Ui=bOe,C4t=kl,$w={add:function(e,t,n){return e[t]=this.value,{newDocument:n}},remove:function(e,t,n){var r=e[t];return delete e[t],{newDocument:n,removed:r}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:function(e,t,n){var r=lM(n,this.path);r&&(r=kl(r));var i=R1(n,{op:"remove",path:this.from}).removed;return R1(n,{op:"add",path:this.path,value:i}),{newDocument:n,removed:r}},copy:function(e,t,n){var r=lM(n,this.from);return R1(n,{op:"add",path:this.path,value:kl(r)}),{newDocument:n}},test:function(e,t,n){return{newDocument:n,test:NI(e[t],this.value)}},_get:function(e,t,n){return this.value=e[t],{newDocument:n}}},A4t={add:function(e,t,n){return aH(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:n,index:t}},remove:function(e,t,n){var r=e.splice(t,1);return{newDocument:n,removed:r[0]}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:$w.move,copy:$w.copy,test:$w.test,_get:$w._get};function lM(e,t){if(t=="")return e;var n={op:"_get",path:t};return R1(e,n),n.value}function R1(e,t,n,r,i,s){if(n===void 0&&(n=!1),r===void 0&&(r=!0),i===void 0&&(i=!0),s===void 0&&(s=0),n&&(typeof n=="function"?n(t,0,e,t.path):cM(t,0)),t.path===""){var o={newDocument:e};if(t.op==="add")return o.newDocument=t.value,o;if(t.op==="replace")return o.newDocument=t.value,o.removed=e,o;if(t.op==="move"||t.op==="copy")return o.newDocument=lM(e,t.from),t.op==="move"&&(o.removed=e),o;if(t.op==="test"){if(o.test=NI(e,t.value),o.test===!1)throw new Ui("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o.newDocument=e,o}else{if(t.op==="remove")return o.removed=e,o.newDocument=null,o;if(t.op==="_get")return t.value=e,o;if(n)throw new Ui("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",s,t,e);return o}}else{r||(e=kl(e));var a=t.path||"",u=a.split("/"),l=e,c=1,f=u.length,d=void 0,h=void 0,p=void 0;for(typeof n=="function"?p=n:p=cM;;){if(h=u[c],h&&h.indexOf("~")!=-1&&(h=vOe(h)),i&&(h=="__proto__"||h=="prototype"&&c>0&&u[c-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&d===void 0&&(l[h]===void 0?d=u.slice(0,c).join("/"):c==f-1&&(d=t.path),d!==void 0&&p(t,0,e,d)),c++,Array.isArray(l)){if(h==="-")h=l.length;else{if(n&&!aH(h))throw new Ui("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",s,t,e);aH(h)&&(h=~~h)}if(c>=f){if(n&&t.op==="add"&&h>l.length)throw new Ui("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",s,t,e);var o=A4t[t.op].call(t,l,h,e);if(o.test===!1)throw new Ui("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o}}else if(c>=f){var o=$w[t.op].call(t,l,h,e);if(o.test===!1)throw new Ui("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o}if(l=l[h],n&&c<f&&(!l||typeof l!="object"))throw new Ui("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",s,t,e)}}}function X4(e,t,n,r,i){if(r===void 0&&(r=!0),i===void 0&&(i=!0),n&&!Array.isArray(t))throw new Ui("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");r||(e=kl(e));for(var s=new Array(t.length),o=0,a=t.length;o<a;o++)s[o]=R1(e,t[o],n,!0,i,o),e=s[o].newDocument;return s.newDocument=e,s}function I4t(e,t,n){var r=R1(e,t);if(r.test===!1)throw new Ui("Test operation failed","TEST_OPERATION_FAILED",n,t,e);return r.newDocument}function cM(e,t,n,r){if(typeof e!="object"||e===null||Array.isArray(e))throw new Ui("Operation is not an object","OPERATION_NOT_AN_OBJECT",t,e,n);if($w[e.op]){if(typeof e.path!="string")throw new Ui("Operation `path` property is not a string","OPERATION_PATH_INVALID",t,e,n);if(e.path.indexOf("/")!==0&&e.path.length>0)throw new Ui('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",t,e,n);if((e.op==="move"||e.op==="copy")&&typeof e.from!="string")throw new Ui("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&e.value===void 0)throw new Ui("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&uH(e.value))throw new Ui("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",t,e,n);if(n){if(e.op=="add"){var i=e.path.split("/").length,s=r.split("/").length;if(i!==s+1&&i!==s)throw new Ui("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",t,e,n)}else if(e.op==="replace"||e.op==="remove"||e.op==="_get"){if(e.path!==r)throw new Ui("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",t,e,n)}else if(e.op==="move"||e.op==="copy"){var o={op:"_get",path:e.from,value:void 0},a=_Oe([o],n);if(a&&a.name==="OPERATION_PATH_UNRESOLVABLE")throw new Ui("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",t,e,n)}}}else throw new Ui("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",t,e,n)}function _Oe(e,t,n){try{if(!Array.isArray(e))throw new Ui("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)X4(kl(t),kl(e),n||!0);else{n=n||cM;for(var r=0;r<e.length;r++)n(e[r],r,t,void 0)}}catch(i){if(i instanceof Ui)return i;throw i}}function NI(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){var n=Array.isArray(e),r=Array.isArray(t),i,s,o;if(n&&r){if(s=e.length,s!=t.length)return!1;for(i=s;i--!==0;)if(!NI(e[i],t[i]))return!1;return!0}if(n!=r)return!1;var a=Object.keys(e);if(s=a.length,s!==Object.keys(t).length)return!1;for(i=s;i--!==0;)if(!t.hasOwnProperty(a[i]))return!1;for(i=s;i--!==0;)if(o=a[i],!NI(e[o],t[o]))return!1;return!0}return e!==e&&t!==t}const k4t=Object.freeze(Object.defineProperty({__proto__:null,JsonPatchError:Ui,_areEquals:NI,applyOperation:R1,applyPatch:X4,applyReducer:I4t,deepClone:C4t,getValueByPointer:lM,validate:_Oe,validator:cM},Symbol.toStringTag,{value:"Module"}));/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2021 Joachim Wester
 * MIT license
 */var zZ=new WeakMap,R4t=function(){function e(t){this.observers=new Map,this.obj=t}return e}(),N4t=function(){function e(t,n){this.callback=t,this.observer=n}return e}();function P4t(e){return zZ.get(e)}function D4t(e,t){return e.observers.get(t)}function O4t(e,t){e.observers.delete(t.callback)}function $4t(e,t){t.unobserve()}function M4t(e,t){var n=[],r,i=P4t(e);if(!i)i=new R4t(e),zZ.set(e,i);else{var s=D4t(i,t);r=s&&s.observer}if(r)return r;if(r={},i.value=kl(e),t){r.callback=t,r.next=null;var o=function(){lH(r)},a=function(){clearTimeout(r.next),r.next=setTimeout(o)};typeof window<"u"&&(window.addEventListener("mouseup",a),window.addEventListener("keyup",a),window.addEventListener("mousedown",a),window.addEventListener("keydown",a),window.addEventListener("change",a))}return r.patches=n,r.object=e,r.unobserve=function(){lH(r),clearTimeout(r.next),O4t(i,r),typeof window<"u"&&(window.removeEventListener("mouseup",a),window.removeEventListener("keyup",a),window.removeEventListener("mousedown",a),window.removeEventListener("keydown",a),window.removeEventListener("change",a))},i.observers.set(t,new N4t(t,r)),r}function lH(e,t){t===void 0&&(t=!1);var n=zZ.get(e.object);VZ(n.value,e.object,e.patches,"",t),e.patches.length&&X4(n.value,e.patches);var r=e.patches;return r.length>0&&(e.patches=[],e.callback&&e.callback(r)),r}function VZ(e,t,n,r,i){if(t!==e){typeof t.toJSON=="function"&&(t=t.toJSON());for(var s=oH(t),o=oH(e),a=!1,u=o.length-1;u>=0;u--){var l=o[u],c=e[l];if(sH(t,l)&&!(t[l]===void 0&&c!==void 0&&Array.isArray(t)===!1)){var f=t[l];typeof c=="object"&&c!=null&&typeof f=="object"&&f!=null&&Array.isArray(c)===Array.isArray(f)?VZ(c,f,n,r+"/"+jv(l),i):c!==f&&(i&&n.push({op:"test",path:r+"/"+jv(l),value:kl(c)}),n.push({op:"replace",path:r+"/"+jv(l),value:kl(f)}))}else Array.isArray(e)===Array.isArray(t)?(i&&n.push({op:"test",path:r+"/"+jv(l),value:kl(c)}),n.push({op:"remove",path:r+"/"+jv(l)}),a=!0):(i&&n.push({op:"test",path:r,value:e}),n.push({op:"replace",path:r,value:t}))}if(!(!a&&s.length==o.length))for(var u=0;u<s.length;u++){var l=s[u];!sH(e,l)&&t[l]!==void 0&&n.push({op:"add",path:r+"/"+jv(l),value:kl(t[l])})}}}function L4t(e,t,n){n===void 0&&(n=!1);var r=[];return VZ(e,t,r,"",n),r}const F4t=Object.freeze(Object.defineProperty({__proto__:null,compare:L4t,generate:lH,observe:M4t,unobserve:$4t},Symbol.toStringTag,{value:"Module"}));Object.assign({},k4t,F4t,{JsonPatchError:bOe,deepClone:kl,escapePathComponent:jv,unescapePathComponent:vOe});var j4t=/("(?:[^\\"]|\\.)*")|[:,]/g,B4t=function(t,n){var r,i,s;return n=n||{},r=JSON.stringify([1],void 0,n.indent===void 0?2:n.indent).slice(2,-3),i=r===""?1/0:n.maxLength===void 0?80:n.maxLength,s=n.replacer,function o(a,u,l){var c,f,d,h,p,m,g,y,v,_,w,E;if(a&&typeof a.toJSON=="function"&&(a=a.toJSON()),w=JSON.stringify(a,s),w===void 0)return w;if(g=i-u.length-l,w.length<=g&&(v=w.replace(j4t,function(S,T){return T||S+" "}),v.length<=g))return v;if(s!=null&&(a=JSON.parse(w),s=void 0),typeof a=="object"&&a!==null){if(y=u+r,d=[],f=0,Array.isArray(a))for(_="[",c="]",g=a.length;f<g;f++)d.push(o(a[f],y,f===g-1?0:1)||"null");else for(_="{",c="}",m=Object.keys(a),g=m.length;f<g;f++)h=m[f],p=JSON.stringify(h)+": ",E=o(a[h],y,p.length+(f===g-1?0:1)),E!==void 0&&d.push(p+E);if(d.length>0)return[_,r+d.join(`,
`+y),c].join(`
`+u)}return w}(t,"",0)};const G9=Xl(B4t);function ll(e,t,n){return e.fields=t||[],e.fname=n,e}function Ki(e){return e==null?null:e.fname}function ga(e){return e==null?null:e.fields}function wOe(e){return e.length===1?U4t(e[0]):z4t(e)}const U4t=e=>function(t){return t[e]},z4t=e=>{const t=e.length;return function(n){for(let r=0;r<t;++r)n=n[e[r]];return n}};function Le(e){throw Error(e)}function ip(e){const t=[],n=e.length;let r=null,i=0,s="",o,a,u;e=e+"";function l(){t.push(s+e.substring(o,a)),s="",o=a+1}for(o=a=0;a<n;++a)if(u=e[a],u==="\\")s+=e.substring(o,a++),o=a;else if(u===r)l(),r=null,i=-1;else{if(r)continue;o===i&&u==='"'||o===i&&u==="'"?(o=a+1,r=u):u==="."&&!i?a>o?l():o=a+1:u==="["?(a>o&&l(),i=o=a+1):u==="]"&&(i||Le("Access path missing open bracket: "+e),i>0&&l(),i=0,o=a+1)}return i&&Le("Access path missing closing bracket: "+e),r&&Le("Access path missing closing quote: "+e),a>o&&(a++,l()),t}function Fc(e,t,n){const r=ip(e);return e=r.length===1?r[0]:e,ll((n&&n.get||wOe)(r),[e],t||e)}const dR=Fc("id"),xa=ll(e=>e,[],"identity"),Kg=ll(()=>0,[],"zero"),VS=ll(()=>1,[],"one"),jc=ll(()=>!0,[],"true"),Ag=ll(()=>!1,[],"false");function V4t(e,t,n){const r=[t].concat([].slice.call(n));console[e].apply(console,r)}const EOe=0,HZ=1,qZ=2,xOe=3,SOe=4;function WZ(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:V4t,r=e||EOe;return{level(i){return arguments.length?(r=+i,this):r},error(){return r>=HZ&&n(t||"error","ERROR",arguments),this},warn(){return r>=qZ&&n(t||"warn","WARN",arguments),this},info(){return r>=xOe&&n(t||"log","INFO",arguments),this},debug(){return r>=SOe&&n(t||"log","DEBUG",arguments),this}}}var je=Array.isArray;function gt(e){return e===Object(e)}const Spe=e=>e!=="__proto__";function HS(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((r,i)=>{for(const s in i)if(s==="signals")r.signals=H4t(r.signals,i.signals);else{const o=s==="legend"?{layout:1}:s==="style"?!0:null;qS(r,s,i[s],o)}return r},{})}function qS(e,t,n,r){if(!Spe(t))return;let i,s;if(gt(n)&&!je(n)){s=gt(e[t])?e[t]:e[t]={};for(i in n)r&&(r===!0||r[i])?qS(s,i,n[i]):Spe(i)&&(s[i]=n[i])}else e[t]=n}function H4t(e,t){if(e==null)return t;const n={},r=[];function i(s){n[s.name]||(n[s.name]=1,r.push(s))}return t.forEach(i),e.forEach(i),r}function Qn(e){return e[e.length-1]}function ha(e){return e==null||e===""?null:+e}const TOe=e=>t=>e*Math.exp(t),COe=e=>t=>Math.log(e*t),AOe=e=>t=>Math.sign(t)*Math.log1p(Math.abs(t/e)),IOe=e=>t=>Math.sign(t)*Math.expm1(Math.abs(t))*e,fM=e=>t=>t<0?-Math.pow(-t,e):Math.pow(t,e);function Q4(e,t,n,r){const i=n(e[0]),s=n(Qn(e)),o=(s-i)*t;return[r(i-o),r(s-o)]}function kOe(e,t){return Q4(e,t,ha,xa)}function ROe(e,t){var n=Math.sign(e[0]);return Q4(e,t,COe(n),TOe(n))}function NOe(e,t,n){return Q4(e,t,fM(n),fM(1/n))}function POe(e,t,n){return Q4(e,t,AOe(n),IOe(n))}function J4(e,t,n,r,i){const s=r(e[0]),o=r(Qn(e)),a=t!=null?r(t):(s+o)/2;return[i(a+(s-a)*n),i(a+(o-a)*n)]}function GZ(e,t,n){return J4(e,t,n,ha,xa)}function YZ(e,t,n){const r=Math.sign(e[0]);return J4(e,t,n,COe(r),TOe(r))}function dM(e,t,n,r){return J4(e,t,n,fM(r),fM(1/r))}function KZ(e,t,n,r){return J4(e,t,n,AOe(r),IOe(r))}function DOe(e){return 1+~~(new Date(e).getMonth()/3)}function OOe(e){return 1+~~(new Date(e).getUTCMonth()/3)}function pt(e){return e!=null?je(e)?e:[e]:[]}function $Oe(e,t,n){let r=e[0],i=e[1],s;return i<r&&(s=i,i=r,r=s),s=i-r,s>=n-t?[t,n]:[r=Math.min(Math.max(r,t),n-s),r+s]}function _n(e){return typeof e=="function"}const q4t="descending";function XZ(e,t,n){n=n||{},t=pt(t)||[];const r=[],i=[],s={},o=n.comparator||W4t;return pt(e).forEach((a,u)=>{a!=null&&(r.push(t[u]===q4t?-1:1),i.push(a=_n(a)?a:Fc(a,null,n)),(ga(a)||[]).forEach(l=>s[l]=1))}),i.length===0?null:ll(o(i,r),Object.keys(s))}const Z4=(e,t)=>(e<t||e==null)&&t!=null?-1:(e>t||t==null)&&e!=null?1:(t=t instanceof Date?+t:t,(e=e instanceof Date?+e:e)!==e&&t===t?-1:t!==t&&e===e?1:0),W4t=(e,t)=>e.length===1?G4t(e[0],t[0]):Y4t(e,t,e.length),G4t=(e,t)=>function(n,r){return Z4(e(n),e(r))*t},Y4t=(e,t,n)=>(t.push(0),function(r,i){let s,o=0,a=-1;for(;o===0&&++a<n;)s=e[a],o=Z4(s(r),s(i));return o*t[a]});function Sa(e){return _n(e)?e:()=>e}function QZ(e,t){let n;return r=>{n&&clearTimeout(n),n=setTimeout(()=>(t(r),n=null),e)}}function bn(e){for(let t,n,r=1,i=arguments.length;r<i;++r){t=arguments[r];for(n in t)e[n]=t[n]}return e}function Fh(e,t){let n=0,r,i,s,o;if(e&&(r=e.length))if(t==null){for(i=e[n];n<r&&(i==null||i!==i);i=e[++n]);for(s=o=i;n<r;++n)i=e[n],i!=null&&(i<s&&(s=i),i>o&&(o=i))}else{for(i=t(e[n]);n<r&&(i==null||i!==i);i=t(e[++n]));for(s=o=i;n<r;++n)i=t(e[n]),i!=null&&(i<s&&(s=i),i>o&&(o=i))}return[s,o]}function MOe(e,t){const n=e.length;let r=-1,i,s,o,a,u;if(t==null){for(;++r<n;)if(s=e[r],s!=null&&s>=s){i=o=s;break}if(r===n)return[-1,-1];for(a=u=r;++r<n;)s=e[r],s!=null&&(i>s&&(i=s,a=r),o<s&&(o=s,u=r))}else{for(;++r<n;)if(s=t(e[r],r,e),s!=null&&s>=s){i=o=s;break}if(r===n)return[-1,-1];for(a=u=r;++r<n;)s=t(e[r],r,e),s!=null&&(i>s&&(i=s,a=r),o<s&&(o=s,u=r))}return[a,u]}const K4t=Object.prototype.hasOwnProperty;function jt(e,t){return K4t.call(e,t)}const SP={};function WS(e){let t={},n;function r(s){return jt(t,s)&&t[s]!==SP}const i={size:0,empty:0,object:t,has:r,get(s){return r(s)?t[s]:void 0},set(s,o){return r(s)||(++i.size,t[s]===SP&&--i.empty),t[s]=o,this},delete(s){return r(s)&&(--i.size,++i.empty,t[s]=SP),this},clear(){i.size=i.empty=0,i.object=t={}},test(s){return arguments.length?(n=s,i):n},clean(){const s={};let o=0;for(const a in t){const u=t[a];u!==SP&&(!n||!n(u))&&(s[a]=u,++o)}i.size=o,i.empty=0,i.object=t=s}};return e&&Object.keys(e).forEach(s=>{i.set(s,e[s])}),i}function LOe(e,t,n,r,i,s){if(!n&&n!==0)return s;const o=+n;let a=e[0],u=Qn(e),l;u<a&&(l=a,a=u,u=l),l=Math.abs(t-a);const c=Math.abs(u-t);return l<c&&l<=o?r:c<=o?i:s}function lt(e,t,n){const r=e.prototype=Object.create(t.prototype);return Object.defineProperty(r,"constructor",{value:e,writable:!0,enumerable:!0,configurable:!0}),bn(r,n)}function Mw(e,t,n,r){let i=t[0],s=t[t.length-1],o;return i>s&&(o=i,i=s,s=o),n=n===void 0||n,r=r===void 0||r,(n?i<=e:i<e)&&(r?e<=s:e<s)}function Yy(e){return typeof e=="boolean"}function P0(e){return Object.prototype.toString.call(e)==="[object Date]"}function FOe(e){return e&&_n(e[Symbol.iterator])}function lr(e){return typeof e=="number"}function jOe(e){return Object.prototype.toString.call(e)==="[object RegExp]"}function mt(e){return typeof e=="string"}function JZ(e,t,n){e&&(e=t?pt(e).map(a=>a.replace(/\\(.)/g,"$1")):pt(e));const r=e&&e.length,i=n&&n.get||wOe,s=a=>i(t?[a]:ip(a));let o;if(!r)o=function(){return""};else if(r===1){const a=s(e[0]);o=function(u){return""+a(u)}}else{const a=e.map(s);o=function(u){let l=""+a[0](u),c=0;for(;++c<r;)l+="|"+a[c](u);return l}}return ll(o,e,"key")}function BOe(e,t){const n=e[0],r=Qn(e),i=+t;return i?i===1?r:n+i*(r-n):n}const X4t=1e4;function UOe(e){e=+e||X4t;let t,n,r;const i=()=>{t={},n={},r=0},s=(o,a)=>(++r>e&&(n=t,t={},r=1),t[o]=a);return i(),{clear:i,has:o=>jt(t,o)||jt(n,o),get:o=>jt(t,o)?t[o]:jt(n,o)?s(o,n[o]):void 0,set:(o,a)=>jt(t,o)?t[o]=a:s(o,a)}}function zOe(e,t,n,r){const i=t.length,s=n.length;if(!s)return t;if(!i)return n;const o=r||new t.constructor(i+s);let a=0,u=0,l=0;for(;a<i&&u<s;++l)o[l]=e(t[a],n[u])>0?n[u++]:t[a++];for(;a<i;++a,++l)o[l]=t[a];for(;u<s;++u,++l)o[l]=n[u];return o}function q2(e,t){let n="";for(;--t>=0;)n+=e;return n}function VOe(e,t,n,r){const i=n||" ",s=e+"",o=t-s.length;return o<=0?s:r==="left"?q2(i,o)+s:r==="center"?q2(i,~~(o/2))+s+q2(i,Math.ceil(o/2)):s+q2(i,o)}function hR(e){return e&&Qn(e)-e[0]||0}function rt(e){return je(e)?"["+e.map(rt)+"]":gt(e)||mt(e)?JSON.stringify(e).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):e}function ZZ(e){return e==null||e===""?null:!e||e==="false"||e==="0"?!1:!!e}const Q4t=e=>lr(e)||P0(e)?e:Date.parse(e);function eee(e,t){return t=t||Q4t,e==null||e===""?null:t(e)}function tee(e){return e==null||e===""?null:e+""}function td(e){const t={},n=e.length;for(let r=0;r<n;++r)t[e[r]]=!0;return t}function HOe(e,t,n,r){const i=r??"…",s=e+"",o=s.length,a=Math.max(0,t-i.length);return o<=t?s:n==="left"?i+s.slice(o-a):n==="center"?s.slice(0,Math.ceil(a/2))+i+s.slice(o-~~(a/2)):s.slice(0,a)+i}function Mg(e,t,n){if(e)if(t){const r=e.length;for(let i=0;i<r;++i){const s=t(e[i]);s&&n(s,i,e)}}else e.forEach(n)}function J4t(e){return e}function Z4t(e){if(e==null)return J4t;var t,n,r=e.scale[0],i=e.scale[1],s=e.translate[0],o=e.translate[1];return function(a,u){u||(t=n=0);var l=2,c=a.length,f=new Array(c);for(f[0]=(t+=a[0])*r+s,f[1]=(n+=a[1])*i+o;l<c;)f[l]=a[l],++l;return f}}function eFt(e,t){for(var n,r=e.length,i=r-t;i<--r;)n=e[i],e[i++]=e[r],e[r]=n}function tFt(e,t){return typeof t=="string"&&(t=e.objects[t]),t.type==="GeometryCollection"?{type:"FeatureCollection",features:t.geometries.map(function(n){return Tpe(e,n)})}:Tpe(e,t)}function Tpe(e,t){var n=t.id,r=t.bbox,i=t.properties==null?{}:t.properties,s=qOe(e,t);return n==null&&r==null?{type:"Feature",properties:i,geometry:s}:r==null?{type:"Feature",id:n,properties:i,geometry:s}:{type:"Feature",id:n,bbox:r,properties:i,geometry:s}}function qOe(e,t){var n=Z4t(e.transform),r=e.arcs;function i(c,f){f.length&&f.pop();for(var d=r[c<0?~c:c],h=0,p=d.length;h<p;++h)f.push(n(d[h],h));c<0&&eFt(f,p)}function s(c){return n(c)}function o(c){for(var f=[],d=0,h=c.length;d<h;++d)i(c[d],f);return f.length<2&&f.push(f[0]),f}function a(c){for(var f=o(c);f.length<4;)f.push(f[0]);return f}function u(c){return c.map(a)}function l(c){var f=c.type,d;switch(f){case"GeometryCollection":return{type:f,geometries:c.geometries.map(l)};case"Point":d=s(c.coordinates);break;case"MultiPoint":d=c.coordinates.map(s);break;case"LineString":d=o(c.arcs);break;case"MultiLineString":d=c.arcs.map(o);break;case"Polygon":d=u(c.arcs);break;case"MultiPolygon":d=c.arcs.map(u);break;default:return null}return{type:f,coordinates:d}}return l(t)}function nFt(e,t){var n={},r={},i={},s=[],o=-1;t.forEach(function(l,c){var f=e.arcs[l<0?~l:l],d;f.length<3&&!f[1][0]&&!f[1][1]&&(d=t[++o],t[o]=l,t[c]=d)}),t.forEach(function(l){var c=a(l),f=c[0],d=c[1],h,p;if(h=i[f])if(delete i[h.end],h.push(l),h.end=d,p=r[d]){delete r[p.start];var m=p===h?h:h.concat(p);r[m.start=h.start]=i[m.end=p.end]=m}else r[h.start]=i[h.end]=h;else if(h=r[d])if(delete r[h.start],h.unshift(l),h.start=f,p=i[f]){delete i[p.end];var g=p===h?h:p.concat(h);r[g.start=p.start]=i[g.end=h.end]=g}else r[h.start]=i[h.end]=h;else h=[l],r[h.start=f]=i[h.end=d]=h});function a(l){var c=e.arcs[l<0?~l:l],f=c[0],d;return e.transform?(d=[0,0],c.forEach(function(h){d[0]+=h[0],d[1]+=h[1]})):d=c[c.length-1],l<0?[d,f]:[f,d]}function u(l,c){for(var f in l){var d=l[f];delete c[d.start],delete d.start,delete d.end,d.forEach(function(h){n[h<0?~h:h]=1}),s.push(d)}}return u(i,r),u(r,i),t.forEach(function(l){n[l<0?~l:l]||s.push([l])}),s}function rFt(e){return qOe(e,iFt.apply(this,arguments))}function iFt(e,t,n){var r,i,s;if(arguments.length>1)r=sFt(e,t,n);else for(i=0,r=new Array(s=e.arcs.length);i<s;++i)r[i]=i;return{type:"MultiLineString",arcs:nFt(e,r)}}function sFt(e,t,n){var r=[],i=[],s;function o(f){var d=f<0?~f:f;(i[d]||(i[d]=[])).push({i:f,g:s})}function a(f){f.forEach(o)}function u(f){f.forEach(a)}function l(f){f.forEach(u)}function c(f){switch(s=f,f.type){case"GeometryCollection":f.geometries.forEach(c);break;case"LineString":a(f.arcs);break;case"MultiLineString":case"Polygon":u(f.arcs);break;case"MultiPolygon":l(f.arcs);break}}return c(t),i.forEach(n==null?function(f){r.push(f[0].i)}:function(f){n(f[0].g,f[f.length-1].g)&&r.push(f[0].i)}),r}const $o="year",rl="quarter",ya="month",$s="week",il="date",da="day",jh="dayofyear",ql="hours",Wl="minutes",Bc="seconds",nd="milliseconds",nee=[$o,rl,ya,$s,il,da,jh,ql,Wl,Bc,nd],Y9=nee.reduce((e,t,n)=>(e[t]=1+n,e),{});function ree(e){const t=pt(e).slice(),n={};return t.length||Le("Missing time unit."),t.forEach(i=>{jt(Y9,i)?n[i]=1:Le(`Invalid time unit: ${i}.`)}),(n[$s]||n[da]?1:0)+(n[rl]||n[ya]||n[il]?1:0)+(n[jh]?1:0)>1&&Le(`Incompatible time units: ${e}`),t.sort((i,s)=>Y9[i]-Y9[s]),t}const oFt={[$o]:"%Y ",[rl]:"Q%q ",[ya]:"%b ",[il]:"%d ",[$s]:"W%U ",[da]:"%a ",[jh]:"%j ",[ql]:"%H:00",[Wl]:"00:%M",[Bc]:":%S",[nd]:".%L",[`${$o}-${ya}`]:"%Y-%m ",[`${$o}-${ya}-${il}`]:"%Y-%m-%d ",[`${ql}-${Wl}`]:"%H:%M"};function WOe(e,t){const n=bn({},oFt,t),r=ree(e),i=r.length;let s="",o=0,a,u;for(o=0;o<i;)for(a=r.length;a>o;--a)if(u=r.slice(o,a).join("-"),n[u]!=null){s+=n[u],o=a;break}return s.trim()}const Kv=new Date;function iee(e){return Kv.setFullYear(e),Kv.setMonth(0),Kv.setDate(1),Kv.setHours(0,0,0,0),Kv}function GOe(e){return KOe(new Date(e))}function YOe(e){return cH(new Date(e))}function KOe(e){return am.count(iee(e.getFullYear())-1,e)}function cH(e){return vS.count(iee(e.getFullYear())-1,e)}function fH(e){return iee(e).getDay()}function aFt(e,t,n,r,i,s,o){if(0<=e&&e<100){const a=new Date(-1,t,n,r,i,s,o);return a.setFullYear(e),a}return new Date(e,t,n,r,i,s,o)}function XOe(e){return JOe(new Date(e))}function QOe(e){return dH(new Date(e))}function JOe(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return S0.count(t-1,e)}function dH(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return bS.count(t-1,e)}function hH(e){return Kv.setTime(Date.UTC(e,0,1)),Kv.getUTCDay()}function uFt(e,t,n,r,i,s,o){if(0<=e&&e<100){const a=new Date(Date.UTC(-1,t,n,r,i,s,o));return a.setUTCFullYear(n.y),a}return new Date(Date.UTC(e,t,n,r,i,s,o))}function ZOe(e,t,n,r,i){const s=t||1,o=Qn(e),a=(y,v,_)=>(_=_||y,lFt(n[_],r[_],y===o&&s,v)),u=new Date,l=td(e),c=l[$o]?a($o):Sa(2012),f=l[ya]?a(ya):l[rl]?a(rl):Kg,d=l[$s]&&l[da]?a(da,1,$s+da):l[$s]?a($s,1):l[da]?a(da,1):l[il]?a(il,1):l[jh]?a(jh,1):VS,h=l[ql]?a(ql):Kg,p=l[Wl]?a(Wl):Kg,m=l[Bc]?a(Bc):Kg,g=l[nd]?a(nd):Kg;return function(y){u.setTime(+y);const v=c(u);return i(v,f(u),d(u,v),h(u),p(u),m(u),g(u))}}function lFt(e,t,n,r){const i=n<=1?e:r?(s,o)=>r+n*Math.floor((e(s,o)-r)/n):(s,o)=>n*Math.floor(e(s,o)/n);return t?(s,o)=>t(i(s,o),o):i}function wx(e,t,n){return t+e*7-(n+6)%7}const cFt={[$o]:e=>e.getFullYear(),[rl]:e=>Math.floor(e.getMonth()/3),[ya]:e=>e.getMonth(),[il]:e=>e.getDate(),[ql]:e=>e.getHours(),[Wl]:e=>e.getMinutes(),[Bc]:e=>e.getSeconds(),[nd]:e=>e.getMilliseconds(),[jh]:e=>KOe(e),[$s]:e=>cH(e),[$s+da]:(e,t)=>wx(cH(e),e.getDay(),fH(t)),[da]:(e,t)=>wx(1,e.getDay(),fH(t))},fFt={[rl]:e=>3*e,[$s]:(e,t)=>wx(e,0,fH(t))};function e3e(e,t){return ZOe(e,t||1,cFt,fFt,aFt)}const dFt={[$o]:e=>e.getUTCFullYear(),[rl]:e=>Math.floor(e.getUTCMonth()/3),[ya]:e=>e.getUTCMonth(),[il]:e=>e.getUTCDate(),[ql]:e=>e.getUTCHours(),[Wl]:e=>e.getUTCMinutes(),[Bc]:e=>e.getUTCSeconds(),[nd]:e=>e.getUTCMilliseconds(),[jh]:e=>JOe(e),[$s]:e=>dH(e),[da]:(e,t)=>wx(1,e.getUTCDay(),hH(t)),[$s+da]:(e,t)=>wx(dH(e),e.getUTCDay(),hH(t))},hFt={[rl]:e=>3*e,[$s]:(e,t)=>wx(e,0,hH(t))};function t3e(e,t){return ZOe(e,t||1,dFt,hFt,uFt)}const pFt={[$o]:Ah,[rl]:XA.every(3),[ya]:XA,[$s]:vS,[il]:am,[da]:am,[jh]:am,[ql]:F6,[Wl]:M6,[Bc]:Qp,[nd]:XE},mFt={[$o]:Ih,[rl]:QA.every(3),[ya]:QA,[$s]:bS,[il]:S0,[da]:S0,[jh]:S0,[ql]:j6,[Wl]:L6,[Bc]:Qp,[nd]:XE};function GS(e){return pFt[e]}function YS(e){return mFt[e]}function n3e(e,t,n){return e?e.offset(t,n):void 0}function r3e(e,t,n){return n3e(GS(e),t,n)}function i3e(e,t,n){return n3e(YS(e),t,n)}function s3e(e,t,n,r){return e?e.range(t,n,r):void 0}function o3e(e,t,n,r){return s3e(GS(e),t,n,r)}function a3e(e,t,n,r){return s3e(YS(e),t,n,r)}const W2=1e3,G2=W2*60,Y2=G2*60,eF=Y2*24,gFt=eF*7,Cpe=eF*30,pH=eF*365,u3e=[$o,ya,il,ql,Wl,Bc,nd],K2=u3e.slice(0,-1),X2=K2.slice(0,-1),Q2=X2.slice(0,-1),yFt=Q2.slice(0,-1),vFt=[$o,$s],Ape=[$o,ya],l3e=[$o],YT=[[K2,1,W2],[K2,5,5*W2],[K2,15,15*W2],[K2,30,30*W2],[X2,1,G2],[X2,5,5*G2],[X2,15,15*G2],[X2,30,30*G2],[Q2,1,Y2],[Q2,3,3*Y2],[Q2,6,6*Y2],[Q2,12,12*Y2],[yFt,1,eF],[vFt,1,gFt],[Ape,1,Cpe],[Ape,3,3*Cpe],[l3e,1,pH]];function c3e(e){const t=e.extent,n=e.maxbins||40,r=Math.abs(hR(t))/n;let i=pS(a=>a[2]).right(YT,r),s,o;return i===YT.length?(s=l3e,o=W0(t[0]/pH,t[1]/pH,n)):i?(i=YT[r/YT[i-1][2]<YT[i][2]/r?i-1:i],s=i[0],o=i[1]):(s=u3e,o=Math.max(W0(t[0],t[1],n),1)),{units:s,step:o}}function J2(e){const t={};return n=>t[n]||(t[n]=e(n))}function bFt(e,t){return n=>{const r=e(n),i=r.indexOf(t);if(i<0)return r;let s=_Ft(r,i);const o=s<r.length?r.slice(s):"";for(;--s>i;)if(r[s]!=="0"){++s;break}return r.slice(0,s)+o}}function _Ft(e,t){let n=e.lastIndexOf("e"),r;if(n>0)return n;for(n=e.length;--n>t;)if(r=e.charCodeAt(n),r>=48&&r<=57)return n+1}function f3e(e){const t=J2(e.format),n=e.formatPrefix;return{format:t,formatPrefix:n,formatFloat(r){const i=K1(r||",");if(i.precision==null){switch(i.precision=12,i.type){case"%":i.precision-=2;break;case"e":i.precision-=1;break}return bFt(t(i),t(".1f")(1)[1])}else return t(i)},formatSpan(r,i,s,o){o=K1(o??",f");const a=W0(r,i,s),u=Math.max(Math.abs(r),Math.abs(i));let l;if(o.precision==null)switch(o.type){case"s":return isNaN(l=nTe(a,u))||(o.precision=l),n(o,u);case"":case"e":case"g":case"p":case"r":{isNaN(l=rTe(a,u))||(o.precision=l-(o.type==="e"));break}case"f":case"%":{isNaN(l=tTe(a))||(o.precision=l-(o.type==="%")*2);break}}return t(o)}}}let mH;d3e();function d3e(){return mH=f3e({format:jy,formatPrefix:PK})}function h3e(e){return f3e(eTe(e))}function hM(e){return arguments.length?mH=h3e(e):mH}function Ipe(e,t,n){n=n||{},gt(n)||Le(`Invalid time multi-format specifier: ${n}`);const r=t(Bc),i=t(Wl),s=t(ql),o=t(il),a=t($s),u=t(ya),l=t(rl),c=t($o),f=e(n[nd]||".%L"),d=e(n[Bc]||":%S"),h=e(n[Wl]||"%I:%M"),p=e(n[ql]||"%I %p"),m=e(n[il]||n[da]||"%a %d"),g=e(n[$s]||"%b %d"),y=e(n[ya]||"%B"),v=e(n[rl]||"%B"),_=e(n[$o]||"%Y");return w=>(r(w)<w?f:i(w)<w?d:s(w)<w?h:o(w)<w?p:u(w)<w?a(w)<w?m:g:c(w)<w?l(w)<w?y:v:_)(w)}function p3e(e){const t=J2(e.format),n=J2(e.utcFormat);return{timeFormat:r=>mt(r)?t(r):Ipe(t,GS,r),utcFormat:r=>mt(r)?n(r):Ipe(n,YS,r),timeParse:J2(e.parse),utcParse:J2(e.utcParse)}}let gH;m3e();function m3e(){return gH=p3e({format:qK,parse:WK,utcFormat:Qb,utcParse:g2e})}function g3e(e){return p3e(f2e(e))}function PI(e){return arguments.length?gH=g3e(e):gH}const yH=(e,t)=>bn({},e,t);function y3e(e,t){const n=e?h3e(e):hM(),r=t?g3e(t):PI();return yH(n,r)}function see(e,t){const n=arguments.length;return n&&n!==2&&Le("defaultLocale expects either zero or two arguments."),n?yH(hM(e),PI(t)):yH(hM(),PI())}function wFt(){return d3e(),m3e(),see()}const EFt=/^(data:|([A-Za-z]+:)?\/\/)/,xFt=/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp|file|data):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,SFt=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,kpe="file://";function TFt(e,t){return n=>({options:n||{},sanitize:AFt,load:CFt,fileAccess:!!t,file:IFt(t),http:RFt(e)})}async function CFt(e,t){const n=await this.sanitize(e,t),r=n.href;return n.localFile?this.file(r):this.http(r,t)}async function AFt(e,t){t=bn({},this.options,t);const n=this.fileAccess,r={href:null};let i,s,o;const a=xFt.test(e.replace(SFt,""));(e==null||typeof e!="string"||!a)&&Le("Sanitize failure, invalid URI: "+rt(e));const u=EFt.test(e);return(o=t.baseURL)&&!u&&(!e.startsWith("/")&&!o.endsWith("/")&&(e="/"+e),e=o+e),s=(i=e.startsWith(kpe))||t.mode==="file"||t.mode!=="http"&&!u&&n,i?e=e.slice(kpe.length):e.startsWith("//")&&(t.defaultProtocol==="file"?(e=e.slice(2),s=!0):e=(t.defaultProtocol||"http")+":"+e),Object.defineProperty(r,"localFile",{value:!!s}),r.href=e,t.target&&(r.target=t.target+""),t.rel&&(r.rel=t.rel+""),t.context==="image"&&t.crossOrigin&&(r.crossOrigin=t.crossOrigin+""),r}function IFt(e){return e?t=>new Promise((n,r)=>{e.readFile(t,(i,s)=>{i?r(i):n(s)})}):kFt}async function kFt(){Le("No file system access.")}function RFt(e){return e?async function(t,n){const r=bn({},this.options.http,n),i=n&&n.response,s=await e(t,r);return s.ok?_n(s[i])?s[i]():s.text():Le(s.status+""+s.statusText)}:NFt}async function NFt(){Le("No HTTP fetch method available.")}const PFt=e=>e!=null&&e===e,DFt=e=>e==="true"||e==="false"||e===!0||e===!1,OFt=e=>!Number.isNaN(Date.parse(e)),v3e=e=>!Number.isNaN(+e)&&!(e instanceof Date),$Ft=e=>v3e(e)&&Number.isInteger(+e),vH={boolean:ZZ,integer:ha,number:ha,date:eee,string:tee,unknown:xa},TP=[DFt,$Ft,v3e,OFt],MFt=["boolean","integer","number","date"];function b3e(e,t){if(!e||!e.length)return"unknown";const n=e.length,r=TP.length,i=TP.map((s,o)=>o+1);for(let s=0,o=0,a,u;s<n;++s)for(u=t?e[s][t]:e[s],a=0;a<r;++a)if(i[a]&&PFt(u)&&!TP[a](u)&&(i[a]=0,++o,o===TP.length))return"string";return MFt[i.reduce((s,o)=>s===0?o:s,0)-1]}function _3e(e,t){return t.reduce((n,r)=>(n[r]=b3e(e,r),n),{})}function Rpe(e){const t=function(n,r){const i={delimiter:e};return oee(n,r?bn(r,i):i)};return t.responseType="text",t}function oee(e,t){return t.header&&(e=t.header.map(rt).join(t.delimiter)+`
`+e),QSe(t.delimiter).parse(e+"")}oee.responseType="text";function LFt(e){return typeof Buffer=="function"&&_n(Buffer.isBuffer)?Buffer.isBuffer(e):!1}function aee(e,t){const n=t&&t.property?Fc(t.property):xa;return gt(e)&&!LFt(e)?FFt(n(e),t):n(JSON.parse(e))}aee.responseType="json";function FFt(e,t){return!je(e)&&FOe(e)&&(e=[...e]),t&&t.copy?JSON.parse(JSON.stringify(e)):e}const jFt={interior:(e,t)=>e!==t,exterior:(e,t)=>e===t};function w3e(e,t){let n,r,i,s;return e=aee(e,t),t&&t.feature?(n=tFt,i=t.feature):t&&t.mesh?(n=rFt,i=t.mesh,s=jFt[t.filter]):Le("Missing TopoJSON feature or mesh parameter."),r=(r=e.objects[i])?n(e,r,s):Le("Invalid TopoJSON object: "+i),r&&r.features||[r]}w3e.responseType="json";const YD={dsv:oee,csv:Rpe(","),tsv:Rpe("	"),json:aee,topojson:w3e};function uee(e,t){return arguments.length>1?(YD[e]=t,this):jt(YD,e)?YD[e]:null}function E3e(e){const t=uee(e);return t&&t.responseType||"text"}function x3e(e,t,n,r){t=t||{};const i=uee(t.type||"json");return i||Le("Unknown data format type: "+t.type),e=i(e,t),t.parse&&BFt(e,t.parse,n,r),jt(e,"columns")&&delete e.columns,e}function BFt(e,t,n,r){if(!e.length)return;const i=PI();n=n||i.timeParse,r=r||i.utcParse;let s=e.columns||Object.keys(e[0]),o,a,u,l,c,f;t==="auto"&&(t=_3e(e,s)),s=Object.keys(t);const d=s.map(h=>{const p=t[h];let m,g;if(p&&(p.startsWith("date:")||p.startsWith("utc:")))return m=p.split(/:(.+)?/,2),g=m[1],(g[0]==="'"&&g[g.length-1]==="'"||g[0]==='"'&&g[g.length-1]==='"')&&(g=g.slice(1,-1)),(m[0]==="utc"?r:n)(g);if(!vH[p])throw Error("Illegal format pattern: "+h+":"+p);return vH[p]});for(u=0,c=e.length,f=s.length;u<c;++u)for(o=e[u],l=0;l<f;++l)a=s[l],o[a]=d[l](o[a])}const tF=TFt(typeof fetch<"u"&&fetch,null);function nF(e){const t=e||xa,n=[],r={};return n.add=i=>{const s=t(i);return r[s]||(r[s]=1,n.push(i)),n},n.remove=i=>{const s=t(i);if(r[s]){r[s]=0;const o=n.indexOf(i);o>=0&&n.splice(o,1)}return n},n}async function KD(e,t){try{await t(e)}catch(n){e.error(n)}}const S3e=Symbol("vega_id");let UFt=1;function rF(e){return!!(e&&Lt(e))}function Lt(e){return e[S3e]}function T3e(e,t){return e[S3e]=t,e}function Er(e){const t=e===Object(e)?e:{data:e};return Lt(t)?t:T3e(t,UFt++)}function lee(e){return iF(e,Er({}))}function iF(e,t){for(const n in e)t[n]=e[n];return t}function C3e(e,t){return T3e(t,Lt(e))}function i_(e,t){return e?t?(n,r)=>e(n,r)||Lt(t(n))-Lt(t(r)):(n,r)=>e(n,r)||Lt(n)-Lt(r):null}function A3e(e){return e&&e.constructor===s_}function s_(){const e=[],t=[],n=[],r=[],i=[];let s=null,o=!1;return{constructor:s_,insert(a){const u=pt(a),l=u.length;for(let c=0;c<l;++c)e.push(u[c]);return this},remove(a){const u=_n(a)?r:t,l=pt(a),c=l.length;for(let f=0;f<c;++f)u.push(l[f]);return this},modify(a,u,l){const c={field:u,value:Sa(l)};return _n(a)?(c.filter=a,i.push(c)):(c.tuple=a,n.push(c)),this},encode(a,u){return _n(a)?i.push({filter:a,field:u}):n.push({tuple:a,field:u}),this},clean(a){return s=a,this},reflow(){return o=!0,this},pulse(a,u){const l={},c={};let f,d,h,p,m,g;for(f=0,d=u.length;f<d;++f)l[Lt(u[f])]=1;for(f=0,d=t.length;f<d;++f)m=t[f],l[Lt(m)]=-1;for(f=0,d=r.length;f<d;++f)p=r[f],u.forEach(v=>{p(v)&&(l[Lt(v)]=-1)});for(f=0,d=e.length;f<d;++f)m=e[f],g=Lt(m),l[g]?l[g]=1:a.add.push(Er(e[f]));for(f=0,d=u.length;f<d;++f)m=u[f],l[Lt(m)]<0&&a.rem.push(m);function y(v,_,w){w?v[_]=w(v):a.encode=_,o||(c[Lt(v)]=v)}for(f=0,d=n.length;f<d;++f)h=n[f],m=h.tuple,p=h.field,g=l[Lt(m)],g>0&&(y(m,p,h.value),a.modifies(p));for(f=0,d=i.length;f<d;++f)h=i[f],p=h.filter,u.forEach(v=>{p(v)&&l[Lt(v)]>0&&y(v,h.field,h.value)}),a.modifies(h.field);if(o)a.mod=t.length||r.length?u.filter(v=>l[Lt(v)]>0):u.slice();else for(g in c)a.mod.push(c[g]);return(s||s==null&&(t.length||r.length))&&a.clean(!0),a}}}const XD="_:mod:_";function sF(){Object.defineProperty(this,XD,{writable:!0,value:{}})}sF.prototype={set(e,t,n,r){const i=this,s=i[e],o=i[XD];return t!=null&&t>=0?(s[t]!==n||r)&&(s[t]=n,o[t+":"+e]=-1,o[e]=-1):(s!==n||r)&&(i[e]=n,o[e]=je(n)?1+n.length:-1),i},modified(e,t){const n=this[XD];if(arguments.length){if(je(e)){for(let r=0;r<e.length;++r)if(n[e[r]])return!0;return!1}}else{for(const r in n)if(n[r])return!0;return!1}return t!=null&&t>=0?t+1<n[e]||!!n[t+":"+e]:!!n[e]},clear(){return this[XD]={},this}};let zFt=0;const VFt="pulse",HFt=new sF,qFt=1,WFt=2;function Kr(e,t,n,r){this.id=++zFt,this.value=e,this.stamp=-1,this.rank=-1,this.qrank=-1,this.flags=0,t&&(this._update=t),n&&this.parameters(n,r)}function Npe(e){return function(t){const n=this.flags;return arguments.length===0?!!(n&e):(this.flags=t?n|e:n&~e,this)}}Kr.prototype={targets(){return this._targets||(this._targets=nF(dR))},set(e){return this.value!==e?(this.value=e,1):0},skip:Npe(qFt),modified:Npe(WFt),parameters(e,t,n){t=t!==!1;const r=this._argval=this._argval||new sF,i=this._argops=this._argops||[],s=[];let o,a,u,l;const c=(f,d,h)=>{h instanceof Kr?(h!==this&&(t&&h.targets().add(this),s.push(h)),i.push({op:h,name:f,index:d})):r.set(f,d,h)};for(o in e)if(a=e[o],o===VFt)pt(a).forEach(f=>{f instanceof Kr?f!==this&&(f.targets().add(this),s.push(f)):Le("Pulse parameters must be operator instances.")}),this.source=a;else if(je(a))for(r.set(o,-1,Array(u=a.length)),l=0;l<u;++l)c(o,l,a[l]);else c(o,-1,a);return this.marshall().clear(),n&&(i.initonly=!0),s},marshall(e){const t=this._argval||HFt,n=this._argops;let r,i,s,o;if(n){const a=n.length;for(i=0;i<a;++i)r=n[i],s=r.op,o=s.modified()&&s.stamp===e,t.set(r.name,r.index,s.value,o);if(n.initonly){for(i=0;i<a;++i)r=n[i],r.op.targets().remove(this);this._argops=null,this._update=null}}return t},detach(){const e=this._argops;let t,n,r,i;if(e)for(t=0,n=e.length;t<n;++t)r=e[t],i=r.op,i._targets&&i._targets.remove(this);this.pulse=null,this.source=null},evaluate(e){const t=this._update;if(t){const n=this.marshall(e.stamp),r=t.call(this,n,e);if(n.clear(),r!==this.value)this.value=r;else if(!this.modified())return e.StopPropagation}},run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?(this.skip(!1),t=0):t=this.evaluate(e),this.pulse=t||e}};function GFt(e,t,n,r){let i=1,s;return e instanceof Kr?s=e:e&&e.prototype instanceof Kr?s=new e:_n(e)?s=new Kr(null,e):(i=0,s=new Kr(e,t)),this.rank(s),i&&(r=n,n=t),n&&this.connect(s,s.parameters(n,r)),this.touch(s),s}function YFt(e,t){const n=e.rank,r=t.length;for(let i=0;i<r;++i)if(n<t[i].rank){this.rerank(e);return}}let KFt=0;function oF(e,t,n){this.id=++KFt,this.value=null,n&&(this.receive=n),e&&(this._filter=e),t&&(this._apply=t)}function Ig(e,t,n){return new oF(e,t,n)}oF.prototype={_filter:jc,_apply:xa,targets(){return this._targets||(this._targets=nF(dR))},consume(e){return arguments.length?(this._consume=!!e,this):!!this._consume},receive(e){if(this._filter(e)){const t=this.value=this._apply(e),n=this._targets,r=n?n.length:0;for(let i=0;i<r;++i)n[i].receive(t);this._consume&&(e.preventDefault(),e.stopPropagation())}},filter(e){const t=Ig(e);return this.targets().add(t),t},apply(e){const t=Ig(null,e);return this.targets().add(t),t},merge(){const e=Ig();this.targets().add(e);for(let t=0,n=arguments.length;t<n;++t)arguments[t].targets().add(e);return e},throttle(e){let t=-1;return this.filter(()=>{const n=Date.now();return n-t>e?(t=n,1):0})},debounce(e){const t=Ig();return this.targets().add(Ig(null,null,QZ(e,n=>{const r=n.dataflow;t.receive(n),r&&r.run&&r.run()}))),t},between(e,t){let n=!1;return e.targets().add(Ig(null,null,()=>n=!0)),t.targets().add(Ig(null,null,()=>n=!1)),this.filter(()=>n)},detach(){this._filter=jc,this._targets=null}};function XFt(e,t,n,r){const i=this,s=Ig(n,r),o=function(l){l.dataflow=i;try{s.receive(l)}catch(c){i.error(c)}finally{i.run()}};let a;typeof e=="string"&&typeof document<"u"?a=document.querySelectorAll(e):a=pt(e);const u=a.length;for(let l=0;l<u;++l)a[l].addEventListener(t,o);return s}function QFt(e,t){const n=this.locale();return x3e(e,t,n.timeParse,n.utcParse)}function JFt(e,t,n){return t=this.parse(t,n),this.pulse(e,this.changeset().insert(t))}async function ZFt(e,t){const n=this;let r=0,i;try{i=await n.loader().load(e,{context:"dataflow",response:E3e(t&&t.type)});try{i=n.parse(i,t)}catch(s){r=-2,n.warn("Data ingestion failed",e,s)}}catch(s){r=-1,n.warn("Loading failed",e,s)}return{data:i,status:r}}async function e5t(e,t,n){const r=this,i=r._pending||t5t(r);i.requests+=1;const s=await r.request(t,n);return r.pulse(e,r.changeset().remove(jc).insert(s.data||[])),i.done(),s}function t5t(e){let t;const n=new Promise(r=>t=r);return n.requests=0,n.done=()=>{--n.requests===0&&(e._pending=null,t(e))},e._pending=n}const n5t={skip:!0};function r5t(e,t,n,r,i){return(e instanceof Kr?s5t:i5t)(this,e,t,n,r,i),this}function i5t(e,t,n,r,i,s){const o=bn({},s,n5t);let a,u;_n(n)||(n=Sa(n)),r===void 0?a=l=>e.touch(n(l)):_n(r)?(u=new Kr(null,r,i,!1),a=l=>{u.evaluate(l);const c=n(l),f=u.value;A3e(f)?e.pulse(c,f,s):e.update(c,f,o)}):a=l=>e.update(n(l),r,o),t.apply(a)}function s5t(e,t,n,r,i,s){if(r===void 0)t.targets().add(n);else{const o=s||{},a=new Kr(null,o5t(n,r),i,!1);a.modified(o.force),a.rank=t.rank,t.targets().add(a),n&&(a.skip(!0),a.value=n.value,a.targets().add(n),e.connect(n,[a]))}}function o5t(e,t){return t=_n(t)?t:Sa(t),e?function(n,r){const i=t(n,r);return e.skip()||(e.skip(i!==this.value).value=i),i}:t}function a5t(e){e.rank=++this._rank}function u5t(e){const t=[e];let n,r,i;for(;t.length;)if(this.rank(n=t.pop()),r=n._targets)for(i=r.length;--i>=0;)t.push(n=r[i]),n===e&&Le("Cycle detected in dataflow graph.")}const pM={},Ld=1,Lg=2,Np=4,l5t=Ld|Lg,Ppe=Ld|Np,z_=Ld|Lg|Np,Dpe=8,KT=16,Ope=32,$pe=64;function D0(e,t,n){this.dataflow=e,this.stamp=t??-1,this.add=[],this.rem=[],this.mod=[],this.fields=null,this.encode=n||null}function K9(e,t){const n=[];return Mg(e,t,r=>n.push(r)),n}function Mpe(e,t){const n={};return e.visit(t,r=>{n[Lt(r)]=1}),r=>n[Lt(r)]?null:r}function CP(e,t){return e?(n,r)=>e(n,r)&&t(n,r):t}D0.prototype={StopPropagation:pM,ADD:Ld,REM:Lg,MOD:Np,ADD_REM:l5t,ADD_MOD:Ppe,ALL:z_,REFLOW:Dpe,SOURCE:KT,NO_SOURCE:Ope,NO_FIELDS:$pe,fork(e){return new D0(this.dataflow).init(this,e)},clone(){const e=this.fork(z_);return e.add=e.add.slice(),e.rem=e.rem.slice(),e.mod=e.mod.slice(),e.source&&(e.source=e.source.slice()),e.materialize(z_|KT)},addAll(){let e=this;return!e.source||e.add===e.rem||!e.rem.length&&e.source.length===e.add.length||(e=new D0(this.dataflow).init(this),e.add=e.source,e.rem=[]),e},init(e,t){const n=this;return n.stamp=e.stamp,n.encode=e.encode,e.fields&&!(t&$pe)&&(n.fields=e.fields),t&Ld?(n.addF=e.addF,n.add=e.add):(n.addF=null,n.add=[]),t&Lg?(n.remF=e.remF,n.rem=e.rem):(n.remF=null,n.rem=[]),t&Np?(n.modF=e.modF,n.mod=e.mod):(n.modF=null,n.mod=[]),t&Ope?(n.srcF=null,n.source=null):(n.srcF=e.srcF,n.source=e.source,e.cleans&&(n.cleans=e.cleans)),n},runAfter(e){this.dataflow.runAfter(e)},changed(e){const t=e||z_;return t&Ld&&this.add.length||t&Lg&&this.rem.length||t&Np&&this.mod.length},reflow(e){if(e)return this.fork(z_).reflow();const t=this.add.length,n=this.source&&this.source.length;return n&&n!==t&&(this.mod=this.source,t&&this.filter(Np,Mpe(this,Ld))),this},clean(e){return arguments.length?(this.cleans=!!e,this):this.cleans},modifies(e){const t=this.fields||(this.fields={});return je(e)?e.forEach(n=>t[n]=!0):t[e]=!0,this},modified(e,t){const n=this.fields;return(t||this.mod.length)&&n?arguments.length?je(e)?e.some(r=>n[r]):n[e]:!!n:!1},filter(e,t){const n=this;return e&Ld&&(n.addF=CP(n.addF,t)),e&Lg&&(n.remF=CP(n.remF,t)),e&Np&&(n.modF=CP(n.modF,t)),e&KT&&(n.srcF=CP(n.srcF,t)),n},materialize(e){e=e||z_;const t=this;return e&Ld&&t.addF&&(t.add=K9(t.add,t.addF),t.addF=null),e&Lg&&t.remF&&(t.rem=K9(t.rem,t.remF),t.remF=null),e&Np&&t.modF&&(t.mod=K9(t.mod,t.modF),t.modF=null),e&KT&&t.srcF&&(t.source=t.source.filter(t.srcF),t.srcF=null),t},visit(e,t){const n=this,r=t;if(e&KT)return Mg(n.source,n.srcF,r),n;e&Ld&&Mg(n.add,n.addF,r),e&Lg&&Mg(n.rem,n.remF,r),e&Np&&Mg(n.mod,n.modF,r);const i=n.source;if(e&Dpe&&i){const s=n.add.length+n.mod.length;s===i.length||(s?Mg(i,Mpe(n,Ppe),r):Mg(i,n.srcF,r))}return n}};function cee(e,t,n,r){const i=this;let s=0;this.dataflow=e,this.stamp=t,this.fields=null,this.encode=r||null,this.pulses=n;for(const o of n)if(o.stamp===t){if(o.fields){const a=i.fields||(i.fields={});for(const u in o.fields)a[u]=1}o.changed(i.ADD)&&(s|=i.ADD),o.changed(i.REM)&&(s|=i.REM),o.changed(i.MOD)&&(s|=i.MOD)}this.changes=s}lt(cee,D0,{fork(e){const t=new D0(this.dataflow).init(this,e&this.NO_FIELDS);return e!==void 0&&(e&t.ADD&&this.visit(t.ADD,n=>t.add.push(n)),e&t.REM&&this.visit(t.REM,n=>t.rem.push(n)),e&t.MOD&&this.visit(t.MOD,n=>t.mod.push(n))),t},changed(e){return this.changes&e},modified(e){const t=this,n=t.fields;return n&&t.changes&t.MOD?je(e)?e.some(r=>n[r]):n[e]:0},filter(){Le("MultiPulse does not support filtering.")},materialize(){Le("MultiPulse does not support materialization.")},visit(e,t){const n=this,r=n.pulses,i=r.length;let s=0;if(e&n.SOURCE)for(;s<i;++s)r[s].visit(e,t);else for(;s<i;++s)r[s].stamp===n.stamp&&r[s].visit(e,t);return n}});async function c5t(e,t,n){const r=this,i=[];if(r._pulse)return I3e(r);if(r._pending&&await r._pending,t&&await KD(r,t),!r._touched.length)return r.debug("Dataflow invoked, but nothing to do."),r;const s=++r._clock;r._pulse=new D0(r,s,e),r._touched.forEach(c=>r._enqueue(c,!0)),r._touched=nF(dR);let o=0,a,u,l;try{for(;r._heap.size()>0;){if(a=r._heap.pop(),a.rank!==a.qrank){r._enqueue(a,!0);continue}u=a.run(r._getPulse(a,e)),u.then?u=await u:u.async&&(i.push(u.async),u=pM),u!==pM&&a._targets&&a._targets.forEach(c=>r._enqueue(c)),++o}}catch(c){r._heap.clear(),l=c}if(r._input={},r._pulse=null,r.debug(`Pulse ${s}: ${o} operators`),l&&(r._postrun=[],r.error(l)),r._postrun.length){const c=r._postrun.sort((f,d)=>d.priority-f.priority);r._postrun=[];for(let f=0;f<c.length;++f)await KD(r,c[f].callback)}return n&&await KD(r,n),i.length&&Promise.all(i).then(c=>r.runAsync(null,()=>{c.forEach(f=>{try{f(r)}catch(d){r.error(d)}})})),r}async function f5t(e,t,n){for(;this._running;)await this._running;const r=()=>this._running=null;return(this._running=this.evaluate(e,t,n)).then(r,r),this._running}function d5t(e,t,n){return this._pulse?I3e(this):(this.evaluate(e,t,n),this)}function h5t(e,t,n){if(this._pulse||t)this._postrun.push({priority:n||0,callback:e});else try{e(this)}catch(r){this.error(r)}}function I3e(e){return e.error("Dataflow already running. Use runAsync() to chain invocations."),e}function p5t(e,t){const n=e.stamp<this._clock;n&&(e.stamp=this._clock),(n||t)&&(e.qrank=e.rank,this._heap.push(e))}function m5t(e,t){const n=e.source,r=this._clock;return n&&je(n)?new cee(this,r,n.map(i=>i.pulse),t):this._input[e.id]||g5t(this._pulse,n&&n.pulse)}function g5t(e,t){return t&&t.stamp===e.stamp?t:(e=e.fork(),t&&t!==pM&&(e.source=t.source),e)}const fee={skip:!1,force:!1};function y5t(e,t){const n=t||fee;return this._pulse?this._enqueue(e):this._touched.add(e),n.skip&&e.skip(!0),this}function v5t(e,t,n){const r=n||fee;return(e.set(t)||r.force)&&this.touch(e,r),this}function b5t(e,t,n){this.touch(e,n||fee);const r=new D0(this,this._clock+(this._pulse?0:1)),i=e.pulse&&e.pulse.source||[];return r.target=e,this._input[e.id]=t.pulse(r,i),this}function _5t(e){let t=[];return{clear:()=>t=[],size:()=>t.length,peek:()=>t[0],push:n=>(t.push(n),k3e(t,0,t.length-1,e)),pop:()=>{const n=t.pop();let r;return t.length?(r=t[0],t[0]=n,w5t(t,0,e)):r=n,r}}}function k3e(e,t,n,r){let i,s;const o=e[n];for(;n>t;){if(s=n-1>>1,i=e[s],r(o,i)<0){e[n]=i,n=s;continue}break}return e[n]=o}function w5t(e,t,n){const r=t,i=e.length,s=e[t];let o=(t<<1)+1,a;for(;o<i;)a=o+1,a<i&&n(e[o],e[a])>=0&&(o=a),e[t]=e[o],t=o,o=(t<<1)+1;return e[t]=s,k3e(e,r,t,n)}function vE(){this.logger(WZ()),this.logLevel(HZ),this._clock=0,this._rank=0,this._locale=see();try{this._loader=tF()}catch{}this._touched=nF(dR),this._input={},this._pulse=null,this._heap=_5t((e,t)=>e.qrank-t.qrank),this._postrun=[]}function XT(e){return function(){return this._log[e].apply(this,arguments)}}vE.prototype={stamp(){return this._clock},loader(e){return arguments.length?(this._loader=e,this):this._loader},locale(e){return arguments.length?(this._locale=e,this):this._locale},logger(e){return arguments.length?(this._log=e,this):this._log},error:XT("error"),warn:XT("warn"),info:XT("info"),debug:XT("debug"),logLevel:XT("level"),cleanThreshold:1e4,add:GFt,connect:YFt,rank:a5t,rerank:u5t,pulse:b5t,touch:y5t,update:v5t,changeset:s_,ingest:JFt,parse:QFt,preload:e5t,request:ZFt,events:XFt,on:r5t,evaluate:c5t,run:d5t,runAsync:f5t,runAfter:h5t,_enqueue:p5t,_getPulse:m5t};function Pe(e,t){Kr.call(this,e,null,t)}lt(Pe,Kr,{run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?this.skip(!1):t=this.evaluate(e),t=t||e,t.then?t=t.then(n=>this.pulse=n):t!==e.StopPropagation&&(this.pulse=t),t},evaluate(e){const t=this.marshall(e.stamp),n=this.transform(t,e);return t.clear(),n},transform(){}});const Ex={};function R3e(e){const t=N3e(e);return t&&t.Definition||null}function N3e(e){return e=e&&e.toLowerCase(),jt(Ex,e)?Ex[e]:null}function*P3e(e,t){if(t==null)for(let n of e)n!=null&&n!==""&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)r=t(r,++n,e),r!=null&&r!==""&&(r=+r)>=r&&(yield r)}}function dee(e,t,n){const r=Float64Array.from(P3e(e,n));return r.sort(sm),t.map(i=>Zxe(r,i))}function hee(e,t){return dee(e,[.25,.5,.75],t)}function pee(e,t){const n=e.length,r=Uat(e,t),i=hee(e,t),s=(i[2]-i[0])/1.34;return 1.06*(Math.min(r,s)||r||Math.abs(i[0])||1)*Math.pow(n,-.2)}function D3e(e){const t=e.maxbins||20,n=e.base||10,r=Math.log(n),i=e.divide||[5,2];let s=e.extent[0],o=e.extent[1],a,u,l,c,f,d;const h=e.span||o-s||Math.abs(s)||1;if(e.step)a=e.step;else if(e.steps){for(c=h/t,f=0,d=e.steps.length;f<d&&e.steps[f]<c;++f);a=e.steps[Math.max(0,f-1)]}else{for(u=Math.ceil(Math.log(t)/r),l=e.minstep||0,a=Math.max(l,Math.pow(n,Math.round(Math.log(h)/r)-u));Math.ceil(h/a)>t;)a*=n;for(f=0,d=i.length;f<d;++f)c=a/i[f],c>=l&&h/c<=t&&(a=c)}c=Math.log(a);const p=c>=0?0:~~(-c/r)+1,m=Math.pow(n,-p-1);return(e.nice||e.nice===void 0)&&(c=Math.floor(s/a+m)*a,s=s<c?c-a:c,o=Math.ceil(o/a)*a),{start:s,stop:o===s?s+a:o,step:a}}var Uc=Math.random;function E5t(e){Uc=e}function O3e(e,t,n,r){if(!e.length)return[void 0,void 0];const i=Float64Array.from(P3e(e,r)),s=i.length,o=t;let a,u,l,c;for(l=0,c=Array(o);l<o;++l){for(a=0,u=0;u<s;++u)a+=i[~~(Uc()*s)];c[l]=a/s}return c.sort(sm),[BA(c,n/2),BA(c,1-n/2)]}function $3e(e,t,n,r){r=r||(d=>d);const i=e.length,s=new Float64Array(i);let o=0,a=1,u=r(e[0]),l=u,c=u+t,f;for(;a<i;++a){if(f=r(e[a]),f>=c){for(l=(u+l)/2;o<a;++o)s[o]=l;c=f+t,u=f}l=f}for(l=(u+l)/2;o<a;++o)s[o]=l;return n?x5t(s,t+t/4):s}function x5t(e,t){const n=e.length;let r=0,i=1,s,o;for(;e[r]===e[i];)++i;for(;i<n;){for(s=i+1;e[i]===e[s];)++s;if(e[i]-e[i-1]<t){for(o=i+(r+s-i-i>>1);o<i;)e[o++]=e[i];for(;o>i;)e[o--]=e[r]}r=i,i=s}return e}function S5t(e){return function(){return e=(1103515245*e+12345)%2147483647,e/2147483647}}function T5t(e,t){t==null&&(t=e,e=0);let n,r,i;const s={min(o){return arguments.length?(n=o||0,i=r-n,s):n},max(o){return arguments.length?(r=o||0,i=r-n,s):r},sample(){return n+Math.floor(i*Uc())},pdf(o){return o===Math.floor(o)&&o>=n&&o<r?1/i:0},cdf(o){const a=Math.floor(o);return a<n?0:a>=r?1:(a-n+1)/i},icdf(o){return o>=0&&o<=1?n-1+Math.floor(o*i):NaN}};return s.min(e).max(t)}const M3e=Math.sqrt(2*Math.PI),C5t=Math.SQRT2;let QT=NaN;function aF(e,t){e=e||0,t=t??1;let n=0,r=0,i,s;if(QT===QT)n=QT,QT=NaN;else{do n=Uc()*2-1,r=Uc()*2-1,i=n*n+r*r;while(i===0||i>1);s=Math.sqrt(-2*Math.log(i)/i),n*=s,QT=r*s}return e+n*t}function mee(e,t,n){n=n??1;const r=(e-(t||0))/n;return Math.exp(-.5*r*r)/(n*M3e)}function uF(e,t,n){t=t||0,n=n??1;const r=(e-t)/n,i=Math.abs(r);let s;if(i>37)s=0;else{const o=Math.exp(-i*i/2);let a;i<7.07106781186547?(a=.0352624965998911*i+.700383064443688,a=a*i+6.37396220353165,a=a*i+33.912866078383,a=a*i+112.079291497871,a=a*i+221.213596169931,a=a*i+220.206867912376,s=o*a,a=.0883883476483184*i+1.75566716318264,a=a*i+16.064177579207,a=a*i+86.7807322029461,a=a*i+296.564248779674,a=a*i+637.333633378831,a=a*i+793.826512519948,a=a*i+440.413735824752,s=s/a):(a=i+.65,a=i+4/a,a=i+3/a,a=i+2/a,a=i+1/a,s=o/a/2.506628274631)}return r>0?1-s:s}function lF(e,t,n){return e<0||e>1?NaN:(t||0)+(n??1)*C5t*A5t(2*e-1)}function A5t(e){let t=-Math.log((1-e)*(1+e)),n;return t<6.25?(t-=3.125,n=-364441206401782e-35,n=-16850591381820166e-35+n*t,n=128584807152564e-32+n*t,n=11157877678025181e-33+n*t,n=-1333171662854621e-31+n*t,n=20972767875968562e-33+n*t,n=6637638134358324e-30+n*t,n=-4054566272975207e-29+n*t,n=-8151934197605472e-29+n*t,n=26335093153082323e-28+n*t,n=-12975133253453532e-27+n*t,n=-5415412054294628e-26+n*t,n=10512122733215323e-25+n*t,n=-4112633980346984e-24+n*t,n=-29070369957882005e-24+n*t,n=42347877827932404e-23+n*t,n=-13654692000834679e-22+n*t,n=-13882523362786469e-21+n*t,n=.00018673420803405714+n*t,n=-.000740702534166267+n*t,n=-.006033670871430149+n*t,n=.24015818242558962+n*t,n=1.6536545626831027+n*t):t<16?(t=Math.sqrt(t)-3.25,n=22137376921775787e-25,n=9075656193888539e-23+n*t,n=-27517406297064545e-23+n*t,n=18239629214389228e-24+n*t,n=15027403968909828e-22+n*t,n=-4013867526981546e-21+n*t,n=29234449089955446e-22+n*t,n=12475304481671779e-21+n*t,n=-47318229009055734e-21+n*t,n=6828485145957318e-20+n*t,n=24031110387097894e-21+n*t,n=-.0003550375203628475+n*t,n=.0009532893797373805+n*t,n=-.0016882755560235047+n*t,n=.002491442096107851+n*t,n=-.003751208507569241+n*t,n=.005370914553590064+n*t,n=1.0052589676941592+n*t,n=3.0838856104922208+n*t):Number.isFinite(t)?(t=Math.sqrt(t)-5,n=-27109920616438573e-27,n=-2555641816996525e-25+n*t,n=15076572693500548e-25+n*t,n=-3789465440126737e-24+n*t,n=761570120807834e-23+n*t,n=-1496002662714924e-23+n*t,n=2914795345090108e-23+n*t,n=-6771199775845234e-23+n*t,n=22900482228026655e-23+n*t,n=-99298272942317e-20+n*t,n=4526062597223154e-21+n*t,n=-1968177810553167e-20+n*t,n=7599527703001776e-20+n*t,n=-.00021503011930044477+n*t,n=-.00013871931833623122+n*t,n=1.0103004648645344+n*t,n=4.849906401408584+n*t):n=1/0,n*e}function gee(e,t){let n,r;const i={mean(s){return arguments.length?(n=s||0,i):n},stdev(s){return arguments.length?(r=s??1,i):r},sample:()=>aF(n,r),pdf:s=>mee(s,n,r),cdf:s=>uF(s,n,r),icdf:s=>lF(s,n,r)};return i.mean(e).stdev(t)}function yee(e,t){const n=gee();let r=0;const i={data(s){return arguments.length?(e=s,r=s?s.length:0,i.bandwidth(t)):e},bandwidth(s){return arguments.length?(t=s,!t&&e&&(t=pee(e)),i):t},sample(){return e[~~(Uc()*r)]+t*n.sample()},pdf(s){let o=0,a=0;for(;a<r;++a)o+=n.pdf((s-e[a])/t);return o/t/r},cdf(s){let o=0,a=0;for(;a<r;++a)o+=n.cdf((s-e[a])/t);return o/r},icdf(){throw Error("KDE icdf not supported.")}};return i.data(e)}function vee(e,t){return e=e||0,t=t??1,Math.exp(e+aF()*t)}function bee(e,t,n){if(e<=0)return 0;t=t||0,n=n??1;const r=(Math.log(e)-t)/n;return Math.exp(-.5*r*r)/(n*M3e*e)}function _ee(e,t,n){return uF(Math.log(e),t,n)}function wee(e,t,n){return Math.exp(lF(e,t,n))}function L3e(e,t){let n,r;const i={mean(s){return arguments.length?(n=s||0,i):n},stdev(s){return arguments.length?(r=s??1,i):r},sample:()=>vee(n,r),pdf:s=>bee(s,n,r),cdf:s=>_ee(s,n,r),icdf:s=>wee(s,n,r)};return i.mean(e).stdev(t)}function F3e(e,t){let n=0,r;function i(o){const a=[];let u=0,l;for(l=0;l<n;++l)u+=a[l]=o[l]==null?1:+o[l];for(l=0;l<n;++l)a[l]/=u;return a}const s={weights(o){return arguments.length?(r=i(t=o||[]),s):t},distributions(o){return arguments.length?(o?(n=o.length,e=o):(n=0,e=[]),s.weights(t)):e},sample(){const o=Uc();let a=e[n-1],u=r[0],l=0;for(;l<n-1;u+=r[++l])if(o<u){a=e[l];break}return a.sample()},pdf(o){let a=0,u=0;for(;u<n;++u)a+=r[u]*e[u].pdf(o);return a},cdf(o){let a=0,u=0;for(;u<n;++u)a+=r[u]*e[u].cdf(o);return a},icdf(){throw Error("Mixture icdf not supported.")}};return s.distributions(e).weights(t)}function Eee(e,t){return t==null&&(t=e??1,e=0),e+(t-e)*Uc()}function xee(e,t,n){return n==null&&(n=t??1,t=0),e>=t&&e<=n?1/(n-t):0}function See(e,t,n){return n==null&&(n=t??1,t=0),e<t?0:e>n?1:(e-t)/(n-t)}function Tee(e,t,n){return n==null&&(n=t??1,t=0),e>=0&&e<=1?t+e*(n-t):NaN}function j3e(e,t){let n,r;const i={min(s){return arguments.length?(n=s||0,i):n},max(s){return arguments.length?(r=s??1,i):r},sample:()=>Eee(n,r),pdf:s=>xee(s,n,r),cdf:s=>See(s,n,r),icdf:s=>Tee(s,n,r)};return t==null&&(t=e??1,e=0),i.min(e).max(t)}function Cee(e,t,n){let r=0,i=0;for(const s of e){const o=n(s);t(s)==null||o==null||isNaN(o)||(r+=(o-r)/++i)}return{coef:[r],predict:()=>r,rSquared:0}}function pR(e,t,n,r){const i=r-e*e,s=Math.abs(i)<1e-24?0:(n-e*t)/i;return[t-s*e,s]}function cF(e,t,n,r){e=e.filter(h=>{let p=t(h),m=n(h);return p!=null&&(p=+p)>=p&&m!=null&&(m=+m)>=m}),r&&e.sort((h,p)=>t(h)-t(p));const i=e.length,s=new Float64Array(i),o=new Float64Array(i);let a=0,u=0,l=0,c,f,d;for(d of e)s[a]=c=+t(d),o[a]=f=+n(d),++a,u+=(c-u)/a,l+=(f-l)/a;for(a=0;a<i;++a)s[a]-=u,o[a]-=l;return[s,o,u,l]}function mR(e,t,n,r){let i=-1,s,o;for(const a of e)s=t(a),o=n(a),s!=null&&(s=+s)>=s&&o!=null&&(o=+o)>=o&&r(s,o,++i)}function KS(e,t,n,r,i){let s=0,o=0;return mR(e,t,n,(a,u)=>{const l=u-i(a),c=u-r;s+=l*l,o+=c*c}),1-s/o}function Aee(e,t,n){let r=0,i=0,s=0,o=0,a=0;mR(e,t,n,(c,f)=>{++a,r+=(c-r)/a,i+=(f-i)/a,s+=(c*f-s)/a,o+=(c*c-o)/a});const u=pR(r,i,s,o),l=c=>u[0]+u[1]*c;return{coef:u,predict:l,rSquared:KS(e,t,n,i,l)}}function B3e(e,t,n){let r=0,i=0,s=0,o=0,a=0;mR(e,t,n,(c,f)=>{++a,c=Math.log(c),r+=(c-r)/a,i+=(f-i)/a,s+=(c*f-s)/a,o+=(c*c-o)/a});const u=pR(r,i,s,o),l=c=>u[0]+u[1]*Math.log(c);return{coef:u,predict:l,rSquared:KS(e,t,n,i,l)}}function U3e(e,t,n){const[r,i,s,o]=cF(e,t,n);let a=0,u=0,l=0,c=0,f=0,d,h,p;mR(e,t,n,(v,_)=>{d=r[f++],h=Math.log(_),p=d*_,a+=(_*h-a)/f,u+=(p-u)/f,l+=(p*h-l)/f,c+=(d*p-c)/f});const[m,g]=pR(u/o,a/o,l/o,c/o),y=v=>Math.exp(m+g*(v-s));return{coef:[Math.exp(m-g*s),g],predict:y,rSquared:KS(e,t,n,o,y)}}function z3e(e,t,n){let r=0,i=0,s=0,o=0,a=0,u=0;mR(e,t,n,(f,d)=>{const h=Math.log(f),p=Math.log(d);++u,r+=(h-r)/u,i+=(p-i)/u,s+=(h*p-s)/u,o+=(h*h-o)/u,a+=(d-a)/u});const l=pR(r,i,s,o),c=f=>l[0]*Math.pow(f,l[1]);return l[0]=Math.exp(l[0]),{coef:l,predict:c,rSquared:KS(e,t,n,a,c)}}function Iee(e,t,n){const[r,i,s,o]=cF(e,t,n),a=r.length;let u=0,l=0,c=0,f=0,d=0,h,p,m,g;for(h=0;h<a;)p=r[h],m=i[h++],g=p*p,u+=(g-u)/h,l+=(g*p-l)/h,c+=(g*g-c)/h,f+=(p*m-f)/h,d+=(g*m-d)/h;const y=c-u*u,v=u*y-l*l,_=(d*u-f*l)/v,w=(f*y-d*l)/v,E=-_*u,S=T=>(T=T-s,_*T*T+w*T+E+o);return{coef:[E-w*s+_*s*s+o,w-2*_*s,_],predict:S,rSquared:KS(e,t,n,o,S)}}function V3e(e,t,n,r){if(r===0)return Cee(e,t,n);if(r===1)return Aee(e,t,n);if(r===2)return Iee(e,t,n);const[i,s,o,a]=cF(e,t,n),u=i.length,l=[],c=[],f=r+1;let d,h,p,m,g;for(d=0;d<f;++d){for(p=0,m=0;p<u;++p)m+=Math.pow(i[p],d)*s[p];for(l.push(m),g=new Float64Array(f),h=0;h<f;++h){for(p=0,m=0;p<u;++p)m+=Math.pow(i[p],d+h);g[h]=m}c.push(g)}c.push(l);const y=k5t(c),v=_=>{_-=o;let w=a+y[0]+y[1]*_+y[2]*_*_;for(d=3;d<f;++d)w+=y[d]*Math.pow(_,d);return w};return{coef:I5t(f,y,-o,a),predict:v,rSquared:KS(e,t,n,a,v)}}function I5t(e,t,n,r){const i=Array(e);let s,o,a,u;for(s=0;s<e;++s)i[s]=0;for(s=e-1;s>=0;--s)for(a=t[s],u=1,i[s]+=a,o=1;o<=s;++o)u*=(s+1-o)/o,i[s-o]+=a*Math.pow(n,o)*u;return i[0]+=r,i}function k5t(e){const t=e.length-1,n=[];let r,i,s,o,a;for(r=0;r<t;++r){for(o=r,i=r+1;i<t;++i)Math.abs(e[r][i])>Math.abs(e[r][o])&&(o=i);for(s=r;s<t+1;++s)a=e[s][r],e[s][r]=e[s][o],e[s][o]=a;for(i=r+1;i<t;++i)for(s=t;s>=r;s--)e[s][i]-=e[s][r]*e[r][i]/e[r][r]}for(i=t-1;i>=0;--i){for(a=0,s=i+1;s<t;++s)a+=e[s][i]*n[s];n[i]=(e[t][i]-a)/e[i][i]}return n}const Lpe=2,Fpe=1e-12;function H3e(e,t,n,r){const[i,s,o,a]=cF(e,t,n,!0),u=i.length,l=Math.max(2,~~(r*u)),c=new Float64Array(u),f=new Float64Array(u),d=new Float64Array(u).fill(1);for(let h=-1;++h<=Lpe;){const p=[0,l-1];for(let g=0;g<u;++g){const y=i[g],v=p[0],_=p[1],w=y-i[v]>i[_]-y?v:_;let E=0,S=0,T=0,C=0,A=0;const k=1/Math.abs(i[w]-y||1);for(let D=v;D<=_;++D){const $=i[D],F=s[D],M=R5t(Math.abs(y-$)*k)*d[D],B=$*M;E+=M,S+=B,T+=F*M,C+=F*B,A+=$*B}const[N,O]=pR(S/E,T/E,C/E,A/E);c[g]=N+O*y,f[g]=Math.abs(s[g]-c[g]),N5t(i,g+1,p)}if(h===Lpe)break;const m=tSe(f);if(Math.abs(m)<Fpe)break;for(let g=0,y,v;g<u;++g)y=f[g]/(6*m),d[g]=y>=1?Fpe:(v=1-y*y)*v}return P5t(i,c,o,a)}function R5t(e){return(e=1-e*e*e)*e*e}function N5t(e,t,n){const r=e[t];let i=n[0],s=n[1]+1;if(!(s>=e.length))for(;t>i&&e[s]-r<=r-e[i];)n[0]=++i,n[1]=s,++s}function P5t(e,t,n,r){const i=e.length,s=[];let o=0,a=0,u=[],l;for(;o<i;++o)l=e[o]+n,u[0]===l?u[1]+=(t[o]-u[1])/++a:(a=0,u[1]+=r,u=[l,t[o]],s.push(u));return u[1]+=r,s}const D5t=.5*Math.PI/180;function fF(e,t,n,r){n=n||25,r=Math.max(n,r||200);const i=m=>[m,e(m)],s=t[0],o=t[1],a=o-s,u=a/r,l=[i(s)],c=[];if(n===r){for(let m=1;m<r;++m)l.push(i(s+m/n*a));return l.push(i(o)),l}else{c.push(i(o));for(let m=n;--m>0;)c.push(i(s+m/n*a))}let f=l[0],d=c[c.length-1];const h=1/a,p=O5t(f[1],c);for(;d;){const m=i((f[0]+d[0])/2);m[0]-f[0]>=u&&$5t(f,m,d,h,p)>D5t?c.push(m):(f=d,l.push(d),c.pop()),d=c[c.length-1]}return l}function O5t(e,t){let n=e,r=e;const i=t.length;for(let s=0;s<i;++s){const o=t[s][1];o<n&&(n=o),o>r&&(r=o)}return 1/(r-n)}function $5t(e,t,n,r,i){const s=Math.atan2(i*(n[1]-e[1]),r*(n[0]-e[0])),o=Math.atan2(i*(t[1]-e[1]),r*(t[0]-e[0]));return Math.abs(s-o)}function M5t(e){return t=>{const n=e.length;let r=1,i=String(e[0](t));for(;r<n;++r)i+="|"+e[r](t);return i}}function bH(e){return!e||!e.length?function(){return""}:e.length===1?e[0]:M5t(e)}function q3e(e,t,n){return n||e+(t?"_"+t:"")}const X9=()=>{},L5t={init:X9,add:X9,rem:X9,idx:0},DI={values:{init:e=>e.cell.store=!0,value:e=>e.cell.data.values(),idx:-1},count:{value:e=>e.cell.num},__count__:{value:e=>e.missing+e.valid},missing:{value:e=>e.missing},valid:{value:e=>e.valid},sum:{init:e=>e.sum=0,value:e=>e.valid?e.sum:void 0,add:(e,t)=>e.sum+=+t,rem:(e,t)=>e.sum-=t},product:{init:e=>e.product=1,value:e=>e.valid?e.product:void 0,add:(e,t)=>e.product*=t,rem:(e,t)=>e.product/=t},mean:{init:e=>e.mean=0,value:e=>e.valid?e.mean:void 0,add:(e,t)=>(e.mean_d=t-e.mean,e.mean+=e.mean_d/e.valid),rem:(e,t)=>(e.mean_d=t-e.mean,e.mean-=e.valid?e.mean_d/e.valid:e.mean)},average:{value:e=>e.valid?e.mean:void 0,req:["mean"],idx:1},variance:{init:e=>e.dev=0,value:e=>e.valid>1?e.dev/(e.valid-1):void 0,add:(e,t)=>e.dev+=e.mean_d*(t-e.mean),rem:(e,t)=>e.dev-=e.mean_d*(t-e.mean),req:["mean"],idx:1},variancep:{value:e=>e.valid>1?e.dev/e.valid:void 0,req:["variance"],idx:2},stdev:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid-1)):void 0,req:["variance"],idx:2},stdevp:{value:e=>e.valid>1?Math.sqrt(e.dev/e.valid):void 0,req:["variance"],idx:2},stderr:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid*(e.valid-1))):void 0,req:["variance"],idx:2},distinct:{value:e=>e.cell.data.distinct(e.get),req:["values"],idx:3},ci0:{value:e=>e.cell.data.ci0(e.get),req:["values"],idx:3},ci1:{value:e=>e.cell.data.ci1(e.get),req:["values"],idx:3},median:{value:e=>e.cell.data.q2(e.get),req:["values"],idx:3},q1:{value:e=>e.cell.data.q1(e.get),req:["values"],idx:3},q3:{value:e=>e.cell.data.q3(e.get),req:["values"],idx:3},min:{init:e=>e.min=void 0,value:e=>e.min=Number.isNaN(e.min)?e.cell.data.min(e.get):e.min,add:(e,t)=>{(t<e.min||e.min===void 0)&&(e.min=t)},rem:(e,t)=>{t<=e.min&&(e.min=NaN)},req:["values"],idx:4},max:{init:e=>e.max=void 0,value:e=>e.max=Number.isNaN(e.max)?e.cell.data.max(e.get):e.max,add:(e,t)=>{(t>e.max||e.max===void 0)&&(e.max=t)},rem:(e,t)=>{t>=e.max&&(e.max=NaN)},req:["values"],idx:4},argmin:{init:e=>e.argmin=void 0,value:e=>e.argmin||e.cell.data.argmin(e.get),add:(e,t,n)=>{t<e.min&&(e.argmin=n)},rem:(e,t)=>{t<=e.min&&(e.argmin=void 0)},req:["min","values"],idx:3},argmax:{init:e=>e.argmax=void 0,value:e=>e.argmax||e.cell.data.argmax(e.get),add:(e,t,n)=>{t>e.max&&(e.argmax=n)},rem:(e,t)=>{t>=e.max&&(e.argmax=void 0)},req:["max","values"],idx:3},exponential:{init:(e,t)=>{e.exp=0,e.exp_r=t},value:e=>e.valid?e.exp*(1-e.exp_r)/(1-e.exp_r**e.valid):void 0,add:(e,t)=>e.exp=e.exp_r*e.exp+t,rem:(e,t)=>e.exp=(e.exp-t/e.exp_r**(e.valid-1))/e.exp_r},exponentialb:{value:e=>e.valid?e.exp*(1-e.exp_r):void 0,req:["exponential"],idx:1}},gR=Object.keys(DI).filter(e=>e!=="__count__");function F5t(e,t){return(n,r)=>bn({name:e,aggregate_param:r,out:n||e},L5t,t)}[...gR,"__count__"].forEach(e=>{DI[e]=F5t(e,DI[e])});function W3e(e,t,n){return DI[e](n,t)}function G3e(e,t){return e.idx-t.idx}function j5t(e){const t={};e.forEach(r=>t[r.name]=r);const n=r=>{r.req&&r.req.forEach(i=>{t[i]||n(t[i]=DI[i]())})};return e.forEach(n),Object.values(t).sort(G3e)}function B5t(){this.valid=0,this.missing=0,this._ops.forEach(e=>e.aggregate_param==null?e.init(this):e.init(this,e.aggregate_param))}function U5t(e,t){if(e==null||e===""){++this.missing;return}e===e&&(++this.valid,this._ops.forEach(n=>n.add(this,e,t)))}function z5t(e,t){if(e==null||e===""){--this.missing;return}e===e&&(--this.valid,this._ops.forEach(n=>n.rem(this,e,t)))}function V5t(e){return this._out.forEach(t=>e[t.out]=t.value(this)),e}function Y3e(e,t){const n=t||xa,r=j5t(e),i=e.slice().sort(G3e);function s(o){this._ops=r,this._out=i,this.cell=o,this.init()}return s.prototype.init=B5t,s.prototype.add=U5t,s.prototype.rem=z5t,s.prototype.set=V5t,s.prototype.get=n,s.fields=e.map(o=>o.out),s}function kee(e){this._key=e?Fc(e):Lt,this.reset()}const Uo=kee.prototype;Uo.reset=function(){this._add=[],this._rem=[],this._ext=null,this._get=null,this._q=null};Uo.add=function(e){this._add.push(e)};Uo.rem=function(e){this._rem.push(e)};Uo.values=function(){if(this._get=null,this._rem.length===0)return this._add;const e=this._add,t=this._rem,n=this._key,r=e.length,i=t.length,s=Array(r-i),o={};let a,u,l;for(a=0;a<i;++a)o[n(t[a])]=1;for(a=0,u=0;a<r;++a)o[n(l=e[a])]?o[n(l)]=0:s[u++]=l;return this._rem=[],this._add=s};Uo.distinct=function(e){const t=this.values(),n={};let r=t.length,i=0,s;for(;--r>=0;)s=e(t[r])+"",jt(n,s)||(n[s]=1,++i);return i};Uo.extent=function(e){if(this._get!==e||!this._ext){const t=this.values(),n=MOe(t,e);this._ext=[t[n[0]],t[n[1]]],this._get=e}return this._ext};Uo.argmin=function(e){return this.extent(e)[0]||{}};Uo.argmax=function(e){return this.extent(e)[1]||{}};Uo.min=function(e){const t=this.extent(e)[0];return t!=null?e(t):void 0};Uo.max=function(e){const t=this.extent(e)[1];return t!=null?e(t):void 0};Uo.quartile=function(e){return(this._get!==e||!this._q)&&(this._q=hee(this.values(),e),this._get=e),this._q};Uo.q1=function(e){return this.quartile(e)[0]};Uo.q2=function(e){return this.quartile(e)[1]};Uo.q3=function(e){return this.quartile(e)[2]};Uo.ci=function(e){return(this._get!==e||!this._ci)&&(this._ci=O3e(this.values(),1e3,.05,e),this._get=e),this._ci};Uo.ci0=function(e){return this.ci(e)[0]};Uo.ci1=function(e){return this.ci(e)[1]};function dy(e){Pe.call(this,null,e),this._adds=[],this._mods=[],this._alen=0,this._mlen=0,this._drop=!0,this._cross=!1,this._dims=[],this._dnames=[],this._measures=[],this._countOnly=!1,this._counts=null,this._prev=null,this._inputs=null,this._outputs=null}dy.Definition={type:"Aggregate",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:gR},{name:"aggregate_params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"drop",type:"boolean",default:!0},{name:"cross",type:"boolean",default:!1},{name:"key",type:"field"}]};lt(dy,Pe,{transform(e,t){const n=this,r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.modified();return n.stamp=r.stamp,n.value&&(i||t.modified(n._inputs,!0))?(n._prev=n.value,n.value=i?n.init(e):Object.create(null),t.visit(t.SOURCE,s=>n.add(s))):(n.value=n.value||n.init(e),t.visit(t.REM,s=>n.rem(s)),t.visit(t.ADD,s=>n.add(s))),r.modifies(n._outputs),n._drop=e.drop!==!1,e.cross&&n._dims.length>1&&(n._drop=!1,n.cross()),t.clean()&&n._drop&&r.clean(!0).runAfter(()=>this.clean()),n.changes(r)},cross(){const e=this,t=e.value,n=e._dnames,r=n.map(()=>({})),i=n.length;function s(a){let u,l,c,f;for(u in a)for(c=a[u].tuple,l=0;l<i;++l)r[l][f=c[n[l]]]=f}s(e._prev),s(t);function o(a,u,l){const c=n[l],f=r[l++];for(const d in f){const h=a?a+"|"+d:d;u[c]=f[d],l<i?o(h,u,l):t[h]||e.cell(h,u)}}o("",{},0)},init(e){const t=this._inputs=[],n=this._outputs=[],r={};function i(v){const _=pt(ga(v)),w=_.length;let E=0,S;for(;E<w;++E)r[S=_[E]]||(r[S]=1,t.push(S))}this._dims=pt(e.groupby),this._dnames=this._dims.map(v=>{const _=Ki(v);return i(v),n.push(_),_}),this.cellkey=e.key?e.key:bH(this._dims),this._countOnly=!0,this._counts=[],this._measures=[];const s=e.fields||[null],o=e.ops||["count"],a=e.aggregate_params||[null],u=e.as||[],l=s.length,c={};let f,d,h,p,m,g,y;for(l!==o.length&&Le("Unmatched number of fields and aggregate ops."),y=0;y<l;++y){if(f=s[y],d=o[y],h=a[y]||null,f==null&&d!=="count"&&Le("Null aggregate field specified."),m=Ki(f),g=q3e(d,m,u[y]),n.push(g),d==="count"){this._counts.push(g);continue}p=c[m],p||(i(f),p=c[m]=[],p.field=f,this._measures.push(p)),d!=="count"&&(this._countOnly=!1),p.push(W3e(d,h,g))}return this._measures=this._measures.map(v=>Y3e(v,v.field)),Object.create(null)},cellkey:bH(),cell(e,t){let n=this.value[e];return n?n.num===0&&this._drop&&n.stamp<this.stamp?(n.stamp=this.stamp,this._adds[this._alen++]=n):n.stamp<this.stamp&&(n.stamp=this.stamp,this._mods[this._mlen++]=n):(n=this.value[e]=this.newcell(e,t),this._adds[this._alen++]=n),n},newcell(e,t){const n={key:e,num:0,agg:null,tuple:this.newtuple(t,this._prev&&this._prev[e]),stamp:this.stamp,store:!1};if(!this._countOnly){const r=this._measures,i=r.length;n.agg=Array(i);for(let s=0;s<i;++s)n.agg[s]=new r[s](n)}return n.store&&(n.data=new kee),n},newtuple(e,t){const n=this._dnames,r=this._dims,i=r.length,s={};for(let o=0;o<i;++o)s[n[o]]=r[o](e);return t?C3e(t.tuple,s):Er(s)},clean(){const e=this.value;for(const t in e)e[t].num===0&&delete e[t]},add(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num+=1,this._countOnly)return;n.store&&n.data.add(e);const r=n.agg;for(let i=0,s=r.length;i<s;++i)r[i].add(r[i].get(e),e)},rem(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num-=1,this._countOnly)return;n.store&&n.data.rem(e);const r=n.agg;for(let i=0,s=r.length;i<s;++i)r[i].rem(r[i].get(e),e)},celltuple(e){const t=e.tuple,n=this._counts;e.store&&e.data.values();for(let r=0,i=n.length;r<i;++r)t[n[r]]=e.num;if(!this._countOnly){const r=e.agg;for(let i=0,s=r.length;i<s;++i)r[i].set(t)}return t},changes(e){const t=this._adds,n=this._mods,r=this._prev,i=this._drop,s=e.add,o=e.rem,a=e.mod;let u,l,c,f;if(r)for(l in r)u=r[l],(!i||u.num)&&o.push(u.tuple);for(c=0,f=this._alen;c<f;++c)s.push(this.celltuple(t[c])),t[c]=null;for(c=0,f=this._mlen;c<f;++c)u=n[c],(u.num===0&&i?o:a).push(this.celltuple(u)),n[c]=null;return this._alen=this._mlen=0,this._prev=null,e}});const H5t=1e-14;function Ree(e){Pe.call(this,null,e)}Ree.Definition={type:"Bin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"anchor",type:"number"},{name:"maxbins",type:"number",default:20},{name:"base",type:"number",default:10},{name:"divide",type:"number",array:!0,default:[5,2]},{name:"extent",type:"number",array:!0,length:2,required:!0},{name:"span",type:"number"},{name:"step",type:"number"},{name:"steps",type:"number",array:!0},{name:"minstep",type:"number",default:0},{name:"nice",type:"boolean",default:!0},{name:"name",type:"string"},{name:"as",type:"string",array:!0,length:2,default:["bin0","bin1"]}]};lt(Ree,Pe,{transform(e,t){const n=e.interval!==!1,r=this._bins(e),i=r.start,s=r.step,o=e.as||["bin0","bin1"],a=o[0],u=o[1];let l;return e.modified()?(t=t.reflow(!0),l=t.SOURCE):l=t.modified(ga(e.field))?t.ADD_MOD:t.ADD,t.visit(l,n?c=>{const f=r(c);c[a]=f,c[u]=f==null?null:i+s*(1+(f-i)/s)}:c=>c[a]=r(c)),t.modifies(n?o:a)},_bins(e){if(this.value&&!e.modified())return this.value;const t=e.field,n=D3e(e),r=n.step;let i=n.start,s=i+Math.ceil((n.stop-i)/r)*r,o,a;(o=e.anchor)!=null&&(a=o-(i+r*Math.floor((o-i)/r)),i+=a,s+=a);const u=function(l){let c=ha(t(l));return c==null?null:c<i?-1/0:c>s?1/0:(c=Math.max(i,Math.min(c,s-r)),i+r*Math.floor(H5t+(c-i)/r))};return u.start=i,u.stop=n.stop,u.step=r,this.value=ll(u,ga(t),e.name||"bin_"+Ki(t))}});function K3e(e,t,n){const r=e;let i=t||[],s=n||[],o={},a=0;return{add:u=>s.push(u),remove:u=>o[r(u)]=++a,size:()=>i.length,data:(u,l)=>(a&&(i=i.filter(c=>!o[r(c)]),o={},a=0),l&&u&&i.sort(u),s.length&&(i=u?zOe(u,i,s.sort(u)):i.concat(s),s=[]),i)}}function Nee(e){Pe.call(this,[],e)}Nee.Definition={type:"Collect",metadata:{source:!0},params:[{name:"sort",type:"compare"}]};lt(Nee,Pe,{transform(e,t){const n=t.fork(t.ALL),r=K3e(Lt,this.value,n.materialize(n.ADD).add),i=e.sort,s=t.changed()||i&&(e.modified("sort")||t.modified(i.fields));return n.visit(n.REM,r.remove),this.modified(s),this.value=n.source=r.data(i_(i),s),t.source&&t.source.root&&(this.value.root=t.source.root),n}});function X3e(e){Kr.call(this,null,q5t,e)}lt(X3e,Kr);function q5t(e){return this.value&&!e.modified()?this.value:XZ(e.fields,e.orders)}function Pee(e){Pe.call(this,null,e)}Pee.Definition={type:"CountPattern",metadata:{generates:!0,changes:!0},params:[{name:"field",type:"field",required:!0},{name:"case",type:"enum",values:["upper","lower","mixed"],default:"mixed"},{name:"pattern",type:"string",default:'[\\w"]+'},{name:"stopwords",type:"string",default:""},{name:"as",type:"string",array:!0,length:2,default:["text","count"]}]};function W5t(e,t,n){switch(t){case"upper":e=e.toUpperCase();break;case"lower":e=e.toLowerCase();break}return e.match(n)}lt(Pee,Pe,{transform(e,t){const n=f=>d=>{for(var h=W5t(a(d),e.case,s)||[],p,m=0,g=h.length;m<g;++m)o.test(p=h[m])||f(p)},r=this._parameterCheck(e,t),i=this._counts,s=this._match,o=this._stop,a=e.field,u=e.as||["text","count"],l=n(f=>i[f]=1+(i[f]||0)),c=n(f=>i[f]-=1);return r?t.visit(t.SOURCE,l):(t.visit(t.ADD,l),t.visit(t.REM,c)),this._finish(t,u)},_parameterCheck(e,t){let n=!1;return(e.modified("stopwords")||!this._stop)&&(this._stop=new RegExp("^"+(e.stopwords||"")+"$","i"),n=!0),(e.modified("pattern")||!this._match)&&(this._match=new RegExp(e.pattern||"[\\w']+","g"),n=!0),(e.modified("field")||t.modified(e.field.fields))&&(n=!0),n&&(this._counts={}),n},_finish(e,t){const n=this._counts,r=this._tuples||(this._tuples={}),i=t[0],s=t[1],o=e.fork(e.NO_SOURCE|e.NO_FIELDS);let a,u,l;for(a in n)u=r[a],l=n[a]||0,!u&&l?(r[a]=u=Er({}),u[i]=a,u[s]=l,o.add.push(u)):l===0?(u&&o.rem.push(u),n[a]=null,r[a]=null):u[s]!==l&&(u[s]=l,o.mod.push(u));return o.modifies(t)}});function Dee(e){Pe.call(this,null,e)}Dee.Definition={type:"Cross",metadata:{generates:!0},params:[{name:"filter",type:"expr"},{name:"as",type:"string",array:!0,length:2,default:["a","b"]}]};lt(Dee,Pe,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.as||["a","b"],i=r[0],s=r[1],o=!this.value||t.changed(t.ADD_REM)||e.modified("as")||e.modified("filter");let a=this.value;return o?(a&&(n.rem=a),a=t.materialize(t.SOURCE).source,n.add=this.value=G5t(a,i,s,e.filter||jc)):n.mod=a,n.source=this.value,n.modifies(r)}});function G5t(e,t,n,r){for(var i=[],s={},o=e.length,a=0,u,l;a<o;++a)for(s[t]=l=e[a],u=0;u<o;++u)s[n]=e[u],r(s)&&(i.push(Er(s)),s={},s[t]=l);return i}const jpe={kde:yee,mixture:F3e,normal:gee,lognormal:L3e,uniform:j3e},Y5t="distributions",Bpe="function",K5t="field";function Q3e(e,t){const n=e[Bpe];jt(jpe,n)||Le("Unknown distribution function: "+n);const r=jpe[n]();for(const i in e)i===K5t?r.data((e.from||t()).map(e[i])):i===Y5t?r[i](e[i].map(s=>Q3e(s,t))):typeof r[i]===Bpe&&r[i](e[i]);return r}function Oee(e){Pe.call(this,null,e)}const J3e=[{key:{function:"normal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"lognormal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"uniform"},params:[{name:"min",type:"number",default:0},{name:"max",type:"number",default:1}]},{key:{function:"kde"},params:[{name:"field",type:"field",required:!0},{name:"from",type:"data"},{name:"bandwidth",type:"number",default:0}]}],X5t={key:{function:"mixture"},params:[{name:"distributions",type:"param",array:!0,params:J3e},{name:"weights",type:"number",array:!0}]};Oee.Definition={type:"Density",metadata:{generates:!0},params:[{name:"extent",type:"number",array:!0,length:2},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"method",type:"string",default:"pdf",values:["pdf","cdf"]},{name:"distribution",type:"param",params:J3e.concat(X5t)},{name:"as",type:"string",array:!0,default:["value","density"]}]};lt(Oee,Pe,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=Q3e(e.distribution,Q5t(t)),i=e.steps||e.minsteps||25,s=e.steps||e.maxsteps||200;let o=e.method||"pdf";o!=="pdf"&&o!=="cdf"&&Le("Invalid density method: "+o),!e.extent&&!r.data&&Le("Missing density extent parameter."),o=r[o];const a=e.as||["value","density"],u=e.extent||Fh(r.data()),l=fF(o,u,i,s).map(c=>{const f={};return f[a[0]]=c[0],f[a[1]]=c[1],Er(f)});this.value&&(n.rem=this.value),this.value=n.add=n.source=l}return n}});function Q5t(e){return()=>e.materialize(e.SOURCE).source}function Z3e(e,t){return e?e.map((n,r)=>t[r]||Ki(n)):null}function $ee(e,t,n){const r=[],i=f=>f(u);let s,o,a,u,l,c;if(t==null)r.push(e.map(n));else for(s={},o=0,a=e.length;o<a;++o)u=e[o],l=t.map(i),c=s[l],c||(s[l]=c=[],c.dims=l,r.push(c)),c.push(n(u));return r}const e$e="bin";function Mee(e){Pe.call(this,null,e)}Mee.Definition={type:"DotBin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"step",type:"number"},{name:"smooth",type:"boolean",default:!1},{name:"as",type:"string",default:e$e}]};const J5t=(e,t)=>hR(Fh(e,t))/30;lt(Mee,Pe,{transform(e,t){if(this.value&&!(e.modified()||t.changed()))return t;const n=t.materialize(t.SOURCE).source,r=$ee(t.source,e.groupby,xa),i=e.smooth||!1,s=e.field,o=e.step||J5t(n,s),a=i_((p,m)=>s(p)-s(m)),u=e.as||e$e,l=r.length;let c=1/0,f=-1/0,d=0,h;for(;d<l;++d){const p=r[d].sort(a);h=-1;for(const m of $3e(p,o,i,s))m<c&&(c=m),m>f&&(f=m),p[++h][u]=m}return this.value={start:c,stop:f,step:o},t.reflow(!0).modifies(u)}});function t$e(e){Kr.call(this,null,Z5t,e),this.modified(!0)}lt(t$e,Kr);function Z5t(e){const t=e.expr;return this.value&&!e.modified("expr")?this.value:ll(n=>t(n,e),ga(t),Ki(t))}function Lee(e){Pe.call(this,[void 0,void 0],e)}Lee.Definition={type:"Extent",metadata:{},params:[{name:"field",type:"field",required:!0}]};lt(Lee,Pe,{transform(e,t){const n=this.value,r=e.field,i=t.changed()||t.modified(r.fields)||e.modified("field");let s=n[0],o=n[1];if((i||s==null)&&(s=1/0,o=-1/0),t.visit(i?t.SOURCE:t.ADD,a=>{const u=ha(r(a));u!=null&&(u<s&&(s=u),u>o&&(o=u))}),!Number.isFinite(s)||!Number.isFinite(o)){let a=Ki(r);a&&(a=` for field "${a}"`),t.dataflow.warn(`Infinite extent${a}: [${s}, ${o}]`),s=o=void 0}this.value=[s,o]}});function Fee(e,t){Kr.call(this,e),this.parent=t,this.count=0}lt(Fee,Kr,{connect(e){return this.detachSubflow=e.detachSubflow,this.targets().add(e),e.source=this},add(e){this.count+=1,this.value.add.push(e)},rem(e){this.count-=1,this.value.rem.push(e)},mod(e){this.value.mod.push(e)},init(e){this.value.init(e,e.NO_SOURCE)},evaluate(){return this.value}});function dF(e){Pe.call(this,{},e),this._keys=WS();const t=this._targets=[];t.active=0,t.forEach=n=>{for(let r=0,i=t.active;r<i;++r)n(t[r],r,t)}}lt(dF,Pe,{activate(e){this._targets[this._targets.active++]=e},subflow(e,t,n,r){const i=this.value;let s=jt(i,e)&&i[e],o,a;return s?s.value.stamp<n.stamp&&(s.init(n),this.activate(s)):(a=r||(a=this._group[e])&&a.tuple,o=n.dataflow,s=new Fee(n.fork(n.NO_SOURCE),this),o.add(s).connect(t(o,e,a)),i[e]=s,this.activate(s)),s},clean(){const e=this.value;let t=0;for(const n in e)if(e[n].count===0){const r=e[n].detachSubflow;r&&r(),delete e[n],++t}if(t){const n=this._targets.filter(r=>r&&r.count>0);this.initTargets(n)}},initTargets(e){const t=this._targets,n=t.length,r=e?e.length:0;let i=0;for(;i<r;++i)t[i]=e[i];for(;i<n&&t[i]!=null;++i)t[i]=null;t.active=r},transform(e,t){const n=t.dataflow,r=e.key,i=e.subflow,s=this._keys,o=e.modified("key"),a=u=>this.subflow(u,i,t);return this._group=e.group||{},this.initTargets(),t.visit(t.REM,u=>{const l=Lt(u),c=s.get(l);c!==void 0&&(s.delete(l),a(c).rem(u))}),t.visit(t.ADD,u=>{const l=r(u);s.set(Lt(u),l),a(l).add(u)}),o||t.modified(r.fields)?t.visit(t.MOD,u=>{const l=Lt(u),c=s.get(l),f=r(u);c===f?a(f).mod(u):(s.set(l,f),a(c).rem(u),a(f).add(u))}):t.changed(t.MOD)&&t.visit(t.MOD,u=>{a(s.get(Lt(u))).mod(u)}),o&&t.visit(t.REFLOW,u=>{const l=Lt(u),c=s.get(l),f=r(u);c!==f&&(s.set(l,f),a(c).rem(u),a(f).add(u))}),t.clean()?n.runAfter(()=>{this.clean(),s.clean()}):s.empty>n.cleanThreshold&&n.runAfter(s.clean),t}});function n$e(e){Kr.call(this,null,ejt,e)}lt(n$e,Kr);function ejt(e){return this.value&&!e.modified()?this.value:je(e.name)?pt(e.name).map(t=>Fc(t)):Fc(e.name,e.as)}function jee(e){Pe.call(this,WS(),e)}jee.Definition={type:"Filter",metadata:{changes:!0},params:[{name:"expr",type:"expr",required:!0}]};lt(jee,Pe,{transform(e,t){const n=t.dataflow,r=this.value,i=t.fork(),s=i.add,o=i.rem,a=i.mod,u=e.expr;let l=!0;t.visit(t.REM,f=>{const d=Lt(f);r.has(d)?r.delete(d):o.push(f)}),t.visit(t.ADD,f=>{u(f,e)?s.push(f):r.set(Lt(f),1)});function c(f){const d=Lt(f),h=u(f,e),p=r.get(d);h&&p?(r.delete(d),s.push(f)):!h&&!p?(r.set(d,1),o.push(f)):l&&h&&!p&&a.push(f)}return t.visit(t.MOD,c),e.modified()&&(l=!1,t.visit(t.REFLOW,c)),r.empty>n.cleanThreshold&&n.runAfter(r.clean),i}});function Bee(e){Pe.call(this,[],e)}Bee.Definition={type:"Flatten",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"index",type:"string"},{name:"as",type:"string",array:!0}]};lt(Bee,Pe,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=Z3e(r,e.as||[]),s=e.index||null,o=i.length;return n.rem=this.value,t.visit(t.SOURCE,a=>{const u=r.map(p=>p(a)),l=u.reduce((p,m)=>Math.max(p,m.length),0);let c=0,f,d,h;for(;c<l;++c){for(d=lee(a),f=0;f<o;++f)d[i[f]]=(h=u[f][c])==null?null:h;s&&(d[s]=c),n.add.push(d)}}),this.value=n.source=n.add,s&&n.modifies(s),n.modifies(i)}});function Uee(e){Pe.call(this,[],e)}Uee.Definition={type:"Fold",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0,length:2,default:["key","value"]}]};lt(Uee,Pe,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=r.map(Ki),s=e.as||["key","value"],o=s[0],a=s[1],u=r.length;return n.rem=this.value,t.visit(t.SOURCE,l=>{for(let c=0,f;c<u;++c)f=lee(l),f[o]=i[c],f[a]=r[c](l),n.add.push(f)}),this.value=n.source=n.add,n.modifies(s)}});function zee(e){Pe.call(this,null,e)}zee.Definition={type:"Formula",metadata:{modifies:!0},params:[{name:"expr",type:"expr",required:!0},{name:"as",type:"string",required:!0},{name:"initonly",type:"boolean"}]};lt(zee,Pe,{transform(e,t){const n=e.expr,r=e.as,i=e.modified(),s=e.initonly?t.ADD:i?t.SOURCE:t.modified(n.fields)||t.modified(r)?t.ADD_MOD:t.ADD;return i&&(t=t.materialize().reflow(!0)),e.initonly||t.modifies(r),t.visit(s,o=>o[r]=n(o,e))}});function r$e(e){Pe.call(this,[],e)}lt(r$e,Pe,{transform(e,t){const n=t.fork(t.ALL),r=e.generator;let i=this.value,s=e.size-i.length,o,a,u;if(s>0){for(o=[];--s>=0;)o.push(u=Er(r(e))),i.push(u);n.add=n.add.length?n.materialize(n.ADD).add.concat(o):o}else a=i.slice(0,-s),n.rem=n.rem.length?n.materialize(n.REM).rem.concat(a):a,i=i.slice(-s);return n.source=this.value=i,n}});const AP={value:"value",median:tSe,mean:eSe,min:h3,max:ch},tjt=[];function Vee(e){Pe.call(this,[],e)}Vee.Definition={type:"Impute",metadata:{changes:!0},params:[{name:"field",type:"field",required:!0},{name:"key",type:"field",required:!0},{name:"keyvals",array:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"enum",default:"value",values:["value","mean","median","max","min"]},{name:"value",default:0}]};function njt(e){var t=e.method||AP.value,n;if(AP[t]==null)Le("Unrecognized imputation method: "+t);else return t===AP.value?(n=e.value!==void 0?e.value:0,()=>n):AP[t]}function rjt(e){const t=e.field;return n=>n?t(n):NaN}lt(Vee,Pe,{transform(e,t){var n=t.fork(t.ALL),r=njt(e),i=rjt(e),s=Ki(e.field),o=Ki(e.key),a=(e.groupby||[]).map(Ki),u=ijt(t.source,e.groupby,e.key,e.keyvals),l=[],c=this.value,f=u.domain.length,d,h,p,m,g,y,v,_,w,E;for(g=0,_=u.length;g<_;++g)for(d=u[g],p=d.values,h=NaN,v=0;v<f;++v)if(d[v]==null){for(m=u.domain[v],E={_impute:!0},y=0,w=p.length;y<w;++y)E[a[y]]=p[y];E[o]=m,E[s]=Number.isNaN(h)?h=r(d,i):h,l.push(Er(E))}return l.length&&(n.add=n.materialize(n.ADD).add.concat(l)),c.length&&(n.rem=n.materialize(n.REM).rem.concat(c)),this.value=l,n}});function ijt(e,t,n,r){var i=y=>y(g),s=[],o=r?r.slice():[],a={},u={},l,c,f,d,h,p,m,g;for(o.forEach((y,v)=>a[y]=v+1),d=0,m=e.length;d<m;++d)g=e[d],p=n(g),h=a[p]||(a[p]=o.push(p)),c=(l=t?t.map(i):tjt)+"",(f=u[c])||(f=u[c]=[],s.push(f),f.values=l),f[h-1]=g;return s.domain=o,s}function Hee(e){dy.call(this,e)}Hee.Definition={type:"JoinAggregate",metadata:{modifies:!0},params:[{name:"groupby",type:"field",array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"ops",type:"enum",array:!0,values:gR},{name:"as",type:"string",null:!0,array:!0},{name:"key",type:"field"}]};lt(Hee,dy,{transform(e,t){const n=this,r=e.modified();let i;return n.value&&(r||t.modified(n._inputs,!0))?(i=n.value=r?n.init(e):{},t.visit(t.SOURCE,s=>n.add(s))):(i=n.value=n.value||this.init(e),t.visit(t.REM,s=>n.rem(s)),t.visit(t.ADD,s=>n.add(s))),n.changes(),t.visit(t.SOURCE,s=>{bn(s,i[n.cellkey(s)].tuple)}),t.reflow(r).modifies(this._outputs)},changes(){const e=this._adds,t=this._mods;let n,r;for(n=0,r=this._alen;n<r;++n)this.celltuple(e[n]),e[n]=null;for(n=0,r=this._mlen;n<r;++n)this.celltuple(t[n]),t[n]=null;this._alen=this._mlen=0}});function qee(e){Pe.call(this,null,e)}qee.Definition={type:"KDE",metadata:{generates:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"cumulative",type:"boolean",default:!1},{name:"counts",type:"boolean",default:!1},{name:"bandwidth",type:"number",default:0},{name:"extent",type:"number",array:!0,length:2},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"as",type:"string",array:!0,default:["value","density"]}]};lt(qee,Pe,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=$ee(r,e.groupby,e.field),s=(e.groupby||[]).map(Ki),o=e.bandwidth,a=e.cumulative?"cdf":"pdf",u=e.as||["value","density"],l=[];let c=e.extent,f=e.steps||e.minsteps||25,d=e.steps||e.maxsteps||200;a!=="pdf"&&a!=="cdf"&&Le("Invalid density method: "+a),e.resolve==="shared"&&(c||(c=Fh(r,e.field)),f=d=e.steps||d),i.forEach(h=>{const p=yee(h,o)[a],m=e.counts?h.length:1,g=c||Fh(h);fF(p,g,f,d).forEach(y=>{const v={};for(let _=0;_<s.length;++_)v[s[_]]=h.dims[_];v[u[0]]=y[0],v[u[1]]=y[1]*m,l.push(Er(v))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=l}return n}});function i$e(e){Kr.call(this,null,sjt,e)}lt(i$e,Kr);function sjt(e){return this.value&&!e.modified()?this.value:JZ(e.fields,e.flat)}function s$e(e){Pe.call(this,[],e),this._pending=null}lt(s$e,Pe,{transform(e,t){const n=t.dataflow;return this._pending?Q9(this,t,this._pending):ojt(e)?t.StopPropagation:e.values?Q9(this,t,n.parse(e.values,e.format)):e.async?{async:n.request(e.url,e.format).then(i=>(this._pending=pt(i.data),s=>s.touch(this)))}:n.request(e.url,e.format).then(r=>Q9(this,t,pt(r.data)))}});function ojt(e){return e.modified("async")&&!(e.modified("values")||e.modified("url")||e.modified("format"))}function Q9(e,t,n){n.forEach(Er);const r=t.fork(t.NO_FIELDS&t.NO_SOURCE);return r.rem=e.value,e.value=r.source=r.add=n,e._pending=null,r.rem.length&&r.clean(!0),r}function Wee(e){Pe.call(this,{},e)}Wee.Definition={type:"Lookup",metadata:{modifies:!0},params:[{name:"index",type:"index",params:[{name:"from",type:"data",required:!0},{name:"key",type:"field",required:!0}]},{name:"values",type:"field",array:!0},{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0},{name:"default",default:null}]};lt(Wee,Pe,{transform(e,t){const n=e.fields,r=e.index,i=e.values,s=e.default==null?null:e.default,o=e.modified(),a=n.length;let u=o?t.SOURCE:t.ADD,l=t,c=e.as,f,d,h;return i?(d=i.length,a>1&&!c&&Le('Multi-field lookup requires explicit "as" parameter.'),c&&c.length!==a*d&&Le('The "as" parameter has too few output field names.'),c=c||i.map(Ki),f=function(p){for(var m=0,g=0,y,v;m<a;++m)if(v=r.get(n[m](p)),v==null)for(y=0;y<d;++y,++g)p[c[g]]=s;else for(y=0;y<d;++y,++g)p[c[g]]=i[y](v)}):(c||Le("Missing output field names."),f=function(p){for(var m=0,g;m<a;++m)g=r.get(n[m](p)),p[c[m]]=g??s}),o?l=t.reflow(!0):(h=n.some(p=>t.modified(p.fields)),u|=h?t.MOD:0),t.visit(u,f),l.modifies(c)}});function o$e(e){Kr.call(this,null,ajt,e)}lt(o$e,Kr);function ajt(e){if(this.value&&!e.modified())return this.value;const t=e.extents,n=t.length;let r=1/0,i=-1/0,s,o;for(s=0;s<n;++s)o=t[s],o[0]<r&&(r=o[0]),o[1]>i&&(i=o[1]);return[r,i]}function a$e(e){Kr.call(this,null,ujt,e)}lt(a$e,Kr);function ujt(e){return this.value&&!e.modified()?this.value:e.values.reduce((t,n)=>t.concat(n),[])}function u$e(e){Pe.call(this,null,e)}lt(u$e,Pe,{transform(e,t){return this.modified(e.modified()),this.value=e,t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function Gee(e){dy.call(this,e)}Gee.Definition={type:"Pivot",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"value",type:"field",required:!0},{name:"op",type:"enum",values:gR,default:"sum"},{name:"limit",type:"number",default:0},{name:"key",type:"field"}]};lt(Gee,dy,{_transform:dy.prototype.transform,transform(e,t){return this._transform(ljt(e,t),t)}});function ljt(e,t){const n=e.field,r=e.value,i=(e.op==="count"?"__count__":e.op)||"sum",s=ga(n).concat(ga(r)),o=fjt(n,e.limit||0,t);return t.changed()&&e.set("__pivot__",null,null,!0),{key:e.key,groupby:e.groupby,ops:o.map(()=>i),fields:o.map(a=>cjt(a,n,r,s)),as:o.map(a=>a+""),modified:e.modified.bind(e)}}function cjt(e,t,n,r){return ll(i=>t(i)===e?n(i):NaN,r,e+"")}function fjt(e,t,n){const r={},i=[];return n.visit(n.SOURCE,s=>{const o=e(s);r[o]||(r[o]=1,i.push(o))}),i.sort(Z4),t?i.slice(0,t):i}function l$e(e){dF.call(this,e)}lt(l$e,dF,{transform(e,t){const n=e.subflow,r=e.field,i=s=>this.subflow(Lt(s),n,t,s);return(e.modified("field")||r&&t.modified(ga(r)))&&Le("PreFacet does not support field modification."),this.initTargets(),r?(t.visit(t.MOD,s=>{const o=i(s);r(s).forEach(a=>o.mod(a))}),t.visit(t.ADD,s=>{const o=i(s);r(s).forEach(a=>o.add(Er(a)))}),t.visit(t.REM,s=>{const o=i(s);r(s).forEach(a=>o.rem(a))})):(t.visit(t.MOD,s=>i(s).mod(s)),t.visit(t.ADD,s=>i(s).add(s)),t.visit(t.REM,s=>i(s).rem(s))),t.clean()&&t.runAfter(()=>this.clean()),t}});function Yee(e){Pe.call(this,null,e)}Yee.Definition={type:"Project",metadata:{generates:!0,changes:!0},params:[{name:"fields",type:"field",array:!0},{name:"as",type:"string",null:!0,array:!0}]};lt(Yee,Pe,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=Z3e(e.fields,e.as||[]),s=r?(a,u)=>djt(a,u,r,i):iF;let o;return this.value?o=this.value:(t=t.addAll(),o=this.value={}),t.visit(t.REM,a=>{const u=Lt(a);n.rem.push(o[u]),o[u]=null}),t.visit(t.ADD,a=>{const u=s(a,Er({}));o[Lt(a)]=u,n.add.push(u)}),t.visit(t.MOD,a=>{n.mod.push(s(a,o[Lt(a)]))}),n}});function djt(e,t,n,r){for(let i=0,s=n.length;i<s;++i)t[r[i]]=n[i](e);return t}function c$e(e){Pe.call(this,null,e)}lt(c$e,Pe,{transform(e,t){return this.value=e.value,e.modified("value")?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});function Kee(e){Pe.call(this,null,e)}Kee.Definition={type:"Quantile",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"probs",type:"number",array:!0},{name:"step",type:"number",default:.01},{name:"as",type:"string",array:!0,default:["prob","value"]}]};const hjt=1e-14;lt(Kee,Pe,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=e.as||["prob","value"];if(this.value&&!e.modified()&&!t.changed())return n.source=this.value,n;const i=t.materialize(t.SOURCE).source,s=$ee(i,e.groupby,e.field),o=(e.groupby||[]).map(Ki),a=[],u=e.step||.01,l=e.probs||Mu(u/2,1-hjt,u),c=l.length;return s.forEach(f=>{const d=dee(f,l);for(let h=0;h<c;++h){const p={};for(let m=0;m<o.length;++m)p[o[m]]=f.dims[m];p[r[0]]=l[h],p[r[1]]=d[h],a.push(Er(p))}}),this.value&&(n.rem=this.value),this.value=n.add=n.source=a,n}});function f$e(e){Pe.call(this,null,e)}lt(f$e,Pe,{transform(e,t){let n,r;return this.value?r=this.value:(n=t=t.addAll(),r=this.value={}),e.derive&&(n=t.fork(t.NO_SOURCE),t.visit(t.REM,i=>{const s=Lt(i);n.rem.push(r[s]),r[s]=null}),t.visit(t.ADD,i=>{const s=lee(i);r[Lt(i)]=s,n.add.push(s)}),t.visit(t.MOD,i=>{const s=r[Lt(i)];for(const o in i)s[o]=i[o],n.modifies(o);n.mod.push(s)})),n}});function Xee(e){Pe.call(this,[],e),this.count=0}Xee.Definition={type:"Sample",metadata:{},params:[{name:"size",type:"number",default:1e3}]};lt(Xee,Pe,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.modified("size"),i=e.size,s=this.value.reduce((c,f)=>(c[Lt(f)]=1,c),{});let o=this.value,a=this.count,u=0;function l(c){let f,d;o.length<i?o.push(c):(d=~~((a+1)*Uc()),d<o.length&&d>=u&&(f=o[d],s[Lt(f)]&&n.rem.push(f),o[d]=c)),++a}if(t.rem.length&&(t.visit(t.REM,c=>{const f=Lt(c);s[f]&&(s[f]=-1,n.rem.push(c)),--a}),o=o.filter(c=>s[Lt(c)]!==-1)),(t.rem.length||r)&&o.length<i&&t.source&&(u=a=o.length,t.visit(t.SOURCE,c=>{s[Lt(c)]||l(c)}),u=-1),r&&o.length>i){const c=o.length-i;for(let f=0;f<c;++f)s[Lt(o[f])]=-1,n.rem.push(o[f]);o=o.slice(c)}return t.mod.length&&t.visit(t.MOD,c=>{s[Lt(c)]&&n.mod.push(c)}),t.add.length&&t.visit(t.ADD,l),(t.add.length||u<0)&&(n.add=o.filter(c=>!s[Lt(c)])),this.count=a,this.value=n.source=o,n}});function Qee(e){Pe.call(this,null,e)}Qee.Definition={type:"Sequence",metadata:{generates:!0,changes:!0},params:[{name:"start",type:"number",required:!0},{name:"stop",type:"number",required:!0},{name:"step",type:"number",default:1},{name:"as",type:"string",default:"data"}]};lt(Qee,Pe,{transform(e,t){if(this.value&&!e.modified())return;const n=t.materialize().fork(t.MOD),r=e.as||"data";return n.rem=this.value?t.rem.concat(this.value):t.rem,this.value=Mu(e.start,e.stop,e.step||1).map(i=>{const s={};return s[r]=i,Er(s)}),n.add=t.add.concat(this.value),n}});function d$e(e){Pe.call(this,null,e),this.modified(!0)}lt(d$e,Pe,{transform(e,t){return this.value=t.source,t.changed()?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});function Jee(e){Pe.call(this,null,e)}const h$e=["unit0","unit1"];Jee.Definition={type:"TimeUnit",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"units",type:"enum",values:nee,array:!0},{name:"step",type:"number",default:1},{name:"maxbins",type:"number",default:40},{name:"extent",type:"date",array:!0},{name:"timezone",type:"enum",default:"local",values:["local","utc"]},{name:"as",type:"string",array:!0,length:2,default:h$e}]};lt(Jee,Pe,{transform(e,t){const n=e.field,r=e.interval!==!1,i=e.timezone==="utc",s=this._floor(e,t),o=(i?YS:GS)(s.unit).offset,a=e.as||h$e,u=a[0],l=a[1],c=s.step;let f=s.start||1/0,d=s.stop||-1/0,h=t.ADD;return(e.modified()||t.changed(t.REM)||t.modified(ga(n)))&&(t=t.reflow(!0),h=t.SOURCE,f=1/0,d=-1/0),t.visit(h,p=>{const m=n(p);let g,y;m==null?(p[u]=null,r&&(p[l]=null)):(p[u]=g=y=s(m),r&&(p[l]=y=o(g,c)),g<f&&(f=g),y>d&&(d=y))}),s.start=f,s.stop=d,t.modifies(r?a:u)},_floor(e,t){const n=e.timezone==="utc",{units:r,step:i}=e.units?{units:e.units,step:e.step||1}:c3e({extent:e.extent||Fh(t.materialize(t.SOURCE).source,e.field),maxbins:e.maxbins}),s=ree(r),o=this.value||{},a=(n?t3e:e3e)(s,i);return a.unit=Qn(s),a.units=s,a.step=i,a.start=o.start,a.stop=o.stop,this.value=a}});function p$e(e){Pe.call(this,WS(),e)}lt(p$e,Pe,{transform(e,t){const n=t.dataflow,r=e.field,i=this.value,s=a=>i.set(r(a),a);let o=!0;return e.modified("field")||t.modified(r.fields)?(i.clear(),t.visit(t.SOURCE,s)):t.changed()?(t.visit(t.REM,a=>i.delete(r(a))),t.visit(t.ADD,s)):o=!1,this.modified(o),i.empty>n.cleanThreshold&&n.runAfter(i.clean),t.fork()}});function m$e(e){Pe.call(this,null,e)}lt(m$e,Pe,{transform(e,t){(!this.value||e.modified("field")||e.modified("sort")||t.changed()||e.sort&&t.modified(e.sort.fields))&&(this.value=(e.sort?t.source.slice().sort(i_(e.sort)):t.source).map(e.field))}});function pjt(e,t,n,r){const i=OI[e](t,n);return{init:i.init||Kg,update:function(s,o){o[r]=i.next(s)}}}const OI={row_number:function(){return{next:e=>e.index+1}},rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,r=t.data;return n&&t.compare(r[n-1],r[n])?e=n+1:e}}},dense_rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,r=t.data;return n&&t.compare(r[n-1],r[n])?++e:e}}},percent_rank:function(){const e=OI.rank(),t=e.next;return{init:e.init,next:n=>(t(n)-1)/(n.data.length-1)}},cume_dist:function(){let e;return{init:()=>e=0,next:t=>{const n=t.data,r=t.compare;let i=t.index;if(e<i){for(;i+1<n.length&&!r(n[i],n[i+1]);)++i;e=i}return(1+e)/n.length}}},ntile:function(e,t){t=+t,t>0||Le("ntile num must be greater than zero.");const n=OI.cume_dist(),r=n.next;return{init:n.init,next:i=>Math.ceil(t*r(i))}},lag:function(e,t){return t=+t||1,{next:n=>{const r=n.index-t;return r>=0?e(n.data[r]):null}}},lead:function(e,t){return t=+t||1,{next:n=>{const r=n.index+t,i=n.data;return r<i.length?e(i[r]):null}}},first_value:function(e){return{next:t=>e(t.data[t.i0])}},last_value:function(e){return{next:t=>e(t.data[t.i1-1])}},nth_value:function(e,t){return t=+t,t>0||Le("nth_value nth must be greater than zero."),{next:n=>{const r=n.i0+(t-1);return r<n.i1?e(n.data[r]):null}}},prev_value:function(e){let t;return{init:()=>t=null,next:n=>{const r=e(n.data[n.index]);return r!=null?t=r:t}}},next_value:function(e){let t,n;return{init:()=>(t=null,n=-1),next:r=>{const i=r.data;return r.index<=n?t:(n=mjt(e,i,r.index))<0?(n=i.length,t=null):t=e(i[n])}}}};function mjt(e,t,n){for(let r=t.length;n<r;++n)if(e(t[n])!=null)return n;return-1}const gjt=Object.keys(OI);function g$e(e){const t=pt(e.ops),n=pt(e.fields),r=pt(e.params),i=pt(e.aggregate_params),s=pt(e.as),o=this.outputs=[],a=this.windows=[],u={},l={},c=[],f=[];let d=!0;function h(p){pt(ga(p)).forEach(m=>u[m]=1)}h(e.sort),t.forEach((p,m)=>{const g=n[m],y=r[m],v=i[m]||null,_=Ki(g),w=q3e(p,_,s[m]);if(h(g),o.push(w),jt(OI,p))a.push(pjt(p,g,y,w));else{if(g==null&&p!=="count"&&Le("Null aggregate field specified."),p==="count"){c.push(w);return}d=!1;let E=l[_];E||(E=l[_]=[],E.field=g,f.push(E)),E.push(W3e(p,v,w))}}),(c.length||f.length)&&(this.cell=yjt(f,c,d)),this.inputs=Object.keys(u)}const y$e=g$e.prototype;y$e.init=function(){this.windows.forEach(e=>e.init()),this.cell&&this.cell.init()};y$e.update=function(e,t){const n=this.cell,r=this.windows,i=e.data,s=r&&r.length;let o;if(n){for(o=e.p0;o<e.i0;++o)n.rem(i[o]);for(o=e.p1;o<e.i1;++o)n.add(i[o]);n.set(t)}for(o=0;o<s;++o)r[o].update(e,t)};function yjt(e,t,n){e=e.map(u=>Y3e(u,u.field));const r={num:0,agg:null,store:!1,count:t};if(!n)for(var i=e.length,s=r.agg=Array(i),o=0;o<i;++o)s[o]=new e[o](r);if(r.store)var a=r.data=new kee;return r.add=function(u){if(r.num+=1,!n){a&&a.add(u);for(let l=0;l<i;++l)s[l].add(s[l].get(u),u)}},r.rem=function(u){if(r.num-=1,!n){a&&a.rem(u);for(let l=0;l<i;++l)s[l].rem(s[l].get(u),u)}},r.set=function(u){let l,c;for(a&&a.values(),l=0,c=t.length;l<c;++l)u[t[l]]=r.num;if(!n)for(l=0,c=s.length;l<c;++l)s[l].set(u)},r.init=function(){r.num=0,a&&a.reset();for(let u=0;u<i;++u)s[u].init()},r}function Zee(e){Pe.call(this,{},e),this._mlen=0,this._mods=[]}Zee.Definition={type:"Window",metadata:{modifies:!0},params:[{name:"sort",type:"compare"},{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:gjt.concat(gR)},{name:"params",type:"number",null:!0,array:!0},{name:"aggregate_params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"frame",type:"number",null:!0,array:!0,length:2,default:[null,0]},{name:"ignorePeers",type:"boolean",default:!1}]};lt(Zee,Pe,{transform(e,t){this.stamp=t.stamp;const n=e.modified(),r=i_(e.sort),i=bH(e.groupby),s=a=>this.group(i(a));let o=this.state;(!o||n)&&(o=this.state=new g$e(e)),n||t.modified(o.inputs)?(this.value={},t.visit(t.SOURCE,a=>s(a).add(a))):(t.visit(t.REM,a=>s(a).remove(a)),t.visit(t.ADD,a=>s(a).add(a)));for(let a=0,u=this._mlen;a<u;++a)vjt(this._mods[a],o,r,e);return this._mlen=0,this._mods=[],t.reflow(n).modifies(o.outputs)},group(e){let t=this.value[e];return t||(t=this.value[e]=K3e(Lt),t.stamp=-1),t.stamp<this.stamp&&(t.stamp=this.stamp,this._mods[this._mlen++]=t),t}});function vjt(e,t,n,r){const i=r.sort,s=i&&!r.ignorePeers,o=r.frame||[null,0],a=e.data(n),u=a.length,l=s?pS(i):null,c={i0:0,i1:0,p0:0,p1:0,index:0,data:a,compare:i||Sa(-1)};t.init();for(let f=0;f<u;++f)bjt(c,o,f,u),s&&_jt(c,l),t.update(c,a[f])}function bjt(e,t,n,r){e.p0=e.i0,e.p1=e.i1,e.i0=t[0]==null?0:Math.max(0,n-Math.abs(t[0])),e.i1=t[1]==null?r:Math.min(r,n+Math.abs(t[1])+1),e.index=n}function _jt(e,t){const n=e.i0,r=e.i1-1,i=e.compare,s=e.data,o=s.length-1;n>0&&!i(s[n],s[n-1])&&(e.i0=t.left(s,s[n])),r<o&&!i(s[r],s[r+1])&&(e.i1=t.right(s,s[r]))}const wjt=Object.freeze(Object.defineProperty({__proto__:null,aggregate:dy,bin:Ree,collect:Nee,compare:X3e,countpattern:Pee,cross:Dee,density:Oee,dotbin:Mee,expression:t$e,extent:Lee,facet:dF,field:n$e,filter:jee,flatten:Bee,fold:Uee,formula:zee,generate:r$e,impute:Vee,joinaggregate:Hee,kde:qee,key:i$e,load:s$e,lookup:Wee,multiextent:o$e,multivalues:a$e,params:u$e,pivot:Gee,prefacet:l$e,project:Yee,proxy:c$e,quantile:Kee,relay:f$e,sample:Xee,sequence:Qee,sieve:d$e,subflow:Fee,timeunit:Jee,tupleindex:p$e,values:m$e,window:Zee},Symbol.toStringTag,{value:"Module"}));function O0(e,t){if(typeof document<"u"&&document.createElement){const n=document.createElement("canvas");if(n&&n.getContext)return n.width=e,n.height=t,n}return null}const Ejt=()=>typeof Image<"u"?Image:null;function ete(e,t,n){const r=e-t+n*2;return e?r>0?r:1:0}const xjt="identity",xx="linear",Bm="log",yR="pow",vR="sqrt",hF="symlog",fb="time",db="utc",wh="sequential",XS="diverging",Sx="quantile",pF="quantize",mF="threshold",tte="ordinal",_H="point",v$e="band",nte="bin-ordinal",Vs="continuous",bR="discrete",_R="discretizing",Jc="interpolating",rte="temporal";function Sjt(e){return function(t){let n=t[0],r=t[1],i;return r<n&&(i=n,n=r,r=i),[e.invert(n),e.invert(r)]}}function Tjt(e){return function(t){const n=e.range();let r=t[0],i=t[1],s=-1,o,a,u,l;for(i<r&&(a=r,r=i,i=a),u=0,l=n.length;u<l;++u)n[u]>=r&&n[u]<=i&&(s<0&&(s=u),o=u);if(!(s<0))return r=e.invertExtent(n[s]),i=e.invertExtent(n[o]),[r[0]===void 0?r[1]:r[0],i[1]===void 0?i[0]:i[1]]}}function ite(){const e=Gb().unknown(void 0),t=e.domain,n=e.range;let r=[0,1],i,s,o=!1,a=0,u=0,l=.5;delete e.unknown;function c(){const f=t().length,d=r[1]<r[0],h=r[1-d],p=ete(f,a,u);let m=r[d-0];i=(h-m)/(p||1),o&&(i=Math.floor(i)),m+=(h-m-i*(f-a))*l,s=i*(1-a),o&&(m=Math.round(m),s=Math.round(s));const g=Mu(f).map(y=>m+i*y);return n(d?g.reverse():g)}return e.domain=function(f){return arguments.length?(t(f),c()):t()},e.range=function(f){return arguments.length?(r=[+f[0],+f[1]],c()):r.slice()},e.rangeRound=function(f){return r=[+f[0],+f[1]],o=!0,c()},e.bandwidth=function(){return s},e.step=function(){return i},e.round=function(f){return arguments.length?(o=!!f,c()):o},e.padding=function(f){return arguments.length?(u=Math.max(0,Math.min(1,f)),a=u,c()):a},e.paddingInner=function(f){return arguments.length?(a=Math.max(0,Math.min(1,f)),c()):a},e.paddingOuter=function(f){return arguments.length?(u=Math.max(0,Math.min(1,f)),c()):u},e.align=function(f){return arguments.length?(l=Math.max(0,Math.min(1,f)),c()):l},e.invertRange=function(f){if(f[0]==null||f[1]==null)return;const d=r[1]<r[0],h=d?n().reverse():n(),p=h.length-1;let m=+f[0],g=+f[1],y,v,_;if(!(m!==m||g!==g)&&(g<m&&(_=m,m=g,g=_),!(g<h[0]||m>r[1-d])))return y=Math.max(0,q0(h,m)-1),v=m===g?y:q0(h,g)-1,m-h[y]>s+1e-10&&++y,d&&(_=y,y=p-v,v=p-_),y>v?void 0:t().slice(y,v+1)},e.invert=function(f){const d=e.invertRange([f,f]);return d&&d[0]},e.copy=function(){return ite().domain(t()).range(r).round(o).paddingInner(a).paddingOuter(u).align(l)},c()}function b$e(e){const t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,e.copy=function(){return b$e(t())},e}function Cjt(){return b$e(ite().paddingInner(1))}var Ajt=Array.prototype.map;function Ijt(e){return Ajt.call(e,ha)}const kjt=Array.prototype.slice;function _$e(){let e=[],t=[];function n(r){return r==null||r!==r?void 0:t[(q0(e,r)-1)%t.length]}return n.domain=function(r){return arguments.length?(e=Ijt(r),n):e.slice()},n.range=function(r){return arguments.length?(t=kjt.call(r),n):t.slice()},n.tickFormat=function(r,i){return t2e(e[0],Qn(e),r??10,i)},n.copy=function(){return _$e().domain(n.domain()).range(n.range())},n}const mM=new Map,w$e=Symbol("vega_scale");function E$e(e){return e[w$e]=!0,e}function Rjt(e){return e&&e[w$e]===!0}function Njt(e,t,n){const r=function(){const s=t();return s.invertRange||(s.invertRange=s.invert?Sjt(s):s.invertExtent?Tjt(s):void 0),s.type=e,E$e(s)};return r.metadata=td(pt(n)),r}function gr(e,t,n){return arguments.length>1?(mM.set(e,Njt(e,t,n)),this):x$e(e)?mM.get(e):void 0}gr(xjt,n2e);gr(xx,Kf,Vs);gr(Bm,i2e,[Vs,Bm]);gr(yR,VK,Vs);gr(vR,Omt,Vs);gr(hF,s2e,Vs);gr(fb,JA,[Vs,rte]);gr(db,Kgt,[Vs,rte]);gr(wh,YK,[Vs,Jc]);gr(`${wh}-${xx}`,YK,[Vs,Jc]);gr(`${wh}-${Bm}`,y2e,[Vs,Jc,Bm]);gr(`${wh}-${yR}`,KK,[Vs,Jc]);gr(`${wh}-${vR}`,Xgt,[Vs,Jc]);gr(`${wh}-${hF}`,v2e,[Vs,Jc]);gr(`${XS}-${xx}`,b2e,[Vs,Jc]);gr(`${XS}-${Bm}`,_2e,[Vs,Jc,Bm]);gr(`${XS}-${yR}`,XK,[Vs,Jc]);gr(`${XS}-${vR}`,Qgt,[Vs,Jc]);gr(`${XS}-${hF}`,w2e,[Vs,Jc]);gr(Sx,o2e,[_R,Sx]);gr(pF,a2e,_R);gr(mF,u2e,_R);gr(nte,_$e,[bR,_R]);gr(tte,Gb,bR);gr(v$e,ite,bR);gr(_H,Cjt,bR);function x$e(e){return mM.has(e)}function o_(e,t){const n=mM.get(e);return n&&n.metadata[t]}function ste(e){return o_(e,Vs)}function Tx(e){return o_(e,bR)}function wH(e){return o_(e,_R)}function S$e(e){return o_(e,Bm)}function Pjt(e){return o_(e,rte)}function T$e(e){return o_(e,Jc)}function C$e(e){return o_(e,Sx)}const Djt=["clamp","base","constant","exponent"];function A$e(e,t){const n=t[0],r=Qn(t)-n;return function(i){return e(n+i*r)}}function gF(e,t,n){return wK(ote(t||"rgb",n),e)}function I$e(e,t){const n=new Array(t),r=t+1;for(let i=0;i<t;)n[i]=e(++i/r);return n}function k$e(e,t,n){const r=n-t;let i,s,o;return!r||!Number.isFinite(r)?Sa(.5):(i=(s=e.type).indexOf("-"),s=i<0?s:s.slice(i+1),o=gr(s)().domain([t,n]).range([0,1]),Djt.forEach(a=>e[a]?o[a](e[a]()):0),o)}function ote(e,t){const n=Ict[Ojt(e)];return t!=null&&n&&n.gamma?n.gamma(t):n}function Ojt(e){return"interpolate"+e.toLowerCase().split("-").map(t=>t[0].toUpperCase()+t.slice(1)).join("")}const $jt={blues:"cfe1f2bed8eca8cee58fc1de74b2d75ba3cf4592c63181bd206fb2125ca40a4a90",greens:"d3eecdc0e6baabdda594d3917bc77d60ba6c46ab5e329a512089430e7735036429",greys:"e2e2e2d4d4d4c4c4c4b1b1b19d9d9d8888887575756262624d4d4d3535351e1e1e",oranges:"fdd8b3fdc998fdb87bfda55efc9244f87f2cf06b18e4580bd14904b93d029f3303",purples:"e2e1efd4d4e8c4c5e0b4b3d6a3a0cc928ec3827cb97566ae684ea25c3696501f8c",reds:"fdc9b4fcb49afc9e80fc8767fa7051f6573fec3f2fdc2a25c81b1db21218970b13",blueGreen:"d5efedc1e8e0a7ddd18bd2be70c6a958ba9144ad77319c5d2089460e7736036429",bluePurple:"ccddecbad0e4a8c2dd9ab0d4919cc98d85be8b6db28a55a6873c99822287730f71",greenBlue:"d3eecec5e8c3b1e1bb9bd8bb82cec269c2ca51b2cd3c9fc7288abd1675b10b60a1",orangeRed:"fddcaffdcf9bfdc18afdad77fb9562f67d53ee6545e24932d32d1ebf130da70403",purpleBlue:"dbdaebc8cee4b1c3de97b7d87bacd15b9fc93a90c01e7fb70b70ab056199045281",purpleBlueGreen:"dbd8eac8cee4b0c3de93b7d872acd1549fc83892bb1c88a3097f8702736b016353",purpleRed:"dcc9e2d3b3d7ce9eccd186c0da6bb2e14da0e23189d91e6fc61159ab07498f023a",redPurple:"fccfccfcbec0faa9b8f98faff571a5ec539ddb3695c41b8aa908808d0179700174",yellowGreen:"e4f4acd1eca0b9e2949ed68880c97c62bb6e47aa5e3297502083440e723b036034",yellowOrangeBrown:"feeaa1fedd84fecc63feb746fca031f68921eb7215db5e0bc54c05ab3d038f3204",yellowOrangeRed:"fee087fed16ffebd59fea849fd903efc7335f9522bee3423de1b20ca0b22af0225",blueOrange:"134b852f78b35da2cb9dcae1d2e5eff2f0ebfce0bafbbf74e8932fc5690d994a07",brownBlueGreen:"704108a0651ac79548e3c78af3e6c6eef1eac9e9e48ed1c74da79e187a72025147",purpleGreen:"5b1667834792a67fb6c9aed3e6d6e8eff0efd9efd5aedda971bb75368e490e5e29",purpleOrange:"4114696647968f83b7b9b4d6dadbebf3eeeafce0bafbbf74e8932fc5690d994a07",redBlue:"8c0d25bf363adf745ef4ae91fbdbc9f2efeed2e5ef9dcae15da2cb2f78b3134b85",redGrey:"8c0d25bf363adf745ef4ae91fcdccbfaf4f1e2e2e2c0c0c0969696646464343434",yellowGreenBlue:"eff9bddbf1b4bde5b594d5b969c5be45b4c22c9ec02182b82163aa23479c1c3185",redYellowBlue:"a50026d4322cf16e43fcac64fedd90faf8c1dcf1ecabd6e875abd04a74b4313695",redYellowGreen:"a50026d4322cf16e43fcac63fedd8df9f7aed7ee8ea4d86e64bc6122964f006837",pinkYellowGreen:"8e0152c0267edd72adf0b3d6faddedf5f3efe1f2cab6de8780bb474f9125276419",spectral:"9e0142d13c4bf0704afcac63fedd8dfbf8b0e0f3a1a9dda269bda94288b55e4fa2",viridis:"440154470e61481a6c482575472f7d443a834144873d4e8a39568c35608d31688e2d708e2a788e27818e23888e21918d1f988b1fa08822a8842ab07f35b77943bf7154c56866cc5d7ad1518fd744a5db36bcdf27d2e21be9e51afde725",magma:"0000040404130b0924150e3720114b2c11603b0f704a107957157e651a80721f817f24828c29819a2e80a8327db6377ac43c75d1426fde4968e95462f1605df76f5cfa7f5efc8f65fe9f6dfeaf78febf84fece91fddea0fcedaffcfdbf",inferno:"0000040403130c0826170c3b240c4f330a5f420a68500d6c5d126e6b176e781c6d86216b932667a12b62ae305cbb3755c73e4cd24644dd513ae65c30ed6925f3771af8850ffb9506fca50afcb519fac62df6d645f2e661f3f484fcffa4",plasma:"0d088723069033059742039d5002a25d01a66a00a87801a88405a7900da49c179ea72198b12a90ba3488c33d80cb4779d35171da5a69e16462e76e5bed7953f2834cf68f44fa9a3dfca636fdb32ffec029fcce25f9dc24f5ea27f0f921",cividis:"00205100235800265d002961012b65042e670831690d346b11366c16396d1c3c6e213f6e26426e2c456e31476e374a6e3c4d6e42506e47536d4c566d51586e555b6e5a5e6e5e616e62646f66676f6a6a706e6d717270717573727976737c79747f7c75827f758682768985778c8877908b78938e789691789a94789e9778a19b78a59e77a9a177aea575b2a874b6ab73bbaf71c0b26fc5b66dc9b96acebd68d3c065d8c462ddc85fe2cb5ce7cf58ebd355f0d652f3da4ff7de4cfae249fce647",rainbow:"6e40aa883eb1a43db3bf3cafd83fa4ee4395fe4b83ff576eff6659ff7847ff8c38f3a130e2b72fcfcc36bee044aff05b8ff4576ff65b52f6673af27828ea8d1ddfa319d0b81cbecb23abd82f96e03d82e14c6edb5a5dd0664dbf6e40aa",sinebow:"ff4040fc582af47218e78d0bd5a703bfbf00a7d5038de70b72f41858fc2a40ff402afc5818f4720be78d03d5a700bfbf03a7d50b8de71872f42a58fc4040ff582afc7218f48d0be7a703d5bf00bfd503a7e70b8df41872fc2a58ff4040",turbo:"23171b32204a3e2a71453493493eae4b49c54a53d7485ee44569ee4074f53c7ff8378af93295f72e9ff42ba9ef28b3e926bce125c5d925cdcf27d5c629dcbc2de3b232e9a738ee9d3ff39347f68950f9805afc7765fd6e70fe667cfd5e88fc5795fb51a1f84badf545b9f140c5ec3cd0e637dae034e4d931ecd12ef4c92bfac029ffb626ffad24ffa223ff9821ff8d1fff821dff771cfd6c1af76118f05616e84b14df4111d5380fcb2f0dc0260ab61f07ac1805a313029b0f00950c00910b00",browns:"eedbbdecca96e9b97ae4a865dc9856d18954c7784cc0673fb85536ad44339f3632",tealBlues:"bce4d89dd3d181c3cb65b3c245a2b9368fae347da0306a932c5985",teals:"bbdfdfa2d4d58ac9c975bcbb61b0af4da5a43799982b8b8c1e7f7f127273006667",warmGreys:"dcd4d0cec5c1c0b8b4b3aaa7a59c9998908c8b827f7e7673726866665c5a59504e",goldGreen:"f4d166d5ca60b6c35c98bb597cb25760a6564b9c533f8f4f33834a257740146c36",goldOrange:"f4d166f8be5cf8aa4cf5983bf3852aef701be2621fd65322c54923b142239e3a26",goldRed:"f4d166f6be59f9aa51fc964ef6834bee734ae56249db5247cf4244c43141b71d3e",lightGreyRed:"efe9e6e1dad7d5cbc8c8bdb9bbaea9cd967ddc7b43e15f19df4011dc000b",lightGreyTeal:"e4eaead6dcddc8ced2b7c2c7a6b4bc64b0bf22a6c32295c11f85be1876bc",lightMulti:"e0f1f2c4e9d0b0de9fd0e181f6e072f6c053f3993ef77440ef4a3c",lightOrange:"f2e7daf7d5baf9c499fab184fa9c73f68967ef7860e8645bde515bd43d5b",lightTealBlue:"e3e9e0c0dccf9aceca7abfc859afc0389fb9328dad2f7ca0276b95255988",darkBlue:"3232322d46681a5c930074af008cbf05a7ce25c0dd38daed50f3faffffff",darkGold:"3c3c3c584b37725e348c7631ae8b2bcfa424ecc31ef9de30fff184ffffff",darkGreen:"3a3a3a215748006f4d048942489e4276b340a6c63dd2d836ffeb2cffffaa",darkMulti:"3737371f5287197d8c29a86995ce3fffe800ffffff",darkRed:"3434347036339e3c38cc4037e75d1eec8620eeab29f0ce32ffeb2c"},Mjt={accent:Zgt,category10:Jgt,category20:"1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5",category20b:"393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6",category20c:"3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9",dark2:e0t,observable10:t0t,paired:n0t,pastel1:r0t,pastel2:i0t,set1:s0t,set2:o0t,set3:a0t,tableau10:"4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac",tableau20:"4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5"};function R$e(e){if(je(e))return e;const t=e.length/6|0,n=new Array(t);for(let r=0;r<t;)n[r]="#"+e.slice(r*6,++r*6);return n}function N$e(e,t){for(const n in e)ate(n,t(e[n]))}const Upe={};N$e(Mjt,R$e);N$e($jt,e=>gF(R$e(e)));function ate(e,t){return e=e&&e.toLowerCase(),arguments.length>1?(Upe[e]=t,this):Upe[e]}const QD="symbol",Ljt="discrete",Fjt="gradient",jjt=e=>je(e)?e.map(t=>String(t)):String(e),Bjt=(e,t)=>e[1]-t[1],Ujt=(e,t)=>t[1]-e[1];function ute(e,t,n){let r;return lr(t)&&(e.bins&&(t=Math.max(t,e.bins.length)),n!=null&&(t=Math.min(t,Math.floor(hR(e.domain())/n||1)+1))),gt(t)&&(r=t.step,t=t.interval),mt(t)&&(t=e.type===fb?GS(t):e.type==db?YS(t):Le("Only time and utc scales accept interval strings."),r&&(t=t.every(r))),t}function P$e(e,t,n){let r=e.range(),i=r[0],s=Qn(r),o=Bjt;if(i>s&&(r=s,s=i,i=r,o=Ujt),i=Math.floor(i),s=Math.ceil(s),t=t.map(a=>[a,e(a)]).filter(a=>i<=a[1]&&a[1]<=s).sort(o).map(a=>a[0]),n>0&&t.length>1){const a=[t[0],Qn(t)];for(;t.length>n&&t.length>=3;)t=t.filter((u,l)=>!(l%2));t.length<3&&(t=a)}return t}function lte(e,t){return e.bins?P$e(e,e.bins,t):e.ticks?e.ticks(t):e.domain()}function D$e(e,t,n,r,i,s){const o=t.type;let a=jjt;if(o===fb||i===fb)a=e.timeFormat(r);else if(o===db||i===db)a=e.utcFormat(r);else if(S$e(o)){const u=e.formatFloat(r);if(s||t.bins)a=u;else{const l=O$e(t,n,!1);a=c=>l(c)?u(c):""}}else if(t.tickFormat){const u=t.domain();a=e.formatSpan(u[0],u[u.length-1],n,r)}else r&&(a=e.format(r));return a}function O$e(e,t,n){const r=lte(e,t),i=e.base(),s=Math.log(i),o=Math.max(1,i*t/r.length),a=u=>{let l=u/Math.pow(i,Math.round(Math.log(u)/s));return l*i<i-.5&&(l*=i),l<=o};return n?r.filter(a):a}const EH={[Sx]:"quantiles",[pF]:"thresholds",[mF]:"domain"},$$e={[Sx]:"quantiles",[pF]:"domain"};function M$e(e,t){return e.bins?Hjt(e.bins):e.type===Bm?O$e(e,t,!0):EH[e.type]?Vjt(e[EH[e.type]]()):lte(e,t)}function zjt(e,t,n){const r=t[$$e[t.type]](),i=r.length;let s=i>1?r[1]-r[0]:r[0],o;for(o=1;o<i;++o)s=Math.min(s,r[o]-r[o-1]);return e.formatSpan(0,s,3*10,n)}function Vjt(e){const t=[-1/0].concat(e);return t.max=1/0,t}function Hjt(e){const t=e.slice(0,-1);return t.max=Qn(e),t}const qjt=e=>EH[e.type]||e.bins;function L$e(e,t,n,r,i,s,o){const a=$$e[t.type]&&s!==fb&&s!==db?zjt(e,t,i):D$e(e,t,n,i,s,o);return r===QD&&qjt(t)?Wjt(a):r===Ljt?Gjt(a):Yjt(a)}const Wjt=e=>(t,n,r)=>{const i=zpe(r[n+1],zpe(r.max,1/0)),s=Vpe(t,e),o=Vpe(i,e);return s&&o?s+" – "+o:o?"< "+o:"≥ "+s},zpe=(e,t)=>e??t,Gjt=e=>(t,n)=>n?e(t):null,Yjt=e=>t=>e(t),Vpe=(e,t)=>Number.isFinite(e)?t(e):null;function Kjt(e){const t=e.domain(),n=t.length-1;let r=+t[0],i=+Qn(t),s=i-r;if(e.type===mF){const o=n?s/n:.1;r-=o,i+=o,s=i-r}return o=>(o-r)/s}function Xjt(e,t,n,r){const i=r||t.type;return mt(n)&&Pjt(i)&&(n=n.replace(/%a/g,"%A").replace(/%b/g,"%B")),!n&&i===fb?e.timeFormat("%A, %d %B %Y, %X"):!n&&i===db?e.utcFormat("%A, %d %B %Y, %X UTC"):L$e(e,t,5,null,n,r,!0)}function F$e(e,t,n){n=n||{};const r=Math.max(3,n.maxlen||7),i=Xjt(e,t,n.format,n.formatType);if(wH(t.type)){const s=M$e(t).slice(1).map(i),o=s.length;return`${o} boundar${o===1?"y":"ies"}: ${s.join(", ")}`}else if(Tx(t.type)){const s=t.domain(),o=s.length,a=o>r?s.slice(0,r-2).map(i).join(", ")+", ending with "+s.slice(-1).map(i):s.map(i).join(", ");return`${o} value${o===1?"":"s"}: ${a}`}else{const s=t.domain();return`values from ${i(s[0])} to ${i(Qn(s))}`}}let j$e=0;function Qjt(){j$e=0}const gM="p_";function cte(e){return e&&e.gradient}function B$e(e,t,n){const r=e.gradient;let i=e.id,s=r==="radial"?gM:"";return i||(i=e.id="gradient_"+j$e++,r==="radial"?(e.x1=Cd(e.x1,.5),e.y1=Cd(e.y1,.5),e.r1=Cd(e.r1,0),e.x2=Cd(e.x2,.5),e.y2=Cd(e.y2,.5),e.r2=Cd(e.r2,.5),s=gM):(e.x1=Cd(e.x1,0),e.y1=Cd(e.y1,0),e.x2=Cd(e.x2,1),e.y2=Cd(e.y2,0))),t[i]=e,"url("+(n||"")+"#"+s+i+")"}function Cd(e,t){return e??t}function U$e(e,t){var n=[],r;return r={gradient:"linear",x1:e?e[0]:0,y1:e?e[1]:0,x2:t?t[0]:1,y2:t?t[1]:0,stops:n,stop:function(i,s){return n.push({offset:i,color:s}),r}}}const Hpe={basis:{curve:I2e},"basis-closed":{curve:_0t},"basis-open":{curve:w0t},bundle:{curve:E0t,tension:"beta",value:.85},cardinal:{curve:x0t,tension:"tension",value:0},"cardinal-open":{curve:T0t,tension:"tension",value:0},"cardinal-closed":{curve:S0t,tension:"tension",value:0},"catmull-rom":{curve:C0t,tension:"alpha",value:.5},"catmull-rom-closed":{curve:A0t,tension:"alpha",value:.5},"catmull-rom-open":{curve:I0t,tension:"alpha",value:.5},linear:{curve:QK},"linear-closed":{curve:k0t},monotone:{horizontal:N0t,vertical:R0t},natural:{curve:P0t},step:{curve:D0t},"step-after":{curve:$0t},"step-before":{curve:O0t}};function fte(e,t,n){var r=jt(Hpe,e)&&Hpe[e],i=null;return r&&(i=r.curve||r[t||"vertical"],r.tension&&n!=null&&(i=i[r.tension](n))),i}const Jjt={m:2,l:2,h:1,v:1,z:0,c:6,s:4,q:4,t:2,a:7},Zjt=/[mlhvzcsqta]([^mlhvzcsqta]+|$)/gi,e8t=/^[+-]?(([0-9]*\.[0-9]+)|([0-9]+\.)|([0-9]+))([eE][+-]?[0-9]+)?/,t8t=/^((\s+,?\s*)|(,\s*))/,n8t=/^[01]/;function Cx(e){const t=[];return(e.match(Zjt)||[]).forEach(r=>{let i=r[0];const s=i.toLowerCase(),o=Jjt[s],a=r8t(s,o,r.slice(1).trim()),u=a.length;if(u<o||u&&u%o!==0)throw Error("Invalid SVG path, incorrect parameter count");if(t.push([i,...a.slice(0,o)]),u!==o){s==="m"&&(i=i==="M"?"L":"l");for(let l=o;l<u;l+=o)t.push([i,...a.slice(l,l+o)])}}),t}function r8t(e,t,n){const r=[];for(let i=0;t&&i<n.length;)for(let s=0;s<t;++s){const o=e==="a"&&(s===3||s===4)?n8t:e8t,a=n.slice(i).match(o);if(a===null)throw Error("Invalid SVG path, incorrect parameter type");i+=a[0].length,r.push(+a[0]);const u=n.slice(i).match(t8t);u!==null&&(i+=u[0].length)}return r}const hy=Math.PI/180,i8t=1e-14,Xv=Math.PI/2,Zd=Math.PI*2,V_=Math.sqrt(3)/2;var J9={},Z9={},z$e=[].join;function s8t(e,t,n,r,i,s,o,a,u){const l=z$e.call(arguments);if(J9[l])return J9[l];const c=o*hy,f=Math.sin(c),d=Math.cos(c);n=Math.abs(n),r=Math.abs(r);const h=d*(a-e)*.5+f*(u-t)*.5,p=d*(u-t)*.5-f*(a-e)*.5;let m=h*h/(n*n)+p*p/(r*r);m>1&&(m=Math.sqrt(m),n*=m,r*=m);const g=d/n,y=f/n,v=-f/r,_=d/r,w=g*a+y*u,E=v*a+_*u,S=g*e+y*t,T=v*e+_*t;let A=1/((S-w)*(S-w)+(T-E)*(T-E))-.25;A<0&&(A=0);let k=Math.sqrt(A);s==i&&(k=-k);const N=.5*(w+S)-k*(T-E),O=.5*(E+T)+k*(S-w),D=Math.atan2(E-O,w-N);let F=Math.atan2(T-O,S-N)-D;F<0&&s===1?F+=Zd:F>0&&s===0&&(F-=Zd);const M=Math.ceil(Math.abs(F/(Xv+.001))),B=[];for(let U=0;U<M;++U){const H=D+U*F/M,P=D+(U+1)*F/M;B[U]=[N,O,H,P,n,r,f,d]}return J9[l]=B}function o8t(e){const t=z$e.call(e);if(Z9[t])return Z9[t];var n=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],u=e[6],l=e[7];const c=l*o,f=-u*a,d=u*o,h=l*a,p=Math.cos(i),m=Math.sin(i),g=Math.cos(s),y=Math.sin(s),v=.5*(s-i),_=Math.sin(v*.5),w=8/3*_*_/Math.sin(v),E=n+p-w*m,S=r+m+w*p,T=n+g,C=r+y,A=T+w*y,k=C-w*g;return Z9[t]=[c*E+f*S,d*E+h*S,c*A+f*k,d*A+h*k,c*T+f*C,d*T+h*C]}const uc=["l",0,0,0,0,0,0,0];function a8t(e,t,n){const r=uc[0]=e[0];if(r==="a"||r==="A")uc[1]=t*e[1],uc[2]=n*e[2],uc[3]=e[3],uc[4]=e[4],uc[5]=e[5],uc[6]=t*e[6],uc[7]=n*e[7];else if(r==="h"||r==="H")uc[1]=t*e[1];else if(r==="v"||r==="V")uc[1]=n*e[1];else for(var i=1,s=e.length;i<s;++i)uc[i]=(i%2==1?t:n)*e[i];return uc}function $I(e,t,n,r,i,s){var o,a=null,u=0,l=0,c=0,f=0,d,h,p,m,g=0,y=0;n==null&&(n=0),r==null&&(r=0),i==null&&(i=1),s==null&&(s=i),e.beginPath&&e.beginPath();for(var v=0,_=t.length;v<_;++v){switch(o=t[v],(i!==1||s!==1)&&(o=a8t(o,i,s)),o[0]){case"l":u+=o[1],l+=o[2],e.lineTo(u+n,l+r);break;case"L":u=o[1],l=o[2],e.lineTo(u+n,l+r);break;case"h":u+=o[1],e.lineTo(u+n,l+r);break;case"H":u=o[1],e.lineTo(u+n,l+r);break;case"v":l+=o[1],e.lineTo(u+n,l+r);break;case"V":l=o[1],e.lineTo(u+n,l+r);break;case"m":u+=o[1],l+=o[2],g=u,y=l,e.moveTo(u+n,l+r);break;case"M":u=o[1],l=o[2],g=u,y=l,e.moveTo(u+n,l+r);break;case"c":d=u+o[5],h=l+o[6],c=u+o[3],f=l+o[4],e.bezierCurveTo(u+o[1]+n,l+o[2]+r,c+n,f+r,d+n,h+r),u=d,l=h;break;case"C":u=o[5],l=o[6],c=o[3],f=o[4],e.bezierCurveTo(o[1]+n,o[2]+r,c+n,f+r,u+n,l+r);break;case"s":d=u+o[3],h=l+o[4],c=2*u-c,f=2*l-f,e.bezierCurveTo(c+n,f+r,u+o[1]+n,l+o[2]+r,d+n,h+r),c=u+o[1],f=l+o[2],u=d,l=h;break;case"S":d=o[3],h=o[4],c=2*u-c,f=2*l-f,e.bezierCurveTo(c+n,f+r,o[1]+n,o[2]+r,d+n,h+r),u=d,l=h,c=o[1],f=o[2];break;case"q":d=u+o[3],h=l+o[4],c=u+o[1],f=l+o[2],e.quadraticCurveTo(c+n,f+r,d+n,h+r),u=d,l=h;break;case"Q":d=o[3],h=o[4],e.quadraticCurveTo(o[1]+n,o[2]+r,d+n,h+r),u=d,l=h,c=o[1],f=o[2];break;case"t":d=u+o[1],h=l+o[2],a[0].match(/[QqTt]/)===null?(c=u,f=l):a[0]==="t"?(c=2*u-p,f=2*l-m):a[0]==="q"&&(c=2*u-c,f=2*l-f),p=c,m=f,e.quadraticCurveTo(c+n,f+r,d+n,h+r),u=d,l=h,c=u+o[1],f=l+o[2];break;case"T":d=o[1],h=o[2],c=2*u-c,f=2*l-f,e.quadraticCurveTo(c+n,f+r,d+n,h+r),u=d,l=h;break;case"a":qpe(e,u+n,l+r,[o[1],o[2],o[3],o[4],o[5],o[6]+u+n,o[7]+l+r]),u+=o[6],l+=o[7];break;case"A":qpe(e,u+n,l+r,[o[1],o[2],o[3],o[4],o[5],o[6]+n,o[7]+r]),u=o[6],l=o[7];break;case"z":case"Z":u=g,l=y,e.closePath();break}a=o}}function qpe(e,t,n,r){const i=s8t(r[5],r[6],r[0],r[1],r[3],r[4],r[2],t,n);for(let s=0;s<i.length;++s){const o=o8t(i[s]);e.bezierCurveTo(o[0],o[1],o[2],o[3],o[4],o[5])}}const Wpe=.5773502691896257,Gpe={circle:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(n,0),e.arc(0,0,n,0,Zd)}},cross:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/2.5;e.moveTo(-n,-r),e.lineTo(-n,r),e.lineTo(-r,r),e.lineTo(-r,n),e.lineTo(r,n),e.lineTo(r,r),e.lineTo(n,r),e.lineTo(n,-r),e.lineTo(r,-r),e.lineTo(r,-n),e.lineTo(-r,-n),e.lineTo(-r,-r),e.closePath()}},diamond:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(0,-n),e.lineTo(n,0),e.lineTo(0,n),e.closePath()}},square:{draw:function(e,t){var n=Math.sqrt(t),r=-n/2;e.rect(r,r,n,n)}},arrow:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/7,i=n/2.5,s=n/8;e.moveTo(-r,n),e.lineTo(r,n),e.lineTo(r,-s),e.lineTo(i,-s),e.lineTo(0,-n),e.lineTo(-i,-s),e.lineTo(-r,-s),e.closePath()}},wedge:{draw:function(e,t){var n=Math.sqrt(t)/2,r=V_*n,i=r-n*Wpe,s=n/4;e.moveTo(0,-r-i),e.lineTo(-s,r-i),e.lineTo(s,r-i),e.closePath()}},triangle:{draw:function(e,t){var n=Math.sqrt(t)/2,r=V_*n,i=r-n*Wpe;e.moveTo(0,-r-i),e.lineTo(-n,r-i),e.lineTo(n,r-i),e.closePath()}},"triangle-up":{draw:function(e,t){var n=Math.sqrt(t)/2,r=V_*n;e.moveTo(0,-r),e.lineTo(-n,r),e.lineTo(n,r),e.closePath()}},"triangle-down":{draw:function(e,t){var n=Math.sqrt(t)/2,r=V_*n;e.moveTo(0,r),e.lineTo(-n,-r),e.lineTo(n,-r),e.closePath()}},"triangle-right":{draw:function(e,t){var n=Math.sqrt(t)/2,r=V_*n;e.moveTo(r,0),e.lineTo(-r,-n),e.lineTo(-r,n),e.closePath()}},"triangle-left":{draw:function(e,t){var n=Math.sqrt(t)/2,r=V_*n;e.moveTo(-r,0),e.lineTo(r,-n),e.lineTo(r,n),e.closePath()}},stroke:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(n,0)}}};function V$e(e){return jt(Gpe,e)?Gpe[e]:u8t(e)}var eB={};function u8t(e){if(!jt(eB,e)){const t=Cx(e);eB[e]={draw:function(n,r){$I(n,t,0,0,Math.sqrt(r)/2)}}}return eB[e]}const xg=.448084975506;function l8t(e){return e.x}function c8t(e){return e.y}function f8t(e){return e.width}function d8t(e){return e.height}function Ep(e){return typeof e=="function"?e:()=>+e}function IP(e,t,n){return Math.max(t,Math.min(e,n))}function H$e(){var e=l8t,t=c8t,n=f8t,r=d8t,i=Ep(0),s=i,o=i,a=i,u=null;function l(c,f,d){var h,p=f??+e.call(this,c),m=d??+t.call(this,c),g=+n.call(this,c),y=+r.call(this,c),v=Math.min(g,y)/2,_=IP(+i.call(this,c),0,v),w=IP(+s.call(this,c),0,v),E=IP(+o.call(this,c),0,v),S=IP(+a.call(this,c),0,v);if(u||(u=h=k6()),_<=0&&w<=0&&E<=0&&S<=0)u.rect(p,m,g,y);else{var T=p+g,C=m+y;u.moveTo(p+_,m),u.lineTo(T-w,m),u.bezierCurveTo(T-xg*w,m,T,m+xg*w,T,m+w),u.lineTo(T,C-S),u.bezierCurveTo(T,C-xg*S,T-xg*S,C,T-S,C),u.lineTo(p+E,C),u.bezierCurveTo(p+xg*E,C,p,C-xg*E,p,C-E),u.lineTo(p,m+_),u.bezierCurveTo(p,m+xg*_,p+xg*_,m,p+_,m),u.closePath()}if(h)return u=null,h+""||null}return l.x=function(c){return arguments.length?(e=Ep(c),l):e},l.y=function(c){return arguments.length?(t=Ep(c),l):t},l.width=function(c){return arguments.length?(n=Ep(c),l):n},l.height=function(c){return arguments.length?(r=Ep(c),l):r},l.cornerRadius=function(c,f,d,h){return arguments.length?(i=Ep(c),s=f!=null?Ep(f):i,a=d!=null?Ep(d):i,o=h!=null?Ep(h):s,l):i},l.context=function(c){return arguments.length?(u=c??null,l):u},l}function q$e(){var e,t,n,r,i=null,s,o,a,u;function l(f,d,h){const p=h/2;if(s){var m=a-d,g=f-o;if(m||g){var y=Math.hypot(m,g),v=(m/=y)*u,_=(g/=y)*u,w=Math.atan2(g,m);i.moveTo(o-v,a-_),i.lineTo(f-m*p,d-g*p),i.arc(f,d,p,w-Math.PI,w),i.lineTo(o+v,a+_),i.arc(o,a,u,w,w+Math.PI)}else i.arc(f,d,p,0,Zd);i.closePath()}else s=1;o=f,a=d,u=p}function c(f){var d,h=f.length,p,m=!1,g;for(i==null&&(i=g=k6()),d=0;d<=h;++d)!(d<h&&r(p=f[d],d,f))===m&&(m=!m)&&(s=0),m&&l(+e(p,d,f),+t(p,d,f),+n(p,d,f));if(g)return i=null,g+""||null}return c.x=function(f){return arguments.length?(e=f,c):e},c.y=function(f){return arguments.length?(t=f,c):t},c.size=function(f){return arguments.length?(n=f,c):n},c.defined=function(f){return arguments.length?(r=f,c):r},c.context=function(f){return arguments.length?(f==null?i=null:i=f,c):i},c}function wR(e,t){return e??t}const ER=e=>e.x||0,xR=e=>e.y||0,h8t=e=>e.width||0,p8t=e=>e.height||0,m8t=e=>(e.x||0)+(e.width||0),g8t=e=>(e.y||0)+(e.height||0),y8t=e=>e.startAngle||0,v8t=e=>e.endAngle||0,b8t=e=>e.padAngle||0,_8t=e=>e.innerRadius||0,w8t=e=>e.outerRadius||0,E8t=e=>e.cornerRadius||0,x8t=e=>wR(e.cornerRadiusTopLeft,e.cornerRadius)||0,S8t=e=>wR(e.cornerRadiusTopRight,e.cornerRadius)||0,T8t=e=>wR(e.cornerRadiusBottomRight,e.cornerRadius)||0,C8t=e=>wR(e.cornerRadiusBottomLeft,e.cornerRadius)||0,A8t=e=>wR(e.size,64),I8t=e=>e.size||1,yF=e=>e.defined!==!1,k8t=e=>V$e(e.shape||"circle"),R8t=Q3().startAngle(y8t).endAngle(v8t).padAngle(b8t).innerRadius(_8t).outerRadius(w8t).cornerRadius(E8t),N8t=C2e().x(ER).y1(xR).y0(g8t).defined(yF),P8t=C2e().y(xR).x1(ER).x0(m8t).defined(yF),D8t=JK().x(ER).y(xR).defined(yF),O8t=H$e().x(ER).y(xR).width(h8t).height(p8t).cornerRadius(x8t,S8t,T8t,C8t),$8t=b0t().type(k8t).size(A8t),M8t=q$e().x(ER).y(xR).defined(yF).size(I8t);function dte(e){return e.cornerRadius||e.cornerRadiusTopLeft||e.cornerRadiusTopRight||e.cornerRadiusBottomRight||e.cornerRadiusBottomLeft}function L8t(e,t){return R8t.context(e)(t)}function F8t(e,t){const n=t[0],r=n.interpolate||"linear";return(n.orient==="horizontal"?P8t:N8t).curve(fte(r,n.orient,n.tension)).context(e)(t)}function j8t(e,t){const n=t[0],r=n.interpolate||"linear";return D8t.curve(fte(r,n.orient,n.tension)).context(e)(t)}function QS(e,t,n,r){return O8t.context(e)(t,n,r)}function B8t(e,t){return(t.mark.shape||t.shape).context(e)(t)}function U8t(e,t){return $8t.context(e)(t)}function z8t(e,t){return M8t.context(e)(t)}var W$e=1;function G$e(){W$e=1}function hte(e,t,n){var r=t.clip,i=e._defs,s=t.clip_id||(t.clip_id="clip"+W$e++),o=i.clipping[s]||(i.clipping[s]={id:s});return _n(r)?o.path=r(null):dte(n)?o.path=QS(null,n,0,0):(o.width=n.width||0,o.height=n.height||0),"url(#"+s+")"}function Ts(e){this.clear(),e&&this.union(e)}Ts.prototype={clone(){return new Ts(this)},clear(){return this.x1=+Number.MAX_VALUE,this.y1=+Number.MAX_VALUE,this.x2=-Number.MAX_VALUE,this.y2=-Number.MAX_VALUE,this},empty(){return this.x1===+Number.MAX_VALUE&&this.y1===+Number.MAX_VALUE&&this.x2===-Number.MAX_VALUE&&this.y2===-Number.MAX_VALUE},equals(e){return this.x1===e.x1&&this.y1===e.y1&&this.x2===e.x2&&this.y2===e.y2},set(e,t,n,r){return n<e?(this.x2=e,this.x1=n):(this.x1=e,this.x2=n),r<t?(this.y2=t,this.y1=r):(this.y1=t,this.y2=r),this},add(e,t){return e<this.x1&&(this.x1=e),t<this.y1&&(this.y1=t),e>this.x2&&(this.x2=e),t>this.y2&&(this.y2=t),this},expand(e){return this.x1-=e,this.y1-=e,this.x2+=e,this.y2+=e,this},round(){return this.x1=Math.floor(this.x1),this.y1=Math.floor(this.y1),this.x2=Math.ceil(this.x2),this.y2=Math.ceil(this.y2),this},scale(e){return this.x1*=e,this.y1*=e,this.x2*=e,this.y2*=e,this},translate(e,t){return this.x1+=e,this.x2+=e,this.y1+=t,this.y2+=t,this},rotate(e,t,n){const r=this.rotatedPoints(e,t,n);return this.clear().add(r[0],r[1]).add(r[2],r[3]).add(r[4],r[5]).add(r[6],r[7])},rotatedPoints(e,t,n){var{x1:r,y1:i,x2:s,y2:o}=this,a=Math.cos(e),u=Math.sin(e),l=t-t*a+n*u,c=n-t*u-n*a;return[a*r-u*i+l,u*r+a*i+c,a*r-u*o+l,u*r+a*o+c,a*s-u*i+l,u*s+a*i+c,a*s-u*o+l,u*s+a*o+c]},union(e){return e.x1<this.x1&&(this.x1=e.x1),e.y1<this.y1&&(this.y1=e.y1),e.x2>this.x2&&(this.x2=e.x2),e.y2>this.y2&&(this.y2=e.y2),this},intersect(e){return e.x1>this.x1&&(this.x1=e.x1),e.y1>this.y1&&(this.y1=e.y1),e.x2<this.x2&&(this.x2=e.x2),e.y2<this.y2&&(this.y2=e.y2),this},encloses(e){return e&&this.x1<=e.x1&&this.x2>=e.x2&&this.y1<=e.y1&&this.y2>=e.y2},alignsWith(e){return e&&(this.x1==e.x1||this.x2==e.x2||this.y1==e.y1||this.y2==e.y2)},intersects(e){return e&&!(this.x2<e.x1||this.x1>e.x2||this.y2<e.y1||this.y1>e.y2)},contains(e,t){return!(e<this.x1||e>this.x2||t<this.y1||t>this.y2)},width(){return this.x2-this.x1},height(){return this.y2-this.y1}};function vF(e){this.mark=e,this.bounds=this.bounds||new Ts}function bF(e){vF.call(this,e),this.items=this.items||[]}lt(bF,vF);class Y$e{constructor(t){this._pending=0,this._loader=t||tF()}pending(){return this._pending}sanitizeURL(t){const n=this;return Ype(n),n._loader.sanitize(t,{context:"href"}).then(r=>(JT(n),r)).catch(()=>(JT(n),null))}loadImage(t){const n=this,r=Ejt();return Ype(n),n._loader.sanitize(t,{context:"image"}).then(i=>{const s=i.href;if(!s||!r)throw{url:s};const o=new r,a=jt(i,"crossOrigin")?i.crossOrigin:"anonymous";return a!=null&&(o.crossOrigin=a),o.onload=()=>JT(n),o.onerror=()=>JT(n),o.src=s,o}).catch(i=>(JT(n),{complete:!1,width:0,height:0,src:i&&i.url||""}))}ready(){const t=this;return new Promise(n=>{function r(i){t.pending()?setTimeout(()=>{r(!0)},10):n(i)}r(!1)})}}function Ype(e){e._pending+=1}function JT(e){e._pending-=1}function ag(e,t,n){if(t.stroke&&t.opacity!==0&&t.strokeOpacity!==0){const r=t.strokeWidth!=null?+t.strokeWidth:1;e.expand(r+(n?V8t(t,r):0))}return e}function V8t(e,t){return e.strokeJoin&&e.strokeJoin!=="miter"?0:t}const H8t=Zd-1e-8;let _F,JD,ZD,b1,xH,eO,SH,TH;const i0=(e,t)=>_F.add(e,t),tO=(e,t)=>i0(JD=e,ZD=t),Kpe=e=>i0(e,_F.y1),Xpe=e=>i0(_F.x1,e),Qv=(e,t)=>xH*e+SH*t,Jv=(e,t)=>eO*e+TH*t,tB=(e,t)=>i0(Qv(e,t),Jv(e,t)),nB=(e,t)=>tO(Qv(e,t),Jv(e,t));function SR(e,t){return _F=e,t?(b1=t*hy,xH=TH=Math.cos(b1),eO=Math.sin(b1),SH=-eO):(xH=TH=1,b1=eO=SH=0),q8t}const q8t={beginPath(){},closePath(){},moveTo:nB,lineTo:nB,rect(e,t,n,r){b1?(tB(e+n,t),tB(e+n,t+r),tB(e,t+r),nB(e,t)):(i0(e+n,t+r),tO(e,t))},quadraticCurveTo(e,t,n,r){const i=Qv(e,t),s=Jv(e,t),o=Qv(n,r),a=Jv(n,r);Qpe(JD,i,o,Kpe),Qpe(ZD,s,a,Xpe),tO(o,a)},bezierCurveTo(e,t,n,r,i,s){const o=Qv(e,t),a=Jv(e,t),u=Qv(n,r),l=Jv(n,r),c=Qv(i,s),f=Jv(i,s);Jpe(JD,o,u,c,Kpe),Jpe(ZD,a,l,f,Xpe),tO(c,f)},arc(e,t,n,r,i,s){if(r+=b1,i+=b1,JD=n*Math.cos(i)+e,ZD=n*Math.sin(i)+t,Math.abs(i-r)>H8t)i0(e-n,t-n),i0(e+n,t+n);else{const o=l=>i0(n*Math.cos(l)+e,n*Math.sin(l)+t);let a,u;if(o(r),o(i),i!==r)if(r=r%Zd,r<0&&(r+=Zd),i=i%Zd,i<0&&(i+=Zd),i<r&&(s=!s,a=r,r=i,i=a),s)for(i-=Zd,a=r-r%Xv,u=0;u<4&&a>i;++u,a-=Xv)o(a);else for(a=r-r%Xv+Xv,u=0;u<4&&a<i;++u,a=a+Xv)o(a)}}};function Qpe(e,t,n,r){const i=(e-t)/(e+n-2*t);0<i&&i<1&&r(e+(t-e)*i)}function Jpe(e,t,n,r,i){const s=r-e+3*t-3*n,o=e+n-2*t,a=e-t;let u=0,l=0,c;Math.abs(s)>i8t?(c=o*o+a*s,c>=0&&(c=Math.sqrt(c),u=(-o+c)/s,l=(-o-c)/s)):u=.5*a/o,0<u&&u<1&&i(Zpe(u,e,t,n,r)),0<l&&l<1&&i(Zpe(l,e,t,n,r))}function Zpe(e,t,n,r,i){const s=1-e,o=s*s,a=e*e;return o*s*t+3*o*e*n+3*s*a*r+a*e*i}var $0=($0=O0(1,1))?$0.getContext("2d"):null;const CH=new Ts;function pte(e){return function(t,n){if(!$0)return!0;e($0,t),CH.clear().union(t.bounds).intersect(n).round();const{x1:r,y1:i,x2:s,y2:o}=CH;for(let a=i;a<=o;++a)for(let u=r;u<=s;++u)if($0.isPointInPath(u,a))return!0;return!1}}function mte(e,t){return t.contains(e.x||0,e.y||0)}function K$e(e,t){const n=e.x||0,r=e.y||0,i=e.width||0,s=e.height||0;return t.intersects(CH.set(n,r,n+i,r+s))}function X$e(e,t){const n=e.x||0,r=e.y||0,i=e.x2!=null?e.x2:n,s=e.y2!=null?e.y2:r;return Lw(t,n,r,i,s)}function Lw(e,t,n,r,i){const{x1:s,y1:o,x2:a,y2:u}=e,l=r-t,c=i-n;let f=0,d=1,h,p,m,g;for(g=0;g<4;++g){if(g===0&&(h=-l,p=-(s-t)),g===1&&(h=l,p=a-t),g===2&&(h=-c,p=-(o-n)),g===3&&(h=c,p=u-n),Math.abs(h)<1e-10&&p<0)return!1;if(m=p/h,h<0){if(m>d)return!1;m>f&&(f=m)}else if(h>0){if(m<f)return!1;m<d&&(d=m)}}return!0}function Ax(e,t){e.globalCompositeOperation=t.blend||"source-over"}function cf(e,t){return e??t}function eme(e,t){const n=t.length;for(let r=0;r<n;++r)e.addColorStop(t[r].offset,t[r].color);return e}function W8t(e,t,n){const r=n.width(),i=n.height();let s;if(t.gradient==="radial")s=e.createRadialGradient(n.x1+cf(t.x1,.5)*r,n.y1+cf(t.y1,.5)*i,Math.max(r,i)*cf(t.r1,0),n.x1+cf(t.x2,.5)*r,n.y1+cf(t.y2,.5)*i,Math.max(r,i)*cf(t.r2,.5));else{const o=cf(t.x1,0),a=cf(t.y1,0),u=cf(t.x2,1),l=cf(t.y2,0);if(o===u||a===l||r===i)s=e.createLinearGradient(n.x1+o*r,n.y1+a*i,n.x1+u*r,n.y1+l*i);else{const c=O0(Math.ceil(r),Math.ceil(i)),f=c.getContext("2d");return f.scale(r,i),f.fillStyle=eme(f.createLinearGradient(o,a,u,l),t.stops),f.fillRect(0,0,r,i),e.createPattern(c,"no-repeat")}}return eme(s,t.stops)}function Q$e(e,t,n){return cte(n)?W8t(e,n,t.bounds):n}function yM(e,t,n){return n*=t.fillOpacity==null?1:t.fillOpacity,n>0?(e.globalAlpha=n,e.fillStyle=Q$e(e,t,t.fill),!0):!1}var G8t=[];function Ix(e,t,n){var r=(r=t.strokeWidth)!=null?r:1;return r<=0?!1:(n*=t.strokeOpacity==null?1:t.strokeOpacity,n>0?(e.globalAlpha=n,e.strokeStyle=Q$e(e,t,t.stroke),e.lineWidth=r,e.lineCap=t.strokeCap||"butt",e.lineJoin=t.strokeJoin||"miter",e.miterLimit=t.strokeMiterLimit||10,e.setLineDash&&(e.setLineDash(t.strokeDash||G8t),e.lineDashOffset=t.strokeDashOffset||0),!0):!1)}function Y8t(e,t){return e.zindex-t.zindex||e.index-t.index}function gte(e){if(!e.zdirty)return e.zitems;var t=e.items,n=[],r,i,s;for(i=0,s=t.length;i<s;++i)r=t[i],r.index=i,r.zindex&&n.push(r);return e.zdirty=!1,e.zitems=n.sort(Y8t)}function rd(e,t){var n=e.items,r,i;if(!n||!n.length)return;const s=gte(e);if(s&&s.length){for(r=0,i=n.length;r<i;++r)n[r].zindex||t(n[r]);n=s}for(r=0,i=n.length;r<i;++r)t(n[r])}function vM(e,t){var n=e.items,r,i;if(!n||!n.length)return null;const s=gte(e);for(s&&s.length&&(n=s),i=n.length;--i>=0;)if(r=t(n[i]))return r;if(n===s){for(n=e.items,i=n.length;--i>=0;)if(!n[i].zindex&&(r=t(n[i])))return r}return null}function yte(e){return function(t,n,r){rd(n,i=>{(!r||r.intersects(i.bounds))&&J$e(e,t,i,i)})}}function K8t(e){return function(t,n,r){n.items.length&&(!r||r.intersects(n.bounds))&&J$e(e,t,n.items[0],n.items)}}function J$e(e,t,n,r){var i=n.opacity==null?1:n.opacity;i!==0&&(e(t,r)||(Ax(t,n),n.fill&&yM(t,n,i)&&t.fill(),n.stroke&&Ix(t,n,i)&&t.stroke()))}function wF(e){return e=e||jc,function(t,n,r,i,s,o){return r*=t.pixelRatio,i*=t.pixelRatio,vM(n,a=>{const u=a.bounds;if(!(u&&!u.contains(s,o)||!u)&&e(t,a,r,i,s,o))return a})}}function TR(e,t){return function(n,r,i,s){var o=Array.isArray(r)?r[0]:r,a=t??o.fill,u=o.stroke&&n.isPointInStroke,l,c;return u&&(l=o.strokeWidth,c=o.strokeCap,n.lineWidth=l??1,n.lineCap=c??"butt"),e(n,r)?!1:a&&n.isPointInPath(i,s)||u&&n.isPointInStroke(i,s)}}function vte(e){return wF(TR(e))}function N1(e,t){return"translate("+e+","+t+")"}function bte(e){return"rotate("+e+")"}function X8t(e,t){return"scale("+e+","+t+")"}function Z$e(e){return N1(e.x||0,e.y||0)}function Q8t(e){return N1(e.x||0,e.y||0)+(e.angle?" "+bte(e.angle):"")}function J8t(e){return N1(e.x||0,e.y||0)+(e.angle?" "+bte(e.angle):"")+(e.scaleX||e.scaleY?" "+X8t(e.scaleX||1,e.scaleY||1):"")}function _te(e,t,n){function r(o,a){o("transform",Q8t(a)),o("d",t(null,a))}function i(o,a){return t(SR(o,a.angle),a),ag(o,a).translate(a.x||0,a.y||0)}function s(o,a){var u=a.x||0,l=a.y||0,c=a.angle||0;o.translate(u,l),c&&o.rotate(c*=hy),o.beginPath(),t(o,a),c&&o.rotate(-c),o.translate(-u,-l)}return{type:e,tag:"path",nested:!1,attr:r,bound:i,draw:yte(s),pick:vte(s),isect:n||pte(s)}}var Z8t=_te("arc",L8t);function e9t(e,t){for(var n=e[0].orient==="horizontal"?t[1]:t[0],r=e[0].orient==="horizontal"?"y":"x",i=e.length,s=1/0,o,a;--i>=0;)e[i].defined!==!1&&(a=Math.abs(e[i][r]-n),a<s&&(s=a,o=e[i]));return o}function t9t(e,t){for(var n=Math.pow(e[0].strokeWidth||1,2),r=e.length,i,s,o;--r>=0;)if(e[r].defined!==!1&&(i=e[r].x-t[0],s=e[r].y-t[1],o=i*i+s*s,o<n))return e[r];return null}function n9t(e,t){for(var n=e.length,r,i,s;--n>=0;)if(e[n].defined!==!1&&(r=e[n].x-t[0],i=e[n].y-t[1],s=r*r+i*i,r=e[n].size||1,s<r*r))return e[n];return null}function wte(e,t,n){function r(u,l){var c=l.mark.items;c.length&&u("d",t(null,c))}function i(u,l){var c=l.items;return c.length===0?u:(t(SR(u),c),ag(u,c[0]))}function s(u,l){u.beginPath(),t(u,l)}const o=TR(s);function a(u,l,c,f,d,h){var p=l.items,m=l.bounds;return!p||!p.length||m&&!m.contains(d,h)?null:(c*=u.pixelRatio,f*=u.pixelRatio,o(u,p,c,f)?p[0]:null)}return{type:e,tag:"path",nested:!0,attr:r,bound:i,draw:K8t(s),pick:a,isect:mte,tip:n}}var r9t=wte("area",F8t,e9t);function i9t(e,t){var n=t.clip;e.save(),_n(n)?(e.beginPath(),n(e),e.clip()):eMe(e,t.group)}function eMe(e,t){e.beginPath(),dte(t)?QS(e,t,0,0):e.rect(0,0,t.width||0,t.height||0),e.clip()}function tMe(e){const t=cf(e.strokeWidth,1);return e.strokeOffset!=null?e.strokeOffset:e.stroke&&t>.5&&t<1.5?.5-Math.abs(t-1):0}function s9t(e,t){e("transform",Z$e(t))}function nMe(e,t){const n=tMe(t);e("d",QS(null,t,n,n))}function o9t(e,t){e("class","background"),e("aria-hidden",!0),nMe(e,t)}function a9t(e,t){e("class","foreground"),e("aria-hidden",!0),t.strokeForeground?nMe(e,t):e("d","")}function u9t(e,t,n){const r=t.clip?hte(n,t,t):null;e("clip-path",r)}function l9t(e,t){if(!t.clip&&t.items){const n=t.items,r=n.length;for(let i=0;i<r;++i)e.union(n[i].bounds)}return(t.clip||t.width||t.height)&&!t.noBound&&e.add(0,0).add(t.width||0,t.height||0),ag(e,t),e.translate(t.x||0,t.y||0)}function MI(e,t,n,r){const i=tMe(t);e.beginPath(),QS(e,t,(n||0)+i,(r||0)+i)}const c9t=TR(MI),f9t=TR(MI,!1),d9t=TR(MI,!0);function h9t(e,t,n,r){rd(t,i=>{const s=i.x||0,o=i.y||0,a=i.strokeForeground,u=i.opacity==null?1:i.opacity;(i.stroke||i.fill)&&u&&(MI(e,i,s,o),Ax(e,i),i.fill&&yM(e,i,u)&&e.fill(),i.stroke&&!a&&Ix(e,i,u)&&e.stroke()),e.save(),e.translate(s,o),i.clip&&eMe(e,i),n&&n.translate(-s,-o),rd(i,l=>{(l.marktype==="group"||r==null||r.includes(l.marktype))&&this.draw(e,l,n,r)}),n&&n.translate(s,o),e.restore(),a&&i.stroke&&u&&(MI(e,i,s,o),Ax(e,i),Ix(e,i,u)&&e.stroke())})}function p9t(e,t,n,r,i,s){if(t.bounds&&!t.bounds.contains(i,s)||!t.items)return null;const o=n*e.pixelRatio,a=r*e.pixelRatio;return vM(t,u=>{let l,c,f;const d=u.bounds;if(d&&!d.contains(i,s))return;c=u.x||0,f=u.y||0;const h=c+(u.width||0),p=f+(u.height||0),m=u.clip;if(m&&(i<c||i>h||s<f||s>p))return;if(e.save(),e.translate(c,f),c=i-c,f=s-f,m&&dte(u)&&!d9t(e,u,o,a))return e.restore(),null;const g=u.strokeForeground,y=t.interactive!==!1;return y&&g&&u.stroke&&f9t(e,u,o,a)?(e.restore(),u):(l=vM(u,v=>m9t(v,c,f)?this.pick(v,n,r,c,f):null),!l&&y&&(u.fill||!g&&u.stroke)&&c9t(e,u,o,a)&&(l=u),e.restore(),l||null)})}function m9t(e,t,n){return(e.interactive!==!1||e.marktype==="group")&&e.bounds&&e.bounds.contains(t,n)}var g9t={type:"group",tag:"g",nested:!1,attr:s9t,bound:l9t,draw:h9t,pick:p9t,isect:K$e,content:u9t,background:o9t,foreground:a9t},LI={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1"};function Ete(e,t){var n=e.image;return(!n||e.url&&e.url!==n.url)&&(n={complete:!1,width:0,height:0},t.loadImage(e.url).then(r=>{e.image=r,e.image.url=e.url})),n}function xte(e,t){return e.width!=null?e.width:!t||!t.width?0:e.aspect!==!1&&e.height?e.height*t.width/t.height:t.width}function Ste(e,t){return e.height!=null?e.height:!t||!t.height?0:e.aspect!==!1&&e.width?e.width*t.height/t.width:t.height}function EF(e,t){return e==="center"?t/2:e==="right"?t:0}function xF(e,t){return e==="middle"?t/2:e==="bottom"?t:0}function y9t(e,t,n){const r=Ete(t,n),i=xte(t,r),s=Ste(t,r),o=(t.x||0)-EF(t.align,i),a=(t.y||0)-xF(t.baseline,s),u=!r.src&&r.toDataURL?r.toDataURL():r.src||"";e("href",u,LI["xmlns:xlink"],"xlink:href"),e("transform",N1(o,a)),e("width",i),e("height",s),e("preserveAspectRatio",t.aspect===!1?"none":"xMidYMid")}function v9t(e,t){const n=t.image,r=xte(t,n),i=Ste(t,n),s=(t.x||0)-EF(t.align,r),o=(t.y||0)-xF(t.baseline,i);return e.set(s,o,s+r,o+i)}function b9t(e,t,n){rd(t,r=>{if(n&&!n.intersects(r.bounds))return;const i=Ete(r,this);let s=xte(r,i),o=Ste(r,i);if(s===0||o===0)return;let a=(r.x||0)-EF(r.align,s),u=(r.y||0)-xF(r.baseline,o),l,c,f,d;r.aspect!==!1&&(c=i.width/i.height,f=r.width/r.height,c===c&&f===f&&c!==f&&(f<c?(d=s/c,u+=(o-d)/2,o=d):(d=o*c,a+=(s-d)/2,s=d))),(i.complete||i.toDataURL)&&(Ax(e,r),e.globalAlpha=(l=r.opacity)!=null?l:1,e.imageSmoothingEnabled=r.smooth!==!1,e.drawImage(i,a,u,s,o))})}var _9t={type:"image",tag:"image",nested:!1,attr:y9t,bound:v9t,draw:b9t,pick:wF(),isect:jc,get:Ete,xOffset:EF,yOffset:xF},w9t=wte("line",j8t,t9t);function E9t(e,t){var n=t.scaleX||1,r=t.scaleY||1;(n!==1||r!==1)&&e("vector-effect","non-scaling-stroke"),e("transform",J8t(t)),e("d",t.path)}function nO(e,t){var n=t.path;if(n==null)return!0;var r=t.x||0,i=t.y||0,s=t.scaleX||1,o=t.scaleY||1,a=(t.angle||0)*hy,u=t.pathCache;(!u||u.path!==n)&&((t.pathCache=u=Cx(n)).path=n),a&&e.rotate&&e.translate?(e.translate(r,i),e.rotate(a),$I(e,u,0,0,s,o),e.rotate(-a),e.translate(-r,-i)):$I(e,u,r,i,s,o)}function x9t(e,t){return nO(SR(e,t.angle),t)?e.set(0,0,0,0):ag(e,t,!0)}var S9t={type:"path",tag:"path",nested:!1,attr:E9t,bound:x9t,draw:yte(nO),pick:vte(nO),isect:pte(nO)};function T9t(e,t){e("d",QS(null,t))}function C9t(e,t){var n,r;return ag(e.set(n=t.x||0,r=t.y||0,n+t.width||0,r+t.height||0),t)}function tme(e,t){e.beginPath(),QS(e,t)}var A9t={type:"rect",tag:"path",nested:!1,attr:T9t,bound:C9t,draw:yte(tme),pick:vte(tme),isect:K$e};function I9t(e,t){e("transform",Z$e(t)),e("x2",t.x2!=null?t.x2-(t.x||0):0),e("y2",t.y2!=null?t.y2-(t.y||0):0)}function k9t(e,t){var n,r;return ag(e.set(n=t.x||0,r=t.y||0,t.x2!=null?t.x2:n,t.y2!=null?t.y2:r),t)}function rMe(e,t,n){var r,i,s,o;return t.stroke&&Ix(e,t,n)?(r=t.x||0,i=t.y||0,s=t.x2!=null?t.x2:r,o=t.y2!=null?t.y2:i,e.beginPath(),e.moveTo(r,i),e.lineTo(s,o),!0):!1}function R9t(e,t,n){rd(t,r=>{if(!(n&&!n.intersects(r.bounds))){var i=r.opacity==null?1:r.opacity;i&&rMe(e,r,i)&&(Ax(e,r),e.stroke())}})}function N9t(e,t,n,r){return e.isPointInStroke?rMe(e,t,1)&&e.isPointInStroke(n,r):!1}var P9t={type:"rule",tag:"line",nested:!1,attr:I9t,bound:k9t,draw:R9t,pick:wF(N9t),isect:X$e},D9t=_te("shape",B8t),O9t=_te("symbol",U8t,mte);const nme=UOe();var Dl={height:sp,measureWidth:Tte,estimateWidth:bM,width:bM,canvas:iMe};iMe(!0);function iMe(e){Dl.width=e&&$0?Tte:bM}function bM(e,t){return sMe(my(e,t),sp(e))}function sMe(e,t){return~~(.8*e.length*t)}function Tte(e,t){return sp(e)<=0||!(t=my(e,t))?0:oMe(t,SF(e))}function oMe(e,t){const n=`(${t}) ${e}`;let r=nme.get(n);return r===void 0&&($0.font=t,r=$0.measureText(e).width,nme.set(n,r)),r}function sp(e){return e.fontSize!=null?+e.fontSize||0:11}function py(e){return e.lineHeight!=null?e.lineHeight:sp(e)+2}function $9t(e){return je(e)?e.length>1?e:e[0]:e}function CR(e){return $9t(e.lineBreak&&e.text&&!je(e.text)?e.text.split(e.lineBreak):e.text)}function Cte(e){const t=CR(e);return(je(t)?t.length-1:0)*py(e)}function my(e,t){const n=t==null?"":(t+"").trim();return e.limit>0&&n.length?L9t(e,n):n}function M9t(e){if(Dl.width===Tte){const t=SF(e);return n=>oMe(n,t)}else if(Dl.width===bM){const t=sp(e);return n=>sMe(n,t)}else return t=>Dl.width(e,t)}function L9t(e,t){var n=+e.limit,r=M9t(e);if(r(t)<n)return t;var i=e.ellipsis||"…",s=e.dir==="rtl",o=0,a=t.length,u;if(n-=r(i),s){for(;o<a;)u=o+a>>>1,r(t.slice(u))>n?o=u+1:a=u;return i+t.slice(o)}else{for(;o<a;)u=1+(o+a>>>1),r(t.slice(0,u))<n?o=u:a=u-1;return t.slice(0,o)+i}}function AR(e,t){var n=e.font;return(t&&n?String(n).replace(/"/g,"'"):n)||"sans-serif"}function SF(e,t){return(e.fontStyle?e.fontStyle+" ":"")+(e.fontVariant?e.fontVariant+" ":"")+(e.fontWeight?e.fontWeight+" ":"")+sp(e)+"px "+AR(e,t)}function Ate(e){var t=e.baseline,n=sp(e);return Math.round(t==="top"?.79*n:t==="middle"?.3*n:t==="bottom"?-.21*n:t==="line-top"?.29*n+.5*py(e):t==="line-bottom"?.29*n-.5*py(e):0)}const F9t={left:"start",center:"middle",right:"end"},QC=new Ts;function TF(e){var t=e.x||0,n=e.y||0,r=e.radius||0,i;return r&&(i=(e.theta||0)-Xv,t+=r*Math.cos(i),n+=r*Math.sin(i)),QC.x1=t,QC.y1=n,QC}function j9t(e,t){var n=t.dx||0,r=(t.dy||0)+Ate(t),i=TF(t),s=i.x1,o=i.y1,a=t.angle||0,u;e("text-anchor",F9t[t.align]||"start"),a?(u=N1(s,o)+" "+bte(a),(n||r)&&(u+=" "+N1(n,r))):u=N1(s+n,o+r),e("transform",u)}function Ite(e,t,n){var r=Dl.height(t),i=t.align,s=TF(t),o=s.x1,a=s.y1,u=t.dx||0,l=(t.dy||0)+Ate(t)-Math.round(.8*r),c=CR(t),f;if(je(c)?(r+=py(t)*(c.length-1),f=c.reduce((d,h)=>Math.max(d,Dl.width(t,h)),0)):f=Dl.width(t,c),i==="center"?u-=f/2:i==="right"&&(u-=f),e.set(u+=o,l+=a,u+f,l+r),t.angle&&!n)e.rotate(t.angle*hy,o,a);else if(n===2)return e.rotatedPoints(t.angle*hy,o,a);return e}function B9t(e,t,n){rd(t,r=>{var i=r.opacity==null?1:r.opacity,s,o,a,u,l,c,f;if(!(n&&!n.intersects(r.bounds)||i===0||r.fontSize<=0||r.text==null||r.text.length===0)){if(e.font=SF(r),e.textAlign=r.align||"left",s=TF(r),o=s.x1,a=s.y1,r.angle&&(e.save(),e.translate(o,a),e.rotate(r.angle*hy),o=a=0),o+=r.dx||0,a+=(r.dy||0)+Ate(r),c=CR(r),Ax(e,r),je(c))for(l=py(r),u=0;u<c.length;++u)f=my(r,c[u]),r.fill&&yM(e,r,i)&&e.fillText(f,o,a),r.stroke&&Ix(e,r,i)&&e.strokeText(f,o,a),a+=l;else f=my(r,c),r.fill&&yM(e,r,i)&&e.fillText(f,o,a),r.stroke&&Ix(e,r,i)&&e.strokeText(f,o,a);r.angle&&e.restore()}})}function U9t(e,t,n,r,i,s){if(t.fontSize<=0)return!1;if(!t.angle)return!0;var o=TF(t),a=o.x1,u=o.y1,l=Ite(QC,t,1),c=-t.angle*hy,f=Math.cos(c),d=Math.sin(c),h=f*i-d*s+(a-f*a+d*u),p=d*i+f*s+(u-d*a-f*u);return l.contains(h,p)}function z9t(e,t){const n=Ite(QC,e,2);return Lw(t,n[0],n[1],n[2],n[3])||Lw(t,n[0],n[1],n[4],n[5])||Lw(t,n[4],n[5],n[6],n[7])||Lw(t,n[2],n[3],n[6],n[7])}var V9t={type:"text",tag:"text",nested:!1,attr:j9t,bound:Ite,draw:B9t,pick:wF(U9t),isect:z9t},H9t=wte("trail",z8t,n9t),Gl={arc:Z8t,area:r9t,group:g9t,image:_9t,line:w9t,path:S9t,rect:A9t,rule:P9t,shape:D9t,symbol:O9t,text:V9t,trail:H9t};function AH(e,t,n){var r=Gl[e.mark.marktype],i=t||r.bound;return r.nested&&(e=e.mark),i(e.bounds||(e.bounds=new Ts),e,n)}var rme={mark:null};function aMe(e,t,n){var r=Gl[e.marktype],i=r.bound,s=e.items,o=s&&s.length,a,u,l,c;if(r.nested)return o?l=s[0]:(rme.mark=e,l=rme),c=AH(l,i,n),t=t&&t.union(c)||c,t;if(t=t||e.bounds&&e.bounds.clear()||new Ts,o)for(a=0,u=s.length;a<u;++a)t.union(AH(s[a],i,n));return e.bounds=t}const q9t=["marktype","name","role","interactive","clip","items","zindex","x","y","width","height","align","baseline","fill","fillOpacity","opacity","blend","stroke","strokeOpacity","strokeWidth","strokeCap","strokeDash","strokeDashOffset","strokeForeground","strokeOffset","startAngle","endAngle","innerRadius","outerRadius","cornerRadius","padAngle","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight","interpolate","tension","orient","defined","url","aspect","smooth","path","scaleX","scaleY","x2","y2","size","shape","text","angle","theta","radius","dir","dx","dy","ellipsis","limit","lineBreak","lineHeight","font","fontSize","fontWeight","fontStyle","fontVariant","description","aria","ariaRole","ariaRoleDescription"];function uMe(e,t){return JSON.stringify(e,q9t,t)}function lMe(e){const t=typeof e=="string"?JSON.parse(e):e;return cMe(t)}function cMe(e){var t=e.marktype,n=e.items,r,i,s;if(n)for(i=0,s=n.length;i<s;++i)r=t?"mark":"group",n[i][r]=e,n[i].zindex&&(n[i][r].zdirty=!0),(t||r)==="group"&&cMe(n[i]);return t&&aMe(e),e}class fMe{constructor(t){arguments.length?this.root=lMe(t):(this.root=ime({marktype:"group",name:"root",role:"frame"}),this.root.items=[new bF(this.root)])}toJSON(t){return uMe(this.root,t||0)}mark(t,n,r){n=n||this.root.items[0];const i=ime(t,n);return n.items[r]=i,i.zindex&&(i.group.zdirty=!0),i}}function ime(e,t){const n={bounds:new Ts,clip:!!e.clip,group:t,interactive:e.interactive!==!1,items:[],marktype:e.marktype,name:e.name||void 0,role:e.role||void 0,zindex:e.zindex||0};return e.aria!=null&&(n.aria=e.aria),e.description&&(n.description=e.description),n}function s0(e,t,n){return!e&&typeof document<"u"&&document.createElement&&(e=document),e?n?e.createElementNS(n,t):e.createElement(t):null}function kte(e,t){t=t.toLowerCase();for(var n=e.childNodes,r=0,i=n.length;r<i;++r)if(n[r].tagName.toLowerCase()===t)return n[r]}function Ds(e,t,n,r){var i=e.childNodes[t],s;return(!i||i.tagName.toLowerCase()!==n.toLowerCase())&&(s=i||null,i=s0(e.ownerDocument,n,r),e.insertBefore(i,s)),i}function _c(e,t){for(var n=e.childNodes,r=n.length;r>t;)e.removeChild(n[--r]);return e}function dMe(e){return"mark-"+e.marktype+(e.role?" role-"+e.role:"")+(e.name?" "+e.name:"")}function CF(e,t){const n=t.getBoundingClientRect();return[e.clientX-n.left-(t.clientLeft||0),e.clientY-n.top-(t.clientTop||0)]}function W9t(e,t,n,r){var i=e&&e.mark,s,o;if(i&&(s=Gl[i.marktype]).tip){for(o=CF(t,n),o[0]-=r[0],o[1]-=r[1];e=e.mark.group;)o[0]-=e.x||0,o[1]-=e.y||0;e=s.tip(i.items,o)}return e}let Rte=class{constructor(t,n){this._active=null,this._handlers={},this._loader=t||tF(),this._tooltip=n||G9t}initialize(t,n,r){return this._el=t,this._obj=r||null,this.origin(n)}element(){return this._el}canvas(){return this._el&&this._el.firstChild}origin(t){return arguments.length?(this._origin=t||[0,0],this):this._origin.slice()}scene(t){return arguments.length?(this._scene=t,this):this._scene}on(){}off(){}_handlerIndex(t,n,r){for(let i=t?t.length:0;--i>=0;)if(t[i].type===n&&(!r||t[i].handler===r))return i;return-1}handlers(t){const n=this._handlers,r=[];if(t)r.push(...n[this.eventName(t)]);else for(const i in n)r.push(...n[i]);return r}eventName(t){const n=t.indexOf(".");return n<0?t:t.slice(0,n)}handleHref(t,n,r){this._loader.sanitize(r,{context:"href"}).then(i=>{const s=new MouseEvent(t.type,t),o=s0(null,"a");for(const a in i)o.setAttribute(a,i[a]);o.dispatchEvent(s)}).catch(()=>{})}handleTooltip(t,n,r){if(n&&n.tooltip!=null){n=W9t(n,t,this.canvas(),this._origin);const i=r&&n&&n.tooltip||null;this._tooltip.call(this._obj,this,t,n,i)}}getItemBoundingClientRect(t){const n=this.canvas();if(!n)return;const r=n.getBoundingClientRect(),i=this._origin,s=t.bounds,o=s.width(),a=s.height();let u=s.x1+i[0]+r.left,l=s.y1+i[1]+r.top;for(;t.mark&&(t=t.mark.group);)u+=t.x||0,l+=t.y||0;return{x:u,y:l,width:o,height:a,left:u,top:l,right:u+o,bottom:l+a}}};function G9t(e,t,n,r){e.element().setAttribute("title",r||"")}class IR{constructor(t){this._el=null,this._bgcolor=null,this._loader=new Y$e(t)}initialize(t,n,r,i,s){return this._el=t,this.resize(n,r,i,s)}element(){return this._el}canvas(){return this._el&&this._el.firstChild}background(t){return arguments.length===0?this._bgcolor:(this._bgcolor=t,this)}resize(t,n,r,i){return this._width=t,this._height=n,this._origin=r||[0,0],this._scale=i||1,this}dirty(){}render(t,n){const r=this;return r._call=function(){r._render(t,n)},r._call(),r._call=null,r}_render(){}renderAsync(t,n){const r=this.render(t,n);return this._ready?this._ready.then(()=>r):Promise.resolve(r)}_load(t,n){var r=this,i=r._loader[t](n);if(!r._ready){const s=r._call;r._ready=r._loader.ready().then(o=>{o&&s(),r._ready=null})}return i}sanitizeURL(t){return this._load("sanitizeURL",t)}loadImage(t){return this._load("loadImage",t)}}const Y9t="keydown",K9t="keypress",X9t="keyup",hMe="dragenter",rO="dragleave",pMe="dragover",IH="pointerdown",Q9t="pointerup",_M="pointermove",iO="pointerout",mMe="pointerover",kH="mousedown",J9t="mouseup",gMe="mousemove",wM="mouseout",yMe="mouseover",EM="click",Z9t="dblclick",eBt="wheel",vMe="mousewheel",xM="touchstart",SM="touchmove",TM="touchend",tBt=[Y9t,K9t,X9t,hMe,rO,pMe,IH,Q9t,_M,iO,mMe,kH,J9t,gMe,wM,yMe,EM,Z9t,eBt,vMe,xM,SM,TM],RH=_M,JC=wM,NH=EM;class kR extends Rte{constructor(t,n){super(t,n),this._down=null,this._touch=null,this._first=!0,this._events={},this.events=tBt,this.pointermove=ome([_M,gMe],[mMe,yMe],[iO,wM]),this.dragover=ome([pMe],[hMe],[rO]),this.pointerout=ame([iO,wM]),this.dragleave=ame([rO])}initialize(t,n,r){return this._canvas=t&&kte(t,"canvas"),[EM,kH,IH,_M,iO,rO].forEach(i=>sme(this,i)),super.initialize(t,n,r)}canvas(){return this._canvas}context(){return this._canvas.getContext("2d")}DOMMouseScroll(t){this.fire(vMe,t)}pointerdown(t){this._down=this._active,this.fire(IH,t)}mousedown(t){this._down=this._active,this.fire(kH,t)}click(t){this._down===this._active&&(this.fire(EM,t),this._down=null)}touchstart(t){this._touch=this.pickEvent(t.changedTouches[0]),this._first&&(this._active=this._touch,this._first=!1),this.fire(xM,t,!0)}touchmove(t){this.fire(SM,t,!0)}touchend(t){this.fire(TM,t,!0),this._touch=null}fire(t,n,r){const i=r?this._touch:this._active,s=this._handlers[t];if(n.vegaType=t,t===NH&&i&&i.href?this.handleHref(n,i,i.href):(t===RH||t===JC)&&this.handleTooltip(n,i,t!==JC),s)for(let o=0,a=s.length;o<a;++o)s[o].handler.call(this._obj,n,i)}on(t,n){const r=this.eventName(t),i=this._handlers;return this._handlerIndex(i[r],t,n)<0&&(sme(this,t),(i[r]||(i[r]=[])).push({type:t,handler:n})),this}off(t,n){const r=this.eventName(t),i=this._handlers[r],s=this._handlerIndex(i,t,n);return s>=0&&i.splice(s,1),this}pickEvent(t){const n=CF(t,this._canvas),r=this._origin;return this.pick(this._scene,n[0],n[1],n[0]-r[0],n[1]-r[1])}pick(t,n,r,i,s){const o=this.context();return Gl[t.marktype].pick.call(this,o,t,n,r,i,s)}}const nBt=e=>e===xM||e===SM||e===TM?[xM,SM,TM]:[e];function sme(e,t){nBt(t).forEach(n=>rBt(e,n))}function rBt(e,t){const n=e.canvas();n&&!e._events[t]&&(e._events[t]=1,n.addEventListener(t,e[t]?r=>e[t](r):r=>e.fire(t,r)))}function Z2(e,t,n){t.forEach(r=>e.fire(r,n))}function ome(e,t,n){return function(r){const i=this._active,s=this.pickEvent(r);s===i?Z2(this,e,r):((!i||!i.exit)&&Z2(this,n,r),this._active=s,Z2(this,t,r),Z2(this,e,r))}}function ame(e){return function(t){Z2(this,e,t),this._active=null}}function iBt(){return typeof window<"u"&&window.devicePixelRatio||1}function sBt(e,t,n,r,i,s){const o=typeof HTMLElement<"u"&&e instanceof HTMLElement&&e.parentNode!=null,a=e.getContext("2d"),u=o?iBt():i;e.width=t*u,e.height=n*u;for(const l in s)a[l]=s[l];return o&&u!==1&&(e.style.width=t+"px",e.style.height=n+"px"),a.pixelRatio=u,a.setTransform(u,0,0,u,u*r[0],u*r[1]),e}class CM extends IR{constructor(t){super(t),this._options={},this._redraw=!1,this._dirty=new Ts,this._tempb=new Ts}initialize(t,n,r,i,s,o){return this._options=o||{},this._canvas=this._options.externalContext?null:O0(1,1,this._options.type),t&&this._canvas&&(_c(t,0).appendChild(this._canvas),this._canvas.setAttribute("class","marks")),super.initialize(t,n,r,i,s)}resize(t,n,r,i){if(super.resize(t,n,r,i),this._canvas)sBt(this._canvas,this._width,this._height,this._origin,this._scale,this._options.context);else{const s=this._options.externalContext;s||Le("CanvasRenderer is missing a valid canvas or context"),s.scale(this._scale,this._scale),s.translate(this._origin[0],this._origin[1])}return this._redraw=!0,this}canvas(){return this._canvas}context(){return this._options.externalContext||(this._canvas?this._canvas.getContext("2d"):null)}dirty(t){const n=this._tempb.clear().union(t.bounds);let r=t.mark.group;for(;r;)n.translate(r.x||0,r.y||0),r=r.mark.group;this._dirty.union(n)}_render(t,n){const r=this.context(),i=this._origin,s=this._width,o=this._height,a=this._dirty,u=oBt(i,s,o);r.save();const l=this._redraw||a.empty()?(this._redraw=!1,u.expand(1)):aBt(r,u.intersect(a),i);return this.clear(-i[0],-i[1],s,o),this.draw(r,t,l,n),r.restore(),a.clear(),this}draw(t,n,r,i){if(n.marktype!=="group"&&i!=null&&!i.includes(n.marktype))return;const s=Gl[n.marktype];n.clip&&i9t(t,n),s.draw.call(this,t,n,r,i),n.clip&&t.restore()}clear(t,n,r,i){const s=this._options,o=this.context();s.type!=="pdf"&&!s.externalContext&&o.clearRect(t,n,r,i),this._bgcolor!=null&&(o.fillStyle=this._bgcolor,o.fillRect(t,n,r,i))}}const oBt=(e,t,n)=>new Ts().set(0,0,t,n).translate(-e[0],-e[1]);function aBt(e,t,n){return t.expand(1).round(),e.pixelRatio%1&&t.scale(e.pixelRatio).round().scale(1/e.pixelRatio),t.translate(-(n[0]%1),-(n[1]%1)),e.beginPath(),e.rect(t.x1,t.y1,t.width(),t.height()),e.clip(),t}class bMe extends Rte{constructor(t,n){super(t,n);const r=this;r._hrefHandler=rB(r,(i,s)=>{s&&s.href&&r.handleHref(i,s,s.href)}),r._tooltipHandler=rB(r,(i,s)=>{r.handleTooltip(i,s,i.type!==JC)})}initialize(t,n,r){let i=this._svg;return i&&(i.removeEventListener(NH,this._hrefHandler),i.removeEventListener(RH,this._tooltipHandler),i.removeEventListener(JC,this._tooltipHandler)),this._svg=i=t&&kte(t,"svg"),i&&(i.addEventListener(NH,this._hrefHandler),i.addEventListener(RH,this._tooltipHandler),i.addEventListener(JC,this._tooltipHandler)),super.initialize(t,n,r)}canvas(){return this._svg}on(t,n){const r=this.eventName(t),i=this._handlers;if(this._handlerIndex(i[r],t,n)<0){const o={type:t,handler:n,listener:rB(this,n)};(i[r]||(i[r]=[])).push(o),this._svg&&this._svg.addEventListener(r,o.listener)}return this}off(t,n){const r=this.eventName(t),i=this._handlers[r],s=this._handlerIndex(i,t,n);return s>=0&&(this._svg&&this._svg.removeEventListener(r,i[s].listener),i.splice(s,1)),this}}const rB=(e,t)=>n=>{let r=n.target.__data__;r=Array.isArray(r)?r[0]:r,n.vegaType=n.type,t.call(e._obj,n,r)},_Me="aria-hidden",Nte="aria-label",Pte="role",Dte="aria-roledescription",wMe="graphics-object",Ote="graphics-symbol",EMe=(e,t,n)=>({[Pte]:e,[Dte]:t,[Nte]:n||void 0}),uBt=td(["axis-domain","axis-grid","axis-label","axis-tick","axis-title","legend-band","legend-entry","legend-gradient","legend-label","legend-title","legend-symbol","title"]),ume={axis:{desc:"axis",caption:fBt},legend:{desc:"legend",caption:dBt},"title-text":{desc:"title",caption:e=>`Title text '${cme(e)}'`},"title-subtitle":{desc:"subtitle",caption:e=>`Subtitle text '${cme(e)}'`}},lme={ariaRole:Pte,ariaRoleDescription:Dte,description:Nte};function xMe(e,t){const n=t.aria===!1;if(e(_Me,n||void 0),n||t.description==null)for(const r in lme)e(lme[r],void 0);else{const r=t.mark.marktype;e(Nte,t.description),e(Pte,t.ariaRole||(r==="group"?wMe:Ote)),e(Dte,t.ariaRoleDescription||`${r} mark`)}}function SMe(e){return e.aria===!1?{[_Me]:!0}:uBt[e.role]?null:ume[e.role]?cBt(e,ume[e.role]):lBt(e)}function lBt(e){const t=e.marktype,n=t==="group"||t==="text"||e.items.some(r=>r.description!=null&&r.aria!==!1);return EMe(n?wMe:Ote,`${t} mark container`,e.description)}function cBt(e,t){try{const n=e.items[0],r=t.caption||(()=>"");return EMe(t.role||Ote,t.desc,n.description||r(n))}catch{return null}}function cme(e){return pt(e.text).join(" ")}function fBt(e){const t=e.datum,n=e.orient,r=t.title?TMe(e):null,i=e.context,s=i.scales[t.scale].value,o=i.dataflow.locale(),a=s.type;return`${n==="left"||n==="right"?"Y":"X"}-axis`+(r?` titled '${r}'`:"")+` for a ${Tx(a)?"discrete":a} scale with ${F$e(o,s,e)}`}function dBt(e){const t=e.datum,n=t.title?TMe(e):null,r=`${t.type||""} legend`.trim(),i=t.scales,s=Object.keys(i),o=e.context,a=o.scales[i[s[0]]].value,u=o.dataflow.locale();return pBt(r)+(n?` titled '${n}'`:"")+` for ${hBt(s)} with ${F$e(u,a,e)}`}function TMe(e){try{return pt(Qn(e.items).items[0].text).join(" ")}catch{return null}}function hBt(e){return e=e.map(t=>t+(t==="fill"||t==="stroke"?" color":"")),e.length<2?e[0]:e.slice(0,-1).join(", ")+" and "+Qn(e)}function pBt(e){return e.length?e[0].toUpperCase()+e.slice(1):e}const CMe=e=>(e+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),mBt=e=>CMe(e).replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;");function $te(){let e="",t="",n="";const r=[],i=()=>t=n="",s=u=>{t&&(e+=`${t}>${n}`,i()),r.push(u)},o=(u,l)=>(l!=null&&(t+=` ${u}="${mBt(l)}"`),a),a={open(u){s(u),t="<"+u;for(var l=arguments.length,c=new Array(l>1?l-1:0),f=1;f<l;f++)c[f-1]=arguments[f];for(const d of c)for(const h in d)o(h,d[h]);return a},close(){const u=r.pop();return t?e+=t+(n?`>${n}</${u}>`:"/>"):e+=`</${u}>`,i(),a},attr:o,text:u=>(n+=CMe(u),a),toString:()=>e};return a}const AMe=e=>IMe($te(),e)+"";function IMe(e,t){if(e.open(t.tagName),t.hasAttributes()){const n=t.attributes,r=n.length;for(let i=0;i<r;++i)e.attr(n[i].name,n[i].value)}if(t.hasChildNodes()){const n=t.childNodes;for(const r of n)r.nodeType===3?e.text(r.nodeValue):IMe(e,r)}return e.close()}const AM={fill:"fill",fillOpacity:"fill-opacity",stroke:"stroke",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",strokeCap:"stroke-linecap",strokeJoin:"stroke-linejoin",strokeDash:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeMiterLimit:"stroke-miterlimit",opacity:"opacity"},IM={blend:"mix-blend-mode"},kMe={fill:"none","stroke-miterlimit":10},ZT=0,fme="http://www.w3.org/2000/xmlns/",Ns=LI.xmlns;class Mte extends IR{constructor(t){super(t),this._dirtyID=0,this._dirty=[],this._svg=null,this._root=null,this._defs=null}initialize(t,n,r,i,s){return this._defs={},this._clearDefs(),t&&(this._svg=Ds(t,0,"svg",Ns),this._svg.setAttributeNS(fme,"xmlns",Ns),this._svg.setAttributeNS(fme,"xmlns:xlink",LI["xmlns:xlink"]),this._svg.setAttribute("version",LI.version),this._svg.setAttribute("class","marks"),_c(t,1),this._root=Ds(this._svg,ZT,"g",Ns),o0(this._root,kMe),_c(this._svg,ZT+1)),this.background(this._bgcolor),super.initialize(t,n,r,i,s)}background(t){return arguments.length&&this._svg&&this._svg.style.setProperty("background-color",t),super.background(...arguments)}resize(t,n,r,i){return super.resize(t,n,r,i),this._svg&&(o0(this._svg,{width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}),this._root.setAttribute("transform",`translate(${this._origin})`)),this._dirty=[],this}canvas(){return this._svg}svg(){const t=this._svg,n=this._bgcolor;if(!t)return null;let r;n&&(t.removeAttribute("style"),r=Ds(t,ZT,"rect",Ns),o0(r,{width:this._width,height:this._height,fill:n}));const i=AMe(t);return n&&(t.removeChild(r),this._svg.style.setProperty("background-color",n)),i}_render(t,n){return this._dirtyCheck()&&(this._dirtyAll&&this._clearDefs(),this.mark(this._root,t,void 0,n),_c(this._root,1)),this.defs(),this._dirty=[],++this._dirtyID,this}dirty(t){t.dirty!==this._dirtyID&&(t.dirty=this._dirtyID,this._dirty.push(t))}isDirty(t){return this._dirtyAll||!t._svg||!t._svg.ownerSVGElement||t.dirty===this._dirtyID}_dirtyCheck(){this._dirtyAll=!0;const t=this._dirty;if(!t.length||!this._dirtyID)return!0;const n=++this._dirtyID;let r,i,s,o,a,u,l;for(a=0,u=t.length;a<u;++a)if(r=t[a],i=r.mark,i.marktype!==s&&(s=i.marktype,o=Gl[s]),i.zdirty&&i.dirty!==n&&(this._dirtyAll=!1,dme(r,n),i.items.forEach(c=>{c.dirty=n})),!i.zdirty){if(r.exit){o.nested&&i.items.length?(l=i.items[0],l._svg&&this._update(o,l._svg,l)):r._svg&&(l=r._svg.parentNode,l&&l.removeChild(r._svg)),r._svg=null;continue}r=o.nested?i.items[0]:r,r._update!==n&&(!r._svg||!r._svg.ownerSVGElement?(this._dirtyAll=!1,dme(r,n)):this._update(o,r._svg,r),r._update=n)}return!this._dirtyAll}mark(t,n,r,i){if(!this.isDirty(n))return n._svg;const s=this._svg,o=n.marktype,a=Gl[o],u=n.interactive===!1?"none":null,l=a.tag==="g",c=hme(n,t,r,"g",s);if(o!=="group"&&i!=null&&!i.includes(o))return _c(c,0),n._svg;c.setAttribute("class",dMe(n));const f=SMe(n);for(const m in f)$a(c,m,f[m]);l||$a(c,"pointer-events",u),$a(c,"clip-path",n.clip?hte(this,n,n.group):null);let d=null,h=0;const p=m=>{const g=this.isDirty(m),y=hme(m,c,d,a.tag,s);g&&(this._update(a,y,m),l&&vBt(this,y,m,i)),d=y,++h};return a.nested?n.items.length&&p(n.items[0]):rd(n,p),_c(c,h),c}_update(t,n,r){tm=n,oa=n.__values__,xMe(ZC,r),t.attr(ZC,r,this);const i=_Bt[t.type];i&&i.call(this,t,n,r),tm&&this.style(tm,r)}style(t,n){if(n!=null){for(const r in AM){let i=r==="font"?AR(n):n[r];if(i===oa[r])continue;const s=AM[r];i==null?t.removeAttribute(s):(cte(i)&&(i=B$e(i,this._defs.gradient,RMe())),t.setAttribute(s,i+"")),oa[r]=i}for(const r in IM)sO(t,IM[r],n[r])}}defs(){const t=this._svg,n=this._defs;let r=n.el,i=0;for(const s in n.gradient)r||(n.el=r=Ds(t,ZT+1,"defs",Ns)),i=gBt(r,n.gradient[s],i);for(const s in n.clipping)r||(n.el=r=Ds(t,ZT+1,"defs",Ns)),i=yBt(r,n.clipping[s],i);r&&(i===0?(t.removeChild(r),n.el=null):_c(r,i))}_clearDefs(){const t=this._defs;t.gradient={},t.clipping={}}}function dme(e,t){for(;e&&e.dirty!==t;e=e.mark.group)if(e.dirty=t,e.mark&&e.mark.dirty!==t)e.mark.dirty=t;else return}function gBt(e,t,n){let r,i,s;if(t.gradient==="radial"){let o=Ds(e,n++,"pattern",Ns);o0(o,{id:gM+t.id,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),o=Ds(o,0,"rect",Ns),o0(o,{width:1,height:1,fill:`url(${RMe()}#${t.id})`}),e=Ds(e,n++,"radialGradient",Ns),o0(e,{id:t.id,fx:t.x1,fy:t.y1,fr:t.r1,cx:t.x2,cy:t.y2,r:t.r2})}else e=Ds(e,n++,"linearGradient",Ns),o0(e,{id:t.id,x1:t.x1,x2:t.x2,y1:t.y1,y2:t.y2});for(r=0,i=t.stops.length;r<i;++r)s=Ds(e,r,"stop",Ns),s.setAttribute("offset",t.stops[r].offset),s.setAttribute("stop-color",t.stops[r].color);return _c(e,r),n}function yBt(e,t,n){let r;return e=Ds(e,n,"clipPath",Ns),e.setAttribute("id",t.id),t.path?(r=Ds(e,0,"path",Ns),r.setAttribute("d",t.path)):(r=Ds(e,0,"rect",Ns),o0(r,{x:0,y:0,width:t.width,height:t.height})),_c(e,1),n+1}function vBt(e,t,n,r){t=t.lastChild.previousSibling;let i,s=0;rd(n,o=>{i=e.mark(t,o,i,r),++s}),_c(t,1+s)}function hme(e,t,n,r,i){let s=e._svg,o;if(!s&&(o=t.ownerDocument,s=s0(o,r,Ns),e._svg=s,e.mark&&(s.__data__=e,s.__values__={fill:"default"},r==="g"))){const a=s0(o,"path",Ns);s.appendChild(a),a.__data__=e;const u=s0(o,"g",Ns);s.appendChild(u),u.__data__=e;const l=s0(o,"path",Ns);s.appendChild(l),l.__data__=e,l.__values__={fill:"default"}}return(s.ownerSVGElement!==i||bBt(s,n))&&t.insertBefore(s,n?n.nextSibling:t.firstChild),s}function bBt(e,t){return e.parentNode&&e.parentNode.childNodes.length>1&&e.previousSibling!=t}let tm=null,oa=null;const _Bt={group(e,t,n){const r=tm=t.childNodes[2];oa=r.__values__,e.foreground(ZC,n,this),oa=t.__values__,tm=t.childNodes[1],e.content(ZC,n,this);const i=tm=t.childNodes[0];e.background(ZC,n,this);const s=n.mark.interactive===!1?"none":null;if(s!==oa.events&&($a(r,"pointer-events",s),$a(i,"pointer-events",s),oa.events=s),n.strokeForeground&&n.stroke){const o=n.fill;$a(r,"display",null),this.style(i,n),$a(i,"stroke",null),o&&(n.fill=null),oa=r.__values__,this.style(r,n),o&&(n.fill=o),tm=null}else $a(r,"display","none")},image(e,t,n){n.smooth===!1?(sO(t,"image-rendering","optimizeSpeed"),sO(t,"image-rendering","pixelated")):sO(t,"image-rendering",null)},text(e,t,n){const r=CR(n);let i,s,o,a;je(r)?(s=r.map(u=>my(n,u)),i=s.join(`
`),i!==oa.text&&(_c(t,0),o=t.ownerDocument,a=py(n),s.forEach((u,l)=>{const c=s0(o,"tspan",Ns);c.__data__=n,c.textContent=u,l&&(c.setAttribute("x",0),c.setAttribute("dy",a)),t.appendChild(c)}),oa.text=i)):(s=my(n,r),s!==oa.text&&(t.textContent=s,oa.text=s)),$a(t,"font-family",AR(n)),$a(t,"font-size",sp(n)+"px"),$a(t,"font-style",n.fontStyle),$a(t,"font-variant",n.fontVariant),$a(t,"font-weight",n.fontWeight)}};function ZC(e,t,n){t!==oa[e]&&(n?wBt(tm,e,t,n):$a(tm,e,t),oa[e]=t)}function sO(e,t,n){n!==oa[t]&&(n==null?e.style.removeProperty(t):e.style.setProperty(t,n+""),oa[t]=n)}function o0(e,t){for(const n in t)$a(e,n,t[n])}function $a(e,t,n){n!=null?e.setAttribute(t,n):e.removeAttribute(t)}function wBt(e,t,n,r){n!=null?e.setAttributeNS(r,t,n):e.removeAttributeNS(r,t)}function RMe(){let e;return typeof window>"u"?"":(e=window.location).hash?e.href.slice(0,-e.hash.length):e.href}class NMe extends IR{constructor(t){super(t),this._text=null,this._defs={gradient:{},clipping:{}}}svg(){return this._text}_render(t){const n=$te();n.open("svg",bn({},LI,{class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}));const r=this._bgcolor;return r&&r!=="transparent"&&r!=="none"&&n.open("rect",{width:this._width,height:this._height,fill:r}).close(),n.open("g",kMe,{transform:"translate("+this._origin+")"}),this.mark(n,t),n.close(),this.defs(n),this._text=n.close()+"",this}mark(t,n){const r=Gl[n.marktype],i=r.tag,s=[xMe,r.attr];t.open("g",{class:dMe(n),"clip-path":n.clip?hte(this,n,n.group):null},SMe(n),{"pointer-events":i!=="g"&&n.interactive===!1?"none":null});const o=a=>{const u=this.href(a);if(u&&t.open("a",u),t.open(i,this.attr(n,a,s,i!=="g"?i:null)),i==="text"){const l=CR(a);if(je(l)){const c={x:0,dy:py(a)};for(let f=0;f<l.length;++f)t.open("tspan",f?c:null).text(my(a,l[f])).close()}else t.text(my(a,l))}else if(i==="g"){const l=a.strokeForeground,c=a.fill,f=a.stroke;l&&f&&(a.stroke=null),t.open("path",this.attr(n,a,r.background,"bgrect")).close(),t.open("g",this.attr(n,a,r.content)),rd(a,d=>this.mark(t,d)),t.close(),l&&f?(c&&(a.fill=null),a.stroke=f,t.open("path",this.attr(n,a,r.foreground,"bgrect")).close(),c&&(a.fill=c)):t.open("path",this.attr(n,a,r.foreground,"bgfore")).close()}t.close(),u&&t.close()};return r.nested?n.items&&n.items.length&&o(n.items[0]):rd(n,o),t.close()}href(t){const n=t.href;let r;if(n){if(r=this._hrefs&&this._hrefs[n])return r;this.sanitizeURL(n).then(i=>{i["xlink:href"]=i.href,i.href=null,(this._hrefs||(this._hrefs={}))[n]=i})}return null}attr(t,n,r,i){const s={},o=(a,u,l,c)=>{s[c||a]=u};return Array.isArray(r)?r.forEach(a=>a(o,n,this)):r(o,n,this),i&&EBt(s,n,t,i,this._defs),s}defs(t){const n=this._defs.gradient,r=this._defs.clipping;if(Object.keys(n).length+Object.keys(r).length!==0){t.open("defs");for(const s in n){const o=n[s],a=o.stops;o.gradient==="radial"?(t.open("pattern",{id:gM+s,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),t.open("rect",{width:"1",height:"1",fill:"url(#"+s+")"}).close(),t.close(),t.open("radialGradient",{id:s,fx:o.x1,fy:o.y1,fr:o.r1,cx:o.x2,cy:o.y2,r:o.r2})):t.open("linearGradient",{id:s,x1:o.x1,x2:o.x2,y1:o.y1,y2:o.y2});for(let u=0;u<a.length;++u)t.open("stop",{offset:a[u].offset,"stop-color":a[u].color}).close();t.close()}for(const s in r){const o=r[s];t.open("clipPath",{id:s}),o.path?t.open("path",{d:o.path}).close():t.open("rect",{x:0,y:0,width:o.width,height:o.height}).close(),t.close()}t.close()}}}function EBt(e,t,n,r,i){let s;if(t==null||(r==="bgrect"&&n.interactive===!1&&(e["pointer-events"]="none"),r==="bgfore"&&(n.interactive===!1&&(e["pointer-events"]="none"),e.display="none",t.fill!==null)))return e;r==="image"&&t.smooth===!1&&(s=["image-rendering: optimizeSpeed;","image-rendering: pixelated;"]),r==="text"&&(e["font-family"]=AR(t),e["font-size"]=sp(t)+"px",e["font-style"]=t.fontStyle,e["font-variant"]=t.fontVariant,e["font-weight"]=t.fontWeight);for(const o in AM){let a=t[o];const u=AM[o];a==="transparent"&&(u==="fill"||u==="stroke")||a!=null&&(cte(a)&&(a=B$e(a,i.gradient,"")),e[u]=a)}for(const o in IM){const a=t[o];a!=null&&(s=s||[],s.push(`${IM[o]}: ${a};`))}return s&&(e.style=s.join(" ")),e}const vf={svgMarkTypes:["text"],svgOnTop:!0,debug:!1};function xBt(e){vf.svgMarkTypes=e.svgMarkTypes??["text"],vf.svgOnTop=e.svgOnTop??!0,vf.debug=e.debug??!1}class PH extends IR{constructor(t){super(t),this._svgRenderer=new Mte(t),this._canvasRenderer=new CM(t)}initialize(t,n,r,i,s){this._root_el=Ds(t,0,"div");const o=Ds(this._root_el,0,"div"),a=Ds(this._root_el,1,"div");return this._root_el.style.position="relative",vf.debug||(o.style.height="100%",a.style.position="absolute",a.style.top="0",a.style.left="0",a.style.height="100%",a.style.width="100%"),this._svgEl=vf.svgOnTop?a:o,this._canvasEl=vf.svgOnTop?o:a,this._svgEl.style.pointerEvents="none",this._canvasRenderer.initialize(this._canvasEl,n,r,i,s),this._svgRenderer.initialize(this._svgEl,n,r,i,s),super.initialize(t,n,r,i,s)}dirty(t){return vf.svgMarkTypes.includes(t.mark.marktype)?this._svgRenderer.dirty(t):this._canvasRenderer.dirty(t),this}_render(t,n){const i=(n??["arc","area","image","line","path","rect","rule","shape","symbol","text","trail"]).filter(s=>!vf.svgMarkTypes.includes(s));this._svgRenderer.render(t,vf.svgMarkTypes),this._canvasRenderer.render(t,i)}resize(t,n,r,i){return super.resize(t,n,r,i),this._svgRenderer.resize(t,n,r,i),this._canvasRenderer.resize(t,n,r,i),this}background(t){return vf.svgOnTop?this._canvasRenderer.background(t):this._svgRenderer.background(t),this}}class PMe extends kR{constructor(t,n){super(t,n)}initialize(t,n,r){const i=Ds(Ds(t,0,"div"),vf.svgOnTop?0:1,"div");return super.initialize(i,n,r)}}const DMe="canvas",OMe="hybrid",$Me="png",MMe="svg",LMe="none",a0={Canvas:DMe,PNG:$Me,SVG:MMe,Hybrid:OMe,None:LMe},hb={};hb[DMe]=hb[$Me]={renderer:CM,headless:CM,handler:kR};hb[MMe]={renderer:Mte,headless:NMe,handler:bMe};hb[OMe]={renderer:PH,headless:PH,handler:PMe};hb[LMe]={};function AF(e,t){return e=String(e||"").toLowerCase(),arguments.length>1?(hb[e]=t,this):hb[e]}function FMe(e,t,n){const r=[],i=new Ts().union(t),s=e.marktype;return s?jMe(e,i,n,r):s==="group"?BMe(e,i,n,r):Le("Intersect scene must be mark node or group item.")}function jMe(e,t,n,r){if(SBt(e,t,n)){const i=e.items,s=e.marktype,o=i.length;let a=0;if(s==="group")for(;a<o;++a)BMe(i[a],t,n,r);else for(const u=Gl[s].isect;a<o;++a){const l=i[a];UMe(l,t,u)&&r.push(l)}}return r}function SBt(e,t,n){return e.bounds&&t.intersects(e.bounds)&&(e.marktype==="group"||e.interactive!==!1&&(!n||n(e)))}function BMe(e,t,n,r){n&&n(e.mark)&&UMe(e,t,Gl.group.isect)&&r.push(e);const i=e.items,s=i&&i.length;if(s){const o=e.x||0,a=e.y||0;t.translate(-o,-a);for(let u=0;u<s;++u)jMe(i[u],t,n,r);t.translate(o,a)}return r}function UMe(e,t,n){const r=e.bounds;return t.encloses(r)||t.intersects(r)&&n(e,t)}const iB=new Ts;function zMe(e){const t=e.clip;if(_n(t))t(SR(iB.clear()));else if(t)iB.set(0,0,e.group.width,e.group.height);else return;e.bounds.intersect(iB)}const TBt=1e-9;function Lte(e,t,n){return e===t?!0:n==="path"?VMe(e,t):e instanceof Date&&t instanceof Date?+e==+t:lr(e)&&lr(t)?Math.abs(e-t)<=TBt:!e||!t||!gt(e)&&!gt(t)?e==t:CBt(e,t)}function VMe(e,t){return Lte(Cx(e),Cx(t))}function CBt(e,t){var n=Object.keys(e),r=Object.keys(t),i,s;if(n.length!==r.length)return!1;for(n.sort(),r.sort(),s=n.length-1;s>=0;s--)if(n[s]!=r[s])return!1;for(s=n.length-1;s>=0;s--)if(i=n[s],!Lte(e[i],t[i],i))return!1;return typeof e==typeof t}function ABt(){G$e(),Qjt()}const kx="top",If="left",Of="right",gy="bottom",IBt="top-left",kBt="top-right",RBt="bottom-left",NBt="bottom-right",Fte="start",DH="middle",Fa="end",PBt="x",DBt="y",IF="group",jte="axis",Bte="title",OBt="frame",$Bt="scope",Ute="legend",HMe="row-header",qMe="row-footer",WMe="row-title",GMe="column-header",YMe="column-footer",KMe="column-title",MBt="padding",LBt="symbol",XMe="fit",QMe="fit-x",JMe="fit-y",FBt="pad",zte="none",kP="all",OH="each",Vte="flush",u0="column",l0="row";function ZMe(e){Pe.call(this,null,e)}lt(ZMe,Pe,{transform(e,t){const n=t.dataflow,r=e.mark,i=r.marktype,s=Gl[i],o=s.bound;let a=r.bounds,u;if(s.nested)r.items.length&&n.dirty(r.items[0]),a=RP(r,o),r.items.forEach(l=>{l.bounds.clear().union(a)});else if(i===IF||e.modified())switch(t.visit(t.MOD,l=>n.dirty(l)),a.clear(),r.items.forEach(l=>a.union(RP(l,o))),r.role){case jte:case Ute:case Bte:t.reflow()}else u=t.changed(t.REM),t.visit(t.ADD,l=>{a.union(RP(l,o))}),t.visit(t.MOD,l=>{u=u||a.alignsWith(l.bounds),n.dirty(l),a.union(RP(l,o))}),u&&(a.clear(),r.items.forEach(l=>a.union(l.bounds)));return zMe(r),t.modifies("bounds")}});function RP(e,t,n){return t(e.bounds.clear(),e,n)}const pme=":vega_identifier:";function Hte(e){Pe.call(this,0,e)}Hte.Definition={type:"Identifier",metadata:{modifies:!0},params:[{name:"as",type:"string",required:!0}]};lt(Hte,Pe,{transform(e,t){const n=jBt(t.dataflow),r=e.as;let i=n.value;return t.visit(t.ADD,s=>s[r]=s[r]||++i),n.set(this.value=i),t}});function jBt(e){return e._signals[pme]||(e._signals[pme]=e.add(0))}function eLe(e){Pe.call(this,null,e)}lt(eLe,Pe,{transform(e,t){let n=this.value;n||(n=t.dataflow.scenegraph().mark(e.markdef,BBt(e),e.index),n.group.context=e.context,e.context.group||(e.context.group=n.group),n.source=this.source,n.clip=e.clip,n.interactive=e.interactive,this.value=n);const r=n.marktype===IF?bF:vF;return t.visit(t.ADD,i=>r.call(i,n)),(e.modified("clip")||e.modified("interactive"))&&(n.clip=e.clip,n.interactive=!!e.interactive,n.zdirty=!0,t.reflow()),n.items=t.source,t}});function BBt(e){const t=e.groups,n=e.parent;return t&&t.size===1?t.get(Object.keys(t.object)[0]):t&&n?t.lookup(n):null}function tLe(e){Pe.call(this,null,e)}const mme={parity:e=>e.filter((t,n)=>n%2?t.opacity=0:1),greedy:(e,t)=>{let n;return e.filter((r,i)=>!i||!nLe(n.bounds,r.bounds,t)?(n=r,1):r.opacity=0)}},nLe=(e,t,n)=>n>Math.max(t.x1-e.x2,e.x1-t.x2,t.y1-e.y2,e.y1-t.y2),gme=(e,t)=>{for(var n=1,r=e.length,i=e[0].bounds,s;n<r;i=s,++n)if(nLe(i,s=e[n].bounds,t))return!0},UBt=e=>{const t=e.bounds;return t.width()>1&&t.height()>1},zBt=(e,t,n)=>{var r=e.range(),i=new Ts;return t===kx||t===gy?i.set(r[0],-1/0,r[1],1/0):i.set(-1/0,r[0],1/0,r[1]),i.expand(n||1),s=>i.encloses(s.bounds)},yme=e=>(e.forEach(t=>t.opacity=1),e),vme=(e,t)=>e.reflow(t.modified()).modifies("opacity");lt(tLe,Pe,{transform(e,t){const n=mme[e.method]||mme.parity,r=e.separation||0;let i=t.materialize(t.SOURCE).source,s,o;if(!i||!i.length)return;if(!e.method)return e.modified("method")&&(yme(i),t=vme(t,e)),t;if(i=i.filter(UBt),!i.length)return;if(e.sort&&(i=i.slice().sort(e.sort)),s=yme(i),t=vme(t,e),s.length>=3&&gme(s,r)){do s=n(s,r);while(s.length>=3&&gme(s,r));s.length<3&&!Qn(i).opacity&&(s.length>1&&(Qn(s).opacity=0),Qn(i).opacity=1)}e.boundScale&&e.boundTolerance>=0&&(o=zBt(e.boundScale,e.boundOrient,+e.boundTolerance),i.forEach(u=>{o(u)||(u.opacity=0)}));const a=s[0].mark.bounds.clear();return i.forEach(u=>{u.opacity&&a.union(u.bounds)}),t}});function rLe(e){Pe.call(this,null,e)}lt(rLe,Pe,{transform(e,t){const n=t.dataflow;if(t.visit(t.ALL,r=>n.dirty(r)),t.fields&&t.fields.zindex){const r=t.source&&t.source[0];r&&(r.mark.zdirty=!0)}}});const ia=new Ts;function Fw(e,t,n){return e[t]===n?0:(e[t]=n,1)}function VBt(e){var t=e.items[0].orient;return t===If||t===Of}function HBt(e){let t=+e.grid;return[e.ticks?t++:-1,e.labels?t++:-1,t+ +e.domain]}function qBt(e,t,n,r){var i=t.items[0],s=i.datum,o=i.translate!=null?i.translate:.5,a=i.orient,u=HBt(s),l=i.range,c=i.offset,f=i.position,d=i.minExtent,h=i.maxExtent,p=s.title&&i.items[u[2]].items[0],m=i.titlePadding,g=i.bounds,y=p&&Cte(p),v=0,_=0,w,E;switch(ia.clear().union(g),g.clear(),(w=u[0])>-1&&g.union(i.items[w].bounds),(w=u[1])>-1&&g.union(i.items[w].bounds),a){case kx:v=f||0,_=-c,E=Math.max(d,Math.min(h,-g.y1)),g.add(0,-E).add(l,0),p&&NP(e,p,E,m,y,0,-1,g);break;case If:v=-c,_=f||0,E=Math.max(d,Math.min(h,-g.x1)),g.add(-E,0).add(0,l),p&&NP(e,p,E,m,y,1,-1,g);break;case Of:v=n+c,_=f||0,E=Math.max(d,Math.min(h,g.x2)),g.add(0,0).add(E,l),p&&NP(e,p,E,m,y,1,1,g);break;case gy:v=f||0,_=r+c,E=Math.max(d,Math.min(h,g.y2)),g.add(0,0).add(l,E),p&&NP(e,p,E,m,0,0,1,g);break;default:v=i.x,_=i.y}return ag(g.translate(v,_),i),Fw(i,"x",v+o)|Fw(i,"y",_+o)&&(i.bounds=ia,e.dirty(i),i.bounds=g,e.dirty(i)),i.mark.bounds.clear().union(g)}function NP(e,t,n,r,i,s,o,a){const u=t.bounds;if(t.auto){const l=o*(n+i+r);let c=0,f=0;e.dirty(t),s?c=(t.x||0)-(t.x=l):f=(t.y||0)-(t.y=l),t.mark.bounds.clear().union(u.translate(-c,-f)),e.dirty(t)}a.union(u)}const bme=(e,t)=>Math.floor(Math.min(e,t)),_me=(e,t)=>Math.ceil(Math.max(e,t));function WBt(e){var t=e.items,n=t.length,r=0,i,s;const o={marks:[],rowheaders:[],rowfooters:[],colheaders:[],colfooters:[],rowtitle:null,coltitle:null};for(;r<n;++r)if(i=t[r],s=i.items,i.marktype===IF)switch(i.role){case jte:case Ute:case Bte:break;case HMe:o.rowheaders.push(...s);break;case qMe:o.rowfooters.push(...s);break;case GMe:o.colheaders.push(...s);break;case YMe:o.colfooters.push(...s);break;case WMe:o.rowtitle=s[0];break;case KMe:o.coltitle=s[0];break;default:o.marks.push(...s)}return o}function GBt(e){return new Ts().set(0,0,e.width||0,e.height||0)}function YBt(e){const t=e.bounds.clone();return t.empty()?t.set(0,0,0,0):t.translate(-(e.x||0),-(e.y||0))}function _i(e,t,n){const r=gt(e)?e[t]:e;return r??(n!==void 0?n:0)}function wme(e){return e<0?Math.ceil(-e):0}function iLe(e,t,n){var r=!n.nodirty,i=n.bounds===Vte?GBt:YBt,s=ia.set(0,0,0,0),o=_i(n.align,u0),a=_i(n.align,l0),u=_i(n.padding,u0),l=_i(n.padding,l0),c=n.columns||t.length,f=c<=0?1:Math.ceil(t.length/c),d=t.length,h=Array(d),p=Array(c),m=0,g=Array(d),y=Array(f),v=0,_=Array(d),w=Array(d),E=Array(d),S,T,C,A,k,N,O,D,$,F,M;for(T=0;T<c;++T)p[T]=0;for(T=0;T<f;++T)y[T]=0;for(T=0;T<d;++T)N=t[T],k=E[T]=i(N),N.x=N.x||0,_[T]=0,N.y=N.y||0,w[T]=0,C=T%c,A=~~(T/c),m=Math.max(m,O=Math.ceil(k.x2)),v=Math.max(v,D=Math.ceil(k.y2)),p[C]=Math.max(p[C],O),y[A]=Math.max(y[A],D),h[T]=u+wme(k.x1),g[T]=l+wme(k.y1),r&&e.dirty(t[T]);for(T=0;T<d;++T)T%c===0&&(h[T]=0),T<c&&(g[T]=0);if(o===OH)for(C=1;C<c;++C){for(M=0,T=C;T<d;T+=c)M<h[T]&&(M=h[T]);for(T=C;T<d;T+=c)h[T]=M+p[C-1]}else if(o===kP){for(M=0,T=0;T<d;++T)T%c&&M<h[T]&&(M=h[T]);for(T=0;T<d;++T)T%c&&(h[T]=M+m)}else for(o=!1,C=1;C<c;++C)for(T=C;T<d;T+=c)h[T]+=p[C-1];if(a===OH)for(A=1;A<f;++A){for(M=0,T=A*c,S=T+c;T<S;++T)M<g[T]&&(M=g[T]);for(T=A*c;T<S;++T)g[T]=M+y[A-1]}else if(a===kP){for(M=0,T=c;T<d;++T)M<g[T]&&(M=g[T]);for(T=c;T<d;++T)g[T]=M+v}else for(a=!1,A=1;A<f;++A)for(T=A*c,S=T+c;T<S;++T)g[T]+=y[A-1];for($=0,T=0;T<d;++T)$=h[T]+(T%c?$:0),_[T]+=$-t[T].x;for(C=0;C<c;++C)for(F=0,T=C;T<d;T+=c)F+=g[T],w[T]+=F-t[T].y;if(o&&_i(n.center,u0)&&f>1)for(T=0;T<d;++T)k=o===kP?m:p[T%c],$=k-E[T].x2-t[T].x-_[T],$>0&&(_[T]+=$/2);if(a&&_i(n.center,l0)&&c!==1)for(T=0;T<d;++T)k=a===kP?v:y[~~(T/c)],F=k-E[T].y2-t[T].y-w[T],F>0&&(w[T]+=F/2);for(T=0;T<d;++T)s.union(E[T].translate(_[T],w[T]));switch($=_i(n.anchor,PBt),F=_i(n.anchor,DBt),_i(n.anchor,u0)){case Fa:$-=s.width();break;case DH:$-=s.width()/2}switch(_i(n.anchor,l0)){case Fa:F-=s.height();break;case DH:F-=s.height()/2}for($=Math.round($),F=Math.round(F),s.clear(),T=0;T<d;++T)t[T].mark.bounds.clear();for(T=0;T<d;++T)N=t[T],N.x+=_[T]+=$,N.y+=w[T]+=F,s.union(N.mark.bounds.union(N.bounds.translate(_[T],w[T]))),r&&e.dirty(N);return s}function KBt(e,t,n){var r=WBt(t),i=r.marks,s=n.bounds===Vte?XBt:QBt,o=n.offset,a=n.columns||i.length,u=a<=0?1:Math.ceil(i.length/a),l=u*a,c,f,d,h,p,m,g;const y=iLe(e,i,n);y.empty()&&y.set(0,0,0,0),r.rowheaders&&(m=_i(n.headerBand,l0,null),c=PP(e,r.rowheaders,i,a,u,-_i(o,"rowHeader"),bme,0,s,"x1",0,a,1,m)),r.colheaders&&(m=_i(n.headerBand,u0,null),f=PP(e,r.colheaders,i,a,a,-_i(o,"columnHeader"),bme,1,s,"y1",0,1,a,m)),r.rowfooters&&(m=_i(n.footerBand,l0,null),d=PP(e,r.rowfooters,i,a,u,_i(o,"rowFooter"),_me,0,s,"x2",a-1,a,1,m)),r.colfooters&&(m=_i(n.footerBand,u0,null),h=PP(e,r.colfooters,i,a,a,_i(o,"columnFooter"),_me,1,s,"y2",l-a,1,a,m)),r.rowtitle&&(p=_i(n.titleAnchor,l0),g=_i(o,"rowTitle"),g=p===Fa?d+g:c-g,m=_i(n.titleBand,l0,.5),Eme(e,r.rowtitle,g,0,y,m)),r.coltitle&&(p=_i(n.titleAnchor,u0),g=_i(o,"columnTitle"),g=p===Fa?h+g:f-g,m=_i(n.titleBand,u0,.5),Eme(e,r.coltitle,g,1,y,m))}function XBt(e,t){return t==="x1"?e.x||0:t==="y1"?e.y||0:t==="x2"?(e.x||0)+(e.width||0):t==="y2"?(e.y||0)+(e.height||0):void 0}function QBt(e,t){return e.bounds[t]}function PP(e,t,n,r,i,s,o,a,u,l,c,f,d,h){var p=n.length,m=0,g=0,y,v,_,w,E,S,T,C,A;if(!p)return m;for(y=c;y<p;y+=f)n[y]&&(m=o(m,u(n[y],l)));if(!t.length)return m;for(t.length>i&&(e.warn("Grid headers exceed limit: "+i),t=t.slice(0,i)),m+=s,v=0,w=t.length;v<w;++v)e.dirty(t[v]),t[v].mark.bounds.clear();for(y=c,v=0,w=t.length;v<w;++v,y+=f){for(S=t[v],E=S.mark.bounds,_=y;_>=0&&(T=n[_])==null;_-=d);a?(C=h==null?T.x:Math.round(T.bounds.x1+h*T.bounds.width()),A=m):(C=m,A=h==null?T.y:Math.round(T.bounds.y1+h*T.bounds.height())),E.union(S.bounds.translate(C-(S.x||0),A-(S.y||0))),S.x=C,S.y=A,e.dirty(S),g=o(g,E[l])}return g}function Eme(e,t,n,r,i,s){if(t){e.dirty(t);var o=n,a=n;r?o=Math.round(i.x1+s*i.width()):a=Math.round(i.y1+s*i.height()),t.bounds.translate(o-(t.x||0),a-(t.y||0)),t.mark.bounds.clear().union(t.bounds),t.x=o,t.y=a,e.dirty(t)}}function JBt(e,t){const n=e[t]||{};return(r,i)=>n[r]!=null?n[r]:e[r]!=null?e[r]:i}function ZBt(e,t){let n=-1/0;return e.forEach(r=>{r.offset!=null&&(n=Math.max(n,r.offset))}),n>-1/0?n:t}function eUt(e,t,n,r,i,s,o){const a=JBt(n,t),u=ZBt(e,a("offset",0)),l=a("anchor",Fte),c=l===Fa?1:l===DH?.5:0,f={align:OH,bounds:a("bounds",Vte),columns:a("direction")==="vertical"?1:e.length,padding:a("margin",8),center:a("center"),nodirty:!0};switch(t){case If:f.anchor={x:Math.floor(r.x1)-u,column:Fa,y:c*(o||r.height()+2*r.y1),row:l};break;case Of:f.anchor={x:Math.ceil(r.x2)+u,y:c*(o||r.height()+2*r.y1),row:l};break;case kx:f.anchor={y:Math.floor(i.y1)-u,row:Fa,x:c*(s||i.width()+2*i.x1),column:l};break;case gy:f.anchor={y:Math.ceil(i.y2)+u,x:c*(s||i.width()+2*i.x1),column:l};break;case IBt:f.anchor={x:u,y:u};break;case kBt:f.anchor={x:s-u,y:u,column:Fa};break;case RBt:f.anchor={x:u,y:o-u,row:Fa};break;case NBt:f.anchor={x:s-u,y:o-u,column:Fa,row:Fa};break}return f}function tUt(e,t){var n=t.items[0],r=n.datum,i=n.orient,s=n.bounds,o=n.x,a=n.y,u,l;return n._bounds?n._bounds.clear().union(s):n._bounds=s.clone(),s.clear(),rUt(e,n,n.items[0].items[0]),s=nUt(n,s),u=2*n.padding,l=2*n.padding,s.empty()||(u=Math.ceil(s.width()+u),l=Math.ceil(s.height()+l)),r.type===LBt&&iUt(n.items[0].items[0].items[0].items),i!==zte&&(n.x=o=0,n.y=a=0),n.width=u,n.height=l,ag(s.set(o,a,o+u,a+l),n),n.mark.bounds.clear().union(s),n}function nUt(e,t){return e.items.forEach(n=>t.union(n.bounds)),t.x1=e.padding,t.y1=e.padding,t}function rUt(e,t,n){var r=t.padding,i=r-n.x,s=r-n.y;if(!t.datum.title)(i||s)&&e2(e,n,i,s);else{var o=t.items[1].items[0],a=o.anchor,u=t.titlePadding||0,l=r-o.x,c=r-o.y;switch(o.orient){case If:i+=Math.ceil(o.bounds.width())+u;break;case Of:case gy:break;default:s+=o.bounds.height()+u}switch((i||s)&&e2(e,n,i,s),o.orient){case If:c+=H_(t,n,o,a,1,1);break;case Of:l+=H_(t,n,o,Fa,0,0)+u,c+=H_(t,n,o,a,1,1);break;case gy:l+=H_(t,n,o,a,0,0),c+=H_(t,n,o,Fa,-1,0,1)+u;break;default:l+=H_(t,n,o,a,0,0)}(l||c)&&e2(e,o,l,c),(l=Math.round(o.bounds.x1-r))<0&&(e2(e,n,-l,0),e2(e,o,-l,0))}}function H_(e,t,n,r,i,s,o){const a=e.datum.type!=="symbol",u=n.datum.vgrad,l=a&&(s||!u)&&!o?t.items[0]:t,c=l.bounds[i?"y2":"x2"]-e.padding,f=u&&s?c:0,d=u&&s?0:c,h=i<=0?0:Cte(n);return Math.round(r===Fte?f:r===Fa?d-h:.5*(c-h))}function e2(e,t,n,r){t.x+=n,t.y+=r,t.bounds.translate(n,r),t.mark.bounds.translate(n,r),e.dirty(t)}function iUt(e){const t=e.reduce((n,r)=>(n[r.column]=Math.max(r.bounds.x2-r.x,n[r.column]||0),n),{});e.forEach(n=>{n.width=t[n.column],n.height=n.bounds.y2-n.y})}function sUt(e,t,n,r,i){var s=t.items[0],o=s.frame,a=s.orient,u=s.anchor,l=s.offset,c=s.padding,f=s.items[0].items[0],d=s.items[1]&&s.items[1].items[0],h=a===If||a===Of?r:n,p=0,m=0,g=0,y=0,v=0,_;if(o!==IF?a===If?(p=i.y2,h=i.y1):a===Of?(p=i.y1,h=i.y2):(p=i.x1,h=i.x2):a===If&&(p=r,h=0),_=u===Fte?p:u===Fa?h:(p+h)/2,d&&d.text){switch(a){case kx:case gy:v=f.bounds.height()+c;break;case If:y=f.bounds.width()+c;break;case Of:y=-f.bounds.width()-c;break}ia.clear().union(d.bounds),ia.translate(y-(d.x||0),v-(d.y||0)),Fw(d,"x",y)|Fw(d,"y",v)&&(e.dirty(d),d.bounds.clear().union(ia),d.mark.bounds.clear().union(ia),e.dirty(d)),ia.clear().union(d.bounds)}else ia.clear();switch(ia.union(f.bounds),a){case kx:m=_,g=i.y1-ia.height()-l;break;case If:m=i.x1-ia.width()-l,g=_;break;case Of:m=i.x2+ia.width()+l,g=_;break;case gy:m=_,g=i.y2+l;break;default:m=s.x,g=s.y}return Fw(s,"x",m)|Fw(s,"y",g)&&(ia.translate(m,g),e.dirty(s),s.bounds.clear().union(ia),t.bounds.clear().union(ia),e.dirty(s)),s.bounds}function sLe(e){Pe.call(this,null,e)}lt(sLe,Pe,{transform(e,t){const n=t.dataflow;return e.mark.items.forEach(r=>{e.layout&&KBt(n,r,e.layout),aUt(n,r,e)}),oUt(e.mark.group)?t.reflow():t}});function oUt(e){return e&&e.mark.role!=="legend-entry"}function aUt(e,t,n){var r=t.items,i=Math.max(0,t.width||0),s=Math.max(0,t.height||0),o=new Ts().set(0,0,i,s),a=o.clone(),u=o.clone(),l=[],c,f,d,h,p,m;for(p=0,m=r.length;p<m;++p)switch(f=r[p],f.role){case jte:h=VBt(f)?a:u,h.union(qBt(e,f,i,s));break;case Bte:c=f;break;case Ute:l.push(tUt(e,f));break;case OBt:case $Bt:case HMe:case qMe:case WMe:case GMe:case YMe:case KMe:a.union(f.bounds),u.union(f.bounds);break;default:o.union(f.bounds)}if(l.length){const g={};l.forEach(y=>{d=y.orient||Of,d!==zte&&(g[d]||(g[d]=[])).push(y)});for(const y in g){const v=g[y];iLe(e,v,eUt(v,y,n.legends,a,u,i,s))}l.forEach(y=>{const v=y.bounds;if(v.equals(y._bounds)||(y.bounds=y._bounds,e.dirty(y),y.bounds=v,e.dirty(y)),n.autosize&&(n.autosize.type===XMe||n.autosize.type===QMe||n.autosize.type===JMe))switch(y.orient){case If:case Of:o.add(v.x1,0).add(v.x2,0);break;case kx:case gy:o.add(0,v.y1).add(0,v.y2)}else o.union(v)})}o.union(a).union(u),c&&o.union(sUt(e,c,i,s,o)),t.clip&&o.set(0,0,t.width||0,t.height||0),uUt(e,t,o,n)}function uUt(e,t,n,r){const i=r.autosize||{},s=i.type;if(e._autosize<1||!s)return;let o=e._width,a=e._height,u=Math.max(0,t.width||0),l=Math.max(0,Math.ceil(-n.x1)),c=Math.max(0,t.height||0),f=Math.max(0,Math.ceil(-n.y1));const d=Math.max(0,Math.ceil(n.x2-u)),h=Math.max(0,Math.ceil(n.y2-c));if(i.contains===MBt){const p=e.padding();o-=p.left+p.right,a-=p.top+p.bottom}s===zte?(l=0,f=0,u=o,c=a):s===XMe?(u=Math.max(0,o-l-d),c=Math.max(0,a-f-h)):s===QMe?(u=Math.max(0,o-l-d),a=c+f+h):s===JMe?(o=u+l+d,c=Math.max(0,a-f-h)):s===FBt&&(o=u+l+d,a=c+f+h),e._resizeView(o,a,u,c,[l,f],i.resize)}const lUt=Object.freeze(Object.defineProperty({__proto__:null,bound:ZMe,identifier:Hte,mark:eLe,overlap:tLe,render:rLe,viewlayout:sLe},Symbol.toStringTag,{value:"Module"}));function oLe(e){Pe.call(this,null,e)}lt(oLe,Pe,{transform(e,t){if(this.value&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=this.value,s=e.scale,o=e.count==null?e.values?e.values.length:10:e.count,a=ute(s,o,e.minstep),u=e.format||D$e(n,s,a,e.formatSpecifier,e.formatType,!!e.values),l=e.values?P$e(s,e.values,a):lte(s,a);return i&&(r.rem=i),i=l.map((c,f)=>Er({index:f/(l.length-1||1),value:c,label:u(c)})),e.extra&&i.length&&i.push(Er({index:-1,extra:{value:i[0].value},label:""})),r.source=i,r.add=i,this.value=i,r}});function aLe(e){Pe.call(this,null,e)}function cUt(){return Er({})}function fUt(e){const t=WS().test(n=>n.exit);return t.lookup=n=>t.get(e(n)),t}lt(aLe,Pe,{transform(e,t){var n=t.dataflow,r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.item||cUt,s=e.key||Lt,o=this.value;return je(r.encode)&&(r.encode=null),o&&(e.modified("key")||t.modified(s))&&Le("DataJoin does not support modified key function or fields."),o||(t=t.addAll(),this.value=o=fUt(s)),t.visit(t.ADD,a=>{const u=s(a);let l=o.get(u);l?l.exit?(o.empty--,r.add.push(l)):r.mod.push(l):(l=i(a),o.set(u,l),r.add.push(l)),l.datum=a,l.exit=!1}),t.visit(t.MOD,a=>{const u=s(a),l=o.get(u);l&&(l.datum=a,r.mod.push(l))}),t.visit(t.REM,a=>{const u=s(a),l=o.get(u);a===l.datum&&!l.exit&&(r.rem.push(l),l.exit=!0,++o.empty)}),t.changed(t.ADD_MOD)&&r.modifies("datum"),(t.clean()||e.clean&&o.empty>n.cleanThreshold)&&n.runAfter(o.clean),r}});function uLe(e){Pe.call(this,null,e)}lt(uLe,Pe,{transform(e,t){var n=t.fork(t.ADD_REM),r=e.mod||!1,i=e.encoders,s=t.encode;if(je(s))if(n.changed()||s.every(f=>i[f]))s=s[0],n.encode=null;else return t.StopPropagation;var o=s==="enter",a=i.update||Ag,u=i.enter||Ag,l=i.exit||Ag,c=(s&&!o?i[s]:a)||Ag;if(t.changed(t.ADD)&&(t.visit(t.ADD,f=>{u(f,e),a(f,e)}),n.modifies(u.output),n.modifies(a.output),c!==Ag&&c!==a&&(t.visit(t.ADD,f=>{c(f,e)}),n.modifies(c.output))),t.changed(t.REM)&&l!==Ag&&(t.visit(t.REM,f=>{l(f,e)}),n.modifies(l.output)),o||c!==Ag){const f=t.MOD|(e.modified()?t.REFLOW:0);o?(t.visit(f,d=>{const h=u(d,e)||r;(c(d,e)||h)&&n.mod.push(d)}),n.mod.length&&n.modifies(u.output)):t.visit(f,d=>{(c(d,e)||r)&&n.mod.push(d)}),n.mod.length&&n.modifies(c.output)}return n.changed()?n:t.StopPropagation}});function lLe(e){Pe.call(this,[],e)}lt(lLe,Pe,{transform(e,t){if(this.value!=null&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=this.value,s=e.type||QD,o=e.scale,a=+e.limit,u=ute(o,e.count==null?5:e.count,e.minstep),l=!!e.values||s===QD,c=e.format||L$e(n,o,u,s,e.formatSpecifier,e.formatType,l),f=e.values||M$e(o,u),d,h,p,m,g;return i&&(r.rem=i),s===QD?(a&&f.length>a?(t.dataflow.warn("Symbol legend count exceeds limit, filtering items."),i=f.slice(0,a-1),g=!0):i=f,_n(p=e.size)?(!e.values&&o(i[0])===0&&(i=i.slice(1)),m=i.reduce((y,v)=>Math.max(y,p(v,e)),0)):p=Sa(m=p||8),i=i.map((y,v)=>Er({index:v,label:c(y,v,i),value:y,offset:m,size:p(y,e)})),g&&(g=f[i.length],i.push(Er({index:i.length,label:`…${f.length-i.length} entries`,value:g,offset:m,size:p(g,e)})))):s===Fjt?(d=o.domain(),h=k$e(o,d[0],Qn(d)),f.length<3&&!e.values&&d[0]!==Qn(d)&&(f=[d[0],Qn(d)]),i=f.map((y,v)=>Er({index:v,label:c(y,v,f),value:y,perc:h(y)}))):(p=f.length-1,h=Kjt(o),i=f.map((y,v)=>Er({index:v,label:c(y,v,f),value:y,perc:v?h(y):0,perc2:v===p?1:h(f[v+1])}))),r.source=i,r.add=i,this.value=i,r}});const dUt=e=>e.source.x,hUt=e=>e.source.y,pUt=e=>e.target.x,mUt=e=>e.target.y;function qte(e){Pe.call(this,{},e)}qte.Definition={type:"LinkPath",metadata:{modifies:!0},params:[{name:"sourceX",type:"field",default:"source.x"},{name:"sourceY",type:"field",default:"source.y"},{name:"targetX",type:"field",default:"target.x"},{name:"targetY",type:"field",default:"target.y"},{name:"orient",type:"enum",default:"vertical",values:["horizontal","vertical","radial"]},{name:"shape",type:"enum",default:"line",values:["line","arc","curve","diagonal","orthogonal"]},{name:"require",type:"signal"},{name:"as",type:"string",default:"path"}]};lt(qte,Pe,{transform(e,t){var n=e.sourceX||dUt,r=e.sourceY||hUt,i=e.targetX||pUt,s=e.targetY||mUt,o=e.as||"path",a=e.orient||"vertical",u=e.shape||"line",l=xme.get(u+"-"+a)||xme.get(u);return l||Le("LinkPath unsupported type: "+e.shape+(e.orient?"-"+e.orient:"")),t.visit(t.SOURCE,c=>{c[o]=l(n(c),r(c),i(c),s(c))}),t.reflow(e.modified()).modifies(o)}});const cLe=(e,t,n,r)=>"M"+e+","+t+"L"+n+","+r,gUt=(e,t,n,r)=>cLe(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),fLe=(e,t,n,r)=>{var i=n-e,s=r-t,o=Math.hypot(i,s)/2,a=180*Math.atan2(s,i)/Math.PI;return"M"+e+","+t+"A"+o+","+o+" "+a+" 0 1 "+n+","+r},yUt=(e,t,n,r)=>fLe(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),dLe=(e,t,n,r)=>{const i=n-e,s=r-t,o=.2*(i+s),a=.2*(s-i);return"M"+e+","+t+"C"+(e+o)+","+(t+a)+" "+(n+a)+","+(r-o)+" "+n+","+r},vUt=(e,t,n,r)=>dLe(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),bUt=(e,t,n,r)=>"M"+e+","+t+"V"+r+"H"+n,_Ut=(e,t,n,r)=>"M"+e+","+t+"H"+n+"V"+r,wUt=(e,t,n,r)=>{const i=Math.cos(e),s=Math.sin(e),o=Math.cos(n),a=Math.sin(n),u=Math.abs(n-e)>Math.PI?n<=e:n>e;return"M"+t*i+","+t*s+"A"+t+","+t+" 0 0,"+(u?1:0)+" "+t*o+","+t*a+"L"+r*o+","+r*a},EUt=(e,t,n,r)=>{const i=(e+n)/2;return"M"+e+","+t+"C"+i+","+t+" "+i+","+r+" "+n+","+r},xUt=(e,t,n,r)=>{const i=(t+r)/2;return"M"+e+","+t+"C"+e+","+i+" "+n+","+i+" "+n+","+r},SUt=(e,t,n,r)=>{const i=Math.cos(e),s=Math.sin(e),o=Math.cos(n),a=Math.sin(n),u=(t+r)/2;return"M"+t*i+","+t*s+"C"+u*i+","+u*s+" "+u*o+","+u*a+" "+r*o+","+r*a},xme=WS({line:cLe,"line-radial":gUt,arc:fLe,"arc-radial":yUt,curve:dLe,"curve-radial":vUt,"orthogonal-horizontal":bUt,"orthogonal-vertical":_Ut,"orthogonal-radial":wUt,"diagonal-horizontal":EUt,"diagonal-vertical":xUt,"diagonal-radial":SUt});function Wte(e){Pe.call(this,null,e)}Wte.Definition={type:"Pie",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"startAngle",type:"number",default:0},{name:"endAngle",type:"number",default:6.283185307179586},{name:"sort",type:"boolean",default:!1},{name:"as",type:"string",array:!0,length:2,default:["startAngle","endAngle"]}]};lt(Wte,Pe,{transform(e,t){var n=e.as||["startAngle","endAngle"],r=n[0],i=n[1],s=e.field||VS,o=e.startAngle||0,a=e.endAngle!=null?e.endAngle:2*Math.PI,u=t.source,l=u.map(s),c=l.length,f=o,d=(a-o)/dK(l),h=Mu(c),p,m,g;for(e.sort&&h.sort((y,v)=>l[y]-l[v]),p=0;p<c;++p)g=l[h[p]],m=u[h[p]],m[r]=f,m[i]=f+=g*d;return this.value=l,t.reflow(e.modified()).modifies(n)}});const TUt=5;function CUt(e){const t=e.type;return!e.bins&&(t===xx||t===yR||t===vR)}function hLe(e){return ste(e)&&e!==wh}const AUt=td(["set","modified","clear","type","scheme","schemeExtent","schemeCount","domain","domainMin","domainMid","domainMax","domainRaw","domainImplicit","nice","zero","bins","range","rangeStep","round","reverse","interpolate","interpolateGamma"]);function pLe(e){Pe.call(this,null,e),this.modified(!0)}lt(pLe,Pe,{transform(e,t){var n=t.dataflow,r=this.value,i=IUt(e);(!r||i!==r.type)&&(this.value=r=gr(i)());for(i in e)if(!AUt[i]){if(i==="padding"&&hLe(r.type))continue;_n(r[i])?r[i](e[i]):n.warn("Unsupported scale property: "+i)}return OUt(r,e,DUt(r,e,RUt(r,e,n))),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function IUt(e){var t=e.type,n="",r;return t===wh?wh+"-"+xx:(kUt(e)&&(r=e.rawDomain?e.rawDomain.length:e.domain?e.domain.length+ +(e.domainMid!=null):0,n=r===2?wh+"-":r===3?XS+"-":""),(n+t||xx).toLowerCase())}function kUt(e){const t=e.type;return ste(t)&&t!==fb&&t!==db&&(e.scheme||e.range&&e.range.length&&e.range.every(mt))}function RUt(e,t,n){const r=NUt(e,t.domainRaw,n);if(r>-1)return r;var i=t.domain,s=e.type,o=t.zero||t.zero===void 0&&CUt(e),a,u;if(!i)return 0;if((o||t.domainMin!=null||t.domainMax!=null||t.domainMid!=null)&&(a=(i=i.slice()).length-1||1,o&&(i[0]>0&&(i[0]=0),i[a]<0&&(i[a]=0)),t.domainMin!=null&&(i[0]=t.domainMin),t.domainMax!=null&&(i[a]=t.domainMax),t.domainMid!=null)){u=t.domainMid;const l=u>i[a]?a+1:u<i[0]?0:a;l!==a&&n.warn("Scale domainMid exceeds domain min or max.",u),i.splice(l,0,u)}return hLe(s)&&t.padding&&i[0]!==Qn(i)&&(i=PUt(s,i,t.range,t.padding,t.exponent,t.constant)),e.domain(mLe(s,i,n)),s===tte&&e.unknown(t.domainImplicit?xz:void 0),t.nice&&e.nice&&e.nice(t.nice!==!0&&ute(e,t.nice)||null),i.length}function NUt(e,t,n){return t?(e.domain(mLe(e.type,t,n)),t.length):-1}function PUt(e,t,n,r,i,s){var o=Math.abs(Qn(n)-n[0]),a=o/(o-2*r),u=e===Bm?YZ(t,null,a):e===vR?dM(t,null,a,.5):e===yR?dM(t,null,a,i||1):e===hF?KZ(t,null,a,s||1):GZ(t,null,a);return t=t.slice(),t[0]=u[0],t[t.length-1]=u[1],t}function mLe(e,t,n){if(S$e(e)){var r=Math.abs(t.reduce((i,s)=>i+(s<0?-1:s>0?1:0),0));r!==t.length&&n.warn("Log scale domain includes zero: "+rt(t))}return t}function DUt(e,t,n){let r=t.bins;if(r&&!je(r)){const i=e.domain(),s=i[0],o=Qn(i),a=r.step;let u=r.start==null?s:r.start,l=r.stop==null?o:r.stop;a||Le("Scale bins parameter missing step property."),u<s&&(u=a*Math.ceil(s/a)),l>o&&(l=a*Math.floor(o/a)),r=Mu(u,l+a/2,a)}return r?e.bins=r:e.bins&&delete e.bins,e.type===nte&&(r?!t.domain&&!t.domainRaw&&(e.domain(r),n=r.length):e.bins=e.domain()),n}function OUt(e,t,n){var r=e.type,i=t.round||!1,s=t.range;if(t.rangeStep!=null)s=$Ut(r,t,n);else if(t.scheme&&(s=MUt(r,t,n),_n(s))){if(e.interpolator)return e.interpolator(s);Le(`Scale type ${r} does not support interpolating color schemes.`)}if(s&&T$e(r))return e.interpolator(gF($H(s,t.reverse),t.interpolate,t.interpolateGamma));s&&t.interpolate&&e.interpolate?e.interpolate(ote(t.interpolate,t.interpolateGamma)):_n(e.round)?e.round(i):_n(e.rangeRound)&&e.interpolate(i?Ck:eg),s&&e.range($H(s,t.reverse))}function $Ut(e,t,n){e!==v$e&&e!==_H&&Le("Only band and point scales support rangeStep.");var r=(t.paddingOuter!=null?t.paddingOuter:t.padding)||0,i=e===_H?1:(t.paddingInner!=null?t.paddingInner:t.padding)||0;return[0,t.rangeStep*ete(n,i,r)]}function MUt(e,t,n){var r=t.schemeExtent,i,s;return je(t.scheme)?s=gF(t.scheme,t.interpolate,t.interpolateGamma):(i=t.scheme.toLowerCase(),s=ate(i),s||Le(`Unrecognized scheme name: ${t.scheme}`)),n=e===mF?n+1:e===nte?n-1:e===Sx||e===pF?+t.schemeCount||TUt:n,T$e(e)?Sme(s,r,t.reverse):_n(s)?I$e(Sme(s,r),n):e===tte?s:s.slice(0,n)}function Sme(e,t,n){return _n(e)&&(t||n)?A$e(e,$H(t||[0,1],n)):e}function $H(e,t){return t?e.slice().reverse():e}function gLe(e){Pe.call(this,null,e)}lt(gLe,Pe,{transform(e,t){const n=e.modified("sort")||t.changed(t.ADD)||t.modified(e.sort.fields)||t.modified("datum");return n&&t.source.sort(i_(e.sort)),this.modified(n),t}});const Tme="zero",yLe="center",vLe="normalize",bLe=["y0","y1"];function Gte(e){Pe.call(this,null,e)}Gte.Definition={type:"Stack",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"groupby",type:"field",array:!0},{name:"sort",type:"compare"},{name:"offset",type:"enum",default:Tme,values:[Tme,yLe,vLe]},{name:"as",type:"string",array:!0,length:2,default:bLe}]};lt(Gte,Pe,{transform(e,t){var n=e.as||bLe,r=n[0],i=n[1],s=i_(e.sort),o=e.field||VS,a=e.offset===yLe?LUt:e.offset===vLe?FUt:jUt,u,l,c,f;for(u=BUt(t.source,e.groupby,s,o),l=0,c=u.length,f=u.max;l<c;++l)a(u[l],f,o,r,i);return t.reflow(e.modified()).modifies(n)}});function LUt(e,t,n,r,i){for(var s=(t-e.sum)/2,o=e.length,a=0,u;a<o;++a)u=e[a],u[r]=s,u[i]=s+=Math.abs(n(u))}function FUt(e,t,n,r,i){for(var s=1/e.sum,o=0,a=e.length,u=0,l=0,c;u<a;++u)c=e[u],c[r]=o,c[i]=o=s*(l+=Math.abs(n(c)))}function jUt(e,t,n,r,i){for(var s=0,o=0,a=e.length,u=0,l,c;u<a;++u)c=e[u],l=+n(c),l<0?(c[r]=o,c[i]=o+=l):(c[r]=s,c[i]=s+=l)}function BUt(e,t,n,r){var i=[],s=m=>m(c),o,a,u,l,c,f,d,h,p;if(t==null)i.push(e.slice());else for(o={},a=0,u=e.length;a<u;++a)c=e[a],f=t.map(s),d=o[f],d||(o[f]=d=[],i.push(d)),d.push(c);for(f=0,p=0,l=i.length;f<l;++f){for(d=i[f],a=0,h=0,u=d.length;a<u;++a)h+=Math.abs(r(d[a]));d.sum=h,h>p&&(p=h),n&&d.sort(n)}return i.max=p,i}const UUt=Object.freeze(Object.defineProperty({__proto__:null,axisticks:oLe,datajoin:aLe,encode:uLe,legendentries:lLe,linkpath:qte,pie:Wte,scale:pLe,sortitems:gLe,stack:Gte},Symbol.toStringTag,{value:"Module"}));var zUt=Math.abs,MH=Math.cos,kM=Math.sin,VUt=1e-6,_Le=Math.PI,LH=_Le/2,Cme=HUt(2);function Ame(e){return e>1?LH:e<-1?-LH:Math.asin(e)}function HUt(e){return e>0?Math.sqrt(e):0}function qUt(e,t){var n=e*kM(t),r=30,i;do t-=i=(t+kM(t)-n)/(1+MH(t));while(zUt(i)>VUt&&--r>0);return t/2}function WUt(e,t,n){function r(i,s){return[e*i*MH(s=qUt(n,s)),t*kM(s)]}return r.invert=function(i,s){return s=Ame(s/t),[i/(e*MH(s)),Ame((2*s+kM(2*s))/n)]},r}var GUt=WUt(Cme/LH,Cme,_Le);function YUt(){return Zh(GUt).scale(169.529)}const KUt=PTe(),FH=["clipAngle","clipExtent","scale","translate","center","rotate","parallels","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];function XUt(e,t){return function n(){const r=t();return r.type=e,r.path=PTe().projection(r),r.copy=r.copy||function(){const i=n();return FH.forEach(s=>{r[s]&&i[s](r[s]())}),i.path.pointRadius(r.path.pointRadius()),i},E$e(r)}}function Yte(e,t){if(!e||typeof e!="string")throw new Error("Projection type must be a name string.");return e=e.toLowerCase(),arguments.length>1?(RM[e]=XUt(e,t),this):RM[e]||null}function wLe(e){return e&&e.path||KUt}const RM={albers:OTe,albersusa:apt,azimuthalequalarea:upt,azimuthalequidistant:lpt,conicconformal:dpt,conicequalarea:q3,conicequidistant:mpt,equalEarth:ypt,equirectangular:hpt,gnomonic:vpt,identity:bpt,mercator:cpt,mollweide:YUt,naturalEarth1:_pt,orthographic:wpt,stereographic:Ept,transversemercator:xpt};for(const e in RM)Yte(e,RM[e]);function QUt(){}const xp=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function ELe(){var e=1,t=1,n=a;function r(u,l){return l.map(c=>i(u,c))}function i(u,l){var c=[],f=[];return s(u,l,d=>{n(d,u,l),JUt(d)>0?c.push([d]):f.push(d)}),f.forEach(d=>{for(var h=0,p=c.length,m;h<p;++h)if(ZUt((m=c[h])[0],d)!==-1){m.push(d);return}}),{type:"MultiPolygon",value:l,coordinates:c}}function s(u,l,c){var f=new Array,d=new Array,h,p,m,g,y,v;for(h=p=-1,g=u[0]>=l,xp[g<<1].forEach(_);++h<e-1;)m=g,g=u[h+1]>=l,xp[m|g<<1].forEach(_);for(xp[g<<0].forEach(_);++p<t-1;){for(h=-1,g=u[p*e+e]>=l,y=u[p*e]>=l,xp[g<<1|y<<2].forEach(_);++h<e-1;)m=g,g=u[p*e+e+h+1]>=l,v=y,y=u[p*e+h+1]>=l,xp[m|g<<1|y<<2|v<<3].forEach(_);xp[g|y<<3].forEach(_)}for(h=-1,y=u[p*e]>=l,xp[y<<2].forEach(_);++h<e-1;)v=y,y=u[p*e+h+1]>=l,xp[y<<2|v<<3].forEach(_);xp[y<<3].forEach(_);function _(w){var E=[w[0][0]+h,w[0][1]+p],S=[w[1][0]+h,w[1][1]+p],T=o(E),C=o(S),A,k;(A=d[T])?(k=f[C])?(delete d[A.end],delete f[k.start],A===k?(A.ring.push(S),c(A.ring)):f[A.start]=d[k.end]={start:A.start,end:k.end,ring:A.ring.concat(k.ring)}):(delete d[A.end],A.ring.push(S),d[A.end=C]=A):(A=f[C])?(k=d[T])?(delete f[A.start],delete d[k.end],A===k?(A.ring.push(S),c(A.ring)):f[k.start]=d[A.end]={start:k.start,end:A.end,ring:k.ring.concat(A.ring)}):(delete f[A.start],A.ring.unshift(E),f[A.start=T]=A):f[T]=d[C]={start:T,end:C,ring:[E,S]}}}function o(u){return u[0]*2+u[1]*(e+1)*4}function a(u,l,c){u.forEach(f=>{var d=f[0],h=f[1],p=d|0,m=h|0,g,y=l[m*e+p];d>0&&d<e&&p===d&&(g=l[m*e+p-1],f[0]=d+(c-g)/(y-g)-.5),h>0&&h<t&&m===h&&(g=l[(m-1)*e+p],f[1]=h+(c-g)/(y-g)-.5)})}return r.contour=i,r.size=function(u){if(!arguments.length)return[e,t];var l=Math.floor(u[0]),c=Math.floor(u[1]);return l>=0&&c>=0||Le("invalid size"),e=l,t=c,r},r.smooth=function(u){return arguments.length?(n=u?a:QUt,r):n===a},r}function JUt(e){for(var t=0,n=e.length,r=e[n-1][1]*e[0][0]-e[n-1][0]*e[0][1];++t<n;)r+=e[t-1][1]*e[t][0]-e[t-1][0]*e[t][1];return r}function ZUt(e,t){for(var n=-1,r=t.length,i;++n<r;)if(i=e7t(e,t[n]))return i;return 0}function e7t(e,t){for(var n=t[0],r=t[1],i=-1,s=0,o=e.length,a=o-1;s<o;a=s++){var u=e[s],l=u[0],c=u[1],f=e[a],d=f[0],h=f[1];if(t7t(u,f,t))return 0;c>r!=h>r&&n<(d-l)*(r-c)/(h-c)+l&&(i=-i)}return i}function t7t(e,t,n){var r;return n7t(e,t,n)&&r7t(e[r=+(e[0]===t[0])],n[r],t[r])}function n7t(e,t,n){return(t[0]-e[0])*(n[1]-e[1])===(n[0]-e[0])*(t[1]-e[1])}function r7t(e,t,n){return e<=t&&t<=n||n<=t&&t<=e}function xLe(e,t,n){return function(r){var i=Fh(r),s=n?Math.min(i[0],0):i[0],o=i[1],a=o-s,u=t?W0(s,o,e):a/(e+1);return Mu(s+u,o,u)}}function Kte(e){Pe.call(this,null,e)}Kte.Definition={type:"Isocontour",metadata:{generates:!0},params:[{name:"field",type:"field"},{name:"thresholds",type:"number",array:!0},{name:"levels",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"zero",type:"boolean",default:!0},{name:"smooth",type:"boolean",default:!0},{name:"scale",type:"number",expr:!0},{name:"translate",type:"number",array:!0,expr:!0},{name:"as",type:"string",null:!0,default:"contour"}]};lt(Kte,Pe,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=t.materialize(t.SOURCE).source,i=e.field||xa,s=ELe().smooth(e.smooth!==!1),o=e.thresholds||i7t(r,i,e),a=e.as===null?null:e.as||"contour",u=[];return r.forEach(l=>{const c=i(l),f=s.size([c.width,c.height])(c.values,je(o)?o:o(c.values));s7t(f,c,l,e),f.forEach(d=>{u.push(iF(l,Er(a!=null?{[a]:d}:d)))})}),this.value&&(n.rem=this.value),this.value=n.source=n.add=u,n}});function i7t(e,t,n){const r=xLe(n.levels||10,n.nice,n.zero!==!1);return n.resolve!=="shared"?r:r(e.map(i=>ch(t(i).values)))}function s7t(e,t,n,r){let i=r.scale||t.scale,s=r.translate||t.translate;if(_n(i)&&(i=i(n,r)),_n(s)&&(s=s(n,r)),(i===1||i==null)&&!s)return;const o=(lr(i)?i:i[0])||1,a=(lr(i)?i:i[1])||1,u=s&&s[0]||0,l=s&&s[1]||0;e.forEach(SLe(t,o,a,u,l))}function SLe(e,t,n,r,i){const s=e.x1||0,o=e.y1||0,a=t*n<0;function u(f){f.forEach(l)}function l(f){a&&f.reverse(),f.forEach(c)}function c(f){f[0]=(f[0]-s)*t+r,f[1]=(f[1]-o)*n+i}return function(f){return f.coordinates.forEach(u),f}}function Ime(e,t,n){const r=e>=0?e:pee(t,n);return Math.round((Math.sqrt(4*r*r+1)-1)/2)}function sB(e){return _n(e)?e:Sa(+e)}function TLe(){var e=u=>u[0],t=u=>u[1],n=VS,r=[-1,-1],i=960,s=500,o=2;function a(u,l){const c=Ime(r[0],u,e)>>o,f=Ime(r[1],u,t)>>o,d=c?c+2:0,h=f?f+2:0,p=2*d+(i>>o),m=2*h+(s>>o),g=new Float32Array(p*m),y=new Float32Array(p*m);let v=g;u.forEach(w=>{const E=d+(+e(w)>>o),S=h+(+t(w)>>o);E>=0&&E<p&&S>=0&&S<m&&(g[E+S*p]+=+n(w))}),c>0&&f>0?(q_(p,m,g,y,c),W_(p,m,y,g,f),q_(p,m,g,y,c),W_(p,m,y,g,f),q_(p,m,g,y,c),W_(p,m,y,g,f)):c>0?(q_(p,m,g,y,c),q_(p,m,y,g,c),q_(p,m,g,y,c),v=y):f>0&&(W_(p,m,g,y,f),W_(p,m,y,g,f),W_(p,m,g,y,f),v=y);const _=l?Math.pow(2,-2*o):1/dK(v);for(let w=0,E=p*m;w<E;++w)v[w]*=_;return{values:v,scale:1<<o,width:p,height:m,x1:d,y1:h,x2:d+(i>>o),y2:h+(s>>o)}}return a.x=function(u){return arguments.length?(e=sB(u),a):e},a.y=function(u){return arguments.length?(t=sB(u),a):t},a.weight=function(u){return arguments.length?(n=sB(u),a):n},a.size=function(u){if(!arguments.length)return[i,s];var l=+u[0],c=+u[1];return l>=0&&c>=0||Le("invalid size"),i=l,s=c,a},a.cellSize=function(u){return arguments.length?((u=+u)>=1||Le("invalid cell size"),o=Math.floor(Math.log(u)/Math.LN2),a):1<<o},a.bandwidth=function(u){return arguments.length?(u=pt(u),u.length===1&&(u=[+u[0],+u[0]]),u.length!==2&&Le("invalid bandwidth"),r=u,a):r},a}function q_(e,t,n,r,i){const s=(i<<1)+1;for(let o=0;o<t;++o)for(let a=0,u=0;a<e+i;++a)a<e&&(u+=n[a+o*e]),a>=i&&(a>=s&&(u-=n[a-s+o*e]),r[a-i+o*e]=u/Math.min(a+1,e-1+s-a,s))}function W_(e,t,n,r,i){const s=(i<<1)+1;for(let o=0;o<e;++o)for(let a=0,u=0;a<t+i;++a)a<t&&(u+=n[o+a*e]),a>=i&&(a>=s&&(u-=n[o+(a-s)*e]),r[o+(a-i)*e]=u/Math.min(a+1,t-1+s-a,s))}function Xte(e){Pe.call(this,null,e)}Xte.Definition={type:"KDE2D",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"weight",type:"field"},{name:"groupby",type:"field",array:!0},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number",array:!0,length:2},{name:"counts",type:"boolean",default:!1},{name:"as",type:"string",default:"grid"}]};const o7t=["x","y","weight","size","cellSize","bandwidth"];function CLe(e,t){return o7t.forEach(n=>t[n]!=null?e[n](t[n]):0),e}lt(Xte,Pe,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=t.materialize(t.SOURCE).source,i=a7t(r,e.groupby),s=(e.groupby||[]).map(Ki),o=CLe(TLe(),e),a=e.as||"grid",u=[];function l(c,f){for(let d=0;d<s.length;++d)c[s[d]]=f[d];return c}return u=i.map(c=>Er(l({[a]:o(c,e.counts)},c.dims))),this.value&&(n.rem=this.value),this.value=n.source=n.add=u,n}});function a7t(e,t){var n=[],r=c=>c(a),i,s,o,a,u,l;if(t==null)n.push(e);else for(i={},s=0,o=e.length;s<o;++s)a=e[s],u=t.map(r),l=i[u],l||(i[u]=l=[],l.dims=u,n.push(l)),l.push(a);return n}function Qte(e){Pe.call(this,null,e)}Qte.Definition={type:"Contour",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"values",type:"number",array:!0},{name:"x",type:"field"},{name:"y",type:"field"},{name:"weight",type:"field"},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number"},{name:"count",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"thresholds",type:"number",array:!0},{name:"smooth",type:"boolean",default:!0}]};lt(Qte,Pe,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=ELe().smooth(e.smooth!==!1),i=e.values,s=e.thresholds||xLe(e.count||10,e.nice,!!i),o=e.size,a,u;return i||(i=t.materialize(t.SOURCE).source,a=CLe(TLe(),e)(i,!0),u=SLe(a,a.scale||1,a.scale||1,0,0),o=[a.width,a.height],i=a.values),s=je(s)?s:s(i),i=r.size(o)(i,s),u&&i.forEach(u),this.value&&(n.rem=this.value),this.value=n.source=n.add=(i||[]).map(Er),n}});const jH="Feature",Jte="FeatureCollection",u7t="MultiPoint";function Zte(e){Pe.call(this,null,e)}Zte.Definition={type:"GeoJSON",metadata:{},params:[{name:"fields",type:"field",array:!0,length:2},{name:"geojson",type:"field"}]};lt(Zte,Pe,{transform(e,t){var n=this._features,r=this._points,i=e.fields,s=i&&i[0],o=i&&i[1],a=e.geojson||!i&&xa,u=t.ADD,l;l=e.modified()||t.changed(t.REM)||t.modified(ga(a))||s&&t.modified(ga(s))||o&&t.modified(ga(o)),(!this.value||l)&&(u=t.SOURCE,this._features=n=[],this._points=r=[]),a&&t.visit(u,c=>n.push(a(c))),s&&o&&(t.visit(u,c=>{var f=s(c),d=o(c);f!=null&&d!=null&&(f=+f)===f&&(d=+d)===d&&r.push([f,d])}),n=n.concat({type:jH,geometry:{type:u7t,coordinates:r}})),this.value={type:Jte,features:n}}});function ene(e){Pe.call(this,null,e)}ene.Definition={type:"GeoPath",metadata:{modifies:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"path"}]};lt(ene,Pe,{transform(e,t){var n=t.fork(t.ALL),r=this.value,i=e.field||xa,s=e.as||"path",o=n.SOURCE;!r||e.modified()?(this.value=r=wLe(e.projection),n.materialize().reflow()):o=i===xa||t.modified(i.fields)?n.ADD_MOD:n.ADD;const a=l7t(r,e.pointRadius);return n.visit(o,u=>u[s]=r(i(u))),r.pointRadius(a),n.modifies(s)}});function l7t(e,t){const n=e.pointRadius();return e.context(null),t!=null&&e.pointRadius(t),n}function tne(e){Pe.call(this,null,e)}tne.Definition={type:"GeoPoint",metadata:{modifies:!0},params:[{name:"projection",type:"projection",required:!0},{name:"fields",type:"field",array:!0,required:!0,length:2},{name:"as",type:"string",array:!0,length:2,default:["x","y"]}]};lt(tne,Pe,{transform(e,t){var n=e.projection,r=e.fields[0],i=e.fields[1],s=e.as||["x","y"],o=s[0],a=s[1],u;function l(c){const f=n([r(c),i(c)]);f?(c[o]=f[0],c[a]=f[1]):(c[o]=void 0,c[a]=void 0)}return e.modified()?t=t.materialize().reflow(!0).visit(t.SOURCE,l):(u=t.modified(r.fields)||t.modified(i.fields),t.visit(u?t.ADD_MOD:t.ADD,l)),t.modifies(s)}});function nne(e){Pe.call(this,null,e)}nne.Definition={type:"GeoShape",metadata:{modifies:!0,nomod:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field",default:"datum"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"shape"}]};lt(nne,Pe,{transform(e,t){var n=t.fork(t.ALL),r=this.value,i=e.as||"shape",s=n.ADD;return(!r||e.modified())&&(this.value=r=c7t(wLe(e.projection),e.field||Fc("datum"),e.pointRadius),n.materialize().reflow(),s=n.SOURCE),n.visit(s,o=>o[i]=r),n.modifies(i)}});function c7t(e,t,n){const r=n==null?i=>e(t(i)):i=>{var s=e.pointRadius(),o=e.pointRadius(n)(t(i));return e.pointRadius(s),o};return r.context=i=>(e.context(i),r),r}function rne(e){Pe.call(this,[],e),this.generator=Bht()}rne.Definition={type:"Graticule",metadata:{changes:!0,generates:!0},params:[{name:"extent",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMajor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMinor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"step",type:"number",array:!0,length:2},{name:"stepMajor",type:"number",array:!0,length:2,default:[90,360]},{name:"stepMinor",type:"number",array:!0,length:2,default:[10,10]},{name:"precision",type:"number",default:2.5}]};lt(rne,Pe,{transform(e,t){var n=this.value,r=this.generator,i;if(!n.length||e.modified())for(const s in e)_n(r[s])&&r[s](e[s]);return i=r(),n.length?t.mod.push(C3e(n[0],i)):t.add.push(Er(i)),n[0]=i,t}});function ine(e){Pe.call(this,null,e)}ine.Definition={type:"heatmap",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"color",type:"string",expr:!0},{name:"opacity",type:"number",expr:!0},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"as",type:"string",default:"image"}]};lt(ine,Pe,{transform(e,t){if(!t.changed()&&!e.modified())return t.StopPropagation;var n=t.materialize(t.SOURCE).source,r=e.resolve==="shared",i=e.field||xa,s=d7t(e.opacity,e),o=f7t(e.color,e),a=e.as||"image",u={$x:0,$y:0,$value:0,$max:r?ch(n.map(l=>ch(i(l).values))):0};return n.forEach(l=>{const c=i(l),f=bn({},l,u);r||(f.$max=ch(c.values||[])),l[a]=h7t(c,f,o.dep?o:Sa(o(f)),s.dep?s:Sa(s(f)))}),t.reflow(!0).modifies(a)}});function f7t(e,t){let n;return _n(e)?(n=r=>G0(e(r,t)),n.dep=ALe(e)):n=Sa(G0(e||"#888")),n}function d7t(e,t){let n;return _n(e)?(n=r=>e(r,t),n.dep=ALe(e)):e?n=Sa(e):(n=r=>r.$value/r.$max||0,n.dep=!0),n}function ALe(e){if(!_n(e))return!1;const t=td(ga(e));return t.$x||t.$y||t.$value||t.$max}function h7t(e,t,n,r){const i=e.width,s=e.height,o=e.x1||0,a=e.y1||0,u=e.x2||i,l=e.y2||s,c=e.values,f=c?g=>c[g]:Kg,d=O0(u-o,l-a),h=d.getContext("2d"),p=h.getImageData(0,0,u-o,l-a),m=p.data;for(let g=a,y=0;g<l;++g){t.$y=g-a;for(let v=o,_=g*i;v<u;++v,y+=4){t.$x=v-o,t.$value=f(v+_);const w=n(t);m[y+0]=w.r,m[y+1]=w.g,m[y+2]=w.b,m[y+3]=~~(255*r(t))}}return h.putImageData(p,0,0),d}function ILe(e){Pe.call(this,null,e),this.modified(!0)}lt(ILe,Pe,{transform(e,t){let n=this.value;return!n||e.modified("type")?(this.value=n=m7t(e.type),FH.forEach(r=>{e[r]!=null&&kme(n,r,e[r])})):FH.forEach(r=>{e.modified(r)&&kme(n,r,e[r])}),e.pointRadius!=null&&n.path.pointRadius(e.pointRadius),e.fit&&p7t(n,e),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function p7t(e,t){const n=g7t(t.fit);t.extent?e.fitExtent(t.extent,n):t.size&&e.fitSize(t.size,n)}function m7t(e){const t=Yte((e||"mercator").toLowerCase());return t||Le("Unrecognized projection type: "+e),t()}function kme(e,t,n){_n(e[t])&&e[t](n)}function g7t(e){return e=pt(e),e.length===1?e[0]:{type:Jte,features:e.reduce((t,n)=>t.concat(y7t(n)),[])}}function y7t(e){return e.type===Jte?e.features:pt(e).filter(t=>t!=null).map(t=>t.type===jH?t:{type:jH,geometry:t})}const v7t=Object.freeze(Object.defineProperty({__proto__:null,contour:Qte,geojson:Zte,geopath:ene,geopoint:tne,geoshape:nne,graticule:rne,heatmap:ine,isocontour:Kte,kde2d:Xte,projection:ILe},Symbol.toStringTag,{value:"Module"})),Rme={center:Rdt,collide:Kdt,nbody:oht,link:Qdt,x:aht,y:uht},eC="forces",BH=["alpha","alphaMin","alphaTarget","velocityDecay","forces"],b7t=["static","iterations"],kLe=["x","y","vx","vy"];function sne(e){Pe.call(this,null,e)}sne.Definition={type:"Force",metadata:{modifies:!0},params:[{name:"static",type:"boolean",default:!1},{name:"restart",type:"boolean",default:!1},{name:"iterations",type:"number",default:300},{name:"alpha",type:"number",default:1},{name:"alphaMin",type:"number",default:.001},{name:"alphaTarget",type:"number",default:0},{name:"velocityDecay",type:"number",default:.4},{name:"forces",type:"param",array:!0,params:[{key:{force:"center"},params:[{name:"x",type:"number",default:0},{name:"y",type:"number",default:0}]},{key:{force:"collide"},params:[{name:"radius",type:"number",expr:!0},{name:"strength",type:"number",default:.7},{name:"iterations",type:"number",default:1}]},{key:{force:"nbody"},params:[{name:"strength",type:"number",default:-30,expr:!0},{name:"theta",type:"number",default:.9},{name:"distanceMin",type:"number",default:1},{name:"distanceMax",type:"number"}]},{key:{force:"link"},params:[{name:"links",type:"data"},{name:"id",type:"field"},{name:"distance",type:"number",default:30,expr:!0},{name:"strength",type:"number",expr:!0},{name:"iterations",type:"number",default:1}]},{key:{force:"x"},params:[{name:"strength",type:"number",default:.1},{name:"x",type:"field"}]},{key:{force:"y"},params:[{name:"strength",type:"number",default:.1},{name:"y",type:"field"}]}]},{name:"as",type:"string",array:!0,modify:!1,default:kLe}]};lt(sne,Pe,{transform(e,t){var n=this.value,r=t.changed(t.ADD_REM),i=e.modified(BH),s=e.iterations||300;if(n?(r&&(t.modifies("index"),n.nodes(t.source)),(i||t.changed(t.MOD))&&RLe(n,e,0,t)):(this.value=n=w7t(t.source,e),n.on("tick",_7t(t.dataflow,this)),e.static||(r=!0,n.tick()),t.modifies("index")),i||r||e.modified(b7t)||t.changed()&&e.restart){if(n.alpha(Math.max(n.alpha(),e.alpha||1)).alphaDecay(1-Math.pow(n.alphaMin(),1/s)),e.static)for(n.stop();--s>=0;)n.tick();else if(n.stopped()&&n.restart(),!r)return t.StopPropagation}return this.finish(e,t)},finish(e,t){const n=t.dataflow;for(let a=this._argops,u=0,l=a.length,c;u<l;++u)if(c=a[u],!(c.name!==eC||c.op._argval.force!=="link")){for(var r=c.op._argops,i=0,s=r.length,o;i<s;++i)if(r[i].name==="links"&&(o=r[i].op.source)){n.pulse(o,n.changeset().reflow());break}}return t.reflow(e.modified()).modifies(kLe)}});function _7t(e,t){return()=>e.touch(t).run()}function w7t(e,t){const n=sht(e),r=n.stop,i=n.restart;let s=!1;return n.stopped=()=>s,n.restart=()=>(s=!1,i()),n.stop=()=>(s=!0,r()),RLe(n,t,!0).on("end",()=>s=!0)}function RLe(e,t,n,r){var i=pt(t.forces),s,o,a,u;for(s=0,o=BH.length;s<o;++s)a=BH[s],a!==eC&&t.modified(a)&&e[a](t[a]);for(s=0,o=i.length;s<o;++s)u=eC+s,a=n||t.modified(eC,s)?x7t(i[s]):r&&E7t(i[s],r)?e.force(u):null,a&&e.force(u,a);for(o=e.numForces||0;s<o;++s)e.force(eC+s,null);return e.numForces=i.length,e}function E7t(e,t){var n,r;for(n in e)if(_n(r=e[n])&&t.modified(ga(r)))return 1;return 0}function x7t(e){var t,n;jt(Rme,e.force)||Le("Unrecognized force: "+e.force),t=Rme[e.force]();for(n in e)_n(t[n])&&S7t(t[n],e[n],e);return t}function S7t(e,t,n){e(_n(t)?r=>t(r,n):t)}const T7t=Object.freeze(Object.defineProperty({__proto__:null,force:sne},Symbol.toStringTag,{value:"Module"}));function UH(e,t,n){const r={};return e.each(i=>{const s=i.data;n(s)&&(r[t(s)]=i)}),e.lookup=r,e}function one(e){Pe.call(this,null,e)}one.Definition={type:"Nest",metadata:{treesource:!0,changes:!0},params:[{name:"keys",type:"field",array:!0},{name:"generate",type:"boolean"}]};const C7t=e=>e.values;lt(one,Pe,{transform(e,t){t.source||Le("Nest transform requires an upstream data source.");var n=e.generate,r=e.modified(),i=t.clone(),s=this.value;return(!s||r||t.changed())&&(s&&s.each(o=>{o.children&&rF(o.data)&&i.rem.push(o.data)}),this.value=s=D6({values:pt(e.keys).reduce((o,a)=>(o.key(a),o),A7t()).entries(i.source)},C7t),n&&s.each(o=>{o.children&&(o=Er(o.data),i.add.push(o),i.source.push(o))}),UH(s,Lt,Lt)),i.source.root=s,i}});function A7t(){const e=[],t={entries:i=>r(n(i,0),0),key:i=>(e.push(i),t)};function n(i,s){if(s>=e.length)return i;const o=i.length,a=e[s++],u={},l={};let c=-1,f,d,h;for(;++c<o;)f=a(d=i[c])+"",(h=u[f])?h.push(d):u[f]=[d];for(f in u)l[f]=n(u[f],s);return l}function r(i,s){if(++s>e.length)return i;const o=[];for(const a in i)o.push({key:a,values:r(i[a],s)});return o}return t}function ug(e){Pe.call(this,null,e)}const I7t=(e,t)=>e.parent===t.parent?1:2;lt(ug,Pe,{transform(e,t){(!t.source||!t.source.root)&&Le(this.constructor.name+" transform requires a backing tree data source.");const n=this.layout(e.method),r=this.fields,i=t.source.root,s=e.as||r;e.field?i.sum(e.field):i.count(),e.sort&&i.sort(i_(e.sort,o=>o.data)),k7t(n,this.params,e),n.separation&&n.separation(e.separation!==!1?I7t:VS);try{this.value=n(i)}catch(o){Le(o)}return i.each(o=>R7t(o,r,s)),t.reflow(e.modified()).modifies(s).modifies("leaf")}});function k7t(e,t,n){for(let r,i=0,s=t.length;i<s;++i)r=t[i],r in n&&e[r](n[r])}function R7t(e,t,n){const r=e.data,i=t.length-1;for(let s=0;s<i;++s)r[n[s]]=e[t[s]];r[n[i]]=e.children?e.children.length:0}const zH=["x","y","r","depth","children"];function ane(e){ug.call(this,e)}ane.Definition={type:"Pack",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"radius",type:"field",default:null},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:zH.length,default:zH}]};lt(ane,ug,{layout:KTe,params:["radius","size","padding"],fields:zH});const VH=["x0","y0","x1","y1","depth","children"];function une(e){ug.call(this,e)}une.Definition={type:"Partition",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:VH.length,default:VH}]};lt(une,ug,{layout:umt,params:["size","round","padding"],fields:VH});function lne(e){Pe.call(this,null,e)}lne.Definition={type:"Stratify",metadata:{treesource:!0},params:[{name:"key",type:"field",required:!0},{name:"parentKey",type:"field",required:!0}]};lt(lne,Pe,{transform(e,t){t.source||Le("Stratify transform requires an upstream data source.");let n=this.value;const r=e.modified(),i=t.fork(t.ALL).materialize(t.SOURCE),s=!n||r||t.changed(t.ADD_REM)||t.modified(e.key.fields)||t.modified(e.parentKey.fields);return i.source=i.source.slice(),s&&(n=i.source.length?UH(lce().id(e.key).parentId(e.parentKey)(i.source),e.key,jc):UH(lce()([{}]),e.key,e.key)),i.source.root=this.value=n,i}});const Nme={tidy:vmt,cluster:Npt},HH=["x","y","depth","children"];function cne(e){ug.call(this,e)}cne.Definition={type:"Tree",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"tidy",values:["tidy","cluster"]},{name:"size",type:"number",array:!0,length:2},{name:"nodeSize",type:"number",array:!0,length:2},{name:"separation",type:"boolean",default:!0},{name:"as",type:"string",array:!0,length:HH.length,default:HH}]};lt(cne,ug,{layout(e){const t=e||"tidy";if(jt(Nme,t))return Nme[t]();Le("Unrecognized Tree layout method: "+t)},params:["size","nodeSize"],fields:HH});function fne(e){Pe.call(this,[],e)}fne.Definition={type:"TreeLinks",metadata:{tree:!0,generates:!0,changes:!0},params:[]};lt(fne,Pe,{transform(e,t){const n=this.value,r=t.source&&t.source.root,i=t.fork(t.NO_SOURCE),s={};return r||Le("TreeLinks transform requires a tree data source."),t.changed(t.ADD_REM)?(i.rem=n,t.visit(t.SOURCE,o=>s[Lt(o)]=1),r.each(o=>{const a=o.data,u=o.parent&&o.parent.data;u&&s[Lt(a)]&&s[Lt(u)]&&i.add.push(Er({source:u,target:a}))}),this.value=i.add):t.changed(t.MOD)&&(t.visit(t.MOD,o=>s[Lt(o)]=1),n.forEach(o=>{(s[Lt(o.source)]||s[Lt(o.target)])&&i.mod.push(o)})),i}});const Pme={binary:_mt,dice:Rk,slice:O6,slicedice:wmt,squarify:ZTe,resquarify:Emt},qH=["x0","y0","x1","y1","depth","children"];function dne(e){ug.call(this,e)}dne.Definition={type:"Treemap",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"squarify",values:["squarify","resquarify","binary","dice","slice","slicedice"]},{name:"padding",type:"number",default:0},{name:"paddingInner",type:"number",default:0},{name:"paddingOuter",type:"number",default:0},{name:"paddingTop",type:"number",default:0},{name:"paddingRight",type:"number",default:0},{name:"paddingBottom",type:"number",default:0},{name:"paddingLeft",type:"number",default:0},{name:"ratio",type:"number",default:1.618033988749895},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:qH.length,default:qH}]};lt(dne,ug,{layout(){const e=bmt();return e.ratio=t=>{const n=e.tile();n.ratio&&e.tile(n.ratio(t))},e.method=t=>{jt(Pme,t)?e.tile(Pme[t]):Le("Unrecognized Treemap layout method: "+t)},e},params:["method","ratio","size","round","padding","paddingInner","paddingOuter","paddingTop","paddingRight","paddingBottom","paddingLeft"],fields:qH});const N7t=Object.freeze(Object.defineProperty({__proto__:null,nest:one,pack:ane,partition:une,stratify:lne,tree:cne,treelinks:fne,treemap:dne},Symbol.toStringTag,{value:"Module"})),oB=4278190080;function P7t(e,t){const n=e.bitmap();return(t||[]).forEach(r=>n.set(e(r.boundary[0]),e(r.boundary[3]))),[n,void 0]}function D7t(e,t,n,r,i){const s=e.width,o=e.height,a=r||i,u=O0(s,o).getContext("2d"),l=O0(s,o).getContext("2d"),c=a&&O0(s,o).getContext("2d");n.forEach(C=>oO(u,C,!1)),oO(l,t,!1),a&&oO(c,t,!0);const f=aB(u,s,o),d=aB(l,s,o),h=a&&aB(c,s,o),p=e.bitmap(),m=a&&e.bitmap();let g,y,v,_,w,E,S,T;for(y=0;y<o;++y)for(g=0;g<s;++g)w=y*s+g,E=f[w]&oB,T=d[w]&oB,S=a&&h[w]&oB,(E||S||T)&&(v=e(g),_=e(y),!i&&(E||T)&&p.set(v,_),a&&(E||S)&&m.set(v,_));return[p,m]}function aB(e,t,n){return new Uint32Array(e.getImageData(0,0,t,n).data.buffer)}function oO(e,t,n){if(!t.length)return;const r=t[0].mark.marktype;r==="group"?t.forEach(i=>{i.items.forEach(s=>oO(e,s.items,n))}):Gl[r].draw(e,{items:n?t.map(O7t):t})}function O7t(e){const t=iF(e,{});return t.stroke&&t.strokeOpacity!==0||t.fill&&t.fillOpacity!==0?{...t,strokeOpacity:1,stroke:"#000",fillOpacity:0}:t}const Sp=5,Oa=31,FI=32,Fg=new Uint32Array(FI+1),Ef=new Uint32Array(FI+1);Ef[0]=0;Fg[0]=~Ef[0];for(let e=1;e<=FI;++e)Ef[e]=Ef[e-1]<<1|1,Fg[e]=~Ef[e];function $7t(e,t){const n=new Uint32Array(~~((e*t+FI)/FI));function r(s,o){n[s]|=o}function i(s,o){n[s]&=o}return{array:n,get:(s,o)=>{const a=o*e+s;return n[a>>>Sp]&1<<(a&Oa)},set:(s,o)=>{const a=o*e+s;r(a>>>Sp,1<<(a&Oa))},clear:(s,o)=>{const a=o*e+s;i(a>>>Sp,~(1<<(a&Oa)))},getRange:(s,o,a,u)=>{let l=u,c,f,d,h;for(;l>=o;--l)if(c=l*e+s,f=l*e+a,d=c>>>Sp,h=f>>>Sp,d===h){if(n[d]&Fg[c&Oa]&Ef[(f&Oa)+1])return!0}else{if(n[d]&Fg[c&Oa]||n[h]&Ef[(f&Oa)+1])return!0;for(let p=d+1;p<h;++p)if(n[p])return!0}return!1},setRange:(s,o,a,u)=>{let l,c,f,d,h;for(;o<=u;++o)if(l=o*e+s,c=o*e+a,f=l>>>Sp,d=c>>>Sp,f===d)r(f,Fg[l&Oa]&Ef[(c&Oa)+1]);else for(r(f,Fg[l&Oa]),r(d,Ef[(c&Oa)+1]),h=f+1;h<d;++h)r(h,4294967295)},clearRange:(s,o,a,u)=>{let l,c,f,d,h;for(;o<=u;++o)if(l=o*e+s,c=o*e+a,f=l>>>Sp,d=c>>>Sp,f===d)i(f,Ef[l&Oa]|Fg[(c&Oa)+1]);else for(i(f,Ef[l&Oa]),i(d,Fg[(c&Oa)+1]),h=f+1;h<d;++h)i(h,0)},outOfBounds:(s,o,a,u)=>s<0||o<0||u>=t||a>=e}}function M7t(e,t,n){const r=Math.max(1,Math.sqrt(e*t/1e6)),i=~~((e+2*n+r)/r),s=~~((t+2*n+r)/r),o=a=>~~((a+n)/r);return o.invert=a=>a*r-n,o.bitmap=()=>$7t(i,s),o.ratio=r,o.padding=n,o.width=e,o.height=t,o}function L7t(e,t,n,r){const i=e.width,s=e.height;return function(o){const a=o.datum.datum.items[r].items,u=a.length,l=o.datum.fontSize,c=Dl.width(o.datum,o.datum.text);let f=0,d,h,p,m,g,y,v;for(let _=0;_<u;++_)d=a[_].x,p=a[_].y,h=a[_].x2===void 0?d:a[_].x2,m=a[_].y2===void 0?p:a[_].y2,g=(d+h)/2,y=(p+m)/2,v=Math.abs(h-d+m-p),v>=f&&(f=v,o.x=g,o.y=y);return g=c/2,y=l/2,d=o.x-g,h=o.x+g,p=o.y-y,m=o.y+y,o.align="center",d<0&&h<=i?o.align="left":0<=d&&i<h&&(o.align="right"),o.baseline="middle",p<0&&m<=s?o.baseline="top":0<=p&&s<m&&(o.baseline="bottom"),!0}}function NM(e,t,n,r,i,s){let o=n/2;return e-o<0||e+o>i||t-(o=r/2)<0||t+o>s}function c0(e,t,n,r,i,s,o,a){const u=i*s/(r*2),l=e(t-u),c=e(t+u),f=e(n-(s=s/2)),d=e(n+s);return o.outOfBounds(l,f,c,d)||o.getRange(l,f,c,d)||a&&a.getRange(l,f,c,d)}function F7t(e,t,n,r){const i=e.width,s=e.height,o=t[0],a=t[1];function u(l,c,f,d,h){const p=e.invert(l),m=e.invert(c);let g=f,y=s,v;if(!NM(p,m,d,h,i,s)&&!c0(e,p,m,h,d,g,o,a)&&!c0(e,p,m,h,d,h,o,null)){for(;y-g>=1;)v=(g+y)/2,c0(e,p,m,h,d,v,o,a)?y=v:g=v;if(g>f)return[p,m,g,!0]}}return function(l){const c=l.datum.datum.items[r].items,f=c.length,d=l.datum.fontSize,h=Dl.width(l.datum,l.datum.text);let p=n?d:0,m=!1,g=!1,y=0,v,_,w,E,S,T,C,A,k,N,O,D,$,F,M,B,U;for(let H=0;H<f;++H){for(v=c[H].x,w=c[H].y,_=c[H].x2===void 0?v:c[H].x2,E=c[H].y2===void 0?w:c[H].y2,v>_&&(U=v,v=_,_=U),w>E&&(U=w,w=E,E=U),k=e(v),O=e(_),N=~~((k+O)/2),D=e(w),F=e(E),$=~~((D+F)/2),C=N;C>=k;--C)for(A=$;A>=D;--A)B=u(C,A,p,h,d),B&&([l.x,l.y,p,m]=B);for(C=N;C<=O;++C)for(A=$;A<=F;++A)B=u(C,A,p,h,d),B&&([l.x,l.y,p,m]=B);!m&&!n&&(M=Math.abs(_-v+E-w),S=(v+_)/2,T=(w+E)/2,M>=y&&!NM(S,T,h,d,i,s)&&!c0(e,S,T,d,h,d,o,null)&&(y=M,l.x=S,l.y=T,g=!0))}return m||g?(S=h/2,T=d/2,o.setRange(e(l.x-S),e(l.y-T),e(l.x+S),e(l.y+T)),l.align="center",l.baseline="middle",!0):!1}}const j7t=[-1,-1,1,1],B7t=[-1,1,-1,1];function U7t(e,t,n,r){const i=e.width,s=e.height,o=t[0],a=t[1],u=e.bitmap();return function(l){const c=l.datum.datum.items[r].items,f=c.length,d=l.datum.fontSize,h=Dl.width(l.datum,l.datum.text),p=[];let m=n?d:0,g=!1,y=!1,v=0,_,w,E,S,T,C,A,k,N,O,D,$;for(let F=0;F<f;++F){for(_=c[F].x,E=c[F].y,w=c[F].x2===void 0?_:c[F].x2,S=c[F].y2===void 0?E:c[F].y2,p.push([e((_+w)/2),e((E+S)/2)]);p.length;)if([A,k]=p.pop(),!(o.get(A,k)||a.get(A,k)||u.get(A,k))){u.set(A,k);for(let M=0;M<4;++M)T=A+j7t[M],C=k+B7t[M],u.outOfBounds(T,C,T,C)||p.push([T,C]);if(T=e.invert(A),C=e.invert(k),N=m,O=s,!NM(T,C,h,d,i,s)&&!c0(e,T,C,d,h,N,o,a)&&!c0(e,T,C,d,h,d,o,null)){for(;O-N>=1;)D=(N+O)/2,c0(e,T,C,d,h,D,o,a)?O=D:N=D;N>m&&(l.x=T,l.y=C,m=N,g=!0)}}!g&&!n&&($=Math.abs(w-_+S-E),T=(_+w)/2,C=(E+S)/2,$>=v&&!NM(T,C,h,d,i,s)&&!c0(e,T,C,d,h,d,o,null)&&(v=$,l.x=T,l.y=C,y=!0))}return g||y?(T=h/2,C=d/2,o.setRange(e(l.x-T),e(l.y-C),e(l.x+T),e(l.y+C)),l.align="center",l.baseline="middle",!0):!1}}const z7t=["right","center","left"],V7t=["bottom","middle","top"];function H7t(e,t,n,r){const i=e.width,s=e.height,o=t[0],a=t[1],u=r.length;return function(l){const c=l.boundary,f=l.datum.fontSize;if(c[2]<0||c[5]<0||c[0]>i||c[3]>s)return!1;let d=l.textWidth??0,h,p,m,g,y,v,_,w,E,S,T,C,A,k,N;for(let O=0;O<u;++O){if(h=(n[O]&3)-1,p=(n[O]>>>2&3)-1,m=h===0&&p===0||r[O]<0,g=h&&p?Math.SQRT1_2:1,y=r[O]<0?-1:1,v=c[1+h]+r[O]*h*g,T=c[4+p]+y*f*p/2+r[O]*p*g,w=T-f/2,E=T+f/2,C=e(v),k=e(w),N=e(E),!d)if(Dme(C,C,k,N,o,a,v,v,w,E,c,m))d=Dl.width(l.datum,l.datum.text);else continue;if(S=v+y*d*h/2,v=S-d/2,_=S+d/2,C=e(v),A=e(_),Dme(C,A,k,N,o,a,v,_,w,E,c,m))return l.x=h?h*y<0?_:v:S,l.y=p?p*y<0?E:w:T,l.align=z7t[h*y+1],l.baseline=V7t[p*y+1],o.setRange(C,k,A,N),!0}return!1}}function Dme(e,t,n,r,i,s,o,a,u,l,c,f){return!(i.outOfBounds(e,n,t,r)||(f&&s||i).getRange(e,n,t,r))}const uB=0,lB=4,cB=8,fB=0,dB=1,hB=2,q7t={"top-left":uB+fB,top:uB+dB,"top-right":uB+hB,left:lB+fB,middle:lB+dB,right:lB+hB,"bottom-left":cB+fB,bottom:cB+dB,"bottom-right":cB+hB},W7t={naive:L7t,"reduced-search":F7t,floodfill:U7t};function G7t(e,t,n,r,i,s,o,a,u,l,c){if(!e.length)return e;const f=Math.max(r.length,i.length),d=Y7t(r,f),h=K7t(i,f),p=X7t(e[0].datum),m=p==="group"&&e[0].datum.items[u].marktype,g=m==="area",y=Q7t(p,m,a,u),v=l===null||l===1/0,_=g&&c==="naive";let w=-1,E=-1;const S=e.map(k=>{const N=v?Dl.width(k,k.text):void 0;return w=Math.max(w,N),E=Math.max(E,k.fontSize),{datum:k,opacity:0,x:void 0,y:void 0,align:void 0,baseline:void 0,boundary:y(k),textWidth:N}});l=l===null||l===1/0?Math.max(w,E)+Math.max(...r):l;const T=M7t(t[0],t[1],l);let C;if(!_){n&&S.sort((O,D)=>n(O.datum,D.datum));let k=!1;for(let O=0;O<h.length&&!k;++O)k=h[O]===5||d[O]<0;const N=(p&&o||g)&&e.map(O=>O.datum);C=s.length||N?D7t(T,N||[],s,k,g):P7t(T,o&&S)}const A=g?W7t[c](T,C,o,u):H7t(T,C,h,d);return S.forEach(k=>k.opacity=+A(k)),S}function Y7t(e,t){const n=new Float64Array(t),r=e.length;for(let i=0;i<r;++i)n[i]=e[i]||0;for(let i=r;i<t;++i)n[i]=n[r-1];return n}function K7t(e,t){const n=new Int8Array(t),r=e.length;for(let i=0;i<r;++i)n[i]|=q7t[e[i]];for(let i=r;i<t;++i)n[i]=n[r-1];return n}function X7t(e){return e&&e.mark&&e.mark.marktype}function Q7t(e,t,n,r){const i=s=>[s.x,s.x,s.x,s.y,s.y,s.y];return e?e==="line"||e==="area"?s=>i(s.datum):t==="line"?s=>{const o=s.datum.items[r].items;return i(o.length?o[n==="start"?0:o.length-1]:{x:NaN,y:NaN})}:s=>{const o=s.datum.bounds;return[o.x1,(o.x1+o.x2)/2,o.x2,o.y1,(o.y1+o.y2)/2,o.y2]}:i}const WH=["x","y","opacity","align","baseline"],NLe=["top-left","left","bottom-left","top","bottom","top-right","right","bottom-right"];function hne(e){Pe.call(this,null,e)}hne.Definition={type:"Label",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"sort",type:"compare"},{name:"anchor",type:"string",array:!0,default:NLe},{name:"offset",type:"number",array:!0,default:[1]},{name:"padding",type:"number",default:0,null:!0},{name:"lineAnchor",type:"string",values:["start","end"],default:"end"},{name:"markIndex",type:"number",default:0},{name:"avoidBaseMark",type:"boolean",default:!0},{name:"avoidMarks",type:"data",array:!0},{name:"method",type:"string",default:"naive"},{name:"as",type:"string",array:!0,length:WH.length,default:WH}]};lt(hne,Pe,{transform(e,t){function n(s){const o=e[s];return _n(o)&&t.modified(o.fields)}const r=e.modified();if(!(r||t.changed(t.ADD_REM)||n("sort")))return;(!e.size||e.size.length!==2)&&Le("Size parameter should be specified as a [width, height] array.");const i=e.as||WH;return G7t(t.materialize(t.SOURCE).source||[],e.size,e.sort,pt(e.offset==null?1:e.offset),pt(e.anchor||NLe),e.avoidMarks||[],e.avoidBaseMark!==!1,e.lineAnchor||"end",e.markIndex||0,e.padding===void 0?0:e.padding,e.method||"naive").forEach(s=>{const o=s.datum;o[i[0]]=s.x,o[i[1]]=s.y,o[i[2]]=s.opacity,o[i[3]]=s.align,o[i[4]]=s.baseline}),t.reflow(r).modifies(i)}});const J7t=Object.freeze(Object.defineProperty({__proto__:null,label:hne},Symbol.toStringTag,{value:"Module"}));function PLe(e,t){var n=[],r=function(c){return c(a)},i,s,o,a,u,l;if(t==null)n.push(e);else for(i={},s=0,o=e.length;s<o;++s)a=e[s],u=t.map(r),l=i[u],l||(i[u]=l=[],l.dims=u,n.push(l)),l.push(a);return n}function pne(e){Pe.call(this,null,e)}pne.Definition={type:"Loess",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"bandwidth",type:"number",default:.3},{name:"as",type:"string",array:!0}]};lt(pne,Pe,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=PLe(r,e.groupby),s=(e.groupby||[]).map(Ki),o=s.length,a=e.as||[Ki(e.x),Ki(e.y)],u=[];i.forEach(l=>{H3e(l,e.x,e.y,e.bandwidth||.3).forEach(c=>{const f={};for(let d=0;d<o;++d)f[s[d]]=l.dims[d];f[a[0]]=c[0],f[a[1]]=c[1],u.push(Er(f))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=u}return n}});const GH={constant:Cee,linear:Aee,log:B3e,exp:U3e,pow:z3e,quad:Iee,poly:V3e},Z7t=(e,t)=>e==="poly"?t:e==="quad"?2:1;function mne(e){Pe.call(this,null,e)}mne.Definition={type:"Regression",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"string",default:"linear",values:Object.keys(GH)},{name:"order",type:"number",default:3},{name:"extent",type:"number",array:!0,length:2},{name:"params",type:"boolean",default:!1},{name:"as",type:"string",array:!0}]};lt(mne,Pe,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=PLe(r,e.groupby),s=(e.groupby||[]).map(Ki),o=e.method||"linear",a=e.order==null?3:e.order,u=Z7t(o,a),l=e.as||[Ki(e.x),Ki(e.y)],c=GH[o],f=[];let d=e.extent;jt(GH,o)||Le("Invalid regression method: "+o),d!=null&&o==="log"&&d[0]<=0&&(t.dataflow.warn("Ignoring extent with values <= 0 for log regression."),d=null),i.forEach(h=>{if(h.length<=u){t.dataflow.warn("Skipping regression with more parameters than data points.");return}const m=c(h,e.x,e.y,a);if(e.params){f.push(Er({keys:h.dims,coef:m.coef,rSquared:m.rSquared}));return}const g=d||Fh(h,e.x),y=v=>{const _={};for(let w=0;w<s.length;++w)_[s[w]]=h.dims[w];_[l[0]]=v[0],_[l[1]]=v[1],f.push(Er(_))};o==="linear"||o==="constant"?g.forEach(v=>y([v,m.predict(v)])):fF(m.predict,g,25,200).forEach(y)}),this.value&&(n.rem=this.value),this.value=n.add=n.source=f}return n}});const ezt=Object.freeze(Object.defineProperty({__proto__:null,loess:pne,regression:mne},Symbol.toStringTag,{value:"Module"}));function gne(e){Pe.call(this,null,e)}gne.Definition={type:"Voronoi",metadata:{modifies:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"size",type:"number",array:!0,length:2},{name:"extent",type:"array",array:!0,length:2,default:[[-1e5,-1e5],[1e5,1e5]],content:{type:"number",array:!0,length:2}},{name:"as",type:"string",default:"path"}]};const tzt=[-1e5,-1e5,1e5,1e5];lt(gne,Pe,{transform(e,t){const n=e.as||"path",r=t.source;if(!r||!r.length)return t;let i=e.size;i=i?[0,0,i[0],i[1]]:(i=e.extent)?[i[0][0],i[0][1],i[1][0],i[1][1]]:tzt;const s=this.value=AK.from(r,e.x,e.y).voronoi(i);for(let o=0,a=r.length;o<a;++o){const u=s.cellPolygon(o);r[o][n]=u&&!rzt(u)?nzt(u):null}return t.reflow(e.modified()).modifies(n)}});function nzt(e){const t=e[0][0],n=e[0][1];let r=e.length-1;for(;e[r][0]===t&&e[r][1]===n;--r);return"M"+e.slice(0,r+1).join("L")+"Z"}function rzt(e){return e.length===2&&e[0][0]===e[1][0]&&e[0][1]===e[1][1]}const izt=Object.freeze(Object.defineProperty({__proto__:null,voronoi:gne},Symbol.toStringTag,{value:"Module"}));var pB=Math.PI/180,tC=64,aO=2048;function szt(){var e=[256,256],t,n,r,i,s,o,a,u=DLe,l=[],c=Math.random,f={};f.layout=function(){for(var p=d(O0()),m=fzt((e[0]>>5)*e[1]),g=null,y=l.length,v=-1,_=[],w=l.map(S=>({text:t(S),font:n(S),style:i(S),weight:s(S),rotate:o(S),size:~~(r(S)+1e-14),padding:a(S),xoff:0,yoff:0,x1:0,y1:0,x0:0,y0:0,hasText:!1,sprite:null,datum:S})).sort((S,T)=>T.size-S.size);++v<y;){var E=w[v];E.x=e[0]*(c()+.5)>>1,E.y=e[1]*(c()+.5)>>1,ozt(p,E,w,v),E.hasText&&h(m,E,g)&&(_.push(E),g?uzt(g,E):g=[{x:E.x+E.x0,y:E.y+E.y0},{x:E.x+E.x1,y:E.y+E.y1}],E.x-=e[0]>>1,E.y-=e[1]>>1)}return _};function d(p){p.width=p.height=1;var m=Math.sqrt(p.getContext("2d").getImageData(0,0,1,1).data.length>>2);p.width=(tC<<5)/m,p.height=aO/m;var g=p.getContext("2d");return g.fillStyle=g.strokeStyle="red",g.textAlign="center",{context:g,ratio:m}}function h(p,m,g){for(var y=m.x,v=m.y,_=Math.sqrt(e[0]*e[0]+e[1]*e[1]),w=u(e),E=c()<.5?1:-1,S=-E,T,C,A;(T=w(S+=E))&&(C=~~T[0],A=~~T[1],!(Math.min(Math.abs(C),Math.abs(A))>=_));)if(m.x=y+C,m.y=v+A,!(m.x+m.x0<0||m.y+m.y0<0||m.x+m.x1>e[0]||m.y+m.y1>e[1])&&(!g||!azt(m,p,e[0]))&&(!g||lzt(m,g))){for(var k=m.sprite,N=m.width>>5,O=e[0]>>5,D=m.x-(N<<4),$=D&127,F=32-$,M=m.y1-m.y0,B=(m.y+m.y0)*O+(D>>5),U,H=0;H<M;H++){U=0;for(var P=0;P<=N;P++)p[B+P]|=U<<F|(P<N?(U=k[H*N+P])>>>$:0);B+=O}return m.sprite=null,!0}return!1}return f.words=function(p){return arguments.length?(l=p,f):l},f.size=function(p){return arguments.length?(e=[+p[0],+p[1]],f):e},f.font=function(p){return arguments.length?(n=pv(p),f):n},f.fontStyle=function(p){return arguments.length?(i=pv(p),f):i},f.fontWeight=function(p){return arguments.length?(s=pv(p),f):s},f.rotate=function(p){return arguments.length?(o=pv(p),f):o},f.text=function(p){return arguments.length?(t=pv(p),f):t},f.spiral=function(p){return arguments.length?(u=dzt[p]||p,f):u},f.fontSize=function(p){return arguments.length?(r=pv(p),f):r},f.padding=function(p){return arguments.length?(a=pv(p),f):a},f.random=function(p){return arguments.length?(c=p,f):c},f}function ozt(e,t,n,r){if(!t.sprite){var i=e.context,s=e.ratio;i.clearRect(0,0,(tC<<5)/s,aO/s);var o=0,a=0,u=0,l=n.length,c,f,d,h,p;for(--r;++r<l;){if(t=n[r],i.save(),i.font=t.style+" "+t.weight+" "+~~((t.size+1)/s)+"px "+t.font,c=i.measureText(t.text+"m").width*s,d=t.size<<1,t.rotate){var m=Math.sin(t.rotate*pB),g=Math.cos(t.rotate*pB),y=c*g,v=c*m,_=d*g,w=d*m;c=Math.max(Math.abs(y+w),Math.abs(y-w))+31>>5<<5,d=~~Math.max(Math.abs(v+_),Math.abs(v-_))}else c=c+31>>5<<5;if(d>u&&(u=d),o+c>=tC<<5&&(o=0,a+=u,u=0),a+d>=aO)break;i.translate((o+(c>>1))/s,(a+(d>>1))/s),t.rotate&&i.rotate(t.rotate*pB),i.fillText(t.text,0,0),t.padding&&(i.lineWidth=2*t.padding,i.strokeText(t.text,0,0)),i.restore(),t.width=c,t.height=d,t.xoff=o,t.yoff=a,t.x1=c>>1,t.y1=d>>1,t.x0=-t.x1,t.y0=-t.y1,t.hasText=!0,o+=c}for(var E=i.getImageData(0,0,(tC<<5)/s,aO/s).data,S=[];--r>=0;)if(t=n[r],!!t.hasText){for(c=t.width,f=c>>5,d=t.y1-t.y0,h=0;h<d*f;h++)S[h]=0;if(o=t.xoff,o==null)return;a=t.yoff;var T=0,C=-1;for(p=0;p<d;p++){for(h=0;h<c;h++){var A=f*p+(h>>5),k=E[(a+p)*(tC<<5)+(o+h)<<2]?1<<31-h%32:0;S[A]|=k,T|=k}T?C=p:(t.y0++,d--,p--,a++)}t.y1=t.y0+C,t.sprite=S.slice(0,(t.y1-t.y0)*f)}}}function azt(e,t,n){n>>=5;for(var r=e.sprite,i=e.width>>5,s=e.x-(i<<4),o=s&127,a=32-o,u=e.y1-e.y0,l=(e.y+e.y0)*n+(s>>5),c,f=0;f<u;f++){c=0;for(var d=0;d<=i;d++)if((c<<a|(d<i?(c=r[f*i+d])>>>o:0))&t[l+d])return!0;l+=n}return!1}function uzt(e,t){var n=e[0],r=e[1];t.x+t.x0<n.x&&(n.x=t.x+t.x0),t.y+t.y0<n.y&&(n.y=t.y+t.y0),t.x+t.x1>r.x&&(r.x=t.x+t.x1),t.y+t.y1>r.y&&(r.y=t.y+t.y1)}function lzt(e,t){return e.x+e.x1>t[0].x&&e.x+e.x0<t[1].x&&e.y+e.y1>t[0].y&&e.y+e.y0<t[1].y}function DLe(e){var t=e[0]/e[1];return function(n){return[t*(n*=.1)*Math.cos(n),n*Math.sin(n)]}}function czt(e){var t=4,n=t*e[0]/e[1],r=0,i=0;return function(s){var o=s<0?-1:1;switch(Math.sqrt(1+4*o*s)-o&3){case 0:r+=n;break;case 1:i+=t;break;case 2:r-=n;break;default:i-=t;break}return[r,i]}}function fzt(e){for(var t=[],n=-1;++n<e;)t[n]=0;return t}function pv(e){return typeof e=="function"?e:function(){return e}}var dzt={archimedean:DLe,rectangular:czt};const OLe=["x","y","font","fontSize","fontStyle","fontWeight","angle"],hzt=["text","font","rotate","fontSize","fontStyle","fontWeight"];function yne(e){Pe.call(this,szt(),e)}yne.Definition={type:"Wordcloud",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2},{name:"font",type:"string",expr:!0,default:"sans-serif"},{name:"fontStyle",type:"string",expr:!0,default:"normal"},{name:"fontWeight",type:"string",expr:!0,default:"normal"},{name:"fontSize",type:"number",expr:!0,default:14},{name:"fontSizeRange",type:"number",array:"nullable",default:[10,50]},{name:"rotate",type:"number",expr:!0,default:0},{name:"text",type:"field"},{name:"spiral",type:"string",values:["archimedean","rectangular"]},{name:"padding",type:"number",expr:!0},{name:"as",type:"string",array:!0,length:7,default:OLe}]};lt(yne,Pe,{transform(e,t){e.size&&!(e.size[0]&&e.size[1])&&Le("Wordcloud size dimensions must be non-zero.");function n(p){const m=e[p];return _n(m)&&t.modified(m.fields)}const r=e.modified();if(!(r||t.changed(t.ADD_REM)||hzt.some(n)))return;const i=t.materialize(t.SOURCE).source,s=this.value,o=e.as||OLe;let a=e.fontSize||14,u;if(_n(a)?u=e.fontSizeRange:a=Sa(a),u){const p=a,m=gr("sqrt")().domain(Fh(i,p)).range(u);a=g=>m(p(g))}i.forEach(p=>{p[o[0]]=NaN,p[o[1]]=NaN,p[o[3]]=0});const l=s.words(i).text(e.text).size(e.size||[500,500]).padding(e.padding||1).spiral(e.spiral||"archimedean").rotate(e.rotate||0).font(e.font||"sans-serif").fontStyle(e.fontStyle||"normal").fontWeight(e.fontWeight||"normal").fontSize(a).random(Uc).layout(),c=s.size(),f=c[0]>>1,d=c[1]>>1,h=l.length;for(let p=0,m,g;p<h;++p)m=l[p],g=m.datum,g[o[0]]=m.x+f,g[o[1]]=m.y+d,g[o[2]]=m.font,g[o[3]]=m.size,g[o[4]]=m.style,g[o[5]]=m.weight,g[o[6]]=m.rotate;return t.reflow(r).modifies(o)}});const pzt=Object.freeze(Object.defineProperty({__proto__:null,wordcloud:yne},Symbol.toStringTag,{value:"Module"})),mzt=e=>new Uint8Array(e),gzt=e=>new Uint16Array(e),eA=e=>new Uint32Array(e);function yzt(){let e=8,t=[],n=eA(0),r=DP(0,e),i=DP(0,e);return{data:()=>t,seen:()=>n=vzt(n,t.length),add(s){for(let o=0,a=t.length,u=s.length,l;o<u;++o)l=s[o],l._index=a++,t.push(l)},remove(s,o){const a=t.length,u=Array(a-s),l=t;let c,f,d;for(f=0;!o[f]&&f<a;++f)u[f]=t[f],l[f]=f;for(d=f;f<a;++f)c=t[f],o[f]?l[f]=-1:(l[f]=d,r[d]=r[f],i[d]=i[f],u[d]=c,c._index=d++),r[f]=0;return t=u,l},size:()=>t.length,curr:()=>r,prev:()=>i,reset:s=>i[s]=r[s],all:()=>e<257?255:e<65537?65535:4294967295,set(s,o){r[s]|=o},clear(s,o){r[s]&=~o},resize(s,o){const a=r.length;(s>a||o>e)&&(e=Math.max(o,e),r=DP(s,e,r),i=DP(s,e))}}}function vzt(e,t,n){return e.length>=t?e:(n=n||new e.constructor(t),n.set(e),n)}function DP(e,t,n){const r=(t<257?mzt:t<65537?gzt:eA)(e);return n&&r.set(n),r}function Ome(e,t,n){const r=1<<t;return{one:r,zero:~r,range:n.slice(),bisect:e.bisect,index:e.index,size:e.size,onAdd(i,s){const o=this,a=o.bisect(o.range,i.value),u=i.index,l=a[0],c=a[1],f=u.length;let d;for(d=0;d<l;++d)s[u[d]]|=r;for(d=c;d<f;++d)s[u[d]]|=r;return o}}}function $me(){let e=eA(0),t=[],n=0;function r(a,u,l){if(!u.length)return[];const c=n,f=u.length,d=eA(f);let h=Array(f),p,m,g;for(g=0;g<f;++g)h[g]=a(u[g]),d[g]=g;if(h=bzt(h,d),c)p=t,m=e,t=Array(c+f),e=eA(c+f),_zt(l,p,m,c,h,d,f,t,e);else{if(l>0)for(g=0;g<f;++g)d[g]+=l;t=h,e=d}return n=c+f,{index:d,value:h}}function i(a,u){const l=n;let c,f,d;for(f=0;!u[e[f]]&&f<l;++f);for(d=f;f<l;++f)u[c=e[f]]||(e[d]=c,t[d]=t[f],++d);n=l-a}function s(a){for(let u=0,l=n;u<l;++u)e[u]=a[e[u]]}function o(a,u){let l;return u?l=u.length:(u=t,l=n),[jat(u,a[0],0,l),q0(u,a[1],0,l)]}return{insert:r,remove:i,bisect:o,reindex:s,index:()=>e,size:()=>n}}function bzt(e,t){return e.sort.call(t,(n,r)=>{const i=e[n],s=e[r];return i<s?-1:i>s?1:0}),qat(e,t)}function _zt(e,t,n,r,i,s,o,a,u){let l=0,c=0,f;for(f=0;l<r&&c<o;++f)t[l]<i[c]?(a[f]=t[l],u[f]=n[l++]):(a[f]=i[c],u[f]=s[c++]+e);for(;l<r;++l,++f)a[f]=t[l],u[f]=n[l];for(;c<o;++c,++f)a[f]=i[c],u[f]=s[c]+e}function vne(e){Pe.call(this,yzt(),e),this._indices=null,this._dims=null}vne.Definition={type:"CrossFilter",metadata:{},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"query",type:"array",array:!0,required:!0,content:{type:"number",array:!0,length:2}}]};lt(vne,Pe,{transform(e,t){if(this._dims){var n=e.modified("fields")||e.fields.some(r=>t.modified(r.fields));return n?this.reinit(e,t):this.eval(e,t)}else return this.init(e,t)},init(e,t){const n=e.fields,r=e.query,i=this._indices={},s=this._dims=[],o=r.length;let a=0,u,l;for(;a<o;++a)u=n[a].fname,l=i[u]||(i[u]=$me()),s.push(Ome(l,a,r[a]));return this.eval(e,t)},reinit(e,t){const n=t.materialize().fork(),r=e.fields,i=e.query,s=this._indices,o=this._dims,a=this.value,u=a.curr(),l=a.prev(),c=a.all(),f=n.rem=n.add,d=n.mod,h=i.length,p={};let m,g,y,v,_,w,E,S,T;if(l.set(u),t.rem.length&&(_=this.remove(e,t,n)),t.add.length&&a.add(t.add),t.mod.length)for(w={},v=t.mod,E=0,S=v.length;E<S;++E)w[v[E]._index]=1;for(E=0;E<h;++E)T=r[E],(!o[E]||e.modified("fields",E)||t.modified(T.fields))&&(y=T.fname,(m=p[y])||(s[y]=g=$me(),p[y]=m=g.insert(T,t.source,0)),o[E]=Ome(g,E,i[E]).onAdd(m,u));for(E=0,S=a.data().length;E<S;++E)_[E]||(l[E]!==u[E]?f.push(E):w[E]&&u[E]!==c&&d.push(E));return a.mask=(1<<h)-1,n},eval(e,t){const n=t.materialize().fork(),r=this._dims.length;let i=0;return t.rem.length&&(this.remove(e,t,n),i|=(1<<r)-1),e.modified("query")&&!e.modified("fields")&&(i|=this.update(e,t,n)),t.add.length&&(this.insert(e,t,n),i|=(1<<r)-1),t.mod.length&&(this.modify(t,n),i|=(1<<r)-1),this.value.mask=i,n},insert(e,t,n){const r=t.add,i=this.value,s=this._dims,o=this._indices,a=e.fields,u={},l=n.add,c=i.size()+r.length,f=s.length;let d=i.size(),h,p,m;i.resize(c,f),i.add(r);const g=i.curr(),y=i.prev(),v=i.all();for(h=0;h<f;++h)p=a[h].fname,m=u[p]||(u[p]=o[p].insert(a[h],r,d)),s[h].onAdd(m,g);for(;d<c;++d)y[d]=v,g[d]!==v&&l.push(d)},modify(e,t){const n=t.mod,r=this.value,i=r.curr(),s=r.all(),o=e.mod;let a,u,l;for(a=0,u=o.length;a<u;++a)l=o[a]._index,i[l]!==s&&n.push(l)},remove(e,t,n){const r=this._indices,i=this.value,s=i.curr(),o=i.prev(),a=i.all(),u={},l=n.rem,c=t.rem;let f,d,h,p;for(f=0,d=c.length;f<d;++f)h=c[f]._index,u[h]=1,o[h]=p=s[h],s[h]=a,p!==a&&l.push(h);for(h in r)r[h].remove(d,u);return this.reindex(t,d,u),u},reindex(e,t,n){const r=this._indices,i=this.value;e.runAfter(()=>{const s=i.remove(t,n);for(const o in r)r[o].reindex(s)})},update(e,t,n){const r=this._dims,i=e.query,s=t.stamp,o=r.length;let a=0,u,l;for(n.filters=0,l=0;l<o;++l)e.modified("query",l)&&(u=l,++a);if(a===1)a=r[u].one,this.incrementOne(r[u],i[u],n.add,n.rem);else for(l=0,a=0;l<o;++l)e.modified("query",l)&&(a|=r[l].one,this.incrementAll(r[l],i[l],s,n.add),n.rem=n.add);return a},incrementAll(e,t,n,r){const i=this.value,s=i.seen(),o=i.curr(),a=i.prev(),u=e.index(),l=e.bisect(e.range),c=e.bisect(t),f=c[0],d=c[1],h=l[0],p=l[1],m=e.one;let g,y,v;if(f<h)for(g=f,y=Math.min(h,d);g<y;++g)v=u[g],s[v]!==n&&(a[v]=o[v],s[v]=n,r.push(v)),o[v]^=m;else if(f>h)for(g=h,y=Math.min(f,p);g<y;++g)v=u[g],s[v]!==n&&(a[v]=o[v],s[v]=n,r.push(v)),o[v]^=m;if(d>p)for(g=Math.max(f,p),y=d;g<y;++g)v=u[g],s[v]!==n&&(a[v]=o[v],s[v]=n,r.push(v)),o[v]^=m;else if(d<p)for(g=Math.max(h,d),y=p;g<y;++g)v=u[g],s[v]!==n&&(a[v]=o[v],s[v]=n,r.push(v)),o[v]^=m;e.range=t.slice()},incrementOne(e,t,n,r){const i=this.value,s=i.curr(),o=e.index(),a=e.bisect(e.range),u=e.bisect(t),l=u[0],c=u[1],f=a[0],d=a[1],h=e.one;let p,m,g;if(l<f)for(p=l,m=Math.min(f,c);p<m;++p)g=o[p],s[g]^=h,n.push(g);else if(l>f)for(p=f,m=Math.min(l,d);p<m;++p)g=o[p],s[g]^=h,r.push(g);if(c>d)for(p=Math.max(l,d),m=c;p<m;++p)g=o[p],s[g]^=h,n.push(g);else if(c<d)for(p=Math.max(f,c),m=d;p<m;++p)g=o[p],s[g]^=h,r.push(g);e.range=t.slice()}});function bne(e){Pe.call(this,null,e)}bne.Definition={type:"ResolveFilter",metadata:{},params:[{name:"ignore",type:"number",required:!0,description:"A bit mask indicating which filters to ignore."},{name:"filter",type:"object",required:!0,description:"Per-tuple filter bitmaps from a CrossFilter transform."}]};lt(bne,Pe,{transform(e,t){const n=~(e.ignore||0),r=e.filter,i=r.mask;if(!(i&n))return t.StopPropagation;const s=t.fork(t.ALL),o=r.data(),a=r.curr(),u=r.prev(),l=c=>a[c]&n?null:o[c];return s.filter(s.MOD,l),i&i-1?(s.filter(s.ADD,c=>{const f=a[c]&n;return!f&&f^u[c]&n?o[c]:null}),s.filter(s.REM,c=>{const f=a[c]&n;return f&&!(f^(f^u[c]&n))?o[c]:null})):(s.filter(s.ADD,l),s.filter(s.REM,c=>(a[c]&n)===i?o[c]:null)),s.filter(s.SOURCE,c=>l(c._index))}});const wzt=Object.freeze(Object.defineProperty({__proto__:null,crossfilter:vne,resolvefilter:bne},Symbol.toStringTag,{value:"Module"})),Ezt="RawCode",pb="Literal",xzt="Property",Szt="Identifier",Tzt="ArrayExpression",Czt="BinaryExpression",$Le="CallExpression",Azt="ConditionalExpression",Izt="LogicalExpression",kzt="MemberExpression",Rzt="ObjectExpression",Nzt="UnaryExpression";function dd(e){this.type=e}dd.prototype.visit=function(e){let t,n,r;if(e(this))return 1;for(t=Pzt(this),n=0,r=t.length;n<r;++n)if(t[n].visit(e))return 1};function Pzt(e){switch(e.type){case Tzt:return e.elements;case Czt:case Izt:return[e.left,e.right];case $Le:return[e.callee].concat(e.arguments);case Azt:return[e.test,e.consequent,e.alternate];case kzt:return[e.object,e.property];case Rzt:return e.properties;case xzt:return[e.key,e.value];case Nzt:return[e.argument];case Szt:case pb:case Ezt:default:return[]}}var op,kt,$e,va,Dr,kF=1,RR=2,mb=3,Ky=4,RF=5,a_=6,Tu=7,NR=8,Dzt=9;op={};op[kF]="Boolean";op[RR]="<end>";op[mb]="Identifier";op[Ky]="Keyword";op[RF]="Null";op[a_]="Numeric";op[Tu]="Punctuator";op[NR]="String";op[Dzt]="RegularExpression";var Ozt="ArrayExpression",$zt="BinaryExpression",Mzt="CallExpression",Lzt="ConditionalExpression",MLe="Identifier",Fzt="Literal",jzt="LogicalExpression",Bzt="MemberExpression",Uzt="ObjectExpression",zzt="Property",Vzt="UnaryExpression",io="Unexpected token %0",Hzt="Unexpected number",qzt="Unexpected string",Wzt="Unexpected identifier",Gzt="Unexpected reserved word",Yzt="Unexpected end of input",YH="Invalid regular expression",mB="Invalid regular expression: missing /",LLe="Octal literals are not allowed in strict mode.",Kzt="Duplicate data property in object literal not allowed in strict mode",Ro="ILLEGAL",jI="Disabled.",Xzt=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),Qzt=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B2\\u08E4-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58\\u0C59\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D60-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA69D\\uA69F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2D\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]");function NF(e,t){if(!e)throw new Error("ASSERT: "+t)}function Mp(e){return e>=48&&e<=57}function _ne(e){return"0123456789abcdefABCDEF".indexOf(e)>=0}function tA(e){return"01234567".indexOf(e)>=0}function Jzt(e){return e===32||e===9||e===11||e===12||e===160||e>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(e)>=0}function BI(e){return e===10||e===13||e===8232||e===8233}function PR(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e===92||e>=128&&Xzt.test(String.fromCharCode(e))}function PM(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57||e===92||e>=128&&Qzt.test(String.fromCharCode(e))}const Zzt={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1};function FLe(){for(;$e<va;){const e=kt.charCodeAt($e);if(Jzt(e)||BI(e))++$e;else break}}function KH(e){var t,n,r,i=0;for(n=e==="u"?4:2,t=0;t<n;++t)$e<va&&_ne(kt[$e])?(r=kt[$e++],i=i*16+"0123456789abcdef".indexOf(r.toLowerCase())):pr({},io,Ro);return String.fromCharCode(i)}function eVt(){var e,t,n,r;for(e=kt[$e],t=0,e==="}"&&pr({},io,Ro);$e<va&&(e=kt[$e++],!!_ne(e));)t=t*16+"0123456789abcdef".indexOf(e.toLowerCase());return(t>1114111||e!=="}")&&pr({},io,Ro),t<=65535?String.fromCharCode(t):(n=(t-65536>>10)+55296,r=(t-65536&1023)+56320,String.fromCharCode(n,r))}function jLe(){var e,t;for(e=kt.charCodeAt($e++),t=String.fromCharCode(e),e===92&&(kt.charCodeAt($e)!==117&&pr({},io,Ro),++$e,e=KH("u"),(!e||e==="\\"||!PR(e.charCodeAt(0)))&&pr({},io,Ro),t=e);$e<va&&(e=kt.charCodeAt($e),!!PM(e));)++$e,t+=String.fromCharCode(e),e===92&&(t=t.substr(0,t.length-1),kt.charCodeAt($e)!==117&&pr({},io,Ro),++$e,e=KH("u"),(!e||e==="\\"||!PM(e.charCodeAt(0)))&&pr({},io,Ro),t+=e);return t}function tVt(){var e,t;for(e=$e++;$e<va;){if(t=kt.charCodeAt($e),t===92)return $e=e,jLe();if(PM(t))++$e;else break}return kt.slice(e,$e)}function nVt(){var e,t,n;return e=$e,t=kt.charCodeAt($e)===92?jLe():tVt(),t.length===1?n=mb:Zzt.hasOwnProperty(t)?n=Ky:t==="null"?n=RF:t==="true"||t==="false"?n=kF:n=mb,{type:n,value:t,start:e,end:$e}}function gB(){var e=$e,t=kt.charCodeAt($e),n,r=kt[$e],i,s,o;switch(t){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++$e,{type:Tu,value:String.fromCharCode(t),start:e,end:$e};default:if(n=kt.charCodeAt($e+1),n===61)switch(t){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return $e+=2,{type:Tu,value:String.fromCharCode(t)+String.fromCharCode(n),start:e,end:$e};case 33:case 61:return $e+=2,kt.charCodeAt($e)===61&&++$e,{type:Tu,value:kt.slice(e,$e),start:e,end:$e}}}if(o=kt.substr($e,4),o===">>>=")return $e+=4,{type:Tu,value:o,start:e,end:$e};if(s=o.substr(0,3),s===">>>"||s==="<<="||s===">>=")return $e+=3,{type:Tu,value:s,start:e,end:$e};if(i=s.substr(0,2),r===i[1]&&"+-<>&|".indexOf(r)>=0||i==="=>")return $e+=2,{type:Tu,value:i,start:e,end:$e};if(i==="//"&&pr({},io,Ro),"<>=!+-*%&|^/".indexOf(r)>=0)return++$e,{type:Tu,value:r,start:e,end:$e};pr({},io,Ro)}function rVt(e){let t="";for(;$e<va&&_ne(kt[$e]);)t+=kt[$e++];return t.length===0&&pr({},io,Ro),PR(kt.charCodeAt($e))&&pr({},io,Ro),{type:a_,value:parseInt("0x"+t,16),start:e,end:$e}}function iVt(e){let t="0"+kt[$e++];for(;$e<va&&tA(kt[$e]);)t+=kt[$e++];return(PR(kt.charCodeAt($e))||Mp(kt.charCodeAt($e)))&&pr({},io,Ro),{type:a_,value:parseInt(t,8),octal:!0,start:e,end:$e}}function Mme(){var e,t,n;if(n=kt[$e],NF(Mp(n.charCodeAt(0))||n===".","Numeric literal must start with a decimal digit or a decimal point"),t=$e,e="",n!=="."){if(e=kt[$e++],n=kt[$e],e==="0"){if(n==="x"||n==="X")return++$e,rVt(t);if(tA(n))return iVt(t);n&&Mp(n.charCodeAt(0))&&pr({},io,Ro)}for(;Mp(kt.charCodeAt($e));)e+=kt[$e++];n=kt[$e]}if(n==="."){for(e+=kt[$e++];Mp(kt.charCodeAt($e));)e+=kt[$e++];n=kt[$e]}if(n==="e"||n==="E")if(e+=kt[$e++],n=kt[$e],(n==="+"||n==="-")&&(e+=kt[$e++]),Mp(kt.charCodeAt($e)))for(;Mp(kt.charCodeAt($e));)e+=kt[$e++];else pr({},io,Ro);return PR(kt.charCodeAt($e))&&pr({},io,Ro),{type:a_,value:parseFloat(e),start:t,end:$e}}function sVt(){var e="",t,n,r,i,s=!1;for(t=kt[$e],NF(t==="'"||t==='"',"String literal must starts with a quote"),n=$e,++$e;$e<va;)if(r=kt[$e++],r===t){t="";break}else if(r==="\\")if(r=kt[$e++],!r||!BI(r.charCodeAt(0)))switch(r){case"u":case"x":kt[$e]==="{"?(++$e,e+=eVt()):e+=KH(r);break;case"n":e+=`
`;break;case"r":e+="\r";break;case"t":e+="	";break;case"b":e+="\b";break;case"f":e+="\f";break;case"v":e+="\v";break;default:tA(r)?(i="01234567".indexOf(r),i!==0&&(s=!0),$e<va&&tA(kt[$e])&&(s=!0,i=i*8+"01234567".indexOf(kt[$e++]),"0123".indexOf(r)>=0&&$e<va&&tA(kt[$e])&&(i=i*8+"01234567".indexOf(kt[$e++]))),e+=String.fromCharCode(i)):e+=r;break}else r==="\r"&&kt[$e]===`
`&&++$e;else{if(BI(r.charCodeAt(0)))break;e+=r}return t!==""&&pr({},io,Ro),{type:NR,value:e,octal:s,start:n,end:$e}}function oVt(e,t){let n=e;t.indexOf("u")>=0&&(n=n.replace(/\\u\{([0-9a-fA-F]+)\}/g,(r,i)=>{if(parseInt(i,16)<=1114111)return"x";pr({},YH)}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{new RegExp(n)}catch{pr({},YH)}try{return new RegExp(e,t)}catch{return null}}function aVt(){var e,t,n,r,i;for(e=kt[$e],NF(e==="/","Regular expression literal must start with a slash"),t=kt[$e++],n=!1,r=!1;$e<va;)if(e=kt[$e++],t+=e,e==="\\")e=kt[$e++],BI(e.charCodeAt(0))&&pr({},mB),t+=e;else if(BI(e.charCodeAt(0)))pr({},mB);else if(n)e==="]"&&(n=!1);else if(e==="/"){r=!0;break}else e==="["&&(n=!0);return r||pr({},mB),i=t.substr(1,t.length-2),{value:i,literal:t}}function uVt(){var e,t,n;for(t="",n="";$e<va&&(e=kt[$e],!!PM(e.charCodeAt(0)));)++$e,e==="\\"&&$e<va?pr({},io,Ro):(n+=e,t+=e);return n.search(/[^gimuy]/g)>=0&&pr({},YH,n),{value:n,literal:t}}function lVt(){var e,t,n,r;return Dr=null,FLe(),e=$e,t=aVt(),n=uVt(),r=oVt(t.value,n.value),{literal:t.literal+n.literal,value:r,regex:{pattern:t.value,flags:n.value},start:e,end:$e}}function cVt(e){return e.type===mb||e.type===Ky||e.type===kF||e.type===RF}function BLe(){if(FLe(),$e>=va)return{type:RR,start:$e,end:$e};const e=kt.charCodeAt($e);return PR(e)?nVt():e===40||e===41||e===59?gB():e===39||e===34?sVt():e===46?Mp(kt.charCodeAt($e+1))?Mme():gB():Mp(e)?Mme():gB()}function Du(){const e=Dr;return $e=e.end,Dr=BLe(),$e=e.end,e}function ULe(){const e=$e;Dr=BLe(),$e=e}function fVt(e){const t=new dd(Ozt);return t.elements=e,t}function Lme(e,t,n){const r=new dd(e==="||"||e==="&&"?jzt:$zt);return r.operator=e,r.left=t,r.right=n,r}function dVt(e,t){const n=new dd(Mzt);return n.callee=e,n.arguments=t,n}function hVt(e,t,n){const r=new dd(Lzt);return r.test=e,r.consequent=t,r.alternate=n,r}function wne(e){const t=new dd(MLe);return t.name=e,t}function nC(e){const t=new dd(Fzt);return t.value=e.value,t.raw=kt.slice(e.start,e.end),e.regex&&(t.raw==="//"&&(t.raw="/(?:)/"),t.regex=e.regex),t}function Fme(e,t,n){const r=new dd(Bzt);return r.computed=e==="[",r.object=t,r.property=n,r.computed||(n.member=!0),r}function pVt(e){const t=new dd(Uzt);return t.properties=e,t}function jme(e,t,n){const r=new dd(zzt);return r.key=t,r.value=n,r.kind=e,r}function mVt(e,t){const n=new dd(Vzt);return n.operator=e,n.argument=t,n.prefix=!0,n}function pr(e,t){var n,r=Array.prototype.slice.call(arguments,2),i=t.replace(/%(\d)/g,(s,o)=>(NF(o<r.length,"Message reference must be in range"),r[o]));throw n=new Error(i),n.index=$e,n.description=i,n}function PF(e){e.type===RR&&pr(e,Yzt),e.type===a_&&pr(e,Hzt),e.type===NR&&pr(e,qzt),e.type===mb&&pr(e,Wzt),e.type===Ky&&pr(e,Gzt),pr(e,io,e.value)}function ba(e){const t=Du();(t.type!==Tu||t.value!==e)&&PF(t)}function di(e){return Dr.type===Tu&&Dr.value===e}function yB(e){return Dr.type===Ky&&Dr.value===e}function gVt(){const e=[];for($e=Dr.start,ba("[");!di("]");)di(",")?(Du(),e.push(null)):(e.push(gb()),di("]")||ba(","));return Du(),fVt(e)}function Bme(){$e=Dr.start;const e=Du();return e.type===NR||e.type===a_?(e.octal&&pr(e,LLe),nC(e)):wne(e.value)}function yVt(){var e,t,n,r;if($e=Dr.start,e=Dr,e.type===mb)return n=Bme(),ba(":"),r=gb(),jme("init",n,r);if(e.type===RR||e.type===Tu)PF(e);else return t=Bme(),ba(":"),r=gb(),jme("init",t,r)}function vVt(){var e=[],t,n,r,i={},s=String;for($e=Dr.start,ba("{");!di("}");)t=yVt(),t.key.type===MLe?n=t.key.name:n=s(t.key.value),r="$"+n,Object.prototype.hasOwnProperty.call(i,r)?pr({},Kzt):i[r]=!0,e.push(t),di("}")||ba(",");return ba("}"),pVt(e)}function bVt(){ba("(");const e=Ene();return ba(")"),e}const _Vt={if:1};function wVt(){var e,t,n;if(di("("))return bVt();if(di("["))return gVt();if(di("{"))return vVt();if(e=Dr.type,$e=Dr.start,e===mb||_Vt[Dr.value])n=wne(Du().value);else if(e===NR||e===a_)Dr.octal&&pr(Dr,LLe),n=nC(Du());else{if(e===Ky)throw new Error(jI);e===kF?(t=Du(),t.value=t.value==="true",n=nC(t)):e===RF?(t=Du(),t.value=null,n=nC(t)):di("/")||di("/=")?(n=nC(lVt()),ULe()):PF(Du())}return n}function EVt(){const e=[];if(ba("("),!di(")"))for(;$e<va&&(e.push(gb()),!di(")"));)ba(",");return ba(")"),e}function xVt(){$e=Dr.start;const e=Du();return cVt(e)||PF(e),wne(e.value)}function SVt(){return ba("."),xVt()}function TVt(){ba("[");const e=Ene();return ba("]"),e}function CVt(){var e,t,n;for(e=wVt();;)if(di("."))n=SVt(),e=Fme(".",e,n);else if(di("("))t=EVt(),e=dVt(e,t);else if(di("["))n=TVt(),e=Fme("[",e,n);else break;return e}function Ume(){const e=CVt();if(Dr.type===Tu&&(di("++")||di("--")))throw new Error(jI);return e}function uO(){var e,t;if(Dr.type!==Tu&&Dr.type!==Ky)t=Ume();else{if(di("++")||di("--"))throw new Error(jI);if(di("+")||di("-")||di("~")||di("!"))e=Du(),t=uO(),t=mVt(e.value,t);else{if(yB("delete")||yB("void")||yB("typeof"))throw new Error(jI);t=Ume()}}return t}function zme(e){let t=0;if(e.type!==Tu&&e.type!==Ky)return 0;switch(e.value){case"||":t=1;break;case"&&":t=2;break;case"|":t=3;break;case"^":t=4;break;case"&":t=5;break;case"==":case"!=":case"===":case"!==":t=6;break;case"<":case">":case"<=":case">=":case"instanceof":case"in":t=7;break;case"<<":case">>":case">>>":t=8;break;case"+":case"-":t=9;break;case"*":case"/":case"%":t=11;break}return t}function AVt(){var e,t,n,r,i,s,o,a,u,l;if(e=Dr,u=uO(),r=Dr,i=zme(r),i===0)return u;for(r.prec=i,Du(),t=[e,Dr],o=uO(),s=[u,r,o];(i=zme(Dr))>0;){for(;s.length>2&&i<=s[s.length-2].prec;)o=s.pop(),a=s.pop().value,u=s.pop(),t.pop(),n=Lme(a,u,o),s.push(n);r=Du(),r.prec=i,s.push(r),t.push(Dr),n=uO(),s.push(n)}for(l=s.length-1,n=s[l],t.pop();l>1;)t.pop(),n=Lme(s[l-1].value,s[l-2],n),l-=2;return n}function gb(){var e,t,n;return e=AVt(),di("?")&&(Du(),t=gb(),ba(":"),n=gb(),e=hVt(e,t,n)),e}function Ene(){const e=gb();if(di(","))throw new Error(jI);return e}function xne(e){kt=e,$e=0,va=kt.length,Dr=null,ULe();const t=Ene();if(Dr.type!==RR)throw new Error("Unexpect token after expression.");return t}var zLe={NaN:"NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2",MIN_VALUE:"Number.MIN_VALUE",MAX_VALUE:"Number.MAX_VALUE"};function VLe(e){function t(o,a,u,l){let c=e(a[0]);return u&&(c=u+"("+c+")",u.lastIndexOf("new ",0)===0&&(c="("+c+")")),c+"."+o+(l<0?"":l===0?"()":"("+a.slice(1).map(e).join(",")+")")}function n(o,a,u){return l=>t(o,l,a,u)}const r="new Date",i="String",s="RegExp";return{isNaN:"Number.isNaN",isFinite:"Number.isFinite",abs:"Math.abs",acos:"Math.acos",asin:"Math.asin",atan:"Math.atan",atan2:"Math.atan2",ceil:"Math.ceil",cos:"Math.cos",exp:"Math.exp",floor:"Math.floor",hypot:"Math.hypot",log:"Math.log",max:"Math.max",min:"Math.min",pow:"Math.pow",random:"Math.random",round:"Math.round",sin:"Math.sin",sqrt:"Math.sqrt",tan:"Math.tan",clamp:function(o){o.length<3&&Le("Missing arguments to clamp function."),o.length>3&&Le("Too many arguments to clamp function.");const a=o.map(e);return"Math.max("+a[1]+", Math.min("+a[2]+","+a[0]+"))"},now:"Date.now",utc:"Date.UTC",datetime:r,date:n("getDate",r,0),day:n("getDay",r,0),year:n("getFullYear",r,0),month:n("getMonth",r,0),hours:n("getHours",r,0),minutes:n("getMinutes",r,0),seconds:n("getSeconds",r,0),milliseconds:n("getMilliseconds",r,0),time:n("getTime",r,0),timezoneoffset:n("getTimezoneOffset",r,0),utcdate:n("getUTCDate",r,0),utcday:n("getUTCDay",r,0),utcyear:n("getUTCFullYear",r,0),utcmonth:n("getUTCMonth",r,0),utchours:n("getUTCHours",r,0),utcminutes:n("getUTCMinutes",r,0),utcseconds:n("getUTCSeconds",r,0),utcmilliseconds:n("getUTCMilliseconds",r,0),length:n("length",null,-1),parseFloat:"parseFloat",parseInt:"parseInt",upper:n("toUpperCase",i,0),lower:n("toLowerCase",i,0),substring:n("substring",i),split:n("split",i),trim:n("trim",i,0),regexp:s,test:n("test",s),if:function(o){o.length<3&&Le("Missing arguments to if function."),o.length>3&&Le("Too many arguments to if function.");const a=o.map(e);return"("+a[0]+"?"+a[1]+":"+a[2]+")"}}}function IVt(e){const t=e&&e.length-1;return t&&(e[0]==='"'&&e[t]==='"'||e[0]==="'"&&e[t]==="'")?e.slice(1,-1):e}function HLe(e){e=e||{};const t=e.allowed?td(e.allowed):{},n=e.forbidden?td(e.forbidden):{},r=e.constants||zLe,i=(e.functions||VLe)(f),s=e.globalvar,o=e.fieldvar,a=_n(s)?s:p=>`${s}["${p}"]`;let u={},l={},c=0;function f(p){if(mt(p))return p;const m=d[p.type];return m==null&&Le("Unsupported type: "+p.type),m(p)}const d={Literal:p=>p.raw,Identifier:p=>{const m=p.name;return c>0?m:jt(n,m)?Le("Illegal identifier: "+m):jt(r,m)?r[m]:jt(t,m)?m:(u[m]=1,a(m))},MemberExpression:p=>{const m=!p.computed,g=f(p.object);m&&(c+=1);const y=f(p.property);return g===o&&(l[IVt(y)]=1),m&&(c-=1),g+(m?"."+y:"["+y+"]")},CallExpression:p=>{p.callee.type!=="Identifier"&&Le("Illegal callee type: "+p.callee.type);const m=p.callee.name,g=p.arguments,y=jt(i,m)&&i[m];return y||Le("Unrecognized function: "+m),_n(y)?y(g):y+"("+g.map(f).join(",")+")"},ArrayExpression:p=>"["+p.elements.map(f).join(",")+"]",BinaryExpression:p=>"("+f(p.left)+" "+p.operator+" "+f(p.right)+")",UnaryExpression:p=>"("+p.operator+f(p.argument)+")",ConditionalExpression:p=>"("+f(p.test)+"?"+f(p.consequent)+":"+f(p.alternate)+")",LogicalExpression:p=>"("+f(p.left)+p.operator+f(p.right)+")",ObjectExpression:p=>"{"+p.properties.map(f).join(",")+"}",Property:p=>{c+=1;const m=f(p.key);return c-=1,m+":"+f(p.value)}};function h(p){const m={code:f(p),globals:Object.keys(u),fields:Object.keys(l)};return u={},l={},m}return h.functions=i,h.constants=r,h}const Vme=Symbol("vega_selection_getter");function qLe(e){return(!e.getter||!e.getter[Vme])&&(e.getter=Fc(e.field),e.getter[Vme]=!0),e.getter}const Sne="intersect",Hme="union",kVt="vlMulti",RVt="vlPoint",qme="or",NVt="and",jd="_vgsid_",UI=Fc(jd),PVt="E",DVt="R",OVt="R-E",$Vt="R-LE",MVt="R-RE",DM="index:unit";function Wme(e,t){for(var n=t.fields,r=t.values,i=n.length,s=0,o,a;s<i;++s)if(a=n[s],o=qLe(a)(e),P0(o)&&(o=ha(o)),P0(r[s])&&(r[s]=ha(r[s])),je(r[s])&&P0(r[s][0])&&(r[s]=r[s].map(ha)),a.type===PVt){if(je(r[s])?r[s].indexOf(o)<0:o!==r[s])return!1}else if(a.type===DVt){if(!Mw(o,r[s]))return!1}else if(a.type===MVt){if(!Mw(o,r[s],!0,!1))return!1}else if(a.type===OVt){if(!Mw(o,r[s],!1,!1))return!1}else if(a.type===$Vt&&!Mw(o,r[s],!1,!0))return!1;return!0}function LVt(e,t,n){for(var r=this.context.data[e],i=r?r.values.value:[],s=r?r[DM]&&r[DM].value:void 0,o=n===Sne,a=i.length,u=0,l,c,f,d,h;u<a;++u)if(l=i[u],s&&o){if(c=c||{},f=c[d=l.unit]||0,f===-1)continue;if(h=Wme(t,l),c[d]=h?-1:++f,h&&s.size===1)return!0;if(!h&&f===s.get(d).count)return!1}else if(h=Wme(t,l),o^h)return h;return a&&o}const WLe=pS(UI),FVt=WLe.left,jVt=WLe.right;function BVt(e,t,n){const r=this.context.data[e],i=r?r.values.value:[],s=r?r[DM]&&r[DM].value:void 0,o=n===Sne,a=UI(t),u=FVt(i,a);if(u===i.length||UI(i[u])!==a)return!1;if(s&&o){if(s.size===1)return!0;if(jVt(i,a)-u<s.size)return!1}return!0}function UVt(e,t){return e.map(n=>bn(t.fields?{values:t.fields.map(r=>qLe(r)(n.datum))}:{[jd]:UI(n.datum)},t))}function zVt(e,t,n,r){for(var i=this.context.data[e],s=i?i.values.value:[],o={},a={},u={},l,c,f,d,h,p,m,g,y,v,_=s.length,w=0,E,S;w<_;++w)if(l=s[w],d=l.unit,c=l.fields,f=l.values,c&&f){for(E=0,S=c.length;E<S;++E)h=c[E],m=o[h.field]||(o[h.field]={}),g=m[d]||(m[d]=[]),u[h.field]=y=h.type.charAt(0),v=vB[`${y}_union`],m[d]=v(g,pt(f[E]));n&&(g=a[d]||(a[d]=[]),g.push(pt(f).reduce((T,C,A)=>(T[c[A].field]=C,T),{})))}else h=jd,p=UI(l),m=o[h]||(o[h]={}),g=m[d]||(m[d]=[]),g.push(p),n&&(g=a[d]||(a[d]=[]),g.push({[jd]:p}));if(t=t||Hme,o[jd]?o[jd]=vB[`${jd}_${t}`](...Object.values(o[jd])):Object.keys(o).forEach(T=>{o[T]=Object.keys(o[T]).map(C=>o[T][C]).reduce((C,A)=>C===void 0?A:vB[`${u[T]}_${t}`](C,A))}),s=Object.keys(a),n&&s.length){const T=r?RVt:kVt;o[T]=t===Hme?{[qme]:s.reduce((C,A)=>(C.push(...a[A]),C),[])}:{[NVt]:s.map(C=>({[qme]:a[C]}))}}return o}var vB={[`${jd}_union`]:Zat,[`${jd}_intersect`]:Qat,E_union:function(e,t){if(!e.length)return t;for(var n=0,r=t.length;n<r;++n)e.indexOf(t[n])<0&&e.push(t[n]);return e},E_intersect:function(e,t){return e.length?e.filter(n=>t.indexOf(n)>=0):t},R_union:function(e,t){var n=ha(t[0]),r=ha(t[1]);return n>r&&(n=t[1],r=t[0]),e.length?(e[0]>n&&(e[0]=n),e[1]<r&&(e[1]=r),e):[n,r]},R_intersect:function(e,t){var n=ha(t[0]),r=ha(t[1]);return n>r&&(n=t[1],r=t[0]),e.length?r<e[0]||e[1]<n?[]:(e[0]<n&&(e[0]=n),e[1]>r&&(e[1]=r),e):[n,r]}};const VVt=":",HVt="@";function Tne(e,t,n,r){t[0].type!==pb&&Le("First argument to selection functions must be a string literal.");const i=t[0].value,s=t.length>=2&&Qn(t).value,o="unit",a=HVt+o,u=VVt+i;s===Sne&&!jt(r,a)&&(r[a]=n.getData(i).indataRef(n,o)),jt(r,u)||(r[u]=n.getData(i).tuplesRef())}function GLe(e){const t=this.context.data[e];return t?t.values.value:[]}function qVt(e,t,n){const r=this.context.data[e]["index:"+t],i=r?r.value.get(n):void 0;return i&&i.count}function WVt(e,t){const n=this.context.dataflow,r=this.context.data[e],i=r.input;return n.pulse(i,n.changeset().remove(jc).insert(t)),1}function GVt(e,t,n){if(e){const r=this.context.dataflow,i=e.mark.source;r.pulse(i,r.changeset().encode(e,t))}return n!==void 0?n:e}const DR=e=>function(t,n){return this.context.dataflow.locale()[e](n)(t)},YVt=DR("format"),YLe=DR("timeFormat"),KVt=DR("utcFormat"),XVt=DR("timeParse"),QVt=DR("utcParse"),OP=new Date(2e3,0,1);function DF(e,t,n){return!Number.isInteger(e)||!Number.isInteger(t)?"":(OP.setYear(2e3),OP.setMonth(e),OP.setDate(t),YLe.call(this,OP,n))}function JVt(e){return DF.call(this,e,1,"%B")}function ZVt(e){return DF.call(this,e,1,"%b")}function eHt(e){return DF.call(this,0,2+e,"%A")}function tHt(e){return DF.call(this,0,2+e,"%a")}const nHt=":",rHt="@",XH="%",KLe="$";function Cne(e,t,n,r){t[0].type!==pb&&Le("First argument to data functions must be a string literal.");const i=t[0].value,s=nHt+i;if(!jt(s,r))try{r[s]=n.getData(i).tuplesRef()}catch{}}function iHt(e,t,n,r){t[0].type!==pb&&Le("First argument to indata must be a string literal."),t[1].type!==pb&&Le("Second argument to indata must be a string literal.");const i=t[0].value,s=t[1].value,o=rHt+s;jt(o,r)||(r[o]=n.getData(i).indataRef(n,s))}function Qa(e,t,n,r){if(t[0].type===pb)Gme(n,r,t[0].value);else for(e in n.scales)Gme(n,r,e)}function Gme(e,t,n){const r=XH+n;if(!jt(t,r))try{t[r]=e.scaleRef(n)}catch{}}function ap(e,t){if(_n(e))return e;if(mt(e)){const n=t.scales[e];return n&&Rjt(n.value)?n.value:void 0}}function sHt(e,t,n){t.__bandwidth=i=>i&&i.bandwidth?i.bandwidth():0,n._bandwidth=Qa,n._range=Qa,n._scale=Qa;const r=i=>"_["+(i.type===pb?rt(XH+i.value):rt(XH)+"+"+e(i))+"]";return{_bandwidth:i=>`this.__bandwidth(${r(i[0])})`,_range:i=>`${r(i[0])}.range()`,_scale:i=>`${r(i[0])}(${e(i[1])})`}}function Ane(e,t){return function(n,r,i){if(n){const s=ap(n,(i||this).context);return s&&s.path[e](r)}else return t(r)}}const oHt=Ane("area",bht),aHt=Ane("bounds",xht),uHt=Ane("centroid",kht);function lHt(e,t){const n=ap(e,(t||this).context);return n&&n.scale()}function cHt(e){const t=this.context.group;let n=!1;if(t)for(;e;){if(e===t){n=!0;break}e=e.mark.group}return n}function Ine(e,t,n){try{e[t].apply(e,["EXPRESSION"].concat([].slice.call(n)))}catch(r){e.warn(r)}return n[n.length-1]}function fHt(){return Ine(this.context.dataflow,"warn",arguments)}function dHt(){return Ine(this.context.dataflow,"info",arguments)}function hHt(){return Ine(this.context.dataflow,"debug",arguments)}function bB(e){const t=e/255;return t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)}function QH(e){const t=G0(e),n=bB(t.r),r=bB(t.g),i=bB(t.b);return .2126*n+.7152*r+.0722*i}function pHt(e,t){const n=QH(e),r=QH(t),i=Math.max(n,r),s=Math.min(n,r);return(i+.05)/(s+.05)}function mHt(){const e=[].slice.call(arguments);return e.unshift({}),bn(...e)}function XLe(e,t){return e===t||e!==e&&t!==t?!0:je(e)?je(t)&&e.length===t.length?gHt(e,t):!1:gt(e)&&gt(t)?QLe(e,t):!1}function gHt(e,t){for(let n=0,r=e.length;n<r;++n)if(!XLe(e[n],t[n]))return!1;return!0}function QLe(e,t){for(const n in e)if(!XLe(e[n],t[n]))return!1;return!0}function Yme(e){return t=>QLe(e,t)}function yHt(e,t,n,r,i,s){const o=this.context.dataflow,a=this.context.data[e],u=a.input,l=o.stamp();let c=a.changes,f,d;if(o._trigger===!1||!(u.value.length||t||r))return 0;if((!c||c.stamp<l)&&(a.changes=c=o.changeset(),c.stamp=l,o.runAfter(()=>{a.modified=!0,o.pulse(u,c).run()},!0,1)),n&&(f=n===!0?jc:je(n)||rF(n)?n:Yme(n),c.remove(f)),t&&c.insert(t),r&&(f=Yme(r),u.value.some(f)?c.remove(f):c.insert(r)),i)for(d in s)c.modify(i,d,s[d]);return 1}function vHt(e){const t=e.touches,n=t[0].clientX-t[1].clientX,r=t[0].clientY-t[1].clientY;return Math.hypot(n,r)}function bHt(e){const t=e.touches;return Math.atan2(t[0].clientY-t[1].clientY,t[0].clientX-t[1].clientX)}const Kme={};function _Ht(e,t){const n=Kme[t]||(Kme[t]=Fc(t));return je(e)?e.map(n):n(e)}function kne(e){return je(e)||ArrayBuffer.isView(e)?e:null}function Rne(e){return kne(e)||(mt(e)?e:null)}function wHt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return kne(e).join(...n)}function EHt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Rne(e).indexOf(...n)}function xHt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Rne(e).lastIndexOf(...n)}function SHt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Rne(e).slice(...n)}function THt(e,t,n){return _n(n)&&Le("Function argument passed to replace."),String(e).replace(t,n)}function CHt(e){return kne(e).slice().reverse()}function AHt(e,t,n){return ete(e||0,t||0,n||0)}function IHt(e,t){const n=ap(e,(t||this).context);return n&&n.bandwidth?n.bandwidth():0}function kHt(e,t){const n=ap(e,(t||this).context);return n?n.copy():void 0}function RHt(e,t){const n=ap(e,(t||this).context);return n?n.domain():[]}function NHt(e,t,n){const r=ap(e,(n||this).context);return r?je(t)?(r.invertRange||r.invert)(t):(r.invert||r.invertExtent)(t):void 0}function PHt(e,t){const n=ap(e,(t||this).context);return n&&n.range?n.range():[]}function DHt(e,t,n){const r=ap(e,(n||this).context);return r?r(t):void 0}function OHt(e,t,n,r,i){e=ap(e,(i||this).context);const s=U$e(t,n);let o=e.domain(),a=o[0],u=Qn(o),l=xa;return u-a?l=k$e(e,a,u):e=(e.interpolator?gr("sequential")().interpolator(e.interpolator()):gr("linear")().interpolate(e.interpolate()).range(e.range())).domain([a=0,u=1]),e.ticks&&(o=e.ticks(+r||15),a!==o[0]&&o.unshift(a),u!==Qn(o)&&o.push(u)),o.forEach(c=>s.stop(l(c),e(c))),s}function $Ht(e,t,n){const r=ap(e,(n||this).context);return function(i){return r?r.path.context(i)(t):""}}function MHt(e){let t=null;return function(n){return n?$I(n,t=t||Cx(e)):e}}const JLe=e=>e.data;function ZLe(e,t){const n=GLe.call(t,e);return n.root&&n.root.lookup||{}}function LHt(e,t,n){const r=ZLe(e,this),i=r[t],s=r[n];return i&&s?i.path(s).map(JLe):void 0}function FHt(e,t){const n=ZLe(e,this)[t];return n?n.ancestors().map(JLe):void 0}const e6e=()=>typeof window<"u"&&window||null;function jHt(){const e=e6e();return e?e.screen:{}}function BHt(){const e=e6e();return e?[e.innerWidth,e.innerHeight]:[void 0,void 0]}function UHt(){const e=this.context.dataflow,t=e.container&&e.container();return t?[t.clientWidth,t.clientHeight]:[void 0,void 0]}function t6e(e,t,n){if(!e)return[];const[r,i]=e,s=new Ts().set(r[0],r[1],i[0],i[1]),o=n||this.context.dataflow.scenegraph().root;return FMe(o,s,zHt(t))}function zHt(e){let t=null;if(e){const n=pt(e.marktype),r=pt(e.markname);t=i=>(!n.length||n.some(s=>i.marktype===s))&&(!r.length||r.some(s=>i.name===s))}return t}function VHt(e,t,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:5;e=pt(e);const i=e[e.length-1];return i===void 0||Math.hypot(i[0]-t,i[1]-n)>r?[...e,[t,n]]:e}function HHt(e){return pt(e).reduce((t,n,r)=>{let[i,s]=n;return t+=r==0?`M ${i},${s} `:r===e.length-1?" Z":`L ${i},${s} `},"")}function qHt(e,t,n){const{x:r,y:i,mark:s}=n,o=new Ts().set(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,Number.MIN_SAFE_INTEGER,Number.MIN_SAFE_INTEGER);for(const[u,l]of t)u<o.x1&&(o.x1=u),u>o.x2&&(o.x2=u),l<o.y1&&(o.y1=l),l>o.y2&&(o.y2=l);return o.translate(r,i),t6e([[o.x1,o.y1],[o.x2,o.y2]],e,s).filter(u=>WHt(u.x,u.y,t))}function WHt(e,t,n){let r=0;for(let i=0,s=n.length-1;i<n.length;s=i++){const[o,a]=n[s],[u,l]=n[i];l>t!=a>t&&e<(o-u)*(t-l)/(a-l)+u&&r++}return r&1}const zI={random(){return Uc()},cumulativeNormal:uF,cumulativeLogNormal:_ee,cumulativeUniform:See,densityNormal:mee,densityLogNormal:bee,densityUniform:xee,quantileNormal:lF,quantileLogNormal:wee,quantileUniform:Tee,sampleNormal:aF,sampleLogNormal:vee,sampleUniform:Eee,isArray:je,isBoolean:Yy,isDate:P0,isDefined(e){return e!==void 0},isNumber:lr,isObject:gt,isRegExp:jOe,isString:mt,isTuple:rF,isValid(e){return e!=null&&e===e},toBoolean:ZZ,toDate(e){return eee(e)},toNumber:ha,toString:tee,indexof:EHt,join:wHt,lastindexof:xHt,replace:THt,reverse:CHt,slice:SHt,flush:LOe,lerp:BOe,merge:mHt,pad:VOe,peek:Qn,pluck:_Ht,span:hR,inrange:Mw,truncate:HOe,rgb:G0,lab:v3,hcl:b3,hsl:g3,luminance:QH,contrast:pHt,sequence:Mu,format:YVt,utcFormat:KVt,utcParse:QVt,utcOffset:i3e,utcSequence:a3e,timeFormat:YLe,timeParse:XVt,timeOffset:r3e,timeSequence:o3e,timeUnitSpecifier:WOe,monthFormat:JVt,monthAbbrevFormat:ZVt,dayFormat:eHt,dayAbbrevFormat:tHt,quarter:DOe,utcquarter:OOe,week:YOe,utcweek:QOe,dayofyear:GOe,utcdayofyear:XOe,warn:fHt,info:dHt,debug:hHt,extent(e){return Fh(e)},inScope:cHt,intersect:t6e,clampRange:$Oe,pinchDistance:vHt,pinchAngle:bHt,screen:jHt,containerSize:UHt,windowSize:BHt,bandspace:AHt,setdata:WVt,pathShape:MHt,panLinear:kOe,panLog:ROe,panPow:NOe,panSymlog:POe,zoomLinear:GZ,zoomLog:YZ,zoomPow:dM,zoomSymlog:KZ,encode:GVt,modify:yHt,lassoAppend:VHt,lassoPath:HHt,intersectLasso:qHt},GHt=["view","item","group","xy","x","y"],YHt="event.vega.",n6e="this.",Nne={},r6e={forbidden:["_"],allowed:["datum","event","item"],fieldvar:"datum",globalvar:e=>`_[${rt(KLe+e)}]`,functions:KHt,constants:zLe,visitors:Nne},JH=HLe(r6e);function KHt(e){const t=VLe(e);GHt.forEach(n=>t[n]=YHt+n);for(const n in zI)t[n]=n6e+n;return bn(t,sHt(e,zI,Nne)),t}function ms(e,t,n){return arguments.length===1?zI[e]:(zI[e]=t,n&&(Nne[e]=n),JH&&(JH.functions[e]=n6e+e),this)}ms("bandwidth",IHt,Qa);ms("copy",kHt,Qa);ms("domain",RHt,Qa);ms("range",PHt,Qa);ms("invert",NHt,Qa);ms("scale",DHt,Qa);ms("gradient",OHt,Qa);ms("geoArea",oHt,Qa);ms("geoBounds",aHt,Qa);ms("geoCentroid",uHt,Qa);ms("geoShape",$Ht,Qa);ms("geoScale",lHt,Qa);ms("indata",qVt,iHt);ms("data",GLe,Cne);ms("treePath",LHt,Cne);ms("treeAncestors",FHt,Cne);ms("vlSelectionTest",LVt,Tne);ms("vlSelectionIdTest",BVt,Tne);ms("vlSelectionResolve",zVt,Tne);ms("vlSelectionTuples",UVt);function Bh(e,t){const n={};let r;try{e=mt(e)?e:rt(e)+"",r=xne(e)}catch{Le("Expression parse error: "+e)}r.visit(s=>{if(s.type!==$Le)return;const o=s.callee.name,a=r6e.visitors[o];a&&a(o,s.arguments,t,n)});const i=JH(r);return i.globals.forEach(s=>{const o=KLe+s;!jt(n,o)&&t.getSignal(s)&&(n[o]=t.signalRef(s))}),{$expr:bn({code:i.code},t.options.ast?{ast:r}:null),$fields:i.fields,$params:n}}function XHt(e){const t=this,n=e.operators||[];return e.background&&(t.background=e.background),e.eventConfig&&(t.eventConfig=e.eventConfig),e.locale&&(t.locale=e.locale),n.forEach(r=>t.parseOperator(r)),n.forEach(r=>t.parseOperatorParameters(r)),(e.streams||[]).forEach(r=>t.parseStream(r)),(e.updates||[]).forEach(r=>t.parseUpdate(r)),t.resolve()}const QHt=td(["rule"]),Xme=td(["group","image","rect"]);function JHt(e,t){let n="";return QHt[t]||(e.x2&&(e.x?(Xme[t]&&(n+="if(o.x>o.x2)$=o.x,o.x=o.x2,o.x2=$;"),n+="o.width=o.x2-o.x;"):n+="o.x=o.x2-(o.width||0);"),e.xc&&(n+="o.x=o.xc-(o.width||0)/2;"),e.y2&&(e.y?(Xme[t]&&(n+="if(o.y>o.y2)$=o.y,o.y=o.y2,o.y2=$;"),n+="o.height=o.y2-o.y;"):n+="o.y=o.y2-(o.height||0);"),e.yc&&(n+="o.y=o.yc-(o.height||0)/2;")),n}function Pne(e){return(e+"").toLowerCase()}function ZHt(e){return Pne(e)==="operator"}function eqt(e){return Pne(e)==="collect"}function t2(e,t,n){n.endsWith(";")||(n="return("+n+");");const r=Function(...t.concat(n));return e&&e.functions?r.bind(e.functions):r}function tqt(e,t,n,r){return`((u = ${e}) < (v = ${t}) || u == null) && v != null ? ${n}
  : (u > v || v == null) && u != null ? ${r}
  : ((v = v instanceof Date ? +v : v), (u = u instanceof Date ? +u : u)) !== u && v === v ? ${n}
  : v !== v && u === u ? ${r} : `}var nqt={operator:(e,t)=>t2(e,["_"],t.code),parameter:(e,t)=>t2(e,["datum","_"],t.code),event:(e,t)=>t2(e,["event"],t.code),handler:(e,t)=>{const n=`var datum=event.item&&event.item.datum;return ${t.code};`;return t2(e,["_","event"],n)},encode:(e,t)=>{const{marktype:n,channels:r}=t;let i="var o=item,datum=o.datum,m=0,$;";for(const s in r){const o="o["+rt(s)+"]";i+=`$=${r[s].code};if(${o}!==$)${o}=$,m=1;`}return i+=JHt(r,n),i+="return m;",t2(e,["item","_"],i)},codegen:{get(e){const t=`[${e.map(rt).join("][")}]`,n=Function("_",`return _${t};`);return n.path=t,n},comparator(e,t){let n;const r=(s,o)=>{const a=t[o];let u,l;return s.path?(u=`a${s.path}`,l=`b${s.path}`):((n=n||{})["f"+o]=s,u=`this.f${o}(a)`,l=`this.f${o}(b)`),tqt(u,l,-a,a)},i=Function("a","b","var u, v; return "+e.map(r).join("")+"0;");return n?i.bind(n):i}}};function rqt(e){const t=this;ZHt(e.type)||!e.type?t.operator(e,e.update?t.operatorExpression(e.update):null):t.transform(e,e.type)}function iqt(e){const t=this;if(e.params){const n=t.get(e.id);n||Le("Invalid operator id: "+e.id),t.dataflow.connect(n,n.parameters(t.parseParameters(e.params),e.react,e.initonly))}}function sqt(e,t){t=t||{};const n=this;for(const r in e){const i=e[r];t[r]=je(i)?i.map(s=>Qme(s,n,t)):Qme(i,n,t)}return t}function Qme(e,t,n){if(!e||!gt(e))return e;for(let r=0,i=Jme.length,s;r<i;++r)if(s=Jme[r],jt(e,s.key))return s.parse(e,t,n);return e}var Jme=[{key:"$ref",parse:oqt},{key:"$key",parse:uqt},{key:"$expr",parse:aqt},{key:"$field",parse:lqt},{key:"$encode",parse:fqt},{key:"$compare",parse:cqt},{key:"$context",parse:dqt},{key:"$subflow",parse:hqt},{key:"$tupleid",parse:pqt}];function oqt(e,t){return t.get(e.$ref)||Le("Operator not defined: "+e.$ref)}function aqt(e,t,n){e.$params&&t.parseParameters(e.$params,n);const r="e:"+e.$expr.code;return t.fn[r]||(t.fn[r]=ll(t.parameterExpression(e.$expr),e.$fields))}function uqt(e,t){const n="k:"+e.$key+"_"+!!e.$flat;return t.fn[n]||(t.fn[n]=JZ(e.$key,e.$flat,t.expr.codegen))}function lqt(e,t){if(!e.$field)return null;const n="f:"+e.$field+"_"+e.$name;return t.fn[n]||(t.fn[n]=Fc(e.$field,e.$name,t.expr.codegen))}function cqt(e,t){const n="c:"+e.$compare+"_"+e.$order,r=pt(e.$compare).map(i=>i&&i.$tupleid?Lt:i);return t.fn[n]||(t.fn[n]=XZ(r,e.$order,t.expr.codegen))}function fqt(e,t){const n=e.$encode,r={};for(const i in n){const s=n[i];r[i]=ll(t.encodeExpression(s.$expr),s.$fields),r[i].output=s.$output}return r}function dqt(e,t){return t}function hqt(e,t){const n=e.$subflow;return function(r,i,s){const o=t.fork().parse(n),a=o.get(n.operators[0].id),u=o.signals.parent;return u&&u.set(s),a.detachSubflow=()=>t.detach(o),a}}function pqt(){return Lt}function mqt(e){var t=this,n=e.filter!=null?t.eventExpression(e.filter):void 0,r=e.stream!=null?t.get(e.stream):void 0,i;e.source?r=t.events(e.source,e.type,n):e.merge&&(i=e.merge.map(s=>t.get(s)),r=i[0].merge.apply(i[0],i.slice(1))),e.between&&(i=e.between.map(s=>t.get(s)),r=r.between(i[0],i[1])),e.filter&&(r=r.filter(n)),e.throttle!=null&&(r=r.throttle(+e.throttle)),e.debounce!=null&&(r=r.debounce(+e.debounce)),r==null&&Le("Invalid stream definition: "+JSON.stringify(e)),e.consume&&r.consume(!0),t.stream(e,r)}function gqt(e){var t=this,n=gt(n=e.source)?n.$ref:n,r=t.get(n),i=null,s=e.update,o=void 0;r||Le("Source not defined: "+e.source),i=e.target&&e.target.$expr?t.eventExpression(e.target.$expr):t.get(e.target),s&&s.$expr&&(s.$params&&(o=t.parseParameters(s.$params)),s=t.handlerExpression(s.$expr)),t.update(e,r,i,s,o)}const yqt={skip:!0};function vqt(e){var t=this,n={};if(e.signals){var r=n.signals={};Object.keys(t.signals).forEach(s=>{const o=t.signals[s];e.signals(s,o)&&(r[s]=o.value)})}if(e.data){var i=n.data={};Object.keys(t.data).forEach(s=>{const o=t.data[s];e.data(s,o)&&(i[s]=o.input.value)})}return t.subcontext&&e.recurse!==!1&&(n.subcontext=t.subcontext.map(s=>s.getState(e))),n}function bqt(e){var t=this,n=t.dataflow,r=e.data,i=e.signals;Object.keys(i||{}).forEach(s=>{n.update(t.signals[s],i[s],yqt)}),Object.keys(r||{}).forEach(s=>{n.pulse(t.data[s].input,n.changeset().remove(jc).insert(r[s]))}),(e.subcontext||[]).forEach((s,o)=>{const a=t.subcontext[o];a&&a.setState(s)})}function i6e(e,t,n,r){return new s6e(e,t,n,r)}function s6e(e,t,n,r){this.dataflow=e,this.transforms=t,this.events=e.events.bind(e),this.expr=r||nqt,this.signals={},this.scales={},this.nodes={},this.data={},this.fn={},n&&(this.functions=Object.create(n),this.functions.context=this)}function Zme(e){this.dataflow=e.dataflow,this.transforms=e.transforms,this.events=e.events,this.expr=e.expr,this.signals=Object.create(e.signals),this.scales=Object.create(e.scales),this.nodes=Object.create(e.nodes),this.data=Object.create(e.data),this.fn=Object.create(e.fn),e.functions&&(this.functions=Object.create(e.functions),this.functions.context=this)}s6e.prototype=Zme.prototype={fork(){const e=new Zme(this);return(this.subcontext||(this.subcontext=[])).push(e),e},detach(e){this.subcontext=this.subcontext.filter(n=>n!==e);const t=Object.keys(e.nodes);for(const n of t)e.nodes[n]._targets=null;for(const n of t)e.nodes[n].detach();e.nodes=null},get(e){return this.nodes[e]},set(e,t){return this.nodes[e]=t},add(e,t){const n=this,r=n.dataflow,i=e.value;if(n.set(e.id,t),eqt(e.type)&&i&&(i.$ingest?r.ingest(t,i.$ingest,i.$format):i.$request?r.preload(t,i.$request,i.$format):r.pulse(t,r.changeset().insert(i))),e.root&&(n.root=t),e.parent){let s=n.get(e.parent.$ref);s?(r.connect(s,[t]),t.targets().add(s)):(n.unresolved=n.unresolved||[]).push(()=>{s=n.get(e.parent.$ref),r.connect(s,[t]),t.targets().add(s)})}if(e.signal&&(n.signals[e.signal]=t),e.scale&&(n.scales[e.scale]=t),e.data)for(const s in e.data){const o=n.data[s]||(n.data[s]={});e.data[s].forEach(a=>o[a]=t)}},resolve(){return(this.unresolved||[]).forEach(e=>e()),delete this.unresolved,this},operator(e,t){this.add(e,this.dataflow.add(e.value,t))},transform(e,t){this.add(e,this.dataflow.add(this.transforms[Pne(t)]))},stream(e,t){this.set(e.id,t)},update(e,t,n,r,i){this.dataflow.on(t,n,r,i,e.options)},operatorExpression(e){return this.expr.operator(this,e)},parameterExpression(e){return this.expr.parameter(this,e)},eventExpression(e){return this.expr.event(this,e)},handlerExpression(e){return this.expr.handler(this,e)},encodeExpression(e){return this.expr.encode(this,e)},parse:XHt,parseOperator:rqt,parseOperatorParameters:iqt,parseParameters:sqt,parseStream:mqt,parseUpdate:gqt,getState:vqt,setState:bqt};function _qt(e){const t=e.container();t&&(t.setAttribute("role","graphics-document"),t.setAttribute("aria-roleDescription","visualization"),o6e(t,e.description()))}function o6e(e,t){e&&(t==null?e.removeAttribute("aria-label"):e.setAttribute("aria-label",t))}function wqt(e){e.add(null,t=>(e._background=t.bg,e._resize=1,t.bg),{bg:e._signals.background})}const _B="default";function Eqt(e){const t=e._signals.cursor||(e._signals.cursor=e.add({user:_B,item:null}));e.on(e.events("view","pointermove"),t,(n,r)=>{const i=t.value,s=i?mt(i)?i:i.user:_B,o=r.item&&r.item.cursor||null;return i&&s===i.user&&o==i.item?i:{user:s,item:o}}),e.add(null,function(n){let r=n.cursor,i=this.value;return mt(r)||(i=r.item,r=r.user),ZH(e,r&&r!==_B?r:i||r),i},{cursor:t})}function ZH(e,t){const n=e.globalCursor()?typeof document<"u"&&document.body:e.container();if(n)return t==null?n.style.removeProperty("cursor"):n.style.cursor=t}function OM(e,t){var n=e._runtime.data;return jt(n,t)||Le("Unrecognized data set: "+t),n[t]}function xqt(e,t){return arguments.length<2?OM(this,e).values.value:OF.call(this,e,s_().remove(jc).insert(t))}function OF(e,t){A3e(t)||Le("Second argument to changes must be a changeset.");const n=OM(this,e);return n.modified=!0,this.pulse(n.input,t)}function Sqt(e,t){return OF.call(this,e,s_().insert(t))}function Tqt(e,t){return OF.call(this,e,s_().remove(t))}function a6e(e){var t=e.padding();return Math.max(0,e._viewWidth+t.left+t.right)}function u6e(e){var t=e.padding();return Math.max(0,e._viewHeight+t.top+t.bottom)}function $F(e){var t=e.padding(),n=e._origin;return[t.left+n[0],t.top+n[1]]}function Cqt(e){var t=$F(e),n=a6e(e),r=u6e(e);e._renderer.background(e.background()),e._renderer.resize(n,r,t),e._handler.origin(t),e._resizeListeners.forEach(i=>{try{i(n,r)}catch(s){e.error(s)}})}function Aqt(e,t,n){var r=e._renderer,i=r&&r.canvas(),s,o,a;return i&&(a=$F(e),o=t.changedTouches?t.changedTouches[0]:t,s=CF(o,i),s[0]-=a[0],s[1]-=a[1]),t.dataflow=e,t.item=n,t.vega=Iqt(e,n,s),t}function Iqt(e,t,n){const r=t?t.mark.marktype==="group"?t:t.mark.group:null;function i(o){var a=r,u;if(o){for(u=t;u;u=u.mark.group)if(u.mark.name===o){a=u;break}}return a&&a.mark&&a.mark.interactive?a:{}}function s(o){if(!o)return n;mt(o)&&(o=i(o));const a=n.slice();for(;o;)a[0]-=o.x||0,a[1]-=o.y||0,o=o.mark&&o.mark.group;return a}return{view:Sa(e),item:Sa(t||{}),group:i,xy:s,x:o=>s(o)[0],y:o=>s(o)[1]}}const ege="view",kqt="timer",Rqt="window",Nqt={trap:!1};function Pqt(e){const t=bn({defaults:{}},e),n=(r,i)=>{i.forEach(s=>{je(r[s])&&(r[s]=td(r[s]))})};return n(t.defaults,["prevent","allow"]),n(t,["view","window","selector"]),t}function l6e(e,t,n,r){e._eventListeners.push({type:n,sources:pt(t),handler:r})}function Dqt(e,t){var n=e._eventConfig.defaults,r=n.prevent,i=n.allow;return r===!1||i===!0?!1:r===!0||i===!1?!0:r?r[t]:i?!i[t]:e.preventDefault()}function $P(e,t,n){const r=e._eventConfig&&e._eventConfig[t];return r===!1||gt(r)&&!r[n]?(e.warn(`Blocked ${t} ${n} event listener.`),!1):!0}function Oqt(e,t,n){var r=this,i=new oF(n),s=function(l,c){r.runAsync(null,()=>{e===ege&&Dqt(r,t)&&l.preventDefault(),i.receive(Aqt(r,l,c))})},o;if(e===kqt)$P(r,"timer",t)&&r.timer(s,t);else if(e===ege)$P(r,"view",t)&&r.addEventListener(t,s,Nqt);else if(e===Rqt?$P(r,"window",t)&&typeof window<"u"&&(o=[window]):typeof document<"u"&&$P(r,"selector",t)&&(o=Array.from(document.querySelectorAll(e))),!o)r.warn("Can not resolve event source: "+e);else{for(var a=0,u=o.length;a<u;++a)o[a].addEventListener(t,s);l6e(r,o,t,s)}return i}function tge(e){return e.item}function nge(e){return e.item.mark.source}function rge(e){return function(t,n){return n.vega.view().changeset().encode(n.item,e)}}function $qt(e,t){return e=[e||"hover"],t=[t||"update",e[0]],this.on(this.events("view","pointerover",tge),nge,rge(e)),this.on(this.events("view","pointerout",tge),nge,rge(t)),this}function Mqt(){var e=this._tooltip,t=this._timers,n=this._handler.handlers(),r=this._eventListeners,i,s,o,a,u;for(i=t.length;--i>=0;)t[i].stop();for(i=r.length;--i>=0;)for(o=r[i],s=o.sources.length;--s>=0;)o.sources[s].removeEventListener(o.type,o.handler);for(e&&e.call(this,this._handler,null,null,null),i=n.length;--i>=0;)u=n[i].type,a=n[i].handler,this._handler.off(u,a);return this}function Ol(e,t,n){const r=document.createElement(e);for(const i in t)r.setAttribute(i,t[i]);return n!=null&&(r.textContent=n),r}const Lqt="vega-bind",Fqt="vega-bind-name",jqt="vega-bind-radio";function Bqt(e,t,n){if(!t)return;const r=n.param;let i=n.state;return i||(i=n.state={elements:null,active:!1,set:null,update:o=>{o!=e.signal(r.signal)&&e.runAsync(null,()=>{i.source=!0,e.signal(r.signal,o)})}},r.debounce&&(i.update=QZ(r.debounce,i.update))),(r.input==null&&r.element?Uqt:Vqt)(i,t,r,e),i.active||(e.on(e._signals[r.signal],null,()=>{i.source?i.source=!1:i.set(e.signal(r.signal))}),i.active=!0),i}function Uqt(e,t,n,r){const i=n.event||"input",s=()=>e.update(t.value);r.signal(n.signal,t.value),t.addEventListener(i,s),l6e(r,t,i,s),e.set=o=>{t.value=o,t.dispatchEvent(zqt(i))}}function zqt(e){return typeof Event<"u"?new Event(e):{type:e}}function Vqt(e,t,n,r){const i=r.signal(n.signal),s=Ol("div",{class:Lqt}),o=n.input==="radio"?s:s.appendChild(Ol("label"));o.appendChild(Ol("span",{class:Fqt},n.name||n.signal)),t.appendChild(s);let a=Hqt;switch(n.input){case"checkbox":a=qqt;break;case"select":a=Wqt;break;case"radio":a=Gqt;break;case"range":a=Yqt;break}a(e,o,n,i)}function Hqt(e,t,n,r){const i=Ol("input");for(const s in n)s!=="signal"&&s!=="element"&&i.setAttribute(s==="input"?"type":s,n[s]);i.setAttribute("name",n.signal),i.value=r,t.appendChild(i),i.addEventListener("input",()=>e.update(i.value)),e.elements=[i],e.set=s=>i.value=s}function qqt(e,t,n,r){const i={type:"checkbox",name:n.signal};r&&(i.checked=!0);const s=Ol("input",i);t.appendChild(s),s.addEventListener("change",()=>e.update(s.checked)),e.elements=[s],e.set=o=>s.checked=!!o||null}function Wqt(e,t,n,r){const i=Ol("select",{name:n.signal}),s=n.labels||[];n.options.forEach((o,a)=>{const u={value:o};$M(o,r)&&(u.selected=!0),i.appendChild(Ol("option",u,(s[a]||o)+""))}),t.appendChild(i),i.addEventListener("change",()=>{e.update(n.options[i.selectedIndex])}),e.elements=[i],e.set=o=>{for(let a=0,u=n.options.length;a<u;++a)if($M(n.options[a],o)){i.selectedIndex=a;return}}}function Gqt(e,t,n,r){const i=Ol("span",{class:jqt}),s=n.labels||[];t.appendChild(i),e.elements=n.options.map((o,a)=>{const u={type:"radio",name:n.signal,value:o};$M(o,r)&&(u.checked=!0);const l=Ol("input",u);l.addEventListener("change",()=>e.update(o));const c=Ol("label",{},(s[a]||o)+"");return c.prepend(l),i.appendChild(c),l}),e.set=o=>{const a=e.elements,u=a.length;for(let l=0;l<u;++l)$M(a[l].value,o)&&(a[l].checked=!0)}}function Yqt(e,t,n,r){r=r!==void 0?r:(+n.max+ +n.min)/2;const i=n.max!=null?n.max:Math.max(100,+r)||100,s=n.min||Math.min(0,i,+r)||0,o=n.step||W0(s,i,100),a=Ol("input",{type:"range",name:n.signal,min:s,max:i,step:o});a.value=r;const u=Ol("span",{},+r);t.appendChild(a),t.appendChild(u);const l=()=>{u.textContent=a.value,e.update(+a.value)};a.addEventListener("input",l),a.addEventListener("change",l),e.elements=[a],e.set=c=>{a.value=c,u.textContent=c}}function $M(e,t){return e===t||e+""==t+""}function c6e(e,t,n,r,i,s){return t=t||new r(e.loader()),t.initialize(n,a6e(e),u6e(e),$F(e),i,s).background(e.background())}function Dne(e,t){return t?function(){try{t.apply(this,arguments)}catch(n){e.error(n)}}:null}function Kqt(e,t,n,r){const i=new r(e.loader(),Dne(e,e.tooltip())).scene(e.scenegraph().root).initialize(n,$F(e),e);return t&&t.handlers().forEach(s=>{i.on(s.type,s.handler)}),i}function Xqt(e,t){const n=this,r=n._renderType,i=n._eventConfig.bind,s=AF(r);e=n._el=e?wB(n,e,!0):null,_qt(n),s||n.error("Unrecognized renderer type: "+r);const o=s.handler||kR,a=e?s.renderer:s.headless;return n._renderer=a?c6e(n,n._renderer,e,a):null,n._handler=Kqt(n,n._handler,e,o),n._redraw=!0,e&&i!=="none"&&(t=t?n._elBind=wB(n,t,!0):e.appendChild(Ol("form",{class:"vega-bindings"})),n._bind.forEach(u=>{u.param.element&&i!=="container"&&(u.element=wB(n,u.param.element,!!u.param.input))}),n._bind.forEach(u=>{Bqt(n,u.element||t,u)})),n}function wB(e,t,n){if(typeof t=="string")if(typeof document<"u"){if(t=document.querySelector(t),!t)return e.error("Signal bind element not found: "+t),null}else return e.error("DOM document instance not found."),null;if(t&&n)try{t.textContent=""}catch(r){t=null,e.error(r)}return t}const n2=e=>+e||0,Qqt=e=>({top:e,bottom:e,left:e,right:e});function ige(e){return gt(e)?{top:n2(e.top),bottom:n2(e.bottom),left:n2(e.left),right:n2(e.right)}:Qqt(n2(e))}async function One(e,t,n,r){const i=AF(t),s=i&&i.headless;return s||Le("Unrecognized renderer type: "+t),await e.runAsync(),c6e(e,null,null,s,n,r).renderAsync(e._scenegraph.root)}async function Jqt(e,t){e!==a0.Canvas&&e!==a0.SVG&&e!==a0.PNG&&Le("Unrecognized image type: "+e);const n=await One(this,e,t);return e===a0.SVG?Zqt(n.svg(),"image/svg+xml"):n.canvas().toDataURL("image/png")}function Zqt(e,t){const n=new Blob([e],{type:t});return window.URL.createObjectURL(n)}async function eWt(e,t){return(await One(this,a0.Canvas,e,t)).canvas()}async function tWt(e){return(await One(this,a0.SVG,e)).svg()}function nWt(e,t,n){return i6e(e,Ex,zI,n).parse(t)}function rWt(e){var t=this._runtime.scales;return jt(t,e)||Le("Unrecognized scale or projection: "+e),t[e].value}var f6e="width",d6e="height",$ne="padding",sge={skip:!0};function h6e(e,t){var n=e.autosize(),r=e.padding();return t-(n&&n.contains===$ne?r.left+r.right:0)}function p6e(e,t){var n=e.autosize(),r=e.padding();return t-(n&&n.contains===$ne?r.top+r.bottom:0)}function iWt(e){var t=e._signals,n=t[f6e],r=t[d6e],i=t[$ne];function s(){e._autosize=e._resize=1}e._resizeWidth=e.add(null,a=>{e._width=a.size,e._viewWidth=h6e(e,a.size),s()},{size:n}),e._resizeHeight=e.add(null,a=>{e._height=a.size,e._viewHeight=p6e(e,a.size),s()},{size:r});const o=e.add(null,s,{pad:i});e._resizeWidth.rank=n.rank+1,e._resizeHeight.rank=r.rank+1,o.rank=i.rank+1}function sWt(e,t,n,r,i,s){this.runAfter(o=>{let a=0;o._autosize=0,o.width()!==n&&(a=1,o.signal(f6e,n,sge),o._resizeWidth.skip(!0)),o.height()!==r&&(a=1,o.signal(d6e,r,sge),o._resizeHeight.skip(!0)),o._viewWidth!==e&&(o._resize=1,o._viewWidth=e),o._viewHeight!==t&&(o._resize=1,o._viewHeight=t),(o._origin[0]!==i[0]||o._origin[1]!==i[1])&&(o._resize=1,o._origin=i),a&&o.run("enter"),s&&o.runAfter(u=>u.resize())},!1,1)}function oWt(e){return this._runtime.getState(e||{data:aWt,signals:uWt,recurse:!0})}function aWt(e,t){return t.modified&&je(t.input.value)&&!e.startsWith("_:vega:_")}function uWt(e,t){return!(e==="parent"||t instanceof Ex.proxy)}function lWt(e){return this.runAsync(null,t=>{t._trigger=!1,t._runtime.setState(e)},t=>{t._trigger=!0}),this}function cWt(e,t){function n(r){e({timestamp:Date.now(),elapsed:r})}this._timers.push(Dct(n,t))}function fWt(e,t,n,r){const i=e.element();i&&i.setAttribute("title",dWt(r))}function dWt(e){return e==null?"":je(e)?m6e(e):gt(e)&&!P0(e)?hWt(e):e+""}function hWt(e){return Object.keys(e).map(t=>{const n=e[t];return t+": "+(je(n)?m6e(n):g6e(n))}).join(`
`)}function m6e(e){return"["+e.map(g6e).join(", ")+"]"}function g6e(e){return je(e)?"[…]":gt(e)&&!P0(e)?"{…}":e}function pWt(){if(this.renderer()==="canvas"&&this._renderer._canvas){let e=null;const t=()=>{e!=null&&e();const n=matchMedia(`(resolution: ${window.devicePixelRatio}dppx)`);n.addEventListener("change",t),e=()=>{n.removeEventListener("change",t)},this._renderer._canvas.getContext("2d").pixelRatio=window.devicePixelRatio||1,this._redraw=!0,this._resize=1,this.resize().runAsync()};t()}}function y6e(e,t){const n=this;if(t=t||{},vE.call(n),t.loader&&n.loader(t.loader),t.logger&&n.logger(t.logger),t.logLevel!=null&&n.logLevel(t.logLevel),t.locale||e.locale){const s=bn({},e.locale,t.locale);n.locale(y3e(s.number,s.time))}n._el=null,n._elBind=null,n._renderType=t.renderer||a0.Canvas,n._scenegraph=new fMe;const r=n._scenegraph.root;n._renderer=null,n._tooltip=t.tooltip||fWt,n._redraw=!0,n._handler=new kR().scene(r),n._globalCursor=!1,n._preventDefault=!1,n._timers=[],n._eventListeners=[],n._resizeListeners=[],n._eventConfig=Pqt(e.eventConfig),n.globalCursor(n._eventConfig.globalCursor);const i=nWt(n,e,t.expr);n._runtime=i,n._signals=i.signals,n._bind=(e.bindings||[]).map(s=>({state:null,param:bn({},s)})),i.root&&i.root.set(r),r.source=i.data.root.input,n.pulse(i.data.root.input,n.changeset().insert(r.items)),n._width=n.width(),n._height=n.height(),n._viewWidth=h6e(n,n._width),n._viewHeight=p6e(n,n._height),n._origin=[0,0],n._resize=0,n._autosize=1,iWt(n),wqt(n),Eqt(n),n.description(e.description),t.hover&&n.hover(),t.container&&n.initialize(t.container,t.bind),t.watchPixelRatio&&n._watchPixelRatio()}function MP(e,t){return jt(e._signals,t)?e._signals[t]:Le("Unrecognized signal name: "+rt(t))}function v6e(e,t){const n=(e._targets||[]).filter(r=>r._update&&r._update.handler===t);return n.length?n[0]:null}function oge(e,t,n,r){let i=v6e(n,r);return i||(i=Dne(e,()=>r(t,n.value)),i.handler=r,e.on(n,null,i)),e}function age(e,t,n){const r=v6e(t,n);return r&&t._targets.remove(r),e}lt(y6e,vE,{async evaluate(e,t,n){if(await vE.prototype.evaluate.call(this,e,t),this._redraw||this._resize)try{this._renderer&&(this._resize&&(this._resize=0,Cqt(this)),await this._renderer.renderAsync(this._scenegraph.root)),this._redraw=!1}catch(r){this.error(r)}return n&&KD(this,n),this},dirty(e){this._redraw=!0,this._renderer&&this._renderer.dirty(e)},description(e){if(arguments.length){const t=e!=null?e+"":null;return t!==this._desc&&o6e(this._el,this._desc=t),this}return this._desc},container(){return this._el},scenegraph(){return this._scenegraph},origin(){return this._origin.slice()},signal(e,t,n){const r=MP(this,e);return arguments.length===1?r.value:this.update(r,t,n)},width(e){return arguments.length?this.signal("width",e):this.signal("width")},height(e){return arguments.length?this.signal("height",e):this.signal("height")},padding(e){return arguments.length?this.signal("padding",ige(e)):ige(this.signal("padding"))},autosize(e){return arguments.length?this.signal("autosize",e):this.signal("autosize")},background(e){return arguments.length?this.signal("background",e):this.signal("background")},renderer(e){return arguments.length?(AF(e)||Le("Unrecognized renderer type: "+e),e!==this._renderType&&(this._renderType=e,this._resetRenderer()),this):this._renderType},tooltip(e){return arguments.length?(e!==this._tooltip&&(this._tooltip=e,this._resetRenderer()),this):this._tooltip},loader(e){return arguments.length?(e!==this._loader&&(vE.prototype.loader.call(this,e),this._resetRenderer()),this):this._loader},resize(){return this._autosize=1,this.touch(MP(this,"autosize"))},_resetRenderer(){this._renderer&&(this._renderer=null,this.initialize(this._el,this._elBind))},_resizeView:sWt,addEventListener(e,t,n){let r=t;return n&&n.trap===!1||(r=Dne(this,t),r.raw=t),this._handler.on(e,r),this},removeEventListener(e,t){for(var n=this._handler.handlers(e),r=n.length,i,s;--r>=0;)if(s=n[r].type,i=n[r].handler,e===s&&(t===i||t===i.raw)){this._handler.off(s,i);break}return this},addResizeListener(e){const t=this._resizeListeners;return t.includes(e)||t.push(e),this},removeResizeListener(e){var t=this._resizeListeners,n=t.indexOf(e);return n>=0&&t.splice(n,1),this},addSignalListener(e,t){return oge(this,e,MP(this,e),t)},removeSignalListener(e,t){return age(this,MP(this,e),t)},addDataListener(e,t){return oge(this,e,OM(this,e).values,t)},removeDataListener(e,t){return age(this,OM(this,e).values,t)},globalCursor(e){if(arguments.length){if(this._globalCursor!==!!e){const t=ZH(this,null);this._globalCursor=!!e,t&&ZH(this,t)}return this}else return this._globalCursor},preventDefault(e){return arguments.length?(this._preventDefault=e,this):this._preventDefault},timer:cWt,events:Oqt,finalize:Mqt,hover:$qt,data:xqt,change:OF,insert:Sqt,remove:Tqt,scale:rWt,initialize:Xqt,toImageURL:Jqt,toCanvas:eWt,toSVG:tWt,getState:oWt,setState:lWt,_watchPixelRatio:pWt});const mWt="view",MM="[",LM="]",b6e="{",_6e="}",gWt=":",w6e=",",yWt="@",vWt=">",bWt=/[[\]{}]/,_Wt={"*":1,arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1};let E6e,x6e;function Xy(e,t,n){return E6e=t||mWt,x6e=n||_Wt,S6e(e.trim()).map(eq)}function wWt(e){return x6e[e]}function nA(e,t,n,r,i){const s=e.length;let o=0,a;for(;t<s;++t){if(a=e[t],!o&&a===n)return t;i&&i.indexOf(a)>=0?--o:r&&r.indexOf(a)>=0&&++o}return t}function S6e(e){const t=[],n=e.length;let r=0,i=0;for(;i<n;)i=nA(e,i,w6e,MM+b6e,LM+_6e),t.push(e.substring(r,i).trim()),r=++i;if(t.length===0)throw"Empty event selector: "+e;return t}function eq(e){return e[0]==="["?EWt(e):xWt(e)}function EWt(e){const t=e.length;let n=1,r;if(n=nA(e,n,LM,MM,LM),n===t)throw"Empty between selector: "+e;if(r=S6e(e.substring(1,n)),r.length!==2)throw"Between selector must have two elements: "+e;if(e=e.slice(n+1).trim(),e[0]!==vWt)throw"Expected '>' after between selector: "+e;r=r.map(eq);const i=eq(e.slice(1).trim());return i.between?{between:r,stream:i}:(i.between=r,i)}function xWt(e){const t={source:E6e},n=[];let r=[0,0],i=0,s=0,o=e.length,a=0,u,l;if(e[o-1]===_6e){if(a=e.lastIndexOf(b6e),a>=0){try{r=SWt(e.substring(a+1,o-1))}catch{throw"Invalid throttle specification: "+e}e=e.slice(0,a).trim(),o=e.length}else throw"Unmatched right brace: "+e;a=0}if(!o)throw e;if(e[0]===yWt&&(i=++a),u=nA(e,a,gWt),u<o&&(n.push(e.substring(s,u).trim()),s=a=++u),a=nA(e,a,MM),a===o)n.push(e.substring(s,o).trim());else if(n.push(e.substring(s,a).trim()),l=[],s=++a,s===o)throw"Unmatched left bracket: "+e;for(;a<o;){if(a=nA(e,a,LM),a===o)throw"Unmatched left bracket: "+e;if(l.push(e.substring(s,a).trim()),a<o-1&&e[++a]!==MM)throw"Expected left bracket: "+e;s=++a}if(!(o=n.length)||bWt.test(n[o-1]))throw"Invalid event selector: "+e;return o>1?(t.type=n[1],i?t.markname=n[0].slice(1):wWt(n[0])?t.marktype=n[0]:t.source=n[0]):t.type=n[0],t.type.slice(-1)==="!"&&(t.consume=!0,t.type=t.type.slice(0,-1)),l!=null&&(t.filter=l),r[0]&&(t.throttle=r[0]),r[1]&&(t.debounce=r[1]),t}function SWt(e){const t=e.split(w6e);if(!e.length||t.length>2)throw e;return t.map(n=>{const r=+n;if(r!==r)throw e;return r})}function TWt(e){return gt(e)?e:{type:e||"pad"}}const r2=e=>+e||0,CWt=e=>({top:e,bottom:e,left:e,right:e});function AWt(e){return gt(e)?e.signal?e:{top:r2(e.top),bottom:r2(e.bottom),left:r2(e.left),right:r2(e.right)}:CWt(r2(e))}const so=e=>gt(e)&&!je(e)?bn({},e):{value:e};function uge(e,t,n,r){return n!=null?(gt(n)&&!je(n)||je(n)&&n.length&&gt(n[0])?e.update[t]=n:e[r||"enter"][t]={value:n},1):0}function jo(e,t,n){for(const r in t)uge(e,r,t[r]);for(const r in n)uge(e,r,n[r],"update")}function JS(e,t,n){for(const r in t)n&&jt(n,r)||(e[r]=bn(e[r]||{},t[r]));return e}function hw(e,t){return t&&(t.enter&&t.enter[e]||t.update&&t.update[e])}const Mne="mark",Lne="frame",Fne="scope",IWt="axis",kWt="axis-domain",RWt="axis-grid",NWt="axis-label",PWt="axis-tick",DWt="axis-title",OWt="legend",$Wt="legend-band",MWt="legend-entry",LWt="legend-gradient",T6e="legend-label",FWt="legend-symbol",jWt="legend-title",BWt="title",UWt="title-text",zWt="title-subtitle";function VWt(e,t,n,r,i){const s={},o={};let a,u,l,c;u="lineBreak",t==="text"&&i[u]!=null&&!hw(u,e)&&EB(s,u,i[u]),(n=="legend"||String(n).startsWith("axis"))&&(n=null),c=n===Lne?i.group:n===Mne?bn({},i.mark,i[t]):null;for(u in c)l=hw(u,e)||(u==="fill"||u==="stroke")&&(hw("fill",e)||hw("stroke",e)),l||EB(s,u,c[u]);pt(r).forEach(f=>{const d=i.style&&i.style[f];for(const h in d)hw(h,e)||EB(s,h,d[h])}),e=bn({},e);for(u in s)c=s[u],c.signal?(a=a||{})[u]=c:o[u]=c;return e.enter=bn(o,e.enter),a&&(e.update=bn(a,e.update)),e}function EB(e,t,n){e[t]=n&&n.signal?{signal:n.signal}:{value:n}}const C6e=e=>mt(e)?rt(e):e.signal?`(${e.signal})`:A6e(e);function MF(e){if(e.gradient!=null)return qWt(e);let t=e.signal?`(${e.signal})`:e.color?HWt(e.color):e.field!=null?A6e(e.field):e.value!==void 0?rt(e.value):void 0;return e.scale!=null&&(t=WWt(e,t)),t===void 0&&(t=null),e.exponent!=null&&(t=`pow(${t},${lO(e.exponent)})`),e.mult!=null&&(t+=`*${lO(e.mult)}`),e.offset!=null&&(t+=`+${lO(e.offset)}`),e.round&&(t=`round(${t})`),t}const LP=(e,t,n,r)=>`(${e}(${[t,n,r].map(MF).join(",")})+'')`;function HWt(e){return e.c?LP("hcl",e.h,e.c,e.l):e.h||e.s?LP("hsl",e.h,e.s,e.l):e.l||e.a?LP("lab",e.l,e.a,e.b):e.r||e.g||e.b?LP("rgb",e.r,e.g,e.b):null}function qWt(e){const t=[e.start,e.stop,e.count].map(n=>n==null?null:rt(n));for(;t.length&&Qn(t)==null;)t.pop();return t.unshift(C6e(e.gradient)),`gradient(${t.join(",")})`}function lO(e){return gt(e)?"("+MF(e)+")":e}function A6e(e){return I6e(gt(e)?e:{datum:e})}function I6e(e){let t,n,r;if(e.signal)t="datum",r=e.signal;else if(e.group||e.parent){for(n=Math.max(1,e.level||1),t="item";n-- >0;)t+=".mark.group";e.parent?(r=e.parent,t+=".datum"):r=e.group}else e.datum?(t="datum",r=e.datum):Le("Invalid field reference: "+rt(e));return e.signal||(r=mt(r)?ip(r).map(rt).join("]["):I6e(r)),t+"["+r+"]"}function WWt(e,t){const n=C6e(e.scale);return e.range!=null?t=`lerp(_range(${n}), ${+e.range})`:(t!==void 0&&(t=`_scale(${n}, ${t})`),e.band&&(t=(t?t+"+":"")+`_bandwidth(${n})`+(+e.band==1?"":"*"+lO(e.band)),e.extra&&(t=`(datum.extra ? _scale(${n}, datum.extra.value) : ${t})`)),t==null&&(t="0")),t}function GWt(e){let t="";return e.forEach(n=>{const r=MF(n);t+=n.test?`(${n.test})?${r}:`:r}),Qn(t)===":"&&(t+="null"),t}function k6e(e,t,n,r,i,s){const o={};s=s||{},s.encoders={$encode:o},e=VWt(e,t,n,r,i.config);for(const a in e)o[a]=YWt(e[a],t,s,i);return s}function YWt(e,t,n,r){const i={},s={};for(const o in e)e[o]!=null&&(i[o]=XWt(KWt(e[o]),r,n,s));return{$expr:{marktype:t,channels:i},$fields:Object.keys(s),$output:Object.keys(e)}}function KWt(e){return je(e)?GWt(e):MF(e)}function XWt(e,t,n,r){const i=Bh(e,t);return i.$fields.forEach(s=>r[s]=1),bn(n,i.$params),i.$expr}const QWt="outer",JWt=["value","update","init","react","bind"];function lge(e,t){Le(e+' for "outer" push: '+rt(t))}function R6e(e,t){const n=e.name;if(e.push===QWt)t.signals[n]||lge("No prior signal definition",n),JWt.forEach(r=>{e[r]!==void 0&&lge("Invalid property ",r)});else{const r=t.addSignal(n,e.value);e.react===!1&&(r.react=!1),e.bind&&t.addBinding(n,e.bind)}}function tq(e,t,n,r){this.id=-1,this.type=e,this.value=t,this.params=n,r&&(this.parent=r)}function LF(e,t,n,r){return new tq(e,t,n,r)}function FM(e,t){return LF("operator",e,t)}function Mt(e){const t={$ref:e.id};return e.id<0&&(e.refs=e.refs||[]).push(t),t}function VI(e,t){return t?{$field:e,$name:t}:{$field:e}}const nq=VI("key");function cge(e,t){return{$compare:e,$order:t}}function ZWt(e,t){const n={$key:e};return t&&(n.$flat=!0),n}const eGt="ascending",tGt="descending";function nGt(e){return gt(e)?(e.order===tGt?"-":"+")+FF(e.op,e.field):""}function FF(e,t){return(e&&e.signal?"$"+e.signal:e||"")+(e&&t?"_":"")+(t&&t.signal?"$"+t.signal:t||"")}const jne="scope",rq="view";function js(e){return e&&e.signal}function rGt(e){return e&&e.expr}function cO(e){if(js(e))return!0;if(gt(e)){for(const t in e)if(cO(e[t]))return!0}return!1}function bf(e,t){return e??t}function P1(e){return e&&e.signal||e}const fge="timer";function HI(e,t){return(e.merge?sGt:e.stream?oGt:e.type?aGt:Le("Invalid stream specification: "+rt(e)))(e,t)}function iGt(e){return e===jne?rq:e||rq}function sGt(e,t){const n=e.merge.map(i=>HI(i,t)),r=Bne({merge:n},e,t);return t.addStream(r).id}function oGt(e,t){const n=HI(e.stream,t),r=Bne({stream:n},e,t);return t.addStream(r).id}function aGt(e,t){let n;e.type===fge?(n=t.event(fge,e.throttle),e={between:e.between,filter:e.filter}):n=t.event(iGt(e.source),e.type);const r=Bne({stream:n},e,t);return Object.keys(r).length===1?n:t.addStream(r).id}function Bne(e,t,n){let r=t.between;return r&&(r.length!==2&&Le('Stream "between" parameter must have 2 entries: '+rt(t)),e.between=[HI(r[0],n),HI(r[1],n)]),r=t.filter?[].concat(t.filter):[],(t.marktype||t.markname||t.markrole)&&r.push(uGt(t.marktype,t.markname,t.markrole)),t.source===jne&&r.push("inScope(event.item)"),r.length&&(e.filter=Bh("("+r.join(")&&(")+")",n).$expr),(r=t.throttle)!=null&&(e.throttle=+r),(r=t.debounce)!=null&&(e.debounce=+r),t.consume&&(e.consume=!0),e}function uGt(e,t,n){const r="event.item";return r+(e&&e!=="*"?"&&"+r+".mark.marktype==='"+e+"'":"")+(n?"&&"+r+".mark.role==='"+n+"'":"")+(t?"&&"+r+".mark.name==='"+t+"'":"")}const lGt={code:"_.$value",ast:{type:"Identifier",value:"value"}};function cGt(e,t,n){const r=e.encode,i={target:n};let s=e.events,o=e.update,a=[];s||Le("Signal update missing events specification."),mt(s)&&(s=Xy(s,t.isSubscope()?jne:rq)),s=pt(s).filter(u=>u.signal||u.scale?(a.push(u),0):1),a.length>1&&(a=[dGt(a)]),s.length&&a.push(s.length>1?{merge:s}:s[0]),r!=null&&(o&&Le("Signal encode and update are mutually exclusive."),o="encode(item(),"+rt(r)+")"),i.update=mt(o)?Bh(o,t):o.expr!=null?Bh(o.expr,t):o.value!=null?o.value:o.signal!=null?{$expr:lGt,$params:{$value:t.signalRef(o.signal)}}:Le("Invalid signal update specification."),e.force&&(i.options={force:!0}),a.forEach(u=>t.addUpdate(bn(fGt(u,t),i)))}function fGt(e,t){return{source:e.signal?t.signalRef(e.signal):e.scale?t.scaleRef(e.scale):HI(e,t)}}function dGt(e){return{signal:"["+e.map(t=>t.scale?'scale("'+t.scale+'")':t.signal)+"]"}}function hGt(e,t){const n=t.getSignal(e.name);let r=e.update;e.init&&(r?Le("Signals can not include both init and update expressions."):(r=e.init,n.initonly=!0)),r&&(r=Bh(r,t),n.update=r.$expr,n.params=r.$params),e.on&&e.on.forEach(i=>cGt(i,t,n.id))}const Vr=e=>(t,n,r)=>LF(e,n,t||void 0,r),N6e=Vr("aggregate"),pGt=Vr("axisticks"),P6e=Vr("bound"),hd=Vr("collect"),dge=Vr("compare"),mGt=Vr("datajoin"),D6e=Vr("encode"),gGt=Vr("expression"),yGt=Vr("facet"),vGt=Vr("field"),bGt=Vr("key"),_Gt=Vr("legendentries"),wGt=Vr("load"),EGt=Vr("mark"),xGt=Vr("multiextent"),SGt=Vr("multivalues"),TGt=Vr("overlap"),CGt=Vr("params"),O6e=Vr("prefacet"),AGt=Vr("projection"),IGt=Vr("proxy"),kGt=Vr("relay"),$6e=Vr("render"),RGt=Vr("scale"),u_=Vr("sieve"),NGt=Vr("sortitems"),M6e=Vr("viewlayout"),PGt=Vr("values");let DGt=0;const L6e={min:"min",max:"max",count:"sum"};function OGt(e,t){const n=e.type||"linear";x$e(n)||Le("Unrecognized scale type: "+rt(n)),t.addScale(e.name,{type:n,domain:void 0})}function $Gt(e,t){const n=t.getScale(e.name).params;let r;n.domain=F6e(e.domain,e,t),e.range!=null&&(n.range=B6e(e,t,n)),e.interpolate!=null&&qGt(e.interpolate,n),e.nice!=null&&(n.nice=HGt(e.nice,t)),e.bins!=null&&(n.bins=VGt(e.bins,t));for(r in e)jt(n,r)||r==="name"||(n[r]=Cc(e[r],t))}function Cc(e,t){return gt(e)?e.signal?t.signalRef(e.signal):Le("Unsupported object: "+rt(e)):e}function fO(e,t){return e.signal?t.signalRef(e.signal):e.map(n=>Cc(n,t))}function jF(e){Le("Can not find data set: "+rt(e))}function F6e(e,t,n){if(!e){(t.domainMin!=null||t.domainMax!=null)&&Le("No scale domain defined for domainMin/domainMax to override.");return}return e.signal?n.signalRef(e.signal):(je(e)?MGt:e.fields?FGt:LGt)(e,t,n)}function MGt(e,t,n){return e.map(r=>Cc(r,n))}function LGt(e,t,n){const r=n.getData(e.data);return r||jF(e.data),Tx(t.type)?r.valuesRef(n,e.field,j6e(e.sort,!1)):C$e(t.type)?r.domainRef(n,e.field):r.extentRef(n,e.field)}function FGt(e,t,n){const r=e.data,i=e.fields.reduce((s,o)=>(o=mt(o)?{data:r,field:o}:je(o)||o.signal?jGt(o,n):o,s.push(o),s),[]);return(Tx(t.type)?BGt:C$e(t.type)?UGt:zGt)(e,n,i)}function jGt(e,t){const n="_:vega:_"+DGt++,r=hd({});if(je(e))r.value={$ingest:e};else if(e.signal){const i="setdata("+rt(n)+","+e.signal+")";r.params.input=t.signalRef(i)}return t.addDataPipeline(n,[r,u_({})]),{data:n,field:"data"}}function BGt(e,t,n){const r=j6e(e.sort,!0);let i,s;const o=n.map(l=>{const c=t.getData(l.data);return c||jF(l.data),c.countsRef(t,l.field,r)}),a={groupby:nq,pulse:o};r&&(i=r.op||"count",s=r.field?FF(i,r.field):"count",a.ops=[L6e[i]],a.fields=[t.fieldRef(s)],a.as=[s]),i=t.add(N6e(a));const u=t.add(hd({pulse:Mt(i)}));return s=t.add(PGt({field:nq,sort:t.sortRef(r),pulse:Mt(u)})),Mt(s)}function j6e(e,t){return e&&(!e.field&&!e.op?gt(e)?e.field="key":e={field:"key"}:!e.field&&e.op!=="count"?Le("No field provided for sort aggregate op: "+e.op):t&&e.field&&e.op&&!L6e[e.op]&&Le("Multiple domain scales can not be sorted using "+e.op)),e}function UGt(e,t,n){const r=n.map(i=>{const s=t.getData(i.data);return s||jF(i.data),s.domainRef(t,i.field)});return Mt(t.add(SGt({values:r})))}function zGt(e,t,n){const r=n.map(i=>{const s=t.getData(i.data);return s||jF(i.data),s.extentRef(t,i.field)});return Mt(t.add(xGt({extents:r})))}function VGt(e,t){return e.signal||je(e)?fO(e,t):t.objectProperty(e)}function HGt(e,t){return e.signal?t.signalRef(e.signal):gt(e)?{interval:Cc(e.interval),step:Cc(e.step)}:Cc(e)}function qGt(e,t){t.interpolate=Cc(e.type||e),e.gamma!=null&&(t.interpolateGamma=Cc(e.gamma))}function B6e(e,t,n){const r=t.config.range;let i=e.range;if(i.signal)return t.signalRef(i.signal);if(mt(i)){if(r&&jt(r,i))return e=bn({},e,{range:r[i]}),B6e(e,t,n);i==="width"?i=[0,{signal:"width"}]:i==="height"?i=Tx(e.type)?[0,{signal:"height"}]:[{signal:"height"},0]:Le("Unrecognized scale range value: "+rt(i))}else if(i.scheme){n.scheme=je(i.scheme)?fO(i.scheme,t):Cc(i.scheme,t),i.extent&&(n.schemeExtent=fO(i.extent,t)),i.count&&(n.schemeCount=Cc(i.count,t));return}else if(i.step){n.rangeStep=Cc(i.step,t);return}else{if(Tx(e.type)&&!je(i))return F6e(i,e,t);je(i)||Le("Unsupported range type: "+rt(i))}return i.map(s=>(je(s)?fO:Cc)(s,t))}function WGt(e,t){const n=t.config.projection||{},r={};for(const i in e)i!=="name"&&(r[i]=iq(e[i],i,t));for(const i in n)r[i]==null&&(r[i]=iq(n[i],i,t));t.addProjection(e.name,r)}function iq(e,t,n){return je(e)?e.map(r=>iq(r,t,n)):gt(e)?e.signal?n.signalRef(e.signal):t==="fit"?e:Le("Unsupported parameter object: "+rt(e)):e}const pd="top",ZS="left",eT="right",yy="bottom",U6e="center",GGt="vertical",YGt="start",KGt="middle",XGt="end",sq="index",Une="label",QGt="offset",Rx="perc",JGt="perc2",kc="value",OR="guide-label",zne="guide-title",ZGt="group-title",eYt="group-subtitle",hge="symbol",dO="gradient",oq="discrete",aq="size",tYt="shape",nYt="fill",rYt="stroke",iYt="strokeWidth",sYt="strokeDash",oYt="opacity",Vne=[aq,tYt,nYt,rYt,iYt,sYt,oYt],$R={name:1,style:1,interactive:1},tr={value:0},Rc={value:1},BF="group",z6e="rect",Hne="rule",aYt="symbol",l_="text";function qI(e){return e.type=BF,e.interactive=e.interactive||!1,e}function cl(e,t){const n=(r,i)=>bf(e[r],bf(t[r],i));return n.isVertical=r=>GGt===bf(e.direction,t.direction||(r?t.symbolDirection:t.gradientDirection)),n.gradientLength=()=>bf(e.gradientLength,t.gradientLength||t.gradientWidth),n.gradientThickness=()=>bf(e.gradientThickness,t.gradientThickness||t.gradientHeight),n.entryColumns=()=>bf(e.columns,bf(t.columns,+n.isVertical(!0))),n}function V6e(e,t){const n=t&&(t.update&&t.update[e]||t.enter&&t.enter[e]);return n&&n.signal?n:n?n.value:null}function uYt(e,t,n){const r=t.config.style[n];return r&&r[e]}function UF(e,t,n){return`item.anchor === '${YGt}' ? ${e} : item.anchor === '${XGt}' ? ${t} : ${n}`}const qne=UF(rt(ZS),rt(eT),rt(U6e));function lYt(e){const t=e("tickBand");let n=e("tickOffset"),r,i;return t?t.signal?(r={signal:`(${t.signal}) === 'extent' ? 1 : 0.5`},i={signal:`(${t.signal}) === 'extent'`},gt(n)||(n={signal:`(${t.signal}) === 'extent' ? 0 : ${n}`})):t==="extent"?(r=1,i=!0,n=0):(r=.5,i=!1):(r=e("bandPosition"),i=e("tickExtra")),{extra:i,band:r,offset:n}}function H6e(e,t){return t?e?gt(e)?Object.assign({},e,{offset:H6e(e.offset,t)}):{value:e,offset:t}:t:e}function Yl(e,t){return t?(e.name=t.name,e.style=t.style||e.style,e.interactive=!!t.interactive,e.encode=JS(e.encode,t,$R)):e.interactive=!1,e}function cYt(e,t,n,r){const i=cl(e,n),s=i.isVertical(),o=i.gradientThickness(),a=i.gradientLength();let u,l,c,f,d;s?(l=[0,1],c=[0,0],f=o,d=a):(l=[0,0],c=[1,0],f=a,d=o);const h={enter:u={opacity:tr,x:tr,y:tr,width:so(f),height:so(d)},update:bn({},u,{opacity:Rc,fill:{gradient:t,start:l,stop:c}}),exit:{opacity:tr}};return jo(h,{stroke:i("gradientStrokeColor"),strokeWidth:i("gradientStrokeWidth")},{opacity:i("gradientOpacity")}),Yl({type:z6e,role:LWt,encode:h},r)}function fYt(e,t,n,r,i){const s=cl(e,n),o=s.isVertical(),a=s.gradientThickness(),u=s.gradientLength();let l,c,f,d,h="";o?(l="y",f="y2",c="x",d="width",h="1-"):(l="x",f="x2",c="y",d="height");const p={opacity:tr,fill:{scale:t,field:kc}};p[l]={signal:h+"datum."+Rx,mult:u},p[c]=tr,p[f]={signal:h+"datum."+JGt,mult:u},p[d]=so(a);const m={enter:p,update:bn({},p,{opacity:Rc}),exit:{opacity:tr}};return jo(m,{stroke:s("gradientStrokeColor"),strokeWidth:s("gradientStrokeWidth")},{opacity:s("gradientOpacity")}),Yl({type:z6e,role:$Wt,key:kc,from:i,encode:m},r)}const dYt=`datum.${Rx}<=0?"${ZS}":datum.${Rx}>=1?"${eT}":"${U6e}"`,hYt=`datum.${Rx}<=0?"${yy}":datum.${Rx}>=1?"${pd}":"${KGt}"`;function pge(e,t,n,r){const i=cl(e,t),s=i.isVertical(),o=so(i.gradientThickness()),a=i.gradientLength();let u=i("labelOverlap"),l,c,f,d,h="";const p={enter:l={opacity:tr},update:c={opacity:Rc,text:{field:Une}},exit:{opacity:tr}};return jo(p,{fill:i("labelColor"),fillOpacity:i("labelOpacity"),font:i("labelFont"),fontSize:i("labelFontSize"),fontStyle:i("labelFontStyle"),fontWeight:i("labelFontWeight"),limit:bf(e.labelLimit,t.gradientLabelLimit)}),s?(l.align={value:"left"},l.baseline=c.baseline={signal:hYt},f="y",d="x",h="1-"):(l.align=c.align={signal:dYt},l.baseline={value:"top"},f="x",d="y"),l[f]=c[f]={signal:h+"datum."+Rx,mult:a},l[d]=c[d]=o,o.offset=bf(e.labelOffset,t.gradientLabelOffset)||0,u=u?{separation:i("labelSeparation"),method:u,order:"datum."+sq}:void 0,Yl({type:l_,role:T6e,style:OR,key:kc,from:r,encode:p,overlap:u},n)}function pYt(e,t,n,r,i){const s=cl(e,t),o=n.entries,a=!!(o&&o.interactive),u=o?o.name:void 0,l=s("clipHeight"),c=s("symbolOffset"),f={data:"value"},d=`(${i}) ? datum.${QGt} : datum.${aq}`,h=l?so(l):{field:aq},p=`datum.${sq}`,m=`max(1, ${i})`;let g,y,v,_,w;h.mult=.5,g={enter:y={opacity:tr,x:{signal:d,mult:.5,offset:c},y:h},update:v={opacity:Rc,x:y.x,y:y.y},exit:{opacity:tr}};let E=null,S=null;e.fill||(E=t.symbolBaseFillColor,S=t.symbolBaseStrokeColor),jo(g,{fill:s("symbolFillColor",E),shape:s("symbolType"),size:s("symbolSize"),stroke:s("symbolStrokeColor",S),strokeDash:s("symbolDash"),strokeDashOffset:s("symbolDashOffset"),strokeWidth:s("symbolStrokeWidth")},{opacity:s("symbolOpacity")}),Vne.forEach(k=>{e[k]&&(v[k]=y[k]={scale:e[k],field:kc})});const T=Yl({type:aYt,role:FWt,key:kc,from:f,clip:l?!0:void 0,encode:g},n.symbols),C=so(c);C.offset=s("labelOffset"),g={enter:y={opacity:tr,x:{signal:d,offset:C},y:h},update:v={opacity:Rc,text:{field:Une},x:y.x,y:y.y},exit:{opacity:tr}},jo(g,{align:s("labelAlign"),baseline:s("labelBaseline"),fill:s("labelColor"),fillOpacity:s("labelOpacity"),font:s("labelFont"),fontSize:s("labelFontSize"),fontStyle:s("labelFontStyle"),fontWeight:s("labelFontWeight"),limit:s("labelLimit")});const A=Yl({type:l_,role:T6e,style:OR,key:kc,from:f,encode:g},n.labels);return g={enter:{noBound:{value:!l},width:tr,height:l?so(l):tr,opacity:tr},exit:{opacity:tr},update:v={opacity:Rc,row:{signal:null},column:{signal:null}}},s.isVertical(!0)?(_=`ceil(item.mark.items.length / ${m})`,v.row.signal=`${p}%${_}`,v.column.signal=`floor(${p} / ${_})`,w={field:["row",p]}):(v.row.signal=`floor(${p} / ${m})`,v.column.signal=`${p} % ${m}`,w={field:p}),v.column.signal=`(${i})?${v.column.signal}:${p}`,r={facet:{data:r,name:"value",groupby:sq}},qI({role:Fne,from:r,encode:JS(g,o,$R),marks:[T,A],name:u,interactive:a,sort:w})}function mYt(e,t){const n=cl(e,t);return{align:n("gridAlign"),columns:n.entryColumns(),center:{row:!0,column:!1},padding:{row:n("rowPadding"),column:n("columnPadding")}}}const Wne='item.orient === "left"',Gne='item.orient === "right"',zF=`(${Wne} || ${Gne})`,gYt=`datum.vgrad && ${zF}`,yYt=UF('"top"','"bottom"','"middle"'),vYt=UF('"right"','"left"','"center"'),bYt=`datum.vgrad && ${Gne} ? (${vYt}) : (${zF} && !(datum.vgrad && ${Wne})) ? "left" : ${qne}`,_Yt=`item._anchor || (${zF} ? "middle" : "start")`,wYt=`${gYt} ? (${Wne} ? -90 : 90) : 0`,EYt=`${zF} ? (datum.vgrad ? (${Gne} ? "bottom" : "top") : ${yYt}) : "top"`;function xYt(e,t,n,r){const i=cl(e,t),s={enter:{opacity:tr},update:{opacity:Rc,x:{field:{group:"padding"}},y:{field:{group:"padding"}}},exit:{opacity:tr}};return jo(s,{orient:i("titleOrient"),_anchor:i("titleAnchor"),anchor:{signal:_Yt},angle:{signal:wYt},align:{signal:bYt},baseline:{signal:EYt},text:e.title,fill:i("titleColor"),fillOpacity:i("titleOpacity"),font:i("titleFont"),fontSize:i("titleFontSize"),fontStyle:i("titleFontStyle"),fontWeight:i("titleFontWeight"),limit:i("titleLimit"),lineHeight:i("titleLineHeight")},{align:i("titleAlign"),baseline:i("titleBaseline")}),Yl({type:l_,role:jWt,style:zne,from:r,encode:s},n)}function SYt(e,t){let n;return gt(e)&&(e.signal?n=e.signal:e.path?n="pathShape("+mge(e.path)+")":e.sphere&&(n="geoShape("+mge(e.sphere)+', {type: "Sphere"})')),n?t.signalRef(n):!!e}function mge(e){return gt(e)&&e.signal?e.signal:rt(e)}function q6e(e){const t=e.role||"";return t.startsWith("axis")||t.startsWith("legend")||t.startsWith("title")?t:e.type===BF?Fne:t||Mne}function TYt(e){return{marktype:e.type,name:e.name||void 0,role:e.role||q6e(e),zindex:+e.zindex||void 0,aria:e.aria,description:e.description}}function CYt(e,t){return e&&e.signal?t.signalRef(e.signal):e!==!1}function Yne(e,t){const n=R3e(e.type);n||Le("Unrecognized transform type: "+rt(e.type));const r=LF(n.type.toLowerCase(),null,W6e(n,e,t));return e.signal&&t.addSignal(e.signal,t.proxy(r)),r.metadata=n.metadata||{},r}function W6e(e,t,n){const r={},i=e.params.length;for(let s=0;s<i;++s){const o=e.params[s];r[o.name]=AYt(o,t,n)}return r}function AYt(e,t,n){const r=e.type,i=t[e.name];if(r==="index")return IYt(e,t,n);if(i===void 0){e.required&&Le("Missing required "+rt(t.type)+" parameter: "+rt(e.name));return}else{if(r==="param")return kYt(e,t,n);if(r==="projection")return n.projectionRef(t[e.name])}return e.array&&!js(i)?i.map(s=>gge(e,s,n)):gge(e,i,n)}function gge(e,t,n){const r=e.type;if(js(t))return vge(r)?Le("Expression references can not be signals."):xB(r)?n.fieldRef(t):bge(r)?n.compareRef(t):n.signalRef(t.signal);{const i=e.expr||xB(r);return i&&RYt(t)?n.exprRef(t.expr,t.as):i&&NYt(t)?VI(t.field,t.as):vge(r)?Bh(t,n):PYt(r)?Mt(n.getData(t).values):xB(r)?VI(t):bge(r)?n.compareRef(t):t}}function IYt(e,t,n){return mt(t.from)||Le('Lookup "from" parameter must be a string literal.'),n.getData(t.from).lookupRef(n,t.key)}function kYt(e,t,n){const r=t[e.name];return e.array?(je(r)||Le("Expected an array of sub-parameters. Instead: "+rt(r)),r.map(i=>yge(e,i,n))):yge(e,r,n)}function yge(e,t,n){const r=e.params.length;let i;for(let o=0;o<r;++o){i=e.params[o];for(const a in i.key)if(i.key[a]!==t[a]){i=null;break}if(i)break}i||Le("Unsupported parameter: "+rt(t));const s=bn(W6e(i,t,n),i.key);return Mt(n.add(CGt(s)))}const RYt=e=>e&&e.expr,NYt=e=>e&&e.field,PYt=e=>e==="data",vge=e=>e==="expr",xB=e=>e==="field",bge=e=>e==="compare";function DYt(e,t,n){let r,i,s,o,a;return e?(r=e.facet)&&(t||Le("Only group marks can be faceted."),r.field!=null?o=a=hO(r,n):(e.data?a=Mt(n.getData(e.data).aggregate):(s=Yne(bn({type:"aggregate",groupby:pt(r.groupby)},r.aggregate),n),s.params.key=n.keyRef(r.groupby),s.params.pulse=hO(r,n),o=a=Mt(n.add(s))),i=n.keyRef(r.groupby,!0))):o=Mt(n.add(hd(null,[{}]))),o||(o=hO(e,n)),{key:i,pulse:o,parent:a}}function hO(e,t){return e.$ref?e:e.data&&e.data.$ref?e.data:Mt(t.getData(e.data).output)}function yb(e,t,n,r,i){this.scope=e,this.input=t,this.output=n,this.values=r,this.aggregate=i,this.index={}}yb.fromEntries=function(e,t){const n=t.length,r=t[n-1],i=t[n-2];let s=t[0],o=null,a=1;for(s&&s.type==="load"&&(s=t[1]),e.add(t[0]);a<n;++a)t[a].params.pulse=Mt(t[a-1]),e.add(t[a]),t[a].type==="aggregate"&&(o=t[a]);return new yb(e,s,i,r,o)};function G6e(e){return mt(e)?e:null}function _ge(e,t,n){const r=FF(n.op,n.field);let i;if(t.ops){for(let s=0,o=t.as.length;s<o;++s)if(t.as[s]===r)return}else t.ops=["count"],t.fields=[null],t.as=["count"];n.op&&(t.ops.push((i=n.op.signal)?e.signalRef(i):n.op),t.fields.push(e.fieldRef(n.field)),t.as.push(r))}function i2(e,t,n,r,i,s,o){const a=t[n]||(t[n]={}),u=nGt(s);let l=G6e(i),c,f;if(l!=null&&(e=t.scope,l=l+(u?"|"+u:""),c=a[l]),!c){const d=s?{field:nq,pulse:t.countsRef(e,i,s)}:{field:e.fieldRef(i),pulse:Mt(t.output)};u&&(d.sort=e.sortRef(s)),f=e.add(LF(r,void 0,d)),o&&(t.index[i]=f),c=Mt(f),l!=null&&(a[l]=c)}return c}yb.prototype={countsRef(e,t,n){const r=this,i=r.counts||(r.counts={}),s=G6e(t);let o,a,u;return s!=null&&(e=r.scope,o=i[s]),o?n&&n.field&&_ge(e,o.agg.params,n):(u={groupby:e.fieldRef(t,"key"),pulse:Mt(r.output)},n&&n.field&&_ge(e,u,n),a=e.add(N6e(u)),o=e.add(hd({pulse:Mt(a)})),o={agg:a,ref:Mt(o)},s!=null&&(i[s]=o)),o.ref},tuplesRef(){return Mt(this.values)},extentRef(e,t){return i2(e,this,"extent","extent",t,!1)},domainRef(e,t){return i2(e,this,"domain","values",t,!1)},valuesRef(e,t,n){return i2(e,this,"vals","values",t,n||!0)},lookupRef(e,t){return i2(e,this,"lookup","tupleindex",t,!1)},indataRef(e,t){return i2(e,this,"indata","tupleindex",t,!0,!0)}};function OYt(e,t,n){const r=e.from.facet,i=r.name,s=hO(r,t);let o;r.name||Le("Facet must have a name: "+rt(r)),r.data||Le("Facet must reference a data set: "+rt(r)),r.field?o=t.add(O6e({field:t.fieldRef(r.field),pulse:s})):r.groupby?o=t.add(yGt({key:t.keyRef(r.groupby),group:Mt(t.proxy(n.parent)),pulse:s})):Le("Facet must specify groupby or field: "+rt(r));const a=t.fork(),u=a.add(hd()),l=a.add(u_({pulse:Mt(u)}));a.addData(i,new yb(a,u,u,l)),a.addSignal("parent",null),o.params.subflow={$subflow:a.parse(e).toRuntime()}}function $Yt(e,t,n){const r=t.add(O6e({pulse:n.pulse})),i=t.fork();i.add(u_()),i.addSignal("parent",null),r.params.subflow={$subflow:i.parse(e).toRuntime()}}function Y6e(e,t,n){const r=e.remove,i=e.insert,s=e.toggle,o=e.modify,a=e.values,u=t.add(FM()),l="if("+e.trigger+',modify("'+n+'",'+[i,r,s,o,a].map(f=>f??"null").join(",")+"),0)",c=Bh(l,t);u.update=c.$expr,u.params=c.$params}function VF(e,t){const n=q6e(e),r=e.type===BF,i=e.from&&e.from.facet,s=e.overlap;let o=e.layout||n===Fne||n===Lne,a,u,l,c,f,d,h;const p=n===Mne||o||i,m=DYt(e.from,r,t);u=t.add(mGt({key:m.key||(e.key?VI(e.key):void 0),pulse:m.pulse,clean:!r}));const g=Mt(u);u=l=t.add(hd({pulse:g})),u=t.add(EGt({markdef:TYt(e),interactive:CYt(e.interactive,t),clip:SYt(e.clip,t),context:{$context:!0},groups:t.lookup(),parent:t.signals.parent?t.signalRef("parent"):null,index:t.markpath(),pulse:Mt(u)}));const y=Mt(u);u=c=t.add(D6e(k6e(e.encode,e.type,n,e.style,t,{mod:!1,pulse:y}))),u.params.parent=t.encode(),e.transform&&e.transform.forEach(S=>{const T=Yne(S,t),C=T.metadata;(C.generates||C.changes)&&Le("Mark transforms should not generate new data."),C.nomod||(c.params.mod=!0),T.params.pulse=Mt(u),t.add(u=T)}),e.sort&&(u=t.add(NGt({sort:t.compareRef(e.sort),pulse:Mt(u)})));const v=Mt(u);(i||o)&&(o=t.add(M6e({layout:t.objectProperty(e.layout),legends:t.legends,mark:y,pulse:v})),d=Mt(o));const _=t.add(P6e({mark:y,pulse:d||v}));h=Mt(_),r&&(p&&(a=t.operators,a.pop(),o&&a.pop()),t.pushState(v,d||h,g),i?OYt(e,t,m):p?$Yt(e,t,m):t.parse(e),t.popState(),p&&(o&&a.push(o),a.push(_))),s&&(h=MYt(s,h,t));const w=t.add($6e({pulse:h})),E=t.add(u_({pulse:Mt(w)},void 0,t.parent()));e.name!=null&&(f=e.name,t.addData(f,new yb(t,l,w,E)),e.on&&e.on.forEach(S=>{(S.insert||S.remove||S.toggle)&&Le("Marks only support modify triggers."),Y6e(S,t,f)}))}function MYt(e,t,n){const r=e.method,i=e.bound,s=e.separation,o={separation:js(s)?n.signalRef(s.signal):s,method:js(r)?n.signalRef(r.signal):r,pulse:t};if(e.order&&(o.sort=n.compareRef({field:e.order})),i){const a=i.tolerance;o.boundTolerance=js(a)?n.signalRef(a.signal):+a,o.boundScale=n.scaleRef(i.scale),o.boundOrient=i.orient}return Mt(n.add(TGt(o)))}function LYt(e,t){const n=t.config.legend,r=e.encode||{},i=cl(e,n),s=r.legend||{},o=s.name||void 0,a=s.interactive,u=s.style,l={};let c=0,f,d,h;Vne.forEach(_=>e[_]?(l[_]=e[_],c=c||e[_]):0),c||Le("Missing valid scale for legend.");const p=FYt(e,t.scaleType(c)),m={title:e.title!=null,scales:l,type:p,vgrad:p!=="symbol"&&i.isVertical()},g=Mt(t.add(hd(null,[m]))),y={enter:{x:{value:0},y:{value:0}}},v=Mt(t.add(_Gt(d={type:p,scale:t.scaleRef(c),count:t.objectProperty(i("tickCount")),limit:t.property(i("symbolLimit")),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)})));return p===dO?(h=[cYt(e,c,n,r.gradient),pge(e,n,r.labels,v)],d.count=d.count||t.signalRef(`max(2,2*floor((${P1(i.gradientLength())})/100))`)):p===oq?h=[fYt(e,c,n,r.gradient,v),pge(e,n,r.labels,v)]:(f=mYt(e,n),h=[pYt(e,n,r,v,P1(f.columns))],d.size=UYt(e,t,h[0].marks)),h=[qI({role:MWt,from:g,encode:y,marks:h,layout:f,interactive:a})],m.title&&h.push(xYt(e,n,r.title,g)),VF(qI({role:OWt,from:g,encode:JS(BYt(i,e,n),s,$R),marks:h,aria:i("aria"),description:i("description"),zindex:i("zindex"),name:o,interactive:a,style:u}),t)}function FYt(e,t){let n=e.type||hge;return!e.type&&jYt(e)===1&&(e.fill||e.stroke)&&(n=ste(t)?dO:wH(t)?oq:hge),n!==dO?n:wH(t)?oq:dO}function jYt(e){return Vne.reduce((t,n)=>t+(e[n]?1:0),0)}function BYt(e,t,n){const r={enter:{},update:{}};return jo(r,{orient:e("orient"),offset:e("offset"),padding:e("padding"),titlePadding:e("titlePadding"),cornerRadius:e("cornerRadius"),fill:e("fillColor"),stroke:e("strokeColor"),strokeWidth:n.strokeWidth,strokeDash:n.strokeDash,x:e("legendX"),y:e("legendY"),format:t.format,formatType:t.formatType}),r}function UYt(e,t,n){const r=P1(wge("size",e,n)),i=P1(wge("strokeWidth",e,n)),s=P1(zYt(n[1].encode,t,OR));return Bh(`max(ceil(sqrt(${r})+${i}),${s})`,t)}function wge(e,t,n){return t[e]?`scale("${t[e]}",datum)`:V6e(e,n[0].encode)}function zYt(e,t,n){return V6e("fontSize",e)||uYt("fontSize",t,n)}const VYt=`item.orient==="${ZS}"?-90:item.orient==="${eT}"?90:0`;function HYt(e,t){e=mt(e)?{text:e}:e;const n=cl(e,t.config.title),r=e.encode||{},i=r.group||{},s=i.name||void 0,o=i.interactive,a=i.style,u=[],l={},c=Mt(t.add(hd(null,[l])));return u.push(GYt(e,n,qYt(e),c)),e.subtitle&&u.push(YYt(e,n,r.subtitle,c)),VF(qI({role:BWt,from:c,encode:WYt(n,i),marks:u,aria:n("aria"),description:n("description"),zindex:n("zindex"),name:s,interactive:o,style:a}),t)}function qYt(e){const t=e.encode;return t&&t.title||bn({name:e.name,interactive:e.interactive,style:e.style},t)}function WYt(e,t){const n={enter:{},update:{}};return jo(n,{orient:e("orient"),anchor:e("anchor"),align:{signal:qne},angle:{signal:VYt},limit:e("limit"),frame:e("frame"),offset:e("offset")||0,padding:e("subtitlePadding")}),JS(n,t,$R)}function GYt(e,t,n,r){const i={value:0},s=e.text,o={enter:{opacity:i},update:{opacity:{value:1}},exit:{opacity:i}};return jo(o,{text:s,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("color"),font:t("font"),fontSize:t("fontSize"),fontStyle:t("fontStyle"),fontWeight:t("fontWeight"),lineHeight:t("lineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),Yl({type:l_,role:UWt,style:ZGt,from:r,encode:o},n)}function YYt(e,t,n,r){const i={value:0},s=e.subtitle,o={enter:{opacity:i},update:{opacity:{value:1}},exit:{opacity:i}};return jo(o,{text:s,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("subtitleColor"),font:t("subtitleFont"),fontSize:t("subtitleFontSize"),fontStyle:t("subtitleFontStyle"),fontWeight:t("subtitleFontWeight"),lineHeight:t("subtitleLineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),Yl({type:l_,role:zWt,style:eYt,from:r,encode:o},n)}function KYt(e,t){const n=[];e.transform&&e.transform.forEach(r=>{n.push(Yne(r,t))}),e.on&&e.on.forEach(r=>{Y6e(r,t,e.name)}),t.addDataPipeline(e.name,XYt(e,t,n))}function XYt(e,t,n){const r=[];let i=null,s=!1,o=!1,a,u,l,c,f;for(e.values?js(e.values)||cO(e.format)?(r.push(Ege(t,e)),r.push(i=mv())):r.push(i=mv({$ingest:e.values,$format:e.format})):e.url?cO(e.url)||cO(e.format)?(r.push(Ege(t,e)),r.push(i=mv())):r.push(i=mv({$request:e.url,$format:e.format})):e.source&&(i=a=pt(e.source).map(d=>Mt(t.getData(d).output)),r.push(null)),u=0,l=n.length;u<l;++u)c=n[u],f=c.metadata,!i&&!f.source&&r.push(i=mv()),r.push(c),f.generates&&(o=!0),f.modifies&&!o&&(s=!0),f.source?i=c:f.changes&&(i=null);return a&&(l=a.length-1,r[0]=kGt({derive:s,pulse:l?a:a[0]}),(s||l)&&r.splice(1,0,mv())),i||r.push(mv()),r.push(u_({})),r}function mv(e){const t=hd({},e);return t.metadata={source:!0},t}function Ege(e,t){return wGt({url:t.url?e.property(t.url):void 0,async:t.async?e.property(t.async):void 0,values:t.values?e.property(t.values):void 0,format:e.objectProperty(t.format)})}const K6e=e=>e===yy||e===pd,HF=(e,t,n)=>js(e)?eKt(e.signal,t,n):e===ZS||e===pd?t:n,oo=(e,t,n)=>js(e)?JYt(e.signal,t,n):K6e(e)?t:n,qf=(e,t,n)=>js(e)?ZYt(e.signal,t,n):K6e(e)?n:t,X6e=(e,t,n)=>js(e)?tKt(e.signal,t,n):e===pd?{value:t}:{value:n},QYt=(e,t,n)=>js(e)?nKt(e.signal,t,n):e===eT?{value:t}:{value:n},JYt=(e,t,n)=>Q6e(`${e} === '${pd}' || ${e} === '${yy}'`,t,n),ZYt=(e,t,n)=>Q6e(`${e} !== '${pd}' && ${e} !== '${yy}'`,t,n),eKt=(e,t,n)=>Kne(`${e} === '${ZS}' || ${e} === '${pd}'`,t,n),tKt=(e,t,n)=>Kne(`${e} === '${pd}'`,t,n),nKt=(e,t,n)=>Kne(`${e} === '${eT}'`,t,n),Q6e=(e,t,n)=>(t=t!=null?so(t):t,n=n!=null?so(n):n,xge(t)&&xge(n)?(t=t?t.signal||rt(t.value):null,n=n?n.signal||rt(n.value):null,{signal:`${e} ? (${t}) : (${n})`}):[bn({test:e},t)].concat(n||[])),xge=e=>e==null||Object.keys(e).length===1,Kne=(e,t,n)=>({signal:`${e} ? (${jw(t)}) : (${jw(n)})`}),rKt=(e,t,n,r,i)=>({signal:(r!=null?`${e} === '${ZS}' ? (${jw(r)}) : `:"")+(n!=null?`${e} === '${yy}' ? (${jw(n)}) : `:"")+(i!=null?`${e} === '${eT}' ? (${jw(i)}) : `:"")+(t!=null?`${e} === '${pd}' ? (${jw(t)}) : `:"")+"(null)"}),jw=e=>js(e)?e.signal:e==null?null:rt(e),iKt=(e,t)=>t===0?0:js(e)?{signal:`(${e.signal}) * ${t}`}:{value:e*t},bE=(e,t)=>{const n=e.signal;return n&&n.endsWith("(null)")?{signal:n.slice(0,-6)+t.signal}:e};function G_(e,t,n,r){let i;if(t&&jt(t,e))return t[e];if(jt(n,e))return n[e];if(e.startsWith("title")){switch(e){case"titleColor":i="fill";break;case"titleFont":case"titleFontSize":case"titleFontWeight":i=e[5].toLowerCase()+e.slice(6)}return r[zne][i]}else if(e.startsWith("label")){switch(e){case"labelColor":i="fill";break;case"labelFont":case"labelFontSize":i=e[5].toLowerCase()+e.slice(6)}return r[OR][i]}return null}function Sge(e){const t={};for(const n of e)if(n)for(const r in n)t[r]=1;return Object.keys(t)}function sKt(e,t){var n=t.config,r=n.style,i=n.axis,s=t.scaleType(e.scale)==="band"&&n.axisBand,o=e.orient,a,u,l;if(js(o)){const f=Sge([n.axisX,n.axisY]),d=Sge([n.axisTop,n.axisBottom,n.axisLeft,n.axisRight]);a={};for(l of f)a[l]=oo(o,G_(l,n.axisX,i,r),G_(l,n.axisY,i,r));u={};for(l of d)u[l]=rKt(o.signal,G_(l,n.axisTop,i,r),G_(l,n.axisBottom,i,r),G_(l,n.axisLeft,i,r),G_(l,n.axisRight,i,r))}else a=o===pd||o===yy?n.axisX:n.axisY,u=n["axis"+o[0].toUpperCase()+o.slice(1)];return a||u||s?bn({},i,a,u,s):i}function oKt(e,t,n,r){const i=cl(e,t),s=e.orient;let o,a;const u={enter:o={opacity:tr},update:a={opacity:Rc},exit:{opacity:tr}};jo(u,{stroke:i("domainColor"),strokeCap:i("domainCap"),strokeDash:i("domainDash"),strokeDashOffset:i("domainDashOffset"),strokeWidth:i("domainWidth"),strokeOpacity:i("domainOpacity")});const l=Tge(e,0),c=Tge(e,1);return o.x=a.x=oo(s,l,tr),o.x2=a.x2=oo(s,c),o.y=a.y=qf(s,l,tr),o.y2=a.y2=qf(s,c),Yl({type:Hne,role:kWt,from:r,encode:u},n)}function Tge(e,t){return{scale:e.scale,range:t}}function aKt(e,t,n,r,i){const s=cl(e,t),o=e.orient,a=e.gridScale,u=HF(o,1,-1),l=uKt(e.offset,u);let c,f,d;const h={enter:c={opacity:tr},update:d={opacity:Rc},exit:f={opacity:tr}};jo(h,{stroke:s("gridColor"),strokeCap:s("gridCap"),strokeDash:s("gridDash"),strokeDashOffset:s("gridDashOffset"),strokeOpacity:s("gridOpacity"),strokeWidth:s("gridWidth")});const p={scale:e.scale,field:kc,band:i.band,extra:i.extra,offset:i.offset,round:s("tickRound")},m=oo(o,{signal:"height"},{signal:"width"}),g=a?{scale:a,range:0,mult:u,offset:l}:{value:0,offset:l},y=a?{scale:a,range:1,mult:u,offset:l}:bn(m,{mult:u,offset:l});return c.x=d.x=oo(o,p,g),c.y=d.y=qf(o,p,g),c.x2=d.x2=qf(o,y),c.y2=d.y2=oo(o,y),f.x=oo(o,p),f.y=qf(o,p),Yl({type:Hne,role:RWt,key:kc,from:r,encode:h},n)}function uKt(e,t){if(t!==1)if(!gt(e))e=js(t)?{signal:`(${t.signal}) * (${e||0})`}:t*(e||0);else{let n=e=bn({},e);for(;n.mult!=null;)if(gt(n.mult))n=n.mult=bn({},n.mult);else return n.mult=js(t)?{signal:`(${n.mult}) * (${t.signal})`}:n.mult*t,e;n.mult=t}return e}function lKt(e,t,n,r,i,s){const o=cl(e,t),a=e.orient,u=HF(a,-1,1);let l,c,f;const d={enter:l={opacity:tr},update:f={opacity:Rc},exit:c={opacity:tr}};jo(d,{stroke:o("tickColor"),strokeCap:o("tickCap"),strokeDash:o("tickDash"),strokeDashOffset:o("tickDashOffset"),strokeOpacity:o("tickOpacity"),strokeWidth:o("tickWidth")});const h=so(i);h.mult=u;const p={scale:e.scale,field:kc,band:s.band,extra:s.extra,offset:s.offset,round:o("tickRound")};return f.y=l.y=oo(a,tr,p),f.y2=l.y2=oo(a,h),c.x=oo(a,p),f.x=l.x=qf(a,tr,p),f.x2=l.x2=qf(a,h),c.y=qf(a,p),Yl({type:Hne,role:PWt,key:kc,from:r,encode:d},n)}function SB(e,t,n,r,i){return{signal:'flush(range("'+e+'"), scale("'+e+'", datum.value), '+t+","+n+","+r+","+i+")"}}function cKt(e,t,n,r,i,s){const o=cl(e,t),a=e.orient,u=e.scale,l=HF(a,-1,1),c=P1(o("labelFlush")),f=P1(o("labelFlushOffset")),d=o("labelAlign"),h=o("labelBaseline");let p=c===0||!!c,m;const g=so(i);g.mult=l,g.offset=so(o("labelPadding")||0),g.offset.mult=l;const y={scale:u,field:kc,band:.5,offset:H6e(s.offset,o("labelOffset"))},v=oo(a,p?SB(u,c,'"left"','"right"','"center"'):{value:"center"},QYt(a,"left","right")),_=oo(a,X6e(a,"bottom","top"),p?SB(u,c,'"top"','"bottom"','"middle"'):{value:"middle"}),w=SB(u,c,`-(${f})`,f,0);p=p&&f;const E={opacity:tr,x:oo(a,y,g),y:qf(a,y,g)},S={enter:E,update:m={opacity:Rc,text:{field:Une},x:E.x,y:E.y,align:v,baseline:_},exit:{opacity:tr,x:E.x,y:E.y}};jo(S,{dx:!d&&p?oo(a,w):null,dy:!h&&p?qf(a,w):null}),jo(S,{angle:o("labelAngle"),fill:o("labelColor"),fillOpacity:o("labelOpacity"),font:o("labelFont"),fontSize:o("labelFontSize"),fontWeight:o("labelFontWeight"),fontStyle:o("labelFontStyle"),limit:o("labelLimit"),lineHeight:o("labelLineHeight")},{align:d,baseline:h});const T=o("labelBound");let C=o("labelOverlap");return C=C||T?{separation:o("labelSeparation"),method:C,order:"datum.index",bound:T?{scale:u,orient:a,tolerance:T}:null}:void 0,m.align!==v&&(m.align=bE(m.align,v)),m.baseline!==_&&(m.baseline=bE(m.baseline,_)),Yl({type:l_,role:NWt,style:OR,key:kc,from:r,encode:S,overlap:C},n)}function fKt(e,t,n,r){const i=cl(e,t),s=e.orient,o=HF(s,-1,1);let a,u;const l={enter:a={opacity:tr,anchor:so(i("titleAnchor",null)),align:{signal:qne}},update:u=bn({},a,{opacity:Rc,text:so(e.title)}),exit:{opacity:tr}},c={signal:`lerp(range("${e.scale}"), ${UF(0,1,.5)})`};return u.x=oo(s,c),u.y=qf(s,c),a.angle=oo(s,tr,iKt(o,90)),a.baseline=oo(s,X6e(s,yy,pd),{value:yy}),u.angle=a.angle,u.baseline=a.baseline,jo(l,{fill:i("titleColor"),fillOpacity:i("titleOpacity"),font:i("titleFont"),fontSize:i("titleFontSize"),fontStyle:i("titleFontStyle"),fontWeight:i("titleFontWeight"),limit:i("titleLimit"),lineHeight:i("titleLineHeight")},{align:i("titleAlign"),angle:i("titleAngle"),baseline:i("titleBaseline")}),dKt(i,s,l,n),l.update.align=bE(l.update.align,a.align),l.update.angle=bE(l.update.angle,a.angle),l.update.baseline=bE(l.update.baseline,a.baseline),Yl({type:l_,role:DWt,style:zne,from:r,encode:l},n)}function dKt(e,t,n,r){const i=(a,u)=>a!=null?(n.update[u]=bE(so(a),n.update[u]),!1):!hw(u,r),s=i(e("titleX"),"x"),o=i(e("titleY"),"y");n.enter.auto=o===s?so(o):oo(t,so(o),so(s))}function hKt(e,t){const n=sKt(e,t),r=e.encode||{},i=r.axis||{},s=i.name||void 0,o=i.interactive,a=i.style,u=cl(e,n),l=lYt(u),c={scale:e.scale,ticks:!!u("ticks"),labels:!!u("labels"),grid:!!u("grid"),domain:!!u("domain"),title:e.title!=null},f=Mt(t.add(hd({},[c]))),d=Mt(t.add(pGt({scale:t.scaleRef(e.scale),extra:t.property(l.extra),count:t.objectProperty(e.tickCount),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)}))),h=[];let p;return c.grid&&h.push(aKt(e,n,r.grid,d,l)),c.ticks&&(p=u("tickSize"),h.push(lKt(e,n,r.ticks,d,p,l))),c.labels&&(p=c.ticks?p:0,h.push(cKt(e,n,r.labels,d,p,l))),c.domain&&h.push(oKt(e,n,r.domain,f)),c.title&&h.push(fKt(e,n,r.title,f)),VF(qI({role:IWt,from:f,encode:JS(pKt(u,e),i,$R),marks:h,aria:u("aria"),description:u("description"),zindex:u("zindex"),name:s,interactive:o,style:a}),t)}function pKt(e,t){const n={enter:{},update:{}};return jo(n,{orient:e("orient"),offset:e("offset")||0,position:bf(t.position,0),titlePadding:e("titlePadding"),minExtent:e("minExtent"),maxExtent:e("maxExtent"),range:{signal:`abs(span(range("${t.scale}")))`},translate:e("translate"),format:t.format,formatType:t.formatType}),n}function J6e(e,t,n){const r=pt(e.signals),i=pt(e.scales);return n||r.forEach(s=>R6e(s,t)),pt(e.projections).forEach(s=>WGt(s,t)),i.forEach(s=>OGt(s,t)),pt(e.data).forEach(s=>KYt(s,t)),i.forEach(s=>$Gt(s,t)),(n||r).forEach(s=>hGt(s,t)),pt(e.axes).forEach(s=>hKt(s,t)),pt(e.marks).forEach(s=>VF(s,t)),pt(e.legends).forEach(s=>LYt(s,t)),e.title&&HYt(e.title,t),t.parseLambdas(),t}const mKt=e=>JS({enter:{x:{value:0},y:{value:0}},update:{width:{signal:"width"},height:{signal:"height"}}},e);function gKt(e,t){const n=t.config,r=Mt(t.root=t.add(FM())),i=yKt(e,n);i.forEach(l=>R6e(l,t)),t.description=e.description||n.description,t.eventConfig=n.events,t.legends=t.objectProperty(n.legend&&n.legend.layout),t.locale=n.locale;const s=t.add(hd()),o=t.add(D6e(k6e(mKt(e.encode),BF,Lne,e.style,t,{pulse:Mt(s)}))),a=t.add(M6e({layout:t.objectProperty(e.layout),legends:t.legends,autosize:t.signalRef("autosize"),mark:r,pulse:Mt(o)}));t.operators.pop(),t.pushState(Mt(o),Mt(a),null),J6e(e,t,i),t.operators.push(a);let u=t.add(P6e({mark:r,pulse:Mt(a)}));return u=t.add($6e({pulse:Mt(u)})),u=t.add(u_({pulse:Mt(u)})),t.addData("root",new yb(t,s,s,u)),t}function s2(e,t){return t&&t.signal?{name:e,update:t.signal}:{name:e,value:t}}function yKt(e,t){const n=o=>bf(e[o],t[o]),r=[s2("background",n("background")),s2("autosize",TWt(n("autosize"))),s2("padding",AWt(n("padding"))),s2("width",n("width")||0),s2("height",n("height")||0)],i=r.reduce((o,a)=>(o[a.name]=a,o),{}),s={};return pt(e.signals).forEach(o=>{jt(i,o.name)?o=bn(i[o.name],o):r.push(o),s[o.name]=o}),pt(t.signals).forEach(o=>{!jt(s,o.name)&&!jt(i,o.name)&&r.push(o)}),r}function Z6e(e,t){this.config=e||{},this.options=t||{},this.bindings=[],this.field={},this.signals={},this.lambdas={},this.scales={},this.events={},this.data={},this.streams=[],this.updates=[],this.operators=[],this.eventConfig=null,this.locale=null,this._id=0,this._subid=0,this._nextsub=[0],this._parent=[],this._encode=[],this._lookup=[],this._markpath=[]}function Cge(e){this.config=e.config,this.options=e.options,this.legends=e.legends,this.field=Object.create(e.field),this.signals=Object.create(e.signals),this.lambdas=Object.create(e.lambdas),this.scales=Object.create(e.scales),this.events=Object.create(e.events),this.data=Object.create(e.data),this.streams=[],this.updates=[],this.operators=[],this._id=0,this._subid=++e._nextsub[0],this._nextsub=e._nextsub,this._parent=e._parent.slice(),this._encode=e._encode.slice(),this._lookup=e._lookup.slice(),this._markpath=e._markpath}Z6e.prototype=Cge.prototype={parse(e){return J6e(e,this)},fork(){return new Cge(this)},isSubscope(){return this._subid>0},toRuntime(){return this.finish(),{description:this.description,operators:this.operators,streams:this.streams,updates:this.updates,bindings:this.bindings,eventConfig:this.eventConfig,locale:this.locale}},id(){return(this._subid?this._subid+":":0)+this._id++},add(e){return this.operators.push(e),e.id=this.id(),e.refs&&(e.refs.forEach(t=>{t.$ref=e.id}),e.refs=null),e},proxy(e){const t=e instanceof tq?Mt(e):e;return this.add(IGt({value:t}))},addStream(e){return this.streams.push(e),e.id=this.id(),e},addUpdate(e){return this.updates.push(e),e},finish(){let e,t;this.root&&(this.root.root=!0);for(e in this.signals)this.signals[e].signal=e;for(e in this.scales)this.scales[e].scale=e;function n(r,i,s){let o,a;r&&(o=r.data||(r.data={}),a=o[i]||(o[i]=[]),a.push(s))}for(e in this.data){t=this.data[e],n(t.input,e,"input"),n(t.output,e,"output"),n(t.values,e,"values");for(const r in t.index)n(t.index[r],e,"index:"+r)}return this},pushState(e,t,n){this._encode.push(Mt(this.add(u_({pulse:e})))),this._parent.push(t),this._lookup.push(n?Mt(this.proxy(n)):null),this._markpath.push(-1)},popState(){this._encode.pop(),this._parent.pop(),this._lookup.pop(),this._markpath.pop()},parent(){return Qn(this._parent)},encode(){return Qn(this._encode)},lookup(){return Qn(this._lookup)},markpath(){const e=this._markpath;return++e[e.length-1]},fieldRef(e,t){if(mt(e))return VI(e,t);e.signal||Le("Unsupported field reference: "+rt(e));const n=e.signal;let r=this.field[n];if(!r){const i={name:this.signalRef(n)};t&&(i.as=t),this.field[n]=r=Mt(this.add(vGt(i)))}return r},compareRef(e){let t=!1;const n=s=>js(s)?(t=!0,this.signalRef(s.signal)):rGt(s)?(t=!0,this.exprRef(s.expr)):s,r=pt(e.field).map(n),i=pt(e.order).map(n);return t?Mt(this.add(dge({fields:r,orders:i}))):cge(r,i)},keyRef(e,t){let n=!1;const r=s=>js(s)?(n=!0,Mt(i[s.signal])):s,i=this.signals;return e=pt(e).map(r),n?Mt(this.add(bGt({fields:e,flat:t}))):ZWt(e,t)},sortRef(e){if(!e)return e;const t=FF(e.op,e.field),n=e.order||eGt;return n.signal?Mt(this.add(dge({fields:t,orders:this.signalRef(n.signal)}))):cge(t,n)},event(e,t){const n=e+":"+t;if(!this.events[n]){const r=this.id();this.streams.push({id:r,source:e,type:t}),this.events[n]=r}return this.events[n]},hasOwnSignal(e){return jt(this.signals,e)},addSignal(e,t){this.hasOwnSignal(e)&&Le("Duplicate signal name: "+rt(e));const n=t instanceof tq?t:this.add(FM(t));return this.signals[e]=n},getSignal(e){return this.signals[e]||Le("Unrecognized signal name: "+rt(e)),this.signals[e]},signalRef(e){return this.signals[e]?Mt(this.signals[e]):(jt(this.lambdas,e)||(this.lambdas[e]=this.add(FM(null))),Mt(this.lambdas[e]))},parseLambdas(){const e=Object.keys(this.lambdas);for(let t=0,n=e.length;t<n;++t){const r=e[t],i=Bh(r,this),s=this.lambdas[r];s.params=i.$params,s.update=i.$expr}},property(e){return e&&e.signal?this.signalRef(e.signal):e},objectProperty(e){return!e||!gt(e)?e:this.signalRef(e.signal||Xne(e))},exprRef(e,t){const n={expr:Bh(e,this)};return t&&(n.expr.$name=t),Mt(this.add(gGt(n)))},addBinding(e,t){this.bindings||Le("Nested signals do not support binding: "+rt(e)),this.bindings.push(bn({signal:e},t))},addScaleProj(e,t){jt(this.scales,e)&&Le("Duplicate scale or projection name: "+rt(e)),this.scales[e]=this.add(t)},addScale(e,t){this.addScaleProj(e,RGt(t))},addProjection(e,t){this.addScaleProj(e,AGt(t))},getScale(e){return this.scales[e]||Le("Unrecognized scale name: "+rt(e)),this.scales[e]},scaleRef(e){return Mt(this.getScale(e))},scaleType(e){return this.getScale(e).params.type},projectionRef(e){return this.scaleRef(e)},projectionType(e){return this.scaleType(e)},addData(e,t){return jt(this.data,e)&&Le("Duplicate data set name: "+rt(e)),this.data[e]=t},getData(e){return this.data[e]||Le("Undefined data set name: "+rt(e)),this.data[e]},addDataPipeline(e,t){return jt(this.data,e)&&Le("Duplicate data set name: "+rt(e)),this.addData(e,yb.fromEntries(this,t))}};function Xne(e){return(je(e)?vKt:bKt)(e)}function vKt(e){const t=e.length;let n="[";for(let r=0;r<t;++r){const i=e[r];n+=(r>0?",":"")+(gt(i)?i.signal||Xne(i):rt(i))}return n+"]"}function bKt(e){let t="{",n=0,r,i;for(r in e)i=e[r],t+=(++n>1?",":"")+rt(r)+":"+(gt(i)?i.signal||Xne(i):rt(i));return t+"}"}function _Kt(){const e="sans-serif",r="#4c78a8",i="#000",s="#888",o="#ddd";return{description:"Vega visualization",padding:0,autosize:"pad",background:null,events:{defaults:{allow:["wheel"]}},group:null,mark:null,arc:{fill:r},area:{fill:r},image:null,line:{stroke:r,strokeWidth:2},path:{stroke:r},rect:{fill:r},rule:{stroke:i},shape:{stroke:r},symbol:{fill:r,size:64},text:{fill:i,font:e,fontSize:11},trail:{fill:r,size:2},style:{"guide-label":{fill:i,font:e,fontSize:10},"guide-title":{fill:i,font:e,fontSize:11,fontWeight:"bold"},"group-title":{fill:i,font:e,fontSize:13,fontWeight:"bold"},"group-subtitle":{fill:i,font:e,fontSize:12},point:{size:30,strokeWidth:2,shape:"circle"},circle:{size:30,strokeWidth:2},square:{size:30,strokeWidth:2,shape:"square"},cell:{fill:"transparent",stroke:o},view:{fill:"transparent"}},title:{orient:"top",anchor:"middle",offset:4,subtitlePadding:3},axis:{minExtent:0,maxExtent:200,bandPosition:.5,domain:!0,domainWidth:1,domainColor:s,grid:!1,gridWidth:1,gridColor:o,labels:!0,labelAngle:0,labelLimit:180,labelOffset:0,labelPadding:2,ticks:!0,tickColor:s,tickOffset:0,tickRound:!0,tickSize:5,tickWidth:1,titlePadding:4},axisBand:{tickOffset:-.5},projection:{type:"mercator"},legend:{orient:"right",padding:0,gridAlign:"each",columnPadding:10,rowPadding:2,symbolDirection:"vertical",gradientDirection:"vertical",gradientLength:200,gradientThickness:16,gradientStrokeColor:o,gradientStrokeWidth:0,gradientLabelOffset:2,labelAlign:"left",labelBaseline:"middle",labelLimit:160,labelOffset:4,labelOverlap:!0,symbolLimit:30,symbolType:"circle",symbolSize:100,symbolOffset:0,symbolStrokeWidth:1.5,symbolBaseFillColor:"transparent",symbolBaseStrokeColor:s,titleLimit:180,titleOrient:"top",titlePadding:5,layout:{offset:18,direction:"horizontal",left:{direction:"vertical"},right:{direction:"vertical"}}},range:{category:{scheme:"tableau10"},ordinal:{scheme:"blues"},heatmap:{scheme:"yellowgreenblue"},ramp:{scheme:"blues"},diverging:{scheme:"blueorange",extent:[1,0]},symbol:["circle","square","triangle-up","cross","diamond","triangle-right","triangle-down","triangle-left"]}}}function wKt(e,t,n){return gt(e)||Le("Input Vega specification must be an object."),t=HS(_Kt(),t,e.config),gKt(e,new Z6e(t,n)).toRuntime()}var EKt="5.29.0";bn(Ex,wjt,lUt,UUt,v7t,T7t,J7t,N7t,ezt,izt,pzt,wzt);const xKt=Object.freeze(Object.defineProperty({__proto__:null,Bounds:Ts,CanvasHandler:kR,CanvasRenderer:CM,DATE:il,DAY:da,DAYOFYEAR:jh,Dataflow:vE,Debug:SOe,Error:HZ,EventStream:oF,Gradient:U$e,GroupItem:bF,HOURS:ql,Handler:Rte,HybridHandler:PMe,HybridRenderer:PH,Info:xOe,Item:vF,MILLISECONDS:nd,MINUTES:Wl,MONTH:ya,Marks:Gl,MultiPulse:cee,None:EOe,Operator:Kr,Parameters:sF,Pulse:D0,QUARTER:rl,RenderType:a0,Renderer:IR,ResourceLoader:Y$e,SECONDS:Bc,SVGHandler:bMe,SVGRenderer:Mte,SVGStringRenderer:NMe,Scenegraph:fMe,TIME_UNITS:nee,Transform:Pe,View:y6e,WEEK:$s,Warn:qZ,YEAR:$o,accessor:ll,accessorFields:ga,accessorName:Ki,array:pt,ascending:Z4,bandwidthNRD:pee,bin:D3e,bootstrapCI:O3e,boundClip:zMe,boundContext:SR,boundItem:AH,boundMark:aMe,boundStroke:ag,changeset:s_,clampRange:$Oe,codegenExpression:HLe,compare:XZ,constant:Sa,cumulativeLogNormal:_ee,cumulativeNormal:uF,cumulativeUniform:See,dayofyear:GOe,debounce:QZ,defaultLocale:see,definition:R3e,densityLogNormal:bee,densityNormal:mee,densityUniform:xee,domChild:Ds,domClear:_c,domCreate:s0,domFind:kte,dotbin:$3e,error:Le,expressionFunction:ms,extend:bn,extent:Fh,extentIndex:MOe,falsy:Ag,fastmap:WS,field:Fc,flush:LOe,font:SF,fontFamily:AR,fontSize:sp,format:YD,formatLocale:hM,formats:uee,hasOwnProperty:jt,id:dR,identity:xa,inferType:b3e,inferTypes:_3e,ingest:Er,inherits:lt,inrange:Mw,interpolate:ote,interpolateColors:gF,interpolateRange:A$e,intersect:FMe,intersectBoxLine:Lw,intersectPath:pte,intersectPoint:mte,intersectRule:X$e,isArray:je,isBoolean:Yy,isDate:P0,isFunction:_n,isIterable:FOe,isNumber:lr,isObject:gt,isRegExp:jOe,isString:mt,isTuple:rF,key:JZ,lerp:BOe,lineHeight:py,loader:tF,locale:y3e,logger:WZ,lruCache:UOe,markup:$te,merge:zOe,mergeConfig:HS,multiLineOffset:Cte,one:VS,pad:VOe,panLinear:kOe,panLog:ROe,panPow:NOe,panSymlog:POe,parse:wKt,parseExpression:xne,parseSelector:Xy,path:k6,pathCurves:fte,pathEqual:VMe,pathParse:Cx,pathRectangle:H$e,pathRender:$I,pathSymbols:V$e,pathTrail:q$e,peek:Qn,point:CF,projection:Yte,quantileLogNormal:wee,quantileNormal:lF,quantileUniform:Tee,quantiles:dee,quantizeInterpolator:I$e,quarter:DOe,quartiles:hee,get random(){return Uc},randomInteger:T5t,randomKDE:yee,randomLCG:S5t,randomLogNormal:L3e,randomMixture:F3e,randomNormal:gee,randomUniform:j3e,read:x3e,regressionConstant:Cee,regressionExp:U3e,regressionLinear:Aee,regressionLoess:H3e,regressionLog:B3e,regressionPoly:V3e,regressionPow:z3e,regressionQuad:Iee,renderModule:AF,repeat:q2,resetDefaultLocale:wFt,resetSVGClipId:G$e,resetSVGDefIds:ABt,responseType:E3e,runtimeContext:i6e,sampleCurve:fF,sampleLogNormal:vee,sampleNormal:aF,sampleUniform:Eee,scale:gr,sceneEqual:Lte,sceneFromJSON:lMe,scenePickVisit:vM,sceneToJSON:uMe,sceneVisit:rd,sceneZOrder:gte,scheme:ate,serializeXML:AMe,setHybridRendererOptions:xBt,setRandom:E5t,span:hR,splitAccessPath:ip,stringValue:rt,textMetrics:Dl,timeBin:c3e,timeFloor:e3e,timeFormatLocale:PI,timeInterval:GS,timeOffset:r3e,timeSequence:o3e,timeUnitSpecifier:WOe,timeUnits:ree,toBoolean:ZZ,toDate:eee,toNumber:ha,toSet:td,toString:tee,transform:N3e,transforms:Ex,truncate:HOe,truthy:jc,tupleid:Lt,typeParsers:vH,utcFloor:t3e,utcInterval:YS,utcOffset:i3e,utcSequence:a3e,utcdayofyear:XOe,utcquarter:OOe,utcweek:QOe,version:EKt,visitArray:Mg,week:YOe,writeConfig:qS,zero:Kg,zoomLinear:GZ,zoomLog:YZ,zoomPow:dM,zoomSymlog:KZ},Symbol.toStringTag,{value:"Module"}));function SKt(e,t,n){let r;t.x2&&(t.x?(n&&e.x>e.x2&&(r=e.x,e.x=e.x2,e.x2=r),e.width=e.x2-e.x):e.x=e.x2-(e.width||0)),t.xc&&(e.x=e.xc-(e.width||0)/2),t.y2&&(t.y?(n&&e.y>e.y2&&(r=e.y,e.y=e.y2,e.y2=r),e.height=e.y2-e.y):e.y=e.y2-(e.height||0)),t.yc&&(e.y=e.yc-(e.height||0)/2)}var TKt={NaN:NaN,E:Math.E,LN2:Math.LN2,LN10:Math.LN10,LOG2E:Math.LOG2E,LOG10E:Math.LOG10E,PI:Math.PI,SQRT1_2:Math.SQRT1_2,SQRT2:Math.SQRT2,MIN_VALUE:Number.MIN_VALUE,MAX_VALUE:Number.MAX_VALUE},CKt={"*":(e,t)=>e*t,"+":(e,t)=>e+t,"-":(e,t)=>e-t,"/":(e,t)=>e/t,"%":(e,t)=>e%t,">":(e,t)=>e>t,"<":(e,t)=>e<t,"<=":(e,t)=>e<=t,">=":(e,t)=>e>=t,"==":(e,t)=>e==t,"!=":(e,t)=>e!=t,"===":(e,t)=>e===t,"!==":(e,t)=>e!==t,"&":(e,t)=>e&t,"|":(e,t)=>e|t,"^":(e,t)=>e^t,"<<":(e,t)=>e<<t,">>":(e,t)=>e>>t,">>>":(e,t)=>e>>>t},AKt={"+":e=>+e,"-":e=>-e,"~":e=>~e,"!":e=>!e};const IKt=Array.prototype.slice,gv=(e,t,n)=>{const r=n?n(t[0]):t[0];return r[e].apply(r,IKt.call(t,1))},kKt=(e,t,n,r,i,s,o)=>new Date(e,t||0,n??1,r||0,i||0,s||0,o||0);var RKt={isNaN:Number.isNaN,isFinite:Number.isFinite,abs:Math.abs,acos:Math.acos,asin:Math.asin,atan:Math.atan,atan2:Math.atan2,ceil:Math.ceil,cos:Math.cos,exp:Math.exp,floor:Math.floor,log:Math.log,max:Math.max,min:Math.min,pow:Math.pow,random:Math.random,round:Math.round,sin:Math.sin,sqrt:Math.sqrt,tan:Math.tan,clamp:(e,t,n)=>Math.max(t,Math.min(n,e)),now:Date.now,utc:Date.UTC,datetime:kKt,date:e=>new Date(e).getDate(),day:e=>new Date(e).getDay(),year:e=>new Date(e).getFullYear(),month:e=>new Date(e).getMonth(),hours:e=>new Date(e).getHours(),minutes:e=>new Date(e).getMinutes(),seconds:e=>new Date(e).getSeconds(),milliseconds:e=>new Date(e).getMilliseconds(),time:e=>new Date(e).getTime(),timezoneoffset:e=>new Date(e).getTimezoneOffset(),utcdate:e=>new Date(e).getUTCDate(),utcday:e=>new Date(e).getUTCDay(),utcyear:e=>new Date(e).getUTCFullYear(),utcmonth:e=>new Date(e).getUTCMonth(),utchours:e=>new Date(e).getUTCHours(),utcminutes:e=>new Date(e).getUTCMinutes(),utcseconds:e=>new Date(e).getUTCSeconds(),utcmilliseconds:e=>new Date(e).getUTCMilliseconds(),length:e=>e.length,join:function(){return gv("join",arguments)},indexof:function(){return gv("indexOf",arguments)},lastindexof:function(){return gv("lastIndexOf",arguments)},slice:function(){return gv("slice",arguments)},reverse:e=>e.slice().reverse(),parseFloat,parseInt,upper:e=>String(e).toUpperCase(),lower:e=>String(e).toLowerCase(),substring:function(){return gv("substring",arguments,String)},split:function(){return gv("split",arguments,String)},replace:function(){return gv("replace",arguments,String)},trim:e=>String(e).trim(),regexp:RegExp,test:(e,t)=>RegExp(e).test(t)};const NKt=["view","item","group","xy","x","y"],uq=new Set([Function,eval,setTimeout,setInterval]);typeof setImmediate=="function"&&uq.add(setImmediate);const PKt={Literal:(e,t)=>t.value,Identifier:(e,t)=>{const n=t.name;return e.memberDepth>0?n:n==="datum"?e.datum:n==="event"?e.event:n==="item"?e.item:TKt[n]||e.params["$"+n]},MemberExpression:(e,t)=>{const n=!t.computed,r=e(t.object);n&&(e.memberDepth+=1);const i=e(t.property);if(n&&(e.memberDepth-=1),uq.has(r[i])){console.error(`Prevented interpretation of member "${i}" which could lead to insecure code execution`);return}return r[i]},CallExpression:(e,t)=>{const n=t.arguments;let r=t.callee.name;return r.startsWith("_")&&(r=r.slice(1)),r==="if"?e(n[0])?e(n[1]):e(n[2]):(e.fn[r]||RKt[r]).apply(e.fn,n.map(e))},ArrayExpression:(e,t)=>t.elements.map(e),BinaryExpression:(e,t)=>CKt[t.operator](e(t.left),e(t.right)),UnaryExpression:(e,t)=>AKt[t.operator](e(t.argument)),ConditionalExpression:(e,t)=>e(t.test)?e(t.consequent):e(t.alternate),LogicalExpression:(e,t)=>t.operator==="&&"?e(t.left)&&e(t.right):e(t.left)||e(t.right),ObjectExpression:(e,t)=>t.properties.reduce((n,r)=>{e.memberDepth+=1;const i=e(r.key);return e.memberDepth-=1,uq.has(e(r.value))?console.error(`Prevented interpretation of property "${i}" which could lead to insecure code execution`):n[i]=e(r.value),n},{})};function o2(e,t,n,r,i,s){const o=a=>PKt[a.type](o,a);return o.memberDepth=0,o.fn=Object.create(t),o.params=n,o.datum=r,o.event=i,o.item=s,NKt.forEach(a=>o.fn[a]=function(){return i.vega[a](...arguments)}),o(e)}var DKt={operator(e,t){const n=t.ast,r=e.functions;return i=>o2(n,r,i)},parameter(e,t){const n=t.ast,r=e.functions;return(i,s)=>o2(n,r,s,i)},event(e,t){const n=t.ast,r=e.functions;return i=>o2(n,r,void 0,void 0,i)},handler(e,t){const n=t.ast,r=e.functions;return(i,s)=>{const o=s.item&&s.item.datum;return o2(n,r,i,o,s)}},encode(e,t){const{marktype:n,channels:r}=t,i=e.functions,s=n==="group"||n==="image"||n==="rect";return(o,a)=>{const u=o.datum;let l=0,c;for(const f in r)c=o2(r[f].ast,i,a,u,void 0,o),o[f]!==c&&(o[f]=c,l=1);return n!=="rule"&&SKt(o,r,s),l}}};const OKt="vega-lite",$Kt='Dominik Moritz, Kanit "Ham" Wongsuphasawat, Arvind Satyanarayan, Jeffrey Heer',MKt="5.18.1",LKt=["Kanit Wongsuphasawat (http://kanitw.yellowpigz.com)","Dominik Moritz (https://www.domoritz.de)","Arvind Satyanarayan (https://arvindsatya.com)","Jeffrey Heer (https://jheer.org)"],FKt="https://vega.github.io/vega-lite/",jKt="Vega-Lite is a concise high-level language for interactive visualization.",BKt=["vega","chart","visualization"],UKt="build/vega-lite.js",zKt="build/vega-lite.min.js",VKt="build/vega-lite.min.js",HKt="build/src/index",qKt="build/src/index.d.ts",WKt={vl2pdf:"./bin/vl2pdf",vl2png:"./bin/vl2png",vl2svg:"./bin/vl2svg",vl2vg:"./bin/vl2vg"},GKt=["bin","build","src","vega-lite*","tsconfig.json"],YKt={changelog:"conventional-changelog -p angular -r 2",prebuild:"yarn clean:build",build:"yarn build:only","build:only":"tsc -p tsconfig.build.json && rollup -c","prebuild:examples":"yarn build:only","build:examples":"yarn data && TZ=America/Los_Angeles scripts/build-examples.sh","prebuild:examples-full":"yarn build:only","build:examples-full":"TZ=America/Los_Angeles scripts/build-examples.sh 1","build:example":"TZ=America/Los_Angeles scripts/build-example.sh","build:toc":"yarn build:jekyll && scripts/generate-toc","build:site":"rollup -c site/rollup.config.mjs","build:jekyll":"pushd site && bundle exec jekyll build -q && popd","build:versions":"scripts/update-version.sh",clean:"yarn clean:build && del-cli 'site/data/*' 'examples/compiled/*.png' && find site/examples ! -name 'index.md' ! -name 'data' -type f -delete","clean:build":"del-cli 'build/*' !build/vega-lite-schema.json",data:"rsync -r node_modules/vega-datasets/data/* site/data","build-editor-preview":"scripts/build-editor-preview.sh",schema:"mkdir -p build && ts-json-schema-generator -f tsconfig.json -p src/index.ts -t TopLevelSpec --no-type-check --no-ref-encode > build/vega-lite-schema.json && yarn renameschema && cp build/vega-lite-schema.json site/_data/",renameschema:"scripts/rename-schema.sh",presite:"yarn data && yarn schema && yarn build:site && yarn build:versions && scripts/create-example-pages.sh",site:"yarn site:only","site:only":"pushd site && bundle exec jekyll serve -I -l && popd",prettierbase:"prettier '**/*.{md,css,yml}'",format:"eslint . --fix && yarn prettierbase --write",lint:"eslint . && yarn prettierbase --check",test:"yarn jest test/ && yarn lint && yarn schema && yarn jest examples/ && yarn test:runtime","test:cover":"yarn jest --collectCoverage test/","test:inspect":"node --inspect-brk ./node_modules/.bin/jest --runInBand test","test:runtime":"TZ=America/Los_Angeles npx jest test-runtime/ --config test-runtime/jest-config.json","test:runtime:generate":"yarn build:only && del-cli test-runtime/resources && VL_GENERATE_TESTS=true yarn test:runtime",watch:"tsc -p tsconfig.build.json -w","watch:site":"yarn build:site -w","watch:test":"yarn jest --watch test/","watch:test:runtime":"TZ=America/Los_Angeles npx jest --watch test-runtime/ --config test-runtime/jest-config.json",release:"release-it"},KKt={type:"git",url:"https://github.com/vega/vega-lite.git"},XKt="BSD-3-Clause",QKt={url:"https://github.com/vega/vega-lite/issues"},JKt={"@babel/core":"^7.24.5","@babel/preset-env":"^7.24.5","@babel/preset-typescript":"^7.24.1","@release-it/conventional-changelog":"^8.0.1","@rollup/plugin-alias":"^5.1.0","@rollup/plugin-babel":"^6.0.4","@rollup/plugin-commonjs":"^25.0.7","@rollup/plugin-json":"^6.1.0","@rollup/plugin-node-resolve":"^15.2.3","@rollup/plugin-terser":"^0.4.4","@types/d3":"^7.4.3","@types/jest":"^29.5.12","@types/pako":"^2.0.3","@typescript-eslint/eslint-plugin":"^7.8.0","@typescript-eslint/parser":"^7.8.0",ajv:"^8.13.0","ajv-formats":"^2.1.1",cheerio:"^1.0.0-rc.12","conventional-changelog-cli":"^4.1.0",d3:"^7.9.0","del-cli":"^5.1.0",eslint:"^8.57.0","eslint-config-prettier":"^9.1.0","eslint-plugin-jest":"^27.9.0","eslint-plugin-prettier":"^5.1.3","fast-json-stable-stringify":"~2.1.0","highlight.js":"^11.9.0",jest:"^29.7.0","jest-dev-server":"^10.0.0",mkdirp:"^3.0.1",pako:"^2.1.0",prettier:"^3.2.5",puppeteer:"^15.0.0","release-it":"^17.2.1",rollup:"^4.17.2","rollup-plugin-bundle-size":"^1.0.3",serve:"^14.2.3",terser:"^5.31.0","ts-jest":"^29.1.2","ts-json-schema-generator":"^1.5.0",typescript:"~5.4.5","vega-cli":"^5.28.0","vega-datasets":"^2.8.1","vega-embed":"^6.25.0","vega-tooltip":"^0.34.0","yaml-front-matter":"^4.1.1"},ZKt={"json-stringify-pretty-compact":"~3.0.0",tslib:"~2.6.2","vega-event-selector":"~3.0.1","vega-expression":"~5.1.0","vega-util":"~1.17.2",yargs:"~17.7.2"},eXt={vega:"^5.24.0"},tXt={node:">=18"},nXt="yarn@1.22.19",rXt={name:OKt,author:$Kt,version:MKt,collaborators:LKt,homepage:FKt,description:jKt,keywords:BKt,main:UKt,unpkg:zKt,jsdelivr:VKt,module:HKt,types:qKt,bin:WKt,files:GKt,scripts:YKt,repository:KKt,license:XKt,bugs:QKt,devDependencies:JKt,dependencies:ZKt,peerDependencies:eXt,engines:tXt,packageManager:nXt};function Qne(e){return!!e.or}function Jne(e){return!!e.and}function Zne(e){return!!e.not}function pO(e,t){if(Zne(e))pO(e.not,t);else if(Jne(e))for(const n of e.and)pO(n,t);else if(Qne(e))for(const n of e.or)pO(n,t);else t(e)}function _E(e,t){return Zne(e)?{not:_E(e.not,t)}:Jne(e)?{and:e.and.map(n=>_E(n,t))}:Qne(e)?{or:e.or.map(n=>_E(n,t))}:t(e)}const nn=structuredClone;function e4e(e){throw new Error(e)}function Nx(e,t){const n={};for(const r of t)jt(e,r)&&(n[r]=e[r]);return n}function Yu(e,t){const n={...e};for(const r of t)delete n[r];return n}Set.prototype.toJSON=function(){return`Set(${[...this].map(e=>Br(e)).join(",")})`};function Vn(e){if(lr(e))return e;const t=mt(e)?e:Br(e);if(t.length<250)return t;let n=0;for(let r=0;r<t.length;r++){const i=t.charCodeAt(r);n=(n<<5)-n+i,n=n&n}return n}function lq(e){return e===!1||e===null}function Hn(e,t){return e.includes(t)}function vb(e,t){let n=0;for(const[r,i]of e.entries())if(t(i,r,n++))return!0;return!1}function ere(e,t){let n=0;for(const[r,i]of e.entries())if(!t(i,r,n++))return!1;return!0}function t4e(e,...t){for(const n of t)iXt(e,n??{});return e}function iXt(e,t){for(const n of Ye(t))qS(e,n,t[n],!0)}function oh(e,t){const n=[],r={};let i;for(const s of e)i=t(s),!(i in r)&&(r[i]=1,n.push(s));return n}function sXt(e,t){const n=Ye(e),r=Ye(t);if(n.length!==r.length)return!1;for(const i of n)if(e[i]!==t[i])return!1;return!0}function n4e(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}function tre(e,t){for(const n of e)if(t.has(n))return!0;return!1}function cq(e){const t=new Set;for(const n of e){const i=ip(n).map((o,a)=>a===0?o:`[${o}]`),s=i.map((o,a)=>i.slice(0,a+1).join(""));for(const o of s)t.add(o)}return t}function nre(e,t){return e===void 0||t===void 0?!0:tre(cq(e),cq(t))}function jr(e){return Ye(e).length===0}const Ye=Object.keys,Mo=Object.values,vy=Object.entries;function WI(e){return e===!0||e===!1}function Ci(e){const t=e.replace(/\W/g,"_");return(e.match(/^\d+/)?"_":"")+t}function rA(e,t){return Zne(e)?`!(${rA(e.not,t)})`:Jne(e)?`(${e.and.map(n=>rA(n,t)).join(") && (")})`:Qne(e)?`(${e.or.map(n=>rA(n,t)).join(") || (")})`:t(e)}function jM(e,t){if(t.length===0)return!0;const n=t.shift();return n in e&&jM(e[n],t)&&delete e[n],jr(e)}function MR(e){return e.charAt(0).toUpperCase()+e.substr(1)}function rre(e,t="datum"){const n=ip(e),r=[];for(let i=1;i<=n.length;i++){const s=`[${n.slice(0,i).map(rt).join("][")}]`;r.push(`${t}${s}`)}return r.join(" && ")}function r4e(e,t="datum"){return`${t}[${rt(ip(e).join("."))}]`}function oXt(e){return e.replace(/(\[|\]|\.|'|")/g,"\\$1")}function zc(e){return`${ip(e).map(oXt).join("\\.")}`}function bb(e,t,n){return e.replace(new RegExp(t.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"),"g"),n)}function tT(e){return`${ip(e).join(".")}`}function Px(e){return e?ip(e).length:0}function fs(...e){for(const t of e)if(t!==void 0)return t}let i4e=42;function s4e(e){const t=++i4e;return e?String(e)+t:t}function aXt(){i4e=42}function o4e(e){return a4e(e)?e:`__${e}`}function a4e(e){return e.startsWith("__")}function GI(e){if(e!==void 0)return(e%360+360)%360}function qF(e){return lr(e)?!0:!isNaN(e)&&!isNaN(parseFloat(e))}const Age=Object.getPrototypeOf(structuredClone({}));function Rl(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor.name!==t.constructor.name)return!1;let n,r;if(Array.isArray(e)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(!Rl(e[r],t[r]))return!1;return!0}if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(r of e.entries())if(!t.has(r[0]))return!1;for(r of e.entries())if(!Rl(r[1],t.get(r[0])))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(r of e.entries())if(!t.has(r[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(e[r]!==t[r])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf&&e.valueOf!==Age.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString&&e.toString!==Age.toString)return e.toString()===t.toString();const i=Object.keys(e);if(n=i.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!Object.prototype.hasOwnProperty.call(t,i[r]))return!1;for(r=n;r--!==0;){const s=i[r];if(!Rl(e[s],t[s]))return!1}return!0}return e!==e&&t!==t}function Br(e){const t=[];return function n(r){if(r&&r.toJSON&&typeof r.toJSON=="function"&&(r=r.toJSON()),r===void 0)return;if(typeof r=="number")return isFinite(r)?""+r:"null";if(typeof r!="object")return JSON.stringify(r);let i,s;if(Array.isArray(r)){for(s="[",i=0;i<r.length;i++)i&&(s+=","),s+=n(r[i])||"null";return s+"]"}if(r===null)return"null";if(t.includes(r))throw new TypeError("Converting circular structure to JSON");const o=t.push(r)-1,a=Object.keys(r).sort();for(s="",i=0;i<a.length;i++){const u=a[i],l=n(r[u]);l&&(s&&(s+=","),s+=JSON.stringify(u)+":"+l)}return t.splice(o,1),`{${s}}`}(e)}const fm="row",dm="column",WF="facet",Ai="x",po="y",md="x2",up="y2",Qy="xOffset",nT="yOffset",gd="radius",lg="radius2",Zc="theta",cg="theta2",yd="latitude",vd="longitude",bd="latitude2",Vc="longitude2",sl="color",lp="fill",cp="stroke",ol="shape",fg="size",c_="angle",dg="opacity",Jy="fillOpacity",Zy="strokeOpacity",ev="strokeWidth",tv="strokeDash",LR="text",Dx="order",FR="detail",GF="key",_b="tooltip",YF="href",KF="url",XF="description",uXt={x:1,y:1,x2:1,y2:1},u4e={theta:1,theta2:1,radius:1,radius2:1};function l4e(e){return e in u4e}const ire={longitude:1,longitude2:1,latitude:1,latitude2:1};function c4e(e){switch(e){case yd:return"y";case bd:return"y2";case vd:return"x";case Vc:return"x2"}}function f4e(e){return e in ire}const lXt=Ye(ire),sre={...uXt,...u4e,...ire,xOffset:1,yOffset:1,color:1,fill:1,stroke:1,opacity:1,fillOpacity:1,strokeOpacity:1,strokeWidth:1,strokeDash:1,size:1,angle:1,shape:1,order:1,text:1,detail:1,key:1,tooltip:1,href:1,url:1,description:1};function wE(e){return e===sl||e===lp||e===cp}const d4e={row:1,column:1,facet:1},Ac=Ye(d4e),ore={...sre,...d4e},cXt=Ye(ore),{order:Uun,detail:zun,tooltip:Vun,...fXt}=ore,{row:Hun,column:qun,facet:Wun,...dXt}=fXt;function hXt(e){return!!dXt[e]}function h4e(e){return!!ore[e]}const pXt=[md,up,bd,Vc,cg,lg];function p4e(e){return f_(e)!==e}function f_(e){switch(e){case md:return Ai;case up:return po;case bd:return yd;case Vc:return vd;case cg:return Zc;case lg:return gd}return e}function by(e){if(l4e(e))switch(e){case Zc:return"startAngle";case cg:return"endAngle";case gd:return"outerRadius";case lg:return"innerRadius"}return e}function fp(e){switch(e){case Ai:return md;case po:return up;case yd:return bd;case vd:return Vc;case Zc:return cg;case gd:return lg}}function al(e){switch(e){case Ai:case md:return"width";case po:case up:return"height"}}function m4e(e){switch(e){case Ai:return"xOffset";case po:return"yOffset";case md:return"x2Offset";case up:return"y2Offset";case Zc:return"thetaOffset";case gd:return"radiusOffset";case cg:return"theta2Offset";case lg:return"radius2Offset"}}function are(e){switch(e){case Ai:return"xOffset";case po:return"yOffset"}}function mXt(e){switch(e){case"xOffset":return"x";case"yOffset":return"y"}}const gXt=Ye(sre),{x:Gun,y:Yun,x2:Kun,y2:Xun,xOffset:Qun,yOffset:Jun,latitude:Zun,longitude:eln,latitude2:tln,longitude2:nln,theta:rln,theta2:iln,radius:sln,radius2:oln,...ure}=sre,yXt=Ye(ure),lre={x:1,y:1},dp=Ye(lre);function ds(e){return e in lre}const cre={theta:1,radius:1},vXt=Ye(cre);function QF(e){return e==="width"?Ai:po}const g4e={xOffset:1,yOffset:1};function jR(e){return e in g4e}const{text:aln,tooltip:uln,href:lln,url:cln,description:fln,detail:dln,key:hln,order:pln,...y4e}=ure,bXt=Ye(y4e);function _Xt(e){return!!ure[e]}function wXt(e){switch(e){case sl:case lp:case cp:case fg:case ol:case dg:case ev:case tv:return!0;case Jy:case Zy:case c_:return!1}}const v4e={...lre,...cre,...g4e,...y4e},JF=Ye(v4e);function hg(e){return!!v4e[e]}function EXt(e,t){return SXt(e)[t]}const b4e={arc:"always",area:"always",bar:"always",circle:"always",geoshape:"always",image:"always",line:"always",rule:"always",point:"always",rect:"always",square:"always",trail:"always",text:"always",tick:"always"},{geoshape:mln,...xXt}=b4e;function SXt(e){switch(e){case sl:case lp:case cp:case XF:case FR:case GF:case _b:case YF:case Dx:case dg:case Jy:case Zy:case ev:case WF:case fm:case dm:return b4e;case Ai:case po:case Qy:case nT:case yd:case vd:return xXt;case md:case up:case bd:case Vc:return{area:"always",bar:"always",image:"always",rect:"always",rule:"always",circle:"binned",point:"binned",square:"binned",tick:"binned",line:"binned",trail:"binned"};case fg:return{point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",text:"always",line:"always",trail:"always"};case tv:return{line:"always",point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",geoshape:"always"};case ol:return{point:"always",geoshape:"always"};case LR:return{text:"always"};case c_:return{point:"always",square:"always",text:"always"};case KF:return{image:"always"};case Zc:return{text:"always",arc:"always"};case gd:return{text:"always",arc:"always"};case cg:case lg:return{arc:"always"}}}function TB(e){switch(e){case Ai:case po:case Zc:case gd:case Qy:case nT:case fg:case c_:case ev:case dg:case Jy:case Zy:case md:case up:case cg:case lg:return;case WF:case fm:case dm:case ol:case tv:case LR:case _b:case YF:case KF:case XF:return"discrete";case sl:case lp:case cp:return"flexible";case yd:case vd:case bd:case Vc:case FR:case GF:case Dx:return}}const TXt={argmax:1,argmin:1,average:1,count:1,distinct:1,exponential:1,exponentialb:1,product:1,max:1,mean:1,median:1,min:1,missing:1,q1:1,q3:1,ci0:1,ci1:1,stderr:1,stdev:1,stdevp:1,sum:1,valid:1,values:1,variance:1,variancep:1},CXt={count:1,min:1,max:1};function Um(e){return!!e&&!!e.argmin}function nv(e){return!!e&&!!e.argmax}function fre(e){return mt(e)&&!!TXt[e]}const AXt=new Set(["count","valid","missing","distinct"]);function _4e(e){return mt(e)&&AXt.has(e)}function IXt(e){return mt(e)&&Hn(["min","max"],e)}const kXt=new Set(["count","sum","distinct","valid","missing"]),RXt=new Set(["mean","average","median","q1","q3","min","max"]);function w4e(e){return Yy(e)&&(e=c5(e,void 0)),"bin"+Ye(e).map(t=>ZF(e[t])?Ci(`_${t}_${vy(e[t])}`):Ci(`_${t}_${e[t]}`)).join("")}function oi(e){return e===!0||d_(e)&&!e.binned}function Co(e){return e==="binned"||d_(e)&&e.binned===!0}function d_(e){return gt(e)}function ZF(e){return e==null?void 0:e.param}function Ige(e){switch(e){case fm:case dm:case fg:case sl:case lp:case cp:case ev:case dg:case Jy:case Zy:case ol:return 6;case tv:return 4;default:return 10}}function BR(e){return!!(e!=null&&e.expr)}function Ru(e){const t=Ye(e||{}),n={};for(const r of t)n[r]=El(e[r]);return n}function E4e(e){const{anchor:t,frame:n,offset:r,orient:i,angle:s,limit:o,color:a,subtitleColor:u,subtitleFont:l,subtitleFontSize:c,subtitleFontStyle:f,subtitleFontWeight:d,subtitleLineHeight:h,subtitlePadding:p,...m}=e,g={...m,...a?{fill:a}:{}},y={...t?{anchor:t}:{},...n?{frame:n}:{},...r?{offset:r}:{},...i?{orient:i}:{},...s!==void 0?{angle:s}:{},...o!==void 0?{limit:o}:{}},v={...u?{subtitleColor:u}:{},...l?{subtitleFont:l}:{},...c?{subtitleFontSize:c}:{},...f?{subtitleFontStyle:f}:{},...d?{subtitleFontWeight:d}:{},...h?{subtitleLineHeight:h}:{},...p?{subtitlePadding:p}:{}},_=Nx(e,["align","baseline","dx","dy","limit"]);return{titleMarkConfig:g,subtitleMarkConfig:_,nonMarkTitleProperties:y,subtitle:v}}function jg(e){return mt(e)||je(e)&&mt(e[0])}function Rt(e){return!!(e!=null&&e.signal)}function rv(e){return!!e.step}function NXt(e){return je(e)?!1:"fields"in e&&!("data"in e)}function PXt(e){return je(e)?!1:"fields"in e&&"data"in e}function nm(e){return je(e)?!1:"field"in e&&"data"in e}const DXt={aria:1,description:1,ariaRole:1,ariaRoleDescription:1,blend:1,opacity:1,fill:1,fillOpacity:1,stroke:1,strokeCap:1,strokeWidth:1,strokeOpacity:1,strokeDash:1,strokeDashOffset:1,strokeJoin:1,strokeOffset:1,strokeMiterLimit:1,startAngle:1,endAngle:1,padAngle:1,innerRadius:1,outerRadius:1,size:1,shape:1,interpolate:1,tension:1,orient:1,align:1,baseline:1,text:1,dir:1,dx:1,dy:1,ellipsis:1,limit:1,radius:1,theta:1,angle:1,font:1,fontSize:1,fontWeight:1,fontStyle:1,lineBreak:1,lineHeight:1,cursor:1,href:1,tooltip:1,cornerRadius:1,cornerRadiusTopLeft:1,cornerRadiusTopRight:1,cornerRadiusBottomLeft:1,cornerRadiusBottomRight:1,aspect:1,width:1,height:1,url:1,smooth:1},OXt=Ye(DXt),$Xt={arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1},fq=["cornerRadius","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight"];function x4e(e){const t=je(e.condition)?e.condition.map(kge):kge(e.condition);return{...El(e),condition:t}}function El(e){if(BR(e)){const{expr:t,...n}=e;return{signal:t,...n}}return e}function kge(e){if(BR(e)){const{expr:t,...n}=e;return{signal:t,...n}}return e}function hi(e){if(BR(e)){const{expr:t,...n}=e;return{signal:t,...n}}return Rt(e)?e:e!==void 0?{value:e}:void 0}function MXt(e){return Rt(e)?e.signal:rt(e)}function Rge(e){return Rt(e)?e.signal:rt(e.value)}function $f(e){return Rt(e)?e.signal:e==null?null:rt(e)}function LXt(e,t,n){for(const r of n){const i=zm(r,t.markDef,t.config);i!==void 0&&(e[r]=hi(i))}return e}function S4e(e){return[].concat(e.type,e.style??[])}function wr(e,t,n,r={}){const{vgChannel:i,ignoreVgConfig:s}=r;return i&&t[i]!==void 0?t[i]:t[e]!==void 0?t[e]:s&&(!i||i===e)?void 0:zm(e,t,n,r)}function zm(e,t,n,{vgChannel:r}={}){return fs(r?BM(e,t,n.style):void 0,BM(e,t,n.style),r?n[t.type][r]:void 0,n[t.type][e],r?n.mark[r]:n.mark[e])}function BM(e,t,n){return T4e(e,S4e(t),n)}function T4e(e,t,n){t=pt(t);let r;for(const i of t){const s=n[i];s&&s[e]!==void 0&&(r=s[e])}return r}function C4e(e,t){return pt(e).reduce((n,r)=>(n.field.push(at(r,t)),n.order.push(r.sort??"ascending"),n),{field:[],order:[]})}function A4e(e,t){const n=[...e];return t.forEach(r=>{for(const i of n)if(Rl(i,r))return;n.push(r)}),n}function I4e(e,t){return Rl(e,t)||!t?e:e?[...pt(e),...pt(t)].join(", "):t}function k4e(e,t){const n=e.value,r=t.value;if(n==null||r===null)return{explicit:e.explicit,value:null};if((jg(n)||Rt(n))&&(jg(r)||Rt(r)))return{explicit:e.explicit,value:I4e(n,r)};if(jg(n)||Rt(n))return{explicit:e.explicit,value:n};if(jg(r)||Rt(r))return{explicit:e.explicit,value:r};if(!jg(n)&&!Rt(n)&&!jg(r)&&!Rt(r))return{explicit:e.explicit,value:A4e(n,r)};throw new Error("It should never reach here")}function dre(e){return`Invalid specification ${Br(e)}. Make sure the specification includes at least one of the following properties: "mark", "layer", "facet", "hconcat", "vconcat", "concat", or "repeat".`}const FXt='Autosize "fit" only works for single views and layered views.';function Nge(e){return`${e=="width"?"Width":"Height"} "container" only works for single views and layered views.`}function Pge(e){const t=e=="width"?"Width":"Height",n=e=="width"?"x":"y";return`${t} "container" only works well with autosize "fit" or "fit-${n}".`}function Dge(e){return e?`Dropping "fit-${e}" because spec has discrete ${al(e)}.`:'Dropping "fit" because spec has discrete size.'}function hre(e){return`Unknown field for ${e}. Cannot calculate view size.`}function Oge(e){return`Cannot project a selection on encoding channel "${e}", which has no field.`}function jXt(e,t){return`Cannot project a selection on encoding channel "${e}" as it uses an aggregate function ("${t}").`}function BXt(e){return`The "nearest" transform is not supported for ${e} marks.`}function R4e(e){return`Selection not supported for ${e} yet.`}function UXt(e){return`Cannot find a selection named "${e}".`}const zXt="Scale bindings are currently only supported for scales with unbinned, continuous domains.",VXt="Sequntial scales are deprecated. The available quantitative scale type values are linear, log, pow, sqrt, symlog, time and utc",HXt="Legend bindings are only supported for selections over an individual field or encoding channel.";function qXt(e){return`Lookups can only be performed on selection parameters. "${e}" is a variable parameter.`}function WXt(e){return`Cannot define and lookup the "${e}" selection in the same view. Try moving the lookup into a second, layered view?`}const GXt="The same selection must be used to override scale domains in a layered view.",YXt='Interval selections should be initialized using "x", "y", "longitude", or "latitude" keys.';function KXt(e){return`Unknown repeated value "${e}".`}function $ge(e){return`The "columns" property cannot be used when "${e}" has nested row/column.`}const XXt="Axes cannot be shared in concatenated or repeated views yet (https://github.com/vega/vega-lite/issues/2415).";function QXt(e){return`Unrecognized parse "${e}".`}function Mge(e,t,n){return`An ancestor parsed field "${e}" as ${n} but a child wants to parse the field as ${t}.`}const JXt="Attempt to add the same child twice.";function ZXt(e){return`Ignoring an invalid transform: ${Br(e)}.`}const eQt='If "from.fields" is not specified, "as" has to be a string that specifies the key to be used for the data from the secondary source.';function Lge(e){return`Config.customFormatTypes is not true, thus custom format type and format for channel ${e} are dropped.`}function tQt(e){const{parentProjection:t,projection:n}=e;return`Layer's shared projection ${Br(t)} is overridden by a child projection ${Br(n)}.`}const nQt="Arc marks uses theta channel rather than angle, replacing angle with theta.";function rQt(e){return`${e}Offset dropped because ${e} is continuous`}function iQt(e,t,n){return`Channel ${e} is a ${t}. Converted to {value: ${Br(n)}}.`}function N4e(e){return`Invalid field type "${e}".`}function sQt(e,t){return`Invalid field type "${e}" for aggregate: "${t}", using "quantitative" instead.`}function oQt(e){return`Invalid aggregation operator "${e}".`}function P4e(e,t){const{fill:n,stroke:r}=t;return`Dropping color ${e} as the plot also has ${n&&r?"fill and stroke":n?"fill":"stroke"}.`}function aQt(e){return`Position range does not support relative band size for ${e}.`}function dq(e,t){return`Dropping ${Br(e)} from channel "${t}" since it does not contain any data field, datum, value, or signal.`}const uQt="Line marks cannot encode size with a non-groupby field. You may want to use trail marks instead.";function e5(e,t,n){return`${e} dropped as it is incompatible with "${t}".`}function lQt(e){return`${e}-encoding is dropped as ${e} is not a valid encoding channel.`}function cQt(e){return`${e} encoding should be discrete (ordinal / nominal / binned).`}function fQt(e){return`${e} encoding should be discrete (ordinal / nominal / binned) or use a discretizing scale (e.g. threshold).`}function dQt(e){return`Facet encoding dropped as ${e.join(" and ")} ${e.length>1?"are":"is"} also specified.`}function CB(e,t){return`Using discrete channel "${e}" to encode "${t}" field can be misleading as it does not encode ${t==="ordinal"?"order":"magnitude"}.`}function hQt(e){return`The ${e} for range marks cannot be an expression`}function pQt(e,t){return`Line mark is for continuous lines and thus cannot be used with ${e&&t?"x2 and y2":e?"x2":"y2"}. We will use the rule mark (line segments) instead.`}function mQt(e,t){return`Specified orient "${e}" overridden with "${t}".`}function gQt(e){return`Cannot use the scale property "${e}" with non-color channel.`}function yQt(e){return`Cannot use the relative band size with ${e} scale.`}function vQt(e){return`Using unaggregated domain with raw field has no effect (${Br(e)}).`}function bQt(e){return`Unaggregated domain not applicable for "${e}" since it produces values outside the origin domain of the source data.`}function _Qt(e){return`Unaggregated domain is currently unsupported for log scale (${Br(e)}).`}function wQt(e){return`Cannot apply size to non-oriented mark "${e}".`}function EQt(e,t,n){return`Channel "${e}" does not work with "${t}" scale. We are using "${n}" scale instead.`}function xQt(e,t){return`FieldDef does not work with "${e}" scale. We are using "${t}" scale instead.`}function D4e(e,t,n){return`${n}-scale's "${t}" is dropped as it does not work with ${e} scale.`}function O4e(e){return`The step for "${e}" is dropped because the ${e==="width"?"x":"y"} is continuous.`}function SQt(e,t,n,r){return`Conflicting ${t.toString()} property "${e.toString()}" (${Br(n)} and ${Br(r)}). Using ${Br(n)}.`}function TQt(e,t,n,r){return`Conflicting ${t.toString()} property "${e.toString()}" (${Br(n)} and ${Br(r)}). Using the union of the two domains.`}function CQt(e){return`Setting the scale to be independent for "${e}" means we also have to set the guide (axis or legend) to be independent.`}function AQt(e){return`Dropping sort property ${Br(e)} as unioned domains only support boolean or op "count", "min", and "max".`}const Fge="Domains that should be unioned has conflicting sort properties. Sort will be set to true.",IQt="Detected faceted independent scales that union domain of multiple fields from different data sources. We will use the first field. The result view size may be incorrect.",kQt="Detected faceted independent scales that union domain of the same fields from different source. We will assume that this is the same field from a different fork of the same data source. However, if this is not the case, the result view size may be incorrect.",RQt="Detected faceted independent scales that union domain of multiple fields from the same data source. We will use the first field. The result view size may be incorrect.";function NQt(e){return`Cannot stack "${e}" if there is already "${e}2".`}function PQt(e){return`Stack is applied to a non-linear scale (${e}).`}function DQt(e){return`Stacking is applied even though the aggregate function is non-summative ("${e}").`}function UM(e,t){return`Invalid ${e}: ${Br(t)}.`}function OQt(e){return`Dropping day from datetime ${Br(e)} as day cannot be combined with other units.`}function $Qt(e,t){return`${t?"extent ":""}${t&&e?"and ":""}${e?"center ":""}${t&&e?"are ":"is "}not needed when data are aggregated.`}function MQt(e,t,n){return`${e} is not usually used with ${t} for ${n}.`}function LQt(e,t){return`Continuous axis should not have customized aggregation function ${e}; ${t} already agregates the axis.`}function jge(e){return`1D error band does not support ${e}.`}function $4e(e){return`Channel ${e} is required for "binned" bin.`}function FQt(e){return`Channel ${e} should not be used with "binned" bin.`}function jQt(e){return`Domain for ${e} is required for threshold scale.`}const M4e=WZ(qZ);let Ox=M4e;function BQt(e){return Ox=e,Ox}function UQt(){return Ox=M4e,Ox}function Ze(...e){Ox.warn(...e)}function zQt(...e){Ox.debug(...e)}function h_(e){if(e&&gt(e)){for(const t of mre)if(t in e)return!0}return!1}const L4e=["january","february","march","april","may","june","july","august","september","october","november","december"],VQt=L4e.map(e=>e.substr(0,3)),F4e=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],HQt=F4e.map(e=>e.substr(0,3));function qQt(e){if(qF(e)&&(e=+e),lr(e))return e>4&&Ze(UM("quarter",e)),e-1;throw new Error(UM("quarter",e))}function WQt(e){if(qF(e)&&(e=+e),lr(e))return e-1;{const t=e.toLowerCase(),n=L4e.indexOf(t);if(n!==-1)return n;const r=t.substr(0,3),i=VQt.indexOf(r);if(i!==-1)return i;throw new Error(UM("month",e))}}function GQt(e){if(qF(e)&&(e=+e),lr(e))return e%7;{const t=e.toLowerCase(),n=F4e.indexOf(t);if(n!==-1)return n;const r=t.substr(0,3),i=HQt.indexOf(r);if(i!==-1)return i;throw new Error(UM("day",e))}}function pre(e,t){const n=[];if(t&&e.day!==void 0&&Ye(e).length>1&&(Ze(OQt(e)),e=nn(e),delete e.day),e.year!==void 0?n.push(e.year):n.push(2012),e.month!==void 0){const r=t?WQt(e.month):e.month;n.push(r)}else if(e.quarter!==void 0){const r=t?qQt(e.quarter):e.quarter;n.push(lr(r)?r*3:`${r}*3`)}else n.push(0);if(e.date!==void 0)n.push(e.date);else if(e.day!==void 0){const r=t?GQt(e.day):e.day;n.push(lr(r)?r+1:`${r}+1`)}else n.push(1);for(const r of["hours","minutes","seconds","milliseconds"]){const i=e[r];n.push(typeof i>"u"?0:i)}return n}function wb(e){const n=pre(e,!0).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}function YQt(e){const n=pre(e,!1).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}function KQt(e){const t=pre(e,!0);return e.utc?+new Date(Date.UTC(...t)):+new Date(...t)}const j4e={year:1,quarter:1,month:1,week:1,day:1,dayofyear:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1},mre=Ye(j4e);function XQt(e){return!!j4e[e]}function p_(e){return gt(e)?e.binned:B4e(e)}function B4e(e){return e&&e.startsWith("binned")}function gre(e){return e.startsWith("utc")}function QQt(e){return e.substring(3)}const JQt={"year-month":"%b %Y ","year-month-date":"%b %d, %Y "};function t5(e){return mre.filter(t=>z4e(e,t))}function U4e(e){const t=t5(e);return t[t.length-1]}function z4e(e,t){const n=e.indexOf(t);return!(n<0||n>0&&t==="seconds"&&e.charAt(n-1)==="i"||e.length>n+3&&t==="day"&&e.charAt(n+3)==="o"||n>0&&t==="year"&&e.charAt(n-1)==="f")}function ZQt(e,t,{end:n}={end:!1}){const r=rre(t),i=gre(e)?"utc":"";function s(u){return u==="quarter"?`(${i}quarter(${r})-1)`:`${i}${u}(${r})`}let o;const a={};for(const u of mre)z4e(e,u)&&(a[u]=s(u),o=u);return n&&(a[o]+="+1"),YQt(a)}function V4e(e){if(!e)return;const t=t5(e);return`timeUnitSpecifier(${Br(t)}, ${Br(JQt)})`}function eJt(e,t,n){if(!e)return;const r=V4e(e);return`${n||gre(e)?"utc":"time"}Format(${t}, ${r})`}function lo(e){if(!e)return;let t;return mt(e)?B4e(e)?t={unit:e.substring(6),binned:!0}:t={unit:e}:gt(e)&&(t={...e,...e.unit?{unit:e.unit}:{}}),gre(t.unit)&&(t.utc=!0,t.unit=QQt(t.unit)),t}function tJt(e){const{utc:t,...n}=lo(e);return n.unit?(t?"utc":"")+Ye(n).map(r=>Ci(`${r==="unit"?"":`_${r}_`}${n[r]}`)).join(""):(t?"utc":"")+"timeunit"+Ye(n).map(r=>Ci(`_${r}_${n[r]}`)).join("")}function H4e(e,t=n=>n){const n=lo(e),r=U4e(n.unit);if(r&&r!=="day"){const i={year:2001,month:1,date:1,hours:0,minutes:0,seconds:0,milliseconds:0},{step:s,part:o}=q4e(r,n.step),a={...i,[o]:+i[o]+s};return`${t(wb(a))} - ${t(wb(i))}`}}const nJt={year:1,month:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1};function rJt(e){return!!nJt[e]}function q4e(e,t=1){if(rJt(e))return{part:e,step:t};switch(e){case"day":case"dayofyear":return{part:"date",step:t};case"quarter":return{part:"month",step:t*3};case"week":return{part:"date",step:t*7}}}function iJt(e){return e==null?void 0:e.param}function yre(e){return!!(e!=null&&e.field)&&e.equal!==void 0}function vre(e){return!!(e!=null&&e.field)&&e.lt!==void 0}function bre(e){return!!(e!=null&&e.field)&&e.lte!==void 0}function _re(e){return!!(e!=null&&e.field)&&e.gt!==void 0}function wre(e){return!!(e!=null&&e.field)&&e.gte!==void 0}function Ere(e){if(e!=null&&e.field){if(je(e.range)&&e.range.length===2)return!0;if(Rt(e.range))return!0}return!1}function xre(e){return!!(e!=null&&e.field)&&(je(e.oneOf)||je(e.in))}function sJt(e){return!!(e!=null&&e.field)&&e.valid!==void 0}function W4e(e){return xre(e)||yre(e)||Ere(e)||vre(e)||_re(e)||bre(e)||wre(e)}function Id(e,t){return f5(e,{timeUnit:t,wrapTime:!0})}function oJt(e,t){return e.map(n=>Id(n,t))}function G4e(e,t=!0){const{field:n}=e,r=lo(e.timeUnit),{unit:i,binned:s}=r||{},o=at(e,{expr:"datum"}),a=i?`time(${s?o:ZQt(i,n)})`:o;if(yre(e))return`${a}===${Id(e.equal,i)}`;if(vre(e)){const u=e.lt;return`${a}<${Id(u,i)}`}else if(_re(e)){const u=e.gt;return`${a}>${Id(u,i)}`}else if(bre(e)){const u=e.lte;return`${a}<=${Id(u,i)}`}else if(wre(e)){const u=e.gte;return`${a}>=${Id(u,i)}`}else{if(xre(e))return`indexof([${oJt(e.oneOf,i).join(",")}], ${a}) !== -1`;if(sJt(e))return Sre(a,e.valid);if(Ere(e)){const{range:u}=e,l=Rt(u)?{signal:`${u.signal}[0]`}:u[0],c=Rt(u)?{signal:`${u.signal}[1]`}:u[1];if(l!==null&&c!==null&&t)return"inrange("+a+", ["+Id(l,i)+", "+Id(c,i)+"])";const f=[];return l!==null&&f.push(`${a} >= ${Id(l,i)}`),c!==null&&f.push(`${a} <= ${Id(c,i)}`),f.length>0?f.join(" && "):"true"}}throw new Error(`Invalid field predicate: ${Br(e)}`)}function Sre(e,t=!0){return t?`isValid(${e}) && isFinite(+${e})`:`!isValid(${e}) || !isFinite(+${e})`}function aJt(e){return W4e(e)&&e.timeUnit?{...e,timeUnit:lo(e.timeUnit)}:e}const UR={quantitative:"quantitative",ordinal:"ordinal",temporal:"temporal",nominal:"nominal",geojson:"geojson"};function uJt(e){return e==="quantitative"||e==="temporal"}function Y4e(e){return e==="ordinal"||e==="nominal"}const Eb=UR.quantitative,Tre=UR.ordinal,$x=UR.temporal,Cre=UR.nominal,rT=UR.geojson;function lJt(e){if(e)switch(e=e.toLowerCase(),e){case"q":case Eb:return"quantitative";case"t":case $x:return"temporal";case"o":case Tre:return"ordinal";case"n":case Cre:return"nominal";case rT:return"geojson"}}const Ku={LINEAR:"linear",LOG:"log",POW:"pow",SQRT:"sqrt",SYMLOG:"symlog",IDENTITY:"identity",SEQUENTIAL:"sequential",TIME:"time",UTC:"utc",QUANTILE:"quantile",QUANTIZE:"quantize",THRESHOLD:"threshold",BIN_ORDINAL:"bin-ordinal",ORDINAL:"ordinal",POINT:"point",BAND:"band"},hq={linear:"numeric",log:"numeric",pow:"numeric",sqrt:"numeric",symlog:"numeric",identity:"numeric",sequential:"numeric",time:"time",utc:"time",ordinal:"ordinal","bin-ordinal":"bin-ordinal",point:"ordinal-position",band:"ordinal-position",quantile:"discretizing",quantize:"discretizing",threshold:"discretizing"};function cJt(e,t){const n=hq[e],r=hq[t];return n===r||n==="ordinal-position"&&r==="time"||r==="ordinal-position"&&n==="time"}const fJt={linear:0,log:1,pow:1,sqrt:1,symlog:1,identity:1,sequential:1,time:0,utc:0,point:10,band:11,ordinal:0,"bin-ordinal":0,quantile:0,quantize:0,threshold:0};function Bge(e){return fJt[e]}const K4e=new Set(["linear","log","pow","sqrt","symlog"]),X4e=new Set([...K4e,"time","utc"]);function Q4e(e){return K4e.has(e)}const J4e=new Set(["quantile","quantize","threshold"]),dJt=new Set([...X4e,...J4e,"sequential","identity"]),hJt=new Set(["ordinal","bin-ordinal","point","band"]);function co(e){return hJt.has(e)}function Kl(e){return dJt.has(e)}function Mf(e){return X4e.has(e)}function Mx(e){return J4e.has(e)}const pJt={pointPadding:.5,barBandPaddingInner:.1,rectBandPaddingInner:0,bandWithNestedOffsetPaddingInner:.2,bandWithNestedOffsetPaddingOuter:.2,minBandSize:2,minFontSize:8,maxFontSize:40,minOpacity:.3,maxOpacity:.8,minSize:9,minStrokeWidth:1,maxStrokeWidth:4,quantileCount:4,quantizeCount:4,zero:!0};function mJt(e){return!mt(e)&&!!e.name}function Z4e(e){return e==null?void 0:e.param}function gJt(e){return e==null?void 0:e.unionWith}function yJt(e){return gt(e)&&"field"in e}const vJt={type:1,domain:1,domainMax:1,domainMin:1,domainMid:1,domainRaw:1,align:1,range:1,rangeMax:1,rangeMin:1,scheme:1,bins:1,reverse:1,round:1,clamp:1,nice:1,base:1,exponent:1,constant:1,interpolate:1,zero:1,padding:1,paddingInner:1,paddingOuter:1},{type:gln,domain:yln,range:vln,rangeMax:bln,rangeMin:_ln,scheme:wln,...bJt}=vJt,_Jt=Ye(bJt);function pq(e,t){switch(t){case"type":case"domain":case"reverse":case"range":return!0;case"scheme":case"interpolate":return!["point","band","identity"].includes(e);case"bins":return!["point","band","identity","ordinal"].includes(e);case"round":return Mf(e)||e==="band"||e==="point";case"padding":case"rangeMin":case"rangeMax":return Mf(e)||["point","band"].includes(e);case"paddingOuter":case"align":return["point","band"].includes(e);case"paddingInner":return e==="band";case"domainMax":case"domainMid":case"domainMin":case"domainRaw":case"clamp":return Mf(e);case"nice":return Mf(e)||e==="quantize"||e==="threshold";case"exponent":return e==="pow";case"base":return e==="log";case"constant":return e==="symlog";case"zero":return Kl(e)&&!Hn(["log","time","utc","threshold","quantile"],e)}}function eFe(e,t){switch(t){case"interpolate":case"scheme":case"domainMid":return wE(e)?void 0:gQt(t);case"align":case"type":case"bins":case"domain":case"domainMax":case"domainMin":case"domainRaw":case"range":case"base":case"exponent":case"constant":case"nice":case"padding":case"paddingInner":case"paddingOuter":case"rangeMax":case"rangeMin":case"reverse":case"round":case"clamp":case"zero":return}}function wJt(e,t){return Hn([Tre,Cre],t)?e===void 0||co(e):t===$x?Hn([Ku.TIME,Ku.UTC,void 0],e):t===Eb?Q4e(e)||Mx(e)||e===void 0:!0}function EJt(e,t,n=!1){if(!hg(e))return!1;switch(e){case Ai:case po:case Qy:case nT:case Zc:case gd:return Mf(t)||t==="band"?!0:t==="point"?!n:!1;case fg:case ev:case dg:case Jy:case Zy:case c_:return Mf(t)||Mx(t)||Hn(["band","point","ordinal"],t);case sl:case lp:case cp:return t!=="band";case tv:case ol:return t==="ordinal"||Mx(t)}}function Are(e){const{channel:t,channelDef:n,markDef:r,scale:i,config:s}=e,o=kre(e);return et(n)&&!_4e(n.aggregate)&&i&&Mf(i.get("type"))?xJt({fieldDef:n,channel:t,markDef:r,ref:o,config:s}):o}function xJt({fieldDef:e,channel:t,markDef:n,ref:r,config:i}){return wr("invalid",n,i)===null?[SJt(e,t),r]:r}function SJt(e,t){const n=Ire(e,!0),i=f_(t)==="y"?{field:{group:"height"}}:{value:0};return{test:n,...i}}function Ire(e,t=!0){return Sre(mt(e)?e:at(e,{expr:"datum"}),!t)}function TJt(e){const{datum:t}=e;return h_(t)?wb(t):`${Br(t)}`}function D1(e,t,n,r){const i={};if(t&&(i.scale=t),hp(e)){const{datum:s}=e;h_(s)?i.signal=wb(s):Rt(s)?i.signal=s.signal:BR(s)?i.signal=s.expr:i.value=s}else i.field=at(e,n);if(r){const{offset:s,band:o}=r;s&&(i.offset=s),o&&(i.band=o)}return i}function zM({scaleName:e,fieldOrDatumDef:t,fieldOrDatumDef2:n,offset:r,startSuffix:i,endSuffix:s="end",bandPosition:o=.5}){const a=!Rt(o)&&0<o&&o<1?"datum":void 0,u=at(t,{expr:a,suffix:i}),l=n!==void 0?at(n,{expr:a}):at(t,{suffix:s,expr:a}),c={};if(o===0||o===1){c.scale=e;const f=o===0?u:l;c.field=f}else{const f=Rt(o)?`(1-${o.signal}) * ${u} + ${o.signal} * ${l}`:`${1-o} * ${u} + ${o} * ${l}`;c.signal=`scale("${e}", ${f})`}return r&&(c.offset=r),c}function CJt({scaleName:e,fieldDef:t}){const n=at(t,{expr:"datum"}),r=at(t,{expr:"datum",suffix:"end"});return`abs(scale("${e}", ${r}) - scale("${e}", ${n}))`}function kre({channel:e,channelDef:t,channel2Def:n,markDef:r,config:i,scaleName:s,scale:o,stack:a,offset:u,defaultRef:l,bandPosition:c}){if(t){if(ln(t)){const f=o==null?void 0:o.get("type");if(iu(t)){c??(c=_y({fieldDef:t,fieldDef2:n,markDef:r,config:i}));const{bin:d,timeUnit:h,type:p}=t;if(oi(d)||c&&h&&p===$x)return a!=null&&a.impute?D1(t,s,{binSuffix:"mid"},{offset:u}):c&&!co(f)?zM({scaleName:s,fieldOrDatumDef:t,bandPosition:c,offset:u}):D1(t,s,qR(t,e)?{binSuffix:"range"}:{},{offset:u});if(Co(d)){if(et(n))return zM({scaleName:s,fieldOrDatumDef:t,fieldOrDatumDef2:n,bandPosition:c,offset:u});Ze($4e(e===Ai?md:up))}}return D1(t,s,co(f)?{binSuffix:"range"}:{},{offset:u,band:f==="band"?c??t.bandPosition??.5:void 0})}else if(id(t)){const f=t.value,d=u?{offset:u}:{};return{...iA(e,f),...d}}}return _n(l)&&(l=l()),l&&{...l,...u?{offset:u}:{}}}function iA(e,t){return Hn(["x","x2"],e)&&t==="width"?{field:{group:"width"}}:Hn(["y","y2"],e)&&t==="height"?{field:{group:"height"}}:hi(t)}function xb(e){return e&&e!=="number"&&e!=="time"}function tFe(e,t,n){return`${e}(${t}${n?`, ${Br(n)}`:""})`}const AJt=" – ";function Rre({fieldOrDatumDef:e,format:t,formatType:n,expr:r,normalizeStack:i,config:s}){var u,l;if(xb(n))return Lf({fieldOrDatumDef:e,format:t,formatType:n,expr:r,config:s});const o=nFe(e,r,i),a=Lx(e);if(t===void 0&&n===void 0&&s.customFormatTypes){if(a==="quantitative"){if(i&&s.normalizedNumberFormatType)return Lf({fieldOrDatumDef:e,format:s.normalizedNumberFormat,formatType:s.normalizedNumberFormatType,expr:r,config:s});if(s.numberFormatType)return Lf({fieldOrDatumDef:e,format:s.numberFormat,formatType:s.numberFormatType,expr:r,config:s})}if(a==="temporal"&&s.timeFormatType&&et(e)&&e.timeUnit===void 0)return Lf({fieldOrDatumDef:e,format:s.timeFormat,formatType:s.timeFormatType,expr:r,config:s})}if(jx(e)){const c=kJt({field:o,timeUnit:et(e)?(u=lo(e.timeUnit))==null?void 0:u.unit:void 0,format:t,formatType:s.timeFormatType,rawTimeFormat:s.timeFormat,isUTCScale:g_(e)&&((l=e.scale)==null?void 0:l.type)===Ku.UTC});return c?{signal:c}:void 0}if(t=mq({type:a,specifiedFormat:t,config:s,normalizeStack:i}),et(e)&&oi(e.bin)){const c=at(e,{expr:r,binSuffix:"end"});return{signal:zR(o,c,t,n,s)}}else return t||Lx(e)==="quantitative"?{signal:`${sFe(o,t)}`}:{signal:`isValid(${o}) ? ${o} : ""+${o}`}}function nFe(e,t,n){return et(e)?n?`${at(e,{expr:t,suffix:"end"})}-${at(e,{expr:t,suffix:"start"})}`:at(e,{expr:t}):TJt(e)}function Lf({fieldOrDatumDef:e,format:t,formatType:n,expr:r,normalizeStack:i,config:s,field:o}){if(o??(o=nFe(e,r,i)),o!=="datum.value"&&et(e)&&oi(e.bin)){const a=at(e,{expr:r,binSuffix:"end"});return{signal:zR(o,a,t,n,s)}}return{signal:tFe(n,o,t)}}function rFe(e,t,n,r,i,s){var o;if(!(mt(r)&&xb(r))&&!(n===void 0&&r===void 0&&i.customFormatTypes&&Lx(e)==="quantitative"&&(i.normalizedNumberFormatType&&Fx(e)&&e.stack==="normalize"||i.numberFormatType))){if(Fx(e)&&e.stack==="normalize"&&i.normalizedNumberFormat)return mq({type:"quantitative",config:i,normalizeStack:!0});if(jx(e)){const a=et(e)?(o=lo(e.timeUnit))==null?void 0:o.unit:void 0;return a===void 0&&i.customFormatTypes&&i.timeFormatType?void 0:IJt({specifiedFormat:n,timeUnit:a,config:i,omitTimeFormatConfig:s})}return mq({type:t,specifiedFormat:n,config:i})}}function iFe(e,t,n){var r;if(e&&(Rt(e)||e==="number"||e==="time"))return e;if(jx(t)&&n!=="time"&&n!=="utc")return et(t)&&((r=lo(t==null?void 0:t.timeUnit))!=null&&r.utc)?"utc":"time"}function mq({type:e,specifiedFormat:t,config:n,normalizeStack:r}){if(mt(t))return t;if(e===Eb)return r?n.normalizedNumberFormat:n.numberFormat}function IJt({specifiedFormat:e,timeUnit:t,config:n,omitTimeFormatConfig:r}){return e||(t?{signal:V4e(t)}:r?void 0:n.timeFormat)}function sFe(e,t){return`format(${e}, "${t||""}")`}function Uge(e,t,n,r){return xb(n)?tFe(n,e,t):sFe(e,(mt(t)?t:void 0)??r.numberFormat)}function zR(e,t,n,r,i){if(n===void 0&&r===void 0&&i.customFormatTypes&&i.numberFormatType)return zR(e,t,i.numberFormat,i.numberFormatType,i);const s=Uge(e,n,r,i),o=Uge(t,n,r,i);return`${Sre(e,!1)} ? "null" : ${s} + "${AJt}" + ${o}`}function kJt({field:e,timeUnit:t,format:n,formatType:r,rawTimeFormat:i,isUTCScale:s}){return!t||n?!t&&r?`${r}(${e}, '${n}')`:(n=mt(n)?n:i,`${s?"utc":"time"}Format(${e}, '${n}')`):eJt(t,e,s)}const cu={arc:"arc",area:"area",bar:"bar",image:"image",line:"line",point:"point",rect:"rect",rule:"rule",text:"text",tick:"tick",trail:"trail",circle:"circle",square:"square",geoshape:"geoshape"},oFe=cu.arc,n5=cu.area,r5=cu.bar,RJt=cu.image,i5=cu.line,s5=cu.point,NJt=cu.rect,VM=cu.rule,aFe=cu.text,Nre=cu.tick,PJt=cu.trail,Pre=cu.circle,Dre=cu.square,uFe=cu.geoshape;function m_(e){return["line","area","trail"].includes(e)}function YI(e){return["rect","bar","image","arc"].includes(e)}const DJt=new Set(Ye(cu));function Uh(e){return e.type}const OJt=["stroke","strokeWidth","strokeDash","strokeDashOffset","strokeOpacity","strokeJoin","strokeMiterLimit"],$Jt=["fill","fillOpacity"],MJt=[...OJt,...$Jt],LJt={color:1,filled:1,invalid:1,order:1,radius2:1,theta2:1,timeUnitBandSize:1,timeUnitBandPosition:1},zge=Ye(LJt),FJt={area:["line","point"],bar:["binSpacing","continuousBandSize","discreteBandSize","minBandSize"],rect:["binSpacing","continuousBandSize","discreteBandSize","minBandSize"],line:["point"],tick:["bandSize","thickness"]},jJt={color:"#4c78a8",invalid:"filter",timeUnitBandSize:1},BJt={mark:1,arc:1,area:1,bar:1,circle:1,image:1,line:1,point:1,rect:1,rule:1,square:1,text:1,tick:1,trail:1,geoshape:1},lFe=Ye(BJt);function Sb(e){return e&&e.band!=null}const UJt={horizontal:["cornerRadiusTopRight","cornerRadiusBottomRight"],vertical:["cornerRadiusTopLeft","cornerRadiusTopRight"]},cFe=5,zJt={binSpacing:1,continuousBandSize:cFe,minBandSize:.25,timeUnitBandPosition:.5},VJt={binSpacing:0,continuousBandSize:cFe,minBandSize:.25,timeUnitBandPosition:.5},HJt={thickness:1};function qJt(e){return Uh(e)?e.type:e}const o5="min",WJt={x:1,y:1,color:1,fill:1,stroke:1,strokeWidth:1,size:1,shape:1,fillOpacity:1,strokeOpacity:1,opacity:1,text:1};function Vge(e){return e in WJt}function fFe(e){return!!(e!=null&&e.encoding)}function Eh(e){return e&&(e.op==="count"||!!e.field)}function dFe(e){return e&&je(e)}function VR(e){return"row"in e||"column"in e}function Ore(e){return!!e&&"header"in e}function a5(e){return"facet"in e}function GJt(e){return e.param}function YJt(e){return e&&!mt(e)&&"repeat"in e}function Hge(e){const{field:t,timeUnit:n,bin:r,aggregate:i}=e;return{...n?{timeUnit:n}:{},...r?{bin:r}:{},...i?{aggregate:i}:{},field:t}}function $re(e){return"sort"in e}function _y({fieldDef:e,fieldDef2:t,markDef:n,config:r}){if(ln(e)&&e.bandPosition!==void 0)return e.bandPosition;if(et(e)){const{timeUnit:i,bin:s}=e;if(i&&!t)return zm("timeUnitBandPosition",n,r);if(oi(s))return .5}}function hFe({channel:e,fieldDef:t,fieldDef2:n,markDef:r,config:i,scaleType:s,useVlSizeChannel:o}){var l,c,f;const a=al(e),u=wr(o?"size":a,r,i,{vgChannel:a});if(u!==void 0)return u;if(et(t)){const{timeUnit:d,bin:h}=t;if(d&&!n)return{band:zm("timeUnitBandSize",r,i)};if(oi(h)&&!co(s))return{band:1}}if(YI(r.type))return s?co(s)?((l=i[r.type])==null?void 0:l.discreteBandSize)||{band:1}:(c=i[r.type])==null?void 0:c.continuousBandSize:(f=i[r.type])==null?void 0:f.discreteBandSize}function pFe(e,t,n,r){return oi(e.bin)||e.timeUnit&&iu(e)&&e.type==="temporal"?_y({fieldDef:e,fieldDef2:t,markDef:n,config:r})!==void 0:!1}function mFe(e){return e&&!!e.sort&&!e.field}function u5(e){return e&&"condition"in e}function l5(e){const t=e==null?void 0:e.condition;return!!t&&!je(t)&&et(t)}function HR(e){const t=e==null?void 0:e.condition;return!!t&&!je(t)&&ln(t)}function KJt(e){const t=e==null?void 0:e.condition;return!!t&&(je(t)||id(t))}function et(e){return e&&(!!e.field||e.aggregate==="count")}function Lx(e){return e==null?void 0:e.type}function hp(e){return e&&"datum"in e}function f0(e){return iu(e)&&!qM(e)||HM(e)}function qge(e){return iu(e)&&e.type==="quantitative"&&!e.bin||HM(e)}function HM(e){return hp(e)&&lr(e.datum)}function ln(e){return et(e)||hp(e)}function iu(e){return e&&("field"in e||e.aggregate==="count")&&"type"in e}function id(e){return e&&"value"in e&&"value"in e}function g_(e){return e&&("scale"in e||"sort"in e)}function Fx(e){return e&&("axis"in e||"stack"in e||"impute"in e)}function gFe(e){return e&&"legend"in e}function yFe(e){return e&&("format"in e||"formatType"in e)}function XJt(e){return Yu(e,["legend","axis","header","scale"])}function QJt(e){return"op"in e}function at(e,t={}){let n=e.field;const r=t.prefix;let i=t.suffix,s="";if(ZJt(e))n=o4e("count");else{let o;if(!t.nofn)if(QJt(e))o=e.op;else{const{bin:a,aggregate:u,timeUnit:l}=e;oi(a)?(o=w4e(a),i=(t.binSuffix??"")+(t.suffix??"")):u?nv(u)?(s=`["${n}"]`,n=`argmax_${u.argmax}`):Um(u)?(s=`["${n}"]`,n=`argmin_${u.argmin}`):o=String(u):l&&!p_(l)&&(o=tJt(l),i=(!["range","mid"].includes(t.binSuffix)&&t.binSuffix||"")+(t.suffix??""))}o&&(n=n?`${o}_${n}`:o)}return i&&(n=`${n}_${i}`),r&&(n=`${r}_${n}`),t.forAs?tT(n):t.expr?r4e(n,t.expr)+s:zc(n)+s}function qM(e){switch(e.type){case"nominal":case"ordinal":case"geojson":return!0;case"quantitative":return et(e)&&!!e.bin;case"temporal":return!1}throw new Error(N4e(e.type))}function JJt(e){var t;return g_(e)&&Mx((t=e.scale)==null?void 0:t.type)}function ZJt(e){return e.aggregate==="count"}function eZt(e,t){var o;const{field:n,bin:r,timeUnit:i,aggregate:s}=e;if(s==="count")return t.countTitle;if(oi(r))return`${n} (binned)`;if(i&&!p_(i)){const a=(o=lo(i))==null?void 0:o.unit;if(a)return`${n} (${t5(a).join("-")})`}else if(s)return nv(s)?`${n} for max ${s.argmax}`:Um(s)?`${n} for min ${s.argmin}`:`${MR(s)} of ${n}`;return n}function tZt(e){const{aggregate:t,bin:n,timeUnit:r,field:i}=e;if(nv(t))return`${i} for argmax(${t.argmax})`;if(Um(t))return`${i} for argmin(${t.argmin})`;const s=r&&!p_(r)?lo(r):void 0,o=t||(s==null?void 0:s.unit)||(s==null?void 0:s.maxbins)&&"timeunit"||oi(n)&&"bin";return o?`${o.toUpperCase()}(${i})`:i}const vFe=(e,t)=>{switch(t.fieldTitle){case"plain":return e.field;case"functional":return tZt(e);default:return eZt(e,t)}};let bFe=vFe;function _Fe(e){bFe=e}function nZt(){_Fe(vFe)}function EE(e,t,{allowDisabling:n,includeDefault:r=!0}){var a;const i=(a=Mre(e))==null?void 0:a.title;if(!et(e))return i??e.title;const s=e,o=r?Lre(s,t):void 0;return n?fs(i,s.title,o):i??s.title??o}function Mre(e){if(Fx(e)&&e.axis)return e.axis;if(gFe(e)&&e.legend)return e.legend;if(Ore(e)&&e.header)return e.header}function Lre(e,t){return bFe(e,t)}function WM(e){if(yFe(e)){const{format:t,formatType:n}=e;return{format:t,formatType:n}}else{const t=Mre(e)??{},{format:n,formatType:r}=t;return{format:n,formatType:r}}}function rZt(e,t){var s;switch(t){case"latitude":case"longitude":return"quantitative";case"row":case"column":case"facet":case"shape":case"strokeDash":return"nominal";case"order":return"ordinal"}if($re(e)&&je(e.sort))return"ordinal";const{aggregate:n,bin:r,timeUnit:i}=e;if(i)return"temporal";if(r||n&&!nv(n)&&!Um(n))return"quantitative";if(g_(e)&&((s=e.scale)!=null&&s.type))switch(hq[e.scale.type]){case"numeric":case"discretizing":return"quantitative";case"time":return"temporal"}return"nominal"}function zh(e){if(et(e))return e;if(l5(e))return e.condition}function Ms(e){if(ln(e))return e;if(HR(e))return e.condition}function wFe(e,t,n,r={}){if(mt(e)||lr(e)||Yy(e)){const i=mt(e)?"string":lr(e)?"number":"boolean";return Ze(iQt(t,i,e)),{value:e}}return ln(e)?GM(e,t,n,r):HR(e)?{...e,condition:GM(e.condition,t,n,r)}:e}function GM(e,t,n,r){if(yFe(e)){const{format:i,formatType:s,...o}=e;if(xb(s)&&!n.customFormatTypes)return Ze(Lge(t)),GM(o,t,n,r)}else{const i=Fx(e)?"axis":gFe(e)?"legend":Ore(e)?"header":null;if(i&&e[i]){const{format:s,formatType:o,...a}=e[i];if(xb(o)&&!n.customFormatTypes)return Ze(Lge(t)),GM({...e,[i]:a},t,n,r)}}return et(e)?Fre(e,t,r):iZt(e)}function iZt(e){let t=e.type;if(t)return e;const{datum:n}=e;return t=lr(n)?"quantitative":mt(n)?"nominal":h_(n)?"temporal":void 0,{...e,type:t}}function Fre(e,t,{compositeMark:n=!1}={}){const{aggregate:r,timeUnit:i,bin:s,field:o}=e,a={...e};if(!n&&r&&!fre(r)&&!nv(r)&&!Um(r)&&(Ze(oQt(r)),delete a.aggregate),i&&(a.timeUnit=lo(i)),o&&(a.field=`${o}`),oi(s)&&(a.bin=c5(s,t)),Co(s)&&!ds(t)&&Ze(FQt(t)),iu(a)){const{type:u}=a,l=lJt(u);u!==l&&(a.type=l),u!=="quantitative"&&_4e(r)&&(Ze(sQt(u,r)),a.type="quantitative")}else if(!p4e(t)){const u=rZt(a,t);a.type=u}if(iu(a)){const{compatible:u,warning:l}=sZt(a,t)||{};u===!1&&Ze(l)}if($re(a)&&mt(a.sort)){const{sort:u}=a;if(Vge(u))return{...a,sort:{encoding:u}};const l=u.substr(1);if(u.charAt(0)==="-"&&Vge(l))return{...a,sort:{encoding:l,order:"descending"}}}if(Ore(a)){const{header:u}=a;if(u){const{orient:l,...c}=u;if(l)return{...a,header:{...c,labelOrient:u.labelOrient||l,titleOrient:u.titleOrient||l}}}}return a}function c5(e,t){return Yy(e)?{maxbins:Ige(t)}:e==="binned"?{binned:!0}:!e.maxbins&&!e.step?{...e,maxbins:Ige(t)}:e}const Y_={compatible:!0};function sZt(e,t){const n=e.type;if(n==="geojson"&&t!=="shape")return{compatible:!1,warning:`Channel ${t} should not be used with a geojson data.`};switch(t){case fm:case dm:case WF:return qM(e)?Y_:{compatible:!1,warning:cQt(t)};case Ai:case po:case Qy:case nT:case sl:case lp:case cp:case LR:case FR:case GF:case _b:case YF:case KF:case c_:case Zc:case gd:case XF:return Y_;case vd:case Vc:case yd:case bd:return n!==Eb?{compatible:!1,warning:`Channel ${t} should be used with a quantitative field only, not ${e.type} field.`}:Y_;case dg:case Jy:case Zy:case ev:case fg:case cg:case lg:case md:case up:return n==="nominal"&&!e.sort?{compatible:!1,warning:`Channel ${t} should not be used with an unsorted discrete field.`}:Y_;case ol:case tv:return!qM(e)&&!JJt(e)?{compatible:!1,warning:fQt(t)}:Y_;case Dx:return e.type==="nominal"&&!("sort"in e)?{compatible:!1,warning:"Channel order is inappropriate for nominal field, which has no inherent order."}:Y_}}function jx(e){const{formatType:t}=WM(e);return t==="time"||!t&&oZt(e)}function oZt(e){return e&&(e.type==="temporal"||et(e)&&!!e.timeUnit)}function f5(e,{timeUnit:t,type:n,wrapTime:r,undefinedIfExprNotRequired:i}){var u;const s=t&&((u=lo(t))==null?void 0:u.unit);let o=s||n==="temporal",a;return BR(e)?a=e.expr:Rt(e)?a=e.signal:h_(e)?(o=!0,a=wb(e)):(mt(e)||lr(e))&&o&&(a=`datetime(${Br(e)})`,XQt(s)&&(lr(e)&&e<1e4||mt(e)&&isNaN(Date.parse(e)))&&(a=wb({[s]:e}))),a?r&&o?`time(${a})`:a:i?void 0:Br(e)}function EFe(e,t){const{type:n}=e;return t.map(r=>{const i=et(e)&&!p_(e.timeUnit)?e.timeUnit:void 0,s=f5(r,{timeUnit:i,type:n,undefinedIfExprNotRequired:!0});return s!==void 0?{signal:s}:r})}function qR(e,t){return oi(e.bin)?hg(t)&&["ordinal","nominal"].includes(e.type):(console.warn("Only call this method for binned field defs."),!1)}const Wge={labelAlign:{part:"labels",vgProp:"align"},labelBaseline:{part:"labels",vgProp:"baseline"},labelColor:{part:"labels",vgProp:"fill"},labelFont:{part:"labels",vgProp:"font"},labelFontSize:{part:"labels",vgProp:"fontSize"},labelFontStyle:{part:"labels",vgProp:"fontStyle"},labelFontWeight:{part:"labels",vgProp:"fontWeight"},labelOpacity:{part:"labels",vgProp:"opacity"},labelOffset:null,labelPadding:null,gridColor:{part:"grid",vgProp:"stroke"},gridDash:{part:"grid",vgProp:"strokeDash"},gridDashOffset:{part:"grid",vgProp:"strokeDashOffset"},gridOpacity:{part:"grid",vgProp:"opacity"},gridWidth:{part:"grid",vgProp:"strokeWidth"},tickColor:{part:"ticks",vgProp:"stroke"},tickDash:{part:"ticks",vgProp:"strokeDash"},tickDashOffset:{part:"ticks",vgProp:"strokeDashOffset"},tickOpacity:{part:"ticks",vgProp:"opacity"},tickSize:null,tickWidth:{part:"ticks",vgProp:"strokeWidth"}};function WR(e){return e==null?void 0:e.condition}const xFe=["domain","grid","labels","ticks","title"],aZt={grid:"grid",gridCap:"grid",gridColor:"grid",gridDash:"grid",gridDashOffset:"grid",gridOpacity:"grid",gridScale:"grid",gridWidth:"grid",orient:"main",bandPosition:"both",aria:"main",description:"main",domain:"main",domainCap:"main",domainColor:"main",domainDash:"main",domainDashOffset:"main",domainOpacity:"main",domainWidth:"main",format:"main",formatType:"main",labelAlign:"main",labelAngle:"main",labelBaseline:"main",labelBound:"main",labelColor:"main",labelFlush:"main",labelFlushOffset:"main",labelFont:"main",labelFontSize:"main",labelFontStyle:"main",labelFontWeight:"main",labelLimit:"main",labelLineHeight:"main",labelOffset:"main",labelOpacity:"main",labelOverlap:"main",labelPadding:"main",labels:"main",labelSeparation:"main",maxExtent:"main",minExtent:"main",offset:"both",position:"main",tickCap:"main",tickColor:"main",tickDash:"main",tickDashOffset:"main",tickMinStep:"both",tickOffset:"both",tickOpacity:"main",tickRound:"both",ticks:"main",tickSize:"main",tickWidth:"both",title:"main",titleAlign:"main",titleAnchor:"main",titleAngle:"main",titleBaseline:"main",titleColor:"main",titleFont:"main",titleFontSize:"main",titleFontStyle:"main",titleFontWeight:"main",titleLimit:"main",titleLineHeight:"main",titleOpacity:"main",titlePadding:"main",titleX:"main",titleY:"main",encode:"both",scale:"both",tickBand:"both",tickCount:"both",tickExtra:"both",translate:"both",values:"both",zindex:"both"},SFe={orient:1,aria:1,bandPosition:1,description:1,domain:1,domainCap:1,domainColor:1,domainDash:1,domainDashOffset:1,domainOpacity:1,domainWidth:1,format:1,formatType:1,grid:1,gridCap:1,gridColor:1,gridDash:1,gridDashOffset:1,gridOpacity:1,gridWidth:1,labelAlign:1,labelAngle:1,labelBaseline:1,labelBound:1,labelColor:1,labelFlush:1,labelFlushOffset:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelLineHeight:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labels:1,labelSeparation:1,maxExtent:1,minExtent:1,offset:1,position:1,tickBand:1,tickCap:1,tickColor:1,tickCount:1,tickDash:1,tickDashOffset:1,tickExtra:1,tickMinStep:1,tickOffset:1,tickOpacity:1,tickRound:1,ticks:1,tickSize:1,tickWidth:1,title:1,titleAlign:1,titleAnchor:1,titleAngle:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titlePadding:1,titleX:1,titleY:1,translate:1,values:1,zindex:1},uZt={...SFe,style:1,labelExpr:1,encoding:1};function Gge(e){return!!uZt[e]}const lZt={axis:1,axisBand:1,axisBottom:1,axisDiscrete:1,axisLeft:1,axisPoint:1,axisQuantitative:1,axisRight:1,axisTemporal:1,axisTop:1,axisX:1,axisXBand:1,axisXDiscrete:1,axisXPoint:1,axisXQuantitative:1,axisXTemporal:1,axisY:1,axisYBand:1,axisYDiscrete:1,axisYPoint:1,axisYQuantitative:1,axisYTemporal:1},TFe=Ye(lZt);function pg(e){return"mark"in e}class d5{constructor(t,n){this.name=t,this.run=n}hasMatchingType(t){return pg(t)?qJt(t.mark)===this.name:!1}}function O1(e,t){const n=e&&e[t];return n?je(n)?vb(n,r=>!!r.field):et(n)||l5(n):!1}function CFe(e,t){const n=e&&e[t];return n?je(n)?vb(n,r=>!!r.field):et(n)||hp(n)||HR(n):!1}function AFe(e,t){if(ds(t)){const n=e[t];if((et(n)||hp(n))&&(Y4e(n.type)||et(n)&&n.timeUnit)){const r=are(t);return CFe(e,r)}}return!1}function jre(e){return vb(cXt,t=>{if(O1(e,t)){const n=e[t];if(je(n))return vb(n,r=>!!r.aggregate);{const r=zh(n);return r&&!!r.aggregate}}return!1})}function IFe(e,t){const n=[],r=[],i=[],s=[],o={};return Bre(e,(a,u)=>{if(et(a)){const{field:l,aggregate:c,bin:f,timeUnit:d,...h}=a;if(c||d||f){const p=Mre(a),m=p==null?void 0:p.title;let g=at(a,{forAs:!0});const y={...m?[]:{title:EE(a,t,{allowDisabling:!0})},...h,field:g};if(c){let v;if(nv(c)?(v="argmax",g=at({op:"argmax",field:c.argmax},{forAs:!0}),y.field=`${g}.${l}`):Um(c)?(v="argmin",g=at({op:"argmin",field:c.argmin},{forAs:!0}),y.field=`${g}.${l}`):c!=="boxplot"&&c!=="errorbar"&&c!=="errorband"&&(v=c),v){const _={op:v,as:g};l&&(_.field=l),s.push(_)}}else if(n.push(g),iu(a)&&oi(f)){if(r.push({bin:f,field:l,as:g}),n.push(at(a,{binSuffix:"end"})),qR(a,u)&&n.push(at(a,{binSuffix:"range"})),ds(u)){const v={field:`${g}_end`};o[`${u}2`]=v}y.bin="binned",p4e(u)||(y.type=Eb)}else if(d&&!p_(d)){i.push({timeUnit:d,field:l,as:g});const v=iu(a)&&a.type!==$x&&"time";v&&(u===LR||u===_b?y.formatType=v:_Xt(u)?y.legend={formatType:v,...y.legend}:ds(u)&&(y.axis={formatType:v,...y.axis}))}o[u]=y}else n.push(l),o[u]=e[u]}else o[u]=e[u]}),{bins:r,timeUnits:i,aggregate:s,groupby:n,encoding:o}}function cZt(e,t,n){const r=EXt(t,n);if(r){if(r==="binned"){const i=e[t===md?Ai:po];return!!(et(i)&&et(e[t])&&Co(i.bin))}}else return!1;return!0}function fZt(e,t,n,r){const i={};for(const s of Ye(e))h4e(s)||Ze(lQt(s));for(let s of gXt){if(!e[s])continue;const o=e[s];if(jR(s)){const a=mXt(s),u=i[a];if(et(u)&&uJt(u.type)&&et(o)&&!u.timeUnit){Ze(rQt(a));continue}}if(s==="angle"&&t==="arc"&&!e.theta&&(Ze(nQt),s=Zc),!cZt(e,s,t)){Ze(e5(s,t));continue}if(s===fg&&t==="line"){const a=zh(e[s]);if(a!=null&&a.aggregate){Ze(uQt);continue}}if(s===sl&&(n?"fill"in e:"stroke"in e)){Ze(P4e("encoding",{fill:"fill"in e,stroke:"stroke"in e}));continue}if(s===FR||s===Dx&&!je(o)&&!id(o)||s===_b&&je(o)){if(o){if(s===Dx){const a=e[s];if(mFe(a)){i[s]=a;continue}}i[s]=pt(o).reduce((a,u)=>(et(u)?a.push(Fre(u,s)):Ze(dq(u,s)),a),[])}}else{if(s===_b&&o===null)i[s]=null;else if(!et(o)&&!hp(o)&&!id(o)&&!u5(o)&&!Rt(o)){Ze(dq(o,s));continue}i[s]=wFe(o,s,r)}}return i}function h5(e,t){const n={};for(const r of Ye(e)){const i=wFe(e[r],r,t,{compositeMark:!0});n[r]=i}return n}function dZt(e){const t=[];for(const n of Ye(e))if(O1(e,n)){const r=e[n],i=pt(r);for(const s of i)et(s)?t.push(s):l5(s)&&t.push(s.condition)}return t}function Bre(e,t,n){if(e)for(const r of Ye(e)){const i=e[r];if(je(i))for(const s of i)t.call(n,s,r);else t.call(n,i,r)}}function hZt(e,t,n,r){return e?Ye(e).reduce((i,s)=>{const o=e[s];return je(o)?o.reduce((a,u)=>t.call(r,a,u,s),i):t.call(r,i,o,s)},n):n}function kFe(e,t){return Ye(t).reduce((n,r)=>{switch(r){case Ai:case po:case YF:case XF:case KF:case md:case up:case Qy:case nT:case Zc:case cg:case gd:case lg:case yd:case vd:case bd:case Vc:case LR:case ol:case c_:case _b:return n;case Dx:if(e==="line"||e==="trail")return n;case FR:case GF:{const i=t[r];if(je(i)||et(i))for(const s of pt(i))s.aggregate||n.push(at(s,{}));return n}case fg:if(e==="trail")return n;case sl:case lp:case cp:case dg:case Jy:case Zy:case tv:case ev:{const i=zh(t[r]);return i&&!i.aggregate&&n.push(at(i,{})),n}}},[])}function pZt(e){const{tooltip:t,...n}=e;if(!t)return{filteredEncoding:n};let r,i;if(je(t)){for(const s of t)s.aggregate?(r||(r=[]),r.push(s)):(i||(i=[]),i.push(s));r&&(n.tooltip=r)}else t.aggregate?n.tooltip=t:i=t;return je(i)&&i.length===1&&(i=i[0]),{customTooltipWithoutAggregatedField:i,filteredEncoding:n}}function gq(e,t,n,r=!0){if("tooltip"in n)return{tooltip:n.tooltip};const i=e.map(({fieldPrefix:o,titlePrefix:a})=>{const u=r?` of ${Ure(t)}`:"";return{field:o+t.field,type:t.type,title:Rt(a)?{signal:`${a}"${escape(u)}"`}:a+u}}),s=dZt(n).map(XJt);return{tooltip:[...i,...oh(s,Vn)]}}function Ure(e){const{title:t,field:n}=e;return fs(t,n)}function zre(e,t,n,r,i){const{scale:s,axis:o}=n;return({partName:a,mark:u,positionPrefix:l,endPositionPrefix:c=void 0,extraEncoding:f={}})=>{const d=Ure(n);return RFe(e,a,i,{mark:u,encoding:{[t]:{field:`${l}_${n.field}`,type:n.type,...d!==void 0?{title:d}:{},...s!==void 0?{scale:s}:{},...o!==void 0?{axis:o}:{}},...mt(c)?{[`${t}2`]:{field:`${c}_${n.field}`}}:{},...r,...f}})}}function RFe(e,t,n,r){const{clip:i,color:s,opacity:o}=e,a=e.type;return e[t]||e[t]===void 0&&n[t]?[{...r,mark:{...n[t],...i?{clip:i}:{},...s?{color:s}:{},...o?{opacity:o}:{},...Uh(r.mark)?r.mark:{type:r.mark},style:`${a}-${String(t)}`,...Yy(e[t])?{}:e[t]}}]:[]}function NFe(e,t,n){const{encoding:r}=e,i=t==="vertical"?"y":"x",s=r[i],o=r[`${i}2`],a=r[`${i}Error`],u=r[`${i}Error2`];return{continuousAxisChannelDef:FP(s,n),continuousAxisChannelDef2:FP(o,n),continuousAxisChannelDefError:FP(a,n),continuousAxisChannelDefError2:FP(u,n),continuousAxis:i}}function FP(e,t){if(e!=null&&e.aggregate){const{aggregate:n,...r}=e;return n!==t&&Ze(LQt(n,t)),r}else return e}function PFe(e,t){const{mark:n,encoding:r}=e,{x:i,y:s}=r;if(Uh(n)&&n.orient)return n.orient;if(f0(i)){if(f0(s)){const o=et(i)&&i.aggregate,a=et(s)&&s.aggregate;if(!o&&a===t)return"vertical";if(!a&&o===t)return"horizontal";if(o===t&&a===t)throw new Error("Both x and y cannot have aggregate");return jx(s)&&!jx(i)?"horizontal":"vertical"}return"horizontal"}else{if(f0(s))return"vertical";throw new Error(`Need a valid continuous axis for ${t}s`)}}const YM="boxplot",mZt=["box","median","outliers","rule","ticks"],gZt=new d5(YM,OFe);function DFe(e){return lr(e)?"tukey":e}function OFe(e,{config:t}){e={...e,encoding:h5(e.encoding,t)};const{mark:n,encoding:r,params:i,projection:s,...o}=e,a=Uh(n)?n:{type:n};i&&Ze(R4e("boxplot"));const u=a.extent??t.boxplot.extent,l=wr("size",a,t),c=a.invalid,f=DFe(u),{bins:d,timeUnits:h,transform:p,continuousAxisChannelDef:m,continuousAxis:g,groupby:y,aggregate:v,encodingWithoutContinuousAxis:_,ticksOrient:w,boxOrient:E,customTooltipWithoutAggregatedField:S}=yZt(e,u,t),T=tT(m.field),{color:C,size:A,...k}=_,N=ke=>zre(a,g,m,ke,t.boxplot),O=N(k),D=N(_),$=(gt(t.boxplot.box)?t.boxplot.box.color:t.mark.color)||"#4c78a8",F=N({...k,...A?{size:A}:{},color:{condition:{test:`datum['lower_box_${m.field}'] >= datum['upper_box_${m.field}']`,...C||{value:$}}}}),M=gq([{fieldPrefix:f==="min-max"?"upper_whisker_":"max_",titlePrefix:"Max"},{fieldPrefix:"upper_box_",titlePrefix:"Q3"},{fieldPrefix:"mid_box_",titlePrefix:"Median"},{fieldPrefix:"lower_box_",titlePrefix:"Q1"},{fieldPrefix:f==="min-max"?"lower_whisker_":"min_",titlePrefix:"Min"}],m,_),B={type:"tick",color:"black",opacity:1,orient:w,invalid:c,aria:!1},U=f==="min-max"?M:gq([{fieldPrefix:"upper_whisker_",titlePrefix:"Upper Whisker"},{fieldPrefix:"lower_whisker_",titlePrefix:"Lower Whisker"}],m,_),H=[...O({partName:"rule",mark:{type:"rule",invalid:c,aria:!1},positionPrefix:"lower_whisker",endPositionPrefix:"lower_box",extraEncoding:U}),...O({partName:"rule",mark:{type:"rule",invalid:c,aria:!1},positionPrefix:"upper_box",endPositionPrefix:"upper_whisker",extraEncoding:U}),...O({partName:"ticks",mark:B,positionPrefix:"lower_whisker",extraEncoding:U}),...O({partName:"ticks",mark:B,positionPrefix:"upper_whisker",extraEncoding:U})],P=[...f!=="tukey"?H:[],...D({partName:"box",mark:{type:"bar",...l?{size:l}:{},orient:E,invalid:c,ariaRoleDescription:"box"},positionPrefix:"lower_box",endPositionPrefix:"upper_box",extraEncoding:M}),...F({partName:"median",mark:{type:"tick",invalid:c,...gt(t.boxplot.median)&&t.boxplot.median.color?{color:t.boxplot.median.color}:{},...l?{size:l}:{},orient:w,aria:!1},positionPrefix:"mid_box",extraEncoding:M})];if(f==="min-max")return{...o,transform:(o.transform??[]).concat(p),layer:P};const z=`datum["lower_box_${m.field}"]`,W=`datum["upper_box_${m.field}"]`,j=`(${W} - ${z})`,q=`${z} - ${u} * ${j}`,G=`${W} + ${u} * ${j}`,ne=`datum["${m.field}"]`,ce={joinaggregate:$Fe(m.field),groupby:y},de={transform:[{filter:`(${q} <= ${ne}) && (${ne} <= ${G})`},{aggregate:[{op:"min",field:m.field,as:`lower_whisker_${T}`},{op:"max",field:m.field,as:`upper_whisker_${T}`},{op:"min",field:`lower_box_${m.field}`,as:`lower_box_${T}`},{op:"max",field:`upper_box_${m.field}`,as:`upper_box_${T}`},...v],groupby:y}],layer:H},{tooltip:he,...ve}=k,{scale:Ie,axis:be}=m,Ke=Ure(m),Ue=Yu(be,["title"]),yt=RFe(a,"outliers",t.boxplot,{transform:[{filter:`(${ne} < ${q}) || (${ne} > ${G})`}],mark:"point",encoding:{[g]:{field:m.field,type:m.type,...Ke!==void 0?{title:Ke}:{},...Ie!==void 0?{scale:Ie}:{},...jr(Ue)?{}:{axis:Ue}},...ve,...C?{color:C}:{},...S?{tooltip:S}:{}}})[0];let it;const _e=[...d,...h,ce];return yt?it={transform:_e,layer:[yt,de]}:(it=de,it.transform.unshift(..._e)),{...o,layer:[it,{transform:p,layer:P}]}}function $Fe(e){const t=tT(e);return[{op:"q1",field:e,as:`lower_box_${t}`},{op:"q3",field:e,as:`upper_box_${t}`}]}function yZt(e,t,n){const r=PFe(e,YM),{continuousAxisChannelDef:i,continuousAxis:s}=NFe(e,r,YM),o=i.field,a=tT(o),u=DFe(t),l=[...$Fe(o),{op:"median",field:o,as:`mid_box_${a}`},{op:"min",field:o,as:(u==="min-max"?"lower_whisker_":"min_")+a},{op:"max",field:o,as:(u==="min-max"?"upper_whisker_":"max_")+a}],c=u==="min-max"||u==="tukey"?[]:[{calculate:`datum["upper_box_${a}"] - datum["lower_box_${a}"]`,as:`iqr_${a}`},{calculate:`min(datum["upper_box_${a}"] + datum["iqr_${a}"] * ${t}, datum["max_${a}"])`,as:`upper_whisker_${a}`},{calculate:`max(datum["lower_box_${a}"] - datum["iqr_${a}"] * ${t}, datum["min_${a}"])`,as:`lower_whisker_${a}`}],{[s]:f,...d}=e.encoding,{customTooltipWithoutAggregatedField:h,filteredEncoding:p}=pZt(d),{bins:m,timeUnits:g,aggregate:y,groupby:v,encoding:_}=IFe(p,n),w=r==="vertical"?"horizontal":"vertical",E=r,S=[...m,...g,{aggregate:[...y,...l],groupby:v},...c];return{bins:m,timeUnits:g,transform:S,groupby:v,aggregate:y,continuousAxisChannelDef:i,continuousAxis:s,encodingWithoutContinuousAxis:_,ticksOrient:w,boxOrient:E,customTooltipWithoutAggregatedField:h}}const Vre="errorbar",vZt=["ticks","rule"],bZt=new d5(Vre,MFe);function MFe(e,{config:t}){e={...e,encoding:h5(e.encoding,t)};const{transform:n,continuousAxisChannelDef:r,continuousAxis:i,encodingWithoutContinuousAxis:s,ticksOrient:o,markDef:a,outerSpec:u,tooltipEncoding:l}=LFe(e,Vre,t);delete s.size;const c=zre(a,i,r,s,t.errorbar),f=a.thickness,d=a.size,h={type:"tick",orient:o,aria:!1,...f!==void 0?{thickness:f}:{},...d!==void 0?{size:d}:{}},p=[...c({partName:"ticks",mark:h,positionPrefix:"lower",extraEncoding:l}),...c({partName:"ticks",mark:h,positionPrefix:"upper",extraEncoding:l}),...c({partName:"rule",mark:{type:"rule",ariaRoleDescription:"errorbar",...f!==void 0?{size:f}:{}},positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:l})];return{...u,transform:n,...p.length>1?{layer:p}:{...p[0]}}}function _Zt(e,t){const{encoding:n}=e;if(wZt(n))return{orient:PFe(e,t),inputType:"raw"};const r=EZt(n),i=xZt(n),s=n.x,o=n.y;if(r){if(i)throw new Error(`${t} cannot be both type aggregated-upper-lower and aggregated-error`);const a=n.x2,u=n.y2;if(ln(a)&&ln(u))throw new Error(`${t} cannot have both x2 and y2`);if(ln(a)){if(f0(s))return{orient:"horizontal",inputType:"aggregated-upper-lower"};throw new Error(`Both x and x2 have to be quantitative in ${t}`)}else if(ln(u)){if(f0(o))return{orient:"vertical",inputType:"aggregated-upper-lower"};throw new Error(`Both y and y2 have to be quantitative in ${t}`)}throw new Error("No ranged axis")}else{const a=n.xError,u=n.xError2,l=n.yError,c=n.yError2;if(ln(u)&&!ln(a))throw new Error(`${t} cannot have xError2 without xError`);if(ln(c)&&!ln(l))throw new Error(`${t} cannot have yError2 without yError`);if(ln(a)&&ln(l))throw new Error(`${t} cannot have both xError and yError with both are quantiative`);if(ln(a)){if(f0(s))return{orient:"horizontal",inputType:"aggregated-error"};throw new Error("All x, xError, and xError2 (if exist) have to be quantitative")}else if(ln(l)){if(f0(o))return{orient:"vertical",inputType:"aggregated-error"};throw new Error("All y, yError, and yError2 (if exist) have to be quantitative")}throw new Error("No ranged axis")}}function wZt(e){return(ln(e.x)||ln(e.y))&&!ln(e.x2)&&!ln(e.y2)&&!ln(e.xError)&&!ln(e.xError2)&&!ln(e.yError)&&!ln(e.yError2)}function EZt(e){return ln(e.x2)||ln(e.y2)}function xZt(e){return ln(e.xError)||ln(e.xError2)||ln(e.yError)||ln(e.yError2)}function LFe(e,t,n){const{mark:r,encoding:i,params:s,projection:o,...a}=e,u=Uh(r)?r:{type:r};s&&Ze(R4e(t));const{orient:l,inputType:c}=_Zt(e,t),{continuousAxisChannelDef:f,continuousAxisChannelDef2:d,continuousAxisChannelDefError:h,continuousAxisChannelDefError2:p,continuousAxis:m}=NFe(e,l,t),{errorBarSpecificAggregate:g,postAggregateCalculates:y,tooltipSummary:v,tooltipTitleWithFieldName:_}=SZt(u,f,d,h,p,c,t,n),{[m]:w,[m==="x"?"x2":"y2"]:E,[m==="x"?"xError":"yError"]:S,[m==="x"?"xError2":"yError2"]:T,...C}=i,{bins:A,timeUnits:k,aggregate:N,groupby:O,encoding:D}=IFe(C,n),$=[...N,...g],F=c!=="raw"?[]:O,M=gq(v,f,D,_);return{transform:[...a.transform??[],...A,...k,...$.length===0?[]:[{aggregate:$,groupby:F}],...y],groupby:F,continuousAxisChannelDef:f,continuousAxis:m,encodingWithoutContinuousAxis:D,ticksOrient:l==="vertical"?"horizontal":"vertical",markDef:u,outerSpec:a,tooltipEncoding:M}}function SZt(e,t,n,r,i,s,o,a){let u=[],l=[];const c=t.field;let f,d=!1;if(s==="raw"){const h=e.center?e.center:e.extent?e.extent==="iqr"?"median":"mean":a.errorbar.center,p=e.extent?e.extent:h==="mean"?"stderr":"iqr";if(h==="median"!=(p==="iqr")&&Ze(MQt(h,p,o)),p==="stderr"||p==="stdev")u=[{op:p,field:c,as:`extent_${c}`},{op:h,field:c,as:`center_${c}`}],l=[{calculate:`datum["center_${c}"] + datum["extent_${c}"]`,as:`upper_${c}`},{calculate:`datum["center_${c}"] - datum["extent_${c}"]`,as:`lower_${c}`}],f=[{fieldPrefix:"center_",titlePrefix:MR(h)},{fieldPrefix:"upper_",titlePrefix:Yge(h,p,"+")},{fieldPrefix:"lower_",titlePrefix:Yge(h,p,"-")}],d=!0;else{let m,g,y;p==="ci"?(m="mean",g="ci0",y="ci1"):(m="median",g="q1",y="q3"),u=[{op:g,field:c,as:`lower_${c}`},{op:y,field:c,as:`upper_${c}`},{op:m,field:c,as:`center_${c}`}],f=[{fieldPrefix:"upper_",titlePrefix:EE({field:c,aggregate:y,type:"quantitative"},a,{allowDisabling:!1})},{fieldPrefix:"lower_",titlePrefix:EE({field:c,aggregate:g,type:"quantitative"},a,{allowDisabling:!1})},{fieldPrefix:"center_",titlePrefix:EE({field:c,aggregate:m,type:"quantitative"},a,{allowDisabling:!1})}]}}else{(e.center||e.extent)&&Ze($Qt(e.center,e.extent)),s==="aggregated-upper-lower"?(f=[],l=[{calculate:`datum["${n.field}"]`,as:`upper_${c}`},{calculate:`datum["${c}"]`,as:`lower_${c}`}]):s==="aggregated-error"&&(f=[{fieldPrefix:"",titlePrefix:c}],l=[{calculate:`datum["${c}"] + datum["${r.field}"]`,as:`upper_${c}`}],i?l.push({calculate:`datum["${c}"] + datum["${i.field}"]`,as:`lower_${c}`}):l.push({calculate:`datum["${c}"] - datum["${r.field}"]`,as:`lower_${c}`}));for(const h of l)f.push({fieldPrefix:h.as.substring(0,6),titlePrefix:bb(bb(h.calculate,'datum["',""),'"]',"")})}return{postAggregateCalculates:l,errorBarSpecificAggregate:u,tooltipSummary:f,tooltipTitleWithFieldName:d}}function Yge(e,t,n){return`${MR(e)} ${n} ${t}`}const Hre="errorband",TZt=["band","borders"],CZt=new d5(Hre,FFe);function FFe(e,{config:t}){e={...e,encoding:h5(e.encoding,t)};const{transform:n,continuousAxisChannelDef:r,continuousAxis:i,encodingWithoutContinuousAxis:s,markDef:o,outerSpec:a,tooltipEncoding:u}=LFe(e,Hre,t),l=o,c=zre(l,i,r,s,t.errorband),f=e.encoding.x!==void 0&&e.encoding.y!==void 0;let d={type:f?"area":"rect"},h={type:f?"line":"rule"};const p={...l.interpolate?{interpolate:l.interpolate}:{},...l.tension&&l.interpolate?{tension:l.tension}:{}};return f?(d={...d,...p,ariaRoleDescription:"errorband"},h={...h,...p,aria:!1}):l.interpolate?Ze(jge("interpolate")):l.tension&&Ze(jge("tension")),{...a,transform:n,layer:[...c({partName:"band",mark:d,positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:u}),...c({partName:"borders",mark:h,positionPrefix:"lower",extraEncoding:u}),...c({partName:"borders",mark:h,positionPrefix:"upper",extraEncoding:u})]}}const jFe={};function qre(e,t,n){const r=new d5(e,t);jFe[e]={normalizer:r,parts:n}}function AZt(){return Ye(jFe)}qre(YM,OFe,mZt);qre(Vre,MFe,vZt);qre(Hre,FFe,TZt);const IZt=["gradientHorizontalMaxLength","gradientHorizontalMinLength","gradientVerticalMaxLength","gradientVerticalMinLength","unselectedOpacity"],BFe={titleAlign:"align",titleAnchor:"anchor",titleAngle:"angle",titleBaseline:"baseline",titleColor:"color",titleFont:"font",titleFontSize:"fontSize",titleFontStyle:"fontStyle",titleFontWeight:"fontWeight",titleLimit:"limit",titleLineHeight:"lineHeight",titleOrient:"orient",titlePadding:"offset"},UFe={labelAlign:"align",labelAnchor:"anchor",labelAngle:"angle",labelBaseline:"baseline",labelColor:"color",labelFont:"font",labelFontSize:"fontSize",labelFontStyle:"fontStyle",labelFontWeight:"fontWeight",labelLimit:"limit",labelLineHeight:"lineHeight",labelOrient:"orient",labelPadding:"offset"},kZt=Ye(BFe),RZt=Ye(UFe),NZt={header:1,headerRow:1,headerColumn:1,headerFacet:1},zFe=Ye(NZt),VFe=["size","shape","fill","stroke","strokeDash","strokeWidth","opacity"],PZt={gradientHorizontalMaxLength:200,gradientHorizontalMinLength:100,gradientVerticalMaxLength:200,gradientVerticalMinLength:64,unselectedOpacity:.35},DZt={aria:1,clipHeight:1,columnPadding:1,columns:1,cornerRadius:1,description:1,direction:1,fillColor:1,format:1,formatType:1,gradientLength:1,gradientOpacity:1,gradientStrokeColor:1,gradientStrokeWidth:1,gradientThickness:1,gridAlign:1,labelAlign:1,labelBaseline:1,labelColor:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labelSeparation:1,legendX:1,legendY:1,offset:1,orient:1,padding:1,rowPadding:1,strokeColor:1,symbolDash:1,symbolDashOffset:1,symbolFillColor:1,symbolLimit:1,symbolOffset:1,symbolOpacity:1,symbolSize:1,symbolStrokeColor:1,symbolStrokeWidth:1,symbolType:1,tickCount:1,tickMinStep:1,title:1,titleAlign:1,titleAnchor:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titleOrient:1,titlePadding:1,type:1,values:1,zindex:1},sd="_vgsid_",OZt={point:{on:"click",fields:[sd],toggle:"event.shiftKey",resolve:"global",clear:"dblclick"},interval:{on:"[pointerdown, window:pointerup] > window:pointermove!",encodings:["x","y"],translate:"[pointerdown, window:pointerup] > window:pointermove!",zoom:"wheel!",mark:{fill:"#333",fillOpacity:.125,stroke:"white"},resolve:"global",clear:"dblclick"}};function Wre(e){return e==="legend"||!!(e!=null&&e.legend)}function AB(e){return Wre(e)&&gt(e)}function Gre(e){return!!(e!=null&&e.select)}function HFe(e){const t=[];for(const n of e||[]){if(Gre(n))continue;const{expr:r,bind:i,...s}=n;if(i&&r){const o={...s,bind:i,init:r};t.push(o)}else{const o={...s,...r?{update:r}:{},...i?{bind:i}:{}};t.push(o)}}return t}function $Zt(e){return p5(e)||Kre(e)||Yre(e)}function Yre(e){return"concat"in e}function p5(e){return"vconcat"in e}function Kre(e){return"hconcat"in e}function qFe({step:e,offsetIsDiscrete:t}){return t?e.for??"offset":"position"}function Vh(e){return gt(e)&&e.step!==void 0}function Kge(e){return e.view||e.width||e.height}const Xge=20,MZt={align:1,bounds:1,center:1,columns:1,spacing:1},LZt=Ye(MZt);function FZt(e,t,n){const r=n[t],i={},{spacing:s,columns:o}=r;s!==void 0&&(i.spacing=s),o!==void 0&&(a5(e)&&!VR(e.facet)||Yre(e))&&(i.columns=o),p5(e)&&(i.columns=1);for(const a of LZt)if(e[a]!==void 0)if(a==="spacing"){const u=e[a];i[a]=lr(u)?u:{row:u.row??s,column:u.column??s}}else i[a]=e[a];return i}function yq(e,t){return e[t]??e[t==="width"?"continuousWidth":"continuousHeight"]}function KM(e,t){const n=XM(e,t);return Vh(n)?n.step:WFe}function XM(e,t){const n=e[t]??e[t==="width"?"discreteWidth":"discreteHeight"];return fs(n,{step:e.step})}const WFe=20,jZt={continuousWidth:200,continuousHeight:200,step:WFe},BZt={background:"white",padding:5,timeFormat:"%b %d, %Y",countTitle:"Count of Records",view:jZt,mark:jJt,arc:{},area:{},bar:zJt,circle:{},geoshape:{},image:{},line:{},point:{},rect:VJt,rule:{color:"black"},square:{},text:{color:"black"},tick:HJt,trail:{},boxplot:{size:14,extent:1.5,box:{},median:{color:"white"},outliers:{},rule:{},ticks:null},errorbar:{center:"mean",rule:!0,ticks:!1},errorband:{band:{opacity:.3},borders:!1},scale:pJt,projection:{},legend:PZt,header:{titlePadding:10,labelPadding:10},headerColumn:{},headerRow:{},headerFacet:{},selection:OZt,style:{},title:{},facet:{spacing:Xge},concat:{spacing:Xge},normalizedNumberFormat:".0%"},Tp=["#4c78a8","#f58518","#e45756","#72b7b2","#54a24b","#eeca3b","#b279a2","#ff9da6","#9d755d","#bab0ac"],Qge={text:11,guideLabel:10,guideTitle:11,groupTitle:13,groupSubtitle:12},Jge={blue:Tp[0],orange:Tp[1],red:Tp[2],teal:Tp[3],green:Tp[4],yellow:Tp[5],purple:Tp[6],pink:Tp[7],brown:Tp[8],gray0:"#000",gray1:"#111",gray2:"#222",gray3:"#333",gray4:"#444",gray5:"#555",gray6:"#666",gray7:"#777",gray8:"#888",gray9:"#999",gray10:"#aaa",gray11:"#bbb",gray12:"#ccc",gray13:"#ddd",gray14:"#eee",gray15:"#fff"};function UZt(e={}){return{signals:[{name:"color",value:gt(e)?{...Jge,...e}:Jge}],mark:{color:{signal:"color.blue"}},rule:{color:{signal:"color.gray0"}},text:{color:{signal:"color.gray0"}},style:{"guide-label":{fill:{signal:"color.gray0"}},"guide-title":{fill:{signal:"color.gray0"}},"group-title":{fill:{signal:"color.gray0"}},"group-subtitle":{fill:{signal:"color.gray0"}},cell:{stroke:{signal:"color.gray8"}}},axis:{domainColor:{signal:"color.gray13"},gridColor:{signal:"color.gray8"},tickColor:{signal:"color.gray13"}},range:{category:[{signal:"color.blue"},{signal:"color.orange"},{signal:"color.red"},{signal:"color.teal"},{signal:"color.green"},{signal:"color.yellow"},{signal:"color.purple"},{signal:"color.pink"},{signal:"color.brown"},{signal:"color.grey8"}]}}}function zZt(e){return{signals:[{name:"fontSize",value:gt(e)?{...Qge,...e}:Qge}],text:{fontSize:{signal:"fontSize.text"}},style:{"guide-label":{fontSize:{signal:"fontSize.guideLabel"}},"guide-title":{fontSize:{signal:"fontSize.guideTitle"}},"group-title":{fontSize:{signal:"fontSize.groupTitle"}},"group-subtitle":{fontSize:{signal:"fontSize.groupSubtitle"}}}}}function VZt(e){return{text:{font:e},style:{"guide-label":{font:e},"guide-title":{font:e},"group-title":{font:e},"group-subtitle":{font:e}}}}function GFe(e){const t=Ye(e||{}),n={};for(const r of t){const i=e[r];n[r]=WR(i)?x4e(i):El(i)}return n}function HZt(e){const t=Ye(e),n={};for(const r of t)n[r]=GFe(e[r]);return n}const qZt=[...lFe,...TFe,...zFe,"background","padding","legend","lineBreak","scale","style","title","view"];function YFe(e={}){const{color:t,font:n,fontSize:r,selection:i,...s}=e,o=HS({},nn(BZt),n?VZt(n):{},t?UZt(t):{},r?zZt(r):{},s||{});i&&qS(o,"selection",i,!0);const a=Yu(o,qZt);for(const u of["background","lineBreak","padding"])o[u]&&(a[u]=El(o[u]));for(const u of lFe)o[u]&&(a[u]=Ru(o[u]));for(const u of TFe)o[u]&&(a[u]=GFe(o[u]));for(const u of zFe)o[u]&&(a[u]=Ru(o[u]));return o.legend&&(a.legend=Ru(o.legend)),o.scale&&(a.scale=Ru(o.scale)),o.style&&(a.style=HZt(o.style)),o.title&&(a.title=Ru(o.title)),o.view&&(a.view=Ru(o.view)),a}const WZt=new Set(["view",...DJt]),GZt=["color","fontSize","background","padding","facet","concat","numberFormat","numberFormatType","normalizedNumberFormat","normalizedNumberFormatType","timeFormat","countTitle","header","axisQuantitative","axisTemporal","axisDiscrete","axisPoint","axisXBand","axisXPoint","axisXDiscrete","axisXQuantitative","axisXTemporal","axisYBand","axisYPoint","axisYDiscrete","axisYQuantitative","axisYTemporal","scale","selection","overlay"],YZt={view:["continuousWidth","continuousHeight","discreteWidth","discreteHeight","step"],...FJt};function KZt(e){e=nn(e);for(const t of GZt)delete e[t];if(e.axis)for(const t in e.axis)WR(e.axis[t])&&delete e.axis[t];if(e.legend)for(const t of IZt)delete e.legend[t];if(e.mark){for(const t of zge)delete e.mark[t];e.mark.tooltip&&gt(e.mark.tooltip)&&delete e.mark.tooltip}e.params&&(e.signals=(e.signals||[]).concat(HFe(e.params)),delete e.params);for(const t of WZt){for(const r of zge)delete e[t][r];const n=YZt[t];if(n)for(const r of n)delete e[t][r];QZt(e,t)}for(const t of AZt())delete e[t];XZt(e);for(const t in e)gt(e[t])&&jr(e[t])&&delete e[t];return jr(e)?void 0:e}function XZt(e){const{titleMarkConfig:t,subtitleMarkConfig:n,subtitle:r}=E4e(e.title);jr(t)||(e.style["group-title"]={...e.style["group-title"],...t}),jr(n)||(e.style["group-subtitle"]={...e.style["group-subtitle"],...n}),jr(r)?delete e.title:e.title=r}function QZt(e,t,n,r){const i=e[t];t==="view"&&(n="cell");const s={...i,...e.style[n??t]};jr(s)||(e.style[n??t]=s),delete e[t]}function m5(e){return"layer"in e}function JZt(e){return"repeat"in e}function ZZt(e){return!je(e.repeat)&&e.repeat.layer}class Xre{map(t,n){return a5(t)?this.mapFacet(t,n):JZt(t)?this.mapRepeat(t,n):Kre(t)?this.mapHConcat(t,n):p5(t)?this.mapVConcat(t,n):Yre(t)?this.mapConcat(t,n):this.mapLayerOrUnit(t,n)}mapLayerOrUnit(t,n){if(m5(t))return this.mapLayer(t,n);if(pg(t))return this.mapUnit(t,n);throw new Error(dre(t))}mapLayer(t,n){return{...t,layer:t.layer.map(r=>this.mapLayerOrUnit(r,n))}}mapHConcat(t,n){return{...t,hconcat:t.hconcat.map(r=>this.map(r,n))}}mapVConcat(t,n){return{...t,vconcat:t.vconcat.map(r=>this.map(r,n))}}mapConcat(t,n){const{concat:r,...i}=t;return{...i,concat:r.map(s=>this.map(s,n))}}mapFacet(t,n){return{...t,spec:this.map(t.spec,n)}}mapRepeat(t,n){return{...t,spec:this.map(t.spec,n)}}}const een={zero:1,center:1,normalize:1};function ten(e){return e in een}const nen=new Set([oFe,r5,n5,VM,s5,Pre,Dre,i5,aFe,Nre]),ren=new Set([r5,n5,oFe]);function K_(e){return et(e)&&Lx(e)==="quantitative"&&!e.bin}function Zge(e,t,{orient:n,type:r}){const i=t==="x"?"y":"radius",s=t==="x"&&["bar","area"].includes(r),o=e[t],a=e[i];if(et(o)&&et(a))if(K_(o)&&K_(a)){if(o.stack)return t;if(a.stack)return i;const u=et(o)&&!!o.aggregate,l=et(a)&&!!a.aggregate;if(u!==l)return u?t:i;if(s){if(n==="vertical")return i;if(n==="horizontal")return t}}else{if(K_(o))return t;if(K_(a))return i}else{if(K_(o))return s&&n==="vertical"?void 0:t;if(K_(a))return s&&n==="horizontal"?void 0:i}}function ien(e){switch(e){case"x":return"y";case"y":return"x";case"theta":return"radius";case"radius":return"theta"}}function KFe(e,t){var m,g;const n=Uh(e)?e:{type:e},r=n.type;if(!nen.has(r))return null;const i=Zge(t,"x",n)||Zge(t,"theta",n);if(!i)return null;const s=t[i],o=et(s)?at(s,{}):void 0,a=ien(i),u=[],l=new Set;if(t[a]){const y=t[a],v=et(y)?at(y,{}):void 0;v&&v!==o&&(u.push(a),l.add(v))}const c=a==="x"?"xOffset":"yOffset",f=t[c],d=et(f)?at(f,{}):void 0;d&&d!==o&&(u.push(c),l.add(d));const h=yXt.reduce((y,v)=>{if(v!=="tooltip"&&O1(t,v)){const _=t[v];for(const w of pt(_)){const E=zh(w);if(E.aggregate)continue;const S=at(E,{});(!S||!l.has(S))&&y.push({channel:v,fieldDef:E})}}return y},[]);let p;return s.stack!==void 0?Yy(s.stack)?p=s.stack?"zero":null:p=s.stack:ren.has(r)&&(p="zero"),!p||!ten(p)||jre(t)&&h.length===0?null:((m=s==null?void 0:s.scale)!=null&&m.type&&((g=s==null?void 0:s.scale)==null?void 0:g.type)!==Ku.LINEAR&&s!=null&&s.stack&&Ze(PQt(s.scale.type)),ln(t[fp(i)])?(s.stack!==void 0&&Ze(NQt(i)),null):(et(s)&&s.aggregate&&!kXt.has(s.aggregate)&&Ze(DQt(s.aggregate)),{groupbyChannels:u,groupbyFields:l,fieldChannel:i,impute:s.impute===null?!1:m_(r),stackBy:h,offset:p}))}function XFe(e,t,n){const r=Ru(e),i=wr("orient",r,n);if(r.orient=uen(r.type,t,i),i!==void 0&&i!==r.orient&&Ze(mQt(r.orient,i)),r.type==="bar"&&r.orient){const u=wr("cornerRadiusEnd",r,n);if(u!==void 0){const l=r.orient==="horizontal"&&t.x2||r.orient==="vertical"&&t.y2?["cornerRadius"]:UJt[r.orient];for(const c of l)r[c]=u;r.cornerRadiusEnd!==void 0&&delete r.cornerRadiusEnd}}const s=wr("opacity",r,n),o=wr("fillOpacity",r,n);return s===void 0&&o===void 0&&(r.opacity=oen(r.type,t)),wr("cursor",r,n)===void 0&&(r.cursor=sen(r,t,n)),r}function sen(e,t,n){return t.href||e.href||wr("href",e,n)?"pointer":e.cursor}function oen(e,t){if(Hn([s5,Nre,Pre,Dre],e)&&!jre(t))return .7}function aen(e,t,{graticule:n}){if(n)return!1;const r=zm("filled",e,t),i=e.type;return fs(r,i!==s5&&i!==i5&&i!==VM)}function uen(e,t,n){switch(e){case s5:case Pre:case Dre:case aFe:case NJt:case RJt:return}const{x:r,y:i,x2:s,y2:o}=t;switch(e){case r5:if(et(r)&&(Co(r.bin)||et(i)&&i.aggregate&&!r.aggregate))return"vertical";if(et(i)&&(Co(i.bin)||et(r)&&r.aggregate&&!i.aggregate))return"horizontal";if(o||s){if(n)return n;if(!s)return(et(r)&&r.type===Eb&&!oi(r.bin)||HM(r))&&et(i)&&Co(i.bin)?"horizontal":"vertical";if(!o)return(et(i)&&i.type===Eb&&!oi(i.bin)||HM(i))&&et(r)&&Co(r.bin)?"vertical":"horizontal"}case VM:if(s&&!(et(r)&&Co(r.bin))&&o&&!(et(i)&&Co(i.bin)))return;case n5:if(o)return et(i)&&Co(i.bin)?"horizontal":"vertical";if(s)return et(r)&&Co(r.bin)?"vertical":"horizontal";if(e===VM){if(r&&!i)return"vertical";if(i&&!r)return"horizontal"}case i5:case Nre:{const a=qge(r),u=qge(i);if(n)return n;if(a&&!u)return e!=="tick"?"horizontal":"vertical";if(!a&&u)return e!=="tick"?"vertical":"horizontal";if(a&&u)return"vertical";{const l=iu(r)&&r.type===$x,c=iu(i)&&i.type===$x;if(l&&!c)return"vertical";if(!l&&c)return"horizontal"}return}}return"vertical"}function len(e){const{point:t,line:n,...r}=e;return Ye(r).length>1?r:r.type}function cen(e){for(const t of["line","area","rule","trail"])e[t]&&(e={...e,[t]:Yu(e[t],["point","line"])});return e}function IB(e,t={},n){return e.point==="transparent"?{opacity:0}:e.point?gt(e.point)?e.point:{}:e.point!==void 0?null:t.point||n.shape?gt(t.point)?t.point:{}:void 0}function e0e(e,t={}){return e.line?e.line===!0?{}:e.line:e.line!==void 0?null:t.line?t.line===!0?{}:t.line:void 0}class fen{constructor(){this.name="path-overlay"}hasMatchingType(t,n){if(pg(t)){const{mark:r,encoding:i}=t,s=Uh(r)?r:{type:r};switch(s.type){case"line":case"rule":case"trail":return!!IB(s,n[s.type],i);case"area":return!!IB(s,n[s.type],i)||!!e0e(s,n[s.type])}}return!1}run(t,n,r){const{config:i}=n,{params:s,projection:o,mark:a,name:u,encoding:l,...c}=t,f=h5(l,i),d=Uh(a)?a:{type:a},h=IB(d,i[d.type],f),p=d.type==="area"&&e0e(d,i[d.type]),m=[{name:u,...s?{params:s}:{},mark:len({...d.type==="area"&&d.opacity===void 0&&d.fillOpacity===void 0?{opacity:.7}:{},...d}),encoding:Yu(f,["shape"])}],g=KFe(XFe(d,f,i),f);let y=f;if(g){const{fieldChannel:v,offset:_}=g;y={...f,[v]:{...f[v],..._?{stack:_}:{}}}}return y=Yu(y,["y2","x2"]),p&&m.push({...o?{projection:o}:{},mark:{type:"line",...Nx(d,["clip","interpolate","tension","tooltip"]),...p},encoding:y}),h&&m.push({...o?{projection:o}:{},mark:{type:"point",opacity:1,filled:!0,...Nx(d,["clip","tooltip"]),...h},encoding:y}),r({...c,layer:m},{...n,config:cen(i)})}}function den(e,t){return t?VR(e)?JFe(e,t):QFe(e,t):e}function kB(e,t){return t?JFe(e,t):e}function vq(e,t,n){const r=t[e];if(YJt(r)){if(r.repeat in n)return{...t,[e]:n[r.repeat]};Ze(KXt(r.repeat));return}return t}function QFe(e,t){if(e=vq("field",e,t),e!==void 0){if(e===null)return null;if($re(e)&&Eh(e.sort)){const n=vq("field",e.sort,t);e={...e,...n?{sort:n}:{}}}return e}}function t0e(e,t){if(et(e))return QFe(e,t);{const n=vq("datum",e,t);return n!==e&&!n.type&&(n.type="nominal"),n}}function n0e(e,t){if(ln(e)){const n=t0e(e,t);if(n)return n;if(u5(e))return{condition:e.condition}}else{if(HR(e)){const n=t0e(e.condition,t);if(n)return{...e,condition:n};{const{condition:r,...i}=e;return i}}return e}}function JFe(e,t){const n={};for(const r in e)if(jt(e,r)){const i=e[r];if(je(i))n[r]=i.map(s=>n0e(s,t)).filter(s=>s);else{const s=n0e(i,t);s!==void 0&&(n[r]=s)}}return n}class hen{constructor(){this.name="RuleForRangedLine"}hasMatchingType(t){if(pg(t)){const{encoding:n,mark:r}=t;if(r==="line"||Uh(r)&&r.type==="line")for(const i of pXt){const s=f_(i),o=n[s];if(n[i]&&(et(o)&&!Co(o.bin)||hp(o)))return!0}}return!1}run(t,n,r){const{encoding:i,mark:s}=t;return Ze(pQt(!!i.x2,!!i.y2)),r({...t,mark:gt(s)?{...s,type:"rule"}:"rule"},n)}}class pen extends Xre{constructor(){super(...arguments),this.nonFacetUnitNormalizers=[gZt,bZt,CZt,new fen,new hen]}map(t,n){if(pg(t)){const r=O1(t.encoding,fm),i=O1(t.encoding,dm),s=O1(t.encoding,WF);if(r||i||s)return this.mapFacetedUnit(t,n)}return super.map(t,n)}mapUnit(t,n){const{parentEncoding:r,parentProjection:i}=n,s=kB(t.encoding,n.repeater),o={...t,...t.name?{name:[n.repeaterPrefix,t.name].filter(u=>u).join("_")}:{},...s?{encoding:s}:{}};if(r||i)return this.mapUnitWithParentEncodingOrProjection(o,n);const a=this.mapLayerOrUnit.bind(this);for(const u of this.nonFacetUnitNormalizers)if(u.hasMatchingType(o,n.config))return u.run(o,n,a);return o}mapRepeat(t,n){return ZZt(t)?this.mapLayerRepeat(t,n):this.mapNonLayerRepeat(t,n)}mapLayerRepeat(t,n){const{repeat:r,spec:i,...s}=t,{row:o,column:a,layer:u}=r,{repeater:l={},repeaterPrefix:c=""}=n;return o||a?this.mapRepeat({...t,repeat:{...o?{row:o}:{},...a?{column:a}:{}},spec:{repeat:{layer:u},spec:i}},n):{...s,layer:u.map(f=>{const d={...l,layer:f},h=`${(i.name?`${i.name}_`:"")+c}child__layer_${Ci(f)}`,p=this.mapLayerOrUnit(i,{...n,repeater:d,repeaterPrefix:h});return p.name=h,p})}}mapNonLayerRepeat(t,n){const{repeat:r,spec:i,data:s,...o}=t;!je(r)&&t.columns&&(t=Yu(t,["columns"]),Ze($ge("repeat")));const a=[],{repeater:u={},repeaterPrefix:l=""}=n,c=!je(r)&&r.row||[u?u.row:null],f=!je(r)&&r.column||[u?u.column:null],d=je(r)&&r||[u?u.repeat:null];for(const p of d)for(const m of c)for(const g of f){const y={repeat:p,row:m,column:g,layer:u.layer},v=(i.name?`${i.name}_`:"")+l+"child__"+(je(r)?`${Ci(p)}`:(r.row?`row_${Ci(m)}`:"")+(r.column?`column_${Ci(g)}`:"")),_=this.map(i,{...n,repeater:y,repeaterPrefix:v});_.name=v,a.push(Yu(_,["data"]))}const h=je(r)?t.columns:r.column?r.column.length:1;return{data:i.data??s,align:"all",...o,columns:h,concat:a}}mapFacet(t,n){const{facet:r}=t;return VR(r)&&t.columns&&(t=Yu(t,["columns"]),Ze($ge("facet"))),super.mapFacet(t,n)}mapUnitWithParentEncodingOrProjection(t,n){const{encoding:r,projection:i}=t,{parentEncoding:s,parentProjection:o,config:a}=n,u=i0e({parentProjection:o,projection:i}),l=r0e({parentEncoding:s,encoding:kB(r,n.repeater)});return this.mapUnit({...t,...u?{projection:u}:{},...l?{encoding:l}:{}},{config:a})}mapFacetedUnit(t,n){const{row:r,column:i,facet:s,...o}=t.encoding,{mark:a,width:u,projection:l,height:c,view:f,params:d,encoding:h,...p}=t,{facetMapping:m,layout:g}=this.getFacetMappingAndLayout({row:r,column:i,facet:s},n),y=kB(o,n.repeater);return this.mapFacet({...p,...g,facet:m,spec:{...u?{width:u}:{},...c?{height:c}:{},...f?{view:f}:{},...l?{projection:l}:{},mark:a,encoding:y,...d?{params:d}:{}}},n)}getFacetMappingAndLayout(t,n){const{row:r,column:i,facet:s}=t;if(r||i){s&&Ze(dQt([...r?[fm]:[],...i?[dm]:[]]));const o={},a={};for(const u of[fm,dm]){const l=t[u];if(l){const{align:c,center:f,spacing:d,columns:h,...p}=l;o[u]=p;for(const m of["align","center","spacing"])l[m]!==void 0&&(a[m]??(a[m]={}),a[m][u]=l[m])}}return{facetMapping:o,layout:a}}else{const{align:o,center:a,spacing:u,columns:l,...c}=s;return{facetMapping:den(c,n.repeater),layout:{...o?{align:o}:{},...a?{center:a}:{},...u?{spacing:u}:{},...l?{columns:l}:{}}}}}mapLayer(t,{parentEncoding:n,parentProjection:r,...i}){const{encoding:s,projection:o,...a}=t,u={...i,parentEncoding:r0e({parentEncoding:n,encoding:s,layer:!0}),parentProjection:i0e({parentProjection:r,projection:o})};return super.mapLayer({...a,...t.name?{name:[u.repeaterPrefix,t.name].filter(l=>l).join("_")}:{}},u)}}function r0e({parentEncoding:e,encoding:t={},layer:n}){let r={};if(e){const i=new Set([...Ye(e),...Ye(t)]);for(const s of i){const o=t[s],a=e[s];if(ln(o)){const u={...a,...o};r[s]=u}else HR(o)?r[s]={...o,condition:{...a,...o.condition}}:o||o===null?r[s]=o:(n||id(a)||Rt(a)||ln(a)||je(a))&&(r[s]=a)}}else r=t;return!r||jr(r)?void 0:r}function i0e(e){const{parentProjection:t,projection:n}=e;return t&&n&&Ze(tQt({parentProjection:t,projection:n})),n??t}function Qre(e){return"filter"in e}function men(e){return(e==null?void 0:e.stop)!==void 0}function ZFe(e){return"lookup"in e}function gen(e){return"data"in e}function yen(e){return"param"in e}function ven(e){return"pivot"in e}function ben(e){return"density"in e}function _en(e){return"quantile"in e}function wen(e){return"regression"in e}function Een(e){return"loess"in e}function xen(e){return"sample"in e}function Sen(e){return"window"in e}function Ten(e){return"joinaggregate"in e}function Cen(e){return"flatten"in e}function Aen(e){return"calculate"in e}function e5e(e){return"bin"in e}function Ien(e){return"impute"in e}function ken(e){return"timeUnit"in e}function Ren(e){return"aggregate"in e}function Nen(e){return"stack"in e}function Pen(e){return"fold"in e}function Den(e){return"extent"in e&&!("density"in e)&&!("regression"in e)}function Oen(e){return e.map(t=>Qre(t)?{filter:_E(t.filter,aJt)}:t)}class $en extends Xre{map(t,n){return n.emptySelections??(n.emptySelections={}),n.selectionPredicates??(n.selectionPredicates={}),t=s0e(t,n),super.map(t,n)}mapLayerOrUnit(t,n){if(t=s0e(t,n),t.encoding){const r={};for(const[i,s]of vy(t.encoding))r[i]=t5e(s,n);t={...t,encoding:r}}return super.mapLayerOrUnit(t,n)}mapUnit(t,n){const{selection:r,...i}=t;return r?{...i,params:vy(r).map(([s,o])=>{const{init:a,bind:u,empty:l,...c}=o;c.type==="single"?(c.type="point",c.toggle=!1):c.type==="multi"&&(c.type="point"),n.emptySelections[s]=l!=="none";for(const f of Mo(n.selectionPredicates[s]??{}))f.empty=l!=="none";return{name:s,value:a,select:c,bind:u}})}:t}}function s0e(e,t){const{transform:n,...r}=e;if(n){const i=n.map(s=>{if(Qre(s))return{filter:bq(s,t)};if(e5e(s)&&d_(s.bin))return{...s,bin:n5e(s.bin)};if(ZFe(s)){const{selection:o,...a}=s.from;return o?{...s,from:{param:o,...a}}:s}return s});return{...r,transform:i}}return e}function t5e(e,t){var r,i;const n=nn(e);if(et(n)&&d_(n.bin)&&(n.bin=n5e(n.bin)),g_(n)&&((i=(r=n.scale)==null?void 0:r.domain)!=null&&i.selection)){const{selection:s,...o}=n.scale.domain;n.scale.domain={...o,...s?{param:s}:{}}}if(u5(n))if(je(n.condition))n.condition=n.condition.map(s=>{const{selection:o,param:a,test:u,...l}=s;return a?s:{...l,test:bq(s,t)}});else{const{selection:s,param:o,test:a,...u}=t5e(n.condition,t);n.condition=o?n.condition:{...u,test:bq(n.condition,t)}}return n}function n5e(e){const t=e.extent;if(t!=null&&t.selection){const{selection:n,...r}=t;return{...e,extent:{...r,param:n}}}return e}function bq(e,t){const n=r=>_E(r,i=>{var s;const o=t.emptySelections[i]??!0,a={param:i,empty:o};return(s=t.selectionPredicates)[i]??(s[i]=[]),t.selectionPredicates[i].push(a),a});return e.selection?n(e.selection):_E(e.test||e.filter,r=>r.selection?n(r.selection):r)}class _q extends Xre{map(t,n){const r=n.selections??[];if(t.params&&!pg(t)){const i=[];for(const s of t.params)Gre(s)?r.push(s):i.push(s);t.params=i}return n.selections=r,super.map(t,n)}mapUnit(t,n){const r=n.selections;if(!r||!r.length)return t;const i=(n.path??[]).concat(t.name),s=[];for(const o of r)if(!o.views||!o.views.length)s.push(o);else for(const a of o.views)(mt(a)&&(a===t.name||i.includes(a))||je(a)&&a.map(u=>i.indexOf(u)).every((u,l,c)=>u!==-1&&(l===0||u>c[l-1])))&&s.push(o);return s.length&&(t.params=s),t}}for(const e of["mapFacet","mapRepeat","mapHConcat","mapVConcat","mapLayer"]){const t=_q.prototype[e];_q.prototype[e]=function(n,r){return t.call(this,n,Men(n,r))}}function Men(e,t){return e.name?{...t,path:(t.path??[]).concat(e.name)}:t}function r5e(e,t){t===void 0&&(t=YFe(e.config));const n=Ben(e,t),{width:r,height:i}=e,s=Uen(n,{width:r,height:i,autosize:e.autosize},t);return{...n,...s?{autosize:s}:{}}}const Len=new pen,Fen=new $en,jen=new _q;function Ben(e,t={}){const n={config:t};return jen.map(Len.map(Fen.map(e,n),n),n)}function o0e(e){return mt(e)?{type:e}:e??{}}function Uen(e,t,n){let{width:r,height:i}=t;const s=pg(e)||m5(e),o={};s?r=="container"&&i=="container"?(o.type="fit",o.contains="padding"):r=="container"?(o.type="fit-x",o.contains="padding"):i=="container"&&(o.type="fit-y",o.contains="padding"):(r=="container"&&(Ze(Nge("width")),r=void 0),i=="container"&&(Ze(Nge("height")),i=void 0));const a={type:"pad",...o,...n?o0e(n.autosize):{},...o0e(e.autosize)};if(a.type==="fit"&&!s&&(Ze(FXt),a.type="pad"),r=="container"&&!(a.type=="fit"||a.type=="fit-x")&&Ze(Pge("width")),i=="container"&&!(a.type=="fit"||a.type=="fit-y")&&Ze(Pge("height")),!Rl(a,{type:"pad"}))return a}function zen(e){return e==="fit"||e==="fit-x"||e==="fit-y"}function Ven(e){return e?`fit-${QF(e)}`:"fit"}const Hen=["background","padding"];function a0e(e,t){const n={};for(const r of Hen)e&&e[r]!==void 0&&(n[r]=El(e[r]));return t&&(n.params=e.params),n}class mg{constructor(t={},n={}){this.explicit=t,this.implicit=n}clone(){return new mg(nn(this.explicit),nn(this.implicit))}combine(){return{...this.explicit,...this.implicit}}get(t){return fs(this.explicit[t],this.implicit[t])}getWithExplicit(t){return this.explicit[t]!==void 0?{explicit:!0,value:this.explicit[t]}:this.implicit[t]!==void 0?{explicit:!1,value:this.implicit[t]}:{explicit:!1,value:void 0}}setWithExplicit(t,{value:n,explicit:r}){n!==void 0&&this.set(t,n,r)}set(t,n,r){return delete this[r?"implicit":"explicit"][t],this[r?"explicit":"implicit"][t]=n,this}copyKeyFromSplit(t,{explicit:n,implicit:r}){n[t]!==void 0?this.set(t,n[t],!0):r[t]!==void 0&&this.set(t,r[t],!1)}copyKeyFromObject(t,n){n[t]!==void 0&&this.set(t,n[t],!0)}copyAll(t){for(const n of Ye(t.combine())){const r=t.getWithExplicit(n);this.setWithExplicit(n,r)}}}function Fd(e){return{explicit:!0,value:e}}function pl(e){return{explicit:!1,value:e}}function i5e(e){return(t,n,r,i)=>{const s=e(t.value,n.value);return s>0?t:s<0?n:g5(t,n,r,i)}}function g5(e,t,n,r){return e.explicit&&t.explicit&&Ze(SQt(n,r,e.value,t.value)),e}function wy(e,t,n,r,i=g5){return e===void 0||e.value===void 0?t:e.explicit&&!t.explicit?e:t.explicit&&!e.explicit?t:Rl(e.value,t.value)?e:i(e,t,n,r)}class qen extends mg{constructor(t={},n={},r=!1){super(t,n),this.explicit=t,this.implicit=n,this.parseNothing=r}clone(){const t=super.clone();return t.parseNothing=this.parseNothing,t}}function Bx(e){return"url"in e}function KI(e){return"values"in e}function s5e(e){return"name"in e&&!Bx(e)&&!KI(e)&&!M0(e)}function M0(e){return e&&(o5e(e)||a5e(e)||Jre(e))}function o5e(e){return"sequence"in e}function a5e(e){return"sphere"in e}function Jre(e){return"graticule"in e}var Ei;(function(e){e[e.Raw=0]="Raw",e[e.Main=1]="Main",e[e.Row=2]="Row",e[e.Column=3]="Column",e[e.Lookup=4]="Lookup"})(Ei||(Ei={}));function u5e(e){const{signals:t,hasLegend:n,index:r,...i}=e;return i.field=zc(i.field),i}function Tb(e,t=!0,n=xa){if(je(e)){const r=e.map(i=>Tb(i,t,n));return t?`[${r.join(", ")}]`:r}else if(h_(e))return n(t?wb(e):KQt(e));return t?n(Br(e)):e}function Wen(e,t){for(const n of Mo(e.component.selection??{})){const r=n.name;let i=`${r}${xy}, ${n.resolve==="global"?"true":`{unit: ${$1(e)}}`}`;for(const s of _5)s.defined(n)&&(s.signals&&(t=s.signals(e,n,t)),s.modifyExpr&&(i=s.modifyExpr(e,n,i)));t.push({name:r+Stn,on:[{events:{signal:n.name+xy},update:`modify(${rt(n.name+Cb)}, ${i})`}]})}return Zre(t)}function Gen(e,t){if(e.component.selection&&Ye(e.component.selection).length){const n=rt(e.getName("cell"));t.unshift({name:"facet",value:{},on:[{events:Xy("pointermove","scope"),update:`isTuple(facet) ? facet : group(${n}).datum`}]})}return Zre(t)}function Yen(e,t){let n=!1;for(const r of Mo(e.component.selection??{})){const i=r.name,s=rt(i+Cb);if(t.filter(a=>a.name===i).length===0){const a=r.resolve==="global"?"union":r.resolve,u=r.type==="point"?", true, true)":")";t.push({name:r.name,update:`${C5e}(${s}, ${rt(a)}${u}`})}n=!0;for(const a of _5)a.defined(r)&&a.topLevelSignals&&(t=a.topLevelSignals(e,r,t))}return n&&t.filter(i=>i.name==="unit").length===0&&t.unshift({name:"unit",value:{},on:[{events:"pointermove",update:"isTuple(group()) ? group() : unit"}]}),Zre(t)}function Ken(e,t){const n=[...t],r=$1(e,{escape:!1});for(const i of Mo(e.component.selection??{})){const s={name:i.name+Cb};if(i.project.hasSelectionId&&(s.transform=[{type:"collect",sort:{field:sd}}]),i.init){const a=i.project.items.map(u5e);s.values=i.project.hasSelectionId?i.init.map(u=>({unit:r,[sd]:Tb(u,!1)[0]})):i.init.map(u=>({unit:r,fields:a,values:Tb(u,!1)}))}n.filter(a=>a.name===i.name+Cb).length||n.push(s)}return n}function l5e(e,t){for(const n of Mo(e.component.selection??{}))for(const r of _5)r.defined(n)&&r.marks&&(t=r.marks(e,n,t));return t}function Xen(e,t){for(const n of e.children)Wi(n)&&(t=l5e(n,t));return t}function Qen(e,t,n,r){const i=N5e(e,t.param,t);return{signal:Kl(n.get("type"))&&je(r)&&r[0]>r[1]?`isValid(${i}) && reverse(${i})`:i}}function Zre(e){return e.map(t=>(t.on&&!t.on.length&&delete t.on,t))}class Mr{constructor(t,n){this.debugName=n,this._children=[],this._parent=null,t&&(this.parent=t)}clone(){throw new Error("Cannot clone node")}get parent(){return this._parent}set parent(t){this._parent=t,t&&t.addChild(this)}get children(){return this._children}numChildren(){return this._children.length}addChild(t,n){if(this._children.includes(t)){Ze(JXt);return}n!==void 0?this._children.splice(n,0,t):this._children.push(t)}removeChild(t){const n=this._children.indexOf(t);return this._children.splice(n,1),n}remove(){let t=this._parent.removeChild(this);for(const n of this._children)n._parent=this._parent,this._parent.addChild(n,t++)}insertAsParentOf(t){const n=t.parent;n.removeChild(this),this.parent=n,t.parent=this}swapWithParent(){const t=this._parent,n=t.parent;for(const i of this._children)i.parent=t;this._children=[],t.removeChild(this);const r=t.parent.removeChild(t);this._parent=n,n.addChild(this,r),t.parent=this}}class Xu extends Mr{clone(){const t=new this.constructor;return t.debugName=`clone_${this.debugName}`,t._source=this._source,t._name=`clone_${this._name}`,t.type=this.type,t.refCounts=this.refCounts,t.refCounts[t._name]=0,t}constructor(t,n,r,i){super(t,n),this.type=r,this.refCounts=i,this._source=this._name=n,this.refCounts&&!(this._name in this.refCounts)&&(this.refCounts[this._name]=0)}dependentFields(){return new Set}producedFields(){return new Set}hash(){return this._hash===void 0&&(this._hash=`Output ${s4e()}`),this._hash}getSource(){return this.refCounts[this._name]++,this._source}isRequired(){return!!this.refCounts[this._name]}setSource(t){this._source=t}}function RB(e){return e.as!==void 0}function u0e(e){return`${e}_end`}class xh extends Mr{clone(){return new xh(null,nn(this.timeUnits))}constructor(t,n){super(t),this.timeUnits=n}static makeFromEncoding(t,n){const r=n.reduceFieldDef((i,s,o)=>{const{field:a,timeUnit:u}=s;if(u){let l;if(p_(u)){if(Wi(n)){const{mark:c,markDef:f,config:d}=n,h=_y({fieldDef:s,markDef:f,config:d});(YI(c)||h)&&(l={timeUnit:lo(u),field:a})}}else l={as:at(s,{forAs:!0}),field:a,timeUnit:u};if(Wi(n)){const{mark:c,markDef:f,config:d}=n,h=_y({fieldDef:s,markDef:f,config:d});YI(c)&&ds(o)&&h!==.5&&(l.rectBandPosition=h)}l&&(i[Vn(l)]=l)}return i},{});return jr(r)?null:new xh(t,r)}static makeFromTransform(t,n){const{timeUnit:r,...i}={...n},s=lo(r),o={...i,timeUnit:s};return new xh(t,{[Vn(o)]:o})}merge(t){this.timeUnits={...this.timeUnits};for(const n in t.timeUnits)this.timeUnits[n]||(this.timeUnits[n]=t.timeUnits[n]);for(const n of t.children)t.removeChild(n),n.parent=this;t.remove()}removeFormulas(t){const n={};for(const[r,i]of vy(this.timeUnits)){const s=RB(i)?i.as:`${i.field}_end`;t.has(s)||(n[r]=i)}this.timeUnits=n}producedFields(){return new Set(Mo(this.timeUnits).map(t=>RB(t)?t.as:u0e(t.field)))}dependentFields(){return new Set(Mo(this.timeUnits).map(t=>t.field))}hash(){return`TimeUnit ${Vn(this.timeUnits)}`}assemble(){const t=[];for(const n of Mo(this.timeUnits)){const{rectBandPosition:r}=n,i=lo(n.timeUnit);if(RB(n)){const{field:s,as:o}=n,{unit:a,utc:u,...l}=i,c=[o,`${o}_end`];t.push({field:zc(s),type:"timeunit",...a?{units:t5(a)}:{},...u?{timezone:"utc"}:{},...l,as:c}),t.push(...l0e(c,r,i))}else if(n){const{field:s}=n,o=s.replaceAll("\\.","."),a=c5e({timeUnit:i,field:o}),u=u0e(o);t.push({type:"formula",expr:a,as:u}),t.push(...l0e([o,u],r,i))}}return t}}const y5="offsetted_rect_start",v5="offsetted_rect_end";function c5e({timeUnit:e,field:t,reverse:n}){const{unit:r,utc:i}=e,s=U4e(r),{part:o,step:a}=q4e(s,e.step);return`${i?"utcOffset":"timeOffset"}('${o}', datum['${t}'], ${n?-a:a})`}function l0e([e,t],n,r){if(n!==void 0&&n!==.5){const i=`datum['${e}']`,s=`datum['${t}']`;return[{type:"formula",expr:c0e([c5e({timeUnit:r,field:e,reverse:!0}),i],n+.5),as:`${e}_${y5}`},{type:"formula",expr:c0e([i,s],n+.5),as:`${e}_${v5}`}]}return[]}function c0e([e,t],n){return`${1-n} * ${e} + ${n} * ${t}`}const GR="_tuple_fields";class Jen{constructor(...t){this.items=t,this.hasChannel={},this.hasField={},this.hasSelectionId=!1}}const Zen={defined:()=>!0,parse:(e,t,n)=>{const r=t.name,i=t.project??(t.project=new Jen),s={},o={},a=new Set,u=(p,m)=>{const g=m==="visual"?p.channel:p.field;let y=Ci(`${r}_${g}`);for(let v=1;a.has(y);v++)y=Ci(`${r}_${g}_${v}`);return a.add(y),{[m]:y}},l=t.type,c=e.config.selection[l],f=n.value!==void 0?pt(n.value):null;let{fields:d,encodings:h}=gt(n.select)?n.select:{};if(!d&&!h&&f){for(const p of f)if(gt(p))for(const m of Ye(p))hXt(m)?(h||(h=[])).push(m):l==="interval"?(Ze(YXt),h=c.encodings):(d??(d=[])).push(m)}!d&&!h&&(h=c.encodings,"fields"in c&&(d=c.fields));for(const p of h??[]){const m=e.fieldDef(p);if(m){let g=m.field;if(m.aggregate){Ze(jXt(p,m.aggregate));continue}else if(!g){Ze(Oge(p));continue}if(m.timeUnit&&!p_(m.timeUnit)){g=e.vgField(p);const y={timeUnit:m.timeUnit,as:g,field:m.field};o[Vn(y)]=y}if(!s[g]){const y=l==="interval"&&hg(p)&&Kl(e.getScaleComponent(p).get("type"))?"R":m.bin?"R-RE":"E",v={field:g,channel:p,type:y,index:i.items.length};v.signals={...u(v,"data"),...u(v,"visual")},i.items.push(s[g]=v),i.hasField[g]=s[g],i.hasSelectionId=i.hasSelectionId||g===sd,f4e(p)?(v.geoChannel=p,v.channel=c4e(p),i.hasChannel[v.channel]=s[g]):i.hasChannel[p]=s[g]}}else Ze(Oge(p))}for(const p of d??[]){if(i.hasField[p])continue;const m={type:"E",field:p,index:i.items.length};m.signals={...u(m,"data")},i.items.push(m),i.hasField[p]=m,i.hasSelectionId=i.hasSelectionId||p===sd}f&&(t.init=f.map(p=>i.items.map(m=>gt(p)?p[m.geoChannel||m.channel]!==void 0?p[m.geoChannel||m.channel]:p[m.field]:p))),jr(o)||(i.timeUnit=new xh(null,o))},signals:(e,t,n)=>{const r=t.name+GR;return n.filter(s=>s.name===r).length>0||t.project.hasSelectionId?n:n.concat({name:r,value:t.project.items.map(u5e)})}},hm={defined:e=>e.type==="interval"&&e.resolve==="global"&&e.bind&&e.bind==="scales",parse:(e,t)=>{const n=t.scales=[];for(const r of t.project.items){const i=r.channel;if(!hg(i))continue;const s=e.getScaleComponent(i),o=s?s.get("type"):void 0;if(o=="sequential"&&Ze(VXt),!s||!Kl(o)){Ze(zXt);continue}s.set("selectionExtent",{param:t.name,field:r.field},!0),n.push(r)}},topLevelSignals:(e,t,n)=>{const r=t.scales.filter(o=>n.filter(a=>a.name===o.signals.data).length===0);if(!e.parent||f0e(e)||r.length===0)return n;const i=n.filter(o=>o.name===t.name)[0];let s=i.update;if(s.indexOf(C5e)>=0)i.update=`{${r.map(o=>`${rt(zc(o.field))}: ${o.signals.data}`).join(", ")}}`;else{for(const o of r){const a=`${rt(zc(o.field))}: ${o.signals.data}`;s.includes(a)||(s=`${s.substring(0,s.length-1)}, ${a}}`)}i.update=s}return n.concat(r.map(o=>({name:o.signals.data})))},signals:(e,t,n)=>{if(e.parent&&!f0e(e))for(const r of t.scales){const i=n.find(s=>s.name===r.signals.data);i.push="outer",delete i.value,delete i.update}return n}};function wq(e,t){return`domain(${rt(e.scaleName(t))})`}function f0e(e){return e.parent&&uT(e.parent)&&!e.parent.parent}const xE="_brush",f5e="_scale_trigger",a2="geo_interval_init_tick",d5e="_init",etn="_center",ttn={defined:e=>e.type==="interval",parse:(e,t,n)=>{var r;if(e.hasProjection){const i={...gt(n.select)?n.select:{}};i.fields=[sd],i.encodings||(i.encodings=n.value?Ye(n.value):[vd,yd]),n.select={type:"interval",...i}}if(t.translate&&!hm.defined(t)){const i=`!event.item || event.item.mark.name !== ${rt(t.name+xE)}`;for(const s of t.events){if(!s.between){Ze(`${s} is not an ordered event stream for interval selections.`);continue}const o=pt((r=s.between[0]).filter??(r.filter=[]));o.indexOf(i)<0&&o.push(i)}}},signals:(e,t,n)=>{const r=t.name,i=r+xy,s=Mo(t.project.hasChannel).filter(a=>a.channel===Ai||a.channel===po),o=t.init?t.init[0]:null;if(n.push(...s.reduce((a,u)=>a.concat(ntn(e,t,u,o&&o[u.index])),[])),e.hasProjection){const a=rt(e.projectionName()),u=e.projectionName()+etn,{x:l,y:c}=t.project.hasChannel,f=l&&l.signals.visual,d=c&&c.signals.visual,h=l?o&&o[l.index]:`${u}[0]`,p=c?o&&o[c.index]:`${u}[1]`,m=E=>e.getSizeSignalRef(E).signal,g=`[[${f?f+"[0]":"0"}, ${d?d+"[0]":"0"}],[${f?f+"[1]":m("width")}, ${d?d+"[1]":m("height")}]]`;o&&(n.unshift({name:r+d5e,init:`[scale(${a}, [${l?h[0]:h}, ${c?p[0]:p}]), scale(${a}, [${l?h[1]:h}, ${c?p[1]:p}])]`}),(!l||!c)&&(n.find(S=>S.name===u)||n.unshift({name:u,update:`invert(${a}, [${m("width")}/2, ${m("height")}/2])`})));const y=`intersect(${g}, {markname: ${rt(e.getName("marks"))}}, unit.mark)`,v=`{unit: ${$1(e)}}`,_=`vlSelectionTuples(${y}, ${v})`,w=s.map(E=>E.signals.visual);return n.concat({name:i,on:[{events:[...w.length?[{signal:w.join(" || ")}]:[],...o?[{signal:a2}]:[]],update:_}]})}else{if(!hm.defined(t)){const l=r+f5e,c=s.map(f=>{const d=f.channel,{data:h,visual:p}=f.signals,m=rt(e.scaleName(d)),g=e.getScaleComponent(d).get("type"),y=Kl(g)?"+":"";return`(!isArray(${h}) || (${y}invert(${m}, ${p})[0] === ${y}${h}[0] && ${y}invert(${m}, ${p})[1] === ${y}${h}[1]))`});c.length&&n.push({name:l,value:{},on:[{events:s.map(f=>({scale:e.scaleName(f.channel)})),update:c.join(" && ")+` ? ${l} : {}`}]})}const a=s.map(l=>l.signals.data),u=`unit: ${$1(e)}, fields: ${r+GR}, values`;return n.concat({name:i,...o?{init:`{${u}: ${Tb(o)}}`}:{},...a.length?{on:[{events:[{signal:a.join(" || ")}],update:`${a.join(" && ")} ? {${u}: [${a}]} : null`}]}:{}})}},topLevelSignals:(e,t,n)=>(Wi(e)&&e.hasProjection&&t.init&&(n.filter(i=>i.name===a2).length||n.unshift({name:a2,value:null,on:[{events:"timer{1}",update:`${a2} === null ? {} : ${a2}`}]})),n),marks:(e,t,n)=>{const r=t.name,{x:i,y:s}=t.project.hasChannel,o=i==null?void 0:i.signals.visual,a=s==null?void 0:s.signals.visual,u=`data(${rt(t.name+Cb)})`;if(hm.defined(t)||!i&&!s)return n;const l={x:i!==void 0?{signal:`${o}[0]`}:{value:0},y:s!==void 0?{signal:`${a}[0]`}:{value:0},x2:i!==void 0?{signal:`${o}[1]`}:{field:{group:"width"}},y2:s!==void 0?{signal:`${a}[1]`}:{field:{group:"height"}}};if(t.resolve==="global")for(const g of Ye(l))l[g]=[{test:`${u}.length && ${u}[0].unit === ${$1(e)}`,...l[g]},{value:0}];const{fill:c,fillOpacity:f,cursor:d,...h}=t.mark,p=Ye(h).reduce((g,y)=>(g[y]=[{test:[i!==void 0&&`${o}[0] !== ${o}[1]`,s!==void 0&&`${a}[0] !== ${a}[1]`].filter(v=>v).join(" && "),value:h[y]},{value:null}],g),{}),m=d??(t.translate?"move":null);return[{name:`${r+xE}_bg`,type:"rect",clip:!0,encode:{enter:{fill:{value:c},fillOpacity:{value:f}},update:l}},...n,{name:r+xE,type:"rect",clip:!0,encode:{enter:{...m?{cursor:{value:m}}:{},fill:{value:"transparent"}},update:{...l,...p}}}]}};function ntn(e,t,n,r){const i=!e.hasProjection,s=n.channel,o=n.signals.visual,a=rt(i?e.scaleName(s):e.projectionName()),u=d=>`scale(${a}, ${d})`,l=e.getSizeSignalRef(s===Ai?"width":"height").signal,c=`${s}(unit)`,f=t.events.reduce((d,h)=>[...d,{events:h.between[0],update:`[${c}, ${c}]`},{events:h,update:`[${o}[0], clamp(${c}, 0, ${l})]`}],[]);if(i){const d=n.signals.data,h=hm.defined(t),p=e.getScaleComponent(s),m=p?p.get("type"):void 0,g=r?{init:Tb(r,!0,u)}:{value:[]};return f.push({events:{signal:t.name+f5e},update:Kl(m)?`[${u(`${d}[0]`)}, ${u(`${d}[1]`)}]`:"[0, 0]"}),h?[{name:d,on:[]}]:[{name:o,...g,on:f},{name:d,...r?{init:Tb(r)}:{},on:[{events:{signal:o},update:`${o}[0] === ${o}[1] ? null : invert(${a}, ${o})`}]}]}else{const d=s===Ai?0:1,h=t.name+d5e,p=r?{init:`[${h}[0][${d}], ${h}[1][${d}]]`}:{value:[]};return[{name:o,...p,on:f}]}}const rtn={defined:e=>e.type==="point",signals:(e,t,n)=>{const r=t.name,i=r+GR,s=t.project,o="(item().isVoronoi ? datum.datum : datum)",a=Mo(e.component.selection??{}).reduce((f,d)=>d.type==="interval"?f.concat(d.name+xE):f,[]).map(f=>`indexof(item().mark.name, '${f}') < 0`).join(" && "),u=`datum && item().mark.marktype !== 'group' && indexof(item().mark.role, 'legend') < 0${a?` && ${a}`:""}`;let l=`unit: ${$1(e)}, `;if(t.project.hasSelectionId)l+=`${sd}: ${o}[${rt(sd)}]`;else{const f=s.items.map(d=>{const h=e.fieldDef(d.channel);return h!=null&&h.bin?`[${o}[${rt(e.vgField(d.channel,{}))}], ${o}[${rt(e.vgField(d.channel,{binSuffix:"end"}))}]]`:`${o}[${rt(d.field)}]`}).join(", ");l+=`fields: ${i}, values: [${f}]`}const c=t.events;return n.concat([{name:r+xy,on:c?[{events:c,update:`${u} ? {${l}} : null`,force:!0}]:[]}])}};function iT(e,t,n,r){const i=u5(t)&&t.condition,s=r(t);if(i){const a=pt(i).map(u=>{const l=r(u);if(GJt(u)){const{param:c,empty:f}=u;return{test:R5e(e,{param:c,empty:f}),...l}}else return{test:ZM(e,u.test),...l}});return{[n]:[...a,...s!==void 0?[s]:[]]}}else return s!==void 0?{[n]:s}:{}}function eie(e,t="text"){const n=e.encoding[t];return iT(e,n,t,r=>b5(r,e.config))}function b5(e,t,n="datum"){if(e){if(id(e))return hi(e.value);if(ln(e)){const{format:r,formatType:i}=WM(e);return Rre({fieldOrDatumDef:e,format:r,formatType:i,expr:n,config:t})}}}function h5e(e,t={}){const{encoding:n,markDef:r,config:i,stack:s}=e,o=n.tooltip;if(je(o))return{tooltip:d0e({tooltip:o},s,i,t)};{const a=t.reactiveGeom?"datum.datum":"datum";return iT(e,o,"tooltip",u=>{const l=b5(u,i,a);if(l)return l;if(u===null)return;let c=wr("tooltip",r,i);if(c===!0&&(c={content:"encoding"}),mt(c))return{value:c};if(gt(c))return Rt(c)?c:c.content==="encoding"?d0e(n,s,i,t):{signal:a}})}}function p5e(e,t,n,{reactiveGeom:r}={}){const i={...n,...n.tooltipFormat},s={},o=r?"datum.datum":"datum",a=[];function u(c,f){const d=f_(f),h=iu(c)?c:{...c,type:e[d].type},p=h.title||Lre(h,i),m=pt(p).join(", ").replaceAll(/"/g,'\\"');let g;if(ds(f)){const y=f==="x"?"x2":"y2",v=zh(e[y]);if(Co(h.bin)&&v){const _=at(h,{expr:o}),w=at(v,{expr:o}),{format:E,formatType:S}=WM(h);g=zR(_,w,E,S,i),s[y]=!0}}if((ds(f)||f===Zc||f===gd)&&t&&t.fieldChannel===f&&t.offset==="normalize"){const{format:y,formatType:v}=WM(h);g=Rre({fieldOrDatumDef:h,format:y,formatType:v,expr:o,config:i,normalizeStack:!0}).signal}g??(g=b5(h,i,o).signal),a.push({channel:f,key:m,value:g})}Bre(e,(c,f)=>{et(c)?u(c,f):l5(c)&&u(c.condition,f)});const l={};for(const{channel:c,key:f,value:d}of a)!s[c]&&!l[f]&&(l[f]=d);return l}function d0e(e,t,n,{reactiveGeom:r}={}){const i=p5e(e,t,n,{reactiveGeom:r}),s=vy(i).map(([o,a])=>`"${o}": ${a}`);return s.length>0?{signal:`{${s.join(", ")}}`}:void 0}function itn(e){const{markDef:t,config:n}=e,r=wr("aria",t,n);return r===!1?{}:{...r?{aria:r}:{},...stn(e),...otn(e)}}function stn(e){const{mark:t,markDef:n,config:r}=e;if(r.aria===!1)return{};const i=wr("ariaRoleDescription",n,r);return i!=null?{ariaRoleDescription:{value:i}}:t in $Xt?{}:{ariaRoleDescription:{value:t}}}function otn(e){const{encoding:t,markDef:n,config:r,stack:i}=e,s=t.description;if(s)return iT(e,s,"description",u=>b5(u,e.config));const o=wr("description",n,r);if(o!=null)return{description:hi(o)};if(r.aria===!1)return{};const a=p5e(t,i,r);if(!jr(a))return{description:{signal:vy(a).map(([u,l],c)=>`"${c>0?"; ":""}${u}: " + (${l})`).join(" + ")}}}function eo(e,t,n={}){const{markDef:r,encoding:i,config:s}=t,{vgChannel:o}=n;let{defaultRef:a,defaultValue:u}=n;a===void 0&&(u??(u=wr(e,r,s,{vgChannel:o,ignoreVgConfig:!0})),u!==void 0&&(a=hi(u)));const l=i[e];return iT(t,l,o??e,c=>kre({channel:e,channelDef:c,markDef:r,config:s,scaleName:t.scaleName(e),scale:t.getScaleComponent(e),stack:null,defaultRef:a}))}function m5e(e,t={filled:void 0}){const{markDef:n,encoding:r,config:i}=e,{type:s}=n,o=t.filled??wr("filled",n,i),a=Hn(["bar","point","circle","square","geoshape"],s)?"transparent":void 0,u=wr(o===!0?"color":void 0,n,i,{vgChannel:"fill"})??i.mark[o===!0&&"color"]??a,l=wr(o===!1?"color":void 0,n,i,{vgChannel:"stroke"})??i.mark[o===!1&&"color"],c=o?"fill":"stroke",f={...u?{fill:hi(u)}:{},...l?{stroke:hi(l)}:{}};return n.color&&(o?n.fill:n.stroke)&&Ze(P4e("property",{fill:"fill"in n,stroke:"stroke"in n})),{...f,...eo("color",e,{vgChannel:c,defaultValue:o?u:l}),...eo("fill",e,{defaultValue:r.fill?u:void 0}),...eo("stroke",e,{defaultValue:r.stroke?l:void 0})}}function atn(e){const{encoding:t,mark:n}=e,r=t.order;return!m_(n)&&id(r)?iT(e,r,"zindex",i=>hi(i.value)):{}}function Ux({channel:e,markDef:t,encoding:n={},model:r,bandPosition:i}){const s=`${e}Offset`,o=t[s],a=n[s];if((s==="xOffset"||s==="yOffset")&&a)return{offsetType:"encoding",offset:kre({channel:s,channelDef:a,markDef:t,config:r==null?void 0:r.config,scaleName:r.scaleName(s),scale:r.getScaleComponent(s),stack:null,defaultRef:hi(o),bandPosition:i})};const u=t[s];return u?{offsetType:"visual",offset:u}:{}}function pa(e,t,{defaultPos:n,vgChannel:r}){const{encoding:i,markDef:s,config:o,stack:a}=t,u=i[e],l=i[fp(e)],c=t.scaleName(e),f=t.getScaleComponent(e),{offset:d,offsetType:h}=Ux({channel:e,markDef:s,encoding:i,model:t,bandPosition:.5}),p=tie({model:t,defaultPos:n,channel:e,scaleName:c,scale:f}),m=!u&&ds(e)&&(i.latitude||i.longitude)?{field:t.getName(e)}:utn({channel:e,channelDef:u,channel2Def:l,markDef:s,config:o,scaleName:c,scale:f,stack:a,offset:d,defaultRef:p,bandPosition:h==="encoding"?0:void 0});return m?{[r||e]:m}:void 0}function utn(e){const{channel:t,channelDef:n,scaleName:r,stack:i,offset:s,markDef:o}=e;if(ln(n)&&i&&t===i.fieldChannel){if(et(n)){let a=n.bandPosition;if(a===void 0&&o.type==="text"&&(t==="radius"||t==="theta")&&(a=.5),a!==void 0)return zM({scaleName:r,fieldOrDatumDef:n,startSuffix:"start",bandPosition:a,offset:s})}return D1(n,r,{suffix:"end"},{offset:s})}return Are(e)}function tie({model:e,defaultPos:t,channel:n,scaleName:r,scale:i}){const{markDef:s,config:o}=e;return()=>{const a=f_(n),u=by(n),l=wr(n,s,o,{vgChannel:u});if(l!==void 0)return iA(n,l);switch(t){case"zeroOrMin":case"zeroOrMax":if(r){const c=i.get("type");if(!Hn([Ku.LOG,Ku.TIME,Ku.UTC],c)){if(i.domainDefinitelyIncludesZero())return{scale:r,value:0}}}if(t==="zeroOrMin")return a==="y"?{field:{group:"height"}}:{value:0};switch(a){case"radius":return{signal:`min(${e.width.signal},${e.height.signal})/2`};case"theta":return{signal:"2*PI"};case"x":return{field:{group:"width"}};case"y":return{value:0}}break;case"mid":return{...e[al(n)],mult:.5}}}}const ltn={left:"x",center:"xc",right:"x2"},ctn={top:"y",middle:"yc",bottom:"y2"};function g5e(e,t,n,r="middle"){if(e==="radius"||e==="theta")return by(e);const i=e==="x"?"align":"baseline",s=wr(i,t,n);let o;return Rt(s)?(Ze(hQt(i)),o=void 0):o=s,e==="x"?ltn[o||(r==="top"?"left":"center")]:ctn[o||r]}function QM(e,t,{defaultPos:n,defaultPos2:r,range:i}){return i?y5e(e,t,{defaultPos:n,defaultPos2:r}):pa(e,t,{defaultPos:n})}function y5e(e,t,{defaultPos:n,defaultPos2:r}){const{markDef:i,config:s}=t,o=fp(e),a=al(e),u=ftn(t,r,o),l=u[a]?g5e(e,i,s):by(e);return{...pa(e,t,{defaultPos:n,vgChannel:l}),...u}}function ftn(e,t,n){const{encoding:r,mark:i,markDef:s,stack:o,config:a}=e,u=f_(n),l=al(n),c=by(n),f=r[u],d=e.scaleName(u),h=e.getScaleComponent(u),{offset:p}=n in r||n in s?Ux({channel:n,markDef:s,encoding:r,model:e}):Ux({channel:u,markDef:s,encoding:r,model:e});if(!f&&(n==="x2"||n==="y2")&&(r.latitude||r.longitude)){const g=al(n),y=e.markDef[g];return y!=null?{[g]:{value:y}}:{[c]:{field:e.getName(n)}}}const m=dtn({channel:n,channelDef:f,channel2Def:r[n],markDef:s,config:a,scaleName:d,scale:h,stack:o,offset:p,defaultRef:void 0});return m!==void 0?{[c]:m}:jP(n,s)||jP(n,{[n]:BM(n,s,a.style),[l]:BM(l,s,a.style)})||jP(n,a[i])||jP(n,a.mark)||{[c]:tie({model:e,defaultPos:t,channel:n,scaleName:d,scale:h})()}}function dtn({channel:e,channelDef:t,channel2Def:n,markDef:r,config:i,scaleName:s,scale:o,stack:a,offset:u,defaultRef:l}){return ln(t)&&a&&e.charAt(0)===a.fieldChannel.charAt(0)?D1(t,s,{suffix:"start"},{offset:u}):Are({channel:e,channelDef:n,scaleName:s,scale:o,stack:a,markDef:r,config:i,offset:u,defaultRef:l})}function jP(e,t){const n=al(e),r=by(e);if(t[r]!==void 0)return{[r]:iA(e,t[r])};if(t[e]!==void 0)return{[r]:iA(e,t[e])};if(t[n]){const i=t[n];if(Sb(i))Ze(aQt(n));else return{[n]:iA(e,i)}}}function Ey(e,t){const{config:n,encoding:r,markDef:i}=e,s=i.type,o=fp(t),a=al(t),u=r[t],l=r[o],c=e.getScaleComponent(t),f=c?c.get("type"):void 0,d=i.orient,h=r[a]??r.size??wr("size",i,n,{vgChannel:a}),p=m4e(t),m=s==="bar"&&(t==="x"?d==="vertical":d==="horizontal");return et(u)&&(oi(u.bin)||Co(u.bin)||u.timeUnit&&!l)&&!(h&&!Sb(h))&&!r[p]&&!co(f)?mtn({fieldDef:u,fieldDef2:l,channel:t,model:e}):(ln(u)&&co(f)||m)&&!l?ptn(u,t,e):y5e(t,e,{defaultPos:"zeroOrMax",defaultPos2:"zeroOrMin"})}function htn(e,t,n,r,i,s,o){if(Sb(i))if(n){const u=n.get("type");if(u==="band"){let l=`bandwidth('${t}')`;i.band!==1&&(l=`${i.band} * ${l}`);const c=zm("minBandSize",{type:o},r);return{signal:c?`max(${$f(c)}, ${l})`:l}}else i.band!==1&&(Ze(yQt(u)),i=void 0)}else return{mult:i.band,field:{group:e}};else{if(Rt(i))return i;if(i)return{value:i}}if(n){const u=n.get("range");if(rv(u)&&lr(u.step))return{value:u.step-2}}if(!s){const{bandPaddingInner:u,barBandPaddingInner:l,rectBandPaddingInner:c}=r.scale,f=fs(u,o==="bar"?l:c);if(Rt(f))return{signal:`(1 - (${f.signal})) * ${e}`};if(lr(f))return{signal:`${1-f} * ${e}`}}return{value:KM(r.view,e)-2}}function ptn(e,t,n){var A,k;const{markDef:r,encoding:i,config:s,stack:o}=n,a=r.orient,u=n.scaleName(t),l=n.getScaleComponent(t),c=al(t),f=fp(t),d=m4e(t),h=n.scaleName(d),p=n.getScaleComponent(are(t)),m=a==="horizontal"&&t==="y"||a==="vertical"&&t==="x";let g;(i.size||r.size)&&(m?g=eo("size",n,{vgChannel:c,defaultRef:hi(r.size)}):Ze(wQt(r.type)));const y=!!g,v=hFe({channel:t,fieldDef:e,markDef:r,config:s,scaleType:(A=l||p)==null?void 0:A.get("type"),useVlSizeChannel:m});g=g||{[c]:htn(c,h||u,p||l,s,v,!!e,r.type)};const _=((k=l||p)==null?void 0:k.get("type"))==="band"&&Sb(v)&&!y?"top":"middle",w=g5e(t,r,s,_),E=w==="xc"||w==="yc",{offset:S,offsetType:T}=Ux({channel:t,markDef:r,encoding:i,model:n,bandPosition:E?.5:0}),C=Are({channel:t,channelDef:e,markDef:r,config:s,scaleName:u,scale:l,stack:o,offset:S,defaultRef:tie({model:n,defaultPos:"mid",channel:t,scaleName:u,scale:l}),bandPosition:E?T==="encoding"?0:.5:Rt(v)?{signal:`(1-${v})/2`}:Sb(v)?(1-v.band)/2:0});if(c)return{[w]:C,...g};{const N=by(f),O=g[c],D=S?{...O,offset:S}:O;return{[w]:C,[N]:je(C)?[C[0],{...C[1],offset:D}]:{...C,offset:D}}}}function h0e(e,t,n,r,i,s,o){if(l4e(e))return 0;const a=e==="x"||e==="y2",u=a?-t/2:t/2;if(Rt(n)||Rt(i)||Rt(r)||s){const l=$f(n),c=$f(i),f=$f(r),d=$f(s),p=s?`(${o} < ${d} ? ${a?"":"-"}0.5 * (${d} - (${o})) : ${u})`:u,m=f?`${f} + `:"",g=l?`(${l} ? -1 : 1) * `:"",y=c?`(${c} + ${p})`:p;return{signal:m+g+y}}else return i=i||0,r+(n?-i-u:+i+u)}function mtn({fieldDef:e,fieldDef2:t,channel:n,model:r}){var k;const{config:i,markDef:s,encoding:o}=r,a=r.getScaleComponent(n),u=r.scaleName(n),l=a?a.get("type"):void 0,c=a.get("reverse"),f=hFe({channel:n,fieldDef:e,markDef:s,config:i,scaleType:l}),d=(k=r.component.axes[n])==null?void 0:k[0],h=(d==null?void 0:d.get("translate"))??.5,p=ds(n)?wr("binSpacing",s,i)??0:0,m=fp(n),g=by(n),y=by(m),v=zm("minBandSize",s,i),{offset:_}=Ux({channel:n,markDef:s,encoding:o,model:r,bandPosition:0}),{offset:w}=Ux({channel:m,markDef:s,encoding:o,model:r,bandPosition:0}),E=CJt({fieldDef:e,scaleName:u}),S=h0e(n,p,c,h,_,v,E),T=h0e(m,p,c,h,w??_,v,E),C=Rt(f)?{signal:`(1-${f.signal})/2`}:Sb(f)?(1-f.band)/2:.5,A=_y({fieldDef:e,fieldDef2:t,markDef:s,config:i});if(oi(e.bin)||e.timeUnit){const N=e.timeUnit&&A!==.5;return{[y]:p0e({fieldDef:e,scaleName:u,bandPosition:C,offset:T,useRectOffsetField:N}),[g]:p0e({fieldDef:e,scaleName:u,bandPosition:Rt(C)?{signal:`1-${C.signal}`}:1-C,offset:S,useRectOffsetField:N})}}else if(Co(e.bin)){const N=D1(e,u,{},{offset:T});if(et(t))return{[y]:N,[g]:D1(t,u,{},{offset:S})};if(d_(e.bin)&&e.bin.step)return{[y]:N,[g]:{signal:`scale("${u}", ${at(e,{expr:"datum"})} + ${e.bin.step})`,offset:S}}}Ze($4e(m))}function p0e({fieldDef:e,scaleName:t,bandPosition:n,offset:r,useRectOffsetField:i}){return zM({scaleName:t,fieldOrDatumDef:e,bandPosition:n,offset:r,...i?{startSuffix:y5,endSuffix:v5}:{}})}const gtn=new Set(["aria","width","height"]);function ef(e,t){const{fill:n=void 0,stroke:r=void 0}=t.color==="include"?m5e(e):{};return{...ytn(e.markDef,t),...m0e(e,"fill",n),...m0e(e,"stroke",r),...eo("opacity",e),...eo("fillOpacity",e),...eo("strokeOpacity",e),...eo("strokeWidth",e),...eo("strokeDash",e),...atn(e),...h5e(e),...eie(e,"href"),...itn(e)}}function m0e(e,t,n){const{config:r,mark:i,markDef:s}=e;if(wr("invalid",s,r)==="hide"&&n&&!m_(i)){const a=vtn(e,{invalid:!0,channels:JF});if(a)return{[t]:[{test:a,value:null},...pt(n)]}}return n?{[t]:n}:{}}function ytn(e,t){return OXt.reduce((n,r)=>(!gtn.has(r)&&e[r]!==void 0&&t[r]!=="ignore"&&(n[r]=hi(e[r])),n),{})}function vtn(e,{invalid:t=!1,channels:n}){const r=n.reduce((s,o)=>{const a=e.getScaleComponent(o);if(a){const u=a.get("type"),l=e.vgField(o,{expr:"datum"});l&&Kl(u)&&(s[l]=!0)}return s},{}),i=Ye(r);if(i.length>0){const s=t?"||":"&&";return i.map(o=>Ire(o,t)).join(` ${s} `)}}function nie(e){const{config:t,markDef:n}=e;if(wr("invalid",n,t)){const i=btn(e,{channels:dp});if(i)return{defined:{signal:i}}}return{}}function btn(e,{invalid:t=!1,channels:n}){const r=n.reduce((s,o)=>{var u;const a=e.getScaleComponent(o);if(a){const l=a.get("type"),c=e.vgField(o,{expr:"datum",binSuffix:(u=e.stack)!=null&&u.impute?"mid":void 0});c&&Kl(l)&&(s[c]=!0)}return s},{}),i=Ye(r);if(i.length>0){const s=t?"||":"&&";return i.map(o=>Ire(o,t)).join(` ${s} `)}}function g0e(e,t){if(t!==void 0)return{[e]:hi(t)}}const NB="voronoi",v5e={defined:e=>e.type==="point"&&e.nearest,parse:(e,t)=>{if(t.events)for(const n of t.events)n.markname=e.getName(NB)},marks:(e,t,n)=>{const{x:r,y:i}=t.project.hasChannel,s=e.mark;if(m_(s))return Ze(BXt(s)),n;const o={name:e.getName(NB),type:"path",interactive:!0,from:{data:e.getName("marks")},encode:{update:{fill:{value:"transparent"},strokeWidth:{value:.35},stroke:{value:"transparent"},isVoronoi:{value:!0},...h5e(e,{reactiveGeom:!0})}},transform:[{type:"voronoi",x:{expr:r||!i?"datum.datum.x || 0":"0"},y:{expr:i||!r?"datum.datum.y || 0":"0"},size:[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]}]};let a=0,u=!1;return n.forEach((l,c)=>{const f=l.name??"";f===e.component.mark[0].name?a=c:f.indexOf(NB)>=0&&(u=!0)}),u||n.splice(a+1,0,o),n}},b5e={defined:e=>e.type==="point"&&e.resolve==="global"&&e.bind&&e.bind!=="scales"&&!Wre(e.bind),parse:(e,t,n)=>A5e(t,n),topLevelSignals:(e,t,n)=>{const r=t.name,i=t.project,s=t.bind,o=t.init&&t.init[0],a=v5e.defined(t)?"(item().isVoronoi ? datum.datum : datum)":"datum";return i.items.forEach((u,l)=>{const c=Ci(`${r}_${u.field}`);n.filter(d=>d.name===c).length||n.unshift({name:c,...o?{init:Tb(o[l])}:{value:null},on:t.events?[{events:t.events,update:`datum && item().mark.marktype !== 'group' ? ${a}[${rt(u.field)}] : null`}]:[],bind:s[u.field]??s[u.channel]??s})}),n},signals:(e,t,n)=>{const r=t.name,i=t.project,s=n.filter(l=>l.name===r+xy)[0],o=r+GR,a=i.items.map(l=>Ci(`${r}_${l.field}`)),u=a.map(l=>`${l} !== null`).join(" && ");return a.length&&(s.update=`${u} ? {fields: ${o}, values: [${a.join(", ")}]} : null`),delete s.value,delete s.on,n}},JM="_toggle",_5e={defined:e=>e.type==="point"&&!!e.toggle,signals:(e,t,n)=>n.concat({name:t.name+JM,value:!1,on:[{events:t.events,update:t.toggle}]}),modifyExpr:(e,t)=>{const n=t.name+xy,r=t.name+JM;return`${r} ? null : ${n}, `+(t.resolve==="global"?`${r} ? null : true, `:`${r} ? null : {unit: ${$1(e)}}, `)+`${r} ? ${n} : null`}},_tn={defined:e=>e.clear!==void 0&&e.clear!==!1,parse:(e,t)=>{t.clear&&(t.clear=mt(t.clear)?Xy(t.clear,"view"):t.clear)},topLevelSignals:(e,t,n)=>{if(b5e.defined(t))for(const r of t.project.items){const i=n.findIndex(s=>s.name===Ci(`${t.name}_${r.field}`));i!==-1&&n[i].on.push({events:t.clear,update:"null"})}return n},signals:(e,t,n)=>{function r(i,s){i!==-1&&n[i].on&&n[i].on.push({events:t.clear,update:s})}if(t.type==="interval")for(const i of t.project.items){const s=n.findIndex(o=>o.name===i.signals.visual);if(r(s,"[0, 0]"),s===-1){const o=n.findIndex(a=>a.name===i.signals.data);r(o,"null")}}else{let i=n.findIndex(s=>s.name===t.name+xy);r(i,"null"),_5e.defined(t)&&(i=n.findIndex(s=>s.name===t.name+JM),r(i,"false"))}return n}},w5e={defined:e=>{const t=e.resolve==="global"&&e.bind&&Wre(e.bind),n=e.project.items.length===1&&e.project.items[0].field!==sd;return t&&!n&&Ze(HXt),t&&n},parse:(e,t,n)=>{const r=nn(n);if(r.select=mt(r.select)?{type:r.select,toggle:t.toggle}:{...r.select,toggle:t.toggle},A5e(t,r),gt(n.select)&&(n.select.on||n.select.clear)){const o='event.item && indexof(event.item.mark.role, "legend") < 0';for(const a of t.events)a.filter=pt(a.filter??[]),a.filter.includes(o)||a.filter.push(o)}const i=AB(t.bind)?t.bind.legend:"click",s=mt(i)?Xy(i,"view"):pt(i);t.bind={legend:{merge:s}}},topLevelSignals:(e,t,n)=>{const r=t.name,i=AB(t.bind)&&t.bind.legend,s=o=>a=>{const u=nn(a);return u.markname=o,u};for(const o of t.project.items){if(!o.hasLegend)continue;const a=`${Ci(o.field)}_legend`,u=`${r}_${a}`;if(n.filter(c=>c.name===u).length===0){const c=i.merge.map(s(`${a}_symbols`)).concat(i.merge.map(s(`${a}_labels`))).concat(i.merge.map(s(`${a}_entries`)));n.unshift({name:u,...t.init?{}:{value:null},on:[{events:c,update:"isDefined(datum.value) ? datum.value : item().items[0].items[0].datum.value",force:!0},{events:i.merge,update:`!event.item || !datum ? null : ${u}`,force:!0}]})}}return n},signals:(e,t,n)=>{const r=t.name,i=t.project,s=n.find(d=>d.name===r+xy),o=r+GR,a=i.items.filter(d=>d.hasLegend).map(d=>Ci(`${r}_${Ci(d.field)}_legend`)),l=`${a.map(d=>`${d} !== null`).join(" && ")} ? {fields: ${o}, values: [${a.join(", ")}]} : null`;t.events&&a.length>0?s.on.push({events:a.map(d=>({signal:d})),update:l}):a.length>0&&(s.update=l,delete s.value,delete s.on);const c=n.find(d=>d.name===r+JM),f=AB(t.bind)&&t.bind.legend;return c&&(t.events?c.on.push({...c.on[0],events:f}):c.on[0].events=f),n}};function wtn(e,t,n){var i;const r=(i=e.fieldDef(t))==null?void 0:i.field;for(const s of Mo(e.component.selection??{})){const o=s.project.hasField[r]??s.project.hasChannel[t];if(o&&w5e.defined(s)){const a=n.get("selections")??[];a.push(s.name),n.set("selections",a,!1),o.hasLegend=!0}}}const E5e="_translate_anchor",x5e="_translate_delta",Etn={defined:e=>e.type==="interval"&&e.translate,signals:(e,t,n)=>{const r=t.name,i=hm.defined(t),s=r+E5e,{x:o,y:a}=t.project.hasChannel;let u=Xy(t.translate,"scope");return i||(u=u.map(l=>(l.between[0].markname=r+xE,l))),n.push({name:s,value:{},on:[{events:u.map(l=>l.between[0]),update:"{x: x(unit), y: y(unit)"+(o!==void 0?`, extent_x: ${i?wq(e,Ai):`slice(${o.signals.visual})`}`:"")+(a!==void 0?`, extent_y: ${i?wq(e,po):`slice(${a.signals.visual})`}`:"")+"}"}]},{name:r+x5e,value:{},on:[{events:u,update:`{x: ${s}.x - x(unit), y: ${s}.y - y(unit)}`}]}),o!==void 0&&y0e(e,t,o,"width",n),a!==void 0&&y0e(e,t,a,"height",n),n}};function y0e(e,t,n,r,i){const s=t.name,o=s+E5e,a=s+x5e,u=n.channel,l=hm.defined(t),c=i.filter(E=>E.name===n.signals[l?"data":"visual"])[0],f=e.getSizeSignalRef(r).signal,d=e.getScaleComponent(u),h=d&&d.get("type"),p=d&&d.get("reverse"),m=l?u===Ai?p?"":"-":p?"-":"":"",g=`${o}.extent_${u}`,y=`${m}${a}.${u} / ${l?`${f}`:`span(${g})`}`,v=!l||!d?"panLinear":h==="log"?"panLog":h==="symlog"?"panSymlog":h==="pow"?"panPow":"panLinear",_=l?h==="pow"?`, ${d.get("exponent")??1}`:h==="symlog"?`, ${d.get("constant")??1}`:"":"",w=`${v}(${g}, ${y}${_})`;c.on.push({events:{signal:a},update:l?w:`clampRange(${w}, 0, ${f})`})}const S5e="_zoom_anchor",T5e="_zoom_delta",xtn={defined:e=>e.type==="interval"&&e.zoom,signals:(e,t,n)=>{const r=t.name,i=hm.defined(t),s=r+T5e,{x:o,y:a}=t.project.hasChannel,u=rt(e.scaleName(Ai)),l=rt(e.scaleName(po));let c=Xy(t.zoom,"scope");return i||(c=c.map(f=>(f.markname=r+xE,f))),n.push({name:r+S5e,on:[{events:c,update:i?"{"+[u?`x: invert(${u}, x(unit))`:"",l?`y: invert(${l}, y(unit))`:""].filter(f=>f).join(", ")+"}":"{x: x(unit), y: y(unit)}"}]},{name:s,on:[{events:c,force:!0,update:"pow(1.001, event.deltaY * pow(16, event.deltaMode))"}]}),o!==void 0&&v0e(e,t,o,"width",n),a!==void 0&&v0e(e,t,a,"height",n),n}};function v0e(e,t,n,r,i){const s=t.name,o=n.channel,a=hm.defined(t),u=i.filter(v=>v.name===n.signals[a?"data":"visual"])[0],l=e.getSizeSignalRef(r).signal,c=e.getScaleComponent(o),f=c&&c.get("type"),d=a?wq(e,o):u.name,h=s+T5e,p=`${s}${S5e}.${o}`,m=!a||!c?"zoomLinear":f==="log"?"zoomLog":f==="symlog"?"zoomSymlog":f==="pow"?"zoomPow":"zoomLinear",g=a?f==="pow"?`, ${c.get("exponent")??1}`:f==="symlog"?`, ${c.get("constant")??1}`:"":"",y=`${m}(${d}, ${p}, ${h}${g})`;u.on.push({events:{signal:h},update:a?y:`clampRange(${y}, 0, ${l})`})}const Cb="_store",xy="_tuple",Stn="_modify",C5e="vlSelectionResolve",_5=[rtn,ttn,Zen,_5e,b5e,hm,w5e,_tn,Etn,xtn,v5e];function Ttn(e){let t=e.parent;for(;t&&!$l(t);)t=t.parent;return t}function $1(e,{escape:t}={escape:!0}){let n=t?rt(e.name):e.name;const r=Ttn(e);if(r){const{facet:i}=r;for(const s of Ac)i[s]&&(n+=` + '__facet_${s}_' + (facet[${rt(r.vgField(s))}])`)}return n}function rie(e){return Mo(e.component.selection??{}).reduce((t,n)=>t||n.project.hasSelectionId,!1)}function A5e(e,t){(mt(t.select)||!t.select.on)&&delete e.events,(mt(t.select)||!t.select.clear)&&delete e.clear,(mt(t.select)||!t.select.toggle)&&delete e.toggle}function Eq(e){const t=[];return e.type==="Identifier"?[e.name]:e.type==="Literal"?[e.value]:(e.type==="MemberExpression"&&(t.push(...Eq(e.object)),t.push(...Eq(e.property))),t)}function I5e(e){return e.object.type==="MemberExpression"?I5e(e.object):e.object.name==="datum"}function k5e(e){const t=xne(e),n=new Set;return t.visit(r=>{r.type==="MemberExpression"&&I5e(r)&&n.add(Eq(r).slice(1).join("."))}),n}class sT extends Mr{clone(){return new sT(null,this.model,nn(this.filter))}constructor(t,n,r){super(t),this.model=n,this.filter=r,this.expr=ZM(this.model,this.filter,this),this._dependentFields=k5e(this.expr)}dependentFields(){return this._dependentFields}producedFields(){return new Set}assemble(){return{type:"filter",expr:this.expr}}hash(){return`Filter ${this.expr}`}}function Ctn(e,t){const n={},r=e.config.selection;if(!t||!t.length)return n;for(const i of t){const s=Ci(i.name),o=i.select,a=mt(o)?o:o.type,u=gt(o)?nn(o):{type:a},l=r[a];for(const d in l)d==="fields"||d==="encodings"||(d==="mark"&&(u[d]={...l[d],...u[d]}),(u[d]===void 0||u[d]===!0)&&(u[d]=nn(l[d]??u[d])));const c=n[s]={...u,name:s,type:a,init:i.value,bind:i.bind,events:mt(u.on)?Xy(u.on,"scope"):pt(nn(u.on))},f=nn(i);for(const d of _5)d.defined(c)&&d.parse&&d.parse(e,c,f)}return n}function R5e(e,t,n,r="datum"){const i=mt(t)?t:t.param,s=Ci(i),o=rt(s+Cb);let a;try{a=e.getSelectionComponent(s,i)}catch{return`!!${s}`}if(a.project.timeUnit){const d=n??e.component.data.raw,h=a.project.timeUnit.clone();d.parent?h.insertAsParentOf(d):d.parent=h}const u=a.project.hasSelectionId?"vlSelectionIdTest(":"vlSelectionTest(",l=a.resolve==="global"?")":`, ${rt(a.resolve)})`,c=`${u}${o}, ${r}${l}`,f=`length(data(${o}))`;return t.empty===!1?`${f} && ${c}`:`!${f} || ${c}`}function N5e(e,t,n){const r=Ci(t),i=n.encoding;let s=n.field,o;try{o=e.getSelectionComponent(r,t)}catch{return r}if(!i&&!s)s=o.project.items[0].field,o.project.items.length>1&&Ze(`A "field" or "encoding" must be specified when using a selection as a scale domain. Using "field": ${rt(s)}.`);else if(i&&!s){const a=o.project.items.filter(u=>u.channel===i);!a.length||a.length>1?(s=o.project.items[0].field,Ze((a.length?"Multiple ":"No ")+`matching ${rt(i)} encoding found for selection ${rt(n.param)}. Using "field": ${rt(s)}.`)):s=a[0].field}return`${o.name}[${rt(zc(s))}]`}function Atn(e,t){for(const[n,r]of vy(e.component.selection??{})){const i=e.getName(`lookup_${n}`);e.component.data.outputNodes[i]=r.materialized=new Xu(new sT(t,e,{param:n}),i,Ei.Lookup,e.component.data.outputNodeRefCounts)}}function ZM(e,t,n){return rA(t,r=>mt(r)?r:iJt(r)?R5e(e,r,n):G4e(r))}function Itn(e,t){if(e)return je(e)&&!jg(e)?e.map(n=>Lre(n,t)).join(", "):e}function PB(e,t,n,r){var i,s;e.encode??(e.encode={}),(i=e.encode)[t]??(i[t]={}),(s=e.encode[t]).update??(s.update={}),e.encode[t].update[n]=r}function rC(e,t,n,r={header:!1}){var f,d;const{disable:i,orient:s,scale:o,labelExpr:a,title:u,zindex:l,...c}=e.combine();if(!i){for(const h in c){const p=aZt[h],m=c[h];if(p&&p!==t&&p!=="both")delete c[h];else if(WR(m)){const{condition:g,...y}=m,v=pt(g),_=Wge[h];if(_){const{vgProp:w,part:E}=_,S=[...v.map(T=>{const{test:C,...A}=T;return{test:ZM(null,C),...A}}),y];PB(c,E,w,S),delete c[h]}else if(_===null){const w={signal:v.map(E=>{const{test:S,...T}=E;return`${ZM(null,S)} ? ${Rge(T)} : `}).join("")+Rge(y)};c[h]=w}}else if(Rt(m)){const g=Wge[h];if(g){const{vgProp:y,part:v}=g;PB(c,v,y,m),delete c[h]}}Hn(["labelAlign","labelBaseline"],h)&&c[h]===null&&delete c[h]}if(t==="grid"){if(!c.grid)return;if(c.encode){const{grid:h}=c.encode;c.encode={...h?{grid:h}:{}},jr(c.encode)&&delete c.encode}return{scale:o,orient:s,...c,domain:!1,labels:!1,aria:!1,maxExtent:0,minExtent:0,ticks:!1,zindex:fs(l,0)}}else{if(!r.header&&e.mainExtracted)return;if(a!==void 0){let p=a;(d=(f=c.encode)==null?void 0:f.labels)!=null&&d.update&&Rt(c.encode.labels.update.text)&&(p=bb(a,"datum.label",c.encode.labels.update.text.signal)),PB(c,"labels","text",{signal:p})}if(c.labelAlign===null&&delete c.labelAlign,c.encode){for(const p of xFe)e.hasAxisPart(p)||delete c.encode[p];jr(c.encode)&&delete c.encode}const h=Itn(u,n);return{scale:o,orient:s,grid:!1,...h?{title:h}:{},...c,...n.aria===!1?{aria:!1}:{},zindex:fs(l,0)}}}}function P5e(e){const{axes:t}=e.component,n=[];for(const r of dp)if(t[r]){for(const i of t[r])if(!i.get("disable")&&!i.get("gridScale")){const s=r==="x"?"height":"width",o=e.getSizeSignalRef(s).signal;s!==o&&n.push({name:s,update:o})}}return n}function ktn(e,t){const{x:n=[],y:r=[]}=e;return[...n.map(i=>rC(i,"grid",t)),...r.map(i=>rC(i,"grid",t)),...n.map(i=>rC(i,"main",t)),...r.map(i=>rC(i,"main",t))].filter(i=>i)}function b0e(e,t,n,r){return Object.assign.apply(null,[{},...e.map(i=>{if(i==="axisOrient"){const s=n==="x"?"bottom":"left",o=t[n==="x"?"axisBottom":"axisLeft"]||{},a=t[n==="x"?"axisTop":"axisRight"]||{},u=new Set([...Ye(o),...Ye(a)]),l={};for(const c of u.values())l[c]={signal:`${r.signal} === "${s}" ? ${$f(o[c])} : ${$f(a[c])}`};return l}return t[i]})])}function Rtn(e,t,n,r){const i=t==="band"?["axisDiscrete","axisBand"]:t==="point"?["axisDiscrete","axisPoint"]:Q4e(t)?["axisQuantitative"]:t==="time"||t==="utc"?["axisTemporal"]:[],s=e==="x"?"axisX":"axisY",o=Rt(n)?"axisOrient":`axis${MR(n)}`,a=[...i,...i.map(l=>s+l.substr(4))],u=["axis",o,s];return{vlOnlyAxisConfig:b0e(a,r,e,n),vgAxisConfig:b0e(u,r,e,n),axisConfigStyle:Ntn([...u,...a],r)}}function Ntn(e,t){var r;const n=[{}];for(const i of e){let s=(r=t[i])==null?void 0:r.style;if(s){s=pt(s);for(const o of s)n.push(t.style[o])}}return Object.assign.apply(null,n)}function xq(e,t,n,r={}){var s;const i=T4e(e,n,t);if(i!==void 0)return{configFrom:"style",configValue:i};for(const o of["vlOnlyAxisConfig","vgAxisConfig","axisConfigStyle"])if(((s=r[o])==null?void 0:s[e])!==void 0)return{configFrom:o,configValue:r[o][e]};return{}}const _0e={scale:({model:e,channel:t})=>e.scaleName(t),format:({format:e})=>e,formatType:({formatType:e})=>e,grid:({fieldOrDatumDef:e,axis:t,scaleType:n})=>t.grid??Ptn(n,e),gridScale:({model:e,channel:t})=>Dtn(e,t),labelAlign:({axis:e,labelAngle:t,orient:n,channel:r})=>e.labelAlign||O5e(t,n,r),labelAngle:({labelAngle:e})=>e,labelBaseline:({axis:e,labelAngle:t,orient:n,channel:r})=>e.labelBaseline||D5e(t,n,r),labelFlush:({axis:e,fieldOrDatumDef:t,channel:n})=>e.labelFlush??$tn(t.type,n),labelOverlap:({axis:e,fieldOrDatumDef:t,scaleType:n})=>e.labelOverlap??Mtn(t.type,n,et(t)&&!!t.timeUnit,et(t)?t.sort:void 0),orient:({orient:e})=>e,tickCount:({channel:e,model:t,axis:n,fieldOrDatumDef:r,scaleType:i})=>{const s=e==="x"?"width":e==="y"?"height":void 0,o=s?t.getSizeSignalRef(s):void 0;return n.tickCount??Ftn({fieldOrDatumDef:r,scaleType:i,size:o,values:n.values})},tickMinStep:jtn,title:({axis:e,model:t,channel:n})=>{if(e.title!==void 0)return e.title;const r=$5e(t,n);if(r!==void 0)return r;const i=t.typedFieldDef(n),s=n==="x"?"x2":"y2",o=t.fieldDef(s);return A4e(i?[Hge(i)]:[],et(o)?[Hge(o)]:[])},values:({axis:e,fieldOrDatumDef:t})=>Btn(e,t),zindex:({axis:e,fieldOrDatumDef:t,mark:n})=>e.zindex??Utn(n,t)};function Ptn(e,t){return!co(e)&&et(t)&&!oi(t==null?void 0:t.bin)&&!Co(t==null?void 0:t.bin)}function Dtn(e,t){const n=t==="x"?"y":"x";if(e.getScaleComponent(n))return e.scaleName(n)}function Otn(e,t,n,r,i){const s=t==null?void 0:t.labelAngle;if(s!==void 0)return Rt(s)?s:GI(s);{const{configValue:o}=xq("labelAngle",r,t==null?void 0:t.style,i);return o!==void 0?GI(o):n===Ai&&Hn([Cre,Tre],e.type)&&!(et(e)&&e.timeUnit)?270:void 0}}function Sq(e){return`(((${e.signal} % 360) + 360) % 360)`}function D5e(e,t,n,r){if(e!==void 0)if(n==="x"){if(Rt(e)){const i=Sq(e),s=Rt(t)?`(${t.signal} === "top")`:t==="top";return{signal:`(45 < ${i} && ${i} < 135) || (225 < ${i} && ${i} < 315) ? "middle" :(${i} <= 45 || 315 <= ${i}) === ${s} ? "bottom" : "top"`}}if(45<e&&e<135||225<e&&e<315)return"middle";if(Rt(t)){const i=e<=45||315<=e?"===":"!==";return{signal:`${t.signal} ${i} "top" ? "bottom" : "top"`}}return(e<=45||315<=e)==(t==="top")?"bottom":"top"}else{if(Rt(e)){const i=Sq(e),s=Rt(t)?`(${t.signal} === "left")`:t==="left";return{signal:`${i} <= 45 || 315 <= ${i} || (135 <= ${i} && ${i} <= 225) ? ${r?'"middle"':"null"} : (45 <= ${i} && ${i} <= 135) === ${s} ? "top" : "bottom"`}}if(e<=45||315<=e||135<=e&&e<=225)return r?"middle":null;if(Rt(t)){const i=45<=e&&e<=135?"===":"!==";return{signal:`${t.signal} ${i} "left" ? "top" : "bottom"`}}return(45<=e&&e<=135)==(t==="left")?"top":"bottom"}}function O5e(e,t,n){if(e===void 0)return;const r=n==="x",i=r?0:90,s=r?"bottom":"left";if(Rt(e)){const o=Sq(e),a=Rt(t)?`(${t.signal} === "${s}")`:t===s;return{signal:`(${i?`(${o} + 90)`:o} % 180 === 0) ? ${r?null:'"center"'} :(${i} < ${o} && ${o} < ${180+i}) === ${a} ? "left" : "right"`}}if((e+i)%180===0)return r?null:"center";if(Rt(t)){const o=i<e&&e<180+i?"===":"!==";return{signal:`${`${t.signal} ${o} "${s}"`} ? "left" : "right"`}}return(i<e&&e<180+i)==(t===s)?"left":"right"}function $tn(e,t){if(t==="x"&&Hn(["quantitative","temporal"],e))return!0}function Mtn(e,t,n,r){if(n&&!gt(r)||e!=="nominal"&&e!=="ordinal")return t==="log"||t==="symlog"?"greedy":!0}function Ltn(e){return e==="x"?"bottom":"left"}function Ftn({fieldOrDatumDef:e,scaleType:t,size:n,values:r}){var i;if(!r&&!co(t)&&t!=="log"){if(et(e)){if(oi(e.bin))return{signal:`ceil(${n.signal}/10)`};if(e.timeUnit&&Hn(["month","hours","day","quarter"],(i=lo(e.timeUnit))==null?void 0:i.unit))return}return{signal:`ceil(${n.signal}/40)`}}}function jtn({format:e,fieldOrDatumDef:t}){if(e==="d")return 1;if(et(t)){const{timeUnit:n}=t;if(n){const r=H4e(n);if(r)return{signal:r}}}}function $5e(e,t){const n=t==="x"?"x2":"y2",r=e.fieldDef(t),i=e.fieldDef(n),s=r?r.title:void 0,o=i?i.title:void 0;if(s&&o)return I4e(s,o);if(s)return s;if(o)return o;if(s!==void 0)return s;if(o!==void 0)return o}function Btn(e,t){const n=e.values;if(je(n))return EFe(t,n);if(Rt(n))return n}function Utn(e,t){return e==="rect"&&qM(t)?1:0}class zx extends Mr{clone(){return new zx(null,nn(this.transform))}constructor(t,n){super(t),this.transform=n,this._dependentFields=k5e(this.transform.calculate)}static parseAllForSortIndex(t,n){return n.forEachFieldDef((r,i)=>{if(g_(r)&&dFe(r.sort)){const{field:s,timeUnit:o}=r,a=r.sort,u=a.map((l,c)=>`${G4e({field:s,timeUnit:o,equal:l})} ? ${c} : `).join("")+a.length;t=new zx(t,{calculate:u,as:Vx(r,i,{forAs:!0})})}}),t}producedFields(){return new Set([this.transform.as])}dependentFields(){return this._dependentFields}assemble(){return{type:"formula",expr:this.transform.calculate,as:this.transform.as}}hash(){return`Calculate ${Vn(this.transform)}`}}function Vx(e,t,n){return at(e,{prefix:t,suffix:"sort_index",...n})}function w5(e,t){return Hn(["top","bottom"],t)?"column":Hn(["left","right"],t)||e==="row"?"row":"column"}function Hx(e,t,n,r){const i=r==="row"?n.headerRow:r==="column"?n.headerColumn:n.headerFacet;return fs((t||{})[e],i[e],n.header[e])}function E5(e,t,n,r){const i={};for(const s of e){const o=Hx(s,t||{},n,r);o!==void 0&&(i[s]=o)}return i}const iie=["row","column"],sie=["header","footer"];function ztn(e,t){const n=e.component.layoutHeaders[t].title,r=e.config?e.config:void 0,i=e.component.layoutHeaders[t].facetFieldDef?e.component.layoutHeaders[t].facetFieldDef:void 0,{titleAnchor:s,titleAngle:o,titleOrient:a}=E5(["titleAnchor","titleAngle","titleOrient"],i.header,r,t),u=w5(t,a),l=GI(o);return{name:`${t}-title`,type:"group",role:`${u}-title`,title:{text:n,...t==="row"?{orient:"left"}:{},style:"guide-title",...L5e(l,u),...M5e(u,l,s),...F5e(r,i,t,kZt,BFe)}}}function M5e(e,t,n="middle"){switch(n){case"start":return{align:"left"};case"end":return{align:"right"}}const r=O5e(t,e==="row"?"left":"top",e==="row"?"y":"x");return r?{align:r}:{}}function L5e(e,t){const n=D5e(e,t==="row"?"left":"top",t==="row"?"y":"x",!0);return n?{baseline:n}:{}}function Vtn(e,t){const n=e.component.layoutHeaders[t],r=[];for(const i of sie)if(n[i])for(const s of n[i]){const o=qtn(e,t,i,n,s);o!=null&&r.push(o)}return r}function Htn(e,t){const{sort:n}=e;return Eh(n)?{field:at(n,{expr:"datum"}),order:n.order??"ascending"}:je(n)?{field:Vx(e,t,{expr:"datum"}),order:"ascending"}:{field:at(e,{expr:"datum"}),order:n??"ascending"}}function Tq(e,t,n){const{format:r,formatType:i,labelAngle:s,labelAnchor:o,labelOrient:a,labelExpr:u}=E5(["format","formatType","labelAngle","labelAnchor","labelOrient","labelExpr"],e.header,n,t),l=Rre({fieldOrDatumDef:e,format:r,formatType:i,expr:"parent",config:n}).signal,c=w5(t,a);return{text:{signal:u?bb(bb(u,"datum.label",l),"datum.value",at(e,{expr:"parent"})):l},...t==="row"?{orient:"left"}:{},style:"guide-label",frame:"group",...L5e(s,c),...M5e(c,s,o),...F5e(n,e,t,RZt,UFe)}}function qtn(e,t,n,r,i){if(i){let s=null;const{facetFieldDef:o}=r,a=e.config?e.config:void 0;if(o&&i.labels){const{labelOrient:f}=E5(["labelOrient"],o.header,a,t);(t==="row"&&!Hn(["top","bottom"],f)||t==="column"&&!Hn(["left","right"],f))&&(s=Tq(o,t,a))}const u=$l(e)&&!VR(e.facet),l=i.axes,c=(l==null?void 0:l.length)>0;if(s||c){const f=t==="row"?"height":"width";return{name:e.getName(`${t}_${n}`),type:"group",role:`${t}-${n}`,...r.facetFieldDef?{from:{data:e.getName(`${t}_domain`)},sort:Htn(o,t)}:{},...c&&u?{from:{data:e.getName(`facet_domain_${t}`)}}:{},...s?{title:s}:{},...i.sizeSignal?{encode:{update:{[f]:i.sizeSignal}}}:{},...c?{axes:l}:{}}}}return null}const Wtn={column:{start:0,end:1},row:{start:1,end:0}};function Gtn(e,t){return Wtn[t][e]}function Ytn(e,t){const n={};for(const r of Ac){const i=e[r];if(i!=null&&i.facetFieldDef){const{titleAnchor:s,titleOrient:o}=E5(["titleAnchor","titleOrient"],i.facetFieldDef.header,t,r),a=w5(r,o),u=Gtn(s,a);u!==void 0&&(n[a]=u)}}return jr(n)?void 0:n}function F5e(e,t,n,r,i){const s={};for(const o of r){if(!i[o])continue;const a=Hx(o,t==null?void 0:t.header,e,n);a!==void 0&&(s[i[o]]=a)}return s}function oie(e){return[...BP(e,"width"),...BP(e,"height"),...BP(e,"childWidth"),...BP(e,"childHeight")]}function BP(e,t){const n=t==="width"?"x":"y",r=e.component.layoutSize.get(t);if(!r||r==="merged")return[];const i=e.getSizeSignalRef(t).signal;if(r==="step"){const s=e.getScaleComponent(n);if(s){const o=s.get("type"),a=s.get("range");if(co(o)&&rv(a)){const u=e.scaleName(n);return $l(e.parent)&&e.parent.component.resolve.scale[n]==="independent"?[w0e(u,a)]:[w0e(u,a),{name:i,update:j5e(u,s,`domain('${u}').length`)}]}}throw new Error("layout size is step although width/height is not step.")}else if(r=="container"){const s=i.endsWith("width"),o=s?"containerSize()[0]":"containerSize()[1]",a=yq(e.config.view,s?"width":"height"),u=`isFinite(${o}) ? ${o} : ${a}`;return[{name:i,init:u,on:[{update:u,events:"window:resize"}]}]}else return[{name:i,value:r}]}function w0e(e,t){const n=`${e}_step`;return Rt(t.step)?{name:n,update:t.step.signal}:{name:n,value:t.step}}function j5e(e,t,n){const r=t.get("type"),i=t.get("padding"),s=fs(t.get("paddingOuter"),i);let o=t.get("paddingInner");return o=r==="band"?o!==void 0?o:i:1,`bandspace(${n}, ${$f(o)}, ${$f(s)}) * ${e}_step`}function B5e(e){return e==="childWidth"?"width":e==="childHeight"?"height":e}function U5e(e,t){return Ye(e).reduce((n,r)=>{const i=e[r];return{...n,...iT(t,i,r,s=>hi(s.value))}},{})}function z5e(e,t){if($l(t))return e==="theta"?"independent":"shared";if(uT(t))return"shared";if(hie(t))return ds(e)||e==="theta"||e==="radius"?"independent":"shared";throw new Error("invalid model type for resolve")}function aie(e,t){const n=e.scale[t],r=ds(t)?"axis":"legend";return n==="independent"?(e[r][t]==="shared"&&Ze(CQt(t)),"independent"):e[r][t]||"shared"}const Ktn={...DZt,disable:1,labelExpr:1,selections:1,opacity:1,shape:1,stroke:1,fill:1,size:1,strokeWidth:1,strokeDash:1,encode:1},V5e=Ye(Ktn);class Xtn extends mg{}const E0e={symbols:Qtn,gradient:Jtn,labels:Ztn,entries:enn};function Qtn(e,{fieldOrDatumDef:t,model:n,channel:r,legendCmpt:i,legendType:s}){if(s!=="symbol")return;const{markDef:o,encoding:a,config:u,mark:l}=n,c=o.filled&&l!=="trail";let f={...LXt({},n,MJt),...m5e(n,{filled:c})};const d=i.get("symbolOpacity")??u.legend.symbolOpacity,h=i.get("symbolFillColor")??u.legend.symbolFillColor,p=i.get("symbolStrokeColor")??u.legend.symbolStrokeColor,m=d===void 0?H5e(a.opacity)??o.opacity:void 0;if(f.fill){if(r==="fill"||c&&r===sl)delete f.fill;else if(f.fill.field)h?delete f.fill:(f.fill=hi(u.legend.symbolBaseFillColor??"black"),f.fillOpacity=hi(m??1));else if(je(f.fill)){const g=Cq(a.fill??a.color)??o.fill??(c&&o.color);g&&(f.fill=hi(g))}}if(f.stroke){if(r==="stroke"||!c&&r===sl)delete f.stroke;else if(f.stroke.field||p)delete f.stroke;else if(je(f.stroke)){const g=fs(Cq(a.stroke||a.color),o.stroke,c?o.color:void 0);g&&(f.stroke={value:g})}}if(r!==dg){const g=et(t)&&W5e(n,i,t);g?f.opacity=[{test:g,...hi(m??1)},hi(u.legend.unselectedOpacity)]:m&&(f.opacity=hi(m))}return f={...f,...e},jr(f)?void 0:f}function Jtn(e,{model:t,legendType:n,legendCmpt:r}){if(n!=="gradient")return;const{config:i,markDef:s,encoding:o}=t;let a={};const l=(r.get("gradientOpacity")??i.legend.gradientOpacity)===void 0?H5e(o.opacity)||s.opacity:void 0;return l&&(a.opacity=hi(l)),a={...a,...e},jr(a)?void 0:a}function Ztn(e,{fieldOrDatumDef:t,model:n,channel:r,legendCmpt:i}){const s=n.legend(r)||{},o=n.config,a=et(t)?W5e(n,i,t):void 0,u=a?[{test:a,value:1},{value:o.legend.unselectedOpacity}]:void 0,{format:l,formatType:c}=s;let f;xb(c)?f=Lf({fieldOrDatumDef:t,field:"datum.value",format:l,formatType:c,config:o}):l===void 0&&c===void 0&&o.customFormatTypes&&(t.type==="quantitative"&&o.numberFormatType?f=Lf({fieldOrDatumDef:t,field:"datum.value",format:o.numberFormat,formatType:o.numberFormatType,config:o}):t.type==="temporal"&&o.timeFormatType&&et(t)&&t.timeUnit===void 0&&(f=Lf({fieldOrDatumDef:t,field:"datum.value",format:o.timeFormat,formatType:o.timeFormatType,config:o})));const d={...u?{opacity:u}:{},...f?{text:f}:{},...e};return jr(d)?void 0:d}function enn(e,{legendCmpt:t}){const n=t.get("selections");return n!=null&&n.length?{...e,fill:{value:"transparent"}}:e}function H5e(e){return q5e(e,(t,n)=>Math.max(t,n.value))}function Cq(e){return q5e(e,(t,n)=>fs(t,n.value))}function q5e(e,t){if(KJt(e))return pt(e.condition).reduce(t,e.value);if(id(e))return e.value}function W5e(e,t,n){const r=t.get("selections");if(!(r!=null&&r.length))return;const i=rt(n.field);return r.map(s=>`(!length(data(${rt(Ci(s)+Cb)})) || (${s}[${i}] && indexof(${s}[${i}], datum.value) >= 0))`).join(" || ")}const x0e={direction:({direction:e})=>e,format:({fieldOrDatumDef:e,legend:t,config:n})=>{const{format:r,formatType:i}=t;return rFe(e,e.type,r,i,n,!1)},formatType:({legend:e,fieldOrDatumDef:t,scaleType:n})=>{const{formatType:r}=e;return iFe(r,t,n)},gradientLength:e=>{const{legend:t,legendConfig:n}=e;return t.gradientLength??n.gradientLength??ann(e)},labelOverlap:({legend:e,legendConfig:t,scaleType:n})=>e.labelOverlap??t.labelOverlap??unn(n),symbolType:({legend:e,markDef:t,channel:n,encoding:r})=>e.symbolType??nnn(t.type,n,r.shape,t.shape),title:({fieldOrDatumDef:e,config:t})=>EE(e,t,{allowDisabling:!0}),type:({legendType:e,scaleType:t,channel:n})=>{if(wE(n)&&Mf(t)){if(e==="gradient")return}else if(e==="symbol")return;return e},values:({fieldOrDatumDef:e,legend:t})=>tnn(t,e)};function tnn(e,t){const n=e.values;if(je(n))return EFe(t,n);if(Rt(n))return n}function nnn(e,t,n,r){if(t!=="shape"){const i=Cq(n)??r;if(i)return i}switch(e){case"bar":case"rect":case"image":case"square":return"square";case"line":case"trail":case"rule":return"stroke";case"arc":case"point":case"circle":case"tick":case"geoshape":case"area":case"text":return"circle"}}function rnn(e){const{legend:t}=e;return fs(t.type,inn(e))}function inn({channel:e,timeUnit:t,scaleType:n}){if(wE(e)){if(Hn(["quarter","month","day"],t))return"symbol";if(Mf(n))return"gradient"}return"symbol"}function snn({legendConfig:e,legendType:t,orient:n,legend:r}){return r.direction??e[t?"gradientDirection":"symbolDirection"]??onn(n,t)}function onn(e,t){switch(e){case"top":case"bottom":return"horizontal";case"left":case"right":case"none":case void 0:return;default:return t==="gradient"?"horizontal":void 0}}function ann({legendConfig:e,model:t,direction:n,orient:r,scaleType:i}){const{gradientHorizontalMaxLength:s,gradientHorizontalMinLength:o,gradientVerticalMaxLength:a,gradientVerticalMinLength:u}=e;if(Mf(i))return n==="horizontal"?r==="top"||r==="bottom"?S0e(t,"width",o,s):o:S0e(t,"height",u,a)}function S0e(e,t,n,r){return{signal:`clamp(${e.getSizeSignalRef(t).signal}, ${n}, ${r})`}}function unn(e){if(Hn(["quantile","threshold","log","symlog"],e))return"greedy"}function G5e(e){const t=Wi(e)?lnn(e):hnn(e);return e.component.legends=t,t}function lnn(e){const{encoding:t}=e,n={};for(const r of[sl,...VFe]){const i=Ms(t[r]);!i||!e.getScaleComponent(r)||r===ol&&et(i)&&i.type===rT||(n[r]=dnn(e,r))}return n}function cnn(e,t){const n=e.scaleName(t);if(e.mark==="trail"){if(t==="color")return{stroke:n};if(t==="size")return{strokeWidth:n}}return t==="color"?e.markDef.filled?{fill:n}:{stroke:n}:{[t]:n}}function fnn(e,t,n,r){switch(t){case"disable":return n!==void 0;case"values":return!!(n!=null&&n.values);case"title":if(t==="title"&&e===(r==null?void 0:r.title))return!0}return e===(n||{})[t]}function dnn(e,t){var w;let n=e.legend(t);const{markDef:r,encoding:i,config:s}=e,o=s.legend,a=new Xtn({},cnn(e,t));wtn(e,t,a);const u=n!==void 0?!n:o.disable;if(a.set("disable",u,n!==void 0),u)return a;n=n||{};const l=e.getScaleComponent(t).get("type"),c=Ms(i[t]),f=et(c)?(w=lo(c.timeUnit))==null?void 0:w.unit:void 0,d=n.orient||s.legend.orient||"right",h=rnn({legend:n,channel:t,timeUnit:f,scaleType:l}),p=snn({legend:n,legendType:h,orient:d,legendConfig:o}),m={legend:n,channel:t,model:e,markDef:r,encoding:i,fieldOrDatumDef:c,legendConfig:o,config:s,scaleType:l,orient:d,legendType:h,direction:p};for(const E of V5e){if(h==="gradient"&&E.startsWith("symbol")||h==="symbol"&&E.startsWith("gradient"))continue;const S=E in x0e?x0e[E](m):n[E];if(S!==void 0){const T=fnn(S,E,n,e.fieldDef(t));(T||s.legend[E]===void 0)&&a.set(E,S,T)}}const g=(n==null?void 0:n.encoding)??{},y=a.get("selections"),v={},_={fieldOrDatumDef:c,model:e,channel:t,legendCmpt:a,legendType:h};for(const E of["labels","legend","title","symbols","gradient","entries"]){const S=U5e(g[E]??{},e),T=E in E0e?E0e[E](S,_):S;T!==void 0&&!jr(T)&&(v[E]={...y!=null&&y.length&&et(c)?{name:`${Ci(c.field)}_legend_${E}`}:{},...y!=null&&y.length?{interactive:!!y}:{},update:T})}return jr(v)||a.set("encode",v,!!(n!=null&&n.encoding)),a}function hnn(e){const{legends:t,resolve:n}=e.component;for(const r of e.children){G5e(r);for(const i of Ye(r.component.legends))n.legend[i]=aie(e.component.resolve,i),n.legend[i]==="shared"&&(t[i]=Y5e(t[i],r.component.legends[i]),t[i]||(n.legend[i]="independent",delete t[i]))}for(const r of Ye(t))for(const i of e.children)i.component.legends[r]&&n.legend[r]==="shared"&&delete i.component.legends[r];return t}function Y5e(e,t){var s,o,a,u;if(!e)return t.clone();const n=e.getWithExplicit("orient"),r=t.getWithExplicit("orient");if(n.explicit&&r.explicit&&n.value!==r.value)return;let i=!1;for(const l of V5e){const c=wy(e.getWithExplicit(l),t.getWithExplicit(l),l,"legend",(f,d)=>{switch(l){case"symbolType":return pnn(f,d);case"title":return k4e(f,d);case"type":return i=!0,pl("symbol")}return g5(f,d,l,"legend")});e.setWithExplicit(l,c)}return i&&((o=(s=e.implicit)==null?void 0:s.encode)!=null&&o.gradient&&jM(e.implicit,["encode","gradient"]),(u=(a=e.explicit)==null?void 0:a.encode)!=null&&u.gradient&&jM(e.explicit,["encode","gradient"])),e}function pnn(e,t){return t.value==="circle"?t:e}function mnn(e,t,n,r){var i,s;e.encode??(e.encode={}),(i=e.encode)[t]??(i[t]={}),(s=e.encode[t]).update??(s.update={}),e.encode[t].update[n]=r}function K5e(e){const t=e.component.legends,n={};for(const i of Ye(t)){const s=e.getScaleComponent(i),o=Br(s.get("domains"));if(n[o])for(const a of n[o])Y5e(a,t[i])||n[o].push(t[i]);else n[o]=[t[i].clone()]}return Mo(n).flat().map(i=>gnn(i,e.config)).filter(i=>i!==void 0)}function gnn(e,t){var o,a,u;const{disable:n,labelExpr:r,selections:i,...s}=e.combine();if(!n){if(t.aria===!1&&s.aria==null&&(s.aria=!1),(o=s.encode)!=null&&o.symbols){const l=s.encode.symbols.update;l.fill&&l.fill.value!=="transparent"&&!l.stroke&&!s.stroke&&(l.stroke={value:"transparent"});for(const c of VFe)s[c]&&delete l[c]}if(s.title||delete s.title,r!==void 0){let l=r;(u=(a=s.encode)==null?void 0:a.labels)!=null&&u.update&&Rt(s.encode.labels.update.text)&&(l=bb(r,"datum.label",s.encode.labels.update.text.signal)),mnn(s,"labels","text",{signal:l})}return s}}function ynn(e){return uT(e)||hie(e)?vnn(e):X5e(e)}function vnn(e){return e.children.reduce((t,n)=>t.concat(n.assembleProjections()),X5e(e))}function X5e(e){const t=e.component.projection;if(!t||t.merged)return[];const n=t.combine(),{name:r}=n;if(t.data){const i={signal:`[${t.size.map(o=>o.signal).join(", ")}]`},s=t.data.reduce((o,a)=>{const u=Rt(a)?a.signal:`data('${e.lookupDataSource(a)}')`;return Hn(o,u)||o.push(u),o},[]);if(s.length<=0)throw new Error("Projection's fit didn't find any data sources");return[{name:r,size:i,fit:{signal:s.length>1?`[${s.join(", ")}]`:s[0]},...n}]}else return[{name:r,translate:{signal:"[width / 2, height / 2]"},...n}]}const bnn=["type","clipAngle","clipExtent","center","rotate","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];class Q5e extends mg{constructor(t,n,r,i){super({...n},{name:t}),this.specifiedProjection=n,this.size=r,this.data=i,this.merged=!1}get isFit(){return!!this.data}}function J5e(e){e.component.projection=Wi(e)?_nn(e):xnn(e)}function _nn(e){if(e.hasProjection){const t=Ru(e.specifiedProjection),n=!(t&&(t.scale!=null||t.translate!=null)),r=n?[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]:void 0,i=n?wnn(e):void 0,s=new Q5e(e.projectionName(!0),{...Ru(e.config.projection),...t},r,i);return s.get("type")||s.set("type","equalEarth",!1),s}}function wnn(e){const t=[],{encoding:n}=e;for(const r of[[vd,yd],[Vc,bd]])(Ms(n[r[0]])||Ms(n[r[1]]))&&t.push({signal:e.getName(`geojson_${t.length}`)});return e.channelHasField(ol)&&e.typedFieldDef(ol).type===rT&&t.push({signal:e.getName(`geojson_${t.length}`)}),t.length===0&&t.push(e.requestDataName(Ei.Main)),t}function Enn(e,t){const n=ere(bnn,i=>!!(!jt(e.explicit,i)&&!jt(t.explicit,i)||jt(e.explicit,i)&&jt(t.explicit,i)&&Rl(e.get(i),t.get(i))));if(Rl(e.size,t.size)){if(n)return e;if(Rl(e.explicit,{}))return t;if(Rl(t.explicit,{}))return e}return null}function xnn(e){if(e.children.length===0)return;let t;for(const r of e.children)J5e(r);const n=ere(e.children,r=>{const i=r.component.projection;if(i)if(t){const s=Enn(t,i);return s&&(t=s),!!s}else return t=i,!0;else return!0});if(t&&n){const r=e.projectionName(!0),i=new Q5e(r,t.specifiedProjection,t.size,nn(t.data));for(const s of e.children){const o=s.component.projection;o&&(o.isFit&&i.data.push(...s.component.projection.data),s.renameProjection(o.get("name"),r),o.merged=!0)}return i}}function Snn(e,t,n,r){if(qR(t,n)){const i=Wi(e)?e.axis(n)??e.legend(n)??{}:{},s=at(t,{expr:"datum"}),o=at(t,{expr:"datum",binSuffix:"end"});return{formulaAs:at(t,{binSuffix:"range",forAs:!0}),formula:zR(s,o,i.format,i.formatType,r)}}return{}}function Z5e(e,t){return`${w4e(e)}_${t}`}function Tnn(e,t){return{signal:e.getName(`${t}_bins`),extentSignal:e.getName(`${t}_extent`)}}function uie(e,t,n){const r=c5(n,void 0)??{},i=Z5e(r,t);return e.getName(`${i}_bins`)}function Cnn(e){return"as"in e}function T0e(e,t,n){let r,i;Cnn(e)?r=mt(e.as)?[e.as,`${e.as}_end`]:[e.as[0],e.as[1]]:r=[at(e,{forAs:!0}),at(e,{binSuffix:"end",forAs:!0})];const s={...c5(t,void 0)},o=Z5e(s,e.field),{signal:a,extentSignal:u}=Tnn(n,o);if(ZF(s.extent)){const c=s.extent;i=N5e(n,c.param,c),delete s.extent}const l={bin:s,field:e.field,as:[r],...a?{signal:a}:{},...u?{extentSignal:u}:{},...i?{span:i}:{}};return{key:o,binComponent:l}}class Sh extends Mr{clone(){return new Sh(null,nn(this.bins))}constructor(t,n){super(t),this.bins=n}static makeFromEncoding(t,n){const r=n.reduceFieldDef((i,s,o)=>{if(iu(s)&&oi(s.bin)){const{key:a,binComponent:u}=T0e(s,s.bin,n);i[a]={...u,...i[a],...Snn(n,s,o,n.config)}}return i},{});return jr(r)?null:new Sh(t,r)}static makeFromTransform(t,n,r){const{key:i,binComponent:s}=T0e(n,n.bin,r);return new Sh(t,{[i]:s})}merge(t,n){for(const r of Ye(t.bins))r in this.bins?(n(t.bins[r].signal,this.bins[r].signal),this.bins[r].as=oh([...this.bins[r].as,...t.bins[r].as],Vn)):this.bins[r]=t.bins[r];for(const r of t.children)t.removeChild(r),r.parent=this;t.remove()}producedFields(){return new Set(Mo(this.bins).map(t=>t.as).flat(2))}dependentFields(){return new Set(Mo(this.bins).map(t=>t.field))}hash(){return`Bin ${Vn(this.bins)}`}assemble(){return Mo(this.bins).flatMap(t=>{const n=[],[r,...i]=t.as,{extent:s,...o}=t.bin,a={type:"bin",field:zc(t.field),as:r,signal:t.signal,...ZF(s)?{extent:null}:{extent:s},...t.span?{span:{signal:`span(${t.span})`}}:{},...o};!s&&t.extentSignal&&(n.push({type:"extent",field:zc(t.field),signal:t.extentSignal}),a.extent={signal:t.extentSignal}),n.push(a);for(const u of i)for(let l=0;l<2;l++)n.push({type:"formula",expr:at({field:r[l]},{expr:"datum"}),as:u[l]});return t.formula&&n.push({type:"formula",expr:t.formula,as:t.formulaAs}),n})}}function Ann(e,t,n,r){var s;const i=Wi(r)?r.encoding[fp(t)]:void 0;if(iu(n)&&Wi(r)&&pFe(n,i,r.markDef,r.config)){e.add(at(n,{})),e.add(at(n,{suffix:"end"}));const{mark:o,markDef:a,config:u}=r,l=_y({fieldDef:n,markDef:a,config:u});YI(o)&&l!==.5&&ds(t)&&(e.add(at(n,{suffix:y5})),e.add(at(n,{suffix:v5}))),n.bin&&qR(n,t)&&e.add(at(n,{binSuffix:"range"}))}else if(f4e(t)){const o=c4e(t);e.add(r.getName(o))}else e.add(at(n));return g_(n)&&yJt((s=n.scale)==null?void 0:s.range)&&e.add(n.scale.range.field),e}function Inn(e,t){for(const n of Ye(t)){const r=t[n];for(const i of Ye(r))n in e?e[n][i]=new Set([...e[n][i]??[],...r[i]]):e[n]={[i]:r[i]}}}class Wf extends Mr{clone(){return new Wf(null,new Set(this.dimensions),nn(this.measures))}constructor(t,n,r){super(t),this.dimensions=n,this.measures=r}get groupBy(){return this.dimensions}static makeFromEncoding(t,n){let r=!1;n.forEachFieldDef(o=>{o.aggregate&&(r=!0)});const i={},s=new Set;return!r||(n.forEachFieldDef((o,a)=>{const{aggregate:u,field:l}=o;if(u)if(u==="count")i["*"]??(i["*"]={}),i["*"].count=new Set([at(o,{forAs:!0})]);else{if(Um(u)||nv(u)){const c=Um(u)?"argmin":"argmax",f=u[c];i[f]??(i[f]={}),i[f][c]=new Set([at({op:c,field:f},{forAs:!0})])}else i[l]??(i[l]={}),i[l][u]=new Set([at(o,{forAs:!0})]);hg(a)&&n.scaleDomain(a)==="unaggregated"&&(i[l]??(i[l]={}),i[l].min=new Set([at({field:l,aggregate:"min"},{forAs:!0})]),i[l].max=new Set([at({field:l,aggregate:"max"},{forAs:!0})]))}else Ann(s,a,o,n)}),s.size+Ye(i).length===0)?null:new Wf(t,s,i)}static makeFromTransform(t,n){const r=new Set,i={};for(const s of n.aggregate){const{op:o,field:a,as:u}=s;o&&(o==="count"?(i["*"]??(i["*"]={}),i["*"].count=new Set([u||at(s,{forAs:!0})])):(i[a]??(i[a]={}),i[a][o]=new Set([u||at(s,{forAs:!0})])))}for(const s of n.groupby??[])r.add(s);return r.size+Ye(i).length===0?null:new Wf(t,r,i)}merge(t){return n4e(this.dimensions,t.dimensions)?(Inn(this.measures,t.measures),!0):(zQt("different dimensions, cannot merge"),!1)}addDimensions(t){t.forEach(this.dimensions.add,this.dimensions)}dependentFields(){return new Set([...this.dimensions,...Ye(this.measures)])}producedFields(){const t=new Set;for(const n of Ye(this.measures))for(const r of Ye(this.measures[n])){const i=this.measures[n][r];i.size===0?t.add(`${r}_${n}`):i.forEach(t.add,t)}return t}hash(){return`Aggregate ${Vn({dimensions:this.dimensions,measures:this.measures})}`}assemble(){const t=[],n=[],r=[];for(const s of Ye(this.measures))for(const o of Ye(this.measures[s]))for(const a of this.measures[s][o])r.push(a),t.push(o),n.push(s==="*"?null:zc(s));return{type:"aggregate",groupby:[...this.dimensions].map(zc),ops:t,fields:n,as:r}}}class oT extends Mr{constructor(t,n,r,i){super(t),this.model=n,this.name=r,this.data=i;for(const s of Ac){const o=n.facet[s];if(o){const{bin:a,sort:u}=o;this[s]={name:n.getName(`${s}_domain`),fields:[at(o),...oi(a)?[at(o,{binSuffix:"end"})]:[]],...Eh(u)?{sortField:u}:je(u)?{sortIndexField:Vx(o,s)}:{}}}}this.childModel=n.child}hash(){let t="Facet";for(const n of Ac)this[n]&&(t+=` ${n.charAt(0)}:${Vn(this[n])}`);return t}get fields(){var n;const t=[];for(const r of Ac)(n=this[r])!=null&&n.fields&&t.push(...this[r].fields);return t}dependentFields(){const t=new Set(this.fields);for(const n of Ac)this[n]&&(this[n].sortField&&t.add(this[n].sortField.field),this[n].sortIndexField&&t.add(this[n].sortIndexField));return t}producedFields(){return new Set}getSource(){return this.name}getChildIndependentFieldsWithStep(){const t={};for(const n of dp){const r=this.childModel.component.scales[n];if(r&&!r.merged){const i=r.get("type"),s=r.get("range");if(co(i)&&rv(s)){const o=x5(this.childModel,n),a=die(o);a?t[n]=a:Ze(hre(n))}}}return t}assembleRowColumnHeaderData(t,n,r){const i={row:"y",column:"x",facet:void 0}[t],s=[],o=[],a=[];i&&r&&r[i]&&(n?(s.push(`distinct_${r[i]}`),o.push("max")):(s.push(r[i]),o.push("distinct")),a.push(`distinct_${r[i]}`));const{sortField:u,sortIndexField:l}=this[t];if(u){const{op:c=o5,field:f}=u;s.push(f),o.push(c),a.push(at(u,{forAs:!0}))}else l&&(s.push(l),o.push("max"),a.push(l));return{name:this[t].name,source:n??this.data,transform:[{type:"aggregate",groupby:this[t].fields,...s.length?{fields:s,ops:o,as:a}:{}}]}}assembleFacetHeaderData(t){var u;const{columns:n}=this.model.layout,{layoutHeaders:r}=this.model.component,i=[],s={};for(const l of iie){for(const c of sie){const f=(r[l]&&r[l][c])??[];for(const d of f)if(((u=d.axes)==null?void 0:u.length)>0){s[l]=!0;break}}if(s[l]){const c=`length(data("${this.facet.name}"))`,f=l==="row"?n?{signal:`ceil(${c} / ${n})`}:1:n?{signal:`min(${c}, ${n})`}:{signal:c};i.push({name:`${this.facet.name}_${l}`,transform:[{type:"sequence",start:0,stop:f}]})}}const{row:o,column:a}=s;return(o||a)&&i.unshift(this.assembleRowColumnHeaderData("facet",null,t)),i}assemble(){const t=[];let n=null;const r=this.getChildIndependentFieldsWithStep(),{column:i,row:s,facet:o}=this;if(i&&s&&(r.x||r.y)){n=`cross_${this.column.name}_${this.row.name}`;const a=[].concat(r.x??[],r.y??[]),u=a.map(()=>"distinct");t.push({name:n,source:this.data,transform:[{type:"aggregate",groupby:this.fields,fields:a,ops:u}]})}for(const a of[dm,fm])this[a]&&t.push(this.assembleRowColumnHeaderData(a,n,r));if(o){const a=this.assembleFacetHeaderData(r);a&&t.push(...a)}return t}}function C0e(e){return e.startsWith("'")&&e.endsWith("'")||e.startsWith('"')&&e.endsWith('"')?e.slice(1,-1):e}function knn(e,t){const n=rre(e);if(t==="number")return`toNumber(${n})`;if(t==="boolean")return`toBoolean(${n})`;if(t==="string")return`toString(${n})`;if(t==="date")return`toDate(${n})`;if(t==="flatten")return n;if(t.startsWith("date:")){const r=C0e(t.slice(5,t.length));return`timeParse(${n},'${r}')`}else if(t.startsWith("utc:")){const r=C0e(t.slice(4,t.length));return`utcParse(${n},'${r}')`}else return Ze(QXt(t)),null}function Rnn(e){const t={};return pO(e.filter,n=>{if(W4e(n)){let r=null;yre(n)?r=El(n.equal):bre(n)?r=El(n.lte):vre(n)?r=El(n.lt):_re(n)?r=El(n.gt):wre(n)?r=El(n.gte):Ere(n)?r=n.range[0]:xre(n)&&(r=(n.oneOf??n.in)[0]),r&&(h_(r)?t[n.field]="date":lr(r)?t[n.field]="number":mt(r)&&(t[n.field]="string")),n.timeUnit&&(t[n.field]="date")}}),t}function Nnn(e){const t={};function n(r){jx(r)?t[r.field]="date":r.type==="quantitative"&&IXt(r.aggregate)?t[r.field]="number":Px(r.field)>1?r.field in t||(t[r.field]="flatten"):g_(r)&&Eh(r.sort)&&Px(r.sort.field)>1&&(r.sort.field in t||(t[r.sort.field]="flatten"))}if((Wi(e)||$l(e))&&e.forEachFieldDef((r,i)=>{if(iu(r))n(r);else{const s=f_(i),o=e.fieldDef(s);n({...r,type:o.type})}}),Wi(e)){const{mark:r,markDef:i,encoding:s}=e;if(m_(r)&&!e.encoding.order){const o=i.orient==="horizontal"?"y":"x",a=s[o];et(a)&&a.type==="quantitative"&&!(a.field in t)&&(t[a.field]="number")}}return t}function Pnn(e){const t={};if(Wi(e)&&e.component.selection)for(const n of Ye(e.component.selection)){const r=e.component.selection[n];for(const i of r.project.items)!i.channel&&Px(i.field)>1&&(t[i.field]="flatten")}return t}class ma extends Mr{clone(){return new ma(null,nn(this._parse))}constructor(t,n){super(t),this._parse=n}hash(){return`Parse ${Vn(this._parse)}`}static makeExplicit(t,n,r){var o;let i={};const s=n.data;return!M0(s)&&((o=s==null?void 0:s.format)!=null&&o.parse)&&(i=s.format.parse),this.makeWithAncestors(t,i,{},r)}static makeWithAncestors(t,n,r,i){for(const a of Ye(r)){const u=i.getWithExplicit(a);u.value!==void 0&&(u.explicit||u.value===r[a]||u.value==="derived"||r[a]==="flatten"?delete r[a]:Ze(Mge(a,r[a],u.value)))}for(const a of Ye(n)){const u=i.get(a);u!==void 0&&(u===n[a]?delete n[a]:Ze(Mge(a,n[a],u)))}const s=new mg(n,r);i.copyAll(s);const o={};for(const a of Ye(s.combine())){const u=s.get(a);u!==null&&(o[a]=u)}return Ye(o).length===0||i.parseNothing?null:new ma(t,o)}get parse(){return this._parse}merge(t){this._parse={...this._parse,...t.parse},t.remove()}assembleFormatParse(){const t={};for(const n of Ye(this._parse)){const r=this._parse[n];Px(n)===1&&(t[n]=r)}return t}producedFields(){return new Set(Ye(this._parse))}dependentFields(){return new Set(Ye(this._parse))}assembleTransforms(t=!1){return Ye(this._parse).filter(n=>t?Px(n)>1:!0).map(n=>{const r=knn(n,this._parse[n]);return r?{type:"formula",expr:r,as:tT(n)}:null}).filter(n=>n!==null)}}class Sy extends Mr{clone(){return new Sy(null)}constructor(t){super(t)}dependentFields(){return new Set}producedFields(){return new Set([sd])}hash(){return"Identifier"}assemble(){return{type:"identifier",as:sd}}}class YR extends Mr{clone(){return new YR(null,this.params)}constructor(t,n){super(t),this.params=n}dependentFields(){return new Set}producedFields(){}hash(){return`Graticule ${Vn(this.params)}`}assemble(){return{type:"graticule",...this.params===!0?{}:this.params}}}class KR extends Mr{clone(){return new KR(null,this.params)}constructor(t,n){super(t),this.params=n}dependentFields(){return new Set}producedFields(){return new Set([this.params.as??"data"])}hash(){return`Hash ${Vn(this.params)}`}assemble(){return{type:"sequence",...this.params}}}class Ab extends Mr{constructor(t){super(null),t??(t={name:"source"});let n;if(M0(t)||(n=t.format?{...Yu(t.format,["parse"])}:{}),KI(t))this._data={values:t.values};else if(Bx(t)){if(this._data={url:t.url},!n.type){let r=/(?:\.([^.]+))?$/.exec(t.url)[1];Hn(["json","csv","tsv","dsv","topojson"],r)||(r="json"),n.type=r}}else a5e(t)?this._data={values:[{type:"Sphere"}]}:(s5e(t)||M0(t))&&(this._data={});this._generator=M0(t),t.name&&(this._name=t.name),n&&!jr(n)&&(this._data.format=n)}dependentFields(){return new Set}producedFields(){}get data(){return this._data}hasName(){return!!this._name}get isGenerator(){return this._generator}get dataName(){return this._name}set dataName(t){this._name=t}set parent(t){throw new Error("Source nodes have to be roots.")}remove(){throw new Error("Source nodes are roots and cannot be removed.")}hash(){throw new Error("Cannot hash sources")}assemble(){return{name:this._name,...this._data,transform:[]}}}var A0e=function(e,t,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(e,n):i?i.value=n:t.set(e,n),n},Dnn=function(e,t,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(e):r?r.value:t.get(e)},iC;function lie(e){return e instanceof Ab||e instanceof YR||e instanceof KR}class cie{constructor(){iC.set(this,void 0),A0e(this,iC,!1,"f")}setModified(){A0e(this,iC,!0,"f")}get modifiedFlag(){return Dnn(this,iC,"f")}}iC=new WeakMap;class y_ extends cie{getNodeDepths(t,n,r){r.set(t,n);for(const i of t.children)this.getNodeDepths(i,n+1,r);return r}optimize(t){const r=[...this.getNodeDepths(t,0,new Map).entries()].sort((i,s)=>s[1]-i[1]);for(const i of r)this.run(i[0]);return this.modifiedFlag}}class fie extends cie{optimize(t){this.run(t);for(const n of t.children)this.optimize(n);return this.modifiedFlag}}class Onn extends fie{mergeNodes(t,n){const r=n.shift();for(const i of n)t.removeChild(i),i.parent=r,i.remove()}run(t){const n=t.children.map(i=>i.hash()),r={};for(let i=0;i<n.length;i++)r[n[i]]===void 0?r[n[i]]=[t.children[i]]:r[n[i]].push(t.children[i]);for(const i of Ye(r))r[i].length>1&&(this.setModified(),this.mergeNodes(t,r[i]))}}class $nn extends fie{constructor(t){super(),this.requiresSelectionId=t&&rie(t)}run(t){t instanceof Sy&&(this.requiresSelectionId&&(lie(t.parent)||t.parent instanceof Wf||t.parent instanceof ma)||(this.setModified(),t.remove()))}}class Mnn extends cie{optimize(t){return this.run(t,new Set),this.modifiedFlag}run(t,n){let r=new Set;t instanceof xh&&(r=t.producedFields(),tre(r,n)&&(this.setModified(),t.removeFormulas(n),t.producedFields.length===0&&t.remove()));for(const i of t.children)this.run(i,new Set([...n,...r]))}}class Lnn extends fie{constructor(){super()}run(t){t instanceof Xu&&!t.isRequired()&&(this.setModified(),t.remove())}}class Fnn extends y_{run(t){if(!lie(t)&&!(t.numChildren()>1)){for(const n of t.children)if(n instanceof ma)if(t instanceof ma)this.setModified(),t.merge(n);else{if(nre(t.producedFields(),n.dependentFields()))continue;this.setModified(),n.swapWithParent()}}}}class jnn extends y_{run(t){const n=[...t.children],r=t.children.filter(i=>i instanceof ma);if(t.numChildren()>1&&r.length>=1){const i={},s=new Set;for(const o of r){const a=o.parse;for(const u of Ye(a))u in i?i[u]!==a[u]&&s.add(u):i[u]=a[u]}for(const o of s)delete i[o];if(!jr(i)){this.setModified();const o=new ma(t,i);for(const a of n){if(a instanceof ma)for(const u of Ye(i))delete a.parse[u];t.removeChild(a),a.parent=o,a instanceof ma&&Ye(a.parse).length===0&&a.remove()}}}}}class Bnn extends y_{run(t){t instanceof Xu||t.numChildren()>0||t instanceof oT||t instanceof Ab||(this.setModified(),t.remove())}}class Unn extends y_{run(t){const n=t.children.filter(i=>i instanceof xh),r=n.pop();for(const i of n)this.setModified(),r.merge(i)}}class znn extends y_{run(t){const n=t.children.filter(i=>i instanceof Wf),r={};for(const i of n){const s=Vn(i.groupBy);s in r||(r[s]=[]),r[s].push(i)}for(const i of Ye(r)){const s=r[i];if(s.length>1){const o=s.pop();for(const a of s)o.merge(a)&&(t.removeChild(a),a.parent=o,a.remove(),this.setModified())}}}}class Vnn extends y_{constructor(t){super(),this.model=t}run(t){const n=!(lie(t)||t instanceof sT||t instanceof ma||t instanceof Sy),r=[],i=[];for(const s of t.children)s instanceof Sh&&(n&&!nre(t.producedFields(),s.dependentFields())?r.push(s):i.push(s));if(r.length>0){const s=r.pop();for(const o of r)s.merge(o,this.model.renameSignal.bind(this.model));this.setModified(),t instanceof Sh?t.merge(s,this.model.renameSignal.bind(this.model)):s.swapWithParent()}if(i.length>1){const s=i.pop();for(const o of i)s.merge(o,this.model.renameSignal.bind(this.model));this.setModified()}}}class Hnn extends y_{run(t){const n=[...t.children];if(!vb(n,o=>o instanceof Xu)||t.numChildren()<=1)return;const i=[];let s;for(const o of n)if(o instanceof Xu){let a=o;for(;a.numChildren()===1;){const[u]=a.children;if(u instanceof Xu)a=u;else break}i.push(...a.children),s?(t.removeChild(o),o.parent=s.parent,s.parent.removeChild(s),s.parent=a,this.setModified()):s=a}else i.push(o);if(i.length){this.setModified();for(const o of i)o.parent.removeChild(o),o.parent=s}}}class v_ extends Mr{clone(){return new v_(null,nn(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=oh(this.transform.groupby.concat(t),n=>n)}dependentFields(){const t=new Set;return this.transform.groupby&&this.transform.groupby.forEach(t.add,t),this.transform.joinaggregate.map(n=>n.field).filter(n=>n!==void 0).forEach(t.add,t),t}producedFields(){return new Set(this.transform.joinaggregate.map(this.getDefaultName))}getDefaultName(t){return t.as??at(t)}hash(){return`JoinAggregateTransform ${Vn(this.transform)}`}assemble(){const t=[],n=[],r=[];for(const s of this.transform.joinaggregate)n.push(s.op),r.push(this.getDefaultName(s)),t.push(s.field===void 0?null:s.field);const i=this.transform.groupby;return{type:"joinaggregate",as:r,ops:n,fields:t,...i!==void 0?{groupby:i}:{}}}}function qnn(e){return e.stack.stackBy.reduce((t,n)=>{const r=n.fieldDef,i=at(r);return i&&t.push(i),t},[])}function Wnn(e){return je(e)&&e.every(t=>mt(t))&&e.length>1}class pm extends Mr{clone(){return new pm(null,nn(this._stack))}constructor(t,n){super(t),this._stack=n}static makeFromTransform(t,n){const{stack:r,groupby:i,as:s,offset:o="zero"}=n,a=[],u=[];if(n.sort!==void 0)for(const f of n.sort)a.push(f.field),u.push(fs(f.order,"ascending"));const l={field:a,order:u};let c;return Wnn(s)?c=s:mt(s)?c=[s,`${s}_end`]:c=[`${n.stack}_start`,`${n.stack}_end`],new pm(t,{dimensionFieldDefs:[],stackField:r,groupby:i,offset:o,sort:l,facetby:[],as:c})}static makeFromEncoding(t,n){const r=n.stack,{encoding:i}=n;if(!r)return null;const{groupbyChannels:s,fieldChannel:o,offset:a,impute:u}=r,l=s.map(h=>{const p=i[h];return zh(p)}).filter(h=>!!h),c=qnn(n),f=n.encoding.order;let d;if(je(f)||et(f))d=C4e(f);else{const h=mFe(f)?f.sort:o==="y"?"descending":"ascending";d=c.reduce((p,m)=>(p.field.includes(m)||(p.field.push(m),p.order.push(h)),p),{field:[],order:[]})}return new pm(t,{dimensionFieldDefs:l,stackField:n.vgField(o),facetby:[],stackby:c,sort:d,offset:a,impute:u,as:[n.vgField(o,{suffix:"start",forAs:!0}),n.vgField(o,{suffix:"end",forAs:!0})]})}get stack(){return this._stack}addDimensions(t){this._stack.facetby.push(...t)}dependentFields(){const t=new Set;return t.add(this._stack.stackField),this.getGroupbyFields().forEach(t.add,t),this._stack.facetby.forEach(t.add,t),this._stack.sort.field.forEach(t.add,t),t}producedFields(){return new Set(this._stack.as)}hash(){return`Stack ${Vn(this._stack)}`}getGroupbyFields(){const{dimensionFieldDefs:t,impute:n,groupby:r}=this._stack;return t.length>0?t.map(i=>i.bin?n?[at(i,{binSuffix:"mid"})]:[at(i,{}),at(i,{binSuffix:"end"})]:[at(i)]).flat():r??[]}assemble(){const t=[],{facetby:n,dimensionFieldDefs:r,stackField:i,stackby:s,sort:o,offset:a,impute:u,as:l}=this._stack;if(u)for(const c of r){const{bandPosition:f=.5,bin:d}=c;if(d){const h=at(c,{expr:"datum"}),p=at(c,{expr:"datum",binSuffix:"end"});t.push({type:"formula",expr:`${f}*${h}+${1-f}*${p}`,as:at(c,{binSuffix:"mid",forAs:!0})})}t.push({type:"impute",field:i,groupby:[...s,...n],key:at(c,{binSuffix:"mid"}),method:"value",value:0})}return t.push({type:"stack",groupby:[...this.getGroupbyFields(),...n],field:i,sort:o,as:l,offset:a}),t}}class aT extends Mr{clone(){return new aT(null,nn(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=oh(this.transform.groupby.concat(t),n=>n)}dependentFields(){const t=new Set;return(this.transform.groupby??[]).forEach(t.add,t),(this.transform.sort??[]).forEach(n=>t.add(n.field)),this.transform.window.map(n=>n.field).filter(n=>n!==void 0).forEach(t.add,t),t}producedFields(){return new Set(this.transform.window.map(this.getDefaultName))}getDefaultName(t){return t.as??at(t)}hash(){return`WindowTransform ${Vn(this.transform)}`}assemble(){const t=[],n=[],r=[],i=[];for(const f of this.transform.window)n.push(f.op),r.push(this.getDefaultName(f)),i.push(f.param===void 0?null:f.param),t.push(f.field===void 0?null:f.field);const s=this.transform.frame,o=this.transform.groupby;if(s&&s[0]===null&&s[1]===null&&n.every(f=>fre(f)))return{type:"joinaggregate",as:r,ops:n,fields:t,...o!==void 0?{groupby:o}:{}};const a=[],u=[];if(this.transform.sort!==void 0)for(const f of this.transform.sort)a.push(f.field),u.push(f.order??"ascending");const l={field:a,order:u},c=this.transform.ignorePeers;return{type:"window",params:i,as:r,ops:n,fields:t,sort:l,...c!==void 0?{ignorePeers:c}:{},...o!==void 0?{groupby:o}:{},...s!==void 0?{frame:s}:{}}}}function Gnn(e){function t(n){if(!(n instanceof oT)){const r=n.clone();if(r instanceof Xu){const i=Iq+r.getSource();r.setSource(i),e.model.component.data.outputNodes[i]=r}else(r instanceof Wf||r instanceof pm||r instanceof aT||r instanceof v_)&&r.addDimensions(e.fields);for(const i of n.children.flatMap(t))i.parent=r;return[r]}return n.children.flatMap(t)}return t}function Aq(e){if(e instanceof oT)if(e.numChildren()===1&&!(e.children[0]instanceof Xu)){const t=e.children[0];(t instanceof Wf||t instanceof pm||t instanceof aT||t instanceof v_)&&t.addDimensions(e.fields),t.swapWithParent(),Aq(e)}else{const t=e.model.component.data.main;eje(t);const n=Gnn(e),r=e.children.map(n).flat();for(const i of r)i.parent=t}else e.children.map(Aq)}function eje(e){if(e instanceof Xu&&e.type===Ei.Main&&e.numChildren()===1){const t=e.children[0];t instanceof oT||(t.swapWithParent(),eje(e))}}const Iq="scale_",UP=5;function kq(e){for(const t of e){for(const n of t.children)if(n.parent!==t)return!1;if(!kq(t.children))return!1}return!0}function of(e,t){let n=!1;for(const r of t)n=e.optimize(r)||n;return n}function I0e(e,t,n){let r=e.sources,i=!1;return i=of(new Lnn,r)||i,i=of(new $nn(t),r)||i,r=r.filter(s=>s.numChildren()>0),i=of(new Bnn,r)||i,r=r.filter(s=>s.numChildren()>0),n||(i=of(new Fnn,r)||i,i=of(new Vnn(t),r)||i,i=of(new Mnn,r)||i,i=of(new jnn,r)||i,i=of(new znn,r)||i,i=of(new Unn,r)||i,i=of(new Onn,r)||i,i=of(new Hnn,r)||i),e.sources=r,i}function Ynn(e,t){kq(e.sources);let n=0,r=0;for(let i=0;i<UP&&I0e(e,t,!0);i++)n++;e.sources.map(Aq);for(let i=0;i<UP&&I0e(e,t,!1);i++)r++;kq(e.sources),Math.max(n,r)===UP&&Ze(`Maximum optimization runs(${UP}) reached.`)}class Js{constructor(t){Object.defineProperty(this,"signal",{enumerable:!0,get:t})}static fromName(t,n){return new Js(()=>t(n))}}function tje(e){Wi(e)?Knn(e):Xnn(e)}function Knn(e){const t=e.component.scales;for(const n of Ye(t)){const r=Jnn(e,n);if(t[n].setWithExplicit("domains",r),ern(e,n),e.component.data.isFaceted){let s=e;for(;!$l(s)&&s.parent;)s=s.parent;if(s.component.resolve.scale[n]==="shared")for(const a of r.value)nm(a)&&(a.data=Iq+a.data.replace(Iq,""))}}}function Xnn(e){for(const n of e.children)tje(n);const t=e.component.scales;for(const n of Ye(t)){let r,i=null;for(const s of e.children){const o=s.component.scales[n];if(o){r===void 0?r=o.getWithExplicit("domains"):r=wy(r,o.getWithExplicit("domains"),"domains","scale",Rq);const a=o.get("selectionExtent");i&&a&&i.param!==a.param&&Ze(GXt),i=a}}t[n].setWithExplicit("domains",r),i&&t[n].set("selectionExtent",i,!0)}}function Qnn(e,t,n,r){if(e==="unaggregated"){const{valid:i,reason:s}=k0e(t,n);if(!i){Ze(s);return}}else if(e===void 0&&r.useUnaggregatedDomain){const{valid:i}=k0e(t,n);if(i)return"unaggregated"}return e}function Jnn(e,t){const n=e.getScaleComponent(t).get("type"),{encoding:r}=e,i=Qnn(e.scaleDomain(t),e.typedFieldDef(t),n,e.config.scale);return i!==e.scaleDomain(t)&&(e.specifiedScales[t]={...e.specifiedScales[t],domain:i}),t==="x"&&Ms(r.x2)?Ms(r.x)?wy(kg(n,i,e,"x"),kg(n,i,e,"x2"),"domain","scale",Rq):kg(n,i,e,"x2"):t==="y"&&Ms(r.y2)?Ms(r.y)?wy(kg(n,i,e,"y"),kg(n,i,e,"y2"),"domain","scale",Rq):kg(n,i,e,"y2"):kg(n,i,e,t)}function Znn(e,t,n){return e.map(r=>({signal:`{data: ${f5(r,{timeUnit:n,type:t})}}`}))}function DB(e,t,n){var i;const r=(i=lo(n))==null?void 0:i.unit;return t==="temporal"||r?Znn(e,t,r):[e]}function kg(e,t,n,r){const{encoding:i,markDef:s,mark:o,config:a,stack:u}=n,l=Ms(i[r]),{type:c}=l,f=l.timeUnit;if(gJt(t)){const p=kg(e,void 0,n,r),m=DB(t.unionWith,c,f);return Fd([...m,...p.value])}else{if(Rt(t))return Fd([t]);if(t&&t!=="unaggregated"&&!Z4e(t))return Fd(DB(t,c,f))}if(u&&r===u.fieldChannel){if(u.offset==="normalize")return pl([[0,1]]);const p=n.requestDataName(Ei.Main);return pl([{data:p,field:n.vgField(r,{suffix:"start"})},{data:p,field:n.vgField(r,{suffix:"end"})}])}const d=hg(r)&&et(l)?trn(n,r,e):void 0;if(hp(l)){const p=DB([l.datum],c,f);return pl(p)}const h=l;if(t==="unaggregated"){const p=n.requestDataName(Ei.Main),{field:m}=l;return pl([{data:p,field:at({field:m,aggregate:"min"})},{data:p,field:at({field:m,aggregate:"max"})}])}else if(oi(h.bin)){if(co(e))return pl(e==="bin-ordinal"?[]:[{data:WI(d)?n.requestDataName(Ei.Main):n.requestDataName(Ei.Raw),field:n.vgField(r,qR(h,r)?{binSuffix:"range"}:{}),sort:d===!0||!gt(d)?{field:n.vgField(r,{}),op:"min"}:d}]);{const{bin:p}=h;if(oi(p)){const m=uie(n,h.field,p);return pl([new Js(()=>{const g=n.getSignalName(m);return`[${g}.start, ${g}.stop]`})])}else return pl([{data:n.requestDataName(Ei.Main),field:n.vgField(r,{})}])}}else if(h.timeUnit&&Hn(["time","utc"],e)){const p=i[fp(r)];if(pFe(h,p,s,a)){const m=n.requestDataName(Ei.Main),g=_y({fieldDef:h,fieldDef2:p,markDef:s,config:a}),y=YI(o)&&g!==.5&&ds(r);return pl([{data:m,field:n.vgField(r,y?{suffix:y5}:{})},{data:m,field:n.vgField(r,{suffix:y?v5:"end"})}])}}return pl(d?[{data:WI(d)?n.requestDataName(Ei.Main):n.requestDataName(Ei.Raw),field:n.vgField(r),sort:d}]:[{data:n.requestDataName(Ei.Main),field:n.vgField(r)}])}function OB(e,t){const{op:n,field:r,order:i}=e;return{op:n??(t?"sum":o5),...r?{field:zc(r)}:{},...i?{order:i}:{}}}function ern(e,t){var a;const n=e.component.scales[t],r=e.specifiedScales[t].domain,i=(a=e.fieldDef(t))==null?void 0:a.bin,s=Z4e(r)&&r,o=d_(i)&&ZF(i.extent)&&i.extent;(s||o)&&n.set("selectionExtent",s??o,!0)}function trn(e,t,n){if(!co(n))return;const r=e.fieldDef(t),i=r.sort;if(dFe(i))return{op:"min",field:Vx(r,t),order:"ascending"};const{stack:s}=e,o=s?new Set([...s.groupbyFields,...s.stackBy.map(a=>a.fieldDef.field)]):void 0;if(Eh(i)){const a=s&&!o.has(i.field);return OB(i,a)}else if(fFe(i)){const{encoding:a,order:u}=i,l=e.fieldDef(a),{aggregate:c,field:f}=l,d=s&&!o.has(f);if(Um(c)||nv(c))return OB({field:at(l),order:u},d);if(fre(c)||!c)return OB({op:c,field:f,order:u},d)}else{if(i==="descending")return{op:"min",field:e.vgField(t),order:"descending"};if(Hn(["ascending",void 0],i))return!0}}function k0e(e,t){const{aggregate:n,type:r}=e;return n?mt(n)&&!RXt.has(n)?{valid:!1,reason:bQt(n)}:r==="quantitative"&&t==="log"?{valid:!1,reason:_Qt(e)}:{valid:!0}:{valid:!1,reason:vQt(e)}}function Rq(e,t,n,r){return e.explicit&&t.explicit&&Ze(TQt(n,r,e.value,t.value)),{explicit:e.explicit,value:[...e.value,...t.value]}}function nrn(e){const t=oh(e.map(o=>{if(nm(o)){const{sort:a,...u}=o;return u}return o}),Vn),n=oh(e.map(o=>{if(nm(o)){const a=o.sort;return a!==void 0&&!WI(a)&&("op"in a&&a.op==="count"&&delete a.field,a.order==="ascending"&&delete a.order),a}}).filter(o=>o!==void 0),Vn);if(t.length===0)return;if(t.length===1){const o=e[0];if(nm(o)&&n.length>0){let a=n[0];if(n.length>1){Ze(Fge);const u=n.filter(l=>gt(l)&&"op"in l&&l.op!=="min");n.every(l=>gt(l)&&"op"in l)&&u.length===1?a=u[0]:a=!0}else if(gt(a)&&"field"in a){const u=a.field;o.field===u&&(a=a.order?{order:a.order}:!0)}return{...o,sort:a}}return o}const r=oh(n.map(o=>WI(o)||!("op"in o)||mt(o.op)&&o.op in CXt?o:(Ze(AQt(o)),!0)),Vn);let i;r.length===1?i=r[0]:r.length>1&&(Ze(Fge),i=!0);const s=oh(e.map(o=>nm(o)?o.data:null),o=>o);return s.length===1&&s[0]!==null?{data:s[0],fields:t.map(a=>a.field),...i?{sort:i}:{}}:{fields:t,...i?{sort:i}:{}}}function die(e){if(nm(e)&&mt(e.field))return e.field;if(NXt(e)){let t;for(const n of e.fields)if(nm(n)&&mt(n.field)){if(!t)t=n.field;else if(t!==n.field)return Ze(IQt),t}return Ze(kQt),t}else if(PXt(e)){Ze(RQt);const t=e.fields[0];return mt(t)?t:void 0}}function x5(e,t){const r=e.component.scales[t].get("domains").map(i=>(nm(i)&&(i.data=e.lookupDataSource(i.data)),i));return nrn(r)}function nje(e){return uT(e)||hie(e)?e.children.reduce((t,n)=>t.concat(nje(n)),R0e(e)):R0e(e)}function R0e(e){return Ye(e.component.scales).reduce((t,n)=>{const r=e.component.scales[n];if(r.merged)return t;const i=r.combine(),{name:s,type:o,selectionExtent:a,domains:u,range:l,reverse:c,...f}=i,d=rrn(i.range,s,n,e),h=x5(e,n),p=a?Qen(e,a,r,h):null;return t.push({name:s,type:o,...h?{domain:h}:{},...p?{domainRaw:p}:{},range:d,...c!==void 0?{reverse:c}:{},...f}),t},[])}function rrn(e,t,n,r){if(ds(n)){if(rv(e))return{step:{signal:`${t}_step`}}}else if(gt(e)&&nm(e))return{...e,data:r.lookupDataSource(e.data)};return e}class rje extends mg{constructor(t,n){super({},{name:t}),this.merged=!1,this.setWithExplicit("type",n)}domainDefinitelyIncludesZero(){return this.get("zero")!==!1?!0:vb(this.get("domains"),t=>je(t)&&t.length===2&&lr(t[0])&&t[0]<=0&&lr(t[1])&&t[1]>=0)}}const irn=["range","scheme"];function srn(e){const t=e.component.scales;for(const n of JF){const r=t[n];if(!r)continue;const i=orn(n,e);r.setWithExplicit("range",i)}}function N0e(e,t){const n=e.fieldDef(t);if(n!=null&&n.bin){const{bin:r,field:i}=n,s=al(t),o=e.getName(s);if(gt(r)&&r.binned&&r.step!==void 0)return new Js(()=>{const a=e.scaleName(t),u=`(domain("${a}")[1] - domain("${a}")[0]) / ${r.step}`;return`${e.getSignalName(o)} / (${u})`});if(oi(r)){const a=uie(e,i,r);return new Js(()=>{const u=e.getSignalName(a),l=`(${u}.stop - ${u}.start) / ${u}.step`;return`${e.getSignalName(o)} / (${l})`})}}}function orn(e,t){const n=t.specifiedScales[e],{size:r}=t,s=t.getScaleComponent(e).get("type");for(const f of irn)if(n[f]!==void 0){const d=pq(s,f),h=eFe(e,f);if(!d)Ze(D4e(s,f,e));else if(h)Ze(h);else switch(f){case"range":{const p=n.range;if(je(p)){if(ds(e))return Fd(p.map(m=>{if(m==="width"||m==="height"){const g=t.getName(m),y=t.getSignalName.bind(t);return Js.fromName(y,g)}return m}))}else if(gt(p))return Fd({data:t.requestDataName(Ei.Main),field:p.field,sort:{op:"min",field:t.vgField(e)}});return Fd(p)}case"scheme":return Fd(arn(n[f]))}}const o=e===Ai||e==="xOffset"?"width":"height",a=r[o];if(Vh(a)){if(ds(e))if(co(s)){const f=sje(a,t,e);if(f)return Fd({step:f})}else Ze(O4e(o));else if(jR(e)){const f=e===Qy?"x":"y";if(t.getScaleComponent(f).get("type")==="band"){const p=oje(a,s);if(p)return Fd(p)}}}const{rangeMin:u,rangeMax:l}=n,c=urn(e,t);return(u!==void 0||l!==void 0)&&pq(s,"rangeMin")&&je(c)&&c.length===2?Fd([u??c[0],l??c[1]]):pl(c)}function arn(e){return mJt(e)?{scheme:e.name,...Yu(e,["name"])}:{scheme:e}}function ije(e,t,n,{center:r}={}){const i=al(e),s=t.getName(i),o=t.getSignalName.bind(t);return e===po&&Kl(n)?r?[Js.fromName(a=>`${o(a)}/2`,s),Js.fromName(a=>`-${o(a)}/2`,s)]:[Js.fromName(o,s),0]:r?[Js.fromName(a=>`-${o(a)}/2`,s),Js.fromName(a=>`${o(a)}/2`,s)]:[0,Js.fromName(o,s)]}function urn(e,t){const{size:n,config:r,mark:i,encoding:s}=t,{type:o}=Ms(s[e]),u=t.getScaleComponent(e).get("type"),{domain:l,domainMid:c}=t.specifiedScales[e];switch(e){case Ai:case po:{if(Hn(["point","band"],u)){const f=aje(e,n,r.view);if(Vh(f))return{step:sje(f,t,e)}}return ije(e,t,u)}case Qy:case nT:return lrn(e,t,u);case fg:{const f=t.component.scales[e].get("zero"),d=uje(i,f,r),h=drn(i,n,t,r);return Mx(u)?frn(d,h,crn(u,r,l,e)):[d,h]}case Zc:return[0,Math.PI*2];case c_:return[0,360];case gd:return[0,new Js(()=>{const f=t.getSignalName($l(t.parent)?"child_width":"width"),d=t.getSignalName($l(t.parent)?"child_height":"height");return`min(${f},${d})/2`})];case ev:return[r.scale.minStrokeWidth,r.scale.maxStrokeWidth];case tv:return[[1,0],[4,2],[2,1],[1,1],[1,2,4,2]];case ol:return"symbol";case sl:case lp:case cp:return u==="ordinal"?o==="nominal"?"category":"ordinal":c!==void 0?"diverging":i==="rect"||i==="geoshape"?"heatmap":"ramp";case dg:case Jy:case Zy:return[r.scale.minOpacity,r.scale.maxOpacity]}}function sje(e,t,n){const{encoding:r}=t,i=t.getScaleComponent(n),s=are(n),o=r[s];if(qFe({step:e,offsetIsDiscrete:ln(o)&&Y4e(o.type)})==="offset"&&CFe(r,s)){const u=t.getScaleComponent(s);let c=`domain('${t.scaleName(s)}').length`;if(u.get("type")==="band"){const d=u.get("paddingInner")??u.get("padding")??0,h=u.get("paddingOuter")??u.get("padding")??0;c=`bandspace(${c}, ${d}, ${h})`}const f=i.get("paddingInner")??i.get("padding");return{signal:`${e.step} * ${c} / (1-${MXt(f)})`}}else return e.step}function oje(e,t){if(qFe({step:e,offsetIsDiscrete:co(t)})==="offset")return{step:e.step}}function lrn(e,t,n){const r=e===Qy?"x":"y",i=t.getScaleComponent(r);if(!i)return ije(r,t,n,{center:!0});const s=i.get("type"),o=t.scaleName(r),{markDef:a,config:u}=t;if(s==="band"){const l=aje(r,t.size,t.config.view);if(Vh(l)){const c=oje(l,n);if(c)return c}return[0,{signal:`bandwidth('${o}')`}]}else{const l=t.encoding[r];if(et(l)&&l.timeUnit){const c=H4e(l.timeUnit,p=>`scale('${o}', ${p})`),f=t.config.scale.bandWithNestedOffsetPaddingInner,d=_y({fieldDef:l,markDef:a,config:u})-.5,h=d!==0?` + ${d}`:"";if(f){const p=Rt(f)?`${f.signal}/2`+h:`${f/2+d}`,m=Rt(f)?`(1 - ${f.signal}/2)`+h:`${1-f/2+d}`;return[{signal:`${p} * (${c})`},{signal:`${m} * (${c})`}]}return[0,{signal:c}]}return e4e(`Cannot use ${e} scale if ${r} scale is not discrete.`)}}function aje(e,t,n){const r=e===Ai?"width":"height",i=t[r];return i||XM(n,r)}function crn(e,t,n,r){switch(e){case"quantile":return t.scale.quantileCount;case"quantize":return t.scale.quantizeCount;case"threshold":return n!==void 0&&je(n)?n.length+1:(Ze(jQt(r)),3)}}function frn(e,t,n){const r=()=>{const i=$f(t),s=$f(e),o=`(${i} - ${s}) / (${n} - 1)`;return`sequence(${s}, ${i} + ${o}, ${o})`};return Rt(t)?new Js(r):{signal:r()}}function uje(e,t,n){if(t)return Rt(t)?{signal:`${t.signal} ? 0 : ${uje(e,!1,n)}`}:0;switch(e){case"bar":case"tick":return n.scale.minBandSize;case"line":case"trail":case"rule":return n.scale.minStrokeWidth;case"text":return n.scale.minFontSize;case"point":case"square":case"circle":return n.scale.minSize}throw new Error(e5("size",e))}const P0e=.95;function drn(e,t,n,r){const i={x:N0e(n,"x"),y:N0e(n,"y")};switch(e){case"bar":case"tick":{if(r.scale.maxBandSize!==void 0)return r.scale.maxBandSize;const s=D0e(t,i,r.view);return lr(s)?s-1:new Js(()=>`${s.signal} - 1`)}case"line":case"trail":case"rule":return r.scale.maxStrokeWidth;case"text":return r.scale.maxFontSize;case"point":case"square":case"circle":{if(r.scale.maxSize)return r.scale.maxSize;const s=D0e(t,i,r.view);return lr(s)?Math.pow(P0e*s,2):new Js(()=>`pow(${P0e} * ${s.signal}, 2)`)}}throw new Error(e5("size",e))}function D0e(e,t,n){const r=Vh(e.width)?e.width.step:KM(n,"width"),i=Vh(e.height)?e.height.step:KM(n,"height");return t.x||t.y?new Js(()=>`min(${[t.x?t.x.signal:r,t.y?t.y.signal:i].join(", ")})`):Math.min(r,i)}function lje(e,t){Wi(e)?hrn(e,t):fje(e,t)}function hrn(e,t){const n=e.component.scales,{config:r,encoding:i,markDef:s,specifiedScales:o}=e;for(const a of Ye(n)){const u=o[a],l=n[a],c=e.getScaleComponent(a),f=Ms(i[a]),d=u[t],h=c.get("type"),p=c.get("padding"),m=c.get("paddingInner"),g=pq(h,t),y=eFe(a,t);if(d!==void 0&&(g?y&&Ze(y):Ze(D4e(h,t,a))),g&&y===void 0)if(d!==void 0){const v=f.timeUnit,_=f.type;switch(t){case"domainMax":case"domainMin":h_(u[t])||_==="temporal"||v?l.set(t,{signal:f5(u[t],{type:_,timeUnit:v})},!0):l.set(t,u[t],!0);break;default:l.copyKeyFromObject(t,u)}}else{const v=t in O0e?O0e[t]({model:e,channel:a,fieldOrDatumDef:f,scaleType:h,scalePadding:p,scalePaddingInner:m,domain:u.domain,domainMin:u.domainMin,domainMax:u.domainMax,markDef:s,config:r,hasNestedOffsetScale:AFe(i,a),hasSecondaryRangeChannel:!!i[fp(a)]}):r.scale[t];v!==void 0&&l.set(t,v,!1)}}}const O0e={bins:({model:e,fieldOrDatumDef:t})=>et(t)?prn(e,t):void 0,interpolate:({channel:e,fieldOrDatumDef:t})=>mrn(e,t.type),nice:({scaleType:e,channel:t,domain:n,domainMin:r,domainMax:i,fieldOrDatumDef:s})=>grn(e,t,n,r,i,s),padding:({channel:e,scaleType:t,fieldOrDatumDef:n,markDef:r,config:i})=>yrn(e,t,i.scale,n,r,i.bar),paddingInner:({scalePadding:e,channel:t,markDef:n,scaleType:r,config:i,hasNestedOffsetScale:s})=>vrn(e,t,n.type,r,i.scale,s),paddingOuter:({scalePadding:e,channel:t,scaleType:n,scalePaddingInner:r,config:i,hasNestedOffsetScale:s})=>brn(e,t,n,r,i.scale,s),reverse:({fieldOrDatumDef:e,scaleType:t,channel:n,config:r})=>{const i=et(e)?e.sort:void 0;return _rn(t,i,n,r.scale)},zero:({channel:e,fieldOrDatumDef:t,domain:n,markDef:r,scaleType:i,config:s,hasSecondaryRangeChannel:o})=>wrn(e,t,n,r,i,s.scale,o)};function cje(e){Wi(e)?srn(e):fje(e,"range")}function fje(e,t){const n=e.component.scales;for(const r of e.children)t==="range"?cje(r):lje(r,t);for(const r of Ye(n)){let i;for(const s of e.children){const o=s.component.scales[r];if(o){const a=o.getWithExplicit(t);i=wy(i,a,t,"scale",i5e((u,l)=>{switch(t){case"range":return u.step&&l.step?u.step-l.step:0}return 0}))}}n[r].setWithExplicit(t,i)}}function prn(e,t){const n=t.bin;if(oi(n)){const r=uie(e,t.field,n);return new Js(()=>e.getSignalName(r))}else if(Co(n)&&d_(n)&&n.step!==void 0)return{step:n.step}}function mrn(e,t){if(Hn([sl,lp,cp],e)&&t!=="nominal")return"hcl"}function grn(e,t,n,r,i,s){var o;if(!((o=zh(s))!=null&&o.bin||je(n)||i!=null||r!=null||Hn([Ku.TIME,Ku.UTC],e)))return ds(t)?!0:void 0}function yrn(e,t,n,r,i,s){if(ds(e)){if(Mf(t)){if(n.continuousPadding!==void 0)return n.continuousPadding;const{type:o,orient:a}=i;if(o==="bar"&&!(et(r)&&(r.bin||r.timeUnit))&&(a==="vertical"&&e==="x"||a==="horizontal"&&e==="y"))return s.continuousBandSize}if(t===Ku.POINT)return n.pointPadding}}function vrn(e,t,n,r,i,s=!1){if(e===void 0){if(ds(t)){const{bandPaddingInner:o,barBandPaddingInner:a,rectBandPaddingInner:u,bandWithNestedOffsetPaddingInner:l}=i;return s?l:fs(o,n==="bar"?a:u)}else if(jR(t)&&r===Ku.BAND)return i.offsetBandPaddingInner}}function brn(e,t,n,r,i,s=!1){if(e===void 0){if(ds(t)){const{bandPaddingOuter:o,bandWithNestedOffsetPaddingOuter:a}=i;if(s)return a;if(n===Ku.BAND)return fs(o,Rt(r)?{signal:`${r.signal}/2`}:r/2)}else if(jR(t)){if(n===Ku.POINT)return .5;if(n===Ku.BAND)return i.offsetBandPaddingOuter}}}function _rn(e,t,n,r){if(n==="x"&&r.xReverse!==void 0)return Kl(e)&&t==="descending"?Rt(r.xReverse)?{signal:`!${r.xReverse.signal}`}:!r.xReverse:r.xReverse;if(Kl(e)&&t==="descending")return!0}function wrn(e,t,n,r,i,s,o){if(!!n&&n!=="unaggregated"&&Kl(i)){if(je(n)){const u=n[0],l=n[n.length-1];if(lr(u)&&u<=0&&lr(l)&&l>=0)return!0}return!1}if(e==="size"&&t.type==="quantitative"&&!Mx(i))return!0;if(!(et(t)&&t.bin)&&Hn([...dp,...vXt],e)){const{orient:u,type:l}=r;return Hn(["bar","area","line","trail"],l)&&(u==="horizontal"&&e==="y"||u==="vertical"&&e==="x")?!1:Hn(["bar","area"],l)&&!o?!0:s==null?void 0:s.zero}return!1}function Ern(e,t,n,r,i=!1){const s=xrn(t,n,r,i),{type:o}=e;return hg(t)?o!==void 0?EJt(t,o)?et(n)&&!wJt(o,n.type)?(Ze(xQt(o,s)),s):o:(Ze(EQt(t,o,s)),s):s:null}function xrn(e,t,n,r){var i;switch(t.type){case"nominal":case"ordinal":{if(wE(e)||TB(e)==="discrete")return e==="shape"&&t.type==="ordinal"&&Ze(CB(e,"ordinal")),"ordinal";if(ds(e)||jR(e)){if(Hn(["rect","bar","image","rule"],n.type)||r)return"band"}else if(n.type==="arc"&&e in cre)return"band";const s=n[al(e)];return Sb(s)||Fx(t)&&((i=t.axis)!=null&&i.tickBand)?"band":"point"}case"temporal":return wE(e)?"time":TB(e)==="discrete"?(Ze(CB(e,"temporal")),"ordinal"):et(t)&&t.timeUnit&&lo(t.timeUnit).utc?"utc":"time";case"quantitative":return wE(e)?et(t)&&oi(t.bin)?"bin-ordinal":"linear":TB(e)==="discrete"?(Ze(CB(e,"quantitative")),"ordinal"):"linear";case"geojson":return}throw new Error(N4e(t.type))}function Srn(e,{ignoreRange:t}={}){dje(e),tje(e);for(const n of _Jt)lje(e,n);t||cje(e)}function dje(e){Wi(e)?e.component.scales=Trn(e):e.component.scales=Arn(e)}function Trn(e){const{encoding:t,mark:n,markDef:r}=e,i={};for(const s of JF){const o=Ms(t[s]);if(o&&n===uFe&&s===ol&&o.type===rT)continue;let a=o&&o.scale;if(o&&a!==null&&a!==!1){a??(a={});const u=AFe(t,s),l=Ern(a,s,o,r,u);i[s]=new rje(e.scaleName(`${s}`,!0),{value:l,explicit:a.type===l})}}return i}const Crn=i5e((e,t)=>Bge(e)-Bge(t));function Arn(e){var t;const n=e.component.scales={},r={},i=e.component.resolve;for(const s of e.children){dje(s);for(const o of Ye(s.component.scales))if((t=i.scale)[o]??(t[o]=z5e(o,e)),i.scale[o]==="shared"){const a=r[o],u=s.component.scales[o].getWithExplicit("type");a?cJt(a.value,u.value)?r[o]=wy(a,u,"type","scale",Crn):(i.scale[o]="independent",delete r[o]):r[o]=u}}for(const s of Ye(r)){const o=e.scaleName(s,!0),a=r[s];n[s]=new rje(o,a);for(const u of e.children){const l=u.component.scales[s];l&&(u.renameScale(l.get("name"),o),l.merged=!0)}}return n}class $B{constructor(){this.nameMap={}}rename(t,n){this.nameMap[t]=n}has(t){return this.nameMap[t]!==void 0}get(t){for(;this.nameMap[t]&&t!==this.nameMap[t];)t=this.nameMap[t];return t}}function Wi(e){return(e==null?void 0:e.type)==="unit"}function $l(e){return(e==null?void 0:e.type)==="facet"}function hie(e){return(e==null?void 0:e.type)==="concat"}function uT(e){return(e==null?void 0:e.type)==="layer"}class pie{constructor(t,n,r,i,s,o,a){this.type=n,this.parent=r,this.config=s,this.correctDataNames=u=>{var l,c,f;return(l=u.from)!=null&&l.data&&(u.from.data=this.lookupDataSource(u.from.data)),(f=(c=u.from)==null?void 0:c.facet)!=null&&f.data&&(u.from.facet.data=this.lookupDataSource(u.from.facet.data)),u},this.parent=r,this.config=s,this.view=Ru(a),this.name=t.name??i,this.title=jg(t.title)?{text:t.title}:t.title?Ru(t.title):void 0,this.scaleNameMap=r?r.scaleNameMap:new $B,this.projectionNameMap=r?r.projectionNameMap:new $B,this.signalNameMap=r?r.signalNameMap:new $B,this.data=t.data,this.description=t.description,this.transforms=Oen(t.transform??[]),this.layout=n==="layer"||n==="unit"?{}:FZt(t,n,s),this.component={data:{sources:r?r.component.data.sources:[],outputNodes:r?r.component.data.outputNodes:{},outputNodeRefCounts:r?r.component.data.outputNodeRefCounts:{},isFaceted:a5(t)||(r==null?void 0:r.component.data.isFaceted)&&t.data===void 0},layoutSize:new mg,layoutHeaders:{row:{},column:{},facet:{}},mark:null,resolve:{scale:{},axis:{},legend:{},...o?nn(o):{}},selection:null,scales:null,projection:null,axes:{},legends:{}}}get width(){return this.getSizeSignalRef("width")}get height(){return this.getSizeSignalRef("height")}parse(){this.parseScale(),this.parseLayoutSize(),this.renameTopLevelLayoutSizeSignal(),this.parseSelections(),this.parseProjection(),this.parseData(),this.parseAxesAndHeaders(),this.parseLegends(),this.parseMarkGroup()}parseScale(){Srn(this)}parseProjection(){J5e(this)}renameTopLevelLayoutSizeSignal(){this.getName("width")!=="width"&&this.renameSignal(this.getName("width"),"width"),this.getName("height")!=="height"&&this.renameSignal(this.getName("height"),"height")}parseLegends(){G5e(this)}assembleEncodeFromView(t){const{style:n,...r}=t,i={};for(const s of Ye(r)){const o=r[s];o!==void 0&&(i[s]=hi(o))}return i}assembleGroupEncodeEntry(t){let n={};return this.view&&(n=this.assembleEncodeFromView(this.view)),!t&&(this.description&&(n.description=hi(this.description)),this.type==="unit"||this.type==="layer")?{width:this.getSizeSignalRef("width"),height:this.getSizeSignalRef("height"),...n}:jr(n)?void 0:n}assembleLayout(){if(!this.layout)return;const{spacing:t,...n}=this.layout,{component:r,config:i}=this,s=Ytn(r.layoutHeaders,i);return{padding:t,...this.assembleDefaultLayout(),...n,...s?{titleBand:s}:{}}}assembleDefaultLayout(){return{}}assembleHeaderMarks(){const{layoutHeaders:t}=this.component;let n=[];for(const r of Ac)t[r].title&&n.push(ztn(this,r));for(const r of iie)n=n.concat(Vtn(this,r));return n}assembleAxes(){return ktn(this.component.axes,this.config)}assembleLegends(){return K5e(this)}assembleProjections(){return ynn(this)}assembleTitle(){const{encoding:t,...n}=this.title??{},r={...E4e(this.config.title).nonMarkTitleProperties,...n,...t?{encode:{update:t}}:{}};if(r.text)return Hn(["unit","layer"],this.type)?Hn(["middle",void 0],r.anchor)&&(r.frame??(r.frame="group")):r.anchor??(r.anchor="start"),jr(r)?void 0:r}assembleGroup(t=[]){const n={};t=t.concat(this.assembleSignals()),t.length>0&&(n.signals=t);const r=this.assembleLayout();r&&(n.layout=r),n.marks=[].concat(this.assembleHeaderMarks(),this.assembleMarks());const i=!this.parent||$l(this.parent)?nje(this):[];i.length>0&&(n.scales=i);const s=this.assembleAxes();s.length>0&&(n.axes=s);const o=this.assembleLegends();return o.length>0&&(n.legends=o),n}getName(t){return Ci((this.name?`${this.name}_`:"")+t)}getDataName(t){return this.getName(Ei[t].toLowerCase())}requestDataName(t){const n=this.getDataName(t),r=this.component.data.outputNodeRefCounts;return r[n]=(r[n]||0)+1,n}getSizeSignalRef(t){if($l(this.parent)){const n=B5e(t),r=QF(n),i=this.component.scales[r];if(i&&!i.merged){const s=i.get("type"),o=i.get("range");if(co(s)&&rv(o)){const a=i.get("name"),u=x5(this,r),l=die(u);if(l){const c=at({aggregate:"distinct",field:l},{expr:"datum"});return{signal:j5e(a,i,c)}}else return Ze(hre(r)),null}}}return{signal:this.signalNameMap.get(this.getName(t))}}lookupDataSource(t){const n=this.component.data.outputNodes[t];return n?n.getSource():t}getSignalName(t){return this.signalNameMap.get(t)}renameSignal(t,n){this.signalNameMap.rename(t,n)}renameScale(t,n){this.scaleNameMap.rename(t,n)}renameProjection(t,n){this.projectionNameMap.rename(t,n)}scaleName(t,n){if(n)return this.getName(t);if(h4e(t)&&hg(t)&&this.component.scales[t]||this.scaleNameMap.has(this.getName(t)))return this.scaleNameMap.get(this.getName(t))}projectionName(t){if(t)return this.getName("projection");if(this.component.projection&&!this.component.projection.merged||this.projectionNameMap.has(this.getName("projection")))return this.projectionNameMap.get(this.getName("projection"))}getScaleComponent(t){if(!this.component.scales)throw new Error("getScaleComponent cannot be called before parseScale(). Make sure you have called parseScale or use parseUnitModelWithScale().");const n=this.component.scales[t];return n&&!n.merged?n:this.parent?this.parent.getScaleComponent(t):void 0}getSelectionComponent(t,n){let r=this.component.selection[t];if(!r&&this.parent&&(r=this.parent.getSelectionComponent(t,n)),!r)throw new Error(UXt(n));return r}hasAxisOrientSignalRef(){var t,n;return((t=this.component.axes.x)==null?void 0:t.some(r=>r.hasOrientSignalRef()))||((n=this.component.axes.y)==null?void 0:n.some(r=>r.hasOrientSignalRef()))}}class hje extends pie{vgField(t,n={}){const r=this.fieldDef(t);if(r)return at(r,n)}reduceFieldDef(t,n){return hZt(this.getMapping(),(r,i,s)=>{const o=zh(i);return o?t(r,o,s):r},n)}forEachFieldDef(t,n){Bre(this.getMapping(),(r,i)=>{const s=zh(r);s&&t(s,i)},n)}}class S5 extends Mr{clone(){return new S5(null,nn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=nn(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"value",r[1]??"density"];const i=this.transform.resolve??"shared";this.transform.resolve=i}dependentFields(){return new Set([this.transform.density,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`DensityTransform ${Vn(this.transform)}`}assemble(){const{density:t,...n}=this.transform,r={type:"kde",field:t,...n};return r.resolve=this.transform.resolve,r}}class T5 extends Mr{clone(){return new T5(null,nn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=nn(n)}dependentFields(){return new Set([this.transform.extent])}producedFields(){return new Set([])}hash(){return`ExtentTransform ${Vn(this.transform)}`}assemble(){const{extent:t,param:n}=this.transform;return{type:"extent",field:t,signal:n}}}class XI extends Mr{clone(){return new XI(null,{...this.filter})}constructor(t,n){super(t),this.filter=n}static make(t,n){const{config:r,mark:i,markDef:s}=n;if(wr("invalid",s,r)!=="filter")return null;const a=n.reduceFieldDef((u,l,c)=>{const f=hg(c)&&n.getScaleComponent(c);if(f){const d=f.get("type");Kl(d)&&l.aggregate!=="count"&&!m_(i)&&(u[l.field]=l)}return u},{});return Ye(a).length?new XI(t,a):null}dependentFields(){return new Set(Ye(this.filter))}producedFields(){return new Set}hash(){return`FilterInvalid ${Vn(this.filter)}`}assemble(){const t=Ye(this.filter).reduce((n,r)=>{const i=this.filter[r],s=at(i,{expr:"datum"});return i!==null&&(i.type==="temporal"?n.push(`(isDate(${s}) || (isValid(${s}) && isFinite(+${s})))`):i.type==="quantitative"&&(n.push(`isValid(${s})`),n.push(`isFinite(+${s})`))),n},[]);return t.length>0?{type:"filter",expr:t.join(" && ")}:null}}class C5 extends Mr{clone(){return new C5(this.parent,nn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=nn(n);const{flatten:r,as:i=[]}=this.transform;this.transform.as=r.map((s,o)=>i[o]??s)}dependentFields(){return new Set(this.transform.flatten)}producedFields(){return new Set(this.transform.as)}hash(){return`FlattenTransform ${Vn(this.transform)}`}assemble(){const{flatten:t,as:n}=this.transform;return{type:"flatten",fields:t,as:n}}}class A5 extends Mr{clone(){return new A5(null,nn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=nn(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"key",r[1]??"value"]}dependentFields(){return new Set(this.transform.fold)}producedFields(){return new Set(this.transform.as)}hash(){return`FoldTransform ${Vn(this.transform)}`}assemble(){const{fold:t,as:n}=this.transform;return{type:"fold",fields:t,as:n}}}class SE extends Mr{clone(){return new SE(null,nn(this.fields),this.geojson,this.signal)}static parseAll(t,n){if(n.component.projection&&!n.component.projection.isFit)return t;let r=0;for(const i of[[vd,yd],[Vc,bd]]){const s=i.map(o=>{const a=Ms(n.encoding[o]);return et(a)?a.field:hp(a)?{expr:`${a.datum}`}:id(a)?{expr:`${a.value}`}:void 0});(s[0]||s[1])&&(t=new SE(t,s,null,n.getName(`geojson_${r++}`)))}if(n.channelHasField(ol)){const i=n.typedFieldDef(ol);i.type===rT&&(t=new SE(t,null,i.field,n.getName(`geojson_${r++}`)))}return t}constructor(t,n,r,i){super(t),this.fields=n,this.geojson=r,this.signal=i}dependentFields(){const t=(this.fields??[]).filter(mt);return new Set([...this.geojson?[this.geojson]:[],...t])}producedFields(){return new Set}hash(){return`GeoJSON ${this.geojson} ${this.signal} ${Vn(this.fields)}`}assemble(){return[...this.geojson?[{type:"filter",expr:`isValid(datum["${this.geojson}"])`}]:[],{type:"geojson",...this.fields?{fields:this.fields}:{},...this.geojson?{geojson:this.geojson}:{},signal:this.signal}]}}class QI extends Mr{clone(){return new QI(null,this.projection,nn(this.fields),nn(this.as))}constructor(t,n,r,i){super(t),this.projection=n,this.fields=r,this.as=i}static parseAll(t,n){if(!n.projectionName())return t;for(const r of[[vd,yd],[Vc,bd]]){const i=r.map(o=>{const a=Ms(n.encoding[o]);return et(a)?a.field:hp(a)?{expr:`${a.datum}`}:id(a)?{expr:`${a.value}`}:void 0}),s=r[0]===Vc?"2":"";(i[0]||i[1])&&(t=new QI(t,n.projectionName(),i,[n.getName(`x${s}`),n.getName(`y${s}`)]))}return t}dependentFields(){return new Set(this.fields.filter(mt))}producedFields(){return new Set(this.as)}hash(){return`Geopoint ${this.projection} ${Vn(this.fields)} ${Vn(this.as)}`}assemble(){return{type:"geopoint",projection:this.projection,fields:this.fields,as:this.as}}}class M1 extends Mr{clone(){return new M1(null,nn(this.transform))}constructor(t,n){super(t),this.transform=n}dependentFields(){return new Set([this.transform.impute,this.transform.key,...this.transform.groupby??[]])}producedFields(){return new Set([this.transform.impute])}processSequence(t){const{start:n=0,stop:r,step:i}=t;return{signal:`sequence(${[n,r,...i?[i]:[]].join(",")})`}}static makeFromTransform(t,n){return new M1(t,n)}static makeFromEncoding(t,n){const r=n.encoding,i=r.x,s=r.y;if(et(i)&&et(s)){const o=i.impute?i:s.impute?s:void 0;if(o===void 0)return;const a=i.impute?s:s.impute?i:void 0,{method:u,value:l,frame:c,keyvals:f}=o.impute,d=kFe(n.mark,r);return new M1(t,{impute:o.field,key:a.field,...u?{method:u}:{},...l!==void 0?{value:l}:{},...c?{frame:c}:{},...f!==void 0?{keyvals:f}:{},...d.length?{groupby:d}:{}})}return null}hash(){return`Impute ${Vn(this.transform)}`}assemble(){const{impute:t,key:n,keyvals:r,method:i,groupby:s,value:o,frame:a=[null,null]}=this.transform,u={type:"impute",field:t,key:n,...r?{keyvals:men(r)?this.processSequence(r):r}:{},method:"value",...s?{groupby:s}:{},value:!i||i==="value"?o:null};if(i&&i!=="value"){const l={type:"window",as:[`imputed_${t}_value`],ops:[i],fields:[t],frame:a,ignorePeers:!1,...s?{groupby:s}:{}},c={type:"formula",expr:`datum.${t} === null ? datum.imputed_${t}_value : datum.${t}`,as:t};return[u,l,c]}else return[u]}}class I5 extends Mr{clone(){return new I5(null,nn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=nn(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??n.on,r[1]??n.loess]}dependentFields(){return new Set([this.transform.loess,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`LoessTransform ${Vn(this.transform)}`}assemble(){const{loess:t,on:n,...r}=this.transform;return{type:"loess",x:n,y:t,...r}}}class JI extends Mr{clone(){return new JI(null,nn(this.transform),this.secondary)}constructor(t,n,r){super(t),this.transform=n,this.secondary=r}static make(t,n,r,i){const s=n.component.data.sources,{from:o}=r;let a=null;if(gen(o)){let u=gje(o.data,s);u||(u=new Ab(o.data),s.push(u));const l=n.getName(`lookup_${i}`);a=new Xu(u,l,Ei.Lookup,n.component.data.outputNodeRefCounts),n.component.data.outputNodes[l]=a}else if(yen(o)){const u=o.param;r={as:u,...r};let l;try{l=n.getSelectionComponent(Ci(u),u)}catch{throw new Error(qXt(u))}if(a=l.materialized,!a)throw new Error(WXt(u))}return new JI(t,r,a.getSource())}dependentFields(){return new Set([this.transform.lookup])}producedFields(){return new Set(this.transform.as?pt(this.transform.as):this.transform.from.fields)}hash(){return`Lookup ${Vn({transform:this.transform,secondary:this.secondary})}`}assemble(){let t;if(this.transform.from.fields)t={values:this.transform.from.fields,...this.transform.as?{as:pt(this.transform.as)}:{}};else{let n=this.transform.as;mt(n)||(Ze(eQt),n="_lookup"),t={as:[n]}}return{type:"lookup",from:this.secondary,key:this.transform.from.key,fields:[this.transform.lookup],...t,...this.transform.default?{default:this.transform.default}:{}}}}class k5 extends Mr{clone(){return new k5(null,nn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=nn(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"prob",r[1]??"value"]}dependentFields(){return new Set([this.transform.quantile,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`QuantileTransform ${Vn(this.transform)}`}assemble(){const{quantile:t,...n}=this.transform;return{type:"quantile",field:t,...n}}}class R5 extends Mr{clone(){return new R5(null,nn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=nn(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??n.on,r[1]??n.regression]}dependentFields(){return new Set([this.transform.regression,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`RegressionTransform ${Vn(this.transform)}`}assemble(){const{regression:t,on:n,...r}=this.transform;return{type:"regression",x:n,y:t,...r}}}class N5 extends Mr{clone(){return new N5(null,nn(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=oh((this.transform.groupby??[]).concat(t),n=>n)}producedFields(){}dependentFields(){return new Set([this.transform.pivot,this.transform.value,...this.transform.groupby??[]])}hash(){return`PivotTransform ${Vn(this.transform)}`}assemble(){const{pivot:t,value:n,groupby:r,limit:i,op:s}=this.transform;return{type:"pivot",field:t,value:n,...i!==void 0?{limit:i}:{},...s!==void 0?{op:s}:{},...r!==void 0?{groupby:r}:{}}}}class P5 extends Mr{clone(){return new P5(null,nn(this.transform))}constructor(t,n){super(t),this.transform=n}dependentFields(){return new Set}producedFields(){return new Set}hash(){return`SampleTransform ${Vn(this.transform)}`}assemble(){return{type:"sample",size:this.transform.sample}}}function pje(e){let t=0;function n(r,i){if(r instanceof Ab&&!r.isGenerator&&!Bx(r.data)&&(e.push(i),i={name:null,source:i.name,transform:[]}),r instanceof ma&&(r.parent instanceof Ab&&!i.source?(i.format={...i.format,parse:r.assembleFormatParse()},i.transform.push(...r.assembleTransforms(!0))):i.transform.push(...r.assembleTransforms())),r instanceof oT){i.name||(i.name=`data_${t++}`),!i.source||i.transform.length>0?(e.push(i),r.data=i.name):r.data=i.source,e.push(...r.assemble());return}switch((r instanceof YR||r instanceof KR||r instanceof XI||r instanceof sT||r instanceof zx||r instanceof QI||r instanceof Wf||r instanceof JI||r instanceof aT||r instanceof v_||r instanceof A5||r instanceof C5||r instanceof S5||r instanceof I5||r instanceof k5||r instanceof R5||r instanceof Sy||r instanceof P5||r instanceof N5||r instanceof T5)&&i.transform.push(r.assemble()),(r instanceof Sh||r instanceof xh||r instanceof M1||r instanceof pm||r instanceof SE)&&i.transform.push(...r.assemble()),r instanceof Xu&&(i.source&&i.transform.length===0?r.setSource(i.source):r.parent instanceof Xu?r.setSource(i.name):(i.name||(i.name=`data_${t++}`),r.setSource(i.name),r.numChildren()===1&&(e.push(i),i={name:null,source:i.name,transform:[]}))),r.numChildren()){case 0:r instanceof Xu&&(!i.source||i.transform.length>0)&&e.push(i);break;case 1:n(r.children[0],i);break;default:{i.name||(i.name=`data_${t++}`);let s=i.name;!i.source||i.transform.length>0?e.push(i):s=i.source;for(const o of r.children)n(o,{name:null,source:s,transform:[]});break}}}return n}function Irn(e){const t=[],n=pje(t);for(const r of e.children)n(r,{source:e.name,name:null,transform:[]});return t}function krn(e,t){const n=[],r=pje(n);let i=0;for(const o of e.sources){o.hasName()||(o.dataName=`source_${i++}`);const a=o.assemble();r(o,a)}for(const o of n)o.transform.length===0&&delete o.transform;let s=0;for(const[o,a]of n.entries())(a.transform??[]).length===0&&!a.source&&n.splice(s++,0,n.splice(o,1)[0]);for(const o of n)for(const a of o.transform??[])a.type==="lookup"&&(a.from=e.outputNodes[a.from].getSource());for(const o of n)o.name in t&&(o.values=t[o.name]);return n}function Rrn(e){return e==="top"||e==="left"||Rt(e)?"header":"footer"}function Nrn(e){for(const t of Ac)Prn(e,t);$0e(e,"x"),$0e(e,"y")}function Prn(e,t){var o;const{facet:n,config:r,child:i,component:s}=e;if(e.channelHasField(t)){const a=n[t],u=Hx("title",null,r,t);let l=EE(a,r,{allowDisabling:!0,includeDefault:u===void 0||!!u});i.component.layoutHeaders[t].title&&(l=je(l)?l.join(", "):l,l+=` / ${i.component.layoutHeaders[t].title}`,i.component.layoutHeaders[t].title=null);const c=Hx("labelOrient",a.header,r,t),f=a.header!==null?fs((o=a.header)==null?void 0:o.labels,r.header.labels,!0):!1,d=Hn(["bottom","right"],c)?"footer":"header";s.layoutHeaders[t]={title:a.header!==null?l:null,facetFieldDef:a,[d]:t==="facet"?[]:[mje(e,t,f)]}}}function mje(e,t,n){const r=t==="row"?"height":"width";return{labels:n,sizeSignal:e.child.component.layoutSize.get(r)?e.child.getSizeSignalRef(r):void 0,axes:[]}}function $0e(e,t){const{child:n}=e;if(n.component.axes[t]){const{layoutHeaders:r,resolve:i}=e.component;if(i.axis[t]=aie(i,t),i.axis[t]==="shared"){const s=t==="x"?"column":"row",o=r[s];for(const a of n.component.axes[t]){const u=Rrn(a.get("orient"));o[u]??(o[u]=[mje(e,s,!1)]);const l=rC(a,"main",e.config,{header:!0});l&&o[u][0].axes.push(l),a.mainExtracted=!0}}}}function Drn(e){mie(e),eL(e,"width"),eL(e,"height")}function Orn(e){mie(e);const t=e.layout.columns===1?"width":"childWidth",n=e.layout.columns===void 0?"height":"childHeight";eL(e,t),eL(e,n)}function mie(e){for(const t of e.children)t.parseLayoutSize()}function eL(e,t){const n=B5e(t),r=QF(n),i=e.component.resolve,s=e.component.layoutSize;let o;for(const a of e.children){const u=a.component.layoutSize.getWithExplicit(n),l=i.scale[r]??z5e(r,e);if(l==="independent"&&u.value==="step"){o=void 0;break}if(o){if(l==="independent"&&o.value!==u.value){o=void 0;break}o=wy(o,u,n,"")}else o=u}if(o){for(const a of e.children)e.renameSignal(a.getName(n),e.getName(t)),a.component.layoutSize.set(n,"merged",!1);s.setWithExplicit(t,o)}else s.setWithExplicit(t,{explicit:!1,value:void 0})}function $rn(e){const{size:t,component:n}=e;for(const r of dp){const i=al(r);if(t[i]){const s=t[i];n.layoutSize.set(i,Vh(s)?"step":s,!0)}else{const s=Mrn(e,i);n.layoutSize.set(i,s,!1)}}}function Mrn(e,t){const n=t==="width"?"x":"y",r=e.config,i=e.getScaleComponent(n);if(i){const s=i.get("type"),o=i.get("range");if(co(s)){const a=XM(r.view,t);return rv(o)||Vh(a)?"step":a}else return yq(r.view,t)}else{if(e.hasProjection||e.mark==="arc")return yq(r.view,t);{const s=XM(r.view,t);return Vh(s)?s.step:s}}}function Nq(e,t,n){return at(t,{suffix:`by_${at(e)}`,...n})}class sA extends hje{constructor(t,n,r,i){super(t,"facet",n,r,i,t.resolve),this.child=_ie(t.spec,this,this.getName("child"),void 0,i),this.children=[this.child],this.facet=this.initFacet(t.facet)}initFacet(t){if(!VR(t))return{facet:this.initFacetFieldDef(t,"facet")};const n=Ye(t),r={};for(const i of n){if(![fm,dm].includes(i)){Ze(e5(i,"facet"));break}const s=t[i];if(s.field===void 0){Ze(dq(s,i));break}r[i]=this.initFacetFieldDef(s,i)}return r}initFacetFieldDef(t,n){const r=Fre(t,n);return r.header?r.header=Ru(r.header):r.header===null&&(r.header=null),r}channelHasField(t){return!!this.facet[t]}fieldDef(t){return this.facet[t]}parseData(){this.component.data=D5(this),this.child.parseData()}parseLayoutSize(){mie(this)}parseSelections(){this.child.parseSelections(),this.component.selection=this.child.component.selection}parseMarkGroup(){this.child.parseMarkGroup()}parseAxesAndHeaders(){this.child.parseAxesAndHeaders(),Nrn(this)}assembleSelectionTopLevelSignals(t){return this.child.assembleSelectionTopLevelSignals(t)}assembleSignals(){return this.child.assembleSignals(),[]}assembleSelectionData(t){return this.child.assembleSelectionData(t)}getHeaderLayoutMixins(){const t={};for(const n of Ac)for(const r of sie){const i=this.component.layoutHeaders[n],s=i[r],{facetFieldDef:o}=i;if(o){const a=Hx("titleOrient",o.header,this.config,n);if(["right","bottom"].includes(a)){const u=w5(n,a);t.titleAnchor??(t.titleAnchor={}),t.titleAnchor[u]="end"}}if(s!=null&&s[0]){const a=n==="row"?"height":"width",u=r==="header"?"headerBand":"footerBand";n!=="facet"&&!this.child.component.layoutSize.get(a)&&(t[u]??(t[u]={}),t[u][n]=.5),i.title&&(t.offset??(t.offset={}),t.offset[n==="row"?"rowTitle":"columnTitle"]=10)}}return t}assembleDefaultLayout(){const{column:t,row:n}=this.facet,r=t?this.columnDistinctSignal():n?1:void 0;let i="all";return(!n&&this.component.resolve.scale.x==="independent"||!t&&this.component.resolve.scale.y==="independent")&&(i="none"),{...this.getHeaderLayoutMixins(),...r?{columns:r}:{},bounds:"full",align:i}}assembleLayoutSignals(){return this.child.assembleLayoutSignals()}columnDistinctSignal(){if(!(this.parent&&this.parent instanceof sA))return{signal:`length(data('${this.getName("column_domain")}'))`}}assembleGroupStyle(){}assembleGroup(t){return this.parent&&this.parent instanceof sA?{...this.channelHasField("column")?{encode:{update:{columns:{field:at(this.facet.column,{prefix:"distinct"})}}}}:{},...super.assembleGroup(t)}:super.assembleGroup(t)}getCardinalityAggregateForChild(){const t=[],n=[],r=[];if(this.child instanceof sA){if(this.child.channelHasField("column")){const i=at(this.child.facet.column);t.push(i),n.push("distinct"),r.push(`distinct_${i}`)}}else for(const i of dp){const s=this.child.component.scales[i];if(s&&!s.merged){const o=s.get("type"),a=s.get("range");if(co(o)&&rv(a)){const u=x5(this.child,i),l=die(u);l?(t.push(l),n.push("distinct"),r.push(`distinct_${l}`)):Ze(hre(i))}}}return{fields:t,ops:n,as:r}}assembleFacet(){const{name:t,data:n}=this.component.data.facetRoot,{row:r,column:i}=this.facet,{fields:s,ops:o,as:a}=this.getCardinalityAggregateForChild(),u=[];for(const c of Ac){const f=this.facet[c];if(f){u.push(at(f));const{bin:d,sort:h}=f;if(oi(d)&&u.push(at(f,{binSuffix:"end"})),Eh(h)){const{field:p,op:m=o5}=h,g=Nq(f,h);r&&i?(s.push(g),o.push("max"),a.push(g)):(s.push(p),o.push(m),a.push(g))}else if(je(h)){const p=Vx(f,c);s.push(p),o.push("max"),a.push(p)}}}const l=!!r&&!!i;return{name:t,data:n,groupby:u,...l||s.length>0?{aggregate:{...l?{cross:l}:{},...s.length?{fields:s,ops:o,as:a}:{}}}:{}}}facetSortFields(t){const{facet:n}=this,r=n[t];return r?Eh(r.sort)?[Nq(r,r.sort,{expr:"datum"})]:je(r.sort)?[Vx(r,t,{expr:"datum"})]:[at(r,{expr:"datum"})]:[]}facetSortOrder(t){const{facet:n}=this,r=n[t];if(r){const{sort:i}=r;return[(Eh(i)?i.order:!je(i)&&i)||"ascending"]}return[]}assembleLabelTitle(){var i;const{facet:t,config:n}=this;if(t.facet)return Tq(t.facet,"facet",n);const r={row:["top","bottom"],column:["left","right"]};for(const s of iie)if(t[s]){const o=Hx("labelOrient",(i=t[s])==null?void 0:i.header,n,s);if(r[s].includes(o))return Tq(t[s],s,n)}}assembleMarks(){const{child:t}=this,n=this.component.data.facetRoot,r=Irn(n),i=t.assembleGroupEncodeEntry(!1),s=this.assembleLabelTitle()||t.assembleTitle(),o=t.assembleGroupStyle();return[{name:this.getName("cell"),type:"group",...s?{title:s}:{},...o?{style:o}:{},from:{facet:this.assembleFacet()},sort:{field:Ac.map(u=>this.facetSortFields(u)).flat(),order:Ac.map(u=>this.facetSortOrder(u)).flat()},...r.length>0?{data:r}:{},...i?{encode:{update:i}}:{},...t.assembleGroup(Gen(this,[]))}]}getMapping(){return this.facet}}function Lrn(e,t){const{row:n,column:r}=t;if(n&&r){let i=null;for(const s of[n,r])if(Eh(s.sort)){const{field:o,op:a=o5}=s.sort;e=i=new v_(e,{joinaggregate:[{op:a,field:o,as:Nq(s,s.sort,{forAs:!0})}],groupby:[at(s)]})}return i}return null}function gje(e,t){var n,r,i,s;for(const o of t){const a=o.data;if(e.name&&o.hasName()&&e.name!==o.dataName)continue;const u=(n=e.format)==null?void 0:n.mesh,l=(r=a.format)==null?void 0:r.feature;if(u&&l)continue;const c=(i=e.format)==null?void 0:i.feature;if((c||l)&&c!==l)continue;const f=(s=a.format)==null?void 0:s.mesh;if(!((u||f)&&u!==f)){if(KI(e)&&KI(a)){if(Rl(e.values,a.values))return o}else if(Bx(e)&&Bx(a)){if(e.url===a.url)return o}else if(s5e(e)&&e.name===o.dataName)return o}}return null}function Frn(e,t){if(e.data||!e.parent){if(e.data===null){const r=new Ab({values:[]});return t.push(r),r}const n=gje(e.data,t);if(n)return M0(e.data)||(n.data.format=t4e({},e.data.format,n.data.format)),!n.hasName()&&e.data.name&&(n.dataName=e.data.name),n;{const r=new Ab(e.data);return t.push(r),r}}else return e.parent.component.data.facetRoot?e.parent.component.data.facetRoot:e.parent.component.data.main}function jrn(e,t,n){let r=0;for(const i of t.transforms){let s,o;if(Aen(i))o=e=new zx(e,i),s="derived";else if(Qre(i)){const a=Rnn(i);o=e=ma.makeWithAncestors(e,{},a,n)??e,e=new sT(e,t,i.filter)}else if(e5e(i))o=e=Sh.makeFromTransform(e,i,t),s="number";else if(ken(i))s="date",n.getWithExplicit(i.field).value===void 0&&(e=new ma(e,{[i.field]:s}),n.set(i.field,s,!1)),o=e=xh.makeFromTransform(e,i);else if(Ren(i))o=e=Wf.makeFromTransform(e,i),s="number",rie(t)&&(e=new Sy(e));else if(ZFe(i))o=e=JI.make(e,t,i,r++),s="derived";else if(Sen(i))o=e=new aT(e,i),s="number";else if(Ten(i))o=e=new v_(e,i),s="number";else if(Nen(i))o=e=pm.makeFromTransform(e,i),s="derived";else if(Pen(i))o=e=new A5(e,i),s="derived";else if(Den(i))o=e=new T5(e,i),s="derived";else if(Cen(i))o=e=new C5(e,i),s="derived";else if(ven(i))o=e=new N5(e,i),s="derived";else if(xen(i))e=new P5(e,i);else if(Ien(i))o=e=M1.makeFromTransform(e,i),s="derived";else if(ben(i))o=e=new S5(e,i),s="derived";else if(_en(i))o=e=new k5(e,i),s="derived";else if(wen(i))o=e=new R5(e,i),s="derived";else if(Een(i))o=e=new I5(e,i),s="derived";else{Ze(ZXt(i));continue}if(o&&s!==void 0)for(const a of o.producedFields()??[])n.set(a,s,!1)}return e}function D5(e){var h;let t=Frn(e,e.component.data.sources);const{outputNodes:n,outputNodeRefCounts:r}=e.component.data,i=e.data,o=!(i&&(M0(i)||Bx(i)||KI(i)))&&e.parent?e.parent.component.data.ancestorParse.clone():new qen;M0(i)?(o5e(i)?t=new KR(t,i.sequence):Jre(i)&&(t=new YR(t,i.graticule)),o.parseNothing=!0):((h=i==null?void 0:i.format)==null?void 0:h.parse)===null&&(o.parseNothing=!0),t=ma.makeExplicit(t,e,o)??t,t=new Sy(t);const a=e.parent&&uT(e.parent);(Wi(e)||$l(e))&&a&&(t=Sh.makeFromEncoding(t,e)??t),e.transforms.length>0&&(t=jrn(t,e,o));const u=Pnn(e),l=Nnn(e);t=ma.makeWithAncestors(t,{},{...u,...l},o)??t,Wi(e)&&(t=SE.parseAll(t,e),t=QI.parseAll(t,e)),(Wi(e)||$l(e))&&(a||(t=Sh.makeFromEncoding(t,e)??t),t=xh.makeFromEncoding(t,e)??t,t=zx.parseAllForSortIndex(t,e));const c=t=M0e(Ei.Raw,e,t);if(Wi(e)){const p=Wf.makeFromEncoding(t,e);p&&(t=p,rie(e)&&(t=new Sy(t))),t=M1.makeFromEncoding(t,e)??t,t=pm.makeFromEncoding(t,e)??t}Wi(e)&&(t=XI.make(t,e)??t);const f=t=M0e(Ei.Main,e,t);Wi(e)&&Atn(e,f);let d=null;if($l(e)){const p=e.getName("facet");t=Lrn(t,e.facet)??t,d=new oT(t,e,p,f.getSource()),n[p]=d}return{...e.component.data,outputNodes:n,outputNodeRefCounts:r,raw:c,main:f,facetRoot:d,ancestorParse:o}}function M0e(e,t,n){const{outputNodes:r,outputNodeRefCounts:i}=t.component.data,s=t.getDataName(e),o=new Xu(n,s,e,i);return r[s]=o,o}class Brn extends pie{constructor(t,n,r,i){var s,o,a,u;super(t,"concat",n,r,i,t.resolve),(((o=(s=t.resolve)==null?void 0:s.axis)==null?void 0:o.x)==="shared"||((u=(a=t.resolve)==null?void 0:a.axis)==null?void 0:u.y)==="shared")&&Ze(XXt),this.children=this.getChildren(t).map((l,c)=>_ie(l,this,this.getName(`concat_${c}`),void 0,i))}parseData(){this.component.data=D5(this);for(const t of this.children)t.parseData()}parseSelections(){this.component.selection={};for(const t of this.children){t.parseSelections();for(const n of Ye(t.component.selection))this.component.selection[n]=t.component.selection[n]}}parseMarkGroup(){for(const t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){for(const t of this.children)t.parseAxesAndHeaders()}getChildren(t){return p5(t)?t.vconcat:Kre(t)?t.hconcat:t.concat}parseLayoutSize(){Orn(this)}parseAxisGroup(){return null}assembleSelectionTopLevelSignals(t){return this.children.reduce((n,r)=>r.assembleSelectionTopLevelSignals(n),t)}assembleSignals(){return this.children.forEach(t=>t.assembleSignals()),[]}assembleLayoutSignals(){const t=oie(this);for(const n of this.children)t.push(...n.assembleLayoutSignals());return t}assembleSelectionData(t){return this.children.reduce((n,r)=>r.assembleSelectionData(n),t)}assembleMarks(){return this.children.map(t=>{const n=t.assembleTitle(),r=t.assembleGroupStyle(),i=t.assembleGroupEncodeEntry(!1);return{type:"group",name:t.getName("group"),...n?{title:n}:{},...r?{style:r}:{},...i?{encode:{update:i}}:{},...t.assembleGroup()}})}assembleGroupStyle(){}assembleDefaultLayout(){const t=this.layout.columns;return{...t!=null?{columns:t}:{},bounds:"full",align:"each"}}}function Urn(e){return e===!1||e===null}const zrn={disable:1,gridScale:1,scale:1,...SFe,labelExpr:1,encode:1},yje=Ye(zrn);class gie extends mg{constructor(t={},n={},r=!1){super(),this.explicit=t,this.implicit=n,this.mainExtracted=r}clone(){return new gie(nn(this.explicit),nn(this.implicit),this.mainExtracted)}hasAxisPart(t){return t==="axis"?!0:t==="grid"||t==="title"?!!this.get(t):!Urn(this.get(t))}hasOrientSignalRef(){return Rt(this.explicit.orient)}}function Vrn(e,t,n){const{encoding:r,config:i}=e,s=Ms(r[t])??Ms(r[fp(t)]),o=e.axis(t)||{},{format:a,formatType:u}=o;if(xb(u))return{text:Lf({fieldOrDatumDef:s,field:"datum.value",format:a,formatType:u,config:i}),...n};if(a===void 0&&u===void 0&&i.customFormatTypes){if(Lx(s)==="quantitative"){if(Fx(s)&&s.stack==="normalize"&&i.normalizedNumberFormatType)return{text:Lf({fieldOrDatumDef:s,field:"datum.value",format:i.normalizedNumberFormat,formatType:i.normalizedNumberFormatType,config:i}),...n};if(i.numberFormatType)return{text:Lf({fieldOrDatumDef:s,field:"datum.value",format:i.numberFormat,formatType:i.numberFormatType,config:i}),...n}}if(Lx(s)==="temporal"&&i.timeFormatType&&et(s)&&!s.timeUnit)return{text:Lf({fieldOrDatumDef:s,field:"datum.value",format:i.timeFormat,formatType:i.timeFormatType,config:i}),...n}}return n}function Hrn(e){return dp.reduce((t,n)=>(e.component.scales[n]&&(t[n]=[Qrn(n,e)]),t),{})}const qrn={bottom:"top",top:"bottom",left:"right",right:"left"};function Wrn(e){const{axes:t,resolve:n}=e.component,r={top:0,bottom:0,right:0,left:0};for(const i of e.children){i.parseAxesAndHeaders();for(const s of Ye(i.component.axes))n.axis[s]=aie(e.component.resolve,s),n.axis[s]==="shared"&&(t[s]=Grn(t[s],i.component.axes[s]),t[s]||(n.axis[s]="independent",delete t[s]))}for(const i of dp){for(const s of e.children)if(s.component.axes[i]){if(n.axis[i]==="independent"){t[i]=(t[i]??[]).concat(s.component.axes[i]);for(const o of s.component.axes[i]){const{value:a,explicit:u}=o.getWithExplicit("orient");if(!Rt(a)){if(r[a]>0&&!u){const l=qrn[a];r[a]>r[l]&&o.set("orient",l,!1)}r[a]++}}}delete s.component.axes[i]}if(n.axis[i]==="independent"&&t[i]&&t[i].length>1)for(const[s,o]of(t[i]||[]).entries())s>0&&o.get("grid")&&!o.explicit.grid&&(o.implicit.grid=!1)}}function Grn(e,t){if(e){if(e.length!==t.length)return;const n=e.length;for(let r=0;r<n;r++){const i=e[r],s=t[r];if(!!i!=!!s)return;if(i&&s){const o=i.getWithExplicit("orient"),a=s.getWithExplicit("orient");if(o.explicit&&a.explicit&&o.value!==a.value)return;e[r]=Yrn(i,s)}}}else return t.map(n=>n.clone());return e}function Yrn(e,t){for(const n of yje){const r=wy(e.getWithExplicit(n),t.getWithExplicit(n),n,"axis",(i,s)=>{switch(n){case"title":return k4e(i,s);case"gridScale":return{explicit:i.explicit,value:fs(i.value,s.value)}}return g5(i,s,n,"axis")});e.setWithExplicit(n,r)}return e}function Krn(e,t,n,r,i){if(t==="disable")return n!==void 0;switch(n=n||{},t){case"titleAngle":case"labelAngle":return e===(Rt(n.labelAngle)?n.labelAngle:GI(n.labelAngle));case"values":return!!n.values;case"encode":return!!n.encoding||!!n.labelAngle;case"title":if(e===$5e(r,i))return!0}return e===n[t]}const Xrn=new Set(["grid","translate","format","formatType","orient","labelExpr","tickCount","position","tickMinStep"]);function Qrn(e,t){var y,v;let n=t.axis(e);const r=new gie,i=Ms(t.encoding[e]),{mark:s,config:o}=t,a=(n==null?void 0:n.orient)||((y=o[e==="x"?"axisX":"axisY"])==null?void 0:y.orient)||((v=o.axis)==null?void 0:v.orient)||Ltn(e),u=t.getScaleComponent(e).get("type"),l=Rtn(e,u,a,t.config),c=n!==void 0?!n:xq("disable",o.style,n==null?void 0:n.style,l).configValue;if(r.set("disable",c,n!==void 0),c)return r;n=n||{};const f=Otn(i,n,e,o.style,l),d=iFe(n.formatType,i,u),h=rFe(i,i.type,n.format,n.formatType,o,!0),p={fieldOrDatumDef:i,axis:n,channel:e,model:t,scaleType:u,orient:a,labelAngle:f,format:h,formatType:d,mark:s,config:o};for(const _ of yje){const w=_ in _0e?_0e[_](p):Gge(_)?n[_]:void 0,E=w!==void 0,S=Krn(w,_,n,t,e);if(E&&S)r.set(_,w,S);else{const{configValue:T=void 0,configFrom:C=void 0}=Gge(_)&&_!=="values"?xq(_,o.style,n.style,l):{},A=T!==void 0;E&&!A?r.set(_,w,S):(C!=="vgAxisConfig"||Xrn.has(_)&&A||WR(T)||Rt(T))&&r.set(_,T,!1)}}const m=n.encoding??{},g=xFe.reduce((_,w)=>{if(!r.hasAxisPart(w))return _;const E=U5e(m[w]??{},t),S=w==="labels"?Vrn(t,e,E):E;return S!==void 0&&!jr(S)&&(_[w]={update:S}),_},{});return jr(g)||r.set("encode",g,!!n.encoding||n.labelAngle!==void 0),r}function Jrn({encoding:e,size:t}){for(const n of dp){const r=al(n);Vh(t[r])&&f0(e[n])&&(delete t[r],Ze(O4e(r)))}return t}const Zrn={vgMark:"arc",encodeEntry:e=>({...ef(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...pa("x",e,{defaultPos:"mid"}),...pa("y",e,{defaultPos:"mid"}),...Ey(e,"radius"),...Ey(e,"theta")})},ein={vgMark:"area",encodeEntry:e=>({...ef(e,{align:"ignore",baseline:"ignore",color:"include",orient:"include",size:"ignore",theta:"ignore"}),...QM("x",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="horizontal"}),...QM("y",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="vertical"}),...nie(e)})},tin={vgMark:"rect",encodeEntry:e=>({...ef(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...Ey(e,"x"),...Ey(e,"y")})},nin={vgMark:"shape",encodeEntry:e=>({...ef(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"})}),postEncodingTransform:e=>{const{encoding:t}=e,n=t.shape;return[{type:"geoshape",projection:e.projectionName(),...n&&et(n)&&n.type===rT?{field:at(n,{expr:"datum"})}:{}}]}},rin={vgMark:"image",encodeEntry:e=>({...ef(e,{align:"ignore",baseline:"ignore",color:"ignore",orient:"ignore",size:"ignore",theta:"ignore"}),...Ey(e,"x"),...Ey(e,"y"),...eie(e,"url")})},iin={vgMark:"line",encodeEntry:e=>({...ef(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...pa("x",e,{defaultPos:"mid"}),...pa("y",e,{defaultPos:"mid"}),...eo("size",e,{vgChannel:"strokeWidth"}),...nie(e)})},sin={vgMark:"trail",encodeEntry:e=>({...ef(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...pa("x",e,{defaultPos:"mid"}),...pa("y",e,{defaultPos:"mid"}),...eo("size",e),...nie(e)})};function yie(e,t){const{config:n}=e;return{...ef(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...pa("x",e,{defaultPos:"mid"}),...pa("y",e,{defaultPos:"mid"}),...eo("size",e),...eo("angle",e),...oin(e,n,t)}}function oin(e,t,n){return n?{shape:{value:n}}:eo("shape",e)}const ain={vgMark:"symbol",encodeEntry:e=>yie(e)},uin={vgMark:"symbol",encodeEntry:e=>yie(e,"circle")},lin={vgMark:"symbol",encodeEntry:e=>yie(e,"square")},cin={vgMark:"rect",encodeEntry:e=>({...ef(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...Ey(e,"x"),...Ey(e,"y")})},fin={vgMark:"rule",encodeEntry:e=>{const{markDef:t}=e,n=t.orient;return!e.encoding.x&&!e.encoding.y&&!e.encoding.latitude&&!e.encoding.longitude?{}:{...ef(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...QM("x",e,{defaultPos:n==="horizontal"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="vertical"}),...QM("y",e,{defaultPos:n==="vertical"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="horizontal"}),...eo("size",e,{vgChannel:"strokeWidth"})}}},din={vgMark:"text",encodeEntry:e=>{const{config:t,encoding:n}=e;return{...ef(e,{align:"include",baseline:"include",color:"include",size:"ignore",orient:"ignore",theta:"include"}),...pa("x",e,{defaultPos:"mid"}),...pa("y",e,{defaultPos:"mid"}),...eie(e),...eo("size",e,{vgChannel:"fontSize"}),...eo("angle",e),...g0e("align",hin(e.markDef,n,t)),...g0e("baseline",pin(e.markDef,n,t)),...pa("radius",e,{defaultPos:null}),...pa("theta",e,{defaultPos:null})}}};function hin(e,t,n){if(wr("align",e,n)===void 0)return"center"}function pin(e,t,n){if(wr("baseline",e,n)===void 0)return"middle"}const min={vgMark:"rect",encodeEntry:e=>{const{config:t,markDef:n}=e,r=n.orient,i=r==="horizontal"?"width":"height",s=r==="horizontal"?"height":"width";return{...ef(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...pa("x",e,{defaultPos:"mid",vgChannel:"xc"}),...pa("y",e,{defaultPos:"mid",vgChannel:"yc"}),...eo("size",e,{defaultValue:gin(e),vgChannel:i}),[s]:hi(wr("thickness",n,t))}}};function gin(e){const{config:t,markDef:n}=e,{orient:r}=n,i=r==="horizontal"?"width":"height",s=e.getScaleComponent(r==="horizontal"?"x":"y"),o=wr("size",n,t,{vgChannel:i})??t.tick.bandSize;if(o!==void 0)return o;{const a=s?s.get("range"):void 0;return a&&rv(a)&&lr(a.step)?a.step*3/4:KM(t.view,i)*3/4}}const zP={arc:Zrn,area:ein,bar:tin,circle:uin,geoshape:nin,image:rin,line:iin,point:ain,rect:cin,rule:fin,square:lin,text:din,tick:min,trail:sin};function yin(e){if(Hn([i5,n5,PJt],e.mark)){const t=kFe(e.mark,e.encoding);if(t.length>0)return vin(e,t)}else if(e.mark===r5){const t=fq.some(n=>wr(n,e.markDef,e.config));if(e.stack&&!e.fieldDef("size")&&t)return bin(e)}return vie(e)}const L0e="faceted_path_";function vin(e,t){return[{name:e.getName("pathgroup"),type:"group",from:{facet:{name:L0e+e.requestDataName(Ei.Main),data:e.requestDataName(Ei.Main),groupby:t}},encode:{update:{width:{field:{group:"width"}},height:{field:{group:"height"}}}},marks:vie(e,{fromPrefix:L0e})}]}const F0e="stack_group_";function bin(e){var l;const[t]=vie(e,{fromPrefix:F0e}),n=e.scaleName(e.stack.fieldChannel),r=(c={})=>e.vgField(e.stack.fieldChannel,c),i=(c,f)=>{const d=[r({prefix:"min",suffix:"start",expr:f}),r({prefix:"max",suffix:"start",expr:f}),r({prefix:"min",suffix:"end",expr:f}),r({prefix:"max",suffix:"end",expr:f})];return`${c}(${d.map(h=>`scale('${n}',${h})`).join(",")})`};let s,o;e.stack.fieldChannel==="x"?(s={...Nx(t.encode.update,["y","yc","y2","height",...fq]),x:{signal:i("min","datum")},x2:{signal:i("max","datum")},clip:{value:!0}},o={x:{field:{group:"x"},mult:-1},height:{field:{group:"height"}}},t.encode.update={...Yu(t.encode.update,["y","yc","y2"]),height:{field:{group:"height"}}}):(s={...Nx(t.encode.update,["x","xc","x2","width"]),y:{signal:i("min","datum")},y2:{signal:i("max","datum")},clip:{value:!0}},o={y:{field:{group:"y"},mult:-1},width:{field:{group:"width"}}},t.encode.update={...Yu(t.encode.update,["x","xc","x2"]),width:{field:{group:"width"}}});for(const c of fq){const f=zm(c,e.markDef,e.config);t.encode.update[c]?(s[c]=t.encode.update[c],delete t.encode.update[c]):f&&(s[c]=hi(f)),f&&(t.encode.update[c]={value:0})}const a=[];if(((l=e.stack.groupbyChannels)==null?void 0:l.length)>0)for(const c of e.stack.groupbyChannels){const f=e.fieldDef(c),d=at(f);d&&a.push(d),(f!=null&&f.bin||f!=null&&f.timeUnit)&&a.push(at(f,{binSuffix:"end"}))}return s=["stroke","strokeWidth","strokeJoin","strokeCap","strokeDash","strokeDashOffset","strokeMiterLimit","strokeOpacity"].reduce((c,f)=>{if(t.encode.update[f])return{...c,[f]:t.encode.update[f]};{const d=zm(f,e.markDef,e.config);return d!==void 0?{...c,[f]:hi(d)}:c}},s),s.stroke&&(s.strokeForeground={value:!0},s.strokeOffset={value:0}),[{type:"group",from:{facet:{data:e.requestDataName(Ei.Main),name:F0e+e.requestDataName(Ei.Main),groupby:a,aggregate:{fields:[r({suffix:"start"}),r({suffix:"start"}),r({suffix:"end"}),r({suffix:"end"})],ops:["min","max","min","max"]}}},encode:{update:s},marks:[{type:"group",encode:{update:o},marks:[t]}]}]}function _in(e){var a;const{encoding:t,stack:n,mark:r,markDef:i,config:s}=e,o=t.order;if(!(!je(o)&&id(o)&&lq(o.value)||!o&&lq(wr("order",i,s)))){if((je(o)||et(o))&&!n)return C4e(o,{expr:"datum"});if(m_(r)){const u=i.orient==="horizontal"?"y":"x",l=t[u];if(et(l)){const c=l.sort;if(je(c))return{field:at(l,{prefix:u,suffix:"sort_index",expr:"datum"})};if(Eh(c))return{field:at({aggregate:jre(e.encoding)?c.op:void 0,field:c.field},{expr:"datum"})};if(fFe(c)){const f=e.fieldDef(c.encoding);return{field:at(f,{expr:"datum"}),order:c.order}}else return c===null?void 0:{field:at(l,{binSuffix:(a=e.stack)!=null&&a.impute?"mid":void 0,expr:"datum"})}}return}}}function vie(e,t={fromPrefix:""}){const{mark:n,markDef:r,encoding:i,config:s}=e,o=fs(r.clip,win(e),Ein(e)),a=S4e(r),u=i.key,l=_in(e),c=xin(e),f=wr("aria",r,s),d=zP[n].postEncodingTransform?zP[n].postEncodingTransform(e):null;return[{name:e.getName("marks"),type:zP[n].vgMark,...o?{clip:o}:{},...a?{style:a}:{},...u?{key:u.field}:{},...l?{sort:l}:{},...c||{},...f===!1?{aria:f}:{},from:{data:t.fromPrefix+e.requestDataName(Ei.Main)},encode:{update:zP[n].encodeEntry(e)},...d?{transform:d}:{}}]}function win(e){const t=e.getScaleComponent("x"),n=e.getScaleComponent("y");return t!=null&&t.get("selectionExtent")||n!=null&&n.get("selectionExtent")?!0:void 0}function Ein(e){const t=e.component.projection;return t&&!t.isFit?!0:void 0}function xin(e){if(!e.component.selection)return null;const t=Ye(e.component.selection).length;let n=t,r=e.parent;for(;r&&n===0;)n=Ye(r.component.selection).length,r=r.parent;return n?{interactive:t>0||e.mark==="geoshape"||!!e.encoding.tooltip||!!e.markDef.tooltip}:null}class vje extends hje{constructor(t,n,r,i={},s){super(t,"unit",n,r,s,void 0,Kge(t)?t.view:void 0),this.specifiedScales={},this.specifiedAxes={},this.specifiedLegends={},this.specifiedProjection={},this.selection=[],this.children=[];const o=Uh(t.mark)?{...t.mark}:{type:t.mark},a=o.type;o.filled===void 0&&(o.filled=aen(o,s,{graticule:t.data&&Jre(t.data)}));const u=this.encoding=fZt(t.encoding||{},a,o.filled,s);this.markDef=XFe(o,u,s),this.size=Jrn({encoding:u,size:Kge(t)?{...i,...t.width?{width:t.width}:{},...t.height?{height:t.height}:{}}:i}),this.stack=KFe(this.markDef,u),this.specifiedScales=this.initScales(a,u),this.specifiedAxes=this.initAxes(u),this.specifiedLegends=this.initLegends(u),this.specifiedProjection=t.projection,this.selection=(t.params??[]).filter(l=>Gre(l))}get hasProjection(){const{encoding:t}=this,n=this.mark===uFe,r=t&&lXt.some(i=>ln(t[i]));return n||r}scaleDomain(t){const n=this.specifiedScales[t];return n?n.domain:void 0}axis(t){return this.specifiedAxes[t]}legend(t){return this.specifiedLegends[t]}initScales(t,n){return JF.reduce((r,i)=>{const s=Ms(n[i]);return s&&(r[i]=this.initScale(s.scale??{})),r},{})}initScale(t){const{domain:n,range:r}=t,i=Ru(t);return je(n)&&(i.domain=n.map(El)),je(r)&&(i.range=r.map(El)),i}initAxes(t){return dp.reduce((n,r)=>{const i=t[r];if(ln(i)||r===Ai&&ln(t.x2)||r===po&&ln(t.y2)){const s=ln(i)?i.axis:void 0;n[r]=s&&this.initAxis({...s})}return n},{})}initAxis(t){const n=Ye(t),r={};for(const i of n){const s=t[i];r[i]=WR(s)?x4e(s):El(s)}return r}initLegends(t){return bXt.reduce((n,r)=>{const i=Ms(t[r]);if(i&&wXt(r)){const s=i.legend;n[r]=s&&Ru(s)}return n},{})}parseData(){this.component.data=D5(this)}parseLayoutSize(){$rn(this)}parseSelections(){this.component.selection=Ctn(this,this.selection)}parseMarkGroup(){this.component.mark=yin(this)}parseAxesAndHeaders(){this.component.axes=Hrn(this)}assembleSelectionTopLevelSignals(t){return Yen(this,t)}assembleSignals(){return[...P5e(this),...Wen(this,[])]}assembleSelectionData(t){return Ken(this,t)}assembleLayout(){return null}assembleLayoutSignals(){return oie(this)}assembleMarks(){let t=this.component.mark??[];return(!this.parent||!uT(this.parent))&&(t=l5e(this,t)),t.map(this.correctDataNames)}assembleGroupStyle(){const{style:t}=this.view||{};return t!==void 0?t:this.encoding.x||this.encoding.y?"cell":"view"}getMapping(){return this.encoding}get mark(){return this.markDef.type}channelHasField(t){return O1(this.encoding,t)}fieldDef(t){const n=this.encoding[t];return zh(n)}typedFieldDef(t){const n=this.fieldDef(t);return iu(n)?n:null}}class bie extends pie{constructor(t,n,r,i,s){super(t,"layer",n,r,s,t.resolve,t.view);const o={...i,...t.width?{width:t.width}:{},...t.height?{height:t.height}:{}};this.children=t.layer.map((a,u)=>{if(m5(a))return new bie(a,this,this.getName(`layer_${u}`),o,s);if(pg(a))return new vje(a,this,this.getName(`layer_${u}`),o,s);throw new Error(dre(a))})}parseData(){this.component.data=D5(this);for(const t of this.children)t.parseData()}parseLayoutSize(){Drn(this)}parseSelections(){this.component.selection={};for(const t of this.children){t.parseSelections();for(const n of Ye(t.component.selection))this.component.selection[n]=t.component.selection[n]}}parseMarkGroup(){for(const t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){Wrn(this)}assembleSelectionTopLevelSignals(t){return this.children.reduce((n,r)=>r.assembleSelectionTopLevelSignals(n),t)}assembleSignals(){return this.children.reduce((t,n)=>t.concat(n.assembleSignals()),P5e(this))}assembleLayoutSignals(){return this.children.reduce((t,n)=>t.concat(n.assembleLayoutSignals()),oie(this))}assembleSelectionData(t){return this.children.reduce((n,r)=>r.assembleSelectionData(n),t)}assembleGroupStyle(){const t=new Set;for(const r of this.children)for(const i of pt(r.assembleGroupStyle()))t.add(i);const n=Array.from(t);return n.length>1?n:n.length===1?n[0]:void 0}assembleTitle(){let t=super.assembleTitle();if(t)return t;for(const n of this.children)if(t=n.assembleTitle(),t)return t}assembleLayout(){return null}assembleMarks(){return Xen(this,this.children.flatMap(t=>t.assembleMarks()))}assembleLegends(){return this.children.reduce((t,n)=>t.concat(n.assembleLegends()),K5e(this))}}function _ie(e,t,n,r,i){if(a5(e))return new sA(e,t,n,i);if(m5(e))return new bie(e,t,n,r,i);if(pg(e))return new vje(e,t,n,r,i);if($Zt(e))return new Brn(e,t,n,i);throw new Error(dre(e))}function Sin(e,t={}){t.logger&&BQt(t.logger),t.fieldTitle&&_Fe(t.fieldTitle);try{const n=YFe(HS(t.config,e.config)),r=r5e(e,n),i=_ie(r,null,"",void 0,n);return i.parse(),Ynn(i.component.data,i),{spec:Cin(i,Tin(e,r.autosize,n,i),e.datasets,e.usermeta),normalized:r}}finally{t.logger&&UQt(),t.fieldTitle&&nZt()}}function Tin(e,t,n,r){const i=r.component.layoutSize.get("width"),s=r.component.layoutSize.get("height");if(t===void 0?(t={type:"pad"},r.hasAxisOrientSignalRef()&&(t.resize=!0)):mt(t)&&(t={type:t}),i&&s&&zen(t.type)){if(i==="step"&&s==="step")Ze(Dge()),t.type="pad";else if(i==="step"||s==="step"){const o=i==="step"?"width":"height";Ze(Dge(QF(o)));const a=o==="width"?"height":"width";t.type=Ven(a)}}return{...Ye(t).length===1&&t.type?t.type==="pad"?{}:{autosize:t.type}:{autosize:t},...a0e(n,!1),...a0e(e,!0)}}function Cin(e,t,n={},r){const i=e.config?KZt(e.config):void 0,s=[].concat(e.assembleSelectionData([]),krn(e.component.data,n)),o=e.assembleProjections(),a=e.assembleTitle(),u=e.assembleGroupStyle(),l=e.assembleGroupEncodeEntry(!0);let c=e.assembleLayoutSignals();c=c.filter(h=>(h.name==="width"||h.name==="height")&&h.value!==void 0?(t[h.name]=+h.value,!1):!0);const{params:f,...d}=t;return{$schema:"https://vega.github.io/schema/vega/v5.json",...e.description?{description:e.description}:{},...d,...a?{title:a}:{},...u?{style:u}:{},...l?{encode:{update:l}}:{},data:s,...o.length>0?{projections:o}:{},...e.assembleGroup([...c,...e.assembleSelectionTopLevelSignals([]),...HFe(f)]),...i?{config:i}:{},...r?{usermeta:r}:{}}}const Ain=rXt.version,Iin=Object.freeze(Object.defineProperty({__proto__:null,accessPathDepth:Px,accessPathWithDatum:rre,compile:Sin,contains:Hn,deepEqual:Rl,deleteNestedProperty:jM,duplicate:nn,entries:vy,every:ere,fieldIntersection:nre,flatAccessWithDatum:r4e,getFirstDefined:fs,hasIntersection:tre,hash:Vn,internalField:o4e,isBoolean:WI,isEmpty:jr,isEqual:sXt,isInternalField:a4e,isNullOrFalse:lq,isNumeric:qF,keys:Ye,logicalExpr:rA,mergeDeep:t4e,never:e4e,normalize:r5e,normalizeAngle:GI,omit:Yu,pick:Nx,prefixGenerator:cq,removePathFromField:tT,replaceAll:bb,replacePathInField:zc,resetIdCounter:aXt,setEqual:n4e,some:vb,stringify:Br,titleCase:MR,unique:oh,uniqueId:s4e,vals:Mo,varName:Ci,version:Ain},Symbol.toStringTag,{value:"Module"}));function bje(e){const[t,n]=/schema\/([\w-]+)\/([\w\.\-]+)\.json$/g.exec(e).slice(1,3);return{library:t,version:n}}var kin="vega-themes",Rin="2.15.0",Nin="Themes for stylized Vega and Vega-Lite visualizations.",Pin=["vega","vega-lite","themes","style"],Din="BSD-3-Clause",Oin={name:"UW Interactive Data Lab",url:"https://idl.cs.washington.edu"},$in=[{name:"Emily Gu",url:"https://github.com/emilygu"},{name:"Arvind Satyanarayan",url:"http://arvindsatya.com"},{name:"Jeffrey Heer",url:"https://idl.cs.washington.edu"},{name:"Dominik Moritz",url:"https://www.domoritz.de"}],Min="build/vega-themes.js",wie="build/vega-themes.module.js",Lin="build/vega-themes.min.js",Fin="build/vega-themes.min.js",jin="build/vega-themes.module.d.ts",Bin={type:"git",url:"https://github.com/vega/vega-themes.git"},Uin=["src","build"],zin={prebuild:"yarn clean",build:"rollup -c",clean:"rimraf build && rimraf examples/build","copy:data":"rsync -r node_modules/vega-datasets/data/* examples/data","copy:build":"rsync -r build/* examples/build","deploy:gh":"yarn build && mkdir -p examples/build && rsync -r build/* examples/build && gh-pages -d examples",preversion:"yarn lint",serve:"browser-sync start -s -f build examples --serveStatic examples",start:"yarn build && concurrently --kill-others -n Server,Rollup 'yarn serve' 'rollup -c -w'",format:"eslint . --fix",lint:"eslint .",release:"release-it"},Vin={"@babel/core":"^7.24.6","@babel/plugin-transform-runtime":"^7.24.6","@babel/preset-env":"^7.24.6","@babel/preset-typescript":"^7.24.6","@release-it/conventional-changelog":"^8.0.1","@rollup/plugin-json":"^6.1.0","@rollup/plugin-node-resolve":"^15.2.3","@rollup/plugin-terser":"^0.4.4","@typescript-eslint/eslint-plugin":"^7.11.0","@typescript-eslint/parser":"^7.11.0","browser-sync":"^3.0.2",concurrently:"^8.2.2",eslint:"^8.45.0","eslint-config-prettier":"^9.1.0","eslint-plugin-prettier":"^5.1.3","gh-pages":"^6.1.1",prettier:"^3.2.5","release-it":"^17.3.0",rollup:"^4.18.0","rollup-plugin-bundle-size":"^1.0.3","rollup-plugin-ts":"^3.4.5",typescript:"^5.4.5",vega:"^5.25.0","vega-lite":"^5.9.3"},Hin={vega:"*","vega-lite":"*"},qin={},Win={name:kin,version:Rin,description:Nin,keywords:Pin,license:Din,author:Oin,contributors:$in,main:Min,module:wie,unpkg:Lin,jsdelivr:Fin,types:jin,repository:Bin,files:Uin,scripts:zin,devDependencies:Vin,peerDependencies:Hin,dependencies:qin};const X_="#fff",j0e="#888",Gin={background:"#333",view:{stroke:j0e},title:{color:X_,subtitleColor:X_},style:{"guide-label":{fill:X_},"guide-title":{fill:X_}},axis:{domainColor:X_,gridColor:j0e,tickColor:X_}},yv="#4572a7",Yin={background:"#fff",arc:{fill:yv},area:{fill:yv},line:{stroke:yv,strokeWidth:2},path:{stroke:yv},rect:{fill:yv},shape:{stroke:yv},symbol:{fill:yv,strokeWidth:1.5,size:50},axis:{bandPosition:.5,grid:!0,gridColor:"#000000",gridOpacity:1,gridWidth:.5,labelPadding:10,tickSize:5,tickWidth:.5},axisBand:{grid:!1,tickExtra:!0},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:50,symbolType:"square"},range:{category:["#4572a7","#aa4643","#8aa453","#71598e","#4598ae","#d98445","#94aace","#d09393","#b9cc98","#a99cbc"]}},vv="#30a2da",MB="#cbcbcb",Kin="#999",Xin="#333",B0e="#f0f0f0",U0e="#333",Qin={arc:{fill:vv},area:{fill:vv},axis:{domainColor:MB,grid:!0,gridColor:MB,gridWidth:1,labelColor:Kin,labelFontSize:10,titleColor:Xin,tickColor:MB,tickSize:10,titleFontSize:14,titlePadding:10,labelPadding:4},axisBand:{grid:!1},background:B0e,group:{fill:B0e},legend:{labelColor:U0e,labelFontSize:11,padding:1,symbolSize:30,symbolType:"square",titleColor:U0e,titleFontSize:14,titlePadding:10},line:{stroke:vv,strokeWidth:2},path:{stroke:vv,strokeWidth:.5},rect:{fill:vv},range:{category:["#30a2da","#fc4f30","#e5ae38","#6d904f","#8b8b8b","#b96db8","#ff9e27","#56cc60","#52d2ca","#52689e","#545454","#9fe4f8"],diverging:["#cc0020","#e77866","#f6e7e1","#d6e8ed","#91bfd9","#1d78b5"],heatmap:["#d6e8ed","#cee0e5","#91bfd9","#549cc6","#1d78b5"]},point:{filled:!0,shape:"circle"},shape:{stroke:vv},bar:{binSpacing:2,fill:vv,stroke:null},title:{anchor:"start",fontSize:24,fontWeight:600,offset:20}},bv="#000",Jin={group:{fill:"#e5e5e5"},arc:{fill:bv},area:{fill:bv},line:{stroke:bv},path:{stroke:bv},rect:{fill:bv},shape:{stroke:bv},symbol:{fill:bv,size:40},axis:{domain:!1,grid:!0,gridColor:"#FFFFFF",gridOpacity:1,labelColor:"#7F7F7F",labelPadding:4,tickColor:"#7F7F7F",tickSize:5.67,titleFontSize:16,titleFontWeight:"normal"},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:40},range:{category:["#000000","#7F7F7F","#1A1A1A","#999999","#333333","#B0B0B0","#4D4D4D","#C9C9C9","#666666","#DCDCDC"]}},Zin=22,esn="normal",z0e="Benton Gothic, sans-serif",V0e=11.5,tsn="normal",_v="#82c6df",LB="Benton Gothic Bold, sans-serif",H0e="normal",q0e=13,u2={"category-6":["#ec8431","#829eb1","#c89d29","#3580b1","#adc839","#ab7fb4"],"fire-7":["#fbf2c7","#f9e39c","#f8d36e","#f4bb6a","#e68a4f","#d15a40","#ab4232"],"fireandice-6":["#e68a4f","#f4bb6a","#f9e39c","#dadfe2","#a6b7c6","#849eae"],"ice-7":["#edefee","#dadfe2","#c4ccd2","#a6b7c6","#849eae","#607785","#47525d"]},nsn={background:"#ffffff",title:{anchor:"start",color:"#000000",font:LB,fontSize:Zin,fontWeight:esn},arc:{fill:_v},area:{fill:_v},line:{stroke:_v,strokeWidth:2},path:{stroke:_v},rect:{fill:_v},shape:{stroke:_v},symbol:{fill:_v,size:30},axis:{labelFont:z0e,labelFontSize:V0e,labelFontWeight:tsn,titleFont:LB,titleFontSize:q0e,titleFontWeight:H0e},axisX:{labelAngle:0,labelPadding:4,tickSize:3},axisY:{labelBaseline:"middle",maxExtent:45,minExtent:45,tickSize:2,titleAlign:"left",titleAngle:0,titleX:-45,titleY:-11},legend:{labelFont:z0e,labelFontSize:V0e,symbolType:"square",titleFont:LB,titleFontSize:q0e,titleFontWeight:H0e},range:{category:u2["category-6"],diverging:u2["fireandice-6"],heatmap:u2["fire-7"],ordinal:u2["fire-7"],ramp:u2["fire-7"]}},wv="#ab5787",VP="#979797",rsn={background:"#f9f9f9",arc:{fill:wv},area:{fill:wv},line:{stroke:wv},path:{stroke:wv},rect:{fill:wv},shape:{stroke:wv},symbol:{fill:wv,size:30},axis:{domainColor:VP,domainWidth:.5,gridWidth:.2,labelColor:VP,tickColor:VP,tickWidth:.2,titleColor:VP},axisBand:{grid:!1},axisX:{grid:!0,tickSize:10},axisY:{domain:!1,grid:!0,tickSize:0},legend:{labelFontSize:11,padding:1,symbolSize:30,symbolType:"square"},range:{category:["#ab5787","#51b2e5","#703c5c","#168dd9","#d190b6","#00609f","#d365ba","#154866","#666666","#c4c4c4"]}},Ev="#3e5c69",isn={background:"#fff",arc:{fill:Ev},area:{fill:Ev},line:{stroke:Ev},path:{stroke:Ev},rect:{fill:Ev},shape:{stroke:Ev},symbol:{fill:Ev},axis:{domainWidth:.5,grid:!0,labelPadding:2,tickSize:5,tickWidth:.5,titleFontWeight:"normal"},axisBand:{grid:!1},axisX:{gridWidth:.2},axisY:{gridDash:[3],gridWidth:.4},legend:{labelFontSize:11,padding:1,symbolType:"square"},range:{category:["#3e5c69","#6793a6","#182429","#0570b0","#3690c0","#74a9cf","#a6bddb","#e2ddf2"]}},lc="#1696d2",W0e="#000000",ssn="#FFFFFF",HP="Lato",FB="Lato",osn="Lato",asn="#DEDDDD",usn=18,l2={"main-colors":["#1696d2","#d2d2d2","#000000","#fdbf11","#ec008b","#55b748","#5c5859","#db2b27"],"shades-blue":["#CFE8F3","#A2D4EC","#73BFE2","#46ABDB","#1696D2","#12719E","#0A4C6A","#062635"],"shades-gray":["#F5F5F5","#ECECEC","#E3E3E3","#DCDBDB","#D2D2D2","#9D9D9D","#696969","#353535"],"shades-yellow":["#FFF2CF","#FCE39E","#FDD870","#FCCB41","#FDBF11","#E88E2D","#CA5800","#843215"],"shades-magenta":["#F5CBDF","#EB99C2","#E46AA7","#E54096","#EC008B","#AF1F6B","#761548","#351123"],"shades-green":["#DCEDD9","#BCDEB4","#98CF90","#78C26D","#55B748","#408941","#2C5C2D","#1A2E19"],"shades-black":["#D5D5D4","#ADABAC","#848081","#5C5859","#332D2F","#262223","#1A1717","#0E0C0D"],"shades-red":["#F8D5D4","#F1AAA9","#E9807D","#E25552","#DB2B27","#A4201D","#6E1614","#370B0A"],"one-group":["#1696d2","#000000"],"two-groups-cat-1":["#1696d2","#000000"],"two-groups-cat-2":["#1696d2","#fdbf11"],"two-groups-cat-3":["#1696d2","#db2b27"],"two-groups-seq":["#a2d4ec","#1696d2"],"three-groups-cat":["#1696d2","#fdbf11","#000000"],"three-groups-seq":["#a2d4ec","#1696d2","#0a4c6a"],"four-groups-cat-1":["#000000","#d2d2d2","#fdbf11","#1696d2"],"four-groups-cat-2":["#1696d2","#ec0008b","#fdbf11","#5c5859"],"four-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a"],"five-groups-cat-1":["#1696d2","#fdbf11","#d2d2d2","#ec008b","#000000"],"five-groups-cat-2":["#1696d2","#0a4c6a","#d2d2d2","#fdbf11","#332d2f"],"five-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a","#000000"],"six-groups-cat-1":["#1696d2","#ec008b","#fdbf11","#000000","#d2d2d2","#55b748"],"six-groups-cat-2":["#1696d2","#d2d2d2","#ec008b","#fdbf11","#332d2f","#0a4c6a"],"six-groups-seq":["#cfe8f3","#a2d4ec","#73bfe2","#46abdb","#1696d2","#12719e"],"diverging-colors":["#ca5800","#fdbf11","#fdd870","#fff2cf","#cfe8f3","#73bfe2","#1696d2","#0a4c6a"]},lsn={background:ssn,title:{anchor:"start",fontSize:usn,font:HP},axisX:{domain:!0,domainColor:W0e,domainWidth:1,grid:!1,labelFontSize:12,labelFont:FB,labelAngle:0,tickColor:W0e,tickSize:5,titleFontSize:12,titlePadding:10,titleFont:HP},axisY:{domain:!1,domainWidth:1,grid:!0,gridColor:asn,gridWidth:1,labelFontSize:12,labelFont:FB,labelPadding:8,ticks:!1,titleFontSize:12,titlePadding:10,titleFont:HP,titleAngle:0,titleY:-10,titleX:18},legend:{labelFontSize:12,labelFont:FB,symbolSize:100,titleFontSize:12,titlePadding:10,titleFont:HP,orient:"right",offset:10},view:{stroke:"transparent"},range:{category:l2["six-groups-cat-1"],diverging:l2["diverging-colors"],heatmap:l2["diverging-colors"],ordinal:l2["six-groups-seq"],ramp:l2["shades-blue"]},area:{fill:lc},rect:{fill:lc},line:{color:lc,stroke:lc,strokeWidth:5},trail:{color:lc,stroke:lc,strokeWidth:0,size:1},path:{stroke:lc,strokeWidth:.5},point:{filled:!0},text:{font:osn,color:lc,fontSize:11,align:"center",fontWeight:400,size:11},style:{bar:{fill:lc,stroke:null}},arc:{fill:lc},shape:{stroke:lc},symbol:{fill:lc,size:30}},xv="#3366CC",G0e="#ccc",qP="Arial, sans-serif",csn={arc:{fill:xv},area:{fill:xv},path:{stroke:xv},rect:{fill:xv},shape:{stroke:xv},symbol:{stroke:xv},circle:{fill:xv},background:"#fff",padding:{top:10,right:10,bottom:10,left:10},style:{"guide-label":{font:qP,fontSize:12},"guide-title":{font:qP,fontSize:12},"group-title":{font:qP,fontSize:12}},title:{font:qP,fontSize:14,fontWeight:"bold",dy:-3,anchor:"start"},axis:{gridColor:G0e,tickColor:G0e,domain:!1,grid:!0},range:{category:["#4285F4","#DB4437","#F4B400","#0F9D58","#AB47BC","#00ACC1","#FF7043","#9E9D24","#5C6BC0","#F06292","#00796B","#C2185B"],heatmap:["#c6dafc","#5e97f6","#2a56c6"]}},Eie=e=>e*(1/3+1),Y0e=Eie(9),K0e=Eie(10),X0e=Eie(12),c2="Segoe UI",Q0e="wf_standard-font, helvetica, arial, sans-serif",J0e="#252423",f2="#605E5C",Z0e="transparent",fsn="#C8C6C4",ff="#118DFF",dsn="#12239E",hsn="#E66C37",psn="#6B007B",msn="#E044A7",gsn="#744EC2",ysn="#D9B300",vsn="#D64550",_je=ff,wje="#DEEFFF",eye=[wje,_je],bsn=[wje,"#c7e4ff","#b0d9ff","#9aceff","#83c3ff","#6cb9ff","#55aeff","#3fa3ff","#2898ff",_je],_sn={view:{stroke:Z0e},background:Z0e,font:c2,header:{titleFont:Q0e,titleFontSize:X0e,titleColor:J0e,labelFont:c2,labelFontSize:K0e,labelColor:f2},axis:{ticks:!1,grid:!1,domain:!1,labelColor:f2,labelFontSize:Y0e,titleFont:Q0e,titleColor:J0e,titleFontSize:X0e,titleFontWeight:"normal"},axisQuantitative:{tickCount:3,grid:!0,gridColor:fsn,gridDash:[1,5],labelFlush:!1},axisBand:{tickExtra:!0},axisX:{labelPadding:5},axisY:{labelPadding:10},bar:{fill:ff},line:{stroke:ff,strokeWidth:3,strokeCap:"round",strokeJoin:"round"},text:{font:c2,fontSize:Y0e,fill:f2},arc:{fill:ff},area:{fill:ff,line:!0,opacity:.6},path:{stroke:ff},rect:{fill:ff},point:{fill:ff,filled:!0,size:75},shape:{stroke:ff},symbol:{fill:ff,strokeWidth:1.5,size:50},legend:{titleFont:c2,titleFontWeight:"bold",titleColor:f2,labelFont:c2,labelFontSize:K0e,labelColor:f2,symbolType:"circle",symbolSize:75},range:{category:[ff,dsn,hsn,psn,msn,gsn,ysn,vsn],diverging:eye,heatmap:eye,ordinal:bsn}},jB='IBM Plex Sans,system-ui,-apple-system,BlinkMacSystemFont,".sfnstext-regular",sans-serif',wsn='IBM Plex Sans Condensed, system-ui, -apple-system, BlinkMacSystemFont, ".SFNSText-Regular", sans-serif',BB=400,WP={textPrimary:{g90:"#f4f4f4",g100:"#f4f4f4",white:"#161616",g10:"#161616"},textSecondary:{g90:"#c6c6c6",g100:"#c6c6c6",white:"#525252",g10:"#525252"},layerAccent01:{white:"#e0e0e0",g10:"#e0e0e0",g90:"#525252",g100:"#393939"},gridBg:{white:"#ffffff",g10:"#ffffff",g90:"#161616",g100:"#161616"}},Esn=["#8a3ffc","#33b1ff","#007d79","#ff7eb6","#fa4d56","#fff1f1","#6fdc8c","#4589ff","#d12771","#d2a106","#08bdba","#bae6ff","#ba4e00","#d4bbff"],xsn=["#6929c4","#1192e8","#005d5d","#9f1853","#fa4d56","#570408","#198038","#002d9c","#ee538b","#b28600","#009d9a","#012749","#8a3800","#a56eff"];function O5({theme:e,background:t}){const n=["white","g10"].includes(e)?"light":"dark",r=WP.gridBg[e],i=WP.textPrimary[e],s=WP.textSecondary[e],o=n==="dark"?Esn:xsn,a=n==="dark"?"#d4bbff":"#6929c4";return{background:t,arc:{fill:a},area:{fill:a},path:{stroke:a},rect:{fill:a},shape:{stroke:a},symbol:{stroke:a},circle:{fill:a},view:{fill:r,stroke:r},group:{fill:r},title:{color:i,anchor:"start",dy:-15,fontSize:16,font:jB,fontWeight:600},axis:{labelColor:s,labelFontSize:12,labelFont:wsn,labelFontWeight:BB,titleColor:i,titleFontWeight:600,titleFontSize:12,grid:!0,gridColor:WP.layerAccent01[e],labelAngle:0},axisX:{titlePadding:10},axisY:{titlePadding:2.5},style:{"guide-label":{font:jB,fill:s,fontWeight:BB},"guide-title":{font:jB,fill:s,fontWeight:BB}},range:{category:o,diverging:["#750e13","#a2191f","#da1e28","#fa4d56","#ff8389","#ffb3b8","#ffd7d9","#fff1f1","#e5f6ff","#bae6ff","#82cfff","#33b1ff","#1192e8","#0072c3","#00539a","#003a6d"],heatmap:["#f6f2ff","#e8daff","#d4bbff","#be95ff","#a56eff","#8a3ffc","#6929c4","#491d8b","#31135e","#1c0f30"]}}}const Ssn=O5({theme:"white",background:"#ffffff"}),Tsn=O5({theme:"g10",background:"#f4f4f4"}),Csn=O5({theme:"g90",background:"#262626"}),Asn=O5({theme:"g100",background:"#161616"}),Isn=Win.version,ksn=Object.freeze(Object.defineProperty({__proto__:null,carbong10:Tsn,carbong100:Asn,carbong90:Csn,carbonwhite:Ssn,dark:Gin,excel:Yin,fivethirtyeight:Qin,ggplot2:Jin,googlecharts:csn,latimes:nsn,powerbi:_sn,quartz:rsn,urbaninstitute:lsn,version:Isn,vox:isn},Symbol.toStringTag,{value:"Module"}));function Rsn(e,t,n,r){if(je(e))return`[${e.map(i=>t(mt(i)?i:tye(i,n))).join(", ")}]`;if(gt(e)){let i="";const{title:s,image:o,...a}=e;s&&(i+=`<h2>${t(s)}</h2>`),o&&(i+=`<img src="${new URL(t(o),r||location.href).href}">`);const u=Object.keys(a);if(u.length>0){i+="<table>";for(const l of u){let c=a[l];c!==void 0&&(gt(c)&&(c=tye(c,n)),i+=`<tr><td class="key">${t(l)}</td><td class="value">${t(c)}</td></tr>`)}i+="</table>"}return i||"{}"}return t(e)}function Nsn(e){const t=[];return function(n,r){if(typeof r!="object"||r===null)return r;const i=t.indexOf(this)+1;return t.length=i,t.length>e?"[Object]":t.indexOf(r)>=0?"[Circular]":(t.push(r),r)}}function tye(e,t){return JSON.stringify(e,Nsn(t))}var Psn=`#vg-tooltip-element {
  visibility: hidden;
  padding: 8px;
  position: fixed;
  z-index: 1000;
  font-family: sans-serif;
  font-size: 11px;
  border-radius: 3px;
  box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
  /* The default theme is the light theme. */
  background-color: rgba(255, 255, 255, 0.95);
  border: 1px solid #d9d9d9;
  color: black;
}
#vg-tooltip-element.visible {
  visibility: visible;
}
#vg-tooltip-element h2 {
  margin-top: 0;
  margin-bottom: 10px;
  font-size: 13px;
}
#vg-tooltip-element table {
  border-spacing: 0;
}
#vg-tooltip-element table tr {
  border: none;
}
#vg-tooltip-element table tr td {
  overflow: hidden;
  text-overflow: ellipsis;
  padding-top: 2px;
  padding-bottom: 2px;
}
#vg-tooltip-element table tr td.key {
  color: #808080;
  max-width: 150px;
  text-align: right;
  padding-right: 4px;
}
#vg-tooltip-element table tr td.value {
  display: block;
  max-width: 300px;
  max-height: 7em;
  text-align: left;
}
#vg-tooltip-element.dark-theme {
  background-color: rgba(32, 32, 32, 0.9);
  border: 1px solid #f5f5f5;
  color: white;
}
#vg-tooltip-element.dark-theme td.key {
  color: #bfbfbf;
}
`;const Eje="vg-tooltip-element",Dsn={offsetX:10,offsetY:10,id:Eje,styleId:"vega-tooltip-style",theme:"light",disableDefaultStyle:!1,sanitize:Osn,maxDepth:2,formatTooltip:Rsn,baseURL:""};function Osn(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;")}function $sn(e){if(!/^[A-Za-z]+[-:.\w]*$/.test(e))throw new Error("Invalid HTML ID");return Psn.toString().replace(Eje,e)}function Msn(e,t,n,r){let i=e.clientX+n;i+t.width>window.innerWidth&&(i=+e.clientX-n-t.width);let s=e.clientY+r;return s+t.height>window.innerHeight&&(s=+e.clientY-r-t.height),{x:i,y:s}}class Lsn{constructor(t){this.options={...Dsn,...t};const n=this.options.id;if(this.el=null,this.call=this.tooltipHandler.bind(this),!this.options.disableDefaultStyle&&!document.getElementById(this.options.styleId)){const r=document.createElement("style");r.setAttribute("id",this.options.styleId),r.innerHTML=$sn(n);const i=document.head;i.childNodes.length>0?i.insertBefore(r,i.childNodes[0]):i.appendChild(r)}}tooltipHandler(t,n,r,i){if(this.el=document.getElementById(this.options.id),this.el||(this.el=document.createElement("div"),this.el.setAttribute("id",this.options.id),this.el.classList.add("vg-tooltip"),(document.fullscreenElement??document.body).appendChild(this.el)),i==null||i===""){this.el.classList.remove("visible",`${this.options.theme}-theme`);return}this.el.innerHTML=this.options.formatTooltip(i,this.options.sanitize,this.options.maxDepth,this.options.baseURL),this.el.classList.add("visible",`${this.options.theme}-theme`);const{x:s,y:o}=Msn(n,this.el.getBoundingClientRect(),this.options.offsetX,this.options.offsetY);this.el.style.top=`${o}px`,this.el.style.left=`${s}px`}}var UB={};function Fsn(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var zB,nye;function jsn(){return nye||(nye=1,zB=function(e){e.prototype[Symbol.iterator]=function*(){for(let t=this.head;t;t=t.next)yield t.value}}),zB}var Bsn=yr;yr.Node=Ib;yr.create=yr;function yr(e){var t=this;if(t instanceof yr||(t=new yr),t.tail=null,t.head=null,t.length=0,e&&typeof e.forEach=="function")e.forEach(function(i){t.push(i)});else if(arguments.length>0)for(var n=0,r=arguments.length;n<r;n++)t.push(arguments[n]);return t}yr.prototype.removeNode=function(e){if(e.list!==this)throw new Error("removing node which does not belong to this list");var t=e.next,n=e.prev;return t&&(t.prev=n),n&&(n.next=t),e===this.head&&(this.head=t),e===this.tail&&(this.tail=n),e.list.length--,e.next=null,e.prev=null,e.list=null,t};yr.prototype.unshiftNode=function(e){if(e!==this.head){e.list&&e.list.removeNode(e);var t=this.head;e.list=this,e.next=t,t&&(t.prev=e),this.head=e,this.tail||(this.tail=e),this.length++}};yr.prototype.pushNode=function(e){if(e!==this.tail){e.list&&e.list.removeNode(e);var t=this.tail;e.list=this,e.prev=t,t&&(t.next=e),this.tail=e,this.head||(this.head=e),this.length++}};yr.prototype.push=function(){for(var e=0,t=arguments.length;e<t;e++)zsn(this,arguments[e]);return this.length};yr.prototype.unshift=function(){for(var e=0,t=arguments.length;e<t;e++)Vsn(this,arguments[e]);return this.length};yr.prototype.pop=function(){if(this.tail){var e=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,e}};yr.prototype.shift=function(){if(this.head){var e=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,e}};yr.prototype.forEach=function(e,t){t=t||this;for(var n=this.head,r=0;n!==null;r++)e.call(t,n.value,r,this),n=n.next};yr.prototype.forEachReverse=function(e,t){t=t||this;for(var n=this.tail,r=this.length-1;n!==null;r--)e.call(t,n.value,r,this),n=n.prev};yr.prototype.get=function(e){for(var t=0,n=this.head;n!==null&&t<e;t++)n=n.next;if(t===e&&n!==null)return n.value};yr.prototype.getReverse=function(e){for(var t=0,n=this.tail;n!==null&&t<e;t++)n=n.prev;if(t===e&&n!==null)return n.value};yr.prototype.map=function(e,t){t=t||this;for(var n=new yr,r=this.head;r!==null;)n.push(e.call(t,r.value,this)),r=r.next;return n};yr.prototype.mapReverse=function(e,t){t=t||this;for(var n=new yr,r=this.tail;r!==null;)n.push(e.call(t,r.value,this)),r=r.prev;return n};yr.prototype.reduce=function(e,t){var n,r=this.head;if(arguments.length>1)n=t;else if(this.head)r=this.head.next,n=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=0;r!==null;i++)n=e(n,r.value,i),r=r.next;return n};yr.prototype.reduceReverse=function(e,t){var n,r=this.tail;if(arguments.length>1)n=t;else if(this.tail)r=this.tail.prev,n=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=this.length-1;r!==null;i--)n=e(n,r.value,i),r=r.prev;return n};yr.prototype.toArray=function(){for(var e=new Array(this.length),t=0,n=this.head;n!==null;t++)e[t]=n.value,n=n.next;return e};yr.prototype.toArrayReverse=function(){for(var e=new Array(this.length),t=0,n=this.tail;n!==null;t++)e[t]=n.value,n=n.prev;return e};yr.prototype.slice=function(e,t){t=t||this.length,t<0&&(t+=this.length),e=e||0,e<0&&(e+=this.length);var n=new yr;if(t<e||t<0)return n;e<0&&(e=0),t>this.length&&(t=this.length);for(var r=0,i=this.head;i!==null&&r<e;r++)i=i.next;for(;i!==null&&r<t;r++,i=i.next)n.push(i.value);return n};yr.prototype.sliceReverse=function(e,t){t=t||this.length,t<0&&(t+=this.length),e=e||0,e<0&&(e+=this.length);var n=new yr;if(t<e||t<0)return n;e<0&&(e=0),t>this.length&&(t=this.length);for(var r=this.length,i=this.tail;i!==null&&r>t;r--)i=i.prev;for(;i!==null&&r>e;r--,i=i.prev)n.push(i.value);return n};yr.prototype.splice=function(e,t,...n){e>this.length&&(e=this.length-1),e<0&&(e=this.length+e);for(var r=0,i=this.head;i!==null&&r<e;r++)i=i.next;for(var s=[],r=0;i&&r<t;r++)s.push(i.value),i=this.removeNode(i);i===null&&(i=this.tail),i!==this.head&&i!==this.tail&&(i=i.prev);for(var r=0;r<n.length;r++)i=Usn(this,i,n[r]);return s};yr.prototype.reverse=function(){for(var e=this.head,t=this.tail,n=e;n!==null;n=n.prev){var r=n.prev;n.prev=n.next,n.next=r}return this.head=t,this.tail=e,this};function Usn(e,t,n){var r=t===e.head?new Ib(n,null,t,e):new Ib(n,t,t.next,e);return r.next===null&&(e.tail=r),r.prev===null&&(e.head=r),e.length++,r}function zsn(e,t){e.tail=new Ib(t,e.tail,null,e),e.head||(e.head=e.tail),e.length++}function Vsn(e,t){e.head=new Ib(t,null,e.head,e),e.tail||(e.tail=e.head),e.length++}function Ib(e,t,n,r){if(!(this instanceof Ib))return new Ib(e,t,n,r);this.list=r,this.value=e,t?(t.next=this,this.prev=t):this.prev=null,n?(n.prev=this,this.next=n):this.next=null}try{jsn()(yr)}catch{}const Hsn=Bsn,Zv=Symbol("max"),Lp=Symbol("length"),Q_=Symbol("lengthCalculator"),oA=Symbol("allowStale"),_1=Symbol("maxAge"),Pp=Symbol("dispose"),rye=Symbol("noDisposeOnSet"),Gs=Symbol("lruList"),hf=Symbol("cache"),xje=Symbol("updateAgeOnGet"),VB=()=>1;class qsn{constructor(t){if(typeof t=="number"&&(t={max:t}),t||(t={}),t.max&&(typeof t.max!="number"||t.max<0))throw new TypeError("max must be a non-negative number");this[Zv]=t.max||1/0;const n=t.length||VB;if(this[Q_]=typeof n!="function"?VB:n,this[oA]=t.stale||!1,t.maxAge&&typeof t.maxAge!="number")throw new TypeError("maxAge must be a number");this[_1]=t.maxAge||0,this[Pp]=t.dispose,this[rye]=t.noDisposeOnSet||!1,this[xje]=t.updateAgeOnGet||!1,this.reset()}set max(t){if(typeof t!="number"||t<0)throw new TypeError("max must be a non-negative number");this[Zv]=t||1/0,d2(this)}get max(){return this[Zv]}set allowStale(t){this[oA]=!!t}get allowStale(){return this[oA]}set maxAge(t){if(typeof t!="number")throw new TypeError("maxAge must be a non-negative number");this[_1]=t,d2(this)}get maxAge(){return this[_1]}set lengthCalculator(t){typeof t!="function"&&(t=VB),t!==this[Q_]&&(this[Q_]=t,this[Lp]=0,this[Gs].forEach(n=>{n.length=this[Q_](n.value,n.key),this[Lp]+=n.length})),d2(this)}get lengthCalculator(){return this[Q_]}get length(){return this[Lp]}get itemCount(){return this[Gs].length}rforEach(t,n){n=n||this;for(let r=this[Gs].tail;r!==null;){const i=r.prev;iye(this,t,r,n),r=i}}forEach(t,n){n=n||this;for(let r=this[Gs].head;r!==null;){const i=r.next;iye(this,t,r,n),r=i}}keys(){return this[Gs].toArray().map(t=>t.key)}values(){return this[Gs].toArray().map(t=>t.value)}reset(){this[Pp]&&this[Gs]&&this[Gs].length&&this[Gs].forEach(t=>this[Pp](t.key,t.value)),this[hf]=new Map,this[Gs]=new Hsn,this[Lp]=0}dump(){return this[Gs].map(t=>tL(this,t)?!1:{k:t.key,v:t.value,e:t.now+(t.maxAge||0)}).toArray().filter(t=>t)}dumpLru(){return this[Gs]}set(t,n,r){if(r=r||this[_1],r&&typeof r!="number")throw new TypeError("maxAge must be a number");const i=r?Date.now():0,s=this[Q_](n,t);if(this[hf].has(t)){if(s>this[Zv])return TE(this,this[hf].get(t)),!1;const u=this[hf].get(t).value;return this[Pp]&&(this[rye]||this[Pp](t,u.value)),u.now=i,u.maxAge=r,u.value=n,this[Lp]+=s-u.length,u.length=s,this.get(t),d2(this),!0}const o=new Wsn(t,n,s,i,r);return o.length>this[Zv]?(this[Pp]&&this[Pp](t,n),!1):(this[Lp]+=o.length,this[Gs].unshift(o),this[hf].set(t,this[Gs].head),d2(this),!0)}has(t){if(!this[hf].has(t))return!1;const n=this[hf].get(t).value;return!tL(this,n)}get(t){return HB(this,t,!0)}peek(t){return HB(this,t,!1)}pop(){const t=this[Gs].tail;return t?(TE(this,t),t.value):null}del(t){TE(this,this[hf].get(t))}load(t){this.reset();const n=Date.now();for(let r=t.length-1;r>=0;r--){const i=t[r],s=i.e||0;if(s===0)this.set(i.k,i.v);else{const o=s-n;o>0&&this.set(i.k,i.v,o)}}}prune(){this[hf].forEach((t,n)=>HB(this,n,!1))}}const HB=(e,t,n)=>{const r=e[hf].get(t);if(r){const i=r.value;if(tL(e,i)){if(TE(e,r),!e[oA])return}else n&&(e[xje]&&(r.value.now=Date.now()),e[Gs].unshiftNode(r));return i.value}},tL=(e,t)=>{if(!t||!t.maxAge&&!e[_1])return!1;const n=Date.now()-t.now;return t.maxAge?n>t.maxAge:e[_1]&&n>e[_1]},d2=e=>{if(e[Lp]>e[Zv])for(let t=e[Gs].tail;e[Lp]>e[Zv]&&t!==null;){const n=t.prev;TE(e,t),t=n}},TE=(e,t)=>{if(t){const n=t.value;e[Pp]&&e[Pp](n.key,n.value),e[Lp]-=n.length,e[hf].delete(n.key),e[Gs].removeNode(t)}};class Wsn{constructor(t,n,r,i,s){this.key=t,this.value=n,this.length=r,this.now=i,this.maxAge=s||0}}const iye=(e,t,n,r)=>{let i=n.value;tL(e,i)&&(TE(e,n),e[oA]||(i=void 0)),i&&t.call(r,i.value,i.key,e)};var Gsn=qsn;const Ysn=Object.freeze({loose:!0}),Ksn=Object.freeze({}),Xsn=e=>e?typeof e!="object"?Ysn:e:Ksn;var xie=Xsn,Pq={exports:{}};const Qsn="2.0.0",Sje=256,Jsn=Number.MAX_SAFE_INTEGER||9007199254740991,Zsn=16,eon=Sje-6,ton=["major","premajor","minor","preminor","patch","prepatch","prerelease"];var Sie={MAX_LENGTH:Sje,MAX_SAFE_COMPONENT_LENGTH:Zsn,MAX_SAFE_BUILD_LENGTH:eon,MAX_SAFE_INTEGER:Jsn,RELEASE_TYPES:ton,SEMVER_SPEC_VERSION:Qsn,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2};const non=typeof process=="object"&&UB&&UB.NODE_DEBUG&&/\bsemver\b/i.test(UB.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};var $5=non;(function(e,t){const{MAX_SAFE_COMPONENT_LENGTH:n,MAX_SAFE_BUILD_LENGTH:r,MAX_LENGTH:i}=Sie,s=$5;t=e.exports={};const o=t.re=[],a=t.safeRe=[],u=t.src=[],l=t.t={};let c=0;const f="[a-zA-Z0-9-]",d=[["\\s",1],["\\d",i],[f,r]],h=m=>{for(const[g,y]of d)m=m.split(`${g}*`).join(`${g}{0,${y}}`).split(`${g}+`).join(`${g}{1,${y}}`);return m},p=(m,g,y)=>{const v=h(g),_=c++;s(m,_,g),l[m]=_,u[_]=g,o[_]=new RegExp(g,y?"g":void 0),a[_]=new RegExp(v,y?"g":void 0)};p("NUMERICIDENTIFIER","0|[1-9]\\d*"),p("NUMERICIDENTIFIERLOOSE","\\d+"),p("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${f}*`),p("MAINVERSION",`(${u[l.NUMERICIDENTIFIER]})\\.(${u[l.NUMERICIDENTIFIER]})\\.(${u[l.NUMERICIDENTIFIER]})`),p("MAINVERSIONLOOSE",`(${u[l.NUMERICIDENTIFIERLOOSE]})\\.(${u[l.NUMERICIDENTIFIERLOOSE]})\\.(${u[l.NUMERICIDENTIFIERLOOSE]})`),p("PRERELEASEIDENTIFIER",`(?:${u[l.NUMERICIDENTIFIER]}|${u[l.NONNUMERICIDENTIFIER]})`),p("PRERELEASEIDENTIFIERLOOSE",`(?:${u[l.NUMERICIDENTIFIERLOOSE]}|${u[l.NONNUMERICIDENTIFIER]})`),p("PRERELEASE",`(?:-(${u[l.PRERELEASEIDENTIFIER]}(?:\\.${u[l.PRERELEASEIDENTIFIER]})*))`),p("PRERELEASELOOSE",`(?:-?(${u[l.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${u[l.PRERELEASEIDENTIFIERLOOSE]})*))`),p("BUILDIDENTIFIER",`${f}+`),p("BUILD",`(?:\\+(${u[l.BUILDIDENTIFIER]}(?:\\.${u[l.BUILDIDENTIFIER]})*))`),p("FULLPLAIN",`v?${u[l.MAINVERSION]}${u[l.PRERELEASE]}?${u[l.BUILD]}?`),p("FULL",`^${u[l.FULLPLAIN]}$`),p("LOOSEPLAIN",`[v=\\s]*${u[l.MAINVERSIONLOOSE]}${u[l.PRERELEASELOOSE]}?${u[l.BUILD]}?`),p("LOOSE",`^${u[l.LOOSEPLAIN]}$`),p("GTLT","((?:<|>)?=?)"),p("XRANGEIDENTIFIERLOOSE",`${u[l.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),p("XRANGEIDENTIFIER",`${u[l.NUMERICIDENTIFIER]}|x|X|\\*`),p("XRANGEPLAIN",`[v=\\s]*(${u[l.XRANGEIDENTIFIER]})(?:\\.(${u[l.XRANGEIDENTIFIER]})(?:\\.(${u[l.XRANGEIDENTIFIER]})(?:${u[l.PRERELEASE]})?${u[l.BUILD]}?)?)?`),p("XRANGEPLAINLOOSE",`[v=\\s]*(${u[l.XRANGEIDENTIFIERLOOSE]})(?:\\.(${u[l.XRANGEIDENTIFIERLOOSE]})(?:\\.(${u[l.XRANGEIDENTIFIERLOOSE]})(?:${u[l.PRERELEASELOOSE]})?${u[l.BUILD]}?)?)?`),p("XRANGE",`^${u[l.GTLT]}\\s*${u[l.XRANGEPLAIN]}$`),p("XRANGELOOSE",`^${u[l.GTLT]}\\s*${u[l.XRANGEPLAINLOOSE]}$`),p("COERCEPLAIN",`(^|[^\\d])(\\d{1,${n}})(?:\\.(\\d{1,${n}}))?(?:\\.(\\d{1,${n}}))?`),p("COERCE",`${u[l.COERCEPLAIN]}(?:$|[^\\d])`),p("COERCEFULL",u[l.COERCEPLAIN]+`(?:${u[l.PRERELEASE]})?(?:${u[l.BUILD]})?(?:$|[^\\d])`),p("COERCERTL",u[l.COERCE],!0),p("COERCERTLFULL",u[l.COERCEFULL],!0),p("LONETILDE","(?:~>?)"),p("TILDETRIM",`(\\s*)${u[l.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",p("TILDE",`^${u[l.LONETILDE]}${u[l.XRANGEPLAIN]}$`),p("TILDELOOSE",`^${u[l.LONETILDE]}${u[l.XRANGEPLAINLOOSE]}$`),p("LONECARET","(?:\\^)"),p("CARETTRIM",`(\\s*)${u[l.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",p("CARET",`^${u[l.LONECARET]}${u[l.XRANGEPLAIN]}$`),p("CARETLOOSE",`^${u[l.LONECARET]}${u[l.XRANGEPLAINLOOSE]}$`),p("COMPARATORLOOSE",`^${u[l.GTLT]}\\s*(${u[l.LOOSEPLAIN]})$|^$`),p("COMPARATOR",`^${u[l.GTLT]}\\s*(${u[l.FULLPLAIN]})$|^$`),p("COMPARATORTRIM",`(\\s*)${u[l.GTLT]}\\s*(${u[l.LOOSEPLAIN]}|${u[l.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",p("HYPHENRANGE",`^\\s*(${u[l.XRANGEPLAIN]})\\s+-\\s+(${u[l.XRANGEPLAIN]})\\s*$`),p("HYPHENRANGELOOSE",`^\\s*(${u[l.XRANGEPLAINLOOSE]})\\s+-\\s+(${u[l.XRANGEPLAINLOOSE]})\\s*$`),p("STAR","(<|>)?=?\\s*\\*"),p("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),p("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})(Pq,Pq.exports);var Tie=Pq.exports;const sye=/^[0-9]+$/,Tje=(e,t)=>{const n=sye.test(e),r=sye.test(t);return n&&r&&(e=+e,t=+t),e===t?0:n&&!r?-1:r&&!n?1:e<t?-1:1},ron=(e,t)=>Tje(t,e);var ion={compareIdentifiers:Tje,rcompareIdentifiers:ron};const GP=$5,{MAX_LENGTH:oye,MAX_SAFE_INTEGER:YP}=Sie,{safeRe:aye,t:uye}=Tie,son=xie,{compareIdentifiers:J_}=ion;let oon=class kd{constructor(t,n){if(n=son(n),t instanceof kd){if(t.loose===!!n.loose&&t.includePrerelease===!!n.includePrerelease)return t;t=t.version}else if(typeof t!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof t}".`);if(t.length>oye)throw new TypeError(`version is longer than ${oye} characters`);GP("SemVer",t,n),this.options=n,this.loose=!!n.loose,this.includePrerelease=!!n.includePrerelease;const r=t.trim().match(n.loose?aye[uye.LOOSE]:aye[uye.FULL]);if(!r)throw new TypeError(`Invalid Version: ${t}`);if(this.raw=t,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>YP||this.major<0)throw new TypeError("Invalid major version");if(this.minor>YP||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>YP||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map(i=>{if(/^[0-9]+$/.test(i)){const s=+i;if(s>=0&&s<YP)return s}return i}):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(t){if(GP("SemVer.compare",this.version,this.options,t),!(t instanceof kd)){if(typeof t=="string"&&t===this.version)return 0;t=new kd(t,this.options)}return t.version===this.version?0:this.compareMain(t)||this.comparePre(t)}compareMain(t){return t instanceof kd||(t=new kd(t,this.options)),J_(this.major,t.major)||J_(this.minor,t.minor)||J_(this.patch,t.patch)}comparePre(t){if(t instanceof kd||(t=new kd(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;let n=0;do{const r=this.prerelease[n],i=t.prerelease[n];if(GP("prerelease compare",n,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return J_(r,i)}while(++n)}compareBuild(t){t instanceof kd||(t=new kd(t,this.options));let n=0;do{const r=this.build[n],i=t.build[n];if(GP("prerelease compare",n,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return J_(r,i)}while(++n)}inc(t,n,r){switch(t){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",n,r);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",n,r);break;case"prepatch":this.prerelease.length=0,this.inc("patch",n,r),this.inc("pre",n,r);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",n,r),this.inc("pre",n,r);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const i=Number(r)?1:0;if(!n&&r===!1)throw new Error("invalid increment argument: identifier is empty");if(this.prerelease.length===0)this.prerelease=[i];else{let s=this.prerelease.length;for(;--s>=0;)typeof this.prerelease[s]=="number"&&(this.prerelease[s]++,s=-2);if(s===-1){if(n===this.prerelease.join(".")&&r===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(i)}}if(n){let s=[n,i];r===!1&&(s=[n]),J_(this.prerelease[0],n)===0?isNaN(this.prerelease[1])&&(this.prerelease=s):this.prerelease=s}break}default:throw new Error(`invalid increment argument: ${t}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};var Cie=oon;const lye=Cie,aon=(e,t,n)=>new lye(e,n).compare(new lye(t,n));var lT=aon;const uon=lT,lon=(e,t,n)=>uon(e,t,n)===0;var con=lon;const fon=lT,don=(e,t,n)=>fon(e,t,n)!==0;var hon=don;const pon=lT,mon=(e,t,n)=>pon(e,t,n)>0;var gon=mon;const yon=lT,von=(e,t,n)=>yon(e,t,n)>=0;var bon=von;const _on=lT,won=(e,t,n)=>_on(e,t,n)<0;var Eon=won;const xon=lT,Son=(e,t,n)=>xon(e,t,n)<=0;var Ton=Son;const Con=con,Aon=hon,Ion=gon,kon=bon,Ron=Eon,Non=Ton,Pon=(e,t,n,r)=>{switch(t){case"===":return typeof e=="object"&&(e=e.version),typeof n=="object"&&(n=n.version),e===n;case"!==":return typeof e=="object"&&(e=e.version),typeof n=="object"&&(n=n.version),e!==n;case"":case"=":case"==":return Con(e,n,r);case"!=":return Aon(e,n,r);case">":return Ion(e,n,r);case">=":return kon(e,n,r);case"<":return Ron(e,n,r);case"<=":return Non(e,n,r);default:throw new TypeError(`Invalid operator: ${t}`)}};var Don=Pon,qB,cye;function Oon(){if(cye)return qB;cye=1;const e=Symbol("SemVer ANY");class t{static get ANY(){return e}constructor(c,f){if(f=n(f),c instanceof t){if(c.loose===!!f.loose)return c;c=c.value}c=c.trim().split(/\s+/).join(" "),o("comparator",c,f),this.options=f,this.loose=!!f.loose,this.parse(c),this.semver===e?this.value="":this.value=this.operator+this.semver.version,o("comp",this)}parse(c){const f=this.options.loose?r[i.COMPARATORLOOSE]:r[i.COMPARATOR],d=c.match(f);if(!d)throw new TypeError(`Invalid comparator: ${c}`);this.operator=d[1]!==void 0?d[1]:"",this.operator==="="&&(this.operator=""),d[2]?this.semver=new a(d[2],this.options.loose):this.semver=e}toString(){return this.value}test(c){if(o("Comparator.test",c,this.options.loose),this.semver===e||c===e)return!0;if(typeof c=="string")try{c=new a(c,this.options)}catch{return!1}return s(c,this.operator,this.semver,this.options)}intersects(c,f){if(!(c instanceof t))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new u(c.value,f).test(this.value):c.operator===""?c.value===""?!0:new u(this.value,f).test(c.semver):(f=n(f),f.includePrerelease&&(this.value==="<0.0.0-0"||c.value==="<0.0.0-0")||!f.includePrerelease&&(this.value.startsWith("<0.0.0")||c.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&c.operator.startsWith(">")||this.operator.startsWith("<")&&c.operator.startsWith("<")||this.semver.version===c.semver.version&&this.operator.includes("=")&&c.operator.includes("=")||s(this.semver,"<",c.semver,f)&&this.operator.startsWith(">")&&c.operator.startsWith("<")||s(this.semver,">",c.semver,f)&&this.operator.startsWith("<")&&c.operator.startsWith(">")))}}qB=t;const n=xie,{safeRe:r,t:i}=Tie,s=Don,o=$5,a=Cie,u=Cje();return qB}var WB,fye;function Cje(){if(fye)return WB;fye=1;class e{constructor($,F){if(F=r(F),$ instanceof e)return $.loose===!!F.loose&&$.includePrerelease===!!F.includePrerelease?$:new e($.raw,F);if($ instanceof i)return this.raw=$.value,this.set=[[$]],this.format(),this;if(this.options=F,this.loose=!!F.loose,this.includePrerelease=!!F.includePrerelease,this.raw=$.trim().split(/\s+/).join(" "),this.set=this.raw.split("||").map(M=>this.parseRange(M.trim())).filter(M=>M.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const M=this.set[0];if(this.set=this.set.filter(B=>!p(B[0])),this.set.length===0)this.set=[M];else if(this.set.length>1){for(const B of this.set)if(B.length===1&&m(B[0])){this.set=[B];break}}}this.format()}format(){return this.range=this.set.map($=>$.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange($){const M=((this.options.includePrerelease&&d)|(this.options.loose&&h))+":"+$,B=n.get(M);if(B)return B;const U=this.options.loose,H=U?a[u.HYPHENRANGELOOSE]:a[u.HYPHENRANGE];$=$.replace(H,N(this.options.includePrerelease)),s("hyphen replace",$),$=$.replace(a[u.COMPARATORTRIM],l),s("comparator trim",$),$=$.replace(a[u.TILDETRIM],c),s("tilde trim",$),$=$.replace(a[u.CARETTRIM],f),s("caret trim",$);let P=$.split(" ").map(q=>y(q,this.options)).join(" ").split(/\s+/).map(q=>k(q,this.options));U&&(P=P.filter(q=>(s("loose invalid filter",q,this.options),!!q.match(a[u.COMPARATORLOOSE])))),s("range list",P);const z=new Map,W=P.map(q=>new i(q,this.options));for(const q of W){if(p(q))return[q];z.set(q.value,q)}z.size>1&&z.has("")&&z.delete("");const j=[...z.values()];return n.set(M,j),j}intersects($,F){if(!($ instanceof e))throw new TypeError("a Range is required");return this.set.some(M=>g(M,F)&&$.set.some(B=>g(B,F)&&M.every(U=>B.every(H=>U.intersects(H,F)))))}test($){if(!$)return!1;if(typeof $=="string")try{$=new o($,this.options)}catch{return!1}for(let F=0;F<this.set.length;F++)if(O(this.set[F],$,this.options))return!0;return!1}}WB=e;const t=Gsn,n=new t({max:1e3}),r=xie,i=Oon(),s=$5,o=Cie,{safeRe:a,t:u,comparatorTrimReplace:l,tildeTrimReplace:c,caretTrimReplace:f}=Tie,{FLAG_INCLUDE_PRERELEASE:d,FLAG_LOOSE:h}=Sie,p=D=>D.value==="<0.0.0-0",m=D=>D.value==="",g=(D,$)=>{let F=!0;const M=D.slice();let B=M.pop();for(;F&&M.length;)F=M.every(U=>B.intersects(U,$)),B=M.pop();return F},y=(D,$)=>(s("comp",D,$),D=E(D,$),s("caret",D),D=_(D,$),s("tildes",D),D=T(D,$),s("xrange",D),D=A(D,$),s("stars",D),D),v=D=>!D||D.toLowerCase()==="x"||D==="*",_=(D,$)=>D.trim().split(/\s+/).map(F=>w(F,$)).join(" "),w=(D,$)=>{const F=$.loose?a[u.TILDELOOSE]:a[u.TILDE];return D.replace(F,(M,B,U,H,P)=>{s("tilde",D,M,B,U,H,P);let z;return v(B)?z="":v(U)?z=`>=${B}.0.0 <${+B+1}.0.0-0`:v(H)?z=`>=${B}.${U}.0 <${B}.${+U+1}.0-0`:P?(s("replaceTilde pr",P),z=`>=${B}.${U}.${H}-${P} <${B}.${+U+1}.0-0`):z=`>=${B}.${U}.${H} <${B}.${+U+1}.0-0`,s("tilde return",z),z})},E=(D,$)=>D.trim().split(/\s+/).map(F=>S(F,$)).join(" "),S=(D,$)=>{s("caret",D,$);const F=$.loose?a[u.CARETLOOSE]:a[u.CARET],M=$.includePrerelease?"-0":"";return D.replace(F,(B,U,H,P,z)=>{s("caret",D,B,U,H,P,z);let W;return v(U)?W="":v(H)?W=`>=${U}.0.0${M} <${+U+1}.0.0-0`:v(P)?U==="0"?W=`>=${U}.${H}.0${M} <${U}.${+H+1}.0-0`:W=`>=${U}.${H}.0${M} <${+U+1}.0.0-0`:z?(s("replaceCaret pr",z),U==="0"?H==="0"?W=`>=${U}.${H}.${P}-${z} <${U}.${H}.${+P+1}-0`:W=`>=${U}.${H}.${P}-${z} <${U}.${+H+1}.0-0`:W=`>=${U}.${H}.${P}-${z} <${+U+1}.0.0-0`):(s("no pr"),U==="0"?H==="0"?W=`>=${U}.${H}.${P}${M} <${U}.${H}.${+P+1}-0`:W=`>=${U}.${H}.${P}${M} <${U}.${+H+1}.0-0`:W=`>=${U}.${H}.${P} <${+U+1}.0.0-0`),s("caret return",W),W})},T=(D,$)=>(s("replaceXRanges",D,$),D.split(/\s+/).map(F=>C(F,$)).join(" ")),C=(D,$)=>{D=D.trim();const F=$.loose?a[u.XRANGELOOSE]:a[u.XRANGE];return D.replace(F,(M,B,U,H,P,z)=>{s("xRange",D,M,B,U,H,P,z);const W=v(U),j=W||v(H),q=j||v(P),G=q;return B==="="&&G&&(B=""),z=$.includePrerelease?"-0":"",W?B===">"||B==="<"?M="<0.0.0-0":M="*":B&&G?(j&&(H=0),P=0,B===">"?(B=">=",j?(U=+U+1,H=0,P=0):(H=+H+1,P=0)):B==="<="&&(B="<",j?U=+U+1:H=+H+1),B==="<"&&(z="-0"),M=`${B+U}.${H}.${P}${z}`):j?M=`>=${U}.0.0${z} <${+U+1}.0.0-0`:q&&(M=`>=${U}.${H}.0${z} <${U}.${+H+1}.0-0`),s("xRange return",M),M})},A=(D,$)=>(s("replaceStars",D,$),D.trim().replace(a[u.STAR],"")),k=(D,$)=>(s("replaceGTE0",D,$),D.trim().replace(a[$.includePrerelease?u.GTE0PRE:u.GTE0],"")),N=D=>($,F,M,B,U,H,P,z,W,j,q,G,ne)=>(v(M)?F="":v(B)?F=`>=${M}.0.0${D?"-0":""}`:v(U)?F=`>=${M}.${B}.0${D?"-0":""}`:H?F=`>=${F}`:F=`>=${F}${D?"-0":""}`,v(W)?z="":v(j)?z=`<${+W+1}.0.0-0`:v(q)?z=`<${W}.${+j+1}.0-0`:G?z=`<=${W}.${j}.${q}-${G}`:D?z=`<${W}.${j}.${+q+1}-0`:z=`<=${z}`,`${F} ${z}`.trim()),O=(D,$,F)=>{for(let M=0;M<D.length;M++)if(!D[M].test($))return!1;if($.prerelease.length&&!F.includePrerelease){for(let M=0;M<D.length;M++)if(s(D[M].semver),D[M].semver!==i.ANY&&D[M].semver.prerelease.length>0){const B=D[M].semver;if(B.major===$.major&&B.minor===$.minor&&B.patch===$.patch)return!0}return!1}return!0};return WB}const $on=Cje(),Mon=(e,t,n)=>{try{t=new $on(t,n)}catch{return!1}return t.test(e)};var Lon=Mon,Aje=Fsn(Lon);function Fon(e,t,n){const r=e.open(t),i=1e4,s=250,{origin:o}=new URL(t);let a=~~(i/s);function u(c){c.source===r&&(a=0,e.removeEventListener("message",u,!1))}e.addEventListener("message",u,!1);function l(){a<=0||(r.postMessage(n,o),setTimeout(l,s),a-=1)}setTimeout(l,s)}var jon=`.vega-embed {
  position: relative;
  display: inline-block;
  box-sizing: border-box;
}
.vega-embed.has-actions {
  padding-right: 38px;
}
.vega-embed details:not([open]) > :not(summary) {
  display: none !important;
}
.vega-embed summary {
  list-style: none;
  position: absolute;
  top: 0;
  right: 0;
  padding: 6px;
  z-index: 1000;
  background: white;
  box-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1);
  color: #1b1e23;
  border: 1px solid #aaa;
  border-radius: 999px;
  opacity: 0.2;
  transition: opacity 0.4s ease-in;
  cursor: pointer;
  line-height: 0px;
}
.vega-embed summary::-webkit-details-marker {
  display: none;
}
.vega-embed summary:active {
  box-shadow: #aaa 0px 0px 0px 1px inset;
}
.vega-embed summary svg {
  width: 14px;
  height: 14px;
}
.vega-embed details[open] summary {
  opacity: 0.7;
}
.vega-embed:hover summary, .vega-embed:focus-within summary {
  opacity: 1 !important;
  transition: opacity 0.2s ease;
}
.vega-embed .vega-actions {
  position: absolute;
  z-index: 1001;
  top: 35px;
  right: -9px;
  display: flex;
  flex-direction: column;
  padding-bottom: 8px;
  padding-top: 8px;
  border-radius: 4px;
  box-shadow: 0 2px 8px 0 rgba(0, 0, 0, 0.2);
  border: 1px solid #d9d9d9;
  background: white;
  animation-duration: 0.15s;
  animation-name: scale-in;
  animation-timing-function: cubic-bezier(0.2, 0, 0.13, 1.5);
  text-align: left;
}
.vega-embed .vega-actions a {
  padding: 8px 16px;
  font-family: sans-serif;
  font-size: 14px;
  font-weight: 600;
  white-space: nowrap;
  color: #434a56;
  text-decoration: none;
}
.vega-embed .vega-actions a:hover, .vega-embed .vega-actions a:focus {
  background-color: #f7f7f9;
  color: black;
}
.vega-embed .vega-actions::before, .vega-embed .vega-actions::after {
  content: "";
  display: inline-block;
  position: absolute;
}
.vega-embed .vega-actions::before {
  left: auto;
  right: 14px;
  top: -16px;
  border: 8px solid rgba(0, 0, 0, 0);
  border-bottom-color: #d9d9d9;
}
.vega-embed .vega-actions::after {
  left: auto;
  right: 15px;
  top: -14px;
  border: 7px solid rgba(0, 0, 0, 0);
  border-bottom-color: #fff;
}
.vega-embed .chart-wrapper.fit-x {
  width: 100%;
}
.vega-embed .chart-wrapper.fit-y {
  height: 100%;
}

.vega-embed-wrapper {
  max-width: 100%;
  overflow: auto;
  padding-right: 14px;
}

@keyframes scale-in {
  from {
    opacity: 0;
    transform: scale(0.6);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}
`;function Ije(e,...t){for(const n of t)Bon(e,n);return e}function Bon(e,t){for(const n of Object.keys(t))qS(e,n,t[n],!0)}const mf=xKt;let ZI=Iin;const KP=typeof window<"u"?window:void 0;var _ye;ZI===void 0&&((_ye=KP==null?void 0:KP.vl)!=null&&_ye.compile)&&(ZI=KP.vl);const Uon={export:{svg:!0,png:!0},source:!0,compiled:!0,editor:!0},zon={CLICK_TO_VIEW_ACTIONS:"Click to view actions",COMPILED_ACTION:"View Compiled Vega",EDITOR_ACTION:"Open in Vega Editor",PNG_ACTION:"Save as PNG",SOURCE_ACTION:"View Source",SVG_ACTION:"Save as SVG"},sC={vega:"Vega","vega-lite":"Vega-Lite"},nL={vega:mf.version,"vega-lite":ZI?ZI.version:"not available"},Von={vega:e=>e,"vega-lite":(e,t)=>ZI.compile(e,{config:t}).spec},Hon=`
<svg viewBox="0 0 16 16" fill="currentColor" stroke="none" stroke-width="1" stroke-linecap="round" stroke-linejoin="round">
  <circle r="2" cy="8" cx="2"></circle>
  <circle r="2" cy="8" cx="8"></circle>
  <circle r="2" cy="8" cx="14"></circle>
</svg>`,qon="chart-wrapper";function Won(e){return typeof e=="function"}function dye(e,t,n,r){const i=`<html><head>${t}</head><body><pre><code class="json">`,s=`</code></pre>${n}</body></html>`,o=window.open("");o.document.write(i+e+s),o.document.title=`${sC[r]} JSON Source`}function Gon(e,t){if(e.$schema){const n=bje(e.$schema);t&&t!==n.library&&console.warn(`The given visualization spec is written in ${sC[n.library]}, but mode argument sets ${sC[t]??t}.`);const r=n.library;return Aje(nL[r],`^${n.version.slice(1)}`)||console.warn(`The input spec uses ${sC[r]} ${n.version}, but the current version of ${sC[r]} is v${nL[r]}.`),r}return"mark"in e||"encoding"in e||"layer"in e||"hconcat"in e||"vconcat"in e||"facet"in e||"repeat"in e?"vega-lite":"marks"in e||"signals"in e||"scales"in e||"axes"in e?"vega":t??"vega"}function kje(e){return!!(e&&"load"in e)}function hye(e){return kje(e)?e:mf.loader(e)}function Yon(e){var n;const t=((n=e.usermeta)==null?void 0:n.embedOptions)??{};return mt(t.defaultStyle)&&(t.defaultStyle=!1),t}async function Kon(e,t,n={}){let r,i;mt(t)?(i=hye(n.loader),r=JSON.parse(await i.load(t))):r=t;const s=Yon(r),o=s.loader;(!i||o)&&(i=hye(n.loader??o));const a=await pye(s,i),u=await pye(n,i),l={...Ije(u,a),config:HS(u.config??{},a.config??{})};return await Qon(e,r,l,i)}async function pye(e,t){const n=mt(e.config)?JSON.parse(await t.load(e.config)):e.config??{},r=mt(e.patch)?JSON.parse(await t.load(e.patch)):e.patch;return{...e,...r?{patch:r}:{},...n?{config:n}:{}}}function Xon(e){const t=e.getRootNode?e.getRootNode():document;return t instanceof ShadowRoot?{root:t,rootContainer:t}:{root:document,rootContainer:document.head??document.body}}async function Qon(e,t,n={},r){const i=n.theme?HS(ksn[n.theme],n.config??{}):n.config,s=Yy(n.actions)?n.actions:Ije({},Uon,n.actions??{}),o={...zon,...n.i18n},a=n.renderer??"canvas",u=n.logLevel??mf.Warn,l=n.downloadFileName??"visualization",c=typeof e=="string"?document.querySelector(e):e;if(!c)throw new Error(`${e} does not exist`);if(n.defaultStyle!==!1){const E="vega-embed-style",{root:S,rootContainer:T}=Xon(c);if(!S.getElementById(E)){const C=document.createElement("style");C.id=E,C.innerHTML=n.defaultStyle===void 0||n.defaultStyle===!0?jon.toString():n.defaultStyle,T.appendChild(C)}}const f=Gon(t,n.mode);let d=Von[f](t,i);if(f==="vega-lite"&&d.$schema){const E=bje(d.$schema);Aje(nL.vega,`^${E.version.slice(1)}`)||console.warn(`The compiled spec uses Vega ${E.version}, but current version is v${nL.vega}.`)}c.classList.add("vega-embed"),s&&c.classList.add("has-actions"),c.innerHTML="";let h=c;if(s){const E=document.createElement("div");E.classList.add(qon),c.appendChild(E),h=E}const p=n.patch;if(p&&(d=p instanceof Function?p(d):X4(d,p,!0,!1).newDocument),n.formatLocale&&mf.formatLocale(n.formatLocale),n.timeFormatLocale&&mf.timeFormatLocale(n.timeFormatLocale),n.expressionFunctions)for(const E in n.expressionFunctions){const S=n.expressionFunctions[E];"fn"in S?mf.expressionFunction(E,S.fn,S.visitor):S instanceof Function&&mf.expressionFunction(E,S)}const{ast:m}=n,g=mf.parse(d,f==="vega-lite"?{}:i,{ast:m}),y=new(n.viewClass||mf.View)(g,{loader:r,logLevel:u,renderer:a,...m?{expr:mf.expressionInterpreter??n.expr??DKt}:{}});if(y.addSignalListener("autosize",(E,S)=>{const{type:T}=S;T=="fit-x"?(h.classList.add("fit-x"),h.classList.remove("fit-y")):T=="fit-y"?(h.classList.remove("fit-x"),h.classList.add("fit-y")):T=="fit"?h.classList.add("fit-x","fit-y"):h.classList.remove("fit-x","fit-y")}),n.tooltip!==!1){const{loader:E,tooltip:S}=n,T=E&&!kje(E)?E==null?void 0:E.baseURL:void 0,C=Won(S)?S:new Lsn({baseURL:T,...S===!0?{}:S}).call;y.tooltip(C)}let{hover:v}=n;if(v===void 0&&(v=f==="vega"),v){const{hoverSet:E,updateSet:S}=typeof v=="boolean"?{}:v;y.hover(E,S)}n&&(n.width!=null&&y.width(n.width),n.height!=null&&y.height(n.height),n.padding!=null&&y.padding(n.padding)),await y.initialize(h,n.bind).runAsync();let _;if(s!==!1){let E=c;if(n.defaultStyle!==!1||n.forceActionsMenu){const T=document.createElement("details");T.title=o.CLICK_TO_VIEW_ACTIONS,c.append(T),E=T;const C=document.createElement("summary");C.innerHTML=Hon,T.append(C),_=A=>{T.contains(A.target)||T.removeAttribute("open")},document.addEventListener("click",_)}const S=document.createElement("div");if(E.append(S),S.classList.add("vega-actions"),s===!0||s.export!==!1){for(const T of["svg","png"])if(s===!0||s.export===!0||s.export[T]){const C=o[`${T.toUpperCase()}_ACTION`],A=document.createElement("a"),k=gt(n.scaleFactor)?n.scaleFactor[T]:n.scaleFactor;A.text=C,A.href="#",A.target="_blank",A.download=`${l}.${T}`,A.addEventListener("mousedown",async function(N){N.preventDefault();const O=await y.toImageURL(T,k);this.href=O}),S.append(A)}}if(s===!0||s.source!==!1){const T=document.createElement("a");T.text=o.SOURCE_ACTION,T.href="#",T.addEventListener("click",function(C){dye(G9(t),n.sourceHeader??"",n.sourceFooter??"",f),C.preventDefault()}),S.append(T)}if(f==="vega-lite"&&(s===!0||s.compiled!==!1)){const T=document.createElement("a");T.text=o.COMPILED_ACTION,T.href="#",T.addEventListener("click",function(C){dye(G9(d),n.sourceHeader??"",n.sourceFooter??"","vega"),C.preventDefault()}),S.append(T)}if(s===!0||s.editor!==!1){const T=n.editorUrl??"https://vega.github.io/editor/",C=document.createElement("a");C.text=o.EDITOR_ACTION,C.href="#",C.addEventListener("click",function(A){Fon(window,T,{config:i,mode:f,renderer:a,spec:G9(t)}),A.preventDefault()}),S.append(C)}}function w(){_&&document.removeEventListener("click",_),y.finalize()}return{view:y,spec:t,vgSpec:d,finalize:w,embedOptions:n}}function Jon(e){return!!e&&{}.toString.call(e)==="[object Function]"}function Zon(e,t,n){n&&(Jon(n)?n(e.data(t)):e.change(t,mf.changeset().remove(()=>!0).insert(n)))}function ean(e,t){Object.keys(t).forEach(n=>{Zon(e,n,t[n])})}function Rje(e){const t=new Set;return e.forEach(n=>{Object.keys(n).forEach(r=>{t.add(r)})}),t}const Nje=()=>{};function GB(e,t){const n=Object.keys(t);return n.forEach(r=>{try{e.addSignalListener(r,t[r])}catch(i){console.warn("Cannot add invalid signal listener.",i)}}),n.length>0}function tan(e,t){if(e===t)return!1;const n={width:!1,height:!1,isExpensive:!1},r=Rje([e,t]);return r.has("width")&&(!("width"in e)||!("width"in t)||e.width!==t.width)&&("width"in e&&typeof e.width=="number"?n.width=e.width:n.isExpensive=!0),r.has("height")&&(!("height"in e)||!("height"in t)||e.height!==t.height)&&("height"in e&&typeof e.height=="number"?n.height=e.height:n.isExpensive=!0),r.delete("width"),r.delete("height"),[...r].some(i=>!(i in e)||!(i in t)||!yD(e[i],t[i]))&&(n.isExpensive=!0),n.width!==!1||n.height!==!1||n.isExpensive?n:!1}function mye(e,t){const n=Object.keys(t);return n.forEach(r=>{try{e.removeSignalListener(r,t[r])}catch(i){console.warn("Cannot remove invalid signal listener.",i)}}),n.length>0}function YB(e){const{spec:t,width:n,height:r}=e;return typeof n<"u"&&typeof r<"u"?{...t,width:n,height:r}:typeof n<"u"?{...t,width:n}:typeof r<"u"?{...t,height:r}:t}function oC(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class Pje extends _r.PureComponent{constructor(){super(...arguments),oC(this,"containerRef",_r.createRef()),oC(this,"resultPromise",void 0),oC(this,"handleError",t=>{const{onError:n=Nje}=this.props;n(t,this.containerRef.current),console.warn(t)}),oC(this,"modifyView",t=>{this.resultPromise&&this.resultPromise.then(n=>(n&&t(n.view),!0)).catch(this.handleError)})}componentDidMount(){this.createView()}componentDidUpdate(t){const n=Rje([this.props,t]);if(n.delete("className"),n.delete("signalListeners"),n.delete("spec"),n.delete("style"),n.delete("width"),n.delete("height"),Array.from(n).some(r=>this.props[r]!==t[r]))this.clearView(),this.createView();else{const r=tan(YB(this.props),YB(t)),{signalListeners:i}=this.props,{signalListeners:s}=t;if(r)if(r.isExpensive)this.clearView(),this.createView();else{const o=!iH(i,s);this.modifyView(a=>{r.width!==!1&&a.width(r.width),r.height!==!1&&a.height(r.height),o&&(s&&mye(a,s),i&&GB(a,i)),a.run()})}else iH(i,s)||this.modifyView(o=>{s&&mye(o,s),i&&GB(o,i),o.run()})}}componentWillUnmount(){this.clearView()}createView(){const{spec:t,onNewView:n,signalListeners:r={},width:i,height:s,...o}=this.props;if(this.containerRef.current){const a=YB(this.props);this.resultPromise=Kon(this.containerRef.current,a,o).then(u=>{if(u){const{view:l}=u;GB(l,r)&&l.run()}return u}).catch(this.handleError),n&&this.modifyView(n)}}clearView(){return this.resultPromise&&this.resultPromise.then(t=>{t&&t.finalize()}).catch(this.handleError),this.resultPromise=void 0,this}render(){const{className:t,style:n}=this.props;return _r.createElement("div",{ref:this.containerRef,className:t,style:n})}}oC(Pje,"propTypes",{className:sae.string,onError:sae.func});function Dq(){return Dq=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Dq.apply(this,arguments)}function Oq(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const nan={};class Dje extends _r.PureComponent{constructor(){super(...arguments),Oq(this,"vegaEmbed",_r.createRef()),Oq(this,"handleNewView",t=>{this.update();const{onNewView:n=Nje}=this.props;n(t)})}componentDidMount(){this.update()}componentDidUpdate(t){iH(this.props.data,t.data)||this.update()}update(){const{data:t}=this.props;this.vegaEmbed.current&&t&&Object.keys(t).length>0&&this.vegaEmbed.current.modifyView(n=>{ean(n,t),n.resize().run()})}render(){const{data:t,...n}=this.props;return _r.createElement(Pje,Dq({ref:this.vegaEmbed},n,{onNewView:this.handleNewView}))}}Oq(Dje,"defaultProps",{data:nan});function $q(){return $q=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},$q.apply(this,arguments)}function Mq(e){return _r.createElement(Dje,$q({},e,{mode:"vega-lite"}))}function ran({response:e,participantData:t,trialId:n,trialConfig:r}){const[i,{toggle:s}]=xL(!0),[o,a]=x1(),u=I.useMemo(()=>e.type==="metadata"?[]:t.map(d=>Object.entries(d.answers).filter(([h])=>h.slice(0,h.lastIndexOf("_"))===n)).map(d=>d.map(([,h])=>h.answer)).flat(),[t,e.type,n]),l=I.useMemo(()=>{var d;return e.type==="metadata"||(d=r.correctAnswer)==null?void 0:d.find(h=>h.id===e.id)},[e.id,e.type,r.correctAnswer]),c=I.useMemo(()=>{const f={height:"container",width:"container"};if(e.type==="shortText"||e.type==="longText")return{};if(e.type==="metadata"){const h=t.map(m=>Object.entries(m.answers).filter(([g])=>g.slice(0,g.lastIndexOf("_"))===n)).map(m=>m.map(([g,y])=>(y.endTime-y.startTime)/1e3)).flat();return{...f,data:{values:h},mark:"bar",encoding:{x:{field:"data",bin:!0,type:"quantitative",title:"Time (s)"},y:{aggregate:"count",type:"quantitative",title:"Count"}}}}const d={params:[{name:"correctAnswer",value:l==null?void 0:l.answer},{name:"variable",value:e.id}],transform:[{calculate:"datum[variable] === correctAnswer ? 'correct' : 'incorrect'",as:"result"},{calculate:"if(datum.result === 'correct', 0, if(datum.result === 'incorrect', 1, 2))",as:"order"}],color:{field:"result",type:"nominal",scale:{domain:["correct","incorrect"],range:["#69DB7C","#ADB5BD"]}},order:{field:"order"}};if(e.type==="numerical"||e.type==="slider"||e.type==="likert"){let h,p;return e.type==="numerical"&&(h=e.min,p=e.max),e.type==="slider"&&(h=Math.min(...e.options.map(g=>g.value)),p=Math.max(...e.options.map(g=>g.value))),e.type==="likert"&&(h=1,p=e.numItems),{...f,data:{values:u},mark:"bar",params:l!==void 0?d.params:void 0,transform:[{bin:e.type==="likert"?{step:1}:{maxbins:10},field:e.id,as:"bins"},...l!==void 0?d.transform:[]],encoding:{x:{field:"bins",scale:h!==void 0&&p!==void 0?{domain:[h,p]}:void 0,type:"quantitative",title:"Answer"},x2:{field:"bins_end"},y:{aggregate:"count",type:"quantitative",title:"Count",stack:!0},color:l!==void 0?d.color:void 0,order:l!==void 0?d.order:void 0}}}if(e.type==="radio"||e.type==="dropdown"||e.type==="checkbox")return{...f,data:{values:u},mark:"bar",params:l!==void 0?d.params:void 0,transform:l!==void 0?d.transform:void 0,encoding:{x:{field:e.id,type:"ordinal",title:"Answer"},y:{aggregate:"count",type:"quantitative",title:"Count"},color:l!==void 0?d.color:void 0}}},[t,u,e.id,e.max,e.min,e.numItems,e.options,e.type,n,l]);return b.jsxs(Ob,{p:"lg",withBorder:!0,ref:o,children:[b.jsxs(Nt,{direction:"row",justify:"space-between",onClick:s,children:[b.jsxs(Nt,{align:"center",children:[e.type==="metadata"&&b.jsx(bQe,{size:20}),e.type==="numerical"&&b.jsx(IQe,{size:20}),(e.type==="shortText"||e.type==="longText")&&b.jsx(pQe,{size:20}),e.type==="likert"&&b.jsx(EQe,{size:20}),e.type==="dropdown"&&b.jsx($Qe,{size:20}),e.type==="slider"&&b.jsx(lQe,{size:20}),e.type==="radio"&&b.jsx(NQe,{size:20}),e.type==="checkbox"&&b.jsx(MQe,{size:20}),e.type==="iframe"&&b.jsx(TQe,{size:20}),b.jsx(li,{order:5,ml:4,children:e.id})]}),b.jsx(vQe,{style:{rotate:i?"180deg":"none",transition:"rotate 200ms"}})]}),b.jsxs(TL,{in:i,mah:400,children:[b.jsx(pe,{style:{top:0,position:"sticky",backgroundColor:"white",zIndex:2},py:"md",children:b.jsx(FE,{})}),b.jsxs(mY,{cols:2,h:360,children:[b.jsx(bm,{mih:200,children:e.type!=="metadata"&&e.type!=="shortText"&&e.type!=="longText"&&e.type!=="iframe"?b.jsx(Mq,{spec:c,actions:!1,height:270,width:a.width/2-60-(l===void 0?0:60),padding:0,style:{justifySelf:"center"},renderer:"svg"}):b.jsxs(Nt,{direction:"column",gap:"xs",style:{overflowX:"clip"},children:[e.type==="metadata"&&b.jsx(yC,{block:!0,children:`${JSON.stringify(r,null,2)}`}),e.type!=="metadata"&&b.jsxs(b.Fragment,{children:[b.jsx(Xe,{fw:700,children:"Response Values: "}),u.map((f,d)=>b.jsx(Nt,{align:"center",gap:"xs",children:b.jsx(Xe,{children:f[e.id]})},d))]})]})}),b.jsx(bm,{mih:200,children:e.type==="metadata"?b.jsx(Mq,{spec:c,actions:!1,width:a.width/2-60,height:270,padding:0,style:{justifySelf:"center"}}):b.jsxs(b.Fragment,{children:[b.jsx(Xe,{fw:700,children:"Response Specification: "}),b.jsx(yC,{block:!0,children:JSON.stringify(e,null,2)}),b.jsx("br",{}),l&&b.jsxs(b.Fragment,{children:[b.jsx(Xe,{fw:700,children:"Correct Answer: "}),b.jsx(yC,{block:!0,children:JSON.stringify(l,null,2)})]})]})})]})]})]})}function ian({participantData:e,studyConfig:t,trialId:n}){const r=n&&n!=="end"&&ENe(t.components[n],t),i=I.useMemo(()=>[{id:"Config and Timing",type:"metadata"},...r?r.response:[]],[r]);return r?b.jsx(Nt,{w:"100%",direction:"column",gap:"xs",children:i.map(s=>b.jsx(ran,{response:s,participantData:e,trialId:n,trialConfig:r},s.id))}):b.jsx(Nt,{justify:"center",align:"center",pt:"lg",pb:"md",w:"100%",children:b.jsx(Xe,{children:n!=="end"?"No trial selected":"The end component has no data."})})}function san({studyConfig:e,inprogress:t,completed:n,rejected:r}){const[i,s]=I.useState([...n]),o=I.useCallback(l=>{const c=[];l.includes("completed")&&c.push(...n),l.includes("inprogress")&&c.push(...t),l.includes("rejected")&&c.push(...r),s(c)},[n,t,r]),a=I.useMemo(()=>{let l=x0(e.sequence);return l=oK(l,"root"),l.components.push("end"),l},[e.sequence]),{trialId:u}=Em();return b.jsxs(Ob,{shadow:"sm",p:"md",withBorder:!0,children:[b.jsx(Nt,{direction:"row",justify:"space-between",children:b.jsx(Tl.Group,{defaultValue:["completed"],onChange:o,mb:"xs",mt:8,ml:"xs",children:b.jsxs(ls,{children:[b.jsx(Tl,{value:"completed",label:"Completed"}),b.jsx(Tl,{value:"inprogress",label:"In Progress"}),b.jsx(Tl,{value:"rejected",label:"Rejected"})]})})}),b.jsx(FE,{my:"xs"}),i.length===0?b.jsx(Nt,{justify:"center",align:"center",pt:"lg",pb:"md",children:b.jsx(Xe,{children:"No data available."})}):b.jsxs(Nt,{direction:"row",children:[b.jsx(pe,{w:340,children:b.jsx(q$,{configSequence:a,participantSequence:a,fullSequence:a,participantView:!1,studyConfig:e,analysisNavigation:!0})}),b.jsx(FE,{orientation:"vertical",mx:"md"}),b.jsx(ian,{participantData:i,studyConfig:e,trialId:u})]})]})}function oan({globalConfig:e}){const{studyId:t}=Em(),[n,r]=I.useState([]),[i,s]=I.useState(void 0),[o,a]=I.useState(!1),{storageEngine:u}=Cs(),l=Yh(),{tab:c}=Em(),{user:f}=r_(),d=I.useCallback(async()=>{if(a(!0),t){const g=await S4(t,e);if(!g||!u)return;await u.initializeStudyDb(t,g);const y=await u.getAllParticipantsData();r(y),s(g),a(!1)}},[e,u,t]);I.useEffect(()=>{d()},[e,u,t,d]);const[h,p,m]=I.useMemo(()=>{const g=n.filter(_=>!_.rejected&&_.completed),y=n.filter(_=>!_.rejected&&!_.completed),v=n.filter(_=>_.rejected);return[g,y,v]},[n]);return b.jsxs(b.Fragment,{children:[b.jsx(XC,{studyIds:e.configsList}),b.jsx(ni.Main,{children:b.jsxs($c,{fluid:!0,style:{height:"100%",position:"relative"},children:[b.jsx(Fl,{visible:o}),b.jsxs(Nt,{direction:"row",align:"center",children:[b.jsx(li,{order:5,children:t}),b.jsx(yOe,{completed:h.length,inProgress:p.length,rejected:m.length})]}),b.jsx(Pl,{h:"xs"}),b.jsxs(ns,{variant:"outline",value:c,onChange:g=>l(`/analysis/stats/${t}/${g}`),style:{height:"100%"},children:[b.jsxs(ns.List,{children:[b.jsx(ns.Tab,{value:"table",leftSection:b.jsx(LQe,{size:16}),children:"Table View"}),b.jsx(ns.Tab,{value:"stats",leftSection:b.jsx(gQe,{size:16}),children:"Trial Stats"}),b.jsx(ui,{label:"Coming soon",position:"bottom",children:b.jsx(ns.Tab,{value:"replay",leftSection:b.jsx(RQe,{size:16}),disabled:!0,children:"Participant Replay"})}),b.jsx(ns.Tab,{value:"manage",leftSection:b.jsx(Fwe,{size:16}),disabled:!f.isAdmin,children:"Manage"})]}),b.jsx(ns.Panel,{value:"table",pt:"xs",children:i&&b.jsx(m4t,{completed:h,inProgress:p,rejected:m,studyConfig:i,refresh:d})}),b.jsx(ns.Panel,{value:"stats",pt:"xs",children:i&&b.jsx(san,{studyConfig:i,completed:h,inprogress:p,rejected:m})}),b.jsx(ns.Panel,{value:"replay",pt:"xs",children:"Replay Tab Content"}),b.jsx(ns.Panel,{value:"manage",pt:"xs",children:t&&f.isAdmin?b.jsx(x4t,{studyId:t,refresh:d}):b.jsx($c,{mt:20,children:b.jsx(eS,{title:"Unauthorized Access",variant:"light",color:"red",icon:b.jsx(Mwe,{}),children:"You are not authorized to manage the data for this study."})})})]})]})})]})}function gye({children:e,paramToCheck:t,paramCallback:n}){const{user:r,verifyAdminStatus:i,logout:s}=r_(),{storageEngine:o}=Cs(),[a,u]=I.useState(!1),l=Em();return I.useEffect(()=>{(async()=>{if(a===!1)if(t&&n&&l[t]){const f=await n(l[t]);f&&u(f)}else u(!0);if(a)try{r&&await i(r)||s()}catch(f){s(),console.warn(f)}})()},[r.isAdmin,a]),r.determiningStatus||!o?b.jsx(Fl,{visible:r.determiningStatus||!(o!=null&&o.getEngine())}):a&&!r.isAdmin&&!r.determiningStatus?b.jsx(RY,{to:"/login"}):b.jsx(b.Fragment,{children:e})}async function Oje(e,t){if(e instanceof bc){t(!0);const n=new Hp,r=Z$();try{await sOt(r,n,hPe)}catch(i){uM({title:"Error",message:i.message,color:"red"})}finally{t(!1)}return r.currentUser}return null}function aan(){const{user:e}=r_(),[t,n]=I.useState(!1),{storageEngine:r}=Cs();return I.useEffect(()=>{!e.determiningStatus&&!e.isAdmin&&e.adminVerification&&uM({title:"Unauthorized",message:"You are not authorized to use this application.",color:"red"})},[e.adminVerification]),!e.determiningStatus&&e.isAdmin?b.jsx(RY,{to:"/"}):b.jsx($c,{children:b.jsx(Fb,{padding:"lg",children:b.jsxs(Nt,{align:"center",direction:"column",justify:"center",children:[b.jsx(Dy,{maw:200,mt:50,mb:100,src:`${Hu}revisitAssets/revisitLogoSquare.svg`,alt:"Revisit Logo"}),b.jsxs(b.Fragment,{children:[b.jsx(Xe,{mb:20,children:"To access admin settings, please sign in using your Google account."}),b.jsx(fn,{onClick:()=>Oje(r,n),leftSection:b.jsx(FQe,{}),variant:"filled",children:"Sign In With Google"})]}),b.jsx(Fl,{visible:t})]})})})}var $je={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(to,function(){var n=1e3,r=6e4,i=36e5,s="millisecond",o="second",a="minute",u="hour",l="day",c="week",f="month",d="quarter",h="year",p="date",m="Invalid Date",g=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,y=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,v={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function($){var F=["th","st","nd","rd"],M=$%100;return"["+$+(F[(M-20)%10]||F[M]||F[0])+"]"}},_=function($,F,M){var B=String($);return!B||B.length>=F?$:""+Array(F+1-B.length).join(M)+$},w={s:_,z:function($){var F=-$.utcOffset(),M=Math.abs(F),B=Math.floor(M/60),U=M%60;return(F<=0?"+":"-")+_(B,2,"0")+":"+_(U,2,"0")},m:function $(F,M){if(F.date()<M.date())return-$(M,F);var B=12*(M.year()-F.year())+(M.month()-F.month()),U=F.clone().add(B,f),H=M-U<0,P=F.clone().add(B+(H?-1:1),f);return+(-(B+(M-U)/(H?U-P:P-U))||0)},a:function($){return $<0?Math.ceil($)||0:Math.floor($)},p:function($){return{M:f,y:h,w:c,d:l,D:p,h:u,m:a,s:o,ms:s,Q:d}[$]||String($||"").toLowerCase().replace(/s$/,"")},u:function($){return $===void 0}},E="en",S={};S[E]=v;var T="$isDayjsObject",C=function($){return $ instanceof O||!(!$||!$[T])},A=function $(F,M,B){var U;if(!F)return E;if(typeof F=="string"){var H=F.toLowerCase();S[H]&&(U=H),M&&(S[H]=M,U=H);var P=F.split("-");if(!U&&P.length>1)return $(P[0])}else{var z=F.name;S[z]=F,U=z}return!B&&U&&(E=U),U||!B&&E},k=function($,F){if(C($))return $.clone();var M=typeof F=="object"?F:{};return M.date=$,M.args=arguments,new O(M)},N=w;N.l=A,N.i=C,N.w=function($,F){return k($,{locale:F.$L,utc:F.$u,x:F.$x,$offset:F.$offset})};var O=function(){function $(M){this.$L=A(M.locale,null,!0),this.parse(M),this.$x=this.$x||M.x||{},this[T]=!0}var F=$.prototype;return F.parse=function(M){this.$d=function(B){var U=B.date,H=B.utc;if(U===null)return new Date(NaN);if(N.u(U))return new Date;if(U instanceof Date)return new Date(U);if(typeof U=="string"&&!/Z$/i.test(U)){var P=U.match(g);if(P){var z=P[2]-1||0,W=(P[7]||"0").substring(0,3);return H?new Date(Date.UTC(P[1],z,P[3]||1,P[4]||0,P[5]||0,P[6]||0,W)):new Date(P[1],z,P[3]||1,P[4]||0,P[5]||0,P[6]||0,W)}}return new Date(U)}(M),this.init()},F.init=function(){var M=this.$d;this.$y=M.getFullYear(),this.$M=M.getMonth(),this.$D=M.getDate(),this.$W=M.getDay(),this.$H=M.getHours(),this.$m=M.getMinutes(),this.$s=M.getSeconds(),this.$ms=M.getMilliseconds()},F.$utils=function(){return N},F.isValid=function(){return this.$d.toString()!==m},F.isSame=function(M,B){var U=k(M);return this.startOf(B)<=U&&U<=this.endOf(B)},F.isAfter=function(M,B){return k(M)<this.startOf(B)},F.isBefore=function(M,B){return this.endOf(B)<k(M)},F.$g=function(M,B,U){return N.u(M)?this[B]:this.set(U,M)},F.unix=function(){return Math.floor(this.valueOf()/1e3)},F.valueOf=function(){return this.$d.getTime()},F.startOf=function(M,B){var U=this,H=!!N.u(B)||B,P=N.p(M),z=function(he,ve){var Ie=N.w(U.$u?Date.UTC(U.$y,ve,he):new Date(U.$y,ve,he),U);return H?Ie:Ie.endOf(l)},W=function(he,ve){return N.w(U.toDate()[he].apply(U.toDate("s"),(H?[0,0,0,0]:[23,59,59,999]).slice(ve)),U)},j=this.$W,q=this.$M,G=this.$D,ne="set"+(this.$u?"UTC":"");switch(P){case h:return H?z(1,0):z(31,11);case f:return H?z(1,q):z(0,q+1);case c:var ce=this.$locale().weekStart||0,de=(j<ce?j+7:j)-ce;return z(H?G-de:G+(6-de),q);case l:case p:return W(ne+"Hours",0);case u:return W(ne+"Minutes",1);case a:return W(ne+"Seconds",2);case o:return W(ne+"Milliseconds",3);default:return this.clone()}},F.endOf=function(M){return this.startOf(M,!1)},F.$set=function(M,B){var U,H=N.p(M),P="set"+(this.$u?"UTC":""),z=(U={},U[l]=P+"Date",U[p]=P+"Date",U[f]=P+"Month",U[h]=P+"FullYear",U[u]=P+"Hours",U[a]=P+"Minutes",U[o]=P+"Seconds",U[s]=P+"Milliseconds",U)[H],W=H===l?this.$D+(B-this.$W):B;if(H===f||H===h){var j=this.clone().set(p,1);j.$d[z](W),j.init(),this.$d=j.set(p,Math.min(this.$D,j.daysInMonth())).$d}else z&&this.$d[z](W);return this.init(),this},F.set=function(M,B){return this.clone().$set(M,B)},F.get=function(M){return this[N.p(M)]()},F.add=function(M,B){var U,H=this;M=Number(M);var P=N.p(B),z=function(q){var G=k(H);return N.w(G.date(G.date()+Math.round(q*M)),H)};if(P===f)return this.set(f,this.$M+M);if(P===h)return this.set(h,this.$y+M);if(P===l)return z(1);if(P===c)return z(7);var W=(U={},U[a]=r,U[u]=i,U[o]=n,U)[P]||1,j=this.$d.getTime()+M*W;return N.w(j,this)},F.subtract=function(M,B){return this.add(-1*M,B)},F.format=function(M){var B=this,U=this.$locale();if(!this.isValid())return U.invalidDate||m;var H=M||"YYYY-MM-DDTHH:mm:ssZ",P=N.z(this),z=this.$H,W=this.$m,j=this.$M,q=U.weekdays,G=U.months,ne=U.meridiem,ce=function(ve,Ie,be,Ke){return ve&&(ve[Ie]||ve(B,H))||be[Ie].slice(0,Ke)},de=function(ve){return N.s(z%12||12,ve,"0")},he=ne||function(ve,Ie,be){var Ke=ve<12?"AM":"PM";return be?Ke.toLowerCase():Ke};return H.replace(y,function(ve,Ie){return Ie||function(be){switch(be){case"YY":return String(B.$y).slice(-2);case"YYYY":return N.s(B.$y,4,"0");case"M":return j+1;case"MM":return N.s(j+1,2,"0");case"MMM":return ce(U.monthsShort,j,G,3);case"MMMM":return ce(G,j);case"D":return B.$D;case"DD":return N.s(B.$D,2,"0");case"d":return String(B.$W);case"dd":return ce(U.weekdaysMin,B.$W,q,2);case"ddd":return ce(U.weekdaysShort,B.$W,q,3);case"dddd":return q[B.$W];case"H":return String(z);case"HH":return N.s(z,2,"0");case"h":return de(1);case"hh":return de(2);case"a":return he(z,W,!0);case"A":return he(z,W,!1);case"m":return String(W);case"mm":return N.s(W,2,"0");case"s":return String(B.$s);case"ss":return N.s(B.$s,2,"0");case"SSS":return N.s(B.$ms,3,"0");case"Z":return P}return null}(ve)||P.replace(":","")})},F.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},F.diff=function(M,B,U){var H,P=this,z=N.p(B),W=k(M),j=(W.utcOffset()-this.utcOffset())*r,q=this-W,G=function(){return N.m(P,W)};switch(z){case h:H=G()/12;break;case f:H=G();break;case d:H=G()/3;break;case c:H=(q-j)/6048e5;break;case l:H=(q-j)/864e5;break;case u:H=q/i;break;case a:H=q/r;break;case o:H=q/n;break;default:H=q}return U?H:N.a(H)},F.daysInMonth=function(){return this.endOf(f).$D},F.$locale=function(){return S[this.$L]},F.locale=function(M,B){if(!M)return this.$L;var U=this.clone(),H=A(M,B,!0);return H&&(U.$L=H),U},F.clone=function(){return N.w(this.$d,this)},F.toDate=function(){return new Date(this.valueOf())},F.toJSON=function(){return this.isValid()?this.toISOString():null},F.toISOString=function(){return this.$d.toISOString()},F.toString=function(){return this.$d.toUTCString()},$}(),D=O.prototype;return k.prototype=D,[["$ms",s],["$s",o],["$m",a],["$H",u],["$W",l],["$M",f],["$y",h],["$D",p]].forEach(function($){D[$[1]]=function(F){return this.$g(F,$[0],$[1])}}),k.extend=function($,F){return $.$i||($(F,O,k),$.$i=!0),k},k.locale=A,k.isDayjs=C,k.unix=function($){return k(1e3*$)},k.en=S[E],k.Ls=S,k.p={},k})})($je);var uan=$je.exports;const Tt=Xl(uan);function lan({type:e,date:t,locale:n,format:r,labelSeparator:i}){const s=o=>Tt(o).locale(n).format(r);return e==="default"?t===null?"":s(t):e==="multiple"?t.map(s).join(", "):e==="range"&&Array.isArray(t)?t[0]&&t[1]?`${s(t[0])} ${i} ${s(t[1])}`:t[0]?`${s(t[0])} ${i} `:"":""}function can({formatter:e,...t}){return(e||lan)(t)}function fan({direction:e,levelIndex:t,rowIndex:n,cellIndex:r,size:i}){switch(e){case"up":return t===0&&n===0?null:n===0?{levelIndex:t-1,rowIndex:r<=i[t-1][i[t-1].length-1]-1?i[t-1].length-1:i[t-1].length-2,cellIndex:r}:{levelIndex:t,rowIndex:n-1,cellIndex:r};case"down":return n===i[t].length-1?{levelIndex:t+1,rowIndex:0,cellIndex:r}:n===i[t].length-2&&r>=i[t][i[t].length-1]?{levelIndex:t+1,rowIndex:0,cellIndex:r}:{levelIndex:t,rowIndex:n+1,cellIndex:r};case"left":return t===0&&n===0&&r===0?null:n===0&&r===0?{levelIndex:t-1,rowIndex:i[t-1].length-1,cellIndex:i[t-1][i[t-1].length-1]-1}:r===0?{levelIndex:t,rowIndex:n-1,cellIndex:i[t][n-1]-1}:{levelIndex:t,rowIndex:n,cellIndex:r-1};case"right":return n===i[t].length-1&&r===i[t][n]-1?{levelIndex:t+1,rowIndex:0,cellIndex:0}:r===i[t][n]-1?{levelIndex:t,rowIndex:n+1,cellIndex:0}:{levelIndex:t,rowIndex:n,cellIndex:r+1};default:return{levelIndex:t,rowIndex:n,cellIndex:r}}}function Mje({controlsRef:e,direction:t,levelIndex:n,rowIndex:r,cellIndex:i,size:s}){var u,l,c;const o=fan({direction:t,size:s,rowIndex:r,cellIndex:i,levelIndex:n});if(!o)return;const a=(c=(l=(u=e.current)==null?void 0:u[o.levelIndex])==null?void 0:l[o.rowIndex])==null?void 0:c[o.cellIndex];a&&(a.disabled||a.getAttribute("data-hidden")||a.getAttribute("data-outside")?Mje({controlsRef:e,direction:t,levelIndex:o.levelIndex,cellIndex:o.cellIndex,rowIndex:o.rowIndex,size:s}):a.focus())}function dan(e){switch(e){case"ArrowDown":return"down";case"ArrowUp":return"up";case"ArrowRight":return"right";case"ArrowLeft":return"left";default:return null}}function han(e){var t;return(t=e.current)==null?void 0:t.map(n=>n.map(r=>r.length))}function Aie({controlsRef:e,levelIndex:t,rowIndex:n,cellIndex:r,event:i}){const s=dan(i.key);if(s){i.preventDefault();const o=han(e);Mje({controlsRef:e,direction:s,levelIndex:t,rowIndex:n,cellIndex:r,size:o})}}var Lje={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(to,function(){var n={year:0,month:1,day:2,hour:3,minute:4,second:5},r={};return function(i,s,o){var a,u=function(d,h,p){p===void 0&&(p={});var m=new Date(d),g=function(y,v){v===void 0&&(v={});var _=v.timeZoneName||"short",w=y+"|"+_,E=r[w];return E||(E=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:y,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",timeZoneName:_}),r[w]=E),E}(h,p);return g.formatToParts(m)},l=function(d,h){for(var p=u(d,h),m=[],g=0;g<p.length;g+=1){var y=p[g],v=y.type,_=y.value,w=n[v];w>=0&&(m[w]=parseInt(_,10))}var E=m[3],S=E===24?0:E,T=m[0]+"-"+m[1]+"-"+m[2]+" "+S+":"+m[4]+":"+m[5]+":000",C=+d;return(o.utc(T).valueOf()-(C-=C%1e3))/6e4},c=s.prototype;c.tz=function(d,h){d===void 0&&(d=a);var p=this.utcOffset(),m=this.toDate(),g=m.toLocaleString("en-US",{timeZone:d}),y=Math.round((m-new Date(g))/1e3/60),v=o(g,{locale:this.$L}).$set("millisecond",this.$ms).utcOffset(15*-Math.round(m.getTimezoneOffset()/15)-y,!0);if(h){var _=v.utcOffset();v=v.add(p-_,"minute")}return v.$x.$timezone=d,v},c.offsetName=function(d){var h=this.$x.$timezone||o.tz.guess(),p=u(this.valueOf(),h,{timeZoneName:d}).find(function(m){return m.type.toLowerCase()==="timezonename"});return p&&p.value};var f=c.startOf;c.startOf=function(d,h){if(!this.$x||!this.$x.$timezone)return f.call(this,d,h);var p=o(this.format("YYYY-MM-DD HH:mm:ss:SSS"),{locale:this.$L});return f.call(p,d,h).tz(this.$x.$timezone,!0)},o.tz=function(d,h,p){var m=p&&h,g=p||h||a,y=l(+o(),g);if(typeof d!="string")return o(d).tz(g);var v=function(S,T,C){var A=S-60*T*1e3,k=l(A,C);if(T===k)return[A,T];var N=l(A-=60*(k-T)*1e3,C);return k===N?[A,k]:[S-60*Math.min(k,N)*1e3,Math.max(k,N)]}(o.utc(d,m).valueOf(),y,g),_=v[0],w=v[1],E=o(_).utcOffset(w);return E.$x.$timezone=g,E},o.tz.guess=function(){return Intl.DateTimeFormat().resolvedOptions().timeZone},o.tz.setDefault=function(d){a=d}}})})(Lje);var pan=Lje.exports;const man=Xl(pan);var Fje={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(to,function(){var n="minute",r=/[+-]\d\d(?::?\d\d)?/g,i=/([+-]|\d\d)/g;return function(s,o,a){var u=o.prototype;a.utc=function(m){var g={date:m,utc:!0,args:arguments};return new o(g)},u.utc=function(m){var g=a(this.toDate(),{locale:this.$L,utc:!0});return m?g.add(this.utcOffset(),n):g},u.local=function(){return a(this.toDate(),{locale:this.$L,utc:!1})};var l=u.parse;u.parse=function(m){m.utc&&(this.$u=!0),this.$utils().u(m.$offset)||(this.$offset=m.$offset),l.call(this,m)};var c=u.init;u.init=function(){if(this.$u){var m=this.$d;this.$y=m.getUTCFullYear(),this.$M=m.getUTCMonth(),this.$D=m.getUTCDate(),this.$W=m.getUTCDay(),this.$H=m.getUTCHours(),this.$m=m.getUTCMinutes(),this.$s=m.getUTCSeconds(),this.$ms=m.getUTCMilliseconds()}else c.call(this)};var f=u.utcOffset;u.utcOffset=function(m,g){var y=this.$utils().u;if(y(m))return this.$u?0:y(this.$offset)?f.call(this):this.$offset;if(typeof m=="string"&&(m=function(E){E===void 0&&(E="");var S=E.match(r);if(!S)return null;var T=(""+S[0]).match(i)||["-",0,0],C=T[0],A=60*+T[1]+ +T[2];return A===0?0:C==="+"?A:-A}(m),m===null))return this;var v=Math.abs(m)<=16?60*m:m,_=this;if(g)return _.$offset=v,_.$u=m===0,_;if(m!==0){var w=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(_=this.local().add(v+w,n)).$offset=v,_.$x.$localOffset=w}else _=this.utc();return _};var d=u.format;u.format=function(m){var g=m||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return d.call(this,g)},u.valueOf=function(){var m=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*m},u.isUTC=function(){return!!this.$u},u.toISOString=function(){return this.toDate().toISOString()},u.toString=function(){return this.toDate().toUTCString()};var h=u.toDate;u.toDate=function(m){return m==="s"&&this.$offset?a(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():h.call(this)};var p=u.diff;u.diff=function(m,g,y){if(m&&this.$u===m.$u)return p.call(this,m,g,y);var v=this.local(),_=a(m).local();return p.call(v,_,g,y)}}})})(Fje);var gan=Fje.exports;const yan=Xl(gan);Tt.extend(yan);Tt.extend(man);function van(e,t){return t?Tt(e).tz(t).utcOffset()+e.getTimezoneOffset():0}const yye=(e,t,n)=>{if(!e)return null;if(!t)return e;let r=van(e,t);return n==="remove"&&(r*=-1),Tt(e).add(r,"minutes").toDate()};function L0(e,t,n,r){return r||!t?t:Array.isArray(t)?t.map(i=>yye(i,n,e)):yye(t,n,e)}function ban({minDate:e,maxDate:t,timezone:n}){const r=L0("add",new Date,n);return!e&&!t?r:e&&Tt(r).isBefore(e)?e:t&&Tt(r).isAfter(t)?t:r}const _an={locale:"en",timezone:null,firstDayOfWeek:1,weekendDays:[0,6],labelSeparator:"–",consistentWeeks:!1},wan=I.createContext(_an);function tc(){const e=I.useContext(wan),t=I.useCallback(o=>o||e.locale,[e.locale]),n=I.useCallback(o=>o||e.timezone||void 0,[e.timezone]),r=I.useCallback(o=>typeof o=="number"?o:e.firstDayOfWeek,[e.firstDayOfWeek]),i=I.useCallback(o=>Array.isArray(o)?o:e.weekendDays,[e.weekendDays]),s=I.useCallback(o=>typeof o=="string"?o:e.labelSeparator,[e.labelSeparator]);return{...e,getLocale:t,getTimezone:n,getFirstDayOfWeek:r,getWeekendDays:i,getLabelSeparator:s}}function Ean(e,t){if(t==="range"&&Array.isArray(e)){const[n,r]=e;return n?r?`${n.toISOString()} – ${r.toISOString()}`:`${n.toISOString()} –`:""}return t==="multiple"&&Array.isArray(e)?e.map(n=>n==null?void 0:n.toISOString()).filter(Boolean).join(", "):!Array.isArray(e)&&e?e.toISOString():""}function jje({value:e,type:t,name:n,form:r}){return b.jsx("input",{type:"hidden",value:Ean(e,t),name:n,form:r})}jje.displayName="@mantine/dates/HiddenDatesInput";var Bje={day:"m_396ce5cb"};const xan={},San=(e,{size:t})=>({day:{"--day-size":tn(t,"day-size")}}),Iie=Me((e,t)=>{const n=xe("Day",xan,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,date:l,disabled:c,__staticSelector:f,weekend:d,outside:h,selected:p,renderDay:m,inRange:g,firstInRange:y,lastInRange:v,hidden:_,static:w,...E}=n,S=dt({name:f||"Day",classes:Bje,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:San,rootSelector:"day"}),T=tc();return b.jsx(xs,{...S("day",{style:_?{display:"none"}:void 0}),component:w?"div":"button",ref:t,disabled:c,"data-today":Tt(l).isSame(L0("add",new Date,T.getTimezone()),"day")||void 0,"data-hidden":_||void 0,"data-disabled":c||void 0,"data-weekend":!c&&!h&&d||void 0,"data-outside":!c&&h||void 0,"data-selected":!c&&p||void 0,"data-in-range":g&&!c||void 0,"data-first-in-range":y&&!c||void 0,"data-last-in-range":v&&!c||void 0,"data-static":w||void 0,unstyled:a,...E,children:(m==null?void 0:m(l))||l.getDate()})});Iie.classes=Bje;Iie.displayName="@mantine/dates/Day";function Tan({locale:e,format:t="dd",firstDayOfWeek:n=1}){const r=Tt().day(n),i=[];for(let s=0;s<7;s+=1)typeof t=="string"?i.push(Tt(r).add(s,"days").locale(e).format(t)):i.push(t(Tt(r).add(s,"days").toDate()));return i}var Uje={weekday:"m_18a3eca"};const Can={},Aan=(e,{size:t})=>({weekdaysRow:{"--wr-fz":uo(t),"--wr-spacing":as(t)}}),kie=Me((e,t)=>{const n=xe("WeekdaysRow",Can,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,locale:l,firstDayOfWeek:c,weekdayFormat:f,cellComponent:d="th",__staticSelector:h,...p}=n,m=dt({name:h||"WeekdaysRow",classes:Uje,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:Aan,rootSelector:"weekdaysRow"}),g=tc(),y=Tan({locale:g.getLocale(l),format:f,firstDayOfWeek:g.getFirstDayOfWeek(c)}).map((v,_)=>b.jsx(d,{...m("weekday"),children:v},_));return b.jsx(pe,{component:"tr",ref:t,...m("weekdaysRow"),...p,children:y})});kie.classes=Uje;kie.displayName="@mantine/dates/WeekdaysRow";function Ian(e,t=1){const n=new Date(e),r=t===0?6:t-1;for(;n.getDay()!==r;)n.setDate(n.getDate()+1);return n}function kan(e,t=1){const n=new Date(e);for(;n.getDay()!==t;)n.setDate(n.getDate()-1);return n}function Ran({month:e,firstDayOfWeek:t=1,consistentWeeks:n}){const r=e.getMonth(),i=new Date(e.getFullYear(),r,1),s=new Date(e.getFullYear(),e.getMonth()+1,0),o=Ian(s,t),a=kan(i,t),u=[];for(;a<=o;){const l=[];for(let c=0;c<7;c+=1)l.push(new Date(a)),a.setDate(a.getDate()+1);u.push(l)}if(n&&u.length<6){const l=u[u.length-1],c=l[l.length-1],f=new Date(c);for(f.setDate(f.getDate()+1);u.length<6;){const d=[];for(let h=0;h<7;h+=1)d.push(new Date(f)),f.setDate(f.getDate()+1);u.push(d)}}return u}function zje(e,t){return e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()}function Vje(e,t){return t instanceof Date?Tt(e).isAfter(Tt(t).subtract(1,"day"),"day"):!0}function Hje(e,t){return t instanceof Date?Tt(e).isBefore(Tt(t).add(1,"day"),"day"):!0}function Nan(e,t,n,r,i,s,o){const a=e.flat().filter(c=>{var f;return Hje(c,n)&&Vje(c,t)&&!(i!=null&&i(c))&&!((f=r==null?void 0:r(c))!=null&&f.disabled)&&(!s||zje(c,o))}),u=a.find(c=>{var f;return(f=r==null?void 0:r(c))==null?void 0:f.selected});if(u)return u;const l=a.find(c=>Tt().isSame(c,"date"));return l||a[0]}var qje={month:"m_cc9820d3",monthCell:"m_8f457cd5"};const Pan={withCellSpacing:!0},M5=Me((e,t)=>{const n=xe("Month",Pan,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,__staticSelector:l,locale:c,firstDayOfWeek:f,weekdayFormat:d,month:h,weekendDays:p,getDayProps:m,excludeDate:g,minDate:y,maxDate:v,renderDay:_,hideOutsideDates:w,hideWeekdays:E,getDayAriaLabel:S,static:T,__getDayRef:C,__onDayKeyDown:A,__onDayClick:k,__onDayMouseEnter:N,__preventFocus:O,__stopPropagation:D,withCellSpacing:$,size:F,...M}=n,B=dt({name:l||"Month",classes:qje,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,rootSelector:"month"}),U=tc(),H=Ran({month:h,firstDayOfWeek:U.getFirstDayOfWeek(f),consistentWeeks:U.consistentWeeks}),P=Nan(H,y,v,m,g,w,h),{resolvedClassNames:z,resolvedStyles:W}=Hm({classNames:r,styles:o,props:n}),j=H.map((q,G)=>{const ne=q.map((ce,de)=>{const he=!zje(ce,h),ve=(S==null?void 0:S(ce))||Tt(ce).locale(c||U.locale).format("D MMMM YYYY"),Ie=m==null?void 0:m(ce),be=Tt(ce).isSame(P,"date");return b.jsx("td",{...B("monthCell"),"data-with-spacing":$||void 0,children:b.jsx(Iie,{__staticSelector:l||"Month",classNames:z,styles:W,unstyled:a,"data-mantine-stop-propagation":D||void 0,renderDay:_,date:ce,size:F,weekend:U.getWeekendDays(p).includes(ce.getDay()),outside:he,hidden:w?he:!1,"aria-label":ve,static:T,disabled:(g==null?void 0:g(ce))||!Hje(ce,v)||!Vje(ce,y),ref:Ke=>C==null?void 0:C(G,de,Ke),...Ie,onKeyDown:Ke=>{var Ue;(Ue=Ie==null?void 0:Ie.onKeyDown)==null||Ue.call(Ie,Ke),A==null||A(Ke,{rowIndex:G,cellIndex:de,date:ce})},onMouseEnter:Ke=>{var Ue;(Ue=Ie==null?void 0:Ie.onMouseEnter)==null||Ue.call(Ie,Ke),N==null||N(Ke,ce)},onClick:Ke=>{var Ue;(Ue=Ie==null?void 0:Ie.onClick)==null||Ue.call(Ie,Ke),k==null||k(Ke,ce)},onMouseDown:Ke=>{var Ue;(Ue=Ie==null?void 0:Ie.onMouseDown)==null||Ue.call(Ie,Ke),O&&Ke.preventDefault()},tabIndex:O||!be?-1:0})},ce.toString())});return b.jsx("tr",{...B("monthRow"),children:ne},G)});return b.jsxs(pe,{component:"table",...B("month"),size:F,ref:t,...M,children:[!E&&b.jsx("thead",{...B("monthThead"),children:b.jsx(kie,{__staticSelector:l||"Month",locale:c,firstDayOfWeek:f,weekdayFormat:d,size:F,classNames:z,styles:W,unstyled:a})}),b.jsx("tbody",{...B("monthTbody"),children:j})]})});M5.classes=qje;M5.displayName="@mantine/dates/Month";var Wje={pickerControl:"m_dc6a3c71"};const Dan={},Oan=(e,{size:t})=>({pickerControl:{"--dpc-fz":uo(t),"--dpc-size":tn(t,"dpc-size")}}),L5=Me((e,t)=>{const n=xe("PickerControl",Dan,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,firstInRange:l,lastInRange:c,inRange:f,__staticSelector:d,selected:h,disabled:p,...m}=n,g=dt({name:d||"PickerControl",classes:Wje,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:Oan,rootSelector:"pickerControl"});return b.jsx(xs,{...g("pickerControl"),ref:t,unstyled:a,"data-picker-control":!0,"data-selected":h&&!p||void 0,"data-disabled":p||void 0,"data-in-range":f&&!p&&!h||void 0,"data-first-in-range":l&&!p||void 0,"data-last-in-range":c&&!p||void 0,disabled:p,...m})});L5.classes=Wje;L5.displayName="@mantine/dates/PickerControl";function Gje(e,t,n){return!t&&!n?!1:!!(t&&Tt(e).isBefore(t,"year")||n&&Tt(e).isAfter(n,"year"))}function $an(e,t,n,r){const i=e.flat().filter(a=>{var u;return!Gje(a,t,n)&&!((u=r==null?void 0:r(a))!=null&&u.disabled)}),s=i.find(a=>{var u;return(u=r==null?void 0:r(a))==null?void 0:u.selected});if(s)return s;const o=i.find(a=>Tt().isSame(a,"year"));return o||i[0]}function Yje(e){const t=e.getFullYear(),n=t-t%10;let r=0;const i=[[],[],[],[]];for(let s=0;s<4;s+=1){const o=s===3?1:3;for(let a=0;a<o;a+=1)i[s].push(new Date(n+r,0)),r+=1}return i}var Kje={yearsList:"m_9206547b",yearsListCell:"m_c5a19c7d"};const Man={yearsListFormat:"YYYY",withCellSpacing:!0},F5=Me((e,t)=>{const n=xe("YearsList",Man,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,decade:l,yearsListFormat:c,locale:f,minDate:d,maxDate:h,getYearControlProps:p,__staticSelector:m,__getControlRef:g,__onControlKeyDown:y,__onControlClick:v,__onControlMouseEnter:_,__preventFocus:w,__stopPropagation:E,withCellSpacing:S,size:T,...C}=n,A=dt({name:m||"YearsList",classes:Kje,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,rootSelector:"yearsList"}),k=tc(),N=Yje(l),O=$an(N,d,h,p),D=N.map(($,F)=>{const M=$.map((B,U)=>{const H=p==null?void 0:p(B),P=Tt(B).isSame(O,"year");return b.jsx("td",{...A("yearsListCell"),"data-with-spacing":S||void 0,children:b.jsx(L5,{...A("yearsListControl"),size:T,unstyled:a,"data-mantine-stop-propagation":E||void 0,disabled:Gje(B,d,h),ref:z=>g==null?void 0:g(F,U,z),...H,onKeyDown:z=>{var W;(W=H==null?void 0:H.onKeyDown)==null||W.call(H,z),y==null||y(z,{rowIndex:F,cellIndex:U,date:B})},onClick:z=>{var W;(W=H==null?void 0:H.onClick)==null||W.call(H,z),v==null||v(z,B)},onMouseEnter:z=>{var W;(W=H==null?void 0:H.onMouseEnter)==null||W.call(H,z),_==null||_(z,B)},onMouseDown:z=>{var W;(W=H==null?void 0:H.onMouseDown)==null||W.call(H,z),w&&z.preventDefault()},tabIndex:w||!P?-1:0,children:Tt(B).locale(k.getLocale(f)).format(c)})},U)});return b.jsx("tr",{...A("yearsListRow"),children:M},F)});return b.jsx(pe,{component:"table",ref:t,size:T,...A("yearsList"),...C,children:b.jsx("tbody",{children:D})})});F5.classes=Kje;F5.displayName="@mantine/dates/YearsList";function Xje(e,t,n){return!t&&!n?!1:!!(t&&Tt(e).isBefore(t,"month")||n&&Tt(e).isAfter(n,"month"))}function Lan(e,t,n,r){const i=e.flat().filter(a=>{var u;return!Xje(a,t,n)&&!((u=r==null?void 0:r(a))!=null&&u.disabled)}),s=i.find(a=>{var u;return(u=r==null?void 0:r(a))==null?void 0:u.selected});if(s)return s;const o=i.find(a=>Tt().isSame(a,"month"));return o||i[0]}function Fan(e){const t=Tt(e).startOf("year").toDate(),n=[[],[],[],[]];let r=0;for(let i=0;i<4;i+=1)for(let s=0;s<3;s+=1)n[i].push(Tt(t).add(r,"months").toDate()),r+=1;return n}var Qje={monthsList:"m_2a6c32d",monthsListCell:"m_fe27622f"};const jan={monthsListFormat:"MMM",withCellSpacing:!0},j5=Me((e,t)=>{const n=xe("MonthsList",jan,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,__staticSelector:l,year:c,monthsListFormat:f,locale:d,minDate:h,maxDate:p,getMonthControlProps:m,__getControlRef:g,__onControlKeyDown:y,__onControlClick:v,__onControlMouseEnter:_,__preventFocus:w,__stopPropagation:E,withCellSpacing:S,size:T,...C}=n,A=dt({name:l||"MonthsList",classes:Qje,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,rootSelector:"monthsList"}),k=tc(),N=Fan(c),O=Lan(N,h,p,m),D=N.map(($,F)=>{const M=$.map((B,U)=>{const H=m==null?void 0:m(B),P=Tt(B).isSame(O,"month");return b.jsx("td",{...A("monthsListCell"),"data-with-spacing":S||void 0,children:b.jsx(L5,{...A("monthsListControl"),size:T,unstyled:a,__staticSelector:l||"MonthsList","data-mantine-stop-propagation":E||void 0,disabled:Xje(B,h,p),ref:z=>g==null?void 0:g(F,U,z),...H,onKeyDown:z=>{var W;(W=H==null?void 0:H.onKeyDown)==null||W.call(H,z),y==null||y(z,{rowIndex:F,cellIndex:U,date:B})},onClick:z=>{var W;(W=H==null?void 0:H.onClick)==null||W.call(H,z),v==null||v(z,B)},onMouseEnter:z=>{var W;(W=H==null?void 0:H.onMouseEnter)==null||W.call(H,z),_==null||_(z,B)},onMouseDown:z=>{var W;(W=H==null?void 0:H.onMouseDown)==null||W.call(H,z),w&&z.preventDefault()},tabIndex:w||!P?-1:0,children:Tt(B).locale(k.getLocale(d)).format(f)})},U)});return b.jsx("tr",{...A("monthsListRow"),children:M},F)});return b.jsx(pe,{component:"table",ref:t,size:T,...A("monthsList"),...C,children:b.jsx("tbody",{children:D})})});j5.classes=Qje;j5.displayName="@mantine/dates/MonthsList";var Jje={calendarHeader:"m_730a79ed",calendarHeaderLevel:"m_f6645d97",calendarHeaderControl:"m_2351eeb0",calendarHeaderControlIcon:"m_367dc749"};const Ban={nextDisabled:!1,previousDisabled:!1,hasNextLevel:!0,withNext:!0,withPrevious:!0},Uan=(e,{size:t})=>({calendarHeader:{"--dch-control-size":tn(t,"dch-control-size"),"--dch-fz":uo(t)}}),iv=Me((e,t)=>{const n=xe("CalendarHeader",Ban,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,nextIcon:l,previousIcon:c,nextLabel:f,previousLabel:d,onNext:h,onPrevious:p,onLevelClick:m,label:g,nextDisabled:y,previousDisabled:v,hasNextLevel:_,levelControlAriaLabel:w,withNext:E,withPrevious:S,__staticSelector:T,__preventFocus:C,__stopPropagation:A,...k}=n,N=dt({name:T||"CalendarHeader",classes:Jje,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:Uan,rootSelector:"calendarHeader"}),O=C?D=>D.preventDefault():void 0;return b.jsxs(pe,{...N("calendarHeader"),ref:t,...k,children:[S&&b.jsx(xs,{...N("calendarHeaderControl"),"data-direction":"previous","aria-label":d,onClick:p,unstyled:a,onMouseDown:O,disabled:v,"data-disabled":v||void 0,tabIndex:C||v?-1:0,"data-mantine-stop-propagation":A||void 0,children:c||b.jsx(ME,{...N("calendarHeaderControlIcon"),"data-direction":"previous",size:"45%"})}),b.jsx(xs,{component:_?"button":"div",...N("calendarHeaderLevel"),onClick:_?m:void 0,unstyled:a,onMouseDown:_?O:void 0,disabled:!_,"data-static":!_||void 0,"aria-label":w,tabIndex:C||!_?-1:0,"data-mantine-stop-propagation":A||void 0,children:g}),E&&b.jsx(xs,{...N("calendarHeaderControl"),"data-direction":"next","aria-label":f,onClick:h,unstyled:a,onMouseDown:O,disabled:y,"data-disabled":y||void 0,tabIndex:C||y?-1:0,"data-mantine-stop-propagation":A||void 0,children:l||b.jsx(ME,{...N("calendarHeaderControlIcon"),"data-direction":"next",size:"45%"})})]})});iv.classes=Jje;iv.displayName="@mantine/dates/CalendarHeader";function zan(e){const t=Yje(e);return[t[0][0],t[3][0]]}const Van={decadeLabelFormat:"YYYY"},B5=Me((e,t)=>{const n=xe("DecadeLevel",Van,e),{decade:r,locale:i,minDate:s,maxDate:o,yearsListFormat:a,getYearControlProps:u,__getControlRef:l,__onControlKeyDown:c,__onControlClick:f,__onControlMouseEnter:d,withCellSpacing:h,__preventFocus:p,nextIcon:m,previousIcon:g,nextLabel:y,previousLabel:v,onNext:_,onPrevious:w,nextDisabled:E,previousDisabled:S,levelControlAriaLabel:T,withNext:C,withPrevious:A,decadeLabelFormat:k,classNames:N,styles:O,unstyled:D,__staticSelector:$,__stopPropagation:F,size:M,...B}=n,U=tc(),[H,P]=zan(r),z={__staticSelector:$||"DecadeLevel",classNames:N,styles:O,unstyled:D,size:M},W=typeof E=="boolean"?E:o?!Tt(P).endOf("year").isBefore(o):!1,j=typeof S=="boolean"?S:s?!Tt(H).startOf("year").isAfter(s):!1,q=(G,ne)=>Tt(G).locale(i||U.locale).format(ne);return b.jsxs(pe,{"data-decade-level":!0,size:M,ref:t,...B,children:[b.jsx(iv,{label:typeof k=="function"?k(H,P):`${q(H,k)} – ${q(P,k)}`,__preventFocus:p,__stopPropagation:F,nextIcon:m,previousIcon:g,nextLabel:y,previousLabel:v,onNext:_,onPrevious:w,nextDisabled:W,previousDisabled:j,hasNextLevel:!1,levelControlAriaLabel:T,withNext:C,withPrevious:A,...z}),b.jsx(F5,{decade:r,locale:i,minDate:s,maxDate:o,yearsListFormat:a,getYearControlProps:u,__getControlRef:l,__onControlKeyDown:c,__onControlClick:f,__onControlMouseEnter:d,__preventFocus:p,__stopPropagation:F,withCellSpacing:h,...z})]})});B5.classes={...F5.classes,...iv.classes};B5.displayName="@mantine/dates/DecadeLevel";const Han={yearLabelFormat:"YYYY"},U5=Me((e,t)=>{const n=xe("YearLevel",Han,e),{year:r,locale:i,minDate:s,maxDate:o,monthsListFormat:a,getMonthControlProps:u,__getControlRef:l,__onControlKeyDown:c,__onControlClick:f,__onControlMouseEnter:d,withCellSpacing:h,__preventFocus:p,nextIcon:m,previousIcon:g,nextLabel:y,previousLabel:v,onNext:_,onPrevious:w,onLevelClick:E,nextDisabled:S,previousDisabled:T,hasNextLevel:C,levelControlAriaLabel:A,withNext:k,withPrevious:N,yearLabelFormat:O,__staticSelector:D,__stopPropagation:$,size:F,classNames:M,styles:B,unstyled:U,...H}=n,P=tc(),z={__staticSelector:D||"YearLevel",classNames:M,styles:B,unstyled:U,size:F},W=typeof S=="boolean"?S:o?!Tt(r).endOf("year").isBefore(o):!1,j=typeof T=="boolean"?T:s?!Tt(r).startOf("year").isAfter(s):!1;return b.jsxs(pe,{"data-year-level":!0,size:F,ref:t,...H,children:[b.jsx(iv,{label:typeof O=="function"?O(r):Tt(r).locale(i||P.locale).format(O),__preventFocus:p,__stopPropagation:$,nextIcon:m,previousIcon:g,nextLabel:y,previousLabel:v,onNext:_,onPrevious:w,onLevelClick:E,nextDisabled:W,previousDisabled:j,hasNextLevel:C,levelControlAriaLabel:A,withNext:k,withPrevious:N,...z}),b.jsx(j5,{year:r,locale:i,minDate:s,maxDate:o,monthsListFormat:a,getMonthControlProps:u,__getControlRef:l,__onControlKeyDown:c,__onControlClick:f,__onControlMouseEnter:d,__preventFocus:p,__stopPropagation:$,withCellSpacing:h,...z})]})});U5.classes={...iv.classes,...j5.classes};U5.displayName="@mantine/dates/YearLevel";const qan={monthLabelFormat:"MMMM YYYY"},z5=Me((e,t)=>{const n=xe("MonthLevel",qan,e),{month:r,locale:i,firstDayOfWeek:s,weekdayFormat:o,weekendDays:a,getDayProps:u,excludeDate:l,minDate:c,maxDate:f,renderDay:d,hideOutsideDates:h,hideWeekdays:p,getDayAriaLabel:m,__getDayRef:g,__onDayKeyDown:y,__onDayClick:v,__onDayMouseEnter:_,withCellSpacing:w,__preventFocus:E,__stopPropagation:S,nextIcon:T,previousIcon:C,nextLabel:A,previousLabel:k,onNext:N,onPrevious:O,onLevelClick:D,nextDisabled:$,previousDisabled:F,hasNextLevel:M,levelControlAriaLabel:B,withNext:U,withPrevious:H,monthLabelFormat:P,classNames:z,styles:W,unstyled:j,__staticSelector:q,size:G,static:ne,...ce}=n,de=tc(),he={__staticSelector:q||"MonthLevel",classNames:z,styles:W,unstyled:j,size:G},ve=typeof $=="boolean"?$:f?!Tt(r).endOf("month").isBefore(f):!1,Ie=typeof F=="boolean"?F:c?!Tt(r).startOf("month").isAfter(c):!1;return b.jsxs(pe,{"data-month-level":!0,size:G,ref:t,...ce,children:[b.jsx(iv,{label:typeof P=="function"?P(r):Tt(r).locale(i||de.locale).format(P),__preventFocus:E,__stopPropagation:S,nextIcon:T,previousIcon:C,nextLabel:A,previousLabel:k,onNext:N,onPrevious:O,onLevelClick:D,nextDisabled:ve,previousDisabled:Ie,hasNextLevel:M,levelControlAriaLabel:B,withNext:U,withPrevious:H,...he}),b.jsx(M5,{month:r,locale:i,firstDayOfWeek:s,weekdayFormat:o,weekendDays:a,getDayProps:u,excludeDate:l,minDate:c,maxDate:f,renderDay:d,hideOutsideDates:h,hideWeekdays:p,getDayAriaLabel:m,__getDayRef:g,__onDayKeyDown:y,__onDayClick:v,__onDayMouseEnter:_,__preventFocus:E,__stopPropagation:S,static:ne,withCellSpacing:w,...he})]})});z5.classes={...M5.classes,...iv.classes};z5.displayName="@mantine/dates/MonthLevel";var Zje={levelsGroup:"m_30b26e33"};const Wan={},sv=Me((e,t)=>{const n=xe("LevelsGroup",Wan,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,__staticSelector:l,...c}=n,f=dt({name:l||"LevelsGroup",classes:Zje,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,rootSelector:"levelsGroup"});return b.jsx(pe,{ref:t,...f("levelsGroup"),...c})});sv.classes=Zje;sv.displayName="@mantine/dates/LevelsGroup";const Gan={numberOfColumns:1},V5=Me((e,t)=>{const n=xe("DecadeLevelGroup",Gan,e),{decade:r,locale:i,minDate:s,maxDate:o,yearsListFormat:a,getYearControlProps:u,__onControlClick:l,__onControlMouseEnter:c,withCellSpacing:f,__preventFocus:d,nextIcon:h,previousIcon:p,nextLabel:m,previousLabel:g,onNext:y,onPrevious:v,nextDisabled:_,previousDisabled:w,classNames:E,styles:S,unstyled:T,__staticSelector:C,__stopPropagation:A,numberOfColumns:k,levelControlAriaLabel:N,decadeLabelFormat:O,size:D,vars:$,...F}=n,M=I.useRef([]),B=Array(k).fill(0).map((U,H)=>{const P=Tt(r).add(H*10,"years").toDate();return b.jsx(B5,{size:D,yearsListFormat:a,decade:P,withNext:H===k-1,withPrevious:H===0,decadeLabelFormat:O,__onControlClick:l,__onControlMouseEnter:c,__onControlKeyDown:(z,W)=>Aie({levelIndex:H,rowIndex:W.rowIndex,cellIndex:W.cellIndex,event:z,controlsRef:M}),__getControlRef:(z,W,j)=>{Array.isArray(M.current[H])||(M.current[H]=[]),Array.isArray(M.current[H][z])||(M.current[H][z]=[]),M.current[H][z][W]=j},levelControlAriaLabel:typeof N=="function"?N(P):N,locale:i,minDate:s,maxDate:o,__preventFocus:d,__stopPropagation:A,nextIcon:h,previousIcon:p,nextLabel:m,previousLabel:g,onNext:y,onPrevious:v,nextDisabled:_,previousDisabled:w,getYearControlProps:u,__staticSelector:C||"DecadeLevelGroup",classNames:E,styles:S,unstyled:T,withCellSpacing:f},H)});return b.jsx(sv,{classNames:E,styles:S,__staticSelector:C||"DecadeLevelGroup",ref:t,size:D,unstyled:T,...F,children:B})});V5.classes={...sv.classes,...B5.classes};V5.displayName="@mantine/dates/DecadeLevelGroup";const Yan={numberOfColumns:1},H5=Me((e,t)=>{const n=xe("YearLevelGroup",Yan,e),{year:r,locale:i,minDate:s,maxDate:o,monthsListFormat:a,getMonthControlProps:u,__onControlClick:l,__onControlMouseEnter:c,withCellSpacing:f,__preventFocus:d,nextIcon:h,previousIcon:p,nextLabel:m,previousLabel:g,onNext:y,onPrevious:v,onLevelClick:_,nextDisabled:w,previousDisabled:E,hasNextLevel:S,classNames:T,styles:C,unstyled:A,__staticSelector:k,__stopPropagation:N,numberOfColumns:O,levelControlAriaLabel:D,yearLabelFormat:$,size:F,vars:M,...B}=n,U=I.useRef([]),H=Array(O).fill(0).map((P,z)=>{const W=Tt(r).add(z,"years").toDate();return b.jsx(U5,{size:F,monthsListFormat:a,year:W,withNext:z===O-1,withPrevious:z===0,yearLabelFormat:$,__stopPropagation:N,__onControlClick:l,__onControlMouseEnter:c,__onControlKeyDown:(j,q)=>Aie({levelIndex:z,rowIndex:q.rowIndex,cellIndex:q.cellIndex,event:j,controlsRef:U}),__getControlRef:(j,q,G)=>{Array.isArray(U.current[z])||(U.current[z]=[]),Array.isArray(U.current[z][j])||(U.current[z][j]=[]),U.current[z][j][q]=G},levelControlAriaLabel:typeof D=="function"?D(W):D,locale:i,minDate:s,maxDate:o,__preventFocus:d,nextIcon:h,previousIcon:p,nextLabel:m,previousLabel:g,onNext:y,onPrevious:v,onLevelClick:_,nextDisabled:w,previousDisabled:E,hasNextLevel:S,getMonthControlProps:u,classNames:T,styles:C,unstyled:A,__staticSelector:k||"YearLevelGroup",withCellSpacing:f},z)});return b.jsx(sv,{classNames:T,styles:C,__staticSelector:k||"YearLevelGroup",ref:t,size:F,unstyled:A,...B,children:H})});H5.classes={...U5.classes,...sv.classes};H5.displayName="@mantine/dates/YearLevelGroup";const Kan={numberOfColumns:1},q5=Me((e,t)=>{const n=xe("MonthLevelGroup",Kan,e),{month:r,locale:i,firstDayOfWeek:s,weekdayFormat:o,weekendDays:a,getDayProps:u,excludeDate:l,minDate:c,maxDate:f,renderDay:d,hideOutsideDates:h,hideWeekdays:p,getDayAriaLabel:m,__onDayClick:g,__onDayMouseEnter:y,withCellSpacing:v,__preventFocus:_,nextIcon:w,previousIcon:E,nextLabel:S,previousLabel:T,onNext:C,onPrevious:A,onLevelClick:k,nextDisabled:N,previousDisabled:O,hasNextLevel:D,classNames:$,styles:F,unstyled:M,numberOfColumns:B,levelControlAriaLabel:U,monthLabelFormat:H,__staticSelector:P,__stopPropagation:z,size:W,static:j,vars:q,...G}=n,ne=I.useRef([]),ce=Array(B).fill(0).map((de,he)=>{const ve=Tt(r).add(he,"months").toDate();return b.jsx(z5,{month:ve,withNext:he===B-1,withPrevious:he===0,monthLabelFormat:H,__stopPropagation:z,__onDayClick:g,__onDayMouseEnter:y,__onDayKeyDown:(Ie,be)=>Aie({levelIndex:he,rowIndex:be.rowIndex,cellIndex:be.cellIndex,event:Ie,controlsRef:ne}),__getDayRef:(Ie,be,Ke)=>{Array.isArray(ne.current[he])||(ne.current[he]=[]),Array.isArray(ne.current[he][Ie])||(ne.current[he][Ie]=[]),ne.current[he][Ie][be]=Ke},levelControlAriaLabel:typeof U=="function"?U(ve):U,locale:i,firstDayOfWeek:s,weekdayFormat:o,weekendDays:a,getDayProps:u,excludeDate:l,minDate:c,maxDate:f,renderDay:d,hideOutsideDates:h,hideWeekdays:p,getDayAriaLabel:m,__preventFocus:_,nextIcon:w,previousIcon:E,nextLabel:S,previousLabel:T,onNext:C,onPrevious:A,onLevelClick:k,nextDisabled:N,previousDisabled:O,hasNextLevel:D,classNames:$,styles:F,unstyled:M,__staticSelector:P||"MonthLevelGroup",size:W,static:j,withCellSpacing:v},he)});return b.jsx(sv,{classNames:$,styles:F,__staticSelector:P||"MonthLevelGroup",ref:t,size:W,...G,children:ce})});q5.classes={...sv.classes,...z5.classes};q5.displayName="@mantine/dates/MonthLevelGroup";var e8e={input:"m_6fa5e2aa"};const Xan={},W5=Me((e,t)=>{const{inputProps:n,wrapperProps:r,placeholder:i,classNames:s,styles:o,unstyled:a,popoverProps:u,modalProps:l,dropdownType:c,children:f,formattedValue:d,dropdownHandlers:h,dropdownOpened:p,onClick:m,clearable:g,onClear:y,clearButtonProps:v,rightSection:_,shouldClear:w,readOnly:E,disabled:S,value:T,name:C,form:A,type:k,...N}=Qbe("PickerInputBase",Xan,e),O=_||(g&&w&&!E&&!S?b.jsx(Gm,{variant:"transparent",onClick:y,unstyled:a,size:n.size||"sm",...v}):null),D=()=>{k==="range"&&Array.isArray(T)&&T[0]&&!T[1]&&y(),h.close()};return b.jsxs(b.Fragment,{children:[c==="modal"&&!E&&b.jsx(Yi,{opened:p,onClose:D,withCloseButton:!1,size:"auto","data-dates-modal":!0,unstyled:a,...l,children:f}),b.jsx(mi.Wrapper,{...r,children:b.jsxs(Po,{position:"bottom-start",opened:p,trapFocus:!0,returnFocus:!0,unstyled:a,...u,disabled:(u==null?void 0:u.disabled)||c==="modal"||E,onClose:()=>{var $;($=u==null?void 0:u.onClose)==null||$.call(u),D()},children:[b.jsx(Po.Target,{children:b.jsx(mi,{"aria-label":d||i,"data-dates-input":!0,"data-read-only":E||void 0,disabled:S,component:"button",type:"button",multiline:!0,onClick:$=>{m==null||m($),h.toggle()},rightSection:O,...n,ref:t,classNames:{...s,input:Xi(e8e.input,s==null?void 0:s.input)},...N,children:d||b.jsx(mi.Placeholder,{error:n.error,unstyled:a,className:s==null?void 0:s.placeholder,style:o==null?void 0:o.placeholder,children:i})})}),b.jsx(Po.Dropdown,{"data-dates-dropdown":!0,children:f})]})}),b.jsx(jje,{value:T,name:C,form:A,type:k})]})});W5.classes=e8e;W5.displayName="@mantine/dates/PickerInputBase";const vye=e=>e==="range"?[null,null]:e==="multiple"?[]:null;function Rie({type:e,value:t,defaultValue:n,onChange:r,applyTimezone:i=!0}){const s=I.useRef(e),o=tc(),[a,u,l]=Ss({value:L0("add",t,o.getTimezone(),!i),defaultValue:L0("add",n,o.getTimezone(),!i),finalValue:vye(e),onChange:f=>{r==null||r(L0("remove",f,o.getTimezone(),!i))}});let c=a;return s.current!==e&&(s.current=e,t===void 0&&(c=n!==void 0?n:vye(e),u(c))),[c,u,l]}function KB(e,t){return e?e==="month"?0:e==="year"?1:2:t||0}function Qan(e){return e===0?"month":e===1?"year":"decade"}function h2(e,t,n){return Qan(eh(KB(e,0),KB(t,0),KB(n,2)))}const Jan={maxLevel:"decade",minLevel:"month",__updateDateOnYearSelect:!0,__updateDateOnMonthSelect:!0},G5=Me((e,t)=>{const n=xe("Calendar",Jan,e),{vars:r,maxLevel:i,minLevel:s,defaultLevel:o,level:a,onLevelChange:u,date:l,defaultDate:c,onDateChange:f,numberOfColumns:d,columnsToScroll:h,ariaLabels:p,onYearSelect:m,onMonthSelect:g,onYearMouseEnter:y,onMonthMouseEnter:v,__updateDateOnYearSelect:_,__updateDateOnMonthSelect:w,firstDayOfWeek:E,weekdayFormat:S,weekendDays:T,getDayProps:C,excludeDate:A,renderDay:k,hideOutsideDates:N,hideWeekdays:O,getDayAriaLabel:D,monthLabelFormat:$,nextIcon:F,previousIcon:M,__onDayClick:B,__onDayMouseEnter:U,withCellSpacing:H,monthsListFormat:P,getMonthControlProps:z,yearLabelFormat:W,yearsListFormat:j,getYearControlProps:q,decadeLabelFormat:G,classNames:ne,styles:ce,unstyled:de,minDate:he,maxDate:ve,locale:Ie,__staticSelector:be,size:Ke,__preventFocus:Ue,__stopPropagation:yt,onNextDecade:it,onPreviousDecade:_e,onNextYear:ke,onPreviousYear:ze,onNextMonth:ct,onPreviousMonth:Ot,static:We,__timezoneApplied:ge,...ht}=n,{resolvedClassNames:vt,resolvedStyles:me}=Hm({classNames:ne,styles:ce,props:n}),[Ae,He]=Ss({value:a?h2(a,s,i):void 0,defaultValue:o?h2(o,s,i):void 0,finalValue:h2(void 0,s,i),onChange:u}),[ut,_t]=Rie({type:"default",value:l,defaultValue:c,onChange:f,applyTimezone:!ge}),Ln={__staticSelector:be||"Calendar",styles:me,classNames:vt,unstyled:de,size:Ke},Cr=tc(),Fn=h||d||1,cr=ut||L0("add",new Date,Cr.getTimezone()),gn=()=>{const In=Tt(cr).add(Fn,"month").toDate();ct==null||ct(In),_t(In)},An=()=>{const In=Tt(cr).subtract(Fn,"month").toDate();Ot==null||Ot(In),_t(In)},nr=()=>{const In=Tt(cr).add(Fn,"year").toDate();ke==null||ke(In),_t(In)},rr=()=>{const In=Tt(cr).subtract(Fn,"year").toDate();ze==null||ze(In),_t(In)},zo=()=>{const In=Tt(cr).add(10*Fn,"year").toDate();it==null||it(In),_t(In)},$i=()=>{const In=Tt(cr).subtract(10*Fn,"year").toDate();_e==null||_e(In),_t(In)};return b.jsxs(pe,{ref:t,size:Ke,"data-calendar":!0,...ht,children:[Ae==="month"&&b.jsx(q5,{month:cr,minDate:he,maxDate:ve,firstDayOfWeek:E,weekdayFormat:S,weekendDays:T,getDayProps:C,excludeDate:A,renderDay:k,hideOutsideDates:N,hideWeekdays:O,getDayAriaLabel:D,onNext:gn,onPrevious:An,hasNextLevel:i!=="month",onLevelClick:()=>He("year"),numberOfColumns:d,locale:Ie,levelControlAriaLabel:p==null?void 0:p.monthLevelControl,nextLabel:p==null?void 0:p.nextMonth,nextIcon:F,previousLabel:p==null?void 0:p.previousMonth,previousIcon:M,monthLabelFormat:$,__onDayClick:B,__onDayMouseEnter:U,__preventFocus:Ue,__stopPropagation:yt,static:We,withCellSpacing:H,...Ln}),Ae==="year"&&b.jsx(H5,{year:cr,numberOfColumns:d,minDate:he,maxDate:ve,monthsListFormat:P,getMonthControlProps:z,locale:Ie,onNext:nr,onPrevious:rr,hasNextLevel:i!=="month"&&i!=="year",onLevelClick:()=>He("decade"),levelControlAriaLabel:p==null?void 0:p.yearLevelControl,nextLabel:p==null?void 0:p.nextYear,nextIcon:F,previousLabel:p==null?void 0:p.previousYear,previousIcon:M,yearLabelFormat:W,__onControlMouseEnter:v,__onControlClick:(In,Mi)=>{w&&_t(Mi),He(h2("month",s,i)),g==null||g(Mi)},__preventFocus:Ue,__stopPropagation:yt,withCellSpacing:H,...Ln}),Ae==="decade"&&b.jsx(V5,{decade:cr,minDate:he,maxDate:ve,yearsListFormat:j,getYearControlProps:q,locale:Ie,onNext:zo,onPrevious:$i,numberOfColumns:d,nextLabel:p==null?void 0:p.nextDecade,nextIcon:F,previousLabel:p==null?void 0:p.previousDecade,previousIcon:M,decadeLabelFormat:G,__onControlMouseEnter:y,__onControlClick:(In,Mi)=>{_&&_t(Mi),He(h2("year",s,i)),m==null||m(Mi)},__preventFocus:Ue,__stopPropagation:yt,withCellSpacing:H,...Ln})]})});G5.classes={...V5.classes,...H5.classes,...q5.classes};G5.displayName="@mantine/dates/Calendar";function Zan(e){const{maxLevel:t,minLevel:n,defaultLevel:r,level:i,onLevelChange:s,nextIcon:o,previousIcon:a,date:u,defaultDate:l,onDateChange:c,numberOfColumns:f,columnsToScroll:d,ariaLabels:h,onYearSelect:p,onMonthSelect:m,onYearMouseEnter:g,onMonthMouseEnter:y,onNextMonth:v,onPreviousMonth:_,onNextYear:w,onPreviousYear:E,onNextDecade:S,onPreviousDecade:T,withCellSpacing:C,__updateDateOnYearSelect:A,__updateDateOnMonthSelect:k,firstDayOfWeek:N,weekdayFormat:O,weekendDays:D,getDayProps:$,excludeDate:F,renderDay:M,hideOutsideDates:B,hideWeekdays:U,getDayAriaLabel:H,monthLabelFormat:P,monthsListFormat:z,getMonthControlProps:W,yearLabelFormat:j,yearsListFormat:q,getYearControlProps:G,decadeLabelFormat:ne,allowSingleDateInRange:ce,allowDeselect:de,minDate:he,maxDate:ve,locale:Ie,...be}=e;return{calendarProps:{maxLevel:t,minLevel:n,defaultLevel:r,level:i,onLevelChange:s,nextIcon:o,previousIcon:a,date:u,defaultDate:l,onDateChange:c,numberOfColumns:f,columnsToScroll:d,ariaLabels:h,onYearSelect:p,onMonthSelect:m,onYearMouseEnter:g,onMonthMouseEnter:y,onNextMonth:v,onPreviousMonth:_,onNextYear:w,onPreviousYear:E,onNextDecade:S,onPreviousDecade:T,withCellSpacing:C,__updateDateOnYearSelect:A,__updateDateOnMonthSelect:k,firstDayOfWeek:N,weekdayFormat:O,weekendDays:D,getDayProps:$,excludeDate:F,renderDay:M,hideOutsideDates:B,hideWeekdays:U,getDayAriaLabel:H,monthLabelFormat:P,monthsListFormat:z,getMonthControlProps:W,yearLabelFormat:j,yearsListFormat:q,getYearControlProps:G,decadeLabelFormat:ne,allowSingleDateInRange:ce,allowDeselect:de,minDate:he,maxDate:ve,locale:Ie},others:be}}function bye(e,t){const n=[...t].sort((r,i)=>r.getTime()-i.getTime());return Tt(n[0]).startOf("day").subtract(1,"ms").isBefore(e)&&Tt(n[1]).endOf("day").add(1,"ms").isAfter(e)}function eun({type:e,level:t,value:n,defaultValue:r,onChange:i,allowSingleDateInRange:s,allowDeselect:o,onMouseLeave:a,applyTimezone:u=!0}){const[l,c]=Rie({type:e,value:n,defaultValue:r,onChange:i,applyTimezone:u}),[f,d]=I.useState(e==="range"&&l[0]&&!l[1]?l[0]:null),[h,p]=I.useState(null),m=S=>{if(e==="range"){if(f instanceof Date&&!l[1]){if(Tt(S).isSame(f,t)&&!s){d(null),p(null),c([null,null]);return}const T=[S,f];T.sort((C,A)=>C.getTime()-A.getTime()),c(T),p(null),d(null);return}if(l[0]&&!l[1]&&Tt(S).isSame(l[0],t)&&!s){d(null),p(null),c([null,null]);return}c([S,null]),p(null),d(S);return}if(e==="multiple"){l.some(T=>Tt(T).isSame(S,t))?c(l.filter(T=>!Tt(T).isSame(S,t))):c([...l,S]);return}l&&o&&Tt(S).isSame(l,t)?c(null):c(S)},g=S=>f instanceof Date&&h instanceof Date?bye(S,[h,f]):l[0]instanceof Date&&l[1]instanceof Date?bye(S,l):!1,y=e==="range"?S=>{a==null||a(S),p(null)}:a,v=S=>l[0]instanceof Date&&Tt(S).isSame(l[0],t)?!(h&&Tt(h).isBefore(l[0])):!1,_=S=>l[1]instanceof Date?Tt(S).isSame(l[1],t):!(l[0]instanceof Date)||!h?!1:Tt(h).isBefore(l[0])&&Tt(S).isSame(l[0],t),w=S=>{if(e==="range")return{selected:l.some(C=>C&&Tt(C).isSame(S,t)),inRange:g(S),firstInRange:v(S),lastInRange:_(S),"data-autofocus":!!l[0]&&Tt(l[0]).isSame(S,t)||void 0};if(e==="multiple")return{selected:l.some(C=>C&&Tt(C).isSame(S,t)),"data-autofocus":!!l[0]&&Tt(l[0]).isSame(S,t)||void 0};const T=Tt(l).isSame(S,t);return{selected:T,"data-autofocus":T||void 0}},E=e==="range"&&f?p:()=>{};return I.useEffect(()=>{e==="range"&&!l[0]&&!l[1]&&d(null)},[n]),{onDateChange:m,onRootMouseLeave:y,onHoveredDateChange:E,getControlProps:w,_value:l,setValue:c}}const tun={type:"default",defaultLevel:"month",numberOfColumns:1},Y5=Me((e,t)=>{const n=xe("DatePicker",tun,e),{classNames:r,styles:i,vars:s,type:o,defaultValue:a,value:u,onChange:l,__staticSelector:c,getDayProps:f,allowSingleDateInRange:d,allowDeselect:h,onMouseLeave:p,numberOfColumns:m,hideOutsideDates:g,__onDayMouseEnter:y,__onDayClick:v,__timezoneApplied:_,...w}=n,{onDateChange:E,onRootMouseLeave:S,onHoveredDateChange:T,getControlProps:C}=eun({type:o,level:"day",allowDeselect:h,allowSingleDateInRange:d,value:u,defaultValue:a,onChange:l,onMouseLeave:p,applyTimezone:!_}),{resolvedClassNames:A,resolvedStyles:k}=Hm({classNames:r,styles:i,props:n}),N=tc();return b.jsx(G5,{ref:t,minLevel:"month",classNames:A,styles:k,__staticSelector:c||"DatePicker",onMouseLeave:S,numberOfColumns:m,hideOutsideDates:g??m!==1,__onDayMouseEnter:(O,D)=>{T(D),y==null||y(O,D)},__onDayClick:(O,D)=>{E(D),v==null||v(O,D)},getDayProps:O=>({...C(O),...f==null?void 0:f(O)}),...w,date:L0("add",w.date,N.getTimezone(),_),__timezoneApplied:!0})});Y5.classes=G5.classes;Y5.displayName="@mantine/dates/DatePicker";function nun({type:e,value:t,defaultValue:n,onChange:r,locale:i,format:s,closeOnChange:o,sortDates:a,labelSeparator:u,valueFormatter:l}){const c=tc(),[f,d]=xL(!1),[h,p]=Rie({type:e,value:t,defaultValue:n,onChange:r}),m=can({type:e,date:h,locale:c.getLocale(i),format:s,labelSeparator:c.getLabelSeparator(u),formatter:l}),g=_=>{o&&(e==="default"&&d.close(),e==="range"&&_[0]&&_[1]&&d.close()),p(a&&e==="multiple"?[..._].sort((w,E)=>w.getTime()-E.getTime()):_)},y=()=>g(e==="range"?[null,null]:e==="multiple"?[]:null),v=e==="range"?!!h[0]:e==="multiple"?h.length>0:h!==null;return{_value:h,setValue:g,onClear:y,shouldClear:v,formattedValue:m,dropdownOpened:f,dropdownHandlers:d}}const run={type:"default",valueFormat:"MMMM D, YYYY",closeOnChange:!0,sortDates:!0,dropdownType:"popover"},Nie=Me((e,t)=>{const n=xe("DatePickerInput",run,e),{type:r,value:i,defaultValue:s,onChange:o,valueFormat:a,labelSeparator:u,locale:l,classNames:c,styles:f,unstyled:d,closeOnChange:h,size:p,variant:m,dropdownType:g,sortDates:y,minDate:v,maxDate:_,vars:w,defaultDate:E,valueFormatter:S,...T}=n,{resolvedClassNames:C,resolvedStyles:A}=Hm({classNames:c,styles:f,props:n}),{calendarProps:k,others:N}=Zan(T),{_value:O,setValue:D,formattedValue:$,dropdownHandlers:F,dropdownOpened:M,onClear:B,shouldClear:U}=nun({type:r,value:i,defaultValue:s,onChange:o,locale:l,format:a,labelSeparator:u,closeOnChange:h,sortDates:y,valueFormatter:S}),H=Array.isArray(O)?O[0]||E:O||E,P=tc();return b.jsx(W5,{formattedValue:$,dropdownOpened:M,dropdownHandlers:F,classNames:C,styles:A,unstyled:d,ref:t,onClear:B,shouldClear:U,value:O,size:p,variant:m,dropdownType:g,...N,type:r,__staticSelector:"DatePickerInput",children:b.jsx(Y5,{...k,size:p,variant:m,type:r,value:O,defaultDate:H||ban({maxDate:_,minDate:v,timezone:P.getTimezone()}),onChange:D,locale:l,classNames:C,styles:A,unstyled:d,__staticSelector:"DatePickerInput",__stopPropagation:g==="popover",minDate:v,maxDate:_,date:L0("add",k.date,P.getTimezone()),__timezoneApplied:!0})})});Nie.classes={...W5.classes,...Y5.classes};Nie.displayName="@mantine/dates/DatePickerInput";function iun(e,t){const n=Object.values(e).map(r=>[r.startTime,r.endTime]).flat();return t[0]===null||t[1]===null?!1:Math.min(...n)>=t[0].getTime()&&Math.max(...n)<=t[1].getTime()}function sun({studyId:e,allParticipants:t}){const n=Yh(),[r,i]=x1(),s=t.filter(p=>p.completed).map(p=>Math.max(...Object.values(p.answers).map(m=>m.endTime).filter(m=>m!==void 0))).filter(p=>Number.isFinite(p)),[o,a]=I.useState([new Date(new Date(Math.min(...s.length>0?s:[new Date().getTime()])).setHours(0,0,0,0)),new Date(new Date(Math.max(...s.length>0?s:[new Date().getTime()])).setHours(24,0,0,0))]),[u,l,c,f]=I.useMemo(()=>{const p=t.filter(y=>!y.rejected&&y.completed),m=t.filter(y=>!y.rejected&&!y.completed),g=t.filter(y=>y.rejected);return[p,m,g,p.filter(y=>iun(y.answers,o))]},[t,o]),d=I.useMemo(()=>{var p,m;return f.length>0?[{Date:(p=o[0])==null?void 0:p.getTime(),Participants:0},...f.map(g=>Math.max(...Object.values(g.answers).map(y=>y.endTime).flat())).sort((g,y)=>g-y).map((g,y)=>({Date:g,Participants:y})),{Date:(m=o[1])==null?void 0:m.getTime(),Participants:f.length}]:[]},[f,o]),h=I.useMemo(()=>{var p,m;return{width:i.width-40-8,height:200,mark:{type:"line",interpolate:"step-before"},encoding:{x:{field:"Date",type:"temporal",scale:{domain:[(p=o[0])==null?void 0:p.getTime(),(m=o[1])==null?void 0:m.getTime()]}},y:{field:"Participants",type:"quantitative"}},data:{values:d}}},[i.width,o,d]);return b.jsx($c,{children:b.jsxs(Fb,{ref:r,padding:"lg",shadow:"md",withBorder:!0,children:[b.jsxs(Nt,{align:"center",mb:"xs",justify:"space-between",children:[b.jsxs(Nt,{direction:"row",align:"center",children:[b.jsx(li,{order:5,children:e}),b.jsx(yOe,{completed:u.length,inProgress:l.length,rejected:c.length,filteredCompleted:f.length})]}),b.jsxs(ls,{children:[b.jsx(UZ,{allParticipants:t,studyId:e}),b.jsx(ui,{label:"Analyze and manage study data",children:b.jsx(fn,{onClick:p=>{!p.ctrlKey&&!p.metaKey&&(p.preventDefault(),n(`/analysis/stats/${e}`))},px:4,component:"a",href:`${Hu}analysis/stats/${e}`,children:b.jsx(yQe,{})})})]})]}),b.jsx(Nie,{type:"range",label:"Time Filter",placeholder:"Select a date range",value:o,onChange:a}),d.length>0?b.jsxs(b.Fragment,{children:[b.jsx(Xe,{mt:16,children:"Finished Participants"}),b.jsx(Mq,{spec:h,actions:!1})]}):b.jsx(pe,{h:293.4,children:b.jsx(Oc,{style:{height:"100%"},children:b.jsx(Xe,{children:"Not enough participants for chart"})})})]})})}function oun({globalConfig:e}){const[t,n]=I.useState(!1),[r,i]=I.useState({}),[s,o]=I.useState({}),{storageEngine:a}=Cs(),{user:u}=r_();I.useEffect(()=>{(async()=>{n(!0);const f={},d={},h=async m=>{const g=await S4(m,e);if(a){if(f[m]=await a.getAllParticipantsDataByStudy(m),g===null)return;if(a instanceof bc){const y=await a.getModes(m);d[m]=y.analyticsInterfacePubliclyAccessible}}};await(async()=>{const m=e.configsList.map(g=>h(g));try{await Promise.all(m),i(f),o(d)}catch(g){console.error("Error fetching data:",g)}finally{n(!1)}})()})()},[e,a]);const l=e.configsList.map(c=>r[c]&&((s[c]||u.isAdmin)&&!e.configs[c].test?b.jsx(qa.Col,{span:{md:12,xl:6},children:b.jsx(sun,{studyId:c,allParticipants:r[c]})},`${c}-panel`):null));return b.jsxs(b.Fragment,{children:[b.jsx(XC,{studyIds:e.configsList}),b.jsx(ni.Main,{children:b.jsx($c,{fluid:!0,children:b.jsxs(pe,{children:[b.jsx(li,{mb:20,order:4,children:"Your Studies:"}),b.jsxs(qa,{children:[l.length>0?l:b.jsx($c,{mt:100,children:b.jsx(Xe,{children:"No studies to show. If you believe that this is in error, make sure that you are logged in."})}),b.jsx(Fl,{visible:t})]})]})})})]})}function aun(){const{user:e,triggerAuth:t}=r_(),{storageEngine:n}=Cs(),[r,i]=I.useState(!1),[s,o]=I.useState([]),[a,u]=I.useState(!1),[l,c]=I.useState(!1),[f,d]=I.useState(!1),[h,p]=I.useState(!1),[m,g]=I.useState(!1),[y,v]=I.useState(""),[_,w]=I.useState(null),E=Vxe({initialValues:{email:""},validate:{email:vat("Invalid email")}});I.useEffect(()=>{(async()=>{if(u(!0),n instanceof bc){const D=await(n==null?void 0:n.getUserManagementData("authentication"));i(D==null?void 0:D.isEnabled);const $=await(n==null?void 0:n.getUserManagementData("adminUsers"));$&&$.adminUsersList&&o($==null?void 0:$.adminUsersList.map(F=>F.email))}else i(!1);u(!1)})()},[n]);const S=async()=>{if(u(!0),n instanceof bc){const O=await Oje(n,u);O&&O.email?(w({email:O.email,uid:O.uid}),p(!0)):g(!0)}u(!1)},T=async O=>{u(!0),n instanceof bc&&O&&(await n.changeAuth(!0),await n.addAdminUser(O),o([O.email]),i(!0),t()),p(!1),u(!1)},C=async()=>{if(u(!0),n instanceof bc){await n.addAdminUser({email:E.values.email,uid:null});const O=await n.getUserManagementData("adminUsers");o(O==null?void 0:O.adminUsersList.map(D=>D.email))}u(!1),c(!1),E.setValues({email:""})},A=O=>{d(!0),v(O)},k=async()=>{if(u(!0),n instanceof bc){await n.removeAdminUser(y);const O=await n.getUserManagementData("adminUsers");o(O==null?void 0:O.adminUsersList.map(D=>D.email))}d(!1),u(!1)},N=I.useMemo(()=>n instanceof bc,[n]);return b.jsxs(b.Fragment,{children:[b.jsx($c,{children:b.jsxs(Fb,{withBorder:!0,style:{backgroundColor:"#FAFAFA"},children:[b.jsx(li,{mb:20,order:3,children:"Authentication"}),r?b.jsx(Nt,{children:b.jsx(Xe,{children:"Authentication is enabled."})}):b.jsxs(Nt,{justify:"space-between",children:[b.jsx(pe,{children:b.jsx(Xe,{children:"Authentication is currently disabled."})}),b.jsx(ui,{label:"You can only enable auth when using Firebase",disabled:N,children:b.jsx(fn,{onClick:O=>N?S():O.preventDefault(),color:"green","data-disabled":N?void 0:!0,style:{"&[dataDisabled]":{pointerEvents:"all"}},children:"Enable Authentication"})})]}),r?b.jsxs(Nt,{mt:40,direction:"column",children:[b.jsxs(Nt,{style:{borderBottom:"1px solid #dedede"},direction:"row",justify:"space-between",mb:15,pb:15,children:[b.jsx(li,{order:6,children:"Enabled Users"}),b.jsx(DY,{style:{cursor:"pointer"},onClick:()=>c(!0)})]}),s.length>0?s.map(O=>{var D;return b.jsxs(Nt,{justify:"space-between",mb:10,children:[b.jsx(Xe,{children:O}),O===((D=e.user)==null?void 0:D.email)?b.jsx(Xe,{color:"blue",size:"xs",children:"You"}):b.jsx(Mb,{variant:"subtle",onClick:()=>A(O),children:b.jsx(Bwe,{color:"red"})})]},O)}):null]}):null]})}),b.jsx(Yi,{opened:l,onClose:()=>c(!1),title:"Add Admin User",children:b.jsxs(pe,{component:"form",onSubmit:E.onSubmit(()=>C()),children:[b.jsx(Jg,{leftSection:b.jsx(dQe,{}),placeholder:"User Gmail Account",...E.getInputProps("email")}),b.jsxs(Nt,{mt:30,justify:"right",children:[b.jsx(fn,{mr:5,variant:"subtle",color:"red",onClick:()=>c(!1),children:"Cancel"}),b.jsx(fn,{type:"submit",children:"Save"})]})]})}),b.jsxs(Yi,{opened:f,size:"large",onClose:()=>d(!1),title:b.jsxs(Xe,{fw:700,children:["Remove",y,"?"]}),children:[b.jsxs(Xe,{mt:40,children:["Are you sure you want to remove",b.jsx("b",{children:y})," ","as an administrator?"]}),b.jsxs(Nt,{mt:40,justify:"right",children:[b.jsx(fn,{mr:5,variant:"subtle",color:"red",onClick:()=>d(!1),children:"Cancel"}),b.jsx(fn,{onClick:()=>k(),children:"Yes, I'm sure."})]})]}),b.jsxs(Yi,{opened:h,size:"md",onClose:()=>p(!1),title:b.jsx(Xe,{fw:700,children:"Enable Authentication?"}),children:[b.jsxs(Xe,{mt:40,children:["User"," ",b.jsx("b",{children:_==null?void 0:_.email})," ","will be added as an administrator to this application. After enabling authentication, you'll be able to add additional users below. This action cannot be undone."]}),b.jsxs(Nt,{mt:40,justify:"right",children:[b.jsx(fn,{mr:5,variant:"subtle",color:"red",onClick:()=>p(!1),children:"Cancel"}),b.jsx(fn,{onClick:()=>T(_),children:"Yes, I'm sure."})]})]}),b.jsxs(Yi,{opened:m,size:"md",onClose:()=>g(!1),title:b.jsx(Xe,{fw:700,children:"An Error Occurred."}),children:[b.jsxs(Xe,{mt:40,children:["An error has occurred when trying to enable authentication. Please consult the"," ",b.jsx("a",{href:"https://revisit.dev/docs/data-and-deployment/authentication-authorization/adding-removing-ui/",target:"_blank",rel:"noreferrer",children:"documentation"})," ","for more information."]}),b.jsx(Nt,{mt:40,justify:"right",children:b.jsx(fn,{mr:5,onClick:()=>g(!1),children:"Okay"})})]}),b.jsx(Fl,{visible:a})]})}class uun extends mOe{constructor(){super("localStorage");pu(this,"studyDatabase");pu(this,"studyId")}async connect(){this.connected=!0}async initializeStudyDb(n,r){this.studyId=n,this.studyDatabase=await dw.createInstance({name:n});const i=await this.getCurrentConfigHash(),s=await aM(JSON.stringify(r));i&&i!==s&&(await this.studyDatabase.removeItem("sequenceArray"),await this.clearCurrentParticipantId()),this.studyDatabase.setItem("currentConfigHash",s);const o=await this.studyDatabase.getItem("configs");await this.studyDatabase.setItem("configs",{...o,[s]:r})}async initializeParticipantSession(n,r,i,s,o){var f;if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");if(await this.getCurrentParticipantId(o),!this.currentParticipantId)throw new Error("Participant not initialized");const a=await this.studyDatabase.getItem(this.currentParticipantId);if(a)return a;const u=await this.getModes(n),l=await aM(JSON.stringify(i)),c={participantId:this.currentParticipantId,participantConfigHash:l,sequence:await this.getSequence(),answers:{},searchParams:r,metadata:s,completed:!1,rejected:!1};return u.dataCollectionEnabled&&await((f=this.studyDatabase)==null?void 0:f.setItem(this.currentParticipantId,c)),c}async getCurrentConfigHash(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");return await this.studyDatabase.getItem("currentConfigHash")}async getAllConfigsFromHash(n,r){return await dw.createInstance({name:r}).getItem("configs")||{}}async getCurrentParticipantId(n){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const r=await this.studyDatabase.getItem("currentParticipant");if(n)return this.currentParticipantId=n,await this.studyDatabase.setItem("currentParticipant",n),n;if(r)return this.currentParticipantId=r,r;const i=oM();return await this.studyDatabase.setItem("currentParticipant",i),this.currentParticipantId=i,i}async clearCurrentParticipantId(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");await this.studyDatabase.removeItem("currentParticipant")}async saveAnswers(n){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");if(!this.currentParticipantId)throw new Error("Participant not initialized");const r=await this.studyDatabase.getItem(this.currentParticipantId);if(!r)throw new Error("Participant not initialized");r.answers=n,await this.studyDatabase.setItem(this.currentParticipantId,r)}async setSequenceArray(n){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");this.studyDatabase.setItem("sequenceArray",n)}async getSequence(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=await this.studyDatabase.getItem("sequenceArray");if(!n)throw new Error("Latin square not initialized");if(!this.studyId)throw new Error("Study ID not initialized");const r=await this.getModes(this.studyId),i=r.dataCollectionEnabled?n.pop():n[Math.floor(Math.random()*n.length-1)];if(!i)throw new Error("Latin square is empty");return r.dataCollectionEnabled&&await this.studyDatabase.setItem("sequenceArray",n),i}async getSequenceArray(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");return await this.studyDatabase.getItem("sequenceArray")}async getAllParticipantsData(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=[];return await this.studyDatabase.iterate((r,i)=>{i!=="config"&&i!=="currentParticipant"&&i!=="sequenceArray"&&i!=="configs"&&i!=="currentConfigHash"&&i!=="modes"&&n.push(r)}),n}async getAllParticipantsDataByStudy(n){const r=dw.createInstance({name:n}),i=[];return await r.iterate((s,o)=>{o!=="config"&&o!=="currentParticipant"&&o!=="sequenceArray"&&o!=="configs"&&o!=="currentConfigHash"&&o!=="modes"&&i.push(s)}),i}async getParticipantData(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=await this.studyDatabase.getItem("currentParticipant");return n?await this.studyDatabase.getItem(n):null}async nextParticipant(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=oM();this.studyDatabase.setItem("currentParticipant",n)}async verifyCompletion(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=await this.getParticipantData();if(!n)throw new Error("Participant not initialized");return n.completed=!0,await this.studyDatabase.setItem(this.currentParticipantId,n),!0}async validateUser(n){return!0}async rejectParticipant(n,r){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const i=await this.studyDatabase.getItem(r);if(!i)throw new Error("Participant not found");if(i.rejected)return;i.rejected=!0;const s=await this.studyDatabase.getItem("sequenceArray");s&&(s.unshift(i.sequence),this.setSequenceArray(s)),await this.studyDatabase.setItem(r,i)}async setMode(n,r,i){this.studyDatabase=await dw.createInstance({name:n});const s=await this.studyDatabase.getItem("modes");if(!s)throw new Error("Modes not initialized");s[r]=i,this.studyDatabase.setItem("modes",s)}async getModes(n){this.studyDatabase=await dw.createInstance({name:n});const r=await this.studyDatabase.getItem("modes");if(r)return r;const i={dataCollectionEnabled:!0,studyNavigatorEnabled:!0,analyticsInterfacePubliclyAccessible:!0};return this.studyDatabase.setItem("modes",i),i}_verifyStudyDatabase(n){return n!==void 0}}async function lun(){let e,t=!1;{const n=new bc;await n.connect(),n.isConnected()?e=n:t=!0}if(t){const n=new uun;await n.connect(),e=n}return e}function Z_({title:e}){const t=Oy();return I.useEffect(()=>{document.title=e},[t,e]),null}async function cun(){const t=await(await fetch(`${Hu}global.json`)).text();return URt(t)}function fun(){const[e,t]=I.useState(null),[n,r]=I.useState({});I.useEffect(()=>{async function a(){e&&r(await hNt(e))}a()},[e]),I.useEffect(()=>{e||cun().then(a=>{t(a)})},[e]);const{storageEngine:i,setStorageEngine:s}=Cs();I.useEffect(()=>{if(i!==void 0)return;async function a(){const u=await lun();s(u)}a()},[s,i]);const o=async a=>i instanceof bc?!(await i.getModes(a)).analyticsInterfacePubliclyAccessible:!1;return e?b.jsx(tQe,{basename:Hu,children:b.jsx(d4t,{children:b.jsx(aQe,{children:b.jsx(ni,{padding:"md",header:{height:70},children:b.jsxs(QXe,{children:[b.jsx(Cp,{path:"/",element:b.jsxs(b.Fragment,{children:[b.jsx(Z_,{title:"ReVISit | Home"}),b.jsx(XC,{studyIds:e.configsList}),b.jsx(Sst,{globalConfig:e,studyConfigs:n})]})}),b.jsx(Cp,{path:"/:studyId/*",element:b.jsxs(b.Fragment,{children:[b.jsx(Z_,{title:"ReVISit | Study"}),b.jsx(pNt,{globalConfig:e})]})}),b.jsx(Cp,{path:"/analysis/dashboard",element:b.jsxs(b.Fragment,{children:[b.jsx(Z_,{title:"ReVISit | Analysis"}),b.jsx(oun,{globalConfig:e})]})}),b.jsx(Cp,{path:"/analysis",element:b.jsx(RV,{to:"/analysis/dashboard"})}),b.jsx(Cp,{path:"/analysis/stats/:studyId/:tab/:trialId?",element:b.jsxs(b.Fragment,{children:[b.jsx(Z_,{title:"ReVISit | Analysis"}),b.jsx(gye,{paramToCheck:"studyId",paramCallback:o,children:b.jsx(oan,{globalConfig:e})})]})}),b.jsx(Cp,{path:"/analysis/stats/:studyId",element:b.jsx(RV,{to:"./table",replace:!0})}),b.jsx(Cp,{path:"/settings",element:b.jsxs(gye,{children:[b.jsx(Z_,{title:"ReVISit | Settings"}),b.jsx(XC,{studyIds:e.configsList}),b.jsx(ni.Main,{children:b.jsx(aun,{})})]})}),b.jsx(Cp,{path:"/login",element:b.jsxs(b.Fragment,{children:[b.jsx(Z_,{title:"ReVISit | Login"}),b.jsx(XC,{studyIds:e.configsList}),b.jsx(ni.Main,{children:b.jsx(aan,{})})]})})]})})})})}):null}XB.createRoot(document.getElementById("root")).render(b.jsx(_r.StrictMode,{children:b.jsx(aXe,{children:b.jsxs(tbe,{children:[b.jsx(Jm,{}),b.jsx(fun,{})]})})}))});export default dun();
